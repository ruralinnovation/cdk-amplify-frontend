var YA=Object.defineProperty;var XA=(x,P,e)=>P in x?YA(x,P,{enumerable:!0,configurable:!0,writable:!0,value:e}):x[P]=e;var Y_=(x,P,e)=>(XA(x,typeof P!="symbol"?P+"":P,e),e);function ZA(x,P){for(var e=0;e<P.length;e++){const v=P[e];if(typeof v!="string"&&!Array.isArray(v)){for(const M in v)if(M!=="default"&&!(M in x)){const r=Object.getOwnPropertyDescriptor(v,M);r&&Object.defineProperty(x,M,r.get?r:{enumerable:!0,get:()=>v[M]})}}}return Object.freeze(Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}))}(function(){const P=document.createElement("link").relList;if(P&&P.supports&&P.supports("modulepreload"))return;for(const M of document.querySelectorAll('link[rel="modulepreload"]'))v(M);new MutationObserver(M=>{for(const r of M)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&v(n)}).observe(document,{childList:!0,subtree:!0});function e(M){const r={};return M.integrity&&(r.integrity=M.integrity),M.referrerPolicy&&(r.referrerPolicy=M.referrerPolicy),M.crossOrigin==="use-credentials"?r.credentials="include":M.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function v(M){if(M.ep)return;M.ep=!0;const r=e(M);fetch(M.href,r)}})();(function(x){function P(at){return at&&at.__esModule&&Object.prototype.hasOwnProperty.call(at,"default")?at.default:at}function e(at,Qe){return Qe={exports:{}},at(Qe,Qe.exports),Qe.exports}var v=e(function(at){function Qe(gt){return at.exports=Qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(yt){return yt.__proto__||Object.getPrototypeOf(yt)},at.exports.__esModule=!0,at.exports.default=at.exports,Qe(gt)}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports});P(v);var M=e(function(at){function Qe(gt,ct){for(;!Object.prototype.hasOwnProperty.call(gt,ct)&&(gt=v(gt),gt!==null););return gt}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports});P(M);var r=e(function(at){function Qe(){return typeof Reflect<"u"&&Reflect.get?(at.exports=Qe=Reflect.get.bind(),at.exports.__esModule=!0,at.exports.default=at.exports):(at.exports=Qe=function(ct,yt,Ct){var Ut=M(ct,yt);if(Ut){var tr=Object.getOwnPropertyDescriptor(Ut,yt);return tr.get?tr.get.call(arguments.length<3?ct:Ct):tr.value}},at.exports.__esModule=!0,at.exports.default=at.exports),Qe.apply(this,arguments)}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports});P(r);var n=e(function(at){function Qe(gt,ct){return at.exports=Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ct,Ut){return Ct.__proto__=Ut,Ct},at.exports.__esModule=!0,at.exports.default=at.exports,Qe(gt,ct)}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports});P(n);var l=e(function(at){function Qe(gt,ct){if(typeof ct!="function"&&ct!==null)throw new TypeError("Super expression must either be null or a function");gt.prototype=Object.create(ct&&ct.prototype,{constructor:{value:gt,writable:!0,configurable:!0}}),Object.defineProperty(gt,"prototype",{writable:!1}),ct&&n(gt,ct)}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports});P(l);var c=e(function(at){function Qe(gt){return at.exports=Qe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ct){return typeof ct}:function(ct){return ct&&typeof Symbol=="function"&&ct.constructor===Symbol&&ct!==Symbol.prototype?"symbol":typeof ct},at.exports.__esModule=!0,at.exports.default=at.exports,Qe(gt)}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports}),t=P(c),f=e(function(at){function Qe(gt){if(gt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return gt}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports});P(f);var a=e(function(at){var Qe=c.default;function gt(ct,yt){if(yt&&(Qe(yt)==="object"||typeof yt=="function"))return yt;if(yt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(ct)}at.exports=gt,at.exports.__esModule=!0,at.exports.default=at.exports});P(a);var o=e(function(at){function Qe(gt){return Function.toString.call(gt).indexOf("[native code]")!==-1}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports});P(o);var u=e(function(at){function Qe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports});P(u);var h=e(function(at){function Qe(gt,ct,yt){return u()?(at.exports=Qe=Reflect.construct.bind(),at.exports.__esModule=!0,at.exports.default=at.exports):(at.exports=Qe=function(Ut,tr,ar){var fr=[null];fr.push.apply(fr,tr);var vr=Function.bind.apply(Ut,fr),Fr=new vr;return ar&&n(Fr,ar.prototype),Fr},at.exports.__esModule=!0,at.exports.default=at.exports),Qe.apply(null,arguments)}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports});P(h);var i=e(function(at){function Qe(gt){var ct=typeof Map=="function"?new Map:void 0;return at.exports=Qe=function(Ct){if(Ct===null||!o(Ct))return Ct;if(typeof Ct!="function")throw new TypeError("Super expression must either be null or a function");if(typeof ct<"u"){if(ct.has(Ct))return ct.get(Ct);ct.set(Ct,Ut)}function Ut(){return h(Ct,arguments,v(this).constructor)}return Ut.prototype=Object.create(Ct.prototype,{constructor:{value:Ut,enumerable:!1,writable:!0,configurable:!0}}),n(Ut,Ct)},at.exports.__esModule=!0,at.exports.default=at.exports,Qe(gt)}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports});P(i);var s=e(function(at){function Qe(gt,ct){(ct==null||ct>gt.length)&&(ct=gt.length);for(var yt=0,Ct=new Array(ct);yt<ct;yt++)Ct[yt]=gt[yt];return Ct}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports});P(s);var p=e(function(at){function Qe(gt){if(Array.isArray(gt))return s(gt)}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports});P(p);var d=e(function(at){function Qe(gt){if(typeof Symbol<"u"&&gt[Symbol.iterator]!=null||gt["@@iterator"]!=null)return Array.from(gt)}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports});P(d);var y=e(function(at){function Qe(gt,ct){if(gt){if(typeof gt=="string")return s(gt,ct);var yt=Object.prototype.toString.call(gt).slice(8,-1);if(yt==="Object"&&gt.constructor&&(yt=gt.constructor.name),yt==="Map"||yt==="Set")return Array.from(gt);if(yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yt))return s(gt,ct)}}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports});P(y);var b=e(function(at){function Qe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports});P(b);var m=e(function(at){function Qe(gt){return p(gt)||d(gt)||y(gt)||b()}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports}),_=P(m),T=e(function(at){function Qe(gt,ct){if(!(gt instanceof ct))throw new TypeError("Cannot call a class as a function")}at.exports=Qe,at.exports.__esModule=!0,at.exports.default=at.exports}),g=P(T),A=e(function(at){function Qe(ct,yt){for(var Ct=0;Ct<yt.length;Ct++){var Ut=yt[Ct];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(ct,Ut.key,Ut)}}function gt(ct,yt,Ct){return yt&&Qe(ct.prototype,yt),Ct&&Qe(ct,Ct),Object.defineProperty(ct,"prototype",{writable:!1}),ct}at.exports=gt,at.exports.__esModule=!0,at.exports.default=at.exports}),k=P(A);function R(){}var L=function(Qe){return Qe};function z(at,Qe){for(var gt in Qe)at[gt]=Qe[gt];return at}function E(at){return at()}function S(){return Object.create(null)}function C(at){at.forEach(E)}function D(at){return typeof at=="function"}function F(at,Qe){return at!=at?Qe==Qe:at!==Qe||at&&t(at)==="object"||typeof at=="function"}function N(at){return Object.keys(at).length===0}function G(at,Qe,gt,ct){if(at){var yt=U(at,Qe,gt,ct);return at[0](yt)}}function U(at,Qe,gt,ct){return at[1]&&ct?z(gt.ctx.slice(),at[1](ct(Qe))):gt.ctx}function X(at,Qe,gt,ct){if(at[2]&&ct){var yt=at[2](ct(gt));if(Qe.dirty===void 0)return yt;if(t(yt)==="object"){for(var Ct=[],Ut=Math.max(Qe.dirty.length,yt.length),tr=0;tr<Ut;tr+=1)Ct[tr]=Qe.dirty[tr]|yt[tr];return Ct}return Qe.dirty|yt}return Qe.dirty}function I(at,Qe,gt,ct,yt,Ct,Ut){var tr=X(Qe,ct,yt,Ct);if(tr){var ar=U(Qe,gt,ct,Ut);at.p(ar,tr)}}function B(at){return at??""}var j=typeof window<"u",H=j?function(){return window.performance.now()}:function(){return Date.now()},K=j?function(at){return requestAnimationFrame(at)}:R,te=new Set;function J(at){te.forEach(function(Qe){Qe.c(at)||(te.delete(Qe),Qe.f())}),te.size!==0&&K(J)}function oe(at){var Qe;return te.size===0&&K(J),{promise:new Promise(function(gt){te.add(Qe={c:at,f:gt})}),abort:function(){te.delete(Qe)}}}function ie(at,Qe){at.appendChild(Qe)}function Q(at,Qe,gt){at.insertBefore(Qe,gt||null)}function V(at){at.parentNode.removeChild(at)}function se(at,Qe){for(var gt=0;gt<at.length;gt+=1)at[gt]&&at[gt].d(Qe)}function re(at){return document.createElement(at)}function ee(at){return document.createElementNS("http://www.w3.org/2000/svg",at)}function ae(at){return document.createTextNode(at)}function fe(){return ae(" ")}function de(){return ae("")}function pe(at,Qe,gt,ct){return at.addEventListener(Qe,gt,ct),function(){return at.removeEventListener(Qe,gt,ct)}}function W(at,Qe,gt){gt==null?at.removeAttribute(Qe):at.getAttribute(Qe)!==gt&&at.setAttribute(Qe,gt)}function ue(at){return Array.from(at.childNodes)}function me(at,Qe,gt,ct){for(var yt=0;yt<at.length;yt+=1){var Ct=at[yt];if(Ct.nodeName===Qe){for(var Ut=0,tr=[];Ut<Ct.attributes.length;){var ar=Ct.attributes[Ut++];gt[ar.name]||tr.push(ar.name)}for(var fr=0;fr<tr.length;fr++)Ct.removeAttribute(tr[fr]);return at.splice(yt,1)[0]}}return ct?ee(Qe):re(Qe)}function be(at,Qe){for(var gt=0;gt<at.length;gt+=1){var ct=at[gt];if(ct.nodeType===3)return ct.data=""+Qe,at.splice(gt,1)[0]}return ae(Qe)}function ke(at){return be(at," ")}function Pe(at,Qe){Qe=""+Qe,at.wholeText!==Qe&&(at.data=Qe)}function je(at,Qe,gt,ct){at.style.setProperty(Qe,gt,ct?"important":"")}function ze(at,Qe,gt){at.classList[gt?"add":"remove"](Qe)}function Ze(at,Qe){var gt=document.createEvent("CustomEvent");return gt.initCustomEvent(at,!1,!1,Qe),gt}var tt=function(){function at(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;g(this,at),this.a=Qe,this.e=this.n=null}return k(at,[{key:"m",value:function(gt,ct){var yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this.e||(this.e=re(ct.nodeName),this.t=ct,this.h(gt)),this.i(yt)}},{key:"h",value:function(gt){this.e.innerHTML=gt,this.n=Array.from(this.e.childNodes)}},{key:"i",value:function(gt){for(var ct=0;ct<this.n.length;ct+=1)Q(this.t,this.n[ct],gt)}},{key:"p",value:function(gt){this.d(),this.h(gt),this.i(this.a)}},{key:"d",value:function(){this.n.forEach(V)}}]),at}(),Ce=new Set,Ae=0;function Ne(at){for(var Qe=5381,gt=at.length;gt--;)Qe=(Qe<<5)-Qe^at.charCodeAt(gt);return Qe>>>0}function qe(at,Qe,gt,ct,yt,Ct,Ut){for(var tr=arguments.length>7&&arguments[7]!==void 0?arguments[7]:0,ar=16.666/ct,fr=`{
`,vr=0;vr<=1;vr+=ar){var Fr=Qe+(gt-Qe)*Ct(vr);fr+=vr*100+"%{".concat(Ut(Fr,1-Fr),`}
`)}var qr=fr+"100% {".concat(Ut(gt,1-gt),`}
}`),$r="__svelte_".concat(Ne(qr),"_").concat(tr),Nn=at.ownerDocument;Ce.add(Nn);var ia=Nn.__svelte_stylesheet||(Nn.__svelte_stylesheet=Nn.head.appendChild(re("style")).sheet),Pn=Nn.__svelte_rules||(Nn.__svelte_rules={});Pn[$r]||(Pn[$r]=!0,ia.insertRule("@keyframes ".concat($r," ").concat(qr),ia.cssRules.length));var Wn=at.style.animation||"";return at.style.animation="".concat(Wn?"".concat(Wn,", "):"").concat($r," ").concat(ct,"ms linear ").concat(yt,"ms 1 both"),Ae+=1,$r}function At(at,Qe){var gt=(at.style.animation||"").split(", "),ct=gt.filter(Qe?function(Ct){return Ct.indexOf(Qe)<0}:function(Ct){return Ct.indexOf("__svelte")===-1}),yt=gt.length-ct.length;yt&&(at.style.animation=ct.join(", "),Ae-=yt,Ae||kt())}function kt(){K(function(){Ae||(Ce.forEach(function(at){for(var Qe=at.__svelte_stylesheet,gt=Qe.cssRules.length;gt--;)Qe.deleteRule(gt);at.__svelte_rules={}}),Ce.clear())})}var Ve;function ft(at){Ve=at}function St(){if(!Ve)throw new Error("Function called outside component initialization");return Ve}function Wt(at){St().$$.on_mount.push(at)}var Qt=[],zt=[],$t=[],rr=[],Pt=Promise.resolve(),Lt=!1;function dt(){Lt||(Lt=!0,Pt.then(et))}function lt(at){$t.push(at)}function Te(at){rr.push(at)}var Le=!1,Be=new Set;function et(){if(!Le){Le=!0;do{for(var at=0;at<Qt.length;at+=1){var Qe=Qt[at];ft(Qe),Me(Qe.$$)}for(ft(null),Qt.length=0;zt.length;)zt.pop()();for(var gt=0;gt<$t.length;gt+=1){var ct=$t[gt];Be.has(ct)||(Be.add(ct),ct())}$t.length=0}while(Qt.length);for(;rr.length;)rr.pop()();Lt=!1,Le=!1,Be.clear()}}function Me(at){if(at.fragment!==null){at.update(),C(at.before_update);var Qe=at.dirty;at.dirty=[-1],at.fragment&&at.fragment.p(at.ctx,Qe),at.after_update.forEach(lt)}}var Ie;function He(){return Ie||(Ie=Promise.resolve(),Ie.then(function(){Ie=null})),Ie}function Xe(at,Qe,gt){at.dispatchEvent(Ze("".concat(Qe?"intro":"outro").concat(gt)))}var ht=new Set,it;function Ge(){it={r:0,c:[],p:it}}function ot(){it.r||C(it.c),it=it.p}function Je(at,Qe){at&&at.i&&(ht.delete(at),at.i(Qe))}function st(at,Qe,gt,ct){if(at&&at.o){if(ht.has(at))return;ht.add(at),it.c.push(function(){ht.delete(at),ct&&(gt&&at.d(1),ct())}),at.o(Qe)}}var It={duration:0};function Ft(at,Qe,gt){var ct=Qe(at,gt),yt=!1,Ct,Ut,tr=0;function ar(){Ct&&At(at,Ct)}function fr(){var Fr=ct||It,qr=Fr.delay,$r=qr===void 0?0:qr,Nn=Fr.duration,ia=Nn===void 0?300:Nn,Pn=Fr.easing,Wn=Pn===void 0?L:Pn,aa=Fr.tick,Un=aa===void 0?R:aa,Jn=Fr.css;Jn&&(Ct=qe(at,0,1,ia,$r,Wn,Jn,tr++)),Un(0,1);var Ia=H()+$r,ti=Ia+ia;Ut&&Ut.abort(),yt=!0,lt(function(){return Xe(at,!0,"start")}),Ut=oe(function(ya){if(yt){if(ya>=ti)return Un(1,0),Xe(at,!0,"end"),ar(),yt=!1;if(ya>=Ia){var Xa=Wn((ya-Ia)/ia);Un(Xa,1-Xa)}}return yt})}var vr=!1;return{start:function(){vr||(At(at),D(ct)?(ct=ct(),He().then(fr)):fr())},invalidate:function(){vr=!1},end:function(){yt&&(ar(),yt=!1)}}}function nr(at,Qe,gt){var ct=Qe(at,gt),yt=!0,Ct,Ut=it;Ut.r+=1;function tr(){var ar=ct||It,fr=ar.delay,vr=fr===void 0?0:fr,Fr=ar.duration,qr=Fr===void 0?300:Fr,$r=ar.easing,Nn=$r===void 0?L:$r,ia=ar.tick,Pn=ia===void 0?R:ia,Wn=ar.css;Wn&&(Ct=qe(at,1,0,qr,vr,Nn,Wn));var aa=H()+vr,Un=aa+qr;lt(function(){return Xe(at,!1,"start")}),oe(function(Jn){if(yt){if(Jn>=Un)return Pn(0,1),Xe(at,!1,"end"),--Ut.r||C(Ut.c),!1;if(Jn>=aa){var Ia=Nn((Jn-aa)/qr);Pn(1-Ia,Ia)}}return yt})}return D(ct)?He().then(function(){ct=ct(),tr()}):tr(),{end:function(fr){fr&&ct.tick&&ct.tick(1,0),yt&&(Ct&&At(at,Ct),yt=!1)}}}function We(at,Qe,gt,ct){var yt=Qe(at,gt),Ct=ct?0:1,Ut=null,tr=null,ar=null;function fr(){ar&&At(at,ar)}function vr(qr,$r){var Nn=qr.b-Ct;return $r*=Math.abs(Nn),{a:Ct,b:qr.b,d:Nn,duration:$r,start:qr.start,end:qr.start+$r,group:qr.group}}function Fr(qr){var $r=yt||It,Nn=$r.delay,ia=Nn===void 0?0:Nn,Pn=$r.duration,Wn=Pn===void 0?300:Pn,aa=$r.easing,Un=aa===void 0?L:aa,Jn=$r.tick,Ia=Jn===void 0?R:Jn,ti=$r.css,ya={start:H()+ia,b:qr};qr||(ya.group=it,it.r+=1),Ut?tr=ya:(ti&&(fr(),ar=qe(at,Ct,qr,Wn,ia,Un,ti)),qr&&Ia(0,1),Ut=vr(ya,Wn),lt(function(){return Xe(at,qr,"start")}),oe(function(Xa){if(tr&&Xa>tr.start&&(Ut=vr(tr,Wn),tr=null,Xe(at,Ut.b,"start"),ti&&(fr(),ar=qe(at,Ct,Ut.b,Ut.duration,0,Un,yt.css))),Ut){if(Xa>=Ut.end)Ia(Ct=Ut.b,1-Ct),Xe(at,Ut.b,"end"),tr||(Ut.b?fr():--Ut.group.r||C(Ut.group.c)),Ut=null;else if(Xa>=Ut.start){var na=Xa-Ut.start;Ct=Ut.a+Ut.d*Un(na/Ut.duration),Ia(Ct,1-Ct)}}return!!(Ut||tr)}))}return{run:function($r){D(yt)?He().then(function(){yt=yt(),Fr($r)}):Fr($r)},end:function(){fr(),Ut=tr=null}}}var Fe=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function _t(at,Qe,gt){var ct=at.$$.props[Qe];ct!==void 0&&(at.$$.bound[ct]=gt,gt(at.$$.ctx[ct]))}function Mt(at){at&&at.c()}function wt(at,Qe){at&&at.l(Qe)}function Dt(at,Qe,gt){var ct=at.$$,yt=ct.fragment,Ct=ct.on_mount,Ut=ct.on_destroy,tr=ct.after_update;yt&&yt.m(Qe,gt),lt(function(){var ar=Ct.map(E).filter(D);Ut?Ut.push.apply(Ut,_(ar)):C(ar),at.$$.on_mount=[]}),tr.forEach(lt)}function Rt(at,Qe){var gt=at.$$;gt.fragment!==null&&(C(gt.on_destroy),gt.fragment&&gt.fragment.d(Qe),gt.on_destroy=gt.fragment=null,gt.ctx=[])}function Bt(at,Qe){at.$$.dirty[0]===-1&&(Qt.push(at),dt(),at.$$.dirty.fill(0)),at.$$.dirty[Qe/31|0]|=1<<Qe%31}function Nt(at,Qe,gt,ct,yt,Ct){var Ut=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[-1],tr=Ve;ft(at);var ar=Qe.props||{},fr=at.$$={fragment:null,ctx:null,props:Ct,update:R,not_equal:yt,bound:S(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(tr?tr.$$.context:[]),callbacks:S(),dirty:Ut,skip_bound:!1},vr=!1;if(fr.ctx=gt?gt(at,ar,function(qr,$r){var Nn=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:$r;return fr.ctx&&yt(fr.ctx[qr],fr.ctx[qr]=Nn)&&(!fr.skip_bound&&fr.bound[qr]&&fr.bound[qr](Nn),vr&&Bt(at,qr)),$r}):[],fr.update(),vr=!0,C(fr.before_update),fr.fragment=ct?ct(fr.ctx):!1,Qe.target){if(Qe.hydrate){var Fr=ue(Qe.target);fr.fragment&&fr.fragment.l(Fr),Fr.forEach(V)}else fr.fragment&&fr.fragment.c();Qe.intro&&Je(at.$$.fragment),Dt(at,Qe.target,Qe.anchor),et()}ft(tr)}var er=function(){function at(){g(this,at)}return k(at,[{key:"$destroy",value:function(){Rt(this,1),this.$destroy=R}},{key:"$on",value:function(gt,ct){var yt=this.$$.callbacks[gt]||(this.$$.callbacks[gt]=[]);return yt.push(ct),function(){var Ct=yt.indexOf(ct);Ct!==-1&&yt.splice(Ct,1)}}},{key:"$set",value:function(gt){this.$$set&&!N(gt)&&(this.$$.skip_bound=!0,this.$$set(gt),this.$$.skip_bound=!1)}}]),at}();function qt(at){return at<.5?4*at*at*at:.5*Math.pow(2*at-2,3)+1}function Zt(at){var Qe=at-1;return Qe*Qe*Qe+1}function _r(at){return--at*at*at*at*at+1}function Gr(at,Qe){var gt=Qe.delay,ct=gt===void 0?0:gt,yt=Qe.duration,Ct=yt===void 0?400:yt,Ut=Qe.easing,tr=Ut===void 0?L:Ut,ar=+getComputedStyle(at).opacity;return{delay:ct,duration:Ct,easing:tr,css:function(vr){return"opacity: ".concat(vr*ar)}}}function zr(at,Qe){var gt=Qe.delay,ct=gt===void 0?0:gt,yt=Qe.duration,Ct=yt===void 0?400:yt,Ut=Qe.easing,tr=Ut===void 0?Zt:Ut,ar=Qe.x,fr=ar===void 0?0:ar,vr=Qe.y,Fr=vr===void 0?0:vr,qr=Qe.opacity,$r=qr===void 0?0:qr,Nn=getComputedStyle(at),ia=+Nn.opacity,Pn=Nn.transform==="none"?"":Nn.transform,Wn=ia*(1-$r);return{delay:ct,duration:Ct,easing:tr,css:function(Un,Jn){return`
			transform: `.concat(Pn," translate(").concat((1-Un)*fr,"px, ").concat((1-Un)*Fr,`px);
			opacity: `).concat(ia-Wn*Jn)}}}function Or(at,Qe){var gt=Qe.delay,ct=gt===void 0?0:gt,yt=Qe.speed,Ct=Qe.duration,Ut=Qe.easing,tr=Ut===void 0?qt:Ut,ar=at.getTotalLength();return Ct===void 0?yt===void 0?Ct=800:Ct=ar/yt:typeof Ct=="function"&&(Ct=Ct(ar)),{delay:ct,duration:Ct,easing:tr,css:function(vr,Fr){return"stroke-dasharray: ".concat(vr*ar," ").concat(Fr*ar)}}}function Mn(at,Qe){var gt=Qe.delay,ct=gt===void 0?0:gt,yt=Qe.duration,Ct=yt===void 0?400:yt,Ut=Qe.easing,tr=Ut===void 0?Zt:Ut,ar=parseFloat(getComputedStyle(at).strokeWidth);return{delay:ct,duration:Ct,easing:tr,css:function(vr){return"opacity: ".concat(vr,"; stroke-width: ").concat(vr*ar)}}}var Yn="M101.801 40.115l-.413-.225-27.01-15.617-3.901-2.252L30.6 45.07l-.637-2.891.037-.038L67.663 20.37l-3.038-1.764-35.338 20.459-.637-2.89.037-.038L61.812 16.99l-1.013-.6c-1.313-.75-2.889-.6-4.727.45L28.65 32.72l-3.864 2.215v46.099l-2.814-.901V36.549l-3.038 1.764v40.844l-2.814-.901V39.928l-1.013.6c-1.313.75-1.988 2.215-1.988 4.28v36.188l39.914 23.05-2.175 1.989-.038-.037-37.7-21.736v3.491l35.374 20.422-2.176 1.99-.037-.038-33.162-19.108v1.164c0 1.502.938 2.816 2.739 3.867l.412.225 27.047 15.617 3.864 2.214 39.915-23.05.637 2.891-.037.038-37.664 21.773 3.039 1.765 35.375-20.422.638 2.89-.038.038-33.124 19.145.975.563.038.038c1.313.751 2.888.601 4.726-.451l27.46-15.841 3.864-2.215V55.131l2.814.901v43.584l3.038-1.764V56.97l2.814.9V96.2l1.012-.6c1.313-.752 1.989-2.216 1.989-4.318V55.094L64.625 32.119l2.213-1.99.038.038 37.663 21.773V48.45L69.164 28.027l2.176-1.99.037.038 33.125 19.146v-1.164c.037-1.614-.901-2.89-2.701-3.942zm-15.23 9.122c1.275.751 2.4 2.703 2.438 4.167v29.282c0 1.463-1.126 3.453-2.401 4.204L61.286 101.53c-.638.375-1.5.563-2.438.563-.9 0-1.8-.188-2.4-.563L31.087 86.89c-1.275-.75-2.363-2.665-2.4-4.167V53.404c.037-1.501 1.125-3.378 2.4-4.13l25.322-14.64c.6-.375 1.5-.563 2.438-.563.938 0 1.8.188 2.438.563L86.57 49.237z",An="M41.14 55.694h-2.663c-3.488 0-5.14 1.69-5.14 5.18V75.29c0 3.491 1.689 5.143 5.14 5.143h2.589c3.45 0 5.139-1.69 5.139-5.143v-6.457h-5.552v6.344c0 .338-.225.526-.638.526h-.562c-.376 0-.526-.188-.526-.526v-14.19c0-.375.188-.525.526-.525h.675c.375 0 .525.187.525.525v3.154c0 1.651.075 2.44 1.613 2.44h3.939v-5.706c0-3.53-1.613-5.18-5.064-5.18z M56.297 55.694h-2.813c-3.49 0-5.177 1.69-5.177 5.18V75.29c0 3.491 1.688 5.143 5.176 5.143h2.814c3.451 0 5.14-1.69 5.14-5.143V60.875c.037-3.492-1.651-5.18-5.14-5.18zm-.525 19.483c0 .376-.188.526-.6.526h-.563c-.413 0-.6-.188-.6-.526v-14.19c0-.375.187-.525.6-.525h.563c.412 0 .6.187.6.525v14.19zM69.09 71.498h1.162c.376 0 .526.188.526.526v5.743c0 1.652.075 2.44 1.613 2.44h4.876s0-.037-.075-.112c-.45-.375-.675-1.464-.675-2.29v-5.256c0-1.914-.788-2.928-2.626-3.378l-.3-.075.263-.075c1.763-.6 2.588-1.84 2.588-3.942v-3.98c0-3.453-1.688-5.142-5.177-5.142H63.5v24.288h5.59v-8.747zm0-10.774h1.2c.375 0 .525.188.525.526v4.993c0 .375-.188.525-.525.525h-1.2v-6.044zM84.32 55.92h-5.777v24.288h5.777V55.919z",Bn="M 126.28696,41.835323 72.573872,10.80815 C 71.679135,10.259762 70.668948,10 69.601036,10 c -1.067912,0 -2.049237,0.259762 -2.972837,0.80815 L 12.972836,41.835323 C 11.096775,42.874373 10,44.837022 10,46.943983 v 62.112077 c 0,2.10696 1.096775,4.06961 2.972836,5.10866 l 53.713088,31.02717 c 0.894738,0.54839 1.904925,0.80815 2.972837,0.80815 1.010187,0 2.049236,-0.25976 2.972836,-0.80815 l 53.713093,-31.02717 c 1.81833,-1.03905 2.97283,-3.0017 2.97283,-5.10866 V 46.943983 c -0.11545,-2.106961 -1.21222,-4.06961 -3.03056,-5.10866 z m -25.45671,71.319207 3.17487,5.42615 -16.36503,9.46689 -3.174874,-5.42615 z m -27.534816,7.96604 c -0.548387,0.34635 -1.154499,0.54839 -1.818337,0.75043 -0.663837,0.20204 -1.241087,0.25976 -1.904924,0.25976 -0.808149,0 -1.616299,-0.14431 -2.366724,-0.40407 -0.4618,-0.14432 -0.894737,-0.34635 -1.298812,-0.60612 l -31.80646,-18.3854 c -0.548388,-0.34635 -1.067912,-0.6927 -1.50085,-1.1545 -0.202037,-0.20204 -0.461799,-0.4618 -0.606112,-0.6927 -0.202037,-0.25976 -0.34635,-0.49066 -0.490662,-0.80815 -0.08659,-0.144311 -0.144313,-0.288623 -0.202038,-0.404073 -0.08659,-0.259762 -0.259762,-0.490662 -0.288624,-0.750425 -0.288625,-0.808149 -0.4618,-1.616299 -0.4618,-2.453311 V 59.585753 c 0,-0.490663 0.05773,-0.952462 0.144312,-1.443125 0.05772,-0.144312 0.05772,-0.288625 0.08659,-0.461799 0.08659,-0.404075 0.259762,-0.750425 0.404074,-1.1545 0.144313,-0.288625 0.288625,-0.606112 0.4618,-0.865875 0.08659,-0.202037 0.259763,-0.346349 0.34635,-0.548387 0.202038,-0.259762 0.404075,-0.490662 0.606112,-0.6927 0.202038,-0.202037 0.4618,-0.461799 0.6927,-0.663837 0.259762,-0.202037 0.490662,-0.404075 0.80815,-0.548387 L 53.582355,41.921911 65.906637,34.821739 c 1.1545,-0.663837 2.395587,-1.010187 3.665536,-1.010187 1.26995,0 2.511037,0.34635 3.665536,1.010187 l 22.39729,12.930394 9.438031,5.45501 c 0.14431,0.08659 0.28863,0.202037 0.4618,0.288625 0.14431,0.08659 0.28863,0.202037 0.40408,0.288625 1.76061,1.356537 2.7708,3.463498 2.7708,5.714772 v 36.799671 c 0,2.597624 -1.41427,5.022074 -3.66554,6.320884 z m -3.665536,10.04415 7.186759,-4.09847 3.174874,5.42614 -10.33277,5.97454 -10.275046,-5.97454 3.174874,-5.42614 z m -14.921906,-8.57216 -3.174873,5.42615 -16.393893,-9.49576 3.174874,-5.42615 z M 23.507644,51.417669 v 8.283534 H 17.186759 V 47.780995 l 10.275046,-5.974534 3.174873,5.426147 z m 0,17.144317 V 87.466915 H 17.186759 V 68.561986 Z m 0,27.765713 v 8.283531 l 7.186759,4.1562 -3.174873,5.42615 -10.303908,-6.0034 V 96.298836 h 6.292022 z m 14.864181,-53.482189 -3.174874,-5.426147 16.36503,-9.466896 3.174874,5.426147 z m 31.258073,-18.067917 -7.186759,4.156198 -3.174874,-5.426147 10.332771,-6.003397 10.33277,5.974534 -3.174874,5.426148 z m 14.864181,8.572159 3.174874,-5.426148 16.336167,9.495759 -3.17487,5.426147 z m 31.258071,71.232618 v -8.283534 h 6.26316 v 11.891344 l -10.27504,5.97454 -3.17488,-5.42615 z m 0,-17.144317 V 68.533124 h 6.26316 v 18.904929 z m 0,-27.765713 v -8.283534 l -7.18676,-4.156198 3.17488,-5.426147 10.27504,5.974534 V 59.67234 Z",jn="M 57.767416,91.594251 v -7.359934 c 0,-2.713074 -1.096775,-4.098474 -3.723261,-4.762311 l -0.404075,-0.08659 0.34635,-0.08659 c 2.511037,-0.865874 3.665536,-2.597624 3.665536,-5.512735 v -5.628185 c 0,-4.848898 -2.366724,-7.215621 -7.273347,-7.215621 H 39.382012 v 34.144322 h 7.879459 V 82.820055 h 1.645161 c 0.548388,0 0.750425,0.259762 0.750425,0.750424 v 8.081497 c 0,2.308999 0.08659,3.405773 2.251274,3.405773 h 6.782685 c 0.05773,0 0.08659,0 0.08659,0 0,0 0,-0.05773 -0.08659,-0.144312 -0.606113,-0.606112 -0.9236,-2.164687 -0.9236,-3.319186 z M 49.714782,75.373533 c 0,0.548387 -0.259762,0.750425 -0.750425,0.750425 h -1.731749 v -8.485571 h 1.702887 c 0.548387,0 0.750425,0.259762 0.750425,0.750424 v 6.984722 z M 68.764024,60.94229 h -8.139222 v 34.144322 h 8.139222 z M 82.127355,60.94229 h -3.665536 c -4.820035,0 -7.129034,2.308999 -7.129034,7.129034 0,0 0,1.500849 0,3.954161 0,4.358235 2.222411,5.801359 3.521223,6.667234 1.414262,0.80815 5.22411,3.319186 5.512735,3.463498 0.6927,0.4618 0.952462,1.298812 1.010187,1.818337 0,1.356537 0,2.511037 0,3.867573 0,0.4618 -0.202037,0.6927 -0.692699,0.6927 h -0.80815 c -0.548387,0 -0.894737,-0.259762 -0.894737,-0.6927 v -4.560273 h -7.677422 v 4.704586 c 0,4.76231 2.308999,7.071309 7.129035,7.071309 h 3.550086 c 4.76231,0 7.129034,-2.251274 7.129034,-7.071309 v -3.059424 c 0,0 0,-0.05772 0,-1.558574 0,-0.952462 -0.490662,-3.117149 -1.962649,-4.820035 -3.001699,-3.521224 -6.84041,-3.867574 -7.735147,-6.320885 -0.144312,-0.4618 -0.34635,-1.096775 -0.34635,-1.616299 v -2.366724 c 0,-0.490663 0.259763,-0.6927 0.6927,-0.6927 h 0.952462 c 0.490662,0 0.6927,0.259762 0.6927,0.6927 v 1.414262 c 0,2.251274 0.08659,3.348048 2.222411,3.348048 h 5.426148 v -4.906623 c 0.08659,-4.906622 -2.164687,-7.157896 -6.926997,-7.157896 z M 99.848922,60.94229 h -8.139221 v 34.144322 h 8.139221 z";function Nr(){var at=re("style");at.id="svelte-sdid3b-style",at.textContent=".svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before{box-sizing:border-box}button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{border:0;cursor:pointer;overflow:visible;text-transform:none}svg.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b:not(:root){overflow:hidden}.site-header.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{position:absolute;top:0;left:0;width:100vw}*.Light-on-Dark.site-header.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.site-header.svelte-sdid3b a.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.site-header.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{background-color:#16343e;background-color:#26535c}.site-header__inner.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{background-color:transparent;transition:all .35s ease,background-color 0s}.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{width:100%;padding-left:56px;padding-right:56px;margin-right:0px;margin-left:0px}@media(max-width: 540px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{padding:0 0 0 1em;max-width:100vh;width:100%}}@media(min-width: 640px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 768px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 1024px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 1080px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:100%}}.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{list-style:none;display:flex;flex-wrap:wrap;margin-right:-10px;margin-left:-10px}.justify-content-between.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{justify-content:space-between !important}.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{width:calc(100% + 20px);list-style:none;padding:0;margin:0 0 0 -10px}.site-header__row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{height:76px;flex-wrap:nowrap;transition:.35s ease}@media(min-width: 768px){.site-header__row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{will-change:height}}@media(min-width: 768px){}.col.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,.col-auto.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{position:relative;width:100%;padding-right:10px;padding-left:10px}.col-auto.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{flex:0 0 auto;width:auto;max-width:100%}.site-header__main-logo.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:50%;align-self:flex-start}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:143px;height:92px;position:absolute;top:12px;left:0;transition:all .35s ease;transform-origin:top left;pointer-events:none;touch-action:none;background-color:transparent}@media(max-width: 768px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{height:54px}}@media(min-width: 768px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:154px;height:74px;top:4px;left:1px}}@media(min-width: 1200px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:211px;height:92px;will-change:height,width,top,left}}.site-header__main-logo.svelte-sdid3b svg.logo-border.svelte-sdid3b.svelte-sdid3b{fill:none;z-index:0}.header-stuck .site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{top:-1px}@media(min-width: 768px){.header-stuck .site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:155px;height:100px;top:-3px;left:1px}}.site-header__main-logo.svelte-sdid3b svg .text-group.svelte-sdid3b.svelte-sdid3b{transition:.25s cubic-bezier(.77,0,.175,1)}@media(max-width: 1023px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .text g.svelte-sdid3b,.site-header__main-logo.svelte-sdid3b svg .text-group.svelte-sdid3b.svelte-sdid3b{display:none}}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .logo path.svelte-sdid3b,.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .text path.svelte-sdid3b{fill:#16343e}.header-stuck .site-header__main-logo.svelte-sdid3b svg .border.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.home .menu.svelte-sdid3b g.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.home .site-header__main-logo.svelte-sdid3b .logo path.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.home .site-header__main-logo.svelte-sdid3b .text path.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .menu.svelte-sdid3b g.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .site-header__main-logo.svelte-sdid3b .logo path.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .site-header__main-logo.svelte-sdid3b .text path.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.svelte-sdid3b .site-header__main-logo svg .logo path.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.svelte-sdid3b .site-header__main-logo svg .text path.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.svelte-sdid3b .header-stuck .site-header__main-logo svg .border.svelte-sdid3b.svelte-sdid3b{fill:#16343e;fill:#26535c}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b path.svelte-sdid3b{transition:all .35s ease,fill 0s}.site-header__menu-section.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex}.site-header__primary-menu.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{padding-top:10px}.site-header__item.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex}.site-header__item.svelte-sdid3b .site-header__item_inner.svelte-sdid3b.svelte-sdid3b{display:flex;align-items:center;flex:1 0 auto}.site-header__menu-section.svelte-sdid3b .menu.svelte-sdid3b.svelte-sdid3b{align-items:stretch;flex-wrap:nowrap}.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{margin-right:0;align-items:center}@media(min-width: 1200px){.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{align-items:center}}.mobile-menu-toggle.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex;flex:0 0 0;margin-right:2.5%;order:4;align-items:center}@media(max-width: 820px){.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{display:none}}@media(min-width: 820px){.mobile-menu-toggle.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:none}}.hamburger-control__inner.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{background-color:transparent}.hamburger-control__inner.svelte-sdid3b .hamburger-control__open.svelte-sdid3b.svelte-sdid3b{background-color:transparent}.hamburger-control__inner.svelte-sdid3b .hamburger-control__open .menu g.svelte-sdid3b.svelte-sdid3b{fill:#16343E}*.Light-on-Dark.svelte-sdid3b .hamburger-control__inner .hamburger-control__open .menu g.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9 !important}*.Light-on-Dark.svelte-sdid3b .hamburger-control__inner .hamburger-control__close .menu g.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9 !important}*.hamburger-control__close.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:none}.site-header__menu-section.svelte-sdid3b .menu .menu-item.svelte-sdid3b.svelte-sdid3b{align-items:stretch;display:flex}.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b>li.svelte-sdid3b{padding:0 !important;margin:0 12px}.site-header__row.svelte-sdid3b #primary-navigation>li a.svelte-sdid3b.svelte-sdid3b{padding-left:0;padding-right:0}.site-header__primary-menu.svelte-sdid3b .top-level-nav-link.svelte-sdid3b.svelte-sdid3b{padding:0 10px 0 10px}.header-stuck .site-header__menu-section.svelte-sdid3b .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:#16343e !important;display:inline;background-size:0 1px;background-position:0 calc(100% - 4px);background-repeat:no-repeat;transition:.25s cubic-bezier(.77,0,.175,1);transition-duration:.35s;background-image:linear-gradient(#16343e,#16343e) !important}*.Light-on-Dark.svelte-sdid3b .site-header__menu-section .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:rgb(251, 248, 233)}*.Light-on-Dark.svelte-sdid3b .header-stuck .site-header__menu-section .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:rgb(251, 248, 233) !important}.has-dropdowns.svelte-sdid3b .sub-menu li.svelte-sdid3b.svelte-sdid3b{width:100%;margin:0 0 12px;padding:0;border:0 !important;display:inline-block !important;clear:both}.screen-reader-text.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b:not(:focus):not(:active),.sr-dropdown-button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute !important;width:1px;word-wrap:normal !important}.sr-dropdown-button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{flex:0 1 auto;padding:0;margin:0;display:flex;align-items:center;width:auto;height:100%}.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before,.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before{content:initial !important;display:block !important}",ie(document.head,at)}function Lr(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr,vr,Fr;const qr=[dn,Ln],$r=[];function Nn(aa,Un){return aa[4]?0:aa[6]?1:-1}~(tr=Nn(at))&&(ar=$r[tr]=qr[tr](at));const ia=[Sn,wn,tn,xn],Pn=[];function Wn(aa,Un){return!aa[3]&&!aa[4]?0:aa[3]?!aa[5]&&!aa[6]?2:aa[5]?-1:3:1}return~(fr=Wn(at))&&(vr=Pn[fr]=ia[fr](at)),{c(){Qe=ee("svg"),gt=ee("defs"),ct=ee("mask"),yt=ee("path"),Ct=ee("path"),Ut=ee("g"),ar&&ar.c(),vr&&vr.c(),this.h()},l(aa){Qe=me(aa,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,style:!0,class:!0},1);var Un=ue(Qe);gt=me(Un,"defs",{class:!0},1);var Jn=ue(gt);ct=me(Jn,"mask",{id:!0,x:!0,y:!0,width:!0,height:!0,maskUnits:!0,maskContentUnits:!0,class:!0},1);var Ia=ue(ct);yt=me(Ia,"path",{fill:!0,d:!0,class:!0},1),ue(yt).forEach(V),Ct=me(Ia,"path",{d:!0,fill:!0,class:!0},1),ue(Ct).forEach(V),Ia.forEach(V),Jn.forEach(V),Ut=me(Un,"g",{class:!0,mask:!0},1);var ti=ue(Ut);ar&&ar.l(ti),ti.forEach(V),vr&&vr.l(Un),Un.forEach(V),this.h()},h(){W(yt,"fill","#fff"),W(yt,"d","M0 0h308v136H0z"),W(yt,"class","svelte-sdid3b"),W(Ct,"d","M115.084 31.849L61.916.809a5.66 5.66 0 00-5.832 0L2.916 31.85C1.118 32.927 0 34.839 0 36.949v62.127c0 2.109 1.118 4.021 2.916 5.1l53.168 31.039c.923.54 1.895.785 2.916.785 1.02 0 2.041-.245 2.916-.785l53.168-31.039c1.798-1.03 2.916-2.991 2.916-5.1V36.948c0-2.108-1.118-4.02-2.916-5.1z"),W(Ct,"fill","#000"),W(Ct,"class","svelte-sdid3b"),W(ct,"id","border-mask"),W(ct,"x","0"),W(ct,"y","0"),W(ct,"width","308"),W(ct,"height","136"),W(ct,"maskUnits","userSpaceOnUse"),W(ct,"maskContentUnits","userSpaceOnUse"),W(ct,"class","svelte-sdid3b"),W(gt,"class","svelte-sdid3b"),W(Ut,"class","text svelte-sdid3b"),W(Ut,"mask","url(#border-mask)"),W(Qe,"xmlns","http://www.w3.org/2000/svg"),W(Qe,"width","308"),W(Qe,"height","136"),W(Qe,"viewBox","0 0 308 136"),W(Qe,"fill","none"),je(Qe,"background-color","transparent"),W(Qe,"class","svelte-sdid3b")},m(aa,Un){Q(aa,Qe,Un),ie(Qe,gt),ie(gt,ct),ie(ct,yt),ie(ct,Ct),ie(Qe,Ut),~tr&&$r[tr].m(Ut,null),~fr&&Pn[fr].m(Qe,null),Fr=!0},p(aa,Un){let Jn=tr;tr=Nn(aa),tr===Jn?~tr&&$r[tr].p(aa,Un):(ar&&(Ge(),st($r[Jn],1,1,()=>{$r[Jn]=null}),ot()),~tr?(ar=$r[tr],ar||(ar=$r[tr]=qr[tr](aa),ar.c()),Je(ar,1),ar.m(Ut,null)):ar=null);let Ia=fr;fr=Wn(aa),fr===Ia?~fr&&Pn[fr].p(aa,Un):(vr&&(Ge(),st(Pn[Ia],1,1,()=>{Pn[Ia]=null}),ot()),~fr?(vr=Pn[fr],vr||(vr=Pn[fr]=ia[fr](aa),vr.c()),Je(vr,1),vr.m(Qe,null)):vr=null)},i(aa){Fr||(Je(ar),Je(vr),Fr=!0)},o(aa){st(ar),st(vr),Fr=!1},d(aa){aa&&V(Qe),~tr&&$r[tr].d(),~fr&&Pn[fr].d()}}}function Ln(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr,vr,Fr,qr,$r,Nn,ia,Pn,Wn,aa,Un,Jn,Ia,ti,ya,Xa,na,_i,_a,Fa,ki,vi,xi,Zn,wi,Bi;return{c(){Qe=ee("g"),gt=ee("path"),ct=ee("path"),yt=ee("path"),Ct=ee("path"),Ut=ee("path"),tr=ee("path"),ar=ee("path"),fr=ee("path"),vr=ee("path"),Fr=ee("path"),qr=ee("path"),$r=ee("path"),Nn=ee("path"),ia=ee("path"),Pn=ee("path"),Wn=ee("path"),aa=ee("path"),Un=ee("path"),Jn=ee("path"),Ia=ee("path"),ti=ee("path"),ya=ee("path"),Xa=ee("path"),na=ee("path"),_i=ee("path"),_a=ee("path"),Fa=ee("path"),ki=ee("path"),vi=ee("path"),this.h()},l(li){Qe=me(li,"g",{class:!0,fill:!0,opacity:!0,transform:!0},1);var Ca=ue(Qe);gt=me(Ca,"path",{class:!0,d:!0},1),ue(gt).forEach(V),ct=me(Ca,"path",{class:!0,d:!0},1),ue(ct).forEach(V),yt=me(Ca,"path",{class:!0,d:!0},1),ue(yt).forEach(V),Ct=me(Ca,"path",{class:!0,d:!0},1),ue(Ct).forEach(V),Ut=me(Ca,"path",{class:!0,d:!0},1),ue(Ut).forEach(V),tr=me(Ca,"path",{class:!0,d:!0},1),ue(tr).forEach(V),ar=me(Ca,"path",{class:!0,d:!0},1),ue(ar).forEach(V),fr=me(Ca,"path",{class:!0,d:!0},1),ue(fr).forEach(V),vr=me(Ca,"path",{class:!0,d:!0},1),ue(vr).forEach(V),Fr=me(Ca,"path",{class:!0,d:!0},1),ue(Fr).forEach(V),qr=me(Ca,"path",{class:!0,d:!0},1),ue(qr).forEach(V),$r=me(Ca,"path",{class:!0,d:!0},1),ue($r).forEach(V),Nn=me(Ca,"path",{class:!0,d:!0},1),ue(Nn).forEach(V),ia=me(Ca,"path",{class:!0,d:!0},1),ue(ia).forEach(V),Pn=me(Ca,"path",{class:!0,d:!0},1),ue(Pn).forEach(V),Wn=me(Ca,"path",{class:!0,d:!0},1),ue(Wn).forEach(V),aa=me(Ca,"path",{class:!0,d:!0},1),ue(aa).forEach(V),Un=me(Ca,"path",{class:!0,d:!0},1),ue(Un).forEach(V),Jn=me(Ca,"path",{class:!0,d:!0},1),ue(Jn).forEach(V),Ia=me(Ca,"path",{class:!0,d:!0},1),ue(Ia).forEach(V),ti=me(Ca,"path",{class:!0,d:!0},1),ue(ti).forEach(V),ya=me(Ca,"path",{class:!0,d:!0},1),ue(ya).forEach(V),Xa=me(Ca,"path",{class:!0,d:!0},1),ue(Xa).forEach(V),na=me(Ca,"path",{class:!0,d:!0},1),ue(na).forEach(V),_i=me(Ca,"path",{class:!0,d:!0},1),ue(_i).forEach(V),_a=me(Ca,"path",{class:!0,d:!0},1),ue(_a).forEach(V),Fa=me(Ca,"path",{class:!0,d:!0},1),ue(Fa).forEach(V),ki=me(Ca,"path",{class:!0,d:!0},1),ue(ki).forEach(V),vi=me(Ca,"path",{class:!0,d:!0},1),ue(vi).forEach(V),Ca.forEach(V),this.h()},h(){W(gt,"class","st0 svelte-sdid3b"),W(gt,"d","m 163.17322,54.246193 c 2.19355,-0.865875 3.55008,-2.828524 3.55008,-5.426148 0,-3.059424 -2.30899,-5.714772 -6.14771,-5.714772 h -8.2258 v 17.981329 h 4.04074 v -6.349747 h 2.51104 l 3.86757,6.349747 h 4.73345 V 60.82684 Z m -6.78269,-7.53311 h 3.98303 c 1.55857,0 2.22241,1.067912 2.22241,2.164687 0,1.125637 -0.57725,2.280136 -2.22241,2.280136 h -3.98303 z"),W(ct,"class","st0 svelte-sdid3b"),W(ct,"d","m 173.53485,61.317502 c 1.76061,0 2.91511,-0.634975 3.66554,-1.529712 h 0.11545 l 0.31748,1.26995 h 3.52123 V 47.636683 h -3.95416 v 7.446522 c 0,1.616299 -1.03905,2.626486 -2.45331,2.626486 -1.55858,0 -2.25128,-0.9236 -2.25128,-2.453311 v -7.590834 h -3.95416 v 8.831921 c 0,2.943973 1.99151,4.820035 4.99321,4.820035 z"),W(yt,"class","st0 svelte-sdid3b"),W(yt,"d","m 182.91516,61.086602 h 3.6944 V 54.44823 c 0,-2.164687 1.21222,-3.405773 3.08828,-3.405773 h 1.29882 v -3.607811 h -0.9236 c -1.73175,0 -2.85739,1.010187 -3.43464,2.193549 h -0.11545 l -0.31749,-1.962649 h -3.29032 z"),W(Ct,"class","st0 svelte-sdid3b"),W(Ct,"d","m 196.04759,61.317502 c 1.67403,0 2.85739,-0.57725 3.60781,-1.443124 h 0.11545 l 0.28863,1.212224 h 3.55008 v -8.831921 c 0,-2.799661 -2.22241,-4.820035 -5.88794,-4.820035 -3.95417,0 -5.7725,2.164686 -5.7725,4.675723 h 3.6944 c 0,-0.80815 0.72156,-1.50085 1.96265,-1.50085 1.47198,0 2.04923,0.721562 2.04923,1.645162 v 0.721562 h -2.88625 c -3.69439,0 -5.39728,1.645162 -5.39728,4.127336 -0.0289,2.395586 1.64516,4.213923 4.67572,4.213923 z m 1.01019,-3.088286 c -1.18336,0 -1.78948,-0.57725 -1.78948,-1.327675 0,-0.721562 0.57725,-1.269949 1.81834,-1.269949 h 2.5399 v 0.57725 c 0,1.067912 -0.95246,2.020374 -2.56876,2.020374 z"),W(Ut,"class","st0 svelte-sdid3b"),W(Ut,"d","m 205.37017,61.086602 h 3.95417 V 42.066223 h -3.95417 z"),W(tr,"class","st0 svelte-sdid3b"),W(tr,"d","m 152.34979,85.331091 h 4.06961 V 67.349762 h -4.06961 z"),W(ar,"class","st0 svelte-sdid3b"),W(ar,"d","m 158.98816,85.331091 h 3.95416 v -7.446522 c 0,-1.616299 1.03905,-2.626486 2.45331,-2.626486 1.55857,0 2.25127,0.9236 2.25127,2.453312 v 7.619696 h 3.95416 V 76.49917 c 0,-2.943974 -1.99151,-4.820035 -4.99321,-4.820035 -1.76061,0 -2.91511,0.634974 -3.66553,1.529712 h -0.11545 l -0.31749,-1.26995 h -3.55008 v 13.392194 z"),W(fr,"class","st0 svelte-sdid3b"),W(fr,"d","m 173.39054,85.331091 h 3.95416 v -7.446522 c 0,-1.616299 1.03905,-2.626486 2.45331,-2.626486 1.55858,0 2.25128,0.9236 2.25128,2.453312 v 7.619696 h 3.95416 V 76.49917 c 0,-2.943974 -1.99152,-4.820035 -4.99321,-4.820035 -1.76062,0 -2.91512,0.634974 -3.66554,1.529712 h -0.11545 l -0.31749,-1.26995 h -3.55008 v 13.392194 z"),W(vr,"class","st0 svelte-sdid3b"),W(vr,"d","m 193.85404,85.561991 c 4.35824,0 6.6961,-2.915111 6.6961,-6.926997 0,-4.040748 -2.39559,-6.955859 -6.6961,-6.955859 -4.32937,0 -6.69609,2.915111 -6.69609,6.955859 0,4.011886 2.33786,6.926997 6.69609,6.926997 z m 0,-3.463498 c -1.6163,0 -2.68421,-1.03905 -2.68421,-3.463499 0,-2.424449 1.03905,-3.492361 2.68421,-3.492361 1.64516,0 2.68421,1.03905 2.68421,3.492361 0,2.453311 -1.03905,3.463499 -2.68421,3.463499 z"),W(Fr,"class","st0 svelte-sdid3b"),W(Fr,"d","m 204.7352,85.331091 h 5.05094 l 4.21392,-13.190156 v -0.259763 h -4.01189 l -2.65535,9.697796 h -0.11545 l -2.71307,-9.697796 h -4.06961 v 0.259763 z"),W(qr,"class","st0 svelte-sdid3b"),W(qr,"d","m 218.58919,85.561991 c 1.67403,0 2.85739,-0.57725 3.60781,-1.443124 h 0.11545 l 0.28863,1.212224 h 3.55009 V 76.49917 c 0,-2.799661 -2.22242,-4.820035 -5.88795,-4.820035 -3.95416,0 -5.7725,2.164686 -5.7725,4.675723 h 3.6944 c 0,-0.80815 0.72156,-1.50085 1.96265,-1.50085 1.47198,0 2.04923,0.721562 2.04923,1.645162 v 0.721562 h -2.88624 c -3.6944,0 -5.39729,1.645162 -5.39729,4.127336 -0.0289,2.395586 1.64516,4.213923 4.67572,4.213923 z m 0.98133,-3.088286 c -1.18336,0 -1.78948,-0.57725 -1.78948,-1.327675 0,-0.721562 0.57725,-1.269949 1.81834,-1.269949 h 2.5399 v 0.57725 c 0,1.067912 -0.9236,2.020374 -2.56876,2.020374 z"),W($r,"class","st0 svelte-sdid3b"),W($r,"d","m 233.82859,85.331091 h 2.71307 v -3.434636 h -1.52971 c -1.18336,0 -1.73175,-0.548387 -1.73175,-1.789474 v -4.820035 h 3.20374 v -3.376911 h -3.20374 v -3.521224 h -3.78099 v 3.521224 h -2.36672 v 3.376911 h 2.19355 v 5.772497 c 0,2.424449 1.3854,4.271648 4.50255,4.271648 z"),W(Nn,"class","st0 svelte-sdid3b"),W(Nn,"d","m 238.33113,70.293735 h 4.21393 V 66.28185 h -4.21393 z m 0.11545,15.037356 h 3.95417 V 71.910035 h -3.95417 z"),W(ia,"class","st0 svelte-sdid3b"),W(ia,"d","m 250.2802,85.561991 c 4.35824,0 6.6961,-2.915111 6.6961,-6.926997 0,-4.040748 -2.39559,-6.955859 -6.6961,-6.955859 -4.32937,0 -6.69609,2.915111 -6.69609,6.955859 0,4.011886 2.33786,6.926997 6.69609,6.926997 z m 0,-3.463498 c -1.61629,0 -2.68421,-1.03905 -2.68421,-3.463499 0,-2.424449 1.03905,-3.492361 2.68421,-3.492361 1.64517,0 2.68422,1.03905 2.68422,3.492361 0,2.453311 -1.03905,3.463499 -2.68422,3.463499 z"),W(Pn,"class","st0 svelte-sdid3b"),W(Pn,"d","m 258.39056,85.331091 h 3.95416 v -7.446522 c 0,-1.616299 1.03905,-2.626486 2.45332,-2.626486 1.55857,0 2.25127,0.9236 2.25127,2.453312 v 7.619696 h 3.95416 V 76.49917 c 0,-2.943974 -1.99151,-4.820035 -4.99321,-4.820035 -1.76061,0 -2.91511,0.634974 -3.66554,1.529712 h -0.0866 l -0.31749,-1.26995 h -3.55009 z"),W(Wn,"class","st0 svelte-sdid3b"),W(Wn,"d","m 158.64181,109.80648 c 5.39728,0 7.50424,-2.309 7.50424,-5.51273 0,-3.52123 -2.53989,-4.877765 -5.88794,-5.570465 L 157.8048,98.20376 c -1.67403,-0.34635 -2.02038,-0.981324 -2.02038,-1.674024 0,-0.750425 0.72156,-1.558574 2.82853,-1.558574 2.13582,0 3.03056,1.067912 3.14601,2.251274 h 4.09847 c -0.0289,-3.434636 -3.05942,-5.859085 -7.1579,-5.859085 -4.24278,0 -7.01358,2.135824 -7.01358,5.166385 0,3.434636 2.45331,4.733444 5.5416,5.397284 l 2.62648,0.57725 c 1.58744,0.34635 2.19355,0.9236 2.19355,1.90492 0,1.06792 -0.89474,1.8472 -3.37691,1.8472 -1.96265,0 -3.31919,-0.86587 -3.49236,-2.82852 h -4.09847 c 0.2309,3.86757 2.7708,6.37861 7.56197,6.37861 z"),W(aa,"class","st0 svelte-sdid3b"),W(aa,"d","m 173.47713,109.57558 h 2.71307 v -3.43464 h -1.52971 c -1.18336,0 -1.73175,-0.54838 -1.73175,-1.78947 v -4.820035 h 3.20374 v -3.376911 h -3.20374 V 92.6333 h -3.78099 v 3.521224 h -2.36672 v 3.376911 h 2.19355 v 5.772495 c 0,2.42445 1.3854,4.27165 4.50255,4.27165 z"),W(Un,"class","st0 svelte-sdid3b"),W(Un,"d","m 178.12399,109.57558 h 3.6944 v -6.63837 c 0,-2.16469 1.21222,-3.405775 3.08828,-3.405775 h 1.29881 v -3.607811 h -0.9236 c -1.73175,0 -2.85738,1.010187 -3.43463,2.193549 h -0.11545 l -0.31749,-1.962649 h -3.29032 z"),W(Jn,"class","st0 svelte-sdid3b"),W(Jn,"d","m 191.25642,109.80648 c 1.67402,0 2.85738,-0.57725 3.60781,-1.44312 h 0.11545 l 0.28862,1.21222 h 3.55009 v -8.83192 c 0,-2.799662 -2.22241,-4.820036 -5.88795,-4.820036 -3.95416,0 -5.77249,2.164686 -5.77249,4.675726 h 3.69439 c 0,-0.808153 0.72157,-1.500853 1.96265,-1.500853 1.47199,0 2.04924,0.721563 2.04924,1.645163 v 0.72156 h -2.88625 c -3.6944,0 -5.39728,1.64516 -5.39728,4.12734 -0.0289,2.39558 1.64516,4.21392 4.67572,4.21392 z m 1.01019,-3.08829 c -1.18337,0 -1.78948,-0.57725 -1.78948,-1.32767 0,-0.72156 0.57725,-1.29881 1.81834,-1.29881 h 2.5399 v 0.57725 c 0,1.09677 -0.95247,2.04923 -2.56876,2.04923 z"),W(Ia,"class","st0 svelte-sdid3b"),W(Ia,"d","m 206.49581,109.57558 h 2.71308 v -3.43464 h -1.52972 c -1.18336,0 -1.73175,-0.54838 -1.73175,-1.78947 v -4.820035 h 3.20374 v -3.376911 h -3.20374 V 92.6333 h -3.78098 v 3.521224 h -2.36673 v 3.376911 h 2.19355 v 5.772495 c 0,2.42445 1.3854,4.27165 4.50255,4.27165 z"),W(ti,"class","st0 svelte-sdid3b"),W(ti,"d","m 217.14607,109.80648 c 3.66554,0 5.80136,-2.13582 6.17657,-4.56027 h -3.83871 c -0.2309,0.60611 -0.86587,1.32767 -2.33786,1.32767 -1.78947,0 -2.59762,-1.09677 -2.62649,-2.68421 h 8.97624 v -1.47199 c 0,-3.63667 -2.309,-6.551781 -6.40748,-6.551781 -4.35823,0 -6.58064,3.146011 -6.58064,6.955861 0,3.89643 2.39558,6.98472 6.63837,6.98472 z m -2.59762,-8.37012 c 0.0866,-1.26995 0.80815,-2.280138 2.51103,-2.280138 1.55858,0 2.309,1.010188 2.39559,2.280138 z"),W(ya,"class","st0 svelte-sdid3b"),W(ya,"d","m 230.7403,115.69443 c 3.75212,0 6.58065,-2.10696 6.58065,-5.48388 V 96.125661 h -3.55009 l -0.40407,1.298812 h -0.11545 c -0.63498,-0.779287 -1.67403,-1.529712 -3.57895,-1.529712 -3.37691,0 -5.45501,2.915111 -5.45501,6.955859 0,4.01189 2.04924,6.927 5.45501,6.927 1.90492,0 2.91511,-0.75043 3.57895,-1.52971 h 0.11545 v 1.87606 c 0,1.21222 -0.86588,2.13582 -2.62649,2.13582 -1.24109,0 -2.13582,-0.66384 -2.22241,-1.55857 h -3.86757 c 0.0577,3.05942 2.48217,4.99321 6.08998,4.99321 z m 0.17318,-9.35145 c -1.99152,0 -2.65535,-1.58744 -2.65535,-3.4635 0,-1.87606 0.6927,-3.492358 2.65535,-3.492358 1.96264,0 2.65534,1.616298 2.65534,3.492358 0,1.87606 -0.66383,3.4635 -2.65534,3.4635 z"),W(Xa,"class","st0 svelte-sdid3b"),W(Xa,"d","m 238.99497,94.538224 h 4.21392 v -4.011885 h -4.21392 z m 0.14431,15.037356 h 3.95417 V 96.154524 h -3.95417 z"),W(na,"class","st0 svelte-sdid3b"),W(na,"d","m 250.91518,109.80648 c 3.66553,0 5.80136,-2.13582 6.17657,-4.56027 h -3.83871 c -0.2309,0.60611 -0.86587,1.32767 -2.33786,1.32767 -1.78948,0 -2.59762,-1.09677 -2.62649,-2.68421 h 8.97624 v -1.47199 c 0,-3.63667 -2.309,-6.551781 -6.40748,-6.551781 -4.35823,0 -6.58064,3.146011 -6.58064,6.955861 -0.0289,3.89643 2.39558,6.98472 6.63837,6.98472 z m -2.59762,-8.37012 c 0.0866,-1.26995 0.80814,-2.280138 2.51103,-2.280138 1.55858,0 2.309,1.010188 2.39559,2.280138 z"),W(_i,"class","st0 svelte-sdid3b"),W(_i,"d","m 263.96102,109.80648 c 3.40578,0 5.88795,-1.52971 5.88795,-4.30051 0,-2.82852 -1.93379,-3.78099 -3.98302,-4.1562 l -2.56876,-0.49066 c -0.63498,-0.11545 -1.01019,-0.40408 -1.01019,-0.923601 0,-0.519524 0.57725,-0.923599 1.55857,-0.923599 1.32768,0 1.78948,0.779287 1.76061,1.3854 h 3.89644 c 0,-2.482175 -2.10696,-4.502549 -5.59932,-4.502549 -3.60781,0 -5.51274,1.789475 -5.51274,3.983024 0,2.684215 1.96265,3.809845 4.09848,4.213925 l 1.99151,0.37521 c 0.9236,0.17317 1.35653,0.4618 1.35653,1.03905 0,0.4618 -0.49066,0.98132 -1.90492,0.98132 -1.41426,0 -1.99151,-0.75042 -1.99151,-1.50085 h -3.95416 c 0.0866,2.79967 1.78947,4.82004 5.97453,4.82004 z"),W(_a,"class","st0 svelte-sdid3b"),W(_a,"d","m 278.44999,109.57558 h 4.06961 V 91.594251 h -4.06961 z"),W(Fa,"class","st0 svelte-sdid3b"),W(Fa,"d","m 285.08836,109.57558 h 3.95416 v -7.44652 c 0,-1.6163 1.03905,-2.626488 2.45332,-2.626488 1.55857,0 2.25127,0.923598 2.25127,2.453308 v 7.6197 h 3.95416 v -8.83192 c 0,-2.943975 -1.99151,-4.820036 -4.99321,-4.820036 -1.76061,0 -2.91511,0.634975 -3.66554,1.529712 h -0.11545 l -0.31748,-1.298812 h -3.55009 v 13.421056 z"),W(ki,"class","st0 svelte-sdid3b"),W(ki,"d","m 305.60959,109.80648 c 3.89644,0 5.94567,-2.42445 6.11885,-5.51273 h -3.98302 c -0.11545,1.18336 -0.95247,2.04923 -2.22242,2.04923 -1.67402,0 -2.62648,-1.03905 -2.62648,-3.49236 0,-2.42445 0.95246,-3.463498 2.62648,-3.463498 1.29882,0 2.10697,0.865878 2.22242,2.049238 h 3.98302 c -0.17318,-3.11715 -2.22241,-5.512736 -6.20544,-5.512736 -4.30051,0 -6.63837,2.886248 -6.63837,6.926996 -0.0289,4.06961 2.42445,6.95586 6.72496,6.95586 z"),W(vi,"class","st0 svelte-sdid3b"),W(vi,"d","m 312.85408,109.57558 h 4.21392 v -4.01189 h -4.21392 z"),W(Qe,"class","text-group svelte-sdid3b"),W(Qe,"fill",xi=at[0]?"#fbf8e9":"#16343e"),W(Qe,"opacity","1.0"),W(Qe,"transform","scale(0.75, 0.76) translate(9, 12)")},m(li,Ca){Q(li,Qe,Ca),ie(Qe,gt),ie(Qe,ct),ie(Qe,yt),ie(Qe,Ct),ie(Qe,Ut),ie(Qe,tr),ie(Qe,ar),ie(Qe,fr),ie(Qe,vr),ie(Qe,Fr),ie(Qe,qr),ie(Qe,$r),ie(Qe,Nn),ie(Qe,ia),ie(Qe,Pn),ie(Qe,Wn),ie(Qe,aa),ie(Qe,Un),ie(Qe,Jn),ie(Qe,Ia),ie(Qe,ti),ie(Qe,ya),ie(Qe,Xa),ie(Qe,na),ie(Qe,_i),ie(Qe,_a),ie(Qe,Fa),ie(Qe,ki),ie(Qe,vi),Bi=!0},p(li,Ca){at=li,(!Bi||Ca&1&&xi!==(xi=at[0]?"#fbf8e9":"#16343e"))&&W(Qe,"fill",xi)},i(li){Bi||(lt(()=>{wi&&wi.end(1),Zn||(Zn=Ft(Qe,Gr,{duration:Gt})),Zn.start()}),Bi=!0)},o(li){Zn&&Zn.invalidate(),wi=nr(Qe,Gr,{duration:Gt}),Bi=!1},d(li){li&&V(Qe),li&&wi&&wi.end()}}}function dn(at){let Qe,gt,ct,yt,Ct,Ut,tr;return{c(){Qe=ee("g"),gt=ee("path"),ct=ee("path"),this.h()},l(ar){Qe=me(ar,"g",{class:!0,fill:!0,opacity:!0},1);var fr=ue(Qe);gt=me(fr,"path",{d:!0,class:!0},1),ue(gt).forEach(V),ct=me(fr,"path",{d:!0,class:!0},1),ue(ct).forEach(V),fr.forEach(V),this.h()},h(){W(gt,"d","M126.863 55.99c3.466 0 5.764-2.38 6.037-5.188h-3.096c-.234 1.287-1.11 2.438-2.941 2.438-2.259 0-3.486-1.482-3.486-4.231 0-2.75 1.227-4.251 3.486-4.251 1.909 0 2.804 1.248 2.921 2.554h3.116c-.195-2.886-2.551-5.323-6.037-5.323-4.382 0-6.602 3.08-6.602 7.02 0 3.88 2.22 6.98 6.602 6.98z"),W(gt,"class","svelte-sdid3b"),W(ct,"d","M138.625 55.99c2.785 0 4.401-1.62 4.674-3.452h-2.902c-.175.468-.662 1.014-1.772 1.014-1.363 0-1.967-.839-1.986-2.028h6.796v-1.111c0-2.77-1.753-4.973-4.868-4.973-3.311 0-4.986 2.399-4.986 5.285 0 2.924 1.831 5.264 5.044 5.264zm-1.967-6.357c.059-.975.623-1.736 1.909-1.736 1.187 0 1.752.76 1.811 1.736h-3.72zM144.5 55.814h2.999v-5.655c0-1.228.778-1.989 1.85-1.989 1.187 0 1.713.702 1.713 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.784 1.15h-.078l-.234-.974H144.5v10.198zM159.904 55.814h2.065V53.2H160.8c-.896 0-1.304-.41-1.304-1.365V48.17h2.434v-2.554h-2.434v-2.672h-2.863v2.672h-1.792v2.554h1.656v4.387c0 1.853 1.051 3.257 3.407 3.257zM167.98 55.99c2.784 0 4.401-1.62 4.673-3.452h-2.901c-.176.468-.662 1.014-1.772 1.014-1.364 0-1.967-.839-1.987-2.028h6.797v-1.111c0-2.77-1.753-4.973-4.869-4.973-3.31 0-4.985 2.399-4.985 5.285 0 2.924 1.83 5.264 5.044 5.264zm-1.967-6.357c.058-.975.623-1.736 1.908-1.736 1.188 0 1.753.76 1.811 1.736h-3.719zM173.854 55.814h2.804v-5.031c0-1.638.916-2.593 2.337-2.593h.974v-2.75h-.701c-1.305 0-2.162.76-2.61 1.658h-.078l-.233-1.482h-2.493v10.198zM125.247 74.393c3.31 0 5.082-2.223 5.082-5.265 0-3.061-1.811-5.284-5.082-5.284-3.272 0-5.083 2.223-5.083 5.284s1.772 5.265 5.083 5.265zm0-2.633c-1.227 0-2.026-.78-2.026-2.632 0-1.833.779-2.652 2.026-2.652 1.246 0 2.025.8 2.025 2.652s-.779 2.632-2.025 2.632zM131.406 74.217h2.999v-5.655c0-1.228.779-1.988 1.85-1.988 1.188 0 1.713.701 1.713 1.871v5.772h2.999V67.51c0-2.243-1.519-3.666-3.778-3.666-1.324 0-2.22.487-2.784 1.15h-.078l-.234-.975h-2.687v10.198zM155.988 69.03c1.655-.663 2.687-2.145 2.687-4.114 0-2.32-1.752-4.348-4.654-4.348h-6.231v13.65h3.057V69.4h1.908l2.941 4.816h3.583v-.195l-3.291-4.992zm-5.141-5.732h3.018c1.188 0 1.675.819 1.675 1.638 0 .858-.448 1.735-1.675 1.735h-3.018v-3.373zM163.835 74.393c1.324 0 2.22-.488 2.784-1.15h.078l.234.974h2.687V64.02h-2.999v5.655c0 1.228-.779 1.989-1.85 1.989-1.188 0-1.713-.702-1.713-1.872v-5.772h-2.999v6.708c0 2.242 1.519 3.666 3.778 3.666zM170.944 74.217h2.805v-5.03c0-1.638.915-2.594 2.337-2.594h.973v-2.75h-.701c-1.305 0-2.161.761-2.609 1.658h-.078l-.234-1.482h-2.493v10.198zM180.916 74.393c1.265 0 2.161-.449 2.726-1.092h.078l.214.916h2.687V67.51c0-2.126-1.674-3.666-4.459-3.666-2.999 0-4.382 1.638-4.382 3.548h2.805c0-.623.545-1.13 1.48-1.13 1.11 0 1.557.546 1.557 1.248v.545h-2.181c-2.804 0-4.089 1.248-4.089 3.14 0 1.813 1.266 3.198 3.564 3.198zm.759-2.34c-.896 0-1.363-.43-1.363-1.014 0-.546.428-.975 1.383-.975h1.927v.429c0 .838-.72 1.56-1.947 1.56zM187.985 74.217h2.999V59.788h-2.999v14.43zM121.04 92.62h3.077V78.972h-3.077v13.65zM126.062 92.62h2.999v-5.654c0-1.229.779-1.989 1.85-1.989 1.188 0 1.713.702 1.713 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.784 1.15h-.078l-.234-.974h-2.687V92.62zM136.988 92.62h2.999v-5.654c0-1.229.779-1.989 1.85-1.989 1.188 0 1.713.702 1.713 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.784 1.15h-.078l-.234-.974h-2.687V92.62zM152.509 92.796c3.311 0 5.083-2.223 5.083-5.265 0-3.061-1.811-5.284-5.083-5.284-3.271 0-5.082 2.223-5.082 5.284 0 3.062 1.772 5.265 5.082 5.265zm0-2.632c-1.226 0-2.025-.78-2.025-2.633 0-1.833.779-2.652 2.025-2.652 1.247 0 2.026.8 2.026 2.652 0 1.853-.779 2.633-2.026 2.633zM160.742 92.62h3.836l3.194-10.002v-.195h-3.038l-2.006 7.37h-.078l-2.064-7.37h-3.077v.195l3.233 10.003zM171.245 92.796c1.266 0 2.161-.449 2.726-1.092h.078l.214.917h2.688v-6.708c0-2.126-1.675-3.666-4.46-3.666-2.999 0-4.381 1.638-4.381 3.549h2.804c0-.624.545-1.131 1.48-1.131 1.11 0 1.558.546 1.558 1.248v.546h-2.181c-2.805 0-4.09 1.248-4.09 3.14 0 1.813 1.266 3.197 3.564 3.197zm.759-2.34c-.896 0-1.363-.429-1.363-1.014 0-.546.429-.975 1.383-.975h1.928v.43c0 .838-.721 1.56-1.948 1.56zM182.793 92.62h2.064v-2.612h-1.168c-.896 0-1.305-.41-1.305-1.365v-3.666h2.434v-2.554h-2.434V79.75h-2.862v2.672h-1.792v2.554h1.655v4.387c0 1.853 1.052 3.257 3.408 3.257zM186.214 81.214h3.194v-3.042h-3.194v3.042zm.097 11.407h2.999V82.423h-2.999V92.62zM195.272 92.796c3.311 0 5.083-2.223 5.083-5.265 0-3.061-1.811-5.284-5.083-5.284-3.272 0-5.083 2.223-5.083 5.284 0 3.062 1.773 5.265 5.083 5.265zm0-2.632c-1.227 0-2.025-.78-2.025-2.633 0-1.833.779-2.652 2.025-2.652s2.025.8 2.025 2.652c0 1.853-.779 2.633-2.025 2.633zM201.431 92.62h2.999v-5.654c0-1.229.779-1.989 1.85-1.989 1.188 0 1.714.702 1.714 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.785 1.15h-.078l-.234-.974h-2.687V92.62z"),W(ct,"class","svelte-sdid3b"),W(Qe,"class","text-group svelte-sdid3b"),W(Qe,"fill",yt=at[0]?"#fbf8e9":"#16343e"),W(Qe,"opacity","1.0")},m(ar,fr){Q(ar,Qe,fr),ie(Qe,gt),ie(Qe,ct),tr=!0},p(ar,fr){at=ar,(!tr||fr&1&&yt!==(yt=at[0]?"#fbf8e9":"#16343e"))&&W(Qe,"fill",yt)},i(ar){tr||(lt(()=>{Ut&&Ut.end(1),Ct||(Ct=Ft(Qe,Gr,{duration:Gt})),Ct.start()}),tr=!0)},o(ar){Ct&&Ct.invalidate(),Ut=nr(Qe,Gr,{duration:Gt}),tr=!1},d(ar){ar&&V(Qe),ar&&Ut&&Ut.end()}}}function xn(at){let Qe,gt,ct,yt,Ct,Ut,tr;return{c(){Qe=ee("g"),gt=ee("path"),yt=ee("path"),this.h()},l(ar){Qe=me(ar,"g",{opacity:!0,transform:!0,class:!0},1);var fr=ue(Qe);gt=me(fr,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(gt).forEach(V),yt=me(fr,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(yt).forEach(V),fr.forEach(V),this.h()},h(){W(gt,"fill","none"),W(gt,"style",ct=(at[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",jn),W(gt,"class","svelte-sdid3b"),W(yt,"fill","none"),W(yt,"style",Ct=(at[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(yt,"d",Bn),W(yt,"class","svelte-sdid3b"),W(Qe,"opacity","0.75"),W(Qe,"transform","scale(0.75, 0.76) translate(9, 12)"),W(Qe,"class","svelte-sdid3b")},m(ar,fr){Q(ar,Qe,fr),ie(Qe,gt),ie(Qe,yt),tr=!0},p(ar,fr){at=ar,(!tr||fr&1&&ct!==(ct=(at[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",ct),(!tr||fr&1&&Ct!==(Ct=(at[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(yt,"style",Ct)},i(ar){tr||(Ut&&Ut.end(1),tr=!0)},o(ar){Ut=nr(Qe,Gr,{duration:Gt}),tr=!1},d(ar){ar&&V(Qe),ar&&Ut&&Ut.end()}}}function tn(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr;return{c(){Qe=ee("g"),gt=ee("path"),Ct=ee("path"),this.h()},l(vr){Qe=me(vr,"g",{opacity:!0,transform:!0,class:!0},1);var Fr=ue(Qe);gt=me(Fr,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(V),Ct=me(Fr,"path",{style:!0,d:!0,class:!0},1),ue(Ct).forEach(V),Fr.forEach(V),this.h()},h(){W(gt,"style",ct=(at[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",jn),W(gt,"class","svelte-sdid3b"),W(Ct,"style",Ut=(at[0]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"),W(Ct,"d",Bn),W(Ct,"class","svelte-sdid3b"),W(Qe,"opacity","0.5"),W(Qe,"transform","scale(0.75, 0.76) translate(9, 12)"),W(Qe,"class","svelte-sdid3b")},m(vr,Fr){Q(vr,Qe,Fr),ie(Qe,gt),ie(Qe,Ct),fr=!0},p(vr,Fr){at=vr,(!fr||Fr&1&&ct!==(ct=(at[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",ct),(!fr||Fr&1&&Ut!==(Ut=(at[0]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"))&&W(Ct,"style",Ut)},i(vr){fr||(yt||lt(()=>{yt=Ft(gt,Mn,{duration:Gt,delay:vt,easing:_r}),yt.start()}),tr||lt(()=>{tr=Ft(Ct,Or,{duration:vt}),tr.start()}),ar&&ar.end(1),fr=!0)},o(vr){ar=nr(Qe,Gr,{duration:Gt}),fr=!1},d(vr){vr&&V(Qe),vr&&ar&&ar.end()}}}function wn(at){let Qe,gt,ct,yt,Ct,Ut,tr;return{c(){Qe=ee("g"),gt=ee("path"),yt=ee("path"),this.h()},l(ar){Qe=me(ar,"g",{opacity:!0,class:!0},1);var fr=ue(Qe);gt=me(fr,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(gt).forEach(V),yt=me(fr,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(yt).forEach(V),fr.forEach(V),this.h()},h(){W(gt,"fill","none"),W(gt,"style",ct=(at[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",An),W(gt,"class","svelte-sdid3b"),W(yt,"fill","none"),W(yt,"style",Ct=(at[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(yt,"d",Yn),W(yt,"class","svelte-sdid3b"),W(Qe,"opacity","0.75"),W(Qe,"class","svelte-sdid3b")},m(ar,fr){Q(ar,Qe,fr),ie(Qe,gt),ie(Qe,yt),tr=!0},p(ar,fr){at=ar,(!tr||fr&1&&ct!==(ct=(at[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",ct),(!tr||fr&1&&Ct!==(Ct=(at[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(yt,"style",Ct)},i(ar){tr||(Ut&&Ut.end(1),tr=!0)},o(ar){Ut=nr(Qe,Gr,{duration:Gt}),tr=!1},d(ar){ar&&V(Qe),ar&&Ut&&Ut.end()}}}function Sn(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr;return{c(){Qe=ee("g"),gt=ee("path"),Ct=ee("path"),this.h()},l(vr){Qe=me(vr,"g",{opacity:!0,class:!0},1);var Fr=ue(Qe);gt=me(Fr,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(V),Ct=me(Fr,"path",{style:!0,d:!0,class:!0},1),ue(Ct).forEach(V),Fr.forEach(V),this.h()},h(){W(gt,"style",ct=(at[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",An),W(gt,"class","svelte-sdid3b"),W(Ct,"style",Ut=(at[0]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"),W(Ct,"d",Yn),W(Ct,"class","svelte-sdid3b"),W(Qe,"opacity","0.5"),W(Qe,"class","svelte-sdid3b")},m(vr,Fr){Q(vr,Qe,Fr),ie(Qe,gt),ie(Qe,Ct),fr=!0},p(vr,Fr){at=vr,(!fr||Fr&1&&ct!==(ct=(at[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",ct),(!fr||Fr&1&&Ut!==(Ut=(at[0]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"))&&W(Ct,"style",Ut)},i(vr){fr||(yt||lt(()=>{yt=Ft(gt,Mn,{duration:Gt,delay:vt,easing:_r}),yt.start()}),tr||lt(()=>{tr=Ft(Ct,Or,{duration:vt}),tr.start()}),ar&&ar.end(1),fr=!0)},o(vr){ar=nr(Qe,Gr,{duration:Gt}),fr=!1},d(vr){vr&&V(Qe),vr&&ar&&ar.end()}}}function un(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr,vr,Fr,qr,$r,Nn,ia,Pn,Wn,aa,Un,Jn,Ia,ti,ya,Xa,na,_i,_a,Fa,ki,vi,xi,Zn,wi,Bi,li,Ca,to,ro,Lo,Oo,Ji,Zi,_o,as,vs,Js,xo,ni,ui,Po,no,Ao,Qo,Gi,Ya,is,Ea,Ga,Li,Mi,Qn,za,Si,Vi,uo,Ei,Qi,qo,ks,or,Fo,fo,Di,mi,Is,_l,dl,No,wl,Qs,Vo,Tl,Hl,So,ms,zs,vl,Ro=!!at[2]&&Lr(at);return{c(){Qe=re("header"),gt=re("div"),ct=re("div"),yt=re("div"),Ct=re("div"),Ut=ee("svg"),tr=ee("path"),fr=fe(),Ro&&Ro.c(),vr=fe(),Fr=re("nav"),qr=re("ul"),$r=re("li"),Nn=re("a"),ia=ae("About"),Pn=re("button"),Wn=re("span"),aa=ae("Show submenu for “About”"),Un=fe(),Jn=re("li"),Ia=re("a"),ti=ae("Apps & Data"),ya=re("button"),Xa=re("span"),na=ae("Show submenu for “Apps & Data”"),_i=fe(),_a=re("li"),Fa=re("a"),ki=ae("Docs & How To's"),vi=re("button"),xi=re("span"),Zn=ae("Show submenu for “Docs & How To's”"),wi=fe(),Bi=re("li"),li=re("a"),Ca=ae("Project Mgmt"),to=re("button"),ro=re("span"),Lo=ae("Show submenu for “Project Mgmt”"),Oo=fe(),Ji=re("li"),Zi=re("a"),_o=ae("Past Work (Gallery)"),as=re("button"),vs=re("span"),Js=ae("Show submenu for “Past Work (Gallery)”"),xo=fe(),ni=re("div"),ui=re("a"),Po=re("span"),no=re("span"),Ao=re("span"),Qo=ae("Site Menu"),Gi=fe(),Ya=re("span"),is=re("span"),Ea=ae("Close Menu"),Ga=fe(),Li=re("span"),Mi=re("span"),Qn=re("span"),za=ee("svg"),Si=ee("g"),Vi=ee("rect"),uo=ee("rect"),Ei=ee("rect"),qo=ee("defs"),ks=ee("clipPath"),or=ee("path"),Fo=fe(),fo=re("span"),Di=ee("svg"),mi=ee("path"),Vo=fe(),Tl=re("br"),Hl=fe(),So=re("br"),this.h()},l(Xi){Qe=me(Xi,"HEADER",{id:!0,class:!0,style:!0});var wo=ue(Qe);gt=me(wo,"DIV",{class:!0});var $=ue(gt);ct=me($,"DIV",{class:!0});var ne=ue(ct);yt=me(ne,"DIV",{class:!0});var q=ue(yt);Ct=me(q,"DIV",{class:!0});var ve=ue(Ct);Ut=me(ve,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,style:!0},1);var Se=ue(Ut);tr=me(Se,"path",{class:!0,fill:!0,d:!0},1),ue(tr).forEach(V),Se.forEach(V),fr=ke(ve),Ro&&Ro.l(ve),ve.forEach(V),vr=ke(q),Fr=me(q,"NAV",{class:!0,"data-itemcount":!0,"data-textlength":!0,role:!0,"aria-label":!0});var Oe=ue(Fr);qr=me(Oe,"UL",{id:!0,class:!0});var Ye=ue(qr);$r=me(Ye,"LI",{id:!0,class:!0,"aria-haspopup":!0});var ut=ue($r);Nn=me(ut,"A",{href:!0,role:!0,class:!0});var bt=ue(Nn);ia=be(bt,"About"),bt.forEach(V),Pn=me(ut,"BUTTON",{class:!0,"aria-haspopup":!0});var jt=ue(Pn);Wn=me(jt,"SPAN",{class:!0});var sr=ue(Wn);aa=be(sr,"Show submenu for “About”"),sr.forEach(V),jt.forEach(V),ut.forEach(V),Un=ke(Ye),Jn=me(Ye,"LI",{id:!0,class:!0,"aria-haspopup":!0});var pr=ue(Jn);Ia=me(pr,"A",{href:!0,role:!0,class:!0});var br=ue(Ia);ti=be(br,"Apps & Data"),br.forEach(V),ya=me(pr,"BUTTON",{class:!0,"aria-haspopup":!0});var Cr=ue(ya);Xa=me(Cr,"SPAN",{class:!0});var Pr=ue(Xa);na=be(Pr,"Show submenu for “Apps & Data”"),Pr.forEach(V),Cr.forEach(V),pr.forEach(V),_i=ke(Ye),_a=me(Ye,"LI",{id:!0,class:!0,"aria-haspopup":!0});var jr=ue(_a);Fa=me(jr,"A",{href:!0,role:!0,class:!0});var Mr=ue(Fa);ki=be(Mr,"Docs & How To's"),Mr.forEach(V),vi=me(jr,"BUTTON",{class:!0,"aria-haspopup":!0});var Ur=ue(vi);xi=me(Ur,"SPAN",{class:!0});var Jr=ue(xi);Zn=be(Jr,"Show submenu for “Docs & How To's”"),Jr.forEach(V),Ur.forEach(V),jr.forEach(V),wi=ke(Ye),Bi=me(Ye,"LI",{id:!0,class:!0,"aria-haspopup":!0});var fn=ue(Bi);li=me(fn,"A",{href:!0,role:!0,class:!0});var zn=ue(li);Ca=be(zn,"Project Mgmt"),zn.forEach(V),to=me(fn,"BUTTON",{class:!0,"aria-haspopup":!0});var kn=ue(to);ro=me(kn,"SPAN",{class:!0});var Dn=ue(ro);Lo=be(Dn,"Show submenu for “Project Mgmt”"),Dn.forEach(V),kn.forEach(V),fn.forEach(V),Oo=ke(Ye),Ji=me(Ye,"LI",{id:!0,class:!0,"aria-haspopup":!0});var qn=ue(Ji);Zi=me(qn,"A",{href:!0,role:!0,class:!0});var pa=ue(Zi);_o=be(pa,"Past Work (Gallery)"),pa.forEach(V),as=me(qn,"BUTTON",{class:!0,"aria-haspopup":!0});var ua=ue(as);vs=me(ua,"SPAN",{class:!0});var wa=ue(vs);Js=be(wa,"Show submenu for “Past Work (Gallery)”"),wa.forEach(V),ua.forEach(V),qn.forEach(V),Ye.forEach(V),Oe.forEach(V),xo=ke(q),ni=me(q,"DIV",{class:!0});var Da=ue(ni);ui=me(Da,"A",{href:!0,class:!0,role:!0,labelledby:!0});var oi=ue(ui);Po=me(oi,"SPAN",{id:!0,class:!0});var qa=ue(Po);no=me(qa,"SPAN",{class:!0});var Fi=ue(no);Ao=me(Fi,"SPAN",{class:!0});var Ua=ue(Ao);Qo=be(Ua,"Site Menu"),Ua.forEach(V),Fi.forEach(V),Gi=ke(qa),Ya=me(qa,"SPAN",{class:!0,"aria-hidden":!0});var fi=ue(Ya);is=me(fi,"SPAN",{class:!0});var Ii=ue(is);Ea=be(Ii,"Close Menu"),Ii.forEach(V),fi.forEach(V),qa.forEach(V),Ga=ke(oi),Li=me(oi,"SPAN",{class:!0,"aria-hidden":!0});var hi=ue(Li);Mi=me(hi,"SPAN",{class:!0});var ii=ue(Mi);Qn=me(ii,"SPAN",{class:!0,"aria-hidden":!0});var zi=ue(Qn);za=me(zi,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var si=ue(za);Si=me(si,"g",{"clip-path":!0,fill:!0,class:!0},1);var Na=ue(Si);Vi=me(Na,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(Vi).forEach(V),uo=me(Na,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(uo).forEach(V),Ei=me(Na,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(Ei).forEach(V),Na.forEach(V),qo=me(si,"defs",{class:!0},1);var os=ue(qo);ks=me(os,"clipPath",{id:!0,class:!0},1);var Bo=ue(ks);or=me(Bo,"path",{fill:!0,transform:!0,d:!0,class:!0},1),ue(or).forEach(V),Bo.forEach(V),os.forEach(V),si.forEach(V),zi.forEach(V),Fo=ke(ii),fo=me(ii,"SPAN",{class:!0,"aria-hidden":!0});var bo=ue(fo);Di=me(bo,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var ho=ue(Di);mi=me(ho,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0},1),ue(mi).forEach(V),ho.forEach(V),bo.forEach(V),ii.forEach(V),hi.forEach(V),oi.forEach(V),Da.forEach(V),q.forEach(V),ne.forEach(V),$.forEach(V),wo.forEach(V),Vo=ke(Xi),Tl=me(Xi,"BR",{class:!0}),Hl=ke(Xi),So=me(Xi,"BR",{class:!0}),this.h()},h(){W(tr,"class","border svelte-sdid3b"),W(tr,"fill",ar=at[0]?"#26535c":"#fbf8e9"),W(tr,"d","M115.084 31.849L61.916.809a5.66 5.66 0 00-5.832 0L2.916 31.85C1.118 32.927 0 34.839 0 36.949v62.127c0 2.109 1.118 4.021 2.916 5.1l53.168 31.039c.923.54 1.895.785 2.916.785 1.02 0 2.041-.245 2.916-.785l53.168-31.039c1.798-1.03 2.916-2.991 2.916-5.1V36.948c0-2.108-1.118-4.02-2.916-5.1z"),W(Ut,"class","logo-border svelte-sdid3b"),W(Ut,"xmlns","http://www.w3.org/2000/svg"),W(Ut,"width","308"),W(Ut,"height","136"),W(Ut,"viewBox","0 0 308 136"),W(Ut,"fill","none"),je(Ut,"background-color","transparent"),W(Ct,"class","site-header__item site-header__main-logo col-auto svelte-sdid3b"),W(Nn,"href","#about/"),W(Nn,"role","menuitem"),W(Nn,"class"," top-level-nav-link svelte-sdid3b"),W(Wn,"class","screen-reader-text svelte-sdid3b"),W(Pn,"class","sr-dropdown-button has-dropdown-trigger-indictator dropdown-trigger hover-target svelte-sdid3b"),W(Pn,"aria-haspopup","true"),W($r,"id","menu-item-12"),W($r,"class","menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-12 col-auto top-level-menu-item svelte-sdid3b"),W($r,"aria-haspopup","true"),W(Ia,"href","#applications/"),W(Ia,"role","menuitem"),W(Ia,"class"," top-level-nav-link svelte-sdid3b"),W(Xa,"class","screen-reader-text svelte-sdid3b"),W(ya,"class","sr-dropdown-button has-dropdown-trigger-indictator dropdown-trigger hover-target svelte-sdid3b"),W(ya,"aria-haspopup","true"),W(Jn,"id","menu-item-13"),W(Jn,"class","menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-13 col-auto top-level-menu-item svelte-sdid3b"),W(Jn,"aria-haspopup","true"),W(Fa,"href","#documentation/"),W(Fa,"role","menuitem"),W(Fa,"class"," top-level-nav-link svelte-sdid3b"),W(xi,"class","screen-reader-text svelte-sdid3b"),W(vi,"class","sr-dropdown-button has-dropdown-trigger-indictator dropdown-trigger hover-target svelte-sdid3b"),W(vi,"aria-haspopup","true"),W(_a,"id","menu-item-14"),W(_a,"class","menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-14 col-auto top-level-menu-item svelte-sdid3b"),W(_a,"aria-haspopup","true"),W(li,"href","#project/"),W(li,"role","menuitem"),W(li,"class"," top-level-nav-link svelte-sdid3b"),W(ro,"class","screen-reader-text svelte-sdid3b"),W(to,"class","sr-dropdown-button has-dropdown-trigger-indictator dropdown-trigger hover-target svelte-sdid3b"),W(to,"aria-haspopup","true"),W(Bi,"id","menu-item-15"),W(Bi,"class","menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-14 col-auto top-level-menu-item svelte-sdid3b"),W(Bi,"aria-haspopup","true"),W(Zi,"href","#past/"),W(Zi,"role","menuitem"),W(Zi,"class"," top-level-nav-link svelte-sdid3b"),W(vs,"class","screen-reader-text svelte-sdid3b"),W(as,"class","sr-dropdown-button has-dropdown-trigger-indictator dropdown-trigger hover-target svelte-sdid3b"),W(as,"aria-haspopup","true"),W(Ji,"id","menu-item-16"),W(Ji,"class","menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-14 col-auto top-level-menu-item svelte-sdid3b"),W(Ji,"aria-haspopup","true"),W(qr,"id","primary-navigation"),W(qr,"class","row menu justify-content-start site-header__item_inner has-dropdowns has-aria-dropdowns svelte-sdid3b"),W(Fr,"class","site-header__item site-header__menu-section col-auto site-header__primary-menu  over-four-items over-fourty-characters svelte-sdid3b"),W(Fr,"data-itemcount","5"),W(Fr,"data-textlength","42"),W(Fr,"role","navigation"),W(Fr,"aria-label","Primary Navigation"),W(Ao,"class","screen-reader-text svelte-sdid3b"),W(no,"class","hamburger-control__open-label svelte-sdid3b"),W(is,"class","screen-reader-text svelte-sdid3b"),W(Ya,"class","hamburger-control__close-label svelte-sdid3b"),W(Ya,"aria-hidden","true"),W(Po,"id","mm-label"),W(Po,"class","hamburger-control__label svelte-sdid3b"),W(Vi,"y",".5"),W(Vi,"width","20"),W(Vi,"height","3"),W(Vi,"rx","1.5"),W(Vi,"class","svelte-sdid3b"),W(uo,"y","7.5"),W(uo,"width","20"),W(uo,"height","3"),W(uo,"rx","1.5"),W(uo,"class","svelte-sdid3b"),W(Ei,"y","14.5"),W(Ei,"width","20"),W(Ei,"height","3"),W(Ei,"rx","1.5"),W(Ei,"class","svelte-sdid3b"),W(Si,"clip-path","url(#clip0)"),W(Si,"fill",Qi=at[0]?"#fbf8e9":"#16343e"),W(Si,"class","svelte-sdid3b"),W(or,"fill","#fff"),W(or,"transform","translate(0 .5)"),W(or,"d","M0 0h20v17H0z"),W(or,"class","svelte-sdid3b"),W(ks,"id","clip0"),W(ks,"class","svelte-sdid3b"),W(qo,"class","svelte-sdid3b"),W(za,"class","menu svelte-sdid3b"),W(za,"width","20"),W(za,"height","18"),W(za,"viewBox","0 0 20 18"),W(za,"fill","none"),W(za,"xmlns","http://www.w3.org/2000/svg"),W(Qn,"class","hamburger-control__open svelte-sdid3b"),W(Qn,"aria-hidden","true"),W(mi,"d","M3.304 20.801L11 13.104l7.698 7.697c.296.297.671.449 1.052.449.38 0 .756-.152 1.052-.449a1.459 1.459 0 000-2.104L13.104 11 20.8 3.303a1.459 1.459 0 000-2.104 1.46 1.46 0 00-2.104 0h0L11 8.898 3.301 1.2a1.46 1.46 0 00-2.103 0h0a1.46 1.46 0 000 2.104L8.834 11 1.2 18.697s0 0 0 0a1.458 1.458 0 00-.012 2.092c.255.326.713.461 1.064.461.38 0 .756-.152 1.052-.449h0z"),W(mi,"fill",Is=at[0]?"#fbf8e9":"#16343e"),W(mi,"stroke","#16343e"),W(mi,"stroke-width",".5"),W(mi,"class","svelte-sdid3b"),W(Di,"class","menu-close svelte-sdid3b"),W(Di,"width","22"),W(Di,"height","22"),W(Di,"viewBox","0 0 22 22"),W(Di,"fill","none"),W(Di,"xmlns","http://www.w3.org/2000/svg"),W(fo,"class","hamburger-control__close svelte-sdid3b"),W(fo,"aria-hidden","true"),W(Mi,"class","hamburger-control__inner svelte-sdid3b"),W(Li,"class",_l=B(at[0]?"Light-on-Dark hamburger-control":"hamburger-control")+" svelte-sdid3b"),W(Li,"aria-hidden","true"),W(ui,"href","#primary-footer-menu-section"),W(ui,"class","mobile-menu-toggle__control js-mobile-menu-control js-open-main-menu svelte-sdid3b"),W(ui,"role","button"),W(ui,"labelledby","mm-label"),W(ni,"class","site-header__item mobile-menu-toggle col svelte-sdid3b"),W(yt,"class",dl=B(at[0]?"Light-on-Dark row site-header__row justify-content-between align-items-center":"row site-header__row justify-content-between align-items-center")+" svelte-sdid3b"),W(ct,"class",No=B(at[0]?"Light-on-Dark container":"container")+" svelte-sdid3b"),W(gt,"class",wl=B(at[0]?"Light-on-Dark site-header__inner":"site-header__inner")+" svelte-sdid3b"),W(Qe,"id","desktop-header"),W(Qe,"class",Qs=B(at[0]?"Light-on-Dark site-header":"site-header")+" svelte-sdid3b"),je(Qe,"position","fixed"),je(Qe,"max-width","100%"),je(Qe,"max-height","108px"),je(Qe,"height","75px"),je(Qe,"z-index","1"),W(Tl,"class","svelte-sdid3b"),W(So,"class","svelte-sdid3b")},m(Xi,wo){Q(Xi,Qe,wo),ie(Qe,gt),ie(gt,ct),ie(ct,yt),ie(yt,Ct),ie(Ct,Ut),ie(Ut,tr),ie(Ct,fr),Ro&&Ro.m(Ct,null),ie(yt,vr),ie(yt,Fr),ie(Fr,qr),ie(qr,$r),ie($r,Nn),ie(Nn,ia),ie($r,Pn),ie(Pn,Wn),ie(Wn,aa),ie(qr,Un),ie(qr,Jn),ie(Jn,Ia),ie(Ia,ti),ie(Jn,ya),ie(ya,Xa),ie(Xa,na),ie(qr,_i),ie(qr,_a),ie(_a,Fa),ie(Fa,ki),ie(_a,vi),ie(vi,xi),ie(xi,Zn),ie(qr,wi),ie(qr,Bi),ie(Bi,li),ie(li,Ca),ie(Bi,to),ie(to,ro),ie(ro,Lo),ie(qr,Oo),ie(qr,Ji),ie(Ji,Zi),ie(Zi,_o),ie(Ji,as),ie(as,vs),ie(vs,Js),ie(yt,xo),ie(yt,ni),ie(ni,ui),ie(ui,Po),ie(Po,no),ie(no,Ao),ie(Ao,Qo),ie(Po,Gi),ie(Po,Ya),ie(Ya,is),ie(is,Ea),ie(ui,Ga),ie(ui,Li),ie(Li,Mi),ie(Mi,Qn),ie(Qn,za),ie(za,Si),ie(Si,Vi),ie(Si,uo),ie(Si,Ei),ie(za,qo),ie(qo,ks),ie(ks,or),ie(Mi,Fo),ie(Mi,fo),ie(fo,Di),ie(Di,mi),Q(Xi,Vo,wo),Q(Xi,Tl,wo),Q(Xi,Hl,wo),Q(Xi,So,wo),ms=!0,zs||(vl=pe(Nn,"click",at[7]),zs=!0)},p(Xi,[wo]){(!ms||wo&1&&ar!==(ar=Xi[0]?"#26535c":"#fbf8e9"))&&W(tr,"fill",ar),Xi[2]?Ro?(Ro.p(Xi,wo),wo&4&&Je(Ro,1)):(Ro=Lr(Xi),Ro.c(),Je(Ro,1),Ro.m(Ct,null)):Ro&&(Ge(),st(Ro,1,1,()=>{Ro=null}),ot()),(!ms||wo&1&&Qi!==(Qi=Xi[0]?"#fbf8e9":"#16343e"))&&W(Si,"fill",Qi),(!ms||wo&1&&Is!==(Is=Xi[0]?"#fbf8e9":"#16343e"))&&W(mi,"fill",Is),(!ms||wo&1&&_l!==(_l=B(Xi[0]?"Light-on-Dark hamburger-control":"hamburger-control")+" svelte-sdid3b"))&&W(Li,"class",_l),(!ms||wo&1&&dl!==(dl=B(Xi[0]?"Light-on-Dark row site-header__row justify-content-between align-items-center":"row site-header__row justify-content-between align-items-center")+" svelte-sdid3b"))&&W(yt,"class",dl),(!ms||wo&1&&No!==(No=B(Xi[0]?"Light-on-Dark container":"container")+" svelte-sdid3b"))&&W(ct,"class",No),(!ms||wo&1&&wl!==(wl=B(Xi[0]?"Light-on-Dark site-header__inner":"site-header__inner")+" svelte-sdid3b"))&&W(gt,"class",wl),(!ms||wo&1&&Qs!==(Qs=B(Xi[0]?"Light-on-Dark site-header":"site-header")+" svelte-sdid3b"))&&W(Qe,"class",Qs)},i(Xi){ms||(Je(Ro),ms=!0)},o(Xi){st(Ro),ms=!1},d(Xi){Xi&&V(Qe),Ro&&Ro.d(),Xi&&V(Vo),Xi&&V(Tl),Xi&&V(Hl),Xi&&V(So),zs=!1,vl()}}}let vt=1500,Gt=500,cr=2500;function Er(at,Qe,gt){let{light_on_dark:ct=!1}=Qe,yt=!1,{sidebarFunction:Ct=function($r){console.log("showSidebar",$r),yt=!yt,$r.target.data={action:"show",set:yt,path:"target"in $r&&"hash"in $r.target?$r.target.hash:""},$r.target.dispatchEvent(new CustomEvent("sidebar",$r))}}=Qe,Ut=!1,tr=!1,ar=!1,fr=!0,vr=!1,Fr=function($r){if($r&&!tr&&!ar)return gt(2,Ut=!0),setTimeout(()=>{gt(4,ar=!0),gt(6,vr=!1),setTimeout(()=>{gt(3,tr=!tr)},cr),setTimeout(()=>{gt(5,fr=!fr),setTimeout(()=>{gt(6,vr=!0),gt(4,ar=!1),Ut&&setTimeout(()=>{gt(3,tr=!tr),gt(5,fr=!fr),Fr($r)},cr)},vt+Gt)},cr-Gt)},vt+Gt),!0;if(!Ut)return gt(4,ar=!1),gt(6,vr=!1),!1};Wt(function(){console.log("light_on_dark",ct);const $r=(this||window).document.body;(this||window).document.getElementById("desktop-header"),$r.style.maxHeight="348px",gt(2,Ut=!0)});const qr=$r=>Ct($r);return at.$$set=$r=>{"light_on_dark"in $r&&gt(0,ct=$r.light_on_dark),"sidebarFunction"in $r&&gt(1,Ct=$r.sidebarFunction)},at.$$.update=()=>{at.$$.dirty&4&&Fr(Ut)},[ct,Ct,Ut,tr,ar,fr,vr,qr]}class Wr extends er{constructor(Qe){super(),document.getElementById("svelte-sdid3b-style")||Nr(),Nt(this,Qe,Er,un,F,{light_on_dark:0,sidebarFunction:1})}}function Vr(){var at=re("style");at.id="svelte-shzkbs-style",at.textContent="button.sidebar-toggle.svelte-shzkbs{position:fixed;bottom:0;left:0;right:auto;word-break:keep-all}",ie(document.head,at)}function Qr(at){let Qe;const gt=at[6].default,ct=G(gt,at,at[5],null);return{c(){ct&&ct.c()},l(yt){ct&&ct.l(yt)},m(yt,Ct){ct&&ct.m(yt,Ct),Qe=!0},p(yt,Ct){ct&&ct.p&&Ct&32&&I(ct,gt,yt,yt[5],Ct,null,null)},i(yt){Qe||(Je(ct,yt),Qe=!0)},o(yt){st(ct,yt),Qe=!1},d(yt){ct&&ct.d(yt)}}}function Hr(at){let Qe,gt,ct,yt;return{c(){Qe=re("button"),gt=ae(at[1]),this.h()},l(Ct){Qe=me(Ct,"BUTTON",{class:!0});var Ut=ue(Qe);gt=be(Ut,at[1]),Ut.forEach(V),this.h()},h(){W(Qe,"class","sidebar-toggle svelte-shzkbs")},m(Ct,Ut){Q(Ct,Qe,Ut),ie(Qe,gt),ct||(yt=pe(Qe,"click",at[8]),ct=!0)},p(Ct,Ut){Ut&2&&Pe(gt,Ct[1])},d(Ct){Ct&&V(Qe),ct=!1,yt()}}}function Cn(at){let Qe,gt,ct,yt,Ct,Ut;Qe=new Wr({props:{light_on_dark:at[0]!==null&&"light_on_dark"in at[0]?!!at[0].light_on_dark&&at[0].light_on_dark!=="false":!1,sidebarFunction:at[3]}});let tr=at[2]==null&&Qr(at),ar=at[0]!==null&&"show_sidebar_toggle_button"in at[0]&&!!at[0].show_sidebar_toggle_button&&at[0].show_sidebar_toggle_button!=="false"&&Hr(at);return{c(){Mt(Qe.$$.fragment),gt=fe(),ct=re("div"),tr&&tr.c(),yt=fe(),ar&&ar.c(),Ct=de()},l(fr){wt(Qe.$$.fragment,fr),gt=ke(fr),ct=me(fr,"DIV",{});var vr=ue(ct);tr&&tr.l(vr),vr.forEach(V),yt=ke(fr),ar&&ar.l(fr),Ct=de()},m(fr,vr){Dt(Qe,fr,vr),Q(fr,gt,vr),Q(fr,ct,vr),tr&&tr.m(ct,null),at[7](ct),Q(fr,yt,vr),ar&&ar.m(fr,vr),Q(fr,Ct,vr),Ut=!0},p(fr,[vr]){const Fr={};vr&1&&(Fr.light_on_dark=fr[0]!==null&&"light_on_dark"in fr[0]?!!fr[0].light_on_dark&&fr[0].light_on_dark!=="false":!1),Qe.$set(Fr),fr[2]==null?tr?(tr.p(fr,vr),vr&4&&Je(tr,1)):(tr=Qr(fr),tr.c(),Je(tr,1),tr.m(ct,null)):tr&&(Ge(),st(tr,1,1,()=>{tr=null}),ot()),fr[0]!==null&&"show_sidebar_toggle_button"in fr[0]&&fr[0].show_sidebar_toggle_button&&fr[0].show_sidebar_toggle_button!=="false"?ar?ar.p(fr,vr):(ar=Hr(fr),ar.c(),ar.m(Ct.parentNode,Ct)):ar&&(ar.d(1),ar=null)},i(fr){Ut||(Je(Qe.$$.fragment,fr),Je(tr),Ut=!0)},o(fr){st(Qe.$$.fragment,fr),st(tr),Ut=!1},d(fr){Rt(Qe,fr),fr&&V(gt),fr&&V(ct),tr&&tr.d(),at[7](null),fr&&V(yt),ar&&ar.d(fr),fr&&V(Ct)}}}function ra(at,Qe,gt){let{$$slots:ct={},$$scope:yt}=Qe,{attributes:Ct=null}=Qe,{innerElms:Ut=null}=Qe,tr=null,ar=!1,{toggle_sidebar_label:fr="Toggle Sidebar"}=Qe;function vr($r){console.log("showSidebar",$r),ar=!ar,$r.target.data={action:"show",set:ar,path:"target"in $r&&"hash"in $r.target?$r.target.hash:""},$r.target.dispatchEvent(new CustomEvent("sidebar",$r))}Wt(()=>{if(Ut!=null){console.log("Apps inner:",Ut.childNodes.length,Ut.innerHTML);const $r=[...Ut.childNodes];for(const Nn of $r)console.log(Nn.nodeType,Nn),Nn.nodeType===1&&(Ut.removeChild(Nn),tr.append(Nn))}});function Fr($r){zt[$r?"unshift":"push"](()=>{tr=$r,gt(2,tr)})}const qr=$r=>vr($r);return at.$$set=$r=>{"attributes"in $r&&gt(0,Ct=$r.attributes),"innerElms"in $r&&gt(4,Ut=$r.innerElms),"toggle_sidebar_label"in $r&&gt(1,fr=$r.toggle_sidebar_label),"$$scope"in $r&&gt(5,yt=$r.$$scope)},[Ct,fr,tr,vr,Ut,yt,ct,Fr,qr]}class ta extends er{constructor(Qe){super(),document.getElementById("svelte-shzkbs-style")||Vr(),Nt(this,Qe,ra,Cn,F,{attributes:0,innerElms:4,toggle_sidebar_label:1})}}const{document:ba}=Fe;function Wa(){var at=re("style");at.id="svelte-gbczwt-style",at.textContent=".modal-frame.svelte-gbczwt{display:block;pointer-events:none;visibility:hidden}.modal-frame.shown.svelte-gbczwt{pointer-events:visible;visibility:visible}.modal-overlay.svelte-gbczwt{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.5);z-index:10;display:flex;flex-direction:column;justify-content:center}.modal-container.svelte-gbczwt{position:relative;background-color:transparent;top:1vh;left:5vw;width:90vw;height:90vh;max-height:620px;overflow:hidden}main.svelte-gbczwt{height:100%;padding:0.5rem;overflow:auto}",ie(ba.head,at)}function ei(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar;const fr=at[3].default,vr=G(fr,at,at[2],null);return{c(){Qe=re("div"),gt=re("div"),ct=re("div"),yt=re("main"),vr&&vr.c(),this.h()},l(Fr){Qe=me(Fr,"DIV",{class:!0});var qr=ue(Qe);gt=me(qr,"DIV",{class:!0,"data-close":!0});var $r=ue(gt);ct=me($r,"DIV",{class:!0});var Nn=ue(ct);yt=me(Nn,"MAIN",{class:!0});var ia=ue(yt);vr&&vr.l(ia),ia.forEach(V),Nn.forEach(V),$r.forEach(V),qr.forEach(V),this.h()},h(){W(yt,"class","svelte-gbczwt"),W(ct,"class","modal-container svelte-gbczwt"),W(gt,"class","modal-overlay svelte-gbczwt"),W(gt,"data-close",""),W(Qe,"class","modal-frame svelte-gbczwt"),ze(Qe,"shown",!!at[0])},m(Fr,qr){Q(Fr,Qe,qr),ie(Qe,gt),ie(gt,ct),ie(ct,yt),vr&&vr.m(yt,null),Ut=!0,tr||(ar=pe(gt,"click",at[1]),tr=!0)},p(Fr,[qr]){vr&&vr.p&&qr&4&&I(vr,fr,Fr,Fr[2],qr,null,null),qr&1&&ze(Qe,"shown",!!Fr[0])},i(Fr){Ut||(Je(vr,Fr),lt(()=>{Ct||(Ct=We(gt,Gr,{duration:150},!0)),Ct.run(1)}),Ut=!0)},o(Fr){st(vr,Fr),Ct||(Ct=We(gt,Gr,{duration:150},!1)),Ct.run(0),Ut=!1},d(Fr){Fr&&V(Qe),vr&&vr.d(Fr),Fr&&Ct&&Ct.end(),tr=!1,ar()}}}function dr(at,Qe,gt){let{$$slots:ct={},$$scope:yt}=Qe,{show:Ct=!1}=Qe;function Ut(ar){"close"in ar.target.dataset&&gt(0,Ct=!1)}let tr=0;return Wt(()=>{document.addEventListener("keydown",function(ar){const fr=ar||window.event;return console.log(fr),new Date().getTime()-tr>66&&fr.keyCode===27&&(tr=new Date().getTime(),fr.target.dataset.close=!0,Ut(fr),fr.preventDefault()),!0})}),at.$$set=ar=>{"show"in ar&&gt(0,Ct=ar.show),"$$scope"in ar&&gt(2,yt=ar.$$scope)},[Ct,Ut,yt,ct]}class an extends er{constructor(Qe){super(),ba.getElementById("svelte-gbczwt-style")||Wa(),Nt(this,Qe,dr,ei,F,{show:0})}}function Kr(){window.CustomEvent||(console.log("Define CustomEvent"),function(){function at(Qe,gt){gt=gt||{bubbles:!1,cancelable:!1,detail:void 0};var ct=document.createEvent("CustomEvent");return ct.initCustomEvent(Qe,gt.bubbles,gt.cancelable,gt.detail),ct}at.prototype=window.Event.prototype,window.CustomEvent=at}())}const{document:Rn}=Fe;function Gn(){var at=re("style");at.id="svelte-101869m-style",at.textContent="nav.svelte-101869m{position:fixed;color:#1a1a1a;display:block;top:0;right:0;height:100%;padding:2rem 2rem 0.6rem 2rem;border-left:1px solid #aaa;background:#fff;overflow-y:auto;width:75vw;z-index:1}nav.hide-menu.svelte-101869m{display:block;transform:translateX(200%);transition:transform 0.5s}nav.shown.svelte-101869m{display:block;transform:translateX(0);transition:transform 0.5s}button.about.svelte-101869m{position:absolute;left:2rem}button.collapse-sidebar.svelte-101869m{position:absolute;right:2rem}",ie(Rn.head,at)}function Sa(at){let Qe,gt=at[0].innerHTML+"",ct;return{c(){ct=de(),this.h()},l(yt){ct=de(),this.h()},h(){Qe=new tt(ct)},m(yt,Ct){Qe.m(gt,yt,Ct),Q(yt,ct,Ct)},p(yt,Ct){Ct&1&&gt!==(gt=yt[0].innerHTML+"")&&Qe.p(gt)},i:R,o:R,d(yt){yt&&V(ct),yt&&Qe.d()}}}function ha(at){let Qe;const gt=at[5].default,ct=G(gt,at,at[11],null);return{c(){ct&&ct.c()},l(yt){ct&&ct.l(yt)},m(yt,Ct){ct&&ct.m(yt,Ct),Qe=!0},p(yt,Ct){ct&&ct.p&&Ct&2048&&I(ct,gt,yt,yt[11],Ct,null,null)},i(yt){Qe||(Je(ct,yt),Qe=!0)},o(yt){st(ct,yt),Qe=!1},d(yt){ct&&ct.d(yt)}}}function Aa(at){let Qe;return{c(){Qe=re("div")},l(gt){Qe=me(gt,"DIV",{}),ue(Qe).forEach(V)},m(gt,ct){Q(gt,Qe,ct),at[9](Qe)},p:R,d(gt){gt&&V(Qe),at[9](null)}}}function ka(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr,vr,Fr,qr,$r,Nn,ia,Pn,Wn,aa,Un,Jn,Ia;const ti=[ha,Sa],ya=[];function Xa(_a,Fa){return _a[0]==null?0:1}$r=Xa(at),Nn=ya[$r]=ti[$r](at);function na(_a){at[10].call(null,_a)}let _i={$$slots:{default:[Aa]},$$scope:{ctx:at}};return at[2]!==void 0&&(_i.show=at[2]),Wn=new an({props:_i}),zt.push(()=>_t(Wn,"show",na)),{c(){Qe=re("nav"),gt=re("button"),ct=ae("Close Sidebar"),yt=fe(),Ct=re("button"),Ut=ae("About"),tr=fe(),ar=re("br"),fr=re("br"),vr=re("br"),Fr=fe(),qr=re("div"),Nn.c(),Pn=fe(),Mt(Wn.$$.fragment),this.h()},l(_a){Qe=me(_a,"NAV",{class:!0});var Fa=ue(Qe);gt=me(Fa,"BUTTON",{class:!0});var ki=ue(gt);ct=be(ki,"Close Sidebar"),ki.forEach(V),yt=ke(Fa),Ct=me(Fa,"BUTTON",{class:!0});var vi=ue(Ct);Ut=be(vi,"About"),vi.forEach(V),tr=ke(Fa),ar=me(Fa,"BR",{}),fr=me(Fa,"BR",{}),vr=me(Fa,"BR",{}),Fr=ke(Fa),qr=me(Fa,"DIV",{class:!0});var xi=ue(qr);Nn.l(xi),xi.forEach(V),Fa.forEach(V),Pn=ke(_a),wt(Wn.$$.fragment,_a),this.h()},h(){W(gt,"class","collapse-sidebar svelte-101869m"),W(Ct,"class","about svelte-101869m"),W(qr,"class","sidebar-content"),W(Qe,"class","svelte-101869m"),ze(Qe,"shown",!!at[1]),ze(Qe,"hide-menu",!at[1])},m(_a,Fa){Q(_a,Qe,Fa),ie(Qe,gt),ie(gt,ct),ie(Qe,yt),ie(Qe,Ct),ie(Ct,Ut),ie(Qe,tr),ie(Qe,ar),ie(Qe,fr),ie(Qe,vr),ie(Qe,Fr),ie(Qe,qr),ya[$r].m(qr,null),Q(_a,Pn,Fa),Dt(Wn,_a,Fa),Un=!0,Jn||(Ia=[pe(gt,"click",at[6]),pe(Ct,"click",at[7]),pe(Qe,"sidebar",at[8])],Jn=!0)},p(_a,[Fa]){let ki=$r;$r=Xa(_a),$r===ki?ya[$r].p(_a,Fa):(Ge(),st(ya[ki],1,1,()=>{ya[ki]=null}),ot(),Nn=ya[$r],Nn||(Nn=ya[$r]=ti[$r](_a),Nn.c()),Je(Nn,1),Nn.m(qr,null)),Fa&2&&ze(Qe,"shown",!!_a[1]),Fa&2&&ze(Qe,"hide-menu",!_a[1]);const vi={};Fa&2056&&(vi.$$scope={dirty:Fa,ctx:_a}),!aa&&Fa&4&&(aa=!0,vi.show=_a[2],Te(()=>aa=!1)),Wn.$set(vi)},i(_a){Un||(Je(Nn),lt(()=>{ia||(ia=We(Qe,zr,{x:250,opacity:1},!0)),ia.run(1)}),Je(Wn.$$.fragment,_a),Un=!0)},o(_a){st(Nn),ia||(ia=We(Qe,zr,{x:250,opacity:1},!1)),ia.run(0),st(Wn.$$.fragment,_a),Un=!1},d(_a){_a&&V(Qe),ya[$r].d(),_a&&ia&&ia.end(),_a&&V(Pn),Rt(Wn,_a),Jn=!1,C(Ia)}}}function Za(at,Qe,gt){let{$$slots:ct={},$$scope:yt}=Qe;Kr();let{innerElms:Ct=null}=Qe,{show:Ut=!1}=Qe,tr=!1,ar=null,fr=0,vr=!1;const Fr={};function qr(Un){"data"in Un.target&&"set"in Un.target.data&&"action"in Un.target.data&&Un.target.data.action==="show"?gt(1,Ut=Un.target.data.set):gt(1,Ut=!Ut),Ut?document.getElementById("sidebar").style.visibility="visible":document.getElementById("sidebar").style.visibility="hide-menu"}function $r(Un){console.log("showAbout",Un.target.data),gt(2,tr=!0),gt(1,Ut=!1)}Wt(()=>{gt(13,vr=!0),document.addEventListener("sidebar",function(Un){"target"in Un&&Un.target.data.path?Un.target.data.path.match(/about/)!==null&&$r(Un):qr(Un)},!0),document.addEventListener("keydown",function(Un){const Jn=Un||window.event;return Jn.keyCode===32?Jn.preventDefault():(Jn.ctrlKey||Jn.shiftKey)&&new Date().getTime()-fr>66&&Jn.keyCode===73&&(fr=new Date().getTime(),qr(Jn),Jn.preventDefault()),!0})});const Nn=()=>gt(1,Ut=!Ut),ia=Un=>(Un.target.data={action:"show",set:!1,path:"about"},Un.target.dispatchEvent(new CustomEvent("sidebar",Un))),Pn=Un=>qr(Un);function Wn(Un){zt[Un?"unshift":"push"](()=>{ar=Un,gt(3,ar)})}function aa(Un){tr=Un,gt(2,tr)}return at.$$set=Un=>{"innerElms"in Un&&gt(0,Ct=Un.innerElms),"show"in Un&&gt(1,Ut=Un.show),"$$scope"in Un&&gt(11,yt=Un.$$scope)},at.$$.update=()=>{at.$$.dirty&24585&&function(Jn,Ia){if(vr&&Jn!=null&&Jn.innerHTML){const ti=[...Jn.childNodes];for(const ya of ti)if(ya.nodeType===1&&ya.className.match(/modal-content/)!==null){const Xa="id"in ya&&ya.id?ya.id:ya.innerHTML.toString().substring(0,16)+ya.toString(),na=ya;Jn.removeChild(ya),Xa in Fr||Ia.append(na),gt(14,Fr[Xa]=na,Fr)}gt(0,Ct=Jn)}}(Ct,ar)},[Ct,Ut,tr,ar,qr,ct,Nn,ia,Pn,Wn,aa,yt]}class Xt extends er{constructor(Qe){super(),Rn.getElementById("svelte-101869m-style")||Gn(),Nt(this,Qe,Za,ka,F,{innerElms:0,show:1})}}const{document:xr}=Fe;function Yr(){var at=re("style");at.id="svelte-k4up2x-style",at.textContent="svg.svelte-k4up2x.svelte-k4up2x{padding:20px 20px;width:25vw;height:auto;max-width:356px;min-width:112px}path.svelte-k4up2x.svelte-k4up2x{fill:white;opacity:1}label.svelte-k4up2x.svelte-k4up2x{position:absolute;top:1em;left:1em}.centered.svelte-k4up2x.svelte-k4up2x{float:right;position:relative;margin:10% 0 0 0;padding:2% 0 0 0;color:#676778;width:66%;clear:none}.centered.svelte-k4up2x span.svelte-k4up2x{font-family:'TT Hoves Bold',sans-serif;font-size:320%;font-weight:600;letter-spacing:0.12em;will-change:filter}",ie(xr.head,at)}function cn(at,Qe,gt){const ct=at.slice();return ct[8]=Qe[gt],ct[10]=gt,ct}function en(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr,vr,Fr,qr=at[0],$r=[];for(let Wn=0;Wn<qr.length;Wn+=1)$r[Wn]=nn(cn(at,qr,Wn));const Nn=[Ir,wr,rn,pn],ia=[];function Pn(Wn,aa){return!Wn[2]&&!Wn[3]?0:Wn[2]?!Wn[4]&&!Wn[5]?2:Wn[4]?-1:3:1}return~(fr=Pn(at))&&(vr=ia[fr]=Nn[fr](at)),{c(){Qe=re("div");for(let Wn=0;Wn<$r.length;Wn+=1)$r[Wn].c();ct=fe(),yt=ee("svg"),Ct=ee("defs"),Ut=ee("mask"),tr=ee("path"),ar=ee("path"),vr&&vr.c(),this.h()},l(Wn){Qe=me(Wn,"DIV",{class:!0});var aa=ue(Qe);for(let ti=0;ti<$r.length;ti+=1)$r[ti].l(aa);aa.forEach(V),ct=ke(Wn),yt=me(Wn,"svg",{xmlns:!0,fill:!0,width:!0,height:!0,viewBox:!0,style:!0,class:!0},1);var Un=ue(yt);Ct=me(Un,"defs",{},1);var Jn=ue(Ct);Ut=me(Jn,"mask",{id:!0,x:!0,y:!0,width:!0,height:!0,maskUnits:!0,maskContentUnits:!0},1);var Ia=ue(Ut);tr=me(Ia,"path",{fill:!0,d:!0,class:!0},1),ue(tr).forEach(V),ar=me(Ia,"path",{d:!0,fill:!0,class:!0},1),ue(ar).forEach(V),Ia.forEach(V),Jn.forEach(V),vr&&vr.l(Un),Un.forEach(V),this.h()},h(){W(Qe,"class","centered svelte-k4up2x"),W(tr,"fill","#fff"),W(tr,"d","M0 0h308v136H0z"),W(tr,"class","svelte-k4up2x"),W(ar,"d","M115.084 31.849L61.916.809a5.66 5.66 0 00-5.832 0L2.916 31.85C1.118 32.927 0 34.839 0 36.949v62.127c0 2.109 1.118 4.021 2.916 5.1l53.168 31.039c.923.54 1.895.785 2.916.785 1.02 0 2.041-.245 2.916-.785l53.168-31.039c1.798-1.03 2.916-2.991 2.916-5.1V36.948c0-2.108-1.118-4.02-2.916-5.1z"),W(ar,"fill","#000"),W(ar,"class","svelte-k4up2x"),W(Ut,"id","border-mask"),W(Ut,"x","0"),W(Ut,"y","0"),W(Ut,"width","308"),W(Ut,"height","136"),W(Ut,"maskUnits","userSpaceOnUse"),W(Ut,"maskContentUnits","userSpaceOnUse"),W(yt,"xmlns","http://www.w3.org/2000/svg"),W(yt,"fill","none"),W(yt,"width","136"),W(yt,"height","136"),W(yt,"viewBox","0 0 136 136"),je(yt,"background-color","transparent"),W(yt,"class","svelte-k4up2x")},m(Wn,aa){Q(Wn,Qe,aa);for(let Un=0;Un<$r.length;Un+=1)$r[Un].m(Qe,null);Q(Wn,ct,aa),Q(Wn,yt,aa),ie(yt,Ct),ie(Ct,Ut),ie(Ut,tr),ie(Ut,ar),~fr&&ia[fr].m(yt,null),Fr=!0},p(Wn,aa){if(aa&1){qr=Wn[0];let Jn;for(Jn=0;Jn<qr.length;Jn+=1){const Ia=cn(Wn,qr,Jn);$r[Jn]?($r[Jn].p(Ia,aa),Je($r[Jn],1)):($r[Jn]=nn(Ia),$r[Jn].c(),Je($r[Jn],1),$r[Jn].m(Qe,null))}for(;Jn<$r.length;Jn+=1)$r[Jn].d(1);$r.length=qr.length}let Un=fr;fr=Pn(Wn),fr===Un?~fr&&ia[fr].p(Wn,aa):(vr&&(Ge(),st(ia[Un],1,1,()=>{ia[Un]=null}),ot()),~fr?(vr=ia[fr],vr||(vr=ia[fr]=Nn[fr](Wn),vr.c()),Je(vr,1),vr.m(yt,null)):vr=null)},i(Wn){if(!Fr){for(let aa=0;aa<qr.length;aa+=1)Je($r[aa]);gt&&gt.end(1),Je(vr),Fr=!0}},o(Wn){gt=nr(Qe,zr,{y:0,duration:800}),st(vr),Fr=!1},d(Wn){Wn&&V(Qe),se($r,Wn),Wn&&gt&&gt.end(),Wn&&V(ct),Wn&&V(yt),~fr&&ia[fr].d()}}}function nn(at){let Qe,gt=at[8]+"",ct,yt;return{c(){Qe=re("span"),ct=ae(gt),this.h()},l(Ct){Qe=me(Ct,"SPAN",{class:!0});var Ut=ue(Qe);ct=be(Ut,gt),Ut.forEach(V),this.h()},h(){W(Qe,"class","svelte-k4up2x")},m(Ct,Ut){Q(Ct,Qe,Ut),ie(Qe,ct)},p(Ct,Ut){at=Ct,Ut&1&&gt!==(gt=at[8]+"")&&Pe(ct,gt)},i(Ct){yt||lt(()=>{yt=Ft(Qe,Gr,{delay:Fn+at[10]*150,duration:800}),yt.start()})},o:R,d(Ct){Ct&&V(Qe)}}}function pn(at){let Qe,gt,ct,yt,Ct;return{c(){Qe=ee("g"),gt=ee("path"),ct=ee("path"),this.h()},l(Ut){Qe=me(Ut,"g",{opacity:!0,transform:!0},1);var tr=ue(Qe);gt=me(tr,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(V),ct=me(tr,"path",{style:!0,d:!0,class:!0},1),ue(ct).forEach(V),tr.forEach(V),this.h()},h(){je(gt,"fill","#16343e"),je(gt,"stroke","none"),W(gt,"d",jn),W(gt,"class","svelte-k4up2x"),je(ct,"fill","#16343e"),je(ct,"stroke","#16343e"),je(ct,"stroke-width","1.5"),W(ct,"d",Bn),W(ct,"class","svelte-k4up2x"),W(Qe,"opacity","0.75"),W(Qe,"transform","scale(0.75, 0.76) translate(9, 12)")},m(Ut,tr){Q(Ut,Qe,tr),ie(Qe,gt),ie(Qe,ct),Ct=!0},p(Ut,tr){},i(Ut){Ct||(yt&&yt.end(1),Ct=!0)},o(Ut){yt=nr(Qe,Gr,{duration:Vn}),Ct=!1},d(Ut){Ut&&V(Qe),Ut&&yt&&yt.end()}}}function rn(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr;return{c(){Qe=ee("g"),gt=ee("path"),yt=ee("path"),Ut=ee("path"),this.h()},l(vr){Qe=me(vr,"g",{opacity:!0,transform:!0},1);var Fr=ue(Qe);gt=me(Fr,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(V),yt=me(Fr,"path",{style:!0,d:!0,class:!0},1),ue(yt).forEach(V),Ut=me(Fr,"path",{style:!0,d:!0,class:!0},1),ue(Ut).forEach(V),Fr.forEach(V),this.h()},h(){je(gt,"fill","#16343e"),je(gt,"stroke","none"),W(gt,"d",jn),W(gt,"class","svelte-k4up2x"),je(yt,"fill","none"),je(yt,"stroke","#16343e"),je(yt,"stroke-width","1.5"),W(yt,"d",Bn),W(yt,"class","svelte-k4up2x"),je(Ut,"fill","#16343e"),je(Ut,"stroke","#16343e"),je(Ut,"stroke-width","1.5"),W(Ut,"d",Bn),W(Ut,"class","svelte-k4up2x"),W(Qe,"opacity","0.5"),W(Qe,"transform","scale(0.75, 0.76) translate(9, 12)")},m(vr,Fr){Q(vr,Qe,Fr),ie(Qe,gt),ie(Qe,yt),ie(Qe,Ut),fr=!0},p(vr,Fr){},i(vr){fr||(ct||lt(()=>{ct=Ft(gt,Mn,{duration:Vn,delay:Fn,easing:_r}),ct.start()}),Ct||lt(()=>{Ct=Ft(yt,Or,{duration:Fn}),Ct.start()}),tr||lt(()=>{tr=Ft(Ut,Mn,{duration:Vn,delay:Fn,easing:_r}),tr.start()}),ar&&ar.end(1),fr=!0)},o(vr){ar=nr(Qe,Gr,{duration:Vn}),fr=!1},d(vr){vr&&V(Qe),vr&&ar&&ar.end()}}}function wr(at){let Qe,gt,ct,yt,Ct;return{c(){Qe=ee("g"),gt=ee("path"),ct=ee("path"),this.h()},l(Ut){Qe=me(Ut,"g",{opacity:!0},1);var tr=ue(Qe);gt=me(tr,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(V),ct=me(tr,"path",{style:!0,d:!0,class:!0},1),ue(ct).forEach(V),tr.forEach(V),this.h()},h(){je(gt,"fill","#16343e"),je(gt,"stroke","none"),W(gt,"d",An),W(gt,"class","svelte-k4up2x"),je(ct,"fill","#16343e"),je(ct,"stroke","#16343e"),je(ct,"stroke-width","1.5"),W(ct,"d",Yn),W(ct,"class","svelte-k4up2x"),W(Qe,"opacity","0.75")},m(Ut,tr){Q(Ut,Qe,tr),ie(Qe,gt),ie(Qe,ct),Ct=!0},p(Ut,tr){},i(Ut){Ct||(yt&&yt.end(1),Ct=!0)},o(Ut){yt=nr(Qe,Gr,{duration:Vn}),Ct=!1},d(Ut){Ut&&V(Qe),Ut&&yt&&yt.end()}}}function Ir(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr;return{c(){Qe=ee("g"),gt=ee("path"),yt=ee("path"),Ut=ee("path"),this.h()},l(vr){Qe=me(vr,"g",{opacity:!0},1);var Fr=ue(Qe);gt=me(Fr,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(V),yt=me(Fr,"path",{style:!0,d:!0,class:!0},1),ue(yt).forEach(V),Ut=me(Fr,"path",{style:!0,d:!0,class:!0},1),ue(Ut).forEach(V),Fr.forEach(V),this.h()},h(){je(gt,"fill","#16343e"),je(gt,"stroke","none"),W(gt,"d",An),W(gt,"class","svelte-k4up2x"),je(yt,"fill","none"),je(yt,"stroke","#16343e"),je(yt,"stroke-width","1.5"),W(yt,"d",Yn),W(yt,"class","svelte-k4up2x"),je(Ut,"fill","#16343e"),je(Ut,"stroke","#16343e"),je(Ut,"stroke-width","1.5"),W(Ut,"d",Yn),W(Ut,"class","svelte-k4up2x"),W(Qe,"opacity","0.5")},m(vr,Fr){Q(vr,Qe,Fr),ie(Qe,gt),ie(Qe,yt),ie(Qe,Ut),fr=!0},p(vr,Fr){},i(vr){fr||(ct||lt(()=>{ct=Ft(gt,Mn,{duration:Vn,delay:Fn,easing:_r}),ct.start()}),Ct||lt(()=>{Ct=Ft(yt,Or,{duration:Fn}),Ct.start()}),tr||lt(()=>{tr=Ft(Ut,Mn,{duration:Vn,delay:Fn,easing:_r}),tr.start()}),ar&&ar.end(1),fr=!0)},o(vr){ar=nr(Qe,Gr,{duration:Vn}),fr=!1},d(vr){vr&&V(Qe),vr&&ar&&ar.end()}}}function Tr(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr=at[1]&&en(at);return{c(){Qe=re("label"),gt=re("input"),ct=fe(),fr&&fr.c(),yt=fe(),Ct=re("link"),this.h()},l(vr){Qe=me(vr,"LABEL",{class:!0});var Fr=ue(Qe);gt=me(Fr,"INPUT",{type:!0}),Fr.forEach(V),ct=ke(vr),fr&&fr.l(vr),yt=ke(vr),Ct=me(vr,"LINK",{href:!0,rel:!0}),this.h()},h(){W(gt,"type","checkbox"),W(Qe,"class","svelte-k4up2x"),W(Ct,"href","https://fonts.googleapis.com/css?family=Overpass:100,400"),W(Ct,"rel","stylesheet")},m(vr,Fr){Q(vr,Qe,Fr),ie(Qe,gt),gt.checked=at[1],Q(vr,ct,Fr),fr&&fr.m(vr,Fr),Q(vr,yt,Fr),Q(vr,Ct,Fr),Ut=!0,tr||(ar=pe(gt,"change",at[6]),tr=!0)},p(vr,[Fr]){Fr&2&&(gt.checked=vr[1]),vr[1]?fr?(fr.p(vr,Fr),Fr&2&&Je(fr,1)):(fr=en(vr),fr.c(),Je(fr,1),fr.m(yt.parentNode,yt)):fr&&(Ge(),st(fr,1,1,()=>{fr=null}),ot())},i(vr){Ut||(Je(fr),Ut=!0)},o(vr){st(fr),Ut=!1},d(vr){vr&&V(Qe),vr&&V(ct),fr&&fr.d(vr),vr&&V(yt),vr&&V(Ct),tr=!1,ar()}}}let Fn=1500,Vn=500,la=2500;function Ra(at,Qe,gt){let{title:ct="Mapping & Data Analytics"}=Qe,yt=!1,Ct=!1,Ut=!1,tr=!0,ar=!1,fr=function(Fr){if(Fr&&!Ct&&!Ut)return gt(1,yt=!0),setTimeout(()=>{gt(3,Ut=!0),gt(5,ar=!1),setTimeout(()=>{console.log("hide cori"),gt(2,Ct=!Ct)},la),setTimeout(()=>{console.log("show risi"),gt(4,tr=!tr),setTimeout(()=>{gt(5,ar=!0),gt(3,Ut=!1),yt&&setTimeout(()=>{console.log("show cori"),gt(2,Ct=!Ct),console.log("hide risi"),gt(4,tr=!tr),console.log("redraw"),fr(Fr)},la)},Fn+Vn)},la-Vn)},Fn+Vn),!0;if(!yt)return gt(3,Ut=!1),gt(5,ar=!1),!1};document.addEventListener("sidebar",function(Fr){console.log("sidebar event dispatched"),"target"in Fr&&Fr.target.data.path&&Fr.target.data.path.match(/about/)!==null&&gt(1,yt=!0)},!0);function vr(){yt=this.checked,gt(1,yt)}return at.$$set=Fr=>{"title"in Fr&&gt(0,ct=Fr.title)},at.$$.update=()=>{at.$$.dirty&2&&fr(yt)},[ct,yt,Ct,Ut,tr,ar,vr]}class oa extends er{constructor(Qe){super(),xr.getElementById("svelte-k4up2x-style")||Yr(),Nt(this,Qe,Ra,Tr,F,{title:0})}}const{document:ai}=Fe;function Ti(){var at=re("style");at.id="svelte-sdid3b-style",at.textContent=".svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before{box-sizing:border-box}button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{border:0;cursor:pointer;overflow:visible;text-transform:none}svg.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b:not(:root){overflow:hidden}.site-header.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{position:absolute;top:0;left:0;width:100vw}*.Light-on-Dark.site-header.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.site-header.svelte-sdid3b a.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.site-header.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{background-color:#16343e;background-color:#26535c}.site-header__inner.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{background-color:transparent;transition:all .35s ease,background-color 0s}.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{width:100%;padding-left:56px;padding-right:56px;margin-right:0px;margin-left:0px}@media(max-width: 540px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{padding:0 0 0 1em;max-width:100vh;width:100%}}@media(min-width: 640px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 768px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 1024px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 1080px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:100%}}.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{list-style:none;display:flex;flex-wrap:wrap;margin-right:-10px;margin-left:-10px}.justify-content-between.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{justify-content:space-between !important}.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{width:calc(100% + 20px);list-style:none;padding:0;margin:0 0 0 -10px}.site-header__row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{height:76px;flex-wrap:nowrap;transition:.35s ease}@media(min-width: 768px){.site-header__row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{will-change:height}}@media(min-width: 768px){}.col.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,.col-auto.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{position:relative;width:100%;padding-right:10px;padding-left:10px}.col-auto.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{flex:0 0 auto;width:auto;max-width:100%}.site-header__main-logo.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:50%;align-self:flex-start}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:143px;height:92px;position:absolute;top:12px;left:0;transition:all .35s ease;transform-origin:top left;pointer-events:none;touch-action:none;background-color:transparent}@media(max-width: 768px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{height:54px}}@media(min-width: 768px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:154px;height:74px;top:4px;left:1px}}@media(min-width: 1200px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:211px;height:92px;will-change:height,width,top,left}}.site-header__main-logo.svelte-sdid3b svg.logo-border.svelte-sdid3b.svelte-sdid3b{fill:none;z-index:0}.header-stuck .site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{top:-1px}@media(min-width: 768px){.header-stuck .site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:155px;height:100px;top:-3px;left:1px}}.site-header__main-logo.svelte-sdid3b svg .text-group.svelte-sdid3b.svelte-sdid3b{transition:.25s cubic-bezier(.77,0,.175,1)}@media(max-width: 1023px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .text g.svelte-sdid3b,.site-header__main-logo.svelte-sdid3b svg .text-group.svelte-sdid3b.svelte-sdid3b{display:none}}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .logo path.svelte-sdid3b,.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .text path.svelte-sdid3b{fill:#16343e}.header-stuck .site-header__main-logo.svelte-sdid3b svg .border.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.home .menu.svelte-sdid3b g.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.home .site-header__main-logo.svelte-sdid3b .logo path.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.home .site-header__main-logo.svelte-sdid3b .text path.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .menu.svelte-sdid3b g.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .site-header__main-logo.svelte-sdid3b .logo path.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .site-header__main-logo.svelte-sdid3b .text path.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.svelte-sdid3b .site-header__main-logo svg .logo path.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.svelte-sdid3b .site-header__main-logo svg .text path.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.svelte-sdid3b .header-stuck .site-header__main-logo svg .border.svelte-sdid3b.svelte-sdid3b{fill:#16343e;fill:#26535c}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b path.svelte-sdid3b{transition:all .35s ease,fill 0s}.site-header__menu-section.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex}.site-header__primary-menu.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{padding-top:10px}.site-header__item.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex}.site-header__item.svelte-sdid3b .site-header__item_inner.svelte-sdid3b.svelte-sdid3b{display:flex;align-items:center;flex:1 0 auto}.site-header__menu-section.svelte-sdid3b .menu.svelte-sdid3b.svelte-sdid3b{align-items:stretch;flex-wrap:nowrap}.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{margin-right:0;align-items:center}@media(min-width: 1200px){.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{align-items:center}}.mobile-menu-toggle.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex;flex:0 0 0;margin-right:2.5%;order:4;align-items:center}@media(max-width: 820px){.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{display:none}}@media(min-width: 820px){.mobile-menu-toggle.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:none}}.hamburger-control__inner.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{background-color:transparent}.hamburger-control__inner.svelte-sdid3b .hamburger-control__open.svelte-sdid3b.svelte-sdid3b{background-color:transparent}.hamburger-control__inner.svelte-sdid3b .hamburger-control__open .menu g.svelte-sdid3b.svelte-sdid3b{fill:#16343E}*.Light-on-Dark.svelte-sdid3b .hamburger-control__inner .hamburger-control__open .menu g.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9 !important}*.Light-on-Dark.svelte-sdid3b .hamburger-control__inner .hamburger-control__close .menu g.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9 !important}*.hamburger-control__close.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:none}.site-header__menu-section.svelte-sdid3b .menu .menu-item.svelte-sdid3b.svelte-sdid3b{align-items:stretch;display:flex}.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b>li.svelte-sdid3b{padding:0 !important;margin:0 12px}.site-header__row.svelte-sdid3b #primary-navigation>li a.svelte-sdid3b.svelte-sdid3b{padding-left:0;padding-right:0}.site-header__primary-menu.svelte-sdid3b .top-level-nav-link.svelte-sdid3b.svelte-sdid3b{padding:0 10px 0 10px}.header-stuck .site-header__menu-section.svelte-sdid3b .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:#16343e !important;display:inline;background-size:0 1px;background-position:0 calc(100% - 4px);background-repeat:no-repeat;transition:.25s cubic-bezier(.77,0,.175,1);transition-duration:.35s;background-image:linear-gradient(#16343e,#16343e) !important}*.Light-on-Dark.svelte-sdid3b .site-header__menu-section .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:rgb(251, 248, 233)}*.Light-on-Dark.svelte-sdid3b .header-stuck .site-header__menu-section .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:rgb(251, 248, 233) !important}.has-dropdowns.svelte-sdid3b .sub-menu li.svelte-sdid3b.svelte-sdid3b{width:100%;margin:0 0 12px;padding:0;border:0 !important;display:inline-block !important;clear:both}.screen-reader-text.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b:not(:focus):not(:active),.sr-dropdown-button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute !important;width:1px;word-wrap:normal !important}.sr-dropdown-button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{flex:0 1 auto;padding:0;margin:0;display:flex;align-items:center;width:auto;height:100%}.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before,.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before{content:initial !important;display:block !important}",ie(ai.head,at)}function Ui(at,Qe,gt){const ct=at.slice();return ct[14]=Qe[gt],ct}function Qa(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr,vr=!!at[5]&&di(at);const Fr=[rs,Ps],qr=[];function $r(Nn,ia){return Nn[5]?1:0}return~(tr=$r(at))&&(ar=qr[tr]=Fr[tr](at)),{c(){Qe=ee("svg"),gt=ee("defs"),ct=ee("mask"),yt=ee("path"),Ct=ee("path"),Ut=ee("g"),vr&&vr.c(),ar&&ar.c(),this.h()},l(Nn){Qe=me(Nn,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,style:!0,class:!0},1);var ia=ue(Qe);gt=me(ia,"defs",{class:!0},1);var Pn=ue(gt);ct=me(Pn,"mask",{id:!0,x:!0,y:!0,width:!0,height:!0,maskUnits:!0,maskContentUnits:!0,class:!0},1);var Wn=ue(ct);yt=me(Wn,"path",{fill:!0,d:!0,class:!0},1),ue(yt).forEach(V),Ct=me(Wn,"path",{d:!0,fill:!0,class:!0},1),ue(Ct).forEach(V),Wn.forEach(V),Pn.forEach(V),Ut=me(ia,"g",{class:!0,mask:!0},1);var aa=ue(Ut);vr&&vr.l(aa),aa.forEach(V),ar&&ar.l(ia),ia.forEach(V),this.h()},h(){W(yt,"fill","#fff"),W(yt,"d","M0 0h308v136H0z"),W(yt,"class","svelte-sdid3b"),W(Ct,"d","M115.084 31.849L61.916.809a5.66 5.66 0 00-5.832 0L2.916 31.85C1.118 32.927 0 34.839 0 36.949v62.127c0 2.109 1.118 4.021 2.916 5.1l53.168 31.039c.923.54 1.895.785 2.916.785 1.02 0 2.041-.245 2.916-.785l53.168-31.039c1.798-1.03 2.916-2.991 2.916-5.1V36.948c0-2.108-1.118-4.02-2.916-5.1z"),W(Ct,"fill","#000"),W(Ct,"class","svelte-sdid3b"),W(ct,"id","border-mask"),W(ct,"x","0"),W(ct,"y","0"),W(ct,"width","308"),W(ct,"height","136"),W(ct,"maskUnits","userSpaceOnUse"),W(ct,"maskContentUnits","userSpaceOnUse"),W(ct,"class","svelte-sdid3b"),W(gt,"class","svelte-sdid3b"),W(Ut,"class","text svelte-sdid3b"),W(Ut,"mask","url(#border-mask)"),W(Qe,"xmlns","http://www.w3.org/2000/svg"),W(Qe,"width","308"),W(Qe,"height","136"),W(Qe,"viewBox","0 0 308 136"),W(Qe,"fill","none"),je(Qe,"background-color","transparent"),W(Qe,"class","svelte-sdid3b")},m(Nn,ia){Q(Nn,Qe,ia),ie(Qe,gt),ie(gt,ct),ie(ct,yt),ie(ct,Ct),ie(Qe,Ut),vr&&vr.m(Ut,null),~tr&&qr[tr].m(Qe,null),fr=!0},p(Nn,ia){Nn[5]?vr?(vr.p(Nn,ia),ia&32&&Je(vr,1)):(vr=di(Nn),vr.c(),Je(vr,1),vr.m(Ut,null)):vr&&(Ge(),st(vr,1,1,()=>{vr=null}),ot());let Pn=tr;tr=$r(Nn),tr===Pn?~tr&&qr[tr].p(Nn,ia):(ar&&(Ge(),st(qr[Pn],1,1,()=>{qr[Pn]=null}),ot()),~tr?(ar=qr[tr],ar||(ar=qr[tr]=Fr[tr](Nn),ar.c()),Je(ar,1),ar.m(Qe,null)):ar=null)},i(Nn){fr||(Je(vr),Je(ar),fr=!0)},o(Nn){st(vr),st(ar),fr=!1},d(Nn){Nn&&V(Qe),vr&&vr.d(),~tr&&qr[tr].d()}}}function di(at){let Qe,gt,ct,yt,Ct,Ut,tr;return{c(){Qe=ee("g"),gt=ee("path"),ct=ee("path"),this.h()},l(ar){Qe=me(ar,"g",{class:!0,fill:!0,opacity:!0},1);var fr=ue(Qe);gt=me(fr,"path",{d:!0,class:!0},1),ue(gt).forEach(V),ct=me(fr,"path",{d:!0,class:!0},1),ue(ct).forEach(V),fr.forEach(V),this.h()},h(){W(gt,"d","M126.863 55.99c3.466 0 5.764-2.38 6.037-5.188h-3.096c-.234 1.287-1.11 2.438-2.941 2.438-2.259 0-3.486-1.482-3.486-4.231 0-2.75 1.227-4.251 3.486-4.251 1.909 0 2.804 1.248 2.921 2.554h3.116c-.195-2.886-2.551-5.323-6.037-5.323-4.382 0-6.602 3.08-6.602 7.02 0 3.88 2.22 6.98 6.602 6.98z"),W(gt,"class","svelte-sdid3b"),W(ct,"d","M138.625 55.99c2.785 0 4.401-1.62 4.674-3.452h-2.902c-.175.468-.662 1.014-1.772 1.014-1.363 0-1.967-.839-1.986-2.028h6.796v-1.111c0-2.77-1.753-4.973-4.868-4.973-3.311 0-4.986 2.399-4.986 5.285 0 2.924 1.831 5.264 5.044 5.264zm-1.967-6.357c.059-.975.623-1.736 1.909-1.736 1.187 0 1.752.76 1.811 1.736h-3.72zM144.5 55.814h2.999v-5.655c0-1.228.778-1.989 1.85-1.989 1.187 0 1.713.702 1.713 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.784 1.15h-.078l-.234-.974H144.5v10.198zM159.904 55.814h2.065V53.2H160.8c-.896 0-1.304-.41-1.304-1.365V48.17h2.434v-2.554h-2.434v-2.672h-2.863v2.672h-1.792v2.554h1.656v4.387c0 1.853 1.051 3.257 3.407 3.257zM167.98 55.99c2.784 0 4.401-1.62 4.673-3.452h-2.901c-.176.468-.662 1.014-1.772 1.014-1.364 0-1.967-.839-1.987-2.028h6.797v-1.111c0-2.77-1.753-4.973-4.869-4.973-3.31 0-4.985 2.399-4.985 5.285 0 2.924 1.83 5.264 5.044 5.264zm-1.967-6.357c.058-.975.623-1.736 1.908-1.736 1.188 0 1.753.76 1.811 1.736h-3.719zM173.854 55.814h2.804v-5.031c0-1.638.916-2.593 2.337-2.593h.974v-2.75h-.701c-1.305 0-2.162.76-2.61 1.658h-.078l-.233-1.482h-2.493v10.198zM125.247 74.393c3.31 0 5.082-2.223 5.082-5.265 0-3.061-1.811-5.284-5.082-5.284-3.272 0-5.083 2.223-5.083 5.284s1.772 5.265 5.083 5.265zm0-2.633c-1.227 0-2.026-.78-2.026-2.632 0-1.833.779-2.652 2.026-2.652 1.246 0 2.025.8 2.025 2.652s-.779 2.632-2.025 2.632zM131.406 74.217h2.999v-5.655c0-1.228.779-1.988 1.85-1.988 1.188 0 1.713.701 1.713 1.871v5.772h2.999V67.51c0-2.243-1.519-3.666-3.778-3.666-1.324 0-2.22.487-2.784 1.15h-.078l-.234-.975h-2.687v10.198zM155.988 69.03c1.655-.663 2.687-2.145 2.687-4.114 0-2.32-1.752-4.348-4.654-4.348h-6.231v13.65h3.057V69.4h1.908l2.941 4.816h3.583v-.195l-3.291-4.992zm-5.141-5.732h3.018c1.188 0 1.675.819 1.675 1.638 0 .858-.448 1.735-1.675 1.735h-3.018v-3.373zM163.835 74.393c1.324 0 2.22-.488 2.784-1.15h.078l.234.974h2.687V64.02h-2.999v5.655c0 1.228-.779 1.989-1.85 1.989-1.188 0-1.713-.702-1.713-1.872v-5.772h-2.999v6.708c0 2.242 1.519 3.666 3.778 3.666zM170.944 74.217h2.805v-5.03c0-1.638.915-2.594 2.337-2.594h.973v-2.75h-.701c-1.305 0-2.161.761-2.609 1.658h-.078l-.234-1.482h-2.493v10.198zM180.916 74.393c1.265 0 2.161-.449 2.726-1.092h.078l.214.916h2.687V67.51c0-2.126-1.674-3.666-4.459-3.666-2.999 0-4.382 1.638-4.382 3.548h2.805c0-.623.545-1.13 1.48-1.13 1.11 0 1.557.546 1.557 1.248v.545h-2.181c-2.804 0-4.089 1.248-4.089 3.14 0 1.813 1.266 3.198 3.564 3.198zm.759-2.34c-.896 0-1.363-.43-1.363-1.014 0-.546.428-.975 1.383-.975h1.927v.429c0 .838-.72 1.56-1.947 1.56zM187.985 74.217h2.999V59.788h-2.999v14.43zM121.04 92.62h3.077V78.972h-3.077v13.65zM126.062 92.62h2.999v-5.654c0-1.229.779-1.989 1.85-1.989 1.188 0 1.713.702 1.713 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.784 1.15h-.078l-.234-.974h-2.687V92.62zM136.988 92.62h2.999v-5.654c0-1.229.779-1.989 1.85-1.989 1.188 0 1.713.702 1.713 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.784 1.15h-.078l-.234-.974h-2.687V92.62zM152.509 92.796c3.311 0 5.083-2.223 5.083-5.265 0-3.061-1.811-5.284-5.083-5.284-3.271 0-5.082 2.223-5.082 5.284 0 3.062 1.772 5.265 5.082 5.265zm0-2.632c-1.226 0-2.025-.78-2.025-2.633 0-1.833.779-2.652 2.025-2.652 1.247 0 2.026.8 2.026 2.652 0 1.853-.779 2.633-2.026 2.633zM160.742 92.62h3.836l3.194-10.002v-.195h-3.038l-2.006 7.37h-.078l-2.064-7.37h-3.077v.195l3.233 10.003zM171.245 92.796c1.266 0 2.161-.449 2.726-1.092h.078l.214.917h2.688v-6.708c0-2.126-1.675-3.666-4.46-3.666-2.999 0-4.381 1.638-4.381 3.549h2.804c0-.624.545-1.131 1.48-1.131 1.11 0 1.558.546 1.558 1.248v.546h-2.181c-2.805 0-4.09 1.248-4.09 3.14 0 1.813 1.266 3.197 3.564 3.197zm.759-2.34c-.896 0-1.363-.429-1.363-1.014 0-.546.429-.975 1.383-.975h1.928v.43c0 .838-.721 1.56-1.948 1.56zM182.793 92.62h2.064v-2.612h-1.168c-.896 0-1.305-.41-1.305-1.365v-3.666h2.434v-2.554h-2.434V79.75h-2.862v2.672h-1.792v2.554h1.655v4.387c0 1.853 1.052 3.257 3.408 3.257zM186.214 81.214h3.194v-3.042h-3.194v3.042zm.097 11.407h2.999V82.423h-2.999V92.62zM195.272 92.796c3.311 0 5.083-2.223 5.083-5.265 0-3.061-1.811-5.284-5.083-5.284-3.272 0-5.083 2.223-5.083 5.284 0 3.062 1.773 5.265 5.083 5.265zm0-2.632c-1.227 0-2.025-.78-2.025-2.633 0-1.833.779-2.652 2.025-2.652s2.025.8 2.025 2.652c0 1.853-.779 2.633-2.025 2.633zM201.431 92.62h2.999v-5.654c0-1.229.779-1.989 1.85-1.989 1.188 0 1.714.702 1.714 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.785 1.15h-.078l-.234-.974h-2.687V92.62z"),W(ct,"class","svelte-sdid3b"),W(Qe,"class","text-group svelte-sdid3b"),W(Qe,"fill",yt=at[2]?"#fbf8e9":"#16343e"),W(Qe,"opacity","1.0")},m(ar,fr){Q(ar,Qe,fr),ie(Qe,gt),ie(Qe,ct),tr=!0},p(ar,fr){at=ar,(!tr||fr&4&&yt!==(yt=at[2]?"#fbf8e9":"#16343e"))&&W(Qe,"fill",yt)},i(ar){tr||(lt(()=>{Ut&&Ut.end(1),Ct||(Ct=Ft(Qe,Gr,{duration:ul})),Ct.start()}),tr=!0)},o(ar){Ct&&Ct.invalidate(),Ut=nr(Qe,Gr,{duration:ul}),tr=!1},d(ar){ar&&V(Qe),ar&&Ut&&Ut.end()}}}function Ps(at){let Qe,gt,ct,yt,Ct,Ut,tr;return{c(){Qe=ee("g"),gt=ee("path"),yt=ee("path"),this.h()},l(ar){Qe=me(ar,"g",{opacity:!0,class:!0},1);var fr=ue(Qe);gt=me(fr,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(gt).forEach(V),yt=me(fr,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(yt).forEach(V),fr.forEach(V),this.h()},h(){W(gt,"fill","none"),W(gt,"style",ct=(at[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",An),W(gt,"class","svelte-sdid3b"),W(yt,"fill","none"),W(yt,"style",Ct=(at[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(yt,"d",Yn),W(yt,"class","svelte-sdid3b"),W(Qe,"opacity","0.75"),W(Qe,"class","svelte-sdid3b")},m(ar,fr){Q(ar,Qe,fr),ie(Qe,gt),ie(Qe,yt),tr=!0},p(ar,fr){at=ar,(!tr||fr&4&&ct!==(ct=(at[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",ct),(!tr||fr&4&&Ct!==(Ct=(at[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(yt,"style",Ct)},i(ar){tr||(Ut&&Ut.end(1),tr=!0)},o(ar){Ut=nr(Qe,Gr,{duration:ul}),tr=!1},d(ar){ar&&V(Qe),ar&&Ut&&Ut.end()}}}function rs(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr;return{c(){Qe=ee("g"),gt=ee("path"),Ct=ee("path"),this.h()},l(vr){Qe=me(vr,"g",{opacity:!0,class:!0},1);var Fr=ue(Qe);gt=me(Fr,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(V),Ct=me(Fr,"path",{style:!0,d:!0,class:!0},1),ue(Ct).forEach(V),Fr.forEach(V),this.h()},h(){W(gt,"style",ct=(at[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",An),W(gt,"class","svelte-sdid3b"),W(Ct,"style",Ut=(at[2]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"),W(Ct,"d",Yn),W(Ct,"class","svelte-sdid3b"),W(Qe,"opacity","0.5"),W(Qe,"class","svelte-sdid3b")},m(vr,Fr){Q(vr,Qe,Fr),ie(Qe,gt),ie(Qe,Ct),fr=!0},p(vr,Fr){at=vr,(!fr||Fr&4&&ct!==(ct=(at[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",ct),(!fr||Fr&4&&Ut!==(Ut=(at[2]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"))&&W(Ct,"style",Ut)},i(vr){fr||(yt||lt(()=>{yt=Ft(gt,Mn,{duration:ul,delay:Co,easing:_r}),yt.start()}),tr||lt(()=>{tr=Ft(Ct,Or,{duration:Co}),tr.start()}),ar&&ar.end(1),fr=!0)},o(vr){ar=nr(Qe,Gr,{duration:ul}),fr=!1},d(vr){vr&&V(Qe),vr&&ar&&ar.end()}}}function Su(at){let Qe,gt=at[6].innerHTML+"",ct;return{c(){ct=de(),this.h()},l(yt){ct=de(),this.h()},h(){Qe=new tt(ct)},m(yt,Ct){Qe.m(gt,yt,Ct),Q(yt,ct,Ct)},p:R,i:R,o:R,d(yt){yt&&V(ct),yt&&Qe.d()}}}function Rs(at){let Qe;const gt=at[9].default,ct=G(gt,at,at[8],null);return{c(){ct&&ct.c()},l(yt){ct&&ct.l(yt)},m(yt,Ct){ct&&ct.m(yt,Ct),Qe=!0},p(yt,Ct){ct&&ct.p&&Ct&256&&I(ct,gt,yt,yt[8],Ct,null,null)},i(yt){Qe||(Je(ct,yt),Qe=!0)},o(yt){st(ct,yt),Qe=!1},d(yt){ct&&ct.d(yt)}}}function ec(at){let Qe,gt=at[14].elm().innerHTML+"",ct;return{c(){ct=de(),this.h()},l(yt){ct=de(),this.h()},h(){Qe=new tt(ct)},m(yt,Ct){Qe.m(gt,yt,Ct),Q(yt,ct,Ct)},p(yt,Ct){Ct&2&&gt!==(gt=yt[14].elm().innerHTML+"")&&Qe.p(gt)},d(yt){yt&&V(ct),yt&&Qe.d()}}}function Eu(at){let Qe,gt=at[14].label+"",ct,yt,Ct,Ut,tr,ar,fr,vr;return{c(){Qe=re("a"),ct=ae(gt),Ct=fe(),Ut=re("button"),tr=re("span"),ar=ae("Show submenu for “About”"),this.h()},l(Fr){Qe=me(Fr,"A",{href:!0,role:!0,class:!0});var qr=ue(Qe);ct=be(qr,gt),qr.forEach(V),Ct=ke(Fr),Ut=me(Fr,"BUTTON",{class:!0,"aria-haspopup":!0});var $r=ue(Ut);tr=me($r,"SPAN",{class:!0});var Nn=ue(tr);ar=be(Nn,"Show submenu for “About”"),Nn.forEach(V),$r.forEach(V),this.h()},h(){W(Qe,"href",yt=at[14].link),W(Qe,"role","menuitem"),W(Qe,"class"," top-level-nav-link svelte-sdid3b"),W(tr,"class","screen-reader-text svelte-sdid3b"),W(Ut,"class","sr-dropdown-button has-dropdown-trigger-indictator dropdown-trigger hover-target svelte-sdid3b"),W(Ut,"aria-haspopup","true")},m(Fr,qr){Q(Fr,Qe,qr),ie(Qe,ct),Q(Fr,Ct,qr),Q(Fr,Ut,qr),ie(Ut,tr),ie(tr,ar),fr||(vr=pe(Qe,"click",at[10]),fr=!0)},p(Fr,qr){qr&2&&gt!==(gt=Fr[14].label+"")&&Pe(ct,gt),qr&2&&yt!==(yt=Fr[14].link)&&W(Qe,"href",yt)},d(Fr){Fr&&V(Qe),Fr&&V(Ct),Fr&&V(Ut),fr=!1,vr()}}}function hu(at){let Qe,gt;function ct(Ut,tr){return Ut[14].link=="#about/"?Eu:ec}let yt=ct(at),Ct=yt(at);return{c(){Qe=re("li"),Ct.c(),gt=fe(),this.h()},l(Ut){Qe=me(Ut,"LI",{id:!0,class:!0,"aria-haspopup":!0});var tr=ue(Qe);Ct.l(tr),gt=ke(tr),tr.forEach(V),this.h()},h(){W(Qe,"id","menu-item-12"),W(Qe,"class","menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-12 col-auto top-level-menu-item svelte-sdid3b"),W(Qe,"aria-haspopup","true")},m(Ut,tr){Q(Ut,Qe,tr),Ct.m(Qe,null),ie(Qe,gt)},p(Ut,tr){yt===(yt=ct(Ut))&&Ct?Ct.p(Ut,tr):(Ct.d(1),Ct=yt(Ut),Ct&&(Ct.c(),Ct.m(Qe,gt)))},d(Ut){Ut&&V(Qe),Ct.d()}}}function Rc(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr,vr,Fr,qr,$r,Nn,ia,Pn,Wn,aa,Un,Jn,Ia,ti,ya,Xa,na,_i,_a,Fa,ki,vi,xi,Zn,wi,Bi,li,Ca,to,ro,Lo,Oo,Ji,Zi,_o,as,vs,Js,xo,ni,ui,Po,no,Ao,Qo,Gi,Ya=!!at[4]&&Qa(at);const is=[Rs,Su],Ea=[];function Ga(Qn,za){return Qn[0]==null?0:1}qr=Ga(at),$r=Ea[qr]=is[qr](at);let Li=at[1],Mi=[];for(let Qn=0;Qn<Li.length;Qn+=1)Mi[Qn]=hu(Ui(at,Li,Qn));return{c(){Qe=re("header"),gt=re("div"),ct=re("div"),yt=re("div"),Ct=re("div"),Ut=ee("svg"),tr=ee("path"),fr=fe(),Ya&&Ya.c(),vr=fe(),Fr=re("nav"),$r.c(),Nn=fe(),ia=re("ul");for(let Qn=0;Qn<Mi.length;Qn+=1)Mi[Qn].c();Pn=fe(),Wn=re("div"),aa=re("a"),Un=re("span"),Jn=re("span"),Ia=re("span"),ti=ae("Site Menu"),ya=fe(),Xa=re("span"),na=re("span"),_i=ae("Close Menu"),_a=fe(),Fa=re("span"),ki=re("span"),vi=re("span"),xi=ee("svg"),Zn=ee("g"),wi=ee("rect"),Bi=ee("rect"),li=ee("rect"),to=ee("defs"),ro=ee("clipPath"),Lo=ee("path"),Oo=fe(),Ji=re("span"),Zi=ee("svg"),_o=ee("path"),Po=fe(),no=re("br"),Ao=fe(),Qo=re("br"),this.h()},l(Qn){Qe=me(Qn,"HEADER",{id:!0,class:!0,style:!0});var za=ue(Qe);gt=me(za,"DIV",{class:!0});var Si=ue(gt);ct=me(Si,"DIV",{class:!0});var Vi=ue(ct);yt=me(Vi,"DIV",{class:!0,style:!0});var uo=ue(yt);Ct=me(uo,"DIV",{class:!0});var Ei=ue(Ct);Ut=me(Ei,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,style:!0},1);var Qi=ue(Ut);tr=me(Qi,"path",{class:!0,fill:!0,d:!0},1),ue(tr).forEach(V),Qi.forEach(V),fr=ke(Ei),Ya&&Ya.l(Ei),Ei.forEach(V),vr=ke(uo),Fr=me(uo,"NAV",{class:!0,"data-itemcount":!0,"data-textlength":!0,role:!0,"aria-label":!0});var qo=ue(Fr);$r.l(qo),Nn=ke(qo),ia=me(qo,"UL",{id:!0,class:!0});var ks=ue(ia);for(let zs=0;zs<Mi.length;zs+=1)Mi[zs].l(ks);ks.forEach(V),qo.forEach(V),Pn=ke(uo),Wn=me(uo,"DIV",{class:!0});var or=ue(Wn);aa=me(or,"A",{href:!0,class:!0,role:!0,labelledby:!0});var Fo=ue(aa);Un=me(Fo,"SPAN",{id:!0,class:!0});var fo=ue(Un);Jn=me(fo,"SPAN",{class:!0});var Di=ue(Jn);Ia=me(Di,"SPAN",{class:!0});var mi=ue(Ia);ti=be(mi,"Site Menu"),mi.forEach(V),Di.forEach(V),ya=ke(fo),Xa=me(fo,"SPAN",{class:!0,"aria-hidden":!0});var Is=ue(Xa);na=me(Is,"SPAN",{class:!0});var _l=ue(na);_i=be(_l,"Close Menu"),_l.forEach(V),Is.forEach(V),fo.forEach(V),_a=ke(Fo),Fa=me(Fo,"SPAN",{class:!0,"aria-hidden":!0});var dl=ue(Fa);ki=me(dl,"SPAN",{class:!0});var No=ue(ki);vi=me(No,"SPAN",{class:!0,"aria-hidden":!0});var wl=ue(vi);xi=me(wl,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var Qs=ue(xi);Zn=me(Qs,"g",{"clip-path":!0,fill:!0,class:!0},1);var Vo=ue(Zn);wi=me(Vo,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(wi).forEach(V),Bi=me(Vo,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(Bi).forEach(V),li=me(Vo,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(li).forEach(V),Vo.forEach(V),to=me(Qs,"defs",{class:!0},1);var Tl=ue(to);ro=me(Tl,"clipPath",{id:!0,class:!0},1);var Hl=ue(ro);Lo=me(Hl,"path",{fill:!0,transform:!0,d:!0,class:!0},1),ue(Lo).forEach(V),Hl.forEach(V),Tl.forEach(V),Qs.forEach(V),wl.forEach(V),Oo=ke(No),Ji=me(No,"SPAN",{class:!0,"aria-hidden":!0});var So=ue(Ji);Zi=me(So,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var ms=ue(Zi);_o=me(ms,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0},1),ue(_o).forEach(V),ms.forEach(V),So.forEach(V),No.forEach(V),dl.forEach(V),Fo.forEach(V),or.forEach(V),uo.forEach(V),Vi.forEach(V),Si.forEach(V),za.forEach(V),Po=ke(Qn),no=me(Qn,"BR",{class:!0}),Ao=ke(Qn),Qo=me(Qn,"BR",{class:!0}),this.h()},h(){W(tr,"class","border svelte-sdid3b"),W(tr,"fill",ar=at[2]?"#26535c":"#fbf8e9"),W(tr,"d","M115.084 31.849L61.916.809a5.66 5.66 0 00-5.832 0L2.916 31.85C1.118 32.927 0 34.839 0 36.949v62.127c0 2.109 1.118 4.021 2.916 5.1l53.168 31.039c.923.54 1.895.785 2.916.785 1.02 0 2.041-.245 2.916-.785l53.168-31.039c1.798-1.03 2.916-2.991 2.916-5.1V36.948c0-2.108-1.118-4.02-2.916-5.1z"),W(Ut,"class","logo-border svelte-sdid3b"),W(Ut,"xmlns","http://www.w3.org/2000/svg"),W(Ut,"width","308"),W(Ut,"height","136"),W(Ut,"viewBox","0 0 308 136"),W(Ut,"fill","none"),je(Ut,"background-color","transparent"),W(Ct,"class","site-header__item site-header__main-logo col-auto svelte-sdid3b"),W(ia,"id","primary-navigation"),W(ia,"class","row menu justify-content-start site-header__item_inner has-dropdowns has-aria-dropdowns svelte-sdid3b"),W(Fr,"class","site-header__item site-header__menu-section col-auto site-header__primary-menu  over-four-items over-fourty-characters svelte-sdid3b"),W(Fr,"data-itemcount","5"),W(Fr,"data-textlength","42"),W(Fr,"role","navigation"),W(Fr,"aria-label","Primary Navigation"),W(Ia,"class","screen-reader-text svelte-sdid3b"),W(Jn,"class","hamburger-control__open-label svelte-sdid3b"),W(na,"class","screen-reader-text svelte-sdid3b"),W(Xa,"class","hamburger-control__close-label svelte-sdid3b"),W(Xa,"aria-hidden","true"),W(Un,"id","mm-label"),W(Un,"class","hamburger-control__label svelte-sdid3b"),W(wi,"y",".5"),W(wi,"width","20"),W(wi,"height","3"),W(wi,"rx","1.5"),W(wi,"class","svelte-sdid3b"),W(Bi,"y","7.5"),W(Bi,"width","20"),W(Bi,"height","3"),W(Bi,"rx","1.5"),W(Bi,"class","svelte-sdid3b"),W(li,"y","14.5"),W(li,"width","20"),W(li,"height","3"),W(li,"rx","1.5"),W(li,"class","svelte-sdid3b"),W(Zn,"clip-path","url(#clip0)"),W(Zn,"fill",Ca=at[2]?"#fbf8e9":"#16343e"),W(Zn,"class","svelte-sdid3b"),W(Lo,"fill","#fff"),W(Lo,"transform","translate(0 .5)"),W(Lo,"d","M0 0h20v17H0z"),W(Lo,"class","svelte-sdid3b"),W(ro,"id","clip0"),W(ro,"class","svelte-sdid3b"),W(to,"class","svelte-sdid3b"),W(xi,"class","menu svelte-sdid3b"),W(xi,"width","20"),W(xi,"height","18"),W(xi,"viewBox","0 0 20 18"),W(xi,"fill","none"),W(xi,"xmlns","http://www.w3.org/2000/svg"),W(vi,"class","hamburger-control__open svelte-sdid3b"),W(vi,"aria-hidden","true"),W(_o,"d","M3.304 20.801L11 13.104l7.698 7.697c.296.297.671.449 1.052.449.38 0 .756-.152 1.052-.449a1.459 1.459 0 000-2.104L13.104 11 20.8 3.303a1.459 1.459 0 000-2.104 1.46 1.46 0 00-2.104 0h0L11 8.898 3.301 1.2a1.46 1.46 0 00-2.103 0h0a1.46 1.46 0 000 2.104L8.834 11 1.2 18.697s0 0 0 0a1.458 1.458 0 00-.012 2.092c.255.326.713.461 1.064.461.38 0 .756-.152 1.052-.449h0z"),W(_o,"fill",as=at[2]?"#fbf8e9":"#16343e"),W(_o,"stroke","#16343e"),W(_o,"stroke-width",".5"),W(_o,"class","svelte-sdid3b"),W(Zi,"class","menu-close svelte-sdid3b"),W(Zi,"width","22"),W(Zi,"height","22"),W(Zi,"viewBox","0 0 22 22"),W(Zi,"fill","none"),W(Zi,"xmlns","http://www.w3.org/2000/svg"),W(Ji,"class","hamburger-control__close svelte-sdid3b"),W(Ji,"aria-hidden","true"),W(ki,"class","hamburger-control__inner svelte-sdid3b"),W(Fa,"class",vs=B(at[2]?"Light-on-Dark hamburger-control":"hamburger-control")+" svelte-sdid3b"),W(Fa,"aria-hidden","true"),W(aa,"href","#primary-footer-menu-section"),W(aa,"class","mobile-menu-toggle__control js-mobile-menu-control js-open-main-menu svelte-sdid3b"),W(aa,"role","button"),W(aa,"labelledby","mm-label"),W(Wn,"class","site-header__item mobile-menu-toggle col svelte-sdid3b"),W(yt,"class",Js=B(at[2]?"Light-on-Dark row site-header__row justify-content-between align-items-center":"row site-header__row justify-content-between align-items-center")+" svelte-sdid3b"),je(yt,"width","100%"),W(ct,"class",xo=B(at[2]?"Light-on-Dark container":"container")+" svelte-sdid3b"),W(gt,"class",ni=B(at[2]?"Light-on-Dark site-header__inner":"site-header__inner")+" svelte-sdid3b"),W(Qe,"id","desktop-header"),W(Qe,"class",ui=B(at[2]?"Light-on-Dark site-header":"site-header")+" svelte-sdid3b"),je(Qe,"position","fixed"),je(Qe,"max-width","100%"),je(Qe,"max-height","108px"),je(Qe,"height","75px"),je(Qe,"z-index","1"),W(no,"class","svelte-sdid3b"),W(Qo,"class","svelte-sdid3b")},m(Qn,za){Q(Qn,Qe,za),ie(Qe,gt),ie(gt,ct),ie(ct,yt),ie(yt,Ct),ie(Ct,Ut),ie(Ut,tr),ie(Ct,fr),Ya&&Ya.m(Ct,null),ie(yt,vr),ie(yt,Fr),Ea[qr].m(Fr,null),ie(Fr,Nn),ie(Fr,ia);for(let Si=0;Si<Mi.length;Si+=1)Mi[Si].m(ia,null);ie(yt,Pn),ie(yt,Wn),ie(Wn,aa),ie(aa,Un),ie(Un,Jn),ie(Jn,Ia),ie(Ia,ti),ie(Un,ya),ie(Un,Xa),ie(Xa,na),ie(na,_i),ie(aa,_a),ie(aa,Fa),ie(Fa,ki),ie(ki,vi),ie(vi,xi),ie(xi,Zn),ie(Zn,wi),ie(Zn,Bi),ie(Zn,li),ie(xi,to),ie(to,ro),ie(ro,Lo),ie(ki,Oo),ie(ki,Ji),ie(Ji,Zi),ie(Zi,_o),Q(Qn,Po,za),Q(Qn,no,za),Q(Qn,Ao,za),Q(Qn,Qo,za),Gi=!0},p(Qn,[za]){(!Gi||za&4&&ar!==(ar=Qn[2]?"#26535c":"#fbf8e9"))&&W(tr,"fill",ar),Qn[4]?Ya?(Ya.p(Qn,za),za&16&&Je(Ya,1)):(Ya=Qa(Qn),Ya.c(),Je(Ya,1),Ya.m(Ct,null)):Ya&&(Ge(),st(Ya,1,1,()=>{Ya=null}),ot());let Si=qr;if(qr=Ga(Qn),qr===Si?Ea[qr].p(Qn,za):(Ge(),st(Ea[Si],1,1,()=>{Ea[Si]=null}),ot(),$r=Ea[qr],$r||($r=Ea[qr]=is[qr](Qn),$r.c()),Je($r,1),$r.m(Fr,Nn)),za&10){Li=Qn[1];let Vi;for(Vi=0;Vi<Li.length;Vi+=1){const uo=Ui(Qn,Li,Vi);Mi[Vi]?Mi[Vi].p(uo,za):(Mi[Vi]=hu(uo),Mi[Vi].c(),Mi[Vi].m(ia,null))}for(;Vi<Mi.length;Vi+=1)Mi[Vi].d(1);Mi.length=Li.length}(!Gi||za&4&&Ca!==(Ca=Qn[2]?"#fbf8e9":"#16343e"))&&W(Zn,"fill",Ca),(!Gi||za&4&&as!==(as=Qn[2]?"#fbf8e9":"#16343e"))&&W(_o,"fill",as),(!Gi||za&4&&vs!==(vs=B(Qn[2]?"Light-on-Dark hamburger-control":"hamburger-control")+" svelte-sdid3b"))&&W(Fa,"class",vs),(!Gi||za&4&&Js!==(Js=B(Qn[2]?"Light-on-Dark row site-header__row justify-content-between align-items-center":"row site-header__row justify-content-between align-items-center")+" svelte-sdid3b"))&&W(yt,"class",Js),(!Gi||za&4&&xo!==(xo=B(Qn[2]?"Light-on-Dark container":"container")+" svelte-sdid3b"))&&W(ct,"class",xo),(!Gi||za&4&&ni!==(ni=B(Qn[2]?"Light-on-Dark site-header__inner":"site-header__inner")+" svelte-sdid3b"))&&W(gt,"class",ni),(!Gi||za&4&&ui!==(ui=B(Qn[2]?"Light-on-Dark site-header":"site-header")+" svelte-sdid3b"))&&W(Qe,"class",ui)},i(Qn){Gi||(Je(Ya),Je($r),Gi=!0)},o(Qn){st(Ya),st($r),Gi=!1},d(Qn){Qn&&V(Qe),Ya&&Ya.d(),Ea[qr].d(),se(Mi,Qn),Qn&&V(Po),Qn&&V(no),Qn&&V(Ao),Qn&&V(Qo)}}}let Vu=!1,Co=1500,ul=500;function yo(at,Qe,gt){let{$$slots:ct={},$$scope:yt}=Qe,{light_on_dark:Ct=!1}=Qe,{innerElms:Ut=null}=Qe,{nav_links:tr=[{label:"About",link:"#about/",elm(){const Pn=document.createElement("li");return Pn.className="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-12 col-auto top-level-menu-item",Pn.innerHTML=`
                    <a href="${this.link}" onClick="${Wn=>ar(Wn)}" role="menuitem" class=" top-level-nav-link">${this.label}</a>
`,console.log(`Resulting nav_link (${this.label})`,Pn),Pn},fun(){}}]}=Qe,{sidebarFunction:ar=Pn=>{console.log("showSidebar",Pn),Pn.target.data={action:"show",set:!1,path:"target"in Pn&&"hash"in Pn.target?Pn.target.hash:""},Pn.target.dispatchEvent(new CustomEvent("sidebar",Pn))}}=Qe,{title:fr=""}=Qe,vr=!1,Fr=!1,qr=document.createElement("div");const $r={};let Nn=function(Pn){if(Pn&&!Vu&&!Fr)return gt(4,vr=!0),setTimeout(()=>{gt(5,Fr=!0)},Co+ul),!0;if(!vr)return gt(5,Fr=!1),!1};Wt(function(){console.log("light_on_dark",Ct),gt(4,vr=!0),gt(1,tr=tr.map((Pn,Wn,aa)=>(console.log("title:",fr),fr&&Pn.link==="#about/"&&(Pn.label=fr),gt(1,tr[Wn]=Pn,tr),console.log("label:",tr[Wn].label),Pn)))});const ia=Pn=>ar(Pn);return at.$$set=Pn=>{"light_on_dark"in Pn&&gt(2,Ct=Pn.light_on_dark),"innerElms"in Pn&&gt(0,Ut=Pn.innerElms),"nav_links"in Pn&&gt(1,tr=Pn.nav_links),"sidebarFunction"in Pn&&gt(3,ar=Pn.sidebarFunction),"title"in Pn&&gt(7,fr=Pn.title),"$$scope"in Pn&&gt(8,yt=Pn.$$scope)},at.$$.update=()=>{at.$$.dirty&16&&Nn(vr),at.$$.dirty&4097&&function(Wn,aa){if(Ut!=null&&console.log("extractLinkContentFromHTML:",Wn.innerHTML),Ut!=null&&Wn!=null&&Wn.innerHTML){const Un=[...Wn.childNodes];for(const Jn of Un)if(Jn.nodeType===1&&Jn.className.match(/container-fluid/)!==null){const Ia="id"in Jn&&Jn.id?Jn.id:Jn.innerHTML.toString().substring(0,16)+Jn.className+Jn.toString();console.log(Ia,Jn);const ti=[...Jn.childNodes];for(const ya of ti)if(ya.nodeType===1&&ya.className.match(/navbar-nav/)!==null){const Xa="id"in ya&&ya.id?ya.id:ya.innerHTML.toString().substring(0,16)+ya.className+ya.toString(),na=ya;if(console.log(Xa,ya),console.log(`Found ul elm (${Xa}). Remove from inner:`,ya),Jn.removeChild(ya),Xa in $r)console.log("Already processed",Xa);else if(na.children.length>0){console.log("Add ul to nav target:");const _i=[...ya.childNodes];for(const _a of _i)if(_a.nodeType===1){const Fa="id"in _a&&_a.id?_a.id:_a.innerHTML.toString().substring(0,16)+_a.className+_a.toString();_a.children[0].innerHTML?console.log(`Found link elm (${Fa}). Remove from inner:`,_a):(console.log("Found blank link elm. Remove from inner:",_a),ya.removeChild(_a))}aa.append(na),gt(12,$r[Xa]=na,$r)}}}console.log("Resulting target container:",aa)}gt(0,Ut=Wn)}(Ut,qr)},[Ut,tr,Ct,ar,vr,Fr,qr,fr,yt,ct,ia]}class uh extends er{constructor(Qe){super(),ai.getElementById("svelte-sdid3b-style")||Ti(),Nt(this,Qe,yo,Rc,F,{light_on_dark:2,innerElms:0,nav_links:1,sidebarFunction:3,title:7})}}const{document:pu}=Fe;function zf(){var at=re("style");at.id="svelte-sdid3b-style",at.textContent=".svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before{box-sizing:border-box}button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{border:0;cursor:pointer;overflow:visible;text-transform:none}svg.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b:not(:root){overflow:hidden}.site-header.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{position:absolute;top:0;left:0;width:100vw}*.Light-on-Dark.site-header.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.site-header.svelte-sdid3b a.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.site-header.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{background-color:#16343e;background-color:#26535c}.site-header__inner.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{background-color:transparent;transition:all .35s ease,background-color 0s}.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{width:100%;padding-left:56px;padding-right:56px;margin-right:0px;margin-left:0px}@media(max-width: 540px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{padding:0 0 0 1em;max-width:100vh;width:100%}}@media(min-width: 640px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 768px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 1024px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 1080px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:100%}}.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{list-style:none;display:flex;flex-wrap:wrap;margin-right:-10px;margin-left:-10px}.justify-content-between.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{justify-content:space-between !important}.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{width:calc(100% + 20px);list-style:none;padding:0;margin:0 0 0 -10px}.site-header__row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{height:76px;flex-wrap:nowrap;transition:.35s ease}@media(min-width: 768px){.site-header__row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{will-change:height}}@media(min-width: 768px){}.col.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,.col-auto.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{position:relative;width:100%;padding-right:10px;padding-left:10px}.col-auto.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{flex:0 0 auto;width:auto;max-width:100%}.site-header__main-logo.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:50%;align-self:flex-start}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:143px;height:92px;position:absolute;top:12px;left:0;transition:all .35s ease;transform-origin:top left;pointer-events:none;touch-action:none;background-color:transparent}@media(max-width: 768px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{height:54px}}@media(min-width: 768px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:154px;height:74px;top:4px;left:1px}}@media(min-width: 1200px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:211px;height:92px;will-change:height,width,top,left}}.site-header__main-logo.svelte-sdid3b svg.logo-border.svelte-sdid3b.svelte-sdid3b{fill:none;z-index:0}.header-stuck .site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{top:-1px}@media(min-width: 768px){.header-stuck .site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:155px;height:100px;top:-3px;left:1px}}.site-header__main-logo.svelte-sdid3b svg .text-group.svelte-sdid3b.svelte-sdid3b{transition:.25s cubic-bezier(.77,0,.175,1)}@media(max-width: 1023px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .text g.svelte-sdid3b,.site-header__main-logo.svelte-sdid3b svg .text-group.svelte-sdid3b.svelte-sdid3b{display:none}}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .logo path.svelte-sdid3b,.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .text path.svelte-sdid3b{fill:#16343e}.header-stuck .site-header__main-logo.svelte-sdid3b svg .border.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.home .menu.svelte-sdid3b g.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.home .site-header__main-logo.svelte-sdid3b .logo path.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.home .site-header__main-logo.svelte-sdid3b .text path.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .menu.svelte-sdid3b g.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .site-header__main-logo.svelte-sdid3b .logo path.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .site-header__main-logo.svelte-sdid3b .text path.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.svelte-sdid3b .site-header__main-logo svg .logo path.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.svelte-sdid3b .site-header__main-logo svg .text path.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.svelte-sdid3b .header-stuck .site-header__main-logo svg .border.svelte-sdid3b.svelte-sdid3b{fill:#16343e;fill:#26535c}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b path.svelte-sdid3b{transition:all .35s ease,fill 0s}.site-header__menu-section.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex}.site-header__primary-menu.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{padding-top:10px}.site-header__item.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex}.site-header__item.svelte-sdid3b .site-header__item_inner.svelte-sdid3b.svelte-sdid3b{display:flex;align-items:center;flex:1 0 auto}.site-header__menu-section.svelte-sdid3b .menu.svelte-sdid3b.svelte-sdid3b{align-items:stretch;flex-wrap:nowrap}.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{margin-right:0;align-items:center}@media(min-width: 1200px){.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{align-items:center}}.mobile-menu-toggle.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex;flex:0 0 0;margin-right:2.5%;order:4;align-items:center}@media(max-width: 820px){.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{display:none}}@media(min-width: 820px){.mobile-menu-toggle.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:none}}.hamburger-control__inner.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{background-color:transparent}.hamburger-control__inner.svelte-sdid3b .hamburger-control__open.svelte-sdid3b.svelte-sdid3b{background-color:transparent}.hamburger-control__inner.svelte-sdid3b .hamburger-control__open .menu g.svelte-sdid3b.svelte-sdid3b{fill:#16343E}*.Light-on-Dark.svelte-sdid3b .hamburger-control__inner .hamburger-control__open .menu g.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9 !important}*.Light-on-Dark.svelte-sdid3b .hamburger-control__inner .hamburger-control__close .menu g.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9 !important}*.hamburger-control__close.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:none}.site-header__menu-section.svelte-sdid3b .menu .menu-item.svelte-sdid3b.svelte-sdid3b{align-items:stretch;display:flex}.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b>li.svelte-sdid3b{padding:0 !important;margin:0 12px}.site-header__row.svelte-sdid3b #primary-navigation>li a.svelte-sdid3b.svelte-sdid3b{padding-left:0;padding-right:0}.site-header__primary-menu.svelte-sdid3b .top-level-nav-link.svelte-sdid3b.svelte-sdid3b{padding:0 10px 0 10px}.header-stuck .site-header__menu-section.svelte-sdid3b .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:#16343e !important;display:inline;background-size:0 1px;background-position:0 calc(100% - 4px);background-repeat:no-repeat;transition:.25s cubic-bezier(.77,0,.175,1);transition-duration:.35s;background-image:linear-gradient(#16343e,#16343e) !important}*.Light-on-Dark.svelte-sdid3b .site-header__menu-section .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:rgb(251, 248, 233)}*.Light-on-Dark.svelte-sdid3b .header-stuck .site-header__menu-section .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:rgb(251, 248, 233) !important}.has-dropdowns.svelte-sdid3b .sub-menu li.svelte-sdid3b.svelte-sdid3b{width:100%;margin:0 0 12px;padding:0;border:0 !important;display:inline-block !important;clear:both}.screen-reader-text.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b:not(:focus):not(:active),.sr-dropdown-button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute !important;width:1px;word-wrap:normal !important}.sr-dropdown-button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{flex:0 1 auto;padding:0;margin:0;display:flex;align-items:center;width:auto;height:100%}.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before,.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before{content:initial !important;display:block !important}",ie(pu.head,at)}function du(at,Qe,gt){const ct=at.slice();return ct[14]=Qe[gt],ct}function Ql(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr,vr=!!at[5]&&Cu(at);const Fr=[ml,Lu],qr=[];function $r(Nn,ia){return Nn[5]?1:0}return~(tr=$r(at))&&(ar=qr[tr]=Fr[tr](at)),{c(){Qe=ee("svg"),gt=ee("defs"),ct=ee("mask"),yt=ee("path"),Ct=ee("path"),Ut=ee("g"),vr&&vr.c(),ar&&ar.c(),this.h()},l(Nn){Qe=me(Nn,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,style:!0,class:!0},1);var ia=ue(Qe);gt=me(ia,"defs",{class:!0},1);var Pn=ue(gt);ct=me(Pn,"mask",{id:!0,x:!0,y:!0,width:!0,height:!0,maskUnits:!0,maskContentUnits:!0,class:!0},1);var Wn=ue(ct);yt=me(Wn,"path",{fill:!0,d:!0,class:!0},1),ue(yt).forEach(V),Ct=me(Wn,"path",{d:!0,fill:!0,class:!0},1),ue(Ct).forEach(V),Wn.forEach(V),Pn.forEach(V),Ut=me(ia,"g",{class:!0,mask:!0},1);var aa=ue(Ut);vr&&vr.l(aa),aa.forEach(V),ar&&ar.l(ia),ia.forEach(V),this.h()},h(){W(yt,"fill","#fff"),W(yt,"d","M0 0h308v136H0z"),W(yt,"class","svelte-sdid3b"),W(Ct,"d","M115.084 31.849L61.916.809a5.66 5.66 0 00-5.832 0L2.916 31.85C1.118 32.927 0 34.839 0 36.949v62.127c0 2.109 1.118 4.021 2.916 5.1l53.168 31.039c.923.54 1.895.785 2.916.785 1.02 0 2.041-.245 2.916-.785l53.168-31.039c1.798-1.03 2.916-2.991 2.916-5.1V36.948c0-2.108-1.118-4.02-2.916-5.1z"),W(Ct,"fill","#000"),W(Ct,"class","svelte-sdid3b"),W(ct,"id","border-mask"),W(ct,"x","0"),W(ct,"y","0"),W(ct,"width","308"),W(ct,"height","136"),W(ct,"maskUnits","userSpaceOnUse"),W(ct,"maskContentUnits","userSpaceOnUse"),W(ct,"class","svelte-sdid3b"),W(gt,"class","svelte-sdid3b"),W(Ut,"class","text svelte-sdid3b"),W(Ut,"mask","url(#border-mask)"),W(Qe,"xmlns","http://www.w3.org/2000/svg"),W(Qe,"width","308"),W(Qe,"height","136"),W(Qe,"viewBox","0 0 308 136"),W(Qe,"fill","none"),je(Qe,"background-color","transparent"),W(Qe,"class","svelte-sdid3b")},m(Nn,ia){Q(Nn,Qe,ia),ie(Qe,gt),ie(gt,ct),ie(ct,yt),ie(ct,Ct),ie(Qe,Ut),vr&&vr.m(Ut,null),~tr&&qr[tr].m(Qe,null),fr=!0},p(Nn,ia){Nn[5]?vr?(vr.p(Nn,ia),ia&32&&Je(vr,1)):(vr=Cu(Nn),vr.c(),Je(vr,1),vr.m(Ut,null)):vr&&(Ge(),st(vr,1,1,()=>{vr=null}),ot());let Pn=tr;tr=$r(Nn),tr===Pn?~tr&&qr[tr].p(Nn,ia):(ar&&(Ge(),st(qr[Pn],1,1,()=>{qr[Pn]=null}),ot()),~tr?(ar=qr[tr],ar||(ar=qr[tr]=Fr[tr](Nn),ar.c()),Je(ar,1),ar.m(Qe,null)):ar=null)},i(Nn){fr||(Je(vr),Je(ar),fr=!0)},o(Nn){st(vr),st(ar),fr=!1},d(Nn){Nn&&V(Qe),vr&&vr.d(),~tr&&qr[tr].d()}}}function Cu(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr,vr,Fr,qr,$r,Nn,ia,Pn,Wn,aa,Un,Jn,Ia,ti,ya,Xa,na,_i,_a,Fa,ki,vi,xi,Zn,wi,Bi;return{c(){Qe=ee("g"),gt=ee("path"),ct=ee("path"),yt=ee("path"),Ct=ee("path"),Ut=ee("path"),tr=ee("path"),ar=ee("path"),fr=ee("path"),vr=ee("path"),Fr=ee("path"),qr=ee("path"),$r=ee("path"),Nn=ee("path"),ia=ee("path"),Pn=ee("path"),Wn=ee("path"),aa=ee("path"),Un=ee("path"),Jn=ee("path"),Ia=ee("path"),ti=ee("path"),ya=ee("path"),Xa=ee("path"),na=ee("path"),_i=ee("path"),_a=ee("path"),Fa=ee("path"),ki=ee("path"),vi=ee("path"),this.h()},l(li){Qe=me(li,"g",{class:!0,fill:!0,opacity:!0,transform:!0},1);var Ca=ue(Qe);gt=me(Ca,"path",{class:!0,d:!0},1),ue(gt).forEach(V),ct=me(Ca,"path",{class:!0,d:!0},1),ue(ct).forEach(V),yt=me(Ca,"path",{class:!0,d:!0},1),ue(yt).forEach(V),Ct=me(Ca,"path",{class:!0,d:!0},1),ue(Ct).forEach(V),Ut=me(Ca,"path",{class:!0,d:!0},1),ue(Ut).forEach(V),tr=me(Ca,"path",{class:!0,d:!0},1),ue(tr).forEach(V),ar=me(Ca,"path",{class:!0,d:!0},1),ue(ar).forEach(V),fr=me(Ca,"path",{class:!0,d:!0},1),ue(fr).forEach(V),vr=me(Ca,"path",{class:!0,d:!0},1),ue(vr).forEach(V),Fr=me(Ca,"path",{class:!0,d:!0},1),ue(Fr).forEach(V),qr=me(Ca,"path",{class:!0,d:!0},1),ue(qr).forEach(V),$r=me(Ca,"path",{class:!0,d:!0},1),ue($r).forEach(V),Nn=me(Ca,"path",{class:!0,d:!0},1),ue(Nn).forEach(V),ia=me(Ca,"path",{class:!0,d:!0},1),ue(ia).forEach(V),Pn=me(Ca,"path",{class:!0,d:!0},1),ue(Pn).forEach(V),Wn=me(Ca,"path",{class:!0,d:!0},1),ue(Wn).forEach(V),aa=me(Ca,"path",{class:!0,d:!0},1),ue(aa).forEach(V),Un=me(Ca,"path",{class:!0,d:!0},1),ue(Un).forEach(V),Jn=me(Ca,"path",{class:!0,d:!0},1),ue(Jn).forEach(V),Ia=me(Ca,"path",{class:!0,d:!0},1),ue(Ia).forEach(V),ti=me(Ca,"path",{class:!0,d:!0},1),ue(ti).forEach(V),ya=me(Ca,"path",{class:!0,d:!0},1),ue(ya).forEach(V),Xa=me(Ca,"path",{class:!0,d:!0},1),ue(Xa).forEach(V),na=me(Ca,"path",{class:!0,d:!0},1),ue(na).forEach(V),_i=me(Ca,"path",{class:!0,d:!0},1),ue(_i).forEach(V),_a=me(Ca,"path",{class:!0,d:!0},1),ue(_a).forEach(V),Fa=me(Ca,"path",{class:!0,d:!0},1),ue(Fa).forEach(V),ki=me(Ca,"path",{class:!0,d:!0},1),ue(ki).forEach(V),vi=me(Ca,"path",{class:!0,d:!0},1),ue(vi).forEach(V),Ca.forEach(V),this.h()},h(){W(gt,"class","st0 svelte-sdid3b"),W(gt,"d","m 163.17322,54.246193 c 2.19355,-0.865875 3.55008,-2.828524 3.55008,-5.426148 0,-3.059424 -2.30899,-5.714772 -6.14771,-5.714772 h -8.2258 v 17.981329 h 4.04074 v -6.349747 h 2.51104 l 3.86757,6.349747 h 4.73345 V 60.82684 Z m -6.78269,-7.53311 h 3.98303 c 1.55857,0 2.22241,1.067912 2.22241,2.164687 0,1.125637 -0.57725,2.280136 -2.22241,2.280136 h -3.98303 z"),W(ct,"class","st0 svelte-sdid3b"),W(ct,"d","m 173.53485,61.317502 c 1.76061,0 2.91511,-0.634975 3.66554,-1.529712 h 0.11545 l 0.31748,1.26995 h 3.52123 V 47.636683 h -3.95416 v 7.446522 c 0,1.616299 -1.03905,2.626486 -2.45331,2.626486 -1.55858,0 -2.25128,-0.9236 -2.25128,-2.453311 v -7.590834 h -3.95416 v 8.831921 c 0,2.943973 1.99151,4.820035 4.99321,4.820035 z"),W(yt,"class","st0 svelte-sdid3b"),W(yt,"d","m 182.91516,61.086602 h 3.6944 V 54.44823 c 0,-2.164687 1.21222,-3.405773 3.08828,-3.405773 h 1.29882 v -3.607811 h -0.9236 c -1.73175,0 -2.85739,1.010187 -3.43464,2.193549 h -0.11545 l -0.31749,-1.962649 h -3.29032 z"),W(Ct,"class","st0 svelte-sdid3b"),W(Ct,"d","m 196.04759,61.317502 c 1.67403,0 2.85739,-0.57725 3.60781,-1.443124 h 0.11545 l 0.28863,1.212224 h 3.55008 v -8.831921 c 0,-2.799661 -2.22241,-4.820035 -5.88794,-4.820035 -3.95417,0 -5.7725,2.164686 -5.7725,4.675723 h 3.6944 c 0,-0.80815 0.72156,-1.50085 1.96265,-1.50085 1.47198,0 2.04923,0.721562 2.04923,1.645162 v 0.721562 h -2.88625 c -3.69439,0 -5.39728,1.645162 -5.39728,4.127336 -0.0289,2.395586 1.64516,4.213923 4.67572,4.213923 z m 1.01019,-3.088286 c -1.18336,0 -1.78948,-0.57725 -1.78948,-1.327675 0,-0.721562 0.57725,-1.269949 1.81834,-1.269949 h 2.5399 v 0.57725 c 0,1.067912 -0.95246,2.020374 -2.56876,2.020374 z"),W(Ut,"class","st0 svelte-sdid3b"),W(Ut,"d","m 205.37017,61.086602 h 3.95417 V 42.066223 h -3.95417 z"),W(tr,"class","st0 svelte-sdid3b"),W(tr,"d","m 152.34979,85.331091 h 4.06961 V 67.349762 h -4.06961 z"),W(ar,"class","st0 svelte-sdid3b"),W(ar,"d","m 158.98816,85.331091 h 3.95416 v -7.446522 c 0,-1.616299 1.03905,-2.626486 2.45331,-2.626486 1.55857,0 2.25127,0.9236 2.25127,2.453312 v 7.619696 h 3.95416 V 76.49917 c 0,-2.943974 -1.99151,-4.820035 -4.99321,-4.820035 -1.76061,0 -2.91511,0.634974 -3.66553,1.529712 h -0.11545 l -0.31749,-1.26995 h -3.55008 v 13.392194 z"),W(fr,"class","st0 svelte-sdid3b"),W(fr,"d","m 173.39054,85.331091 h 3.95416 v -7.446522 c 0,-1.616299 1.03905,-2.626486 2.45331,-2.626486 1.55858,0 2.25128,0.9236 2.25128,2.453312 v 7.619696 h 3.95416 V 76.49917 c 0,-2.943974 -1.99152,-4.820035 -4.99321,-4.820035 -1.76062,0 -2.91512,0.634974 -3.66554,1.529712 h -0.11545 l -0.31749,-1.26995 h -3.55008 v 13.392194 z"),W(vr,"class","st0 svelte-sdid3b"),W(vr,"d","m 193.85404,85.561991 c 4.35824,0 6.6961,-2.915111 6.6961,-6.926997 0,-4.040748 -2.39559,-6.955859 -6.6961,-6.955859 -4.32937,0 -6.69609,2.915111 -6.69609,6.955859 0,4.011886 2.33786,6.926997 6.69609,6.926997 z m 0,-3.463498 c -1.6163,0 -2.68421,-1.03905 -2.68421,-3.463499 0,-2.424449 1.03905,-3.492361 2.68421,-3.492361 1.64516,0 2.68421,1.03905 2.68421,3.492361 0,2.453311 -1.03905,3.463499 -2.68421,3.463499 z"),W(Fr,"class","st0 svelte-sdid3b"),W(Fr,"d","m 204.7352,85.331091 h 5.05094 l 4.21392,-13.190156 v -0.259763 h -4.01189 l -2.65535,9.697796 h -0.11545 l -2.71307,-9.697796 h -4.06961 v 0.259763 z"),W(qr,"class","st0 svelte-sdid3b"),W(qr,"d","m 218.58919,85.561991 c 1.67403,0 2.85739,-0.57725 3.60781,-1.443124 h 0.11545 l 0.28863,1.212224 h 3.55009 V 76.49917 c 0,-2.799661 -2.22242,-4.820035 -5.88795,-4.820035 -3.95416,0 -5.7725,2.164686 -5.7725,4.675723 h 3.6944 c 0,-0.80815 0.72156,-1.50085 1.96265,-1.50085 1.47198,0 2.04923,0.721562 2.04923,1.645162 v 0.721562 h -2.88624 c -3.6944,0 -5.39729,1.645162 -5.39729,4.127336 -0.0289,2.395586 1.64516,4.213923 4.67572,4.213923 z m 0.98133,-3.088286 c -1.18336,0 -1.78948,-0.57725 -1.78948,-1.327675 0,-0.721562 0.57725,-1.269949 1.81834,-1.269949 h 2.5399 v 0.57725 c 0,1.067912 -0.9236,2.020374 -2.56876,2.020374 z"),W($r,"class","st0 svelte-sdid3b"),W($r,"d","m 233.82859,85.331091 h 2.71307 v -3.434636 h -1.52971 c -1.18336,0 -1.73175,-0.548387 -1.73175,-1.789474 v -4.820035 h 3.20374 v -3.376911 h -3.20374 v -3.521224 h -3.78099 v 3.521224 h -2.36672 v 3.376911 h 2.19355 v 5.772497 c 0,2.424449 1.3854,4.271648 4.50255,4.271648 z"),W(Nn,"class","st0 svelte-sdid3b"),W(Nn,"d","m 238.33113,70.293735 h 4.21393 V 66.28185 h -4.21393 z m 0.11545,15.037356 h 3.95417 V 71.910035 h -3.95417 z"),W(ia,"class","st0 svelte-sdid3b"),W(ia,"d","m 250.2802,85.561991 c 4.35824,0 6.6961,-2.915111 6.6961,-6.926997 0,-4.040748 -2.39559,-6.955859 -6.6961,-6.955859 -4.32937,0 -6.69609,2.915111 -6.69609,6.955859 0,4.011886 2.33786,6.926997 6.69609,6.926997 z m 0,-3.463498 c -1.61629,0 -2.68421,-1.03905 -2.68421,-3.463499 0,-2.424449 1.03905,-3.492361 2.68421,-3.492361 1.64517,0 2.68422,1.03905 2.68422,3.492361 0,2.453311 -1.03905,3.463499 -2.68422,3.463499 z"),W(Pn,"class","st0 svelte-sdid3b"),W(Pn,"d","m 258.39056,85.331091 h 3.95416 v -7.446522 c 0,-1.616299 1.03905,-2.626486 2.45332,-2.626486 1.55857,0 2.25127,0.9236 2.25127,2.453312 v 7.619696 h 3.95416 V 76.49917 c 0,-2.943974 -1.99151,-4.820035 -4.99321,-4.820035 -1.76061,0 -2.91511,0.634974 -3.66554,1.529712 h -0.0866 l -0.31749,-1.26995 h -3.55009 z"),W(Wn,"class","st0 svelte-sdid3b"),W(Wn,"d","m 158.64181,109.80648 c 5.39728,0 7.50424,-2.309 7.50424,-5.51273 0,-3.52123 -2.53989,-4.877765 -5.88794,-5.570465 L 157.8048,98.20376 c -1.67403,-0.34635 -2.02038,-0.981324 -2.02038,-1.674024 0,-0.750425 0.72156,-1.558574 2.82853,-1.558574 2.13582,0 3.03056,1.067912 3.14601,2.251274 h 4.09847 c -0.0289,-3.434636 -3.05942,-5.859085 -7.1579,-5.859085 -4.24278,0 -7.01358,2.135824 -7.01358,5.166385 0,3.434636 2.45331,4.733444 5.5416,5.397284 l 2.62648,0.57725 c 1.58744,0.34635 2.19355,0.9236 2.19355,1.90492 0,1.06792 -0.89474,1.8472 -3.37691,1.8472 -1.96265,0 -3.31919,-0.86587 -3.49236,-2.82852 h -4.09847 c 0.2309,3.86757 2.7708,6.37861 7.56197,6.37861 z"),W(aa,"class","st0 svelte-sdid3b"),W(aa,"d","m 173.47713,109.57558 h 2.71307 v -3.43464 h -1.52971 c -1.18336,0 -1.73175,-0.54838 -1.73175,-1.78947 v -4.820035 h 3.20374 v -3.376911 h -3.20374 V 92.6333 h -3.78099 v 3.521224 h -2.36672 v 3.376911 h 2.19355 v 5.772495 c 0,2.42445 1.3854,4.27165 4.50255,4.27165 z"),W(Un,"class","st0 svelte-sdid3b"),W(Un,"d","m 178.12399,109.57558 h 3.6944 v -6.63837 c 0,-2.16469 1.21222,-3.405775 3.08828,-3.405775 h 1.29881 v -3.607811 h -0.9236 c -1.73175,0 -2.85738,1.010187 -3.43463,2.193549 h -0.11545 l -0.31749,-1.962649 h -3.29032 z"),W(Jn,"class","st0 svelte-sdid3b"),W(Jn,"d","m 191.25642,109.80648 c 1.67402,0 2.85738,-0.57725 3.60781,-1.44312 h 0.11545 l 0.28862,1.21222 h 3.55009 v -8.83192 c 0,-2.799662 -2.22241,-4.820036 -5.88795,-4.820036 -3.95416,0 -5.77249,2.164686 -5.77249,4.675726 h 3.69439 c 0,-0.808153 0.72157,-1.500853 1.96265,-1.500853 1.47199,0 2.04924,0.721563 2.04924,1.645163 v 0.72156 h -2.88625 c -3.6944,0 -5.39728,1.64516 -5.39728,4.12734 -0.0289,2.39558 1.64516,4.21392 4.67572,4.21392 z m 1.01019,-3.08829 c -1.18337,0 -1.78948,-0.57725 -1.78948,-1.32767 0,-0.72156 0.57725,-1.29881 1.81834,-1.29881 h 2.5399 v 0.57725 c 0,1.09677 -0.95247,2.04923 -2.56876,2.04923 z"),W(Ia,"class","st0 svelte-sdid3b"),W(Ia,"d","m 206.49581,109.57558 h 2.71308 v -3.43464 h -1.52972 c -1.18336,0 -1.73175,-0.54838 -1.73175,-1.78947 v -4.820035 h 3.20374 v -3.376911 h -3.20374 V 92.6333 h -3.78098 v 3.521224 h -2.36673 v 3.376911 h 2.19355 v 5.772495 c 0,2.42445 1.3854,4.27165 4.50255,4.27165 z"),W(ti,"class","st0 svelte-sdid3b"),W(ti,"d","m 217.14607,109.80648 c 3.66554,0 5.80136,-2.13582 6.17657,-4.56027 h -3.83871 c -0.2309,0.60611 -0.86587,1.32767 -2.33786,1.32767 -1.78947,0 -2.59762,-1.09677 -2.62649,-2.68421 h 8.97624 v -1.47199 c 0,-3.63667 -2.309,-6.551781 -6.40748,-6.551781 -4.35823,0 -6.58064,3.146011 -6.58064,6.955861 0,3.89643 2.39558,6.98472 6.63837,6.98472 z m -2.59762,-8.37012 c 0.0866,-1.26995 0.80815,-2.280138 2.51103,-2.280138 1.55858,0 2.309,1.010188 2.39559,2.280138 z"),W(ya,"class","st0 svelte-sdid3b"),W(ya,"d","m 230.7403,115.69443 c 3.75212,0 6.58065,-2.10696 6.58065,-5.48388 V 96.125661 h -3.55009 l -0.40407,1.298812 h -0.11545 c -0.63498,-0.779287 -1.67403,-1.529712 -3.57895,-1.529712 -3.37691,0 -5.45501,2.915111 -5.45501,6.955859 0,4.01189 2.04924,6.927 5.45501,6.927 1.90492,0 2.91511,-0.75043 3.57895,-1.52971 h 0.11545 v 1.87606 c 0,1.21222 -0.86588,2.13582 -2.62649,2.13582 -1.24109,0 -2.13582,-0.66384 -2.22241,-1.55857 h -3.86757 c 0.0577,3.05942 2.48217,4.99321 6.08998,4.99321 z m 0.17318,-9.35145 c -1.99152,0 -2.65535,-1.58744 -2.65535,-3.4635 0,-1.87606 0.6927,-3.492358 2.65535,-3.492358 1.96264,0 2.65534,1.616298 2.65534,3.492358 0,1.87606 -0.66383,3.4635 -2.65534,3.4635 z"),W(Xa,"class","st0 svelte-sdid3b"),W(Xa,"d","m 238.99497,94.538224 h 4.21392 v -4.011885 h -4.21392 z m 0.14431,15.037356 h 3.95417 V 96.154524 h -3.95417 z"),W(na,"class","st0 svelte-sdid3b"),W(na,"d","m 250.91518,109.80648 c 3.66553,0 5.80136,-2.13582 6.17657,-4.56027 h -3.83871 c -0.2309,0.60611 -0.86587,1.32767 -2.33786,1.32767 -1.78948,0 -2.59762,-1.09677 -2.62649,-2.68421 h 8.97624 v -1.47199 c 0,-3.63667 -2.309,-6.551781 -6.40748,-6.551781 -4.35823,0 -6.58064,3.146011 -6.58064,6.955861 -0.0289,3.89643 2.39558,6.98472 6.63837,6.98472 z m -2.59762,-8.37012 c 0.0866,-1.26995 0.80814,-2.280138 2.51103,-2.280138 1.55858,0 2.309,1.010188 2.39559,2.280138 z"),W(_i,"class","st0 svelte-sdid3b"),W(_i,"d","m 263.96102,109.80648 c 3.40578,0 5.88795,-1.52971 5.88795,-4.30051 0,-2.82852 -1.93379,-3.78099 -3.98302,-4.1562 l -2.56876,-0.49066 c -0.63498,-0.11545 -1.01019,-0.40408 -1.01019,-0.923601 0,-0.519524 0.57725,-0.923599 1.55857,-0.923599 1.32768,0 1.78948,0.779287 1.76061,1.3854 h 3.89644 c 0,-2.482175 -2.10696,-4.502549 -5.59932,-4.502549 -3.60781,0 -5.51274,1.789475 -5.51274,3.983024 0,2.684215 1.96265,3.809845 4.09848,4.213925 l 1.99151,0.37521 c 0.9236,0.17317 1.35653,0.4618 1.35653,1.03905 0,0.4618 -0.49066,0.98132 -1.90492,0.98132 -1.41426,0 -1.99151,-0.75042 -1.99151,-1.50085 h -3.95416 c 0.0866,2.79967 1.78947,4.82004 5.97453,4.82004 z"),W(_a,"class","st0 svelte-sdid3b"),W(_a,"d","m 278.44999,109.57558 h 4.06961 V 91.594251 h -4.06961 z"),W(Fa,"class","st0 svelte-sdid3b"),W(Fa,"d","m 285.08836,109.57558 h 3.95416 v -7.44652 c 0,-1.6163 1.03905,-2.626488 2.45332,-2.626488 1.55857,0 2.25127,0.923598 2.25127,2.453308 v 7.6197 h 3.95416 v -8.83192 c 0,-2.943975 -1.99151,-4.820036 -4.99321,-4.820036 -1.76061,0 -2.91511,0.634975 -3.66554,1.529712 h -0.11545 l -0.31748,-1.298812 h -3.55009 v 13.421056 z"),W(ki,"class","st0 svelte-sdid3b"),W(ki,"d","m 305.60959,109.80648 c 3.89644,0 5.94567,-2.42445 6.11885,-5.51273 h -3.98302 c -0.11545,1.18336 -0.95247,2.04923 -2.22242,2.04923 -1.67402,0 -2.62648,-1.03905 -2.62648,-3.49236 0,-2.42445 0.95246,-3.463498 2.62648,-3.463498 1.29882,0 2.10697,0.865878 2.22242,2.049238 h 3.98302 c -0.17318,-3.11715 -2.22241,-5.512736 -6.20544,-5.512736 -4.30051,0 -6.63837,2.886248 -6.63837,6.926996 -0.0289,4.06961 2.42445,6.95586 6.72496,6.95586 z"),W(vi,"class","st0 svelte-sdid3b"),W(vi,"d","m 312.85408,109.57558 h 4.21392 v -4.01189 h -4.21392 z"),W(Qe,"class","text-group svelte-sdid3b"),W(Qe,"fill",xi=at[2]?"#fbf8e9":"#16343e"),W(Qe,"opacity","1.0"),W(Qe,"transform","scale(0.75, 0.76) translate(9, 12)")},m(li,Ca){Q(li,Qe,Ca),ie(Qe,gt),ie(Qe,ct),ie(Qe,yt),ie(Qe,Ct),ie(Qe,Ut),ie(Qe,tr),ie(Qe,ar),ie(Qe,fr),ie(Qe,vr),ie(Qe,Fr),ie(Qe,qr),ie(Qe,$r),ie(Qe,Nn),ie(Qe,ia),ie(Qe,Pn),ie(Qe,Wn),ie(Qe,aa),ie(Qe,Un),ie(Qe,Jn),ie(Qe,Ia),ie(Qe,ti),ie(Qe,ya),ie(Qe,Xa),ie(Qe,na),ie(Qe,_i),ie(Qe,_a),ie(Qe,Fa),ie(Qe,ki),ie(Qe,vi),Bi=!0},p(li,Ca){at=li,(!Bi||Ca&4&&xi!==(xi=at[2]?"#fbf8e9":"#16343e"))&&W(Qe,"fill",xi)},i(li){Bi||(lt(()=>{wi&&wi.end(1),Zn||(Zn=Ft(Qe,Gr,{duration:$s})),Zn.start()}),Bi=!0)},o(li){Zn&&Zn.invalidate(),wi=nr(Qe,Gr,{duration:$s}),Bi=!1},d(li){li&&V(Qe),li&&wi&&wi.end()}}}function Lu(at){let Qe,gt,ct,yt,Ct,Ut,tr;return{c(){Qe=ee("g"),gt=ee("path"),yt=ee("path"),this.h()},l(ar){Qe=me(ar,"g",{opacity:!0,transform:!0,class:!0},1);var fr=ue(Qe);gt=me(fr,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(gt).forEach(V),yt=me(fr,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(yt).forEach(V),fr.forEach(V),this.h()},h(){W(gt,"fill","none"),W(gt,"style",ct=(at[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",jn),W(gt,"class","svelte-sdid3b"),W(yt,"fill","none"),W(yt,"style",Ct=(at[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(yt,"d",Bn),W(yt,"class","svelte-sdid3b"),W(Qe,"opacity","0.75"),W(Qe,"transform","scale(0.75, 0.76) translate(9, 12)"),W(Qe,"class","svelte-sdid3b")},m(ar,fr){Q(ar,Qe,fr),ie(Qe,gt),ie(Qe,yt),tr=!0},p(ar,fr){at=ar,(!tr||fr&4&&ct!==(ct=(at[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",ct),(!tr||fr&4&&Ct!==(Ct=(at[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(yt,"style",Ct)},i(ar){tr||(Ut&&Ut.end(1),tr=!0)},o(ar){Ut=nr(Qe,Gr,{duration:$s}),tr=!1},d(ar){ar&&V(Qe),ar&&Ut&&Ut.end()}}}function ml(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr;return{c(){Qe=ee("g"),gt=ee("path"),Ct=ee("path"),this.h()},l(vr){Qe=me(vr,"g",{opacity:!0,transform:!0,class:!0},1);var Fr=ue(Qe);gt=me(Fr,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(V),Ct=me(Fr,"path",{style:!0,d:!0,class:!0},1),ue(Ct).forEach(V),Fr.forEach(V),this.h()},h(){W(gt,"style",ct=(at[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",jn),W(gt,"class","svelte-sdid3b"),W(Ct,"style",Ut=(at[2]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"),W(Ct,"d",Bn),W(Ct,"class","svelte-sdid3b"),W(Qe,"opacity","0.5"),W(Qe,"transform","scale(0.75, 0.76) translate(9, 12)"),W(Qe,"class","svelte-sdid3b")},m(vr,Fr){Q(vr,Qe,Fr),ie(Qe,gt),ie(Qe,Ct),fr=!0},p(vr,Fr){at=vr,(!fr||Fr&4&&ct!==(ct=(at[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",ct),(!fr||Fr&4&&Ut!==(Ut=(at[2]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"))&&W(Ct,"style",Ut)},i(vr){fr||(yt||lt(()=>{yt=Ft(gt,Mn,{duration:$s,delay:eo,easing:_r}),yt.start()}),tr||lt(()=>{tr=Ft(Ct,Or,{duration:eo}),tr.start()}),ar&&ar.end(1),fr=!0)},o(vr){ar=nr(Qe,Gr,{duration:$s}),fr=!1},d(vr){vr&&V(Qe),vr&&ar&&ar.end()}}}function cl(at){let Qe,gt=at[6].innerHTML+"",ct;return{c(){ct=de(),this.h()},l(yt){ct=de(),this.h()},h(){Qe=new tt(ct)},m(yt,Ct){Qe.m(gt,yt,Ct),Q(yt,ct,Ct)},p:R,i:R,o:R,d(yt){yt&&V(ct),yt&&Qe.d()}}}function Hu(at){let Qe;const gt=at[9].default,ct=G(gt,at,at[8],null);return{c(){ct&&ct.c()},l(yt){ct&&ct.l(yt)},m(yt,Ct){ct&&ct.m(yt,Ct),Qe=!0},p(yt,Ct){ct&&ct.p&&Ct&256&&I(ct,gt,yt,yt[8],Ct,null,null)},i(yt){Qe||(Je(ct,yt),Qe=!0)},o(yt){st(ct,yt),Qe=!1},d(yt){ct&&ct.d(yt)}}}function Pu(at){let Qe,gt=at[14].elm().innerHTML+"",ct;return{c(){ct=de(),this.h()},l(yt){ct=de(),this.h()},h(){Qe=new tt(ct)},m(yt,Ct){Qe.m(gt,yt,Ct),Q(yt,ct,Ct)},p(yt,Ct){Ct&2&&gt!==(gt=yt[14].elm().innerHTML+"")&&Qe.p(gt)},d(yt){yt&&V(ct),yt&&Qe.d()}}}function ql(at){let Qe,gt=at[14].label+"",ct,yt,Ct,Ut,tr,ar,fr,vr;return{c(){Qe=re("a"),ct=ae(gt),Ct=fe(),Ut=re("button"),tr=re("span"),ar=ae("Show submenu for “About”"),this.h()},l(Fr){Qe=me(Fr,"A",{href:!0,role:!0,class:!0});var qr=ue(Qe);ct=be(qr,gt),qr.forEach(V),Ct=ke(Fr),Ut=me(Fr,"BUTTON",{class:!0,"aria-haspopup":!0});var $r=ue(Ut);tr=me($r,"SPAN",{class:!0});var Nn=ue(tr);ar=be(Nn,"Show submenu for “About”"),Nn.forEach(V),$r.forEach(V),this.h()},h(){W(Qe,"href",yt=at[14].link),W(Qe,"role","menuitem"),W(Qe,"class"," top-level-nav-link svelte-sdid3b"),W(tr,"class","screen-reader-text svelte-sdid3b"),W(Ut,"class","sr-dropdown-button has-dropdown-trigger-indictator dropdown-trigger hover-target svelte-sdid3b"),W(Ut,"aria-haspopup","true")},m(Fr,qr){Q(Fr,Qe,qr),ie(Qe,ct),Q(Fr,Ct,qr),Q(Fr,Ut,qr),ie(Ut,tr),ie(tr,ar),fr||(vr=pe(Qe,"click",at[10]),fr=!0)},p(Fr,qr){qr&2&&gt!==(gt=Fr[14].label+"")&&Pe(ct,gt),qr&2&&yt!==(yt=Fr[14].link)&&W(Qe,"href",yt)},d(Fr){Fr&&V(Qe),Fr&&V(Ct),Fr&&V(Ut),fr=!1,vr()}}}function yl(at){let Qe,gt;function ct(Ut,tr){return Ut[14].link=="#about/"?ql:Pu}let yt=ct(at),Ct=yt(at);return{c(){Qe=re("li"),Ct.c(),gt=fe(),this.h()},l(Ut){Qe=me(Ut,"LI",{id:!0,class:!0,"aria-haspopup":!0});var tr=ue(Qe);Ct.l(tr),gt=ke(tr),tr.forEach(V),this.h()},h(){W(Qe,"id","menu-item-12"),W(Qe,"class","menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-12 col-auto top-level-menu-item svelte-sdid3b"),W(Qe,"aria-haspopup","true")},m(Ut,tr){Q(Ut,Qe,tr),Ct.m(Qe,null),ie(Qe,gt)},p(Ut,tr){yt===(yt=ct(Ut))&&Ct?Ct.p(Ut,tr):(Ct.d(1),Ct=yt(Ut),Ct&&(Ct.c(),Ct.m(Qe,gt)))},d(Ut){Ut&&V(Qe),Ct.d()}}}function pc(at){let Qe,gt,ct,yt,Ct,Ut,tr,ar,fr,vr,Fr,qr,$r,Nn,ia,Pn,Wn,aa,Un,Jn,Ia,ti,ya,Xa,na,_i,_a,Fa,ki,vi,xi,Zn,wi,Bi,li,Ca,to,ro,Lo,Oo,Ji,Zi,_o,as,vs,Js,xo,ni,ui,Po,no,Ao,Qo,Gi,Ya=!!at[4]&&Ql(at);const is=[Hu,cl],Ea=[];function Ga(Qn,za){return Qn[0]==null?0:1}qr=Ga(at),$r=Ea[qr]=is[qr](at);let Li=at[1],Mi=[];for(let Qn=0;Qn<Li.length;Qn+=1)Mi[Qn]=yl(du(at,Li,Qn));return{c(){Qe=re("header"),gt=re("div"),ct=re("div"),yt=re("div"),Ct=re("div"),Ut=ee("svg"),tr=ee("path"),fr=fe(),Ya&&Ya.c(),vr=fe(),Fr=re("nav"),$r.c(),Nn=fe(),ia=re("ul");for(let Qn=0;Qn<Mi.length;Qn+=1)Mi[Qn].c();Pn=fe(),Wn=re("div"),aa=re("a"),Un=re("span"),Jn=re("span"),Ia=re("span"),ti=ae("Site Menu"),ya=fe(),Xa=re("span"),na=re("span"),_i=ae("Close Menu"),_a=fe(),Fa=re("span"),ki=re("span"),vi=re("span"),xi=ee("svg"),Zn=ee("g"),wi=ee("rect"),Bi=ee("rect"),li=ee("rect"),to=ee("defs"),ro=ee("clipPath"),Lo=ee("path"),Oo=fe(),Ji=re("span"),Zi=ee("svg"),_o=ee("path"),Po=fe(),no=re("br"),Ao=fe(),Qo=re("br"),this.h()},l(Qn){Qe=me(Qn,"HEADER",{id:!0,class:!0,style:!0});var za=ue(Qe);gt=me(za,"DIV",{class:!0});var Si=ue(gt);ct=me(Si,"DIV",{class:!0});var Vi=ue(ct);yt=me(Vi,"DIV",{class:!0,style:!0});var uo=ue(yt);Ct=me(uo,"DIV",{class:!0});var Ei=ue(Ct);Ut=me(Ei,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,style:!0},1);var Qi=ue(Ut);tr=me(Qi,"path",{class:!0,fill:!0,d:!0},1),ue(tr).forEach(V),Qi.forEach(V),fr=ke(Ei),Ya&&Ya.l(Ei),Ei.forEach(V),vr=ke(uo),Fr=me(uo,"NAV",{class:!0,"data-itemcount":!0,"data-textlength":!0,role:!0,"aria-label":!0});var qo=ue(Fr);$r.l(qo),Nn=ke(qo),ia=me(qo,"UL",{id:!0,class:!0});var ks=ue(ia);for(let zs=0;zs<Mi.length;zs+=1)Mi[zs].l(ks);ks.forEach(V),qo.forEach(V),Pn=ke(uo),Wn=me(uo,"DIV",{class:!0});var or=ue(Wn);aa=me(or,"A",{href:!0,class:!0,role:!0,labelledby:!0});var Fo=ue(aa);Un=me(Fo,"SPAN",{id:!0,class:!0});var fo=ue(Un);Jn=me(fo,"SPAN",{class:!0});var Di=ue(Jn);Ia=me(Di,"SPAN",{class:!0});var mi=ue(Ia);ti=be(mi,"Site Menu"),mi.forEach(V),Di.forEach(V),ya=ke(fo),Xa=me(fo,"SPAN",{class:!0,"aria-hidden":!0});var Is=ue(Xa);na=me(Is,"SPAN",{class:!0});var _l=ue(na);_i=be(_l,"Close Menu"),_l.forEach(V),Is.forEach(V),fo.forEach(V),_a=ke(Fo),Fa=me(Fo,"SPAN",{class:!0,"aria-hidden":!0});var dl=ue(Fa);ki=me(dl,"SPAN",{class:!0});var No=ue(ki);vi=me(No,"SPAN",{class:!0,"aria-hidden":!0});var wl=ue(vi);xi=me(wl,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var Qs=ue(xi);Zn=me(Qs,"g",{"clip-path":!0,fill:!0,class:!0},1);var Vo=ue(Zn);wi=me(Vo,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(wi).forEach(V),Bi=me(Vo,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(Bi).forEach(V),li=me(Vo,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(li).forEach(V),Vo.forEach(V),to=me(Qs,"defs",{class:!0},1);var Tl=ue(to);ro=me(Tl,"clipPath",{id:!0,class:!0},1);var Hl=ue(ro);Lo=me(Hl,"path",{fill:!0,transform:!0,d:!0,class:!0},1),ue(Lo).forEach(V),Hl.forEach(V),Tl.forEach(V),Qs.forEach(V),wl.forEach(V),Oo=ke(No),Ji=me(No,"SPAN",{class:!0,"aria-hidden":!0});var So=ue(Ji);Zi=me(So,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var ms=ue(Zi);_o=me(ms,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0},1),ue(_o).forEach(V),ms.forEach(V),So.forEach(V),No.forEach(V),dl.forEach(V),Fo.forEach(V),or.forEach(V),uo.forEach(V),Vi.forEach(V),Si.forEach(V),za.forEach(V),Po=ke(Qn),no=me(Qn,"BR",{class:!0}),Ao=ke(Qn),Qo=me(Qn,"BR",{class:!0}),this.h()},h(){W(tr,"class","border svelte-sdid3b"),W(tr,"fill",ar=at[2]?"#26535c":"#fbf8e9"),W(tr,"d","M115.084 31.849L61.916.809a5.66 5.66 0 00-5.832 0L2.916 31.85C1.118 32.927 0 34.839 0 36.949v62.127c0 2.109 1.118 4.021 2.916 5.1l53.168 31.039c.923.54 1.895.785 2.916.785 1.02 0 2.041-.245 2.916-.785l53.168-31.039c1.798-1.03 2.916-2.991 2.916-5.1V36.948c0-2.108-1.118-4.02-2.916-5.1z"),W(Ut,"class","logo-border svelte-sdid3b"),W(Ut,"xmlns","http://www.w3.org/2000/svg"),W(Ut,"width","308"),W(Ut,"height","136"),W(Ut,"viewBox","0 0 308 136"),W(Ut,"fill","none"),je(Ut,"background-color","transparent"),W(Ct,"class","site-header__item site-header__main-logo col-auto svelte-sdid3b"),W(ia,"id","primary-navigation"),W(ia,"class","row menu justify-content-start site-header__item_inner has-dropdowns has-aria-dropdowns svelte-sdid3b"),W(Fr,"class","site-header__item site-header__menu-section col-auto site-header__primary-menu  over-four-items over-fourty-characters svelte-sdid3b"),W(Fr,"data-itemcount","5"),W(Fr,"data-textlength","42"),W(Fr,"role","navigation"),W(Fr,"aria-label","Primary Navigation"),W(Ia,"class","screen-reader-text svelte-sdid3b"),W(Jn,"class","hamburger-control__open-label svelte-sdid3b"),W(na,"class","screen-reader-text svelte-sdid3b"),W(Xa,"class","hamburger-control__close-label svelte-sdid3b"),W(Xa,"aria-hidden","true"),W(Un,"id","mm-label"),W(Un,"class","hamburger-control__label svelte-sdid3b"),W(wi,"y",".5"),W(wi,"width","20"),W(wi,"height","3"),W(wi,"rx","1.5"),W(wi,"class","svelte-sdid3b"),W(Bi,"y","7.5"),W(Bi,"width","20"),W(Bi,"height","3"),W(Bi,"rx","1.5"),W(Bi,"class","svelte-sdid3b"),W(li,"y","14.5"),W(li,"width","20"),W(li,"height","3"),W(li,"rx","1.5"),W(li,"class","svelte-sdid3b"),W(Zn,"clip-path","url(#clip0)"),W(Zn,"fill",Ca=at[2]?"#fbf8e9":"#16343e"),W(Zn,"class","svelte-sdid3b"),W(Lo,"fill","#fff"),W(Lo,"transform","translate(0 .5)"),W(Lo,"d","M0 0h20v17H0z"),W(Lo,"class","svelte-sdid3b"),W(ro,"id","clip0"),W(ro,"class","svelte-sdid3b"),W(to,"class","svelte-sdid3b"),W(xi,"class","menu svelte-sdid3b"),W(xi,"width","20"),W(xi,"height","18"),W(xi,"viewBox","0 0 20 18"),W(xi,"fill","none"),W(xi,"xmlns","http://www.w3.org/2000/svg"),W(vi,"class","hamburger-control__open svelte-sdid3b"),W(vi,"aria-hidden","true"),W(_o,"d","M3.304 20.801L11 13.104l7.698 7.697c.296.297.671.449 1.052.449.38 0 .756-.152 1.052-.449a1.459 1.459 0 000-2.104L13.104 11 20.8 3.303a1.459 1.459 0 000-2.104 1.46 1.46 0 00-2.104 0h0L11 8.898 3.301 1.2a1.46 1.46 0 00-2.103 0h0a1.46 1.46 0 000 2.104L8.834 11 1.2 18.697s0 0 0 0a1.458 1.458 0 00-.012 2.092c.255.326.713.461 1.064.461.38 0 .756-.152 1.052-.449h0z"),W(_o,"fill",as=at[2]?"#fbf8e9":"#16343e"),W(_o,"stroke","#16343e"),W(_o,"stroke-width",".5"),W(_o,"class","svelte-sdid3b"),W(Zi,"class","menu-close svelte-sdid3b"),W(Zi,"width","22"),W(Zi,"height","22"),W(Zi,"viewBox","0 0 22 22"),W(Zi,"fill","none"),W(Zi,"xmlns","http://www.w3.org/2000/svg"),W(Ji,"class","hamburger-control__close svelte-sdid3b"),W(Ji,"aria-hidden","true"),W(ki,"class","hamburger-control__inner svelte-sdid3b"),W(Fa,"class",vs=B(at[2]?"Light-on-Dark hamburger-control":"hamburger-control")+" svelte-sdid3b"),W(Fa,"aria-hidden","true"),W(aa,"href","#primary-footer-menu-section"),W(aa,"class","mobile-menu-toggle__control js-mobile-menu-control js-open-main-menu svelte-sdid3b"),W(aa,"role","button"),W(aa,"labelledby","mm-label"),W(Wn,"class","site-header__item mobile-menu-toggle col svelte-sdid3b"),W(yt,"class",Js=B(at[2]?"Light-on-Dark row site-header__row justify-content-between align-items-center":"row site-header__row justify-content-between align-items-center")+" svelte-sdid3b"),je(yt,"width","100%"),W(ct,"class",xo=B(at[2]?"Light-on-Dark container":"container")+" svelte-sdid3b"),W(gt,"class",ni=B(at[2]?"Light-on-Dark site-header__inner":"site-header__inner")+" svelte-sdid3b"),W(Qe,"id","desktop-header"),W(Qe,"class",ui=B(at[2]?"Light-on-Dark site-header":"site-header")+" svelte-sdid3b"),je(Qe,"position","fixed"),je(Qe,"max-width","100%"),je(Qe,"max-height","108px"),je(Qe,"height","75px"),je(Qe,"z-index","1"),W(no,"class","svelte-sdid3b"),W(Qo,"class","svelte-sdid3b")},m(Qn,za){Q(Qn,Qe,za),ie(Qe,gt),ie(gt,ct),ie(ct,yt),ie(yt,Ct),ie(Ct,Ut),ie(Ut,tr),ie(Ct,fr),Ya&&Ya.m(Ct,null),ie(yt,vr),ie(yt,Fr),Ea[qr].m(Fr,null),ie(Fr,Nn),ie(Fr,ia);for(let Si=0;Si<Mi.length;Si+=1)Mi[Si].m(ia,null);ie(yt,Pn),ie(yt,Wn),ie(Wn,aa),ie(aa,Un),ie(Un,Jn),ie(Jn,Ia),ie(Ia,ti),ie(Un,ya),ie(Un,Xa),ie(Xa,na),ie(na,_i),ie(aa,_a),ie(aa,Fa),ie(Fa,ki),ie(ki,vi),ie(vi,xi),ie(xi,Zn),ie(Zn,wi),ie(Zn,Bi),ie(Zn,li),ie(xi,to),ie(to,ro),ie(ro,Lo),ie(ki,Oo),ie(ki,Ji),ie(Ji,Zi),ie(Zi,_o),Q(Qn,Po,za),Q(Qn,no,za),Q(Qn,Ao,za),Q(Qn,Qo,za),Gi=!0},p(Qn,[za]){(!Gi||za&4&&ar!==(ar=Qn[2]?"#26535c":"#fbf8e9"))&&W(tr,"fill",ar),Qn[4]?Ya?(Ya.p(Qn,za),za&16&&Je(Ya,1)):(Ya=Ql(Qn),Ya.c(),Je(Ya,1),Ya.m(Ct,null)):Ya&&(Ge(),st(Ya,1,1,()=>{Ya=null}),ot());let Si=qr;if(qr=Ga(Qn),qr===Si?Ea[qr].p(Qn,za):(Ge(),st(Ea[Si],1,1,()=>{Ea[Si]=null}),ot(),$r=Ea[qr],$r||($r=Ea[qr]=is[qr](Qn),$r.c()),Je($r,1),$r.m(Fr,Nn)),za&10){Li=Qn[1];let Vi;for(Vi=0;Vi<Li.length;Vi+=1){const uo=du(Qn,Li,Vi);Mi[Vi]?Mi[Vi].p(uo,za):(Mi[Vi]=yl(uo),Mi[Vi].c(),Mi[Vi].m(ia,null))}for(;Vi<Mi.length;Vi+=1)Mi[Vi].d(1);Mi.length=Li.length}(!Gi||za&4&&Ca!==(Ca=Qn[2]?"#fbf8e9":"#16343e"))&&W(Zn,"fill",Ca),(!Gi||za&4&&as!==(as=Qn[2]?"#fbf8e9":"#16343e"))&&W(_o,"fill",as),(!Gi||za&4&&vs!==(vs=B(Qn[2]?"Light-on-Dark hamburger-control":"hamburger-control")+" svelte-sdid3b"))&&W(Fa,"class",vs),(!Gi||za&4&&Js!==(Js=B(Qn[2]?"Light-on-Dark row site-header__row justify-content-between align-items-center":"row site-header__row justify-content-between align-items-center")+" svelte-sdid3b"))&&W(yt,"class",Js),(!Gi||za&4&&xo!==(xo=B(Qn[2]?"Light-on-Dark container":"container")+" svelte-sdid3b"))&&W(ct,"class",xo),(!Gi||za&4&&ni!==(ni=B(Qn[2]?"Light-on-Dark site-header__inner":"site-header__inner")+" svelte-sdid3b"))&&W(gt,"class",ni),(!Gi||za&4&&ui!==(ui=B(Qn[2]?"Light-on-Dark site-header":"site-header")+" svelte-sdid3b"))&&W(Qe,"class",ui)},i(Qn){Gi||(Je(Ya),Je($r),Gi=!0)},o(Qn){st(Ya),st($r),Gi=!1},d(Qn){Qn&&V(Qe),Ya&&Ya.d(),Ea[qr].d(),se(Mi,Qn),Qn&&V(Po),Qn&&V(no),Qn&&V(Ao),Qn&&V(Qo)}}}let tc=!1,eo=1500,$s=500;function qc(at,Qe,gt){let{$$slots:ct={},$$scope:yt}=Qe,{light_on_dark:Ct=!1}=Qe,{innerElms:Ut=null}=Qe,{nav_links:tr=[{label:"About",link:"#about/",elm(){const Pn=document.createElement("li");return Pn.className="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-12 col-auto top-level-menu-item",Pn.innerHTML=`
                    <a href="${this.link}" onClick="${Wn=>ar(Wn)}" role="menuitem" class=" top-level-nav-link">${this.label}</a>
`,console.log(`Resulting nav_link (${this.label})`,Pn),Pn},fun(){}}]}=Qe,{sidebarFunction:ar=Pn=>{console.log("showSidebar",Pn),Pn.target.data={action:"show",set:!1,path:"target"in Pn&&"hash"in Pn.target?Pn.target.hash:""},Pn.target.dispatchEvent(new CustomEvent("sidebar",Pn))}}=Qe,{title:fr=""}=Qe,vr=!1,Fr=!1,qr=document.createElement("div");const $r={};let Nn=function(Pn){if(Pn&&!tc&&!Fr)return gt(4,vr=!0),setTimeout(()=>{gt(5,Fr=!0)},eo+$s),!0;if(!vr)return gt(5,Fr=!1),!1};Wt(function(){console.log("light_on_dark",Ct),gt(4,vr=!0),gt(1,tr=tr.map((Pn,Wn,aa)=>(console.log("title:",fr),fr&&Pn.link==="#about/"&&(Pn.label=fr),gt(1,tr[Wn]=Pn,tr),console.log("label:",tr[Wn].label),Pn)))});const ia=Pn=>ar(Pn);return at.$$set=Pn=>{"light_on_dark"in Pn&&gt(2,Ct=Pn.light_on_dark),"innerElms"in Pn&&gt(0,Ut=Pn.innerElms),"nav_links"in Pn&&gt(1,tr=Pn.nav_links),"sidebarFunction"in Pn&&gt(3,ar=Pn.sidebarFunction),"title"in Pn&&gt(7,fr=Pn.title),"$$scope"in Pn&&gt(8,yt=Pn.$$scope)},at.$$.update=()=>{at.$$.dirty&16&&Nn(vr),at.$$.dirty&4097&&function(Wn,aa){if(Ut!=null&&console.log("extractLinkContentFromHTML:",Wn.innerHTML),Ut!=null&&Wn!=null&&Wn.innerHTML){const Un=[...Wn.childNodes];for(const Jn of Un)if(Jn.nodeType===1&&Jn.className.match(/container-fluid/)!==null){const Ia="id"in Jn&&Jn.id?Jn.id:Jn.innerHTML.toString().substring(0,16)+Jn.className+Jn.toString();console.log(Ia,Jn);const ti=[...Jn.childNodes];for(const ya of ti)if(ya.nodeType===1&&ya.className.match(/navbar-nav/)!==null){const Xa="id"in ya&&ya.id?ya.id:ya.innerHTML.toString().substring(0,16)+ya.className+ya.toString(),na=ya;if(console.log(Xa,ya),console.log(`Found ul elm (${Xa}). Remove from inner:`,ya),Jn.removeChild(ya),Xa in $r)console.log("Already processed",Xa);else if(na.children.length>0){console.log("Add ul to nav target:");const _i=[...ya.childNodes];for(const _a of _i)if(_a.nodeType===1){const Fa="id"in _a&&_a.id?_a.id:_a.innerHTML.toString().substring(0,16)+_a.className+_a.toString();_a.children[0].innerHTML?console.log(`Found link elm (${Fa}). Remove from inner:`,_a):(console.log("Found blank link elm. Remove from inner:",_a),ya.removeChild(_a))}aa.append(na),gt(12,$r[Xa]=na,$r)}}}console.log("Resulting target container:",aa)}gt(0,Ut=Wn)}(Ut,qr)},[Ut,tr,Ct,ar,vr,Fr,qr,fr,yt,ct,ia]}class vu extends er{constructor(Qe){super(),pu.getElementById("svelte-sdid3b-style")||zf(),Nt(this,Qe,qc,pc,F,{light_on_dark:2,innerElms:0,nav_links:1,sidebarFunction:3,title:7})}}var Ds={};function mu(){return typeof Shiny<"u"&&typeof Shiny.setInputValue=="function"}function Rl(at,Qe){if(mu())try{Ds[at]||console.log('Shiny input ("'.concat(at,'"):'),Qe),Ds[at]=!0,Shiny.setInputValue(at,Qe,{priority:"event"})}finally{return!0}return!1}function xl(at,Qe){var gt=typeof Symbol<"u"&&at[Symbol.iterator]||at["@@iterator"];if(!gt){if(Array.isArray(at)||(gt=Dl(at))||Qe&&at&&typeof at.length=="number"){gt&&(at=gt);var ct=0,yt=function(){};return{s:yt,n:function(){return ct>=at.length?{done:!0}:{done:!1,value:at[ct++]}},e:function(fr){throw fr},f:yt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ct=!0,Ut=!1,tr;return{s:function(){gt=gt.call(at)},n:function(){var fr=gt.next();return Ct=fr.done,fr},e:function(fr){Ut=!0,tr=fr},f:function(){try{!Ct&&gt.return!=null&&gt.return()}finally{if(Ut)throw tr}}}}function Dl(at,Qe){if(at){if(typeof at=="string")return fl(at,Qe);var gt=Object.prototype.toString.call(at).slice(8,-1);if(gt==="Object"&&at.constructor&&(gt=at.constructor.name),gt==="Map"||gt==="Set")return Array.from(at);if(gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gt))return fl(at,Qe)}}function fl(at,Qe){(Qe==null||Qe>at.length)&&(Qe=at.length);for(var gt=0,ct=new Array(Qe);gt<Qe;gt++)ct[gt]=at[gt];return ct}window.CustomEvent||function(){function at(Qe,gt){gt=gt||{bubbles:!1,cancelable:!1,detail:void 0};var ct=document.createEvent("CustomEvent");return ct.initCustomEvent(Qe,gt.bubbles,gt.cancelable,gt.detail),ct}at.prototype=window.Event.prototype,window.CustomEvent=at}();var hl=59999,eu="apps",As=document.getElementById(eu),Ru=As!==null&&(As.constructor.name==="HTMLElement"||As.constructor.name==="HTMLBodyElement"||As.constructor.name==="HTMLDivElement")?new ta({target:As,props:{attributes:As.attributes,innerElms:function(){var at=document.createElement("div");console.log("Apps pre-mount:",As.innerHTML);var Qe=xl(As.childNodes),gt;try{for(Qe.s();!(gt=Qe.n()).done;){var ct=gt.value;ct.nodeType===1&&at.appendChild(ct)}}catch(yt){Qe.e(yt)}finally{Qe.f()}return As.innerHTML="",at}(),toggle_sidebar_label:"Toggle Developer Sidebar"},hydrate:!0}):{},ps="cori-header",pl=".cori * .header",Du=".cori * .navbar.navbar-default.navbar-static-top",ns=document.getElementById(ps)!==null?function(){var at=(this||window).document.body;console.log(at);var Qe=(this||window).document.getElementById(ps);return console.log(Qe),at.style.maxHeight="348px",at.style.paddingTop=Qe.offsetHeight+"px",Qe.style.top="-"+at.style.paddingTop+"px",Qe}():document.querySelectorAll(pl)!==null&&document.querySelectorAll(pl).length>0?function(){var at=(this||window).document.querySelectorAll(pl)[0];return console.log(at),at}():document.querySelectorAll(Du)!==null&&document.querySelectorAll(Du).length>0?function(){var at=(this||window).document.querySelectorAll(Du)[0];return console.log(at),at}():null,ef=ns!==null&&(ns.constructor.name==="HTMLElement"||ns.constructor.name==="HTMLDivElement")?new uh({target:ns,props:{attributes:ns.attributes,title:function(){var at=ns.attributes;return at!==null&&"title"in at?at.title.value:"getElementsByClassName"in ns&&typeof ns.getElementsByClassName=="function"&&ns.getElementsByClassName("container-fluid").length>0&&"getElementsByClassName"in ns.getElementsByClassName("container-fluid")[0]&&typeof ns.getElementsByClassName("container-fluid")[0].getElementsByClassName=="function"&&ns.getElementsByClassName("container-fluid")[0].getElementsByClassName("navbar-header").length>0?ns.getElementsByClassName("container-fluid")[0].getElementsByClassName("navbar-header")[0].getElementsByClassName("navbar-brand")[0].innerText:""}(),innerElms:function(){var at=document.createElement("div");console.log("CORIHeader pre-mount:",ns.innerHTML);var Qe=xl(ns.childNodes),gt;try{for(Qe.s();!(gt=Qe.n()).done;){var ct=gt.value;ct.nodeType===1&&at.appendChild(ct)}}catch(yt){Qe.e(yt)}finally{Qe.f()}return console.log(at.innerHTML),ns.innerHTML="",at}(),light_on_dark:function(){var at=ns.attributes;return at!==null&&"light_on_dark"in at?!!at.light_on_dark&&at.light_on_dark.value!=="false":ns.getElementsByClassName("container-fluid")!==null}()},hydrate:!0}):{},bl="risi-header",gu=".risi * .header",yu=".risi * .navbar.navbar-default.navbar-static-top",_s=document.getElementById(bl)!==null?function(){var at=(this||window).document.body;console.log(at);var Qe=(this||window).document.getElementById(bl);return console.log(Qe),at.style.maxHeight="348px",at.style.paddingTop=Qe.offsetHeight+"px",Qe.style.top="-"+at.style.paddingTop+"px",Qe}():document.querySelectorAll(gu)!==null&&document.querySelectorAll(gu).length>0?function(){var at=(this||window).document.querySelectorAll(gu)[0];return console.log(at),at}():document.querySelectorAll(yu)!==null&&document.querySelectorAll(yu).length>0?function(){var at=(this||window).document.querySelectorAll(yu)[0];return console.log(at),at}():null,dc=_s!==null&&(_s.constructor.name==="HTMLElement"||_s.constructor.name==="HTMLDivElement")?new vu({target:_s,props:{attributes:_s.attributes,title:function(){var at=_s.attributes;return at!==null&&"title"in at?at.title.value:"getElementsByClassName"in _s&&typeof _s.getElementsByClassName=="function"&&_s.getElementsByClassName("container-fluid").length>0&&"getElementsByClassName"in _s.getElementsByClassName("container-fluid")[0]&&typeof _s.getElementsByClassName("container-fluid")[0].getElementsByClassName=="function"&&_s.getElementsByClassName("container-fluid")[0].getElementsByClassName("navbar-header").length>0?_s.getElementsByClassName("container-fluid")[0].getElementsByClassName("navbar-header")[0].getElementsByClassName("navbar-brand")[0].innerText:""}(),innerElms:function(){var at=document.createElement("div");console.log("RISIHeader pre-mount:",_s.innerHTML);var Qe=xl(_s.childNodes),gt;try{for(Qe.s();!(gt=Qe.n()).done;){var ct=gt.value;ct.nodeType===1&&at.appendChild(ct)}}catch(yt){Qe.e(yt)}finally{Qe.f()}return console.log(at.innerHTML),_s.innerHTML="",at}(),light_on_dark:function(){var at=_s.attributes;return at!==null&&"light_on_dark"in at?!!at.light_on_dark&&at.light_on_dark.value!=="false":_s.getElementsByClassName("container-fluid")!==null}()},hydrate:!0}):{},tu="sidebar",ds=document.getElementById(tu),tf=ds!==null&&(ds.constructor.name==="HTMLElement"||ds.constructor.name==="HTMLDivElement")?new Xt({target:ds,props:{innerElms:function(){var at=document.createElement("div");console.log("Sidebar pre-mount:",ds.innerHTML);var Qe=xl(ds.childNodes),gt;try{for(Qe.s();!(gt=Qe.n()).done;){var ct=gt.value;ct.nodeType===1&&at.appendChild(ct)}}catch(yt){Qe.e(yt)}finally{Qe.f()}return ds.innerHTML="",at}()},hydrate:!0}):{},Of="draw-logo-test",rc=document.getElementsByClassName(Of),Dc=rc!==null&&rc.length>0&&(rc[0].constructor.name==="HTMLElement"||rc[0].constructor.name==="HTMLDivElement")?function(){console.log(rc);var at=rc[0];return new oa({target:at,props:{innerElms:function(){var Qe=document.createElement("div");console.log("Draw logo pre-mount:",at.innerHTML);var gt=xl(at.childNodes),ct;try{for(gt.s();!(ct=gt.n()).done;){var yt=ct.value;yt.nodeType===1&&Qe.appendChild(yt)}}catch(Ct){gt.e(Ct)}finally{gt.f()}return at.innerHTML="",Qe}()},hydrate:!0})}():[];return function(){setTimeout(function(){console.log("Send input to shiny server every ~ "+Math.round(hl/1e3)+" seconds to let it know the client is still active"),setInterval(function(){Rl("wake",Math.random())},hl)},1533)}(),x.default=Ru,x.drawLogoTestApp=Dc,x.headerApp1=ef,x.headerApp2=dc,x.sidebarApp=tf,Object.defineProperty(x,"__esModule",{value:!0}),x})({});var Ys=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function F5(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}var _n={},KA={get exports(){return _n},set exports(x){_n=x}},Yo={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var X_=Object.getOwnPropertySymbols,$A=Object.prototype.hasOwnProperty,JA=Object.prototype.propertyIsEnumerable;function QA(x){if(x==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(x)}function qA(){try{if(!Object.assign)return!1;var x=new String("abc");if(x[5]="de",Object.getOwnPropertyNames(x)[0]==="5")return!1;for(var P={},e=0;e<10;e++)P["_"+String.fromCharCode(e)]=e;var v=Object.getOwnPropertyNames(P).map(function(r){return P[r]});if(v.join("")!=="0123456789")return!1;var M={};return"abcdefghijklmnopqrst".split("").forEach(function(r){M[r]=r}),Object.keys(Object.assign({},M)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var f2=qA()?Object.assign:function(x,P){for(var e,v=QA(x),M,r=1;r<arguments.length;r++){e=Object(arguments[r]);for(var n in e)$A.call(e,n)&&(v[n]=e[n]);if(X_){M=X_(e);for(var l=0;l<M.length;l++)JA.call(e,M[l])&&(v[M[l]]=e[M[l]])}}return v};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h2=f2,T0=60103,N5=60106;Yo.Fragment=60107;Yo.StrictMode=60108;Yo.Profiler=60114;var B5=60109,U5=60110,V5=60112;Yo.Suspense=60113;var H5=60115,j5=60116;if(typeof Symbol=="function"&&Symbol.for){var nh=Symbol.for;T0=nh("react.element"),N5=nh("react.portal"),Yo.Fragment=nh("react.fragment"),Yo.StrictMode=nh("react.strict_mode"),Yo.Profiler=nh("react.profiler"),B5=nh("react.provider"),U5=nh("react.context"),V5=nh("react.forward_ref"),Yo.Suspense=nh("react.suspense"),H5=nh("react.memo"),j5=nh("react.lazy")}var Z_=typeof Symbol=="function"&&Symbol.iterator;function ek(x){return x===null||typeof x!="object"?null:(x=Z_&&x[Z_]||x["@@iterator"],typeof x=="function"?x:null)}function ig(x){for(var P="https://reactjs.org/docs/error-decoder.html?invariant="+x,e=1;e<arguments.length;e++)P+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+x+"; visit "+P+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var G5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W5={};function A0(x,P,e){this.props=x,this.context=P,this.refs=W5,this.updater=e||G5}A0.prototype.isReactComponent={};A0.prototype.setState=function(x,P){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error(ig(85));this.updater.enqueueSetState(this,x,P,"setState")};A0.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function Y5(){}Y5.prototype=A0.prototype;function p2(x,P,e){this.props=x,this.context=P,this.refs=W5,this.updater=e||G5}var d2=p2.prototype=new Y5;d2.constructor=p2;h2(d2,A0.prototype);d2.isPureReactComponent=!0;var v2={current:null},X5=Object.prototype.hasOwnProperty,Z5={key:!0,ref:!0,__self:!0,__source:!0};function K5(x,P,e){var v,M={},r=null,n=null;if(P!=null)for(v in P.ref!==void 0&&(n=P.ref),P.key!==void 0&&(r=""+P.key),P)X5.call(P,v)&&!Z5.hasOwnProperty(v)&&(M[v]=P[v]);var l=arguments.length-2;if(l===1)M.children=e;else if(1<l){for(var c=Array(l),t=0;t<l;t++)c[t]=arguments[t+2];M.children=c}if(x&&x.defaultProps)for(v in l=x.defaultProps,l)M[v]===void 0&&(M[v]=l[v]);return{$$typeof:T0,type:x,key:r,ref:n,props:M,_owner:v2.current}}function tk(x,P){return{$$typeof:T0,type:x.type,key:P,ref:x.ref,props:x.props,_owner:x._owner}}function m2(x){return typeof x=="object"&&x!==null&&x.$$typeof===T0}function rk(x){var P={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(e){return P[e]})}var K_=/\/+/g;function ix(x,P){return typeof x=="object"&&x!==null&&x.key!=null?rk(""+x.key):P.toString(36)}function s1(x,P,e,v,M){var r=typeof x;(r==="undefined"||r==="boolean")&&(x=null);var n=!1;if(x===null)n=!0;else switch(r){case"string":case"number":n=!0;break;case"object":switch(x.$$typeof){case T0:case N5:n=!0}}if(n)return n=x,M=M(n),x=v===""?"."+ix(n,0):v,Array.isArray(M)?(e="",x!=null&&(e=x.replace(K_,"$&/")+"/"),s1(M,P,e,"",function(t){return t})):M!=null&&(m2(M)&&(M=tk(M,e+(!M.key||n&&n.key===M.key?"":(""+M.key).replace(K_,"$&/")+"/")+x)),P.push(M)),1;if(n=0,v=v===""?".":v+":",Array.isArray(x))for(var l=0;l<x.length;l++){r=x[l];var c=v+ix(r,l);n+=s1(r,P,e,c,M)}else if(c=ek(x),typeof c=="function")for(x=c.call(x),l=0;!(r=x.next()).done;)r=r.value,c=v+ix(r,l++),n+=s1(r,P,e,c,M);else if(r==="object")throw P=""+x,Error(ig(31,P==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":P));return n}function Hg(x,P,e){if(x==null)return x;var v=[],M=0;return s1(x,v,"","",function(r){return P.call(e,r,M++)}),v}function nk(x){if(x._status===-1){var P=x._result;P=P(),x._status=0,x._result=P,P.then(function(e){x._status===0&&(e=e.default,x._status=1,x._result=e)},function(e){x._status===0&&(x._status=2,x._result=e)})}if(x._status===1)return x._result;throw x._result}var $5={current:null};function dp(){var x=$5.current;if(x===null)throw Error(ig(321));return x}var ak={ReactCurrentDispatcher:$5,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:v2,IsSomeRendererActing:{current:!1},assign:h2};Yo.Children={map:Hg,forEach:function(x,P,e){Hg(x,function(){P.apply(this,arguments)},e)},count:function(x){var P=0;return Hg(x,function(){P++}),P},toArray:function(x){return Hg(x,function(P){return P})||[]},only:function(x){if(!m2(x))throw Error(ig(143));return x}};Yo.Component=A0;Yo.PureComponent=p2;Yo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ak;Yo.cloneElement=function(x,P,e){if(x==null)throw Error(ig(267,x));var v=h2({},x.props),M=x.key,r=x.ref,n=x._owner;if(P!=null){if(P.ref!==void 0&&(r=P.ref,n=v2.current),P.key!==void 0&&(M=""+P.key),x.type&&x.type.defaultProps)var l=x.type.defaultProps;for(c in P)X5.call(P,c)&&!Z5.hasOwnProperty(c)&&(v[c]=P[c]===void 0&&l!==void 0?l[c]:P[c])}var c=arguments.length-2;if(c===1)v.children=e;else if(1<c){l=Array(c);for(var t=0;t<c;t++)l[t]=arguments[t+2];v.children=l}return{$$typeof:T0,type:x.type,key:M,ref:r,props:v,_owner:n}};Yo.createContext=function(x,P){return P===void 0&&(P=null),x={$$typeof:U5,_calculateChangedBits:P,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider={$$typeof:B5,_context:x},x.Consumer=x};Yo.createElement=K5;Yo.createFactory=function(x){var P=K5.bind(null,x);return P.type=x,P};Yo.createRef=function(){return{current:null}};Yo.forwardRef=function(x){return{$$typeof:V5,render:x}};Yo.isValidElement=m2;Yo.lazy=function(x){return{$$typeof:j5,_payload:{_status:-1,_result:x},_init:nk}};Yo.memo=function(x,P){return{$$typeof:H5,type:x,compare:P===void 0?null:P}};Yo.useCallback=function(x,P){return dp().useCallback(x,P)};Yo.useContext=function(x,P){return dp().useContext(x,P)};Yo.useDebugValue=function(){};Yo.useEffect=function(x,P){return dp().useEffect(x,P)};Yo.useImperativeHandle=function(x,P,e){return dp().useImperativeHandle(x,P,e)};Yo.useLayoutEffect=function(x,P){return dp().useLayoutEffect(x,P)};Yo.useMemo=function(x,P){return dp().useMemo(x,P)};Yo.useReducer=function(x,P,e){return dp().useReducer(x,P,e)};Yo.useRef=function(x){return dp().useRef(x)};Yo.useState=function(x){return dp().useState(x)};Yo.version="17.0.2";(function(x){x.exports=Yo})(KA);const bn=F5(_n),$_=ZA({__proto__:null,default:bn},[_n]);var Kx={},ik={get exports(){return Kx},set exports(x){Kx=x}},Pf={},$x={},ok={get exports(){return $x},set exports(x){$x=x}},J5={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(x){var P,e,v,M;if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;x.unstable_now=function(){return r.now()}}else{var n=Date,l=n.now();x.unstable_now=function(){return n.now()-l}}if(typeof window>"u"||typeof MessageChannel!="function"){var c=null,t=null,f=function(){if(c!==null)try{var U=x.unstable_now();c(!0,U),c=null}catch(X){throw setTimeout(f,0),X}};P=function(U){c!==null?setTimeout(P,0,U):(c=U,setTimeout(f,0))},e=function(U,X){t=setTimeout(U,X)},v=function(){clearTimeout(t)},x.unstable_shouldYield=function(){return!1},M=x.unstable_forceFrameRate=function(){}}else{var a=window.setTimeout,o=window.clearTimeout;if(typeof console<"u"){var u=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof u!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var h=!1,i=null,s=-1,p=5,d=0;x.unstable_shouldYield=function(){return x.unstable_now()>=d},M=function(){},x.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):p=0<U?Math.floor(1e3/U):5};var y=new MessageChannel,b=y.port2;y.port1.onmessage=function(){if(i!==null){var U=x.unstable_now();d=U+p;try{i(!0,U)?b.postMessage(null):(h=!1,i=null)}catch(X){throw b.postMessage(null),X}}else h=!1},P=function(U){i=U,h||(h=!0,b.postMessage(null))},e=function(U,X){s=a(function(){U(x.unstable_now())},X)},v=function(){o(s),s=-1}}function m(U,X){var I=U.length;U.push(X);e:for(;;){var B=I-1>>>1,j=U[B];if(j!==void 0&&0<g(j,X))U[B]=X,U[I]=j,I=B;else break e}}function _(U){return U=U[0],U===void 0?null:U}function T(U){var X=U[0];if(X!==void 0){var I=U.pop();if(I!==X){U[0]=I;e:for(var B=0,j=U.length;B<j;){var H=2*(B+1)-1,K=U[H],te=H+1,J=U[te];if(K!==void 0&&0>g(K,I))J!==void 0&&0>g(J,K)?(U[B]=J,U[te]=I,B=te):(U[B]=K,U[H]=I,B=H);else if(J!==void 0&&0>g(J,I))U[B]=J,U[te]=I,B=te;else break e}}return X}return null}function g(U,X){var I=U.sortIndex-X.sortIndex;return I!==0?I:U.id-X.id}var A=[],k=[],R=1,L=null,z=3,E=!1,S=!1,C=!1;function D(U){for(var X=_(k);X!==null;){if(X.callback===null)T(k);else if(X.startTime<=U)T(k),X.sortIndex=X.expirationTime,m(A,X);else break;X=_(k)}}function F(U){if(C=!1,D(U),!S)if(_(A)!==null)S=!0,P(N);else{var X=_(k);X!==null&&e(F,X.startTime-U)}}function N(U,X){S=!1,C&&(C=!1,v()),E=!0;var I=z;try{for(D(X),L=_(A);L!==null&&(!(L.expirationTime>X)||U&&!x.unstable_shouldYield());){var B=L.callback;if(typeof B=="function"){L.callback=null,z=L.priorityLevel;var j=B(L.expirationTime<=X);X=x.unstable_now(),typeof j=="function"?L.callback=j:L===_(A)&&T(A),D(X)}else T(A);L=_(A)}if(L!==null)var H=!0;else{var K=_(k);K!==null&&e(F,K.startTime-X),H=!1}return H}finally{L=null,z=I,E=!1}}var G=M;x.unstable_IdlePriority=5,x.unstable_ImmediatePriority=1,x.unstable_LowPriority=4,x.unstable_NormalPriority=3,x.unstable_Profiling=null,x.unstable_UserBlockingPriority=2,x.unstable_cancelCallback=function(U){U.callback=null},x.unstable_continueExecution=function(){S||E||(S=!0,P(N))},x.unstable_getCurrentPriorityLevel=function(){return z},x.unstable_getFirstCallbackNode=function(){return _(A)},x.unstable_next=function(U){switch(z){case 1:case 2:case 3:var X=3;break;default:X=z}var I=z;z=X;try{return U()}finally{z=I}},x.unstable_pauseExecution=function(){},x.unstable_requestPaint=G,x.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var I=z;z=U;try{return X()}finally{z=I}},x.unstable_scheduleCallback=function(U,X,I){var B=x.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?B+I:B):I=B,U){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=I+j,U={id:R++,callback:X,priorityLevel:U,startTime:I,expirationTime:j,sortIndex:-1},I>B?(U.sortIndex=I,m(k,U),_(A)===null&&U===_(k)&&(C?v():C=!0,e(F,I-B))):(U.sortIndex=j,m(A,U),S||E||(S=!0,P(N))),U},x.unstable_wrapCallback=function(U){var X=z;return function(){var I=z;z=X;try{return U.apply(this,arguments)}finally{z=I}}}})(J5);(function(x){x.exports=J5})(ok);/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ty=_n,ll=f2,ku=$x;function Va(x){for(var P="https://reactjs.org/docs/error-decoder.html?invariant="+x,e=1;e<arguments.length;e++)P+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+x+"; visit "+P+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!ty)throw Error(Va(227));var Q5=new Set,Nm={};function Qd(x,P){m0(x,P),m0(x+"Capture",P)}function m0(x,P){for(Nm[x]=P,x=0;x<P.length;x++)Q5.add(P[x])}var pp=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J_=Object.prototype.hasOwnProperty,Q_={},q_={};function lk(x){return J_.call(q_,x)?!0:J_.call(Q_,x)?!1:sk.test(x)?q_[x]=!0:(Q_[x]=!0,!1)}function uk(x,P,e,v){if(e!==null&&e.type===0)return!1;switch(typeof P){case"function":case"symbol":return!0;case"boolean":return v?!1:e!==null?!e.acceptsBooleans:(x=x.toLowerCase().slice(0,5),x!=="data-"&&x!=="aria-");default:return!1}}function ck(x,P,e,v){if(P===null||typeof P>"u"||uk(x,P,e,v))return!0;if(v)return!1;if(e!==null)switch(e.type){case 3:return!P;case 4:return P===!1;case 5:return isNaN(P);case 6:return isNaN(P)||1>P}return!1}function hc(x,P,e,v,M,r,n){this.acceptsBooleans=P===2||P===3||P===4,this.attributeName=v,this.attributeNamespace=M,this.mustUseProperty=e,this.propertyName=x,this.type=P,this.sanitizeURL=r,this.removeEmptyString=n}var Uu={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(x){Uu[x]=new hc(x,0,!1,x,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(x){var P=x[0];Uu[P]=new hc(P,1,!1,x[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(x){Uu[x]=new hc(x,2,!1,x.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(x){Uu[x]=new hc(x,2,!1,x,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(x){Uu[x]=new hc(x,3,!1,x.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(x){Uu[x]=new hc(x,3,!0,x,null,!1,!1)});["capture","download"].forEach(function(x){Uu[x]=new hc(x,4,!1,x,null,!1,!1)});["cols","rows","size","span"].forEach(function(x){Uu[x]=new hc(x,6,!1,x,null,!1,!1)});["rowSpan","start"].forEach(function(x){Uu[x]=new hc(x,5,!1,x.toLowerCase(),null,!1,!1)});var g2=/[\-:]([a-z])/g;function y2(x){return x[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(x){var P=x.replace(g2,y2);Uu[P]=new hc(P,1,!1,x,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(x){var P=x.replace(g2,y2);Uu[P]=new hc(P,1,!1,x,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(x){var P=x.replace(g2,y2);Uu[P]=new hc(P,1,!1,x,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(x){Uu[x]=new hc(x,1,!1,x.toLowerCase(),null,!1,!1)});Uu.xlinkHref=new hc("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(x){Uu[x]=new hc(x,1,!1,x.toLowerCase(),null,!0,!0)});function x2(x,P,e,v){var M=Uu.hasOwnProperty(P)?Uu[P]:null,r=M!==null?M.type===0:v?!1:!(!(2<P.length)||P[0]!=="o"&&P[0]!=="O"||P[1]!=="n"&&P[1]!=="N");r||(ck(P,e,M,v)&&(e=null),v||M===null?lk(P)&&(e===null?x.removeAttribute(P):x.setAttribute(P,""+e)):M.mustUseProperty?x[M.propertyName]=e===null?M.type===3?!1:"":e:(P=M.attributeName,v=M.attributeNamespace,e===null?x.removeAttribute(P):(M=M.type,e=M===3||M===4&&e===!0?"":""+e,v?x.setAttributeNS(v,P,e):x.setAttribute(P,e))))}var qd=ty.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mm=60103,Ud=60106,Hp=60107,b2=60108,Tm=60114,_2=60109,w2=60110,ry=60112,Am=60113,M1=60120,ny=60115,T2=60116,A2=60121,k2=60128,q5=60129,M2=60130,Jx=60131;if(typeof Symbol=="function"&&Symbol.for){var Au=Symbol.for;mm=Au("react.element"),Ud=Au("react.portal"),Hp=Au("react.fragment"),b2=Au("react.strict_mode"),Tm=Au("react.profiler"),_2=Au("react.provider"),w2=Au("react.context"),ry=Au("react.forward_ref"),Am=Au("react.suspense"),M1=Au("react.suspense_list"),ny=Au("react.memo"),T2=Au("react.lazy"),A2=Au("react.block"),Au("react.scope"),k2=Au("react.opaque.id"),q5=Au("react.debug_trace_mode"),M2=Au("react.offscreen"),Jx=Au("react.legacy_hidden")}var e3=typeof Symbol=="function"&&Symbol.iterator;function Q0(x){return x===null||typeof x!="object"?null:(x=e3&&x[e3]||x["@@iterator"],typeof x=="function"?x:null)}var ox;function gm(x){if(ox===void 0)try{throw Error()}catch(e){var P=e.stack.trim().match(/\n( *(at )?)/);ox=P&&P[1]||""}return`
`+ox+x}var sx=!1;function jg(x,P){if(!x||sx)return"";sx=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(P)if(P=function(){throw Error()},Object.defineProperty(P.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(P,[])}catch(c){var v=c}Reflect.construct(x,[],P)}else{try{P.call()}catch(c){v=c}x.call(P.prototype)}else{try{throw Error()}catch(c){v=c}x()}}catch(c){if(c&&v&&typeof c.stack=="string"){for(var M=c.stack.split(`
`),r=v.stack.split(`
`),n=M.length-1,l=r.length-1;1<=n&&0<=l&&M[n]!==r[l];)l--;for(;1<=n&&0<=l;n--,l--)if(M[n]!==r[l]){if(n!==1||l!==1)do if(n--,l--,0>l||M[n]!==r[l])return`
`+M[n].replace(" at new "," at ");while(1<=n&&0<=l);break}}}finally{sx=!1,Error.prepareStackTrace=e}return(x=x?x.displayName||x.name:"")?gm(x):""}function fk(x){switch(x.tag){case 5:return gm(x.type);case 16:return gm("Lazy");case 13:return gm("Suspense");case 19:return gm("SuspenseList");case 0:case 2:case 15:return x=jg(x.type,!1),x;case 11:return x=jg(x.type.render,!1),x;case 22:return x=jg(x.type._render,!1),x;case 1:return x=jg(x.type,!0),x;default:return""}}function n0(x){if(x==null)return null;if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case Hp:return"Fragment";case Ud:return"Portal";case Tm:return"Profiler";case b2:return"StrictMode";case Am:return"Suspense";case M1:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case w2:return(x.displayName||"Context")+".Consumer";case _2:return(x._context.displayName||"Context")+".Provider";case ry:var P=x.render;return P=P.displayName||P.name||"",x.displayName||(P!==""?"ForwardRef("+P+")":"ForwardRef");case ny:return n0(x.type);case A2:return n0(x._render);case T2:P=x._payload,x=x._init;try{return n0(x(P))}catch{}}return null}function td(x){switch(typeof x){case"boolean":case"number":case"object":case"string":case"undefined":return x;default:return""}}function e4(x){var P=x.type;return(x=x.nodeName)&&x.toLowerCase()==="input"&&(P==="checkbox"||P==="radio")}function hk(x){var P=e4(x)?"checked":"value",e=Object.getOwnPropertyDescriptor(x.constructor.prototype,P),v=""+x[P];if(!x.hasOwnProperty(P)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var M=e.get,r=e.set;return Object.defineProperty(x,P,{configurable:!0,get:function(){return M.call(this)},set:function(n){v=""+n,r.call(this,n)}}),Object.defineProperty(x,P,{enumerable:e.enumerable}),{getValue:function(){return v},setValue:function(n){v=""+n},stopTracking:function(){x._valueTracker=null,delete x[P]}}}}function Gg(x){x._valueTracker||(x._valueTracker=hk(x))}function t4(x){if(!x)return!1;var P=x._valueTracker;if(!P)return!0;var e=P.getValue(),v="";return x&&(v=e4(x)?x.checked?"true":"false":x.value),x=v,x!==e?(P.setValue(x),!0):!1}function S1(x){if(x=x||(typeof document<"u"?document:void 0),typeof x>"u")return null;try{return x.activeElement||x.body}catch{return x.body}}function Qx(x,P){var e=P.checked;return ll({},P,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??x._wrapperState.initialChecked})}function t3(x,P){var e=P.defaultValue==null?"":P.defaultValue,v=P.checked!=null?P.checked:P.defaultChecked;e=td(P.value!=null?P.value:e),x._wrapperState={initialChecked:v,initialValue:e,controlled:P.type==="checkbox"||P.type==="radio"?P.checked!=null:P.value!=null}}function r4(x,P){P=P.checked,P!=null&&x2(x,"checked",P,!1)}function qx(x,P){r4(x,P);var e=td(P.value),v=P.type;if(e!=null)v==="number"?(e===0&&x.value===""||x.value!=e)&&(x.value=""+e):x.value!==""+e&&(x.value=""+e);else if(v==="submit"||v==="reset"){x.removeAttribute("value");return}P.hasOwnProperty("value")?eb(x,P.type,e):P.hasOwnProperty("defaultValue")&&eb(x,P.type,td(P.defaultValue)),P.checked==null&&P.defaultChecked!=null&&(x.defaultChecked=!!P.defaultChecked)}function r3(x,P,e){if(P.hasOwnProperty("value")||P.hasOwnProperty("defaultValue")){var v=P.type;if(!(v!=="submit"&&v!=="reset"||P.value!==void 0&&P.value!==null))return;P=""+x._wrapperState.initialValue,e||P===x.value||(x.value=P),x.defaultValue=P}e=x.name,e!==""&&(x.name=""),x.defaultChecked=!!x._wrapperState.initialChecked,e!==""&&(x.name=e)}function eb(x,P,e){(P!=="number"||S1(x.ownerDocument)!==x)&&(e==null?x.defaultValue=""+x._wrapperState.initialValue:x.defaultValue!==""+e&&(x.defaultValue=""+e))}function pk(x){var P="";return ty.Children.forEach(x,function(e){e!=null&&(P+=e)}),P}function tb(x,P){return x=ll({children:void 0},P),(P=pk(P.children))&&(x.children=P),x}function a0(x,P,e,v){if(x=x.options,P){P={};for(var M=0;M<e.length;M++)P["$"+e[M]]=!0;for(e=0;e<x.length;e++)M=P.hasOwnProperty("$"+x[e].value),x[e].selected!==M&&(x[e].selected=M),M&&v&&(x[e].defaultSelected=!0)}else{for(e=""+td(e),P=null,M=0;M<x.length;M++){if(x[M].value===e){x[M].selected=!0,v&&(x[M].defaultSelected=!0);return}P!==null||x[M].disabled||(P=x[M])}P!==null&&(P.selected=!0)}}function rb(x,P){if(P.dangerouslySetInnerHTML!=null)throw Error(Va(91));return ll({},P,{value:void 0,defaultValue:void 0,children:""+x._wrapperState.initialValue})}function n3(x,P){var e=P.value;if(e==null){if(e=P.children,P=P.defaultValue,e!=null){if(P!=null)throw Error(Va(92));if(Array.isArray(e)){if(!(1>=e.length))throw Error(Va(93));e=e[0]}P=e}P==null&&(P=""),e=P}x._wrapperState={initialValue:td(e)}}function n4(x,P){var e=td(P.value),v=td(P.defaultValue);e!=null&&(e=""+e,e!==x.value&&(x.value=e),P.defaultValue==null&&x.defaultValue!==e&&(x.defaultValue=e)),v!=null&&(x.defaultValue=""+v)}function a3(x){var P=x.textContent;P===x._wrapperState.initialValue&&P!==""&&P!==null&&(x.value=P)}var nb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function a4(x){switch(x){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ab(x,P){return x==null||x==="http://www.w3.org/1999/xhtml"?a4(P):x==="http://www.w3.org/2000/svg"&&P==="foreignObject"?"http://www.w3.org/1999/xhtml":x}var Wg,i4=function(x){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(P,e,v,M){MSApp.execUnsafeLocalFunction(function(){return x(P,e,v,M)})}:x}(function(x,P){if(x.namespaceURI!==nb.svg||"innerHTML"in x)x.innerHTML=P;else{for(Wg=Wg||document.createElement("div"),Wg.innerHTML="<svg>"+P.valueOf().toString()+"</svg>",P=Wg.firstChild;x.firstChild;)x.removeChild(x.firstChild);for(;P.firstChild;)x.appendChild(P.firstChild)}});function Bm(x,P){if(P){var e=x.firstChild;if(e&&e===x.lastChild&&e.nodeType===3){e.nodeValue=P;return}}x.textContent=P}var km={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dk=["Webkit","ms","Moz","O"];Object.keys(km).forEach(function(x){dk.forEach(function(P){P=P+x.charAt(0).toUpperCase()+x.substring(1),km[P]=km[x]})});function o4(x,P,e){return P==null||typeof P=="boolean"||P===""?"":e||typeof P!="number"||P===0||km.hasOwnProperty(x)&&km[x]?(""+P).trim():P+"px"}function s4(x,P){x=x.style;for(var e in P)if(P.hasOwnProperty(e)){var v=e.indexOf("--")===0,M=o4(e,P[e],v);e==="float"&&(e="cssFloat"),v?x.setProperty(e,M):x[e]=M}}var vk=ll({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ib(x,P){if(P){if(vk[x]&&(P.children!=null||P.dangerouslySetInnerHTML!=null))throw Error(Va(137,x));if(P.dangerouslySetInnerHTML!=null){if(P.children!=null)throw Error(Va(60));if(!(typeof P.dangerouslySetInnerHTML=="object"&&"__html"in P.dangerouslySetInnerHTML))throw Error(Va(61))}if(P.style!=null&&typeof P.style!="object")throw Error(Va(62))}}function ob(x,P){if(x.indexOf("-")===-1)return typeof P.is=="string";switch(x){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function S2(x){return x=x.target||x.srcElement||window,x.correspondingUseElement&&(x=x.correspondingUseElement),x.nodeType===3?x.parentNode:x}var sb=null,i0=null,o0=null;function i3(x){if(x=sg(x)){if(typeof sb!="function")throw Error(Va(280));var P=x.stateNode;P&&(P=uy(P),sb(x.stateNode,x.type,P))}}function l4(x){i0?o0?o0.push(x):o0=[x]:i0=x}function u4(){if(i0){var x=i0,P=o0;if(o0=i0=null,i3(x),P)for(x=0;x<P.length;x++)i3(P[x])}}function E2(x,P){return x(P)}function c4(x,P,e,v,M){return x(P,e,v,M)}function C2(){}var f4=E2,Vd=!1,lx=!1;function L2(){(i0!==null||o0!==null)&&(C2(),u4())}function mk(x,P,e){if(lx)return x(P,e);lx=!0;try{return f4(x,P,e)}finally{lx=!1,L2()}}function Um(x,P){var e=x.stateNode;if(e===null)return null;var v=uy(e);if(v===null)return null;e=v[P];e:switch(P){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(x=x.type,v=!(x==="button"||x==="input"||x==="select"||x==="textarea")),x=!v;break e;default:x=!1}if(x)return null;if(e&&typeof e!="function")throw Error(Va(231,P,typeof e));return e}var lb=!1;if(pp)try{var q0={};Object.defineProperty(q0,"passive",{get:function(){lb=!0}}),window.addEventListener("test",q0,q0),window.removeEventListener("test",q0,q0)}catch{lb=!1}function gk(x,P,e,v,M,r,n,l,c){var t=Array.prototype.slice.call(arguments,3);try{P.apply(e,t)}catch(f){this.onError(f)}}var Mm=!1,E1=null,C1=!1,ub=null,yk={onError:function(x){Mm=!0,E1=x}};function xk(x,P,e,v,M,r,n,l,c){Mm=!1,E1=null,gk.apply(yk,arguments)}function bk(x,P,e,v,M,r,n,l,c){if(xk.apply(this,arguments),Mm){if(Mm){var t=E1;Mm=!1,E1=null}else throw Error(Va(198));C1||(C1=!0,ub=t)}}function ev(x){var P=x,e=x;if(x.alternate)for(;P.return;)P=P.return;else{x=P;do P=x,P.flags&1026&&(e=P.return),x=P.return;while(x)}return P.tag===3?e:null}function h4(x){if(x.tag===13){var P=x.memoizedState;if(P===null&&(x=x.alternate,x!==null&&(P=x.memoizedState)),P!==null)return P.dehydrated}return null}function o3(x){if(ev(x)!==x)throw Error(Va(188))}function _k(x){var P=x.alternate;if(!P){if(P=ev(x),P===null)throw Error(Va(188));return P!==x?null:x}for(var e=x,v=P;;){var M=e.return;if(M===null)break;var r=M.alternate;if(r===null){if(v=M.return,v!==null){e=v;continue}break}if(M.child===r.child){for(r=M.child;r;){if(r===e)return o3(M),x;if(r===v)return o3(M),P;r=r.sibling}throw Error(Va(188))}if(e.return!==v.return)e=M,v=r;else{for(var n=!1,l=M.child;l;){if(l===e){n=!0,e=M,v=r;break}if(l===v){n=!0,v=M,e=r;break}l=l.sibling}if(!n){for(l=r.child;l;){if(l===e){n=!0,e=r,v=M;break}if(l===v){n=!0,v=r,e=M;break}l=l.sibling}if(!n)throw Error(Va(189))}}if(e.alternate!==v)throw Error(Va(190))}if(e.tag!==3)throw Error(Va(188));return e.stateNode.current===e?x:P}function p4(x){if(x=_k(x),!x)return null;for(var P=x;;){if(P.tag===5||P.tag===6)return P;if(P.child)P.child.return=P,P=P.child;else{if(P===x)break;for(;!P.sibling;){if(!P.return||P.return===x)return null;P=P.return}P.sibling.return=P.return,P=P.sibling}}return null}function s3(x,P){for(var e=x.alternate;P!==null;){if(P===x||P===e)return!0;P=P.return}return!1}var d4,P2,v4,m4,cb=!1,Ch=[],Yp=null,Xp=null,Zp=null,Vm=new Map,Hm=new Map,em=[],l3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fb(x,P,e,v,M){return{blockedOn:x,domEventName:P,eventSystemFlags:e|16,nativeEvent:M,targetContainers:[v]}}function u3(x,P){switch(x){case"focusin":case"focusout":Yp=null;break;case"dragenter":case"dragleave":Xp=null;break;case"mouseover":case"mouseout":Zp=null;break;case"pointerover":case"pointerout":Vm.delete(P.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hm.delete(P.pointerId)}}function tm(x,P,e,v,M,r){return x===null||x.nativeEvent!==r?(x=fb(P,e,v,M,r),P!==null&&(P=sg(P),P!==null&&P2(P)),x):(x.eventSystemFlags|=v,P=x.targetContainers,M!==null&&P.indexOf(M)===-1&&P.push(M),x)}function wk(x,P,e,v,M){switch(P){case"focusin":return Yp=tm(Yp,x,P,e,v,M),!0;case"dragenter":return Xp=tm(Xp,x,P,e,v,M),!0;case"mouseover":return Zp=tm(Zp,x,P,e,v,M),!0;case"pointerover":var r=M.pointerId;return Vm.set(r,tm(Vm.get(r)||null,x,P,e,v,M)),!0;case"gotpointercapture":return r=M.pointerId,Hm.set(r,tm(Hm.get(r)||null,x,P,e,v,M)),!0}return!1}function Tk(x){var P=Hd(x.target);if(P!==null){var e=ev(P);if(e!==null){if(P=e.tag,P===13){if(P=h4(e),P!==null){x.blockedOn=P,m4(x.lanePriority,function(){ku.unstable_runWithPriority(x.priority,function(){v4(e)})});return}}else if(P===3&&e.stateNode.hydrate){x.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}x.blockedOn=null}function l1(x){if(x.blockedOn!==null)return!1;for(var P=x.targetContainers;0<P.length;){var e=z2(x.domEventName,x.eventSystemFlags,P[0],x.nativeEvent);if(e!==null)return P=sg(e),P!==null&&P2(P),x.blockedOn=e,!1;P.shift()}return!0}function c3(x,P,e){l1(x)&&e.delete(P)}function Ak(){for(cb=!1;0<Ch.length;){var x=Ch[0];if(x.blockedOn!==null){x=sg(x.blockedOn),x!==null&&d4(x);break}for(var P=x.targetContainers;0<P.length;){var e=z2(x.domEventName,x.eventSystemFlags,P[0],x.nativeEvent);if(e!==null){x.blockedOn=e;break}P.shift()}x.blockedOn===null&&Ch.shift()}Yp!==null&&l1(Yp)&&(Yp=null),Xp!==null&&l1(Xp)&&(Xp=null),Zp!==null&&l1(Zp)&&(Zp=null),Vm.forEach(c3),Hm.forEach(c3)}function rm(x,P){x.blockedOn===P&&(x.blockedOn=null,cb||(cb=!0,ku.unstable_scheduleCallback(ku.unstable_NormalPriority,Ak)))}function g4(x){function P(M){return rm(M,x)}if(0<Ch.length){rm(Ch[0],x);for(var e=1;e<Ch.length;e++){var v=Ch[e];v.blockedOn===x&&(v.blockedOn=null)}}for(Yp!==null&&rm(Yp,x),Xp!==null&&rm(Xp,x),Zp!==null&&rm(Zp,x),Vm.forEach(P),Hm.forEach(P),e=0;e<em.length;e++)v=em[e],v.blockedOn===x&&(v.blockedOn=null);for(;0<em.length&&(e=em[0],e.blockedOn===null);)Tk(e),e.blockedOn===null&&em.shift()}function Yg(x,P){var e={};return e[x.toLowerCase()]=P.toLowerCase(),e["Webkit"+x]="webkit"+P,e["Moz"+x]="moz"+P,e}var Kv={animationend:Yg("Animation","AnimationEnd"),animationiteration:Yg("Animation","AnimationIteration"),animationstart:Yg("Animation","AnimationStart"),transitionend:Yg("Transition","TransitionEnd")},ux={},y4={};pp&&(y4=document.createElement("div").style,"AnimationEvent"in window||(delete Kv.animationend.animation,delete Kv.animationiteration.animation,delete Kv.animationstart.animation),"TransitionEvent"in window||delete Kv.transitionend.transition);function ay(x){if(ux[x])return ux[x];if(!Kv[x])return x;var P=Kv[x],e;for(e in P)if(P.hasOwnProperty(e)&&e in y4)return ux[x]=P[e];return x}var x4=ay("animationend"),b4=ay("animationiteration"),_4=ay("animationstart"),w4=ay("transitionend"),T4=new Map,R2=new Map,kk=["abort","abort",x4,"animationEnd",b4,"animationIteration",_4,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",w4,"transitionEnd","waiting","waiting"];function D2(x,P){for(var e=0;e<x.length;e+=2){var v=x[e],M=x[e+1];M="on"+(M[0].toUpperCase()+M.slice(1)),R2.set(v,P),T4.set(v,M),Qd(M,[v])}}var Mk=ku.unstable_now;Mk();var Bs=8;function Xv(x){if(1&x)return Bs=15,1;if(2&x)return Bs=14,2;if(4&x)return Bs=13,4;var P=24&x;return P!==0?(Bs=12,P):x&32?(Bs=11,32):(P=192&x,P!==0?(Bs=10,P):x&256?(Bs=9,256):(P=3584&x,P!==0?(Bs=8,P):x&4096?(Bs=7,4096):(P=4186112&x,P!==0?(Bs=6,P):(P=62914560&x,P!==0?(Bs=5,P):x&67108864?(Bs=4,67108864):x&134217728?(Bs=3,134217728):(P=805306368&x,P!==0?(Bs=2,P):1073741824&x?(Bs=1,1073741824):(Bs=8,x))))))}function Sk(x){switch(x){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Ek(x){switch(x){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Va(358,x))}}function jm(x,P){var e=x.pendingLanes;if(e===0)return Bs=0;var v=0,M=0,r=x.expiredLanes,n=x.suspendedLanes,l=x.pingedLanes;if(r!==0)v=r,M=Bs=15;else if(r=e&134217727,r!==0){var c=r&~n;c!==0?(v=Xv(c),M=Bs):(l&=r,l!==0&&(v=Xv(l),M=Bs))}else r=e&~n,r!==0?(v=Xv(r),M=Bs):l!==0&&(v=Xv(l),M=Bs);if(v===0)return 0;if(v=31-rd(v),v=e&((0>v?0:1<<v)<<1)-1,P!==0&&P!==v&&!(P&n)){if(Xv(P),M<=Bs)return P;Bs=M}if(P=x.entangledLanes,P!==0)for(x=x.entanglements,P&=v;0<P;)e=31-rd(P),M=1<<e,v|=x[e],P&=~M;return v}function A4(x){return x=x.pendingLanes&-1073741825,x!==0?x:x&1073741824?1073741824:0}function L1(x,P){switch(x){case 15:return 1;case 14:return 2;case 12:return x=Zv(24&~P),x===0?L1(10,P):x;case 10:return x=Zv(192&~P),x===0?L1(8,P):x;case 8:return x=Zv(3584&~P),x===0&&(x=Zv(4186112&~P),x===0&&(x=512)),x;case 2:return P=Zv(805306368&~P),P===0&&(P=268435456),P}throw Error(Va(358,x))}function Zv(x){return x&-x}function cx(x){for(var P=[],e=0;31>e;e++)P.push(x);return P}function iy(x,P,e){x.pendingLanes|=P;var v=P-1;x.suspendedLanes&=v,x.pingedLanes&=v,x=x.eventTimes,P=31-rd(P),x[P]=e}var rd=Math.clz32?Math.clz32:Pk,Ck=Math.log,Lk=Math.LN2;function Pk(x){return x===0?32:31-(Ck(x)/Lk|0)|0}var Rk=ku.unstable_UserBlockingPriority,Dk=ku.unstable_runWithPriority,u1=!0;function Ik(x,P,e,v){Vd||C2();var M=I2,r=Vd;Vd=!0;try{c4(M,x,P,e,v)}finally{(Vd=r)||L2()}}function zk(x,P,e,v){Dk(Rk,I2.bind(null,x,P,e,v))}function I2(x,P,e,v){if(u1){var M;if((M=(P&4)===0)&&0<Ch.length&&-1<l3.indexOf(x))x=fb(null,x,P,e,v),Ch.push(x);else{var r=z2(x,P,e,v);if(r===null)M&&u3(x,v);else{if(M){if(-1<l3.indexOf(x)){x=fb(r,x,P,e,v),Ch.push(x);return}if(wk(r,x,P,e,v))return;u3(x,v)}F4(x,P,v,null,e)}}}}function z2(x,P,e,v){var M=S2(v);if(M=Hd(M),M!==null){var r=ev(M);if(r===null)M=null;else{var n=r.tag;if(n===13){if(M=h4(r),M!==null)return M;M=null}else if(n===3){if(r.stateNode.hydrate)return r.tag===3?r.stateNode.containerInfo:null;M=null}else r!==M&&(M=null)}}return F4(x,P,v,M,e),null}var jp=null,O2=null,c1=null;function k4(){if(c1)return c1;var x,P=O2,e=P.length,v,M="value"in jp?jp.value:jp.textContent,r=M.length;for(x=0;x<e&&P[x]===M[x];x++);var n=e-x;for(v=1;v<=n&&P[e-v]===M[r-v];v++);return c1=M.slice(x,1<v?1-v:void 0)}function f1(x){var P=x.keyCode;return"charCode"in x?(x=x.charCode,x===0&&P===13&&(x=13)):x=P,x===10&&(x=13),32<=x||x===13?x:0}function Xg(){return!0}function f3(){return!1}function Jc(x){function P(e,v,M,r,n){this._reactName=e,this._targetInst=M,this.type=v,this.nativeEvent=r,this.target=n,this.currentTarget=null;for(var l in x)x.hasOwnProperty(l)&&(e=x[l],this[l]=e?e(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Xg:f3,this.isPropagationStopped=f3,this}return ll(P.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Xg)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Xg)},persist:function(){},isPersistent:Xg}),P}var k0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(x){return x.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},F2=Jc(k0),og=ll({},k0,{view:0,detail:0}),Ok=Jc(og),fx,hx,nm,oy=ll({},og,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N2,button:0,buttons:0,relatedTarget:function(x){return x.relatedTarget===void 0?x.fromElement===x.srcElement?x.toElement:x.fromElement:x.relatedTarget},movementX:function(x){return"movementX"in x?x.movementX:(x!==nm&&(nm&&x.type==="mousemove"?(fx=x.screenX-nm.screenX,hx=x.screenY-nm.screenY):hx=fx=0,nm=x),fx)},movementY:function(x){return"movementY"in x?x.movementY:hx}}),h3=Jc(oy),Fk=ll({},oy,{dataTransfer:0}),Nk=Jc(Fk),Bk=ll({},og,{relatedTarget:0}),px=Jc(Bk),Uk=ll({},k0,{animationName:0,elapsedTime:0,pseudoElement:0}),Vk=Jc(Uk),Hk=ll({},k0,{clipboardData:function(x){return"clipboardData"in x?x.clipboardData:window.clipboardData}}),jk=Jc(Hk),Gk=ll({},k0,{data:0}),p3=Jc(Gk),Wk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zk(x){var P=this.nativeEvent;return P.getModifierState?P.getModifierState(x):(x=Xk[x])?!!P[x]:!1}function N2(){return Zk}var Kk=ll({},og,{key:function(x){if(x.key){var P=Wk[x.key]||x.key;if(P!=="Unidentified")return P}return x.type==="keypress"?(x=f1(x),x===13?"Enter":String.fromCharCode(x)):x.type==="keydown"||x.type==="keyup"?Yk[x.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N2,charCode:function(x){return x.type==="keypress"?f1(x):0},keyCode:function(x){return x.type==="keydown"||x.type==="keyup"?x.keyCode:0},which:function(x){return x.type==="keypress"?f1(x):x.type==="keydown"||x.type==="keyup"?x.keyCode:0}}),$k=Jc(Kk),Jk=ll({},oy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d3=Jc(Jk),Qk=ll({},og,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N2}),qk=Jc(Qk),eM=ll({},k0,{propertyName:0,elapsedTime:0,pseudoElement:0}),tM=Jc(eM),rM=ll({},oy,{deltaX:function(x){return"deltaX"in x?x.deltaX:"wheelDeltaX"in x?-x.wheelDeltaX:0},deltaY:function(x){return"deltaY"in x?x.deltaY:"wheelDeltaY"in x?-x.wheelDeltaY:"wheelDelta"in x?-x.wheelDelta:0},deltaZ:0,deltaMode:0}),nM=Jc(rM),aM=[9,13,27,32],B2=pp&&"CompositionEvent"in window,Sm=null;pp&&"documentMode"in document&&(Sm=document.documentMode);var iM=pp&&"TextEvent"in window&&!Sm,M4=pp&&(!B2||Sm&&8<Sm&&11>=Sm),v3=String.fromCharCode(32),m3=!1;function S4(x,P){switch(x){case"keyup":return aM.indexOf(P.keyCode)!==-1;case"keydown":return P.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E4(x){return x=x.detail,typeof x=="object"&&"data"in x?x.data:null}var $v=!1;function oM(x,P){switch(x){case"compositionend":return E4(P);case"keypress":return P.which!==32?null:(m3=!0,v3);case"textInput":return x=P.data,x===v3&&m3?null:x;default:return null}}function sM(x,P){if($v)return x==="compositionend"||!B2&&S4(x,P)?(x=k4(),c1=O2=jp=null,$v=!1,x):null;switch(x){case"paste":return null;case"keypress":if(!(P.ctrlKey||P.altKey||P.metaKey)||P.ctrlKey&&P.altKey){if(P.char&&1<P.char.length)return P.char;if(P.which)return String.fromCharCode(P.which)}return null;case"compositionend":return M4&&P.locale!=="ko"?null:P.data;default:return null}}var lM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g3(x){var P=x&&x.nodeName&&x.nodeName.toLowerCase();return P==="input"?!!lM[x.type]:P==="textarea"}function C4(x,P,e,v){l4(v),P=P1(P,"onChange"),0<P.length&&(e=new F2("onChange","change",null,e,v),x.push({event:e,listeners:P}))}var Em=null,Gm=null;function uM(x){I4(x,0)}function sy(x){var P=Qv(x);if(t4(P))return x}function cM(x,P){if(x==="change")return P}var L4=!1;if(pp){var dx;if(pp){var vx="oninput"in document;if(!vx){var y3=document.createElement("div");y3.setAttribute("oninput","return;"),vx=typeof y3.oninput=="function"}dx=vx}else dx=!1;L4=dx&&(!document.documentMode||9<document.documentMode)}function x3(){Em&&(Em.detachEvent("onpropertychange",P4),Gm=Em=null)}function P4(x){if(x.propertyName==="value"&&sy(Gm)){var P=[];if(C4(P,Gm,x,S2(x)),x=uM,Vd)x(P);else{Vd=!0;try{E2(x,P)}finally{Vd=!1,L2()}}}}function fM(x,P,e){x==="focusin"?(x3(),Em=P,Gm=e,Em.attachEvent("onpropertychange",P4)):x==="focusout"&&x3()}function hM(x){if(x==="selectionchange"||x==="keyup"||x==="keydown")return sy(Gm)}function pM(x,P){if(x==="click")return sy(P)}function dM(x,P){if(x==="input"||x==="change")return sy(P)}function vM(x,P){return x===P&&(x!==0||1/x===1/P)||x!==x&&P!==P}var kf=typeof Object.is=="function"?Object.is:vM,mM=Object.prototype.hasOwnProperty;function Wm(x,P){if(kf(x,P))return!0;if(typeof x!="object"||x===null||typeof P!="object"||P===null)return!1;var e=Object.keys(x),v=Object.keys(P);if(e.length!==v.length)return!1;for(v=0;v<e.length;v++)if(!mM.call(P,e[v])||!kf(x[e[v]],P[e[v]]))return!1;return!0}function b3(x){for(;x&&x.firstChild;)x=x.firstChild;return x}function _3(x,P){var e=b3(x);x=0;for(var v;e;){if(e.nodeType===3){if(v=x+e.textContent.length,x<=P&&v>=P)return{node:e,offset:P-x};x=v}e:{for(;e;){if(e.nextSibling){e=e.nextSibling;break e}e=e.parentNode}e=void 0}e=b3(e)}}function R4(x,P){return x&&P?x===P?!0:x&&x.nodeType===3?!1:P&&P.nodeType===3?R4(x,P.parentNode):"contains"in x?x.contains(P):x.compareDocumentPosition?!!(x.compareDocumentPosition(P)&16):!1:!1}function w3(){for(var x=window,P=S1();P instanceof x.HTMLIFrameElement;){try{var e=typeof P.contentWindow.location.href=="string"}catch{e=!1}if(e)x=P.contentWindow;else break;P=S1(x.document)}return P}function hb(x){var P=x&&x.nodeName&&x.nodeName.toLowerCase();return P&&(P==="input"&&(x.type==="text"||x.type==="search"||x.type==="tel"||x.type==="url"||x.type==="password")||P==="textarea"||x.contentEditable==="true")}var gM=pp&&"documentMode"in document&&11>=document.documentMode,Jv=null,pb=null,Cm=null,db=!1;function T3(x,P,e){var v=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;db||Jv==null||Jv!==S1(v)||(v=Jv,"selectionStart"in v&&hb(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Cm&&Wm(Cm,v)||(Cm=v,v=P1(pb,"onSelect"),0<v.length&&(P=new F2("onSelect","select",null,P,e),x.push({event:P,listeners:v}),P.target=Jv)))}D2("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);D2("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);D2(kk,2);for(var A3="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),mx=0;mx<A3.length;mx++)R2.set(A3[mx],0);m0("onMouseEnter",["mouseout","mouseover"]);m0("onMouseLeave",["mouseout","mouseover"]);m0("onPointerEnter",["pointerout","pointerover"]);m0("onPointerLeave",["pointerout","pointerover"]);Qd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ym="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D4=new Set("cancel close invalid load scroll toggle".split(" ").concat(ym));function k3(x,P,e){var v=x.type||"unknown-event";x.currentTarget=e,bk(v,P,void 0,x),x.currentTarget=null}function I4(x,P){P=(P&4)!==0;for(var e=0;e<x.length;e++){var v=x[e],M=v.event;v=v.listeners;e:{var r=void 0;if(P)for(var n=v.length-1;0<=n;n--){var l=v[n],c=l.instance,t=l.currentTarget;if(l=l.listener,c!==r&&M.isPropagationStopped())break e;k3(M,l,t),r=c}else for(n=0;n<v.length;n++){if(l=v[n],c=l.instance,t=l.currentTarget,l=l.listener,c!==r&&M.isPropagationStopped())break e;k3(M,l,t),r=c}}}if(C1)throw x=ub,C1=!1,ub=null,x}function Ws(x,P){var e=B4(P),v=x+"__bubble";e.has(v)||(O4(P,x,2,!1),e.add(v))}var M3="_reactListening"+Math.random().toString(36).slice(2);function z4(x){x[M3]||(x[M3]=!0,Q5.forEach(function(P){D4.has(P)||S3(P,!1,x,null),S3(P,!0,x,null)}))}function S3(x,P,e,v){var M=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,r=e;if(x==="selectionchange"&&e.nodeType!==9&&(r=e.ownerDocument),v!==null&&!P&&D4.has(x)){if(x!=="scroll")return;M|=2,r=v}var n=B4(r),l=x+"__"+(P?"capture":"bubble");n.has(l)||(P&&(M|=4),O4(r,x,M,P),n.add(l))}function O4(x,P,e,v){var M=R2.get(P);switch(M===void 0?2:M){case 0:M=Ik;break;case 1:M=zk;break;default:M=I2}e=M.bind(null,P,e,x),M=void 0,!lb||P!=="touchstart"&&P!=="touchmove"&&P!=="wheel"||(M=!0),v?M!==void 0?x.addEventListener(P,e,{capture:!0,passive:M}):x.addEventListener(P,e,!0):M!==void 0?x.addEventListener(P,e,{passive:M}):x.addEventListener(P,e,!1)}function F4(x,P,e,v,M){var r=v;if(!(P&1)&&!(P&2)&&v!==null)e:for(;;){if(v===null)return;var n=v.tag;if(n===3||n===4){var l=v.stateNode.containerInfo;if(l===M||l.nodeType===8&&l.parentNode===M)break;if(n===4)for(n=v.return;n!==null;){var c=n.tag;if((c===3||c===4)&&(c=n.stateNode.containerInfo,c===M||c.nodeType===8&&c.parentNode===M))return;n=n.return}for(;l!==null;){if(n=Hd(l),n===null)return;if(c=n.tag,c===5||c===6){v=r=n;continue e}l=l.parentNode}}v=v.return}mk(function(){var t=r,f=S2(e),a=[];e:{var o=T4.get(x);if(o!==void 0){var u=F2,h=x;switch(x){case"keypress":if(f1(e)===0)break e;case"keydown":case"keyup":u=$k;break;case"focusin":h="focus",u=px;break;case"focusout":h="blur",u=px;break;case"beforeblur":case"afterblur":u=px;break;case"click":if(e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=h3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=Nk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=qk;break;case x4:case b4:case _4:u=Vk;break;case w4:u=tM;break;case"scroll":u=Ok;break;case"wheel":u=nM;break;case"copy":case"cut":case"paste":u=jk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=d3}var i=(P&4)!==0,s=!i&&x==="scroll",p=i?o!==null?o+"Capture":null:o;i=[];for(var d=t,y;d!==null;){y=d;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,p!==null&&(b=Um(d,p),b!=null&&i.push(Ym(d,b,y)))),s)break;d=d.return}0<i.length&&(o=new u(o,h,null,e,f),a.push({event:o,listeners:i}))}}if(!(P&7)){e:{if(o=x==="mouseover"||x==="pointerover",u=x==="mouseout"||x==="pointerout",o&&!(P&16)&&(h=e.relatedTarget||e.fromElement)&&(Hd(h)||h[M0]))break e;if((u||o)&&(o=f.window===f?f:(o=f.ownerDocument)?o.defaultView||o.parentWindow:window,u?(h=e.relatedTarget||e.toElement,u=t,h=h?Hd(h):null,h!==null&&(s=ev(h),h!==s||h.tag!==5&&h.tag!==6)&&(h=null)):(u=null,h=t),u!==h)){if(i=h3,b="onMouseLeave",p="onMouseEnter",d="mouse",(x==="pointerout"||x==="pointerover")&&(i=d3,b="onPointerLeave",p="onPointerEnter",d="pointer"),s=u==null?o:Qv(u),y=h==null?o:Qv(h),o=new i(b,d+"leave",u,e,f),o.target=s,o.relatedTarget=y,b=null,Hd(f)===t&&(i=new i(p,d+"enter",h,e,f),i.target=y,i.relatedTarget=s,b=i),s=b,u&&h)t:{for(i=u,p=h,d=0,y=i;y;y=Bv(y))d++;for(y=0,b=p;b;b=Bv(b))y++;for(;0<d-y;)i=Bv(i),d--;for(;0<y-d;)p=Bv(p),y--;for(;d--;){if(i===p||p!==null&&i===p.alternate)break t;i=Bv(i),p=Bv(p)}i=null}else i=null;u!==null&&E3(a,o,u,i,!1),h!==null&&s!==null&&E3(a,s,h,i,!0)}}e:{if(o=t?Qv(t):window,u=o.nodeName&&o.nodeName.toLowerCase(),u==="select"||u==="input"&&o.type==="file")var m=cM;else if(g3(o))if(L4)m=dM;else{m=hM;var _=fM}else(u=o.nodeName)&&u.toLowerCase()==="input"&&(o.type==="checkbox"||o.type==="radio")&&(m=pM);if(m&&(m=m(x,t))){C4(a,m,e,f);break e}_&&_(x,o,t),x==="focusout"&&(_=o._wrapperState)&&_.controlled&&o.type==="number"&&eb(o,"number",o.value)}switch(_=t?Qv(t):window,x){case"focusin":(g3(_)||_.contentEditable==="true")&&(Jv=_,pb=t,Cm=null);break;case"focusout":Cm=pb=Jv=null;break;case"mousedown":db=!0;break;case"contextmenu":case"mouseup":case"dragend":db=!1,T3(a,e,f);break;case"selectionchange":if(gM)break;case"keydown":case"keyup":T3(a,e,f)}var T;if(B2)e:{switch(x){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else $v?S4(x,e)&&(g="onCompositionEnd"):x==="keydown"&&e.keyCode===229&&(g="onCompositionStart");g&&(M4&&e.locale!=="ko"&&($v||g!=="onCompositionStart"?g==="onCompositionEnd"&&$v&&(T=k4()):(jp=f,O2="value"in jp?jp.value:jp.textContent,$v=!0)),_=P1(t,g),0<_.length&&(g=new p3(g,x,null,e,f),a.push({event:g,listeners:_}),T?g.data=T:(T=E4(e),T!==null&&(g.data=T)))),(T=iM?oM(x,e):sM(x,e))&&(t=P1(t,"onBeforeInput"),0<t.length&&(f=new p3("onBeforeInput","beforeinput",null,e,f),a.push({event:f,listeners:t}),f.data=T))}I4(a,P)})}function Ym(x,P,e){return{instance:x,listener:P,currentTarget:e}}function P1(x,P){for(var e=P+"Capture",v=[];x!==null;){var M=x,r=M.stateNode;M.tag===5&&r!==null&&(M=r,r=Um(x,e),r!=null&&v.unshift(Ym(x,r,M)),r=Um(x,P),r!=null&&v.push(Ym(x,r,M))),x=x.return}return v}function Bv(x){if(x===null)return null;do x=x.return;while(x&&x.tag!==5);return x||null}function E3(x,P,e,v,M){for(var r=P._reactName,n=[];e!==null&&e!==v;){var l=e,c=l.alternate,t=l.stateNode;if(c!==null&&c===v)break;l.tag===5&&t!==null&&(l=t,M?(c=Um(e,r),c!=null&&n.unshift(Ym(e,c,l))):M||(c=Um(e,r),c!=null&&n.push(Ym(e,c,l)))),e=e.return}n.length!==0&&x.push({event:P,listeners:n})}function R1(){}var gx=null,yx=null;function N4(x,P){switch(x){case"button":case"input":case"select":case"textarea":return!!P.autoFocus}return!1}function vb(x,P){return x==="textarea"||x==="option"||x==="noscript"||typeof P.children=="string"||typeof P.children=="number"||typeof P.dangerouslySetInnerHTML=="object"&&P.dangerouslySetInnerHTML!==null&&P.dangerouslySetInnerHTML.__html!=null}var C3=typeof setTimeout=="function"?setTimeout:void 0,yM=typeof clearTimeout=="function"?clearTimeout:void 0;function U2(x){x.nodeType===1?x.textContent="":x.nodeType===9&&(x=x.body,x!=null&&(x.textContent=""))}function s0(x){for(;x!=null;x=x.nextSibling){var P=x.nodeType;if(P===1||P===3)break}return x}function L3(x){x=x.previousSibling;for(var P=0;x;){if(x.nodeType===8){var e=x.data;if(e==="$"||e==="$!"||e==="$?"){if(P===0)return x;P--}else e==="/$"&&P++}x=x.previousSibling}return null}var xx=0;function xM(x){return{$$typeof:k2,toString:x,valueOf:x}}var ly=Math.random().toString(36).slice(2),Gp="__reactFiber$"+ly,D1="__reactProps$"+ly,M0="__reactContainer$"+ly,P3="__reactEvents$"+ly;function Hd(x){var P=x[Gp];if(P)return P;for(var e=x.parentNode;e;){if(P=e[M0]||e[Gp]){if(e=P.alternate,P.child!==null||e!==null&&e.child!==null)for(x=L3(x);x!==null;){if(e=x[Gp])return e;x=L3(x)}return P}x=e,e=x.parentNode}return null}function sg(x){return x=x[Gp]||x[M0],!x||x.tag!==5&&x.tag!==6&&x.tag!==13&&x.tag!==3?null:x}function Qv(x){if(x.tag===5||x.tag===6)return x.stateNode;throw Error(Va(33))}function uy(x){return x[D1]||null}function B4(x){var P=x[P3];return P===void 0&&(P=x[P3]=new Set),P}var mb=[],qv=-1;function ud(x){return{current:x}}function Ks(x){0>qv||(x.current=mb[qv],mb[qv]=null,qv--)}function Pl(x,P){qv++,mb[qv]=x.current,x.current=P}var nd={},qu=ud(nd),Ec=ud(!1),Zd=nd;function g0(x,P){var e=x.type.contextTypes;if(!e)return nd;var v=x.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===P)return v.__reactInternalMemoizedMaskedChildContext;var M={},r;for(r in e)M[r]=P[r];return v&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=P,x.__reactInternalMemoizedMaskedChildContext=M),M}function Cc(x){return x=x.childContextTypes,x!=null}function I1(){Ks(Ec),Ks(qu)}function R3(x,P,e){if(qu.current!==nd)throw Error(Va(168));Pl(qu,P),Pl(Ec,e)}function U4(x,P,e){var v=x.stateNode;if(x=P.childContextTypes,typeof v.getChildContext!="function")return e;v=v.getChildContext();for(var M in v)if(!(M in x))throw Error(Va(108,n0(P)||"Unknown",M));return ll({},e,v)}function h1(x){return x=(x=x.stateNode)&&x.__reactInternalMemoizedMergedChildContext||nd,Zd=qu.current,Pl(qu,x),Pl(Ec,Ec.current),!0}function D3(x,P,e){var v=x.stateNode;if(!v)throw Error(Va(169));e?(x=U4(x,P,Zd),v.__reactInternalMemoizedMergedChildContext=x,Ks(Ec),Ks(qu),Pl(qu,x)):Ks(Ec),Pl(Ec,e)}var V2=null,Yd=null,bM=ku.unstable_runWithPriority,H2=ku.unstable_scheduleCallback,gb=ku.unstable_cancelCallback,_M=ku.unstable_shouldYield,I3=ku.unstable_requestPaint,yb=ku.unstable_now,wM=ku.unstable_getCurrentPriorityLevel,cy=ku.unstable_ImmediatePriority,V4=ku.unstable_UserBlockingPriority,H4=ku.unstable_NormalPriority,j4=ku.unstable_LowPriority,G4=ku.unstable_IdlePriority,bx={},TM=I3!==void 0?I3:function(){},ip=null,p1=null,_x=!1,z3=yb(),Ju=1e4>z3?yb:function(){return yb()-z3};function y0(){switch(wM()){case cy:return 99;case V4:return 98;case H4:return 97;case j4:return 96;case G4:return 95;default:throw Error(Va(332))}}function W4(x){switch(x){case 99:return cy;case 98:return V4;case 97:return H4;case 96:return j4;case 95:return G4;default:throw Error(Va(332))}}function Kd(x,P){return x=W4(x),bM(x,P)}function Xm(x,P,e){return x=W4(x),H2(x,P,e)}function Fh(){if(p1!==null){var x=p1;p1=null,gb(x)}Y4()}function Y4(){if(!_x&&ip!==null){_x=!0;var x=0;try{var P=ip;Kd(99,function(){for(;x<P.length;x++){var e=P[x];do e=e(!0);while(e!==null)}}),ip=null}catch(e){throw ip!==null&&(ip=ip.slice(x+1)),H2(cy,Fh),e}finally{_x=!1}}}var AM=qd.ReactCurrentBatchConfig;function ih(x,P){if(x&&x.defaultProps){P=ll({},P),x=x.defaultProps;for(var e in x)P[e]===void 0&&(P[e]=x[e]);return P}return P}var z1=ud(null),O1=null,e0=null,F1=null;function j2(){F1=e0=O1=null}function G2(x){var P=z1.current;Ks(z1),x.type._context._currentValue=P}function X4(x,P){for(;x!==null;){var e=x.alternate;if((x.childLanes&P)===P){if(e===null||(e.childLanes&P)===P)break;e.childLanes|=P}else x.childLanes|=P,e!==null&&(e.childLanes|=P);x=x.return}}function l0(x,P){O1=x,F1=e0=null,x=x.dependencies,x!==null&&x.firstContext!==null&&(x.lanes&P&&(oh=!0),x.firstContext=null)}function Ef(x,P){if(F1!==x&&P!==!1&&P!==0)if((typeof P!="number"||P===1073741823)&&(F1=x,P=1073741823),P={context:x,observedBits:P,next:null},e0===null){if(O1===null)throw Error(Va(308));e0=P,O1.dependencies={lanes:0,firstContext:P,responders:null}}else e0=e0.next=P;return x._currentValue}var Vp=!1;function W2(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Z4(x,P){x=x.updateQueue,P.updateQueue===x&&(P.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,effects:x.effects})}function Kp(x,P){return{eventTime:x,lane:P,tag:0,payload:null,callback:null,next:null}}function $p(x,P){if(x=x.updateQueue,x!==null){x=x.shared;var e=x.pending;e===null?P.next=P:(P.next=e.next,e.next=P),x.pending=P}}function O3(x,P){var e=x.updateQueue,v=x.alternate;if(v!==null&&(v=v.updateQueue,e===v)){var M=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var n={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?M=r=n:r=r.next=n,e=e.next}while(e!==null);r===null?M=r=P:r=r.next=P}else M=r=P;e={baseState:v.baseState,firstBaseUpdate:M,lastBaseUpdate:r,shared:v.shared,effects:v.effects},x.updateQueue=e;return}x=e.lastBaseUpdate,x===null?e.firstBaseUpdate=P:x.next=P,e.lastBaseUpdate=P}function Zm(x,P,e,v){var M=x.updateQueue;Vp=!1;var r=M.firstBaseUpdate,n=M.lastBaseUpdate,l=M.shared.pending;if(l!==null){M.shared.pending=null;var c=l,t=c.next;c.next=null,n===null?r=t:n.next=t,n=c;var f=x.alternate;if(f!==null){f=f.updateQueue;var a=f.lastBaseUpdate;a!==n&&(a===null?f.firstBaseUpdate=t:a.next=t,f.lastBaseUpdate=c)}}if(r!==null){a=M.baseState,n=0,f=t=c=null;do{l=r.lane;var o=r.eventTime;if((v&l)===l){f!==null&&(f=f.next={eventTime:o,lane:0,tag:r.tag,payload:r.payload,callback:r.callback,next:null});e:{var u=x,h=r;switch(l=P,o=e,h.tag){case 1:if(u=h.payload,typeof u=="function"){a=u.call(o,a,l);break e}a=u;break e;case 3:u.flags=u.flags&-4097|64;case 0:if(u=h.payload,l=typeof u=="function"?u.call(o,a,l):u,l==null)break e;a=ll({},a,l);break e;case 2:Vp=!0}}r.callback!==null&&(x.flags|=32,l=M.effects,l===null?M.effects=[r]:l.push(r))}else o={eventTime:o,lane:l,tag:r.tag,payload:r.payload,callback:r.callback,next:null},f===null?(t=f=o,c=a):f=f.next=o,n|=l;if(r=r.next,r===null){if(l=M.shared.pending,l===null)break;r=l.next,l.next=null,M.lastBaseUpdate=l,M.shared.pending=null}}while(1);f===null&&(c=a),M.baseState=c,M.firstBaseUpdate=t,M.lastBaseUpdate=f,ug|=n,x.lanes=n,x.memoizedState=a}}function F3(x,P,e){if(x=P.effects,P.effects=null,x!==null)for(P=0;P<x.length;P++){var v=x[P],M=v.callback;if(M!==null){if(v.callback=null,v=e,typeof M!="function")throw Error(Va(191,M));M.call(v)}}}var K4=new ty.Component().refs;function N1(x,P,e,v){P=x.memoizedState,e=e(v,P),e=e==null?P:ll({},P,e),x.memoizedState=e,x.lanes===0&&(x.updateQueue.baseState=e)}var fy={isMounted:function(x){return(x=x._reactInternals)?ev(x)===x:!1},enqueueSetState:function(x,P,e){x=x._reactInternals;var v=Kc(),M=Jp(x),r=Kp(v,M);r.payload=P,e!=null&&(r.callback=e),$p(x,r),Qp(x,M,v)},enqueueReplaceState:function(x,P,e){x=x._reactInternals;var v=Kc(),M=Jp(x),r=Kp(v,M);r.tag=1,r.payload=P,e!=null&&(r.callback=e),$p(x,r),Qp(x,M,v)},enqueueForceUpdate:function(x,P){x=x._reactInternals;var e=Kc(),v=Jp(x),M=Kp(e,v);M.tag=2,P!=null&&(M.callback=P),$p(x,M),Qp(x,v,e)}};function N3(x,P,e,v,M,r,n){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate(v,r,n):P.prototype&&P.prototype.isPureReactComponent?!Wm(e,v)||!Wm(M,r):!0}function $4(x,P,e){var v=!1,M=nd,r=P.contextType;return typeof r=="object"&&r!==null?r=Ef(r):(M=Cc(P)?Zd:qu.current,v=P.contextTypes,r=(v=v!=null)?g0(x,M):nd),P=new P(e,r),x.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=fy,x.stateNode=P,P._reactInternals=x,v&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=M,x.__reactInternalMemoizedMaskedChildContext=r),P}function B3(x,P,e,v){x=P.state,typeof P.componentWillReceiveProps=="function"&&P.componentWillReceiveProps(e,v),typeof P.UNSAFE_componentWillReceiveProps=="function"&&P.UNSAFE_componentWillReceiveProps(e,v),P.state!==x&&fy.enqueueReplaceState(P,P.state,null)}function xb(x,P,e,v){var M=x.stateNode;M.props=e,M.state=x.memoizedState,M.refs=K4,W2(x);var r=P.contextType;typeof r=="object"&&r!==null?M.context=Ef(r):(r=Cc(P)?Zd:qu.current,M.context=g0(x,r)),Zm(x,e,M,v),M.state=x.memoizedState,r=P.getDerivedStateFromProps,typeof r=="function"&&(N1(x,P,r,e),M.state=x.memoizedState),typeof P.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(P=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),P!==M.state&&fy.enqueueReplaceState(M,M.state,null),Zm(x,e,M,v),M.state=x.memoizedState),typeof M.componentDidMount=="function"&&(x.flags|=4)}var Zg=Array.isArray;function am(x,P,e){if(x=e.ref,x!==null&&typeof x!="function"&&typeof x!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(Va(309));var v=e.stateNode}if(!v)throw Error(Va(147,x));var M=""+x;return P!==null&&P.ref!==null&&typeof P.ref=="function"&&P.ref._stringRef===M?P.ref:(P=function(r){var n=v.refs;n===K4&&(n=v.refs={}),r===null?delete n[M]:n[M]=r},P._stringRef=M,P)}if(typeof x!="string")throw Error(Va(284));if(!e._owner)throw Error(Va(290,x))}return x}function Kg(x,P){if(x.type!=="textarea")throw Error(Va(31,Object.prototype.toString.call(P)==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":P))}function J4(x){function P(s,p){if(x){var d=s.lastEffect;d!==null?(d.nextEffect=p,s.lastEffect=p):s.firstEffect=s.lastEffect=p,p.nextEffect=null,p.flags=8}}function e(s,p){if(!x)return null;for(;p!==null;)P(s,p),p=p.sibling;return null}function v(s,p){for(s=new Map;p!==null;)p.key!==null?s.set(p.key,p):s.set(p.index,p),p=p.sibling;return s}function M(s,p){return s=id(s,p),s.index=0,s.sibling=null,s}function r(s,p,d){return s.index=d,x?(d=s.alternate,d!==null?(d=d.index,d<p?(s.flags=2,p):d):(s.flags=2,p)):p}function n(s){return x&&s.alternate===null&&(s.flags=2),s}function l(s,p,d,y){return p===null||p.tag!==6?(p=Mx(d,s.mode,y),p.return=s,p):(p=M(p,d),p.return=s,p)}function c(s,p,d,y){return p!==null&&p.elementType===d.type?(y=M(p,d.props),y.ref=am(s,p,d),y.return=s,y):(y=g1(d.type,d.key,d.props,null,s.mode,y),y.ref=am(s,p,d),y.return=s,y)}function t(s,p,d,y){return p===null||p.tag!==4||p.stateNode.containerInfo!==d.containerInfo||p.stateNode.implementation!==d.implementation?(p=Sx(d,s.mode,y),p.return=s,p):(p=M(p,d.children||[]),p.return=s,p)}function f(s,p,d,y,b){return p===null||p.tag!==7?(p=h0(d,s.mode,y,b),p.return=s,p):(p=M(p,d),p.return=s,p)}function a(s,p,d){if(typeof p=="string"||typeof p=="number")return p=Mx(""+p,s.mode,d),p.return=s,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case mm:return d=g1(p.type,p.key,p.props,null,s.mode,d),d.ref=am(s,null,p),d.return=s,d;case Ud:return p=Sx(p,s.mode,d),p.return=s,p}if(Zg(p)||Q0(p))return p=h0(p,s.mode,d,null),p.return=s,p;Kg(s,p)}return null}function o(s,p,d,y){var b=p!==null?p.key:null;if(typeof d=="string"||typeof d=="number")return b!==null?null:l(s,p,""+d,y);if(typeof d=="object"&&d!==null){switch(d.$$typeof){case mm:return d.key===b?d.type===Hp?f(s,p,d.props.children,y,b):c(s,p,d,y):null;case Ud:return d.key===b?t(s,p,d,y):null}if(Zg(d)||Q0(d))return b!==null?null:f(s,p,d,y,null);Kg(s,d)}return null}function u(s,p,d,y,b){if(typeof y=="string"||typeof y=="number")return s=s.get(d)||null,l(p,s,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case mm:return s=s.get(y.key===null?d:y.key)||null,y.type===Hp?f(p,s,y.props.children,b,y.key):c(p,s,y,b);case Ud:return s=s.get(y.key===null?d:y.key)||null,t(p,s,y,b)}if(Zg(y)||Q0(y))return s=s.get(d)||null,f(p,s,y,b,null);Kg(p,y)}return null}function h(s,p,d,y){for(var b=null,m=null,_=p,T=p=0,g=null;_!==null&&T<d.length;T++){_.index>T?(g=_,_=null):g=_.sibling;var A=o(s,_,d[T],y);if(A===null){_===null&&(_=g);break}x&&_&&A.alternate===null&&P(s,_),p=r(A,p,T),m===null?b=A:m.sibling=A,m=A,_=g}if(T===d.length)return e(s,_),b;if(_===null){for(;T<d.length;T++)_=a(s,d[T],y),_!==null&&(p=r(_,p,T),m===null?b=_:m.sibling=_,m=_);return b}for(_=v(s,_);T<d.length;T++)g=u(_,s,T,d[T],y),g!==null&&(x&&g.alternate!==null&&_.delete(g.key===null?T:g.key),p=r(g,p,T),m===null?b=g:m.sibling=g,m=g);return x&&_.forEach(function(k){return P(s,k)}),b}function i(s,p,d,y){var b=Q0(d);if(typeof b!="function")throw Error(Va(150));if(d=b.call(d),d==null)throw Error(Va(151));for(var m=b=null,_=p,T=p=0,g=null,A=d.next();_!==null&&!A.done;T++,A=d.next()){_.index>T?(g=_,_=null):g=_.sibling;var k=o(s,_,A.value,y);if(k===null){_===null&&(_=g);break}x&&_&&k.alternate===null&&P(s,_),p=r(k,p,T),m===null?b=k:m.sibling=k,m=k,_=g}if(A.done)return e(s,_),b;if(_===null){for(;!A.done;T++,A=d.next())A=a(s,A.value,y),A!==null&&(p=r(A,p,T),m===null?b=A:m.sibling=A,m=A);return b}for(_=v(s,_);!A.done;T++,A=d.next())A=u(_,s,T,A.value,y),A!==null&&(x&&A.alternate!==null&&_.delete(A.key===null?T:A.key),p=r(A,p,T),m===null?b=A:m.sibling=A,m=A);return x&&_.forEach(function(R){return P(s,R)}),b}return function(s,p,d,y){var b=typeof d=="object"&&d!==null&&d.type===Hp&&d.key===null;b&&(d=d.props.children);var m=typeof d=="object"&&d!==null;if(m)switch(d.$$typeof){case mm:e:{for(m=d.key,b=p;b!==null;){if(b.key===m){switch(b.tag){case 7:if(d.type===Hp){e(s,b.sibling),p=M(b,d.props.children),p.return=s,s=p;break e}break;default:if(b.elementType===d.type){e(s,b.sibling),p=M(b,d.props),p.ref=am(s,b,d),p.return=s,s=p;break e}}e(s,b);break}else P(s,b);b=b.sibling}d.type===Hp?(p=h0(d.props.children,s.mode,y,d.key),p.return=s,s=p):(y=g1(d.type,d.key,d.props,null,s.mode,y),y.ref=am(s,p,d),y.return=s,s=y)}return n(s);case Ud:e:{for(b=d.key;p!==null;){if(p.key===b)if(p.tag===4&&p.stateNode.containerInfo===d.containerInfo&&p.stateNode.implementation===d.implementation){e(s,p.sibling),p=M(p,d.children||[]),p.return=s,s=p;break e}else{e(s,p);break}else P(s,p);p=p.sibling}p=Sx(d,s.mode,y),p.return=s,s=p}return n(s)}if(typeof d=="string"||typeof d=="number")return d=""+d,p!==null&&p.tag===6?(e(s,p.sibling),p=M(p,d),p.return=s,s=p):(e(s,p),p=Mx(d,s.mode,y),p.return=s,s=p),n(s);if(Zg(d))return h(s,p,d,y);if(Q0(d))return i(s,p,d,y);if(m&&Kg(s,d),typeof d>"u"&&!b)switch(s.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Va(152,n0(s.type)||"Component"))}return e(s,p)}}var B1=J4(!0),Q4=J4(!1),lg={},Ih=ud(lg),Km=ud(lg),$m=ud(lg);function jd(x){if(x===lg)throw Error(Va(174));return x}function bb(x,P){switch(Pl($m,P),Pl(Km,x),Pl(Ih,lg),x=P.nodeType,x){case 9:case 11:P=(P=P.documentElement)?P.namespaceURI:ab(null,"");break;default:x=x===8?P.parentNode:P,P=x.namespaceURI||null,x=x.tagName,P=ab(P,x)}Ks(Ih),Pl(Ih,P)}function x0(){Ks(Ih),Ks(Km),Ks($m)}function U3(x){jd($m.current);var P=jd(Ih.current),e=ab(P,x.type);P!==e&&(Pl(Km,x),Pl(Ih,e))}function Y2(x){Km.current===x&&(Ks(Ih),Ks(Km))}var Ll=ud(0);function U1(x){for(var P=x;P!==null;){if(P.tag===13){var e=P.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return P}else if(P.tag===19&&P.memoizedProps.revealOrder!==void 0){if(P.flags&64)return P}else if(P.child!==null){P.child.return=P,P=P.child;continue}if(P===x)break;for(;P.sibling===null;){if(P.return===null||P.return===x)return null;P=P.return}P.sibling.return=P.return,P=P.sibling}return null}var sp=null,Wp=null,zh=!1;function q4(x,P){var e=Mf(5,null,null,0);e.elementType="DELETED",e.type="DELETED",e.stateNode=P,e.return=x,e.flags=8,x.lastEffect!==null?(x.lastEffect.nextEffect=e,x.lastEffect=e):x.firstEffect=x.lastEffect=e}function V3(x,P){switch(x.tag){case 5:var e=x.type;return P=P.nodeType!==1||e.toLowerCase()!==P.nodeName.toLowerCase()?null:P,P!==null?(x.stateNode=P,!0):!1;case 6:return P=x.pendingProps===""||P.nodeType!==3?null:P,P!==null?(x.stateNode=P,!0):!1;case 13:return!1;default:return!1}}function _b(x){if(zh){var P=Wp;if(P){var e=P;if(!V3(x,P)){if(P=s0(e.nextSibling),!P||!V3(x,P)){x.flags=x.flags&-1025|2,zh=!1,sp=x;return}q4(sp,e)}sp=x,Wp=s0(P.firstChild)}else x.flags=x.flags&-1025|2,zh=!1,sp=x}}function H3(x){for(x=x.return;x!==null&&x.tag!==5&&x.tag!==3&&x.tag!==13;)x=x.return;sp=x}function $g(x){if(x!==sp)return!1;if(!zh)return H3(x),zh=!0,!1;var P=x.type;if(x.tag!==5||P!=="head"&&P!=="body"&&!vb(P,x.memoizedProps))for(P=Wp;P;)q4(x,P),P=s0(P.nextSibling);if(H3(x),x.tag===13){if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(Va(317));e:{for(x=x.nextSibling,P=0;x;){if(x.nodeType===8){var e=x.data;if(e==="/$"){if(P===0){Wp=s0(x.nextSibling);break e}P--}else e!=="$"&&e!=="$!"&&e!=="$?"||P++}x=x.nextSibling}Wp=null}}else Wp=sp?s0(x.stateNode.nextSibling):null;return!0}function wx(){Wp=sp=null,zh=!1}var u0=[];function X2(){for(var x=0;x<u0.length;x++)u0[x]._workInProgressVersionPrimary=null;u0.length=0}var Lm=qd.ReactCurrentDispatcher,Sf=qd.ReactCurrentBatchConfig,Jm=0,Vl=null,$u=null,Fu=null,V1=!1,Pm=!1;function Mc(){throw Error(Va(321))}function Z2(x,P){if(P===null)return!1;for(var e=0;e<P.length&&e<x.length;e++)if(!kf(x[e],P[e]))return!1;return!0}function K2(x,P,e,v,M,r){if(Jm=r,Vl=P,P.memoizedState=null,P.updateQueue=null,P.lanes=0,Lm.current=x===null||x.memoizedState===null?MM:SM,x=e(v,M),Pm){r=0;do{if(Pm=!1,!(25>r))throw Error(Va(301));r+=1,Fu=$u=null,P.updateQueue=null,Lm.current=EM,x=e(v,M)}while(Pm)}if(Lm.current=W1,P=$u!==null&&$u.next!==null,Jm=0,Fu=$u=Vl=null,V1=!1,P)throw Error(Va(300));return x}function Gd(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fu===null?Vl.memoizedState=Fu=x:Fu=Fu.next=x,Fu}function tv(){if($u===null){var x=Vl.alternate;x=x!==null?x.memoizedState:null}else x=$u.next;var P=Fu===null?Vl.memoizedState:Fu.next;if(P!==null)Fu=P,$u=x;else{if(x===null)throw Error(Va(310));$u=x,x={memoizedState:$u.memoizedState,baseState:$u.baseState,baseQueue:$u.baseQueue,queue:$u.queue,next:null},Fu===null?Vl.memoizedState=Fu=x:Fu=Fu.next=x}return Fu}function Lh(x,P){return typeof P=="function"?P(x):P}function im(x){var P=tv(),e=P.queue;if(e===null)throw Error(Va(311));e.lastRenderedReducer=x;var v=$u,M=v.baseQueue,r=e.pending;if(r!==null){if(M!==null){var n=M.next;M.next=r.next,r.next=n}v.baseQueue=M=r,e.pending=null}if(M!==null){M=M.next,v=v.baseState;var l=n=r=null,c=M;do{var t=c.lane;if((Jm&t)===t)l!==null&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),v=c.eagerReducer===x?c.eagerState:x(v,c.action);else{var f={lane:t,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};l===null?(n=l=f,r=v):l=l.next=f,Vl.lanes|=t,ug|=t}c=c.next}while(c!==null&&c!==M);l===null?r=v:l.next=n,kf(v,P.memoizedState)||(oh=!0),P.memoizedState=v,P.baseState=r,P.baseQueue=l,e.lastRenderedState=v}return[P.memoizedState,e.dispatch]}function om(x){var P=tv(),e=P.queue;if(e===null)throw Error(Va(311));e.lastRenderedReducer=x;var v=e.dispatch,M=e.pending,r=P.memoizedState;if(M!==null){e.pending=null;var n=M=M.next;do r=x(r,n.action),n=n.next;while(n!==M);kf(r,P.memoizedState)||(oh=!0),P.memoizedState=r,P.baseQueue===null&&(P.baseState=r),e.lastRenderedState=r}return[r,v]}function j3(x,P,e){var v=P._getVersion;v=v(P._source);var M=P._workInProgressVersionPrimary;if(M!==null?x=M===v:(x=x.mutableReadLanes,(x=(Jm&x)===x)&&(P._workInProgressVersionPrimary=v,u0.push(P))),x)return e(P._source);throw u0.push(P),Error(Va(350))}function eT(x,P,e,v){var M=fc;if(M===null)throw Error(Va(349));var r=P._getVersion,n=r(P._source),l=Lm.current,c=l.useState(function(){return j3(M,P,e)}),t=c[1],f=c[0];c=Fu;var a=x.memoizedState,o=a.refs,u=o.getSnapshot,h=a.source;a=a.subscribe;var i=Vl;return x.memoizedState={refs:o,source:P,subscribe:v},l.useEffect(function(){o.getSnapshot=e,o.setSnapshot=t;var s=r(P._source);if(!kf(n,s)){s=e(P._source),kf(f,s)||(t(s),s=Jp(i),M.mutableReadLanes|=s&M.pendingLanes),s=M.mutableReadLanes,M.entangledLanes|=s;for(var p=M.entanglements,d=s;0<d;){var y=31-rd(d),b=1<<y;p[y]|=s,d&=~b}}},[e,P,v]),l.useEffect(function(){return v(P._source,function(){var s=o.getSnapshot,p=o.setSnapshot;try{p(s(P._source));var d=Jp(i);M.mutableReadLanes|=d&M.pendingLanes}catch(y){p(function(){throw y})}})},[P,v]),kf(u,e)&&kf(h,P)&&kf(a,v)||(x={pending:null,dispatch:null,lastRenderedReducer:Lh,lastRenderedState:f},x.dispatch=t=Q2.bind(null,Vl,x),c.queue=x,c.baseQueue=null,f=j3(M,P,e),c.memoizedState=c.baseState=f),f}function tT(x,P,e){var v=tv();return eT(v,x,P,e)}function sm(x){var P=Gd();return typeof x=="function"&&(x=x()),P.memoizedState=P.baseState=x,x=P.queue={pending:null,dispatch:null,lastRenderedReducer:Lh,lastRenderedState:x},x=x.dispatch=Q2.bind(null,Vl,x),[P.memoizedState,x]}function H1(x,P,e,v){return x={tag:x,create:P,destroy:e,deps:v,next:null},P=Vl.updateQueue,P===null?(P={lastEffect:null},Vl.updateQueue=P,P.lastEffect=x.next=x):(e=P.lastEffect,e===null?P.lastEffect=x.next=x:(v=e.next,e.next=x,x.next=v,P.lastEffect=x)),x}function G3(x){var P=Gd();return x={current:x},P.memoizedState=x}function j1(){return tv().memoizedState}function wb(x,P,e,v){var M=Gd();Vl.flags|=x,M.memoizedState=H1(1|P,e,void 0,v===void 0?null:v)}function $2(x,P,e,v){var M=tv();v=v===void 0?null:v;var r=void 0;if($u!==null){var n=$u.memoizedState;if(r=n.destroy,v!==null&&Z2(v,n.deps)){H1(P,e,r,v);return}}Vl.flags|=x,M.memoizedState=H1(1|P,e,r,v)}function W3(x,P){return wb(516,4,x,P)}function G1(x,P){return $2(516,4,x,P)}function rT(x,P){return $2(4,2,x,P)}function nT(x,P){if(typeof P=="function")return x=x(),P(x),function(){P(null)};if(P!=null)return x=x(),P.current=x,function(){P.current=null}}function aT(x,P,e){return e=e!=null?e.concat([x]):null,$2(4,2,nT.bind(null,P,x),e)}function J2(){}function iT(x,P){var e=tv();P=P===void 0?null:P;var v=e.memoizedState;return v!==null&&P!==null&&Z2(P,v[1])?v[0]:(e.memoizedState=[x,P],x)}function oT(x,P){var e=tv();P=P===void 0?null:P;var v=e.memoizedState;return v!==null&&P!==null&&Z2(P,v[1])?v[0]:(x=x(),e.memoizedState=[x,P],x)}function kM(x,P){var e=y0();Kd(98>e?98:e,function(){x(!0)}),Kd(97<e?97:e,function(){var v=Sf.transition;Sf.transition=1;try{x(!1),P()}finally{Sf.transition=v}})}function Q2(x,P,e){var v=Kc(),M=Jp(x),r={lane:M,action:e,eagerReducer:null,eagerState:null,next:null},n=P.pending;if(n===null?r.next=r:(r.next=n.next,n.next=r),P.pending=r,n=x.alternate,x===Vl||n!==null&&n===Vl)Pm=V1=!0;else{if(x.lanes===0&&(n===null||n.lanes===0)&&(n=P.lastRenderedReducer,n!==null))try{var l=P.lastRenderedState,c=n(l,e);if(r.eagerReducer=n,r.eagerState=c,kf(c,l))return}catch{}finally{}Qp(x,M,v)}}var W1={readContext:Ef,useCallback:Mc,useContext:Mc,useEffect:Mc,useImperativeHandle:Mc,useLayoutEffect:Mc,useMemo:Mc,useReducer:Mc,useRef:Mc,useState:Mc,useDebugValue:Mc,useDeferredValue:Mc,useTransition:Mc,useMutableSource:Mc,useOpaqueIdentifier:Mc,unstable_isNewReconciler:!1},MM={readContext:Ef,useCallback:function(x,P){return Gd().memoizedState=[x,P===void 0?null:P],x},useContext:Ef,useEffect:W3,useImperativeHandle:function(x,P,e){return e=e!=null?e.concat([x]):null,wb(4,2,nT.bind(null,P,x),e)},useLayoutEffect:function(x,P){return wb(4,2,x,P)},useMemo:function(x,P){var e=Gd();return P=P===void 0?null:P,x=x(),e.memoizedState=[x,P],x},useReducer:function(x,P,e){var v=Gd();return P=e!==void 0?e(P):P,v.memoizedState=v.baseState=P,x=v.queue={pending:null,dispatch:null,lastRenderedReducer:x,lastRenderedState:P},x=x.dispatch=Q2.bind(null,Vl,x),[v.memoizedState,x]},useRef:G3,useState:sm,useDebugValue:J2,useDeferredValue:function(x){var P=sm(x),e=P[0],v=P[1];return W3(function(){var M=Sf.transition;Sf.transition=1;try{v(x)}finally{Sf.transition=M}},[x]),e},useTransition:function(){var x=sm(!1),P=x[0];return x=kM.bind(null,x[1]),G3(x),[x,P]},useMutableSource:function(x,P,e){var v=Gd();return v.memoizedState={refs:{getSnapshot:P,setSnapshot:null},source:x,subscribe:e},eT(v,x,P,e)},useOpaqueIdentifier:function(){if(zh){var x=!1,P=xM(function(){throw x||(x=!0,e("r:"+(xx++).toString(36))),Error(Va(355))}),e=sm(P)[1];return!(Vl.mode&2)&&(Vl.flags|=516,H1(5,function(){e("r:"+(xx++).toString(36))},void 0,null)),P}return P="r:"+(xx++).toString(36),sm(P),P},unstable_isNewReconciler:!1},SM={readContext:Ef,useCallback:iT,useContext:Ef,useEffect:G1,useImperativeHandle:aT,useLayoutEffect:rT,useMemo:oT,useReducer:im,useRef:j1,useState:function(){return im(Lh)},useDebugValue:J2,useDeferredValue:function(x){var P=im(Lh),e=P[0],v=P[1];return G1(function(){var M=Sf.transition;Sf.transition=1;try{v(x)}finally{Sf.transition=M}},[x]),e},useTransition:function(){var x=im(Lh)[0];return[j1().current,x]},useMutableSource:tT,useOpaqueIdentifier:function(){return im(Lh)[0]},unstable_isNewReconciler:!1},EM={readContext:Ef,useCallback:iT,useContext:Ef,useEffect:G1,useImperativeHandle:aT,useLayoutEffect:rT,useMemo:oT,useReducer:om,useRef:j1,useState:function(){return om(Lh)},useDebugValue:J2,useDeferredValue:function(x){var P=om(Lh),e=P[0],v=P[1];return G1(function(){var M=Sf.transition;Sf.transition=1;try{v(x)}finally{Sf.transition=M}},[x]),e},useTransition:function(){var x=om(Lh)[0];return[j1().current,x]},useMutableSource:tT,useOpaqueIdentifier:function(){return om(Lh)[0]},unstable_isNewReconciler:!1},CM=qd.ReactCurrentOwner,oh=!1;function Sc(x,P,e,v){P.child=x===null?Q4(P,null,e,v):B1(P,x.child,e,v)}function Y3(x,P,e,v,M){e=e.render;var r=P.ref;return l0(P,M),v=K2(x,P,e,v,r,M),x!==null&&!oh?(P.updateQueue=x.updateQueue,P.flags&=-517,x.lanes&=~M,lp(x,P,M)):(P.flags|=1,Sc(x,P,v,M),P.child)}function X3(x,P,e,v,M,r){if(x===null){var n=e.type;return typeof n=="function"&&!a_(n)&&n.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(P.tag=15,P.type=n,sT(x,P,n,v,M,r)):(x=g1(e.type,null,v,P,P.mode,r),x.ref=P.ref,x.return=P,P.child=x)}return n=x.child,!(M&r)&&(M=n.memoizedProps,e=e.compare,e=e!==null?e:Wm,e(M,v)&&x.ref===P.ref)?lp(x,P,r):(P.flags|=1,x=id(n,v),x.ref=P.ref,x.return=P,P.child=x)}function sT(x,P,e,v,M,r){if(x!==null&&Wm(x.memoizedProps,v)&&x.ref===P.ref)if(oh=!1,(r&M)!==0)x.flags&16384&&(oh=!0);else return P.lanes=x.lanes,lp(x,P,r);return Tb(x,P,e,v,r)}function Tx(x,P,e){var v=P.pendingProps,M=v.children,r=x!==null?x.memoizedState:null;if(v.mode==="hidden"||v.mode==="unstable-defer-without-hiding")if(!(P.mode&4))P.memoizedState={baseLanes:0},Qg(P,e);else if(e&1073741824)P.memoizedState={baseLanes:0},Qg(P,r!==null?r.baseLanes:e);else return x=r!==null?r.baseLanes|e:e,P.lanes=P.childLanes=1073741824,P.memoizedState={baseLanes:x},Qg(P,x),null;else r!==null?(v=r.baseLanes|e,P.memoizedState=null):v=e,Qg(P,v);return Sc(x,P,M,e),P.child}function lT(x,P){var e=P.ref;(x===null&&e!==null||x!==null&&x.ref!==e)&&(P.flags|=128)}function Tb(x,P,e,v,M){var r=Cc(e)?Zd:qu.current;return r=g0(P,r),l0(P,M),e=K2(x,P,e,v,r,M),x!==null&&!oh?(P.updateQueue=x.updateQueue,P.flags&=-517,x.lanes&=~M,lp(x,P,M)):(P.flags|=1,Sc(x,P,e,M),P.child)}function Z3(x,P,e,v,M){if(Cc(e)){var r=!0;h1(P)}else r=!1;if(l0(P,M),P.stateNode===null)x!==null&&(x.alternate=null,P.alternate=null,P.flags|=2),$4(P,e,v),xb(P,e,v,M),v=!0;else if(x===null){var n=P.stateNode,l=P.memoizedProps;n.props=l;var c=n.context,t=e.contextType;typeof t=="object"&&t!==null?t=Ef(t):(t=Cc(e)?Zd:qu.current,t=g0(P,t));var f=e.getDerivedStateFromProps,a=typeof f=="function"||typeof n.getSnapshotBeforeUpdate=="function";a||typeof n.UNSAFE_componentWillReceiveProps!="function"&&typeof n.componentWillReceiveProps!="function"||(l!==v||c!==t)&&B3(P,n,v,t),Vp=!1;var o=P.memoizedState;n.state=o,Zm(P,v,n,M),c=P.memoizedState,l!==v||o!==c||Ec.current||Vp?(typeof f=="function"&&(N1(P,e,f,v),c=P.memoizedState),(l=Vp||N3(P,e,l,v,o,c,t))?(a||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount()),typeof n.componentDidMount=="function"&&(P.flags|=4)):(typeof n.componentDidMount=="function"&&(P.flags|=4),P.memoizedProps=v,P.memoizedState=c),n.props=v,n.state=c,n.context=t,v=l):(typeof n.componentDidMount=="function"&&(P.flags|=4),v=!1)}else{n=P.stateNode,Z4(x,P),l=P.memoizedProps,t=P.type===P.elementType?l:ih(P.type,l),n.props=t,a=P.pendingProps,o=n.context,c=e.contextType,typeof c=="object"&&c!==null?c=Ef(c):(c=Cc(e)?Zd:qu.current,c=g0(P,c));var u=e.getDerivedStateFromProps;(f=typeof u=="function"||typeof n.getSnapshotBeforeUpdate=="function")||typeof n.UNSAFE_componentWillReceiveProps!="function"&&typeof n.componentWillReceiveProps!="function"||(l!==a||o!==c)&&B3(P,n,v,c),Vp=!1,o=P.memoizedState,n.state=o,Zm(P,v,n,M);var h=P.memoizedState;l!==a||o!==h||Ec.current||Vp?(typeof u=="function"&&(N1(P,e,u,v),h=P.memoizedState),(t=Vp||N3(P,e,t,v,o,h,c))?(f||typeof n.UNSAFE_componentWillUpdate!="function"&&typeof n.componentWillUpdate!="function"||(typeof n.componentWillUpdate=="function"&&n.componentWillUpdate(v,h,c),typeof n.UNSAFE_componentWillUpdate=="function"&&n.UNSAFE_componentWillUpdate(v,h,c)),typeof n.componentDidUpdate=="function"&&(P.flags|=4),typeof n.getSnapshotBeforeUpdate=="function"&&(P.flags|=256)):(typeof n.componentDidUpdate!="function"||l===x.memoizedProps&&o===x.memoizedState||(P.flags|=4),typeof n.getSnapshotBeforeUpdate!="function"||l===x.memoizedProps&&o===x.memoizedState||(P.flags|=256),P.memoizedProps=v,P.memoizedState=h),n.props=v,n.state=h,n.context=c,v=t):(typeof n.componentDidUpdate!="function"||l===x.memoizedProps&&o===x.memoizedState||(P.flags|=4),typeof n.getSnapshotBeforeUpdate!="function"||l===x.memoizedProps&&o===x.memoizedState||(P.flags|=256),v=!1)}return Ab(x,P,e,v,r,M)}function Ab(x,P,e,v,M,r){lT(x,P);var n=(P.flags&64)!==0;if(!v&&!n)return M&&D3(P,e,!1),lp(x,P,r);v=P.stateNode,CM.current=P;var l=n&&typeof e.getDerivedStateFromError!="function"?null:v.render();return P.flags|=1,x!==null&&n?(P.child=B1(P,x.child,null,r),P.child=B1(P,null,l,r)):Sc(x,P,l,r),P.memoizedState=v.state,M&&D3(P,e,!0),P.child}function K3(x){var P=x.stateNode;P.pendingContext?R3(x,P.pendingContext,P.pendingContext!==P.context):P.context&&R3(x,P.context,!1),bb(x,P.containerInfo)}var Jg={dehydrated:null,retryLane:0};function $3(x,P,e){var v=P.pendingProps,M=Ll.current,r=!1,n;return(n=(P.flags&64)!==0)||(n=x!==null&&x.memoizedState===null?!1:(M&2)!==0),n?(r=!0,P.flags&=-65):x!==null&&x.memoizedState===null||v.fallback===void 0||v.unstable_avoidThisFallback===!0||(M|=1),Pl(Ll,M&1),x===null?(v.fallback!==void 0&&_b(P),x=v.children,M=v.fallback,r?(x=J3(P,x,M,e),P.child.memoizedState={baseLanes:e},P.memoizedState=Jg,x):typeof v.unstable_expectedLoadTime=="number"?(x=J3(P,x,M,e),P.child.memoizedState={baseLanes:e},P.memoizedState=Jg,P.lanes=33554432,x):(e=i_({mode:"visible",children:x},P.mode,e,null),e.return=P,P.child=e)):x.memoizedState!==null?r?(v=q3(x,P,v.children,v.fallback,e),r=P.child,M=x.child.memoizedState,r.memoizedState=M===null?{baseLanes:e}:{baseLanes:M.baseLanes|e},r.childLanes=x.childLanes&~e,P.memoizedState=Jg,v):(e=Q3(x,P,v.children,e),P.memoizedState=null,e):r?(v=q3(x,P,v.children,v.fallback,e),r=P.child,M=x.child.memoizedState,r.memoizedState=M===null?{baseLanes:e}:{baseLanes:M.baseLanes|e},r.childLanes=x.childLanes&~e,P.memoizedState=Jg,v):(e=Q3(x,P,v.children,e),P.memoizedState=null,e)}function J3(x,P,e,v){var M=x.mode,r=x.child;return P={mode:"hidden",children:P},!(M&2)&&r!==null?(r.childLanes=0,r.pendingProps=P):r=i_(P,M,0,null),e=h0(e,M,v,null),r.return=x,e.return=x,r.sibling=e,x.child=r,e}function Q3(x,P,e,v){var M=x.child;return x=M.sibling,e=id(M,{mode:"visible",children:e}),!(P.mode&2)&&(e.lanes=v),e.return=P,e.sibling=null,x!==null&&(x.nextEffect=null,x.flags=8,P.firstEffect=P.lastEffect=x),P.child=e}function q3(x,P,e,v,M){var r=P.mode,n=x.child;x=n.sibling;var l={mode:"hidden",children:e};return!(r&2)&&P.child!==n?(e=P.child,e.childLanes=0,e.pendingProps=l,n=e.lastEffect,n!==null?(P.firstEffect=e.firstEffect,P.lastEffect=n,n.nextEffect=null):P.firstEffect=P.lastEffect=null):e=id(n,l),x!==null?v=id(x,v):(v=h0(v,r,M,null),v.flags|=2),v.return=P,e.return=P,e.sibling=v,P.child=e,v}function ew(x,P){x.lanes|=P;var e=x.alternate;e!==null&&(e.lanes|=P),X4(x.return,P)}function Ax(x,P,e,v,M,r){var n=x.memoizedState;n===null?x.memoizedState={isBackwards:P,rendering:null,renderingStartTime:0,last:v,tail:e,tailMode:M,lastEffect:r}:(n.isBackwards=P,n.rendering=null,n.renderingStartTime=0,n.last=v,n.tail=e,n.tailMode=M,n.lastEffect=r)}function tw(x,P,e){var v=P.pendingProps,M=v.revealOrder,r=v.tail;if(Sc(x,P,v.children,e),v=Ll.current,v&2)v=v&1|2,P.flags|=64;else{if(x!==null&&x.flags&64)e:for(x=P.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&ew(x,e);else if(x.tag===19)ew(x,e);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===P)break e;for(;x.sibling===null;){if(x.return===null||x.return===P)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}v&=1}if(Pl(Ll,v),!(P.mode&2))P.memoizedState=null;else switch(M){case"forwards":for(e=P.child,M=null;e!==null;)x=e.alternate,x!==null&&U1(x)===null&&(M=e),e=e.sibling;e=M,e===null?(M=P.child,P.child=null):(M=e.sibling,e.sibling=null),Ax(P,!1,M,e,r,P.lastEffect);break;case"backwards":for(e=null,M=P.child,P.child=null;M!==null;){if(x=M.alternate,x!==null&&U1(x)===null){P.child=M;break}x=M.sibling,M.sibling=e,e=M,M=x}Ax(P,!0,e,null,r,P.lastEffect);break;case"together":Ax(P,!1,null,null,void 0,P.lastEffect);break;default:P.memoizedState=null}return P.child}function lp(x,P,e){if(x!==null&&(P.dependencies=x.dependencies),ug|=P.lanes,e&P.childLanes){if(x!==null&&P.child!==x.child)throw Error(Va(153));if(P.child!==null){for(x=P.child,e=id(x,x.pendingProps),P.child=e,e.return=P;x.sibling!==null;)x=x.sibling,e=e.sibling=id(x,x.pendingProps),e.return=P;e.sibling=null}return P.child}return null}var uT,kb,cT,fT;uT=function(x,P){for(var e=P.child;e!==null;){if(e.tag===5||e.tag===6)x.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===P)break;for(;e.sibling===null;){if(e.return===null||e.return===P)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};kb=function(){};cT=function(x,P,e,v){var M=x.memoizedProps;if(M!==v){x=P.stateNode,jd(Ih.current);var r=null;switch(e){case"input":M=Qx(x,M),v=Qx(x,v),r=[];break;case"option":M=tb(x,M),v=tb(x,v),r=[];break;case"select":M=ll({},M,{value:void 0}),v=ll({},v,{value:void 0}),r=[];break;case"textarea":M=rb(x,M),v=rb(x,v),r=[];break;default:typeof M.onClick!="function"&&typeof v.onClick=="function"&&(x.onclick=R1)}ib(e,v);var n;e=null;for(t in M)if(!v.hasOwnProperty(t)&&M.hasOwnProperty(t)&&M[t]!=null)if(t==="style"){var l=M[t];for(n in l)l.hasOwnProperty(n)&&(e||(e={}),e[n]="")}else t!=="dangerouslySetInnerHTML"&&t!=="children"&&t!=="suppressContentEditableWarning"&&t!=="suppressHydrationWarning"&&t!=="autoFocus"&&(Nm.hasOwnProperty(t)?r||(r=[]):(r=r||[]).push(t,null));for(t in v){var c=v[t];if(l=M!=null?M[t]:void 0,v.hasOwnProperty(t)&&c!==l&&(c!=null||l!=null))if(t==="style")if(l){for(n in l)!l.hasOwnProperty(n)||c&&c.hasOwnProperty(n)||(e||(e={}),e[n]="");for(n in c)c.hasOwnProperty(n)&&l[n]!==c[n]&&(e||(e={}),e[n]=c[n])}else e||(r||(r=[]),r.push(t,e)),e=c;else t==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(r=r||[]).push(t,c)):t==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(t,""+c):t!=="suppressContentEditableWarning"&&t!=="suppressHydrationWarning"&&(Nm.hasOwnProperty(t)?(c!=null&&t==="onScroll"&&Ws("scroll",x),r||l===c||(r=[])):typeof c=="object"&&c!==null&&c.$$typeof===k2?c.toString():(r=r||[]).push(t,c))}e&&(r=r||[]).push("style",e);var t=r;(P.updateQueue=t)&&(P.flags|=4)}};fT=function(x,P,e,v){e!==v&&(P.flags|=4)};function lm(x,P){if(!zh)switch(x.tailMode){case"hidden":P=x.tail;for(var e=null;P!==null;)P.alternate!==null&&(e=P),P=P.sibling;e===null?x.tail=null:e.sibling=null;break;case"collapsed":e=x.tail;for(var v=null;e!==null;)e.alternate!==null&&(v=e),e=e.sibling;v===null?P||x.tail===null?x.tail=null:x.tail.sibling=null:v.sibling=null}}function LM(x,P,e){var v=P.pendingProps;switch(P.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Cc(P.type)&&I1(),null;case 3:return x0(),Ks(Ec),Ks(qu),X2(),v=P.stateNode,v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(x===null||x.child===null)&&($g(P)?P.flags|=4:v.hydrate||(P.flags|=256)),kb(P),null;case 5:Y2(P);var M=jd($m.current);if(e=P.type,x!==null&&P.stateNode!=null)cT(x,P,e,v,M),x.ref!==P.ref&&(P.flags|=128);else{if(!v){if(P.stateNode===null)throw Error(Va(166));return null}if(x=jd(Ih.current),$g(P)){v=P.stateNode,e=P.type;var r=P.memoizedProps;switch(v[Gp]=P,v[D1]=r,e){case"dialog":Ws("cancel",v),Ws("close",v);break;case"iframe":case"object":case"embed":Ws("load",v);break;case"video":case"audio":for(x=0;x<ym.length;x++)Ws(ym[x],v);break;case"source":Ws("error",v);break;case"img":case"image":case"link":Ws("error",v),Ws("load",v);break;case"details":Ws("toggle",v);break;case"input":t3(v,r),Ws("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!r.multiple},Ws("invalid",v);break;case"textarea":n3(v,r),Ws("invalid",v)}ib(e,r),x=null;for(var n in r)r.hasOwnProperty(n)&&(M=r[n],n==="children"?typeof M=="string"?v.textContent!==M&&(x=["children",M]):typeof M=="number"&&v.textContent!==""+M&&(x=["children",""+M]):Nm.hasOwnProperty(n)&&M!=null&&n==="onScroll"&&Ws("scroll",v));switch(e){case"input":Gg(v),r3(v,r,!0);break;case"textarea":Gg(v),a3(v);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(v.onclick=R1)}v=x,P.updateQueue=v,v!==null&&(P.flags|=4)}else{switch(n=M.nodeType===9?M:M.ownerDocument,x===nb.html&&(x=a4(e)),x===nb.html?e==="script"?(x=n.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild)):typeof v.is=="string"?x=n.createElement(e,{is:v.is}):(x=n.createElement(e),e==="select"&&(n=x,v.multiple?n.multiple=!0:v.size&&(n.size=v.size))):x=n.createElementNS(x,e),x[Gp]=P,x[D1]=v,uT(x,P,!1,!1),P.stateNode=x,n=ob(e,v),e){case"dialog":Ws("cancel",x),Ws("close",x),M=v;break;case"iframe":case"object":case"embed":Ws("load",x),M=v;break;case"video":case"audio":for(M=0;M<ym.length;M++)Ws(ym[M],x);M=v;break;case"source":Ws("error",x),M=v;break;case"img":case"image":case"link":Ws("error",x),Ws("load",x),M=v;break;case"details":Ws("toggle",x),M=v;break;case"input":t3(x,v),M=Qx(x,v),Ws("invalid",x);break;case"option":M=tb(x,v);break;case"select":x._wrapperState={wasMultiple:!!v.multiple},M=ll({},v,{value:void 0}),Ws("invalid",x);break;case"textarea":n3(x,v),M=rb(x,v),Ws("invalid",x);break;default:M=v}ib(e,M);var l=M;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];r==="style"?s4(x,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&i4(x,c)):r==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&Bm(x,c):typeof c=="number"&&Bm(x,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Nm.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Ws("scroll",x):c!=null&&x2(x,r,c,n))}switch(e){case"input":Gg(x),r3(x,v,!1);break;case"textarea":Gg(x),a3(x);break;case"option":v.value!=null&&x.setAttribute("value",""+td(v.value));break;case"select":x.multiple=!!v.multiple,r=v.value,r!=null?a0(x,!!v.multiple,r,!1):v.defaultValue!=null&&a0(x,!!v.multiple,v.defaultValue,!0);break;default:typeof M.onClick=="function"&&(x.onclick=R1)}N4(e,v)&&(P.flags|=4)}P.ref!==null&&(P.flags|=128)}return null;case 6:if(x&&P.stateNode!=null)fT(x,P,x.memoizedProps,v);else{if(typeof v!="string"&&P.stateNode===null)throw Error(Va(166));e=jd($m.current),jd(Ih.current),$g(P)?(v=P.stateNode,e=P.memoizedProps,v[Gp]=P,v.nodeValue!==e&&(P.flags|=4)):(v=(e.nodeType===9?e:e.ownerDocument).createTextNode(v),v[Gp]=P,P.stateNode=v)}return null;case 13:return Ks(Ll),v=P.memoizedState,P.flags&64?(P.lanes=e,P):(v=v!==null,e=!1,x===null?P.memoizedProps.fallback!==void 0&&$g(P):e=x.memoizedState!==null,v&&!e&&P.mode&2&&(x===null&&P.memoizedProps.unstable_avoidThisFallback!==!0||Ll.current&1?Bu===0&&(Bu=3):((Bu===0||Bu===3)&&(Bu=4),fc===null||!(ug&134217727)&&!(E0&134217727)||c0(fc,Qu))),(v||e)&&(P.flags|=4),null);case 4:return x0(),kb(P),x===null&&z4(P.stateNode.containerInfo),null;case 10:return G2(P),null;case 17:return Cc(P.type)&&I1(),null;case 19:if(Ks(Ll),v=P.memoizedState,v===null)return null;if(r=(P.flags&64)!==0,n=v.rendering,n===null)if(r)lm(v,!1);else{if(Bu!==0||x!==null&&x.flags&64)for(x=P.child;x!==null;){if(n=U1(x),n!==null){for(P.flags|=64,lm(v,!1),r=n.updateQueue,r!==null&&(P.updateQueue=r,P.flags|=4),v.lastEffect===null&&(P.firstEffect=null),P.lastEffect=v.lastEffect,v=e,e=P.child;e!==null;)r=e,x=v,r.flags&=2,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null,n=r.alternate,n===null?(r.childLanes=0,r.lanes=x,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,r.type=n.type,x=n.dependencies,r.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext}),e=e.sibling;return Pl(Ll,Ll.current&1|2),P.child}x=x.sibling}v.tail!==null&&Ju()>Pb&&(P.flags|=64,r=!0,lm(v,!1),P.lanes=33554432)}else{if(!r)if(x=U1(n),x!==null){if(P.flags|=64,r=!0,e=x.updateQueue,e!==null&&(P.updateQueue=e,P.flags|=4),lm(v,!0),v.tail===null&&v.tailMode==="hidden"&&!n.alternate&&!zh)return P=P.lastEffect=v.lastEffect,P!==null&&(P.nextEffect=null),null}else 2*Ju()-v.renderingStartTime>Pb&&e!==1073741824&&(P.flags|=64,r=!0,lm(v,!1),P.lanes=33554432);v.isBackwards?(n.sibling=P.child,P.child=n):(e=v.last,e!==null?e.sibling=n:P.child=n,v.last=n)}return v.tail!==null?(e=v.tail,v.rendering=e,v.tail=e.sibling,v.lastEffect=P.lastEffect,v.renderingStartTime=Ju(),e.sibling=null,P=Ll.current,Pl(Ll,r?P&1|2:P&1),e):null;case 23:case 24:return n_(),x!==null&&x.memoizedState!==null!=(P.memoizedState!==null)&&v.mode!=="unstable-defer-without-hiding"&&(P.flags|=4),null}throw Error(Va(156,P.tag))}function PM(x){switch(x.tag){case 1:Cc(x.type)&&I1();var P=x.flags;return P&4096?(x.flags=P&-4097|64,x):null;case 3:if(x0(),Ks(Ec),Ks(qu),X2(),P=x.flags,P&64)throw Error(Va(285));return x.flags=P&-4097|64,x;case 5:return Y2(x),null;case 13:return Ks(Ll),P=x.flags,P&4096?(x.flags=P&-4097|64,x):null;case 19:return Ks(Ll),null;case 4:return x0(),null;case 10:return G2(x),null;case 23:case 24:return n_(),null;default:return null}}function q2(x,P){try{var e="",v=P;do e+=fk(v),v=v.return;while(v);var M=e}catch(r){M=`
Error generating stack: `+r.message+`
`+r.stack}return{value:x,source:P,stack:M}}function Mb(x,P){try{console.error(P.value)}catch(e){setTimeout(function(){throw e})}}var RM=typeof WeakMap=="function"?WeakMap:Map;function hT(x,P,e){e=Kp(-1,e),e.tag=3,e.payload={element:null};var v=P.value;return e.callback=function(){X1||(X1=!0,Rb=v),Mb(x,P)},e}function pT(x,P,e){e=Kp(-1,e),e.tag=3;var v=x.type.getDerivedStateFromError;if(typeof v=="function"){var M=P.value;e.payload=function(){return Mb(x,P),v(M)}}var r=x.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){typeof v!="function"&&(Ph===null?Ph=new Set([this]):Ph.add(this),Mb(x,P));var n=P.stack;this.componentDidCatch(P.value,{componentStack:n!==null?n:""})}),e}var DM=typeof WeakSet=="function"?WeakSet:Set;function rw(x){var P=x.ref;if(P!==null)if(typeof P=="function")try{P(null)}catch(e){qp(x,e)}else P.current=null}function IM(x,P){switch(P.tag){case 0:case 11:case 15:case 22:return;case 1:if(P.flags&256&&x!==null){var e=x.memoizedProps,v=x.memoizedState;x=P.stateNode,P=x.getSnapshotBeforeUpdate(P.elementType===P.type?e:ih(P.type,e),v),x.__reactInternalSnapshotBeforeUpdate=P}return;case 3:P.flags&256&&U2(P.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Va(163))}function zM(x,P,e){switch(e.tag){case 0:case 11:case 15:case 22:if(P=e.updateQueue,P=P!==null?P.lastEffect:null,P!==null){x=P=P.next;do{if((x.tag&3)===3){var v=x.create;x.destroy=v()}x=x.next}while(x!==P)}if(P=e.updateQueue,P=P!==null?P.lastEffect:null,P!==null){x=P=P.next;do{var M=x;v=M.next,M=M.tag,M&4&&M&1&&(wT(e,x),jM(e,x)),x=v}while(x!==P)}return;case 1:x=e.stateNode,e.flags&4&&(P===null?x.componentDidMount():(v=e.elementType===e.type?P.memoizedProps:ih(e.type,P.memoizedProps),x.componentDidUpdate(v,P.memoizedState,x.__reactInternalSnapshotBeforeUpdate))),P=e.updateQueue,P!==null&&F3(e,P,x);return;case 3:if(P=e.updateQueue,P!==null){if(x=null,e.child!==null)switch(e.child.tag){case 5:x=e.child.stateNode;break;case 1:x=e.child.stateNode}F3(e,P,x)}return;case 5:x=e.stateNode,P===null&&e.flags&4&&N4(e.type,e.memoizedProps)&&x.focus();return;case 6:return;case 4:return;case 12:return;case 13:e.memoizedState===null&&(e=e.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&g4(e))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Va(163))}function nw(x,P){for(var e=x;;){if(e.tag===5){var v=e.stateNode;if(P)v=v.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{v=e.stateNode;var M=e.memoizedProps.style;M=M!=null&&M.hasOwnProperty("display")?M.display:null,v.style.display=o4("display",M)}}else if(e.tag===6)e.stateNode.nodeValue=P?"":e.memoizedProps;else if((e.tag!==23&&e.tag!==24||e.memoizedState===null||e===x)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===x)break;for(;e.sibling===null;){if(e.return===null||e.return===x)return;e=e.return}e.sibling.return=e.return,e=e.sibling}}function aw(x,P){if(Yd&&typeof Yd.onCommitFiberUnmount=="function")try{Yd.onCommitFiberUnmount(V2,P)}catch{}switch(P.tag){case 0:case 11:case 14:case 15:case 22:if(x=P.updateQueue,x!==null&&(x=x.lastEffect,x!==null)){var e=x=x.next;do{var v=e,M=v.destroy;if(v=v.tag,M!==void 0)if(v&4)wT(P,e);else{v=P;try{M()}catch(r){qp(v,r)}}e=e.next}while(e!==x)}break;case 1:if(rw(P),x=P.stateNode,typeof x.componentWillUnmount=="function")try{x.props=P.memoizedProps,x.state=P.memoizedState,x.componentWillUnmount()}catch(r){qp(P,r)}break;case 5:rw(P);break;case 4:dT(x,P)}}function iw(x){x.alternate=null,x.child=null,x.dependencies=null,x.firstEffect=null,x.lastEffect=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.return=null,x.updateQueue=null}function ow(x){return x.tag===5||x.tag===3||x.tag===4}function sw(x){e:{for(var P=x.return;P!==null;){if(ow(P))break e;P=P.return}throw Error(Va(160))}var e=P;switch(P=e.stateNode,e.tag){case 5:var v=!1;break;case 3:P=P.containerInfo,v=!0;break;case 4:P=P.containerInfo,v=!0;break;default:throw Error(Va(161))}e.flags&16&&(Bm(P,""),e.flags&=-17);e:t:for(e=x;;){for(;e.sibling===null;){if(e.return===null||ow(e.return)){e=null;break e}e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2)){e=e.stateNode;break e}}v?Sb(x,e,P):Eb(x,e,P)}function Sb(x,P,e){var v=x.tag,M=v===5||v===6;if(M)x=M?x.stateNode:x.stateNode.instance,P?e.nodeType===8?e.parentNode.insertBefore(x,P):e.insertBefore(x,P):(e.nodeType===8?(P=e.parentNode,P.insertBefore(x,e)):(P=e,P.appendChild(x)),e=e._reactRootContainer,e!=null||P.onclick!==null||(P.onclick=R1));else if(v!==4&&(x=x.child,x!==null))for(Sb(x,P,e),x=x.sibling;x!==null;)Sb(x,P,e),x=x.sibling}function Eb(x,P,e){var v=x.tag,M=v===5||v===6;if(M)x=M?x.stateNode:x.stateNode.instance,P?e.insertBefore(x,P):e.appendChild(x);else if(v!==4&&(x=x.child,x!==null))for(Eb(x,P,e),x=x.sibling;x!==null;)Eb(x,P,e),x=x.sibling}function dT(x,P){for(var e=P,v=!1,M,r;;){if(!v){v=e.return;e:for(;;){if(v===null)throw Error(Va(160));switch(M=v.stateNode,v.tag){case 5:r=!1;break e;case 3:M=M.containerInfo,r=!0;break e;case 4:M=M.containerInfo,r=!0;break e}v=v.return}v=!0}if(e.tag===5||e.tag===6){e:for(var n=x,l=e,c=l;;)if(aw(n,c),c.child!==null&&c.tag!==4)c.child.return=c,c=c.child;else{if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(n=M,l=e.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):M.removeChild(e.stateNode)}else if(e.tag===4){if(e.child!==null){M=e.stateNode.containerInfo,r=!0,e.child.return=e,e=e.child;continue}}else if(aw(x,e),e.child!==null){e.child.return=e,e=e.child;continue}if(e===P)break;for(;e.sibling===null;){if(e.return===null||e.return===P)return;e=e.return,e.tag===4&&(v=!1)}e.sibling.return=e.return,e=e.sibling}}function kx(x,P){switch(P.tag){case 0:case 11:case 14:case 15:case 22:var e=P.updateQueue;if(e=e!==null?e.lastEffect:null,e!==null){var v=e=e.next;do(v.tag&3)===3&&(x=v.destroy,v.destroy=void 0,x!==void 0&&x()),v=v.next;while(v!==e)}return;case 1:return;case 5:if(e=P.stateNode,e!=null){v=P.memoizedProps;var M=x!==null?x.memoizedProps:v;x=P.type;var r=P.updateQueue;if(P.updateQueue=null,r!==null){for(e[D1]=v,x==="input"&&v.type==="radio"&&v.name!=null&&r4(e,v),ob(x,M),P=ob(x,v),M=0;M<r.length;M+=2){var n=r[M],l=r[M+1];n==="style"?s4(e,l):n==="dangerouslySetInnerHTML"?i4(e,l):n==="children"?Bm(e,l):x2(e,n,l,P)}switch(x){case"input":qx(e,v);break;case"textarea":n4(e,v);break;case"select":x=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!v.multiple,r=v.value,r!=null?a0(e,!!v.multiple,r,!1):x!==!!v.multiple&&(v.defaultValue!=null?a0(e,!!v.multiple,v.defaultValue,!0):a0(e,!!v.multiple,v.multiple?[]:"",!1))}}}return;case 6:if(P.stateNode===null)throw Error(Va(162));P.stateNode.nodeValue=P.memoizedProps;return;case 3:e=P.stateNode,e.hydrate&&(e.hydrate=!1,g4(e.containerInfo));return;case 12:return;case 13:P.memoizedState!==null&&(r_=Ju(),nw(P.child,!0)),lw(P);return;case 19:lw(P);return;case 17:return;case 23:case 24:nw(P,P.memoizedState!==null);return}throw Error(Va(163))}function lw(x){var P=x.updateQueue;if(P!==null){x.updateQueue=null;var e=x.stateNode;e===null&&(e=x.stateNode=new DM),P.forEach(function(v){var M=YM.bind(null,x,v);e.has(v)||(e.add(v),v.then(M,M))})}}function OM(x,P){return x!==null&&(x=x.memoizedState,x===null||x.dehydrated!==null)?(P=P.memoizedState,P!==null&&P.dehydrated===null):!1}var FM=Math.ceil,Y1=qd.ReactCurrentDispatcher,e_=qd.ReactCurrentOwner,$i=0,fc=null,cu=null,Qu=0,$d=0,Cb=ud(0),Bu=0,hy=null,S0=0,ug=0,E0=0,t_=0,Lb=null,r_=0,Pb=1/0;function C0(){Pb=Ju()+500}var pi=null,X1=!1,Rb=null,Ph=null,ad=!1,Rm=null,xm=90,Db=[],Ib=[],fp=null,Dm=0,zb=null,d1=-1,op=0,v1=0,Im=null,m1=!1;function Kc(){return $i&48?Ju():d1!==-1?d1:d1=Ju()}function Jp(x){if(x=x.mode,!(x&2))return 1;if(!(x&4))return y0()===99?1:2;if(op===0&&(op=S0),AM.transition!==0){v1!==0&&(v1=Lb!==null?Lb.pendingLanes:0),x=op;var P=4186112&~v1;return P&=-P,P===0&&(x=4186112&~x,P=x&-x,P===0&&(P=8192)),P}return x=y0(),$i&4&&x===98?x=L1(12,op):(x=Sk(x),x=L1(x,op)),x}function Qp(x,P,e){if(50<Dm)throw Dm=0,zb=null,Error(Va(185));if(x=py(x,P),x===null)return null;iy(x,P,e),x===fc&&(E0|=P,Bu===4&&c0(x,Qu));var v=y0();P===1?$i&8&&!($i&48)?Ob(x):(Cf(x,e),$i===0&&(C0(),Fh())):(!($i&4)||v!==98&&v!==99||(fp===null?fp=new Set([x]):fp.add(x)),Cf(x,e)),Lb=x}function py(x,P){x.lanes|=P;var e=x.alternate;for(e!==null&&(e.lanes|=P),e=x,x=x.return;x!==null;)x.childLanes|=P,e=x.alternate,e!==null&&(e.childLanes|=P),e=x,x=x.return;return e.tag===3?e.stateNode:null}function Cf(x,P){for(var e=x.callbackNode,v=x.suspendedLanes,M=x.pingedLanes,r=x.expirationTimes,n=x.pendingLanes;0<n;){var l=31-rd(n),c=1<<l,t=r[l];if(t===-1){if(!(c&v)||c&M){t=P,Xv(c);var f=Bs;r[l]=10<=f?t+250:6<=f?t+5e3:-1}}else t<=P&&(x.expiredLanes|=c);n&=~c}if(v=jm(x,x===fc?Qu:0),P=Bs,v===0)e!==null&&(e!==bx&&gb(e),x.callbackNode=null,x.callbackPriority=0);else{if(e!==null){if(x.callbackPriority===P)return;e!==bx&&gb(e)}P===15?(e=Ob.bind(null,x),ip===null?(ip=[e],p1=H2(cy,Y4)):ip.push(e),e=bx):P===14?e=Xm(99,Ob.bind(null,x)):(e=Ek(P),e=Xm(e,vT.bind(null,x))),x.callbackPriority=P,x.callbackNode=e}}function vT(x){if(d1=-1,v1=op=0,$i&48)throw Error(Va(327));var P=x.callbackNode;if(cd()&&x.callbackNode!==P)return null;var e=jm(x,x===fc?Qu:0);if(e===0)return null;var v=e,M=$i;$i|=16;var r=xT();(fc!==x||Qu!==v)&&(C0(),f0(x,v));do try{UM();break}catch(l){yT(x,l)}while(1);if(j2(),Y1.current=r,$i=M,cu!==null?v=0:(fc=null,Qu=0,v=Bu),S0&E0)f0(x,0);else if(v!==0){if(v===2&&($i|=64,x.hydrate&&(x.hydrate=!1,U2(x.containerInfo)),e=A4(x),e!==0&&(v=bm(x,e))),v===1)throw P=hy,f0(x,0),c0(x,e),Cf(x,Ju()),P;switch(x.finishedWork=x.current.alternate,x.finishedLanes=e,v){case 0:case 1:throw Error(Va(345));case 2:Fd(x);break;case 3:if(c0(x,e),(e&62914560)===e&&(v=r_+500-Ju(),10<v)){if(jm(x,0)!==0)break;if(M=x.suspendedLanes,(M&e)!==e){Kc(),x.pingedLanes|=x.suspendedLanes&M;break}x.timeoutHandle=C3(Fd.bind(null,x),v);break}Fd(x);break;case 4:if(c0(x,e),(e&4186112)===e)break;for(v=x.eventTimes,M=-1;0<e;){var n=31-rd(e);r=1<<n,n=v[n],n>M&&(M=n),e&=~r}if(e=M,e=Ju()-e,e=(120>e?120:480>e?480:1080>e?1080:1920>e?1920:3e3>e?3e3:4320>e?4320:1960*FM(e/1960))-e,10<e){x.timeoutHandle=C3(Fd.bind(null,x),e);break}Fd(x);break;case 5:Fd(x);break;default:throw Error(Va(329))}}return Cf(x,Ju()),x.callbackNode===P?vT.bind(null,x):null}function c0(x,P){for(P&=~t_,P&=~E0,x.suspendedLanes|=P,x.pingedLanes&=~P,x=x.expirationTimes;0<P;){var e=31-rd(P),v=1<<e;x[e]=-1,P&=~v}}function Ob(x){if($i&48)throw Error(Va(327));if(cd(),x===fc&&x.expiredLanes&Qu){var P=Qu,e=bm(x,P);S0&E0&&(P=jm(x,P),e=bm(x,P))}else P=jm(x,0),e=bm(x,P);if(x.tag!==0&&e===2&&($i|=64,x.hydrate&&(x.hydrate=!1,U2(x.containerInfo)),P=A4(x),P!==0&&(e=bm(x,P))),e===1)throw e=hy,f0(x,0),c0(x,P),Cf(x,Ju()),e;return x.finishedWork=x.current.alternate,x.finishedLanes=P,Fd(x),Cf(x,Ju()),null}function NM(){if(fp!==null){var x=fp;fp=null,x.forEach(function(P){P.expiredLanes|=24&P.pendingLanes,Cf(P,Ju())})}Fh()}function mT(x,P){var e=$i;$i|=1;try{return x(P)}finally{$i=e,$i===0&&(C0(),Fh())}}function gT(x,P){var e=$i;$i&=-2,$i|=8;try{return x(P)}finally{$i=e,$i===0&&(C0(),Fh())}}function Qg(x,P){Pl(Cb,$d),$d|=P,S0|=P}function n_(){$d=Cb.current,Ks(Cb)}function f0(x,P){x.finishedWork=null,x.finishedLanes=0;var e=x.timeoutHandle;if(e!==-1&&(x.timeoutHandle=-1,yM(e)),cu!==null)for(e=cu.return;e!==null;){var v=e;switch(v.tag){case 1:v=v.type.childContextTypes,v!=null&&I1();break;case 3:x0(),Ks(Ec),Ks(qu),X2();break;case 5:Y2(v);break;case 4:x0();break;case 13:Ks(Ll);break;case 19:Ks(Ll);break;case 10:G2(v);break;case 23:case 24:n_()}e=e.return}fc=x,cu=id(x.current,null),Qu=$d=S0=P,Bu=0,hy=null,t_=E0=ug=0}function yT(x,P){do{var e=cu;try{if(j2(),Lm.current=W1,V1){for(var v=Vl.memoizedState;v!==null;){var M=v.queue;M!==null&&(M.pending=null),v=v.next}V1=!1}if(Jm=0,Fu=$u=Vl=null,Pm=!1,e_.current=null,e===null||e.return===null){Bu=1,hy=P,cu=null;break}e:{var r=x,n=e.return,l=e,c=P;if(P=Qu,l.flags|=2048,l.firstEffect=l.lastEffect=null,c!==null&&typeof c=="object"&&typeof c.then=="function"){var t=c;if(!(l.mode&2)){var f=l.alternate;f?(l.updateQueue=f.updateQueue,l.memoizedState=f.memoizedState,l.lanes=f.lanes):(l.updateQueue=null,l.memoizedState=null)}var a=(Ll.current&1)!==0,o=n;do{var u;if(u=o.tag===13){var h=o.memoizedState;if(h!==null)u=h.dehydrated!==null;else{var i=o.memoizedProps;u=i.fallback===void 0?!1:i.unstable_avoidThisFallback!==!0?!0:!a}}if(u){var s=o.updateQueue;if(s===null){var p=new Set;p.add(t),o.updateQueue=p}else s.add(t);if(!(o.mode&2)){if(o.flags|=64,l.flags|=16384,l.flags&=-2981,l.tag===1)if(l.alternate===null)l.tag=17;else{var d=Kp(-1,1);d.tag=2,$p(l,d)}l.lanes|=1;break e}c=void 0,l=P;var y=r.pingCache;if(y===null?(y=r.pingCache=new RM,c=new Set,y.set(t,c)):(c=y.get(t),c===void 0&&(c=new Set,y.set(t,c))),!c.has(l)){c.add(l);var b=WM.bind(null,r,t,l);t.then(b,b)}o.flags|=4096,o.lanes=P;break e}o=o.return}while(o!==null);c=Error((n0(l.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Bu!==5&&(Bu=2),c=q2(c,l),o=n;do{switch(o.tag){case 3:r=c,o.flags|=4096,P&=-P,o.lanes|=P;var m=hT(o,r,P);O3(o,m);break e;case 1:r=c;var _=o.type,T=o.stateNode;if(!(o.flags&64)&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ph===null||!Ph.has(T)))){o.flags|=4096,P&=-P,o.lanes|=P;var g=pT(o,r,P);O3(o,g);break e}}o=o.return}while(o!==null)}_T(e)}catch(A){P=A,cu===e&&e!==null&&(cu=e=e.return);continue}break}while(1)}function xT(){var x=Y1.current;return Y1.current=W1,x===null?W1:x}function bm(x,P){var e=$i;$i|=16;var v=xT();fc===x&&Qu===P||f0(x,P);do try{BM();break}catch(M){yT(x,M)}while(1);if(j2(),$i=e,Y1.current=v,cu!==null)throw Error(Va(261));return fc=null,Qu=0,Bu}function BM(){for(;cu!==null;)bT(cu)}function UM(){for(;cu!==null&&!_M();)bT(cu)}function bT(x){var P=TT(x.alternate,x,$d);x.memoizedProps=x.pendingProps,P===null?_T(x):cu=P,e_.current=null}function _T(x){var P=x;do{var e=P.alternate;if(x=P.return,P.flags&2048){if(e=PM(P),e!==null){e.flags&=2047,cu=e;return}x!==null&&(x.firstEffect=x.lastEffect=null,x.flags|=2048)}else{if(e=LM(e,P,$d),e!==null){cu=e;return}if(e=P,e.tag!==24&&e.tag!==23||e.memoizedState===null||$d&1073741824||!(e.mode&4)){for(var v=0,M=e.child;M!==null;)v|=M.lanes|M.childLanes,M=M.sibling;e.childLanes=v}x!==null&&!(x.flags&2048)&&(x.firstEffect===null&&(x.firstEffect=P.firstEffect),P.lastEffect!==null&&(x.lastEffect!==null&&(x.lastEffect.nextEffect=P.firstEffect),x.lastEffect=P.lastEffect),1<P.flags&&(x.lastEffect!==null?x.lastEffect.nextEffect=P:x.firstEffect=P,x.lastEffect=P))}if(P=P.sibling,P!==null){cu=P;return}cu=P=x}while(P!==null);Bu===0&&(Bu=5)}function Fd(x){var P=y0();return Kd(99,VM.bind(null,x,P)),null}function VM(x,P){do cd();while(Rm!==null);if($i&48)throw Error(Va(327));var e=x.finishedWork;if(e===null)return null;if(x.finishedWork=null,x.finishedLanes=0,e===x.current)throw Error(Va(177));x.callbackNode=null;var v=e.lanes|e.childLanes,M=v,r=x.pendingLanes&~M;x.pendingLanes=M,x.suspendedLanes=0,x.pingedLanes=0,x.expiredLanes&=M,x.mutableReadLanes&=M,x.entangledLanes&=M,M=x.entanglements;for(var n=x.eventTimes,l=x.expirationTimes;0<r;){var c=31-rd(r),t=1<<c;M[c]=0,n[c]=-1,l[c]=-1,r&=~t}if(fp!==null&&!(v&24)&&fp.has(x)&&fp.delete(x),x===fc&&(cu=fc=null,Qu=0),1<e.flags?e.lastEffect!==null?(e.lastEffect.nextEffect=e,v=e.firstEffect):v=e:v=e.firstEffect,v!==null){if(M=$i,$i|=32,e_.current=null,gx=u1,n=w3(),hb(n)){if("selectionStart"in n)l={start:n.selectionStart,end:n.selectionEnd};else e:if(l=(l=n.ownerDocument)&&l.defaultView||window,(t=l.getSelection&&l.getSelection())&&t.rangeCount!==0){l=t.anchorNode,r=t.anchorOffset,c=t.focusNode,t=t.focusOffset;try{l.nodeType,c.nodeType}catch{l=null;break e}var f=0,a=-1,o=-1,u=0,h=0,i=n,s=null;t:for(;;){for(var p;i!==l||r!==0&&i.nodeType!==3||(a=f+r),i!==c||t!==0&&i.nodeType!==3||(o=f+t),i.nodeType===3&&(f+=i.nodeValue.length),(p=i.firstChild)!==null;)s=i,i=p;for(;;){if(i===n)break t;if(s===l&&++u===r&&(a=f),s===c&&++h===t&&(o=f),(p=i.nextSibling)!==null)break;i=s,s=i.parentNode}i=p}l=a===-1||o===-1?null:{start:a,end:o}}else l=null;l=l||{start:0,end:0}}else l=null;yx={focusedElem:n,selectionRange:l},u1=!1,Im=null,m1=!1,pi=v;do try{HM()}catch(A){if(pi===null)throw Error(Va(330));qp(pi,A),pi=pi.nextEffect}while(pi!==null);Im=null,pi=v;do try{for(n=x;pi!==null;){var d=pi.flags;if(d&16&&Bm(pi.stateNode,""),d&128){var y=pi.alternate;if(y!==null){var b=y.ref;b!==null&&(typeof b=="function"?b(null):b.current=null)}}switch(d&1038){case 2:sw(pi),pi.flags&=-3;break;case 6:sw(pi),pi.flags&=-3,kx(pi.alternate,pi);break;case 1024:pi.flags&=-1025;break;case 1028:pi.flags&=-1025,kx(pi.alternate,pi);break;case 4:kx(pi.alternate,pi);break;case 8:l=pi,dT(n,l);var m=l.alternate;iw(l),m!==null&&iw(m)}pi=pi.nextEffect}}catch(A){if(pi===null)throw Error(Va(330));qp(pi,A),pi=pi.nextEffect}while(pi!==null);if(b=yx,y=w3(),d=b.focusedElem,n=b.selectionRange,y!==d&&d&&d.ownerDocument&&R4(d.ownerDocument.documentElement,d)){for(n!==null&&hb(d)&&(y=n.start,b=n.end,b===void 0&&(b=y),"selectionStart"in d?(d.selectionStart=y,d.selectionEnd=Math.min(b,d.value.length)):(b=(y=d.ownerDocument||document)&&y.defaultView||window,b.getSelection&&(b=b.getSelection(),l=d.textContent.length,m=Math.min(n.start,l),n=n.end===void 0?m:Math.min(n.end,l),!b.extend&&m>n&&(l=n,n=m,m=l),l=_3(d,m),r=_3(d,n),l&&r&&(b.rangeCount!==1||b.anchorNode!==l.node||b.anchorOffset!==l.offset||b.focusNode!==r.node||b.focusOffset!==r.offset)&&(y=y.createRange(),y.setStart(l.node,l.offset),b.removeAllRanges(),m>n?(b.addRange(y),b.extend(r.node,r.offset)):(y.setEnd(r.node,r.offset),b.addRange(y)))))),y=[],b=d;b=b.parentNode;)b.nodeType===1&&y.push({element:b,left:b.scrollLeft,top:b.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<y.length;d++)b=y[d],b.element.scrollLeft=b.left,b.element.scrollTop=b.top}u1=!!gx,yx=gx=null,x.current=e,pi=v;do try{for(d=x;pi!==null;){var _=pi.flags;if(_&36&&zM(d,pi.alternate,pi),_&128){y=void 0;var T=pi.ref;if(T!==null){var g=pi.stateNode;switch(pi.tag){case 5:y=g;break;default:y=g}typeof T=="function"?T(y):T.current=y}}pi=pi.nextEffect}}catch(A){if(pi===null)throw Error(Va(330));qp(pi,A),pi=pi.nextEffect}while(pi!==null);pi=null,TM(),$i=M}else x.current=e;if(ad)ad=!1,Rm=x,xm=P;else for(pi=v;pi!==null;)P=pi.nextEffect,pi.nextEffect=null,pi.flags&8&&(_=pi,_.sibling=null,_.stateNode=null),pi=P;if(v=x.pendingLanes,v===0&&(Ph=null),v===1?x===zb?Dm++:(Dm=0,zb=x):Dm=0,e=e.stateNode,Yd&&typeof Yd.onCommitFiberRoot=="function")try{Yd.onCommitFiberRoot(V2,e,void 0,(e.current.flags&64)===64)}catch{}if(Cf(x,Ju()),X1)throw X1=!1,x=Rb,Rb=null,x;return $i&8||Fh(),null}function HM(){for(;pi!==null;){var x=pi.alternate;m1||Im===null||(pi.flags&8?s3(pi,Im)&&(m1=!0):pi.tag===13&&OM(x,pi)&&s3(pi,Im)&&(m1=!0));var P=pi.flags;P&256&&IM(x,pi),!(P&512)||ad||(ad=!0,Xm(97,function(){return cd(),null})),pi=pi.nextEffect}}function cd(){if(xm!==90){var x=97<xm?97:xm;return xm=90,Kd(x,GM)}return!1}function jM(x,P){Db.push(P,x),ad||(ad=!0,Xm(97,function(){return cd(),null}))}function wT(x,P){Ib.push(P,x),ad||(ad=!0,Xm(97,function(){return cd(),null}))}function GM(){if(Rm===null)return!1;var x=Rm;if(Rm=null,$i&48)throw Error(Va(331));var P=$i;$i|=32;var e=Ib;Ib=[];for(var v=0;v<e.length;v+=2){var M=e[v],r=e[v+1],n=M.destroy;if(M.destroy=void 0,typeof n=="function")try{n()}catch(c){if(r===null)throw Error(Va(330));qp(r,c)}}for(e=Db,Db=[],v=0;v<e.length;v+=2){M=e[v],r=e[v+1];try{var l=M.create;M.destroy=l()}catch(c){if(r===null)throw Error(Va(330));qp(r,c)}}for(l=x.current.firstEffect;l!==null;)x=l.nextEffect,l.nextEffect=null,l.flags&8&&(l.sibling=null,l.stateNode=null),l=x;return $i=P,Fh(),!0}function uw(x,P,e){P=q2(e,P),P=hT(x,P,1),$p(x,P),P=Kc(),x=py(x,1),x!==null&&(iy(x,1,P),Cf(x,P))}function qp(x,P){if(x.tag===3)uw(x,x,P);else for(var e=x.return;e!==null;){if(e.tag===3){uw(e,x,P);break}else if(e.tag===1){var v=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Ph===null||!Ph.has(v))){x=q2(P,x);var M=pT(e,x,1);if($p(e,M),M=Kc(),e=py(e,1),e!==null)iy(e,1,M),Cf(e,M);else if(typeof v.componentDidCatch=="function"&&(Ph===null||!Ph.has(v)))try{v.componentDidCatch(P,x)}catch{}break}}e=e.return}}function WM(x,P,e){var v=x.pingCache;v!==null&&v.delete(P),P=Kc(),x.pingedLanes|=x.suspendedLanes&e,fc===x&&(Qu&e)===e&&(Bu===4||Bu===3&&(Qu&62914560)===Qu&&500>Ju()-r_?f0(x,0):t_|=e),Cf(x,P)}function YM(x,P){var e=x.stateNode;e!==null&&e.delete(P),P=0,P===0&&(P=x.mode,P&2?P&4?(op===0&&(op=S0),P=Zv(62914560&~op),P===0&&(P=4194304)):P=y0()===99?1:2:P=1),e=Kc(),x=py(x,P),x!==null&&(iy(x,P,e),Cf(x,e))}var TT;TT=function(x,P,e){var v=P.lanes;if(x!==null)if(x.memoizedProps!==P.pendingProps||Ec.current)oh=!0;else if(e&v)oh=!!(x.flags&16384);else{switch(oh=!1,P.tag){case 3:K3(P),wx();break;case 5:U3(P);break;case 1:Cc(P.type)&&h1(P);break;case 4:bb(P,P.stateNode.containerInfo);break;case 10:v=P.memoizedProps.value;var M=P.type._context;Pl(z1,M._currentValue),M._currentValue=v;break;case 13:if(P.memoizedState!==null)return e&P.child.childLanes?$3(x,P,e):(Pl(Ll,Ll.current&1),P=lp(x,P,e),P!==null?P.sibling:null);Pl(Ll,Ll.current&1);break;case 19:if(v=(e&P.childLanes)!==0,x.flags&64){if(v)return tw(x,P,e);P.flags|=64}if(M=P.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Pl(Ll,Ll.current),v)break;return null;case 23:case 24:return P.lanes=0,Tx(x,P,e)}return lp(x,P,e)}else oh=!1;switch(P.lanes=0,P.tag){case 2:if(v=P.type,x!==null&&(x.alternate=null,P.alternate=null,P.flags|=2),x=P.pendingProps,M=g0(P,qu.current),l0(P,e),M=K2(null,P,v,x,M,e),P.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0){if(P.tag=1,P.memoizedState=null,P.updateQueue=null,Cc(v)){var r=!0;h1(P)}else r=!1;P.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,W2(P);var n=v.getDerivedStateFromProps;typeof n=="function"&&N1(P,v,n,x),M.updater=fy,P.stateNode=M,M._reactInternals=P,xb(P,v,x,e),P=Ab(null,P,v,!0,r,e)}else P.tag=0,Sc(null,P,M,e),P=P.child;return P;case 16:M=P.elementType;e:{switch(x!==null&&(x.alternate=null,P.alternate=null,P.flags|=2),x=P.pendingProps,r=M._init,M=r(M._payload),P.type=M,r=P.tag=ZM(M),x=ih(M,x),r){case 0:P=Tb(null,P,M,x,e);break e;case 1:P=Z3(null,P,M,x,e);break e;case 11:P=Y3(null,P,M,x,e);break e;case 14:P=X3(null,P,M,ih(M.type,x),v,e);break e}throw Error(Va(306,M,""))}return P;case 0:return v=P.type,M=P.pendingProps,M=P.elementType===v?M:ih(v,M),Tb(x,P,v,M,e);case 1:return v=P.type,M=P.pendingProps,M=P.elementType===v?M:ih(v,M),Z3(x,P,v,M,e);case 3:if(K3(P),v=P.updateQueue,x===null||v===null)throw Error(Va(282));if(v=P.pendingProps,M=P.memoizedState,M=M!==null?M.element:null,Z4(x,P),Zm(P,v,null,e),v=P.memoizedState.element,v===M)wx(),P=lp(x,P,e);else{if(M=P.stateNode,(r=M.hydrate)&&(Wp=s0(P.stateNode.containerInfo.firstChild),sp=P,r=zh=!0),r){if(x=M.mutableSourceEagerHydrationData,x!=null)for(M=0;M<x.length;M+=2)r=x[M],r._workInProgressVersionPrimary=x[M+1],u0.push(r);for(e=Q4(P,null,v,e),P.child=e;e;)e.flags=e.flags&-3|1024,e=e.sibling}else Sc(x,P,v,e),wx();P=P.child}return P;case 5:return U3(P),x===null&&_b(P),v=P.type,M=P.pendingProps,r=x!==null?x.memoizedProps:null,n=M.children,vb(v,M)?n=null:r!==null&&vb(v,r)&&(P.flags|=16),lT(x,P),Sc(x,P,n,e),P.child;case 6:return x===null&&_b(P),null;case 13:return $3(x,P,e);case 4:return bb(P,P.stateNode.containerInfo),v=P.pendingProps,x===null?P.child=B1(P,null,v,e):Sc(x,P,v,e),P.child;case 11:return v=P.type,M=P.pendingProps,M=P.elementType===v?M:ih(v,M),Y3(x,P,v,M,e);case 7:return Sc(x,P,P.pendingProps,e),P.child;case 8:return Sc(x,P,P.pendingProps.children,e),P.child;case 12:return Sc(x,P,P.pendingProps.children,e),P.child;case 10:e:{v=P.type._context,M=P.pendingProps,n=P.memoizedProps,r=M.value;var l=P.type._context;if(Pl(z1,l._currentValue),l._currentValue=r,n!==null)if(l=n.value,r=kf(l,r)?0:(typeof v._calculateChangedBits=="function"?v._calculateChangedBits(l,r):1073741823)|0,r===0){if(n.children===M.children&&!Ec.current){P=lp(x,P,e);break e}}else for(l=P.child,l!==null&&(l.return=P);l!==null;){var c=l.dependencies;if(c!==null){n=l.child;for(var t=c.firstContext;t!==null;){if(t.context===v&&t.observedBits&r){l.tag===1&&(t=Kp(-1,e&-e),t.tag=2,$p(l,t)),l.lanes|=e,t=l.alternate,t!==null&&(t.lanes|=e),X4(l.return,e),c.lanes|=e;break}t=t.next}}else n=l.tag===10&&l.type===P.type?null:l.child;if(n!==null)n.return=l;else for(n=l;n!==null;){if(n===P){n=null;break}if(l=n.sibling,l!==null){l.return=n.return,n=l;break}n=n.return}l=n}Sc(x,P,M.children,e),P=P.child}return P;case 9:return M=P.type,r=P.pendingProps,v=r.children,l0(P,e),M=Ef(M,r.unstable_observedBits),v=v(M),P.flags|=1,Sc(x,P,v,e),P.child;case 14:return M=P.type,r=ih(M,P.pendingProps),r=ih(M.type,r),X3(x,P,M,r,v,e);case 15:return sT(x,P,P.type,P.pendingProps,v,e);case 17:return v=P.type,M=P.pendingProps,M=P.elementType===v?M:ih(v,M),x!==null&&(x.alternate=null,P.alternate=null,P.flags|=2),P.tag=1,Cc(v)?(x=!0,h1(P)):x=!1,l0(P,e),$4(P,v,M),xb(P,v,M,e),Ab(null,P,v,!0,x,e);case 19:return tw(x,P,e);case 23:return Tx(x,P,e);case 24:return Tx(x,P,e)}throw Error(Va(156,P.tag))};function XM(x,P,e,v){this.tag=x,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=P,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Mf(x,P,e,v){return new XM(x,P,e,v)}function a_(x){return x=x.prototype,!(!x||!x.isReactComponent)}function ZM(x){if(typeof x=="function")return a_(x)?1:0;if(x!=null){if(x=x.$$typeof,x===ry)return 11;if(x===ny)return 14}return 2}function id(x,P){var e=x.alternate;return e===null?(e=Mf(x.tag,P,x.key,x.mode),e.elementType=x.elementType,e.type=x.type,e.stateNode=x.stateNode,e.alternate=x,x.alternate=e):(e.pendingProps=P,e.type=x.type,e.flags=0,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null),e.childLanes=x.childLanes,e.lanes=x.lanes,e.child=x.child,e.memoizedProps=x.memoizedProps,e.memoizedState=x.memoizedState,e.updateQueue=x.updateQueue,P=x.dependencies,e.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext},e.sibling=x.sibling,e.index=x.index,e.ref=x.ref,e}function g1(x,P,e,v,M,r){var n=2;if(v=x,typeof x=="function")a_(x)&&(n=1);else if(typeof x=="string")n=5;else e:switch(x){case Hp:return h0(e.children,M,r,P);case q5:n=8,M|=16;break;case b2:n=8,M|=1;break;case Tm:return x=Mf(12,e,P,M|8),x.elementType=Tm,x.type=Tm,x.lanes=r,x;case Am:return x=Mf(13,e,P,M),x.type=Am,x.elementType=Am,x.lanes=r,x;case M1:return x=Mf(19,e,P,M),x.elementType=M1,x.lanes=r,x;case M2:return i_(e,M,r,P);case Jx:return x=Mf(24,e,P,M),x.elementType=Jx,x.lanes=r,x;default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case _2:n=10;break e;case w2:n=9;break e;case ry:n=11;break e;case ny:n=14;break e;case T2:n=16,v=null;break e;case A2:n=22;break e}throw Error(Va(130,x==null?x:typeof x,""))}return P=Mf(n,e,P,M),P.elementType=x,P.type=v,P.lanes=r,P}function h0(x,P,e,v){return x=Mf(7,x,v,P),x.lanes=e,x}function i_(x,P,e,v){return x=Mf(23,x,v,P),x.elementType=M2,x.lanes=e,x}function Mx(x,P,e){return x=Mf(6,x,null,P),x.lanes=e,x}function Sx(x,P,e){return P=Mf(4,x.children!==null?x.children:[],x.key,P),P.lanes=e,P.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},P}function KM(x,P,e){this.tag=P,this.containerInfo=x,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=e,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=cx(0),this.expirationTimes=cx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cx(0),this.mutableSourceEagerHydrationData=null}function $M(x,P,e){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ud,key:v==null?null:""+v,children:x,containerInfo:P,implementation:e}}function Z1(x,P,e,v){var M=P.current,r=Kc(),n=Jp(M);e:if(e){e=e._reactInternals;t:{if(ev(e)!==e||e.tag!==1)throw Error(Va(170));var l=e;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(Cc(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(l!==null);throw Error(Va(171))}if(e.tag===1){var c=e.type;if(Cc(c)){e=U4(e,c,l);break e}}e=l}else e=nd;return P.context===null?P.context=e:P.pendingContext=e,P=Kp(r,n),P.payload={element:x},v=v===void 0?null:v,v!==null&&(P.callback=v),$p(M,P),Qp(M,n,r),n}function Ex(x){if(x=x.current,!x.child)return null;switch(x.child.tag){case 5:return x.child.stateNode;default:return x.child.stateNode}}function cw(x,P){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var e=x.retryLane;x.retryLane=e!==0&&e<P?e:P}}function o_(x,P){cw(x,P),(x=x.alternate)&&cw(x,P)}function JM(){return null}function s_(x,P,e){var v=e!=null&&e.hydrationOptions!=null&&e.hydrationOptions.mutableSources||null;if(e=new KM(x,P,e!=null&&e.hydrate===!0),P=Mf(3,null,null,P===2?7:P===1?3:0),e.current=P,P.stateNode=e,W2(P),x[M0]=e.current,z4(x.nodeType===8?x.parentNode:x),v)for(x=0;x<v.length;x++){P=v[x];var M=P._getVersion;M=M(P._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[P,M]:e.mutableSourceEagerHydrationData.push(P,M)}this._internalRoot=e}s_.prototype.render=function(x){Z1(x,this._internalRoot,null,null)};s_.prototype.unmount=function(){var x=this._internalRoot,P=x.containerInfo;Z1(null,x,null,function(){P[M0]=null})};function cg(x){return!(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11&&(x.nodeType!==8||x.nodeValue!==" react-mount-point-unstable "))}function QM(x,P){if(P||(P=x?x.nodeType===9?x.documentElement:x.firstChild:null,P=!(!P||P.nodeType!==1||!P.hasAttribute("data-reactroot"))),!P)for(var e;e=x.lastChild;)x.removeChild(e);return new s_(x,0,P?{hydrate:!0}:void 0)}function dy(x,P,e,v,M){var r=e._reactRootContainer;if(r){var n=r._internalRoot;if(typeof M=="function"){var l=M;M=function(){var t=Ex(n);l.call(t)}}Z1(P,n,x,M)}else{if(r=e._reactRootContainer=QM(e,v),n=r._internalRoot,typeof M=="function"){var c=M;M=function(){var t=Ex(n);c.call(t)}}gT(function(){Z1(P,n,x,M)})}return Ex(n)}d4=function(x){if(x.tag===13){var P=Kc();Qp(x,4,P),o_(x,4)}};P2=function(x){if(x.tag===13){var P=Kc();Qp(x,67108864,P),o_(x,67108864)}};v4=function(x){if(x.tag===13){var P=Kc(),e=Jp(x);Qp(x,e,P),o_(x,e)}};m4=function(x,P){return P()};sb=function(x,P,e){switch(P){case"input":if(qx(x,e),P=e.name,e.type==="radio"&&P!=null){for(e=x;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+P)+'][type="radio"]'),P=0;P<e.length;P++){var v=e[P];if(v!==x&&v.form===x.form){var M=uy(v);if(!M)throw Error(Va(90));t4(v),qx(v,M)}}}break;case"textarea":n4(x,e);break;case"select":P=e.value,P!=null&&a0(x,!!e.multiple,P,!1)}};E2=mT;c4=function(x,P,e,v,M){var r=$i;$i|=4;try{return Kd(98,x.bind(null,P,e,v,M))}finally{$i=r,$i===0&&(C0(),Fh())}};C2=function(){!($i&49)&&(NM(),cd())};f4=function(x,P){var e=$i;$i|=2;try{return x(P)}finally{$i=e,$i===0&&(C0(),Fh())}};function AT(x,P){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cg(P))throw Error(Va(200));return $M(x,P,null,e)}var qM={Events:[sg,Qv,uy,l4,u4,cd,{current:!1}]},um={findFiberByHostInstance:Hd,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},e8={bundleType:um.bundleType,version:um.version,rendererPackageName:um.rendererPackageName,rendererConfig:um.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qd.ReactCurrentDispatcher,findHostInstanceByFiber:function(x){return x=p4(x),x===null?null:x.stateNode},findFiberByHostInstance:um.findFiberByHostInstance||JM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qg.isDisabled&&qg.supportsFiber)try{V2=qg.inject(e8),Yd=qg}catch{}}Pf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qM;Pf.createPortal=AT;Pf.findDOMNode=function(x){if(x==null)return null;if(x.nodeType===1)return x;var P=x._reactInternals;if(P===void 0)throw typeof x.render=="function"?Error(Va(188)):Error(Va(268,Object.keys(x)));return x=p4(P),x=x===null?null:x.stateNode,x};Pf.flushSync=function(x,P){var e=$i;if(e&48)return x(P);$i|=1;try{if(x)return Kd(99,x.bind(null,P))}finally{$i=e,Fh()}};Pf.hydrate=function(x,P,e){if(!cg(P))throw Error(Va(200));return dy(null,x,P,!0,e)};Pf.render=function(x,P,e){if(!cg(P))throw Error(Va(200));return dy(null,x,P,!1,e)};Pf.unmountComponentAtNode=function(x){if(!cg(x))throw Error(Va(40));return x._reactRootContainer?(gT(function(){dy(null,null,x,!1,function(){x._reactRootContainer=null,x[M0]=null})}),!0):!1};Pf.unstable_batchedUpdates=mT;Pf.unstable_createPortal=function(x,P){return AT(x,P,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Pf.unstable_renderSubtreeIntoContainer=function(x,P,e,v){if(!cg(e))throw Error(Va(200));if(x==null||x._reactInternals===void 0)throw Error(Va(38));return dy(x,P,e,!1,v)};Pf.version="17.0.2";(function(x){function P(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(P)}catch(e){console.error(e)}}P(),x.exports=Pf})(ik);const t8=""+new URL("react-35ef61ed.svg",import.meta.url).href;const r8={black:"#000",white:"#fff"},Qm=r8,n8={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Uv=n8,a8={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Vv=a8,i8={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Hv=i8,o8={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},jv=o8,s8={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Gv=s8,l8={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},cm=l8,u8={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},c8=u8;function Ta(){return Ta=Object.assign?Object.assign.bind():function(x){for(var P=1;P<arguments.length;P++){var e=arguments[P];for(var v in e)Object.prototype.hasOwnProperty.call(e,v)&&(x[v]=e[v])}return x},Ta.apply(this,arguments)}function Nd(x){return x!==null&&typeof x=="object"&&x.constructor===Object}function kT(x){if(!Nd(x))return x;const P={};return Object.keys(x).forEach(e=>{P[e]=kT(x[e])}),P}function sh(x,P,e={clone:!0}){const v=e.clone?Ta({},x):x;return Nd(x)&&Nd(P)&&Object.keys(P).forEach(M=>{M!=="__proto__"&&(Nd(P[M])&&M in x&&Nd(x[M])?v[M]=sh(x[M],P[M],e):e.clone?v[M]=Nd(P[M])?kT(P[M]):P[M]:v[M]=P[M])}),v}var Fb={},f8={get exports(){return Fb},set exports(x){Fb=x}},h8="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",p8=h8,d8=p8;function MT(){}function ST(){}ST.resetWarningCache=MT;var v8=function(){function x(v,M,r,n,l,c){if(c!==d8){var t=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw t.name="Invariant Violation",t}}x.isRequired=x;function P(){return x}var e={array:x,bigint:x,bool:x,func:x,number:x,object:x,string:x,symbol:x,any:x,arrayOf:P,element:x,elementType:x,instanceOf:P,node:x,objectOf:P,oneOf:P,oneOfType:P,shape:P,exact:P,checkPropTypes:ST,resetWarningCache:MT};return e.PropTypes=e,e};f8.exports=v8();function b0(x){let P="https://mui.com/production-error/?code="+x;for(let e=1;e<arguments.length;e+=1)P+="&args[]="+encodeURIComponent(arguments[e]);return"Minified MUI error #"+x+"; visit "+P+" for the full message."}function Ki(x){if(typeof x!="string")throw new Error(b0(7));return x.charAt(0).toUpperCase()+x.slice(1)}function m8(x,P){typeof x=="function"?x(P):x&&(x.current=P)}const g8=typeof window<"u"?_n.useLayoutEffect:_n.useEffect,y8=g8;function e1(x){const P=_n.useRef(x);return y8(()=>{P.current=x}),_n.useCallback((...e)=>(0,P.current)(...e),[])}function Nb(...x){return _n.useMemo(()=>x.every(P=>P==null)?null:P=>{x.forEach(e=>{m8(e,P)})},x)}let vy=!0,Bb=!1,fw;const x8={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function b8(x){const{type:P,tagName:e}=x;return!!(e==="INPUT"&&x8[P]&&!x.readOnly||e==="TEXTAREA"&&!x.readOnly||x.isContentEditable)}function _8(x){x.metaKey||x.altKey||x.ctrlKey||(vy=!0)}function Cx(){vy=!1}function w8(){this.visibilityState==="hidden"&&Bb&&(vy=!0)}function T8(x){x.addEventListener("keydown",_8,!0),x.addEventListener("mousedown",Cx,!0),x.addEventListener("pointerdown",Cx,!0),x.addEventListener("touchstart",Cx,!0),x.addEventListener("visibilitychange",w8,!0)}function A8(x){const{target:P}=x;try{return P.matches(":focus-visible")}catch{}return vy||b8(P)}function k8(){const x=_n.useCallback(M=>{M!=null&&T8(M.ownerDocument)},[]),P=_n.useRef(!1);function e(){return P.current?(Bb=!0,window.clearTimeout(fw),fw=window.setTimeout(()=>{Bb=!1},100),P.current=!1,!0):!1}function v(M){return A8(M)?(P.current=!0,!0):!1}return{isFocusVisibleRef:P,onFocus:v,onBlur:e,ref:x}}function ET(x,P){const e=Ta({},P);return Object.keys(x).forEach(v=>{if(v.toString().match(/^(components|slots)$/))e[v]=Ta({},x[v],e[v]);else if(v.toString().match(/^(componentsProps|slotProps)$/)){const M=x[v]||{},r=P[v];e[v]={},!r||!Object.keys(r)?e[v]=M:!M||!Object.keys(M)?e[v]=r:(e[v]=Ta({},r),Object.keys(M).forEach(n=>{e[v][n]=ET(M[n],r[n])}))}else e[v]===void 0&&(e[v]=x[v])}),e}function lh(x,P,e=void 0){const v={};return Object.keys(x).forEach(M=>{v[M]=x[M].reduce((r,n)=>{if(n){const l=P(n);l!==""&&r.push(l),e&&e[n]&&r.push(e[n])}return r},[]).join(" ")}),v}const hw=x=>x,M8=()=>{let x=hw;return{configure(P){x=P},generate(P){return x(P)},reset(){x=hw}}},S8=M8(),E8=S8,C8={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function Rf(x,P,e="Mui"){const v=C8[P];return v?`${e}-${v}`:`${E8.generate(x)}-${P}`}function Df(x,P,e="Mui"){const v={};return P.forEach(M=>{v[M]=Rf(x,M,e)}),v}function fs(x,P){if(x==null)return{};var e={},v=Object.keys(x),M,r;for(r=0;r<v.length;r++)M=v[r],!(P.indexOf(M)>=0)&&(e[M]=x[M]);return e}function CT(x){var P=Object.create(null);return function(e){return P[e]===void 0&&(P[e]=x(e)),P[e]}}var L8=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,P8=CT(function(x){return L8.test(x)||x.charCodeAt(0)===111&&x.charCodeAt(1)===110&&x.charCodeAt(2)<91});function R8(x){if(x.sheet)return x.sheet;for(var P=0;P<document.styleSheets.length;P++)if(document.styleSheets[P].ownerNode===x)return document.styleSheets[P]}function D8(x){var P=document.createElement("style");return P.setAttribute("data-emotion",x.key),x.nonce!==void 0&&P.setAttribute("nonce",x.nonce),P.appendChild(document.createTextNode("")),P.setAttribute("data-s",""),P}var I8=function(){function x(e){var v=this;this._insertTag=function(M){var r;v.tags.length===0?v.insertionPoint?r=v.insertionPoint.nextSibling:v.prepend?r=v.container.firstChild:r=v.before:r=v.tags[v.tags.length-1].nextSibling,v.container.insertBefore(M,r),v.tags.push(M)},this.isSpeedy=e.speedy===void 0?!0:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var P=x.prototype;return P.hydrate=function(v){v.forEach(this._insertTag)},P.insert=function(v){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(D8(this));var M=this.tags[this.tags.length-1];if(this.isSpeedy){var r=R8(M);try{r.insertRule(v,r.cssRules.length)}catch{}}else M.appendChild(document.createTextNode(v));this.ctr++},P.flush=function(){this.tags.forEach(function(v){return v.parentNode&&v.parentNode.removeChild(v)}),this.tags=[],this.ctr=0},x}(),Zu="-ms-",K1="-moz-",ts="-webkit-",LT="comm",l_="rule",u_="decl",z8="@import",PT="@keyframes",O8=Math.abs,my=String.fromCharCode,F8=Object.assign;function N8(x,P){return Nu(x,0)^45?(((P<<2^Nu(x,0))<<2^Nu(x,1))<<2^Nu(x,2))<<2^Nu(x,3):0}function RT(x){return x.trim()}function B8(x,P){return(x=P.exec(x))?x[0]:x}function cs(x,P,e){return x.replace(P,e)}function Ub(x,P){return x.indexOf(P)}function Nu(x,P){return x.charCodeAt(P)|0}function qm(x,P,e){return x.slice(P,e)}function Mh(x){return x.length}function c_(x){return x.length}function t1(x,P){return P.push(x),x}function U8(x,P){return x.map(P).join("")}var gy=1,_0=1,DT=0,Lc=0,Jl=0,L0="";function yy(x,P,e,v,M,r,n){return{value:x,root:P,parent:e,type:v,props:M,children:r,line:gy,column:_0,length:n,return:""}}function fm(x,P){return F8(yy("",null,null,"",null,null,0),x,{length:-x.length},P)}function V8(){return Jl}function H8(){return Jl=Lc>0?Nu(L0,--Lc):0,_0--,Jl===10&&(_0=1,gy--),Jl}function $c(){return Jl=Lc<DT?Nu(L0,Lc++):0,_0++,Jl===10&&(_0=1,gy++),Jl}function Oh(){return Nu(L0,Lc)}function y1(){return Lc}function fg(x,P){return qm(L0,x,P)}function eg(x){switch(x){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function IT(x){return gy=_0=1,DT=Mh(L0=x),Lc=0,[]}function zT(x){return L0="",x}function x1(x){return RT(fg(Lc-1,Vb(x===91?x+2:x===40?x+1:x)))}function j8(x){for(;(Jl=Oh())&&Jl<33;)$c();return eg(x)>2||eg(Jl)>3?"":" "}function G8(x,P){for(;--P&&$c()&&!(Jl<48||Jl>102||Jl>57&&Jl<65||Jl>70&&Jl<97););return fg(x,y1()+(P<6&&Oh()==32&&$c()==32))}function Vb(x){for(;$c();)switch(Jl){case x:return Lc;case 34:case 39:x!==34&&x!==39&&Vb(Jl);break;case 40:x===41&&Vb(x);break;case 92:$c();break}return Lc}function W8(x,P){for(;$c()&&x+Jl!==47+10;)if(x+Jl===42+42&&Oh()===47)break;return"/*"+fg(P,Lc-1)+"*"+my(x===47?x:$c())}function Y8(x){for(;!eg(Oh());)$c();return fg(x,Lc)}function X8(x){return zT(b1("",null,null,null,[""],x=IT(x),0,[0],x))}function b1(x,P,e,v,M,r,n,l,c){for(var t=0,f=0,a=n,o=0,u=0,h=0,i=1,s=1,p=1,d=0,y="",b=M,m=r,_=v,T=y;s;)switch(h=d,d=$c()){case 40:if(h!=108&&Nu(T,a-1)==58){Ub(T+=cs(x1(d),"&","&\f"),"&\f")!=-1&&(p=-1);break}case 34:case 39:case 91:T+=x1(d);break;case 9:case 10:case 13:case 32:T+=j8(h);break;case 92:T+=G8(y1()-1,7);continue;case 47:switch(Oh()){case 42:case 47:t1(Z8(W8($c(),y1()),P,e),c);break;default:T+="/"}break;case 123*i:l[t++]=Mh(T)*p;case 125*i:case 59:case 0:switch(d){case 0:case 125:s=0;case 59+f:u>0&&Mh(T)-a&&t1(u>32?dw(T+";",v,e,a-1):dw(cs(T," ","")+";",v,e,a-2),c);break;case 59:T+=";";default:if(t1(_=pw(T,P,e,t,f,M,l,y,b=[],m=[],a),r),d===123)if(f===0)b1(T,P,_,_,b,r,a,l,m);else switch(o===99&&Nu(T,3)===110?100:o){case 100:case 109:case 115:b1(x,_,_,v&&t1(pw(x,_,_,0,0,M,l,y,M,b=[],a),m),M,m,a,l,v?b:m);break;default:b1(T,_,_,_,[""],m,0,l,m)}}t=f=u=0,i=p=1,y=T="",a=n;break;case 58:a=1+Mh(T),u=h;default:if(i<1){if(d==123)--i;else if(d==125&&i++==0&&H8()==125)continue}switch(T+=my(d),d*i){case 38:p=f>0?1:(T+="\f",-1);break;case 44:l[t++]=(Mh(T)-1)*p,p=1;break;case 64:Oh()===45&&(T+=x1($c())),o=Oh(),f=a=Mh(y=T+=Y8(y1())),d++;break;case 45:h===45&&Mh(T)==2&&(i=0)}}return r}function pw(x,P,e,v,M,r,n,l,c,t,f){for(var a=M-1,o=M===0?r:[""],u=c_(o),h=0,i=0,s=0;h<v;++h)for(var p=0,d=qm(x,a+1,a=O8(i=n[h])),y=x;p<u;++p)(y=RT(i>0?o[p]+" "+d:cs(d,/&\f/g,o[p])))&&(c[s++]=y);return yy(x,P,e,M===0?l_:l,c,t,f)}function Z8(x,P,e){return yy(x,P,e,LT,my(V8()),qm(x,2,-2),0)}function dw(x,P,e,v){return yy(x,P,e,u_,qm(x,0,v),qm(x,v+1,-1),v)}function p0(x,P){for(var e="",v=c_(x),M=0;M<v;M++)e+=P(x[M],M,x,P)||"";return e}function K8(x,P,e,v){switch(x.type){case z8:case u_:return x.return=x.return||x.value;case LT:return"";case PT:return x.return=x.value+"{"+p0(x.children,v)+"}";case l_:x.value=x.props.join(",")}return Mh(e=p0(x.children,v))?x.return=x.value+"{"+e+"}":""}function $8(x){var P=c_(x);return function(e,v,M,r){for(var n="",l=0;l<P;l++)n+=x[l](e,v,M,r)||"";return n}}function J8(x){return function(P){P.root||(P=P.return)&&x(P)}}var Q8=function(P,e,v){for(var M=0,r=0;M=r,r=Oh(),M===38&&r===12&&(e[v]=1),!eg(r);)$c();return fg(P,Lc)},q8=function(P,e){var v=-1,M=44;do switch(eg(M)){case 0:M===38&&Oh()===12&&(e[v]=1),P[v]+=Q8(Lc-1,e,v);break;case 2:P[v]+=x1(M);break;case 4:if(M===44){P[++v]=Oh()===58?"&\f":"",e[v]=P[v].length;break}default:P[v]+=my(M)}while(M=$c());return P},eS=function(P,e){return zT(q8(IT(P),e))},vw=new WeakMap,tS=function(P){if(!(P.type!=="rule"||!P.parent||P.length<1)){for(var e=P.value,v=P.parent,M=P.column===v.column&&P.line===v.line;v.type!=="rule";)if(v=v.parent,!v)return;if(!(P.props.length===1&&e.charCodeAt(0)!==58&&!vw.get(v))&&!M){vw.set(P,!0);for(var r=[],n=eS(e,r),l=v.props,c=0,t=0;c<n.length;c++)for(var f=0;f<l.length;f++,t++)P.props[t]=r[c]?n[c].replace(/&\f/g,l[f]):l[f]+" "+n[c]}}},rS=function(P){if(P.type==="decl"){var e=P.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(P.return="",P.value="")}};function OT(x,P){switch(N8(x,P)){case 5103:return ts+"print-"+x+x;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ts+x+x;case 5349:case 4246:case 4810:case 6968:case 2756:return ts+x+K1+x+Zu+x+x;case 6828:case 4268:return ts+x+Zu+x+x;case 6165:return ts+x+Zu+"flex-"+x+x;case 5187:return ts+x+cs(x,/(\w+).+(:[^]+)/,ts+"box-$1$2"+Zu+"flex-$1$2")+x;case 5443:return ts+x+Zu+"flex-item-"+cs(x,/flex-|-self/,"")+x;case 4675:return ts+x+Zu+"flex-line-pack"+cs(x,/align-content|flex-|-self/,"")+x;case 5548:return ts+x+Zu+cs(x,"shrink","negative")+x;case 5292:return ts+x+Zu+cs(x,"basis","preferred-size")+x;case 6060:return ts+"box-"+cs(x,"-grow","")+ts+x+Zu+cs(x,"grow","positive")+x;case 4554:return ts+cs(x,/([^-])(transform)/g,"$1"+ts+"$2")+x;case 6187:return cs(cs(cs(x,/(zoom-|grab)/,ts+"$1"),/(image-set)/,ts+"$1"),x,"")+x;case 5495:case 3959:return cs(x,/(image-set\([^]*)/,ts+"$1$`$1");case 4968:return cs(cs(x,/(.+:)(flex-)?(.*)/,ts+"box-pack:$3"+Zu+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ts+x+x;case 4095:case 3583:case 4068:case 2532:return cs(x,/(.+)-inline(.+)/,ts+"$1$2")+x;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Mh(x)-1-P>6)switch(Nu(x,P+1)){case 109:if(Nu(x,P+4)!==45)break;case 102:return cs(x,/(.+:)(.+)-([^]+)/,"$1"+ts+"$2-$3$1"+K1+(Nu(x,P+3)==108?"$3":"$2-$3"))+x;case 115:return~Ub(x,"stretch")?OT(cs(x,"stretch","fill-available"),P)+x:x}break;case 4949:if(Nu(x,P+1)!==115)break;case 6444:switch(Nu(x,Mh(x)-3-(~Ub(x,"!important")&&10))){case 107:return cs(x,":",":"+ts)+x;case 101:return cs(x,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ts+(Nu(x,14)===45?"inline-":"")+"box$3$1"+ts+"$2$3$1"+Zu+"$2box$3")+x}break;case 5936:switch(Nu(x,P+11)){case 114:return ts+x+Zu+cs(x,/[svh]\w+-[tblr]{2}/,"tb")+x;case 108:return ts+x+Zu+cs(x,/[svh]\w+-[tblr]{2}/,"tb-rl")+x;case 45:return ts+x+Zu+cs(x,/[svh]\w+-[tblr]{2}/,"lr")+x}return ts+x+Zu+x+x}return x}var nS=function(P,e,v,M){if(P.length>-1&&!P.return)switch(P.type){case u_:P.return=OT(P.value,P.length);break;case PT:return p0([fm(P,{value:cs(P.value,"@","@"+ts)})],M);case l_:if(P.length)return U8(P.props,function(r){switch(B8(r,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return p0([fm(P,{props:[cs(r,/:(read-\w+)/,":"+K1+"$1")]})],M);case"::placeholder":return p0([fm(P,{props:[cs(r,/:(plac\w+)/,":"+ts+"input-$1")]}),fm(P,{props:[cs(r,/:(plac\w+)/,":"+K1+"$1")]}),fm(P,{props:[cs(r,/:(plac\w+)/,Zu+"input-$1")]})],M)}return""})}},aS=[nS],iS=function(P){var e=P.key;if(e==="css"){var v=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(v,function(i){var s=i.getAttribute("data-emotion");s.indexOf(" ")!==-1&&(document.head.appendChild(i),i.setAttribute("data-s",""))})}var M=P.stylisPlugins||aS,r={},n,l=[];n=P.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(i){for(var s=i.getAttribute("data-emotion").split(" "),p=1;p<s.length;p++)r[s[p]]=!0;l.push(i)});var c,t=[tS,rS];{var f,a=[K8,J8(function(i){f.insert(i)})],o=$8(t.concat(M,a)),u=function(s){return p0(X8(s),o)};c=function(s,p,d,y){f=d,u(s?s+"{"+p.styles+"}":p.styles),y&&(h.inserted[p.name]=!0)}}var h={key:e,sheet:new I8({key:e,container:n,nonce:P.nonce,speedy:P.speedy,prepend:P.prepend,insertionPoint:P.insertionPoint}),nonce:P.nonce,inserted:r,registered:{},insert:c};return h.sheet.hydrate(l),h},Hb={},oS={get exports(){return Hb},set exports(x){Hb=x}},bs={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mu=typeof Symbol=="function"&&Symbol.for,f_=Mu?Symbol.for("react.element"):60103,h_=Mu?Symbol.for("react.portal"):60106,xy=Mu?Symbol.for("react.fragment"):60107,by=Mu?Symbol.for("react.strict_mode"):60108,_y=Mu?Symbol.for("react.profiler"):60114,wy=Mu?Symbol.for("react.provider"):60109,Ty=Mu?Symbol.for("react.context"):60110,p_=Mu?Symbol.for("react.async_mode"):60111,Ay=Mu?Symbol.for("react.concurrent_mode"):60111,ky=Mu?Symbol.for("react.forward_ref"):60112,My=Mu?Symbol.for("react.suspense"):60113,sS=Mu?Symbol.for("react.suspense_list"):60120,Sy=Mu?Symbol.for("react.memo"):60115,Ey=Mu?Symbol.for("react.lazy"):60116,lS=Mu?Symbol.for("react.block"):60121,uS=Mu?Symbol.for("react.fundamental"):60117,cS=Mu?Symbol.for("react.responder"):60118,fS=Mu?Symbol.for("react.scope"):60119;function Qc(x){if(typeof x=="object"&&x!==null){var P=x.$$typeof;switch(P){case f_:switch(x=x.type,x){case p_:case Ay:case xy:case _y:case by:case My:return x;default:switch(x=x&&x.$$typeof,x){case Ty:case ky:case Ey:case Sy:case wy:return x;default:return P}}case h_:return P}}}function FT(x){return Qc(x)===Ay}bs.AsyncMode=p_;bs.ConcurrentMode=Ay;bs.ContextConsumer=Ty;bs.ContextProvider=wy;bs.Element=f_;bs.ForwardRef=ky;bs.Fragment=xy;bs.Lazy=Ey;bs.Memo=Sy;bs.Portal=h_;bs.Profiler=_y;bs.StrictMode=by;bs.Suspense=My;bs.isAsyncMode=function(x){return FT(x)||Qc(x)===p_};bs.isConcurrentMode=FT;bs.isContextConsumer=function(x){return Qc(x)===Ty};bs.isContextProvider=function(x){return Qc(x)===wy};bs.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===f_};bs.isForwardRef=function(x){return Qc(x)===ky};bs.isFragment=function(x){return Qc(x)===xy};bs.isLazy=function(x){return Qc(x)===Ey};bs.isMemo=function(x){return Qc(x)===Sy};bs.isPortal=function(x){return Qc(x)===h_};bs.isProfiler=function(x){return Qc(x)===_y};bs.isStrictMode=function(x){return Qc(x)===by};bs.isSuspense=function(x){return Qc(x)===My};bs.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===xy||x===Ay||x===_y||x===by||x===My||x===sS||typeof x=="object"&&x!==null&&(x.$$typeof===Ey||x.$$typeof===Sy||x.$$typeof===wy||x.$$typeof===Ty||x.$$typeof===ky||x.$$typeof===uS||x.$$typeof===cS||x.$$typeof===fS||x.$$typeof===lS)};bs.typeOf=Qc;(function(x){x.exports=bs})(oS);var d_=Hb,hS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},pS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},dS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},NT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},v_={};v_[d_.ForwardRef]=dS;v_[d_.Memo]=NT;function mw(x){return d_.isMemo(x)?NT:v_[x.$$typeof]||hS}var vS=Object.defineProperty,mS=Object.getOwnPropertyNames,gw=Object.getOwnPropertySymbols,gS=Object.getOwnPropertyDescriptor,yS=Object.getPrototypeOf,yw=Object.prototype;function BT(x,P,e){if(typeof P!="string"){if(yw){var v=yS(P);v&&v!==yw&&BT(x,v,e)}var M=mS(P);gw&&(M=M.concat(gw(P)));for(var r=mw(x),n=mw(P),l=0;l<M.length;++l){var c=M[l];if(!pS[c]&&!(e&&e[c])&&!(n&&n[c])&&!(r&&r[c])){var t=gS(P,c);try{vS(x,c,t)}catch{}}}}return x}var xS=BT,bS=!0;function _S(x,P,e){var v="";return e.split(" ").forEach(function(M){x[M]!==void 0?P.push(x[M]+";"):v+=M+" "}),v}var UT=function(P,e,v){var M=P.key+"-"+e.name;(v===!1||bS===!1)&&P.registered[M]===void 0&&(P.registered[M]=e.styles)},wS=function(P,e,v){UT(P,e,v);var M=P.key+"-"+e.name;if(P.inserted[e.name]===void 0){var r=e;do P.insert(e===r?"."+M:"",r,P.sheet,!0),r=r.next;while(r!==void 0)}};function TS(x){for(var P=0,e,v=0,M=x.length;M>=4;++v,M-=4)e=x.charCodeAt(v)&255|(x.charCodeAt(++v)&255)<<8|(x.charCodeAt(++v)&255)<<16|(x.charCodeAt(++v)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,P=(e&65535)*1540483477+((e>>>16)*59797<<16)^(P&65535)*1540483477+((P>>>16)*59797<<16);switch(M){case 3:P^=(x.charCodeAt(v+2)&255)<<16;case 2:P^=(x.charCodeAt(v+1)&255)<<8;case 1:P^=x.charCodeAt(v)&255,P=(P&65535)*1540483477+((P>>>16)*59797<<16)}return P^=P>>>13,P=(P&65535)*1540483477+((P>>>16)*59797<<16),((P^P>>>15)>>>0).toString(36)}var AS={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},kS=/[A-Z]|^ms/g,MS=/_EMO_([^_]+?)_([^]*?)_EMO_/g,VT=function(P){return P.charCodeAt(1)===45},xw=function(P){return P!=null&&typeof P!="boolean"},Lx=CT(function(x){return VT(x)?x:x.replace(kS,"-$&").toLowerCase()}),bw=function(P,e){switch(P){case"animation":case"animationName":if(typeof e=="string")return e.replace(MS,function(v,M,r){return Sh={name:M,styles:r,next:Sh},M})}return AS[P]!==1&&!VT(P)&&typeof e=="number"&&e!==0?e+"px":e};function tg(x,P,e){if(e==null)return"";if(e.__emotion_styles!==void 0)return e;switch(typeof e){case"boolean":return"";case"object":{if(e.anim===1)return Sh={name:e.name,styles:e.styles,next:Sh},e.name;if(e.styles!==void 0){var v=e.next;if(v!==void 0)for(;v!==void 0;)Sh={name:v.name,styles:v.styles,next:Sh},v=v.next;var M=e.styles+";";return M}return SS(x,P,e)}case"function":{if(x!==void 0){var r=Sh,n=e(x);return Sh=r,tg(x,P,n)}break}}if(P==null)return e;var l=P[e];return l!==void 0?l:e}function SS(x,P,e){var v="";if(Array.isArray(e))for(var M=0;M<e.length;M++)v+=tg(x,P,e[M])+";";else for(var r in e){var n=e[r];if(typeof n!="object")P!=null&&P[n]!==void 0?v+=r+"{"+P[n]+"}":xw(n)&&(v+=Lx(r)+":"+bw(r,n)+";");else if(Array.isArray(n)&&typeof n[0]=="string"&&(P==null||P[n[0]]===void 0))for(var l=0;l<n.length;l++)xw(n[l])&&(v+=Lx(r)+":"+bw(r,n[l])+";");else{var c=tg(x,P,n);switch(r){case"animation":case"animationName":{v+=Lx(r)+":"+c+";";break}default:v+=r+"{"+c+"}"}}}return v}var _w=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Sh,HT=function(P,e,v){if(P.length===1&&typeof P[0]=="object"&&P[0]!==null&&P[0].styles!==void 0)return P[0];var M=!0,r="";Sh=void 0;var n=P[0];n==null||n.raw===void 0?(M=!1,r+=tg(v,e,n)):r+=n[0];for(var l=1;l<P.length;l++)r+=tg(v,e,P[l]),M&&(r+=n[l]);_w.lastIndex=0;for(var c="",t;(t=_w.exec(r))!==null;)c+="-"+t[1];var f=TS(r)+c;return{name:f,styles:r,next:Sh}},ES=function(P){return P()},CS=$_["useInsertionEffect"]?$_["useInsertionEffect"]:!1,LS=CS||ES,jT=_n.createContext(typeof HTMLElement<"u"?iS({key:"css"}):null);jT.Provider;var PS=function(P){return _n.forwardRef(function(e,v){var M=_n.useContext(jT);return P(e,M,v)})},RS=_n.createContext({});function DS(){for(var x=arguments.length,P=new Array(x),e=0;e<x;e++)P[e]=arguments[e];return HT(P)}var m_=function(){var P=DS.apply(void 0,arguments),e="animation-"+P.name;return{name:e,styles:"@keyframes "+e+"{"+P.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},IS=P8,zS=function(P){return P!=="theme"},ww=function(P){return typeof P=="string"&&P.charCodeAt(0)>96?IS:zS},Tw=function(P,e,v){var M;if(e){var r=e.shouldForwardProp;M=P.__emotion_forwardProp&&r?function(n){return P.__emotion_forwardProp(n)&&r(n)}:r}return typeof M!="function"&&v&&(M=P.__emotion_forwardProp),M},OS=function(P){var e=P.cache,v=P.serialized,M=P.isStringTag;return UT(e,v,M),LS(function(){return wS(e,v,M)}),null},FS=function x(P,e){var v=P.__emotion_real===P,M=v&&P.__emotion_base||P,r,n;e!==void 0&&(r=e.label,n=e.target);var l=Tw(P,e,v),c=l||ww(M),t=!c("as");return function(){var f=arguments,a=v&&P.__emotion_styles!==void 0?P.__emotion_styles.slice(0):[];if(r!==void 0&&a.push("label:"+r+";"),f[0]==null||f[0].raw===void 0)a.push.apply(a,f);else{a.push(f[0][0]);for(var o=f.length,u=1;u<o;u++)a.push(f[u],f[0][u])}var h=PS(function(i,s,p){var d=t&&i.as||M,y="",b=[],m=i;if(i.theme==null){m={};for(var _ in i)m[_]=i[_];m.theme=_n.useContext(RS)}typeof i.className=="string"?y=_S(s.registered,b,i.className):i.className!=null&&(y=i.className+" ");var T=HT(a.concat(b),s.registered,m);y+=s.key+"-"+T.name,n!==void 0&&(y+=" "+n);var g=t&&l===void 0?ww(d):c,A={};for(var k in i)t&&k==="as"||g(k)&&(A[k]=i[k]);return A.className=y,A.ref=p,_n.createElement(_n.Fragment,null,_n.createElement(OS,{cache:s,serialized:T,isStringTag:typeof d=="string"}),_n.createElement(d,A))});return h.displayName=r!==void 0?r:"Styled("+(typeof M=="string"?M:M.displayName||M.name||"Component")+")",h.defaultProps=P.defaultProps,h.__emotion_real=h,h.__emotion_base=M,h.__emotion_styles=a,h.__emotion_forwardProp=l,Object.defineProperty(h,"toString",{value:function(){return"."+n}}),h.withComponent=function(i,s){return x(i,Ta({},e,s,{shouldForwardProp:Tw(h,s,!0)})).apply(void 0,a)},h}};const NS=FS;var BS=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],jb=NS.bind();BS.forEach(function(x){jb[x]=jb(x)});const US=jb;var xs={},VS={get exports(){return xs},set exports(x){xs=x}},hg={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HS=_n,GT=60103;hg.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var Aw=Symbol.for;GT=Aw("react.element"),hg.Fragment=Aw("react.fragment")}var jS=HS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GS=Object.prototype.hasOwnProperty,WS={key:!0,ref:!0,__self:!0,__source:!0};function WT(x,P,e){var v,M={},r=null,n=null;e!==void 0&&(r=""+e),P.key!==void 0&&(r=""+P.key),P.ref!==void 0&&(n=P.ref);for(v in P)GS.call(P,v)&&!WS.hasOwnProperty(v)&&(M[v]=P[v]);if(x&&x.defaultProps)for(v in P=x.defaultProps,P)M[v]===void 0&&(M[v]=P[v]);return{$$typeof:GT,type:x,key:r,ref:n,props:M,_owner:jS.current}}hg.jsx=WT;hg.jsxs=WT;(function(x){x.exports=hg})(VS);/**
 * @mui/styled-engine v5.11.16
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function YS(x,P){return US(x,P)}const XS=(x,P)=>{Array.isArray(x.__emotion_styles)&&(x.__emotion_styles=P(x.__emotion_styles))};function zm(x,P){return P?sh(x,P,{clone:!1}):x}const g_={xs:0,sm:600,md:900,lg:1200,xl:1536},kw={keys:["xs","sm","md","lg","xl"],up:x=>`@media (min-width:${g_[x]}px)`};function Lf(x,P,e){const v=x.theme||{};if(Array.isArray(P)){const r=v.breakpoints||kw;return P.reduce((n,l,c)=>(n[r.up(r.keys[c])]=e(P[c]),n),{})}if(typeof P=="object"){const r=v.breakpoints||kw;return Object.keys(P).reduce((n,l)=>{if(Object.keys(r.values||g_).indexOf(l)!==-1){const c=r.up(l);n[c]=e(P[l],l)}else{const c=l;n[c]=P[c]}return n},{})}return e(P)}function ZS(x={}){var P;return((P=x.keys)==null?void 0:P.reduce((v,M)=>{const r=x.up(M);return v[r]={},v},{}))||{}}function KS(x,P){return x.reduce((e,v)=>{const M=e[v];return(!M||Object.keys(M).length===0)&&delete e[v],e},P)}function $S(x,P){if(typeof x!="object")return{};const e={},v=Object.keys(P);return Array.isArray(x)?v.forEach((M,r)=>{r<x.length&&(e[M]=!0)}):v.forEach(M=>{x[M]!=null&&(e[M]=!0)}),e}function Cy({values:x,breakpoints:P,base:e}){const v=e||$S(x,P),M=Object.keys(v);if(M.length===0)return x;let r;return M.reduce((n,l,c)=>(Array.isArray(x)?(n[l]=x[c]!=null?x[c]:x[r],r=c):typeof x=="object"?(n[l]=x[l]!=null?x[l]:x[r],r=l):n[l]=x,n),{})}function Ly(x,P,e=!0){if(!P||typeof P!="string")return null;if(x&&x.vars&&e){const v=`vars.${P}`.split(".").reduce((M,r)=>M&&M[r]?M[r]:null,x);if(v!=null)return v}return P.split(".").reduce((v,M)=>v&&v[M]!=null?v[M]:null,x)}function $1(x,P,e,v=e){let M;return typeof x=="function"?M=x(e):Array.isArray(x)?M=x[e]||v:M=Ly(x,e)||v,P&&(M=P(M,v,x)),M}function hs(x){const{prop:P,cssProperty:e=x.prop,themeKey:v,transform:M}=x,r=n=>{if(n[P]==null)return null;const l=n[P],c=n.theme,t=Ly(c,v)||{};return Lf(n,l,a=>{let o=$1(t,M,a);return a===o&&typeof a=="string"&&(o=$1(t,M,`${P}${a==="default"?"":Ki(a)}`,a)),e===!1?o:{[e]:o}})};return r.propTypes={},r.filterProps=[P],r}function Py(...x){const P=x.reduce((v,M)=>(M.filterProps.forEach(r=>{v[r]=M}),v),{}),e=v=>Object.keys(v).reduce((M,r)=>P[r]?zm(M,P[r](v)):M,{});return e.propTypes={},e.filterProps=x.reduce((v,M)=>v.concat(M.filterProps),[]),e}function JS(x){const P={};return e=>(P[e]===void 0&&(P[e]=x(e)),P[e])}const QS={m:"margin",p:"padding"},qS={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Mw={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},eE=JS(x=>{if(x.length>2)if(Mw[x])x=Mw[x];else return[x];const[P,e]=x.split(""),v=QS[P],M=qS[e]||"";return Array.isArray(M)?M.map(r=>v+r):[v+M]}),y_=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],x_=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...y_,...x_];function pg(x,P,e,v){var M;const r=(M=Ly(x,P,!1))!=null?M:e;return typeof r=="number"?n=>typeof n=="string"?n:r*n:Array.isArray(r)?n=>typeof n=="string"?n:r[n]:typeof r=="function"?r:()=>{}}function YT(x){return pg(x,"spacing",8)}function dg(x,P){if(typeof P=="string"||P==null)return P;const e=Math.abs(P),v=x(e);return P>=0?v:typeof v=="number"?-v:`-${v}`}function tE(x,P){return e=>x.reduce((v,M)=>(v[M]=dg(P,e),v),{})}function rE(x,P,e,v){if(P.indexOf(e)===-1)return null;const M=eE(e),r=tE(M,v),n=x[e];return Lf(x,n,r)}function XT(x,P){const e=YT(x.theme);return Object.keys(x).map(v=>rE(x,P,v,e)).reduce(zm,{})}function El(x){return XT(x,y_)}El.propTypes={};El.filterProps=y_;function Cl(x){return XT(x,x_)}Cl.propTypes={};Cl.filterProps=x_;function Eh(x){return typeof x!="number"?x:`${x}px solid`}const nE=hs({prop:"border",themeKey:"borders",transform:Eh}),aE=hs({prop:"borderTop",themeKey:"borders",transform:Eh}),iE=hs({prop:"borderRight",themeKey:"borders",transform:Eh}),oE=hs({prop:"borderBottom",themeKey:"borders",transform:Eh}),sE=hs({prop:"borderLeft",themeKey:"borders",transform:Eh}),lE=hs({prop:"borderColor",themeKey:"palette"}),uE=hs({prop:"borderTopColor",themeKey:"palette"}),cE=hs({prop:"borderRightColor",themeKey:"palette"}),fE=hs({prop:"borderBottomColor",themeKey:"palette"}),hE=hs({prop:"borderLeftColor",themeKey:"palette"}),Ry=x=>{if(x.borderRadius!==void 0&&x.borderRadius!==null){const P=pg(x.theme,"shape.borderRadius",4),e=v=>({borderRadius:dg(P,v)});return Lf(x,x.borderRadius,e)}return null};Ry.propTypes={};Ry.filterProps=["borderRadius"];Py(nE,aE,iE,oE,sE,lE,uE,cE,fE,hE,Ry);const Dy=x=>{if(x.gap!==void 0&&x.gap!==null){const P=pg(x.theme,"spacing",8),e=v=>({gap:dg(P,v)});return Lf(x,x.gap,e)}return null};Dy.propTypes={};Dy.filterProps=["gap"];const Iy=x=>{if(x.columnGap!==void 0&&x.columnGap!==null){const P=pg(x.theme,"spacing",8),e=v=>({columnGap:dg(P,v)});return Lf(x,x.columnGap,e)}return null};Iy.propTypes={};Iy.filterProps=["columnGap"];const zy=x=>{if(x.rowGap!==void 0&&x.rowGap!==null){const P=pg(x.theme,"spacing",8),e=v=>({rowGap:dg(P,v)});return Lf(x,x.rowGap,e)}return null};zy.propTypes={};zy.filterProps=["rowGap"];const pE=hs({prop:"gridColumn"}),dE=hs({prop:"gridRow"}),vE=hs({prop:"gridAutoFlow"}),mE=hs({prop:"gridAutoColumns"}),gE=hs({prop:"gridAutoRows"}),yE=hs({prop:"gridTemplateColumns"}),xE=hs({prop:"gridTemplateRows"}),bE=hs({prop:"gridTemplateAreas"}),_E=hs({prop:"gridArea"});Py(Dy,Iy,zy,pE,dE,vE,mE,gE,yE,xE,bE,_E);function d0(x,P){return P==="grey"?P:x}const wE=hs({prop:"color",themeKey:"palette",transform:d0}),TE=hs({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:d0}),AE=hs({prop:"backgroundColor",themeKey:"palette",transform:d0});Py(wE,TE,AE);function Zc(x){return x<=1&&x!==0?`${x*100}%`:x}const kE=hs({prop:"width",transform:Zc}),b_=x=>{if(x.maxWidth!==void 0&&x.maxWidth!==null){const P=e=>{var v,M,r;return{maxWidth:((v=x.theme)==null||(M=v.breakpoints)==null||(r=M.values)==null?void 0:r[e])||g_[e]||Zc(e)}};return Lf(x,x.maxWidth,P)}return null};b_.filterProps=["maxWidth"];const ME=hs({prop:"minWidth",transform:Zc}),SE=hs({prop:"height",transform:Zc}),EE=hs({prop:"maxHeight",transform:Zc}),CE=hs({prop:"minHeight",transform:Zc});hs({prop:"size",cssProperty:"width",transform:Zc});hs({prop:"size",cssProperty:"height",transform:Zc});const LE=hs({prop:"boxSizing"});Py(kE,b_,ME,SE,EE,CE,LE);const PE={border:{themeKey:"borders",transform:Eh},borderTop:{themeKey:"borders",transform:Eh},borderRight:{themeKey:"borders",transform:Eh},borderBottom:{themeKey:"borders",transform:Eh},borderLeft:{themeKey:"borders",transform:Eh},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Ry},color:{themeKey:"palette",transform:d0},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:d0},backgroundColor:{themeKey:"palette",transform:d0},p:{style:Cl},pt:{style:Cl},pr:{style:Cl},pb:{style:Cl},pl:{style:Cl},px:{style:Cl},py:{style:Cl},padding:{style:Cl},paddingTop:{style:Cl},paddingRight:{style:Cl},paddingBottom:{style:Cl},paddingLeft:{style:Cl},paddingX:{style:Cl},paddingY:{style:Cl},paddingInline:{style:Cl},paddingInlineStart:{style:Cl},paddingInlineEnd:{style:Cl},paddingBlock:{style:Cl},paddingBlockStart:{style:Cl},paddingBlockEnd:{style:Cl},m:{style:El},mt:{style:El},mr:{style:El},mb:{style:El},ml:{style:El},mx:{style:El},my:{style:El},margin:{style:El},marginTop:{style:El},marginRight:{style:El},marginBottom:{style:El},marginLeft:{style:El},marginX:{style:El},marginY:{style:El},marginInline:{style:El},marginInlineStart:{style:El},marginInlineEnd:{style:El},marginBlock:{style:El},marginBlockStart:{style:El},marginBlockEnd:{style:El},displayPrint:{cssProperty:!1,transform:x=>({"@media print":{display:x}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Dy},rowGap:{style:zy},columnGap:{style:Iy},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Zc},maxWidth:{style:b_},minWidth:{transform:Zc},height:{transform:Zc},maxHeight:{transform:Zc},minHeight:{transform:Zc},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},Oy=PE;function RE(...x){const P=x.reduce((v,M)=>v.concat(Object.keys(M)),[]),e=new Set(P);return x.every(v=>e.size===Object.keys(v).length)}function DE(x,P){return typeof x=="function"?x(P):x}function IE(){function x(e,v,M,r){const n={[e]:v,theme:M},l=r[e];if(!l)return{[e]:v};const{cssProperty:c=e,themeKey:t,transform:f,style:a}=l;if(v==null)return null;if(t==="typography"&&v==="inherit")return{[e]:v};const o=Ly(M,t)||{};return a?a(n):Lf(n,v,h=>{let i=$1(o,f,h);return h===i&&typeof h=="string"&&(i=$1(o,f,`${e}${h==="default"?"":Ki(h)}`,h)),c===!1?i:{[c]:i}})}function P(e){var v;const{sx:M,theme:r={}}=e||{};if(!M)return null;const n=(v=r.unstable_sxConfig)!=null?v:Oy;function l(c){let t=c;if(typeof c=="function")t=c(r);else if(typeof c!="object")return c;if(!t)return null;const f=ZS(r.breakpoints),a=Object.keys(f);let o=f;return Object.keys(t).forEach(u=>{const h=DE(t[u],r);if(h!=null)if(typeof h=="object")if(n[u])o=zm(o,x(u,h,r,n));else{const i=Lf({theme:r},h,s=>({[u]:s}));RE(i,h)?o[u]=P({sx:h,theme:r}):o=zm(o,i)}else o=zm(o,x(u,h,r,n))}),KS(a,o)}return Array.isArray(M)?M.map(l):l(M)}return P}const ZT=IE();ZT.filterProps=["sx"];const __=ZT,zE=["sx"],OE=x=>{var P,e;const v={systemProps:{},otherProps:{}},M=(P=x==null||(e=x.theme)==null?void 0:e.unstable_sxConfig)!=null?P:Oy;return Object.keys(x).forEach(r=>{M[r]?v.systemProps[r]=x[r]:v.otherProps[r]=x[r]}),v};function FE(x){const{sx:P}=x,e=fs(x,zE),{systemProps:v,otherProps:M}=OE(e);let r;return Array.isArray(P)?r=[v,...P]:typeof P=="function"?r=(...n)=>{const l=P(...n);return Nd(l)?Ta({},v,l):v}:r=Ta({},v,P),Ta({},M,{sx:r})}function KT(x){var P,e,v="";if(typeof x=="string"||typeof x=="number")v+=x;else if(typeof x=="object")if(Array.isArray(x))for(P=0;P<x.length;P++)x[P]&&(e=KT(x[P]))&&(v&&(v+=" "),v+=e);else for(P in x)x[P]&&(v&&(v+=" "),v+=P);return v}function Zs(){for(var x,P,e=0,v="";e<arguments.length;)(x=arguments[e++])&&(P=KT(x))&&(v&&(v+=" "),v+=P);return v}const NE=["values","unit","step"],BE=x=>{const P=Object.keys(x).map(e=>({key:e,val:x[e]}))||[];return P.sort((e,v)=>e.val-v.val),P.reduce((e,v)=>Ta({},e,{[v.key]:v.val}),{})};function UE(x){const{values:P={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:e="px",step:v=5}=x,M=fs(x,NE),r=BE(P),n=Object.keys(r);function l(o){return`@media (min-width:${typeof P[o]=="number"?P[o]:o}${e})`}function c(o){return`@media (max-width:${(typeof P[o]=="number"?P[o]:o)-v/100}${e})`}function t(o,u){const h=n.indexOf(u);return`@media (min-width:${typeof P[o]=="number"?P[o]:o}${e}) and (max-width:${(h!==-1&&typeof P[n[h]]=="number"?P[n[h]]:u)-v/100}${e})`}function f(o){return n.indexOf(o)+1<n.length?t(o,n[n.indexOf(o)+1]):l(o)}function a(o){const u=n.indexOf(o);return u===0?l(n[1]):u===n.length-1?c(n[u]):t(o,n[n.indexOf(o)+1]).replace("@media","@media not all and")}return Ta({keys:n,values:r,up:l,down:c,between:t,only:f,not:a,unit:e},M)}const VE={borderRadius:4},HE=VE;function jE(x=8){if(x.mui)return x;const P=YT({spacing:x}),e=(...v)=>(v.length===0?[1]:v).map(r=>{const n=P(r);return typeof n=="number"?`${n}px`:n}).join(" ");return e.mui=!0,e}const GE=["breakpoints","palette","spacing","shape"];function w_(x={},...P){const{breakpoints:e={},palette:v={},spacing:M,shape:r={}}=x,n=fs(x,GE),l=UE(e),c=jE(M);let t=sh({breakpoints:l,direction:"ltr",components:{},palette:Ta({mode:"light"},v),spacing:c,shape:Ta({},HE,r)},n);return t=P.reduce((f,a)=>sh(f,a),t),t.unstable_sxConfig=Ta({},Oy,n==null?void 0:n.unstable_sxConfig),t.unstable_sx=function(a){return __({sx:a,theme:this})},t}const WE=_n.createContext(null),YE=WE;function T_(){return _n.useContext(YE)}const XE=typeof Symbol=="function"&&Symbol.for,ZE=XE?Symbol.for("mui.nested"):"__THEME_NESTED__";function KE(x){return Object.keys(x).length===0}function $E(x=null){const P=T_();return!P||KE(P)?x:P}const JE=w_();function $T(x=JE){return $E(x)}const QE=["variant"];function Sw(x){return x.length===0}function JT(x){const{variant:P}=x,e=fs(x,QE);let v=P||"";return Object.keys(e).sort().forEach(M=>{M==="color"?v+=Sw(v)?x[M]:Ki(x[M]):v+=`${Sw(v)?M:Ki(M)}${Ki(x[M].toString())}`}),v}const qE=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],e7=["theme"],t7=["theme"];function hm(x){return Object.keys(x).length===0}function r7(x){return typeof x=="string"&&x.charCodeAt(0)>96}const n7=(x,P)=>P.components&&P.components[x]&&P.components[x].styleOverrides?P.components[x].styleOverrides:null,a7=(x,P)=>{let e=[];P&&P.components&&P.components[x]&&P.components[x].variants&&(e=P.components[x].variants);const v={};return e.forEach(M=>{const r=JT(M.props);v[r]=M.style}),v},i7=(x,P,e,v)=>{var M,r;const{ownerState:n={}}=x,l=[],c=e==null||(M=e.components)==null||(r=M[v])==null?void 0:r.variants;return c&&c.forEach(t=>{let f=!0;Object.keys(t.props).forEach(a=>{n[a]!==t.props[a]&&x[a]!==t.props[a]&&(f=!1)}),f&&l.push(P[JT(t.props)])}),l};function _1(x){return x!=="ownerState"&&x!=="theme"&&x!=="sx"&&x!=="as"}const o7=w_();function s7(x={}){const{defaultTheme:P=o7,rootShouldForwardProp:e=_1,slotShouldForwardProp:v=_1}=x,M=r=>{const n=hm(r.theme)?P:r.theme;return __(Ta({},r,{theme:n}))};return M.__mui_systemSx=!0,(r,n={})=>{XS(r,y=>y.filter(b=>!(b!=null&&b.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:t,skipSx:f,overridesResolver:a}=n,o=fs(n,qE),u=t!==void 0?t:c&&c!=="Root"||!1,h=f||!1;let i,s=_1;c==="Root"?s=e:c?s=v:r7(r)&&(s=void 0);const p=YS(r,Ta({shouldForwardProp:s,label:i},o)),d=(y,...b)=>{const m=b?b.map(A=>typeof A=="function"&&A.__emotion_real!==A?k=>{let{theme:R}=k,L=fs(k,e7);return A(Ta({theme:hm(R)?P:R},L))}:A):[];let _=y;l&&a&&m.push(A=>{const k=hm(A.theme)?P:A.theme,R=n7(l,k);if(R){const L={};return Object.entries(R).forEach(([z,E])=>{L[z]=typeof E=="function"?E(Ta({},A,{theme:k})):E}),a(A,L)}return null}),l&&!u&&m.push(A=>{const k=hm(A.theme)?P:A.theme;return i7(A,a7(l,k),k,l)}),h||m.push(M);const T=m.length-b.length;if(Array.isArray(y)&&T>0){const A=new Array(T).fill("");_=[...y,...A],_.raw=[...y.raw,...A]}else typeof y=="function"&&y.__emotion_real!==y&&(_=A=>{let{theme:k}=A,R=fs(A,t7);return y(Ta({theme:hm(k)?P:k},R))});return p(_,...m)};return p.withConfig&&(d.withConfig=p.withConfig),d}}function l7(x){const{theme:P,name:e,props:v}=x;return!P||!P.components||!P.components[e]||!P.components[e].defaultProps?v:ET(P.components[e].defaultProps,v)}function u7({props:x,name:P,defaultTheme:e}){const v=$T(e);return l7({theme:v,name:P,props:x})}function A_(x,P=0,e=1){return Math.min(Math.max(P,x),e)}function c7(x){x=x.slice(1);const P=new RegExp(`.{1,${x.length>=6?2:1}}`,"g");let e=x.match(P);return e&&e[0].length===1&&(e=e.map(v=>v+v)),e?`rgb${e.length===4?"a":""}(${e.map((v,M)=>M<3?parseInt(v,16):Math.round(parseInt(v,16)/255*1e3)/1e3).join(", ")})`:""}function Jd(x){if(x.type)return x;if(x.charAt(0)==="#")return Jd(c7(x));const P=x.indexOf("("),e=x.substring(0,P);if(["rgb","rgba","hsl","hsla","color"].indexOf(e)===-1)throw new Error(b0(9,x));let v=x.substring(P+1,x.length-1),M;if(e==="color"){if(v=v.split(" "),M=v.shift(),v.length===4&&v[3].charAt(0)==="/"&&(v[3]=v[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(M)===-1)throw new Error(b0(10,M))}else v=v.split(",");return v=v.map(r=>parseFloat(r)),{type:e,values:v,colorSpace:M}}function Fy(x){const{type:P,colorSpace:e}=x;let{values:v}=x;return P.indexOf("rgb")!==-1?v=v.map((M,r)=>r<3?parseInt(M,10):M):P.indexOf("hsl")!==-1&&(v[1]=`${v[1]}%`,v[2]=`${v[2]}%`),P.indexOf("color")!==-1?v=`${e} ${v.join(" ")}`:v=`${v.join(", ")}`,`${P}(${v})`}function f7(x){x=Jd(x);const{values:P}=x,e=P[0],v=P[1]/100,M=P[2]/100,r=v*Math.min(M,1-M),n=(t,f=(t+e/30)%12)=>M-r*Math.max(Math.min(f-3,9-f,1),-1);let l="rgb";const c=[Math.round(n(0)*255),Math.round(n(8)*255),Math.round(n(4)*255)];return x.type==="hsla"&&(l+="a",c.push(P[3])),Fy({type:l,values:c})}function Ew(x){x=Jd(x);let P=x.type==="hsl"||x.type==="hsla"?Jd(f7(x)).values:x.values;return P=P.map(e=>(x.type!=="color"&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4)),Number((.2126*P[0]+.7152*P[1]+.0722*P[2]).toFixed(3))}function h7(x,P){const e=Ew(x),v=Ew(P);return(Math.max(e,v)+.05)/(Math.min(e,v)+.05)}function Ku(x,P){return x=Jd(x),P=A_(P),(x.type==="rgb"||x.type==="hsl")&&(x.type+="a"),x.type==="color"?x.values[3]=`/${P}`:x.values[3]=P,Fy(x)}function QT(x,P){if(x=Jd(x),P=A_(P),x.type.indexOf("hsl")!==-1)x.values[2]*=1-P;else if(x.type.indexOf("rgb")!==-1||x.type.indexOf("color")!==-1)for(let e=0;e<3;e+=1)x.values[e]*=1-P;return Fy(x)}function qT(x,P){if(x=Jd(x),P=A_(P),x.type.indexOf("hsl")!==-1)x.values[2]+=(100-x.values[2])*P;else if(x.type.indexOf("rgb")!==-1)for(let e=0;e<3;e+=1)x.values[e]+=(255-x.values[e])*P;else if(x.type.indexOf("color")!==-1)for(let e=0;e<3;e+=1)x.values[e]+=(1-x.values[e])*P;return Fy(x)}function p7(x,P){return Ta({toolbar:{minHeight:56,[x.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[x.up("sm")]:{minHeight:64}}},P)}const d7=["mode","contrastThreshold","tonalOffset"],Cw={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Qm.white,default:Qm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Px={text:{primary:Qm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Qm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Lw(x,P,e,v){const M=v.light||v,r=v.dark||v*1.5;x[P]||(x.hasOwnProperty(e)?x[P]=x[e]:P==="light"?x.light=qT(x.main,M):P==="dark"&&(x.dark=QT(x.main,r)))}function v7(x="light"){return x==="dark"?{main:Hv[200],light:Hv[50],dark:Hv[400]}:{main:Hv[700],light:Hv[400],dark:Hv[800]}}function m7(x="light"){return x==="dark"?{main:Vv[200],light:Vv[50],dark:Vv[400]}:{main:Vv[500],light:Vv[300],dark:Vv[700]}}function g7(x="light"){return x==="dark"?{main:Uv[500],light:Uv[300],dark:Uv[700]}:{main:Uv[700],light:Uv[400],dark:Uv[800]}}function y7(x="light"){return x==="dark"?{main:jv[400],light:jv[300],dark:jv[700]}:{main:jv[700],light:jv[500],dark:jv[900]}}function x7(x="light"){return x==="dark"?{main:Gv[400],light:Gv[300],dark:Gv[700]}:{main:Gv[800],light:Gv[500],dark:Gv[900]}}function b7(x="light"){return x==="dark"?{main:cm[400],light:cm[300],dark:cm[700]}:{main:"#ed6c02",light:cm[500],dark:cm[900]}}function _7(x){const{mode:P="light",contrastThreshold:e=3,tonalOffset:v=.2}=x,M=fs(x,d7),r=x.primary||v7(P),n=x.secondary||m7(P),l=x.error||g7(P),c=x.info||y7(P),t=x.success||x7(P),f=x.warning||b7(P);function a(i){return h7(i,Px.text.primary)>=e?Px.text.primary:Cw.text.primary}const o=({color:i,name:s,mainShade:p=500,lightShade:d=300,darkShade:y=700})=>{if(i=Ta({},i),!i.main&&i[p]&&(i.main=i[p]),!i.hasOwnProperty("main"))throw new Error(b0(11,s?` (${s})`:"",p));if(typeof i.main!="string")throw new Error(b0(12,s?` (${s})`:"",JSON.stringify(i.main)));return Lw(i,"light",d,v),Lw(i,"dark",y,v),i.contrastText||(i.contrastText=a(i.main)),i},u={dark:Px,light:Cw};return sh(Ta({common:Ta({},Qm),mode:P,primary:o({color:r,name:"primary"}),secondary:o({color:n,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:o({color:l,name:"error"}),warning:o({color:f,name:"warning"}),info:o({color:c,name:"info"}),success:o({color:t,name:"success"}),grey:c8,contrastThreshold:e,getContrastText:a,augmentColor:o,tonalOffset:v},u[P]),M)}const w7=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function T7(x){return Math.round(x*1e5)/1e5}const Pw={textTransform:"uppercase"},Rw='"Roboto", "Helvetica", "Arial", sans-serif';function A7(x,P){const e=typeof P=="function"?P(x):P,{fontFamily:v=Rw,fontSize:M=14,fontWeightLight:r=300,fontWeightRegular:n=400,fontWeightMedium:l=500,fontWeightBold:c=700,htmlFontSize:t=16,allVariants:f,pxToRem:a}=e,o=fs(e,w7),u=M/14,h=a||(p=>`${p/t*u}rem`),i=(p,d,y,b,m)=>Ta({fontFamily:v,fontWeight:p,fontSize:h(d),lineHeight:y},v===Rw?{letterSpacing:`${T7(b/d)}em`}:{},m,f),s={h1:i(r,96,1.167,-1.5),h2:i(r,60,1.2,-.5),h3:i(n,48,1.167,0),h4:i(n,34,1.235,.25),h5:i(n,24,1.334,0),h6:i(l,20,1.6,.15),subtitle1:i(n,16,1.75,.15),subtitle2:i(l,14,1.57,.1),body1:i(n,16,1.5,.15),body2:i(n,14,1.43,.15),button:i(l,14,1.75,.4,Pw),caption:i(n,12,1.66,.4),overline:i(n,12,2.66,1,Pw),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return sh(Ta({htmlFontSize:t,pxToRem:h,fontFamily:v,fontSize:M,fontWeightLight:r,fontWeightRegular:n,fontWeightMedium:l,fontWeightBold:c},s),o,{clone:!1})}const k7=.2,M7=.14,S7=.12;function sl(...x){return[`${x[0]}px ${x[1]}px ${x[2]}px ${x[3]}px rgba(0,0,0,${k7})`,`${x[4]}px ${x[5]}px ${x[6]}px ${x[7]}px rgba(0,0,0,${M7})`,`${x[8]}px ${x[9]}px ${x[10]}px ${x[11]}px rgba(0,0,0,${S7})`].join(",")}const E7=["none",sl(0,2,1,-1,0,1,1,0,0,1,3,0),sl(0,3,1,-2,0,2,2,0,0,1,5,0),sl(0,3,3,-2,0,3,4,0,0,1,8,0),sl(0,2,4,-1,0,4,5,0,0,1,10,0),sl(0,3,5,-1,0,5,8,0,0,1,14,0),sl(0,3,5,-1,0,6,10,0,0,1,18,0),sl(0,4,5,-2,0,7,10,1,0,2,16,1),sl(0,5,5,-3,0,8,10,1,0,3,14,2),sl(0,5,6,-3,0,9,12,1,0,3,16,2),sl(0,6,6,-3,0,10,14,1,0,4,18,3),sl(0,6,7,-4,0,11,15,1,0,4,20,3),sl(0,7,8,-4,0,12,17,2,0,5,22,4),sl(0,7,8,-4,0,13,19,2,0,5,24,4),sl(0,7,9,-4,0,14,21,2,0,5,26,4),sl(0,8,9,-5,0,15,22,2,0,6,28,5),sl(0,8,10,-5,0,16,24,2,0,6,30,5),sl(0,8,11,-5,0,17,26,2,0,6,32,5),sl(0,9,11,-5,0,18,28,2,0,7,34,6),sl(0,9,12,-6,0,19,29,2,0,7,36,6),sl(0,10,13,-6,0,20,31,3,0,8,38,7),sl(0,10,13,-6,0,21,33,3,0,8,40,7),sl(0,10,14,-6,0,22,35,3,0,8,42,7),sl(0,11,14,-7,0,23,36,3,0,9,44,8),sl(0,11,15,-7,0,24,38,3,0,9,46,8)],C7=E7,L7=["duration","easing","delay"],P7={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},R7={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Dw(x){return`${Math.round(x)}ms`}function D7(x){if(!x)return 0;const P=x/36;return Math.round((4+15*P**.25+P/5)*10)}function I7(x){const P=Ta({},P7,x.easing),e=Ta({},R7,x.duration);return Ta({getAutoHeightDuration:D7,create:(M=["all"],r={})=>{const{duration:n=e.standard,easing:l=P.easeInOut,delay:c=0}=r;return fs(r,L7),(Array.isArray(M)?M:[M]).map(t=>`${t} ${typeof n=="string"?n:Dw(n)} ${l} ${typeof c=="string"?c:Dw(c)}`).join(",")}},x,{easing:P,duration:e})}const z7={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},O7=z7,F7=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function N7(x={},...P){const{mixins:e={},palette:v={},transitions:M={},typography:r={}}=x,n=fs(x,F7);if(x.vars)throw new Error(b0(18));const l=_7(v),c=w_(x);let t=sh(c,{mixins:p7(c.breakpoints,e),palette:l,shadows:C7.slice(),typography:A7(l,r),transitions:I7(M),zIndex:Ta({},O7)});return t=sh(t,n),t=P.reduce((f,a)=>sh(f,a),t),t.unstable_sxConfig=Ta({},Oy,n==null?void 0:n.unstable_sxConfig),t.unstable_sx=function(a){return __({sx:a,theme:this})},t}const B7=N7(),k_=B7;function U7(){return $T(k_)}function If({props:x,name:P}){return u7({props:x,name:P,defaultTheme:k_})}const V7=x=>_1(x)&&x!=="classes",H7=s7({defaultTheme:k_,rootShouldForwardProp:V7}),Pc=H7,j7=x=>{let P;return x<1?P=5.11916*x**2:P=4.5*Math.log(x+1)+2,(P/100).toFixed(2)},Iw=j7;function G7(x){return Rf("MuiSvgIcon",x)}Df("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const W7=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Y7=x=>{const{color:P,fontSize:e,classes:v}=x,M={root:["root",P!=="inherit"&&`color${Ki(P)}`,`fontSize${Ki(e)}`]};return lh(M,G7,v)},X7=Pc("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(x,P)=>{const{ownerState:e}=x;return[P.root,e.color!=="inherit"&&P[`color${Ki(e.color)}`],P[`fontSize${Ki(e.fontSize)}`]]}})(({theme:x,ownerState:P})=>{var e,v,M,r,n,l,c,t,f,a,o,u,h,i,s,p,d;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(e=x.transitions)==null||(v=e.create)==null?void 0:v.call(e,"fill",{duration:(M=x.transitions)==null||(r=M.duration)==null?void 0:r.shorter}),fontSize:{inherit:"inherit",small:((n=x.typography)==null||(l=n.pxToRem)==null?void 0:l.call(n,20))||"1.25rem",medium:((c=x.typography)==null||(t=c.pxToRem)==null?void 0:t.call(c,24))||"1.5rem",large:((f=x.typography)==null||(a=f.pxToRem)==null?void 0:a.call(f,35))||"2.1875rem"}[P.fontSize],color:(o=(u=(x.vars||x).palette)==null||(h=u[P.color])==null?void 0:h.main)!=null?o:{action:(i=(x.vars||x).palette)==null||(s=i.action)==null?void 0:s.active,disabled:(p=(x.vars||x).palette)==null||(d=p.action)==null?void 0:d.disabled,inherit:void 0}[P.color]}}),e6=_n.forwardRef(function(P,e){const v=If({props:P,name:"MuiSvgIcon"}),{children:M,className:r,color:n="inherit",component:l="svg",fontSize:c="medium",htmlColor:t,inheritViewBox:f=!1,titleAccess:a,viewBox:o="0 0 24 24"}=v,u=fs(v,W7),h=Ta({},v,{color:n,component:l,fontSize:c,instanceFontSize:P.fontSize,inheritViewBox:f,viewBox:o}),i={};f||(i.viewBox=o);const s=Y7(h);return xs.jsxs(X7,Ta({as:l,className:Zs(s.root,r),focusable:"false",color:t,"aria-hidden":a?void 0:!0,role:a?"img":void 0,ref:e},i,u,{ownerState:h,children:[M,a?xs.jsx("title",{children:a}):null]}))});e6.muiName="SvgIcon";const zw=e6;function Z7(x,P){function e(v,M){return xs.jsx(zw,Ta({"data-testid":`${P}Icon`,ref:M},v,{children:x}))}return e.muiName=zw.muiName,_n.memo(_n.forwardRef(e))}function Gb(x,P){return Gb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,M){return v.__proto__=M,v},Gb(x,P)}function M_(x,P){x.prototype=Object.create(P.prototype),x.prototype.constructor=x,Gb(x,P)}const Ow=bn.createContext(null);function Wb(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function S_(x,P){var e=function(r){return P&&_n.isValidElement(r)?P(r):r},v=Object.create(null);return x&&_n.Children.map(x,function(M){return M}).forEach(function(M){v[M.key]=e(M)}),v}function K7(x,P){x=x||{},P=P||{};function e(f){return f in P?P[f]:x[f]}var v=Object.create(null),M=[];for(var r in x)r in P?M.length&&(v[r]=M,M=[]):M.push(r);var n,l={};for(var c in P){if(v[c])for(n=0;n<v[c].length;n++){var t=v[c][n];l[v[c][n]]=e(t)}l[c]=e(c)}for(n=0;n<M.length;n++)l[M[n]]=e(M[n]);return l}function Wd(x,P,e){return e[P]!=null?e[P]:x.props[P]}function $7(x,P){return S_(x.children,function(e){return _n.cloneElement(e,{onExited:P.bind(null,e),in:!0,appear:Wd(e,"appear",x),enter:Wd(e,"enter",x),exit:Wd(e,"exit",x)})})}function J7(x,P,e){var v=S_(x.children),M=K7(P,v);return Object.keys(M).forEach(function(r){var n=M[r];if(_n.isValidElement(n)){var l=r in P,c=r in v,t=P[r],f=_n.isValidElement(t)&&!t.props.in;c&&(!l||f)?M[r]=_n.cloneElement(n,{onExited:e.bind(null,n),in:!0,exit:Wd(n,"exit",x),enter:Wd(n,"enter",x)}):!c&&l&&!f?M[r]=_n.cloneElement(n,{in:!1}):c&&l&&_n.isValidElement(t)&&(M[r]=_n.cloneElement(n,{onExited:e.bind(null,n),in:t.props.in,exit:Wd(n,"exit",x),enter:Wd(n,"enter",x)}))}}),M}var Q7=Object.values||function(x){return Object.keys(x).map(function(P){return x[P]})},q7={component:"div",childFactory:function(P){return P}},E_=function(x){M_(P,x);function P(v,M){var r;r=x.call(this,v,M)||this;var n=r.handleExited.bind(Wb(r));return r.state={contextValue:{isMounting:!0},handleExited:n,firstRender:!0},r}var e=P.prototype;return e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},e.componentWillUnmount=function(){this.mounted=!1},P.getDerivedStateFromProps=function(M,r){var n=r.children,l=r.handleExited,c=r.firstRender;return{children:c?$7(M,l):J7(M,n,l),firstRender:!1}},e.handleExited=function(M,r){var n=S_(this.props.children);M.key in n||(M.props.onExited&&M.props.onExited(r),this.mounted&&this.setState(function(l){var c=Ta({},l.children);return delete c[M.key],{children:c}}))},e.render=function(){var M=this.props,r=M.component,n=M.childFactory,l=fs(M,["component","childFactory"]),c=this.state.contextValue,t=Q7(this.state.children).map(n);return delete l.appear,delete l.enter,delete l.exit,r===null?bn.createElement(Ow.Provider,{value:c},t):bn.createElement(Ow.Provider,{value:c},bn.createElement(r,l,t))},P}(bn.Component);E_.propTypes={};E_.defaultProps=q7;const eC=E_;function tC(x){return Rf("MuiPaper",x)}Df("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const rC=["className","component","elevation","square","variant"],nC=x=>{const{square:P,elevation:e,variant:v,classes:M}=x,r={root:["root",v,!P&&"rounded",v==="elevation"&&`elevation${e}`]};return lh(r,tC,M)},aC=Pc("div",{name:"MuiPaper",slot:"Root",overridesResolver:(x,P)=>{const{ownerState:e}=x;return[P.root,P[e.variant],!e.square&&P.rounded,e.variant==="elevation"&&P[`elevation${e.elevation}`]]}})(({theme:x,ownerState:P})=>{var e;return Ta({backgroundColor:(x.vars||x).palette.background.paper,color:(x.vars||x).palette.text.primary,transition:x.transitions.create("box-shadow")},!P.square&&{borderRadius:x.shape.borderRadius},P.variant==="outlined"&&{border:`1px solid ${(x.vars||x).palette.divider}`},P.variant==="elevation"&&Ta({boxShadow:(x.vars||x).shadows[P.elevation]},!x.vars&&x.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Ku("#fff",Iw(P.elevation))}, ${Ku("#fff",Iw(P.elevation))})`},x.vars&&{backgroundImage:(e=x.vars.overlays)==null?void 0:e[P.elevation]}))}),iC=_n.forwardRef(function(P,e){const v=If({props:P,name:"MuiPaper"}),{className:M,component:r="div",elevation:n=1,square:l=!1,variant:c="elevation"}=v,t=fs(v,rC),f=Ta({},v,{component:r,elevation:n,square:l,variant:c}),a=nC(f);return xs.jsx(aC,Ta({as:r,ownerState:f,className:Zs(a.root,M),ref:e},t))}),Xs=iC;function oC(x){const{className:P,classes:e,pulsate:v=!1,rippleX:M,rippleY:r,rippleSize:n,in:l,onExited:c,timeout:t}=x,[f,a]=_n.useState(!1),o=Zs(P,e.ripple,e.rippleVisible,v&&e.ripplePulsate),u={width:n,height:n,top:-(n/2)+r,left:-(n/2)+M},h=Zs(e.child,f&&e.childLeaving,v&&e.childPulsate);return!l&&!f&&a(!0),_n.useEffect(()=>{if(!l&&c!=null){const i=setTimeout(c,t);return()=>{clearTimeout(i)}}},[c,l,t]),xs.jsx("span",{className:o,style:u,children:xs.jsx("span",{className:h})})}const sC=Df("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Af=sC,lC=["center","classes","className"];let Ny=x=>x,Fw,Nw,Bw,Uw;const Yb=550,uC=80,cC=m_(Fw||(Fw=Ny`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),fC=m_(Nw||(Nw=Ny`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),hC=m_(Bw||(Bw=Ny`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),pC=Pc("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),dC=Pc(oC,{name:"MuiTouchRipple",slot:"Ripple"})(Uw||(Uw=Ny`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Af.rippleVisible,cC,Yb,({theme:x})=>x.transitions.easing.easeInOut,Af.ripplePulsate,({theme:x})=>x.transitions.duration.shorter,Af.child,Af.childLeaving,fC,Yb,({theme:x})=>x.transitions.easing.easeInOut,Af.childPulsate,hC,({theme:x})=>x.transitions.easing.easeInOut),vC=_n.forwardRef(function(P,e){const v=If({props:P,name:"MuiTouchRipple"}),{center:M=!1,classes:r={},className:n}=v,l=fs(v,lC),[c,t]=_n.useState([]),f=_n.useRef(0),a=_n.useRef(null);_n.useEffect(()=>{a.current&&(a.current(),a.current=null)},[c]);const o=_n.useRef(!1),u=_n.useRef(null),h=_n.useRef(null),i=_n.useRef(null);_n.useEffect(()=>()=>{clearTimeout(u.current)},[]);const s=_n.useCallback(b=>{const{pulsate:m,rippleX:_,rippleY:T,rippleSize:g,cb:A}=b;t(k=>[...k,xs.jsx(dC,{classes:{ripple:Zs(r.ripple,Af.ripple),rippleVisible:Zs(r.rippleVisible,Af.rippleVisible),ripplePulsate:Zs(r.ripplePulsate,Af.ripplePulsate),child:Zs(r.child,Af.child),childLeaving:Zs(r.childLeaving,Af.childLeaving),childPulsate:Zs(r.childPulsate,Af.childPulsate)},timeout:Yb,pulsate:m,rippleX:_,rippleY:T,rippleSize:g},f.current)]),f.current+=1,a.current=A},[r]),p=_n.useCallback((b={},m={},_=()=>{})=>{const{pulsate:T=!1,center:g=M||m.pulsate,fakeElement:A=!1}=m;if((b==null?void 0:b.type)==="mousedown"&&o.current){o.current=!1;return}(b==null?void 0:b.type)==="touchstart"&&(o.current=!0);const k=A?null:i.current,R=k?k.getBoundingClientRect():{width:0,height:0,left:0,top:0};let L,z,E;if(g||b===void 0||b.clientX===0&&b.clientY===0||!b.clientX&&!b.touches)L=Math.round(R.width/2),z=Math.round(R.height/2);else{const{clientX:S,clientY:C}=b.touches&&b.touches.length>0?b.touches[0]:b;L=Math.round(S-R.left),z=Math.round(C-R.top)}if(g)E=Math.sqrt((2*R.width**2+R.height**2)/3),E%2===0&&(E+=1);else{const S=Math.max(Math.abs((k?k.clientWidth:0)-L),L)*2+2,C=Math.max(Math.abs((k?k.clientHeight:0)-z),z)*2+2;E=Math.sqrt(S**2+C**2)}b!=null&&b.touches?h.current===null&&(h.current=()=>{s({pulsate:T,rippleX:L,rippleY:z,rippleSize:E,cb:_})},u.current=setTimeout(()=>{h.current&&(h.current(),h.current=null)},uC)):s({pulsate:T,rippleX:L,rippleY:z,rippleSize:E,cb:_})},[M,s]),d=_n.useCallback(()=>{p({},{pulsate:!0})},[p]),y=_n.useCallback((b,m)=>{if(clearTimeout(u.current),(b==null?void 0:b.type)==="touchend"&&h.current){h.current(),h.current=null,u.current=setTimeout(()=>{y(b,m)});return}h.current=null,t(_=>_.length>0?_.slice(1):_),a.current=m},[]);return _n.useImperativeHandle(e,()=>({pulsate:d,start:p,stop:y}),[d,p,y]),xs.jsx(pC,Ta({className:Zs(Af.root,r.root,n),ref:i},l,{children:xs.jsx(eC,{component:null,exit:!0,children:c})}))}),mC=vC;function gC(x){return Rf("MuiButtonBase",x)}const yC=Df("MuiButtonBase",["root","disabled","focusVisible"]),xC=yC,bC=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],_C=x=>{const{disabled:P,focusVisible:e,focusVisibleClassName:v,classes:M}=x,n=lh({root:["root",P&&"disabled",e&&"focusVisible"]},gC,M);return e&&v&&(n.root+=` ${v}`),n},wC=Pc("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(x,P)=>P.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${xC.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),TC=_n.forwardRef(function(P,e){const v=If({props:P,name:"MuiButtonBase"}),{action:M,centerRipple:r=!1,children:n,className:l,component:c="button",disabled:t=!1,disableRipple:f=!1,disableTouchRipple:a=!1,focusRipple:o=!1,LinkComponent:u="a",onBlur:h,onClick:i,onContextMenu:s,onDragLeave:p,onFocus:d,onFocusVisible:y,onKeyDown:b,onKeyUp:m,onMouseDown:_,onMouseLeave:T,onMouseUp:g,onTouchEnd:A,onTouchMove:k,onTouchStart:R,tabIndex:L=0,TouchRippleProps:z,touchRippleRef:E,type:S}=v,C=fs(v,bC),D=_n.useRef(null),F=_n.useRef(null),N=Nb(F,E),{isFocusVisibleRef:G,onFocus:U,onBlur:X,ref:I}=k8(),[B,j]=_n.useState(!1);t&&B&&j(!1),_n.useImperativeHandle(M,()=>({focusVisible:()=>{j(!0),D.current.focus()}}),[]);const[H,K]=_n.useState(!1);_n.useEffect(()=>{K(!0)},[]);const te=H&&!f&&!t;_n.useEffect(()=>{B&&o&&!f&&H&&F.current.pulsate()},[f,o,B,H]);function J(Ze,tt,Ce=a){return e1(Ae=>(tt&&tt(Ae),!Ce&&F.current&&F.current[Ze](Ae),!0))}const oe=J("start",_),ie=J("stop",s),Q=J("stop",p),V=J("stop",g),se=J("stop",Ze=>{B&&Ze.preventDefault(),T&&T(Ze)}),re=J("start",R),ee=J("stop",A),ae=J("stop",k),fe=J("stop",Ze=>{X(Ze),G.current===!1&&j(!1),h&&h(Ze)},!1),de=e1(Ze=>{D.current||(D.current=Ze.currentTarget),U(Ze),G.current===!0&&(j(!0),y&&y(Ze)),d&&d(Ze)}),pe=()=>{const Ze=D.current;return c&&c!=="button"&&!(Ze.tagName==="A"&&Ze.href)},W=_n.useRef(!1),ue=e1(Ze=>{o&&!W.current&&B&&F.current&&Ze.key===" "&&(W.current=!0,F.current.stop(Ze,()=>{F.current.start(Ze)})),Ze.target===Ze.currentTarget&&pe()&&Ze.key===" "&&Ze.preventDefault(),b&&b(Ze),Ze.target===Ze.currentTarget&&pe()&&Ze.key==="Enter"&&!t&&(Ze.preventDefault(),i&&i(Ze))}),me=e1(Ze=>{o&&Ze.key===" "&&F.current&&B&&!Ze.defaultPrevented&&(W.current=!1,F.current.stop(Ze,()=>{F.current.pulsate(Ze)})),m&&m(Ze),i&&Ze.target===Ze.currentTarget&&pe()&&Ze.key===" "&&!Ze.defaultPrevented&&i(Ze)});let be=c;be==="button"&&(C.href||C.to)&&(be=u);const ke={};be==="button"?(ke.type=S===void 0?"button":S,ke.disabled=t):(!C.href&&!C.to&&(ke.role="button"),t&&(ke["aria-disabled"]=t));const Pe=Nb(e,I,D),je=Ta({},v,{centerRipple:r,component:c,disabled:t,disableRipple:f,disableTouchRipple:a,focusRipple:o,tabIndex:L,focusVisible:B}),ze=_C(je);return xs.jsxs(wC,Ta({as:be,className:Zs(ze.root,l),ownerState:je,onBlur:fe,onClick:i,onContextMenu:ie,onFocus:de,onKeyDown:ue,onKeyUp:me,onMouseDown:oe,onMouseLeave:se,onMouseUp:V,onDragLeave:Q,onTouchEnd:ee,onTouchMove:ae,onTouchStart:re,ref:Pe,tabIndex:t?-1:L,type:S},ke,C,{children:[n,te?xs.jsx(mC,Ta({ref:N,center:r},z)):null]}))}),Vw=TC,AC=Z7(xs.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function kC(x){return Rf("MuiChip",x)}const MC=Df("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Jo=MC,SC=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],EC=x=>{const{classes:P,disabled:e,size:v,color:M,iconColor:r,onDelete:n,clickable:l,variant:c}=x,t={root:["root",c,e&&"disabled",`size${Ki(v)}`,`color${Ki(M)}`,l&&"clickable",l&&`clickableColor${Ki(M)}`,n&&"deletable",n&&`deletableColor${Ki(M)}`,`${c}${Ki(M)}`],label:["label",`label${Ki(v)}`],avatar:["avatar",`avatar${Ki(v)}`,`avatarColor${Ki(M)}`],icon:["icon",`icon${Ki(v)}`,`iconColor${Ki(r)}`],deleteIcon:["deleteIcon",`deleteIcon${Ki(v)}`,`deleteIconColor${Ki(M)}`,`deleteIcon${Ki(c)}Color${Ki(M)}`]};return lh(t,kC,P)},CC=Pc("div",{name:"MuiChip",slot:"Root",overridesResolver:(x,P)=>{const{ownerState:e}=x,{color:v,iconColor:M,clickable:r,onDelete:n,size:l,variant:c}=e;return[{[`& .${Jo.avatar}`]:P.avatar},{[`& .${Jo.avatar}`]:P[`avatar${Ki(l)}`]},{[`& .${Jo.avatar}`]:P[`avatarColor${Ki(v)}`]},{[`& .${Jo.icon}`]:P.icon},{[`& .${Jo.icon}`]:P[`icon${Ki(l)}`]},{[`& .${Jo.icon}`]:P[`iconColor${Ki(M)}`]},{[`& .${Jo.deleteIcon}`]:P.deleteIcon},{[`& .${Jo.deleteIcon}`]:P[`deleteIcon${Ki(l)}`]},{[`& .${Jo.deleteIcon}`]:P[`deleteIconColor${Ki(v)}`]},{[`& .${Jo.deleteIcon}`]:P[`deleteIcon${Ki(c)}Color${Ki(v)}`]},P.root,P[`size${Ki(l)}`],P[`color${Ki(v)}`],r&&P.clickable,r&&v!=="default"&&P[`clickableColor${Ki(v)})`],n&&P.deletable,n&&v!=="default"&&P[`deletableColor${Ki(v)}`],P[c],P[`${c}${Ki(v)}`]]}})(({theme:x,ownerState:P})=>{const e=x.palette.mode==="light"?x.palette.grey[700]:x.palette.grey[300];return Ta({maxWidth:"100%",fontFamily:x.typography.fontFamily,fontSize:x.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(x.vars||x).palette.text.primary,backgroundColor:(x.vars||x).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:x.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Jo.disabled}`]:{opacity:(x.vars||x).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Jo.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:x.vars?x.vars.palette.Chip.defaultAvatarColor:e,fontSize:x.typography.pxToRem(12)},[`& .${Jo.avatarColorPrimary}`]:{color:(x.vars||x).palette.primary.contrastText,backgroundColor:(x.vars||x).palette.primary.dark},[`& .${Jo.avatarColorSecondary}`]:{color:(x.vars||x).palette.secondary.contrastText,backgroundColor:(x.vars||x).palette.secondary.dark},[`& .${Jo.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:x.typography.pxToRem(10)},[`& .${Jo.icon}`]:Ta({marginLeft:5,marginRight:-6},P.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},P.iconColor===P.color&&Ta({color:x.vars?x.vars.palette.Chip.defaultIconColor:e},P.color!=="default"&&{color:"inherit"})),[`& .${Jo.deleteIcon}`]:Ta({WebkitTapHighlightColor:"transparent",color:x.vars?`rgba(${x.vars.palette.text.primaryChannel} / 0.26)`:Ku(x.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:x.vars?`rgba(${x.vars.palette.text.primaryChannel} / 0.4)`:Ku(x.palette.text.primary,.4)}},P.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},P.color!=="default"&&{color:x.vars?`rgba(${x.vars.palette[P.color].contrastTextChannel} / 0.7)`:Ku(x.palette[P.color].contrastText,.7),"&:hover, &:active":{color:(x.vars||x).palette[P.color].contrastText}})},P.size==="small"&&{height:24},P.color!=="default"&&{backgroundColor:(x.vars||x).palette[P.color].main,color:(x.vars||x).palette[P.color].contrastText},P.onDelete&&{[`&.${Jo.focusVisible}`]:{backgroundColor:x.vars?`rgba(${x.vars.palette.action.selectedChannel} / calc(${x.vars.palette.action.selectedOpacity} + ${x.vars.palette.action.focusOpacity}))`:Ku(x.palette.action.selected,x.palette.action.selectedOpacity+x.palette.action.focusOpacity)}},P.onDelete&&P.color!=="default"&&{[`&.${Jo.focusVisible}`]:{backgroundColor:(x.vars||x).palette[P.color].dark}})},({theme:x,ownerState:P})=>Ta({},P.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:x.vars?`rgba(${x.vars.palette.action.selectedChannel} / calc(${x.vars.palette.action.selectedOpacity} + ${x.vars.palette.action.hoverOpacity}))`:Ku(x.palette.action.selected,x.palette.action.selectedOpacity+x.palette.action.hoverOpacity)},[`&.${Jo.focusVisible}`]:{backgroundColor:x.vars?`rgba(${x.vars.palette.action.selectedChannel} / calc(${x.vars.palette.action.selectedOpacity} + ${x.vars.palette.action.focusOpacity}))`:Ku(x.palette.action.selected,x.palette.action.selectedOpacity+x.palette.action.focusOpacity)},"&:active":{boxShadow:(x.vars||x).shadows[1]}},P.clickable&&P.color!=="default"&&{[`&:hover, &.${Jo.focusVisible}`]:{backgroundColor:(x.vars||x).palette[P.color].dark}}),({theme:x,ownerState:P})=>Ta({},P.variant==="outlined"&&{backgroundColor:"transparent",border:x.vars?`1px solid ${x.vars.palette.Chip.defaultBorder}`:`1px solid ${x.palette.mode==="light"?x.palette.grey[400]:x.palette.grey[700]}`,[`&.${Jo.clickable}:hover`]:{backgroundColor:(x.vars||x).palette.action.hover},[`&.${Jo.focusVisible}`]:{backgroundColor:(x.vars||x).palette.action.focus},[`& .${Jo.avatar}`]:{marginLeft:4},[`& .${Jo.avatarSmall}`]:{marginLeft:2},[`& .${Jo.icon}`]:{marginLeft:4},[`& .${Jo.iconSmall}`]:{marginLeft:2},[`& .${Jo.deleteIcon}`]:{marginRight:5},[`& .${Jo.deleteIconSmall}`]:{marginRight:3}},P.variant==="outlined"&&P.color!=="default"&&{color:(x.vars||x).palette[P.color].main,border:`1px solid ${x.vars?`rgba(${x.vars.palette[P.color].mainChannel} / 0.7)`:Ku(x.palette[P.color].main,.7)}`,[`&.${Jo.clickable}:hover`]:{backgroundColor:x.vars?`rgba(${x.vars.palette[P.color].mainChannel} / ${x.vars.palette.action.hoverOpacity})`:Ku(x.palette[P.color].main,x.palette.action.hoverOpacity)},[`&.${Jo.focusVisible}`]:{backgroundColor:x.vars?`rgba(${x.vars.palette[P.color].mainChannel} / ${x.vars.palette.action.focusOpacity})`:Ku(x.palette[P.color].main,x.palette.action.focusOpacity)},[`& .${Jo.deleteIcon}`]:{color:x.vars?`rgba(${x.vars.palette[P.color].mainChannel} / 0.7)`:Ku(x.palette[P.color].main,.7),"&:hover, &:active":{color:(x.vars||x).palette[P.color].main}}})),LC=Pc("span",{name:"MuiChip",slot:"Label",overridesResolver:(x,P)=>{const{ownerState:e}=x,{size:v}=e;return[P.label,P[`label${Ki(v)}`]]}})(({ownerState:x})=>Ta({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},x.size==="small"&&{paddingLeft:8,paddingRight:8}));function Hw(x){return x.key==="Backspace"||x.key==="Delete"}const PC=_n.forwardRef(function(P,e){const v=If({props:P,name:"MuiChip"}),{avatar:M,className:r,clickable:n,color:l="default",component:c,deleteIcon:t,disabled:f=!1,icon:a,label:o,onClick:u,onDelete:h,onKeyDown:i,onKeyUp:s,size:p="medium",variant:d="filled",tabIndex:y,skipFocusWhenDisabled:b=!1}=v,m=fs(v,SC),_=_n.useRef(null),T=Nb(_,e),g=N=>{N.stopPropagation(),h&&h(N)},A=N=>{N.currentTarget===N.target&&Hw(N)&&N.preventDefault(),i&&i(N)},k=N=>{N.currentTarget===N.target&&(h&&Hw(N)?h(N):N.key==="Escape"&&_.current&&_.current.blur()),s&&s(N)},R=n!==!1&&u?!0:n,L=R||h?Vw:c||"div",z=Ta({},v,{component:L,disabled:f,size:p,color:l,iconColor:_n.isValidElement(a)&&a.props.color||l,onDelete:!!h,clickable:R,variant:d}),E=EC(z),S=L===Vw?Ta({component:c||"div",focusVisibleClassName:E.focusVisible},h&&{disableRipple:!0}):{};let C=null;h&&(C=t&&_n.isValidElement(t)?_n.cloneElement(t,{className:Zs(t.props.className,E.deleteIcon),onClick:g}):xs.jsx(AC,{className:Zs(E.deleteIcon),onClick:g}));let D=null;M&&_n.isValidElement(M)&&(D=_n.cloneElement(M,{className:Zs(E.avatar,M.props.className)}));let F=null;return a&&_n.isValidElement(a)&&(F=_n.cloneElement(a,{className:Zs(E.icon,a.props.className)})),xs.jsxs(CC,Ta({as:L,className:Zs(E.root,r),disabled:R&&f?!0:void 0,onClick:u,onKeyDown:A,onKeyUp:k,ref:T,tabIndex:b&&f?-1:y,ownerState:z},S,m,{children:[D||F,xs.jsx(LC,{className:Zs(E.label),ownerState:z,children:o}),C]}))}),Yi=PC,RC=_n.createContext(),jw=RC;function DC(x){return Rf("MuiGrid",x)}const IC=[0,1,2,3,4,5,6,7,8,9,10],zC=["column-reverse","column","row-reverse","row"],OC=["nowrap","wrap-reverse","wrap"],pm=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],rg=Df("MuiGrid",["root","container","item","zeroMinWidth",...IC.map(x=>`spacing-xs-${x}`),...zC.map(x=>`direction-xs-${x}`),...OC.map(x=>`wrap-xs-${x}`),...pm.map(x=>`grid-xs-${x}`),...pm.map(x=>`grid-sm-${x}`),...pm.map(x=>`grid-md-${x}`),...pm.map(x=>`grid-lg-${x}`),...pm.map(x=>`grid-xl-${x}`)]),FC=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function v0(x){const P=parseFloat(x);return`${P}${String(x).replace(String(P),"")||"px"}`}function NC({theme:x,ownerState:P}){let e;return x.breakpoints.keys.reduce((v,M)=>{let r={};if(P[M]&&(e=P[M]),!e)return v;if(e===!0)r={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(e==="auto")r={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const n=Cy({values:P.columns,breakpoints:x.breakpoints.values}),l=typeof n=="object"?n[M]:n;if(l==null)return v;const c=`${Math.round(e/l*1e8)/1e6}%`;let t={};if(P.container&&P.item&&P.columnSpacing!==0){const f=x.spacing(P.columnSpacing);if(f!=="0px"){const a=`calc(${c} + ${v0(f)})`;t={flexBasis:a,maxWidth:a}}}r=Ta({flexBasis:c,flexGrow:0,maxWidth:c},t)}return x.breakpoints.values[M]===0?Object.assign(v,r):v[x.breakpoints.up(M)]=r,v},{})}function BC({theme:x,ownerState:P}){const e=Cy({values:P.direction,breakpoints:x.breakpoints.values});return Lf({theme:x},e,v=>{const M={flexDirection:v};return v.indexOf("column")===0&&(M[`& > .${rg.item}`]={maxWidth:"none"}),M})}function t6({breakpoints:x,values:P}){let e="";Object.keys(P).forEach(M=>{e===""&&P[M]!==0&&(e=M)});const v=Object.keys(x).sort((M,r)=>x[M]-x[r]);return v.slice(0,v.indexOf(e))}function UC({theme:x,ownerState:P}){const{container:e,rowSpacing:v}=P;let M={};if(e&&v!==0){const r=Cy({values:v,breakpoints:x.breakpoints.values});let n;typeof r=="object"&&(n=t6({breakpoints:x.breakpoints.values,values:r})),M=Lf({theme:x},r,(l,c)=>{var t;const f=x.spacing(l);return f!=="0px"?{marginTop:`-${v0(f)}`,[`& > .${rg.item}`]:{paddingTop:v0(f)}}:(t=n)!=null&&t.includes(c)?{}:{marginTop:0,[`& > .${rg.item}`]:{paddingTop:0}}})}return M}function VC({theme:x,ownerState:P}){const{container:e,columnSpacing:v}=P;let M={};if(e&&v!==0){const r=Cy({values:v,breakpoints:x.breakpoints.values});let n;typeof r=="object"&&(n=t6({breakpoints:x.breakpoints.values,values:r})),M=Lf({theme:x},r,(l,c)=>{var t;const f=x.spacing(l);return f!=="0px"?{width:`calc(100% + ${v0(f)})`,marginLeft:`-${v0(f)}`,[`& > .${rg.item}`]:{paddingLeft:v0(f)}}:(t=n)!=null&&t.includes(c)?{}:{width:"100%",marginLeft:0,[`& > .${rg.item}`]:{paddingLeft:0}}})}return M}function HC(x,P,e={}){if(!x||x<=0)return[];if(typeof x=="string"&&!Number.isNaN(Number(x))||typeof x=="number")return[e[`spacing-xs-${String(x)}`]];const v=[];return P.forEach(M=>{const r=x[M];Number(r)>0&&v.push(e[`spacing-${M}-${String(r)}`])}),v}const jC=Pc("div",{name:"MuiGrid",slot:"Root",overridesResolver:(x,P)=>{const{ownerState:e}=x,{container:v,direction:M,item:r,spacing:n,wrap:l,zeroMinWidth:c,breakpoints:t}=e;let f=[];v&&(f=HC(n,t,P));const a=[];return t.forEach(o=>{const u=e[o];u&&a.push(P[`grid-${o}-${String(u)}`])}),[P.root,v&&P.container,r&&P.item,c&&P.zeroMinWidth,...f,M!=="row"&&P[`direction-xs-${String(M)}`],l!=="wrap"&&P[`wrap-xs-${String(l)}`],...a]}})(({ownerState:x})=>Ta({boxSizing:"border-box"},x.container&&{display:"flex",flexWrap:"wrap",width:"100%"},x.item&&{margin:0},x.zeroMinWidth&&{minWidth:0},x.wrap!=="wrap"&&{flexWrap:x.wrap}),BC,UC,VC,NC);function GC(x,P){if(!x||x<=0)return[];if(typeof x=="string"&&!Number.isNaN(Number(x))||typeof x=="number")return[`spacing-xs-${String(x)}`];const e=[];return P.forEach(v=>{const M=x[v];if(Number(M)>0){const r=`spacing-${v}-${String(M)}`;e.push(r)}}),e}const WC=x=>{const{classes:P,container:e,direction:v,item:M,spacing:r,wrap:n,zeroMinWidth:l,breakpoints:c}=x;let t=[];e&&(t=GC(r,c));const f=[];c.forEach(o=>{const u=x[o];u&&f.push(`grid-${o}-${String(u)}`)});const a={root:["root",e&&"container",M&&"item",l&&"zeroMinWidth",...t,v!=="row"&&`direction-xs-${String(v)}`,n!=="wrap"&&`wrap-xs-${String(n)}`,...f]};return lh(a,DC,P)},YC=_n.forwardRef(function(P,e){const v=If({props:P,name:"MuiGrid"}),{breakpoints:M}=U7(),r=FE(v),{className:n,columns:l,columnSpacing:c,component:t="div",container:f=!1,direction:a="row",item:o=!1,rowSpacing:u,spacing:h=0,wrap:i="wrap",zeroMinWidth:s=!1}=r,p=fs(r,FC),d=u||h,y=c||h,b=_n.useContext(jw),m=f?l||12:b,_={},T=Ta({},p);M.keys.forEach(k=>{p[k]!=null&&(_[k]=p[k],delete T[k])});const g=Ta({},r,{columns:m,container:f,direction:a,item:o,rowSpacing:d,columnSpacing:y,wrap:i,zeroMinWidth:s,spacing:h},_,{breakpoints:M.keys}),A=WC(g);return xs.jsx(jw.Provider,{value:m,children:xs.jsx(jC,Ta({ownerState:g,className:Zs(A.root,n),as:t,ref:e},T))})}),lo=YC,XC=_n.createContext(),r6=XC;function ZC(x){return Rf("MuiTable",x)}Df("MuiTable",["root","stickyHeader"]);const KC=["className","component","padding","size","stickyHeader"],$C=x=>{const{classes:P,stickyHeader:e}=x;return lh({root:["root",e&&"stickyHeader"]},ZC,P)},JC=Pc("table",{name:"MuiTable",slot:"Root",overridesResolver:(x,P)=>{const{ownerState:e}=x;return[P.root,e.stickyHeader&&P.stickyHeader]}})(({theme:x,ownerState:P})=>Ta({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":Ta({},x.typography.body2,{padding:x.spacing(2),color:(x.vars||x).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},P.stickyHeader&&{borderCollapse:"separate"})),Gw="table",QC=_n.forwardRef(function(P,e){const v=If({props:P,name:"MuiTable"}),{className:M,component:r=Gw,padding:n="normal",size:l="medium",stickyHeader:c=!1}=v,t=fs(v,KC),f=Ta({},v,{component:r,padding:n,size:l,stickyHeader:c}),a=$C(f),o=_n.useMemo(()=>({padding:n,size:l,stickyHeader:c}),[n,l,c]);return xs.jsx(r6.Provider,{value:o,children:xs.jsx(JC,Ta({as:r,role:r===Gw?null:"table",ref:e,className:Zs(a.root,M),ownerState:f},t))})}),qC=QC,e9=_n.createContext(),By=e9;function t9(x){return Rf("MuiTableBody",x)}Df("MuiTableBody",["root"]);const r9=["className","component"],n9=x=>{const{classes:P}=x;return lh({root:["root"]},t9,P)},a9=Pc("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(x,P)=>P.root})({display:"table-row-group"}),i9={variant:"body"},Ww="tbody",o9=_n.forwardRef(function(P,e){const v=If({props:P,name:"MuiTableBody"}),{className:M,component:r=Ww}=v,n=fs(v,r9),l=Ta({},v,{component:r}),c=n9(l);return xs.jsx(By.Provider,{value:i9,children:xs.jsx(a9,Ta({className:Zs(c.root,M),as:r,ref:e,role:r===Ww?null:"rowgroup",ownerState:l},n))})}),s9=o9;function l9(x){return Rf("MuiTableCell",x)}const u9=Df("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),c9=u9,f9=["align","className","component","padding","scope","size","sortDirection","variant"],h9=x=>{const{classes:P,variant:e,align:v,padding:M,size:r,stickyHeader:n}=x,l={root:["root",e,n&&"stickyHeader",v!=="inherit"&&`align${Ki(v)}`,M!=="normal"&&`padding${Ki(M)}`,`size${Ki(r)}`]};return lh(l,l9,P)},p9=Pc("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(x,P)=>{const{ownerState:e}=x;return[P.root,P[e.variant],P[`size${Ki(e.size)}`],e.padding!=="normal"&&P[`padding${Ki(e.padding)}`],e.align!=="inherit"&&P[`align${Ki(e.align)}`],e.stickyHeader&&P.stickyHeader]}})(({theme:x,ownerState:P})=>Ta({},x.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:x.vars?`1px solid ${x.vars.palette.TableCell.border}`:`1px solid
    ${x.palette.mode==="light"?qT(Ku(x.palette.divider,1),.88):QT(Ku(x.palette.divider,1),.68)}`,textAlign:"left",padding:16},P.variant==="head"&&{color:(x.vars||x).palette.text.primary,lineHeight:x.typography.pxToRem(24),fontWeight:x.typography.fontWeightMedium},P.variant==="body"&&{color:(x.vars||x).palette.text.primary},P.variant==="footer"&&{color:(x.vars||x).palette.text.secondary,lineHeight:x.typography.pxToRem(21),fontSize:x.typography.pxToRem(12)},P.size==="small"&&{padding:"6px 16px",[`&.${c9.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},P.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},P.padding==="none"&&{padding:0},P.align==="left"&&{textAlign:"left"},P.align==="center"&&{textAlign:"center"},P.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},P.align==="justify"&&{textAlign:"justify"},P.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(x.vars||x).palette.background.default})),d9=_n.forwardRef(function(P,e){const v=If({props:P,name:"MuiTableCell"}),{align:M="inherit",className:r,component:n,padding:l,scope:c,size:t,sortDirection:f,variant:a}=v,o=fs(v,f9),u=_n.useContext(r6),h=_n.useContext(By),i=h&&h.variant==="head";let s;n?s=n:s=i?"th":"td";let p=c;s==="td"?p=void 0:!p&&i&&(p="col");const d=a||h&&h.variant,y=Ta({},v,{align:M,component:s,padding:l||(u&&u.padding?u.padding:"normal"),size:t||(u&&u.size?u.size:"medium"),sortDirection:f,stickyHeader:d==="head"&&u&&u.stickyHeader,variant:d}),b=h9(y);let m=null;return f&&(m=f==="asc"?"ascending":"descending"),xs.jsx(p9,Ta({as:s,ref:e,className:Zs(b.root,r),"aria-sort":m,scope:p,ownerState:y},o))}),r1=d9;function v9(x){return Rf("MuiTableContainer",x)}Df("MuiTableContainer",["root"]);const m9=["className","component"],g9=x=>{const{classes:P}=x;return lh({root:["root"]},v9,P)},y9=Pc("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(x,P)=>P.root})({width:"100%",overflowX:"auto"}),x9=_n.forwardRef(function(P,e){const v=If({props:P,name:"MuiTableContainer"}),{className:M,component:r="div"}=v,n=fs(v,m9),l=Ta({},v,{component:r}),c=g9(l);return xs.jsx(y9,Ta({ref:e,as:r,className:Zs(c.root,M),ownerState:l},n))}),b9=x9;function _9(x){return Rf("MuiTableHead",x)}Df("MuiTableHead",["root"]);const w9=["className","component"],T9=x=>{const{classes:P}=x;return lh({root:["root"]},_9,P)},A9=Pc("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(x,P)=>P.root})({display:"table-header-group"}),k9={variant:"head"},Yw="thead",M9=_n.forwardRef(function(P,e){const v=If({props:P,name:"MuiTableHead"}),{className:M,component:r=Yw}=v,n=fs(v,w9),l=Ta({},v,{component:r}),c=T9(l);return xs.jsx(By.Provider,{value:k9,children:xs.jsx(A9,Ta({as:r,className:Zs(c.root,M),ref:e,role:r===Yw?null:"rowgroup",ownerState:l},n))})}),S9=M9;function E9(x){return Rf("MuiTableRow",x)}const C9=Df("MuiTableRow",["root","selected","hover","head","footer"]),Xw=C9,L9=["className","component","hover","selected"],P9=x=>{const{classes:P,selected:e,hover:v,head:M,footer:r}=x;return lh({root:["root",e&&"selected",v&&"hover",M&&"head",r&&"footer"]},E9,P)},R9=Pc("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(x,P)=>{const{ownerState:e}=x;return[P.root,e.head&&P.head,e.footer&&P.footer]}})(({theme:x})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${Xw.hover}:hover`]:{backgroundColor:(x.vars||x).palette.action.hover},[`&.${Xw.selected}`]:{backgroundColor:x.vars?`rgba(${x.vars.palette.primary.mainChannel} / ${x.vars.palette.action.selectedOpacity})`:Ku(x.palette.primary.main,x.palette.action.selectedOpacity),"&:hover":{backgroundColor:x.vars?`rgba(${x.vars.palette.primary.mainChannel} / calc(${x.vars.palette.action.selectedOpacity} + ${x.vars.palette.action.hoverOpacity}))`:Ku(x.palette.primary.main,x.palette.action.selectedOpacity+x.palette.action.hoverOpacity)}}})),Zw="tr",D9=_n.forwardRef(function(P,e){const v=If({props:P,name:"MuiTableRow"}),{className:M,component:r=Zw,hover:n=!1,selected:l=!1}=v,c=fs(v,L9),t=_n.useContext(By),f=Ta({},v,{component:r,hover:n,selected:l,head:t&&t.variant==="head",footer:t&&t.variant==="footer"}),a=P9(f);return xs.jsx(R9,Ta({as:r,ref:e,className:Zs(a.root,M),role:r===Zw?null:"row",ownerState:f},c))}),Kw=D9;class $w extends bn.Component{constructor(P){super(P),this.columns=P.columns,this.labels=P.labels,this.rows=P.rows}componentDidUpdate(P,e,v){P!==this.props&&(this.columns=this.props.columns,this.labels=this.props.labels,this.rows=this.props.rows,this.forceUpdate())}getLabel(P){return this.labels.hasOwnProperty(P)?this.labels[P]:P}getValue(P,e){return P.hasOwnProperty(e)?P[e]:"NA"}createCell(P,e,v){return e.toString().match(/name/)!==null?bn.createElement(r1,{key:v.toString()+"-"+e.toString(),component:"th",scope:"row"},this.getValue(P,e)):bn.createElement(r1,{key:v.toString()+"-"+e.toString(),align:"right"},this.getValue(P,e))}createRowKey(P,e,v){return P.hasOwnProperty(e)?v.toString()+"-"+P[e]:v.toString()}render(){return bn.createElement(b9,{component:Xs},bn.createElement(qC,{sx:{minWidth:650},"aria-label":"caption table"},bn.createElement(S9,null,bn.createElement(Kw,null,this.columns.map(P=>P.toString().match(/name/)!==null?bn.createElement(r1,{key:P.toString()},this.getLabel(P)):bn.createElement(r1,{align:"right",key:P.toString()},this.getLabel(P))))),bn.createElement(s9,null,this.rows.map((P,e,v)=>bn.createElement(Kw,{key:this.createRowKey(P,this.columns[0],e)},this.columns.map(M=>this.createCell(P,M,e)))))))}}class I9 extends bn.Component{constructor(P){super(P);const[e,v]=_n.useState(0);this.count=e,this.setCount=v,this.state={score:0,userInput:""},this.saveUserInput=this.saveUserInput.bind(this),this.updateScore=this.updateScore.bin(this)}saveUserInput(){this.state.userInput=1,this.updateScore()}updateScore(){this.setCount(P=>P+this.state.userInput)}render(){return bn.createElement("div",{className:"card"},bn.createElement("button",{onClick:this.saveUserInput},"Score is ",this.state.score))}}class n6 extends bn.Component{constructor(P){super(P),this.message="Hello"}handleClick(){}render(){return bn.createElement("button",{type:"button",onClick:this.handleClick},"Click Me (Throws Exception)")}}class z9 extends n6{constructor(P){super(P),this.message="hello",this.handleClick=this.handleClick.bind(this)}render(){return bn.createElement("button",{type:"button",onClick:this.handleClick},"Click Me (Works)")}}var J1={},O9={get exports(){return J1},set exports(x){J1=x}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(x,P){(function(){var e,v="4.17.21",M=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",n="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",t=500,f="__lodash_placeholder__",a=1,o=2,u=4,h=1,i=2,s=1,p=2,d=4,y=8,b=16,m=32,_=64,T=128,g=256,A=512,k=30,R="...",L=800,z=16,E=1,S=2,C=3,D=1/0,F=9007199254740991,N=17976931348623157e292,G=0/0,U=4294967295,X=U-1,I=U>>>1,B=[["ary",T],["bind",s],["bindKey",p],["curry",y],["curryRight",b],["flip",A],["partial",m],["partialRight",_],["rearg",g]],j="[object Arguments]",H="[object Array]",K="[object AsyncFunction]",te="[object Boolean]",J="[object Date]",oe="[object DOMException]",ie="[object Error]",Q="[object Function]",V="[object GeneratorFunction]",se="[object Map]",re="[object Number]",ee="[object Null]",ae="[object Object]",fe="[object Promise]",de="[object Proxy]",pe="[object RegExp]",W="[object Set]",ue="[object String]",me="[object Symbol]",be="[object Undefined]",ke="[object WeakMap]",Pe="[object WeakSet]",je="[object ArrayBuffer]",ze="[object DataView]",Ze="[object Float32Array]",tt="[object Float64Array]",Ce="[object Int8Array]",Ae="[object Int16Array]",Ne="[object Int32Array]",qe="[object Uint8Array]",At="[object Uint8ClampedArray]",kt="[object Uint16Array]",Ve="[object Uint32Array]",ft=/\b__p \+= '';/g,St=/\b(__p \+=) '' \+/g,Wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Qt=/&(?:amp|lt|gt|quot|#39);/g,zt=/[&<>"']/g,$t=RegExp(Qt.source),rr=RegExp(zt.source),Pt=/<%-([\s\S]+?)%>/g,Lt=/<%([\s\S]+?)%>/g,dt=/<%=([\s\S]+?)%>/g,lt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Te=/^\w*$/,Le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Be=/[\\^$.*+?()[\]{}|]/g,et=RegExp(Be.source),Me=/^\s+/,Ie=/\s/,He=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Xe=/\{\n\/\* \[wrapped with (.+)\] \*/,ht=/,? & /,it=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ge=/[()=,{}\[\]\/\s]/,ot=/\\(\\)?/g,Je=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,st=/\w*$/,It=/^[-+]0x[0-9a-f]+$/i,Ft=/^0b[01]+$/i,nr=/^\[object .+?Constructor\]$/,We=/^0o[0-7]+$/i,Fe=/^(?:0|[1-9]\d*)$/,_t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mt=/($^)/,wt=/['\n\r\u2028\u2029\\]/g,Dt="\\ud800-\\udfff",Rt="\\u0300-\\u036f",Bt="\\ufe20-\\ufe2f",Nt="\\u20d0-\\u20ff",er=Rt+Bt+Nt,qt="\\u2700-\\u27bf",Zt="a-z\\xdf-\\xf6\\xf8-\\xff",_r="\\xac\\xb1\\xd7\\xf7",Gr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",zr="\\u2000-\\u206f",Or=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mn="A-Z\\xc0-\\xd6\\xd8-\\xde",Yn="\\ufe0e\\ufe0f",An=_r+Gr+zr+Or,Bn="['’]",jn="["+Dt+"]",Nr="["+An+"]",Lr="["+er+"]",Ln="\\d+",dn="["+qt+"]",xn="["+Zt+"]",tn="[^"+Dt+An+Ln+qt+Zt+Mn+"]",wn="\\ud83c[\\udffb-\\udfff]",Sn="(?:"+Lr+"|"+wn+")",un="[^"+Dt+"]",vt="(?:\\ud83c[\\udde6-\\uddff]){2}",Gt="[\\ud800-\\udbff][\\udc00-\\udfff]",cr="["+Mn+"]",Er="\\u200d",Wr="(?:"+xn+"|"+tn+")",Vr="(?:"+cr+"|"+tn+")",Qr="(?:"+Bn+"(?:d|ll|m|re|s|t|ve))?",Hr="(?:"+Bn+"(?:D|LL|M|RE|S|T|VE))?",Cn=Sn+"?",ra="["+Yn+"]?",ta="(?:"+Er+"(?:"+[un,vt,Gt].join("|")+")"+ra+Cn+")*",ba="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Wa="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ei=ra+Cn+ta,dr="(?:"+[dn,vt,Gt].join("|")+")"+ei,an="(?:"+[un+Lr+"?",Lr,vt,Gt,jn].join("|")+")",Kr=RegExp(Bn,"g"),Rn=RegExp(Lr,"g"),Gn=RegExp(wn+"(?="+wn+")|"+an+ei,"g"),Sa=RegExp([cr+"?"+xn+"+"+Qr+"(?="+[Nr,cr,"$"].join("|")+")",Vr+"+"+Hr+"(?="+[Nr,cr+Wr,"$"].join("|")+")",cr+"?"+Wr+"+"+Qr,cr+"+"+Hr,Wa,ba,Ln,dr].join("|"),"g"),ha=RegExp("["+Er+Dt+er+Yn+"]"),Aa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ka=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Za=-1,Xt={};Xt[Ze]=Xt[tt]=Xt[Ce]=Xt[Ae]=Xt[Ne]=Xt[qe]=Xt[At]=Xt[kt]=Xt[Ve]=!0,Xt[j]=Xt[H]=Xt[je]=Xt[te]=Xt[ze]=Xt[J]=Xt[ie]=Xt[Q]=Xt[se]=Xt[re]=Xt[ae]=Xt[pe]=Xt[W]=Xt[ue]=Xt[ke]=!1;var xr={};xr[j]=xr[H]=xr[je]=xr[ze]=xr[te]=xr[J]=xr[Ze]=xr[tt]=xr[Ce]=xr[Ae]=xr[Ne]=xr[se]=xr[re]=xr[ae]=xr[pe]=xr[W]=xr[ue]=xr[me]=xr[qe]=xr[At]=xr[kt]=xr[Ve]=!0,xr[ie]=xr[Q]=xr[ke]=!1;var Yr={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},cn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},en={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},pn=parseFloat,rn=parseInt,wr=typeof Ys=="object"&&Ys&&Ys.Object===Object&&Ys,Ir=typeof self=="object"&&self&&self.Object===Object&&self,Tr=wr||Ir||Function("return this")(),Fn=P&&!P.nodeType&&P,Vn=Fn&&!0&&x&&!x.nodeType&&x,la=Vn&&Vn.exports===Fn,Ra=la&&wr.process,oa=function(){try{var ct=Vn&&Vn.require&&Vn.require("util").types;return ct||Ra&&Ra.binding&&Ra.binding("util")}catch{}}(),ai=oa&&oa.isArrayBuffer,Ti=oa&&oa.isDate,Ui=oa&&oa.isMap,Qa=oa&&oa.isRegExp,di=oa&&oa.isSet,Ps=oa&&oa.isTypedArray;function rs(ct,yt,Ct){switch(Ct.length){case 0:return ct.call(yt);case 1:return ct.call(yt,Ct[0]);case 2:return ct.call(yt,Ct[0],Ct[1]);case 3:return ct.call(yt,Ct[0],Ct[1],Ct[2])}return ct.apply(yt,Ct)}function Su(ct,yt,Ct,Ut){for(var tr=-1,ar=ct==null?0:ct.length;++tr<ar;){var fr=ct[tr];yt(Ut,fr,Ct(fr),ct)}return Ut}function Rs(ct,yt){for(var Ct=-1,Ut=ct==null?0:ct.length;++Ct<Ut&&yt(ct[Ct],Ct,ct)!==!1;);return ct}function ec(ct,yt){for(var Ct=ct==null?0:ct.length;Ct--&&yt(ct[Ct],Ct,ct)!==!1;);return ct}function Eu(ct,yt){for(var Ct=-1,Ut=ct==null?0:ct.length;++Ct<Ut;)if(!yt(ct[Ct],Ct,ct))return!1;return!0}function hu(ct,yt){for(var Ct=-1,Ut=ct==null?0:ct.length,tr=0,ar=[];++Ct<Ut;){var fr=ct[Ct];yt(fr,Ct,ct)&&(ar[tr++]=fr)}return ar}function Rc(ct,yt){var Ct=ct==null?0:ct.length;return!!Ct&&ml(ct,yt,0)>-1}function Vu(ct,yt,Ct){for(var Ut=-1,tr=ct==null?0:ct.length;++Ut<tr;)if(Ct(yt,ct[Ut]))return!0;return!1}function Co(ct,yt){for(var Ct=-1,Ut=ct==null?0:ct.length,tr=Array(Ut);++Ct<Ut;)tr[Ct]=yt(ct[Ct],Ct,ct);return tr}function ul(ct,yt){for(var Ct=-1,Ut=yt.length,tr=ct.length;++Ct<Ut;)ct[tr+Ct]=yt[Ct];return ct}function yo(ct,yt,Ct,Ut){var tr=-1,ar=ct==null?0:ct.length;for(Ut&&ar&&(Ct=ct[++tr]);++tr<ar;)Ct=yt(Ct,ct[tr],tr,ct);return Ct}function uh(ct,yt,Ct,Ut){var tr=ct==null?0:ct.length;for(Ut&&tr&&(Ct=ct[--tr]);tr--;)Ct=yt(Ct,ct[tr],tr,ct);return Ct}function pu(ct,yt){for(var Ct=-1,Ut=ct==null?0:ct.length;++Ct<Ut;)if(yt(ct[Ct],Ct,ct))return!0;return!1}var zf=ql("length");function du(ct){return ct.split("")}function Ql(ct){return ct.match(it)||[]}function Cu(ct,yt,Ct){var Ut;return Ct(ct,function(tr,ar,fr){if(yt(tr,ar,fr))return Ut=ar,!1}),Ut}function Lu(ct,yt,Ct,Ut){for(var tr=ct.length,ar=Ct+(Ut?1:-1);Ut?ar--:++ar<tr;)if(yt(ct[ar],ar,ct))return ar;return-1}function ml(ct,yt,Ct){return yt===yt?_s(ct,yt,Ct):Lu(ct,Hu,Ct)}function cl(ct,yt,Ct,Ut){for(var tr=Ct-1,ar=ct.length;++tr<ar;)if(Ut(ct[tr],yt))return tr;return-1}function Hu(ct){return ct!==ct}function Pu(ct,yt){var Ct=ct==null?0:ct.length;return Ct?eo(ct,yt)/Ct:G}function ql(ct){return function(yt){return yt==null?e:yt[ct]}}function yl(ct){return function(yt){return ct==null?e:ct[yt]}}function pc(ct,yt,Ct,Ut,tr){return tr(ct,function(ar,fr,vr){Ct=Ut?(Ut=!1,ar):yt(Ct,ar,fr,vr)}),Ct}function tc(ct,yt){var Ct=ct.length;for(ct.sort(yt);Ct--;)ct[Ct]=ct[Ct].value;return ct}function eo(ct,yt){for(var Ct,Ut=-1,tr=ct.length;++Ut<tr;){var ar=yt(ct[Ut]);ar!==e&&(Ct=Ct===e?ar:Ct+ar)}return Ct}function $s(ct,yt){for(var Ct=-1,Ut=Array(ct);++Ct<ct;)Ut[Ct]=yt(Ct);return Ut}function qc(ct,yt){return Co(yt,function(Ct){return[Ct,ct[Ct]]})}function vu(ct){return ct&&ct.slice(0,tf(ct)+1).replace(Me,"")}function Ds(ct){return function(yt){return ct(yt)}}function mu(ct,yt){return Co(yt,function(Ct){return ct[Ct]})}function Rl(ct,yt){return ct.has(yt)}function xl(ct,yt){for(var Ct=-1,Ut=ct.length;++Ct<Ut&&ml(yt,ct[Ct],0)>-1;);return Ct}function Dl(ct,yt){for(var Ct=ct.length;Ct--&&ml(yt,ct[Ct],0)>-1;);return Ct}function fl(ct,yt){for(var Ct=ct.length,Ut=0;Ct--;)ct[Ct]===yt&&++Ut;return Ut}var hl=yl(Yr),eu=yl(cn);function As(ct){return"\\"+nn[ct]}function Ru(ct,yt){return ct==null?e:ct[yt]}function ps(ct){return ha.test(ct)}function pl(ct){return Aa.test(ct)}function Du(ct){for(var yt,Ct=[];!(yt=ct.next()).done;)Ct.push(yt.value);return Ct}function ns(ct){var yt=-1,Ct=Array(ct.size);return ct.forEach(function(Ut,tr){Ct[++yt]=[tr,Ut]}),Ct}function ef(ct,yt){return function(Ct){return ct(yt(Ct))}}function bl(ct,yt){for(var Ct=-1,Ut=ct.length,tr=0,ar=[];++Ct<Ut;){var fr=ct[Ct];(fr===yt||fr===f)&&(ct[Ct]=f,ar[tr++]=Ct)}return ar}function gu(ct){var yt=-1,Ct=Array(ct.size);return ct.forEach(function(Ut){Ct[++yt]=Ut}),Ct}function yu(ct){var yt=-1,Ct=Array(ct.size);return ct.forEach(function(Ut){Ct[++yt]=[Ut,Ut]}),Ct}function _s(ct,yt,Ct){for(var Ut=Ct-1,tr=ct.length;++Ut<tr;)if(ct[Ut]===yt)return Ut;return-1}function dc(ct,yt,Ct){for(var Ut=Ct+1;Ut--;)if(ct[Ut]===yt)return Ut;return Ut}function tu(ct){return ps(ct)?rc(ct):zf(ct)}function ds(ct){return ps(ct)?Dc(ct):du(ct)}function tf(ct){for(var yt=ct.length;yt--&&Ie.test(ct.charAt(yt)););return yt}var Of=yl(en);function rc(ct){for(var yt=Gn.lastIndex=0;Gn.test(ct);)++yt;return yt}function Dc(ct){return ct.match(Gn)||[]}function at(ct){return ct.match(Sa)||[]}var Qe=function ct(yt){yt=yt==null?Tr:gt.defaults(Tr.Object(),yt,gt.pick(Tr,ka));var Ct=yt.Array,Ut=yt.Date,tr=yt.Error,ar=yt.Function,fr=yt.Math,vr=yt.Object,Fr=yt.RegExp,qr=yt.String,$r=yt.TypeError,Nn=Ct.prototype,ia=ar.prototype,Pn=vr.prototype,Wn=yt["__core-js_shared__"],aa=ia.toString,Un=Pn.hasOwnProperty,Jn=0,Ia=function(){var le=/[^.]+$/.exec(Wn&&Wn.keys&&Wn.keys.IE_PROTO||"");return le?"Symbol(src)_1."+le:""}(),ti=Pn.toString,ya=aa.call(vr),Xa=Tr._,na=Fr("^"+aa.call(Un).replace(Be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_i=la?yt.Buffer:e,_a=yt.Symbol,Fa=yt.Uint8Array,ki=_i?_i.allocUnsafe:e,vi=ef(vr.getPrototypeOf,vr),xi=vr.create,Zn=Pn.propertyIsEnumerable,wi=Nn.splice,Bi=_a?_a.isConcatSpreadable:e,li=_a?_a.iterator:e,Ca=_a?_a.toStringTag:e,to=function(){try{var le=Uc(vr,"defineProperty");return le({},"",{}),le}catch{}}(),ro=yt.clearTimeout!==Tr.clearTimeout&&yt.clearTimeout,Lo=Ut&&Ut.now!==Tr.Date.now&&Ut.now,Oo=yt.setTimeout!==Tr.setTimeout&&yt.setTimeout,Ji=fr.ceil,Zi=fr.floor,_o=vr.getOwnPropertySymbols,as=_i?_i.isBuffer:e,vs=yt.isFinite,Js=Nn.join,xo=ef(vr.keys,vr),ni=fr.max,ui=fr.min,Po=Ut.now,no=yt.parseInt,Ao=fr.random,Qo=Nn.reverse,Gi=Uc(yt,"DataView"),Ya=Uc(yt,"Map"),is=Uc(yt,"Promise"),Ea=Uc(yt,"Set"),Ga=Uc(yt,"WeakMap"),Li=Uc(vr,"create"),Mi=Ga&&new Ga,Qn={},za=vf(Gi),Si=vf(Ya),Vi=vf(is),uo=vf(Ea),Ei=vf(Ga),Qi=_a?_a.prototype:e,qo=Qi?Qi.valueOf:e,ks=Qi?Qi.toString:e;function or(le){if(Ls(le)&&!Ni(le)&&!(le instanceof mi)){if(le instanceof Di)return le;if(Un.call(le,"__wrapped__"))return ep(le)}return new Di(le)}var Fo=function(){function le(){}return function(ge){if(!us(ge))return{};if(xi)return xi(ge);le.prototype=ge;var Ue=new le;return le.prototype=e,Ue}}();function fo(){}function Di(le,ge){this.__wrapped__=le,this.__actions__=[],this.__chain__=!!ge,this.__index__=0,this.__values__=e}or.templateSettings={escape:Pt,evaluate:Lt,interpolate:dt,variable:"",imports:{_:or}},or.prototype=fo.prototype,or.prototype.constructor=or,Di.prototype=Fo(fo.prototype),Di.prototype.constructor=Di;function mi(le){this.__wrapped__=le,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function Is(){var le=new mi(this.__wrapped__);return le.__actions__=Gl(this.__actions__),le.__dir__=this.__dir__,le.__filtered__=this.__filtered__,le.__iteratees__=Gl(this.__iteratees__),le.__takeCount__=this.__takeCount__,le.__views__=Gl(this.__views__),le}function _l(){if(this.__filtered__){var le=new mi(this);le.__dir__=-1,le.__filtered__=!0}else le=this.clone(),le.__dir__*=-1;return le}function dl(){var le=this.__wrapped__.value(),ge=this.__dir__,Ue=Ni(le),xt=ge<0,Kt=Ue?le.length:0,gr=Wu(0,Kt,this.__views__),Xr=gr.start,on=gr.end,Tn=on-Xr,va=xt?on:Xr-1,ga=this.__iteratees__,Ma=ga.length,Ja=0,Ai=ui(Tn,this.__takeCount__);if(!Ue||!xt&&Kt==Tn&&Ai==Tn)return hh(le,this.__actions__);var Hi=[];e:for(;Tn--&&Ja<Ai;){va+=ge;for(var go=-1,ji=le[va];++go<Ma;){var Mo=ga[go],zo=Mo.iteratee,Wc=Mo.type,cc=zo(ji);if(Wc==S)ji=cc;else if(!cc){if(Wc==E)continue e;break e}}Hi[Ja++]=ji}return Hi}mi.prototype=Fo(fo.prototype),mi.prototype.constructor=mi;function No(le){var ge=-1,Ue=le==null?0:le.length;for(this.clear();++ge<Ue;){var xt=le[ge];this.set(xt[0],xt[1])}}function wl(){this.__data__=Li?Li(null):{},this.size=0}function Qs(le){var ge=this.has(le)&&delete this.__data__[le];return this.size-=ge?1:0,ge}function Vo(le){var ge=this.__data__;if(Li){var Ue=ge[le];return Ue===c?e:Ue}return Un.call(ge,le)?ge[le]:e}function Tl(le){var ge=this.__data__;return Li?ge[le]!==e:Un.call(ge,le)}function Hl(le,ge){var Ue=this.__data__;return this.size+=this.has(le)?0:1,Ue[le]=Li&&ge===e?c:ge,this}No.prototype.clear=wl,No.prototype.delete=Qs,No.prototype.get=Vo,No.prototype.has=Tl,No.prototype.set=Hl;function So(le){var ge=-1,Ue=le==null?0:le.length;for(this.clear();++ge<Ue;){var xt=le[ge];this.set(xt[0],xt[1])}}function ms(){this.__data__=[],this.size=0}function zs(le){var ge=this.__data__,Ue=zn(ge,le);if(Ue<0)return!1;var xt=ge.length-1;return Ue==xt?ge.pop():wi.call(ge,Ue,1),--this.size,!0}function vl(le){var ge=this.__data__,Ue=zn(ge,le);return Ue<0?e:ge[Ue][1]}function Ro(le){return zn(this.__data__,le)>-1}function Xi(le,ge){var Ue=this.__data__,xt=zn(Ue,le);return xt<0?(++this.size,Ue.push([le,ge])):Ue[xt][1]=ge,this}So.prototype.clear=ms,So.prototype.delete=zs,So.prototype.get=vl,So.prototype.has=Ro,So.prototype.set=Xi;function wo(le){var ge=-1,Ue=le==null?0:le.length;for(this.clear();++ge<Ue;){var xt=le[ge];this.set(xt[0],xt[1])}}function $(){this.size=0,this.__data__={hash:new No,map:new(Ya||So),string:new No}}function ne(le){var ge=Bc(this,le).delete(le);return this.size-=ge?1:0,ge}function q(le){return Bc(this,le).get(le)}function ve(le){return Bc(this,le).has(le)}function Se(le,ge){var Ue=Bc(this,le),xt=Ue.size;return Ue.set(le,ge),this.size+=Ue.size==xt?0:1,this}wo.prototype.clear=$,wo.prototype.delete=ne,wo.prototype.get=q,wo.prototype.has=ve,wo.prototype.set=Se;function Oe(le){var ge=-1,Ue=le==null?0:le.length;for(this.__data__=new wo;++ge<Ue;)this.add(le[ge])}function Ye(le){return this.__data__.set(le,c),this}function ut(le){return this.__data__.has(le)}Oe.prototype.add=Oe.prototype.push=Ye,Oe.prototype.has=ut;function bt(le){var ge=this.__data__=new So(le);this.size=ge.size}function jt(){this.__data__=new So,this.size=0}function sr(le){var ge=this.__data__,Ue=ge.delete(le);return this.size=ge.size,Ue}function pr(le){return this.__data__.get(le)}function br(le){return this.__data__.has(le)}function Cr(le,ge){var Ue=this.__data__;if(Ue instanceof So){var xt=Ue.__data__;if(!Ya||xt.length<M-1)return xt.push([le,ge]),this.size=++Ue.size,this;Ue=this.__data__=new wo(xt)}return Ue.set(le,ge),this.size=Ue.size,this}bt.prototype.clear=jt,bt.prototype.delete=sr,bt.prototype.get=pr,bt.prototype.has=br,bt.prototype.set=Cr;function Pr(le,ge){var Ue=Ni(le),xt=!Ue&&jo(le),Kt=!Ue&&!xt&&Tu(le),gr=!Ue&&!xt&&!Kt&&jc(le),Xr=Ue||xt||Kt||gr,on=Xr?$s(le.length,qr):[],Tn=on.length;for(var va in le)(ge||Un.call(le,va))&&!(Xr&&(va=="length"||Kt&&(va=="offset"||va=="parent")||gr&&(va=="buffer"||va=="byteLength"||va=="byteOffset")||Vc(va,Tn)))&&on.push(va);return on}function jr(le){var ge=le.length;return ge?le[Uh(0,ge-1)]:e}function Mr(le,ge){return wh(Gl(le),wa(ge,0,le.length))}function Ur(le){return wh(Gl(le))}function Jr(le,ge,Ue){(Ue!==e&&!ko(le[ge],Ue)||Ue===e&&!(ge in le))&&pa(le,ge,Ue)}function fn(le,ge,Ue){var xt=le[ge];(!(Un.call(le,ge)&&ko(xt,Ue))||Ue===e&&!(ge in le))&&pa(le,ge,Ue)}function zn(le,ge){for(var Ue=le.length;Ue--;)if(ko(le[Ue][0],ge))return Ue;return-1}function kn(le,ge,Ue,xt){return fi(le,function(Kt,gr,Xr){ge(xt,Kt,Ue(Kt),Xr)}),xt}function Dn(le,ge){return le&&Ol(ge,Gs(ge),le)}function qn(le,ge){return le&&Ol(ge,Bl(ge),le)}function pa(le,ge,Ue){ge=="__proto__"&&to?to(le,ge,{configurable:!0,enumerable:!0,value:Ue,writable:!0}):le[ge]=Ue}function ua(le,ge){for(var Ue=-1,xt=ge.length,Kt=Ct(xt),gr=le==null;++Ue<xt;)Kt[Ue]=gr?e:zv(le,ge[Ue]);return Kt}function wa(le,ge,Ue){return le===le&&(Ue!==e&&(le=le<=Ue?le:Ue),ge!==e&&(le=le>=ge?le:ge)),le}function Da(le,ge,Ue,xt,Kt,gr){var Xr,on=ge&a,Tn=ge&o,va=ge&u;if(Ue&&(Xr=Kt?Ue(le,xt,Kt,gr):Ue(le)),Xr!==e)return Xr;if(!us(le))return le;var ga=Ni(le);if(ga){if(Xr=cf(le),!on)return Gl(le,Xr)}else{var Ma=Wl(le),Ja=Ma==Q||Ma==V;if(Tu(le))return vd(le,on);if(Ma==ae||Ma==j||Ja&&!Kt){if(Xr=Tn||Ja?{}:Zf(le),!on)return Tn?dh(le,qn(Xr,le)):cv(le,Dn(Xr,le))}else{if(!xr[Ma])return Kt?le:{};Xr=ff(le,Ma,on)}}gr||(gr=new bt);var Ai=gr.get(le);if(Ai)return Ai;gr.set(le,Xr),Op(le)?le.forEach(function(ji){Xr.add(Da(ji,ge,Ue,ji,le,gr))}):Sd(le)&&le.forEach(function(ji,Mo){Xr.set(Mo,Da(ji,ge,Ue,Mo,le,gr))});var Hi=va?Tn?Ap:Kh:Tn?Bl:Gs,go=ga?e:Hi(le);return Rs(go||le,function(ji,Mo){go&&(Mo=ji,ji=le[Mo]),fn(Xr,Mo,Da(ji,ge,Ue,Mo,le,gr))}),Xr}function oi(le){var ge=Gs(le);return function(Ue){return qa(Ue,le,ge)}}function qa(le,ge,Ue){var xt=Ue.length;if(le==null)return!xt;for(le=vr(le);xt--;){var Kt=Ue[xt],gr=ge[Kt],Xr=le[Kt];if(Xr===e&&!(Kt in le)||!gr(Xr))return!1}return!0}function Fi(le,ge,Ue){if(typeof le!="function")throw new $r(n);return pf(function(){le.apply(e,Ue)},ge)}function Ua(le,ge,Ue,xt){var Kt=-1,gr=Rc,Xr=!0,on=le.length,Tn=[],va=ge.length;if(!on)return Tn;Ue&&(ge=Co(ge,Ds(Ue))),xt?(gr=Vu,Xr=!1):ge.length>=M&&(gr=Rl,Xr=!1,ge=new Oe(ge));e:for(;++Kt<on;){var ga=le[Kt],Ma=Ue==null?ga:Ue(ga);if(ga=xt||ga!==0?ga:0,Xr&&Ma===Ma){for(var Ja=va;Ja--;)if(ge[Ja]===Ma)continue e;Tn.push(ga)}else gr(ge,Ma,xt)||Tn.push(ga)}return Tn}var fi=fv(bo),Ii=fv(ho,!0);function hi(le,ge){var Ue=!0;return fi(le,function(xt,Kt,gr){return Ue=!!ge(xt,Kt,gr),Ue}),Ue}function ii(le,ge,Ue){for(var xt=-1,Kt=le.length;++xt<Kt;){var gr=le[xt],Xr=ge(gr);if(Xr!=null&&(on===e?Xr===Xr&&!uu(Xr):Ue(Xr,on)))var on=Xr,Tn=gr}return Tn}function zi(le,ge,Ue,xt){var Kt=le.length;for(Ue=ci(Ue),Ue<0&&(Ue=-Ue>Kt?0:Kt+Ue),xt=xt===e||xt>Kt?Kt:ci(xt),xt<0&&(xt+=Kt),xt=Ue>xt?0:Tc(xt);Ue<xt;)le[Ue++]=ge;return le}function si(le,ge){var Ue=[];return fi(le,function(xt,Kt,gr){ge(xt,Kt,gr)&&Ue.push(xt)}),Ue}function Na(le,ge,Ue,xt,Kt){var gr=-1,Xr=le.length;for(Ue||(Ue=N0),Kt||(Kt=[]);++gr<Xr;){var on=le[gr];ge>0&&Ue(on)?ge>1?Na(on,ge-1,Ue,xt,Kt):ul(Kt,on):xt||(Kt[Kt.length]=on)}return Kt}var os=Gh(),Bo=Gh(!0);function bo(le,ge){return le&&os(le,ge,Gs)}function ho(le,ge){return le&&Bo(le,ge,Gs)}function es(le,ge){return hu(ge,function(Ue){return lc(le[Ue])})}function To(le,ge){ge=bc(ge,le);for(var Ue=0,xt=ge.length;le!=null&&Ue<xt;)le=le[oc(ge[Ue++])];return Ue&&Ue==xt?le:e}function xu(le,ge,Ue){var xt=ge(le);return Ni(le)?xt:ul(xt,Ue(le))}function Ms(le){return le==null?le===e?be:ee:Ca&&Ca in vr(le)?yv(le):wd(le)}function ru(le,ge){return le>ge}function Al(le,ge){return le!=null&&Un.call(le,ge)}function nu(le,ge){return le!=null&&ge in vr(le)}function Iu(le,ge,Ue){return le>=ui(ge,Ue)&&le<ni(ge,Ue)}function vc(le,ge,Ue){for(var xt=Ue?Vu:Rc,Kt=le[0].length,gr=le.length,Xr=gr,on=Ct(gr),Tn=1/0,va=[];Xr--;){var ga=le[Xr];Xr&&ge&&(ga=Co(ga,Ds(ge))),Tn=ui(ga.length,Tn),on[Xr]=!Ue&&(ge||Kt>=120&&ga.length>=120)?new Oe(Xr&&ga):e}ga=le[0];var Ma=-1,Ja=on[0];e:for(;++Ma<Kt&&va.length<Tn;){var Ai=ga[Ma],Hi=ge?ge(Ai):Ai;if(Ai=Ue||Ai!==0?Ai:0,!(Ja?Rl(Ja,Hi):xt(va,Hi,Ue))){for(Xr=gr;--Xr;){var go=on[Xr];if(!(go?Rl(go,Hi):xt(le[Xr],Hi,Ue)))continue e}Ja&&Ja.push(Hi),va.push(Ai)}}return va}function mc(le,ge,Ue,xt){return bo(le,function(Kt,gr,Xr){ge(xt,Ue(Kt),gr,Xr)}),xt}function Il(le,ge,Ue){ge=bc(ge,le),le=Cs(le,ge);var xt=le==null?le:le[oc(Tt(ge))];return xt==null?e:rs(xt,le,Ue)}function zu(le){return Ls(le)&&Ms(le)==j}function Ff(le){return Ls(le)&&Ms(le)==je}function gc(le){return Ls(le)&&Ms(le)==J}function au(le,ge,Ue,xt,Kt){return le===ge?!0:le==null||ge==null||!Ls(le)&&!Ls(ge)?le!==le&&ge!==ge:Ss(le,ge,Ue,xt,au,Kt)}function Ss(le,ge,Ue,xt,Kt,gr){var Xr=Ni(le),on=Ni(ge),Tn=Xr?H:Wl(le),va=on?H:Wl(ge);Tn=Tn==j?ae:Tn,va=va==j?ae:va;var ga=Tn==ae,Ma=va==ae,Ja=Tn==va;if(Ja&&Tu(le)){if(!Tu(ge))return!1;Xr=!0,ga=!1}if(Ja&&!ga)return gr||(gr=new bt),Xr||jc(le)?gh(le,ge,Ue,xt,Kt,gr):gv(le,ge,Tn,Ue,xt,Kt,gr);if(!(Ue&h)){var Ai=ga&&Un.call(le,"__wrapped__"),Hi=Ma&&Un.call(ge,"__wrapped__");if(Ai||Hi){var go=Ai?le.value():le,ji=Hi?ge.value():ge;return gr||(gr=new bt),Kt(go,ji,Ue,xt,gr)}}return Ja?(gr||(gr=new bt),xd(le,ge,Ue,xt,Kt,gr)):!1}function rf(le){return Ls(le)&&Wl(le)==se}function nf(le,ge,Ue,xt){var Kt=Ue.length,gr=Kt,Xr=!xt;if(le==null)return!gr;for(le=vr(le);Kt--;){var on=Ue[Kt];if(Xr&&on[2]?on[1]!==le[on[0]]:!(on[0]in le))return!1}for(;++Kt<gr;){on=Ue[Kt];var Tn=on[0],va=le[Tn],ga=on[1];if(Xr&&on[2]){if(va===e&&!(Tn in le))return!1}else{var Ma=new bt;if(xt)var Ja=xt(va,ga,Tn,le,ge,Ma);if(!(Ja===e?au(ga,va,h|i,xt,Ma):Ja))return!1}}return!0}function ws(le){if(!us(le)||Jh(le))return!1;var ge=lc(le)?na:nr;return ge.test(vf(le))}function yc(le){return Ls(le)&&Ms(le)==pe}function ss(le){return Ls(le)&&Wl(le)==W}function jl(le){return Ls(le)&&Hc(le.length)&&!!Xt[Ms(le)]}function zl(le){return typeof le=="function"?le:le==null?kc:typeof le=="object"?Ni(le)?Bh(le[0],le[1]):Ic(le):G_(le)}function nc(le){if(!_c(le))return xo(le);var ge=[];for(var Ue in vr(le))Un.call(le,Ue)&&Ue!="constructor"&&ge.push(Ue);return ge}function fd(le){if(!us(le))return Qh(le);var ge=_c(le),Ue=[];for(var xt in le)xt=="constructor"&&(ge||!Un.call(le,xt))||Ue.push(xt);return Ue}function Nf(le,ge){return le<ge}function Nh(le,ge){var Ue=-1,xt=Nl(le)?Ct(le.length):[];return fi(le,function(Kt,gr,Xr){xt[++Ue]=ge(Kt,gr,Xr)}),xt}function Ic(le){var ge=Xf(le);return ge.length==1&&ge[0][2]?yh(ge[0][0],ge[0][1]):function(Ue){return Ue===le||nf(Ue,le,ge)}}function Bh(le,ge){return $h(le)&&el(ge)?yh(oc(le),ge):function(Ue){var xt=zv(Ue,le);return xt===e&&xt===ge?G0(Ue,le):au(ge,xt,h|i)}}function iu(le,ge,Ue,xt,Kt){le!==ge&&os(ge,function(gr,Xr){if(Kt||(Kt=new bt),us(gr))ou(le,ge,Xr,Ue,iu,xt,Kt);else{var on=xt?xt(ic(le,Xr),gr,Xr+"",le,ge,Kt):e;on===e&&(on=gr),Jr(le,Xr,on)}},Bl)}function ou(le,ge,Ue,xt,Kt,gr,Xr){var on=ic(le,Ue),Tn=ic(ge,Ue),va=Xr.get(Tn);if(va){Jr(le,Ue,va);return}var ga=gr?gr(on,Tn,Ue+"",le,ge,Xr):e,Ma=ga===e;if(Ma){var Ja=Ni(Tn),Ai=!Ja&&Tu(Tn),Hi=!Ja&&!Ai&&jc(Tn);ga=Tn,Ja||Ai||Hi?Ni(on)?ga=on:ys(on)?ga=Gl(on):Ai?(Ma=!1,ga=vd(Tn,!0)):Hi?(Ma=!1,ga=ju(Tn,!0)):ga=[]:yf(Tn)||jo(Tn)?(ga=on,jo(on)?ga=th(on):(!us(on)||lc(on))&&(ga=Zf(Tn))):Ma=!1}Ma&&(Xr.set(Tn,ga),Kt(ga,Tn,xt,gr,Xr),Xr.delete(Tn)),Jr(le,Ue,ga)}function ls(le,ge){var Ue=le.length;if(Ue)return ge+=ge<0?Ue:0,Vc(ge,Ue)?le[ge]:e}function nv(le,ge,Ue){ge.length?ge=Co(ge,function(gr){return Ni(gr)?function(Xr){return To(Xr,gr.length===1?gr[0]:gr)}:gr}):ge=[kc];var xt=-1;ge=Co(ge,Ds(bi()));var Kt=Nh(le,function(gr,Xr,on){var Tn=Co(ge,function(va){return va(gr)});return{criteria:Tn,index:++xt,value:gr}});return tc(Kt,function(gr,Xr){return lv(gr,Xr,Ue)})}function av(le,ge){return iv(le,ge,function(Ue,xt){return G0(le,xt)})}function iv(le,ge,Ue){for(var xt=-1,Kt=ge.length,gr={};++xt<Kt;){var Xr=ge[xt],on=To(le,Xr);Ue(on,Xr)&&Vh(gr,bc(Xr,le),on)}return gr}function D0(le){return function(ge){return To(ge,le)}}function mp(le,ge,Ue,xt){var Kt=xt?cl:ml,gr=-1,Xr=ge.length,on=le;for(le===ge&&(ge=Gl(ge)),Ue&&(on=Co(le,Ds(Ue)));++gr<Xr;)for(var Tn=0,va=ge[gr],ga=Ue?Ue(va):va;(Tn=Kt(on,ga,Tn,xt))>-1;)on!==le&&wi.call(on,Tn,1),wi.call(le,Tn,1);return le}function hd(le,ge){for(var Ue=le?ge.length:0,xt=Ue-1;Ue--;){var Kt=ge[Ue];if(Ue==xt||Kt!==gr){var gr=Kt;Vc(Kt)?wi.call(le,Kt,1):fh(le,Kt)}}return le}function Uh(le,ge){return le+Zi(Ao()*(ge-le+1))}function I0(le,ge,Ue,xt){for(var Kt=-1,gr=ni(Ji((ge-le)/(Ue||1)),0),Xr=Ct(gr);gr--;)Xr[xt?gr:++Kt]=le,le+=Ue;return Xr}function ch(le,ge){var Ue="";if(!le||ge<1||ge>F)return Ue;do ge%2&&(Ue+=le),ge=Zi(ge/2),ge&&(le+=le);while(ge);return Ue}function ao(le,ge){return df(xh(le,ge,kc),le+"")}function xc(le){return jr(wf(le))}function Bf(le,ge){var Ue=wf(le);return wh(Ue,wa(ge,0,Ue.length))}function Vh(le,ge,Ue,xt){if(!us(le))return le;ge=bc(ge,le);for(var Kt=-1,gr=ge.length,Xr=gr-1,on=le;on!=null&&++Kt<gr;){var Tn=oc(ge[Kt]),va=Ue;if(Tn==="__proto__"||Tn==="constructor"||Tn==="prototype")return le;if(Kt!=Xr){var ga=on[Tn];va=xt?xt(ga,Tn,on):e,va===e&&(va=us(ga)?ga:Vc(ge[Kt+1])?[]:{})}fn(on,Tn,va),on=on[Tn]}return le}var ov=Mi?function(le,ge){return Mi.set(le,ge),le}:kc,z0=to?function(le,ge){return to(le,"toString",{configurable:!0,enumerable:!1,value:qy(ge),writable:!0})}:kc;function O0(le){return wh(wf(le))}function Ou(le,ge,Ue){var xt=-1,Kt=le.length;ge<0&&(ge=-ge>Kt?0:Kt+ge),Ue=Ue>Kt?Kt:Ue,Ue<0&&(Ue+=Kt),Kt=ge>Ue?0:Ue-ge>>>0,ge>>>=0;for(var gr=Ct(Kt);++xt<Kt;)gr[xt]=le[xt+ge];return gr}function F0(le,ge){var Ue;return fi(le,function(xt,Kt,gr){return Ue=ge(xt,Kt,gr),!Ue}),!!Ue}function gp(le,ge,Ue){var xt=0,Kt=le==null?xt:le.length;if(typeof ge=="number"&&ge===ge&&Kt<=I){for(;xt<Kt;){var gr=xt+Kt>>>1,Xr=le[gr];Xr!==null&&!uu(Xr)&&(Ue?Xr<=ge:Xr<ge)?xt=gr+1:Kt=gr}return Kt}return Uf(le,ge,kc,Ue)}function Uf(le,ge,Ue,xt){var Kt=0,gr=le==null?0:le.length;if(gr===0)return 0;ge=Ue(ge);for(var Xr=ge!==ge,on=ge===null,Tn=uu(ge),va=ge===e;Kt<gr;){var ga=Zi((Kt+gr)/2),Ma=Ue(le[ga]),Ja=Ma!==e,Ai=Ma===null,Hi=Ma===Ma,go=uu(Ma);if(Xr)var ji=xt||Hi;else va?ji=Hi&&(xt||Ja):on?ji=Hi&&Ja&&(xt||!Ai):Tn?ji=Hi&&Ja&&!Ai&&(xt||!go):Ai||go?ji=!1:ji=xt?Ma<=ge:Ma<ge;ji?Kt=ga+1:gr=ga}return ui(gr,X)}function pd(le,ge){for(var Ue=-1,xt=le.length,Kt=0,gr=[];++Ue<xt;){var Xr=le[Ue],on=ge?ge(Xr):Xr;if(!Ue||!ko(on,Tn)){var Tn=on;gr[Kt++]=Xr===0?0:Xr}}return gr}function af(le){return typeof le=="number"?le:uu(le)?G:+le}function bu(le){if(typeof le=="string")return le;if(Ni(le))return Co(le,bu)+"";if(uu(le))return ks?ks.call(le):"";var ge=le+"";return ge=="0"&&1/le==-D?"-0":ge}function Uo(le,ge,Ue){var xt=-1,Kt=Rc,gr=le.length,Xr=!0,on=[],Tn=on;if(Ue)Xr=!1,Kt=Vu;else if(gr>=M){var va=ge?null:dv(le);if(va)return gu(va);Xr=!1,Kt=Rl,Tn=new Oe}else Tn=ge?[]:on;e:for(;++xt<gr;){var ga=le[xt],Ma=ge?ge(ga):ga;if(ga=Ue||ga!==0?ga:0,Xr&&Ma===Ma){for(var Ja=Tn.length;Ja--;)if(Tn[Ja]===Ma)continue e;ge&&Tn.push(Ma),on.push(ga)}else Kt(Tn,Ma,Ue)||(Tn!==on&&Tn.push(Ma),on.push(ga))}return on}function fh(le,ge){return ge=bc(ge,le),le=Cs(le,ge),le==null||delete le[oc(Tt(ge))]}function yp(le,ge,Ue,xt){return Vh(le,ge,Ue(To(le,ge)),xt)}function of(le,ge,Ue,xt){for(var Kt=le.length,gr=xt?Kt:-1;(xt?gr--:++gr<Kt)&&ge(le[gr],gr,le););return Ue?Ou(le,xt?0:gr,xt?gr+1:Kt):Ou(le,xt?gr+1:0,xt?Kt:gr)}function hh(le,ge){var Ue=le;return Ue instanceof mi&&(Ue=Ue.value()),yo(ge,function(xt,Kt){return Kt.func.apply(Kt.thisArg,ul([xt],Kt.args))},Ue)}function zc(le,ge,Ue){var xt=le.length;if(xt<2)return xt?Uo(le[0]):[];for(var Kt=-1,gr=Ct(xt);++Kt<xt;)for(var Xr=le[Kt],on=-1;++on<xt;)on!=Kt&&(gr[Kt]=Ua(gr[Kt]||Xr,le[on],ge,Ue));return Uo(Na(gr,1),ge,Ue)}function Hh(le,ge,Ue){for(var xt=-1,Kt=le.length,gr=ge.length,Xr={};++xt<Kt;){var on=xt<gr?ge[xt]:e;Ue(Xr,le[xt],on)}return Xr}function xp(le){return ys(le)?le:[]}function Vf(le){return typeof le=="function"?le:kc}function bc(le,ge){return Ni(le)?le:$h(le,ge)?[le]:wv(Go(le))}var dd=ao;function sf(le,ge,Ue){var xt=le.length;return Ue=Ue===e?xt:Ue,!ge&&Ue>=xt?le:Ou(le,ge,Ue)}var Hf=ro||function(le){return Tr.clearTimeout(le)};function vd(le,ge){if(ge)return le.slice();var Ue=le.length,xt=ki?ki(Ue):new le.constructor(Ue);return le.copy(xt),xt}function jf(le){var ge=new le.constructor(le.byteLength);return new Fa(ge).set(new Fa(le)),ge}function sv(le,ge){var Ue=ge?jf(le.buffer):le.buffer;return new le.constructor(Ue,le.byteOffset,le.byteLength)}function lf(le){var ge=new le.constructor(le.source,st.exec(le));return ge.lastIndex=le.lastIndex,ge}function ph(le){return qo?vr(qo.call(le)):{}}function ju(le,ge){var Ue=ge?jf(le.buffer):le.buffer;return new le.constructor(Ue,le.byteOffset,le.length)}function jh(le,ge){if(le!==ge){var Ue=le!==e,xt=le===null,Kt=le===le,gr=uu(le),Xr=ge!==e,on=ge===null,Tn=ge===ge,va=uu(ge);if(!on&&!va&&!gr&&le>ge||gr&&Xr&&Tn&&!on&&!va||xt&&Xr&&Tn||!Ue&&Tn||!Kt)return 1;if(!xt&&!gr&&!va&&le<ge||va&&Ue&&Kt&&!xt&&!gr||on&&Ue&&Kt||!Xr&&Kt||!Tn)return-1}return 0}function lv(le,ge,Ue){for(var xt=-1,Kt=le.criteria,gr=ge.criteria,Xr=Kt.length,on=Ue.length;++xt<Xr;){var Tn=jh(Kt[xt],gr[xt]);if(Tn){if(xt>=on)return Tn;var va=Ue[xt];return Tn*(va=="desc"?-1:1)}}return le.index-ge.index}function uv(le,ge,Ue,xt){for(var Kt=-1,gr=le.length,Xr=Ue.length,on=-1,Tn=ge.length,va=ni(gr-Xr,0),ga=Ct(Tn+va),Ma=!xt;++on<Tn;)ga[on]=ge[on];for(;++Kt<Xr;)(Ma||Kt<gr)&&(ga[Ue[Kt]]=le[Kt]);for(;va--;)ga[on++]=le[Kt++];return ga}function md(le,ge,Ue,xt){for(var Kt=-1,gr=le.length,Xr=-1,on=Ue.length,Tn=-1,va=ge.length,ga=ni(gr-on,0),Ma=Ct(ga+va),Ja=!xt;++Kt<ga;)Ma[Kt]=le[Kt];for(var Ai=Kt;++Tn<va;)Ma[Ai+Tn]=ge[Tn];for(;++Xr<on;)(Ja||Kt<gr)&&(Ma[Ai+Ue[Xr]]=le[Kt++]);return Ma}function Gl(le,ge){var Ue=-1,xt=le.length;for(ge||(ge=Ct(xt));++Ue<xt;)ge[Ue]=le[Ue];return ge}function Ol(le,ge,Ue,xt){var Kt=!Ue;Ue||(Ue={});for(var gr=-1,Xr=ge.length;++gr<Xr;){var on=ge[gr],Tn=xt?xt(Ue[on],le[on],on,Ue,le):e;Tn===e&&(Tn=le[on]),Kt?pa(Ue,on,Tn):fn(Ue,on,Tn)}return Ue}function cv(le,ge){return Ol(le,bd(le),ge)}function dh(le,ge){return Ol(le,xv(le),ge)}function Gf(le,ge){return function(Ue,xt){var Kt=Ni(Ue)?Su:kn,gr=ge?ge():{};return Kt(Ue,le,bi(xt,2),gr)}}function Oc(le){return ao(function(ge,Ue){var xt=-1,Kt=Ue.length,gr=Kt>1?Ue[Kt-1]:e,Xr=Kt>2?Ue[2]:e;for(gr=le.length>3&&typeof gr=="function"?(Kt--,gr):e,Xr&&Yl(Ue[0],Ue[1],Xr)&&(gr=Kt<3?e:gr,Kt=1),ge=vr(ge);++xt<Kt;){var on=Ue[xt];on&&le(ge,on,xt,gr)}return ge})}function fv(le,ge){return function(Ue,xt){if(Ue==null)return Ue;if(!Nl(Ue))return le(Ue,xt);for(var Kt=Ue.length,gr=ge?Kt:-1,Xr=vr(Ue);(ge?gr--:++gr<Kt)&&xt(Xr[gr],gr,Xr)!==!1;);return Ue}}function Gh(le){return function(ge,Ue,xt){for(var Kt=-1,gr=vr(ge),Xr=xt(ge),on=Xr.length;on--;){var Tn=Xr[le?on:++Kt];if(Ue(gr[Tn],Tn,gr)===!1)break}return ge}}function vh(le,ge,Ue){var xt=ge&s,Kt=Nc(le);function gr(){var Xr=this&&this!==Tr&&this instanceof gr?Kt:le;return Xr.apply(xt?Ue:this,arguments)}return gr}function gd(le){return function(ge){ge=Go(ge);var Ue=ps(ge)?ds(ge):e,xt=Ue?Ue[0]:ge.charAt(0),Kt=Ue?sf(Ue,1).join(""):ge.slice(1);return xt[le]()+Kt}}function Fc(le){return function(ge){return yo(H_(Bg(ge).replace(Kr,"")),le,"")}}function Nc(le){return function(){var ge=arguments;switch(ge.length){case 0:return new le;case 1:return new le(ge[0]);case 2:return new le(ge[0],ge[1]);case 3:return new le(ge[0],ge[1],ge[2]);case 4:return new le(ge[0],ge[1],ge[2],ge[3]);case 5:return new le(ge[0],ge[1],ge[2],ge[3],ge[4]);case 6:return new le(ge[0],ge[1],ge[2],ge[3],ge[4],ge[5]);case 7:return new le(ge[0],ge[1],ge[2],ge[3],ge[4],ge[5],ge[6])}var Ue=Fo(le.prototype),xt=le.apply(Ue,ge);return us(xt)?xt:Ue}}function Gu(le,ge,Ue){var xt=Nc(le);function Kt(){for(var gr=arguments.length,Xr=Ct(gr),on=gr,Tn=Yf(Kt);on--;)Xr[on]=arguments[on];var va=gr<3&&Xr[0]!==Tn&&Xr[gr-1]!==Tn?[]:bl(Xr,Tn);if(gr-=va.length,gr<Ue)return pv(le,ge,bp,Kt.placeholder,e,Xr,va,e,e,Ue-gr);var ga=this&&this!==Tr&&this instanceof Kt?xt:le;return rs(ga,this,Xr)}return Kt}function Wh(le){return function(ge,Ue,xt){var Kt=vr(ge);if(!Nl(ge)){var gr=bi(Ue,3);ge=Gs(ge),Ue=function(on){return gr(Kt[on],on,Kt)}}var Xr=le(ge,Ue,xt);return Xr>-1?Kt[gr?ge[Xr]:Xr]:e}}function yd(le){return Es(function(ge){var Ue=ge.length,xt=Ue,Kt=Di.prototype.thru;for(le&&ge.reverse();xt--;){var gr=ge[xt];if(typeof gr!="function")throw new $r(n);if(Kt&&!Xr&&vo(gr)=="wrapper")var Xr=new Di([],!0)}for(xt=Xr?xt:Ue;++xt<Ue;){gr=ge[xt];var on=vo(gr),Tn=on=="wrapper"?uf(gr):e;Tn&&hf(Tn[0])&&Tn[1]==(T|y|m|g)&&!Tn[4].length&&Tn[9]==1?Xr=Xr[vo(Tn[0])].apply(Xr,Tn[3]):Xr=gr.length==1&&hf(gr)?Xr[on]():Xr.thru(gr)}return function(){var va=arguments,ga=va[0];if(Xr&&va.length==1&&Ni(ga))return Xr.plant(ga).value();for(var Ma=0,Ja=Ue?ge[Ma].apply(this,va):ga;++Ma<Ue;)Ja=ge[Ma].call(this,Ja);return Ja}})}function bp(le,ge,Ue,xt,Kt,gr,Xr,on,Tn,va){var ga=ge&T,Ma=ge&s,Ja=ge&p,Ai=ge&(y|b),Hi=ge&A,go=Ja?e:Nc(le);function ji(){for(var Mo=arguments.length,zo=Ct(Mo),Wc=Mo;Wc--;)zo[Wc]=arguments[Wc];if(Ai)var cc=Yf(ji),Yc=fl(zo,cc);if(xt&&(zo=uv(zo,xt,Kt,Ai)),gr&&(zo=md(zo,gr,Xr,Ai)),Mo-=Yc,Ai&&Mo<va){var Ul=bl(zo,cc);return pv(le,ge,bp,ji.placeholder,Ue,zo,Ul,on,Tn,va-Mo)}var rh=Ma?Ue:this,ap=Ja?rh[le]:le;return Mo=zo.length,on?zo=Mp(zo,on):Hi&&Mo>1&&zo.reverse(),ga&&Tn<Mo&&(zo.length=Tn),this&&this!==Tr&&this instanceof ji&&(ap=go||Nc(ap)),ap.apply(rh,zo)}return ji}function mh(le,ge){return function(Ue,xt){return mc(Ue,le,ge(xt),{})}}function Yh(le,ge){return function(Ue,xt){var Kt;if(Ue===e&&xt===e)return ge;if(Ue!==e&&(Kt=Ue),xt!==e){if(Kt===e)return xt;typeof Ue=="string"||typeof xt=="string"?(Ue=bu(Ue),xt=bu(xt)):(Ue=af(Ue),xt=af(xt)),Kt=le(Ue,xt)}return Kt}}function _p(le){return Es(function(ge){return ge=Co(ge,Ds(bi())),ao(function(Ue){var xt=this;return le(ge,function(Kt){return rs(Kt,xt,Ue)})})})}function Xh(le,ge){ge=ge===e?" ":bu(ge);var Ue=ge.length;if(Ue<2)return Ue?ch(ge,le):ge;var xt=ch(ge,Ji(le/tu(ge)));return ps(ge)?sf(ds(xt),0,le).join(""):xt.slice(0,le)}function hv(le,ge,Ue,xt){var Kt=ge&s,gr=Nc(le);function Xr(){for(var on=-1,Tn=arguments.length,va=-1,ga=xt.length,Ma=Ct(ga+Tn),Ja=this&&this!==Tr&&this instanceof Xr?gr:le;++va<ga;)Ma[va]=xt[va];for(;Tn--;)Ma[va++]=arguments[++on];return rs(Ja,Kt?Ue:this,Ma)}return Xr}function wp(le){return function(ge,Ue,xt){return xt&&typeof xt!="number"&&Yl(ge,Ue,xt)&&(Ue=xt=e),ge=uc(ge),Ue===e?(Ue=ge,ge=0):Ue=uc(Ue),xt=xt===e?ge<Ue?1:-1:uc(xt),I0(ge,Ue,xt,le)}}function qs(le){return function(ge,Ue){return typeof ge=="string"&&typeof Ue=="string"||(ge=Ac(ge),Ue=Ac(Ue)),le(ge,Ue)}}function pv(le,ge,Ue,xt,Kt,gr,Xr,on,Tn,va){var ga=ge&y,Ma=ga?Xr:e,Ja=ga?e:Xr,Ai=ga?gr:e,Hi=ga?e:gr;ge|=ga?m:_,ge&=~(ga?_:m),ge&d||(ge&=~(s|p));var go=[le,ge,Kt,Ai,Ma,Hi,Ja,on,Tn,va],ji=Ue.apply(e,go);return hf(le)&&qh(ji,go),ji.placeholder=xt,bh(ji,le,ge)}function Wf(le){var ge=fr[le];return function(Ue,xt){if(Ue=Ac(Ue),xt=xt==null?0:ui(ci(xt),292),xt&&vs(Ue)){var Kt=(Go(Ue)+"e").split("e"),gr=ge(Kt[0]+"e"+(+Kt[1]+xt));return Kt=(Go(gr)+"e").split("e"),+(Kt[0]+"e"+(+Kt[1]-xt))}return ge(Ue)}}var dv=Ea&&1/gu(new Ea([,-0]))[1]==D?function(le){return new Ea(le)}:rx;function vv(le){return function(ge){var Ue=Wl(ge);return Ue==se?ns(ge):Ue==W?yu(ge):qc(ge,le(ge))}}function ac(le,ge,Ue,xt,Kt,gr,Xr,on){var Tn=ge&p;if(!Tn&&typeof le!="function")throw new $r(n);var va=xt?xt.length:0;if(va||(ge&=~(m|_),xt=Kt=e),Xr=Xr===e?Xr:ni(ci(Xr),0),on=on===e?on:ci(on),va-=Kt?Kt.length:0,ge&_){var ga=xt,Ma=Kt;xt=Kt=e}var Ja=Tn?e:uf(le),Ai=[le,ge,Ue,xt,Kt,ga,Ma,gr,Xr,on];if(Ja&&Xl(Ai,Ja),le=Ai[0],ge=Ai[1],Ue=Ai[2],xt=Ai[3],Kt=Ai[4],on=Ai[9]=Ai[9]===e?Tn?0:le.length:ni(Ai[9]-va,0),!on&&ge&(y|b)&&(ge&=~(y|b)),!ge||ge==s)var Hi=vh(le,ge,Ue);else ge==y||ge==b?Hi=Gu(le,ge,on):(ge==m||ge==(s|m))&&!Kt.length?Hi=hv(le,ge,Ue,xt):Hi=bp.apply(e,Ai);var go=Ja?ov:qh;return bh(go(Hi,Ai),le,ge)}function Zh(le,ge,Ue,xt){return le===e||ko(le,Pn[Ue])&&!Un.call(xt,Ue)?ge:le}function mv(le,ge,Ue,xt,Kt,gr){return us(le)&&us(ge)&&(gr.set(ge,le),iu(le,ge,e,mv,gr),gr.delete(ge)),le}function Tp(le){return yf(le)?e:le}function gh(le,ge,Ue,xt,Kt,gr){var Xr=Ue&h,on=le.length,Tn=ge.length;if(on!=Tn&&!(Xr&&Tn>on))return!1;var va=gr.get(le),ga=gr.get(ge);if(va&&ga)return va==ge&&ga==le;var Ma=-1,Ja=!0,Ai=Ue&i?new Oe:e;for(gr.set(le,ge),gr.set(ge,le);++Ma<on;){var Hi=le[Ma],go=ge[Ma];if(xt)var ji=Xr?xt(go,Hi,Ma,ge,le,gr):xt(Hi,go,Ma,le,ge,gr);if(ji!==e){if(ji)continue;Ja=!1;break}if(Ai){if(!pu(ge,function(Mo,zo){if(!Rl(Ai,zo)&&(Hi===Mo||Kt(Hi,Mo,Ue,xt,gr)))return Ai.push(zo)})){Ja=!1;break}}else if(!(Hi===go||Kt(Hi,go,Ue,xt,gr))){Ja=!1;break}}return gr.delete(le),gr.delete(ge),Ja}function gv(le,ge,Ue,xt,Kt,gr,Xr){switch(Ue){case ze:if(le.byteLength!=ge.byteLength||le.byteOffset!=ge.byteOffset)return!1;le=le.buffer,ge=ge.buffer;case je:return!(le.byteLength!=ge.byteLength||!gr(new Fa(le),new Fa(ge)));case te:case J:case re:return ko(+le,+ge);case ie:return le.name==ge.name&&le.message==ge.message;case pe:case ue:return le==ge+"";case se:var on=ns;case W:var Tn=xt&h;if(on||(on=gu),le.size!=ge.size&&!Tn)return!1;var va=Xr.get(le);if(va)return va==ge;xt|=i,Xr.set(le,ge);var ga=gh(on(le),on(ge),xt,Kt,gr,Xr);return Xr.delete(le),ga;case me:if(qo)return qo.call(le)==qo.call(ge)}return!1}function xd(le,ge,Ue,xt,Kt,gr){var Xr=Ue&h,on=Kh(le),Tn=on.length,va=Kh(ge),ga=va.length;if(Tn!=ga&&!Xr)return!1;for(var Ma=Tn;Ma--;){var Ja=on[Ma];if(!(Xr?Ja in ge:Un.call(ge,Ja)))return!1}var Ai=gr.get(le),Hi=gr.get(ge);if(Ai&&Hi)return Ai==ge&&Hi==le;var go=!0;gr.set(le,ge),gr.set(ge,le);for(var ji=Xr;++Ma<Tn;){Ja=on[Ma];var Mo=le[Ja],zo=ge[Ja];if(xt)var Wc=Xr?xt(zo,Mo,Ja,ge,le,gr):xt(Mo,zo,Ja,le,ge,gr);if(!(Wc===e?Mo===zo||Kt(Mo,zo,Ue,xt,gr):Wc)){go=!1;break}ji||(ji=Ja=="constructor")}if(go&&!ji){var cc=le.constructor,Yc=ge.constructor;cc!=Yc&&"constructor"in le&&"constructor"in ge&&!(typeof cc=="function"&&cc instanceof cc&&typeof Yc=="function"&&Yc instanceof Yc)&&(go=!1)}return gr.delete(le),gr.delete(ge),go}function Es(le){return df(xh(le,e,Jf),le+"")}function Kh(le){return xu(le,Gs,bd)}function Ap(le){return xu(le,Bl,xv)}var uf=Mi?function(le){return Mi.get(le)}:rx;function vo(le){for(var ge=le.name+"",Ue=Qn[ge],xt=Un.call(Qn,ge)?Ue.length:0;xt--;){var Kt=Ue[xt],gr=Kt.func;if(gr==null||gr==le)return Kt.name}return ge}function Yf(le){var ge=Un.call(or,"placeholder")?or:le;return ge.placeholder}function bi(){var le=or.iteratee||ex;return le=le===ex?zl:le,arguments.length?le(arguments[0],arguments[1]):le}function Bc(le,ge){var Ue=le.__data__;return kp(ge)?Ue[typeof ge=="string"?"string":"hash"]:Ue.map}function Xf(le){for(var ge=Gs(le),Ue=ge.length;Ue--;){var xt=ge[Ue],Kt=le[xt];ge[Ue]=[xt,Kt,el(Kt)]}return ge}function Uc(le,ge){var Ue=Ru(le,ge);return ws(Ue)?Ue:e}function yv(le){var ge=Un.call(le,Ca),Ue=le[Ca];try{le[Ca]=e;var xt=!0}catch{}var Kt=ti.call(le);return xt&&(ge?le[Ca]=Ue:delete le[Ca]),Kt}var bd=_o?function(le){return le==null?[]:(le=vr(le),hu(_o(le),function(ge){return Zn.call(le,ge)}))}:nx,xv=_o?function(le){for(var ge=[];le;)ul(ge,bd(le)),le=vi(le);return ge}:nx,Wl=Ms;(Gi&&Wl(new Gi(new ArrayBuffer(1)))!=ze||Ya&&Wl(new Ya)!=se||is&&Wl(is.resolve())!=fe||Ea&&Wl(new Ea)!=W||Ga&&Wl(new Ga)!=ke)&&(Wl=function(le){var ge=Ms(le),Ue=ge==ae?le.constructor:e,xt=Ue?vf(Ue):"";if(xt)switch(xt){case za:return ze;case Si:return se;case Vi:return fe;case uo:return W;case Ei:return ke}return ge});function Wu(le,ge,Ue){for(var xt=-1,Kt=Ue.length;++xt<Kt;){var gr=Ue[xt],Xr=gr.size;switch(gr.type){case"drop":le+=Xr;break;case"dropRight":ge-=Xr;break;case"take":ge=ui(ge,le+Xr);break;case"takeRight":le=ni(le,ge-Xr);break}}return{start:le,end:ge}}function bv(le){var ge=le.match(Xe);return ge?ge[1].split(ht):[]}function _d(le,ge,Ue){ge=bc(ge,le);for(var xt=-1,Kt=ge.length,gr=!1;++xt<Kt;){var Xr=oc(ge[xt]);if(!(gr=le!=null&&Ue(le,Xr)))break;le=le[Xr]}return gr||++xt!=Kt?gr:(Kt=le==null?0:le.length,!!Kt&&Hc(Kt)&&Vc(Xr,Kt)&&(Ni(le)||jo(le)))}function cf(le){var ge=le.length,Ue=new le.constructor(ge);return ge&&typeof le[0]=="string"&&Un.call(le,"index")&&(Ue.index=le.index,Ue.input=le.input),Ue}function Zf(le){return typeof le.constructor=="function"&&!_c(le)?Fo(vi(le)):{}}function ff(le,ge,Ue){var xt=le.constructor;switch(ge){case je:return jf(le);case te:case J:return new xt(+le);case ze:return sv(le,Ue);case Ze:case tt:case Ce:case Ae:case Ne:case qe:case At:case kt:case Ve:return ju(le,Ue);case se:return new xt;case re:case ue:return new xt(le);case pe:return lf(le);case W:return new xt;case me:return ph(le)}}function _v(le,ge){var Ue=ge.length;if(!Ue)return le;var xt=Ue-1;return ge[xt]=(Ue>1?"& ":"")+ge[xt],ge=ge.join(Ue>2?", ":" "),le.replace(He,`{
/* [wrapped with `+ge+`] */
`)}function N0(le){return Ni(le)||jo(le)||!!(Bi&&le&&le[Bi])}function Vc(le,ge){var Ue=typeof le;return ge=ge??F,!!ge&&(Ue=="number"||Ue!="symbol"&&Fe.test(le))&&le>-1&&le%1==0&&le<ge}function Yl(le,ge,Ue){if(!us(Ue))return!1;var xt=typeof ge;return(xt=="number"?Nl(Ue)&&Vc(ge,Ue.length):xt=="string"&&ge in Ue)?ko(Ue[ge],le):!1}function $h(le,ge){if(Ni(le))return!1;var Ue=typeof le;return Ue=="number"||Ue=="symbol"||Ue=="boolean"||le==null||uu(le)?!0:Te.test(le)||!lt.test(le)||ge!=null&&le in vr(ge)}function kp(le){var ge=typeof le;return ge=="string"||ge=="number"||ge=="symbol"||ge=="boolean"?le!=="__proto__":le===null}function hf(le){var ge=vo(le),Ue=or[ge];if(typeof Ue!="function"||!(ge in mi.prototype))return!1;if(le===Ue)return!0;var xt=uf(Ue);return!!xt&&le===xt[0]}function Jh(le){return!!Ia&&Ia in le}var _u=Wn?lc:ax;function _c(le){var ge=le&&le.constructor,Ue=typeof ge=="function"&&ge.prototype||Pn;return le===Ue}function el(le){return le===le&&!us(le)}function yh(le,ge){return function(Ue){return Ue==null?!1:Ue[le]===ge&&(ge!==e||le in vr(Ue))}}function Kf(le){var ge=gs(le,function(xt){return Ue.size===t&&Ue.clear(),xt}),Ue=ge.cache;return ge}function Xl(le,ge){var Ue=le[1],xt=ge[1],Kt=Ue|xt,gr=Kt<(s|p|T),Xr=xt==T&&Ue==y||xt==T&&Ue==g&&le[7].length<=ge[8]||xt==(T|g)&&ge[7].length<=ge[8]&&Ue==y;if(!(gr||Xr))return le;xt&s&&(le[2]=ge[2],Kt|=Ue&s?0:d);var on=ge[3];if(on){var Tn=le[3];le[3]=Tn?uv(Tn,on,ge[4]):on,le[4]=Tn?bl(le[3],f):ge[4]}return on=ge[5],on&&(Tn=le[5],le[5]=Tn?md(Tn,on,ge[6]):on,le[6]=Tn?bl(le[5],f):ge[6]),on=ge[7],on&&(le[7]=on),xt&T&&(le[8]=le[8]==null?ge[8]:ui(le[8],ge[8])),le[9]==null&&(le[9]=ge[9]),le[0]=ge[0],le[1]=Kt,le}function Qh(le){var ge=[];if(le!=null)for(var Ue in vr(le))ge.push(Ue);return ge}function wd(le){return ti.call(le)}function xh(le,ge,Ue){return ge=ni(ge===e?le.length-1:ge,0),function(){for(var xt=arguments,Kt=-1,gr=ni(xt.length-ge,0),Xr=Ct(gr);++Kt<gr;)Xr[Kt]=xt[ge+Kt];Kt=-1;for(var on=Ct(ge+1);++Kt<ge;)on[Kt]=xt[Kt];return on[ge]=Ue(Xr),rs(le,this,on)}}function Cs(le,ge){return ge.length<2?le:To(le,Ou(ge,0,-1))}function Mp(le,ge){for(var Ue=le.length,xt=ui(ge.length,Ue),Kt=Gl(le);xt--;){var gr=ge[xt];le[xt]=Vc(gr,Ue)?Kt[gr]:e}return le}function ic(le,ge){if(!(ge==="constructor"&&typeof le[ge]=="function")&&ge!="__proto__")return le[ge]}var qh=_h(ov),pf=Oo||function(le,ge){return Tr.setTimeout(le,ge)},df=_h(z0);function bh(le,ge,Ue){var xt=ge+"";return df(le,_v(xt,Tv(bv(xt),Ue)))}function _h(le){var ge=0,Ue=0;return function(){var xt=Po(),Kt=z-(xt-Ue);if(Ue=xt,Kt>0){if(++ge>=L)return arguments[0]}else ge=0;return le.apply(e,arguments)}}function wh(le,ge){var Ue=-1,xt=le.length,Kt=xt-1;for(ge=ge===e?xt:ge;++Ue<ge;){var gr=Uh(Ue,Kt),Xr=le[gr];le[gr]=le[Ue],le[Ue]=Xr}return le.length=ge,le}var wv=Kf(function(le){var ge=[];return le.charCodeAt(0)===46&&ge.push(""),le.replace(Le,function(Ue,xt,Kt,gr){ge.push(Kt?gr.replace(ot,"$1"):xt||Ue)}),ge});function oc(le){if(typeof le=="string"||uu(le))return le;var ge=le+"";return ge=="0"&&1/le==-D?"-0":ge}function vf(le){if(le!=null){try{return aa.call(le)}catch{}try{return le+""}catch{}}return""}function Tv(le,ge){return Rs(B,function(Ue){var xt="_."+Ue[0];ge&Ue[1]&&!Rc(le,xt)&&le.push(xt)}),le.sort()}function ep(le){if(le instanceof mi)return le.clone();var ge=new Di(le.__wrapped__,le.__chain__);return ge.__actions__=Gl(le.__actions__),ge.__index__=le.__index__,ge.__values__=le.__values__,ge}function Td(le,ge,Ue){(Ue?Yl(le,ge,Ue):ge===e)?ge=1:ge=ni(ci(ge),0);var xt=le==null?0:le.length;if(!xt||ge<1)return[];for(var Kt=0,gr=0,Xr=Ct(Ji(xt/ge));Kt<xt;)Xr[gr++]=Ou(le,Kt,Kt+=ge);return Xr}function Av(le){for(var ge=-1,Ue=le==null?0:le.length,xt=0,Kt=[];++ge<Ue;){var gr=le[ge];gr&&(Kt[xt++]=gr)}return Kt}function Ad(){var le=arguments.length;if(!le)return[];for(var ge=Ct(le-1),Ue=arguments[0],xt=le;xt--;)ge[xt-1]=arguments[xt];return ul(Ni(Ue)?Gl(Ue):[Ue],Na(ge,1))}var Sp=ao(function(le,ge){return ys(le)?Ua(le,Na(ge,1,ys,!0)):[]}),Th=ao(function(le,ge){var Ue=Tt(ge);return ys(Ue)&&(Ue=e),ys(le)?Ua(le,Na(ge,1,ys,!0),bi(Ue,2)):[]}),mf=ao(function(le,ge){var Ue=Tt(ge);return ys(Ue)&&(Ue=e),ys(le)?Ua(le,Na(ge,1,ys,!0),e,Ue):[]});function $f(le,ge,Ue){var xt=le==null?0:le.length;return xt?(ge=Ue||ge===e?1:ci(ge),Ou(le,ge<0?0:ge,xt)):[]}function Ah(le,ge,Ue){var xt=le==null?0:le.length;return xt?(ge=Ue||ge===e?1:ci(ge),ge=xt-ge,Ou(le,0,ge<0?0:ge)):[]}function Ep(le,ge){return le&&le.length?of(le,bi(ge,3),!0,!0):[]}function kh(le,ge){return le&&le.length?of(le,bi(ge,3),!0):[]}function kv(le,ge,Ue,xt){var Kt=le==null?0:le.length;return Kt?(Ue&&typeof Ue!="number"&&Yl(le,ge,Ue)&&(Ue=0,xt=Kt),zi(le,ge,Ue,xt)):[]}function Mv(le,ge,Ue){var xt=le==null?0:le.length;if(!xt)return-1;var Kt=Ue==null?0:ci(Ue);return Kt<0&&(Kt=ni(xt+Kt,0)),Lu(le,bi(ge,3),Kt)}function Sv(le,ge,Ue){var xt=le==null?0:le.length;if(!xt)return-1;var Kt=xt-1;return Ue!==e&&(Kt=ci(Ue),Kt=Ue<0?ni(xt+Kt,0):ui(Kt,xt-1)),Lu(le,bi(ge,3),Kt,!0)}function Jf(le){var ge=le==null?0:le.length;return ge?Na(le,1):[]}function Y(le){var ge=le==null?0:le.length;return ge?Na(le,D):[]}function he(le,ge){var Ue=le==null?0:le.length;return Ue?(ge=ge===e?1:ci(ge),Na(le,ge)):[]}function ye(le){for(var ge=-1,Ue=le==null?0:le.length,xt={};++ge<Ue;){var Kt=le[ge];xt[Kt[0]]=Kt[1]}return xt}function _e(le){return le&&le.length?le[0]:e}function Ee(le,ge,Ue){var xt=le==null?0:le.length;if(!xt)return-1;var Kt=Ue==null?0:ci(Ue);return Kt<0&&(Kt=ni(xt+Kt,0)),ml(le,ge,Kt)}function De(le){var ge=le==null?0:le.length;return ge?Ou(le,0,-1):[]}var rt=ao(function(le){var ge=Co(le,xp);return ge.length&&ge[0]===le[0]?vc(ge):[]}),$e=ao(function(le){var ge=Tt(le),Ue=Co(le,xp);return ge===Tt(Ue)?ge=e:Ue.pop(),Ue.length&&Ue[0]===le[0]?vc(Ue,bi(ge,2)):[]}),nt=ao(function(le){var ge=Tt(le),Ue=Co(le,xp);return ge=typeof ge=="function"?ge:e,ge&&Ue.pop(),Ue.length&&Ue[0]===le[0]?vc(Ue,e,ge):[]});function mt(le,ge){return le==null?"":Js.call(le,ge)}function Tt(le){var ge=le==null?0:le.length;return ge?le[ge-1]:e}function Vt(le,ge,Ue){var xt=le==null?0:le.length;if(!xt)return-1;var Kt=xt;return Ue!==e&&(Kt=ci(Ue),Kt=Kt<0?ni(xt+Kt,0):ui(Kt,xt-1)),ge===ge?dc(le,ge,Kt):Lu(le,Hu,Kt,!0)}function Yt(le,ge){return le&&le.length?ls(le,ci(ge)):e}var ur=ao(Rr);function Rr(le,ge){return le&&le.length&&ge&&ge.length?mp(le,ge):le}function ir(le,ge,Ue){return le&&le.length&&ge&&ge.length?mp(le,ge,bi(Ue,2)):le}function hr(le,ge,Ue){return le&&le.length&&ge&&ge.length?mp(le,ge,e,Ue):le}var mr=Es(function(le,ge){var Ue=le==null?0:le.length,xt=ua(le,ge);return hd(le,Co(ge,function(Kt){return Vc(Kt,Ue)?+Kt:Kt}).sort(jh)),xt});function Dr(le,ge){var Ue=[];if(!(le&&le.length))return Ue;var xt=-1,Kt=[],gr=le.length;for(ge=bi(ge,3);++xt<gr;){var Xr=le[xt];ge(Xr,xt,le)&&(Ue.push(Xr),Kt.push(xt))}return hd(le,Kt),Ue}function yr(le){return le==null?le:Qo.call(le)}function kr(le,ge,Ue){var xt=le==null?0:le.length;return xt?(Ue&&typeof Ue!="number"&&Yl(le,ge,Ue)?(ge=0,Ue=xt):(ge=ge==null?0:ci(ge),Ue=Ue===e?xt:ci(Ue)),Ou(le,ge,Ue)):[]}function gn(le,ge){return gp(le,ge)}function vn(le,ge,Ue){return Uf(le,ge,bi(Ue,2))}function hn(le,ge){var Ue=le==null?0:le.length;if(Ue){var xt=gp(le,ge);if(xt<Ue&&ko(le[xt],ge))return xt}return-1}function sn(le,ge){return gp(le,ge,!0)}function Xn(le,ge,Ue){return Uf(le,ge,bi(Ue,2),!0)}function ea(le,ge){var Ue=le==null?0:le.length;if(Ue){var xt=gp(le,ge,!0)-1;if(ko(le[xt],ge))return xt}return-1}function La(le){return le&&le.length?pd(le):[]}function da(le,ge){return le&&le.length?pd(le,bi(ge,2)):[]}function ma(le){var ge=le==null?0:le.length;return ge?Ou(le,1,ge):[]}function En(le,ge,Ue){return le&&le.length?(ge=Ue||ge===e?1:ci(ge),Ou(le,0,ge<0?0:ge)):[]}function $n(le,ge,Ue){var xt=le==null?0:le.length;return xt?(ge=Ue||ge===e?1:ci(ge),ge=xt-ge,Ou(le,ge<0?0:ge,xt)):[]}function ca(le,ge){return le&&le.length?of(le,bi(ge,3),!1,!0):[]}function yn(le,ge){return le&&le.length?of(le,bi(ge,3)):[]}var Hn=ao(function(le){return Uo(Na(le,1,ys,!0))}),Ha=ao(function(le){var ge=Tt(le);return ys(ge)&&(ge=e),Uo(Na(le,1,ys,!0),bi(ge,2))}),gi=ao(function(le){var ge=Tt(le);return ge=typeof ge=="function"?ge:e,Uo(Na(le,1,ys,!0),e,ge)});function Pi(le){return le&&le.length?Uo(le):[]}function mo(le,ge){return le&&le.length?Uo(le,bi(ge,2)):[]}function Do(le,ge){return ge=typeof ge=="function"?ge:e,le&&le.length?Uo(le,e,ge):[]}function tl(le){if(!(le&&le.length))return[];var ge=0;return le=hu(le,function(Ue){if(ys(Ue))return ge=ni(Ue.length,ge),!0}),$s(ge,function(Ue){return Co(le,ql(Ue))})}function Os(le,ge){if(!(le&&le.length))return[];var Ue=tl(le);return ge==null?Ue:Co(Ue,function(xt){return rs(ge,e,xt)})}var Fs=ao(function(le,ge){return ys(le)?Ua(le,ge):[]}),su=ao(function(le){return zc(hu(le,ys))}),io=ao(function(le){var ge=Tt(le);return ys(ge)&&(ge=e),zc(hu(le,ys),bi(ge,2))}),kl=ao(function(le){var ge=Tt(le);return ge=typeof ge=="function"?ge:e,zc(hu(le,ys),e,ge)}),lu=ao(tl);function Cp(le,ge){return Hh(le||[],ge||[],fn)}function wu(le,ge){return Hh(le||[],ge||[],Vh)}var rl=ao(function(le){var ge=le.length,Ue=ge>1?le[ge-1]:e;return Ue=typeof Ue=="function"?(le.pop(),Ue):e,Os(le,Ue)});function Ml(le){var ge=or(le);return ge.__chain__=!0,ge}function Sl(le,ge){return ge(le),le}function Zl(le,ge){return ge(le)}var Qf=Es(function(le){var ge=le.length,Ue=ge?le[0]:0,xt=this.__wrapped__,Kt=function(gr){return ua(gr,le)};return ge>1||this.__actions__.length||!(xt instanceof mi)||!Vc(Ue)?this.thru(Kt):(xt=xt.slice(Ue,+Ue+(ge?1:0)),xt.__actions__.push({func:Zl,args:[Kt],thisArg:e}),new Di(xt,this.__chain__).thru(function(gr){return ge&&!gr.length&&gr.push(e),gr}))});function qf(){return Ml(this)}function Xo(){return new Di(this.value(),this.__chain__)}function sc(){this.__values__===e&&(this.__values__=_g(this.value()));var le=this.__index__>=this.__values__.length,ge=le?e:this.__values__[this.__index__++];return{done:le,value:ge}}function kd(){return this}function w(le){for(var ge,Ue=this;Ue instanceof fo;){var xt=ep(Ue);xt.__index__=0,xt.__values__=e,ge?Kt.__wrapped__=xt:ge=xt;var Kt=xt;Ue=Ue.__wrapped__}return Kt.__wrapped__=le,ge}function O(){var le=this.__wrapped__;if(le instanceof mi){var ge=le;return this.__actions__.length&&(ge=new mi(this)),ge=ge.reverse(),ge.__actions__.push({func:Zl,args:[yr],thisArg:e}),new Di(ge,this.__chain__)}return this.thru(yr)}function Z(){return hh(this.__wrapped__,this.__actions__)}var ce=Gf(function(le,ge,Ue){Un.call(le,Ue)?++le[Ue]:pa(le,Ue,1)});function xe(le,ge,Ue){var xt=Ni(le)?Eu:hi;return Ue&&Yl(le,ge,Ue)&&(ge=e),xt(le,bi(ge,3))}function we(le,ge){var Ue=Ni(le)?hu:si;return Ue(le,bi(ge,3))}var Re=Wh(Mv),Ke=Wh(Sv);function pt(le,ge){return Na(Br(le,ge),1)}function Et(le,ge){return Na(Br(le,ge),D)}function Ot(le,ge,Ue){return Ue=Ue===e?1:ci(Ue),Na(Br(le,ge),Ue)}function Ht(le,ge){var Ue=Ni(le)?Rs:fi;return Ue(le,bi(ge,3))}function Jt(le,ge){var Ue=Ni(le)?ec:Ii;return Ue(le,bi(ge,3))}var lr=Gf(function(le,ge,Ue){Un.call(le,Ue)?le[Ue].push(ge):pa(le,Ue,[ge])});function Ar(le,ge,Ue,xt){le=Nl(le)?le:wf(le),Ue=Ue&&!xt?ci(Ue):0;var Kt=le.length;return Ue<0&&(Ue=ni(Kt+Ue,0)),xf(le)?Ue<=Kt&&le.indexOf(ge,Ue)>-1:!!Kt&&ml(le,ge,Ue)>-1}var Sr=ao(function(le,ge,Ue){var xt=-1,Kt=typeof ge=="function",gr=Nl(le)?Ct(le.length):[];return fi(le,function(Xr){gr[++xt]=Kt?rs(ge,Xr,Ue):Il(Xr,ge,Ue)}),gr}),Zr=Gf(function(le,ge,Ue){pa(le,Ue,ge)});function Br(le,ge){var Ue=Ni(le)?Co:Nh;return Ue(le,bi(ge,3))}function ln(le,ge,Ue,xt){return le==null?[]:(Ni(ge)||(ge=ge==null?[]:[ge]),Ue=xt?e:Ue,Ni(Ue)||(Ue=Ue==null?[]:[Ue]),nv(le,ge,Ue))}var mn=Gf(function(le,ge,Ue){le[Ue?0:1].push(ge)},function(){return[[],[]]});function In(le,ge,Ue){var xt=Ni(le)?yo:pc,Kt=arguments.length<3;return xt(le,bi(ge,4),Ue,Kt,fi)}function On(le,ge,Ue){var xt=Ni(le)?uh:pc,Kt=arguments.length<3;return xt(le,bi(ge,4),Ue,Kt,Ii)}function Kn(le,ge){var Ue=Ni(le)?hu:si;return Ue(le,Io(bi(ge,3)))}function xa(le){var ge=Ni(le)?jr:xc;return ge(le)}function Pa(le,ge,Ue){(Ue?Yl(le,ge,Ue):ge===e)?ge=1:ge=ci(ge);var xt=Ni(le)?Mr:Bf;return xt(le,ge)}function Ka(le){var ge=Ni(le)?Ur:O0;return ge(le)}function Ba(le){if(le==null)return 0;if(Nl(le))return xf(le)?tu(le):le.length;var ge=Wl(le);return ge==se||ge==W?le.size:nc(le).length}function ri(le,ge,Ue){var xt=Ni(le)?pu:F0;return Ue&&Yl(le,ge,Ue)&&(ge=e),xt(le,bi(ge,3))}var Oa=ao(function(le,ge){if(le==null)return[];var Ue=ge.length;return Ue>1&&Yl(le,ge[0],ge[1])?ge=[]:Ue>2&&Yl(ge[0],ge[1],ge[2])&&(ge=[ge[0]]),nv(le,Na(ge,1),[])}),Oi=Lo||function(){return Tr.Date.now()};function yi(le,ge){if(typeof ge!="function")throw new $r(n);return le=ci(le),function(){if(--le<1)return ge.apply(this,arguments)}}function ja(le,ge,Ue){return ge=Ue?e:ge,ge=le&&ge==null?le.length:ge,ac(le,T,e,e,e,e,ge)}function Wi(le,ge){var Ue;if(typeof ge!="function")throw new $r(n);return le=ci(le),function(){return--le>0&&(Ue=ge.apply(this,arguments)),le<=1&&(ge=e),Ue}}var Ci=ao(function(le,ge,Ue){var xt=s;if(Ue.length){var Kt=bl(Ue,Yf(Ci));xt|=m}return ac(le,xt,ge,Ue,Kt)}),oo=ao(function(le,ge,Ue){var xt=s|p;if(Ue.length){var Kt=bl(Ue,Yf(oo));xt|=m}return ac(ge,xt,le,Ue,Kt)});function $a(le,ge,Ue){ge=Ue?e:ge;var xt=ac(le,y,e,e,e,e,e,ge);return xt.placeholder=$a.placeholder,xt}function po(le,ge,Ue){ge=Ue?e:ge;var xt=ac(le,b,e,e,e,e,e,ge);return xt.placeholder=po.placeholder,xt}function Ho(le,ge,Ue){var xt,Kt,gr,Xr,on,Tn,va=0,ga=!1,Ma=!1,Ja=!0;if(typeof le!="function")throw new $r(n);ge=Ac(ge)||0,us(Ue)&&(ga=!!Ue.leading,Ma="maxWait"in Ue,gr=Ma?ni(Ac(Ue.maxWait)||0,ge):gr,Ja="trailing"in Ue?!!Ue.trailing:Ja);function Ai(Ul){var rh=xt,ap=Kt;return xt=Kt=e,va=Ul,Xr=le.apply(ap,rh),Xr}function Hi(Ul){return va=Ul,on=pf(Mo,ge),ga?Ai(Ul):Xr}function go(Ul){var rh=Ul-Tn,ap=Ul-va,W_=ge-rh;return Ma?ui(W_,gr-ap):W_}function ji(Ul){var rh=Ul-Tn,ap=Ul-va;return Tn===e||rh>=ge||rh<0||Ma&&ap>=gr}function Mo(){var Ul=Oi();if(ji(Ul))return zo(Ul);on=pf(Mo,go(Ul))}function zo(Ul){return on=e,Ja&&xt?Ai(Ul):(xt=Kt=e,Xr)}function Wc(){on!==e&&Hf(on),va=0,xt=Tn=Kt=on=e}function cc(){return on===e?Xr:zo(Oi())}function Yc(){var Ul=Oi(),rh=ji(Ul);if(xt=arguments,Kt=this,Tn=Ul,rh){if(on===e)return Hi(Tn);if(Ma)return Hf(on),on=pf(Mo,ge),Ai(Tn)}return on===e&&(on=pf(Mo,ge)),Xr}return Yc.cancel=Wc,Yc.flush=cc,Yc}var nl=ao(function(le,ge){return Fi(le,1,ge)}),al=ao(function(le,ge,Ue){return Fi(le,Ac(ge)||0,Ue)});function Zo(le){return ac(le,A)}function gs(le,ge){if(typeof le!="function"||ge!=null&&typeof ge!="function")throw new $r(n);var Ue=function(){var xt=arguments,Kt=ge?ge.apply(this,xt):xt[0],gr=Ue.cache;if(gr.has(Kt))return gr.get(Kt);var Xr=le.apply(this,xt);return Ue.cache=gr.set(Kt,Xr)||gr,Xr};return Ue.cache=new(gs.Cache||wo),Ue}gs.Cache=wo;function Io(le){if(typeof le!="function")throw new $r(n);return function(){var ge=arguments;switch(ge.length){case 0:return!le.call(this);case 1:return!le.call(this,ge[0]);case 2:return!le.call(this,ge[0],ge[1]);case 3:return!le.call(this,ge[0],ge[1],ge[2])}return!le.apply(this,ge)}}function Us(le){return Wi(2,le)}var Kl=dd(function(le,ge){ge=ge.length==1&&Ni(ge[0])?Co(ge[0],Ds(bi())):Co(Na(ge,1),Ds(bi()));var Ue=ge.length;return ao(function(xt){for(var Kt=-1,gr=ui(xt.length,Ue);++Kt<gr;)xt[Kt]=ge[Kt].call(this,xt[Kt]);return rs(le,this,xt)})}),Vs=ao(function(le,ge){var Ue=bl(ge,Yf(Vs));return ac(le,m,e,ge,Ue)}),$l=ao(function(le,ge){var Ue=bl(ge,Yf($l));return ac(le,_,e,ge,Ue)}),Hs=Es(function(le,ge){return ac(le,g,e,e,e,ge)});function js(le,ge){if(typeof le!="function")throw new $r(n);return ge=ge===e?ge:ci(ge),ao(le,ge)}function qi(le,ge){if(typeof le!="function")throw new $r(n);return ge=ge==null?0:ni(ci(ge),0),ao(function(Ue){var xt=Ue[ge],Kt=sf(Ue,0,ge);return xt&&ul(Kt,xt),rs(le,this,Kt)})}function Eo(le,ge,Ue){var xt=!0,Kt=!0;if(typeof le!="function")throw new $r(n);return us(Ue)&&(xt="leading"in Ue?!!Ue.leading:xt,Kt="trailing"in Ue?!!Ue.trailing:Kt),Ho(le,ge,{leading:xt,maxWait:ge,trailing:Kt})}function Ko(le){return ja(le,1)}function so(le,ge){return Vs(Vf(ge),le)}function Ns(){if(!arguments.length)return[];var le=arguments[0];return Ni(le)?le:[le]}function Fl(le){return Da(le,u)}function il(le,ge){return ge=typeof ge=="function"?ge:e,Da(le,u,ge)}function Ts(le){return Da(le,a|u)}function ol(le,ge){return ge=typeof ge=="function"?ge:e,Da(le,a|u,ge)}function $o(le,ge){return ge==null||qa(le,ge,Gs(ge))}function ko(le,ge){return le===ge||le!==le&&ge!==ge}var Yu=qs(ru),gf=qs(function(le,ge){return le>=ge}),jo=zu(function(){return arguments}())?zu:function(le){return Ls(le)&&Un.call(le,"callee")&&!Zn.call(le,"callee")},Ni=Ct.isArray,wc=ai?Ds(ai):Ff;function Nl(le){return le!=null&&Hc(le.length)&&!lc(le)}function ys(le){return Ls(le)&&Nl(le)}function Lp(le){return le===!0||le===!1||Ls(le)&&Ms(le)==te}var Tu=as||ax,Pp=Ti?Ds(Ti):gc;function Ev(le){return Ls(le)&&le.nodeType===1&&!yf(le)}function Rp(le){if(le==null)return!0;if(Nl(le)&&(Ni(le)||typeof le=="string"||typeof le.splice=="function"||Tu(le)||jc(le)||jo(le)))return!le.length;var ge=Wl(le);if(ge==se||ge==W)return!le.size;if(_c(le))return!nc(le).length;for(var Ue in le)if(Un.call(le,Ue))return!1;return!0}function Md(le,ge){return au(le,ge)}function Cv(le,ge,Ue){Ue=typeof Ue=="function"?Ue:e;var xt=Ue?Ue(le,ge):e;return xt===e?au(le,ge,e,Ue):!!xt}function Dp(le){if(!Ls(le))return!1;var ge=Ms(le);return ge==ie||ge==oe||typeof le.message=="string"&&typeof le.name=="string"&&!yf(le)}function eh(le){return typeof le=="number"&&vs(le)}function lc(le){if(!us(le))return!1;var ge=Ms(le);return ge==Q||ge==V||ge==K||ge==de}function tp(le){return typeof le=="number"&&le==ci(le)}function Hc(le){return typeof le=="number"&&le>-1&&le%1==0&&le<=F}function us(le){var ge=typeof le;return le!=null&&(ge=="object"||ge=="function")}function Ls(le){return le!=null&&typeof le=="object"}var Sd=Ui?Ds(Ui):rf;function Ed(le,ge){return le===ge||nf(le,ge,Xf(ge))}function Cd(le,ge,Ue){return Ue=typeof Ue=="function"?Ue:e,nf(le,ge,Xf(ge),Ue)}function Lv(le){return Dd(le)&&le!=+le}function Ld(le){if(_u(le))throw new tr(r);return ws(le)}function Pd(le){return le===null}function Rd(le){return le==null}function Dd(le){return typeof le=="number"||Ls(le)&&Ms(le)==re}function yf(le){if(!Ls(le)||Ms(le)!=ae)return!1;var ge=vi(le);if(ge===null)return!0;var Ue=Un.call(ge,"constructor")&&ge.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&aa.call(Ue)==ya}var Ip=Qa?Ds(Qa):yc;function zp(le){return tp(le)&&le>=-F&&le<=F}var Op=di?Ds(di):ss;function xf(le){return typeof le=="string"||!Ni(le)&&Ls(le)&&Ms(le)==ue}function uu(le){return typeof le=="symbol"||Ls(le)&&Ms(le)==me}var jc=Ps?Ds(Ps):jl;function B0(le){return le===e}function xg(le){return Ls(le)&&Wl(le)==ke}function U0(le){return Ls(le)&&Ms(le)==Pe}var bg=qs(Nf),V0=qs(function(le,ge){return le<=ge});function _g(le){if(!le)return[];if(Nl(le))return xf(le)?ds(le):Gl(le);if(li&&le[li])return Du(le[li]());var ge=Wl(le),Ue=ge==se?ns:ge==W?gu:wf;return Ue(le)}function uc(le){if(!le)return le===0?le:0;if(le=Ac(le),le===D||le===-D){var ge=le<0?-1:1;return ge*N}return le===le?le:0}function ci(le){var ge=uc(le),Ue=ge%1;return ge===ge?Ue?ge-Ue:ge:0}function Tc(le){return le?wa(ci(le),0,U):0}function Ac(le){if(typeof le=="number")return le;if(uu(le))return G;if(us(le)){var ge=typeof le.valueOf=="function"?le.valueOf():le;le=us(ge)?ge+"":ge}if(typeof le!="string")return le===0?le:+le;le=vu(le);var Ue=Ft.test(le);return Ue||We.test(le)?rn(le.slice(2),Ue?2:8):It.test(le)?G:+le}function th(le){return Ol(le,Bl(le))}function H0(le){return le?wa(ci(le),-F,F):le===0?le:0}function Go(le){return le==null?"":bu(le)}var Pv=Oc(function(le,ge){if(_c(ge)||Nl(ge)){Ol(ge,Gs(ge),le);return}for(var Ue in ge)Un.call(ge,Ue)&&fn(le,Ue,ge[Ue])}),Gc=Oc(function(le,ge){Ol(ge,Bl(ge),le)}),rp=Oc(function(le,ge,Ue,xt){Ol(ge,Bl(ge),le,xt)}),Id=Oc(function(le,ge,Ue,xt){Ol(ge,Gs(ge),le,xt)}),Rv=Es(ua);function Dv(le,ge){var Ue=Fo(le);return ge==null?Ue:Dn(Ue,ge)}var j0=ao(function(le,ge){le=vr(le);var Ue=-1,xt=ge.length,Kt=xt>2?ge[2]:e;for(Kt&&Yl(ge[0],ge[1],Kt)&&(xt=1);++Ue<xt;)for(var gr=ge[Ue],Xr=Bl(gr),on=-1,Tn=Xr.length;++on<Tn;){var va=Xr[on],ga=le[va];(ga===e||ko(ga,Pn[va])&&!Un.call(le,va))&&(le[va]=gr[va])}return le}),wg=ao(function(le){return le.push(e,mv),rs(W0,e,le)});function zd(le,ge){return Cu(le,bi(ge,3),bo)}function Tg(le,ge){return Cu(le,bi(ge,3),ho)}function Ag(le,ge){return le==null?le:os(le,bi(ge,3),Bl)}function kg(le,ge){return le==null?le:Bo(le,bi(ge,3),Bl)}function Mg(le,ge){return le&&bo(le,bi(ge,3))}function Sg(le,ge){return le&&ho(le,bi(ge,3))}function Xu(le){return le==null?[]:es(le,Gs(le))}function Iv(le){return le==null?[]:es(le,Bl(le))}function zv(le,ge,Ue){var xt=le==null?e:To(le,ge);return xt===e?Ue:xt}function bf(le,ge){return le!=null&&_d(le,ge,Al)}function G0(le,ge){return le!=null&&_d(le,ge,nu)}var Eg=mh(function(le,ge,Ue){ge!=null&&typeof ge.toString!="function"&&(ge=ti.call(ge)),le[ge]=Ue},qy(kc)),np=mh(function(le,ge,Ue){ge!=null&&typeof ge.toString!="function"&&(ge=ti.call(ge)),Un.call(le,ge)?le[ge].push(Ue):le[ge]=[Ue]},bi),Fp=ao(Il);function Gs(le){return Nl(le)?Pr(le):nc(le)}function Bl(le){return Nl(le)?Pr(le,!0):fd(le)}function Np(le,ge){var Ue={};return ge=bi(ge,3),bo(le,function(xt,Kt,gr){pa(Ue,ge(xt,Kt,gr),xt)}),Ue}function Cg(le,ge){var Ue={};return ge=bi(ge,3),bo(le,function(xt,Kt,gr){pa(Ue,Kt,ge(xt,Kt,gr))}),Ue}var Lg=Oc(function(le,ge,Ue){iu(le,ge,Ue)}),W0=Oc(function(le,ge,Ue,xt){iu(le,ge,Ue,xt)}),Pg=Es(function(le,ge){var Ue={};if(le==null)return Ue;var xt=!1;ge=Co(ge,function(gr){return gr=bc(gr,le),xt||(xt=gr.length>1),gr}),Ol(le,Ap(le),Ue),xt&&(Ue=Da(Ue,a|o|u,Tp));for(var Kt=ge.length;Kt--;)fh(Ue,ge[Kt]);return Ue});function Y0(le,ge){return _f(le,Io(bi(ge)))}var X0=Es(function(le,ge){return le==null?{}:av(le,ge)});function _f(le,ge){if(le==null)return{};var Ue=Co(Ap(le),function(xt){return[xt]});return ge=bi(ge),iv(le,Ue,function(xt,Kt){return ge(xt,Kt[0])})}function Rg(le,ge,Ue){ge=bc(ge,le);var xt=-1,Kt=ge.length;for(Kt||(Kt=1,le=e);++xt<Kt;){var gr=le==null?e:le[oc(ge[xt])];gr===e&&(xt=Kt,gr=Ue),le=lc(gr)?gr.call(le):gr}return le}function Z0(le,ge,Ue){return le==null?le:Vh(le,ge,Ue)}function K0(le,ge,Ue,xt){return xt=typeof xt=="function"?xt:e,le==null?le:Vh(le,ge,Ue,xt)}var $0=vv(Gs),Ov=vv(Bl);function Dg(le,ge,Ue){var xt=Ni(le),Kt=xt||Tu(le)||jc(le);if(ge=bi(ge,4),Ue==null){var gr=le&&le.constructor;Kt?Ue=xt?new gr:[]:us(le)?Ue=lc(gr)?Fo(vi(le)):{}:Ue={}}return(Kt?Rs:bo)(le,function(Xr,on,Tn){return ge(Ue,Xr,on,Tn)}),Ue}function Ig(le,ge){return le==null?!0:fh(le,ge)}function J0(le,ge,Ue){return le==null?le:yp(le,ge,Vf(Ue))}function zg(le,ge,Ue,xt){return xt=typeof xt=="function"?xt:e,le==null?le:yp(le,ge,Vf(Ue),xt)}function wf(le){return le==null?[]:mu(le,Gs(le))}function Og(le){return le==null?[]:mu(le,Bl(le))}function Fv(le,ge,Ue){return Ue===e&&(Ue=ge,ge=e),Ue!==e&&(Ue=Ac(Ue),Ue=Ue===Ue?Ue:0),ge!==e&&(ge=Ac(ge),ge=ge===ge?ge:0),wa(Ac(le),ge,Ue)}function Wy(le,ge,Ue){return ge=uc(ge),Ue===e?(Ue=ge,ge=0):Ue=uc(Ue),le=Ac(le),Iu(le,ge,Ue)}function Fg(le,ge,Ue){if(Ue&&typeof Ue!="boolean"&&Yl(le,ge,Ue)&&(ge=Ue=e),Ue===e&&(typeof ge=="boolean"?(Ue=ge,ge=e):typeof le=="boolean"&&(Ue=le,le=e)),le===e&&ge===e?(le=0,ge=1):(le=uc(le),ge===e?(ge=le,le=0):ge=uc(ge)),le>ge){var xt=le;le=ge,ge=xt}if(Ue||le%1||ge%1){var Kt=Ao();return ui(le+Kt*(ge-le+pn("1e-"+((Kt+"").length-1))),ge)}return Uh(le,ge)}var Yy=Fc(function(le,ge,Ue){return ge=ge.toLowerCase(),le+(Ue?Ng(ge):ge)});function Ng(le){return Qy(Go(le).toLowerCase())}function Bg(le){return le=Go(le),le&&le.replace(_t,hl).replace(Rn,"")}function Xy(le,ge,Ue){le=Go(le),ge=bu(ge);var xt=le.length;Ue=Ue===e?xt:wa(ci(Ue),0,xt);var Kt=Ue;return Ue-=ge.length,Ue>=0&&le.slice(Ue,Kt)==ge}function Zy(le){return le=Go(le),le&&rr.test(le)?le.replace(zt,eu):le}function Ky(le){return le=Go(le),le&&et.test(le)?le.replace(Be,"\\$&"):le}var $y=Fc(function(le,ge,Ue){return le+(Ue?"-":"")+ge.toLowerCase()}),Jy=Fc(function(le,ge,Ue){return le+(Ue?" ":"")+ge.toLowerCase()}),Tf=gd("toLowerCase");function Nv(le,ge,Ue){le=Go(le),ge=ci(ge);var xt=ge?tu(le):0;if(!ge||xt>=ge)return le;var Kt=(ge-xt)/2;return Xh(Zi(Kt),Ue)+le+Xh(Ji(Kt),Ue)}function Ug(le,ge,Ue){le=Go(le),ge=ci(ge);var xt=ge?tu(le):0;return ge&&xt<ge?le+Xh(ge-xt,Ue):le}function Od(le,ge,Ue){le=Go(le),ge=ci(ge);var xt=ge?tu(le):0;return ge&&xt<ge?Xh(ge-xt,Ue)+le:le}function Vg(le,ge,Ue){return Ue||ge==null?ge=0:ge&&(ge=+ge),no(Go(le).replace(Me,""),ge||0)}function Y6(le,ge,Ue){return(Ue?Yl(le,ge,Ue):ge===e)?ge=1:ge=ci(ge),ch(Go(le),ge)}function X6(){var le=arguments,ge=Go(le[0]);return le.length<3?ge:ge.replace(le[1],le[2])}var Z6=Fc(function(le,ge,Ue){return le+(Ue?"_":"")+ge.toLowerCase()});function K6(le,ge,Ue){return Ue&&typeof Ue!="number"&&Yl(le,ge,Ue)&&(ge=Ue=e),Ue=Ue===e?U:Ue>>>0,Ue?(le=Go(le),le&&(typeof ge=="string"||ge!=null&&!Ip(ge))&&(ge=bu(ge),!ge&&ps(le))?sf(ds(le),0,Ue):le.split(ge,Ue)):[]}var $6=Fc(function(le,ge,Ue){return le+(Ue?" ":"")+Qy(ge)});function J6(le,ge,Ue){return le=Go(le),Ue=Ue==null?0:wa(ci(Ue),0,le.length),ge=bu(ge),le.slice(Ue,Ue+ge.length)==ge}function Q6(le,ge,Ue){var xt=or.templateSettings;Ue&&Yl(le,ge,Ue)&&(ge=e),le=Go(le),ge=rp({},ge,xt,Zh);var Kt=rp({},ge.imports,xt.imports,Zh),gr=Gs(Kt),Xr=mu(Kt,gr),on,Tn,va=0,ga=ge.interpolate||Mt,Ma="__p += '",Ja=Fr((ge.escape||Mt).source+"|"+ga.source+"|"+(ga===dt?Je:Mt).source+"|"+(ge.evaluate||Mt).source+"|$","g"),Ai="//# sourceURL="+(Un.call(ge,"sourceURL")?(ge.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Za+"]")+`
`;le.replace(Ja,function(ji,Mo,zo,Wc,cc,Yc){return zo||(zo=Wc),Ma+=le.slice(va,Yc).replace(wt,As),Mo&&(on=!0,Ma+=`' +
__e(`+Mo+`) +
'`),cc&&(Tn=!0,Ma+=`';
`+cc+`;
__p += '`),zo&&(Ma+=`' +
((__t = (`+zo+`)) == null ? '' : __t) +
'`),va=Yc+ji.length,ji}),Ma+=`';
`;var Hi=Un.call(ge,"variable")&&ge.variable;if(!Hi)Ma=`with (obj) {
`+Ma+`
}
`;else if(Ge.test(Hi))throw new tr(l);Ma=(Tn?Ma.replace(ft,""):Ma).replace(St,"$1").replace(Wt,"$1;"),Ma="function("+(Hi||"obj")+`) {
`+(Hi?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(on?", __e = _.escape":"")+(Tn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ma+`return __p
}`;var go=j_(function(){return ar(gr,Ai+"return "+Ma).apply(e,Xr)});if(go.source=Ma,Dp(go))throw go;return go}function q6(le){return Go(le).toLowerCase()}function eA(le){return Go(le).toUpperCase()}function tA(le,ge,Ue){if(le=Go(le),le&&(Ue||ge===e))return vu(le);if(!le||!(ge=bu(ge)))return le;var xt=ds(le),Kt=ds(ge),gr=xl(xt,Kt),Xr=Dl(xt,Kt)+1;return sf(xt,gr,Xr).join("")}function rA(le,ge,Ue){if(le=Go(le),le&&(Ue||ge===e))return le.slice(0,tf(le)+1);if(!le||!(ge=bu(ge)))return le;var xt=ds(le),Kt=Dl(xt,ds(ge))+1;return sf(xt,0,Kt).join("")}function nA(le,ge,Ue){if(le=Go(le),le&&(Ue||ge===e))return le.replace(Me,"");if(!le||!(ge=bu(ge)))return le;var xt=ds(le),Kt=xl(xt,ds(ge));return sf(xt,Kt).join("")}function aA(le,ge){var Ue=k,xt=R;if(us(ge)){var Kt="separator"in ge?ge.separator:Kt;Ue="length"in ge?ci(ge.length):Ue,xt="omission"in ge?bu(ge.omission):xt}le=Go(le);var gr=le.length;if(ps(le)){var Xr=ds(le);gr=Xr.length}if(Ue>=gr)return le;var on=Ue-tu(xt);if(on<1)return xt;var Tn=Xr?sf(Xr,0,on).join(""):le.slice(0,on);if(Kt===e)return Tn+xt;if(Xr&&(on+=Tn.length-on),Ip(Kt)){if(le.slice(on).search(Kt)){var va,ga=Tn;for(Kt.global||(Kt=Fr(Kt.source,Go(st.exec(Kt))+"g")),Kt.lastIndex=0;va=Kt.exec(ga);)var Ma=va.index;Tn=Tn.slice(0,Ma===e?on:Ma)}}else if(le.indexOf(bu(Kt),on)!=on){var Ja=Tn.lastIndexOf(Kt);Ja>-1&&(Tn=Tn.slice(0,Ja))}return Tn+xt}function iA(le){return le=Go(le),le&&$t.test(le)?le.replace(Qt,Of):le}var oA=Fc(function(le,ge,Ue){return le+(Ue?" ":"")+ge.toUpperCase()}),Qy=gd("toUpperCase");function H_(le,ge,Ue){return le=Go(le),ge=Ue?e:ge,ge===e?pl(le)?at(le):Ql(le):le.match(ge)||[]}var j_=ao(function(le,ge){try{return rs(le,e,ge)}catch(Ue){return Dp(Ue)?Ue:new tr(Ue)}}),sA=Es(function(le,ge){return Rs(ge,function(Ue){Ue=oc(Ue),pa(le,Ue,Ci(le[Ue],le))}),le});function lA(le){var ge=le==null?0:le.length,Ue=bi();return le=ge?Co(le,function(xt){if(typeof xt[1]!="function")throw new $r(n);return[Ue(xt[0]),xt[1]]}):[],ao(function(xt){for(var Kt=-1;++Kt<ge;){var gr=le[Kt];if(rs(gr[0],this,xt))return rs(gr[1],this,xt)}})}function uA(le){return oi(Da(le,a))}function qy(le){return function(){return le}}function cA(le,ge){return le==null||le!==le?ge:le}var fA=yd(),hA=yd(!0);function kc(le){return le}function ex(le){return zl(typeof le=="function"?le:Da(le,a))}function pA(le){return Ic(Da(le,a))}function dA(le,ge){return Bh(le,Da(ge,a))}var vA=ao(function(le,ge){return function(Ue){return Il(Ue,le,ge)}}),mA=ao(function(le,ge){return function(Ue){return Il(le,Ue,ge)}});function tx(le,ge,Ue){var xt=Gs(ge),Kt=es(ge,xt);Ue==null&&!(us(ge)&&(Kt.length||!xt.length))&&(Ue=ge,ge=le,le=this,Kt=es(ge,Gs(ge)));var gr=!(us(Ue)&&"chain"in Ue)||!!Ue.chain,Xr=lc(le);return Rs(Kt,function(on){var Tn=ge[on];le[on]=Tn,Xr&&(le.prototype[on]=function(){var va=this.__chain__;if(gr||va){var ga=le(this.__wrapped__),Ma=ga.__actions__=Gl(this.__actions__);return Ma.push({func:Tn,args:arguments,thisArg:le}),ga.__chain__=va,ga}return Tn.apply(le,ul([this.value()],arguments))})}),le}function gA(){return Tr._===this&&(Tr._=Xa),this}function rx(){}function yA(le){return le=ci(le),ao(function(ge){return ls(ge,le)})}var xA=_p(Co),bA=_p(Eu),_A=_p(pu);function G_(le){return $h(le)?ql(oc(le)):D0(le)}function wA(le){return function(ge){return le==null?e:To(le,ge)}}var TA=wp(),AA=wp(!0);function nx(){return[]}function ax(){return!1}function kA(){return{}}function MA(){return""}function SA(){return!0}function EA(le,ge){if(le=ci(le),le<1||le>F)return[];var Ue=U,xt=ui(le,U);ge=bi(ge),le-=U;for(var Kt=$s(xt,ge);++Ue<le;)ge(Ue);return Kt}function CA(le){return Ni(le)?Co(le,oc):uu(le)?[le]:Gl(wv(Go(le)))}function LA(le){var ge=++Jn;return Go(le)+ge}var PA=Yh(function(le,ge){return le+ge},0),RA=Wf("ceil"),DA=Yh(function(le,ge){return le/ge},1),IA=Wf("floor");function zA(le){return le&&le.length?ii(le,kc,ru):e}function OA(le,ge){return le&&le.length?ii(le,bi(ge,2),ru):e}function FA(le){return Pu(le,kc)}function NA(le,ge){return Pu(le,bi(ge,2))}function BA(le){return le&&le.length?ii(le,kc,Nf):e}function UA(le,ge){return le&&le.length?ii(le,bi(ge,2),Nf):e}var VA=Yh(function(le,ge){return le*ge},1),HA=Wf("round"),jA=Yh(function(le,ge){return le-ge},0);function GA(le){return le&&le.length?eo(le,kc):0}function WA(le,ge){return le&&le.length?eo(le,bi(ge,2)):0}return or.after=yi,or.ary=ja,or.assign=Pv,or.assignIn=Gc,or.assignInWith=rp,or.assignWith=Id,or.at=Rv,or.before=Wi,or.bind=Ci,or.bindAll=sA,or.bindKey=oo,or.castArray=Ns,or.chain=Ml,or.chunk=Td,or.compact=Av,or.concat=Ad,or.cond=lA,or.conforms=uA,or.constant=qy,or.countBy=ce,or.create=Dv,or.curry=$a,or.curryRight=po,or.debounce=Ho,or.defaults=j0,or.defaultsDeep=wg,or.defer=nl,or.delay=al,or.difference=Sp,or.differenceBy=Th,or.differenceWith=mf,or.drop=$f,or.dropRight=Ah,or.dropRightWhile=Ep,or.dropWhile=kh,or.fill=kv,or.filter=we,or.flatMap=pt,or.flatMapDeep=Et,or.flatMapDepth=Ot,or.flatten=Jf,or.flattenDeep=Y,or.flattenDepth=he,or.flip=Zo,or.flow=fA,or.flowRight=hA,or.fromPairs=ye,or.functions=Xu,or.functionsIn=Iv,or.groupBy=lr,or.initial=De,or.intersection=rt,or.intersectionBy=$e,or.intersectionWith=nt,or.invert=Eg,or.invertBy=np,or.invokeMap=Sr,or.iteratee=ex,or.keyBy=Zr,or.keys=Gs,or.keysIn=Bl,or.map=Br,or.mapKeys=Np,or.mapValues=Cg,or.matches=pA,or.matchesProperty=dA,or.memoize=gs,or.merge=Lg,or.mergeWith=W0,or.method=vA,or.methodOf=mA,or.mixin=tx,or.negate=Io,or.nthArg=yA,or.omit=Pg,or.omitBy=Y0,or.once=Us,or.orderBy=ln,or.over=xA,or.overArgs=Kl,or.overEvery=bA,or.overSome=_A,or.partial=Vs,or.partialRight=$l,or.partition=mn,or.pick=X0,or.pickBy=_f,or.property=G_,or.propertyOf=wA,or.pull=ur,or.pullAll=Rr,or.pullAllBy=ir,or.pullAllWith=hr,or.pullAt=mr,or.range=TA,or.rangeRight=AA,or.rearg=Hs,or.reject=Kn,or.remove=Dr,or.rest=js,or.reverse=yr,or.sampleSize=Pa,or.set=Z0,or.setWith=K0,or.shuffle=Ka,or.slice=kr,or.sortBy=Oa,or.sortedUniq=La,or.sortedUniqBy=da,or.split=K6,or.spread=qi,or.tail=ma,or.take=En,or.takeRight=$n,or.takeRightWhile=ca,or.takeWhile=yn,or.tap=Sl,or.throttle=Eo,or.thru=Zl,or.toArray=_g,or.toPairs=$0,or.toPairsIn=Ov,or.toPath=CA,or.toPlainObject=th,or.transform=Dg,or.unary=Ko,or.union=Hn,or.unionBy=Ha,or.unionWith=gi,or.uniq=Pi,or.uniqBy=mo,or.uniqWith=Do,or.unset=Ig,or.unzip=tl,or.unzipWith=Os,or.update=J0,or.updateWith=zg,or.values=wf,or.valuesIn=Og,or.without=Fs,or.words=H_,or.wrap=so,or.xor=su,or.xorBy=io,or.xorWith=kl,or.zip=lu,or.zipObject=Cp,or.zipObjectDeep=wu,or.zipWith=rl,or.entries=$0,or.entriesIn=Ov,or.extend=Gc,or.extendWith=rp,tx(or,or),or.add=PA,or.attempt=j_,or.camelCase=Yy,or.capitalize=Ng,or.ceil=RA,or.clamp=Fv,or.clone=Fl,or.cloneDeep=Ts,or.cloneDeepWith=ol,or.cloneWith=il,or.conformsTo=$o,or.deburr=Bg,or.defaultTo=cA,or.divide=DA,or.endsWith=Xy,or.eq=ko,or.escape=Zy,or.escapeRegExp=Ky,or.every=xe,or.find=Re,or.findIndex=Mv,or.findKey=zd,or.findLast=Ke,or.findLastIndex=Sv,or.findLastKey=Tg,or.floor=IA,or.forEach=Ht,or.forEachRight=Jt,or.forIn=Ag,or.forInRight=kg,or.forOwn=Mg,or.forOwnRight=Sg,or.get=zv,or.gt=Yu,or.gte=gf,or.has=bf,or.hasIn=G0,or.head=_e,or.identity=kc,or.includes=Ar,or.indexOf=Ee,or.inRange=Wy,or.invoke=Fp,or.isArguments=jo,or.isArray=Ni,or.isArrayBuffer=wc,or.isArrayLike=Nl,or.isArrayLikeObject=ys,or.isBoolean=Lp,or.isBuffer=Tu,or.isDate=Pp,or.isElement=Ev,or.isEmpty=Rp,or.isEqual=Md,or.isEqualWith=Cv,or.isError=Dp,or.isFinite=eh,or.isFunction=lc,or.isInteger=tp,or.isLength=Hc,or.isMap=Sd,or.isMatch=Ed,or.isMatchWith=Cd,or.isNaN=Lv,or.isNative=Ld,or.isNil=Rd,or.isNull=Pd,or.isNumber=Dd,or.isObject=us,or.isObjectLike=Ls,or.isPlainObject=yf,or.isRegExp=Ip,or.isSafeInteger=zp,or.isSet=Op,or.isString=xf,or.isSymbol=uu,or.isTypedArray=jc,or.isUndefined=B0,or.isWeakMap=xg,or.isWeakSet=U0,or.join=mt,or.kebabCase=$y,or.last=Tt,or.lastIndexOf=Vt,or.lowerCase=Jy,or.lowerFirst=Tf,or.lt=bg,or.lte=V0,or.max=zA,or.maxBy=OA,or.mean=FA,or.meanBy=NA,or.min=BA,or.minBy=UA,or.stubArray=nx,or.stubFalse=ax,or.stubObject=kA,or.stubString=MA,or.stubTrue=SA,or.multiply=VA,or.nth=Yt,or.noConflict=gA,or.noop=rx,or.now=Oi,or.pad=Nv,or.padEnd=Ug,or.padStart=Od,or.parseInt=Vg,or.random=Fg,or.reduce=In,or.reduceRight=On,or.repeat=Y6,or.replace=X6,or.result=Rg,or.round=HA,or.runInContext=ct,or.sample=xa,or.size=Ba,or.snakeCase=Z6,or.some=ri,or.sortedIndex=gn,or.sortedIndexBy=vn,or.sortedIndexOf=hn,or.sortedLastIndex=sn,or.sortedLastIndexBy=Xn,or.sortedLastIndexOf=ea,or.startCase=$6,or.startsWith=J6,or.subtract=jA,or.sum=GA,or.sumBy=WA,or.template=Q6,or.times=EA,or.toFinite=uc,or.toInteger=ci,or.toLength=Tc,or.toLower=q6,or.toNumber=Ac,or.toSafeInteger=H0,or.toString=Go,or.toUpper=eA,or.trim=tA,or.trimEnd=rA,or.trimStart=nA,or.truncate=aA,or.unescape=iA,or.uniqueId=LA,or.upperCase=oA,or.upperFirst=Qy,or.each=Ht,or.eachRight=Jt,or.first=_e,tx(or,function(){var le={};return bo(or,function(ge,Ue){Un.call(or.prototype,Ue)||(le[Ue]=ge)}),le}(),{chain:!1}),or.VERSION=v,Rs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(le){or[le].placeholder=or}),Rs(["drop","take"],function(le,ge){mi.prototype[le]=function(Ue){Ue=Ue===e?1:ni(ci(Ue),0);var xt=this.__filtered__&&!ge?new mi(this):this.clone();return xt.__filtered__?xt.__takeCount__=ui(Ue,xt.__takeCount__):xt.__views__.push({size:ui(Ue,U),type:le+(xt.__dir__<0?"Right":"")}),xt},mi.prototype[le+"Right"]=function(Ue){return this.reverse()[le](Ue).reverse()}}),Rs(["filter","map","takeWhile"],function(le,ge){var Ue=ge+1,xt=Ue==E||Ue==C;mi.prototype[le]=function(Kt){var gr=this.clone();return gr.__iteratees__.push({iteratee:bi(Kt,3),type:Ue}),gr.__filtered__=gr.__filtered__||xt,gr}}),Rs(["head","last"],function(le,ge){var Ue="take"+(ge?"Right":"");mi.prototype[le]=function(){return this[Ue](1).value()[0]}}),Rs(["initial","tail"],function(le,ge){var Ue="drop"+(ge?"":"Right");mi.prototype[le]=function(){return this.__filtered__?new mi(this):this[Ue](1)}}),mi.prototype.compact=function(){return this.filter(kc)},mi.prototype.find=function(le){return this.filter(le).head()},mi.prototype.findLast=function(le){return this.reverse().find(le)},mi.prototype.invokeMap=ao(function(le,ge){return typeof le=="function"?new mi(this):this.map(function(Ue){return Il(Ue,le,ge)})}),mi.prototype.reject=function(le){return this.filter(Io(bi(le)))},mi.prototype.slice=function(le,ge){le=ci(le);var Ue=this;return Ue.__filtered__&&(le>0||ge<0)?new mi(Ue):(le<0?Ue=Ue.takeRight(-le):le&&(Ue=Ue.drop(le)),ge!==e&&(ge=ci(ge),Ue=ge<0?Ue.dropRight(-ge):Ue.take(ge-le)),Ue)},mi.prototype.takeRightWhile=function(le){return this.reverse().takeWhile(le).reverse()},mi.prototype.toArray=function(){return this.take(U)},bo(mi.prototype,function(le,ge){var Ue=/^(?:filter|find|map|reject)|While$/.test(ge),xt=/^(?:head|last)$/.test(ge),Kt=or[xt?"take"+(ge=="last"?"Right":""):ge],gr=xt||/^find/.test(ge);Kt&&(or.prototype[ge]=function(){var Xr=this.__wrapped__,on=xt?[1]:arguments,Tn=Xr instanceof mi,va=on[0],ga=Tn||Ni(Xr),Ma=function(Mo){var zo=Kt.apply(or,ul([Mo],on));return xt&&Ja?zo[0]:zo};ga&&Ue&&typeof va=="function"&&va.length!=1&&(Tn=ga=!1);var Ja=this.__chain__,Ai=!!this.__actions__.length,Hi=gr&&!Ja,go=Tn&&!Ai;if(!gr&&ga){Xr=go?Xr:new mi(this);var ji=le.apply(Xr,on);return ji.__actions__.push({func:Zl,args:[Ma],thisArg:e}),new Di(ji,Ja)}return Hi&&go?le.apply(this,on):(ji=this.thru(Ma),Hi?xt?ji.value()[0]:ji.value():ji)})}),Rs(["pop","push","shift","sort","splice","unshift"],function(le){var ge=Nn[le],Ue=/^(?:push|sort|unshift)$/.test(le)?"tap":"thru",xt=/^(?:pop|shift)$/.test(le);or.prototype[le]=function(){var Kt=arguments;if(xt&&!this.__chain__){var gr=this.value();return ge.apply(Ni(gr)?gr:[],Kt)}return this[Ue](function(Xr){return ge.apply(Ni(Xr)?Xr:[],Kt)})}}),bo(mi.prototype,function(le,ge){var Ue=or[ge];if(Ue){var xt=Ue.name+"";Un.call(Qn,xt)||(Qn[xt]=[]),Qn[xt].push({name:ge,func:Ue})}}),Qn[bp(e,p).name]=[{name:"wrapper",func:e}],mi.prototype.clone=Is,mi.prototype.reverse=_l,mi.prototype.value=dl,or.prototype.at=Qf,or.prototype.chain=qf,or.prototype.commit=Xo,or.prototype.next=sc,or.prototype.plant=w,or.prototype.reverse=O,or.prototype.toJSON=or.prototype.valueOf=or.prototype.value=Z,or.prototype.first=or.prototype.head,li&&(or.prototype[li]=kd),or},gt=Qe();Vn?((Vn.exports=gt)._=gt,Fn._=gt):Tr._=gt}).call(Ys)})(O9,J1);var a6={},i6={};(function(x){function P(m){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},P(m)}Object.defineProperty(x,"__esModule",{value:!0}),x.default=b;var e=n(_n),v=M(Fb);function M(m){return m&&m.__esModule?m:{default:m}}function r(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,T=new WeakMap;return(r=function(A){return A?T:_})(m)}function n(m,_){if(!_&&m&&m.__esModule)return m;if(m===null||P(m)!=="object"&&typeof m!="function")return{default:m};var T=r(_);if(T&&T.has(m))return T.get(m);var g={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in m)if(k!=="default"&&Object.prototype.hasOwnProperty.call(m,k)){var R=A?Object.getOwnPropertyDescriptor(m,k):null;R&&(R.get||R.set)?Object.defineProperty(g,k,R):g[k]=m[k]}return g.default=m,T&&T.set(m,g),g}function l(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}function c(m,_){for(var T=0;T<_.length;T++){var g=_[T];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}function t(m,_,T){return _&&c(m.prototype,_),T&&c(m,T),Object.defineProperty(m,"prototype",{writable:!1}),m}function f(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(_&&_.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),_&&a(m,_)}function a(m,_){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,A){return g.__proto__=A,g},a(m,_)}function o(m){var _=i();return function(){var g=s(m),A;if(_){var k=s(this).constructor;A=Reflect.construct(g,arguments,k)}else A=g.apply(this,arguments);return u(this,A)}}function u(m,_){if(_&&(P(_)==="object"||typeof _=="function"))return _;if(_!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h(m)}function h(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function i(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function s(m){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(T){return T.__proto__||Object.getPrototypeOf(T)},s(m)}var p=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","BeforeHover","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Relayouting","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","SunburstClick","Transitioning","TransitionInterrupted","Unhover","WebGlContextLost"],d=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_relayouting","plotly_doubleclick","plotly_animated","plotly_sunburstclick"],y=typeof window<"u";function b(m){var _=function(T){f(A,T);var g=o(A);function A(k){var R;return l(this,A),R=g.call(this,k),R.p=Promise.resolve(),R.resizeHandler=null,R.handlers={},R.syncWindowResize=R.syncWindowResize.bind(h(R)),R.syncEventHandlers=R.syncEventHandlers.bind(h(R)),R.attachUpdateEvents=R.attachUpdateEvents.bind(h(R)),R.getRef=R.getRef.bind(h(R)),R.handleUpdate=R.handleUpdate.bind(h(R)),R.figureCallback=R.figureCallback.bind(h(R)),R.updatePlotly=R.updatePlotly.bind(h(R)),R}return t(A,[{key:"updatePlotly",value:function(R,L,z){var E=this;this.p=this.p.then(function(){if(!E.unmounting){if(!E.el)throw new Error("Missing element reference");return m.react(E.el,{data:E.props.data,layout:E.props.layout,config:E.props.config,frames:E.props.frames})}}).then(function(){E.unmounting||(E.syncWindowResize(R),E.syncEventHandlers(),E.figureCallback(L),z&&E.attachUpdateEvents())}).catch(function(S){E.props.onError&&E.props.onError(S)})}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(R){this.unmounting=!1;var L=R.frames&&R.frames.length?R.frames.length:0,z=this.props.frames&&this.props.frames.length?this.props.frames.length:0,E=!(R.layout===this.props.layout&&R.data===this.props.data&&R.config===this.props.config&&z===L),S=R.revision!==void 0,C=R.revision!==this.props.revision;!E&&(!S||S&&!C)||this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&y&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),m.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var R=this;!this.el||!this.el.removeListener||d.forEach(function(L){R.el.on(L,R.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var R=this;!this.el||!this.el.removeListener||d.forEach(function(L){R.el.removeListener(L,R.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(R){if(typeof R=="function"){var L=this.el,z=L.data,E=L.layout,S=this.el._transitionData?this.el._transitionData._frames:null,C={data:z,layout:E,frames:S};R(C,this.el)}}},{key:"syncWindowResize",value:function(R){var L=this;y&&(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return m.Plots.resize(L.el)},window.addEventListener("resize",this.resizeHandler),R&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(R){this.el=R,this.props.debug&&y&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var R=this;p.forEach(function(L){var z=R.props["on"+L],E=R.handlers[L],S=!!E;z&&!S?R.addEventHandler(L,z):!z&&S?R.removeEventHandler(L):z&&S&&z!==E&&(R.removeEventHandler(L),R.addEventHandler(L,z))})}},{key:"addEventHandler",value:function(R,L){this.handlers[R]=L,this.el.on(this.getPlotlyEventName(R),this.handlers[R])}},{key:"removeEventHandler",value:function(R){this.el.removeListener(this.getPlotlyEventName(R),this.handlers[R]),delete this.handlers[R]}},{key:"getPlotlyEventName",value:function(R){return"plotly_"+R.toLowerCase()}},{key:"render",value:function(){return e.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),A}(e.Component);return _.propTypes={data:v.default.arrayOf(v.default.object),config:v.default.object,layout:v.default.object,frames:v.default.arrayOf(v.default.object),revision:v.default.number,onInitialized:v.default.func,onPurge:v.default.func,onError:v.default.func,onUpdate:v.default.func,debug:v.default.bool,style:v.default.object,className:v.default.string,useResizeHandler:v.default.bool,divId:v.default.string},p.forEach(function(T){_.propTypes["on"+T]=v.default.func}),_.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},_}})(i6);function n1(x){throw new Error('Could not dynamically require "'+x+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xb={},F9={get exports(){return Xb},set exports(x){Xb=x}};(function(x,P){(function(e){x.exports=e()})(function(){return function(){function e(v,M,r){function n(t,f){if(!M[t]){if(!v[t]){var a=typeof n1=="function"&&n1;if(!f&&a)return a(t,!0);if(l)return l(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var u=M[t]={exports:{}};v[t][0].call(u.exports,function(h){var i=v[t][1][h];return n(i||h)},u,u.exports,e,v,M,r)}return M[t].exports}for(var l=typeof n1=="function"&&n1,c=0;c<r.length;c++)n(r[c]);return n}return e}()({1:[function(e,v,M){var r=e("../src/lib"),n={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans', verdana, arial, sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var l in n){var c=l.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");r.addStyleRule(c,n[l])}},{"../src/lib":778}],2:[function(e,v,M){v.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":1365}],3:[function(e,v,M){v.exports=e("../src/traces/bar")},{"../src/traces/bar":929}],4:[function(e,v,M){v.exports=e("../src/traces/barpolar")},{"../src/traces/barpolar":942}],5:[function(e,v,M){v.exports=e("../src/traces/box")},{"../src/traces/box":952}],6:[function(e,v,M){v.exports=e("../src/components/calendars")},{"../src/components/calendars":641}],7:[function(e,v,M){v.exports=e("../src/traces/candlestick")},{"../src/traces/candlestick":961}],8:[function(e,v,M){v.exports=e("../src/traces/carpet")},{"../src/traces/carpet":980}],9:[function(e,v,M){v.exports=e("../src/traces/choropleth")},{"../src/traces/choropleth":994}],10:[function(e,v,M){v.exports=e("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":1001}],11:[function(e,v,M){v.exports=e("../src/traces/cone")},{"../src/traces/cone":1007}],12:[function(e,v,M){v.exports=e("../src/traces/contour")},{"../src/traces/contour":1022}],13:[function(e,v,M){v.exports=e("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":1033}],14:[function(e,v,M){v.exports=e("../src/core")},{"../src/core":755}],15:[function(e,v,M){v.exports=e("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":1041}],16:[function(e,v,M){v.exports=e("../src/transforms/filter")},{"../src/transforms/filter":1366}],17:[function(e,v,M){v.exports=e("../src/traces/funnel")},{"../src/traces/funnel":1051}],18:[function(e,v,M){v.exports=e("../src/traces/funnelarea")},{"../src/traces/funnelarea":1060}],19:[function(e,v,M){v.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":1367}],20:[function(e,v,M){v.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":1073}],21:[function(e,v,M){v.exports=e("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":1083}],22:[function(e,v,M){v.exports=e("../src/traces/histogram")},{"../src/traces/histogram":1095}],23:[function(e,v,M){v.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":1101}],24:[function(e,v,M){v.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1105}],25:[function(e,v,M){v.exports=e("../src/traces/image")},{"../src/traces/image":1113}],26:[function(e,v,M){var r=e("./core");r.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./contour"),e("./scatterternary"),e("./violin"),e("./funnel"),e("./waterfall"),e("./image"),e("./pie"),e("./sunburst"),e("./treemap"),e("./funnelarea"),e("./scatter3d"),e("./surface"),e("./isosurface"),e("./volume"),e("./mesh3d"),e("./cone"),e("./streamtube"),e("./scattergeo"),e("./choropleth"),e("./scattergl"),e("./splom"),e("./pointcloud"),e("./heatmapgl"),e("./parcoords"),e("./parcats"),e("./scattermapbox"),e("./choroplethmapbox"),e("./densitymapbox"),e("./sankey"),e("./indicator"),e("./table"),e("./carpet"),e("./scattercarpet"),e("./contourcarpet"),e("./ohlc"),e("./candlestick"),e("./scatterpolar"),e("./scatterpolargl"),e("./barpolar")]),r.register([e("./aggregate"),e("./filter"),e("./groupby"),e("./sort")]),r.register([e("./calendars")]),v.exports=r},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./image":25,"./indicator":27,"./isosurface":28,"./mesh3d":29,"./ohlc":30,"./parcats":31,"./parcoords":32,"./pie":33,"./pointcloud":34,"./sankey":35,"./scatter3d":36,"./scattercarpet":37,"./scattergeo":38,"./scattergl":39,"./scattermapbox":40,"./scatterpolar":41,"./scatterpolargl":42,"./scatterternary":43,"./sort":44,"./splom":45,"./streamtube":46,"./sunburst":47,"./surface":48,"./table":49,"./treemap":50,"./violin":51,"./volume":52,"./waterfall":53}],27:[function(e,v,M){v.exports=e("../src/traces/indicator")},{"../src/traces/indicator":1121}],28:[function(e,v,M){v.exports=e("../src/traces/isosurface")},{"../src/traces/isosurface":1127}],29:[function(e,v,M){v.exports=e("../src/traces/mesh3d")},{"../src/traces/mesh3d":1132}],30:[function(e,v,M){v.exports=e("../src/traces/ohlc")},{"../src/traces/ohlc":1137}],31:[function(e,v,M){v.exports=e("../src/traces/parcats")},{"../src/traces/parcats":1146}],32:[function(e,v,M){v.exports=e("../src/traces/parcoords")},{"../src/traces/parcoords":1156}],33:[function(e,v,M){v.exports=e("../src/traces/pie")},{"../src/traces/pie":1167}],34:[function(e,v,M){v.exports=e("../src/traces/pointcloud")},{"../src/traces/pointcloud":1176}],35:[function(e,v,M){v.exports=e("../src/traces/sankey")},{"../src/traces/sankey":1182}],36:[function(e,v,M){v.exports=e("../src/traces/scatter3d")},{"../src/traces/scatter3d":1220}],37:[function(e,v,M){v.exports=e("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1227}],38:[function(e,v,M){v.exports=e("../src/traces/scattergeo")},{"../src/traces/scattergeo":1235}],39:[function(e,v,M){v.exports=e("../src/traces/scattergl")},{"../src/traces/scattergl":1248}],40:[function(e,v,M){v.exports=e("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1258}],41:[function(e,v,M){v.exports=e("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1266}],42:[function(e,v,M){v.exports=e("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1273}],43:[function(e,v,M){v.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":1281}],44:[function(e,v,M){v.exports=e("../src/transforms/sort")},{"../src/transforms/sort":1369}],45:[function(e,v,M){v.exports=e("../src/traces/splom")},{"../src/traces/splom":1290}],46:[function(e,v,M){v.exports=e("../src/traces/streamtube")},{"../src/traces/streamtube":1298}],47:[function(e,v,M){v.exports=e("../src/traces/sunburst")},{"../src/traces/sunburst":1306}],48:[function(e,v,M){v.exports=e("../src/traces/surface")},{"../src/traces/surface":1315}],49:[function(e,v,M){v.exports=e("../src/traces/table")},{"../src/traces/table":1323}],50:[function(e,v,M){v.exports=e("../src/traces/treemap")},{"../src/traces/treemap":1332}],51:[function(e,v,M){v.exports=e("../src/traces/violin")},{"../src/traces/violin":1344}],52:[function(e,v,M){v.exports=e("../src/traces/volume")},{"../src/traces/volume":1352}],53:[function(e,v,M){v.exports=e("../src/traces/waterfall")},{"../src/traces/waterfall":1360}],54:[function(e,v,M){v.exports=a;var r=e("turntable-camera-controller"),n=e("orbit-camera-controller"),l=e("matrix-camera-controller");function c(o,u){this._controllerNames=Object.keys(o),this._controllerList=this._controllerNames.map(function(h){return o[h]}),this._mode=u,this._active=o[u],this._active||(this._mode="turntable",this._active=o.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var t=c.prototype,f=[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]];f.forEach(function(o){for(var u=o[0],h=[],i=0;i<o[1];++i)h.push("a"+i);var s="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+o[0]+"("+h.join()+")}";t[u]=Function.apply(null,h.concat(s))}),t.recalcMatrix=function(o){this._active.recalcMatrix(o)},t.getDistance=function(o){return this._active.getDistance(o)},t.getDistanceLimits=function(o){return this._active.getDistanceLimits(o)},t.lastT=function(){return this._active.lastT()},t.setMode=function(o){if(o!==this._mode){var u=this._controllerNames.indexOf(o);if(!(u<0)){var h=this._active,i=this._controllerList[u],s=Math.max(h.lastT(),i.lastT());h.recalcMatrix(s),i.setMatrix(s,h.computedMatrix),this._active=i,this._mode=o,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},t.getMode=function(){return this._mode};function a(o){o=o||{};var u=o.eye||[0,0,1],h=o.center||[0,0,0],i=o.up||[0,1,0],s=o.distanceLimits||[0,1/0],p=o.mode||"turntable",d=r(),y=n(),b=l();return d.setDistanceLimits(s[0],s[1]),d.lookAt(0,u,h,i),y.setDistanceLimits(s[0],s[1]),y.lookAt(0,u,h,i),b.setDistanceLimits(s[0],s[1]),b.lookAt(0,u,h,i),new c({turntable:d,orbit:y,matrix:b},p)}},{"matrix-camera-controller":480,"orbit-camera-controller":501,"turntable-camera-controller":581}],55:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?n(M,e("d3-array"),e("d3-collection"),e("d3-shape"),e("elementary-circuits-directed-graph")):n(r.d3=r.d3||{},r.d3,r.d3,r.d3,null)})(this,function(r,n,l,c,t){t=t&&t.hasOwnProperty("default")?t.default:t;function f(be){return be.target.depth}function a(be){return be.depth}function o(be,ke){return ke-1-be.height}function u(be,ke){return be.sourceLinks.length?be.depth:ke-1}function h(be){return be.targetLinks.length?be.depth:be.sourceLinks.length?n.min(be.sourceLinks,f)-1:0}function i(be){return function(){return be}}var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(be){return typeof be}:function(be){return be&&typeof Symbol=="function"&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be};function p(be,ke){return y(be.source,ke.source)||be.index-ke.index}function d(be,ke){return y(be.target,ke.target)||be.index-ke.index}function y(be,ke){return be.partOfCycle===ke.partOfCycle?be.y0-ke.y0:be.circularLinkType==="top"||ke.circularLinkType==="bottom"?-1:1}function b(be){return be.value}function m(be){return(be.y0+be.y1)/2}function _(be){return m(be.source)}function T(be){return m(be.target)}function g(be){return be.index}function A(be){return be.nodes}function k(be){return be.links}function R(be,ke){var Pe=be.get(ke);if(!Pe)throw new Error("missing: "+ke);return Pe}function L(be,ke){return ke(be)}var z=25,E=10,S=.3;function C(){var be=0,ke=0,Pe=1,je=1,ze=24,Ze,tt=g,Ce=u,Ae=A,Ne=k,qe=32,At=2,kt,Ve=null;function ft(){var Lt={nodes:Ae.apply(null,arguments),links:Ne.apply(null,arguments)};St(Lt),D(Lt,tt,Ve),Wt(Lt),$t(Lt),F(Lt,tt),rr(Lt,qe,tt),Pt(Lt);for(var dt=4,lt=0;lt<dt;lt++)fe(Lt,je,tt),de(Lt,je,tt),re(Lt,ke,je,tt),fe(Lt,je,tt),de(Lt,je,tt);return me(Lt,ke,je),B(Lt,At,je,tt),Lt}ft.nodeId=function(Lt){return arguments.length?(tt=typeof Lt=="function"?Lt:i(Lt),ft):tt},ft.nodeAlign=function(Lt){return arguments.length?(Ce=typeof Lt=="function"?Lt:i(Lt),ft):Ce},ft.nodeWidth=function(Lt){return arguments.length?(ze=+Lt,ft):ze},ft.nodePadding=function(Lt){return arguments.length?(Ze=+Lt,ft):Ze},ft.nodes=function(Lt){return arguments.length?(Ae=typeof Lt=="function"?Lt:i(Lt),ft):Ae},ft.links=function(Lt){return arguments.length?(Ne=typeof Lt=="function"?Lt:i(Lt),ft):Ne},ft.size=function(Lt){return arguments.length?(be=ke=0,Pe=+Lt[0],je=+Lt[1],ft):[Pe-be,je-ke]},ft.extent=function(Lt){return arguments.length?(be=+Lt[0][0],Pe=+Lt[1][0],ke=+Lt[0][1],je=+Lt[1][1],ft):[[be,ke],[Pe,je]]},ft.iterations=function(Lt){return arguments.length?(qe=+Lt,ft):qe},ft.circularLinkGap=function(Lt){return arguments.length?(At=+Lt,ft):At},ft.nodePaddingRatio=function(Lt){return arguments.length?(kt=+Lt,ft):kt},ft.sortNodes=function(Lt){return arguments.length?(Ve=Lt,ft):Ve},ft.update=function(Lt){return F(Lt,tt),Pt(Lt),Lt.links.forEach(function(dt){dt.circular&&(dt.circularLinkType=dt.y0+dt.y1<je?"top":"bottom",dt.source.circularLinkType=dt.circularLinkType,dt.target.circularLinkType=dt.circularLinkType)}),fe(Lt,je,tt,!1),de(Lt,je,tt),B(Lt,At,je,tt),Lt};function St(Lt){Lt.nodes.forEach(function(lt,Te){lt.index=Te,lt.sourceLinks=[],lt.targetLinks=[]});var dt=l.map(Lt.nodes,tt);return Lt.links.forEach(function(lt,Te){lt.index=Te;var Le=lt.source,Be=lt.target;(typeof Le>"u"?"undefined":s(Le))!=="object"&&(Le=lt.source=R(dt,Le)),(typeof Be>"u"?"undefined":s(Be))!=="object"&&(Be=lt.target=R(dt,Be)),Le.sourceLinks.push(lt),Be.targetLinks.push(lt)}),Lt}function Wt(Lt){Lt.nodes.forEach(function(dt){dt.partOfCycle=!1,dt.value=Math.max(n.sum(dt.sourceLinks,b),n.sum(dt.targetLinks,b)),dt.sourceLinks.forEach(function(lt){lt.circular&&(dt.partOfCycle=!0,dt.circularLinkType=lt.circularLinkType)}),dt.targetLinks.forEach(function(lt){lt.circular&&(dt.partOfCycle=!0,dt.circularLinkType=lt.circularLinkType)})})}function Qt(Lt){var dt=0,lt=0,Te=0,Le=0,Be=n.max(Lt.nodes,function(et){return et.column});return Lt.links.forEach(function(et){et.circular&&(et.circularLinkType=="top"?dt=dt+et.width:lt=lt+et.width,et.target.column==0&&(Le=Le+et.width),et.source.column==Be&&(Te=Te+et.width))}),dt=dt>0?dt+z+E:dt,lt=lt>0?lt+z+E:lt,Te=Te>0?Te+z+E:Te,Le=Le>0?Le+z+E:Le,{top:dt,bottom:lt,left:Le,right:Te}}function zt(Lt,dt){var lt=n.max(Lt.nodes,function(He){return He.column}),Te=Pe-be,Le=je-ke,Be=Te+dt.right+dt.left,et=Le+dt.top+dt.bottom,Me=Te/Be,Ie=Le/et;return be=be*Me+dt.left,Pe=dt.right==0?Pe:Pe*Me,ke=ke*Ie+dt.top,je=je*Ie,Lt.nodes.forEach(function(He){He.x0=be+He.column*((Pe-be-ze)/lt),He.x1=He.x0+ze}),Ie}function $t(Lt){var dt,lt,Te;for(dt=Lt.nodes,lt=[],Te=0;dt.length;++Te,dt=lt,lt=[])dt.forEach(function(Le){Le.depth=Te,Le.sourceLinks.forEach(function(Be){lt.indexOf(Be.target)<0&&!Be.circular&&lt.push(Be.target)})});for(dt=Lt.nodes,lt=[],Te=0;dt.length;++Te,dt=lt,lt=[])dt.forEach(function(Le){Le.height=Te,Le.targetLinks.forEach(function(Be){lt.indexOf(Be.source)<0&&!Be.circular&&lt.push(Be.source)})});Lt.nodes.forEach(function(Le){Le.column=Math.floor(Ce.call(null,Le,Te))})}function rr(Lt,dt,lt){var Te=l.nest().key(function(He){return He.column}).sortKeys(n.ascending).entries(Lt.nodes).map(function(He){return He.values});et(lt),Ie();for(var Le=1,Be=dt;Be>0;--Be)Me(Le*=.99,lt),Ie();function et(He){if(kt){var Xe=1/0;Te.forEach(function(ot){var Je=je*kt/(ot.length+1);Xe=Je<Xe?Je:Xe}),Ze=Xe}var ht=n.min(Te,function(ot){return(je-ke-(ot.length-1)*Ze)/n.sum(ot,b)});ht=ht*S,Lt.links.forEach(function(ot){ot.width=ot.value*ht});var it=Qt(Lt),Ge=zt(Lt,it);ht=ht*Ge,Lt.links.forEach(function(ot){ot.width=ot.value*ht}),Te.forEach(function(ot){var Je=ot.length;ot.forEach(function(st,It){st.depth==Te.length-1&&Je==1||st.depth==0&&Je==1?(st.y0=je/2-st.value*ht,st.y1=st.y0+st.value*ht):st.partOfCycle?U(st,He)==0?(st.y0=je/2+It,st.y1=st.y0+st.value*ht):st.circularLinkType=="top"?(st.y0=ke+It,st.y1=st.y0+st.value*ht):(st.y0=je-st.value*ht-It,st.y1=st.y0+st.value*ht):it.top==0||it.bottom==0?(st.y0=(je-ke)/Je*It,st.y1=st.y0+st.value*ht):(st.y0=(je-ke)/2-Je/2+It,st.y1=st.y0+st.value*ht)})})}function Me(He,Xe){var ht=Te.length;Te.forEach(function(it){var Ge=it.length,ot=it[0].depth;it.forEach(function(Je){var st;if((Je.sourceLinks.length||Je.targetLinks.length)&&!(Je.partOfCycle&&U(Je,Xe)>0))if(ot==0&&Ge==1)st=Je.y1-Je.y0,Je.y0=je/2-st/2,Je.y1=je/2+st/2;else if(ot==ht-1&&Ge==1)st=Je.y1-Je.y0,Je.y0=je/2-st/2,Je.y1=je/2+st/2;else{var It=0,Ft=n.mean(Je.sourceLinks,T),nr=n.mean(Je.targetLinks,_);Ft&&nr?It=(Ft+nr)/2:It=Ft||nr;var We=(It-m(Je))*He;Je.y0+=We,Je.y1+=We}})})}function Ie(){Te.forEach(function(He){var Xe,ht,it=ke,Ge=He.length,ot;for(He.sort(y),ot=0;ot<Ge;++ot)Xe=He[ot],ht=it-Xe.y0,ht>0&&(Xe.y0+=ht,Xe.y1+=ht),it=Xe.y1+Ze;if(ht=it-Ze-je,ht>0)for(it=Xe.y0-=ht,Xe.y1-=ht,ot=Ge-2;ot>=0;--ot)Xe=He[ot],ht=Xe.y1+Ze-it,ht>0&&(Xe.y0-=ht,Xe.y1-=ht),it=Xe.y0})}}function Pt(Lt){Lt.nodes.forEach(function(dt){dt.sourceLinks.sort(d),dt.targetLinks.sort(p)}),Lt.nodes.forEach(function(dt){var lt=dt.y0,Te=lt,Le=dt.y1,Be=Le;dt.sourceLinks.forEach(function(et){et.circular?(et.y0=Le-et.width/2,Le=Le-et.width):(et.y0=lt+et.width/2,lt+=et.width)}),dt.targetLinks.forEach(function(et){et.circular?(et.y1=Be-et.width/2,Be=Be-et.width):(et.y1=Te+et.width/2,Te+=et.width)})})}return ft}function D(be,ke,Pe){var je=0;if(Pe===null){for(var ze=[],Ze=0;Ze<be.links.length;Ze++){var tt=be.links[Ze],Ce=tt.source.index,Ae=tt.target.index;ze[Ce]||(ze[Ce]=[]),ze[Ae]||(ze[Ae]=[]),ze[Ce].indexOf(Ae)===-1&&ze[Ce].push(Ae)}var Ne=t(ze);Ne.sort(function(Ve,ft){return Ve.length-ft.length});var qe={};for(Ze=0;Ze<Ne.length;Ze++){var At=Ne[Ze],kt=At.slice(-2);qe[kt[0]]||(qe[kt[0]]={}),qe[kt[0]][kt[1]]=!0}be.links.forEach(function(Ve){var ft=Ve.target.index,St=Ve.source.index;ft===St||qe[St]&&qe[St][ft]?(Ve.circular=!0,Ve.circularLinkID=je,je=je+1):Ve.circular=!1})}else be.links.forEach(function(Ve){Ve.source[Pe]<Ve.target[Pe]?Ve.circular=!1:(Ve.circular=!0,Ve.circularLinkID=je,je=je+1)})}function F(be,ke){var Pe=0,je=0;be.links.forEach(function(ze){ze.circular&&(ze.source.circularLinkType||ze.target.circularLinkType?ze.circularLinkType=ze.source.circularLinkType?ze.source.circularLinkType:ze.target.circularLinkType:ze.circularLinkType=Pe<je?"top":"bottom",ze.circularLinkType=="top"?Pe=Pe+1:je=je+1,be.nodes.forEach(function(Ze){(L(Ze,ke)==L(ze.source,ke)||L(Ze,ke)==L(ze.target,ke))&&(Ze.circularLinkType=ze.circularLinkType)}))}),be.links.forEach(function(ze){ze.circular&&(ze.source.circularLinkType==ze.target.circularLinkType&&(ze.circularLinkType=ze.source.circularLinkType),ue(ze,ke)&&(ze.circularLinkType=ze.source.circularLinkType))})}function N(be){var ke=Math.abs(be.y1-be.y0),Pe=Math.abs(be.target.x0-be.source.x1);return Math.atan(Pe/ke)}function G(be,ke){return be.source.column<ke.target.column?!1:!(be.target.column>ke.source.column)}function U(be,ke){var Pe=0;be.sourceLinks.forEach(function(ze){Pe=ze.circular&&!ue(ze,ke)?Pe+1:Pe});var je=0;return be.targetLinks.forEach(function(ze){je=ze.circular&&!ue(ze,ke)?je+1:je}),Pe+je}function X(be){var ke=be.source.sourceLinks,Pe=0;ke.forEach(function(Ze){Pe=Ze.circular?Pe+1:Pe});var je=be.target.targetLinks,ze=0;return je.forEach(function(Ze){ze=Ze.circular?ze+1:ze}),!(Pe>1||ze>1)}function I(be,ke,Pe){return be.sort(H),be.forEach(function(je,ze){var Ze=0;if(ue(je,Pe)&&X(je))je.circularPathData.verticalBuffer=Ze+je.width/2;else{var tt=0;for(tt;tt<ze;tt++)if(G(be[ze],be[tt])){var Ce=be[tt].circularPathData.verticalBuffer+be[tt].width/2+ke;Ze=Ce>Ze?Ce:Ze}je.circularPathData.verticalBuffer=Ze+je.width/2}}),be}function B(be,ke,Pe,je){var ze=5,Ze=n.min(be.links,function(Ae){return Ae.source.y0});be.links.forEach(function(Ae){Ae.circular&&(Ae.circularPathData={})});var tt=be.links.filter(function(Ae){return Ae.circularLinkType=="top"});I(tt,ke,je);var Ce=be.links.filter(function(Ae){return Ae.circularLinkType=="bottom"});I(Ce,ke,je),be.links.forEach(function(Ae){if(Ae.circular){if(Ae.circularPathData.arcRadius=Ae.width+E,Ae.circularPathData.leftNodeBuffer=ze,Ae.circularPathData.rightNodeBuffer=ze,Ae.circularPathData.sourceWidth=Ae.source.x1-Ae.source.x0,Ae.circularPathData.sourceX=Ae.source.x0+Ae.circularPathData.sourceWidth,Ae.circularPathData.targetX=Ae.target.x0,Ae.circularPathData.sourceY=Ae.y0,Ae.circularPathData.targetY=Ae.y1,ue(Ae,je)&&X(Ae))Ae.circularPathData.leftSmallArcRadius=E+Ae.width/2,Ae.circularPathData.leftLargeArcRadius=E+Ae.width/2,Ae.circularPathData.rightSmallArcRadius=E+Ae.width/2,Ae.circularPathData.rightLargeArcRadius=E+Ae.width/2,Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Ae.source.y1+z+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=Ae.source.y0-z-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius);else{var Ne=Ae.source.column,qe=Ae.circularLinkType,At=be.links.filter(function(ft){return ft.source.column==Ne&&ft.circularLinkType==qe});Ae.circularLinkType=="bottom"?At.sort(te):At.sort(K);var kt=0;At.forEach(function(ft,St){ft.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.leftSmallArcRadius=E+Ae.width/2+kt,Ae.circularPathData.leftLargeArcRadius=E+Ae.width/2+St*ke+kt),kt=kt+ft.width}),Ne=Ae.target.column,At=be.links.filter(function(ft){return ft.target.column==Ne&&ft.circularLinkType==qe}),Ae.circularLinkType=="bottom"?At.sort(oe):At.sort(J),kt=0,At.forEach(function(ft,St){ft.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.rightSmallArcRadius=E+Ae.width/2+kt,Ae.circularPathData.rightLargeArcRadius=E+Ae.width/2+St*ke+kt),kt=kt+ft.width}),Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Math.max(Pe,Ae.source.y1,Ae.target.y1)+z+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=Ze-z-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius)}Ae.circularPathData.leftInnerExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightInnerExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightNodeBuffer,Ae.circularPathData.leftFullExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftLargeArcRadius+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightFullExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightLargeArcRadius-Ae.circularPathData.rightNodeBuffer}if(Ae.circular)Ae.path=j(Ae);else{var Ve=c.linkHorizontal().source(function(ft){var St=ft.source.x0+(ft.source.x1-ft.source.x0),Wt=ft.y0;return[St,Wt]}).target(function(ft){var St=ft.target.x0,Wt=ft.y1;return[St,Wt]});Ae.path=Ve(Ae)}})}function j(be){var ke="";return be.circularLinkType=="top"?ke="M"+be.circularPathData.sourceX+" "+be.circularPathData.sourceY+" L"+be.circularPathData.leftInnerExtent+" "+be.circularPathData.sourceY+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftSmallArcRadius+" 0 0 0 "+be.circularPathData.leftFullExtent+" "+(be.circularPathData.sourceY-be.circularPathData.leftSmallArcRadius)+" L"+be.circularPathData.leftFullExtent+" "+be.circularPathData.verticalLeftInnerExtent+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftLargeArcRadius+" 0 0 0 "+be.circularPathData.leftInnerExtent+" "+be.circularPathData.verticalFullExtent+" L"+be.circularPathData.rightInnerExtent+" "+be.circularPathData.verticalFullExtent+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightLargeArcRadius+" 0 0 0 "+be.circularPathData.rightFullExtent+" "+be.circularPathData.verticalRightInnerExtent+" L"+be.circularPathData.rightFullExtent+" "+(be.circularPathData.targetY-be.circularPathData.rightSmallArcRadius)+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightSmallArcRadius+" 0 0 0 "+be.circularPathData.rightInnerExtent+" "+be.circularPathData.targetY+" L"+be.circularPathData.targetX+" "+be.circularPathData.targetY:ke="M"+be.circularPathData.sourceX+" "+be.circularPathData.sourceY+" L"+be.circularPathData.leftInnerExtent+" "+be.circularPathData.sourceY+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftSmallArcRadius+" 0 0 1 "+be.circularPathData.leftFullExtent+" "+(be.circularPathData.sourceY+be.circularPathData.leftSmallArcRadius)+" L"+be.circularPathData.leftFullExtent+" "+be.circularPathData.verticalLeftInnerExtent+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftLargeArcRadius+" 0 0 1 "+be.circularPathData.leftInnerExtent+" "+be.circularPathData.verticalFullExtent+" L"+be.circularPathData.rightInnerExtent+" "+be.circularPathData.verticalFullExtent+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightLargeArcRadius+" 0 0 1 "+be.circularPathData.rightFullExtent+" "+be.circularPathData.verticalRightInnerExtent+" L"+be.circularPathData.rightFullExtent+" "+(be.circularPathData.targetY+be.circularPathData.rightSmallArcRadius)+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightSmallArcRadius+" 0 0 1 "+be.circularPathData.rightInnerExtent+" "+be.circularPathData.targetY+" L"+be.circularPathData.targetX+" "+be.circularPathData.targetY,ke}function H(be,ke){return ie(be)==ie(ke)?be.circularLinkType=="bottom"?te(be,ke):K(be,ke):ie(ke)-ie(be)}function K(be,ke){return be.y0-ke.y0}function te(be,ke){return ke.y0-be.y0}function J(be,ke){return be.y1-ke.y1}function oe(be,ke){return ke.y1-be.y1}function ie(be){return be.target.column-be.source.column}function Q(be){return be.target.x0-be.source.x1}function V(be,ke){var Pe=N(be),je=Q(ke)/Math.tan(Pe),ze=W(be)=="up"?be.y1+je:be.y1-je;return ze}function se(be,ke){var Pe=N(be),je=Q(ke)/Math.tan(Pe),ze=W(be)=="up"?be.y1-je:be.y1+je;return ze}function re(be,ke,Pe,je){be.links.forEach(function(ze){if(!ze.circular&&ze.target.column-ze.source.column>1){var Ze=ze.source.column+1,tt=ze.target.column-1,Ce=1,Ae=tt-Ze+1;for(Ce=1;Ze<=tt;Ze++,Ce++)be.nodes.forEach(function(Ne){if(Ne.column==Ze){var qe=Ce/(Ae+1),At=Math.pow(1-qe,3),kt=3*qe*Math.pow(1-qe,2),Ve=3*Math.pow(qe,2)*(1-qe),ft=Math.pow(qe,3),St=At*ze.y0+kt*ze.y0+Ve*ze.y1+ft*ze.y1,Wt=St-ze.width/2,Qt=St+ze.width/2,zt;Wt>Ne.y0&&Wt<Ne.y1?(zt=Ne.y1-Wt+10,zt=Ne.circularLinkType=="bottom"?zt:-zt,Ne=ae(Ne,zt,ke,Pe),be.nodes.forEach(function($t){L($t,je)==L(Ne,je)||$t.column!=Ne.column||ee(Ne,$t)&&ae($t,zt,ke,Pe)})):Qt>Ne.y0&&Qt<Ne.y1?(zt=Qt-Ne.y0+10,Ne=ae(Ne,zt,ke,Pe),be.nodes.forEach(function($t){L($t,je)==L(Ne,je)||$t.column!=Ne.column||$t.y0<Ne.y1&&$t.y1>Ne.y1&&ae($t,zt,ke,Pe)})):Wt<Ne.y0&&Qt>Ne.y1&&(zt=Qt-Ne.y0+10,Ne=ae(Ne,zt,ke,Pe),be.nodes.forEach(function($t){L($t,je)==L(Ne,je)||$t.column!=Ne.column||$t.y0<Ne.y1&&$t.y1>Ne.y1&&ae($t,zt,ke,Pe)}))}})}})}function ee(be,ke){return be.y0>ke.y0&&be.y0<ke.y1||be.y1>ke.y0&&be.y1<ke.y1?!0:be.y0<ke.y0&&be.y1>ke.y1}function ae(be,ke,Pe,je){return be.y0+ke>=Pe&&be.y1+ke<=je&&(be.y0=be.y0+ke,be.y1=be.y1+ke,be.targetLinks.forEach(function(ze){ze.y1=ze.y1+ke}),be.sourceLinks.forEach(function(ze){ze.y0=ze.y0+ke})),be}function fe(be,ke,Pe,je){be.nodes.forEach(function(ze){je&&ze.y+(ze.y1-ze.y0)>ke&&(ze.y=ze.y-(ze.y+(ze.y1-ze.y0)-ke));var Ze=be.links.filter(function(Ae){return L(Ae.source,Pe)==L(ze,Pe)}),tt=Ze.length;tt>1&&Ze.sort(function(Ae,Ne){if(!Ae.circular&&!Ne.circular){if(Ae.target.column==Ne.target.column)return Ae.y1-Ne.y1;if(pe(Ae,Ne)){if(Ae.target.column>Ne.target.column){var qe=se(Ne,Ae);return Ae.y1-qe}if(Ne.target.column>Ae.target.column){var At=se(Ae,Ne);return At-Ne.y1}}else return Ae.y1-Ne.y1}if(Ae.circular&&!Ne.circular)return Ae.circularLinkType=="top"?-1:1;if(Ne.circular&&!Ae.circular)return Ne.circularLinkType=="top"?1:-1;if(Ae.circular&&Ne.circular)return Ae.circularLinkType===Ne.circularLinkType&&Ae.circularLinkType=="top"?Ae.target.column===Ne.target.column?Ae.target.y1-Ne.target.y1:Ne.target.column-Ae.target.column:Ae.circularLinkType===Ne.circularLinkType&&Ae.circularLinkType=="bottom"?Ae.target.column===Ne.target.column?Ne.target.y1-Ae.target.y1:Ae.target.column-Ne.target.column:Ae.circularLinkType=="top"?-1:1});var Ce=ze.y0;Ze.forEach(function(Ae){Ae.y0=Ce+Ae.width/2,Ce=Ce+Ae.width}),Ze.forEach(function(Ae,Ne){if(Ae.circularLinkType=="bottom"){var qe=Ne+1,At=0;for(qe;qe<tt;qe++)At=At+Ze[qe].width;Ae.y0=ze.y1-At-Ae.width/2}})})}function de(be,ke,Pe){be.nodes.forEach(function(je){var ze=be.links.filter(function(Ce){return L(Ce.target,Pe)==L(je,Pe)}),Ze=ze.length;Ze>1&&ze.sort(function(Ce,Ae){if(!Ce.circular&&!Ae.circular){if(Ce.source.column==Ae.source.column)return Ce.y0-Ae.y0;if(pe(Ce,Ae)){if(Ae.source.column<Ce.source.column){var Ne=V(Ae,Ce);return Ce.y0-Ne}if(Ce.source.column<Ae.source.column){var qe=V(Ce,Ae);return qe-Ae.y0}}else return Ce.y0-Ae.y0}if(Ce.circular&&!Ae.circular)return Ce.circularLinkType=="top"?-1:1;if(Ae.circular&&!Ce.circular)return Ae.circularLinkType=="top"?1:-1;if(Ce.circular&&Ae.circular)return Ce.circularLinkType===Ae.circularLinkType&&Ce.circularLinkType=="top"?Ce.source.column===Ae.source.column?Ce.source.y1-Ae.source.y1:Ce.source.column-Ae.source.column:Ce.circularLinkType===Ae.circularLinkType&&Ce.circularLinkType=="bottom"?Ce.source.column===Ae.source.column?Ce.source.y1-Ae.source.y1:Ae.source.column-Ce.source.column:Ce.circularLinkType=="top"?-1:1});var tt=je.y0;ze.forEach(function(Ce){Ce.y1=tt+Ce.width/2,tt=tt+Ce.width}),ze.forEach(function(Ce,Ae){if(Ce.circularLinkType=="bottom"){var Ne=Ae+1,qe=0;for(Ne;Ne<Ze;Ne++)qe=qe+ze[Ne].width;Ce.y1=je.y1-qe-Ce.width/2}})})}function pe(be,ke){return W(be)==W(ke)}function W(be){return be.y0-be.y1>0?"up":"down"}function ue(be,ke){return L(be.source,ke)==L(be.target,ke)}function me(be,ke,Pe){var je=be.nodes,ze=be.links,Ze=!1,tt=!1;if(ze.forEach(function(kt){kt.circularLinkType=="top"?Ze=!0:kt.circularLinkType=="bottom"&&(tt=!0)}),Ze==!1||tt==!1){var Ce=n.min(je,function(kt){return kt.y0}),Ae=n.max(je,function(kt){return kt.y1}),Ne=Ae-Ce,qe=Pe-ke,At=qe/Ne;je.forEach(function(kt){var Ve=(kt.y1-kt.y0)*At;kt.y0=(kt.y0-Ce)*At,kt.y1=kt.y0+Ve}),ze.forEach(function(kt){kt.y0=(kt.y0-Ce)*At,kt.y1=(kt.y1-Ce)*At,kt.width=kt.width*At})}}r.sankeyCircular=C,r.sankeyCenter=h,r.sankeyLeft=a,r.sankeyRight=o,r.sankeyJustify=u,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165,"elementary-circuits-directed-graph":179}],56:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?n(M,e("d3-array"),e("d3-collection"),e("d3-shape")):n(r.d3=r.d3||{},r.d3,r.d3,r.d3)})(this,function(r,n,l,c){function t(E){return E.target.depth}function f(E){return E.depth}function a(E,S){return S-1-E.height}function o(E,S){return E.sourceLinks.length?E.depth:S-1}function u(E){return E.targetLinks.length?E.depth:E.sourceLinks.length?n.min(E.sourceLinks,t)-1:0}function h(E){return function(){return E}}function i(E,S){return p(E.source,S.source)||E.index-S.index}function s(E,S){return p(E.target,S.target)||E.index-S.index}function p(E,S){return E.y0-S.y0}function d(E){return E.value}function y(E){return(E.y0+E.y1)/2}function b(E){return y(E.source)*E.value}function m(E){return y(E.target)*E.value}function _(E){return E.index}function T(E){return E.nodes}function g(E){return E.links}function A(E,S){var C=E.get(S);if(!C)throw new Error("missing: "+S);return C}var k=function(){var E=0,S=0,C=1,D=1,F=24,N=8,G=_,U=o,X=T,I=g,B=32,j=2/3;function H(){var Q={nodes:X.apply(null,arguments),links:I.apply(null,arguments)};return K(Q),te(Q),J(Q),oe(Q),ie(Q),Q}H.update=function(Q){return ie(Q),Q},H.nodeId=function(Q){return arguments.length?(G=typeof Q=="function"?Q:h(Q),H):G},H.nodeAlign=function(Q){return arguments.length?(U=typeof Q=="function"?Q:h(Q),H):U},H.nodeWidth=function(Q){return arguments.length?(F=+Q,H):F},H.nodePadding=function(Q){return arguments.length?(N=+Q,H):N},H.nodes=function(Q){return arguments.length?(X=typeof Q=="function"?Q:h(Q),H):X},H.links=function(Q){return arguments.length?(I=typeof Q=="function"?Q:h(Q),H):I},H.size=function(Q){return arguments.length?(E=S=0,C=+Q[0],D=+Q[1],H):[C-E,D-S]},H.extent=function(Q){return arguments.length?(E=+Q[0][0],C=+Q[1][0],S=+Q[0][1],D=+Q[1][1],H):[[E,S],[C,D]]},H.iterations=function(Q){return arguments.length?(B=+Q,H):B};function K(Q){Q.nodes.forEach(function(se,re){se.index=re,se.sourceLinks=[],se.targetLinks=[]});var V=l.map(Q.nodes,G);Q.links.forEach(function(se,re){se.index=re;var ee=se.source,ae=se.target;typeof ee!="object"&&(ee=se.source=A(V,ee)),typeof ae!="object"&&(ae=se.target=A(V,ae)),ee.sourceLinks.push(se),ae.targetLinks.push(se)})}function te(Q){Q.nodes.forEach(function(V){V.value=Math.max(n.sum(V.sourceLinks,d),n.sum(V.targetLinks,d))})}function J(Q){var V,se,re;for(V=Q.nodes,se=[],re=0;V.length;++re,V=se,se=[])V.forEach(function(ae){ae.depth=re,ae.sourceLinks.forEach(function(fe){se.indexOf(fe.target)<0&&se.push(fe.target)})});for(V=Q.nodes,se=[],re=0;V.length;++re,V=se,se=[])V.forEach(function(ae){ae.height=re,ae.targetLinks.forEach(function(fe){se.indexOf(fe.source)<0&&se.push(fe.source)})});var ee=(C-E-F)/(re-1);Q.nodes.forEach(function(ae){ae.x1=(ae.x0=E+Math.max(0,Math.min(re-1,Math.floor(U.call(null,ae,re))))*ee)+F})}function oe(Q){var V=l.nest().key(function(pe){return pe.x0}).sortKeys(n.ascending).entries(Q.nodes).map(function(pe){return pe.values});ee(),de();for(var se=1,re=B;re>0;--re)fe(se*=.99),de(),ae(se),de();function ee(){var pe=n.max(V,function(me){return me.length}),W=j*(D-S)/(pe-1);N>W&&(N=W);var ue=n.min(V,function(me){return(D-S-(me.length-1)*N)/n.sum(me,d)});V.forEach(function(me){me.forEach(function(be,ke){be.y1=(be.y0=ke)+be.value*ue})}),Q.links.forEach(function(me){me.width=me.value*ue})}function ae(pe){V.forEach(function(W){W.forEach(function(ue){if(ue.targetLinks.length){var me=(n.sum(ue.targetLinks,b)/n.sum(ue.targetLinks,d)-y(ue))*pe;ue.y0+=me,ue.y1+=me}})})}function fe(pe){V.slice().reverse().forEach(function(W){W.forEach(function(ue){if(ue.sourceLinks.length){var me=(n.sum(ue.sourceLinks,m)/n.sum(ue.sourceLinks,d)-y(ue))*pe;ue.y0+=me,ue.y1+=me}})})}function de(){V.forEach(function(pe){var W,ue,me=S,be=pe.length,ke;for(pe.sort(p),ke=0;ke<be;++ke)W=pe[ke],ue=me-W.y0,ue>0&&(W.y0+=ue,W.y1+=ue),me=W.y1+N;if(ue=me-N-D,ue>0)for(me=W.y0-=ue,W.y1-=ue,ke=be-2;ke>=0;--ke)W=pe[ke],ue=W.y1+N-me,ue>0&&(W.y0-=ue,W.y1-=ue),me=W.y0})}}function ie(Q){Q.nodes.forEach(function(V){V.sourceLinks.sort(s),V.targetLinks.sort(i)}),Q.nodes.forEach(function(V){var se=V.y0,re=se;V.sourceLinks.forEach(function(ee){ee.y0=se+ee.width/2,se+=ee.width}),V.targetLinks.forEach(function(ee){ee.y1=re+ee.width/2,re+=ee.width})})}return H};function R(E){return[E.source.x1,E.y0]}function L(E){return[E.target.x0,E.y1]}var z=function(){return c.linkHorizontal().source(R).target(L)};r.sankey=k,r.sankeyCenter=u,r.sankeyLeft=f,r.sankeyRight=a,r.sankeyJustify=o,r.sankeyLinkHorizontal=z,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165}],57:[function(e,v,M){v.exports=e("./quad")},{"./quad":58}],58:[function(e,v,M){var r=e("binary-search-bounds"),n=e("clamp"),l=e("parse-rect"),c=e("array-bounds"),t=e("pick-by-alias"),f=e("defined"),a=e("flatten-vertex-data"),o=e("is-obj"),u=e("dtype"),h=e("math-log2"),i=1073741824;v.exports=function(d,y){y||(y={}),d=a(d,"float64"),y=t(y,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var b=f(y.maxDepth,255),m=f(y.bounds,c(d,2));m[0]===m[2]&&m[2]++,m[1]===m[3]&&m[3]++;var _=s(d,m),T=d.length>>>1,g;y.dtype||(y.dtype="array"),typeof y.dtype=="string"?g=new(u(y.dtype))(T):y.dtype&&(g=y.dtype,Array.isArray(g)&&(g.length=T));for(var A=0;A<T;++A)g[A]=A;var k=[],R=[],L=[],z=[];G(0,0,1,g,0,1);for(var E=0,S=0;S<k.length;S++){var C=k[S];if(g.set)g.set(C,E);else for(var D=0,F=C.length;D<F;D++)g[D+E]=C[D];var N=E+k[S].length;z[S]=[E,N],E=N}return g.range=U,g;function G(B,j,H,K,te,J){if(!K.length)return null;var oe=k[te]||(k[te]=[]),ie=L[te]||(L[te]=[]),Q=R[te]||(R[te]=[]),V=oe.length;if(te++,te>b||J>i){for(var se=0;se<K.length;se++)oe.push(K[se]),ie.push(J),Q.push(null,null,null,null);return V}if(oe.push(K[0]),ie.push(J),K.length<=1)return Q.push(null,null,null,null),V;for(var re=H*.5,ee=B+re,ae=j+re,fe=[],de=[],pe=[],W=[],ue=1,me=K.length;ue<me;ue++){var be=K[ue],ke=_[be*2],Pe=_[be*2+1];ke<ee?Pe<ae?fe.push(be):de.push(be):Pe<ae?pe.push(be):W.push(be)}return J<<=2,Q.push(G(B,j,re,fe,te,J),G(B,ae,re,de,te,J+1),G(ee,j,re,pe,te,J+2),G(ee,ae,re,W,te,J+3)),V}function U(){for(var B=[],j=arguments.length;j--;)B[j]=arguments[j];var H;if(o(B[B.length-1])){var K=B.pop();!B.length&&(K.x!=null||K.l!=null||K.left!=null)&&(B=[K],H={}),H=t(K,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else H={};B.length||(B=m);var te=l.apply(void 0,B),J=[Math.min(te.x,te.x+te.width),Math.min(te.y,te.y+te.height),Math.max(te.x,te.x+te.width),Math.max(te.y,te.y+te.height)],oe=J[0],ie=J[1],Q=J[2],V=J[3],se=s([oe,ie,Q,V],m),re=se[0],ee=se[1],ae=se[2],fe=se[3],de=f(H.level,k.length);if(H.d!=null){var pe;typeof H.d=="number"?pe=[H.d,H.d]:H.d.length&&(pe=H.d),de=Math.min(Math.max(Math.ceil(-h(Math.abs(pe[0])/(m[2]-m[0]))),Math.ceil(-h(Math.abs(pe[1])/(m[3]-m[1])))),de)}if(de=Math.min(de,k.length),H.lod)return X(re,ee,ae,fe,de);var W=[];ue(0,0,1,0,0,1);function ue(be,ke,Pe,je,ze,Ze){if(!(ze===null||Ze===null)){var tt=be+Pe,Ce=ke+Pe;if(!(re>tt||ee>Ce||ae<be||fe<ke)&&!(je>=de)&&ze!==Ze){var Ae=k[je];Ze===void 0&&(Ze=Ae.length);for(var Ne=ze;Ne<Ze;Ne++){var qe=Ae[Ne],At=d[qe*2],kt=d[qe*2+1];At>=oe&&At<=Q&&kt>=ie&&kt<=V&&W.push(qe)}var Ve=R[je],ft=Ve[ze*4+0],St=Ve[ze*4+1],Wt=Ve[ze*4+2],Qt=Ve[ze*4+3],zt=me(Ve,ze+1),$t=Pe*.5,rr=je+1;ue(be,ke,$t,rr,ft,St||Wt||Qt||zt),ue(be,ke+$t,$t,rr,St,Wt||Qt||zt),ue(be+$t,ke,$t,rr,Wt,Qt||zt),ue(be+$t,ke+$t,$t,rr,Qt,zt)}}}function me(be,ke){for(var Pe=null,je=0;Pe===null;)if(Pe=be[ke*4+je],je++,je>be.length)return null;return Pe}return W}function X(B,j,H,K,te){for(var J=[],oe=0;oe<te;oe++){var ie=L[oe],Q=z[oe][0],V=I(B,j,oe),se=I(H,K,oe),re=r.ge(ie,V),ee=r.gt(ie,se,re,ie.length-1);J[oe]=[re+Q,ee+Q]}return J}function I(B,j,H){for(var K=1,te=.5,J=.5,oe=.5,ie=0;ie<H;ie++)K<<=2,K+=B<te?j<J?0:1:j<J?2:3,oe*=.5,te+=B<te?-oe:oe,J+=j<J?-oe:oe;return K}};function s(p,d){for(var y=d[0],b=d[1],m=d[2],_=d[3],T=1/(m-y),g=1/(_-b),A=new Array(p.length),k=0,R=p.length/2;k<R;k++)A[2*k]=n((p[2*k]-y)*T,0,1),A[2*k+1]=n((p[2*k+1]-b)*g,0,1);return A}},{"array-bounds":70,"binary-search-bounds":96,clamp:120,defined:170,dtype:175,"flatten-vertex-data":244,"is-obj":468,"math-log2":479,"parse-rect":504,"pick-by-alias":511}],59:[function(e,v,M){Object.defineProperty(M,"__esModule",{value:!0});var r=e("@turf/meta"),n=6378137;function l(o){return r.geomReduce(o,function(u,h){return u+c(h)},0)}M.default=l;function c(o){var u=0,h;switch(o.type){case"Polygon":return t(o.coordinates);case"MultiPolygon":for(h=0;h<o.coordinates.length;h++)u+=t(o.coordinates[h]);return u;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function t(o){var u=0;if(o&&o.length>0){u+=Math.abs(f(o[0]));for(var h=1;h<o.length;h++)u-=Math.abs(f(o[h]))}return u}function f(o){var u,h,i,s,p,d,y,b=0,m=o.length;if(m>2){for(y=0;y<m;y++)y===m-2?(s=m-2,p=m-1,d=0):y===m-1?(s=m-1,p=0,d=1):(s=y,p=y+1,d=y+2),u=o[s],h=o[p],i=o[d],b+=(a(i[0])-a(u[0]))*Math.sin(a(h[1]));b=b*n*n/2}return b}function a(o){return o*Math.PI/180}},{"@turf/meta":63}],60:[function(e,v,M){Object.defineProperty(M,"__esModule",{value:!0});var r=e("@turf/meta");function n(l){var c=[1/0,1/0,-1/0,-1/0];return r.coordEach(l,function(t){c[0]>t[0]&&(c[0]=t[0]),c[1]>t[1]&&(c[1]=t[1]),c[2]<t[0]&&(c[2]=t[0]),c[3]<t[1]&&(c[3]=t[1])}),c}M.default=n},{"@turf/meta":63}],61:[function(e,v,M){Object.defineProperty(M,"__esModule",{value:!0});var r=e("@turf/meta"),n=e("@turf/helpers");function l(c,t){t===void 0&&(t={});var f=0,a=0,o=0;return r.coordEach(c,function(u){f+=u[0],a+=u[1],o++}),n.point([f/o,a/o],t.properties)}M.default=l},{"@turf/helpers":62,"@turf/meta":63}],62:[function(e,v,M){Object.defineProperty(M,"__esModule",{value:!0}),M.earthRadius=63710088e-1,M.factors={centimeters:M.earthRadius*100,centimetres:M.earthRadius*100,degrees:M.earthRadius/111325,feet:M.earthRadius*3.28084,inches:M.earthRadius*39.37,kilometers:M.earthRadius/1e3,kilometres:M.earthRadius/1e3,meters:M.earthRadius,metres:M.earthRadius,miles:M.earthRadius/1609.344,millimeters:M.earthRadius*1e3,millimetres:M.earthRadius*1e3,nauticalmiles:M.earthRadius/1852,radians:1,yards:M.earthRadius/1.0936},M.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/M.earthRadius,yards:1/1.0936},M.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(X,I,B){B===void 0&&(B={});var j={type:"Feature"};return(B.id===0||B.id)&&(j.id=B.id),B.bbox&&(j.bbox=B.bbox),j.properties=I||{},j.geometry=X,j}M.feature=r;function n(X,I,B){switch(X){case"Point":return l(I).geometry;case"LineString":return a(I).geometry;case"Polygon":return t(I).geometry;case"MultiPoint":return i(I).geometry;case"MultiLineString":return h(I).geometry;case"MultiPolygon":return s(I).geometry;default:throw new Error(X+" is invalid")}}M.geometry=n;function l(X,I,B){B===void 0&&(B={});var j={type:"Point",coordinates:X};return r(j,I,B)}M.point=l;function c(X,I,B){return B===void 0&&(B={}),u(X.map(function(j){return l(j,I)}),B)}M.points=c;function t(X,I,B){B===void 0&&(B={});for(var j=0,H=X;j<H.length;j++){var K=H[j];if(K.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var te=0;te<K[K.length-1].length;te++)if(K[K.length-1][te]!==K[0][te])throw new Error("First and last Position are not equivalent.")}var J={type:"Polygon",coordinates:X};return r(J,I,B)}M.polygon=t;function f(X,I,B){return B===void 0&&(B={}),u(X.map(function(j){return t(j,I)}),B)}M.polygons=f;function a(X,I,B){if(B===void 0&&(B={}),X.length<2)throw new Error("coordinates must be an array of two or more positions");var j={type:"LineString",coordinates:X};return r(j,I,B)}M.lineString=a;function o(X,I,B){return B===void 0&&(B={}),u(X.map(function(j){return a(j,I)}),B)}M.lineStrings=o;function u(X,I){I===void 0&&(I={});var B={type:"FeatureCollection"};return I.id&&(B.id=I.id),I.bbox&&(B.bbox=I.bbox),B.features=X,B}M.featureCollection=u;function h(X,I,B){B===void 0&&(B={});var j={type:"MultiLineString",coordinates:X};return r(j,I,B)}M.multiLineString=h;function i(X,I,B){B===void 0&&(B={});var j={type:"MultiPoint",coordinates:X};return r(j,I,B)}M.multiPoint=i;function s(X,I,B){B===void 0&&(B={});var j={type:"MultiPolygon",coordinates:X};return r(j,I,B)}M.multiPolygon=s;function p(X,I,B){B===void 0&&(B={});var j={type:"GeometryCollection",geometries:X};return r(j,I,B)}M.geometryCollection=p;function d(X,I){if(I===void 0&&(I=0),I&&!(I>=0))throw new Error("precision must be a positive number");var B=Math.pow(10,I||0);return Math.round(X*B)/B}M.round=d;function y(X,I){I===void 0&&(I="kilometers");var B=M.factors[I];if(!B)throw new Error(I+" units is invalid");return X*B}M.radiansToLength=y;function b(X,I){I===void 0&&(I="kilometers");var B=M.factors[I];if(!B)throw new Error(I+" units is invalid");return X/B}M.lengthToRadians=b;function m(X,I){return T(b(X,I))}M.lengthToDegrees=m;function _(X){var I=X%360;return I<0&&(I+=360),I}M.bearingToAzimuth=_;function T(X){var I=X%(2*Math.PI);return I*180/Math.PI}M.radiansToDegrees=T;function g(X){var I=X%360;return I*Math.PI/180}M.degreesToRadians=g;function A(X,I,B){if(I===void 0&&(I="kilometers"),B===void 0&&(B="kilometers"),!(X>=0))throw new Error("length must be a positive number");return y(b(X,I),B)}M.convertLength=A;function k(X,I,B){if(I===void 0&&(I="meters"),B===void 0&&(B="kilometers"),!(X>=0))throw new Error("area must be a positive number");var j=M.areaFactors[I];if(!j)throw new Error("invalid original units");var H=M.areaFactors[B];if(!H)throw new Error("invalid final units");return X/j*H}M.convertArea=k;function R(X){return!isNaN(X)&&X!==null&&!Array.isArray(X)&&!/^\s*$/.test(X)}M.isNumber=R;function L(X){return!!X&&X.constructor===Object}M.isObject=L;function z(X){if(!X)throw new Error("bbox is required");if(!Array.isArray(X))throw new Error("bbox must be an Array");if(X.length!==4&&X.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");X.forEach(function(I){if(!R(I))throw new Error("bbox must only contain numbers")})}M.validateBBox=z;function E(X){if(!X)throw new Error("id is required");if(["string","number"].indexOf(typeof X)===-1)throw new Error("id must be a number or a string")}M.validateId=E;function S(){throw new Error("method has been renamed to `radiansToDegrees`")}M.radians2degrees=S;function C(){throw new Error("method has been renamed to `degreesToRadians`")}M.degrees2radians=C;function D(){throw new Error("method has been renamed to `lengthToDegrees`")}M.distanceToDegrees=D;function F(){throw new Error("method has been renamed to `lengthToRadians`")}M.distanceToRadians=F;function N(){throw new Error("method has been renamed to `radiansToLength`")}M.radiansToDistance=N;function G(){throw new Error("method has been renamed to `bearingToAzimuth`")}M.bearingToAngle=G;function U(){throw new Error("method has been renamed to `convertLength`")}M.convertDistance=U},{}],63:[function(e,v,M){Object.defineProperty(M,"__esModule",{value:!0});var r=e("@turf/helpers");function n(T,g,A){if(T!==null)for(var k,R,L,z,E,S,C,D=0,F=0,N,G=T.type,U=G==="FeatureCollection",X=G==="Feature",I=U?T.features.length:1,B=0;B<I;B++){C=U?T.features[B].geometry:X?T.geometry:T,N=C?C.type==="GeometryCollection":!1,E=N?C.geometries.length:1;for(var j=0;j<E;j++){var H=0,K=0;if(z=N?C.geometries[j]:C,z!==null){S=z.coordinates;var te=z.type;switch(D=A&&(te==="Polygon"||te==="MultiPolygon")?1:0,te){case null:break;case"Point":if(g(S,F,B,H,K)===!1)return!1;F++,H++;break;case"LineString":case"MultiPoint":for(k=0;k<S.length;k++){if(g(S[k],F,B,H,K)===!1)return!1;F++,te==="MultiPoint"&&H++}te==="LineString"&&H++;break;case"Polygon":case"MultiLineString":for(k=0;k<S.length;k++){for(R=0;R<S[k].length-D;R++){if(g(S[k][R],F,B,H,K)===!1)return!1;F++}te==="MultiLineString"&&H++,te==="Polygon"&&K++}te==="Polygon"&&H++;break;case"MultiPolygon":for(k=0;k<S.length;k++){for(K=0,R=0;R<S[k].length;R++){for(L=0;L<S[k][R].length-D;L++){if(g(S[k][R][L],F,B,H,K)===!1)return!1;F++}K++}H++}break;case"GeometryCollection":for(k=0;k<z.geometries.length;k++)if(n(z.geometries[k],g,A)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(T,g,A,k){var R=A;return n(T,function(L,z,E,S,C){z===0&&A===void 0?R=L:R=g(R,L,z,E,S,C)},k),R}function c(T,g){var A;switch(T.type){case"FeatureCollection":for(A=0;A<T.features.length&&g(T.features[A].properties,A)!==!1;A++);break;case"Feature":g(T.properties,0);break}}function t(T,g,A){var k=A;return c(T,function(R,L){L===0&&A===void 0?k=R:k=g(k,R,L)}),k}function f(T,g){if(T.type==="Feature")g(T,0);else if(T.type==="FeatureCollection")for(var A=0;A<T.features.length&&g(T.features[A],A)!==!1;A++);}function a(T,g,A){var k=A;return f(T,function(R,L){L===0&&A===void 0?k=R:k=g(k,R,L)}),k}function o(T){var g=[];return n(T,function(A){g.push(A)}),g}function u(T,g){var A,k,R,L,z,E,S,C,D,F,N=0,G=T.type==="FeatureCollection",U=T.type==="Feature",X=G?T.features.length:1;for(A=0;A<X;A++){for(E=G?T.features[A].geometry:U?T.geometry:T,C=G?T.features[A].properties:U?T.properties:{},D=G?T.features[A].bbox:U?T.bbox:void 0,F=G?T.features[A].id:U?T.id:void 0,S=E?E.type==="GeometryCollection":!1,z=S?E.geometries.length:1,R=0;R<z;R++){if(L=S?E.geometries[R]:E,L===null){if(g(null,N,C,D,F)===!1)return!1;continue}switch(L.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(g(L,N,C,D,F)===!1)return!1;break}case"GeometryCollection":{for(k=0;k<L.geometries.length;k++)if(g(L.geometries[k],N,C,D,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}N++}}function h(T,g,A){var k=A;return u(T,function(R,L,z,E,S){L===0&&A===void 0?k=R:k=g(k,R,L,z,E,S)}),k}function i(T,g){u(T,function(A,k,R,L,z){var E=A===null?null:A.type;switch(E){case null:case"Point":case"LineString":case"Polygon":return g(r.feature(A,R,{bbox:L,id:z}),k,0)===!1?!1:void 0}var S;switch(E){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var C=0;C<A.coordinates.length;C++){var D=A.coordinates[C],F={type:S,coordinates:D};if(g(r.feature(F,R),k,C)===!1)return!1}})}function s(T,g,A){var k=A;return i(T,function(R,L,z){L===0&&z===0&&A===void 0?k=R:k=g(k,R,L,z)}),k}function p(T,g){i(T,function(A,k,R){var L=0;if(A.geometry){var z=A.geometry.type;if(!(z==="Point"||z==="MultiPoint")){var E,S=0,C=0,D=0;if(n(A,function(F,N,G,U,X){if(E===void 0||k>S||U>C||X>D){E=F,S=k,C=U,D=X,L=0;return}var I=r.lineString([E,F],A.properties);if(g(I,k,R,X,L)===!1)return!1;L++,E=F})===!1)return!1}}})}function d(T,g,A){var k=A,R=!1;return p(T,function(L,z,E,S,C){R===!1&&A===void 0?k=L:k=g(k,L,z,E,S,C),R=!0}),k}function y(T,g){if(!T)throw new Error("geojson is required");i(T,function(A,k,R){if(A.geometry!==null){var L=A.geometry.type,z=A.geometry.coordinates;switch(L){case"LineString":if(g(A,k,R,0,0)===!1)return!1;break;case"Polygon":for(var E=0;E<z.length;E++)if(g(r.lineString(z[E],A.properties),k,R,E)===!1)return!1;break}}})}function b(T,g,A){var k=A;return y(T,function(R,L,z,E){L===0&&A===void 0?k=R:k=g(k,R,L,z,E)}),k}function m(T,g){if(g=g||{},!r.isObject(g))throw new Error("options is invalid");var A=g.featureIndex||0,k=g.multiFeatureIndex||0,R=g.geometryIndex||0,L=g.segmentIndex||0,z=g.properties,E;switch(T.type){case"FeatureCollection":A<0&&(A=T.features.length+A),z=z||T.features[A].properties,E=T.features[A].geometry;break;case"Feature":z=z||T.properties,E=T.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":E=T;break;default:throw new Error("geojson is invalid")}if(E===null)return null;var S=E.coordinates;switch(E.type){case"Point":case"MultiPoint":return null;case"LineString":return L<0&&(L=S.length+L-1),r.lineString([S[L],S[L+1]],z,g);case"Polygon":return R<0&&(R=S.length+R),L<0&&(L=S[R].length+L-1),r.lineString([S[R][L],S[R][L+1]],z,g);case"MultiLineString":return k<0&&(k=S.length+k),L<0&&(L=S[k].length+L-1),r.lineString([S[k][L],S[k][L+1]],z,g);case"MultiPolygon":return k<0&&(k=S.length+k),R<0&&(R=S[k].length+R),L<0&&(L=S[k][R].length-L-1),r.lineString([S[k][R][L],S[k][R][L+1]],z,g)}throw new Error("geojson is invalid")}function _(T,g){if(g=g||{},!r.isObject(g))throw new Error("options is invalid");var A=g.featureIndex||0,k=g.multiFeatureIndex||0,R=g.geometryIndex||0,L=g.coordIndex||0,z=g.properties,E;switch(T.type){case"FeatureCollection":A<0&&(A=T.features.length+A),z=z||T.features[A].properties,E=T.features[A].geometry;break;case"Feature":z=z||T.properties,E=T.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":E=T;break;default:throw new Error("geojson is invalid")}if(E===null)return null;var S=E.coordinates;switch(E.type){case"Point":return r.point(S,z,g);case"MultiPoint":return k<0&&(k=S.length+k),r.point(S[k],z,g);case"LineString":return L<0&&(L=S.length+L),r.point(S[L],z,g);case"Polygon":return R<0&&(R=S.length+R),L<0&&(L=S[R].length+L),r.point(S[R][L],z,g);case"MultiLineString":return k<0&&(k=S.length+k),L<0&&(L=S[k].length+L),r.point(S[k][L],z,g);case"MultiPolygon":return k<0&&(k=S.length+k),R<0&&(R=S[k].length+R),L<0&&(L=S[k][R].length-L),r.point(S[k][R][L],z,g)}throw new Error("geojson is invalid")}M.coordEach=n,M.coordReduce=l,M.propEach=c,M.propReduce=t,M.featureEach=f,M.featureReduce=a,M.coordAll=o,M.geomEach=u,M.geomReduce=h,M.flattenEach=i,M.flattenReduce=s,M.segmentEach=p,M.segmentReduce=d,M.lineEach=y,M.lineReduce=b,M.findSegment=m,M.findPoint=_},{"@turf/helpers":62}],64:[function(e,v,M){var r=typeof WeakMap>"u"?e("weak-map"):WeakMap,n=e("gl-buffer"),l=e("gl-vao"),c=new r;function t(f){var a=c.get(f),o=a&&(a._triangleBuffer.handle||a._triangleBuffer.buffer);if(!o||!f.isBuffer(o)){var u=n(f,new Float32Array([-1,-1,-1,4,4,-1]));a=l(f,[{buffer:u,type:f.FLOAT,size:2}]),a._triangleBuffer=u,c.set(f,a)}a.bind(),f.drawArrays(f.TRIANGLES,0,3),a.unbind()}v.exports=t},{"gl-buffer":259,"gl-vao":358,"weak-map":602}],65:[function(e,v,M){v.exports=r;function r(n){var l=0,c=0,t=0,f=0;return n.map(function(a){a=a.slice();var o=a[0],u=o.toUpperCase();if(o!=u)switch(a[0]=u,o){case"a":a[6]+=t,a[7]+=f;break;case"v":a[1]+=f;break;case"h":a[1]+=t;break;default:for(var h=1;h<a.length;)a[h++]+=t,a[h++]+=f}switch(u){case"Z":t=l,f=c;break;case"H":t=a[1];break;case"V":f=a[1];break;case"M":t=l=a[1],f=c=a[2];break;default:t=a[a.length-2],f=a[a.length-1]}return a})}},{}],66:[function(e,v,M){var r=e("pad-left");v.exports=n;function n(l,c,t){c=typeof c=="number"?c:1,t=t||": ";var f=l.split(/\r?\n/),a=String(f.length+c-1).length;return f.map(function(o,u){var h=u+c,i=String(h).length,s=r(h,a-i);return s+t+o}).join(`
`)}},{"pad-left":502}],67:[function(e,v,M){v.exports=l;var r=e("robust-orientation");function n(c,t){for(var f=new Array(t+1),a=0;a<c.length;++a)f[a]=c[a];for(var a=0;a<=c.length;++a){for(var o=c.length;o<=t;++o){for(var u=new Array(t),h=0;h<t;++h)u[h]=Math.pow(o+1-a,h);f[o]=u}var i=r.apply(void 0,f);if(i)return!0}return!1}function l(c){var t=c.length;if(t===0)return[];if(t===1)return[0];for(var f=c[0].length,a=[c[0]],o=[0],u=1;u<t;++u){if(a.push(c[u]),!n(a,f)){a.pop();continue}if(o.push(u),o.length===f+1)return o}return o}},{"robust-orientation":548}],68:[function(e,v,M){v.exports=l;var r=e("delaunay-triangulate"),n=e("circumradius");function l(c,t){return r(t).filter(function(f){for(var a=new Array(f.length),o=0;o<f.length;++o)a[o]=t[f[o]];return n(a)*c<1})}},{circumradius:119,"delaunay-triangulate":171}],69:[function(e,v,M){v.exports=l;var r=e("alpha-complex"),n=e("simplicial-complex-boundary");function l(c,t){return n(r(c,t))}},{"alpha-complex":68,"simplicial-complex-boundary":555}],70:[function(e,v,M){v.exports=r;function r(n,l){if(!n||n.length==null)throw Error("Argument should be an array");l==null?l=1:l=Math.floor(l);for(var c=Array(l*2),t=0;t<l;t++){for(var f=-1/0,a=1/0,o=t,u=n.length;o<u;o+=l)n[o]>f&&(f=n[o]),n[o]<a&&(a=n[o]);c[t]=a,c[l+t]=f}return c}},{}],71:[function(e,v,M){var r=e("array-bounds");v.exports=n;function n(l,c,t){if(!l||l.length==null)throw Error("Argument should be an array");c==null&&(c=1),t==null&&(t=r(l,c));for(var f=0;f<c;f++){var a=t[c+f],o=t[f],u=f,h=l.length;if(a===1/0&&o===-1/0)for(u=f;u<h;u+=c)l[u]=l[u]===a?1:l[u]===o?0:.5;else if(a===1/0)for(u=f;u<h;u+=c)l[u]=l[u]===a?1:0;else if(o===-1/0)for(u=f;u<h;u+=c)l[u]=l[u]===o?0:1;else{var i=a-o;for(u=f;u<h;u+=c)isNaN(l[u])||(l[u]=i===0?.5:(l[u]-o)/i)}}return l}},{"array-bounds":70}],72:[function(e,v,M){v.exports=function(n,l){var c=typeof n=="number",t=typeof l=="number";c&&!t?(l=n,n=0):!c&&!t&&(n=0,l=0),n=n|0,l=l|0;var f=l-n;if(f<0)throw new Error("array length must be positive");for(var a=new Array(f),o=0,u=n;o<f;o++,u++)a[o]=u;return a}},{}],73:[function(e,v,M){(function(r){(function(){var n=e("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function l(C,D){if(C===D)return 0;for(var F=C.length,N=D.length,G=0,U=Math.min(F,N);G<U;++G)if(C[G]!==D[G]){F=C[G],N=D[G];break}return F<N?-1:N<F?1:0}function c(C){return r.Buffer&&typeof r.Buffer.isBuffer=="function"?r.Buffer.isBuffer(C):!!(C!=null&&C._isBuffer)}var t=e("util/"),f=Object.prototype.hasOwnProperty,a=Array.prototype.slice,o=function(){return function(){}.name==="foo"}();function u(C){return Object.prototype.toString.call(C)}function h(C){return c(C)||typeof r.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(C):C?!!(C instanceof DataView||C.buffer&&C.buffer instanceof ArrayBuffer):!1}var i=v.exports=_,s=/\s*function\s+([^\(\s]*)\s*/;function p(C){if(t.isFunction(C)){if(o)return C.name;var D=C.toString(),F=D.match(s);return F&&F[1]}}i.AssertionError=function(D){this.name="AssertionError",this.actual=D.actual,this.expected=D.expected,this.operator=D.operator,D.message?(this.message=D.message,this.generatedMessage=!1):(this.message=b(this),this.generatedMessage=!0);var F=D.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,F);else{var N=new Error;if(N.stack){var G=N.stack,U=p(F),X=G.indexOf(`
`+U);if(X>=0){var I=G.indexOf(`
`,X+1);G=G.substring(I+1)}this.stack=G}}},t.inherits(i.AssertionError,Error);function d(C,D){return typeof C=="string"?C.length<D?C:C.slice(0,D):C}function y(C){if(o||!t.isFunction(C))return t.inspect(C);var D=p(C),F=D?": "+D:"";return"[Function"+F+"]"}function b(C){return d(y(C.actual),128)+" "+C.operator+" "+d(y(C.expected),128)}function m(C,D,F,N,G){throw new i.AssertionError({message:F,actual:C,expected:D,operator:N,stackStartFunction:G})}i.fail=m;function _(C,D){C||m(C,!0,D,"==",i.ok)}i.ok=_,i.equal=function(D,F,N){D!=F&&m(D,F,N,"==",i.equal)},i.notEqual=function(D,F,N){D==F&&m(D,F,N,"!=",i.notEqual)},i.deepEqual=function(D,F,N){T(D,F,!1)||m(D,F,N,"deepEqual",i.deepEqual)},i.deepStrictEqual=function(D,F,N){T(D,F,!0)||m(D,F,N,"deepStrictEqual",i.deepStrictEqual)};function T(C,D,F,N){if(C===D)return!0;if(c(C)&&c(D))return l(C,D)===0;if(t.isDate(C)&&t.isDate(D))return C.getTime()===D.getTime();if(t.isRegExp(C)&&t.isRegExp(D))return C.source===D.source&&C.global===D.global&&C.multiline===D.multiline&&C.lastIndex===D.lastIndex&&C.ignoreCase===D.ignoreCase;if((C===null||typeof C!="object")&&(D===null||typeof D!="object"))return F?C===D:C==D;if(h(C)&&h(D)&&u(C)===u(D)&&!(C instanceof Float32Array||C instanceof Float64Array))return l(new Uint8Array(C.buffer),new Uint8Array(D.buffer))===0;if(c(C)!==c(D))return!1;N=N||{actual:[],expected:[]};var G=N.actual.indexOf(C);return G!==-1&&G===N.expected.indexOf(D)?!0:(N.actual.push(C),N.expected.push(D),A(C,D,F,N))}function g(C){return Object.prototype.toString.call(C)=="[object Arguments]"}function A(C,D,F,N){if(C==null||D===null||D===void 0)return!1;if(t.isPrimitive(C)||t.isPrimitive(D))return C===D;if(F&&Object.getPrototypeOf(C)!==Object.getPrototypeOf(D))return!1;var G=g(C),U=g(D);if(G&&!U||!G&&U)return!1;if(G)return C=a.call(C),D=a.call(D),T(C,D,F);var X=S(C),I=S(D),B,j;if(X.length!==I.length)return!1;for(X.sort(),I.sort(),j=X.length-1;j>=0;j--)if(X[j]!==I[j])return!1;for(j=X.length-1;j>=0;j--)if(B=X[j],!T(C[B],D[B],F,N))return!1;return!0}i.notDeepEqual=function(D,F,N){T(D,F,!1)&&m(D,F,N,"notDeepEqual",i.notDeepEqual)},i.notDeepStrictEqual=k;function k(C,D,F){T(C,D,!0)&&m(C,D,F,"notDeepStrictEqual",k)}i.strictEqual=function(D,F,N){D!==F&&m(D,F,N,"===",i.strictEqual)},i.notStrictEqual=function(D,F,N){D===F&&m(D,F,N,"!==",i.notStrictEqual)};function R(C,D){if(!C||!D)return!1;if(Object.prototype.toString.call(D)=="[object RegExp]")return D.test(C);try{if(C instanceof D)return!0}catch{}return Error.isPrototypeOf(D)?!1:D.call({},C)===!0}function L(C){var D;try{C()}catch(F){D=F}return D}function z(C,D,F,N){var G;if(typeof D!="function")throw new TypeError('"block" argument must be a function');typeof F=="string"&&(N=F,F=null),G=L(D),N=(F&&F.name?" ("+F.name+").":".")+(N?" "+N:"."),C&&!G&&m(G,F,"Missing expected exception"+N);var U=typeof N=="string",X=!C&&t.isError(G),I=!C&&G&&!F;if((X&&U&&R(G,F)||I)&&m(G,F,"Got unwanted exception"+N),C&&G&&F&&!R(G,F)||!C&&G)throw G}i.throws=function(C,D,F){z(!0,C,D,F)},i.doesNotThrow=function(C,D,F){z(!1,C,D,F)},i.ifError=function(C){if(C)throw C};function E(C,D){C||m(C,!0,D,"==",E)}i.strict=n(E,i,{equal:i.strictEqual,deepEqual:i.deepStrictEqual,notEqual:i.notStrictEqual,notDeepEqual:i.notDeepStrictEqual}),i.strict.strict=i.strict;var S=Object.keys||function(C){var D=[];for(var F in C)f.call(C,F)&&D.push(F);return D}}).call(this)}).call(this,typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":499,"util/":76}],74:[function(e,v,M){typeof Object.create=="function"?v.exports=function(n,l){n.super_=l,n.prototype=Object.create(l.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:v.exports=function(n,l){n.super_=l;var c=function(){};c.prototype=l.prototype,n.prototype=new c,n.prototype.constructor=n}},{}],75:[function(e,v,M){v.exports=function(n){return n&&typeof n=="object"&&typeof n.copy=="function"&&typeof n.fill=="function"&&typeof n.readUInt8=="function"}},{}],76:[function(e,v,M){(function(r,n){(function(){var l=/%[sdj%]/g;M.format=function(I){if(!A(I)){for(var B=[],j=0;j<arguments.length;j++)B.push(f(arguments[j]));return B.join(" ")}for(var j=1,H=arguments,K=H.length,te=String(I).replace(l,function(oe){if(oe==="%%")return"%";if(j>=K)return oe;switch(oe){case"%s":return String(H[j++]);case"%d":return Number(H[j++]);case"%j":try{return JSON.stringify(H[j++])}catch{return"[Circular]"}default:return oe}}),J=H[j];j<K;J=H[++j])_(J)||!z(J)?te+=" "+J:te+=" "+f(J);return te},M.deprecate=function(I,B){if(R(n.process))return function(){return M.deprecate(I,B).apply(this,arguments)};if(r.noDeprecation===!0)return I;var j=!1;function H(){if(!j){if(r.throwDeprecation)throw new Error(B);r.traceDeprecation?console.trace(B):console.error(B),j=!0}return I.apply(this,arguments)}return H};var c={},t;M.debuglog=function(I){if(R(t)&&(t={}.NODE_DEBUG||""),I=I.toUpperCase(),!c[I])if(new RegExp("\\b"+I+"\\b","i").test(t)){var B=r.pid;c[I]=function(){var j=M.format.apply(M,arguments);console.error("%s %d: %s",I,B,j)}}else c[I]=function(){};return c[I]};function f(I,B){var j={seen:[],stylize:o};return arguments.length>=3&&(j.depth=arguments[2]),arguments.length>=4&&(j.colors=arguments[3]),m(B)?j.showHidden=B:B&&M._extend(j,B),R(j.showHidden)&&(j.showHidden=!1),R(j.depth)&&(j.depth=2),R(j.colors)&&(j.colors=!1),R(j.customInspect)&&(j.customInspect=!0),j.colors&&(j.stylize=a),h(j,I,j.depth)}M.inspect=f,f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(I,B){var j=f.styles[B];return j?"\x1B["+f.colors[j][0]+"m"+I+"\x1B["+f.colors[j][1]+"m":I}function o(I,B){return I}function u(I){var B={};return I.forEach(function(j,H){B[j]=!0}),B}function h(I,B,j){if(I.customInspect&&B&&C(B.inspect)&&B.inspect!==M.inspect&&!(B.constructor&&B.constructor.prototype===B)){var H=B.inspect(j,I);return A(H)||(H=h(I,H,j)),H}var K=i(I,B);if(K)return K;var te=Object.keys(B),J=u(te);if(I.showHidden&&(te=Object.getOwnPropertyNames(B)),S(B)&&(te.indexOf("message")>=0||te.indexOf("description")>=0))return s(B);if(te.length===0){if(C(B)){var oe=B.name?": "+B.name:"";return I.stylize("[Function"+oe+"]","special")}if(L(B))return I.stylize(RegExp.prototype.toString.call(B),"regexp");if(E(B))return I.stylize(Date.prototype.toString.call(B),"date");if(S(B))return s(B)}var ie="",Q=!1,V=["{","}"];if(b(B)&&(Q=!0,V=["[","]"]),C(B)){var se=B.name?": "+B.name:"";ie=" [Function"+se+"]"}if(L(B)&&(ie=" "+RegExp.prototype.toString.call(B)),E(B)&&(ie=" "+Date.prototype.toUTCString.call(B)),S(B)&&(ie=" "+s(B)),te.length===0&&(!Q||B.length==0))return V[0]+ie+V[1];if(j<0)return L(B)?I.stylize(RegExp.prototype.toString.call(B),"regexp"):I.stylize("[Object]","special");I.seen.push(B);var re;return Q?re=p(I,B,j,J,te):re=te.map(function(ee){return d(I,B,j,J,ee,Q)}),I.seen.pop(),y(re,ie,V)}function i(I,B){if(R(B))return I.stylize("undefined","undefined");if(A(B)){var j="'"+JSON.stringify(B).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return I.stylize(j,"string")}if(g(B))return I.stylize(""+B,"number");if(m(B))return I.stylize(""+B,"boolean");if(_(B))return I.stylize("null","null")}function s(I){return"["+Error.prototype.toString.call(I)+"]"}function p(I,B,j,H,K){for(var te=[],J=0,oe=B.length;J<oe;++J)X(B,String(J))?te.push(d(I,B,j,H,String(J),!0)):te.push("");return K.forEach(function(ie){ie.match(/^\d+$/)||te.push(d(I,B,j,H,ie,!0))}),te}function d(I,B,j,H,K,te){var J,oe,ie;if(ie=Object.getOwnPropertyDescriptor(B,K)||{value:B[K]},ie.get?ie.set?oe=I.stylize("[Getter/Setter]","special"):oe=I.stylize("[Getter]","special"):ie.set&&(oe=I.stylize("[Setter]","special")),X(H,K)||(J="["+K+"]"),oe||(I.seen.indexOf(ie.value)<0?(_(j)?oe=h(I,ie.value,null):oe=h(I,ie.value,j-1),oe.indexOf(`
`)>-1&&(te?oe=oe.split(`
`).map(function(Q){return"  "+Q}).join(`
`).substr(2):oe=`
`+oe.split(`
`).map(function(Q){return"   "+Q}).join(`
`))):oe=I.stylize("[Circular]","special")),R(J)){if(te&&K.match(/^\d+$/))return oe;J=JSON.stringify(""+K),J.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(J=J.substr(1,J.length-2),J=I.stylize(J,"name")):(J=J.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),J=I.stylize(J,"string"))}return J+": "+oe}function y(I,B,j){var H=I.reduce(function(K,te){return te.indexOf(`
`)>=0,K+te.replace(/\u001b\[\d\d?m/g,"").length+1},0);return H>60?j[0]+(B===""?"":B+`
 `)+" "+I.join(`,
  `)+" "+j[1]:j[0]+B+" "+I.join(", ")+" "+j[1]}function b(I){return Array.isArray(I)}M.isArray=b;function m(I){return typeof I=="boolean"}M.isBoolean=m;function _(I){return I===null}M.isNull=_;function T(I){return I==null}M.isNullOrUndefined=T;function g(I){return typeof I=="number"}M.isNumber=g;function A(I){return typeof I=="string"}M.isString=A;function k(I){return typeof I=="symbol"}M.isSymbol=k;function R(I){return I===void 0}M.isUndefined=R;function L(I){return z(I)&&F(I)==="[object RegExp]"}M.isRegExp=L;function z(I){return typeof I=="object"&&I!==null}M.isObject=z;function E(I){return z(I)&&F(I)==="[object Date]"}M.isDate=E;function S(I){return z(I)&&(F(I)==="[object Error]"||I instanceof Error)}M.isError=S;function C(I){return typeof I=="function"}M.isFunction=C;function D(I){return I===null||typeof I=="boolean"||typeof I=="number"||typeof I=="string"||typeof I=="symbol"||typeof I>"u"}M.isPrimitive=D,M.isBuffer=e("./support/isBuffer");function F(I){return Object.prototype.toString.call(I)}function N(I){return I<10?"0"+I.toString(10):I.toString(10)}var G=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function U(){var I=new Date,B=[N(I.getHours()),N(I.getMinutes()),N(I.getSeconds())].join(":");return[I.getDate(),G[I.getMonth()],B].join(" ")}M.log=function(){console.log("%s - %s",U(),M.format.apply(M,arguments))},M.inherits=e("inherits"),M._extend=function(I,B){if(!B||!z(B))return I;for(var j=Object.keys(B),H=j.length;H--;)I[j[H]]=B[j[H]];return I};function X(I,B){return Object.prototype.hasOwnProperty.call(I,B)}}).call(this)}).call(this,e("_process"),typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":75,_process:526,inherits:74}],77:[function(e,v,M){v.exports=function(n){return atob(n)}},{}],78:[function(e,v,M){v.exports=l;var r=e("robust-linear-solve");function n(c){for(var t=0,f=0;f<c.length;++f)t+=c[f];return t}function l(c,t){for(var f=t.length,a=new Array(f+1),o=0;o<f;++o){for(var u=new Array(f+1),h=0;h<=f;++h)u[h]=c[h][o];a[o]=u}a[f]=new Array(f+1);for(var o=0;o<=f;++o)a[f][o]=1;for(var i=new Array(f+1),o=0;o<f;++o)i[o]=t[o];i[f]=1;var s=r(a,i),p=n(s[f+1]);p===0&&(p=1);for(var d=new Array(f+1),o=0;o<=f;++o)d[o]=n(s[o])/p;return d}},{"robust-linear-solve":547}],79:[function(e,v,M){M.byteLength=o,M.toByteArray=h,M.fromByteArray=p;for(var r=[],n=[],l=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,f=c.length;t<f;++t)r[t]=c[t],n[c.charCodeAt(t)]=t;n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63;function a(d){var y=d.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=d.indexOf("=");b===-1&&(b=y);var m=b===y?0:4-b%4;return[b,m]}function o(d){var y=a(d),b=y[0],m=y[1];return(b+m)*3/4-m}function u(d,y,b){return(y+b)*3/4-b}function h(d){var y,b=a(d),m=b[0],_=b[1],T=new l(u(d,m,_)),g=0,A=_>0?m-4:m,k;for(k=0;k<A;k+=4)y=n[d.charCodeAt(k)]<<18|n[d.charCodeAt(k+1)]<<12|n[d.charCodeAt(k+2)]<<6|n[d.charCodeAt(k+3)],T[g++]=y>>16&255,T[g++]=y>>8&255,T[g++]=y&255;return _===2&&(y=n[d.charCodeAt(k)]<<2|n[d.charCodeAt(k+1)]>>4,T[g++]=y&255),_===1&&(y=n[d.charCodeAt(k)]<<10|n[d.charCodeAt(k+1)]<<4|n[d.charCodeAt(k+2)]>>2,T[g++]=y>>8&255,T[g++]=y&255),T}function i(d){return r[d>>18&63]+r[d>>12&63]+r[d>>6&63]+r[d&63]}function s(d,y,b){for(var m,_=[],T=y;T<b;T+=3)m=(d[T]<<16&16711680)+(d[T+1]<<8&65280)+(d[T+2]&255),_.push(i(m));return _.join("")}function p(d){for(var y,b=d.length,m=b%3,_=[],T=16383,g=0,A=b-m;g<A;g+=T)_.push(s(d,g,g+T>A?A:g+T));return m===1?(y=d[b-1],_.push(r[y>>2]+r[y<<4&63]+"==")):m===2&&(y=(d[b-2]<<8)+d[b-1],_.push(r[y>>10]+r[y>>4&63]+r[y<<2&63]+"=")),_.join("")}},{}],80:[function(e,v,M){var r=e("./lib/rationalize");v.exports=n;function n(l,c){return r(l[0].mul(c[1]).add(c[0].mul(l[1])),l[1].mul(c[1]))}},{"./lib/rationalize":90}],81:[function(e,v,M){v.exports=r;function r(n,l){return n[0].mul(l[1]).cmp(l[0].mul(n[1]))}},{}],82:[function(e,v,M){var r=e("./lib/rationalize");v.exports=n;function n(l,c){return r(l[0].mul(c[1]),l[1].mul(c[0]))}},{"./lib/rationalize":90}],83:[function(e,v,M){var r=e("./is-rat"),n=e("./lib/is-bn"),l=e("./lib/num-to-bn"),c=e("./lib/str-to-bn"),t=e("./lib/rationalize"),f=e("./div");v.exports=a;function a(o,u){if(r(o))return u?f(o,a(u)):[o[0].clone(),o[1].clone()];var h=0,i,s;if(n(o))i=o.clone();else if(typeof o=="string")i=c(o);else{if(o===0)return[l(0),l(1)];if(o===Math.floor(o))i=l(o);else{for(;o!==Math.floor(o);)o=o*Math.pow(2,256),h-=256;i=l(o)}}if(r(u))i.mul(u[1]),s=u[0].clone();else if(n(u))s=u.clone();else if(typeof u=="string")s=c(u);else if(!u)s=l(1);else if(u===Math.floor(u))s=l(u);else{for(;u!==Math.floor(u);)u=u*Math.pow(2,256),h+=256;s=l(u)}return h>0?i=i.ushln(h):h<0&&(s=s.ushln(-h)),t(i,s)}},{"./div":82,"./is-rat":84,"./lib/is-bn":88,"./lib/num-to-bn":89,"./lib/rationalize":90,"./lib/str-to-bn":91}],84:[function(e,v,M){var r=e("./lib/is-bn");v.exports=n;function n(l){return Array.isArray(l)&&l.length===2&&r(l[0])&&r(l[1])}},{"./lib/is-bn":88}],85:[function(e,v,M){var r=e("bn.js");v.exports=n;function n(l){return l.cmp(new r(0))}},{"bn.js":99}],86:[function(e,v,M){var r=e("./bn-sign");v.exports=n;function n(l){var c=l.length,t=l.words,f=0;if(c===1)f=t[0];else if(c===2)f=t[0]+t[1]*67108864;else for(var a=0;a<c;a++){var o=t[a];f+=o*Math.pow(67108864,a)}return r(l)*f}},{"./bn-sign":85}],87:[function(e,v,M){var r=e("double-bits"),n=e("bit-twiddle").countTrailingZeros;v.exports=l;function l(c){var t=n(r.lo(c));if(t<32)return t;var f=n(r.hi(c));return f>20?52:f+32}},{"bit-twiddle":97,"double-bits":173}],88:[function(e,v,M){e("bn.js"),v.exports=r;function r(n){return n&&typeof n=="object"&&!!n.words}},{"bn.js":99}],89:[function(e,v,M){var r=e("bn.js"),n=e("double-bits");v.exports=l;function l(c){var t=n.exponent(c);return t<52?new r(c):new r(c*Math.pow(2,52-t)).ushln(t-52)}},{"bn.js":99,"double-bits":173}],90:[function(e,v,M){var r=e("./num-to-bn"),n=e("./bn-sign");v.exports=l;function l(c,t){var f=n(c),a=n(t);if(f===0)return[r(0),r(1)];if(a===0)return[r(0),r(0)];a<0&&(c=c.neg(),t=t.neg());var o=c.gcd(t);return o.cmpn(1)?[c.div(o),t.div(o)]:[c,t]}},{"./bn-sign":85,"./num-to-bn":89}],91:[function(e,v,M){var r=e("bn.js");v.exports=n;function n(l){return new r(l)}},{"bn.js":99}],92:[function(e,v,M){var r=e("./lib/rationalize");v.exports=n;function n(l,c){return r(l[0].mul(c[0]),l[1].mul(c[1]))}},{"./lib/rationalize":90}],93:[function(e,v,M){var r=e("./lib/bn-sign");v.exports=n;function n(l){return r(l[0])*r(l[1])}},{"./lib/bn-sign":85}],94:[function(e,v,M){var r=e("./lib/rationalize");v.exports=n;function n(l,c){return r(l[0].mul(c[1]).sub(l[1].mul(c[0])),l[1].mul(c[1]))}},{"./lib/rationalize":90}],95:[function(e,v,M){var r=e("./lib/bn-to-num"),n=e("./lib/ctz");v.exports=l;function l(c){var t=c[0],f=c[1];if(t.cmpn(0)===0)return 0;var a=t.abs().divmod(f.abs()),o=a.div,u=r(o),h=a.mod,i=t.negative!==f.negative?-1:1;if(h.cmpn(0)===0)return i*u;if(u){var s=n(u)+4,p=r(h.ushln(s).divRound(f));return i*(u+p*Math.pow(2,-s))}else{var d=f.bitLength()-h.bitLength()+53,p=r(h.ushln(d).divRound(f));return d<1023?i*p*Math.pow(2,-d):(p*=Math.pow(2,-1023),i*p*Math.pow(2,1023-d))}}},{"./lib/bn-to-num":86,"./lib/ctz":87}],96:[function(e,v,M){function r(l,c,t,f,a){var o=["function ",l,"(a,l,h,",f.join(","),"){",a?"":"var i=",t?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return a?c.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",c,"){i=m;"),t?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),a?o.push("return -1};"):o.push("return i};"),o.join("")}function n(l,c,t,f){var a=new Function([r("A","x"+l+"y",c,["y"],f),r("P","c(x,y)"+l+"0",c,["y","c"],f),"function dispatchBsearch",t,"(a,y,c,l,h){	if(typeof(c)==='function'){	return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)	}else{	return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)	}}	return dispatchBsearch",t].join(""));return a()}v.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],97:[function(e,v,M){var r=32;M.INT_BITS=r,M.INT_MAX=2147483647,M.INT_MIN=-1<<r-1,M.sign=function(c){return(c>0)-(c<0)},M.abs=function(c){var t=c>>r-1;return(c^t)-t},M.min=function(c,t){return t^(c^t)&-(c<t)},M.max=function(c,t){return c^(c^t)&-(c<t)},M.isPow2=function(c){return!(c&c-1)&&!!c},M.log2=function(c){var t,f;return t=(c>65535)<<4,c>>>=t,f=(c>255)<<3,c>>>=f,t|=f,f=(c>15)<<2,c>>>=f,t|=f,f=(c>3)<<1,c>>>=f,t|=f,t|c>>1},M.log10=function(c){return c>=1e9?9:c>=1e8?8:c>=1e7?7:c>=1e6?6:c>=1e5?5:c>=1e4?4:c>=1e3?3:c>=100?2:c>=10?1:0},M.popCount=function(c){return c=c-(c>>>1&1431655765),c=(c&858993459)+(c>>>2&858993459),(c+(c>>>4)&252645135)*16843009>>>24};function n(c){var t=32;return c&=-c,c&&t--,c&65535&&(t-=16),c&16711935&&(t-=8),c&252645135&&(t-=4),c&858993459&&(t-=2),c&1431655765&&(t-=1),t}M.countTrailingZeros=n,M.nextPow2=function(c){return c+=c===0,--c,c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c+1},M.prevPow2=function(c){return c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c-(c>>>1)},M.parity=function(c){return c^=c>>>16,c^=c>>>8,c^=c>>>4,c&=15,27030>>>c&1};var l=new Array(256);(function(c){for(var t=0;t<256;++t){var f=t,a=t,o=7;for(f>>>=1;f;f>>>=1)a<<=1,a|=f&1,--o;c[t]=a<<o&255}})(l),M.reverse=function(c){return l[c&255]<<24|l[c>>>8&255]<<16|l[c>>>16&255]<<8|l[c>>>24&255]},M.interleave2=function(c,t){return c&=65535,c=(c|c<<8)&16711935,c=(c|c<<4)&252645135,c=(c|c<<2)&858993459,c=(c|c<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,c|t<<1},M.deinterleave2=function(c,t){return c=c>>>t&1431655765,c=(c|c>>>1)&858993459,c=(c|c>>>2)&252645135,c=(c|c>>>4)&16711935,c=(c|c>>>16)&65535,c<<16>>16},M.interleave3=function(c,t,f){return c&=1023,c=(c|c<<16)&4278190335,c=(c|c<<8)&251719695,c=(c|c<<4)&3272356035,c=(c|c<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,c|=t<<1,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,c|f<<2},M.deinterleave3=function(c,t){return c=c>>>t&1227133513,c=(c|c>>>2)&3272356035,c=(c|c>>>4)&251719695,c=(c|c>>>8)&4278190335,c=(c|c>>>16)&1023,c<<22>>22},M.nextCombination=function(c){var t=c|c-1;return t+1|(~t&-~t)-1>>>n(c)+1}},{}],98:[function(e,v,M){var r=e("clamp");v.exports=l;var n=1e20;function l(f,a){a||(a={});var o=a.cutoff==null?.25:a.cutoff,u=a.radius==null?8:a.radius,h=a.channel||0,i,s,p,d,y,b,m,_,T,g,A;if(ArrayBuffer.isView(f)||Array.isArray(f)){if(!a.width||!a.height)throw Error("For raw data width and height should be provided by options");i=a.width,s=a.height,d=f,a.stride?b=a.stride:b=Math.floor(f.length/i/s)}else window.HTMLCanvasElement&&f instanceof window.HTMLCanvasElement?(_=f,m=_.getContext("2d"),i=_.width,s=_.height,T=m.getImageData(0,0,i,s),d=T.data,b=4):window.CanvasRenderingContext2D&&f instanceof window.CanvasRenderingContext2D?(_=f.canvas,m=f,i=_.width,s=_.height,T=m.getImageData(0,0,i,s),d=T.data,b=4):window.ImageData&&f instanceof window.ImageData&&(T=f,i=f.width,s=f.height,d=T.data,b=4);if(p=Math.max(i,s),window.Uint8ClampedArray&&d instanceof window.Uint8ClampedArray||window.Uint8Array&&d instanceof window.Uint8Array)for(y=d,d=Array(i*s),g=0,A=y.length;g<A;g++)d[g]=y[g*b+h]/255;else if(b!==1)throw Error("Raw data can have only 1 value per pixel");var k=Array(i*s),R=Array(i*s),L=Array(p),z=Array(p),E=Array(p+1),S=Array(p);for(g=0,A=i*s;g<A;g++){var C=d[g];k[g]=C===1?0:C===0?n:Math.pow(Math.max(0,.5-C),2),R[g]=C===1?n:C===0?0:Math.pow(Math.max(0,C-.5),2)}c(k,i,s,L,z,S,E),c(R,i,s,L,z,S,E);var D=window.Float32Array?new Float32Array(i*s):new Array(i*s);for(g=0,A=i*s;g<A;g++)D[g]=r(1-((k[g]-R[g])/u+o),0,1);return D}function c(f,a,o,u,h,i,s){for(var p=0;p<a;p++){for(var d=0;d<o;d++)u[d]=f[d*a+p];for(t(u,h,i,s,o),d=0;d<o;d++)f[d*a+p]=h[d]}for(d=0;d<o;d++){for(p=0;p<a;p++)u[p]=f[d*a+p];for(t(u,h,i,s,a),p=0;p<a;p++)f[d*a+p]=Math.sqrt(h[p])}}function t(f,a,o,u,h){o[0]=0,u[0]=-n,u[1]=+n;for(var i=1,s=0;i<h;i++){for(var p=(f[i]+i*i-(f[o[s]]+o[s]*o[s]))/(2*i-2*o[s]);p<=u[s];)s--,p=(f[i]+i*i-(f[o[s]]+o[s]*o[s]))/(2*i-2*o[s]);s++,o[s]=i,u[s]=p,u[s+1]=+n}for(i=0,s=0;i<h;i++){for(;u[s+1]<i;)s++;a[i]=(i-o[s])*(i-o[s])+f[o[s]]}}},{clamp:120}],99:[function(e,v,M){(function(r,n){function l(E,S){if(!E)throw new Error(S||"Assertion failed")}function c(E,S){E.super_=S;var C=function(){};C.prototype=S.prototype,E.prototype=new C,E.prototype.constructor=E}function t(E,S,C){if(t.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((S==="le"||S==="be")&&(C=S,S=10),this._init(E||0,S||10,C||"be"))}typeof r=="object"?r.exports=t:n.BN=t,t.BN=t,t.wordSize=26;var f;try{f=e("buffer").Buffer}catch{}t.isBN=function(S){return S instanceof t?!0:S!==null&&typeof S=="object"&&S.constructor.wordSize===t.wordSize&&Array.isArray(S.words)},t.max=function(S,C){return S.cmp(C)>0?S:C},t.min=function(S,C){return S.cmp(C)<0?S:C},t.prototype._init=function(S,C,D){if(typeof S=="number")return this._initNumber(S,C,D);if(typeof S=="object")return this._initArray(S,C,D);C==="hex"&&(C=16),l(C===(C|0)&&C>=2&&C<=36),S=S.toString().replace(/\s+/g,"");var F=0;S[0]==="-"&&F++,C===16?this._parseHex(S,F):this._parseBase(S,C,F),S[0]==="-"&&(this.negative=1),this.strip(),D==="le"&&this._initArray(this.toArray(),C,D)},t.prototype._initNumber=function(S,C,D){S<0&&(this.negative=1,S=-S),S<67108864?(this.words=[S&67108863],this.length=1):S<4503599627370496?(this.words=[S&67108863,S/67108864&67108863],this.length=2):(l(S<9007199254740992),this.words=[S&67108863,S/67108864&67108863,1],this.length=3),D==="le"&&this._initArray(this.toArray(),C,D)},t.prototype._initArray=function(S,C,D){if(l(typeof S.length=="number"),S.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(S.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var N,G,U=0;if(D==="be")for(F=S.length-1,N=0;F>=0;F-=3)G=S[F]|S[F-1]<<8|S[F-2]<<16,this.words[N]|=G<<U&67108863,this.words[N+1]=G>>>26-U&67108863,U+=24,U>=26&&(U-=26,N++);else if(D==="le")for(F=0,N=0;F<S.length;F+=3)G=S[F]|S[F+1]<<8|S[F+2]<<16,this.words[N]|=G<<U&67108863,this.words[N+1]=G>>>26-U&67108863,U+=24,U>=26&&(U-=26,N++);return this.strip()};function a(E,S,C){for(var D=0,F=Math.min(E.length,C),N=S;N<F;N++){var G=E.charCodeAt(N)-48;D<<=4,G>=49&&G<=54?D|=G-49+10:G>=17&&G<=22?D|=G-17+10:D|=G&15}return D}t.prototype._parseHex=function(S,C){this.length=Math.ceil((S.length-C)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var F,N,G=0;for(D=S.length-6,F=0;D>=C;D-=6)N=a(S,D,D+6),this.words[F]|=N<<G&67108863,this.words[F+1]|=N>>>26-G&4194303,G+=24,G>=26&&(G-=26,F++);D+6!==C&&(N=a(S,C,D+6),this.words[F]|=N<<G&67108863,this.words[F+1]|=N>>>26-G&4194303),this.strip()};function o(E,S,C,D){for(var F=0,N=Math.min(E.length,C),G=S;G<N;G++){var U=E.charCodeAt(G)-48;F*=D,U>=49?F+=U-49+10:U>=17?F+=U-17+10:F+=U}return F}t.prototype._parseBase=function(S,C,D){this.words=[0],this.length=1;for(var F=0,N=1;N<=67108863;N*=C)F++;F--,N=N/C|0;for(var G=S.length-D,U=G%F,X=Math.min(G,G-U)+D,I=0,B=D;B<X;B+=F)I=o(S,B,B+F,C),this.imuln(N),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(U!==0){var j=1;for(I=o(S,B,S.length,C),B=0;B<U;B++)j*=C;this.imuln(j),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}},t.prototype.copy=function(S){S.words=new Array(this.length);for(var C=0;C<this.length;C++)S.words[C]=this.words[C];S.length=this.length,S.negative=this.negative,S.red=this.red},t.prototype.clone=function(){var S=new t(null);return this.copy(S),S},t.prototype._expand=function(S){for(;this.length<S;)this.words[this.length++]=0;return this},t.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},t.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],i=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];t.prototype.toString=function(S,C){S=S||10,C=C|0||1;var D;if(S===16||S==="hex"){D="";for(var F=0,N=0,G=0;G<this.length;G++){var U=this.words[G],X=((U<<F|N)&16777215).toString(16);N=U>>>24-F&16777215,N!==0||G!==this.length-1?D=u[6-X.length]+X+D:D=X+D,F+=2,F>=26&&(F-=26,G--)}for(N!==0&&(D=N.toString(16)+D);D.length%C!==0;)D="0"+D;return this.negative!==0&&(D="-"+D),D}if(S===(S|0)&&S>=2&&S<=36){var I=h[S],B=i[S];D="";var j=this.clone();for(j.negative=0;!j.isZero();){var H=j.modn(B).toString(S);j=j.idivn(B),j.isZero()?D=H+D:D=u[I-H.length]+H+D}for(this.isZero()&&(D="0"+D);D.length%C!==0;)D="0"+D;return this.negative!==0&&(D="-"+D),D}l(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var S=this.words[0];return this.length===2?S+=this.words[1]*67108864:this.length===3&&this.words[2]===1?S+=4503599627370496+this.words[1]*67108864:this.length>2&&l(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-S:S},t.prototype.toJSON=function(){return this.toString(16)},t.prototype.toBuffer=function(S,C){return l(typeof f<"u"),this.toArrayLike(f,S,C)},t.prototype.toArray=function(S,C){return this.toArrayLike(Array,S,C)},t.prototype.toArrayLike=function(S,C,D){var F=this.byteLength(),N=D||Math.max(1,F);l(F<=N,"byte array longer than desired length"),l(N>0,"Requested array length <= 0"),this.strip();var G=C==="le",U=new S(N),X,I,B=this.clone();if(G){for(I=0;!B.isZero();I++)X=B.andln(255),B.iushrn(8),U[I]=X;for(;I<N;I++)U[I]=0}else{for(I=0;I<N-F;I++)U[I]=0;for(I=0;!B.isZero();I++)X=B.andln(255),B.iushrn(8),U[N-I-1]=X}return U},Math.clz32?t.prototype._countBits=function(S){return 32-Math.clz32(S)}:t.prototype._countBits=function(S){var C=S,D=0;return C>=4096&&(D+=13,C>>>=13),C>=64&&(D+=7,C>>>=7),C>=8&&(D+=4,C>>>=4),C>=2&&(D+=2,C>>>=2),D+C},t.prototype._zeroBits=function(S){if(S===0)return 26;var C=S,D=0;return C&8191||(D+=13,C>>>=13),C&127||(D+=7,C>>>=7),C&15||(D+=4,C>>>=4),C&3||(D+=2,C>>>=2),C&1||D++,D},t.prototype.bitLength=function(){var S=this.words[this.length-1],C=this._countBits(S);return(this.length-1)*26+C};function s(E){for(var S=new Array(E.bitLength()),C=0;C<S.length;C++){var D=C/26|0,F=C%26;S[C]=(E.words[D]&1<<F)>>>F}return S}t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var S=0,C=0;C<this.length;C++){var D=this._zeroBits(this.words[C]);if(S+=D,D!==26)break}return S},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(S){return this.negative!==0?this.abs().inotn(S).iaddn(1):this.clone()},t.prototype.fromTwos=function(S){return this.testn(S-1)?this.notn(S).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return this.negative!==0},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(S){for(;this.length<S.length;)this.words[this.length++]=0;for(var C=0;C<S.length;C++)this.words[C]=this.words[C]|S.words[C];return this.strip()},t.prototype.ior=function(S){return l((this.negative|S.negative)===0),this.iuor(S)},t.prototype.or=function(S){return this.length>S.length?this.clone().ior(S):S.clone().ior(this)},t.prototype.uor=function(S){return this.length>S.length?this.clone().iuor(S):S.clone().iuor(this)},t.prototype.iuand=function(S){var C;this.length>S.length?C=S:C=this;for(var D=0;D<C.length;D++)this.words[D]=this.words[D]&S.words[D];return this.length=C.length,this.strip()},t.prototype.iand=function(S){return l((this.negative|S.negative)===0),this.iuand(S)},t.prototype.and=function(S){return this.length>S.length?this.clone().iand(S):S.clone().iand(this)},t.prototype.uand=function(S){return this.length>S.length?this.clone().iuand(S):S.clone().iuand(this)},t.prototype.iuxor=function(S){var C,D;this.length>S.length?(C=this,D=S):(C=S,D=this);for(var F=0;F<D.length;F++)this.words[F]=C.words[F]^D.words[F];if(this!==C)for(;F<C.length;F++)this.words[F]=C.words[F];return this.length=C.length,this.strip()},t.prototype.ixor=function(S){return l((this.negative|S.negative)===0),this.iuxor(S)},t.prototype.xor=function(S){return this.length>S.length?this.clone().ixor(S):S.clone().ixor(this)},t.prototype.uxor=function(S){return this.length>S.length?this.clone().iuxor(S):S.clone().iuxor(this)},t.prototype.inotn=function(S){l(typeof S=="number"&&S>=0);var C=Math.ceil(S/26)|0,D=S%26;this._expand(C),D>0&&C--;for(var F=0;F<C;F++)this.words[F]=~this.words[F]&67108863;return D>0&&(this.words[F]=~this.words[F]&67108863>>26-D),this.strip()},t.prototype.notn=function(S){return this.clone().inotn(S)},t.prototype.setn=function(S,C){l(typeof S=="number"&&S>=0);var D=S/26|0,F=S%26;return this._expand(D+1),C?this.words[D]=this.words[D]|1<<F:this.words[D]=this.words[D]&~(1<<F),this.strip()},t.prototype.iadd=function(S){var C;if(this.negative!==0&&S.negative===0)return this.negative=0,C=this.isub(S),this.negative^=1,this._normSign();if(this.negative===0&&S.negative!==0)return S.negative=0,C=this.isub(S),S.negative=1,C._normSign();var D,F;this.length>S.length?(D=this,F=S):(D=S,F=this);for(var N=0,G=0;G<F.length;G++)C=(D.words[G]|0)+(F.words[G]|0)+N,this.words[G]=C&67108863,N=C>>>26;for(;N!==0&&G<D.length;G++)C=(D.words[G]|0)+N,this.words[G]=C&67108863,N=C>>>26;if(this.length=D.length,N!==0)this.words[this.length]=N,this.length++;else if(D!==this)for(;G<D.length;G++)this.words[G]=D.words[G];return this},t.prototype.add=function(S){var C;return S.negative!==0&&this.negative===0?(S.negative=0,C=this.sub(S),S.negative^=1,C):S.negative===0&&this.negative!==0?(this.negative=0,C=S.sub(this),this.negative=1,C):this.length>S.length?this.clone().iadd(S):S.clone().iadd(this)},t.prototype.isub=function(S){if(S.negative!==0){S.negative=0;var C=this.iadd(S);return S.negative=1,C._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(S),this.negative=1,this._normSign();var D=this.cmp(S);if(D===0)return this.negative=0,this.length=1,this.words[0]=0,this;var F,N;D>0?(F=this,N=S):(F=S,N=this);for(var G=0,U=0;U<N.length;U++)C=(F.words[U]|0)-(N.words[U]|0)+G,G=C>>26,this.words[U]=C&67108863;for(;G!==0&&U<F.length;U++)C=(F.words[U]|0)+G,G=C>>26,this.words[U]=C&67108863;if(G===0&&U<F.length&&F!==this)for(;U<F.length;U++)this.words[U]=F.words[U];return this.length=Math.max(this.length,U),F!==this&&(this.negative=1),this.strip()},t.prototype.sub=function(S){return this.clone().isub(S)};function p(E,S,C){C.negative=S.negative^E.negative;var D=E.length+S.length|0;C.length=D,D=D-1|0;var F=E.words[0]|0,N=S.words[0]|0,G=F*N,U=G&67108863,X=G/67108864|0;C.words[0]=U;for(var I=1;I<D;I++){for(var B=X>>>26,j=X&67108863,H=Math.min(I,S.length-1),K=Math.max(0,I-E.length+1);K<=H;K++){var te=I-K|0;F=E.words[te]|0,N=S.words[K]|0,G=F*N+j,B+=G/67108864|0,j=G&67108863}C.words[I]=j|0,X=B|0}return X!==0?C.words[I]=X|0:C.length--,C.strip()}var d=function(S,C,D){var F=S.words,N=C.words,G=D.words,U=0,X,I,B,j=F[0]|0,H=j&8191,K=j>>>13,te=F[1]|0,J=te&8191,oe=te>>>13,ie=F[2]|0,Q=ie&8191,V=ie>>>13,se=F[3]|0,re=se&8191,ee=se>>>13,ae=F[4]|0,fe=ae&8191,de=ae>>>13,pe=F[5]|0,W=pe&8191,ue=pe>>>13,me=F[6]|0,be=me&8191,ke=me>>>13,Pe=F[7]|0,je=Pe&8191,ze=Pe>>>13,Ze=F[8]|0,tt=Ze&8191,Ce=Ze>>>13,Ae=F[9]|0,Ne=Ae&8191,qe=Ae>>>13,At=N[0]|0,kt=At&8191,Ve=At>>>13,ft=N[1]|0,St=ft&8191,Wt=ft>>>13,Qt=N[2]|0,zt=Qt&8191,$t=Qt>>>13,rr=N[3]|0,Pt=rr&8191,Lt=rr>>>13,dt=N[4]|0,lt=dt&8191,Te=dt>>>13,Le=N[5]|0,Be=Le&8191,et=Le>>>13,Me=N[6]|0,Ie=Me&8191,He=Me>>>13,Xe=N[7]|0,ht=Xe&8191,it=Xe>>>13,Ge=N[8]|0,ot=Ge&8191,Je=Ge>>>13,st=N[9]|0,It=st&8191,Ft=st>>>13;D.negative=S.negative^C.negative,D.length=19,X=Math.imul(H,kt),I=Math.imul(H,Ve),I=I+Math.imul(K,kt)|0,B=Math.imul(K,Ve);var nr=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(nr>>>26)|0,nr&=67108863,X=Math.imul(J,kt),I=Math.imul(J,Ve),I=I+Math.imul(oe,kt)|0,B=Math.imul(oe,Ve),X=X+Math.imul(H,St)|0,I=I+Math.imul(H,Wt)|0,I=I+Math.imul(K,St)|0,B=B+Math.imul(K,Wt)|0;var We=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(We>>>26)|0,We&=67108863,X=Math.imul(Q,kt),I=Math.imul(Q,Ve),I=I+Math.imul(V,kt)|0,B=Math.imul(V,Ve),X=X+Math.imul(J,St)|0,I=I+Math.imul(J,Wt)|0,I=I+Math.imul(oe,St)|0,B=B+Math.imul(oe,Wt)|0,X=X+Math.imul(H,zt)|0,I=I+Math.imul(H,$t)|0,I=I+Math.imul(K,zt)|0,B=B+Math.imul(K,$t)|0;var Fe=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,X=Math.imul(re,kt),I=Math.imul(re,Ve),I=I+Math.imul(ee,kt)|0,B=Math.imul(ee,Ve),X=X+Math.imul(Q,St)|0,I=I+Math.imul(Q,Wt)|0,I=I+Math.imul(V,St)|0,B=B+Math.imul(V,Wt)|0,X=X+Math.imul(J,zt)|0,I=I+Math.imul(J,$t)|0,I=I+Math.imul(oe,zt)|0,B=B+Math.imul(oe,$t)|0,X=X+Math.imul(H,Pt)|0,I=I+Math.imul(H,Lt)|0,I=I+Math.imul(K,Pt)|0,B=B+Math.imul(K,Lt)|0;var _t=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(_t>>>26)|0,_t&=67108863,X=Math.imul(fe,kt),I=Math.imul(fe,Ve),I=I+Math.imul(de,kt)|0,B=Math.imul(de,Ve),X=X+Math.imul(re,St)|0,I=I+Math.imul(re,Wt)|0,I=I+Math.imul(ee,St)|0,B=B+Math.imul(ee,Wt)|0,X=X+Math.imul(Q,zt)|0,I=I+Math.imul(Q,$t)|0,I=I+Math.imul(V,zt)|0,B=B+Math.imul(V,$t)|0,X=X+Math.imul(J,Pt)|0,I=I+Math.imul(J,Lt)|0,I=I+Math.imul(oe,Pt)|0,B=B+Math.imul(oe,Lt)|0,X=X+Math.imul(H,lt)|0,I=I+Math.imul(H,Te)|0,I=I+Math.imul(K,lt)|0,B=B+Math.imul(K,Te)|0;var Mt=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,X=Math.imul(W,kt),I=Math.imul(W,Ve),I=I+Math.imul(ue,kt)|0,B=Math.imul(ue,Ve),X=X+Math.imul(fe,St)|0,I=I+Math.imul(fe,Wt)|0,I=I+Math.imul(de,St)|0,B=B+Math.imul(de,Wt)|0,X=X+Math.imul(re,zt)|0,I=I+Math.imul(re,$t)|0,I=I+Math.imul(ee,zt)|0,B=B+Math.imul(ee,$t)|0,X=X+Math.imul(Q,Pt)|0,I=I+Math.imul(Q,Lt)|0,I=I+Math.imul(V,Pt)|0,B=B+Math.imul(V,Lt)|0,X=X+Math.imul(J,lt)|0,I=I+Math.imul(J,Te)|0,I=I+Math.imul(oe,lt)|0,B=B+Math.imul(oe,Te)|0,X=X+Math.imul(H,Be)|0,I=I+Math.imul(H,et)|0,I=I+Math.imul(K,Be)|0,B=B+Math.imul(K,et)|0;var wt=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(wt>>>26)|0,wt&=67108863,X=Math.imul(be,kt),I=Math.imul(be,Ve),I=I+Math.imul(ke,kt)|0,B=Math.imul(ke,Ve),X=X+Math.imul(W,St)|0,I=I+Math.imul(W,Wt)|0,I=I+Math.imul(ue,St)|0,B=B+Math.imul(ue,Wt)|0,X=X+Math.imul(fe,zt)|0,I=I+Math.imul(fe,$t)|0,I=I+Math.imul(de,zt)|0,B=B+Math.imul(de,$t)|0,X=X+Math.imul(re,Pt)|0,I=I+Math.imul(re,Lt)|0,I=I+Math.imul(ee,Pt)|0,B=B+Math.imul(ee,Lt)|0,X=X+Math.imul(Q,lt)|0,I=I+Math.imul(Q,Te)|0,I=I+Math.imul(V,lt)|0,B=B+Math.imul(V,Te)|0,X=X+Math.imul(J,Be)|0,I=I+Math.imul(J,et)|0,I=I+Math.imul(oe,Be)|0,B=B+Math.imul(oe,et)|0,X=X+Math.imul(H,Ie)|0,I=I+Math.imul(H,He)|0,I=I+Math.imul(K,Ie)|0,B=B+Math.imul(K,He)|0;var Dt=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,X=Math.imul(je,kt),I=Math.imul(je,Ve),I=I+Math.imul(ze,kt)|0,B=Math.imul(ze,Ve),X=X+Math.imul(be,St)|0,I=I+Math.imul(be,Wt)|0,I=I+Math.imul(ke,St)|0,B=B+Math.imul(ke,Wt)|0,X=X+Math.imul(W,zt)|0,I=I+Math.imul(W,$t)|0,I=I+Math.imul(ue,zt)|0,B=B+Math.imul(ue,$t)|0,X=X+Math.imul(fe,Pt)|0,I=I+Math.imul(fe,Lt)|0,I=I+Math.imul(de,Pt)|0,B=B+Math.imul(de,Lt)|0,X=X+Math.imul(re,lt)|0,I=I+Math.imul(re,Te)|0,I=I+Math.imul(ee,lt)|0,B=B+Math.imul(ee,Te)|0,X=X+Math.imul(Q,Be)|0,I=I+Math.imul(Q,et)|0,I=I+Math.imul(V,Be)|0,B=B+Math.imul(V,et)|0,X=X+Math.imul(J,Ie)|0,I=I+Math.imul(J,He)|0,I=I+Math.imul(oe,Ie)|0,B=B+Math.imul(oe,He)|0,X=X+Math.imul(H,ht)|0,I=I+Math.imul(H,it)|0,I=I+Math.imul(K,ht)|0,B=B+Math.imul(K,it)|0;var Rt=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,X=Math.imul(tt,kt),I=Math.imul(tt,Ve),I=I+Math.imul(Ce,kt)|0,B=Math.imul(Ce,Ve),X=X+Math.imul(je,St)|0,I=I+Math.imul(je,Wt)|0,I=I+Math.imul(ze,St)|0,B=B+Math.imul(ze,Wt)|0,X=X+Math.imul(be,zt)|0,I=I+Math.imul(be,$t)|0,I=I+Math.imul(ke,zt)|0,B=B+Math.imul(ke,$t)|0,X=X+Math.imul(W,Pt)|0,I=I+Math.imul(W,Lt)|0,I=I+Math.imul(ue,Pt)|0,B=B+Math.imul(ue,Lt)|0,X=X+Math.imul(fe,lt)|0,I=I+Math.imul(fe,Te)|0,I=I+Math.imul(de,lt)|0,B=B+Math.imul(de,Te)|0,X=X+Math.imul(re,Be)|0,I=I+Math.imul(re,et)|0,I=I+Math.imul(ee,Be)|0,B=B+Math.imul(ee,et)|0,X=X+Math.imul(Q,Ie)|0,I=I+Math.imul(Q,He)|0,I=I+Math.imul(V,Ie)|0,B=B+Math.imul(V,He)|0,X=X+Math.imul(J,ht)|0,I=I+Math.imul(J,it)|0,I=I+Math.imul(oe,ht)|0,B=B+Math.imul(oe,it)|0,X=X+Math.imul(H,ot)|0,I=I+Math.imul(H,Je)|0,I=I+Math.imul(K,ot)|0,B=B+Math.imul(K,Je)|0;var Bt=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,X=Math.imul(Ne,kt),I=Math.imul(Ne,Ve),I=I+Math.imul(qe,kt)|0,B=Math.imul(qe,Ve),X=X+Math.imul(tt,St)|0,I=I+Math.imul(tt,Wt)|0,I=I+Math.imul(Ce,St)|0,B=B+Math.imul(Ce,Wt)|0,X=X+Math.imul(je,zt)|0,I=I+Math.imul(je,$t)|0,I=I+Math.imul(ze,zt)|0,B=B+Math.imul(ze,$t)|0,X=X+Math.imul(be,Pt)|0,I=I+Math.imul(be,Lt)|0,I=I+Math.imul(ke,Pt)|0,B=B+Math.imul(ke,Lt)|0,X=X+Math.imul(W,lt)|0,I=I+Math.imul(W,Te)|0,I=I+Math.imul(ue,lt)|0,B=B+Math.imul(ue,Te)|0,X=X+Math.imul(fe,Be)|0,I=I+Math.imul(fe,et)|0,I=I+Math.imul(de,Be)|0,B=B+Math.imul(de,et)|0,X=X+Math.imul(re,Ie)|0,I=I+Math.imul(re,He)|0,I=I+Math.imul(ee,Ie)|0,B=B+Math.imul(ee,He)|0,X=X+Math.imul(Q,ht)|0,I=I+Math.imul(Q,it)|0,I=I+Math.imul(V,ht)|0,B=B+Math.imul(V,it)|0,X=X+Math.imul(J,ot)|0,I=I+Math.imul(J,Je)|0,I=I+Math.imul(oe,ot)|0,B=B+Math.imul(oe,Je)|0,X=X+Math.imul(H,It)|0,I=I+Math.imul(H,Ft)|0,I=I+Math.imul(K,It)|0,B=B+Math.imul(K,Ft)|0;var Nt=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,X=Math.imul(Ne,St),I=Math.imul(Ne,Wt),I=I+Math.imul(qe,St)|0,B=Math.imul(qe,Wt),X=X+Math.imul(tt,zt)|0,I=I+Math.imul(tt,$t)|0,I=I+Math.imul(Ce,zt)|0,B=B+Math.imul(Ce,$t)|0,X=X+Math.imul(je,Pt)|0,I=I+Math.imul(je,Lt)|0,I=I+Math.imul(ze,Pt)|0,B=B+Math.imul(ze,Lt)|0,X=X+Math.imul(be,lt)|0,I=I+Math.imul(be,Te)|0,I=I+Math.imul(ke,lt)|0,B=B+Math.imul(ke,Te)|0,X=X+Math.imul(W,Be)|0,I=I+Math.imul(W,et)|0,I=I+Math.imul(ue,Be)|0,B=B+Math.imul(ue,et)|0,X=X+Math.imul(fe,Ie)|0,I=I+Math.imul(fe,He)|0,I=I+Math.imul(de,Ie)|0,B=B+Math.imul(de,He)|0,X=X+Math.imul(re,ht)|0,I=I+Math.imul(re,it)|0,I=I+Math.imul(ee,ht)|0,B=B+Math.imul(ee,it)|0,X=X+Math.imul(Q,ot)|0,I=I+Math.imul(Q,Je)|0,I=I+Math.imul(V,ot)|0,B=B+Math.imul(V,Je)|0,X=X+Math.imul(J,It)|0,I=I+Math.imul(J,Ft)|0,I=I+Math.imul(oe,It)|0,B=B+Math.imul(oe,Ft)|0;var er=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(er>>>26)|0,er&=67108863,X=Math.imul(Ne,zt),I=Math.imul(Ne,$t),I=I+Math.imul(qe,zt)|0,B=Math.imul(qe,$t),X=X+Math.imul(tt,Pt)|0,I=I+Math.imul(tt,Lt)|0,I=I+Math.imul(Ce,Pt)|0,B=B+Math.imul(Ce,Lt)|0,X=X+Math.imul(je,lt)|0,I=I+Math.imul(je,Te)|0,I=I+Math.imul(ze,lt)|0,B=B+Math.imul(ze,Te)|0,X=X+Math.imul(be,Be)|0,I=I+Math.imul(be,et)|0,I=I+Math.imul(ke,Be)|0,B=B+Math.imul(ke,et)|0,X=X+Math.imul(W,Ie)|0,I=I+Math.imul(W,He)|0,I=I+Math.imul(ue,Ie)|0,B=B+Math.imul(ue,He)|0,X=X+Math.imul(fe,ht)|0,I=I+Math.imul(fe,it)|0,I=I+Math.imul(de,ht)|0,B=B+Math.imul(de,it)|0,X=X+Math.imul(re,ot)|0,I=I+Math.imul(re,Je)|0,I=I+Math.imul(ee,ot)|0,B=B+Math.imul(ee,Je)|0,X=X+Math.imul(Q,It)|0,I=I+Math.imul(Q,Ft)|0,I=I+Math.imul(V,It)|0,B=B+Math.imul(V,Ft)|0;var qt=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(qt>>>26)|0,qt&=67108863,X=Math.imul(Ne,Pt),I=Math.imul(Ne,Lt),I=I+Math.imul(qe,Pt)|0,B=Math.imul(qe,Lt),X=X+Math.imul(tt,lt)|0,I=I+Math.imul(tt,Te)|0,I=I+Math.imul(Ce,lt)|0,B=B+Math.imul(Ce,Te)|0,X=X+Math.imul(je,Be)|0,I=I+Math.imul(je,et)|0,I=I+Math.imul(ze,Be)|0,B=B+Math.imul(ze,et)|0,X=X+Math.imul(be,Ie)|0,I=I+Math.imul(be,He)|0,I=I+Math.imul(ke,Ie)|0,B=B+Math.imul(ke,He)|0,X=X+Math.imul(W,ht)|0,I=I+Math.imul(W,it)|0,I=I+Math.imul(ue,ht)|0,B=B+Math.imul(ue,it)|0,X=X+Math.imul(fe,ot)|0,I=I+Math.imul(fe,Je)|0,I=I+Math.imul(de,ot)|0,B=B+Math.imul(de,Je)|0,X=X+Math.imul(re,It)|0,I=I+Math.imul(re,Ft)|0,I=I+Math.imul(ee,It)|0,B=B+Math.imul(ee,Ft)|0;var Zt=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,X=Math.imul(Ne,lt),I=Math.imul(Ne,Te),I=I+Math.imul(qe,lt)|0,B=Math.imul(qe,Te),X=X+Math.imul(tt,Be)|0,I=I+Math.imul(tt,et)|0,I=I+Math.imul(Ce,Be)|0,B=B+Math.imul(Ce,et)|0,X=X+Math.imul(je,Ie)|0,I=I+Math.imul(je,He)|0,I=I+Math.imul(ze,Ie)|0,B=B+Math.imul(ze,He)|0,X=X+Math.imul(be,ht)|0,I=I+Math.imul(be,it)|0,I=I+Math.imul(ke,ht)|0,B=B+Math.imul(ke,it)|0,X=X+Math.imul(W,ot)|0,I=I+Math.imul(W,Je)|0,I=I+Math.imul(ue,ot)|0,B=B+Math.imul(ue,Je)|0,X=X+Math.imul(fe,It)|0,I=I+Math.imul(fe,Ft)|0,I=I+Math.imul(de,It)|0,B=B+Math.imul(de,Ft)|0;var _r=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(_r>>>26)|0,_r&=67108863,X=Math.imul(Ne,Be),I=Math.imul(Ne,et),I=I+Math.imul(qe,Be)|0,B=Math.imul(qe,et),X=X+Math.imul(tt,Ie)|0,I=I+Math.imul(tt,He)|0,I=I+Math.imul(Ce,Ie)|0,B=B+Math.imul(Ce,He)|0,X=X+Math.imul(je,ht)|0,I=I+Math.imul(je,it)|0,I=I+Math.imul(ze,ht)|0,B=B+Math.imul(ze,it)|0,X=X+Math.imul(be,ot)|0,I=I+Math.imul(be,Je)|0,I=I+Math.imul(ke,ot)|0,B=B+Math.imul(ke,Je)|0,X=X+Math.imul(W,It)|0,I=I+Math.imul(W,Ft)|0,I=I+Math.imul(ue,It)|0,B=B+Math.imul(ue,Ft)|0;var Gr=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,X=Math.imul(Ne,Ie),I=Math.imul(Ne,He),I=I+Math.imul(qe,Ie)|0,B=Math.imul(qe,He),X=X+Math.imul(tt,ht)|0,I=I+Math.imul(tt,it)|0,I=I+Math.imul(Ce,ht)|0,B=B+Math.imul(Ce,it)|0,X=X+Math.imul(je,ot)|0,I=I+Math.imul(je,Je)|0,I=I+Math.imul(ze,ot)|0,B=B+Math.imul(ze,Je)|0,X=X+Math.imul(be,It)|0,I=I+Math.imul(be,Ft)|0,I=I+Math.imul(ke,It)|0,B=B+Math.imul(ke,Ft)|0;var zr=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(zr>>>26)|0,zr&=67108863,X=Math.imul(Ne,ht),I=Math.imul(Ne,it),I=I+Math.imul(qe,ht)|0,B=Math.imul(qe,it),X=X+Math.imul(tt,ot)|0,I=I+Math.imul(tt,Je)|0,I=I+Math.imul(Ce,ot)|0,B=B+Math.imul(Ce,Je)|0,X=X+Math.imul(je,It)|0,I=I+Math.imul(je,Ft)|0,I=I+Math.imul(ze,It)|0,B=B+Math.imul(ze,Ft)|0;var Or=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(Or>>>26)|0,Or&=67108863,X=Math.imul(Ne,ot),I=Math.imul(Ne,Je),I=I+Math.imul(qe,ot)|0,B=Math.imul(qe,Je),X=X+Math.imul(tt,It)|0,I=I+Math.imul(tt,Ft)|0,I=I+Math.imul(Ce,It)|0,B=B+Math.imul(Ce,Ft)|0;var Mn=(U+X|0)+((I&8191)<<13)|0;U=(B+(I>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,X=Math.imul(Ne,It),I=Math.imul(Ne,Ft),I=I+Math.imul(qe,It)|0,B=Math.imul(qe,Ft);var Yn=(U+X|0)+((I&8191)<<13)|0;return U=(B+(I>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,G[0]=nr,G[1]=We,G[2]=Fe,G[3]=_t,G[4]=Mt,G[5]=wt,G[6]=Dt,G[7]=Rt,G[8]=Bt,G[9]=Nt,G[10]=er,G[11]=qt,G[12]=Zt,G[13]=_r,G[14]=Gr,G[15]=zr,G[16]=Or,G[17]=Mn,G[18]=Yn,U!==0&&(G[19]=U,D.length++),D};Math.imul||(d=p);function y(E,S,C){C.negative=S.negative^E.negative,C.length=E.length+S.length;for(var D=0,F=0,N=0;N<C.length-1;N++){var G=F;F=0;for(var U=D&67108863,X=Math.min(N,S.length-1),I=Math.max(0,N-E.length+1);I<=X;I++){var B=N-I,j=E.words[B]|0,H=S.words[I]|0,K=j*H,te=K&67108863;G=G+(K/67108864|0)|0,te=te+U|0,U=te&67108863,G=G+(te>>>26)|0,F+=G>>>26,G&=67108863}C.words[N]=U,D=G,G=F}return D!==0?C.words[N]=D:C.length--,C.strip()}function b(E,S,C){var D=new m;return D.mulp(E,S,C)}t.prototype.mulTo=function(S,C){var D,F=this.length+S.length;return this.length===10&&S.length===10?D=d(this,S,C):F<63?D=p(this,S,C):F<1024?D=y(this,S,C):D=b(this,S,C),D};function m(E,S){this.x=E,this.y=S}m.prototype.makeRBT=function(S){for(var C=new Array(S),D=t.prototype._countBits(S)-1,F=0;F<S;F++)C[F]=this.revBin(F,D,S);return C},m.prototype.revBin=function(S,C,D){if(S===0||S===D-1)return S;for(var F=0,N=0;N<C;N++)F|=(S&1)<<C-N-1,S>>=1;return F},m.prototype.permute=function(S,C,D,F,N,G){for(var U=0;U<G;U++)F[U]=C[S[U]],N[U]=D[S[U]]},m.prototype.transform=function(S,C,D,F,N,G){this.permute(G,S,C,D,F,N);for(var U=1;U<N;U<<=1)for(var X=U<<1,I=Math.cos(2*Math.PI/X),B=Math.sin(2*Math.PI/X),j=0;j<N;j+=X)for(var H=I,K=B,te=0;te<U;te++){var J=D[j+te],oe=F[j+te],ie=D[j+te+U],Q=F[j+te+U],V=H*ie-K*Q;Q=H*Q+K*ie,ie=V,D[j+te]=J+ie,F[j+te]=oe+Q,D[j+te+U]=J-ie,F[j+te+U]=oe-Q,te!==X&&(V=I*H-B*K,K=I*K+B*H,H=V)}},m.prototype.guessLen13b=function(S,C){var D=Math.max(C,S)|1,F=D&1,N=0;for(D=D/2|0;D;D=D>>>1)N++;return 1<<N+1+F},m.prototype.conjugate=function(S,C,D){if(!(D<=1))for(var F=0;F<D/2;F++){var N=S[F];S[F]=S[D-F-1],S[D-F-1]=N,N=C[F],C[F]=-C[D-F-1],C[D-F-1]=-N}},m.prototype.normalize13b=function(S,C){for(var D=0,F=0;F<C/2;F++){var N=Math.round(S[2*F+1]/C)*8192+Math.round(S[2*F]/C)+D;S[F]=N&67108863,N<67108864?D=0:D=N/67108864|0}return S},m.prototype.convert13b=function(S,C,D,F){for(var N=0,G=0;G<C;G++)N=N+(S[G]|0),D[2*G]=N&8191,N=N>>>13,D[2*G+1]=N&8191,N=N>>>13;for(G=2*C;G<F;++G)D[G]=0;l(N===0),l((N&-8192)===0)},m.prototype.stub=function(S){for(var C=new Array(S),D=0;D<S;D++)C[D]=0;return C},m.prototype.mulp=function(S,C,D){var F=2*this.guessLen13b(S.length,C.length),N=this.makeRBT(F),G=this.stub(F),U=new Array(F),X=new Array(F),I=new Array(F),B=new Array(F),j=new Array(F),H=new Array(F),K=D.words;K.length=F,this.convert13b(S.words,S.length,U,F),this.convert13b(C.words,C.length,B,F),this.transform(U,G,X,I,F,N),this.transform(B,G,j,H,F,N);for(var te=0;te<F;te++){var J=X[te]*j[te]-I[te]*H[te];I[te]=X[te]*H[te]+I[te]*j[te],X[te]=J}return this.conjugate(X,I,F),this.transform(X,I,K,G,F,N),this.conjugate(K,G,F),this.normalize13b(K,F),D.negative=S.negative^C.negative,D.length=S.length+C.length,D.strip()},t.prototype.mul=function(S){var C=new t(null);return C.words=new Array(this.length+S.length),this.mulTo(S,C)},t.prototype.mulf=function(S){var C=new t(null);return C.words=new Array(this.length+S.length),b(this,S,C)},t.prototype.imul=function(S){return this.clone().mulTo(S,this)},t.prototype.imuln=function(S){l(typeof S=="number"),l(S<67108864);for(var C=0,D=0;D<this.length;D++){var F=(this.words[D]|0)*S,N=(F&67108863)+(C&67108863);C>>=26,C+=F/67108864|0,C+=N>>>26,this.words[D]=N&67108863}return C!==0&&(this.words[D]=C,this.length++),this},t.prototype.muln=function(S){return this.clone().imuln(S)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(S){var C=s(S);if(C.length===0)return new t(1);for(var D=this,F=0;F<C.length&&C[F]===0;F++,D=D.sqr());if(++F<C.length)for(var N=D.sqr();F<C.length;F++,N=N.sqr())C[F]!==0&&(D=D.mul(N));return D},t.prototype.iushln=function(S){l(typeof S=="number"&&S>=0);var C=S%26,D=(S-C)/26,F=67108863>>>26-C<<26-C,N;if(C!==0){var G=0;for(N=0;N<this.length;N++){var U=this.words[N]&F,X=(this.words[N]|0)-U<<C;this.words[N]=X|G,G=U>>>26-C}G&&(this.words[N]=G,this.length++)}if(D!==0){for(N=this.length-1;N>=0;N--)this.words[N+D]=this.words[N];for(N=0;N<D;N++)this.words[N]=0;this.length+=D}return this.strip()},t.prototype.ishln=function(S){return l(this.negative===0),this.iushln(S)},t.prototype.iushrn=function(S,C,D){l(typeof S=="number"&&S>=0);var F;C?F=(C-C%26)/26:F=0;var N=S%26,G=Math.min((S-N)/26,this.length),U=67108863^67108863>>>N<<N,X=D;if(F-=G,F=Math.max(0,F),X){for(var I=0;I<G;I++)X.words[I]=this.words[I];X.length=G}if(G!==0)if(this.length>G)for(this.length-=G,I=0;I<this.length;I++)this.words[I]=this.words[I+G];else this.words[0]=0,this.length=1;var B=0;for(I=this.length-1;I>=0&&(B!==0||I>=F);I--){var j=this.words[I]|0;this.words[I]=B<<26-N|j>>>N,B=j&U}return X&&B!==0&&(X.words[X.length++]=B),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},t.prototype.ishrn=function(S,C,D){return l(this.negative===0),this.iushrn(S,C,D)},t.prototype.shln=function(S){return this.clone().ishln(S)},t.prototype.ushln=function(S){return this.clone().iushln(S)},t.prototype.shrn=function(S){return this.clone().ishrn(S)},t.prototype.ushrn=function(S){return this.clone().iushrn(S)},t.prototype.testn=function(S){l(typeof S=="number"&&S>=0);var C=S%26,D=(S-C)/26,F=1<<C;if(this.length<=D)return!1;var N=this.words[D];return!!(N&F)},t.prototype.imaskn=function(S){l(typeof S=="number"&&S>=0);var C=S%26,D=(S-C)/26;if(l(this.negative===0,"imaskn works only with positive numbers"),this.length<=D)return this;if(C!==0&&D++,this.length=Math.min(D,this.length),C!==0){var F=67108863^67108863>>>C<<C;this.words[this.length-1]&=F}return this.strip()},t.prototype.maskn=function(S){return this.clone().imaskn(S)},t.prototype.iaddn=function(S){return l(typeof S=="number"),l(S<67108864),S<0?this.isubn(-S):this.negative!==0?this.length===1&&(this.words[0]|0)<S?(this.words[0]=S-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(S),this.negative=1,this):this._iaddn(S)},t.prototype._iaddn=function(S){this.words[0]+=S;for(var C=0;C<this.length&&this.words[C]>=67108864;C++)this.words[C]-=67108864,C===this.length-1?this.words[C+1]=1:this.words[C+1]++;return this.length=Math.max(this.length,C+1),this},t.prototype.isubn=function(S){if(l(typeof S=="number"),l(S<67108864),S<0)return this.iaddn(-S);if(this.negative!==0)return this.negative=0,this.iaddn(S),this.negative=1,this;if(this.words[0]-=S,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var C=0;C<this.length&&this.words[C]<0;C++)this.words[C]+=67108864,this.words[C+1]-=1;return this.strip()},t.prototype.addn=function(S){return this.clone().iaddn(S)},t.prototype.subn=function(S){return this.clone().isubn(S)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(S,C,D){var F=S.length+D,N;this._expand(F);var G,U=0;for(N=0;N<S.length;N++){G=(this.words[N+D]|0)+U;var X=(S.words[N]|0)*C;G-=X&67108863,U=(G>>26)-(X/67108864|0),this.words[N+D]=G&67108863}for(;N<this.length-D;N++)G=(this.words[N+D]|0)+U,U=G>>26,this.words[N+D]=G&67108863;if(U===0)return this.strip();for(l(U===-1),U=0,N=0;N<this.length;N++)G=-(this.words[N]|0)+U,U=G>>26,this.words[N]=G&67108863;return this.negative=1,this.strip()},t.prototype._wordDiv=function(S,C){var D=this.length-S.length,F=this.clone(),N=S,G=N.words[N.length-1]|0,U=this._countBits(G);D=26-U,D!==0&&(N=N.ushln(D),F.iushln(D),G=N.words[N.length-1]|0);var X=F.length-N.length,I;if(C!=="mod"){I=new t(null),I.length=X+1,I.words=new Array(I.length);for(var B=0;B<I.length;B++)I.words[B]=0}var j=F.clone()._ishlnsubmul(N,1,X);j.negative===0&&(F=j,I&&(I.words[X]=1));for(var H=X-1;H>=0;H--){var K=(F.words[N.length+H]|0)*67108864+(F.words[N.length+H-1]|0);for(K=Math.min(K/G|0,67108863),F._ishlnsubmul(N,K,H);F.negative!==0;)K--,F.negative=0,F._ishlnsubmul(N,1,H),F.isZero()||(F.negative^=1);I&&(I.words[H]=K)}return I&&I.strip(),F.strip(),C!=="div"&&D!==0&&F.iushrn(D),{div:I||null,mod:F}},t.prototype.divmod=function(S,C,D){if(l(!S.isZero()),this.isZero())return{div:new t(0),mod:new t(0)};var F,N,G;return this.negative!==0&&S.negative===0?(G=this.neg().divmod(S,C),C!=="mod"&&(F=G.div.neg()),C!=="div"&&(N=G.mod.neg(),D&&N.negative!==0&&N.iadd(S)),{div:F,mod:N}):this.negative===0&&S.negative!==0?(G=this.divmod(S.neg(),C),C!=="mod"&&(F=G.div.neg()),{div:F,mod:G.mod}):this.negative&S.negative?(G=this.neg().divmod(S.neg(),C),C!=="div"&&(N=G.mod.neg(),D&&N.negative!==0&&N.isub(S)),{div:G.div,mod:N}):S.length>this.length||this.cmp(S)<0?{div:new t(0),mod:this}:S.length===1?C==="div"?{div:this.divn(S.words[0]),mod:null}:C==="mod"?{div:null,mod:new t(this.modn(S.words[0]))}:{div:this.divn(S.words[0]),mod:new t(this.modn(S.words[0]))}:this._wordDiv(S,C)},t.prototype.div=function(S){return this.divmod(S,"div",!1).div},t.prototype.mod=function(S){return this.divmod(S,"mod",!1).mod},t.prototype.umod=function(S){return this.divmod(S,"mod",!0).mod},t.prototype.divRound=function(S){var C=this.divmod(S);if(C.mod.isZero())return C.div;var D=C.div.negative!==0?C.mod.isub(S):C.mod,F=S.ushrn(1),N=S.andln(1),G=D.cmp(F);return G<0||N===1&&G===0?C.div:C.div.negative!==0?C.div.isubn(1):C.div.iaddn(1)},t.prototype.modn=function(S){l(S<=67108863);for(var C=(1<<26)%S,D=0,F=this.length-1;F>=0;F--)D=(C*D+(this.words[F]|0))%S;return D},t.prototype.idivn=function(S){l(S<=67108863);for(var C=0,D=this.length-1;D>=0;D--){var F=(this.words[D]|0)+C*67108864;this.words[D]=F/S|0,C=F%S}return this.strip()},t.prototype.divn=function(S){return this.clone().idivn(S)},t.prototype.egcd=function(S){l(S.negative===0),l(!S.isZero());var C=this,D=S.clone();C.negative!==0?C=C.umod(S):C=C.clone();for(var F=new t(1),N=new t(0),G=new t(0),U=new t(1),X=0;C.isEven()&&D.isEven();)C.iushrn(1),D.iushrn(1),++X;for(var I=D.clone(),B=C.clone();!C.isZero();){for(var j=0,H=1;!(C.words[0]&H)&&j<26;++j,H<<=1);if(j>0)for(C.iushrn(j);j-- >0;)(F.isOdd()||N.isOdd())&&(F.iadd(I),N.isub(B)),F.iushrn(1),N.iushrn(1);for(var K=0,te=1;!(D.words[0]&te)&&K<26;++K,te<<=1);if(K>0)for(D.iushrn(K);K-- >0;)(G.isOdd()||U.isOdd())&&(G.iadd(I),U.isub(B)),G.iushrn(1),U.iushrn(1);C.cmp(D)>=0?(C.isub(D),F.isub(G),N.isub(U)):(D.isub(C),G.isub(F),U.isub(N))}return{a:G,b:U,gcd:D.iushln(X)}},t.prototype._invmp=function(S){l(S.negative===0),l(!S.isZero());var C=this,D=S.clone();C.negative!==0?C=C.umod(S):C=C.clone();for(var F=new t(1),N=new t(0),G=D.clone();C.cmpn(1)>0&&D.cmpn(1)>0;){for(var U=0,X=1;!(C.words[0]&X)&&U<26;++U,X<<=1);if(U>0)for(C.iushrn(U);U-- >0;)F.isOdd()&&F.iadd(G),F.iushrn(1);for(var I=0,B=1;!(D.words[0]&B)&&I<26;++I,B<<=1);if(I>0)for(D.iushrn(I);I-- >0;)N.isOdd()&&N.iadd(G),N.iushrn(1);C.cmp(D)>=0?(C.isub(D),F.isub(N)):(D.isub(C),N.isub(F))}var j;return C.cmpn(1)===0?j=F:j=N,j.cmpn(0)<0&&j.iadd(S),j},t.prototype.gcd=function(S){if(this.isZero())return S.abs();if(S.isZero())return this.abs();var C=this.clone(),D=S.clone();C.negative=0,D.negative=0;for(var F=0;C.isEven()&&D.isEven();F++)C.iushrn(1),D.iushrn(1);do{for(;C.isEven();)C.iushrn(1);for(;D.isEven();)D.iushrn(1);var N=C.cmp(D);if(N<0){var G=C;C=D,D=G}else if(N===0||D.cmpn(1)===0)break;C.isub(D)}while(!0);return D.iushln(F)},t.prototype.invm=function(S){return this.egcd(S).a.umod(S)},t.prototype.isEven=function(){return(this.words[0]&1)===0},t.prototype.isOdd=function(){return(this.words[0]&1)===1},t.prototype.andln=function(S){return this.words[0]&S},t.prototype.bincn=function(S){l(typeof S=="number");var C=S%26,D=(S-C)/26,F=1<<C;if(this.length<=D)return this._expand(D+1),this.words[D]|=F,this;for(var N=F,G=D;N!==0&&G<this.length;G++){var U=this.words[G]|0;U+=N,N=U>>>26,U&=67108863,this.words[G]=U}return N!==0&&(this.words[G]=N,this.length++),this},t.prototype.isZero=function(){return this.length===1&&this.words[0]===0},t.prototype.cmpn=function(S){var C=S<0;if(this.negative!==0&&!C)return-1;if(this.negative===0&&C)return 1;this.strip();var D;if(this.length>1)D=1;else{C&&(S=-S),l(S<=67108863,"Number is too big");var F=this.words[0]|0;D=F===S?0:F<S?-1:1}return this.negative!==0?-D|0:D},t.prototype.cmp=function(S){if(this.negative!==0&&S.negative===0)return-1;if(this.negative===0&&S.negative!==0)return 1;var C=this.ucmp(S);return this.negative!==0?-C|0:C},t.prototype.ucmp=function(S){if(this.length>S.length)return 1;if(this.length<S.length)return-1;for(var C=0,D=this.length-1;D>=0;D--){var F=this.words[D]|0,N=S.words[D]|0;if(F!==N){F<N?C=-1:F>N&&(C=1);break}}return C},t.prototype.gtn=function(S){return this.cmpn(S)===1},t.prototype.gt=function(S){return this.cmp(S)===1},t.prototype.gten=function(S){return this.cmpn(S)>=0},t.prototype.gte=function(S){return this.cmp(S)>=0},t.prototype.ltn=function(S){return this.cmpn(S)===-1},t.prototype.lt=function(S){return this.cmp(S)===-1},t.prototype.lten=function(S){return this.cmpn(S)<=0},t.prototype.lte=function(S){return this.cmp(S)<=0},t.prototype.eqn=function(S){return this.cmpn(S)===0},t.prototype.eq=function(S){return this.cmp(S)===0},t.red=function(S){return new L(S)},t.prototype.toRed=function(S){return l(!this.red,"Already a number in reduction context"),l(this.negative===0,"red works only with positives"),S.convertTo(this)._forceRed(S)},t.prototype.fromRed=function(){return l(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(S){return this.red=S,this},t.prototype.forceRed=function(S){return l(!this.red,"Already a number in reduction context"),this._forceRed(S)},t.prototype.redAdd=function(S){return l(this.red,"redAdd works only with red numbers"),this.red.add(this,S)},t.prototype.redIAdd=function(S){return l(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,S)},t.prototype.redSub=function(S){return l(this.red,"redSub works only with red numbers"),this.red.sub(this,S)},t.prototype.redISub=function(S){return l(this.red,"redISub works only with red numbers"),this.red.isub(this,S)},t.prototype.redShl=function(S){return l(this.red,"redShl works only with red numbers"),this.red.shl(this,S)},t.prototype.redMul=function(S){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.mul(this,S)},t.prototype.redIMul=function(S){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.imul(this,S)},t.prototype.redSqr=function(){return l(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return l(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return l(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return l(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return l(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(S){return l(this.red&&!S.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,S)};var _={k256:null,p224:null,p192:null,p25519:null};function T(E,S){this.name=E,this.p=new t(S,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}T.prototype._tmp=function(){var S=new t(null);return S.words=new Array(Math.ceil(this.n/13)),S},T.prototype.ireduce=function(S){var C=S,D;do this.split(C,this.tmp),C=this.imulK(C),C=C.iadd(this.tmp),D=C.bitLength();while(D>this.n);var F=D<this.n?-1:C.ucmp(this.p);return F===0?(C.words[0]=0,C.length=1):F>0?C.isub(this.p):C.strip(),C},T.prototype.split=function(S,C){S.iushrn(this.n,0,C)},T.prototype.imulK=function(S){return S.imul(this.k)};function g(){T.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(g,T),g.prototype.split=function(S,C){for(var D=4194303,F=Math.min(S.length,9),N=0;N<F;N++)C.words[N]=S.words[N];if(C.length=F,S.length<=9){S.words[0]=0,S.length=1;return}var G=S.words[9];for(C.words[C.length++]=G&D,N=10;N<S.length;N++){var U=S.words[N]|0;S.words[N-10]=(U&D)<<4|G>>>22,G=U}G>>>=22,S.words[N-10]=G,G===0&&S.length>10?S.length-=10:S.length-=9},g.prototype.imulK=function(S){S.words[S.length]=0,S.words[S.length+1]=0,S.length+=2;for(var C=0,D=0;D<S.length;D++){var F=S.words[D]|0;C+=F*977,S.words[D]=C&67108863,C=F*64+(C/67108864|0)}return S.words[S.length-1]===0&&(S.length--,S.words[S.length-1]===0&&S.length--),S};function A(){T.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(A,T);function k(){T.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(k,T);function R(){T.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(R,T),R.prototype.imulK=function(S){for(var C=0,D=0;D<S.length;D++){var F=(S.words[D]|0)*19+C,N=F&67108863;F>>>=26,S.words[D]=N,C=F}return C!==0&&(S.words[S.length++]=C),S},t._prime=function(S){if(_[S])return _[S];var C;if(S==="k256")C=new g;else if(S==="p224")C=new A;else if(S==="p192")C=new k;else if(S==="p25519")C=new R;else throw new Error("Unknown prime "+S);return _[S]=C,C};function L(E){if(typeof E=="string"){var S=t._prime(E);this.m=S.p,this.prime=S}else l(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}L.prototype._verify1=function(S){l(S.negative===0,"red works only with positives"),l(S.red,"red works only with red numbers")},L.prototype._verify2=function(S,C){l((S.negative|C.negative)===0,"red works only with positives"),l(S.red&&S.red===C.red,"red works only with red numbers")},L.prototype.imod=function(S){return this.prime?this.prime.ireduce(S)._forceRed(this):S.umod(this.m)._forceRed(this)},L.prototype.neg=function(S){return S.isZero()?S.clone():this.m.sub(S)._forceRed(this)},L.prototype.add=function(S,C){this._verify2(S,C);var D=S.add(C);return D.cmp(this.m)>=0&&D.isub(this.m),D._forceRed(this)},L.prototype.iadd=function(S,C){this._verify2(S,C);var D=S.iadd(C);return D.cmp(this.m)>=0&&D.isub(this.m),D},L.prototype.sub=function(S,C){this._verify2(S,C);var D=S.sub(C);return D.cmpn(0)<0&&D.iadd(this.m),D._forceRed(this)},L.prototype.isub=function(S,C){this._verify2(S,C);var D=S.isub(C);return D.cmpn(0)<0&&D.iadd(this.m),D},L.prototype.shl=function(S,C){return this._verify1(S),this.imod(S.ushln(C))},L.prototype.imul=function(S,C){return this._verify2(S,C),this.imod(S.imul(C))},L.prototype.mul=function(S,C){return this._verify2(S,C),this.imod(S.mul(C))},L.prototype.isqr=function(S){return this.imul(S,S.clone())},L.prototype.sqr=function(S){return this.mul(S,S)},L.prototype.sqrt=function(S){if(S.isZero())return S.clone();var C=this.m.andln(3);if(l(C%2===1),C===3){var D=this.m.add(new t(1)).iushrn(2);return this.pow(S,D)}for(var F=this.m.subn(1),N=0;!F.isZero()&&F.andln(1)===0;)N++,F.iushrn(1);l(!F.isZero());var G=new t(1).toRed(this),U=G.redNeg(),X=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new t(2*I*I).toRed(this);this.pow(I,X).cmp(U)!==0;)I.redIAdd(U);for(var B=this.pow(I,F),j=this.pow(S,F.addn(1).iushrn(1)),H=this.pow(S,F),K=N;H.cmp(G)!==0;){for(var te=H,J=0;te.cmp(G)!==0;J++)te=te.redSqr();l(J<K);var oe=this.pow(B,new t(1).iushln(K-J-1));j=j.redMul(oe),B=oe.redSqr(),H=H.redMul(B),K=J}return j},L.prototype.invm=function(S){var C=S._invmp(this.m);return C.negative!==0?(C.negative=0,this.imod(C).redNeg()):this.imod(C)},L.prototype.pow=function(S,C){if(C.isZero())return new t(1).toRed(this);if(C.cmpn(1)===0)return S.clone();var D=4,F=new Array(1<<D);F[0]=new t(1).toRed(this),F[1]=S;for(var N=2;N<F.length;N++)F[N]=this.mul(F[N-1],S);var G=F[0],U=0,X=0,I=C.bitLength()%26;for(I===0&&(I=26),N=C.length-1;N>=0;N--){for(var B=C.words[N],j=I-1;j>=0;j--){var H=B>>j&1;if(G!==F[0]&&(G=this.sqr(G)),H===0&&U===0){X=0;continue}U<<=1,U|=H,X++,!(X!==D&&(N!==0||j!==0))&&(G=this.mul(G,F[U]),X=0,U=0)}I=26}return G},L.prototype.convertTo=function(S){var C=S.umod(this.m);return C===S?C.clone():C},L.prototype.convertFrom=function(S){var C=S.clone();return C.red=null,C},t.mont=function(S){return new z(S)};function z(E){L.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(z,L),z.prototype.convertTo=function(S){return this.imod(S.ushln(this.shift))},z.prototype.convertFrom=function(S){var C=this.imod(S.mul(this.rinv));return C.red=null,C},z.prototype.imul=function(S,C){if(S.isZero()||C.isZero())return S.words[0]=0,S.length=1,S;var D=S.imul(C),F=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=D.isub(F).iushrn(this.shift),G=N;return N.cmp(this.m)>=0?G=N.isub(this.m):N.cmpn(0)<0&&(G=N.iadd(this.m)),G._forceRed(this)},z.prototype.mul=function(S,C){if(S.isZero()||C.isZero())return new t(0)._forceRed(this);var D=S.mul(C),F=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=D.isub(F).iushrn(this.shift),G=N;return N.cmp(this.m)>=0?G=N.isub(this.m):N.cmpn(0)<0&&(G=N.iadd(this.m)),G._forceRed(this)},z.prototype.invm=function(S){var C=this.imod(S._invmp(this.m).mul(this.r2));return C._forceRed(this)}})(typeof v>"u"||v,this)},{buffer:108}],100:[function(e,v,M){v.exports=r;function r(n){var l,c,t,f=n.length,a=0;for(l=0;l<f;++l)a+=n[l].length;var o=new Array(a),u=0;for(l=0;l<f;++l){var h=n[l],i=h.length;for(c=0;c<i;++c){var s=o[u++]=new Array(i-1),p=0;for(t=0;t<i;++t)t!==c&&(s[p++]=h[t]);if(c&1){var d=s[1];s[1]=s[0],s[0]=d}}}return o}},{}],101:[function(e,v,M){v.exports=i;var r=e("typedarray-pool"),n=e("./lib/sweep"),l=e("./lib/intersect");function c(s,p){for(var d=0;d<s;++d)if(!(p[d]<=p[d+s]))return!0;return!1}function t(s,p,d,y){for(var b=0,m=0,_=0,T=s.length;_<T;++_){var g=s[_];if(!c(p,g)){for(var A=0;A<2*p;++A)d[b++]=g[A];y[m++]=_}}return m}function f(s,p,d,y){var b=s.length,m=p.length;if(!(b<=0||m<=0)){var _=s[0].length>>>1;if(!(_<=0)){var T,g=r.mallocDouble(2*_*b),A=r.mallocInt32(b);if(b=t(s,_,g,A),b>0){if(_===1&&y)n.init(b),T=n.sweepComplete(_,d,0,b,g,A,0,b,g,A);else{var k=r.mallocDouble(2*_*m),R=r.mallocInt32(m);m=t(p,_,k,R),m>0&&(n.init(b+m),_===1?T=n.sweepBipartite(_,d,0,b,g,A,0,m,k,R):T=l(_,d,y,b,g,A,m,k,R),r.free(k),r.free(R))}r.free(g),r.free(A)}return T}}}var a;function o(s,p){a.push([s,p])}function u(s){return a=[],f(s,s,o,!0),a}function h(s,p){return a=[],f(s,p,o,!1),a}function i(s,p,d){switch(arguments.length){case 1:return u(s);case 2:return typeof p=="function"?f(s,s,p,!0):h(s,p);case 3:return f(s,p,d,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":103,"./lib/sweep":107,"typedarray-pool":595}],102:[function(e,v,M){var r="d",n="ax",l="vv",c="fp",t="es",f="rs",a="re",o="rb",u="ri",h="rp",i="bs",s="be",p="bb",d="bi",y="bp",b="rv",m="Q",_=[r,n,l,f,a,o,u,i,s,p,d];function T(A,k,R){var L="bruteForce"+(A?"Red":"Blue")+(k?"Flip":"")+(R?"Full":""),z=["function ",L,"(",_.join(),"){","var ",t,"=2*",r,";"],E="for(var i="+f+","+h+"="+t+"*"+f+";i<"+a+";++i,"+h+"+="+t+"){var x0="+o+"["+n+"+"+h+"],x1="+o+"["+n+"+"+h+"+"+r+"],xi="+u+"[i];",S="for(var j="+i+","+y+"="+t+"*"+i+";j<"+s+";++j,"+y+"+="+t+"){var y0="+p+"["+n+"+"+y+"],"+(R?"y1="+p+"["+n+"+"+y+"+"+r+"],":"")+"yi="+d+"[j];";return A?z.push(E,m,":",S):z.push(S,m,":",E),R?z.push("if(y1<x0||x1<y0)continue;"):k?z.push("if(y0<=x0||x1<y0)continue;"):z.push("if(y0<x0||x1<y0)continue;"),z.push("for(var k="+n+"+1;k<"+r+";++k){var r0="+o+"[k+"+h+"],r1="+o+"[k+"+r+"+"+h+"],b0="+p+"[k+"+y+"],b1="+p+"[k+"+r+"+"+y+"];if(r1<b0||b1<r0)continue "+m+";}var "+b+"="+l+"("),k?z.push("yi,xi"):z.push("xi,yi"),z.push(");if("+b+"!==void 0)return "+b+";}}}"),{name:L,code:z.join("")}}function g(A){var k="bruteForce"+(A?"Full":"Partial"),R=[],L=_.slice();A||L.splice(3,0,c);var z=["function "+k+"("+L.join()+"){"];function E(D,F){var N=T(D,F,A);R.push(N.code),z.push("return "+N.name+"("+_.join()+");")}z.push("if("+a+"-"+f+">"+s+"-"+i+"){"),A?(E(!0,!1),z.push("}else{"),E(!1,!1)):(z.push("if("+c+"){"),E(!0,!0),z.push("}else{"),E(!0,!1),z.push("}}else{if("+c+"){"),E(!1,!0),z.push("}else{"),E(!1,!1),z.push("}")),z.push("}}return "+k);var S=R.join("")+z.join(""),C=new Function(S);return C()}M.partial=g(!1),M.full=g(!0)},{}],103:[function(e,v,M){v.exports=S;var r=e("typedarray-pool"),n=e("bit-twiddle"),l=e("./brute"),c=l.partial,t=l.full,f=e("./sweep"),a=e("./median"),o=e("./partition"),u=128,h=1<<22,i=1<<22,s=o("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),p=o("lo===p0",["p0"]),d=o("lo<p0",["p0"]),y=o("hi<=p0",["p0"]),b=o("lo<=p0&&p0<=hi",["p0"]),m=o("lo<p0&&p0<=hi",["p0"]),_=6,T=2,g=1024,A=r.mallocInt32(g),k=r.mallocDouble(g);function R(C,D){var F=8*n.log2(D+1)*(C+1)|0,N=n.nextPow2(_*F);A.length<N&&(r.free(A),A=r.mallocInt32(N));var G=n.nextPow2(T*F);k.length<G&&(r.free(k),k=r.mallocDouble(G))}function L(C,D,F,N,G,U,X,I,B){var j=_*C;A[j]=D,A[j+1]=F,A[j+2]=N,A[j+3]=G,A[j+4]=U,A[j+5]=X;var H=T*C;k[H]=I,k[H+1]=B}function z(C,D,F,N,G,U,X,I,B,j,H){var K=2*C,te=B*K,J=j[te+D];e:for(var oe=G,ie=G*K;oe<U;++oe,ie+=K){var Q=X[ie+D],V=X[ie+D+C];if(!(J<Q||V<J)&&!(N&&J===Q)){for(var se=I[oe],re=D+1;re<C;++re){var Q=X[ie+re],V=X[ie+re+C],ee=j[te+re],ae=j[te+re+C];if(V<ee||ae<Q)continue e}var fe;if(N?fe=F(H,se):fe=F(se,H),fe!==void 0)return fe}}}function E(C,D,F,N,G,U,X,I,B,j){var H=2*C,K=I*H,te=B[K+D];e:for(var J=N,oe=N*H;J<G;++J,oe+=H){var ie=X[J];if(ie!==j){var Q=U[oe+D],V=U[oe+D+C];if(!(te<Q||V<te)){for(var se=D+1;se<C;++se){var Q=U[oe+se],V=U[oe+se+C],re=B[K+se],ee=B[K+se+C];if(V<re||ee<Q)continue e}var ae=F(ie,j);if(ae!==void 0)return ae}}}}function S(C,D,F,N,G,U,X,I,B){R(C,N+X);var j=0,H=2*C,K;for(L(j++,0,0,N,0,X,F?16:0,-1/0,1/0),F||L(j++,0,0,X,0,N,1,-1/0,1/0);j>0;){j-=1;var te=j*_,J=A[te],oe=A[te+1],ie=A[te+2],Q=A[te+3],V=A[te+4],se=A[te+5],re=j*T,ee=k[re],ae=k[re+1],fe=se&1,de=!!(se&16),pe=G,W=U,ue=I,me=B;if(fe&&(pe=I,W=B,ue=G,me=U),!(se&2&&(ie=d(C,J,oe,ie,pe,W,ae),oe>=ie))&&!(se&4&&(oe=y(C,J,oe,ie,pe,W,ee),oe>=ie))){var be=ie-oe,ke=V-Q;if(de){if(C*be*(be+ke)<i){if(K=f.scanComplete(C,J,D,oe,ie,pe,W,Q,V,ue,me),K!==void 0)return K;continue}}else if(C*Math.min(be,ke)<u){if(K=c(C,J,D,fe,oe,ie,pe,W,Q,V,ue,me),K!==void 0)return K;continue}else if(C*be*ke<h){if(K=f.scanBipartite(C,J,D,fe,oe,ie,pe,W,Q,V,ue,me),K!==void 0)return K;continue}var Pe=s(C,J,oe,ie,pe,W,ee,ae);if(oe<Pe)if(C*(Pe-oe)<u){if(K=t(C,J+1,D,oe,Pe,pe,W,Q,V,ue,me),K!==void 0)return K}else if(J===C-2){if(fe?K=f.sweepBipartite(C,D,Q,V,ue,me,oe,Pe,pe,W):K=f.sweepBipartite(C,D,oe,Pe,pe,W,Q,V,ue,me),K!==void 0)return K}else L(j++,J+1,oe,Pe,Q,V,fe,-1/0,1/0),L(j++,J+1,Q,V,oe,Pe,fe^1,-1/0,1/0);if(Pe<ie){var je=a(C,J,Q,V,ue,me),ze=ue[H*je+J],Ze=p(C,J,je,V,ue,me,ze);if(Ze<V&&L(j++,J,Pe,ie,Ze,V,(fe|4)+(de?16:0),ze,ae),Q<je&&L(j++,J,Pe,ie,Q,je,(fe|2)+(de?16:0),ee,ze),je+1===Ze){if(de?K=E(C,J,D,Pe,ie,pe,W,je,ue,me[je]):K=z(C,J,D,fe,Pe,ie,pe,W,je,ue,me[je]),K!==void 0)return K}else if(je<Ze){var tt;if(de){if(tt=b(C,J,Pe,ie,pe,W,ze),Pe<tt){var Ce=p(C,J,Pe,tt,pe,W,ze);if(J===C-2){if(Pe<Ce&&(K=f.sweepComplete(C,D,Pe,Ce,pe,W,je,Ze,ue,me),K!==void 0)||Ce<tt&&(K=f.sweepBipartite(C,D,Ce,tt,pe,W,je,Ze,ue,me),K!==void 0))return K}else Pe<Ce&&L(j++,J+1,Pe,Ce,je,Ze,16,-1/0,1/0),Ce<tt&&(L(j++,J+1,Ce,tt,je,Ze,0,-1/0,1/0),L(j++,J+1,je,Ze,Ce,tt,1,-1/0,1/0))}}else fe?tt=m(C,J,Pe,ie,pe,W,ze):tt=b(C,J,Pe,ie,pe,W,ze),Pe<tt&&(J===C-2?fe?K=f.sweepBipartite(C,D,je,Ze,ue,me,Pe,tt,pe,W):K=f.sweepBipartite(C,D,Pe,tt,pe,W,je,Ze,ue,me):(L(j++,J+1,Pe,tt,je,Ze,fe,-1/0,1/0),L(j++,J+1,je,Ze,Pe,tt,fe^1,-1/0,1/0)))}}}}}},{"./brute":102,"./median":104,"./partition":105,"./sweep":107,"bit-twiddle":97,"typedarray-pool":595}],104:[function(e,v,M){v.exports=t;var r=e("./partition"),n=r("lo<p0",["p0"]),l=8;function c(f,a,o,u,h,i){for(var s=2*f,p=s*(o+1)+a,d=o+1;d<u;++d,p+=s)for(var y=h[p],b=d,m=s*(d-1);b>o&&h[m+a]>y;--b,m-=s){for(var _=m,T=m+s,g=0;g<s;++g,++_,++T){var A=h[_];h[_]=h[T],h[T]=A}var k=i[b];i[b]=i[b-1],i[b-1]=k}}function t(f,a,o,u,h,i){if(u<=o+1)return o;for(var s=o,p=u,d=u+o>>>1,y=2*f,b=d,m=h[y*d+a];s<p;){if(p-s<l){c(f,a,s,p,h,i),m=h[y*d+a];break}var _=p-s,T=Math.random()*_+s|0,g=h[y*T+a],A=Math.random()*_+s|0,k=h[y*A+a],R=Math.random()*_+s|0,L=h[y*R+a];g<=k?L>=k?(b=A,m=k):g>=L?(b=T,m=g):(b=R,m=L):k>=L?(b=A,m=k):L>=g?(b=T,m=g):(b=R,m=L);for(var S=y*(p-1),C=y*b,z=0;z<y;++z,++S,++C){var E=h[S];h[S]=h[C],h[C]=E}var D=i[p-1];i[p-1]=i[b],i[b]=D,b=n(f,a,s,p-1,h,i,m);for(var S=y*(p-1),C=y*b,z=0;z<y;++z,++S,++C){var E=h[S];h[S]=h[C],h[C]=E}var D=i[p-1];if(i[p-1]=i[b],i[b]=D,d<b){for(p=b-1;s<p&&h[y*(p-1)+a]===m;)p-=1;p+=1}else if(b<d)for(s=b+1;s<p&&h[y*s+a]===m;)s+=1;else break}return n(f,a,o,d,h,i,h[y*d+a])}},{"./partition":105}],105:[function(e,v,M){v.exports=n;var r="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m";function n(l,c){var t="abcdef".split("").concat(c),f=[];return l.indexOf("lo")>=0&&f.push("lo=e[k+n]"),l.indexOf("hi")>=0&&f.push("hi=e[k+o]"),t.push(r.replace("_",f.join()).replace("$",l)),Function.apply(void 0,t)}},{}],106:[function(e,v,M){v.exports=n;var r=32;function n(i,s){s<=4*r?l(0,s-1,i):h(0,s-1,i)}function l(i,s,p){for(var d=2*(i+1),y=i+1;y<=s;++y){for(var b=p[d++],m=p[d++],_=y,T=d-2;_-- >i;){var g=p[T-2],A=p[T-1];if(g<b)break;if(g===b&&A<m)break;p[T]=g,p[T+1]=A,T-=2}p[T]=b,p[T+1]=m}}function c(i,s,p){i*=2,s*=2;var d=p[i],y=p[i+1];p[i]=p[s],p[i+1]=p[s+1],p[s]=d,p[s+1]=y}function t(i,s,p){i*=2,s*=2,p[i]=p[s],p[i+1]=p[s+1]}function f(i,s,p,d){i*=2,s*=2,p*=2;var y=d[i],b=d[i+1];d[i]=d[s],d[i+1]=d[s+1],d[s]=d[p],d[s+1]=d[p+1],d[p]=y,d[p+1]=b}function a(i,s,p,d,y){i*=2,s*=2,y[i]=y[s],y[s]=p,y[i+1]=y[s+1],y[s+1]=d}function o(i,s,p){i*=2,s*=2;var d=p[i],y=p[s];return d<y?!1:d===y?p[i+1]>p[s+1]:!0}function u(i,s,p,d){i*=2;var y=d[i];return y<s?!0:y===s?d[i+1]<p:!1}function h(i,s,p){var d=(s-i+1)/6|0,y=i+d,b=s-d,m=i+s>>1,_=m-d,T=m+d,g=y,A=_,k=m,R=T,L=b,z=i+1,E=s-1,S=0;o(g,A,p)&&(S=g,g=A,A=S),o(R,L,p)&&(S=R,R=L,L=S),o(g,k,p)&&(S=g,g=k,k=S),o(A,k,p)&&(S=A,A=k,k=S),o(g,R,p)&&(S=g,g=R,R=S),o(k,R,p)&&(S=k,k=R,R=S),o(A,L,p)&&(S=A,A=L,L=S),o(A,k,p)&&(S=A,A=k,k=S),o(R,L,p)&&(S=R,R=L,L=S);for(var C=p[2*A],D=p[2*A+1],F=p[2*R],N=p[2*R+1],G=2*g,U=2*k,X=2*L,I=2*y,B=2*m,j=2*b,H=0;H<2;++H){var K=p[G+H],te=p[U+H],J=p[X+H];p[I+H]=K,p[B+H]=te,p[j+H]=J}t(_,i,p),t(T,s,p);for(var oe=z;oe<=E;++oe)if(u(oe,C,D,p))oe!==z&&c(oe,z,p),++z;else if(!u(oe,F,N,p))for(;;)if(u(E,F,N,p)){u(E,C,D,p)?(f(oe,z,E,p),++z,--E):(c(oe,E,p),--E);break}else{if(--E<oe)break;continue}a(i,z-1,C,D,p),a(s,E+1,F,N,p),z-2-i<=r?l(i,z-2,p):h(i,z-2,p),s-(E+2)<=r?l(E+2,s,p):h(E+2,s,p),E-z<=r?l(z,E,p):h(z,E,p)}},{}],107:[function(e,v,M){v.exports={init:p,sweepBipartite:b,sweepComplete:m,scanBipartite:_,scanComplete:T};var r=e("typedarray-pool"),n=e("bit-twiddle"),l=e("./sort"),c=1<<28,t=1024,f=r.mallocInt32(t),a=r.mallocInt32(t),o=r.mallocInt32(t),u=r.mallocInt32(t),h=r.mallocInt32(t),i=r.mallocInt32(t),s=r.mallocDouble(t*8);function p(g){var A=n.nextPow2(g);f.length<A&&(r.free(f),f=r.mallocInt32(A)),a.length<A&&(r.free(a),a=r.mallocInt32(A)),o.length<A&&(r.free(o),o=r.mallocInt32(A)),u.length<A&&(r.free(u),u=r.mallocInt32(A)),h.length<A&&(r.free(h),h=r.mallocInt32(A)),i.length<A&&(r.free(i),i=r.mallocInt32(A));var k=8*A;s.length<k&&(r.free(s),s=r.mallocDouble(k))}function d(g,A,k,R){var L=A[R],z=g[k-1];g[L]=z,A[z]=L}function y(g,A,k,R){g[k]=R,A[R]=k}function b(g,A,k,R,L,z,E,S,C,D){for(var F=0,N=2*g,G=g-1,U=N-1,X=k;X<R;++X){var I=z[X],B=N*X;s[F++]=L[B+G],s[F++]=-(I+1),s[F++]=L[B+U],s[F++]=I}for(var X=E;X<S;++X){var I=D[X]+c,j=N*X;s[F++]=C[j+G],s[F++]=-I,s[F++]=C[j+U],s[F++]=I}var H=F>>>1;l(s,H);for(var K=0,te=0,X=0;X<H;++X){var J=s[2*X+1]|0;if(J>=c)J=J-c|0,d(o,u,te--,J);else if(J>=0)d(f,a,K--,J);else if(J<=-c){J=-J-c|0;for(var oe=0;oe<K;++oe){var ie=A(f[oe],J);if(ie!==void 0)return ie}y(o,u,te++,J)}else{J=-J-1|0;for(var oe=0;oe<te;++oe){var ie=A(J,o[oe]);if(ie!==void 0)return ie}y(f,a,K++,J)}}}function m(g,A,k,R,L,z,E,S,C,D){for(var F=0,N=2*g,G=g-1,U=N-1,X=k;X<R;++X){var I=z[X]+1<<1,B=N*X;s[F++]=L[B+G],s[F++]=-I,s[F++]=L[B+U],s[F++]=I}for(var X=E;X<S;++X){var I=D[X]+1<<1,j=N*X;s[F++]=C[j+G],s[F++]=-I|1,s[F++]=C[j+U],s[F++]=I|1}var H=F>>>1;l(s,H);for(var K=0,te=0,J=0,X=0;X<H;++X){var oe=s[2*X+1]|0,ie=oe&1;if(X<H-1&&oe>>1===s[2*X+3]>>1&&(ie=2,X+=1),oe<0){for(var Q=-(oe>>1)-1,V=0;V<J;++V){var se=A(h[V],Q);if(se!==void 0)return se}if(ie!==0)for(var V=0;V<K;++V){var se=A(f[V],Q);if(se!==void 0)return se}if(ie!==1)for(var V=0;V<te;++V){var se=A(o[V],Q);if(se!==void 0)return se}ie===0?y(f,a,K++,Q):ie===1?y(o,u,te++,Q):ie===2&&y(h,i,J++,Q)}else{var Q=(oe>>1)-1;ie===0?d(f,a,K--,Q):ie===1?d(o,u,te--,Q):ie===2&&d(h,i,J--,Q)}}}function _(g,A,k,R,L,z,E,S,C,D,F,N){var G=0,U=2*g,X=A,I=A+g,B=1,j=1;R?j=c:B=c;for(var H=L;H<z;++H){var K=H+B,te=U*H;s[G++]=E[te+X],s[G++]=-K,s[G++]=E[te+I],s[G++]=K}for(var H=C;H<D;++H){var K=H+j,J=U*H;s[G++]=F[J+X],s[G++]=-K}var oe=G>>>1;l(s,oe);for(var ie=0,H=0;H<oe;++H){var Q=s[2*H+1]|0;if(Q<0){var K=-Q,V=!1;if(K>=c?(V=!R,K-=c):(V=!!R,K-=1),V)y(f,a,ie++,K);else{var se=N[K],re=U*K,ee=F[re+A+1],ae=F[re+A+1+g];e:for(var fe=0;fe<ie;++fe){var de=f[fe],pe=U*de;if(!(ae<E[pe+A+1]||E[pe+A+1+g]<ee)){for(var W=A+2;W<g;++W)if(F[re+W+g]<E[pe+W]||E[pe+W+g]<F[re+W])continue e;var ue=S[de],me;if(R?me=k(se,ue):me=k(ue,se),me!==void 0)return me}}}}else d(f,a,ie--,Q-B)}}function T(g,A,k,R,L,z,E,S,C,D,F){for(var N=0,G=2*g,U=A,X=A+g,I=R;I<L;++I){var B=I+c,j=G*I;s[N++]=z[j+U],s[N++]=-B,s[N++]=z[j+X],s[N++]=B}for(var I=S;I<C;++I){var B=I+1,H=G*I;s[N++]=D[H+U],s[N++]=-B}var K=N>>>1;l(s,K);for(var te=0,I=0;I<K;++I){var J=s[2*I+1]|0;if(J<0){var B=-J;if(B>=c)f[te++]=B-c;else{B-=1;var oe=F[B],ie=G*B,Q=D[ie+A+1],V=D[ie+A+1+g];e:for(var se=0;se<te;++se){var re=f[se],ee=E[re];if(ee===oe)break;var ae=G*re;if(!(V<z[ae+A+1]||z[ae+A+1+g]<Q)){for(var fe=A+2;fe<g;++fe)if(D[ie+fe+g]<z[ae+fe]||z[ae+fe+g]<D[ie+fe])continue e;var de=k(ee,oe);if(de!==void 0)return de}}}}else{for(var B=J-c,se=te-1;se>=0;--se)if(f[se]===B){for(var fe=se+1;fe<te;++fe)f[fe-1]=f[fe];break}--te}}}},{"./sort":106,"bit-twiddle":97,"typedarray-pool":595}],108:[function(e,v,M){},{}],109:[function(e,v,M){arguments[4][108][0].apply(M,arguments)},{dup:108}],110:[function(e,v,M){var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(g,A,k){return Function.prototype.apply.call(g,A,k)},l;r&&typeof r.ownKeys=="function"?l=r.ownKeys:Object.getOwnPropertySymbols?l=function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:l=function(g){return Object.getOwnPropertyNames(g)};function c(T){console&&console.warn&&console.warn(T)}var t=Number.isNaN||function(g){return g!==g};function f(){f.init.call(this)}v.exports=f,v.exports.once=_,f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var a=10;function o(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(T){if(typeof T!="number"||T<0||t(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");a=T}}),f.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(g){if(typeof g!="number"||g<0||t(g))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+g+".");return this._maxListeners=g,this};function u(T){return T._maxListeners===void 0?f.defaultMaxListeners:T._maxListeners}f.prototype.getMaxListeners=function(){return u(this)},f.prototype.emit=function(g){for(var A=[],k=1;k<arguments.length;k++)A.push(arguments[k]);var R=g==="error",L=this._events;if(L!==void 0)R=R&&L.error===void 0;else if(!R)return!1;if(R){var z;if(A.length>0&&(z=A[0]),z instanceof Error)throw z;var E=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw E.context=z,E}var S=L[g];if(S===void 0)return!1;if(typeof S=="function")n(S,this,A);else for(var C=S.length,D=y(S,C),k=0;k<C;++k)n(D[k],this,A);return!0};function h(T,g,A,k){var R,L,z;if(o(A),L=T._events,L===void 0?(L=T._events=Object.create(null),T._eventsCount=0):(L.newListener!==void 0&&(T.emit("newListener",g,A.listener?A.listener:A),L=T._events),z=L[g]),z===void 0)z=L[g]=A,++T._eventsCount;else if(typeof z=="function"?z=L[g]=k?[A,z]:[z,A]:k?z.unshift(A):z.push(A),R=u(T),R>0&&z.length>R&&!z.warned){z.warned=!0;var E=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(g)+" listeners added. Use emitter.setMaxListeners() to increase limit");E.name="MaxListenersExceededWarning",E.emitter=T,E.type=g,E.count=z.length,c(E)}return T}f.prototype.addListener=function(g,A){return h(this,g,A,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(g,A){return h(this,g,A,!0)};function i(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(T,g,A){var k={fired:!1,wrapFn:void 0,target:T,type:g,listener:A},R=i.bind(k);return R.listener=A,k.wrapFn=R,R}f.prototype.once=function(g,A){return o(A),this.on(g,s(this,g,A)),this},f.prototype.prependOnceListener=function(g,A){return o(A),this.prependListener(g,s(this,g,A)),this},f.prototype.removeListener=function(g,A){var k,R,L,z,E;if(o(A),R=this._events,R===void 0)return this;if(k=R[g],k===void 0)return this;if(k===A||k.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete R[g],R.removeListener&&this.emit("removeListener",g,k.listener||A));else if(typeof k!="function"){for(L=-1,z=k.length-1;z>=0;z--)if(k[z]===A||k[z].listener===A){E=k[z].listener,L=z;break}if(L<0)return this;L===0?k.shift():b(k,L),k.length===1&&(R[g]=k[0]),R.removeListener!==void 0&&this.emit("removeListener",g,E||A)}return this},f.prototype.off=f.prototype.removeListener,f.prototype.removeAllListeners=function(g){var A,k,R;if(k=this._events,k===void 0)return this;if(k.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):k[g]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete k[g]),this;if(arguments.length===0){var L=Object.keys(k),z;for(R=0;R<L.length;++R)z=L[R],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=k[g],typeof A=="function")this.removeListener(g,A);else if(A!==void 0)for(R=A.length-1;R>=0;R--)this.removeListener(g,A[R]);return this};function p(T,g,A){var k=T._events;if(k===void 0)return[];var R=k[g];return R===void 0?[]:typeof R=="function"?A?[R.listener||R]:[R]:A?m(R):y(R,R.length)}f.prototype.listeners=function(g){return p(this,g,!0)},f.prototype.rawListeners=function(g){return p(this,g,!1)},f.listenerCount=function(T,g){return typeof T.listenerCount=="function"?T.listenerCount(g):d.call(T,g)},f.prototype.listenerCount=d;function d(T){var g=this._events;if(g!==void 0){var A=g[T];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}f.prototype.eventNames=function(){return this._eventsCount>0?l(this._events):[]};function y(T,g){for(var A=new Array(g),k=0;k<g;++k)A[k]=T[k];return A}function b(T,g){for(;g+1<T.length;g++)T[g]=T[g+1];T.pop()}function m(T){for(var g=new Array(T.length),A=0;A<g.length;++A)g[A]=T[A].listener||T[A];return g}function _(T,g){return new Promise(function(A,k){function R(){L!==void 0&&T.removeListener("error",L),A([].slice.call(arguments))}var L;g!=="error"&&(L=function(E){T.removeListener(g,R),k(E)},T.once("error",L)),T.once(g,R)})}},{}],111:[function(e,v,M){(function(r){(function(){var n=e("base64-js"),l=e("ieee754");M.Buffer=a,M.SlowBuffer=m,M.INSPECT_MAX_BYTES=50;var c=2147483647;M.kMaxLength=c,a.TYPED_ARRAY_SUPPORT=t(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function t(){try{var pe=new Uint8Array(1);return pe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},pe.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function f(pe){if(pe>c)throw new RangeError('The value "'+pe+'" is invalid for option "size"');var W=new Uint8Array(pe);return W.__proto__=a.prototype,W}function a(pe,W,ue){if(typeof pe=="number"){if(typeof W=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return i(pe)}return o(pe,W,ue)}typeof Symbol<"u"&&Symbol.species!=null&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192;function o(pe,W,ue){if(typeof pe=="string")return s(pe,W);if(ArrayBuffer.isView(pe))return p(pe);if(pe==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe);if(fe(pe,ArrayBuffer)||pe&&fe(pe.buffer,ArrayBuffer))return d(pe,W,ue);if(typeof pe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var me=pe.valueOf&&pe.valueOf();if(me!=null&&me!==pe)return a.from(me,W,ue);var be=y(pe);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof pe[Symbol.toPrimitive]=="function")return a.from(pe[Symbol.toPrimitive]("string"),W,ue);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe)}a.from=function(pe,W,ue){return o(pe,W,ue)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array;function u(pe){if(typeof pe!="number")throw new TypeError('"size" argument must be of type number');if(pe<0)throw new RangeError('The value "'+pe+'" is invalid for option "size"')}function h(pe,W,ue){return u(pe),pe<=0?f(pe):W!==void 0?typeof ue=="string"?f(pe).fill(W,ue):f(pe).fill(W):f(pe)}a.alloc=function(pe,W,ue){return h(pe,W,ue)};function i(pe){return u(pe),f(pe<0?0:b(pe)|0)}a.allocUnsafe=function(pe){return i(pe)},a.allocUnsafeSlow=function(pe){return i(pe)};function s(pe,W){if((typeof W!="string"||W==="")&&(W="utf8"),!a.isEncoding(W))throw new TypeError("Unknown encoding: "+W);var ue=_(pe,W)|0,me=f(ue),be=me.write(pe,W);return be!==ue&&(me=me.slice(0,be)),me}function p(pe){for(var W=pe.length<0?0:b(pe.length)|0,ue=f(W),me=0;me<W;me+=1)ue[me]=pe[me]&255;return ue}function d(pe,W,ue){if(W<0||pe.byteLength<W)throw new RangeError('"offset" is outside of buffer bounds');if(pe.byteLength<W+(ue||0))throw new RangeError('"length" is outside of buffer bounds');var me;return W===void 0&&ue===void 0?me=new Uint8Array(pe):ue===void 0?me=new Uint8Array(pe,W):me=new Uint8Array(pe,W,ue),me.__proto__=a.prototype,me}function y(pe){if(a.isBuffer(pe)){var W=b(pe.length)|0,ue=f(W);return ue.length===0||pe.copy(ue,0,0,W),ue}if(pe.length!==void 0)return typeof pe.length!="number"||de(pe.length)?f(0):p(pe);if(pe.type==="Buffer"&&Array.isArray(pe.data))return p(pe.data)}function b(pe){if(pe>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return pe|0}function m(pe){return+pe!=pe&&(pe=0),a.alloc(+pe)}a.isBuffer=function(W){return W!=null&&W._isBuffer===!0&&W!==a.prototype},a.compare=function(W,ue){if(fe(W,Uint8Array)&&(W=a.from(W,W.offset,W.byteLength)),fe(ue,Uint8Array)&&(ue=a.from(ue,ue.offset,ue.byteLength)),!a.isBuffer(W)||!a.isBuffer(ue))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(W===ue)return 0;for(var me=W.length,be=ue.length,ke=0,Pe=Math.min(me,be);ke<Pe;++ke)if(W[ke]!==ue[ke]){me=W[ke],be=ue[ke];break}return me<be?-1:be<me?1:0},a.isEncoding=function(W){switch(String(W).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(W,ue){if(!Array.isArray(W))throw new TypeError('"list" argument must be an Array of Buffers');if(W.length===0)return a.alloc(0);var me;if(ue===void 0)for(ue=0,me=0;me<W.length;++me)ue+=W[me].length;var be=a.allocUnsafe(ue),ke=0;for(me=0;me<W.length;++me){var Pe=W[me];if(fe(Pe,Uint8Array)&&(Pe=a.from(Pe)),!a.isBuffer(Pe))throw new TypeError('"list" argument must be an Array of Buffers');Pe.copy(be,ke),ke+=Pe.length}return be};function _(pe,W){if(a.isBuffer(pe))return pe.length;if(ArrayBuffer.isView(pe)||fe(pe,ArrayBuffer))return pe.byteLength;if(typeof pe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof pe);var ue=pe.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&ue===0)return 0;for(var be=!1;;)switch(W){case"ascii":case"latin1":case"binary":return ue;case"utf8":case"utf-8":return V(pe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue*2;case"hex":return ue>>>1;case"base64":return ee(pe).length;default:if(be)return me?-1:V(pe).length;W=(""+W).toLowerCase(),be=!0}}a.byteLength=_;function T(pe,W,ue){var me=!1;if((W===void 0||W<0)&&(W=0),W>this.length||((ue===void 0||ue>this.length)&&(ue=this.length),ue<=0)||(ue>>>=0,W>>>=0,ue<=W))return"";for(pe||(pe="utf8");;)switch(pe){case"hex":return I(this,W,ue);case"utf8":case"utf-8":return F(this,W,ue);case"ascii":return U(this,W,ue);case"latin1":case"binary":return X(this,W,ue);case"base64":return D(this,W,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,W,ue);default:if(me)throw new TypeError("Unknown encoding: "+pe);pe=(pe+"").toLowerCase(),me=!0}}a.prototype._isBuffer=!0;function g(pe,W,ue){var me=pe[W];pe[W]=pe[ue],pe[ue]=me}a.prototype.swap16=function(){var W=this.length;if(W%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ue=0;ue<W;ue+=2)g(this,ue,ue+1);return this},a.prototype.swap32=function(){var W=this.length;if(W%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ue=0;ue<W;ue+=4)g(this,ue,ue+3),g(this,ue+1,ue+2);return this},a.prototype.swap64=function(){var W=this.length;if(W%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ue=0;ue<W;ue+=8)g(this,ue,ue+7),g(this,ue+1,ue+6),g(this,ue+2,ue+5),g(this,ue+3,ue+4);return this},a.prototype.toString=function(){var W=this.length;return W===0?"":arguments.length===0?F(this,0,W):T.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(W){if(!a.isBuffer(W))throw new TypeError("Argument must be a Buffer");return this===W?!0:a.compare(this,W)===0},a.prototype.inspect=function(){var W="",ue=M.INSPECT_MAX_BYTES;return W=this.toString("hex",0,ue).replace(/(.{2})/g,"$1 ").trim(),this.length>ue&&(W+=" ... "),"<Buffer "+W+">"},a.prototype.compare=function(W,ue,me,be,ke){if(fe(W,Uint8Array)&&(W=a.from(W,W.offset,W.byteLength)),!a.isBuffer(W))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof W);if(ue===void 0&&(ue=0),me===void 0&&(me=W?W.length:0),be===void 0&&(be=0),ke===void 0&&(ke=this.length),ue<0||me>W.length||be<0||ke>this.length)throw new RangeError("out of range index");if(be>=ke&&ue>=me)return 0;if(be>=ke)return-1;if(ue>=me)return 1;if(ue>>>=0,me>>>=0,be>>>=0,ke>>>=0,this===W)return 0;for(var Pe=ke-be,je=me-ue,ze=Math.min(Pe,je),Ze=this.slice(be,ke),tt=W.slice(ue,me),Ce=0;Ce<ze;++Ce)if(Ze[Ce]!==tt[Ce]){Pe=Ze[Ce],je=tt[Ce];break}return Pe<je?-1:je<Pe?1:0};function A(pe,W,ue,me,be){if(pe.length===0)return-1;if(typeof ue=="string"?(me=ue,ue=0):ue>2147483647?ue=2147483647:ue<-2147483648&&(ue=-2147483648),ue=+ue,de(ue)&&(ue=be?0:pe.length-1),ue<0&&(ue=pe.length+ue),ue>=pe.length){if(be)return-1;ue=pe.length-1}else if(ue<0)if(be)ue=0;else return-1;if(typeof W=="string"&&(W=a.from(W,me)),a.isBuffer(W))return W.length===0?-1:k(pe,W,ue,me,be);if(typeof W=="number")return W=W&255,typeof Uint8Array.prototype.indexOf=="function"?be?Uint8Array.prototype.indexOf.call(pe,W,ue):Uint8Array.prototype.lastIndexOf.call(pe,W,ue):k(pe,[W],ue,me,be);throw new TypeError("val must be string, number or Buffer")}function k(pe,W,ue,me,be){var ke=1,Pe=pe.length,je=W.length;if(me!==void 0&&(me=String(me).toLowerCase(),me==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(pe.length<2||W.length<2)return-1;ke=2,Pe/=2,je/=2,ue/=2}function ze(Ne,qe){return ke===1?Ne[qe]:Ne.readUInt16BE(qe*ke)}var Ze;if(be){var tt=-1;for(Ze=ue;Ze<Pe;Ze++)if(ze(pe,Ze)===ze(W,tt===-1?0:Ze-tt)){if(tt===-1&&(tt=Ze),Ze-tt+1===je)return tt*ke}else tt!==-1&&(Ze-=Ze-tt),tt=-1}else for(ue+je>Pe&&(ue=Pe-je),Ze=ue;Ze>=0;Ze--){for(var Ce=!0,Ae=0;Ae<je;Ae++)if(ze(pe,Ze+Ae)!==ze(W,Ae)){Ce=!1;break}if(Ce)return Ze}return-1}a.prototype.includes=function(W,ue,me){return this.indexOf(W,ue,me)!==-1},a.prototype.indexOf=function(W,ue,me){return A(this,W,ue,me,!0)},a.prototype.lastIndexOf=function(W,ue,me){return A(this,W,ue,me,!1)};function R(pe,W,ue,me){ue=Number(ue)||0;var be=pe.length-ue;me?(me=Number(me),me>be&&(me=be)):me=be;var ke=W.length;me>ke/2&&(me=ke/2);for(var Pe=0;Pe<me;++Pe){var je=parseInt(W.substr(Pe*2,2),16);if(de(je))return Pe;pe[ue+Pe]=je}return Pe}function L(pe,W,ue,me){return ae(V(W,pe.length-ue),pe,ue,me)}function z(pe,W,ue,me){return ae(se(W),pe,ue,me)}function E(pe,W,ue,me){return z(pe,W,ue,me)}function S(pe,W,ue,me){return ae(ee(W),pe,ue,me)}function C(pe,W,ue,me){return ae(re(W,pe.length-ue),pe,ue,me)}a.prototype.write=function(W,ue,me,be){if(ue===void 0)be="utf8",me=this.length,ue=0;else if(me===void 0&&typeof ue=="string")be=ue,me=this.length,ue=0;else if(isFinite(ue))ue=ue>>>0,isFinite(me)?(me=me>>>0,be===void 0&&(be="utf8")):(be=me,me=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ke=this.length-ue;if((me===void 0||me>ke)&&(me=ke),W.length>0&&(me<0||ue<0)||ue>this.length)throw new RangeError("Attempt to write outside buffer bounds");be||(be="utf8");for(var Pe=!1;;)switch(be){case"hex":return R(this,W,ue,me);case"utf8":case"utf-8":return L(this,W,ue,me);case"ascii":return z(this,W,ue,me);case"latin1":case"binary":return E(this,W,ue,me);case"base64":return S(this,W,ue,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,W,ue,me);default:if(Pe)throw new TypeError("Unknown encoding: "+be);be=(""+be).toLowerCase(),Pe=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(pe,W,ue){return W===0&&ue===pe.length?n.fromByteArray(pe):n.fromByteArray(pe.slice(W,ue))}function F(pe,W,ue){ue=Math.min(pe.length,ue);for(var me=[],be=W;be<ue;){var ke=pe[be],Pe=null,je=ke>239?4:ke>223?3:ke>191?2:1;if(be+je<=ue){var ze,Ze,tt,Ce;switch(je){case 1:ke<128&&(Pe=ke);break;case 2:ze=pe[be+1],(ze&192)===128&&(Ce=(ke&31)<<6|ze&63,Ce>127&&(Pe=Ce));break;case 3:ze=pe[be+1],Ze=pe[be+2],(ze&192)===128&&(Ze&192)===128&&(Ce=(ke&15)<<12|(ze&63)<<6|Ze&63,Ce>2047&&(Ce<55296||Ce>57343)&&(Pe=Ce));break;case 4:ze=pe[be+1],Ze=pe[be+2],tt=pe[be+3],(ze&192)===128&&(Ze&192)===128&&(tt&192)===128&&(Ce=(ke&15)<<18|(ze&63)<<12|(Ze&63)<<6|tt&63,Ce>65535&&Ce<1114112&&(Pe=Ce))}}Pe===null?(Pe=65533,je=1):Pe>65535&&(Pe-=65536,me.push(Pe>>>10&1023|55296),Pe=56320|Pe&1023),me.push(Pe),be+=je}return G(me)}var N=4096;function G(pe){var W=pe.length;if(W<=N)return String.fromCharCode.apply(String,pe);for(var ue="",me=0;me<W;)ue+=String.fromCharCode.apply(String,pe.slice(me,me+=N));return ue}function U(pe,W,ue){var me="";ue=Math.min(pe.length,ue);for(var be=W;be<ue;++be)me+=String.fromCharCode(pe[be]&127);return me}function X(pe,W,ue){var me="";ue=Math.min(pe.length,ue);for(var be=W;be<ue;++be)me+=String.fromCharCode(pe[be]);return me}function I(pe,W,ue){var me=pe.length;(!W||W<0)&&(W=0),(!ue||ue<0||ue>me)&&(ue=me);for(var be="",ke=W;ke<ue;++ke)be+=Q(pe[ke]);return be}function B(pe,W,ue){for(var me=pe.slice(W,ue),be="",ke=0;ke<me.length;ke+=2)be+=String.fromCharCode(me[ke]+me[ke+1]*256);return be}a.prototype.slice=function(W,ue){var me=this.length;W=~~W,ue=ue===void 0?me:~~ue,W<0?(W+=me,W<0&&(W=0)):W>me&&(W=me),ue<0?(ue+=me,ue<0&&(ue=0)):ue>me&&(ue=me),ue<W&&(ue=W);var be=this.subarray(W,ue);return be.__proto__=a.prototype,be};function j(pe,W,ue){if(pe%1!==0||pe<0)throw new RangeError("offset is not uint");if(pe+W>ue)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUIntLE=function(W,ue,me){W=W>>>0,ue=ue>>>0,me||j(W,ue,this.length);for(var be=this[W],ke=1,Pe=0;++Pe<ue&&(ke*=256);)be+=this[W+Pe]*ke;return be},a.prototype.readUIntBE=function(W,ue,me){W=W>>>0,ue=ue>>>0,me||j(W,ue,this.length);for(var be=this[W+--ue],ke=1;ue>0&&(ke*=256);)be+=this[W+--ue]*ke;return be},a.prototype.readUInt8=function(W,ue){return W=W>>>0,ue||j(W,1,this.length),this[W]},a.prototype.readUInt16LE=function(W,ue){return W=W>>>0,ue||j(W,2,this.length),this[W]|this[W+1]<<8},a.prototype.readUInt16BE=function(W,ue){return W=W>>>0,ue||j(W,2,this.length),this[W]<<8|this[W+1]},a.prototype.readUInt32LE=function(W,ue){return W=W>>>0,ue||j(W,4,this.length),(this[W]|this[W+1]<<8|this[W+2]<<16)+this[W+3]*16777216},a.prototype.readUInt32BE=function(W,ue){return W=W>>>0,ue||j(W,4,this.length),this[W]*16777216+(this[W+1]<<16|this[W+2]<<8|this[W+3])},a.prototype.readIntLE=function(W,ue,me){W=W>>>0,ue=ue>>>0,me||j(W,ue,this.length);for(var be=this[W],ke=1,Pe=0;++Pe<ue&&(ke*=256);)be+=this[W+Pe]*ke;return ke*=128,be>=ke&&(be-=Math.pow(2,8*ue)),be},a.prototype.readIntBE=function(W,ue,me){W=W>>>0,ue=ue>>>0,me||j(W,ue,this.length);for(var be=ue,ke=1,Pe=this[W+--be];be>0&&(ke*=256);)Pe+=this[W+--be]*ke;return ke*=128,Pe>=ke&&(Pe-=Math.pow(2,8*ue)),Pe},a.prototype.readInt8=function(W,ue){return W=W>>>0,ue||j(W,1,this.length),this[W]&128?(255-this[W]+1)*-1:this[W]},a.prototype.readInt16LE=function(W,ue){W=W>>>0,ue||j(W,2,this.length);var me=this[W]|this[W+1]<<8;return me&32768?me|4294901760:me},a.prototype.readInt16BE=function(W,ue){W=W>>>0,ue||j(W,2,this.length);var me=this[W+1]|this[W]<<8;return me&32768?me|4294901760:me},a.prototype.readInt32LE=function(W,ue){return W=W>>>0,ue||j(W,4,this.length),this[W]|this[W+1]<<8|this[W+2]<<16|this[W+3]<<24},a.prototype.readInt32BE=function(W,ue){return W=W>>>0,ue||j(W,4,this.length),this[W]<<24|this[W+1]<<16|this[W+2]<<8|this[W+3]},a.prototype.readFloatLE=function(W,ue){return W=W>>>0,ue||j(W,4,this.length),l.read(this,W,!0,23,4)},a.prototype.readFloatBE=function(W,ue){return W=W>>>0,ue||j(W,4,this.length),l.read(this,W,!1,23,4)},a.prototype.readDoubleLE=function(W,ue){return W=W>>>0,ue||j(W,8,this.length),l.read(this,W,!0,52,8)},a.prototype.readDoubleBE=function(W,ue){return W=W>>>0,ue||j(W,8,this.length),l.read(this,W,!1,52,8)};function H(pe,W,ue,me,be,ke){if(!a.isBuffer(pe))throw new TypeError('"buffer" argument must be a Buffer instance');if(W>be||W<ke)throw new RangeError('"value" argument is out of bounds');if(ue+me>pe.length)throw new RangeError("Index out of range")}a.prototype.writeUIntLE=function(W,ue,me,be){if(W=+W,ue=ue>>>0,me=me>>>0,!be){var ke=Math.pow(2,8*me)-1;H(this,W,ue,me,ke,0)}var Pe=1,je=0;for(this[ue]=W&255;++je<me&&(Pe*=256);)this[ue+je]=W/Pe&255;return ue+me},a.prototype.writeUIntBE=function(W,ue,me,be){if(W=+W,ue=ue>>>0,me=me>>>0,!be){var ke=Math.pow(2,8*me)-1;H(this,W,ue,me,ke,0)}var Pe=me-1,je=1;for(this[ue+Pe]=W&255;--Pe>=0&&(je*=256);)this[ue+Pe]=W/je&255;return ue+me},a.prototype.writeUInt8=function(W,ue,me){return W=+W,ue=ue>>>0,me||H(this,W,ue,1,255,0),this[ue]=W&255,ue+1},a.prototype.writeUInt16LE=function(W,ue,me){return W=+W,ue=ue>>>0,me||H(this,W,ue,2,65535,0),this[ue]=W&255,this[ue+1]=W>>>8,ue+2},a.prototype.writeUInt16BE=function(W,ue,me){return W=+W,ue=ue>>>0,me||H(this,W,ue,2,65535,0),this[ue]=W>>>8,this[ue+1]=W&255,ue+2},a.prototype.writeUInt32LE=function(W,ue,me){return W=+W,ue=ue>>>0,me||H(this,W,ue,4,4294967295,0),this[ue+3]=W>>>24,this[ue+2]=W>>>16,this[ue+1]=W>>>8,this[ue]=W&255,ue+4},a.prototype.writeUInt32BE=function(W,ue,me){return W=+W,ue=ue>>>0,me||H(this,W,ue,4,4294967295,0),this[ue]=W>>>24,this[ue+1]=W>>>16,this[ue+2]=W>>>8,this[ue+3]=W&255,ue+4},a.prototype.writeIntLE=function(W,ue,me,be){if(W=+W,ue=ue>>>0,!be){var ke=Math.pow(2,8*me-1);H(this,W,ue,me,ke-1,-ke)}var Pe=0,je=1,ze=0;for(this[ue]=W&255;++Pe<me&&(je*=256);)W<0&&ze===0&&this[ue+Pe-1]!==0&&(ze=1),this[ue+Pe]=(W/je>>0)-ze&255;return ue+me},a.prototype.writeIntBE=function(W,ue,me,be){if(W=+W,ue=ue>>>0,!be){var ke=Math.pow(2,8*me-1);H(this,W,ue,me,ke-1,-ke)}var Pe=me-1,je=1,ze=0;for(this[ue+Pe]=W&255;--Pe>=0&&(je*=256);)W<0&&ze===0&&this[ue+Pe+1]!==0&&(ze=1),this[ue+Pe]=(W/je>>0)-ze&255;return ue+me},a.prototype.writeInt8=function(W,ue,me){return W=+W,ue=ue>>>0,me||H(this,W,ue,1,127,-128),W<0&&(W=255+W+1),this[ue]=W&255,ue+1},a.prototype.writeInt16LE=function(W,ue,me){return W=+W,ue=ue>>>0,me||H(this,W,ue,2,32767,-32768),this[ue]=W&255,this[ue+1]=W>>>8,ue+2},a.prototype.writeInt16BE=function(W,ue,me){return W=+W,ue=ue>>>0,me||H(this,W,ue,2,32767,-32768),this[ue]=W>>>8,this[ue+1]=W&255,ue+2},a.prototype.writeInt32LE=function(W,ue,me){return W=+W,ue=ue>>>0,me||H(this,W,ue,4,2147483647,-2147483648),this[ue]=W&255,this[ue+1]=W>>>8,this[ue+2]=W>>>16,this[ue+3]=W>>>24,ue+4},a.prototype.writeInt32BE=function(W,ue,me){return W=+W,ue=ue>>>0,me||H(this,W,ue,4,2147483647,-2147483648),W<0&&(W=4294967295+W+1),this[ue]=W>>>24,this[ue+1]=W>>>16,this[ue+2]=W>>>8,this[ue+3]=W&255,ue+4};function K(pe,W,ue,me,be,ke){if(ue+me>pe.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("Index out of range")}function te(pe,W,ue,me,be){return W=+W,ue=ue>>>0,be||K(pe,W,ue,4),l.write(pe,W,ue,me,23,4),ue+4}a.prototype.writeFloatLE=function(W,ue,me){return te(this,W,ue,!0,me)},a.prototype.writeFloatBE=function(W,ue,me){return te(this,W,ue,!1,me)};function J(pe,W,ue,me,be){return W=+W,ue=ue>>>0,be||K(pe,W,ue,8),l.write(pe,W,ue,me,52,8),ue+8}a.prototype.writeDoubleLE=function(W,ue,me){return J(this,W,ue,!0,me)},a.prototype.writeDoubleBE=function(W,ue,me){return J(this,W,ue,!1,me)},a.prototype.copy=function(W,ue,me,be){if(!a.isBuffer(W))throw new TypeError("argument should be a Buffer");if(me||(me=0),!be&&be!==0&&(be=this.length),ue>=W.length&&(ue=W.length),ue||(ue=0),be>0&&be<me&&(be=me),be===me||W.length===0||this.length===0)return 0;if(ue<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("sourceEnd out of bounds");be>this.length&&(be=this.length),W.length-ue<be-me&&(be=W.length-ue+me);var ke=be-me;if(this===W&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ue,me,be);else if(this===W&&me<ue&&ue<be)for(var Pe=ke-1;Pe>=0;--Pe)W[Pe+ue]=this[Pe+me];else Uint8Array.prototype.set.call(W,this.subarray(me,be),ue);return ke},a.prototype.fill=function(W,ue,me,be){if(typeof W=="string"){if(typeof ue=="string"?(be=ue,ue=0,me=this.length):typeof me=="string"&&(be=me,me=this.length),be!==void 0&&typeof be!="string")throw new TypeError("encoding must be a string");if(typeof be=="string"&&!a.isEncoding(be))throw new TypeError("Unknown encoding: "+be);if(W.length===1){var ke=W.charCodeAt(0);(be==="utf8"&&ke<128||be==="latin1")&&(W=ke)}}else typeof W=="number"&&(W=W&255);if(ue<0||this.length<ue||this.length<me)throw new RangeError("Out of range index");if(me<=ue)return this;ue=ue>>>0,me=me===void 0?this.length:me>>>0,W||(W=0);var Pe;if(typeof W=="number")for(Pe=ue;Pe<me;++Pe)this[Pe]=W;else{var je=a.isBuffer(W)?W:a.from(W,be),ze=je.length;if(ze===0)throw new TypeError('The value "'+W+'" is invalid for argument "value"');for(Pe=0;Pe<me-ue;++Pe)this[Pe+ue]=je[Pe%ze]}return this};var oe=/[^+/0-9A-Za-z-_]/g;function ie(pe){if(pe=pe.split("=")[0],pe=pe.trim().replace(oe,""),pe.length<2)return"";for(;pe.length%4!==0;)pe=pe+"=";return pe}function Q(pe){return pe<16?"0"+pe.toString(16):pe.toString(16)}function V(pe,W){W=W||1/0;for(var ue,me=pe.length,be=null,ke=[],Pe=0;Pe<me;++Pe){if(ue=pe.charCodeAt(Pe),ue>55295&&ue<57344){if(!be){if(ue>56319){(W-=3)>-1&&ke.push(239,191,189);continue}else if(Pe+1===me){(W-=3)>-1&&ke.push(239,191,189);continue}be=ue;continue}if(ue<56320){(W-=3)>-1&&ke.push(239,191,189),be=ue;continue}ue=(be-55296<<10|ue-56320)+65536}else be&&(W-=3)>-1&&ke.push(239,191,189);if(be=null,ue<128){if((W-=1)<0)break;ke.push(ue)}else if(ue<2048){if((W-=2)<0)break;ke.push(ue>>6|192,ue&63|128)}else if(ue<65536){if((W-=3)<0)break;ke.push(ue>>12|224,ue>>6&63|128,ue&63|128)}else if(ue<1114112){if((W-=4)<0)break;ke.push(ue>>18|240,ue>>12&63|128,ue>>6&63|128,ue&63|128)}else throw new Error("Invalid code point")}return ke}function se(pe){for(var W=[],ue=0;ue<pe.length;++ue)W.push(pe.charCodeAt(ue)&255);return W}function re(pe,W){for(var ue,me,be,ke=[],Pe=0;Pe<pe.length&&!((W-=2)<0);++Pe)ue=pe.charCodeAt(Pe),me=ue>>8,be=ue%256,ke.push(be),ke.push(me);return ke}function ee(pe){return n.toByteArray(ie(pe))}function ae(pe,W,ue,me){for(var be=0;be<me&&!(be+ue>=W.length||be>=pe.length);++be)W[be+ue]=pe[be];return be}function fe(pe,W){return pe instanceof W||pe!=null&&pe.constructor!=null&&pe.constructor.name!=null&&pe.constructor.name===W.name}function de(pe){return pe!==pe}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":79,buffer:111,ieee754:442}],112:[function(e,v,M){var r=e("./lib/monotone"),n=e("./lib/triangulation"),l=e("./lib/delaunay"),c=e("./lib/filter");v.exports=u;function t(h){return[Math.min(h[0],h[1]),Math.max(h[0],h[1])]}function f(h,i){return h[0]-i[0]||h[1]-i[1]}function a(h){return h.map(t).sort(f)}function o(h,i,s){return i in h?h[i]:s}function u(h,i,s){Array.isArray(i)?(s=s||{},i=i||[]):(s=i||{},i=[]);var p=!!o(s,"delaunay",!0),d=!!o(s,"interior",!0),y=!!o(s,"exterior",!0),b=!!o(s,"infinity",!1);if(!d&&!y||h.length===0)return[];var m=r(h,i);if(p||d!==y||b){for(var _=n(h.length,a(i)),T=0;T<m.length;++T){var g=m[T];_.addTriangle(g[0],g[1],g[2])}return p&&l(h,_),y?d?b?c(_,0,b):_.cells():c(_,1,b):c(_,-1)}else return m}},{"./lib/delaunay":113,"./lib/filter":114,"./lib/monotone":115,"./lib/triangulation":116}],113:[function(e,v,M){var r=e("robust-in-sphere")[4];e("binary-search-bounds"),v.exports=l;function n(c,t,f,a,o,u){var h=t.opposite(a,o);if(!(h<0)){if(o<a){var i=a;a=o,o=i,i=u,u=h,h=i}t.isConstraint(a,o)||r(c[a],c[o],c[u],c[h])<0&&f.push(a,o)}}function l(c,t){for(var f=[],a=c.length,o=t.stars,u=0;u<a;++u)for(var h=o[u],i=1;i<h.length;i+=2){var s=h[i];if(!(s<u)&&!t.isConstraint(u,s)){for(var p=h[i-1],d=-1,y=1;y<h.length;y+=2)if(h[y-1]===s){d=h[y];break}d<0||r(c[u],c[s],c[p],c[d])<0&&f.push(u,s)}}for(;f.length>0;){for(var s=f.pop(),u=f.pop(),p=-1,d=-1,h=o[u],b=1;b<h.length;b+=2){var m=h[b-1],_=h[b];m===s?d=_:_===s&&(p=m)}p<0||d<0||r(c[u],c[s],c[p],c[d])>=0||(t.flip(u,s),n(c,t,f,p,u,d),n(c,t,f,u,d,p),n(c,t,f,d,s,p),n(c,t,f,s,p,d))}}},{"binary-search-bounds":96,"robust-in-sphere":546}],114:[function(e,v,M){var r=e("binary-search-bounds");v.exports=a;function n(o,u,h,i,s,p,d){this.cells=o,this.neighbor=u,this.flags=i,this.constraint=h,this.active=s,this.next=p,this.boundary=d}var l=n.prototype;function c(o,u){return o[0]-u[0]||o[1]-u[1]||o[2]-u[2]}l.locate=function(){var o=[0,0,0];return function(u,h,i){var s=u,p=h,d=i;return h<i?h<u&&(s=h,p=i,d=u):i<u&&(s=i,p=u,d=h),s<0?-1:(o[0]=s,o[1]=p,o[2]=d,r.eq(this.cells,o,c))}}();function t(o,u){for(var h=o.cells(),i=h.length,s=0;s<i;++s){var p=h[s],d=p[0],y=p[1],b=p[2];y<b?y<d&&(p[0]=y,p[1]=b,p[2]=d):b<d&&(p[0]=b,p[1]=d,p[2]=y)}h.sort(c);for(var m=new Array(i),s=0;s<m.length;++s)m[s]=0;var _=[],T=[],g=new Array(3*i),A=new Array(3*i),k=null;u&&(k=[]);for(var R=new n(h,g,A,m,_,T,k),s=0;s<i;++s)for(var p=h[s],L=0;L<3;++L){var d=p[L],y=p[(L+1)%3],z=g[3*s+L]=R.locate(y,d,o.opposite(y,d)),E=A[3*s+L]=o.isConstraint(d,y);z<0&&(E?T.push(s):(_.push(s),m[s]=1),u&&k.push([y,d,-1]))}return R}function f(o,u,h){for(var i=0,s=0;s<o.length;++s)u[s]===h&&(o[i++]=o[s]);return o.length=i,o}function a(o,u,h){var i=t(o,h);if(u===0)return h?i.cells.concat(i.boundary):i.cells;for(var s=1,p=i.active,d=i.next,y=i.flags,b=i.cells,m=i.constraint,_=i.neighbor;p.length>0||d.length>0;){for(;p.length>0;){var T=p.pop();if(y[T]!==-s){y[T]=s,b[T];for(var g=0;g<3;++g){var A=_[3*T+g];A>=0&&y[A]===0&&(m[3*T+g]?d.push(A):(p.push(A),y[A]=s))}}}var k=d;d=p,p=k,d.length=0,s=-s}var R=f(b,y,u);return h?R.concat(i.boundary):R}},{"binary-search-bounds":96}],115:[function(e,v,M){var r=e("binary-search-bounds"),n=e("robust-orientation")[3],l=0,c=1,t=2;v.exports=d;function f(y,b,m,_,T){this.a=y,this.b=b,this.idx=m,this.lowerIds=_,this.upperIds=T}function a(y,b,m,_){this.a=y,this.b=b,this.type=m,this.idx=_}function o(y,b){var m=y.a[0]-b.a[0]||y.a[1]-b.a[1]||y.type-b.type;return m||y.type!==l&&(m=n(y.a,y.b,b.b),m)?m:y.idx-b.idx}function u(y,b){return n(y.a,y.b,b)}function h(y,b,m,_,T){for(var g=r.lt(b,_,u),A=r.gt(b,_,u),k=g;k<A;++k){for(var R=b[k],L=R.lowerIds,E=L.length;E>1&&n(m[L[E-2]],m[L[E-1]],_)>0;)y.push([L[E-1],L[E-2],T]),E-=1;L.length=E,L.push(T);for(var z=R.upperIds,E=z.length;E>1&&n(m[z[E-2]],m[z[E-1]],_)<0;)y.push([z[E-2],z[E-1],T]),E-=1;z.length=E,z.push(T)}}function i(y,b){var m;return y.a[0]<b.a[0]?m=n(y.a,y.b,b.a):m=n(b.b,b.a,y.a),m||(b.b[0]<y.b[0]?m=n(y.a,y.b,b.b):m=n(b.b,b.a,y.b),m||y.idx-b.idx)}function s(y,b,m){var _=r.le(y,m,i),T=y[_],g=T.upperIds,A=g[g.length-1];T.upperIds=[A],y.splice(_+1,0,new f(m.a,m.b,m.idx,[A],g))}function p(y,b,m){var _=m.a;m.a=m.b,m.b=_;var T=r.eq(y,m,i),g=y[T],A=y[T-1];A.upperIds=g.upperIds,y.splice(T,1)}function d(y,b){for(var m=y.length,_=b.length,T=[],g=0;g<m;++g)T.push(new a(y[g],null,l,g));for(var g=0;g<_;++g){var A=b[g],k=y[A[0]],R=y[A[1]];k[0]<R[0]?T.push(new a(k,R,t,g),new a(R,k,c,g)):k[0]>R[0]&&T.push(new a(R,k,t,g),new a(k,R,c,g))}T.sort(o);for(var L=T[0].a[0]-(1+Math.abs(T[0].a[0]))*Math.pow(2,-52),z=[new f([L,1],[L,0],-1,[],[])],E=[],g=0,S=T.length;g<S;++g){var C=T[g],D=C.type;D===l?h(E,z,y,C.a,C.idx):D===t?s(z,y,C):p(z,y,C)}return E}},{"binary-search-bounds":96,"robust-orientation":548}],116:[function(e,v,M){var r=e("binary-search-bounds");v.exports=t;function n(f,a){this.stars=f,this.edges=a}var l=n.prototype;function c(f,a,o){for(var u=1,h=f.length;u<h;u+=2)if(f[u-1]===a&&f[u]===o){f[u-1]=f[h-2],f[u]=f[h-1],f.length=h-2;return}}l.isConstraint=function(){var f=[0,0];function a(o,u){return o[0]-u[0]||o[1]-u[1]}return function(o,u){return f[0]=Math.min(o,u),f[1]=Math.max(o,u),r.eq(this.edges,f,a)>=0}}(),l.removeTriangle=function(f,a,o){var u=this.stars;c(u[f],a,o),c(u[a],o,f),c(u[o],f,a)},l.addTriangle=function(f,a,o){var u=this.stars;u[f].push(a,o),u[a].push(o,f),u[o].push(f,a)},l.opposite=function(f,a){for(var o=this.stars[a],u=1,h=o.length;u<h;u+=2)if(o[u]===f)return o[u-1];return-1},l.flip=function(f,a){var o=this.opposite(f,a),u=this.opposite(a,f);this.removeTriangle(f,a,o),this.removeTriangle(a,f,u),this.addTriangle(f,u,o),this.addTriangle(a,o,u)},l.edges=function(){for(var f=this.stars,a=[],o=0,u=f.length;o<u;++o)for(var h=f[o],i=0,s=h.length;i<s;i+=2)a.push([h[i],h[i+1]]);return a},l.cells=function(){for(var f=this.stars,a=[],o=0,u=f.length;o<u;++o)for(var h=f[o],i=0,s=h.length;i<s;i+=2){var p=h[i],d=h[i+1];o<Math.min(p,d)&&a.push([o,p,d])}return a};function t(f,a){for(var o=new Array(f),u=0;u<f;++u)o[u]=[];return new n(o,a)}},{"binary-search-bounds":96}],117:[function(e,v,M){v.exports=r;function r(n){for(var l=1,c=1;c<n.length;++c)for(var t=0;t<c;++t)if(n[c]<n[t])l=-l;else if(n[t]===n[c])return 0;return l}},{}],118:[function(e,v,M){var r=e("dup"),n=e("robust-linear-solve");function l(f,a){for(var o=0,u=f.length,h=0;h<u;++h)o+=f[h]*a[h];return o}function c(f){var a=f.length;if(a===0)return[];f[0].length;var o=r([f.length+1,f.length+1],1),u=r([f.length+1],1);o[a][a]=0;for(var h=0;h<a;++h){for(var i=0;i<=h;++i)o[i][h]=o[h][i]=2*l(f[h],f[i]);u[h]=l(f[h],f[h])}for(var s=n(o,u),p=0,d=s[a+1],h=0;h<d.length;++h)p+=d[h];for(var y=new Array(a),h=0;h<a;++h){for(var d=s[h],b=0,i=0;i<d.length;++i)b+=d[i];y[h]=b/p}return y}function t(f){if(f.length===0)return[];for(var a=f[0].length,o=r([a]),u=c(f),h=0;h<f.length;++h)for(var i=0;i<a;++i)o[i]+=f[h][i]*u[h];return o}t.barycenetric=c,v.exports=t},{dup:176,"robust-linear-solve":547}],119:[function(e,v,M){v.exports=n;var r=e("circumcenter");function n(l){for(var c=r(l),t=0,f=0;f<l.length;++f)for(var a=l[f],o=0;o<c.length;++o)t+=Math.pow(a[o]-c[o],2);return Math.sqrt(t/l.length)}},{circumcenter:118}],120:[function(e,v,M){v.exports=r;function r(n,l,c){return l<c?n<l?l:n>c?c:n:n<c?c:n>l?l:n}},{}],121:[function(e,v,M){v.exports=k;var r=e("union-find"),n=e("box-intersect"),l=e("robust-segment-intersect"),c=e("big-rat"),t=e("big-rat/cmp"),f=e("big-rat/to-float"),a=e("rat-vec"),o=e("nextafter"),u=e("./lib/rat-seg-intersect");function h(R){var L=f(R);return[o(L,-1/0),o(L,1/0)]}function i(R,L){for(var z=new Array(L.length),E=0;E<L.length;++E){var S=L[E],C=R[S[0]],D=R[S[1]];z[E]=[o(Math.min(C[0],D[0]),-1/0),o(Math.min(C[1],D[1]),-1/0),o(Math.max(C[0],D[0]),1/0),o(Math.max(C[1],D[1]),1/0)]}return z}function s(R){for(var L=new Array(R.length),z=0;z<R.length;++z){var E=R[z];L[z]=[o(E[0],-1/0),o(E[1],-1/0),o(E[0],1/0),o(E[1],1/0)]}return L}function p(R,L,z){var E=[];return n(z,function(S,C){var D=L[S],F=L[C];if(!(D[0]===F[0]||D[0]===F[1]||D[1]===F[0]||D[1]===F[1])){var N=R[D[0]],G=R[D[1]],U=R[F[0]],X=R[F[1]];l(N,G,U,X)&&E.push([S,C])}}),E}function d(R,L,z,E){var S=[];return n(z,E,function(C,D){var F=L[C];if(!(F[0]===D||F[1]===D)){var N=R[D],G=R[F[0]],U=R[F[1]];l(G,U,N,N)&&S.push([C,D])}}),S}function y(R,L,z,E,S){var C,D,F=R.map(function(re){return[c(re[0]),c(re[1])]});for(C=0;C<z.length;++C){var N=z[C];D=N[0];var G=N[1],U=L[D],X=L[G],I=u(a(R[U[0]]),a(R[U[1]]),a(R[X[0]]),a(R[X[1]]));if(I){var B=R.length;R.push([f(I[0]),f(I[1])]),F.push(I),E.push([D,B],[G,B])}}for(E.sort(function(re,ee){if(re[0]!==ee[0])return re[0]-ee[0];var ae=F[re[1]],fe=F[ee[1]];return t(ae[0],fe[0])||t(ae[1],fe[1])}),C=E.length-1;C>=0;--C){var j=E[C];D=j[0];var H=L[D],K=H[0],te=H[1],J=R[K],oe=R[te];if((J[0]-oe[0]||J[1]-oe[1])<0){var ie=K;K=te,te=ie}H[0]=K;var Q=H[1]=j[1],V;for(S&&(V=H[2]);C>0&&E[C-1][0]===D;){var j=E[--C],se=j[1];S?L.push([Q,se,V]):L.push([Q,se]),Q=se}S?L.push([Q,te,V]):L.push([Q,te])}return F}function b(R,L,z){for(var E=L.length,S=new r(E),C=[],D=0;D<L.length;++D){var F=L[D],N=h(F[0]),G=h(F[1]);C.push([o(N[0],-1/0),o(G[0],-1/0),o(N[1],1/0),o(G[1],1/0)])}n(C,function(j,H){S.link(j,H)});for(var U=!0,X=new Array(E),D=0;D<E;++D){var I=S.find(D);I!==D&&(U=!1,R[I]=[Math.min(R[D][0],R[I][0]),Math.min(R[D][1],R[I][1])])}if(U)return null;for(var B=0,D=0;D<E;++D){var I=S.find(D);I===D?(X[D]=B,R[B++]=R[D]):X[D]=-1}R.length=B;for(var D=0;D<E;++D)X[D]<0&&(X[D]=X[S.find(D)]);return X}function m(R,L){return R[0]-L[0]||R[1]-L[1]}function _(R,L){var z=R[0]-L[0]||R[1]-L[1];return z||(R[2]<L[2]?-1:R[2]>L[2]?1:0)}function T(R,L,z){if(R.length!==0){if(L)for(var E=0;E<R.length;++E){var S=R[E],C=L[S[0]],D=L[S[1]];S[0]=Math.min(C,D),S[1]=Math.max(C,D)}else for(var E=0;E<R.length;++E){var S=R[E],C=S[0],D=S[1];S[0]=Math.min(C,D),S[1]=Math.max(C,D)}z?R.sort(_):R.sort(m);for(var F=1,E=1;E<R.length;++E){var N=R[E-1],G=R[E];G[0]===N[0]&&G[1]===N[1]&&(!z||G[2]===N[2])||(R[F++]=G)}R.length=F}}function g(R,L,z){var E=b(R,[],s(R));return T(L,E,z),!!E}function A(R,L,z){var E=i(R,L),S=p(R,L,E),C=s(R),D=d(R,L,E,C),F=y(R,L,S,D,z),N=b(R,F);return T(L,N,z),N?!0:S.length>0||D.length>0}function k(R,L,z){var E;if(z){E=L;for(var S=new Array(L.length),C=0;C<L.length;++C){var D=L[C];S[C]=[D[0],D[1],z[C]]}L=S}for(var F=g(R,L,!!z);A(R,L,!!z);)F=!0;if(z&&F){E.length=0,z.length=0;for(var C=0;C<L.length;++C){var D=L[C];E.push([D[0],D[1]]),z.push(D[2])}}return F}},{"./lib/rat-seg-intersect":122,"big-rat":83,"big-rat/cmp":81,"big-rat/to-float":95,"box-intersect":101,nextafter:496,"rat-vec":530,"robust-segment-intersect":551,"union-find":596}],122:[function(e,v,M){v.exports=u;var r=e("big-rat/mul"),n=e("big-rat/div"),l=e("big-rat/sub"),c=e("big-rat/sign"),t=e("rat-vec/sub"),f=e("rat-vec/add"),a=e("rat-vec/muls");function o(h,i){return l(r(h[0],i[1]),r(h[1],i[0]))}function u(h,i,s,p){var d=t(i,h),y=t(p,s),b=o(d,y);if(c(b)===0)return null;var m=t(h,s),_=o(y,m),T=n(_,b),g=a(d,T),A=f(h,g);return A}},{"big-rat/div":82,"big-rat/mul":92,"big-rat/sign":93,"big-rat/sub":94,"rat-vec/add":529,"rat-vec/muls":531,"rat-vec/sub":532}],123:[function(e,v,M){var r=e("clamp");v.exports=n,v.exports.to=n,v.exports.from=l;function n(c,t){t==null&&(t=!0);var f=c[0],a=c[1],o=c[2],u=c[3];u==null&&(u=t?1:255),t&&(f*=255,a*=255,o*=255,u*=255),f=r(f,0,255)&255,a=r(a,0,255)&255,o=r(o,0,255)&255,u=r(u,0,255)&255;var h=f*16777216+(a<<16)+(o<<8)+u;return h}function l(c,t){c=+c;var f=c>>>24,a=(c&16711680)>>>16,o=(c&65280)>>>8,u=c&255;return t===!1?[f,a,o,u]:[f/255,a/255,o/255,u/255]}},{clamp:120}],124:[function(e,v,M){v.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],125:[function(e,v,M){var r=e("color-rgba"),n=e("clamp"),l=e("dtype");v.exports=function(f,a){(a==="float"||!a)&&(a="array"),a==="uint"&&(a="uint8"),a==="uint_clamped"&&(a="uint8_clamped");var o=l(a),u=new o(4),h=a!=="uint8"&&a!=="uint8_clamped";return(!f.length||typeof f=="string")&&(f=r(f),f[0]/=255,f[1]/=255,f[2]/=255),c(f)?(u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3]!=null?f[3]:255,h&&(u[0]/=255,u[1]/=255,u[2]/=255,u[3]/=255),u):(h?(u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3]!=null?f[3]:1):(u[0]=n(Math.floor(f[0]*255),0,255),u[1]=n(Math.floor(f[1]*255),0,255),u[2]=n(Math.floor(f[2]*255),0,255),u[3]=f[3]==null?255:n(Math.floor(f[3]*255),0,255)),u)};function c(t){return!!(t instanceof Uint8Array||t instanceof Uint8ClampedArray||Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}},{clamp:120,"color-rgba":127,dtype:175}],126:[function(e,v,M){(function(r){(function(){var n=e("color-name"),l=e("is-plain-obj"),c=e("defined");v.exports=f;var t={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function f(a){var o,u=[],h=1,i;if(typeof a=="string")if(n[a])u=n[a].slice(),i="rgb";else if(a==="transparent")h=0,i="rgb",u=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(a)){var s=a.slice(1),p=s.length,d=p<=4;h=1,d?(u=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],p===4&&(h=parseInt(s[3]+s[3],16)/255)):(u=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],p===8&&(h=parseInt(s[6]+s[7],16)/255)),u[0]||(u[0]=0),u[1]||(u[1]=0),u[2]||(u[2]=0),i="rgb"}else if(o=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(a)){var y=o[1],b=y==="rgb",s=y.replace(/a$/,"");i=s;var p=s==="cmyk"?4:s==="gray"?1:3;u=o[2].trim().split(/\s*,\s*/).map(function(g,A){if(/%$/.test(g))return A===p?parseFloat(g)/100:s==="rgb"?parseFloat(g)*255/100:parseFloat(g);if(s[A]==="h"){if(/deg$/.test(g))return parseFloat(g);if(t[g]!==void 0)return t[g]}return parseFloat(g)}),y===s&&u.push(1),h=b||u[p]===void 0?1:u[p],u=u.slice(0,p)}else a.length>10&&/[0-9](?:\s|\/)/.test(a)&&(u=a.match(/([0-9]+)/g).map(function(_){return parseFloat(_)}),i=a.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(a))i="rgb",u=[a>>>16,(a&65280)>>>8,a&255];else if(l(a)){var m=c(a.r,a.red,a.R,null);m!==null?(i="rgb",u=[m,c(a.g,a.green,a.G),c(a.b,a.blue,a.B)]):(i="hsl",u=[c(a.h,a.hue,a.H),c(a.s,a.saturation,a.S),c(a.l,a.lightness,a.L,a.b,a.brightness)]),h=c(a.a,a.alpha,a.opacity,1),a.opacity!=null&&(h/=100)}else(Array.isArray(a)||r.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a))&&(u=[a[0],a[1],a[2]],i="rgb",h=a.length===4?a[3]:1);return{space:i,values:u,alpha:h}}}).call(this)}).call(this,typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":124,defined:170,"is-plain-obj":469}],127:[function(e,v,M){var r=e("color-parse"),n=e("color-space/hsl"),l=e("clamp");v.exports=function(t){var f,a=r(t);return a.space?(f=Array(3),f[0]=l(a.values[0],0,255),f[1]=l(a.values[1],0,255),f[2]=l(a.values[2],0,255),a.space[0]==="h"&&(f=n.rgb(f)),f.push(l(a.alpha,0,1)),f):[]}},{clamp:120,"color-parse":126,"color-space/hsl":128}],128:[function(e,v,M){var r=e("./rgb");v.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var l=n[0]/360,c=n[1]/100,t=n[2]/100,f,a,o,u,h;if(c===0)return h=t*255,[h,h,h];t<.5?a=t*(1+c):a=t+c-t*c,f=2*t-a,u=[0,0,0];for(var i=0;i<3;i++)o=l+1/3*-(i-1),o<0?o++:o>1&&o--,6*o<1?h=f+(a-f)*6*o:2*o<1?h=a:3*o<2?h=f+(a-f)*(2/3-o)*6:h=f,u[i]=h*255;return u}},r.hsl=function(n){var l=n[0]/255,c=n[1]/255,t=n[2]/255,f=Math.min(l,c,t),a=Math.max(l,c,t),o=a-f,u,h,i;return a===f?u=0:l===a?u=(c-t)/o:c===a?u=2+(t-l)/o:t===a&&(u=4+(l-c)/o),u=Math.min(u*60,360),u<0&&(u+=360),i=(f+a)/2,a===f?h=0:i<=.5?h=o/(a+f):h=o/(2-a-f),[u,h*100,i*100]}},{"./rgb":129}],129:[function(e,v,M){v.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],130:[function(e,v,M){v.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],131:[function(e,v,M){var r=e("./colorScale"),n=e("lerp");v.exports=l;function l(a){var o,u,h,i,s,p,d,y,T,b,m;if(a||(a={}),y=(a.nshades||72)-1,d=a.format||"hex",p=a.colormap,p||(p="jet"),typeof p=="string"){if(p=p.toLowerCase(),!r[p])throw Error(p+" not a supported colorscale");s=r[p]}else if(Array.isArray(p))s=p.slice();else throw Error("unsupported colormap option",p);if(s.length>y+1)throw new Error(p+" map requires nshades to be at least size "+s.length);Array.isArray(a.alpha)?a.alpha.length!==2?b=[1,1]:b=a.alpha.slice():typeof a.alpha=="number"?b=[a.alpha,a.alpha]:b=[1,1],o=s.map(function(k){return Math.round(k.index*y)}),b[0]=Math.min(Math.max(b[0],0),1),b[1]=Math.min(Math.max(b[1],0),1);var _=s.map(function(k,R){var L=s[R].index,z=s[R].rgb.slice();return z.length===4&&z[3]>=0&&z[3]<=1||(z[3]=b[0]+(b[1]-b[0])*L),z}),T=[];for(m=0;m<o.length-1;++m){i=o[m+1]-o[m],u=_[m],h=_[m+1];for(var g=0;g<i;g++){var A=g/i;T.push([Math.round(n(u[0],h[0],A)),Math.round(n(u[1],h[1],A)),Math.round(n(u[2],h[2],A)),n(u[3],h[3],A)])}}return T.push(s[s.length-1].rgb.concat(b[1])),d==="hex"?T=T.map(t):d==="rgbaString"?T=T.map(f):d==="float"&&(T=T.map(c)),T}function c(a){return[a[0]/255,a[1]/255,a[2]/255,a[3]]}function t(a){for(var o,u="#",h=0;h<3;++h)o=a[h],o=o.toString(16),u+=("00"+o).substr(o.length);return u}function f(a){return"rgba("+a.join(",")+")"}},{"./colorScale":130,lerp:472}],132:[function(e,v,M){v.exports=a;var r=e("robust-orientation"),n=e("signum"),l=e("two-sum"),c=e("robust-product"),t=e("robust-sum");function f(o,u,h){var i=l(o[0],-u[0]),s=l(o[1],-u[1]),p=l(h[0],-u[0]),d=l(h[1],-u[1]),y=t(c(i,p),c(s,d));return y[y.length-1]>=0}function a(o,u,h,i){var s=r(u,h,i);if(s===0){var p=n(r(o,u,h)),d=n(r(o,u,i));if(p===d){if(p===0){var y=f(o,u,h),b=f(o,u,i);return y===b?0:y?1:-1}return 0}else{if(d===0)return p>0||f(o,u,i)?-1:1;if(p===0)return d>0||f(o,u,h)?1:-1}return n(d-p)}var m=r(o,u,h);if(m>0)return s>0&&r(o,u,i)>0?1:-1;if(m<0)return s>0||r(o,u,i)>0?1:-1;var _=r(o,u,i);return _>0||f(o,u,h)?1:-1}},{"robust-orientation":548,"robust-product":549,"robust-sum":553,signum:554,"two-sum":583}],133:[function(e,v,M){v.exports=l;var r=Math.min;function n(c,t){return c-t}function l(c,t){var f=c.length,a=c.length-t.length;if(a)return a;switch(f){case 0:return 0;case 1:return c[0]-t[0];case 2:return c[0]+c[1]-t[0]-t[1]||r(c[0],c[1])-r(t[0],t[1]);case 3:var o=c[0]+c[1],u=t[0]+t[1];if(a=o+c[2]-(u+t[2]),a)return a;var h=r(c[0],c[1]),i=r(t[0],t[1]);return r(h,c[2])-r(i,t[2])||r(h+c[2],o)-r(i+t[2],u);case 4:var s=c[0],p=c[1],d=c[2],y=c[3],b=t[0],m=t[1],_=t[2],T=t[3];return s+p+d+y-(b+m+_+T)||r(s,p,d,y)-r(b,m,_,T,b)||r(s+p,s+d,s+y,p+d,p+y,d+y)-r(b+m,b+_,b+T,m+_,m+T,_+T)||r(s+p+d,s+p+y,s+d+y,p+d+y)-r(b+m+_,b+m+T,b+_+T,m+_+T);default:for(var g=c.slice().sort(n),A=t.slice().sort(n),k=0;k<f;++k)if(a=g[k]-A[k],a)return a;return 0}}},{}],134:[function(e,v,M){var r=e("compare-cell"),n=e("cell-orientation");v.exports=l;function l(c,t){return r(c,t)||n(c)-n(t)}},{"cell-orientation":117,"compare-cell":133}],135:[function(e,v,M){var r=e("./lib/ch1d"),n=e("./lib/ch2d"),l=e("./lib/chnd");v.exports=c;function c(t){var f=t.length;if(f===0)return[];if(f===1)return[[0]];var a=t[0].length;return a===0?[]:a===1?r(t):a===2?n(t):l(t,a)}},{"./lib/ch1d":136,"./lib/ch2d":137,"./lib/chnd":138}],136:[function(e,v,M){v.exports=r;function r(n){for(var l=0,c=0,t=1;t<n.length;++t)n[t][0]<n[l][0]&&(l=t),n[t][0]>n[c][0]&&(c=t);return l<c?[[l],[c]]:l>c?[[c],[l]]:[[l]]}},{}],137:[function(e,v,M){v.exports=n;var r=e("monotone-convex-hull-2d");function n(l){var c=r(l),t=c.length;if(t<=2)return[];for(var f=new Array(t),a=c[t-1],o=0;o<t;++o){var u=c[o];f[o]=[a,u],a=u}return f}},{"monotone-convex-hull-2d":482}],138:[function(e,v,M){v.exports=t;var r=e("incremental-convex-hull"),n=e("affine-hull");function l(f,a){for(var o=f.length,u=new Array(o),h=0;h<a.length;++h)u[h]=f[a[h]];for(var i=a.length,h=0;h<o;++h)a.indexOf(h)<0&&(u[i++]=f[h]);return u}function c(f,a){for(var o=f.length,u=a.length,h=0;h<o;++h)for(var i=f[h],s=0;s<i.length;++s){var p=i[s];if(p<u)i[s]=a[p];else{p=p-u;for(var d=0;d<u;++d)p>=a[d]&&(p+=1);i[s]=p}}return f}function t(f,a){try{return r(f,!0)}catch{var o=n(f);if(o.length<=a)return[];var u=l(f,o),h=r(u,!0);return c(h,o)}}},{"affine-hull":67,"incremental-convex-hull":459}],139:[function(e,v,M){v.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|ç)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|é)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|é)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|ã)o.?tom(e|é)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],140:[function(e,v,M){v.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],141:[function(e,v,M){v.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],142:[function(e,v,M){v.exports=["normal","italic","oblique"]},{}],143:[function(e,v,M){v.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],144:[function(e,v,M){v.exports={parse:e("./parse"),stringify:e("./stringify")}},{"./parse":146,"./stringify":147}],145:[function(e,v,M){var r=e("css-font-size-keywords");v.exports={isSize:function(l){return/^[\d\.]/.test(l)||l.indexOf("/")!==-1||r.indexOf(l)!==-1}}},{"css-font-size-keywords":140}],146:[function(e,v,M){var r=e("unquote"),n=e("css-global-keywords"),l=e("css-system-font-keywords"),c=e("css-font-weight-keywords"),t=e("css-font-style-keywords"),f=e("css-font-stretch-keywords"),a=e("string-split-by"),o=e("./lib/util").isSize;v.exports=h;var u=h.cache={};function h(s){if(typeof s!="string")throw new Error("Font argument must be a string.");if(u[s])return u[s];if(s==="")throw new Error("Cannot parse an empty string.");if(l.indexOf(s)!==-1)return u[s]={system:s};for(var p={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=a(s,/\s+/),y;y=d.shift();){if(n.indexOf(y)!==-1)return["style","variant","weight","stretch"].forEach(function(m){p[m]=y}),u[s]=p;if(t.indexOf(y)!==-1){p.style=y;continue}if(y==="normal"||y==="small-caps"){p.variant=y;continue}if(f.indexOf(y)!==-1){p.stretch=y;continue}if(c.indexOf(y)!==-1){p.weight=y;continue}if(o(y)){var b=a(y,"/");if(p.size=b[0],b[1]!=null?p.lineHeight=i(b[1]):d[0]==="/"&&(d.shift(),p.lineHeight=i(d.shift())),!d.length)throw new Error("Missing required font-family.");return p.family=a(d.join(" "),/\s*,\s*/).map(r),u[s]=p}throw new Error("Unknown or unsupported font token: "+y)}throw new Error("Missing required font-size.")}function i(s){var p=parseFloat(s);return p.toString()===s?p:s}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,"string-split-by":568,unquote:598}],147:[function(e,v,M){var r=e("pick-by-alias"),n=e("./lib/util").isSize,l=s(e("css-global-keywords")),c=s(e("css-system-font-keywords")),t=s(e("css-font-weight-keywords")),f=s(e("css-font-style-keywords")),a=s(e("css-font-stretch-keywords")),o={normal:1,"small-caps":1},u={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},h={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};v.exports=function(d){if(d=r(d,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),d.system)return d.system&&i(d.system,c),d.system;if(i(d.style,f),i(d.variant,o),i(d.weight,t),i(d.stretch,a),d.size==null&&(d.size=h.size),typeof d.size=="number"&&(d.size+="px"),!n)throw Error("Bad size value `"+d.size+"`");d.family||(d.family=h.family),Array.isArray(d.family)&&(d.family.length||(d.family=[h.family]),d.family=d.family.map(function(b){return u[b]?b:'"'+b+'"'}).join(", "));var y=[];return y.push(d.style),d.variant!==d.style&&y.push(d.variant),d.weight!==d.variant&&d.weight!==d.style&&y.push(d.weight),d.stretch!==d.weight&&d.stretch!==d.variant&&d.stretch!==d.style&&y.push(d.stretch),y.push(d.size+(d.lineHeight==null||d.lineHeight==="normal"||d.lineHeight+""=="1"?"":"/"+d.lineHeight)),y.push(d.family),y.filter(Boolean).join(" ")};function i(p,d){if(p&&!d[p]&&!l[p])throw Error("Unknown keyword `"+p+"`");return p}function s(p){for(var d={},y=0;y<p.length;y++)d[p[y]]=1;return d}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,"pick-by-alias":511}],148:[function(e,v,M){v.exports=["inherit","initial","unset"]},{}],149:[function(e,v,M){v.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],150:[function(e,v,M){function r(l,c,t,f,a,o){var u=6*a*a-6*a,h=3*a*a-4*a+1,i=-6*a*a+6*a,s=3*a*a-2*a;if(l.length){o||(o=new Array(l.length));for(var p=l.length-1;p>=0;--p)o[p]=u*l[p]+h*c[p]+i*t[p]+s*f[p];return o}return u*l+h*c+i*t[p]+s*f}function n(l,c,t,f,a,o){var u=a-1,h=a*a,i=u*u,s=(1+2*a)*i,p=a*i,d=h*(3-2*a),y=h*u;if(l.length){o||(o=new Array(l.length));for(var b=l.length-1;b>=0;--b)o[b]=s*l[b]+p*c[b]+d*t[b]+y*f[b];return o}return s*l+p*c+d*t+y*f}v.exports=n,v.exports.derivative=r},{}],151:[function(e,v,M){var r=e("./lib/thunk.js");function n(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function l(c){var t=new n;t.pre=c.pre,t.body=c.body,t.post=c.post;var f=c.args.slice(0);t.argTypes=f;for(var a=0;a<f.length;++a){var o=f[a];if(o==="array"||typeof o=="object"&&o.blockIndices){if(t.argTypes[a]="array",t.arrayArgs.push(a),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+a),a<t.pre.args.length&&t.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array args");if(a<t.post.args.length&&t.post.args[a].count>0)throw new Error("cwise: post() block may not reference array args")}else if(o==="scalar")t.scalarArgs.push(a),t.shimArgs.push("scalar"+a);else if(o==="index"){if(t.indexArgs.push(a),a<t.pre.args.length&&t.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array index");if(a<t.body.args.length&&t.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array index");if(a<t.post.args.length&&t.post.args[a].count>0)throw new Error("cwise: post() block may not reference array index")}else if(o==="shape"){if(t.shapeArgs.push(a),a<t.pre.args.length&&t.pre.args[a].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(a<t.body.args.length&&t.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array shape");if(a<t.post.args.length&&t.post.args[a].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof o=="object"&&o.offset)t.argTypes[a]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(a);else throw new Error("cwise: Unknown argument type "+f[a])}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>f.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>f.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>f.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!c.printCode||!!c.debug,t.funcName=c.funcName||"cwise",t.blockSize=c.blockSize||64,r(t)}v.exports=l},{"./lib/thunk.js":153}],152:[function(e,v,M){var r=e("uniq");function n(o,u,h){var i=o.length,s=u.arrayArgs.length,p=u.indexArgs.length>0,d=[],y=[],b=0,m=0,_,T;for(_=0;_<i;++_)y.push(["i",_,"=0"].join(""));for(T=0;T<s;++T)for(_=0;_<i;++_)m=b,b=o[_],_===0?y.push(["d",T,"s",_,"=t",T,"p",b].join("")):y.push(["d",T,"s",_,"=(t",T,"p",b,"-s",m,"*t",T,"p",m,")"].join(""));for(y.length>0&&d.push("var "+y.join(",")),_=i-1;_>=0;--_)b=o[_],d.push(["for(i",_,"=0;i",_,"<s",b,";++i",_,"){"].join(""));for(d.push(h),_=0;_<i;++_){for(m=b,b=o[_],T=0;T<s;++T)d.push(["p",T,"+=d",T,"s",_].join(""));p&&(_>0&&d.push(["index[",m,"]-=s",m].join("")),d.push(["++index[",b,"]"].join(""))),d.push("}")}return d.join(`
`)}function l(o,u,h,i){for(var s=u.length,p=h.arrayArgs.length,d=h.blockSize,y=h.indexArgs.length>0,b=[],m=0;m<p;++m)b.push(["var offset",m,"=p",m].join(""));for(var m=o;m<s;++m)b.push(["for(var j"+m+"=SS[",u[m],"]|0;j",m,">0;){"].join("")),b.push(["if(j",m,"<",d,"){"].join("")),b.push(["s",u[m],"=j",m].join("")),b.push(["j",m,"=0"].join("")),b.push(["}else{s",u[m],"=",d].join("")),b.push(["j",m,"-=",d,"}"].join("")),y&&b.push(["index[",u[m],"]=j",m].join(""));for(var m=0;m<p;++m){for(var _=["offset"+m],T=o;T<s;++T)_.push(["j",T,"*t",m,"p",u[T]].join(""));b.push(["p",m,"=(",_.join("+"),")"].join(""))}b.push(n(u,h,i));for(var m=o;m<s;++m)b.push("}");return b.join(`
`)}function c(o){for(var u=0,h=o[0].length;u<h;){for(var i=1;i<o.length;++i)if(o[i][u]!==o[0][u])return u;++u}return u}function t(o,u,h){for(var i=o.body,s=[],p=[],d=0;d<o.args.length;++d){var y=o.args[d];if(!(y.count<=0)){var b=new RegExp(y.name,"g"),m="",_=u.arrayArgs.indexOf(d);switch(u.argTypes[d]){case"offset":var T=u.offsetArgIndex.indexOf(d),g=u.offsetArgs[T];_=g.array,m="+q"+T;case"array":m="p"+_+m;var A="l"+d,k="a"+_;if(u.arrayBlockIndices[_]===0)y.count===1?h[_]==="generic"?y.lvalue?(s.push(["var ",A,"=",k,".get(",m,")"].join("")),i=i.replace(b,A),p.push([k,".set(",m,",",A,")"].join(""))):i=i.replace(b,[k,".get(",m,")"].join("")):i=i.replace(b,[k,"[",m,"]"].join("")):h[_]==="generic"?(s.push(["var ",A,"=",k,".get(",m,")"].join("")),i=i.replace(b,A),y.lvalue&&p.push([k,".set(",m,",",A,")"].join(""))):(s.push(["var ",A,"=",k,"[",m,"]"].join("")),i=i.replace(b,A),y.lvalue&&p.push([k,"[",m,"]=",A].join("")));else{for(var R=[y.name],L=[m],z=0;z<Math.abs(u.arrayBlockIndices[_]);z++)R.push("\\s*\\[([^\\]]+)\\]"),L.push("$"+(z+1)+"*t"+_+"b"+z);if(b=new RegExp(R.join(""),"g"),m=L.join("+"),h[_]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");i=i.replace(b,[k,"[",m,"]"].join(""))}break;case"scalar":i=i.replace(b,"Y"+u.scalarArgs.indexOf(d));break;case"index":i=i.replace(b,"index");break;case"shape":i=i.replace(b,"shape");break}}}return[s.join(`
`),i,p.join(`
`)].join(`
`).trim()}function f(o){for(var u=new Array(o.length),h=!0,i=0;i<o.length;++i){var s=o[i],p=s.match(/\d+/);p?p=p[0]:p="",s.charAt(0)===0?u[i]="u"+s.charAt(1)+p:u[i]=s.charAt(0)+p,i>0&&(h=h&&u[i]===u[i-1])}return h?u[0]:u.join("")}function a(o,u){for(var h=u[1].length-Math.abs(o.arrayBlockIndices[0])|0,i=new Array(o.arrayArgs.length),s=new Array(o.arrayArgs.length),p=0;p<o.arrayArgs.length;++p)s[p]=u[2*p],i[p]=u[2*p+1];for(var d=[],y=[],b=[],m=[],_=[],p=0;p<o.arrayArgs.length;++p){o.arrayBlockIndices[p]<0?(b.push(0),m.push(h),d.push(h),y.push(h+o.arrayBlockIndices[p])):(b.push(o.arrayBlockIndices[p]),m.push(o.arrayBlockIndices[p]+h),d.push(0),y.push(o.arrayBlockIndices[p]));for(var T=[],g=0;g<i[p].length;g++)b[p]<=i[p][g]&&i[p][g]<m[p]&&T.push(i[p][g]-b[p]);_.push(T)}for(var A=["SS"],k=["'use strict'"],R=[],g=0;g<h;++g)R.push(["s",g,"=SS[",g,"]"].join(""));for(var p=0;p<o.arrayArgs.length;++p){A.push("a"+p),A.push("t"+p),A.push("p"+p);for(var g=0;g<h;++g)R.push(["t",p,"p",g,"=t",p,"[",b[p]+g,"]"].join(""));for(var g=0;g<Math.abs(o.arrayBlockIndices[p]);++g)R.push(["t",p,"b",g,"=t",p,"[",d[p]+g,"]"].join(""))}for(var p=0;p<o.scalarArgs.length;++p)A.push("Y"+p);if(o.shapeArgs.length>0&&R.push("shape=SS.slice(0)"),o.indexArgs.length>0){for(var L=new Array(h),p=0;p<h;++p)L[p]="0";R.push(["index=[",L.join(","),"]"].join(""))}for(var p=0;p<o.offsetArgs.length;++p){for(var z=o.offsetArgs[p],E=[],g=0;g<z.offset.length;++g)z.offset[g]!==0&&(z.offset[g]===1?E.push(["t",z.array,"p",g].join("")):E.push([z.offset[g],"*t",z.array,"p",g].join("")));E.length===0?R.push("q"+p+"=0"):R.push(["q",p,"=",E.join("+")].join(""))}var S=r([].concat(o.pre.thisVars).concat(o.body.thisVars).concat(o.post.thisVars));R=R.concat(S),R.length>0&&k.push("var "+R.join(","));for(var p=0;p<o.arrayArgs.length;++p)k.push("p"+p+"|=0");o.pre.body.length>3&&k.push(t(o.pre,o,s));var C=t(o.body,o,s),D=c(_);D<h?k.push(l(D,_[0],o,C)):k.push(n(_[0],o,C)),o.post.body.length>3&&k.push(t(o.post,o,s)),o.debug&&console.log("-----Generated cwise routine for ",u,`:
`+k.join(`
`)+`
----------`);var F=[o.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",D,f(s)].join(""),N=new Function(["function ",F,"(",A.join(","),"){",k.join(`
`),"} return ",F].join(""));return N()}v.exports=a},{uniq:597}],153:[function(e,v,M){var r=e("./compile.js");function n(l){var c=["'use strict'","var CACHED={}"],t=[],f=l.funcName+"_cwise_thunk";c.push(["return function ",f,"(",l.shimArgs.join(","),"){"].join(""));for(var a=[],o=[],u=[["array",l.arrayArgs[0],".shape.slice(",Math.max(0,l.arrayBlockIndices[0]),l.arrayBlockIndices[0]<0?","+l.arrayBlockIndices[0]+")":")"].join("")],h=[],i=[],s=0;s<l.arrayArgs.length;++s){var p=l.arrayArgs[s];t.push(["t",p,"=array",p,".dtype,","r",p,"=array",p,".order"].join("")),a.push("t"+p),a.push("r"+p),o.push("t"+p),o.push("r"+p+".join()"),u.push("array"+p+".data"),u.push("array"+p+".stride"),u.push("array"+p+".offset|0"),s>0&&(h.push("array"+l.arrayArgs[0]+".shape.length===array"+p+".shape.length+"+(Math.abs(l.arrayBlockIndices[0])-Math.abs(l.arrayBlockIndices[s]))),i.push("array"+l.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,l.arrayBlockIndices[0])+"]===array"+p+".shape[shapeIndex+"+Math.max(0,l.arrayBlockIndices[s])+"]"))}l.arrayArgs.length>1&&(c.push("if (!("+h.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),c.push("for(var shapeIndex=array"+l.arrayArgs[0]+".shape.length-"+Math.abs(l.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),c.push("if (!("+i.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),c.push("}"));for(var s=0;s<l.scalarArgs.length;++s)u.push("scalar"+l.scalarArgs[s]);t.push(["type=[",o.join(","),"].join()"].join("")),t.push("proc=CACHED[type]"),c.push("var "+t.join(",")),c.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",u.join(","),")}"].join("")),l.debug&&console.log(`-----Generated thunk:
`+c.join(`
`)+`
----------`);var d=new Function("compile",c.join(`
`));return d(r.bind(void 0,l))}v.exports=n},{"./compile.js":152}],154:[function(e,v,M){var r=e("type/value/is"),n=e("type/value/ensure"),l=e("type/plain-function/ensure"),c=e("es5-ext/object/copy"),t=e("es5-ext/object/normalize-options"),f=e("es5-ext/object/map"),a=Function.prototype.bind,o=Object.defineProperty,u=Object.prototype.hasOwnProperty,h;h=function(i,s,p){var d=n(s)&&l(s.value),y;return y=c(s),delete y.writable,delete y.value,y.get=function(){return!p.overwriteDefinition&&u.call(this,i)?d:(s.value=a.call(d,p.resolveContext?p.resolveContext(this):this),o(this,i,s),this[i])},y},v.exports=function(i){var s=t(arguments[1]);return r(s.resolveContext)&&l(s.resolveContext),f(i,function(p,d){return h(d,p,s)})}},{"es5-ext/object/copy":196,"es5-ext/object/map":204,"es5-ext/object/normalize-options":205,"type/plain-function/ensure":589,"type/value/ensure":593,"type/value/is":594}],155:[function(e,v,M){var r=e("type/value/is"),n=e("type/plain-function/is"),l=e("es5-ext/object/assign"),c=e("es5-ext/object/normalize-options"),t=e("es5-ext/string/#/contains"),f=v.exports=function(a,o){var u,h,i,s,p;return arguments.length<2||typeof a!="string"?(s=o,o=a,a=null):s=arguments[2],r(a)?(u=t.call(a,"c"),h=t.call(a,"e"),i=t.call(a,"w")):(u=i=!0,h=!1),p={value:o,configurable:u,enumerable:h,writable:i},s?l(c(s),p):p};f.gs=function(a,o,u){var h,i,s,p;return typeof a!="string"?(s=u,u=o,o=a,a=null):s=arguments[3],r(o)?n(o)?r(u)?n(u)||(s=u,u=void 0):u=void 0:(s=o,o=u=void 0):o=void 0,r(a)?(h=t.call(a,"c"),i=t.call(a,"e")):(h=!0,i=!1),p={get:o,set:u,configurable:h,enumerable:i},s?l(c(s),p):p}},{"es5-ext/object/assign":193,"es5-ext/object/normalize-options":205,"es5-ext/string/#/contains":212,"type/plain-function/is":590,"type/value/is":594}],156:[function(e,v,M){(function(r,n){n(typeof M=="object"&&typeof v<"u"?M:r.d3=r.d3||{})})(this,function(r){function n(V,se){return V<se?-1:V>se?1:V>=se?0:NaN}function l(V){return V.length===1&&(V=c(V)),{left:function(se,re,ee,ae){for(ee==null&&(ee=0),ae==null&&(ae=se.length);ee<ae;){var fe=ee+ae>>>1;V(se[fe],re)<0?ee=fe+1:ae=fe}return ee},right:function(se,re,ee,ae){for(ee==null&&(ee=0),ae==null&&(ae=se.length);ee<ae;){var fe=ee+ae>>>1;V(se[fe],re)>0?ae=fe:ee=fe+1}return ee}}}function c(V){return function(se,re){return n(V(se),re)}}var t=l(n),f=t.right,a=t.left;function o(V,se){se==null&&(se=u);for(var re=0,ee=V.length-1,ae=V[0],fe=new Array(ee<0?0:ee);re<ee;)fe[re]=se(ae,ae=V[++re]);return fe}function u(V,se){return[V,se]}function h(V,se,re){var ee=V.length,ae=se.length,fe=new Array(ee*ae),de,pe,W,ue;for(re==null&&(re=u),de=W=0;de<ee;++de)for(ue=V[de],pe=0;pe<ae;++pe,++W)fe[W]=re(ue,se[pe]);return fe}function i(V,se){return se<V?-1:se>V?1:se>=V?0:NaN}function s(V){return V===null?NaN:+V}function p(V,se){var re=V.length,ee=0,ae=-1,fe=0,de,pe,W=0;if(se==null)for(;++ae<re;)isNaN(de=s(V[ae]))||(pe=de-fe,fe+=pe/++ee,W+=pe*(de-fe));else for(;++ae<re;)isNaN(de=s(se(V[ae],ae,V)))||(pe=de-fe,fe+=pe/++ee,W+=pe*(de-fe));if(ee>1)return W/(ee-1)}function d(V,se){var re=p(V,se);return re&&Math.sqrt(re)}function y(V,se){var re=V.length,ee=-1,ae,fe,de;if(se==null){for(;++ee<re;)if((ae=V[ee])!=null&&ae>=ae)for(fe=de=ae;++ee<re;)(ae=V[ee])!=null&&(fe>ae&&(fe=ae),de<ae&&(de=ae))}else for(;++ee<re;)if((ae=se(V[ee],ee,V))!=null&&ae>=ae)for(fe=de=ae;++ee<re;)(ae=se(V[ee],ee,V))!=null&&(fe>ae&&(fe=ae),de<ae&&(de=ae));return[fe,de]}var b=Array.prototype,m=b.slice,_=b.map;function T(V){return function(){return V}}function g(V){return V}function A(V,se,re){V=+V,se=+se,re=(ae=arguments.length)<2?(se=V,V=0,1):ae<3?1:+re;for(var ee=-1,ae=Math.max(0,Math.ceil((se-V)/re))|0,fe=new Array(ae);++ee<ae;)fe[ee]=V+ee*re;return fe}var k=Math.sqrt(50),R=Math.sqrt(10),L=Math.sqrt(2);function z(V,se,re){var ee,ae=-1,fe,de,pe;if(se=+se,V=+V,re=+re,V===se&&re>0)return[V];if((ee=se<V)&&(fe=V,V=se,se=fe),(pe=E(V,se,re))===0||!isFinite(pe))return[];if(pe>0)for(V=Math.ceil(V/pe),se=Math.floor(se/pe),de=new Array(fe=Math.ceil(se-V+1));++ae<fe;)de[ae]=(V+ae)*pe;else for(V=Math.floor(V*pe),se=Math.ceil(se*pe),de=new Array(fe=Math.ceil(V-se+1));++ae<fe;)de[ae]=(V-ae)/pe;return ee&&de.reverse(),de}function E(V,se,re){var ee=(se-V)/Math.max(0,re),ae=Math.floor(Math.log(ee)/Math.LN10),fe=ee/Math.pow(10,ae);return ae>=0?(fe>=k?10:fe>=R?5:fe>=L?2:1)*Math.pow(10,ae):-Math.pow(10,-ae)/(fe>=k?10:fe>=R?5:fe>=L?2:1)}function S(V,se,re){var ee=Math.abs(se-V)/Math.max(0,re),ae=Math.pow(10,Math.floor(Math.log(ee)/Math.LN10)),fe=ee/ae;return fe>=k?ae*=10:fe>=R?ae*=5:fe>=L&&(ae*=2),se<V?-ae:ae}function C(V){return Math.ceil(Math.log(V.length)/Math.LN2)+1}function D(){var V=g,se=y,re=C;function ee(ae){var fe,de=ae.length,pe,W=new Array(de);for(fe=0;fe<de;++fe)W[fe]=V(ae[fe],fe,ae);var ue=se(W),me=ue[0],be=ue[1],ke=re(W,me,be);Array.isArray(ke)||(ke=S(me,be,ke),ke=A(Math.ceil(me/ke)*ke,be,ke));for(var Pe=ke.length;ke[0]<=me;)ke.shift(),--Pe;for(;ke[Pe-1]>be;)ke.pop(),--Pe;var je=new Array(Pe+1),ze;for(fe=0;fe<=Pe;++fe)ze=je[fe]=[],ze.x0=fe>0?ke[fe-1]:me,ze.x1=fe<Pe?ke[fe]:be;for(fe=0;fe<de;++fe)pe=W[fe],me<=pe&&pe<=be&&je[f(ke,pe,0,Pe)].push(ae[fe]);return je}return ee.value=function(ae){return arguments.length?(V=typeof ae=="function"?ae:T(ae),ee):V},ee.domain=function(ae){return arguments.length?(se=typeof ae=="function"?ae:T([ae[0],ae[1]]),ee):se},ee.thresholds=function(ae){return arguments.length?(re=typeof ae=="function"?ae:Array.isArray(ae)?T(m.call(ae)):T(ae),ee):re},ee}function F(V,se,re){if(re==null&&(re=s),!!(ee=V.length)){if((se=+se)<=0||ee<2)return+re(V[0],0,V);if(se>=1)return+re(V[ee-1],ee-1,V);var ee,ae=(ee-1)*se,fe=Math.floor(ae),de=+re(V[fe],fe,V),pe=+re(V[fe+1],fe+1,V);return de+(pe-de)*(ae-fe)}}function N(V,se,re){return V=_.call(V,s).sort(n),Math.ceil((re-se)/(2*(F(V,.75)-F(V,.25))*Math.pow(V.length,-1/3)))}function G(V,se,re){return Math.ceil((re-se)/(3.5*d(V)*Math.pow(V.length,-1/3)))}function U(V,se){var re=V.length,ee=-1,ae,fe;if(se==null){for(;++ee<re;)if((ae=V[ee])!=null&&ae>=ae)for(fe=ae;++ee<re;)(ae=V[ee])!=null&&ae>fe&&(fe=ae)}else for(;++ee<re;)if((ae=se(V[ee],ee,V))!=null&&ae>=ae)for(fe=ae;++ee<re;)(ae=se(V[ee],ee,V))!=null&&ae>fe&&(fe=ae);return fe}function X(V,se){var re=V.length,ee=re,ae=-1,fe,de=0;if(se==null)for(;++ae<re;)isNaN(fe=s(V[ae]))?--ee:de+=fe;else for(;++ae<re;)isNaN(fe=s(se(V[ae],ae,V)))?--ee:de+=fe;if(ee)return de/ee}function I(V,se){var re=V.length,ee=-1,ae,fe=[];if(se==null)for(;++ee<re;)isNaN(ae=s(V[ee]))||fe.push(ae);else for(;++ee<re;)isNaN(ae=s(se(V[ee],ee,V)))||fe.push(ae);return F(fe.sort(n),.5)}function B(V){for(var se=V.length,re,ee=-1,ae=0,fe,de;++ee<se;)ae+=V[ee].length;for(fe=new Array(ae);--se>=0;)for(de=V[se],re=de.length;--re>=0;)fe[--ae]=de[re];return fe}function j(V,se){var re=V.length,ee=-1,ae,fe;if(se==null){for(;++ee<re;)if((ae=V[ee])!=null&&ae>=ae)for(fe=ae;++ee<re;)(ae=V[ee])!=null&&fe>ae&&(fe=ae)}else for(;++ee<re;)if((ae=se(V[ee],ee,V))!=null&&ae>=ae)for(fe=ae;++ee<re;)(ae=se(V[ee],ee,V))!=null&&fe>ae&&(fe=ae);return fe}function H(V,se){for(var re=se.length,ee=new Array(re);re--;)ee[re]=V[se[re]];return ee}function K(V,se){if(re=V.length){var re,ee=0,ae=0,fe,de=V[ae];for(se==null&&(se=n);++ee<re;)(se(fe=V[ee],de)<0||se(de,de)!==0)&&(de=fe,ae=ee);if(se(de,de)===0)return ae}}function te(V,se,re){for(var ee=(re??V.length)-(se=se==null?0:+se),ae,fe;ee;)fe=Math.random()*ee--|0,ae=V[ee+se],V[ee+se]=V[fe+se],V[fe+se]=ae;return V}function J(V,se){var re=V.length,ee=-1,ae,fe=0;if(se==null)for(;++ee<re;)(ae=+V[ee])&&(fe+=ae);else for(;++ee<re;)(ae=+se(V[ee],ee,V))&&(fe+=ae);return fe}function oe(V){if(!(fe=V.length))return[];for(var se=-1,re=j(V,ie),ee=new Array(re);++se<re;)for(var ae=-1,fe,de=ee[se]=new Array(fe);++ae<fe;)de[ae]=V[ae][se];return ee}function ie(V){return V.length}function Q(){return oe(arguments)}r.bisect=f,r.bisectRight=f,r.bisectLeft=a,r.ascending=n,r.bisector=l,r.cross=h,r.descending=i,r.deviation=d,r.extent=y,r.histogram=D,r.thresholdFreedmanDiaconis=N,r.thresholdScott=G,r.thresholdSturges=C,r.max=U,r.mean=X,r.median=I,r.merge=B,r.min=j,r.pairs=o,r.permute=H,r.quantile=F,r.range=A,r.scan=K,r.shuffle=te,r.sum=J,r.ticks=z,r.tickIncrement=E,r.tickStep=S,r.transpose=oe,r.variance=p,r.zip=Q,Object.defineProperty(r,"__esModule",{value:!0})})},{}],157:[function(e,v,M){(function(r,n){n(typeof M=="object"&&typeof v<"u"?M:r.d3=r.d3||{})})(this,function(r){var n="$";function l(){}l.prototype=c.prototype={constructor:l,has:function(b){return n+b in this},get:function(b){return this[n+b]},set:function(b,m){return this[n+b]=m,this},remove:function(b){var m=n+b;return m in this&&delete this[m]},clear:function(){for(var b in this)b[0]===n&&delete this[b]},keys:function(){var b=[];for(var m in this)m[0]===n&&b.push(m.slice(1));return b},values:function(){var b=[];for(var m in this)m[0]===n&&b.push(this[m]);return b},entries:function(){var b=[];for(var m in this)m[0]===n&&b.push({key:m.slice(1),value:this[m]});return b},size:function(){var b=0;for(var m in this)m[0]===n&&++b;return b},empty:function(){for(var b in this)if(b[0]===n)return!1;return!0},each:function(b){for(var m in this)m[0]===n&&b(this[m],m.slice(1),this)}};function c(b,m){var _=new l;if(b instanceof l)b.each(function(R,L){_.set(L,R)});else if(Array.isArray(b)){var T=-1,g=b.length,A;if(m==null)for(;++T<g;)_.set(T,b[T]);else for(;++T<g;)_.set(m(A=b[T],T,b),A)}else if(b)for(var k in b)_.set(k,b[k]);return _}function t(){var b=[],m=[],_,T,g;function A(R,L,z,E){if(L>=b.length)return _!=null&&R.sort(_),T!=null?T(R):R;for(var S=-1,C=R.length,D=b[L++],F,N,G=c(),U,X=z();++S<C;)(U=G.get(F=D(N=R[S])+""))?U.push(N):G.set(F,[N]);return G.each(function(I,B){E(X,B,A(I,L,z,E))}),X}function k(R,L){if(++L>b.length)return R;var z,E=m[L-1];return T!=null&&L>=b.length?z=R.entries():(z=[],R.each(function(S,C){z.push({key:C,values:k(S,L)})})),E!=null?z.sort(function(S,C){return E(S.key,C.key)}):z}return g={object:function(R){return A(R,0,f,a)},map:function(R){return A(R,0,o,u)},entries:function(R){return k(A(R,0,o,u),0)},key:function(R){return b.push(R),g},sortKeys:function(R){return m[b.length-1]=R,g},sortValues:function(R){return _=R,g},rollup:function(R){return T=R,g}}}function f(){return{}}function a(b,m,_){b[m]=_}function o(){return c()}function u(b,m,_){b.set(m,_)}function h(){}var i=c.prototype;h.prototype=s.prototype={constructor:h,has:i.has,add:function(b){return b+="",this[n+b]=b,this},remove:i.remove,clear:i.clear,values:i.keys,size:i.size,empty:i.empty,each:i.each};function s(b,m){var _=new h;if(b instanceof h)b.each(function(A){_.add(A)});else if(b){var T=-1,g=b.length;if(m==null)for(;++T<g;)_.add(b[T]);else for(;++T<g;)_.add(m(b[T],T,b))}return _}function p(b){var m=[];for(var _ in b)m.push(_);return m}function d(b){var m=[];for(var _ in b)m.push(b[_]);return m}function y(b){var m=[];for(var _ in b)m.push({key:_,value:b[_]});return m}r.nest=t,r.set=s,r.map=c,r.keys=p,r.values=d,r.entries=y,Object.defineProperty(r,"__esModule",{value:!0})})},{}],158:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?n(M):(r=r||self,n(r.d3=r.d3||{}))})(this,function(r){function n(Ve,ft,St){Ve.prototype=ft.prototype=St,St.constructor=Ve}function l(Ve,ft){var St=Object.create(Ve.prototype);for(var Wt in ft)St[Wt]=ft[Wt];return St}function c(){}var t=.7,f=1/t,a="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3,8})$/,i=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),s=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),p=new RegExp("^rgba\\("+[a,a,a,o]+"\\)$"),d=new RegExp("^rgba\\("+[u,u,u,o]+"\\)$"),y=new RegExp("^hsl\\("+[o,u,u]+"\\)$"),b=new RegExp("^hsla\\("+[o,u,u,o]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};n(c,A,{copy:function(Ve){return Object.assign(new this.constructor,this,Ve)},displayable:function(){return this.rgb().displayable()},hex:_,formatHex:_,formatHsl:T,formatRgb:g,toString:g});function _(){return this.rgb().formatHex()}function T(){return N(this).formatHsl()}function g(){return this.rgb().formatRgb()}function A(Ve){var ft,St;return Ve=(Ve+"").trim().toLowerCase(),(ft=h.exec(Ve))?(St=ft[1].length,ft=parseInt(ft[1],16),St===6?k(ft):St===3?new E(ft>>8&15|ft>>4&240,ft>>4&15|ft&240,(ft&15)<<4|ft&15,1):St===8?R(ft>>24&255,ft>>16&255,ft>>8&255,(ft&255)/255):St===4?R(ft>>12&15|ft>>8&240,ft>>8&15|ft>>4&240,ft>>4&15|ft&240,((ft&15)<<4|ft&15)/255):null):(ft=i.exec(Ve))?new E(ft[1],ft[2],ft[3],1):(ft=s.exec(Ve))?new E(ft[1]*255/100,ft[2]*255/100,ft[3]*255/100,1):(ft=p.exec(Ve))?R(ft[1],ft[2],ft[3],ft[4]):(ft=d.exec(Ve))?R(ft[1]*255/100,ft[2]*255/100,ft[3]*255/100,ft[4]):(ft=y.exec(Ve))?F(ft[1],ft[2]/100,ft[3]/100,1):(ft=b.exec(Ve))?F(ft[1],ft[2]/100,ft[3]/100,ft[4]):m.hasOwnProperty(Ve)?k(m[Ve]):Ve==="transparent"?new E(NaN,NaN,NaN,0):null}function k(Ve){return new E(Ve>>16&255,Ve>>8&255,Ve&255,1)}function R(Ve,ft,St,Wt){return Wt<=0&&(Ve=ft=St=NaN),new E(Ve,ft,St,Wt)}function L(Ve){return Ve instanceof c||(Ve=A(Ve)),Ve?(Ve=Ve.rgb(),new E(Ve.r,Ve.g,Ve.b,Ve.opacity)):new E}function z(Ve,ft,St,Wt){return arguments.length===1?L(Ve):new E(Ve,ft,St,Wt??1)}function E(Ve,ft,St,Wt){this.r=+Ve,this.g=+ft,this.b=+St,this.opacity=+Wt}n(E,z,l(c,{brighter:function(Ve){return Ve=Ve==null?f:Math.pow(f,Ve),new E(this.r*Ve,this.g*Ve,this.b*Ve,this.opacity)},darker:function(Ve){return Ve=Ve==null?t:Math.pow(t,Ve),new E(this.r*Ve,this.g*Ve,this.b*Ve,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:C,toString:C}));function S(){return"#"+D(this.r)+D(this.g)+D(this.b)}function C(){var Ve=this.opacity;return Ve=isNaN(Ve)?1:Math.max(0,Math.min(1,Ve)),(Ve===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Ve===1?")":", "+Ve+")")}function D(Ve){return Ve=Math.max(0,Math.min(255,Math.round(Ve)||0)),(Ve<16?"0":"")+Ve.toString(16)}function F(Ve,ft,St,Wt){return Wt<=0?Ve=ft=St=NaN:St<=0||St>=1?Ve=ft=NaN:ft<=0&&(Ve=NaN),new U(Ve,ft,St,Wt)}function N(Ve){if(Ve instanceof U)return new U(Ve.h,Ve.s,Ve.l,Ve.opacity);if(Ve instanceof c||(Ve=A(Ve)),!Ve)return new U;if(Ve instanceof U)return Ve;Ve=Ve.rgb();var ft=Ve.r/255,St=Ve.g/255,Wt=Ve.b/255,Qt=Math.min(ft,St,Wt),zt=Math.max(ft,St,Wt),$t=NaN,rr=zt-Qt,Pt=(zt+Qt)/2;return rr?(ft===zt?$t=(St-Wt)/rr+(St<Wt)*6:St===zt?$t=(Wt-ft)/rr+2:$t=(ft-St)/rr+4,rr/=Pt<.5?zt+Qt:2-zt-Qt,$t*=60):rr=Pt>0&&Pt<1?0:$t,new U($t,rr,Pt,Ve.opacity)}function G(Ve,ft,St,Wt){return arguments.length===1?N(Ve):new U(Ve,ft,St,Wt??1)}function U(Ve,ft,St,Wt){this.h=+Ve,this.s=+ft,this.l=+St,this.opacity=+Wt}n(U,G,l(c,{brighter:function(Ve){return Ve=Ve==null?f:Math.pow(f,Ve),new U(this.h,this.s,this.l*Ve,this.opacity)},darker:function(Ve){return Ve=Ve==null?t:Math.pow(t,Ve),new U(this.h,this.s,this.l*Ve,this.opacity)},rgb:function(){var Ve=this.h%360+(this.h<0)*360,ft=isNaN(Ve)||isNaN(this.s)?0:this.s,St=this.l,Wt=St+(St<.5?St:1-St)*ft,Qt=2*St-Wt;return new E(X(Ve>=240?Ve-240:Ve+120,Qt,Wt),X(Ve,Qt,Wt),X(Ve<120?Ve+240:Ve-120,Qt,Wt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Ve=this.opacity;return Ve=isNaN(Ve)?1:Math.max(0,Math.min(1,Ve)),(Ve===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Ve===1?")":", "+Ve+")")}}));function X(Ve,ft,St){return(Ve<60?ft+(St-ft)*Ve/60:Ve<180?St:Ve<240?ft+(St-ft)*(240-Ve)/60:ft)*255}var I=Math.PI/180,B=180/Math.PI,j=18,H=.96422,K=1,te=.82521,J=4/29,oe=6/29,ie=3*oe*oe,Q=oe*oe*oe;function V(Ve){if(Ve instanceof ee)return new ee(Ve.l,Ve.a,Ve.b,Ve.opacity);if(Ve instanceof be)return ke(Ve);Ve instanceof E||(Ve=L(Ve));var ft=pe(Ve.r),St=pe(Ve.g),Wt=pe(Ve.b),Qt=ae((.2225045*ft+.7168786*St+.0606169*Wt)/K),zt,$t;return ft===St&&St===Wt?zt=$t=Qt:(zt=ae((.4360747*ft+.3850649*St+.1430804*Wt)/H),$t=ae((.0139322*ft+.0971045*St+.7141733*Wt)/te)),new ee(116*Qt-16,500*(zt-Qt),200*(Qt-$t),Ve.opacity)}function se(Ve,ft){return new ee(Ve,0,0,ft??1)}function re(Ve,ft,St,Wt){return arguments.length===1?V(Ve):new ee(Ve,ft,St,Wt??1)}function ee(Ve,ft,St,Wt){this.l=+Ve,this.a=+ft,this.b=+St,this.opacity=+Wt}n(ee,re,l(c,{brighter:function(Ve){return new ee(this.l+j*(Ve??1),this.a,this.b,this.opacity)},darker:function(Ve){return new ee(this.l-j*(Ve??1),this.a,this.b,this.opacity)},rgb:function(){var Ve=(this.l+16)/116,ft=isNaN(this.a)?Ve:Ve+this.a/500,St=isNaN(this.b)?Ve:Ve-this.b/200;return ft=H*fe(ft),Ve=K*fe(Ve),St=te*fe(St),new E(de(3.1338561*ft-1.6168667*Ve-.4906146*St),de(-.9787684*ft+1.9161415*Ve+.033454*St),de(.0719453*ft-.2289914*Ve+1.4052427*St),this.opacity)}}));function ae(Ve){return Ve>Q?Math.pow(Ve,1/3):Ve/ie+J}function fe(Ve){return Ve>oe?Ve*Ve*Ve:ie*(Ve-J)}function de(Ve){return 255*(Ve<=.0031308?12.92*Ve:1.055*Math.pow(Ve,1/2.4)-.055)}function pe(Ve){return(Ve/=255)<=.04045?Ve/12.92:Math.pow((Ve+.055)/1.055,2.4)}function W(Ve){if(Ve instanceof be)return new be(Ve.h,Ve.c,Ve.l,Ve.opacity);if(Ve instanceof ee||(Ve=V(Ve)),Ve.a===0&&Ve.b===0)return new be(NaN,0<Ve.l&&Ve.l<100?0:NaN,Ve.l,Ve.opacity);var ft=Math.atan2(Ve.b,Ve.a)*B;return new be(ft<0?ft+360:ft,Math.sqrt(Ve.a*Ve.a+Ve.b*Ve.b),Ve.l,Ve.opacity)}function ue(Ve,ft,St,Wt){return arguments.length===1?W(Ve):new be(St,ft,Ve,Wt??1)}function me(Ve,ft,St,Wt){return arguments.length===1?W(Ve):new be(Ve,ft,St,Wt??1)}function be(Ve,ft,St,Wt){this.h=+Ve,this.c=+ft,this.l=+St,this.opacity=+Wt}function ke(Ve){if(isNaN(Ve.h))return new ee(Ve.l,0,0,Ve.opacity);var ft=Ve.h*I;return new ee(Ve.l,Math.cos(ft)*Ve.c,Math.sin(ft)*Ve.c,Ve.opacity)}n(be,me,l(c,{brighter:function(Ve){return new be(this.h,this.c,this.l+j*(Ve??1),this.opacity)},darker:function(Ve){return new be(this.h,this.c,this.l-j*(Ve??1),this.opacity)},rgb:function(){return ke(this).rgb()}}));var Pe=-.14861,je=1.78277,ze=-.29227,Ze=-.90649,tt=1.97294,Ce=tt*Ze,Ae=tt*je,Ne=je*ze-Ze*Pe;function qe(Ve){if(Ve instanceof kt)return new kt(Ve.h,Ve.s,Ve.l,Ve.opacity);Ve instanceof E||(Ve=L(Ve));var ft=Ve.r/255,St=Ve.g/255,Wt=Ve.b/255,Qt=(Ne*Wt+Ce*ft-Ae*St)/(Ne+Ce-Ae),zt=Wt-Qt,$t=(tt*(St-Qt)-ze*zt)/Ze,rr=Math.sqrt($t*$t+zt*zt)/(tt*Qt*(1-Qt)),Pt=rr?Math.atan2($t,zt)*B-120:NaN;return new kt(Pt<0?Pt+360:Pt,rr,Qt,Ve.opacity)}function At(Ve,ft,St,Wt){return arguments.length===1?qe(Ve):new kt(Ve,ft,St,Wt??1)}function kt(Ve,ft,St,Wt){this.h=+Ve,this.s=+ft,this.l=+St,this.opacity=+Wt}n(kt,At,l(c,{brighter:function(Ve){return Ve=Ve==null?f:Math.pow(f,Ve),new kt(this.h,this.s,this.l*Ve,this.opacity)},darker:function(Ve){return Ve=Ve==null?t:Math.pow(t,Ve),new kt(this.h,this.s,this.l*Ve,this.opacity)},rgb:function(){var Ve=isNaN(this.h)?0:(this.h+120)*I,ft=+this.l,St=isNaN(this.s)?0:this.s*ft*(1-ft),Wt=Math.cos(Ve),Qt=Math.sin(Ve);return new E(255*(ft+St*(Pe*Wt+je*Qt)),255*(ft+St*(ze*Wt+Ze*Qt)),255*(ft+St*(tt*Wt)),this.opacity)}})),r.color=A,r.cubehelix=At,r.gray=se,r.hcl=me,r.hsl=G,r.lab=re,r.lch=ue,r.rgb=z,Object.defineProperty(r,"__esModule",{value:!0})})},{}],159:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?n(M):(r=r||self,n(r.d3=r.d3||{}))})(this,function(r){var n={value:function(){}};function l(){for(var o=0,u=arguments.length,h={},i;o<u;++o){if(!(i=arguments[o]+"")||i in h||/[\s.]/.test(i))throw new Error("illegal type: "+i);h[i]=[]}return new c(h)}function c(o){this._=o}function t(o,u){return o.trim().split(/^|\s+/).map(function(h){var i="",s=h.indexOf(".");if(s>=0&&(i=h.slice(s+1),h=h.slice(0,s)),h&&!u.hasOwnProperty(h))throw new Error("unknown type: "+h);return{type:h,name:i}})}c.prototype=l.prototype={constructor:c,on:function(o,u){var h=this._,i=t(o+"",h),s,p=-1,d=i.length;if(arguments.length<2){for(;++p<d;)if((s=(o=i[p]).type)&&(s=f(h[s],o.name)))return s;return}if(u!=null&&typeof u!="function")throw new Error("invalid callback: "+u);for(;++p<d;)if(s=(o=i[p]).type)h[s]=a(h[s],o.name,u);else if(u==null)for(s in h)h[s]=a(h[s],o.name,null);return this},copy:function(){var o={},u=this._;for(var h in u)o[h]=u[h].slice();return new c(o)},call:function(o,u){if((s=arguments.length-2)>0)for(var h=new Array(s),i=0,s,p;i<s;++i)h[i]=arguments[i+2];if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(p=this._[o],i=0,s=p.length;i<s;++i)p[i].value.apply(u,h)},apply:function(o,u,h){if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(var i=this._[o],s=0,p=i.length;s<p;++s)i[s].value.apply(u,h)}};function f(o,u){for(var h=0,i=o.length,s;h<i;++h)if((s=o[h]).name===u)return s.value}function a(o,u,h){for(var i=0,s=o.length;i<s;++i)if(o[i].name===u){o[i]=n,o=o.slice(0,i).concat(o.slice(i+1));break}return h!=null&&o.push({name:u,value:h}),o}r.dispatch=l,Object.defineProperty(r,"__esModule",{value:!0})})},{}],160:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?n(M,e("d3-quadtree"),e("d3-collection"),e("d3-dispatch"),e("d3-timer")):n(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3)})(this,function(r,n,l,c,t){function f(L,z){var E;L==null&&(L=0),z==null&&(z=0);function S(){var C,D=E.length,F,N=0,G=0;for(C=0;C<D;++C)F=E[C],N+=F.x,G+=F.y;for(N=N/D-L,G=G/D-z,C=0;C<D;++C)F=E[C],F.x-=N,F.y-=G}return S.initialize=function(C){E=C},S.x=function(C){return arguments.length?(L=+C,S):L},S.y=function(C){return arguments.length?(z=+C,S):z},S}function a(L){return function(){return L}}function o(){return(Math.random()-.5)*1e-6}function u(L){return L.x+L.vx}function h(L){return L.y+L.vy}function i(L){var z,E,S=1,C=1;typeof L!="function"&&(L=a(L==null?1:+L));function D(){for(var G,U=z.length,X,I,B,j,H,K,te=0;te<C;++te)for(X=n.quadtree(z,u,h).visitAfter(F),G=0;G<U;++G)I=z[G],H=E[I.index],K=H*H,B=I.x+I.vx,j=I.y+I.vy,X.visit(J);function J(oe,ie,Q,V,se){var re=oe.data,ee=oe.r,ae=H+ee;if(re){if(re.index>I.index){var fe=B-re.x-re.vx,de=j-re.y-re.vy,pe=fe*fe+de*de;pe<ae*ae&&(fe===0&&(fe=o(),pe+=fe*fe),de===0&&(de=o(),pe+=de*de),pe=(ae-(pe=Math.sqrt(pe)))/pe*S,I.vx+=(fe*=pe)*(ae=(ee*=ee)/(K+ee)),I.vy+=(de*=pe)*ae,re.vx-=fe*(ae=1-ae),re.vy-=de*ae)}return}return ie>B+ae||V<B-ae||Q>j+ae||se<j-ae}}function F(G){if(G.data)return G.r=E[G.data.index];for(var U=G.r=0;U<4;++U)G[U]&&G[U].r>G.r&&(G.r=G[U].r)}function N(){if(z){var G,U=z.length,X;for(E=new Array(U),G=0;G<U;++G)X=z[G],E[X.index]=+L(X,G,z)}}return D.initialize=function(G){z=G,N()},D.iterations=function(G){return arguments.length?(C=+G,D):C},D.strength=function(G){return arguments.length?(S=+G,D):S},D.radius=function(G){return arguments.length?(L=typeof G=="function"?G:a(+G),N(),D):L},D}function s(L){return L.index}function p(L,z){var E=L.get(z);if(!E)throw new Error("missing: "+z);return E}function d(L){var z=s,E=X,S,C=a(30),D,F,N,G,U=1;L==null&&(L=[]);function X(K){return 1/Math.min(N[K.source.index],N[K.target.index])}function I(K){for(var te=0,J=L.length;te<U;++te)for(var oe=0,ie,Q,V,se,re,ee,ae;oe<J;++oe)ie=L[oe],Q=ie.source,V=ie.target,se=V.x+V.vx-Q.x-Q.vx||o(),re=V.y+V.vy-Q.y-Q.vy||o(),ee=Math.sqrt(se*se+re*re),ee=(ee-D[oe])/ee*K*S[oe],se*=ee,re*=ee,V.vx-=se*(ae=G[oe]),V.vy-=re*ae,Q.vx+=se*(ae=1-ae),Q.vy+=re*ae}function B(){if(F){var K,te=F.length,J=L.length,oe=l.map(F,z),ie;for(K=0,N=new Array(te);K<J;++K)ie=L[K],ie.index=K,typeof ie.source!="object"&&(ie.source=p(oe,ie.source)),typeof ie.target!="object"&&(ie.target=p(oe,ie.target)),N[ie.source.index]=(N[ie.source.index]||0)+1,N[ie.target.index]=(N[ie.target.index]||0)+1;for(K=0,G=new Array(J);K<J;++K)ie=L[K],G[K]=N[ie.source.index]/(N[ie.source.index]+N[ie.target.index]);S=new Array(J),j(),D=new Array(J),H()}}function j(){if(F)for(var K=0,te=L.length;K<te;++K)S[K]=+E(L[K],K,L)}function H(){if(F)for(var K=0,te=L.length;K<te;++K)D[K]=+C(L[K],K,L)}return I.initialize=function(K){F=K,B()},I.links=function(K){return arguments.length?(L=K,B(),I):L},I.id=function(K){return arguments.length?(z=K,I):z},I.iterations=function(K){return arguments.length?(U=+K,I):U},I.strength=function(K){return arguments.length?(E=typeof K=="function"?K:a(+K),j(),I):E},I.distance=function(K){return arguments.length?(C=typeof K=="function"?K:a(+K),H(),I):C},I}function y(L){return L.x}function b(L){return L.y}var m=10,_=Math.PI*(3-Math.sqrt(5));function T(L){var z,E=1,S=.001,C=1-Math.pow(S,1/300),D=0,F=.6,N=l.map(),G=t.timer(X),U=c.dispatch("tick","end");L==null&&(L=[]);function X(){I(),U.call("tick",z),E<S&&(G.stop(),U.call("end",z))}function I(H){var K,te=L.length,J;H===void 0&&(H=1);for(var oe=0;oe<H;++oe)for(E+=(D-E)*C,N.each(function(ie){ie(E)}),K=0;K<te;++K)J=L[K],J.fx==null?J.x+=J.vx*=F:(J.x=J.fx,J.vx=0),J.fy==null?J.y+=J.vy*=F:(J.y=J.fy,J.vy=0);return z}function B(){for(var H=0,K=L.length,te;H<K;++H){if(te=L[H],te.index=H,te.fx!=null&&(te.x=te.fx),te.fy!=null&&(te.y=te.fy),isNaN(te.x)||isNaN(te.y)){var J=m*Math.sqrt(H),oe=H*_;te.x=J*Math.cos(oe),te.y=J*Math.sin(oe)}(isNaN(te.vx)||isNaN(te.vy))&&(te.vx=te.vy=0)}}function j(H){return H.initialize&&H.initialize(L),H}return B(),z={tick:I,restart:function(){return G.restart(X),z},stop:function(){return G.stop(),z},nodes:function(H){return arguments.length?(L=H,B(),N.each(j),z):L},alpha:function(H){return arguments.length?(E=+H,z):E},alphaMin:function(H){return arguments.length?(S=+H,z):S},alphaDecay:function(H){return arguments.length?(C=+H,z):+C},alphaTarget:function(H){return arguments.length?(D=+H,z):D},velocityDecay:function(H){return arguments.length?(F=1-H,z):1-F},force:function(H,K){return arguments.length>1?(K==null?N.remove(H):N.set(H,j(K)),z):N.get(H)},find:function(H,K,te){var J=0,oe=L.length,ie,Q,V,se,re;for(te==null?te=1/0:te*=te,J=0;J<oe;++J)se=L[J],ie=H-se.x,Q=K-se.y,V=ie*ie+Q*Q,V<te&&(re=se,te=V);return re},on:function(H,K){return arguments.length>1?(U.on(H,K),z):U.on(H)}}}function g(){var L,z,E,S=a(-30),C,D=1,F=1/0,N=.81;function G(B){var j,H=L.length,K=n.quadtree(L,y,b).visitAfter(X);for(E=B,j=0;j<H;++j)z=L[j],K.visit(I)}function U(){if(L){var B,j=L.length,H;for(C=new Array(j),B=0;B<j;++B)H=L[B],C[H.index]=+S(H,B,L)}}function X(B){var j=0,H,K,te=0,J,oe,ie;if(B.length){for(J=oe=ie=0;ie<4;++ie)(H=B[ie])&&(K=Math.abs(H.value))&&(j+=H.value,te+=K,J+=K*H.x,oe+=K*H.y);B.x=J/te,B.y=oe/te}else{H=B,H.x=H.data.x,H.y=H.data.y;do j+=C[H.data.index];while(H=H.next)}B.value=j}function I(B,j,H,K){if(!B.value)return!0;var te=B.x-z.x,J=B.y-z.y,oe=K-j,ie=te*te+J*J;if(oe*oe/N<ie)return ie<F&&(te===0&&(te=o(),ie+=te*te),J===0&&(J=o(),ie+=J*J),ie<D&&(ie=Math.sqrt(D*ie)),z.vx+=te*B.value*E/ie,z.vy+=J*B.value*E/ie),!0;if(B.length||ie>=F)return;(B.data!==z||B.next)&&(te===0&&(te=o(),ie+=te*te),J===0&&(J=o(),ie+=J*J),ie<D&&(ie=Math.sqrt(D*ie)));do B.data!==z&&(oe=C[B.data.index]*E/ie,z.vx+=te*oe,z.vy+=J*oe);while(B=B.next)}return G.initialize=function(B){L=B,U()},G.strength=function(B){return arguments.length?(S=typeof B=="function"?B:a(+B),U(),G):S},G.distanceMin=function(B){return arguments.length?(D=B*B,G):Math.sqrt(D)},G.distanceMax=function(B){return arguments.length?(F=B*B,G):Math.sqrt(F)},G.theta=function(B){return arguments.length?(N=B*B,G):Math.sqrt(N)},G}function A(L,z,E){var S,C=a(.1),D,F;typeof L!="function"&&(L=a(+L)),z==null&&(z=0),E==null&&(E=0);function N(U){for(var X=0,I=S.length;X<I;++X){var B=S[X],j=B.x-z||1e-6,H=B.y-E||1e-6,K=Math.sqrt(j*j+H*H),te=(F[X]-K)*D[X]*U/K;B.vx+=j*te,B.vy+=H*te}}function G(){if(S){var U,X=S.length;for(D=new Array(X),F=new Array(X),U=0;U<X;++U)F[U]=+L(S[U],U,S),D[U]=isNaN(F[U])?0:+C(S[U],U,S)}}return N.initialize=function(U){S=U,G()},N.strength=function(U){return arguments.length?(C=typeof U=="function"?U:a(+U),G(),N):C},N.radius=function(U){return arguments.length?(L=typeof U=="function"?U:a(+U),G(),N):L},N.x=function(U){return arguments.length?(z=+U,N):z},N.y=function(U){return arguments.length?(E=+U,N):E},N}function k(L){var z=a(.1),E,S,C;typeof L!="function"&&(L=a(L==null?0:+L));function D(N){for(var G=0,U=E.length,X;G<U;++G)X=E[G],X.vx+=(C[G]-X.x)*S[G]*N}function F(){if(E){var N,G=E.length;for(S=new Array(G),C=new Array(G),N=0;N<G;++N)S[N]=isNaN(C[N]=+L(E[N],N,E))?0:+z(E[N],N,E)}}return D.initialize=function(N){E=N,F()},D.strength=function(N){return arguments.length?(z=typeof N=="function"?N:a(+N),F(),D):z},D.x=function(N){return arguments.length?(L=typeof N=="function"?N:a(+N),F(),D):L},D}function R(L){var z=a(.1),E,S,C;typeof L!="function"&&(L=a(L==null?0:+L));function D(N){for(var G=0,U=E.length,X;G<U;++G)X=E[G],X.vy+=(C[G]-X.y)*S[G]*N}function F(){if(E){var N,G=E.length;for(S=new Array(G),C=new Array(G),N=0;N<G;++N)S[N]=isNaN(C[N]=+L(E[N],N,E))?0:+z(E[N],N,E)}}return D.initialize=function(N){E=N,F()},D.strength=function(N){return arguments.length?(z=typeof N=="function"?N:a(+N),F(),D):z},D.y=function(N){return arguments.length?(L=typeof N=="function"?N:a(+N),F(),D):L},D}r.forceCenter=f,r.forceCollide=i,r.forceLink=d,r.forceManyBody=g,r.forceRadial=A,r.forceSimulation=T,r.forceX=k,r.forceY=R,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-collection":157,"d3-dispatch":159,"d3-quadtree":164,"d3-timer":168}],161:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?n(M):(r=r||self,n(r.d3=r.d3||{}))})(this,function(r){function n(Te,Le){return Te.parent===Le.parent?1:2}function l(Te){return Te.reduce(c,0)/Te.length}function c(Te,Le){return Te+Le.x}function t(Te){return 1+Te.reduce(f,0)}function f(Te,Le){return Math.max(Te,Le.y)}function a(Te){for(var Le;Le=Te.children;)Te=Le[0];return Te}function o(Te){for(var Le;Le=Te.children;)Te=Le[Le.length-1];return Te}function u(){var Te=n,Le=1,Be=1,et=!1;function Me(Ie){var He,Xe=0;Ie.eachAfter(function(Je){var st=Je.children;st?(Je.x=l(st),Je.y=t(st)):(Je.x=He?Xe+=Te(Je,He):0,Je.y=0,He=Je)});var ht=a(Ie),it=o(Ie),Ge=ht.x-Te(ht,it)/2,ot=it.x+Te(it,ht)/2;return Ie.eachAfter(et?function(Je){Je.x=(Je.x-Ie.x)*Le,Je.y=(Ie.y-Je.y)*Be}:function(Je){Je.x=(Je.x-Ge)/(ot-Ge)*Le,Je.y=(1-(Ie.y?Je.y/Ie.y:1))*Be})}return Me.separation=function(Ie){return arguments.length?(Te=Ie,Me):Te},Me.size=function(Ie){return arguments.length?(et=!1,Le=+Ie[0],Be=+Ie[1],Me):et?null:[Le,Be]},Me.nodeSize=function(Ie){return arguments.length?(et=!0,Le=+Ie[0],Be=+Ie[1],Me):et?[Le,Be]:null},Me}function h(Te){var Le=0,Be=Te.children,et=Be&&Be.length;if(!et)Le=1;else for(;--et>=0;)Le+=Be[et].value;Te.value=Le}function i(){return this.eachAfter(h)}function s(Te){var Le=this,Be,et=[Le],Me,Ie,He;do for(Be=et.reverse(),et=[];Le=Be.pop();)if(Te(Le),Me=Le.children,Me)for(Ie=0,He=Me.length;Ie<He;++Ie)et.push(Me[Ie]);while(et.length);return this}function p(Te){for(var Le=this,Be=[Le],et,Me;Le=Be.pop();)if(Te(Le),et=Le.children,et)for(Me=et.length-1;Me>=0;--Me)Be.push(et[Me]);return this}function d(Te){for(var Le=this,Be=[Le],et=[],Me,Ie,He;Le=Be.pop();)if(et.push(Le),Me=Le.children,Me)for(Ie=0,He=Me.length;Ie<He;++Ie)Be.push(Me[Ie]);for(;Le=et.pop();)Te(Le);return this}function y(Te){return this.eachAfter(function(Le){for(var Be=+Te(Le.data)||0,et=Le.children,Me=et&&et.length;--Me>=0;)Be+=et[Me].value;Le.value=Be})}function b(Te){return this.eachBefore(function(Le){Le.children&&Le.children.sort(Te)})}function m(Te){for(var Le=this,Be=_(Le,Te),et=[Le];Le!==Be;)Le=Le.parent,et.push(Le);for(var Me=et.length;Te!==Be;)et.splice(Me,0,Te),Te=Te.parent;return et}function _(Te,Le){if(Te===Le)return Te;var Be=Te.ancestors(),et=Le.ancestors(),Me=null;for(Te=Be.pop(),Le=et.pop();Te===Le;)Me=Te,Te=Be.pop(),Le=et.pop();return Me}function T(){for(var Te=this,Le=[Te];Te=Te.parent;)Le.push(Te);return Le}function g(){var Te=[];return this.each(function(Le){Te.push(Le)}),Te}function A(){var Te=[];return this.eachBefore(function(Le){Le.children||Te.push(Le)}),Te}function k(){var Te=this,Le=[];return Te.each(function(Be){Be!==Te&&Le.push({source:Be.parent,target:Be})}),Le}function R(Te,Le){var Be=new C(Te),et=+Te.value&&(Be.value=Te.value),Me,Ie=[Be],He,Xe,ht,it;for(Le==null&&(Le=z);Me=Ie.pop();)if(et&&(Me.value=+Me.data.value),(Xe=Le(Me.data))&&(it=Xe.length))for(Me.children=new Array(it),ht=it-1;ht>=0;--ht)Ie.push(He=Me.children[ht]=new C(Xe[ht])),He.parent=Me,He.depth=Me.depth+1;return Be.eachBefore(S)}function L(){return R(this).eachBefore(E)}function z(Te){return Te.children}function E(Te){Te.data=Te.data.data}function S(Te){var Le=0;do Te.height=Le;while((Te=Te.parent)&&Te.height<++Le)}function C(Te){this.data=Te,this.depth=this.height=0,this.parent=null}C.prototype=R.prototype={constructor:C,count:i,each:s,eachAfter:d,eachBefore:p,sum:y,sort:b,path:m,ancestors:T,descendants:g,leaves:A,links:k,copy:L};var D=Array.prototype.slice;function F(Te){for(var Le=Te.length,Be,et;Le;)et=Math.random()*Le--|0,Be=Te[Le],Te[Le]=Te[et],Te[et]=Be;return Te}function N(Te){for(var Le=0,Be=(Te=F(D.call(Te))).length,et=[],Me,Ie;Le<Be;)Me=Te[Le],Ie&&X(Ie,Me)?++Le:(Ie=B(et=G(et,Me)),Le=0);return Ie}function G(Te,Le){var Be,et;if(I(Le,Te))return[Le];for(Be=0;Be<Te.length;++Be)if(U(Le,Te[Be])&&I(H(Te[Be],Le),Te))return[Te[Be],Le];for(Be=0;Be<Te.length-1;++Be)for(et=Be+1;et<Te.length;++et)if(U(H(Te[Be],Te[et]),Le)&&U(H(Te[Be],Le),Te[et])&&U(H(Te[et],Le),Te[Be])&&I(K(Te[Be],Te[et],Le),Te))return[Te[Be],Te[et],Le];throw new Error}function U(Te,Le){var Be=Te.r-Le.r,et=Le.x-Te.x,Me=Le.y-Te.y;return Be<0||Be*Be<et*et+Me*Me}function X(Te,Le){var Be=Te.r-Le.r+1e-6,et=Le.x-Te.x,Me=Le.y-Te.y;return Be>0&&Be*Be>et*et+Me*Me}function I(Te,Le){for(var Be=0;Be<Le.length;++Be)if(!X(Te,Le[Be]))return!1;return!0}function B(Te){switch(Te.length){case 1:return j(Te[0]);case 2:return H(Te[0],Te[1]);case 3:return K(Te[0],Te[1],Te[2])}}function j(Te){return{x:Te.x,y:Te.y,r:Te.r}}function H(Te,Le){var Be=Te.x,et=Te.y,Me=Te.r,Ie=Le.x,He=Le.y,Xe=Le.r,ht=Ie-Be,it=He-et,Ge=Xe-Me,ot=Math.sqrt(ht*ht+it*it);return{x:(Be+Ie+ht/ot*Ge)/2,y:(et+He+it/ot*Ge)/2,r:(ot+Me+Xe)/2}}function K(Te,Le,Be){var et=Te.x,Me=Te.y,Ie=Te.r,He=Le.x,Xe=Le.y,ht=Le.r,it=Be.x,Ge=Be.y,ot=Be.r,Je=et-He,st=et-it,It=Me-Xe,Ft=Me-Ge,nr=ht-Ie,We=ot-Ie,Fe=et*et+Me*Me-Ie*Ie,_t=Fe-He*He-Xe*Xe+ht*ht,Mt=Fe-it*it-Ge*Ge+ot*ot,wt=st*It-Je*Ft,Dt=(It*Mt-Ft*_t)/(wt*2)-et,Rt=(Ft*nr-It*We)/wt,Bt=(st*_t-Je*Mt)/(wt*2)-Me,Nt=(Je*We-st*nr)/wt,er=Rt*Rt+Nt*Nt-1,qt=2*(Ie+Dt*Rt+Bt*Nt),Zt=Dt*Dt+Bt*Bt-Ie*Ie,_r=-(er?(qt+Math.sqrt(qt*qt-4*er*Zt))/(2*er):Zt/qt);return{x:et+Dt+Rt*_r,y:Me+Bt+Nt*_r,r:_r}}function te(Te,Le,Be){var et=Te.x-Le.x,Me,Ie,He=Te.y-Le.y,Xe,ht,it=et*et+He*He;it?(Ie=Le.r+Be.r,Ie*=Ie,ht=Te.r+Be.r,ht*=ht,Ie>ht?(Me=(it+ht-Ie)/(2*it),Xe=Math.sqrt(Math.max(0,ht/it-Me*Me)),Be.x=Te.x-Me*et-Xe*He,Be.y=Te.y-Me*He+Xe*et):(Me=(it+Ie-ht)/(2*it),Xe=Math.sqrt(Math.max(0,Ie/it-Me*Me)),Be.x=Le.x+Me*et-Xe*He,Be.y=Le.y+Me*He+Xe*et)):(Be.x=Le.x+Be.r,Be.y=Le.y)}function J(Te,Le){var Be=Te.r+Le.r-1e-6,et=Le.x-Te.x,Me=Le.y-Te.y;return Be>0&&Be*Be>et*et+Me*Me}function oe(Te){var Le=Te._,Be=Te.next._,et=Le.r+Be.r,Me=(Le.x*Be.r+Be.x*Le.r)/et,Ie=(Le.y*Be.r+Be.y*Le.r)/et;return Me*Me+Ie*Ie}function ie(Te){this._=Te,this.next=null,this.previous=null}function Q(Te){if(!(Me=Te.length))return 0;var Le,Be,et,Me,Ie,He,Xe,ht,it,Ge,ot;if(Le=Te[0],Le.x=0,Le.y=0,!(Me>1))return Le.r;if(Be=Te[1],Le.x=-Be.r,Be.x=Le.r,Be.y=0,!(Me>2))return Le.r+Be.r;te(Be,Le,et=Te[2]),Le=new ie(Le),Be=new ie(Be),et=new ie(et),Le.next=et.previous=Be,Be.next=Le.previous=et,et.next=Be.previous=Le;e:for(Xe=3;Xe<Me;++Xe){te(Le._,Be._,et=Te[Xe]),et=new ie(et),ht=Be.next,it=Le.previous,Ge=Be._.r,ot=Le._.r;do if(Ge<=ot){if(J(ht._,et._)){Be=ht,Le.next=Be,Be.previous=Le,--Xe;continue e}Ge+=ht._.r,ht=ht.next}else{if(J(it._,et._)){Le=it,Le.next=Be,Be.previous=Le,--Xe;continue e}ot+=it._.r,it=it.previous}while(ht!==it.next);for(et.previous=Le,et.next=Be,Le.next=Be.previous=Be=et,Ie=oe(Le);(et=et.next)!==Be;)(He=oe(et))<Ie&&(Le=et,Ie=He);Be=Le.next}for(Le=[Be._],et=Be;(et=et.next)!==Be;)Le.push(et._);for(et=N(Le),Xe=0;Xe<Me;++Xe)Le=Te[Xe],Le.x-=et.x,Le.y-=et.y;return et.r}function V(Te){return Q(Te),Te}function se(Te){return Te==null?null:re(Te)}function re(Te){if(typeof Te!="function")throw new Error;return Te}function ee(){return 0}function ae(Te){return function(){return Te}}function fe(Te){return Math.sqrt(Te.value)}function de(){var Te=null,Le=1,Be=1,et=ee;function Me(Ie){return Ie.x=Le/2,Ie.y=Be/2,Te?Ie.eachBefore(pe(Te)).eachAfter(W(et,.5)).eachBefore(ue(1)):Ie.eachBefore(pe(fe)).eachAfter(W(ee,1)).eachAfter(W(et,Ie.r/Math.min(Le,Be))).eachBefore(ue(Math.min(Le,Be)/(2*Ie.r))),Ie}return Me.radius=function(Ie){return arguments.length?(Te=se(Ie),Me):Te},Me.size=function(Ie){return arguments.length?(Le=+Ie[0],Be=+Ie[1],Me):[Le,Be]},Me.padding=function(Ie){return arguments.length?(et=typeof Ie=="function"?Ie:ae(+Ie),Me):et},Me}function pe(Te){return function(Le){Le.children||(Le.r=Math.max(0,+Te(Le)||0))}}function W(Te,Le){return function(Be){if(et=Be.children){var et,Me,Ie=et.length,He=Te(Be)*Le||0,Xe;if(He)for(Me=0;Me<Ie;++Me)et[Me].r+=He;if(Xe=Q(et),He)for(Me=0;Me<Ie;++Me)et[Me].r-=He;Be.r=Xe+He}}}function ue(Te){return function(Le){var Be=Le.parent;Le.r*=Te,Be&&(Le.x=Be.x+Te*Le.x,Le.y=Be.y+Te*Le.y)}}function me(Te){Te.x0=Math.round(Te.x0),Te.y0=Math.round(Te.y0),Te.x1=Math.round(Te.x1),Te.y1=Math.round(Te.y1)}function be(Te,Le,Be,et,Me){for(var Ie=Te.children,He,Xe=-1,ht=Ie.length,it=Te.value&&(et-Le)/Te.value;++Xe<ht;)He=Ie[Xe],He.y0=Be,He.y1=Me,He.x0=Le,He.x1=Le+=He.value*it}function ke(){var Te=1,Le=1,Be=0,et=!1;function Me(He){var Xe=He.height+1;return He.x0=He.y0=Be,He.x1=Te,He.y1=Le/Xe,He.eachBefore(Ie(Le,Xe)),et&&He.eachBefore(me),He}function Ie(He,Xe){return function(ht){ht.children&&be(ht,ht.x0,He*(ht.depth+1)/Xe,ht.x1,He*(ht.depth+2)/Xe);var it=ht.x0,Ge=ht.y0,ot=ht.x1-Be,Je=ht.y1-Be;ot<it&&(it=ot=(it+ot)/2),Je<Ge&&(Ge=Je=(Ge+Je)/2),ht.x0=it,ht.y0=Ge,ht.x1=ot,ht.y1=Je}}return Me.round=function(He){return arguments.length?(et=!!He,Me):et},Me.size=function(He){return arguments.length?(Te=+He[0],Le=+He[1],Me):[Te,Le]},Me.padding=function(He){return arguments.length?(Be=+He,Me):Be},Me}var Pe="$",je={depth:-1},ze={};function Ze(Te){return Te.id}function tt(Te){return Te.parentId}function Ce(){var Te=Ze,Le=tt;function Be(et){var Me,Ie,He=et.length,Xe,ht,it,Ge=new Array(He),ot,Je,st={};for(Ie=0;Ie<He;++Ie)Me=et[Ie],it=Ge[Ie]=new C(Me),(ot=Te(Me,Ie,et))!=null&&(ot+="")&&(Je=Pe+(it.id=ot),st[Je]=Je in st?ze:it);for(Ie=0;Ie<He;++Ie)if(it=Ge[Ie],ot=Le(et[Ie],Ie,et),ot==null||!(ot+="")){if(Xe)throw new Error("multiple roots");Xe=it}else{if(ht=st[Pe+ot],!ht)throw new Error("missing: "+ot);if(ht===ze)throw new Error("ambiguous: "+ot);ht.children?ht.children.push(it):ht.children=[it],it.parent=ht}if(!Xe)throw new Error("no root");if(Xe.parent=je,Xe.eachBefore(function(It){It.depth=It.parent.depth+1,--He}).eachBefore(S),Xe.parent=null,He>0)throw new Error("cycle");return Xe}return Be.id=function(et){return arguments.length?(Te=re(et),Be):Te},Be.parentId=function(et){return arguments.length?(Le=re(et),Be):Le},Be}function Ae(Te,Le){return Te.parent===Le.parent?1:2}function Ne(Te){var Le=Te.children;return Le?Le[0]:Te.t}function qe(Te){var Le=Te.children;return Le?Le[Le.length-1]:Te.t}function At(Te,Le,Be){var et=Be/(Le.i-Te.i);Le.c-=et,Le.s+=Be,Te.c+=et,Le.z+=Be,Le.m+=Be}function kt(Te){for(var Le=0,Be=0,et=Te.children,Me=et.length,Ie;--Me>=0;)Ie=et[Me],Ie.z+=Le,Ie.m+=Le,Le+=Ie.s+(Be+=Ie.c)}function Ve(Te,Le,Be){return Te.a.parent===Le.parent?Te.a:Be}function ft(Te,Le){this._=Te,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Le}ft.prototype=Object.create(C.prototype);function St(Te){for(var Le=new ft(Te,0),Be,et=[Le],Me,Ie,He,Xe;Be=et.pop();)if(Ie=Be._.children)for(Be.children=new Array(Xe=Ie.length),He=Xe-1;He>=0;--He)et.push(Me=Be.children[He]=new ft(Ie[He],He)),Me.parent=Be;return(Le.parent=new ft(null,0)).children=[Le],Le}function Wt(){var Te=Ae,Le=1,Be=1,et=null;function Me(it){var Ge=St(it);if(Ge.eachAfter(Ie),Ge.parent.m=-Ge.z,Ge.eachBefore(He),et)it.eachBefore(ht);else{var ot=it,Je=it,st=it;it.eachBefore(function(Fe){Fe.x<ot.x&&(ot=Fe),Fe.x>Je.x&&(Je=Fe),Fe.depth>st.depth&&(st=Fe)});var It=ot===Je?1:Te(ot,Je)/2,Ft=It-ot.x,nr=Le/(Je.x+It+Ft),We=Be/(st.depth||1);it.eachBefore(function(Fe){Fe.x=(Fe.x+Ft)*nr,Fe.y=Fe.depth*We})}return it}function Ie(it){var Ge=it.children,ot=it.parent.children,Je=it.i?ot[it.i-1]:null;if(Ge){kt(it);var st=(Ge[0].z+Ge[Ge.length-1].z)/2;Je?(it.z=Je.z+Te(it._,Je._),it.m=it.z-st):it.z=st}else Je&&(it.z=Je.z+Te(it._,Je._));it.parent.A=Xe(it,Je,it.parent.A||ot[0])}function He(it){it._.x=it.z+it.parent.m,it.m+=it.parent.m}function Xe(it,Ge,ot){if(Ge){for(var Je=it,st=it,It=Ge,Ft=Je.parent.children[0],nr=Je.m,We=st.m,Fe=It.m,_t=Ft.m,Mt;It=qe(It),Je=Ne(Je),It&&Je;)Ft=Ne(Ft),st=qe(st),st.a=it,Mt=It.z+Fe-Je.z-nr+Te(It._,Je._),Mt>0&&(At(Ve(It,it,ot),it,Mt),nr+=Mt,We+=Mt),Fe+=It.m,nr+=Je.m,_t+=Ft.m,We+=st.m;It&&!qe(st)&&(st.t=It,st.m+=Fe-We),Je&&!Ne(Ft)&&(Ft.t=Je,Ft.m+=nr-_t,ot=it)}return ot}function ht(it){it.x*=Le,it.y=it.depth*Be}return Me.separation=function(it){return arguments.length?(Te=it,Me):Te},Me.size=function(it){return arguments.length?(et=!1,Le=+it[0],Be=+it[1],Me):et?null:[Le,Be]},Me.nodeSize=function(it){return arguments.length?(et=!0,Le=+it[0],Be=+it[1],Me):et?[Le,Be]:null},Me}function Qt(Te,Le,Be,et,Me){for(var Ie=Te.children,He,Xe=-1,ht=Ie.length,it=Te.value&&(Me-Be)/Te.value;++Xe<ht;)He=Ie[Xe],He.x0=Le,He.x1=et,He.y0=Be,He.y1=Be+=He.value*it}var zt=(1+Math.sqrt(5))/2;function $t(Te,Le,Be,et,Me,Ie){for(var He=[],Xe=Le.children,ht,it,Ge=0,ot=0,Je=Xe.length,st,It,Ft=Le.value,nr,We,Fe,_t,Mt,wt,Dt;Ge<Je;){st=Me-Be,It=Ie-et;do nr=Xe[ot++].value;while(!nr&&ot<Je);for(We=Fe=nr,wt=Math.max(It/st,st/It)/(Ft*Te),Dt=nr*nr*wt,Mt=Math.max(Fe/Dt,Dt/We);ot<Je;++ot){if(nr+=it=Xe[ot].value,it<We&&(We=it),it>Fe&&(Fe=it),Dt=nr*nr*wt,_t=Math.max(Fe/Dt,Dt/We),_t>Mt){nr-=it;break}Mt=_t}He.push(ht={value:nr,dice:st<It,children:Xe.slice(Ge,ot)}),ht.dice?be(ht,Be,et,Me,Ft?et+=It*nr/Ft:Ie):Qt(ht,Be,et,Ft?Be+=st*nr/Ft:Me,Ie),Ft-=nr,Ge=ot}return He}var rr=function Te(Le){function Be(et,Me,Ie,He,Xe){$t(Le,et,Me,Ie,He,Xe)}return Be.ratio=function(et){return Te((et=+et)>1?et:1)},Be}(zt);function Pt(){var Te=rr,Le=!1,Be=1,et=1,Me=[0],Ie=ee,He=ee,Xe=ee,ht=ee,it=ee;function Ge(Je){return Je.x0=Je.y0=0,Je.x1=Be,Je.y1=et,Je.eachBefore(ot),Me=[0],Le&&Je.eachBefore(me),Je}function ot(Je){var st=Me[Je.depth],It=Je.x0+st,Ft=Je.y0+st,nr=Je.x1-st,We=Je.y1-st;nr<It&&(It=nr=(It+nr)/2),We<Ft&&(Ft=We=(Ft+We)/2),Je.x0=It,Je.y0=Ft,Je.x1=nr,Je.y1=We,Je.children&&(st=Me[Je.depth+1]=Ie(Je)/2,It+=it(Je)-st,Ft+=He(Je)-st,nr-=Xe(Je)-st,We-=ht(Je)-st,nr<It&&(It=nr=(It+nr)/2),We<Ft&&(Ft=We=(Ft+We)/2),Te(Je,It,Ft,nr,We))}return Ge.round=function(Je){return arguments.length?(Le=!!Je,Ge):Le},Ge.size=function(Je){return arguments.length?(Be=+Je[0],et=+Je[1],Ge):[Be,et]},Ge.tile=function(Je){return arguments.length?(Te=re(Je),Ge):Te},Ge.padding=function(Je){return arguments.length?Ge.paddingInner(Je).paddingOuter(Je):Ge.paddingInner()},Ge.paddingInner=function(Je){return arguments.length?(Ie=typeof Je=="function"?Je:ae(+Je),Ge):Ie},Ge.paddingOuter=function(Je){return arguments.length?Ge.paddingTop(Je).paddingRight(Je).paddingBottom(Je).paddingLeft(Je):Ge.paddingTop()},Ge.paddingTop=function(Je){return arguments.length?(He=typeof Je=="function"?Je:ae(+Je),Ge):He},Ge.paddingRight=function(Je){return arguments.length?(Xe=typeof Je=="function"?Je:ae(+Je),Ge):Xe},Ge.paddingBottom=function(Je){return arguments.length?(ht=typeof Je=="function"?Je:ae(+Je),Ge):ht},Ge.paddingLeft=function(Je){return arguments.length?(it=typeof Je=="function"?Je:ae(+Je),Ge):it},Ge}function Lt(Te,Le,Be,et,Me){var Ie=Te.children,He,Xe=Ie.length,ht,it=new Array(Xe+1);for(it[0]=ht=He=0;He<Xe;++He)it[He+1]=ht+=Ie[He].value;Ge(0,Xe,Te.value,Le,Be,et,Me);function Ge(ot,Je,st,It,Ft,nr,We){if(ot>=Je-1){var Fe=Ie[ot];Fe.x0=It,Fe.y0=Ft,Fe.x1=nr,Fe.y1=We;return}for(var _t=it[ot],Mt=st/2+_t,wt=ot+1,Dt=Je-1;wt<Dt;){var Rt=wt+Dt>>>1;it[Rt]<Mt?wt=Rt+1:Dt=Rt}Mt-it[wt-1]<it[wt]-Mt&&ot+1<wt&&--wt;var Bt=it[wt]-_t,Nt=st-Bt;if(nr-It>We-Ft){var er=(It*Nt+nr*Bt)/st;Ge(ot,wt,Bt,It,Ft,er,We),Ge(wt,Je,Nt,er,Ft,nr,We)}else{var qt=(Ft*Nt+We*Bt)/st;Ge(ot,wt,Bt,It,Ft,nr,qt),Ge(wt,Je,Nt,It,qt,nr,We)}}}function dt(Te,Le,Be,et,Me){(Te.depth&1?Qt:be)(Te,Le,Be,et,Me)}var lt=function Te(Le){function Be(et,Me,Ie,He,Xe){if((ht=et._squarify)&&ht.ratio===Le)for(var ht,it,Ge,ot,Je=-1,st,It=ht.length,Ft=et.value;++Je<It;){for(it=ht[Je],Ge=it.children,ot=it.value=0,st=Ge.length;ot<st;++ot)it.value+=Ge[ot].value;it.dice?be(it,Me,Ie,He,Ie+=(Xe-Ie)*it.value/Ft):Qt(it,Me,Ie,Me+=(He-Me)*it.value/Ft,Xe),Ft-=it.value}else et._squarify=ht=$t(Le,et,Me,Ie,He,Xe),ht.ratio=Le}return Be.ratio=function(et){return Te((et=+et)>1?et:1)},Be}(zt);r.cluster=u,r.hierarchy=R,r.pack=de,r.packEnclose=N,r.packSiblings=V,r.partition=ke,r.stratify=Ce,r.tree=Wt,r.treemap=Pt,r.treemapBinary=Lt,r.treemapDice=be,r.treemapResquarify=lt,r.treemapSlice=Qt,r.treemapSliceDice=dt,r.treemapSquarify=rr,Object.defineProperty(r,"__esModule",{value:!0})})},{}],162:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?n(M,e("d3-color")):(r=r||self,n(r.d3=r.d3||{},r.d3))})(this,function(r,n){function l(Ae,Ne,qe,At,kt){var Ve=Ae*Ae,ft=Ve*Ae;return((1-3*Ae+3*Ve-ft)*Ne+(4-6*Ve+3*ft)*qe+(1+3*Ae+3*Ve-3*ft)*At+ft*kt)/6}function c(Ae){var Ne=Ae.length-1;return function(qe){var At=qe<=0?qe=0:qe>=1?(qe=1,Ne-1):Math.floor(qe*Ne),kt=Ae[At],Ve=Ae[At+1],ft=At>0?Ae[At-1]:2*kt-Ve,St=At<Ne-1?Ae[At+2]:2*Ve-kt;return l((qe-At/Ne)*Ne,ft,kt,Ve,St)}}function t(Ae){var Ne=Ae.length;return function(qe){var At=Math.floor(((qe%=1)<0?++qe:qe)*Ne),kt=Ae[(At+Ne-1)%Ne],Ve=Ae[At%Ne],ft=Ae[(At+1)%Ne],St=Ae[(At+2)%Ne];return l((qe-At/Ne)*Ne,kt,Ve,ft,St)}}function f(Ae){return function(){return Ae}}function a(Ae,Ne){return function(qe){return Ae+qe*Ne}}function o(Ae,Ne,qe){return Ae=Math.pow(Ae,qe),Ne=Math.pow(Ne,qe)-Ae,qe=1/qe,function(At){return Math.pow(Ae+At*Ne,qe)}}function u(Ae,Ne){var qe=Ne-Ae;return qe?a(Ae,qe>180||qe<-180?qe-360*Math.round(qe/360):qe):f(isNaN(Ae)?Ne:Ae)}function h(Ae){return(Ae=+Ae)==1?i:function(Ne,qe){return qe-Ne?o(Ne,qe,Ae):f(isNaN(Ne)?qe:Ne)}}function i(Ae,Ne){var qe=Ne-Ae;return qe?a(Ae,qe):f(isNaN(Ae)?Ne:Ae)}var s=function Ae(Ne){var qe=h(Ne);function At(kt,Ve){var ft=qe((kt=n.rgb(kt)).r,(Ve=n.rgb(Ve)).r),St=qe(kt.g,Ve.g),Wt=qe(kt.b,Ve.b),Qt=i(kt.opacity,Ve.opacity);return function(zt){return kt.r=ft(zt),kt.g=St(zt),kt.b=Wt(zt),kt.opacity=Qt(zt),kt+""}}return At.gamma=Ae,At}(1);function p(Ae){return function(Ne){var qe=Ne.length,At=new Array(qe),kt=new Array(qe),Ve=new Array(qe),ft,St;for(ft=0;ft<qe;++ft)St=n.rgb(Ne[ft]),At[ft]=St.r||0,kt[ft]=St.g||0,Ve[ft]=St.b||0;return At=Ae(At),kt=Ae(kt),Ve=Ae(Ve),St.opacity=1,function(Wt){return St.r=At(Wt),St.g=kt(Wt),St.b=Ve(Wt),St+""}}}var d=p(c),y=p(t);function b(Ae,Ne){Ne||(Ne=[]);var qe=Ae?Math.min(Ne.length,Ae.length):0,At=Ne.slice(),kt;return function(Ve){for(kt=0;kt<qe;++kt)At[kt]=Ae[kt]*(1-Ve)+Ne[kt]*Ve;return At}}function m(Ae){return ArrayBuffer.isView(Ae)&&!(Ae instanceof DataView)}function _(Ae,Ne){return(m(Ne)?b:T)(Ae,Ne)}function T(Ae,Ne){var qe=Ne?Ne.length:0,At=Ae?Math.min(qe,Ae.length):0,kt=new Array(At),Ve=new Array(qe),ft;for(ft=0;ft<At;++ft)kt[ft]=C(Ae[ft],Ne[ft]);for(;ft<qe;++ft)Ve[ft]=Ne[ft];return function(St){for(ft=0;ft<At;++ft)Ve[ft]=kt[ft](St);return Ve}}function g(Ae,Ne){var qe=new Date;return Ae=+Ae,Ne=+Ne,function(At){return qe.setTime(Ae*(1-At)+Ne*At),qe}}function A(Ae,Ne){return Ae=+Ae,Ne=+Ne,function(qe){return Ae*(1-qe)+Ne*qe}}function k(Ae,Ne){var qe={},At={},kt;(Ae===null||typeof Ae!="object")&&(Ae={}),(Ne===null||typeof Ne!="object")&&(Ne={});for(kt in Ne)kt in Ae?qe[kt]=C(Ae[kt],Ne[kt]):At[kt]=Ne[kt];return function(Ve){for(kt in qe)At[kt]=qe[kt](Ve);return At}}var R=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,L=new RegExp(R.source,"g");function z(Ae){return function(){return Ae}}function E(Ae){return function(Ne){return Ae(Ne)+""}}function S(Ae,Ne){var qe=R.lastIndex=L.lastIndex=0,At,kt,Ve,ft=-1,St=[],Wt=[];for(Ae=Ae+"",Ne=Ne+"";(At=R.exec(Ae))&&(kt=L.exec(Ne));)(Ve=kt.index)>qe&&(Ve=Ne.slice(qe,Ve),St[ft]?St[ft]+=Ve:St[++ft]=Ve),(At=At[0])===(kt=kt[0])?St[ft]?St[ft]+=kt:St[++ft]=kt:(St[++ft]=null,Wt.push({i:ft,x:A(At,kt)})),qe=L.lastIndex;return qe<Ne.length&&(Ve=Ne.slice(qe),St[ft]?St[ft]+=Ve:St[++ft]=Ve),St.length<2?Wt[0]?E(Wt[0].x):z(Ne):(Ne=Wt.length,function(Qt){for(var zt=0,$t;zt<Ne;++zt)St[($t=Wt[zt]).i]=$t.x(Qt);return St.join("")})}function C(Ae,Ne){var qe=typeof Ne,At;return Ne==null||qe==="boolean"?f(Ne):(qe==="number"?A:qe==="string"?(At=n.color(Ne))?(Ne=At,s):S:Ne instanceof n.color?s:Ne instanceof Date?g:m(Ne)?b:Array.isArray(Ne)?T:typeof Ne.valueOf!="function"&&typeof Ne.toString!="function"||isNaN(Ne)?k:A)(Ae,Ne)}function D(Ae){var Ne=Ae.length;return function(qe){return Ae[Math.max(0,Math.min(Ne-1,Math.floor(qe*Ne)))]}}function F(Ae,Ne){var qe=u(+Ae,+Ne);return function(At){var kt=qe(At);return kt-360*Math.floor(kt/360)}}function N(Ae,Ne){return Ae=+Ae,Ne=+Ne,function(qe){return Math.round(Ae*(1-qe)+Ne*qe)}}var G=180/Math.PI,U={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function X(Ae,Ne,qe,At,kt,Ve){var ft,St,Wt;return(ft=Math.sqrt(Ae*Ae+Ne*Ne))&&(Ae/=ft,Ne/=ft),(Wt=Ae*qe+Ne*At)&&(qe-=Ae*Wt,At-=Ne*Wt),(St=Math.sqrt(qe*qe+At*At))&&(qe/=St,At/=St,Wt/=St),Ae*At<Ne*qe&&(Ae=-Ae,Ne=-Ne,Wt=-Wt,ft=-ft),{translateX:kt,translateY:Ve,rotate:Math.atan2(Ne,Ae)*G,skewX:Math.atan(Wt)*G,scaleX:ft,scaleY:St}}var I,B,j,H;function K(Ae){return Ae==="none"?U:(I||(I=document.createElement("DIV"),B=document.documentElement,j=document.defaultView),I.style.transform=Ae,Ae=j.getComputedStyle(B.appendChild(I),null).getPropertyValue("transform"),B.removeChild(I),Ae=Ae.slice(7,-1).split(","),X(+Ae[0],+Ae[1],+Ae[2],+Ae[3],+Ae[4],+Ae[5]))}function te(Ae){return Ae==null||(H||(H=document.createElementNS("http://www.w3.org/2000/svg","g")),H.setAttribute("transform",Ae),!(Ae=H.transform.baseVal.consolidate()))?U:(Ae=Ae.matrix,X(Ae.a,Ae.b,Ae.c,Ae.d,Ae.e,Ae.f))}function J(Ae,Ne,qe,At){function kt(Qt){return Qt.length?Qt.pop()+" ":""}function Ve(Qt,zt,$t,rr,Pt,Lt){if(Qt!==$t||zt!==rr){var dt=Pt.push("translate(",null,Ne,null,qe);Lt.push({i:dt-4,x:A(Qt,$t)},{i:dt-2,x:A(zt,rr)})}else($t||rr)&&Pt.push("translate("+$t+Ne+rr+qe)}function ft(Qt,zt,$t,rr){Qt!==zt?(Qt-zt>180?zt+=360:zt-Qt>180&&(Qt+=360),rr.push({i:$t.push(kt($t)+"rotate(",null,At)-2,x:A(Qt,zt)})):zt&&$t.push(kt($t)+"rotate("+zt+At)}function St(Qt,zt,$t,rr){Qt!==zt?rr.push({i:$t.push(kt($t)+"skewX(",null,At)-2,x:A(Qt,zt)}):zt&&$t.push(kt($t)+"skewX("+zt+At)}function Wt(Qt,zt,$t,rr,Pt,Lt){if(Qt!==$t||zt!==rr){var dt=Pt.push(kt(Pt)+"scale(",null,",",null,")");Lt.push({i:dt-4,x:A(Qt,$t)},{i:dt-2,x:A(zt,rr)})}else($t!==1||rr!==1)&&Pt.push(kt(Pt)+"scale("+$t+","+rr+")")}return function(Qt,zt){var $t=[],rr=[];return Qt=Ae(Qt),zt=Ae(zt),Ve(Qt.translateX,Qt.translateY,zt.translateX,zt.translateY,$t,rr),ft(Qt.rotate,zt.rotate,$t,rr),St(Qt.skewX,zt.skewX,$t,rr),Wt(Qt.scaleX,Qt.scaleY,zt.scaleX,zt.scaleY,$t,rr),Qt=zt=null,function(Pt){for(var Lt=-1,dt=rr.length,lt;++Lt<dt;)$t[(lt=rr[Lt]).i]=lt.x(Pt);return $t.join("")}}}var oe=J(K,"px, ","px)","deg)"),ie=J(te,", ",")",")"),Q=Math.SQRT2,V=2,se=4,re=1e-12;function ee(Ae){return((Ae=Math.exp(Ae))+1/Ae)/2}function ae(Ae){return((Ae=Math.exp(Ae))-1/Ae)/2}function fe(Ae){return((Ae=Math.exp(2*Ae))-1)/(Ae+1)}function de(Ae,Ne){var qe=Ae[0],At=Ae[1],kt=Ae[2],Ve=Ne[0],ft=Ne[1],St=Ne[2],Wt=Ve-qe,Qt=ft-At,zt=Wt*Wt+Qt*Qt,$t,rr;if(zt<re)rr=Math.log(St/kt)/Q,$t=function(Le){return[qe+Le*Wt,At+Le*Qt,kt*Math.exp(Q*Le*rr)]};else{var Pt=Math.sqrt(zt),Lt=(St*St-kt*kt+se*zt)/(2*kt*V*Pt),dt=(St*St-kt*kt-se*zt)/(2*St*V*Pt),lt=Math.log(Math.sqrt(Lt*Lt+1)-Lt),Te=Math.log(Math.sqrt(dt*dt+1)-dt);rr=(Te-lt)/Q,$t=function(Le){var Be=Le*rr,et=ee(lt),Me=kt/(V*Pt)*(et*fe(Q*Be+lt)-ae(lt));return[qe+Me*Wt,At+Me*Qt,kt*et/ee(Q*Be+lt)]}}return $t.duration=rr*1e3,$t}function pe(Ae){return function(Ne,qe){var At=Ae((Ne=n.hsl(Ne)).h,(qe=n.hsl(qe)).h),kt=i(Ne.s,qe.s),Ve=i(Ne.l,qe.l),ft=i(Ne.opacity,qe.opacity);return function(St){return Ne.h=At(St),Ne.s=kt(St),Ne.l=Ve(St),Ne.opacity=ft(St),Ne+""}}}var W=pe(u),ue=pe(i);function me(Ae,Ne){var qe=i((Ae=n.lab(Ae)).l,(Ne=n.lab(Ne)).l),At=i(Ae.a,Ne.a),kt=i(Ae.b,Ne.b),Ve=i(Ae.opacity,Ne.opacity);return function(ft){return Ae.l=qe(ft),Ae.a=At(ft),Ae.b=kt(ft),Ae.opacity=Ve(ft),Ae+""}}function be(Ae){return function(Ne,qe){var At=Ae((Ne=n.hcl(Ne)).h,(qe=n.hcl(qe)).h),kt=i(Ne.c,qe.c),Ve=i(Ne.l,qe.l),ft=i(Ne.opacity,qe.opacity);return function(St){return Ne.h=At(St),Ne.c=kt(St),Ne.l=Ve(St),Ne.opacity=ft(St),Ne+""}}}var ke=be(u),Pe=be(i);function je(Ae){return function Ne(qe){qe=+qe;function At(kt,Ve){var ft=Ae((kt=n.cubehelix(kt)).h,(Ve=n.cubehelix(Ve)).h),St=i(kt.s,Ve.s),Wt=i(kt.l,Ve.l),Qt=i(kt.opacity,Ve.opacity);return function(zt){return kt.h=ft(zt),kt.s=St(zt),kt.l=Wt(Math.pow(zt,qe)),kt.opacity=Qt(zt),kt+""}}return At.gamma=Ne,At}(1)}var ze=je(u),Ze=je(i);function tt(Ae,Ne){for(var qe=0,At=Ne.length-1,kt=Ne[0],Ve=new Array(At<0?0:At);qe<At;)Ve[qe]=Ae(kt,kt=Ne[++qe]);return function(ft){var St=Math.max(0,Math.min(At-1,Math.floor(ft*=At)));return Ve[St](ft-St)}}function Ce(Ae,Ne){for(var qe=new Array(Ne),At=0;At<Ne;++At)qe[At]=Ae(At/(Ne-1));return qe}r.interpolate=C,r.interpolateArray=_,r.interpolateBasis=c,r.interpolateBasisClosed=t,r.interpolateCubehelix=ze,r.interpolateCubehelixLong=Ze,r.interpolateDate=g,r.interpolateDiscrete=D,r.interpolateHcl=ke,r.interpolateHclLong=Pe,r.interpolateHsl=W,r.interpolateHslLong=ue,r.interpolateHue=F,r.interpolateLab=me,r.interpolateNumber=A,r.interpolateNumberArray=b,r.interpolateObject=k,r.interpolateRgb=s,r.interpolateRgbBasis=d,r.interpolateRgbBasisClosed=y,r.interpolateRound=N,r.interpolateString=S,r.interpolateTransformCss=oe,r.interpolateTransformSvg=ie,r.interpolateZoom=de,r.piecewise=tt,r.quantize=Ce,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-color":158}],163:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?n(M):(r=r||self,n(r.d3=r.d3||{}))})(this,function(r){var n=Math.PI,l=2*n,c=1e-6,t=l-c;function f(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function a(){return new f}f.prototype=a.prototype={constructor:f,moveTo:function(o,u){this._+="M"+(this._x0=this._x1=+o)+","+(this._y0=this._y1=+u)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(o,u){this._+="L"+(this._x1=+o)+","+(this._y1=+u)},quadraticCurveTo:function(o,u,h,i){this._+="Q"+ +o+","+ +u+","+(this._x1=+h)+","+(this._y1=+i)},bezierCurveTo:function(o,u,h,i,s,p){this._+="C"+ +o+","+ +u+","+ +h+","+ +i+","+(this._x1=+s)+","+(this._y1=+p)},arcTo:function(o,u,h,i,s){o=+o,u=+u,h=+h,i=+i,s=+s;var p=this._x1,d=this._y1,y=h-o,b=i-u,m=p-o,_=d-u,T=m*m+_*_;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=o)+","+(this._y1=u);else if(T>c)if(!(Math.abs(_*y-b*m)>c)||!s)this._+="L"+(this._x1=o)+","+(this._y1=u);else{var g=h-p,A=i-d,k=y*y+b*b,R=g*g+A*A,L=Math.sqrt(k),z=Math.sqrt(T),E=s*Math.tan((n-Math.acos((k+T-R)/(2*L*z)))/2),S=E/z,C=E/L;Math.abs(S-1)>c&&(this._+="L"+(o+S*m)+","+(u+S*_)),this._+="A"+s+","+s+",0,0,"+ +(_*g>m*A)+","+(this._x1=o+C*y)+","+(this._y1=u+C*b)}},arc:function(o,u,h,i,s,p){o=+o,u=+u,h=+h,p=!!p;var d=h*Math.cos(i),y=h*Math.sin(i),b=o+d,m=u+y,_=1^p,T=p?i-s:s-i;if(h<0)throw new Error("negative radius: "+h);this._x1===null?this._+="M"+b+","+m:(Math.abs(this._x1-b)>c||Math.abs(this._y1-m)>c)&&(this._+="L"+b+","+m),h&&(T<0&&(T=T%l+l),T>t?this._+="A"+h+","+h+",0,1,"+_+","+(o-d)+","+(u-y)+"A"+h+","+h+",0,1,"+_+","+(this._x1=b)+","+(this._y1=m):T>c&&(this._+="A"+h+","+h+",0,"+ +(T>=n)+","+_+","+(this._x1=o+h*Math.cos(s))+","+(this._y1=u+h*Math.sin(s))))},rect:function(o,u,h,i){this._+="M"+(this._x0=this._x1=+o)+","+(this._y0=this._y1=+u)+"h"+ +h+"v"+ +i+"h"+-h+"Z"},toString:function(){return this._}},r.path=a,Object.defineProperty(r,"__esModule",{value:!0})})},{}],164:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?n(M):(r=r||self,n(r.d3=r.d3||{}))})(this,function(r){function n(L){var z=+this._x.call(null,L),E=+this._y.call(null,L);return l(this.cover(z,E),z,E,L)}function l(L,z,E,S){if(isNaN(z)||isNaN(E))return L;var C,D=L._root,F={data:S},N=L._x0,G=L._y0,U=L._x1,X=L._y1,I,B,j,H,K,te,J,oe;if(!D)return L._root=F,L;for(;D.length;)if((K=z>=(I=(N+U)/2))?N=I:U=I,(te=E>=(B=(G+X)/2))?G=B:X=B,C=D,!(D=D[J=te<<1|K]))return C[J]=F,L;if(j=+L._x.call(null,D.data),H=+L._y.call(null,D.data),z===j&&E===H)return F.next=D,C?C[J]=F:L._root=F,L;do C=C?C[J]=new Array(4):L._root=new Array(4),(K=z>=(I=(N+U)/2))?N=I:U=I,(te=E>=(B=(G+X)/2))?G=B:X=B;while((J=te<<1|K)===(oe=(H>=B)<<1|j>=I));return C[oe]=D,C[J]=F,L}function c(L){var z,E,S=L.length,C,D,F=new Array(S),N=new Array(S),G=1/0,U=1/0,X=-1/0,I=-1/0;for(E=0;E<S;++E)isNaN(C=+this._x.call(null,z=L[E]))||isNaN(D=+this._y.call(null,z))||(F[E]=C,N[E]=D,C<G&&(G=C),C>X&&(X=C),D<U&&(U=D),D>I&&(I=D));if(G>X||U>I)return this;for(this.cover(G,U).cover(X,I),E=0;E<S;++E)l(this,F[E],N[E],L[E]);return this}function t(L,z){if(isNaN(L=+L)||isNaN(z=+z))return this;var E=this._x0,S=this._y0,C=this._x1,D=this._y1;if(isNaN(E))C=(E=Math.floor(L))+1,D=(S=Math.floor(z))+1;else{for(var F=C-E,N=this._root,G,U;E>L||L>=C||S>z||z>=D;)switch(U=(z<S)<<1|L<E,G=new Array(4),G[U]=N,N=G,F*=2,U){case 0:C=E+F,D=S+F;break;case 1:E=C-F,D=S+F;break;case 2:C=E+F,S=D-F;break;case 3:E=C-F,S=D-F;break}this._root&&this._root.length&&(this._root=N)}return this._x0=E,this._y0=S,this._x1=C,this._y1=D,this}function f(){var L=[];return this.visit(function(z){if(!z.length)do L.push(z.data);while(z=z.next)}),L}function a(L){return arguments.length?this.cover(+L[0][0],+L[0][1]).cover(+L[1][0],+L[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function o(L,z,E,S,C){this.node=L,this.x0=z,this.y0=E,this.x1=S,this.y1=C}function u(L,z,E){var S,C=this._x0,D=this._y0,F,N,G,U,X=this._x1,I=this._y1,B=[],j=this._root,H,K;for(j&&B.push(new o(j,C,D,X,I)),E==null?E=1/0:(C=L-E,D=z-E,X=L+E,I=z+E,E*=E);H=B.pop();)if(!(!(j=H.node)||(F=H.x0)>X||(N=H.y0)>I||(G=H.x1)<C||(U=H.y1)<D))if(j.length){var te=(F+G)/2,J=(N+U)/2;B.push(new o(j[3],te,J,G,U),new o(j[2],F,J,te,U),new o(j[1],te,N,G,J),new o(j[0],F,N,te,J)),(K=(z>=J)<<1|L>=te)&&(H=B[B.length-1],B[B.length-1]=B[B.length-1-K],B[B.length-1-K]=H)}else{var oe=L-+this._x.call(null,j.data),ie=z-+this._y.call(null,j.data),Q=oe*oe+ie*ie;if(Q<E){var V=Math.sqrt(E=Q);C=L-V,D=z-V,X=L+V,I=z+V,S=j.data}}return S}function h(L){if(isNaN(X=+this._x.call(null,L))||isNaN(I=+this._y.call(null,L)))return this;var z,E=this._root,S,C,D,F=this._x0,N=this._y0,G=this._x1,U=this._y1,X,I,B,j,H,K,te,J;if(!E)return this;if(E.length)for(;;){if((H=X>=(B=(F+G)/2))?F=B:G=B,(K=I>=(j=(N+U)/2))?N=j:U=j,z=E,!(E=E[te=K<<1|H]))return this;if(!E.length)break;(z[te+1&3]||z[te+2&3]||z[te+3&3])&&(S=z,J=te)}for(;E.data!==L;)if(C=E,!(E=E.next))return this;return(D=E.next)&&delete E.next,C?(D?C.next=D:delete C.next,this):z?(D?z[te]=D:delete z[te],(E=z[0]||z[1]||z[2]||z[3])&&E===(z[3]||z[2]||z[1]||z[0])&&!E.length&&(S?S[J]=E:this._root=E),this):(this._root=D,this)}function i(L){for(var z=0,E=L.length;z<E;++z)this.remove(L[z]);return this}function s(){return this._root}function p(){var L=0;return this.visit(function(z){if(!z.length)do++L;while(z=z.next)}),L}function d(L){var z=[],E,S=this._root,C,D,F,N,G;for(S&&z.push(new o(S,this._x0,this._y0,this._x1,this._y1));E=z.pop();)if(!L(S=E.node,D=E.x0,F=E.y0,N=E.x1,G=E.y1)&&S.length){var U=(D+N)/2,X=(F+G)/2;(C=S[3])&&z.push(new o(C,U,X,N,G)),(C=S[2])&&z.push(new o(C,D,X,U,G)),(C=S[1])&&z.push(new o(C,U,F,N,X)),(C=S[0])&&z.push(new o(C,D,F,U,X))}return this}function y(L){var z=[],E=[],S;for(this._root&&z.push(new o(this._root,this._x0,this._y0,this._x1,this._y1));S=z.pop();){var C=S.node;if(C.length){var D,F=S.x0,N=S.y0,G=S.x1,U=S.y1,X=(F+G)/2,I=(N+U)/2;(D=C[0])&&z.push(new o(D,F,N,X,I)),(D=C[1])&&z.push(new o(D,X,N,G,I)),(D=C[2])&&z.push(new o(D,F,I,X,U)),(D=C[3])&&z.push(new o(D,X,I,G,U))}E.push(S)}for(;S=E.pop();)L(S.node,S.x0,S.y0,S.x1,S.y1);return this}function b(L){return L[0]}function m(L){return arguments.length?(this._x=L,this):this._x}function _(L){return L[1]}function T(L){return arguments.length?(this._y=L,this):this._y}function g(L,z,E){var S=new A(z??b,E??_,NaN,NaN,NaN,NaN);return L==null?S:S.addAll(L)}function A(L,z,E,S,C,D){this._x=L,this._y=z,this._x0=E,this._y0=S,this._x1=C,this._y1=D,this._root=void 0}function k(L){for(var z={data:L.data},E=z;L=L.next;)E=E.next={data:L.data};return z}var R=g.prototype=A.prototype;R.copy=function(){var L=new A(this._x,this._y,this._x0,this._y0,this._x1,this._y1),z=this._root,E,S;if(!z)return L;if(!z.length)return L._root=k(z),L;for(E=[{source:z,target:L._root=new Array(4)}];z=E.pop();)for(var C=0;C<4;++C)(S=z.source[C])&&(S.length?E.push({source:S,target:z.target[C]=new Array(4)}):z.target[C]=k(S));return L},R.add=n,R.addAll=c,R.cover=t,R.data=f,R.extent=a,R.find=u,R.remove=h,R.removeAll=i,R.root=s,R.size=p,R.visit=d,R.visitAfter=y,R.x=m,R.y=T,r.quadtree=g,Object.defineProperty(r,"__esModule",{value:!0})})},{}],165:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?n(M,e("d3-path")):(r=r||self,n(r.d3=r.d3||{},r.d3))})(this,function(r,n){function l(vt){return function(){return vt}}var c=Math.abs,t=Math.atan2,f=Math.cos,a=Math.max,o=Math.min,u=Math.sin,h=Math.sqrt,i=1e-12,s=Math.PI,p=s/2,d=2*s;function y(vt){return vt>1?0:vt<-1?s:Math.acos(vt)}function b(vt){return vt>=1?p:vt<=-1?-p:Math.asin(vt)}function m(vt){return vt.innerRadius}function _(vt){return vt.outerRadius}function T(vt){return vt.startAngle}function g(vt){return vt.endAngle}function A(vt){return vt&&vt.padAngle}function k(vt,Gt,cr,Er,Wr,Vr,Qr,Hr){var Cn=cr-vt,ra=Er-Gt,ta=Qr-Wr,ba=Hr-Vr,Wa=ba*Cn-ta*ra;if(!(Wa*Wa<i))return Wa=(ta*(Gt-Vr)-ba*(vt-Wr))/Wa,[vt+Wa*Cn,Gt+Wa*ra]}function R(vt,Gt,cr,Er,Wr,Vr,Qr){var Hr=vt-cr,Cn=Gt-Er,ra=(Qr?Vr:-Vr)/h(Hr*Hr+Cn*Cn),ta=ra*Cn,ba=-ra*Hr,Wa=vt+ta,ei=Gt+ba,dr=cr+ta,an=Er+ba,Kr=(Wa+dr)/2,Rn=(ei+an)/2,Gn=dr-Wa,Sa=an-ei,ha=Gn*Gn+Sa*Sa,Aa=Wr-Vr,ka=Wa*an-dr*ei,Za=(Sa<0?-1:1)*h(a(0,Aa*Aa*ha-ka*ka)),Xt=(ka*Sa-Gn*Za)/ha,xr=(-ka*Gn-Sa*Za)/ha,Yr=(ka*Sa+Gn*Za)/ha,cn=(-ka*Gn+Sa*Za)/ha,en=Xt-Kr,nn=xr-Rn,pn=Yr-Kr,rn=cn-Rn;return en*en+nn*nn>pn*pn+rn*rn&&(Xt=Yr,xr=cn),{cx:Xt,cy:xr,x01:-ta,y01:-ba,x11:Xt*(Wr/Aa-1),y11:xr*(Wr/Aa-1)}}function L(){var vt=m,Gt=_,cr=l(0),Er=null,Wr=T,Vr=g,Qr=A,Hr=null;function Cn(){var ra,ta,ba=+vt.apply(this,arguments),Wa=+Gt.apply(this,arguments),ei=Wr.apply(this,arguments)-p,dr=Vr.apply(this,arguments)-p,an=c(dr-ei),Kr=dr>ei;if(Hr||(Hr=ra=n.path()),Wa<ba&&(ta=Wa,Wa=ba,ba=ta),!(Wa>i))Hr.moveTo(0,0);else if(an>d-i)Hr.moveTo(Wa*f(ei),Wa*u(ei)),Hr.arc(0,0,Wa,ei,dr,!Kr),ba>i&&(Hr.moveTo(ba*f(dr),ba*u(dr)),Hr.arc(0,0,ba,dr,ei,Kr));else{var Rn=ei,Gn=dr,Sa=ei,ha=dr,Aa=an,ka=an,Za=Qr.apply(this,arguments)/2,Xt=Za>i&&(Er?+Er.apply(this,arguments):h(ba*ba+Wa*Wa)),xr=o(c(Wa-ba)/2,+cr.apply(this,arguments)),Yr=xr,cn=xr,en,nn;if(Xt>i){var pn=b(Xt/ba*u(Za)),rn=b(Xt/Wa*u(Za));(Aa-=pn*2)>i?(pn*=Kr?1:-1,Sa+=pn,ha-=pn):(Aa=0,Sa=ha=(ei+dr)/2),(ka-=rn*2)>i?(rn*=Kr?1:-1,Rn+=rn,Gn-=rn):(ka=0,Rn=Gn=(ei+dr)/2)}var wr=Wa*f(Rn),Ir=Wa*u(Rn),Tr=ba*f(ha),Fn=ba*u(ha);if(xr>i){var Vn=Wa*f(Gn),la=Wa*u(Gn),Ra=ba*f(Sa),oa=ba*u(Sa),ai;if(an<s&&(ai=k(wr,Ir,Ra,oa,Vn,la,Tr,Fn))){var Ti=wr-ai[0],Ui=Ir-ai[1],Qa=Vn-ai[0],di=la-ai[1],Ps=1/u(y((Ti*Qa+Ui*di)/(h(Ti*Ti+Ui*Ui)*h(Qa*Qa+di*di)))/2),rs=h(ai[0]*ai[0]+ai[1]*ai[1]);Yr=o(xr,(ba-rs)/(Ps-1)),cn=o(xr,(Wa-rs)/(Ps+1))}}ka>i?cn>i?(en=R(Ra,oa,wr,Ir,Wa,cn,Kr),nn=R(Vn,la,Tr,Fn,Wa,cn,Kr),Hr.moveTo(en.cx+en.x01,en.cy+en.y01),cn<xr?Hr.arc(en.cx,en.cy,cn,t(en.y01,en.x01),t(nn.y01,nn.x01),!Kr):(Hr.arc(en.cx,en.cy,cn,t(en.y01,en.x01),t(en.y11,en.x11),!Kr),Hr.arc(0,0,Wa,t(en.cy+en.y11,en.cx+en.x11),t(nn.cy+nn.y11,nn.cx+nn.x11),!Kr),Hr.arc(nn.cx,nn.cy,cn,t(nn.y11,nn.x11),t(nn.y01,nn.x01),!Kr))):(Hr.moveTo(wr,Ir),Hr.arc(0,0,Wa,Rn,Gn,!Kr)):Hr.moveTo(wr,Ir),!(ba>i)||!(Aa>i)?Hr.lineTo(Tr,Fn):Yr>i?(en=R(Tr,Fn,Vn,la,ba,-Yr,Kr),nn=R(wr,Ir,Ra,oa,ba,-Yr,Kr),Hr.lineTo(en.cx+en.x01,en.cy+en.y01),Yr<xr?Hr.arc(en.cx,en.cy,Yr,t(en.y01,en.x01),t(nn.y01,nn.x01),!Kr):(Hr.arc(en.cx,en.cy,Yr,t(en.y01,en.x01),t(en.y11,en.x11),!Kr),Hr.arc(0,0,ba,t(en.cy+en.y11,en.cx+en.x11),t(nn.cy+nn.y11,nn.cx+nn.x11),Kr),Hr.arc(nn.cx,nn.cy,Yr,t(nn.y11,nn.x11),t(nn.y01,nn.x01),!Kr))):Hr.arc(0,0,ba,ha,Sa,Kr)}if(Hr.closePath(),ra)return Hr=null,ra+""||null}return Cn.centroid=function(){var ra=(+vt.apply(this,arguments)+ +Gt.apply(this,arguments))/2,ta=(+Wr.apply(this,arguments)+ +Vr.apply(this,arguments))/2-s/2;return[f(ta)*ra,u(ta)*ra]},Cn.innerRadius=function(ra){return arguments.length?(vt=typeof ra=="function"?ra:l(+ra),Cn):vt},Cn.outerRadius=function(ra){return arguments.length?(Gt=typeof ra=="function"?ra:l(+ra),Cn):Gt},Cn.cornerRadius=function(ra){return arguments.length?(cr=typeof ra=="function"?ra:l(+ra),Cn):cr},Cn.padRadius=function(ra){return arguments.length?(Er=ra==null?null:typeof ra=="function"?ra:l(+ra),Cn):Er},Cn.startAngle=function(ra){return arguments.length?(Wr=typeof ra=="function"?ra:l(+ra),Cn):Wr},Cn.endAngle=function(ra){return arguments.length?(Vr=typeof ra=="function"?ra:l(+ra),Cn):Vr},Cn.padAngle=function(ra){return arguments.length?(Qr=typeof ra=="function"?ra:l(+ra),Cn):Qr},Cn.context=function(ra){return arguments.length?(Hr=ra??null,Cn):Hr},Cn}function z(vt){this._context=vt}z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1,this._line?this._context.lineTo(vt,Gt):this._context.moveTo(vt,Gt);break;case 1:this._point=2;default:this._context.lineTo(vt,Gt);break}}};function E(vt){return new z(vt)}function S(vt){return vt[0]}function C(vt){return vt[1]}function D(){var vt=S,Gt=C,cr=l(!0),Er=null,Wr=E,Vr=null;function Qr(Hr){var Cn,ra=Hr.length,ta,ba=!1,Wa;for(Er==null&&(Vr=Wr(Wa=n.path())),Cn=0;Cn<=ra;++Cn)!(Cn<ra&&cr(ta=Hr[Cn],Cn,Hr))===ba&&((ba=!ba)?Vr.lineStart():Vr.lineEnd()),ba&&Vr.point(+vt(ta,Cn,Hr),+Gt(ta,Cn,Hr));if(Wa)return Vr=null,Wa+""||null}return Qr.x=function(Hr){return arguments.length?(vt=typeof Hr=="function"?Hr:l(+Hr),Qr):vt},Qr.y=function(Hr){return arguments.length?(Gt=typeof Hr=="function"?Hr:l(+Hr),Qr):Gt},Qr.defined=function(Hr){return arguments.length?(cr=typeof Hr=="function"?Hr:l(!!Hr),Qr):cr},Qr.curve=function(Hr){return arguments.length?(Wr=Hr,Er!=null&&(Vr=Wr(Er)),Qr):Wr},Qr.context=function(Hr){return arguments.length?(Hr==null?Er=Vr=null:Vr=Wr(Er=Hr),Qr):Er},Qr}function F(){var vt=S,Gt=null,cr=l(0),Er=C,Wr=l(!0),Vr=null,Qr=E,Hr=null;function Cn(ta){var ba,Wa,ei,dr=ta.length,an,Kr=!1,Rn,Gn=new Array(dr),Sa=new Array(dr);for(Vr==null&&(Hr=Qr(Rn=n.path())),ba=0;ba<=dr;++ba){if(!(ba<dr&&Wr(an=ta[ba],ba,ta))===Kr)if(Kr=!Kr)Wa=ba,Hr.areaStart(),Hr.lineStart();else{for(Hr.lineEnd(),Hr.lineStart(),ei=ba-1;ei>=Wa;--ei)Hr.point(Gn[ei],Sa[ei]);Hr.lineEnd(),Hr.areaEnd()}Kr&&(Gn[ba]=+vt(an,ba,ta),Sa[ba]=+cr(an,ba,ta),Hr.point(Gt?+Gt(an,ba,ta):Gn[ba],Er?+Er(an,ba,ta):Sa[ba]))}if(Rn)return Hr=null,Rn+""||null}function ra(){return D().defined(Wr).curve(Qr).context(Vr)}return Cn.x=function(ta){return arguments.length?(vt=typeof ta=="function"?ta:l(+ta),Gt=null,Cn):vt},Cn.x0=function(ta){return arguments.length?(vt=typeof ta=="function"?ta:l(+ta),Cn):vt},Cn.x1=function(ta){return arguments.length?(Gt=ta==null?null:typeof ta=="function"?ta:l(+ta),Cn):Gt},Cn.y=function(ta){return arguments.length?(cr=typeof ta=="function"?ta:l(+ta),Er=null,Cn):cr},Cn.y0=function(ta){return arguments.length?(cr=typeof ta=="function"?ta:l(+ta),Cn):cr},Cn.y1=function(ta){return arguments.length?(Er=ta==null?null:typeof ta=="function"?ta:l(+ta),Cn):Er},Cn.lineX0=Cn.lineY0=function(){return ra().x(vt).y(cr)},Cn.lineY1=function(){return ra().x(vt).y(Er)},Cn.lineX1=function(){return ra().x(Gt).y(cr)},Cn.defined=function(ta){return arguments.length?(Wr=typeof ta=="function"?ta:l(!!ta),Cn):Wr},Cn.curve=function(ta){return arguments.length?(Qr=ta,Vr!=null&&(Hr=Qr(Vr)),Cn):Qr},Cn.context=function(ta){return arguments.length?(ta==null?Vr=Hr=null:Hr=Qr(Vr=ta),Cn):Vr},Cn}function N(vt,Gt){return Gt<vt?-1:Gt>vt?1:Gt>=vt?0:NaN}function G(vt){return vt}function U(){var vt=G,Gt=N,cr=null,Er=l(0),Wr=l(d),Vr=l(0);function Qr(Hr){var Cn,ra=Hr.length,ta,ba,Wa=0,ei=new Array(ra),dr=new Array(ra),an=+Er.apply(this,arguments),Kr=Math.min(d,Math.max(-d,Wr.apply(this,arguments)-an)),Rn,Gn=Math.min(Math.abs(Kr)/ra,Vr.apply(this,arguments)),Sa=Gn*(Kr<0?-1:1),ha;for(Cn=0;Cn<ra;++Cn)(ha=dr[ei[Cn]=Cn]=+vt(Hr[Cn],Cn,Hr))>0&&(Wa+=ha);for(Gt!=null?ei.sort(function(Aa,ka){return Gt(dr[Aa],dr[ka])}):cr!=null&&ei.sort(function(Aa,ka){return cr(Hr[Aa],Hr[ka])}),Cn=0,ba=Wa?(Kr-ra*Sa)/Wa:0;Cn<ra;++Cn,an=Rn)ta=ei[Cn],ha=dr[ta],Rn=an+(ha>0?ha*ba:0)+Sa,dr[ta]={data:Hr[ta],index:Cn,value:ha,startAngle:an,endAngle:Rn,padAngle:Gn};return dr}return Qr.value=function(Hr){return arguments.length?(vt=typeof Hr=="function"?Hr:l(+Hr),Qr):vt},Qr.sortValues=function(Hr){return arguments.length?(Gt=Hr,cr=null,Qr):Gt},Qr.sort=function(Hr){return arguments.length?(cr=Hr,Gt=null,Qr):cr},Qr.startAngle=function(Hr){return arguments.length?(Er=typeof Hr=="function"?Hr:l(+Hr),Qr):Er},Qr.endAngle=function(Hr){return arguments.length?(Wr=typeof Hr=="function"?Hr:l(+Hr),Qr):Wr},Qr.padAngle=function(Hr){return arguments.length?(Vr=typeof Hr=="function"?Hr:l(+Hr),Qr):Vr},Qr}var X=B(E);function I(vt){this._curve=vt}I.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(vt,Gt){this._curve.point(Gt*Math.sin(vt),Gt*-Math.cos(vt))}};function B(vt){function Gt(cr){return new I(vt(cr))}return Gt._curve=vt,Gt}function j(vt){var Gt=vt.curve;return vt.angle=vt.x,delete vt.x,vt.radius=vt.y,delete vt.y,vt.curve=function(cr){return arguments.length?Gt(B(cr)):Gt()._curve},vt}function H(){return j(D().curve(X))}function K(){var vt=F().curve(X),Gt=vt.curve,cr=vt.lineX0,Er=vt.lineX1,Wr=vt.lineY0,Vr=vt.lineY1;return vt.angle=vt.x,delete vt.x,vt.startAngle=vt.x0,delete vt.x0,vt.endAngle=vt.x1,delete vt.x1,vt.radius=vt.y,delete vt.y,vt.innerRadius=vt.y0,delete vt.y0,vt.outerRadius=vt.y1,delete vt.y1,vt.lineStartAngle=function(){return j(cr())},delete vt.lineX0,vt.lineEndAngle=function(){return j(Er())},delete vt.lineX1,vt.lineInnerRadius=function(){return j(Wr())},delete vt.lineY0,vt.lineOuterRadius=function(){return j(Vr())},delete vt.lineY1,vt.curve=function(Qr){return arguments.length?Gt(B(Qr)):Gt()._curve},vt}function te(vt,Gt){return[(Gt=+Gt)*Math.cos(vt-=Math.PI/2),Gt*Math.sin(vt)]}var J=Array.prototype.slice;function oe(vt){return vt.source}function ie(vt){return vt.target}function Q(vt){var Gt=oe,cr=ie,Er=S,Wr=C,Vr=null;function Qr(){var Hr,Cn=J.call(arguments),ra=Gt.apply(this,Cn),ta=cr.apply(this,Cn);if(Vr||(Vr=Hr=n.path()),vt(Vr,+Er.apply(this,(Cn[0]=ra,Cn)),+Wr.apply(this,Cn),+Er.apply(this,(Cn[0]=ta,Cn)),+Wr.apply(this,Cn)),Hr)return Vr=null,Hr+""||null}return Qr.source=function(Hr){return arguments.length?(Gt=Hr,Qr):Gt},Qr.target=function(Hr){return arguments.length?(cr=Hr,Qr):cr},Qr.x=function(Hr){return arguments.length?(Er=typeof Hr=="function"?Hr:l(+Hr),Qr):Er},Qr.y=function(Hr){return arguments.length?(Wr=typeof Hr=="function"?Hr:l(+Hr),Qr):Wr},Qr.context=function(Hr){return arguments.length?(Vr=Hr??null,Qr):Vr},Qr}function V(vt,Gt,cr,Er,Wr){vt.moveTo(Gt,cr),vt.bezierCurveTo(Gt=(Gt+Er)/2,cr,Gt,Wr,Er,Wr)}function se(vt,Gt,cr,Er,Wr){vt.moveTo(Gt,cr),vt.bezierCurveTo(Gt,cr=(cr+Wr)/2,Er,cr,Er,Wr)}function re(vt,Gt,cr,Er,Wr){var Vr=te(Gt,cr),Qr=te(Gt,cr=(cr+Wr)/2),Hr=te(Er,cr),Cn=te(Er,Wr);vt.moveTo(Vr[0],Vr[1]),vt.bezierCurveTo(Qr[0],Qr[1],Hr[0],Hr[1],Cn[0],Cn[1])}function ee(){return Q(V)}function ae(){return Q(se)}function fe(){var vt=Q(re);return vt.angle=vt.x,delete vt.x,vt.radius=vt.y,delete vt.y,vt}var de={draw:function(vt,Gt){var cr=Math.sqrt(Gt/s);vt.moveTo(cr,0),vt.arc(0,0,cr,0,d)}},pe={draw:function(vt,Gt){var cr=Math.sqrt(Gt/5)/2;vt.moveTo(-3*cr,-cr),vt.lineTo(-cr,-cr),vt.lineTo(-cr,-3*cr),vt.lineTo(cr,-3*cr),vt.lineTo(cr,-cr),vt.lineTo(3*cr,-cr),vt.lineTo(3*cr,cr),vt.lineTo(cr,cr),vt.lineTo(cr,3*cr),vt.lineTo(-cr,3*cr),vt.lineTo(-cr,cr),vt.lineTo(-3*cr,cr),vt.closePath()}},W=Math.sqrt(1/3),ue=W*2,me={draw:function(vt,Gt){var cr=Math.sqrt(Gt/ue),Er=cr*W;vt.moveTo(0,-cr),vt.lineTo(Er,0),vt.lineTo(0,cr),vt.lineTo(-Er,0),vt.closePath()}},be=.8908130915292852,ke=Math.sin(s/10)/Math.sin(7*s/10),Pe=Math.sin(d/10)*ke,je=-Math.cos(d/10)*ke,ze={draw:function(vt,Gt){var cr=Math.sqrt(Gt*be),Er=Pe*cr,Wr=je*cr;vt.moveTo(0,-cr),vt.lineTo(Er,Wr);for(var Vr=1;Vr<5;++Vr){var Qr=d*Vr/5,Hr=Math.cos(Qr),Cn=Math.sin(Qr);vt.lineTo(Cn*cr,-Hr*cr),vt.lineTo(Hr*Er-Cn*Wr,Cn*Er+Hr*Wr)}vt.closePath()}},Ze={draw:function(vt,Gt){var cr=Math.sqrt(Gt),Er=-cr/2;vt.rect(Er,Er,cr,cr)}},tt=Math.sqrt(3),Ce={draw:function(vt,Gt){var cr=-Math.sqrt(Gt/(tt*3));vt.moveTo(0,cr*2),vt.lineTo(-tt*cr,-cr),vt.lineTo(tt*cr,-cr),vt.closePath()}},Ae=-.5,Ne=Math.sqrt(3)/2,qe=1/Math.sqrt(12),At=(qe/2+1)*3,kt={draw:function(vt,Gt){var cr=Math.sqrt(Gt/At),Er=cr/2,Wr=cr*qe,Vr=Er,Qr=cr*qe+cr,Hr=-Vr,Cn=Qr;vt.moveTo(Er,Wr),vt.lineTo(Vr,Qr),vt.lineTo(Hr,Cn),vt.lineTo(Ae*Er-Ne*Wr,Ne*Er+Ae*Wr),vt.lineTo(Ae*Vr-Ne*Qr,Ne*Vr+Ae*Qr),vt.lineTo(Ae*Hr-Ne*Cn,Ne*Hr+Ae*Cn),vt.lineTo(Ae*Er+Ne*Wr,Ae*Wr-Ne*Er),vt.lineTo(Ae*Vr+Ne*Qr,Ae*Qr-Ne*Vr),vt.lineTo(Ae*Hr+Ne*Cn,Ae*Cn-Ne*Hr),vt.closePath()}},Ve=[de,pe,me,Ze,ze,Ce,kt];function ft(){var vt=l(de),Gt=l(64),cr=null;function Er(){var Wr;if(cr||(cr=Wr=n.path()),vt.apply(this,arguments).draw(cr,+Gt.apply(this,arguments)),Wr)return cr=null,Wr+""||null}return Er.type=function(Wr){return arguments.length?(vt=typeof Wr=="function"?Wr:l(Wr),Er):vt},Er.size=function(Wr){return arguments.length?(Gt=typeof Wr=="function"?Wr:l(+Wr),Er):Gt},Er.context=function(Wr){return arguments.length?(cr=Wr??null,Er):cr},Er}function St(){}function Wt(vt,Gt,cr){vt._context.bezierCurveTo((2*vt._x0+vt._x1)/3,(2*vt._y0+vt._y1)/3,(vt._x0+2*vt._x1)/3,(vt._y0+2*vt._y1)/3,(vt._x0+4*vt._x1+Gt)/6,(vt._y0+4*vt._y1+cr)/6)}function Qt(vt){this._context=vt}Qt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Wt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1,this._line?this._context.lineTo(vt,Gt):this._context.moveTo(vt,Gt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Wt(this,vt,Gt);break}this._x0=this._x1,this._x1=vt,this._y0=this._y1,this._y1=Gt}};function zt(vt){return new Qt(vt)}function $t(vt){this._context=vt}$t.prototype={areaStart:St,areaEnd:St,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1,this._x2=vt,this._y2=Gt;break;case 1:this._point=2,this._x3=vt,this._y3=Gt;break;case 2:this._point=3,this._x4=vt,this._y4=Gt,this._context.moveTo((this._x0+4*this._x1+vt)/6,(this._y0+4*this._y1+Gt)/6);break;default:Wt(this,vt,Gt);break}this._x0=this._x1,this._x1=vt,this._y0=this._y1,this._y1=Gt}};function rr(vt){return new $t(vt)}function Pt(vt){this._context=vt}Pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var cr=(this._x0+4*this._x1+vt)/6,Er=(this._y0+4*this._y1+Gt)/6;this._line?this._context.lineTo(cr,Er):this._context.moveTo(cr,Er);break;case 3:this._point=4;default:Wt(this,vt,Gt);break}this._x0=this._x1,this._x1=vt,this._y0=this._y1,this._y1=Gt}};function Lt(vt){return new Pt(vt)}function dt(vt,Gt){this._basis=new Qt(vt),this._beta=Gt}dt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var vt=this._x,Gt=this._y,cr=vt.length-1;if(cr>0)for(var Er=vt[0],Wr=Gt[0],Vr=vt[cr]-Er,Qr=Gt[cr]-Wr,Hr=-1,Cn;++Hr<=cr;)Cn=Hr/cr,this._basis.point(this._beta*vt[Hr]+(1-this._beta)*(Er+Cn*Vr),this._beta*Gt[Hr]+(1-this._beta)*(Wr+Cn*Qr));this._x=this._y=null,this._basis.lineEnd()},point:function(vt,Gt){this._x.push(+vt),this._y.push(+Gt)}};var lt=function vt(Gt){function cr(Er){return Gt===1?new Qt(Er):new dt(Er,Gt)}return cr.beta=function(Er){return vt(+Er)},cr}(.85);function Te(vt,Gt,cr){vt._context.bezierCurveTo(vt._x1+vt._k*(vt._x2-vt._x0),vt._y1+vt._k*(vt._y2-vt._y0),vt._x2+vt._k*(vt._x1-Gt),vt._y2+vt._k*(vt._y1-cr),vt._x2,vt._y2)}function Le(vt,Gt){this._context=vt,this._k=(1-Gt)/6}Le.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Te(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1,this._line?this._context.lineTo(vt,Gt):this._context.moveTo(vt,Gt);break;case 1:this._point=2,this._x1=vt,this._y1=Gt;break;case 2:this._point=3;default:Te(this,vt,Gt);break}this._x0=this._x1,this._x1=this._x2,this._x2=vt,this._y0=this._y1,this._y1=this._y2,this._y2=Gt}};var Be=function vt(Gt){function cr(Er){return new Le(Er,Gt)}return cr.tension=function(Er){return vt(+Er)},cr}(0);function et(vt,Gt){this._context=vt,this._k=(1-Gt)/6}et.prototype={areaStart:St,areaEnd:St,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1,this._x3=vt,this._y3=Gt;break;case 1:this._point=2,this._context.moveTo(this._x4=vt,this._y4=Gt);break;case 2:this._point=3,this._x5=vt,this._y5=Gt;break;default:Te(this,vt,Gt);break}this._x0=this._x1,this._x1=this._x2,this._x2=vt,this._y0=this._y1,this._y1=this._y2,this._y2=Gt}};var Me=function vt(Gt){function cr(Er){return new et(Er,Gt)}return cr.tension=function(Er){return vt(+Er)},cr}(0);function Ie(vt,Gt){this._context=vt,this._k=(1-Gt)/6}Ie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Te(this,vt,Gt);break}this._x0=this._x1,this._x1=this._x2,this._x2=vt,this._y0=this._y1,this._y1=this._y2,this._y2=Gt}};var He=function vt(Gt){function cr(Er){return new Ie(Er,Gt)}return cr.tension=function(Er){return vt(+Er)},cr}(0);function Xe(vt,Gt,cr){var Er=vt._x1,Wr=vt._y1,Vr=vt._x2,Qr=vt._y2;if(vt._l01_a>i){var Hr=2*vt._l01_2a+3*vt._l01_a*vt._l12_a+vt._l12_2a,Cn=3*vt._l01_a*(vt._l01_a+vt._l12_a);Er=(Er*Hr-vt._x0*vt._l12_2a+vt._x2*vt._l01_2a)/Cn,Wr=(Wr*Hr-vt._y0*vt._l12_2a+vt._y2*vt._l01_2a)/Cn}if(vt._l23_a>i){var ra=2*vt._l23_2a+3*vt._l23_a*vt._l12_a+vt._l12_2a,ta=3*vt._l23_a*(vt._l23_a+vt._l12_a);Vr=(Vr*ra+vt._x1*vt._l23_2a-Gt*vt._l12_2a)/ta,Qr=(Qr*ra+vt._y1*vt._l23_2a-cr*vt._l12_2a)/ta}vt._context.bezierCurveTo(Er,Wr,Vr,Qr,vt._x2,vt._y2)}function ht(vt,Gt){this._context=vt,this._alpha=Gt}ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){if(vt=+vt,Gt=+Gt,this._point){var cr=this._x2-vt,Er=this._y2-Gt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(cr*cr+Er*Er,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(vt,Gt):this._context.moveTo(vt,Gt);break;case 1:this._point=2;break;case 2:this._point=3;default:Xe(this,vt,Gt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=vt,this._y0=this._y1,this._y1=this._y2,this._y2=Gt}};var it=function vt(Gt){function cr(Er){return Gt?new ht(Er,Gt):new Le(Er,0)}return cr.alpha=function(Er){return vt(+Er)},cr}(.5);function Ge(vt,Gt){this._context=vt,this._alpha=Gt}Ge.prototype={areaStart:St,areaEnd:St,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(vt,Gt){if(vt=+vt,Gt=+Gt,this._point){var cr=this._x2-vt,Er=this._y2-Gt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(cr*cr+Er*Er,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=vt,this._y3=Gt;break;case 1:this._point=2,this._context.moveTo(this._x4=vt,this._y4=Gt);break;case 2:this._point=3,this._x5=vt,this._y5=Gt;break;default:Xe(this,vt,Gt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=vt,this._y0=this._y1,this._y1=this._y2,this._y2=Gt}};var ot=function vt(Gt){function cr(Er){return Gt?new Ge(Er,Gt):new et(Er,0)}return cr.alpha=function(Er){return vt(+Er)},cr}(.5);function Je(vt,Gt){this._context=vt,this._alpha=Gt}Je.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){if(vt=+vt,Gt=+Gt,this._point){var cr=this._x2-vt,Er=this._y2-Gt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(cr*cr+Er*Er,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xe(this,vt,Gt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=vt,this._y0=this._y1,this._y1=this._y2,this._y2=Gt}};var st=function vt(Gt){function cr(Er){return Gt?new Je(Er,Gt):new Ie(Er,0)}return cr.alpha=function(Er){return vt(+Er)},cr}(.5);function It(vt){this._context=vt}It.prototype={areaStart:St,areaEnd:St,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(vt,Gt){vt=+vt,Gt=+Gt,this._point?this._context.lineTo(vt,Gt):(this._point=1,this._context.moveTo(vt,Gt))}};function Ft(vt){return new It(vt)}function nr(vt){return vt<0?-1:1}function We(vt,Gt,cr){var Er=vt._x1-vt._x0,Wr=Gt-vt._x1,Vr=(vt._y1-vt._y0)/(Er||Wr<0&&-0),Qr=(cr-vt._y1)/(Wr||Er<0&&-0),Hr=(Vr*Wr+Qr*Er)/(Er+Wr);return(nr(Vr)+nr(Qr))*Math.min(Math.abs(Vr),Math.abs(Qr),.5*Math.abs(Hr))||0}function Fe(vt,Gt){var cr=vt._x1-vt._x0;return cr?(3*(vt._y1-vt._y0)/cr-Gt)/2:Gt}function _t(vt,Gt,cr){var Er=vt._x0,Wr=vt._y0,Vr=vt._x1,Qr=vt._y1,Hr=(Vr-Er)/3;vt._context.bezierCurveTo(Er+Hr,Wr+Hr*Gt,Vr-Hr,Qr-Hr*cr,Vr,Qr)}function Mt(vt){this._context=vt}Mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_t(this,this._t0,Fe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){var cr=NaN;if(vt=+vt,Gt=+Gt,!(vt===this._x1&&Gt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(vt,Gt):this._context.moveTo(vt,Gt);break;case 1:this._point=2;break;case 2:this._point=3,_t(this,Fe(this,cr=We(this,vt,Gt)),cr);break;default:_t(this,this._t0,cr=We(this,vt,Gt));break}this._x0=this._x1,this._x1=vt,this._y0=this._y1,this._y1=Gt,this._t0=cr}}};function wt(vt){this._context=new Dt(vt)}(wt.prototype=Object.create(Mt.prototype)).point=function(vt,Gt){Mt.prototype.point.call(this,Gt,vt)};function Dt(vt){this._context=vt}Dt.prototype={moveTo:function(vt,Gt){this._context.moveTo(Gt,vt)},closePath:function(){this._context.closePath()},lineTo:function(vt,Gt){this._context.lineTo(Gt,vt)},bezierCurveTo:function(vt,Gt,cr,Er,Wr,Vr){this._context.bezierCurveTo(Gt,vt,Er,cr,Vr,Wr)}};function Rt(vt){return new Mt(vt)}function Bt(vt){return new wt(vt)}function Nt(vt){this._context=vt}Nt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var vt=this._x,Gt=this._y,cr=vt.length;if(cr)if(this._line?this._context.lineTo(vt[0],Gt[0]):this._context.moveTo(vt[0],Gt[0]),cr===2)this._context.lineTo(vt[1],Gt[1]);else for(var Er=er(vt),Wr=er(Gt),Vr=0,Qr=1;Qr<cr;++Vr,++Qr)this._context.bezierCurveTo(Er[0][Vr],Wr[0][Vr],Er[1][Vr],Wr[1][Vr],vt[Qr],Gt[Qr]);(this._line||this._line!==0&&cr===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(vt,Gt){this._x.push(+vt),this._y.push(+Gt)}};function er(vt){var Gt,cr=vt.length-1,Er,Wr=new Array(cr),Vr=new Array(cr),Qr=new Array(cr);for(Wr[0]=0,Vr[0]=2,Qr[0]=vt[0]+2*vt[1],Gt=1;Gt<cr-1;++Gt)Wr[Gt]=1,Vr[Gt]=4,Qr[Gt]=4*vt[Gt]+2*vt[Gt+1];for(Wr[cr-1]=2,Vr[cr-1]=7,Qr[cr-1]=8*vt[cr-1]+vt[cr],Gt=1;Gt<cr;++Gt)Er=Wr[Gt]/Vr[Gt-1],Vr[Gt]-=Er,Qr[Gt]-=Er*Qr[Gt-1];for(Wr[cr-1]=Qr[cr-1]/Vr[cr-1],Gt=cr-2;Gt>=0;--Gt)Wr[Gt]=(Qr[Gt]-Wr[Gt+1])/Vr[Gt];for(Vr[cr-1]=(vt[cr]+Wr[cr-1])/2,Gt=0;Gt<cr-1;++Gt)Vr[Gt]=2*vt[Gt+1]-Wr[Gt+1];return[Wr,Vr]}function qt(vt){return new Nt(vt)}function Zt(vt,Gt){this._context=vt,this._t=Gt}Zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1,this._line?this._context.lineTo(vt,Gt):this._context.moveTo(vt,Gt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Gt),this._context.lineTo(vt,Gt);else{var cr=this._x*(1-this._t)+vt*this._t;this._context.lineTo(cr,this._y),this._context.lineTo(cr,Gt)}break}}this._x=vt,this._y=Gt}};function _r(vt){return new Zt(vt,.5)}function Gr(vt){return new Zt(vt,0)}function zr(vt){return new Zt(vt,1)}function Or(vt,Gt){if((Qr=vt.length)>1)for(var cr=1,Er,Wr,Vr=vt[Gt[0]],Qr,Hr=Vr.length;cr<Qr;++cr)for(Wr=Vr,Vr=vt[Gt[cr]],Er=0;Er<Hr;++Er)Vr[Er][1]+=Vr[Er][0]=isNaN(Wr[Er][1])?Wr[Er][0]:Wr[Er][1]}function Mn(vt){for(var Gt=vt.length,cr=new Array(Gt);--Gt>=0;)cr[Gt]=Gt;return cr}function Yn(vt,Gt){return vt[Gt]}function An(){var vt=l([]),Gt=Mn,cr=Or,Er=Yn;function Wr(Vr){var Qr=vt.apply(this,arguments),Hr,Cn=Vr.length,ra=Qr.length,ta=new Array(ra),ba;for(Hr=0;Hr<ra;++Hr){for(var Wa=Qr[Hr],ei=ta[Hr]=new Array(Cn),dr=0,an;dr<Cn;++dr)ei[dr]=an=[0,+Er(Vr[dr],Wa,dr,Vr)],an.data=Vr[dr];ei.key=Wa}for(Hr=0,ba=Gt(ta);Hr<ra;++Hr)ta[ba[Hr]].index=Hr;return cr(ta,ba),ta}return Wr.keys=function(Vr){return arguments.length?(vt=typeof Vr=="function"?Vr:l(J.call(Vr)),Wr):vt},Wr.value=function(Vr){return arguments.length?(Er=typeof Vr=="function"?Vr:l(+Vr),Wr):Er},Wr.order=function(Vr){return arguments.length?(Gt=Vr==null?Mn:typeof Vr=="function"?Vr:l(J.call(Vr)),Wr):Gt},Wr.offset=function(Vr){return arguments.length?(cr=Vr??Or,Wr):cr},Wr}function Bn(vt,Gt){if((Er=vt.length)>0){for(var cr,Er,Wr=0,Vr=vt[0].length,Qr;Wr<Vr;++Wr){for(Qr=cr=0;cr<Er;++cr)Qr+=vt[cr][Wr][1]||0;if(Qr)for(cr=0;cr<Er;++cr)vt[cr][Wr][1]/=Qr}Or(vt,Gt)}}function jn(vt,Gt){if((Cn=vt.length)>0)for(var cr,Er=0,Wr,Vr,Qr,Hr,Cn,ra=vt[Gt[0]].length;Er<ra;++Er)for(Qr=Hr=0,cr=0;cr<Cn;++cr)(Vr=(Wr=vt[Gt[cr]][Er])[1]-Wr[0])>0?(Wr[0]=Qr,Wr[1]=Qr+=Vr):Vr<0?(Wr[1]=Hr,Wr[0]=Hr+=Vr):(Wr[0]=0,Wr[1]=Vr)}function Nr(vt,Gt){if((Wr=vt.length)>0){for(var cr=0,Er=vt[Gt[0]],Wr,Vr=Er.length;cr<Vr;++cr){for(var Qr=0,Hr=0;Qr<Wr;++Qr)Hr+=vt[Qr][cr][1]||0;Er[cr][1]+=Er[cr][0]=-Hr/2}Or(vt,Gt)}}function Lr(vt,Gt){if(!(!((Qr=vt.length)>0)||!((Vr=(Wr=vt[Gt[0]]).length)>0))){for(var cr=0,Er=1,Wr,Vr,Qr;Er<Vr;++Er){for(var Hr=0,Cn=0,ra=0;Hr<Qr;++Hr){for(var ta=vt[Gt[Hr]],ba=ta[Er][1]||0,Wa=ta[Er-1][1]||0,ei=(ba-Wa)/2,dr=0;dr<Hr;++dr){var an=vt[Gt[dr]],Kr=an[Er][1]||0,Rn=an[Er-1][1]||0;ei+=Kr-Rn}Cn+=ba,ra+=ei*ba}Wr[Er-1][1]+=Wr[Er-1][0]=cr,Cn&&(cr-=ra/Cn)}Wr[Er-1][1]+=Wr[Er-1][0]=cr,Or(vt,Gt)}}function Ln(vt){var Gt=vt.map(dn);return Mn(vt).sort(function(cr,Er){return Gt[cr]-Gt[Er]})}function dn(vt){for(var Gt=-1,cr=0,Er=vt.length,Wr,Vr=-1/0;++Gt<Er;)(Wr=+vt[Gt][1])>Vr&&(Vr=Wr,cr=Gt);return cr}function xn(vt){var Gt=vt.map(tn);return Mn(vt).sort(function(cr,Er){return Gt[cr]-Gt[Er]})}function tn(vt){for(var Gt=0,cr=-1,Er=vt.length,Wr;++cr<Er;)(Wr=+vt[cr][1])&&(Gt+=Wr);return Gt}function wn(vt){return xn(vt).reverse()}function Sn(vt){var Gt=vt.length,cr,Er,Wr=vt.map(tn),Vr=Ln(vt),Qr=0,Hr=0,Cn=[],ra=[];for(cr=0;cr<Gt;++cr)Er=Vr[cr],Qr<Hr?(Qr+=Wr[Er],Cn.push(Er)):(Hr+=Wr[Er],ra.push(Er));return ra.reverse().concat(Cn)}function un(vt){return Mn(vt).reverse()}r.arc=L,r.area=F,r.areaRadial=K,r.curveBasis=zt,r.curveBasisClosed=rr,r.curveBasisOpen=Lt,r.curveBundle=lt,r.curveCardinal=Be,r.curveCardinalClosed=Me,r.curveCardinalOpen=He,r.curveCatmullRom=it,r.curveCatmullRomClosed=ot,r.curveCatmullRomOpen=st,r.curveLinear=E,r.curveLinearClosed=Ft,r.curveMonotoneX=Rt,r.curveMonotoneY=Bt,r.curveNatural=qt,r.curveStep=_r,r.curveStepAfter=zr,r.curveStepBefore=Gr,r.line=D,r.lineRadial=H,r.linkHorizontal=ee,r.linkRadial=fe,r.linkVertical=ae,r.pie=U,r.pointRadial=te,r.radialArea=K,r.radialLine=H,r.stack=An,r.stackOffsetDiverging=jn,r.stackOffsetExpand=Bn,r.stackOffsetNone=Or,r.stackOffsetSilhouette=Nr,r.stackOffsetWiggle=Lr,r.stackOrderAppearance=Ln,r.stackOrderAscending=xn,r.stackOrderDescending=wn,r.stackOrderInsideOut=Sn,r.stackOrderNone=Mn,r.stackOrderReverse=un,r.symbol=ft,r.symbolCircle=de,r.symbolCross=pe,r.symbolDiamond=me,r.symbolSquare=Ze,r.symbolStar=ze,r.symbolTriangle=Ce,r.symbolWye=kt,r.symbols=Ve,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-path":163}],166:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?n(M,e("d3-time")):(r=r||self,n(r.d3=r.d3||{},r.d3))})(this,function(r,n){function l(dt){if(0<=dt.y&&dt.y<100){var lt=new Date(-1,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L);return lt.setFullYear(dt.y),lt}return new Date(dt.y,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L)}function c(dt){if(0<=dt.y&&dt.y<100){var lt=new Date(Date.UTC(-1,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L));return lt.setUTCFullYear(dt.y),lt}return new Date(Date.UTC(dt.y,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L))}function t(dt,lt,Te){return{y:dt,m:lt,d:Te,H:0,M:0,S:0,L:0}}function f(dt){var lt=dt.dateTime,Te=dt.date,Le=dt.time,Be=dt.periods,et=dt.days,Me=dt.shortDays,Ie=dt.months,He=dt.shortMonths,Xe=p(Be),ht=d(Be),it=p(et),Ge=d(et),ot=p(Me),Je=d(Me),st=p(Ie),It=d(Ie),Ft=p(He),nr=d(He),We={a:zr,A:Or,b:Mn,B:Yn,c:null,d:I,e:I,f:te,H:B,I:j,j:H,L:K,m:J,M:oe,p:An,q:Bn,Q:ft,s:St,S:ie,u:Q,U:V,V:se,w:re,W:ee,x:null,X:null,y:ae,Y:fe,Z:de,"%":Ve},Fe={a:jn,A:Nr,b:Lr,B:Ln,c:null,d:pe,e:pe,f:ke,H:W,I:ue,j:me,L:be,m:Pe,M:je,p:dn,q:xn,Q:ft,s:St,S:ze,u:Ze,U:tt,V:Ce,w:Ae,W:Ne,x:null,X:null,y:qe,Y:At,Z:kt,"%":Ve},_t={a:Bt,A:Nt,b:er,B:qt,c:Zt,d:z,e:z,f:N,H:S,I:S,j:E,L:F,m:L,M:C,p:Rt,q:R,Q:U,s:X,S:D,u:b,U:m,V:_,w:y,W:T,x:_r,X:Gr,y:A,Y:g,Z:k,"%":G};We.x=Mt(Te,We),We.X=Mt(Le,We),We.c=Mt(lt,We),Fe.x=Mt(Te,Fe),Fe.X=Mt(Le,Fe),Fe.c=Mt(lt,Fe);function Mt(tn,wn){return function(Sn){var un=[],vt=-1,Gt=0,cr=tn.length,Er,Wr,Vr;for(Sn instanceof Date||(Sn=new Date(+Sn));++vt<cr;)tn.charCodeAt(vt)===37&&(un.push(tn.slice(Gt,vt)),(Wr=a[Er=tn.charAt(++vt)])!=null?Er=tn.charAt(++vt):Wr=Er==="e"?" ":"0",(Vr=wn[Er])&&(Er=Vr(Sn,Wr)),un.push(Er),Gt=vt+1);return un.push(tn.slice(Gt,vt)),un.join("")}}function wt(tn,wn){return function(Sn){var un=t(1900,void 0,1),vt=Dt(un,tn,Sn+="",0),Gt,cr;if(vt!=Sn.length)return null;if("Q"in un)return new Date(un.Q);if("s"in un)return new Date(un.s*1e3+("L"in un?un.L:0));if(wn&&!("Z"in un)&&(un.Z=0),"p"in un&&(un.H=un.H%12+un.p*12),un.m===void 0&&(un.m="q"in un?un.q:0),"V"in un){if(un.V<1||un.V>53)return null;"w"in un||(un.w=1),"Z"in un?(Gt=c(t(un.y,0,1)),cr=Gt.getUTCDay(),Gt=cr>4||cr===0?n.utcMonday.ceil(Gt):n.utcMonday(Gt),Gt=n.utcDay.offset(Gt,(un.V-1)*7),un.y=Gt.getUTCFullYear(),un.m=Gt.getUTCMonth(),un.d=Gt.getUTCDate()+(un.w+6)%7):(Gt=l(t(un.y,0,1)),cr=Gt.getDay(),Gt=cr>4||cr===0?n.timeMonday.ceil(Gt):n.timeMonday(Gt),Gt=n.timeDay.offset(Gt,(un.V-1)*7),un.y=Gt.getFullYear(),un.m=Gt.getMonth(),un.d=Gt.getDate()+(un.w+6)%7)}else("W"in un||"U"in un)&&("w"in un||(un.w="u"in un?un.u%7:"W"in un?1:0),cr="Z"in un?c(t(un.y,0,1)).getUTCDay():l(t(un.y,0,1)).getDay(),un.m=0,un.d="W"in un?(un.w+6)%7+un.W*7-(cr+5)%7:un.w+un.U*7-(cr+6)%7);return"Z"in un?(un.H+=un.Z/100|0,un.M+=un.Z%100,c(un)):l(un)}}function Dt(tn,wn,Sn,un){for(var vt=0,Gt=wn.length,cr=Sn.length,Er,Wr;vt<Gt;){if(un>=cr)return-1;if(Er=wn.charCodeAt(vt++),Er===37){if(Er=wn.charAt(vt++),Wr=_t[Er in a?wn.charAt(vt++):Er],!Wr||(un=Wr(tn,Sn,un))<0)return-1}else if(Er!=Sn.charCodeAt(un++))return-1}return un}function Rt(tn,wn,Sn){var un=Xe.exec(wn.slice(Sn));return un?(tn.p=ht[un[0].toLowerCase()],Sn+un[0].length):-1}function Bt(tn,wn,Sn){var un=ot.exec(wn.slice(Sn));return un?(tn.w=Je[un[0].toLowerCase()],Sn+un[0].length):-1}function Nt(tn,wn,Sn){var un=it.exec(wn.slice(Sn));return un?(tn.w=Ge[un[0].toLowerCase()],Sn+un[0].length):-1}function er(tn,wn,Sn){var un=Ft.exec(wn.slice(Sn));return un?(tn.m=nr[un[0].toLowerCase()],Sn+un[0].length):-1}function qt(tn,wn,Sn){var un=st.exec(wn.slice(Sn));return un?(tn.m=It[un[0].toLowerCase()],Sn+un[0].length):-1}function Zt(tn,wn,Sn){return Dt(tn,lt,wn,Sn)}function _r(tn,wn,Sn){return Dt(tn,Te,wn,Sn)}function Gr(tn,wn,Sn){return Dt(tn,Le,wn,Sn)}function zr(tn){return Me[tn.getDay()]}function Or(tn){return et[tn.getDay()]}function Mn(tn){return He[tn.getMonth()]}function Yn(tn){return Ie[tn.getMonth()]}function An(tn){return Be[+(tn.getHours()>=12)]}function Bn(tn){return 1+~~(tn.getMonth()/3)}function jn(tn){return Me[tn.getUTCDay()]}function Nr(tn){return et[tn.getUTCDay()]}function Lr(tn){return He[tn.getUTCMonth()]}function Ln(tn){return Ie[tn.getUTCMonth()]}function dn(tn){return Be[+(tn.getUTCHours()>=12)]}function xn(tn){return 1+~~(tn.getUTCMonth()/3)}return{format:function(tn){var wn=Mt(tn+="",We);return wn.toString=function(){return tn},wn},parse:function(tn){var wn=wt(tn+="",!1);return wn.toString=function(){return tn},wn},utcFormat:function(tn){var wn=Mt(tn+="",Fe);return wn.toString=function(){return tn},wn},utcParse:function(tn){var wn=wt(tn+="",!0);return wn.toString=function(){return tn},wn}}}var a={"-":"",_:" ",0:"0"},o=/^\s*\d+/,u=/^%/,h=/[\\^$*+?|[\]().{}]/g;function i(dt,lt,Te){var Le=dt<0?"-":"",Be=(Le?-dt:dt)+"",et=Be.length;return Le+(et<Te?new Array(Te-et+1).join(lt)+Be:Be)}function s(dt){return dt.replace(h,"\\$&")}function p(dt){return new RegExp("^(?:"+dt.map(s).join("|")+")","i")}function d(dt){for(var lt={},Te=-1,Le=dt.length;++Te<Le;)lt[dt[Te].toLowerCase()]=Te;return lt}function y(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+1));return Le?(dt.w=+Le[0],Te+Le[0].length):-1}function b(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+1));return Le?(dt.u=+Le[0],Te+Le[0].length):-1}function m(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.U=+Le[0],Te+Le[0].length):-1}function _(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.V=+Le[0],Te+Le[0].length):-1}function T(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.W=+Le[0],Te+Le[0].length):-1}function g(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+4));return Le?(dt.y=+Le[0],Te+Le[0].length):-1}function A(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.y=+Le[0]+(+Le[0]>68?1900:2e3),Te+Le[0].length):-1}function k(dt,lt,Te){var Le=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(lt.slice(Te,Te+6));return Le?(dt.Z=Le[1]?0:-(Le[2]+(Le[3]||"00")),Te+Le[0].length):-1}function R(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+1));return Le?(dt.q=Le[0]*3-3,Te+Le[0].length):-1}function L(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.m=Le[0]-1,Te+Le[0].length):-1}function z(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.d=+Le[0],Te+Le[0].length):-1}function E(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+3));return Le?(dt.m=0,dt.d=+Le[0],Te+Le[0].length):-1}function S(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.H=+Le[0],Te+Le[0].length):-1}function C(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.M=+Le[0],Te+Le[0].length):-1}function D(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.S=+Le[0],Te+Le[0].length):-1}function F(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+3));return Le?(dt.L=+Le[0],Te+Le[0].length):-1}function N(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+6));return Le?(dt.L=Math.floor(Le[0]/1e3),Te+Le[0].length):-1}function G(dt,lt,Te){var Le=u.exec(lt.slice(Te,Te+1));return Le?Te+Le[0].length:-1}function U(dt,lt,Te){var Le=o.exec(lt.slice(Te));return Le?(dt.Q=+Le[0],Te+Le[0].length):-1}function X(dt,lt,Te){var Le=o.exec(lt.slice(Te));return Le?(dt.s=+Le[0],Te+Le[0].length):-1}function I(dt,lt){return i(dt.getDate(),lt,2)}function B(dt,lt){return i(dt.getHours(),lt,2)}function j(dt,lt){return i(dt.getHours()%12||12,lt,2)}function H(dt,lt){return i(1+n.timeDay.count(n.timeYear(dt),dt),lt,3)}function K(dt,lt){return i(dt.getMilliseconds(),lt,3)}function te(dt,lt){return K(dt,lt)+"000"}function J(dt,lt){return i(dt.getMonth()+1,lt,2)}function oe(dt,lt){return i(dt.getMinutes(),lt,2)}function ie(dt,lt){return i(dt.getSeconds(),lt,2)}function Q(dt){var lt=dt.getDay();return lt===0?7:lt}function V(dt,lt){return i(n.timeSunday.count(n.timeYear(dt)-1,dt),lt,2)}function se(dt,lt){var Te=dt.getDay();return dt=Te>=4||Te===0?n.timeThursday(dt):n.timeThursday.ceil(dt),i(n.timeThursday.count(n.timeYear(dt),dt)+(n.timeYear(dt).getDay()===4),lt,2)}function re(dt){return dt.getDay()}function ee(dt,lt){return i(n.timeMonday.count(n.timeYear(dt)-1,dt),lt,2)}function ae(dt,lt){return i(dt.getFullYear()%100,lt,2)}function fe(dt,lt){return i(dt.getFullYear()%1e4,lt,4)}function de(dt){var lt=dt.getTimezoneOffset();return(lt>0?"-":(lt*=-1,"+"))+i(lt/60|0,"0",2)+i(lt%60,"0",2)}function pe(dt,lt){return i(dt.getUTCDate(),lt,2)}function W(dt,lt){return i(dt.getUTCHours(),lt,2)}function ue(dt,lt){return i(dt.getUTCHours()%12||12,lt,2)}function me(dt,lt){return i(1+n.utcDay.count(n.utcYear(dt),dt),lt,3)}function be(dt,lt){return i(dt.getUTCMilliseconds(),lt,3)}function ke(dt,lt){return be(dt,lt)+"000"}function Pe(dt,lt){return i(dt.getUTCMonth()+1,lt,2)}function je(dt,lt){return i(dt.getUTCMinutes(),lt,2)}function ze(dt,lt){return i(dt.getUTCSeconds(),lt,2)}function Ze(dt){var lt=dt.getUTCDay();return lt===0?7:lt}function tt(dt,lt){return i(n.utcSunday.count(n.utcYear(dt)-1,dt),lt,2)}function Ce(dt,lt){var Te=dt.getUTCDay();return dt=Te>=4||Te===0?n.utcThursday(dt):n.utcThursday.ceil(dt),i(n.utcThursday.count(n.utcYear(dt),dt)+(n.utcYear(dt).getUTCDay()===4),lt,2)}function Ae(dt){return dt.getUTCDay()}function Ne(dt,lt){return i(n.utcMonday.count(n.utcYear(dt)-1,dt),lt,2)}function qe(dt,lt){return i(dt.getUTCFullYear()%100,lt,2)}function At(dt,lt){return i(dt.getUTCFullYear()%1e4,lt,4)}function kt(){return"+0000"}function Ve(){return"%"}function ft(dt){return+dt}function St(dt){return Math.floor(+dt/1e3)}var Wt;Qt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Qt(dt){return Wt=f(dt),r.timeFormat=Wt.format,r.timeParse=Wt.parse,r.utcFormat=Wt.utcFormat,r.utcParse=Wt.utcParse,Wt}var zt="%Y-%m-%dT%H:%M:%S.%LZ";function $t(dt){return dt.toISOString()}var rr=Date.prototype.toISOString?$t:r.utcFormat(zt);function Pt(dt){var lt=new Date(dt);return isNaN(lt)?null:lt}var Lt=+new Date("2000-01-01T00:00:00.000Z")?Pt:r.utcParse(zt);r.isoFormat=rr,r.isoParse=Lt,r.timeFormatDefaultLocale=Qt,r.timeFormatLocale=f,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-time":167}],167:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?n(M):(r=r||self,n(r.d3=r.d3||{}))})(this,function(r){var n=new Date,l=new Date;function c(Ae,Ne,qe,At){function kt(Ve){return Ae(Ve=arguments.length===0?new Date:new Date(+Ve)),Ve}return kt.floor=function(Ve){return Ae(Ve=new Date(+Ve)),Ve},kt.ceil=function(Ve){return Ae(Ve=new Date(Ve-1)),Ne(Ve,1),Ae(Ve),Ve},kt.round=function(Ve){var ft=kt(Ve),St=kt.ceil(Ve);return Ve-ft<St-Ve?ft:St},kt.offset=function(Ve,ft){return Ne(Ve=new Date(+Ve),ft==null?1:Math.floor(ft)),Ve},kt.range=function(Ve,ft,St){var Wt=[],Qt;if(Ve=kt.ceil(Ve),St=St==null?1:Math.floor(St),!(Ve<ft)||!(St>0))return Wt;do Wt.push(Qt=new Date(+Ve)),Ne(Ve,St),Ae(Ve);while(Qt<Ve&&Ve<ft);return Wt},kt.filter=function(Ve){return c(function(ft){if(ft>=ft)for(;Ae(ft),!Ve(ft);)ft.setTime(ft-1)},function(ft,St){if(ft>=ft)if(St<0)for(;++St<=0;)for(;Ne(ft,-1),!Ve(ft););else for(;--St>=0;)for(;Ne(ft,1),!Ve(ft););})},qe&&(kt.count=function(Ve,ft){return n.setTime(+Ve),l.setTime(+ft),Ae(n),Ae(l),Math.floor(qe(n,l))},kt.every=function(Ve){return Ve=Math.floor(Ve),!isFinite(Ve)||!(Ve>0)?null:Ve>1?kt.filter(At?function(ft){return At(ft)%Ve===0}:function(ft){return kt.count(0,ft)%Ve===0}):kt}),kt}var t=c(function(){},function(Ae,Ne){Ae.setTime(+Ae+Ne)},function(Ae,Ne){return Ne-Ae});t.every=function(Ae){return Ae=Math.floor(Ae),!isFinite(Ae)||!(Ae>0)?null:Ae>1?c(function(Ne){Ne.setTime(Math.floor(Ne/Ae)*Ae)},function(Ne,qe){Ne.setTime(+Ne+qe*Ae)},function(Ne,qe){return(qe-Ne)/Ae}):t};var f=t.range,a=1e3,o=6e4,u=36e5,h=864e5,i=6048e5,s=c(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds())},function(Ae,Ne){Ae.setTime(+Ae+Ne*a)},function(Ae,Ne){return(Ne-Ae)/a},function(Ae){return Ae.getUTCSeconds()}),p=s.range,d=c(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-Ae.getSeconds()*a)},function(Ae,Ne){Ae.setTime(+Ae+Ne*o)},function(Ae,Ne){return(Ne-Ae)/o},function(Ae){return Ae.getMinutes()}),y=d.range,b=c(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-Ae.getSeconds()*a-Ae.getMinutes()*o)},function(Ae,Ne){Ae.setTime(+Ae+Ne*u)},function(Ae,Ne){return(Ne-Ae)/u},function(Ae){return Ae.getHours()}),m=b.range,_=c(function(Ae){Ae.setHours(0,0,0,0)},function(Ae,Ne){Ae.setDate(Ae.getDate()+Ne)},function(Ae,Ne){return(Ne-Ae-(Ne.getTimezoneOffset()-Ae.getTimezoneOffset())*o)/h},function(Ae){return Ae.getDate()-1}),T=_.range;function g(Ae){return c(function(Ne){Ne.setDate(Ne.getDate()-(Ne.getDay()+7-Ae)%7),Ne.setHours(0,0,0,0)},function(Ne,qe){Ne.setDate(Ne.getDate()+qe*7)},function(Ne,qe){return(qe-Ne-(qe.getTimezoneOffset()-Ne.getTimezoneOffset())*o)/i})}var A=g(0),k=g(1),R=g(2),L=g(3),z=g(4),E=g(5),S=g(6),C=A.range,D=k.range,F=R.range,N=L.range,G=z.range,U=E.range,X=S.range,I=c(function(Ae){Ae.setDate(1),Ae.setHours(0,0,0,0)},function(Ae,Ne){Ae.setMonth(Ae.getMonth()+Ne)},function(Ae,Ne){return Ne.getMonth()-Ae.getMonth()+(Ne.getFullYear()-Ae.getFullYear())*12},function(Ae){return Ae.getMonth()}),B=I.range,j=c(function(Ae){Ae.setMonth(0,1),Ae.setHours(0,0,0,0)},function(Ae,Ne){Ae.setFullYear(Ae.getFullYear()+Ne)},function(Ae,Ne){return Ne.getFullYear()-Ae.getFullYear()},function(Ae){return Ae.getFullYear()});j.every=function(Ae){return!isFinite(Ae=Math.floor(Ae))||!(Ae>0)?null:c(function(Ne){Ne.setFullYear(Math.floor(Ne.getFullYear()/Ae)*Ae),Ne.setMonth(0,1),Ne.setHours(0,0,0,0)},function(Ne,qe){Ne.setFullYear(Ne.getFullYear()+qe*Ae)})};var H=j.range,K=c(function(Ae){Ae.setUTCSeconds(0,0)},function(Ae,Ne){Ae.setTime(+Ae+Ne*o)},function(Ae,Ne){return(Ne-Ae)/o},function(Ae){return Ae.getUTCMinutes()}),te=K.range,J=c(function(Ae){Ae.setUTCMinutes(0,0,0)},function(Ae,Ne){Ae.setTime(+Ae+Ne*u)},function(Ae,Ne){return(Ne-Ae)/u},function(Ae){return Ae.getUTCHours()}),oe=J.range,ie=c(function(Ae){Ae.setUTCHours(0,0,0,0)},function(Ae,Ne){Ae.setUTCDate(Ae.getUTCDate()+Ne)},function(Ae,Ne){return(Ne-Ae)/h},function(Ae){return Ae.getUTCDate()-1}),Q=ie.range;function V(Ae){return c(function(Ne){Ne.setUTCDate(Ne.getUTCDate()-(Ne.getUTCDay()+7-Ae)%7),Ne.setUTCHours(0,0,0,0)},function(Ne,qe){Ne.setUTCDate(Ne.getUTCDate()+qe*7)},function(Ne,qe){return(qe-Ne)/i})}var se=V(0),re=V(1),ee=V(2),ae=V(3),fe=V(4),de=V(5),pe=V(6),W=se.range,ue=re.range,me=ee.range,be=ae.range,ke=fe.range,Pe=de.range,je=pe.range,ze=c(function(Ae){Ae.setUTCDate(1),Ae.setUTCHours(0,0,0,0)},function(Ae,Ne){Ae.setUTCMonth(Ae.getUTCMonth()+Ne)},function(Ae,Ne){return Ne.getUTCMonth()-Ae.getUTCMonth()+(Ne.getUTCFullYear()-Ae.getUTCFullYear())*12},function(Ae){return Ae.getUTCMonth()}),Ze=ze.range,tt=c(function(Ae){Ae.setUTCMonth(0,1),Ae.setUTCHours(0,0,0,0)},function(Ae,Ne){Ae.setUTCFullYear(Ae.getUTCFullYear()+Ne)},function(Ae,Ne){return Ne.getUTCFullYear()-Ae.getUTCFullYear()},function(Ae){return Ae.getUTCFullYear()});tt.every=function(Ae){return!isFinite(Ae=Math.floor(Ae))||!(Ae>0)?null:c(function(Ne){Ne.setUTCFullYear(Math.floor(Ne.getUTCFullYear()/Ae)*Ae),Ne.setUTCMonth(0,1),Ne.setUTCHours(0,0,0,0)},function(Ne,qe){Ne.setUTCFullYear(Ne.getUTCFullYear()+qe*Ae)})};var Ce=tt.range;r.timeDay=_,r.timeDays=T,r.timeFriday=E,r.timeFridays=U,r.timeHour=b,r.timeHours=m,r.timeInterval=c,r.timeMillisecond=t,r.timeMilliseconds=f,r.timeMinute=d,r.timeMinutes=y,r.timeMonday=k,r.timeMondays=D,r.timeMonth=I,r.timeMonths=B,r.timeSaturday=S,r.timeSaturdays=X,r.timeSecond=s,r.timeSeconds=p,r.timeSunday=A,r.timeSundays=C,r.timeThursday=z,r.timeThursdays=G,r.timeTuesday=R,r.timeTuesdays=F,r.timeWednesday=L,r.timeWednesdays=N,r.timeWeek=A,r.timeWeeks=C,r.timeYear=j,r.timeYears=H,r.utcDay=ie,r.utcDays=Q,r.utcFriday=de,r.utcFridays=Pe,r.utcHour=J,r.utcHours=oe,r.utcMillisecond=t,r.utcMilliseconds=f,r.utcMinute=K,r.utcMinutes=te,r.utcMonday=re,r.utcMondays=ue,r.utcMonth=ze,r.utcMonths=Ze,r.utcSaturday=pe,r.utcSaturdays=je,r.utcSecond=s,r.utcSeconds=p,r.utcSunday=se,r.utcSundays=W,r.utcThursday=fe,r.utcThursdays=ke,r.utcTuesday=ee,r.utcTuesdays=me,r.utcWednesday=ae,r.utcWednesdays=be,r.utcWeek=se,r.utcWeeks=W,r.utcYear=tt,r.utcYears=Ce,Object.defineProperty(r,"__esModule",{value:!0})})},{}],168:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?n(M):(r=r||self,n(r.d3=r.d3||{}))})(this,function(r){var n=0,l=0,c=0,t=1e3,f,a,o=0,u=0,h=0,i=typeof performance=="object"&&performance.now?performance:Date,s=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(L){setTimeout(L,17)};function p(){return u||(s(d),u=i.now()+h)}function d(){u=0}function y(){this._call=this._time=this._next=null}y.prototype=b.prototype={constructor:y,restart:function(L,z,E){if(typeof L!="function")throw new TypeError("callback is not a function");E=(E==null?p():+E)+(z==null?0:+z),!this._next&&a!==this&&(a?a._next=this:f=this,a=this),this._call=L,this._time=E,A()},stop:function(){this._call&&(this._call=null,this._time=1/0,A())}};function b(L,z,E){var S=new y;return S.restart(L,z,E),S}function m(){p(),++n;for(var L=f,z;L;)(z=u-L._time)>=0&&L._call.call(null,z),L=L._next;--n}function _(){u=(o=i.now())+h,n=l=0;try{m()}finally{n=0,g(),u=0}}function T(){var L=i.now(),z=L-o;z>t&&(h-=z,o=L)}function g(){for(var L,z=f,E,S=1/0;z;)z._call?(S>z._time&&(S=z._time),L=z,z=z._next):(E=z._next,z._next=null,z=L?L._next=E:f=E);a=L,A(S)}function A(L){if(!n){l&&(l=clearTimeout(l));var z=L-u;z>24?(L<1/0&&(l=setTimeout(_,L-i.now()-h)),c&&(c=clearInterval(c))):(c||(o=i.now(),c=setInterval(T,t)),n=1,s(_))}}function k(L,z,E){var S=new y;return z=z==null?0:+z,S.restart(function(C){S.stop(),L(C+z)},z,E),S}function R(L,z,E){var S=new y,C=z;return z==null?(S.restart(L,z,E),S):(z=+z,E=E==null?p():+E,S.restart(function D(F){F+=C,S.restart(D,C+=z,E),L(F)},z,E),S)}r.interval=R,r.now=p,r.timeout=k,r.timer=b,r.timerFlush=m,Object.defineProperty(r,"__esModule",{value:!0})})},{}],169:[function(e,v,M){(function(){var r={version:"3.5.17"},n=[].slice,l=function(Y){return n.call(Y)},c=this.document;function t(Y){return Y&&(Y.ownerDocument||Y.document||Y).documentElement}function f(Y){return Y&&(Y.ownerDocument&&Y.ownerDocument.defaultView||Y.document&&Y||Y.defaultView)}if(c)try{l(c.documentElement.childNodes)[0].nodeType}catch{l=function(he){for(var ye=he.length,_e=new Array(ye);ye--;)_e[ye]=he[ye];return _e}}if(Date.now||(Date.now=function(){return+new Date}),c)try{c.createElement("DIV").style.setProperty("opacity",0,"")}catch{var a=this.Element.prototype,o=a.setAttribute,u=a.setAttributeNS,h=this.CSSStyleDeclaration.prototype,i=h.setProperty;a.setAttribute=function(he,ye){o.call(this,he,ye+"")},a.setAttributeNS=function(he,ye,_e){u.call(this,he,ye,_e+"")},h.setProperty=function(he,ye,_e){i.call(this,he,ye+"",_e)}}r.ascending=s;function s(Y,he){return Y<he?-1:Y>he?1:Y>=he?0:NaN}r.descending=function(Y,he){return he<Y?-1:he>Y?1:he>=Y?0:NaN},r.min=function(Y,he){var ye=-1,_e=Y.length,Ee,De;if(arguments.length===1){for(;++ye<_e;)if((De=Y[ye])!=null&&De>=De){Ee=De;break}for(;++ye<_e;)(De=Y[ye])!=null&&Ee>De&&(Ee=De)}else{for(;++ye<_e;)if((De=he.call(Y,Y[ye],ye))!=null&&De>=De){Ee=De;break}for(;++ye<_e;)(De=he.call(Y,Y[ye],ye))!=null&&Ee>De&&(Ee=De)}return Ee},r.max=function(Y,he){var ye=-1,_e=Y.length,Ee,De;if(arguments.length===1){for(;++ye<_e;)if((De=Y[ye])!=null&&De>=De){Ee=De;break}for(;++ye<_e;)(De=Y[ye])!=null&&De>Ee&&(Ee=De)}else{for(;++ye<_e;)if((De=he.call(Y,Y[ye],ye))!=null&&De>=De){Ee=De;break}for(;++ye<_e;)(De=he.call(Y,Y[ye],ye))!=null&&De>Ee&&(Ee=De)}return Ee},r.extent=function(Y,he){var ye=-1,_e=Y.length,Ee,De,rt;if(arguments.length===1){for(;++ye<_e;)if((De=Y[ye])!=null&&De>=De){Ee=rt=De;break}for(;++ye<_e;)(De=Y[ye])!=null&&(Ee>De&&(Ee=De),rt<De&&(rt=De))}else{for(;++ye<_e;)if((De=he.call(Y,Y[ye],ye))!=null&&De>=De){Ee=rt=De;break}for(;++ye<_e;)(De=he.call(Y,Y[ye],ye))!=null&&(Ee>De&&(Ee=De),rt<De&&(rt=De))}return[Ee,rt]};function p(Y){return Y===null?NaN:+Y}function d(Y){return!isNaN(Y)}r.sum=function(Y,he){var ye=0,_e=Y.length,Ee,De=-1;if(arguments.length===1)for(;++De<_e;)d(Ee=+Y[De])&&(ye+=Ee);else for(;++De<_e;)d(Ee=+he.call(Y,Y[De],De))&&(ye+=Ee);return ye},r.mean=function(Y,he){var ye=0,_e=Y.length,Ee,De=-1,rt=_e;if(arguments.length===1)for(;++De<_e;)d(Ee=p(Y[De]))?ye+=Ee:--rt;else for(;++De<_e;)d(Ee=p(he.call(Y,Y[De],De)))?ye+=Ee:--rt;if(rt)return ye/rt},r.quantile=function(Y,he){var ye=(Y.length-1)*he+1,_e=Math.floor(ye),Ee=+Y[_e-1],De=ye-_e;return De?Ee+De*(Y[_e]-Ee):Ee},r.median=function(Y,he){var ye=[],_e=Y.length,Ee,De=-1;if(arguments.length===1)for(;++De<_e;)d(Ee=p(Y[De]))&&ye.push(Ee);else for(;++De<_e;)d(Ee=p(he.call(Y,Y[De],De)))&&ye.push(Ee);if(ye.length)return r.quantile(ye.sort(s),.5)},r.variance=function(Y,he){var ye=Y.length,_e=0,Ee,De,rt=0,$e=-1,nt=0;if(arguments.length===1)for(;++$e<ye;)d(Ee=p(Y[$e]))&&(De=Ee-_e,_e+=De/++nt,rt+=De*(Ee-_e));else for(;++$e<ye;)d(Ee=p(he.call(Y,Y[$e],$e)))&&(De=Ee-_e,_e+=De/++nt,rt+=De*(Ee-_e));if(nt>1)return rt/(nt-1)},r.deviation=function(){var Y=r.variance.apply(this,arguments);return Y&&Math.sqrt(Y)};function y(Y){return{left:function(he,ye,_e,Ee){for(arguments.length<3&&(_e=0),arguments.length<4&&(Ee=he.length);_e<Ee;){var De=_e+Ee>>>1;Y(he[De],ye)<0?_e=De+1:Ee=De}return _e},right:function(he,ye,_e,Ee){for(arguments.length<3&&(_e=0),arguments.length<4&&(Ee=he.length);_e<Ee;){var De=_e+Ee>>>1;Y(he[De],ye)>0?Ee=De:_e=De+1}return _e}}}var b=y(s);r.bisectLeft=b.left,r.bisect=r.bisectRight=b.right,r.bisector=function(Y){return y(Y.length===1?function(he,ye){return s(Y(he),ye)}:Y)},r.shuffle=function(Y,he,ye){(_e=arguments.length)<3&&(ye=Y.length,_e<2&&(he=0));for(var _e=ye-he,Ee,De;_e;)De=Math.random()*_e--|0,Ee=Y[_e+he],Y[_e+he]=Y[De+he],Y[De+he]=Ee;return Y},r.permute=function(Y,he){for(var ye=he.length,_e=new Array(ye);ye--;)_e[ye]=Y[he[ye]];return _e},r.pairs=function(Y){for(var he=0,ye=Y.length-1,_e=Y[0],Ee=new Array(ye<0?0:ye);he<ye;)Ee[he]=[_e,_e=Y[++he]];return Ee},r.transpose=function(Y){if(!(De=Y.length))return[];for(var he=-1,ye=r.min(Y,m),_e=new Array(ye);++he<ye;)for(var Ee=-1,De,rt=_e[he]=new Array(De);++Ee<De;)rt[Ee]=Y[Ee][he];return _e};function m(Y){return Y.length}r.zip=function(){return r.transpose(arguments)},r.keys=function(Y){var he=[];for(var ye in Y)he.push(ye);return he},r.values=function(Y){var he=[];for(var ye in Y)he.push(Y[ye]);return he},r.entries=function(Y){var he=[];for(var ye in Y)he.push({key:ye,value:Y[ye]});return he},r.merge=function(Y){for(var he=Y.length,ye,_e=-1,Ee=0,De,rt;++_e<he;)Ee+=Y[_e].length;for(De=new Array(Ee);--he>=0;)for(rt=Y[he],ye=rt.length;--ye>=0;)De[--Ee]=rt[ye];return De};var _=Math.abs;r.range=function(Y,he,ye){if(arguments.length<3&&(ye=1,arguments.length<2&&(he=Y,Y=0)),(he-Y)/ye===1/0)throw new Error("infinite range");var _e=[],Ee=T(_(ye)),De=-1,rt;if(Y*=Ee,he*=Ee,ye*=Ee,ye<0)for(;(rt=Y+ye*++De)>he;)_e.push(rt/Ee);else for(;(rt=Y+ye*++De)<he;)_e.push(rt/Ee);return _e};function T(Y){for(var he=1;Y*he%1;)he*=10;return he}function g(Y,he){for(var ye in he)Object.defineProperty(Y.prototype,ye,{value:he[ye],enumerable:!1})}r.map=function(Y,he){var ye=new A;if(Y instanceof A)Y.forEach(function($e,nt){ye.set($e,nt)});else if(Array.isArray(Y)){var _e=-1,Ee=Y.length,De;if(arguments.length===1)for(;++_e<Ee;)ye.set(_e,Y[_e]);else for(;++_e<Ee;)ye.set(he.call(Y,De=Y[_e],_e),De)}else for(var rt in Y)ye.set(rt,Y[rt]);return ye};function A(){this._=Object.create(null)}var k="__proto__",R="\0";g(A,{has:E,get:function(Y){return this._[L(Y)]},set:function(Y,he){return this._[L(Y)]=he},remove:S,keys:C,values:function(){var Y=[];for(var he in this._)Y.push(this._[he]);return Y},entries:function(){var Y=[];for(var he in this._)Y.push({key:z(he),value:this._[he]});return Y},size:D,empty:F,forEach:function(Y){for(var he in this._)Y.call(this,z(he),this._[he])}});function L(Y){return(Y+="")===k||Y[0]===R?R+Y:Y}function z(Y){return(Y+="")[0]===R?Y.slice(1):Y}function E(Y){return L(Y)in this._}function S(Y){return(Y=L(Y))in this._&&delete this._[Y]}function C(){var Y=[];for(var he in this._)Y.push(z(he));return Y}function D(){var Y=0;for(var he in this._)++Y;return Y}function F(){for(var Y in this._)return!1;return!0}r.nest=function(){var Y={},he=[],ye=[],_e,Ee;function De($e,nt,mt){if(mt>=he.length)return Ee?Ee.call(Y,nt):_e?nt.sort(_e):nt;for(var Tt=-1,Vt=nt.length,Yt=he[mt++],ur,Rr,ir,hr=new A,mr;++Tt<Vt;)(mr=hr.get(ur=Yt(Rr=nt[Tt])))?mr.push(Rr):hr.set(ur,[Rr]);return $e?(Rr=$e(),ir=function(Dr,yr){Rr.set(Dr,De($e,yr,mt))}):(Rr={},ir=function(Dr,yr){Rr[Dr]=De($e,yr,mt)}),hr.forEach(ir),Rr}function rt($e,nt){if(nt>=he.length)return $e;var mt=[],Tt=ye[nt++];return $e.forEach(function(Vt,Yt){mt.push({key:Vt,values:rt(Yt,nt)})}),Tt?mt.sort(function(Vt,Yt){return Tt(Vt.key,Yt.key)}):mt}return Y.map=function($e,nt){return De(nt,$e,0)},Y.entries=function($e){return rt(De(r.map,$e,0),0)},Y.key=function($e){return he.push($e),Y},Y.sortKeys=function($e){return ye[he.length-1]=$e,Y},Y.sortValues=function($e){return _e=$e,Y},Y.rollup=function($e){return Ee=$e,Y},Y},r.set=function(Y){var he=new N;if(Y)for(var ye=0,_e=Y.length;ye<_e;++ye)he.add(Y[ye]);return he};function N(){this._=Object.create(null)}g(N,{has:E,add:function(Y){return this._[L(Y+="")]=!0,Y},remove:S,values:C,size:D,empty:F,forEach:function(Y){for(var he in this._)Y.call(this,z(he))}}),r.behavior={};function G(Y){return Y}r.rebind=function(Y,he){for(var ye=1,_e=arguments.length,Ee;++ye<_e;)Y[Ee=arguments[ye]]=U(Y,he,he[Ee]);return Y};function U(Y,he,ye){return function(){var _e=ye.apply(he,arguments);return _e===he?Y:_e}}function X(Y,he){if(he in Y)return he;he=he.charAt(0).toUpperCase()+he.slice(1);for(var ye=0,_e=I.length;ye<_e;++ye){var Ee=I[ye]+he;if(Ee in Y)return Ee}}var I=["webkit","ms","moz","Moz","o","O"];function B(){}r.dispatch=function(){for(var Y=new j,he=-1,ye=arguments.length;++he<ye;)Y[arguments[he]]=H(Y);return Y};function j(){}j.prototype.on=function(Y,he){var ye=Y.indexOf("."),_e="";if(ye>=0&&(_e=Y.slice(ye+1),Y=Y.slice(0,ye)),Y)return arguments.length<2?this[Y].on(_e):this[Y].on(_e,he);if(arguments.length===2){if(he==null)for(Y in this)this.hasOwnProperty(Y)&&this[Y].on(_e,null);return this}};function H(Y){var he=[],ye=new A;function _e(){for(var Ee=he,De=-1,rt=Ee.length,$e;++De<rt;)($e=Ee[De].on)&&$e.apply(this,arguments);return Y}return _e.on=function(Ee,De){var rt=ye.get(Ee),$e;return arguments.length<2?rt&&rt.on:(rt&&(rt.on=null,he=he.slice(0,$e=he.indexOf(rt)).concat(he.slice($e+1)),ye.remove(Ee)),De&&he.push(ye.set(Ee,{on:De})),Y)},_e}r.event=null;function K(){r.event.preventDefault()}function te(){for(var Y=r.event,he;he=Y.sourceEvent;)Y=he;return Y}function J(Y){for(var he=new j,ye=0,_e=arguments.length;++ye<_e;)he[arguments[ye]]=H(he);return he.of=function(Ee,De){return function(rt){try{var $e=rt.sourceEvent=r.event;rt.target=Y,r.event=rt,he[rt.type].apply(Ee,De)}finally{r.event=$e}}},he}r.requote=function(Y){return Y.replace(oe,"\\$&")};var oe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ie={}.__proto__?function(Y,he){Y.__proto__=he}:function(Y,he){for(var ye in he)Y[ye]=he[ye]};function Q(Y){return ie(Y,ee),Y}var V=function(Y,he){return he.querySelector(Y)},se=function(Y,he){return he.querySelectorAll(Y)},re=function(Y,he){var ye=Y.matches||Y[X(Y,"matchesSelector")];return re=function(_e,Ee){return ye.call(_e,Ee)},re(Y,he)};typeof Sizzle=="function"&&(V=function(Y,he){return Sizzle(Y,he)[0]||null},se=Sizzle,re=Sizzle.matchesSelector),r.selection=function(){return r.select(c.documentElement)};var ee=r.selection.prototype=[];ee.select=function(Y){var he=[],ye,_e,Ee,De;Y=ae(Y);for(var rt=-1,$e=this.length;++rt<$e;){he.push(ye=[]),ye.parentNode=(Ee=this[rt]).parentNode;for(var nt=-1,mt=Ee.length;++nt<mt;)(De=Ee[nt])?(ye.push(_e=Y.call(De,De.__data__,nt,rt)),_e&&"__data__"in De&&(_e.__data__=De.__data__)):ye.push(null)}return Q(he)};function ae(Y){return typeof Y=="function"?Y:function(){return V(Y,this)}}ee.selectAll=function(Y){var he=[],ye,_e;Y=fe(Y);for(var Ee=-1,De=this.length;++Ee<De;)for(var rt=this[Ee],$e=-1,nt=rt.length;++$e<nt;)(_e=rt[$e])&&(he.push(ye=l(Y.call(_e,_e.__data__,$e,Ee))),ye.parentNode=_e);return Q(he)};function fe(Y){return typeof Y=="function"?Y:function(){return se(Y,this)}}var de="http://www.w3.org/1999/xhtml",pe={svg:"http://www.w3.org/2000/svg",xhtml:de,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};r.ns={prefix:pe,qualify:function(Y){var he=Y.indexOf(":"),ye=Y;return he>=0&&(ye=Y.slice(0,he))!=="xmlns"&&(Y=Y.slice(he+1)),pe.hasOwnProperty(ye)?{space:pe[ye],local:Y}:Y}},ee.attr=function(Y,he){if(arguments.length<2){if(typeof Y=="string"){var ye=this.node();return Y=r.ns.qualify(Y),Y.local?ye.getAttributeNS(Y.space,Y.local):ye.getAttribute(Y)}for(he in Y)this.each(W(he,Y[he]));return this}return this.each(W(Y,he))};function W(Y,he){Y=r.ns.qualify(Y);function ye(){this.removeAttribute(Y)}function _e(){this.removeAttributeNS(Y.space,Y.local)}function Ee(){this.setAttribute(Y,he)}function De(){this.setAttributeNS(Y.space,Y.local,he)}function rt(){var nt=he.apply(this,arguments);nt==null?this.removeAttribute(Y):this.setAttribute(Y,nt)}function $e(){var nt=he.apply(this,arguments);nt==null?this.removeAttributeNS(Y.space,Y.local):this.setAttributeNS(Y.space,Y.local,nt)}return he==null?Y.local?_e:ye:typeof he=="function"?Y.local?$e:rt:Y.local?De:Ee}function ue(Y){return Y.trim().replace(/\s+/g," ")}ee.classed=function(Y,he){if(arguments.length<2){if(typeof Y=="string"){var ye=this.node(),_e=(Y=be(Y)).length,Ee=-1;if(he=ye.classList){for(;++Ee<_e;)if(!he.contains(Y[Ee]))return!1}else for(he=ye.getAttribute("class");++Ee<_e;)if(!me(Y[Ee]).test(he))return!1;return!0}for(he in Y)this.each(ke(he,Y[he]));return this}return this.each(ke(Y,he))};function me(Y){return new RegExp("(?:^|\\s+)"+r.requote(Y)+"(?:\\s+|$)","g")}function be(Y){return(Y+"").trim().split(/^|\s+/)}function ke(Y,he){Y=be(Y).map(Pe);var ye=Y.length;function _e(){for(var De=-1;++De<ye;)Y[De](this,he)}function Ee(){for(var De=-1,rt=he.apply(this,arguments);++De<ye;)Y[De](this,rt)}return typeof he=="function"?Ee:_e}function Pe(Y){var he=me(Y);return function(ye,_e){if(Ee=ye.classList)return _e?Ee.add(Y):Ee.remove(Y);var Ee=ye.getAttribute("class")||"";_e?(he.lastIndex=0,he.test(Ee)||ye.setAttribute("class",ue(Ee+" "+Y))):ye.setAttribute("class",ue(Ee.replace(he," ")))}}ee.style=function(Y,he,ye){var _e=arguments.length;if(_e<3){if(typeof Y!="string"){_e<2&&(he="");for(ye in Y)this.each(je(ye,Y[ye],he));return this}if(_e<2){var Ee=this.node();return f(Ee).getComputedStyle(Ee,null).getPropertyValue(Y)}ye=""}return this.each(je(Y,he,ye))};function je(Y,he,ye){function _e(){this.style.removeProperty(Y)}function Ee(){this.style.setProperty(Y,he,ye)}function De(){var rt=he.apply(this,arguments);rt==null?this.style.removeProperty(Y):this.style.setProperty(Y,rt,ye)}return he==null?_e:typeof he=="function"?De:Ee}ee.property=function(Y,he){if(arguments.length<2){if(typeof Y=="string")return this.node()[Y];for(he in Y)this.each(ze(he,Y[he]));return this}return this.each(ze(Y,he))};function ze(Y,he){function ye(){delete this[Y]}function _e(){this[Y]=he}function Ee(){var De=he.apply(this,arguments);De==null?delete this[Y]:this[Y]=De}return he==null?ye:typeof he=="function"?Ee:_e}ee.text=function(Y){return arguments.length?this.each(typeof Y=="function"?function(){var he=Y.apply(this,arguments);this.textContent=he??""}:Y==null?function(){this.textContent=""}:function(){this.textContent=Y}):this.node().textContent},ee.html=function(Y){return arguments.length?this.each(typeof Y=="function"?function(){var he=Y.apply(this,arguments);this.innerHTML=he??""}:Y==null?function(){this.innerHTML=""}:function(){this.innerHTML=Y}):this.node().innerHTML},ee.append=function(Y){return Y=Ze(Y),this.select(function(){return this.appendChild(Y.apply(this,arguments))})};function Ze(Y){function he(){var _e=this.ownerDocument,Ee=this.namespaceURI;return Ee===de&&_e.documentElement.namespaceURI===de?_e.createElement(Y):_e.createElementNS(Ee,Y)}function ye(){return this.ownerDocument.createElementNS(Y.space,Y.local)}return typeof Y=="function"?Y:(Y=r.ns.qualify(Y)).local?ye:he}ee.insert=function(Y,he){return Y=Ze(Y),he=ae(he),this.select(function(){return this.insertBefore(Y.apply(this,arguments),he.apply(this,arguments)||null)})},ee.remove=function(){return this.each(tt)};function tt(){var Y=this.parentNode;Y&&Y.removeChild(this)}ee.data=function(Y,he){var ye=-1,_e=this.length,Ee,De;if(!arguments.length){for(Y=new Array(_e=(Ee=this[0]).length);++ye<_e;)(De=Ee[ye])&&(Y[ye]=De.__data__);return Y}function rt(Tt,Vt){var Yt,ur=Tt.length,Rr=Vt.length,ir=Math.min(ur,Rr),hr=new Array(Rr),mr=new Array(Rr),Dr=new Array(ur),yr,kr;if(he){var gn=new A,vn=new Array(ur),hn;for(Yt=-1;++Yt<ur;)(yr=Tt[Yt])&&(gn.has(hn=he.call(yr,yr.__data__,Yt))?Dr[Yt]=yr:gn.set(hn,yr),vn[Yt]=hn);for(Yt=-1;++Yt<Rr;)(yr=gn.get(hn=he.call(Vt,kr=Vt[Yt],Yt)))?yr!==!0&&(hr[Yt]=yr,yr.__data__=kr):mr[Yt]=Ce(kr),gn.set(hn,!0);for(Yt=-1;++Yt<ur;)Yt in vn&&gn.get(vn[Yt])!==!0&&(Dr[Yt]=Tt[Yt])}else{for(Yt=-1;++Yt<ir;)yr=Tt[Yt],kr=Vt[Yt],yr?(yr.__data__=kr,hr[Yt]=yr):mr[Yt]=Ce(kr);for(;Yt<Rr;++Yt)mr[Yt]=Ce(Vt[Yt]);for(;Yt<ur;++Yt)Dr[Yt]=Tt[Yt]}mr.update=hr,mr.parentNode=hr.parentNode=Dr.parentNode=Tt.parentNode,$e.push(mr),nt.push(hr),mt.push(Dr)}var $e=At([]),nt=Q([]),mt=Q([]);if(typeof Y=="function")for(;++ye<_e;)rt(Ee=this[ye],Y.call(Ee,Ee.parentNode.__data__,ye));else for(;++ye<_e;)rt(Ee=this[ye],Y);return nt.enter=function(){return $e},nt.exit=function(){return mt},nt};function Ce(Y){return{__data__:Y}}ee.datum=function(Y){return arguments.length?this.property("__data__",Y):this.property("__data__")},ee.filter=function(Y){var he=[],ye,_e,Ee;typeof Y!="function"&&(Y=Ae(Y));for(var De=0,rt=this.length;De<rt;De++){he.push(ye=[]),ye.parentNode=(_e=this[De]).parentNode;for(var $e=0,nt=_e.length;$e<nt;$e++)(Ee=_e[$e])&&Y.call(Ee,Ee.__data__,$e,De)&&ye.push(Ee)}return Q(he)};function Ae(Y){return function(){return re(this,Y)}}ee.order=function(){for(var Y=-1,he=this.length;++Y<he;)for(var ye=this[Y],_e=ye.length-1,Ee=ye[_e],De;--_e>=0;)(De=ye[_e])&&(Ee&&Ee!==De.nextSibling&&Ee.parentNode.insertBefore(De,Ee),Ee=De);return this},ee.sort=function(Y){Y=Ne.apply(this,arguments);for(var he=-1,ye=this.length;++he<ye;)this[he].sort(Y);return this.order()};function Ne(Y){return arguments.length||(Y=s),function(he,ye){return he&&ye?Y(he.__data__,ye.__data__):!he-!ye}}ee.each=function(Y){return qe(this,function(he,ye,_e){Y.call(he,he.__data__,ye,_e)})};function qe(Y,he){for(var ye=0,_e=Y.length;ye<_e;ye++)for(var Ee=Y[ye],De=0,rt=Ee.length,$e;De<rt;De++)($e=Ee[De])&&he($e,De,ye);return Y}ee.call=function(Y){var he=l(arguments);return Y.apply(he[0]=this,he),this},ee.empty=function(){return!this.node()},ee.node=function(){for(var Y=0,he=this.length;Y<he;Y++)for(var ye=this[Y],_e=0,Ee=ye.length;_e<Ee;_e++){var De=ye[_e];if(De)return De}return null},ee.size=function(){var Y=0;return qe(this,function(){++Y}),Y};function At(Y){return ie(Y,kt),Y}var kt=[];r.selection.enter=At,r.selection.enter.prototype=kt,kt.append=ee.append,kt.empty=ee.empty,kt.node=ee.node,kt.call=ee.call,kt.size=ee.size,kt.select=function(Y){for(var he=[],ye,_e,Ee,De,rt,$e=-1,nt=this.length;++$e<nt;){Ee=(De=this[$e]).update,he.push(ye=[]),ye.parentNode=De.parentNode;for(var mt=-1,Tt=De.length;++mt<Tt;)(rt=De[mt])?(ye.push(Ee[mt]=_e=Y.call(De.parentNode,rt.__data__,mt,$e)),_e.__data__=rt.__data__):ye.push(null)}return Q(he)},kt.insert=function(Y,he){return arguments.length<2&&(he=Ve(this)),ee.insert.call(this,Y,he)};function Ve(Y){var he,ye;return function(_e,Ee,De){var rt=Y[De].update,$e=rt.length,nt;for(De!=ye&&(ye=De,he=0),Ee>=he&&(he=Ee+1);!(nt=rt[he])&&++he<$e;);return nt}}r.select=function(Y){var he;return typeof Y=="string"?(he=[V(Y,c)],he.parentNode=c.documentElement):(he=[Y],he.parentNode=t(Y)),Q([he])},r.selectAll=function(Y){var he;return typeof Y=="string"?(he=l(se(Y,c)),he.parentNode=c.documentElement):(he=l(Y),he.parentNode=null),Q([he])},ee.on=function(Y,he,ye){var _e=arguments.length;if(_e<3){if(typeof Y!="string"){_e<2&&(he=!1);for(ye in Y)this.each(ft(ye,Y[ye],he));return this}if(_e<2)return(_e=this.node()["__on"+Y])&&_e._;ye=!1}return this.each(ft(Y,he,ye))};function ft(Y,he,ye){var _e="__on"+Y,Ee=Y.indexOf("."),De=Wt;Ee>0&&(Y=Y.slice(0,Ee));var rt=St.get(Y);rt&&(Y=rt,De=Qt);function $e(){var Tt=this[_e];Tt&&(this.removeEventListener(Y,Tt,Tt.$),delete this[_e])}function nt(){var Tt=De(he,l(arguments));$e.call(this),this.addEventListener(Y,this[_e]=Tt,Tt.$=ye),Tt._=he}function mt(){var Tt=new RegExp("^__on([^.]+)"+r.requote(Y)+"$"),Vt;for(var Yt in this)if(Vt=Yt.match(Tt)){var ur=this[Yt];this.removeEventListener(Vt[1],ur,ur.$),delete this[Yt]}}return Ee?he?nt:$e:he?B:mt}var St=r.map({mouseenter:"mouseover",mouseleave:"mouseout"});c&&St.forEach(function(Y){"on"+Y in c&&St.remove(Y)});function Wt(Y,he){return function(ye){var _e=r.event;r.event=ye,he[0]=this.__data__;try{Y.apply(this,he)}finally{r.event=_e}}}function Qt(Y,he){var ye=Wt(Y,he);return function(_e){var Ee=this,De=_e.relatedTarget;(!De||De!==Ee&&!(De.compareDocumentPosition(Ee)&8))&&ye.call(Ee,_e)}}var zt,$t=0;function rr(Y){var he=".dragsuppress-"+ ++$t,ye="click"+he,_e=r.select(f(Y)).on("touchmove"+he,K).on("dragstart"+he,K).on("selectstart"+he,K);if(zt==null&&(zt="onselectstart"in Y?!1:X(Y.style,"userSelect")),zt){var Ee=t(Y).style,De=Ee[zt];Ee[zt]="none"}return function(rt){if(_e.on(he,null),zt&&(Ee[zt]=De),rt){var $e=function(){_e.on(ye,null)};_e.on(ye,function(){K(),$e()},!0),setTimeout($e,0)}}}r.mouse=function(Y){return Lt(Y,te())};var Pt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Lt(Y,he){he.changedTouches&&(he=he.changedTouches[0]);var ye=Y.ownerSVGElement||Y;if(ye.createSVGPoint){var _e=ye.createSVGPoint();if(Pt<0){var Ee=f(Y);if(Ee.scrollX||Ee.scrollY){ye=r.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var De=ye[0][0].getScreenCTM();Pt=!(De.f||De.e),ye.remove()}}return Pt?(_e.x=he.pageX,_e.y=he.pageY):(_e.x=he.clientX,_e.y=he.clientY),_e=_e.matrixTransform(Y.getScreenCTM().inverse()),[_e.x,_e.y]}var rt=Y.getBoundingClientRect();return[he.clientX-rt.left-Y.clientLeft,he.clientY-rt.top-Y.clientTop]}r.touch=function(Y,he,ye){if(arguments.length<3&&(ye=he,he=te().changedTouches),he){for(var _e=0,Ee=he.length,De;_e<Ee;++_e)if((De=he[_e]).identifier===ye)return Lt(Y,De)}},r.behavior.drag=function(){var Y=J(Ee,"drag","dragstart","dragend"),he=null,ye=De(B,r.mouse,f,"mousemove","mouseup"),_e=De(dt,r.touch,G,"touchmove","touchend");function Ee(){this.on("mousedown.drag",ye).on("touchstart.drag",_e)}function De(rt,$e,nt,mt,Tt){return function(){var Vt=this,Yt=r.event.target.correspondingElement||r.event.target,ur=Vt.parentNode,Rr=Y.of(Vt,arguments),ir=0,hr=rt(),mr=".drag"+(hr==null?"":"-"+hr),Dr,yr=r.select(nt(Yt)).on(mt+mr,vn).on(Tt+mr,hn),kr=rr(Yt),gn=$e(ur,hr);he?(Dr=he.apply(Vt,arguments),Dr=[Dr.x-gn[0],Dr.y-gn[1]]):Dr=[0,0],Rr({type:"dragstart"});function vn(){var sn=$e(ur,hr),Xn,ea;sn&&(Xn=sn[0]-gn[0],ea=sn[1]-gn[1],ir|=Xn|ea,gn=sn,Rr({type:"drag",x:sn[0]+Dr[0],y:sn[1]+Dr[1],dx:Xn,dy:ea}))}function hn(){$e(ur,hr)&&(yr.on(mt+mr,null).on(Tt+mr,null),kr(ir),Rr({type:"dragend"}))}}}return Ee.origin=function(rt){return arguments.length?(he=rt,Ee):he},r.rebind(Ee,Y,"on")};function dt(){return r.event.changedTouches[0].identifier}r.touches=function(Y,he){return arguments.length<2&&(he=te().touches),he?l(he).map(function(ye){var _e=Lt(Y,ye);return _e.identifier=ye.identifier,_e}):[]};var lt=1e-6,Te=lt*lt,Le=Math.PI,Be=2*Le,et=Be-lt,Me=Le/2,Ie=Le/180,He=180/Le;function Xe(Y){return Y>0?1:Y<0?-1:0}function ht(Y,he,ye){return(he[0]-Y[0])*(ye[1]-Y[1])-(he[1]-Y[1])*(ye[0]-Y[0])}function it(Y){return Y>1?0:Y<-1?Le:Math.acos(Y)}function Ge(Y){return Y>1?Me:Y<-1?-Me:Math.asin(Y)}function ot(Y){return((Y=Math.exp(Y))-1/Y)/2}function Je(Y){return((Y=Math.exp(Y))+1/Y)/2}function st(Y){return((Y=Math.exp(2*Y))-1)/(Y+1)}function It(Y){return(Y=Math.sin(Y/2))*Y}var Ft=Math.SQRT2,nr=2,We=4;r.interpolateZoom=function(Y,he){var ye=Y[0],_e=Y[1],Ee=Y[2],De=he[0],rt=he[1],$e=he[2],nt=De-ye,mt=rt-_e,Tt=nt*nt+mt*mt,Vt,Yt;if(Tt<Te)Yt=Math.log($e/Ee)/Ft,Vt=function(Dr){return[ye+Dr*nt,_e+Dr*mt,Ee*Math.exp(Ft*Dr*Yt)]};else{var ur=Math.sqrt(Tt),Rr=($e*$e-Ee*Ee+We*Tt)/(2*Ee*nr*ur),ir=($e*$e-Ee*Ee-We*Tt)/(2*$e*nr*ur),hr=Math.log(Math.sqrt(Rr*Rr+1)-Rr),mr=Math.log(Math.sqrt(ir*ir+1)-ir);Yt=(mr-hr)/Ft,Vt=function(Dr){var yr=Dr*Yt,kr=Je(hr),gn=Ee/(nr*ur)*(kr*st(Ft*yr+hr)-ot(hr));return[ye+gn*nt,_e+gn*mt,Ee*kr/Je(Ft*yr+hr)]}}return Vt.duration=Yt*1e3,Vt},r.behavior.zoom=function(){var Y={x:0,y:0,k:1},he,ye,_e,Ee=[960,500],De=Fe,rt=250,$e=0,nt="mousedown.zoom",mt="mousemove.zoom",Tt="mouseup.zoom",Vt,Yt="touchstart.zoom",ur,Rr=J(yr,"zoomstart","zoom","zoomend"),ir,hr,mr,Dr;Mt||(Mt="onwheel"in c?(_t=function(){return-r.event.deltaY*(r.event.deltaMode?120:1)},"wheel"):"onmousewheel"in c?(_t=function(){return r.event.wheelDelta},"mousewheel"):(_t=function(){return-r.event.detail},"MozMousePixelScroll"));function yr(yn){yn.on(nt,ma).on(Mt+".zoom",$n).on("dblclick.zoom",ca).on(Yt,En)}yr.event=function(yn){yn.each(function(){var Hn=Rr.of(this,arguments),Ha=Y;ic?r.select(this).transition().each("start.zoom",function(){Y=this.__chart__||{x:0,y:0,k:1},ea(Hn)}).tween("zoom:zoom",function(){var gi=Ee[0],Pi=Ee[1],mo=ye?ye[0]:gi/2,Do=ye?ye[1]:Pi/2,tl=r.interpolateZoom([(mo-Y.x)/Y.k,(Do-Y.y)/Y.k,gi/Y.k],[(mo-Ha.x)/Ha.k,(Do-Ha.y)/Ha.k,gi/Ha.k]);return function(Os){var Fs=tl(Os),su=gi/Fs[2];this.__chart__=Y={x:mo-Fs[0]*su,y:Do-Fs[1]*su,k:su},La(Hn)}}).each("interrupt.zoom",function(){da(Hn)}).each("end.zoom",function(){da(Hn)}):(this.__chart__=Y,ea(Hn),La(Hn),da(Hn))})},yr.translate=function(yn){return arguments.length?(Y={x:+yn[0],y:+yn[1],k:Y.k},Xn(),yr):[Y.x,Y.y]},yr.scale=function(yn){return arguments.length?(Y={x:Y.x,y:Y.y,k:null},vn(+yn),Xn(),yr):Y.k},yr.scaleExtent=function(yn){return arguments.length?(De=yn==null?Fe:[+yn[0],+yn[1]],yr):De},yr.center=function(yn){return arguments.length?(_e=yn&&[+yn[0],+yn[1]],yr):_e},yr.size=function(yn){return arguments.length?(Ee=yn&&[+yn[0],+yn[1]],yr):Ee},yr.duration=function(yn){return arguments.length?(rt=+yn,yr):rt},yr.x=function(yn){return arguments.length?(hr=yn,ir=yn.copy(),Y={x:0,y:0,k:1},yr):hr},yr.y=function(yn){return arguments.length?(Dr=yn,mr=yn.copy(),Y={x:0,y:0,k:1},yr):Dr};function kr(yn){return[(yn[0]-Y.x)/Y.k,(yn[1]-Y.y)/Y.k]}function gn(yn){return[yn[0]*Y.k+Y.x,yn[1]*Y.k+Y.y]}function vn(yn){Y.k=Math.max(De[0],Math.min(De[1],yn))}function hn(yn,Hn){Hn=gn(Hn),Y.x+=yn[0]-Hn[0],Y.y+=yn[1]-Hn[1]}function sn(yn,Hn,Ha,gi){yn.__chart__={x:Y.x,y:Y.y,k:Y.k},vn(Math.pow(2,gi)),hn(ye=Hn,Ha),yn=r.select(yn),rt>0&&(yn=yn.transition().duration(rt)),yn.call(yr.event)}function Xn(){hr&&hr.domain(ir.range().map(function(yn){return(yn-Y.x)/Y.k}).map(ir.invert)),Dr&&Dr.domain(mr.range().map(function(yn){return(yn-Y.y)/Y.k}).map(mr.invert))}function ea(yn){$e++||yn({type:"zoomstart"})}function La(yn){Xn(),yn({type:"zoom",scale:Y.k,translate:[Y.x,Y.y]})}function da(yn){--$e||(yn({type:"zoomend"}),ye=null)}function ma(){var yn=this,Hn=Rr.of(yn,arguments),Ha=0,gi=r.select(f(yn)).on(mt,Do).on(Tt,tl),Pi=kr(r.mouse(yn)),mo=rr(yn);Qh.call(yn),ea(Hn);function Do(){Ha=1,hn(r.mouse(yn),Pi),La(Hn)}function tl(){gi.on(mt,null).on(Tt,null),mo(Ha),da(Hn)}}function En(){var yn=this,Hn=Rr.of(yn,arguments),Ha={},gi=0,Pi,mo=".zoom-"+r.event.changedTouches[0].identifier,Do="touchmove"+mo,tl="touchend"+mo,Os=[],Fs=r.select(yn),su=rr(yn);kl(),ea(Hn),Fs.on(nt,null).on(Yt,kl);function io(){var wu=r.touches(yn);return Pi=Y.k,wu.forEach(function(rl){rl.identifier in Ha&&(Ha[rl.identifier]=kr(rl))}),wu}function kl(){var wu=r.event.target;r.select(wu).on(Do,lu).on(tl,Cp),Os.push(wu);for(var rl=r.event.changedTouches,Ml=0,Sl=rl.length;Ml<Sl;++Ml)Ha[rl[Ml].identifier]=null;var Zl=io(),Qf=Date.now();if(Zl.length===1){if(Qf-ur<500){var qf=Zl[0];sn(yn,qf,Ha[qf.identifier],Math.floor(Math.log(Y.k)/Math.LN2)+1),K()}ur=Qf}else if(Zl.length>1){var qf=Zl[0],Xo=Zl[1],sc=qf[0]-Xo[0],kd=qf[1]-Xo[1];gi=sc*sc+kd*kd}}function lu(){var wu=r.touches(yn),rl,Ml,Sl,Zl;Qh.call(yn);for(var Qf=0,qf=wu.length;Qf<qf;++Qf,Zl=null)if(Sl=wu[Qf],Zl=Ha[Sl.identifier]){if(Ml)break;rl=Sl,Ml=Zl}if(Zl){var Xo=(Xo=Sl[0]-rl[0])*Xo+(Xo=Sl[1]-rl[1])*Xo,sc=gi&&Math.sqrt(Xo/gi);rl=[(rl[0]+Sl[0])/2,(rl[1]+Sl[1])/2],Ml=[(Ml[0]+Zl[0])/2,(Ml[1]+Zl[1])/2],vn(sc*Pi)}ur=null,hn(rl,Ml),La(Hn)}function Cp(){if(r.event.touches.length){for(var wu=r.event.changedTouches,rl=0,Ml=wu.length;rl<Ml;++rl)delete Ha[wu[rl].identifier];for(var Sl in Ha)return void io()}r.selectAll(Os).on(mo,null),Fs.on(nt,ma).on(Yt,En),su(),da(Hn)}}function $n(){var yn=Rr.of(this,arguments);Vt?clearTimeout(Vt):(Qh.call(this),he=kr(ye=_e||r.mouse(this)),ea(yn)),Vt=setTimeout(function(){Vt=null,da(yn)},50),K(),vn(Math.pow(2,_t()*.002)*Y.k),hn(ye,he),La(yn)}function ca(){var yn=r.mouse(this),Hn=Math.log(Y.k)/Math.LN2;sn(this,yn,kr(yn),r.event.shiftKey?Math.ceil(Hn)-1:Math.floor(Hn)+1)}return r.rebind(yr,Rr,"on")};var Fe=[0,1/0],_t,Mt;r.color=wt;function wt(){}wt.prototype.toString=function(){return this.rgb()+""},r.hsl=Dt;function Dt(Y,he,ye){return this instanceof Dt?(this.h=+Y,this.s=+he,void(this.l=+ye)):arguments.length<2?Y instanceof Dt?new Dt(Y.h,Y.s,Y.l):wn(""+Y,Sn,Dt):new Dt(Y,he,ye)}var Rt=Dt.prototype=new wt;Rt.brighter=function(Y){return Y=Math.pow(.7,arguments.length?Y:1),new Dt(this.h,this.s,this.l/Y)},Rt.darker=function(Y){return Y=Math.pow(.7,arguments.length?Y:1),new Dt(this.h,this.s,Y*this.l)},Rt.rgb=function(){return Bt(this.h,this.s,this.l)};function Bt(Y,he,ye){var _e,Ee;Y=isNaN(Y)?0:(Y%=360)<0?Y+360:Y,he=isNaN(he)||he<0?0:he>1?1:he,ye=ye<0?0:ye>1?1:ye,Ee=ye<=.5?ye*(1+he):ye+he-ye*he,_e=2*ye-Ee;function De($e){return $e>360?$e-=360:$e<0&&($e+=360),$e<60?_e+(Ee-_e)*$e/60:$e<180?Ee:$e<240?_e+(Ee-_e)*(240-$e)/60:_e}function rt($e){return Math.round(De($e)*255)}return new Lr(rt(Y+120),rt(Y),rt(Y-120))}r.hcl=Nt;function Nt(Y,he,ye){return this instanceof Nt?(this.h=+Y,this.c=+he,void(this.l=+ye)):arguments.length<2?Y instanceof Nt?new Nt(Y.h,Y.c,Y.l):Y instanceof Zt?An(Y.l,Y.a,Y.b):An((Y=un((Y=r.rgb(Y)).r,Y.g,Y.b)).l,Y.a,Y.b):new Nt(Y,he,ye)}var er=Nt.prototype=new wt;er.brighter=function(Y){return new Nt(this.h,this.c,Math.min(100,this.l+_r*(arguments.length?Y:1)))},er.darker=function(Y){return new Nt(this.h,this.c,Math.max(0,this.l-_r*(arguments.length?Y:1)))},er.rgb=function(){return qt(this.h,this.c,this.l).rgb()};function qt(Y,he,ye){return isNaN(Y)&&(Y=0),isNaN(he)&&(he=0),new Zt(ye,Math.cos(Y*=Ie)*he,Math.sin(Y)*he)}r.lab=Zt;function Zt(Y,he,ye){return this instanceof Zt?(this.l=+Y,this.a=+he,void(this.b=+ye)):arguments.length<2?Y instanceof Zt?new Zt(Y.l,Y.a,Y.b):Y instanceof Nt?qt(Y.h,Y.c,Y.l):un((Y=Lr(Y)).r,Y.g,Y.b):new Zt(Y,he,ye)}var _r=18,Gr=.95047,zr=1,Or=1.08883,Mn=Zt.prototype=new wt;Mn.brighter=function(Y){return new Zt(Math.min(100,this.l+_r*(arguments.length?Y:1)),this.a,this.b)},Mn.darker=function(Y){return new Zt(Math.max(0,this.l-_r*(arguments.length?Y:1)),this.a,this.b)},Mn.rgb=function(){return Yn(this.l,this.a,this.b)};function Yn(Y,he,ye){var _e=(Y+16)/116,Ee=_e+he/500,De=_e-ye/200;return Ee=Bn(Ee)*Gr,_e=Bn(_e)*zr,De=Bn(De)*Or,new Lr(Nr(3.2404542*Ee-1.5371385*_e-.4985314*De),Nr(-.969266*Ee+1.8760108*_e+.041556*De),Nr(.0556434*Ee-.2040259*_e+1.0572252*De))}function An(Y,he,ye){return Y>0?new Nt(Math.atan2(ye,he)*He,Math.sqrt(he*he+ye*ye),Y):new Nt(NaN,NaN,Y)}function Bn(Y){return Y>.206893034?Y*Y*Y:(Y-4/29)/7.787037}function jn(Y){return Y>.008856?Math.pow(Y,1/3):7.787037*Y+4/29}function Nr(Y){return Math.round(255*(Y<=.00304?12.92*Y:1.055*Math.pow(Y,1/2.4)-.055))}r.rgb=Lr;function Lr(Y,he,ye){return this instanceof Lr?(this.r=~~Y,this.g=~~he,void(this.b=~~ye)):arguments.length<2?Y instanceof Lr?new Lr(Y.r,Y.g,Y.b):wn(""+Y,Lr,Bt):new Lr(Y,he,ye)}function Ln(Y){return new Lr(Y>>16,Y>>8&255,Y&255)}function dn(Y){return Ln(Y)+""}var xn=Lr.prototype=new wt;xn.brighter=function(Y){Y=Math.pow(.7,arguments.length?Y:1);var he=this.r,ye=this.g,_e=this.b,Ee=30;return!he&&!ye&&!_e?new Lr(Ee,Ee,Ee):(he&&he<Ee&&(he=Ee),ye&&ye<Ee&&(ye=Ee),_e&&_e<Ee&&(_e=Ee),new Lr(Math.min(255,he/Y),Math.min(255,ye/Y),Math.min(255,_e/Y)))},xn.darker=function(Y){return Y=Math.pow(.7,arguments.length?Y:1),new Lr(Y*this.r,Y*this.g,Y*this.b)},xn.hsl=function(){return Sn(this.r,this.g,this.b)},xn.toString=function(){return"#"+tn(this.r)+tn(this.g)+tn(this.b)};function tn(Y){return Y<16?"0"+Math.max(0,Y).toString(16):Math.min(255,Y).toString(16)}function wn(Y,he,ye){var _e=0,Ee=0,De=0,rt,$e,nt;if(rt=/([a-z]+)\((.*)\)/.exec(Y=Y.toLowerCase()),rt)switch($e=rt[2].split(","),rt[1]){case"hsl":return ye(parseFloat($e[0]),parseFloat($e[1])/100,parseFloat($e[2])/100);case"rgb":return he(Gt($e[0]),Gt($e[1]),Gt($e[2]))}return(nt=cr.get(Y))?he(nt.r,nt.g,nt.b):(Y!=null&&Y.charAt(0)==="#"&&!isNaN(nt=parseInt(Y.slice(1),16))&&(Y.length===4?(_e=(nt&3840)>>4,_e=_e>>4|_e,Ee=nt&240,Ee=Ee>>4|Ee,De=nt&15,De=De<<4|De):Y.length===7&&(_e=(nt&16711680)>>16,Ee=(nt&65280)>>8,De=nt&255)),he(_e,Ee,De))}function Sn(Y,he,ye){var _e=Math.min(Y/=255,he/=255,ye/=255),Ee=Math.max(Y,he,ye),De=Ee-_e,rt,$e,nt=(Ee+_e)/2;return De?($e=nt<.5?De/(Ee+_e):De/(2-Ee-_e),Y==Ee?rt=(he-ye)/De+(he<ye?6:0):he==Ee?rt=(ye-Y)/De+2:rt=(Y-he)/De+4,rt*=60):(rt=NaN,$e=nt>0&&nt<1?0:rt),new Dt(rt,$e,nt)}function un(Y,he,ye){Y=vt(Y),he=vt(he),ye=vt(ye);var _e=jn((.4124564*Y+.3575761*he+.1804375*ye)/Gr),Ee=jn((.2126729*Y+.7151522*he+.072175*ye)/zr),De=jn((.0193339*Y+.119192*he+.9503041*ye)/Or);return Zt(116*Ee-16,500*(_e-Ee),200*(Ee-De))}function vt(Y){return(Y/=255)<=.04045?Y/12.92:Math.pow((Y+.055)/1.055,2.4)}function Gt(Y){var he=parseFloat(Y);return Y.charAt(Y.length-1)==="%"?Math.round(he*2.55):he}var cr=r.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});cr.forEach(function(Y,he){cr.set(Y,Ln(he))});function Er(Y){return typeof Y=="function"?Y:function(){return Y}}r.functor=Er,r.xhr=Wr(G);function Wr(Y){return function(he,ye,_e){return arguments.length===2&&typeof ye=="function"&&(_e=ye,ye=null),Vr(he,ye,Y,_e)}}function Vr(Y,he,ye,_e){var Ee={},De=r.dispatch("beforesend","progress","load","error"),rt={},$e=new XMLHttpRequest,nt=null;this.XDomainRequest&&!("withCredentials"in $e)&&/^(http(s)?:)?\/\//.test(Y)&&($e=new XDomainRequest),"onload"in $e?$e.onload=$e.onerror=mt:$e.onreadystatechange=function(){$e.readyState>3&&mt()};function mt(){var Tt=$e.status,Vt;if(!Tt&&Hr($e)||Tt>=200&&Tt<300||Tt===304){try{Vt=ye.call(Ee,$e)}catch(Yt){De.error.call(Ee,Yt);return}De.load.call(Ee,Vt)}else De.error.call(Ee,$e)}return $e.onprogress=function(Tt){var Vt=r.event;r.event=Tt;try{De.progress.call(Ee,$e)}finally{r.event=Vt}},Ee.header=function(Tt,Vt){return Tt=(Tt+"").toLowerCase(),arguments.length<2?rt[Tt]:(Vt==null?delete rt[Tt]:rt[Tt]=Vt+"",Ee)},Ee.mimeType=function(Tt){return arguments.length?(he=Tt==null?null:Tt+"",Ee):he},Ee.responseType=function(Tt){return arguments.length?(nt=Tt,Ee):nt},Ee.response=function(Tt){return ye=Tt,Ee},["get","post"].forEach(function(Tt){Ee[Tt]=function(){return Ee.send.apply(Ee,[Tt].concat(l(arguments)))}}),Ee.send=function(Tt,Vt,Yt){if(arguments.length===2&&typeof Vt=="function"&&(Yt=Vt,Vt=null),$e.open(Tt,Y,!0),he!=null&&!("accept"in rt)&&(rt.accept=he+",*/*"),$e.setRequestHeader)for(var ur in rt)$e.setRequestHeader(ur,rt[ur]);return he!=null&&$e.overrideMimeType&&$e.overrideMimeType(he),nt!=null&&($e.responseType=nt),Yt!=null&&Ee.on("error",Yt).on("load",function(Rr){Yt(null,Rr)}),De.beforesend.call(Ee,$e),$e.send(Vt??null),Ee},Ee.abort=function(){return $e.abort(),Ee},r.rebind(Ee,De,"on"),_e==null?Ee:Ee.get(Qr(_e))}function Qr(Y){return Y.length===1?function(he,ye){Y(he==null?ye:null)}:Y}function Hr(Y){var he=Y.responseType;return he&&he!=="text"?Y.response:Y.responseText}r.dsv=function(Y,he){var ye=new RegExp('["'+Y+`
]`),_e=Y.charCodeAt(0);function Ee(mt,Tt,Vt){arguments.length<3&&(Vt=Tt,Tt=null);var Yt=Vr(mt,he,Tt==null?De:rt(Tt),Vt);return Yt.row=function(ur){return arguments.length?Yt.response((Tt=ur)==null?De:rt(ur)):Tt},Yt}function De(mt){return Ee.parse(mt.responseText)}function rt(mt){return function(Tt){return Ee.parse(Tt.responseText,mt)}}Ee.parse=function(mt,Tt){var Vt;return Ee.parseRows(mt,function(Yt,ur){if(Vt)return Vt(Yt,ur-1);var Rr=new Function("d","return {"+Yt.map(function(ir,hr){return JSON.stringify(ir)+": d["+hr+"]"}).join(",")+"}");Vt=Tt?function(ir,hr){return Tt(Rr(ir),hr)}:Rr})},Ee.parseRows=function(mt,Tt){var Vt={},Yt={},ur=[],Rr=mt.length,ir=0,hr=0,mr,Dr;function yr(){if(ir>=Rr)return Yt;if(Dr)return Dr=!1,Vt;var gn=ir;if(mt.charCodeAt(gn)===34){for(var vn=gn;vn++<Rr;)if(mt.charCodeAt(vn)===34){if(mt.charCodeAt(vn+1)!==34)break;++vn}ir=vn+2;var hn=mt.charCodeAt(vn+1);return hn===13?(Dr=!0,mt.charCodeAt(vn+2)===10&&++ir):hn===10&&(Dr=!0),mt.slice(gn+1,vn).replace(/""/g,'"')}for(;ir<Rr;){var hn=mt.charCodeAt(ir++),sn=1;if(hn===10)Dr=!0;else if(hn===13)Dr=!0,mt.charCodeAt(ir)===10&&(++ir,++sn);else if(hn!==_e)continue;return mt.slice(gn,ir-sn)}return mt.slice(gn)}for(;(mr=yr())!==Yt;){for(var kr=[];mr!==Vt&&mr!==Yt;)kr.push(mr),mr=yr();Tt&&(kr=Tt(kr,hr++))==null||ur.push(kr)}return ur},Ee.format=function(mt){if(Array.isArray(mt[0]))return Ee.formatRows(mt);var Tt=new N,Vt=[];return mt.forEach(function(Yt){for(var ur in Yt)Tt.has(ur)||Vt.push(Tt.add(ur))}),[Vt.map(nt).join(Y)].concat(mt.map(function(Yt){return Vt.map(function(ur){return nt(Yt[ur])}).join(Y)})).join(`
`)},Ee.formatRows=function(mt){return mt.map($e).join(`
`)};function $e(mt){return mt.map(nt).join(Y)}function nt(mt){return ye.test(mt)?'"'+mt.replace(/\"/g,'""')+'"':mt}return Ee},r.csv=r.dsv(",","text/csv"),r.tsv=r.dsv("	","text/tab-separated-values");var Cn,ra,ta,ba,Wa=this[X(this,"requestAnimationFrame")]||function(Y){setTimeout(Y,17)};r.timer=function(){ei.apply(this,arguments)};function ei(Y,he,ye){var _e=arguments.length;_e<2&&(he=0),_e<3&&(ye=Date.now());var Ee=ye+he,De={c:Y,t:Ee,n:null};return ra?ra.n=De:Cn=De,ra=De,ta||(ba=clearTimeout(ba),ta=1,Wa(dr)),De}function dr(){var Y=an(),he=Kr()-Y;he>24?(isFinite(he)&&(clearTimeout(ba),ba=setTimeout(dr,he)),ta=0):(ta=1,Wa(dr))}r.timer.flush=function(){an(),Kr()};function an(){for(var Y=Date.now(),he=Cn;he;)Y>=he.t&&he.c(Y-he.t)&&(he.c=null),he=he.n;return Y}function Kr(){for(var Y,he=Cn,ye=1/0;he;)he.c?(he.t<ye&&(ye=he.t),he=(Y=he).n):he=Y?Y.n=he.n:Cn=he.n;return ra=Y,ye}function Rn(Y,he){return he-(Y?Math.ceil(Math.log(Y)/Math.LN10):1)}r.round=function(Y,he){return he?Math.round(Y*(he=Math.pow(10,he)))/he:Math.round(Y)};var Gn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Sa);r.formatPrefix=function(Y,he){var ye=0;return(Y=+Y)&&(Y<0&&(Y*=-1),he&&(Y=r.round(Y,Rn(Y,he))),ye=1+Math.floor(1e-12+Math.log(Y)/Math.LN10),ye=Math.max(-24,Math.min(24,Math.floor((ye-1)/3)*3))),Gn[8+ye/3]};function Sa(Y,he){var ye=Math.pow(10,_(8-he)*3);return{scale:he>8?function(_e){return _e/ye}:function(_e){return _e*ye},symbol:Y}}function ha(Y){var he=Y.decimal,ye=Y.thousands,_e=Y.grouping,Ee=Y.currency,De=_e&&ye?function(rt,$e){for(var nt=rt.length,mt=[],Tt=0,Vt=_e[0],Yt=0;nt>0&&Vt>0&&(Yt+Vt+1>$e&&(Vt=Math.max(1,$e-Yt)),mt.push(rt.substring(nt-=Vt,nt+Vt)),!((Yt+=Vt+1)>$e));)Vt=_e[Tt=(Tt+1)%_e.length];return mt.reverse().join(ye)}:G;return function(rt){var $e=Aa.exec(rt),nt=$e[1]||" ",mt=$e[2]||">",Tt=$e[3]||"-",Vt=$e[4]||"",Yt=$e[5],ur=+$e[6],Rr=$e[7],ir=$e[8],hr=$e[9],mr=1,Dr="",yr="",kr=!1,gn=!0;switch(ir&&(ir=+ir.substring(1)),(Yt||nt==="0"&&mt==="=")&&(Yt=nt="0",mt="="),hr){case"n":Rr=!0,hr="g";break;case"%":mr=100,yr="%",hr="f";break;case"p":mr=100,yr="%",hr="r";break;case"b":case"o":case"x":case"X":Vt==="#"&&(Dr="0"+hr.toLowerCase());case"c":gn=!1;case"d":kr=!0,ir=0;break;case"s":mr=-1,hr="r";break}Vt==="$"&&(Dr=Ee[0],yr=Ee[1]),hr=="r"&&!ir&&(hr="g"),ir!=null&&(hr=="g"?ir=Math.max(1,Math.min(21,ir)):(hr=="e"||hr=="f")&&(ir=Math.max(0,Math.min(20,ir)))),hr=ka.get(hr)||Za;var vn=Yt&&Rr;return function(hn){var sn=yr;if(kr&&hn%1)return"";var Xn=hn<0||hn===0&&1/hn<0?(hn=-hn,"-"):Tt==="-"?"":Tt;if(mr<0){var ea=r.formatPrefix(hn,ir);hn=ea.scale(hn),sn=ea.symbol+yr}else hn*=mr;hn=hr(hn,ir);var La=hn.lastIndexOf("."),da,ma;if(La<0){var En=gn?hn.lastIndexOf("e"):-1;En<0?(da=hn,ma=""):(da=hn.substring(0,En),ma=hn.substring(En))}else da=hn.substring(0,La),ma=he+hn.substring(La+1);!Yt&&Rr&&(da=De(da,1/0));var $n=Dr.length+da.length+ma.length+(vn?0:Xn.length),ca=$n<ur?new Array($n=ur-$n+1).join(nt):"";return vn&&(da=De(ca+da,ca.length?ur-ma.length:1/0)),Xn+=Dr,hn=da+ma,(mt==="<"?Xn+hn+ca:mt===">"?ca+Xn+hn:mt==="^"?ca.substring(0,$n>>=1)+Xn+hn+ca.substring($n):Xn+(vn?hn:ca+hn))+sn}}}var Aa=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ka=r.map({b:function(Y){return Y.toString(2)},c:function(Y){return String.fromCharCode(Y)},o:function(Y){return Y.toString(8)},x:function(Y){return Y.toString(16)},X:function(Y){return Y.toString(16).toUpperCase()},g:function(Y,he){return Y.toPrecision(he)},e:function(Y,he){return Y.toExponential(he)},f:function(Y,he){return Y.toFixed(he)},r:function(Y,he){return(Y=r.round(Y,Rn(Y,he))).toFixed(Math.max(0,Math.min(20,Rn(Y*(1+1e-15),he))))}});function Za(Y){return Y+""}var Xt=r.time={},xr=Date;function Yr(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Yr.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){cn.setUTCDate.apply(this._,arguments)},setDay:function(){cn.setUTCDay.apply(this._,arguments)},setFullYear:function(){cn.setUTCFullYear.apply(this._,arguments)},setHours:function(){cn.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){cn.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){cn.setUTCMinutes.apply(this._,arguments)},setMonth:function(){cn.setUTCMonth.apply(this._,arguments)},setSeconds:function(){cn.setUTCSeconds.apply(this._,arguments)},setTime:function(){cn.setTime.apply(this._,arguments)}};var cn=Date.prototype;function en(Y,he,ye){function _e(mt){var Tt=Y(mt),Vt=De(Tt,1);return mt-Tt<Vt-mt?Tt:Vt}function Ee(mt){return he(mt=Y(new xr(mt-1)),1),mt}function De(mt,Tt){return he(mt=new xr(+mt),Tt),mt}function rt(mt,Tt,Vt){var Yt=Ee(mt),ur=[];if(Vt>1)for(;Yt<Tt;)ye(Yt)%Vt||ur.push(new Date(+Yt)),he(Yt,1);else for(;Yt<Tt;)ur.push(new Date(+Yt)),he(Yt,1);return ur}function $e(mt,Tt,Vt){try{xr=Yr;var Yt=new Yr;return Yt._=mt,rt(Yt,Tt,Vt)}finally{xr=Date}}Y.floor=Y,Y.round=_e,Y.ceil=Ee,Y.offset=De,Y.range=rt;var nt=Y.utc=nn(Y);return nt.floor=nt,nt.round=nn(_e),nt.ceil=nn(Ee),nt.offset=nn(De),nt.range=$e,Y}function nn(Y){return function(he,ye){try{xr=Yr;var _e=new Yr;return _e._=he,Y(_e,ye)._}finally{xr=Date}}}Xt.year=en(function(Y){return Y=Xt.day(Y),Y.setMonth(0,1),Y},function(Y,he){Y.setFullYear(Y.getFullYear()+he)},function(Y){return Y.getFullYear()}),Xt.years=Xt.year.range,Xt.years.utc=Xt.year.utc.range,Xt.day=en(function(Y){var he=new xr(2e3,0);return he.setFullYear(Y.getFullYear(),Y.getMonth(),Y.getDate()),he},function(Y,he){Y.setDate(Y.getDate()+he)},function(Y){return Y.getDate()-1}),Xt.days=Xt.day.range,Xt.days.utc=Xt.day.utc.range,Xt.dayOfYear=function(Y){var he=Xt.year(Y);return Math.floor((Y-he-(Y.getTimezoneOffset()-he.getTimezoneOffset())*6e4)/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(Y,he){he=7-he;var ye=Xt[Y]=en(function(_e){return(_e=Xt.day(_e)).setDate(_e.getDate()-(_e.getDay()+he)%7),_e},function(_e,Ee){_e.setDate(_e.getDate()+Math.floor(Ee)*7)},function(_e){var Ee=Xt.year(_e).getDay();return Math.floor((Xt.dayOfYear(_e)+(Ee+he)%7)/7)-(Ee!==he)});Xt[Y+"s"]=ye.range,Xt[Y+"s"].utc=ye.utc.range,Xt[Y+"OfYear"]=function(_e){var Ee=Xt.year(_e).getDay();return Math.floor((Xt.dayOfYear(_e)+(Ee+he)%7)/7)}}),Xt.week=Xt.sunday,Xt.weeks=Xt.sunday.range,Xt.weeks.utc=Xt.sunday.utc.range,Xt.weekOfYear=Xt.sundayOfYear;function pn(Y){var he=Y.dateTime,ye=Y.date,_e=Y.time,Ee=Y.periods,De=Y.days,rt=Y.shortDays,$e=Y.months,nt=Y.shortMonths;function mt(En){var $n=En.length;function ca(yn){for(var Hn=[],Ha=-1,gi=0,Pi,mo,Do;++Ha<$n;)En.charCodeAt(Ha)===37&&(Hn.push(En.slice(gi,Ha)),(mo=rn[Pi=En.charAt(++Ha)])!=null&&(Pi=En.charAt(++Ha)),(Do=kr[Pi])&&(Pi=Do(yn,mo??(Pi==="e"?" ":"0"))),Hn.push(Pi),gi=Ha+1);return Hn.push(En.slice(gi,Ha)),Hn.join("")}return ca.parse=function(yn){var Hn={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},Ha=Tt(Hn,En,yn,0);if(Ha!=yn.length)return null;"p"in Hn&&(Hn.H=Hn.H%12+Hn.p*12);var gi=Hn.Z!=null&&xr!==Yr,Pi=new(gi?Yr:xr);return"j"in Hn?Pi.setFullYear(Hn.y,0,Hn.j):"W"in Hn||"U"in Hn?("w"in Hn||(Hn.w="W"in Hn?1:0),Pi.setFullYear(Hn.y,0,1),Pi.setFullYear(Hn.y,0,"W"in Hn?(Hn.w+6)%7+Hn.W*7-(Pi.getDay()+5)%7:Hn.w+Hn.U*7-(Pi.getDay()+6)%7)):Pi.setFullYear(Hn.y,Hn.m,Hn.d),Pi.setHours(Hn.H+(Hn.Z/100|0),Hn.M+Hn.Z%100,Hn.S,Hn.L),gi?Pi._:Pi},ca.toString=function(){return En},ca}function Tt(En,$n,ca,yn){for(var Hn,Ha,gi,Pi=0,mo=$n.length,Do=ca.length;Pi<mo;){if(yn>=Do)return-1;if(Hn=$n.charCodeAt(Pi++),Hn===37){if(gi=$n.charAt(Pi++),Ha=gn[gi in rn?$n.charAt(Pi++):gi],!Ha||(yn=Ha(En,ca,yn))<0)return-1}else if(Hn!=ca.charCodeAt(yn++))return-1}return yn}mt.utc=function(En){var $n=mt(En);function ca(yn){try{xr=Yr;var Hn=new xr;return Hn._=yn,$n(Hn)}finally{xr=Date}}return ca.parse=function(yn){try{xr=Yr;var Hn=$n.parse(yn);return Hn&&Hn._}finally{xr=Date}},ca.toString=$n.toString,ca},mt.multi=mt.utc.multi=Vu;var Vt=r.map(),Yt=Fn(De),ur=Vn(De),Rr=Fn(rt),ir=Vn(rt),hr=Fn($e),mr=Vn($e),Dr=Fn(nt),yr=Vn(nt);Ee.forEach(function(En,$n){Vt.set(En.toLowerCase(),$n)});var kr={a:function(En){return rt[En.getDay()]},A:function(En){return De[En.getDay()]},b:function(En){return nt[En.getMonth()]},B:function(En){return $e[En.getMonth()]},c:mt(he),d:function(En,$n){return Tr(En.getDate(),$n,2)},e:function(En,$n){return Tr(En.getDate(),$n,2)},H:function(En,$n){return Tr(En.getHours(),$n,2)},I:function(En,$n){return Tr(En.getHours()%12||12,$n,2)},j:function(En,$n){return Tr(1+Xt.dayOfYear(En),$n,3)},L:function(En,$n){return Tr(En.getMilliseconds(),$n,3)},m:function(En,$n){return Tr(En.getMonth()+1,$n,2)},M:function(En,$n){return Tr(En.getMinutes(),$n,2)},p:function(En){return Ee[+(En.getHours()>=12)]},S:function(En,$n){return Tr(En.getSeconds(),$n,2)},U:function(En,$n){return Tr(Xt.sundayOfYear(En),$n,2)},w:function(En){return En.getDay()},W:function(En,$n){return Tr(Xt.mondayOfYear(En),$n,2)},x:mt(ye),X:mt(_e),y:function(En,$n){return Tr(En.getFullYear()%100,$n,2)},Y:function(En,$n){return Tr(En.getFullYear()%1e4,$n,4)},Z:hu,"%":function(){return"%"}},gn={a:vn,A:hn,b:sn,B:Xn,c:ea,d:Ps,e:Ps,H:Su,I:Su,j:rs,L:Eu,m:di,M:Rs,p:ma,S:ec,U:Ra,w:la,W:oa,x:La,X:da,y:Ti,Y:ai,Z:Ui,"%":Rc};function vn(En,$n,ca){Rr.lastIndex=0;var yn=Rr.exec($n.slice(ca));return yn?(En.w=ir.get(yn[0].toLowerCase()),ca+yn[0].length):-1}function hn(En,$n,ca){Yt.lastIndex=0;var yn=Yt.exec($n.slice(ca));return yn?(En.w=ur.get(yn[0].toLowerCase()),ca+yn[0].length):-1}function sn(En,$n,ca){Dr.lastIndex=0;var yn=Dr.exec($n.slice(ca));return yn?(En.m=yr.get(yn[0].toLowerCase()),ca+yn[0].length):-1}function Xn(En,$n,ca){hr.lastIndex=0;var yn=hr.exec($n.slice(ca));return yn?(En.m=mr.get(yn[0].toLowerCase()),ca+yn[0].length):-1}function ea(En,$n,ca){return Tt(En,kr.c.toString(),$n,ca)}function La(En,$n,ca){return Tt(En,kr.x.toString(),$n,ca)}function da(En,$n,ca){return Tt(En,kr.X.toString(),$n,ca)}function ma(En,$n,ca){var yn=Vt.get($n.slice(ca,ca+=2).toLowerCase());return yn==null?-1:(En.p=yn,ca)}return mt}var rn={"-":"",_:" ",0:"0"},wr=/^\s*\d+/,Ir=/^%/;function Tr(Y,he,ye){var _e=Y<0?"-":"",Ee=(_e?-Y:Y)+"",De=Ee.length;return _e+(De<ye?new Array(ye-De+1).join(he)+Ee:Ee)}function Fn(Y){return new RegExp("^(?:"+Y.map(r.requote).join("|")+")","i")}function Vn(Y){for(var he=new A,ye=-1,_e=Y.length;++ye<_e;)he.set(Y[ye].toLowerCase(),ye);return he}function la(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+1));return _e?(Y.w=+_e[0],ye+_e[0].length):-1}function Ra(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye));return _e?(Y.U=+_e[0],ye+_e[0].length):-1}function oa(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye));return _e?(Y.W=+_e[0],ye+_e[0].length):-1}function ai(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+4));return _e?(Y.y=+_e[0],ye+_e[0].length):-1}function Ti(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+2));return _e?(Y.y=Qa(+_e[0]),ye+_e[0].length):-1}function Ui(Y,he,ye){return/^[+-]\d{4}$/.test(he=he.slice(ye,ye+5))?(Y.Z=-he,ye+5):-1}function Qa(Y){return Y+(Y>68?1900:2e3)}function di(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+2));return _e?(Y.m=_e[0]-1,ye+_e[0].length):-1}function Ps(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+2));return _e?(Y.d=+_e[0],ye+_e[0].length):-1}function rs(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+3));return _e?(Y.j=+_e[0],ye+_e[0].length):-1}function Su(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+2));return _e?(Y.H=+_e[0],ye+_e[0].length):-1}function Rs(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+2));return _e?(Y.M=+_e[0],ye+_e[0].length):-1}function ec(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+2));return _e?(Y.S=+_e[0],ye+_e[0].length):-1}function Eu(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+3));return _e?(Y.L=+_e[0],ye+_e[0].length):-1}function hu(Y){var he=Y.getTimezoneOffset(),ye=he>0?"-":"+",_e=_(he)/60|0,Ee=_(he)%60;return ye+Tr(_e,"0",2)+Tr(Ee,"0",2)}function Rc(Y,he,ye){Ir.lastIndex=0;var _e=Ir.exec(he.slice(ye,ye+1));return _e?ye+_e[0].length:-1}function Vu(Y){for(var he=Y.length,ye=-1;++ye<he;)Y[ye][0]=this(Y[ye][0]);return function(_e){for(var Ee=0,De=Y[Ee];!De[1](_e);)De=Y[++Ee];return De[0](_e)}}r.locale=function(Y){return{numberFormat:ha(Y),timeFormat:pn(Y)}};var Co=r.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});r.format=Co.numberFormat,r.geo={};function ul(){}ul.prototype={s:0,t:0,add:function(Y){uh(Y,this.t,yo),uh(yo.s,this.s,this),this.s?this.t+=yo.t:this.s=yo.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var yo=new ul;function uh(Y,he,ye){var _e=ye.s=Y+he,Ee=_e-Y,De=_e-Ee;ye.t=Y-De+(he-Ee)}r.geo.stream=function(Y,he){Y&&zf.hasOwnProperty(Y.type)?zf[Y.type](Y,he):pu(Y,he)};function pu(Y,he){Y&&du.hasOwnProperty(Y.type)&&du[Y.type](Y,he)}var zf={Feature:function(Y,he){pu(Y.geometry,he)},FeatureCollection:function(Y,he){for(var ye=Y.features,_e=-1,Ee=ye.length;++_e<Ee;)pu(ye[_e].geometry,he)}},du={Sphere:function(Y,he){he.sphere()},Point:function(Y,he){Y=Y.coordinates,he.point(Y[0],Y[1],Y[2])},MultiPoint:function(Y,he){for(var ye=Y.coordinates,_e=-1,Ee=ye.length;++_e<Ee;)Y=ye[_e],he.point(Y[0],Y[1],Y[2])},LineString:function(Y,he){Ql(Y.coordinates,he,0)},MultiLineString:function(Y,he){for(var ye=Y.coordinates,_e=-1,Ee=ye.length;++_e<Ee;)Ql(ye[_e],he,0)},Polygon:function(Y,he){Cu(Y.coordinates,he)},MultiPolygon:function(Y,he){for(var ye=Y.coordinates,_e=-1,Ee=ye.length;++_e<Ee;)Cu(ye[_e],he)},GeometryCollection:function(Y,he){for(var ye=Y.geometries,_e=-1,Ee=ye.length;++_e<Ee;)pu(ye[_e],he)}};function Ql(Y,he,ye){var _e=-1,Ee=Y.length-ye,De;for(he.lineStart();++_e<Ee;)De=Y[_e],he.point(De[0],De[1],De[2]);he.lineEnd()}function Cu(Y,he){var ye=-1,_e=Y.length;for(he.polygonStart();++ye<_e;)Ql(Y[ye],he,1);he.polygonEnd()}r.geo.area=function(Y){return Lu=0,r.geo.stream(Y,cl),Lu};var Lu,ml=new ul,cl={sphere:function(){Lu+=4*Le},point:B,lineStart:B,lineEnd:B,polygonStart:function(){ml.reset(),cl.lineStart=Hu},polygonEnd:function(){var Y=2*ml;Lu+=Y<0?4*Le+Y:Y,cl.lineStart=cl.lineEnd=cl.point=B}};function Hu(){var Y,he,ye,_e,Ee;cl.point=function(rt,$e){cl.point=De,ye=(Y=rt)*Ie,_e=Math.cos($e=(he=$e)*Ie/2+Le/4),Ee=Math.sin($e)};function De(rt,$e){rt*=Ie,$e=$e*Ie/2+Le/4;var nt=rt-ye,mt=nt>=0?1:-1,Tt=mt*nt,Vt=Math.cos($e),Yt=Math.sin($e),ur=Ee*Yt,Rr=_e*Vt+ur*Math.cos(Tt),ir=ur*mt*Math.sin(Tt);ml.add(Math.atan2(ir,Rr)),ye=rt,_e=Vt,Ee=Yt}cl.lineEnd=function(){De(Y,he)}}function Pu(Y){var he=Y[0],ye=Y[1],_e=Math.cos(ye);return[_e*Math.cos(he),_e*Math.sin(he),Math.sin(ye)]}function ql(Y,he){return Y[0]*he[0]+Y[1]*he[1]+Y[2]*he[2]}function yl(Y,he){return[Y[1]*he[2]-Y[2]*he[1],Y[2]*he[0]-Y[0]*he[2],Y[0]*he[1]-Y[1]*he[0]]}function pc(Y,he){Y[0]+=he[0],Y[1]+=he[1],Y[2]+=he[2]}function tc(Y,he){return[Y[0]*he,Y[1]*he,Y[2]*he]}function eo(Y){var he=Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]+Y[2]*Y[2]);Y[0]/=he,Y[1]/=he,Y[2]/=he}function $s(Y){return[Math.atan2(Y[1],Y[0]),Ge(Y[2])]}function qc(Y,he){return _(Y[0]-he[0])<lt&&_(Y[1]-he[1])<lt}r.geo.bounds=function(){var Y,he,ye,_e,Ee,De,rt,$e,nt,mt,Tt,Vt={point:Yt,lineStart:Rr,lineEnd:ir,polygonStart:function(){Vt.point=hr,Vt.lineStart=mr,Vt.lineEnd=Dr,nt=0,cl.polygonStart()},polygonEnd:function(){cl.polygonEnd(),Vt.point=Yt,Vt.lineStart=Rr,Vt.lineEnd=ir,ml<0?(Y=-(ye=180),he=-(_e=90)):nt>lt?_e=90:nt<-lt&&(he=-90),Tt[0]=Y,Tt[1]=ye}};function Yt(vn,hn){mt.push(Tt=[Y=vn,ye=vn]),hn<he&&(he=hn),hn>_e&&(_e=hn)}function ur(vn,hn){var sn=Pu([vn*Ie,hn*Ie]);if($e){var Xn=yl($e,sn),ea=[Xn[1],-Xn[0],0],La=yl(ea,Xn);eo(La),La=$s(La);var da=vn-Ee,ma=da>0?1:-1,En=La[0]*He*ma,$n=_(da)>180;if($n^(ma*Ee<En&&En<ma*vn)){var ca=La[1]*He;ca>_e&&(_e=ca)}else if(En=(En+360)%360-180,$n^(ma*Ee<En&&En<ma*vn)){var ca=-La[1]*He;ca<he&&(he=ca)}else hn<he&&(he=hn),hn>_e&&(_e=hn);$n?vn<Ee?yr(Y,vn)>yr(Y,ye)&&(ye=vn):yr(vn,ye)>yr(Y,ye)&&(Y=vn):ye>=Y?(vn<Y&&(Y=vn),vn>ye&&(ye=vn)):vn>Ee?yr(Y,vn)>yr(Y,ye)&&(ye=vn):yr(vn,ye)>yr(Y,ye)&&(Y=vn)}else Yt(vn,hn);$e=sn,Ee=vn}function Rr(){Vt.point=ur}function ir(){Tt[0]=Y,Tt[1]=ye,Vt.point=Yt,$e=null}function hr(vn,hn){if($e){var sn=vn-Ee;nt+=_(sn)>180?sn+(sn>0?360:-360):sn}else De=vn,rt=hn;cl.point(vn,hn),ur(vn,hn)}function mr(){cl.lineStart()}function Dr(){hr(De,rt),cl.lineEnd(),_(nt)>lt&&(Y=-(ye=180)),Tt[0]=Y,Tt[1]=ye,$e=null}function yr(vn,hn){return(hn-=vn)<0?hn+360:hn}function kr(vn,hn){return vn[0]-hn[0]}function gn(vn,hn){return hn[0]<=hn[1]?hn[0]<=vn&&vn<=hn[1]:vn<hn[0]||hn[1]<vn}return function(vn){_e=ye=-(Y=he=1/0),mt=[],r.geo.stream(vn,Vt);var hn=mt.length;if(hn){mt.sort(kr);for(var sn=1,Xn=mt[0],ea,La=[Xn];sn<hn;++sn)ea=mt[sn],gn(ea[0],Xn)||gn(ea[1],Xn)?(yr(Xn[0],ea[1])>yr(Xn[0],Xn[1])&&(Xn[1]=ea[1]),yr(ea[0],Xn[1])>yr(Xn[0],Xn[1])&&(Xn[0]=ea[0])):La.push(Xn=ea);for(var da=-1/0,ma,hn=La.length-1,sn=0,Xn=La[hn],ea;sn<=hn;Xn=ea,++sn)ea=La[sn],(ma=yr(Xn[1],ea[0]))>da&&(da=ma,Y=ea[0],ye=Xn[1])}return mt=Tt=null,Y===1/0||he===1/0?[[NaN,NaN],[NaN,NaN]]:[[Y,he],[ye,_e]]}}(),r.geo.centroid=function(Y){vu=Ds=mu=Rl=xl=Dl=fl=hl=eu=As=Ru=0,r.geo.stream(Y,ps);var he=eu,ye=As,_e=Ru,Ee=he*he+ye*ye+_e*_e;return Ee<Te&&(he=Dl,ye=fl,_e=hl,Ds<lt&&(he=mu,ye=Rl,_e=xl),Ee=he*he+ye*ye+_e*_e,Ee<Te)?[NaN,NaN]:[Math.atan2(ye,he)*He,Ge(_e/Math.sqrt(Ee))*He]};var vu,Ds,mu,Rl,xl,Dl,fl,hl,eu,As,Ru,ps={sphere:B,point:pl,lineStart:ns,lineEnd:ef,polygonStart:function(){ps.lineStart=bl},polygonEnd:function(){ps.lineStart=ns}};function pl(Y,he){Y*=Ie;var ye=Math.cos(he*=Ie);Du(ye*Math.cos(Y),ye*Math.sin(Y),Math.sin(he))}function Du(Y,he,ye){++vu,mu+=(Y-mu)/vu,Rl+=(he-Rl)/vu,xl+=(ye-xl)/vu}function ns(){var Y,he,ye;ps.point=function(Ee,De){Ee*=Ie;var rt=Math.cos(De*=Ie);Y=rt*Math.cos(Ee),he=rt*Math.sin(Ee),ye=Math.sin(De),ps.point=_e,Du(Y,he,ye)};function _e(Ee,De){Ee*=Ie;var rt=Math.cos(De*=Ie),$e=rt*Math.cos(Ee),nt=rt*Math.sin(Ee),mt=Math.sin(De),Tt=Math.atan2(Math.sqrt((Tt=he*mt-ye*nt)*Tt+(Tt=ye*$e-Y*mt)*Tt+(Tt=Y*nt-he*$e)*Tt),Y*$e+he*nt+ye*mt);Ds+=Tt,Dl+=Tt*(Y+(Y=$e)),fl+=Tt*(he+(he=nt)),hl+=Tt*(ye+(ye=mt)),Du(Y,he,ye)}}function ef(){ps.point=pl}function bl(){var Y,he,ye,_e,Ee;ps.point=function(rt,$e){Y=rt,he=$e,ps.point=De,rt*=Ie;var nt=Math.cos($e*=Ie);ye=nt*Math.cos(rt),_e=nt*Math.sin(rt),Ee=Math.sin($e),Du(ye,_e,Ee)},ps.lineEnd=function(){De(Y,he),ps.lineEnd=ef,ps.point=pl};function De(rt,$e){rt*=Ie;var nt=Math.cos($e*=Ie),mt=nt*Math.cos(rt),Tt=nt*Math.sin(rt),Vt=Math.sin($e),Yt=_e*Vt-Ee*Tt,ur=Ee*mt-ye*Vt,Rr=ye*Tt-_e*mt,ir=Math.sqrt(Yt*Yt+ur*ur+Rr*Rr),hr=ye*mt+_e*Tt+Ee*Vt,mr=ir&&-it(hr)/ir,Dr=Math.atan2(ir,hr);eu+=mr*Yt,As+=mr*ur,Ru+=mr*Rr,Ds+=Dr,Dl+=Dr*(ye+(ye=mt)),fl+=Dr*(_e+(_e=Tt)),hl+=Dr*(Ee+(Ee=Vt)),Du(ye,_e,Ee)}}function gu(Y,he){function ye(_e,Ee){return _e=Y(_e,Ee),he(_e[0],_e[1])}return Y.invert&&he.invert&&(ye.invert=function(_e,Ee){return _e=he.invert(_e,Ee),_e&&Y.invert(_e[0],_e[1])}),ye}function yu(){return!0}function _s(Y,he,ye,_e,Ee){var De=[],rt=[];if(Y.forEach(function(ir){if(!((hr=ir.length-1)<=0)){var hr,mr=ir[0],Dr=ir[hr];if(qc(mr,Dr)){Ee.lineStart();for(var yr=0;yr<hr;++yr)Ee.point((mr=ir[yr])[0],mr[1]);Ee.lineEnd();return}var kr=new tu(mr,ir,null,!0),gn=new tu(mr,null,kr,!1);kr.o=gn,De.push(kr),rt.push(gn),kr=new tu(Dr,ir,null,!1),gn=new tu(Dr,null,kr,!0),kr.o=gn,De.push(kr),rt.push(gn)}}),rt.sort(he),dc(De),dc(rt),!!De.length){for(var $e=0,nt=ye,mt=rt.length;$e<mt;++$e)rt[$e].e=nt=!nt;for(var Tt=De[0],Vt,Yt;;){for(var ur=Tt,Rr=!0;ur.v;)if((ur=ur.n)===Tt)return;Vt=ur.z,Ee.lineStart();do{if(ur.v=ur.o.v=!0,ur.e){if(Rr)for(var $e=0,mt=Vt.length;$e<mt;++$e)Ee.point((Yt=Vt[$e])[0],Yt[1]);else _e(ur.x,ur.n.x,1,Ee);ur=ur.n}else{if(Rr){Vt=ur.p.z;for(var $e=Vt.length-1;$e>=0;--$e)Ee.point((Yt=Vt[$e])[0],Yt[1])}else _e(ur.x,ur.p.x,-1,Ee);ur=ur.p}ur=ur.o,Vt=ur.z,Rr=!Rr}while(!ur.v);Ee.lineEnd()}}}function dc(Y){if(he=Y.length){for(var he,ye=0,_e=Y[0],Ee;++ye<he;)_e.n=Ee=Y[ye],Ee.p=_e,_e=Ee;_e.n=Ee=Y[0],Ee.p=_e}}function tu(Y,he,ye,_e){this.x=Y,this.z=he,this.o=ye,this.e=_e,this.v=!1,this.n=this.p=null}function ds(Y,he,ye,_e){return function(Ee,De){var rt=he(De),$e=Ee.invert(_e[0],_e[1]),nt={point:mt,lineStart:Vt,lineEnd:Yt,polygonStart:function(){nt.point=yr,nt.lineStart=kr,nt.lineEnd=gn,ur=[],mr=[]},polygonEnd:function(){nt.point=mt,nt.lineStart=Vt,nt.lineEnd=Yt,ur=r.merge(ur);var vn=ct($e,mr);ur.length?(hr||(De.polygonStart(),hr=!0),_s(ur,rc,vn,ye,De)):vn&&(hr||(De.polygonStart(),hr=!0),De.lineStart(),ye(null,null,1,De),De.lineEnd()),hr&&(De.polygonEnd(),hr=!1),ur=mr=null},sphere:function(){De.polygonStart(),De.lineStart(),ye(null,null,1,De),De.lineEnd(),De.polygonEnd()}};function mt(vn,hn){var sn=Ee(vn,hn);Y(vn=sn[0],hn=sn[1])&&De.point(vn,hn)}function Tt(vn,hn){var sn=Ee(vn,hn);rt.point(sn[0],sn[1])}function Vt(){nt.point=Tt,rt.lineStart()}function Yt(){nt.point=mt,rt.lineEnd()}var ur,Rr=Of(),ir=he(Rr),hr=!1,mr,Dr;function yr(vn,hn){Dr.push([vn,hn]);var sn=Ee(vn,hn);ir.point(sn[0],sn[1])}function kr(){ir.lineStart(),Dr=[]}function gn(){yr(Dr[0][0],Dr[0][1]),ir.lineEnd();var vn=ir.clean(),hn=Rr.buffer(),sn,Xn=hn.length;if(Dr.pop(),mr.push(Dr),Dr=null,!!Xn){if(vn&1){sn=hn[0];var Xn=sn.length-1,ea=-1,La;if(Xn>0){for(hr||(De.polygonStart(),hr=!0),De.lineStart();++ea<Xn;)De.point((La=sn[ea])[0],La[1]);De.lineEnd()}return}Xn>1&&vn&2&&hn.push(hn.pop().concat(hn.shift())),ur.push(hn.filter(tf))}}return nt}}function tf(Y){return Y.length>1}function Of(){var Y=[],he;return{lineStart:function(){Y.push(he=[])},point:function(ye,_e){he.push([ye,_e])},lineEnd:B,buffer:function(){var ye=Y;return Y=[],he=null,ye},rejoin:function(){Y.length>1&&Y.push(Y.pop().concat(Y.shift()))}}}function rc(Y,he){return((Y=Y.x)[0]<0?Y[1]-Me-lt:Me-Y[1])-((he=he.x)[0]<0?he[1]-Me-lt:Me-he[1])}var Dc=ds(yu,at,gt,[-Le,-Le/2]);function at(Y){var he=NaN,ye=NaN,_e=NaN,Ee;return{lineStart:function(){Y.lineStart(),Ee=1},point:function(De,rt){var $e=De>0?Le:-Le,nt=_(De-he);_(nt-Le)<lt?(Y.point(he,ye=(ye+rt)/2>0?Me:-Me),Y.point(_e,ye),Y.lineEnd(),Y.lineStart(),Y.point($e,ye),Y.point(De,ye),Ee=0):_e!==$e&&nt>=Le&&(_(he-_e)<lt&&(he-=_e*lt),_(De-$e)<lt&&(De-=$e*lt),ye=Qe(he,ye,De,rt),Y.point(_e,ye),Y.lineEnd(),Y.lineStart(),Y.point($e,ye),Ee=0),Y.point(he=De,ye=rt),_e=$e},lineEnd:function(){Y.lineEnd(),he=ye=NaN},clean:function(){return 2-Ee}}}function Qe(Y,he,ye,_e){var Ee,De,rt=Math.sin(Y-ye);return _(rt)>lt?Math.atan((Math.sin(he)*(De=Math.cos(_e))*Math.sin(ye)-Math.sin(_e)*(Ee=Math.cos(he))*Math.sin(Y))/(Ee*De*rt)):(he+_e)/2}function gt(Y,he,ye,_e){var Ee;if(Y==null)Ee=ye*Me,_e.point(-Le,Ee),_e.point(0,Ee),_e.point(Le,Ee),_e.point(Le,0),_e.point(Le,-Ee),_e.point(0,-Ee),_e.point(-Le,-Ee),_e.point(-Le,0),_e.point(-Le,Ee);else if(_(Y[0]-he[0])>lt){var De=Y[0]<he[0]?Le:-Le;Ee=ye*De/2,_e.point(-De,Ee),_e.point(0,Ee),_e.point(De,Ee)}else _e.point(he[0],he[1])}function ct(Y,he){var ye=Y[0],_e=Y[1],Ee=[Math.sin(ye),-Math.cos(ye),0],De=0,rt=0;ml.reset();for(var $e=0,nt=he.length;$e<nt;++$e){var mt=he[$e],Tt=mt.length;if(Tt)for(var Vt=mt[0],Yt=Vt[0],ur=Vt[1]/2+Le/4,Rr=Math.sin(ur),ir=Math.cos(ur),hr=1;;){hr===Tt&&(hr=0),Y=mt[hr];var mr=Y[0],Dr=Y[1]/2+Le/4,yr=Math.sin(Dr),kr=Math.cos(Dr),gn=mr-Yt,vn=gn>=0?1:-1,hn=vn*gn,sn=hn>Le,Xn=Rr*yr;if(ml.add(Math.atan2(Xn*vn*Math.sin(hn),ir*kr+Xn*Math.cos(hn))),De+=sn?gn+vn*Be:gn,sn^Yt>=ye^mr>=ye){var ea=yl(Pu(Vt),Pu(Y));eo(ea);var La=yl(Ee,ea);eo(La);var da=(sn^gn>=0?-1:1)*Ge(La[2]);(_e>da||_e===da&&(ea[0]||ea[1]))&&(rt+=sn^gn>=0?1:-1)}if(!hr++)break;Yt=mr,Rr=yr,ir=kr,Vt=Y}}return(De<-lt||De<lt&&ml<-lt)^rt&1}function yt(Y){var he=Math.cos(Y),ye=he>0,_e=_(he)>lt,Ee=Ji(Y,6*Ie);return ds(De,rt,Ee,ye?[0,-Y]:[-Le,Y-Le]);function De(mt,Tt){return Math.cos(mt)*Math.cos(Tt)>he}function rt(mt){var Tt,Vt,Yt,ur,Rr;return{lineStart:function(){ur=Yt=!1,Rr=1},point:function(ir,hr){var mr=[ir,hr],Dr,yr=De(ir,hr),kr=ye?yr?0:nt(ir,hr):yr?nt(ir+(ir<0?Le:-Le),hr):0;if(!Tt&&(ur=Yt=yr)&&mt.lineStart(),yr!==Yt&&(Dr=$e(Tt,mr),(qc(Tt,Dr)||qc(mr,Dr))&&(mr[0]+=lt,mr[1]+=lt,yr=De(mr[0],mr[1]))),yr!==Yt)Rr=0,yr?(mt.lineStart(),Dr=$e(mr,Tt),mt.point(Dr[0],Dr[1])):(Dr=$e(Tt,mr),mt.point(Dr[0],Dr[1]),mt.lineEnd()),Tt=Dr;else if(_e&&Tt&&ye^yr){var gn;!(kr&Vt)&&(gn=$e(mr,Tt,!0))&&(Rr=0,ye?(mt.lineStart(),mt.point(gn[0][0],gn[0][1]),mt.point(gn[1][0],gn[1][1]),mt.lineEnd()):(mt.point(gn[1][0],gn[1][1]),mt.lineEnd(),mt.lineStart(),mt.point(gn[0][0],gn[0][1])))}yr&&(!Tt||!qc(Tt,mr))&&mt.point(mr[0],mr[1]),Tt=mr,Yt=yr,Vt=kr},lineEnd:function(){Yt&&mt.lineEnd(),Tt=null},clean:function(){return Rr|(ur&&Yt)<<1}}}function $e(mt,Tt,Vt){var Yt=Pu(mt),ur=Pu(Tt),Rr=[1,0,0],ir=yl(Yt,ur),hr=ql(ir,ir),mr=ir[0],Dr=hr-mr*mr;if(!Dr)return!Vt&&mt;var yr=he*hr/Dr,kr=-he*mr/Dr,gn=yl(Rr,ir),vn=tc(Rr,yr),hn=tc(ir,kr);pc(vn,hn);var sn=gn,Xn=ql(vn,sn),ea=ql(sn,sn),La=Xn*Xn-ea*(ql(vn,vn)-1);if(!(La<0)){var da=Math.sqrt(La),ma=tc(sn,(-Xn-da)/ea);if(pc(ma,vn),ma=$s(ma),!Vt)return ma;var En=mt[0],$n=Tt[0],ca=mt[1],yn=Tt[1],Hn;$n<En&&(Hn=En,En=$n,$n=Hn);var Ha=$n-En,gi=_(Ha-Le)<lt,Pi=gi||Ha<lt;if(!gi&&yn<ca&&(Hn=ca,ca=yn,yn=Hn),Pi?gi?ca+yn>0^ma[1]<(_(ma[0]-En)<lt?ca:yn):ca<=ma[1]&&ma[1]<=yn:Ha>Le^(En<=ma[0]&&ma[0]<=$n)){var mo=tc(sn,(-Xn+da)/ea);return pc(mo,vn),[ma,$s(mo)]}}}function nt(mt,Tt){var Vt=ye?Y:Le-Y,Yt=0;return mt<-Vt?Yt|=1:mt>Vt&&(Yt|=2),Tt<-Vt?Yt|=4:Tt>Vt&&(Yt|=8),Yt}}function Ct(Y,he,ye,_e){return function(Ee){var De=Ee.a,rt=Ee.b,$e=De.x,nt=De.y,mt=rt.x,Tt=rt.y,Vt=0,Yt=1,ur=mt-$e,Rr=Tt-nt,ir;if(ir=Y-$e,!(!ur&&ir>0)){if(ir/=ur,ur<0){if(ir<Vt)return;ir<Yt&&(Yt=ir)}else if(ur>0){if(ir>Yt)return;ir>Vt&&(Vt=ir)}if(ir=ye-$e,!(!ur&&ir<0)){if(ir/=ur,ur<0){if(ir>Yt)return;ir>Vt&&(Vt=ir)}else if(ur>0){if(ir<Vt)return;ir<Yt&&(Yt=ir)}if(ir=he-nt,!(!Rr&&ir>0)){if(ir/=Rr,Rr<0){if(ir<Vt)return;ir<Yt&&(Yt=ir)}else if(Rr>0){if(ir>Yt)return;ir>Vt&&(Vt=ir)}if(ir=_e-nt,!(!Rr&&ir<0)){if(ir/=Rr,Rr<0){if(ir>Yt)return;ir>Vt&&(Vt=ir)}else if(Rr>0){if(ir<Vt)return;ir<Yt&&(Yt=ir)}return Vt>0&&(Ee.a={x:$e+Vt*ur,y:nt+Vt*Rr}),Yt<1&&(Ee.b={x:$e+Yt*ur,y:nt+Yt*Rr}),Ee}}}}}}var Ut=1e9;r.geo.clipExtent=function(){var Y,he,ye,_e,Ee,De,rt={stream:function($e){return Ee&&(Ee.valid=!1),Ee=De($e),Ee.valid=!0,Ee},extent:function($e){return arguments.length?(De=tr(Y=+$e[0][0],he=+$e[0][1],ye=+$e[1][0],_e=+$e[1][1]),Ee&&(Ee.valid=!1,Ee=null),rt):[[Y,he],[ye,_e]]}};return rt.extent([[0,0],[960,500]])};function tr(Y,he,ye,_e){return function($e){var nt=$e,mt=Of(),Tt=Ct(Y,he,ye,_e),Vt,Yt,ur,Rr={point:Dr,lineStart:La,lineEnd:da,polygonStart:function(){$e=mt,Vt=[],Yt=[],ea=!0},polygonEnd:function(){$e=nt,Vt=r.merge(Vt);var En=ir([Y,_e]),$n=ea&&En,ca=Vt.length;($n||ca)&&($e.polygonStart(),$n&&($e.lineStart(),hr(null,null,1,$e),$e.lineEnd()),ca&&_s(Vt,De,En,hr,$e),$e.polygonEnd()),Vt=Yt=ur=null}};function ir(En){for(var $n=0,ca=Yt.length,yn=En[1],Hn=0;Hn<ca;++Hn)for(var Ha=1,gi=Yt[Hn],Pi=gi.length,mo=gi[0],Do;Ha<Pi;++Ha)Do=gi[Ha],mo[1]<=yn?Do[1]>yn&&ht(mo,Do,En)>0&&++$n:Do[1]<=yn&&ht(mo,Do,En)<0&&--$n,mo=Do;return $n!==0}function hr(En,$n,ca,yn){var Hn=0,Ha=0;if(En==null||(Hn=Ee(En,ca))!==(Ha=Ee($n,ca))||rt(En,$n)<0^ca>0)do yn.point(Hn===0||Hn===3?Y:ye,Hn>1?_e:he);while((Hn=(Hn+ca+4)%4)!==Ha);else yn.point($n[0],$n[1])}function mr(En,$n){return Y<=En&&En<=ye&&he<=$n&&$n<=_e}function Dr(En,$n){mr(En,$n)&&$e.point(En,$n)}var yr,kr,gn,vn,hn,sn,Xn,ea;function La(){Rr.point=ma,Yt&&Yt.push(ur=[]),Xn=!0,sn=!1,vn=hn=NaN}function da(){Vt&&(ma(yr,kr),gn&&sn&&mt.rejoin(),Vt.push(mt.buffer())),Rr.point=Dr,sn&&$e.lineEnd()}function ma(En,$n){En=Math.max(-Ut,Math.min(Ut,En)),$n=Math.max(-Ut,Math.min(Ut,$n));var ca=mr(En,$n);if(Yt&&ur.push([En,$n]),Xn)yr=En,kr=$n,gn=ca,Xn=!1,ca&&($e.lineStart(),$e.point(En,$n));else if(ca&&sn)$e.point(En,$n);else{var yn={a:{x:vn,y:hn},b:{x:En,y:$n}};Tt(yn)?(sn||($e.lineStart(),$e.point(yn.a.x,yn.a.y)),$e.point(yn.b.x,yn.b.y),ca||$e.lineEnd(),ea=!1):ca&&($e.lineStart(),$e.point(En,$n),ea=!1)}vn=En,hn=$n,sn=ca}return Rr};function Ee($e,nt){return _($e[0]-Y)<lt?nt>0?0:3:_($e[0]-ye)<lt?nt>0?2:1:_($e[1]-he)<lt?nt>0?1:0:nt>0?3:2}function De($e,nt){return rt($e.x,nt.x)}function rt($e,nt){var mt=Ee($e,1),Tt=Ee(nt,1);return mt!==Tt?mt-Tt:mt===0?nt[1]-$e[1]:mt===1?$e[0]-nt[0]:mt===2?$e[1]-nt[1]:nt[0]-$e[0]}}function ar(Y){var he=0,ye=Le/3,_e=wi(Y),Ee=_e(he,ye);return Ee.parallels=function(De){return arguments.length?_e(he=De[0]*Le/180,ye=De[1]*Le/180):[he/Le*180,ye/Le*180]},Ee}function fr(Y,he){var ye=Math.sin(Y),_e=(ye+Math.sin(he))/2,Ee=1+ye*(2*_e-ye),De=Math.sqrt(Ee)/_e;function rt($e,nt){var mt=Math.sqrt(Ee-2*_e*Math.sin(nt))/_e;return[mt*Math.sin($e*=_e),De-mt*Math.cos($e)]}return rt.invert=function($e,nt){var mt=De-nt;return[Math.atan2($e,mt)/_e,Ge((Ee-($e*$e+mt*mt)*_e*_e)/(2*_e))]},rt}(r.geo.conicEqualArea=function(){return ar(fr)}).raw=fr,r.geo.albers=function(){return r.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},r.geo.albersUsa=function(){var Y=r.geo.albers(),he=r.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),ye=r.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),_e,Ee={point:function(mt,Tt){_e=[mt,Tt]}},De,rt,$e;function nt(mt){var Tt=mt[0],Vt=mt[1];return _e=null,De(Tt,Vt),_e||(rt(Tt,Vt),_e)||$e(Tt,Vt),_e}return nt.invert=function(mt){var Tt=Y.scale(),Vt=Y.translate(),Yt=(mt[0]-Vt[0])/Tt,ur=(mt[1]-Vt[1])/Tt;return(ur>=.12&&ur<.234&&Yt>=-.425&&Yt<-.214?he:ur>=.166&&ur<.234&&Yt>=-.214&&Yt<-.115?ye:Y).invert(mt)},nt.stream=function(mt){var Tt=Y.stream(mt),Vt=he.stream(mt),Yt=ye.stream(mt);return{point:function(ur,Rr){Tt.point(ur,Rr),Vt.point(ur,Rr),Yt.point(ur,Rr)},sphere:function(){Tt.sphere(),Vt.sphere(),Yt.sphere()},lineStart:function(){Tt.lineStart(),Vt.lineStart(),Yt.lineStart()},lineEnd:function(){Tt.lineEnd(),Vt.lineEnd(),Yt.lineEnd()},polygonStart:function(){Tt.polygonStart(),Vt.polygonStart(),Yt.polygonStart()},polygonEnd:function(){Tt.polygonEnd(),Vt.polygonEnd(),Yt.polygonEnd()}}},nt.precision=function(mt){return arguments.length?(Y.precision(mt),he.precision(mt),ye.precision(mt),nt):Y.precision()},nt.scale=function(mt){return arguments.length?(Y.scale(mt),he.scale(mt*.35),ye.scale(mt),nt.translate(Y.translate())):Y.scale()},nt.translate=function(mt){if(!arguments.length)return Y.translate();var Tt=Y.scale(),Vt=+mt[0],Yt=+mt[1];return De=Y.translate(mt).clipExtent([[Vt-.455*Tt,Yt-.238*Tt],[Vt+.455*Tt,Yt+.238*Tt]]).stream(Ee).point,rt=he.translate([Vt-.307*Tt,Yt+.201*Tt]).clipExtent([[Vt-.425*Tt+lt,Yt+.12*Tt+lt],[Vt-.214*Tt-lt,Yt+.234*Tt-lt]]).stream(Ee).point,$e=ye.translate([Vt-.205*Tt,Yt+.212*Tt]).clipExtent([[Vt-.214*Tt+lt,Yt+.166*Tt+lt],[Vt-.115*Tt-lt,Yt+.234*Tt-lt]]).stream(Ee).point,nt},nt.scale(1070)};var vr,Fr,qr={point:B,lineStart:B,lineEnd:B,polygonStart:function(){Fr=0,qr.lineStart=$r},polygonEnd:function(){qr.lineStart=qr.lineEnd=qr.point=B,vr+=_(Fr/2)}};function $r(){var Y,he,ye,_e;qr.point=function(De,rt){qr.point=Ee,Y=ye=De,he=_e=rt};function Ee(De,rt){Fr+=_e*De-ye*rt,ye=De,_e=rt}qr.lineEnd=function(){Ee(Y,he)}}var Nn,ia,Pn,Wn,aa={point:Un,lineStart:B,lineEnd:B,polygonStart:B,polygonEnd:B};function Un(Y,he){Y<Nn&&(Nn=Y),Y>Pn&&(Pn=Y),he<ia&&(ia=he),he>Wn&&(Wn=he)}function Jn(){var Y=Ia(4.5),he=[],ye={point:_e,lineStart:function(){ye.point=Ee},lineEnd:rt,polygonStart:function(){ye.lineEnd=$e},polygonEnd:function(){ye.lineEnd=rt,ye.point=_e},pointRadius:function(nt){return Y=Ia(nt),ye},result:function(){if(he.length){var nt=he.join("");return he=[],nt}}};function _e(nt,mt){he.push("M",nt,",",mt,Y)}function Ee(nt,mt){he.push("M",nt,",",mt),ye.point=De}function De(nt,mt){he.push("L",nt,",",mt)}function rt(){ye.point=_e}function $e(){he.push("Z")}return ye}function Ia(Y){return"m0,"+Y+"a"+Y+","+Y+" 0 1,1 0,"+-2*Y+"a"+Y+","+Y+" 0 1,1 0,"+2*Y+"z"}var ti={point:ya,lineStart:Xa,lineEnd:na,polygonStart:function(){ti.lineStart=_i},polygonEnd:function(){ti.point=ya,ti.lineStart=Xa,ti.lineEnd=na}};function ya(Y,he){mu+=Y,Rl+=he,++xl}function Xa(){var Y,he;ti.point=function(_e,Ee){ti.point=ye,ya(Y=_e,he=Ee)};function ye(_e,Ee){var De=_e-Y,rt=Ee-he,$e=Math.sqrt(De*De+rt*rt);Dl+=$e*(Y+_e)/2,fl+=$e*(he+Ee)/2,hl+=$e,ya(Y=_e,he=Ee)}}function na(){ti.point=ya}function _i(){var Y,he,ye,_e;ti.point=function(De,rt){ti.point=Ee,ya(Y=ye=De,he=_e=rt)};function Ee(De,rt){var $e=De-ye,nt=rt-_e,mt=Math.sqrt($e*$e+nt*nt);Dl+=mt*(ye+De)/2,fl+=mt*(_e+rt)/2,hl+=mt,mt=_e*De-ye*rt,eu+=mt*(ye+De),As+=mt*(_e+rt),Ru+=mt*3,ya(ye=De,_e=rt)}ti.lineEnd=function(){Ee(Y,he)}}function _a(Y){var he=4.5,ye={point:_e,lineStart:function(){ye.point=Ee},lineEnd:rt,polygonStart:function(){ye.lineEnd=$e},polygonEnd:function(){ye.lineEnd=rt,ye.point=_e},pointRadius:function(nt){return he=nt,ye},result:B};function _e(nt,mt){Y.moveTo(nt+he,mt),Y.arc(nt,mt,he,0,Be)}function Ee(nt,mt){Y.moveTo(nt,mt),ye.point=De}function De(nt,mt){Y.lineTo(nt,mt)}function rt(){ye.point=_e}function $e(){Y.closePath()}return ye}function Fa(Y){var he=.5,ye=Math.cos(30*Ie),_e=16;function Ee(nt){return(_e?rt:De)(nt)}function De(nt){return xi(nt,function(mt,Tt){mt=Y(mt,Tt),nt.point(mt[0],mt[1])})}function rt(nt){var mt,Tt,Vt,Yt,ur,Rr,ir,hr,mr,Dr,yr,kr,gn={point:vn,lineStart:hn,lineEnd:Xn,polygonStart:function(){nt.polygonStart(),gn.lineStart=ea},polygonEnd:function(){nt.polygonEnd(),gn.lineStart=hn}};function vn(ma,En){ma=Y(ma,En),nt.point(ma[0],ma[1])}function hn(){hr=NaN,gn.point=sn,nt.lineStart()}function sn(ma,En){var $n=Pu([ma,En]),ca=Y(ma,En);$e(hr,mr,ir,Dr,yr,kr,hr=ca[0],mr=ca[1],ir=ma,Dr=$n[0],yr=$n[1],kr=$n[2],_e,nt),nt.point(hr,mr)}function Xn(){gn.point=vn,nt.lineEnd()}function ea(){hn(),gn.point=La,gn.lineEnd=da}function La(ma,En){sn(mt=ma,En),Tt=hr,Vt=mr,Yt=Dr,ur=yr,Rr=kr,gn.point=sn}function da(){$e(hr,mr,ir,Dr,yr,kr,Tt,Vt,mt,Yt,ur,Rr,_e,nt),gn.lineEnd=Xn,Xn()}return gn}function $e(nt,mt,Tt,Vt,Yt,ur,Rr,ir,hr,mr,Dr,yr,kr,gn){var vn=Rr-nt,hn=ir-mt,sn=vn*vn+hn*hn;if(sn>4*he&&kr--){var Xn=Vt+mr,ea=Yt+Dr,La=ur+yr,da=Math.sqrt(Xn*Xn+ea*ea+La*La),ma=Math.asin(La/=da),En=_(_(La)-1)<lt||_(Tt-hr)<lt?(Tt+hr)/2:Math.atan2(ea,Xn),$n=Y(En,ma),ca=$n[0],yn=$n[1],Hn=ca-nt,Ha=yn-mt,gi=hn*Hn-vn*Ha;(gi*gi/sn>he||_((vn*Hn+hn*Ha)/sn-.5)>.3||Vt*mr+Yt*Dr+ur*yr<ye)&&($e(nt,mt,Tt,Vt,Yt,ur,ca,yn,En,Xn/=da,ea/=da,La,kr,gn),gn.point(ca,yn),$e(ca,yn,En,Xn,ea,La,Rr,ir,hr,mr,Dr,yr,kr,gn))}}return Ee.precision=function(nt){return arguments.length?(_e=(he=nt*nt)>0&&16,Ee):Math.sqrt(he)},Ee}r.geo.path=function(){var Y=4.5,he,ye,_e,Ee,De;function rt(nt){return nt&&(typeof Y=="function"&&Ee.pointRadius(+Y.apply(this,arguments)),(!De||!De.valid)&&(De=_e(Ee)),r.geo.stream(nt,De)),Ee.result()}rt.area=function(nt){return vr=0,r.geo.stream(nt,_e(qr)),vr},rt.centroid=function(nt){return mu=Rl=xl=Dl=fl=hl=eu=As=Ru=0,r.geo.stream(nt,_e(ti)),Ru?[eu/Ru,As/Ru]:hl?[Dl/hl,fl/hl]:xl?[mu/xl,Rl/xl]:[NaN,NaN]},rt.bounds=function(nt){return Pn=Wn=-(Nn=ia=1/0),r.geo.stream(nt,_e(aa)),[[Nn,ia],[Pn,Wn]]},rt.projection=function(nt){return arguments.length?(_e=(he=nt)?nt.stream||ki(nt):G,$e()):he},rt.context=function(nt){return arguments.length?(Ee=(ye=nt)==null?new Jn:new _a(nt),typeof Y!="function"&&Ee.pointRadius(Y),$e()):ye},rt.pointRadius=function(nt){return arguments.length?(Y=typeof nt=="function"?nt:(Ee.pointRadius(+nt),+nt),rt):Y};function $e(){return De=null,rt}return rt.projection(r.geo.albersUsa()).context(null)};function ki(Y){var he=Fa(function(ye,_e){return Y([ye*He,_e*He])});return function(ye){return Bi(he(ye))}}r.geo.transform=function(Y){return{stream:function(he){var ye=new vi(he);for(var _e in Y)ye[_e]=Y[_e];return ye}}};function vi(Y){this.stream=Y}vi.prototype={point:function(Y,he){this.stream.point(Y,he)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function xi(Y,he){return{point:he,sphere:function(){Y.sphere()},lineStart:function(){Y.lineStart()},lineEnd:function(){Y.lineEnd()},polygonStart:function(){Y.polygonStart()},polygonEnd:function(){Y.polygonEnd()}}}r.geo.projection=Zn,r.geo.projectionMutator=wi;function Zn(Y){return wi(function(){return Y})()}function wi(Y){var he,ye,_e,Ee=Fa(function(sn,Xn){return sn=he(sn,Xn),[sn[0]*De+ur,Rr-sn[1]*De]}),De=150,rt=480,$e=250,nt=0,mt=0,Tt=0,Vt=0,Yt=0,ur,Rr,ir=Dc,hr=G,mr=null,Dr=null,yr;function kr(sn){return sn=_e(sn[0]*Ie,sn[1]*Ie),[sn[0]*De+ur,Rr-sn[1]*De]}function gn(sn){return sn=_e.invert((sn[0]-ur)/De,(Rr-sn[1])/De),sn&&[sn[0]*He,sn[1]*He]}kr.stream=function(sn){return yr&&(yr.valid=!1),yr=Bi(ir(ye,Ee(hr(sn)))),yr.valid=!0,yr},kr.clipAngle=function(sn){return arguments.length?(ir=sn==null?(mr=sn,Dc):yt((mr=+sn)*Ie),hn()):mr},kr.clipExtent=function(sn){return arguments.length?(Dr=sn,hr=sn?tr(sn[0][0],sn[0][1],sn[1][0],sn[1][1]):G,hn()):Dr},kr.scale=function(sn){return arguments.length?(De=+sn,vn()):De},kr.translate=function(sn){return arguments.length?(rt=+sn[0],$e=+sn[1],vn()):[rt,$e]},kr.center=function(sn){return arguments.length?(nt=sn[0]%360*Ie,mt=sn[1]%360*Ie,vn()):[nt*He,mt*He]},kr.rotate=function(sn){return arguments.length?(Tt=sn[0]%360*Ie,Vt=sn[1]%360*Ie,Yt=sn.length>2?sn[2]%360*Ie:0,vn()):[Tt*He,Vt*He,Yt*He]},r.rebind(kr,Ee,"precision");function vn(){_e=gu(ye=to(Tt,Vt,Yt),he);var sn=he(nt,mt);return ur=rt-sn[0]*De,Rr=$e+sn[1]*De,hn()}function hn(){return yr&&(yr.valid=!1,yr=null),kr}return function(){return he=Y.apply(this,arguments),kr.invert=he.invert&&gn,vn()}}function Bi(Y){return xi(Y,function(he,ye){Y.point(he*Ie,ye*Ie)})}function li(Y,he){return[Y,he]}(r.geo.equirectangular=function(){return Zn(li)}).raw=li.invert=li,r.geo.rotation=function(Y){Y=to(Y[0]%360*Ie,Y[1]*Ie,Y.length>2?Y[2]*Ie:0);function he(ye){return ye=Y(ye[0]*Ie,ye[1]*Ie),ye[0]*=He,ye[1]*=He,ye}return he.invert=function(ye){return ye=Y.invert(ye[0]*Ie,ye[1]*Ie),ye[0]*=He,ye[1]*=He,ye},he};function Ca(Y,he){return[Y>Le?Y-Be:Y<-Le?Y+Be:Y,he]}Ca.invert=li;function to(Y,he,ye){return Y?he||ye?gu(Lo(Y),Oo(he,ye)):Lo(Y):he||ye?Oo(he,ye):Ca}function ro(Y){return function(he,ye){return he+=Y,[he>Le?he-Be:he<-Le?he+Be:he,ye]}}function Lo(Y){var he=ro(Y);return he.invert=ro(-Y),he}function Oo(Y,he){var ye=Math.cos(Y),_e=Math.sin(Y),Ee=Math.cos(he),De=Math.sin(he);function rt($e,nt){var mt=Math.cos(nt),Tt=Math.cos($e)*mt,Vt=Math.sin($e)*mt,Yt=Math.sin(nt),ur=Yt*ye+Tt*_e;return[Math.atan2(Vt*Ee-ur*De,Tt*ye-Yt*_e),Ge(ur*Ee+Vt*De)]}return rt.invert=function($e,nt){var mt=Math.cos(nt),Tt=Math.cos($e)*mt,Vt=Math.sin($e)*mt,Yt=Math.sin(nt),ur=Yt*Ee-Vt*De;return[Math.atan2(Vt*Ee+Yt*De,Tt*ye+ur*_e),Ge(ur*ye-Tt*_e)]},rt}r.geo.circle=function(){var Y=[0,0],he,ye=6,_e;function Ee(){var De=typeof Y=="function"?Y.apply(this,arguments):Y,rt=to(-De[0]*Ie,-De[1]*Ie,0).invert,$e=[];return _e(null,null,1,{point:function(nt,mt){$e.push(nt=rt(nt,mt)),nt[0]*=He,nt[1]*=He}}),{type:"Polygon",coordinates:[$e]}}return Ee.origin=function(De){return arguments.length?(Y=De,Ee):Y},Ee.angle=function(De){return arguments.length?(_e=Ji((he=+De)*Ie,ye*Ie),Ee):he},Ee.precision=function(De){return arguments.length?(_e=Ji(he*Ie,(ye=+De)*Ie),Ee):ye},Ee.angle(90)};function Ji(Y,he){var ye=Math.cos(Y),_e=Math.sin(Y);return function(Ee,De,rt,$e){var nt=rt*he;Ee!=null?(Ee=Zi(ye,Ee),De=Zi(ye,De),(rt>0?Ee<De:Ee>De)&&(Ee+=rt*Be)):(Ee=Y+rt*Be,De=Y-.5*nt);for(var mt,Tt=Ee;rt>0?Tt>De:Tt<De;Tt-=nt)$e.point((mt=$s([ye,-_e*Math.cos(Tt),-_e*Math.sin(Tt)]))[0],mt[1])}}function Zi(Y,he){var ye=Pu(he);ye[0]-=Y,eo(ye);var _e=it(-ye[1]);return((-ye[2]<0?-_e:_e)+2*Math.PI-lt)%(2*Math.PI)}r.geo.distance=function(Y,he){var ye=(he[0]-Y[0])*Ie,_e=Y[1]*Ie,Ee=he[1]*Ie,De=Math.sin(ye),rt=Math.cos(ye),$e=Math.sin(_e),nt=Math.cos(_e),mt=Math.sin(Ee),Tt=Math.cos(Ee),Vt;return Math.atan2(Math.sqrt((Vt=Tt*De)*Vt+(Vt=nt*mt-$e*Tt*rt)*Vt),$e*mt+nt*Tt*rt)},r.geo.graticule=function(){var Y,he,ye,_e,Ee,De,rt,$e,nt=10,mt=nt,Tt=90,Vt=360,Yt,ur,Rr,ir,hr=2.5;function mr(){return{type:"MultiLineString",coordinates:Dr()}}function Dr(){return r.range(Math.ceil(_e/Tt)*Tt,ye,Tt).map(Rr).concat(r.range(Math.ceil($e/Vt)*Vt,rt,Vt).map(ir)).concat(r.range(Math.ceil(he/nt)*nt,Y,nt).filter(function(yr){return _(yr%Tt)>lt}).map(Yt)).concat(r.range(Math.ceil(De/mt)*mt,Ee,mt).filter(function(yr){return _(yr%Vt)>lt}).map(ur))}return mr.lines=function(){return Dr().map(function(yr){return{type:"LineString",coordinates:yr}})},mr.outline=function(){return{type:"Polygon",coordinates:[Rr(_e).concat(ir(rt).slice(1),Rr(ye).reverse().slice(1),ir($e).reverse().slice(1))]}},mr.extent=function(yr){return arguments.length?mr.majorExtent(yr).minorExtent(yr):mr.minorExtent()},mr.majorExtent=function(yr){return arguments.length?(_e=+yr[0][0],ye=+yr[1][0],$e=+yr[0][1],rt=+yr[1][1],_e>ye&&(yr=_e,_e=ye,ye=yr),$e>rt&&(yr=$e,$e=rt,rt=yr),mr.precision(hr)):[[_e,$e],[ye,rt]]},mr.minorExtent=function(yr){return arguments.length?(he=+yr[0][0],Y=+yr[1][0],De=+yr[0][1],Ee=+yr[1][1],he>Y&&(yr=he,he=Y,Y=yr),De>Ee&&(yr=De,De=Ee,Ee=yr),mr.precision(hr)):[[he,De],[Y,Ee]]},mr.step=function(yr){return arguments.length?mr.majorStep(yr).minorStep(yr):mr.minorStep()},mr.majorStep=function(yr){return arguments.length?(Tt=+yr[0],Vt=+yr[1],mr):[Tt,Vt]},mr.minorStep=function(yr){return arguments.length?(nt=+yr[0],mt=+yr[1],mr):[nt,mt]},mr.precision=function(yr){return arguments.length?(hr=+yr,Yt=_o(De,Ee,90),ur=as(he,Y,hr),Rr=_o($e,rt,90),ir=as(_e,ye,hr),mr):hr},mr.majorExtent([[-180,-90+lt],[180,90-lt]]).minorExtent([[-180,-80-lt],[180,80+lt]])};function _o(Y,he,ye){var _e=r.range(Y,he-lt,ye).concat(he);return function(Ee){return _e.map(function(De){return[Ee,De]})}}function as(Y,he,ye){var _e=r.range(Y,he-lt,ye).concat(he);return function(Ee){return _e.map(function(De){return[De,Ee]})}}function vs(Y){return Y.source}function Js(Y){return Y.target}r.geo.greatArc=function(){var Y=vs,he,ye=Js,_e;function Ee(){return{type:"LineString",coordinates:[he||Y.apply(this,arguments),_e||ye.apply(this,arguments)]}}return Ee.distance=function(){return r.geo.distance(he||Y.apply(this,arguments),_e||ye.apply(this,arguments))},Ee.source=function(De){return arguments.length?(Y=De,he=typeof De=="function"?null:De,Ee):Y},Ee.target=function(De){return arguments.length?(ye=De,_e=typeof De=="function"?null:De,Ee):ye},Ee.precision=function(){return arguments.length?Ee:0},Ee},r.geo.interpolate=function(Y,he){return xo(Y[0]*Ie,Y[1]*Ie,he[0]*Ie,he[1]*Ie)};function xo(Y,he,ye,_e){var Ee=Math.cos(he),De=Math.sin(he),rt=Math.cos(_e),$e=Math.sin(_e),nt=Ee*Math.cos(Y),mt=Ee*Math.sin(Y),Tt=rt*Math.cos(ye),Vt=rt*Math.sin(ye),Yt=2*Math.asin(Math.sqrt(It(_e-he)+Ee*rt*It(ye-Y))),ur=1/Math.sin(Yt),Rr=Yt?function(ir){var hr=Math.sin(ir*=Yt)*ur,mr=Math.sin(Yt-ir)*ur,Dr=mr*nt+hr*Tt,yr=mr*mt+hr*Vt,kr=mr*De+hr*$e;return[Math.atan2(yr,Dr)*He,Math.atan2(kr,Math.sqrt(Dr*Dr+yr*yr))*He]}:function(){return[Y*He,he*He]};return Rr.distance=Yt,Rr}r.geo.length=function(Y){return ni=0,r.geo.stream(Y,ui),ni};var ni,ui={sphere:B,point:B,lineStart:Po,lineEnd:B,polygonStart:B,polygonEnd:B};function Po(){var Y,he,ye;ui.point=function(Ee,De){Y=Ee*Ie,he=Math.sin(De*=Ie),ye=Math.cos(De),ui.point=_e},ui.lineEnd=function(){ui.point=ui.lineEnd=B};function _e(Ee,De){var rt=Math.sin(De*=Ie),$e=Math.cos(De),nt=_((Ee*=Ie)-Y),mt=Math.cos(nt);ni+=Math.atan2(Math.sqrt((nt=$e*Math.sin(nt))*nt+(nt=ye*rt-he*$e*mt)*nt),he*rt+ye*$e*mt),Y=Ee,he=rt,ye=$e}}function no(Y,he){function ye(_e,Ee){var De=Math.cos(_e),rt=Math.cos(Ee),$e=Y(De*rt);return[$e*rt*Math.sin(_e),$e*Math.sin(Ee)]}return ye.invert=function(_e,Ee){var De=Math.sqrt(_e*_e+Ee*Ee),rt=he(De),$e=Math.sin(rt),nt=Math.cos(rt);return[Math.atan2(_e*$e,De*nt),Math.asin(De&&Ee*$e/De)]},ye}var Ao=no(function(Y){return Math.sqrt(2/(1+Y))},function(Y){return 2*Math.asin(Y/2)});(r.geo.azimuthalEqualArea=function(){return Zn(Ao)}).raw=Ao;var Qo=no(function(Y){var he=Math.acos(Y);return he&&he/Math.sin(he)},G);(r.geo.azimuthalEquidistant=function(){return Zn(Qo)}).raw=Qo;function Gi(Y,he){var ye=Math.cos(Y),_e=function($e){return Math.tan(Le/4+$e/2)},Ee=Y===he?Math.sin(Y):Math.log(ye/Math.cos(he))/Math.log(_e(he)/_e(Y)),De=ye*Math.pow(_e(Y),Ee)/Ee;if(!Ee)return Ea;function rt($e,nt){De>0?nt<-Me+lt&&(nt=-Me+lt):nt>Me-lt&&(nt=Me-lt);var mt=De/Math.pow(_e(nt),Ee);return[mt*Math.sin(Ee*$e),De-mt*Math.cos(Ee*$e)]}return rt.invert=function($e,nt){var mt=De-nt,Tt=Xe(Ee)*Math.sqrt($e*$e+mt*mt);return[Math.atan2($e,mt)/Ee,2*Math.atan(Math.pow(De/Tt,1/Ee))-Me]},rt}(r.geo.conicConformal=function(){return ar(Gi)}).raw=Gi;function Ya(Y,he){var ye=Math.cos(Y),_e=Y===he?Math.sin(Y):(ye-Math.cos(he))/(he-Y),Ee=ye/_e+Y;if(_(_e)<lt)return li;function De(rt,$e){var nt=Ee-$e;return[nt*Math.sin(_e*rt),Ee-nt*Math.cos(_e*rt)]}return De.invert=function(rt,$e){var nt=Ee-$e;return[Math.atan2(rt,nt)/_e,Ee-Xe(_e)*Math.sqrt(rt*rt+nt*nt)]},De}(r.geo.conicEquidistant=function(){return ar(Ya)}).raw=Ya;var is=no(function(Y){return 1/Y},Math.atan);(r.geo.gnomonic=function(){return Zn(is)}).raw=is;function Ea(Y,he){return[Y,Math.log(Math.tan(Le/4+he/2))]}Ea.invert=function(Y,he){return[Y,2*Math.atan(Math.exp(he))-Me]};function Ga(Y){var he=Zn(Y),ye=he.scale,_e=he.translate,Ee=he.clipExtent,De;return he.scale=function(){var rt=ye.apply(he,arguments);return rt===he?De?he.clipExtent(null):he:rt},he.translate=function(){var rt=_e.apply(he,arguments);return rt===he?De?he.clipExtent(null):he:rt},he.clipExtent=function(rt){var $e=Ee.apply(he,arguments);if($e===he){if(De=rt==null){var nt=Le*ye(),mt=_e();Ee([[mt[0]-nt,mt[1]-nt],[mt[0]+nt,mt[1]+nt]])}}else De&&($e=null);return $e},he.clipExtent(null)}(r.geo.mercator=function(){return Ga(Ea)}).raw=Ea;var Li=no(function(){return 1},Math.asin);(r.geo.orthographic=function(){return Zn(Li)}).raw=Li;var Mi=no(function(Y){return 1/(1+Y)},function(Y){return 2*Math.atan(Y)});(r.geo.stereographic=function(){return Zn(Mi)}).raw=Mi;function Qn(Y,he){return[Math.log(Math.tan(Le/4+he/2)),-Y]}Qn.invert=function(Y,he){return[-he,2*Math.atan(Math.exp(Y))-Me]},(r.geo.transverseMercator=function(){var Y=Ga(Qn),he=Y.center,ye=Y.rotate;return Y.center=function(_e){return _e?he([-_e[1],_e[0]]):(_e=he(),[_e[1],-_e[0]])},Y.rotate=function(_e){return _e?ye([_e[0],_e[1],_e.length>2?_e[2]+90:90]):(_e=ye(),[_e[0],_e[1],_e[2]-90])},ye([0,0,90])}).raw=Qn,r.geom={};function za(Y){return Y[0]}function Si(Y){return Y[1]}r.geom.hull=function(Y){var he=za,ye=Si;if(arguments.length)return _e(Y);function _e(Ee){if(Ee.length<3)return[];var De=Er(he),rt=Er(ye),$e,nt=Ee.length,mt=[],Tt=[];for($e=0;$e<nt;$e++)mt.push([+De.call(this,Ee[$e],$e),+rt.call(this,Ee[$e],$e),$e]);for(mt.sort(uo),$e=0;$e<nt;$e++)Tt.push([mt[$e][0],-mt[$e][1]]);var Vt=Vi(mt),Yt=Vi(Tt),ur=Yt[0]===Vt[0],Rr=Yt[Yt.length-1]===Vt[Vt.length-1],ir=[];for($e=Vt.length-1;$e>=0;--$e)ir.push(Ee[mt[Vt[$e]][2]]);for($e=+ur;$e<Yt.length-Rr;++$e)ir.push(Ee[mt[Yt[$e]][2]]);return ir}return _e.x=function(Ee){return arguments.length?(he=Ee,_e):he},_e.y=function(Ee){return arguments.length?(ye=Ee,_e):ye},_e};function Vi(Y){for(var he=Y.length,ye=[0,1],_e=2,Ee=2;Ee<he;Ee++){for(;_e>1&&ht(Y[ye[_e-2]],Y[ye[_e-1]],Y[Ee])<=0;)--_e;ye[_e++]=Ee}return ye.slice(0,_e)}function uo(Y,he){return Y[0]-he[0]||Y[1]-he[1]}r.geom.polygon=function(Y){return ie(Y,Ei),Y};var Ei=r.geom.polygon.prototype=[];Ei.area=function(){for(var Y=-1,he=this.length,ye,_e=this[he-1],Ee=0;++Y<he;)ye=_e,_e=this[Y],Ee+=ye[1]*_e[0]-ye[0]*_e[1];return Ee*.5},Ei.centroid=function(Y){var he=-1,ye=this.length,_e=0,Ee=0,De,rt=this[ye-1],$e;for(arguments.length||(Y=-1/(6*this.area()));++he<ye;)De=rt,rt=this[he],$e=De[0]*rt[1]-rt[0]*De[1],_e+=(De[0]+rt[0])*$e,Ee+=(De[1]+rt[1])*$e;return[_e*Y,Ee*Y]},Ei.clip=function(Y){for(var he,ye=ks(Y),_e=-1,Ee=this.length-ks(this),De,rt,$e=this[Ee-1],nt,mt,Tt;++_e<Ee;){for(he=Y.slice(),Y.length=0,nt=this[_e],mt=he[(rt=he.length-ye)-1],De=-1;++De<rt;)Tt=he[De],Qi(Tt,$e,nt)?(Qi(mt,$e,nt)||Y.push(qo(mt,Tt,$e,nt)),Y.push(Tt)):Qi(mt,$e,nt)&&Y.push(qo(mt,Tt,$e,nt)),mt=Tt;ye&&Y.push(Y[0]),$e=nt}return Y};function Qi(Y,he,ye){return(ye[0]-he[0])*(Y[1]-he[1])<(ye[1]-he[1])*(Y[0]-he[0])}function qo(Y,he,ye,_e){var Ee=Y[0],De=ye[0],rt=he[0]-Ee,$e=_e[0]-De,nt=Y[1],mt=ye[1],Tt=he[1]-nt,Vt=_e[1]-mt,Yt=($e*(nt-mt)-Vt*(Ee-De))/(Vt*rt-$e*Tt);return[Ee+Yt*rt,nt+Yt*Tt]}function ks(Y){var he=Y[0],ye=Y[Y.length-1];return!(he[0]-ye[0]||he[1]-ye[1])}var or,Fo,fo,Di=[],mi,Is,_l=[];function dl(){ut(this),this.edge=this.site=this.circle=null}function No(Y){var he=Di.pop()||new dl;return he.site=Y,he}function wl(Y){Xi(Y),fo.remove(Y),Di.push(Y),ut(Y)}function Qs(Y){var he=Y.circle,ye=he.x,_e=he.cy,Ee={x:ye,y:_e},De=Y.P,rt=Y.N,$e=[Y];wl(Y);for(var nt=De;nt.circle&&_(ye-nt.circle.x)<lt&&_(_e-nt.circle.cy)<lt;)De=nt.P,$e.unshift(nt),wl(nt),nt=De;$e.unshift(nt),Xi(nt);for(var mt=rt;mt.circle&&_(ye-mt.circle.x)<lt&&_(_e-mt.circle.cy)<lt;)rt=mt.N,$e.push(mt),wl(mt),mt=rt;$e.push(mt),Xi(mt);var Tt=$e.length,Vt;for(Vt=1;Vt<Tt;++Vt)mt=$e[Vt],nt=$e[Vt-1],Se(mt.edge,nt.site,mt.site,Ee);nt=$e[0],mt=$e[Tt-1],mt.edge=q(nt.site,mt.site,null,Ee),Ro(nt),Ro(mt)}function Vo(Y){for(var he=Y.x,ye=Y.y,_e,Ee,De,rt,$e=fo._;$e;)if(De=Tl($e,ye)-he,De>lt)$e=$e.L;else if(rt=he-Hl($e,ye),rt>lt){if(!$e.R){_e=$e;break}$e=$e.R}else{De>-lt?(_e=$e.P,Ee=$e):rt>-lt?(_e=$e,Ee=$e.N):_e=Ee=$e;break}var nt=No(Y);if(fo.insert(_e,nt),!(!_e&&!Ee)){if(_e===Ee){Xi(_e),Ee=No(_e.site),fo.insert(nt,Ee),nt.edge=Ee.edge=q(_e.site,nt.site),Ro(_e),Ro(Ee);return}if(!Ee){nt.edge=q(_e.site,nt.site);return}Xi(_e),Xi(Ee);var mt=_e.site,Tt=mt.x,Vt=mt.y,Yt=Y.x-Tt,ur=Y.y-Vt,Rr=Ee.site,ir=Rr.x-Tt,hr=Rr.y-Vt,mr=2*(Yt*hr-ur*ir),Dr=Yt*Yt+ur*ur,yr=ir*ir+hr*hr,kr={x:(hr*Dr-ur*yr)/mr+Tt,y:(Yt*yr-ir*Dr)/mr+Vt};Se(Ee.edge,mt,Rr,kr),nt.edge=q(mt,Y,null,kr),Ee.edge=q(Y,Rr,null,kr),Ro(_e),Ro(Ee)}}function Tl(Y,he){var ye=Y.site,_e=ye.x,Ee=ye.y,De=Ee-he;if(!De)return _e;var rt=Y.P;if(!rt)return-1/0;ye=rt.site;var $e=ye.x,nt=ye.y,mt=nt-he;if(!mt)return $e;var Tt=$e-_e,Vt=1/De-1/mt,Yt=Tt/mt;return Vt?(-Yt+Math.sqrt(Yt*Yt-2*Vt*(Tt*Tt/(-2*mt)-nt+mt/2+Ee-De/2)))/Vt+_e:(_e+$e)/2}function Hl(Y,he){var ye=Y.N;if(ye)return Tl(ye,he);var _e=Y.site;return _e.y===he?_e.x:1/0}function So(Y){this.site=Y,this.edges=[]}So.prototype.prepare=function(){for(var Y=this.edges,he=Y.length,ye;he--;)ye=Y[he].edge,(!ye.b||!ye.a)&&Y.splice(he,1);return Y.sort(zs),Y.length};function ms(Y){for(var he=Y[0][0],ye=Y[1][0],_e=Y[0][1],Ee=Y[1][1],De,rt,$e,nt,mt=Fo,Tt=mt.length,Vt,Yt,ur,Rr,ir,hr;Tt--;)if(Vt=mt[Tt],!(!Vt||!Vt.prepare()))for(ur=Vt.edges,Rr=ur.length,Yt=0;Yt<Rr;)hr=ur[Yt].end(),$e=hr.x,nt=hr.y,ir=ur[++Yt%Rr].start(),De=ir.x,rt=ir.y,(_($e-De)>lt||_(nt-rt)>lt)&&(ur.splice(Yt,0,new Oe(ve(Vt.site,hr,_($e-he)<lt&&Ee-nt>lt?{x:he,y:_(De-he)<lt?rt:Ee}:_(nt-Ee)<lt&&ye-$e>lt?{x:_(rt-Ee)<lt?De:ye,y:Ee}:_($e-ye)<lt&&nt-_e>lt?{x:ye,y:_(De-ye)<lt?rt:_e}:_(nt-_e)<lt&&$e-he>lt?{x:_(rt-_e)<lt?De:he,y:_e}:null),Vt.site,null)),++Rr)}function zs(Y,he){return he.angle-Y.angle}function vl(){ut(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ro(Y){var he=Y.P,ye=Y.N;if(!(!he||!ye)){var _e=he.site,Ee=Y.site,De=ye.site;if(_e!==De){var rt=Ee.x,$e=Ee.y,nt=_e.x-rt,mt=_e.y-$e,Tt=De.x-rt,hr=De.y-$e,Vt=2*(nt*hr-mt*Tt);if(!(Vt>=-Te)){var Yt=nt*nt+mt*mt,ur=Tt*Tt+hr*hr,Rr=(hr*Yt-mt*ur)/Vt,ir=(nt*ur-Tt*Yt)/Vt,hr=ir+$e,mr=_l.pop()||new vl;mr.arc=Y,mr.site=Ee,mr.x=Rr+rt,mr.y=hr+Math.sqrt(Rr*Rr+ir*ir),mr.cy=hr,Y.circle=mr;for(var Dr=null,yr=Is._;yr;)if(mr.y<yr.y||mr.y===yr.y&&mr.x<=yr.x)if(yr.L)yr=yr.L;else{Dr=yr.P;break}else if(yr.R)yr=yr.R;else{Dr=yr;break}Is.insert(Dr,mr),Dr||(mi=mr)}}}}function Xi(Y){var he=Y.circle;he&&(he.P||(mi=he.N),Is.remove(he),_l.push(he),ut(he),Y.circle=null)}function wo(Y){for(var he=or,ye=Ct(Y[0][0],Y[0][1],Y[1][0],Y[1][1]),_e=he.length,Ee;_e--;)Ee=he[_e],(!$(Ee,Y)||!ye(Ee)||_(Ee.a.x-Ee.b.x)<lt&&_(Ee.a.y-Ee.b.y)<lt)&&(Ee.a=Ee.b=null,he.splice(_e,1))}function $(Y,he){var ye=Y.b;if(ye)return!0;var _e=Y.a,Ee=he[0][0],De=he[1][0],rt=he[0][1],$e=he[1][1],nt=Y.l,mt=Y.r,Tt=nt.x,Vt=nt.y,Yt=mt.x,ur=mt.y,Rr=(Tt+Yt)/2,ir=(Vt+ur)/2,hr,mr;if(ur===Vt){if(Rr<Ee||Rr>=De)return;if(Tt>Yt){if(!_e)_e={x:Rr,y:rt};else if(_e.y>=$e)return;ye={x:Rr,y:$e}}else{if(!_e)_e={x:Rr,y:$e};else if(_e.y<rt)return;ye={x:Rr,y:rt}}}else if(hr=(Tt-Yt)/(ur-Vt),mr=ir-hr*Rr,hr<-1||hr>1)if(Tt>Yt){if(!_e)_e={x:(rt-mr)/hr,y:rt};else if(_e.y>=$e)return;ye={x:($e-mr)/hr,y:$e}}else{if(!_e)_e={x:($e-mr)/hr,y:$e};else if(_e.y<rt)return;ye={x:(rt-mr)/hr,y:rt}}else if(Vt<ur){if(!_e)_e={x:Ee,y:hr*Ee+mr};else if(_e.x>=De)return;ye={x:De,y:hr*De+mr}}else{if(!_e)_e={x:De,y:hr*De+mr};else if(_e.x<Ee)return;ye={x:Ee,y:hr*Ee+mr}}return Y.a=_e,Y.b=ye,!0}function ne(Y,he){this.l=Y,this.r=he,this.a=this.b=null}function q(Y,he,ye,_e){var Ee=new ne(Y,he);return or.push(Ee),ye&&Se(Ee,Y,he,ye),_e&&Se(Ee,he,Y,_e),Fo[Y.i].edges.push(new Oe(Ee,Y,he)),Fo[he.i].edges.push(new Oe(Ee,he,Y)),Ee}function ve(Y,he,ye){var _e=new ne(Y,null);return _e.a=he,_e.b=ye,or.push(_e),_e}function Se(Y,he,ye,_e){!Y.a&&!Y.b?(Y.a=_e,Y.l=he,Y.r=ye):Y.l===ye?Y.b=_e:Y.a=_e}function Oe(Y,he,ye){var _e=Y.a,Ee=Y.b;this.edge=Y,this.site=he,this.angle=ye?Math.atan2(ye.y-he.y,ye.x-he.x):Y.l===he?Math.atan2(Ee.x-_e.x,_e.y-Ee.y):Math.atan2(_e.x-Ee.x,Ee.y-_e.y)}Oe.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Ye(){this._=null}function ut(Y){Y.U=Y.C=Y.L=Y.R=Y.P=Y.N=null}Ye.prototype={insert:function(Y,he){var ye,_e,Ee;if(Y){if(he.P=Y,he.N=Y.N,Y.N&&(Y.N.P=he),Y.N=he,Y.R){for(Y=Y.R;Y.L;)Y=Y.L;Y.L=he}else Y.R=he;ye=Y}else this._?(Y=sr(this._),he.P=null,he.N=Y,Y.P=Y.L=he,ye=Y):(he.P=he.N=null,this._=he,ye=null);for(he.L=he.R=null,he.U=ye,he.C=!0,Y=he;ye&&ye.C;)_e=ye.U,ye===_e.L?(Ee=_e.R,Ee&&Ee.C?(ye.C=Ee.C=!1,_e.C=!0,Y=_e):(Y===ye.R&&(bt(this,ye),Y=ye,ye=Y.U),ye.C=!1,_e.C=!0,jt(this,_e))):(Ee=_e.L,Ee&&Ee.C?(ye.C=Ee.C=!1,_e.C=!0,Y=_e):(Y===ye.L&&(jt(this,ye),Y=ye,ye=Y.U),ye.C=!1,_e.C=!0,bt(this,_e))),ye=Y.U;this._.C=!1},remove:function(Y){Y.N&&(Y.N.P=Y.P),Y.P&&(Y.P.N=Y.N),Y.N=Y.P=null;var he=Y.U,ye,_e=Y.L,Ee=Y.R,De,rt;if(_e?Ee?De=sr(Ee):De=_e:De=Ee,he?he.L===Y?he.L=De:he.R=De:this._=De,_e&&Ee?(rt=De.C,De.C=Y.C,De.L=_e,_e.U=De,De!==Ee?(he=De.U,De.U=Y.U,Y=De.R,he.L=Y,De.R=Ee,Ee.U=De):(De.U=he,he=De,Y=De.R)):(rt=Y.C,Y=De),Y&&(Y.U=he),!rt){if(Y&&Y.C){Y.C=!1;return}do{if(Y===this._)break;if(Y===he.L){if(ye=he.R,ye.C&&(ye.C=!1,he.C=!0,bt(this,he),ye=he.R),ye.L&&ye.L.C||ye.R&&ye.R.C){(!ye.R||!ye.R.C)&&(ye.L.C=!1,ye.C=!0,jt(this,ye),ye=he.R),ye.C=he.C,he.C=ye.R.C=!1,bt(this,he),Y=this._;break}}else if(ye=he.L,ye.C&&(ye.C=!1,he.C=!0,jt(this,he),ye=he.L),ye.L&&ye.L.C||ye.R&&ye.R.C){(!ye.L||!ye.L.C)&&(ye.R.C=!1,ye.C=!0,bt(this,ye),ye=he.L),ye.C=he.C,he.C=ye.L.C=!1,jt(this,he),Y=this._;break}ye.C=!0,Y=he,he=he.U}while(!Y.C);Y&&(Y.C=!1)}}};function bt(Y,he){var ye=he,_e=he.R,Ee=ye.U;Ee?Ee.L===ye?Ee.L=_e:Ee.R=_e:Y._=_e,_e.U=Ee,ye.U=_e,ye.R=_e.L,ye.R&&(ye.R.U=ye),_e.L=ye}function jt(Y,he){var ye=he,_e=he.L,Ee=ye.U;Ee?Ee.L===ye?Ee.L=_e:Ee.R=_e:Y._=_e,_e.U=Ee,ye.U=_e,ye.L=_e.R,ye.L&&(ye.L.U=ye),_e.R=ye}function sr(Y){for(;Y.L;)Y=Y.L;return Y}function pr(Y,he){var ye=Y.sort(br).pop(),_e,Ee,De;for(or=[],Fo=new Array(Y.length),fo=new Ye,Is=new Ye;;)if(De=mi,ye&&(!De||ye.y<De.y||ye.y===De.y&&ye.x<De.x))(ye.x!==_e||ye.y!==Ee)&&(Fo[ye.i]=new So(ye),Vo(ye),_e=ye.x,Ee=ye.y),ye=Y.pop();else if(De)Qs(De.arc);else break;he&&(wo(he),ms(he));var rt={cells:Fo,edges:or};return fo=Is=or=Fo=null,rt}function br(Y,he){return he.y-Y.y||he.x-Y.x}r.geom.voronoi=function(Y){var he=za,ye=Si,_e=he,Ee=ye,De=Cr;if(Y)return rt(Y);function rt(nt){var mt=new Array(nt.length),Tt=De[0][0],Vt=De[0][1],Yt=De[1][0],ur=De[1][1];return pr($e(nt),De).cells.forEach(function(Rr,ir){var hr=Rr.edges,mr=Rr.site,Dr=mt[ir]=hr.length?hr.map(function(yr){var kr=yr.start();return[kr.x,kr.y]}):mr.x>=Tt&&mr.x<=Yt&&mr.y>=Vt&&mr.y<=ur?[[Tt,ur],[Yt,ur],[Yt,Vt],[Tt,Vt]]:[];Dr.point=nt[ir]}),mt}function $e(nt){return nt.map(function(mt,Tt){return{x:Math.round(_e(mt,Tt)/lt)*lt,y:Math.round(Ee(mt,Tt)/lt)*lt,i:Tt}})}return rt.links=function(nt){return pr($e(nt)).edges.filter(function(mt){return mt.l&&mt.r}).map(function(mt){return{source:nt[mt.l.i],target:nt[mt.r.i]}})},rt.triangles=function(nt){var mt=[];return pr($e(nt)).cells.forEach(function(Tt,Vt){for(var Yt=Tt.site,ur=Tt.edges.sort(zs),Rr=-1,ir=ur.length,hr,mr=ur[ir-1].edge,Dr=mr.l===Yt?mr.r:mr.l;++Rr<ir;)hr=Dr,mr=ur[Rr].edge,Dr=mr.l===Yt?mr.r:mr.l,Vt<hr.i&&Vt<Dr.i&&Pr(Yt,hr,Dr)<0&&mt.push([nt[Vt],nt[hr.i],nt[Dr.i]])}),mt},rt.x=function(nt){return arguments.length?(_e=Er(he=nt),rt):he},rt.y=function(nt){return arguments.length?(Ee=Er(ye=nt),rt):ye},rt.clipExtent=function(nt){return arguments.length?(De=nt??Cr,rt):De===Cr?null:De},rt.size=function(nt){return arguments.length?rt.clipExtent(nt&&[[0,0],nt]):De===Cr?null:De&&De[1]},rt};var Cr=[[-1e6,-1e6],[1e6,1e6]];function Pr(Y,he,ye){return(Y.x-ye.x)*(he.y-Y.y)-(Y.x-he.x)*(ye.y-Y.y)}r.geom.delaunay=function(Y){return r.geom.voronoi().triangles(Y)},r.geom.quadtree=function(Y,he,ye,_e,Ee){var De=za,rt=Si,$e;if($e=arguments.length)return De=jr,rt=Mr,$e===3&&(Ee=ye,_e=he,ye=he=0),nt(Y);function nt(mt){var Tt,Vt=Er(De),Yt=Er(rt),ur,Rr,ir,hr,mr,Dr,yr,kr;if(he!=null)mr=he,Dr=ye,yr=_e,kr=Ee;else if(yr=kr=-(mr=Dr=1/0),ur=[],Rr=[],hr=mt.length,$e)for(ir=0;ir<hr;++ir)Tt=mt[ir],Tt.x<mr&&(mr=Tt.x),Tt.y<Dr&&(Dr=Tt.y),Tt.x>yr&&(yr=Tt.x),Tt.y>kr&&(kr=Tt.y),ur.push(Tt.x),Rr.push(Tt.y);else for(ir=0;ir<hr;++ir){var gn=+Vt(Tt=mt[ir],ir),vn=+Yt(Tt,ir);gn<mr&&(mr=gn),vn<Dr&&(Dr=vn),gn>yr&&(yr=gn),vn>kr&&(kr=vn),ur.push(gn),Rr.push(vn)}var hn=yr-mr,sn=kr-Dr;hn>sn?kr=Dr+hn:yr=mr+sn;function Xn(da,ma,En,$n,ca,yn,Hn,Ha){if(!(isNaN(En)||isNaN($n)))if(da.leaf){var gi=da.x,Pi=da.y;if(gi!=null)if(_(gi-En)+_(Pi-$n)<.01)ea(da,ma,En,$n,ca,yn,Hn,Ha);else{var mo=da.point;da.x=da.y=da.point=null,ea(da,mo,gi,Pi,ca,yn,Hn,Ha),ea(da,ma,En,$n,ca,yn,Hn,Ha)}else da.x=En,da.y=$n,da.point=ma}else ea(da,ma,En,$n,ca,yn,Hn,Ha)}function ea(da,ma,En,$n,ca,yn,Hn,Ha){var gi=(ca+Hn)*.5,Pi=(yn+Ha)*.5,mo=En>=gi,Do=$n>=Pi,tl=Do<<1|mo;da.leaf=!1,da=da.nodes[tl]||(da.nodes[tl]=Ur()),mo?ca=gi:Hn=gi,Do?yn=Pi:Ha=Pi,Xn(da,ma,En,$n,ca,yn,Hn,Ha)}var La=Ur();if(La.add=function(da){Xn(La,da,+Vt(da,++ir),+Yt(da,ir),mr,Dr,yr,kr)},La.visit=function(da){Jr(da,La,mr,Dr,yr,kr)},La.find=function(da){return fn(La,da[0],da[1],mr,Dr,yr,kr)},ir=-1,he==null){for(;++ir<hr;)Xn(La,mt[ir],ur[ir],Rr[ir],mr,Dr,yr,kr);--ir}else mt.forEach(La.add);return ur=Rr=mt=Tt=null,La}return nt.x=function(mt){return arguments.length?(De=mt,nt):De},nt.y=function(mt){return arguments.length?(rt=mt,nt):rt},nt.extent=function(mt){return arguments.length?(mt==null?he=ye=_e=Ee=null:(he=+mt[0][0],ye=+mt[0][1],_e=+mt[1][0],Ee=+mt[1][1]),nt):he==null?null:[[he,ye],[_e,Ee]]},nt.size=function(mt){return arguments.length?(mt==null?he=ye=_e=Ee=null:(he=ye=0,_e=+mt[0],Ee=+mt[1]),nt):he==null?null:[_e-he,Ee-ye]},nt};function jr(Y){return Y.x}function Mr(Y){return Y.y}function Ur(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Jr(Y,he,ye,_e,Ee,De){if(!Y(he,ye,_e,Ee,De)){var rt=(ye+Ee)*.5,$e=(_e+De)*.5,nt=he.nodes;nt[0]&&Jr(Y,nt[0],ye,_e,rt,$e),nt[1]&&Jr(Y,nt[1],rt,_e,Ee,$e),nt[2]&&Jr(Y,nt[2],ye,$e,rt,De),nt[3]&&Jr(Y,nt[3],rt,$e,Ee,De)}}function fn(Y,he,ye,_e,Ee,De,rt){var $e=1/0,nt;return function mt(Tt,Vt,Yt,ur,Rr){if(!(Vt>De||Yt>rt||ur<_e||Rr<Ee)){if(ir=Tt.point){var ir,hr=he-Tt.x,mr=ye-Tt.y,Dr=hr*hr+mr*mr;if(Dr<$e){var yr=Math.sqrt($e=Dr);_e=he-yr,Ee=ye-yr,De=he+yr,rt=ye+yr,nt=ir}}for(var kr=Tt.nodes,gn=(Vt+ur)*.5,vn=(Yt+Rr)*.5,hn=he>=gn,sn=ye>=vn,Xn=sn<<1|hn,ea=Xn+4;Xn<ea;++Xn)if(Tt=kr[Xn&3])switch(Xn&3){case 0:mt(Tt,Vt,Yt,gn,vn);break;case 1:mt(Tt,gn,Yt,ur,vn);break;case 2:mt(Tt,Vt,vn,gn,Rr);break;case 3:mt(Tt,gn,vn,ur,Rr);break}}}(Y,_e,Ee,De,rt),nt}r.interpolateRgb=zn;function zn(Y,he){Y=r.rgb(Y),he=r.rgb(he);var ye=Y.r,_e=Y.g,Ee=Y.b,De=he.r-ye,rt=he.g-_e,$e=he.b-Ee;return function(nt){return"#"+tn(Math.round(ye+De*nt))+tn(Math.round(_e+rt*nt))+tn(Math.round(Ee+$e*nt))}}r.interpolateObject=kn;function kn(Y,he){var ye={},_e={},Ee;for(Ee in Y)Ee in he?ye[Ee]=wa(Y[Ee],he[Ee]):_e[Ee]=Y[Ee];for(Ee in he)Ee in Y||(_e[Ee]=he[Ee]);return function(De){for(Ee in ye)_e[Ee]=ye[Ee](De);return _e}}r.interpolateNumber=Dn;function Dn(Y,he){return Y=+Y,he=+he,function(ye){return Y*(1-ye)+he*ye}}r.interpolateString=qn;function qn(Y,he){var ye=pa.lastIndex=ua.lastIndex=0,_e,Ee,De,rt=-1,$e=[],nt=[];for(Y=Y+"",he=he+"";(_e=pa.exec(Y))&&(Ee=ua.exec(he));)(De=Ee.index)>ye&&(De=he.slice(ye,De),$e[rt]?$e[rt]+=De:$e[++rt]=De),(_e=_e[0])===(Ee=Ee[0])?$e[rt]?$e[rt]+=Ee:$e[++rt]=Ee:($e[++rt]=null,nt.push({i:rt,x:Dn(_e,Ee)})),ye=ua.lastIndex;return ye<he.length&&(De=he.slice(ye),$e[rt]?$e[rt]+=De:$e[++rt]=De),$e.length<2?nt[0]?(he=nt[0].x,function(mt){return he(mt)+""}):function(){return he}:(he=nt.length,function(mt){for(var Tt=0,Vt;Tt<he;++Tt)$e[(Vt=nt[Tt]).i]=Vt.x(mt);return $e.join("")})}var pa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ua=new RegExp(pa.source,"g");r.interpolate=wa;function wa(Y,he){for(var ye=r.interpolators.length,_e;--ye>=0&&!(_e=r.interpolators[ye](Y,he)););return _e}r.interpolators=[function(Y,he){var ye=typeof he;return(ye==="string"?cr.has(he.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(he)?zn:qn:he instanceof wt?zn:Array.isArray(he)?Da:ye==="object"&&isNaN(he)?kn:Dn)(Y,he)}],r.interpolateArray=Da;function Da(Y,he){var ye=[],_e=[],Ee=Y.length,De=he.length,rt=Math.min(Y.length,he.length),$e;for($e=0;$e<rt;++$e)ye.push(wa(Y[$e],he[$e]));for(;$e<Ee;++$e)_e[$e]=Y[$e];for(;$e<De;++$e)_e[$e]=he[$e];return function(nt){for($e=0;$e<rt;++$e)_e[$e]=ye[$e](nt);return _e}}var oi=function(){return G},qa=r.map({linear:oi,poly:si,quad:function(){return hi},cubic:function(){return ii},sin:function(){return Na},exp:function(){return os},circle:function(){return Bo},elastic:bo,back:ho,bounce:function(){return es}}),Fi=r.map({in:G,out:fi,"in-out":Ii,"out-in":function(Y){return Ii(fi(Y))}});r.ease=function(Y){var he=Y.indexOf("-"),ye=he>=0?Y.slice(0,he):Y,_e=he>=0?Y.slice(he+1):"in";return ye=qa.get(ye)||oi,_e=Fi.get(_e)||G,Ua(_e(ye.apply(null,n.call(arguments,1))))};function Ua(Y){return function(he){return he<=0?0:he>=1?1:Y(he)}}function fi(Y){return function(he){return 1-Y(1-he)}}function Ii(Y){return function(he){return .5*(he<.5?Y(2*he):2-Y(2-2*he))}}function hi(Y){return Y*Y}function ii(Y){return Y*Y*Y}function zi(Y){if(Y<=0)return 0;if(Y>=1)return 1;var he=Y*Y,ye=he*Y;return 4*(Y<.5?ye:3*(Y-he)+ye-.75)}function si(Y){return function(he){return Math.pow(he,Y)}}function Na(Y){return 1-Math.cos(Y*Me)}function os(Y){return Math.pow(2,10*(Y-1))}function Bo(Y){return 1-Math.sqrt(1-Y*Y)}function bo(Y,he){var ye;return arguments.length<2&&(he=.45),arguments.length?ye=he/Be*Math.asin(1/Y):(Y=1,ye=he/4),function(_e){return 1+Y*Math.pow(2,-10*_e)*Math.sin((_e-ye)*Be/he)}}function ho(Y){return Y||(Y=1.70158),function(he){return he*he*((Y+1)*he-Y)}}function es(Y){return Y<1/2.75?7.5625*Y*Y:Y<2/2.75?7.5625*(Y-=1.5/2.75)*Y+.75:Y<2.5/2.75?7.5625*(Y-=2.25/2.75)*Y+.9375:7.5625*(Y-=2.625/2.75)*Y+.984375}r.interpolateHcl=To;function To(Y,he){Y=r.hcl(Y),he=r.hcl(he);var ye=Y.h,_e=Y.c,Ee=Y.l,De=he.h-ye,rt=he.c-_e,$e=he.l-Ee;return isNaN(rt)&&(rt=0,_e=isNaN(_e)?he.c:_e),isNaN(De)?(De=0,ye=isNaN(ye)?he.h:ye):De>180?De-=360:De<-180&&(De+=360),function(nt){return qt(ye+De*nt,_e+rt*nt,Ee+$e*nt)+""}}r.interpolateHsl=xu;function xu(Y,he){Y=r.hsl(Y),he=r.hsl(he);var ye=Y.h,_e=Y.s,Ee=Y.l,De=he.h-ye,rt=he.s-_e,$e=he.l-Ee;return isNaN(rt)&&(rt=0,_e=isNaN(_e)?he.s:_e),isNaN(De)?(De=0,ye=isNaN(ye)?he.h:ye):De>180?De-=360:De<-180&&(De+=360),function(nt){return Bt(ye+De*nt,_e+rt*nt,Ee+$e*nt)+""}}r.interpolateLab=Ms;function Ms(Y,he){Y=r.lab(Y),he=r.lab(he);var ye=Y.l,_e=Y.a,Ee=Y.b,De=he.l-ye,rt=he.a-_e,$e=he.b-Ee;return function(nt){return Yn(ye+De*nt,_e+rt*nt,Ee+$e*nt)+""}}r.interpolateRound=ru;function ru(Y,he){return he-=Y,function(ye){return Math.round(Y+he*ye)}}r.transform=function(Y){var he=c.createElementNS(r.ns.prefix.svg,"g");return(r.transform=function(ye){if(ye!=null){he.setAttribute("transform",ye);var _e=he.transform.baseVal.consolidate()}return new Al(_e?_e.matrix:mc)})(Y)};function Al(Y){var he=[Y.a,Y.b],ye=[Y.c,Y.d],_e=Iu(he),Ee=nu(he,ye),De=Iu(vc(ye,he,-Ee))||0;he[0]*ye[1]<ye[0]*he[1]&&(he[0]*=-1,he[1]*=-1,_e*=-1,Ee*=-1),this.rotate=(_e?Math.atan2(he[1],he[0]):Math.atan2(-ye[0],ye[1]))*He,this.translate=[Y.e,Y.f],this.scale=[_e,De],this.skew=De?Math.atan2(Ee,De)*He:0}Al.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function nu(Y,he){return Y[0]*he[0]+Y[1]*he[1]}function Iu(Y){var he=Math.sqrt(nu(Y,Y));return he&&(Y[0]/=he,Y[1]/=he),he}function vc(Y,he,ye){return Y[0]+=ye*he[0],Y[1]+=ye*he[1],Y}var mc={a:1,b:0,c:0,d:1,e:0,f:0};r.interpolateTransform=Ss;function Il(Y){return Y.length?Y.pop()+",":""}function zu(Y,he,ye,_e){if(Y[0]!==he[0]||Y[1]!==he[1]){var Ee=ye.push("translate(",null,",",null,")");_e.push({i:Ee-4,x:Dn(Y[0],he[0])},{i:Ee-2,x:Dn(Y[1],he[1])})}else(he[0]||he[1])&&ye.push("translate("+he+")")}function Ff(Y,he,ye,_e){Y!==he?(Y-he>180?he+=360:he-Y>180&&(Y+=360),_e.push({i:ye.push(Il(ye)+"rotate(",null,")")-2,x:Dn(Y,he)})):he&&ye.push(Il(ye)+"rotate("+he+")")}function gc(Y,he,ye,_e){Y!==he?_e.push({i:ye.push(Il(ye)+"skewX(",null,")")-2,x:Dn(Y,he)}):he&&ye.push(Il(ye)+"skewX("+he+")")}function au(Y,he,ye,_e){if(Y[0]!==he[0]||Y[1]!==he[1]){var Ee=ye.push(Il(ye)+"scale(",null,",",null,")");_e.push({i:Ee-4,x:Dn(Y[0],he[0])},{i:Ee-2,x:Dn(Y[1],he[1])})}else(he[0]!==1||he[1]!==1)&&ye.push(Il(ye)+"scale("+he+")")}function Ss(Y,he){var ye=[],_e=[];return Y=r.transform(Y),he=r.transform(he),zu(Y.translate,he.translate,ye,_e),Ff(Y.rotate,he.rotate,ye,_e),gc(Y.skew,he.skew,ye,_e),au(Y.scale,he.scale,ye,_e),Y=he=null,function(Ee){for(var De=-1,rt=_e.length,$e;++De<rt;)ye[($e=_e[De]).i]=$e.x(Ee);return ye.join("")}}function rf(Y,he){return he=(he-=Y=+Y)||1/he,function(ye){return(ye-Y)/he}}function nf(Y,he){return he=(he-=Y=+Y)||1/he,function(ye){return Math.max(0,Math.min(1,(ye-Y)/he))}}r.layout={},r.layout.bundle=function(){return function(Y){for(var he=[],ye=-1,_e=Y.length;++ye<_e;)he.push(ws(Y[ye]));return he}};function ws(Y){for(var he=Y.source,ye=Y.target,_e=ss(he,ye),Ee=[he];he!==_e;)he=he.parent,Ee.push(he);for(var De=Ee.length;ye!==_e;)Ee.splice(De,0,ye),ye=ye.parent;return Ee}function yc(Y){for(var he=[],ye=Y.parent;ye!=null;)he.push(Y),Y=ye,ye=ye.parent;return he.push(Y),he}function ss(Y,he){if(Y===he)return Y;for(var ye=yc(Y),_e=yc(he),Ee=ye.pop(),De=_e.pop(),rt=null;Ee===De;)rt=Ee,Ee=ye.pop(),De=_e.pop();return rt}r.layout.chord=function(){var Y={},he,ye,_e,Ee,De=0,rt,$e,nt;function mt(){var Vt={},Yt=[],ur=r.range(Ee),Rr=[],ir,hr,mr,Dr,yr;for(he=[],ye=[],ir=0,Dr=-1;++Dr<Ee;){for(hr=0,yr=-1;++yr<Ee;)hr+=_e[Dr][yr];Yt.push(hr),Rr.push(r.range(Ee)),ir+=hr}for(rt&&ur.sort(function(La,da){return rt(Yt[La],Yt[da])}),$e&&Rr.forEach(function(La,da){La.sort(function(ma,En){return $e(_e[da][ma],_e[da][En])})}),ir=(Be-De*Ee)/ir,hr=0,Dr=-1;++Dr<Ee;){for(mr=hr,yr=-1;++yr<Ee;){var kr=ur[Dr],gn=Rr[kr][yr],vn=_e[kr][gn],hn=hr,sn=hr+=vn*ir;Vt[kr+"-"+gn]={index:kr,subindex:gn,startAngle:hn,endAngle:sn,value:vn}}ye[kr]={index:kr,startAngle:mr,endAngle:hr,value:Yt[kr]},hr+=De}for(Dr=-1;++Dr<Ee;)for(yr=Dr-1;++yr<Ee;){var Xn=Vt[Dr+"-"+yr],ea=Vt[yr+"-"+Dr];(Xn.value||ea.value)&&he.push(Xn.value<ea.value?{source:ea,target:Xn}:{source:Xn,target:ea})}nt&&Tt()}function Tt(){he.sort(function(Vt,Yt){return nt((Vt.source.value+Vt.target.value)/2,(Yt.source.value+Yt.target.value)/2)})}return Y.matrix=function(Vt){return arguments.length?(Ee=(_e=Vt)&&_e.length,he=ye=null,Y):_e},Y.padding=function(Vt){return arguments.length?(De=Vt,he=ye=null,Y):De},Y.sortGroups=function(Vt){return arguments.length?(rt=Vt,he=ye=null,Y):rt},Y.sortSubgroups=function(Vt){return arguments.length?($e=Vt,he=null,Y):$e},Y.sortChords=function(Vt){return arguments.length?(nt=Vt,he&&Tt(),Y):nt},Y.chords=function(){return he||mt(),he},Y.groups=function(){return ye||mt(),ye},Y},r.layout.force=function(){var Y={},he=r.dispatch("start","tick","end"),ye,_e=[1,1],Ee,De,rt=.9,$e=Nh,nt=Ic,mt=-30,Tt=Bh,Vt=.1,Yt=.64,ur=[],Rr=[],ir,hr,mr;function Dr(kr){return function(gn,vn,hn,sn){if(gn.point!==kr){var Xn=gn.cx-kr.x,ea=gn.cy-kr.y,La=sn-vn,da=Xn*Xn+ea*ea;if(La*La/Yt<da){if(da<Tt){var ma=gn.charge/da;kr.px-=Xn*ma,kr.py-=ea*ma}return!0}if(gn.point&&da&&da<Tt){var ma=gn.pointCharge/da;kr.px-=Xn*ma,kr.py-=ea*ma}}return!gn.charge}}Y.tick=function(){if((De*=.99)<.005)return ye=null,he.end({type:"end",alpha:De=0}),!0;var kr=ur.length,gn=Rr.length,vn,hn,sn,Xn,ea,La,da,ma,En;for(hn=0;hn<gn;++hn)sn=Rr[hn],Xn=sn.source,ea=sn.target,ma=ea.x-Xn.x,En=ea.y-Xn.y,(La=ma*ma+En*En)&&(La=De*hr[hn]*((La=Math.sqrt(La))-ir[hn])/La,ma*=La,En*=La,ea.x-=ma*(da=Xn.weight+ea.weight?Xn.weight/(Xn.weight+ea.weight):.5),ea.y-=En*da,Xn.x+=ma*(da=1-da),Xn.y+=En*da);if((da=De*Vt)&&(ma=_e[0]/2,En=_e[1]/2,hn=-1,da))for(;++hn<kr;)sn=ur[hn],sn.x+=(ma-sn.x)*da,sn.y+=(En-sn.y)*da;if(mt)for(Nf(vn=r.geom.quadtree(ur),De,mr),hn=-1;++hn<kr;)(sn=ur[hn]).fixed||vn.visit(Dr(sn));for(hn=-1;++hn<kr;)sn=ur[hn],sn.fixed?(sn.x=sn.px,sn.y=sn.py):(sn.x-=(sn.px-(sn.px=sn.x))*rt,sn.y-=(sn.py-(sn.py=sn.y))*rt);he.tick({type:"tick",alpha:De})},Y.nodes=function(kr){return arguments.length?(ur=kr,Y):ur},Y.links=function(kr){return arguments.length?(Rr=kr,Y):Rr},Y.size=function(kr){return arguments.length?(_e=kr,Y):_e},Y.linkDistance=function(kr){return arguments.length?($e=typeof kr=="function"?kr:+kr,Y):$e},Y.distance=Y.linkDistance,Y.linkStrength=function(kr){return arguments.length?(nt=typeof kr=="function"?kr:+kr,Y):nt},Y.friction=function(kr){return arguments.length?(rt=+kr,Y):rt},Y.charge=function(kr){return arguments.length?(mt=typeof kr=="function"?kr:+kr,Y):mt},Y.chargeDistance=function(kr){return arguments.length?(Tt=kr*kr,Y):Math.sqrt(Tt)},Y.gravity=function(kr){return arguments.length?(Vt=+kr,Y):Vt},Y.theta=function(kr){return arguments.length?(Yt=kr*kr,Y):Math.sqrt(Yt)},Y.alpha=function(kr){return arguments.length?(kr=+kr,De?kr>0?De=kr:(ye.c=null,ye.t=NaN,ye=null,he.end({type:"end",alpha:De=0})):kr>0&&(he.start({type:"start",alpha:De=kr}),ye=ei(Y.tick)),Y):De},Y.start=function(){var kr,gn=ur.length,vn=Rr.length,hn=_e[0],sn=_e[1],Xn,ea;for(kr=0;kr<gn;++kr)(ea=ur[kr]).index=kr,ea.weight=0;for(kr=0;kr<vn;++kr)ea=Rr[kr],typeof ea.source=="number"&&(ea.source=ur[ea.source]),typeof ea.target=="number"&&(ea.target=ur[ea.target]),++ea.source.weight,++ea.target.weight;for(kr=0;kr<gn;++kr)ea=ur[kr],isNaN(ea.x)&&(ea.x=La("x",hn)),isNaN(ea.y)&&(ea.y=La("y",sn)),isNaN(ea.px)&&(ea.px=ea.x),isNaN(ea.py)&&(ea.py=ea.y);if(ir=[],typeof $e=="function")for(kr=0;kr<vn;++kr)ir[kr]=+$e.call(this,Rr[kr],kr);else for(kr=0;kr<vn;++kr)ir[kr]=$e;if(hr=[],typeof nt=="function")for(kr=0;kr<vn;++kr)hr[kr]=+nt.call(this,Rr[kr],kr);else for(kr=0;kr<vn;++kr)hr[kr]=nt;if(mr=[],typeof mt=="function")for(kr=0;kr<gn;++kr)mr[kr]=+mt.call(this,ur[kr],kr);else for(kr=0;kr<gn;++kr)mr[kr]=mt;function La(da,ma){if(!Xn){for(Xn=new Array(gn),ca=0;ca<gn;++ca)Xn[ca]=[];for(ca=0;ca<vn;++ca){var En=Rr[ca];Xn[En.source.index].push(En.target),Xn[En.target.index].push(En.source)}}for(var $n=Xn[kr],ca=-1,yn=$n.length,Hn;++ca<yn;)if(!isNaN(Hn=$n[ca][da]))return Hn;return Math.random()*ma}return Y.resume()},Y.resume=function(){return Y.alpha(.1)},Y.stop=function(){return Y.alpha(0)},Y.drag=function(){if(Ee||(Ee=r.behavior.drag().origin(G).on("dragstart.force",jl).on("drag.force",yr).on("dragend.force",zl)),!arguments.length)return Ee;this.on("mouseover.force",nc).on("mouseout.force",fd).call(Ee)};function yr(kr){kr.px=r.event.x,kr.py=r.event.y,Y.resume()}return r.rebind(Y,he,"on")};function jl(Y){Y.fixed|=2}function zl(Y){Y.fixed&=-7}function nc(Y){Y.fixed|=4,Y.px=Y.x,Y.py=Y.y}function fd(Y){Y.fixed&=-5}function Nf(Y,he,ye){var _e=0,Ee=0;if(Y.charge=0,!Y.leaf)for(var De=Y.nodes,rt=De.length,$e=-1,nt;++$e<rt;)nt=De[$e],nt!=null&&(Nf(nt,he,ye),Y.charge+=nt.charge,_e+=nt.charge*nt.cx,Ee+=nt.charge*nt.cy);if(Y.point){Y.leaf||(Y.point.x+=Math.random()-.5,Y.point.y+=Math.random()-.5);var mt=he*ye[Y.point.index];Y.charge+=Y.pointCharge=mt,_e+=mt*Y.point.x,Ee+=mt*Y.point.y}Y.cx=_e/Y.charge,Y.cy=Ee/Y.charge}var Nh=20,Ic=1,Bh=1/0;r.layout.hierarchy=function(){var Y=iv,he=nv,ye=av;function _e(Ee){var De=[Ee],rt=[],$e;for(Ee.depth=0;($e=De.pop())!=null;)if(rt.push($e),(mt=he.call(_e,$e,$e.depth))&&(nt=mt.length)){for(var nt,mt,Tt;--nt>=0;)De.push(Tt=mt[nt]),Tt.parent=$e,Tt.depth=$e.depth+1;ye&&($e.value=0),$e.children=mt}else ye&&($e.value=+ye.call(_e,$e,$e.depth)||0),delete $e.children;return ls(Ee,function(Vt){var Yt,ur;Y&&(Yt=Vt.children)&&Yt.sort(Y),ye&&(ur=Vt.parent)&&(ur.value+=Vt.value)}),rt}return _e.sort=function(Ee){return arguments.length?(Y=Ee,_e):Y},_e.children=function(Ee){return arguments.length?(he=Ee,_e):he},_e.value=function(Ee){return arguments.length?(ye=Ee,_e):ye},_e.revalue=function(Ee){return ye&&(ou(Ee,function(De){De.children&&(De.value=0)}),ls(Ee,function(De){var rt;De.children||(De.value=+ye.call(_e,De,De.depth)||0),(rt=De.parent)&&(rt.value+=De.value)})),Ee},_e};function iu(Y,he){return r.rebind(Y,he,"sort","children","value"),Y.nodes=Y,Y.links=D0,Y}function ou(Y,he){for(var ye=[Y];(Y=ye.pop())!=null;)if(he(Y),(Ee=Y.children)&&(_e=Ee.length))for(var _e,Ee;--_e>=0;)ye.push(Ee[_e])}function ls(Y,he){for(var ye=[Y],_e=[];(Y=ye.pop())!=null;)if(_e.push(Y),(rt=Y.children)&&(De=rt.length))for(var Ee=-1,De,rt;++Ee<De;)ye.push(rt[Ee]);for(;(Y=_e.pop())!=null;)he(Y)}function nv(Y){return Y.children}function av(Y){return Y.value}function iv(Y,he){return he.value-Y.value}function D0(Y){return r.merge(Y.map(function(he){return(he.children||[]).map(function(ye){return{source:he,target:ye}})}))}r.layout.partition=function(){var Y=r.layout.hierarchy(),he=[1,1];function ye(De,rt,$e,nt){var mt=De.children;if(De.x=rt,De.y=De.depth*nt,De.dx=$e,De.dy=nt,mt&&(Vt=mt.length)){var Tt=-1,Vt,Yt,ur;for($e=De.value?$e/De.value:0;++Tt<Vt;)ye(Yt=mt[Tt],rt,ur=Yt.value*$e,nt),rt+=ur}}function _e(De){var rt=De.children,$e=0;if(rt&&(mt=rt.length))for(var nt=-1,mt;++nt<mt;)$e=Math.max($e,_e(rt[nt]));return 1+$e}function Ee(De,rt){var $e=Y.call(this,De,rt);return ye($e[0],0,he[0],he[1]/_e($e[0])),$e}return Ee.size=function(De){return arguments.length?(he=De,Ee):he},iu(Ee,Y)},r.layout.pie=function(){var Y=Number,he=mp,ye=0,_e=Be,Ee=0;function De(rt){var $e=rt.length,nt=rt.map(function(Dr,yr){return+Y.call(De,Dr,yr)}),mt=+(typeof ye=="function"?ye.apply(this,arguments):ye),Tt=(typeof _e=="function"?_e.apply(this,arguments):_e)-mt,Vt=Math.min(Math.abs(Tt)/$e,+(typeof Ee=="function"?Ee.apply(this,arguments):Ee)),Yt=Vt*(Tt<0?-1:1),ur=r.sum(nt),Rr=ur?(Tt-$e*Yt)/ur:0,ir=r.range($e),hr=[],mr;return he!=null&&ir.sort(he===mp?function(Dr,yr){return nt[yr]-nt[Dr]}:function(Dr,yr){return he(rt[Dr],rt[yr])}),ir.forEach(function(Dr){hr[Dr]={data:rt[Dr],value:mr=nt[Dr],startAngle:mt,endAngle:mt+=mr*Rr+Yt,padAngle:Vt}}),hr}return De.value=function(rt){return arguments.length?(Y=rt,De):Y},De.sort=function(rt){return arguments.length?(he=rt,De):he},De.startAngle=function(rt){return arguments.length?(ye=rt,De):ye},De.endAngle=function(rt){return arguments.length?(_e=rt,De):_e},De.padAngle=function(rt){return arguments.length?(Ee=rt,De):Ee},De};var mp={};r.layout.stack=function(){var Y=G,he=xc,ye=Bf,_e=I0,Ee=hd,De=Uh;function rt($e,nt){if(!(Rr=$e.length))return $e;var mt=$e.map(function(Dr,yr){return Y.call(rt,Dr,yr)}),Tt=mt.map(function(Dr){return Dr.map(function(yr,kr){return[Ee.call(rt,yr,kr),De.call(rt,yr,kr)]})}),Vt=he.call(rt,Tt,nt);mt=r.permute(mt,Vt),Tt=r.permute(Tt,Vt);var Yt=ye.call(rt,Tt,nt),ur=mt[0].length,Rr,ir,hr,mr;for(hr=0;hr<ur;++hr)for(_e.call(rt,mt[0][hr],mr=Yt[hr],Tt[0][hr][1]),ir=1;ir<Rr;++ir)_e.call(rt,mt[ir][hr],mr+=Tt[ir-1][hr][1],Tt[ir][hr][1]);return $e}return rt.values=function($e){return arguments.length?(Y=$e,rt):Y},rt.order=function($e){return arguments.length?(he=typeof $e=="function"?$e:ch.get($e)||xc,rt):he},rt.offset=function($e){return arguments.length?(ye=typeof $e=="function"?$e:ao.get($e)||Bf,rt):ye},rt.x=function($e){return arguments.length?(Ee=$e,rt):Ee},rt.y=function($e){return arguments.length?(De=$e,rt):De},rt.out=function($e){return arguments.length?(_e=$e,rt):_e},rt};function hd(Y){return Y.x}function Uh(Y){return Y.y}function I0(Y,he,ye){Y.y0=he,Y.y=ye}var ch=r.map({"inside-out":function(Y){var he=Y.length,ye,_e,Ee=Y.map(Vh),De=Y.map(ov),rt=r.range(he).sort(function(Vt,Yt){return Ee[Vt]-Ee[Yt]}),$e=0,nt=0,mt=[],Tt=[];for(ye=0;ye<he;++ye)_e=rt[ye],$e<nt?($e+=De[_e],mt.push(_e)):(nt+=De[_e],Tt.push(_e));return Tt.reverse().concat(mt)},reverse:function(Y){return r.range(Y.length).reverse()},default:xc}),ao=r.map({silhouette:function(Y){var he=Y.length,ye=Y[0].length,_e=[],Ee=0,De,rt,$e,nt=[];for(rt=0;rt<ye;++rt){for(De=0,$e=0;De<he;De++)$e+=Y[De][rt][1];$e>Ee&&(Ee=$e),_e.push($e)}for(rt=0;rt<ye;++rt)nt[rt]=(Ee-_e[rt])/2;return nt},wiggle:function(Y){var he=Y.length,ye=Y[0],_e=ye.length,Ee,De,rt,$e,nt,mt,Tt,Vt,Yt,ur=[];for(ur[0]=Vt=Yt=0,De=1;De<_e;++De){for(Ee=0,$e=0;Ee<he;++Ee)$e+=Y[Ee][De][1];for(Ee=0,nt=0,Tt=ye[De][0]-ye[De-1][0];Ee<he;++Ee){for(rt=0,mt=(Y[Ee][De][1]-Y[Ee][De-1][1])/(2*Tt);rt<Ee;++rt)mt+=(Y[rt][De][1]-Y[rt][De-1][1])/Tt;nt+=mt*Y[Ee][De][1]}ur[De]=Vt-=$e?nt/$e*Tt:0,Vt<Yt&&(Yt=Vt)}for(De=0;De<_e;++De)ur[De]-=Yt;return ur},expand:function(Y){var he=Y.length,ye=Y[0].length,_e=1/he,Ee,De,rt,$e=[];for(De=0;De<ye;++De){for(Ee=0,rt=0;Ee<he;Ee++)rt+=Y[Ee][De][1];if(rt)for(Ee=0;Ee<he;Ee++)Y[Ee][De][1]/=rt;else for(Ee=0;Ee<he;Ee++)Y[Ee][De][1]=_e}for(De=0;De<ye;++De)$e[De]=0;return $e},zero:Bf});function xc(Y){return r.range(Y.length)}function Bf(Y){for(var he=-1,ye=Y[0].length,_e=[];++he<ye;)_e[he]=0;return _e}function Vh(Y){for(var he=1,ye=0,_e=Y[0][1],Ee,De=Y.length;he<De;++he)(Ee=Y[he][1])>_e&&(ye=he,_e=Ee);return ye}function ov(Y){return Y.reduce(z0,0)}function z0(Y,he){return Y+he[1]}r.layout.histogram=function(){var Y=!0,he=Number,ye=F0,_e=O0;function Ee(De,Yt){for(var $e=[],nt=De.map(he,this),mt=ye.call(this,nt,Yt),Tt=_e.call(this,mt,nt,Yt),Vt,Yt=-1,ur=nt.length,Rr=Tt.length-1,ir=Y?1:1/ur,hr;++Yt<Rr;)Vt=$e[Yt]=[],Vt.dx=Tt[Yt+1]-(Vt.x=Tt[Yt]),Vt.y=0;if(Rr>0)for(Yt=-1;++Yt<ur;)hr=nt[Yt],hr>=mt[0]&&hr<=mt[1]&&(Vt=$e[r.bisect(Tt,hr,1,Rr)-1],Vt.y+=ir,Vt.push(De[Yt]));return $e}return Ee.value=function(De){return arguments.length?(he=De,Ee):he},Ee.range=function(De){return arguments.length?(ye=Er(De),Ee):ye},Ee.bins=function(De){return arguments.length?(_e=typeof De=="number"?function(rt){return Ou(rt,De)}:Er(De),Ee):_e},Ee.frequency=function(De){return arguments.length?(Y=!!De,Ee):Y},Ee};function O0(Y,he){return Ou(Y,Math.ceil(Math.log(he.length)/Math.LN2+1))}function Ou(Y,he){for(var ye=-1,_e=+Y[0],Ee=(Y[1]-_e)/he,De=[];++ye<=he;)De[ye]=Ee*ye+_e;return De}function F0(Y){return[r.min(Y),r.max(Y)]}r.layout.pack=function(){var Y=r.layout.hierarchy().sort(gp),he=0,ye=[1,1],_e;function Ee(De,rt){var $e=Y.call(this,De,rt),nt=$e[0],mt=ye[0],Tt=ye[1],Vt=_e==null?Math.sqrt:typeof _e=="function"?_e:function(){return _e};if(nt.x=nt.y=0,ls(nt,function(ur){ur.r=+Vt(ur.value)}),ls(nt,bu),he){var Yt=he*(_e?1:Math.max(2*nt.r/mt,2*nt.r/Tt))/2;ls(nt,function(ur){ur.r+=Yt}),ls(nt,bu),ls(nt,function(ur){ur.r-=Yt})}return yp(nt,mt/2,Tt/2,_e?1:1/Math.max(2*nt.r/mt,2*nt.r/Tt)),$e}return Ee.size=function(De){return arguments.length?(ye=De,Ee):ye},Ee.radius=function(De){return arguments.length?(_e=De==null||typeof De=="function"?De:+De,Ee):_e},Ee.padding=function(De){return arguments.length?(he=+De,Ee):he},iu(Ee,Y)};function gp(Y,he){return Y.value-he.value}function Uf(Y,he){var ye=Y._pack_next;Y._pack_next=he,he._pack_prev=Y,he._pack_next=ye,ye._pack_prev=he}function pd(Y,he){Y._pack_next=he,he._pack_prev=Y}function af(Y,he){var ye=he.x-Y.x,_e=he.y-Y.y,Ee=Y.r+he.r;return .999*Ee*Ee>ye*ye+_e*_e}function bu(Y){if(!(he=Y.children)||!(Yt=he.length))return;var he,ye=1/0,_e=-1/0,Ee=1/0,De=-1/0,rt,$e,nt,mt,Tt,Vt,Yt;function ur(kr){ye=Math.min(kr.x-kr.r,ye),_e=Math.max(kr.x+kr.r,_e),Ee=Math.min(kr.y-kr.r,Ee),De=Math.max(kr.y+kr.r,De)}if(he.forEach(Uo),rt=he[0],rt.x=-rt.r,rt.y=0,ur(rt),Yt>1&&($e=he[1],$e.x=$e.r,$e.y=0,ur($e),Yt>2))for(nt=he[2],of(rt,$e,nt),ur(nt),Uf(rt,nt),rt._pack_prev=nt,Uf(nt,$e),$e=rt._pack_next,mt=3;mt<Yt;mt++){of(rt,$e,nt=he[mt]);var Rr=0,ir=1,hr=1;for(Tt=$e._pack_next;Tt!==$e;Tt=Tt._pack_next,ir++)if(af(Tt,nt)){Rr=1;break}if(Rr==1)for(Vt=rt._pack_prev;Vt!==Tt._pack_prev&&!af(Vt,nt);Vt=Vt._pack_prev,hr++);Rr?(ir<hr||ir==hr&&$e.r<rt.r?pd(rt,$e=Tt):pd(rt=Vt,$e),mt--):(Uf(rt,nt),$e=nt,ur(nt))}var mr=(ye+_e)/2,Dr=(Ee+De)/2,yr=0;for(mt=0;mt<Yt;mt++)nt=he[mt],nt.x-=mr,nt.y-=Dr,yr=Math.max(yr,nt.r+Math.sqrt(nt.x*nt.x+nt.y*nt.y));Y.r=yr,he.forEach(fh)}function Uo(Y){Y._pack_next=Y._pack_prev=Y}function fh(Y){delete Y._pack_next,delete Y._pack_prev}function yp(Y,he,ye,_e){var Ee=Y.children;if(Y.x=he+=_e*Y.x,Y.y=ye+=_e*Y.y,Y.r*=_e,Ee)for(var De=-1,rt=Ee.length;++De<rt;)yp(Ee[De],he,ye,_e)}function of(Y,he,ye){var _e=Y.r+ye.r,Ee=he.x-Y.x,De=he.y-Y.y;if(_e&&(Ee||De)){var rt=he.r+ye.r,$e=Ee*Ee+De*De;rt*=rt,_e*=_e;var nt=.5+(_e-rt)/(2*$e),mt=Math.sqrt(Math.max(0,2*rt*(_e+$e)-(_e-=$e)*_e-rt*rt))/(2*$e);ye.x=Y.x+nt*Ee+mt*De,ye.y=Y.y+nt*De-mt*Ee}else ye.x=Y.x+_e,ye.y=Y.y}r.layout.tree=function(){var Y=r.layout.hierarchy().sort(null).value(null),he=hh,ye=[1,1],_e=null;function Ee(Tt,Vt){var Yt=Y.call(this,Tt,Vt),ur=Yt[0],Rr=De(ur);if(ls(Rr,rt),Rr.parent.m=-Rr.z,ou(Rr,$e),_e)ou(ur,mt);else{var ir=ur,hr=ur,mr=ur;ou(ur,function(gn){gn.x<ir.x&&(ir=gn),gn.x>hr.x&&(hr=gn),gn.depth>mr.depth&&(mr=gn)});var Dr=he(ir,hr)/2-ir.x,yr=ye[0]/(hr.x+he(hr,ir)/2+Dr),kr=ye[1]/(mr.depth||1);ou(ur,function(gn){gn.x=(gn.x+Dr)*yr,gn.y=gn.depth*kr})}return Yt}function De(Tt){for(var Vt={A:null,children:[Tt]},Yt=[Vt],ur;(ur=Yt.pop())!=null;)for(var Rr=ur.children,ir,hr=0,mr=Rr.length;hr<mr;++hr)Yt.push((Rr[hr]=ir={_:Rr[hr],parent:ur,children:(ir=Rr[hr].children)&&ir.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:hr}).a=ir);return Vt.children[0]}function rt(Tt){var Vt=Tt.children,Yt=Tt.parent.children,ur=Tt.i?Yt[Tt.i-1]:null;if(Vt.length){Vf(Tt);var Rr=(Vt[0].z+Vt[Vt.length-1].z)/2;ur?(Tt.z=ur.z+he(Tt._,ur._),Tt.m=Tt.z-Rr):Tt.z=Rr}else ur&&(Tt.z=ur.z+he(Tt._,ur._));Tt.parent.A=nt(Tt,ur,Tt.parent.A||Yt[0])}function $e(Tt){Tt._.x=Tt.z+Tt.parent.m,Tt.m+=Tt.parent.m}function nt(Tt,Vt,Yt){if(Vt){for(var ur=Tt,Rr=Tt,ir=Vt,hr=ur.parent.children[0],mr=ur.m,Dr=Rr.m,yr=ir.m,kr=hr.m,gn;ir=Hh(ir),ur=zc(ur),ir&&ur;)hr=zc(hr),Rr=Hh(Rr),Rr.a=Tt,gn=ir.z+yr-ur.z-mr+he(ir._,ur._),gn>0&&(xp(bc(ir,Tt,Yt),Tt,gn),mr+=gn,Dr+=gn),yr+=ir.m,mr+=ur.m,kr+=hr.m,Dr+=Rr.m;ir&&!Hh(Rr)&&(Rr.t=ir,Rr.m+=yr-Dr),ur&&!zc(hr)&&(hr.t=ur,hr.m+=mr-kr,Yt=Tt)}return Yt}function mt(Tt){Tt.x*=ye[0],Tt.y=Tt.depth*ye[1]}return Ee.separation=function(Tt){return arguments.length?(he=Tt,Ee):he},Ee.size=function(Tt){return arguments.length?(_e=(ye=Tt)==null?mt:null,Ee):_e?null:ye},Ee.nodeSize=function(Tt){return arguments.length?(_e=(ye=Tt)==null?null:mt,Ee):_e?ye:null},iu(Ee,Y)};function hh(Y,he){return Y.parent==he.parent?1:2}function zc(Y){var he=Y.children;return he.length?he[0]:Y.t}function Hh(Y){var he=Y.children,ye;return(ye=he.length)?he[ye-1]:Y.t}function xp(Y,he,ye){var _e=ye/(he.i-Y.i);he.c-=_e,he.s+=ye,Y.c+=_e,he.z+=ye,he.m+=ye}function Vf(Y){for(var he=0,ye=0,_e=Y.children,Ee=_e.length,De;--Ee>=0;)De=_e[Ee],De.z+=he,De.m+=he,he+=De.s+(ye+=De.c)}function bc(Y,he,ye){return Y.a.parent===he.parent?Y.a:ye}r.layout.cluster=function(){var Y=r.layout.hierarchy().sort(null).value(null),he=hh,ye=[1,1],_e=!1;function Ee(De,rt){var $e=Y.call(this,De,rt),nt=$e[0],mt,Tt=0;ls(nt,function(ir){var hr=ir.children;hr&&hr.length?(ir.x=sf(hr),ir.y=dd(hr)):(ir.x=mt?Tt+=he(ir,mt):0,ir.y=0,mt=ir)});var Vt=Hf(nt),Yt=vd(nt),ur=Vt.x-he(Vt,Yt)/2,Rr=Yt.x+he(Yt,Vt)/2;return ls(nt,_e?function(ir){ir.x=(ir.x-nt.x)*ye[0],ir.y=(nt.y-ir.y)*ye[1]}:function(ir){ir.x=(ir.x-ur)/(Rr-ur)*ye[0],ir.y=(1-(nt.y?ir.y/nt.y:1))*ye[1]}),$e}return Ee.separation=function(De){return arguments.length?(he=De,Ee):he},Ee.size=function(De){return arguments.length?(_e=(ye=De)==null,Ee):_e?null:ye},Ee.nodeSize=function(De){return arguments.length?(_e=(ye=De)!=null,Ee):_e?ye:null},iu(Ee,Y)};function dd(Y){return 1+r.max(Y,function(he){return he.y})}function sf(Y){return Y.reduce(function(he,ye){return he+ye.x},0)/Y.length}function Hf(Y){var he=Y.children;return he&&he.length?Hf(he[0]):Y}function vd(Y){var he=Y.children,ye;return he&&(ye=he.length)?vd(he[ye-1]):Y}r.layout.treemap=function(){var Y=r.layout.hierarchy(),he=Math.round,ye=[1,1],_e=null,Ee=jf,De=!1,rt,$e="squarify",nt=.5*(1+Math.sqrt(5));function mt(ir,hr){for(var mr=-1,Dr=ir.length,yr,kr;++mr<Dr;)kr=(yr=ir[mr]).value*(hr<0?0:hr),yr.area=isNaN(kr)||kr<=0?0:kr}function Tt(ir){var hr=ir.children;if(hr&&hr.length){var mr=Ee(ir),Dr=[],yr=hr.slice(),kr,gn=1/0,vn,hn=$e==="slice"?mr.dx:$e==="dice"?mr.dy:$e==="slice-dice"?ir.depth&1?mr.dy:mr.dx:Math.min(mr.dx,mr.dy),sn;for(mt(yr,mr.dx*mr.dy/ir.value),Dr.area=0;(sn=yr.length)>0;)Dr.push(kr=yr[sn-1]),Dr.area+=kr.area,$e!=="squarify"||(vn=Yt(Dr,hn))<=gn?(yr.pop(),gn=vn):(Dr.area-=Dr.pop().area,ur(Dr,hn,mr,!1),hn=Math.min(mr.dx,mr.dy),Dr.length=Dr.area=0,gn=1/0);Dr.length&&(ur(Dr,hn,mr,!0),Dr.length=Dr.area=0),hr.forEach(Tt)}}function Vt(ir){var hr=ir.children;if(hr&&hr.length){var mr=Ee(ir),Dr=hr.slice(),yr,kr=[];for(mt(Dr,mr.dx*mr.dy/ir.value),kr.area=0;yr=Dr.pop();)kr.push(yr),kr.area+=yr.area,yr.z!=null&&(ur(kr,yr.z?mr.dx:mr.dy,mr,!Dr.length),kr.length=kr.area=0);hr.forEach(Vt)}}function Yt(ir,hr){for(var mr=ir.area,Dr,yr=0,kr=1/0,gn=-1,vn=ir.length;++gn<vn;)(Dr=ir[gn].area)&&(Dr<kr&&(kr=Dr),Dr>yr&&(yr=Dr));return mr*=mr,hr*=hr,mr?Math.max(hr*yr*nt/mr,mr/(hr*kr*nt)):1/0}function ur(ir,hr,mr,Dr){var yr=-1,kr=ir.length,gn=mr.x,vn=mr.y,hn=hr?he(ir.area/hr):0,sn;if(hr==mr.dx){for((Dr||hn>mr.dy)&&(hn=mr.dy);++yr<kr;)sn=ir[yr],sn.x=gn,sn.y=vn,sn.dy=hn,gn+=sn.dx=Math.min(mr.x+mr.dx-gn,hn?he(sn.area/hn):0);sn.z=!0,sn.dx+=mr.x+mr.dx-gn,mr.y+=hn,mr.dy-=hn}else{for((Dr||hn>mr.dx)&&(hn=mr.dx);++yr<kr;)sn=ir[yr],sn.x=gn,sn.y=vn,sn.dx=hn,vn+=sn.dy=Math.min(mr.y+mr.dy-vn,hn?he(sn.area/hn):0);sn.z=!1,sn.dy+=mr.y+mr.dy-vn,mr.x+=hn,mr.dx-=hn}}function Rr(ir){var hr=rt||Y(ir),mr=hr[0];return mr.x=mr.y=0,mr.value?(mr.dx=ye[0],mr.dy=ye[1]):mr.dx=mr.dy=0,rt&&Y.revalue(mr),mt([mr],mr.dx*mr.dy/mr.value),(rt?Vt:Tt)(mr),De&&(rt=hr),hr}return Rr.size=function(ir){return arguments.length?(ye=ir,Rr):ye},Rr.padding=function(ir){if(!arguments.length)return _e;function hr(yr){var kr=ir.call(Rr,yr,yr.depth);return kr==null?jf(yr):sv(yr,typeof kr=="number"?[kr,kr,kr,kr]:kr)}function mr(yr){return sv(yr,ir)}var Dr;return Ee=(_e=ir)==null?jf:(Dr=typeof ir)=="function"?hr:(Dr==="number"&&(ir=[ir,ir,ir,ir]),mr),Rr},Rr.round=function(ir){return arguments.length?(he=ir?Math.round:Number,Rr):he!=Number},Rr.sticky=function(ir){return arguments.length?(De=ir,rt=null,Rr):De},Rr.ratio=function(ir){return arguments.length?(nt=ir,Rr):nt},Rr.mode=function(ir){return arguments.length?($e=ir+"",Rr):$e},iu(Rr,Y)};function jf(Y){return{x:Y.x,y:Y.y,dx:Y.dx,dy:Y.dy}}function sv(Y,he){var ye=Y.x+he[3],_e=Y.y+he[0],Ee=Y.dx-he[1]-he[3],De=Y.dy-he[0]-he[2];return Ee<0&&(ye+=Ee/2,Ee=0),De<0&&(_e+=De/2,De=0),{x:ye,y:_e,dx:Ee,dy:De}}r.random={normal:function(Y,he){var ye=arguments.length;return ye<2&&(he=1),ye<1&&(Y=0),function(){var _e,Ee,De;do _e=Math.random()*2-1,Ee=Math.random()*2-1,De=_e*_e+Ee*Ee;while(!De||De>1);return Y+he*_e*Math.sqrt(-2*Math.log(De)/De)}},logNormal:function(){var Y=r.random.normal.apply(r,arguments);return function(){return Math.exp(Y())}},bates:function(Y){var he=r.random.irwinHall(Y);return function(){return he()/Y}},irwinHall:function(Y){return function(){for(var he=0,ye=0;ye<Y;ye++)he+=Math.random();return he}}},r.scale={};function lf(Y){var he=Y[0],ye=Y[Y.length-1];return he<ye?[he,ye]:[ye,he]}function ph(Y){return Y.rangeExtent?Y.rangeExtent():lf(Y.range())}function ju(Y,he,ye,_e){var Ee=ye(Y[0],Y[1]),De=_e(he[0],he[1]);return function(rt){return De(Ee(rt))}}function jh(Y,he){var ye=0,_e=Y.length-1,Ee=Y[ye],De=Y[_e],rt;return De<Ee&&(rt=ye,ye=_e,_e=rt,rt=Ee,Ee=De,De=rt),Y[ye]=he.floor(Ee),Y[_e]=he.ceil(De),Y}function lv(Y){return Y?{floor:function(he){return Math.floor(he/Y)*Y},ceil:function(he){return Math.ceil(he/Y)*Y}}:uv}var uv={floor:G,ceil:G};function md(Y,he,ye,_e){var Ee=[],De=[],rt=0,$e=Math.min(Y.length,he.length)-1;for(Y[$e]<Y[0]&&(Y=Y.slice().reverse(),he=he.slice().reverse());++rt<=$e;)Ee.push(ye(Y[rt-1],Y[rt])),De.push(_e(he[rt-1],he[rt]));return function(nt){var mt=r.bisect(Y,nt,1,$e)-1;return De[mt](Ee[mt](nt))}}r.scale.linear=function(){return Gl([0,1],[0,1],wa,!1)};function Gl(Y,he,ye,_e){var Ee,De;function rt(){var nt=Math.min(Y.length,he.length)>2?md:ju,mt=_e?nf:rf;return Ee=nt(Y,he,mt,ye),De=nt(he,Y,mt,wa),$e}function $e(nt){return Ee(nt)}return $e.invert=function(nt){return De(nt)},$e.domain=function(nt){return arguments.length?(Y=nt.map(Number),rt()):Y},$e.range=function(nt){return arguments.length?(he=nt,rt()):he},$e.rangeRound=function(nt){return $e.range(nt).interpolate(ru)},$e.clamp=function(nt){return arguments.length?(_e=nt,rt()):_e},$e.interpolate=function(nt){return arguments.length?(ye=nt,rt()):ye},$e.ticks=function(nt){return Gf(Y,nt)},$e.tickFormat=function(nt,mt){return Oc(Y,nt,mt)},$e.nice=function(nt){return cv(Y,nt),rt()},$e.copy=function(){return Gl(Y,he,ye,_e)},rt()}function Ol(Y,he){return r.rebind(Y,he,"range","rangeRound","interpolate","clamp")}function cv(Y,he){return jh(Y,lv(dh(Y,he)[2])),jh(Y,lv(dh(Y,he)[2])),Y}function dh(Y,he){he==null&&(he=10);var ye=lf(Y),_e=ye[1]-ye[0],Ee=Math.pow(10,Math.floor(Math.log(_e/he)/Math.LN10)),De=he/_e*Ee;return De<=.15?Ee*=10:De<=.35?Ee*=5:De<=.75&&(Ee*=2),ye[0]=Math.ceil(ye[0]/Ee)*Ee,ye[1]=Math.floor(ye[1]/Ee)*Ee+Ee*.5,ye[2]=Ee,ye}function Gf(Y,he){return r.range.apply(r,dh(Y,he))}function Oc(Y,he,ye){var _e=dh(Y,he);if(ye){var Ee=Aa.exec(ye);if(Ee.shift(),Ee[8]==="s"){var De=r.formatPrefix(Math.max(_(_e[0]),_(_e[1])));return Ee[7]||(Ee[7]="."+Gh(De.scale(_e[2]))),Ee[8]="f",ye=r.format(Ee.join("")),function(rt){return ye(De.scale(rt))+De.symbol}}Ee[7]||(Ee[7]="."+vh(Ee[8],_e)),ye=Ee.join("")}else ye=",."+Gh(_e[2])+"f";return r.format(ye)}var fv={s:1,g:1,p:1,r:1,e:1};function Gh(Y){return-Math.floor(Math.log(Y)/Math.LN10+.01)}function vh(Y,he){var ye=Gh(he[2]);return Y in fv?Math.abs(ye-Gh(Math.max(_(he[0]),_(he[1]))))+ +(Y!=="e"):ye-(Y==="%")*2}r.scale.log=function(){return gd(r.scale.linear().domain([0,1]),10,!0,[1,10])};function gd(Y,he,ye,_e){function Ee($e){return(ye?Math.log($e<0?0:$e):-Math.log($e>0?0:-$e))/Math.log(he)}function De($e){return ye?Math.pow(he,$e):-Math.pow(he,-$e)}function rt($e){return Y(Ee($e))}return rt.invert=function($e){return De(Y.invert($e))},rt.domain=function($e){return arguments.length?(ye=$e[0]>=0,Y.domain((_e=$e.map(Number)).map(Ee)),rt):_e},rt.base=function($e){return arguments.length?(he=+$e,Y.domain(_e.map(Ee)),rt):he},rt.nice=function(){var $e=jh(_e.map(Ee),ye?Math:Nc);return Y.domain($e),_e=$e.map(De),rt},rt.ticks=function(){var $e=lf(_e),nt=[],mt=$e[0],Tt=$e[1],Vt=Math.floor(Ee(mt)),Yt=Math.ceil(Ee(Tt)),ur=he%1?2:he;if(isFinite(Yt-Vt)){if(ye){for(;Vt<Yt;Vt++)for(var Rr=1;Rr<ur;Rr++)nt.push(De(Vt)*Rr);nt.push(De(Vt))}else for(nt.push(De(Vt));Vt++<Yt;)for(var Rr=ur-1;Rr>0;Rr--)nt.push(De(Vt)*Rr);for(Vt=0;nt[Vt]<mt;Vt++);for(Yt=nt.length;nt[Yt-1]>Tt;Yt--);nt=nt.slice(Vt,Yt)}return nt},rt.tickFormat=function($e,nt){if(!arguments.length)return Fc;arguments.length<2?nt=Fc:typeof nt!="function"&&(nt=r.format(nt));var mt=Math.max(1,he*$e/rt.ticks().length);return function(Tt){var Vt=Tt/De(Math.round(Ee(Tt)));return Vt*he<he-.5&&(Vt*=he),Vt<=mt?nt(Tt):""}},rt.copy=function(){return gd(Y.copy(),he,ye,_e)},Ol(rt,Y)}var Fc=r.format(".0e"),Nc={floor:function(Y){return-Math.ceil(-Y)},ceil:function(Y){return-Math.floor(-Y)}};r.scale.pow=function(){return Gu(r.scale.linear(),1,[0,1])};function Gu(Y,he,ye){var _e=Wh(he),Ee=Wh(1/he);function De(rt){return Y(_e(rt))}return De.invert=function(rt){return Ee(Y.invert(rt))},De.domain=function(rt){return arguments.length?(Y.domain((ye=rt.map(Number)).map(_e)),De):ye},De.ticks=function(rt){return Gf(ye,rt)},De.tickFormat=function(rt,$e){return Oc(ye,rt,$e)},De.nice=function(rt){return De.domain(cv(ye,rt))},De.exponent=function(rt){return arguments.length?(_e=Wh(he=rt),Ee=Wh(1/he),Y.domain(ye.map(_e)),De):he},De.copy=function(){return Gu(Y.copy(),he,ye)},Ol(De,Y)}function Wh(Y){return function(he){return he<0?-Math.pow(-he,Y):Math.pow(he,Y)}}r.scale.sqrt=function(){return r.scale.pow().exponent(.5)},r.scale.ordinal=function(){return yd([],{t:"range",a:[[]]})};function yd(Y,he){var ye,_e,Ee;function De($e){return _e[((ye.get($e)||(he.t==="range"?ye.set($e,Y.push($e)):NaN))-1)%_e.length]}function rt($e,nt){return r.range(Y.length).map(function(mt){return $e+nt*mt})}return De.domain=function($e){if(!arguments.length)return Y;Y=[],ye=new A;for(var nt=-1,mt=$e.length,Tt;++nt<mt;)ye.has(Tt=$e[nt])||ye.set(Tt,Y.push(Tt));return De[he.t].apply(De,he.a)},De.range=function($e){return arguments.length?(_e=$e,Ee=0,he={t:"range",a:arguments},De):_e},De.rangePoints=function($e,nt){arguments.length<2&&(nt=0);var mt=$e[0],Tt=$e[1],Vt=Y.length<2?(mt=(mt+Tt)/2,0):(Tt-mt)/(Y.length-1+nt);return _e=rt(mt+Vt*nt/2,Vt),Ee=0,he={t:"rangePoints",a:arguments},De},De.rangeRoundPoints=function($e,nt){arguments.length<2&&(nt=0);var mt=$e[0],Tt=$e[1],Vt=Y.length<2?(mt=Tt=Math.round((mt+Tt)/2),0):(Tt-mt)/(Y.length-1+nt)|0;return _e=rt(mt+Math.round(Vt*nt/2+(Tt-mt-(Y.length-1+nt)*Vt)/2),Vt),Ee=0,he={t:"rangeRoundPoints",a:arguments},De},De.rangeBands=function($e,nt,mt){arguments.length<2&&(nt=0),arguments.length<3&&(mt=nt);var Tt=$e[1]<$e[0],Vt=$e[Tt-0],Yt=$e[1-Tt],ur=(Yt-Vt)/(Y.length-nt+2*mt);return _e=rt(Vt+ur*mt,ur),Tt&&_e.reverse(),Ee=ur*(1-nt),he={t:"rangeBands",a:arguments},De},De.rangeRoundBands=function($e,nt,mt){arguments.length<2&&(nt=0),arguments.length<3&&(mt=nt);var Tt=$e[1]<$e[0],Vt=$e[Tt-0],Yt=$e[1-Tt],ur=Math.floor((Yt-Vt)/(Y.length-nt+2*mt));return _e=rt(Vt+Math.round((Yt-Vt-(Y.length-nt)*ur)/2),ur),Tt&&_e.reverse(),Ee=Math.round(ur*(1-nt)),he={t:"rangeRoundBands",a:arguments},De},De.rangeBand=function(){return Ee},De.rangeExtent=function(){return lf(he.a[0])},De.copy=function(){return yd(Y,he)},De.domain(Y)}r.scale.category10=function(){return r.scale.ordinal().range(bp)},r.scale.category20=function(){return r.scale.ordinal().range(mh)},r.scale.category20b=function(){return r.scale.ordinal().range(Yh)},r.scale.category20c=function(){return r.scale.ordinal().range(_p)};var bp=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(dn),mh=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(dn),Yh=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(dn),_p=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(dn);r.scale.quantile=function(){return Xh([],[])};function Xh(Y,he){var ye;function _e(){var De=0,rt=he.length;for(ye=[];++De<rt;)ye[De-1]=r.quantile(Y,De/rt);return Ee}function Ee(De){if(!isNaN(De=+De))return he[r.bisect(ye,De)]}return Ee.domain=function(De){return arguments.length?(Y=De.map(p).filter(d).sort(s),_e()):Y},Ee.range=function(De){return arguments.length?(he=De,_e()):he},Ee.quantiles=function(){return ye},Ee.invertExtent=function(De){return De=he.indexOf(De),De<0?[NaN,NaN]:[De>0?ye[De-1]:Y[0],De<ye.length?ye[De]:Y[Y.length-1]]},Ee.copy=function(){return Xh(Y,he)},_e()}r.scale.quantize=function(){return hv(0,1,[0,1])};function hv(Y,he,ye){var _e,Ee;function De($e){return ye[Math.max(0,Math.min(Ee,Math.floor(_e*($e-Y))))]}function rt(){return _e=ye.length/(he-Y),Ee=ye.length-1,De}return De.domain=function($e){return arguments.length?(Y=+$e[0],he=+$e[$e.length-1],rt()):[Y,he]},De.range=function($e){return arguments.length?(ye=$e,rt()):ye},De.invertExtent=function($e){return $e=ye.indexOf($e),$e=$e<0?NaN:$e/_e+Y,[$e,$e+1/_e]},De.copy=function(){return hv(Y,he,ye)},rt()}r.scale.threshold=function(){return wp([.5],[0,1])};function wp(Y,he){function ye(_e){if(_e<=_e)return he[r.bisect(Y,_e)]}return ye.domain=function(_e){return arguments.length?(Y=_e,ye):Y},ye.range=function(_e){return arguments.length?(he=_e,ye):he},ye.invertExtent=function(_e){return _e=he.indexOf(_e),[Y[_e-1],Y[_e]]},ye.copy=function(){return wp(Y,he)},ye}r.scale.identity=function(){return qs([0,1])};function qs(Y){function he(ye){return+ye}return he.invert=he,he.domain=he.range=function(ye){return arguments.length?(Y=ye.map(he),he):Y},he.ticks=function(ye){return Gf(Y,ye)},he.tickFormat=function(ye,_e){return Oc(Y,ye,_e)},he.copy=function(){return qs(Y)},he}r.svg={};function pv(){return 0}r.svg.arc=function(){var Y=dv,he=vv,ye=pv,_e=Wf,Ee=ac,De=Zh,rt=mv;function $e(){var mt=Math.max(0,+Y.apply(this,arguments)),Tt=Math.max(0,+he.apply(this,arguments)),Vt=Ee.apply(this,arguments)-Me,Yt=De.apply(this,arguments)-Me,ur=Math.abs(Yt-Vt),Rr=Vt>Yt?0:1;if(Tt<mt&&(ir=Tt,Tt=mt,mt=ir),ur>=et)return nt(Tt,Rr)+(mt?nt(mt,1-Rr):"")+"Z";var ir,hr,mr,Dr,yr=0,kr=0,gn,vn,hn,sn,Xn,ea,La,da,ma=[];if((Dr=(+rt.apply(this,arguments)||0)/2)&&(mr=_e===Wf?Math.sqrt(mt*mt+Tt*Tt):+_e.apply(this,arguments),Rr||(kr*=-1),Tt&&(kr=Ge(mr/Tt*Math.sin(Dr))),mt&&(yr=Ge(mr/mt*Math.sin(Dr)))),Tt){gn=Tt*Math.cos(Vt+kr),vn=Tt*Math.sin(Vt+kr),hn=Tt*Math.cos(Yt-kr),sn=Tt*Math.sin(Yt-kr);var En=Math.abs(Yt-Vt-2*kr)<=Le?0:1;if(kr&&Tp(gn,vn,hn,sn)===Rr^En){var $n=(Vt+Yt)/2;gn=Tt*Math.cos($n),vn=Tt*Math.sin($n),hn=sn=null}}else gn=vn=0;if(mt){Xn=mt*Math.cos(Yt-yr),ea=mt*Math.sin(Yt-yr),La=mt*Math.cos(Vt+yr),da=mt*Math.sin(Vt+yr);var ca=Math.abs(Vt-Yt+2*yr)<=Le?0:1;if(yr&&Tp(Xn,ea,La,da)===1-Rr^ca){var yn=(Vt+Yt)/2;Xn=mt*Math.cos(yn),ea=mt*Math.sin(yn),La=da=null}}else Xn=ea=0;if(ur>lt&&(ir=Math.min(Math.abs(Tt-mt)/2,+ye.apply(this,arguments)))>.001){hr=mt<Tt^Rr?0:1;var Hn=ir,Ha=ir;if(ur<Le){var gi=La==null?[Xn,ea]:hn==null?[gn,vn]:qo([gn,vn],[La,da],[hn,sn],[Xn,ea]),Pi=gn-gi[0],mo=vn-gi[1],Do=hn-gi[0],tl=sn-gi[1],Os=1/Math.sin(Math.acos((Pi*Do+mo*tl)/(Math.sqrt(Pi*Pi+mo*mo)*Math.sqrt(Do*Do+tl*tl)))/2),Fs=Math.sqrt(gi[0]*gi[0]+gi[1]*gi[1]);Ha=Math.min(ir,(mt-Fs)/(Os-1)),Hn=Math.min(ir,(Tt-Fs)/(Os+1))}if(hn!=null){var su=gh(La==null?[Xn,ea]:[La,da],[gn,vn],Tt,Hn,Rr),io=gh([hn,sn],[Xn,ea],Tt,Hn,Rr);ir===Hn?ma.push("M",su[0],"A",Hn,",",Hn," 0 0,",hr," ",su[1],"A",Tt,",",Tt," 0 ",1-Rr^Tp(su[1][0],su[1][1],io[1][0],io[1][1]),",",Rr," ",io[1],"A",Hn,",",Hn," 0 0,",hr," ",io[0]):ma.push("M",su[0],"A",Hn,",",Hn," 0 1,",hr," ",io[0])}else ma.push("M",gn,",",vn);if(La!=null){var kl=gh([gn,vn],[La,da],mt,-Ha,Rr),lu=gh([Xn,ea],hn==null?[gn,vn]:[hn,sn],mt,-Ha,Rr);ir===Ha?ma.push("L",lu[0],"A",Ha,",",Ha," 0 0,",hr," ",lu[1],"A",mt,",",mt," 0 ",Rr^Tp(lu[1][0],lu[1][1],kl[1][0],kl[1][1]),",",1-Rr," ",kl[1],"A",Ha,",",Ha," 0 0,",hr," ",kl[0]):ma.push("L",lu[0],"A",Ha,",",Ha," 0 0,",hr," ",kl[0])}else ma.push("L",Xn,",",ea)}else ma.push("M",gn,",",vn),hn!=null&&ma.push("A",Tt,",",Tt," 0 ",En,",",Rr," ",hn,",",sn),ma.push("L",Xn,",",ea),La!=null&&ma.push("A",mt,",",mt," 0 ",ca,",",1-Rr," ",La,",",da);return ma.push("Z"),ma.join("")}function nt(mt,Tt){return"M0,"+mt+"A"+mt+","+mt+" 0 1,"+Tt+" 0,"+-mt+"A"+mt+","+mt+" 0 1,"+Tt+" 0,"+mt}return $e.innerRadius=function(mt){return arguments.length?(Y=Er(mt),$e):Y},$e.outerRadius=function(mt){return arguments.length?(he=Er(mt),$e):he},$e.cornerRadius=function(mt){return arguments.length?(ye=Er(mt),$e):ye},$e.padRadius=function(mt){return arguments.length?(_e=mt==Wf?Wf:Er(mt),$e):_e},$e.startAngle=function(mt){return arguments.length?(Ee=Er(mt),$e):Ee},$e.endAngle=function(mt){return arguments.length?(De=Er(mt),$e):De},$e.padAngle=function(mt){return arguments.length?(rt=Er(mt),$e):rt},$e.centroid=function(){var mt=(+Y.apply(this,arguments)+ +he.apply(this,arguments))/2,Tt=(+Ee.apply(this,arguments)+ +De.apply(this,arguments))/2-Me;return[Math.cos(Tt)*mt,Math.sin(Tt)*mt]},$e};var Wf="auto";function dv(Y){return Y.innerRadius}function vv(Y){return Y.outerRadius}function ac(Y){return Y.startAngle}function Zh(Y){return Y.endAngle}function mv(Y){return Y&&Y.padAngle}function Tp(Y,he,ye,_e){return(Y-ye)*he-(he-_e)*Y>0?0:1}function gh(Y,he,ye,_e,Ee){var De=Y[0]-he[0],rt=Y[1]-he[1],$e=(Ee?_e:-_e)/Math.sqrt(De*De+rt*rt),nt=$e*rt,mt=-$e*De,Tt=Y[0]+nt,Vt=Y[1]+mt,Yt=he[0]+nt,ur=he[1]+mt,Rr=(Tt+Yt)/2,ir=(Vt+ur)/2,hr=Yt-Tt,mr=ur-Vt,Dr=hr*hr+mr*mr,yr=ye-_e,kr=Tt*ur-Yt*Vt,gn=(mr<0?-1:1)*Math.sqrt(Math.max(0,yr*yr*Dr-kr*kr)),vn=(kr*mr-hr*gn)/Dr,hn=(-kr*hr-mr*gn)/Dr,sn=(kr*mr+hr*gn)/Dr,Xn=(-kr*hr+mr*gn)/Dr,ea=vn-Rr,La=hn-ir,da=sn-Rr,ma=Xn-ir;return ea*ea+La*La>da*da+ma*ma&&(vn=sn,hn=Xn),[[vn-nt,hn-mt],[vn*ye/yr,hn*ye/yr]]}function gv(Y){var he=za,ye=Si,_e=yu,Ee=Es,De=Ee.key,rt=.7;function $e(nt){var mt=[],Tt=[],Vt=-1,Yt=nt.length,ur,Rr=Er(he),ir=Er(ye);function hr(){mt.push("M",Ee(Y(Tt),rt))}for(;++Vt<Yt;)_e.call(this,ur=nt[Vt],Vt)?Tt.push([+Rr.call(this,ur,Vt),+ir.call(this,ur,Vt)]):Tt.length&&(hr(),Tt=[]);return Tt.length&&hr(),mt.length?mt.join(""):null}return $e.x=function(nt){return arguments.length?(he=nt,$e):he},$e.y=function(nt){return arguments.length?(ye=nt,$e):ye},$e.defined=function(nt){return arguments.length?(_e=nt,$e):_e},$e.interpolate=function(nt){return arguments.length?(typeof nt=="function"?De=Ee=nt:De=(Ee=xd.get(nt)||Es).key,$e):De},$e.tension=function(nt){return arguments.length?(rt=nt,$e):rt},$e}r.svg.line=function(){return gv(G)};var xd=r.map({linear:Es,"linear-closed":Kh,step:Ap,"step-before":uf,"step-after":vo,basis:yv,"basis-open":bd,"basis-closed":xv,bundle:Wl,cardinal:Bc,"cardinal-open":Yf,"cardinal-closed":bi,monotone:Vc});xd.forEach(function(Y,he){he.key=Y,he.closed=/-closed$/.test(Y)});function Es(Y){return Y.length>1?Y.join("L"):Y+"Z"}function Kh(Y){return Y.join("L")+"Z"}function Ap(Y){for(var he=0,ye=Y.length,_e=Y[0],Ee=[_e[0],",",_e[1]];++he<ye;)Ee.push("H",(_e[0]+(_e=Y[he])[0])/2,"V",_e[1]);return ye>1&&Ee.push("H",_e[0]),Ee.join("")}function uf(Y){for(var he=0,ye=Y.length,_e=Y[0],Ee=[_e[0],",",_e[1]];++he<ye;)Ee.push("V",(_e=Y[he])[1],"H",_e[0]);return Ee.join("")}function vo(Y){for(var he=0,ye=Y.length,_e=Y[0],Ee=[_e[0],",",_e[1]];++he<ye;)Ee.push("H",(_e=Y[he])[0],"V",_e[1]);return Ee.join("")}function Yf(Y,he){return Y.length<4?Es(Y):Y[1]+Xf(Y.slice(1,-1),Uc(Y,he))}function bi(Y,he){return Y.length<3?Kh(Y):Y[0]+Xf((Y.push(Y[0]),Y),Uc([Y[Y.length-2]].concat(Y,[Y[1]]),he))}function Bc(Y,he){return Y.length<3?Es(Y):Y[0]+Xf(Y,Uc(Y,he))}function Xf(Y,he){if(he.length<1||Y.length!=he.length&&Y.length!=he.length+2)return Es(Y);var ye=Y.length!=he.length,_e="",Ee=Y[0],De=Y[1],rt=he[0],$e=rt,nt=1;if(ye&&(_e+="Q"+(De[0]-rt[0]*2/3)+","+(De[1]-rt[1]*2/3)+","+De[0]+","+De[1],Ee=Y[1],nt=2),he.length>1){$e=he[1],De=Y[nt],nt++,_e+="C"+(Ee[0]+rt[0])+","+(Ee[1]+rt[1])+","+(De[0]-$e[0])+","+(De[1]-$e[1])+","+De[0]+","+De[1];for(var mt=2;mt<he.length;mt++,nt++)De=Y[nt],$e=he[mt],_e+="S"+(De[0]-$e[0])+","+(De[1]-$e[1])+","+De[0]+","+De[1]}if(ye){var Tt=Y[nt];_e+="Q"+(De[0]+$e[0]*2/3)+","+(De[1]+$e[1]*2/3)+","+Tt[0]+","+Tt[1]}return _e}function Uc(Y,he){for(var ye=[],_e=(1-he)/2,Ee,De=Y[0],rt=Y[1],$e=1,nt=Y.length;++$e<nt;)Ee=De,De=rt,rt=Y[$e],ye.push([_e*(rt[0]-Ee[0]),_e*(rt[1]-Ee[1])]);return ye}function yv(Y){if(Y.length<3)return Es(Y);var he=1,ye=Y.length,_e=Y[0],Ee=_e[0],De=_e[1],rt=[Ee,Ee,Ee,(_e=Y[1])[0]],$e=[De,De,De,_e[1]],nt=[Ee,",",De,"L",Wu(cf,rt),",",Wu(cf,$e)];for(Y.push(Y[ye-1]);++he<=ye;)_e=Y[he],rt.shift(),rt.push(_e[0]),$e.shift(),$e.push(_e[1]),Zf(nt,rt,$e);return Y.pop(),nt.push("L",_e),nt.join("")}function bd(Y){if(Y.length<4)return Es(Y);for(var he=[],ye=-1,_e=Y.length,Ee,De=[0],rt=[0];++ye<3;)Ee=Y[ye],De.push(Ee[0]),rt.push(Ee[1]);for(he.push(Wu(cf,De)+","+Wu(cf,rt)),--ye;++ye<_e;)Ee=Y[ye],De.shift(),De.push(Ee[0]),rt.shift(),rt.push(Ee[1]),Zf(he,De,rt);return he.join("")}function xv(Y){for(var he,ye=-1,_e=Y.length,Ee=_e+4,De,rt=[],$e=[];++ye<4;)De=Y[ye%_e],rt.push(De[0]),$e.push(De[1]);for(he=[Wu(cf,rt),",",Wu(cf,$e)],--ye;++ye<Ee;)De=Y[ye%_e],rt.shift(),rt.push(De[0]),$e.shift(),$e.push(De[1]),Zf(he,rt,$e);return he.join("")}function Wl(Y,he){var ye=Y.length-1;if(ye)for(var _e=Y[0][0],Ee=Y[0][1],De=Y[ye][0]-_e,rt=Y[ye][1]-Ee,$e=-1,nt,mt;++$e<=ye;)nt=Y[$e],mt=$e/ye,nt[0]=he*nt[0]+(1-he)*(_e+mt*De),nt[1]=he*nt[1]+(1-he)*(Ee+mt*rt);return yv(Y)}function Wu(Y,he){return Y[0]*he[0]+Y[1]*he[1]+Y[2]*he[2]+Y[3]*he[3]}var bv=[0,2/3,1/3,0],_d=[0,1/3,2/3,0],cf=[0,1/6,2/3,1/6];function Zf(Y,he,ye){Y.push("C",Wu(bv,he),",",Wu(bv,ye),",",Wu(_d,he),",",Wu(_d,ye),",",Wu(cf,he),",",Wu(cf,ye))}function ff(Y,he){return(he[1]-Y[1])/(he[0]-Y[0])}function _v(Y){for(var he=0,ye=Y.length-1,_e=[],Ee=Y[0],De=Y[1],rt=_e[0]=ff(Ee,De);++he<ye;)_e[he]=(rt+(rt=ff(Ee=De,De=Y[he+1])))/2;return _e[he]=rt,_e}function N0(Y){for(var he=[],ye,_e,Ee,De,rt=_v(Y),$e=-1,nt=Y.length-1;++$e<nt;)ye=ff(Y[$e],Y[$e+1]),_(ye)<lt?rt[$e]=rt[$e+1]=0:(_e=rt[$e]/ye,Ee=rt[$e+1]/ye,De=_e*_e+Ee*Ee,De>9&&(De=ye*3/Math.sqrt(De),rt[$e]=De*_e,rt[$e+1]=De*Ee));for($e=-1;++$e<=nt;)De=(Y[Math.min(nt,$e+1)][0]-Y[Math.max(0,$e-1)][0])/(6*(1+rt[$e]*rt[$e])),he.push([De||0,rt[$e]*De||0]);return he}function Vc(Y){return Y.length<3?Es(Y):Y[0]+Xf(Y,N0(Y))}r.svg.line.radial=function(){var Y=gv(Yl);return Y.radius=Y.x,delete Y.x,Y.angle=Y.y,delete Y.y,Y};function Yl(Y){for(var he,ye=-1,_e=Y.length,Ee,De;++ye<_e;)he=Y[ye],Ee=he[0],De=he[1]-Me,he[0]=Ee*Math.cos(De),he[1]=Ee*Math.sin(De);return Y}function $h(Y){var he=za,ye=za,_e=0,Ee=Si,De=yu,rt=Es,$e=rt.key,nt=rt,mt="L",Tt=.7;function Vt(Yt){var ur=[],Rr=[],ir=[],hr=-1,mr=Yt.length,Dr,yr=Er(he),kr=Er(_e),gn=he===ye?function(){return hn}:Er(ye),vn=_e===Ee?function(){return sn}:Er(Ee),hn,sn;function Xn(){ur.push("M",rt(Y(ir),Tt),mt,nt(Y(Rr.reverse()),Tt),"Z")}for(;++hr<mr;)De.call(this,Dr=Yt[hr],hr)?(Rr.push([hn=+yr.call(this,Dr,hr),sn=+kr.call(this,Dr,hr)]),ir.push([+gn.call(this,Dr,hr),+vn.call(this,Dr,hr)])):Rr.length&&(Xn(),Rr=[],ir=[]);return Rr.length&&Xn(),ur.length?ur.join(""):null}return Vt.x=function(Yt){return arguments.length?(he=ye=Yt,Vt):ye},Vt.x0=function(Yt){return arguments.length?(he=Yt,Vt):he},Vt.x1=function(Yt){return arguments.length?(ye=Yt,Vt):ye},Vt.y=function(Yt){return arguments.length?(_e=Ee=Yt,Vt):Ee},Vt.y0=function(Yt){return arguments.length?(_e=Yt,Vt):_e},Vt.y1=function(Yt){return arguments.length?(Ee=Yt,Vt):Ee},Vt.defined=function(Yt){return arguments.length?(De=Yt,Vt):De},Vt.interpolate=function(Yt){return arguments.length?(typeof Yt=="function"?$e=rt=Yt:$e=(rt=xd.get(Yt)||Es).key,nt=rt.reverse||rt,mt=rt.closed?"M":"L",Vt):$e},Vt.tension=function(Yt){return arguments.length?(Tt=Yt,Vt):Tt},Vt}uf.reverse=vo,vo.reverse=uf,r.svg.area=function(){return $h(G)},r.svg.area.radial=function(){var Y=$h(Yl);return Y.radius=Y.x,delete Y.x,Y.innerRadius=Y.x0,delete Y.x0,Y.outerRadius=Y.x1,delete Y.x1,Y.angle=Y.y,delete Y.y,Y.startAngle=Y.y0,delete Y.y0,Y.endAngle=Y.y1,delete Y.y1,Y},r.svg.chord=function(){var Y=vs,he=Js,ye=kp,_e=ac,Ee=Zh;function De(Tt,Vt){var Yt=rt(this,Y,Tt,Vt),ur=rt(this,he,Tt,Vt);return"M"+Yt.p0+nt(Yt.r,Yt.p1,Yt.a1-Yt.a0)+($e(Yt,ur)?mt(Yt.r,Yt.p1,Yt.r,Yt.p0):mt(Yt.r,Yt.p1,ur.r,ur.p0)+nt(ur.r,ur.p1,ur.a1-ur.a0)+mt(ur.r,ur.p1,Yt.r,Yt.p0))+"Z"}function rt(Tt,Vt,Yt,ur){var Rr=Vt.call(Tt,Yt,ur),ir=ye.call(Tt,Rr,ur),hr=_e.call(Tt,Rr,ur)-Me,mr=Ee.call(Tt,Rr,ur)-Me;return{r:ir,a0:hr,a1:mr,p0:[ir*Math.cos(hr),ir*Math.sin(hr)],p1:[ir*Math.cos(mr),ir*Math.sin(mr)]}}function $e(Tt,Vt){return Tt.a0==Vt.a0&&Tt.a1==Vt.a1}function nt(Tt,Vt,Yt){return"A"+Tt+","+Tt+" 0 "+ +(Yt>Le)+",1 "+Vt}function mt(Tt,Vt,Yt,ur){return"Q 0,0 "+ur}return De.radius=function(Tt){return arguments.length?(ye=Er(Tt),De):ye},De.source=function(Tt){return arguments.length?(Y=Er(Tt),De):Y},De.target=function(Tt){return arguments.length?(he=Er(Tt),De):he},De.startAngle=function(Tt){return arguments.length?(_e=Er(Tt),De):_e},De.endAngle=function(Tt){return arguments.length?(Ee=Er(Tt),De):Ee},De};function kp(Y){return Y.radius}r.svg.diagonal=function(){var Y=vs,he=Js,ye=hf;function _e(Ee,De){var rt=Y.call(this,Ee,De),$e=he.call(this,Ee,De),nt=(rt.y+$e.y)/2,mt=[rt,{x:rt.x,y:nt},{x:$e.x,y:nt},$e];return mt=mt.map(ye),"M"+mt[0]+"C"+mt[1]+" "+mt[2]+" "+mt[3]}return _e.source=function(Ee){return arguments.length?(Y=Er(Ee),_e):Y},_e.target=function(Ee){return arguments.length?(he=Er(Ee),_e):he},_e.projection=function(Ee){return arguments.length?(ye=Ee,_e):ye},_e};function hf(Y){return[Y.x,Y.y]}r.svg.diagonal.radial=function(){var Y=r.svg.diagonal(),he=hf,ye=Y.projection;return Y.projection=function(_e){return arguments.length?ye(Jh(he=_e)):he},Y};function Jh(Y){return function(){var he=Y.apply(this,arguments),ye=he[0],_e=he[1]-Me;return[ye*Math.cos(_e),ye*Math.sin(_e)]}}r.svg.symbol=function(){var Y=_c,he=_u;function ye(_e,Ee){return(yh.get(Y.call(this,_e,Ee))||el)(he.call(this,_e,Ee))}return ye.type=function(_e){return arguments.length?(Y=Er(_e),ye):Y},ye.size=function(_e){return arguments.length?(he=Er(_e),ye):he},ye};function _u(){return 64}function _c(){return"circle"}function el(Y){var he=Math.sqrt(Y/Le);return"M0,"+he+"A"+he+","+he+" 0 1,1 0,"+-he+"A"+he+","+he+" 0 1,1 0,"+he+"Z"}var yh=r.map({circle:el,cross:function(Y){var he=Math.sqrt(Y/5)/2;return"M"+-3*he+","+-he+"H"+-he+"V"+-3*he+"H"+he+"V"+-he+"H"+3*he+"V"+he+"H"+he+"V"+3*he+"H"+-he+"V"+he+"H"+-3*he+"Z"},diamond:function(Y){var he=Math.sqrt(Y/(2*Xl)),ye=he*Xl;return"M0,"+-he+"L"+ye+",0 0,"+he+" "+-ye+",0Z"},square:function(Y){var he=Math.sqrt(Y)/2;return"M"+-he+","+-he+"L"+he+","+-he+" "+he+","+he+" "+-he+","+he+"Z"},"triangle-down":function(Y){var he=Math.sqrt(Y/Kf),ye=he*Kf/2;return"M0,"+ye+"L"+he+","+-ye+" "+-he+","+-ye+"Z"},"triangle-up":function(Y){var he=Math.sqrt(Y/Kf),ye=he*Kf/2;return"M0,"+-ye+"L"+he+","+ye+" "+-he+","+ye+"Z"}});r.svg.symbolTypes=yh.keys();var Kf=Math.sqrt(3),Xl=Math.tan(30*Ie);ee.transition=function(Y){for(var he=ic||++Mp,ye=bh(Y),_e=[],Ee,De,rt=qh||{time:Date.now(),ease:zi,delay:0,duration:250},$e=-1,nt=this.length;++$e<nt;){_e.push(Ee=[]);for(var mt=this[$e],Tt=-1,Vt=mt.length;++Tt<Vt;)(De=mt[Tt])&&_h(De,Tt,ye,he,rt),Ee.push(De)}return xh(_e,ye,he)},ee.interrupt=function(Y){return this.each(Y==null?Qh:wd(bh(Y)))};var Qh=wd(bh());function wd(Y){return function(){var he,ye,_e;(he=this[Y])&&(_e=he[ye=he.active])&&(_e.timer.c=null,_e.timer.t=NaN,--he.count?delete he[ye]:delete this[Y],he.active+=.5,_e.event&&_e.event.interrupt.call(this,this.__data__,_e.index))}}function xh(Y,he,ye){return ie(Y,Cs),Y.namespace=he,Y.id=ye,Y}var Cs=[],Mp=0,ic,qh;Cs.call=ee.call,Cs.empty=ee.empty,Cs.node=ee.node,Cs.size=ee.size,r.transition=function(Y,he){return Y&&Y.transition?ic?Y.transition(he):Y:r.selection().transition(Y)},r.transition.prototype=Cs,Cs.select=function(Y){var he=this.id,ye=this.namespace,_e=[],Ee,De,rt;Y=ae(Y);for(var $e=-1,nt=this.length;++$e<nt;){_e.push(Ee=[]);for(var mt=this[$e],Tt=-1,Vt=mt.length;++Tt<Vt;)(rt=mt[Tt])&&(De=Y.call(rt,rt.__data__,Tt,$e))?("__data__"in rt&&(De.__data__=rt.__data__),_h(De,Tt,ye,he,rt[ye][he]),Ee.push(De)):Ee.push(null)}return xh(_e,ye,he)},Cs.selectAll=function(Y){var he=this.id,ye=this.namespace,_e=[],Ee,De,rt,$e,nt;Y=fe(Y);for(var mt=-1,Tt=this.length;++mt<Tt;)for(var Vt=this[mt],Yt=-1,ur=Vt.length;++Yt<ur;)if(rt=Vt[Yt]){nt=rt[ye][he],De=Y.call(rt,rt.__data__,Yt,mt),_e.push(Ee=[]);for(var Rr=-1,ir=De.length;++Rr<ir;)($e=De[Rr])&&_h($e,Rr,ye,he,nt),Ee.push($e)}return xh(_e,ye,he)},Cs.filter=function(Y){var he=[],ye,_e,Ee;typeof Y!="function"&&(Y=Ae(Y));for(var De=0,rt=this.length;De<rt;De++){he.push(ye=[]);for(var _e=this[De],$e=0,nt=_e.length;$e<nt;$e++)(Ee=_e[$e])&&Y.call(Ee,Ee.__data__,$e,De)&&ye.push(Ee)}return xh(he,this.namespace,this.id)},Cs.tween=function(Y,he){var ye=this.id,_e=this.namespace;return arguments.length<2?this.node()[_e][ye].tween.get(Y):qe(this,he==null?function(Ee){Ee[_e][ye].tween.remove(Y)}:function(Ee){Ee[_e][ye].tween.set(Y,he)})};function pf(Y,he,ye,_e){var Ee=Y.id,De=Y.namespace;return qe(Y,typeof ye=="function"?function(rt,$e,nt){rt[De][Ee].tween.set(he,_e(ye.call(rt,rt.__data__,$e,nt)))}:(ye=_e(ye),function(rt){rt[De][Ee].tween.set(he,ye)}))}Cs.attr=function(Y,he){if(arguments.length<2){for(he in Y)this.attr(he,Y[he]);return this}var ye=Y=="transform"?Ss:wa,_e=r.ns.qualify(Y);function Ee(){this.removeAttribute(_e)}function De(){this.removeAttributeNS(_e.space,_e.local)}function rt(nt){return nt==null?Ee:(nt+="",function(){var mt=this.getAttribute(_e),Tt;return mt!==nt&&(Tt=ye(mt,nt),function(Vt){this.setAttribute(_e,Tt(Vt))})})}function $e(nt){return nt==null?De:(nt+="",function(){var mt=this.getAttributeNS(_e.space,_e.local),Tt;return mt!==nt&&(Tt=ye(mt,nt),function(Vt){this.setAttributeNS(_e.space,_e.local,Tt(Vt))})})}return pf(this,"attr."+Y,he,_e.local?$e:rt)},Cs.attrTween=function(Y,he){var ye=r.ns.qualify(Y);function _e(De,rt){var $e=he.call(this,De,rt,this.getAttribute(ye));return $e&&function(nt){this.setAttribute(ye,$e(nt))}}function Ee(De,rt){var $e=he.call(this,De,rt,this.getAttributeNS(ye.space,ye.local));return $e&&function(nt){this.setAttributeNS(ye.space,ye.local,$e(nt))}}return this.tween("attr."+Y,ye.local?Ee:_e)},Cs.style=function(Y,he,ye){var _e=arguments.length;if(_e<3){if(typeof Y!="string"){_e<2&&(he="");for(ye in Y)this.style(ye,Y[ye],he);return this}ye=""}function Ee(){this.style.removeProperty(Y)}function De(rt){return rt==null?Ee:(rt+="",function(){var $e=f(this).getComputedStyle(this,null).getPropertyValue(Y),nt;return $e!==rt&&(nt=wa($e,rt),function(mt){this.style.setProperty(Y,nt(mt),ye)})})}return pf(this,"style."+Y,he,De)},Cs.styleTween=function(Y,he,ye){arguments.length<3&&(ye="");function _e(Ee,De){var rt=he.call(this,Ee,De,f(this).getComputedStyle(this,null).getPropertyValue(Y));return rt&&function($e){this.style.setProperty(Y,rt($e),ye)}}return this.tween("style."+Y,_e)},Cs.text=function(Y){return pf(this,"text",Y,df)};function df(Y){return Y==null&&(Y=""),function(){this.textContent=Y}}Cs.remove=function(){var Y=this.namespace;return this.each("end.transition",function(){var he;this[Y].count<2&&(he=this.parentNode)&&he.removeChild(this)})},Cs.ease=function(Y){var he=this.id,ye=this.namespace;return arguments.length<1?this.node()[ye][he].ease:(typeof Y!="function"&&(Y=r.ease.apply(r,arguments)),qe(this,function(_e){_e[ye][he].ease=Y}))},Cs.delay=function(Y){var he=this.id,ye=this.namespace;return arguments.length<1?this.node()[ye][he].delay:qe(this,typeof Y=="function"?function(_e,Ee,De){_e[ye][he].delay=+Y.call(_e,_e.__data__,Ee,De)}:(Y=+Y,function(_e){_e[ye][he].delay=Y}))},Cs.duration=function(Y){var he=this.id,ye=this.namespace;return arguments.length<1?this.node()[ye][he].duration:qe(this,typeof Y=="function"?function(_e,Ee,De){_e[ye][he].duration=Math.max(1,Y.call(_e,_e.__data__,Ee,De))}:(Y=Math.max(1,Y),function(_e){_e[ye][he].duration=Y}))},Cs.each=function(Y,he){var ye=this.id,_e=this.namespace;if(arguments.length<2){var Ee=qh,De=ic;try{ic=ye,qe(this,function(rt,$e,nt){qh=rt[_e][ye],Y.call(rt,rt.__data__,$e,nt)})}finally{qh=Ee,ic=De}}else qe(this,function(rt){var $e=rt[_e][ye];($e.event||($e.event=r.dispatch("start","end","interrupt"))).on(Y,he)});return this},Cs.transition=function(){for(var Y=this.id,he=++Mp,ye=this.namespace,_e=[],Ee,De,rt,$e,nt=0,mt=this.length;nt<mt;nt++){_e.push(Ee=[]);for(var De=this[nt],Tt=0,Vt=De.length;Tt<Vt;Tt++)(rt=De[Tt])&&($e=rt[ye][Y],_h(rt,Tt,ye,he,{time:$e.time,ease:$e.ease,delay:$e.delay+$e.duration,duration:$e.duration})),Ee.push(rt)}return xh(_e,ye,he)};function bh(Y){return Y==null?"__transition__":"__transition_"+Y+"__"}function _h(Y,he,ye,_e,Ee){var De=Y[ye]||(Y[ye]={active:0,count:0}),rt=De[_e],$e,nt,mt,Tt,Vt;function Yt(ir){var hr=rt.delay;if(nt.t=hr+$e,hr<=ir)return ur(ir-hr);nt.c=ur}function ur(ir){var hr=De.active,mr=De[hr];mr&&(mr.timer.c=null,mr.timer.t=NaN,--De.count,delete De[hr],mr.event&&mr.event.interrupt.call(Y,Y.__data__,mr.index));for(var Dr in De)if(+Dr<_e){var yr=De[Dr];yr.timer.c=null,yr.timer.t=NaN,--De.count,delete De[Dr]}nt.c=Rr,ei(function(){return nt.c&&Rr(ir||1)&&(nt.c=null,nt.t=NaN),1},0,$e),De.active=_e,rt.event&&rt.event.start.call(Y,Y.__data__,he),Vt=[],rt.tween.forEach(function(kr,gn){(gn=gn.call(Y,Y.__data__,he))&&Vt.push(gn)}),Tt=rt.ease,mt=rt.duration}function Rr(ir){for(var hr=ir/mt,mr=Tt(hr),Dr=Vt.length;Dr>0;)Vt[--Dr].call(Y,mr);if(hr>=1)return rt.event&&rt.event.end.call(Y,Y.__data__,he),--De.count?delete De[_e]:delete Y[ye],1}rt||($e=Ee.time,nt=ei(Yt,0,$e),rt=De[_e]={tween:new A,time:$e,timer:nt,delay:Ee.delay,duration:Ee.duration,ease:Ee.ease,index:he},Ee=null,++De.count)}r.svg.axis=function(){var Y=r.scale.linear(),he=wh,ye=6,_e=6,Ee=3,De=[10],rt=null,$e;function nt(mt){mt.each(function(){var Tt=r.select(this),Vt=this.__chart__||Y,Yt=this.__chart__=Y.copy(),ur=rt??(Yt.ticks?Yt.ticks.apply(Yt,De):Yt.domain()),Rr=$e??(Yt.tickFormat?Yt.tickFormat.apply(Yt,De):G),ir=Tt.selectAll(".tick").data(ur,Yt),hr=ir.enter().insert("g",".domain").attr("class","tick").style("opacity",lt),mr=r.transition(ir.exit()).style("opacity",lt).remove(),Dr=r.transition(ir.order()).style("opacity",1),yr=Math.max(ye,0)+Ee,kr,gn=ph(Yt),vn=Tt.selectAll(".domain").data([0]),hn=(vn.enter().append("path").attr("class","domain"),r.transition(vn));hr.append("line"),hr.append("text");var sn=hr.select("line"),Xn=Dr.select("line"),ea=ir.select("text").text(Rr),La=hr.select("text"),da=Dr.select("text"),ma=he==="top"||he==="left"?-1:1,En,$n,ca,yn;if(he==="bottom"||he==="top"?(kr=oc,En="x",ca="y",$n="x2",yn="y2",ea.attr("dy",ma<0?"0em":".71em").style("text-anchor","middle"),hn.attr("d","M"+gn[0]+","+ma*_e+"V0H"+gn[1]+"V"+ma*_e)):(kr=vf,En="y",ca="x",$n="y2",yn="x2",ea.attr("dy",".32em").style("text-anchor",ma<0?"end":"start"),hn.attr("d","M"+ma*_e+","+gn[0]+"H0V"+gn[1]+"H"+ma*_e)),sn.attr(yn,ma*ye),La.attr(ca,ma*yr),Xn.attr($n,0).attr(yn,ma*ye),da.attr(En,0).attr(ca,ma*yr),Yt.rangeBand){var Hn=Yt,Ha=Hn.rangeBand()/2;Vt=Yt=function(gi){return Hn(gi)+Ha}}else Vt.rangeBand?Vt=Yt:mr.call(kr,Yt,Vt);hr.call(kr,Vt,Yt),Dr.call(kr,Yt,Yt)})}return nt.scale=function(mt){return arguments.length?(Y=mt,nt):Y},nt.orient=function(mt){return arguments.length?(he=mt in wv?mt+"":wh,nt):he},nt.ticks=function(){return arguments.length?(De=l(arguments),nt):De},nt.tickValues=function(mt){return arguments.length?(rt=mt,nt):rt},nt.tickFormat=function(mt){return arguments.length?($e=mt,nt):$e},nt.tickSize=function(mt){var Tt=arguments.length;return Tt?(ye=+mt,_e=+arguments[Tt-1],nt):ye},nt.innerTickSize=function(mt){return arguments.length?(ye=+mt,nt):ye},nt.outerTickSize=function(mt){return arguments.length?(_e=+mt,nt):_e},nt.tickPadding=function(mt){return arguments.length?(Ee=+mt,nt):Ee},nt.tickSubdivide=function(){return arguments.length&&nt},nt};var wh="bottom",wv={top:1,right:1,bottom:1,left:1};function oc(Y,he,ye){Y.attr("transform",function(_e){var Ee=he(_e);return"translate("+(isFinite(Ee)?Ee:ye(_e))+",0)"})}function vf(Y,he,ye){Y.attr("transform",function(_e){var Ee=he(_e);return"translate(0,"+(isFinite(Ee)?Ee:ye(_e))+")"})}r.svg.brush=function(){var Y=J(Tt,"brushstart","brush","brushend"),he=null,ye=null,_e=[0,0],Ee=[0,0],De,rt,$e=!0,nt=!0,mt=ep[0];function Tt(ir){ir.each(function(){var hr=r.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Rr).on("touchstart.brush",Rr),mr=hr.selectAll(".background").data([0]);mr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),hr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Dr=hr.selectAll(".resize").data(mt,G);Dr.exit().remove(),Dr.enter().append("g").attr("class",function(vn){return"resize "+vn}).style("cursor",function(vn){return Tv[vn]}).append("rect").attr("x",function(vn){return/[ew]$/.test(vn)?-3:null}).attr("y",function(vn){return/^[ns]/.test(vn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Dr.style("display",Tt.empty()?"none":null);var yr=r.transition(hr),kr=r.transition(mr),gn;he&&(gn=ph(he),kr.attr("x",gn[0]).attr("width",gn[1]-gn[0]),Yt(yr)),ye&&(gn=ph(ye),kr.attr("y",gn[0]).attr("height",gn[1]-gn[0]),ur(yr)),Vt(yr)})}Tt.event=function(ir){ir.each(function(){var hr=Y.of(this,arguments),mr={x:_e,y:Ee,i:De,j:rt},Dr=this.__chart__||mr;this.__chart__=mr,ic?r.select(this).transition().each("start.brush",function(){De=Dr.i,rt=Dr.j,_e=Dr.x,Ee=Dr.y,hr({type:"brushstart"})}).tween("brush:brush",function(){var yr=Da(_e,mr.x),kr=Da(Ee,mr.y);return De=rt=null,function(gn){_e=mr.x=yr(gn),Ee=mr.y=kr(gn),hr({type:"brush",mode:"resize"})}}).each("end.brush",function(){De=mr.i,rt=mr.j,hr({type:"brush",mode:"resize"}),hr({type:"brushend"})}):(hr({type:"brushstart"}),hr({type:"brush",mode:"resize"}),hr({type:"brushend"}))})};function Vt(ir){ir.selectAll(".resize").attr("transform",function(hr){return"translate("+_e[+/e$/.test(hr)]+","+Ee[+/^s/.test(hr)]+")"})}function Yt(ir){ir.select(".extent").attr("x",_e[0]),ir.selectAll(".extent,.n>rect,.s>rect").attr("width",_e[1]-_e[0])}function ur(ir){ir.select(".extent").attr("y",Ee[0]),ir.selectAll(".extent,.e>rect,.w>rect").attr("height",Ee[1]-Ee[0])}function Rr(){var ir=this,hr=r.select(r.event.target),mr=Y.of(ir,arguments),Dr=r.select(ir),yr=hr.datum(),kr=!/^(n|s)$/.test(yr)&&he,gn=!/^(e|w)$/.test(yr)&&ye,vn=hr.classed("extent"),hn=rr(ir),sn,Xn=r.mouse(ir),ea,La=r.select(f(ir)).on("keydown.brush",En).on("keyup.brush",$n);if(r.event.changedTouches?La.on("touchmove.brush",ca).on("touchend.brush",Hn):La.on("mousemove.brush",ca).on("mouseup.brush",Hn),Dr.interrupt().selectAll("*").interrupt(),vn)Xn[0]=_e[0]-Xn[0],Xn[1]=Ee[0]-Xn[1];else if(yr){var da=+/w$/.test(yr),ma=+/^n/.test(yr);ea=[_e[1-da]-Xn[0],Ee[1-ma]-Xn[1]],Xn[0]=_e[da],Xn[1]=Ee[ma]}else r.event.altKey&&(sn=Xn.slice());Dr.style("pointer-events","none").selectAll(".resize").style("display",null),r.select("body").style("cursor",hr.style("cursor")),mr({type:"brushstart"}),ca();function En(){r.event.keyCode==32&&(vn||(sn=null,Xn[0]-=_e[1],Xn[1]-=Ee[1],vn=2),K())}function $n(){r.event.keyCode==32&&vn==2&&(Xn[0]+=_e[1],Xn[1]+=Ee[1],vn=0,K())}function ca(){var Ha=r.mouse(ir),gi=!1;ea&&(Ha[0]+=ea[0],Ha[1]+=ea[1]),vn||(r.event.altKey?(sn||(sn=[(_e[0]+_e[1])/2,(Ee[0]+Ee[1])/2]),Xn[0]=_e[+(Ha[0]<sn[0])],Xn[1]=Ee[+(Ha[1]<sn[1])]):sn=null),kr&&yn(Ha,he,0)&&(Yt(Dr),gi=!0),gn&&yn(Ha,ye,1)&&(ur(Dr),gi=!0),gi&&(Vt(Dr),mr({type:"brush",mode:vn?"move":"resize"}))}function yn(Ha,gi,Pi){var mo=ph(gi),Do=mo[0],tl=mo[1],Os=Xn[Pi],Fs=Pi?Ee:_e,su=Fs[1]-Fs[0],io,kl;if(vn&&(Do-=Os,tl-=su+Os),io=(Pi?nt:$e)?Math.max(Do,Math.min(tl,Ha[Pi])):Ha[Pi],vn?kl=(io+=Os)+su:(sn&&(Os=Math.max(Do,Math.min(tl,2*sn[Pi]-io))),Os<io?(kl=io,io=Os):kl=Os),Fs[0]!=io||Fs[1]!=kl)return Pi?rt=null:De=null,Fs[0]=io,Fs[1]=kl,!0}function Hn(){ca(),Dr.style("pointer-events","all").selectAll(".resize").style("display",Tt.empty()?"none":null),r.select("body").style("cursor",null),La.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),hn(),mr({type:"brushend"})}}return Tt.x=function(ir){return arguments.length?(he=ir,mt=ep[!he<<1|!ye],Tt):he},Tt.y=function(ir){return arguments.length?(ye=ir,mt=ep[!he<<1|!ye],Tt):ye},Tt.clamp=function(ir){return arguments.length?(he&&ye?($e=!!ir[0],nt=!!ir[1]):he?$e=!!ir:ye&&(nt=!!ir),Tt):he&&ye?[$e,nt]:he?$e:ye?nt:null},Tt.extent=function(ir){var hr,mr,Dr,yr,kr;return arguments.length?(he&&(hr=ir[0],mr=ir[1],ye&&(hr=hr[0],mr=mr[0]),De=[hr,mr],he.invert&&(hr=he(hr),mr=he(mr)),mr<hr&&(kr=hr,hr=mr,mr=kr),(hr!=_e[0]||mr!=_e[1])&&(_e=[hr,mr])),ye&&(Dr=ir[0],yr=ir[1],he&&(Dr=Dr[1],yr=yr[1]),rt=[Dr,yr],ye.invert&&(Dr=ye(Dr),yr=ye(yr)),yr<Dr&&(kr=Dr,Dr=yr,yr=kr),(Dr!=Ee[0]||yr!=Ee[1])&&(Ee=[Dr,yr])),Tt):(he&&(De?(hr=De[0],mr=De[1]):(hr=_e[0],mr=_e[1],he.invert&&(hr=he.invert(hr),mr=he.invert(mr)),mr<hr&&(kr=hr,hr=mr,mr=kr))),ye&&(rt?(Dr=rt[0],yr=rt[1]):(Dr=Ee[0],yr=Ee[1],ye.invert&&(Dr=ye.invert(Dr),yr=ye.invert(yr)),yr<Dr&&(kr=Dr,Dr=yr,yr=kr))),he&&ye?[[hr,Dr],[mr,yr]]:he?[hr,mr]:ye&&[Dr,yr])},Tt.clear=function(){return Tt.empty()||(_e=[0,0],Ee=[0,0],De=rt=null),Tt},Tt.empty=function(){return!!he&&_e[0]==_e[1]||!!ye&&Ee[0]==Ee[1]},r.rebind(Tt,Y,"on")};var Tv={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ep=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Td=Xt.format=Co.timeFormat,Av=Td.utc,Ad=Av("%Y-%m-%dT%H:%M:%S.%LZ");Td.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Sp:Ad;function Sp(Y){return Y.toISOString()}Sp.parse=function(Y){var he=new Date(Y);return isNaN(he)?null:he},Sp.toString=Ad.toString,Xt.second=en(function(Y){return new xr(Math.floor(Y/1e3)*1e3)},function(Y,he){Y.setTime(Y.getTime()+Math.floor(he)*1e3)},function(Y){return Y.getSeconds()}),Xt.seconds=Xt.second.range,Xt.seconds.utc=Xt.second.utc.range,Xt.minute=en(function(Y){return new xr(Math.floor(Y/6e4)*6e4)},function(Y,he){Y.setTime(Y.getTime()+Math.floor(he)*6e4)},function(Y){return Y.getMinutes()}),Xt.minutes=Xt.minute.range,Xt.minutes.utc=Xt.minute.utc.range,Xt.hour=en(function(Y){var he=Y.getTimezoneOffset()/60;return new xr((Math.floor(Y/36e5-he)+he)*36e5)},function(Y,he){Y.setTime(Y.getTime()+Math.floor(he)*36e5)},function(Y){return Y.getHours()}),Xt.hours=Xt.hour.range,Xt.hours.utc=Xt.hour.utc.range,Xt.month=en(function(Y){return Y=Xt.day(Y),Y.setDate(1),Y},function(Y,he){Y.setMonth(Y.getMonth()+he)},function(Y){return Y.getMonth()}),Xt.months=Xt.month.range,Xt.months.utc=Xt.month.utc.range;function Th(Y,he,ye){function _e(De){return Y(De)}_e.invert=function(De){return mf(Y.invert(De))},_e.domain=function(De){return arguments.length?(Y.domain(De),_e):Y.domain().map(mf)};function Ee(De,rt){var $e=De[1]-De[0],nt=$e/rt,mt=r.bisect($f,nt);return mt==$f.length?[he.year,dh(De.map(function(Tt){return Tt/31536e6}),rt)[2]]:mt?he[nt/$f[mt-1]<$f[mt]/nt?mt-1:mt]:[kh,dh(De,rt)[2]]}return _e.nice=function(De,rt){var $e=_e.domain(),nt=lf($e),mt=De==null?Ee(nt,10):typeof De=="number"&&Ee(nt,De);mt&&(De=mt[0],rt=mt[1]);function Tt(Vt){return!isNaN(Vt)&&!De.range(Vt,mf(+Vt+1),rt).length}return _e.domain(jh($e,rt>1?{floor:function(Vt){for(;Tt(Vt=De.floor(Vt));)Vt=mf(Vt-1);return Vt},ceil:function(Vt){for(;Tt(Vt=De.ceil(Vt));)Vt=mf(+Vt+1);return Vt}}:De))},_e.ticks=function(De,rt){var $e=lf(_e.domain()),nt=De==null?Ee($e,10):typeof De=="number"?Ee($e,De):!De.range&&[{range:De},rt];return nt&&(De=nt[0],rt=nt[1]),De.range($e[0],mf(+$e[1]+1),rt<1?1:rt)},_e.tickFormat=function(){return ye},_e.copy=function(){return Th(Y.copy(),he,ye)},Ol(_e,Y)}function mf(Y){return new Date(Y)}var $f=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ah=[[Xt.second,1],[Xt.second,5],[Xt.second,15],[Xt.second,30],[Xt.minute,1],[Xt.minute,5],[Xt.minute,15],[Xt.minute,30],[Xt.hour,1],[Xt.hour,3],[Xt.hour,6],[Xt.hour,12],[Xt.day,1],[Xt.day,2],[Xt.week,1],[Xt.month,1],[Xt.month,3],[Xt.year,1]],Ep=Td.multi([[".%L",function(Y){return Y.getMilliseconds()}],[":%S",function(Y){return Y.getSeconds()}],["%I:%M",function(Y){return Y.getMinutes()}],["%I %p",function(Y){return Y.getHours()}],["%a %d",function(Y){return Y.getDay()&&Y.getDate()!=1}],["%b %d",function(Y){return Y.getDate()!=1}],["%B",function(Y){return Y.getMonth()}],["%Y",yu]]),kh={range:function(Y,he,ye){return r.range(Math.ceil(Y/ye)*ye,+he,ye).map(mf)},floor:G,ceil:G};Ah.year=Xt.year,Xt.scale=function(){return Th(r.scale.linear(),Ah,Ep)};var kv=Ah.map(function(Y){return[Y[0].utc,Y[1]]}),Mv=Av.multi([[".%L",function(Y){return Y.getUTCMilliseconds()}],[":%S",function(Y){return Y.getUTCSeconds()}],["%I:%M",function(Y){return Y.getUTCMinutes()}],["%I %p",function(Y){return Y.getUTCHours()}],["%a %d",function(Y){return Y.getUTCDay()&&Y.getUTCDate()!=1}],["%b %d",function(Y){return Y.getUTCDate()!=1}],["%B",function(Y){return Y.getUTCMonth()}],["%Y",yu]]);kv.year=Xt.year.utc,Xt.scale.utc=function(){return Th(r.scale.linear(),kv,Mv)},r.text=Wr(function(Y){return Y.responseText}),r.json=function(Y,he){return Vr(Y,"application/json",Sv,he)};function Sv(Y){return JSON.parse(Y.responseText)}r.html=function(Y,he){return Vr(Y,"text/html",Jf,he)};function Jf(Y){var he=c.createRange();return he.selectNode(c.body),he.createContextualFragment(Y.responseText)}r.xml=Wr(function(Y){return Y.responseXML}),typeof v=="object"&&v.exports?v.exports=r:this.d3=r}).apply(self)},{}],170:[function(e,v,M){v.exports=function(){for(var r=0;r<arguments.length;r++)if(arguments[r]!==void 0)return arguments[r]}},{}],171:[function(e,v,M){var r=e("incremental-convex-hull"),n=e("uniq");v.exports=f;function l(a,o){this.point=a,this.index=o}function c(a,o){for(var u=a.point,h=o.point,i=u.length,s=0;s<i;++s){var p=h[s]-u[s];if(p)return p}return 0}function t(a,o,u){if(a===1)return u?[[-1,0]]:[];var h=o.map(function(y,b){return[y[0],b]});h.sort(function(y,b){return y[0]-b[0]});for(var i=new Array(a-1),s=1;s<a;++s){var p=h[s-1],d=h[s];i[s-1]=[p[1],d[1]]}return u&&i.push([-1,i[0][1]],[i[a-1][1],-1]),i}function f(a,o){var u=a.length;if(u===0)return[];var h=a[0].length;if(h<1)return[];if(h===1)return t(u,a,o);for(var i=new Array(u),s=1,p=0;p<u;++p){for(var d=a[p],y=new Array(h+1),b=0,m=0;m<h;++m){var _=d[m];y[m]=_,b+=_*_}y[h]=b,i[p]=new l(y,p),s=Math.max(b,s)}n(i,c),u=i.length;for(var T=new Array(u+h+1),g=new Array(u+h+1),A=(h+1)*(h+1)*s,k=new Array(h+1),p=0;p<=h;++p)k[p]=0;k[h]=A,T[0]=k.slice(),g[0]=-1;for(var p=0;p<=h;++p){var y=k.slice();y[p]=1,T[p+1]=y,g[p+1]=-1}for(var p=0;p<u;++p){var R=i[p];T[p+h+1]=R.point,g[p+h+1]=R.index}var L=r(T,!1);if(o?L=L.filter(function(z){for(var E=0,S=0;S<=h;++S){var C=g[z[S]];if(C<0&&++E>=2)return!1;z[S]=C}return!0}):L=L.filter(function(z){for(var E=0;E<=h;++E){var S=g[z[E]];if(S<0)return!1;z[E]=S}return!0}),h&1)for(var p=0;p<L.length;++p){var R=L[p],y=R[0];R[0]=R[1],R[1]=y}return L}},{"incremental-convex-hull":459,uniq:597}],172:[function(e,v,M){v.exports=c;var r=c.canvas=document.createElement("canvas"),n=r.getContext("2d"),l=t([32,126]);c.createPairs=t,c.ascii=l;function c(f,a){Array.isArray(f)&&(f=f.join(", "));var o={},u,h=16,i=.05;a&&(a.length===2&&typeof a[0]=="number"?u=t(a):Array.isArray(a)?u=a:(a.o?u=t(a.o):a.pairs&&(u=a.pairs),a.fontSize&&(h=a.fontSize),a.threshold!=null&&(i=a.threshold))),u||(u=l),n.font=h+"px "+f;for(var s=0;s<u.length;s++){var p=u[s],d=n.measureText(p[0]).width+n.measureText(p[1]).width,y=n.measureText(p).width;if(Math.abs(d-y)>h*i){var b=(y-d)/h;o[p]=b*1e3}}return o}function t(f){for(var a=[],o=f[0];o<=f[1];o++)for(var u=String.fromCharCode(o),h=f[0];h<f[1];h++){var i=String.fromCharCode(h),s=u+i;a.push(s)}return a}},{}],173:[function(e,v,M){(function(r){(function(){var n=!1;if(typeof Float64Array<"u"){var l=new Float64Array(1),c=new Uint32Array(l.buffer);if(l[0]=1,n=!0,c[1]===1072693248){let f=function(u,h){return c[0]=u,c[1]=h,l[0]},a=function(u){return l[0]=u,c[0]},o=function(u){return l[0]=u,c[1]};v.exports=function(h){return l[0]=h,[c[0],c[1]]},v.exports.pack=f,v.exports.lo=a,v.exports.hi=o}else if(c[0]===1072693248){let f=function(u,h){return c[1]=u,c[0]=h,l[0]},a=function(u){return l[0]=u,c[1]},o=function(u){return l[0]=u,c[0]};v.exports=function(h){return l[0]=h,[c[1],c[0]]},v.exports.pack=f,v.exports.lo=a,v.exports.hi=o}else n=!1}if(!n){let f=function(u,h){return t.writeUInt32LE(u,0,!0),t.writeUInt32LE(h,4,!0),t.readDoubleLE(0,!0)},a=function(u){return t.writeDoubleLE(u,0,!0),t.readUInt32LE(0,!0)},o=function(u){return t.writeDoubleLE(u,0,!0),t.readUInt32LE(4,!0)};var t=new r(8);v.exports=function(h){return t.writeDoubleLE(h,0,!0),[t.readUInt32LE(0,!0),t.readUInt32LE(4,!0)]},v.exports.pack=f,v.exports.lo=a,v.exports.hi=o}v.exports.sign=function(f){return v.exports.hi(f)>>>31},v.exports.exponent=function(f){var a=v.exports.hi(f);return(a<<1>>>21)-1023},v.exports.fraction=function(f){var a=v.exports.lo(f),o=v.exports.hi(f),u=o&(1<<20)-1;return o&2146435072&&(u+=1<<20),[a,u]},v.exports.denormalized=function(f){var a=v.exports.hi(f);return!(a&2146435072)}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:111}],174:[function(e,v,M){var r=e("abs-svg-path"),n=e("normalize-svg-path"),l={M:"moveTo",C:"bezierCurveTo"};v.exports=function(c,t){c.beginPath(),n(r(t)).forEach(function(f){var a=f[0],o=f.slice(1);c[l[a]].apply(c,o)}),c.closePath()}},{"abs-svg-path":65,"normalize-svg-path":497}],175:[function(e,v,M){v.exports=function(r){switch(r){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],176:[function(e,v,M){function r(c,t,f){var a=c[f]|0;if(a<=0)return[];var o=new Array(a),u;if(f===c.length-1)for(u=0;u<a;++u)o[u]=t;else for(u=0;u<a;++u)o[u]=r(c,t,f+1);return o}function n(c,t){var f,a;for(f=new Array(c),a=0;a<c;++a)f[a]=t;return f}function l(c,t){switch(typeof t>"u"&&(t=0),typeof c){case"number":if(c>0)return n(c|0,t);break;case"object":if(typeof c.length=="number")return r(c,t,0);break}return[]}v.exports=l},{}],177:[function(e,v,M){v.exports=r,v.exports.default=r;function r(U,X,I){I=I||2;var B=X&&X.length,j=B?X[0]*I:U.length,H=n(U,0,j,I,!0),K=[];if(!H||H.next===H.prev)return K;var te,J,oe,ie,Q,V,se;if(B&&(H=u(U,X,H,I)),U.length>80*I){te=oe=U[0],J=ie=U[1];for(var re=I;re<j;re+=I)Q=U[re],V=U[re+1],Q<te&&(te=Q),V<J&&(J=V),Q>oe&&(oe=Q),V>ie&&(ie=V);se=Math.max(oe-te,ie-J),se=se!==0?1/se:0}return c(H,K,I,te,J,se),K}function n(U,X,I,B,j){var H,K;if(j===G(U,X,I,B)>0)for(H=X;H<I;H+=B)K=D(H,U[H],U[H+1],K);else for(H=I-B;H>=X;H-=B)K=D(H,U[H],U[H+1],K);return K&&A(K,K.next)&&(F(K),K=K.next),K}function l(U,X){if(!U)return U;X||(X=U);var I=U,B;do if(B=!1,!I.steiner&&(A(I,I.next)||g(I.prev,I,I.next)===0)){if(F(I),I=X=I.prev,I===I.next)break;B=!0}else I=I.next;while(B||I!==X);return X}function c(U,X,I,B,j,H,K){if(U){!K&&H&&d(U,B,j,H);for(var te=U,J,oe;U.prev!==U.next;){if(J=U.prev,oe=U.next,H?f(U,B,j,H):t(U)){X.push(J.i/I),X.push(U.i/I),X.push(oe.i/I),F(U),U=oe.next,te=oe.next;continue}if(U=oe,U===te){K?K===1?(U=a(l(U),X,I),c(U,X,I,B,j,H,2)):K===2&&o(U,X,I,B,j,H):c(l(U),X,I,B,j,H,1);break}}}}function t(U){var X=U.prev,I=U,B=U.next;if(g(X,I,B)>=0)return!1;for(var j=U.next.next;j!==U.prev;){if(_(X.x,X.y,I.x,I.y,B.x,B.y,j.x,j.y)&&g(j.prev,j,j.next)>=0)return!1;j=j.next}return!0}function f(U,X,I,B){var j=U.prev,H=U,K=U.next;if(g(j,H,K)>=0)return!1;for(var te=j.x<H.x?j.x<K.x?j.x:K.x:H.x<K.x?H.x:K.x,J=j.y<H.y?j.y<K.y?j.y:K.y:H.y<K.y?H.y:K.y,oe=j.x>H.x?j.x>K.x?j.x:K.x:H.x>K.x?H.x:K.x,ie=j.y>H.y?j.y>K.y?j.y:K.y:H.y>K.y?H.y:K.y,Q=b(te,J,X,I,B),V=b(oe,ie,X,I,B),se=U.prevZ,re=U.nextZ;se&&se.z>=Q&&re&&re.z<=V;){if(se!==U.prev&&se!==U.next&&_(j.x,j.y,H.x,H.y,K.x,K.y,se.x,se.y)&&g(se.prev,se,se.next)>=0||(se=se.prevZ,re!==U.prev&&re!==U.next&&_(j.x,j.y,H.x,H.y,K.x,K.y,re.x,re.y)&&g(re.prev,re,re.next)>=0))return!1;re=re.nextZ}for(;se&&se.z>=Q;){if(se!==U.prev&&se!==U.next&&_(j.x,j.y,H.x,H.y,K.x,K.y,se.x,se.y)&&g(se.prev,se,se.next)>=0)return!1;se=se.prevZ}for(;re&&re.z<=V;){if(re!==U.prev&&re!==U.next&&_(j.x,j.y,H.x,H.y,K.x,K.y,re.x,re.y)&&g(re.prev,re,re.next)>=0)return!1;re=re.nextZ}return!0}function a(U,X,I){var B=U;do{var j=B.prev,H=B.next.next;!A(j,H)&&k(j,B,B.next,H)&&E(j,H)&&E(H,j)&&(X.push(j.i/I),X.push(B.i/I),X.push(H.i/I),F(B),F(B.next),B=U=H),B=B.next}while(B!==U);return l(B)}function o(U,X,I,B,j,H){var K=U;do{for(var te=K.next.next;te!==K.prev;){if(K.i!==te.i&&T(K,te)){var J=C(K,te);K=l(K,K.next),J=l(J,J.next),c(K,X,I,B,j,H),c(J,X,I,B,j,H);return}te=te.next}K=K.next}while(K!==U)}function u(U,X,I,B){var j=[],H,K,te,J,oe;for(H=0,K=X.length;H<K;H++)te=X[H]*B,J=H<K-1?X[H+1]*B:U.length,oe=n(U,te,J,B,!1),oe===oe.next&&(oe.steiner=!0),j.push(m(oe));for(j.sort(h),H=0;H<j.length;H++)i(j[H],I),I=l(I,I.next);return I}function h(U,X){return U.x-X.x}function i(U,X){if(X=s(U,X),X){var I=C(X,U);l(X,X.next),l(I,I.next)}}function s(U,X){var I=X,B=U.x,j=U.y,H=-1/0,K;do{if(j<=I.y&&j>=I.next.y&&I.next.y!==I.y){var te=I.x+(j-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(te<=B&&te>H){if(H=te,te===B){if(j===I.y)return I;if(j===I.next.y)return I.next}K=I.x<I.next.x?I:I.next}}I=I.next}while(I!==X);if(!K)return null;if(B===H)return K;var J=K,oe=K.x,ie=K.y,Q=1/0,V;I=K;do B>=I.x&&I.x>=oe&&B!==I.x&&_(j<ie?B:H,j,oe,ie,j<ie?H:B,j,I.x,I.y)&&(V=Math.abs(j-I.y)/(B-I.x),E(I,U)&&(V<Q||V===Q&&(I.x>K.x||I.x===K.x&&p(K,I)))&&(K=I,Q=V)),I=I.next;while(I!==J);return K}function p(U,X){return g(U.prev,U,X.prev)<0&&g(X.next,U,U.next)<0}function d(U,X,I,B){var j=U;do j.z===null&&(j.z=b(j.x,j.y,X,I,B)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==U);j.prevZ.nextZ=null,j.prevZ=null,y(j)}function y(U){var X,I,B,j,H,K,te,J,oe=1;do{for(I=U,U=null,H=null,K=0;I;){for(K++,B=I,te=0,X=0;X<oe&&(te++,B=B.nextZ,!!B);X++);for(J=oe;te>0||J>0&&B;)te!==0&&(J===0||!B||I.z<=B.z)?(j=I,I=I.nextZ,te--):(j=B,B=B.nextZ,J--),H?H.nextZ=j:U=j,j.prevZ=H,H=j;I=B}H.nextZ=null,oe*=2}while(K>1);return U}function b(U,X,I,B,j){return U=32767*(U-I)*j,X=32767*(X-B)*j,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,X=(X|X<<8)&16711935,X=(X|X<<4)&252645135,X=(X|X<<2)&858993459,X=(X|X<<1)&1431655765,U|X<<1}function m(U){var X=U,I=U;do(X.x<I.x||X.x===I.x&&X.y<I.y)&&(I=X),X=X.next;while(X!==U);return I}function _(U,X,I,B,j,H,K,te){return(j-K)*(X-te)-(U-K)*(H-te)>=0&&(U-K)*(B-te)-(I-K)*(X-te)>=0&&(I-K)*(H-te)-(j-K)*(B-te)>=0}function T(U,X){return U.next.i!==X.i&&U.prev.i!==X.i&&!z(U,X)&&(E(U,X)&&E(X,U)&&S(U,X)&&(g(U.prev,U,X.prev)||g(U,X.prev,X))||A(U,X)&&g(U.prev,U,U.next)>0&&g(X.prev,X,X.next)>0)}function g(U,X,I){return(X.y-U.y)*(I.x-X.x)-(X.x-U.x)*(I.y-X.y)}function A(U,X){return U.x===X.x&&U.y===X.y}function k(U,X,I,B){var j=L(g(U,X,I)),H=L(g(U,X,B)),K=L(g(I,B,U)),te=L(g(I,B,X));return!!(j!==H&&K!==te||j===0&&R(U,I,X)||H===0&&R(U,B,X)||K===0&&R(I,U,B)||te===0&&R(I,X,B))}function R(U,X,I){return X.x<=Math.max(U.x,I.x)&&X.x>=Math.min(U.x,I.x)&&X.y<=Math.max(U.y,I.y)&&X.y>=Math.min(U.y,I.y)}function L(U){return U>0?1:U<0?-1:0}function z(U,X){var I=U;do{if(I.i!==U.i&&I.next.i!==U.i&&I.i!==X.i&&I.next.i!==X.i&&k(I,I.next,U,X))return!0;I=I.next}while(I!==U);return!1}function E(U,X){return g(U.prev,U,U.next)<0?g(U,X,U.next)>=0&&g(U,U.prev,X)>=0:g(U,X,U.prev)<0||g(U,U.next,X)<0}function S(U,X){var I=U,B=!1,j=(U.x+X.x)/2,H=(U.y+X.y)/2;do I.y>H!=I.next.y>H&&I.next.y!==I.y&&j<(I.next.x-I.x)*(H-I.y)/(I.next.y-I.y)+I.x&&(B=!B),I=I.next;while(I!==U);return B}function C(U,X){var I=new N(U.i,U.x,U.y),B=new N(X.i,X.x,X.y),j=U.next,H=X.prev;return U.next=X,X.prev=U,I.next=j,j.prev=I,B.next=I,I.prev=B,H.next=B,B.prev=H,B}function D(U,X,I,B){var j=new N(U,X,I);return B?(j.next=B.next,j.prev=B,B.next.prev=j,B.next=j):(j.prev=j,j.next=j),j}function F(U){U.next.prev=U.prev,U.prev.next=U.next,U.prevZ&&(U.prevZ.nextZ=U.nextZ),U.nextZ&&(U.nextZ.prevZ=U.prevZ)}function N(U,X,I){this.i=U,this.x=X,this.y=I,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}r.deviation=function(U,X,I,B){var j=X&&X.length,H=j?X[0]*I:U.length,K=Math.abs(G(U,0,H,I));if(j)for(var te=0,J=X.length;te<J;te++){var oe=X[te]*I,ie=te<J-1?X[te+1]*I:U.length;K-=Math.abs(G(U,oe,ie,I))}var Q=0;for(te=0;te<B.length;te+=3){var V=B[te]*I,se=B[te+1]*I,re=B[te+2]*I;Q+=Math.abs((U[V]-U[re])*(U[se+1]-U[V+1])-(U[V]-U[se])*(U[re+1]-U[V+1]))}return K===0&&Q===0?0:Math.abs((Q-K)/K)};function G(U,X,I,B){for(var j=0,H=X,K=I-B;H<I;H+=B)j+=(U[K]-U[H])*(U[H+1]+U[K+1]),K=H;return j}r.flatten=function(U){for(var X=U[0][0].length,I={vertices:[],holes:[],dimensions:X},B=0,j=0;j<U.length;j++){for(var H=0;H<U[j].length;H++)for(var K=0;K<X;K++)I.vertices.push(U[j][H][K]);j>0&&(B+=U[j-1].length,I.holes.push(B))}return I}},{}],178:[function(e,v,M){v.exports=n;var r=e("uniq");function n(l,c){var t=l.length;if(typeof c!="number"){c=0;for(var f=0;f<t;++f){var a=l[f];c=Math.max(c,a[0],a[1])}c=(c|0)+1}c=c|0;for(var o=new Array(c),f=0;f<c;++f)o[f]=[];for(var f=0;f<t;++f){var a=l[f];o[a[0]].push(a[1]),o[a[1]].push(a[0])}for(var u=0;u<c;++u)r(o[u],function(h,i){return h-i});return o}},{uniq:597}],179:[function(e,v,M){var r=e("strongly-connected-components");v.exports=function(l,c){var t=[],f=[],a=[],o={},u=[],h;function i(A){a[A]=!1,o.hasOwnProperty(A)&&Object.keys(o[A]).forEach(function(k){delete o[A][k],a[k]&&i(k)})}function s(A){var k=!1;f.push(A),a[A]=!0;var R,L;for(R=0;R<u[A].length;R++)L=u[A][R],L===h?(p(h,f),k=!0):a[L]||(k=s(L));if(k)i(A);else for(R=0;R<u[A].length;R++){L=u[A][R];var z=o[L];z||(z={},o[L]=z),z[L]=!0}return f.pop(),k}function p(A,k){var R=[].concat(k).concat(A);c?c(s):t.push(R)}function d(A){for(var k=0;k<l.length;k++)k<A&&(l[k]=[]),l[k]=l[k].filter(function(R){return R>=A})}function y(A){d(A);for(var k=l,R=r(k),L=R.components.filter(function(N){return N.length>1}),z=1/0,E,S=0;S<L.length;S++)for(var C=0;C<L[S].length;C++)L[S][C]<z&&(z=L[S][C],E=S);var D=L[E];if(!D)return!1;var F=l.map(function(N,G){return D.indexOf(G)===-1?[]:N.filter(function(U){return D.indexOf(U)!==-1})});return{leastVertex:z,adjList:F}}h=0;for(var b=l.length;h<b;){var m=y(h);if(h=m.leastVertex,u=m.adjList,u){for(var _=0;_<u.length;_++)for(var T=0;T<u[_].length;T++){var g=u[_][T];a[+g]=!1,o[g]={}}s(h),h=h+1}else h=b}if(!c)return t}},{"strongly-connected-components":569}],180:[function(e,v,M){var r=e("../../object/valid-value");v.exports=function(){return r(this).length=0,this}},{"../../object/valid-value":211}],181:[function(e,v,M){v.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":182,"./shim":183}],182:[function(e,v,M){v.exports=function(){var r=Array.from,n,l;return typeof r!="function"?!1:(n=["raz","dwa"],l=r(n),!!(l&&l!==n&&l[1]==="dwa"))}},{}],183:[function(e,v,M){var r=e("es6-symbol").iterator,n=e("../../function/is-arguments"),l=e("../../function/is-function"),c=e("../../number/to-pos-integer"),t=e("../../object/valid-callable"),f=e("../../object/valid-value"),a=e("../../object/is-value"),o=e("../../string/is-string"),u=Array.isArray,h=Function.prototype.call,i={configurable:!0,enumerable:!0,writable:!0,value:null},s=Object.defineProperty;v.exports=function(p){var d=arguments[1],y=arguments[2],b,m,_,T,g,A,k,R,L,z;if(p=Object(f(p)),a(d)&&t(d),!this||this===Array||!l(this)){if(!d){if(n(p))return g=p.length,g!==1?Array.apply(null,p):(T=new Array(1),T[0]=p[0],T);if(u(p)){for(T=new Array(g=p.length),m=0;m<g;++m)T[m]=p[m];return T}}T=[]}else b=this;if(!u(p)){if((L=p[r])!==void 0){for(k=t(L).call(p),b&&(T=new b),R=k.next(),m=0;!R.done;)z=d?h.call(d,y,R.value,m):R.value,b?(i.value=z,s(T,m,i)):T[m]=z,R=k.next(),++m;g=m}else if(o(p)){for(g=p.length,b&&(T=new b),m=0,_=0;m<g;++m)z=p[m],m+1<g&&(A=z.charCodeAt(0),A>=55296&&A<=56319&&(z+=p[++m])),z=d?h.call(d,y,z,_):z,b?(i.value=z,s(T,_,i)):T[_]=z,++_;g=_}}if(g===void 0)for(g=c(p.length),b&&(T=new b(g)),m=0;m<g;++m)z=d?h.call(d,y,p[m],m):p[m],b?(i.value=z,s(T,m,i)):T[m]=z;return b&&(i.value=null,T.length=g),T}},{"../../function/is-arguments":184,"../../function/is-function":185,"../../number/to-pos-integer":191,"../../object/is-value":200,"../../object/valid-callable":209,"../../object/valid-value":211,"../../string/is-string":215,"es6-symbol":225}],184:[function(e,v,M){var r=Object.prototype.toString,n=r.call(function(){return arguments}());v.exports=function(l){return r.call(l)===n}},{}],185:[function(e,v,M){var r=Object.prototype.toString,n=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);v.exports=function(l){return typeof l=="function"&&n(r.call(l))}},{}],186:[function(e,v,M){v.exports=function(){}},{}],187:[function(e,v,M){v.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":188,"./shim":189}],188:[function(e,v,M){v.exports=function(){var r=Math.sign;return typeof r!="function"?!1:r(10)===1&&r(-20)===-1}},{}],189:[function(e,v,M){v.exports=function(r){return r=Number(r),isNaN(r)||r===0?r:r>0?1:-1}},{}],190:[function(e,v,M){var r=e("../math/sign"),n=Math.abs,l=Math.floor;v.exports=function(c){return isNaN(c)?0:(c=Number(c),c===0||!isFinite(c)?c:r(c)*l(n(c)))}},{"../math/sign":187}],191:[function(e,v,M){var r=e("./to-integer"),n=Math.max;v.exports=function(l){return n(0,r(l))}},{"./to-integer":190}],192:[function(e,v,M){var r=e("./valid-callable"),n=e("./valid-value"),l=Function.prototype.bind,c=Function.prototype.call,t=Object.keys,f=Object.prototype.propertyIsEnumerable;v.exports=function(a,o){return function(u,h){var i,s=arguments[2],p=arguments[3];return u=Object(n(u)),r(h),i=t(u),p&&i.sort(typeof p=="function"?l.call(p,u):void 0),typeof a!="function"&&(a=i[a]),c.call(a,i,function(d,y){return f.call(u,d)?c.call(h,s,u[d],d,u,y):o})}}},{"./valid-callable":209,"./valid-value":211}],193:[function(e,v,M){v.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":194,"./shim":195}],194:[function(e,v,M){v.exports=function(){var r=Object.assign,n;return typeof r!="function"?!1:(n={foo:"raz"},r(n,{bar:"dwa"},{trzy:"trzy"}),n.foo+n.bar+n.trzy==="razdwatrzy")}},{}],195:[function(e,v,M){var r=e("../keys"),n=e("../valid-value"),l=Math.max;v.exports=function(c,t){var f,a,o=l(arguments.length,2),u;for(c=Object(n(c)),u=function(h){try{c[h]=t[h]}catch(i){f||(f=i)}},a=1;a<o;++a)t=arguments[a],r(t).forEach(u);if(f!==void 0)throw f;return c}},{"../keys":201,"../valid-value":211}],196:[function(e,v,M){var r=e("../array/from"),n=e("./assign"),l=e("./valid-value");v.exports=function(c){var t=Object(l(c)),f=arguments[1],a=Object(arguments[2]);if(t!==c&&!f)return t;var o={};return f?r(f,function(u){(a.ensure||u in c)&&(o[u]=c[u])}):n(o,c),o}},{"../array/from":181,"./assign":193,"./valid-value":211}],197:[function(e,v,M){var r=Object.create,n;e("./set-prototype-of/is-implemented")()||(n=e("./set-prototype-of/shim")),v.exports=function(){var l,c,t;return!n||n.level!==1?r:(l={},c={},t={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(f){if(f==="__proto__"){c[f]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}c[f]=t}),Object.defineProperties(l,c),Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:l}),function(f,a){return r(f===null?l:f,a)})}()},{"./set-prototype-of/is-implemented":207,"./set-prototype-of/shim":208}],198:[function(e,v,M){v.exports=e("./_iterate")("forEach")},{"./_iterate":192}],199:[function(e,v,M){var r=e("./is-value"),n={function:!0,object:!0};v.exports=function(l){return r(l)&&n[typeof l]||!1}},{"./is-value":200}],200:[function(e,v,M){var r=e("../function/noop")();v.exports=function(n){return n!==r&&n!==null}},{"../function/noop":186}],201:[function(e,v,M){v.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":202,"./shim":203}],202:[function(e,v,M){v.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],203:[function(e,v,M){var r=e("../is-value"),n=Object.keys;v.exports=function(l){return n(r(l)?Object(l):l)}},{"../is-value":200}],204:[function(e,v,M){var r=e("./valid-callable"),n=e("./for-each"),l=Function.prototype.call;v.exports=function(c,t){var f={},a=arguments[2];return r(t),n(c,function(o,u,h,i){f[u]=l.call(t,a,o,u,h,i)}),f}},{"./for-each":198,"./valid-callable":209}],205:[function(e,v,M){var r=e("./is-value"),n=Array.prototype.forEach,l=Object.create,c=function(t,f){var a;for(a in t)f[a]=t[a]};v.exports=function(t){var f=l(null);return n.call(arguments,function(a){r(a)&&c(Object(a),f)}),f}},{"./is-value":200}],206:[function(e,v,M){v.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":207,"./shim":208}],207:[function(e,v,M){var r=Object.create,n=Object.getPrototypeOf,l={};v.exports=function(){var c=Object.setPrototypeOf,t=arguments[0]||r;return typeof c!="function"?!1:n(c(t(null),l))===l}},{}],208:[function(e,v,M){var r=e("../is-object"),n=e("../valid-value"),l=Object.prototype.isPrototypeOf,c=Object.defineProperty,t={configurable:!0,enumerable:!1,writable:!0,value:void 0},f;f=function(a,o){if(n(a),o===null||r(o))return a;throw new TypeError("Prototype must be null or an object")},v.exports=function(a){var o,u;return a?(a.level===2?a.set?(u=a.set,o=function(h,i){return u.call(f(h,i),i),h}):o=function(h,i){return f(h,i).__proto__=i,h}:o=function h(i,s){var p;return f(i,s),p=l.call(h.nullPolyfill,i),p&&delete h.nullPolyfill.__proto__,s===null&&(s=h.nullPolyfill),i.__proto__=s,p&&c(h.nullPolyfill,"__proto__",t),i},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})):null}(function(){var a=Object.create(null),o={},u,h=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(h){try{u=h.set,u.call(a,o)}catch{}if(Object.getPrototypeOf(a)===o)return{set:u,level:2}}return a.__proto__=o,Object.getPrototypeOf(a)===o?{level:2}:(a={},a.__proto__=o,Object.getPrototypeOf(a)===o?{level:1}:!1)}()),e("../create")},{"../create":197,"../is-object":199,"../valid-value":211}],209:[function(e,v,M){v.exports=function(r){if(typeof r!="function")throw new TypeError(r+" is not a function");return r}},{}],210:[function(e,v,M){var r=e("./is-object");v.exports=function(n){if(!r(n))throw new TypeError(n+" is not an Object");return n}},{"./is-object":199}],211:[function(e,v,M){var r=e("./is-value");v.exports=function(n){if(!r(n))throw new TypeError("Cannot use null or undefined");return n}},{"./is-value":200}],212:[function(e,v,M){v.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":213,"./shim":214}],213:[function(e,v,M){var r="razdwatrzy";v.exports=function(){return typeof r.contains!="function"?!1:r.contains("dwa")===!0&&r.contains("foo")===!1}},{}],214:[function(e,v,M){var r=String.prototype.indexOf;v.exports=function(n){return r.call(this,n,arguments[1])>-1}},{}],215:[function(e,v,M){var r=Object.prototype.toString,n=r.call("");v.exports=function(l){return typeof l=="string"||l&&typeof l=="object"&&(l instanceof String||r.call(l)===n)||!1}},{}],216:[function(e,v,M){var r=Object.create(null),n=Math.random;v.exports=function(){var l;do l=n().toString(36).slice(2);while(r[l]);return l}},{}],217:[function(e,v,M){var r=e("es5-ext/object/set-prototype-of"),n=e("es5-ext/string/#/contains"),l=e("d"),c=e("es6-symbol"),t=e("./"),f=Object.defineProperty,a;a=v.exports=function(o,u){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");t.call(this,o),u?n.call(u,"key+value")?u="key+value":n.call(u,"key")?u="key":u="value":u="value",f(this,"__kind__",l("",u))},r&&r(a,t),delete a.prototype.constructor,a.prototype=Object.create(t.prototype,{_resolve:l(function(o){return this.__kind__==="value"?this.__list__[o]:this.__kind__==="key+value"?[o,this.__list__[o]]:o})}),f(a.prototype,c.toStringTag,l("c","Array Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,"es5-ext/string/#/contains":212,"es6-symbol":225}],218:[function(e,v,M){var r=e("es5-ext/function/is-arguments"),n=e("es5-ext/object/valid-callable"),l=e("es5-ext/string/is-string"),c=e("./get"),t=Array.isArray,f=Function.prototype.call,a=Array.prototype.some;v.exports=function(o,u){var h,i=arguments[2],s,p,d,y,b,m,_;if(t(o)||r(o)?h="array":l(o)?h="string":o=c(o),n(u),p=function(){d=!0},h==="array"){a.call(o,function(T){return f.call(u,i,T,p),d});return}if(h==="string"){for(b=o.length,y=0;y<b&&(m=o[y],y+1<b&&(_=m.charCodeAt(0),_>=55296&&_<=56319&&(m+=o[++y])),f.call(u,i,m,p),!d);++y);return}for(s=o.next();!s.done;){if(f.call(u,i,s.value,p),d)return;s=o.next()}}},{"./get":219,"es5-ext/function/is-arguments":184,"es5-ext/object/valid-callable":209,"es5-ext/string/is-string":215}],219:[function(e,v,M){var r=e("es5-ext/function/is-arguments"),n=e("es5-ext/string/is-string"),l=e("./array"),c=e("./string"),t=e("./valid-iterable"),f=e("es6-symbol").iterator;v.exports=function(a){return typeof t(a)[f]=="function"?a[f]():r(a)?new l(a):n(a)?new c(a):new l(a)}},{"./array":217,"./string":222,"./valid-iterable":223,"es5-ext/function/is-arguments":184,"es5-ext/string/is-string":215,"es6-symbol":225}],220:[function(e,v,M){var r=e("es5-ext/array/#/clear"),n=e("es5-ext/object/assign"),l=e("es5-ext/object/valid-callable"),c=e("es5-ext/object/valid-value"),t=e("d"),f=e("d/auto-bind"),a=e("es6-symbol"),o=Object.defineProperty,u=Object.defineProperties,h;v.exports=h=function(i,s){if(!(this instanceof h))throw new TypeError("Constructor requires 'new'");u(this,{__list__:t("w",c(i)),__context__:t("w",s),__nextIndex__:t("w",0)}),s&&(l(s.on),s.on("_add",this._onAdd),s.on("_delete",this._onDelete),s.on("_clear",this._onClear))},delete h.prototype.constructor,u(h.prototype,n({_next:t(function(){var i;if(this.__list__){if(this.__redo__&&(i=this.__redo__.shift(),i!==void 0))return i;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:t(function(){return this._createResult(this._next())}),_createResult:t(function(i){return i===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(i)}}),_resolve:t(function(i){return this.__list__[i]}),_unBind:t(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:t(function(){return"[object "+(this[a.toStringTag]||"Object")+"]"})},f({_onAdd:t(function(i){if(!(i>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){o(this,"__redo__",t("c",[i]));return}this.__redo__.forEach(function(s,p){s>=i&&(this.__redo__[p]=++s)},this),this.__redo__.push(i)}}),_onDelete:t(function(i){var s;i>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(s=this.__redo__.indexOf(i),s!==-1&&this.__redo__.splice(s,1),this.__redo__.forEach(function(p,d){p>i&&(this.__redo__[d]=--p)},this)))}),_onClear:t(function(){this.__redo__&&r.call(this.__redo__),this.__nextIndex__=0})}))),o(h.prototype,a.iterator,t(function(){return this}))},{d:155,"d/auto-bind":154,"es5-ext/array/#/clear":180,"es5-ext/object/assign":193,"es5-ext/object/valid-callable":209,"es5-ext/object/valid-value":211,"es6-symbol":225}],221:[function(e,v,M){var r=e("es5-ext/function/is-arguments"),n=e("es5-ext/object/is-value"),l=e("es5-ext/string/is-string"),c=e("es6-symbol").iterator,t=Array.isArray;v.exports=function(f){return n(f)?t(f)||l(f)||r(f)?!0:typeof f[c]=="function":!1}},{"es5-ext/function/is-arguments":184,"es5-ext/object/is-value":200,"es5-ext/string/is-string":215,"es6-symbol":225}],222:[function(e,v,M){var r=e("es5-ext/object/set-prototype-of"),n=e("d"),l=e("es6-symbol"),c=e("./"),t=Object.defineProperty,f;f=v.exports=function(a){if(!(this instanceof f))throw new TypeError("Constructor requires 'new'");a=String(a),c.call(this,a),t(this,"__length__",n("",a.length))},r&&r(f,c),delete f.prototype.constructor,f.prototype=Object.create(c.prototype,{_next:n(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:n(function(a){var o=this.__list__[a],u;return this.__nextIndex__===this.__length__?o:(u=o.charCodeAt(0),u>=55296&&u<=56319?o+this.__list__[this.__nextIndex__++]:o)})}),t(f.prototype,l.toStringTag,n("c","String Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,"es6-symbol":225}],223:[function(e,v,M){var r=e("./is-iterable");v.exports=function(n){if(!r(n))throw new TypeError(n+" is not iterable");return n}},{"./is-iterable":221}],224:[function(e,v,M){(function(r,n){(function(){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(l,c){typeof M=="object"&&typeof v<"u"?v.exports=c():l.ES6Promise=c()})(this,function(){function l(ze){var Ze=typeof ze;return ze!==null&&(Ze==="object"||Ze==="function")}function c(ze){return typeof ze=="function"}var t=void 0;Array.isArray?t=Array.isArray:t=function(ze){return Object.prototype.toString.call(ze)==="[object Array]"};var f=t,a=0,o=void 0,u=void 0,h=function(Ze,tt){R[a]=Ze,R[a+1]=tt,a+=2,a===2&&(u?u(L):E())};function i(ze){u=ze}function s(ze){h=ze}var p=typeof window<"u"?window:void 0,d=p||{},y=d.MutationObserver||d.WebKitMutationObserver,b=typeof self>"u"&&typeof r<"u"&&{}.toString.call(r)==="[object process]",m=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function _(){return function(){return r.nextTick(L)}}function T(){return typeof o<"u"?function(){o(L)}:k()}function g(){var ze=0,Ze=new y(L),tt=document.createTextNode("");return Ze.observe(tt,{characterData:!0}),function(){tt.data=ze=++ze%2}}function A(){var ze=new MessageChannel;return ze.port1.onmessage=L,function(){return ze.port2.postMessage(0)}}function k(){var ze=setTimeout;return function(){return ze(L,1)}}var R=new Array(1e3);function L(){for(var ze=0;ze<a;ze+=2){var Ze=R[ze],tt=R[ze+1];Ze(tt),R[ze]=void 0,R[ze+1]=void 0}a=0}function z(){try{var ze=Function("return this")().require("vertx");return o=ze.runOnLoop||ze.runOnContext,T()}catch{return k()}}var E=void 0;b?E=_():y?E=g():m?E=A():p===void 0&&typeof e=="function"?E=z():E=k();function S(ze,Ze){var tt=this,Ce=new this.constructor(F);Ce[D]===void 0&&fe(Ce);var Ae=tt._state;if(Ae){var Ne=arguments[Ae-1];h(function(){return se(Ae,Ce,Ne,tt._result)})}else Q(tt,Ce,ze,Ze);return Ce}function C(ze){var Ze=this;if(ze&&typeof ze=="object"&&ze.constructor===Ze)return ze;var tt=new Ze(F);return te(tt,ze),tt}var D=Math.random().toString(36).substring(2);function F(){}var N=void 0,G=1,U=2;function X(){return new TypeError("You cannot resolve a promise with itself")}function I(){return new TypeError("A promises callback cannot return that same promise.")}function B(ze,Ze,tt,Ce){try{ze.call(Ze,tt,Ce)}catch(Ae){return Ae}}function j(ze,Ze,tt){h(function(Ce){var Ae=!1,Ne=B(tt,Ze,function(qe){Ae||(Ae=!0,Ze!==qe?te(Ce,qe):oe(Ce,qe))},function(qe){Ae||(Ae=!0,ie(Ce,qe))},"Settle: "+(Ce._label||" unknown promise"));!Ae&&Ne&&(Ae=!0,ie(Ce,Ne))},ze)}function H(ze,Ze){Ze._state===G?oe(ze,Ze._result):Ze._state===U?ie(ze,Ze._result):Q(Ze,void 0,function(tt){return te(ze,tt)},function(tt){return ie(ze,tt)})}function K(ze,Ze,tt){Ze.constructor===ze.constructor&&tt===S&&Ze.constructor.resolve===C?H(ze,Ze):tt===void 0?oe(ze,Ze):c(tt)?j(ze,Ze,tt):oe(ze,Ze)}function te(ze,Ze){if(ze===Ze)ie(ze,X());else if(l(Ze)){var tt=void 0;try{tt=Ze.then}catch(Ce){ie(ze,Ce);return}K(ze,Ze,tt)}else oe(ze,Ze)}function J(ze){ze._onerror&&ze._onerror(ze._result),V(ze)}function oe(ze,Ze){ze._state===N&&(ze._result=Ze,ze._state=G,ze._subscribers.length!==0&&h(V,ze))}function ie(ze,Ze){ze._state===N&&(ze._state=U,ze._result=Ze,h(J,ze))}function Q(ze,Ze,tt,Ce){var Ae=ze._subscribers,Ne=Ae.length;ze._onerror=null,Ae[Ne]=Ze,Ae[Ne+G]=tt,Ae[Ne+U]=Ce,Ne===0&&ze._state&&h(V,ze)}function V(ze){var Ze=ze._subscribers,tt=ze._state;if(Ze.length!==0){for(var Ce=void 0,Ae=void 0,Ne=ze._result,qe=0;qe<Ze.length;qe+=3)Ce=Ze[qe],Ae=Ze[qe+tt],Ce?se(tt,Ce,Ae,Ne):Ae(Ne);ze._subscribers.length=0}}function se(ze,Ze,tt,Ce){var Ae=c(tt),Ne=void 0,qe=void 0,At=!0;if(Ae){try{Ne=tt(Ce)}catch(kt){At=!1,qe=kt}if(Ze===Ne){ie(Ze,I());return}}else Ne=Ce;Ze._state!==N||(Ae&&At?te(Ze,Ne):At===!1?ie(Ze,qe):ze===G?oe(Ze,Ne):ze===U&&ie(Ze,Ne))}function re(ze,Ze){try{Ze(function(Ce){te(ze,Ce)},function(Ce){ie(ze,Ce)})}catch(tt){ie(ze,tt)}}var ee=0;function ae(){return ee++}function fe(ze){ze[D]=ee++,ze._state=void 0,ze._result=void 0,ze._subscribers=[]}function de(){return new Error("Array Methods must be provided an Array")}var pe=function(){function ze(Ze,tt){this._instanceConstructor=Ze,this.promise=new Ze(F),this.promise[D]||fe(this.promise),f(tt)?(this.length=tt.length,this._remaining=tt.length,this._result=new Array(this.length),this.length===0?oe(this.promise,this._result):(this.length=this.length||0,this._enumerate(tt),this._remaining===0&&oe(this.promise,this._result))):ie(this.promise,de())}return ze.prototype._enumerate=function(tt){for(var Ce=0;this._state===N&&Ce<tt.length;Ce++)this._eachEntry(tt[Ce],Ce)},ze.prototype._eachEntry=function(tt,Ce){var Ae=this._instanceConstructor,Ne=Ae.resolve;if(Ne===C){var qe=void 0,At=void 0,kt=!1;try{qe=tt.then}catch(ft){kt=!0,At=ft}if(qe===S&&tt._state!==N)this._settledAt(tt._state,Ce,tt._result);else if(typeof qe!="function")this._remaining--,this._result[Ce]=tt;else if(Ae===Pe){var Ve=new Ae(F);kt?ie(Ve,At):K(Ve,tt,qe),this._willSettleAt(Ve,Ce)}else this._willSettleAt(new Ae(function(ft){return ft(tt)}),Ce)}else this._willSettleAt(Ne(tt),Ce)},ze.prototype._settledAt=function(tt,Ce,Ae){var Ne=this.promise;Ne._state===N&&(this._remaining--,tt===U?ie(Ne,Ae):this._result[Ce]=Ae),this._remaining===0&&oe(Ne,this._result)},ze.prototype._willSettleAt=function(tt,Ce){var Ae=this;Q(tt,void 0,function(Ne){return Ae._settledAt(G,Ce,Ne)},function(Ne){return Ae._settledAt(U,Ce,Ne)})},ze}();function W(ze){return new pe(this,ze).promise}function ue(ze){var Ze=this;return f(ze)?new Ze(function(tt,Ce){for(var Ae=ze.length,Ne=0;Ne<Ae;Ne++)Ze.resolve(ze[Ne]).then(tt,Ce)}):new Ze(function(tt,Ce){return Ce(new TypeError("You must pass an array to race."))})}function me(ze){var Ze=this,tt=new Ze(F);return ie(tt,ze),tt}function be(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ke(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Pe=function(){function ze(Ze){this[D]=ae(),this._result=this._state=void 0,this._subscribers=[],F!==Ze&&(typeof Ze!="function"&&be(),this instanceof ze?re(this,Ze):ke())}return ze.prototype.catch=function(tt){return this.then(null,tt)},ze.prototype.finally=function(tt){var Ce=this,Ae=Ce.constructor;return c(tt)?Ce.then(function(Ne){return Ae.resolve(tt()).then(function(){return Ne})},function(Ne){return Ae.resolve(tt()).then(function(){throw Ne})}):Ce.then(tt,tt)},ze}();Pe.prototype.then=S,Pe.all=W,Pe.race=ue,Pe.resolve=C,Pe.reject=me,Pe._setScheduler=i,Pe._setAsap=s,Pe._asap=h;function je(){var ze=void 0;if(typeof n<"u")ze=n;else if(typeof self<"u")ze=self;else try{ze=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Ze=ze.Promise;if(Ze){var tt=null;try{tt=Object.prototype.toString.call(Ze.resolve())}catch{}if(tt==="[object Promise]"&&!Ze.cast)return}ze.Promise=Pe}return Pe.polyfill=je,Pe.Promise=Pe,Pe})}).call(this)}).call(this,e("_process"),typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:526}],225:[function(e,v,M){v.exports=e("./is-implemented")()?e("ext/global-this").Symbol:e("./polyfill")},{"./is-implemented":226,"./polyfill":231,"ext/global-this":238}],226:[function(e,v,M){var r=e("ext/global-this"),n={object:!0,symbol:!0};v.exports=function(){var l=r.Symbol,c;if(typeof l!="function")return!1;c=l("test symbol");try{String(c)}catch{return!1}return!(!n[typeof l.iterator]||!n[typeof l.toPrimitive]||!n[typeof l.toStringTag])}},{"ext/global-this":238}],227:[function(e,v,M){v.exports=function(r){return r?typeof r=="symbol"?!0:!r.constructor||r.constructor.name!=="Symbol"?!1:r[r.constructor.toStringTag]==="Symbol":!1}},{}],228:[function(e,v,M){var r=e("d"),n=Object.create,l=Object.defineProperty,c=Object.prototype,t=n(null);v.exports=function(f){for(var a=0,o,u;t[f+(a||"")];)++a;return f+=a||"",t[f]=!0,o="@@"+f,l(c,o,r.gs(null,function(h){u||(u=!0,l(this,o,r(h)),u=!1)})),o}},{d:155}],229:[function(e,v,M){var r=e("d"),n=e("ext/global-this").Symbol;v.exports=function(l){return Object.defineProperties(l,{hasInstance:r("",n&&n.hasInstance||l("hasInstance")),isConcatSpreadable:r("",n&&n.isConcatSpreadable||l("isConcatSpreadable")),iterator:r("",n&&n.iterator||l("iterator")),match:r("",n&&n.match||l("match")),replace:r("",n&&n.replace||l("replace")),search:r("",n&&n.search||l("search")),species:r("",n&&n.species||l("species")),split:r("",n&&n.split||l("split")),toPrimitive:r("",n&&n.toPrimitive||l("toPrimitive")),toStringTag:r("",n&&n.toStringTag||l("toStringTag")),unscopables:r("",n&&n.unscopables||l("unscopables"))})}},{d:155,"ext/global-this":238}],230:[function(e,v,M){var r=e("d"),n=e("../../../validate-symbol"),l=Object.create(null);v.exports=function(c){return Object.defineProperties(c,{for:r(function(t){return l[t]?l[t]:l[t]=c(String(t))}),keyFor:r(function(t){var f;n(t);for(f in l)if(l[f]===t)return f})})}},{"../../../validate-symbol":232,d:155}],231:[function(e,v,M){var r=e("d"),n=e("./validate-symbol"),l=e("ext/global-this").Symbol,c=e("./lib/private/generate-name"),t=e("./lib/private/setup/standard-symbols"),f=e("./lib/private/setup/symbol-registry"),a=Object.create,o=Object.defineProperties,u=Object.defineProperty,h,i,s;if(typeof l=="function")try{String(l()),s=!0}catch{}else l=null;i=function(d){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return h(d)},v.exports=h=function p(d){var y;if(this instanceof p)throw new TypeError("Symbol is not a constructor");return s?l(d):(y=a(i.prototype),d=d===void 0?"":String(d),o(y,{__description__:r("",d),__name__:r("",c(d))}))},t(h),f(h),o(i.prototype,{constructor:r(h),toString:r("",function(){return this.__name__})}),o(h.prototype,{toString:r(function(){return"Symbol ("+n(this).__description__+")"}),valueOf:r(function(){return n(this)})}),u(h.prototype,h.toPrimitive,r("",function(){var p=n(this);return typeof p=="symbol"?p:p.toString()})),u(h.prototype,h.toStringTag,r("c","Symbol")),u(i.prototype,h.toStringTag,r("c",h.prototype[h.toStringTag])),u(i.prototype,h.toPrimitive,r("c",h.prototype[h.toPrimitive]))},{"./lib/private/generate-name":228,"./lib/private/setup/standard-symbols":229,"./lib/private/setup/symbol-registry":230,"./validate-symbol":232,d:155,"ext/global-this":238}],232:[function(e,v,M){var r=e("./is-symbol");v.exports=function(n){if(!r(n))throw new TypeError(n+" is not a symbol");return n}},{"./is-symbol":227}],233:[function(e,v,M){v.exports=e("./is-implemented")()?WeakMap:e("./polyfill")},{"./is-implemented":234,"./polyfill":236}],234:[function(e,v,M){v.exports=function(){var r,n;if(typeof WeakMap!="function")return!1;try{r=new WeakMap([[n={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(r)!=="[object WeakMap]"||typeof r.set!="function"||r.set({},1)!==r||typeof r.delete!="function"||typeof r.has!="function"||r.get(n)!=="one")}},{}],235:[function(e,v,M){v.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],236:[function(e,v,M){var r=e("es5-ext/object/is-value"),n=e("es5-ext/object/set-prototype-of"),l=e("es5-ext/object/valid-object"),c=e("es5-ext/object/valid-value"),t=e("es5-ext/string/random-uniq"),f=e("d"),a=e("es6-iterator/get"),o=e("es6-iterator/for-of"),u=e("es6-symbol").toStringTag,h=e("./is-native-implemented"),i=Array.isArray,s=Object.defineProperty,p=Object.prototype.hasOwnProperty,d=Object.getPrototypeOf,y;v.exports=y=function(){var b=arguments[0],m;if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");return m=h&&n&&WeakMap!==y?n(new WeakMap,d(this)):this,r(b)&&(i(b)||(b=a(b))),s(m,"__weakMapData__",f("c","$weakMap$"+t())),b&&o(b,function(_){c(_),m.set(_[0],_[1])}),m},h&&(n&&n(y,WeakMap),y.prototype=Object.create(WeakMap.prototype,{constructor:f(y)})),Object.defineProperties(y.prototype,{delete:f(function(b){return p.call(l(b),this.__weakMapData__)?(delete b[this.__weakMapData__],!0):!1}),get:f(function(b){if(p.call(l(b),this.__weakMapData__))return b[this.__weakMapData__]}),has:f(function(b){return p.call(l(b),this.__weakMapData__)}),set:f(function(b,m){return s(l(b),this.__weakMapData__,f("c",m)),this}),toString:f(function(){return"[object WeakMap]"})}),s(y.prototype,u,f("c","WeakMap"))},{"./is-native-implemented":235,d:155,"es5-ext/object/is-value":200,"es5-ext/object/set-prototype-of":206,"es5-ext/object/valid-object":210,"es5-ext/object/valid-value":211,"es5-ext/string/random-uniq":216,"es6-iterator/for-of":218,"es6-iterator/get":219,"es6-symbol":225}],237:[function(e,v,M){var r=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};v.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},{}],238:[function(e,v,M){v.exports=e("./is-implemented")()?globalThis:e("./implementation")},{"./implementation":237,"./is-implemented":239}],239:[function(e,v,M){v.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],240:[function(e,v,M){v.exports=r;function r(n,l,c){var t=l||0,f=c||1;return[[n[12]+n[0],n[13]+n[1],n[14]+n[2],n[15]+n[3]],[n[12]-n[0],n[13]-n[1],n[14]-n[2],n[15]-n[3]],[n[12]+n[4],n[13]+n[5],n[14]+n[6],n[15]+n[7]],[n[12]-n[4],n[13]-n[5],n[14]-n[6],n[15]-n[7]],[t*n[12]+n[8],t*n[13]+n[9],t*n[14]+n[10],t*n[15]+n[11]],[f*n[12]-n[8],f*n[13]-n[9],f*n[14]-n[10],f*n[15]-n[11]]]}},{}],241:[function(e,v,M){var r=e("is-string-blank");v.exports=function(n){var l=typeof n;if(l==="string"){var c=n;if(n=+n,n===0&&r(c))return!1}else if(l!=="number")return!1;return n-n<1}},{"is-string-blank":470}],242:[function(e,v,M){v.exports=a;var r=e("cubic-hermite"),n=e("binary-search-bounds");function l(o,u,h){return Math.min(u,Math.max(o,h))}function c(o,u,h){this.dimension=o.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var i=0;i<this.dimension;++i)this.bounds[0][i]=-1/0,this.bounds[1][i]=1/0;this._state=o.slice().reverse(),this._velocity=u.slice().reverse(),this._time=[h],this._scratch=[o.slice(),o.slice(),o.slice(),o.slice(),o.slice()]}var t=c.prototype;t.flush=function(o){var u=n.gt(this._time,o)-1;u<=0||(this._time.splice(0,u),this._state.splice(0,u*this.dimension),this._velocity.splice(0,u*this.dimension))},t.curve=function(o){var u=this._time,h=u.length,i=n.le(u,o),s=this._scratch[0],p=this._state,d=this._velocity,y=this.dimension,b=this.bounds;if(i<0)for(var m=y-1,_=0;_<y;++_,--m)s[_]=p[m];else if(i>=h-1)for(var m=p.length-1,T=o-u[h-1],_=0;_<y;++_,--m)s[_]=p[m]+T*d[m];else{for(var m=y*(i+1)-1,g=u[i],A=u[i+1],k=A-g||1,R=this._scratch[1],L=this._scratch[2],z=this._scratch[3],E=this._scratch[4],S=!0,_=0;_<y;++_,--m)R[_]=p[m],z[_]=d[m]*k,L[_]=p[m+y],E[_]=d[m+y]*k,S=S&&R[_]===L[_]&&z[_]===E[_]&&z[_]===0;if(S)for(var _=0;_<y;++_)s[_]=R[_];else r(R,z,L,E,(o-g)/k,s)}for(var C=b[0],D=b[1],_=0;_<y;++_)s[_]=l(C[_],D[_],s[_]);return s},t.dcurve=function(o){var u=this._time,h=u.length,i=n.le(u,o),s=this._scratch[0],p=this._state,d=this._velocity,y=this.dimension;if(i>=h-1){var b=p.length-1;o-u[h-1];for(var m=0;m<y;++m,--b)s[m]=d[b]}else{for(var b=y*(i+1)-1,_=u[i],T=u[i+1],g=T-_||1,A=this._scratch[1],k=this._scratch[2],R=this._scratch[3],L=this._scratch[4],z=!0,m=0;m<y;++m,--b)A[m]=p[b],R[m]=d[b]*g,k[m]=p[b+y],L[m]=d[b+y]*g,z=z&&A[m]===k[m]&&R[m]===L[m]&&R[m]===0;if(z)for(var m=0;m<y;++m)s[m]=0;else{r.derivative(A,R,k,L,(o-_)/g,s);for(var m=0;m<y;++m)s[m]/=g}}return s},t.lastT=function(){var o=this._time;return o[o.length-1]},t.stable=function(){for(var o=this._velocity,u=o.length,h=this.dimension-1;h>=0;--h)if(o[--u])return!1;return!0},t.jump=function(o){var u=this.lastT(),h=this.dimension;if(!(o<u||arguments.length!==h+1)){var i=this._state,s=this._velocity,p=i.length-this.dimension,d=this.bounds,y=d[0],b=d[1];this._time.push(u,o);for(var m=0;m<2;++m)for(var _=0;_<h;++_)i.push(i[p++]),s.push(0);this._time.push(o);for(var _=h;_>0;--_)i.push(l(y[_-1],b[_-1],arguments[_])),s.push(0)}},t.push=function(o){var u=this.lastT(),h=this.dimension;if(!(o<u||arguments.length!==h+1)){var i=this._state,s=this._velocity,p=i.length-this.dimension,d=o-u,y=this.bounds,b=y[0],m=y[1],_=d>1e-6?1/d:0;this._time.push(o);for(var T=h;T>0;--T){var g=l(b[T-1],m[T-1],arguments[T]);i.push(g),s.push((g-i[p++])*_)}}},t.set=function(o){var u=this.dimension;if(!(o<this.lastT()||arguments.length!==u+1)){var h=this._state,i=this._velocity,s=this.bounds,p=s[0],d=s[1];this._time.push(o);for(var y=u;y>0;--y)h.push(l(p[y-1],d[y-1],arguments[y])),i.push(0)}},t.move=function(o){var u=this.lastT(),h=this.dimension;if(!(o<=u||arguments.length!==h+1)){var i=this._state,s=this._velocity,p=i.length-this.dimension,d=this.bounds,y=d[0],b=d[1],m=o-u,_=m>1e-6?1/m:0;this._time.push(o);for(var T=h;T>0;--T){var g=arguments[T];i.push(l(y[T-1],b[T-1],i[p++]+g)),s.push(g*_)}}},t.idle=function(o){var u=this.lastT();if(!(o<u)){var h=this.dimension,i=this._state,s=this._velocity,p=i.length-h,d=this.bounds,y=d[0],b=d[1],m=o-u;this._time.push(o);for(var _=h-1;_>=0;--_)i.push(l(y[_],b[_],i[p]+m*s[p])),s.push(0),p+=1}};function f(o){for(var u=new Array(o),h=0;h<o;++h)u[h]=0;return u}function a(o,u,h){switch(arguments.length){case 0:return new c([0],[0],0);case 1:if(typeof o=="number"){var i=f(o);return new c(i,i,0)}else return new c(o,f(o.length),0);case 2:if(typeof u=="number"){var i=f(o.length);return new c(o,i,+u)}else h=0;case 3:if(o.length!==u.length)throw new Error("state and velocity lengths must match");return new c(o,u,h)}}},{"binary-search-bounds":243,"cubic-hermite":150}],243:[function(e,v,M){function r(l,c,t,f,a,o){var u=["function ",l,"(a,l,h,",f.join(","),"){",o?"":"var i=",t?"l-1":"h+1",";while(l<=h){	var m=(l+h)>>>1,x=a",a?".get(m)":"[m]"];return o?c.indexOf("c")<0?u.push(";if(x===y){return m}else if(x<=y){"):u.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):u.push(";if(",c,"){i=m;"),t?u.push("l=m+1}else{h=m-1}"):u.push("h=m-1}else{l=m+1}"),u.push("}"),o?u.push("return -1};"):u.push("return i};"),u.join("")}function n(l,c,t,f){var a=new Function([r("A","x"+l+"y",c,["y"],!1,f),r("B","x"+l+"y",c,["y"],!0,f),r("P","c(x,y)"+l+"0",c,["y","c"],!1,f),r("Q","c(x,y)"+l+"0",c,["y","c"],!0,f),"function dispatchBsearch",t,"(a,y,c,l,h){	if(a.shape){	if(typeof(c)==='function'){	return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)	}else{	return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)	}}else{	if(typeof(c)==='function'){	return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)	}else{	return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)	}}}	return dispatchBsearch",t].join(""));return a()}v.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],244:[function(e,v,M){var r=e("dtype");v.exports=n;function n(l,c,t){if(!l)throw new TypeError("must specify data as first parameter");if(t=+(t||0)|0,Array.isArray(l)&&l[0]&&typeof l[0][0]=="number"){var f=l[0].length,a=l.length*f,o,u,h,i;(!c||typeof c=="string")&&(c=new(r(c||"float32"))(a+t));var s=c.length-t;if(a!==s)throw new Error("source length "+a+" ("+f+"x"+l.length+") does not match destination length "+s);for(o=0,h=t;o<l.length;o++)for(u=0;u<f;u++)c[h++]=l[o][u]===null?NaN:l[o][u]}else if(!c||typeof c=="string"){var p=r(c||"float32");if(Array.isArray(l)||c==="array")for(c=new p(l.length+t),o=0,h=t,i=c.length;h<i;h++,o++)c[h]=l[o]===null?NaN:l[o];else t===0?c=new p(l):(c=new p(l.length+t),c.set(l,t))}else c.set(l,t);return c}},{dtype:175}],245:[function(e,v,M){var r=e("css-font/stringify"),n=[32,126];v.exports=l;function l(c){c=c||{};var t=c.shape?c.shape:c.canvas?[c.canvas.width,c.canvas.height]:[512,512],f=c.canvas||document.createElement("canvas"),a=c.font,o=typeof c.step=="number"?[c.step,c.step]:c.step||[32,32],u=c.chars||n;if(a&&typeof a!="string"&&(a=r(a)),!Array.isArray(u))u=String(u).split("");else if(u.length===2&&typeof u[0]=="number"&&typeof u[1]=="number"){for(var h=[],i=u[0],s=0;i<=u[1];i++)h[s++]=String.fromCharCode(i);u=h}t=t.slice(),f.width=t[0],f.height=t[1];var p=f.getContext("2d");p.fillStyle="#000",p.fillRect(0,0,f.width,f.height),p.font=a,p.textAlign="center",p.textBaseline="middle",p.fillStyle="#fff";for(var d=o[0]/2,y=o[1]/2,i=0;i<u.length;i++)p.fillText(u[i],d,y),(d+=o[0])>t[0]-o[0]/2&&(d=o[0]/2,y+=o[1]);return f}},{"css-font/stringify":147}],246:[function(e,v,M){v.exports=r,r.canvas=document.createElement("canvas"),r.cache={};function r(i,f){f||(f={}),(typeof i=="string"||Array.isArray(i))&&(f.family=i);var a=Array.isArray(f.family)?f.family.join(", "):f.family;if(!a)throw Error("`family` must be defined");var o=f.size||f.fontSize||f.em||48,u=f.weight||f.fontWeight||"",h=f.style||f.fontStyle||"",i=[h,u,o].join(" ")+"px "+a,s=f.origin||"top";if(r.cache[a]&&o<=r.cache[a].em)return n(r.cache[a],s);var p=f.canvas||r.canvas,d=p.getContext("2d"),y={upper:f.upper!==void 0?f.upper:"H",lower:f.lower!==void 0?f.lower:"x",descent:f.descent!==void 0?f.descent:"p",ascent:f.ascent!==void 0?f.ascent:"h",tittle:f.tittle!==void 0?f.tittle:"i",overshoot:f.overshoot!==void 0?f.overshoot:"O"},b=Math.ceil(o*1.5);p.height=b,p.width=b*.5,d.font=i;var m="H",_={top:0};d.clearRect(0,0,b,b),d.textBaseline="top",d.fillStyle="black",d.fillText(m,0,0);var T=l(d.getImageData(0,0,b,b));d.clearRect(0,0,b,b),d.textBaseline="bottom",d.fillText(m,0,b);var g=l(d.getImageData(0,0,b,b));_.lineHeight=_.bottom=b-g+T,d.clearRect(0,0,b,b),d.textBaseline="alphabetic",d.fillText(m,0,b);var A=l(d.getImageData(0,0,b,b)),k=b-A-1+T;_.baseline=_.alphabetic=k,d.clearRect(0,0,b,b),d.textBaseline="middle",d.fillText(m,0,b*.5);var R=l(d.getImageData(0,0,b,b));_.median=_.middle=b-R-1+T-b*.5,d.clearRect(0,0,b,b),d.textBaseline="hanging",d.fillText(m,0,b*.5);var L=l(d.getImageData(0,0,b,b));_.hanging=b-L-1+T-b*.5,d.clearRect(0,0,b,b),d.textBaseline="ideographic",d.fillText(m,0,b);var z=l(d.getImageData(0,0,b,b));if(_.ideographic=b-z-1+T,y.upper&&(d.clearRect(0,0,b,b),d.textBaseline="top",d.fillText(y.upper,0,0),_.upper=l(d.getImageData(0,0,b,b)),_.capHeight=_.baseline-_.upper),y.lower&&(d.clearRect(0,0,b,b),d.textBaseline="top",d.fillText(y.lower,0,0),_.lower=l(d.getImageData(0,0,b,b)),_.xHeight=_.baseline-_.lower),y.tittle&&(d.clearRect(0,0,b,b),d.textBaseline="top",d.fillText(y.tittle,0,0),_.tittle=l(d.getImageData(0,0,b,b))),y.ascent&&(d.clearRect(0,0,b,b),d.textBaseline="top",d.fillText(y.ascent,0,0),_.ascent=l(d.getImageData(0,0,b,b))),y.descent&&(d.clearRect(0,0,b,b),d.textBaseline="top",d.fillText(y.descent,0,0),_.descent=c(d.getImageData(0,0,b,b))),y.overshoot){d.clearRect(0,0,b,b),d.textBaseline="top",d.fillText(y.overshoot,0,0);var E=c(d.getImageData(0,0,b,b));_.overshoot=E-k}for(var S in _)_[S]/=o;return _.em=o,r.cache[a]=_,n(_,s)}function n(t,f){var a={};typeof f=="string"&&(f=t[f]);for(var o in t)o!=="em"&&(a[o]=t[o]-f);return a}function l(t){for(var f=t.height,a=t.data,o=3;o<a.length;o+=4)if(a[o]!==0)return Math.floor((o-3)*.25/f)}function c(t){for(var f=t.height,a=t.data,o=a.length-1;o>0;o-=4)if(a[o]!==0)return Math.floor((o-3)*.25/f)}},{}],247:[function(e,v,M){v.exports=m;var r=0,n=1;function l(_,T,g,A,k,R){this._color=_,this.key=T,this.value=g,this.left=A,this.right=k,this._count=R}function c(_){return new l(_._color,_.key,_.value,_.left,_.right,_._count)}function t(_,T){return new l(_,T.key,T.value,T.left,T.right,T._count)}function f(_){_._count=1+(_.left?_.left._count:0)+(_.right?_.right._count:0)}function a(_,T){this._compare=_,this.root=T}var o=a.prototype;Object.defineProperty(o,"keys",{get:function(){var _=[];return this.forEach(function(T,g){_.push(T)}),_}}),Object.defineProperty(o,"values",{get:function(){var _=[];return this.forEach(function(T,g){_.push(g)}),_}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(_,T){for(var g=this._compare,A=this.root,k=[],R=[];A;){var L=g(_,A.key);k.push(A),R.push(L),L<=0?A=A.left:A=A.right}k.push(new l(r,_,T,null,null,1));for(var z=k.length-2;z>=0;--z){var A=k[z];R[z]<=0?k[z]=new l(A._color,A.key,A.value,k[z+1],A.right,A._count+1):k[z]=new l(A._color,A.key,A.value,A.left,k[z+1],A._count+1)}for(var z=k.length-1;z>1;--z){var E=k[z-1],A=k[z];if(E._color===n||A._color===n)break;var S=k[z-2];if(S.left===E)if(E.left===A){var C=S.right;if(C&&C._color===r)E._color=n,S.right=t(n,C),S._color=r,z-=1;else{if(S._color=r,S.left=E.right,E._color=n,E.right=S,k[z-2]=E,k[z-1]=A,f(S),f(E),z>=3){var D=k[z-3];D.left===S?D.left=E:D.right=E}break}}else{var C=S.right;if(C&&C._color===r)E._color=n,S.right=t(n,C),S._color=r,z-=1;else{if(E.right=A.left,S._color=r,S.left=A.right,A._color=n,A.left=E,A.right=S,k[z-2]=A,k[z-1]=E,f(S),f(E),f(A),z>=3){var D=k[z-3];D.left===S?D.left=A:D.right=A}break}}else if(E.right===A){var C=S.left;if(C&&C._color===r)E._color=n,S.left=t(n,C),S._color=r,z-=1;else{if(S._color=r,S.right=E.left,E._color=n,E.left=S,k[z-2]=E,k[z-1]=A,f(S),f(E),z>=3){var D=k[z-3];D.right===S?D.right=E:D.left=E}break}}else{var C=S.left;if(C&&C._color===r)E._color=n,S.left=t(n,C),S._color=r,z-=1;else{if(E.left=A.right,S._color=r,S.right=A.left,A._color=n,A.right=E,A.left=S,k[z-2]=A,k[z-1]=E,f(S),f(E),f(A),z>=3){var D=k[z-3];D.right===S?D.right=A:D.left=A}break}}}return k[0]._color=n,new a(g,k[0])};function u(_,T){if(T.left){var g=u(_,T.left);if(g)return g}var g=_(T.key,T.value);if(g)return g;if(T.right)return u(_,T.right)}function h(_,T,g,A){var k=T(_,A.key);if(k<=0){if(A.left){var R=h(_,T,g,A.left);if(R)return R}var R=g(A.key,A.value);if(R)return R}if(A.right)return h(_,T,g,A.right)}function i(_,T,g,A,k){var R=g(_,k.key),L=g(T,k.key),z;if(R<=0&&(k.left&&(z=i(_,T,g,A,k.left),z)||L>0&&(z=A(k.key,k.value),z)))return z;if(L>0&&k.right)return i(_,T,g,A,k.right)}o.forEach=function(T,g,A){if(this.root)switch(arguments.length){case 1:return u(T,this.root);case 2:return h(g,this._compare,T,this.root);case 3:return this._compare(g,A)>=0?void 0:i(g,A,this._compare,T,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var _=[],T=this.root;T;)_.push(T),T=T.left;return new s(this,_)}}),Object.defineProperty(o,"end",{get:function(){for(var _=[],T=this.root;T;)_.push(T),T=T.right;return new s(this,_)}}),o.at=function(_){if(_<0)return new s(this,[]);for(var T=this.root,g=[];;){if(g.push(T),T.left){if(_<T.left._count){T=T.left;continue}_-=T.left._count}if(!_)return new s(this,g);if(_-=1,T.right){if(_>=T.right._count)break;T=T.right}else break}return new s(this,[])},o.ge=function(_){for(var T=this._compare,g=this.root,A=[],k=0;g;){var R=T(_,g.key);A.push(g),R<=0&&(k=A.length),R<=0?g=g.left:g=g.right}return A.length=k,new s(this,A)},o.gt=function(_){for(var T=this._compare,g=this.root,A=[],k=0;g;){var R=T(_,g.key);A.push(g),R<0&&(k=A.length),R<0?g=g.left:g=g.right}return A.length=k,new s(this,A)},o.lt=function(_){for(var T=this._compare,g=this.root,A=[],k=0;g;){var R=T(_,g.key);A.push(g),R>0&&(k=A.length),R<=0?g=g.left:g=g.right}return A.length=k,new s(this,A)},o.le=function(_){for(var T=this._compare,g=this.root,A=[],k=0;g;){var R=T(_,g.key);A.push(g),R>=0&&(k=A.length),R<0?g=g.left:g=g.right}return A.length=k,new s(this,A)},o.find=function(_){for(var T=this._compare,g=this.root,A=[];g;){var k=T(_,g.key);if(A.push(g),k===0)return new s(this,A);k<=0?g=g.left:g=g.right}return new s(this,[])},o.remove=function(_){var T=this.find(_);return T?T.remove():this},o.get=function(_){for(var T=this._compare,g=this.root;g;){var A=T(_,g.key);if(A===0)return g.value;A<=0?g=g.left:g=g.right}};function s(_,T){this.tree=_,this._stack=T}var p=s.prototype;Object.defineProperty(p,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(p,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),p.clone=function(){return new s(this.tree,this._stack.slice())};function d(_,T){_.key=T.key,_.value=T.value,_.left=T.left,_.right=T.right,_._color=T._color,_._count=T._count}function y(_){for(var T,g,A,k,R=_.length-1;R>=0;--R){if(T=_[R],R===0){T._color=n;return}if(g=_[R-1],g.left===T){if(A=g.right,A.right&&A.right._color===r){if(A=g.right=c(A),k=A.right=c(A.right),g.right=A.left,A.left=g,A.right=k,A._color=g._color,T._color=n,g._color=n,k._color=n,f(g),f(A),R>1){var L=_[R-2];L.left===g?L.left=A:L.right=A}_[R-1]=A;return}else if(A.left&&A.left._color===r){if(A=g.right=c(A),k=A.left=c(A.left),g.right=k.left,A.left=k.right,k.left=g,k.right=A,k._color=g._color,g._color=n,A._color=n,T._color=n,f(g),f(A),f(k),R>1){var L=_[R-2];L.left===g?L.left=k:L.right=k}_[R-1]=k;return}if(A._color===n)if(g._color===r){g._color=n,g.right=t(r,A);return}else{g.right=t(r,A);continue}else{if(A=c(A),g.right=A.left,A.left=g,A._color=g._color,g._color=r,f(g),f(A),R>1){var L=_[R-2];L.left===g?L.left=A:L.right=A}_[R-1]=A,_[R]=g,R+1<_.length?_[R+1]=T:_.push(T),R=R+2}}else{if(A=g.left,A.left&&A.left._color===r){if(A=g.left=c(A),k=A.left=c(A.left),g.left=A.right,A.right=g,A.left=k,A._color=g._color,T._color=n,g._color=n,k._color=n,f(g),f(A),R>1){var L=_[R-2];L.right===g?L.right=A:L.left=A}_[R-1]=A;return}else if(A.right&&A.right._color===r){if(A=g.left=c(A),k=A.right=c(A.right),g.left=k.right,A.right=k.left,k.right=g,k.left=A,k._color=g._color,g._color=n,A._color=n,T._color=n,f(g),f(A),f(k),R>1){var L=_[R-2];L.right===g?L.right=k:L.left=k}_[R-1]=k;return}if(A._color===n)if(g._color===r){g._color=n,g.left=t(r,A);return}else{g.left=t(r,A);continue}else{if(A=c(A),g.left=A.right,A.right=g,A._color=g._color,g._color=r,f(g),f(A),R>1){var L=_[R-2];L.right===g?L.right=A:L.left=A}_[R-1]=A,_[R]=g,R+1<_.length?_[R+1]=T:_.push(T),R=R+2}}}}p.remove=function(){var _=this._stack;if(_.length===0)return this.tree;var T=new Array(_.length),g=_[_.length-1];T[T.length-1]=new l(g._color,g.key,g.value,g.left,g.right,g._count);for(var A=_.length-2;A>=0;--A){var g=_[A];g.left===_[A+1]?T[A]=new l(g._color,g.key,g.value,T[A+1],g.right,g._count):T[A]=new l(g._color,g.key,g.value,g.left,T[A+1],g._count)}if(g=T[T.length-1],g.left&&g.right){var k=T.length;for(g=g.left;g.right;)T.push(g),g=g.right;var R=T[k-1];T.push(new l(g._color,R.key,R.value,g.left,g.right,g._count)),T[k-1].key=g.key,T[k-1].value=g.value;for(var A=T.length-2;A>=k;--A)g=T[A],T[A]=new l(g._color,g.key,g.value,g.left,T[A+1],g._count);T[k-1].left=T[k]}if(g=T[T.length-1],g._color===r){var L=T[T.length-2];L.left===g?L.left=null:L.right===g&&(L.right=null),T.pop();for(var A=0;A<T.length;++A)T[A]._count--;return new a(this.tree._compare,T[0])}else if(g.left||g.right){g.left?d(g,g.left):g.right&&d(g,g.right),g._color=n;for(var A=0;A<T.length-1;++A)T[A]._count--;return new a(this.tree._compare,T[0])}else{if(T.length===1)return new a(this.tree._compare,null);for(var A=0;A<T.length;++A)T[A]._count--;var z=T[T.length-2];y(T),z.left===g?z.left=null:z.right=null}return new a(this.tree._compare,T[0])},Object.defineProperty(p,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(p,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(p,"index",{get:function(){var _=0,T=this._stack;if(T.length===0){var g=this.tree.root;return g?g._count:0}else T[T.length-1].left&&(_=T[T.length-1].left._count);for(var A=T.length-2;A>=0;--A)T[A+1]===T[A].right&&(++_,T[A].left&&(_+=T[A].left._count));return _},enumerable:!0}),p.next=function(){var _=this._stack;if(_.length!==0){var T=_[_.length-1];if(T.right)for(T=T.right;T;)_.push(T),T=T.left;else for(_.pop();_.length>0&&_[_.length-1].right===T;)T=_[_.length-1],_.pop()}},Object.defineProperty(p,"hasNext",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].right)return!0;for(var T=_.length-1;T>0;--T)if(_[T-1].left===_[T])return!0;return!1}}),p.update=function(_){var T=this._stack;if(T.length===0)throw new Error("Can't update empty node!");var g=new Array(T.length),A=T[T.length-1];g[g.length-1]=new l(A._color,A.key,_,A.left,A.right,A._count);for(var k=T.length-2;k>=0;--k)A=T[k],A.left===T[k+1]?g[k]=new l(A._color,A.key,A.value,g[k+1],A.right,A._count):g[k]=new l(A._color,A.key,A.value,A.left,g[k+1],A._count);return new a(this.tree._compare,g[0])},p.prev=function(){var _=this._stack;if(_.length!==0){var T=_[_.length-1];if(T.left)for(T=T.left;T;)_.push(T),T=T.right;else for(_.pop();_.length>0&&_[_.length-1].left===T;)T=_[_.length-1],_.pop()}},Object.defineProperty(p,"hasPrev",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].left)return!0;for(var T=_.length-1;T>0;--T)if(_[T-1].right===_[T])return!0;return!1}});function b(_,T){return _<T?-1:_>T?1:0}function m(_){return new a(_||b,null)}},{}],248:[function(e,v,M){var r=7,n=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23],l=607/128,c=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function t(f){if(f<0)return+"0/0";for(var a=c[0],o=c.length-1;o>0;--o)a+=c[o]/(f+o);var u=f+l+.5;return .5*Math.log(2*Math.PI)+(f+.5)*Math.log(u)-u+Math.log(a)-Math.log(f)}v.exports=function f(a){if(a<.5)return Math.PI/(Math.sin(Math.PI*a)*f(1-a));if(a>100)return Math.exp(t(a));a-=1;for(var o=n[0],u=1;u<r+2;u++)o+=n[u]/(a+u);var h=a+r+.5;return Math.sqrt(2*Math.PI)*Math.pow(h,a+.5)*Math.exp(-h)*o},v.exports.log=t},{}],249:[function(e,v,M){v.exports=r;function r(n,l){if(typeof n!="string")throw new TypeError("must specify type string");if(l=l||{},typeof document>"u"&&!l.canvas)return null;var c=l.canvas||document.createElement("canvas");typeof l.width=="number"&&(c.width=l.width),typeof l.height=="number"&&(c.height=l.height);var t=l,f;try{var a=[n];n.indexOf("webgl")===0&&a.push("experimental-"+n);for(var o=0;o<a.length;o++)if(f=c.getContext(a[o],t),f)return f}catch{f=null}return f||null}},{}],250:[function(e,v,M){v.exports=T;var r=e("./lib/text.js"),n=e("./lib/lines.js"),l=e("./lib/background.js"),c=e("./lib/cube.js"),t=e("./lib/ticks.js"),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function a(g,A){return g[0]=A[0],g[1]=A[1],g[2]=A[2],g}function o(g){this.gl=g,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=l(g)}var u=o.prototype;u.update=function(g){g=g||{};function A(U,X,I){if(I in g){var B=g[I],j=this[I],H;(U?Array.isArray(B)&&Array.isArray(B[0]):Array.isArray(B))?this[I]=H=[X(B[0]),X(B[1]),X(B[2])]:this[I]=H=[X(B),X(B),X(B)];for(var K=0;K<3;++K)if(H[K]!==j[K])return!0}return!1}var k=A.bind(this,!1,Number),R=A.bind(this,!1,Boolean),L=A.bind(this,!1,String),z=A.bind(this,!0,function(U){if(Array.isArray(U)){if(U.length===3)return[+U[0],+U[1],+U[2],1];if(U.length===4)return[+U[0],+U[1],+U[2],+U[3]]}return[0,0,0,1]}),E,S=!1,C=!1;if("bounds"in g)for(var D=g.bounds,F=0;F<2;++F)for(var N=0;N<3;++N)D[F][N]!==this.bounds[F][N]&&(C=!0),this.bounds[F][N]=D[F][N];if("ticks"in g){E=g.ticks,S=!0,this.autoTicks=!1;for(var F=0;F<3;++F)this.tickSpacing[F]=0}else k("tickSpacing")&&(this.autoTicks=!0,C=!0);if(this._firstInit&&("ticks"in g||"tickSpacing"in g||(this.autoTicks=!0),C=!0,S=!0,this._firstInit=!1),C&&this.autoTicks&&(E=t.create(this.bounds,this.tickSpacing),S=!0),S){for(var F=0;F<3;++F)E[F].sort(function(X,I){return X.x-I.x});t.equal(E,this.ticks)?S=!1:this.ticks=E}R("tickEnable"),L("tickFont")&&(S=!0),k("tickSize"),k("tickAngle"),k("tickPad"),z("tickColor");var G=L("labels");L("labelFont")&&(G=!0),R("labelEnable"),k("labelSize"),k("labelPad"),z("labelColor"),R("lineEnable"),R("lineMirror"),k("lineWidth"),z("lineColor"),R("lineTickEnable"),R("lineTickMirror"),k("lineTickLength"),k("lineTickWidth"),z("lineTickColor"),R("gridEnable"),k("gridWidth"),z("gridColor"),R("zeroEnable"),z("zeroLineColor"),k("zeroLineWidth"),R("backgroundEnable"),z("backgroundColor"),this._text?this._text&&(G||S)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=r(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&S&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=n(this.gl,this.bounds,this.ticks))};function h(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var i=[new h,new h,new h];function s(g,A,k,R,L){for(var z=g.primalOffset,E=g.primalMinor,S=g.mirrorOffset,C=g.mirrorMinor,D=R[A],F=0;F<3;++F)if(A!==F){var N=z,G=S,U=E,X=C;D&1<<F&&(N=S,G=z,U=C,X=E),N[F]=k[0][F],G[F]=k[1][F],L[F]>0?(U[F]=-1,X[F]=0):(U[F]=0,X[F]=1)}}var p=[0,0,0],d={model:f,view:f,projection:f,_ortho:!1};u.isOpaque=function(){return!0},u.isTransparent=function(){return!1},u.drawTransparent=function(g){};var y=0,b=[0,0,0],m=[0,0,0],_=[0,0,0];u.draw=function(g){g=g||d;for(var j=this.gl,A=g.model||f,k=g.view||f,R=g.projection||f,L=this.bounds,z=g._ortho||!1,E=c(A,k,R,L,z),S=E.cubeEdges,C=E.axis,D=k[12],F=k[13],N=k[14],G=k[15],U=z?2:1,X=U*this.pixelRatio*(R[3]*D+R[7]*F+R[11]*N+R[15]*G)/j.drawingBufferHeight,I=0;I<3;++I)this.lastCubeProps.cubeEdges[I]=S[I],this.lastCubeProps.axis[I]=C[I];for(var B=i,I=0;I<3;++I)s(i[I],I,this.bounds,S,C);for(var j=this.gl,H=p,I=0;I<3;++I)this.backgroundEnable[I]?H[I]=C[I]:H[I]=0;this._background.draw(A,k,R,L,H,this.backgroundColor),this._lines.bind(A,k,R,this);for(var I=0;I<3;++I){var K=[0,0,0];C[I]>0?K[I]=L[1][I]:K[I]=L[0][I];for(var te=0;te<2;++te){var J=(I+1+te)%3,oe=(I+1+(te^1))%3;this.gridEnable[J]&&this._lines.drawGrid(J,oe,this.bounds,K,this.gridColor[J],this.gridWidth[J]*this.pixelRatio)}for(var te=0;te<2;++te){var J=(I+1+te)%3,oe=(I+1+(te^1))%3;this.zeroEnable[oe]&&Math.min(L[0][oe],L[1][oe])<=0&&Math.max(L[0][oe],L[1][oe])>=0&&this._lines.drawZero(J,oe,this.bounds,K,this.zeroLineColor[oe],this.zeroLineWidth[oe]*this.pixelRatio)}}for(var I=0;I<3;++I){this.lineEnable[I]&&this._lines.drawAxisLine(I,this.bounds,B[I].primalOffset,this.lineColor[I],this.lineWidth[I]*this.pixelRatio),this.lineMirror[I]&&this._lines.drawAxisLine(I,this.bounds,B[I].mirrorOffset,this.lineColor[I],this.lineWidth[I]*this.pixelRatio);for(var ie=a(b,B[I].primalMinor),Q=a(m,B[I].mirrorMinor),V=this.lineTickLength,te=0;te<3;++te){var se=X/A[5*te];ie[te]*=V[te]*se,Q[te]*=V[te]*se}this.lineTickEnable[I]&&this._lines.drawAxisTicks(I,B[I].primalOffset,ie,this.lineTickColor[I],this.lineTickWidth[I]*this.pixelRatio),this.lineTickMirror[I]&&this._lines.drawAxisTicks(I,B[I].mirrorOffset,Q,this.lineTickColor[I],this.lineTickWidth[I]*this.pixelRatio)}this._lines.unbind(),this._text.bind(A,k,R,this.pixelRatio);var re,ee=.5,ae,fe;function de(ke){fe=[0,0,0],fe[ke]=1}function pe(ke,Pe,je){var ze=(ke+1)%3,Ze=(ke+2)%3,tt=Pe[ze],Ce=Pe[Ze],Ae=je[ze],Ne=je[Ze];if(tt>0&&Ne>0){de(ze);return}else if(tt>0&&Ne<0){de(ze);return}else if(tt<0&&Ne>0){de(ze);return}else if(tt<0&&Ne<0){de(ze);return}else if(Ce>0&&Ae>0){de(Ze);return}else if(Ce>0&&Ae<0){de(Ze);return}else if(Ce<0&&Ae>0){de(Ze);return}else if(Ce<0&&Ae<0){de(Ze);return}}for(var I=0;I<3;++I){for(var W=B[I].primalMinor,ue=B[I].mirrorMinor,me=a(_,B[I].primalOffset),te=0;te<3;++te)this.lineTickEnable[I]&&(me[te]+=X*W[te]*Math.max(this.lineTickLength[te],0)/A[5*te]);var be=[0,0,0];if(be[I]=1,this.tickEnable[I]){this.tickAngle[I]===-3600?(this.tickAngle[I]=0,this.tickAlign[I]="auto"):this.tickAlign[I]=-1,ae=1,re=[this.tickAlign[I],ee,ae],re[0]==="auto"?re[0]=y:re[0]=parseInt(""+re[0]),fe=[0,0,0],pe(I,W,ue);for(var te=0;te<3;++te)me[te]+=X*W[te]*this.tickPad[te]/A[5*te];this._text.drawTicks(I,this.tickSize[I],this.tickAngle[I],me,this.tickColor[I],be,fe,re)}if(this.labelEnable[I]){ae=0,fe=[0,0,0],this.labels[I].length>4&&(de(I),ae=1),re=[this.labelAlign[I],ee,ae],re[0]==="auto"?re[0]=y:re[0]=parseInt(""+re[0]);for(var te=0;te<3;++te)me[te]+=X*W[te]*this.labelPad[te]/A[5*te];me[I]+=.5*(L[0][I]+L[1][I]),this._text.drawLabel(I,this.labelSize[I],this.labelAngle[I],me,this.labelColor[I],[0,0,0],fe,re)}}this._text.unbind()},u.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function T(g,A){var k=new o(g);return k.update(A),k}},{"./lib/background.js":251,"./lib/cube.js":252,"./lib/lines.js":253,"./lib/text.js":255,"./lib/ticks.js":256}],251:[function(e,v,M){v.exports=f;var r=e("gl-buffer"),n=e("gl-vao"),l=e("./shaders").bg;function c(a,o,u,h){this.gl=a,this.buffer=o,this.vao=u,this.shader=h}var t=c.prototype;t.draw=function(a,o,u,h,i,s){for(var p=!1,d=0;d<3;++d)p=p||i[d];if(p){var y=this.gl;y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:a,view:o,projection:u,bounds:h,enable:i,colors:s},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),y.disable(y.POLYGON_OFFSET_FILL)}},t.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function f(a){for(var o=[],u=[],h=0,i=0;i<3;++i)for(var s=(i+1)%3,p=(i+2)%3,d=[0,0,0],y=[0,0,0],b=-1;b<=1;b+=2){u.push(h,h+2,h+1,h+1,h+2,h+3),d[i]=b,y[i]=b;for(var m=-1;m<=1;m+=2){d[s]=m;for(var _=-1;_<=1;_+=2)d[p]=_,o.push(d[0],d[1],d[2],y[0],y[1],y[2]),h+=1}var T=s;s=p,p=T}var g=r(a,new Float32Array(o)),A=r(a,new Uint16Array(u),a.ELEMENT_ARRAY_BUFFER),k=n(a,[{buffer:g,type:a.FLOAT,size:3,offset:0,stride:24},{buffer:g,type:a.FLOAT,size:3,offset:12,stride:24}],A),R=l(a);return R.attributes.position.location=0,R.attributes.normal.location=1,new c(a,g,k,R)}},{"./shaders":254,"gl-buffer":259,"gl-vao":358}],252:[function(e,v,M){v.exports=b;var r=e("bit-twiddle"),n=e("gl-mat4/multiply"),l=e("split-polygon"),c=e("robust-orientation"),t=new Array(16),f=new Array(8),a=new Array(8),o=new Array(3),u=[0,0,0];(function(){for(var m=0;m<8;++m)f[m]=[1,1,1,1],a[m]=[1,1,1]})();function h(m,_,T){for(var g=0;g<4;++g){m[g]=T[12+g];for(var A=0;A<3;++A)m[g]+=_[A]*T[4*A+g]}}var i=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function s(m){for(var _=0;_<i.length;++_)if(m=l.positive(m,i[_]),m.length<3)return 0;for(var T=m[0],g=T[0]/T[3],A=T[1]/T[3],k=0,_=1;_+1<m.length;++_){var R=m[_],L=m[_+1],z=R[0]/R[3],E=R[1]/R[3],S=L[0]/L[3],C=L[1]/L[3],D=z-g,F=E-A,N=S-g,G=C-A;k+=Math.abs(D*G-F*N)}return k}var p=[1,1,1],d=[0,0,0],y={cubeEdges:p,axis:d};function b(m,_,T,g,A){n(t,_,m),n(t,T,t);for(var k=0,R=0;R<2;++R){o[2]=g[R][2];for(var L=0;L<2;++L){o[1]=g[L][1];for(var z=0;z<2;++z)o[0]=g[z][0],h(f[k],o,t),k+=1}}for(var E=-1,R=0;R<8;++R){for(var S=f[R][3],C=0;C<3;++C)a[R][C]=f[R][C]/S;A&&(a[R][2]*=-1),S<0&&(E<0||a[R][2]<a[E][2])&&(E=R)}if(E<0){E=0;for(var D=0;D<3;++D){for(var F=(D+2)%3,N=(D+1)%3,G=-1,U=-1,X=0;X<2;++X){var I=X<<D,B=I+(X<<F)+(1-X<<N),j=I+(1-X<<F)+(X<<N);c(a[I],a[B],a[j],u)<0||(X?G=1:U=1)}if(G<0||U<0){U>G&&(E|=1<<D);continue}for(var X=0;X<2;++X){var I=X<<D,B=I+(X<<F)+(1-X<<N),j=I+(1-X<<F)+(X<<N),H=s([f[I],f[B],f[j],f[I+(1<<F)+(1<<N)]]);X?G=H:U=H}if(U>G){E|=1<<D;continue}}}for(var K=7^E,te=-1,R=0;R<8;++R)R===E||R===K||(te<0||a[te][1]>a[R][1])&&(te=R);for(var J=-1,R=0;R<3;++R){var oe=te^1<<R;if(!(oe===E||oe===K)){J<0&&(J=oe);var N=a[oe];N[0]<a[J][0]&&(J=oe)}}for(var ie=-1,R=0;R<3;++R){var oe=te^1<<R;if(!(oe===E||oe===K||oe===J)){ie<0&&(ie=oe);var N=a[oe];N[0]>a[ie][0]&&(ie=oe)}}var Q=p;Q[0]=Q[1]=Q[2]=0,Q[r.log2(J^te)]=te&J,Q[r.log2(te^ie)]=te&ie;var V=ie^7;V===E||V===K?(V=J^7,Q[r.log2(ie^V)]=V&ie):Q[r.log2(J^V)]=V&J;for(var se=d,re=E,D=0;D<3;++D)re&1<<D?se[D]=-1:se[D]=1;return y}},{"bit-twiddle":97,"gl-mat4/multiply":295,"robust-orientation":548,"split-polygon":566}],253:[function(e,v,M){v.exports=p;var r=e("gl-buffer"),n=e("gl-vao"),l=e("./shaders").line,c=[0,0,0],t=[0,0,0],f=[0,0,0],a=[0,0,0],o=[1,1];function u(d){return d[0]=d[1]=d[2]=0,d}function h(d,y){return d[0]=y[0],d[1]=y[1],d[2]=y[2],d}function i(d,y,b,m,_,T,g,A){this.gl=d,this.vertBuffer=y,this.vao=b,this.shader=m,this.tickCount=_,this.tickOffset=T,this.gridCount=g,this.gridOffset=A}var s=i.prototype;s.bind=function(d,y,b){this.shader.bind(),this.shader.uniforms.model=d,this.shader.uniforms.view=y,this.shader.uniforms.projection=b,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},s.unbind=function(){this.vao.unbind()},s.drawAxisLine=function(d,y,b,m,_){var T=u(t);this.shader.uniforms.majorAxis=t,T[d]=y[1][d]-y[0][d],this.shader.uniforms.minorAxis=T;var g=h(a,b);g[d]+=y[0][d],this.shader.uniforms.offset=g,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=m;var A=u(f);A[(d+2)%3]=1,this.shader.uniforms.screenAxis=A,this.vao.draw(this.gl.TRIANGLES,6);var A=u(f);A[(d+1)%3]=1,this.shader.uniforms.screenAxis=A,this.vao.draw(this.gl.TRIANGLES,6)},s.drawAxisTicks=function(d,y,b,m,_){if(this.tickCount[d]){var T=u(c);T[d]=1,this.shader.uniforms.majorAxis=T,this.shader.uniforms.offset=y,this.shader.uniforms.minorAxis=b,this.shader.uniforms.color=m,this.shader.uniforms.lineWidth=_;var g=u(f);g[d]=1,this.shader.uniforms.screenAxis=g,this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d])}},s.drawGrid=function(d,y,b,m,_,T){if(this.gridCount[d]){var g=u(t);g[y]=b[1][y]-b[0][y],this.shader.uniforms.minorAxis=g;var A=h(a,m);A[y]+=b[0][y],this.shader.uniforms.offset=A;var k=u(c);k[d]=1,this.shader.uniforms.majorAxis=k;var R=u(f);R[d]=1,this.shader.uniforms.screenAxis=R,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,this.gridCount[d],this.gridOffset[d])}},s.drawZero=function(d,y,b,m,_,T){var g=u(t);this.shader.uniforms.majorAxis=g,g[d]=b[1][d]-b[0][d],this.shader.uniforms.minorAxis=g;var A=h(a,m);A[d]+=b[0][d],this.shader.uniforms.offset=A;var k=u(f);k[y]=1,this.shader.uniforms.screenAxis=k,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,6)},s.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function p(d,y,b){var m=[],_=[0,0,0],T=[0,0,0],g=[0,0,0],A=[0,0,0];m.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var k=0;k<3;++k){for(var z=m.length/3|0,R=0;R<b[k].length;++R){var L=+b[k][R].x;m.push(L,0,1,L,1,1,L,0,-1,L,0,-1,L,1,1,L,1,-1)}var S=m.length/3|0;_[k]=z,T[k]=S-z;for(var z=m.length/3|0,E=0;E<b[k].length;++E){var L=+b[k][E].x;m.push(L,0,1,L,1,1,L,0,-1,L,0,-1,L,1,1,L,1,-1)}var S=m.length/3|0;g[k]=z,A[k]=S-z}var C=r(d,new Float32Array(m)),D=n(d,[{buffer:C,type:d.FLOAT,size:3,stride:0,offset:0}]),F=l(d);return F.attributes.position.location=0,new i(d,C,D,F,T,_,A,g)}},{"./shaders":254,"gl-buffer":259,"gl-vao":358}],254:[function(e,v,M){var r=e("glslify"),n=e("gl-shader"),l=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);M.line=function(u){return n(u,l,c,null,[{name:"position",type:"vec3"}])};var t=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),f=r([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);M.text=function(u){return n(u,t,f,null,[{name:"position",type:"vec3"}])};var a=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),o=r([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);M.bg=function(u){return n(u,a,o,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":335,glslify:257}],255:[function(e,v,M){(function(r){(function(){v.exports=p;var n=e("gl-buffer"),l=e("gl-vao"),c=e("vectorize-text"),t=e("./shaders").text,f=window||r.global||{},a=f.__TEXT_CACHE||{};f.__TEXT_CACHE={};var o=3;function u(d,y,b,m){this.gl=d,this.shader=y,this.buffer=b,this.vao=m,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var h=u.prototype,i=[0,0];h.bind=function(d,y,b,m){this.vao.bind(),this.shader.bind();var _=this.shader.uniforms;_.model=d,_.view=y,_.projection=b,_.pixelScale=m,i[0]=this.gl.drawingBufferWidth,i[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=i},h.unbind=function(){this.vao.unbind()},h.update=function(d,y,b,m,_){var T=[];function g(D,F,N,G,U,X){var I=a[N];I||(I=a[N]={});var B=I[F];B||(B=I[F]=s(F,{triangles:!0,font:N,textAlign:"center",textBaseline:"middle",lineSpacing:U,styletags:X}));for(var j=(G||12)/12,H=B.positions,K=B.cells,te=0,J=K.length;te<J;++te)for(var oe=K[te],ie=2;ie>=0;--ie){var Q=H[oe[ie]];T.push(j*Q[0],-j*Q[1],D)}}for(var A=[0,0,0],k=[0,0,0],R=[0,0,0],L=[0,0,0],z=1.25,E={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},S=0;S<3;++S){R[S]=T.length/o|0,g(.5*(d[0][S]+d[1][S]),y[S],b[S],12,z,E),L[S]=(T.length/o|0)-R[S],A[S]=T.length/o|0;for(var C=0;C<m[S].length;++C)m[S][C].text&&g(m[S][C].x,m[S][C].text,m[S][C].font||_,m[S][C].fontSize||12,z,E);k[S]=(T.length/o|0)-A[S]}this.buffer.update(T),this.tickOffset=A,this.tickCount=k,this.labelOffset=R,this.labelCount=L},h.drawTicks=function(d,y,b,m,_,T,g,A){this.tickCount[d]&&(this.shader.uniforms.axis=T,this.shader.uniforms.color=_,this.shader.uniforms.angle=b,this.shader.uniforms.scale=y,this.shader.uniforms.offset=m,this.shader.uniforms.alignDir=g,this.shader.uniforms.alignOpt=A,this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d]))},h.drawLabel=function(d,y,b,m,_,T,g,A){this.labelCount[d]&&(this.shader.uniforms.axis=T,this.shader.uniforms.color=_,this.shader.uniforms.angle=b,this.shader.uniforms.scale=y,this.shader.uniforms.offset=m,this.shader.uniforms.alignDir=g,this.shader.uniforms.alignOpt=A,this.vao.draw(this.gl.TRIANGLES,this.labelCount[d],this.labelOffset[d]))},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function s(d,y){try{return c(d,y)}catch(b){return console.warn('error vectorizing text:"'+d+'" error:',b),{cells:[],positions:[]}}}function p(d,y,b,m,_,T){var g=n(d),A=l(d,[{buffer:g,size:3}]),k=t(d);k.attributes.position.location=0;var R=new u(d,k,g,A);return R.update(y,b,m,_,T),R}}).call(this)}).call(this,e("_process"))},{"./shaders":254,_process:526,"gl-buffer":259,"gl-vao":358,"vectorize-text":600}],256:[function(e,v,M){M.create=n,M.equal=l;function r(c,t){var f=c+"",a=f.indexOf("."),o=0;a>=0&&(o=f.length-a-1);var u=Math.pow(10,o),h=Math.round(c*t*u),i=h+"";if(i.indexOf("e")>=0)return i;var s=h/u,p=h%u;h<0?(s=-Math.ceil(s)|0,p=-p|0):(s=Math.floor(s)|0,p=p|0);var d=""+s;if(h<0&&(d="-"+d),o){for(var y=""+p;y.length<o;)y="0"+y;return d+"."+y}else return d}function n(c,t){for(var f=[],a=0;a<3;++a){var o=[];.5*(c[0][a]+c[1][a]);for(var u=0;u*t[a]<=c[1][a];++u)o.push({x:u*t[a],text:r(t[a],u)});for(var u=-1;u*t[a]>=c[0][a];--u)o.push({x:u*t[a],text:r(t[a],u)});f.push(o)}return f}function l(c,t){for(var f=0;f<3;++f){if(c[f].length!==t[f].length)return!1;for(var a=0;a<c[f].length;++a){var o=c[f][a],u=t[f][a];if(o.x!==u.x||o.text!==u.text||o.font!==u.font||o.fontColor!==u.fontColor||o.fontSize!==u.fontSize||o.dx!==u.dx||o.dy!==u.dy)return!1}}return!0}},{}],257:[function(e,v,M){v.exports=function(r){typeof r=="string"&&(r=[r]);for(var n=[].slice.call(arguments,1),l=[],c=0;c<r.length-1;c++)l.push(r[c],n[c]||"");return l.push(r[c]),l.join("")}},{}],258:[function(e,v,M){v.exports=y;var r=e("extract-frustum-planes"),n=e("split-polygon"),l=e("./lib/cube.js"),c=e("gl-mat4/multiply"),t=e("gl-mat4/transpose"),f=e("gl-vec4/transformMat4"),a=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=new Float32Array(16);function u(b,m,_){this.lo=b,this.hi=m,this.pixelsPerDataUnit=_}var h=[0,0,0,1],i=[0,0,0,1];function s(b,m,_,T,g){for(var A=0;A<3;++A){for(var k=h,R=i,L=0;L<3;++L)R[L]=k[L]=_[L];R[3]=k[3]=1,R[A]+=1,f(R,R,m),R[3]<0&&(b[A]=1/0),k[A]-=1,f(k,k,m),k[3]<0&&(b[A]=1/0);var z=(k[0]/k[3]-R[0]/R[3])*T,E=(k[1]/k[3]-R[1]/R[3])*g;b[A]=.25*Math.sqrt(z*z+E*E)}return b}var p=[new u(1/0,-1/0,1/0),new u(1/0,-1/0,1/0),new u(1/0,-1/0,1/0)],d=[0,0,0];function y(b,m,_,T,E){var A=m.model||a,k=m.view||a,R=m.projection||a,L=m._ortho||!1,z=b.bounds,E=E||l(A,k,R,z,L),S=E.axis;c(o,k,A),c(o,R,o);for(var C=p,D=0;D<3;++D)C[D].lo=1/0,C[D].hi=-1/0,C[D].pixelsPerDataUnit=1/0;var F=r(t(o,o));t(o,o);for(var N=0;N<3;++N){var G=(N+1)%3,U=(N+2)%3,X=d;e:for(var D=0;D<2;++D){var I=[];if(S[N]<0!=!!D){X[N]=z[D][N];for(var B=0;B<2;++B){X[G]=z[B^D][G];for(var j=0;j<2;++j)X[U]=z[j^B^D][U],I.push(X.slice())}for(var H=L?5:4,B=H;B===H;++B){if(I.length===0)continue e;I=n.positive(I,F[B])}for(var B=0;B<I.length;++B)for(var U=I[B],K=s(d,o,U,_,T),j=0;j<3;++j)C[j].lo=Math.min(C[j].lo,U[j]),C[j].hi=Math.max(C[j].hi,U[j]),j!==N&&(C[j].pixelsPerDataUnit=Math.min(C[j].pixelsPerDataUnit,Math.abs(K[j])))}}}return C}},{"./lib/cube.js":252,"extract-frustum-planes":240,"gl-mat4/multiply":295,"gl-mat4/transpose":306,"gl-vec4/transformMat4":429,"split-polygon":566}],259:[function(e,v,M){var r=e("typedarray-pool"),n=e("ndarray-ops"),l=e("ndarray"),c=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function t(i,s,p,d,y){this.gl=i,this.type=s,this.handle=p,this.length=d,this.usage=y}var f=t.prototype;f.bind=function(){this.gl.bindBuffer(this.type,this.handle)},f.unbind=function(){this.gl.bindBuffer(this.type,null)},f.dispose=function(){this.gl.deleteBuffer(this.handle)};function a(i,s,p,d,y,b){var m=y.length*y.BYTES_PER_ELEMENT;if(b<0)return i.bufferData(s,y,d),m;if(m+b>p)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return i.bufferSubData(s,b,y),p}function o(i,s){for(var p=r.malloc(i.length,s),d=i.length,y=0;y<d;++y)p[y]=i[y];return p}function u(i,s){for(var p=1,d=s.length-1;d>=0;--d){if(s[d]!==p)return!1;p*=i[d]}return!0}f.update=function(i,s){if(typeof s!="number"&&(s=-1),this.bind(),typeof i=="object"&&typeof i.shape<"u"){var p=i.dtype;if(c.indexOf(p)<0&&(p="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var d=gl.getExtension("OES_element_index_uint");d&&p!=="uint16"?p="uint32":p="uint16"}if(p===i.dtype&&u(i.shape,i.stride))i.offset===0&&i.data.length===i.shape[0]?this.length=a(this.gl,this.type,this.length,this.usage,i.data,s):this.length=a(this.gl,this.type,this.length,this.usage,i.data.subarray(i.offset,i.shape[0]),s);else{var y=r.malloc(i.size,p),b=l(y,i.shape);n.assign(b,i),s<0?this.length=a(this.gl,this.type,this.length,this.usage,y,s):this.length=a(this.gl,this.type,this.length,this.usage,y.subarray(0,i.size),s),r.free(y)}}else if(Array.isArray(i)){var m;this.type===this.gl.ELEMENT_ARRAY_BUFFER?m=o(i,"uint16"):m=o(i,"float32"),s<0?this.length=a(this.gl,this.type,this.length,this.usage,m,s):this.length=a(this.gl,this.type,this.length,this.usage,m.subarray(0,i.length),s),r.free(m)}else if(typeof i=="object"&&typeof i.length=="number")this.length=a(this.gl,this.type,this.length,this.usage,i,s);else if(typeof i=="number"||i===void 0){if(s>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");i=i|0,i<=0&&(i=1),this.gl.bufferData(this.type,i|0,this.usage),this.length=i}else throw new Error("gl-buffer: Invalid data type")};function h(i,s,p,d){if(p=p||i.ARRAY_BUFFER,d=d||i.DYNAMIC_DRAW,p!==i.ARRAY_BUFFER&&p!==i.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(d!==i.DYNAMIC_DRAW&&d!==i.STATIC_DRAW&&d!==i.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var y=i.createBuffer(),b=new t(i,p,y,0,d);return b.update(s),b}v.exports=h},{ndarray:495,"ndarray-ops":490,"typedarray-pool":595}],260:[function(e,v,M){var r=e("gl-vec3");v.exports=function(l,c){var t=l.positions,f=l.vectors,a={positions:[],vertexIntensity:[],vertexIntensityBounds:l.vertexIntensityBounds,vectors:[],cells:[],coneOffset:l.coneOffset,colormap:l.colormap};if(l.positions.length===0)return c&&(c[0]=[0,0,0],c[1]=[0,0,0]),a;for(var o=0,u=1/0,h=-1/0,i=1/0,s=-1/0,p=1/0,d=-1/0,y=null,b=null,m=[],_=1/0,T=!1,g=0;g<t.length;g++){var A=t[g];u=Math.min(A[0],u),h=Math.max(A[0],h),i=Math.min(A[1],i),s=Math.max(A[1],s),p=Math.min(A[2],p),d=Math.max(A[2],d);var k=f[g];if(r.length(k)>o&&(o=r.length(k)),g){var R=2*r.distance(y,A)/(r.length(b)+r.length(k));R?(_=Math.min(_,R),T=!1):T=!0}T||(y=A,b=k),m.push(k)}var L=[u,i,p],z=[h,s,d];c&&(c[0]=L,c[1]=z),o===0&&(o=1);var E=1/o;isFinite(_)||(_=1),a.vectorScale=_;var S=l.coneSize||.5;l.absoluteConeSize&&(S=l.absoluteConeSize*E),a.coneScale=S;for(var g=0,C=0;g<t.length;g++)for(var A=t[g],D=A[0],F=A[1],N=A[2],G=m[g],U=r.length(G)*E,X=0,I=8;X<I;X++){a.positions.push([D,F,N,C++]),a.positions.push([D,F,N,C++]),a.positions.push([D,F,N,C++]),a.positions.push([D,F,N,C++]),a.positions.push([D,F,N,C++]),a.positions.push([D,F,N,C++]),a.vectors.push(G),a.vectors.push(G),a.vectors.push(G),a.vectors.push(G),a.vectors.push(G),a.vectors.push(G),a.vertexIntensity.push(U,U,U),a.vertexIntensity.push(U,U,U);var B=a.positions.length;a.cells.push([B-6,B-5,B-4],[B-3,B-2,B-1])}return a};var n=e("./lib/shaders");v.exports.createMesh=e("./create_mesh"),v.exports.createConeMesh=function(l,c){return v.exports.createMesh(l,c,{shaders:n,traceType:"cone"})}},{"./create_mesh":261,"./lib/shaders":262,"gl-vec3":377}],261:[function(e,v,M){var r=e("gl-shader"),n=e("gl-buffer"),l=e("gl-vao"),c=e("gl-texture2d"),t=e("gl-mat4/multiply"),f=e("gl-mat4/invert"),a=e("ndarray"),o=e("colormap"),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(m,_,T,g,A,k,R,L,z,E,S){this.gl=m,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=_,this.dirty=!0,this.triShader=T,this.pickShader=g,this.trianglePositions=A,this.triangleVectors=k,this.triangleColors=L,this.triangleUVs=z,this.triangleIds=R,this.triangleVAO=E,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=S,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=u,this._view=u,this._projection=u,this._resolution=[1,1]}var i=h.prototype;i.isOpaque=function(){return this.opacity>=1},i.isTransparent=function(){return this.opacity<1},i.pickSlots=1,i.setPickBase=function(m){this.pickId=m};function s(m){for(var _=o({colormap:m,nshades:256,format:"rgba"}),T=new Uint8Array(256*4),g=0;g<256;++g){for(var A=_[g],k=0;k<3;++k)T[4*g+k]=A[k];T[4*g+3]=A[3]*255}return a(T,[256,256,4],[4,0,1])}function p(m){for(var _=m.length,T=new Array(_),g=0;g<_;++g)T[g]=m[g][2];return T}i.update=function(m){m=m||{};var _=this.gl;this.dirty=!0,"lightPosition"in m&&(this.lightPosition=m.lightPosition),"opacity"in m&&(this.opacity=m.opacity),"ambient"in m&&(this.ambientLight=m.ambient),"diffuse"in m&&(this.diffuseLight=m.diffuse),"specular"in m&&(this.specularLight=m.specular),"roughness"in m&&(this.roughness=m.roughness),"fresnel"in m&&(this.fresnel=m.fresnel),m.tubeScale!==void 0&&(this.tubeScale=m.tubeScale),m.vectorScale!==void 0&&(this.vectorScale=m.vectorScale),m.coneScale!==void 0&&(this.coneScale=m.coneScale),m.coneOffset!==void 0&&(this.coneOffset=m.coneOffset),m.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=_.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=_.LINEAR,this.texture.setPixels(s(m.colormap)),this.texture.generateMipmap());var T=m.cells,g=m.positions,A=m.vectors;if(!(!g||!T||!A)){var k=[],R=[],L=[],z=[],E=[];this.cells=T,this.positions=g,this.vectors=A;var S=m.meshColor||[1,1,1,1],C=m.vertexIntensity,D=1/0,F=-1/0;if(C)if(m.vertexIntensityBounds)D=+m.vertexIntensityBounds[0],F=+m.vertexIntensityBounds[1];else for(var N=0;N<C.length;++N){var G=C[N];D=Math.min(D,G),F=Math.max(F,G)}else for(var N=0;N<g.length;++N){var G=g[N][2];D=Math.min(D,G),F=Math.max(F,G)}C?this.intensity=C:this.intensity=p(g),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var N=0;N<g.length;++N)for(var U=g[N],X=0;X<3;++X)isNaN(U[X])||!isFinite(U[X])||(this.bounds[0][X]=Math.min(this.bounds[0][X],U[X]),this.bounds[1][X]=Math.max(this.bounds[1][X],U[X]));var I=0;e:for(var N=0;N<T.length;++N){var B=T[N];switch(B.length){case 3:for(var X=0;X<3;++X)for(var j=B[X],U=g[j],H=0;H<3;++H)if(isNaN(U[H])||!isFinite(U[H]))continue e;for(var X=0;X<3;++X){var j=B[2-X],U=g[j];k.push(U[0],U[1],U[2],U[3]);var K=A[j];R.push(K[0],K[1],K[2],K[3]||0);var te=S;te.length===3?L.push(te[0],te[1],te[2],1):L.push(te[0],te[1],te[2],te[3]);var J;C?J=[(C[j]-D)/(F-D),0]:J=[(U[2]-D)/(F-D),0],z.push(J[0],J[1]),E.push(N)}I+=1;break}}this.triangleCount=I,this.trianglePositions.update(k),this.triangleVectors.update(R),this.triangleColors.update(L),this.triangleUVs.update(z),this.triangleIds.update(new Uint32Array(E))}},i.drawTransparent=i.draw=function(m){m=m||{};for(var _=this.gl,T=m.model||u,g=m.view||u,A=m.projection||u,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],R=0;R<3;++R)k[0][R]=Math.max(k[0][R],this.clipBounds[0][R]),k[1][R]=Math.min(k[1][R],this.clipBounds[1][R]);var L={model:T,view:g,projection:A,inverseModel:u.slice(),clipBounds:k,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};L.inverseModel=f(L.inverseModel,L.model),_.disable(_.CULL_FACE),this.texture.bind(0);var z=new Array(16);t(z,L.view,L.model),t(z,L.projection,z),f(z,z);for(var R=0;R<3;++R)L.eyePosition[R]=z[12+R]/z[15];for(var E=z[15],R=0;R<3;++R)E+=this.lightPosition[R]*z[4*R+3];for(var R=0;R<3;++R){for(var S=z[12+R],C=0;C<3;++C)S+=z[4*C+R]*this.lightPosition[C];L.lightPosition[R]=S/E}if(this.triangleCount>0){var D=this.triShader;D.bind(),D.uniforms=L,this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},i.drawPick=function(m){m=m||{};for(var _=this.gl,T=m.model||u,g=m.view||u,A=m.projection||u,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],R=0;R<3;++R)k[0][R]=Math.max(k[0][R],this.clipBounds[0][R]),k[1][R]=Math.min(k[1][R],this.clipBounds[1][R]);this._model=[].slice.call(T),this._view=[].slice.call(g),this._projection=[].slice.call(A),this._resolution=[_.drawingBufferWidth,_.drawingBufferHeight];var L={model:T,view:g,projection:A,clipBounds:k,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},z=this.pickShader;z.bind(),z.uniforms=L,this.triangleCount>0&&(this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},i.pick=function(m){if(!m||m.id!==this.pickId)return null;var _=m.value[0]+256*m.value[1]+65536*m.value[2],T=this.cells[_],g=this.positions[T[1]].slice(0,3),A={position:g,dataCoordinate:g,index:Math.floor(T[1]/48)};return this.traceType==="cone"?A.index=Math.floor(T[1]/48):this.traceType==="streamtube"&&(A.intensity=this.intensity[T[1]],A.velocity=this.vectors[T[1]].slice(0,3),A.divergence=this.vectors[T[1]][3],A.index=_),A},i.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function d(m,_){var T=r(m,_.meshShader.vertex,_.meshShader.fragment,null,_.meshShader.attributes);return T.attributes.position.location=0,T.attributes.color.location=2,T.attributes.uv.location=3,T.attributes.vector.location=4,T}function y(m,_){var T=r(m,_.pickShader.vertex,_.pickShader.fragment,null,_.pickShader.attributes);return T.attributes.position.location=0,T.attributes.id.location=1,T.attributes.vector.location=4,T}function b(m,_,T){var g=T.shaders;arguments.length===1&&(_=m,m=_.gl);var A=d(m,g),k=y(m,g),R=c(m,a(new Uint8Array([255,255,255,255]),[1,1,4]));R.generateMipmap(),R.minFilter=m.LINEAR_MIPMAP_LINEAR,R.magFilter=m.LINEAR;var L=n(m),z=n(m),E=n(m),S=n(m),C=n(m),D=l(m,[{buffer:L,type:m.FLOAT,size:4},{buffer:C,type:m.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:E,type:m.FLOAT,size:4},{buffer:S,type:m.FLOAT,size:2},{buffer:z,type:m.FLOAT,size:4}]),F=new h(m,R,A,k,L,z,C,E,S,D,T.traceType||"cone");return F.update(_),F}v.exports=b},{colormap:131,"gl-buffer":259,"gl-mat4/invert":293,"gl-mat4/multiply":295,"gl-shader":335,"gl-texture2d":353,"gl-vao":358,ndarray:495}],262:[function(e,v,M){var r=e("glslify"),n=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),l=r([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),c=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),t=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);M.meshShader={vertex:n,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},M.pickShader={vertex:c,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:263}],263:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],264:[function(e,v,M){v.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],265:[function(e,v,M){var r=e("./1.0/numbers");v.exports=function(l){return r[l]}},{"./1.0/numbers":264}],266:[function(e,v,M){v.exports=h;var r=e("gl-buffer"),n=e("gl-vao"),l=e("./shaders/index"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(i,s,p,d){this.gl=i,this.shader=d,this.buffer=s,this.vao=p,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var f=t.prototype;f.isOpaque=function(){return!this.hasAlpha},f.isTransparent=function(){return this.hasAlpha},f.drawTransparent=f.draw=function(i){var s=this.gl,p=this.shader.uniforms;this.shader.bind();var d=p.view=i.view||c,y=p.projection=i.projection||c;p.model=i.model||c,p.clipBounds=this.clipBounds,p.opacity=this.opacity;var b=d[12],m=d[13],_=d[14],T=d[15],g=i._ortho||!1,A=g?2:1,k=A*this.pixelRatio*(y[3]*b+y[7]*m+y[11]*_+y[15]*T)/s.drawingBufferHeight;this.vao.bind();for(var R=0;R<3;++R)s.lineWidth(this.lineWidth[R]*this.pixelRatio),p.capSize=this.capSize[R]*k,this.lineCount[R]&&s.drawArrays(s.LINES,this.lineOffset[R],this.lineCount[R]);this.vao.unbind()};function a(i,s){for(var p=0;p<3;++p)i[0][p]=Math.min(i[0][p],s[p]),i[1][p]=Math.max(i[1][p],s[p])}var o=function(){for(var i=new Array(3),s=0;s<3;++s){for(var p=[],d=1;d<=2;++d)for(var y=-1;y<=1;y+=2){var b=(d+s)%3,m=[0,0,0];m[b]=y,p.push(m)}i[s]=p}return i}();function u(i,s,p,d){for(var y=o[d],b=0;b<y.length;++b){var m=y[b];i.push(s[0],s[1],s[2],p[0],p[1],p[2],p[3],m[0],m[1],m[2])}return y.length}f.update=function(i){i=i||{},"lineWidth"in i&&(this.lineWidth=i.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in i&&(this.capSize=i.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in i&&(this.opacity=+i.opacity,this.opacity<1&&(this.hasAlpha=!0));var s=i.color||[[0,0,0],[0,0,0],[0,0,0]],p=i.position,d=i.error;if(Array.isArray(s[0])||(s=[s,s,s]),p&&d){var y=[],b=p.length,m=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var _=0;_<3;++_){this.lineOffset[_]=m;e:for(var T=0;T<b;++T){for(var g=p[T],A=0;A<3;++A)if(isNaN(g[A])||!isFinite(g[A]))continue e;var k=d[T],R=s[_];if(Array.isArray(R[0])&&(R=s[T]),R.length===3?R=[R[0],R[1],R[2],1]:R.length===4&&(R=[R[0],R[1],R[2],R[3]],!this.hasAlpha&&R[3]<1&&(this.hasAlpha=!0)),!(isNaN(k[0][_])||isNaN(k[1][_]))){if(k[0][_]<0){var L=g.slice();L[_]+=k[0][_],y.push(g[0],g[1],g[2],R[0],R[1],R[2],R[3],0,0,0,L[0],L[1],L[2],R[0],R[1],R[2],R[3],0,0,0),a(this.bounds,L),m+=2+u(y,L,R,_)}if(k[1][_]>0){var L=g.slice();L[_]+=k[1][_],y.push(g[0],g[1],g[2],R[0],R[1],R[2],R[3],0,0,0,L[0],L[1],L[2],R[0],R[1],R[2],R[3],0,0,0),a(this.bounds,L),m+=2+u(y,L,R,_)}}}this.lineCount[_]=m-this.lineOffset[_]}this.buffer.update(y)}},f.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function h(i){var s=i.gl,p=r(s),d=n(s,[{buffer:p,type:s.FLOAT,size:3,offset:0,stride:40},{buffer:p,type:s.FLOAT,size:4,offset:12,stride:40},{buffer:p,type:s.FLOAT,size:3,offset:28,stride:40}]),y=l(s);y.attributes.position.location=0,y.attributes.color.location=1,y.attributes.offset.location=2;var b=new t(s,p,d,y);return b.update(i),b}},{"./shaders/index":268,"gl-buffer":259,"gl-vao":358}],267:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],268:[function(e,v,M){var r=e("glslify"),n=e("gl-shader"),l=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),c=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);v.exports=function(t){return n(t,l,c,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":335,glslify:267}],269:[function(e,v,M){var r=e("gl-texture2d");v.exports=m;var n=null,l,c,t,f;function a(_){var T=_.getParameter(_.FRAMEBUFFER_BINDING),g=_.getParameter(_.RENDERBUFFER_BINDING),A=_.getParameter(_.TEXTURE_BINDING_2D);return[T,g,A]}function o(_,T){_.bindFramebuffer(_.FRAMEBUFFER,T[0]),_.bindRenderbuffer(_.RENDERBUFFER,T[1]),_.bindTexture(_.TEXTURE_2D,T[2])}function u(_,T){var g=_.getParameter(T.MAX_COLOR_ATTACHMENTS_WEBGL);n=new Array(g+1);for(var A=0;A<=g;++A){for(var k=new Array(g),R=0;R<A;++R)k[R]=_.COLOR_ATTACHMENT0+R;for(var R=A;R<g;++R)k[R]=_.NONE;n[A]=k}}function h(_){switch(_){case l:throw new Error("gl-fbo: Framebuffer unsupported");case c:throw new Error("gl-fbo: Framebuffer incomplete attachment");case t:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case f:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function i(_,T,g,A,k,R){if(!A)return null;var L=r(_,T,g,k,A);return L.magFilter=_.NEAREST,L.minFilter=_.NEAREST,L.mipSamples=1,L.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,R,_.TEXTURE_2D,L.handle,0),L}function s(_,T,g,A,k){var R=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,R),_.renderbufferStorage(_.RENDERBUFFER,A,T,g),_.framebufferRenderbuffer(_.FRAMEBUFFER,k,_.RENDERBUFFER,R),R}function p(_){var T=a(_.gl),g=_.gl,A=_.handle=g.createFramebuffer(),k=_._shape[0],R=_._shape[1],L=_.color.length,z=_._ext,E=_._useStencil,S=_._useDepth,C=_._colorType;g.bindFramebuffer(g.FRAMEBUFFER,A);for(var D=0;D<L;++D)_.color[D]=i(g,k,R,C,g.RGBA,g.COLOR_ATTACHMENT0+D);L===0?(_._color_rb=s(g,k,R,g.RGBA4,g.COLOR_ATTACHMENT0),z&&z.drawBuffersWEBGL(n[0])):L>1&&z.drawBuffersWEBGL(n[L]);var F=g.getExtension("WEBGL_depth_texture");F?E?_.depth=i(g,k,R,F.UNSIGNED_INT_24_8_WEBGL,g.DEPTH_STENCIL,g.DEPTH_STENCIL_ATTACHMENT):S&&(_.depth=i(g,k,R,g.UNSIGNED_SHORT,g.DEPTH_COMPONENT,g.DEPTH_ATTACHMENT)):S&&E?_._depth_rb=s(g,k,R,g.DEPTH_STENCIL,g.DEPTH_STENCIL_ATTACHMENT):S?_._depth_rb=s(g,k,R,g.DEPTH_COMPONENT16,g.DEPTH_ATTACHMENT):E&&(_._depth_rb=s(g,k,R,g.STENCIL_INDEX,g.STENCIL_ATTACHMENT));var N=g.checkFramebufferStatus(g.FRAMEBUFFER);if(N!==g.FRAMEBUFFER_COMPLETE){_._destroyed=!0,g.bindFramebuffer(g.FRAMEBUFFER,null),g.deleteFramebuffer(_.handle),_.handle=null,_.depth&&(_.depth.dispose(),_.depth=null),_._depth_rb&&(g.deleteRenderbuffer(_._depth_rb),_._depth_rb=null);for(var D=0;D<_.color.length;++D)_.color[D].dispose(),_.color[D]=null;_._color_rb&&(g.deleteRenderbuffer(_._color_rb),_._color_rb=null),o(g,T),h(N)}o(g,T)}function d(_,T,g,A,k,R,L,z){this.gl=_,this._shape=[T|0,g|0],this._destroyed=!1,this._ext=z,this.color=new Array(k);for(var E=0;E<k;++E)this.color[E]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=A,this._useDepth=R,this._useStencil=L;var S=this,C=[T|0,g|0];Object.defineProperties(C,{0:{get:function(){return S._shape[0]},set:function(D){return S.width=D}},1:{get:function(){return S._shape[1]},set:function(D){return S.height=D}}}),this._shapeVector=C,p(this)}var y=d.prototype;function b(_,T,g){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(_._shape[0]===T&&_._shape[1]===g)){var A=_.gl,k=A.getParameter(A.MAX_RENDERBUFFER_SIZE);if(T<0||T>k||g<0||g>k)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=T,_._shape[1]=g;for(var R=a(A),L=0;L<_.color.length;++L)_.color[L].shape=_._shape;_._color_rb&&(A.bindRenderbuffer(A.RENDERBUFFER,_._color_rb),A.renderbufferStorage(A.RENDERBUFFER,A.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(A.bindRenderbuffer(A.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&A.renderbufferStorage(A.RENDERBUFFER,A.STENCIL_INDEX,_._shape[0],_._shape[1])),A.bindFramebuffer(A.FRAMEBUFFER,_.handle);var z=A.checkFramebufferStatus(A.FRAMEBUFFER);z!==A.FRAMEBUFFER_COMPLETE&&(_.dispose(),o(A,R),h(z)),o(A,R)}}Object.defineProperties(y,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[_|0,_|0]),_.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var T=_[0]|0,g=_[1]|0;return b(this,T,g),[T,g]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return _=_|0,b(this,_,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return _=_|0,b(this,this._shape[0],_),_},enumerable:!1}}),y.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},y.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var T=0;T<this.color.length;++T)this.color[T].dispose(),this.color[T]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function m(_,T,g,A){l||(l=_.FRAMEBUFFER_UNSUPPORTED,c=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,t=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,f=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var k=_.getExtension("WEBGL_draw_buffers");if(!n&&k&&u(_,k),Array.isArray(T)&&(A=g,g=T[1]|0,T=T[0]|0),typeof T!="number")throw new Error("gl-fbo: Missing shape parameter");var R=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(T<0||T>R||g<0||g>R)throw new Error("gl-fbo: Parameters are too large for FBO");A=A||{};var L=1;if("color"in A){if(L=Math.max(A.color|0,0),L<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(L>1)if(k){if(L>_.getParameter(k.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+L+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var z=_.UNSIGNED_BYTE,E=_.getExtension("OES_texture_float");if(A.float&&L>0){if(!E)throw new Error("gl-fbo: Context does not support floating point textures");z=_.FLOAT}else A.preferFloat&&L>0&&E&&(z=_.FLOAT);var S=!0;"depth"in A&&(S=!!A.depth);var C=!1;return"stencil"in A&&(C=!!A.stencil),new d(_,T,g,z,L,S,C,k)}},{"gl-texture2d":353}],270:[function(e,v,M){var r=e("sprintf-js").sprintf,n=e("gl-constants/lookup"),l=e("glsl-shader-name"),c=e("add-line-numbers");v.exports=t;function t(f,a,o){var u=l(a)||"of unknown name (see npm glsl-shader-name)",h="unknown type";o!==void 0&&(h=o===n.FRAGMENT_SHADER?"fragment":"vertex");for(var i=r(`Error compiling %s shader %s:
`,h,u),s=r("%s%s",i,f),p=f.split(`
`),d={},y=0;y<p.length;y++){var b=p[y];if(!(b===""||b==="\0")){var m=parseInt(b.split(":")[2]);if(isNaN(m))throw new Error(r("Could not parse error: %s",b));d[m]=b}}for(var _=c(a).split(`
`),y=0;y<_.length;y++)if(!(!d[y+3]&&!d[y+2]&&!d[y+1])){var T=_[y];if(i+=T+`
`,d[y+1]){var g=d[y+1];g=g.substr(g.split(":",3).join(":").length+1).trim(),i+=r(`^^^ %s

`,g)}}return{long:i.trim(),short:s.trim()}}},{"add-line-numbers":66,"gl-constants/lookup":265,"glsl-shader-name":431,"sprintf-js":567}],271:[function(e,v,M){v.exports=h;var r=e("binary-search-bounds"),n=e("iota-array"),l=e("typedarray-pool"),c=e("gl-shader"),t=e("gl-buffer"),f=e("./lib/shaders");function a(i,s,p,d,y,b,m){this.plot=i,this.shader=s,this.pickShader=p,this.positionBuffer=d,this.weightBuffer=y,this.colorBuffer=b,this.idBuffer=m,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var o=a.prototype,u=[0,0,1,0,0,1,1,0,1,1,0,1];o.draw=function(){var i=[1,0,0,0,1,0,0,0,1];return function(){var s=this.plot,p=this.shader,d=this.bounds,y=this.numVertices;if(!(y<=0)){var b=s.gl,m=s.dataBox,_=d[2]-d[0],T=d[3]-d[1],g=m[2]-m[0],A=m[3]-m[1];i[0]=2*_/g,i[4]=2*T/A,i[6]=2*(d[0]-m[0])/g-1,i[7]=2*(d[1]-m[1])/A-1,p.bind();var k=p.uniforms;k.viewTransform=i,k.shape=this.shape;var R=p.attributes;this.positionBuffer.bind(),R.position.pointer(),this.weightBuffer.bind(),R.weight.pointer(b.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),R.color.pointer(b.UNSIGNED_BYTE,!0),b.drawArrays(b.TRIANGLES,0,y)}}}(),o.drawPick=function(){var i=[1,0,0,0,1,0,0,0,1],s=[0,0,0,0];return function(p){var d=this.plot,y=this.pickShader,b=this.bounds,m=this.numVertices;if(!(m<=0)){var _=d.gl,T=d.dataBox,g=b[2]-b[0],A=b[3]-b[1],k=T[2]-T[0],R=T[3]-T[1];i[0]=2*g/k,i[4]=2*A/R,i[6]=2*(b[0]-T[0])/k-1,i[7]=2*(b[1]-T[1])/R-1;for(var L=0;L<4;++L)s[L]=p>>L*8&255;this.pickOffset=p,y.bind();var z=y.uniforms;z.viewTransform=i,z.pickOffset=s,z.shape=this.shape;var E=y.attributes;return this.positionBuffer.bind(),E.position.pointer(),this.weightBuffer.bind(),E.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),E.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,m),p+this.shape[0]*this.shape[1]}}}(),o.pick=function(i,s,p){var d=this.pickOffset,y=this.shape[0]*this.shape[1];if(p<d||p>=d+y)return null;var b=p-d,m=this.xData,_=this.yData;return{object:this,pointId:b,dataCoord:[m[b%this.shape[0]],_[b/this.shape[0]|0]]}},o.update=function(i){i=i||{};var s=i.shape||[0,0],p=i.x||n(s[0]),d=i.y||n(s[1]),y=i.z||new Float32Array(s[0]*s[1]),b=i.zsmooth!==!1;this.xData=p,this.yData=d;var m=i.colorLevels||[0],_=i.colorValues||[0,0,0,1],T=m.length,g=this.bounds,A,k,R,L;b?(A=g[0]=p[0],k=g[1]=d[0],R=g[2]=p[p.length-1],L=g[3]=d[d.length-1]):(A=g[0]=p[0]+(p[1]-p[0])/2,k=g[1]=d[0]+(d[1]-d[0])/2,R=g[2]=p[p.length-1]+(p[p.length-1]-p[p.length-2])/2,L=g[3]=d[d.length-1]+(d[d.length-1]-d[d.length-2])/2);var z=1/(R-A),E=1/(L-k),S=s[0],C=s[1];this.shape=[S,C];var D=(b?(S-1)*(C-1):S*C)*(u.length>>>1);this.numVertices=D;for(var F=l.mallocUint8(D*4),N=l.mallocFloat32(D*2),G=l.mallocUint8(D*2),U=l.mallocUint32(D),X=0,I=b?S-1:S,B=b?C-1:C,j=0;j<B;++j){var H,K;b?(H=E*(d[j]-k),K=E*(d[j+1]-k)):(H=j<C-1?E*(d[j]-(d[j+1]-d[j])/2-k):E*(d[j]-(d[j]-d[j-1])/2-k),K=j<C-1?E*(d[j]+(d[j+1]-d[j])/2-k):E*(d[j]+(d[j]-d[j-1])/2-k));for(var te=0;te<I;++te){var J,oe;b?(J=z*(p[te]-A),oe=z*(p[te+1]-A)):(J=te<S-1?z*(p[te]-(p[te+1]-p[te])/2-A):z*(p[te]-(p[te]-p[te-1])/2-A),oe=te<S-1?z*(p[te]+(p[te+1]-p[te])/2-A):z*(p[te]+(p[te]-p[te-1])/2-A));for(var ie=0;ie<u.length;ie+=2){var Q=u[ie],V=u[ie+1],se=b?(j+V)*S+(te+Q):j*S+te,re=y[se],ee=r.le(m,re),ae,fe,de,pe;if(ee<0)ae=_[0],fe=_[1],de=_[2],pe=_[3];else if(ee===T-1)ae=_[4*T-4],fe=_[4*T-3],de=_[4*T-2],pe=_[4*T-1];else{var W=(re-m[ee])/(m[ee+1]-m[ee]),ue=1-W,me=4*ee,be=4*(ee+1);ae=ue*_[me]+W*_[be],fe=ue*_[me+1]+W*_[be+1],de=ue*_[me+2]+W*_[be+2],pe=ue*_[me+3]+W*_[be+3]}F[4*X]=255*ae,F[4*X+1]=255*fe,F[4*X+2]=255*de,F[4*X+3]=255*pe,N[2*X]=J*.5+oe*.5,N[2*X+1]=H*.5+K*.5,G[2*X]=Q,G[2*X+1]=V,U[X]=j*S+te,X+=1}}}this.positionBuffer.update(N),this.weightBuffer.update(G),this.colorBuffer.update(F),this.idBuffer.update(U),l.free(N),l.free(F),l.free(G),l.free(U)},o.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function h(i,s){var p=i.gl,d=c(p,f.vertex,f.fragment),y=c(p,f.pickVertex,f.pickFragment),b=t(p),m=t(p),_=t(p),T=t(p),g=new a(i,d,y,b,m,_,T);return g.update(s),i.addObject(g),g}},{"./lib/shaders":272,"binary-search-bounds":96,"gl-buffer":259,"gl-shader":335,"iota-array":463,"typedarray-pool":595}],272:[function(e,v,M){var r=e("glslify");v.exports={fragment:r([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:r([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:273}],273:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],274:[function(e,v,M){var r=e("glslify"),n=e("gl-shader"),l=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),t=r([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),f=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];M.createShader=function(a){return n(a,l,c,null,f)},M.createPickShader=function(a){return n(a,l,t,null,f)}},{"gl-shader":335,glslify:276}],275:[function(e,v,M){v.exports=_;var r=e("gl-buffer"),n=e("gl-vao"),l=e("gl-texture2d"),c=new Uint8Array(4),t=new Float32Array(c.buffer);function f(T,g,A,k){return c[0]=k,c[1]=A,c[2]=g,c[3]=T,t[0]}var a=e("binary-search-bounds"),o=e("ndarray"),u=e("./lib/shaders"),h=u.createShader,i=u.createPickShader,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(T,g){for(var A=0,k=0;k<3;++k){var R=T[k]-g[k];A+=R*R}return Math.sqrt(A)}function d(T){for(var g=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],A=0;A<3;++A)g[0][A]=Math.max(T[0][A],g[0][A]),g[1][A]=Math.min(T[1][A],g[1][A]);return g}function y(T,g,A,k){this.arcLength=T,this.position=g,this.index=A,this.dataCoordinate=k}function b(T,g,A,k,R,L){this.gl=T,this.shader=g,this.pickShader=A,this.buffer=k,this.vao=R,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=L,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var m=b.prototype;m.isTransparent=function(){return this.hasAlpha},m.isOpaque=function(){return!this.hasAlpha},m.pickSlots=1,m.setPickBase=function(T){this.pickId=T},m.drawTransparent=m.draw=function(T){if(this.vertexCount){var g=this.gl,A=this.shader,k=this.vao;A.bind(),A.uniforms={model:T.model||s,view:T.view||s,projection:T.projection||s,clipBounds:d(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[g.drawingBufferWidth,g.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(g.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},m.drawPick=function(T){if(this.vertexCount){var g=this.gl,A=this.pickShader,k=this.vao;A.bind(),A.uniforms={model:T.model||s,view:T.view||s,projection:T.projection||s,pickId:this.pickId,clipBounds:d(this.clipBounds),screenShape:[g.drawingBufferWidth,g.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(g.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},m.update=function(T){var g,A;this.dirty=!0;var k=!!T.connectGaps;"dashScale"in T&&(this.dashScale=T.dashScale),this.hasAlpha=!1,"opacity"in T&&(this.opacity=+T.opacity,this.opacity<1&&(this.hasAlpha=!0));var R=[],L=[],z=[],E=0,S=0,C=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],D=T.position||T.positions;if(D){var F=T.color||T.colors||[0,0,0,1],N=T.lineWidth||1,G=!1;e:for(g=1;g<D.length;++g){var U=D[g-1],X=D[g];for(L.push(E),z.push(U.slice()),A=0;A<3;++A){if(isNaN(U[A])||isNaN(X[A])||!isFinite(U[A])||!isFinite(X[A])){if(!k&&R.length>0){for(var I=0;I<24;++I)R.push(R[R.length-12]);S+=2,G=!0}continue e}C[0][A]=Math.min(C[0][A],U[A],X[A]),C[1][A]=Math.max(C[1][A],U[A],X[A])}var B,j;Array.isArray(F[0])?(B=F.length>g-1?F[g-1]:F.length>0?F[F.length-1]:[0,0,0,1],j=F.length>g?F[g]:F.length>0?F[F.length-1]:[0,0,0,1]):B=j=F,B.length===3&&(B=[B[0],B[1],B[2],1]),j.length===3&&(j=[j[0],j[1],j[2],1]),!this.hasAlpha&&B[3]<1&&(this.hasAlpha=!0);var H;Array.isArray(N)?H=N.length>g-1?N[g-1]:N.length>0?N[N.length-1]:[0,0,0,1]:H=N;var K=E;if(E+=p(U,X),G){for(A=0;A<2;++A)R.push(U[0],U[1],U[2],X[0],X[1],X[2],K,H,B[0],B[1],B[2],B[3]);S+=2,G=!1}R.push(U[0],U[1],U[2],X[0],X[1],X[2],K,H,B[0],B[1],B[2],B[3],U[0],U[1],U[2],X[0],X[1],X[2],K,-H,B[0],B[1],B[2],B[3],X[0],X[1],X[2],U[0],U[1],U[2],E,-H,j[0],j[1],j[2],j[3],X[0],X[1],X[2],U[0],U[1],U[2],E,H,j[0],j[1],j[2],j[3]),S+=4}}if(this.buffer.update(R),L.push(E),z.push(D[D.length-1].slice()),this.bounds=C,this.vertexCount=S,this.points=z,this.arcLength=L,"dashes"in T){var te=T.dashes,J=te.slice();for(J.unshift(0),g=1;g<J.length;++g)J[g]=J[g-1]+J[g];var oe=o(new Array(256*4),[256,1,4]);for(g=0;g<256;++g){for(A=0;A<4;++A)oe.set(g,0,A,0);a.le(J,J[J.length-1]*g/255)&1?oe.set(g,0,0,0):oe.set(g,0,0,255)}this.texture.setPixels(oe)}},m.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},m.pick=function(T){if(!T||T.id!==this.pickId)return null;var g=f(T.value[0],T.value[1],T.value[2],0),A=a.le(this.arcLength,g);if(A<0)return null;if(A===this.arcLength.length-1)return new y(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),A);for(var k=this.points[A],R=this.points[Math.min(A+1,this.points.length-1)],L=(g-this.arcLength[A])/(this.arcLength[A+1]-this.arcLength[A]),z=1-L,E=[0,0,0],S=0;S<3;++S)E[S]=z*k[S]+L*R[S];var C=Math.min(L<.5?A:A+1,this.points.length-1);return new y(g,E,C,this.points[C])};function _(T){var g=T.gl||T.scene&&T.scene.gl,A=h(g);A.attributes.position.location=0,A.attributes.nextPosition.location=1,A.attributes.arcLength.location=2,A.attributes.lineWidth.location=3,A.attributes.color.location=4;var k=i(g);k.attributes.position.location=0,k.attributes.nextPosition.location=1,k.attributes.arcLength.location=2,k.attributes.lineWidth.location=3,k.attributes.color.location=4;for(var R=r(g),L=n(g,[{buffer:R,size:3,offset:0,stride:48},{buffer:R,size:3,offset:12,stride:48},{buffer:R,size:1,offset:24,stride:48},{buffer:R,size:1,offset:28,stride:48},{buffer:R,size:4,offset:32,stride:48}]),z=o(new Array(256*4),[256,1,4]),E=0;E<256*4;++E)z.data[E]=255;var S=l(g,z);S.wrap=g.REPEAT;var C=new b(g,A,k,R,L,S);return C.update(T),C}},{"./lib/shaders":274,"binary-search-bounds":96,"gl-buffer":259,"gl-texture2d":353,"gl-vao":358,ndarray:495}],276:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],277:[function(e,v,M){v.exports=r;function r(n,l){var c=l[0],t=l[1],f=l[2],a=l[3],o=l[4],u=l[5],h=l[6],i=l[7],s=l[8],p=l[9],d=l[10],y=l[11],b=l[12],m=l[13],_=l[14],T=l[15];return n[0]=u*(d*T-y*_)-p*(h*T-i*_)+m*(h*y-i*d),n[1]=-(t*(d*T-y*_)-p*(f*T-a*_)+m*(f*y-a*d)),n[2]=t*(h*T-i*_)-u*(f*T-a*_)+m*(f*i-a*h),n[3]=-(t*(h*y-i*d)-u*(f*y-a*d)+p*(f*i-a*h)),n[4]=-(o*(d*T-y*_)-s*(h*T-i*_)+b*(h*y-i*d)),n[5]=c*(d*T-y*_)-s*(f*T-a*_)+b*(f*y-a*d),n[6]=-(c*(h*T-i*_)-o*(f*T-a*_)+b*(f*i-a*h)),n[7]=c*(h*y-i*d)-o*(f*y-a*d)+s*(f*i-a*h),n[8]=o*(p*T-y*m)-s*(u*T-i*m)+b*(u*y-i*p),n[9]=-(c*(p*T-y*m)-s*(t*T-a*m)+b*(t*y-a*p)),n[10]=c*(u*T-i*m)-o*(t*T-a*m)+b*(t*i-a*u),n[11]=-(c*(u*y-i*p)-o*(t*y-a*p)+s*(t*i-a*u)),n[12]=-(o*(p*_-d*m)-s*(u*_-h*m)+b*(u*d-h*p)),n[13]=c*(p*_-d*m)-s*(t*_-f*m)+b*(t*d-f*p),n[14]=-(c*(u*_-h*m)-o*(t*_-f*m)+b*(t*h-f*u)),n[15]=c*(u*d-h*p)-o*(t*d-f*p)+s*(t*h-f*u),n}},{}],278:[function(e,v,M){v.exports=r;function r(n){var l=new Float32Array(16);return l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15],l}},{}],279:[function(e,v,M){v.exports=r;function r(n,l){return n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=l[3],n[4]=l[4],n[5]=l[5],n[6]=l[6],n[7]=l[7],n[8]=l[8],n[9]=l[9],n[10]=l[10],n[11]=l[11],n[12]=l[12],n[13]=l[13],n[14]=l[14],n[15]=l[15],n}},{}],280:[function(e,v,M){v.exports=r;function r(){var n=new Float32Array(16);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}},{}],281:[function(e,v,M){v.exports=r;function r(n){var l=n[0],c=n[1],t=n[2],f=n[3],a=n[4],o=n[5],u=n[6],h=n[7],i=n[8],s=n[9],p=n[10],d=n[11],y=n[12],b=n[13],m=n[14],_=n[15],T=l*o-c*a,g=l*u-t*a,A=l*h-f*a,k=c*u-t*o,R=c*h-f*o,L=t*h-f*u,z=i*b-s*y,E=i*m-p*y,S=i*_-d*y,C=s*m-p*b,D=s*_-d*b,F=p*_-d*m;return T*F-g*D+A*C+k*S-R*E+L*z}},{}],282:[function(e,v,M){v.exports=r;function r(n,l){var c=l[0],t=l[1],f=l[2],a=l[3],o=c+c,u=t+t,h=f+f,i=c*o,s=t*o,p=t*u,d=f*o,y=f*u,b=f*h,m=a*o,_=a*u,T=a*h;return n[0]=1-p-b,n[1]=s+T,n[2]=d-_,n[3]=0,n[4]=s-T,n[5]=1-i-b,n[6]=y+m,n[7]=0,n[8]=d+_,n[9]=y-m,n[10]=1-i-p,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}},{}],283:[function(e,v,M){v.exports=r;function r(n,l,c){var t,f,a,o=c[0],u=c[1],h=c[2],i=Math.sqrt(o*o+u*u+h*h);return Math.abs(i)<1e-6?null:(i=1/i,o*=i,u*=i,h*=i,t=Math.sin(l),f=Math.cos(l),a=1-f,n[0]=o*o*a+f,n[1]=u*o*a+h*t,n[2]=h*o*a-u*t,n[3]=0,n[4]=o*u*a-h*t,n[5]=u*u*a+f,n[6]=h*u*a+o*t,n[7]=0,n[8]=o*h*a+u*t,n[9]=u*h*a-o*t,n[10]=h*h*a+f,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}},{}],284:[function(e,v,M){v.exports=r;function r(n,l,c){var t=l[0],f=l[1],a=l[2],o=l[3],u=t+t,h=f+f,i=a+a,s=t*u,p=t*h,d=t*i,y=f*h,b=f*i,m=a*i,_=o*u,T=o*h,g=o*i;return n[0]=1-(y+m),n[1]=p+g,n[2]=d-T,n[3]=0,n[4]=p-g,n[5]=1-(s+m),n[6]=b+_,n[7]=0,n[8]=d+T,n[9]=b-_,n[10]=1-(s+y),n[11]=0,n[12]=c[0],n[13]=c[1],n[14]=c[2],n[15]=1,n}},{}],285:[function(e,v,M){v.exports=r;function r(n,l){return n[0]=l[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=l[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=l[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}},{}],286:[function(e,v,M){v.exports=r;function r(n,l){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=l[0],n[13]=l[1],n[14]=l[2],n[15]=1,n}},{}],287:[function(e,v,M){v.exports=r;function r(n,l){var c=Math.sin(l),t=Math.cos(l);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=t,n[6]=c,n[7]=0,n[8]=0,n[9]=-c,n[10]=t,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}},{}],288:[function(e,v,M){v.exports=r;function r(n,l){var c=Math.sin(l),t=Math.cos(l);return n[0]=t,n[1]=0,n[2]=-c,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=c,n[9]=0,n[10]=t,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}},{}],289:[function(e,v,M){v.exports=r;function r(n,l){var c=Math.sin(l),t=Math.cos(l);return n[0]=t,n[1]=c,n[2]=0,n[3]=0,n[4]=-c,n[5]=t,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}},{}],290:[function(e,v,M){v.exports=r;function r(n,l,c,t,f,a,o){var u=1/(c-l),h=1/(f-t),i=1/(a-o);return n[0]=a*2*u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a*2*h,n[6]=0,n[7]=0,n[8]=(c+l)*u,n[9]=(f+t)*h,n[10]=(o+a)*i,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*a*2*i,n[15]=0,n}},{}],291:[function(e,v,M){v.exports=r;function r(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}},{}],292:[function(e,v,M){v.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":277,"./clone":278,"./copy":279,"./create":280,"./determinant":281,"./fromQuat":282,"./fromRotation":283,"./fromRotationTranslation":284,"./fromScaling":285,"./fromTranslation":286,"./fromXRotation":287,"./fromYRotation":288,"./fromZRotation":289,"./frustum":290,"./identity":291,"./invert":293,"./lookAt":294,"./multiply":295,"./ortho":296,"./perspective":297,"./perspectiveFromFieldOfView":298,"./rotate":299,"./rotateX":300,"./rotateY":301,"./rotateZ":302,"./scale":303,"./str":304,"./translate":305,"./transpose":306}],293:[function(e,v,M){v.exports=r;function r(n,l){var c=l[0],t=l[1],f=l[2],a=l[3],o=l[4],u=l[5],h=l[6],i=l[7],s=l[8],p=l[9],d=l[10],y=l[11],b=l[12],m=l[13],_=l[14],T=l[15],g=c*u-t*o,A=c*h-f*o,k=c*i-a*o,R=t*h-f*u,L=t*i-a*u,z=f*i-a*h,E=s*m-p*b,S=s*_-d*b,C=s*T-y*b,D=p*_-d*m,F=p*T-y*m,N=d*T-y*_,G=g*N-A*F+k*D+R*C-L*S+z*E;return G?(G=1/G,n[0]=(u*N-h*F+i*D)*G,n[1]=(f*F-t*N-a*D)*G,n[2]=(m*z-_*L+T*R)*G,n[3]=(d*L-p*z-y*R)*G,n[4]=(h*C-o*N-i*S)*G,n[5]=(c*N-f*C+a*S)*G,n[6]=(_*k-b*z-T*A)*G,n[7]=(s*z-d*k+y*A)*G,n[8]=(o*F-u*C+i*E)*G,n[9]=(t*C-c*F-a*E)*G,n[10]=(b*L-m*k+T*g)*G,n[11]=(p*k-s*L-y*g)*G,n[12]=(u*S-o*D-h*E)*G,n[13]=(c*D-t*S+f*E)*G,n[14]=(m*A-b*R-_*g)*G,n[15]=(s*R-p*A+d*g)*G,n):null}},{}],294:[function(e,v,M){var r=e("./identity");v.exports=n;function n(l,c,t,f){var a,o,u,h,i,s,p,d,y,b,m=c[0],_=c[1],T=c[2],g=f[0],A=f[1],k=f[2],R=t[0],L=t[1],z=t[2];return Math.abs(m-R)<1e-6&&Math.abs(_-L)<1e-6&&Math.abs(T-z)<1e-6?r(l):(p=m-R,d=_-L,y=T-z,b=1/Math.sqrt(p*p+d*d+y*y),p*=b,d*=b,y*=b,a=A*y-k*d,o=k*p-g*y,u=g*d-A*p,b=Math.sqrt(a*a+o*o+u*u),b?(b=1/b,a*=b,o*=b,u*=b):(a=0,o=0,u=0),h=d*u-y*o,i=y*a-p*u,s=p*o-d*a,b=Math.sqrt(h*h+i*i+s*s),b?(b=1/b,h*=b,i*=b,s*=b):(h=0,i=0,s=0),l[0]=a,l[1]=h,l[2]=p,l[3]=0,l[4]=o,l[5]=i,l[6]=d,l[7]=0,l[8]=u,l[9]=s,l[10]=y,l[11]=0,l[12]=-(a*m+o*_+u*T),l[13]=-(h*m+i*_+s*T),l[14]=-(p*m+d*_+y*T),l[15]=1,l)}},{"./identity":291}],295:[function(e,v,M){v.exports=r;function r(n,l,c){var t=l[0],f=l[1],a=l[2],o=l[3],u=l[4],h=l[5],i=l[6],s=l[7],p=l[8],d=l[9],y=l[10],b=l[11],m=l[12],_=l[13],T=l[14],g=l[15],A=c[0],k=c[1],R=c[2],L=c[3];return n[0]=A*t+k*u+R*p+L*m,n[1]=A*f+k*h+R*d+L*_,n[2]=A*a+k*i+R*y+L*T,n[3]=A*o+k*s+R*b+L*g,A=c[4],k=c[5],R=c[6],L=c[7],n[4]=A*t+k*u+R*p+L*m,n[5]=A*f+k*h+R*d+L*_,n[6]=A*a+k*i+R*y+L*T,n[7]=A*o+k*s+R*b+L*g,A=c[8],k=c[9],R=c[10],L=c[11],n[8]=A*t+k*u+R*p+L*m,n[9]=A*f+k*h+R*d+L*_,n[10]=A*a+k*i+R*y+L*T,n[11]=A*o+k*s+R*b+L*g,A=c[12],k=c[13],R=c[14],L=c[15],n[12]=A*t+k*u+R*p+L*m,n[13]=A*f+k*h+R*d+L*_,n[14]=A*a+k*i+R*y+L*T,n[15]=A*o+k*s+R*b+L*g,n}},{}],296:[function(e,v,M){v.exports=r;function r(n,l,c,t,f,a,o){var u=1/(l-c),h=1/(t-f),i=1/(a-o);return n[0]=-2*u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*h,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*i,n[11]=0,n[12]=(l+c)*u,n[13]=(f+t)*h,n[14]=(o+a)*i,n[15]=1,n}},{}],297:[function(e,v,M){v.exports=r;function r(n,l,c,t,f){var a=1/Math.tan(l/2),o=1/(t-f);return n[0]=a/c,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(f+t)*o,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*f*t*o,n[15]=0,n}},{}],298:[function(e,v,M){v.exports=r;function r(n,l,c,t){var f=Math.tan(l.upDegrees*Math.PI/180),a=Math.tan(l.downDegrees*Math.PI/180),o=Math.tan(l.leftDegrees*Math.PI/180),u=Math.tan(l.rightDegrees*Math.PI/180),h=2/(o+u),i=2/(f+a);return n[0]=h,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=i,n[6]=0,n[7]=0,n[8]=-((o-u)*h*.5),n[9]=(f-a)*i*.5,n[10]=t/(c-t),n[11]=-1,n[12]=0,n[13]=0,n[14]=t*c/(c-t),n[15]=0,n}},{}],299:[function(e,v,M){v.exports=r;function r(n,l,c,t){var f=t[0],a=t[1],o=t[2],u=Math.sqrt(f*f+a*a+o*o),h,i,s,p,d,y,b,m,_,T,g,A,k,R,L,z,E,S,C,D,F,N,G,U;return Math.abs(u)<1e-6?null:(u=1/u,f*=u,a*=u,o*=u,h=Math.sin(c),i=Math.cos(c),s=1-i,p=l[0],d=l[1],y=l[2],b=l[3],m=l[4],_=l[5],T=l[6],g=l[7],A=l[8],k=l[9],R=l[10],L=l[11],z=f*f*s+i,E=a*f*s+o*h,S=o*f*s-a*h,C=f*a*s-o*h,D=a*a*s+i,F=o*a*s+f*h,N=f*o*s+a*h,G=a*o*s-f*h,U=o*o*s+i,n[0]=p*z+m*E+A*S,n[1]=d*z+_*E+k*S,n[2]=y*z+T*E+R*S,n[3]=b*z+g*E+L*S,n[4]=p*C+m*D+A*F,n[5]=d*C+_*D+k*F,n[6]=y*C+T*D+R*F,n[7]=b*C+g*D+L*F,n[8]=p*N+m*G+A*U,n[9]=d*N+_*G+k*U,n[10]=y*N+T*G+R*U,n[11]=b*N+g*G+L*U,l!==n&&(n[12]=l[12],n[13]=l[13],n[14]=l[14],n[15]=l[15]),n)}},{}],300:[function(e,v,M){v.exports=r;function r(n,l,c){var t=Math.sin(c),f=Math.cos(c),a=l[4],o=l[5],u=l[6],h=l[7],i=l[8],s=l[9],p=l[10],d=l[11];return l!==n&&(n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=l[3],n[12]=l[12],n[13]=l[13],n[14]=l[14],n[15]=l[15]),n[4]=a*f+i*t,n[5]=o*f+s*t,n[6]=u*f+p*t,n[7]=h*f+d*t,n[8]=i*f-a*t,n[9]=s*f-o*t,n[10]=p*f-u*t,n[11]=d*f-h*t,n}},{}],301:[function(e,v,M){v.exports=r;function r(n,l,c){var t=Math.sin(c),f=Math.cos(c),a=l[0],o=l[1],u=l[2],h=l[3],i=l[8],s=l[9],p=l[10],d=l[11];return l!==n&&(n[4]=l[4],n[5]=l[5],n[6]=l[6],n[7]=l[7],n[12]=l[12],n[13]=l[13],n[14]=l[14],n[15]=l[15]),n[0]=a*f-i*t,n[1]=o*f-s*t,n[2]=u*f-p*t,n[3]=h*f-d*t,n[8]=a*t+i*f,n[9]=o*t+s*f,n[10]=u*t+p*f,n[11]=h*t+d*f,n}},{}],302:[function(e,v,M){v.exports=r;function r(n,l,c){var t=Math.sin(c),f=Math.cos(c),a=l[0],o=l[1],u=l[2],h=l[3],i=l[4],s=l[5],p=l[6],d=l[7];return l!==n&&(n[8]=l[8],n[9]=l[9],n[10]=l[10],n[11]=l[11],n[12]=l[12],n[13]=l[13],n[14]=l[14],n[15]=l[15]),n[0]=a*f+i*t,n[1]=o*f+s*t,n[2]=u*f+p*t,n[3]=h*f+d*t,n[4]=i*f-a*t,n[5]=s*f-o*t,n[6]=p*f-u*t,n[7]=d*f-h*t,n}},{}],303:[function(e,v,M){v.exports=r;function r(n,l,c){var t=c[0],f=c[1],a=c[2];return n[0]=l[0]*t,n[1]=l[1]*t,n[2]=l[2]*t,n[3]=l[3]*t,n[4]=l[4]*f,n[5]=l[5]*f,n[6]=l[6]*f,n[7]=l[7]*f,n[8]=l[8]*a,n[9]=l[9]*a,n[10]=l[10]*a,n[11]=l[11]*a,n[12]=l[12],n[13]=l[13],n[14]=l[14],n[15]=l[15],n}},{}],304:[function(e,v,M){v.exports=r;function r(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"}},{}],305:[function(e,v,M){v.exports=r;function r(n,l,c){var t=c[0],f=c[1],a=c[2],o,u,h,i,s,p,d,y,b,m,_,T;return l===n?(n[12]=l[0]*t+l[4]*f+l[8]*a+l[12],n[13]=l[1]*t+l[5]*f+l[9]*a+l[13],n[14]=l[2]*t+l[6]*f+l[10]*a+l[14],n[15]=l[3]*t+l[7]*f+l[11]*a+l[15]):(o=l[0],u=l[1],h=l[2],i=l[3],s=l[4],p=l[5],d=l[6],y=l[7],b=l[8],m=l[9],_=l[10],T=l[11],n[0]=o,n[1]=u,n[2]=h,n[3]=i,n[4]=s,n[5]=p,n[6]=d,n[7]=y,n[8]=b,n[9]=m,n[10]=_,n[11]=T,n[12]=o*t+s*f+b*a+l[12],n[13]=u*t+p*f+m*a+l[13],n[14]=h*t+d*f+_*a+l[14],n[15]=i*t+y*f+T*a+l[15]),n}},{}],306:[function(e,v,M){v.exports=r;function r(n,l){if(n===l){var c=l[1],t=l[2],f=l[3],a=l[6],o=l[7],u=l[11];n[1]=l[4],n[2]=l[8],n[3]=l[12],n[4]=c,n[6]=l[9],n[7]=l[13],n[8]=t,n[9]=a,n[11]=l[14],n[12]=f,n[13]=o,n[14]=u}else n[0]=l[0],n[1]=l[4],n[2]=l[8],n[3]=l[12],n[4]=l[1],n[5]=l[5],n[6]=l[9],n[7]=l[13],n[8]=l[2],n[9]=l[6],n[10]=l[10],n[11]=l[14],n[12]=l[3],n[13]=l[7],n[14]=l[11],n[15]=l[15];return n}},{}],307:[function(e,v,M){var r=e("barycentric"),n=e("polytope-closest-point/lib/closest_point_2d.js");v.exports=a;function l(o,u){for(var h=[0,0,0,0],i=0;i<4;++i)for(var s=0;s<4;++s)h[s]+=o[4*i+s]*u[i];return h}function c(o,u,h,i,s){for(var p=l(i,l(h,l(u,[o[0],o[1],o[2],1]))),d=0;d<3;++d)p[d]/=p[3];return[.5*s[0]*(1+p[0]),.5*s[1]*(1-p[1])]}function t(o,u){if(o.length===2){for(var h=0,i=0,s=0;s<2;++s)h+=Math.pow(u[s]-o[0][s],2),i+=Math.pow(u[s]-o[1][s],2);return h=Math.sqrt(h),i=Math.sqrt(i),h+i<1e-6?[1,0]:[i/(h+i),h/(i+h)]}else if(o.length===3){var p=[0,0];return n(o[0],o[1],o[2],u,p),r(o,p)}return[]}function f(o,u){for(var h=[0,0,0],i=0;i<o.length;++i)for(var s=o[i],p=u[i],d=0;d<3;++d)h[d]+=p*s[d];return h}function a(o,u,h,i,s,p){if(o.length===1)return[0,o[0].slice()];for(var d=new Array(o.length),y=0;y<o.length;++y)d[y]=c(o[y],h,i,s,p);for(var b=0,m=1/0,y=0;y<d.length;++y){for(var _=0,T=0;T<2;++T)_+=Math.pow(d[y][T]-u[T],2);_<m&&(m=_,b=y)}for(var g=t(d,u),A=0,y=0;y<3;++y){if(g[y]<-.001||g[y]>1.0001)return null;A+=g[y]}return Math.abs(A-1)>.001?null:[b,f(o,g),g]}},{barycentric:78,"polytope-closest-point/lib/closest_point_2d.js":525}],308:[function(e,v,M){var r=e("glslify"),n=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),l=r([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),t=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),f=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),a=r([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),o=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),u=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),h=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),i=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),s=r([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);M.meshShader={vertex:n,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},M.wireShader={vertex:c,fragment:t,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},M.pointShader={vertex:f,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},M.pickShader={vertex:o,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},M.pointPickShader={vertex:h,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},M.contourShader={vertex:i,fragment:s,attributes:[{name:"position",type:"vec3"}]}},{glslify:310}],309:[function(e,v,M){var r=1e-6,n=1e-6,l=e("gl-shader"),c=e("gl-buffer"),t=e("gl-vao"),f=e("gl-texture2d"),a=e("normals"),o=e("gl-mat4/multiply"),u=e("gl-mat4/invert"),h=e("ndarray"),i=e("colormap"),s=e("simplicial-complex-contour"),p=e("typedarray-pool"),d=e("./lib/shaders"),y=e("./lib/closest-point"),b=d.meshShader,m=d.wireShader,_=d.pointShader,T=d.pickShader,g=d.pointPickShader,A=d.contourShader,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function R(I,B,j,H,K,te,J,oe,ie,Q,V,se,re,ee,ae,fe,de,pe,W,ue,me,be,ke,Pe,je,ze,Ze){this.gl=I,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=B,this.dirty=!0,this.triShader=j,this.lineShader=H,this.pointShader=K,this.pickShader=te,this.pointPickShader=J,this.contourShader=oe,this.trianglePositions=ie,this.triangleColors=V,this.triangleNormals=re,this.triangleUVs=se,this.triangleIds=Q,this.triangleVAO=ee,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ae,this.edgeColors=de,this.edgeUVs=pe,this.edgeIds=fe,this.edgeVAO=W,this.edgeCount=0,this.pointPositions=ue,this.pointColors=be,this.pointUVs=ke,this.pointSizes=Pe,this.pointIds=me,this.pointVAO=je,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=ze,this.contourVAO=Ze,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=k,this._view=k,this._projection=k,this._resolution=[1,1]}var L=R.prototype;L.isOpaque=function(){return!this.hasAlpha},L.isTransparent=function(){return this.hasAlpha},L.pickSlots=1,L.setPickBase=function(I){this.pickId=I};function z(I,B){if(!B||!B.length)return 1;for(var j=0;j<B.length;++j){if(B.length<2)return 1;if(B[j][0]===I)return B[j][1];if(B[j][0]>I&&j>0){var H=(B[j][0]-I)/(B[j][0]-B[j-1][0]);return B[j][1]*(1-H)+H*B[j-1][1]}}return 1}function E(I,B){for(var j=i({colormap:I,nshades:256,format:"rgba"}),H=new Uint8Array(256*4),K=0;K<256;++K){for(var te=j[K],J=0;J<3;++J)H[4*K+J]=te[J];B?H[4*K+3]=255*z(K/255,B):H[4*K+3]=255*te[3]}return h(H,[256,256,4],[4,0,1])}function S(I){for(var B=I.length,j=new Array(B),H=0;H<B;++H)j[H]=I[H][2];return j}L.highlight=function(I){if(!I||!this.contourEnable){this.contourCount=0;return}for(var B=s(this.cells,this.intensity,I.intensity),j=B.cells,H=B.vertexIds,K=B.vertexWeights,te=j.length,J=p.mallocFloat32(2*3*te),oe=0,ie=0;ie<te;++ie)for(var Q=j[ie],V=0;V<2;++V){var se=Q[0];Q.length===2&&(se=Q[V]);for(var re=H[se][0],ee=H[se][1],ae=K[se],fe=1-ae,de=this.positions[re],pe=this.positions[ee],W=0;W<3;++W)J[oe++]=ae*de[W]+fe*pe[W]}this.contourCount=oe/3|0,this.contourPositions.update(J.subarray(0,oe)),p.free(J)},L.update=function(I){I=I||{};var B=this.gl;this.dirty=!0,"contourEnable"in I&&(this.contourEnable=I.contourEnable),"contourColor"in I&&(this.contourColor=I.contourColor),"lineWidth"in I&&(this.lineWidth=I.lineWidth),"lightPosition"in I&&(this.lightPosition=I.lightPosition),this.hasAlpha=!1,"opacity"in I&&(this.opacity=I.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in I&&(this.opacityscale=I.opacityscale,this.hasAlpha=!0),"ambient"in I&&(this.ambientLight=I.ambient),"diffuse"in I&&(this.diffuseLight=I.diffuse),"specular"in I&&(this.specularLight=I.specular),"roughness"in I&&(this.roughness=I.roughness),"fresnel"in I&&(this.fresnel=I.fresnel),I.texture?(this.texture.dispose(),this.texture=f(B,I.texture)):I.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=B.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=B.LINEAR,this.texture.setPixels(E(I.colormap,this.opacityscale)),this.texture.generateMipmap());var j=I.cells,H=I.positions;if(!(!H||!j)){var K=[],te=[],J=[],oe=[],ie=[],Q=[],V=[],se=[],re=[],ee=[],ae=[],fe=[],de=[],pe=[];this.cells=j,this.positions=H;var W=I.vertexNormals,ue=I.cellNormals,me=I.vertexNormalsEpsilon===void 0?r:I.vertexNormalsEpsilon,be=I.faceNormalsEpsilon===void 0?n:I.faceNormalsEpsilon;I.useFacetNormals&&!ue&&(ue=a.faceNormals(j,H,be)),!ue&&!W&&(W=a.vertexNormals(j,H,me));var ke=I.vertexColors,Pe=I.cellColors,je=I.meshColor||[1,1,1,1],ze=I.vertexUVs,Ze=I.vertexIntensity,tt=I.cellUVs,Ce=I.cellIntensity,Ae=1/0,Ne=-1/0;if(!ze&&!tt)if(Ze)if(I.vertexIntensityBounds)Ae=+I.vertexIntensityBounds[0],Ne=+I.vertexIntensityBounds[1];else for(var qe=0;qe<Ze.length;++qe){var At=Ze[qe];Ae=Math.min(Ae,At),Ne=Math.max(Ne,At)}else if(Ce)if(I.cellIntensityBounds)Ae=+I.cellIntensityBounds[0],Ne=+I.cellIntensityBounds[1];else for(var qe=0;qe<Ce.length;++qe){var At=Ce[qe];Ae=Math.min(Ae,At),Ne=Math.max(Ne,At)}else for(var qe=0;qe<H.length;++qe){var At=H[qe][2];Ae=Math.min(Ae,At),Ne=Math.max(Ne,At)}Ze?this.intensity=Ze:Ce?this.intensity=Ce:this.intensity=S(H),this.pickVertex=!(Ce||Pe);var kt=I.pointSizes,Ve=I.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var qe=0;qe<H.length;++qe)for(var ft=H[qe],St=0;St<3;++St)isNaN(ft[St])||!isFinite(ft[St])||(this.bounds[0][St]=Math.min(this.bounds[0][St],ft[St]),this.bounds[1][St]=Math.max(this.bounds[1][St],ft[St]));var Wt=0,Qt=0,zt=0;e:for(var qe=0;qe<j.length;++qe){var $t=j[qe];switch($t.length){case 1:for(var rr=$t[0],ft=H[rr],St=0;St<3;++St)if(isNaN(ft[St])||!isFinite(ft[St]))continue e;ee.push(ft[0],ft[1],ft[2]);var Pt;ke?Pt=ke[rr]:Pe?Pt=Pe[qe]:Pt=je,this.opacityscale&&Ze?te.push(Pt[0],Pt[1],Pt[2],this.opacity*z((Ze[rr]-Ae)/(Ne-Ae),this.opacityscale)):Pt.length===3?ae.push(Pt[0],Pt[1],Pt[2],this.opacity):(ae.push(Pt[0],Pt[1],Pt[2],Pt[3]*this.opacity),Pt[3]<1&&(this.hasAlpha=!0));var Lt;ze?Lt=ze[rr]:Ze?Lt=[(Ze[rr]-Ae)/(Ne-Ae),0]:tt?Lt=tt[qe]:Ce?Lt=[(Ce[qe]-Ae)/(Ne-Ae),0]:Lt=[(ft[2]-Ae)/(Ne-Ae),0],fe.push(Lt[0],Lt[1]),kt?de.push(kt[rr]):de.push(Ve),pe.push(qe),zt+=1;break;case 2:for(var St=0;St<2;++St)for(var rr=$t[St],ft=H[rr],dt=0;dt<3;++dt)if(isNaN(ft[dt])||!isFinite(ft[dt]))continue e;for(var St=0;St<2;++St){var rr=$t[St],ft=H[rr];Q.push(ft[0],ft[1],ft[2]);var Pt;ke?Pt=ke[rr]:Pe?Pt=Pe[qe]:Pt=je,this.opacityscale&&Ze?te.push(Pt[0],Pt[1],Pt[2],this.opacity*z((Ze[rr]-Ae)/(Ne-Ae),this.opacityscale)):Pt.length===3?V.push(Pt[0],Pt[1],Pt[2],this.opacity):(V.push(Pt[0],Pt[1],Pt[2],Pt[3]*this.opacity),Pt[3]<1&&(this.hasAlpha=!0));var Lt;ze?Lt=ze[rr]:Ze?Lt=[(Ze[rr]-Ae)/(Ne-Ae),0]:tt?Lt=tt[qe]:Ce?Lt=[(Ce[qe]-Ae)/(Ne-Ae),0]:Lt=[(ft[2]-Ae)/(Ne-Ae),0],se.push(Lt[0],Lt[1]),re.push(qe)}Qt+=1;break;case 3:for(var St=0;St<3;++St)for(var rr=$t[St],ft=H[rr],dt=0;dt<3;++dt)if(isNaN(ft[dt])||!isFinite(ft[dt]))continue e;for(var St=0;St<3;++St){var rr=$t[2-St],ft=H[rr];K.push(ft[0],ft[1],ft[2]);var Pt;ke?Pt=ke[rr]:Pe?Pt=Pe[qe]:Pt=je,Pt?this.opacityscale&&Ze?te.push(Pt[0],Pt[1],Pt[2],this.opacity*z((Ze[rr]-Ae)/(Ne-Ae),this.opacityscale)):Pt.length===3?te.push(Pt[0],Pt[1],Pt[2],this.opacity):(te.push(Pt[0],Pt[1],Pt[2],Pt[3]*this.opacity),Pt[3]<1&&(this.hasAlpha=!0)):te.push(.5,.5,.5,1);var Lt;ze?Lt=ze[rr]:Ze?Lt=[(Ze[rr]-Ae)/(Ne-Ae),0]:tt?Lt=tt[qe]:Ce?Lt=[(Ce[qe]-Ae)/(Ne-Ae),0]:Lt=[(ft[2]-Ae)/(Ne-Ae),0],oe.push(Lt[0],Lt[1]);var lt;W?lt=W[rr]:lt=ue[qe],J.push(lt[0],lt[1],lt[2]),ie.push(qe)}Wt+=1;break}}this.pointCount=zt,this.edgeCount=Qt,this.triangleCount=Wt,this.pointPositions.update(ee),this.pointColors.update(ae),this.pointUVs.update(fe),this.pointSizes.update(de),this.pointIds.update(new Uint32Array(pe)),this.edgePositions.update(Q),this.edgeColors.update(V),this.edgeUVs.update(se),this.edgeIds.update(new Uint32Array(re)),this.trianglePositions.update(K),this.triangleColors.update(te),this.triangleUVs.update(oe),this.triangleNormals.update(J),this.triangleIds.update(new Uint32Array(ie))}},L.drawTransparent=L.draw=function(I){I=I||{};for(var B=this.gl,j=I.model||k,H=I.view||k,K=I.projection||k,te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],J=0;J<3;++J)te[0][J]=Math.max(te[0][J],this.clipBounds[0][J]),te[1][J]=Math.min(te[1][J],this.clipBounds[1][J]);var oe={model:j,view:H,projection:K,inverseModel:k.slice(),clipBounds:te,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};oe.inverseModel=u(oe.inverseModel,oe.model),B.disable(B.CULL_FACE),this.texture.bind(0);var ie=new Array(16);o(ie,oe.view,oe.model),o(ie,oe.projection,ie),u(ie,ie);for(var J=0;J<3;++J)oe.eyePosition[J]=ie[12+J]/ie[15];for(var Q=ie[15],J=0;J<3;++J)Q+=this.lightPosition[J]*ie[4*J+3];for(var J=0;J<3;++J){for(var V=ie[12+J],se=0;se<3;++se)V+=ie[4*se+J]*this.lightPosition[se];oe.lightPosition[J]=V/Q}if(this.triangleCount>0){var re=this.triShader;re.bind(),re.uniforms=oe,this.triangleVAO.bind(),B.drawArrays(B.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var re=this.lineShader;re.bind(),re.uniforms=oe,this.edgeVAO.bind(),B.lineWidth(this.lineWidth*this.pixelRatio),B.drawArrays(B.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var re=this.pointShader;re.bind(),re.uniforms=oe,this.pointVAO.bind(),B.drawArrays(B.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var re=this.contourShader;re.bind(),re.uniforms=oe,this.contourVAO.bind(),B.drawArrays(B.LINES,0,this.contourCount),this.contourVAO.unbind()}},L.drawPick=function(I){I=I||{};for(var B=this.gl,j=I.model||k,H=I.view||k,K=I.projection||k,te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],J=0;J<3;++J)te[0][J]=Math.max(te[0][J],this.clipBounds[0][J]),te[1][J]=Math.min(te[1][J],this.clipBounds[1][J]);this._model=[].slice.call(j),this._view=[].slice.call(H),this._projection=[].slice.call(K),this._resolution=[B.drawingBufferWidth,B.drawingBufferHeight];var oe={model:j,view:H,projection:K,clipBounds:te,pickId:this.pickId/255},ie=this.pickShader;if(ie.bind(),ie.uniforms=oe,this.triangleCount>0&&(this.triangleVAO.bind(),B.drawArrays(B.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),B.lineWidth(this.lineWidth*this.pixelRatio),B.drawArrays(B.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var ie=this.pointPickShader;ie.bind(),ie.uniforms=oe,this.pointVAO.bind(),B.drawArrays(B.POINTS,0,this.pointCount),this.pointVAO.unbind()}},L.pick=function(I){if(!I||I.id!==this.pickId)return null;for(var B=I.value[0]+256*I.value[1]+65536*I.value[2],j=this.cells[B],H=this.positions,K=new Array(j.length),te=0;te<j.length;++te)K[te]=H[j[te]];var J=I.coord[0],oe=I.coord[1];if(!this.pickVertex){var ie=this.positions[j[0]],Q=this.positions[j[1]],V=this.positions[j[2]],se=[(ie[0]+Q[0]+V[0])/3,(ie[1]+Q[1]+V[1])/3,(ie[2]+Q[2]+V[2])/3];return{_cellCenter:!0,position:[J,oe],index:B,cell:j,cellId:B,intensity:this.intensity[B],dataCoordinate:se}}var re=y(K,[J*this.pixelRatio,this._resolution[1]-oe*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!re)return null;for(var ee=re[2],ae=0,te=0;te<j.length;++te)ae+=ee[te]*this.intensity[j[te]];return{position:re[1],index:j[re[0]],cell:j,cellId:B,intensity:ae,dataCoordinate:this.positions[j[re[0]]]}},L.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function C(I){var B=l(I,b.vertex,b.fragment);return B.attributes.position.location=0,B.attributes.color.location=2,B.attributes.uv.location=3,B.attributes.normal.location=4,B}function D(I){var B=l(I,m.vertex,m.fragment);return B.attributes.position.location=0,B.attributes.color.location=2,B.attributes.uv.location=3,B}function F(I){var B=l(I,_.vertex,_.fragment);return B.attributes.position.location=0,B.attributes.color.location=2,B.attributes.uv.location=3,B.attributes.pointSize.location=4,B}function N(I){var B=l(I,T.vertex,T.fragment);return B.attributes.position.location=0,B.attributes.id.location=1,B}function G(I){var B=l(I,g.vertex,g.fragment);return B.attributes.position.location=0,B.attributes.id.location=1,B.attributes.pointSize.location=4,B}function U(I){var B=l(I,A.vertex,A.fragment);return B.attributes.position.location=0,B}function X(I,B){arguments.length===1&&(B=I,I=B.gl);var j=I.getExtension("OES_standard_derivatives")||I.getExtension("MOZ_OES_standard_derivatives")||I.getExtension("WEBKIT_OES_standard_derivatives");if(!j)throw new Error("derivatives not supported");var H=C(I),K=D(I),te=F(I),J=N(I),oe=G(I),ie=U(I),Q=f(I,h(new Uint8Array([255,255,255,255]),[1,1,4]));Q.generateMipmap(),Q.minFilter=I.LINEAR_MIPMAP_LINEAR,Q.magFilter=I.LINEAR;var V=c(I),se=c(I),re=c(I),ee=c(I),ae=c(I),fe=t(I,[{buffer:V,type:I.FLOAT,size:3},{buffer:ae,type:I.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:se,type:I.FLOAT,size:4},{buffer:re,type:I.FLOAT,size:2},{buffer:ee,type:I.FLOAT,size:3}]),de=c(I),pe=c(I),W=c(I),ue=c(I),me=t(I,[{buffer:de,type:I.FLOAT,size:3},{buffer:ue,type:I.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:pe,type:I.FLOAT,size:4},{buffer:W,type:I.FLOAT,size:2}]),be=c(I),ke=c(I),Pe=c(I),je=c(I),ze=c(I),Ze=t(I,[{buffer:be,type:I.FLOAT,size:3},{buffer:ze,type:I.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ke,type:I.FLOAT,size:4},{buffer:Pe,type:I.FLOAT,size:2},{buffer:je,type:I.FLOAT,size:1}]),tt=c(I),Ce=t(I,[{buffer:tt,type:I.FLOAT,size:3}]),Ae=new R(I,Q,H,K,te,J,oe,ie,V,ae,se,re,ee,fe,de,ue,pe,W,me,be,ze,ke,Pe,je,Ze,tt,Ce);return Ae.update(B),Ae}v.exports=X},{"./lib/closest-point":307,"./lib/shaders":308,colormap:131,"gl-buffer":259,"gl-mat4/invert":293,"gl-mat4/multiply":295,"gl-shader":335,"gl-texture2d":353,"gl-vao":358,ndarray:495,normals:498,"simplicial-complex-contour":556,"typedarray-pool":595}],310:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],311:[function(e,v,M){v.exports=f;var r=e("gl-buffer"),n=e("gl-shader"),l=e("./shaders");function c(a,o,u){this.plot=a,this.vbo=o,this.shader=u}var t=c.prototype;t.bind=function(){var a=this.shader;this.vbo.bind(),this.shader.bind(),a.attributes.coord.pointer(),a.uniforms.screenBox=this.plot.screenBox},t.drawBox=function(){var a=[0,0],o=[0,0];return function(u,h,i,s,p){var d=this.plot,y=this.shader,b=d.gl;a[0]=u,a[1]=h,o[0]=i,o[1]=s,y.uniforms.lo=a,y.uniforms.hi=o,y.uniforms.color=p,b.drawArrays(b.TRIANGLE_STRIP,0,4)}}(),t.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(a){var o=a.gl,u=r(o,[0,0,0,1,1,0,1,1]),h=n(o,l.boxVert,l.lineFrag);return new c(a,u,h)}},{"./shaders":314,"gl-buffer":259,"gl-shader":335}],312:[function(e,v,M){v.exports=o;var r=e("gl-buffer"),n=e("gl-shader"),l=e("binary-search-bounds"),c=e("./shaders");function t(u,h,i,s){this.plot=u,this.vbo=h,this.shader=i,this.tickShader=s,this.ticks=[[],[]]}function f(u,h){return u-h}var a=t.prototype;a.draw=function(){var u=[0,0],h=[0,0],i=[0,0];return function(){for(var s=this.plot,p=this.vbo,d=this.shader,y=this.ticks,b=s.gl,m=s._tickBounds,_=s.dataBox,T=s.viewBox,g=s.gridLineWidth,A=s.gridLineColor,k=s.gridLineEnable,R=s.pixelRatio,L=0;L<2;++L){var z=m[L],E=m[L+2],S=E-z,C=.5*(_[L+2]+_[L]),D=_[L+2]-_[L];h[L]=2*S/D,u[L]=2*(z-C)/D}d.bind(),p.bind(),d.attributes.dataCoord.pointer(),d.uniforms.dataShift=u,d.uniforms.dataScale=h;for(var F=0,L=0;L<2;++L){i[0]=i[1]=0,i[L]=1,d.uniforms.dataAxis=i,d.uniforms.lineWidth=g[L]/(T[L+2]-T[L])*R,d.uniforms.color=A[L];var N=y[L].length*6;k[L]&&N&&b.drawArrays(b.TRIANGLES,F,N),F+=N}}}(),a.drawTickMarks=function(){var u=[0,0],h=[0,0],i=[1,0],s=[0,1],p=[0,0],d=[0,0];return function(){for(var y=this.plot,b=this.vbo,m=this.tickShader,_=this.ticks,T=y.gl,g=y._tickBounds,A=y.dataBox,k=y.viewBox,R=y.pixelRatio,L=y.screenBox,z=L[2]-L[0],E=L[3]-L[1],S=k[2]-k[0],C=k[3]-k[1],D=0;D<2;++D){var F=g[D],N=g[D+2],G=N-F,U=.5*(A[D+2]+A[D]),X=A[D+2]-A[D];h[D]=2*G/X,u[D]=2*(F-U)/X}h[0]*=S/z,u[0]*=S/z,h[1]*=C/E,u[1]*=C/E,m.bind(),b.bind(),m.attributes.dataCoord.pointer();var I=m.uniforms;I.dataShift=u,I.dataScale=h;var B=y.tickMarkLength,j=y.tickMarkWidth,H=y.tickMarkColor,K=0,te=_[0].length*6,J=Math.min(l.ge(_[0],(A[0]-g[0])/(g[2]-g[0]),f),_[0].length),oe=Math.min(l.gt(_[0],(A[2]-g[0])/(g[2]-g[0]),f),_[0].length),ie=K+6*J,Q=6*Math.max(0,oe-J),V=Math.min(l.ge(_[1],(A[1]-g[1])/(g[3]-g[1]),f),_[1].length),se=Math.min(l.gt(_[1],(A[3]-g[1])/(g[3]-g[1]),f),_[1].length),re=te+6*V,ee=6*Math.max(0,se-V);p[0]=2*(k[0]-B[1])/z-1,p[1]=(k[3]+k[1])/E-1,d[0]=B[1]*R/z,d[1]=j[1]*R/E,ee&&(I.color=H[1],I.tickScale=d,I.dataAxis=s,I.screenOffset=p,T.drawArrays(T.TRIANGLES,re,ee)),p[0]=(k[2]+k[0])/z-1,p[1]=2*(k[1]-B[0])/E-1,d[0]=j[0]*R/z,d[1]=B[0]*R/E,Q&&(I.color=H[0],I.tickScale=d,I.dataAxis=i,I.screenOffset=p,T.drawArrays(T.TRIANGLES,ie,Q)),p[0]=2*(k[2]+B[3])/z-1,p[1]=(k[3]+k[1])/E-1,d[0]=B[3]*R/z,d[1]=j[3]*R/E,ee&&(I.color=H[3],I.tickScale=d,I.dataAxis=s,I.screenOffset=p,T.drawArrays(T.TRIANGLES,re,ee)),p[0]=(k[2]+k[0])/z-1,p[1]=2*(k[3]+B[2])/E-1,d[0]=j[2]*R/z,d[1]=B[2]*R/E,Q&&(I.color=H[2],I.tickScale=d,I.dataAxis=i,I.screenOffset=p,T.drawArrays(T.TRIANGLES,ie,Q))}}(),a.update=function(){var u=[1,1,-1,-1,1,-1],h=[1,-1,1,1,-1,-1];return function(i){var s=i.ticks,p=i.bounds,d=new Float32Array(6*3*(s[0].length+s[1].length));this.plot.zeroLineEnable;for(var y=0,b=[[],[]],m=0;m<2;++m)for(var _=b[m],T=s[m],g=p[m],A=p[m+2],k=0;k<T.length;++k){var R=(T[k].x-g)/(A-g);_.push(R);for(var L=0;L<6;++L)d[y++]=R,d[y++]=u[L],d[y++]=h[L]}this.ticks=b,this.vbo.update(d)}}(),a.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function o(u){var h=u.gl,i=r(h),s=n(h,c.gridVert,c.gridFrag),p=n(h,c.tickVert,c.gridFrag),d=new t(u,i,s,p);return d}},{"./shaders":314,"binary-search-bounds":96,"gl-buffer":259,"gl-shader":335}],313:[function(e,v,M){v.exports=f;var r=e("gl-buffer"),n=e("gl-shader"),l=e("./shaders");function c(a,o,u){this.plot=a,this.vbo=o,this.shader=u}var t=c.prototype;t.bind=function(){var a=this.shader;this.vbo.bind(),this.shader.bind(),a.attributes.coord.pointer(),a.uniforms.screenBox=this.plot.screenBox},t.drawLine=function(){var a=[0,0],o=[0,0];return function(u,h,i,s,p,d){var y=this.plot,b=this.shader,m=y.gl;a[0]=u,a[1]=h,o[0]=i,o[1]=s,b.uniforms.start=a,b.uniforms.end=o,b.uniforms.width=p*y.pixelRatio,b.uniforms.color=d,m.drawArrays(m.TRIANGLE_STRIP,0,4)}}(),t.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(a){var o=a.gl,u=r(o,[-1,-1,-1,1,1,-1,1,1]),h=n(o,l.lineVert,l.lineFrag),i=new c(a,u,h);return i}},{"./shaders":314,"gl-buffer":259,"gl-shader":335}],314:[function(e,v,M){var r=e("glslify"),n=r([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);v.exports={lineVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:n,textVert:r([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:n,gridVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:n,boxVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:316}],315:[function(e,v,M){v.exports=o;var r=e("gl-buffer"),n=e("gl-shader"),l=e("text-cache"),c=e("binary-search-bounds"),t=e("./shaders");function f(u,h,i){this.plot=u,this.vbo=h,this.shader=i,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var a=f.prototype;a.drawTicks=function(){var u=[0,0],h=[0,0],i=[0,0];return function(s){var p=this.plot,d=this.shader,y=this.tickX[s],b=this.tickOffset[s],m=p.gl,_=p.viewBox,T=p.dataBox,g=p.screenBox,A=p.pixelRatio,k=p.tickEnable,R=p.tickPad,L=p.tickColor,z=p.tickAngle,E=p.labelEnable,S=p.labelPad,C=p.labelColor,D=p.labelAngle,F=this.labelOffset[s],N=this.labelCount[s],G=c.lt(y,T[s]),U=c.le(y,T[s+2]);u[0]=u[1]=0,u[s]=1,h[s]=(_[2+s]+_[s])/(g[2+s]-g[s])-1;var X=2/g[2+(s^1)]-g[s^1];h[s^1]=X*_[s^1]-1,k[s]&&(h[s^1]-=X*A*R[s],G<U&&b[U]>b[G]&&(d.uniforms.dataAxis=u,d.uniforms.screenOffset=h,d.uniforms.color=L[s],d.uniforms.angle=z[s],m.drawArrays(m.TRIANGLES,b[G],b[U]-b[G]))),E[s]&&N&&(h[s^1]-=X*A*S[s],d.uniforms.dataAxis=i,d.uniforms.screenOffset=h,d.uniforms.color=C[s],d.uniforms.angle=D[s],m.drawArrays(m.TRIANGLES,F,N)),h[s^1]=X*_[2+(s^1)]-1,k[s+2]&&(h[s^1]+=X*A*R[s+2],G<U&&b[U]>b[G]&&(d.uniforms.dataAxis=u,d.uniforms.screenOffset=h,d.uniforms.color=L[s+2],d.uniforms.angle=z[s+2],m.drawArrays(m.TRIANGLES,b[G],b[U]-b[G]))),E[s+2]&&N&&(h[s^1]+=X*A*S[s+2],d.uniforms.dataAxis=i,d.uniforms.screenOffset=h,d.uniforms.color=C[s+2],d.uniforms.angle=D[s+2],m.drawArrays(m.TRIANGLES,F,N))}}(),a.drawTitle=function(){var u=[0,0],h=[0,0];return function(){var i=this.plot,s=this.shader,p=i.gl,d=i.screenBox,y=i.titleCenter,b=i.titleAngle,m=i.titleColor,_=i.pixelRatio;if(this.titleCount){for(var T=0;T<2;++T)h[T]=2*(y[T]*_-d[T])/(d[2+T]-d[T])-1;s.bind(),s.uniforms.dataAxis=u,s.uniforms.screenOffset=h,s.uniforms.angle=b,s.uniforms.color=m,p.drawArrays(p.TRIANGLES,this.titleOffset,this.titleCount)}}}(),a.bind=function(){var u=[0,0],h=[0,0],i=[0,0];return function(){var s=this.plot,p=this.shader,d=s._tickBounds,y=s.dataBox,b=s.screenBox,m=s.viewBox;p.bind();for(var _=0;_<2;++_){var T=d[_],g=d[_+2],A=g-T,k=.5*(y[_+2]+y[_]),R=y[_+2]-y[_],L=m[_],z=m[_+2],E=z-L,S=b[_],C=b[_+2],D=C-S;h[_]=2*A/R*E/D,u[_]=2*(T-k)/R*E/D}i[1]=2*s.pixelRatio/(b[3]-b[1]),i[0]=i[1]*(b[3]-b[1])/(b[2]-b[0]),p.uniforms.dataScale=h,p.uniforms.dataShift=u,p.uniforms.textScale=i,this.vbo.bind(),p.attributes.textCoordinate.pointer()}}(),a.update=function(u){var h=[],i=u.ticks,s=u.bounds,p,d,y,b,m;for(m=0;m<2;++m){var _=[Math.floor(h.length/3)],T=[-1/0],g=i[m];for(p=0;p<g.length;++p){var A=g[p],k=A.x,R=A.text,L=A.font||"sans-serif";b=A.fontSize||12;for(var z=1/(s[m+2]-s[m]),E=s[m],S=R.split(`
`),C=0;C<S.length;C++)for(y=l(L,S[C]).data,d=0;d<y.length;d+=2)h.push(y[d]*b,-y[d+1]*b-C*b*1.2,(k-E)*z);_.push(Math.floor(h.length/3)),T.push(k)}this.tickOffset[m]=_,this.tickX[m]=T}for(m=0;m<2;++m){for(this.labelOffset[m]=Math.floor(h.length/3),y=l(u.labelFont[m],u.labels[m],{textAlign:"center"}).data,b=u.labelSize[m],p=0;p<y.length;p+=2)h.push(y[p]*b,-y[p+1]*b,0);this.labelCount[m]=Math.floor(h.length/3)-this.labelOffset[m]}for(this.titleOffset=Math.floor(h.length/3),y=l(u.titleFont,u.title).data,b=u.titleSize,p=0;p<y.length;p+=2)h.push(y[p]*b,-y[p+1]*b,0);this.titleCount=Math.floor(h.length/3)-this.titleOffset,this.vbo.update(h)},a.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function o(u){var h=u.gl,i=r(h),s=n(h,t.textVert,t.textFrag),p=new f(u,i,s);return p}},{"./shaders":314,"binary-search-bounds":96,"gl-buffer":259,"gl-shader":335,"text-cache":575}],316:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],317:[function(e,v,M){v.exports=h;var r=e("gl-select-static"),n=e("./lib/grid"),l=e("./lib/text"),c=e("./lib/line"),t=e("./lib/box");function f(i,s){this.gl=i,this.pickBuffer=s,this.screenBox=[0,0,i.drawingBufferWidth,i.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var a=f.prototype;a.setDirty=function(){this.dirty=this.pickDirty=!0},a.setOverlayDirty=function(){this.dirty=!0},a.nextDepthValue=function(){return this._depthCounter++/65536},a.draw=function(){return function(){var i=this.gl,s=this.screenBox,p=this.viewBox,d=this.dataBox,y=this.pixelRatio,b=this.grid,m=this.line,_=this.text,T=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,i.bindFramebuffer(i.FRAMEBUFFER,null),i.enable(i.SCISSOR_TEST),i.disable(i.DEPTH_TEST),i.depthFunc(i.LESS),i.depthMask(!1),i.enable(i.BLEND),i.blendEquation(i.FUNC_ADD,i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),this.borderColor){i.scissor(s[0],s[1],s[2]-s[0],s[3]-s[1]);var g=this.borderColor;i.clearColor(g[0]*g[3],g[1]*g[3],g[2]*g[3],g[3]),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}i.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]),i.viewport(p[0],p[1],p[2]-p[0],p[3]-p[1]);var A=this.backgroundColor;i.clearColor(A[0]*A[3],A[1]*A[3],A[2]*A[3],A[3]),i.clear(i.COLOR_BUFFER_BIT),b.draw();var k=this.zeroLineEnable,R=this.zeroLineColor,L=this.zeroLineWidth;if(k[0]||k[1]){m.bind();for(var z=0;z<2;++z)if(!(!k[z]||!(d[z]<=0&&d[z+2]>=0))){var E=s[z]-d[z]*(s[z+2]-s[z])/(d[z+2]-d[z]);z===0?m.drawLine(E,s[1],E,s[3],L[z],R[z]):m.drawLine(s[0],E,s[2],E,L[z],R[z])}}for(var z=0;z<T.length;++z)T[z].draw();i.viewport(s[0],s[1],s[2]-s[0],s[3]-s[1]),i.scissor(s[0],s[1],s[2]-s[0],s[3]-s[1]),this.grid.drawTickMarks(),m.bind();var S=this.borderLineEnable,C=this.borderLineWidth,D=this.borderLineColor;S[1]&&m.drawLine(p[0],p[1]-.5*C[1]*y,p[0],p[3]+.5*C[3]*y,C[1],D[1]),S[0]&&m.drawLine(p[0]-.5*C[0]*y,p[1],p[2]+.5*C[2]*y,p[1],C[0],D[0]),S[3]&&m.drawLine(p[2],p[1]-.5*C[1]*y,p[2],p[3]+.5*C[3]*y,C[3],D[3]),S[2]&&m.drawLine(p[0]-.5*C[0]*y,p[3],p[2]+.5*C[2]*y,p[3],C[2],D[2]),_.bind();for(var z=0;z<2;++z)_.drawTicks(z);this.titleEnable&&_.drawTitle();for(var F=this.overlays,z=0;z<F.length;++z)F[z].draw();i.disable(i.SCISSOR_TEST),i.disable(i.BLEND),i.depthMask(!0)}}}(),a.drawPick=function(){return function(){if(!this.static){var i=this.pickBuffer;this.gl,this._pickTimeout=null,i.begin();for(var s=1,p=this.objects,d=0;d<p.length;++d)s=p[d].drawPick(s);i.end()}}}(),a.pick=function(){return function(i,s){if(!this.static){var p=this.pixelRatio,d=this.pickPixelRatio,y=this.viewBox,b=Math.round((i-y[0]/p)*d)|0,m=Math.round((s-y[1]/p)*d)|0,_=this.pickBuffer.query(b,m,this.pickRadius);if(!_)return null;for(var T=_.id+(_.value[0]<<8)+(_.value[1]<<16)+(_.value[2]<<24),g=this.objects,A=0;A<g.length;++A){var k=g[A].pick(b,m,T);if(k)return k}return null}}}();function o(i){for(var s=i.slice(),p=0;p<s.length;++p)s[p]=s[p].slice();return s}function u(i,s){return i.x-s.x}a.setScreenBox=function(i){var s=this.screenBox,p=this.pixelRatio;s[0]=Math.round(i[0]*p)|0,s[1]=Math.round(i[1]*p)|0,s[2]=Math.round(i[2]*p)|0,s[3]=Math.round(i[3]*p)|0,this.setDirty()},a.setDataBox=function(i){var s=this.dataBox,p=s[0]!==i[0]||s[1]!==i[1]||s[2]!==i[2]||s[3]!==i[3];p&&(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],this.setDirty())},a.setViewBox=function(i){var s=this.pixelRatio,p=this.viewBox;p[0]=Math.round(i[0]*s)|0,p[1]=Math.round(i[1]*s)|0,p[2]=Math.round(i[2]*s)|0,p[3]=Math.round(i[3]*s)|0;var d=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((i[2]-i[0])*d)|0,Math.round((i[3]-i[1])*d)|0],this.setDirty()},a.update=function(i){i=i||{};var s=this.gl;this.pixelRatio=i.pixelRatio||1;var p=this.pixelRatio;this.pickPixelRatio=Math.max(p,1),this.setScreenBox(i.screenBox||[0,0,s.drawingBufferWidth/p,s.drawingBufferHeight/p]),this.screenBox,this.setViewBox(i.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/p,.125*(this.screenBox[3]-this.screenBox[1])/p,.875*(this.screenBox[2]-this.screenBox[0])/p,.875*(this.screenBox[3]-this.screenBox[1])/p]);var d=this.viewBox,y=(d[2]-d[0])/(d[3]-d[1]);this.setDataBox(i.dataBox||[-10,-10/y,10,10/y]),this.borderColor=i.borderColor!==!1?(i.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(i.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(i.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(i.gridLineWidth||[1,1]).slice(),this.gridLineColor=o(i.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(i.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(i.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=o(i.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(i.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(i.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=o(i.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(i.titleCenter||[.5*(d[0]+d[2])/p,(d[3]+120)/p]).slice(),this.titleEnable=!("titleEnable"in i)||!!i.titleEnable,this.titleAngle=i.titleAngle||0,this.titleColor=(i.titleColor||[0,0,0,1]).slice(),this.labelPad=(i.labelPad||[15,15,15,15]).slice(),this.labelAngle=(i.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(i.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=o(i.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(i.tickPad||[15,15,15,15]).slice(),this.tickAngle=(i.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(i.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=o(i.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(i.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(i.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=o(i.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var b=i.ticks||[[],[]],m=this._tickBounds;m[0]=m[1]=1/0,m[2]=m[3]=-1/0;for(var _=0;_<2;++_){var T=b[_].slice(0);T.length!==0&&(T.sort(u),m[_]=Math.min(m[_],T[0].x),m[_+2]=Math.max(m[_+2],T[T.length-1].x))}this.grid.update({bounds:m,ticks:b}),this.text.update({bounds:m,ticks:b,labels:i.labels||["x","y"],labelSize:i.labelSize||[12,12],labelFont:i.labelFont||["sans-serif","sans-serif"],title:i.title||"",titleSize:i.titleSize||18,titleFont:i.titleFont||"sans-serif"}),this.static=!!i.static,this.setDirty()},a.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var i=this.objects.length-1;i>=0;--i)this.objects[i].dispose();this.objects.length=0;for(var i=this.overlays.length-1;i>=0;--i)this.overlays[i].dispose();this.overlays.length=0,this.gl=null},a.addObject=function(i){this.objects.indexOf(i)<0&&(this.objects.push(i),this.setDirty())},a.removeObject=function(i){for(var s=this.objects,p=0;p<s.length;++p)if(s[p]===i){s.splice(p,1),this.setDirty();break}},a.addOverlay=function(i){this.overlays.indexOf(i)<0&&(this.overlays.push(i),this.setOverlayDirty())},a.removeOverlay=function(i){for(var s=this.overlays,p=0;p<s.length;++p)if(s[p]===i){s.splice(p,1),this.setOverlayDirty();break}};function h(i){var s=i.gl,p=r(s,[s.drawingBufferWidth,s.drawingBufferHeight]),d=new f(s,p);return d.grid=n(d),d.text=l(d),d.line=c(d),d.box=t(d),d.update(i),d}},{"./lib/box":311,"./lib/grid":312,"./lib/line":313,"./lib/text":315,"gl-select-static":334}],318:[function(e,v,M){v.exports=a;var r=e("right-now"),n=e("3d-view"),l=e("mouse-change"),c=e("mouse-wheel"),t=e("mouse-event-offset"),f=e("has-passive-events");function a(o,u){o=o||document.body,u=u||{};var h=[.01,1/0];"distanceLimits"in u&&(h[0]=u.distanceLimits[0],h[1]=u.distanceLimits[1]),"zoomMin"in u&&(h[0]=u.zoomMin),"zoomMax"in u&&(h[1]=u.zoomMax);var i=n({center:u.center||[0,0,0],up:u.up||[0,1,0],eye:u.eye||[0,0,10],mode:u.mode||"orbit",distanceLimits:h}),s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],p=0,d=o.clientWidth,y=o.clientHeight,b={keyBindingMode:"rotate",enableWheel:!0,view:i,element:o,delay:u.delay||16,rotateSpeed:u.rotateSpeed||1,zoomSpeed:u.zoomSpeed||1,translateSpeed:u.translateSpeed||1,flipX:!!u.flipX,flipY:!!u.flipY,modes:i.modes,_ortho:u._ortho||u.projection&&u.projection.type==="orthographic"||!1,tick:function(){var m=r(),_=this.delay,T=m-2*_;i.idle(m-_),i.recalcMatrix(T),i.flush(m-(100+_*2));for(var g=!0,A=i.computedMatrix,k=0;k<16;++k)g=g&&s[k]===A[k],s[k]=A[k];var R=o.clientWidth===d&&o.clientHeight===y;return d=o.clientWidth,y=o.clientHeight,g?!R:(p=Math.exp(i.computedRadius[0]),!0)},lookAt:function(m,_,T){i.lookAt(i.lastT(),m,_,T)},rotate:function(m,_,T){i.rotate(i.lastT(),m,_,T)},pan:function(m,_,T){i.pan(i.lastT(),m,_,T)},translate:function(m,_,T){i.translate(i.lastT(),m,_,T)}};return Object.defineProperties(b,{matrix:{get:function(){return i.computedMatrix},set:function(m){return i.setMatrix(i.lastT(),m),i.computedMatrix},enumerable:!0},mode:{get:function(){return i.getMode()},set:function(m){var _=i.computedUp.slice(),T=i.computedEye.slice(),g=i.computedCenter.slice();if(i.setMode(m),m==="turntable"){var A=r();i._active.lookAt(A,T,g,_),i._active.lookAt(A+500,T,g,[0,0,1]),i._active.flush(A)}return i.getMode()},enumerable:!0},center:{get:function(){return i.computedCenter},set:function(m){return i.lookAt(i.lastT(),null,m),i.computedCenter},enumerable:!0},eye:{get:function(){return i.computedEye},set:function(m){return i.lookAt(i.lastT(),m),i.computedEye},enumerable:!0},up:{get:function(){return i.computedUp},set:function(m){return i.lookAt(i.lastT(),null,null,m),i.computedUp},enumerable:!0},distance:{get:function(){return p},set:function(m){return i.setDistance(i.lastT(),m),m},enumerable:!0},distanceLimits:{get:function(){return i.getDistanceLimits(h)},set:function(m){return i.setDistanceLimits(m),m},enumerable:!0}}),o.addEventListener("contextmenu",function(m){return m.preventDefault(),!1}),b._lastX=-1,b._lastY=-1,b._lastMods={shift:!1,control:!1,alt:!1,meta:!1},b.enableMouseListeners=function(){b.mouseListener=l(o,m),o.addEventListener("touchstart",function(_){var T=t(_.changedTouches[0],o);m(0,T[0],T[1],b._lastMods),m(1,T[0],T[1],b._lastMods)},f?{passive:!0}:!1),o.addEventListener("touchmove",function(_){var T=t(_.changedTouches[0],o);m(1,T[0],T[1],b._lastMods),_.preventDefault()},f?{passive:!1}:!1),o.addEventListener("touchend",function(_){m(0,b._lastX,b._lastY,b._lastMods)},f?{passive:!0}:!1);function m(_,T,g,A){var k=b.keyBindingMode;if(k!==!1){var R=k==="rotate",L=k==="pan",z=k==="zoom",E=!!A.control,S=!!A.alt,C=!!A.shift,D=!!(_&1),F=!!(_&2),N=!!(_&4),G=1/o.clientHeight,U=G*(T-b._lastX),X=G*(g-b._lastY),I=b.flipX?1:-1,B=b.flipY?1:-1,j=Math.PI*b.rotateSpeed,H=r();if(b._lastX!==-1&&b._lastY!==-1&&((R&&D&&!E&&!S&&!C||D&&!E&&!S&&C)&&i.rotate(H,I*j*U,-B*j*X,0),(L&&D&&!E&&!S&&!C||F||D&&E&&!S&&!C)&&i.pan(H,-b.translateSpeed*U*p,b.translateSpeed*X*p,0),z&&D&&!E&&!S&&!C||N||D&&!E&&S&&!C)){var K=-b.zoomSpeed*X/window.innerHeight*(H-i.lastT())*100;i.pan(H,0,0,p*(Math.exp(K)-1))}return b._lastX=T,b._lastY=g,b._lastMods=A,!0}}b.wheelListener=c(o,function(_,T){if(b.keyBindingMode!==!1&&b.enableWheel){var g=b.flipX?1:-1,A=b.flipY?1:-1,k=r();if(Math.abs(_)>Math.abs(T))i.rotate(k,0,0,-_*g*Math.PI*b.rotateSpeed/window.innerWidth);else if(!b._ortho){var R=-b.zoomSpeed*A*T/window.innerHeight*(k-i.lastT())/20;i.pan(k,0,0,p*(Math.exp(R)-1))}}},!0)},b.enableMouseListeners(),b}},{"3d-view":54,"has-passive-events":441,"mouse-change":483,"mouse-event-offset":484,"mouse-wheel":486,"right-now":542}],319:[function(e,v,M){var r=e("glslify"),n=e("gl-shader"),l=r([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),c=r([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);v.exports=function(t){return n(t,l,c,null,[{name:"position",type:"vec2"}])}},{"gl-shader":335,glslify:320}],320:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],321:[function(e,v,M){var r=e("./camera.js"),n=e("gl-axes3d"),l=e("gl-axes3d/properties"),c=e("gl-spikes3d"),t=e("gl-select-static"),f=e("gl-fbo"),a=e("a-big-triangle"),o=e("mouse-change"),u=e("gl-mat4/perspective"),h=e("gl-mat4/ortho"),i=e("./lib/shader"),s=e("is-mobile")({tablet:!0,featureDetect:!0});v.exports={createScene:m,createCamera:r};function p(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function d(T,g){var A=null;try{A=T.getContext("webgl",g),A||(A=T.getContext("experimental-webgl",g))}catch{return null}return A}function y(T){var g=Math.round(Math.log(Math.abs(T))/Math.log(10));if(g<0){var A=Math.round(Math.pow(10,-g));return Math.ceil(T*A)/A}else if(g>0){var A=Math.round(Math.pow(10,g));return Math.ceil(T/A)*A}return Math.ceil(T)}function b(T){return typeof T=="boolean"?T:!0}function m(T){T=T||{},T.camera=T.camera||{};var g=T.canvas;if(!g)if(g=document.createElement("canvas"),T.container){var A=T.container;A.appendChild(g)}else document.body.appendChild(g);var k=T.gl;if(k||(T.glOptions&&(s=!!T.glOptions.preserveDrawingBuffer),k=d(g,T.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:s})),!k)throw new Error("webgl not supported");var R=T.bounds||[[-10,-10,-10],[10,10,10]],L=new p,z=f(k,k.drawingBufferWidth,k.drawingBufferHeight,{preferFloat:!s}),E=i(k),S=T.cameraObject&&T.cameraObject._ortho===!0||T.camera.projection&&T.camera.projection.type==="orthographic"||!1,C={eye:T.camera.eye||[2,0,0],center:T.camera.center||[0,0,0],up:T.camera.up||[0,1,0],zoomMin:T.camera.zoomMax||.1,zoomMax:T.camera.zoomMin||100,mode:T.camera.mode||"turntable",_ortho:S},D=T.axes||{},F=n(k,D);F.enable=!D.disable;var N=T.spikes||{},G=c(k,N),U=[],X=[],I=[],B=[],j=!0,J=!0,H=new Array(16),K=new Array(16),te={view:null,projection:H,model:K,_ortho:!1},J=!0,oe=[k.drawingBufferWidth,k.drawingBufferHeight],ie=T.cameraObject||r(g,C),Q={gl:k,contextLost:!1,pixelRatio:T.pixelRatio||1,canvas:g,selection:L,camera:ie,axes:F,axesPixels:null,spikes:G,bounds:R,objects:U,shape:oe,aspect:T.aspectRatio||[1,1,1],pickRadius:T.pickRadius||10,zNear:T.zNear||.01,zFar:T.zFar||1e3,fovy:T.fovy||Math.PI/4,clearColor:T.clearColor||[0,0,0,0],autoResize:b(T.autoResize),autoBounds:b(T.autoBounds),autoScale:!!T.autoScale,autoCenter:b(T.autoCenter),clipToBounds:b(T.clipToBounds),snapToData:!!T.snapToData,onselect:T.onselect||null,onrender:T.onrender||null,onclick:T.onclick||null,cameraParams:te,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ue){this.aspect[0]=ue.x,this.aspect[1]=ue.y,this.aspect[2]=ue.z,J=!0},setBounds:function(ue,me){this.bounds[0][ue]=me.min,this.bounds[1][ue]=me.max},setClearColor:function(ue){this.clearColor=ue},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},V=[k.drawingBufferWidth/Q.pixelRatio|0,k.drawingBufferHeight/Q.pixelRatio|0];function se(){if(!Q._stopped&&Q.autoResize){var ue=g.parentNode,me=1,be=1;ue&&ue!==document.body?(me=ue.clientWidth,be=ue.clientHeight):(me=window.innerWidth,be=window.innerHeight);var ke=Math.ceil(me*Q.pixelRatio)|0,Pe=Math.ceil(be*Q.pixelRatio)|0;if(ke!==g.width||Pe!==g.height){g.width=ke,g.height=Pe;var je=g.style;je.position=je.position||"absolute",je.left="0px",je.top="0px",je.width=me+"px",je.height=be+"px",j=!0}}}Q.autoResize&&se(),window.addEventListener("resize",se);function re(){for(var ue=U.length,me=B.length,be=0;be<me;++be)I[be]=0;e:for(var be=0;be<ue;++be){var ke=U[be],Pe=ke.pickSlots;if(!Pe){X[be]=-1;continue}for(var je=0;je<me;++je)if(I[je]+Pe<255){X[be]=je,ke.setPickBase(I[je]+1),I[je]+=Pe;continue e}var ze=t(k,oe);X[be]=me,B.push(ze),I.push(Pe),ke.setPickBase(1),me+=1}for(;me>0&&I[me-1]===0;)I.pop(),B.pop().dispose()}Q.update=function(ue){Q._stopped||(j=!0,J=!0)},Q.add=function(ue){Q._stopped||(ue.axes=F,U.push(ue),X.push(-1),j=!0,J=!0,re())},Q.remove=function(ue){if(!Q._stopped){var me=U.indexOf(ue);me<0||(U.splice(me,1),X.pop(),j=!0,J=!0,re())}},Q.dispose=function(){if(!Q._stopped&&(Q._stopped=!0,window.removeEventListener("resize",se),g.removeEventListener("webglcontextlost",ee),Q.mouseListener.enabled=!1,!Q.contextLost)){F.dispose(),G.dispose();for(var ue=0;ue<U.length;++ue)U[ue].dispose();z.dispose();for(var ue=0;ue<B.length;++ue)B[ue].dispose();E.dispose(),k=null,F=null,G=null,U=[]}},Q._mouseRotating=!1,Q._prevButtons=0,Q.enableMouseListeners=function(){Q.mouseListener=o(g,function(ue,me,be){if(!Q._stopped){var ke=B.length,Pe=U.length,je=L.object;L.distance=1/0,L.mouse[0]=me,L.mouse[1]=be,L.object=null,L.screen=null,L.dataCoordinate=L.dataPosition=null;var ze=!1;if(ue&&Q._prevButtons)Q._mouseRotating=!0;else{Q._mouseRotating&&(J=!0),Q._mouseRotating=!1;for(var Ze=0;Ze<ke;++Ze){var tt=B[Ze].query(me,V[1]-be-1,Q.pickRadius);if(tt){if(tt.distance>L.distance)continue;for(var Ce=0;Ce<Pe;++Ce){var Ae=U[Ce];if(X[Ce]===Ze){var Ne=Ae.pick(tt);Ne&&(L.buttons=ue,L.screen=tt.coord,L.distance=tt.distance,L.object=Ae,L.index=Ne.distance,L.dataPosition=Ne.position,L.dataCoordinate=Ne.dataCoordinate,L.data=Ne,ze=!0)}}}}}je&&je!==L.object&&(je.highlight&&je.highlight(null),j=!0),L.object&&(L.object.highlight&&L.object.highlight(L.data),j=!0),ze=ze||L.object!==je,ze&&Q.onselect&&Q.onselect(L),ue&1&&!(Q._prevButtons&1)&&Q.onclick&&Q.onclick(L),Q._prevButtons=ue}})};function ee(){if(Q.contextLost)return!0;k.isContextLost()&&(Q.contextLost=!0,Q.mouseListener.enabled=!1,Q.selection.object=null,Q.oncontextloss&&Q.oncontextloss())}g.addEventListener("webglcontextlost",ee);function ae(){if(!ee()){k.colorMask(!0,!0,!0,!0),k.depthMask(!0),k.disable(k.BLEND),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL);for(var ue=U.length,me=B.length,be=0;be<me;++be){var ke=B[be];ke.shape=V,ke.begin();for(var Pe=0;Pe<ue;++Pe)if(X[Pe]===be){var je=U[Pe];je.drawPick&&(je.pixelRatio=1,je.drawPick(te))}ke.end()}}}var fe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],de=[fe[0].slice(),fe[1].slice()];function pe(){if(!ee()){se();var ue=Q.camera.tick();te.view=Q.camera.matrix,j=j||ue,J=J||ue,F.pixelRatio=Q.pixelRatio,G.pixelRatio=Q.pixelRatio;var me=U.length,be=fe[0],ke=fe[1];be[0]=be[1]=be[2]=1/0,ke[0]=ke[1]=ke[2]=-1/0;for(var Pe=0;Pe<me;++Pe){var je=U[Pe];je.pixelRatio=Q.pixelRatio,je.axes=Q.axes,j=j||!!je.dirty,J=J||!!je.dirty;var ze=je.bounds;if(ze)for(var Ze=ze[0],tt=ze[1],Ce=0;Ce<3;++Ce)be[Ce]=Math.min(be[Ce],Ze[Ce]),ke[Ce]=Math.max(ke[Ce],tt[Ce])}var Ae=Q.bounds;if(Q.autoBounds)for(var Ce=0;Ce<3;++Ce){if(ke[Ce]<be[Ce])be[Ce]=-1,ke[Ce]=1;else{be[Ce]===ke[Ce]&&(be[Ce]-=1,ke[Ce]+=1);var Ne=.05*(ke[Ce]-be[Ce]);be[Ce]=be[Ce]-Ne,ke[Ce]=ke[Ce]+Ne}Ae[0][Ce]=be[Ce],Ae[1][Ce]=ke[Ce]}for(var qe=!1,Ce=0;Ce<3;++Ce)qe=qe||de[0][Ce]!==Ae[0][Ce]||de[1][Ce]!==Ae[1][Ce],de[0][Ce]=Ae[0][Ce],de[1][Ce]=Ae[1][Ce];if(J=J||qe,j=j||qe,!!j){if(qe){for(var At=[0,0,0],Pe=0;Pe<3;++Pe)At[Pe]=y((Ae[1][Pe]-Ae[0][Pe])/10);F.autoTicks?F.update({bounds:Ae,tickSpacing:At}):F.update({bounds:Ae})}var kt=k.drawingBufferWidth,Ve=k.drawingBufferHeight;oe[0]=kt,oe[1]=Ve,V[0]=Math.max(kt/Q.pixelRatio,1)|0,V[1]=Math.max(Ve/Q.pixelRatio,1)|0,_(Q,S);for(var Pe=0;Pe<me;++Pe){var je=U[Pe];je.axesBounds=Ae,Q.clipToBounds&&(je.clipBounds=Ae)}L.object&&(Q.snapToData?G.position=L.dataCoordinate:G.position=L.dataPosition,G.bounds=Ae),J&&(J=!1,ae()),Q.axesPixels=l(Q.axes,te,kt,Ve),Q.onrender&&Q.onrender(),k.bindFramebuffer(k.FRAMEBUFFER,null),k.viewport(0,0,kt,Ve),Q.clearRGBA(),k.depthMask(!0),k.colorMask(!0,!0,!0,!0),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL),k.disable(k.BLEND),k.disable(k.CULL_FACE);var ft=!1;F.enable&&(ft=ft||F.isTransparent(),F.draw(te)),G.axes=F,L.object&&G.draw(te),k.disable(k.CULL_FACE);for(var Pe=0;Pe<me;++Pe){var je=U[Pe];je.axes=F,je.pixelRatio=Q.pixelRatio,je.isOpaque&&je.isOpaque()&&je.draw(te),je.isTransparent&&je.isTransparent()&&(ft=!0)}if(ft){z.shape=oe,z.bind(),k.clear(k.DEPTH_BUFFER_BIT),k.colorMask(!1,!1,!1,!1),k.depthMask(!0),k.depthFunc(k.LESS),F.enable&&F.isTransparent()&&F.drawTransparent(te);for(var Pe=0;Pe<me;++Pe){var je=U[Pe];je.isOpaque&&je.isOpaque()&&je.draw(te)}k.enable(k.BLEND),k.blendEquation(k.FUNC_ADD),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.colorMask(!0,!0,!0,!0),k.depthMask(!1),k.clearColor(0,0,0,0),k.clear(k.COLOR_BUFFER_BIT),F.isTransparent()&&F.drawTransparent(te);for(var Pe=0;Pe<me;++Pe){var je=U[Pe];je.isTransparent&&je.isTransparent()&&je.drawTransparent(te)}k.bindFramebuffer(k.FRAMEBUFFER,null),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.disable(k.DEPTH_TEST),E.bind(),z.color[0].bind(0),E.uniforms.accumBuffer=0,a(k),k.disable(k.BLEND)}j=!1;for(var Pe=0;Pe<me;++Pe)U[Pe].dirty=!1}}}function W(){Q._stopped||Q.contextLost||(pe(),requestAnimationFrame(W))}return Q.enableMouseListeners(),W(),Q.redraw=function(){Q._stopped||(j=!0,pe())},Q}function _(T,g){var A=T.bounds,k=T.cameraParams,R=k.projection,L=k.model,z=T.gl.drawingBufferWidth,E=T.gl.drawingBufferHeight,S=T.zNear,C=T.zFar,D=T.fovy,F=z/E;g?(h(R,-F,F,-1,1,S,C),k._ortho=!0):(u(R,D,F,S,C),k._ortho=!1);for(var N=0;N<16;++N)L[N]=0;L[15]=1;for(var G=0,N=0;N<3;++N)G=Math.max(G,A[1][N]-A[0][N]);for(var N=0;N<3;++N)T.autoScale?L[5*N]=T.aspect[N]/(A[1][N]-A[0][N]):L[5*N]=1/G,T.autoCenter&&(L[12+N]=-L[5*N]*.5*(A[0][N]+A[1][N]))}},{"./camera.js":318,"./lib/shader":319,"a-big-triangle":64,"gl-axes3d":250,"gl-axes3d/properties":258,"gl-fbo":269,"gl-mat4/ortho":296,"gl-mat4/perspective":297,"gl-select-static":334,"gl-spikes3d":345,"is-mobile":467,"mouse-change":483}],322:[function(e,v,M){var r=e("glslify");M.pointVertex=r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),M.pointFragment=r([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),M.pickVertex=r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),M.pickFragment=r([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:323}],323:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],324:[function(e,v,M){var r=e("gl-shader"),n=e("gl-buffer"),l=e("typedarray-pool"),c=e("./lib/shader");v.exports=o;function t(u,h,i,s,p){this.plot=u,this.offsetBuffer=h,this.pickBuffer=i,this.shader=s,this.pickShader=p,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var f=t.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(u){var h;u=u||{};function i(_,T){return _ in u?u[_]:T}this.sizeMin=i("sizeMin",.5),this.sizeMax=i("sizeMax",20),this.color=i("color",[1,0,0,1]).slice(),this.areaRatio=i("areaRatio",1),this.borderColor=i("borderColor",[0,0,0,1]).slice(),this.blend=i("blend",!1);var s=u.positions.length>>>1,p=u.positions instanceof Float32Array,d=u.idToIndex instanceof Int32Array&&u.idToIndex.length>=s,y=u.positions,b=p?y:l.mallocFloat32(y.length),m=d?u.idToIndex:l.mallocInt32(s);if(p||b.set(y),!d)for(b.set(y),h=0;h<s;h++)m[h]=h;this.points=y,this.offsetBuffer.update(b),this.pickBuffer.update(m),p||l.free(b),d||l.free(m),this.pointCount=s,this.pickOffset=0};function a(u,h){var i=0,s=u.length>>>1,p;for(p=0;p<s;p++){var d=u[p*2],y=u[p*2+1];d>=h[0]&&d<=h[2]&&y>=h[1]&&y<=h[3]&&i++}return i}f.unifiedDraw=function(){var u=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0];return function(i){var s=i!==void 0,p=s?this.pickShader:this.shader,d=this.plot.gl,y=this.plot.dataBox;if(this.pointCount===0)return i;var b=y[2]-y[0],m=y[3]-y[1],_=a(this.points,y),T=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(_,.33333)));u[0]=2/b,u[4]=2/m,u[6]=-2*y[0]/b-1,u[7]=-2*y[1]/m-1,this.offsetBuffer.bind(),p.bind(),p.attributes.position.pointer(),p.uniforms.matrix=u,p.uniforms.color=this.color,p.uniforms.borderColor=this.borderColor,p.uniforms.pointCloud=T<5,p.uniforms.pointSize=T,p.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),s&&(h[0]=i&255,h[1]=i>>8&255,h[2]=i>>16&255,h[3]=i>>24&255,this.pickBuffer.bind(),p.attributes.pickId.pointer(d.UNSIGNED_BYTE),p.uniforms.pickOffset=h,this.pickOffset=i);var g=d.getParameter(d.BLEND),A=d.getParameter(d.DITHER);return g&&!this.blend&&d.disable(d.BLEND),A&&d.disable(d.DITHER),d.drawArrays(d.POINTS,0,this.pointCount),g&&!this.blend&&d.enable(d.BLEND),A&&d.enable(d.DITHER),i+this.pointCount}}(),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(u,h,i){var s=this.pickOffset,p=this.pointCount;if(i<s||i>=s+p)return null;var d=i-s,y=this.points;return{object:this,pointId:d,dataCoord:[y[2*d],y[2*d+1]]}};function o(u,h){var i=u.gl,s=n(i),p=n(i),d=r(i,c.pointVertex,c.pointFragment),y=r(i,c.pickVertex,c.pickFragment),b=new t(u,s,p,d,y);return b.update(h),u.addObject(b),b}},{"./lib/shader":322,"gl-buffer":259,"gl-shader":335,"typedarray-pool":595}],325:[function(e,v,M){v.exports=r;function r(n,l,c,t){var f=l[0],a=l[1],o=l[2],u=l[3],h=c[0],i=c[1],s=c[2],p=c[3],d,y,b,m,_;return y=f*h+a*i+o*s+u*p,y<0&&(y=-y,h=-h,i=-i,s=-s,p=-p),1-y>1e-6?(d=Math.acos(y),b=Math.sin(d),m=Math.sin((1-t)*d)/b,_=Math.sin(t*d)/b):(m=1-t,_=t),n[0]=m*f+_*h,n[1]=m*a+_*i,n[2]=m*o+_*s,n[3]=m*u+_*p,n}},{}],326:[function(e,v,M){v.exports=function(r){return!r&&r!==0?"":r.toString()}},{}],327:[function(e,v,M){var r=e("vectorize-text");v.exports=l;var n={};function l(c,t,f){var a=n[t];if(a||(a=n[t]={}),c in a)return a[c];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:t,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};o.triangles=!0;var u=r(c,o);o.triangles=!1;var h=r(c,o),i,s;if(f&&f!==1){for(i=0;i<u.positions.length;++i)for(s=0;s<u.positions[i].length;++s)u.positions[i][s]/=f;for(i=0;i<h.positions.length;++i)for(s=0;s<h.positions[i].length;++s)h.positions[i][s]/=f}var p=[[1/0,1/0],[-1/0,-1/0]],d=h.positions.length;for(i=0;i<d;++i){var y=h.positions[i];for(s=0;s<2;++s)p[0][s]=Math.min(p[0][s],y[s]),p[1][s]=Math.max(p[1][s],y[s])}return a[c]=[u,h,p]}},{"vectorize-text":600}],328:[function(e,v,M){var r=e("gl-shader"),n=e("glslify"),l=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),c=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),t=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),f=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),a=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),o=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],u={vertex:l,fragment:f,attributes:o},h={vertex:c,fragment:f,attributes:o},i={vertex:t,fragment:f,attributes:o},s={vertex:l,fragment:a,attributes:o},p={vertex:c,fragment:a,attributes:o},d={vertex:t,fragment:a,attributes:o};function y(b,m){var _=r(b,m),T=_.attributes;return T.position.location=0,T.color.location=1,T.glyph.location=2,T.id.location=3,_}M.createPerspective=function(b){return y(b,u)},M.createOrtho=function(b){return y(b,h)},M.createProject=function(b){return y(b,i)},M.createPickPerspective=function(b){return y(b,s)},M.createPickOrtho=function(b){return y(b,p)},M.createPickProject=function(b){return y(b,d)}},{"gl-shader":335,glslify:329}],329:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],330:[function(e,v,M){var r=e("is-string-blank"),n=e("gl-buffer"),l=e("gl-vao"),c=e("typedarray-pool"),t=e("gl-mat4/multiply"),f=e("./lib/shaders"),a=e("./lib/glyphs"),o=e("./lib/get-simple-string"),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];v.exports=X;function h(I,B){var j=I[0],H=I[1],K=I[2],te=I[3];return I[0]=B[0]*j+B[4]*H+B[8]*K+B[12]*te,I[1]=B[1]*j+B[5]*H+B[9]*K+B[13]*te,I[2]=B[2]*j+B[6]*H+B[10]*K+B[14]*te,I[3]=B[3]*j+B[7]*H+B[11]*K+B[15]*te,I}function i(I,B,j,H){return h(H,H),h(H,H),h(H,H)}function s(I,B){this.index=I,this.dataCoordinate=this.position=B}function p(I){return I===!0||I>1?1:I}function d(I,B,j,H,K,te,J,oe,ie,Q,V,se){this.gl=I,this.pixelRatio=1,this.shader=B,this.orthoShader=j,this.projectShader=H,this.pointBuffer=K,this.colorBuffer=te,this.glyphBuffer=J,this.idBuffer=oe,this.vao=ie,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=Q,this.pickOrthoShader=V,this.pickProjectShader=se,this.points=[],this._selectResult=new s(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var y=d.prototype;y.pickSlots=1,y.setPickBase=function(I){this.pickId=I},y.isTransparent=function(){if(this.hasAlpha)return!0;for(var I=0;I<3;++I)if(this.axesProject[I]&&this.projectHasAlpha)return!0;return!1},y.isOpaque=function(){if(!this.hasAlpha)return!0;for(var I=0;I<3;++I)if(this.axesProject[I]&&!this.projectHasAlpha)return!0;return!1};var b=[0,0],m=[0,0,0],_=[0,0,0],T=[0,0,0,1],g=[0,0,0,1],A=u.slice(),k=[0,0,0],R=[[0,0,0],[0,0,0]];function L(I){return I[0]=I[1]=I[2]=0,I}function z(I,B){return I[0]=B[0],I[1]=B[1],I[2]=B[2],I[3]=1,I}function E(I,B,j,H){return I[0]=B[0],I[1]=B[1],I[2]=B[2],I[j]=H,I}function S(I){for(var B=R,j=0;j<2;++j)for(var H=0;H<3;++H)B[j][H]=Math.max(Math.min(I[j][H],1e8),-1e8);return B}function C(I,B,j,H){var K=B.axesProject,te=B.gl,J=I.uniforms,oe=j.model||u,ie=j.view||u,Q=j.projection||u,V=B.axesBounds,se=S(B.clipBounds),re;B.axes&&B.axes.lastCubeProps?re=B.axes.lastCubeProps.axis:re=[1,1,1],b[0]=2/te.drawingBufferWidth,b[1]=2/te.drawingBufferHeight,I.bind(),J.view=ie,J.projection=Q,J.screenSize=b,J.highlightId=B.highlightId,J.highlightScale=B.highlightScale,J.clipBounds=se,J.pickGroup=B.pickId/255,J.pixelRatio=H;for(var ee=0;ee<3;++ee)if(K[ee]){J.scale=B.projectScale[ee],J.opacity=B.projectOpacity[ee];for(var ae=A,fe=0;fe<16;++fe)ae[fe]=0;for(var fe=0;fe<4;++fe)ae[5*fe]=1;ae[5*ee]=0,re[ee]<0?ae[12+ee]=V[0][ee]:ae[12+ee]=V[1][ee],t(ae,oe,ae),J.model=ae;var de=(ee+1)%3,pe=(ee+2)%3,W=L(m),ue=L(_);W[de]=1,ue[pe]=1;var me=i(Q,ie,oe,z(T,W)),be=i(Q,ie,oe,z(g,ue));if(Math.abs(me[1])>Math.abs(be[1])){var ke=me;me=be,be=ke,ke=W,W=ue,ue=ke;var Pe=de;de=pe,pe=Pe}me[0]<0&&(W[de]=-1),be[1]>0&&(ue[pe]=-1);for(var je=0,ze=0,fe=0;fe<4;++fe)je+=Math.pow(oe[4*de+fe],2),ze+=Math.pow(oe[4*pe+fe],2);W[de]/=Math.sqrt(je),ue[pe]/=Math.sqrt(ze),J.axes[0]=W,J.axes[1]=ue,J.fragClipBounds[0]=E(k,se[0],ee,-1e8),J.fragClipBounds[1]=E(k,se[1],ee,1e8),B.vao.bind(),B.vao.draw(te.TRIANGLES,B.vertexCount),B.lineWidth>0&&(te.lineWidth(B.lineWidth*H),B.vao.draw(te.LINES,B.lineVertexCount,B.vertexCount)),B.vao.unbind()}}var D=[-1e8,-1e8,-1e8],F=[1e8,1e8,1e8],N=[D,F];function G(I,B,j,H,K,te,J){var oe=j.gl;if((te===j.projectHasAlpha||J)&&C(B,j,H,K),te===j.hasAlpha||J){I.bind();var ie=I.uniforms;ie.model=H.model||u,ie.view=H.view||u,ie.projection=H.projection||u,b[0]=2/oe.drawingBufferWidth,b[1]=2/oe.drawingBufferHeight,ie.screenSize=b,ie.highlightId=j.highlightId,ie.highlightScale=j.highlightScale,ie.fragClipBounds=N,ie.clipBounds=j.axes.bounds,ie.opacity=j.opacity,ie.pickGroup=j.pickId/255,ie.pixelRatio=K,j.vao.bind(),j.vao.draw(oe.TRIANGLES,j.vertexCount),j.lineWidth>0&&(oe.lineWidth(j.lineWidth*K),j.vao.draw(oe.LINES,j.lineVertexCount,j.vertexCount)),j.vao.unbind()}}y.draw=function(I){var B=this.useOrtho?this.orthoShader:this.shader;G(B,this.projectShader,this,I,this.pixelRatio,!1,!1)},y.drawTransparent=function(I){var B=this.useOrtho?this.orthoShader:this.shader;G(B,this.projectShader,this,I,this.pixelRatio,!0,!1)},y.drawPick=function(I){var B=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;G(B,this.pickProjectShader,this,I,1,!0,!0)},y.pick=function(I){if(!I||I.id!==this.pickId)return null;var B=I.value[2]+(I.value[1]<<8)+(I.value[0]<<16);if(B>=this.pointCount||B<0)return null;var j=this.points[B],H=this._selectResult;H.index=B;for(var K=0;K<3;++K)H.position[K]=H.dataCoordinate[K]=j[K];return H},y.highlight=function(I){if(!I)this.highlightId=[1,1,1,1];else{var B=I.index,j=B&255,H=B>>8&255,K=B>>16&255;this.highlightId=[j/255,H/255,K/255,0]}};function U(I,B,j,H){var K;Array.isArray(I)?B<I.length?K=I[B]:K=void 0:K=I,K=o(K);var te=!0;r(K)&&(K="▼",te=!1);var J=a(K,j,H);return{mesh:J[0],lines:J[1],bounds:J[2],visible:te}}y.update=function(I){if(I=I||{},"perspective"in I&&(this.useOrtho=!I.perspective),"orthographic"in I&&(this.useOrtho=!!I.orthographic),"lineWidth"in I&&(this.lineWidth=I.lineWidth),"project"in I)if(Array.isArray(I.project))this.axesProject=I.project;else{var B=!!I.project;this.axesProject=[B,B,B]}if("projectScale"in I)if(Array.isArray(I.projectScale))this.projectScale=I.projectScale.slice();else{var j=+I.projectScale;this.projectScale=[j,j,j]}if(this.projectHasAlpha=!1,"projectOpacity"in I){if(Array.isArray(I.projectOpacity))this.projectOpacity=I.projectOpacity.slice();else{var j=+I.projectOpacity;this.projectOpacity=[j,j,j]}for(var H=0;H<3;++H)this.projectOpacity[H]=p(this.projectOpacity[H]),this.projectOpacity[H]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in I&&(this.opacity=p(I.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var K=I.position,te=I.font||"normal",J=I.alignment||[0,0],oe,ie;if(J.length===2)oe=J[0],ie=J[1];else{oe=[],ie=[];for(var H=0;H<J.length;++H)oe[H]=J[H][0],ie[H]=J[H][1]}var Q=[1/0,1/0,1/0],V=[-1/0,-1/0,-1/0],se=I.glyph,re=I.color,ee=I.size,ae=I.angle,fe=I.lineColor,de=-1,pe=0,W=0,ue=0;if(K.length){ue=K.length;e:for(var H=0;H<ue;++H){for(var me=K[H],be=0;be<3;++be)if(isNaN(me[be])||!isFinite(me[be]))continue e;var ke=U(se,H,te,this.pixelRatio),Pe=ke.mesh,je=ke.lines,ze=ke.bounds;pe+=Pe.cells.length*3,W+=je.edges.length*2}}var Ze=pe+W,tt=c.mallocFloat(3*Ze),Ce=c.mallocFloat(4*Ze),Ae=c.mallocFloat(2*Ze),Ne=c.mallocUint32(Ze);if(Ze>0){var qe=0,At=pe,kt=[0,0,0,1],Ve=[0,0,0,1],ft=Array.isArray(re)&&Array.isArray(re[0]),St=Array.isArray(fe)&&Array.isArray(fe[0]);e:for(var H=0;H<ue;++H){de+=1;for(var me=K[H],be=0;be<3;++be){if(isNaN(me[be])||!isFinite(me[be]))continue e;V[be]=Math.max(V[be],me[be]),Q[be]=Math.min(Q[be],me[be])}var ke=U(se,H,te,this.pixelRatio),Pe=ke.mesh,je=ke.lines,ze=ke.bounds,Wt=ke.visible;if(!Wt)kt=[1,1,1,0];else if(Array.isArray(re)){var Qt;if(ft?H<re.length?Qt=re[H]:Qt=[0,0,0,0]:Qt=re,Qt.length===3){for(var be=0;be<3;++be)kt[be]=Qt[be];kt[3]=1}else if(Qt.length===4){for(var be=0;be<4;++be)kt[be]=Qt[be];!this.hasAlpha&&Qt[3]<1&&(this.hasAlpha=!0)}}else kt[0]=kt[1]=kt[2]=0,kt[3]=1;if(!Wt)Ve=[1,1,1,0];else if(Array.isArray(fe)){var Qt;if(St?H<fe.length?Qt=fe[H]:Qt=[0,0,0,0]:Qt=fe,Qt.length===3){for(var be=0;be<3;++be)Ve[be]=Qt[be];Ve[be]=1}else if(Qt.length===4){for(var be=0;be<4;++be)Ve[be]=Qt[be];!this.hasAlpha&&Qt[3]<1&&(this.hasAlpha=!0)}}else Ve[0]=Ve[1]=Ve[2]=0,Ve[3]=1;var zt=.5;Wt?Array.isArray(ee)?H<ee.length?zt=+ee[H]:zt=12:ee?zt=+ee:this.useOrtho&&(zt=12):zt=0;var $t=0;Array.isArray(ae)?H<ae.length?$t=+ae[H]:$t=0:ae&&($t=+ae);for(var rr=Math.cos($t),Pt=Math.sin($t),me=K[H],be=0;be<3;++be)V[be]=Math.max(V[be],me[be]),Q[be]=Math.min(Q[be],me[be]);var Lt=oe,dt=ie,Lt=0;Array.isArray(oe)?H<oe.length?Lt=oe[H]:Lt=0:oe&&(Lt=oe);var dt=0;Array.isArray(ie)?H<ie.length?dt=ie[H]:dt=0:ie&&(dt=ie),Lt*=Lt>0?1-ze[0][0]:Lt<0?1+ze[1][0]:1,dt*=dt>0?1-ze[0][1]:dt<0?1+ze[1][1]:1;for(var lt=[Lt,dt],Me=Pe.cells||[],Ie=Pe.positions||[],be=0;be<Me.length;++be)for(var Te=Me[be],Le=0;Le<3;++Le){for(var Be=0;Be<3;++Be)tt[3*qe+Be]=me[Be];for(var Be=0;Be<4;++Be)Ce[4*qe+Be]=kt[Be];Ne[qe]=de;var et=Ie[Te[Le]];Ae[2*qe]=zt*(rr*et[0]-Pt*et[1]+lt[0]),Ae[2*qe+1]=zt*(Pt*et[0]+rr*et[1]+lt[1]),qe+=1}for(var Me=je.edges,Ie=je.positions,be=0;be<Me.length;++be)for(var Te=Me[be],Le=0;Le<2;++Le){for(var Be=0;Be<3;++Be)tt[3*At+Be]=me[Be];for(var Be=0;Be<4;++Be)Ce[4*At+Be]=Ve[Be];Ne[At]=de;var et=Ie[Te[Le]];Ae[2*At]=zt*(rr*et[0]-Pt*et[1]+lt[0]),Ae[2*At+1]=zt*(Pt*et[0]+rr*et[1]+lt[1]),At+=1}}}this.bounds=[Q,V],this.points=K,this.pointCount=K.length,this.vertexCount=pe,this.lineVertexCount=W,this.pointBuffer.update(tt),this.colorBuffer.update(Ce),this.glyphBuffer.update(Ae),this.idBuffer.update(Ne),c.free(tt),c.free(Ce),c.free(Ae),c.free(Ne)},y.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function X(I){var B=I.gl,j=f.createPerspective(B),H=f.createOrtho(B),K=f.createProject(B),te=f.createPickPerspective(B),J=f.createPickOrtho(B),oe=f.createPickProject(B),ie=n(B),Q=n(B),V=n(B),se=n(B),re=l(B,[{buffer:ie,size:3,type:B.FLOAT},{buffer:Q,size:4,type:B.FLOAT},{buffer:V,size:2,type:B.FLOAT},{buffer:se,size:4,type:B.UNSIGNED_BYTE,normalized:!0}]),ee=new d(B,j,H,K,ie,Q,V,se,re,te,J,oe);return ee.update(I),ee}},{"./lib/get-simple-string":326,"./lib/glyphs":327,"./lib/shaders":328,"gl-buffer":259,"gl-mat4/multiply":295,"gl-vao":358,"is-string-blank":470,"typedarray-pool":595}],331:[function(e,v,M){var r=e("glslify");M.boxVertex=r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),M.boxFragment=r([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:332}],332:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],333:[function(e,v,M){var r=e("gl-shader"),n=e("gl-buffer"),l=e("./lib/shaders");v.exports=f;function c(a,o,u){this.plot=a,this.boxBuffer=o,this.boxShader=u,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var t=c.prototype;t.draw=function(){if(this.enabled){var a=this.plot,o=this.selectBox,u=this.borderWidth;this.innerFill;var h=this.innerColor;this.outerFill;var i=this.outerColor,s=this.borderColor,p=a.box,d=a.screenBox,y=a.dataBox,b=a.viewBox,m=a.pixelRatio,_=(o[0]-y[0])*(b[2]-b[0])/(y[2]-y[0])+b[0],T=(o[1]-y[1])*(b[3]-b[1])/(y[3]-y[1])+b[1],g=(o[2]-y[0])*(b[2]-b[0])/(y[2]-y[0])+b[0],A=(o[3]-y[1])*(b[3]-b[1])/(y[3]-y[1])+b[1];if(_=Math.max(_,b[0]),T=Math.max(T,b[1]),g=Math.min(g,b[2]),A=Math.min(A,b[3]),!(g<_||A<T)){p.bind();var k=d[2]-d[0],R=d[3]-d[1];if(this.outerFill&&(p.drawBox(0,0,k,T,i),p.drawBox(0,T,_,A,i),p.drawBox(0,A,k,R,i),p.drawBox(g,T,k,A,i)),this.innerFill&&p.drawBox(_,T,g,A,h),u>0){var L=u*m;p.drawBox(_-L,T-L,g+L,T+L,s),p.drawBox(_-L,A-L,g+L,A+L,s),p.drawBox(_-L,T-L,_+L,A+L,s),p.drawBox(g-L,T-L,g+L,A+L,s)}}}},t.update=function(a){a=a||{},this.innerFill=!!a.innerFill,this.outerFill=!!a.outerFill,this.innerColor=(a.innerColor||[0,0,0,.5]).slice(),this.outerColor=(a.outerColor||[0,0,0,.5]).slice(),this.borderColor=(a.borderColor||[0,0,0,1]).slice(),this.borderWidth=a.borderWidth||0,this.selectBox=(a.selectBox||this.selectBox).slice()},t.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function f(a,o){var u=a.gl,h=n(u,[0,0,0,1,1,0,1,1]),i=r(u,l.boxVertex,l.boxFragment),s=new c(a,h,i);return s.update(o),a.addOverlay(s),s}},{"./lib/shaders":331,"gl-buffer":259,"gl-shader":335}],334:[function(e,v,M){v.exports=u;var r=e("gl-fbo"),n=e("typedarray-pool"),l=e("ndarray"),c=e("bit-twiddle").nextPow2,t=function(h,i,s){for(var p=1e8,d=-1,y=-1,b=h.shape[0],m=h.shape[1],_=0;_<b;_++)for(var T=0;T<m;T++){var g=h.get(_,T,0),A=h.get(_,T,1),k=h.get(_,T,2),R=h.get(_,T,3);if(g<255||A<255||k<255||R<255){var L=i-_,z=s-T,E=L*L+z*z;E<p&&(p=E,d=_,y=T)}}return[d,y,p]};function f(h,i,s,p,d){this.coord=[h,i],this.id=s,this.value=p,this.distance=d}function a(h,i,s){this.gl=h,this.fbo=i,this.buffer=s,this._readTimeout=null;var p=this;this._readCallback=function(){p.gl&&(i.bind(),h.readPixels(0,0,i.shape[0],i.shape[1],h.RGBA,h.UNSIGNED_BYTE,p.buffer),p._readTimeout=null)}}var o=a.prototype;Object.defineProperty(o,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(h){if(this.gl){this.fbo.shape=h;var i=this.fbo.shape[0],s=this.fbo.shape[1];if(s*i*4>this.buffer.length){n.free(this.buffer);for(var p=this.buffer=n.mallocUint8(c(s*i*4)),d=0;d<s*i*4;++d)p[d]=255}return h}}}),o.begin=function(){var h=this.gl;this.shape,h&&(this.fbo.bind(),h.clearColor(1,1,1,1),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT))},o.end=function(){var h=this.gl;h&&(h.bindFramebuffer(h.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},o.query=function(h,i,s){if(!this.gl)return null;var p=this.fbo.shape.slice();h=h|0,i=i|0,typeof s!="number"&&(s=1);var d=Math.min(Math.max(h-s,0),p[0])|0,y=Math.min(Math.max(h+s,0),p[0])|0,b=Math.min(Math.max(i-s,0),p[1])|0,m=Math.min(Math.max(i+s,0),p[1])|0;if(y<=d||m<=b)return null;var _=[y-d,m-b],T=l(this.buffer,[_[0],_[1],4],[4,p[0]*4,1],4*(d+p[0]*b)),g=t(T.hi(_[0],_[1],1),s,s),A=g[0],k=g[1];if(A<0||Math.pow(this.radius,2)<g[2])return null;var R=T.get(A,k,0),L=T.get(A,k,1),z=T.get(A,k,2),E=T.get(A,k,3);return new f(A+d|0,k+b|0,R,[L,z,E],Math.sqrt(g[2]))},o.dispose=function(){this.gl&&(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function u(h,i){var s=i[0],p=i[1],d={},y=r(h,s,p,d),b=n.mallocUint8(s*p*4);return new a(h,y,b)}},{"bit-twiddle":97,"gl-fbo":269,ndarray:495,"typedarray-pool":595}],335:[function(e,v,M){var r=e("./lib/create-uniforms"),n=e("./lib/create-attributes"),l=e("./lib/reflect"),c=e("./lib/shader-cache"),t=e("./lib/runtime-reflect"),f=e("./lib/GLError");function a(i){this.gl=i,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var o=a.prototype;o.bind=function(){this.program||this._relink();var i,s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),p=this.gl.lastAttribCount;if(s>p)for(i=p;i<s;i++)this.gl.enableVertexAttribArray(i);else if(p>s)for(i=s;i<p;i++)this.gl.disableVertexAttribArray(i);this.gl.lastAttribCount=s,this.gl.useProgram(this.program)},o.dispose=function(){for(var i=this.gl.lastAttribCount,s=0;s<i;s++)this.gl.disableVertexAttribArray(s);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function u(i,s){return i.name<s.name?-1:1}o.update=function(i,s,p,d){if(!s||arguments.length===1){var y=i;i=y.vertex,s=y.fragment,p=y.uniforms,d=y.attributes}var b=this,m=b.gl,_=b._vref;b._vref=c.shader(m,m.VERTEX_SHADER,i),_&&_.dispose(),b.vertShader=b._vref.shader;var T=this._fref;if(b._fref=c.shader(m,m.FRAGMENT_SHADER,s),T&&T.dispose(),b.fragShader=b._fref.shader,!p||!d){var g=m.createProgram();if(m.attachShader(g,b.fragShader),m.attachShader(g,b.vertShader),m.linkProgram(g),!m.getProgramParameter(g,m.LINK_STATUS)){var A=m.getProgramInfoLog(g);throw new f(A,"Error linking program:"+A)}p=p||t.uniforms(m,g),d=d||t.attributes(m,g),m.deleteProgram(g)}d=d.slice(),d.sort(u);var k=[],R=[],L=[],z;for(z=0;z<d.length;++z){var E=d[z];if(E.type.indexOf("mat")>=0){for(var S=E.type.charAt(E.type.length-1)|0,C=new Array(S),D=0;D<S;++D)C[D]=L.length,R.push(E.name+"["+D+"]"),typeof E.location=="number"?L.push(E.location+D):Array.isArray(E.location)&&E.location.length===S&&typeof E.location[D]=="number"?L.push(E.location[D]|0):L.push(-1);k.push({name:E.name,type:E.type,locations:C})}else k.push({name:E.name,type:E.type,locations:[L.length]}),R.push(E.name),typeof E.location=="number"?L.push(E.location|0):L.push(-1)}var F=0;for(z=0;z<L.length;++z)if(L[z]<0){for(;L.indexOf(F)>=0;)F+=1;L[z]=F}var N=new Array(p.length);function G(){b.program=c.program(m,b._vref,b._fref,R,L);for(var U=0;U<p.length;++U)N[U]=m.getUniformLocation(b.program,p[U].name)}G(),b._relink=G,b.types={uniforms:l(p),attributes:l(d)},b.attributes=n(m,b,k,L),Object.defineProperty(b,"uniforms",r(m,b,p,N))};function h(i,s,p,d,y){var b=new a(i);return b.update(s,p,d,y),b}v.exports=h},{"./lib/GLError":336,"./lib/create-attributes":337,"./lib/create-uniforms":338,"./lib/reflect":339,"./lib/runtime-reflect":340,"./lib/shader-cache":341}],336:[function(e,v,M){function r(n,l,c){this.shortMessage=l||"",this.longMessage=c||"",this.rawError=n||"",this.message="gl-shader: "+(l||n||"")+(c?`
`+c:""),this.stack=new Error().stack}r.prototype=new Error,r.prototype.name="GLError",r.prototype.constructor=r,v.exports=r},{}],337:[function(e,v,M){v.exports=f;var r=e("./GLError");function n(a,o,u,h,i,s){this._gl=a,this._wrapper=o,this._index=u,this._locations=h,this._dimension=i,this._constFunc=s}var l=n.prototype;l.pointer=function(o,u,h,i){var s=this,p=s._gl,d=s._locations[s._index];p.vertexAttribPointer(d,s._dimension,o||p.FLOAT,!!u,h||0,i||0),p.enableVertexAttribArray(d)},l.set=function(a,o,u,h){return this._constFunc(this._locations[this._index],a,o,u,h)},Object.defineProperty(l,"location",{get:function(){return this._locations[this._index]},set:function(a){return a!==this._locations[this._index]&&(this._locations[this._index]=a|0,this._wrapper.program=null),a|0}});function c(a,o,u,h,i,s,p){for(var d=["gl","v"],y=[],b=0;b<i;++b)d.push("x"+b),y.push("x"+b);d.push("if(x0.length===void 0){return gl.vertexAttrib"+i+"f(v,"+y.join()+")}else{return gl.vertexAttrib"+i+"fv(v,x0)}");var m=Function.apply(null,d),_=new n(a,o,u,h,i,m);Object.defineProperty(s,p,{set:function(T){return a.disableVertexAttribArray(h[u]),m(a,h[u],T),T},get:function(){return _},enumerable:!0})}function t(a,o,u,h,i,s,p){for(var d=new Array(i),y=new Array(i),b=0;b<i;++b)c(a,o,u[b],h,i,d,b),y[b]=d[b];Object.defineProperty(d,"location",{set:function(T){if(Array.isArray(T))for(var g=0;g<i;++g)y[g].location=T[g];else for(var g=0;g<i;++g)y[g].location=T+g;return T},get:function(){for(var T=new Array(i),g=0;g<i;++g)T[g]=h[u[g]];return T},enumerable:!0}),d.pointer=function(T,g,A,k){T=T||a.FLOAT,g=!!g,A=A||i*i,k=k||0;for(var R=0;R<i;++R){var L=h[u[R]];a.vertexAttribPointer(L,i,T,g,A,k+R*i),a.enableVertexAttribArray(L)}};var m=new Array(i),_=a["vertexAttrib"+i+"fv"];Object.defineProperty(s,p,{set:function(T){for(var g=0;g<i;++g){var A=h[u[g]];if(a.disableVertexAttribArray(A),Array.isArray(T[0]))_.call(a,A,T[g]);else{for(var k=0;k<i;++k)m[k]=T[i*g+k];_.call(a,A,m)}}return T},get:function(){return d},enumerable:!0})}function f(a,o,u,h){for(var i={},s=0,p=u.length;s<p;++s){var d=u[s],y=d.name,b=d.type,m=d.locations;switch(b){case"bool":case"int":case"float":c(a,o,m[0],h,1,i,y);break;default:if(b.indexOf("vec")>=0){var _=b.charCodeAt(b.length-1)-48;if(_<2||_>4)throw new r("","Invalid data type for attribute "+y+": "+b);c(a,o,m[0],h,_,i,y)}else if(b.indexOf("mat")>=0){var _=b.charCodeAt(b.length-1)-48;if(_<2||_>4)throw new r("","Invalid data type for attribute "+y+": "+b);t(a,o,m,h,_,i,y)}else throw new r("","Unknown data type for attribute "+y+": "+b);break}}return i}},{"./GLError":336}],338:[function(e,v,M){var r=e("./reflect"),n=e("./GLError");v.exports=t;function l(f){var a=new Function("y","return function(){return y}");return a(f)}function c(f,a){for(var o=new Array(f),u=0;u<f;++u)o[u]=a;return o}function t(f,a,o,u){function h(_){var T=new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+_+"])}");return T(f,a,u)}function i(_,T,g){switch(g){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+T+"],obj"+_+")";case"float":return"gl.uniform1f(locations["+T+"],obj"+_+")";default:var A=g.indexOf("vec");if(0<=A&&A<=1&&g.length===4+A){var k=g.charCodeAt(g.length-1)-48;if(k<2||k>4)throw new n("","Invalid data type");switch(g.charAt(0)){case"b":case"i":return"gl.uniform"+k+"iv(locations["+T+"],obj"+_+")";case"v":return"gl.uniform"+k+"fv(locations["+T+"],obj"+_+")";default:throw new n("","Unrecognized data type for vector "+name+": "+g)}}else if(g.indexOf("mat")===0&&g.length===4){var k=g.charCodeAt(g.length-1)-48;if(k<2||k>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+g);return"gl.uniformMatrix"+k+"fv(locations["+T+"],false,obj"+_+")"}else throw new n("","Unknown uniform data type for "+name+": "+g);break}}function s(_,T){if(typeof T!="object")return[[_,T]];var g=[];for(var A in T){var k=T[A],R=_;parseInt(A)+""===A?R+="["+A+"]":R+="."+A,typeof k=="object"?g.push.apply(g,s(R,k)):g.push([R,k])}return g}function p(_){for(var T=["return function updateProperty(obj){"],g=s("",_),A=0;A<g.length;++A){var k=g[A],R=k[0],L=k[1];u[L]&&T.push(i(R,L,o[L].type))}T.push("return obj}");var z=new Function("gl","locations",T.join(`
`));return z(f,u)}function d(_){switch(_){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var T=_.indexOf("vec");if(0<=T&&T<=1&&_.length===4+T){var g=_.charCodeAt(_.length-1)-48;if(g<2||g>4)throw new n("","Invalid data type");return _.charAt(0)==="b"?c(g,!1):c(g,0)}else if(_.indexOf("mat")===0&&_.length===4){var g=_.charCodeAt(_.length-1)-48;if(g<2||g>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+_);return c(g*g,0)}else throw new n("","Unknown uniform data type for "+name+": "+_)}}function y(_,T,g){if(typeof g=="object"){var A=b(g);Object.defineProperty(_,T,{get:l(A),set:p(g),enumerable:!0,configurable:!1})}else u[g]?Object.defineProperty(_,T,{get:h(g),set:p(g),enumerable:!0,configurable:!1}):_[T]=d(o[g].type)}function b(_){var T;if(Array.isArray(_)){T=new Array(_.length);for(var g=0;g<_.length;++g)y(T,g,_[g])}else{T={};for(var A in _)y(T,A,_[A])}return T}var m=r(o,!0);return{get:l(b(m)),set:p(m),enumerable:!0,configurable:!0}}},{"./GLError":336,"./reflect":339}],339:[function(e,v,M){v.exports=r;function r(n,l){for(var c={},t=0;t<n.length;++t)for(var f=n[t].name,a=f.split("."),o=c,u=0;u<a.length;++u){var h=a[u].split("[");if(h.length>1){h[0]in o||(o[h[0]]=[]),o=o[h[0]];for(var i=1;i<h.length;++i){var s=parseInt(h[i]);i<h.length-1||u<a.length-1?(s in o||(i<h.length-1?o[s]=[]:o[s]={}),o=o[s]):l?o[s]=t:o[s]=n[t].type}}else u<a.length-1?(h[0]in o||(o[h[0]]={}),o=o[h[0]]):l?o[h[0]]=t:o[h[0]]=n[t].type}return c}},{}],340:[function(e,v,M){M.uniforms=c,M.attributes=t;var r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},n=null;function l(f,a){if(!n){var o=Object.keys(r);n={};for(var u=0;u<o.length;++u){var h=o[u];n[f[h]]=r[h]}}return n[a]}function c(f,a){for(var o=f.getProgramParameter(a,f.ACTIVE_UNIFORMS),u=[],h=0;h<o;++h){var i=f.getActiveUniform(a,h);if(i){var s=l(f,i.type);if(i.size>1)for(var p=0;p<i.size;++p)u.push({name:i.name.replace("[0]","["+p+"]"),type:s});else u.push({name:i.name,type:s})}}return u}function t(f,a){for(var o=f.getProgramParameter(a,f.ACTIVE_ATTRIBUTES),u=[],h=0;h<o;++h){var i=f.getActiveAttrib(a,h);i&&u.push({name:i.name,type:l(f,i.type)})}return u}},{}],341:[function(e,v,M){M.shader=s,M.program=p;var r=e("./GLError"),n=e("gl-format-compiler-error"),l=typeof WeakMap>"u"?e("weakmap-shim"):WeakMap,c=new l,t=0;function f(d,y,b,m,_,T,g){this.id=d,this.src=y,this.type=b,this.shader=m,this.count=T,this.programs=[],this.cache=g}f.prototype.dispose=function(){if(--this.count===0){for(var d=this.cache,y=d.gl,b=this.programs,m=0,_=b.length;m<_;++m){var T=d.programs[b[m]];T&&(delete d.programs[m],y.deleteProgram(T))}y.deleteShader(this.shader),delete d.shaders[this.type===y.FRAGMENT_SHADER|0][this.src]}};function a(d){this.gl=d,this.shaders=[{},{}],this.programs={}}var o=a.prototype;function u(d,y,b){var m=d.createShader(y);if(d.shaderSource(m,b),d.compileShader(m),!d.getShaderParameter(m,d.COMPILE_STATUS)){var _=d.getShaderInfoLog(m);try{var T=n(_,b,y)}catch(g){throw console.warn("Failed to format compiler error: "+g),new r(_,`Error compiling shader:
`+_)}throw new r(_,T.short,T.long)}return m}o.getShaderReference=function(d,y){var b=this.gl,m=this.shaders[d===b.FRAGMENT_SHADER|0],_=m[y];if(!_||!b.isShader(_.shader)){var T=u(b,d,y);_=m[y]=new f(t++,y,d,T,[],1,this)}else _.count+=1;return _};function h(d,y,b,m,_){var T=d.createProgram();d.attachShader(T,y),d.attachShader(T,b);for(var g=0;g<m.length;++g)d.bindAttribLocation(T,_[g],m[g]);if(d.linkProgram(T),!d.getProgramParameter(T,d.LINK_STATUS)){var A=d.getProgramInfoLog(T);throw new r(A,"Error linking program: "+A)}return T}o.getProgram=function(d,y,b,m){var _=[d.id,y.id,b.join(":"),m.join(":")].join("@"),T=this.programs[_];return(!T||!this.gl.isProgram(T))&&(this.programs[_]=T=h(this.gl,d.shader,y.shader,b,m),d.programs.push(_),y.programs.push(_)),T};function i(d){var y=c.get(d);return y||(y=new a(d),c.set(d,y)),y}function s(d,y,b){return i(d).getShaderReference(y,b)}function p(d,y,b,m,_){return i(d).getProgram(y,b,m,_)}},{"./GLError":336,"gl-format-compiler-error":270,"weakmap-shim":605}],342:[function(e,v,M){v.exports=l;function r(c){this.plot=c,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var n=r.prototype;n.update=function(c){c=c||{},this.enable=(c.enable||[!0,!0,!1,!1]).slice(),this.width=(c.width||[1,1,1,1]).slice(),this.color=(c.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(t){return t.slice()}),this.center=(c.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},n.draw=function(){var c=this.enable,t=this.width,f=this.color,a=this.center,o=this.plot,u=o.line,h=o.dataBox,i=o.viewBox;if(u.bind(),h[0]<=a[0]&&a[0]<=h[2]&&h[1]<=a[1]&&a[1]<=h[3]){var s=i[0]+(a[0]-h[0])/(h[2]-h[0])*(i[2]-i[0]),p=i[1]+(a[1]-h[1])/(h[3]-h[1])*(i[3]-i[1]);c[0]&&u.drawLine(s,p,i[0],p,t[0],f[0]),c[1]&&u.drawLine(s,p,s,i[1],t[1],f[1]),c[2]&&u.drawLine(s,p,i[2],p,t[2],f[2]),c[3]&&u.drawLine(s,p,s,i[3],t[3],f[3])}},n.dispose=function(){this.plot.removeOverlay(this)};function l(c,t){var f=new r(c);return f.update(t),c.addOverlay(f),f}},{}],343:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],344:[function(e,v,M){var r=e("glslify"),n=e("gl-shader"),l=r([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),c=r([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);v.exports=function(t){return n(t,l,c,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":335,glslify:343}],345:[function(e,v,M){var r=e("gl-buffer"),n=e("gl-vao"),l=e("./shaders/index");v.exports=h;var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(i,s,p,d){this.gl=i,this.buffer=s,this.vao=p,this.shader=d,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var f=t.prototype,a=[0,0,0],o=[0,0,0],u=[0,0];f.isTransparent=function(){return!1},f.drawTransparent=function(i){},f.draw=function(i){var s=this.gl,p=this.vao,d=this.shader;p.bind(),d.bind();var y=i.model||c,b=i.view||c,m=i.projection||c,_;this.axes&&(_=this.axes.lastCubeProps.axis);for(var T=a,g=o,A=0;A<3;++A)_&&_[A]<0?(T[A]=this.bounds[0][A],g[A]=this.bounds[1][A]):(T[A]=this.bounds[1][A],g[A]=this.bounds[0][A]);u[0]=s.drawingBufferWidth,u[1]=s.drawingBufferHeight,d.uniforms.model=y,d.uniforms.view=b,d.uniforms.projection=m,d.uniforms.coordinates=[this.position,T,g],d.uniforms.colors=this.colors,d.uniforms.screenShape=u;for(var A=0;A<3;++A)d.uniforms.lineWidth=this.lineWidth[A]*this.pixelRatio,this.enabled[A]&&(p.draw(s.TRIANGLES,6,6*A),this.drawSides[A]&&p.draw(s.TRIANGLES,12,18+12*A));p.unbind()},f.update=function(i){i&&("bounds"in i&&(this.bounds=i.bounds),"position"in i&&(this.position=i.position),"lineWidth"in i&&(this.lineWidth=i.lineWidth),"colors"in i&&(this.colors=i.colors),"enabled"in i&&(this.enabled=i.enabled),"drawSides"in i&&(this.drawSides=i.drawSides))},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function h(i,s){var p=[];function d(T,g,A,k,R,L){var z=[T,g,A,0,0,0,1];z[k+3]=1,z[k]=R,p.push.apply(p,z),z[6]=-1,p.push.apply(p,z),z[k]=L,p.push.apply(p,z),p.push.apply(p,z),z[6]=1,p.push.apply(p,z),z[k]=R,p.push.apply(p,z)}d(0,0,0,0,0,1),d(0,0,0,1,0,1),d(0,0,0,2,0,1),d(1,0,0,1,-1,1),d(1,0,0,2,-1,1),d(0,1,0,0,-1,1),d(0,1,0,2,-1,1),d(0,0,1,0,-1,1),d(0,0,1,1,-1,1);var y=r(i,p),b=n(i,[{type:i.FLOAT,buffer:y,size:3,offset:0,stride:28},{type:i.FLOAT,buffer:y,size:3,offset:12,stride:28},{type:i.FLOAT,buffer:y,size:1,offset:24,stride:28}]),m=l(i);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.weight.location=2;var _=new t(i,y,b,m);return _.update(s),_}},{"./shaders/index":344,"gl-buffer":259,"gl-vao":358}],346:[function(e,v,M){var r=e("glslify"),n=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),l=r([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),c=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),t=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);M.meshShader={vertex:n,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},M.pickShader={vertex:c,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:347}],347:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],348:[function(e,v,M){var r=e("gl-vec3"),n=e("gl-vec4"),l=["xyz","xzy","yxz","yzx","zxy","zyx"],c=function(p,d,y,b){for(var m=p.points,_=p.velocities,T=p.divergences,g=[],A=[],k=[],R=[],L=[],z=[],E=0,S=0,C=n.create(),D=n.create(),F=8,N=0;N<m.length;N++){var G=m[N],U=_[N],X=T[N];d===0&&(X=y*.05),S=r.length(U)/b,C=n.create(),r.copy(C,U),C[3]=X;for(var I=0;I<F;I++)L[I]=[G[0],G[1],G[2],I];if(R.length>0)for(var I=0;I<F;I++){var B=(I+1)%F;g.push(R[I],L[I],L[B],L[B],R[B],R[I]),k.push(D,C,C,C,D,D),z.push(E,S,S,S,E,E);var j=g.length;A.push([j-6,j-5,j-4],[j-3,j-2,j-1])}var H=R;R=L,L=H;var K=D;D=C,C=K;var te=E;E=S,S=te}return{positions:g,cells:A,vectors:k,vertexIntensity:z}},t=function(p,d,y,b){for(var m=0,_=0;_<p.length;_++)for(var T=p[_].velocities,g=0;g<T.length;g++)m=Math.max(m,r.length(T[g]));for(var A=p.map(function(N){return c(N,y,b,m)}),k=[],R=[],L=[],z=[],_=0;_<A.length;_++){var E=A[_],S=k.length;k=k.concat(E.positions),L=L.concat(E.vectors),z=z.concat(E.vertexIntensity);for(var g=0;g<E.cells.length;g++){var C=E.cells[g],D=[];R.push(D);for(var F=0;F<C.length;F++)D.push(C[F]+S)}}return{positions:k,cells:R,vectors:L,vertexIntensity:z,colormap:d}},f=function(p,d){var y=p.length,b;for(b=0;b<y;b++){var m=p[b];if(m===d)return b;if(m>d)return b-1}return b},a=function(p,d,y){return p<d?d:p>y?y:p},o=function(p,d,y){var b=d.vectors,m=d.meshgrid,_=p[0],T=p[1],g=p[2],A=m[0].length,k=m[1].length,R=m[2].length,L=f(m[0],_),z=f(m[1],T),E=f(m[2],g),S=L+1,C=z+1,D=E+1;if(L=a(L,0,A-1),S=a(S,0,A-1),z=a(z,0,k-1),C=a(C,0,k-1),E=a(E,0,R-1),D=a(D,0,R-1),L<0||z<0||E<0||S>A-1||C>k-1||D>R-1)return r.create();var F=m[0][L],N=m[0][S],G=m[1][z],U=m[1][C],X=m[2][E],I=m[2][D],B=(_-F)/(N-F),j=(T-G)/(U-G),H=(g-X)/(I-X);isFinite(B)||(B=.5),isFinite(j)||(j=.5),isFinite(H)||(H=.5);var K,te,J,oe,ie,Q;switch(y.reversedX&&(L=A-1-L,S=A-1-S),y.reversedY&&(z=k-1-z,C=k-1-C),y.reversedZ&&(E=R-1-E,D=R-1-D),y.filled){case 5:ie=E,Q=D,J=z*R,oe=C*R,K=L*R*k,te=S*R*k;break;case 4:ie=E,Q=D,K=L*R,te=S*R,J=z*R*A,oe=C*R*A;break;case 3:J=z,oe=C,ie=E*k,Q=D*k,K=L*k*R,te=S*k*R;break;case 2:J=z,oe=C,K=L*k,te=S*k,ie=E*k*A,Q=D*k*A;break;case 1:K=L,te=S,ie=E*A,Q=D*A,J=z*A*R,oe=C*A*R;break;default:K=L,te=S,J=z*A,oe=C*A,ie=E*A*k,Q=D*A*k;break}var V=b[K+J+ie],se=b[K+J+Q],re=b[K+oe+ie],ee=b[K+oe+Q],ae=b[te+J+ie],fe=b[te+J+Q],de=b[te+oe+ie],pe=b[te+oe+Q],W=r.create(),ue=r.create(),me=r.create(),be=r.create();r.lerp(W,V,ae,B),r.lerp(ue,se,fe,B),r.lerp(me,re,de,B),r.lerp(be,ee,pe,B);var ke=r.create(),Pe=r.create();r.lerp(ke,W,me,j),r.lerp(Pe,ue,be,j);var je=r.create();return r.lerp(je,ke,Pe,H),je},u=function(p){var d=1/0;p.sort(function(_,T){return _-T});for(var y=p.length,b=1;b<y;b++){var m=Math.abs(p[b]-p[b-1]);m<d&&(d=m)}return d},h=function(p){for(var d=[],y=[],b=[],m={},_={},T={},g=p.length,A=0;A<g;A++){var k=p[A],R=k[0],L=k[1],z=k[2];m[R]||(d.push(R),m[R]=!0),_[L]||(y.push(L),_[L]=!0),T[z]||(b.push(z),T[z]=!0)}var E=u(d),S=u(y),C=u(b),D=Math.min(E,S,C);return isFinite(D)?D:1};v.exports=function(p,d){var y=p.startingPositions,b=p.maxLength||1e3,m=p.tubeSize||1,_=p.absoluteTubeSize,T=p.gridFill||"+x+y+z",g={};T.indexOf("-x")!==-1&&(g.reversedX=!0),T.indexOf("-y")!==-1&&(g.reversedY=!0),T.indexOf("-z")!==-1&&(g.reversedZ=!0),g.filled=l.indexOf(T.replace(/-/g,"").replace(/\+/g,""));var A=p.getVelocity||function(fe){return o(fe,p,g)},k=p.getDivergence||function(fe,de){var pe=r.create(),W=1e-4;r.add(pe,fe,[W,0,0]);var ue=A(pe);r.subtract(ue,ue,de),r.scale(ue,ue,1/W),r.add(pe,fe,[0,W,0]);var me=A(pe);r.subtract(me,me,de),r.scale(me,me,1/W),r.add(pe,fe,[0,0,W]);var be=A(pe);return r.subtract(be,be,de),r.scale(be,be,1/W),r.add(pe,ue,me),r.add(pe,pe,be),pe},R=[],L=d[0][0],z=d[0][1],E=d[0][2],S=d[1][0],C=d[1][1],D=d[1][2],F=function(fe){var de=fe[0],pe=fe[1],W=fe[2];return!(de<L||de>S||pe<z||pe>C||W<E||W>D)},N=r.distance(d[0],d[1]),G=10*N/b,U=G*G,X=1,I=0,B=y.length;B>1&&(X=h(y));for(var j=0;j<B;j++){var H=r.create();r.copy(H,y[j]);var K=[H],te=[],J=A(H),oe=H;te.push(J);var ie=[],Q=k(H,J),V=r.length(Q);isFinite(V)&&V>I&&(I=V),ie.push(V),R.push({points:K,velocities:te,divergences:ie});for(var se=0;se<b*100&&K.length<b&&F(H);){se++;var re=r.clone(J),ee=r.squaredLength(re);if(ee===0)break;if(ee>U&&r.scale(re,re,G/Math.sqrt(ee)),r.add(re,re,H),J=A(re),r.squaredDistance(oe,re)-U>-1e-4*U){K.push(re),oe=re,te.push(J);var Q=k(re,J),V=r.length(Q);isFinite(V)&&V>I&&(I=V),ie.push(V)}H=re}}var ae=t(R,p.colormap,I,X);return _?ae.tubeScale=_:(I===0&&(I=1),ae.tubeScale=m*.5*X/I),ae};var i=e("./lib/shaders"),s=e("gl-cone3d").createMesh;v.exports.createTubeMesh=function(p,d){return s(p,d,{shaders:i,traceType:"streamtube"})}},{"./lib/shaders":346,"gl-cone3d":260,"gl-vec3":377,"gl-vec4":413}],349:[function(e,v,M){var r=e("gl-shader"),n=e("glslify"),l=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),c=n([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color — in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),t=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),f=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);M.createShader=function(a){var o=r(a,l,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},M.createPickShader=function(a){var o=r(a,l,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},M.createContourShader=function(a){var o=r(a,t,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o},M.createPickContourShader=function(a){var o=r(a,t,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o}},{"gl-shader":335,glslify:350}],350:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],351:[function(e,v,M){v.exports=te;var r=e("bit-twiddle"),n=e("gl-buffer"),l=e("gl-vao"),c=e("gl-texture2d"),t=e("typedarray-pool"),f=e("colormap"),a=e("ndarray-ops"),o=e("ndarray-pack"),u=e("ndarray"),h=e("surface-nets"),i=e("gl-mat4/multiply"),s=e("gl-mat4/invert"),p=e("binary-search-bounds"),d=e("ndarray-gradient"),y=e("./lib/shaders"),b=y.createShader,m=y.createContourShader,_=y.createPickShader,T=y.createPickContourShader,g=4*(4+3+3),A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],k=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],R=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var J=0;J<3;++J){var oe=R[J],ie=(J+1)%3,Q=(J+2)%3;oe[ie+0]=1,oe[Q+3]=1,oe[J+6]=1}})();function L(J,oe,ie,Q,V){this.position=J,this.index=oe,this.uv=ie,this.level=Q,this.dataCoordinate=V}var z=256;function E(J,oe,ie,Q,V,se,re,ee,ae,fe,de,pe,W,ue,me){this.gl=J,this.shape=oe,this.bounds=ie,this.objectOffset=me,this.intensityBounds=[],this._shader=Q,this._pickShader=V,this._coordinateBuffer=se,this._vao=re,this._colorMap=ee,this._contourShader=ae,this._contourPickShader=fe,this._contourBuffer=de,this._contourVAO=pe,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new L([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=W,this._dynamicVAO=ue,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[u(t.mallocFloat(1024),[0,0]),u(t.mallocFloat(1024),[0,0]),u(t.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var S=E.prototype;S.genColormap=function(J,oe){var ie=!1,Q=o([f({colormap:J,nshades:z,format:"rgba"}).map(function(V,se){var re=oe?C(se/255,oe):V[3];return re<1&&(ie=!0),[V[0],V[1],V[2],255*re]})]);return a.divseq(Q,255),this.hasAlphaScale=ie,Q},S.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},S.isOpaque=function(){return!this.isTransparent()},S.pickSlots=1,S.setPickBase=function(J){this.pickId=J};function C(J,oe){if(!oe||!oe.length)return 1;for(var ie=0;ie<oe.length;++ie){if(oe.length<2)return 1;if(oe[ie][0]===J)return oe[ie][1];if(oe[ie][0]>J&&ie>0){var Q=(oe[ie][0]-J)/(oe[ie][0]-oe[ie-1][0]);return oe[ie][1]*(1-Q)+Q*oe[ie-1][1]}}return 1}var D=[0,0,0],F={showSurface:!1,showContour:!1,projections:[A.slice(),A.slice(),A.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function N(J,oe){var ie,Q,V,se=oe.axes&&oe.axes.lastCubeProps.axis||D,re=oe.showSurface,ee=oe.showContour;for(ie=0;ie<3;++ie)for(re=re||oe.surfaceProject[ie],Q=0;Q<3;++Q)ee=ee||oe.contourProject[ie][Q];for(ie=0;ie<3;++ie){var ae=F.projections[ie];for(Q=0;Q<16;++Q)ae[Q]=0;for(Q=0;Q<4;++Q)ae[5*Q]=1;ae[5*ie]=0,ae[12+ie]=oe.axesBounds[+(se[ie]>0)][ie],i(ae,J.model,ae);var fe=F.clipBounds[ie];for(V=0;V<2;++V)for(Q=0;Q<3;++Q)fe[V][Q]=J.clipBounds[V][Q];fe[0][ie]=-1e8,fe[1][ie]=1e8}return F.showSurface=re,F.showContour=ee,F}var G={model:A,view:A,projection:A,inverseModel:A.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},U=A.slice(),X=[1,0,0,0,1,0,0,0,1];function I(J,oe){J=J||{};var ie=this.gl;ie.disable(ie.CULL_FACE),this._colorMap.bind(0);var Q=G;Q.model=J.model||A,Q.view=J.view||A,Q.projection=J.projection||A,Q.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],Q.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],Q.objectOffset=this.objectOffset,Q.contourColor=this.contourColor[0],Q.inverseModel=s(Q.inverseModel,Q.model);for(var V=0;V<2;++V)for(var se=Q.clipBounds[V],re=0;re<3;++re)se[re]=Math.min(Math.max(this.clipBounds[V][re],-1e8),1e8);Q.kambient=this.ambientLight,Q.kdiffuse=this.diffuseLight,Q.kspecular=this.specularLight,Q.roughness=this.roughness,Q.fresnel=this.fresnel,Q.opacity=this.opacity,Q.height=0,Q.permutation=X,Q.vertexColor=this.vertexColor;var ee=U;for(i(ee,Q.view,Q.model),i(ee,Q.projection,ee),s(ee,ee),V=0;V<3;++V)Q.eyePosition[V]=ee[12+V]/ee[15];var ae=ee[15];for(V=0;V<3;++V)ae+=this.lightPosition[V]*ee[4*V+3];for(V=0;V<3;++V){var fe=ee[12+V];for(re=0;re<3;++re)fe+=ee[4*re+V]*this.lightPosition[re];Q.lightPosition[V]=fe/ae}var de=N(Q,this);if(de.showSurface){for(this._shader.bind(),this._shader.uniforms=Q,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ie.TRIANGLES,this._vertexCount),V=0;V<3;++V)!this.surfaceProject[V]||!this.vertexCount||(this._shader.uniforms.model=de.projections[V],this._shader.uniforms.clipBounds=de.clipBounds[V],this._vao.draw(ie.TRIANGLES,this._vertexCount));this._vao.unbind()}if(de.showContour){var pe=this._contourShader;Q.kambient=1,Q.kdiffuse=0,Q.kspecular=0,Q.opacity=1,pe.bind(),pe.uniforms=Q;var W=this._contourVAO;for(W.bind(),V=0;V<3;++V)for(pe.uniforms.permutation=R[V],ie.lineWidth(this.contourWidth[V]*this.pixelRatio),re=0;re<this.contourLevels[V].length;++re)re===this.highlightLevel[V]?(pe.uniforms.contourColor=this.highlightColor[V],pe.uniforms.contourTint=this.highlightTint[V]):(re===0||re-1===this.highlightLevel[V])&&(pe.uniforms.contourColor=this.contourColor[V],pe.uniforms.contourTint=this.contourTint[V]),this._contourCounts[V][re]&&(pe.uniforms.height=this.contourLevels[V][re],W.draw(ie.LINES,this._contourCounts[V][re],this._contourOffsets[V][re]));for(V=0;V<3;++V)for(pe.uniforms.model=de.projections[V],pe.uniforms.clipBounds=de.clipBounds[V],re=0;re<3;++re)if(this.contourProject[V][re]){pe.uniforms.permutation=R[re],ie.lineWidth(this.contourWidth[re]*this.pixelRatio);for(var ue=0;ue<this.contourLevels[re].length;++ue)ue===this.highlightLevel[re]?(pe.uniforms.contourColor=this.highlightColor[re],pe.uniforms.contourTint=this.highlightTint[re]):(ue===0||ue-1===this.highlightLevel[re])&&(pe.uniforms.contourColor=this.contourColor[re],pe.uniforms.contourTint=this.contourTint[re]),this._contourCounts[re][ue]&&(pe.uniforms.height=this.contourLevels[re][ue],W.draw(ie.LINES,this._contourCounts[re][ue],this._contourOffsets[re][ue]))}for(W.unbind(),W=this._dynamicVAO,W.bind(),V=0;V<3;++V)if(this._dynamicCounts[V]!==0)for(pe.uniforms.model=Q.model,pe.uniforms.clipBounds=Q.clipBounds,pe.uniforms.permutation=R[V],ie.lineWidth(this.dynamicWidth[V]*this.pixelRatio),pe.uniforms.contourColor=this.dynamicColor[V],pe.uniforms.contourTint=this.dynamicTint[V],pe.uniforms.height=this.dynamicLevel[V],W.draw(ie.LINES,this._dynamicCounts[V],this._dynamicOffsets[V]),re=0;re<3;++re)this.contourProject[re][V]&&(pe.uniforms.model=de.projections[re],pe.uniforms.clipBounds=de.clipBounds[re],W.draw(ie.LINES,this._dynamicCounts[V],this._dynamicOffsets[V]));W.unbind()}}S.draw=function(J){return I.call(this,J,!1)},S.drawTransparent=function(J){return I.call(this,J,!0)};var B={model:A,view:A,projection:A,inverseModel:A,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};S.drawPick=function(J){J=J||{};var oe=this.gl;oe.disable(oe.CULL_FACE);var ie=B;ie.model=J.model||A,ie.view=J.view||A,ie.projection=J.projection||A,ie.shape=this._field[2].shape,ie.pickId=this.pickId/255,ie.lowerBound=this.bounds[0],ie.upperBound=this.bounds[1],ie.objectOffset=this.objectOffset,ie.permutation=X;for(var Q=0;Q<2;++Q)for(var V=ie.clipBounds[Q],se=0;se<3;++se)V[se]=Math.min(Math.max(this.clipBounds[Q][se],-1e8),1e8);var re=N(ie,this);if(re.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ie,this._vao.bind(),this._vao.draw(oe.TRIANGLES,this._vertexCount),Q=0;Q<3;++Q)this.surfaceProject[Q]&&(this._pickShader.uniforms.model=re.projections[Q],this._pickShader.uniforms.clipBounds=re.clipBounds[Q],this._vao.draw(oe.TRIANGLES,this._vertexCount));this._vao.unbind()}if(re.showContour){var ee=this._contourPickShader;ee.bind(),ee.uniforms=ie;var ae=this._contourVAO;for(ae.bind(),se=0;se<3;++se)for(oe.lineWidth(this.contourWidth[se]*this.pixelRatio),ee.uniforms.permutation=R[se],Q=0;Q<this.contourLevels[se].length;++Q)this._contourCounts[se][Q]&&(ee.uniforms.height=this.contourLevels[se][Q],ae.draw(oe.LINES,this._contourCounts[se][Q],this._contourOffsets[se][Q]));for(Q=0;Q<3;++Q)for(ee.uniforms.model=re.projections[Q],ee.uniforms.clipBounds=re.clipBounds[Q],se=0;se<3;++se)if(this.contourProject[Q][se]){ee.uniforms.permutation=R[se],oe.lineWidth(this.contourWidth[se]*this.pixelRatio);for(var fe=0;fe<this.contourLevels[se].length;++fe)this._contourCounts[se][fe]&&(ee.uniforms.height=this.contourLevels[se][fe],ae.draw(oe.LINES,this._contourCounts[se][fe],this._contourOffsets[se][fe]))}ae.unbind()}},S.pick=function(J){if(!J||J.id!==this.pickId)return null;var oe=this._field[2].shape,ie=this._pickResult,Q=oe[0]*(J.value[0]+(J.value[2]>>4)/16)/255,V=Math.floor(Q),se=Q-V,re=oe[1]*(J.value[1]+(J.value[2]&15)/16)/255,ee=Math.floor(re),ae=re-ee;V+=1,ee+=1;var fe=ie.position;fe[0]=fe[1]=fe[2]=0;for(var de=0;de<2;++de)for(var pe=de?se:1-se,W=0;W<2;++W)for(var ue=W?ae:1-ae,me=V+de,be=ee+W,ke=pe*ue,Pe=0;Pe<3;++Pe)fe[Pe]+=this._field[Pe].get(me,be)*ke;for(var je=this._pickResult.level,ze=0;ze<3;++ze)if(je[ze]=p.le(this.contourLevels[ze],fe[ze]),je[ze]<0)this.contourLevels[ze].length>0&&(je[ze]=0);else if(je[ze]<this.contourLevels[ze].length-1){var Ze=this.contourLevels[ze][je[ze]],tt=this.contourLevels[ze][je[ze]+1];Math.abs(Ze-fe[ze])>Math.abs(tt-fe[ze])&&(je[ze]+=1)}for(ie.index[0]=se<.5?V:V+1,ie.index[1]=ae<.5?ee:ee+1,ie.uv[0]=Q/oe[0],ie.uv[1]=re/oe[1],Pe=0;Pe<3;++Pe)ie.dataCoordinate[Pe]=this._field[Pe].get(ie.index[0],ie.index[1]);return ie},S.padField=function(J,oe){var ie=oe.shape.slice(),Q=J.shape.slice();a.assign(J.lo(1,1).hi(ie[0],ie[1]),oe),a.assign(J.lo(1).hi(ie[0],1),oe.hi(ie[0],1)),a.assign(J.lo(1,Q[1]-1).hi(ie[0],1),oe.lo(0,ie[1]-1).hi(ie[0],1)),a.assign(J.lo(0,1).hi(1,ie[1]),oe.hi(1)),a.assign(J.lo(Q[0]-1,1).hi(1,ie[1]),oe.lo(ie[0]-1)),J.set(0,0,oe.get(0,0)),J.set(0,Q[1]-1,oe.get(0,ie[1]-1)),J.set(Q[0]-1,0,oe.get(ie[0]-1,0)),J.set(Q[0]-1,Q[1]-1,oe.get(ie[0]-1,ie[1]-1))};function j(J,oe){return Array.isArray(J)?[oe(J[0]),oe(J[1]),oe(J[2])]:[oe(J),oe(J),oe(J)]}function H(J){return Array.isArray(J)?J.length===3?[J[0],J[1],J[2],1]:[J[0],J[1],J[2],J[3]]:[0,0,0,1]}function K(J){if(Array.isArray(J)){if(Array.isArray(J))return[H(J[0]),H(J[1]),H(J[2])];var oe=H(J);return[oe.slice(),oe.slice(),oe.slice()]}}S.update=function(J){J=J||{},this.objectOffset=J.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in J&&(this.contourWidth=j(J.contourWidth,Number)),"showContour"in J&&(this.showContour=j(J.showContour,Boolean)),"showSurface"in J&&(this.showSurface=!!J.showSurface),"contourTint"in J&&(this.contourTint=j(J.contourTint,Boolean)),"contourColor"in J&&(this.contourColor=K(J.contourColor)),"contourProject"in J&&(this.contourProject=j(J.contourProject,function(qt){return j(qt,Boolean)})),"surfaceProject"in J&&(this.surfaceProject=J.surfaceProject),"dynamicColor"in J&&(this.dynamicColor=K(J.dynamicColor)),"dynamicTint"in J&&(this.dynamicTint=j(J.dynamicTint,Number)),"dynamicWidth"in J&&(this.dynamicWidth=j(J.dynamicWidth,Number)),"opacity"in J&&(this.opacity=J.opacity),"opacityscale"in J&&(this.opacityscale=J.opacityscale),"colorBounds"in J&&(this.colorBounds=J.colorBounds),"vertexColor"in J&&(this.vertexColor=J.vertexColor?1:0),"colormap"in J&&this._colorMap.setPixels(this.genColormap(J.colormap,this.opacityscale));var oe=J.field||J.coords&&J.coords[2]||null,ie=!1;if(oe||(this._field[2].shape[0]||this._field[2].shape[2]?oe=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):oe=this._field[2].hi(0,0)),"field"in J||"coords"in J){var Q=(oe.shape[0]+2)*(oe.shape[1]+2);Q>this._field[2].data.length&&(t.freeFloat(this._field[2].data),this._field[2].data=t.mallocFloat(r.nextPow2(Q))),this._field[2]=u(this._field[2].data,[oe.shape[0]+2,oe.shape[1]+2]),this.padField(this._field[2],oe),this.shape=oe.shape.slice();for(var V=this.shape,se=0;se<2;++se)this._field[2].size>this._field[se].data.length&&(t.freeFloat(this._field[se].data),this._field[se].data=t.mallocFloat(this._field[2].size)),this._field[se]=u(this._field[se].data,[V[0]+2,V[1]+2]);if(J.coords){var re=J.coords;if(!Array.isArray(re)||re.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(se=0;se<2;++se){var ee=re[se];for(W=0;W<2;++W)if(ee.shape[W]!==V[W])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[se],ee)}}else if(J.ticks){var ae=J.ticks;if(!Array.isArray(ae)||ae.length!==2)throw new Error("gl-surface: invalid ticks");for(se=0;se<2;++se){var fe=ae[se];if((Array.isArray(fe)||fe.length)&&(fe=u(fe)),fe.shape[0]!==V[se])throw new Error("gl-surface: invalid tick length");var de=u(fe.data,V);de.stride[se]=fe.stride[0],de.stride[se^1]=0,this.padField(this._field[se],de)}}else{for(se=0;se<2;++se){var pe=[0,0];pe[se]=1,this._field[se]=u(this._field[se].data,[V[0]+2,V[1]+2],pe,0)}this._field[0].set(0,0,0);for(var W=0;W<V[0];++W)this._field[0].set(W+1,0,W);for(this._field[0].set(V[0]+1,0,V[0]-1),this._field[1].set(0,0,0),W=0;W<V[1];++W)this._field[1].set(0,W+1,W);this._field[1].set(0,V[1]+1,V[1]-1)}var ue=this._field,me=u(t.mallocFloat(ue[2].size*3*2),[3,V[0]+2,V[1]+2,2]);for(se=0;se<3;++se)d(me.pick(se),ue[se],"mirror");var be=u(t.mallocFloat(ue[2].size*3),[V[0]+2,V[1]+2,3]);for(se=0;se<V[0]+2;++se)for(W=0;W<V[1]+2;++W){var ke=me.get(0,se,W,0),Pe=me.get(0,se,W,1),je=me.get(1,se,W,0),ze=me.get(1,se,W,1),Ze=me.get(2,se,W,0),tt=me.get(2,se,W,1),Ce=je*tt-ze*Ze,Ae=Ze*Pe-tt*ke,Ne=ke*ze-Pe*je,qe=Math.sqrt(Ce*Ce+Ae*Ae+Ne*Ne);qe<1e-8?(qe=Math.max(Math.abs(Ce),Math.abs(Ae),Math.abs(Ne)),qe<1e-8?(Ne=1,Ae=Ce=0,qe=1):qe=1/qe):qe=1/Math.sqrt(qe),be.set(se,W,0,Ce*qe),be.set(se,W,1,Ae*qe),be.set(se,W,2,Ne*qe)}t.free(me.data);var At=[1/0,1/0,1/0],kt=[-1/0,-1/0,-1/0],Ve=1/0,ft=-1/0,St=(V[0]-1)*(V[1]-1)*6,Wt=t.mallocFloat(r.nextPow2(10*St)),Qt=0,zt=0;for(se=0;se<V[0]-1;++se)e:for(W=0;W<V[1]-1;++W){for(var $t=0;$t<2;++$t)for(var rr=0;rr<2;++rr)for(var Pt=0;Pt<3;++Pt){var Lt=this._field[Pt].get(1+se+$t,1+W+rr);if(isNaN(Lt)||!isFinite(Lt))continue e}for(Pt=0;Pt<6;++Pt){var dt=se+k[Pt][0],lt=W+k[Pt][1],Te=this._field[0].get(dt+1,lt+1),Le=this._field[1].get(dt+1,lt+1);Lt=this._field[2].get(dt+1,lt+1),Ce=be.get(dt+1,lt+1,0),Ae=be.get(dt+1,lt+1,1),Ne=be.get(dt+1,lt+1,2),J.intensity&&(Be=J.intensity.get(dt,lt));var Be=J.intensity?J.intensity.get(dt,lt):Lt+this.objectOffset[2];Wt[Qt++]=dt,Wt[Qt++]=lt,Wt[Qt++]=Te,Wt[Qt++]=Le,Wt[Qt++]=Lt,Wt[Qt++]=0,Wt[Qt++]=Be,Wt[Qt++]=Ce,Wt[Qt++]=Ae,Wt[Qt++]=Ne,At[0]=Math.min(At[0],Te+this.objectOffset[0]),At[1]=Math.min(At[1],Le+this.objectOffset[1]),At[2]=Math.min(At[2],Lt+this.objectOffset[2]),Ve=Math.min(Ve,Be),kt[0]=Math.max(kt[0],Te+this.objectOffset[0]),kt[1]=Math.max(kt[1],Le+this.objectOffset[1]),kt[2]=Math.max(kt[2],Lt+this.objectOffset[2]),ft=Math.max(ft,Be),zt+=1}}for(J.intensityBounds&&(Ve=+J.intensityBounds[0],ft=+J.intensityBounds[1]),se=6;se<Qt;se+=10)Wt[se]=(Wt[se]-Ve)/(ft-Ve);this._vertexCount=zt,this._coordinateBuffer.update(Wt.subarray(0,Qt)),t.freeFloat(Wt),t.free(be.data),this.bounds=[At,kt],this.intensity=J.intensity||this._field[2],(this.intensityBounds[0]!==Ve||this.intensityBounds[1]!==ft)&&(ie=!0),this.intensityBounds=[Ve,ft]}if("levels"in J){var et=J.levels;for(Array.isArray(et[0])?et=et.slice():et=[[],[],et],se=0;se<3;++se)et[se]=et[se].slice(),et[se].sort(function(qt,Zt){return qt-Zt});for(se=0;se<3;++se)for(W=0;W<et[se].length;++W)et[se][W]-=this.objectOffset[se];e:for(se=0;se<3;++se){if(et[se].length!==this.contourLevels[se].length){ie=!0;break}for(W=0;W<et[se].length;++W)if(et[se][W]!==this.contourLevels[se][W]){ie=!0;break e}}this.contourLevels=et}if(ie){ue=this._field,V=this.shape;for(var Me=[],Ie=0;Ie<3;++Ie){var He=this.contourLevels[Ie],Xe=[],ht=[],it=[0,0,0];for(se=0;se<He.length;++se){var Ge=h(this._field[Ie],He[se]);Xe.push(Me.length/5|0),zt=0;e:for(W=0;W<Ge.cells.length;++W){var ot=Ge.cells[W];for(Pt=0;Pt<2;++Pt){var Je=Ge.positions[ot[Pt]],st=Je[0],It=Math.floor(st)|0,Ft=st-It,nr=Je[1],We=Math.floor(nr)|0,Fe=nr-We,_t=!1;t:for(var Mt=0;Mt<3;++Mt){it[Mt]=0;var wt=(Ie+Mt+1)%3;for($t=0;$t<2;++$t){var Dt=$t?Ft:1-Ft;for(dt=Math.min(Math.max(It+$t,0),V[0])|0,rr=0;rr<2;++rr){var Rt=rr?Fe:1-Fe;if(lt=Math.min(Math.max(We+rr,0),V[1])|0,Mt<2?Lt=this._field[wt].get(dt,lt):Lt=(this.intensity.get(dt,lt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Lt)||isNaN(Lt)){_t=!0;break t}var Bt=Dt*Rt;it[Mt]+=Bt*Lt}}}if(!_t)Me.push(it[0],it[1],Je[0],Je[1],it[2]),zt+=1;else{if(Pt>0){for(var Nt=0;Nt<5;++Nt)Me.pop();zt-=1}continue e}}}ht.push(zt)}this._contourOffsets[Ie]=Xe,this._contourCounts[Ie]=ht}var er=t.mallocFloat(Me.length);for(se=0;se<Me.length;++se)er[se]=Me[se];this._contourBuffer.update(er),t.freeFloat(er)}},S.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var J=0;J<3;++J)t.freeFloat(this._field[J].data)},S.highlight=function(J){var oe;if(!J){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(oe=0;oe<3;++oe)this.enableHighlight[oe]?this.highlightLevel[oe]=J.level[oe]:this.highlightLevel[oe]=-1;var ie;for(this.snapToData?ie=J.dataCoordinate:ie=J.position,oe=0;oe<3;++oe)ie[oe]-=this.objectOffset[oe];if(!((!this.enableDynamic[0]||ie[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||ie[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||ie[2]===this.dynamicLevel[2]))){for(var Q=0,V=this.shape,se=t.mallocFloat(12*V[0]*V[1]),re=0;re<3;++re){if(!this.enableDynamic[re]){this.dynamicLevel[re]=NaN,this._dynamicCounts[re]=0;continue}this.dynamicLevel[re]=ie[re];var ee=(re+1)%3,ae=(re+2)%3,fe=this._field[re],de=this._field[ee],pe=this._field[ae],W=h(fe,ie[re]),ue=W.cells,me=W.positions;for(this._dynamicOffsets[re]=Q,oe=0;oe<ue.length;++oe)for(var be=ue[oe],ke=0;ke<2;++ke){var Pe=me[be[ke]],je=+Pe[0],ze=je|0,Ze=Math.min(ze+1,V[0])|0,tt=je-ze,Ce=1-tt,Ae=+Pe[1],Ne=Ae|0,qe=Math.min(Ne+1,V[1])|0,At=Ae-Ne,kt=1-At,Ve=Ce*kt,ft=Ce*At,St=tt*kt,Wt=tt*At,Qt=Ve*de.get(ze,Ne)+ft*de.get(ze,qe)+St*de.get(Ze,Ne)+Wt*de.get(Ze,qe),zt=Ve*pe.get(ze,Ne)+ft*pe.get(ze,qe)+St*pe.get(Ze,Ne)+Wt*pe.get(Ze,qe);if(isNaN(Qt)||isNaN(zt)){ke&&(Q-=1);break}se[2*Q+0]=Qt,se[2*Q+1]=zt,Q+=1}this._dynamicCounts[re]=Q-this._dynamicOffsets[re]}this._dynamicBuffer.update(se.subarray(0,2*Q)),t.freeFloat(se)}};function te(J){var oe=J.gl,ie=b(oe),Q=_(oe),V=m(oe),se=T(oe),re=n(oe),ee=l(oe,[{buffer:re,size:4,stride:g,offset:0},{buffer:re,size:3,stride:g,offset:16},{buffer:re,size:3,stride:g,offset:28}]),ae=n(oe),fe=l(oe,[{buffer:ae,size:4,stride:20,offset:0},{buffer:ae,size:1,stride:20,offset:16}]),de=n(oe),pe=l(oe,[{buffer:de,size:2,type:oe.FLOAT}]),W=c(oe,1,z,oe.RGBA,oe.UNSIGNED_BYTE);W.minFilter=oe.LINEAR,W.magFilter=oe.LINEAR;var ue=new E(oe,[0,0],[[0,0,0],[0,0,0]],ie,Q,re,ee,W,V,se,ae,fe,de,pe,[0,0,0]),me={levels:[[],[],[]]};for(var be in J)me[be]=J[be];return me.colormap=me.colormap||"jet",ue.update(me),ue}},{"./lib/shaders":349,"binary-search-bounds":96,"bit-twiddle":97,colormap:131,"gl-buffer":259,"gl-mat4/invert":293,"gl-mat4/multiply":295,"gl-texture2d":353,"gl-vao":358,ndarray:495,"ndarray-gradient":488,"ndarray-ops":490,"ndarray-pack":491,"surface-nets":570,"typedarray-pool":595}],352:[function(e,v,M){var r=e("css-font"),n=e("pick-by-alias"),l=e("regl"),c=e("gl-util/context"),t=e("es6-weak-map"),f=e("color-normalize"),a=e("font-atlas"),o=e("typedarray-pool"),u=e("parse-rect"),h=e("is-plain-obj"),i=e("parse-unit"),s=e("to-px"),p=e("detect-kerning"),d=e("object-assign"),y=e("font-measure"),b=e("flatten-vertex-data"),m=e("bit-twiddle"),_=m.nextPow2,T=new t,g=!1;if(document.body){var A=document.body.appendChild(document.createElement("div"));A.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(A).fontStretch&&(g=!0),document.body.removeChild(A)}var k=function(z){R(z)?(z={regl:z},this.gl=z.regl._gl):this.gl=c(z),this.shader=T.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=z.regl||l({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),T.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(h(z)?z:{})};k.prototype.createShader=function(){var z=this.regl,E=z({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:z.prop("count"),offset:z.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:z.this("sizeBuffer")},width:{offset:0,stride:8,buffer:z.this("sizeBuffer")},char:z.this("charBuffer"),position:z.this("position")},uniforms:{atlasSize:function(C,D){return[D.atlas.width,D.atlas.height]},atlasDim:function(C,D){return[D.atlas.cols,D.atlas.rows]},atlas:function(C,D){return D.atlas.texture},charStep:function(C,D){return D.atlas.step},em:function(C,D){return D.atlas.em},color:z.prop("color"),opacity:z.prop("opacity"),viewport:z.this("viewportArray"),scale:z.this("scale"),align:z.prop("align"),baseline:z.prop("baseline"),translate:z.this("translate"),positionOffset:z.prop("positionOffset")},primitive:"points",viewport:z.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				`+(k.normalViewport?"":"vec2 positionOffset = vec2(positionOffset.x,- positionOffset.y);")+`

				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ positionOffset))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				`+(k.normalViewport?"position.y = 1. - position.y;":"")+`

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform sampler2D atlas;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),S={};return{regl:z,draw:E,atlas:S}},k.prototype.update=function(z){var E=this;if(typeof z=="string")z={text:z};else if(!z)return;z=n(z,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),z.opacity!=null&&(Array.isArray(z.opacity)?this.opacity=z.opacity.map(function(Ae){return parseFloat(Ae)}):this.opacity=parseFloat(z.opacity)),z.viewport!=null&&(this.viewport=u(z.viewport),k.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),z.kerning!=null&&(this.kerning=z.kerning),z.offset!=null&&(typeof z.offset=="number"&&(z.offset=[z.offset,0]),this.positionOffset=b(z.offset)),z.direction&&(this.direction=z.direction),z.range&&(this.range=z.range,this.scale=[1/(z.range[2]-z.range[0]),1/(z.range[3]-z.range[1])],this.translate=[-z.range[0],-z.range[1]]),z.scale&&(this.scale=z.scale),z.translate&&(this.translate=z.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!z.font&&(z.font=k.baseFontSize+"px sans-serif");var S=!1,C=!1;if(z.font&&(Array.isArray(z.font)?z.font:[z.font]).forEach(function(Ae,Ne){if(typeof Ae=="string")try{Ae=r.parse(Ae)}catch{Ae=r.parse(k.baseFontSize+"px "+Ae)}else Ae=r.parse(r.stringify(Ae));var qe=r.stringify({size:k.baseFontSize,family:Ae.family,stretch:g?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style}),At=i(Ae.size),kt=Math.round(At[0]*s(At[1]));if(kt!==E.fontSize[Ne]&&(C=!0,E.fontSize[Ne]=kt),(!E.font[Ne]||qe!=E.font[Ne].baseString)&&(S=!0,E.font[Ne]=k.fonts[qe],!E.font[Ne])){var Ve=Ae.family.join(", "),ft=[Ae.style];Ae.style!=Ae.variant&&ft.push(Ae.variant),Ae.variant!=Ae.weight&&ft.push(Ae.weight),g&&Ae.weight!=Ae.stretch&&ft.push(Ae.stretch),E.font[Ne]={baseString:qe,family:Ve,weight:Ae.weight,stretch:Ae.stretch,style:Ae.style,variant:Ae.variant,width:{},kerning:{},metrics:y(Ve,{origin:"top",fontSize:k.baseFontSize,fontStyle:ft.join(" ")})},k.fonts[qe]=E.font[Ne]}}),(S||C)&&this.font.forEach(function(Ae,Ne){var qe=r.stringify({size:E.fontSize[Ne],family:Ae.family,stretch:g?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style});if(E.fontAtlas[Ne]=E.shader.atlas[qe],!E.fontAtlas[Ne]){var At=Ae.metrics;E.shader.atlas[qe]=E.fontAtlas[Ne]={fontString:qe,step:Math.ceil(E.fontSize[Ne]*At.bottom*.5)*2,em:E.fontSize[Ne],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:E.regl.texture()}}z.text==null&&(z.text=E.text)}),typeof z.text=="string"&&z.position&&z.position.length>2){for(var D=Array(z.position.length*.5),F=0;F<D.length;F++)D[F]=z.text;z.text=D}var N;if(z.text!=null||S){if(this.textOffsets=[0],Array.isArray(z.text)){this.count=z.text[0].length,this.counts=[this.count];for(var G=1;G<z.text.length;G++)this.textOffsets[G]=this.textOffsets[G-1]+z.text[G-1].length,this.count+=z.text[G].length,this.counts.push(z.text[G].length);this.text=z.text.join("")}else this.text=z.text,this.count=this.text.length,this.counts=[this.count];N=[],this.font.forEach(function(Ae,Ne){k.atlasContext.font=Ae.baseString;for(var qe=E.fontAtlas[Ne],At=0;At<E.text.length;At++){var kt=E.text.charAt(At);if(qe.ids[kt]==null&&(qe.ids[kt]=qe.chars.length,qe.chars.push(kt),N.push(kt)),Ae.width[kt]==null&&(Ae.width[kt]=k.atlasContext.measureText(kt).width/k.baseFontSize,E.kerning)){var Ve=[];for(var ft in Ae.width)Ve.push(ft+kt,kt+ft);d(Ae.kerning,p(Ae.family,{pairs:Ve}))}}})}if(z.position)if(z.position.length>2){for(var U=!z.position[0].length,X=o.mallocFloat(this.count*2),I=0,B=0;I<this.counts.length;I++){var j=this.counts[I];if(U)for(var H=0;H<j;H++)X[B++]=z.position[I*2],X[B++]=z.position[I*2+1];else for(var K=0;K<j;K++)X[B++]=z.position[I][0],X[B++]=z.position[I][1]}this.position.call?this.position({type:"float",data:X}):this.position=this.regl.buffer({type:"float",data:X}),o.freeFloat(X)}else this.position.destroy&&this.position.destroy(),this.position={constant:z.position};if(z.text||S){var te=o.mallocUint8(this.count),J=o.mallocFloat(this.count*2);this.textWidth=[];for(var oe=0,ie=0;oe<this.counts.length;oe++){for(var Q=this.counts[oe],V=this.font[oe]||this.font[0],se=this.fontAtlas[oe]||this.fontAtlas[0],re=0;re<Q;re++){var ee=this.text.charAt(ie),ae=this.text.charAt(ie-1);if(te[ie]=se.ids[ee],J[ie*2]=V.width[ee],re){var fe=J[ie*2-2],de=J[ie*2],pe=J[ie*2-1],W=pe+fe*.5+de*.5;if(this.kerning){var ue=V.kerning[ae+ee];ue&&(W+=ue*.001)}J[ie*2+1]=W}else J[ie*2+1]=J[ie*2]*.5;ie++}this.textWidth.push(J.length?J[ie*2-2]*.5+J[ie*2-1]:0)}z.align||(z.align=this.align),this.charBuffer({data:te,type:"uint8",usage:"stream"}),this.sizeBuffer({data:J,type:"float",usage:"stream"}),o.freeUint8(te),o.freeFloat(J),N.length&&this.font.forEach(function(Ae,Ne){var qe=E.fontAtlas[Ne],At=qe.step,kt=Math.floor(k.maxAtlasSize/At),Ve=Math.min(kt,qe.chars.length),ft=Math.ceil(qe.chars.length/Ve),St=_(Ve*At),Wt=_(ft*At);qe.width=St,qe.height=Wt,qe.rows=ft,qe.cols=Ve,qe.em&&qe.texture({data:a({canvas:k.atlasCanvas,font:qe.fontString,chars:qe.chars,shape:[St,Wt],step:[At,At]})})})}if(z.align&&(this.align=z.align,this.alignOffset=this.textWidth.map(function(Ae,Ne){var qe=Array.isArray(E.align)?E.align.length>1?E.align[Ne]:E.align[0]:E.align;if(typeof qe=="number")return qe;switch(qe){case"right":case"end":return-Ae;case"center":case"centre":case"middle":return-Ae*.5}return 0})),this.baseline==null&&z.baseline==null&&(z.baseline=0),z.baseline!=null&&(this.baseline=z.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Ae,Ne){var qe=(E.font[Ne]||E.font[0]).metrics,At=0;return At+=qe.bottom*.5,typeof Ae=="number"?At+=Ae-qe.baseline:At+=-qe[Ae],k.normalViewport||(At*=-1),At})),z.color!=null)if(z.color||(z.color="transparent"),typeof z.color=="string"||!isNaN(z.color))this.color=f(z.color,"uint8");else{var me;if(typeof z.color[0]=="number"&&z.color.length>this.counts.length){var be=z.color.length;me=o.mallocUint8(be);for(var ke=(z.color.subarray||z.color.slice).bind(z.color),Pe=0;Pe<be;Pe+=4)me.set(f(ke(Pe,Pe+4),"uint8"),Pe)}else{var je=z.color.length;me=o.mallocUint8(je*4);for(var ze=0;ze<je;ze++)me.set(f(z.color[ze]||0,"uint8"),ze*4)}this.color=me}if(z.position||z.text||z.color||z.baseline||z.align||z.font||z.offset||z.opacity){var Ze=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(Ze){var tt=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(tt);for(var Ce=0;Ce<this.batch.length;Ce++)this.batch[Ce]={count:this.counts.length>1?this.counts[Ce]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Ce]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Ce*4,Ce*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Ce]:this.opacity,baseline:this.baselineOffset[Ce]!=null?this.baselineOffset[Ce]:this.baselineOffset[0],align:this.align?this.alignOffset[Ce]!=null?this.alignOffset[Ce]:this.alignOffset[0]:0,atlas:this.fontAtlas[Ce]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Ce*2,Ce*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},k.prototype.destroy=function(){},k.prototype.kerning=!0,k.prototype.position={constant:new Float32Array(2)},k.prototype.translate=null,k.prototype.scale=null,k.prototype.font=null,k.prototype.text="",k.prototype.positionOffset=[0,0],k.prototype.opacity=1,k.prototype.color=new Uint8Array([0,0,0,255]),k.prototype.alignOffset=[0,0],k.normalViewport=!1,k.maxAtlasSize=1024,k.atlasCanvas=document.createElement("canvas"),k.atlasContext=k.atlasCanvas.getContext("2d",{alpha:!1}),k.baseFontSize=64,k.fonts={};function R(L){return typeof L=="function"&&L._gl&&L.prop&&L.texture&&L.buffer}v.exports=k},{"bit-twiddle":97,"color-normalize":125,"css-font":144,"detect-kerning":172,"es6-weak-map":233,"flatten-vertex-data":244,"font-atlas":245,"font-measure":246,"gl-util/context":354,"is-plain-obj":469,"object-assign":499,"parse-rect":504,"parse-unit":506,"pick-by-alias":511,regl:540,"to-px":578,"typedarray-pool":595}],353:[function(e,v,M){var r=e("ndarray"),n=e("ndarray-ops"),l=e("typedarray-pool");v.exports=T;var c=null,t=null,f=null;function a(g){c=[g.LINEAR,g.NEAREST_MIPMAP_LINEAR,g.LINEAR_MIPMAP_NEAREST,g.LINEAR_MIPMAP_NEAREST],t=[g.NEAREST,g.LINEAR,g.NEAREST_MIPMAP_NEAREST,g.NEAREST_MIPMAP_LINEAR,g.LINEAR_MIPMAP_NEAREST,g.LINEAR_MIPMAP_LINEAR],f=[g.REPEAT,g.CLAMP_TO_EDGE,g.MIRRORED_REPEAT]}function o(g){return typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&g instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&g instanceof HTMLVideoElement||typeof ImageData<"u"&&g instanceof ImageData}var u=function(g,A){n.muls(g,A,255)};function h(g,A,k){var R=g.gl,L=R.getParameter(R.MAX_TEXTURE_SIZE);if(A<0||A>L||k<0||k>L)throw new Error("gl-texture2d: Invalid texture size");return g._shape=[A,k],g.bind(),R.texImage2D(R.TEXTURE_2D,0,g.format,A,k,0,g.format,g.type,null),g._mipLevels=[0],g}function i(g,A,k,R,L,z){this.gl=g,this.handle=A,this.format=L,this.type=z,this._shape=[k,R],this._mipLevels=[0],this._magFilter=g.NEAREST,this._minFilter=g.NEAREST,this._wrapS=g.CLAMP_TO_EDGE,this._wrapT=g.CLAMP_TO_EDGE,this._anisoSamples=1;var E=this,S=[this._wrapS,this._wrapT];Object.defineProperties(S,[{get:function(){return E._wrapS},set:function(D){return E.wrapS=D}},{get:function(){return E._wrapT},set:function(D){return E.wrapT=D}}]),this._wrapVector=S;var C=[this._shape[0],this._shape[1]];Object.defineProperties(C,[{get:function(){return E._shape[0]},set:function(D){return E.width=D}},{get:function(){return E._shape[1]},set:function(D){return E.height=D}}]),this._shapeVector=C}var s=i.prototype;Object.defineProperties(s,{minFilter:{get:function(){return this._minFilter},set:function(g){this.bind();var A=this.gl;if(this.type===A.FLOAT&&c.indexOf(g)>=0&&(A.getExtension("OES_texture_float_linear")||(g=A.NEAREST)),t.indexOf(g)<0)throw new Error("gl-texture2d: Unknown filter mode "+g);return A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,g),this._minFilter=g}},magFilter:{get:function(){return this._magFilter},set:function(g){this.bind();var A=this.gl;if(this.type===A.FLOAT&&c.indexOf(g)>=0&&(A.getExtension("OES_texture_float_linear")||(g=A.NEAREST)),t.indexOf(g)<0)throw new Error("gl-texture2d: Unknown filter mode "+g);return A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,g),this._magFilter=g}},mipSamples:{get:function(){return this._anisoSamples},set:function(g){var A=this._anisoSamples;if(this._anisoSamples=Math.max(g,1)|0,A!==this._anisoSamples){var k=this.gl.getExtension("EXT_texture_filter_anisotropic");k&&this.gl.texParameterf(this.gl.TEXTURE_2D,k.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(g){if(this.bind(),f.indexOf(g)<0)throw new Error("gl-texture2d: Unknown wrap mode "+g);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,g),this._wrapS=g}},wrapT:{get:function(){return this._wrapT},set:function(g){if(this.bind(),f.indexOf(g)<0)throw new Error("gl-texture2d: Unknown wrap mode "+g);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,g),this._wrapT=g}},wrap:{get:function(){return this._wrapVector},set:function(g){if(Array.isArray(g)||(g=[g,g]),g.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var A=0;A<2;++A)if(f.indexOf(g[A])<0)throw new Error("gl-texture2d: Unknown wrap mode "+g);this._wrapS=g[0],this._wrapT=g[1];var k=this.gl;return this.bind(),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,this._wrapS),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,this._wrapT),g}},shape:{get:function(){return this._shapeVector},set:function(g){if(!Array.isArray(g))g=[g|0,g|0];else if(g.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return h(this,g[0]|0,g[1]|0),[g[0]|0,g[1]|0]}},width:{get:function(){return this._shape[0]},set:function(g){return g=g|0,h(this,g,this._shape[1]),g}},height:{get:function(){return this._shape[1]},set:function(g){return g=g|0,h(this,this._shape[0],g),g}}}),s.bind=function(g){var A=this.gl;return g!==void 0&&A.activeTexture(A.TEXTURE0+(g|0)),A.bindTexture(A.TEXTURE_2D,this.handle),g!==void 0?g|0:A.getParameter(A.ACTIVE_TEXTURE)-A.TEXTURE0},s.dispose=function(){this.gl.deleteTexture(this.handle)},s.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var g=Math.min(this._shape[0],this._shape[1]),A=0;g>0;++A,g>>>=1)this._mipLevels.indexOf(A)<0&&this._mipLevels.push(A)},s.setPixels=function(g,A,k,R){var L=this.gl;this.bind(),Array.isArray(A)?(R=k,k=A[1]|0,A=A[0]|0):(A=A||0,k=k||0),R=R||0;var z=o(g)?g:g.raw;if(z){var E=this._mipLevels.indexOf(R)<0;E?(L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,this.type,z),this._mipLevels.push(R)):L.texSubImage2D(L.TEXTURE_2D,R,A,k,this.format,this.type,z)}else if(g.shape&&g.stride&&g.data){if(g.shape.length<2||A+g.shape[1]>this._shape[1]>>>R||k+g.shape[0]>this._shape[0]>>>R||A<0||k<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");d(L,A,k,R,this.format,this.type,this._mipLevels,g)}else throw new Error("gl-texture2d: Unsupported data type")};function p(g,A){return g.length===3?A[2]===1&&A[1]===g[0]*g[2]&&A[0]===g[2]:A[0]===1&&A[1]===g[0]}function d(g,A,k,R,L,z,E,S){var C=S.dtype,D=S.shape.slice();if(D.length<2||D.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var F=0,N=0,G=p(D,S.stride.slice());if(C==="float32"?F=g.FLOAT:C==="float64"?(F=g.FLOAT,G=!1,C="float32"):C==="uint8"?F=g.UNSIGNED_BYTE:(F=g.UNSIGNED_BYTE,G=!1,C="uint8"),D.length===2)N=g.LUMINANCE,D=[D[0],D[1],1],S=r(S.data,D,[S.stride[0],S.stride[1],1],S.offset);else if(D.length===3){if(D[2]===1)N=g.ALPHA;else if(D[2]===2)N=g.LUMINANCE_ALPHA;else if(D[2]===3)N=g.RGB;else if(D[2]===4)N=g.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");D[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((N===g.LUMINANCE||N===g.ALPHA)&&(L===g.LUMINANCE||L===g.ALPHA)&&(N=L),N!==L)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var U=S.size,X=E.indexOf(R)<0;if(X&&E.push(R),F===z&&G)S.offset===0&&S.data.length===U?X?g.texImage2D(g.TEXTURE_2D,R,L,D[0],D[1],0,L,z,S.data):g.texSubImage2D(g.TEXTURE_2D,R,A,k,D[0],D[1],L,z,S.data):X?g.texImage2D(g.TEXTURE_2D,R,L,D[0],D[1],0,L,z,S.data.subarray(S.offset,S.offset+U)):g.texSubImage2D(g.TEXTURE_2D,R,A,k,D[0],D[1],L,z,S.data.subarray(S.offset,S.offset+U));else{var I;z===g.FLOAT?I=l.mallocFloat32(U):I=l.mallocUint8(U);var B=r(I,D,[D[2],D[2]*D[0],1]);F===g.FLOAT&&z===g.UNSIGNED_BYTE?u(B,S):n.assign(B,S),X?g.texImage2D(g.TEXTURE_2D,R,L,D[0],D[1],0,L,z,I.subarray(0,U)):g.texSubImage2D(g.TEXTURE_2D,R,A,k,D[0],D[1],L,z,I.subarray(0,U)),z===g.FLOAT?l.freeFloat32(I):l.freeUint8(I)}}function y(g){var A=g.createTexture();return g.bindTexture(g.TEXTURE_2D,A),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),A}function b(g,A,k,R,L){var z=g.getParameter(g.MAX_TEXTURE_SIZE);if(A<0||A>z||k<0||k>z)throw new Error("gl-texture2d: Invalid texture shape");if(L===g.FLOAT&&!g.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var E=y(g);return g.texImage2D(g.TEXTURE_2D,0,R,A,k,0,R,L,null),new i(g,E,A,k,R,L)}function m(g,A,k,R,L,z){var E=y(g);return g.texImage2D(g.TEXTURE_2D,0,L,L,z,A),new i(g,E,k,R,L,z)}function _(g,A){var k=A.dtype,R=A.shape.slice(),L=g.getParameter(g.MAX_TEXTURE_SIZE);if(R[0]<0||R[0]>L||R[1]<0||R[1]>L)throw new Error("gl-texture2d: Invalid texture size");var z=p(R,A.stride.slice()),E=0;k==="float32"?E=g.FLOAT:k==="float64"?(E=g.FLOAT,z=!1,k="float32"):k==="uint8"?E=g.UNSIGNED_BYTE:(E=g.UNSIGNED_BYTE,z=!1,k="uint8");var S=0;if(R.length===2)S=g.LUMINANCE,R=[R[0],R[1],1],A=r(A.data,R,[A.stride[0],A.stride[1],1],A.offset);else if(R.length===3)if(R[2]===1)S=g.ALPHA;else if(R[2]===2)S=g.LUMINANCE_ALPHA;else if(R[2]===3)S=g.RGB;else if(R[2]===4)S=g.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");E===g.FLOAT&&!g.getExtension("OES_texture_float")&&(E=g.UNSIGNED_BYTE,z=!1);var C,D,F=A.size;if(z)A.offset===0&&A.data.length===F?C=A.data:C=A.data.subarray(A.offset,A.offset+F);else{var N=[R[2],R[2]*R[0],1];D=l.malloc(F,k);var G=r(D,R,N,0);(k==="float32"||k==="float64")&&E===g.UNSIGNED_BYTE?u(G,A):n.assign(G,A),C=D.subarray(0,F)}var U=y(g);return g.texImage2D(g.TEXTURE_2D,0,S,R[0],R[1],0,S,E,C),z||l.free(D),new i(g,U,R[0],R[1],S,E)}function T(g){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(c||a(g),typeof arguments[1]=="number")return b(g,arguments[1],arguments[2],arguments[3]||g.RGBA,arguments[4]||g.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return b(g,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||g.RGBA,arguments[3]||g.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var A=arguments[1],k=o(A)?A:A.raw;if(k)return m(g,k,A.width|0,A.height|0,arguments[2]||g.RGBA,arguments[3]||g.UNSIGNED_BYTE);if(A.shape&&A.data&&A.stride)return _(g,A)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:495,"ndarray-ops":490,"typedarray-pool":595}],354:[function(e,v,M){(function(r){(function(){var n=e("pick-by-alias");v.exports=function(u){if(u?typeof u=="string"&&(u={container:u}):u={},c(u)?u={container:u}:t(u)?u={container:u}:f(u)?u={gl:u}:u=n(u,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),u.pixelRatio||(u.pixelRatio=r.pixelRatio||1),u.gl)return u.gl;if(u.canvas&&(u.container=u.canvas.parentNode),u.container){if(typeof u.container=="string"){var h=document.querySelector(u.container);if(!h)throw Error("Element "+u.container+" is not found");u.container=h}c(u.container)?(u.canvas=u.container,u.container=u.canvas.parentNode):u.canvas||(u.canvas=a(),u.container.appendChild(u.canvas),l(u))}else if(!u.canvas)if(typeof document<"u")u.container=document.body||document.documentElement,u.canvas=a(),u.container.appendChild(u.canvas),l(u);else throw Error("Not DOM environment. Use headless-gl.");if(!u.gl)try{u.gl=u.canvas.getContext("webgl",u.attrs)}catch{try{u.gl=u.canvas.getContext("experimental-webgl",u.attrs)}catch{u.gl=u.canvas.getContext("webgl-experimental",u.attrs)}}return u.gl};function l(o){if(o.container)if(o.container==document.body)document.body.style.width||(o.canvas.width=o.width||o.pixelRatio*r.innerWidth),document.body.style.height||(o.canvas.height=o.height||o.pixelRatio*r.innerHeight);else{var u=o.container.getBoundingClientRect();o.canvas.width=o.width||u.right-u.left,o.canvas.height=o.height||u.bottom-u.top}}function c(o){return typeof o.getContext=="function"&&"width"in o&&"height"in o}function t(o){return typeof o.nodeName=="string"&&typeof o.appendChild=="function"&&typeof o.getBoundingClientRect=="function"}function f(o){return typeof o.drawArrays=="function"||typeof o.drawElements=="function"}function a(){var o=document.createElement("canvas");return o.style.position="absolute",o.style.top=0,o.style.left=0,o}}).call(this)}).call(this,typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":511}],355:[function(e,v,M){function r(n,l,c){l?l.bind():n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);var t=n.getParameter(n.MAX_VERTEX_ATTRIBS)|0;if(c){if(c.length>t)throw new Error("gl-vao: Too many vertex attributes");for(var f=0;f<c.length;++f){var a=c[f];if(a.buffer){var o=a.buffer,u=a.size||4,h=a.type||n.FLOAT,i=!!a.normalized,s=a.stride||0,p=a.offset||0;o.bind(),n.enableVertexAttribArray(f),n.vertexAttribPointer(f,u,h,i,s,p)}else{if(typeof a=="number")n.vertexAttrib1f(f,a);else if(a.length===1)n.vertexAttrib1f(f,a[0]);else if(a.length===2)n.vertexAttrib2f(f,a[0],a[1]);else if(a.length===3)n.vertexAttrib3f(f,a[0],a[1],a[2]);else if(a.length===4)n.vertexAttrib4f(f,a[0],a[1],a[2],a[3]);else throw new Error("gl-vao: Invalid vertex attribute");n.disableVertexAttribArray(f)}}for(;f<t;++f)n.disableVertexAttribArray(f)}else{n.bindBuffer(n.ARRAY_BUFFER,null);for(var f=0;f<t;++f)n.disableVertexAttribArray(f)}}v.exports=r},{}],356:[function(e,v,M){var r=e("./do-bind.js");function n(c){this.gl=c,this._elements=null,this._attributes=null,this._elementsType=c.UNSIGNED_SHORT}n.prototype.bind=function(){r(this.gl,this._elements,this._attributes)},n.prototype.update=function(c,t,f){this._elements=t,this._attributes=c,this._elementsType=f||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(c,t,f){f=f||0;var a=this.gl;this._elements?a.drawElements(c,t,this._elementsType,f):a.drawArrays(c,f,t)};function l(c){return new n(c)}v.exports=l},{"./do-bind.js":355}],357:[function(e,v,M){var r=e("./do-bind.js");function n(t,f,a,o,u,h){this.location=t,this.dimension=f,this.a=a,this.b=o,this.c=u,this.d=h}n.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function l(t,f,a){this.gl=t,this._ext=f,this.handle=a,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}l.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},l.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},l.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},l.prototype.update=function(t,f,a){if(this.bind(),r(this.gl,f,t),this.unbind(),this._attribs.length=0,t)for(var o=0;o<t.length;++o){var u=t[o];typeof u=="number"?this._attribs.push(new n(o,1,u)):Array.isArray(u)&&this._attribs.push(new n(o,u.length,u[0],u[1],u[2],u[3]))}this._useElements=!!f,this._elementsType=a||this.gl.UNSIGNED_SHORT},l.prototype.draw=function(t,f,a){a=a||0;var o=this.gl;this._useElements?o.drawElements(t,f,this._elementsType,a):o.drawArrays(t,a,f)};function c(t,f){return new l(t,f,f.createVertexArrayOES())}v.exports=c},{"./do-bind.js":355}],358:[function(e,v,M){var r=e("./lib/vao-native.js"),n=e("./lib/vao-emulated.js");function l(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}function c(t,f,a,o){var u=t.createVertexArray?new l(t):t.getExtension("OES_vertex_array_object"),h;return u?h=r(t,u):h=n(t),h.update(f,a,o),h}v.exports=c},{"./lib/vao-emulated.js":356,"./lib/vao-native.js":357}],359:[function(e,v,M){v.exports=r;function r(n,l,c){return n[0]=l[0]+c[0],n[1]=l[1]+c[1],n[2]=l[2]+c[2],n}},{}],360:[function(e,v,M){v.exports=c;var r=e("./fromValues"),n=e("./normalize"),l=e("./dot");function c(t,f){var a=r(t[0],t[1],t[2]),o=r(f[0],f[1],f[2]);n(a,a),n(o,o);var u=l(a,o);return u>1?0:Math.acos(u)}},{"./dot":370,"./fromValues":376,"./normalize":387}],361:[function(e,v,M){v.exports=r;function r(n,l){return n[0]=Math.ceil(l[0]),n[1]=Math.ceil(l[1]),n[2]=Math.ceil(l[2]),n}},{}],362:[function(e,v,M){v.exports=r;function r(n){var l=new Float32Array(3);return l[0]=n[0],l[1]=n[1],l[2]=n[2],l}},{}],363:[function(e,v,M){v.exports=r;function r(n,l){return n[0]=l[0],n[1]=l[1],n[2]=l[2],n}},{}],364:[function(e,v,M){v.exports=r;function r(){var n=new Float32Array(3);return n[0]=0,n[1]=0,n[2]=0,n}},{}],365:[function(e,v,M){v.exports=r;function r(n,l,c){var t=l[0],f=l[1],a=l[2],o=c[0],u=c[1],h=c[2];return n[0]=f*h-a*u,n[1]=a*o-t*h,n[2]=t*u-f*o,n}},{}],366:[function(e,v,M){v.exports=e("./distance")},{"./distance":367}],367:[function(e,v,M){v.exports=r;function r(n,l){var c=l[0]-n[0],t=l[1]-n[1],f=l[2]-n[2];return Math.sqrt(c*c+t*t+f*f)}},{}],368:[function(e,v,M){v.exports=e("./divide")},{"./divide":369}],369:[function(e,v,M){v.exports=r;function r(n,l,c){return n[0]=l[0]/c[0],n[1]=l[1]/c[1],n[2]=l[2]/c[2],n}},{}],370:[function(e,v,M){v.exports=r;function r(n,l){return n[0]*l[0]+n[1]*l[1]+n[2]*l[2]}},{}],371:[function(e,v,M){v.exports=1e-6},{}],372:[function(e,v,M){v.exports=n;var r=e("./epsilon");function n(l,c){var t=l[0],f=l[1],a=l[2],o=c[0],u=c[1],h=c[2];return Math.abs(t-o)<=r*Math.max(1,Math.abs(t),Math.abs(o))&&Math.abs(f-u)<=r*Math.max(1,Math.abs(f),Math.abs(u))&&Math.abs(a-h)<=r*Math.max(1,Math.abs(a),Math.abs(h))}},{"./epsilon":371}],373:[function(e,v,M){v.exports=r;function r(n,l){return n[0]===l[0]&&n[1]===l[1]&&n[2]===l[2]}},{}],374:[function(e,v,M){v.exports=r;function r(n,l){return n[0]=Math.floor(l[0]),n[1]=Math.floor(l[1]),n[2]=Math.floor(l[2]),n}},{}],375:[function(e,v,M){v.exports=n;var r=e("./create")();function n(l,c,t,f,a,o){var u,h;for(c||(c=3),t||(t=0),f?h=Math.min(f*c+t,l.length):h=l.length,u=t;u<h;u+=c)r[0]=l[u],r[1]=l[u+1],r[2]=l[u+2],a(r,r,o),l[u]=r[0],l[u+1]=r[1],l[u+2]=r[2];return l}},{"./create":364}],376:[function(e,v,M){v.exports=r;function r(n,l,c){var t=new Float32Array(3);return t[0]=n,t[1]=l,t[2]=c,t}},{}],377:[function(e,v,M){v.exports={EPSILON:e("./epsilon"),create:e("./create"),clone:e("./clone"),angle:e("./angle"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),equals:e("./equals"),exactEquals:e("./exactEquals"),add:e("./add"),subtract:e("./subtract"),sub:e("./sub"),multiply:e("./multiply"),mul:e("./mul"),divide:e("./divide"),div:e("./div"),min:e("./min"),max:e("./max"),floor:e("./floor"),ceil:e("./ceil"),round:e("./round"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),dist:e("./dist"),squaredDistance:e("./squaredDistance"),sqrDist:e("./sqrDist"),length:e("./length"),len:e("./len"),squaredLength:e("./squaredLength"),sqrLen:e("./sqrLen"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),cross:e("./cross"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformMat3:e("./transformMat3"),transformQuat:e("./transformQuat"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),forEach:e("./forEach")}},{"./add":359,"./angle":360,"./ceil":361,"./clone":362,"./copy":363,"./create":364,"./cross":365,"./dist":366,"./distance":367,"./div":368,"./divide":369,"./dot":370,"./epsilon":371,"./equals":372,"./exactEquals":373,"./floor":374,"./forEach":375,"./fromValues":376,"./inverse":378,"./len":379,"./length":380,"./lerp":381,"./max":382,"./min":383,"./mul":384,"./multiply":385,"./negate":386,"./normalize":387,"./random":388,"./rotateX":389,"./rotateY":390,"./rotateZ":391,"./round":392,"./scale":393,"./scaleAndAdd":394,"./set":395,"./sqrDist":396,"./sqrLen":397,"./squaredDistance":398,"./squaredLength":399,"./sub":400,"./subtract":401,"./transformMat3":402,"./transformMat4":403,"./transformQuat":404}],378:[function(e,v,M){v.exports=r;function r(n,l){return n[0]=1/l[0],n[1]=1/l[1],n[2]=1/l[2],n}},{}],379:[function(e,v,M){v.exports=e("./length")},{"./length":380}],380:[function(e,v,M){v.exports=r;function r(n){var l=n[0],c=n[1],t=n[2];return Math.sqrt(l*l+c*c+t*t)}},{}],381:[function(e,v,M){v.exports=r;function r(n,l,c,t){var f=l[0],a=l[1],o=l[2];return n[0]=f+t*(c[0]-f),n[1]=a+t*(c[1]-a),n[2]=o+t*(c[2]-o),n}},{}],382:[function(e,v,M){v.exports=r;function r(n,l,c){return n[0]=Math.max(l[0],c[0]),n[1]=Math.max(l[1],c[1]),n[2]=Math.max(l[2],c[2]),n}},{}],383:[function(e,v,M){v.exports=r;function r(n,l,c){return n[0]=Math.min(l[0],c[0]),n[1]=Math.min(l[1],c[1]),n[2]=Math.min(l[2],c[2]),n}},{}],384:[function(e,v,M){v.exports=e("./multiply")},{"./multiply":385}],385:[function(e,v,M){v.exports=r;function r(n,l,c){return n[0]=l[0]*c[0],n[1]=l[1]*c[1],n[2]=l[2]*c[2],n}},{}],386:[function(e,v,M){v.exports=r;function r(n,l){return n[0]=-l[0],n[1]=-l[1],n[2]=-l[2],n}},{}],387:[function(e,v,M){v.exports=r;function r(n,l){var c=l[0],t=l[1],f=l[2],a=c*c+t*t+f*f;return a>0&&(a=1/Math.sqrt(a),n[0]=l[0]*a,n[1]=l[1]*a,n[2]=l[2]*a),n}},{}],388:[function(e,v,M){v.exports=r;function r(n,l){l=l||1;var c=Math.random()*2*Math.PI,t=Math.random()*2-1,f=Math.sqrt(1-t*t)*l;return n[0]=Math.cos(c)*f,n[1]=Math.sin(c)*f,n[2]=t*l,n}},{}],389:[function(e,v,M){v.exports=r;function r(n,l,c,t){var f=c[1],a=c[2],o=l[1]-f,u=l[2]-a,h=Math.sin(t),i=Math.cos(t);return n[0]=l[0],n[1]=f+o*i-u*h,n[2]=a+o*h+u*i,n}},{}],390:[function(e,v,M){v.exports=r;function r(n,l,c,t){var f=c[0],a=c[2],o=l[0]-f,u=l[2]-a,h=Math.sin(t),i=Math.cos(t);return n[0]=f+u*h+o*i,n[1]=l[1],n[2]=a+u*i-o*h,n}},{}],391:[function(e,v,M){v.exports=r;function r(n,l,c,t){var f=c[0],a=c[1],o=l[0]-f,u=l[1]-a,h=Math.sin(t),i=Math.cos(t);return n[0]=f+o*i-u*h,n[1]=a+o*h+u*i,n[2]=l[2],n}},{}],392:[function(e,v,M){v.exports=r;function r(n,l){return n[0]=Math.round(l[0]),n[1]=Math.round(l[1]),n[2]=Math.round(l[2]),n}},{}],393:[function(e,v,M){v.exports=r;function r(n,l,c){return n[0]=l[0]*c,n[1]=l[1]*c,n[2]=l[2]*c,n}},{}],394:[function(e,v,M){v.exports=r;function r(n,l,c,t){return n[0]=l[0]+c[0]*t,n[1]=l[1]+c[1]*t,n[2]=l[2]+c[2]*t,n}},{}],395:[function(e,v,M){v.exports=r;function r(n,l,c,t){return n[0]=l,n[1]=c,n[2]=t,n}},{}],396:[function(e,v,M){v.exports=e("./squaredDistance")},{"./squaredDistance":398}],397:[function(e,v,M){v.exports=e("./squaredLength")},{"./squaredLength":399}],398:[function(e,v,M){v.exports=r;function r(n,l){var c=l[0]-n[0],t=l[1]-n[1],f=l[2]-n[2];return c*c+t*t+f*f}},{}],399:[function(e,v,M){v.exports=r;function r(n){var l=n[0],c=n[1],t=n[2];return l*l+c*c+t*t}},{}],400:[function(e,v,M){v.exports=e("./subtract")},{"./subtract":401}],401:[function(e,v,M){v.exports=r;function r(n,l,c){return n[0]=l[0]-c[0],n[1]=l[1]-c[1],n[2]=l[2]-c[2],n}},{}],402:[function(e,v,M){v.exports=r;function r(n,l,c){var t=l[0],f=l[1],a=l[2];return n[0]=t*c[0]+f*c[3]+a*c[6],n[1]=t*c[1]+f*c[4]+a*c[7],n[2]=t*c[2]+f*c[5]+a*c[8],n}},{}],403:[function(e,v,M){v.exports=r;function r(n,l,c){var t=l[0],f=l[1],a=l[2],o=c[3]*t+c[7]*f+c[11]*a+c[15];return o=o||1,n[0]=(c[0]*t+c[4]*f+c[8]*a+c[12])/o,n[1]=(c[1]*t+c[5]*f+c[9]*a+c[13])/o,n[2]=(c[2]*t+c[6]*f+c[10]*a+c[14])/o,n}},{}],404:[function(e,v,M){v.exports=r;function r(n,l,c){var t=l[0],f=l[1],a=l[2],o=c[0],u=c[1],h=c[2],i=c[3],s=i*t+u*a-h*f,p=i*f+h*t-o*a,d=i*a+o*f-u*t,y=-o*t-u*f-h*a;return n[0]=s*i+y*-o+p*-h-d*-u,n[1]=p*i+y*-u+d*-o-s*-h,n[2]=d*i+y*-h+s*-u-p*-o,n}},{}],405:[function(e,v,M){v.exports=r;function r(n,l,c){return n[0]=l[0]+c[0],n[1]=l[1]+c[1],n[2]=l[2]+c[2],n[3]=l[3]+c[3],n}},{}],406:[function(e,v,M){v.exports=r;function r(n){var l=new Float32Array(4);return l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l}},{}],407:[function(e,v,M){v.exports=r;function r(n,l){return n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=l[3],n}},{}],408:[function(e,v,M){v.exports=r;function r(){var n=new Float32Array(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n}},{}],409:[function(e,v,M){v.exports=r;function r(n,l){var c=l[0]-n[0],t=l[1]-n[1],f=l[2]-n[2],a=l[3]-n[3];return Math.sqrt(c*c+t*t+f*f+a*a)}},{}],410:[function(e,v,M){v.exports=r;function r(n,l,c){return n[0]=l[0]/c[0],n[1]=l[1]/c[1],n[2]=l[2]/c[2],n[3]=l[3]/c[3],n}},{}],411:[function(e,v,M){v.exports=r;function r(n,l){return n[0]*l[0]+n[1]*l[1]+n[2]*l[2]+n[3]*l[3]}},{}],412:[function(e,v,M){v.exports=r;function r(n,l,c,t){var f=new Float32Array(4);return f[0]=n,f[1]=l,f[2]=c,f[3]=t,f}},{}],413:[function(e,v,M){v.exports={create:e("./create"),clone:e("./clone"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformQuat:e("./transformQuat")}},{"./add":405,"./clone":406,"./copy":407,"./create":408,"./distance":409,"./divide":410,"./dot":411,"./fromValues":412,"./inverse":414,"./length":415,"./lerp":416,"./max":417,"./min":418,"./multiply":419,"./negate":420,"./normalize":421,"./random":422,"./scale":423,"./scaleAndAdd":424,"./set":425,"./squaredDistance":426,"./squaredLength":427,"./subtract":428,"./transformMat4":429,"./transformQuat":430}],414:[function(e,v,M){v.exports=r;function r(n,l){return n[0]=1/l[0],n[1]=1/l[1],n[2]=1/l[2],n[3]=1/l[3],n}},{}],415:[function(e,v,M){v.exports=r;function r(n){var l=n[0],c=n[1],t=n[2],f=n[3];return Math.sqrt(l*l+c*c+t*t+f*f)}},{}],416:[function(e,v,M){v.exports=r;function r(n,l,c,t){var f=l[0],a=l[1],o=l[2],u=l[3];return n[0]=f+t*(c[0]-f),n[1]=a+t*(c[1]-a),n[2]=o+t*(c[2]-o),n[3]=u+t*(c[3]-u),n}},{}],417:[function(e,v,M){v.exports=r;function r(n,l,c){return n[0]=Math.max(l[0],c[0]),n[1]=Math.max(l[1],c[1]),n[2]=Math.max(l[2],c[2]),n[3]=Math.max(l[3],c[3]),n}},{}],418:[function(e,v,M){v.exports=r;function r(n,l,c){return n[0]=Math.min(l[0],c[0]),n[1]=Math.min(l[1],c[1]),n[2]=Math.min(l[2],c[2]),n[3]=Math.min(l[3],c[3]),n}},{}],419:[function(e,v,M){v.exports=r;function r(n,l,c){return n[0]=l[0]*c[0],n[1]=l[1]*c[1],n[2]=l[2]*c[2],n[3]=l[3]*c[3],n}},{}],420:[function(e,v,M){v.exports=r;function r(n,l){return n[0]=-l[0],n[1]=-l[1],n[2]=-l[2],n[3]=-l[3],n}},{}],421:[function(e,v,M){v.exports=r;function r(n,l){var c=l[0],t=l[1],f=l[2],a=l[3],o=c*c+t*t+f*f+a*a;return o>0&&(o=1/Math.sqrt(o),n[0]=c*o,n[1]=t*o,n[2]=f*o,n[3]=a*o),n}},{}],422:[function(e,v,M){var r=e("./normalize"),n=e("./scale");v.exports=l;function l(c,t){return t=t||1,c[0]=Math.random(),c[1]=Math.random(),c[2]=Math.random(),c[3]=Math.random(),r(c,c),n(c,c,t),c}},{"./normalize":421,"./scale":423}],423:[function(e,v,M){v.exports=r;function r(n,l,c){return n[0]=l[0]*c,n[1]=l[1]*c,n[2]=l[2]*c,n[3]=l[3]*c,n}},{}],424:[function(e,v,M){v.exports=r;function r(n,l,c,t){return n[0]=l[0]+c[0]*t,n[1]=l[1]+c[1]*t,n[2]=l[2]+c[2]*t,n[3]=l[3]+c[3]*t,n}},{}],425:[function(e,v,M){v.exports=r;function r(n,l,c,t,f){return n[0]=l,n[1]=c,n[2]=t,n[3]=f,n}},{}],426:[function(e,v,M){v.exports=r;function r(n,l){var c=l[0]-n[0],t=l[1]-n[1],f=l[2]-n[2],a=l[3]-n[3];return c*c+t*t+f*f+a*a}},{}],427:[function(e,v,M){v.exports=r;function r(n){var l=n[0],c=n[1],t=n[2],f=n[3];return l*l+c*c+t*t+f*f}},{}],428:[function(e,v,M){v.exports=r;function r(n,l,c){return n[0]=l[0]-c[0],n[1]=l[1]-c[1],n[2]=l[2]-c[2],n[3]=l[3]-c[3],n}},{}],429:[function(e,v,M){v.exports=r;function r(n,l,c){var t=l[0],f=l[1],a=l[2],o=l[3];return n[0]=c[0]*t+c[4]*f+c[8]*a+c[12]*o,n[1]=c[1]*t+c[5]*f+c[9]*a+c[13]*o,n[2]=c[2]*t+c[6]*f+c[10]*a+c[14]*o,n[3]=c[3]*t+c[7]*f+c[11]*a+c[15]*o,n}},{}],430:[function(e,v,M){v.exports=r;function r(n,l,c){var t=l[0],f=l[1],a=l[2],o=c[0],u=c[1],h=c[2],i=c[3],s=i*t+u*a-h*f,p=i*f+h*t-o*a,d=i*a+o*f-u*t,y=-o*t-u*f-h*a;return n[0]=s*i+y*-o+p*-h-d*-u,n[1]=p*i+y*-u+d*-o-s*-h,n[2]=d*i+y*-h+s*-u-p*-o,n[3]=l[3],n}},{}],431:[function(e,v,M){var r=e("glsl-tokenizer"),n=e("atob-lite");v.exports=l;function l(c){for(var t=Array.isArray(c)?c:r(c),f=0;f<t.length;f++){var a=t[f];if(a.type==="preprocessor"){var o=a.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(o&&o[2]){var u=o[1],h=o[2];return(u?n(h):h).trim()}}}}},{"atob-lite":77,"glsl-tokenizer":438}],432:[function(e,v,M){v.exports=A;var r=e("./lib/literals"),n=e("./lib/operators"),l=e("./lib/builtins"),c=e("./lib/literals-300es"),t=e("./lib/builtins-300es"),f=999,a=9999,o=0,u=1,h=2,i=3,s=4,p=5,d=6,y=7,b=8,m=9,_=10,T=11,g=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function A(k){var R=0,L=0,z=f,E,S,C=[],D=[],F=1,N=0,G=0,U=!1,X=!1,I="",B;k=k||{};var j=l,H=r;k.version==="300 es"&&(j=t,H=c);for(var K={},te={},R=0;R<j.length;R++)K[j[R]]=!0;for(var R=0;R<H.length;R++)te[H[R]]=!0;return function(me){return D=[],me!==null?oe(me):ie()};function J(me){me.length&&D.push({type:g[z],data:me,position:G,line:F,column:N})}function oe(me){R=0,me.toString&&(me=me.toString()),I+=me.replace(/\r\n/g,`
`),B=I.length;for(var be;E=I[R],R<B;){switch(be=R,z){case o:R=ee();break;case u:R=re();break;case h:R=se();break;case i:R=ae();break;case s:R=pe();break;case T:R=de();break;case p:R=W();break;case a:R=ue();break;case m:R=V();break;case f:R=Q();break}if(be!==R)switch(I[be]){case`
`:N=0,++F;break;default:++N;break}}return L+=R,I=I.slice(R),D}function ie(me){return C.length&&J(C.join("")),z=_,J("(eof)"),D}function Q(){return C=C.length?[]:C,S==="/"&&E==="*"?(G=L+R-1,z=o,S=E,R+1):S==="/"&&E==="/"?(G=L+R-1,z=u,S=E,R+1):E==="#"?(z=h,G=L+R,R):/\s/.test(E)?(z=m,G=L+R,R):(U=/\d/.test(E),X=/[^\w_]/.test(E),G=L+R,z=U?s:X?i:a,R)}function V(){return/[^\s]/g.test(E)?(J(C.join("")),z=f,R):(C.push(E),S=E,R+1)}function se(){return(E==="\r"||E===`
`)&&S!=="\\"?(J(C.join("")),z=f,R):(C.push(E),S=E,R+1)}function re(){return se()}function ee(){return E==="/"&&S==="*"?(C.push(E),J(C.join("")),z=f,R+1):(C.push(E),S=E,R+1)}function ae(){if(S==="."&&/\d/.test(E))return z=p,R;if(S==="/"&&E==="*")return z=o,R;if(S==="/"&&E==="/")return z=u,R;if(E==="."&&C.length){for(;fe(C););return z=p,R}if(E===";"||E===")"||E==="("){if(C.length)for(;fe(C););return J(E),z=f,R+1}var me=C.length===2&&E!=="=";if(/[\w_\d\s]/.test(E)||me){for(;fe(C););return z=f,R}return C.push(E),S=E,R+1}function fe(me){var be=0,ke,Pe;do{if(ke=n.indexOf(me.slice(0,me.length+be).join("")),Pe=n[ke],ke===-1){if(be--+me.length>0)continue;Pe=me.slice(0,1).join("")}return J(Pe),G+=Pe.length,C=C.slice(Pe.length),C.length}while(1)}function de(){return/[^a-fA-F0-9]/.test(E)?(J(C.join("")),z=f,R):(C.push(E),S=E,R+1)}function pe(){return E==="."||/[eE]/.test(E)?(C.push(E),z=p,S=E,R+1):E==="x"&&C.length===1&&C[0]==="0"?(z=T,C.push(E),S=E,R+1):/[^\d]/.test(E)?(J(C.join("")),z=f,R):(C.push(E),S=E,R+1)}function W(){return E==="f"&&(C.push(E),S=E,R+=1),/[eE]/.test(E)||(E==="-"||E==="+")&&/[eE]/.test(S)?(C.push(E),S=E,R+1):/[^\d]/.test(E)?(J(C.join("")),z=f,R):(C.push(E),S=E,R+1)}function ue(){if(/[^\d\w_]/.test(E)){var me=C.join("");return te[me]?z=b:K[me]?z=y:z=d,J(C.join("")),z=f,R}return C.push(E),S=E,R+1}}},{"./lib/builtins":434,"./lib/builtins-300es":433,"./lib/literals":436,"./lib/literals-300es":435,"./lib/operators":437}],433:[function(e,v,M){var r=e("./builtins");r=r.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)}),v.exports=r.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":434}],434:[function(e,v,M){v.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],435:[function(e,v,M){var r=e("./literals");v.exports=r.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":436}],436:[function(e,v,M){v.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],437:[function(e,v,M){v.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],438:[function(e,v,M){var r=e("./index");v.exports=n;function n(l,c){var t=r(c),f=[];return f=f.concat(t(l)),f=f.concat(t(null)),f}},{"./index":432}],439:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],440:[function(e,v,M){(function(r){(function(){var n=e("is-browser"),l;typeof r.matchMedia=="function"?l=!r.matchMedia("(hover: none)").matches:l=n,v.exports=l}).call(this)}).call(this,typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":464}],441:[function(e,v,M){var r=e("is-browser");function n(){var l=!1;try{var c=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("test",null,c),window.removeEventListener("test",null,c)}catch{l=!1}return l}v.exports=r&&n()},{"is-browser":464}],442:[function(e,v,M){M.read=function(r,n,l,c,t){var f,a,o=t*8-c-1,u=(1<<o)-1,h=u>>1,i=-7,s=l?t-1:0,p=l?-1:1,d=r[n+s];for(s+=p,f=d&(1<<-i)-1,d>>=-i,i+=o;i>0;f=f*256+r[n+s],s+=p,i-=8);for(a=f&(1<<-i)-1,f>>=-i,i+=c;i>0;a=a*256+r[n+s],s+=p,i-=8);if(f===0)f=1-h;else{if(f===u)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,c),f=f-h}return(d?-1:1)*a*Math.pow(2,f-c)},M.write=function(r,n,l,c,t,f){var a,o,u,h=f*8-t-1,i=(1<<h)-1,s=i>>1,p=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=c?0:f-1,y=c?1:-1,b=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(o=isNaN(n)?1:0,a=i):(a=Math.floor(Math.log(n)/Math.LN2),n*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+s>=1?n+=p/u:n+=p*Math.pow(2,1-s),n*u>=2&&(a++,u/=2),a+s>=i?(o=0,a=i):a+s>=1?(o=(n*u-1)*Math.pow(2,t),a=a+s):(o=n*Math.pow(2,s-1)*Math.pow(2,t),a=0));t>=8;r[l+d]=o&255,d+=y,o/=256,t-=8);for(a=a<<t|o,h+=t;h>0;r[l+d]=a&255,d+=y,a/=256,h-=8);r[l+d-y]|=b*128}},{}],443:[function(e,v,M){var r=e("./types");v.exports=function(n,l){var c,t;for(c in r)if(t=r[c].detect(n,l),t)return c}},{"./types":446}],444:[function(e,v,M){(function(r){(function(){var n=e("fs"),l=e("path"),c=e("./types"),t=e("./detector"),f=512*1024;function a(h,i){var s=t(h,i);if(s in c){var p=c[s].calculate(h,i);if(p!==!1)return p.type=s,p}throw new TypeError("unsupported file type: "+s+" (file: "+i+")")}function o(h,i){n.open(h,"r",function(s,p){if(s)return i(s);n.fstat(p,function(d,y){if(d)return i(d);var b=y.size;if(b<=0)return i(new Error("File size is not greater than 0 —— "+h));var m=Math.min(b,f),_=r.alloc(m);n.read(p,_,0,m,0,function(T){if(T)return i(T);n.close(p,function(g){i(g,_)})})})})}function u(h){var i=n.openSync(h,"r"),s=n.fstatSync(i).size,p=Math.min(s,f),d=r.alloc(p);return n.readSync(i,d,0,p,0),n.closeSync(i),d}v.exports=function(h,i){if(r.isBuffer(h))return a(h);if(typeof h!="string")throw new TypeError("invalid invocation");var s=l.resolve(h);if(typeof i=="function")o(s,function(d,y){if(d)return i(d);var b;try{b=a(y,s)}catch(m){d=m}i(d,b)});else{var p=u(s);return a(p,s)}},v.exports.types=Object.keys(c)}).call(this)}).call(this,e("buffer").Buffer)},{"./detector":443,"./types":446,buffer:111,fs:109,path:507}],445:[function(e,v,M){function r(n,l,c,t){c=c||0;var f=t?"BE":"LE",a=n["readUInt"+l+f];return a.call(n,c)}v.exports=r},{}],446:[function(e,v,M){var r={bmp:e("./types/bmp"),cur:e("./types/cur"),dds:e("./types/dds"),gif:e("./types/gif"),icns:e("./types/icns"),ico:e("./types/ico"),jpg:e("./types/jpg"),png:e("./types/png"),psd:e("./types/psd"),svg:e("./types/svg"),tiff:e("./types/tiff"),webp:e("./types/webp")};v.exports=r},{"./types/bmp":447,"./types/cur":448,"./types/dds":449,"./types/gif":450,"./types/icns":451,"./types/ico":452,"./types/jpg":453,"./types/png":454,"./types/psd":455,"./types/svg":456,"./types/tiff":457,"./types/webp":458}],447:[function(e,v,M){function r(l){return l.toString("ascii",0,2)==="BM"}function n(l){return{width:l.readUInt32LE(18),height:Math.abs(l.readInt32LE(22))}}v.exports={detect:r,calculate:n}},{}],448:[function(e,v,M){var r=2;function n(l){var c;return l.readUInt16LE(0)!==0?!1:(c=l.readUInt16LE(2),c===r)}v.exports={detect:n,calculate:e("./ico").calculate}},{"./ico":452}],449:[function(e,v,M){function r(l){return l.readUInt32LE(0)===542327876}function n(l){return{height:l.readUInt32LE(12),width:l.readUInt32LE(16)}}v.exports={detect:r,calculate:n}},{}],450:[function(e,v,M){var r=/^GIF8[79]a/;function n(c){var t=c.toString("ascii",0,6);return r.test(t)}function l(c){return{width:c.readUInt16LE(6),height:c.readUInt16LE(8)}}v.exports={detect:n,calculate:l}},{}],451:[function(e,v,M){var r=8,n=4,l=4;function c(u){return u.toString("ascii",0,4)==="icns"}var t={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function f(u,h){var i=h+l;return[u.toString("ascii",h,i),u.readUInt32BE(i)]}function a(u){var h=t[u];return{width:h,height:h,type:u}}function o(u){var h=u.length,i=r,s=u.readUInt32BE(n),p,d,y;if(p=f(u,i),d=a(p[0]),i+=p[1],i===s)return d;for(y={width:d.width,height:d.height,images:[d]};i<s&&i<h;)p=f(u,i),d=a(p[0]),i+=p[1],y.images.push(d);return y}v.exports={detect:c,calculate:o}},{}],452:[function(e,v,M){var r=1,n=2+2+2,l=1+1+1+1+2+2+4+4;function c(o){var u;return o.readUInt16LE(0)!==0?!1:(u=o.readUInt16LE(2),u===r)}function t(o,u){var h=o.readUInt8(u);return h===0?256:h}function f(o,u){var h=n+u*l;return{width:t(o,h),height:t(o,h+1)}}function a(o){var u=o.readUInt16LE(4),h=f(o,0),i;if(u===1)return h;for(h.images=[{width:h.width,height:h.height}],i=1;i<u;i+=1)h.images.push(f(o,i));return h}v.exports={detect:c,calculate:a}},{}],453:[function(e,v,M){var r=e("../readUInt");function n(b){var m=b.toString("hex",0,2);return m==="ffd8"}function l(b){var m=b.toString("hex",2,6);return m==="45786966"}function c(b,m){return{height:b.readUInt16BE(m),width:b.readUInt16BE(m+2)}}var t=2,f=6,a=2,o="4d4d",u="4949",h=12,i=2;function s(b,m){var _=b.slice(t,m),T=_.toString("hex",f,f+a),g=T===o,A=T===u;if(g||A)return p(_,g)}function p(b,m){for(var _=8,T=f+_,g=r(b,16,T,m),A,k,R=0;R<g;R++){if(A=T+i+R*h,k=A+h,A>b.length)return;var L=b.slice(A,k),z=r(L,16,0,m);if(z===274){var E=r(L,16,2,m);if(E!==3)return;var S=r(L,32,4,m);return S!==1?void 0:r(L,16,8,m)}}}function d(b,m){if(m>b.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(b[m]!==255)throw new TypeError("Invalid JPG, marker table corrupted")}function y(b){b=b.slice(4);for(var m,_,T;b.length;){if(_=b.readUInt16BE(0),l(b)&&(m=s(b,_)),d(b,_),T=b[_+1],T===192||T===193||T===194){var g=c(b,_+5);return m?{width:g.width,height:g.height,orientation:m}:g}b=b.slice(_+2)}throw new TypeError("Invalid JPG, no size found")}v.exports={detect:n,calculate:y}},{"../readUInt":445}],454:[function(e,v,M){var r=`PNG\r

`,n="IHDR",l="CgBI";function c(f){if(r===f.toString("ascii",1,8)){var a=f.toString("ascii",12,16);if(a===l&&(a=f.toString("ascii",28,32)),a!==n)throw new TypeError("invalid png");return!0}}function t(f){return f.toString("ascii",12,16)===l?{width:f.readUInt32BE(32),height:f.readUInt32BE(36)}:{width:f.readUInt32BE(16),height:f.readUInt32BE(20)}}v.exports={detect:c,calculate:t}},{}],455:[function(e,v,M){function r(l){return l.toString("ascii",0,4)==="8BPS"}function n(l){return{width:l.readUInt32BE(18),height:l.readUInt32BE(14)}}v.exports={detect:r,calculate:n}},{}],456:[function(e,v,M){var r=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/;function n(i){return r.test(i)}var l={root:r,width:/\swidth=(['"])([^%]+?)\1/,height:/\sheight=(['"])([^%]+?)\1/,viewbox:/\sviewBox=(['"])(.+?)\1/},c={cm:96/2.54,mm:96/2.54/10,m:96/2.54*100,pt:96/72,pc:96/72/12,em:16,ex:8};function t(i){var s=/([0-9.]+)([a-z]*)/.exec(i);if(s)return Math.round(parseFloat(s[1])*(c[s[2]]||1))}function f(i){var s=i.split(" ");return{width:t(s[2]),height:t(s[3])}}function a(i){var s=i.match(l.width),p=i.match(l.height),d=i.match(l.viewbox);return{width:s&&t(s[2]),height:p&&t(p[2]),viewbox:d&&f(d[2])}}function o(i){return{width:i.width,height:i.height}}function u(i){var s=i.viewbox.width/i.viewbox.height;return i.width?{width:i.width,height:Math.floor(i.width/s)}:i.height?{width:Math.floor(i.height*s),height:i.height}:{width:i.viewbox.width,height:i.viewbox.height}}function h(i){var s=i.toString("utf8").match(l.root);if(s){var p=a(s[0]);if(p.width&&p.height)return o(p);if(p.viewbox)return u(p)}throw new TypeError("invalid svg")}v.exports={detect:n,calculate:h}},{}],457:[function(e,v,M){(function(r){(function(){var n=e("fs"),l=e("../readUInt");function c(i){var s=i.toString("hex",0,4);return s==="49492a00"||s==="4d4d002a"}function t(i,s,p){var d=l(i,32,4,p),y=1024,b=n.statSync(s).size;d+y>b&&(y=b-d-10);var m=r.alloc(y),_=n.openSync(s,"r");n.readSync(_,m,0,y,d);var T=m.slice(2);return T}function f(i,s){var p=l(i,16,8,s),d=l(i,16,10,s);return(d<<16)+p}function a(i){if(i.length>24)return i.slice(12)}function o(i,s){for(var p={},d,y,b;i&&i.length&&(d=l(i,16,0,s),y=l(i,16,2,s),b=l(i,32,4,s),d!==0);)b===1&&(y===3||y===4)&&(p[d]=f(i,s)),i=a(i);return p}function u(i){var s=i.toString("ascii",0,2);if(s==="II")return"LE";if(s==="MM")return"BE"}function h(i,s){if(!s)throw new TypeError("Tiff doesn't support buffer");var p=u(i)==="BE",d=t(i,s,p),y=o(d,p),b=y[256],m=y[257];if(!b||!m)throw new TypeError("Invalid Tiff, missing tags");return{width:b,height:m}}v.exports={detect:c,calculate:h}}).call(this)}).call(this,e("buffer").Buffer)},{"../readUInt":445,buffer:111,fs:109}],458:[function(e,v,M){function r(f){var a=f.toString("ascii",0,4)==="RIFF",o=f.toString("ascii",8,12)==="WEBP",u=f.toString("ascii",12,15)==="VP8";return a&&o&&u}function n(f){var a=f.toString("ascii",12,16);if(f=f.slice(20,30),a==="VP8X"){var o=f[0],u=(o&192)===0,h=(o&1)===0;return u&&h?l(f):!1}if(a==="VP8 "&&f[0]!==47)return t(f);var i=f.toString("hex",3,6);return a==="VP8L"&&i!=="9d012a"?c(f):!1}function l(f){return{width:1+f.readUIntLE(4,3),height:1+f.readUIntLE(7,3)}}function c(f){return{width:1+((f[2]&63)<<8|f[1]),height:1+((f[4]&15)<<10|f[3]<<2|(f[2]&192)>>6)}}function t(f){return{width:f.readInt16LE(6)&16383,height:f.readInt16LE(8)&16383}}v.exports={detect:r,calculate:n}},{}],459:[function(e,v,M){v.exports=h;var r=e("robust-orientation"),n=e("simplicial-complex").compareCells;function l(i,s,p){this.vertices=i,this.adjacent=s,this.boundary=p,this.lastVisited=-1}l.prototype.flip=function(){var i=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=i;var s=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=s};function c(i,s,p){this.vertices=i,this.cell=s,this.index=p}function t(i,s){return n(i.vertices,s.vertices)}function f(i){for(var s=["function orient(){var tuple=this.tuple;return test("],p=0;p<=i;++p)p>0&&s.push(","),s.push("tuple[",p,"]");s.push(")}return orient");var d=new Function("test",s.join("")),y=r[i+1];return y||(y=r),d(y)}var a=[];function o(i,s,p){this.dimension=i,this.vertices=s,this.simplices=p,this.interior=p.filter(function(b){return!b.boundary}),this.tuple=new Array(i+1);for(var d=0;d<=i;++d)this.tuple[d]=this.vertices[d];var y=a[i];y||(y=a[i]=f(i)),this.orient=y}var u=o.prototype;u.handleBoundaryDegeneracy=function(i,s){var p=this.dimension,d=this.vertices.length-1,y=this.tuple,b=this.vertices,m=[i];for(i.lastVisited=-d;m.length>0;){i=m.pop(),i.vertices;for(var _=i.adjacent,T=0;T<=p;++T){var g=_[T];if(!(!g.boundary||g.lastVisited<=-d)){for(var A=g.vertices,k=0;k<=p;++k){var R=A[k];R<0?y[k]=s:y[k]=b[R]}var L=this.orient();if(L>0)return g;g.lastVisited=-d,L===0&&m.push(g)}}}return null},u.walk=function(i,s){var p=this.vertices.length-1,d=this.dimension,y=this.vertices,b=this.tuple,m=s?this.interior.length*Math.random()|0:this.interior.length-1,_=this.interior[m];e:for(;!_.boundary;){for(var T=_.vertices,g=_.adjacent,A=0;A<=d;++A)b[A]=y[T[A]];_.lastVisited=p;for(var A=0;A<=d;++A){var k=g[A];if(!(k.lastVisited>=p)){var R=b[A];b[A]=i;var L=this.orient();if(b[A]=R,L<0){_=k;continue e}else k.boundary?k.lastVisited=-p:k.lastVisited=p}}return}return _},u.addPeaks=function(i,s){var p=this.vertices.length-1,d=this.dimension,y=this.vertices,b=this.tuple,m=this.interior,_=this.simplices,T=[s];s.lastVisited=p,s.vertices[s.vertices.indexOf(-1)]=p,s.boundary=!1,m.push(s);for(var g=[];T.length>0;){var s=T.pop(),A=s.vertices,k=s.adjacent,R=A.indexOf(p);if(!(R<0)){for(var L=0;L<=d;++L)if(L!==R){var z=k[L];if(!(!z.boundary||z.lastVisited>=p)){var E=z.vertices;if(z.lastVisited!==-p){for(var S=0,C=0;C<=d;++C)E[C]<0?(S=C,b[C]=i):b[C]=y[E[C]];var D=this.orient();if(D>0){E[S]=p,z.boundary=!1,m.push(z),T.push(z),z.lastVisited=p;continue}else z.lastVisited=-p}var F=z.adjacent,N=A.slice(),G=k.slice(),U=new l(N,G,!0);_.push(U);var X=F.indexOf(s);if(!(X<0)){F[X]=U,G[R]=z,N[L]=-1,G[L]=s,k[L]=U,U.flip();for(var C=0;C<=d;++C){var I=N[C];if(!(I<0||I===p)){for(var B=new Array(d-1),j=0,H=0;H<=d;++H){var K=N[H];K<0||H===C||(B[j++]=K)}g.push(new c(B,U,C))}}}}}}}g.sort(t);for(var L=0;L+1<g.length;L+=2){var te=g[L],J=g[L+1],oe=te.index,ie=J.index;oe<0||ie<0||(te.cell.adjacent[te.index]=J.cell,J.cell.adjacent[J.index]=te.cell)}},u.insert=function(i,s){var p=this.vertices;p.push(i);var d=this.walk(i,s);if(d){for(var y=this.dimension,b=this.tuple,m=0;m<=y;++m){var _=d.vertices[m];_<0?b[m]=i:b[m]=p[_]}var T=this.orient(b);T<0||T===0&&(d=this.handleBoundaryDegeneracy(d,i),!d)||this.addPeaks(i,d)}},u.boundary=function(){for(var i=this.dimension,s=[],p=this.simplices,d=p.length,y=0;y<d;++y){var b=p[y];if(b.boundary){for(var m=new Array(i),_=b.vertices,T=0,g=0,A=0;A<=i;++A)_[A]>=0?m[T++]=_[A]:g=A&1;if(g===(i&1)){var k=m[0];m[0]=m[1],m[1]=k}s.push(m)}}return s};function h(i,s){var p=i.length;if(p===0)throw new Error("Must have at least d+1 points");var d=i[0].length;if(p<=d)throw new Error("Must input at least d+1 points");var y=i.slice(0,d+1),b=r.apply(void 0,y);if(b===0)throw new Error("Input not in general position");for(var m=new Array(d+1),_=0;_<=d;++_)m[_]=_;b<0&&(m[0]=1,m[1]=0);for(var T=new l(m,new Array(d+1),!1),g=T.adjacent,A=new Array(d+2),_=0;_<=d;++_){for(var k=m.slice(),R=0;R<=d;++R)R===_&&(k[R]=-1);var L=k[0];k[0]=k[1],k[1]=L;var z=new l(k,new Array(d+1),!0);g[_]=z,A[_]=z}A[d+1]=T;for(var _=0;_<=d;++_)for(var k=g[_].vertices,E=g[_].adjacent,R=0;R<=d;++R){var S=k[R];if(S<0){E[R]=T;continue}for(var C=0;C<=d;++C)g[C].vertices.indexOf(S)<0&&(E[R]=g[C])}for(var D=new o(d,y,A),F=!!s,_=d+1;_<p;++_)D.insert(i[_],F);return D.boundary()}},{"robust-orientation":548,"simplicial-complex":558}],460:[function(e,v,M){var r=e("binary-search-bounds"),n=0,l=1,c=2;v.exports=g;function t(A,k,R,L,z){this.mid=A,this.left=k,this.right=R,this.leftPoints=L,this.rightPoints=z,this.count=(k?k.count:0)+(R?R.count:0)+L.length}var f=t.prototype;function a(A,k){A.mid=k.mid,A.left=k.left,A.right=k.right,A.leftPoints=k.leftPoints,A.rightPoints=k.rightPoints,A.count=k.count}function o(A,k){var R=m(k);A.mid=R.mid,A.left=R.left,A.right=R.right,A.leftPoints=R.leftPoints,A.rightPoints=R.rightPoints,A.count=R.count}function u(A,k){var R=A.intervals([]);R.push(k),o(A,R)}function h(A,k){var R=A.intervals([]),L=R.indexOf(k);return L<0?n:(R.splice(L,1),o(A,R),l)}f.intervals=function(A){return A.push.apply(A,this.leftPoints),this.left&&this.left.intervals(A),this.right&&this.right.intervals(A),A},f.insert=function(A){var k=this.count-this.leftPoints.length;if(this.count+=1,A[1]<this.mid)this.left?4*(this.left.count+1)>3*(k+1)?u(this,A):this.left.insert(A):this.left=m([A]);else if(A[0]>this.mid)this.right?4*(this.right.count+1)>3*(k+1)?u(this,A):this.right.insert(A):this.right=m([A]);else{var R=r.ge(this.leftPoints,A,y),L=r.ge(this.rightPoints,A,b);this.leftPoints.splice(R,0,A),this.rightPoints.splice(L,0,A)}},f.remove=function(A){var k=this.count-this.leftPoints;if(A[1]<this.mid){if(!this.left)return n;var R=this.right?this.right.count:0;if(4*R>3*(k-1))return h(this,A);var L=this.left.remove(A);return L===c?(this.left=null,this.count-=1,l):(L===l&&(this.count-=1),L)}else if(A[0]>this.mid){if(!this.right)return n;var z=this.left?this.left.count:0;if(4*z>3*(k-1))return h(this,A);var L=this.right.remove(A);return L===c?(this.right=null,this.count-=1,l):(L===l&&(this.count-=1),L)}else{if(this.count===1)return this.leftPoints[0]===A?c:n;if(this.leftPoints.length===1&&this.leftPoints[0]===A){if(this.left&&this.right){for(var E=this,S=this.left;S.right;)E=S,S=S.right;if(E===this)S.right=this.right;else{var C=this.left,L=this.right;E.count-=S.count,E.right=S.left,S.left=C,S.right=L}a(this,S),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?a(this,this.left):a(this,this.right);return l}for(var C=r.ge(this.leftPoints,A,y);C<this.leftPoints.length&&this.leftPoints[C][0]===A[0];++C)if(this.leftPoints[C]===A){this.count-=1,this.leftPoints.splice(C,1);for(var L=r.ge(this.rightPoints,A,b);L<this.rightPoints.length&&this.rightPoints[L][1]===A[1];++L)if(this.rightPoints[L]===A)return this.rightPoints.splice(L,1),l}return n}};function i(A,k,R){for(var L=0;L<A.length&&A[L][0]<=k;++L){var z=R(A[L]);if(z)return z}}function s(A,k,R){for(var L=A.length-1;L>=0&&A[L][1]>=k;--L){var z=R(A[L]);if(z)return z}}function p(A,k){for(var R=0;R<A.length;++R){var L=k(A[R]);if(L)return L}}f.queryPoint=function(A,k){if(A<this.mid){if(this.left){var R=this.left.queryPoint(A,k);if(R)return R}return i(this.leftPoints,A,k)}else if(A>this.mid){if(this.right){var R=this.right.queryPoint(A,k);if(R)return R}return s(this.rightPoints,A,k)}else return p(this.leftPoints,k)},f.queryInterval=function(A,k,R){if(A<this.mid&&this.left){var L=this.left.queryInterval(A,k,R);if(L)return L}if(k>this.mid&&this.right){var L=this.right.queryInterval(A,k,R);if(L)return L}return k<this.mid?i(this.leftPoints,k,R):A>this.mid?s(this.rightPoints,A,R):p(this.leftPoints,R)};function d(A,k){return A-k}function y(A,k){var R=A[0]-k[0];return R||A[1]-k[1]}function b(A,k){var R=A[1]-k[1];return R||A[0]-k[0]}function m(A){if(A.length===0)return null;for(var k=[],R=0;R<A.length;++R)k.push(A[R][0],A[R][1]);k.sort(d);for(var L=k[k.length>>1],z=[],E=[],S=[],R=0;R<A.length;++R){var C=A[R];C[1]<L?z.push(C):L<C[0]?E.push(C):S.push(C)}var D=S,F=S.slice();return D.sort(y),F.sort(b),new t(L,m(z),m(E),D,F)}function _(A){this.root=A}var T=_.prototype;T.insert=function(A){this.root?this.root.insert(A):this.root=new t(A[0],null,null,[A],[A])},T.remove=function(A){if(this.root){var k=this.root.remove(A);return k===c&&(this.root=null),k!==n}return!1},T.queryPoint=function(A,k){if(this.root)return this.root.queryPoint(A,k)},T.queryInterval=function(A,k,R){if(A<=k&&this.root)return this.root.queryInterval(A,k,R)},Object.defineProperty(T,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(T,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function g(A){return!A||A.length===0?new _(null):new _(m(A))}},{"binary-search-bounds":461}],461:[function(e,v,M){arguments[4][243][0].apply(M,arguments)},{dup:243}],462:[function(e,v,M){function r(n,l){l=l||new Array(n.length);for(var c=0;c<n.length;++c)l[n[c]]=c;return l}v.exports=r},{}],463:[function(e,v,M){function r(n){for(var l=new Array(n),c=0;c<n;++c)l[c]=c;return l}v.exports=r},{}],464:[function(e,v,M){v.exports=!0},{}],465:[function(e,v,M){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */v.exports=function(l){return l!=null&&(r(l)||n(l)||!!l._isBuffer)};function r(l){return!!l.constructor&&typeof l.constructor.isBuffer=="function"&&l.constructor.isBuffer(l)}function n(l){return typeof l.readFloatLE=="function"&&typeof l.slice=="function"&&r(l.slice(0,0))}},{}],466:[function(e,v,M){v.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],467:[function(e,v,M){v.exports=l,v.exports.isMobile=l,v.exports.default=l;var r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function l(c){c||(c={});var t=c.ua;if(!t&&typeof navigator<"u"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;var f=c.tablet?n.test(t):r.test(t);return!f&&c.tablet&&c.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(f=!0),f}},{}],468:[function(e,v,M){v.exports=function(r){var n=typeof r;return r!==null&&(n==="object"||n==="function")}},{}],469:[function(e,v,M){var r=Object.prototype.toString;v.exports=function(n){var l;return r.call(n)==="[object Object]"&&(l=Object.getPrototypeOf(n),l===null||l===Object.getPrototypeOf({}))}},{}],470:[function(e,v,M){v.exports=function(r){for(var n=r.length,l,c=0;c<n;c++)if(l=r.charCodeAt(c),(l<9||l>13)&&l!==32&&l!==133&&l!==160&&l!==5760&&l!==6158&&(l<8192||l>8205)&&l!==8232&&l!==8233&&l!==8239&&l!==8287&&l!==8288&&l!==12288&&l!==65279)return!1;return!0}},{}],471:[function(e,v,M){v.exports=function(n){return typeof n!="string"?!1:(n=n.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(n)&&/[\dz]$/i.test(n)&&n.length>4))}},{}],472:[function(e,v,M){function r(n,l,c){return n*(1-c)+l*c}v.exports=r},{}],473:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?v.exports=n():(r=r||self,r.mapboxgl=n())})(this,function(){var r,n,l;function c(t,f){if(!r)r=f;else if(!n)n=f;else{var a="var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk);",o={};r(o),l=f(o),l.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}}return c(["exports"],function(t){function f(w,O){return w(O={exports:{}},O.exports),O.exports}var a=o;function o(w,O,Z,ce){this.cx=3*w,this.bx=3*(Z-w)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*O,this.by=3*(ce-O)-this.cy,this.ay=1-this.cy-this.by,this.p1x=w,this.p1y=ce,this.p2x=Z,this.p2y=ce}o.prototype.sampleCurveX=function(w){return((this.ax*w+this.bx)*w+this.cx)*w},o.prototype.sampleCurveY=function(w){return((this.ay*w+this.by)*w+this.cy)*w},o.prototype.sampleCurveDerivativeX=function(w){return(3*this.ax*w+2*this.bx)*w+this.cx},o.prototype.solveCurveX=function(w,O){var Z,ce,xe,we,Re;for(O===void 0&&(O=1e-6),xe=w,Re=0;Re<8;Re++){if(we=this.sampleCurveX(xe)-w,Math.abs(we)<O)return xe;var Ke=this.sampleCurveDerivativeX(xe);if(Math.abs(Ke)<1e-6)break;xe-=we/Ke}if((xe=w)<(Z=0))return Z;if(xe>(ce=1))return ce;for(;Z<ce;){if(we=this.sampleCurveX(xe),Math.abs(we-w)<O)return xe;w>we?Z=xe:ce=xe,xe=.5*(ce-Z)+Z}return xe},o.prototype.solve=function(w,O){return this.sampleCurveY(this.solveCurveX(w,O))};var u=h;function h(w,O){this.x=w,this.y=O}function i(w,O,Z,ce){var xe=new a(w,O,Z,ce);return function(we){return xe.solve(we)}}h.prototype={clone:function(){return new h(this.x,this.y)},add:function(w){return this.clone()._add(w)},sub:function(w){return this.clone()._sub(w)},multByPoint:function(w){return this.clone()._multByPoint(w)},divByPoint:function(w){return this.clone()._divByPoint(w)},mult:function(w){return this.clone()._mult(w)},div:function(w){return this.clone()._div(w)},rotate:function(w){return this.clone()._rotate(w)},rotateAround:function(w,O){return this.clone()._rotateAround(w,O)},matMult:function(w){return this.clone()._matMult(w)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(w){return this.x===w.x&&this.y===w.y},dist:function(w){return Math.sqrt(this.distSqr(w))},distSqr:function(w){var O=w.x-this.x,Z=w.y-this.y;return O*O+Z*Z},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(w){return Math.atan2(this.y-w.y,this.x-w.x)},angleWith:function(w){return this.angleWithSep(w.x,w.y)},angleWithSep:function(w,O){return Math.atan2(this.x*O-this.y*w,this.x*w+this.y*O)},_matMult:function(w){var O=w[2]*this.x+w[3]*this.y;return this.x=w[0]*this.x+w[1]*this.y,this.y=O,this},_add:function(w){return this.x+=w.x,this.y+=w.y,this},_sub:function(w){return this.x-=w.x,this.y-=w.y,this},_mult:function(w){return this.x*=w,this.y*=w,this},_div:function(w){return this.x/=w,this.y/=w,this},_multByPoint:function(w){return this.x*=w.x,this.y*=w.y,this},_divByPoint:function(w){return this.x/=w.x,this.y/=w.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var w=this.y;return this.y=this.x,this.x=-w,this},_rotate:function(w){var O=Math.cos(w),Z=Math.sin(w),ce=Z*this.x+O*this.y;return this.x=O*this.x-Z*this.y,this.y=ce,this},_rotateAround:function(w,O){var Z=Math.cos(w),ce=Math.sin(w),xe=O.y+ce*(this.x-O.x)+Z*(this.y-O.y);return this.x=O.x+Z*(this.x-O.x)-ce*(this.y-O.y),this.y=xe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(w){return w instanceof h?w:Array.isArray(w)?new h(w[0],w[1]):w};var s=i(.25,.1,.25,1);function p(w,O,Z){return Math.min(Z,Math.max(O,w))}function d(w,O,Z){var ce=Z-O,xe=((w-O)%ce+ce)%ce+O;return xe===O?Z:xe}function y(w){for(var O=[],Z=arguments.length-1;Z-- >0;)O[Z]=arguments[Z+1];for(var ce=0,xe=O;ce<xe.length;ce+=1){var we=xe[ce];for(var Re in we)w[Re]=we[Re]}return w}var b=1;function m(){return b++}function _(){return function w(O){return O?(O^16*Math.random()>>O/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,w)}()}function T(w){return!!w&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(w)}function g(w,O){w.forEach(function(Z){O[Z]&&(O[Z]=O[Z].bind(O))})}function A(w,O){return w.indexOf(O,w.length-O.length)!==-1}function k(w,O,Z){var ce={};for(var xe in w)ce[xe]=O.call(Z||this,w[xe],xe,w);return ce}function R(w,O,Z){var ce={};for(var xe in w)O.call(Z||this,w[xe],xe,w)&&(ce[xe]=w[xe]);return ce}function L(w){return Array.isArray(w)?w.map(L):typeof w=="object"&&w?k(w,L):w}var z={};function E(w){z[w]||(typeof console<"u"&&console.warn(w),z[w]=!0)}function S(w,O,Z){return(Z.y-w.y)*(O.x-w.x)>(O.y-w.y)*(Z.x-w.x)}function C(w){for(var O=0,Z=0,ce=w.length,xe=ce-1,we=void 0,Re=void 0;Z<ce;xe=Z++)O+=((Re=w[xe]).x-(we=w[Z]).x)*(we.y+Re.y);return O}function D(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function F(w){var O={};if(w.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ce,xe,we,Re){var Ke=we||Re;return O[xe]=!Ke||Ke.toLowerCase(),""}),O["max-age"]){var Z=parseInt(O["max-age"],10);isNaN(Z)?delete O["max-age"]:O["max-age"]=Z}return O}var N=null;function G(w){if(N==null){var O=w.navigator?w.navigator.userAgent:null;N=!!w.safari||!(!O||!(/\b(iPad|iPhone|iPod)\b/.test(O)||O.match("Safari")&&!O.match("Chrome")))}return N}function U(w){try{var O=self[w];return O.setItem("_mapbox_test_",1),O.removeItem("_mapbox_test_"),!0}catch{return!1}}var X,I,B,j,H=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),K=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,te=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,J={now:H,frame:function(w){var O=K(w);return{cancel:function(){return te(O)}}},getImageData:function(w,O){O===void 0&&(O=0);var Z=self.document.createElement("canvas"),ce=Z.getContext("2d");if(!ce)throw new Error("failed to create canvas 2d context");return Z.width=w.width,Z.height=w.height,ce.drawImage(w,0,0,w.width,w.height),ce.getImageData(-O,-O,w.width+2*O,w.height+2*O)},resolveURL:function(w){return X||(X=self.document.createElement("a")),X.href=w,X.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(I==null&&(I=self.matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}},oe={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ie={supported:!1,testSupport:function(w){!Q&&j&&(V?se(w):B=w)}},Q=!1,V=!1;function se(w){var O=w.createTexture();w.bindTexture(w.TEXTURE_2D,O);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,j),w.isContextLost())return;ie.supported=!0}catch{}w.deleteTexture(O),Q=!0}self.document&&((j=self.document.createElement("img")).onload=function(){B&&se(B),B=null,V=!0},j.onerror=function(){Q=!0,B=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var re="01",ee=function(w,O){this._transformRequestFn=w,this._customAccessToken=O,this._createSkuToken()};function ae(w){return w.indexOf("mapbox:")===0}ee.prototype._createSkuToken=function(){var w=function(){for(var O="",Z=0;Z<10;Z++)O+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",re,O].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=w.token,this._skuTokenExpiresAt=w.tokenExpiresAt},ee.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ee.prototype.transformRequest=function(w,O){return this._transformRequestFn&&this._transformRequestFn(w,O)||{url:w}},ee.prototype.normalizeStyleURL=function(w,O){if(!ae(w))return w;var Z=W(w);return Z.path="/styles/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||O)},ee.prototype.normalizeGlyphsURL=function(w,O){if(!ae(w))return w;var Z=W(w);return Z.path="/fonts/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||O)},ee.prototype.normalizeSourceURL=function(w,O){if(!ae(w))return w;var Z=W(w);return Z.path="/v4/"+Z.authority+".json",Z.params.push("secure"),this._makeAPIURL(Z,this._customAccessToken||O)},ee.prototype.normalizeSpriteURL=function(w,O,Z,ce){var xe=W(w);return ae(w)?(xe.path="/styles/v1"+xe.path+"/sprite"+O+Z,this._makeAPIURL(xe,this._customAccessToken||ce)):(xe.path+=""+O+Z,ue(xe))},ee.prototype.normalizeTileURL=function(w,O){if(this._isSkuTokenExpired()&&this._createSkuToken(),w&&!ae(w))return w;var Z=W(w);Z.path=Z.path.replace(/(\.(png|jpg)\d*)(?=$)/,(J.devicePixelRatio>=2||O===512?"@2x":"")+(ie.supported?".webp":"$1")),Z.path=Z.path.replace(/^.+\/v4\//,"/"),Z.path="/v4"+Z.path;var ce=this._customAccessToken||function(xe){for(var we=0,Re=xe;we<Re.length;we+=1){var Ke=Re[we].match(/^access_token=(.*)$/);if(Ke)return Ke[1]}return null}(Z.params)||oe.ACCESS_TOKEN;return oe.REQUIRE_ACCESS_TOKEN&&ce&&this._skuToken&&Z.params.push("sku="+this._skuToken),this._makeAPIURL(Z,ce)},ee.prototype.canonicalizeTileURL=function(w,O){var Z=W(w);if(!Z.path.match(/(^\/v4\/)/)||!Z.path.match(/\.[\w]+$/))return w;var ce="mapbox://tiles/";ce+=Z.path.replace("/v4/","");var xe=Z.params;return O&&(xe=xe.filter(function(we){return!we.match(/^access_token=/)})),xe.length&&(ce+="?"+xe.join("&")),ce},ee.prototype.canonicalizeTileset=function(w,O){for(var Z=!!O&&ae(O),ce=[],xe=0,we=w.tiles||[];xe<we.length;xe+=1){var Re=we[xe];de(Re)?ce.push(this.canonicalizeTileURL(Re,Z)):ce.push(Re)}return ce},ee.prototype._makeAPIURL=function(w,O){var Z="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ce=W(oe.API_URL);if(w.protocol=ce.protocol,w.authority=ce.authority,ce.path!=="/"&&(w.path=""+ce.path+w.path),!oe.REQUIRE_ACCESS_TOKEN)return ue(w);if(!(O=O||oe.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Z);if(O[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Z);return w.params=w.params.filter(function(xe){return xe.indexOf("access_token")===-1}),w.params.push("access_token="+O),ue(w)};var fe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function de(w){return fe.test(w)}var pe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function W(w){var O=w.match(pe);if(!O)throw new Error("Unable to parse URL object");return{protocol:O[1],authority:O[2],path:O[3]||"/",params:O[4]?O[4].split("&"):[]}}function ue(w){var O=w.params.length?"?"+w.params.join("&"):"";return w.protocol+"://"+w.authority+w.path+O}function me(w){if(!w)return null;var O=w.split(".");if(!O||O.length!==3)return null;try{return JSON.parse(decodeURIComponent(self.atob(O[1]).split("").map(function(Z){return"%"+("00"+Z.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var be=function(w){this.type=w,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};be.prototype.getStorageKey=function(w){var O,Z=me(oe.ACCESS_TOKEN);return O=Z&&Z.u?self.btoa(encodeURIComponent(Z.u).replace(/%([0-9A-F]{2})/g,function(ce,xe){return String.fromCharCode(+("0x"+xe))})):oe.ACCESS_TOKEN||"",w?"mapbox.eventData."+w+":"+O:"mapbox.eventData:"+O},be.prototype.fetchEventData=function(){var w=U("localStorage"),O=this.getStorageKey(),Z=this.getStorageKey("uuid");if(w)try{var ce=self.localStorage.getItem(O);ce&&(this.eventData=JSON.parse(ce));var xe=self.localStorage.getItem(Z);xe&&(this.anonId=xe)}catch{E("Unable to read from LocalStorage")}},be.prototype.saveEventData=function(){var w=U("localStorage"),O=this.getStorageKey(),Z=this.getStorageKey("uuid");if(w)try{self.localStorage.setItem(Z,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(O,JSON.stringify(this.eventData))}catch{E("Unable to write to LocalStorage")}},be.prototype.processRequests=function(w){},be.prototype.postEvent=function(w,O,Z,ce){var xe=this;if(oe.EVENTS_URL){var we=W(oe.EVENTS_URL);we.params.push("access_token="+(ce||oe.ACCESS_TOKEN||""));var Re={event:this.type,created:new Date(w).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:re,userId:this.anonId},Ke=O?y(Re,O):Re,pt={url:ue(we),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ke])};this.pendingRequest=Lt(pt,function(Et){xe.pendingRequest=null,Z(Et),xe.saveEventData(),xe.processRequests(ce)})}},be.prototype.queueRequest=function(w,O){this.queue.push(w),this.processRequests(O)};var ke,Pe,je=function(w){function O(){w.call(this,"map.load"),this.success={},this.skuToken=""}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.postMapLoadEvent=function(Z,ce,xe,we){this.skuToken=xe,(oe.EVENTS_URL&&we||oe.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(Re){return ae(Re)||de(Re)}))&&this.queueRequest({id:ce,timestamp:Date.now()},we)},O.prototype.processRequests=function(Z){var ce=this;if(!this.pendingRequest&&this.queue.length!==0){var xe=this.queue.shift(),we=xe.id,Re=xe.timestamp;we&&this.success[we]||(this.anonId||this.fetchEventData(),T(this.anonId)||(this.anonId=_()),this.postEvent(Re,{skuToken:this.skuToken},function(Ke){Ke||we&&(ce.success[we]=!0)},Z))}},O}(be),ze=new(function(w){function O(Z){w.call(this,"appUserTurnstile"),this._customAccessToken=Z}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.postTurnstileEvent=function(Z,ce){oe.EVENTS_URL&&oe.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(xe){return ae(xe)||de(xe)})&&this.queueRequest(Date.now(),ce)},O.prototype.processRequests=function(Z){var ce=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var xe=me(oe.ACCESS_TOKEN),we=xe?xe.u:oe.ACCESS_TOKEN,Re=we!==this.eventData.tokenU;T(this.anonId)||(this.anonId=_(),Re=!0);var Ke=this.queue.shift();if(this.eventData.lastSuccess){var pt=new Date(this.eventData.lastSuccess),Et=new Date(Ke),Ot=(Ke-this.eventData.lastSuccess)/864e5;Re=Re||Ot>=1||Ot<-1||pt.getDate()!==Et.getDate()}else Re=!0;if(!Re)return this.processRequests();this.postEvent(Ke,{"enabled.telemetry":!1},function(Ht){Ht||(ce.eventData.lastSuccess=Ke,ce.eventData.tokenU=we)},Z)}},O}(be)),Ze=ze.postTurnstileEvent.bind(ze),tt=new je,Ce=tt.postMapLoadEvent.bind(tt),Ae=500,Ne=50;function qe(){self.caches&&!ke&&(ke=self.caches.open("mapbox-tiles"))}function At(w){var O=w.indexOf("?");return O<0?w:w.slice(0,O)}var kt,Ve=1/0;function ft(){return kt==null&&(kt=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),kt}var St={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(St);var Wt=function(w){function O(Z,ce,xe){ce===401&&de(xe)&&(Z+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),w.call(this,Z),this.status=ce,this.url=xe,this.name=this.constructor.name,this.message=Z}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},O}(Error),Qt=D()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},zt,$t,rr=function(w,O){if(!(/^file:/.test(Z=w.url)||/^file:/.test(Qt())&&!/^\w+:/.test(Z))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(ce,xe){var we,Re=new self.AbortController,Ke=new self.Request(ce.url,{method:ce.method||"GET",body:ce.body,credentials:ce.credentials,headers:ce.headers,referrer:Qt(),signal:Re.signal}),pt=!1,Et=!1,Ot=(we=Ke.url).indexOf("sku=")>0&&de(we);ce.type==="json"&&Ke.headers.set("Accept","application/json");var Ht=function(lr,Ar,Sr){if(!Et){if(lr&&lr.message!=="SecurityError"&&E(lr),Ar&&Sr)return Jt(Ar);var Zr=Date.now();self.fetch(Ke).then(function(Br){if(Br.ok){var ln=Ot?Br.clone():null;return Jt(Br,ln,Zr)}return xe(new Wt(Br.statusText,Br.status,ce.url))}).catch(function(Br){Br.code!==20&&xe(new Error(Br.message))})}},Jt=function(lr,Ar,Sr){(ce.type==="arrayBuffer"?lr.arrayBuffer():ce.type==="json"?lr.json():lr.text()).then(function(Zr){Et||(Ar&&Sr&&function(Br,ln,mn){if(qe(),ke){var In={status:ln.status,statusText:ln.statusText,headers:new self.Headers};ln.headers.forEach(function(Kn,xa){return In.headers.set(xa,Kn)});var On=F(ln.headers.get("Cache-Control")||"");On["no-store"]||(On["max-age"]&&In.headers.set("Expires",new Date(mn+1e3*On["max-age"]).toUTCString()),new Date(In.headers.get("Expires")).getTime()-mn<42e4||function(Kn,xa){if(Pe===void 0)try{new Response(new ReadableStream),Pe=!0}catch{Pe=!1}Pe?xa(Kn.body):Kn.blob().then(xa)}(ln,function(Kn){var xa=new self.Response(Kn,In);qe(),ke&&ke.then(function(Pa){return Pa.put(At(Br.url),xa)}).catch(function(Pa){return E(Pa.message)})}))}}(Ke,Ar,Sr),pt=!0,xe(null,Zr,lr.headers.get("Cache-Control"),lr.headers.get("Expires")))}).catch(function(Zr){Et||xe(new Error(Zr.message))})};return Ot?function(lr,Ar){if(qe(),!ke)return Ar(null);var Sr=At(lr.url);ke.then(function(Zr){Zr.match(Sr).then(function(Br){var ln=function(mn){if(!mn)return!1;var In=new Date(mn.headers.get("Expires")||0),On=F(mn.headers.get("Cache-Control")||"");return In>Date.now()&&!On["no-cache"]}(Br);Zr.delete(Sr),ln&&Zr.put(Sr,Br.clone()),Ar(null,Br,ln)}).catch(Ar)}).catch(Ar)}(Ke,Ht):Ht(null,null),{cancel:function(){Et=!0,pt||Re.abort()}}}(w,O);if(D()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",w,O,void 0,!0)}var Z;return function(ce,xe){var we=new self.XMLHttpRequest;for(var Re in we.open(ce.method||"GET",ce.url,!0),ce.type==="arrayBuffer"&&(we.responseType="arraybuffer"),ce.headers)we.setRequestHeader(Re,ce.headers[Re]);return ce.type==="json"&&(we.responseType="text",we.setRequestHeader("Accept","application/json")),we.withCredentials=ce.credentials==="include",we.onerror=function(){xe(new Error(we.statusText))},we.onload=function(){if((we.status>=200&&we.status<300||we.status===0)&&we.response!==null){var Ke=we.response;if(ce.type==="json")try{Ke=JSON.parse(we.response)}catch(pt){return xe(pt)}xe(null,Ke,we.getResponseHeader("Cache-Control"),we.getResponseHeader("Expires"))}else xe(new Wt(we.statusText,we.status,ce.url))},we.send(ce.body),{cancel:function(){return we.abort()}}}(w,O)},Pt=function(w,O){return rr(y(w,{type:"arrayBuffer"}),O)},Lt=function(w,O){return rr(y(w,{method:"POST"}),O)};zt=[],$t=0;var dt=function(w,O){if(ie.supported&&(w.headers||(w.headers={}),w.headers.accept="image/webp,*/*"),$t>=oe.MAX_PARALLEL_IMAGE_REQUESTS){var Z={requestParameters:w,callback:O,cancelled:!1,cancel:function(){this.cancelled=!0}};return zt.push(Z),Z}$t++;var ce=!1,xe=function(){if(!ce)for(ce=!0,$t--;zt.length&&$t<oe.MAX_PARALLEL_IMAGE_REQUESTS;){var Re=zt.shift();Re.cancelled||(Re.cancel=dt(Re.requestParameters,Re.callback).cancel)}},we=Pt(w,function(Re,Ke,pt,Et){xe(),Re?O(Re):Ke&&(ft()?function(Ot,Ht){var Jt=new self.Blob([new Uint8Array(Ot)],{type:"image/png"});self.createImageBitmap(Jt).then(function(lr){Ht(null,lr)}).catch(function(lr){Ht(new Error("Could not load image because of "+lr.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Ke,O):function(Ot,Ht,Jt,lr){var Ar=new self.Image,Sr=self.URL;Ar.onload=function(){Ht(null,Ar),Sr.revokeObjectURL(Ar.src)},Ar.onerror=function(){return Ht(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Zr=new self.Blob([new Uint8Array(Ot)],{type:"image/png"});Ar.cacheControl=Jt,Ar.expires=lr,Ar.src=Ot.byteLength?Sr.createObjectURL(Zr):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ke,O,pt,Et))});return{cancel:function(){we.cancel(),xe()}}};function lt(w,O,Z){Z[w]&&Z[w].indexOf(O)!==-1||(Z[w]=Z[w]||[],Z[w].push(O))}function Te(w,O,Z){if(Z&&Z[w]){var ce=Z[w].indexOf(O);ce!==-1&&Z[w].splice(ce,1)}}var Le=function(w,O){O===void 0&&(O={}),y(this,O),this.type=w},Be=function(w){function O(Z,ce){ce===void 0&&(ce={}),w.call(this,"error",y({error:Z},ce))}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O}(Le),et=function(){};et.prototype.on=function(w,O){return this._listeners=this._listeners||{},lt(w,O,this._listeners),this},et.prototype.off=function(w,O){return Te(w,O,this._listeners),Te(w,O,this._oneTimeListeners),this},et.prototype.once=function(w,O){return this._oneTimeListeners=this._oneTimeListeners||{},lt(w,O,this._oneTimeListeners),this},et.prototype.fire=function(w,O){typeof w=="string"&&(w=new Le(w,O||{}));var Z=w.type;if(this.listens(Z)){w.target=this;for(var ce=0,xe=this._listeners&&this._listeners[Z]?this._listeners[Z].slice():[];ce<xe.length;ce+=1)xe[ce].call(this,w);for(var we=0,Re=this._oneTimeListeners&&this._oneTimeListeners[Z]?this._oneTimeListeners[Z].slice():[];we<Re.length;we+=1){var Ke=Re[we];Te(Z,Ke,this._oneTimeListeners),Ke.call(this,w)}var pt=this._eventedParent;pt&&(y(w,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),pt.fire(w))}else w instanceof Be&&console.error(w.error);return this},et.prototype.listens=function(w){return this._listeners&&this._listeners[w]&&this._listeners[w].length>0||this._oneTimeListeners&&this._oneTimeListeners[w]&&this._oneTimeListeners[w].length>0||this._eventedParent&&this._eventedParent.listens(w)},et.prototype.setEventedParent=function(w,O){return this._eventedParent=w,this._eventedParentData=O,this};var Me={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ie=function(w,O,Z,ce){this.message=(w?w+": ":"")+Z,ce&&(this.identifier=ce),O!=null&&O.__line__&&(this.line=O.__line__)};function He(w){var O=w.value;return O?[new Ie(w.key,O,"constants have been deprecated as of v8")]:[]}function Xe(w){for(var O=[],Z=arguments.length-1;Z-- >0;)O[Z]=arguments[Z+1];for(var ce=0,xe=O;ce<xe.length;ce+=1){var we=xe[ce];for(var Re in we)w[Re]=we[Re]}return w}function ht(w){return w instanceof Number||w instanceof String||w instanceof Boolean?w.valueOf():w}function it(w){if(Array.isArray(w))return w.map(it);if(w instanceof Object&&!(w instanceof Number||w instanceof String||w instanceof Boolean)){var O={};for(var Z in w)O[Z]=it(w[Z]);return O}return ht(w)}var Ge=function(w){function O(Z,ce){w.call(this,ce),this.message=ce,this.key=Z}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O}(Error),ot=function(w,O){O===void 0&&(O=[]),this.parent=w,this.bindings={};for(var Z=0,ce=O;Z<ce.length;Z+=1){var xe=ce[Z];this.bindings[xe[0]]=xe[1]}};ot.prototype.concat=function(w){return new ot(this,w)},ot.prototype.get=function(w){if(this.bindings[w])return this.bindings[w];if(this.parent)return this.parent.get(w);throw new Error(w+" not found in scope.")},ot.prototype.has=function(w){return!!this.bindings[w]||!!this.parent&&this.parent.has(w)};var Je={kind:"null"},st={kind:"number"},It={kind:"string"},Ft={kind:"boolean"},nr={kind:"color"},We={kind:"object"},Fe={kind:"value"},_t={kind:"collator"},Mt={kind:"formatted"},wt={kind:"resolvedImage"};function Dt(w,O){return{kind:"array",itemType:w,N:O}}function Rt(w){if(w.kind==="array"){var O=Rt(w.itemType);return typeof w.N=="number"?"array<"+O+", "+w.N+">":w.itemType.kind==="value"?"array":"array<"+O+">"}return w.kind}var Bt=[Je,st,It,Ft,nr,Mt,We,Dt(Fe),wt];function Nt(w,O){if(O.kind==="error")return null;if(w.kind==="array"){if(O.kind==="array"&&(O.N===0&&O.itemType.kind==="value"||!Nt(w.itemType,O.itemType))&&(typeof w.N!="number"||w.N===O.N))return null}else{if(w.kind===O.kind)return null;if(w.kind==="value"){for(var Z=0,ce=Bt;Z<ce.length;Z+=1)if(!Nt(ce[Z],O))return null}}return"Expected "+Rt(w)+" but found "+Rt(O)+" instead."}function er(w,O){return O.some(function(Z){return Z.kind===w.kind})}function qt(w,O){return O.some(function(Z){return Z==="null"?w===null:Z==="array"?Array.isArray(w):Z==="object"?w&&!Array.isArray(w)&&typeof w=="object":Z===typeof w})}var Zt=f(function(w,O){var Z={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ce(Ke){return(Ke=Math.round(Ke))<0?0:Ke>255?255:Ke}function xe(Ke){return ce(Ke[Ke.length-1]==="%"?parseFloat(Ke)/100*255:parseInt(Ke))}function we(Ke){return(pt=Ke[Ke.length-1]==="%"?parseFloat(Ke)/100:parseFloat(Ke))<0?0:pt>1?1:pt;var pt}function Re(Ke,pt,Et){return Et<0?Et+=1:Et>1&&(Et-=1),6*Et<1?Ke+(pt-Ke)*Et*6:2*Et<1?pt:3*Et<2?Ke+(pt-Ke)*(2/3-Et)*6:Ke}try{O.parseCSSColor=function(Ke){var pt,Et=Ke.replace(/ /g,"").toLowerCase();if(Et in Z)return Z[Et].slice();if(Et[0]==="#")return Et.length===4?(pt=parseInt(Et.substr(1),16))>=0&&pt<=4095?[(3840&pt)>>4|(3840&pt)>>8,240&pt|(240&pt)>>4,15&pt|(15&pt)<<4,1]:null:Et.length===7&&(pt=parseInt(Et.substr(1),16))>=0&&pt<=16777215?[(16711680&pt)>>16,(65280&pt)>>8,255&pt,1]:null;var Ot=Et.indexOf("("),Ht=Et.indexOf(")");if(Ot!==-1&&Ht+1===Et.length){var Jt=Et.substr(0,Ot),lr=Et.substr(Ot+1,Ht-(Ot+1)).split(","),Ar=1;switch(Jt){case"rgba":if(lr.length!==4)return null;Ar=we(lr.pop());case"rgb":return lr.length!==3?null:[xe(lr[0]),xe(lr[1]),xe(lr[2]),Ar];case"hsla":if(lr.length!==4)return null;Ar=we(lr.pop());case"hsl":if(lr.length!==3)return null;var Sr=(parseFloat(lr[0])%360+360)%360/360,Zr=we(lr[1]),Br=we(lr[2]),ln=Br<=.5?Br*(Zr+1):Br+Zr-Br*Zr,mn=2*Br-ln;return[ce(255*Re(mn,ln,Sr+1/3)),ce(255*Re(mn,ln,Sr)),ce(255*Re(mn,ln,Sr-1/3)),Ar];default:return null}}return null}}catch{}}).parseCSSColor,_r=function(w,O,Z,ce){ce===void 0&&(ce=1),this.r=w,this.g=O,this.b=Z,this.a=ce};_r.parse=function(w){if(w){if(w instanceof _r)return w;if(typeof w=="string"){var O=Zt(w);if(O)return new _r(O[0]/255*O[3],O[1]/255*O[3],O[2]/255*O[3],O[3])}}},_r.prototype.toString=function(){var w=this.toArray(),O=w[1],Z=w[2],ce=w[3];return"rgba("+Math.round(w[0])+","+Math.round(O)+","+Math.round(Z)+","+ce+")"},_r.prototype.toArray=function(){var w=this.a;return w===0?[0,0,0,0]:[255*this.r/w,255*this.g/w,255*this.b/w,w]},_r.black=new _r(0,0,0,1),_r.white=new _r(1,1,1,1),_r.transparent=new _r(0,0,0,0),_r.red=new _r(1,0,0,1);var Gr=function(w,O,Z){this.sensitivity=w?O?"variant":"case":O?"accent":"base",this.locale=Z,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Gr.prototype.compare=function(w,O){return this.collator.compare(w,O)},Gr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var zr=function(w,O,Z,ce,xe){this.text=w,this.image=O,this.scale=Z,this.fontStack=ce,this.textColor=xe},Or=function(w){this.sections=w};Or.fromString=function(w){return new Or([new zr(w,null,null,null,null)])},Or.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(w){return w.text.length!==0||w.image&&w.image.name.length!==0})},Or.factory=function(w){return w instanceof Or?w:Or.fromString(w)},Or.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(w){return w.text}).join("")},Or.prototype.serialize=function(){for(var w=["format"],O=0,Z=this.sections;O<Z.length;O+=1){var ce=Z[O];if(ce.image)w.push(["image",ce.image.name]);else{w.push(ce.text);var xe={};ce.fontStack&&(xe["text-font"]=["literal",ce.fontStack.split(",")]),ce.scale&&(xe["font-scale"]=ce.scale),ce.textColor&&(xe["text-color"]=["rgba"].concat(ce.textColor.toArray())),w.push(xe)}}return w};var Mn=function(w){this.name=w.name,this.available=w.available};function Yn(w,O,Z,ce){return typeof w=="number"&&w>=0&&w<=255&&typeof O=="number"&&O>=0&&O<=255&&typeof Z=="number"&&Z>=0&&Z<=255?ce===void 0||typeof ce=="number"&&ce>=0&&ce<=1?null:"Invalid rgba value ["+[w,O,Z,ce].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof ce=="number"?[w,O,Z,ce]:[w,O,Z]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function An(w){if(w===null||typeof w=="string"||typeof w=="boolean"||typeof w=="number"||w instanceof _r||w instanceof Gr||w instanceof Or||w instanceof Mn)return!0;if(Array.isArray(w)){for(var O=0,Z=w;O<Z.length;O+=1)if(!An(Z[O]))return!1;return!0}if(typeof w=="object"){for(var ce in w)if(!An(w[ce]))return!1;return!0}return!1}function Bn(w){if(w===null)return Je;if(typeof w=="string")return It;if(typeof w=="boolean")return Ft;if(typeof w=="number")return st;if(w instanceof _r)return nr;if(w instanceof Gr)return _t;if(w instanceof Or)return Mt;if(w instanceof Mn)return wt;if(Array.isArray(w)){for(var O,Z=w.length,ce=0,xe=w;ce<xe.length;ce+=1){var we=Bn(xe[ce]);if(O){if(O===we)continue;O=Fe;break}O=we}return Dt(O||Fe,Z)}return We}function jn(w){var O=typeof w;return w===null?"":O==="string"||O==="number"||O==="boolean"?String(w):w instanceof _r||w instanceof Or||w instanceof Mn?w.toString():JSON.stringify(w)}Mn.prototype.toString=function(){return this.name},Mn.fromString=function(w){return w?new Mn({name:w,available:!1}):null},Mn.prototype.serialize=function(){return["image",this.name]};var Nr=function(w,O){this.type=w,this.value=O};Nr.parse=function(w,O){if(w.length!==2)return O.error("'literal' expression requires exactly one argument, but found "+(w.length-1)+" instead.");if(!An(w[1]))return O.error("invalid value");var Z=w[1],ce=Bn(Z),xe=O.expectedType;return ce.kind!=="array"||ce.N!==0||!xe||xe.kind!=="array"||typeof xe.N=="number"&&xe.N!==0||(ce=xe),new Nr(ce,Z)},Nr.prototype.evaluate=function(){return this.value},Nr.prototype.eachChild=function(){},Nr.prototype.outputDefined=function(){return!0},Nr.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof _r?["rgba"].concat(this.value.toArray()):this.value instanceof Or?this.value.serialize():this.value};var Lr=function(w){this.name="ExpressionEvaluationError",this.message=w};Lr.prototype.toJSON=function(){return this.message};var Ln={string:It,number:st,boolean:Ft,object:We},dn=function(w,O){this.type=w,this.args=O};dn.parse=function(w,O){if(w.length<2)return O.error("Expected at least one argument.");var Z,ce=1,xe=w[0];if(xe==="array"){var we,Re;if(w.length>2){var Ke=w[1];if(typeof Ke!="string"||!(Ke in Ln)||Ke==="object")return O.error('The item type argument of "array" must be one of string, number, boolean',1);we=Ln[Ke],ce++}else we=Fe;if(w.length>3){if(w[2]!==null&&(typeof w[2]!="number"||w[2]<0||w[2]!==Math.floor(w[2])))return O.error('The length argument to "array" must be a positive integer literal',2);Re=w[2],ce++}Z=Dt(we,Re)}else Z=Ln[xe];for(var pt=[];ce<w.length;ce++){var Et=O.parse(w[ce],ce,Fe);if(!Et)return null;pt.push(Et)}return new dn(Z,pt)},dn.prototype.evaluate=function(w){for(var O=0;O<this.args.length;O++){var Z=this.args[O].evaluate(w);if(!Nt(this.type,Bn(Z)))return Z;if(O===this.args.length-1)throw new Lr("Expected value to be of type "+Rt(this.type)+", but found "+Rt(Bn(Z))+" instead.")}return null},dn.prototype.eachChild=function(w){this.args.forEach(w)},dn.prototype.outputDefined=function(){return this.args.every(function(w){return w.outputDefined()})},dn.prototype.serialize=function(){var w=this.type,O=[w.kind];if(w.kind==="array"){var Z=w.itemType;if(Z.kind==="string"||Z.kind==="number"||Z.kind==="boolean"){O.push(Z.kind);var ce=w.N;(typeof ce=="number"||this.args.length>1)&&O.push(ce)}}return O.concat(this.args.map(function(xe){return xe.serialize()}))};var xn=function(w){this.type=Mt,this.sections=w};xn.parse=function(w,O){if(w.length<2)return O.error("Expected at least one argument.");var Z=w[1];if(!Array.isArray(Z)&&typeof Z=="object")return O.error("First argument must be an image or text section.");for(var ce=[],xe=!1,we=1;we<=w.length-1;++we){var Re=w[we];if(xe&&typeof Re=="object"&&!Array.isArray(Re)){xe=!1;var Ke=null;if(Re["font-scale"]&&!(Ke=O.parse(Re["font-scale"],1,st)))return null;var pt=null;if(Re["text-font"]&&!(pt=O.parse(Re["text-font"],1,Dt(It))))return null;var Et=null;if(Re["text-color"]&&!(Et=O.parse(Re["text-color"],1,nr)))return null;var Ot=ce[ce.length-1];Ot.scale=Ke,Ot.font=pt,Ot.textColor=Et}else{var Ht=O.parse(w[we],1,Fe);if(!Ht)return null;var Jt=Ht.type.kind;if(Jt!=="string"&&Jt!=="value"&&Jt!=="null"&&Jt!=="resolvedImage")return O.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");xe=!0,ce.push({content:Ht,scale:null,font:null,textColor:null})}}return new xn(ce)},xn.prototype.evaluate=function(w){return new Or(this.sections.map(function(O){var Z=O.content.evaluate(w);return Bn(Z)===wt?new zr("",Z,null,null,null):new zr(jn(Z),null,O.scale?O.scale.evaluate(w):null,O.font?O.font.evaluate(w).join(","):null,O.textColor?O.textColor.evaluate(w):null)}))},xn.prototype.eachChild=function(w){for(var O=0,Z=this.sections;O<Z.length;O+=1){var ce=Z[O];w(ce.content),ce.scale&&w(ce.scale),ce.font&&w(ce.font),ce.textColor&&w(ce.textColor)}},xn.prototype.outputDefined=function(){return!1},xn.prototype.serialize=function(){for(var w=["format"],O=0,Z=this.sections;O<Z.length;O+=1){var ce=Z[O];w.push(ce.content.serialize());var xe={};ce.scale&&(xe["font-scale"]=ce.scale.serialize()),ce.font&&(xe["text-font"]=ce.font.serialize()),ce.textColor&&(xe["text-color"]=ce.textColor.serialize()),w.push(xe)}return w};var tn=function(w){this.type=wt,this.input=w};tn.parse=function(w,O){if(w.length!==2)return O.error("Expected two arguments.");var Z=O.parse(w[1],1,It);return Z?new tn(Z):O.error("No image name provided.")},tn.prototype.evaluate=function(w){var O=this.input.evaluate(w),Z=Mn.fromString(O);return Z&&w.availableImages&&(Z.available=w.availableImages.indexOf(O)>-1),Z},tn.prototype.eachChild=function(w){w(this.input)},tn.prototype.outputDefined=function(){return!1},tn.prototype.serialize=function(){return["image",this.input.serialize()]};var wn={"to-boolean":Ft,"to-color":nr,"to-number":st,"to-string":It},Sn=function(w,O){this.type=w,this.args=O};Sn.parse=function(w,O){if(w.length<2)return O.error("Expected at least one argument.");var Z=w[0];if((Z==="to-boolean"||Z==="to-string")&&w.length!==2)return O.error("Expected one argument.");for(var ce=wn[Z],xe=[],we=1;we<w.length;we++){var Re=O.parse(w[we],we,Fe);if(!Re)return null;xe.push(Re)}return new Sn(ce,xe)},Sn.prototype.evaluate=function(w){if(this.type.kind==="boolean")return!!this.args[0].evaluate(w);if(this.type.kind==="color"){for(var O,Z,ce=0,xe=this.args;ce<xe.length;ce+=1){if(Z=null,(O=xe[ce].evaluate(w))instanceof _r)return O;if(typeof O=="string"){var we=w.parseColor(O);if(we)return we}else if(Array.isArray(O)&&!(Z=O.length<3||O.length>4?"Invalid rbga value "+JSON.stringify(O)+": expected an array containing either three or four numeric values.":Yn(O[0],O[1],O[2],O[3])))return new _r(O[0]/255,O[1]/255,O[2]/255,O[3])}throw new Lr(Z||"Could not parse color from value '"+(typeof O=="string"?O:String(JSON.stringify(O)))+"'")}if(this.type.kind==="number"){for(var Re=null,Ke=0,pt=this.args;Ke<pt.length;Ke+=1){if((Re=pt[Ke].evaluate(w))===null)return 0;var Et=Number(Re);if(!isNaN(Et))return Et}throw new Lr("Could not convert "+JSON.stringify(Re)+" to number.")}return this.type.kind==="formatted"?Or.fromString(jn(this.args[0].evaluate(w))):this.type.kind==="resolvedImage"?Mn.fromString(jn(this.args[0].evaluate(w))):jn(this.args[0].evaluate(w))},Sn.prototype.eachChild=function(w){this.args.forEach(w)},Sn.prototype.outputDefined=function(){return this.args.every(function(w){return w.outputDefined()})},Sn.prototype.serialize=function(){if(this.type.kind==="formatted")return new xn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new tn(this.args[0]).serialize();var w=["to-"+this.type.kind];return this.eachChild(function(O){w.push(O.serialize())}),w};var un=["Unknown","Point","LineString","Polygon"],vt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};vt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},vt.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?un[this.feature.type]:this.feature.type:null},vt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},vt.prototype.canonicalID=function(){return this.canonical},vt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},vt.prototype.parseColor=function(w){var O=this._parseColorCache[w];return O||(O=this._parseColorCache[w]=_r.parse(w)),O};var Gt=function(w,O,Z,ce){this.name=w,this.type=O,this._evaluate=Z,this.args=ce};Gt.prototype.evaluate=function(w){return this._evaluate(w,this.args)},Gt.prototype.eachChild=function(w){this.args.forEach(w)},Gt.prototype.outputDefined=function(){return!1},Gt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(w){return w.serialize()}))},Gt.parse=function(w,O){var Z,ce=w[0],xe=Gt.definitions[ce];if(!xe)return O.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0);for(var we=Array.isArray(xe)?xe[0]:xe.type,Re=Array.isArray(xe)?[[xe[1],xe[2]]]:xe.overloads,Ke=Re.filter(function(ri){var Oa=ri[0];return!Array.isArray(Oa)||Oa.length===w.length-1}),pt=null,Et=0,Ot=Ke;Et<Ot.length;Et+=1){var Ht=Ot[Et],Jt=Ht[0],lr=Ht[1];pt=new Za(O.registry,O.path,null,O.scope);for(var Ar=[],Sr=!1,Zr=1;Zr<w.length;Zr++){var Br=w[Zr],ln=Array.isArray(Jt)?Jt[Zr-1]:Jt.type,mn=pt.parse(Br,1+Ar.length,ln);if(!mn){Sr=!0;break}Ar.push(mn)}if(!Sr)if(Array.isArray(Jt)&&Jt.length!==Ar.length)pt.error("Expected "+Jt.length+" arguments, but found "+Ar.length+" instead.");else{for(var In=0;In<Ar.length;In++){var On=Array.isArray(Jt)?Jt[In]:Jt.type,Kn=Ar[In];pt.concat(In+1).checkSubtype(On,Kn.type)}if(pt.errors.length===0)return new Gt(ce,we,lr,Ar)}}if(Ke.length===1)(Z=O.errors).push.apply(Z,pt.errors);else{for(var xa=(Ke.length?Ke:Re).map(function(ri){var Oa;return Oa=ri[0],Array.isArray(Oa)?"("+Oa.map(Rt).join(", ")+")":"("+Rt(Oa.type)+"...)"}).join(" | "),Pa=[],Ka=1;Ka<w.length;Ka++){var Ba=O.parse(w[Ka],1+Pa.length);if(!Ba)return null;Pa.push(Rt(Ba.type))}O.error("Expected arguments of type "+xa+", but found ("+Pa.join(", ")+") instead.")}return null},Gt.register=function(w,O){for(var Z in Gt.definitions=O,O)w[Z]=Gt};var cr=function(w,O,Z){this.type=_t,this.locale=Z,this.caseSensitive=w,this.diacriticSensitive=O};function Er(w,O){w[0]=Math.min(w[0],O[0]),w[1]=Math.min(w[1],O[1]),w[2]=Math.max(w[2],O[0]),w[3]=Math.max(w[3],O[1])}function Wr(w,O){return!(w[0]<=O[0]||w[2]>=O[2]||w[1]<=O[1]||w[3]>=O[3])}function Vr(w,O){var Z=(180+w[0])/360,ce=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+w[1]*Math.PI/360)))/360,xe=Math.pow(2,O.z);return[Math.round(Z*xe*8192),Math.round(ce*xe*8192)]}function Qr(w,O,Z){return O[1]>w[1]!=Z[1]>w[1]&&w[0]<(Z[0]-O[0])*(w[1]-O[1])/(Z[1]-O[1])+O[0]}function Hr(w,O){for(var Z,ce,xe,we,Re,Ke,pt,Et=!1,Ot=0,Ht=O.length;Ot<Ht;Ot++)for(var Jt=O[Ot],lr=0,Ar=Jt.length;lr<Ar-1;lr++){if((we=(Z=w)[0]-(ce=Jt[lr])[0])*(pt=Z[1]-(xe=Jt[lr+1])[1])-(Ke=Z[0]-xe[0])*(Re=Z[1]-ce[1])==0&&we*Ke<=0&&Re*pt<=0)return!1;Qr(w,Jt[lr],Jt[lr+1])&&(Et=!Et)}return Et}function Cn(w,O){for(var Z=0;Z<O.length;Z++)if(Hr(w,O[Z]))return!0;return!1}function ra(w,O,Z,ce){var xe=ce[0]-Z[0],we=ce[1]-Z[1],Re=(w[0]-Z[0])*we-xe*(w[1]-Z[1]),Ke=(O[0]-Z[0])*we-xe*(O[1]-Z[1]);return Re>0&&Ke<0||Re<0&&Ke>0}function ta(w,O,Z){for(var ce=0,xe=Z;ce<xe.length;ce+=1)for(var we=xe[ce],Re=0;Re<we.length-1;++Re)if((Ht=[(Ot=we[Re+1])[0]-(Et=we[Re])[0],Ot[1]-Et[1]])[0]*(Jt=[(pt=O)[0]-(Ke=w)[0],pt[1]-Ke[1]])[1]-Ht[1]*Jt[0]!=0&&ra(Ke,pt,Et,Ot)&&ra(Et,Ot,Ke,pt))return!0;var Ke,pt,Et,Ot,Ht,Jt;return!1}function ba(w,O){for(var Z=0;Z<w.length;++Z)if(!Hr(w[Z],O))return!1;for(var ce=0;ce<w.length-1;++ce)if(ta(w[ce],w[ce+1],O))return!1;return!0}function Wa(w,O){for(var Z=0;Z<O.length;Z++)if(ba(w,O[Z]))return!0;return!1}function ei(w,O,Z){for(var ce=[],xe=0;xe<w.length;xe++){for(var we=[],Re=0;Re<w[xe].length;Re++){var Ke=Vr(w[xe][Re],Z);Er(O,Ke),we.push(Ke)}ce.push(we)}return ce}function dr(w,O,Z){for(var ce=[],xe=0;xe<w.length;xe++){var we=ei(w[xe],O,Z);ce.push(we)}return ce}function an(w,O,Z,ce){if(w[0]<Z[0]||w[0]>Z[2]){var xe=.5*ce,we=w[0]-Z[0]>xe?-ce:Z[0]-w[0]>xe?ce:0;we===0&&(we=w[0]-Z[2]>xe?-ce:Z[2]-w[0]>xe?ce:0),w[0]+=we}Er(O,w)}function Kr(w,O,Z,ce){for(var xe=8192*Math.pow(2,ce.z),we=[8192*ce.x,8192*ce.y],Re=[],Ke=0,pt=w;Ke<pt.length;Ke+=1)for(var Et=0,Ot=pt[Ke];Et<Ot.length;Et+=1){var Ht=Ot[Et],Jt=[Ht.x+we[0],Ht.y+we[1]];an(Jt,O,Z,xe),Re.push(Jt)}return Re}function Rn(w,O,Z,ce){for(var xe,we=8192*Math.pow(2,ce.z),Re=[8192*ce.x,8192*ce.y],Ke=[],pt=0,Et=w;pt<Et.length;pt+=1){for(var Ot=[],Ht=0,Jt=Et[pt];Ht<Jt.length;Ht+=1){var lr=Jt[Ht],Ar=[lr.x+Re[0],lr.y+Re[1]];Er(O,Ar),Ot.push(Ar)}Ke.push(Ot)}if(O[2]-O[0]<=we/2){(xe=O)[0]=xe[1]=1/0,xe[2]=xe[3]=-1/0;for(var Sr=0,Zr=Ke;Sr<Zr.length;Sr+=1)for(var Br=0,ln=Zr[Sr];Br<ln.length;Br+=1)an(ln[Br],O,Z,we)}return Ke}cr.parse=function(w,O){if(w.length!==2)return O.error("Expected one argument.");var Z=w[1];if(typeof Z!="object"||Array.isArray(Z))return O.error("Collator options argument must be an object.");var ce=O.parse(Z["case-sensitive"]!==void 0&&Z["case-sensitive"],1,Ft);if(!ce)return null;var xe=O.parse(Z["diacritic-sensitive"]!==void 0&&Z["diacritic-sensitive"],1,Ft);if(!xe)return null;var we=null;return Z.locale&&!(we=O.parse(Z.locale,1,It))?null:new cr(ce,xe,we)},cr.prototype.evaluate=function(w){return new Gr(this.caseSensitive.evaluate(w),this.diacriticSensitive.evaluate(w),this.locale?this.locale.evaluate(w):null)},cr.prototype.eachChild=function(w){w(this.caseSensitive),w(this.diacriticSensitive),this.locale&&w(this.locale)},cr.prototype.outputDefined=function(){return!1},cr.prototype.serialize=function(){var w={};return w["case-sensitive"]=this.caseSensitive.serialize(),w["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(w.locale=this.locale.serialize()),["collator",w]};var Gn=function(w,O){this.type=Ft,this.geojson=w,this.geometries=O};function Sa(w){if(w instanceof Gt&&(w.name==="get"&&w.args.length===1||w.name==="feature-state"||w.name==="has"&&w.args.length===1||w.name==="properties"||w.name==="geometry-type"||w.name==="id"||/^filter-/.test(w.name))||w instanceof Gn)return!1;var O=!0;return w.eachChild(function(Z){O&&!Sa(Z)&&(O=!1)}),O}function ha(w){if(w instanceof Gt&&w.name==="feature-state")return!1;var O=!0;return w.eachChild(function(Z){O&&!ha(Z)&&(O=!1)}),O}function Aa(w,O){if(w instanceof Gt&&O.indexOf(w.name)>=0)return!1;var Z=!0;return w.eachChild(function(ce){Z&&!Aa(ce,O)&&(Z=!1)}),Z}Gn.parse=function(w,O){if(w.length!==2)return O.error("'within' expression requires exactly one argument, but found "+(w.length-1)+" instead.");if(An(w[1])){var Z=w[1];if(Z.type==="FeatureCollection")for(var ce=0;ce<Z.features.length;++ce){var xe=Z.features[ce].geometry.type;if(xe==="Polygon"||xe==="MultiPolygon")return new Gn(Z,Z.features[ce].geometry)}else if(Z.type==="Feature"){var we=Z.geometry.type;if(we==="Polygon"||we==="MultiPolygon")return new Gn(Z,Z.geometry)}else if(Z.type==="Polygon"||Z.type==="MultiPolygon")return new Gn(Z,Z)}return O.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Gn.prototype.evaluate=function(w){if(w.geometry()!=null&&w.canonicalID()!=null){if(w.geometryType()==="Point")return function(O,Z){var ce=[1/0,1/0,-1/0,-1/0],xe=[1/0,1/0,-1/0,-1/0],we=O.canonicalID();if(Z.type==="Polygon"){var Re=ei(Z.coordinates,xe,we),Ke=Kr(O.geometry(),ce,xe,we);if(!Wr(ce,xe))return!1;for(var pt=0,Et=Ke;pt<Et.length;pt+=1)if(!Hr(Et[pt],Re))return!1}if(Z.type==="MultiPolygon"){var Ot=dr(Z.coordinates,xe,we),Ht=Kr(O.geometry(),ce,xe,we);if(!Wr(ce,xe))return!1;for(var Jt=0,lr=Ht;Jt<lr.length;Jt+=1)if(!Cn(lr[Jt],Ot))return!1}return!0}(w,this.geometries);if(w.geometryType()==="LineString")return function(O,Z){var ce=[1/0,1/0,-1/0,-1/0],xe=[1/0,1/0,-1/0,-1/0],we=O.canonicalID();if(Z.type==="Polygon"){var Re=ei(Z.coordinates,xe,we),Ke=Rn(O.geometry(),ce,xe,we);if(!Wr(ce,xe))return!1;for(var pt=0,Et=Ke;pt<Et.length;pt+=1)if(!ba(Et[pt],Re))return!1}if(Z.type==="MultiPolygon"){var Ot=dr(Z.coordinates,xe,we),Ht=Rn(O.geometry(),ce,xe,we);if(!Wr(ce,xe))return!1;for(var Jt=0,lr=Ht;Jt<lr.length;Jt+=1)if(!Wa(lr[Jt],Ot))return!1}return!0}(w,this.geometries)}return!1},Gn.prototype.eachChild=function(){},Gn.prototype.outputDefined=function(){return!0},Gn.prototype.serialize=function(){return["within",this.geojson]};var ka=function(w,O){this.type=O.type,this.name=w,this.boundExpression=O};ka.parse=function(w,O){if(w.length!==2||typeof w[1]!="string")return O.error("'var' expression requires exactly one string literal argument.");var Z=w[1];return O.scope.has(Z)?new ka(Z,O.scope.get(Z)):O.error('Unknown variable "'+Z+'". Make sure "'+Z+'" has been bound in an enclosing "let" expression before using it.',1)},ka.prototype.evaluate=function(w){return this.boundExpression.evaluate(w)},ka.prototype.eachChild=function(){},ka.prototype.outputDefined=function(){return!1},ka.prototype.serialize=function(){return["var",this.name]};var Za=function(w,O,Z,ce,xe){O===void 0&&(O=[]),ce===void 0&&(ce=new ot),xe===void 0&&(xe=[]),this.registry=w,this.path=O,this.key=O.map(function(we){return"["+we+"]"}).join(""),this.scope=ce,this.errors=xe,this.expectedType=Z};function Xt(w,O){for(var Z,ce=w.length-1,xe=0,we=ce,Re=0;xe<=we;)if((Z=w[Re=Math.floor((xe+we)/2)])<=O){if(Re===ce||O<w[Re+1])return Re;xe=Re+1}else{if(!(Z>O))throw new Lr("Input is not a number.");we=Re-1}return 0}Za.prototype.parse=function(w,O,Z,ce,xe){return xe===void 0&&(xe={}),O?this.concat(O,Z,ce)._parse(w,xe):this._parse(w,xe)},Za.prototype._parse=function(w,O){function Z(Et,Ot,Ht){return Ht==="assert"?new dn(Ot,[Et]):Ht==="coerce"?new Sn(Ot,[Et]):Et}if(w!==null&&typeof w!="string"&&typeof w!="boolean"&&typeof w!="number"||(w=["literal",w]),Array.isArray(w)){if(w.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ce=w[0];if(typeof ce!="string")return this.error("Expression name must be a string, but found "+typeof ce+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var xe=this.registry[ce];if(xe){var we=xe.parse(w,this);if(!we)return null;if(this.expectedType){var Re=this.expectedType,Ke=we.type;if(Re.kind!=="string"&&Re.kind!=="number"&&Re.kind!=="boolean"&&Re.kind!=="object"&&Re.kind!=="array"||Ke.kind!=="value")if(Re.kind!=="color"&&Re.kind!=="formatted"&&Re.kind!=="resolvedImage"||Ke.kind!=="value"&&Ke.kind!=="string"){if(this.checkSubtype(Re,Ke))return null}else we=Z(we,Re,O.typeAnnotation||"coerce");else we=Z(we,Re,O.typeAnnotation||"assert")}if(!(we instanceof Nr)&&we.type.kind!=="resolvedImage"&&function Et(Ot){if(Ot instanceof ka)return Et(Ot.boundExpression);if(Ot instanceof Gt&&Ot.name==="error"||Ot instanceof cr||Ot instanceof Gn)return!1;var Ht=Ot instanceof Sn||Ot instanceof dn,Jt=!0;return Ot.eachChild(function(lr){Jt=Ht?Jt&&Et(lr):Jt&&lr instanceof Nr}),!!Jt&&Sa(Ot)&&Aa(Ot,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(we)){var pt=new vt;try{we=new Nr(we.type,we.evaluate(pt))}catch(Et){return this.error(Et.message),null}}return we}return this.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(w===void 0?"'undefined' value invalid. Use null instead.":typeof w=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof w+" instead.")},Za.prototype.concat=function(w,O,Z){var ce=typeof w=="number"?this.path.concat(w):this.path,xe=Z?this.scope.concat(Z):this.scope;return new Za(this.registry,ce,O||null,xe,this.errors)},Za.prototype.error=function(w){for(var O=[],Z=arguments.length-1;Z-- >0;)O[Z]=arguments[Z+1];var ce=""+this.key+O.map(function(xe){return"["+xe+"]"}).join("");this.errors.push(new Ge(ce,w))},Za.prototype.checkSubtype=function(w,O){var Z=Nt(w,O);return Z&&this.error(Z),Z};var xr=function(w,O,Z){this.type=w,this.input=O,this.labels=[],this.outputs=[];for(var ce=0,xe=Z;ce<xe.length;ce+=1){var we=xe[ce],Re=we[1];this.labels.push(we[0]),this.outputs.push(Re)}};function Yr(w,O,Z){return w*(1-Z)+O*Z}xr.parse=function(w,O){if(w.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(w.length-1)+".");if((w.length-1)%2!=0)return O.error("Expected an even number of arguments.");var Z=O.parse(w[1],1,st);if(!Z)return null;var ce=[],xe=null;O.expectedType&&O.expectedType.kind!=="value"&&(xe=O.expectedType);for(var we=1;we<w.length;we+=2){var Re=we===1?-1/0:w[we],Ke=w[we+1],pt=we,Et=we+1;if(typeof Re!="number")return O.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',pt);if(ce.length&&ce[ce.length-1][0]>=Re)return O.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',pt);var Ot=O.parse(Ke,Et,xe);if(!Ot)return null;xe=xe||Ot.type,ce.push([Re,Ot])}return new xr(xe,Z,ce)},xr.prototype.evaluate=function(w){var O=this.labels,Z=this.outputs;if(O.length===1)return Z[0].evaluate(w);var ce=this.input.evaluate(w);if(ce<=O[0])return Z[0].evaluate(w);var xe=O.length;return ce>=O[xe-1]?Z[xe-1].evaluate(w):Z[Xt(O,ce)].evaluate(w)},xr.prototype.eachChild=function(w){w(this.input);for(var O=0,Z=this.outputs;O<Z.length;O+=1)w(Z[O])},xr.prototype.outputDefined=function(){return this.outputs.every(function(w){return w.outputDefined()})},xr.prototype.serialize=function(){for(var w=["step",this.input.serialize()],O=0;O<this.labels.length;O++)O>0&&w.push(this.labels[O]),w.push(this.outputs[O].serialize());return w};var cn=Object.freeze({__proto__:null,number:Yr,color:function(w,O,Z){return new _r(Yr(w.r,O.r,Z),Yr(w.g,O.g,Z),Yr(w.b,O.b,Z),Yr(w.a,O.a,Z))},array:function(w,O,Z){return w.map(function(ce,xe){return Yr(ce,O[xe],Z)})}}),en=6/29*3*(6/29),nn=Math.PI/180,pn=180/Math.PI;function rn(w){return w>.008856451679035631?Math.pow(w,1/3):w/en+4/29}function wr(w){return w>6/29?w*w*w:en*(w-4/29)}function Ir(w){return 255*(w<=.0031308?12.92*w:1.055*Math.pow(w,1/2.4)-.055)}function Tr(w){return(w/=255)<=.04045?w/12.92:Math.pow((w+.055)/1.055,2.4)}function Fn(w){var O=Tr(w.r),Z=Tr(w.g),ce=Tr(w.b),xe=rn((.4124564*O+.3575761*Z+.1804375*ce)/.95047),we=rn((.2126729*O+.7151522*Z+.072175*ce)/1);return{l:116*we-16,a:500*(xe-we),b:200*(we-rn((.0193339*O+.119192*Z+.9503041*ce)/1.08883)),alpha:w.a}}function Vn(w){var O=(w.l+16)/116,Z=isNaN(w.a)?O:O+w.a/500,ce=isNaN(w.b)?O:O-w.b/200;return O=1*wr(O),Z=.95047*wr(Z),ce=1.08883*wr(ce),new _r(Ir(3.2404542*Z-1.5371385*O-.4985314*ce),Ir(-.969266*Z+1.8760108*O+.041556*ce),Ir(.0556434*Z-.2040259*O+1.0572252*ce),w.alpha)}function la(w,O,Z){var ce=O-w;return w+Z*(ce>180||ce<-180?ce-360*Math.round(ce/360):ce)}var Ra={forward:Fn,reverse:Vn,interpolate:function(w,O,Z){return{l:Yr(w.l,O.l,Z),a:Yr(w.a,O.a,Z),b:Yr(w.b,O.b,Z),alpha:Yr(w.alpha,O.alpha,Z)}}},oa={forward:function(w){var O=Fn(w),Z=O.l,ce=O.a,xe=O.b,we=Math.atan2(xe,ce)*pn;return{h:we<0?we+360:we,c:Math.sqrt(ce*ce+xe*xe),l:Z,alpha:w.a}},reverse:function(w){var O=w.h*nn,Z=w.c;return Vn({l:w.l,a:Math.cos(O)*Z,b:Math.sin(O)*Z,alpha:w.alpha})},interpolate:function(w,O,Z){return{h:la(w.h,O.h,Z),c:Yr(w.c,O.c,Z),l:Yr(w.l,O.l,Z),alpha:Yr(w.alpha,O.alpha,Z)}}},ai=Object.freeze({__proto__:null,lab:Ra,hcl:oa}),Ti=function(w,O,Z,ce,xe){this.type=w,this.operator=O,this.interpolation=Z,this.input=ce,this.labels=[],this.outputs=[];for(var we=0,Re=xe;we<Re.length;we+=1){var Ke=Re[we],pt=Ke[1];this.labels.push(Ke[0]),this.outputs.push(pt)}};function Ui(w,O,Z,ce){var xe=ce-Z,we=w-Z;return xe===0?0:O===1?we/xe:(Math.pow(O,we)-1)/(Math.pow(O,xe)-1)}Ti.interpolationFactor=function(w,O,Z,ce){var xe=0;if(w.name==="exponential")xe=Ui(O,w.base,Z,ce);else if(w.name==="linear")xe=Ui(O,1,Z,ce);else if(w.name==="cubic-bezier"){var we=w.controlPoints;xe=new a(we[0],we[1],we[2],we[3]).solve(Ui(O,1,Z,ce))}return xe},Ti.parse=function(w,O){var Z=w[0],ce=w[1],xe=w[2],we=w.slice(3);if(!Array.isArray(ce)||ce.length===0)return O.error("Expected an interpolation type expression.",1);if(ce[0]==="linear")ce={name:"linear"};else if(ce[0]==="exponential"){var Re=ce[1];if(typeof Re!="number")return O.error("Exponential interpolation requires a numeric base.",1,1);ce={name:"exponential",base:Re}}else{if(ce[0]!=="cubic-bezier")return O.error("Unknown interpolation type "+String(ce[0]),1,0);var Ke=ce.slice(1);if(Ke.length!==4||Ke.some(function(Zr){return typeof Zr!="number"||Zr<0||Zr>1}))return O.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ce={name:"cubic-bezier",controlPoints:Ke}}if(w.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(w.length-1)+".");if((w.length-1)%2!=0)return O.error("Expected an even number of arguments.");if(!(xe=O.parse(xe,2,st)))return null;var pt=[],Et=null;Z==="interpolate-hcl"||Z==="interpolate-lab"?Et=nr:O.expectedType&&O.expectedType.kind!=="value"&&(Et=O.expectedType);for(var Ot=0;Ot<we.length;Ot+=2){var Ht=we[Ot],Jt=we[Ot+1],lr=Ot+3,Ar=Ot+4;if(typeof Ht!="number")return O.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',lr);if(pt.length&&pt[pt.length-1][0]>=Ht)return O.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',lr);var Sr=O.parse(Jt,Ar,Et);if(!Sr)return null;Et=Et||Sr.type,pt.push([Ht,Sr])}return Et.kind==="number"||Et.kind==="color"||Et.kind==="array"&&Et.itemType.kind==="number"&&typeof Et.N=="number"?new Ti(Et,Z,ce,xe,pt):O.error("Type "+Rt(Et)+" is not interpolatable.")},Ti.prototype.evaluate=function(w){var O=this.labels,Z=this.outputs;if(O.length===1)return Z[0].evaluate(w);var ce=this.input.evaluate(w);if(ce<=O[0])return Z[0].evaluate(w);var xe=O.length;if(ce>=O[xe-1])return Z[xe-1].evaluate(w);var we=Xt(O,ce),Re=Ti.interpolationFactor(this.interpolation,ce,O[we],O[we+1]),Ke=Z[we].evaluate(w),pt=Z[we+1].evaluate(w);return this.operator==="interpolate"?cn[this.type.kind.toLowerCase()](Ke,pt,Re):this.operator==="interpolate-hcl"?oa.reverse(oa.interpolate(oa.forward(Ke),oa.forward(pt),Re)):Ra.reverse(Ra.interpolate(Ra.forward(Ke),Ra.forward(pt),Re))},Ti.prototype.eachChild=function(w){w(this.input);for(var O=0,Z=this.outputs;O<Z.length;O+=1)w(Z[O])},Ti.prototype.outputDefined=function(){return this.outputs.every(function(w){return w.outputDefined()})},Ti.prototype.serialize=function(){var w;w=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var O=[this.operator,w,this.input.serialize()],Z=0;Z<this.labels.length;Z++)O.push(this.labels[Z],this.outputs[Z].serialize());return O};var Qa=function(w,O){this.type=w,this.args=O};Qa.parse=function(w,O){if(w.length<2)return O.error("Expectected at least one argument.");var Z=null,ce=O.expectedType;ce&&ce.kind!=="value"&&(Z=ce);for(var xe=[],we=0,Re=w.slice(1);we<Re.length;we+=1){var Ke=O.parse(Re[we],1+xe.length,Z,void 0,{typeAnnotation:"omit"});if(!Ke)return null;Z=Z||Ke.type,xe.push(Ke)}var pt=ce&&xe.some(function(Et){return Nt(ce,Et.type)});return new Qa(pt?Fe:Z,xe)},Qa.prototype.evaluate=function(w){for(var O,Z=null,ce=0,xe=0,we=this.args;xe<we.length&&(ce++,(Z=we[xe].evaluate(w))&&Z instanceof Mn&&!Z.available&&(O||(O=Z.name),Z=null,ce===this.args.length&&(Z=O)),Z===null);xe+=1);return Z},Qa.prototype.eachChild=function(w){this.args.forEach(w)},Qa.prototype.outputDefined=function(){return this.args.every(function(w){return w.outputDefined()})},Qa.prototype.serialize=function(){var w=["coalesce"];return this.eachChild(function(O){w.push(O.serialize())}),w};var di=function(w,O){this.type=O.type,this.bindings=[].concat(w),this.result=O};di.prototype.evaluate=function(w){return this.result.evaluate(w)},di.prototype.eachChild=function(w){for(var O=0,Z=this.bindings;O<Z.length;O+=1)w(Z[O][1]);w(this.result)},di.parse=function(w,O){if(w.length<4)return O.error("Expected at least 3 arguments, but found "+(w.length-1)+" instead.");for(var Z=[],ce=1;ce<w.length-1;ce+=2){var xe=w[ce];if(typeof xe!="string")return O.error("Expected string, but found "+typeof xe+" instead.",ce);if(/[^a-zA-Z0-9_]/.test(xe))return O.error("Variable names must contain only alphanumeric characters or '_'.",ce);var we=O.parse(w[ce+1],ce+1);if(!we)return null;Z.push([xe,we])}var Re=O.parse(w[w.length-1],w.length-1,O.expectedType,Z);return Re?new di(Z,Re):null},di.prototype.outputDefined=function(){return this.result.outputDefined()},di.prototype.serialize=function(){for(var w=["let"],O=0,Z=this.bindings;O<Z.length;O+=1){var ce=Z[O];w.push(ce[0],ce[1].serialize())}return w.push(this.result.serialize()),w};var Ps=function(w,O,Z){this.type=w,this.index=O,this.input=Z};Ps.parse=function(w,O){if(w.length!==3)return O.error("Expected 2 arguments, but found "+(w.length-1)+" instead.");var Z=O.parse(w[1],1,st),ce=O.parse(w[2],2,Dt(O.expectedType||Fe));return Z&&ce?new Ps(ce.type.itemType,Z,ce):null},Ps.prototype.evaluate=function(w){var O=this.index.evaluate(w),Z=this.input.evaluate(w);if(O<0)throw new Lr("Array index out of bounds: "+O+" < 0.");if(O>=Z.length)throw new Lr("Array index out of bounds: "+O+" > "+(Z.length-1)+".");if(O!==Math.floor(O))throw new Lr("Array index must be an integer, but found "+O+" instead.");return Z[O]},Ps.prototype.eachChild=function(w){w(this.index),w(this.input)},Ps.prototype.outputDefined=function(){return!1},Ps.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var rs=function(w,O){this.type=Ft,this.needle=w,this.haystack=O};rs.parse=function(w,O){if(w.length!==3)return O.error("Expected 2 arguments, but found "+(w.length-1)+" instead.");var Z=O.parse(w[1],1,Fe),ce=O.parse(w[2],2,Fe);return Z&&ce?er(Z.type,[Ft,It,st,Je,Fe])?new rs(Z,ce):O.error("Expected first argument to be of type boolean, string, number or null, but found "+Rt(Z.type)+" instead"):null},rs.prototype.evaluate=function(w){var O=this.needle.evaluate(w),Z=this.haystack.evaluate(w);if(!Z)return!1;if(!qt(O,["boolean","string","number","null"]))throw new Lr("Expected first argument to be of type boolean, string, number or null, but found "+Rt(Bn(O))+" instead.");if(!qt(Z,["string","array"]))throw new Lr("Expected second argument to be of type array or string, but found "+Rt(Bn(Z))+" instead.");return Z.indexOf(O)>=0},rs.prototype.eachChild=function(w){w(this.needle),w(this.haystack)},rs.prototype.outputDefined=function(){return!0},rs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Su=function(w,O,Z){this.type=st,this.needle=w,this.haystack=O,this.fromIndex=Z};Su.parse=function(w,O){if(w.length<=2||w.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(w.length-1)+" instead.");var Z=O.parse(w[1],1,Fe),ce=O.parse(w[2],2,Fe);if(!Z||!ce)return null;if(!er(Z.type,[Ft,It,st,Je,Fe]))return O.error("Expected first argument to be of type boolean, string, number or null, but found "+Rt(Z.type)+" instead");if(w.length===4){var xe=O.parse(w[3],3,st);return xe?new Su(Z,ce,xe):null}return new Su(Z,ce)},Su.prototype.evaluate=function(w){var O=this.needle.evaluate(w),Z=this.haystack.evaluate(w);if(!qt(O,["boolean","string","number","null"]))throw new Lr("Expected first argument to be of type boolean, string, number or null, but found "+Rt(Bn(O))+" instead.");if(!qt(Z,["string","array"]))throw new Lr("Expected second argument to be of type array or string, but found "+Rt(Bn(Z))+" instead.");if(this.fromIndex){var ce=this.fromIndex.evaluate(w);return Z.indexOf(O,ce)}return Z.indexOf(O)},Su.prototype.eachChild=function(w){w(this.needle),w(this.haystack),this.fromIndex&&w(this.fromIndex)},Su.prototype.outputDefined=function(){return!1},Su.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var w=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),w]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Rs=function(w,O,Z,ce,xe,we){this.inputType=w,this.type=O,this.input=Z,this.cases=ce,this.outputs=xe,this.otherwise=we};Rs.parse=function(w,O){if(w.length<5)return O.error("Expected at least 4 arguments, but found only "+(w.length-1)+".");if(w.length%2!=1)return O.error("Expected an even number of arguments.");var Z,ce;O.expectedType&&O.expectedType.kind!=="value"&&(ce=O.expectedType);for(var xe={},we=[],Re=2;Re<w.length-1;Re+=2){var Ke=w[Re],pt=w[Re+1];Array.isArray(Ke)||(Ke=[Ke]);var Et=O.concat(Re);if(Ke.length===0)return Et.error("Expected at least one branch label.");for(var Ot=0,Ht=Ke;Ot<Ht.length;Ot+=1){var Jt=Ht[Ot];if(typeof Jt!="number"&&typeof Jt!="string")return Et.error("Branch labels must be numbers or strings.");if(typeof Jt=="number"&&Math.abs(Jt)>Number.MAX_SAFE_INTEGER)return Et.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Jt=="number"&&Math.floor(Jt)!==Jt)return Et.error("Numeric branch labels must be integer values.");if(Z){if(Et.checkSubtype(Z,Bn(Jt)))return null}else Z=Bn(Jt);if(xe[String(Jt)]!==void 0)return Et.error("Branch labels must be unique.");xe[String(Jt)]=we.length}var lr=O.parse(pt,Re,ce);if(!lr)return null;ce=ce||lr.type,we.push(lr)}var Ar=O.parse(w[1],1,Fe);if(!Ar)return null;var Sr=O.parse(w[w.length-1],w.length-1,ce);return Sr?Ar.type.kind!=="value"&&O.concat(1).checkSubtype(Z,Ar.type)?null:new Rs(Z,ce,Ar,xe,we,Sr):null},Rs.prototype.evaluate=function(w){var O=this.input.evaluate(w);return(Bn(O)===this.inputType&&this.outputs[this.cases[O]]||this.otherwise).evaluate(w)},Rs.prototype.eachChild=function(w){w(this.input),this.outputs.forEach(w),w(this.otherwise)},Rs.prototype.outputDefined=function(){return this.outputs.every(function(w){return w.outputDefined()})&&this.otherwise.outputDefined()},Rs.prototype.serialize=function(){for(var w=this,O=["match",this.input.serialize()],Z=[],ce={},xe=0,we=Object.keys(this.cases).sort();xe<we.length;xe+=1){var Re=we[xe];(Ht=ce[this.cases[Re]])===void 0?(ce[this.cases[Re]]=Z.length,Z.push([this.cases[Re],[Re]])):Z[Ht][1].push(Re)}for(var Ke=function(lr){return w.inputType.kind==="number"?Number(lr):lr},pt=0,Et=Z;pt<Et.length;pt+=1){var Ot=Et[pt],Ht=Ot[0],Jt=Ot[1];O.push(Jt.length===1?Ke(Jt[0]):Jt.map(Ke)),O.push(this.outputs[outputIndex$1].serialize())}return O.push(this.otherwise.serialize()),O};var ec=function(w,O,Z){this.type=w,this.branches=O,this.otherwise=Z};ec.parse=function(w,O){if(w.length<4)return O.error("Expected at least 3 arguments, but found only "+(w.length-1)+".");if(w.length%2!=0)return O.error("Expected an odd number of arguments.");var Z;O.expectedType&&O.expectedType.kind!=="value"&&(Z=O.expectedType);for(var ce=[],xe=1;xe<w.length-1;xe+=2){var we=O.parse(w[xe],xe,Ft);if(!we)return null;var Re=O.parse(w[xe+1],xe+1,Z);if(!Re)return null;ce.push([we,Re]),Z=Z||Re.type}var Ke=O.parse(w[w.length-1],w.length-1,Z);return Ke?new ec(Z,ce,Ke):null},ec.prototype.evaluate=function(w){for(var O=0,Z=this.branches;O<Z.length;O+=1){var ce=Z[O],xe=ce[1];if(ce[0].evaluate(w))return xe.evaluate(w)}return this.otherwise.evaluate(w)},ec.prototype.eachChild=function(w){for(var O=0,Z=this.branches;O<Z.length;O+=1){var ce=Z[O],xe=ce[1];w(ce[0]),w(xe)}w(this.otherwise)},ec.prototype.outputDefined=function(){return this.branches.every(function(w){return w[1].outputDefined()})&&this.otherwise.outputDefined()},ec.prototype.serialize=function(){var w=["case"];return this.eachChild(function(O){w.push(O.serialize())}),w};var Eu=function(w,O,Z,ce){this.type=w,this.input=O,this.beginIndex=Z,this.endIndex=ce};function hu(w,O){return w==="=="||w==="!="?O.kind==="boolean"||O.kind==="string"||O.kind==="number"||O.kind==="null"||O.kind==="value":O.kind==="string"||O.kind==="number"||O.kind==="value"}function Rc(w,O,Z,ce){return ce.compare(O,Z)===0}function Vu(w,O,Z){var ce=w!=="=="&&w!=="!=";return function(){function xe(we,Re,Ke){this.type=Ft,this.lhs=we,this.rhs=Re,this.collator=Ke,this.hasUntypedArgument=we.type.kind==="value"||Re.type.kind==="value"}return xe.parse=function(we,Re){if(we.length!==3&&we.length!==4)return Re.error("Expected two or three arguments.");var Ke=we[0],pt=Re.parse(we[1],1,Fe);if(!pt)return null;if(!hu(Ke,pt.type))return Re.concat(1).error('"'+Ke+`" comparisons are not supported for type '`+Rt(pt.type)+"'.");var Et=Re.parse(we[2],2,Fe);if(!Et)return null;if(!hu(Ke,Et.type))return Re.concat(2).error('"'+Ke+`" comparisons are not supported for type '`+Rt(Et.type)+"'.");if(pt.type.kind!==Et.type.kind&&pt.type.kind!=="value"&&Et.type.kind!=="value")return Re.error("Cannot compare types '"+Rt(pt.type)+"' and '"+Rt(Et.type)+"'.");ce&&(pt.type.kind==="value"&&Et.type.kind!=="value"?pt=new dn(Et.type,[pt]):pt.type.kind!=="value"&&Et.type.kind==="value"&&(Et=new dn(pt.type,[Et])));var Ot=null;if(we.length===4){if(pt.type.kind!=="string"&&Et.type.kind!=="string"&&pt.type.kind!=="value"&&Et.type.kind!=="value")return Re.error("Cannot use collator to compare non-string types.");if(!(Ot=Re.parse(we[3],3,_t)))return null}return new xe(pt,Et,Ot)},xe.prototype.evaluate=function(we){var Re=this.lhs.evaluate(we),Ke=this.rhs.evaluate(we);if(ce&&this.hasUntypedArgument){var pt=Bn(Re),Et=Bn(Ke);if(pt.kind!==Et.kind||pt.kind!=="string"&&pt.kind!=="number")throw new Lr('Expected arguments for "'+w+'" to be (string, string) or (number, number), but found ('+pt.kind+", "+Et.kind+") instead.")}if(this.collator&&!ce&&this.hasUntypedArgument){var Ot=Bn(Re),Ht=Bn(Ke);if(Ot.kind!=="string"||Ht.kind!=="string")return O(we,Re,Ke)}return this.collator?Z(we,Re,Ke,this.collator.evaluate(we)):O(we,Re,Ke)},xe.prototype.eachChild=function(we){we(this.lhs),we(this.rhs),this.collator&&we(this.collator)},xe.prototype.outputDefined=function(){return!0},xe.prototype.serialize=function(){var we=[w];return this.eachChild(function(Re){we.push(Re.serialize())}),we},xe}()}Eu.parse=function(w,O){if(w.length<=2||w.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(w.length-1)+" instead.");var Z=O.parse(w[1],1,Fe),ce=O.parse(w[2],2,st);if(!Z||!ce)return null;if(!er(Z.type,[Dt(Fe),It,Fe]))return O.error("Expected first argument to be of type array or string, but found "+Rt(Z.type)+" instead");if(w.length===4){var xe=O.parse(w[3],3,st);return xe?new Eu(Z.type,Z,ce,xe):null}return new Eu(Z.type,Z,ce)},Eu.prototype.evaluate=function(w){var O=this.input.evaluate(w),Z=this.beginIndex.evaluate(w);if(!qt(O,["string","array"]))throw new Lr("Expected first argument to be of type array or string, but found "+Rt(Bn(O))+" instead.");if(this.endIndex){var ce=this.endIndex.evaluate(w);return O.slice(Z,ce)}return O.slice(Z)},Eu.prototype.eachChild=function(w){w(this.input),w(this.beginIndex),this.endIndex&&w(this.endIndex)},Eu.prototype.outputDefined=function(){return!1},Eu.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var w=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),w]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Co=Vu("==",function(w,O,Z){return O===Z},Rc),ul=Vu("!=",function(w,O,Z){return O!==Z},function(w,O,Z,ce){return!Rc(0,O,Z,ce)}),yo=Vu("<",function(w,O,Z){return O<Z},function(w,O,Z,ce){return ce.compare(O,Z)<0}),uh=Vu(">",function(w,O,Z){return O>Z},function(w,O,Z,ce){return ce.compare(O,Z)>0}),pu=Vu("<=",function(w,O,Z){return O<=Z},function(w,O,Z,ce){return ce.compare(O,Z)<=0}),zf=Vu(">=",function(w,O,Z){return O>=Z},function(w,O,Z,ce){return ce.compare(O,Z)>=0}),du=function(w,O,Z,ce,xe){this.type=It,this.number=w,this.locale=O,this.currency=Z,this.minFractionDigits=ce,this.maxFractionDigits=xe};du.parse=function(w,O){if(w.length!==3)return O.error("Expected two arguments.");var Z=O.parse(w[1],1,st);if(!Z)return null;var ce=w[2];if(typeof ce!="object"||Array.isArray(ce))return O.error("NumberFormat options argument must be an object.");var xe=null;if(ce.locale&&!(xe=O.parse(ce.locale,1,It)))return null;var we=null;if(ce.currency&&!(we=O.parse(ce.currency,1,It)))return null;var Re=null;if(ce["min-fraction-digits"]&&!(Re=O.parse(ce["min-fraction-digits"],1,st)))return null;var Ke=null;return ce["max-fraction-digits"]&&!(Ke=O.parse(ce["max-fraction-digits"],1,st))?null:new du(Z,xe,we,Re,Ke)},du.prototype.evaluate=function(w){return new Intl.NumberFormat(this.locale?this.locale.evaluate(w):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(w):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(w):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(w):void 0}).format(this.number.evaluate(w))},du.prototype.eachChild=function(w){w(this.number),this.locale&&w(this.locale),this.currency&&w(this.currency),this.minFractionDigits&&w(this.minFractionDigits),this.maxFractionDigits&&w(this.maxFractionDigits)},du.prototype.outputDefined=function(){return!1},du.prototype.serialize=function(){var w={};return this.locale&&(w.locale=this.locale.serialize()),this.currency&&(w.currency=this.currency.serialize()),this.minFractionDigits&&(w["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(w["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),w]};var Ql=function(w){this.type=st,this.input=w};Ql.parse=function(w,O){if(w.length!==2)return O.error("Expected 1 argument, but found "+(w.length-1)+" instead.");var Z=O.parse(w[1],1);return Z?Z.type.kind!=="array"&&Z.type.kind!=="string"&&Z.type.kind!=="value"?O.error("Expected argument of type string or array, but found "+Rt(Z.type)+" instead."):new Ql(Z):null},Ql.prototype.evaluate=function(w){var O=this.input.evaluate(w);if(typeof O=="string"||Array.isArray(O))return O.length;throw new Lr("Expected value to be of type string or array, but found "+Rt(Bn(O))+" instead.")},Ql.prototype.eachChild=function(w){w(this.input)},Ql.prototype.outputDefined=function(){return!1},Ql.prototype.serialize=function(){var w=["length"];return this.eachChild(function(O){w.push(O.serialize())}),w};var Cu={"==":Co,"!=":ul,">":uh,"<":yo,">=":zf,"<=":pu,array:dn,at:Ps,boolean:dn,case:ec,coalesce:Qa,collator:cr,format:xn,image:tn,in:rs,"index-of":Su,interpolate:Ti,"interpolate-hcl":Ti,"interpolate-lab":Ti,length:Ql,let:di,literal:Nr,match:Rs,number:dn,"number-format":du,object:dn,slice:Eu,step:xr,string:dn,"to-boolean":Sn,"to-color":Sn,"to-number":Sn,"to-string":Sn,var:ka,within:Gn};function Lu(w,O){var Z=O[0],ce=O[1],xe=O[2],we=O[3];Z=Z.evaluate(w),ce=ce.evaluate(w),xe=xe.evaluate(w);var Re=we?we.evaluate(w):1,Ke=Yn(Z,ce,xe,Re);if(Ke)throw new Lr(Ke);return new _r(Z/255*Re,ce/255*Re,xe/255*Re,Re)}function ml(w,O){return w in O}function cl(w,O){var Z=O[w];return Z===void 0?null:Z}function Hu(w){return{type:w}}function Pu(w){return{result:"success",value:w}}function ql(w){return{result:"error",value:w}}function yl(w){return w["property-type"]==="data-driven"||w["property-type"]==="cross-faded-data-driven"}function pc(w){return!!w.expression&&w.expression.parameters.indexOf("zoom")>-1}function tc(w){return!!w.expression&&w.expression.interpolated}function eo(w){return w instanceof Number?"number":w instanceof String?"string":w instanceof Boolean?"boolean":Array.isArray(w)?"array":w===null?"null":typeof w}function $s(w){return typeof w=="object"&&w!==null&&!Array.isArray(w)}function qc(w){return w}function vu(w,O,Z){return w!==void 0?w:O!==void 0?O:Z!==void 0?Z:void 0}function Ds(w,O,Z,ce,xe){return vu(typeof Z===xe?ce[Z]:void 0,w.default,O.default)}function mu(w,O,Z){if(eo(Z)!=="number")return vu(w.default,O.default);var ce=w.stops.length;if(ce===1||Z<=w.stops[0][0])return w.stops[0][1];if(Z>=w.stops[ce-1][0])return w.stops[ce-1][1];var xe=Xt(w.stops.map(function(we){return we[0]}),Z);return w.stops[xe][1]}function Rl(w,O,Z){var ce=w.base!==void 0?w.base:1;if(eo(Z)!=="number")return vu(w.default,O.default);var xe=w.stops.length;if(xe===1||Z<=w.stops[0][0])return w.stops[0][1];if(Z>=w.stops[xe-1][0])return w.stops[xe-1][1];var we=Xt(w.stops.map(function(Ht){return Ht[0]}),Z),Re=function(Ht,Jt,lr,Ar){var Sr=Ar-lr,Zr=Ht-lr;return Sr===0?0:Jt===1?Zr/Sr:(Math.pow(Jt,Zr)-1)/(Math.pow(Jt,Sr)-1)}(Z,ce,w.stops[we][0],w.stops[we+1][0]),Ke=w.stops[we][1],pt=w.stops[we+1][1],Et=cn[O.type]||qc;if(w.colorSpace&&w.colorSpace!=="rgb"){var Ot=ai[w.colorSpace];Et=function(Ht,Jt){return Ot.reverse(Ot.interpolate(Ot.forward(Ht),Ot.forward(Jt),Re))}}return typeof Ke.evaluate=="function"?{evaluate:function(){for(var Ht=[],Jt=arguments.length;Jt--;)Ht[Jt]=arguments[Jt];var lr=Ke.evaluate.apply(void 0,Ht),Ar=pt.evaluate.apply(void 0,Ht);if(lr!==void 0&&Ar!==void 0)return Et(lr,Ar,Re)}}:Et(Ke,pt,Re)}function xl(w,O,Z){return O.type==="color"?Z=_r.parse(Z):O.type==="formatted"?Z=Or.fromString(Z.toString()):O.type==="resolvedImage"?Z=Mn.fromString(Z.toString()):eo(Z)===O.type||O.type==="enum"&&O.values[Z]||(Z=void 0),vu(Z,w.default,O.default)}Gt.register(Cu,{error:[{kind:"error"},[It],function(w,O){throw new Lr(O[0].evaluate(w))}],typeof:[It,[Fe],function(w,O){return Rt(Bn(O[0].evaluate(w)))}],"to-rgba":[Dt(st,4),[nr],function(w,O){return O[0].evaluate(w).toArray()}],rgb:[nr,[st,st,st],Lu],rgba:[nr,[st,st,st,st],Lu],has:{type:Ft,overloads:[[[It],function(w,O){return ml(O[0].evaluate(w),w.properties())}],[[It,We],function(w,O){var Z=O[1];return ml(O[0].evaluate(w),Z.evaluate(w))}]]},get:{type:Fe,overloads:[[[It],function(w,O){return cl(O[0].evaluate(w),w.properties())}],[[It,We],function(w,O){var Z=O[1];return cl(O[0].evaluate(w),Z.evaluate(w))}]]},"feature-state":[Fe,[It],function(w,O){return cl(O[0].evaluate(w),w.featureState||{})}],properties:[We,[],function(w){return w.properties()}],"geometry-type":[It,[],function(w){return w.geometryType()}],id:[Fe,[],function(w){return w.id()}],zoom:[st,[],function(w){return w.globals.zoom}],"heatmap-density":[st,[],function(w){return w.globals.heatmapDensity||0}],"line-progress":[st,[],function(w){return w.globals.lineProgress||0}],accumulated:[Fe,[],function(w){return w.globals.accumulated===void 0?null:w.globals.accumulated}],"+":[st,Hu(st),function(w,O){for(var Z=0,ce=0,xe=O;ce<xe.length;ce+=1)Z+=xe[ce].evaluate(w);return Z}],"*":[st,Hu(st),function(w,O){for(var Z=1,ce=0,xe=O;ce<xe.length;ce+=1)Z*=xe[ce].evaluate(w);return Z}],"-":{type:st,overloads:[[[st,st],function(w,O){var Z=O[1];return O[0].evaluate(w)-Z.evaluate(w)}],[[st],function(w,O){return-O[0].evaluate(w)}]]},"/":[st,[st,st],function(w,O){var Z=O[1];return O[0].evaluate(w)/Z.evaluate(w)}],"%":[st,[st,st],function(w,O){var Z=O[1];return O[0].evaluate(w)%Z.evaluate(w)}],ln2:[st,[],function(){return Math.LN2}],pi:[st,[],function(){return Math.PI}],e:[st,[],function(){return Math.E}],"^":[st,[st,st],function(w,O){var Z=O[1];return Math.pow(O[0].evaluate(w),Z.evaluate(w))}],sqrt:[st,[st],function(w,O){return Math.sqrt(O[0].evaluate(w))}],log10:[st,[st],function(w,O){return Math.log(O[0].evaluate(w))/Math.LN10}],ln:[st,[st],function(w,O){return Math.log(O[0].evaluate(w))}],log2:[st,[st],function(w,O){return Math.log(O[0].evaluate(w))/Math.LN2}],sin:[st,[st],function(w,O){return Math.sin(O[0].evaluate(w))}],cos:[st,[st],function(w,O){return Math.cos(O[0].evaluate(w))}],tan:[st,[st],function(w,O){return Math.tan(O[0].evaluate(w))}],asin:[st,[st],function(w,O){return Math.asin(O[0].evaluate(w))}],acos:[st,[st],function(w,O){return Math.acos(O[0].evaluate(w))}],atan:[st,[st],function(w,O){return Math.atan(O[0].evaluate(w))}],min:[st,Hu(st),function(w,O){return Math.min.apply(Math,O.map(function(Z){return Z.evaluate(w)}))}],max:[st,Hu(st),function(w,O){return Math.max.apply(Math,O.map(function(Z){return Z.evaluate(w)}))}],abs:[st,[st],function(w,O){return Math.abs(O[0].evaluate(w))}],round:[st,[st],function(w,O){var Z=O[0].evaluate(w);return Z<0?-Math.round(-Z):Math.round(Z)}],floor:[st,[st],function(w,O){return Math.floor(O[0].evaluate(w))}],ceil:[st,[st],function(w,O){return Math.ceil(O[0].evaluate(w))}],"filter-==":[Ft,[It,Fe],function(w,O){var Z=O[0],ce=O[1];return w.properties()[Z.value]===ce.value}],"filter-id-==":[Ft,[Fe],function(w,O){var Z=O[0];return w.id()===Z.value}],"filter-type-==":[Ft,[It],function(w,O){var Z=O[0];return w.geometryType()===Z.value}],"filter-<":[Ft,[It,Fe],function(w,O){var Z=O[0],ce=O[1],xe=w.properties()[Z.value],we=ce.value;return typeof xe==typeof we&&xe<we}],"filter-id-<":[Ft,[Fe],function(w,O){var Z=O[0],ce=w.id(),xe=Z.value;return typeof ce==typeof xe&&ce<xe}],"filter->":[Ft,[It,Fe],function(w,O){var Z=O[0],ce=O[1],xe=w.properties()[Z.value],we=ce.value;return typeof xe==typeof we&&xe>we}],"filter-id->":[Ft,[Fe],function(w,O){var Z=O[0],ce=w.id(),xe=Z.value;return typeof ce==typeof xe&&ce>xe}],"filter-<=":[Ft,[It,Fe],function(w,O){var Z=O[0],ce=O[1],xe=w.properties()[Z.value],we=ce.value;return typeof xe==typeof we&&xe<=we}],"filter-id-<=":[Ft,[Fe],function(w,O){var Z=O[0],ce=w.id(),xe=Z.value;return typeof ce==typeof xe&&ce<=xe}],"filter->=":[Ft,[It,Fe],function(w,O){var Z=O[0],ce=O[1],xe=w.properties()[Z.value],we=ce.value;return typeof xe==typeof we&&xe>=we}],"filter-id->=":[Ft,[Fe],function(w,O){var Z=O[0],ce=w.id(),xe=Z.value;return typeof ce==typeof xe&&ce>=xe}],"filter-has":[Ft,[Fe],function(w,O){return O[0].value in w.properties()}],"filter-has-id":[Ft,[],function(w){return w.id()!==null&&w.id()!==void 0}],"filter-type-in":[Ft,[Dt(It)],function(w,O){return O[0].value.indexOf(w.geometryType())>=0}],"filter-id-in":[Ft,[Dt(Fe)],function(w,O){return O[0].value.indexOf(w.id())>=0}],"filter-in-small":[Ft,[It,Dt(Fe)],function(w,O){var Z=O[0];return O[1].value.indexOf(w.properties()[Z.value])>=0}],"filter-in-large":[Ft,[It,Dt(Fe)],function(w,O){var Z=O[0],ce=O[1];return function(xe,we,Re,Ke){for(;Re<=Ke;){var pt=Re+Ke>>1;if(we[pt]===xe)return!0;we[pt]>xe?Ke=pt-1:Re=pt+1}return!1}(w.properties()[Z.value],ce.value,0,ce.value.length-1)}],all:{type:Ft,overloads:[[[Ft,Ft],function(w,O){var Z=O[1];return O[0].evaluate(w)&&Z.evaluate(w)}],[Hu(Ft),function(w,O){for(var Z=0,ce=O;Z<ce.length;Z+=1)if(!ce[Z].evaluate(w))return!1;return!0}]]},any:{type:Ft,overloads:[[[Ft,Ft],function(w,O){var Z=O[1];return O[0].evaluate(w)||Z.evaluate(w)}],[Hu(Ft),function(w,O){for(var Z=0,ce=O;Z<ce.length;Z+=1)if(ce[Z].evaluate(w))return!0;return!1}]]},"!":[Ft,[Ft],function(w,O){return!O[0].evaluate(w)}],"is-supported-script":[Ft,[It],function(w,O){var Z=w.globals&&w.globals.isSupportedScript;return!Z||Z(O[0].evaluate(w))}],upcase:[It,[It],function(w,O){return O[0].evaluate(w).toUpperCase()}],downcase:[It,[It],function(w,O){return O[0].evaluate(w).toLowerCase()}],concat:[It,Hu(Fe),function(w,O){return O.map(function(Z){return jn(Z.evaluate(w))}).join("")}],"resolved-locale":[It,[_t],function(w,O){return O[0].evaluate(w).resolvedLocale()}]});var Dl=function(w,O){this.expression=w,this._warningHistory={},this._evaluator=new vt,this._defaultValue=O?function(Z){return Z.type==="color"&&$s(Z.default)?new _r(0,0,0,0):Z.type==="color"?_r.parse(Z.default)||null:Z.default===void 0?null:Z.default}(O):null,this._enumValues=O&&O.type==="enum"?O.values:null};function fl(w){return Array.isArray(w)&&w.length>0&&typeof w[0]=="string"&&w[0]in Cu}function hl(w,O){var Z=new Za(Cu,[],O?function(xe){var we={color:nr,string:It,number:st,enum:It,boolean:Ft,formatted:Mt,resolvedImage:wt};return xe.type==="array"?Dt(we[xe.value]||Fe,xe.length):we[xe.type]}(O):void 0),ce=Z.parse(w,void 0,void 0,void 0,O&&O.type==="string"?{typeAnnotation:"coerce"}:void 0);return ce?Pu(new Dl(ce,O)):ql(Z.errors)}Dl.prototype.evaluateWithoutErrorHandling=function(w,O,Z,ce,xe,we){return this._evaluator.globals=w,this._evaluator.feature=O,this._evaluator.featureState=Z,this._evaluator.canonical=ce,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=we,this.expression.evaluate(this._evaluator)},Dl.prototype.evaluate=function(w,O,Z,ce,xe,we){this._evaluator.globals=w,this._evaluator.feature=O||null,this._evaluator.featureState=Z||null,this._evaluator.canonical=ce,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=we||null;try{var Re=this.expression.evaluate(this._evaluator);if(Re==null||typeof Re=="number"&&Re!=Re)return this._defaultValue;if(this._enumValues&&!(Re in this._enumValues))throw new Lr("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ke){return JSON.stringify(Ke)}).join(", ")+", but found "+JSON.stringify(Re)+" instead.");return Re}catch(Ke){return this._warningHistory[Ke.message]||(this._warningHistory[Ke.message]=!0,typeof console<"u"&&console.warn(Ke.message)),this._defaultValue}};var eu=function(w,O){this.kind=w,this._styleExpression=O,this.isStateDependent=w!=="constant"&&!ha(O.expression)};eu.prototype.evaluateWithoutErrorHandling=function(w,O,Z,ce,xe,we){return this._styleExpression.evaluateWithoutErrorHandling(w,O,Z,ce,xe,we)},eu.prototype.evaluate=function(w,O,Z,ce,xe,we){return this._styleExpression.evaluate(w,O,Z,ce,xe,we)};var As=function(w,O,Z,ce){this.kind=w,this.zoomStops=Z,this._styleExpression=O,this.isStateDependent=w!=="camera"&&!ha(O.expression),this.interpolationType=ce};function Ru(w,O){if((w=hl(w,O)).result==="error")return w;var Z=w.value.expression,ce=Sa(Z);if(!ce&&!yl(O))return ql([new Ge("","data expressions not supported")]);var xe=Aa(Z,["zoom"]);if(!xe&&!pc(O))return ql([new Ge("","zoom expressions not supported")]);var we=function Re(Ke){var pt=null;if(Ke instanceof di)pt=Re(Ke.result);else if(Ke instanceof Qa)for(var Et=0,Ot=Ke.args;Et<Ot.length&&!(pt=Re(Ot[Et]));Et+=1);else(Ke instanceof xr||Ke instanceof Ti)&&Ke.input instanceof Gt&&Ke.input.name==="zoom"&&(pt=Ke);return pt instanceof Ge||Ke.eachChild(function(Ht){var Jt=Re(Ht);Jt instanceof Ge?pt=Jt:!pt&&Jt?pt=new Ge("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):pt&&Jt&&pt!==Jt&&(pt=new Ge("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),pt}(Z);return we||xe?we instanceof Ge?ql([we]):we instanceof Ti&&!tc(O)?ql([new Ge("",'"interpolate" expressions cannot be used with this property')]):Pu(we?new As(ce?"camera":"composite",w.value,we.labels,we instanceof Ti?we.interpolation:void 0):new eu(ce?"constant":"source",w.value)):ql([new Ge("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}As.prototype.evaluateWithoutErrorHandling=function(w,O,Z,ce,xe,we){return this._styleExpression.evaluateWithoutErrorHandling(w,O,Z,ce,xe,we)},As.prototype.evaluate=function(w,O,Z,ce,xe,we){return this._styleExpression.evaluate(w,O,Z,ce,xe,we)},As.prototype.interpolationFactor=function(w,O,Z){return this.interpolationType?Ti.interpolationFactor(this.interpolationType,w,O,Z):0};var ps=function(w,O){this._parameters=w,this._specification=O,Xe(this,function Z(ce,xe){var we,Re,Ke,pt=xe.type==="color",Et=ce.stops&&typeof ce.stops[0][0]=="object",Ot=Et||!(Et||ce.property!==void 0),Ht=ce.type||(tc(xe)?"exponential":"interval");if(pt&&((ce=Xe({},ce)).stops&&(ce.stops=ce.stops.map(function(Ba){return[Ba[0],_r.parse(Ba[1])]})),ce.default=_r.parse(ce.default?ce.default:xe.default)),ce.colorSpace&&ce.colorSpace!=="rgb"&&!ai[ce.colorSpace])throw new Error("Unknown color space: "+ce.colorSpace);if(Ht==="exponential")we=Rl;else if(Ht==="interval")we=mu;else if(Ht==="categorical"){we=Ds,Re=Object.create(null);for(var Jt=0,lr=ce.stops;Jt<lr.length;Jt+=1){var Ar=lr[Jt];Re[Ar[0]]=Ar[1]}Ke=typeof ce.stops[0][0]}else{if(Ht!=="identity")throw new Error('Unknown function type "'+Ht+'"');we=xl}if(Et){for(var Sr={},Zr=[],Br=0;Br<ce.stops.length;Br++){var ln=ce.stops[Br],mn=ln[0].zoom;Sr[mn]===void 0&&(Sr[mn]={zoom:mn,type:ce.type,property:ce.property,default:ce.default,stops:[]},Zr.push(mn)),Sr[mn].stops.push([ln[0].value,ln[1]])}for(var In=[],On=0,Kn=Zr;On<Kn.length;On+=1){var xa=Kn[On];In.push([Sr[xa].zoom,Z(Sr[xa],xe)])}var Pa={name:"linear"};return{kind:"composite",interpolationType:Pa,interpolationFactor:Ti.interpolationFactor.bind(void 0,Pa),zoomStops:In.map(function(Ba){return Ba[0]}),evaluate:function(Ba,ri){var Oa=Ba.zoom;return Rl({stops:In,base:ce.base},xe,Oa).evaluate(Oa,ri)}}}if(Ot){var Ka=Ht==="exponential"?{name:"exponential",base:ce.base!==void 0?ce.base:1}:null;return{kind:"camera",interpolationType:Ka,interpolationFactor:Ti.interpolationFactor.bind(void 0,Ka),zoomStops:ce.stops.map(function(Ba){return Ba[0]}),evaluate:function(Ba){return we(ce,xe,Ba.zoom,Re,Ke)}}}return{kind:"source",evaluate:function(Ba,ri){var Oa=ri&&ri.properties?ri.properties[ce.property]:void 0;return Oa===void 0?vu(ce.default,xe.default):we(ce,xe,Oa,Re,Ke)}}}(this._parameters,this._specification))};function pl(w){var O=w.key,Z=w.value,ce=w.valueSpec||{},xe=w.objectElementValidators||{},we=w.style,Re=w.styleSpec,Ke=[],pt=eo(Z);if(pt!=="object")return[new Ie(O,Z,"object expected, "+pt+" found")];for(var Et in Z){var Ot=Et.split(".")[0],Ht=ce[Ot]||ce["*"],Jt=void 0;if(xe[Ot])Jt=xe[Ot];else if(ce[Ot])Jt=vr;else if(xe["*"])Jt=xe["*"];else{if(!ce["*"]){Ke.push(new Ie(O,Z[Et],'unknown property "'+Et+'"'));continue}Jt=vr}Ke=Ke.concat(Jt({key:(O&&O+".")+Et,value:Z[Et],valueSpec:Ht,style:we,styleSpec:Re,object:Z,objectKey:Et},Z))}for(var lr in ce)xe[lr]||ce[lr].required&&ce[lr].default===void 0&&Z[lr]===void 0&&Ke.push(new Ie(O,Z,'missing required property "'+lr+'"'));return Ke}function Du(w){var O=w.value,Z=w.valueSpec,ce=w.style,xe=w.styleSpec,we=w.key,Re=w.arrayElementValidator||vr;if(eo(O)!=="array")return[new Ie(we,O,"array expected, "+eo(O)+" found")];if(Z.length&&O.length!==Z.length)return[new Ie(we,O,"array length "+Z.length+" expected, length "+O.length+" found")];if(Z["min-length"]&&O.length<Z["min-length"])return[new Ie(we,O,"array length at least "+Z["min-length"]+" expected, length "+O.length+" found")];var Ke={type:Z.value,values:Z.values};xe.$version<7&&(Ke.function=Z.function),eo(Z.value)==="object"&&(Ke=Z.value);for(var pt=[],Et=0;Et<O.length;Et++)pt=pt.concat(Re({array:O,arrayIndex:Et,value:O[Et],valueSpec:Ke,style:ce,styleSpec:xe,key:we+"["+Et+"]"}));return pt}function ns(w){var O=w.key,Z=w.value,ce=w.valueSpec,xe=eo(Z);return xe==="number"&&Z!=Z&&(xe="NaN"),xe!=="number"?[new Ie(O,Z,"number expected, "+xe+" found")]:"minimum"in ce&&Z<ce.minimum?[new Ie(O,Z,Z+" is less than the minimum value "+ce.minimum)]:"maximum"in ce&&Z>ce.maximum?[new Ie(O,Z,Z+" is greater than the maximum value "+ce.maximum)]:[]}function ef(w){var O,Z,ce,xe=w.valueSpec,we=ht(w.value.type),Re={},Ke=we!=="categorical"&&w.value.property===void 0,pt=!Ke,Et=eo(w.value.stops)==="array"&&eo(w.value.stops[0])==="array"&&eo(w.value.stops[0][0])==="object",Ot=pl({key:w.key,value:w.value,valueSpec:w.styleSpec.function,style:w.style,styleSpec:w.styleSpec,objectElementValidators:{stops:function(lr){if(we==="identity")return[new Ie(lr.key,lr.value,'identity function may not have a "stops" property')];var Ar=[],Sr=lr.value;return Ar=Ar.concat(Du({key:lr.key,value:Sr,valueSpec:lr.valueSpec,style:lr.style,styleSpec:lr.styleSpec,arrayElementValidator:Ht})),eo(Sr)==="array"&&Sr.length===0&&Ar.push(new Ie(lr.key,Sr,"array must have at least one stop")),Ar},default:function(lr){return vr({key:lr.key,value:lr.value,valueSpec:xe,style:lr.style,styleSpec:lr.styleSpec})}}});return we==="identity"&&Ke&&Ot.push(new Ie(w.key,w.value,'missing required property "property"')),we==="identity"||w.value.stops||Ot.push(new Ie(w.key,w.value,'missing required property "stops"')),we==="exponential"&&w.valueSpec.expression&&!tc(w.valueSpec)&&Ot.push(new Ie(w.key,w.value,"exponential functions not supported")),w.styleSpec.$version>=8&&(pt&&!yl(w.valueSpec)?Ot.push(new Ie(w.key,w.value,"property functions not supported")):Ke&&!pc(w.valueSpec)&&Ot.push(new Ie(w.key,w.value,"zoom functions not supported"))),we!=="categorical"&&!Et||w.value.property!==void 0||Ot.push(new Ie(w.key,w.value,'"property" property is required')),Ot;function Ht(lr){var Ar=[],Sr=lr.value,Zr=lr.key;if(eo(Sr)!=="array")return[new Ie(Zr,Sr,"array expected, "+eo(Sr)+" found")];if(Sr.length!==2)return[new Ie(Zr,Sr,"array length 2 expected, length "+Sr.length+" found")];if(Et){if(eo(Sr[0])!=="object")return[new Ie(Zr,Sr,"object expected, "+eo(Sr[0])+" found")];if(Sr[0].zoom===void 0)return[new Ie(Zr,Sr,"object stop key must have zoom")];if(Sr[0].value===void 0)return[new Ie(Zr,Sr,"object stop key must have value")];if(ce&&ce>ht(Sr[0].zoom))return[new Ie(Zr,Sr[0].zoom,"stop zoom values must appear in ascending order")];ht(Sr[0].zoom)!==ce&&(ce=ht(Sr[0].zoom),Z=void 0,Re={}),Ar=Ar.concat(pl({key:Zr+"[0]",value:Sr[0],valueSpec:{zoom:{}},style:lr.style,styleSpec:lr.styleSpec,objectElementValidators:{zoom:ns,value:Jt}}))}else Ar=Ar.concat(Jt({key:Zr+"[0]",value:Sr[0],valueSpec:{},style:lr.style,styleSpec:lr.styleSpec},Sr));return fl(it(Sr[1]))?Ar.concat([new Ie(Zr+"[1]",Sr[1],"expressions are not allowed in function stops.")]):Ar.concat(vr({key:Zr+"[1]",value:Sr[1],valueSpec:xe,style:lr.style,styleSpec:lr.styleSpec}))}function Jt(lr,Ar){var Sr=eo(lr.value),Zr=ht(lr.value),Br=lr.value!==null?lr.value:Ar;if(O){if(Sr!==O)return[new Ie(lr.key,Br,Sr+" stop domain type must match previous stop domain type "+O)]}else O=Sr;if(Sr!=="number"&&Sr!=="string"&&Sr!=="boolean")return[new Ie(lr.key,Br,"stop domain value must be a number, string, or boolean")];if(Sr!=="number"&&we!=="categorical"){var ln="number expected, "+Sr+" found";return yl(xe)&&we===void 0&&(ln+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ie(lr.key,Br,ln)]}return we!=="categorical"||Sr!=="number"||isFinite(Zr)&&Math.floor(Zr)===Zr?we!=="categorical"&&Sr==="number"&&Z!==void 0&&Zr<Z?[new Ie(lr.key,Br,"stop domain values must appear in ascending order")]:(Z=Zr,we==="categorical"&&Zr in Re?[new Ie(lr.key,Br,"stop domain values must be unique")]:(Re[Zr]=!0,[])):[new Ie(lr.key,Br,"integer expected, found "+Zr)]}}function bl(w){var O=(w.expressionContext==="property"?Ru:hl)(it(w.value),w.valueSpec);if(O.result==="error")return O.value.map(function(ce){return new Ie(""+w.key+ce.key,w.value,ce.message)});var Z=O.value.expression||O.value._styleExpression.expression;if(w.expressionContext==="property"&&w.propertyKey==="text-font"&&!Z.outputDefined())return[new Ie(w.key,w.value,'Invalid data expression for "'+w.propertyKey+'". Output values must be contained as literals within the expression.')];if(w.expressionContext==="property"&&w.propertyType==="layout"&&!ha(Z))return[new Ie(w.key,w.value,'"feature-state" data expressions are not supported with layout properties.')];if(w.expressionContext==="filter"&&!ha(Z))return[new Ie(w.key,w.value,'"feature-state" data expressions are not supported with filters.')];if(w.expressionContext&&w.expressionContext.indexOf("cluster")===0){if(!Aa(Z,["zoom","feature-state"]))return[new Ie(w.key,w.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(w.expressionContext==="cluster-initial"&&!Sa(Z))return[new Ie(w.key,w.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function gu(w){var O=w.key,Z=w.value,ce=w.valueSpec,xe=[];return Array.isArray(ce.values)?ce.values.indexOf(ht(Z))===-1&&xe.push(new Ie(O,Z,"expected one of ["+ce.values.join(", ")+"], "+JSON.stringify(Z)+" found")):Object.keys(ce.values).indexOf(ht(Z))===-1&&xe.push(new Ie(O,Z,"expected one of ["+Object.keys(ce.values).join(", ")+"], "+JSON.stringify(Z)+" found")),xe}function yu(w){if(w===!0||w===!1)return!0;if(!Array.isArray(w)||w.length===0)return!1;switch(w[0]){case"has":return w.length>=2&&w[1]!=="$id"&&w[1]!=="$type";case"in":return w.length>=3&&(typeof w[1]!="string"||Array.isArray(w[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return w.length!==3||Array.isArray(w[1])||Array.isArray(w[2]);case"any":case"all":for(var O=0,Z=w.slice(1);O<Z.length;O+=1){var ce=Z[O];if(!yu(ce)&&typeof ce!="boolean")return!1}return!0;default:return!0}}ps.deserialize=function(w){return new ps(w._parameters,w._specification)},ps.serialize=function(w){return{_parameters:w._parameters,_specification:w._specification}};var _s={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function dc(w){if(w==null)return{filter:function(){return!0},needGeometry:!1};yu(w)||(w=ds(w));var O=hl(w,_s);if(O.result==="error")throw new Error(O.value.map(function(Z){return Z.key+": "+Z.message}).join(", "));return{filter:function(Z,ce,xe){return O.value.evaluate(Z,ce,{},xe)},needGeometry:function Z(ce){if(!Array.isArray(ce))return!1;if(ce[0]==="within")return!0;for(var xe=1;xe<ce.length;xe++)if(Z(ce[xe]))return!0;return!1}(w)}}function tu(w,O){return w<O?-1:w>O?1:0}function ds(w){if(!w)return!0;var O,Z=w[0];return w.length<=1?Z!=="any":Z==="=="?tf(w[1],w[2],"=="):Z==="!="?Dc(tf(w[1],w[2],"==")):Z==="<"||Z===">"||Z==="<="||Z===">="?tf(w[1],w[2],Z):Z==="any"?(O=w.slice(1),["any"].concat(O.map(ds))):Z==="all"?["all"].concat(w.slice(1).map(ds)):Z==="none"?["all"].concat(w.slice(1).map(ds).map(Dc)):Z==="in"?Of(w[1],w.slice(2)):Z==="!in"?Dc(Of(w[1],w.slice(2))):Z==="has"?rc(w[1]):Z==="!has"?Dc(rc(w[1])):Z!=="within"||w}function tf(w,O,Z){switch(w){case"$type":return["filter-type-"+Z,O];case"$id":return["filter-id-"+Z,O];default:return["filter-"+Z,w,O]}}function Of(w,O){if(O.length===0)return!1;switch(w){case"$type":return["filter-type-in",["literal",O]];case"$id":return["filter-id-in",["literal",O]];default:return O.length>200&&!O.some(function(Z){return typeof Z!=typeof O[0]})?["filter-in-large",w,["literal",O.sort(tu)]]:["filter-in-small",w,["literal",O]]}}function rc(w){switch(w){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",w]}}function Dc(w){return["!",w]}function at(w){return yu(it(w.value))?bl(Xe({},w,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function O(Z){var ce=Z.value,xe=Z.key;if(eo(ce)!=="array")return[new Ie(xe,ce,"array expected, "+eo(ce)+" found")];var we,Re=Z.styleSpec,Ke=[];if(ce.length<1)return[new Ie(xe,ce,"filter array must have at least 1 element")];switch(Ke=Ke.concat(gu({key:xe+"[0]",value:ce[0],valueSpec:Re.filter_operator,style:Z.style,styleSpec:Z.styleSpec})),ht(ce[0])){case"<":case"<=":case">":case">=":ce.length>=2&&ht(ce[1])==="$type"&&Ke.push(new Ie(xe,ce,'"$type" cannot be use with operator "'+ce[0]+'"'));case"==":case"!=":ce.length!==3&&Ke.push(new Ie(xe,ce,'filter array for operator "'+ce[0]+'" must have 3 elements'));case"in":case"!in":ce.length>=2&&(we=eo(ce[1]))!=="string"&&Ke.push(new Ie(xe+"[1]",ce[1],"string expected, "+we+" found"));for(var pt=2;pt<ce.length;pt++)we=eo(ce[pt]),ht(ce[1])==="$type"?Ke=Ke.concat(gu({key:xe+"["+pt+"]",value:ce[pt],valueSpec:Re.geometry_type,style:Z.style,styleSpec:Z.styleSpec})):we!=="string"&&we!=="number"&&we!=="boolean"&&Ke.push(new Ie(xe+"["+pt+"]",ce[pt],"string, number, or boolean expected, "+we+" found"));break;case"any":case"all":case"none":for(var Et=1;Et<ce.length;Et++)Ke=Ke.concat(O({key:xe+"["+Et+"]",value:ce[Et],style:Z.style,styleSpec:Z.styleSpec}));break;case"has":case"!has":we=eo(ce[1]),ce.length!==2?Ke.push(new Ie(xe,ce,'filter array for "'+ce[0]+'" operator must have 2 elements')):we!=="string"&&Ke.push(new Ie(xe+"[1]",ce[1],"string expected, "+we+" found"));break;case"within":we=eo(ce[1]),ce.length!==2?Ke.push(new Ie(xe,ce,'filter array for "'+ce[0]+'" operator must have 2 elements')):we!=="object"&&Ke.push(new Ie(xe+"[1]",ce[1],"object expected, "+we+" found"))}return Ke}(w)}function Qe(w,O){var Z=w.key,ce=w.style,xe=w.styleSpec,we=w.value,Re=w.objectKey,Ke=xe[O+"_"+w.layerType];if(!Ke)return[];var pt=Re.match(/^(.*)-transition$/);if(O==="paint"&&pt&&Ke[pt[1]]&&Ke[pt[1]].transition)return vr({key:Z,value:we,valueSpec:xe.transition,style:ce,styleSpec:xe});var Et,Ot=w.valueSpec||Ke[Re];if(!Ot)return[new Ie(Z,we,'unknown property "'+Re+'"')];if(eo(we)==="string"&&yl(Ot)&&!Ot.tokens&&(Et=/^{([^}]+)}$/.exec(we)))return[new Ie(Z,we,'"'+Re+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Et[1])+" }`.")];var Ht=[];return w.layerType==="symbol"&&(Re==="text-field"&&ce&&!ce.glyphs&&Ht.push(new Ie(Z,we,'use of "text-field" requires a style "glyphs" property')),Re==="text-font"&&$s(it(we))&&ht(we.type)==="identity"&&Ht.push(new Ie(Z,we,'"text-font" does not support identity functions'))),Ht.concat(vr({key:w.key,value:we,valueSpec:Ot,style:ce,styleSpec:xe,expressionContext:"property",propertyType:O,propertyKey:Re}))}function gt(w){return Qe(w,"paint")}function ct(w){return Qe(w,"layout")}function yt(w){var O=[],Z=w.value,ce=w.key,xe=w.style,we=w.styleSpec;Z.type||Z.ref||O.push(new Ie(ce,Z,'either "type" or "ref" is required'));var Re,Ke=ht(Z.type),pt=ht(Z.ref);if(Z.id)for(var Et=ht(Z.id),Ot=0;Ot<w.arrayIndex;Ot++){var Ht=xe.layers[Ot];ht(Ht.id)===Et&&O.push(new Ie(ce,Z.id,'duplicate layer id "'+Z.id+'", previously used at line '+Ht.id.__line__))}if("ref"in Z)["type","source","source-layer","filter","layout"].forEach(function(Ar){Ar in Z&&O.push(new Ie(ce,Z[Ar],'"'+Ar+'" is prohibited for ref layers'))}),xe.layers.forEach(function(Ar){ht(Ar.id)===pt&&(Re=Ar)}),Re?Re.ref?O.push(new Ie(ce,Z.ref,"ref cannot reference another ref layer")):Ke=ht(Re.type):O.push(new Ie(ce,Z.ref,'ref layer "'+pt+'" not found'));else if(Ke!=="background")if(Z.source){var Jt=xe.sources&&xe.sources[Z.source],lr=Jt&&ht(Jt.type);Jt?lr==="vector"&&Ke==="raster"?O.push(new Ie(ce,Z.source,'layer "'+Z.id+'" requires a raster source')):lr==="raster"&&Ke!=="raster"?O.push(new Ie(ce,Z.source,'layer "'+Z.id+'" requires a vector source')):lr!=="vector"||Z["source-layer"]?lr==="raster-dem"&&Ke!=="hillshade"?O.push(new Ie(ce,Z.source,"raster-dem source can only be used with layer type 'hillshade'.")):Ke!=="line"||!Z.paint||!Z.paint["line-gradient"]||lr==="geojson"&&Jt.lineMetrics||O.push(new Ie(ce,Z,'layer "'+Z.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):O.push(new Ie(ce,Z,'layer "'+Z.id+'" must specify a "source-layer"')):O.push(new Ie(ce,Z.source,'source "'+Z.source+'" not found'))}else O.push(new Ie(ce,Z,'missing required property "source"'));return O=O.concat(pl({key:ce,value:Z,valueSpec:we.layer,style:w.style,styleSpec:w.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return vr({key:ce+".type",value:Z.type,valueSpec:we.layer.type,style:w.style,styleSpec:w.styleSpec,object:Z,objectKey:"type"})},filter:at,layout:function(Ar){return pl({layer:Z,key:Ar.key,value:Ar.value,style:Ar.style,styleSpec:Ar.styleSpec,objectElementValidators:{"*":function(Sr){return ct(Xe({layerType:Ke},Sr))}}})},paint:function(Ar){return pl({layer:Z,key:Ar.key,value:Ar.value,style:Ar.style,styleSpec:Ar.styleSpec,objectElementValidators:{"*":function(Sr){return gt(Xe({layerType:Ke},Sr))}}})}}}))}function Ct(w){var O=w.value,Z=w.key,ce=eo(O);return ce!=="string"?[new Ie(Z,O,"string expected, "+ce+" found")]:[]}var Ut={promoteId:function(w){var O=w.key,Z=w.value;if(eo(Z)==="string")return Ct({key:O,value:Z});var ce=[];for(var xe in Z)ce.push.apply(ce,Ct({key:O+"."+xe,value:Z[xe]}));return ce}};function tr(w){var O=w.value,Z=w.key,ce=w.styleSpec,xe=w.style;if(!O.type)return[new Ie(Z,O,'"type" is required')];var we,Re=ht(O.type);switch(Re){case"vector":case"raster":case"raster-dem":return pl({key:Z,value:O,valueSpec:ce["source_"+Re.replace("-","_")],style:w.style,styleSpec:ce,objectElementValidators:Ut});case"geojson":if(we=pl({key:Z,value:O,valueSpec:ce.source_geojson,style:xe,styleSpec:ce,objectElementValidators:Ut}),O.cluster)for(var Ke in O.clusterProperties){var pt=O.clusterProperties[Ke],Et=pt[0],Ot=typeof Et=="string"?[Et,["accumulated"],["get",Ke]]:Et;we.push.apply(we,bl({key:Z+"."+Ke+".map",value:pt[1],expressionContext:"cluster-map"})),we.push.apply(we,bl({key:Z+"."+Ke+".reduce",value:Ot,expressionContext:"cluster-reduce"}))}return we;case"video":return pl({key:Z,value:O,valueSpec:ce.source_video,style:xe,styleSpec:ce});case"image":return pl({key:Z,value:O,valueSpec:ce.source_image,style:xe,styleSpec:ce});case"canvas":return[new Ie(Z,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return gu({key:Z+".type",value:O.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:xe,styleSpec:ce})}}function ar(w){var O=w.value,Z=w.styleSpec,ce=Z.light,xe=w.style,we=[],Re=eo(O);if(O===void 0)return we;if(Re!=="object")return we.concat([new Ie("light",O,"object expected, "+Re+" found")]);for(var Ke in O){var pt=Ke.match(/^(.*)-transition$/);we=we.concat(pt&&ce[pt[1]]&&ce[pt[1]].transition?vr({key:Ke,value:O[Ke],valueSpec:Z.transition,style:xe,styleSpec:Z}):ce[Ke]?vr({key:Ke,value:O[Ke],valueSpec:ce[Ke],style:xe,styleSpec:Z}):[new Ie(Ke,O[Ke],'unknown property "'+Ke+'"')])}return we}var fr={"*":function(){return[]},array:Du,boolean:function(w){var O=w.value,Z=w.key,ce=eo(O);return ce!=="boolean"?[new Ie(Z,O,"boolean expected, "+ce+" found")]:[]},number:ns,color:function(w){var O=w.key,Z=w.value,ce=eo(Z);return ce!=="string"?[new Ie(O,Z,"color expected, "+ce+" found")]:Zt(Z)===null?[new Ie(O,Z,'color expected, "'+Z+'" found')]:[]},constants:He,enum:gu,filter:at,function:ef,layer:yt,object:pl,source:tr,light:ar,string:Ct,formatted:function(w){return Ct(w).length===0?[]:bl(w)},resolvedImage:function(w){return Ct(w).length===0?[]:bl(w)}};function vr(w){var O=w.value,Z=w.valueSpec,ce=w.styleSpec;return Z.expression&&$s(ht(O))?ef(w):Z.expression&&fl(it(O))?bl(w):Z.type&&fr[Z.type]?fr[Z.type](w):pl(Xe({},w,{valueSpec:Z.type?ce[Z.type]:Z}))}function Fr(w){var O=w.value,Z=w.key,ce=Ct(w);return ce.length||(O.indexOf("{fontstack}")===-1&&ce.push(new Ie(Z,O,'"glyphs" url must include a "{fontstack}" token')),O.indexOf("{range}")===-1&&ce.push(new Ie(Z,O,'"glyphs" url must include a "{range}" token'))),ce}function qr(w,O){O===void 0&&(O=Me);var Z=[];return Z=Z.concat(vr({key:"",value:w,valueSpec:O.$root,styleSpec:O,style:w,objectElementValidators:{glyphs:Fr,"*":function(){return[]}}})),w.constants&&(Z=Z.concat(He({key:"constants",value:w.constants,style:w,styleSpec:O}))),$r(Z)}function $r(w){return[].concat(w).sort(function(O,Z){return O.line-Z.line})}function Nn(w){return function(){for(var O=[],Z=arguments.length;Z--;)O[Z]=arguments[Z];return $r(w.apply(this,O))}}qr.source=Nn(tr),qr.light=Nn(ar),qr.layer=Nn(yt),qr.filter=Nn(at),qr.paintProperty=Nn(gt),qr.layoutProperty=Nn(ct);var ia=qr,Pn=ia.light,Wn=ia.paintProperty,aa=ia.layoutProperty;function Un(w,O){var Z=!1;if(O&&O.length)for(var ce=0,xe=O;ce<xe.length;ce+=1)w.fire(new Be(new Error(xe[ce].message))),Z=!0;return Z}var Jn=Ia;function Ia(w,O,Z){var ce=this.cells=[];if(w instanceof ArrayBuffer){this.arrayBuffer=w;var xe=new Int32Array(this.arrayBuffer);w=xe[0],this.d=(O=xe[1])+2*(Z=xe[2]);for(var we=0;we<this.d*this.d;we++){var Re=xe[3+we],Ke=xe[3+we+1];ce.push(Re===Ke?null:xe.subarray(Re,Ke))}var pt=xe[3+ce.length+1];this.keys=xe.subarray(xe[3+ce.length],pt),this.bboxes=xe.subarray(pt),this.insert=this._insertReadonly}else{this.d=O+2*Z;for(var Et=0;Et<this.d*this.d;Et++)ce.push([]);this.keys=[],this.bboxes=[]}this.n=O,this.extent=w,this.padding=Z,this.scale=O/w,this.uid=0;var Ot=Z/O*w;this.min=-Ot,this.max=w+Ot}Ia.prototype.insert=function(w,O,Z,ce,xe){this._forEachCell(O,Z,ce,xe,this._insertCell,this.uid++),this.keys.push(w),this.bboxes.push(O),this.bboxes.push(Z),this.bboxes.push(ce),this.bboxes.push(xe)},Ia.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ia.prototype._insertCell=function(w,O,Z,ce,xe,we){this.cells[xe].push(we)},Ia.prototype.query=function(w,O,Z,ce,xe){var we=this.min,Re=this.max;if(w<=we&&O<=we&&Re<=Z&&Re<=ce&&!xe)return Array.prototype.slice.call(this.keys);var Ke=[];return this._forEachCell(w,O,Z,ce,this._queryCell,Ke,{},xe),Ke},Ia.prototype._queryCell=function(w,O,Z,ce,xe,we,Re,Ke){var pt=this.cells[xe];if(pt!==null)for(var Et=this.keys,Ot=this.bboxes,Ht=0;Ht<pt.length;Ht++){var Jt=pt[Ht];if(Re[Jt]===void 0){var lr=4*Jt;(Ke?Ke(Ot[lr+0],Ot[lr+1],Ot[lr+2],Ot[lr+3]):w<=Ot[lr+2]&&O<=Ot[lr+3]&&Z>=Ot[lr+0]&&ce>=Ot[lr+1])?(Re[Jt]=!0,we.push(Et[Jt])):Re[Jt]=!1}}},Ia.prototype._forEachCell=function(w,O,Z,ce,xe,we,Re,Ke){for(var pt=this._convertToCellCoord(w),Et=this._convertToCellCoord(O),Ot=this._convertToCellCoord(Z),Ht=this._convertToCellCoord(ce),Jt=pt;Jt<=Ot;Jt++)for(var lr=Et;lr<=Ht;lr++){var Ar=this.d*lr+Jt;if((!Ke||Ke(this._convertFromCellCoord(Jt),this._convertFromCellCoord(lr),this._convertFromCellCoord(Jt+1),this._convertFromCellCoord(lr+1)))&&xe.call(this,w,O,Z,ce,Ar,we,Re,Ke))return}},Ia.prototype._convertFromCellCoord=function(w){return(w-this.padding)/this.scale},Ia.prototype._convertToCellCoord=function(w){return Math.max(0,Math.min(this.d-1,Math.floor(w*this.scale)+this.padding))},Ia.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var w=this.cells,O=3+this.cells.length+1+1,Z=0,ce=0;ce<this.cells.length;ce++)Z+=this.cells[ce].length;var xe=new Int32Array(O+Z+this.keys.length+this.bboxes.length);xe[0]=this.extent,xe[1]=this.n,xe[2]=this.padding;for(var we=O,Re=0;Re<w.length;Re++){var Ke=w[Re];xe[3+Re]=we,xe.set(Ke,we),we+=Ke.length}return xe[3+w.length]=we,xe.set(this.keys,we),xe[3+w.length+1]=we+=this.keys.length,xe.set(this.bboxes,we),we+=this.bboxes.length,xe.buffer};var ti=self.ImageData,ya=self.ImageBitmap,Xa={};function na(w,O,Z){Z===void 0&&(Z={}),Object.defineProperty(O,"_classRegistryKey",{value:w,writeable:!1}),Xa[w]={klass:O,omit:Z.omit||[],shallow:Z.shallow||[]}}for(var _i in na("Object",Object),Jn.serialize=function(w,O){var Z=w.toArrayBuffer();return O&&O.push(Z),{buffer:Z}},Jn.deserialize=function(w){return new Jn(w.buffer)},na("Grid",Jn),na("Color",_r),na("Error",Error),na("ResolvedImage",Mn),na("StylePropertyFunction",ps),na("StyleExpression",Dl,{omit:["_evaluator"]}),na("ZoomDependentExpression",As),na("ZoomConstantExpression",eu),na("CompoundExpression",Gt,{omit:["_evaluate"]}),Cu)Cu[_i]._classRegistryKey||na("Expression_"+_i,Cu[_i]);function _a(w){return w&&typeof ArrayBuffer<"u"&&(w instanceof ArrayBuffer||w.constructor&&w.constructor.name==="ArrayBuffer")}function Fa(w){return ya&&w instanceof ya}function ki(w,O){if(w==null||typeof w=="boolean"||typeof w=="number"||typeof w=="string"||w instanceof Boolean||w instanceof Number||w instanceof String||w instanceof Date||w instanceof RegExp)return w;if(_a(w)||Fa(w))return O&&O.push(w),w;if(ArrayBuffer.isView(w)){var Z=w;return O&&O.push(Z.buffer),Z}if(w instanceof ti)return O&&O.push(w.data.buffer),w;if(Array.isArray(w)){for(var ce=[],xe=0,we=w;xe<we.length;xe+=1)ce.push(ki(we[xe],O));return ce}if(typeof w=="object"){var Re=w.constructor,Ke=Re._classRegistryKey;if(!Ke)throw new Error("can't serialize object of unregistered class");var pt=Re.serialize?Re.serialize(w,O):{};if(!Re.serialize){for(var Et in w)if(w.hasOwnProperty(Et)&&!(Xa[Ke].omit.indexOf(Et)>=0)){var Ot=w[Et];pt[Et]=Xa[Ke].shallow.indexOf(Et)>=0?Ot:ki(Ot,O)}w instanceof Error&&(pt.message=w.message)}if(pt.$name)throw new Error("$name property is reserved for worker serialization logic.");return Ke!=="Object"&&(pt.$name=Ke),pt}throw new Error("can't serialize object of type "+typeof w)}function vi(w){if(w==null||typeof w=="boolean"||typeof w=="number"||typeof w=="string"||w instanceof Boolean||w instanceof Number||w instanceof String||w instanceof Date||w instanceof RegExp||_a(w)||Fa(w)||ArrayBuffer.isView(w)||w instanceof ti)return w;if(Array.isArray(w))return w.map(vi);if(typeof w=="object"){var O=w.$name||"Object",Z=Xa[O].klass;if(!Z)throw new Error("can't deserialize unregistered class "+O);if(Z.deserialize)return Z.deserialize(w);for(var ce=Object.create(Z.prototype),xe=0,we=Object.keys(w);xe<we.length;xe+=1){var Re=we[xe];if(Re!=="$name"){var Ke=w[Re];ce[Re]=Xa[O].shallow.indexOf(Re)>=0?Ke:vi(Ke)}}return ce}throw new Error("can't deserialize object of type "+typeof w)}var xi=function(){this.first=!0};xi.prototype.update=function(w,O){var Z=Math.floor(w);return this.first?(this.first=!1,this.lastIntegerZoom=Z,this.lastIntegerZoomTime=0,this.lastZoom=w,this.lastFloorZoom=Z,!0):(this.lastFloorZoom>Z?(this.lastIntegerZoom=Z+1,this.lastIntegerZoomTime=O):this.lastFloorZoom<Z&&(this.lastIntegerZoom=Z,this.lastIntegerZoomTime=O),w!==this.lastZoom&&(this.lastZoom=w,this.lastFloorZoom=Z,!0))};var Zn={"Latin-1 Supplement":function(w){return w>=128&&w<=255},Arabic:function(w){return w>=1536&&w<=1791},"Arabic Supplement":function(w){return w>=1872&&w<=1919},"Arabic Extended-A":function(w){return w>=2208&&w<=2303},"Hangul Jamo":function(w){return w>=4352&&w<=4607},"Unified Canadian Aboriginal Syllabics":function(w){return w>=5120&&w<=5759},Khmer:function(w){return w>=6016&&w<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(w){return w>=6320&&w<=6399},"General Punctuation":function(w){return w>=8192&&w<=8303},"Letterlike Symbols":function(w){return w>=8448&&w<=8527},"Number Forms":function(w){return w>=8528&&w<=8591},"Miscellaneous Technical":function(w){return w>=8960&&w<=9215},"Control Pictures":function(w){return w>=9216&&w<=9279},"Optical Character Recognition":function(w){return w>=9280&&w<=9311},"Enclosed Alphanumerics":function(w){return w>=9312&&w<=9471},"Geometric Shapes":function(w){return w>=9632&&w<=9727},"Miscellaneous Symbols":function(w){return w>=9728&&w<=9983},"Miscellaneous Symbols and Arrows":function(w){return w>=11008&&w<=11263},"CJK Radicals Supplement":function(w){return w>=11904&&w<=12031},"Kangxi Radicals":function(w){return w>=12032&&w<=12255},"Ideographic Description Characters":function(w){return w>=12272&&w<=12287},"CJK Symbols and Punctuation":function(w){return w>=12288&&w<=12351},Hiragana:function(w){return w>=12352&&w<=12447},Katakana:function(w){return w>=12448&&w<=12543},Bopomofo:function(w){return w>=12544&&w<=12591},"Hangul Compatibility Jamo":function(w){return w>=12592&&w<=12687},Kanbun:function(w){return w>=12688&&w<=12703},"Bopomofo Extended":function(w){return w>=12704&&w<=12735},"CJK Strokes":function(w){return w>=12736&&w<=12783},"Katakana Phonetic Extensions":function(w){return w>=12784&&w<=12799},"Enclosed CJK Letters and Months":function(w){return w>=12800&&w<=13055},"CJK Compatibility":function(w){return w>=13056&&w<=13311},"CJK Unified Ideographs Extension A":function(w){return w>=13312&&w<=19903},"Yijing Hexagram Symbols":function(w){return w>=19904&&w<=19967},"CJK Unified Ideographs":function(w){return w>=19968&&w<=40959},"Yi Syllables":function(w){return w>=40960&&w<=42127},"Yi Radicals":function(w){return w>=42128&&w<=42191},"Hangul Jamo Extended-A":function(w){return w>=43360&&w<=43391},"Hangul Syllables":function(w){return w>=44032&&w<=55215},"Hangul Jamo Extended-B":function(w){return w>=55216&&w<=55295},"Private Use Area":function(w){return w>=57344&&w<=63743},"CJK Compatibility Ideographs":function(w){return w>=63744&&w<=64255},"Arabic Presentation Forms-A":function(w){return w>=64336&&w<=65023},"Vertical Forms":function(w){return w>=65040&&w<=65055},"CJK Compatibility Forms":function(w){return w>=65072&&w<=65103},"Small Form Variants":function(w){return w>=65104&&w<=65135},"Arabic Presentation Forms-B":function(w){return w>=65136&&w<=65279},"Halfwidth and Fullwidth Forms":function(w){return w>=65280&&w<=65519}};function wi(w){for(var O=0,Z=w;O<Z.length;O+=1)if(Bi(Z[O].charCodeAt(0)))return!0;return!1}function Bi(w){return!(w!==746&&w!==747&&(w<4352||!(Zn["Bopomofo Extended"](w)||Zn.Bopomofo(w)||Zn["CJK Compatibility Forms"](w)&&!(w>=65097&&w<=65103)||Zn["CJK Compatibility Ideographs"](w)||Zn["CJK Compatibility"](w)||Zn["CJK Radicals Supplement"](w)||Zn["CJK Strokes"](w)||!(!Zn["CJK Symbols and Punctuation"](w)||w>=12296&&w<=12305||w>=12308&&w<=12319||w===12336)||Zn["CJK Unified Ideographs Extension A"](w)||Zn["CJK Unified Ideographs"](w)||Zn["Enclosed CJK Letters and Months"](w)||Zn["Hangul Compatibility Jamo"](w)||Zn["Hangul Jamo Extended-A"](w)||Zn["Hangul Jamo Extended-B"](w)||Zn["Hangul Jamo"](w)||Zn["Hangul Syllables"](w)||Zn.Hiragana(w)||Zn["Ideographic Description Characters"](w)||Zn.Kanbun(w)||Zn["Kangxi Radicals"](w)||Zn["Katakana Phonetic Extensions"](w)||Zn.Katakana(w)&&w!==12540||!(!Zn["Halfwidth and Fullwidth Forms"](w)||w===65288||w===65289||w===65293||w>=65306&&w<=65310||w===65339||w===65341||w===65343||w>=65371&&w<=65503||w===65507||w>=65512&&w<=65519)||!(!Zn["Small Form Variants"](w)||w>=65112&&w<=65118||w>=65123&&w<=65126)||Zn["Unified Canadian Aboriginal Syllabics"](w)||Zn["Unified Canadian Aboriginal Syllabics Extended"](w)||Zn["Vertical Forms"](w)||Zn["Yijing Hexagram Symbols"](w)||Zn["Yi Syllables"](w)||Zn["Yi Radicals"](w))))}function li(w){return!(Bi(w)||function(O){return!!(Zn["Latin-1 Supplement"](O)&&(O===167||O===169||O===174||O===177||O===188||O===189||O===190||O===215||O===247)||Zn["General Punctuation"](O)&&(O===8214||O===8224||O===8225||O===8240||O===8241||O===8251||O===8252||O===8258||O===8263||O===8264||O===8265||O===8273)||Zn["Letterlike Symbols"](O)||Zn["Number Forms"](O)||Zn["Miscellaneous Technical"](O)&&(O>=8960&&O<=8967||O>=8972&&O<=8991||O>=8996&&O<=9e3||O===9003||O>=9085&&O<=9114||O>=9150&&O<=9165||O===9167||O>=9169&&O<=9179||O>=9186&&O<=9215)||Zn["Control Pictures"](O)&&O!==9251||Zn["Optical Character Recognition"](O)||Zn["Enclosed Alphanumerics"](O)||Zn["Geometric Shapes"](O)||Zn["Miscellaneous Symbols"](O)&&!(O>=9754&&O<=9759)||Zn["Miscellaneous Symbols and Arrows"](O)&&(O>=11026&&O<=11055||O>=11088&&O<=11097||O>=11192&&O<=11243)||Zn["CJK Symbols and Punctuation"](O)||Zn.Katakana(O)||Zn["Private Use Area"](O)||Zn["CJK Compatibility Forms"](O)||Zn["Small Form Variants"](O)||Zn["Halfwidth and Fullwidth Forms"](O)||O===8734||O===8756||O===8757||O>=9984&&O<=10087||O>=10102&&O<=10131||O===65532||O===65533)}(w))}function Ca(w){return w>=1424&&w<=2303||Zn["Arabic Presentation Forms-A"](w)||Zn["Arabic Presentation Forms-B"](w)}function to(w,O){return!(!O&&Ca(w)||w>=2304&&w<=3583||w>=3840&&w<=4255||Zn.Khmer(w))}function ro(w){for(var O=0,Z=w;O<Z.length;O+=1)if(Ca(Z[O].charCodeAt(0)))return!0;return!1}var Lo=null,Oo="unavailable",Ji=null,Zi=function(w){w&&typeof w=="string"&&w.indexOf("NetworkError")>-1&&(Oo="error"),Lo&&Lo(w)};function _o(){as.fire(new Le("pluginStateChange",{pluginStatus:Oo,pluginURL:Ji}))}var as=new et,vs=function(){return Oo},Js=function(){if(Oo!=="deferred"||!Ji)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Oo="loading",_o(),Ji&&Pt({url:Ji},function(w){w?Zi(w):(Oo="loaded",_o())})},xo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Oo==="loaded"||xo.applyArabicShaping!=null},isLoading:function(){return Oo==="loading"},setState:function(w){Oo=w.pluginStatus,Ji=w.pluginURL},isParsed:function(){return xo.applyArabicShaping!=null&&xo.processBidirectionalText!=null&&xo.processStyledBidirectionalText!=null},getPluginURL:function(){return Ji}},ni=function(w,O){this.zoom=w,O?(this.now=O.now,this.fadeDuration=O.fadeDuration,this.zoomHistory=O.zoomHistory,this.transition=O.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new xi,this.transition={})};ni.prototype.isSupportedScript=function(w){return function(O,Z){for(var ce=0,xe=O;ce<xe.length;ce+=1)if(!to(xe[ce].charCodeAt(0),Z))return!1;return!0}(w,xo.isLoaded())},ni.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ni.prototype.getCrossfadeParameters=function(){var w=this.zoom,O=w-Math.floor(w),Z=this.crossFadingFactor();return w>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:O+(1-O)*Z}:{fromScale:.5,toScale:1,t:1-(1-Z)*O}};var ui=function(w,O){this.property=w,this.value=O,this.expression=function(Z,ce){if($s(Z))return new ps(Z,ce);if(fl(Z)){var xe=Ru(Z,ce);if(xe.result==="error")throw new Error(xe.value.map(function(Re){return Re.key+": "+Re.message}).join(", "));return xe.value}var we=Z;return typeof Z=="string"&&ce.type==="color"&&(we=_r.parse(Z)),{kind:"constant",evaluate:function(){return we}}}(O===void 0?w.specification.default:O,w.specification)};ui.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},ui.prototype.possiblyEvaluate=function(w,O,Z){return this.property.possiblyEvaluate(this,w,O,Z)};var Po=function(w){this.property=w,this.value=new ui(w,void 0)};Po.prototype.transitioned=function(w,O){return new Ao(this.property,this.value,O,y({},w.transition,this.transition),w.now)},Po.prototype.untransitioned=function(){return new Ao(this.property,this.value,null,{},0)};var no=function(w){this._properties=w,this._values=Object.create(w.defaultTransitionablePropertyValues)};no.prototype.getValue=function(w){return L(this._values[w].value.value)},no.prototype.setValue=function(w,O){this._values.hasOwnProperty(w)||(this._values[w]=new Po(this._values[w].property)),this._values[w].value=new ui(this._values[w].property,O===null?void 0:L(O))},no.prototype.getTransition=function(w){return L(this._values[w].transition)},no.prototype.setTransition=function(w,O){this._values.hasOwnProperty(w)||(this._values[w]=new Po(this._values[w].property)),this._values[w].transition=L(O)||void 0},no.prototype.serialize=function(){for(var w={},O=0,Z=Object.keys(this._values);O<Z.length;O+=1){var ce=Z[O],xe=this.getValue(ce);xe!==void 0&&(w[ce]=xe);var we=this.getTransition(ce);we!==void 0&&(w[ce+"-transition"]=we)}return w},no.prototype.transitioned=function(w,O){for(var Z=new Qo(this._properties),ce=0,xe=Object.keys(this._values);ce<xe.length;ce+=1){var we=xe[ce];Z._values[we]=this._values[we].transitioned(w,O._values[we])}return Z},no.prototype.untransitioned=function(){for(var w=new Qo(this._properties),O=0,Z=Object.keys(this._values);O<Z.length;O+=1){var ce=Z[O];w._values[ce]=this._values[ce].untransitioned()}return w};var Ao=function(w,O,Z,ce,xe){this.property=w,this.value=O,this.begin=xe+ce.delay||0,this.end=this.begin+ce.duration||0,w.specification.transition&&(ce.delay||ce.duration)&&(this.prior=Z)};Ao.prototype.possiblyEvaluate=function(w,O,Z){var ce=w.now||0,xe=this.value.possiblyEvaluate(w,O,Z),we=this.prior;if(we){if(ce>this.end)return this.prior=null,xe;if(this.value.isDataDriven())return this.prior=null,xe;if(ce<this.begin)return we.possiblyEvaluate(w,O,Z);var Re=(ce-this.begin)/(this.end-this.begin);return this.property.interpolate(we.possiblyEvaluate(w,O,Z),xe,function(Ke){if(Ke<=0)return 0;if(Ke>=1)return 1;var pt=Ke*Ke,Et=pt*Ke;return 4*(Ke<.5?Et:3*(Ke-pt)+Et-.75)}(Re))}return xe};var Qo=function(w){this._properties=w,this._values=Object.create(w.defaultTransitioningPropertyValues)};Qo.prototype.possiblyEvaluate=function(w,O,Z){for(var ce=new is(this._properties),xe=0,we=Object.keys(this._values);xe<we.length;xe+=1){var Re=we[xe];ce._values[Re]=this._values[Re].possiblyEvaluate(w,O,Z)}return ce},Qo.prototype.hasTransition=function(){for(var w=0,O=Object.keys(this._values);w<O.length;w+=1)if(this._values[O[w]].prior)return!0;return!1};var Gi=function(w){this._properties=w,this._values=Object.create(w.defaultPropertyValues)};Gi.prototype.getValue=function(w){return L(this._values[w].value)},Gi.prototype.setValue=function(w,O){this._values[w]=new ui(this._values[w].property,O===null?void 0:L(O))},Gi.prototype.serialize=function(){for(var w={},O=0,Z=Object.keys(this._values);O<Z.length;O+=1){var ce=Z[O],xe=this.getValue(ce);xe!==void 0&&(w[ce]=xe)}return w},Gi.prototype.possiblyEvaluate=function(w,O,Z){for(var ce=new is(this._properties),xe=0,we=Object.keys(this._values);xe<we.length;xe+=1){var Re=we[xe];ce._values[Re]=this._values[Re].possiblyEvaluate(w,O,Z)}return ce};var Ya=function(w,O,Z){this.property=w,this.value=O,this.parameters=Z};Ya.prototype.isConstant=function(){return this.value.kind==="constant"},Ya.prototype.constantOr=function(w){return this.value.kind==="constant"?this.value.value:w},Ya.prototype.evaluate=function(w,O,Z,ce){return this.property.evaluate(this.value,this.parameters,w,O,Z,ce)};var is=function(w){this._properties=w,this._values=Object.create(w.defaultPossiblyEvaluatedValues)};is.prototype.get=function(w){return this._values[w]};var Ea=function(w){this.specification=w};Ea.prototype.possiblyEvaluate=function(w,O){return w.expression.evaluate(O)},Ea.prototype.interpolate=function(w,O,Z){var ce=cn[this.specification.type];return ce?ce(w,O,Z):w};var Ga=function(w,O){this.specification=w,this.overrides=O};Ga.prototype.possiblyEvaluate=function(w,O,Z,ce){return new Ya(this,w.expression.kind==="constant"||w.expression.kind==="camera"?{kind:"constant",value:w.expression.evaluate(O,null,{},Z,ce)}:w.expression,O)},Ga.prototype.interpolate=function(w,O,Z){if(w.value.kind!=="constant"||O.value.kind!=="constant")return w;if(w.value.value===void 0||O.value.value===void 0)return new Ya(this,{kind:"constant",value:void 0},w.parameters);var ce=cn[this.specification.type];return ce?new Ya(this,{kind:"constant",value:ce(w.value.value,O.value.value,Z)},w.parameters):w},Ga.prototype.evaluate=function(w,O,Z,ce,xe,we){return w.kind==="constant"?w.value:w.evaluate(O,Z,ce,xe,we)};var Li=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.possiblyEvaluate=function(Z,ce,xe,we){if(Z.value===void 0)return new Ya(this,{kind:"constant",value:void 0},ce);if(Z.expression.kind==="constant"){var Re=Z.expression.evaluate(ce,null,{},xe,we),Ke=Z.property.specification.type==="resolvedImage"&&typeof Re!="string"?Re.name:Re,pt=this._calculate(Ke,Ke,Ke,ce);return new Ya(this,{kind:"constant",value:pt},ce)}if(Z.expression.kind==="camera"){var Et=this._calculate(Z.expression.evaluate({zoom:ce.zoom-1}),Z.expression.evaluate({zoom:ce.zoom}),Z.expression.evaluate({zoom:ce.zoom+1}),ce);return new Ya(this,{kind:"constant",value:Et},ce)}return new Ya(this,Z.expression,ce)},O.prototype.evaluate=function(Z,ce,xe,we,Re,Ke){if(Z.kind==="source"){var pt=Z.evaluate(ce,xe,we,Re,Ke);return this._calculate(pt,pt,pt,ce)}return Z.kind==="composite"?this._calculate(Z.evaluate({zoom:Math.floor(ce.zoom)-1},xe,we),Z.evaluate({zoom:Math.floor(ce.zoom)},xe,we),Z.evaluate({zoom:Math.floor(ce.zoom)+1},xe,we),ce):Z.value},O.prototype._calculate=function(Z,ce,xe,we){return we.zoom>we.zoomHistory.lastIntegerZoom?{from:Z,to:ce}:{from:xe,to:ce}},O.prototype.interpolate=function(Z){return Z},O}(Ga),Mi=function(w){this.specification=w};Mi.prototype.possiblyEvaluate=function(w,O,Z,ce){if(w.value!==void 0){if(w.expression.kind==="constant"){var xe=w.expression.evaluate(O,null,{},Z,ce);return this._calculate(xe,xe,xe,O)}return this._calculate(w.expression.evaluate(new ni(Math.floor(O.zoom-1),O)),w.expression.evaluate(new ni(Math.floor(O.zoom),O)),w.expression.evaluate(new ni(Math.floor(O.zoom+1),O)),O)}},Mi.prototype._calculate=function(w,O,Z,ce){return ce.zoom>ce.zoomHistory.lastIntegerZoom?{from:w,to:O}:{from:Z,to:O}},Mi.prototype.interpolate=function(w){return w};var Qn=function(w){this.specification=w};Qn.prototype.possiblyEvaluate=function(w,O,Z,ce){return!!w.expression.evaluate(O,null,{},Z,ce)},Qn.prototype.interpolate=function(){return!1};var za=function(w){for(var O in this.properties=w,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],w){var Z=w[O];Z.specification.overridable&&this.overridableProperties.push(O);var ce=this.defaultPropertyValues[O]=new ui(Z,void 0),xe=this.defaultTransitionablePropertyValues[O]=new Po(Z);this.defaultTransitioningPropertyValues[O]=xe.untransitioned(),this.defaultPossiblyEvaluatedValues[O]=ce.possiblyEvaluate({})}};na("DataDrivenProperty",Ga),na("DataConstantProperty",Ea),na("CrossFadedDataDrivenProperty",Li),na("CrossFadedProperty",Mi),na("ColorRampProperty",Qn);var Si=function(w){function O(Z,ce){if(w.call(this),this.id=Z.id,this.type=Z.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},Z.type!=="custom"&&(this.metadata=(Z=Z).metadata,this.minzoom=Z.minzoom,this.maxzoom=Z.maxzoom,Z.type!=="background"&&(this.source=Z.source,this.sourceLayer=Z["source-layer"],this.filter=Z.filter),ce.layout&&(this._unevaluatedLayout=new Gi(ce.layout)),ce.paint)){for(var xe in this._transitionablePaint=new no(ce.paint),Z.paint)this.setPaintProperty(xe,Z.paint[xe],{validate:!1});for(var we in Z.layout)this.setLayoutProperty(we,Z.layout[we],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new is(ce.paint)}}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},O.prototype.getLayoutProperty=function(Z){return Z==="visibility"?this.visibility:this._unevaluatedLayout.getValue(Z)},O.prototype.setLayoutProperty=function(Z,ce,xe){xe===void 0&&(xe={}),ce!=null&&this._validate(aa,"layers."+this.id+".layout."+Z,Z,ce,xe)||(Z!=="visibility"?this._unevaluatedLayout.setValue(Z,ce):this.visibility=ce)},O.prototype.getPaintProperty=function(Z){return A(Z,"-transition")?this._transitionablePaint.getTransition(Z.slice(0,-11)):this._transitionablePaint.getValue(Z)},O.prototype.setPaintProperty=function(Z,ce,xe){if(xe===void 0&&(xe={}),ce!=null&&this._validate(Wn,"layers."+this.id+".paint."+Z,Z,ce,xe))return!1;if(A(Z,"-transition"))return this._transitionablePaint.setTransition(Z.slice(0,-11),ce||void 0),!1;var we=this._transitionablePaint._values[Z],Re=we.property.specification["property-type"]==="cross-faded-data-driven",Ke=we.value.isDataDriven(),pt=we.value;this._transitionablePaint.setValue(Z,ce),this._handleSpecialPaintPropertyUpdate(Z);var Et=this._transitionablePaint._values[Z].value;return Et.isDataDriven()||Ke||Re||this._handleOverridablePaintPropertyUpdate(Z,pt,Et)},O.prototype._handleSpecialPaintPropertyUpdate=function(Z){},O.prototype._handleOverridablePaintPropertyUpdate=function(Z,ce,xe){return!1},O.prototype.isHidden=function(Z){return!!(this.minzoom&&Z<this.minzoom)||!!(this.maxzoom&&Z>=this.maxzoom)||this.visibility==="none"},O.prototype.updateTransitions=function(Z){this._transitioningPaint=this._transitionablePaint.transitioned(Z,this._transitioningPaint)},O.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},O.prototype.recalculate=function(Z,ce){Z.getCrossfadeParameters&&(this._crossfadeParameters=Z.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Z,void 0,ce)),this.paint=this._transitioningPaint.possiblyEvaluate(Z,void 0,ce)},O.prototype.serialize=function(){var Z={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Z.layout=Z.layout||{},Z.layout.visibility=this.visibility),R(Z,function(ce,xe){return!(ce===void 0||xe==="layout"&&!Object.keys(ce).length||xe==="paint"&&!Object.keys(ce).length)})},O.prototype._validate=function(Z,ce,xe,we,Re){return Re===void 0&&(Re={}),(!Re||Re.validate!==!1)&&Un(this,Z.call(ia,{key:ce,layerType:this.type,objectKey:xe,value:we,styleSpec:Me,style:{glyphs:!0,sprite:!0}}))},O.prototype.is3D=function(){return!1},O.prototype.isTileClipped=function(){return!1},O.prototype.hasOffscreenPass=function(){return!1},O.prototype.resize=function(){},O.prototype.isStateDependent=function(){for(var Z in this.paint._values){var ce=this.paint.get(Z);if(ce instanceof Ya&&yl(ce.property.specification)&&(ce.value.kind==="source"||ce.value.kind==="composite")&&ce.value.isStateDependent)return!0}return!1},O}(et),Vi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},uo=function(w,O){this._structArray=w,this._pos1=O*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ei=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Qi(w,O){O===void 0&&(O=1);var Z=0,ce=0;return{members:w.map(function(xe){var we=Vi[xe.type].BYTES_PER_ELEMENT,Re=Z=qo(Z,Math.max(O,we)),Ke=xe.components||1;return ce=Math.max(ce,we),Z+=we*Ke,{name:xe.name,type:xe.type,components:Ke,offset:Re}}),size:qo(Z,Math.max(ce,O)),alignment:O}}function qo(w,O){return Math.ceil(w/O)*O}Ei.serialize=function(w,O){return w._trim(),O&&(w.isTransferred=!0,O.push(w.arrayBuffer)),{length:w.length,arrayBuffer:w.arrayBuffer}},Ei.deserialize=function(w){var O=Object.create(this.prototype);return O.arrayBuffer=w.arrayBuffer,O.length=w.length,O.capacity=w.arrayBuffer.byteLength/O.bytesPerElement,O._refreshViews(),O},Ei.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ei.prototype.clear=function(){this.length=0},Ei.prototype.resize=function(w){this.reserve(w),this.length=w},Ei.prototype.reserve=function(w){if(w>this.capacity){this.capacity=Math.max(w,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var O=this.uint8;this._refreshViews(),O&&this.uint8.set(O)}},Ei.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ks=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce){var xe=this.length;return this.resize(xe+1),this.emplace(xe,Z,ce)},O.prototype.emplace=function(Z,ce,xe){var we=2*Z;return this.int16[we+0]=ce,this.int16[we+1]=xe,Z},O}(Ei);ks.prototype.bytesPerElement=4,na("StructArrayLayout2i4",ks);var or=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we){var Re=this.length;return this.resize(Re+1),this.emplace(Re,Z,ce,xe,we)},O.prototype.emplace=function(Z,ce,xe,we,Re){var Ke=4*Z;return this.int16[Ke+0]=ce,this.int16[Ke+1]=xe,this.int16[Ke+2]=we,this.int16[Ke+3]=Re,Z},O}(Ei);or.prototype.bytesPerElement=8,na("StructArrayLayout4i8",or);var Fo=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,Re,Ke){var pt=this.length;return this.resize(pt+1),this.emplace(pt,Z,ce,xe,we,Re,Ke)},O.prototype.emplace=function(Z,ce,xe,we,Re,Ke,pt){var Et=6*Z;return this.int16[Et+0]=ce,this.int16[Et+1]=xe,this.int16[Et+2]=we,this.int16[Et+3]=Re,this.int16[Et+4]=Ke,this.int16[Et+5]=pt,Z},O}(Ei);Fo.prototype.bytesPerElement=12,na("StructArrayLayout2i4i12",Fo);var fo=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,Re,Ke){var pt=this.length;return this.resize(pt+1),this.emplace(pt,Z,ce,xe,we,Re,Ke)},O.prototype.emplace=function(Z,ce,xe,we,Re,Ke,pt){var Et=4*Z,Ot=8*Z;return this.int16[Et+0]=ce,this.int16[Et+1]=xe,this.uint8[Ot+4]=we,this.uint8[Ot+5]=Re,this.uint8[Ot+6]=Ke,this.uint8[Ot+7]=pt,Z},O}(Ei);fo.prototype.bytesPerElement=8,na("StructArrayLayout2i4ub8",fo);var Di=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht){var Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht)},O.prototype.emplace=function(Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht,Jt){var lr=9*Z,Ar=18*Z;return this.uint16[lr+0]=ce,this.uint16[lr+1]=xe,this.uint16[lr+2]=we,this.uint16[lr+3]=Re,this.uint16[lr+4]=Ke,this.uint16[lr+5]=pt,this.uint16[lr+6]=Et,this.uint16[lr+7]=Ot,this.uint8[Ar+16]=Ht,this.uint8[Ar+17]=Jt,Z},O}(Ei);Di.prototype.bytesPerElement=18,na("StructArrayLayout8ui2ub18",Di);var mi=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht,Jt,lr){var Ar=this.length;return this.resize(Ar+1),this.emplace(Ar,Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht,Jt,lr)},O.prototype.emplace=function(Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht,Jt,lr,Ar){var Sr=12*Z;return this.int16[Sr+0]=ce,this.int16[Sr+1]=xe,this.int16[Sr+2]=we,this.int16[Sr+3]=Re,this.uint16[Sr+4]=Ke,this.uint16[Sr+5]=pt,this.uint16[Sr+6]=Et,this.uint16[Sr+7]=Ot,this.int16[Sr+8]=Ht,this.int16[Sr+9]=Jt,this.int16[Sr+10]=lr,this.int16[Sr+11]=Ar,Z},O}(Ei);mi.prototype.bytesPerElement=24,na("StructArrayLayout4i4ui4i24",mi);var Is=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe){var we=this.length;return this.resize(we+1),this.emplace(we,Z,ce,xe)},O.prototype.emplace=function(Z,ce,xe,we){var Re=3*Z;return this.float32[Re+0]=ce,this.float32[Re+1]=xe,this.float32[Re+2]=we,Z},O}(Ei);Is.prototype.bytesPerElement=12,na("StructArrayLayout3f12",Is);var _l=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z){var ce=this.length;return this.resize(ce+1),this.emplace(ce,Z)},O.prototype.emplace=function(Z,ce){return this.uint32[1*Z+0]=ce,Z},O}(Ei);_l.prototype.bytesPerElement=4,na("StructArrayLayout1ul4",_l);var dl=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,Re,Ke,pt,Et,Ot){var Ht=this.length;return this.resize(Ht+1),this.emplace(Ht,Z,ce,xe,we,Re,Ke,pt,Et,Ot)},O.prototype.emplace=function(Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht){var Jt=10*Z,lr=5*Z;return this.int16[Jt+0]=ce,this.int16[Jt+1]=xe,this.int16[Jt+2]=we,this.int16[Jt+3]=Re,this.int16[Jt+4]=Ke,this.int16[Jt+5]=pt,this.uint32[lr+3]=Et,this.uint16[Jt+8]=Ot,this.uint16[Jt+9]=Ht,Z},O}(Ei);dl.prototype.bytesPerElement=20,na("StructArrayLayout6i1ul2ui20",dl);var No=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,Re,Ke){var pt=this.length;return this.resize(pt+1),this.emplace(pt,Z,ce,xe,we,Re,Ke)},O.prototype.emplace=function(Z,ce,xe,we,Re,Ke,pt){var Et=6*Z;return this.int16[Et+0]=ce,this.int16[Et+1]=xe,this.int16[Et+2]=we,this.int16[Et+3]=Re,this.int16[Et+4]=Ke,this.int16[Et+5]=pt,Z},O}(Ei);No.prototype.bytesPerElement=12,na("StructArrayLayout2i2i2i12",No);var wl=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,Re){var Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,Z,ce,xe,we,Re)},O.prototype.emplace=function(Z,ce,xe,we,Re,Ke){var pt=4*Z,Et=8*Z;return this.float32[pt+0]=ce,this.float32[pt+1]=xe,this.float32[pt+2]=we,this.int16[Et+6]=Re,this.int16[Et+7]=Ke,Z},O}(Ei);wl.prototype.bytesPerElement=16,na("StructArrayLayout2f1f2i16",wl);var Qs=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we){var Re=this.length;return this.resize(Re+1),this.emplace(Re,Z,ce,xe,we)},O.prototype.emplace=function(Z,ce,xe,we,Re){var Ke=12*Z,pt=3*Z;return this.uint8[Ke+0]=ce,this.uint8[Ke+1]=xe,this.float32[pt+1]=we,this.float32[pt+2]=Re,Z},O}(Ei);Qs.prototype.bytesPerElement=12,na("StructArrayLayout2ub2f12",Qs);var Vo=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe){var we=this.length;return this.resize(we+1),this.emplace(we,Z,ce,xe)},O.prototype.emplace=function(Z,ce,xe,we){var Re=3*Z;return this.uint16[Re+0]=ce,this.uint16[Re+1]=xe,this.uint16[Re+2]=we,Z},O}(Ei);Vo.prototype.bytesPerElement=6,na("StructArrayLayout3ui6",Vo);var Tl=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht,Jt,lr,Ar,Sr,Zr,Br,ln){var mn=this.length;return this.resize(mn+1),this.emplace(mn,Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht,Jt,lr,Ar,Sr,Zr,Br,ln)},O.prototype.emplace=function(Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht,Jt,lr,Ar,Sr,Zr,Br,ln,mn){var In=24*Z,On=12*Z,Kn=48*Z;return this.int16[In+0]=ce,this.int16[In+1]=xe,this.uint16[In+2]=we,this.uint16[In+3]=Re,this.uint32[On+2]=Ke,this.uint32[On+3]=pt,this.uint32[On+4]=Et,this.uint16[In+10]=Ot,this.uint16[In+11]=Ht,this.uint16[In+12]=Jt,this.float32[On+7]=lr,this.float32[On+8]=Ar,this.uint8[Kn+36]=Sr,this.uint8[Kn+37]=Zr,this.uint8[Kn+38]=Br,this.uint32[On+10]=ln,this.int16[In+22]=mn,Z},O}(Ei);Tl.prototype.bytesPerElement=48,na("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Tl);var Hl=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht,Jt,lr,Ar,Sr,Zr,Br,ln,mn,In,On,Kn,xa,Pa,Ka,Ba,ri,Oa,Oi){var yi=this.length;return this.resize(yi+1),this.emplace(yi,Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht,Jt,lr,Ar,Sr,Zr,Br,ln,mn,In,On,Kn,xa,Pa,Ka,Ba,ri,Oa,Oi)},O.prototype.emplace=function(Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht,Jt,lr,Ar,Sr,Zr,Br,ln,mn,In,On,Kn,xa,Pa,Ka,Ba,ri,Oa,Oi,yi){var ja=34*Z,Wi=17*Z;return this.int16[ja+0]=ce,this.int16[ja+1]=xe,this.int16[ja+2]=we,this.int16[ja+3]=Re,this.int16[ja+4]=Ke,this.int16[ja+5]=pt,this.int16[ja+6]=Et,this.int16[ja+7]=Ot,this.uint16[ja+8]=Ht,this.uint16[ja+9]=Jt,this.uint16[ja+10]=lr,this.uint16[ja+11]=Ar,this.uint16[ja+12]=Sr,this.uint16[ja+13]=Zr,this.uint16[ja+14]=Br,this.uint16[ja+15]=ln,this.uint16[ja+16]=mn,this.uint16[ja+17]=In,this.uint16[ja+18]=On,this.uint16[ja+19]=Kn,this.uint16[ja+20]=xa,this.uint16[ja+21]=Pa,this.uint16[ja+22]=Ka,this.uint32[Wi+12]=Ba,this.float32[Wi+13]=ri,this.float32[Wi+14]=Oa,this.float32[Wi+15]=Oi,this.float32[Wi+16]=yi,Z},O}(Ei);Hl.prototype.bytesPerElement=68,na("StructArrayLayout8i15ui1ul4f68",Hl);var So=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z){var ce=this.length;return this.resize(ce+1),this.emplace(ce,Z)},O.prototype.emplace=function(Z,ce){return this.float32[1*Z+0]=ce,Z},O}(Ei);So.prototype.bytesPerElement=4,na("StructArrayLayout1f4",So);var ms=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe){var we=this.length;return this.resize(we+1),this.emplace(we,Z,ce,xe)},O.prototype.emplace=function(Z,ce,xe,we){var Re=3*Z;return this.int16[Re+0]=ce,this.int16[Re+1]=xe,this.int16[Re+2]=we,Z},O}(Ei);ms.prototype.bytesPerElement=6,na("StructArrayLayout3i6",ms);var zs=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe){var we=this.length;return this.resize(we+1),this.emplace(we,Z,ce,xe)},O.prototype.emplace=function(Z,ce,xe,we){var Re=4*Z;return this.uint32[2*Z+0]=ce,this.uint16[Re+2]=xe,this.uint16[Re+3]=we,Z},O}(Ei);zs.prototype.bytesPerElement=8,na("StructArrayLayout1ul2ui8",zs);var vl=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce){var xe=this.length;return this.resize(xe+1),this.emplace(xe,Z,ce)},O.prototype.emplace=function(Z,ce,xe){var we=2*Z;return this.uint16[we+0]=ce,this.uint16[we+1]=xe,Z},O}(Ei);vl.prototype.bytesPerElement=4,na("StructArrayLayout2ui4",vl);var Ro=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z){var ce=this.length;return this.resize(ce+1),this.emplace(ce,Z)},O.prototype.emplace=function(Z,ce){return this.uint16[1*Z+0]=ce,Z},O}(Ei);Ro.prototype.bytesPerElement=2,na("StructArrayLayout1ui2",Ro);var Xi=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce){var xe=this.length;return this.resize(xe+1),this.emplace(xe,Z,ce)},O.prototype.emplace=function(Z,ce,xe){var we=2*Z;return this.float32[we+0]=ce,this.float32[we+1]=xe,Z},O}(Ei);Xi.prototype.bytesPerElement=8,na("StructArrayLayout2f8",Xi);var wo=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we){var Re=this.length;return this.resize(Re+1),this.emplace(Re,Z,ce,xe,we)},O.prototype.emplace=function(Z,ce,xe,we,Re){var Ke=4*Z;return this.float32[Ke+0]=ce,this.float32[Ke+1]=xe,this.float32[Ke+2]=we,this.float32[Ke+3]=Re,Z},O}(Ei);wo.prototype.bytesPerElement=16,na("StructArrayLayout4f16",wo);var $=function(w){function O(){w.apply(this,arguments)}w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O;var Z={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Z.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Z.x1.get=function(){return this._structArray.int16[this._pos2+2]},Z.y1.get=function(){return this._structArray.int16[this._pos2+3]},Z.x2.get=function(){return this._structArray.int16[this._pos2+4]},Z.y2.get=function(){return this._structArray.int16[this._pos2+5]},Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.anchorPoint.get=function(){return new u(this.anchorPointX,this.anchorPointY)},Object.defineProperties(O.prototype,Z),O}(uo);$.prototype.size=20;var ne=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.get=function(Z){return new $(this,Z)},O}(dl);na("CollisionBoxArray",ne);var q=function(w){function O(){w.apply(this,arguments)}w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Z.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Z.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Z.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Z.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Z.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Z.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Z.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Z.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Z.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Z.placedOrientation.set=function(ce){this._structArray.uint8[this._pos1+37]=ce},Z.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Z.hidden.set=function(ce){this._structArray.uint8[this._pos1+38]=ce},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Z.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+10]=ce},Z.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(O.prototype,Z),O}(uo);q.prototype.size=48;var ve=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.get=function(Z){return new q(this,Z)},O}(Tl);na("PlacedSymbolArray",ve);var Se=function(w){function O(){w.apply(this,arguments)}w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Z.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Z.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Z.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Z.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Z.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Z.key.get=function(){return this._structArray.uint16[this._pos2+8]},Z.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Z.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Z.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Z.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Z.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Z.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Z.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Z.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Z.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Z.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Z.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Z.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Z.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Z.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+12]=ce},Z.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Z.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Z.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Z.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(O.prototype,Z),O}(uo);Se.prototype.size=68;var Oe=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.get=function(Z){return new Se(this,Z)},O}(Hl);na("SymbolInstanceArray",Oe);var Ye=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.getoffsetX=function(Z){return this.float32[1*Z+0]},O}(So);na("GlyphOffsetArray",Ye);var ut=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.getx=function(Z){return this.int16[3*Z+0]},O.prototype.gety=function(Z){return this.int16[3*Z+1]},O.prototype.gettileUnitDistanceFromAnchor=function(Z){return this.int16[3*Z+2]},O}(ms);na("SymbolLineVertexArray",ut);var bt=function(w){function O(){w.apply(this,arguments)}w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O;var Z={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(O.prototype,Z),O}(uo);bt.prototype.size=8;var jt=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.get=function(Z){return new bt(this,Z)},O}(zs);na("FeatureIndexArray",jt);var sr=Qi([{name:"a_pos",components:2,type:"Int16"}],4).members,pr=function(w){w===void 0&&(w=[]),this.segments=w};function br(w,O){return 256*(w=p(Math.floor(w),0,255))+p(Math.floor(O),0,255)}pr.prototype.prepareSegment=function(w,O,Z,ce){var xe=this.segments[this.segments.length-1];return w>pr.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+pr.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+w),(!xe||xe.vertexLength+w>pr.MAX_VERTEX_ARRAY_LENGTH||xe.sortKey!==ce)&&(xe={vertexOffset:O.length,primitiveOffset:Z.length,vertexLength:0,primitiveLength:0},ce!==void 0&&(xe.sortKey=ce),this.segments.push(xe)),xe},pr.prototype.get=function(){return this.segments},pr.prototype.destroy=function(){for(var w=0,O=this.segments;w<O.length;w+=1){var Z=O[w];for(var ce in Z.vaos)Z.vaos[ce].destroy()}},pr.simpleSegment=function(w,O,Z,ce){return new pr([{vertexOffset:w,primitiveOffset:O,vertexLength:Z,primitiveLength:ce,vaos:{},sortKey:0}])},pr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,na("SegmentVector",pr);var Cr=Qi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),Pr=f(function(w){w.exports=function(O,Z){var ce,xe,we,Re,Ke,pt,Et,Ot;for(xe=O.length-(ce=3&O.length),we=Z,Ke=3432918353,pt=461845907,Ot=0;Ot<xe;)Et=255&O.charCodeAt(Ot)|(255&O.charCodeAt(++Ot))<<8|(255&O.charCodeAt(++Ot))<<16|(255&O.charCodeAt(++Ot))<<24,++Ot,we=27492+(65535&(Re=5*(65535&(we=(we^=Et=(65535&(Et=(Et=(65535&Et)*Ke+(((Et>>>16)*Ke&65535)<<16)&4294967295)<<15|Et>>>17))*pt+(((Et>>>16)*pt&65535)<<16)&4294967295)<<13|we>>>19))+((5*(we>>>16)&65535)<<16)&4294967295))+((58964+(Re>>>16)&65535)<<16);switch(Et=0,ce){case 3:Et^=(255&O.charCodeAt(Ot+2))<<16;case 2:Et^=(255&O.charCodeAt(Ot+1))<<8;case 1:we^=Et=(65535&(Et=(Et=(65535&(Et^=255&O.charCodeAt(Ot)))*Ke+(((Et>>>16)*Ke&65535)<<16)&4294967295)<<15|Et>>>17))*pt+(((Et>>>16)*pt&65535)<<16)&4294967295}return we^=O.length,we=2246822507*(65535&(we^=we>>>16))+((2246822507*(we>>>16)&65535)<<16)&4294967295,we=3266489909*(65535&(we^=we>>>13))+((3266489909*(we>>>16)&65535)<<16)&4294967295,(we^=we>>>16)>>>0}}),jr=f(function(w){w.exports=function(O,Z){for(var ce,xe=O.length,we=Z^xe,Re=0;xe>=4;)ce=1540483477*(65535&(ce=255&O.charCodeAt(Re)|(255&O.charCodeAt(++Re))<<8|(255&O.charCodeAt(++Re))<<16|(255&O.charCodeAt(++Re))<<24))+((1540483477*(ce>>>16)&65535)<<16),we=1540483477*(65535&we)+((1540483477*(we>>>16)&65535)<<16)^(ce=1540483477*(65535&(ce^=ce>>>24))+((1540483477*(ce>>>16)&65535)<<16)),xe-=4,++Re;switch(xe){case 3:we^=(255&O.charCodeAt(Re+2))<<16;case 2:we^=(255&O.charCodeAt(Re+1))<<8;case 1:we=1540483477*(65535&(we^=255&O.charCodeAt(Re)))+((1540483477*(we>>>16)&65535)<<16)}return we=1540483477*(65535&(we^=we>>>13))+((1540483477*(we>>>16)&65535)<<16),(we^=we>>>15)>>>0}}),Mr=Pr,Ur=jr;Mr.murmur3=Pr,Mr.murmur2=Ur;var Jr=function(){this.ids=[],this.positions=[],this.indexed=!1};Jr.prototype.add=function(w,O,Z,ce){this.ids.push(zn(w)),this.positions.push(O,Z,ce)},Jr.prototype.getPositions=function(w){for(var O=zn(w),Z=0,ce=this.ids.length-1;Z<ce;){var xe=Z+ce>>1;this.ids[xe]>=O?ce=xe:Z=xe+1}for(var we=[];this.ids[Z]===O;)we.push({index:this.positions[3*Z],start:this.positions[3*Z+1],end:this.positions[3*Z+2]}),Z++;return we},Jr.serialize=function(w,O){var Z=new Float64Array(w.ids),ce=new Uint32Array(w.positions);return function xe(we,Re,Ke,pt){for(;Ke<pt;){for(var Et=we[Ke+pt>>1],Ot=Ke-1,Ht=pt+1;;){do Ot++;while(we[Ot]<Et);do Ht--;while(we[Ht]>Et);if(Ot>=Ht)break;kn(we,Ot,Ht),kn(Re,3*Ot,3*Ht),kn(Re,3*Ot+1,3*Ht+1),kn(Re,3*Ot+2,3*Ht+2)}Ht-Ke<pt-Ht?(xe(we,Re,Ke,Ht),Ke=Ht+1):(xe(we,Re,Ht+1,pt),pt=Ht)}}(Z,ce,0,Z.length-1),O&&O.push(Z.buffer,ce.buffer),{ids:Z,positions:ce}},Jr.deserialize=function(w){var O=new Jr;return O.ids=w.ids,O.positions=w.positions,O.indexed=!0,O};var fn=Math.pow(2,53)-1;function zn(w){var O=+w;return!isNaN(O)&&O<=fn?O:Mr(String(w))}function kn(w,O,Z){var ce=w[O];w[O]=w[Z],w[Z]=ce}na("FeaturePositionMap",Jr);var Dn=function(w,O){this.gl=w.gl,this.location=O},qn=function(w){function O(Z,ce){w.call(this,Z,ce),this.current=0}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1i(this.location,Z))},O}(Dn),pa=function(w){function O(Z,ce){w.call(this,Z,ce),this.current=0}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1f(this.location,Z))},O}(Dn),ua=function(w){function O(Z,ce){w.call(this,Z,ce),this.current=[0,0]}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]||(this.current=Z,this.gl.uniform2f(this.location,Z[0],Z[1]))},O}(Dn),wa=function(w){function O(Z,ce){w.call(this,Z,ce),this.current=[0,0,0]}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]||(this.current=Z,this.gl.uniform3f(this.location,Z[0],Z[1],Z[2]))},O}(Dn),Da=function(w){function O(Z,ce){w.call(this,Z,ce),this.current=[0,0,0,0]}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]&&Z[3]===this.current[3]||(this.current=Z,this.gl.uniform4f(this.location,Z[0],Z[1],Z[2],Z[3]))},O}(Dn),oi=function(w){function O(Z,ce){w.call(this,Z,ce),this.current=_r.transparent}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.set=function(Z){Z.r===this.current.r&&Z.g===this.current.g&&Z.b===this.current.b&&Z.a===this.current.a||(this.current=Z,this.gl.uniform4f(this.location,Z.r,Z.g,Z.b,Z.a))},O}(Dn),qa=new Float32Array(16),Fi=function(w){function O(Z,ce){w.call(this,Z,ce),this.current=qa}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.set=function(Z){if(Z[12]!==this.current[12]||Z[0]!==this.current[0])return this.current=Z,void this.gl.uniformMatrix4fv(this.location,!1,Z);for(var ce=1;ce<16;ce++)if(Z[ce]!==this.current[ce]){this.current=Z,this.gl.uniformMatrix4fv(this.location,!1,Z);break}},O}(Dn);function Ua(w){return[br(255*w.r,255*w.g),br(255*w.b,255*w.a)]}var fi=function(w,O,Z){this.value=w,this.uniformNames=O.map(function(ce){return"u_"+ce}),this.type=Z};fi.prototype.setUniform=function(w,O,Z){w.set(Z.constantOr(this.value))},fi.prototype.getBinding=function(w,O,Z){return this.type==="color"?new oi(w,O):new pa(w,O)};var Ii=function(w,O){this.uniformNames=O.map(function(Z){return"u_"+Z}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ii.prototype.setConstantPatternPositions=function(w,O){this.pixelRatioFrom=O.pixelRatio,this.pixelRatioTo=w.pixelRatio,this.patternFrom=O.tlbr,this.patternTo=w.tlbr},Ii.prototype.setUniform=function(w,O,Z,ce){var xe=ce==="u_pattern_to"?this.patternTo:ce==="u_pattern_from"?this.patternFrom:ce==="u_pixel_ratio_to"?this.pixelRatioTo:ce==="u_pixel_ratio_from"?this.pixelRatioFrom:null;xe&&w.set(xe)},Ii.prototype.getBinding=function(w,O,Z){return Z.substr(0,9)==="u_pattern"?new Da(w,O):new pa(w,O)};var hi=function(w,O,Z,ce){this.expression=w,this.type=Z,this.maxValue=0,this.paintVertexAttributes=O.map(function(xe){return{name:"a_"+xe,type:"Float32",components:Z==="color"?2:1,offset:0}}),this.paintVertexArray=new ce};hi.prototype.populatePaintArray=function(w,O,Z,ce,xe){var we=this.paintVertexArray.length,Re=this.expression.evaluate(new ni(0),O,{},ce,[],xe);this.paintVertexArray.resize(w),this._setPaintValue(we,w,Re)},hi.prototype.updatePaintArray=function(w,O,Z,ce){var xe=this.expression.evaluate({zoom:0},Z,ce);this._setPaintValue(w,O,xe)},hi.prototype._setPaintValue=function(w,O,Z){if(this.type==="color")for(var ce=Ua(Z),xe=w;xe<O;xe++)this.paintVertexArray.emplace(xe,ce[0],ce[1]);else{for(var we=w;we<O;we++)this.paintVertexArray.emplace(we,Z);this.maxValue=Math.max(this.maxValue,Math.abs(Z))}},hi.prototype.upload=function(w){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=w.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},hi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ii=function(w,O,Z,ce,xe,we){this.expression=w,this.uniformNames=O.map(function(Re){return"u_"+Re+"_t"}),this.type=Z,this.useIntegerZoom=ce,this.zoom=xe,this.maxValue=0,this.paintVertexAttributes=O.map(function(Re){return{name:"a_"+Re,type:"Float32",components:Z==="color"?4:2,offset:0}}),this.paintVertexArray=new we};ii.prototype.populatePaintArray=function(w,O,Z,ce,xe){var we=this.expression.evaluate(new ni(this.zoom),O,{},ce,[],xe),Re=this.expression.evaluate(new ni(this.zoom+1),O,{},ce,[],xe),Ke=this.paintVertexArray.length;this.paintVertexArray.resize(w),this._setPaintValue(Ke,w,we,Re)},ii.prototype.updatePaintArray=function(w,O,Z,ce){var xe=this.expression.evaluate({zoom:this.zoom},Z,ce),we=this.expression.evaluate({zoom:this.zoom+1},Z,ce);this._setPaintValue(w,O,xe,we)},ii.prototype._setPaintValue=function(w,O,Z,ce){if(this.type==="color")for(var xe=Ua(Z),we=Ua(ce),Re=w;Re<O;Re++)this.paintVertexArray.emplace(Re,xe[0],xe[1],we[0],we[1]);else{for(var Ke=w;Ke<O;Ke++)this.paintVertexArray.emplace(Ke,Z,ce);this.maxValue=Math.max(this.maxValue,Math.abs(Z),Math.abs(ce))}},ii.prototype.upload=function(w){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=w.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ii.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ii.prototype.setUniform=function(w,O){var Z=this.useIntegerZoom?Math.floor(O.zoom):O.zoom,ce=p(this.expression.interpolationFactor(Z,this.zoom,this.zoom+1),0,1);w.set(ce)},ii.prototype.getBinding=function(w,O,Z){return new pa(w,O)};var zi=function(w,O,Z,ce,xe,we){this.expression=w,this.type=O,this.useIntegerZoom=Z,this.zoom=ce,this.layerId=we,this.zoomInPaintVertexArray=new xe,this.zoomOutPaintVertexArray=new xe};zi.prototype.populatePaintArray=function(w,O,Z){var ce=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(w),this.zoomOutPaintVertexArray.resize(w),this._setPaintValues(ce,w,O.patterns&&O.patterns[this.layerId],Z)},zi.prototype.updatePaintArray=function(w,O,Z,ce,xe){this._setPaintValues(w,O,Z.patterns&&Z.patterns[this.layerId],xe)},zi.prototype._setPaintValues=function(w,O,Z,ce){if(ce&&Z){var xe=ce[Z.min],we=ce[Z.mid],Re=ce[Z.max];if(xe&&we&&Re)for(var Ke=w;Ke<O;Ke++)this.zoomInPaintVertexArray.emplace(Ke,we.tl[0],we.tl[1],we.br[0],we.br[1],xe.tl[0],xe.tl[1],xe.br[0],xe.br[1],we.pixelRatio,xe.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ke,we.tl[0],we.tl[1],we.br[0],we.br[1],Re.tl[0],Re.tl[1],Re.br[0],Re.br[1],we.pixelRatio,Re.pixelRatio)}},zi.prototype.upload=function(w){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=w.createVertexBuffer(this.zoomInPaintVertexArray,Cr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=w.createVertexBuffer(this.zoomOutPaintVertexArray,Cr.members,this.expression.isStateDependent))},zi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var si=function(w,O,Z,ce){this.binders={},this.layoutAttributes=ce,this._buffers=[];var xe=[];for(var we in w.paint._values)if(Z(we)){var Re=w.paint.get(we);if(Re instanceof Ya&&yl(Re.property.specification)){var Ke=os(we,w.type),pt=Re.value,Et=Re.property.specification.type,Ot=Re.property.useIntegerZoom,Ht=Re.property.specification["property-type"],Jt=Ht==="cross-faded"||Ht==="cross-faded-data-driven";if(pt.kind==="constant")this.binders[we]=Jt?new Ii(pt.value,Ke):new fi(pt.value,Ke,Et),xe.push("/u_"+we);else if(pt.kind==="source"||Jt){var lr=Bo(we,Et,"source");this.binders[we]=Jt?new zi(pt,Et,Ot,O,lr,w.id):new hi(pt,Ke,Et,lr),xe.push("/a_"+we)}else{var Ar=Bo(we,Et,"composite");this.binders[we]=new ii(pt,Ke,Et,Ot,O,Ar),xe.push("/z_"+we)}}}this.cacheKey=xe.sort().join("")};si.prototype.getMaxValue=function(w){var O=this.binders[w];return O instanceof hi||O instanceof ii?O.maxValue:0},si.prototype.populatePaintArrays=function(w,O,Z,ce,xe){for(var we in this.binders){var Re=this.binders[we];(Re instanceof hi||Re instanceof ii||Re instanceof zi)&&Re.populatePaintArray(w,O,Z,ce,xe)}},si.prototype.setConstantPatternPositions=function(w,O){for(var Z in this.binders){var ce=this.binders[Z];ce instanceof Ii&&ce.setConstantPatternPositions(w,O)}},si.prototype.updatePaintArrays=function(w,O,Z,ce,xe){var we=!1;for(var Re in w)for(var Ke=0,pt=O.getPositions(Re);Ke<pt.length;Ke+=1){var Et=pt[Ke],Ot=Z.feature(Et.index);for(var Ht in this.binders){var Jt=this.binders[Ht];if((Jt instanceof hi||Jt instanceof ii||Jt instanceof zi)&&Jt.expression.isStateDependent===!0){var lr=ce.paint.get(Ht);Jt.expression=lr.value,Jt.updatePaintArray(Et.start,Et.end,Ot,w[Re],xe),we=!0}}}return we},si.prototype.defines=function(){var w=[];for(var O in this.binders){var Z=this.binders[O];(Z instanceof fi||Z instanceof Ii)&&w.push.apply(w,Z.uniformNames.map(function(ce){return"#define HAS_UNIFORM_"+ce}))}return w},si.prototype.getPaintVertexBuffers=function(){return this._buffers},si.prototype.getUniforms=function(w,O){var Z=[];for(var ce in this.binders){var xe=this.binders[ce];if(xe instanceof fi||xe instanceof Ii||xe instanceof ii)for(var we=0,Re=xe.uniformNames;we<Re.length;we+=1){var Ke=Re[we];if(O[Ke]){var pt=xe.getBinding(w,O[Ke],Ke);Z.push({name:Ke,property:ce,binding:pt})}}}return Z},si.prototype.setUniforms=function(w,O,Z,ce){for(var xe=0,we=O;xe<we.length;xe+=1){var Re=we[xe],Ke=Re.name,pt=Re.property;this.binders[pt].setUniform(Re.binding,ce,Z.get(pt),Ke)}},si.prototype.updatePaintBuffers=function(w){for(var O in this._buffers=[],this.binders){var Z=this.binders[O];if(w&&Z instanceof zi){var ce=w.fromScale===2?Z.zoomInPaintVertexBuffer:Z.zoomOutPaintVertexBuffer;ce&&this._buffers.push(ce)}else(Z instanceof hi||Z instanceof ii)&&Z.paintVertexBuffer&&this._buffers.push(Z.paintVertexBuffer)}},si.prototype.upload=function(w){for(var O in this.binders){var Z=this.binders[O];(Z instanceof hi||Z instanceof ii||Z instanceof zi)&&Z.upload(w)}this.updatePaintBuffers()},si.prototype.destroy=function(){for(var w in this.binders){var O=this.binders[w];(O instanceof hi||O instanceof ii||O instanceof zi)&&O.destroy()}};var Na=function(w,O,Z,ce){ce===void 0&&(ce=function(){return!0}),this.programConfigurations={};for(var xe=0,we=O;xe<we.length;xe+=1){var Re=we[xe];this.programConfigurations[Re.id]=new si(Re,Z,ce,w)}this.needsUpload=!1,this._featureMap=new Jr,this._bufferOffset=0};function os(w,O){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[w]||[w.replace(O+"-","").replace(/-/g,"_")]}function Bo(w,O,Z){var ce={color:{source:Xi,composite:wo},number:{source:So,composite:Xi}},xe=function(we){return{"line-pattern":{source:Di,composite:Di},"fill-pattern":{source:Di,composite:Di},"fill-extrusion-pattern":{source:Di,composite:Di}}[we]}(w);return xe&&xe[Z]||ce[O][Z]}Na.prototype.populatePaintArrays=function(w,O,Z,ce,xe,we){for(var Re in this.programConfigurations)this.programConfigurations[Re].populatePaintArrays(w,O,ce,xe,we);O.id!==void 0&&this._featureMap.add(O.id,Z,this._bufferOffset,w),this._bufferOffset=w,this.needsUpload=!0},Na.prototype.updatePaintArrays=function(w,O,Z,ce){for(var xe=0,we=Z;xe<we.length;xe+=1){var Re=we[xe];this.needsUpload=this.programConfigurations[Re.id].updatePaintArrays(w,this._featureMap,O,Re,ce)||this.needsUpload}},Na.prototype.get=function(w){return this.programConfigurations[w]},Na.prototype.upload=function(w){if(this.needsUpload){for(var O in this.programConfigurations)this.programConfigurations[O].upload(w);this.needsUpload=!1}},Na.prototype.destroy=function(){for(var w in this.programConfigurations)this.programConfigurations[w].destroy()},na("ConstantBinder",fi),na("CrossFadedConstantBinder",Ii),na("SourceExpressionBinder",hi),na("CrossFadedCompositeBinder",zi),na("CompositeExpressionBinder",ii),na("ProgramConfiguration",si,{omit:["_buffers"]}),na("ProgramConfigurationSet",Na);var bo={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1};function ho(w){for(var O=8192/w.extent,Z=w.loadGeometry(),ce=0;ce<Z.length;ce++)for(var xe=Z[ce],we=0;we<xe.length;we++){var Re=xe[we];Re.x=Math.round(Re.x*O),Re.y=Math.round(Re.y*O),(Re.x<bo.min||Re.x>bo.max||Re.y<bo.min||Re.y>bo.max)&&(E("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Re.x=p(Re.x,bo.min,bo.max),Re.y=p(Re.y,bo.min,bo.max))}return Z}function es(w,O,Z,ce,xe){w.emplaceBack(2*O+(ce+1)/2,2*Z+(xe+1)/2)}var To=function(w){this.zoom=w.zoom,this.overscaling=w.overscaling,this.layers=w.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=w.index,this.hasPattern=!1,this.layoutVertexArray=new ks,this.indexArray=new Vo,this.segments=new pr,this.programConfigurations=new Na(sr,w.layers,w.zoom),this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function xu(w,O){for(var Z=0;Z<w.length;Z++)if(zu(O,w[Z]))return!0;for(var ce=0;ce<O.length;ce++)if(zu(w,O[ce]))return!0;return!!nu(w,O)}function Ms(w,O,Z){return!!zu(w,O)||!!vc(O,w,Z)}function ru(w,O){if(w.length===1)return Il(O,w[0]);for(var Z=0;Z<O.length;Z++)for(var ce=O[Z],xe=0;xe<ce.length;xe++)if(zu(w,ce[xe]))return!0;for(var we=0;we<w.length;we++)if(Il(O,w[we]))return!0;for(var Re=0;Re<O.length;Re++)if(nu(w,O[Re]))return!0;return!1}function Al(w,O,Z){if(w.length>1){if(nu(w,O))return!0;for(var ce=0;ce<O.length;ce++)if(vc(O[ce],w,Z))return!0}for(var xe=0;xe<w.length;xe++)if(vc(w[xe],O,Z))return!0;return!1}function nu(w,O){if(w.length===0||O.length===0)return!1;for(var Z=0;Z<w.length-1;Z++)for(var ce=w[Z],xe=w[Z+1],we=0;we<O.length-1;we++)if(Iu(ce,xe,O[we],O[we+1]))return!0;return!1}function Iu(w,O,Z,ce){return S(w,Z,ce)!==S(O,Z,ce)&&S(w,O,Z)!==S(w,O,ce)}function vc(w,O,Z){var ce=Z*Z;if(O.length===1)return w.distSqr(O[0])<ce;for(var xe=1;xe<O.length;xe++)if(mc(w,O[xe-1],O[xe])<ce)return!0;return!1}function mc(w,O,Z){var ce=O.distSqr(Z);if(ce===0)return w.distSqr(O);var xe=((w.x-O.x)*(Z.x-O.x)+(w.y-O.y)*(Z.y-O.y))/ce;return w.distSqr(xe<0?O:xe>1?Z:Z.sub(O)._mult(xe)._add(O))}function Il(w,O){for(var Z,ce,xe,we=!1,Re=0;Re<w.length;Re++)for(var Ke=0,pt=(Z=w[Re]).length-1;Ke<Z.length;pt=Ke++)(ce=Z[Ke]).y>O.y!=(xe=Z[pt]).y>O.y&&O.x<(xe.x-ce.x)*(O.y-ce.y)/(xe.y-ce.y)+ce.x&&(we=!we);return we}function zu(w,O){for(var Z=!1,ce=0,xe=w.length-1;ce<w.length;xe=ce++){var we=w[ce],Re=w[xe];we.y>O.y!=Re.y>O.y&&O.x<(Re.x-we.x)*(O.y-we.y)/(Re.y-we.y)+we.x&&(Z=!Z)}return Z}function Ff(w,O,Z){var ce=Z[0],xe=Z[2];if(w.x<ce.x&&O.x<ce.x||w.x>xe.x&&O.x>xe.x||w.y<ce.y&&O.y<ce.y||w.y>xe.y&&O.y>xe.y)return!1;var we=S(w,O,Z[0]);return we!==S(w,O,Z[1])||we!==S(w,O,Z[2])||we!==S(w,O,Z[3])}function gc(w,O,Z){var ce=O.paint.get(w).value;return ce.kind==="constant"?ce.value:Z.programConfigurations.get(O.id).getMaxValue(w)}function au(w){return Math.sqrt(w[0]*w[0]+w[1]*w[1])}function Ss(w,O,Z,ce,xe){if(!O[0]&&!O[1])return w;var we=u.convert(O)._mult(xe);Z==="viewport"&&we._rotate(-ce);for(var Re=[],Ke=0;Ke<w.length;Ke++)Re.push(w[Ke].sub(we));return Re}To.prototype.populate=function(w,O,Z){var ce=this.layers[0],xe=[],we=null;ce.type==="circle"&&(we=ce.layout.get("circle-sort-key"));for(var Re=0,Ke=w;Re<Ke.length;Re+=1){var pt=Ke[Re],Et=pt.feature,Ot=pt.id,Ht=pt.index,Jt=pt.sourceLayerIndex,lr=this.layers[0]._featureFilter.needGeometry,Ar={type:Et.type,id:Ot,properties:Et.properties,geometry:lr?ho(Et):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),Ar,Z)){lr||(Ar.geometry=ho(Et));var Sr=we?we.evaluate(Ar,{},Z):void 0;xe.push({id:Ot,properties:Et.properties,type:Et.type,sourceLayerIndex:Jt,index:Ht,geometry:Ar.geometry,patterns:{},sortKey:Sr})}}we&&xe.sort(function(xa,Pa){return xa.sortKey-Pa.sortKey});for(var Zr=0,Br=xe;Zr<Br.length;Zr+=1){var ln=Br[Zr],mn=ln.geometry,In=ln.index,On=ln.sourceLayerIndex,Kn=w[In].feature;this.addFeature(ln,mn,In,Z),O.featureIndex.insert(Kn,mn,In,On,this.index)}},To.prototype.update=function(w,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(w,O,this.stateDependentLayers,Z)},To.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},To.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},To.prototype.upload=function(w){this.uploaded||(this.layoutVertexBuffer=w.createVertexBuffer(this.layoutVertexArray,sr),this.indexBuffer=w.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(w),this.uploaded=!0},To.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},To.prototype.addFeature=function(w,O,Z,ce){for(var xe=0,we=O;xe<we.length;xe+=1)for(var Re=0,Ke=we[xe];Re<Ke.length;Re+=1){var pt=Ke[Re],Et=pt.x,Ot=pt.y;if(!(Et<0||Et>=8192||Ot<0||Ot>=8192)){var Ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,w.sortKey),Jt=Ht.vertexLength;es(this.layoutVertexArray,Et,Ot,-1,-1),es(this.layoutVertexArray,Et,Ot,1,-1),es(this.layoutVertexArray,Et,Ot,1,1),es(this.layoutVertexArray,Et,Ot,-1,1),this.indexArray.emplaceBack(Jt,Jt+1,Jt+2),this.indexArray.emplaceBack(Jt,Jt+3,Jt+2),Ht.vertexLength+=4,Ht.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,w,Z,{},ce)},na("CircleBucket",To,{omit:["layers"]});var rf=new za({"circle-sort-key":new Ga(Me.layout_circle["circle-sort-key"])}),nf={paint:new za({"circle-radius":new Ga(Me.paint_circle["circle-radius"]),"circle-color":new Ga(Me.paint_circle["circle-color"]),"circle-blur":new Ga(Me.paint_circle["circle-blur"]),"circle-opacity":new Ga(Me.paint_circle["circle-opacity"]),"circle-translate":new Ea(Me.paint_circle["circle-translate"]),"circle-translate-anchor":new Ea(Me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ea(Me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ea(Me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ga(Me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ga(Me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ga(Me.paint_circle["circle-stroke-opacity"])}),layout:rf},ws=typeof Float32Array<"u"?Float32Array:Array;function yc(w){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function ss(w,O,Z){var ce=O[0],xe=O[1],we=O[2],Re=O[3],Ke=O[4],pt=O[5],Et=O[6],Ot=O[7],Ht=O[8],Jt=O[9],lr=O[10],Ar=O[11],Sr=O[12],Zr=O[13],Br=O[14],ln=O[15],mn=Z[0],In=Z[1],On=Z[2],Kn=Z[3];return w[0]=mn*ce+In*Ke+On*Ht+Kn*Sr,w[1]=mn*xe+In*pt+On*Jt+Kn*Zr,w[2]=mn*we+In*Et+On*lr+Kn*Br,w[3]=mn*Re+In*Ot+On*Ar+Kn*ln,w[4]=(mn=Z[4])*ce+(In=Z[5])*Ke+(On=Z[6])*Ht+(Kn=Z[7])*Sr,w[5]=mn*xe+In*pt+On*Jt+Kn*Zr,w[6]=mn*we+In*Et+On*lr+Kn*Br,w[7]=mn*Re+In*Ot+On*Ar+Kn*ln,w[8]=(mn=Z[8])*ce+(In=Z[9])*Ke+(On=Z[10])*Ht+(Kn=Z[11])*Sr,w[9]=mn*xe+In*pt+On*Jt+Kn*Zr,w[10]=mn*we+In*Et+On*lr+Kn*Br,w[11]=mn*Re+In*Ot+On*Ar+Kn*ln,w[12]=(mn=Z[12])*ce+(In=Z[13])*Ke+(On=Z[14])*Ht+(Kn=Z[15])*Sr,w[13]=mn*xe+In*pt+On*Jt+Kn*Zr,w[14]=mn*we+In*Et+On*lr+Kn*Br,w[15]=mn*Re+In*Ot+On*Ar+Kn*ln,w}Math.hypot||(Math.hypot=function(){for(var w=arguments,O=0,Z=arguments.length;Z--;)O+=w[Z]*w[Z];return Math.sqrt(O)});var jl,zl=ss;function nc(w,O,Z){var ce=O[0],xe=O[1],we=O[2],Re=O[3];return w[0]=Z[0]*ce+Z[4]*xe+Z[8]*we+Z[12]*Re,w[1]=Z[1]*ce+Z[5]*xe+Z[9]*we+Z[13]*Re,w[2]=Z[2]*ce+Z[6]*xe+Z[10]*we+Z[14]*Re,w[3]=Z[3]*ce+Z[7]*xe+Z[11]*we+Z[15]*Re,w}jl=new ws(3),ws!=Float32Array&&(jl[0]=0,jl[1]=0,jl[2]=0),function(){var w=new ws(4);ws!=Float32Array&&(w[0]=0,w[1]=0,w[2]=0,w[3]=0)}();var fd=(function(){var w=new ws(2);ws!=Float32Array&&(w[0]=0,w[1]=0)}(),function(w){function O(Z){w.call(this,Z,nf)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.createBucket=function(Z){return new To(Z)},O.prototype.queryRadius=function(Z){var ce=Z;return gc("circle-radius",this,ce)+gc("circle-stroke-width",this,ce)+au(this.paint.get("circle-translate"))},O.prototype.queryIntersectsFeature=function(Z,ce,xe,we,Re,Ke,pt,Et){for(var Ot=Ss(Z,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ke.angle,pt),Ht=this.paint.get("circle-radius").evaluate(ce,xe)+this.paint.get("circle-stroke-width").evaluate(ce,xe),Jt=this.paint.get("circle-pitch-alignment")==="map",lr=Jt?Ot:function(xa,Pa){return xa.map(function(Ka){return Nf(Ka,Pa)})}(Ot,Et),Ar=Jt?Ht*pt:Ht,Sr=0,Zr=we;Sr<Zr.length;Sr+=1)for(var Br=0,ln=Zr[Sr];Br<ln.length;Br+=1){var mn=ln[Br],In=Jt?mn:Nf(mn,Et),On=Ar,Kn=nc([],[mn.x,mn.y,0,1],Et);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?On*=Kn[3]/Ke.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(On*=Ke.cameraToCenterDistance/Kn[3]),Ms(lr,In,On))return!0}return!1},O}(Si));function Nf(w,O){var Z=nc([],[w.x,w.y,0,1],O);return new u(Z[0]/Z[3],Z[1]/Z[3])}var Nh=function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O}(To);function Ic(w,O,Z,ce){var xe=O.width,we=O.height;if(ce){if(ce instanceof Uint8ClampedArray)ce=new Uint8Array(ce.buffer);else if(ce.length!==xe*we*Z)throw new RangeError("mismatched image size")}else ce=new Uint8Array(xe*we*Z);return w.width=xe,w.height=we,w.data=ce,w}function Bh(w,O,Z){var ce=O.width,xe=O.height;if(ce!==w.width||xe!==w.height){var we=Ic({},{width:ce,height:xe},Z);iu(w,we,{x:0,y:0},{x:0,y:0},{width:Math.min(w.width,ce),height:Math.min(w.height,xe)},Z),w.width=ce,w.height=xe,w.data=we.data}}function iu(w,O,Z,ce,xe,we){if(xe.width===0||xe.height===0)return O;if(xe.width>w.width||xe.height>w.height||Z.x>w.width-xe.width||Z.y>w.height-xe.height)throw new RangeError("out of range source coordinates for image copy");if(xe.width>O.width||xe.height>O.height||ce.x>O.width-xe.width||ce.y>O.height-xe.height)throw new RangeError("out of range destination coordinates for image copy");for(var Re=w.data,Ke=O.data,pt=0;pt<xe.height;pt++)for(var Et=((Z.y+pt)*w.width+Z.x)*we,Ot=((ce.y+pt)*O.width+ce.x)*we,Ht=0;Ht<xe.width*we;Ht++)Ke[Ot+Ht]=Re[Et+Ht];return O}na("HeatmapBucket",Nh,{omit:["layers"]});var ou=function(w,O){Ic(this,w,1,O)};ou.prototype.resize=function(w){Bh(this,w,1)},ou.prototype.clone=function(){return new ou({width:this.width,height:this.height},new Uint8Array(this.data))},ou.copy=function(w,O,Z,ce,xe){iu(w,O,Z,ce,xe,1)};var ls=function(w,O){Ic(this,w,4,O)};ls.prototype.resize=function(w){Bh(this,w,4)},ls.prototype.replace=function(w,O){O?this.data.set(w):this.data=w instanceof Uint8ClampedArray?new Uint8Array(w.buffer):w},ls.prototype.clone=function(){return new ls({width:this.width,height:this.height},new Uint8Array(this.data))},ls.copy=function(w,O,Z,ce,xe){iu(w,O,Z,ce,xe,4)},na("AlphaImage",ou),na("RGBAImage",ls);var nv={paint:new za({"heatmap-radius":new Ga(Me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ga(Me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ea(Me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Qn(Me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ea(Me.paint_heatmap["heatmap-opacity"])})};function av(w,O){for(var Z=new Uint8Array(1024),ce={},xe=0,we=0;xe<256;xe++,we+=4){ce[O]=xe/255;var Re=w.evaluate(ce);Z[we+0]=Math.floor(255*Re.r/Re.a),Z[we+1]=Math.floor(255*Re.g/Re.a),Z[we+2]=Math.floor(255*Re.b/Re.a),Z[we+3]=Math.floor(255*Re.a)}return new ls({width:256,height:1},Z)}var iv=function(w){function O(Z){w.call(this,Z,nv),this._updateColorRamp()}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.createBucket=function(Z){return new Nh(Z)},O.prototype._handleSpecialPaintPropertyUpdate=function(Z){Z==="heatmap-color"&&this._updateColorRamp()},O.prototype._updateColorRamp=function(){this.colorRamp=av(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},O.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},O}(Si),D0={paint:new za({"hillshade-illumination-direction":new Ea(Me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ea(Me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ea(Me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ea(Me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ea(Me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ea(Me.paint_hillshade["hillshade-accent-color"])})},mp=function(w){function O(Z){w.call(this,Z,D0)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},O}(Si),hd=Qi([{name:"a_pos",components:2,type:"Int16"}],4).members,Uh=ch,I0=ch;function ch(w,O,Z){Z=Z||2;var ce,xe,we,Re,Ke,pt,Et,Ot=O&&O.length,Ht=Ot?O[0]*Z:w.length,Jt=ao(w,0,Ht,Z,!0),lr=[];if(!Jt||Jt.next===Jt.prev)return lr;if(Ot&&(Jt=function(Sr,Zr,Br,ln){var mn,In,On,Kn=[];for(mn=0,In=Zr.length;mn<In;mn++)(On=ao(Sr,Zr[mn]*ln,mn<In-1?Zr[mn+1]*ln:Sr.length,ln,!1))===On.next&&(On.steiner=!0),Kn.push(pd(On));for(Kn.sort(Ou),mn=0;mn<Kn.length;mn++)F0(Kn[mn],Br),Br=xc(Br,Br.next);return Br}(w,O,Jt,Z)),w.length>80*Z){ce=we=w[0],xe=Re=w[1];for(var Ar=Z;Ar<Ht;Ar+=Z)(Ke=w[Ar])<ce&&(ce=Ke),(pt=w[Ar+1])<xe&&(xe=pt),Ke>we&&(we=Ke),pt>Re&&(Re=pt);Et=(Et=Math.max(we-ce,Re-xe))!==0?1/Et:0}return Bf(Jt,lr,Z,ce,xe,Et),lr}function ao(w,O,Z,ce,xe){var we,Re;if(xe===dd(w,O,Z,ce)>0)for(we=O;we<Z;we+=ce)Re=xp(we,w[we],w[we+1],Re);else for(we=Z-ce;we>=O;we-=ce)Re=xp(we,w[we],w[we+1],Re);return Re&&fh(Re,Re.next)&&(Vf(Re),Re=Re.next),Re}function xc(w,O){if(!w)return w;O||(O=w);var Z,ce=w;do if(Z=!1,ce.steiner||!fh(ce,ce.next)&&Uo(ce.prev,ce,ce.next)!==0)ce=ce.next;else{if(Vf(ce),(ce=O=ce.prev)===ce.next)break;Z=!0}while(Z||ce!==O);return O}function Bf(w,O,Z,ce,xe,we,Re){if(w){!Re&&we&&function(Ot,Ht,Jt,lr){var Ar=Ot;do Ar.z===null&&(Ar.z=Uf(Ar.x,Ar.y,Ht,Jt,lr)),Ar.prevZ=Ar.prev,Ar.nextZ=Ar.next,Ar=Ar.next;while(Ar!==Ot);Ar.prevZ.nextZ=null,Ar.prevZ=null,function(Sr){var Zr,Br,ln,mn,In,On,Kn,xa,Pa=1;do{for(Br=Sr,Sr=null,In=null,On=0;Br;){for(On++,ln=Br,Kn=0,Zr=0;Zr<Pa&&(Kn++,ln=ln.nextZ);Zr++);for(xa=Pa;Kn>0||xa>0&&ln;)Kn!==0&&(xa===0||!ln||Br.z<=ln.z)?(mn=Br,Br=Br.nextZ,Kn--):(mn=ln,ln=ln.nextZ,xa--),In?In.nextZ=mn:Sr=mn,mn.prevZ=In,In=mn;Br=ln}In.nextZ=null,Pa*=2}while(On>1)}(Ar)}(w,ce,xe,we);for(var Ke,pt,Et=w;w.prev!==w.next;)if(Ke=w.prev,pt=w.next,we?ov(w,ce,xe,we):Vh(w))O.push(Ke.i/Z),O.push(w.i/Z),O.push(pt.i/Z),Vf(w),w=pt.next,Et=pt.next;else if((w=pt)===Et){Re?Re===1?Bf(w=z0(xc(w),O,Z),O,Z,ce,xe,we,2):Re===2&&O0(w,O,Z,ce,xe,we):Bf(xc(w),O,Z,ce,xe,we,1);break}}}function Vh(w){var O=w.prev,Z=w,ce=w.next;if(Uo(O,Z,ce)>=0)return!1;for(var xe=w.next.next;xe!==w.prev;){if(af(O.x,O.y,Z.x,Z.y,ce.x,ce.y,xe.x,xe.y)&&Uo(xe.prev,xe,xe.next)>=0)return!1;xe=xe.next}return!0}function ov(w,O,Z,ce){var xe=w.prev,we=w,Re=w.next;if(Uo(xe,we,Re)>=0)return!1;for(var Ke=xe.x>we.x?xe.x>Re.x?xe.x:Re.x:we.x>Re.x?we.x:Re.x,pt=xe.y>we.y?xe.y>Re.y?xe.y:Re.y:we.y>Re.y?we.y:Re.y,Et=Uf(xe.x<we.x?xe.x<Re.x?xe.x:Re.x:we.x<Re.x?we.x:Re.x,xe.y<we.y?xe.y<Re.y?xe.y:Re.y:we.y<Re.y?we.y:Re.y,O,Z,ce),Ot=Uf(Ke,pt,O,Z,ce),Ht=w.prevZ,Jt=w.nextZ;Ht&&Ht.z>=Et&&Jt&&Jt.z<=Ot;){if(Ht!==w.prev&&Ht!==w.next&&af(xe.x,xe.y,we.x,we.y,Re.x,Re.y,Ht.x,Ht.y)&&Uo(Ht.prev,Ht,Ht.next)>=0||(Ht=Ht.prevZ,Jt!==w.prev&&Jt!==w.next&&af(xe.x,xe.y,we.x,we.y,Re.x,Re.y,Jt.x,Jt.y)&&Uo(Jt.prev,Jt,Jt.next)>=0))return!1;Jt=Jt.nextZ}for(;Ht&&Ht.z>=Et;){if(Ht!==w.prev&&Ht!==w.next&&af(xe.x,xe.y,we.x,we.y,Re.x,Re.y,Ht.x,Ht.y)&&Uo(Ht.prev,Ht,Ht.next)>=0)return!1;Ht=Ht.prevZ}for(;Jt&&Jt.z<=Ot;){if(Jt!==w.prev&&Jt!==w.next&&af(xe.x,xe.y,we.x,we.y,Re.x,Re.y,Jt.x,Jt.y)&&Uo(Jt.prev,Jt,Jt.next)>=0)return!1;Jt=Jt.nextZ}return!0}function z0(w,O,Z){var ce=w;do{var xe=ce.prev,we=ce.next.next;!fh(xe,we)&&yp(xe,ce,ce.next,we)&&zc(xe,we)&&zc(we,xe)&&(O.push(xe.i/Z),O.push(ce.i/Z),O.push(we.i/Z),Vf(ce),Vf(ce.next),ce=w=we),ce=ce.next}while(ce!==w);return xc(ce)}function O0(w,O,Z,ce,xe,we){var Re=w;do{for(var Ke=Re.next.next;Ke!==Re.prev;){if(Re.i!==Ke.i&&bu(Re,Ke)){var pt=Hh(Re,Ke);return Re=xc(Re,Re.next),pt=xc(pt,pt.next),Bf(Re,O,Z,ce,xe,we),void Bf(pt,O,Z,ce,xe,we)}Ke=Ke.next}Re=Re.next}while(Re!==w)}function Ou(w,O){return w.x-O.x}function F0(w,O){if(O=function(ce,xe){var we,Re=xe,Ke=ce.x,pt=ce.y,Et=-1/0;do{if(pt<=Re.y&&pt>=Re.next.y&&Re.next.y!==Re.y){var Ot=Re.x+(pt-Re.y)*(Re.next.x-Re.x)/(Re.next.y-Re.y);if(Ot<=Ke&&Ot>Et){if(Et=Ot,Ot===Ke){if(pt===Re.y)return Re;if(pt===Re.next.y)return Re.next}we=Re.x<Re.next.x?Re:Re.next}}Re=Re.next}while(Re!==xe);if(!we)return null;if(Ke===Et)return we;var Ht,Jt=we,lr=we.x,Ar=we.y,Sr=1/0;Re=we;do Ke>=Re.x&&Re.x>=lr&&Ke!==Re.x&&af(pt<Ar?Ke:Et,pt,lr,Ar,pt<Ar?Et:Ke,pt,Re.x,Re.y)&&(Ht=Math.abs(pt-Re.y)/(Ke-Re.x),zc(Re,ce)&&(Ht<Sr||Ht===Sr&&(Re.x>we.x||Re.x===we.x&&gp(we,Re)))&&(we=Re,Sr=Ht)),Re=Re.next;while(Re!==Jt);return we}(w,O)){var Z=Hh(O,w);xc(O,O.next),xc(Z,Z.next)}}function gp(w,O){return Uo(w.prev,w,O.prev)<0&&Uo(O.next,w,w.next)<0}function Uf(w,O,Z,ce,xe){return(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w=32767*(w-Z)*xe)|w<<8))|w<<4))|w<<2))|w<<1))|(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-ce)*xe)|O<<8))|O<<4))|O<<2))|O<<1))<<1}function pd(w){var O=w,Z=w;do(O.x<Z.x||O.x===Z.x&&O.y<Z.y)&&(Z=O),O=O.next;while(O!==w);return Z}function af(w,O,Z,ce,xe,we,Re,Ke){return(xe-Re)*(O-Ke)-(w-Re)*(we-Ke)>=0&&(w-Re)*(ce-Ke)-(Z-Re)*(O-Ke)>=0&&(Z-Re)*(we-Ke)-(xe-Re)*(ce-Ke)>=0}function bu(w,O){return w.next.i!==O.i&&w.prev.i!==O.i&&!function(Z,ce){var xe=Z;do{if(xe.i!==Z.i&&xe.next.i!==Z.i&&xe.i!==ce.i&&xe.next.i!==ce.i&&yp(xe,xe.next,Z,ce))return!0;xe=xe.next}while(xe!==Z);return!1}(w,O)&&(zc(w,O)&&zc(O,w)&&function(Z,ce){var xe=Z,we=!1,Re=(Z.x+ce.x)/2,Ke=(Z.y+ce.y)/2;do xe.y>Ke!=xe.next.y>Ke&&xe.next.y!==xe.y&&Re<(xe.next.x-xe.x)*(Ke-xe.y)/(xe.next.y-xe.y)+xe.x&&(we=!we),xe=xe.next;while(xe!==Z);return we}(w,O)&&(Uo(w.prev,w,O.prev)||Uo(w,O.prev,O))||fh(w,O)&&Uo(w.prev,w,w.next)>0&&Uo(O.prev,O,O.next)>0)}function Uo(w,O,Z){return(O.y-w.y)*(Z.x-O.x)-(O.x-w.x)*(Z.y-O.y)}function fh(w,O){return w.x===O.x&&w.y===O.y}function yp(w,O,Z,ce){var xe=hh(Uo(w,O,Z)),we=hh(Uo(w,O,ce)),Re=hh(Uo(Z,ce,w)),Ke=hh(Uo(Z,ce,O));return xe!==we&&Re!==Ke||!(xe!==0||!of(w,Z,O))||!(we!==0||!of(w,ce,O))||!(Re!==0||!of(Z,w,ce))||!(Ke!==0||!of(Z,O,ce))}function of(w,O,Z){return O.x<=Math.max(w.x,Z.x)&&O.x>=Math.min(w.x,Z.x)&&O.y<=Math.max(w.y,Z.y)&&O.y>=Math.min(w.y,Z.y)}function hh(w){return w>0?1:w<0?-1:0}function zc(w,O){return Uo(w.prev,w,w.next)<0?Uo(w,O,w.next)>=0&&Uo(w,w.prev,O)>=0:Uo(w,O,w.prev)<0||Uo(w,w.next,O)<0}function Hh(w,O){var Z=new bc(w.i,w.x,w.y),ce=new bc(O.i,O.x,O.y),xe=w.next,we=O.prev;return w.next=O,O.prev=w,Z.next=xe,xe.prev=Z,ce.next=Z,Z.prev=ce,we.next=ce,ce.prev=we,ce}function xp(w,O,Z,ce){var xe=new bc(w,O,Z);return ce?(xe.next=ce.next,xe.prev=ce,ce.next.prev=xe,ce.next=xe):(xe.prev=xe,xe.next=xe),xe}function Vf(w){w.next.prev=w.prev,w.prev.next=w.next,w.prevZ&&(w.prevZ.nextZ=w.nextZ),w.nextZ&&(w.nextZ.prevZ=w.prevZ)}function bc(w,O,Z){this.i=w,this.x=O,this.y=Z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function dd(w,O,Z,ce){for(var xe=0,we=O,Re=Z-ce;we<Z;we+=ce)xe+=(w[Re]-w[we])*(w[we+1]+w[Re+1]),Re=we;return xe}function sf(w,O,Z,ce,xe){(function we(Re,Ke,pt,Et,Ot){for(;Et>pt;){if(Et-pt>600){var Ht=Et-pt+1,Jt=Ke-pt+1,lr=Math.log(Ht),Ar=.5*Math.exp(2*lr/3),Sr=.5*Math.sqrt(lr*Ar*(Ht-Ar)/Ht)*(Jt-Ht/2<0?-1:1);we(Re,Ke,Math.max(pt,Math.floor(Ke-Jt*Ar/Ht+Sr)),Math.min(Et,Math.floor(Ke+(Ht-Jt)*Ar/Ht+Sr)),Ot)}var Zr=Re[Ke],Br=pt,ln=Et;for(Hf(Re,pt,Ke),Ot(Re[Et],Zr)>0&&Hf(Re,pt,Et);Br<ln;){for(Hf(Re,Br,ln),Br++,ln--;Ot(Re[Br],Zr)<0;)Br++;for(;Ot(Re[ln],Zr)>0;)ln--}Ot(Re[pt],Zr)===0?Hf(Re,pt,ln):Hf(Re,++ln,Et),ln<=Ke&&(pt=ln+1),Ke<=ln&&(Et=ln-1)}})(w,O,Z||0,ce||w.length-1,xe||vd)}function Hf(w,O,Z){var ce=w[O];w[O]=w[Z],w[Z]=ce}function vd(w,O){return w<O?-1:w>O?1:0}function jf(w,O){var Z=w.length;if(Z<=1)return[w];for(var ce,xe,we=[],Re=0;Re<Z;Re++){var Ke=C(w[Re]);Ke!==0&&(w[Re].area=Math.abs(Ke),xe===void 0&&(xe=Ke<0),xe===Ke<0?(ce&&we.push(ce),ce=[w[Re]]):ce.push(w[Re]))}if(ce&&we.push(ce),O>1)for(var pt=0;pt<we.length;pt++)we[pt].length<=O||(sf(we[pt],O,1,we[pt].length-1,sv),we[pt]=we[pt].slice(0,O));return we}function sv(w,O){return O.area-w.area}function lf(w,O,Z){for(var ce=Z.patternDependencies,xe=!1,we=0,Re=O;we<Re.length;we+=1){var Ke=Re[we].paint.get(w+"-pattern");Ke.isConstant()||(xe=!0);var pt=Ke.constantOr(null);pt&&(xe=!0,ce[pt.to]=!0,ce[pt.from]=!0)}return xe}function ph(w,O,Z,ce,xe){for(var we=xe.patternDependencies,Re=0,Ke=O;Re<Ke.length;Re+=1){var pt=Ke[Re],Et=pt.paint.get(w+"-pattern").value;if(Et.kind!=="constant"){var Ot=Et.evaluate({zoom:ce-1},Z,{},xe.availableImages),Ht=Et.evaluate({zoom:ce},Z,{},xe.availableImages),Jt=Et.evaluate({zoom:ce+1},Z,{},xe.availableImages);Ht=Ht&&Ht.name?Ht.name:Ht,Jt=Jt&&Jt.name?Jt.name:Jt,we[Ot=Ot&&Ot.name?Ot.name:Ot]=!0,we[Ht]=!0,we[Jt]=!0,Z.patterns[pt.id]={min:Ot,mid:Ht,max:Jt}}}return Z}ch.deviation=function(w,O,Z,ce){var xe=O&&O.length,we=Math.abs(dd(w,0,xe?O[0]*Z:w.length,Z));if(xe)for(var Re=0,Ke=O.length;Re<Ke;Re++)we-=Math.abs(dd(w,O[Re]*Z,Re<Ke-1?O[Re+1]*Z:w.length,Z));var pt=0;for(Re=0;Re<ce.length;Re+=3){var Et=ce[Re]*Z,Ot=ce[Re+1]*Z,Ht=ce[Re+2]*Z;pt+=Math.abs((w[Et]-w[Ht])*(w[Ot+1]-w[Et+1])-(w[Et]-w[Ot])*(w[Ht+1]-w[Et+1]))}return we===0&&pt===0?0:Math.abs((pt-we)/we)},ch.flatten=function(w){for(var O=w[0][0].length,Z={vertices:[],holes:[],dimensions:O},ce=0,xe=0;xe<w.length;xe++){for(var we=0;we<w[xe].length;we++)for(var Re=0;Re<O;Re++)Z.vertices.push(w[xe][we][Re]);xe>0&&Z.holes.push(ce+=w[xe-1].length)}return Z},Uh.default=I0;var ju=function(w){this.zoom=w.zoom,this.overscaling=w.overscaling,this.layers=w.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=w.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ks,this.indexArray=new Vo,this.indexArray2=new vl,this.programConfigurations=new Na(hd,w.layers,w.zoom),this.segments=new pr,this.segments2=new pr,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};ju.prototype.populate=function(w,O,Z){this.hasPattern=lf("fill",this.layers,O);for(var ce=this.layers[0].layout.get("fill-sort-key"),xe=[],we=0,Re=w;we<Re.length;we+=1){var Ke=Re[we],pt=Ke.feature,Et=Ke.id,Ot=Ke.index,Ht=Ke.sourceLayerIndex,Jt=this.layers[0]._featureFilter.needGeometry,lr={type:pt.type,id:Et,properties:pt.properties,geometry:Jt?ho(pt):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),lr,Z)){Jt||(lr.geometry=ho(pt));var Ar=ce?ce.evaluate(lr,{},Z,O.availableImages):void 0;xe.push({id:Et,properties:pt.properties,type:pt.type,sourceLayerIndex:Ht,index:Ot,geometry:lr.geometry,patterns:{},sortKey:Ar})}}ce&&xe.sort(function(Kn,xa){return Kn.sortKey-xa.sortKey});for(var Sr=0,Zr=xe;Sr<Zr.length;Sr+=1){var Br=Zr[Sr],ln=Br.geometry,mn=Br.index,In=Br.sourceLayerIndex;if(this.hasPattern){var On=ph("fill",this.layers,Br,this.zoom,O);this.patternFeatures.push(On)}else this.addFeature(Br,ln,mn,Z,{});O.featureIndex.insert(w[mn].feature,ln,mn,In,this.index)}},ju.prototype.update=function(w,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(w,O,this.stateDependentLayers,Z)},ju.prototype.addFeatures=function(w,O,Z){for(var ce=0,xe=this.patternFeatures;ce<xe.length;ce+=1){var we=xe[ce];this.addFeature(we,we.geometry,we.index,O,Z)}},ju.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ju.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ju.prototype.upload=function(w){this.uploaded||(this.layoutVertexBuffer=w.createVertexBuffer(this.layoutVertexArray,hd),this.indexBuffer=w.createIndexBuffer(this.indexArray),this.indexBuffer2=w.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(w),this.uploaded=!0},ju.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ju.prototype.addFeature=function(w,O,Z,ce,xe){for(var we=0,Re=jf(O,500);we<Re.length;we+=1){for(var Ke=Re[we],pt=0,Et=0,Ot=Ke;Et<Ot.length;Et+=1)pt+=Ot[Et].length;for(var Ht=this.segments.prepareSegment(pt,this.layoutVertexArray,this.indexArray),Jt=Ht.vertexLength,lr=[],Ar=[],Sr=0,Zr=Ke;Sr<Zr.length;Sr+=1){var Br=Zr[Sr];if(Br.length!==0){Br!==Ke[0]&&Ar.push(lr.length/2);var ln=this.segments2.prepareSegment(Br.length,this.layoutVertexArray,this.indexArray2),mn=ln.vertexLength;this.layoutVertexArray.emplaceBack(Br[0].x,Br[0].y),this.indexArray2.emplaceBack(mn+Br.length-1,mn),lr.push(Br[0].x),lr.push(Br[0].y);for(var In=1;In<Br.length;In++)this.layoutVertexArray.emplaceBack(Br[In].x,Br[In].y),this.indexArray2.emplaceBack(mn+In-1,mn+In),lr.push(Br[In].x),lr.push(Br[In].y);ln.vertexLength+=Br.length,ln.primitiveLength+=Br.length}}for(var On=Uh(lr,Ar),Kn=0;Kn<On.length;Kn+=3)this.indexArray.emplaceBack(Jt+On[Kn],Jt+On[Kn+1],Jt+On[Kn+2]);Ht.vertexLength+=pt,Ht.primitiveLength+=On.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,w,Z,xe,ce)},na("FillBucket",ju,{omit:["layers","patternFeatures"]});var jh=new za({"fill-sort-key":new Ga(Me.layout_fill["fill-sort-key"])}),lv={paint:new za({"fill-antialias":new Ea(Me.paint_fill["fill-antialias"]),"fill-opacity":new Ga(Me.paint_fill["fill-opacity"]),"fill-color":new Ga(Me.paint_fill["fill-color"]),"fill-outline-color":new Ga(Me.paint_fill["fill-outline-color"]),"fill-translate":new Ea(Me.paint_fill["fill-translate"]),"fill-translate-anchor":new Ea(Me.paint_fill["fill-translate-anchor"]),"fill-pattern":new Li(Me.paint_fill["fill-pattern"])}),layout:jh},uv=function(w){function O(Z){w.call(this,Z,lv)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.recalculate=function(Z,ce){w.prototype.recalculate.call(this,Z,ce);var xe=this.paint._values["fill-outline-color"];xe.value.kind==="constant"&&xe.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},O.prototype.createBucket=function(Z){return new ju(Z)},O.prototype.queryRadius=function(){return au(this.paint.get("fill-translate"))},O.prototype.queryIntersectsFeature=function(Z,ce,xe,we,Re,Ke,pt){return ru(Ss(Z,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ke.angle,pt),we)},O.prototype.isTileClipped=function(){return!0},O}(Si),md=Qi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Gl=Ol;function Ol(w,O,Z,ce,xe){this.properties={},this.extent=Z,this.type=0,this._pbf=w,this._geometry=-1,this._keys=ce,this._values=xe,w.readFields(cv,this,O)}function cv(w,O,Z){w==1?O.id=Z.readVarint():w==2?function(ce,xe){for(var we=ce.readVarint()+ce.pos;ce.pos<we;){var Re=xe._keys[ce.readVarint()],Ke=xe._values[ce.readVarint()];xe.properties[Re]=Ke}}(Z,O):w==3?O.type=Z.readVarint():w==4&&(O._geometry=Z.pos)}function dh(w){for(var O,Z,ce=0,xe=0,we=w.length,Re=we-1;xe<we;Re=xe++)ce+=((Z=w[Re]).x-(O=w[xe]).x)*(O.y+Z.y);return ce}Ol.types=["Unknown","Point","LineString","Polygon"],Ol.prototype.loadGeometry=function(){var w=this._pbf;w.pos=this._geometry;for(var O,Z=w.readVarint()+w.pos,ce=1,xe=0,we=0,Re=0,Ke=[];w.pos<Z;){if(xe<=0){var pt=w.readVarint();ce=7&pt,xe=pt>>3}if(xe--,ce===1||ce===2)we+=w.readSVarint(),Re+=w.readSVarint(),ce===1&&(O&&Ke.push(O),O=[]),O.push(new u(we,Re));else{if(ce!==7)throw new Error("unknown command "+ce);O&&O.push(O[0].clone())}}return O&&Ke.push(O),Ke},Ol.prototype.bbox=function(){var w=this._pbf;w.pos=this._geometry;for(var O=w.readVarint()+w.pos,Z=1,ce=0,xe=0,we=0,Re=1/0,Ke=-1/0,pt=1/0,Et=-1/0;w.pos<O;){if(ce<=0){var Ot=w.readVarint();Z=7&Ot,ce=Ot>>3}if(ce--,Z===1||Z===2)(xe+=w.readSVarint())<Re&&(Re=xe),xe>Ke&&(Ke=xe),(we+=w.readSVarint())<pt&&(pt=we),we>Et&&(Et=we);else if(Z!==7)throw new Error("unknown command "+Z)}return[Re,pt,Ke,Et]},Ol.prototype.toGeoJSON=function(w,O,Z){var ce,xe,we=this.extent*Math.pow(2,Z),Re=this.extent*w,Ke=this.extent*O,pt=this.loadGeometry(),Et=Ol.types[this.type];function Ot(lr){for(var Ar=0;Ar<lr.length;Ar++){var Sr=lr[Ar];lr[Ar]=[360*(Sr.x+Re)/we-180,360/Math.PI*Math.atan(Math.exp((180-360*(Sr.y+Ke)/we)*Math.PI/180))-90]}}switch(this.type){case 1:var Ht=[];for(ce=0;ce<pt.length;ce++)Ht[ce]=pt[ce][0];Ot(pt=Ht);break;case 2:for(ce=0;ce<pt.length;ce++)Ot(pt[ce]);break;case 3:for(pt=function(lr){var Ar=lr.length;if(Ar<=1)return[lr];for(var Sr,Zr,Br=[],ln=0;ln<Ar;ln++){var mn=dh(lr[ln]);mn!==0&&(Zr===void 0&&(Zr=mn<0),Zr===mn<0?(Sr&&Br.push(Sr),Sr=[lr[ln]]):Sr.push(lr[ln]))}return Sr&&Br.push(Sr),Br}(pt),ce=0;ce<pt.length;ce++)for(xe=0;xe<pt[ce].length;xe++)Ot(pt[ce][xe])}pt.length===1?pt=pt[0]:Et="Multi"+Et;var Jt={type:"Feature",geometry:{type:Et,coordinates:pt},properties:this.properties};return"id"in this&&(Jt.id=this.id),Jt};var Gf=Oc;function Oc(w,O){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=w,this._keys=[],this._values=[],this._features=[],w.readFields(fv,this,O),this.length=this._features.length}function fv(w,O,Z){w===15?O.version=Z.readVarint():w===1?O.name=Z.readString():w===5?O.extent=Z.readVarint():w===2?O._features.push(Z.pos):w===3?O._keys.push(Z.readString()):w===4&&O._values.push(function(ce){for(var xe=null,we=ce.readVarint()+ce.pos;ce.pos<we;){var Re=ce.readVarint()>>3;xe=Re===1?ce.readString():Re===2?ce.readFloat():Re===3?ce.readDouble():Re===4?ce.readVarint64():Re===5?ce.readVarint():Re===6?ce.readSVarint():Re===7?ce.readBoolean():null}return xe}(Z))}function Gh(w,O,Z){if(w===3){var ce=new Gf(Z,Z.readVarint()+Z.pos);ce.length&&(O[ce.name]=ce)}}Oc.prototype.feature=function(w){if(w<0||w>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[w];var O=this._pbf.readVarint()+this._pbf.pos;return new Gl(this._pbf,O,this.extent,this._keys,this._values)};var vh={VectorTile:function(w,O){this.layers=w.readFields(Gh,{},O)},VectorTileFeature:Gl,VectorTileLayer:Gf},gd=vh.VectorTileFeature.types,Fc=Math.pow(2,13);function Nc(w,O,Z,ce,xe,we,Re,Ke){w.emplaceBack(O,Z,2*Math.floor(ce*Fc)+Re,xe*Fc*2,we*Fc*2,Math.round(Ke))}var Gu=function(w){this.zoom=w.zoom,this.overscaling=w.overscaling,this.layers=w.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=w.index,this.hasPattern=!1,this.layoutVertexArray=new Fo,this.indexArray=new Vo,this.programConfigurations=new Na(md,w.layers,w.zoom),this.segments=new pr,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function Wh(w,O){return w.x===O.x&&(w.x<0||w.x>8192)||w.y===O.y&&(w.y<0||w.y>8192)}Gu.prototype.populate=function(w,O,Z){this.features=[],this.hasPattern=lf("fill-extrusion",this.layers,O);for(var ce=0,xe=w;ce<xe.length;ce+=1){var we=xe[ce],Re=we.feature,Ke=we.id,pt=we.index,Et=we.sourceLayerIndex,Ot=this.layers[0]._featureFilter.needGeometry,Ht={type:Re.type,id:Ke,properties:Re.properties,geometry:Ot?ho(Re):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),Ht,Z)){var Jt={id:Ke,sourceLayerIndex:Et,index:pt,geometry:Ot?Ht.geometry:ho(Re),properties:Re.properties,type:Re.type,patterns:{}};Re.id!==void 0&&(Jt.id=Re.id),this.hasPattern?this.features.push(ph("fill-extrusion",this.layers,Jt,this.zoom,O)):this.addFeature(Jt,Jt.geometry,pt,Z,{}),O.featureIndex.insert(Re,Jt.geometry,pt,Et,this.index,!0)}}},Gu.prototype.addFeatures=function(w,O,Z){for(var ce=0,xe=this.features;ce<xe.length;ce+=1){var we=xe[ce];this.addFeature(we,we.geometry,we.index,O,Z)}},Gu.prototype.update=function(w,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(w,O,this.stateDependentLayers,Z)},Gu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Gu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Gu.prototype.upload=function(w){this.uploaded||(this.layoutVertexBuffer=w.createVertexBuffer(this.layoutVertexArray,md),this.indexBuffer=w.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(w),this.uploaded=!0},Gu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Gu.prototype.addFeature=function(w,O,Z,ce,xe){for(var we=0,Re=jf(O,500);we<Re.length;we+=1){for(var Ke=Re[we],pt=0,Et=0,Ot=Ke;Et<Ot.length;Et+=1)pt+=Ot[Et].length;for(var Ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Jt=0,lr=Ke;Jt<lr.length;Jt+=1){var Ar=lr[Jt];if(Ar.length!==0&&!((Wi=Ar).every(function(Ci){return Ci.x<0})||Wi.every(function(Ci){return Ci.x>8192})||Wi.every(function(Ci){return Ci.y<0})||Wi.every(function(Ci){return Ci.y>8192})))for(var Sr=0,Zr=0;Zr<Ar.length;Zr++){var Br=Ar[Zr];if(Zr>=1){var ln=Ar[Zr-1];if(!Wh(Br,ln)){Ht.vertexLength+4>pr.MAX_VERTEX_ARRAY_LENGTH&&(Ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var mn=Br.sub(ln)._perp()._unit(),In=ln.dist(Br);Sr+In>32768&&(Sr=0),Nc(this.layoutVertexArray,Br.x,Br.y,mn.x,mn.y,0,0,Sr),Nc(this.layoutVertexArray,Br.x,Br.y,mn.x,mn.y,0,1,Sr),Nc(this.layoutVertexArray,ln.x,ln.y,mn.x,mn.y,0,0,Sr+=In),Nc(this.layoutVertexArray,ln.x,ln.y,mn.x,mn.y,0,1,Sr);var On=Ht.vertexLength;this.indexArray.emplaceBack(On,On+2,On+1),this.indexArray.emplaceBack(On+1,On+2,On+3),Ht.vertexLength+=4,Ht.primitiveLength+=2}}}}if(Ht.vertexLength+pt>pr.MAX_VERTEX_ARRAY_LENGTH&&(Ht=this.segments.prepareSegment(pt,this.layoutVertexArray,this.indexArray)),gd[w.type]==="Polygon"){for(var Kn=[],xa=[],Pa=Ht.vertexLength,Ka=0,Ba=Ke;Ka<Ba.length;Ka+=1){var ri=Ba[Ka];if(ri.length!==0){ri!==Ke[0]&&xa.push(Kn.length/2);for(var Oa=0;Oa<ri.length;Oa++){var Oi=ri[Oa];Nc(this.layoutVertexArray,Oi.x,Oi.y,0,0,1,1,0),Kn.push(Oi.x),Kn.push(Oi.y)}}}for(var yi=Uh(Kn,xa),ja=0;ja<yi.length;ja+=3)this.indexArray.emplaceBack(Pa+yi[ja],Pa+yi[ja+2],Pa+yi[ja+1]);Ht.primitiveLength+=yi.length/3,Ht.vertexLength+=pt}}var Wi;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,w,Z,xe,ce)},na("FillExtrusionBucket",Gu,{omit:["layers","features"]});var yd={paint:new za({"fill-extrusion-opacity":new Ea(Me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ga(Me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ea(Me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ea(Me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Li(Me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ga(Me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ga(Me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ea(Me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},bp=function(w){function O(Z){w.call(this,Z,yd)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.createBucket=function(Z){return new Gu(Z)},O.prototype.queryRadius=function(){return au(this.paint.get("fill-extrusion-translate"))},O.prototype.is3D=function(){return!0},O.prototype.queryIntersectsFeature=function(Z,ce,xe,we,Re,Ke,pt,Et){var Ot=Ss(Z,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ke.angle,pt),Ht=this.paint.get("fill-extrusion-height").evaluate(ce,xe),Jt=this.paint.get("fill-extrusion-base").evaluate(ce,xe),lr=function(Sr,Zr,Br,ln){for(var mn=[],In=0,On=Sr;In<On.length;In+=1){var Kn=On[In],xa=[Kn.x,Kn.y,0,1];nc(xa,xa,Zr),mn.push(new u(xa[0]/xa[3],xa[1]/xa[3]))}return mn}(Ot,Et),Ar=function(Sr,Zr,Br,ln){for(var mn=[],In=[],On=ln[8]*Zr,Kn=ln[9]*Zr,xa=ln[10]*Zr,Pa=ln[11]*Zr,Ka=ln[8]*Br,Ba=ln[9]*Br,ri=ln[10]*Br,Oa=ln[11]*Br,Oi=0,yi=Sr;Oi<yi.length;Oi+=1){for(var ja=[],Wi=[],Ci=0,oo=yi[Oi];Ci<oo.length;Ci+=1){var $a=oo[Ci],po=$a.x,Ho=$a.y,nl=ln[0]*po+ln[4]*Ho+ln[12],al=ln[1]*po+ln[5]*Ho+ln[13],Zo=ln[2]*po+ln[6]*Ho+ln[14],gs=ln[3]*po+ln[7]*Ho+ln[15],Io=Zo+xa,Us=gs+Pa,Kl=nl+Ka,Vs=al+Ba,$l=Zo+ri,Hs=gs+Oa,js=new u((nl+On)/Us,(al+Kn)/Us);js.z=Io/Us,ja.push(js);var qi=new u(Kl/Hs,Vs/Hs);qi.z=$l/Hs,Wi.push(qi)}mn.push(ja),In.push(Wi)}return[mn,In]}(we,Jt,Ht,Et);return function(Sr,Zr,Br){var ln=1/0;ru(Br,Zr)&&(ln=Yh(Br,Zr[0]));for(var mn=0;mn<Zr.length;mn++)for(var In=Zr[mn],On=Sr[mn],Kn=0;Kn<In.length-1;Kn++){var xa=In[Kn],Pa=[xa,In[Kn+1],On[Kn+1],On[Kn],xa];xu(Br,Pa)&&(ln=Math.min(ln,Yh(Br,Pa)))}return ln!==1/0&&ln}(Ar[0],Ar[1],lr)},O}(Si);function mh(w,O){return w.x*O.x+w.y*O.y}function Yh(w,O){if(w.length===1){for(var Z,ce=0,xe=O[ce++];!Z||xe.equals(Z);)if(!(Z=O[ce++]))return 1/0;for(;ce<O.length;ce++){var we=O[ce],Re=w[0],Ke=Z.sub(xe),pt=we.sub(xe),Et=Re.sub(xe),Ot=mh(Ke,Ke),Ht=mh(Ke,pt),Jt=mh(pt,pt),lr=mh(Et,Ke),Ar=mh(Et,pt),Sr=Ot*Jt-Ht*Ht,Zr=(Jt*lr-Ht*Ar)/Sr,Br=(Ot*Ar-Ht*lr)/Sr,ln=xe.z*(1-Zr-Br)+Z.z*Zr+we.z*Br;if(isFinite(ln))return ln}return 1/0}for(var mn=1/0,In=0,On=O;In<On.length;In+=1)mn=Math.min(mn,On[In].z);return mn}var _p=Qi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Xh=vh.VectorTileFeature.types,hv=Math.cos(Math.PI/180*37.5),wp=Math.pow(2,14)/.5,qs=function(w){this.zoom=w.zoom,this.overscaling=w.overscaling,this.layers=w.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=w.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new fo,this.indexArray=new Vo,this.programConfigurations=new Na(_p,w.layers,w.zoom),this.segments=new pr,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};qs.prototype.populate=function(w,O,Z){this.hasPattern=lf("line",this.layers,O);for(var ce=this.layers[0].layout.get("line-sort-key"),xe=[],we=0,Re=w;we<Re.length;we+=1){var Ke=Re[we],pt=Ke.feature,Et=Ke.id,Ot=Ke.index,Ht=Ke.sourceLayerIndex,Jt=this.layers[0]._featureFilter.needGeometry,lr={type:pt.type,id:Et,properties:pt.properties,geometry:Jt?ho(pt):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),lr,Z)){Jt||(lr.geometry=ho(pt));var Ar=ce?ce.evaluate(lr,{},Z):void 0;xe.push({id:Et,properties:pt.properties,type:pt.type,sourceLayerIndex:Ht,index:Ot,geometry:lr.geometry,patterns:{},sortKey:Ar})}}ce&&xe.sort(function(Kn,xa){return Kn.sortKey-xa.sortKey});for(var Sr=0,Zr=xe;Sr<Zr.length;Sr+=1){var Br=Zr[Sr],ln=Br.geometry,mn=Br.index,In=Br.sourceLayerIndex;if(this.hasPattern){var On=ph("line",this.layers,Br,this.zoom,O);this.patternFeatures.push(On)}else this.addFeature(Br,ln,mn,Z,{});O.featureIndex.insert(w[mn].feature,ln,mn,In,this.index)}},qs.prototype.update=function(w,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(w,O,this.stateDependentLayers,Z)},qs.prototype.addFeatures=function(w,O,Z){for(var ce=0,xe=this.patternFeatures;ce<xe.length;ce+=1){var we=xe[ce];this.addFeature(we,we.geometry,we.index,O,Z)}},qs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},qs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qs.prototype.upload=function(w){this.uploaded||(this.layoutVertexBuffer=w.createVertexBuffer(this.layoutVertexArray,_p),this.indexBuffer=w.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(w),this.uploaded=!0},qs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},qs.prototype.addFeature=function(w,O,Z,ce,xe){for(var we=this.layers[0].layout,Re=we.get("line-join").evaluate(w,{}),Ke=we.get("line-cap"),pt=we.get("line-miter-limit"),Et=we.get("line-round-limit"),Ot=0,Ht=O;Ot<Ht.length;Ot+=1)this.addLine(Ht[Ot],w,Re,Ke,pt,Et);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,w,Z,xe,ce)},qs.prototype.addLine=function(w,O,Z,ce,xe,we){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,O.properties&&O.properties.hasOwnProperty("mapbox_clip_start")&&O.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+O.properties.mapbox_clip_start,this.clipEnd=+O.properties.mapbox_clip_end;for(var Re=0;Re<w.length-1;Re++)this.totalDistance+=w[Re].dist(w[Re+1]);this.updateScaledDistance()}for(var Ke=Xh[O.type]==="Polygon",pt=w.length;pt>=2&&w[pt-1].equals(w[pt-2]);)pt--;for(var Et=0;Et<pt-1&&w[Et].equals(w[Et+1]);)Et++;if(!(pt<(Ke?3:2))){Z==="bevel"&&(xe=1.05);var Ot,Ht=this.overscaling<=16?122880/(512*this.overscaling):0,Jt=this.segments.prepareSegment(10*pt,this.layoutVertexArray,this.indexArray),lr=void 0,Ar=void 0,Sr=void 0,Zr=void 0;this.e1=this.e2=-1,Ke&&(Zr=w[Et].sub(Ot=w[pt-2])._unit()._perp());for(var Br=Et;Br<pt;Br++)if(!(Ar=Br===pt-1?Ke?w[Et+1]:void 0:w[Br+1])||!w[Br].equals(Ar)){Zr&&(Sr=Zr),Ot&&(lr=Ot),Ot=w[Br],Zr=Ar?Ar.sub(Ot)._unit()._perp():Sr;var ln=(Sr=Sr||Zr).add(Zr);ln.x===0&&ln.y===0||ln._unit();var mn=Sr.x*Zr.x+Sr.y*Zr.y,In=ln.x*Zr.x+ln.y*Zr.y,On=In!==0?1/In:1/0,Kn=2*Math.sqrt(2-2*In),xa=In<hv&&lr&&Ar,Pa=Sr.x*Zr.y-Sr.y*Zr.x>0;if(xa&&Br>Et){var Ka=Ot.dist(lr);if(Ka>2*Ht){var Ba=Ot.sub(Ot.sub(lr)._mult(Ht/Ka)._round());this.updateDistance(lr,Ba),this.addCurrentVertex(Ba,Sr,0,0,Jt),lr=Ba}}var ri=lr&&Ar,Oa=ri?Z:Ke?"butt":ce;if(ri&&Oa==="round"&&(On<we?Oa="miter":On<=2&&(Oa="fakeround")),Oa==="miter"&&On>xe&&(Oa="bevel"),Oa==="bevel"&&(On>2&&(Oa="flipbevel"),On<xe&&(Oa="miter")),lr&&this.updateDistance(lr,Ot),Oa==="miter")ln._mult(On),this.addCurrentVertex(Ot,ln,0,0,Jt);else if(Oa==="flipbevel"){if(On>100)ln=Zr.mult(-1);else{var Oi=On*Sr.add(Zr).mag()/Sr.sub(Zr).mag();ln._perp()._mult(Oi*(Pa?-1:1))}this.addCurrentVertex(Ot,ln,0,0,Jt),this.addCurrentVertex(Ot,ln.mult(-1),0,0,Jt)}else if(Oa==="bevel"||Oa==="fakeround"){var yi=-Math.sqrt(On*On-1),ja=Pa?yi:0,Wi=Pa?0:yi;if(lr&&this.addCurrentVertex(Ot,Sr,ja,Wi,Jt),Oa==="fakeround")for(var Ci=Math.round(180*Kn/Math.PI/20),oo=1;oo<Ci;oo++){var $a=oo/Ci;if($a!==.5){var po=$a-.5;$a+=$a*po*($a-1)*((1.0904+mn*(mn*(3.55645-1.43519*mn)-3.2452))*po*po+(.848013+mn*(.215638*mn-1.06021)))}var Ho=Zr.sub(Sr)._mult($a)._add(Sr)._unit()._mult(Pa?-1:1);this.addHalfVertex(Ot,Ho.x,Ho.y,!1,Pa,0,Jt)}Ar&&this.addCurrentVertex(Ot,Zr,-ja,-Wi,Jt)}else if(Oa==="butt")this.addCurrentVertex(Ot,ln,0,0,Jt);else if(Oa==="square"){var nl=lr?1:-1;this.addCurrentVertex(Ot,ln,nl,nl,Jt)}else Oa==="round"&&(lr&&(this.addCurrentVertex(Ot,Sr,0,0,Jt),this.addCurrentVertex(Ot,Sr,1,1,Jt,!0)),Ar&&(this.addCurrentVertex(Ot,Zr,-1,-1,Jt,!0),this.addCurrentVertex(Ot,Zr,0,0,Jt)));if(xa&&Br<pt-1){var al=Ot.dist(Ar);if(al>2*Ht){var Zo=Ot.add(Ar.sub(Ot)._mult(Ht/al)._round());this.updateDistance(Ot,Zo),this.addCurrentVertex(Zo,Zr,0,0,Jt),Ot=Zo}}}}},qs.prototype.addCurrentVertex=function(w,O,Z,ce,xe,we){we===void 0&&(we=!1);var Re=O.y*ce-O.x,Ke=-O.y-O.x*ce;this.addHalfVertex(w,O.x+O.y*Z,O.y-O.x*Z,we,!1,Z,xe),this.addHalfVertex(w,Re,Ke,we,!0,-ce,xe),this.distance>wp/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(w,O,Z,ce,xe,we))},qs.prototype.addHalfVertex=function(w,O,Z,ce,xe,we,Re){var Ke=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((w.x<<1)+(ce?1:0),(w.y<<1)+(xe?1:0),Math.round(63*O)+128,Math.round(63*Z)+128,1+(we===0?0:we<0?-1:1)|(63&Ke)<<2,Ke>>6);var pt=Re.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,pt),Re.primitiveLength++),xe?this.e2=pt:this.e1=pt},qs.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(wp-1):this.distance},qs.prototype.updateDistance=function(w,O){this.distance+=w.dist(O),this.updateScaledDistance()},na("LineBucket",qs,{omit:["layers","patternFeatures"]});var pv=new za({"line-cap":new Ea(Me.layout_line["line-cap"]),"line-join":new Ga(Me.layout_line["line-join"]),"line-miter-limit":new Ea(Me.layout_line["line-miter-limit"]),"line-round-limit":new Ea(Me.layout_line["line-round-limit"]),"line-sort-key":new Ga(Me.layout_line["line-sort-key"])}),Wf={paint:new za({"line-opacity":new Ga(Me.paint_line["line-opacity"]),"line-color":new Ga(Me.paint_line["line-color"]),"line-translate":new Ea(Me.paint_line["line-translate"]),"line-translate-anchor":new Ea(Me.paint_line["line-translate-anchor"]),"line-width":new Ga(Me.paint_line["line-width"]),"line-gap-width":new Ga(Me.paint_line["line-gap-width"]),"line-offset":new Ga(Me.paint_line["line-offset"]),"line-blur":new Ga(Me.paint_line["line-blur"]),"line-dasharray":new Mi(Me.paint_line["line-dasharray"]),"line-pattern":new Li(Me.paint_line["line-pattern"]),"line-gradient":new Qn(Me.paint_line["line-gradient"])}),layout:pv},dv=new(function(w){function O(){w.apply(this,arguments)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.possiblyEvaluate=function(Z,ce){return ce=new ni(Math.floor(ce.zoom),{now:ce.now,fadeDuration:ce.fadeDuration,zoomHistory:ce.zoomHistory,transition:ce.transition}),w.prototype.possiblyEvaluate.call(this,Z,ce)},O.prototype.evaluate=function(Z,ce,xe,we){return ce=y({},ce,{zoom:Math.floor(ce.zoom)}),w.prototype.evaluate.call(this,Z,ce,xe,we)},O}(Ga))(Wf.paint.properties["line-width"].specification);dv.useIntegerZoom=!0;var vv=function(w){function O(Z){w.call(this,Z,Wf)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype._handleSpecialPaintPropertyUpdate=function(Z){Z==="line-gradient"&&this._updateGradient()},O.prototype._updateGradient=function(){this.gradient=av(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},O.prototype.recalculate=function(Z,ce){w.prototype.recalculate.call(this,Z,ce),this.paint._values["line-floorwidth"]=dv.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Z)},O.prototype.createBucket=function(Z){return new qs(Z)},O.prototype.queryRadius=function(Z){var ce=Z,xe=ac(gc("line-width",this,ce),gc("line-gap-width",this,ce)),we=gc("line-offset",this,ce);return xe/2+Math.abs(we)+au(this.paint.get("line-translate"))},O.prototype.queryIntersectsFeature=function(Z,ce,xe,we,Re,Ke,pt){var Et=Ss(Z,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ke.angle,pt),Ot=pt/2*ac(this.paint.get("line-width").evaluate(ce,xe),this.paint.get("line-gap-width").evaluate(ce,xe)),Ht=this.paint.get("line-offset").evaluate(ce,xe);return Ht&&(we=function(Jt,lr){for(var Ar=[],Sr=new u(0,0),Zr=0;Zr<Jt.length;Zr++){for(var Br=Jt[Zr],ln=[],mn=0;mn<Br.length;mn++){var In=Br[mn],On=Br[mn+1],Kn=mn===0?Sr:In.sub(Br[mn-1])._unit()._perp(),xa=mn===Br.length-1?Sr:On.sub(In)._unit()._perp(),Pa=Kn._add(xa)._unit();Pa._mult(1/(Pa.x*xa.x+Pa.y*xa.y)),ln.push(Pa._mult(lr)._add(In))}Ar.push(ln)}return Ar}(we,Ht*pt)),function(Jt,lr,Ar){for(var Sr=0;Sr<lr.length;Sr++){var Zr=lr[Sr];if(Jt.length>=3){for(var Br=0;Br<Zr.length;Br++)if(zu(Jt,Zr[Br]))return!0}if(Al(Jt,Zr,Ar))return!0}return!1}(Et,we,Ot)},O.prototype.isTileClipped=function(){return!0},O}(Si);function ac(w,O){return O>0?O+2*w:w}var Zh=Qi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mv=Qi([{name:"a_projected_pos",components:3,type:"Float32"}],4),Tp=(Qi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Qi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),gh=(Qi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Qi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),gv=Qi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function xd(w,O,Z){return w.sections.forEach(function(ce){ce.text=function(xe,we,Re){var Ke=we.layout.get("text-transform").evaluate(Re,{});return Ke==="uppercase"?xe=xe.toLocaleUpperCase():Ke==="lowercase"&&(xe=xe.toLocaleLowerCase()),xo.applyArabicShaping&&(xe=xo.applyArabicShaping(xe)),xe}(ce.text,O,Z)}),w}Qi([{name:"triangle",components:3,type:"Uint16"}]),Qi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Qi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Qi([{type:"Float32",name:"offsetX"}]),Qi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Es={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Kh=function(w,O,Z,ce,xe){var we,Re,Ke=8*xe-ce-1,pt=(1<<Ke)-1,Et=pt>>1,Ot=-7,Ht=Z?xe-1:0,Jt=Z?-1:1,lr=w[O+Ht];for(Ht+=Jt,we=lr&(1<<-Ot)-1,lr>>=-Ot,Ot+=Ke;Ot>0;we=256*we+w[O+Ht],Ht+=Jt,Ot-=8);for(Re=we&(1<<-Ot)-1,we>>=-Ot,Ot+=ce;Ot>0;Re=256*Re+w[O+Ht],Ht+=Jt,Ot-=8);if(we===0)we=1-Et;else{if(we===pt)return Re?NaN:1/0*(lr?-1:1);Re+=Math.pow(2,ce),we-=Et}return(lr?-1:1)*Re*Math.pow(2,we-ce)},Ap=function(w,O,Z,ce,xe,we){var Re,Ke,pt,Et=8*we-xe-1,Ot=(1<<Et)-1,Ht=Ot>>1,Jt=xe===23?Math.pow(2,-24)-Math.pow(2,-77):0,lr=ce?0:we-1,Ar=ce?1:-1,Sr=O<0||O===0&&1/O<0?1:0;for(O=Math.abs(O),isNaN(O)||O===1/0?(Ke=isNaN(O)?1:0,Re=Ot):(Re=Math.floor(Math.log(O)/Math.LN2),O*(pt=Math.pow(2,-Re))<1&&(Re--,pt*=2),(O+=Re+Ht>=1?Jt/pt:Jt*Math.pow(2,1-Ht))*pt>=2&&(Re++,pt/=2),Re+Ht>=Ot?(Ke=0,Re=Ot):Re+Ht>=1?(Ke=(O*pt-1)*Math.pow(2,xe),Re+=Ht):(Ke=O*Math.pow(2,Ht-1)*Math.pow(2,xe),Re=0));xe>=8;w[Z+lr]=255&Ke,lr+=Ar,Ke/=256,xe-=8);for(Re=Re<<xe|Ke,Et+=xe;Et>0;w[Z+lr]=255&Re,lr+=Ar,Re/=256,Et-=8);w[Z+lr-Ar]|=128*Sr},uf=vo;function vo(w){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(w)?w:new Uint8Array(w||0),this.pos=0,this.type=0,this.length=this.buf.length}vo.Varint=0,vo.Fixed64=1,vo.Bytes=2,vo.Fixed32=5;var Yf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function bi(w){return w.type===vo.Bytes?w.readVarint()+w.pos:w.pos+1}function Bc(w,O,Z){return Z?4294967296*O+(w>>>0):4294967296*(O>>>0)+(w>>>0)}function Xf(w,O,Z){var ce=O<=16383?1:O<=2097151?2:O<=268435455?3:Math.floor(Math.log(O)/(7*Math.LN2));Z.realloc(ce);for(var xe=Z.pos-1;xe>=w;xe--)Z.buf[xe+ce]=Z.buf[xe]}function Uc(w,O){for(var Z=0;Z<w.length;Z++)O.writeVarint(w[Z])}function yv(w,O){for(var Z=0;Z<w.length;Z++)O.writeSVarint(w[Z])}function bd(w,O){for(var Z=0;Z<w.length;Z++)O.writeFloat(w[Z])}function xv(w,O){for(var Z=0;Z<w.length;Z++)O.writeDouble(w[Z])}function Wl(w,O){for(var Z=0;Z<w.length;Z++)O.writeBoolean(w[Z])}function Wu(w,O){for(var Z=0;Z<w.length;Z++)O.writeFixed32(w[Z])}function bv(w,O){for(var Z=0;Z<w.length;Z++)O.writeSFixed32(w[Z])}function _d(w,O){for(var Z=0;Z<w.length;Z++)O.writeFixed64(w[Z])}function cf(w,O){for(var Z=0;Z<w.length;Z++)O.writeSFixed64(w[Z])}function Zf(w,O){return(w[O]|w[O+1]<<8|w[O+2]<<16)+16777216*w[O+3]}function ff(w,O,Z){w[Z]=O,w[Z+1]=O>>>8,w[Z+2]=O>>>16,w[Z+3]=O>>>24}function _v(w,O){return(w[O]|w[O+1]<<8|w[O+2]<<16)+(w[O+3]<<24)}function N0(w,O,Z){w===1&&Z.readMessage(Vc,O)}function Vc(w,O,Z){if(w===3){var ce=Z.readMessage(Yl,{}),xe=ce.width,we=ce.height,Re=ce.left,Ke=ce.top,pt=ce.advance;O.push({id:ce.id,bitmap:new ou({width:xe+6,height:we+6},ce.bitmap),metrics:{width:xe,height:we,left:Re,top:Ke,advance:pt}})}}function Yl(w,O,Z){w===1?O.id=Z.readVarint():w===2?O.bitmap=Z.readBytes():w===3?O.width=Z.readVarint():w===4?O.height=Z.readVarint():w===5?O.left=Z.readSVarint():w===6?O.top=Z.readSVarint():w===7&&(O.advance=Z.readVarint())}function $h(w){for(var O=0,Z=0,ce=0,xe=w;ce<xe.length;ce+=1){var we=xe[ce];O+=we.w*we.h,Z=Math.max(Z,we.w)}w.sort(function(Sr,Zr){return Zr.h-Sr.h});for(var Re=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(O/.95)),Z),h:1/0}],Ke=0,pt=0,Et=0,Ot=w;Et<Ot.length;Et+=1)for(var Ht=Ot[Et],Jt=Re.length-1;Jt>=0;Jt--){var lr=Re[Jt];if(!(Ht.w>lr.w||Ht.h>lr.h)){if(Ht.x=lr.x,Ht.y=lr.y,pt=Math.max(pt,Ht.y+Ht.h),Ke=Math.max(Ke,Ht.x+Ht.w),Ht.w===lr.w&&Ht.h===lr.h){var Ar=Re.pop();Jt<Re.length&&(Re[Jt]=Ar)}else Ht.h===lr.h?(lr.x+=Ht.w,lr.w-=Ht.w):Ht.w===lr.w?(lr.y+=Ht.h,lr.h-=Ht.h):(Re.push({x:lr.x+Ht.w,y:lr.y,w:lr.w-Ht.w,h:Ht.h}),lr.y+=Ht.h,lr.h-=Ht.h);break}}return{w:Ke,h:pt,fill:O/(Ke*pt)||0}}vo.prototype={destroy:function(){this.buf=null},readFields:function(w,O,Z){for(Z=Z||this.length;this.pos<Z;){var ce=this.readVarint(),xe=ce>>3,we=this.pos;this.type=7&ce,w(xe,O,this),this.pos===we&&this.skip(ce)}return O},readMessage:function(w,O){return this.readFields(w,O,this.readVarint()+this.pos)},readFixed32:function(){var w=Zf(this.buf,this.pos);return this.pos+=4,w},readSFixed32:function(){var w=_v(this.buf,this.pos);return this.pos+=4,w},readFixed64:function(){var w=Zf(this.buf,this.pos)+4294967296*Zf(this.buf,this.pos+4);return this.pos+=8,w},readSFixed64:function(){var w=Zf(this.buf,this.pos)+4294967296*_v(this.buf,this.pos+4);return this.pos+=8,w},readFloat:function(){var w=Kh(this.buf,this.pos,!0,23,4);return this.pos+=4,w},readDouble:function(){var w=Kh(this.buf,this.pos,!0,52,8);return this.pos+=8,w},readVarint:function(w){var O,Z,ce=this.buf;return O=127&(Z=ce[this.pos++]),Z<128?O:(O|=(127&(Z=ce[this.pos++]))<<7,Z<128?O:(O|=(127&(Z=ce[this.pos++]))<<14,Z<128?O:(O|=(127&(Z=ce[this.pos++]))<<21,Z<128?O:function(xe,we,Re){var Ke,pt,Et=Re.buf;if(Ke=(112&(pt=Et[Re.pos++]))>>4,pt<128||(Ke|=(127&(pt=Et[Re.pos++]))<<3,pt<128)||(Ke|=(127&(pt=Et[Re.pos++]))<<10,pt<128)||(Ke|=(127&(pt=Et[Re.pos++]))<<17,pt<128)||(Ke|=(127&(pt=Et[Re.pos++]))<<24,pt<128)||(Ke|=(1&(pt=Et[Re.pos++]))<<31,pt<128))return Bc(xe,Ke,we);throw new Error("Expected varint not more than 10 bytes")}(O|=(15&(Z=ce[this.pos]))<<28,w,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var w=this.readVarint();return w%2==1?(w+1)/-2:w/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var w=this.readVarint()+this.pos,O=this.pos;return this.pos=w,w-O>=12&&Yf?function(Z,ce,xe){return Yf.decode(Z.subarray(ce,xe))}(this.buf,O,w):function(Z,ce,xe){for(var we="",Re=ce;Re<xe;){var Ke,pt,Et,Ot=Z[Re],Ht=null,Jt=Ot>239?4:Ot>223?3:Ot>191?2:1;if(Re+Jt>xe)break;Jt===1?Ot<128&&(Ht=Ot):Jt===2?(192&(Ke=Z[Re+1]))==128&&(Ht=(31&Ot)<<6|63&Ke)<=127&&(Ht=null):Jt===3?(pt=Z[Re+2],(192&(Ke=Z[Re+1]))==128&&(192&pt)==128&&((Ht=(15&Ot)<<12|(63&Ke)<<6|63&pt)<=2047||Ht>=55296&&Ht<=57343)&&(Ht=null)):Jt===4&&(pt=Z[Re+2],Et=Z[Re+3],(192&(Ke=Z[Re+1]))==128&&(192&pt)==128&&(192&Et)==128&&((Ht=(15&Ot)<<18|(63&Ke)<<12|(63&pt)<<6|63&Et)<=65535||Ht>=1114112)&&(Ht=null)),Ht===null?(Ht=65533,Jt=1):Ht>65535&&(Ht-=65536,we+=String.fromCharCode(Ht>>>10&1023|55296),Ht=56320|1023&Ht),we+=String.fromCharCode(Ht),Re+=Jt}return we}(this.buf,O,w)},readBytes:function(){var w=this.readVarint()+this.pos,O=this.buf.subarray(this.pos,w);return this.pos=w,O},readPackedVarint:function(w,O){if(this.type!==vo.Bytes)return w.push(this.readVarint(O));var Z=bi(this);for(w=w||[];this.pos<Z;)w.push(this.readVarint(O));return w},readPackedSVarint:function(w){if(this.type!==vo.Bytes)return w.push(this.readSVarint());var O=bi(this);for(w=w||[];this.pos<O;)w.push(this.readSVarint());return w},readPackedBoolean:function(w){if(this.type!==vo.Bytes)return w.push(this.readBoolean());var O=bi(this);for(w=w||[];this.pos<O;)w.push(this.readBoolean());return w},readPackedFloat:function(w){if(this.type!==vo.Bytes)return w.push(this.readFloat());var O=bi(this);for(w=w||[];this.pos<O;)w.push(this.readFloat());return w},readPackedDouble:function(w){if(this.type!==vo.Bytes)return w.push(this.readDouble());var O=bi(this);for(w=w||[];this.pos<O;)w.push(this.readDouble());return w},readPackedFixed32:function(w){if(this.type!==vo.Bytes)return w.push(this.readFixed32());var O=bi(this);for(w=w||[];this.pos<O;)w.push(this.readFixed32());return w},readPackedSFixed32:function(w){if(this.type!==vo.Bytes)return w.push(this.readSFixed32());var O=bi(this);for(w=w||[];this.pos<O;)w.push(this.readSFixed32());return w},readPackedFixed64:function(w){if(this.type!==vo.Bytes)return w.push(this.readFixed64());var O=bi(this);for(w=w||[];this.pos<O;)w.push(this.readFixed64());return w},readPackedSFixed64:function(w){if(this.type!==vo.Bytes)return w.push(this.readSFixed64());var O=bi(this);for(w=w||[];this.pos<O;)w.push(this.readSFixed64());return w},skip:function(w){var O=7&w;if(O===vo.Varint)for(;this.buf[this.pos++]>127;);else if(O===vo.Bytes)this.pos=this.readVarint()+this.pos;else if(O===vo.Fixed32)this.pos+=4;else{if(O!==vo.Fixed64)throw new Error("Unimplemented type: "+O);this.pos+=8}},writeTag:function(w,O){this.writeVarint(w<<3|O)},realloc:function(w){for(var O=this.length||16;O<this.pos+w;)O*=2;if(O!==this.length){var Z=new Uint8Array(O);Z.set(this.buf),this.buf=Z,this.length=O}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(w){this.realloc(4),ff(this.buf,w,this.pos),this.pos+=4},writeSFixed32:function(w){this.realloc(4),ff(this.buf,w,this.pos),this.pos+=4},writeFixed64:function(w){this.realloc(8),ff(this.buf,-1&w,this.pos),ff(this.buf,Math.floor(w*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(w){this.realloc(8),ff(this.buf,-1&w,this.pos),ff(this.buf,Math.floor(w*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(w){(w=+w||0)>268435455||w<0?function(O,Z){var ce,xe;if(O>=0?(ce=O%4294967296|0,xe=O/4294967296|0):(xe=~(-O/4294967296),4294967295^(ce=~(-O%4294967296))?ce=ce+1|0:(ce=0,xe=xe+1|0)),O>=18446744073709552e3||O<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Z.realloc(10),function(we,Re,Ke){Ke.buf[Ke.pos++]=127&we|128,we>>>=7,Ke.buf[Ke.pos++]=127&we|128,we>>>=7,Ke.buf[Ke.pos++]=127&we|128,we>>>=7,Ke.buf[Ke.pos++]=127&we|128,Ke.buf[Ke.pos]=127&(we>>>=7)}(ce,0,Z),function(we,Re){var Ke=(7&we)<<4;Re.buf[Re.pos++]|=Ke|((we>>>=3)?128:0),we&&(Re.buf[Re.pos++]=127&we|((we>>>=7)?128:0),we&&(Re.buf[Re.pos++]=127&we|((we>>>=7)?128:0),we&&(Re.buf[Re.pos++]=127&we|((we>>>=7)?128:0),we&&(Re.buf[Re.pos++]=127&we|((we>>>=7)?128:0),we&&(Re.buf[Re.pos++]=127&we)))))}(xe,Z)}(w,this):(this.realloc(4),this.buf[this.pos++]=127&w|(w>127?128:0),w<=127||(this.buf[this.pos++]=127&(w>>>=7)|(w>127?128:0),w<=127||(this.buf[this.pos++]=127&(w>>>=7)|(w>127?128:0),w<=127||(this.buf[this.pos++]=w>>>7&127))))},writeSVarint:function(w){this.writeVarint(w<0?2*-w-1:2*w)},writeBoolean:function(w){this.writeVarint(!!w)},writeString:function(w){w=String(w),this.realloc(4*w.length),this.pos++;var O=this.pos;this.pos=function(ce,xe,we){for(var Re,Ke,pt=0;pt<xe.length;pt++){if((Re=xe.charCodeAt(pt))>55295&&Re<57344){if(!Ke){Re>56319||pt+1===xe.length?(ce[we++]=239,ce[we++]=191,ce[we++]=189):Ke=Re;continue}if(Re<56320){ce[we++]=239,ce[we++]=191,ce[we++]=189,Ke=Re;continue}Re=Ke-55296<<10|Re-56320|65536,Ke=null}else Ke&&(ce[we++]=239,ce[we++]=191,ce[we++]=189,Ke=null);Re<128?ce[we++]=Re:(Re<2048?ce[we++]=Re>>6|192:(Re<65536?ce[we++]=Re>>12|224:(ce[we++]=Re>>18|240,ce[we++]=Re>>12&63|128),ce[we++]=Re>>6&63|128),ce[we++]=63&Re|128)}return we}(this.buf,w,this.pos);var Z=this.pos-O;Z>=128&&Xf(O,Z,this),this.pos=O-1,this.writeVarint(Z),this.pos+=Z},writeFloat:function(w){this.realloc(4),Ap(this.buf,w,this.pos,!0,23,4),this.pos+=4},writeDouble:function(w){this.realloc(8),Ap(this.buf,w,this.pos,!0,52,8),this.pos+=8},writeBytes:function(w){var O=w.length;this.writeVarint(O),this.realloc(O);for(var Z=0;Z<O;Z++)this.buf[this.pos++]=w[Z]},writeRawMessage:function(w,O){this.pos++;var Z=this.pos;w(O,this);var ce=this.pos-Z;ce>=128&&Xf(Z,ce,this),this.pos=Z-1,this.writeVarint(ce),this.pos+=ce},writeMessage:function(w,O,Z){this.writeTag(w,vo.Bytes),this.writeRawMessage(O,Z)},writePackedVarint:function(w,O){O.length&&this.writeMessage(w,Uc,O)},writePackedSVarint:function(w,O){O.length&&this.writeMessage(w,yv,O)},writePackedBoolean:function(w,O){O.length&&this.writeMessage(w,Wl,O)},writePackedFloat:function(w,O){O.length&&this.writeMessage(w,bd,O)},writePackedDouble:function(w,O){O.length&&this.writeMessage(w,xv,O)},writePackedFixed32:function(w,O){O.length&&this.writeMessage(w,Wu,O)},writePackedSFixed32:function(w,O){O.length&&this.writeMessage(w,bv,O)},writePackedFixed64:function(w,O){O.length&&this.writeMessage(w,_d,O)},writePackedSFixed64:function(w,O){O.length&&this.writeMessage(w,cf,O)},writeBytesField:function(w,O){this.writeTag(w,vo.Bytes),this.writeBytes(O)},writeFixed32Field:function(w,O){this.writeTag(w,vo.Fixed32),this.writeFixed32(O)},writeSFixed32Field:function(w,O){this.writeTag(w,vo.Fixed32),this.writeSFixed32(O)},writeFixed64Field:function(w,O){this.writeTag(w,vo.Fixed64),this.writeFixed64(O)},writeSFixed64Field:function(w,O){this.writeTag(w,vo.Fixed64),this.writeSFixed64(O)},writeVarintField:function(w,O){this.writeTag(w,vo.Varint),this.writeVarint(O)},writeSVarintField:function(w,O){this.writeTag(w,vo.Varint),this.writeSVarint(O)},writeStringField:function(w,O){this.writeTag(w,vo.Bytes),this.writeString(O)},writeFloatField:function(w,O){this.writeTag(w,vo.Fixed32),this.writeFloat(O)},writeDoubleField:function(w,O){this.writeTag(w,vo.Fixed64),this.writeDouble(O)},writeBooleanField:function(w,O){this.writeVarintField(w,!!O)}};var kp=function(w,O){var Z=O.pixelRatio,ce=O.version,xe=O.stretchX,we=O.stretchY,Re=O.content;this.paddedRect=w,this.pixelRatio=Z,this.stretchX=xe,this.stretchY=we,this.content=Re,this.version=ce},hf={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};hf.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},hf.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},hf.tlbr.get=function(){return this.tl.concat(this.br)},hf.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(kp.prototype,hf);var Jh=function(w,O){var Z={},ce={};this.haveRenderCallbacks=[];var xe=[];this.addImages(w,Z,xe),this.addImages(O,ce,xe);var we=$h(xe),Re=new ls({width:we.w||1,height:we.h||1});for(var Ke in w){var pt=w[Ke],Et=Z[Ke].paddedRect;ls.copy(pt.data,Re,{x:0,y:0},{x:Et.x+1,y:Et.y+1},pt.data)}for(var Ot in O){var Ht=O[Ot],Jt=ce[Ot].paddedRect,lr=Jt.x+1,Ar=Jt.y+1,Sr=Ht.data.width,Zr=Ht.data.height;ls.copy(Ht.data,Re,{x:0,y:0},{x:lr,y:Ar},Ht.data),ls.copy(Ht.data,Re,{x:0,y:Zr-1},{x:lr,y:Ar-1},{width:Sr,height:1}),ls.copy(Ht.data,Re,{x:0,y:0},{x:lr,y:Ar+Zr},{width:Sr,height:1}),ls.copy(Ht.data,Re,{x:Sr-1,y:0},{x:lr-1,y:Ar},{width:1,height:Zr}),ls.copy(Ht.data,Re,{x:0,y:0},{x:lr+Sr,y:Ar},{width:1,height:Zr})}this.image=Re,this.iconPositions=Z,this.patternPositions=ce};Jh.prototype.addImages=function(w,O,Z){for(var ce in w){var xe=w[ce],we={x:0,y:0,w:xe.data.width+2,h:xe.data.height+2};Z.push(we),O[ce]=new kp(we,xe),xe.hasRenderCallback&&this.haveRenderCallbacks.push(ce)}},Jh.prototype.patchUpdatedImages=function(w,O){for(var Z in w.dispatchRenderCallbacks(this.haveRenderCallbacks),w.updatedImages)this.patchUpdatedImage(this.iconPositions[Z],w.getImage(Z),O),this.patchUpdatedImage(this.patternPositions[Z],w.getImage(Z),O)},Jh.prototype.patchUpdatedImage=function(w,O,Z){if(w&&O&&w.version!==O.version){w.version=O.version;var ce=w.tl;Z.update(O.data,void 0,{x:ce[0],y:ce[1]})}},na("ImagePosition",kp),na("ImageAtlas",Jh);var _u={horizontal:1,vertical:2,horizontalOnly:3},_c=function(){this.scale=1,this.fontStack="",this.imageName=null};_c.forText=function(w,O){var Z=new _c;return Z.scale=w||1,Z.fontStack=O,Z},_c.forImage=function(w){var O=new _c;return O.imageName=w,O};var el=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function yh(w,O,Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht,Jt,lr,Ar,Sr){var Zr,Br=el.fromFeature(w,xe);Ht===_u.vertical&&Br.verticalizePunctuation();var ln=xo.processBidirectionalText,mn=xo.processStyledBidirectionalText;if(ln&&Br.sections.length===1){Zr=[];for(var In=0,On=ln(Br.toString(),Mp(Br,Et,we,O,ce,lr,Ar));In<On.length;In+=1){var Kn=On[In],xa=new el;xa.text=Kn,xa.sections=Br.sections;for(var Pa=0;Pa<Kn.length;Pa++)xa.sectionIndex.push(0);Zr.push(xa)}}else if(mn){Zr=[];for(var Ka=0,Ba=mn(Br.text,Br.sectionIndex,Mp(Br,Et,we,O,ce,lr,Ar));Ka<Ba.length;Ka+=1){var ri=Ba[Ka],Oa=new el;Oa.text=ri[0],Oa.sectionIndex=ri[1],Oa.sections=Br.sections,Zr.push(Oa)}}else Zr=function(ja,Wi){for(var Ci=[],oo=ja.text,$a=0,po=0,Ho=Wi;po<Ho.length;po+=1){var nl=Ho[po];Ci.push(ja.substring($a,nl)),$a=nl}return $a<oo.length&&Ci.push(ja.substring($a,oo.length)),Ci}(Br,Mp(Br,Et,we,O,ce,lr,Ar));var Oi=[],yi={positionedLines:Oi,text:Br.toString(),top:Ot[1],bottom:Ot[1],left:Ot[0],right:Ot[0],writingMode:Ht,iconsInText:!1,verticalizable:!1};return function(ja,Wi,Ci,oo,$a,po,Ho,nl,al,Zo,gs,Io){for(var Us=0,Kl=-17,Vs=0,$l=0,Hs=nl==="right"?1:nl==="left"?0:.5,js=0,qi=0,Eo=$a;qi<Eo.length;qi+=1){var Ko=Eo[qi];Ko.trim();var so=Ko.getMaxScale(),Ns=24*(so-1),Fl={positionedGlyphs:[],lineOffset:0};ja.positionedLines[js]=Fl;var il=Fl.positionedGlyphs,Ts=0;if(Ko.length()){for(var ol=0;ol<Ko.length();ol++){var $o=Ko.getSection(ol),ko=Ko.getSectionIndex(ol),Yu=Ko.getCharCode(ol),gf=0,jo=null,Ni=null,wc=null,Nl=24,ys=!(al===_u.horizontal||!gs&&!Bi(Yu)||gs&&(Kf[Yu]||(eh=Yu,Zn.Arabic(eh)||Zn["Arabic Supplement"](eh)||Zn["Arabic Extended-A"](eh)||Zn["Arabic Presentation Forms-A"](eh)||Zn["Arabic Presentation Forms-B"](eh))));if($o.imageName){var Lp=oo[$o.imageName];if(!Lp)continue;wc=$o.imageName,ja.iconsInText=ja.iconsInText||!0,Ni=Lp.paddedRect;var Tu=Lp.displaySize;$o.scale=24*$o.scale/Io,gf=Ns+(24-Tu[1]*$o.scale),Nl=(jo={width:Tu[0],height:Tu[1],left:1,top:-3,advance:ys?Tu[1]:Tu[0]}).advance;var Pp=ys?Tu[0]*$o.scale-24*so:Tu[1]*$o.scale-24*so;Pp>0&&Pp>Ts&&(Ts=Pp)}else{var Ev=Ci[$o.fontStack],Rp=Ev&&Ev[Yu];if(Rp&&Rp.rect)Ni=Rp.rect,jo=Rp.metrics;else{var Md=Wi[$o.fontStack],Cv=Md&&Md[Yu];if(!Cv)continue;jo=Cv.metrics}gf=24*(so-$o.scale)}ys?(ja.verticalizable=!0,il.push({glyph:Yu,imageName:wc,x:Us,y:Kl+gf,vertical:ys,scale:$o.scale,fontStack:$o.fontStack,sectionIndex:ko,metrics:jo,rect:Ni}),Us+=Nl*$o.scale+Zo):(il.push({glyph:Yu,imageName:wc,x:Us,y:Kl+gf,vertical:ys,scale:$o.scale,fontStack:$o.fontStack,sectionIndex:ko,metrics:jo,rect:Ni}),Us+=jo.advance*$o.scale+Zo)}il.length!==0&&(Vs=Math.max(Us-Zo,Vs),qh(il,0,il.length-1,Hs,Ts)),Us=0;var Dp=po*so+Ts;Fl.lineOffset=Math.max(Ts,Ns),Kl+=Dp,$l=Math.max(Dp,$l),++js}else Kl+=po,++js}var eh,lc=Kl- -17,tp=ic(Ho),Hc=tp.horizontalAlign,us=tp.verticalAlign;(function(Ls,Sd,Ed,Cd,Lv,Ld,Pd,Rd,Dd){var yf,Ip=(Sd-Ed)*Lv;yf=Ld!==Pd?-Rd*Cd- -17:(-Cd*Dd+.5)*Pd;for(var zp=0,Op=Ls;zp<Op.length;zp+=1)for(var xf=0,uu=Op[zp].positionedGlyphs;xf<uu.length;xf+=1){var jc=uu[xf];jc.x+=Ip,jc.y+=yf}})(ja.positionedLines,Hs,Hc,us,Vs,$l,po,lc,$a.length),ja.top+=-us*lc,ja.bottom=ja.top+lc,ja.left+=-Hc*Vs,ja.right=ja.left+Vs}(yi,O,Z,ce,Zr,Re,Ke,pt,Ht,Et,Jt,Sr),!function(ja){for(var Wi=0,Ci=ja;Wi<Ci.length;Wi+=1)if(Ci[Wi].positionedGlyphs.length!==0)return!1;return!0}(Oi)&&yi}el.fromFeature=function(w,O){for(var Z=new el,ce=0;ce<w.sections.length;ce++){var xe=w.sections[ce];xe.image?Z.addImageSection(xe):Z.addTextSection(xe,O)}return Z},el.prototype.length=function(){return this.text.length},el.prototype.getSection=function(w){return this.sections[this.sectionIndex[w]]},el.prototype.getSectionIndex=function(w){return this.sectionIndex[w]},el.prototype.getCharCode=function(w){return this.text.charCodeAt(w)},el.prototype.verticalizePunctuation=function(){this.text=function(w){for(var O="",Z=0;Z<w.length;Z++){var ce=w.charCodeAt(Z+1)||null,xe=w.charCodeAt(Z-1)||null;O+=ce&&li(ce)&&!Es[w[Z+1]]||xe&&li(xe)&&!Es[w[Z-1]]||!Es[w[Z]]?w[Z]:Es[w[Z]]}return O}(this.text)},el.prototype.trim=function(){for(var w=0,O=0;O<this.text.length&&Kf[this.text.charCodeAt(O)];O++)w++;for(var Z=this.text.length,ce=this.text.length-1;ce>=0&&ce>=w&&Kf[this.text.charCodeAt(ce)];ce--)Z--;this.text=this.text.substring(w,Z),this.sectionIndex=this.sectionIndex.slice(w,Z)},el.prototype.substring=function(w,O){var Z=new el;return Z.text=this.text.substring(w,O),Z.sectionIndex=this.sectionIndex.slice(w,O),Z.sections=this.sections,Z},el.prototype.toString=function(){return this.text},el.prototype.getMaxScale=function(){var w=this;return this.sectionIndex.reduce(function(O,Z){return Math.max(O,w.sections[Z].scale)},0)},el.prototype.addTextSection=function(w,O){this.text+=w.text,this.sections.push(_c.forText(w.scale,w.fontStack||O));for(var Z=this.sections.length-1,ce=0;ce<w.text.length;++ce)this.sectionIndex.push(Z)},el.prototype.addImageSection=function(w){var O=w.image?w.image.name:"";if(O.length!==0){var Z=this.getNextImageSectionCharCode();Z?(this.text+=String.fromCharCode(Z),this.sections.push(_c.forImage(O)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}else E("Can't add FormattedSection with an empty image.")},el.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Kf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Xl={};function Qh(w,O,Z,ce,xe,we){if(O.imageName){var Re=ce[O.imageName];return Re?Re.displaySize[0]*O.scale*24/we+xe:0}var Ke=Z[O.fontStack],pt=Ke&&Ke[w];return pt?pt.metrics.advance*O.scale+xe:0}function wd(w,O,Z,ce){var xe=Math.pow(w-O,2);return ce?w<O?xe/2:2*xe:xe+Math.abs(Z)*Z}function xh(w,O,Z){var ce=0;return w===10&&(ce-=1e4),Z&&(ce+=150),w!==40&&w!==65288||(ce+=50),O!==41&&O!==65289||(ce+=50),ce}function Cs(w,O,Z,ce,xe,we){for(var Re=null,Ke=wd(O,Z,xe,we),pt=0,Et=ce;pt<Et.length;pt+=1){var Ot=Et[pt],Ht=wd(O-Ot.x,Z,xe,we)+Ot.badness;Ht<=Ke&&(Re=Ot,Ke=Ht)}return{index:w,x:O,priorBreak:Re,badness:Ke}}function Mp(w,O,Z,ce,xe,we,Re){if(we!=="point")return[];if(!w)return[];for(var Ke,pt=[],Et=function(Zr,Br,ln,mn,In,On){for(var Kn=0,xa=0;xa<Zr.length();xa++){var Pa=Zr.getSection(xa);Kn+=Qh(Zr.getCharCode(xa),Pa,mn,In,Br,On)}return Kn/Math.max(1,Math.ceil(Kn/ln))}(w,O,Z,ce,xe,Re),Ot=w.text.indexOf("​")>=0,Ht=0,Jt=0;Jt<w.length();Jt++){var lr=w.getSection(Jt),Ar=w.getCharCode(Jt);if(Kf[Ar]||(Ht+=Qh(Ar,lr,ce,xe,O,Re)),Jt<w.length()-1){var Sr=!((Ke=Ar)<11904||!(Zn["Bopomofo Extended"](Ke)||Zn.Bopomofo(Ke)||Zn["CJK Compatibility Forms"](Ke)||Zn["CJK Compatibility Ideographs"](Ke)||Zn["CJK Compatibility"](Ke)||Zn["CJK Radicals Supplement"](Ke)||Zn["CJK Strokes"](Ke)||Zn["CJK Symbols and Punctuation"](Ke)||Zn["CJK Unified Ideographs Extension A"](Ke)||Zn["CJK Unified Ideographs"](Ke)||Zn["Enclosed CJK Letters and Months"](Ke)||Zn["Halfwidth and Fullwidth Forms"](Ke)||Zn.Hiragana(Ke)||Zn["Ideographic Description Characters"](Ke)||Zn["Kangxi Radicals"](Ke)||Zn["Katakana Phonetic Extensions"](Ke)||Zn.Katakana(Ke)||Zn["Vertical Forms"](Ke)||Zn["Yi Radicals"](Ke)||Zn["Yi Syllables"](Ke)));(Xl[Ar]||Sr||lr.imageName)&&pt.push(Cs(Jt+1,Ht,Et,pt,xh(Ar,w.getCharCode(Jt+1),Sr&&Ot),!1))}}return function Zr(Br){return Br?Zr(Br.priorBreak).concat(Br.index):[]}(Cs(w.length(),Ht,Et,pt,0,!0))}function ic(w){var O=.5,Z=.5;switch(w){case"right":case"top-right":case"bottom-right":O=1;break;case"left":case"top-left":case"bottom-left":O=0}switch(w){case"bottom":case"bottom-right":case"bottom-left":Z=1;break;case"top":case"top-right":case"top-left":Z=0}return{horizontalAlign:O,verticalAlign:Z}}function qh(w,O,Z,ce,xe){if(ce||xe)for(var we=w[Z],Re=(w[Z].x+we.metrics.advance*we.scale)*ce,Ke=O;Ke<=Z;Ke++)w[Ke].x-=Re,w[Ke].y+=xe}function pf(w,O,Z,ce,xe,we){var Re,Ke=w.image;if(Ke.content){var pt=Ke.content,Et=Ke.pixelRatio||1;Re=[pt[0]/Et,pt[1]/Et,Ke.displaySize[0]-pt[2]/Et,Ke.displaySize[1]-pt[3]/Et]}var Ot,Ht,Jt,lr,Ar=O.left*we,Sr=O.right*we;Z==="width"||Z==="both"?(lr=xe[0]+Ar-ce[3],Ht=xe[0]+Sr+ce[1]):Ht=(lr=xe[0]+(Ar+Sr-Ke.displaySize[0])/2)+Ke.displaySize[0];var Zr=O.top*we,Br=O.bottom*we;return Z==="height"||Z==="both"?(Ot=xe[1]+Zr-ce[0],Jt=xe[1]+Br+ce[2]):Jt=(Ot=xe[1]+(Zr+Br-Ke.displaySize[1])/2)+Ke.displaySize[1],{image:Ke,top:Ot,right:Ht,bottom:Jt,left:lr,collisionPadding:Re}}Xl[10]=!0,Xl[32]=!0,Xl[38]=!0,Xl[40]=!0,Xl[41]=!0,Xl[43]=!0,Xl[45]=!0,Xl[47]=!0,Xl[173]=!0,Xl[183]=!0,Xl[8203]=!0,Xl[8208]=!0,Xl[8211]=!0,Xl[8231]=!0;var df=function(w){function O(Z,ce,xe,we){w.call(this,Z,ce),this.angle=xe,we!==void 0&&(this.segment=we)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.clone=function(){return new O(this.x,this.y,this.angle,this.segment)},O}(u);function bh(w,O){var Z=O.expression;if(Z.kind==="constant")return{kind:"constant",layoutSize:Z.evaluate(new ni(w+1))};if(Z.kind==="source")return{kind:"source"};for(var ce=Z.zoomStops,xe=Z.interpolationType,we=0;we<ce.length&&ce[we]<=w;)we++;for(var Re=we=Math.max(0,we-1);Re<ce.length&&ce[Re]<w+1;)Re++;Re=Math.min(ce.length-1,Re);var Ke=ce[we],pt=ce[Re];return Z.kind==="composite"?{kind:"composite",minZoom:Ke,maxZoom:pt,interpolationType:xe}:{kind:"camera",minZoom:Ke,maxZoom:pt,minSize:Z.evaluate(new ni(Ke)),maxSize:Z.evaluate(new ni(pt)),interpolationType:xe}}function _h(w,O,Z){var ce=O.uSize,xe=Z.lowerSize;return w.kind==="source"?xe/128:w.kind==="composite"?Yr(xe/128,Z.upperSize/128,O.uSizeT):ce}function wh(w,O){var Z=0,ce=0;if(w.kind==="constant")ce=w.layoutSize;else if(w.kind!=="source"){var xe=w.interpolationType,we=xe?p(Ti.interpolationFactor(xe,O,w.minZoom,w.maxZoom),0,1):0;w.kind==="camera"?ce=Yr(w.minSize,w.maxSize,we):Z=we}return{uSizeT:Z,uSize:ce}}na("Anchor",df);var wv=Object.freeze({__proto__:null,getSizeData:bh,evaluateSizeForFeature:_h,evaluateSizeForZoom:wh,SIZE_PACK_FACTOR:128});function oc(w,O,Z,ce,xe){if(O.segment===void 0)return!0;for(var we=O,Re=O.segment+1,Ke=0;Ke>-Z/2;){if(--Re<0)return!1;Ke-=w[Re].dist(we),we=w[Re]}Ke+=w[Re].dist(w[Re+1]),Re++;for(var pt=[],Et=0;Ke<Z/2;){var Ot=w[Re],Ht=w[Re+1];if(!Ht)return!1;var Jt=w[Re-1].angleTo(Ot)-Ot.angleTo(Ht);for(Jt=Math.abs((Jt+3*Math.PI)%(2*Math.PI)-Math.PI),pt.push({distance:Ke,angleDelta:Jt}),Et+=Jt;Ke-pt[0].distance>ce;)Et-=pt.shift().angleDelta;if(Et>xe)return!1;Re++,Ke+=Ot.dist(Ht)}return!0}function vf(w){for(var O=0,Z=0;Z<w.length-1;Z++)O+=w[Z].dist(w[Z+1]);return O}function Tv(w,O,Z){return w?.6*O*Z:0}function ep(w,O){return Math.max(w?w.right-w.left:0,O?O.right-O.left:0)}function Td(w,O,Z,ce,xe,we){for(var Re=Tv(Z,xe,we),Ke=ep(Z,ce)*we,pt=0,Et=vf(w)/2,Ot=0;Ot<w.length-1;Ot++){var Ht=w[Ot],Jt=w[Ot+1],lr=Ht.dist(Jt);if(pt+lr>Et){var Ar=(Et-pt)/lr,Sr=Yr(Ht.x,Jt.x,Ar),Zr=Yr(Ht.y,Jt.y,Ar),Br=new df(Sr,Zr,Jt.angleTo(Ht),Ot);return Br._round(),!Re||oc(w,Br,Ke,Re,O)?Br:void 0}pt+=lr}}function Av(w,O,Z,ce,xe,we,Re,Ke,pt){var Et=Tv(ce,we,Re),Ot=ep(ce,xe),Ht=Ot*Re,Jt=w[0].x===0||w[0].x===pt||w[0].y===0||w[0].y===pt;return O-Ht<O/4&&(O=Ht+O/4),function lr(Ar,Sr,Zr,Br,ln,mn,In,On,Kn){for(var xa=mn/2,Pa=vf(Ar),Ka=0,Ba=Sr-Zr,ri=[],Oa=0;Oa<Ar.length-1;Oa++){for(var Oi=Ar[Oa],yi=Ar[Oa+1],ja=Oi.dist(yi),Wi=yi.angleTo(Oi);Ba+Zr<Ka+ja;){var Ci=((Ba+=Zr)-Ka)/ja,oo=Yr(Oi.x,yi.x,Ci),$a=Yr(Oi.y,yi.y,Ci);if(oo>=0&&oo<Kn&&$a>=0&&$a<Kn&&Ba-xa>=0&&Ba+xa<=Pa){var po=new df(oo,$a,Wi,Oa);po._round(),Br&&!oc(Ar,po,mn,Br,ln)||ri.push(po)}}Ka+=ja}return On||ri.length||In||(ri=lr(Ar,Ka/2,Zr,Br,ln,mn,In,!0,Kn)),ri}(w,Jt?O/2*Ke%O:(Ot/2+2*we)*Re*Ke%O,O,Et,Z,Ht,Jt,!1,pt)}function Ad(w,O,Z,ce,xe){for(var we=[],Re=0;Re<w.length;Re++)for(var Ke=w[Re],pt=void 0,Et=0;Et<Ke.length-1;Et++){var Ot=Ke[Et],Ht=Ke[Et+1];Ot.x<O&&Ht.x<O||(Ot.x<O?Ot=new u(O,Ot.y+(O-Ot.x)/(Ht.x-Ot.x)*(Ht.y-Ot.y))._round():Ht.x<O&&(Ht=new u(O,Ot.y+(O-Ot.x)/(Ht.x-Ot.x)*(Ht.y-Ot.y))._round()),Ot.y<Z&&Ht.y<Z||(Ot.y<Z?Ot=new u(Ot.x+(Z-Ot.y)/(Ht.y-Ot.y)*(Ht.x-Ot.x),Z)._round():Ht.y<Z&&(Ht=new u(Ot.x+(Z-Ot.y)/(Ht.y-Ot.y)*(Ht.x-Ot.x),Z)._round()),Ot.x>=ce&&Ht.x>=ce||(Ot.x>=ce?Ot=new u(ce,Ot.y+(ce-Ot.x)/(Ht.x-Ot.x)*(Ht.y-Ot.y))._round():Ht.x>=ce&&(Ht=new u(ce,Ot.y+(ce-Ot.x)/(Ht.x-Ot.x)*(Ht.y-Ot.y))._round()),Ot.y>=xe&&Ht.y>=xe||(Ot.y>=xe?Ot=new u(Ot.x+(xe-Ot.y)/(Ht.y-Ot.y)*(Ht.x-Ot.x),xe)._round():Ht.y>=xe&&(Ht=new u(Ot.x+(xe-Ot.y)/(Ht.y-Ot.y)*(Ht.x-Ot.x),xe)._round()),pt&&Ot.equals(pt[pt.length-1])||we.push(pt=[Ot]),pt.push(Ht)))))}return we}function Sp(w,O,Z,ce){var xe=[],we=w.image,Re=we.pixelRatio,Ke=we.paddedRect.w-2,pt=we.paddedRect.h-2,Et=w.right-w.left,Ot=w.bottom-w.top,Ht=we.stretchX||[[0,Ke]],Jt=we.stretchY||[[0,pt]],lr=function(oo,$a){return oo+$a[1]-$a[0]},Ar=Ht.reduce(lr,0),Sr=Jt.reduce(lr,0),Zr=Ke-Ar,Br=pt-Sr,ln=0,mn=Ar,In=0,On=Sr,Kn=0,xa=Zr,Pa=0,Ka=Br;if(we.content&&ce){var Ba=we.content;ln=Th(Ht,0,Ba[0]),In=Th(Jt,0,Ba[1]),mn=Th(Ht,Ba[0],Ba[2]),On=Th(Jt,Ba[1],Ba[3]),Kn=Ba[0]-ln,Pa=Ba[1]-In,xa=Ba[2]-Ba[0]-mn,Ka=Ba[3]-Ba[1]-On}var ri=function(oo,$a,po,Ho){var nl=$f(oo.stretch-ln,mn,Et,w.left),al=Ah(oo.fixed-Kn,xa,oo.stretch,Ar),Zo=$f($a.stretch-In,On,Ot,w.top),gs=Ah($a.fixed-Pa,Ka,$a.stretch,Sr),Io=$f(po.stretch-ln,mn,Et,w.left),Us=Ah(po.fixed-Kn,xa,po.stretch,Ar),Kl=$f(Ho.stretch-In,On,Ot,w.top),Vs=Ah(Ho.fixed-Pa,Ka,Ho.stretch,Sr),$l=new u(nl,Zo),Hs=new u(Io,Zo),js=new u(Io,Kl),qi=new u(nl,Kl),Eo=new u(al/Re,gs/Re),Ko=new u(Us/Re,Vs/Re),so=O*Math.PI/180;if(so){var Ns=Math.sin(so),Fl=Math.cos(so),il=[Fl,-Ns,Ns,Fl];$l._matMult(il),Hs._matMult(il),qi._matMult(il),js._matMult(il)}var Ts=oo.stretch+oo.fixed,ol=$a.stretch+$a.fixed;return{tl:$l,tr:Hs,bl:qi,br:js,tex:{x:we.paddedRect.x+1+Ts,y:we.paddedRect.y+1+ol,w:po.stretch+po.fixed-Ts,h:Ho.stretch+Ho.fixed-ol},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Eo,pixelOffsetBR:Ko,minFontScaleX:xa/Re/Et,minFontScaleY:Ka/Re/Ot,isSDF:Z}};if(ce&&(we.stretchX||we.stretchY))for(var Oa=mf(Ht,Zr,Ar),Oi=mf(Jt,Br,Sr),yi=0;yi<Oa.length-1;yi++)for(var ja=Oa[yi],Wi=Oa[yi+1],Ci=0;Ci<Oi.length-1;Ci++)xe.push(ri(ja,Oi[Ci],Wi,Oi[Ci+1]));else xe.push(ri({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ke+1},{fixed:0,stretch:pt+1}));return xe}function Th(w,O,Z){for(var ce=0,xe=0,we=w;xe<we.length;xe+=1){var Re=we[xe];ce+=Math.max(O,Math.min(Z,Re[1]))-Math.max(O,Math.min(Z,Re[0]))}return ce}function mf(w,O,Z){for(var ce=[{fixed:-1,stretch:0}],xe=0,we=w;xe<we.length;xe+=1){var Re=we[xe],Ke=Re[0],pt=Re[1],Et=ce[ce.length-1];ce.push({fixed:Ke-Et.stretch,stretch:Et.stretch}),ce.push({fixed:Ke-Et.stretch,stretch:Et.stretch+(pt-Ke)})}return ce.push({fixed:O+1,stretch:Z}),ce}function $f(w,O,Z,ce){return w/O*Z+ce}function Ah(w,O,Z,ce){return w-O*Z/ce}var Ep=function(w,O,Z,ce,xe,we,Re,Ke,pt,Et){if(this.boxStartIndex=w.length,pt){var Ot=we.top,Ht=we.bottom,Jt=we.collisionPadding;Jt&&(Ot-=Jt[1],Ht+=Jt[3]);var lr=Ht-Ot;lr>0&&(lr=Math.max(10,lr),this.circleDiameter=lr)}else{var Ar=we.top*Re-Ke,Sr=we.bottom*Re+Ke,Zr=we.left*Re-Ke,Br=we.right*Re+Ke,ln=we.collisionPadding;if(ln&&(Zr-=ln[0]*Re,Ar-=ln[1]*Re,Br+=ln[2]*Re,Sr+=ln[3]*Re),Et){var mn=new u(Zr,Ar),In=new u(Br,Ar),On=new u(Zr,Sr),Kn=new u(Br,Sr),xa=Et*Math.PI/180;mn._rotate(xa),In._rotate(xa),On._rotate(xa),Kn._rotate(xa),Zr=Math.min(mn.x,In.x,On.x,Kn.x),Br=Math.max(mn.x,In.x,On.x,Kn.x),Ar=Math.min(mn.y,In.y,On.y,Kn.y),Sr=Math.max(mn.y,In.y,On.y,Kn.y)}w.emplaceBack(O.x,O.y,Zr,Ar,Br,Sr,Z,ce,xe)}this.boxEndIndex=w.length},kh=function(w,O){if(w===void 0&&(w=[]),O===void 0&&(O=kv),this.data=w,this.length=this.data.length,this.compare=O,this.length>0)for(var Z=(this.length>>1)-1;Z>=0;Z--)this._down(Z)};function kv(w,O){return w<O?-1:w>O?1:0}function Mv(w,O,Z){O===void 0&&(O=1),Z===void 0&&(Z=!1);for(var ce=1/0,xe=1/0,we=-1/0,Re=-1/0,Ke=w[0],pt=0;pt<Ke.length;pt++){var Et=Ke[pt];(!pt||Et.x<ce)&&(ce=Et.x),(!pt||Et.y<xe)&&(xe=Et.y),(!pt||Et.x>we)&&(we=Et.x),(!pt||Et.y>Re)&&(Re=Et.y)}var Ot=Math.min(we-ce,Re-xe),Ht=Ot/2,Jt=new kh([],Sv);if(Ot===0)return new u(ce,xe);for(var lr=ce;lr<we;lr+=Ot)for(var Ar=xe;Ar<Re;Ar+=Ot)Jt.push(new Jf(lr+Ht,Ar+Ht,Ht,w));for(var Sr=function(ln){for(var mn=0,In=0,On=0,Kn=ln[0],xa=0,Pa=Kn.length,Ka=Pa-1;xa<Pa;Ka=xa++){var Ba=Kn[xa],ri=Kn[Ka],Oa=Ba.x*ri.y-ri.x*Ba.y;In+=(Ba.x+ri.x)*Oa,On+=(Ba.y+ri.y)*Oa,mn+=3*Oa}return new Jf(In/mn,On/mn,0,ln)}(w),Zr=Jt.length;Jt.length;){var Br=Jt.pop();(Br.d>Sr.d||!Sr.d)&&(Sr=Br,Z&&console.log("found best %d after %d probes",Math.round(1e4*Br.d)/1e4,Zr)),Br.max-Sr.d<=O||(Jt.push(new Jf(Br.p.x-(Ht=Br.h/2),Br.p.y-Ht,Ht,w)),Jt.push(new Jf(Br.p.x+Ht,Br.p.y-Ht,Ht,w)),Jt.push(new Jf(Br.p.x-Ht,Br.p.y+Ht,Ht,w)),Jt.push(new Jf(Br.p.x+Ht,Br.p.y+Ht,Ht,w)),Zr+=4)}return Z&&(console.log("num probes: "+Zr),console.log("best distance: "+Sr.d)),Sr.p}function Sv(w,O){return O.max-w.max}function Jf(w,O,Z,ce){this.p=new u(w,O),this.h=Z,this.d=function(xe,we){for(var Re=!1,Ke=1/0,pt=0;pt<we.length;pt++)for(var Et=we[pt],Ot=0,Ht=Et.length,Jt=Ht-1;Ot<Ht;Jt=Ot++){var lr=Et[Ot],Ar=Et[Jt];lr.y>xe.y!=Ar.y>xe.y&&xe.x<(Ar.x-lr.x)*(xe.y-lr.y)/(Ar.y-lr.y)+lr.x&&(Re=!Re),Ke=Math.min(Ke,mc(xe,lr,Ar))}return(Re?1:-1)*Math.sqrt(Ke)}(this.p,ce),this.max=this.d+this.h*Math.SQRT2}kh.prototype.push=function(w){this.data.push(w),this.length++,this._up(this.length-1)},kh.prototype.pop=function(){if(this.length!==0){var w=this.data[0],O=this.data.pop();return this.length--,this.length>0&&(this.data[0]=O,this._down(0)),w}},kh.prototype.peek=function(){return this.data[0]},kh.prototype._up=function(w){for(var O=this.data,Z=this.compare,ce=O[w];w>0;){var xe=w-1>>1,we=O[xe];if(Z(ce,we)>=0)break;O[w]=we,w=xe}O[w]=ce},kh.prototype._down=function(w){for(var O=this.data,Z=this.compare,ce=this.length>>1,xe=O[w];w<ce;){var we=1+(w<<1),Re=O[we],Ke=we+1;if(Ke<this.length&&Z(O[Ke],Re)<0&&(we=Ke,Re=O[Ke]),Z(Re,xe)>=0)break;O[w]=Re,w=we}O[w]=xe};var Y=Number.POSITIVE_INFINITY;function he(w,O){return O[1]!==Y?function(Z,ce,xe){var we=0,Re=0;switch(ce=Math.abs(ce),xe=Math.abs(xe),Z){case"top-right":case"top-left":case"top":Re=xe-7;break;case"bottom-right":case"bottom-left":case"bottom":Re=7-xe}switch(Z){case"top-right":case"bottom-right":case"right":we=-ce;break;case"top-left":case"bottom-left":case"left":we=ce}return[we,Re]}(w,O[0],O[1]):function(Z,ce){var xe=0,we=0;ce<0&&(ce=0);var Re=ce/Math.sqrt(2);switch(Z){case"top-right":case"top-left":we=Re-7;break;case"bottom-right":case"bottom-left":we=7-Re;break;case"bottom":we=7-ce;break;case"top":we=ce-7}switch(Z){case"top-right":case"bottom-right":xe=-Re;break;case"top-left":case"bottom-left":xe=Re;break;case"left":xe=ce;break;case"right":xe=-ce}return[xe,we]}(w,O[0])}function ye(w){switch(w){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _e(w,O,Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht,Jt,lr,Ar){var Sr=function(In,On,Kn,xa,Pa,Ka,Ba,ri){for(var Oa=xa.layout.get("text-rotate").evaluate(Ka,{})*Math.PI/180,Oi=[],yi=0,ja=On.positionedLines;yi<ja.length;yi+=1)for(var Wi=ja[yi],Ci=0,oo=Wi.positionedGlyphs;Ci<oo.length;Ci+=1){var $a=oo[Ci];if($a.rect){var po=$a.rect||{},Ho=4,nl=!0,al=1,Zo=0,gs=(Pa||ri)&&$a.vertical,Io=$a.metrics.advance*$a.scale/2;if(ri&&On.verticalizable&&(Zo=Wi.lineOffset/2-($a.imageName?-(24-$a.metrics.width*$a.scale)/2:24*($a.scale-1))),$a.imageName){var Us=Ba[$a.imageName];nl=Us.sdf,Ho=1/(al=Us.pixelRatio)}var Kl=Pa?[$a.x+Io,$a.y]:[0,0],Vs=Pa?[0,0]:[$a.x+Io+Kn[0],$a.y+Kn[1]-Zo],$l=[0,0];gs&&($l=Vs,Vs=[0,0]);var Hs=($a.metrics.left-Ho)*$a.scale-Io+Vs[0],js=(-$a.metrics.top-Ho)*$a.scale+Vs[1],qi=Hs+po.w*$a.scale/al,Eo=js+po.h*$a.scale/al,Ko=new u(Hs,js),so=new u(qi,js),Ns=new u(Hs,Eo),Fl=new u(qi,Eo);if(gs){var il=new u(-Io,Io- -17),Ts=-Math.PI/2,ol=12-Io,$o=new u(22-ol,-($a.imageName?ol:0)),ko=new(Function.prototype.bind.apply(u,[null].concat($l)));Ko._rotateAround(Ts,il)._add($o)._add(ko),so._rotateAround(Ts,il)._add($o)._add(ko),Ns._rotateAround(Ts,il)._add($o)._add(ko),Fl._rotateAround(Ts,il)._add($o)._add(ko)}if(Oa){var Yu=Math.sin(Oa),gf=Math.cos(Oa),jo=[gf,-Yu,Yu,gf];Ko._matMult(jo),so._matMult(jo),Ns._matMult(jo),Fl._matMult(jo)}var Ni=new u(0,0),wc=new u(0,0);Oi.push({tl:Ko,tr:so,bl:Ns,br:Fl,tex:po,writingMode:On.writingMode,glyphOffset:Kl,sectionIndex:$a.sectionIndex,isSDF:nl,pixelOffsetTL:Ni,pixelOffsetBR:wc,minFontScaleX:0,minFontScaleY:0})}}return Oi}(0,Z,Ke,xe,we,Re,ce,w.allowVerticalPlacement),Zr=w.textSizeData,Br=null;Zr.kind==="source"?(Br=[128*xe.layout.get("text-size").evaluate(Re,{})])[0]>32640&&E(w.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Zr.kind==="composite"&&((Br=[128*lr.compositeTextSizes[0].evaluate(Re,{},Ar),128*lr.compositeTextSizes[1].evaluate(Re,{},Ar)])[0]>32640||Br[1]>32640)&&E(w.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),w.addSymbols(w.text,Sr,Br,Ke,we,Re,Et,O,pt.lineStartIndex,pt.lineLength,Jt,Ar);for(var ln=0,mn=Ot;ln<mn.length;ln+=1)Ht[mn[ln]]=w.text.placedSymbolArray.length-1;return 4*Sr.length}function Ee(w){for(var O in w)return w[O];return null}function De(w,O,Z,ce){var xe=w.compareText;if(O in xe){for(var we=xe[O],Re=we.length-1;Re>=0;Re--)if(ce.dist(we[Re])<Z)return!0}else xe[O]=[];return xe[O].push(ce),!1}var rt=vh.VectorTileFeature.types,$e=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function nt(w,O,Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht,Jt){var lr=Ke?Math.min(32640,Math.round(Ke[0])):0,Ar=Ke?Math.min(32640,Math.round(Ke[1])):0;w.emplaceBack(O,Z,Math.round(32*ce),Math.round(32*xe),we,Re,(lr<<1)+(pt?1:0),Ar,16*Et,16*Ot,256*Ht,256*Jt)}function mt(w,O,Z){w.emplaceBack(O.x,O.y,Z),w.emplaceBack(O.x,O.y,Z),w.emplaceBack(O.x,O.y,Z),w.emplaceBack(O.x,O.y,Z)}function Tt(w){for(var O=0,Z=w.sections;O<Z.length;O+=1)if(ro(Z[O].text))return!0;return!1}var Vt=function(w){this.layoutVertexArray=new mi,this.indexArray=new Vo,this.programConfigurations=w,this.segments=new pr,this.dynamicLayoutVertexArray=new Is,this.opacityVertexArray=new _l,this.placedSymbolArray=new ve};Vt.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Vt.prototype.upload=function(w,O,Z,ce){this.isEmpty()||(Z&&(this.layoutVertexBuffer=w.createVertexBuffer(this.layoutVertexArray,Zh.members),this.indexBuffer=w.createIndexBuffer(this.indexArray,O),this.dynamicLayoutVertexBuffer=w.createVertexBuffer(this.dynamicLayoutVertexArray,mv.members,!0),this.opacityVertexBuffer=w.createVertexBuffer(this.opacityVertexArray,$e,!0),this.opacityVertexBuffer.itemSize=1),(Z||ce)&&this.programConfigurations.upload(w))},Vt.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},na("SymbolBuffers",Vt);var Yt=function(w,O,Z){this.layoutVertexArray=new w,this.layoutAttributes=O,this.indexArray=new Z,this.segments=new pr,this.collisionVertexArray=new Qs};Yt.prototype.upload=function(w){this.layoutVertexBuffer=w.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=w.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=w.createVertexBuffer(this.collisionVertexArray,Tp.members,!0)},Yt.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},na("CollisionBuffers",Yt);var ur=function(w){this.collisionBoxArray=w.collisionBoxArray,this.zoom=w.zoom,this.overscaling=w.overscaling,this.layers=w.layers,this.layerIds=this.layers.map(function(we){return we.id}),this.index=w.index,this.pixelRatio=w.pixelRatio,this.sourceLayerIndex=w.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=yc([]),this.placementViewportMatrix=yc([]);var O=this.layers[0]._unevaluatedLayout._values;this.textSizeData=bh(this.zoom,O["text-size"]),this.iconSizeData=bh(this.zoom,O["icon-size"]);var Z=this.layers[0].layout,ce=Z.get("symbol-sort-key"),xe=Z.get("symbol-z-order");this.sortFeaturesByKey=xe!=="viewport-y"&&ce.constantOr(1)!==void 0,this.sortFeaturesByY=(xe==="viewport-y"||xe==="auto"&&!this.sortFeaturesByKey)&&(Z.get("text-allow-overlap")||Z.get("icon-allow-overlap")||Z.get("text-ignore-placement")||Z.get("icon-ignore-placement")),Z.get("symbol-placement")==="point"&&(this.writingModes=Z.get("text-writing-mode").map(function(we){return _u[we]})),this.stateDependentLayerIds=this.layers.filter(function(we){return we.isStateDependent()}).map(function(we){return we.id}),this.sourceID=w.sourceID};ur.prototype.createArrays=function(){this.text=new Vt(new Na(Zh.members,this.layers,this.zoom,function(w){return/^text/.test(w)})),this.icon=new Vt(new Na(Zh.members,this.layers,this.zoom,function(w){return/^icon/.test(w)})),this.glyphOffsetArray=new Ye,this.lineVertexArray=new ut,this.symbolInstances=new Oe},ur.prototype.calculateGlyphDependencies=function(w,O,Z,ce,xe){for(var we=0;we<w.length;we++)if(O[w.charCodeAt(we)]=!0,(Z||ce)&&xe){var Re=Es[w.charAt(we)];Re&&(O[Re.charCodeAt(0)]=!0)}},ur.prototype.populate=function(w,O,Z){var ce=this.layers[0],xe=ce.layout,we=xe.get("text-font"),Re=xe.get("text-field"),Ke=xe.get("icon-image"),pt=(Re.value.kind!=="constant"||Re.value.value instanceof Or&&!Re.value.value.isEmpty()||Re.value.value.toString().length>0)&&(we.value.kind!=="constant"||we.value.value.length>0),Et=Ke.value.kind!=="constant"||!!Ke.value.value||Object.keys(Ke.parameters).length>0,Ot=xe.get("symbol-sort-key");if(this.features=[],pt||Et){for(var Ht=O.iconDependencies,Jt=O.glyphDependencies,lr=O.availableImages,Ar=new ni(this.zoom),Sr=0,Zr=w;Sr<Zr.length;Sr+=1){var Br=Zr[Sr],ln=Br.feature,mn=Br.id,In=Br.index,On=Br.sourceLayerIndex,Kn=ce._featureFilter.needGeometry,xa={type:ln.type,id:mn,properties:ln.properties,geometry:Kn?ho(ln):[]};if(ce._featureFilter.filter(Ar,xa,Z)){Kn||(xa.geometry=ho(ln));var Pa=void 0;if(pt){var Ka=ce.getValueAndResolveTokens("text-field",xa,Z,lr),Ba=Or.factory(Ka);Tt(Ba)&&(this.hasRTLText=!0),(!this.hasRTLText||vs()==="unavailable"||this.hasRTLText&&xo.isParsed())&&(Pa=xd(Ba,ce,xa))}var ri=void 0;if(Et){var Oa=ce.getValueAndResolveTokens("icon-image",xa,Z,lr);ri=Oa instanceof Mn?Oa:Mn.fromString(Oa)}if(Pa||ri){var Oi=this.sortFeaturesByKey?Ot.evaluate(xa,{},Z):void 0,yi={id:mn,text:Pa,icon:ri,index:In,sourceLayerIndex:On,geometry:ho(ln),properties:ln.properties,type:rt[ln.type],sortKey:Oi};if(this.features.push(yi),ri&&(Ht[ri.name]=!0),Pa){var ja=we.evaluate(xa,{},Z).join(","),Wi=xe.get("text-rotation-alignment")==="map"&&xe.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(_u.vertical)>=0;for(var Ci=0,oo=Pa.sections;Ci<oo.length;Ci+=1){var $a=oo[Ci];if($a.image)Ht[$a.image.name]=!0;else{var po=wi(Pa.toString()),Ho=$a.fontStack||ja,nl=Jt[Ho]=Jt[Ho]||{};this.calculateGlyphDependencies($a.text,nl,Wi,this.allowVerticalPlacement,po)}}}}}}xe.get("symbol-placement")==="line"&&(this.features=function(al){var Zo={},gs={},Io=[],Us=0;function Kl(Ts){Io.push(al[Ts]),Us++}function Vs(Ts,ol,$o){var ko=gs[Ts];return delete gs[Ts],gs[ol]=ko,Io[ko].geometry[0].pop(),Io[ko].geometry[0]=Io[ko].geometry[0].concat($o[0]),ko}function $l(Ts,ol,$o){var ko=Zo[ol];return delete Zo[ol],Zo[Ts]=ko,Io[ko].geometry[0].shift(),Io[ko].geometry[0]=$o[0].concat(Io[ko].geometry[0]),ko}function Hs(Ts,ol,$o){var ko=$o?ol[0][ol[0].length-1]:ol[0][0];return Ts+":"+ko.x+":"+ko.y}for(var js=0;js<al.length;js++){var qi=al[js],Eo=qi.geometry,Ko=qi.text?qi.text.toString():null;if(Ko){var so=Hs(Ko,Eo),Ns=Hs(Ko,Eo,!0);if(so in gs&&Ns in Zo&&gs[so]!==Zo[Ns]){var Fl=$l(so,Ns,Eo),il=Vs(so,Ns,Io[Fl].geometry);delete Zo[so],delete gs[Ns],gs[Hs(Ko,Io[il].geometry,!0)]=il,Io[Fl].geometry=null}else so in gs?Vs(so,Ns,Eo):Ns in Zo?$l(so,Ns,Eo):(Kl(js),Zo[so]=Us-1,gs[Ns]=Us-1)}else Kl(js)}return Io.filter(function(Ts){return Ts.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(al,Zo){return al.sortKey-Zo.sortKey})}},ur.prototype.update=function(w,O,Z){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(w,O,this.layers,Z),this.icon.programConfigurations.updatePaintArrays(w,O,this.layers,Z))},ur.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},ur.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ur.prototype.upload=function(w){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(w),this.iconCollisionBox.upload(w)),this.text.upload(w,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(w,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ur.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ur.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ur.prototype.addToLineVertexArray=function(w,O){var Z=this.lineVertexArray.length;if(w.segment!==void 0){for(var ce=w.dist(O[w.segment+1]),xe=w.dist(O[w.segment]),we={},Re=w.segment+1;Re<O.length;Re++)we[Re]={x:O[Re].x,y:O[Re].y,tileUnitDistanceFromAnchor:ce},Re<O.length-1&&(ce+=O[Re+1].dist(O[Re]));for(var Ke=w.segment||0;Ke>=0;Ke--)we[Ke]={x:O[Ke].x,y:O[Ke].y,tileUnitDistanceFromAnchor:xe},Ke>0&&(xe+=O[Ke-1].dist(O[Ke]));for(var pt=0;pt<O.length;pt++){var Et=we[pt];this.lineVertexArray.emplaceBack(Et.x,Et.y,Et.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Z,lineLength:this.lineVertexArray.length-Z}},ur.prototype.addSymbols=function(w,O,Z,ce,xe,we,Re,Ke,pt,Et,Ot,Ht){for(var Jt=w.indexArray,lr=w.layoutVertexArray,Ar=w.segments.prepareSegment(4*O.length,lr,Jt,we.sortKey),Sr=this.glyphOffsetArray.length,Zr=Ar.vertexLength,Br=this.allowVerticalPlacement&&Re===_u.vertical?Math.PI/2:0,ln=we.text&&we.text.sections,mn=0;mn<O.length;mn++){var In=O[mn],On=In.tl,Kn=In.tr,xa=In.bl,Pa=In.br,Ka=In.tex,Ba=In.pixelOffsetTL,ri=In.pixelOffsetBR,Oa=In.minFontScaleX,Oi=In.minFontScaleY,yi=In.glyphOffset,ja=In.isSDF,Wi=In.sectionIndex,Ci=Ar.vertexLength,oo=yi[1];nt(lr,Ke.x,Ke.y,On.x,oo+On.y,Ka.x,Ka.y,Z,ja,Ba.x,Ba.y,Oa,Oi),nt(lr,Ke.x,Ke.y,Kn.x,oo+Kn.y,Ka.x+Ka.w,Ka.y,Z,ja,ri.x,Ba.y,Oa,Oi),nt(lr,Ke.x,Ke.y,xa.x,oo+xa.y,Ka.x,Ka.y+Ka.h,Z,ja,Ba.x,ri.y,Oa,Oi),nt(lr,Ke.x,Ke.y,Pa.x,oo+Pa.y,Ka.x+Ka.w,Ka.y+Ka.h,Z,ja,ri.x,ri.y,Oa,Oi),mt(w.dynamicLayoutVertexArray,Ke,Br),Jt.emplaceBack(Ci,Ci+1,Ci+2),Jt.emplaceBack(Ci+1,Ci+2,Ci+3),Ar.vertexLength+=4,Ar.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(yi[0]),mn!==O.length-1&&Wi===O[mn+1].sectionIndex||w.programConfigurations.populatePaintArrays(lr.length,we,we.index,{},Ht,ln&&ln[Wi])}w.placedSymbolArray.emplaceBack(Ke.x,Ke.y,Sr,this.glyphOffsetArray.length-Sr,Zr,pt,Et,Ke.segment,Z?Z[0]:0,Z?Z[1]:0,ce[0],ce[1],Re,0,!1,0,Ot)},ur.prototype._addCollisionDebugVertex=function(w,O,Z,ce,xe,we){return O.emplaceBack(0,0),w.emplaceBack(Z.x,Z.y,ce,xe,Math.round(we.x),Math.round(we.y))},ur.prototype.addCollisionDebugVertices=function(w,O,Z,ce,xe,we,Re){var Ke=xe.segments.prepareSegment(4,xe.layoutVertexArray,xe.indexArray),pt=Ke.vertexLength,Et=xe.layoutVertexArray,Ot=xe.collisionVertexArray,Ht=Re.anchorX,Jt=Re.anchorY;this._addCollisionDebugVertex(Et,Ot,we,Ht,Jt,new u(w,O)),this._addCollisionDebugVertex(Et,Ot,we,Ht,Jt,new u(Z,O)),this._addCollisionDebugVertex(Et,Ot,we,Ht,Jt,new u(Z,ce)),this._addCollisionDebugVertex(Et,Ot,we,Ht,Jt,new u(w,ce)),Ke.vertexLength+=4;var lr=xe.indexArray;lr.emplaceBack(pt,pt+1),lr.emplaceBack(pt+1,pt+2),lr.emplaceBack(pt+2,pt+3),lr.emplaceBack(pt+3,pt),Ke.primitiveLength+=4},ur.prototype.addDebugCollisionBoxes=function(w,O,Z,ce){for(var xe=w;xe<O;xe++){var we=this.collisionBoxArray.get(xe);this.addCollisionDebugVertices(we.x1,we.y1,we.x2,we.y2,ce?this.textCollisionBox:this.iconCollisionBox,we.anchorPoint,Z)}},ur.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Yt(No,gh.members,vl),this.iconCollisionBox=new Yt(No,gh.members,vl);for(var w=0;w<this.symbolInstances.length;w++){var O=this.symbolInstances.get(w);this.addDebugCollisionBoxes(O.textBoxStartIndex,O.textBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.iconBoxStartIndex,O.iconBoxEndIndex,O,!1),this.addDebugCollisionBoxes(O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,!1)}},ur.prototype._deserializeCollisionBoxesForSymbol=function(w,O,Z,ce,xe,we,Re,Ke,pt){for(var Et={},Ot=O;Ot<Z;Ot++){var Ht=w.get(Ot);Et.textBox={x1:Ht.x1,y1:Ht.y1,x2:Ht.x2,y2:Ht.y2,anchorPointX:Ht.anchorPointX,anchorPointY:Ht.anchorPointY},Et.textFeatureIndex=Ht.featureIndex;break}for(var Jt=ce;Jt<xe;Jt++){var lr=w.get(Jt);Et.verticalTextBox={x1:lr.x1,y1:lr.y1,x2:lr.x2,y2:lr.y2,anchorPointX:lr.anchorPointX,anchorPointY:lr.anchorPointY},Et.verticalTextFeatureIndex=lr.featureIndex;break}for(var Ar=we;Ar<Re;Ar++){var Sr=w.get(Ar);Et.iconBox={x1:Sr.x1,y1:Sr.y1,x2:Sr.x2,y2:Sr.y2,anchorPointX:Sr.anchorPointX,anchorPointY:Sr.anchorPointY},Et.iconFeatureIndex=Sr.featureIndex;break}for(var Zr=Ke;Zr<pt;Zr++){var Br=w.get(Zr);Et.verticalIconBox={x1:Br.x1,y1:Br.y1,x2:Br.x2,y2:Br.y2,anchorPointX:Br.anchorPointX,anchorPointY:Br.anchorPointY},Et.verticalIconFeatureIndex=Br.featureIndex;break}return Et},ur.prototype.deserializeCollisionBoxes=function(w){this.collisionArrays=[];for(var O=0;O<this.symbolInstances.length;O++){var Z=this.symbolInstances.get(O);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(w,Z.textBoxStartIndex,Z.textBoxEndIndex,Z.verticalTextBoxStartIndex,Z.verticalTextBoxEndIndex,Z.iconBoxStartIndex,Z.iconBoxEndIndex,Z.verticalIconBoxStartIndex,Z.verticalIconBoxEndIndex))}},ur.prototype.hasTextData=function(){return this.text.segments.get().length>0},ur.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ur.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ur.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ur.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ur.prototype.addIndicesForPlacedSymbol=function(w,O){for(var Z=w.placedSymbolArray.get(O),ce=Z.vertexStartIndex+4*Z.numGlyphs,xe=Z.vertexStartIndex;xe<ce;xe+=4)w.indexArray.emplaceBack(xe,xe+1,xe+2),w.indexArray.emplaceBack(xe+1,xe+2,xe+3)},ur.prototype.getSortedSymbolIndexes=function(w){if(this.sortedAngle===w&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var O=Math.sin(w),Z=Math.cos(w),ce=[],xe=[],we=[],Re=0;Re<this.symbolInstances.length;++Re){we.push(Re);var Ke=this.symbolInstances.get(Re);ce.push(0|Math.round(O*Ke.anchorX+Z*Ke.anchorY)),xe.push(Ke.featureIndex)}return we.sort(function(pt,Et){return ce[pt]-ce[Et]||xe[Et]-xe[pt]}),we},ur.prototype.addToSortKeyRanges=function(w,O){var Z=this.sortKeyRanges[this.sortKeyRanges.length-1];Z&&Z.sortKey===O?Z.symbolInstanceEnd=w+1:this.sortKeyRanges.push({sortKey:O,symbolInstanceStart:w,symbolInstanceEnd:w+1})},ur.prototype.sortFeatures=function(w){var O=this;if(this.sortFeaturesByY&&this.sortedAngle!==w&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(w),this.sortedAngle=w,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Z=0,ce=this.symbolInstanceIndexes;Z<ce.length;Z+=1){var xe=this.symbolInstances.get(ce[Z]);this.featureSortOrder.push(xe.featureIndex),[xe.rightJustifiedTextSymbolIndex,xe.centerJustifiedTextSymbolIndex,xe.leftJustifiedTextSymbolIndex].forEach(function(we,Re,Ke){we>=0&&Ke.indexOf(we)===Re&&O.addIndicesForPlacedSymbol(O.text,we)}),xe.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,xe.verticalPlacedTextSymbolIndex),xe.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,xe.placedIconSymbolIndex),xe.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,xe.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},na("SymbolBucket",ur,{omit:["layers","collisionBoxArray","features","compareText"]}),ur.MAX_GLYPHS=65535,ur.addDynamicAttributes=mt;var Rr=new za({"symbol-placement":new Ea(Me.layout_symbol["symbol-placement"]),"symbol-spacing":new Ea(Me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ea(Me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ga(Me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ea(Me.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ea(Me.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ea(Me.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ea(Me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ea(Me.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ga(Me.layout_symbol["icon-size"]),"icon-text-fit":new Ea(Me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ea(Me.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ga(Me.layout_symbol["icon-image"]),"icon-rotate":new Ga(Me.layout_symbol["icon-rotate"]),"icon-padding":new Ea(Me.layout_symbol["icon-padding"]),"icon-keep-upright":new Ea(Me.layout_symbol["icon-keep-upright"]),"icon-offset":new Ga(Me.layout_symbol["icon-offset"]),"icon-anchor":new Ga(Me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ea(Me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ea(Me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ea(Me.layout_symbol["text-rotation-alignment"]),"text-field":new Ga(Me.layout_symbol["text-field"]),"text-font":new Ga(Me.layout_symbol["text-font"]),"text-size":new Ga(Me.layout_symbol["text-size"]),"text-max-width":new Ga(Me.layout_symbol["text-max-width"]),"text-line-height":new Ea(Me.layout_symbol["text-line-height"]),"text-letter-spacing":new Ga(Me.layout_symbol["text-letter-spacing"]),"text-justify":new Ga(Me.layout_symbol["text-justify"]),"text-radial-offset":new Ga(Me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ea(Me.layout_symbol["text-variable-anchor"]),"text-anchor":new Ga(Me.layout_symbol["text-anchor"]),"text-max-angle":new Ea(Me.layout_symbol["text-max-angle"]),"text-writing-mode":new Ea(Me.layout_symbol["text-writing-mode"]),"text-rotate":new Ga(Me.layout_symbol["text-rotate"]),"text-padding":new Ea(Me.layout_symbol["text-padding"]),"text-keep-upright":new Ea(Me.layout_symbol["text-keep-upright"]),"text-transform":new Ga(Me.layout_symbol["text-transform"]),"text-offset":new Ga(Me.layout_symbol["text-offset"]),"text-allow-overlap":new Ea(Me.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ea(Me.layout_symbol["text-ignore-placement"]),"text-optional":new Ea(Me.layout_symbol["text-optional"])}),ir={paint:new za({"icon-opacity":new Ga(Me.paint_symbol["icon-opacity"]),"icon-color":new Ga(Me.paint_symbol["icon-color"]),"icon-halo-color":new Ga(Me.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ga(Me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ga(Me.paint_symbol["icon-halo-blur"]),"icon-translate":new Ea(Me.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ea(Me.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ga(Me.paint_symbol["text-opacity"]),"text-color":new Ga(Me.paint_symbol["text-color"],{runtimeType:nr,getOverride:function(w){return w.textColor},hasOverride:function(w){return!!w.textColor}}),"text-halo-color":new Ga(Me.paint_symbol["text-halo-color"]),"text-halo-width":new Ga(Me.paint_symbol["text-halo-width"]),"text-halo-blur":new Ga(Me.paint_symbol["text-halo-blur"]),"text-translate":new Ea(Me.paint_symbol["text-translate"]),"text-translate-anchor":new Ea(Me.paint_symbol["text-translate-anchor"])}),layout:Rr},hr=function(w){this.type=w.property.overrides?w.property.overrides.runtimeType:Je,this.defaultValue=w};hr.prototype.evaluate=function(w){if(w.formattedSection){var O=this.defaultValue.property.overrides;if(O&&O.hasOverride(w.formattedSection))return O.getOverride(w.formattedSection)}return w.feature&&w.featureState?this.defaultValue.evaluate(w.feature,w.featureState):this.defaultValue.property.specification.default},hr.prototype.eachChild=function(w){this.defaultValue.isConstant()||w(this.defaultValue.value._styleExpression.expression)},hr.prototype.outputDefined=function(){return!1},hr.prototype.serialize=function(){return null},na("FormatSectionOverride",hr,{omit:["defaultValue"]});var mr=function(w){function O(Z){w.call(this,Z,ir)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.recalculate=function(Z,ce){if(w.prototype.recalculate.call(this,Z,ce),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var xe=this.layout.get("text-writing-mode");if(xe){for(var we=[],Re=0,Ke=xe;Re<Ke.length;Re+=1){var pt=Ke[Re];we.indexOf(pt)<0&&we.push(pt)}this.layout._values["text-writing-mode"]=we}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},O.prototype.getValueAndResolveTokens=function(Z,ce,xe,we){var Re=this.layout.get(Z).evaluate(ce,{},xe,we),Ke=this._unevaluatedLayout._values[Z];return Ke.isDataDriven()||fl(Ke.value)||!Re?Re:function(pt,Et){return Et.replace(/{([^{}]+)}/g,function(Ot,Ht){return Ht in pt?String(pt[Ht]):""})}(ce.properties,Re)},O.prototype.createBucket=function(Z){return new ur(Z)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype._setPaintOverrides=function(){for(var Z=0,ce=ir.paint.overridableProperties;Z<ce.length;Z+=1){var xe=ce[Z];if(O.hasPaintOverride(this.layout,xe)){var we,Re=this.paint.get(xe),Ke=new hr(Re),pt=new Dl(Ke,Re.property.specification);we=Re.value.kind==="constant"||Re.value.kind==="source"?new eu("source",pt):new As("composite",pt,Re.value.zoomStops,Re.value._interpolationType),this.paint._values[xe]=new Ya(Re.property,we,Re.parameters)}}},O.prototype._handleOverridablePaintPropertyUpdate=function(Z,ce,xe){return!(!this.layout||ce.isDataDriven()||xe.isDataDriven())&&O.hasPaintOverride(this.layout,Z)},O.hasPaintOverride=function(Z,ce){var xe=Z.get("text-field"),we=ir.paint.properties[ce],Re=!1,Ke=function(Ot){for(var Ht=0,Jt=Ot;Ht<Jt.length;Ht+=1)if(we.overrides&&we.overrides.hasOverride(Jt[Ht]))return void(Re=!0)};if(xe.value.kind==="constant"&&xe.value.value instanceof Or)Ke(xe.value.value.sections);else if(xe.value.kind==="source"){var pt=function(Ot){Re||(Ot instanceof Nr&&Bn(Ot.value)===Mt?Ke(Ot.value.sections):Ot instanceof xn?Ke(Ot.sections):Ot.eachChild(pt))},Et=xe.value;Et._styleExpression&&pt(Et._styleExpression.expression)}return Re},O}(Si),Dr={paint:new za({"background-color":new Ea(Me.paint_background["background-color"]),"background-pattern":new Mi(Me.paint_background["background-pattern"]),"background-opacity":new Ea(Me.paint_background["background-opacity"])})},yr=function(w){function O(Z){w.call(this,Z,Dr)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O}(Si),kr={paint:new za({"raster-opacity":new Ea(Me.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ea(Me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ea(Me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ea(Me.paint_raster["raster-brightness-max"]),"raster-saturation":new Ea(Me.paint_raster["raster-saturation"]),"raster-contrast":new Ea(Me.paint_raster["raster-contrast"]),"raster-resampling":new Ea(Me.paint_raster["raster-resampling"]),"raster-fade-duration":new Ea(Me.paint_raster["raster-fade-duration"])})},gn=function(w){function O(Z){w.call(this,Z,kr)}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O}(Si),vn=function(w){function O(Z){w.call(this,Z,{}),this.implementation=Z}return w&&(O.__proto__=w),(O.prototype=Object.create(w&&w.prototype)).constructor=O,O.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},O.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},O.prototype.recalculate=function(){},O.prototype.updateTransitions=function(){},O.prototype.hasTransition=function(){},O.prototype.serialize=function(){},O.prototype.onAdd=function(Z){this.implementation.onAdd&&this.implementation.onAdd(Z,Z.painter.context.gl)},O.prototype.onRemove=function(Z){this.implementation.onRemove&&this.implementation.onRemove(Z,Z.painter.context.gl)},O}(Si),hn={circle:fd,heatmap:iv,hillshade:mp,fill:uv,"fill-extrusion":bp,line:vv,symbol:mr,background:yr,raster:gn},sn=self.HTMLImageElement,Xn=self.HTMLCanvasElement,ea=self.HTMLVideoElement,La=self.ImageData,da=self.ImageBitmap,ma=function(w,O,Z,ce){this.context=w,this.format=Z,this.texture=w.gl.createTexture(),this.update(O,ce)};ma.prototype.update=function(w,O,Z){var ce=w.width,xe=w.height,we=!(this.size&&this.size[0]===ce&&this.size[1]===xe||Z),Re=this.context,Ke=Re.gl;if(this.useMipmap=!!(O&&O.useMipmap),Ke.bindTexture(Ke.TEXTURE_2D,this.texture),Re.pixelStoreUnpackFlipY.set(!1),Re.pixelStoreUnpack.set(1),Re.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ke.RGBA&&(!O||O.premultiply!==!1)),we)this.size=[ce,xe],w instanceof sn||w instanceof Xn||w instanceof ea||w instanceof La||da&&w instanceof da?Ke.texImage2D(Ke.TEXTURE_2D,0,this.format,this.format,Ke.UNSIGNED_BYTE,w):Ke.texImage2D(Ke.TEXTURE_2D,0,this.format,ce,xe,0,this.format,Ke.UNSIGNED_BYTE,w.data);else{var pt=Z||{x:0,y:0},Et=pt.x,Ot=pt.y;w instanceof sn||w instanceof Xn||w instanceof ea||w instanceof La||da&&w instanceof da?Ke.texSubImage2D(Ke.TEXTURE_2D,0,Et,Ot,Ke.RGBA,Ke.UNSIGNED_BYTE,w):Ke.texSubImage2D(Ke.TEXTURE_2D,0,Et,Ot,ce,xe,Ke.RGBA,Ke.UNSIGNED_BYTE,w.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ke.generateMipmap(Ke.TEXTURE_2D)},ma.prototype.bind=function(w,O,Z){var ce=this.context.gl;ce.bindTexture(ce.TEXTURE_2D,this.texture),Z!==ce.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Z=ce.LINEAR),w!==this.filter&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,w),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,Z||w),this.filter=w),O!==this.wrap&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,O),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,O),this.wrap=O)},ma.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},ma.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var En=function(w){var O=this;this._callback=w,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){O._triggered=!1,O._callback()})};En.prototype.trigger=function(){var w=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){w._triggered=!1,w._callback()},0))},En.prototype.remove=function(){delete this._channel,this._callback=function(){}};var $n=function(w,O,Z){this.target=w,this.parent=O,this.mapId=Z,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new En(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=D()?w:self};function ca(w,O,Z){var ce=2*Math.PI*6378137/256/Math.pow(2,Z);return[w*ce-2*Math.PI*6378137/2,O*ce-2*Math.PI*6378137/2]}$n.prototype.send=function(w,O,Z,ce,xe){var we=this;xe===void 0&&(xe=!1);var Re=Math.round(1e18*Math.random()).toString(36).substring(0,10);Z&&(this.callbacks[Re]=Z);var Ke=G(this.globalScope)?void 0:[];return this.target.postMessage({id:Re,type:w,hasCallback:!!Z,targetMapId:ce,mustQueue:xe,sourceMapId:this.mapId,data:ki(O,Ke)},Ke),{cancel:function(){Z&&delete we.callbacks[Re],we.target.postMessage({id:Re,type:"<cancel>",targetMapId:ce,sourceMapId:we.mapId})}}},$n.prototype.receive=function(w){var O=w.data,Z=O.id;if(Z&&(!O.targetMapId||this.mapId===O.targetMapId))if(O.type==="<cancel>"){delete this.tasks[Z];var ce=this.cancelCallbacks[Z];delete this.cancelCallbacks[Z],ce&&ce()}else D()||O.mustQueue?(this.tasks[Z]=O,this.taskQueue.push(Z),this.invoker.trigger()):this.processTask(Z,O)},$n.prototype.process=function(){if(this.taskQueue.length){var w=this.taskQueue.shift(),O=this.tasks[w];delete this.tasks[w],this.taskQueue.length&&this.invoker.trigger(),O&&this.processTask(w,O)}},$n.prototype.processTask=function(w,O){var Z=this;if(O.type==="<response>"){var ce=this.callbacks[w];delete this.callbacks[w],ce&&(O.error?ce(vi(O.error)):ce(null,vi(O.data)))}else{var xe=!1,we=G(this.globalScope)?void 0:[],Re=O.hasCallback?function(Ot,Ht){xe=!0,delete Z.cancelCallbacks[w],Z.target.postMessage({id:w,type:"<response>",sourceMapId:Z.mapId,error:Ot?ki(Ot):null,data:ki(Ht,we)},we)}:function(Ot){xe=!0},Ke=null,pt=vi(O.data);if(this.parent[O.type])Ke=this.parent[O.type](O.sourceMapId,pt,Re);else if(this.parent.getWorkerSource){var Et=O.type.split(".");Ke=this.parent.getWorkerSource(O.sourceMapId,Et[0],pt.source)[Et[1]](pt,Re)}else Re(new Error("Could not find function "+O.type));!xe&&Ke&&Ke.cancel&&(this.cancelCallbacks[w]=Ke.cancel)}},$n.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var yn=function(w,O){w&&(O?this.setSouthWest(w).setNorthEast(O):w.length===4?this.setSouthWest([w[0],w[1]]).setNorthEast([w[2],w[3]]):this.setSouthWest(w[0]).setNorthEast(w[1]))};yn.prototype.setNorthEast=function(w){return this._ne=w instanceof Hn?new Hn(w.lng,w.lat):Hn.convert(w),this},yn.prototype.setSouthWest=function(w){return this._sw=w instanceof Hn?new Hn(w.lng,w.lat):Hn.convert(w),this},yn.prototype.extend=function(w){var O,Z,ce=this._sw,xe=this._ne;if(w instanceof Hn)O=w,Z=w;else{if(!(w instanceof yn))return Array.isArray(w)?w.length===4||w.every(Array.isArray)?this.extend(yn.convert(w)):this.extend(Hn.convert(w)):this;if(Z=w._ne,!(O=w._sw)||!Z)return this}return ce||xe?(ce.lng=Math.min(O.lng,ce.lng),ce.lat=Math.min(O.lat,ce.lat),xe.lng=Math.max(Z.lng,xe.lng),xe.lat=Math.max(Z.lat,xe.lat)):(this._sw=new Hn(O.lng,O.lat),this._ne=new Hn(Z.lng,Z.lat)),this},yn.prototype.getCenter=function(){return new Hn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},yn.prototype.getSouthWest=function(){return this._sw},yn.prototype.getNorthEast=function(){return this._ne},yn.prototype.getNorthWest=function(){return new Hn(this.getWest(),this.getNorth())},yn.prototype.getSouthEast=function(){return new Hn(this.getEast(),this.getSouth())},yn.prototype.getWest=function(){return this._sw.lng},yn.prototype.getSouth=function(){return this._sw.lat},yn.prototype.getEast=function(){return this._ne.lng},yn.prototype.getNorth=function(){return this._ne.lat},yn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},yn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},yn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},yn.prototype.contains=function(w){var O=Hn.convert(w),Z=O.lng,ce=O.lat,xe=this._sw.lng<=Z&&Z<=this._ne.lng;return this._sw.lng>this._ne.lng&&(xe=this._sw.lng>=Z&&Z>=this._ne.lng),this._sw.lat<=ce&&ce<=this._ne.lat&&xe},yn.convert=function(w){return!w||w instanceof yn?w:new yn(w)};var Hn=function(w,O){if(isNaN(w)||isNaN(O))throw new Error("Invalid LngLat object: ("+w+", "+O+")");if(this.lng=+w,this.lat=+O,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Hn.prototype.wrap=function(){return new Hn(d(this.lng,-180,180),this.lat)},Hn.prototype.toArray=function(){return[this.lng,this.lat]},Hn.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Hn.prototype.distanceTo=function(w){var O=Math.PI/180,Z=this.lat*O,ce=w.lat*O,xe=Math.sin(Z)*Math.sin(ce)+Math.cos(Z)*Math.cos(ce)*Math.cos((w.lng-this.lng)*O);return 63710088e-1*Math.acos(Math.min(xe,1))},Hn.prototype.toBounds=function(w){w===void 0&&(w=0);var O=360*w/40075017,Z=O/Math.cos(Math.PI/180*this.lat);return new yn(new Hn(this.lng-Z,this.lat-O),new Hn(this.lng+Z,this.lat+O))},Hn.convert=function(w){if(w instanceof Hn)return w;if(Array.isArray(w)&&(w.length===2||w.length===3))return new Hn(Number(w[0]),Number(w[1]));if(!Array.isArray(w)&&typeof w=="object"&&w!==null)return new Hn(Number("lng"in w?w.lng:w.lon),Number(w.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ha=2*Math.PI*63710088e-1;function gi(w){return Ha*Math.cos(w*Math.PI/180)}function Pi(w){return(180+w)/360}function mo(w){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+w*Math.PI/360)))/360}function Do(w,O){return w/gi(O)}function tl(w){return 360/Math.PI*Math.atan(Math.exp((180-360*w)*Math.PI/180))-90}var Os=function(w,O,Z){Z===void 0&&(Z=0),this.x=+w,this.y=+O,this.z=+Z};Os.fromLngLat=function(w,O){O===void 0&&(O=0);var Z=Hn.convert(w);return new Os(Pi(Z.lng),mo(Z.lat),Do(O,Z.lat))},Os.prototype.toLngLat=function(){return new Hn(360*this.x-180,tl(this.y))},Os.prototype.toAltitude=function(){return this.z*gi(tl(this.y))},Os.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ha*(w=tl(this.y),1/Math.cos(w*Math.PI/180));var w};var Fs=function(w,O,Z){this.z=w,this.x=O,this.y=Z,this.key=kl(0,w,w,O,Z)};Fs.prototype.equals=function(w){return this.z===w.z&&this.x===w.x&&this.y===w.y},Fs.prototype.url=function(w,O){var Z,ce,xe,we,Re,Ke=(ce=this.y,xe=this.z,we=ca(256*(Z=this.x),256*(ce=Math.pow(2,xe)-ce-1),xe),Re=ca(256*(Z+1),256*(ce+1),xe),we[0]+","+we[1]+","+Re[0]+","+Re[1]),pt=function(Et,Ot,Ht){for(var Jt,lr="",Ar=Et;Ar>0;Ar--)lr+=(Ot&(Jt=1<<Ar-1)?1:0)+(Ht&Jt?2:0);return lr}(this.z,this.x,this.y);return w[(this.x+this.y)%w.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(O==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",pt).replace("{bbox-epsg-3857}",Ke)},Fs.prototype.getTilePoint=function(w){var O=Math.pow(2,this.z);return new u(8192*(w.x*O-this.x),8192*(w.y*O-this.y))},Fs.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var su=function(w,O){this.wrap=w,this.canonical=O,this.key=kl(w,O.z,O.z,O.x,O.y)},io=function(w,O,Z,ce,xe){this.overscaledZ=w,this.wrap=O,this.canonical=new Fs(Z,+ce,+xe),this.key=kl(O,w,Z,ce,xe)};function kl(w,O,Z,ce,xe){(w*=2)<0&&(w=-1*w-1);var we=1<<Z;return(we*we*w+we*xe+ce).toString(36)+Z.toString(36)+O.toString(36)}io.prototype.equals=function(w){return this.overscaledZ===w.overscaledZ&&this.wrap===w.wrap&&this.canonical.equals(w.canonical)},io.prototype.scaledTo=function(w){var O=this.canonical.z-w;return w>this.canonical.z?new io(w,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new io(w,this.wrap,w,this.canonical.x>>O,this.canonical.y>>O)},io.prototype.calculateScaledKey=function(w,O){var Z=this.canonical.z-w;return w>this.canonical.z?kl(this.wrap*+O,w,this.canonical.z,this.canonical.x,this.canonical.y):kl(this.wrap*+O,w,w,this.canonical.x>>Z,this.canonical.y>>Z)},io.prototype.isChildOf=function(w){if(w.wrap!==this.wrap)return!1;var O=this.canonical.z-w.canonical.z;return w.overscaledZ===0||w.overscaledZ<this.overscaledZ&&w.canonical.x===this.canonical.x>>O&&w.canonical.y===this.canonical.y>>O},io.prototype.children=function(w){if(this.overscaledZ>=w)return[new io(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var O=this.canonical.z+1,Z=2*this.canonical.x,ce=2*this.canonical.y;return[new io(O,this.wrap,O,Z,ce),new io(O,this.wrap,O,Z+1,ce),new io(O,this.wrap,O,Z,ce+1),new io(O,this.wrap,O,Z+1,ce+1)]},io.prototype.isLessThan=function(w){return this.wrap<w.wrap||!(this.wrap>w.wrap)&&(this.overscaledZ<w.overscaledZ||!(this.overscaledZ>w.overscaledZ)&&(this.canonical.x<w.canonical.x||!(this.canonical.x>w.canonical.x)&&this.canonical.y<w.canonical.y))},io.prototype.wrapped=function(){return new io(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},io.prototype.unwrapTo=function(w){return new io(this.overscaledZ,w,this.canonical.z,this.canonical.x,this.canonical.y)},io.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},io.prototype.toUnwrapped=function(){return new su(this.wrap,this.canonical)},io.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},io.prototype.getTilePoint=function(w){return this.canonical.getTilePoint(new Os(w.x-this.wrap,w.y))},na("CanonicalTileID",Fs),na("OverscaledTileID",io,{omit:["posMatrix"]});var lu=function(w,O,Z){if(this.uid=w,O.height!==O.width)throw new RangeError("DEM tiles must be square");if(Z&&Z!=="mapbox"&&Z!=="terrarium")return E('"'+Z+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=O.height;var ce=this.dim=O.height-2;this.data=new Uint32Array(O.data.buffer),this.encoding=Z||"mapbox";for(var xe=0;xe<ce;xe++)this.data[this._idx(-1,xe)]=this.data[this._idx(0,xe)],this.data[this._idx(ce,xe)]=this.data[this._idx(ce-1,xe)],this.data[this._idx(xe,-1)]=this.data[this._idx(xe,0)],this.data[this._idx(xe,ce)]=this.data[this._idx(xe,ce-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ce,-1)]=this.data[this._idx(ce-1,0)],this.data[this._idx(-1,ce)]=this.data[this._idx(0,ce-1)],this.data[this._idx(ce,ce)]=this.data[this._idx(ce-1,ce-1)]};lu.prototype.get=function(w,O){var Z=new Uint8Array(this.data.buffer),ce=4*this._idx(w,O);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(Z[ce],Z[ce+1],Z[ce+2])},lu.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},lu.prototype._idx=function(w,O){if(w<-1||w>=this.dim+1||O<-1||O>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(O+1)*this.stride+(w+1)},lu.prototype._unpackMapbox=function(w,O,Z){return(256*w*256+256*O+Z)/10-1e4},lu.prototype._unpackTerrarium=function(w,O,Z){return 256*w+O+Z/256-32768},lu.prototype.getPixels=function(){return new ls({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},lu.prototype.backfillBorder=function(w,O,Z){if(this.dim!==w.dim)throw new Error("dem dimension mismatch");var ce=O*this.dim,xe=O*this.dim+this.dim,we=Z*this.dim,Re=Z*this.dim+this.dim;switch(O){case-1:ce=xe-1;break;case 1:xe=ce+1}switch(Z){case-1:we=Re-1;break;case 1:Re=we+1}for(var Ke=-O*this.dim,pt=-Z*this.dim,Et=we;Et<Re;Et++)for(var Ot=ce;Ot<xe;Ot++)this.data[this._idx(Ot,Et)]=w.data[this._idx(Ot+Ke,Et+pt)]},na("DEMData",lu);var Cp=function(w){this._stringToNumber={},this._numberToString=[];for(var O=0;O<w.length;O++){var Z=w[O];this._stringToNumber[Z]=O,this._numberToString[O]=Z}};Cp.prototype.encode=function(w){return this._stringToNumber[w]},Cp.prototype.decode=function(w){return this._numberToString[w]};var wu=function(w,O,Z,ce,xe){this.type="Feature",this._vectorTileFeature=w,w._z=O,w._x=Z,w._y=ce,this.properties=w.properties,this.id=xe},rl={geometry:{configurable:!0}};rl.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},rl.geometry.set=function(w){this._geometry=w},wu.prototype.toJSON=function(){var w={geometry:this.geometry};for(var O in this)O!=="_geometry"&&O!=="_vectorTileFeature"&&(w[O]=this[O]);return w},Object.defineProperties(wu.prototype,rl);var Ml=function(){this.state={},this.stateChanges={},this.deletedStates={}};Ml.prototype.updateState=function(w,O,Z){var ce=String(O);if(this.stateChanges[w]=this.stateChanges[w]||{},this.stateChanges[w][ce]=this.stateChanges[w][ce]||{},y(this.stateChanges[w][ce],Z),this.deletedStates[w]===null)for(var xe in this.deletedStates[w]={},this.state[w])xe!==ce&&(this.deletedStates[w][xe]=null);else if(this.deletedStates[w]&&this.deletedStates[w][ce]===null)for(var we in this.deletedStates[w][ce]={},this.state[w][ce])Z[we]||(this.deletedStates[w][ce][we]=null);else for(var Re in Z)this.deletedStates[w]&&this.deletedStates[w][ce]&&this.deletedStates[w][ce][Re]===null&&delete this.deletedStates[w][ce][Re]},Ml.prototype.removeFeatureState=function(w,O,Z){if(this.deletedStates[w]!==null){var ce=String(O);if(this.deletedStates[w]=this.deletedStates[w]||{},Z&&O!==void 0)this.deletedStates[w][ce]!==null&&(this.deletedStates[w][ce]=this.deletedStates[w][ce]||{},this.deletedStates[w][ce][Z]=null);else if(O!==void 0)if(this.stateChanges[w]&&this.stateChanges[w][ce])for(Z in this.deletedStates[w][ce]={},this.stateChanges[w][ce])this.deletedStates[w][ce][Z]=null;else this.deletedStates[w][ce]=null;else this.deletedStates[w]=null}},Ml.prototype.getState=function(w,O){var Z=String(O),ce=y({},(this.state[w]||{})[Z],(this.stateChanges[w]||{})[Z]);if(this.deletedStates[w]===null)return{};if(this.deletedStates[w]){var xe=this.deletedStates[w][O];if(xe===null)return{};for(var we in xe)delete ce[we]}return ce},Ml.prototype.initializeTileState=function(w,O){w.setFeatureState(this.state,O)},Ml.prototype.coalesceChanges=function(w,O){var Z={};for(var ce in this.stateChanges){this.state[ce]=this.state[ce]||{};var xe={};for(var we in this.stateChanges[ce])this.state[ce][we]||(this.state[ce][we]={}),y(this.state[ce][we],this.stateChanges[ce][we]),xe[we]=this.state[ce][we];Z[ce]=xe}for(var Re in this.deletedStates){this.state[Re]=this.state[Re]||{};var Ke={};if(this.deletedStates[Re]===null)for(var pt in this.state[Re])Ke[pt]={},this.state[Re][pt]={};else for(var Et in this.deletedStates[Re]){if(this.deletedStates[Re][Et]===null)this.state[Re][Et]={};else for(var Ot=0,Ht=Object.keys(this.deletedStates[Re][Et]);Ot<Ht.length;Ot+=1)delete this.state[Re][Et][Ht[Ot]];Ke[Et]=this.state[Re][Et]}Z[Re]=Z[Re]||{},y(Z[Re],Ke)}if(this.stateChanges={},this.deletedStates={},Object.keys(Z).length!==0)for(var Jt in w)w[Jt].setFeatureState(Z,O)};var Sl=function(w,O){this.tileID=w,this.x=w.canonical.x,this.y=w.canonical.y,this.z=w.canonical.z,this.grid=new Jn(8192,16,0),this.grid3D=new Jn(8192,16,0),this.featureIndexArray=new jt,this.promoteId=O};function Zl(w,O,Z,ce,xe){return k(w,function(we,Re){var Ke=O instanceof is?O.get(Re):null;return Ke&&Ke.evaluate?Ke.evaluate(Z,ce,xe):Ke})}function Qf(w){for(var O=1/0,Z=1/0,ce=-1/0,xe=-1/0,we=0,Re=w;we<Re.length;we+=1){var Ke=Re[we];O=Math.min(O,Ke.x),Z=Math.min(Z,Ke.y),ce=Math.max(ce,Ke.x),xe=Math.max(xe,Ke.y)}return{minX:O,minY:Z,maxX:ce,maxY:xe}}function qf(w,O){return O-w}Sl.prototype.insert=function(w,O,Z,ce,xe,we){var Re=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Z,ce,xe);for(var Ke=we?this.grid3D:this.grid,pt=0;pt<O.length;pt++){for(var Et=O[pt],Ot=[1/0,1/0,-1/0,-1/0],Ht=0;Ht<Et.length;Ht++){var Jt=Et[Ht];Ot[0]=Math.min(Ot[0],Jt.x),Ot[1]=Math.min(Ot[1],Jt.y),Ot[2]=Math.max(Ot[2],Jt.x),Ot[3]=Math.max(Ot[3],Jt.y)}Ot[0]<8192&&Ot[1]<8192&&Ot[2]>=0&&Ot[3]>=0&&Ke.insert(Re,Ot[0],Ot[1],Ot[2],Ot[3])}},Sl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new vh.VectorTile(new uf(this.rawTileData)).layers,this.sourceLayerCoder=new Cp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Sl.prototype.query=function(w,O,Z,ce){var xe=this;this.loadVTLayers();for(var we=w.params||{},Re=8192/w.tileSize/w.scale,Ke=dc(we.filter),pt=w.queryGeometry,Et=w.queryPadding*Re,Ot=Qf(pt),Ht=this.grid.query(Ot.minX-Et,Ot.minY-Et,Ot.maxX+Et,Ot.maxY+Et),Jt=Qf(w.cameraQueryGeometry),lr=this.grid3D.query(Jt.minX-Et,Jt.minY-Et,Jt.maxX+Et,Jt.maxY+Et,function(In,On,Kn,xa){return function(Pa,Ka,Ba,ri,Oa){for(var Oi=0,yi=Pa;Oi<yi.length;Oi+=1){var ja=yi[Oi];if(Ka<=ja.x&&Ba<=ja.y&&ri>=ja.x&&Oa>=ja.y)return!0}var Wi=[new u(Ka,Ba),new u(Ka,Oa),new u(ri,Oa),new u(ri,Ba)];if(Pa.length>2){for(var Ci=0,oo=Wi;Ci<oo.length;Ci+=1)if(zu(Pa,oo[Ci]))return!0}for(var $a=0;$a<Pa.length-1;$a++)if(Ff(Pa[$a],Pa[$a+1],Wi))return!0;return!1}(w.cameraQueryGeometry,In-Et,On-Et,Kn+Et,xa+Et)}),Ar=0,Sr=lr;Ar<Sr.length;Ar+=1)Ht.push(Sr[Ar]);Ht.sort(qf);for(var Zr,Br={},ln=function(In){var On=Ht[In];if(On!==Zr){Zr=On;var Kn=xe.featureIndexArray.get(On),xa=null;xe.loadMatchingFeature(Br,Kn.bucketIndex,Kn.sourceLayerIndex,Kn.featureIndex,Ke,we.layers,we.availableImages,O,Z,ce,function(Pa,Ka,Ba){return xa||(xa=ho(Pa)),Ka.queryIntersectsFeature(pt,Pa,Ba,xa,xe.z,w.transform,Re,w.pixelPosMatrix)})}},mn=0;mn<Ht.length;mn++)ln(mn);return Br},Sl.prototype.loadMatchingFeature=function(w,O,Z,ce,xe,we,Re,Ke,pt,Et,Ot){var Ht=this.bucketLayerIDs[O];if(!we||function(xa,Pa){for(var Ka=0;Ka<xa.length;Ka++)if(Pa.indexOf(xa[Ka])>=0)return!0;return!1}(we,Ht)){var Jt=this.sourceLayerCoder.decode(Z),lr=this.vtLayers[Jt].feature(ce);if(xe.filter(new ni(this.tileID.overscaledZ),lr))for(var Ar=this.getId(lr,Jt),Sr=0;Sr<Ht.length;Sr++){var Zr=Ht[Sr];if(!(we&&we.indexOf(Zr)<0)){var Br=Ke[Zr];if(Br){var ln={};Ar!==void 0&&Et&&(ln=Et.getState(Br.sourceLayer||"_geojsonTileLayer",Ar));var mn=pt[Zr];mn.paint=Zl(mn.paint,Br.paint,lr,ln,Re),mn.layout=Zl(mn.layout,Br.layout,lr,ln,Re);var In=!Ot||Ot(lr,Br,ln);if(In){var On=new wu(lr,this.z,this.x,this.y,Ar);On.layer=mn;var Kn=w[Zr];Kn===void 0&&(Kn=w[Zr]=[]),Kn.push({featureIndex:ce,feature:On,intersectionZ:In})}}}}}},Sl.prototype.lookupSymbolFeatures=function(w,O,Z,ce,xe,we,Re,Ke){var pt={};this.loadVTLayers();for(var Et=dc(xe),Ot=0,Ht=w;Ot<Ht.length;Ot+=1)this.loadMatchingFeature(pt,Z,ce,Ht[Ot],Et,we,Re,Ke,O);return pt},Sl.prototype.hasLayer=function(w){for(var O=0,Z=this.bucketLayerIDs;O<Z.length;O+=1)for(var ce=0,xe=Z[O];ce<xe.length;ce+=1)if(w===xe[ce])return!0;return!1},Sl.prototype.getId=function(w,O){var Z=w.id;return this.promoteId&&typeof(Z=w.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[O]])=="boolean"&&(Z=Number(Z)),Z},na("FeatureIndex",Sl,{omit:["rawTileData","sourceLayerCoder"]});var Xo=function(w,O){this.tileID=w,this.uid=m(),this.uses=0,this.tileSize=O,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Xo.prototype.registerFadeDuration=function(w){var O=w+this.timeAdded;O<J.now()||this.fadeEndTime&&O<this.fadeEndTime||(this.fadeEndTime=O)},Xo.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Xo.prototype.loadVectorData=function(w,O,Z){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",w){for(var ce in w.featureIndex&&(this.latestFeatureIndex=w.featureIndex,w.rawTileData?(this.latestRawTileData=w.rawTileData,this.latestFeatureIndex.rawTileData=w.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=w.collisionBoxArray,this.buckets=function(Et,Ot){var Ht={};if(!Ot)return Ht;for(var Jt=function(){var Sr=Ar[lr],Zr=Sr.layerIds.map(function(mn){return Ot.getLayer(mn)}).filter(Boolean);if(Zr.length!==0){Sr.layers=Zr,Sr.stateDependentLayerIds&&(Sr.stateDependentLayers=Sr.stateDependentLayerIds.map(function(mn){return Zr.filter(function(In){return In.id===mn})[0]}));for(var Br=0,ln=Zr;Br<ln.length;Br+=1)Ht[ln[Br].id]=Sr}},lr=0,Ar=Et;lr<Ar.length;lr+=1)Jt();return Ht}(w.buckets,O.style),this.hasSymbolBuckets=!1,this.buckets){var xe=this.buckets[ce];if(xe instanceof ur){if(this.hasSymbolBuckets=!0,!Z)break;xe.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var we in this.buckets){var Re=this.buckets[we];if(Re instanceof ur&&Re.hasRTLText){this.hasRTLText=!0,xo.isLoading()||xo.isLoaded()||vs()!=="deferred"||Js();break}}for(var Ke in this.queryPadding=0,this.buckets){var pt=this.buckets[Ke];this.queryPadding=Math.max(this.queryPadding,O.style.getLayer(Ke).queryRadius(pt))}w.imageAtlas&&(this.imageAtlas=w.imageAtlas),w.glyphAtlasImage&&(this.glyphAtlasImage=w.glyphAtlasImage)}else this.collisionBoxArray=new ne},Xo.prototype.unloadVectorData=function(){for(var w in this.buckets)this.buckets[w].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Xo.prototype.getBucket=function(w){return this.buckets[w.id]},Xo.prototype.upload=function(w){for(var O in this.buckets){var Z=this.buckets[O];Z.uploadPending()&&Z.upload(w)}var ce=w.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ma(w,this.imageAtlas.image,ce.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ma(w,this.glyphAtlasImage,ce.ALPHA),this.glyphAtlasImage=null)},Xo.prototype.prepare=function(w){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(w,this.imageAtlasTexture)},Xo.prototype.queryRenderedFeatures=function(w,O,Z,ce,xe,we,Re,Ke,pt,Et){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ce,cameraQueryGeometry:xe,scale:we,tileSize:this.tileSize,pixelPosMatrix:Et,transform:Ke,params:Re,queryPadding:this.queryPadding*pt},w,O,Z):{}},Xo.prototype.querySourceFeatures=function(w,O){var Z=this.latestFeatureIndex;if(Z&&Z.rawTileData){var ce=Z.loadVTLayers(),xe=O?O.sourceLayer:"",we=ce._geojsonTileLayer||ce[xe];if(we)for(var Re=dc(O&&O.filter),Ke=this.tileID.canonical,pt=Ke.z,Et=Ke.x,Ot=Ke.y,Ht={z:pt,x:Et,y:Ot},Jt=0;Jt<we.length;Jt++){var lr=we.feature(Jt);if(Re.filter(new ni(this.tileID.overscaledZ),lr)){var Ar=Z.getId(lr,xe),Sr=new wu(lr,pt,Et,Ot,Ar);Sr.tile=Ht,w.push(Sr)}}}},Xo.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Xo.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Xo.prototype.setExpiryData=function(w){var O=this.expirationTime;if(w.cacheControl){var Z=F(w.cacheControl);Z["max-age"]&&(this.expirationTime=Date.now()+1e3*Z["max-age"])}else w.expires&&(this.expirationTime=new Date(w.expires).getTime());if(this.expirationTime){var ce=Date.now(),xe=!1;if(this.expirationTime>ce)xe=!1;else if(O)if(this.expirationTime<O)xe=!0;else{var we=this.expirationTime-O;we?this.expirationTime=ce+Math.max(we,3e4):xe=!0}else xe=!0;xe?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Xo.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Xo.prototype.setFeatureState=function(w,O){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(w).length!==0){var Z=this.latestFeatureIndex.loadVTLayers();for(var ce in this.buckets)if(O.style.hasLayer(ce)){var xe=this.buckets[ce],we=xe.layers[0].sourceLayer||"_geojsonTileLayer",Re=Z[we],Ke=w[we];if(Re&&Ke&&Object.keys(Ke).length!==0){xe.update(Ke,Re,this.imageAtlas&&this.imageAtlas.patternPositions||{});var pt=O&&O.style&&O.style.getLayer(ce);pt&&(this.queryPadding=Math.max(this.queryPadding,pt.queryRadius(xe)))}}}},Xo.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Xo.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<J.now()},Xo.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Xo.prototype.setHoldDuration=function(w){this.symbolFadeHoldUntil=J.now()+w},Xo.prototype.setDependencies=function(w,O){for(var Z={},ce=0,xe=O;ce<xe.length;ce+=1)Z[xe[ce]]=!0;this.dependencies[w]=Z},Xo.prototype.hasDependency=function(w,O){for(var Z=0,ce=w;Z<ce.length;Z+=1){var xe=this.dependencies[ce[Z]];if(xe){for(var we=0,Re=O;we<Re.length;we+=1)if(xe[Re[we]])return!0}}return!1};var sc=self.performance,kd=function(w){this._marks={start:[w.url,"start"].join("#"),end:[w.url,"end"].join("#"),measure:w.url.toString()},sc.mark(this._marks.start)};kd.prototype.finish=function(){sc.mark(this._marks.end);var w=sc.getEntriesByName(this._marks.measure);return w.length===0&&(sc.measure(this._marks.measure,this._marks.start,this._marks.end),w=sc.getEntriesByName(this._marks.measure),sc.clearMarks(this._marks.start),sc.clearMarks(this._marks.end),sc.clearMeasures(this._marks.measure)),w},t.Actor=$n,t.AlphaImage=ou,t.CanonicalTileID=Fs,t.CollisionBoxArray=ne,t.Color=_r,t.DEMData=lu,t.DataConstantProperty=Ea,t.DictionaryCoder=Cp,t.EXTENT=8192,t.ErrorEvent=Be,t.EvaluationParameters=ni,t.Event=Le,t.Evented=et,t.FeatureIndex=Sl,t.FillBucket=ju,t.FillExtrusionBucket=Gu,t.ImageAtlas=Jh,t.ImagePosition=kp,t.LineBucket=qs,t.LngLat=Hn,t.LngLatBounds=yn,t.MercatorCoordinate=Os,t.ONE_EM=24,t.OverscaledTileID=io,t.Point=u,t.Point$1=u,t.Properties=za,t.Protobuf=uf,t.RGBAImage=ls,t.RequestManager=ee,t.RequestPerformance=kd,t.ResourceType=St,t.SegmentVector=pr,t.SourceFeatureState=Ml,t.StructArrayLayout1ui2=Ro,t.StructArrayLayout2f1f2i16=wl,t.StructArrayLayout2i4=ks,t.StructArrayLayout3ui6=Vo,t.StructArrayLayout4i8=or,t.SymbolBucket=ur,t.Texture=ma,t.Tile=Xo,t.Transitionable=no,t.Uniform1f=pa,t.Uniform1i=qn,t.Uniform2f=ua,t.Uniform3f=wa,t.Uniform4f=Da,t.UniformColor=oi,t.UniformMatrix4f=Fi,t.UnwrappedTileID=su,t.ValidationError=Ie,t.WritingMode=_u,t.ZoomHistory=xi,t.add=function(w,O,Z){return w[0]=O[0]+Z[0],w[1]=O[1]+Z[1],w[2]=O[2]+Z[2],w},t.addDynamicAttributes=mt,t.asyncAll=function(w,O,Z){if(!w.length)return Z(null,[]);var ce=w.length,xe=new Array(w.length),we=null;w.forEach(function(Re,Ke){O(Re,function(pt,Et){pt&&(we=pt),xe[Ke]=Et,--ce==0&&Z(we,xe)})})},t.bezier=i,t.bindAll=g,t.browser=J,t.cacheEntryPossiblyAdded=function(w){++Ve>Ne&&(w.getActor().send("enforceCacheSizeLimit",Ae),Ve=0)},t.clamp=p,t.clearTileCache=function(w){var O=self.caches.delete("mapbox-tiles");w&&O.catch(w).then(function(){return w()})},t.clipLine=Ad,t.clone=function(w){var O=new ws(16);return O[0]=w[0],O[1]=w[1],O[2]=w[2],O[3]=w[3],O[4]=w[4],O[5]=w[5],O[6]=w[6],O[7]=w[7],O[8]=w[8],O[9]=w[9],O[10]=w[10],O[11]=w[11],O[12]=w[12],O[13]=w[13],O[14]=w[14],O[15]=w[15],O},t.clone$1=L,t.clone$2=function(w){var O=new ws(3);return O[0]=w[0],O[1]=w[1],O[2]=w[2],O},t.collisionCircleLayout=gv,t.config=oe,t.create=function(){var w=new ws(16);return ws!=Float32Array&&(w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=0,w[12]=0,w[13]=0,w[14]=0),w[0]=1,w[5]=1,w[10]=1,w[15]=1,w},t.create$1=function(){var w=new ws(9);return ws!=Float32Array&&(w[1]=0,w[2]=0,w[3]=0,w[5]=0,w[6]=0,w[7]=0),w[0]=1,w[4]=1,w[8]=1,w},t.create$2=function(){var w=new ws(4);return ws!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w},t.createCommonjsModule=f,t.createExpression=hl,t.createLayout=Qi,t.createStyleLayer=function(w){return w.type==="custom"?new vn(w):new hn[w.type](w)},t.cross=function(w,O,Z){var ce=O[0],xe=O[1],we=O[2],Re=Z[0],Ke=Z[1],pt=Z[2];return w[0]=xe*pt-we*Ke,w[1]=we*Re-ce*pt,w[2]=ce*Ke-xe*Re,w},t.deepEqual=function w(O,Z){if(Array.isArray(O)){if(!Array.isArray(Z)||O.length!==Z.length)return!1;for(var ce=0;ce<O.length;ce++)if(!w(O[ce],Z[ce]))return!1;return!0}if(typeof O=="object"&&O!==null&&Z!==null){if(typeof Z!="object"||Object.keys(O).length!==Object.keys(Z).length)return!1;for(var xe in O)if(!w(O[xe],Z[xe]))return!1;return!0}return O===Z},t.dot=function(w,O){return w[0]*O[0]+w[1]*O[1]+w[2]*O[2]},t.dot$1=function(w,O){return w[0]*O[0]+w[1]*O[1]+w[2]*O[2]+w[3]*O[3]},t.ease=s,t.emitValidationErrors=Un,t.endsWith=A,t.enforceCacheSizeLimit=function(w){qe(),ke&&ke.then(function(O){O.keys().then(function(Z){for(var ce=0;ce<Z.length-w;ce++)O.delete(Z[ce])})})},t.evaluateSizeForFeature=_h,t.evaluateSizeForZoom=wh,t.evaluateVariableOffset=he,t.evented=as,t.extend=y,t.featureFilter=dc,t.filterObject=R,t.fromRotation=function(w,O){var Z=Math.sin(O),ce=Math.cos(O);return w[0]=ce,w[1]=Z,w[2]=0,w[3]=-Z,w[4]=ce,w[5]=0,w[6]=0,w[7]=0,w[8]=1,w},t.getAnchorAlignment=ic,t.getAnchorJustification=ye,t.getArrayBuffer=Pt,t.getImage=dt,t.getJSON=function(w,O){return rr(y(w,{type:"json"}),O)},t.getRTLTextPluginStatus=vs,t.getReferrer=Qt,t.getVideo=function(w,O){var Z,ce,xe=self.document.createElement("video");xe.muted=!0,xe.onloadstart=function(){O(null,xe)};for(var we=0;we<w.length;we++){var Re=self.document.createElement("source");Z=w[we],ce=void 0,(ce=self.document.createElement("a")).href=Z,(ce.protocol!==self.document.location.protocol||ce.host!==self.document.location.host)&&(xe.crossOrigin="Anonymous"),Re.src=w[we],xe.appendChild(Re)}return{cancel:function(){}}},t.identity=yc,t.invert=function(w,O){var Z=O[0],ce=O[1],xe=O[2],we=O[3],Re=O[4],Ke=O[5],pt=O[6],Et=O[7],Ot=O[8],Ht=O[9],Jt=O[10],lr=O[11],Ar=O[12],Sr=O[13],Zr=O[14],Br=O[15],ln=Z*Ke-ce*Re,mn=Z*pt-xe*Re,In=Z*Et-we*Re,On=ce*pt-xe*Ke,Kn=ce*Et-we*Ke,xa=xe*Et-we*pt,Pa=Ot*Sr-Ht*Ar,Ka=Ot*Zr-Jt*Ar,Ba=Ot*Br-lr*Ar,ri=Ht*Zr-Jt*Sr,Oa=Ht*Br-lr*Sr,Oi=Jt*Br-lr*Zr,yi=ln*Oi-mn*Oa+In*ri+On*Ba-Kn*Ka+xa*Pa;return yi?(w[0]=(Ke*Oi-pt*Oa+Et*ri)*(yi=1/yi),w[1]=(xe*Oa-ce*Oi-we*ri)*yi,w[2]=(Sr*xa-Zr*Kn+Br*On)*yi,w[3]=(Jt*Kn-Ht*xa-lr*On)*yi,w[4]=(pt*Ba-Re*Oi-Et*Ka)*yi,w[5]=(Z*Oi-xe*Ba+we*Ka)*yi,w[6]=(Zr*In-Ar*xa-Br*mn)*yi,w[7]=(Ot*xa-Jt*In+lr*mn)*yi,w[8]=(Re*Oa-Ke*Ba+Et*Pa)*yi,w[9]=(ce*Ba-Z*Oa-we*Pa)*yi,w[10]=(Ar*Kn-Sr*In+Br*ln)*yi,w[11]=(Ht*In-Ot*Kn-lr*ln)*yi,w[12]=(Ke*Ka-Re*ri-pt*Pa)*yi,w[13]=(Z*ri-ce*Ka+xe*Pa)*yi,w[14]=(Sr*mn-Ar*On-Zr*ln)*yi,w[15]=(Ot*On-Ht*mn+Jt*ln)*yi,w):null},t.isChar=Zn,t.isMapboxURL=ae,t.keysDifference=function(w,O){var Z=[];for(var ce in w)ce in O||Z.push(ce);return Z},t.makeRequest=rr,t.mapObject=k,t.mercatorXfromLng=Pi,t.mercatorYfromLat=mo,t.mercatorZfromAltitude=Do,t.mul=zl,t.multiply=ss,t.mvt=vh,t.normalize=function(w,O){var Z=O[0],ce=O[1],xe=O[2],we=Z*Z+ce*ce+xe*xe;return we>0&&(we=1/Math.sqrt(we)),w[0]=O[0]*we,w[1]=O[1]*we,w[2]=O[2]*we,w},t.number=Yr,t.offscreenCanvasSupported=ft,t.ortho=function(w,O,Z,ce,xe,we,Re){var Ke=1/(O-Z),pt=1/(ce-xe),Et=1/(we-Re);return w[0]=-2*Ke,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=-2*pt,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=2*Et,w[11]=0,w[12]=(O+Z)*Ke,w[13]=(xe+ce)*pt,w[14]=(Re+we)*Et,w[15]=1,w},t.parseGlyphPBF=function(w){return new uf(w).readFields(N0,[])},t.pbf=uf,t.performSymbolLayout=function(w,O,Z,ce,xe,we,Re){w.createArrays(),w.tilePixelRatio=8192/(512*w.overscaling),w.compareText={},w.iconsNeedLinear=!1;var Ke=w.layers[0].layout,pt=w.layers[0]._unevaluatedLayout._values,Et={};if(w.textSizeData.kind==="composite"){var Ot=w.textSizeData,Ht=Ot.maxZoom;Et.compositeTextSizes=[pt["text-size"].possiblyEvaluate(new ni(Ot.minZoom),Re),pt["text-size"].possiblyEvaluate(new ni(Ht),Re)]}if(w.iconSizeData.kind==="composite"){var Jt=w.iconSizeData,lr=Jt.maxZoom;Et.compositeIconSizes=[pt["icon-size"].possiblyEvaluate(new ni(Jt.minZoom),Re),pt["icon-size"].possiblyEvaluate(new ni(lr),Re)]}Et.layoutTextSize=pt["text-size"].possiblyEvaluate(new ni(w.zoom+1),Re),Et.layoutIconSize=pt["icon-size"].possiblyEvaluate(new ni(w.zoom+1),Re),Et.textMaxSize=pt["text-size"].possiblyEvaluate(new ni(18));for(var Ar=24*Ke.get("text-line-height"),Sr=Ke.get("text-rotation-alignment")==="map"&&Ke.get("symbol-placement")!=="point",Zr=Ke.get("text-keep-upright"),Br=Ke.get("text-size"),ln=function(){var On=In[mn],Kn=Ke.get("text-font").evaluate(On,{},Re).join(","),xa=Br.evaluate(On,{},Re),Pa=Et.layoutTextSize.evaluate(On,{},Re),Ka=Et.layoutIconSize.evaluate(On,{},Re),Ba={horizontal:{},vertical:void 0},ri=On.text,Oa=[0,0];if(ri){var Oi=ri.toString(),yi=24*Ke.get("text-letter-spacing").evaluate(On,{},Re),ja=function(qi){for(var Eo=0,Ko=qi;Eo<Ko.length;Eo+=1)if(so=Ko[Eo].charCodeAt(0),Zn.Arabic(so)||Zn["Arabic Supplement"](so)||Zn["Arabic Extended-A"](so)||Zn["Arabic Presentation Forms-A"](so)||Zn["Arabic Presentation Forms-B"](so))return!1;var so;return!0}(Oi)?yi:0,Wi=Ke.get("text-anchor").evaluate(On,{},Re),Ci=Ke.get("text-variable-anchor");if(!Ci){var oo=Ke.get("text-radial-offset").evaluate(On,{},Re);Oa=oo?he(Wi,[24*oo,Y]):Ke.get("text-offset").evaluate(On,{},Re).map(function(qi){return 24*qi})}var $a=Sr?"center":Ke.get("text-justify").evaluate(On,{},Re),po=Ke.get("symbol-placement"),Ho=po==="point"?24*Ke.get("text-max-width").evaluate(On,{},Re):0,nl=function(){w.allowVerticalPlacement&&wi(Oi)&&(Ba.vertical=yh(ri,O,Z,xe,Kn,Ho,Ar,Wi,"left",ja,Oa,_u.vertical,!0,po,Pa,xa))};if(!Sr&&Ci){for(var al=$a==="auto"?Ci.map(function(qi){return ye(qi)}):[$a],Zo=!1,gs=0;gs<al.length;gs++){var Io=al[gs];if(!Ba.horizontal[Io])if(Zo)Ba.horizontal[Io]=Ba.horizontal[0];else{var Us=yh(ri,O,Z,xe,Kn,Ho,Ar,"center",Io,ja,Oa,_u.horizontal,!1,po,Pa,xa);Us&&(Ba.horizontal[Io]=Us,Zo=Us.positionedLines.length===1)}}nl()}else{$a==="auto"&&($a=ye(Wi));var Kl=yh(ri,O,Z,xe,Kn,Ho,Ar,Wi,$a,ja,Oa,_u.horizontal,!1,po,Pa,xa);Kl&&(Ba.horizontal[$a]=Kl),nl(),wi(Oi)&&Sr&&Zr&&(Ba.vertical=yh(ri,O,Z,xe,Kn,Ho,Ar,Wi,$a,ja,Oa,_u.vertical,!1,po,Pa,xa))}}var Vs=void 0,$l=!1;if(On.icon&&On.icon.name){var Hs=ce[On.icon.name];Hs&&(Vs=function(qi,Eo,Ko){var so=ic(Ko),Ns=Eo[0]-qi.displaySize[0]*so.horizontalAlign,Fl=Eo[1]-qi.displaySize[1]*so.verticalAlign;return{image:qi,top:Fl,bottom:Fl+qi.displaySize[1],left:Ns,right:Ns+qi.displaySize[0]}}(xe[On.icon.name],Ke.get("icon-offset").evaluate(On,{},Re),Ke.get("icon-anchor").evaluate(On,{},Re)),$l=Hs.sdf,w.sdfIcons===void 0?w.sdfIcons=Hs.sdf:w.sdfIcons!==Hs.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Hs.pixelRatio!==w.pixelRatio||Ke.get("icon-rotate").constantOr(1)!==0)&&(w.iconsNeedLinear=!0))}var js=Ee(Ba.horizontal)||Ba.vertical;w.iconsInText=!!js&&js.iconsInText,(js||Vs)&&function(qi,Eo,Ko,so,Ns,Fl,il,Ts,ol,$o,ko){var Yu=Fl.textMaxSize.evaluate(Eo,{});Yu===void 0&&(Yu=il);var gf,jo=qi.layers[0].layout,Ni=jo.get("icon-offset").evaluate(Eo,{},ko),wc=Ee(Ko.horizontal),Nl=il/24,ys=qi.tilePixelRatio*Nl,Lp=qi.tilePixelRatio*Yu/24,Tu=qi.tilePixelRatio*Ts,Pp=qi.tilePixelRatio*jo.get("symbol-spacing"),Ev=jo.get("text-padding")*qi.tilePixelRatio,Rp=jo.get("icon-padding")*qi.tilePixelRatio,Md=jo.get("text-max-angle")/180*Math.PI,Cv=jo.get("text-rotation-alignment")==="map"&&jo.get("symbol-placement")!=="point",Dp=jo.get("icon-rotation-alignment")==="map"&&jo.get("symbol-placement")!=="point",eh=jo.get("symbol-placement"),lc=Pp/2,tp=jo.get("icon-text-fit");so&&tp!=="none"&&(qi.allowVerticalPlacement&&Ko.vertical&&(gf=pf(so,Ko.vertical,tp,jo.get("icon-text-fit-padding"),Ni,Nl)),wc&&(so=pf(so,wc,tp,jo.get("icon-text-fit-padding"),Ni,Nl)));var Hc=function(_g,uc){uc.x<0||uc.x>=8192||uc.y<0||uc.y>=8192||function(ci,Tc,Ac,th,H0,Go,Pv,Gc,rp,Id,Rv,Dv,j0,wg,zd,Tg,Ag,kg,Mg,Sg,Xu,Iv,zv,bf,G0){var Eg,np,Fp,Gs,Bl,Np=ci.addToLineVertexArray(Tc,Ac),Cg=0,Lg=0,W0=0,Pg=0,Y0=-1,X0=-1,_f={},Rg=Mr(""),Z0=0,K0=0;if(Gc._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Z0=(Eg=Gc.layout.get("text-offset").evaluate(Xu,{},bf).map(function(Od){return 24*Od}))[0],K0=Eg[1]):(Z0=24*Gc.layout.get("text-radial-offset").evaluate(Xu,{},bf),K0=Y),ci.allowVerticalPlacement&&th.vertical){var $0=Gc.layout.get("text-rotate").evaluate(Xu,{},bf)+90;Gs=new Ep(rp,Tc,Id,Rv,Dv,th.vertical,j0,wg,zd,$0),Pv&&(Bl=new Ep(rp,Tc,Id,Rv,Dv,Pv,Ag,kg,zd,$0))}if(H0){var Ov=Gc.layout.get("icon-rotate").evaluate(Xu,{}),Dg=Gc.layout.get("icon-text-fit")!=="none",Ig=Sp(H0,Ov,zv,Dg),J0=Pv?Sp(Pv,Ov,zv,Dg):void 0;Fp=new Ep(rp,Tc,Id,Rv,Dv,H0,Ag,kg,!1,Ov),Cg=4*Ig.length;var zg=ci.iconSizeData,wf=null;zg.kind==="source"?(wf=[128*Gc.layout.get("icon-size").evaluate(Xu,{})])[0]>32640&&E(ci.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):zg.kind==="composite"&&((wf=[128*Iv.compositeIconSizes[0].evaluate(Xu,{},bf),128*Iv.compositeIconSizes[1].evaluate(Xu,{},bf)])[0]>32640||wf[1]>32640)&&E(ci.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),ci.addSymbols(ci.icon,Ig,wf,Sg,Mg,Xu,!1,Tc,Np.lineStartIndex,Np.lineLength,-1,bf),Y0=ci.icon.placedSymbolArray.length-1,J0&&(Lg=4*J0.length,ci.addSymbols(ci.icon,J0,wf,Sg,Mg,Xu,_u.vertical,Tc,Np.lineStartIndex,Np.lineLength,-1,bf),X0=ci.icon.placedSymbolArray.length-1)}for(var Og in th.horizontal){var Fv=th.horizontal[Og];if(!np){Rg=Mr(Fv.text);var Wy=Gc.layout.get("text-rotate").evaluate(Xu,{},bf);np=new Ep(rp,Tc,Id,Rv,Dv,Fv,j0,wg,zd,Wy)}var Fg=Fv.positionedLines.length===1;if(W0+=_e(ci,Tc,Fv,Go,Gc,zd,Xu,Tg,Np,th.vertical?_u.horizontal:_u.horizontalOnly,Fg?Object.keys(th.horizontal):[Og],_f,Y0,Iv,bf),Fg)break}th.vertical&&(Pg+=_e(ci,Tc,th.vertical,Go,Gc,zd,Xu,Tg,Np,_u.vertical,["vertical"],_f,X0,Iv,bf));var Yy=np?np.boxStartIndex:ci.collisionBoxArray.length,Ng=np?np.boxEndIndex:ci.collisionBoxArray.length,Bg=Gs?Gs.boxStartIndex:ci.collisionBoxArray.length,Xy=Gs?Gs.boxEndIndex:ci.collisionBoxArray.length,Zy=Fp?Fp.boxStartIndex:ci.collisionBoxArray.length,Ky=Fp?Fp.boxEndIndex:ci.collisionBoxArray.length,$y=Bl?Bl.boxStartIndex:ci.collisionBoxArray.length,Jy=Bl?Bl.boxEndIndex:ci.collisionBoxArray.length,Tf=-1,Nv=function(Od,Vg){return Od&&Od.circleDiameter?Math.max(Od.circleDiameter,Vg):Vg};Tf=Nv(np,Tf),Tf=Nv(Gs,Tf),Tf=Nv(Fp,Tf);var Ug=(Tf=Nv(Bl,Tf))>-1?1:0;Ug&&(Tf*=G0/24),ci.glyphOffsetArray.length>=ur.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Xu.sortKey!==void 0&&ci.addToSortKeyRanges(ci.symbolInstances.length,Xu.sortKey),ci.symbolInstances.emplaceBack(Tc.x,Tc.y,_f.right>=0?_f.right:-1,_f.center>=0?_f.center:-1,_f.left>=0?_f.left:-1,_f.vertical||-1,Y0,X0,Rg,Yy,Ng,Bg,Xy,Zy,Ky,$y,Jy,Id,W0,Pg,Cg,Lg,Ug,0,j0,Z0,K0,Tf)}(qi,uc,_g,Ko,so,Ns,gf,qi.layers[0],qi.collisionBoxArray,Eo.index,Eo.sourceLayerIndex,qi.index,ys,Ev,Cv,ol,Tu,Rp,Dp,Ni,Eo,Fl,$o,ko,il)};if(eh==="line")for(var us=0,Ls=Ad(Eo.geometry,0,0,8192,8192);us<Ls.length;us+=1)for(var Sd=Ls[us],Ed=0,Cd=Av(Sd,Pp,Md,Ko.vertical||wc,so,24,Lp,qi.overscaling,8192);Ed<Cd.length;Ed+=1){var Lv=Cd[Ed];wc&&De(qi,wc.text,lc,Lv)||Hc(Sd,Lv)}else if(eh==="line-center")for(var Ld=0,Pd=Eo.geometry;Ld<Pd.length;Ld+=1){var Rd=Pd[Ld];if(Rd.length>1){var Dd=Td(Rd,Md,Ko.vertical||wc,so,24,Lp);Dd&&Hc(Rd,Dd)}}else if(Eo.type==="Polygon")for(var yf=0,Ip=jf(Eo.geometry,0);yf<Ip.length;yf+=1){var zp=Ip[yf],Op=Mv(zp,16);Hc(zp[0],new df(Op.x,Op.y,0))}else if(Eo.type==="LineString")for(var xf=0,uu=Eo.geometry;xf<uu.length;xf+=1){var jc=uu[xf];Hc(jc,new df(jc[0].x,jc[0].y,0))}else if(Eo.type==="Point")for(var B0=0,xg=Eo.geometry;B0<xg.length;B0+=1)for(var U0=0,bg=xg[B0];U0<bg.length;U0+=1){var V0=bg[U0];Hc([V0],new df(V0.x,V0.y,0))}}(w,On,Ba,Vs,ce,Et,Pa,Ka,Oa,$l,Re)},mn=0,In=w.features;mn<In.length;mn+=1)ln();we&&w.generateCollisionDebugBuffers()},t.perspective=function(w,O,Z,ce,xe){var we,Re=1/Math.tan(O/2);return w[0]=Re/Z,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=Re,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=-1,w[12]=0,w[13]=0,w[15]=0,xe!=null&&xe!==1/0?(w[10]=(xe+ce)*(we=1/(ce-xe)),w[14]=2*xe*ce*we):(w[10]=-1,w[14]=-2*ce),w},t.pick=function(w,O){for(var Z={},ce=0;ce<O.length;ce++){var xe=O[ce];xe in w&&(Z[xe]=w[xe])}return Z},t.plugin=xo,t.polygonIntersectsPolygon=xu,t.postMapLoadEvent=Ce,t.postTurnstileEvent=Ze,t.potpack=$h,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=na,t.registerForPluginStateChange=function(w){return w({pluginStatus:Oo,pluginURL:Ji}),as.on("pluginStateChange",w),w},t.rotate=function(w,O,Z){var ce=O[0],xe=O[1],we=O[2],Re=O[3],Ke=Math.sin(Z),pt=Math.cos(Z);return w[0]=ce*pt+we*Ke,w[1]=xe*pt+Re*Ke,w[2]=ce*-Ke+we*pt,w[3]=xe*-Ke+Re*pt,w},t.rotateX=function(w,O,Z){var ce=Math.sin(Z),xe=Math.cos(Z),we=O[4],Re=O[5],Ke=O[6],pt=O[7],Et=O[8],Ot=O[9],Ht=O[10],Jt=O[11];return O!==w&&(w[0]=O[0],w[1]=O[1],w[2]=O[2],w[3]=O[3],w[12]=O[12],w[13]=O[13],w[14]=O[14],w[15]=O[15]),w[4]=we*xe+Et*ce,w[5]=Re*xe+Ot*ce,w[6]=Ke*xe+Ht*ce,w[7]=pt*xe+Jt*ce,w[8]=Et*xe-we*ce,w[9]=Ot*xe-Re*ce,w[10]=Ht*xe-Ke*ce,w[11]=Jt*xe-pt*ce,w},t.rotateZ=function(w,O,Z){var ce=Math.sin(Z),xe=Math.cos(Z),we=O[0],Re=O[1],Ke=O[2],pt=O[3],Et=O[4],Ot=O[5],Ht=O[6],Jt=O[7];return O!==w&&(w[8]=O[8],w[9]=O[9],w[10]=O[10],w[11]=O[11],w[12]=O[12],w[13]=O[13],w[14]=O[14],w[15]=O[15]),w[0]=we*xe+Et*ce,w[1]=Re*xe+Ot*ce,w[2]=Ke*xe+Ht*ce,w[3]=pt*xe+Jt*ce,w[4]=Et*xe-we*ce,w[5]=Ot*xe-Re*ce,w[6]=Ht*xe-Ke*ce,w[7]=Jt*xe-pt*ce,w},t.scale=function(w,O,Z){var ce=Z[0],xe=Z[1],we=Z[2];return w[0]=O[0]*ce,w[1]=O[1]*ce,w[2]=O[2]*ce,w[3]=O[3]*ce,w[4]=O[4]*xe,w[5]=O[5]*xe,w[6]=O[6]*xe,w[7]=O[7]*xe,w[8]=O[8]*we,w[9]=O[9]*we,w[10]=O[10]*we,w[11]=O[11]*we,w[12]=O[12],w[13]=O[13],w[14]=O[14],w[15]=O[15],w},t.scale$1=function(w,O,Z){return w[0]=O[0]*Z,w[1]=O[1]*Z,w[2]=O[2]*Z,w[3]=O[3]*Z,w},t.scale$2=function(w,O,Z){return w[0]=O[0]*Z,w[1]=O[1]*Z,w[2]=O[2]*Z,w},t.setCacheLimits=function(w,O){Ae=w,Ne=O},t.setRTLTextPlugin=function(w,O,Z){if(Z===void 0&&(Z=!1),Oo==="deferred"||Oo==="loading"||Oo==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ji=J.resolveURL(w),Oo="deferred",Lo=O,_o(),Z||Js()},t.sphericalToCartesian=function(w){var O=w[0],Z=w[1],ce=w[2];return Z+=90,Z*=Math.PI/180,ce*=Math.PI/180,{x:O*Math.cos(Z)*Math.sin(ce),y:O*Math.sin(Z)*Math.sin(ce),z:O*Math.cos(ce)}},t.sqrLen=function(w){var O=w[0],Z=w[1];return O*O+Z*Z},t.styleSpec=Me,t.sub=function(w,O,Z){return w[0]=O[0]-Z[0],w[1]=O[1]-Z[1],w[2]=O[2]-Z[2],w},t.symbolSize=wv,t.transformMat3=function(w,O,Z){var ce=O[0],xe=O[1],we=O[2];return w[0]=ce*Z[0]+xe*Z[3]+we*Z[6],w[1]=ce*Z[1]+xe*Z[4]+we*Z[7],w[2]=ce*Z[2]+xe*Z[5]+we*Z[8],w},t.transformMat4=nc,t.translate=function(w,O,Z){var ce,xe,we,Re,Ke,pt,Et,Ot,Ht,Jt,lr,Ar,Sr=Z[0],Zr=Z[1],Br=Z[2];return O===w?(w[12]=O[0]*Sr+O[4]*Zr+O[8]*Br+O[12],w[13]=O[1]*Sr+O[5]*Zr+O[9]*Br+O[13],w[14]=O[2]*Sr+O[6]*Zr+O[10]*Br+O[14],w[15]=O[3]*Sr+O[7]*Zr+O[11]*Br+O[15]):(xe=O[1],we=O[2],Re=O[3],Ke=O[4],pt=O[5],Et=O[6],Ot=O[7],Ht=O[8],Jt=O[9],lr=O[10],Ar=O[11],w[0]=ce=O[0],w[1]=xe,w[2]=we,w[3]=Re,w[4]=Ke,w[5]=pt,w[6]=Et,w[7]=Ot,w[8]=Ht,w[9]=Jt,w[10]=lr,w[11]=Ar,w[12]=ce*Sr+Ke*Zr+Ht*Br+O[12],w[13]=xe*Sr+pt*Zr+Jt*Br+O[13],w[14]=we*Sr+Et*Zr+lr*Br+O[14],w[15]=Re*Sr+Ot*Zr+Ar*Br+O[15]),w},t.triggerPluginCompletionEvent=Zi,t.uniqueId=m,t.validateCustomStyleLayer=function(w){var O=[],Z=w.id;return Z===void 0&&O.push({message:"layers."+Z+': missing required property "id"'}),w.render===void 0&&O.push({message:"layers."+Z+': missing required method "render"'}),w.renderingMode&&w.renderingMode!=="2d"&&w.renderingMode!=="3d"&&O.push({message:"layers."+Z+': property "renderingMode" must be either "2d" or "3d"'}),O},t.validateLight=Pn,t.validateStyle=ia,t.values=function(w){var O=[];for(var Z in w)O.push(w[Z]);return O},t.vectorTile=vh,t.version="1.10.1",t.warnOnce=E,t.webpSupported=ie,t.window=self,t.wrap=d}),c(["./shared"],function(t){function f(Te){var Le=typeof Te;if(Le==="number"||Le==="boolean"||Le==="string"||Te==null)return JSON.stringify(Te);if(Array.isArray(Te)){for(var Be="[",et=0,Me=Te;et<Me.length;et+=1)Be+=f(Me[et])+",";return Be+"]"}for(var Ie=Object.keys(Te).sort(),He="{",Xe=0;Xe<Ie.length;Xe++)He+=JSON.stringify(Ie[Xe])+":"+f(Te[Ie[Xe]])+",";return He+"}"}function a(Te){for(var Le="",Be=0,et=t.refProperties;Be<et.length;Be+=1)Le+="/"+f(Te[et[Be]]);return Le}var o=function(Te){this.keyCache={},Te&&this.replace(Te)};o.prototype.replace=function(Te){this._layerConfigs={},this._layers={},this.update(Te,[])},o.prototype.update=function(Te,Le){for(var Be=this,et=0,Me=Te;et<Me.length;et+=1){var Ie=Me[et];this._layerConfigs[Ie.id]=Ie;var He=this._layers[Ie.id]=t.createStyleLayer(Ie);He._featureFilter=t.featureFilter(He.filter),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id]}for(var Xe=0,ht=Le;Xe<ht.length;Xe+=1){var it=ht[Xe];delete this.keyCache[it],delete this._layerConfigs[it],delete this._layers[it]}this.familiesBySource={};for(var Ge=0,ot=function(Fe,_t){for(var Mt={},wt=0;wt<Fe.length;wt++){var Dt=_t&&_t[Fe[wt].id]||a(Fe[wt]);_t&&(_t[Fe[wt].id]=Dt);var Rt=Mt[Dt];Rt||(Rt=Mt[Dt]=[]),Rt.push(Fe[wt])}var Bt=[];for(var Nt in Mt)Bt.push(Mt[Nt]);return Bt}(t.values(this._layerConfigs),this.keyCache);Ge<ot.length;Ge+=1){var Je=ot[Ge].map(function(Fe){return Be._layers[Fe.id]}),st=Je[0];if(st.visibility!=="none"){var It=st.source||"",Ft=this.familiesBySource[It];Ft||(Ft=this.familiesBySource[It]={});var nr=st.sourceLayer||"_geojsonTileLayer",We=Ft[nr];We||(We=Ft[nr]=[]),We.push(Je)}}};var u=function(Te){var Le={},Be=[];for(var et in Te){var Me=Te[et],Ie=Le[et]={};for(var He in Me){var Xe=Me[+He];if(Xe&&Xe.bitmap.width!==0&&Xe.bitmap.height!==0){var ht={x:0,y:0,w:Xe.bitmap.width+2,h:Xe.bitmap.height+2};Be.push(ht),Ie[He]={rect:ht,metrics:Xe.metrics}}}}var it=t.potpack(Be),Ge=new t.AlphaImage({width:it.w||1,height:it.h||1});for(var ot in Te){var Je=Te[ot];for(var st in Je){var It=Je[+st];if(It&&It.bitmap.width!==0&&It.bitmap.height!==0){var Ft=Le[ot][st].rect;t.AlphaImage.copy(It.bitmap,Ge,{x:0,y:0},{x:Ft.x+1,y:Ft.y+1},It.bitmap)}}}this.image=Ge,this.positions=Le};t.register("GlyphAtlas",u);var h=function(Te){this.tileID=new t.OverscaledTileID(Te.tileID.overscaledZ,Te.tileID.wrap,Te.tileID.canonical.z,Te.tileID.canonical.x,Te.tileID.canonical.y),this.uid=Te.uid,this.zoom=Te.zoom,this.pixelRatio=Te.pixelRatio,this.tileSize=Te.tileSize,this.source=Te.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Te.showCollisionBoxes,this.collectResourceTiming=!!Te.collectResourceTiming,this.returnDependencies=!!Te.returnDependencies,this.promoteId=Te.promoteId};function i(Te,Le,Be){for(var et=new t.EvaluationParameters(Le),Me=0,Ie=Te;Me<Ie.length;Me+=1)Ie[Me].recalculate(et,Be)}function s(Te,Le){var Be=t.getArrayBuffer(Te.request,function(et,Me,Ie,He){et?Le(et):Me&&Le(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(Me)),rawData:Me,cacheControl:Ie,expires:He})});return function(){Be.cancel(),Le()}}h.prototype.parse=function(Te,Le,Be,et,Me){var Ie=this;this.status="parsing",this.data=Te,this.collisionBoxArray=new t.CollisionBoxArray;var He=new t.DictionaryCoder(Object.keys(Te.layers).sort()),Xe=new t.FeatureIndex(this.tileID,this.promoteId);Xe.bucketLayerIDs=[];var ht,it,Ge,ot,Je={},st={featureIndex:Xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Be},It=Le.familiesBySource[this.source];for(var Ft in It){var nr=Te.layers[Ft];if(nr){nr.version===1&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+Ft+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var We=He.encode(Ft),Fe=[],_t=0;_t<nr.length;_t++){var Mt=nr.feature(_t),wt=Xe.getId(Mt,Ft);Fe.push({feature:Mt,id:wt,index:_t,sourceLayerIndex:We})}for(var Dt=0,Rt=It[Ft];Dt<Rt.length;Dt+=1){var Bt=Rt[Dt],Nt=Bt[0];Nt.minzoom&&this.zoom<Math.floor(Nt.minzoom)||Nt.maxzoom&&this.zoom>=Nt.maxzoom||Nt.visibility!=="none"&&(i(Bt,this.zoom,Be),(Je[Nt.id]=Nt.createBucket({index:Xe.bucketLayerIDs.length,layers:Bt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:We,sourceID:this.source})).populate(Fe,st,this.tileID.canonical),Xe.bucketLayerIDs.push(Bt.map(function(Gr){return Gr.id})))}}}var er=t.mapObject(st.glyphDependencies,function(Gr){return Object.keys(Gr).map(Number)});Object.keys(er).length?et.send("getGlyphs",{uid:this.uid,stacks:er},function(Gr,zr){ht||(ht=Gr,it=zr,_r.call(Ie))}):it={};var qt=Object.keys(st.iconDependencies);qt.length?et.send("getImages",{icons:qt,source:this.source,tileID:this.tileID,type:"icons"},function(Gr,zr){ht||(ht=Gr,Ge=zr,_r.call(Ie))}):Ge={};var Zt=Object.keys(st.patternDependencies);function _r(){if(ht)return Me(ht);if(it&&Ge&&ot){var Gr=new u(it),zr=new t.ImageAtlas(Ge,ot);for(var Or in Je){var Mn=Je[Or];Mn instanceof t.SymbolBucket?(i(Mn.layers,this.zoom,Be),t.performSymbolLayout(Mn,it,Gr.positions,Ge,zr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Mn.hasPattern&&(Mn instanceof t.LineBucket||Mn instanceof t.FillBucket||Mn instanceof t.FillExtrusionBucket)&&(i(Mn.layers,this.zoom,Be),Mn.addFeatures(st,this.tileID.canonical,zr.patternPositions))}this.status="done",Me(null,{buckets:t.values(Je).filter(function(Yn){return!Yn.isEmpty()}),featureIndex:Xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Gr.image,imageAtlas:zr,glyphMap:this.returnDependencies?it:null,iconMap:this.returnDependencies?Ge:null,glyphPositions:this.returnDependencies?Gr.positions:null})}}Zt.length?et.send("getImages",{icons:Zt,source:this.source,tileID:this.tileID,type:"patterns"},function(Gr,zr){ht||(ht=Gr,ot=zr,_r.call(Ie))}):ot={},_r.call(this)};var p=function(Te,Le,Be,et){this.actor=Te,this.layerIndex=Le,this.availableImages=Be,this.loadVectorData=et||s,this.loading={},this.loaded={}};p.prototype.loadTile=function(Te,Le){var Be=this,et=Te.uid;this.loading||(this.loading={});var Me=!!(Te&&Te.request&&Te.request.collectResourceTiming)&&new t.RequestPerformance(Te.request),Ie=this.loading[et]=new h(Te);Ie.abort=this.loadVectorData(Te,function(He,Xe){if(delete Be.loading[et],He||!Xe)return Ie.status="done",Be.loaded[et]=Ie,Le(He);var ht=Xe.rawData,it={};Xe.expires&&(it.expires=Xe.expires),Xe.cacheControl&&(it.cacheControl=Xe.cacheControl);var Ge={};if(Me){var ot=Me.finish();ot&&(Ge.resourceTiming=JSON.parse(JSON.stringify(ot)))}Ie.vectorTile=Xe.vectorTile,Ie.parse(Xe.vectorTile,Be.layerIndex,Be.availableImages,Be.actor,function(Je,st){if(Je||!st)return Le(Je);Le(null,t.extend({rawTileData:ht.slice(0)},st,it,Ge))}),Be.loaded=Be.loaded||{},Be.loaded[et]=Ie})},p.prototype.reloadTile=function(Te,Le){var Be=this,et=this.loaded,Me=Te.uid,Ie=this;if(et&&et[Me]){var He=et[Me];He.showCollisionBoxes=Te.showCollisionBoxes;var Xe=function(ht,it){var Ge=He.reloadCallback;Ge&&(delete He.reloadCallback,He.parse(He.vectorTile,Ie.layerIndex,Be.availableImages,Ie.actor,Ge)),Le(ht,it)};He.status==="parsing"?He.reloadCallback=Xe:He.status==="done"&&(He.vectorTile?He.parse(He.vectorTile,this.layerIndex,this.availableImages,this.actor,Xe):Xe())}},p.prototype.abortTile=function(Te,Le){var Be=this.loading,et=Te.uid;Be&&Be[et]&&Be[et].abort&&(Be[et].abort(),delete Be[et]),Le()},p.prototype.removeTile=function(Te,Le){var Be=this.loaded,et=Te.uid;Be&&Be[et]&&delete Be[et],Le()};var d=t.window.ImageBitmap,y=function(){this.loaded={}};function b(Te,Le){if(Te.length!==0){m(Te[0],Le);for(var Be=1;Be<Te.length;Be++)m(Te[Be],!Le)}}function m(Te,Le){for(var Be=0,et=0,Me=Te.length,Ie=Me-1;et<Me;Ie=et++)Be+=(Te[et][0]-Te[Ie][0])*(Te[Ie][1]+Te[et][1]);Be>=0!=!!Le&&Te.reverse()}y.prototype.loadTile=function(Te,Le){var Be=Te.uid,et=Te.encoding,Me=Te.rawImageData,Ie=d&&Me instanceof d?this.getImageData(Me):Me,He=new t.DEMData(Be,Ie,et);this.loaded=this.loaded||{},this.loaded[Be]=He,Le(null,He)},y.prototype.getImageData=function(Te){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Te.width,Te.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Te.width,this.offscreenCanvas.height=Te.height,this.offscreenCanvasContext.drawImage(Te,0,0,Te.width,Te.height);var Le=this.offscreenCanvasContext.getImageData(-1,-1,Te.width+2,Te.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:Le.width,height:Le.height},Le.data)},y.prototype.removeTile=function(Te){var Le=this.loaded,Be=Te.uid;Le&&Le[Be]&&delete Le[Be]};var _=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,T=function(Te){this._feature=Te,this.extent=t.EXTENT,this.type=Te.type,this.properties=Te.tags,"id"in Te&&!isNaN(Te.id)&&(this.id=parseInt(Te.id,10))};T.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Te=[],Le=0,Be=this._feature.geometry;Le<Be.length;Le+=1){var et=Be[Le];Te.push([new t.Point$1(et[0],et[1])])}return Te}for(var Me=[],Ie=0,He=this._feature.geometry;Ie<He.length;Ie+=1){for(var Xe=[],ht=0,it=He[Ie];ht<it.length;ht+=1){var Ge=it[ht];Xe.push(new t.Point$1(Ge[0],Ge[1]))}Me.push(Xe)}return Me},T.prototype.toGeoJSON=function(Te,Le,Be){return _.call(this,Te,Le,Be)};var g=function(Te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=Te.length,this._features=Te};g.prototype.feature=function(Te){return new T(this._features[Te])};var A=t.vectorTile.VectorTileFeature,k=R;function R(Te,Le){this.options=Le||{},this.features=Te,this.length=Te.length}function L(Te,Le){this.id=typeof Te.id=="number"?Te.id:void 0,this.type=Te.type,this.rawGeometry=Te.type===1?[Te.geometry]:Te.geometry,this.properties=Te.tags,this.extent=Le||4096}R.prototype.feature=function(Te){return new L(this.features[Te],this.options.extent)},L.prototype.loadGeometry=function(){var Te=this.rawGeometry;this.geometry=[];for(var Le=0;Le<Te.length;Le++){for(var Be=Te[Le],et=[],Me=0;Me<Be.length;Me++)et.push(new t.Point$1(Be[Me][0],Be[Me][1]));this.geometry.push(et)}return this.geometry},L.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Te=this.geometry,Le=1/0,Be=-1/0,et=1/0,Me=-1/0,Ie=0;Ie<Te.length;Ie++)for(var He=Te[Ie],Xe=0;Xe<He.length;Xe++){var ht=He[Xe];Le=Math.min(Le,ht.x),Be=Math.max(Be,ht.x),et=Math.min(et,ht.y),Me=Math.max(Me,ht.y)}return[Le,et,Be,Me]},L.prototype.toGeoJSON=A.prototype.toGeoJSON;var z=S,E=k;function S(Te){var Le=new t.pbf;return function(Be,et){for(var Me in Be.layers)et.writeMessage(3,C,Be.layers[Me])}(Te,Le),Le.finish()}function C(Te,Le){var Be;Le.writeVarintField(15,Te.version||1),Le.writeStringField(1,Te.name||""),Le.writeVarintField(5,Te.extent||4096);var et={keys:[],values:[],keycache:{},valuecache:{}};for(Be=0;Be<Te.length;Be++)et.feature=Te.feature(Be),Le.writeMessage(2,D,et);var Me=et.keys;for(Be=0;Be<Me.length;Be++)Le.writeStringField(3,Me[Be]);var Ie=et.values;for(Be=0;Be<Ie.length;Be++)Le.writeMessage(4,X,Ie[Be])}function D(Te,Le){var Be=Te.feature;Be.id!==void 0&&Le.writeVarintField(1,Be.id),Le.writeMessage(2,F,Te),Le.writeVarintField(3,Be.type),Le.writeMessage(4,U,Be)}function F(Te,Le){var Be=Te.feature,et=Te.keys,Me=Te.values,Ie=Te.keycache,He=Te.valuecache;for(var Xe in Be.properties){var ht=Ie[Xe];ht===void 0&&(et.push(Xe),Ie[Xe]=ht=et.length-1),Le.writeVarint(ht);var it=Be.properties[Xe],Ge=typeof it;Ge!=="string"&&Ge!=="boolean"&&Ge!=="number"&&(it=JSON.stringify(it));var ot=Ge+":"+it,Je=He[ot];Je===void 0&&(Me.push(it),He[ot]=Je=Me.length-1),Le.writeVarint(Je)}}function N(Te,Le){return(Le<<3)+(7&Te)}function G(Te){return Te<<1^Te>>31}function U(Te,Le){for(var Be=Te.loadGeometry(),et=Te.type,Me=0,Ie=0,He=Be.length,Xe=0;Xe<He;Xe++){var ht=Be[Xe],it=1;et===1&&(it=ht.length),Le.writeVarint(N(1,it));for(var Ge=et===3?ht.length-1:ht.length,ot=0;ot<Ge;ot++){ot===1&&et!==1&&Le.writeVarint(N(2,Ge-1));var Je=ht[ot].x-Me,st=ht[ot].y-Ie;Le.writeVarint(G(Je)),Le.writeVarint(G(st)),Me+=Je,Ie+=st}et===3&&Le.writeVarint(N(7,1))}}function X(Te,Le){var Be=typeof Te;Be==="string"?Le.writeStringField(1,Te):Be==="boolean"?Le.writeBooleanField(7,Te):Be==="number"&&(Te%1!=0?Le.writeDoubleField(3,Te):Te<0?Le.writeSVarintField(6,Te):Le.writeVarintField(5,Te))}function I(Te,Le,Be,et){B(Te,Be,et),B(Le,2*Be,2*et),B(Le,2*Be+1,2*et+1)}function B(Te,Le,Be){var et=Te[Le];Te[Le]=Te[Be],Te[Be]=et}function j(Te,Le,Be,et){var Me=Te-Be,Ie=Le-et;return Me*Me+Ie*Ie}z.fromVectorTileJs=S,z.fromGeojsonVt=function(Te,Le){Le=Le||{};var Be={};for(var et in Te)Be[et]=new k(Te[et].features,Le),Be[et].name=et,Be[et].version=Le.version,Be[et].extent=Le.extent;return S({layers:Be})},z.GeoJSONWrapper=E;var H=function(Te){return Te[0]},K=function(Te){return Te[1]},te=function(Te,Le,Be,et,Me){Le===void 0&&(Le=H),Be===void 0&&(Be=K),et===void 0&&(et=64),Me===void 0&&(Me=Float64Array),this.nodeSize=et,this.points=Te;for(var Ie=Te.length<65536?Uint16Array:Uint32Array,He=this.ids=new Ie(Te.length),Xe=this.coords=new Me(2*Te.length),ht=0;ht<Te.length;ht++)He[ht]=ht,Xe[2*ht]=Le(Te[ht]),Xe[2*ht+1]=Be(Te[ht]);(function it(Ge,ot,Je,st,It,Ft){if(!(It-st<=Je)){var nr=st+It>>1;(function We(Fe,_t,Mt,wt,Dt,Rt){for(;Dt>wt;){if(Dt-wt>600){var Bt=Dt-wt+1,Nt=Mt-wt+1,er=Math.log(Bt),qt=.5*Math.exp(2*er/3),Zt=.5*Math.sqrt(er*qt*(Bt-qt)/Bt)*(Nt-Bt/2<0?-1:1);We(Fe,_t,Mt,Math.max(wt,Math.floor(Mt-Nt*qt/Bt+Zt)),Math.min(Dt,Math.floor(Mt+(Bt-Nt)*qt/Bt+Zt)),Rt)}var _r=_t[2*Mt+Rt],Gr=wt,zr=Dt;for(I(Fe,_t,wt,Mt),_t[2*Dt+Rt]>_r&&I(Fe,_t,wt,Dt);Gr<zr;){for(I(Fe,_t,Gr,zr),Gr++,zr--;_t[2*Gr+Rt]<_r;)Gr++;for(;_t[2*zr+Rt]>_r;)zr--}_t[2*wt+Rt]===_r?I(Fe,_t,wt,zr):I(Fe,_t,++zr,Dt),zr<=Mt&&(wt=zr+1),Mt<=zr&&(Dt=zr-1)}})(Ge,ot,nr,st,It,Ft%2),it(Ge,ot,Je,st,nr-1,Ft+1),it(Ge,ot,Je,nr+1,It,Ft+1)}})(He,Xe,et,0,He.length-1,0)};te.prototype.range=function(Te,Le,Be,et){return function(Me,Ie,He,Xe,ht,it,Ge){for(var ot,Je,st=[0,Me.length-1,0],It=[];st.length;){var Ft=st.pop(),nr=st.pop(),We=st.pop();if(nr-We<=Ge)for(var Fe=We;Fe<=nr;Fe++)Je=Ie[2*Fe+1],(ot=Ie[2*Fe])>=He&&ot<=ht&&Je>=Xe&&Je<=it&&It.push(Me[Fe]);else{var _t=Math.floor((We+nr)/2);Je=Ie[2*_t+1],(ot=Ie[2*_t])>=He&&ot<=ht&&Je>=Xe&&Je<=it&&It.push(Me[_t]);var Mt=(Ft+1)%2;(Ft===0?He<=ot:Xe<=Je)&&(st.push(We),st.push(_t-1),st.push(Mt)),(Ft===0?ht>=ot:it>=Je)&&(st.push(_t+1),st.push(nr),st.push(Mt))}}return It}(this.ids,this.coords,Te,Le,Be,et,this.nodeSize)},te.prototype.within=function(Te,Le,Be){return function(et,Me,Ie,He,Xe,ht){for(var it=[0,et.length-1,0],Ge=[],ot=Xe*Xe;it.length;){var Je=it.pop(),st=it.pop(),It=it.pop();if(st-It<=ht)for(var Ft=It;Ft<=st;Ft++)j(Me[2*Ft],Me[2*Ft+1],Ie,He)<=ot&&Ge.push(et[Ft]);else{var nr=Math.floor((It+st)/2),We=Me[2*nr],Fe=Me[2*nr+1];j(We,Fe,Ie,He)<=ot&&Ge.push(et[nr]);var _t=(Je+1)%2;(Je===0?Ie-Xe<=We:He-Xe<=Fe)&&(it.push(It),it.push(nr-1),it.push(_t)),(Je===0?Ie+Xe>=We:He+Xe>=Fe)&&(it.push(nr+1),it.push(st),it.push(_t))}}return Ge}(this.ids,this.coords,Te,Le,Be,this.nodeSize)};var J={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Te){return Te}},oe=function(Te){this.options=ae(Object.create(J),Te),this.trees=new Array(this.options.maxZoom+1)};function ie(Te,Le,Be,et,Me){return{x:Te,y:Le,zoom:1/0,id:Be,parentId:-1,numPoints:et,properties:Me}}function Q(Te,Le){var Be=Te.geometry.coordinates,et=Be[1];return{x:re(Be[0]),y:ee(et),zoom:1/0,index:Le,parentId:-1}}function V(Te){return{type:"Feature",id:Te.id,properties:se(Te),geometry:{type:"Point",coordinates:[(et=Te.x,360*(et-.5)),(Le=Te.y,Be=(180-360*Le)*Math.PI/180,360*Math.atan(Math.exp(Be))/Math.PI-90)]}};var Le,Be,et}function se(Te){var Le=Te.numPoints,Be=Le>=1e4?Math.round(Le/1e3)+"k":Le>=1e3?Math.round(Le/100)/10+"k":Le;return ae(ae({},Te.properties),{cluster:!0,cluster_id:Te.id,point_count:Le,point_count_abbreviated:Be})}function re(Te){return Te/360+.5}function ee(Te){var Le=Math.sin(Te*Math.PI/180),Be=.5-.25*Math.log((1+Le)/(1-Le))/Math.PI;return Be<0?0:Be>1?1:Be}function ae(Te,Le){for(var Be in Le)Te[Be]=Le[Be];return Te}function fe(Te){return Te.x}function de(Te){return Te.y}function pe(Te,Le,Be,et,Me,Ie){var He=Me-Be,Xe=Ie-et;if(He!==0||Xe!==0){var ht=((Te-Be)*He+(Le-et)*Xe)/(He*He+Xe*Xe);ht>1?(Be=Me,et=Ie):ht>0&&(Be+=He*ht,et+=Xe*ht)}return(He=Te-Be)*He+(Xe=Le-et)*Xe}function W(Te,Le,Be,et){var Me={id:Te===void 0?null:Te,type:Le,geometry:Be,tags:et,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ie){var He=Ie.geometry,Xe=Ie.type;if(Xe==="Point"||Xe==="MultiPoint"||Xe==="LineString")ue(Ie,He);else if(Xe==="Polygon"||Xe==="MultiLineString")for(var ht=0;ht<He.length;ht++)ue(Ie,He[ht]);else if(Xe==="MultiPolygon")for(ht=0;ht<He.length;ht++)for(var it=0;it<He[ht].length;it++)ue(Ie,He[ht][it])}(Me),Me}function ue(Te,Le){for(var Be=0;Be<Le.length;Be+=3)Te.minX=Math.min(Te.minX,Le[Be]),Te.minY=Math.min(Te.minY,Le[Be+1]),Te.maxX=Math.max(Te.maxX,Le[Be]),Te.maxY=Math.max(Te.maxY,Le[Be+1])}function me(Te,Le,Be,et){if(Le.geometry){var Me=Le.geometry.coordinates,Ie=Le.geometry.type,He=Math.pow(Be.tolerance/((1<<Be.maxZoom)*Be.extent),2),Xe=[],ht=Le.id;if(Be.promoteId?ht=Le.properties[Be.promoteId]:Be.generateId&&(ht=et||0),Ie==="Point")be(Me,Xe);else if(Ie==="MultiPoint")for(var it=0;it<Me.length;it++)be(Me[it],Xe);else if(Ie==="LineString")ke(Me,Xe,He,!1);else if(Ie==="MultiLineString"){if(Be.lineMetrics){for(it=0;it<Me.length;it++)ke(Me[it],Xe=[],He,!1),Te.push(W(ht,"LineString",Xe,Le.properties));return}Pe(Me,Xe,He,!1)}else if(Ie==="Polygon")Pe(Me,Xe,He,!0);else{if(Ie!=="MultiPolygon"){if(Ie==="GeometryCollection"){for(it=0;it<Le.geometry.geometries.length;it++)me(Te,{id:ht,geometry:Le.geometry.geometries[it],properties:Le.properties},Be,et);return}throw new Error("Input data is not a valid GeoJSON object.")}for(it=0;it<Me.length;it++){var Ge=[];Pe(Me[it],Ge,He,!0),Xe.push(Ge)}}Te.push(W(ht,Ie,Xe,Le.properties))}}function be(Te,Le){Le.push(je(Te[0])),Le.push(ze(Te[1])),Le.push(0)}function ke(Te,Le,Be,et){for(var Me,Ie,He=0,Xe=0;Xe<Te.length;Xe++){var ht=je(Te[Xe][0]),it=ze(Te[Xe][1]);Le.push(ht),Le.push(it),Le.push(0),Xe>0&&(He+=et?(Me*it-ht*Ie)/2:Math.sqrt(Math.pow(ht-Me,2)+Math.pow(it-Ie,2))),Me=ht,Ie=it}var Ge=Le.length-3;Le[2]=1,function ot(Je,st,It,Ft){for(var nr,We=Ft,Fe=It-st>>1,_t=It-st,Mt=Je[st],wt=Je[st+1],Dt=Je[It],Rt=Je[It+1],Bt=st+3;Bt<It;Bt+=3){var Nt=pe(Je[Bt],Je[Bt+1],Mt,wt,Dt,Rt);if(Nt>We)nr=Bt,We=Nt;else if(Nt===We){var er=Math.abs(Bt-Fe);er<_t&&(nr=Bt,_t=er)}}We>Ft&&(nr-st>3&&ot(Je,st,nr,Ft),Je[nr+2]=We,It-nr>3&&ot(Je,nr,It,Ft))}(Le,0,Ge,Be),Le[Ge+2]=1,Le.size=Math.abs(He),Le.start=0,Le.end=Le.size}function Pe(Te,Le,Be,et){for(var Me=0;Me<Te.length;Me++){var Ie=[];ke(Te[Me],Ie,Be,et),Le.push(Ie)}}function je(Te){return Te/360+.5}function ze(Te){var Le=Math.sin(Te*Math.PI/180),Be=.5-.25*Math.log((1+Le)/(1-Le))/Math.PI;return Be<0?0:Be>1?1:Be}function Ze(Te,Le,Be,et,Me,Ie,He,Xe){if(et/=Le,Ie>=(Be/=Le)&&He<et)return Te;if(He<Be||Ie>=et)return null;for(var ht=[],it=0;it<Te.length;it++){var Ge=Te[it],ot=Ge.geometry,Je=Ge.type,st=Me===0?Ge.minX:Ge.minY,It=Me===0?Ge.maxX:Ge.maxY;if(st>=Be&&It<et)ht.push(Ge);else if(!(It<Be||st>=et)){var Ft=[];if(Je==="Point"||Je==="MultiPoint")tt(ot,Ft,Be,et,Me);else if(Je==="LineString")Ce(ot,Ft,Be,et,Me,!1,Xe.lineMetrics);else if(Je==="MultiLineString")Ne(ot,Ft,Be,et,Me,!1);else if(Je==="Polygon")Ne(ot,Ft,Be,et,Me,!0);else if(Je==="MultiPolygon")for(var nr=0;nr<ot.length;nr++){var We=[];Ne(ot[nr],We,Be,et,Me,!0),We.length&&Ft.push(We)}if(Ft.length){if(Xe.lineMetrics&&Je==="LineString"){for(nr=0;nr<Ft.length;nr++)ht.push(W(Ge.id,Je,Ft[nr],Ge.tags));continue}Je!=="LineString"&&Je!=="MultiLineString"||(Ft.length===1?(Je="LineString",Ft=Ft[0]):Je="MultiLineString"),Je!=="Point"&&Je!=="MultiPoint"||(Je=Ft.length===3?"Point":"MultiPoint"),ht.push(W(Ge.id,Je,Ft,Ge.tags))}}}return ht.length?ht:null}function tt(Te,Le,Be,et,Me){for(var Ie=0;Ie<Te.length;Ie+=3){var He=Te[Ie+Me];He>=Be&&He<=et&&(Le.push(Te[Ie]),Le.push(Te[Ie+1]),Le.push(Te[Ie+2]))}}function Ce(Te,Le,Be,et,Me,Ie,He){for(var Xe,ht,it=Ae(Te),Ge=Me===0?At:kt,ot=Te.start,Je=0;Je<Te.length-3;Je+=3){var st=Te[Je],It=Te[Je+1],Ft=Te[Je+2],nr=Te[Je+3],We=Te[Je+4],Fe=Me===0?st:It,_t=Me===0?nr:We,Mt=!1;He&&(Xe=Math.sqrt(Math.pow(st-nr,2)+Math.pow(It-We,2))),Fe<Be?_t>Be&&(ht=Ge(it,st,It,nr,We,Be),He&&(it.start=ot+Xe*ht)):Fe>et?_t<et&&(ht=Ge(it,st,It,nr,We,et),He&&(it.start=ot+Xe*ht)):qe(it,st,It,Ft),_t<Be&&Fe>=Be&&(ht=Ge(it,st,It,nr,We,Be),Mt=!0),_t>et&&Fe<=et&&(ht=Ge(it,st,It,nr,We,et),Mt=!0),!Ie&&Mt&&(He&&(it.end=ot+Xe*ht),Le.push(it),it=Ae(Te)),He&&(ot+=Xe)}var wt=Te.length-3;st=Te[wt],It=Te[wt+1],Ft=Te[wt+2],(Fe=Me===0?st:It)>=Be&&Fe<=et&&qe(it,st,It,Ft),wt=it.length-3,Ie&&wt>=3&&(it[wt]!==it[0]||it[wt+1]!==it[1])&&qe(it,it[0],it[1],it[2]),it.length&&Le.push(it)}function Ae(Te){var Le=[];return Le.size=Te.size,Le.start=Te.start,Le.end=Te.end,Le}function Ne(Te,Le,Be,et,Me,Ie){for(var He=0;He<Te.length;He++)Ce(Te[He],Le,Be,et,Me,Ie,!1)}function qe(Te,Le,Be,et){Te.push(Le),Te.push(Be),Te.push(et)}function At(Te,Le,Be,et,Me,Ie){var He=(Ie-Le)/(et-Le);return Te.push(Ie),Te.push(Be+(Me-Be)*He),Te.push(1),He}function kt(Te,Le,Be,et,Me,Ie){var He=(Ie-Be)/(Me-Be);return Te.push(Le+(et-Le)*He),Te.push(Ie),Te.push(1),He}function Ve(Te,Le){for(var Be=[],et=0;et<Te.length;et++){var Me,Ie=Te[et],He=Ie.type;if(He==="Point"||He==="MultiPoint"||He==="LineString")Me=ft(Ie.geometry,Le);else if(He==="MultiLineString"||He==="Polygon"){Me=[];for(var Xe=0;Xe<Ie.geometry.length;Xe++)Me.push(ft(Ie.geometry[Xe],Le))}else if(He==="MultiPolygon")for(Me=[],Xe=0;Xe<Ie.geometry.length;Xe++){for(var ht=[],it=0;it<Ie.geometry[Xe].length;it++)ht.push(ft(Ie.geometry[Xe][it],Le));Me.push(ht)}Be.push(W(Ie.id,He,Me,Ie.tags))}return Be}function ft(Te,Le){var Be=[];Be.size=Te.size,Te.start!==void 0&&(Be.start=Te.start,Be.end=Te.end);for(var et=0;et<Te.length;et+=3)Be.push(Te[et]+Le,Te[et+1],Te[et+2]);return Be}function St(Te,Le){if(Te.transformed)return Te;var Be,et,Me,Ie=1<<Te.z,He=Te.x,Xe=Te.y;for(Be=0;Be<Te.features.length;Be++){var ht=Te.features[Be],it=ht.geometry,Ge=ht.type;if(ht.geometry=[],Ge===1)for(et=0;et<it.length;et+=2)ht.geometry.push(Wt(it[et],it[et+1],Le,Ie,He,Xe));else for(et=0;et<it.length;et++){var ot=[];for(Me=0;Me<it[et].length;Me+=2)ot.push(Wt(it[et][Me],it[et][Me+1],Le,Ie,He,Xe));ht.geometry.push(ot)}}return Te.transformed=!0,Te}function Wt(Te,Le,Be,et,Me,Ie){return[Math.round(Be*(Te*et-Me)),Math.round(Be*(Le*et-Ie))]}function Qt(Te,Le,Be,et,Me){for(var Ie=Le===Me.maxZoom?0:Me.tolerance/((1<<Le)*Me.extent),He={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Be,y:et,z:Le,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Xe=0;Xe<Te.length;Xe++){He.numFeatures++,zt(He,Te[Xe],Ie,Me);var ht=Te[Xe].minX,it=Te[Xe].minY,Ge=Te[Xe].maxX,ot=Te[Xe].maxY;ht<He.minX&&(He.minX=ht),it<He.minY&&(He.minY=it),Ge>He.maxX&&(He.maxX=Ge),ot>He.maxY&&(He.maxY=ot)}return He}function zt(Te,Le,Be,et){var Me=Le.geometry,Ie=Le.type,He=[];if(Ie==="Point"||Ie==="MultiPoint")for(var Xe=0;Xe<Me.length;Xe+=3)He.push(Me[Xe]),He.push(Me[Xe+1]),Te.numPoints++,Te.numSimplified++;else if(Ie==="LineString")$t(He,Me,Te,Be,!1,!1);else if(Ie==="MultiLineString"||Ie==="Polygon")for(Xe=0;Xe<Me.length;Xe++)$t(He,Me[Xe],Te,Be,Ie==="Polygon",Xe===0);else if(Ie==="MultiPolygon")for(var ht=0;ht<Me.length;ht++){var it=Me[ht];for(Xe=0;Xe<it.length;Xe++)$t(He,it[Xe],Te,Be,!0,Xe===0)}if(He.length){var Ge=Le.tags||null;if(Ie==="LineString"&&et.lineMetrics){for(var ot in Ge={},Le.tags)Ge[ot]=Le.tags[ot];Ge.mapbox_clip_start=Me.start/Me.size,Ge.mapbox_clip_end=Me.end/Me.size}var Je={geometry:He,type:Ie==="Polygon"||Ie==="MultiPolygon"?3:Ie==="LineString"||Ie==="MultiLineString"?2:1,tags:Ge};Le.id!==null&&(Je.id=Le.id),Te.features.push(Je)}}function $t(Te,Le,Be,et,Me,Ie){var He=et*et;if(et>0&&Le.size<(Me?He:et))Be.numPoints+=Le.length/3;else{for(var Xe=[],ht=0;ht<Le.length;ht+=3)(et===0||Le[ht+2]>He)&&(Be.numSimplified++,Xe.push(Le[ht]),Xe.push(Le[ht+1])),Be.numPoints++;Me&&function(it,Ge){for(var ot=0,Je=0,st=it.length,It=st-2;Je<st;It=Je,Je+=2)ot+=(it[Je]-it[It])*(it[Je+1]+it[It+1]);if(ot>0===Ge)for(Je=0,st=it.length;Je<st/2;Je+=2){var Ft=it[Je],nr=it[Je+1];it[Je]=it[st-2-Je],it[Je+1]=it[st-1-Je],it[st-2-Je]=Ft,it[st-1-Je]=nr}}(Xe,Ie),Te.push(Xe)}}function rr(Te,Le){var Be=(Le=this.options=function(Me,Ie){for(var He in Ie)Me[He]=Ie[He];return Me}(Object.create(this.options),Le)).debug;if(Be&&console.time("preprocess data"),Le.maxZoom<0||Le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Le.promoteId&&Le.generateId)throw new Error("promoteId and generateId cannot be used together.");var et=function(Me,Ie){var He=[];if(Me.type==="FeatureCollection")for(var Xe=0;Xe<Me.features.length;Xe++)me(He,Me.features[Xe],Ie,Xe);else me(He,Me.type==="Feature"?Me:{geometry:Me},Ie);return He}(Te,Le);this.tiles={},this.tileCoords=[],Be&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Le.indexMaxZoom,Le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(et=function(Me,Ie){var He=Ie.buffer/Ie.extent,Xe=Me,ht=Ze(Me,1,-1-He,He,0,-1,2,Ie),it=Ze(Me,1,1-He,2+He,0,-1,2,Ie);return(ht||it)&&(Xe=Ze(Me,1,-He,1+He,0,-1,2,Ie)||[],ht&&(Xe=Ve(ht,1).concat(Xe)),it&&(Xe=Xe.concat(Ve(it,-1)))),Xe}(et,Le)).length&&this.splitTile(et,0,0,0),Be&&(et.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Pt(Te,Le,Be){return 32*((1<<Te)*Be+Le)+Te}function Lt(Te,Le){var Be=Te.tileID.canonical;if(!this._geoJSONIndex)return Le(null,null);var et=this._geoJSONIndex.getTile(Be.z,Be.x,Be.y);if(!et)return Le(null,null);var Me=new g(et.features),Ie=z(Me);Ie.byteOffset===0&&Ie.byteLength===Ie.buffer.byteLength||(Ie=new Uint8Array(Ie)),Le(null,{vectorTile:Me,rawData:Ie.buffer})}oe.prototype.load=function(Te){var Le=this.options,Be=Le.log,et=Le.minZoom,Me=Le.maxZoom,Ie=Le.nodeSize;Be&&console.time("total time");var He="prepare "+Te.length+" points";Be&&console.time(He),this.points=Te;for(var Xe=[],ht=0;ht<Te.length;ht++)Te[ht].geometry&&Xe.push(Q(Te[ht],ht));this.trees[Me+1]=new te(Xe,fe,de,Ie,Float32Array),Be&&console.timeEnd(He);for(var it=Me;it>=et;it--){var Ge=+Date.now();Xe=this._cluster(Xe,it),this.trees[it]=new te(Xe,fe,de,Ie,Float32Array),Be&&console.log("z%d: %d clusters in %dms",it,Xe.length,+Date.now()-Ge)}return Be&&console.timeEnd("total time"),this},oe.prototype.getClusters=function(Te,Le){var Be=((Te[0]+180)%360+360)%360-180,et=Math.max(-90,Math.min(90,Te[1])),Me=Te[2]===180?180:((Te[2]+180)%360+360)%360-180,Ie=Math.max(-90,Math.min(90,Te[3]));if(Te[2]-Te[0]>=360)Be=-180,Me=180;else if(Be>Me){var He=this.getClusters([Be,et,180,Ie],Le),Xe=this.getClusters([-180,et,Me,Ie],Le);return He.concat(Xe)}for(var ht=this.trees[this._limitZoom(Le)],it=[],Ge=0,ot=ht.range(re(Be),ee(Ie),re(Me),ee(et));Ge<ot.length;Ge+=1){var Je=ht.points[ot[Ge]];it.push(Je.numPoints?V(Je):this.points[Je.index])}return it},oe.prototype.getChildren=function(Te){var Le=this._getOriginId(Te),Be=this._getOriginZoom(Te),et="No cluster with the specified id.",Me=this.trees[Be];if(!Me)throw new Error(et);var Ie=Me.points[Le];if(!Ie)throw new Error(et);for(var He=this.options.radius/(this.options.extent*Math.pow(2,Be-1)),Xe=[],ht=0,it=Me.within(Ie.x,Ie.y,He);ht<it.length;ht+=1){var Ge=Me.points[it[ht]];Ge.parentId===Te&&Xe.push(Ge.numPoints?V(Ge):this.points[Ge.index])}if(Xe.length===0)throw new Error(et);return Xe},oe.prototype.getLeaves=function(Te,Le,Be){var et=[];return this._appendLeaves(et,Te,Le=Le||10,Be=Be||0,0),et},oe.prototype.getTile=function(Te,Le,Be){var et=this.trees[this._limitZoom(Te)],Me=Math.pow(2,Te),Ie=this.options,He=Ie.radius/Ie.extent,Xe=(Be-He)/Me,ht=(Be+1+He)/Me,it={features:[]};return this._addTileFeatures(et.range((Le-He)/Me,Xe,(Le+1+He)/Me,ht),et.points,Le,Be,Me,it),Le===0&&this._addTileFeatures(et.range(1-He/Me,Xe,1,ht),et.points,Me,Be,Me,it),Le===Me-1&&this._addTileFeatures(et.range(0,Xe,He/Me,ht),et.points,-1,Be,Me,it),it.features.length?it:null},oe.prototype.getClusterExpansionZoom=function(Te){for(var Le=this._getOriginZoom(Te)-1;Le<=this.options.maxZoom;){var Be=this.getChildren(Te);if(Le++,Be.length!==1)break;Te=Be[0].properties.cluster_id}return Le},oe.prototype._appendLeaves=function(Te,Le,Be,et,Me){for(var Ie=0,He=this.getChildren(Le);Ie<He.length;Ie+=1){var Xe=He[Ie],ht=Xe.properties;if(ht&&ht.cluster?Me+ht.point_count<=et?Me+=ht.point_count:Me=this._appendLeaves(Te,ht.cluster_id,Be,et,Me):Me<et?Me++:Te.push(Xe),Te.length===Be)break}return Me},oe.prototype._addTileFeatures=function(Te,Le,Be,et,Me,Ie){for(var He=0,Xe=Te;He<Xe.length;He+=1){var ht=Le[Xe[He]],it=ht.numPoints,Ge={type:1,geometry:[[Math.round(this.options.extent*(ht.x*Me-Be)),Math.round(this.options.extent*(ht.y*Me-et))]],tags:it?se(ht):this.points[ht.index].properties},ot=void 0;it?ot=ht.id:this.options.generateId?ot=ht.index:this.points[ht.index].id&&(ot=this.points[ht.index].id),ot!==void 0&&(Ge.id=ot),Ie.features.push(Ge)}},oe.prototype._limitZoom=function(Te){return Math.max(this.options.minZoom,Math.min(Te,this.options.maxZoom+1))},oe.prototype._cluster=function(Te,Le){for(var Be=[],et=this.options,Me=et.reduce,Ie=et.radius/(et.extent*Math.pow(2,Le)),He=0;He<Te.length;He++){var Xe=Te[He];if(!(Xe.zoom<=Le)){Xe.zoom=Le;for(var ht=this.trees[Le+1],it=ht.within(Xe.x,Xe.y,Ie),Ge=Xe.numPoints||1,ot=Xe.x*Ge,Je=Xe.y*Ge,st=Me&&Ge>1?this._map(Xe,!0):null,It=(He<<5)+(Le+1)+this.points.length,Ft=0,nr=it;Ft<nr.length;Ft+=1){var We=ht.points[nr[Ft]];if(!(We.zoom<=Le)){We.zoom=Le;var Fe=We.numPoints||1;ot+=We.x*Fe,Je+=We.y*Fe,Ge+=Fe,We.parentId=It,Me&&(st||(st=this._map(Xe,!0)),Me(st,this._map(We)))}}Ge===1?Be.push(Xe):(Xe.parentId=It,Be.push(ie(ot/Ge,Je/Ge,It,Ge,st)))}}return Be},oe.prototype._getOriginId=function(Te){return Te-this.points.length>>5},oe.prototype._getOriginZoom=function(Te){return(Te-this.points.length)%32},oe.prototype._map=function(Te,Le){if(Te.numPoints)return Le?ae({},Te.properties):Te.properties;var Be=this.points[Te.index].properties,et=this.options.map(Be);return Le&&et===Be?ae({},et):et},rr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},rr.prototype.splitTile=function(Te,Le,Be,et,Me,Ie,He){for(var Xe=[Te,Le,Be,et],ht=this.options,it=ht.debug;Xe.length;){et=Xe.pop(),Be=Xe.pop(),Le=Xe.pop(),Te=Xe.pop();var Ge=1<<Le,ot=Pt(Le,Be,et),Je=this.tiles[ot];if(!Je&&(it>1&&console.time("creation"),Je=this.tiles[ot]=Qt(Te,Le,Be,et,ht),this.tileCoords.push({z:Le,x:Be,y:et}),it)){it>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Le,Be,et,Je.numFeatures,Je.numPoints,Je.numSimplified),console.timeEnd("creation"));var st="z"+Le;this.stats[st]=(this.stats[st]||0)+1,this.total++}if(Je.source=Te,Me){if(Le===ht.maxZoom||Le===Me)continue;var It=1<<Me-Le;if(Be!==Math.floor(Ie/It)||et!==Math.floor(He/It))continue}else if(Le===ht.indexMaxZoom||Je.numPoints<=ht.indexMaxPoints)continue;if(Je.source=null,Te.length!==0){it>1&&console.time("clipping");var Ft,nr,We,Fe,_t,Mt,wt=.5*ht.buffer/ht.extent,Dt=.5-wt,Rt=.5+wt,Bt=1+wt;Ft=nr=We=Fe=null,_t=Ze(Te,Ge,Be-wt,Be+Rt,0,Je.minX,Je.maxX,ht),Mt=Ze(Te,Ge,Be+Dt,Be+Bt,0,Je.minX,Je.maxX,ht),Te=null,_t&&(Ft=Ze(_t,Ge,et-wt,et+Rt,1,Je.minY,Je.maxY,ht),nr=Ze(_t,Ge,et+Dt,et+Bt,1,Je.minY,Je.maxY,ht),_t=null),Mt&&(We=Ze(Mt,Ge,et-wt,et+Rt,1,Je.minY,Je.maxY,ht),Fe=Ze(Mt,Ge,et+Dt,et+Bt,1,Je.minY,Je.maxY,ht),Mt=null),it>1&&console.timeEnd("clipping"),Xe.push(Ft||[],Le+1,2*Be,2*et),Xe.push(nr||[],Le+1,2*Be,2*et+1),Xe.push(We||[],Le+1,2*Be+1,2*et),Xe.push(Fe||[],Le+1,2*Be+1,2*et+1)}}},rr.prototype.getTile=function(Te,Le,Be){var et=this.options,Me=et.extent,Ie=et.debug;if(Te<0||Te>24)return null;var He=1<<Te,Xe=Pt(Te,Le=(Le%He+He)%He,Be);if(this.tiles[Xe])return St(this.tiles[Xe],Me);Ie>1&&console.log("drilling down to z%d-%d-%d",Te,Le,Be);for(var ht,it=Te,Ge=Le,ot=Be;!ht&&it>0;)it--,Ge=Math.floor(Ge/2),ot=Math.floor(ot/2),ht=this.tiles[Pt(it,Ge,ot)];return ht&&ht.source?(Ie>1&&console.log("found parent tile z%d-%d-%d",it,Ge,ot),Ie>1&&console.time("drilling down"),this.splitTile(ht.source,it,Ge,ot,Te,Le,Be),Ie>1&&console.timeEnd("drilling down"),this.tiles[Xe]?St(this.tiles[Xe],Me):null):null};var dt=function(Te){function Le(Be,et,Me,Ie){Te.call(this,Be,et,Me,Lt),Ie&&(this.loadGeoJSON=Ie)}return Te&&(Le.__proto__=Te),(Le.prototype=Object.create(Te&&Te.prototype)).constructor=Le,Le.prototype.loadData=function(Be,et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=et,this._pendingLoadDataParams=Be,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Le.prototype._loadData=function(){var Be=this;if(this._pendingCallback&&this._pendingLoadDataParams){var et=this._pendingCallback,Me=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Ie=!!(Me&&Me.request&&Me.request.collectResourceTiming)&&new t.RequestPerformance(Me.request);this.loadGeoJSON(Me,function(He,Xe){if(He||!Xe)return et(He);if(typeof Xe!="object")return et(new Error("Input data given to '"+Me.source+"' is not a valid GeoJSON object."));(function Ge(ot,Je){var st,It=ot&&ot.type;if(It==="FeatureCollection")for(st=0;st<ot.features.length;st++)Ge(ot.features[st],Je);else if(It==="GeometryCollection")for(st=0;st<ot.geometries.length;st++)Ge(ot.geometries[st],Je);else if(It==="Feature")Ge(ot.geometry,Je);else if(It==="Polygon")b(ot.coordinates,Je);else if(It==="MultiPolygon")for(st=0;st<ot.coordinates.length;st++)b(ot.coordinates[st],Je);return ot})(Xe,!0);try{Be._geoJSONIndex=Me.cluster?new oe(function(Ge){var ot=Ge.superclusterOptions,Je=Ge.clusterProperties;if(!Je||!ot)return ot;for(var st={},It={},Ft={accumulated:null,zoom:0},nr={properties:null},We=Object.keys(Je),Fe=0,_t=We;Fe<_t.length;Fe+=1){var Mt=_t[Fe],wt=Je[Mt],Dt=wt[0],Rt=t.createExpression(wt[1]),Bt=t.createExpression(typeof Dt=="string"?[Dt,["accumulated"],["get",Mt]]:Dt);st[Mt]=Rt.value,It[Mt]=Bt.value}return ot.map=function(Nt){nr.properties=Nt;for(var er={},qt=0,Zt=We;qt<Zt.length;qt+=1){var _r=Zt[qt];er[_r]=st[_r].evaluate(Ft,nr)}return er},ot.reduce=function(Nt,er){nr.properties=er;for(var qt=0,Zt=We;qt<Zt.length;qt+=1){var _r=Zt[qt];Ft.accumulated=Nt[_r],Nt[_r]=It[_r].evaluate(Ft,nr)}},ot}(Me)).load(Xe.features):function(Ge,ot){return new rr(Ge,ot)}(Xe,Me.geojsonVtOptions)}catch(Ge){return et(Ge)}Be.loaded={};var ht={};if(Ie){var it=Ie.finish();it&&(ht.resourceTiming={},ht.resourceTiming[Me.source]=JSON.parse(JSON.stringify(it)))}et(null,ht)})}},Le.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Le.prototype.reloadTile=function(Be,et){var Me=this.loaded;return Me&&Me[Be.uid]?Te.prototype.reloadTile.call(this,Be,et):this.loadTile(Be,et)},Le.prototype.loadGeoJSON=function(Be,et){if(Be.request)t.getJSON(Be.request,et);else{if(typeof Be.data!="string")return et(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."));try{return et(null,JSON.parse(Be.data))}catch{return et(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."))}}},Le.prototype.removeSource=function(Be,et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),et()},Le.prototype.getClusterExpansionZoom=function(Be,et){try{et(null,this._geoJSONIndex.getClusterExpansionZoom(Be.clusterId))}catch(Me){et(Me)}},Le.prototype.getClusterChildren=function(Be,et){try{et(null,this._geoJSONIndex.getChildren(Be.clusterId))}catch(Me){et(Me)}},Le.prototype.getClusterLeaves=function(Be,et){try{et(null,this._geoJSONIndex.getLeaves(Be.clusterId,Be.limit,Be.offset))}catch(Me){et(Me)}},Le}(p),lt=function(Te){var Le=this;this.self=Te,this.actor=new t.Actor(Te,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:p,geojson:dt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Be,et){if(Le.workerSourceTypes[Be])throw new Error('Worker source with name "'+Be+'" already registered.');Le.workerSourceTypes[Be]=et},this.self.registerRTLTextPlugin=function(Be){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=Be.applyArabicShaping,t.plugin.processBidirectionalText=Be.processBidirectionalText,t.plugin.processStyledBidirectionalText=Be.processStyledBidirectionalText}};return lt.prototype.setReferrer=function(Te,Le){this.referrer=Le},lt.prototype.setImages=function(Te,Le,Be){for(var et in this.availableImages[Te]=Le,this.workerSources[Te]){var Me=this.workerSources[Te][et];for(var Ie in Me)Me[Ie].availableImages=Le}Be()},lt.prototype.setLayers=function(Te,Le,Be){this.getLayerIndex(Te).replace(Le),Be()},lt.prototype.updateLayers=function(Te,Le,Be){this.getLayerIndex(Te).update(Le.layers,Le.removedIds),Be()},lt.prototype.loadTile=function(Te,Le,Be){this.getWorkerSource(Te,Le.type,Le.source).loadTile(Le,Be)},lt.prototype.loadDEMTile=function(Te,Le,Be){this.getDEMWorkerSource(Te,Le.source).loadTile(Le,Be)},lt.prototype.reloadTile=function(Te,Le,Be){this.getWorkerSource(Te,Le.type,Le.source).reloadTile(Le,Be)},lt.prototype.abortTile=function(Te,Le,Be){this.getWorkerSource(Te,Le.type,Le.source).abortTile(Le,Be)},lt.prototype.removeTile=function(Te,Le,Be){this.getWorkerSource(Te,Le.type,Le.source).removeTile(Le,Be)},lt.prototype.removeDEMTile=function(Te,Le){this.getDEMWorkerSource(Te,Le.source).removeTile(Le)},lt.prototype.removeSource=function(Te,Le,Be){if(this.workerSources[Te]&&this.workerSources[Te][Le.type]&&this.workerSources[Te][Le.type][Le.source]){var et=this.workerSources[Te][Le.type][Le.source];delete this.workerSources[Te][Le.type][Le.source],et.removeSource!==void 0?et.removeSource(Le,Be):Be()}},lt.prototype.loadWorkerSource=function(Te,Le,Be){try{this.self.importScripts(Le.url),Be()}catch(et){Be(et.toString())}},lt.prototype.syncRTLPluginState=function(Te,Le,Be){try{t.plugin.setState(Le);var et=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&et!=null){this.self.importScripts(et);var Me=t.plugin.isParsed();Be(Me?void 0:new Error("RTL Text Plugin failed to import scripts from "+et),Me)}}catch(Ie){Be(Ie.toString())}},lt.prototype.getAvailableImages=function(Te){var Le=this.availableImages[Te];return Le||(Le=[]),Le},lt.prototype.getLayerIndex=function(Te){var Le=this.layerIndexes[Te];return Le||(Le=this.layerIndexes[Te]=new o),Le},lt.prototype.getWorkerSource=function(Te,Le,Be){var et=this;return this.workerSources[Te]||(this.workerSources[Te]={}),this.workerSources[Te][Le]||(this.workerSources[Te][Le]={}),this.workerSources[Te][Le][Be]||(this.workerSources[Te][Le][Be]=new this.workerSourceTypes[Le]({send:function(Me,Ie,He){et.actor.send(Me,Ie,He,Te)}},this.getLayerIndex(Te),this.getAvailableImages(Te))),this.workerSources[Te][Le][Be]},lt.prototype.getDEMWorkerSource=function(Te,Le){return this.demWorkerSources[Te]||(this.demWorkerSources[Te]={}),this.demWorkerSources[Te][Le]||(this.demWorkerSources[Te][Le]=new y),this.demWorkerSources[Te][Le]},lt.prototype.enforceCacheSizeLimit=function(Te,Le){t.enforceCacheSizeLimit(Le)},typeof WorkerGlobalScope<"u"&&t.window!==void 0&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new lt(t.window)),lt}),c(["./shared"],function(t){var f=t.createCommonjsModule(function($){function ne(Se){return!q(Se)}function q(Se){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Ye,ut,bt=new Blob([""],{type:"text/javascript"}),jt=URL.createObjectURL(bt);try{ut=new Worker(jt),Ye=!0}catch{Ye=!1}return ut&&ut.terminate(),URL.revokeObjectURL(jt),Ye}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Ye=document.createElement("canvas");Ye.width=Ye.height=1;var ut=Ye.getContext("2d");if(!ut)return!1;var bt=ut.getImageData(0,0,1,1);return bt&&bt.width===Ye.width}()?(ve[Oe=Se&&Se.failIfMajorPerformanceCaveat]===void 0&&(ve[Oe]=function(Ye){var ut=function(jt){var sr=document.createElement("canvas"),pr=Object.create(ne.webGLContextAttributes);return pr.failIfMajorPerformanceCaveat=jt,sr.probablySupportsContext?sr.probablySupportsContext("webgl",pr)||sr.probablySupportsContext("experimental-webgl",pr):sr.supportsContext?sr.supportsContext("webgl",pr)||sr.supportsContext("experimental-webgl",pr):sr.getContext("webgl",pr)||sr.getContext("experimental-webgl",pr)}(Ye);if(!ut)return!1;var bt=ut.createShader(ut.VERTEX_SHADER);return!(!bt||ut.isContextLost())&&(ut.shaderSource(bt,"void main() {}"),ut.compileShader(bt),ut.getShaderParameter(bt,ut.COMPILE_STATUS)===!0)}(Oe)),ve[Oe]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var Oe}$.exports?$.exports=ne:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=ne,window.mapboxgl.notSupportedReason=q);var ve={};ne.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),a={create:function($,ne,q){var ve=t.window.document.createElement($);return ne!==void 0&&(ve.className=ne),q&&q.appendChild(ve),ve},createNS:function($,ne){return t.window.document.createElementNS($,ne)}},o=t.window.document.documentElement.style;function u($){if(!o)return $[0];for(var ne=0;ne<$.length;ne++)if($[ne]in o)return $[ne];return $[0]}var h,i=u(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);a.disableDrag=function(){o&&i&&(h=o[i],o[i]="none")},a.enableDrag=function(){o&&i&&(o[i]=h)};var s=u(["transform","WebkitTransform"]);a.setTransform=function($,ne){$.style[s]=ne};var p=!1;try{var d=Object.defineProperty({},"passive",{get:function(){p=!0}});t.window.addEventListener("test",d,d),t.window.removeEventListener("test",d,d)}catch{p=!1}a.addEventListener=function($,ne,q,ve){ve===void 0&&(ve={}),$.addEventListener(ne,q,"passive"in ve&&p?ve:ve.capture)},a.removeEventListener=function($,ne,q,ve){ve===void 0&&(ve={}),$.removeEventListener(ne,q,"passive"in ve&&p?ve:ve.capture)};var y=function($){$.preventDefault(),$.stopPropagation(),t.window.removeEventListener("click",y,!0)};function b($){var ne=$.userImage;return!!(ne&&ne.render&&ne.render())&&($.data.replace(new Uint8Array(ne.data.buffer)),!0)}a.suppressClick=function(){t.window.addEventListener("click",y,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",y,!0)},0)},a.mousePos=function($,ne){var q=$.getBoundingClientRect();return new t.Point(ne.clientX-q.left-$.clientLeft,ne.clientY-q.top-$.clientTop)},a.touchPos=function($,ne){for(var q=$.getBoundingClientRect(),ve=[],Se=0;Se<ne.length;Se++)ve.push(new t.Point(ne[Se].clientX-q.left-$.clientLeft,ne[Se].clientY-q.top-$.clientTop));return ve},a.mouseButton=function($){return t.window.InstallTrigger!==void 0&&$.button===2&&$.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:$.button},a.remove=function($){$.parentNode&&$.parentNode.removeChild($)};var m=function($){function ne(){$.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.isLoaded=function(){return this.loaded},ne.prototype.setLoaded=function(q){if(this.loaded!==q&&(this.loaded=q,q)){for(var ve=0,Se=this.requestors;ve<Se.length;ve+=1){var Oe=Se[ve];this._notify(Oe.ids,Oe.callback)}this.requestors=[]}},ne.prototype.getImage=function(q){return this.images[q]},ne.prototype.addImage=function(q,ve){this._validate(q,ve)&&(this.images[q]=ve)},ne.prototype._validate=function(q,ve){var Se=!0;return this._validateStretch(ve.stretchX,ve.data&&ve.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchX" value'))),Se=!1),this._validateStretch(ve.stretchY,ve.data&&ve.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchY" value'))),Se=!1),this._validateContent(ve.content,ve)||(this.fire(new t.ErrorEvent(new Error('Image "'+q+'" has invalid "content" value'))),Se=!1),Se},ne.prototype._validateStretch=function(q,ve){if(!q)return!0;for(var Se=0,Oe=0,Ye=q;Oe<Ye.length;Oe+=1){var ut=Ye[Oe];if(ut[0]<Se||ut[1]<ut[0]||ve<ut[1])return!1;Se=ut[1]}return!0},ne.prototype._validateContent=function(q,ve){return!(q&&(q.length!==4||q[0]<0||ve.data.width<q[0]||q[1]<0||ve.data.height<q[1]||q[2]<0||ve.data.width<q[2]||q[3]<0||ve.data.height<q[3]||q[2]<q[0]||q[3]<q[1]))},ne.prototype.updateImage=function(q,ve){ve.version=this.images[q].version+1,this.images[q]=ve,this.updatedImages[q]=!0},ne.prototype.removeImage=function(q){var ve=this.images[q];delete this.images[q],delete this.patterns[q],ve.userImage&&ve.userImage.onRemove&&ve.userImage.onRemove()},ne.prototype.listImages=function(){return Object.keys(this.images)},ne.prototype.getImages=function(q,ve){var Se=!0;if(!this.isLoaded())for(var Oe=0,Ye=q;Oe<Ye.length;Oe+=1)this.images[Ye[Oe]]||(Se=!1);this.isLoaded()||Se?this._notify(q,ve):this.requestors.push({ids:q,callback:ve})},ne.prototype._notify=function(q,ve){for(var Se={},Oe=0,Ye=q;Oe<Ye.length;Oe+=1){var ut=Ye[Oe];this.images[ut]||this.fire(new t.Event("styleimagemissing",{id:ut}));var bt=this.images[ut];bt?Se[ut]={data:bt.data.clone(),pixelRatio:bt.pixelRatio,sdf:bt.sdf,version:bt.version,stretchX:bt.stretchX,stretchY:bt.stretchY,content:bt.content,hasRenderCallback:!!(bt.userImage&&bt.userImage.render)}:t.warnOnce('Image "'+ut+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ve(null,Se)},ne.prototype.getPixelSize=function(){var q=this.atlasImage;return{width:q.width,height:q.height}},ne.prototype.getPattern=function(q){var ve=this.patterns[q],Se=this.getImage(q);if(!Se)return null;if(ve&&ve.position.version===Se.version)return ve.position;if(ve)ve.position.version=Se.version;else{var Oe={w:Se.data.width+2,h:Se.data.height+2,x:0,y:0},Ye=new t.ImagePosition(Oe,Se);this.patterns[q]={bin:Oe,position:Ye}}return this._updatePatternAtlas(),this.patterns[q].position},ne.prototype.bind=function(q){var ve=q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(q,this.atlasImage,ve.RGBA),this.atlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)},ne.prototype._updatePatternAtlas=function(){var q=[];for(var ve in this.patterns)q.push(this.patterns[ve].bin);var Se=t.potpack(q),Oe=Se.w,Ye=Se.h,ut=this.atlasImage;for(var bt in ut.resize({width:Oe||1,height:Ye||1}),this.patterns){var jt=this.patterns[bt].bin,sr=jt.x+1,pr=jt.y+1,br=this.images[bt].data,Cr=br.width,Pr=br.height;t.RGBAImage.copy(br,ut,{x:0,y:0},{x:sr,y:pr},{width:Cr,height:Pr}),t.RGBAImage.copy(br,ut,{x:0,y:Pr-1},{x:sr,y:pr-1},{width:Cr,height:1}),t.RGBAImage.copy(br,ut,{x:0,y:0},{x:sr,y:pr+Pr},{width:Cr,height:1}),t.RGBAImage.copy(br,ut,{x:Cr-1,y:0},{x:sr-1,y:pr},{width:1,height:Pr}),t.RGBAImage.copy(br,ut,{x:0,y:0},{x:sr+Cr,y:pr},{width:1,height:Pr})}this.dirty=!0},ne.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},ne.prototype.dispatchRenderCallbacks=function(q){for(var ve=0,Se=q;ve<Se.length;ve+=1){var Oe=Se[ve];if(!this.callbackDispatchedThisFrame[Oe]){this.callbackDispatchedThisFrame[Oe]=!0;var Ye=this.images[Oe];b(Ye)&&this.updateImage(Oe,Ye)}}},ne}(t.Evented),_=A,T=A,g=1e20;function A($,ne,q,ve,Se,Oe){this.fontSize=$||24,this.buffer=ne===void 0?3:ne,this.cutoff=ve||.25,this.fontFamily=Se||"sans-serif",this.fontWeight=Oe||"normal",this.radius=q||8;var Ye=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Ye,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Ye*Ye),this.gridInner=new Float64Array(Ye*Ye),this.f=new Float64Array(Ye),this.d=new Float64Array(Ye),this.z=new Float64Array(Ye+1),this.v=new Int16Array(Ye),this.middle=Math.round(Ye/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function k($,ne,q,ve,Se,Oe,Ye){for(var ut=0;ut<ne;ut++){for(var bt=0;bt<q;bt++)ve[bt]=$[bt*ne+ut];for(R(ve,Se,Oe,Ye,q),bt=0;bt<q;bt++)$[bt*ne+ut]=Se[bt]}for(bt=0;bt<q;bt++){for(ut=0;ut<ne;ut++)ve[ut]=$[bt*ne+ut];for(R(ve,Se,Oe,Ye,ne),ut=0;ut<ne;ut++)$[bt*ne+ut]=Math.sqrt(Se[ut])}}function R($,ne,q,ve,Se){q[0]=0,ve[0]=-g,ve[1]=+g;for(var Oe=1,Ye=0;Oe<Se;Oe++){for(var ut=($[Oe]+Oe*Oe-($[q[Ye]]+q[Ye]*q[Ye]))/(2*Oe-2*q[Ye]);ut<=ve[Ye];)Ye--,ut=($[Oe]+Oe*Oe-($[q[Ye]]+q[Ye]*q[Ye]))/(2*Oe-2*q[Ye]);q[++Ye]=Oe,ve[Ye]=ut,ve[Ye+1]=+g}for(Oe=0,Ye=0;Oe<Se;Oe++){for(;ve[Ye+1]<Oe;)Ye++;ne[Oe]=(Oe-q[Ye])*(Oe-q[Ye])+$[q[Ye]]}}A.prototype.draw=function($){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText($,this.buffer,this.middle);for(var ne=this.ctx.getImageData(0,0,this.size,this.size),q=new Uint8ClampedArray(this.size*this.size),ve=0;ve<this.size*this.size;ve++){var Se=ne.data[4*ve+3]/255;this.gridOuter[ve]=Se===1?0:Se===0?g:Math.pow(Math.max(0,.5-Se),2),this.gridInner[ve]=Se===1?g:Se===0?0:Math.pow(Math.max(0,Se-.5),2)}for(k(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),k(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),ve=0;ve<this.size*this.size;ve++)q[ve]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[ve]-this.gridInner[ve])/this.radius+this.cutoff))));return q},_.default=T;var L=function($,ne){this.requestManager=$,this.localIdeographFontFamily=ne,this.entries={}};L.prototype.setURL=function($){this.url=$},L.prototype.getGlyphs=function($,ne){var q=this,ve=[];for(var Se in $)for(var Oe=0,Ye=$[Se];Oe<Ye.length;Oe+=1)ve.push({stack:Se,id:Ye[Oe]});t.asyncAll(ve,function(ut,bt){var jt=ut.stack,sr=ut.id,pr=q.entries[jt];pr||(pr=q.entries[jt]={glyphs:{},requests:{},ranges:{}});var br=pr.glyphs[sr];if(br===void 0){if(br=q._tinySDF(pr,jt,sr))return pr.glyphs[sr]=br,void bt(null,{stack:jt,id:sr,glyph:br});var Cr=Math.floor(sr/256);if(256*Cr>65535)bt(new Error("glyphs > 65535 not supported"));else if(pr.ranges[Cr])bt(null,{stack:jt,id:sr,glyph:br});else{var Pr=pr.requests[Cr];Pr||(Pr=pr.requests[Cr]=[],L.loadGlyphRange(jt,Cr,q.url,q.requestManager,function(jr,Mr){if(Mr){for(var Ur in Mr)q._doesCharSupportLocalGlyph(+Ur)||(pr.glyphs[+Ur]=Mr[+Ur]);pr.ranges[Cr]=!0}for(var Jr=0,fn=Pr;Jr<fn.length;Jr+=1)(0,fn[Jr])(jr,Mr);delete pr.requests[Cr]})),Pr.push(function(jr,Mr){jr?bt(jr):Mr&&bt(null,{stack:jt,id:sr,glyph:Mr[sr]||null})})}}else bt(null,{stack:jt,id:sr,glyph:br})},function(ut,bt){if(ut)ne(ut);else if(bt){for(var jt={},sr=0,pr=bt;sr<pr.length;sr+=1){var br=pr[sr],Cr=br.stack,Pr=br.id,jr=br.glyph;(jt[Cr]||(jt[Cr]={}))[Pr]=jr&&{id:jr.id,bitmap:jr.bitmap.clone(),metrics:jr.metrics}}ne(null,jt)}})},L.prototype._doesCharSupportLocalGlyph=function($){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"]($)||t.isChar["Hangul Syllables"]($)||t.isChar.Hiragana($)||t.isChar.Katakana($))},L.prototype._tinySDF=function($,ne,q){var ve=this.localIdeographFontFamily;if(ve&&this._doesCharSupportLocalGlyph(q)){var Se=$.tinySDF;if(!Se){var Oe="400";/bold/i.test(ne)?Oe="900":/medium/i.test(ne)?Oe="500":/light/i.test(ne)&&(Oe="200"),Se=$.tinySDF=new L.TinySDF(24,3,8,.25,ve,Oe)}return{id:q,bitmap:new t.AlphaImage({width:30,height:30},Se.draw(String.fromCharCode(q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},L.loadGlyphRange=function($,ne,q,ve,Se){var Oe=256*ne,Ye=Oe+255,ut=ve.transformRequest(ve.normalizeGlyphsURL(q).replace("{fontstack}",$).replace("{range}",Oe+"-"+Ye),t.ResourceType.Glyphs);t.getArrayBuffer(ut,function(bt,jt){if(bt)Se(bt);else if(jt){for(var sr={},pr=0,br=t.parseGlyphPBF(jt);pr<br.length;pr+=1){var Cr=br[pr];sr[Cr.id]=Cr}Se(null,sr)}})},L.TinySDF=_;var z=function(){this.specification=t.styleSpec.light.position};z.prototype.possiblyEvaluate=function($,ne){return t.sphericalToCartesian($.expression.evaluate(ne))},z.prototype.interpolate=function($,ne,q){return{x:t.number($.x,ne.x,q),y:t.number($.y,ne.y,q),z:t.number($.z,ne.z,q)}};var E=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new z,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),S=function($){function ne(q){$.call(this),this._transitionable=new t.Transitionable(E),this.setLight(q),this._transitioning=this._transitionable.untransitioned()}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getLight=function(){return this._transitionable.serialize()},ne.prototype.setLight=function(q,ve){if(ve===void 0&&(ve={}),!this._validate(t.validateLight,q,ve))for(var Se in q){var Oe=q[Se];t.endsWith(Se,"-transition")?this._transitionable.setTransition(Se.slice(0,-11),Oe):this._transitionable.setValue(Se,Oe)}},ne.prototype.updateTransitions=function(q){this._transitioning=this._transitionable.transitioned(q,this._transitioning)},ne.prototype.hasTransition=function(){return this._transitioning.hasTransition()},ne.prototype.recalculate=function(q){this.properties=this._transitioning.possiblyEvaluate(q)},ne.prototype._validate=function(q,ve,Se){return(!Se||Se.validate!==!1)&&t.emitValidationErrors(this,q.call(t.validateStyle,t.extend({value:ve,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},ne}(t.Evented),C=function($,ne){this.width=$,this.height=ne,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};C.prototype.getDash=function($,ne){var q=$.join(",")+String(ne);return this.dashEntry[q]||(this.dashEntry[q]=this.addDash($,ne)),this.dashEntry[q]},C.prototype.getDashRanges=function($,ne,q){var ve=[],Se=$.length%2==1?-$[$.length-1]*q:0,Oe=$[0]*q,Ye=!0;ve.push({left:Se,right:Oe,isDash:Ye,zeroLength:$[0]===0});for(var ut=$[0],bt=1;bt<$.length;bt++){var jt=$[bt];ve.push({left:Se=ut*q,right:Oe=(ut+=jt)*q,isDash:Ye=!Ye,zeroLength:jt===0})}return ve},C.prototype.addRoundDash=function($,ne,q){for(var ve=ne/2,Se=-q;Se<=q;Se++)for(var Oe=this.width*(this.nextRow+q+Se),Ye=0,ut=$[Ye],bt=0;bt<this.width;bt++){bt/ut.right>1&&(ut=$[++Ye]);var jt=Math.abs(bt-ut.left),sr=Math.abs(bt-ut.right),pr=Math.min(jt,sr),br=void 0,Cr=Se/q*(ve+1);if(ut.isDash){var Pr=ve-Math.abs(Cr);br=Math.sqrt(pr*pr+Pr*Pr)}else br=ve-Math.sqrt(pr*pr+Cr*Cr);this.data[Oe+bt]=Math.max(0,Math.min(255,br+128))}},C.prototype.addRegularDash=function($){for(var ne=$.length-1;ne>=0;--ne){var q=$[ne],ve=$[ne+1];q.zeroLength?$.splice(ne,1):ve&&ve.isDash===q.isDash&&(ve.left=q.left,$.splice(ne,1))}var Se=$[0],Oe=$[$.length-1];Se.isDash===Oe.isDash&&(Se.left=Oe.left-this.width,Oe.right=Se.right+this.width);for(var Ye=this.width*this.nextRow,ut=0,bt=$[ut],jt=0;jt<this.width;jt++){jt/bt.right>1&&(bt=$[++ut]);var sr=Math.abs(jt-bt.left),pr=Math.abs(jt-bt.right),br=Math.min(sr,pr);this.data[Ye+jt]=Math.max(0,Math.min(255,(bt.isDash?br:-br)+128))}},C.prototype.addDash=function($,ne){var q=ne?7:0,ve=2*q+1;if(this.nextRow+ve>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var Se=0,Oe=0;Oe<$.length;Oe++)Se+=$[Oe];if(Se!==0){var Ye=this.width/Se,ut=this.getDashRanges($,this.width,Ye);ne?this.addRoundDash(ut,Ye,q):this.addRegularDash(ut)}var bt={y:(this.nextRow+q+.5)/this.height,height:2*q/this.height,width:Se};return this.nextRow+=ve,this.dirty=!0,bt},C.prototype.bind=function($){var ne=$.gl;this.texture?(ne.bindTexture(ne.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,ne.texSubImage2D(ne.TEXTURE_2D,0,0,0,this.width,this.height,ne.ALPHA,ne.UNSIGNED_BYTE,this.data))):(this.texture=ne.createTexture(),ne.bindTexture(ne.TEXTURE_2D,this.texture),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_S,ne.REPEAT),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_T,ne.REPEAT),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MIN_FILTER,ne.LINEAR),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MAG_FILTER,ne.LINEAR),ne.texImage2D(ne.TEXTURE_2D,0,ne.ALPHA,this.width,this.height,0,ne.ALPHA,ne.UNSIGNED_BYTE,this.data))};var D=function $(ne,q){this.workerPool=ne,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var ve=this.workerPool.acquire(this.id),Se=0;Se<ve.length;Se++){var Oe=new $.Actor(ve[Se],q,this.id);Oe.name="Worker "+Se,this.actors.push(Oe)}};function F($,ne,q){var ve=function(Se,Oe){if(Se)return q(Se);if(Oe){var Ye=t.pick(t.extend(Oe,$),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Oe.vector_layers&&(Ye.vectorLayers=Oe.vector_layers,Ye.vectorLayerIds=Ye.vectorLayers.map(function(ut){return ut.id})),Ye.tiles=ne.canonicalizeTileset(Ye,$.url),q(null,Ye)}};return $.url?t.getJSON(ne.transformRequest(ne.normalizeSourceURL($.url),t.ResourceType.Source),ve):t.browser.frame(function(){return ve(null,$)})}D.prototype.broadcast=function($,ne,q){t.asyncAll(this.actors,function(ve,Se){ve.send($,ne,Se)},q=q||function(){})},D.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},D.prototype.remove=function(){this.actors.forEach(function($){$.remove()}),this.actors=[],this.workerPool.release(this.id)},D.Actor=t.Actor;var N=function($,ne,q){this.bounds=t.LngLatBounds.convert(this.validateBounds($)),this.minzoom=ne||0,this.maxzoom=q||24};N.prototype.validateBounds=function($){return Array.isArray($)&&$.length===4?[Math.max(-180,$[0]),Math.max(-90,$[1]),Math.min(180,$[2]),Math.min(90,$[3])]:[-180,-90,180,90]},N.prototype.contains=function($){var ne=Math.pow(2,$.z),q=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*ne),ve=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*ne),Se=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*ne),Oe=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*ne);return $.x>=q&&$.x<Se&&$.y>=ve&&$.y<Oe};var G=function($){function ne(q,ve,Se,Oe){if($.call(this),this.id=q,this.dispatcher=Se,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(ve,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},ve),this._collectResourceTiming=ve.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Oe)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=F(this._options,this.map._requestManager,function(ve,Se){q._tileJSONRequest=null,q._loaded=!0,ve?q.fire(new t.ErrorEvent(ve)):Se&&(t.extend(q,Se),Se.bounds&&(q.tileBounds=new N(Se.bounds,q.minzoom,q.maxzoom)),t.postTurnstileEvent(Se.tiles,q.map._requestManager._customAccessToken),t.postMapLoadEvent(Se.tiles,q.map._getMapId(),q.map._requestManager._skuToken,q.map._requestManager._customAccessToken),q.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},ne.prototype.loaded=function(){return this._loaded},ne.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},ne.prototype.onAdd=function(q){this.map=q,this.load()},ne.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},ne.prototype.serialize=function(){return t.extend({},this._options)},ne.prototype.loadTile=function(q,ve){var Se=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme)),Oe={request:this.map._requestManager.transformRequest(Se,t.ResourceType.Tile),uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,tileSize:this.tileSize*q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Ye(ut,bt){return delete q.request,q.aborted?ve(null):ut&&ut.status!==404?ve(ut):(bt&&bt.resourceTiming&&(q.resourceTiming=bt.resourceTiming),this.map._refreshExpiredTiles&&bt&&q.setExpiryData(bt),q.loadVectorData(bt,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),ve(null),void(q.reloadCallback&&(this.loadTile(q,q.reloadCallback),q.reloadCallback=null)))}Oe.request.collectResourceTiming=this._collectResourceTiming,q.actor&&q.state!=="expired"?q.state==="loading"?q.reloadCallback=ve:q.request=q.actor.send("reloadTile",Oe,Ye.bind(this)):(q.actor=this.dispatcher.getActor(),q.request=q.actor.send("loadTile",Oe,Ye.bind(this)))},ne.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.actor&&q.actor.send("abortTile",{uid:q.uid,type:this.type,source:this.id},void 0)},ne.prototype.unloadTile=function(q){q.unloadVectorData(),q.actor&&q.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id},void 0)},ne.prototype.hasTransition=function(){return!1},ne}(t.Evented),U=function($){function ne(q,ve,Se,Oe){$.call(this),this.id=q,this.dispatcher=Se,this.setEventedParent(Oe),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},ve),t.extend(this,t.pick(ve,["url","scheme","tileSize"]))}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=F(this._options,this.map._requestManager,function(ve,Se){q._tileJSONRequest=null,q._loaded=!0,ve?q.fire(new t.ErrorEvent(ve)):Se&&(t.extend(q,Se),Se.bounds&&(q.tileBounds=new N(Se.bounds,q.minzoom,q.maxzoom)),t.postTurnstileEvent(Se.tiles),t.postMapLoadEvent(Se.tiles,q.map._getMapId(),q.map._requestManager._skuToken),q.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},ne.prototype.loaded=function(){return this._loaded},ne.prototype.onAdd=function(q){this.map=q,this.load()},ne.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},ne.prototype.serialize=function(){return t.extend({},this._options)},ne.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},ne.prototype.loadTile=function(q,ve){var Se=this,Oe=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);q.request=t.getImage(this.map._requestManager.transformRequest(Oe,t.ResourceType.Tile),function(Ye,ut){if(delete q.request,q.aborted)q.state="unloaded",ve(null);else if(Ye)q.state="errored",ve(Ye);else if(ut){Se.map._refreshExpiredTiles&&q.setExpiryData(ut),delete ut.cacheControl,delete ut.expires;var bt=Se.map.painter.context,jt=bt.gl;q.texture=Se.map.painter.getTileTexture(ut.width),q.texture?q.texture.update(ut,{useMipmap:!0}):(q.texture=new t.Texture(bt,ut,jt.RGBA,{useMipmap:!0}),q.texture.bind(jt.LINEAR,jt.CLAMP_TO_EDGE,jt.LINEAR_MIPMAP_NEAREST),bt.extTextureFilterAnisotropic&&jt.texParameterf(jt.TEXTURE_2D,bt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,bt.extTextureFilterAnisotropicMax)),q.state="loaded",t.cacheEntryPossiblyAdded(Se.dispatcher),ve(null)}})},ne.prototype.abortTile=function(q,ve){q.request&&(q.request.cancel(),delete q.request),ve()},ne.prototype.unloadTile=function(q,ve){q.texture&&this.map.painter.saveTileTexture(q.texture),ve()},ne.prototype.hasTransition=function(){return!1},ne}(t.Evented),X=function($){function ne(q,ve,Se,Oe){$.call(this,q,ve,Se,Oe),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},ve),this.encoding=ve.encoding||"mapbox"}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},ne.prototype.loadTile=function(q,ve){var Se=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Oe(Ye,ut){Ye&&(q.state="errored",ve(Ye)),ut&&(q.dem=ut,q.needsHillshadePrepare=!0,q.state="loaded",ve(null))}q.request=t.getImage(this.map._requestManager.transformRequest(Se,t.ResourceType.Tile),function(Ye,ut){if(delete q.request,q.aborted)q.state="unloaded",ve(null);else if(Ye)q.state="errored",ve(Ye);else if(ut){this.map._refreshExpiredTiles&&q.setExpiryData(ut),delete ut.cacheControl,delete ut.expires;var bt=t.window.ImageBitmap&&ut instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?ut:t.browser.getImageData(ut,1),jt={uid:q.uid,coord:q.tileID,source:this.id,rawImageData:bt,encoding:this.encoding};q.actor&&q.state!=="expired"||(q.actor=this.dispatcher.getActor(),q.actor.send("loadDEMTile",jt,Oe.bind(this)))}}.bind(this)),q.neighboringTiles=this._getNeighboringTiles(q.tileID)},ne.prototype._getNeighboringTiles=function(q){var ve=q.canonical,Se=Math.pow(2,ve.z),Oe=(ve.x-1+Se)%Se,Ye=ve.x===0?q.wrap-1:q.wrap,ut=(ve.x+1+Se)%Se,bt=ve.x+1===Se?q.wrap+1:q.wrap,jt={};return jt[new t.OverscaledTileID(q.overscaledZ,Ye,ve.z,Oe,ve.y).key]={backfilled:!1},jt[new t.OverscaledTileID(q.overscaledZ,bt,ve.z,ut,ve.y).key]={backfilled:!1},ve.y>0&&(jt[new t.OverscaledTileID(q.overscaledZ,Ye,ve.z,Oe,ve.y-1).key]={backfilled:!1},jt[new t.OverscaledTileID(q.overscaledZ,q.wrap,ve.z,ve.x,ve.y-1).key]={backfilled:!1},jt[new t.OverscaledTileID(q.overscaledZ,bt,ve.z,ut,ve.y-1).key]={backfilled:!1}),ve.y+1<Se&&(jt[new t.OverscaledTileID(q.overscaledZ,Ye,ve.z,Oe,ve.y+1).key]={backfilled:!1},jt[new t.OverscaledTileID(q.overscaledZ,q.wrap,ve.z,ve.x,ve.y+1).key]={backfilled:!1},jt[new t.OverscaledTileID(q.overscaledZ,bt,ve.z,ut,ve.y+1).key]={backfilled:!1}),jt},ne.prototype.unloadTile=function(q){q.demTexture&&this.map.painter.saveTileTexture(q.demTexture),q.fbo&&(q.fbo.destroy(),delete q.fbo),q.dem&&delete q.dem,delete q.neighboringTiles,q.state="unloaded",q.actor&&q.actor.send("removeDEMTile",{uid:q.uid,source:this.id})},ne}(U),I=function($){function ne(q,ve,Se,Oe){$.call(this),this.id=q,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=Se.getActor(),this.setEventedParent(Oe),this._data=ve.data,this._options=t.extend({},ve),this._collectResourceTiming=ve.collectResourceTiming,this._resourceTiming=[],ve.maxzoom!==void 0&&(this.maxzoom=ve.maxzoom),ve.type&&(this.type=ve.type),ve.attribution&&(this.attribution=ve.attribution),this.promoteId=ve.promoteId;var Ye=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:ve.cluster||!1,geojsonVtOptions:{buffer:(ve.buffer!==void 0?ve.buffer:128)*Ye,tolerance:(ve.tolerance!==void 0?ve.tolerance:.375)*Ye,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:ve.lineMetrics||!1,generateId:ve.generateId||!1},superclusterOptions:{maxZoom:ve.clusterMaxZoom!==void 0?Math.min(ve.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(ve.clusterRadius||50)*Ye,log:!1,generateId:ve.generateId||!1},clusterProperties:ve.clusterProperties},ve.workerOptions)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.load=function(){var q=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ve){if(ve)q.fire(new t.ErrorEvent(ve));else{var Se={dataType:"source",sourceDataType:"metadata"};q._collectResourceTiming&&q._resourceTiming&&q._resourceTiming.length>0&&(Se.resourceTiming=q._resourceTiming,q._resourceTiming=[]),q.fire(new t.Event("data",Se))}})},ne.prototype.onAdd=function(q){this.map=q,this.load()},ne.prototype.setData=function(q){var ve=this;return this._data=q,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Se){if(Se)ve.fire(new t.ErrorEvent(Se));else{var Oe={dataType:"source",sourceDataType:"content"};ve._collectResourceTiming&&ve._resourceTiming&&ve._resourceTiming.length>0&&(Oe.resourceTiming=ve._resourceTiming,ve._resourceTiming=[]),ve.fire(new t.Event("data",Oe))}}),this},ne.prototype.getClusterExpansionZoom=function(q,ve){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:q,source:this.id},ve),this},ne.prototype.getClusterChildren=function(q,ve){return this.actor.send("geojson.getClusterChildren",{clusterId:q,source:this.id},ve),this},ne.prototype.getClusterLeaves=function(q,ve,Se,Oe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:q,limit:ve,offset:Se},Oe),this},ne.prototype._updateWorkerData=function(q){var ve=this;this._loaded=!1;var Se=t.extend({},this.workerOptions),Oe=this._data;typeof Oe=="string"?(Se.request=this.map._requestManager.transformRequest(t.browser.resolveURL(Oe),t.ResourceType.Source),Se.request.collectResourceTiming=this._collectResourceTiming):Se.data=JSON.stringify(Oe),this.actor.send(this.type+".loadData",Se,function(Ye,ut){ve._removed||ut&&ut.abandoned||(ve._loaded=!0,ut&&ut.resourceTiming&&ut.resourceTiming[ve.id]&&(ve._resourceTiming=ut.resourceTiming[ve.id].slice(0)),ve.actor.send(ve.type+".coalesce",{source:Se.source},null),q(Ye))})},ne.prototype.loaded=function(){return this._loaded},ne.prototype.loadTile=function(q,ve){var Se=this,Oe=q.actor?"reloadTile":"loadTile";q.actor=this.actor,q.request=this.actor.send(Oe,{type:this.type,uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Ye,ut){return delete q.request,q.unloadVectorData(),q.aborted?ve(null):Ye?ve(Ye):(q.loadVectorData(ut,Se.map.painter,Oe==="reloadTile"),ve(null))})},ne.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.aborted=!0},ne.prototype.unloadTile=function(q){q.unloadVectorData(),this.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id})},ne.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},ne.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},ne.prototype.hasTransition=function(){return!1},ne}(t.Evented),B=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),j=function($){function ne(q,ve,Se,Oe){$.call(this),this.id=q,this.dispatcher=Se,this.coordinates=ve.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Oe),this.options=ve}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.load=function(q,ve){var Se=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(Oe,Ye){Se._loaded=!0,Oe?Se.fire(new t.ErrorEvent(Oe)):Ye&&(Se.image=Ye,q&&(Se.coordinates=q),ve&&ve(),Se._finishLoading())})},ne.prototype.loaded=function(){return this._loaded},ne.prototype.updateImage=function(q){var ve=this;return this.image&&q.url?(this.options.url=q.url,this.load(q.coordinates,function(){ve.texture=null}),this):this},ne.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},ne.prototype.onAdd=function(q){this.map=q,this.load()},ne.prototype.setCoordinates=function(q){var ve=this;this.coordinates=q;var Se=q.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(Ye){for(var ut=1/0,bt=1/0,jt=-1/0,sr=-1/0,pr=0,br=Ye;pr<br.length;pr+=1){var Cr=br[pr];ut=Math.min(ut,Cr.x),bt=Math.min(bt,Cr.y),jt=Math.max(jt,Cr.x),sr=Math.max(sr,Cr.y)}var Pr=Math.max(jt-ut,sr-bt),jr=Math.max(0,Math.floor(-Math.log(Pr)/Math.LN2)),Mr=Math.pow(2,jr);return new t.CanonicalTileID(jr,Math.floor((ut+jt)/2*Mr),Math.floor((bt+sr)/2*Mr))}(Se),this.minzoom=this.maxzoom=this.tileID.z;var Oe=Se.map(function(Ye){return ve.tileID.getTilePoint(Ye)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(Oe[0].x,Oe[0].y,0,0),this._boundsArray.emplaceBack(Oe[1].x,Oe[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(Oe[3].x,Oe[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(Oe[2].x,Oe[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},ne.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var q=this.map.painter.context,ve=q.gl;for(var Se in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(q,this.image,ve.RGBA),this.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)),this.tiles){var Oe=this.tiles[Se];Oe.state!=="loaded"&&(Oe.state="loaded",Oe.texture=this.texture)}}},ne.prototype.loadTile=function(q,ve){this.tileID&&this.tileID.equals(q.tileID.canonical)?(this.tiles[String(q.tileID.wrap)]=q,q.buckets={},ve(null)):(q.state="errored",ve(null))},ne.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},ne.prototype.hasTransition=function(){return!1},ne}(t.Evented),H=function($){function ne(q,ve,Se,Oe){$.call(this,q,ve,Se,Oe),this.roundZoom=!0,this.type="video",this.options=ve}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.load=function(){var q=this;this._loaded=!1;var ve=this.options;this.urls=[];for(var Se=0,Oe=ve.urls;Se<Oe.length;Se+=1)this.urls.push(this.map._requestManager.transformRequest(Oe[Se],t.ResourceType.Source).url);t.getVideo(this.urls,function(Ye,ut){q._loaded=!0,Ye?q.fire(new t.ErrorEvent(Ye)):ut&&(q.video=ut,q.video.loop=!0,q.video.addEventListener("playing",function(){q.map.triggerRepaint()}),q.map&&q.video.play(),q._finishLoading())})},ne.prototype.pause=function(){this.video&&this.video.pause()},ne.prototype.play=function(){this.video&&this.video.play()},ne.prototype.seek=function(q){if(this.video){var ve=this.video.seekable;q<ve.start(0)||q>ve.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ve.start(0)+" and "+ve.end(0)+"-second mark."))):this.video.currentTime=q}},ne.prototype.getVideo=function(){return this.video},ne.prototype.onAdd=function(q){this.map||(this.map=q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},ne.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var q=this.map.painter.context,ve=q.gl;for(var Se in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),ve.texSubImage2D(ve.TEXTURE_2D,0,0,0,ve.RGBA,ve.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(q,this.video,ve.RGBA),this.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)),this.tiles){var Oe=this.tiles[Se];Oe.state!=="loaded"&&(Oe.state="loaded",Oe.texture=this.texture)}}},ne.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},ne.prototype.hasTransition=function(){return this.video&&!this.video.paused},ne}(j),K=function($){function ne(q,ve,Se,Oe){$.call(this,q,ve,Se,Oe),ve.coordinates?Array.isArray(ve.coordinates)&&ve.coordinates.length===4&&!ve.coordinates.some(function(Ye){return!Array.isArray(Ye)||Ye.length!==2||Ye.some(function(ut){return typeof ut!="number"})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+q,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+q,null,'missing required property "coordinates"'))),ve.animate&&typeof ve.animate!="boolean"&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+q,null,'optional "animate" property must be a boolean value'))),ve.canvas?typeof ve.canvas=="string"||ve.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+q,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+q,null,'missing required property "canvas"'))),this.options=ve,this.animate=ve.animate===void 0||ve.animate}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},ne.prototype.getCanvas=function(){return this.canvas},ne.prototype.onAdd=function(q){this.map=q,this.load(),this.canvas&&this.animate&&this.play()},ne.prototype.onRemove=function(){this.pause()},ne.prototype.prepare=function(){var q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,q=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var ve=this.map.painter.context,Se=ve.gl;for(var Oe in this.boundsBuffer||(this.boundsBuffer=ve.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(ve,this.canvas,Se.RGBA,{premultiply:!0}),this.tiles){var Ye=this.tiles[Oe];Ye.state!=="loaded"&&(Ye.state="loaded",Ye.texture=this.texture)}}},ne.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},ne.prototype.hasTransition=function(){return this._playing},ne.prototype._hasInvalidDimensions=function(){for(var q=0,ve=[this.canvas.width,this.canvas.height];q<ve.length;q+=1){var Se=ve[q];if(isNaN(Se)||Se<=0)return!0}return!1},ne}(j),te={vector:G,raster:U,"raster-dem":X,geojson:I,video:H,image:j,canvas:K};function J($,ne){var q=t.identity([]);return t.translate(q,q,[1,1,0]),t.scale(q,q,[.5*$.width,.5*$.height,1]),t.multiply(q,q,$.calculatePosMatrix(ne.toUnwrapped()))}function oe($,ne,q,ve,Se,Oe){var Ye=function(jr,Mr,Ur){if(jr)for(var Jr=0,fn=jr;Jr<fn.length;Jr+=1){var zn=Mr[fn[Jr]];if(zn&&zn.source===Ur&&zn.type==="fill-extrusion")return!0}else for(var kn in Mr){var Dn=Mr[kn];if(Dn.source===Ur&&Dn.type==="fill-extrusion")return!0}return!1}(Se&&Se.layers,ne,$.id),ut=Oe.maxPitchScaleFactor(),bt=$.tilesIn(ve,ut,Ye);bt.sort(ie);for(var jt=[],sr=0,pr=bt;sr<pr.length;sr+=1){var br=pr[sr];jt.push({wrappedTileID:br.tileID.wrapped().key,queryResults:br.tile.queryRenderedFeatures(ne,q,$._state,br.queryGeometry,br.cameraQueryGeometry,br.scale,Se,Oe,ut,J($.transform,br.tileID))})}var Cr=function(jr){for(var Mr={},Ur={},Jr=0,fn=jr;Jr<fn.length;Jr+=1){var zn=fn[Jr],kn=zn.queryResults,Dn=zn.wrappedTileID,qn=Ur[Dn]=Ur[Dn]||{};for(var pa in kn)for(var ua=kn[pa],wa=qn[pa]=qn[pa]||{},Da=Mr[pa]=Mr[pa]||[],oi=0,qa=ua;oi<qa.length;oi+=1){var Fi=qa[oi];wa[Fi.featureIndex]||(wa[Fi.featureIndex]=!0,Da.push(Fi))}}return Mr}(jt);for(var Pr in Cr)Cr[Pr].forEach(function(jr){var Mr=jr.feature,Ur=$.getFeatureState(Mr.layer["source-layer"],Mr.id);Mr.source=Mr.layer.source,Mr.layer["source-layer"]&&(Mr.sourceLayer=Mr.layer["source-layer"]),Mr.state=Ur});return Cr}function ie($,ne){var q=$.tileID,ve=ne.tileID;return q.overscaledZ-ve.overscaledZ||q.canonical.y-ve.canonical.y||q.wrap-ve.wrap||q.canonical.x-ve.canonical.x}var Q=function($,ne){this.max=$,this.onRemove=ne,this.reset()};Q.prototype.reset=function(){for(var $ in this.data)for(var ne=0,q=this.data[$];ne<q.length;ne+=1){var ve=q[ne];ve.timeout&&clearTimeout(ve.timeout),this.onRemove(ve.value)}return this.data={},this.order=[],this},Q.prototype.add=function($,ne,q){var ve=this,Se=$.wrapped().key;this.data[Se]===void 0&&(this.data[Se]=[]);var Oe={value:ne,timeout:void 0};if(q!==void 0&&(Oe.timeout=setTimeout(function(){ve.remove($,Oe)},q)),this.data[Se].push(Oe),this.order.push(Se),this.order.length>this.max){var Ye=this._getAndRemoveByKey(this.order[0]);Ye&&this.onRemove(Ye)}return this},Q.prototype.has=function($){return $.wrapped().key in this.data},Q.prototype.getAndRemove=function($){return this.has($)?this._getAndRemoveByKey($.wrapped().key):null},Q.prototype._getAndRemoveByKey=function($){var ne=this.data[$].shift();return ne.timeout&&clearTimeout(ne.timeout),this.data[$].length===0&&delete this.data[$],this.order.splice(this.order.indexOf($),1),ne.value},Q.prototype.getByKey=function($){var ne=this.data[$];return ne?ne[0].value:null},Q.prototype.get=function($){return this.has($)?this.data[$.wrapped().key][0].value:null},Q.prototype.remove=function($,ne){if(!this.has($))return this;var q=$.wrapped().key,ve=ne===void 0?0:this.data[q].indexOf(ne),Se=this.data[q][ve];return this.data[q].splice(ve,1),Se.timeout&&clearTimeout(Se.timeout),this.data[q].length===0&&delete this.data[q],this.onRemove(Se.value),this.order.splice(this.order.indexOf(q),1),this},Q.prototype.setMaxSize=function($){for(this.max=$;this.order.length>this.max;){var ne=this._getAndRemoveByKey(this.order[0]);ne&&this.onRemove(ne)}return this},Q.prototype.filter=function($){var ne=[];for(var q in this.data)for(var ve=0,Se=this.data[q];ve<Se.length;ve+=1){var Oe=Se[ve];$(Oe.value)||ne.push(Oe)}for(var Ye=0,ut=ne;Ye<ut.length;Ye+=1){var bt=ut[Ye];this.remove(bt.value.tileID,bt)}};var V=function($,ne,q){this.context=$;var ve=$.gl;this.buffer=ve.createBuffer(),this.dynamicDraw=!!q,this.context.unbindVAO(),$.bindElementBuffer.set(this.buffer),ve.bufferData(ve.ELEMENT_ARRAY_BUFFER,ne.arrayBuffer,this.dynamicDraw?ve.DYNAMIC_DRAW:ve.STATIC_DRAW),this.dynamicDraw||delete ne.arrayBuffer};V.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},V.prototype.updateData=function($){var ne=this.context.gl;this.context.unbindVAO(),this.bind(),ne.bufferSubData(ne.ELEMENT_ARRAY_BUFFER,0,$.arrayBuffer)},V.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var se={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},re=function($,ne,q,ve){this.length=ne.length,this.attributes=q,this.itemSize=ne.bytesPerElement,this.dynamicDraw=ve,this.context=$;var Se=$.gl;this.buffer=Se.createBuffer(),$.bindVertexBuffer.set(this.buffer),Se.bufferData(Se.ARRAY_BUFFER,ne.arrayBuffer,this.dynamicDraw?Se.DYNAMIC_DRAW:Se.STATIC_DRAW),this.dynamicDraw||delete ne.arrayBuffer};re.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},re.prototype.updateData=function($){var ne=this.context.gl;this.bind(),ne.bufferSubData(ne.ARRAY_BUFFER,0,$.arrayBuffer)},re.prototype.enableAttributes=function($,ne){for(var q=0;q<this.attributes.length;q++){var ve=ne.attributes[this.attributes[q].name];ve!==void 0&&$.enableVertexAttribArray(ve)}},re.prototype.setVertexAttribPointers=function($,ne,q){for(var ve=0;ve<this.attributes.length;ve++){var Se=this.attributes[ve],Oe=ne.attributes[Se.name];Oe!==void 0&&$.vertexAttribPointer(Oe,Se.components,$[se[Se.type]],!1,this.itemSize,Se.offset+this.itemSize*(q||0))}},re.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ee=function($){this.gl=$.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ee.prototype.get=function(){return this.current},ee.prototype.set=function($){},ee.prototype.getDefault=function(){return this.default},ee.prototype.setDefault=function(){this.set(this.default)};var ae=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return t.Color.transparent},ne.prototype.set=function(q){var ve=this.current;(q.r!==ve.r||q.g!==ve.g||q.b!==ve.b||q.a!==ve.a||this.dirty)&&(this.gl.clearColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},ne}(ee),fe=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return 1},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearDepth(q),this.current=q,this.dirty=!1)},ne}(ee),de=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return 0},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearStencil(q),this.current=q,this.dirty=!1)},ne}(ee),pe=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return[!0,!0,!0,!0]},ne.prototype.set=function(q){var ve=this.current;(q[0]!==ve[0]||q[1]!==ve[1]||q[2]!==ve[2]||q[3]!==ve[3]||this.dirty)&&(this.gl.colorMask(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},ne}(ee),W=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return!0},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthMask(q),this.current=q,this.dirty=!1)},ne}(ee),ue=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return 255},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.stencilMask(q),this.current=q,this.dirty=!1)},ne}(ee),me=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},ne.prototype.set=function(q){var ve=this.current;(q.func!==ve.func||q.ref!==ve.ref||q.mask!==ve.mask||this.dirty)&&(this.gl.stencilFunc(q.func,q.ref,q.mask),this.current=q,this.dirty=!1)},ne}(ee),be=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){var q=this.gl;return[q.KEEP,q.KEEP,q.KEEP]},ne.prototype.set=function(q){var ve=this.current;(q[0]!==ve[0]||q[1]!==ve[1]||q[2]!==ve[2]||this.dirty)&&(this.gl.stencilOp(q[0],q[1],q[2]),this.current=q,this.dirty=!1)},ne}(ee),ke=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return!1},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;q?ve.enable(ve.STENCIL_TEST):ve.disable(ve.STENCIL_TEST),this.current=q,this.dirty=!1}},ne}(ee),Pe=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return[0,1]},ne.prototype.set=function(q){var ve=this.current;(q[0]!==ve[0]||q[1]!==ve[1]||this.dirty)&&(this.gl.depthRange(q[0],q[1]),this.current=q,this.dirty=!1)},ne}(ee),je=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return!1},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;q?ve.enable(ve.DEPTH_TEST):ve.disable(ve.DEPTH_TEST),this.current=q,this.dirty=!1}},ne}(ee),ze=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return this.gl.LESS},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthFunc(q),this.current=q,this.dirty=!1)},ne}(ee),Ze=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return!1},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;q?ve.enable(ve.BLEND):ve.disable(ve.BLEND),this.current=q,this.dirty=!1}},ne}(ee),tt=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){var q=this.gl;return[q.ONE,q.ZERO]},ne.prototype.set=function(q){var ve=this.current;(q[0]!==ve[0]||q[1]!==ve[1]||this.dirty)&&(this.gl.blendFunc(q[0],q[1]),this.current=q,this.dirty=!1)},ne}(ee),Ce=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return t.Color.transparent},ne.prototype.set=function(q){var ve=this.current;(q.r!==ve.r||q.g!==ve.g||q.b!==ve.b||q.a!==ve.a||this.dirty)&&(this.gl.blendColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},ne}(ee),Ae=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return this.gl.FUNC_ADD},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.blendEquation(q),this.current=q,this.dirty=!1)},ne}(ee),Ne=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return!1},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;q?ve.enable(ve.CULL_FACE):ve.disable(ve.CULL_FACE),this.current=q,this.dirty=!1}},ne}(ee),qe=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return this.gl.BACK},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.cullFace(q),this.current=q,this.dirty=!1)},ne}(ee),At=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return this.gl.CCW},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.frontFace(q),this.current=q,this.dirty=!1)},ne}(ee),kt=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.useProgram(q),this.current=q,this.dirty=!1)},ne}(ee),Ve=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return this.gl.TEXTURE0},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.activeTexture(q),this.current=q,this.dirty=!1)},ne}(ee),ft=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){var q=this.gl;return[0,0,q.drawingBufferWidth,q.drawingBufferHeight]},ne.prototype.set=function(q){var ve=this.current;(q[0]!==ve[0]||q[1]!==ve[1]||q[2]!==ve[2]||q[3]!==ve[3]||this.dirty)&&(this.gl.viewport(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},ne}(ee),St=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;ve.bindFramebuffer(ve.FRAMEBUFFER,q),this.current=q,this.dirty=!1}},ne}(ee),Wt=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;ve.bindRenderbuffer(ve.RENDERBUFFER,q),this.current=q,this.dirty=!1}},ne}(ee),Qt=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;ve.bindTexture(ve.TEXTURE_2D,q),this.current=q,this.dirty=!1}},ne}(ee),zt=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;ve.bindBuffer(ve.ARRAY_BUFFER,q),this.current=q,this.dirty=!1}},ne}(ee),$t=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne.prototype.set=function(q){var ve=this.gl;ve.bindBuffer(ve.ELEMENT_ARRAY_BUFFER,q),this.current=q,this.dirty=!1},ne}(ee),rr=function($){function ne(q){$.call(this,q),this.vao=q.extVertexArrayObject}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne.prototype.set=function(q){this.vao&&(q!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(q),this.current=q,this.dirty=!1)},ne}(ee),Pt=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return 4},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;ve.pixelStorei(ve.UNPACK_ALIGNMENT,q),this.current=q,this.dirty=!1}},ne}(ee),Lt=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return!1},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q),this.current=q,this.dirty=!1}},ne}(ee),dt=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return!1},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,q),this.current=q,this.dirty=!1}},ne}(ee),lt=function($){function ne(q,ve){$.call(this,q),this.context=q,this.parent=ve}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne}(ee),Te=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.setDirty=function(){this.dirty=!0},ne.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ve=this.gl;ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_2D,q,0),this.current=q,this.dirty=!1}},ne}(lt),Le=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ve=this.gl;ve.framebufferRenderbuffer(ve.FRAMEBUFFER,ve.DEPTH_ATTACHMENT,ve.RENDERBUFFER,q),this.current=q,this.dirty=!1}},ne}(lt),Be=function($,ne,q,ve){this.context=$,this.width=ne,this.height=q;var Se=this.framebuffer=$.gl.createFramebuffer();this.colorAttachment=new Te($,Se),ve&&(this.depthAttachment=new Le($,Se))};Be.prototype.destroy=function(){var $=this.context.gl,ne=this.colorAttachment.get();if(ne&&$.deleteTexture(ne),this.depthAttachment){var q=this.depthAttachment.get();q&&$.deleteRenderbuffer(q)}$.deleteFramebuffer(this.framebuffer)};var et=function($,ne,q){this.func=$,this.mask=ne,this.range=q};et.ReadOnly=!1,et.ReadWrite=!0,et.disabled=new et(519,et.ReadOnly,[0,1]);var Me=function($,ne,q,ve,Se,Oe){this.test=$,this.ref=ne,this.mask=q,this.fail=ve,this.depthFail=Se,this.pass=Oe};Me.disabled=new Me({func:519,mask:0},0,0,7680,7680,7680);var Ie=function($,ne,q){this.blendFunction=$,this.blendColor=ne,this.mask=q};Ie.disabled=new Ie(Ie.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Ie.unblended=new Ie(Ie.Replace,t.Color.transparent,[!0,!0,!0,!0]),Ie.alphaBlended=new Ie([1,771],t.Color.transparent,[!0,!0,!0,!0]);var He=function($,ne,q){this.enable=$,this.mode=ne,this.frontFace=q};He.disabled=new He(!1,1029,2305),He.backCCW=new He(!0,1029,2305);var Xe=function($){this.gl=$,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ae(this),this.clearDepth=new fe(this),this.clearStencil=new de(this),this.colorMask=new pe(this),this.depthMask=new W(this),this.stencilMask=new ue(this),this.stencilFunc=new me(this),this.stencilOp=new be(this),this.stencilTest=new ke(this),this.depthRange=new Pe(this),this.depthTest=new je(this),this.depthFunc=new ze(this),this.blend=new Ze(this),this.blendFunc=new tt(this),this.blendColor=new Ce(this),this.blendEquation=new Ae(this),this.cullFace=new Ne(this),this.cullFaceSide=new qe(this),this.frontFace=new At(this),this.program=new kt(this),this.activeTexture=new Ve(this),this.viewport=new ft(this),this.bindFramebuffer=new St(this),this.bindRenderbuffer=new Wt(this),this.bindTexture=new Qt(this),this.bindVertexBuffer=new zt(this),this.bindElementBuffer=new $t(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new rr(this),this.pixelStoreUnpack=new Pt(this),this.pixelStoreUnpackPremultiplyAlpha=new Lt(this),this.pixelStoreUnpackFlipY=new dt(this),this.extTextureFilterAnisotropic=$.getExtension("EXT_texture_filter_anisotropic")||$.getExtension("MOZ_EXT_texture_filter_anisotropic")||$.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=$.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=$.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&($.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=$.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=$.getExtension("EXT_disjoint_timer_query")};Xe.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Xe.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Xe.prototype.createIndexBuffer=function($,ne){return new V(this,$,ne)},Xe.prototype.createVertexBuffer=function($,ne,q){return new re(this,$,ne,q)},Xe.prototype.createRenderbuffer=function($,ne,q){var ve=this.gl,Se=ve.createRenderbuffer();return this.bindRenderbuffer.set(Se),ve.renderbufferStorage(ve.RENDERBUFFER,$,ne,q),this.bindRenderbuffer.set(null),Se},Xe.prototype.createFramebuffer=function($,ne,q){return new Be(this,$,ne,q)},Xe.prototype.clear=function($){var ne=$.color,q=$.depth,ve=this.gl,Se=0;ne&&(Se|=ve.COLOR_BUFFER_BIT,this.clearColor.set(ne),this.colorMask.set([!0,!0,!0,!0])),q!==void 0&&(Se|=ve.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(q),this.depthMask.set(!0)),ve.clear(Se)},Xe.prototype.setCullFace=function($){$.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set($.mode),this.frontFace.set($.frontFace))},Xe.prototype.setDepthMode=function($){$.func!==this.gl.ALWAYS||$.mask?(this.depthTest.set(!0),this.depthFunc.set($.func),this.depthMask.set($.mask),this.depthRange.set($.range)):this.depthTest.set(!1)},Xe.prototype.setStencilMode=function($){$.test.func!==this.gl.ALWAYS||$.mask?(this.stencilTest.set(!0),this.stencilMask.set($.mask),this.stencilOp.set([$.fail,$.depthFail,$.pass]),this.stencilFunc.set({func:$.test.func,ref:$.ref,mask:$.test.mask})):this.stencilTest.set(!1)},Xe.prototype.setColorMode=function($){t.deepEqual($.blendFunction,Ie.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set($.blendFunction),this.blendColor.set($.blendColor)),this.colorMask.set($.mask)},Xe.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ht=function($){function ne(q,ve,Se){var Oe=this;$.call(this),this.id=q,this.dispatcher=Se,this.on("data",function(Ye){Ye.dataType==="source"&&Ye.sourceDataType==="metadata"&&(Oe._sourceLoaded=!0),Oe._sourceLoaded&&!Oe._paused&&Ye.dataType==="source"&&Ye.sourceDataType==="content"&&(Oe.reload(),Oe.transform&&Oe.update(Oe.transform))}),this.on("error",function(){Oe._sourceErrored=!0}),this._source=function(Ye,ut,bt,jt){var sr=new te[ut.type](Ye,ut,bt,jt);if(sr.id!==Ye)throw new Error("Expected Source id to be "+Ye+" instead of "+sr.id);return t.bindAll(["load","abort","unload","serialize","prepare"],sr),sr}(q,ve,Se,this),this._tiles={},this._cache=new Q(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.onAdd=function(q){this.map=q,this._maxTileCacheSize=q?q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(q)},ne.prototype.onRemove=function(q){this._source&&this._source.onRemove&&this._source.onRemove(q)},ne.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var q in this._tiles){var ve=this._tiles[q];if(ve.state!=="loaded"&&ve.state!=="errored")return!1}return!0},ne.prototype.getSource=function(){return this._source},ne.prototype.pause=function(){this._paused=!0},ne.prototype.resume=function(){if(this._paused){var q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,q&&this.reload(),this.transform&&this.update(this.transform)}},ne.prototype._loadTile=function(q,ve){return this._source.loadTile(q,ve)},ne.prototype._unloadTile=function(q){if(this._source.unloadTile)return this._source.unloadTile(q,function(){})},ne.prototype._abortTile=function(q){if(this._source.abortTile)return this._source.abortTile(q,function(){})},ne.prototype.serialize=function(){return this._source.serialize()},ne.prototype.prepare=function(q){for(var ve in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var Se=this._tiles[ve];Se.upload(q),Se.prepare(this.map.style.imageManager)}},ne.prototype.getIds=function(){return t.values(this._tiles).map(function(q){return q.tileID}).sort(it).map(function(q){return q.key})},ne.prototype.getRenderableIds=function(q){var ve=this,Se=[];for(var Oe in this._tiles)this._isIdRenderable(Oe,q)&&Se.push(this._tiles[Oe]);return q?Se.sort(function(Ye,ut){var bt=Ye.tileID,jt=ut.tileID,sr=new t.Point(bt.canonical.x,bt.canonical.y)._rotate(ve.transform.angle),pr=new t.Point(jt.canonical.x,jt.canonical.y)._rotate(ve.transform.angle);return bt.overscaledZ-jt.overscaledZ||pr.y-sr.y||pr.x-sr.x}).map(function(Ye){return Ye.tileID.key}):Se.map(function(Ye){return Ye.tileID}).sort(it).map(function(Ye){return Ye.key})},ne.prototype.hasRenderableParent=function(q){var ve=this.findLoadedParent(q,0);return!!ve&&this._isIdRenderable(ve.tileID.key)},ne.prototype._isIdRenderable=function(q,ve){return this._tiles[q]&&this._tiles[q].hasData()&&!this._coveredTiles[q]&&(ve||!this._tiles[q].holdingForFade())},ne.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var q in this._cache.reset(),this._tiles)this._tiles[q].state!=="errored"&&this._reloadTile(q,"reloading")},ne.prototype._reloadTile=function(q,ve){var Se=this._tiles[q];Se&&(Se.state!=="loading"&&(Se.state=ve),this._loadTile(Se,this._tileLoaded.bind(this,Se,q,ve)))},ne.prototype._tileLoaded=function(q,ve,Se,Oe){if(Oe)return q.state="errored",void(Oe.status!==404?this._source.fire(new t.ErrorEvent(Oe,{tile:q})):this.update(this.transform));q.timeAdded=t.browser.now(),Se==="expired"&&(q.refreshedUponExpiration=!0),this._setTileReloadTimer(ve,q),this.getSource().type==="raster-dem"&&q.dem&&this._backfillDEM(q),this._state.initializeTileState(q,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:q,coord:q.tileID}))},ne.prototype._backfillDEM=function(q){for(var ve=this.getRenderableIds(),Se=0;Se<ve.length;Se++){var Oe=ve[Se];if(q.neighboringTiles&&q.neighboringTiles[Oe]){var Ye=this.getTileByID(Oe);ut(q,Ye),ut(Ye,q)}}function ut(bt,jt){bt.needsHillshadePrepare=!0;var sr=jt.tileID.canonical.x-bt.tileID.canonical.x,pr=jt.tileID.canonical.y-bt.tileID.canonical.y,br=Math.pow(2,bt.tileID.canonical.z),Cr=jt.tileID.key;sr===0&&pr===0||Math.abs(pr)>1||(Math.abs(sr)>1&&(Math.abs(sr+br)===1?sr+=br:Math.abs(sr-br)===1&&(sr-=br)),jt.dem&&bt.dem&&(bt.dem.backfillBorder(jt.dem,sr,pr),bt.neighboringTiles&&bt.neighboringTiles[Cr]&&(bt.neighboringTiles[Cr].backfilled=!0)))}},ne.prototype.getTile=function(q){return this.getTileByID(q.key)},ne.prototype.getTileByID=function(q){return this._tiles[q]},ne.prototype._retainLoadedChildren=function(q,ve,Se,Oe){for(var Ye in this._tiles){var ut=this._tiles[Ye];if(!(Oe[Ye]||!ut.hasData()||ut.tileID.overscaledZ<=ve||ut.tileID.overscaledZ>Se)){for(var bt=ut.tileID;ut&&ut.tileID.overscaledZ>ve+1;){var jt=ut.tileID.scaledTo(ut.tileID.overscaledZ-1);(ut=this._tiles[jt.key])&&ut.hasData()&&(bt=jt)}for(var sr=bt;sr.overscaledZ>ve;)if(q[(sr=sr.scaledTo(sr.overscaledZ-1)).key]){Oe[bt.key]=bt;break}}}},ne.prototype.findLoadedParent=function(q,ve){if(q.key in this._loadedParentTiles){var Se=this._loadedParentTiles[q.key];return Se&&Se.tileID.overscaledZ>=ve?Se:null}for(var Oe=q.overscaledZ-1;Oe>=ve;Oe--){var Ye=q.scaledTo(Oe),ut=this._getLoadedTile(Ye);if(ut)return ut}},ne.prototype._getLoadedTile=function(q){var ve=this._tiles[q.key];return ve&&ve.hasData()?ve:this._cache.getByKey(q.wrapped().key)},ne.prototype.updateCacheSize=function(q){var ve=Math.ceil(q.width/this._source.tileSize)+1,Se=Math.ceil(q.height/this._source.tileSize)+1,Oe=Math.floor(ve*Se*5),Ye=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Oe):Oe;this._cache.setMaxSize(Ye)},ne.prototype.handleWrapJump=function(q){var ve=Math.round((q-(this._prevLng===void 0?q:this._prevLng))/360);if(this._prevLng=q,ve){var Se={};for(var Oe in this._tiles){var Ye=this._tiles[Oe];Ye.tileID=Ye.tileID.unwrapTo(Ye.tileID.wrap+ve),Se[Ye.tileID.key]=Ye}for(var ut in this._tiles=Se,this._timers)clearTimeout(this._timers[ut]),delete this._timers[ut];for(var bt in this._tiles)this._setTileReloadTimer(bt,this._tiles[bt])}},ne.prototype.update=function(q){var ve=this;if(this.transform=q,this._sourceLoaded&&!this._paused){var Se;this.updateCacheSize(q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?Se=q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(qn){return new t.OverscaledTileID(qn.canonical.z,qn.wrap,qn.canonical.z,qn.canonical.x,qn.canonical.y)}):(Se=q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Se=Se.filter(function(qn){return ve._source.hasTile(qn)}))):Se=[];var Oe=q.coveringZoomLevel(this._source),Ye=Math.max(Oe-ne.maxOverzooming,this._source.minzoom),ut=Math.max(Oe+ne.maxUnderzooming,this._source.minzoom),bt=this._updateRetainedTiles(Se,Oe);if(Ge(this._source.type)){for(var jt={},sr={},pr=0,br=Object.keys(bt);pr<br.length;pr+=1){var Cr=br[pr],Pr=bt[Cr],jr=this._tiles[Cr];if(jr&&!(jr.fadeEndTime&&jr.fadeEndTime<=t.browser.now())){var Mr=this.findLoadedParent(Pr,Ye);Mr&&(this._addTile(Mr.tileID),jt[Mr.tileID.key]=Mr.tileID),sr[Cr]=Pr}}for(var Ur in this._retainLoadedChildren(sr,Oe,ut,bt),jt)bt[Ur]||(this._coveredTiles[Ur]=!0,bt[Ur]=jt[Ur])}for(var Jr in bt)this._tiles[Jr].clearFadeHold();for(var fn=0,zn=t.keysDifference(this._tiles,bt);fn<zn.length;fn+=1){var kn=zn[fn],Dn=this._tiles[kn];Dn.hasSymbolBuckets&&!Dn.holdingForFade()?Dn.setHoldDuration(this.map._fadeDuration):Dn.hasSymbolBuckets&&!Dn.symbolFadeFinished()||this._removeTile(kn)}this._updateLoadedParentTileCache()}},ne.prototype.releaseSymbolFadeTiles=function(){for(var q in this._tiles)this._tiles[q].holdingForFade()&&this._removeTile(q)},ne.prototype._updateRetainedTiles=function(q,ve){for(var Se={},Oe={},Ye=Math.max(ve-ne.maxOverzooming,this._source.minzoom),ut=Math.max(ve+ne.maxUnderzooming,this._source.minzoom),bt={},jt=0,sr=q;jt<sr.length;jt+=1){var pr=sr[jt],br=this._addTile(pr);Se[pr.key]=pr,br.hasData()||ve<this._source.maxzoom&&(bt[pr.key]=pr)}this._retainLoadedChildren(bt,ve,ut,Se);for(var Cr=0,Pr=q;Cr<Pr.length;Cr+=1){var jr=Pr[Cr],Mr=this._tiles[jr.key];if(!Mr.hasData()){if(ve+1>this._source.maxzoom){var Ur=jr.children(this._source.maxzoom)[0],Jr=this.getTile(Ur);if(Jr&&Jr.hasData()){Se[Ur.key]=Ur;continue}}else{var fn=jr.children(this._source.maxzoom);if(Se[fn[0].key]&&Se[fn[1].key]&&Se[fn[2].key]&&Se[fn[3].key])continue}for(var zn=Mr.wasRequested(),kn=jr.overscaledZ-1;kn>=Ye;--kn){var Dn=jr.scaledTo(kn);if(Oe[Dn.key]||(Oe[Dn.key]=!0,!(Mr=this.getTile(Dn))&&zn&&(Mr=this._addTile(Dn)),Mr&&(Se[Dn.key]=Dn,zn=Mr.wasRequested(),Mr.hasData())))break}}}return Se},ne.prototype._updateLoadedParentTileCache=function(){for(var q in this._loadedParentTiles={},this._tiles){for(var ve=[],Se=void 0,Oe=this._tiles[q].tileID;Oe.overscaledZ>0;){if(Oe.key in this._loadedParentTiles){Se=this._loadedParentTiles[Oe.key];break}ve.push(Oe.key);var Ye=Oe.scaledTo(Oe.overscaledZ-1);if(Se=this._getLoadedTile(Ye))break;Oe=Ye}for(var ut=0,bt=ve;ut<bt.length;ut+=1)this._loadedParentTiles[bt[ut]]=Se}},ne.prototype._addTile=function(q){var ve=this._tiles[q.key];if(ve)return ve;(ve=this._cache.getAndRemove(q))&&(this._setTileReloadTimer(q.key,ve),ve.tileID=q,this._state.initializeTileState(ve,this.map?this.map.painter:null),this._cacheTimers[q.key]&&(clearTimeout(this._cacheTimers[q.key]),delete this._cacheTimers[q.key],this._setTileReloadTimer(q.key,ve)));var Se=!!ve;return Se||(ve=new t.Tile(q,this._source.tileSize*q.overscaleFactor()),this._loadTile(ve,this._tileLoaded.bind(this,ve,q.key,ve.state))),ve?(ve.uses++,this._tiles[q.key]=ve,Se||this._source.fire(new t.Event("dataloading",{tile:ve,coord:ve.tileID,dataType:"source"})),ve):null},ne.prototype._setTileReloadTimer=function(q,ve){var Se=this;q in this._timers&&(clearTimeout(this._timers[q]),delete this._timers[q]);var Oe=ve.getExpiryTimeout();Oe&&(this._timers[q]=setTimeout(function(){Se._reloadTile(q,"expired"),delete Se._timers[q]},Oe))},ne.prototype._removeTile=function(q){var ve=this._tiles[q];ve&&(ve.uses--,delete this._tiles[q],this._timers[q]&&(clearTimeout(this._timers[q]),delete this._timers[q]),ve.uses>0||(ve.hasData()&&ve.state!=="reloading"?this._cache.add(ve.tileID,ve,ve.getExpiryTimeout()):(ve.aborted=!0,this._abortTile(ve),this._unloadTile(ve))))},ne.prototype.clearTiles=function(){for(var q in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(q);this._cache.reset()},ne.prototype.tilesIn=function(q,ve,Se){var Oe=this,Ye=[],ut=this.transform;if(!ut)return Ye;for(var bt=Se?ut.getCameraQueryGeometry(q):q,jt=q.map(function(kn){return ut.pointCoordinate(kn)}),sr=bt.map(function(kn){return ut.pointCoordinate(kn)}),pr=this.getIds(),br=1/0,Cr=1/0,Pr=-1/0,jr=-1/0,Mr=0,Ur=sr;Mr<Ur.length;Mr+=1){var Jr=Ur[Mr];br=Math.min(br,Jr.x),Cr=Math.min(Cr,Jr.y),Pr=Math.max(Pr,Jr.x),jr=Math.max(jr,Jr.y)}for(var fn=function(kn){var Dn=Oe._tiles[pr[kn]];if(!Dn.holdingForFade()){var qn=Dn.tileID,pa=Math.pow(2,ut.zoom-Dn.tileID.overscaledZ),ua=ve*Dn.queryPadding*t.EXTENT/Dn.tileSize/pa,wa=[qn.getTilePoint(new t.MercatorCoordinate(br,Cr)),qn.getTilePoint(new t.MercatorCoordinate(Pr,jr))];if(wa[0].x-ua<t.EXTENT&&wa[0].y-ua<t.EXTENT&&wa[1].x+ua>=0&&wa[1].y+ua>=0){var Da=jt.map(function(qa){return qn.getTilePoint(qa)}),oi=sr.map(function(qa){return qn.getTilePoint(qa)});Ye.push({tile:Dn,tileID:qn,queryGeometry:Da,cameraQueryGeometry:oi,scale:pa})}}},zn=0;zn<pr.length;zn++)fn(zn);return Ye},ne.prototype.getVisibleCoordinates=function(q){for(var ve=this,Se=this.getRenderableIds(q).map(function(bt){return ve._tiles[bt].tileID}),Oe=0,Ye=Se;Oe<Ye.length;Oe+=1){var ut=Ye[Oe];ut.posMatrix=this.transform.calculatePosMatrix(ut.toUnwrapped())}return Se},ne.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ge(this._source.type))for(var q in this._tiles){var ve=this._tiles[q];if(ve.fadeEndTime!==void 0&&ve.fadeEndTime>=t.browser.now())return!0}return!1},ne.prototype.setFeatureState=function(q,ve,Se){this._state.updateState(q=q||"_geojsonTileLayer",ve,Se)},ne.prototype.removeFeatureState=function(q,ve,Se){this._state.removeFeatureState(q=q||"_geojsonTileLayer",ve,Se)},ne.prototype.getFeatureState=function(q,ve){return this._state.getState(q=q||"_geojsonTileLayer",ve)},ne.prototype.setDependencies=function(q,ve,Se){var Oe=this._tiles[q];Oe&&Oe.setDependencies(ve,Se)},ne.prototype.reloadTilesForDependencies=function(q,ve){for(var Se in this._tiles)this._tiles[Se].hasDependency(q,ve)&&this._reloadTile(Se,"reloading");this._cache.filter(function(Oe){return!Oe.hasDependency(q,ve)})},ne}(t.Evented);function it($,ne){var q=Math.abs(2*$.wrap)-+($.wrap<0),ve=Math.abs(2*ne.wrap)-+(ne.wrap<0);return $.overscaledZ-ne.overscaledZ||ve-q||ne.canonical.y-$.canonical.y||ne.canonical.x-$.canonical.x}function Ge($){return $==="raster"||$==="image"||$==="video"}function ot(){return new t.window.Worker(wo.workerUrl)}ht.maxOverzooming=10,ht.maxUnderzooming=3;var Je="mapboxgl_preloaded_worker_pool",st=function(){this.active={}};st.prototype.acquire=function($){if(!this.workers)for(this.workers=[];this.workers.length<st.workerCount;)this.workers.push(new ot);return this.active[$]=!0,this.workers.slice()},st.prototype.release=function($){delete this.active[$],this.numActive()===0&&(this.workers.forEach(function(ne){ne.terminate()}),this.workers=null)},st.prototype.isPreloaded=function(){return!!this.active[Je]},st.prototype.numActive=function(){return Object.keys(this.active).length};var It,Ft=Math.floor(t.browser.hardwareConcurrency/2);function nr(){return It||(It=new st),It}function We($,ne){var q={};for(var ve in $)ve!=="ref"&&(q[ve]=$[ve]);return t.refProperties.forEach(function(Se){Se in ne&&(q[Se]=ne[Se])}),q}function Fe($){$=$.slice();for(var ne=Object.create(null),q=0;q<$.length;q++)ne[$[q].id]=$[q];for(var ve=0;ve<$.length;ve++)"ref"in $[ve]&&($[ve]=We($[ve],ne[$[ve].ref]));return $}st.workerCount=Math.max(Math.min(Ft,6),1);var _t={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Mt($,ne,q){q.push({command:_t.addSource,args:[$,ne[$]]})}function wt($,ne,q){ne.push({command:_t.removeSource,args:[$]}),q[$]=!0}function Dt($,ne,q,ve){wt($,q,ve),Mt($,ne,q)}function Rt($,ne,q){var ve;for(ve in $[q])if($[q].hasOwnProperty(ve)&&ve!=="data"&&!t.deepEqual($[q][ve],ne[q][ve]))return!1;for(ve in ne[q])if(ne[q].hasOwnProperty(ve)&&ve!=="data"&&!t.deepEqual($[q][ve],ne[q][ve]))return!1;return!0}function Bt($,ne,q,ve,Se,Oe){var Ye;for(Ye in ne=ne||{},$=$||{})$.hasOwnProperty(Ye)&&(t.deepEqual($[Ye],ne[Ye])||q.push({command:Oe,args:[ve,Ye,ne[Ye],Se]}));for(Ye in ne)ne.hasOwnProperty(Ye)&&!$.hasOwnProperty(Ye)&&(t.deepEqual($[Ye],ne[Ye])||q.push({command:Oe,args:[ve,Ye,ne[Ye],Se]}))}function Nt($){return $.id}function er($,ne){return $[ne.id]=ne,$}var qt=function($,ne){this.reset($,ne)};qt.prototype.reset=function($,ne){this.points=$||[],this._distances=[0];for(var q=1;q<this.points.length;q++)this._distances[q]=this._distances[q-1]+this.points[q].dist(this.points[q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ne||0,.5*this.length),this.paddedLength=this.length-2*this.padding},qt.prototype.lerp=function($){if(this.points.length===1)return this.points[0];$=t.clamp($,0,1);for(var ne=1,q=this._distances[ne],ve=$*this.paddedLength+this.padding;q<ve&&ne<this._distances.length;)q=this._distances[++ne];var Se=ne-1,Oe=this._distances[Se],Ye=q-Oe,ut=Ye>0?(ve-Oe)/Ye:0;return this.points[Se].mult(1-ut).add(this.points[ne].mult(ut))};var Zt=function($,ne,q){var ve=this.boxCells=[],Se=this.circleCells=[];this.xCellCount=Math.ceil($/q),this.yCellCount=Math.ceil(ne/q);for(var Oe=0;Oe<this.xCellCount*this.yCellCount;Oe++)ve.push([]),Se.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=$,this.height=ne,this.xScale=this.xCellCount/$,this.yScale=this.yCellCount/ne,this.boxUid=0,this.circleUid=0};function _r($,ne,q,ve,Se){var Oe=t.create();return ne?(t.scale(Oe,Oe,[1/Se,1/Se,1]),q||t.rotateZ(Oe,Oe,ve.angle)):t.multiply(Oe,ve.labelPlaneMatrix,$),Oe}function Gr($,ne,q,ve,Se){if(ne){var Oe=t.clone($);return t.scale(Oe,Oe,[Se,Se,1]),q||t.rotateZ(Oe,Oe,-ve.angle),Oe}return ve.glCoordMatrix}function zr($,ne){var q=[$.x,$.y,0,1];xn(q,q,ne);var ve=q[3];return{point:new t.Point(q[0]/ve,q[1]/ve),signedDistanceFromCamera:ve}}function Or($,ne){return .5+$/ne*.5}function Mn($,ne){var q=$[0]/$[3],ve=$[1]/$[3];return q>=-ne[0]&&q<=ne[0]&&ve>=-ne[1]&&ve<=ne[1]}function Yn($,ne,q,ve,Se,Oe,Ye,ut){var bt=ve?$.textSizeData:$.iconSizeData,jt=t.evaluateSizeForZoom(bt,q.transform.zoom),sr=[256/q.width*2+1,256/q.height*2+1],pr=ve?$.text.dynamicLayoutVertexArray:$.icon.dynamicLayoutVertexArray;pr.clear();for(var br=$.lineVertexArray,Cr=ve?$.text.placedSymbolArray:$.icon.placedSymbolArray,Pr=q.transform.width/q.transform.height,jr=!1,Mr=0;Mr<Cr.length;Mr++){var Ur=Cr.get(Mr);if(Ur.hidden||Ur.writingMode===t.WritingMode.vertical&&!jr)dn(Ur.numGlyphs,pr);else{jr=!1;var Jr=[Ur.anchorX,Ur.anchorY,0,1];if(t.transformMat4(Jr,Jr,ne),Mn(Jr,sr)){var fn=Or(q.transform.cameraToCenterDistance,Jr[3]),zn=t.evaluateSizeForFeature(bt,jt,Ur),kn=Ye?zn/fn:zn*fn,Dn=new t.Point(Ur.anchorX,Ur.anchorY),qn=zr(Dn,Se).point,pa={},ua=jn(Ur,kn,!1,ut,ne,Se,Oe,$.glyphOffsetArray,br,pr,qn,Dn,pa,Pr);jr=ua.useVertical,(ua.notEnoughRoom||jr||ua.needsFlipping&&jn(Ur,kn,!0,ut,ne,Se,Oe,$.glyphOffsetArray,br,pr,qn,Dn,pa,Pr).notEnoughRoom)&&dn(Ur.numGlyphs,pr)}else dn(Ur.numGlyphs,pr)}}ve?$.text.dynamicLayoutVertexBuffer.updateData(pr):$.icon.dynamicLayoutVertexBuffer.updateData(pr)}function An($,ne,q,ve,Se,Oe,Ye,ut,bt,jt,sr){var pr=ut.glyphStartIndex+ut.numGlyphs,br=ut.lineStartIndex,Cr=ut.lineStartIndex+ut.lineLength,Pr=ne.getoffsetX(ut.glyphStartIndex),jr=ne.getoffsetX(pr-1),Mr=Lr($*Pr,q,ve,Se,Oe,Ye,ut.segment,br,Cr,bt,jt,sr);if(!Mr)return null;var Ur=Lr($*jr,q,ve,Se,Oe,Ye,ut.segment,br,Cr,bt,jt,sr);return Ur?{first:Mr,last:Ur}:null}function Bn($,ne,q,ve){return $===t.WritingMode.horizontal&&Math.abs(q.y-ne.y)>Math.abs(q.x-ne.x)*ve?{useVertical:!0}:($===t.WritingMode.vertical?ne.y<q.y:ne.x>q.x)?{needsFlipping:!0}:null}function jn($,ne,q,ve,Se,Oe,Ye,ut,bt,jt,sr,pr,br,Cr){var Pr,jr=ne/24,Mr=$.lineOffsetX*jr,Ur=$.lineOffsetY*jr;if($.numGlyphs>1){var Jr=$.glyphStartIndex+$.numGlyphs,fn=$.lineStartIndex,zn=$.lineStartIndex+$.lineLength,kn=An(jr,ut,Mr,Ur,q,sr,pr,$,bt,Oe,br);if(!kn)return{notEnoughRoom:!0};var Dn=zr(kn.first.point,Ye).point,qn=zr(kn.last.point,Ye).point;if(ve&&!q){var pa=Bn($.writingMode,Dn,qn,Cr);if(pa)return pa}Pr=[kn.first];for(var ua=$.glyphStartIndex+1;ua<Jr-1;ua++)Pr.push(Lr(jr*ut.getoffsetX(ua),Mr,Ur,q,sr,pr,$.segment,fn,zn,bt,Oe,br));Pr.push(kn.last)}else{if(ve&&!q){var wa=zr(pr,Se).point,Da=$.lineStartIndex+$.segment+1,oi=new t.Point(bt.getx(Da),bt.gety(Da)),qa=zr(oi,Se),Fi=qa.signedDistanceFromCamera>0?qa.point:Nr(pr,oi,wa,1,Se),Ua=Bn($.writingMode,wa,Fi,Cr);if(Ua)return Ua}var fi=Lr(jr*ut.getoffsetX($.glyphStartIndex),Mr,Ur,q,sr,pr,$.segment,$.lineStartIndex,$.lineStartIndex+$.lineLength,bt,Oe,br);if(!fi)return{notEnoughRoom:!0};Pr=[fi]}for(var Ii=0,hi=Pr;Ii<hi.length;Ii+=1){var ii=hi[Ii];t.addDynamicAttributes(jt,ii.point,ii.angle)}return{}}function Nr($,ne,q,ve,Se){var Oe=zr($.add($.sub(ne)._unit()),Se).point,Ye=q.sub(Oe);return q.add(Ye._mult(ve/Ye.mag()))}function Lr($,ne,q,ve,Se,Oe,Ye,ut,bt,jt,sr,pr){var br=ve?$-ne:$+ne,Cr=br>0?1:-1,Pr=0;ve&&(Cr*=-1,Pr=Math.PI),Cr<0&&(Pr+=Math.PI);for(var jr=Cr>0?ut+Ye:ut+Ye+1,Mr=Se,Ur=Se,Jr=0,fn=0,zn=Math.abs(br),kn=[];Jr+fn<=zn;){if((jr+=Cr)<ut||jr>=bt)return null;if(Ur=Mr,kn.push(Mr),(Mr=pr[jr])===void 0){var Dn=new t.Point(jt.getx(jr),jt.gety(jr)),qn=zr(Dn,sr);if(qn.signedDistanceFromCamera>0)Mr=pr[jr]=qn.point;else{var pa=jr-Cr;Mr=Nr(Jr===0?Oe:new t.Point(jt.getx(pa),jt.gety(pa)),Dn,Ur,zn-Jr+1,sr)}}Jr+=fn,fn=Ur.dist(Mr)}var ua=(zn-Jr)/fn,wa=Mr.sub(Ur),Da=wa.mult(ua)._add(Ur);Da._add(wa._unit()._perp()._mult(q*Cr));var oi=Pr+Math.atan2(Mr.y-Ur.y,Mr.x-Ur.x);return kn.push(Da),{point:Da,angle:oi,path:kn}}Zt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Zt.prototype.insert=function($,ne,q,ve,Se){this._forEachCell(ne,q,ve,Se,this._insertBoxCell,this.boxUid++),this.boxKeys.push($),this.bboxes.push(ne),this.bboxes.push(q),this.bboxes.push(ve),this.bboxes.push(Se)},Zt.prototype.insertCircle=function($,ne,q,ve){this._forEachCell(ne-ve,q-ve,ne+ve,q+ve,this._insertCircleCell,this.circleUid++),this.circleKeys.push($),this.circles.push(ne),this.circles.push(q),this.circles.push(ve)},Zt.prototype._insertBoxCell=function($,ne,q,ve,Se,Oe){this.boxCells[Se].push(Oe)},Zt.prototype._insertCircleCell=function($,ne,q,ve,Se,Oe){this.circleCells[Se].push(Oe)},Zt.prototype._query=function($,ne,q,ve,Se,Oe){if(q<0||$>this.width||ve<0||ne>this.height)return!Se&&[];var Ye=[];if($<=0&&ne<=0&&this.width<=q&&this.height<=ve){if(Se)return!0;for(var ut=0;ut<this.boxKeys.length;ut++)Ye.push({key:this.boxKeys[ut],x1:this.bboxes[4*ut],y1:this.bboxes[4*ut+1],x2:this.bboxes[4*ut+2],y2:this.bboxes[4*ut+3]});for(var bt=0;bt<this.circleKeys.length;bt++){var jt=this.circles[3*bt],sr=this.circles[3*bt+1],pr=this.circles[3*bt+2];Ye.push({key:this.circleKeys[bt],x1:jt-pr,y1:sr-pr,x2:jt+pr,y2:sr+pr})}return Oe?Ye.filter(Oe):Ye}return this._forEachCell($,ne,q,ve,this._queryCell,Ye,{hitTest:Se,seenUids:{box:{},circle:{}}},Oe),Se?Ye.length>0:Ye},Zt.prototype._queryCircle=function($,ne,q,ve,Se){var Oe=$-q,Ye=$+q,ut=ne-q,bt=ne+q;if(Ye<0||Oe>this.width||bt<0||ut>this.height)return!ve&&[];var jt=[];return this._forEachCell(Oe,ut,Ye,bt,this._queryCellCircle,jt,{hitTest:ve,circle:{x:$,y:ne,radius:q},seenUids:{box:{},circle:{}}},Se),ve?jt.length>0:jt},Zt.prototype.query=function($,ne,q,ve,Se){return this._query($,ne,q,ve,!1,Se)},Zt.prototype.hitTest=function($,ne,q,ve,Se){return this._query($,ne,q,ve,!0,Se)},Zt.prototype.hitTestCircle=function($,ne,q,ve){return this._queryCircle($,ne,q,!0,ve)},Zt.prototype._queryCell=function($,ne,q,ve,Se,Oe,Ye,ut){var bt=Ye.seenUids,jt=this.boxCells[Se];if(jt!==null)for(var sr=this.bboxes,pr=0,br=jt;pr<br.length;pr+=1){var Cr=br[pr];if(!bt.box[Cr]){bt.box[Cr]=!0;var Pr=4*Cr;if($<=sr[Pr+2]&&ne<=sr[Pr+3]&&q>=sr[Pr+0]&&ve>=sr[Pr+1]&&(!ut||ut(this.boxKeys[Cr]))){if(Ye.hitTest)return Oe.push(!0),!0;Oe.push({key:this.boxKeys[Cr],x1:sr[Pr],y1:sr[Pr+1],x2:sr[Pr+2],y2:sr[Pr+3]})}}}var jr=this.circleCells[Se];if(jr!==null)for(var Mr=this.circles,Ur=0,Jr=jr;Ur<Jr.length;Ur+=1){var fn=Jr[Ur];if(!bt.circle[fn]){bt.circle[fn]=!0;var zn=3*fn;if(this._circleAndRectCollide(Mr[zn],Mr[zn+1],Mr[zn+2],$,ne,q,ve)&&(!ut||ut(this.circleKeys[fn]))){if(Ye.hitTest)return Oe.push(!0),!0;var kn=Mr[zn],Dn=Mr[zn+1],qn=Mr[zn+2];Oe.push({key:this.circleKeys[fn],x1:kn-qn,y1:Dn-qn,x2:kn+qn,y2:Dn+qn})}}}},Zt.prototype._queryCellCircle=function($,ne,q,ve,Se,Oe,Ye,ut){var bt=Ye.circle,jt=Ye.seenUids,sr=this.boxCells[Se];if(sr!==null)for(var pr=this.bboxes,br=0,Cr=sr;br<Cr.length;br+=1){var Pr=Cr[br];if(!jt.box[Pr]){jt.box[Pr]=!0;var jr=4*Pr;if(this._circleAndRectCollide(bt.x,bt.y,bt.radius,pr[jr+0],pr[jr+1],pr[jr+2],pr[jr+3])&&(!ut||ut(this.boxKeys[Pr])))return Oe.push(!0),!0}}var Mr=this.circleCells[Se];if(Mr!==null)for(var Ur=this.circles,Jr=0,fn=Mr;Jr<fn.length;Jr+=1){var zn=fn[Jr];if(!jt.circle[zn]){jt.circle[zn]=!0;var kn=3*zn;if(this._circlesCollide(Ur[kn],Ur[kn+1],Ur[kn+2],bt.x,bt.y,bt.radius)&&(!ut||ut(this.circleKeys[zn])))return Oe.push(!0),!0}}},Zt.prototype._forEachCell=function($,ne,q,ve,Se,Oe,Ye,ut){for(var bt=this._convertToXCellCoord($),jt=this._convertToYCellCoord(ne),sr=this._convertToXCellCoord(q),pr=this._convertToYCellCoord(ve),br=bt;br<=sr;br++)for(var Cr=jt;Cr<=pr;Cr++)if(Se.call(this,$,ne,q,ve,this.xCellCount*Cr+br,Oe,Ye,ut))return},Zt.prototype._convertToXCellCoord=function($){return Math.max(0,Math.min(this.xCellCount-1,Math.floor($*this.xScale)))},Zt.prototype._convertToYCellCoord=function($){return Math.max(0,Math.min(this.yCellCount-1,Math.floor($*this.yScale)))},Zt.prototype._circlesCollide=function($,ne,q,ve,Se,Oe){var Ye=ve-$,ut=Se-ne,bt=q+Oe;return bt*bt>Ye*Ye+ut*ut},Zt.prototype._circleAndRectCollide=function($,ne,q,ve,Se,Oe,Ye){var ut=(Oe-ve)/2,bt=Math.abs($-(ve+ut));if(bt>ut+q)return!1;var jt=(Ye-Se)/2,sr=Math.abs(ne-(Se+jt));if(sr>jt+q)return!1;if(bt<=ut||sr<=jt)return!0;var pr=bt-ut,br=sr-jt;return pr*pr+br*br<=q*q};var Ln=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function dn($,ne){for(var q=0;q<$;q++){var ve=ne.length;ne.resize(ve+4),ne.float32.set(Ln,3*ve)}}function xn($,ne,q){var ve=ne[0],Se=ne[1];return $[0]=q[0]*ve+q[4]*Se+q[12],$[1]=q[1]*ve+q[5]*Se+q[13],$[3]=q[3]*ve+q[7]*Se+q[15],$}var tn=function($,ne,q){ne===void 0&&(ne=new Zt($.width+200,$.height+200,25)),q===void 0&&(q=new Zt($.width+200,$.height+200,25)),this.transform=$,this.grid=ne,this.ignoredGrid=q,this.pitchfactor=Math.cos($._pitch)*$.cameraToCenterDistance,this.screenRightBoundary=$.width+100,this.screenBottomBoundary=$.height+100,this.gridRightBoundary=$.width+200,this.gridBottomBoundary=$.height+200};function wn($,ne,q){return ne*(t.EXTENT/($.tileSize*Math.pow(2,q-$.tileID.overscaledZ)))}tn.prototype.placeCollisionBox=function($,ne,q,ve,Se){var Oe=this.projectAndGetPerspectiveRatio(ve,$.anchorPointX,$.anchorPointY),Ye=q*Oe.perspectiveRatio,ut=$.x1*Ye+Oe.point.x,bt=$.y1*Ye+Oe.point.y,jt=$.x2*Ye+Oe.point.x,sr=$.y2*Ye+Oe.point.y;return!this.isInsideGrid(ut,bt,jt,sr)||!ne&&this.grid.hitTest(ut,bt,jt,sr,Se)?{box:[],offscreen:!1}:{box:[ut,bt,jt,sr],offscreen:this.isOffscreen(ut,bt,jt,sr)}},tn.prototype.placeCollisionCircles=function($,ne,q,ve,Se,Oe,Ye,ut,bt,jt,sr,pr,br){var Cr=[],Pr=new t.Point(ne.anchorX,ne.anchorY),jr=zr(Pr,Oe),Mr=Or(this.transform.cameraToCenterDistance,jr.signedDistanceFromCamera),Ur=(jt?Se/Mr:Se*Mr)/t.ONE_EM,Jr=zr(Pr,Ye).point,fn=An(Ur,ve,ne.lineOffsetX*Ur,ne.lineOffsetY*Ur,!1,Jr,Pr,ne,q,Ye,{}),zn=!1,kn=!1,Dn=!0;if(fn){for(var qn=.5*pr*Mr+br,pa=new t.Point(-100,-100),ua=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),wa=new qt,Da=fn.first,oi=fn.last,qa=[],Fi=Da.path.length-1;Fi>=1;Fi--)qa.push(Da.path[Fi]);for(var Ua=1;Ua<oi.path.length;Ua++)qa.push(oi.path[Ua]);var fi=2.5*qn;if(ut){var Ii=qa.map(function(Iu){return zr(Iu,ut)});qa=Ii.some(function(Iu){return Iu.signedDistanceFromCamera<=0})?[]:Ii.map(function(Iu){return Iu.point})}var hi=[];if(qa.length>0){for(var ii=qa[0].clone(),zi=qa[0].clone(),si=1;si<qa.length;si++)ii.x=Math.min(ii.x,qa[si].x),ii.y=Math.min(ii.y,qa[si].y),zi.x=Math.max(zi.x,qa[si].x),zi.y=Math.max(zi.y,qa[si].y);hi=ii.x>=pa.x&&zi.x<=ua.x&&ii.y>=pa.y&&zi.y<=ua.y?[qa]:zi.x<pa.x||ii.x>ua.x||zi.y<pa.y||ii.y>ua.y?[]:t.clipLine([qa],pa.x,pa.y,ua.x,ua.y)}for(var Na=0,os=hi;Na<os.length;Na+=1){var Bo;wa.reset(os[Na],.25*qn),Bo=wa.length<=.5*qn?1:Math.ceil(wa.paddedLength/fi)+1;for(var bo=0;bo<Bo;bo++){var ho=bo/Math.max(Bo-1,1),es=wa.lerp(ho),To=es.x+100,xu=es.y+100;Cr.push(To,xu,qn,0);var Ms=To-qn,ru=xu-qn,Al=To+qn,nu=xu+qn;if(Dn=Dn&&this.isOffscreen(Ms,ru,Al,nu),kn=kn||this.isInsideGrid(Ms,ru,Al,nu),!$&&this.grid.hitTestCircle(To,xu,qn,sr)&&(zn=!0,!bt))return{circles:[],offscreen:!1,collisionDetected:zn}}}}return{circles:!bt&&zn||!kn?[]:Cr,offscreen:Dn,collisionDetected:zn}},tn.prototype.queryRenderedSymbols=function($){if($.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var ne=[],q=1/0,ve=1/0,Se=-1/0,Oe=-1/0,Ye=0,ut=$;Ye<ut.length;Ye+=1){var bt=ut[Ye],jt=new t.Point(bt.x+100,bt.y+100);q=Math.min(q,jt.x),ve=Math.min(ve,jt.y),Se=Math.max(Se,jt.x),Oe=Math.max(Oe,jt.y),ne.push(jt)}for(var sr={},pr={},br=0,Cr=this.grid.query(q,ve,Se,Oe).concat(this.ignoredGrid.query(q,ve,Se,Oe));br<Cr.length;br+=1){var Pr=Cr[br],jr=Pr.key;if(sr[jr.bucketInstanceId]===void 0&&(sr[jr.bucketInstanceId]={}),!sr[jr.bucketInstanceId][jr.featureIndex]){var Mr=[new t.Point(Pr.x1,Pr.y1),new t.Point(Pr.x2,Pr.y1),new t.Point(Pr.x2,Pr.y2),new t.Point(Pr.x1,Pr.y2)];t.polygonIntersectsPolygon(ne,Mr)&&(sr[jr.bucketInstanceId][jr.featureIndex]=!0,pr[jr.bucketInstanceId]===void 0&&(pr[jr.bucketInstanceId]=[]),pr[jr.bucketInstanceId].push(jr.featureIndex))}}return pr},tn.prototype.insertCollisionBox=function($,ne,q,ve,Se){(ne?this.ignoredGrid:this.grid).insert({bucketInstanceId:q,featureIndex:ve,collisionGroupID:Se},$[0],$[1],$[2],$[3])},tn.prototype.insertCollisionCircles=function($,ne,q,ve,Se){for(var Oe=ne?this.ignoredGrid:this.grid,Ye={bucketInstanceId:q,featureIndex:ve,collisionGroupID:Se},ut=0;ut<$.length;ut+=4)Oe.insertCircle(Ye,$[ut],$[ut+1],$[ut+2])},tn.prototype.projectAndGetPerspectiveRatio=function($,ne,q){var ve=[ne,q,0,1];return xn(ve,ve,$),{point:new t.Point((ve[0]/ve[3]+1)/2*this.transform.width+100,(-ve[1]/ve[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/ve[3]*.5}},tn.prototype.isOffscreen=function($,ne,q,ve){return q<100||$>=this.screenRightBoundary||ve<100||ne>this.screenBottomBoundary},tn.prototype.isInsideGrid=function($,ne,q,ve){return q>=0&&$<this.gridRightBoundary&&ve>=0&&ne<this.gridBottomBoundary},tn.prototype.getViewportMatrix=function(){var $=t.identity([]);return t.translate($,$,[-100,-100,0]),$};var Sn=function($,ne,q,ve){this.opacity=$?Math.max(0,Math.min(1,$.opacity+($.placed?ne:-ne))):ve&&q?1:0,this.placed=q};Sn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var un=function($,ne,q,ve,Se){this.text=new Sn($?$.text:null,ne,q,Se),this.icon=new Sn($?$.icon:null,ne,ve,Se)};un.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var vt=function($,ne,q){this.text=$,this.icon=ne,this.skipFade=q},Gt=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},cr=function($,ne,q,ve,Se){this.bucketInstanceId=$,this.featureIndex=ne,this.sourceLayerIndex=q,this.bucketIndex=ve,this.tileID=Se},Er=function($){this.crossSourceCollisions=$,this.maxGroupID=0,this.collisionGroups={}};function Wr($,ne,q,ve,Se){var Oe=t.getAnchorAlignment($),Ye=-(Oe.horizontalAlign-.5)*ne,ut=-(Oe.verticalAlign-.5)*q,bt=t.evaluateVariableOffset($,ve);return new t.Point(Ye+bt[0]*Se,ut+bt[1]*Se)}function Vr($,ne,q,ve,Se,Oe){var Ye=$.x1,ut=$.x2,bt=$.y1,jt=$.y2,sr=$.anchorPointX,pr=$.anchorPointY,br=new t.Point(ne,q);return ve&&br._rotate(Se?Oe:-Oe),{x1:Ye+br.x,y1:bt+br.y,x2:ut+br.x,y2:jt+br.y,anchorPointX:sr,anchorPointY:pr}}Er.prototype.get=function($){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[$]){var ne=++this.maxGroupID;this.collisionGroups[$]={ID:ne,predicate:function(q){return q.collisionGroupID===ne}}}return this.collisionGroups[$]};var Qr=function($,ne,q,ve){this.transform=$.clone(),this.collisionIndex=new tn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ne,this.retainedQueryData={},this.collisionGroups=new Er(q),this.collisionCircleArrays={},this.prevPlacement=ve,ve&&(ve.prevPlacement=void 0),this.placedOrientations={}};function Hr($,ne,q,ve,Se){$.emplaceBack(ne?1:0,q?1:0,ve||0,Se||0),$.emplaceBack(ne?1:0,q?1:0,ve||0,Se||0),$.emplaceBack(ne?1:0,q?1:0,ve||0,Se||0),$.emplaceBack(ne?1:0,q?1:0,ve||0,Se||0)}Qr.prototype.getBucketParts=function($,ne,q,ve){var Se=q.getBucket(ne),Oe=q.latestFeatureIndex;if(Se&&Oe&&ne.id===Se.layerIds[0]){var Ye=q.collisionBoxArray,ut=Se.layers[0].layout,bt=Math.pow(2,this.transform.zoom-q.tileID.overscaledZ),jt=q.tileSize/t.EXTENT,sr=this.transform.calculatePosMatrix(q.tileID.toUnwrapped()),pr=ut.get("text-pitch-alignment")==="map",br=ut.get("text-rotation-alignment")==="map",Cr=wn(q,1,this.transform.zoom),Pr=_r(sr,pr,br,this.transform,Cr),jr=null;if(pr){var Mr=Gr(sr,pr,br,this.transform,Cr);jr=t.multiply([],this.transform.labelPlaneMatrix,Mr)}this.retainedQueryData[Se.bucketInstanceId]=new cr(Se.bucketInstanceId,Oe,Se.sourceLayerIndex,Se.index,q.tileID);var Ur={bucket:Se,layout:ut,posMatrix:sr,textLabelPlaneMatrix:Pr,labelToScreenMatrix:jr,scale:bt,textPixelRatio:jt,holdingForFade:q.holdingForFade(),collisionBoxArray:Ye,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(Se.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Se.sourceID)};if(ve)for(var Jr=0,fn=Se.sortKeyRanges;Jr<fn.length;Jr+=1){var zn=fn[Jr];$.push({sortKey:zn.sortKey,symbolInstanceStart:zn.symbolInstanceStart,symbolInstanceEnd:zn.symbolInstanceEnd,parameters:Ur})}else $.push({symbolInstanceStart:0,symbolInstanceEnd:Se.symbolInstances.length,parameters:Ur})}},Qr.prototype.attemptAnchorPlacement=function($,ne,q,ve,Se,Oe,Ye,ut,bt,jt,sr,pr,br,Cr,Pr){var jr,Mr=[pr.textOffset0,pr.textOffset1],Ur=Wr($,q,ve,Mr,Se),Jr=this.collisionIndex.placeCollisionBox(Vr(ne,Ur.x,Ur.y,Oe,Ye,this.transform.angle),sr,ut,bt,jt.predicate);if(!Pr||this.collisionIndex.placeCollisionBox(Vr(Pr,Ur.x,Ur.y,Oe,Ye,this.transform.angle),sr,ut,bt,jt.predicate).box.length!==0)return Jr.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[pr.crossTileID]&&this.prevPlacement.placements[pr.crossTileID]&&this.prevPlacement.placements[pr.crossTileID].text&&(jr=this.prevPlacement.variableOffsets[pr.crossTileID].anchor),this.variableOffsets[pr.crossTileID]={textOffset:Mr,width:q,height:ve,anchor:$,textBoxScale:Se,prevAnchor:jr},this.markUsedJustification(br,$,pr,Cr),br.allowVerticalPlacement&&(this.markUsedOrientation(br,Cr,pr),this.placedOrientations[pr.crossTileID]=Cr),{shift:Ur,placedGlyphBoxes:Jr}):void 0},Qr.prototype.placeLayerBucketPart=function($,ne,q){var ve=this,Se=$.parameters,Oe=Se.bucket,Ye=Se.layout,ut=Se.posMatrix,bt=Se.textLabelPlaneMatrix,jt=Se.labelToScreenMatrix,sr=Se.textPixelRatio,pr=Se.holdingForFade,br=Se.collisionBoxArray,Cr=Se.partiallyEvaluatedTextSize,Pr=Se.collisionGroup,jr=Ye.get("text-optional"),Mr=Ye.get("icon-optional"),Ur=Ye.get("text-allow-overlap"),Jr=Ye.get("icon-allow-overlap"),fn=Ye.get("text-rotation-alignment")==="map",zn=Ye.get("text-pitch-alignment")==="map",kn=Ye.get("icon-text-fit")!=="none",Dn=Ye.get("symbol-z-order")==="viewport-y",qn=Ur&&(Jr||!Oe.hasIconData()||Mr),pa=Jr&&(Ur||!Oe.hasTextData()||jr);!Oe.collisionArrays&&br&&Oe.deserializeCollisionBoxes(br);var ua=function(Ua,fi){if(!ne[Ua.crossTileID])if(pr)ve.placements[Ua.crossTileID]=new vt(!1,!1,!1);else{var Ii,hi=!1,ii=!1,zi=!0,si=null,Na={box:null,offscreen:null},os={box:null,offscreen:null},Bo=null,bo=null,ho=0,es=0,To=0;fi.textFeatureIndex?ho=fi.textFeatureIndex:Ua.useRuntimeCollisionCircles&&(ho=Ua.featureIndex),fi.verticalTextFeatureIndex&&(es=fi.verticalTextFeatureIndex);var xu=fi.textBox;if(xu){var Ms=function(ss){var jl=t.WritingMode.horizontal;if(Oe.allowVerticalPlacement&&!ss&&ve.prevPlacement){var zl=ve.prevPlacement.placedOrientations[Ua.crossTileID];zl&&(ve.placedOrientations[Ua.crossTileID]=zl,ve.markUsedOrientation(Oe,jl=zl,Ua))}return jl},ru=function(ss,jl){if(Oe.allowVerticalPlacement&&Ua.numVerticalGlyphVertices>0&&fi.verticalTextBox)for(var zl=0,nc=Oe.writingModes;zl<nc.length&&(nc[zl]===t.WritingMode.vertical?(Na=jl(),os=Na):Na=ss(),!(Na&&Na.box&&Na.box.length));zl+=1);else Na=ss()};if(Ye.get("text-variable-anchor")){var Al=Ye.get("text-variable-anchor");if(ve.prevPlacement&&ve.prevPlacement.variableOffsets[Ua.crossTileID]){var nu=ve.prevPlacement.variableOffsets[Ua.crossTileID];Al.indexOf(nu.anchor)>0&&(Al=Al.filter(function(ss){return ss!==nu.anchor})).unshift(nu.anchor)}var Iu=function(ss,jl,zl){for(var nc=ss.x2-ss.x1,fd=ss.y2-ss.y1,Nf=Ua.textBoxScale,Nh=kn&&!Jr?jl:null,Ic={box:[],offscreen:!1},Bh=Ur?2*Al.length:Al.length,iu=0;iu<Bh;++iu){var ou=ve.attemptAnchorPlacement(Al[iu%Al.length],ss,nc,fd,Nf,fn,zn,sr,ut,Pr,iu>=Al.length,Ua,Oe,zl,Nh);if(ou&&(Ic=ou.placedGlyphBoxes)&&Ic.box&&Ic.box.length){hi=!0,si=ou.shift;break}}return Ic};ru(function(){return Iu(xu,fi.iconBox,t.WritingMode.horizontal)},function(){var ss=fi.verticalTextBox;return Oe.allowVerticalPlacement&&!(Na&&Na.box&&Na.box.length)&&Ua.numVerticalGlyphVertices>0&&ss?Iu(ss,fi.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),Na&&(hi=Na.box,zi=Na.offscreen);var vc=Ms(Na&&Na.box);if(!hi&&ve.prevPlacement){var mc=ve.prevPlacement.variableOffsets[Ua.crossTileID];mc&&(ve.variableOffsets[Ua.crossTileID]=mc,ve.markUsedJustification(Oe,mc.anchor,Ua,vc))}}else{var Il=function(ss,jl){var zl=ve.collisionIndex.placeCollisionBox(ss,Ur,sr,ut,Pr.predicate);return zl&&zl.box&&zl.box.length&&(ve.markUsedOrientation(Oe,jl,Ua),ve.placedOrientations[Ua.crossTileID]=jl),zl};ru(function(){return Il(xu,t.WritingMode.horizontal)},function(){var ss=fi.verticalTextBox;return Oe.allowVerticalPlacement&&Ua.numVerticalGlyphVertices>0&&ss?Il(ss,t.WritingMode.vertical):{box:null,offscreen:null}}),Ms(Na&&Na.box&&Na.box.length)}}if(hi=(Ii=Na)&&Ii.box&&Ii.box.length>0,zi=Ii&&Ii.offscreen,Ua.useRuntimeCollisionCircles){var zu=Oe.text.placedSymbolArray.get(Ua.centerJustifiedTextSymbolIndex),Ff=t.evaluateSizeForFeature(Oe.textSizeData,Cr,zu),gc=Ye.get("text-padding");Bo=ve.collisionIndex.placeCollisionCircles(Ur,zu,Oe.lineVertexArray,Oe.glyphOffsetArray,Ff,ut,bt,jt,q,zn,Pr.predicate,Ua.collisionCircleDiameter,gc),hi=Ur||Bo.circles.length>0&&!Bo.collisionDetected,zi=zi&&Bo.offscreen}if(fi.iconFeatureIndex&&(To=fi.iconFeatureIndex),fi.iconBox){var au=function(ss){var jl=kn&&si?Vr(ss,si.x,si.y,fn,zn,ve.transform.angle):ss;return ve.collisionIndex.placeCollisionBox(jl,Jr,sr,ut,Pr.predicate)};ii=os&&os.box&&os.box.length&&fi.verticalIconBox?(bo=au(fi.verticalIconBox)).box.length>0:(bo=au(fi.iconBox)).box.length>0,zi=zi&&bo.offscreen}var Ss=jr||Ua.numHorizontalGlyphVertices===0&&Ua.numVerticalGlyphVertices===0,rf=Mr||Ua.numIconVertices===0;if(Ss||rf?rf?Ss||(ii=ii&&hi):hi=ii&&hi:ii=hi=ii&&hi,hi&&Ii&&Ii.box&&ve.collisionIndex.insertCollisionBox(Ii.box,Ye.get("text-ignore-placement"),Oe.bucketInstanceId,os&&os.box&&es?es:ho,Pr.ID),ii&&bo&&ve.collisionIndex.insertCollisionBox(bo.box,Ye.get("icon-ignore-placement"),Oe.bucketInstanceId,To,Pr.ID),Bo&&(hi&&ve.collisionIndex.insertCollisionCircles(Bo.circles,Ye.get("text-ignore-placement"),Oe.bucketInstanceId,ho,Pr.ID),q)){var nf=Oe.bucketInstanceId,ws=ve.collisionCircleArrays[nf];ws===void 0&&(ws=ve.collisionCircleArrays[nf]=new Gt);for(var yc=0;yc<Bo.circles.length;yc+=4)ws.circles.push(Bo.circles[yc+0]),ws.circles.push(Bo.circles[yc+1]),ws.circles.push(Bo.circles[yc+2]),ws.circles.push(Bo.collisionDetected?1:0)}ve.placements[Ua.crossTileID]=new vt(hi||qn,ii||pa,zi||Oe.justReloaded),ne[Ua.crossTileID]=!0}};if(Dn)for(var wa=Oe.getSortedSymbolIndexes(this.transform.angle),Da=wa.length-1;Da>=0;--Da){var oi=wa[Da];ua(Oe.symbolInstances.get(oi),Oe.collisionArrays[oi])}else for(var qa=$.symbolInstanceStart;qa<$.symbolInstanceEnd;qa++)ua(Oe.symbolInstances.get(qa),Oe.collisionArrays[qa]);if(q&&Oe.bucketInstanceId in this.collisionCircleArrays){var Fi=this.collisionCircleArrays[Oe.bucketInstanceId];t.invert(Fi.invProjMatrix,ut),Fi.viewportMatrix=this.collisionIndex.getViewportMatrix()}Oe.justReloaded=!1},Qr.prototype.markUsedJustification=function($,ne,q,ve){var Se;Se=ve===t.WritingMode.vertical?q.verticalPlacedTextSymbolIndex:{left:q.leftJustifiedTextSymbolIndex,center:q.centerJustifiedTextSymbolIndex,right:q.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(ne)];for(var Oe=0,Ye=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex,q.verticalPlacedTextSymbolIndex];Oe<Ye.length;Oe+=1){var ut=Ye[Oe];ut>=0&&($.text.placedSymbolArray.get(ut).crossTileID=Se>=0&&ut!==Se?0:q.crossTileID)}},Qr.prototype.markUsedOrientation=function($,ne,q){for(var ve=ne===t.WritingMode.horizontal||ne===t.WritingMode.horizontalOnly?ne:0,Se=ne===t.WritingMode.vertical?ne:0,Oe=0,Ye=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex];Oe<Ye.length;Oe+=1)$.text.placedSymbolArray.get(Ye[Oe]).placedOrientation=ve;q.verticalPlacedTextSymbolIndex&&($.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).placedOrientation=Se)},Qr.prototype.commit=function($){this.commitTime=$,this.zoomAtLastRecencyCheck=this.transform.zoom;var ne=this.prevPlacement,q=!1;this.prevZoomAdjustment=ne?ne.zoomAdjustment(this.transform.zoom):0;var ve=ne?ne.symbolFadeChange($):1,Se=ne?ne.opacities:{},Oe=ne?ne.variableOffsets:{},Ye=ne?ne.placedOrientations:{};for(var ut in this.placements){var bt=this.placements[ut],jt=Se[ut];jt?(this.opacities[ut]=new un(jt,ve,bt.text,bt.icon),q=q||bt.text!==jt.text.placed||bt.icon!==jt.icon.placed):(this.opacities[ut]=new un(null,ve,bt.text,bt.icon,bt.skipFade),q=q||bt.text||bt.icon)}for(var sr in Se){var pr=Se[sr];if(!this.opacities[sr]){var br=new un(pr,ve,!1,!1);br.isHidden()||(this.opacities[sr]=br,q=q||pr.text.placed||pr.icon.placed)}}for(var Cr in Oe)this.variableOffsets[Cr]||!this.opacities[Cr]||this.opacities[Cr].isHidden()||(this.variableOffsets[Cr]=Oe[Cr]);for(var Pr in Ye)this.placedOrientations[Pr]||!this.opacities[Pr]||this.opacities[Pr].isHidden()||(this.placedOrientations[Pr]=Ye[Pr]);q?this.lastPlacementChangeTime=$:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=ne?ne.lastPlacementChangeTime:$)},Qr.prototype.updateLayerOpacities=function($,ne){for(var q={},ve=0,Se=ne;ve<Se.length;ve+=1){var Oe=Se[ve],Ye=Oe.getBucket($);Ye&&Oe.latestFeatureIndex&&$.id===Ye.layerIds[0]&&this.updateBucketOpacities(Ye,q,Oe.collisionBoxArray)}},Qr.prototype.updateBucketOpacities=function($,ne,q){var ve=this;$.hasTextData()&&$.text.opacityVertexArray.clear(),$.hasIconData()&&$.icon.opacityVertexArray.clear(),$.hasIconCollisionBoxData()&&$.iconCollisionBox.collisionVertexArray.clear(),$.hasTextCollisionBoxData()&&$.textCollisionBox.collisionVertexArray.clear();var Se=$.layers[0].layout,Oe=new un(null,0,!1,!1,!0),Ye=Se.get("text-allow-overlap"),ut=Se.get("icon-allow-overlap"),bt=Se.get("text-variable-anchor"),jt=Se.get("text-rotation-alignment")==="map",sr=Se.get("text-pitch-alignment")==="map",pr=Se.get("icon-text-fit")!=="none",br=new un(null,0,Ye&&(ut||!$.hasIconData()||Se.get("icon-optional")),ut&&(Ye||!$.hasTextData()||Se.get("text-optional")),!0);!$.collisionArrays&&q&&($.hasIconCollisionBoxData()||$.hasTextCollisionBoxData())&&$.deserializeCollisionBoxes(q);for(var Cr=function(Ur,Jr,fn){for(var zn=0;zn<Jr/4;zn++)Ur.opacityVertexArray.emplaceBack(fn)},Pr=function(Ur){var Jr=$.symbolInstances.get(Ur),fn=Jr.numHorizontalGlyphVertices,zn=Jr.numVerticalGlyphVertices,kn=Jr.crossTileID,Dn=ve.opacities[kn];ne[kn]?Dn=Oe:Dn||(ve.opacities[kn]=Dn=br),ne[kn]=!0;var qn=Jr.numIconVertices>0,pa=ve.placedOrientations[Jr.crossTileID],ua=pa===t.WritingMode.vertical,wa=pa===t.WritingMode.horizontal||pa===t.WritingMode.horizontalOnly;if(fn>0||zn>0){var Da=an(Dn.text);Cr($.text,fn,ua?Kr:Da),Cr($.text,zn,wa?Kr:Da);var oi=Dn.text.isHidden();[Jr.rightJustifiedTextSymbolIndex,Jr.centerJustifiedTextSymbolIndex,Jr.leftJustifiedTextSymbolIndex].forEach(function(Na){Na>=0&&($.text.placedSymbolArray.get(Na).hidden=oi||ua?1:0)}),Jr.verticalPlacedTextSymbolIndex>=0&&($.text.placedSymbolArray.get(Jr.verticalPlacedTextSymbolIndex).hidden=oi||wa?1:0);var qa=ve.variableOffsets[Jr.crossTileID];qa&&ve.markUsedJustification($,qa.anchor,Jr,pa);var Fi=ve.placedOrientations[Jr.crossTileID];Fi&&(ve.markUsedJustification($,"left",Jr,Fi),ve.markUsedOrientation($,Fi,Jr))}if(qn){var Ua=an(Dn.icon),fi=!(pr&&Jr.verticalPlacedIconSymbolIndex&&ua);Jr.placedIconSymbolIndex>=0&&(Cr($.icon,Jr.numIconVertices,fi?Ua:Kr),$.icon.placedSymbolArray.get(Jr.placedIconSymbolIndex).hidden=Dn.icon.isHidden()),Jr.verticalPlacedIconSymbolIndex>=0&&(Cr($.icon,Jr.numVerticalIconVertices,fi?Kr:Ua),$.icon.placedSymbolArray.get(Jr.verticalPlacedIconSymbolIndex).hidden=Dn.icon.isHidden())}if($.hasIconCollisionBoxData()||$.hasTextCollisionBoxData()){var Ii=$.collisionArrays[Ur];if(Ii){var hi=new t.Point(0,0);if(Ii.textBox||Ii.verticalTextBox){var ii=!0;if(bt){var zi=ve.variableOffsets[kn];zi?(hi=Wr(zi.anchor,zi.width,zi.height,zi.textOffset,zi.textBoxScale),jt&&hi._rotate(sr?ve.transform.angle:-ve.transform.angle)):ii=!1}Ii.textBox&&Hr($.textCollisionBox.collisionVertexArray,Dn.text.placed,!ii||ua,hi.x,hi.y),Ii.verticalTextBox&&Hr($.textCollisionBox.collisionVertexArray,Dn.text.placed,!ii||wa,hi.x,hi.y)}var si=!!(!wa&&Ii.verticalIconBox);Ii.iconBox&&Hr($.iconCollisionBox.collisionVertexArray,Dn.icon.placed,si,pr?hi.x:0,pr?hi.y:0),Ii.verticalIconBox&&Hr($.iconCollisionBox.collisionVertexArray,Dn.icon.placed,!si,pr?hi.x:0,pr?hi.y:0)}}},jr=0;jr<$.symbolInstances.length;jr++)Pr(jr);if($.sortFeatures(this.transform.angle),this.retainedQueryData[$.bucketInstanceId]&&(this.retainedQueryData[$.bucketInstanceId].featureSortOrder=$.featureSortOrder),$.hasTextData()&&$.text.opacityVertexBuffer&&$.text.opacityVertexBuffer.updateData($.text.opacityVertexArray),$.hasIconData()&&$.icon.opacityVertexBuffer&&$.icon.opacityVertexBuffer.updateData($.icon.opacityVertexArray),$.hasIconCollisionBoxData()&&$.iconCollisionBox.collisionVertexBuffer&&$.iconCollisionBox.collisionVertexBuffer.updateData($.iconCollisionBox.collisionVertexArray),$.hasTextCollisionBoxData()&&$.textCollisionBox.collisionVertexBuffer&&$.textCollisionBox.collisionVertexBuffer.updateData($.textCollisionBox.collisionVertexArray),$.bucketInstanceId in this.collisionCircleArrays){var Mr=this.collisionCircleArrays[$.bucketInstanceId];$.placementInvProjMatrix=Mr.invProjMatrix,$.placementViewportMatrix=Mr.viewportMatrix,$.collisionCircleArray=Mr.circles,delete this.collisionCircleArrays[$.bucketInstanceId]}},Qr.prototype.symbolFadeChange=function($){return this.fadeDuration===0?1:($-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Qr.prototype.zoomAdjustment=function($){return Math.max(0,(this.transform.zoom-$)/1.5)},Qr.prototype.hasTransitions=function($){return this.stale||$-this.lastPlacementChangeTime<this.fadeDuration},Qr.prototype.stillRecent=function($,ne){var q=this.zoomAtLastRecencyCheck===ne?1-this.zoomAdjustment(ne):1;return this.zoomAtLastRecencyCheck=ne,this.commitTime+this.fadeDuration*q>$},Qr.prototype.setStale=function(){this.stale=!0};var Cn=Math.pow(2,25),ra=Math.pow(2,24),ta=Math.pow(2,17),ba=Math.pow(2,16),Wa=Math.pow(2,9),ei=Math.pow(2,8),dr=Math.pow(2,1);function an($){if($.opacity===0&&!$.placed)return 0;if($.opacity===1&&$.placed)return 4294967295;var ne=$.placed?1:0,q=Math.floor(127*$.opacity);return q*Cn+ne*ra+q*ta+ne*ba+q*Wa+ne*ei+q*dr+ne}var Kr=0,Rn=function($){this._sortAcrossTiles=$.layout.get("symbol-z-order")!=="viewport-y"&&$.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Rn.prototype.continuePlacement=function($,ne,q,ve,Se){for(var Oe=this._bucketParts;this._currentTileIndex<$.length;)if(ne.getBucketParts(Oe,ve,$[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Se())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Oe.sort(function(Ye,ut){return Ye.sortKey-ut.sortKey}));this._currentPartIndex<Oe.length;)if(ne.placeLayerBucketPart(Oe[this._currentPartIndex],this._seenCrossTileIDs,q),this._currentPartIndex++,Se())return!0;return!1};var Gn=function($,ne,q,ve,Se,Oe,Ye){this.placement=new Qr($,Se,Oe,Ye),this._currentPlacementIndex=ne.length-1,this._forceFullPlacement=q,this._showCollisionBoxes=ve,this._done=!1};Gn.prototype.isDone=function(){return this._done},Gn.prototype.continuePlacement=function($,ne,q){for(var ve=this,Se=t.browser.now(),Oe=function(){var bt=t.browser.now()-Se;return!ve._forceFullPlacement&&bt>2};this._currentPlacementIndex>=0;){var Ye=ne[$[this._currentPlacementIndex]],ut=this.placement.collisionIndex.transform.zoom;if(Ye.type==="symbol"&&(!Ye.minzoom||Ye.minzoom<=ut)&&(!Ye.maxzoom||Ye.maxzoom>ut)){if(this._inProgressLayer||(this._inProgressLayer=new Rn(Ye)),this._inProgressLayer.continuePlacement(q[Ye.source],this.placement,this._showCollisionBoxes,Ye,Oe))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Gn.prototype.commit=function($){return this.placement.commit($),this.placement};var Sa=512/t.EXTENT/2,ha=function($,ne,q){this.tileID=$,this.indexedSymbolInstances={},this.bucketInstanceId=q;for(var ve=0;ve<ne.length;ve++){var Se=ne.get(ve),Oe=Se.key;this.indexedSymbolInstances[Oe]||(this.indexedSymbolInstances[Oe]=[]),this.indexedSymbolInstances[Oe].push({crossTileID:Se.crossTileID,coord:this.getScaledCoordinates(Se,$)})}};ha.prototype.getScaledCoordinates=function($,ne){var q=Sa/Math.pow(2,ne.canonical.z-this.tileID.canonical.z);return{x:Math.floor((ne.canonical.x*t.EXTENT+$.anchorX)*q),y:Math.floor((ne.canonical.y*t.EXTENT+$.anchorY)*q)}},ha.prototype.findMatches=function($,ne,q){for(var ve=this.tileID.canonical.z<ne.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ne.canonical.z),Se=0;Se<$.length;Se++){var Oe=$.get(Se);if(!Oe.crossTileID){var Ye=this.indexedSymbolInstances[Oe.key];if(Ye)for(var ut=this.getScaledCoordinates(Oe,ne),bt=0,jt=Ye;bt<jt.length;bt+=1){var sr=jt[bt];if(Math.abs(sr.coord.x-ut.x)<=ve&&Math.abs(sr.coord.y-ut.y)<=ve&&!q[sr.crossTileID]){q[sr.crossTileID]=!0,Oe.crossTileID=sr.crossTileID;break}}}}};var Aa=function(){this.maxCrossTileID=0};Aa.prototype.generate=function(){return++this.maxCrossTileID};var ka=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ka.prototype.handleWrapJump=function($){var ne=Math.round(($-this.lng)/360);if(ne!==0)for(var q in this.indexes){var ve=this.indexes[q],Se={};for(var Oe in ve){var Ye=ve[Oe];Ye.tileID=Ye.tileID.unwrapTo(Ye.tileID.wrap+ne),Se[Ye.tileID.key]=Ye}this.indexes[q]=Se}this.lng=$},ka.prototype.addBucket=function($,ne,q){if(this.indexes[$.overscaledZ]&&this.indexes[$.overscaledZ][$.key]){if(this.indexes[$.overscaledZ][$.key].bucketInstanceId===ne.bucketInstanceId)return!1;this.removeBucketCrossTileIDs($.overscaledZ,this.indexes[$.overscaledZ][$.key])}for(var ve=0;ve<ne.symbolInstances.length;ve++)ne.symbolInstances.get(ve).crossTileID=0;this.usedCrossTileIDs[$.overscaledZ]||(this.usedCrossTileIDs[$.overscaledZ]={});var Se=this.usedCrossTileIDs[$.overscaledZ];for(var Oe in this.indexes){var Ye=this.indexes[Oe];if(Number(Oe)>$.overscaledZ)for(var ut in Ye){var bt=Ye[ut];bt.tileID.isChildOf($)&&bt.findMatches(ne.symbolInstances,$,Se)}else{var jt=Ye[$.scaledTo(Number(Oe)).key];jt&&jt.findMatches(ne.symbolInstances,$,Se)}}for(var sr=0;sr<ne.symbolInstances.length;sr++){var pr=ne.symbolInstances.get(sr);pr.crossTileID||(pr.crossTileID=q.generate(),Se[pr.crossTileID]=!0)}return this.indexes[$.overscaledZ]===void 0&&(this.indexes[$.overscaledZ]={}),this.indexes[$.overscaledZ][$.key]=new ha($,ne.symbolInstances,ne.bucketInstanceId),!0},ka.prototype.removeBucketCrossTileIDs=function($,ne){for(var q in ne.indexedSymbolInstances)for(var ve=0,Se=ne.indexedSymbolInstances[q];ve<Se.length;ve+=1)delete this.usedCrossTileIDs[$][Se[ve].crossTileID]},ka.prototype.removeStaleBuckets=function($){var ne=!1;for(var q in this.indexes){var ve=this.indexes[q];for(var Se in ve)$[ve[Se].bucketInstanceId]||(this.removeBucketCrossTileIDs(q,ve[Se]),delete ve[Se],ne=!0)}return ne};var Za=function(){this.layerIndexes={},this.crossTileIDs=new Aa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Za.prototype.addLayer=function($,ne,q){var ve=this.layerIndexes[$.id];ve===void 0&&(ve=this.layerIndexes[$.id]=new ka);var Se=!1,Oe={};ve.handleWrapJump(q);for(var Ye=0,ut=ne;Ye<ut.length;Ye+=1){var bt=ut[Ye],jt=bt.getBucket($);jt&&$.id===jt.layerIds[0]&&(jt.bucketInstanceId||(jt.bucketInstanceId=++this.maxBucketInstanceId),ve.addBucket(bt.tileID,jt,this.crossTileIDs)&&(Se=!0),Oe[jt.bucketInstanceId]=!0)}return ve.removeStaleBuckets(Oe)&&(Se=!0),Se},Za.prototype.pruneUnusedLayers=function($){var ne={};for(var q in $.forEach(function(ve){ne[ve]=!0}),this.layerIndexes)ne[q]||delete this.layerIndexes[q]};var Xt=function($,ne){return t.emitValidationErrors($,ne&&ne.filter(function(q){return q.identifier!=="source.canvas"}))},xr=t.pick(_t,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Yr=t.pick(_t,["setCenter","setZoom","setBearing","setPitch"]),cn=function(){var $={},ne=t.styleSpec.$version;for(var q in t.styleSpec.$root){var ve,Se=t.styleSpec.$root[q];Se.required&&(ve=q==="version"?ne:Se.type==="array"?[]:{})!=null&&($[q]=ve)}return $}(),en=function($){function ne(q,ve){var Se=this;ve===void 0&&(ve={}),$.call(this),this.map=q,this.dispatcher=new D(nr(),this),this.imageManager=new m,this.imageManager.setEventedParent(this),this.glyphManager=new L(q._requestManager,ve.localIdeographFontFamily),this.lineAtlas=new C(256,512),this.crossTileSymbolIndex=new Za,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var Oe=this;this._rtlTextPluginCallback=ne.registerForPluginStateChange(function(Ye){Oe.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Ye.pluginStatus,pluginURL:Ye.pluginURL},function(ut,bt){if(t.triggerPluginCompletionEvent(ut),bt&&bt.every(function(sr){return sr}))for(var jt in Oe.sourceCaches)Oe.sourceCaches[jt].reload()})}),this.on("data",function(Ye){if(Ye.dataType==="source"&&Ye.sourceDataType==="metadata"){var ut=Se.sourceCaches[Ye.sourceId];if(ut){var bt=ut.getSource();if(bt&&bt.vectorLayerIds)for(var jt in Se._layers){var sr=Se._layers[jt];sr.source===bt.id&&Se._validateLayer(sr)}}}})}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.loadURL=function(q,ve){var Se=this;ve===void 0&&(ve={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var Oe=typeof ve.validate=="boolean"?ve.validate:!t.isMapboxURL(q);q=this.map._requestManager.normalizeStyleURL(q,ve.accessToken);var Ye=this.map._requestManager.transformRequest(q,t.ResourceType.Style);this._request=t.getJSON(Ye,function(ut,bt){Se._request=null,ut?Se.fire(new t.ErrorEvent(ut)):bt&&Se._load(bt,Oe)})},ne.prototype.loadJSON=function(q,ve){var Se=this;ve===void 0&&(ve={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){Se._request=null,Se._load(q,ve.validate!==!1)})},ne.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(cn,!1)},ne.prototype._load=function(q,ve){if(!ve||!Xt(this,t.validateStyle(q))){for(var Se in this._loaded=!0,this.stylesheet=q,q.sources)this.addSource(Se,q.sources[Se],{validate:!1});q.sprite?this._loadSprite(q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(q.glyphs);var Oe=Fe(this.stylesheet.layers);this._order=Oe.map(function(jt){return jt.id}),this._layers={},this._serializedLayers={};for(var Ye=0,ut=Oe;Ye<ut.length;Ye+=1){var bt=ut[Ye];(bt=t.createStyleLayer(bt)).setEventedParent(this,{layer:{id:bt.id}}),this._layers[bt.id]=bt,this._serializedLayers[bt.id]=bt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new S(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},ne.prototype._loadSprite=function(q){var ve=this;this._spriteRequest=function(Se,Oe,Ye){var ut,bt,jt,sr=t.browser.devicePixelRatio>1?"@2x":"",pr=t.getJSON(Oe.transformRequest(Oe.normalizeSpriteURL(Se,sr,".json"),t.ResourceType.SpriteJSON),function(Pr,jr){pr=null,jt||(jt=Pr,ut=jr,Cr())}),br=t.getImage(Oe.transformRequest(Oe.normalizeSpriteURL(Se,sr,".png"),t.ResourceType.SpriteImage),function(Pr,jr){br=null,jt||(jt=Pr,bt=jr,Cr())});function Cr(){if(jt)Ye(jt);else if(ut&&bt){var Pr=t.browser.getImageData(bt),jr={};for(var Mr in ut){var Ur=ut[Mr],Jr=Ur.width,fn=Ur.height,zn=Ur.x,kn=Ur.y,Dn=Ur.sdf,qn=Ur.pixelRatio,pa=Ur.stretchX,ua=Ur.stretchY,wa=Ur.content,Da=new t.RGBAImage({width:Jr,height:fn});t.RGBAImage.copy(Pr,Da,{x:zn,y:kn},{x:0,y:0},{width:Jr,height:fn}),jr[Mr]={data:Da,pixelRatio:qn,sdf:Dn,stretchX:pa,stretchY:ua,content:wa}}Ye(null,jr)}}return{cancel:function(){pr&&(pr.cancel(),pr=null),br&&(br.cancel(),br=null)}}}(q,this.map._requestManager,function(Se,Oe){if(ve._spriteRequest=null,Se)ve.fire(new t.ErrorEvent(Se));else if(Oe)for(var Ye in Oe)ve.imageManager.addImage(Ye,Oe[Ye]);ve.imageManager.setLoaded(!0),ve._availableImages=ve.imageManager.listImages(),ve.dispatcher.broadcast("setImages",ve._availableImages),ve.fire(new t.Event("data",{dataType:"style"}))})},ne.prototype._validateLayer=function(q){var ve=this.sourceCaches[q.source];if(ve){var Se=q.sourceLayer;if(Se){var Oe=ve.getSource();(Oe.type==="geojson"||Oe.vectorLayerIds&&Oe.vectorLayerIds.indexOf(Se)===-1)&&this.fire(new t.ErrorEvent(new Error('Source layer "'+Se+'" does not exist on source "'+Oe.id+'" as specified by style layer "'+q.id+'"')))}}},ne.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var q in this.sourceCaches)if(!this.sourceCaches[q].loaded())return!1;return!!this.imageManager.isLoaded()},ne.prototype._serializeLayers=function(q){for(var ve=[],Se=0,Oe=q;Se<Oe.length;Se+=1){var Ye=this._layers[Oe[Se]];Ye.type!=="custom"&&ve.push(Ye.serialize())}return ve},ne.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var q in this.sourceCaches)if(this.sourceCaches[q].hasTransition())return!0;for(var ve in this._layers)if(this._layers[ve].hasTransition())return!0;return!1},ne.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},ne.prototype.update=function(q){if(this._loaded){var ve=this._changed;if(this._changed){var Se=Object.keys(this._updatedLayers),Oe=Object.keys(this._removedLayers);for(var Ye in(Se.length||Oe.length)&&this._updateWorkerLayers(Se,Oe),this._updatedSources){var ut=this._updatedSources[Ye];ut==="reload"?this._reloadSource(Ye):ut==="clear"&&this._clearSource(Ye)}for(var bt in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[bt].updateTransitions(q);this.light.updateTransitions(q),this._resetUpdates()}for(var jt in this.sourceCaches)this.sourceCaches[jt].used=!1;for(var sr=0,pr=this._order;sr<pr.length;sr+=1){var br=this._layers[pr[sr]];br.recalculate(q,this._availableImages),!br.isHidden(q.zoom)&&br.source&&(this.sourceCaches[br.source].used=!0)}this.light.recalculate(q),this.z=q.zoom,ve&&this.fire(new t.Event("data",{dataType:"style"}))}},ne.prototype._updateTilesForChangedImages=function(){var q=Object.keys(this._changedImages);if(q.length){for(var ve in this.sourceCaches)this.sourceCaches[ve].reloadTilesForDependencies(["icons","patterns"],q);this._changedImages={}}},ne.prototype._updateWorkerLayers=function(q,ve){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(q),removedIds:ve})},ne.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},ne.prototype.setState=function(q){var ve=this;if(this._checkLoaded(),Xt(this,t.validateStyle(q)))return!1;(q=t.clone$1(q)).layers=Fe(q.layers);var Se=function(Ye,ut){if(!Ye)return[{command:_t.setStyle,args:[ut]}];var bt=[];try{if(!t.deepEqual(Ye.version,ut.version))return[{command:_t.setStyle,args:[ut]}];t.deepEqual(Ye.center,ut.center)||bt.push({command:_t.setCenter,args:[ut.center]}),t.deepEqual(Ye.zoom,ut.zoom)||bt.push({command:_t.setZoom,args:[ut.zoom]}),t.deepEqual(Ye.bearing,ut.bearing)||bt.push({command:_t.setBearing,args:[ut.bearing]}),t.deepEqual(Ye.pitch,ut.pitch)||bt.push({command:_t.setPitch,args:[ut.pitch]}),t.deepEqual(Ye.sprite,ut.sprite)||bt.push({command:_t.setSprite,args:[ut.sprite]}),t.deepEqual(Ye.glyphs,ut.glyphs)||bt.push({command:_t.setGlyphs,args:[ut.glyphs]}),t.deepEqual(Ye.transition,ut.transition)||bt.push({command:_t.setTransition,args:[ut.transition]}),t.deepEqual(Ye.light,ut.light)||bt.push({command:_t.setLight,args:[ut.light]});var jt={},sr=[];(function(br,Cr,Pr,jr){var Mr;for(Mr in Cr=Cr||{},br=br||{})br.hasOwnProperty(Mr)&&(Cr.hasOwnProperty(Mr)||wt(Mr,Pr,jr));for(Mr in Cr)Cr.hasOwnProperty(Mr)&&(br.hasOwnProperty(Mr)?t.deepEqual(br[Mr],Cr[Mr])||(br[Mr].type==="geojson"&&Cr[Mr].type==="geojson"&&Rt(br,Cr,Mr)?Pr.push({command:_t.setGeoJSONSourceData,args:[Mr,Cr[Mr].data]}):Dt(Mr,Cr,Pr,jr)):Mt(Mr,Cr,Pr))})(Ye.sources,ut.sources,sr,jt);var pr=[];Ye.layers&&Ye.layers.forEach(function(br){jt[br.source]?bt.push({command:_t.removeLayer,args:[br.id]}):pr.push(br)}),bt=bt.concat(sr),function(br,Cr,Pr){Cr=Cr||[];var jr,Mr,Ur,Jr,fn,zn,kn,Dn=(br=br||[]).map(Nt),qn=Cr.map(Nt),pa=br.reduce(er,{}),ua=Cr.reduce(er,{}),wa=Dn.slice(),Da=Object.create(null);for(jr=0,Mr=0;jr<Dn.length;jr++)ua.hasOwnProperty(Ur=Dn[jr])?Mr++:(Pr.push({command:_t.removeLayer,args:[Ur]}),wa.splice(wa.indexOf(Ur,Mr),1));for(jr=0,Mr=0;jr<qn.length;jr++)wa[wa.length-1-jr]!==(Ur=qn[qn.length-1-jr])&&(pa.hasOwnProperty(Ur)?(Pr.push({command:_t.removeLayer,args:[Ur]}),wa.splice(wa.lastIndexOf(Ur,wa.length-Mr),1)):Mr++,Pr.push({command:_t.addLayer,args:[ua[Ur],zn=wa[wa.length-jr]]}),wa.splice(wa.length-jr,0,Ur),Da[Ur]=!0);for(jr=0;jr<qn.length;jr++)if(Jr=pa[Ur=qn[jr]],fn=ua[Ur],!Da[Ur]&&!t.deepEqual(Jr,fn))if(t.deepEqual(Jr.source,fn.source)&&t.deepEqual(Jr["source-layer"],fn["source-layer"])&&t.deepEqual(Jr.type,fn.type)){for(kn in Bt(Jr.layout,fn.layout,Pr,Ur,null,_t.setLayoutProperty),Bt(Jr.paint,fn.paint,Pr,Ur,null,_t.setPaintProperty),t.deepEqual(Jr.filter,fn.filter)||Pr.push({command:_t.setFilter,args:[Ur,fn.filter]}),t.deepEqual(Jr.minzoom,fn.minzoom)&&t.deepEqual(Jr.maxzoom,fn.maxzoom)||Pr.push({command:_t.setLayerZoomRange,args:[Ur,fn.minzoom,fn.maxzoom]}),Jr)Jr.hasOwnProperty(kn)&&kn!=="layout"&&kn!=="paint"&&kn!=="filter"&&kn!=="metadata"&&kn!=="minzoom"&&kn!=="maxzoom"&&(kn.indexOf("paint.")===0?Bt(Jr[kn],fn[kn],Pr,Ur,kn.slice(6),_t.setPaintProperty):t.deepEqual(Jr[kn],fn[kn])||Pr.push({command:_t.setLayerProperty,args:[Ur,kn,fn[kn]]}));for(kn in fn)fn.hasOwnProperty(kn)&&!Jr.hasOwnProperty(kn)&&kn!=="layout"&&kn!=="paint"&&kn!=="filter"&&kn!=="metadata"&&kn!=="minzoom"&&kn!=="maxzoom"&&(kn.indexOf("paint.")===0?Bt(Jr[kn],fn[kn],Pr,Ur,kn.slice(6),_t.setPaintProperty):t.deepEqual(Jr[kn],fn[kn])||Pr.push({command:_t.setLayerProperty,args:[Ur,kn,fn[kn]]}))}else Pr.push({command:_t.removeLayer,args:[Ur]}),zn=wa[wa.lastIndexOf(Ur)+1],Pr.push({command:_t.addLayer,args:[fn,zn]})}(pr,ut.layers,bt)}catch(br){console.warn("Unable to compute style diff:",br),bt=[{command:_t.setStyle,args:[ut]}]}return bt}(this.serialize(),q).filter(function(Ye){return!(Ye.command in Yr)});if(Se.length===0)return!1;var Oe=Se.filter(function(Ye){return!(Ye.command in xr)});if(Oe.length>0)throw new Error("Unimplemented: "+Oe.map(function(Ye){return Ye.command}).join(", ")+".");return Se.forEach(function(Ye){Ye.command!=="setTransition"&&ve[Ye.command].apply(ve,Ye.args)}),this.stylesheet=q,!0},ne.prototype.addImage=function(q,ve){if(this.getImage(q))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(q,ve),this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},ne.prototype.updateImage=function(q,ve){this.imageManager.updateImage(q,ve)},ne.prototype.getImage=function(q){return this.imageManager.getImage(q)},ne.prototype.removeImage=function(q){if(!this.getImage(q))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(q),this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},ne.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},ne.prototype.addSource=function(q,ve,Se){var Oe=this;if(Se===void 0&&(Se={}),this._checkLoaded(),this.sourceCaches[q]!==void 0)throw new Error("There is already a source with this ID");if(!ve.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ve).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(ve.type)>=0&&this._validate(t.validateStyle.source,"sources."+q,ve,null,Se))){this.map&&this.map._collectResourceTiming&&(ve.collectResourceTiming=!0);var Ye=this.sourceCaches[q]=new ht(q,ve,this.dispatcher);Ye.style=this,Ye.setEventedParent(this,function(){return{isSourceLoaded:Oe.loaded(),source:Ye.serialize(),sourceId:q}}),Ye.onAdd(this.map),this._changed=!0}},ne.prototype.removeSource=function(q){if(this._checkLoaded(),this.sourceCaches[q]===void 0)throw new Error("There is no source with this ID");for(var ve in this._layers)if(this._layers[ve].source===q)return this.fire(new t.ErrorEvent(new Error('Source "'+q+'" cannot be removed while layer "'+ve+'" is using it.')));var Se=this.sourceCaches[q];delete this.sourceCaches[q],delete this._updatedSources[q],Se.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:q})),Se.setEventedParent(null),Se.clearTiles(),Se.onRemove&&Se.onRemove(this.map),this._changed=!0},ne.prototype.setGeoJSONSourceData=function(q,ve){this._checkLoaded(),this.sourceCaches[q].getSource().setData(ve),this._changed=!0},ne.prototype.getSource=function(q){return this.sourceCaches[q]&&this.sourceCaches[q].getSource()},ne.prototype.addLayer=function(q,ve,Se){Se===void 0&&(Se={}),this._checkLoaded();var Oe=q.id;if(this.getLayer(Oe))this.fire(new t.ErrorEvent(new Error('Layer with id "'+Oe+'" already exists on this map')));else{var Ye;if(q.type==="custom"){if(Xt(this,t.validateCustomStyleLayer(q)))return;Ye=t.createStyleLayer(q)}else{if(typeof q.source=="object"&&(this.addSource(Oe,q.source),q=t.clone$1(q),q=t.extend(q,{source:Oe})),this._validate(t.validateStyle.layer,"layers."+Oe,q,{arrayIndex:-1},Se))return;Ye=t.createStyleLayer(q),this._validateLayer(Ye),Ye.setEventedParent(this,{layer:{id:Oe}}),this._serializedLayers[Ye.id]=Ye.serialize()}var ut=ve?this._order.indexOf(ve):this._order.length;if(ve&&ut===-1)this.fire(new t.ErrorEvent(new Error('Layer with id "'+ve+'" does not exist on this map.')));else{if(this._order.splice(ut,0,Oe),this._layerOrderChanged=!0,this._layers[Oe]=Ye,this._removedLayers[Oe]&&Ye.source&&Ye.type!=="custom"){var bt=this._removedLayers[Oe];delete this._removedLayers[Oe],bt.type!==Ye.type?this._updatedSources[Ye.source]="clear":(this._updatedSources[Ye.source]="reload",this.sourceCaches[Ye.source].pause())}this._updateLayer(Ye),Ye.onAdd&&Ye.onAdd(this.map)}}},ne.prototype.moveLayer=function(q,ve){if(this._checkLoaded(),this._changed=!0,this._layers[q]){if(q!==ve){var Se=this._order.indexOf(q);this._order.splice(Se,1);var Oe=ve?this._order.indexOf(ve):this._order.length;ve&&Oe===-1?this.fire(new t.ErrorEvent(new Error('Layer with id "'+ve+'" does not exist on this map.'))):(this._order.splice(Oe,0,q),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be moved.")))},ne.prototype.removeLayer=function(q){this._checkLoaded();var ve=this._layers[q];if(ve){ve.setEventedParent(null);var Se=this._order.indexOf(q);this._order.splice(Se,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[q]=ve,delete this._layers[q],delete this._serializedLayers[q],delete this._updatedLayers[q],delete this._updatedPaintProps[q],ve.onRemove&&ve.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be removed.")))},ne.prototype.getLayer=function(q){return this._layers[q]},ne.prototype.hasLayer=function(q){return q in this._layers},ne.prototype.setLayerZoomRange=function(q,ve,Se){this._checkLoaded();var Oe=this.getLayer(q);Oe?Oe.minzoom===ve&&Oe.maxzoom===Se||(ve!=null&&(Oe.minzoom=ve),Se!=null&&(Oe.maxzoom=Se),this._updateLayer(Oe)):this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot have zoom extent.")))},ne.prototype.setFilter=function(q,ve,Se){Se===void 0&&(Se={}),this._checkLoaded();var Oe=this.getLayer(q);if(Oe){if(!t.deepEqual(Oe.filter,ve))return ve==null?(Oe.filter=void 0,void this._updateLayer(Oe)):void(this._validate(t.validateStyle.filter,"layers."+Oe.id+".filter",ve,null,Se)||(Oe.filter=t.clone$1(ve),this._updateLayer(Oe)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be filtered.")))},ne.prototype.getFilter=function(q){return t.clone$1(this.getLayer(q).filter)},ne.prototype.setLayoutProperty=function(q,ve,Se,Oe){Oe===void 0&&(Oe={}),this._checkLoaded();var Ye=this.getLayer(q);Ye?t.deepEqual(Ye.getLayoutProperty(ve),Se)||(Ye.setLayoutProperty(ve,Se,Oe),this._updateLayer(Ye)):this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},ne.prototype.getLayoutProperty=function(q,ve){var Se=this.getLayer(q);if(Se)return Se.getLayoutProperty(ve);this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style.")))},ne.prototype.setPaintProperty=function(q,ve,Se,Oe){Oe===void 0&&(Oe={}),this._checkLoaded();var Ye=this.getLayer(q);Ye?t.deepEqual(Ye.getPaintProperty(ve),Se)||(Ye.setPaintProperty(ve,Se,Oe)&&this._updateLayer(Ye),this._changed=!0,this._updatedPaintProps[q]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},ne.prototype.getPaintProperty=function(q,ve){return this.getLayer(q).getPaintProperty(ve)},ne.prototype.setFeatureState=function(q,ve){this._checkLoaded();var Se=q.source,Oe=q.sourceLayer,Ye=this.sourceCaches[Se];if(Ye!==void 0){var ut=Ye.getSource().type;ut==="geojson"&&Oe?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ut!=="vector"||Oe?(q.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Ye.setFeatureState(Oe,q.id,ve)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+Se+"' does not exist in the map's style.")))},ne.prototype.removeFeatureState=function(q,ve){this._checkLoaded();var Se=q.source,Oe=this.sourceCaches[Se];if(Oe!==void 0){var Ye=Oe.getSource().type,ut=Ye==="vector"?q.sourceLayer:void 0;Ye!=="vector"||ut?ve&&typeof q.id!="string"&&typeof q.id!="number"?this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):Oe.removeFeatureState(ut,q.id,ve):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+Se+"' does not exist in the map's style.")))},ne.prototype.getFeatureState=function(q){this._checkLoaded();var ve=q.source,Se=q.sourceLayer,Oe=this.sourceCaches[ve];if(Oe!==void 0){if(Oe.getSource().type!=="vector"||Se)return q.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Oe.getFeatureState(Se,q.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+ve+"' does not exist in the map's style.")))},ne.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},ne.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(q){return q.serialize()}),layers:this._serializeLayers(this._order)},function(q){return q!==void 0})},ne.prototype._updateLayer=function(q){this._updatedLayers[q.id]=!0,q.source&&!this._updatedSources[q.source]&&this.sourceCaches[q.source].getSource().type!=="raster"&&(this._updatedSources[q.source]="reload",this.sourceCaches[q.source].pause()),this._changed=!0},ne.prototype._flattenAndSortRenderedFeatures=function(q){for(var ve=this,Se=function(pa){return ve._layers[pa].type==="fill-extrusion"},Oe={},Ye=[],ut=this._order.length-1;ut>=0;ut--){var bt=this._order[ut];if(Se(bt)){Oe[bt]=ut;for(var jt=0,sr=q;jt<sr.length;jt+=1){var pr=sr[jt][bt];if(pr)for(var br=0,Cr=pr;br<Cr.length;br+=1)Ye.push(Cr[br])}}}Ye.sort(function(pa,ua){return ua.intersectionZ-pa.intersectionZ});for(var Pr=[],jr=this._order.length-1;jr>=0;jr--){var Mr=this._order[jr];if(Se(Mr))for(var Ur=Ye.length-1;Ur>=0;Ur--){var Jr=Ye[Ur].feature;if(Oe[Jr.layer.id]<jr)break;Pr.push(Jr),Ye.pop()}else for(var fn=0,zn=q;fn<zn.length;fn+=1){var kn=zn[fn][Mr];if(kn)for(var Dn=0,qn=kn;Dn<qn.length;Dn+=1)Pr.push(qn[Dn].feature)}}return Pr},ne.prototype.queryRenderedFeatures=function(q,ve,Se){ve&&ve.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",ve.filter,null,ve);var Oe={};if(ve&&ve.layers){if(!Array.isArray(ve.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Ye=0,ut=ve.layers;Ye<ut.length;Ye+=1){var bt=ut[Ye],jt=this._layers[bt];if(!jt)return this.fire(new t.ErrorEvent(new Error("The layer '"+bt+"' does not exist in the map's style and cannot be queried for features."))),[];Oe[jt.source]=!0}}var sr=[];for(var pr in ve.availableImages=this._availableImages,this.sourceCaches)ve.layers&&!Oe[pr]||sr.push(oe(this.sourceCaches[pr],this._layers,this._serializedLayers,q,ve,Se));return this.placement&&sr.push(function(br,Cr,Pr,jr,Mr,Ur,Jr){for(var fn={},zn=Ur.queryRenderedSymbols(jr),kn=[],Dn=0,qn=Object.keys(zn).map(Number);Dn<qn.length;Dn+=1)kn.push(Jr[qn[Dn]]);kn.sort(ie);for(var pa=function(){var qa=wa[ua],Fi=qa.featureIndex.lookupSymbolFeatures(zn[qa.bucketInstanceId],Cr,qa.bucketIndex,qa.sourceLayerIndex,Mr.filter,Mr.layers,Mr.availableImages,br);for(var Ua in Fi){var fi=fn[Ua]=fn[Ua]||[],Ii=Fi[Ua];Ii.sort(function(zi,si){var Na=qa.featureSortOrder;if(Na){var os=Na.indexOf(zi.featureIndex);return Na.indexOf(si.featureIndex)-os}return si.featureIndex-zi.featureIndex});for(var hi=0,ii=Ii;hi<ii.length;hi+=1)fi.push(ii[hi])}},ua=0,wa=kn;ua<wa.length;ua+=1)pa();var Da=function(qa){fn[qa].forEach(function(Fi){var Ua=Fi.feature,fi=Pr[br[qa].source].getFeatureState(Ua.layer["source-layer"],Ua.id);Ua.source=Ua.layer.source,Ua.layer["source-layer"]&&(Ua.sourceLayer=Ua.layer["source-layer"]),Ua.state=fi})};for(var oi in fn)Da(oi);return fn}(this._layers,this._serializedLayers,this.sourceCaches,q,ve,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(sr)},ne.prototype.querySourceFeatures=function(q,ve){ve&&ve.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",ve.filter,null,ve);var Se=this.sourceCaches[q];return Se?function(Oe,Ye){for(var ut=Oe.getRenderableIds().map(function(Cr){return Oe.getTileByID(Cr)}),bt=[],jt={},sr=0;sr<ut.length;sr++){var pr=ut[sr],br=pr.tileID.canonical.key;jt[br]||(jt[br]=!0,pr.querySourceFeatures(bt,Ye))}return bt}(Se,ve):[]},ne.prototype.addSourceType=function(q,ve,Se){return ne.getSourceType(q)?Se(new Error('A source type called "'+q+'" already exists.')):(ne.setSourceType(q,ve),ve.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:q,url:ve.workerSourceURL},Se):Se(null,null))},ne.prototype.getLight=function(){return this.light.getLight()},ne.prototype.setLight=function(q,ve){ve===void 0&&(ve={}),this._checkLoaded();var Se=this.light.getLight(),Oe=!1;for(var Ye in q)if(!t.deepEqual(q[Ye],Se[Ye])){Oe=!0;break}if(Oe){var ut={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(q,ve),this.light.updateTransitions(ut)}},ne.prototype._validate=function(q,ve,Se,Oe,Ye){return Ye===void 0&&(Ye={}),(!Ye||Ye.validate!==!1)&&Xt(this,q.call(t.validateStyle,t.extend({key:ve,style:this.serialize(),value:Se,styleSpec:t.styleSpec},Oe)))},ne.prototype._remove=function(){for(var q in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[q].setEventedParent(null);for(var ve in this.sourceCaches)this.sourceCaches[ve].clearTiles(),this.sourceCaches[ve].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},ne.prototype._clearSource=function(q){this.sourceCaches[q].clearTiles()},ne.prototype._reloadSource=function(q){this.sourceCaches[q].resume(),this.sourceCaches[q].reload()},ne.prototype._updateSources=function(q){for(var ve in this.sourceCaches)this.sourceCaches[ve].update(q)},ne.prototype._generateCollisionBoxes=function(){for(var q in this.sourceCaches)this._reloadSource(q)},ne.prototype._updatePlacement=function(q,ve,Se,Oe,Ye){Ye===void 0&&(Ye=!1);for(var ut=!1,bt=!1,jt={},sr=0,pr=this._order;sr<pr.length;sr+=1){var br=this._layers[pr[sr]];if(br.type==="symbol"){if(!jt[br.source]){var Cr=this.sourceCaches[br.source];jt[br.source]=Cr.getRenderableIds(!0).map(function(Jr){return Cr.getTileByID(Jr)}).sort(function(Jr,fn){return fn.tileID.overscaledZ-Jr.tileID.overscaledZ||(Jr.tileID.isLessThan(fn.tileID)?-1:1)})}var Pr=this.crossTileSymbolIndex.addLayer(br,jt[br.source],q.center.lng);ut=ut||Pr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Ye=Ye||this._layerOrderChanged||Se===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),q.zoom))&&(this.pauseablePlacement=new Gn(q,this._order,Ye,ve,Se,Oe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,jt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),bt=!0),ut&&this.pauseablePlacement.placement.setStale()),bt||ut)for(var jr=0,Mr=this._order;jr<Mr.length;jr+=1){var Ur=this._layers[Mr[jr]];Ur.type==="symbol"&&this.placement.updateLayerOpacities(Ur,jt[Ur.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},ne.prototype._releaseSymbolFadeTiles=function(){for(var q in this.sourceCaches)this.sourceCaches[q].releaseSymbolFadeTiles()},ne.prototype.getImages=function(q,ve,Se){this.imageManager.getImages(ve.icons,Se),this._updateTilesForChangedImages();var Oe=this.sourceCaches[ve.source];Oe&&Oe.setDependencies(ve.tileID.key,ve.type,ve.icons)},ne.prototype.getGlyphs=function(q,ve,Se){this.glyphManager.getGlyphs(ve.stacks,Se)},ne.prototype.getResource=function(q,ve,Se){return t.makeRequest(ve,Se)},ne}(t.Evented);en.getSourceType=function($){return te[$]},en.setSourceType=function($,ne){te[$]=ne},en.registerForPluginStateChange=t.registerForPluginStateChange;var nn=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),pn=yo(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),rn=yo(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),wr=yo(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ir=yo(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Tr=yo("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Fn=yo(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Vn=yo(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),la=yo("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ra=yo("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),oa=yo("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ai=yo(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Ti=yo(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ui=yo(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Qa=yo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),di=yo(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Ps=yo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),rs=yo(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Su=yo(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Rs=yo(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ec=yo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Eu=yo(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),hu=yo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Rc=yo(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Vu=yo(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Co=yo(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),ul=yo(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function yo($,ne){var q=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,ve={};return{fragmentSource:$=$.replace(q,function(Se,Oe,Ye,ut,bt){return ve[bt]=!0,Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+bt+`
varying `+Ye+" "+ut+" "+bt+`;
#else
uniform `+Ye+" "+ut+" u_"+bt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+bt+`
    `+Ye+" "+ut+" "+bt+" = u_"+bt+`;
#endif
`}),vertexSource:ne=ne.replace(q,function(Se,Oe,Ye,ut,bt){var jt=ut==="float"?"vec2":"vec4",sr=bt.match(/color/)?"color":jt;return ve[bt]?Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+bt+`
uniform lowp float u_`+bt+`_t;
attribute `+Ye+" "+jt+" a_"+bt+`;
varying `+Ye+" "+ut+" "+bt+`;
#else
uniform `+Ye+" "+ut+" u_"+bt+`;
#endif
`:sr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+bt+`
    `+bt+" = a_"+bt+`;
#else
    `+Ye+" "+ut+" "+bt+" = u_"+bt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+bt+`
    `+bt+" = unpack_mix_"+sr+"(a_"+bt+", u_"+bt+`_t);
#else
    `+Ye+" "+ut+" "+bt+" = u_"+bt+`;
#endif
`:Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+bt+`
uniform lowp float u_`+bt+`_t;
attribute `+Ye+" "+jt+" a_"+bt+`;
#else
uniform `+Ye+" "+ut+" u_"+bt+`;
#endif
`:sr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+bt+`
    `+Ye+" "+ut+" "+bt+" = a_"+bt+`;
#else
    `+Ye+" "+ut+" "+bt+" = u_"+bt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+bt+`
    `+Ye+" "+ut+" "+bt+" = unpack_mix_"+sr+"(a_"+bt+", u_"+bt+`_t);
#else
    `+Ye+" "+ut+" "+bt+" = u_"+bt+`;
#endif
`})}}var uh=Object.freeze({__proto__:null,prelude:pn,background:rn,backgroundPattern:wr,circle:Ir,clippingMask:Tr,heatmap:Fn,heatmapTexture:Vn,collisionBox:la,collisionCircle:Ra,debug:oa,fill:ai,fillOutline:Ti,fillOutlinePattern:Ui,fillPattern:Qa,fillExtrusion:di,fillExtrusionPattern:Ps,hillshadePrepare:rs,hillshade:Su,line:Rs,lineGradient:ec,linePattern:Eu,lineSDF:hu,raster:Rc,symbolIcon:Vu,symbolSDF:Co,symbolTextAndIcon:ul}),pu=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};pu.prototype.bind=function($,ne,q,ve,Se,Oe,Ye,ut){this.context=$;for(var bt=this.boundPaintVertexBuffers.length!==ve.length,jt=0;!bt&&jt<ve.length;jt++)this.boundPaintVertexBuffers[jt]!==ve[jt]&&(bt=!0);$.extVertexArrayObject&&this.vao&&this.boundProgram===ne&&this.boundLayoutVertexBuffer===q&&!bt&&this.boundIndexBuffer===Se&&this.boundVertexOffset===Oe&&this.boundDynamicVertexBuffer===Ye&&this.boundDynamicVertexBuffer2===ut?($.bindVertexArrayOES.set(this.vao),Ye&&Ye.bind(),Se&&Se.dynamicDraw&&Se.bind(),ut&&ut.bind()):this.freshBind(ne,q,ve,Se,Oe,Ye,ut)},pu.prototype.freshBind=function($,ne,q,ve,Se,Oe,Ye){var ut,bt=$.numAttributes,jt=this.context,sr=jt.gl;if(jt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=jt.extVertexArrayObject.createVertexArrayOES(),jt.bindVertexArrayOES.set(this.vao),ut=0,this.boundProgram=$,this.boundLayoutVertexBuffer=ne,this.boundPaintVertexBuffers=q,this.boundIndexBuffer=ve,this.boundVertexOffset=Se,this.boundDynamicVertexBuffer=Oe,this.boundDynamicVertexBuffer2=Ye;else{ut=jt.currentNumAttributes||0;for(var pr=bt;pr<ut;pr++)sr.disableVertexAttribArray(pr)}ne.enableAttributes(sr,$);for(var br=0,Cr=q;br<Cr.length;br+=1)Cr[br].enableAttributes(sr,$);Oe&&Oe.enableAttributes(sr,$),Ye&&Ye.enableAttributes(sr,$),ne.bind(),ne.setVertexAttribPointers(sr,$,Se);for(var Pr=0,jr=q;Pr<jr.length;Pr+=1){var Mr=jr[Pr];Mr.bind(),Mr.setVertexAttribPointers(sr,$,Se)}Oe&&(Oe.bind(),Oe.setVertexAttribPointers(sr,$,Se)),ve&&ve.bind(),Ye&&(Ye.bind(),Ye.setVertexAttribPointers(sr,$,Se)),jt.currentNumAttributes=bt},pu.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var zf=function($,ne,q,ve,Se){var Oe=$.gl;this.program=Oe.createProgram();var Ye=q?q.defines():[];Se&&Ye.push("#define OVERDRAW_INSPECTOR;");var ut=Ye.concat(pn.fragmentSource,ne.fragmentSource).join(`
`),bt=Ye.concat(pn.vertexSource,ne.vertexSource).join(`
`),jt=Oe.createShader(Oe.FRAGMENT_SHADER);if(Oe.isContextLost())this.failedToCreate=!0;else{Oe.shaderSource(jt,ut),Oe.compileShader(jt),Oe.attachShader(this.program,jt);var sr=Oe.createShader(Oe.VERTEX_SHADER);if(Oe.isContextLost())this.failedToCreate=!0;else{Oe.shaderSource(sr,bt),Oe.compileShader(sr),Oe.attachShader(this.program,sr);for(var pr=q?q.layoutAttributes:[],br=0;br<pr.length;br++)Oe.bindAttribLocation(this.program,br,pr[br].name);Oe.linkProgram(this.program),Oe.deleteShader(sr),Oe.deleteShader(jt),this.numAttributes=Oe.getProgramParameter(this.program,Oe.ACTIVE_ATTRIBUTES),this.attributes={};for(var Cr={},Pr=0;Pr<this.numAttributes;Pr++){var jr=Oe.getActiveAttrib(this.program,Pr);jr&&(this.attributes[jr.name]=Oe.getAttribLocation(this.program,jr.name))}for(var Mr=Oe.getProgramParameter(this.program,Oe.ACTIVE_UNIFORMS),Ur=0;Ur<Mr;Ur++){var Jr=Oe.getActiveUniform(this.program,Ur);Jr&&(Cr[Jr.name]=Oe.getUniformLocation(this.program,Jr.name))}this.fixedUniforms=ve($,Cr),this.binderUniforms=q?q.getUniforms($,Cr):[]}}};function du($,ne,q){var ve=1/wn(q,1,ne.transform.tileZoom),Se=Math.pow(2,q.tileID.overscaledZ),Oe=q.tileSize*Math.pow(2,ne.transform.tileZoom)/Se,Ye=Oe*(q.tileID.canonical.x+q.tileID.wrap*Se),ut=Oe*q.tileID.canonical.y;return{u_image:0,u_texsize:q.imageAtlasTexture.size,u_scale:[ve,$.fromScale,$.toScale],u_fade:$.t,u_pixel_coord_upper:[Ye>>16,ut>>16],u_pixel_coord_lower:[65535&Ye,65535&ut]}}zf.prototype.draw=function($,ne,q,ve,Se,Oe,Ye,ut,bt,jt,sr,pr,br,Cr,Pr,jr){var Mr,Ur=$.gl;if(!this.failedToCreate){for(var Jr in $.program.set(this.program),$.setDepthMode(q),$.setStencilMode(ve),$.setColorMode(Se),$.setCullFace(Oe),this.fixedUniforms)this.fixedUniforms[Jr].set(Ye[Jr]);Cr&&Cr.setUniforms($,this.binderUniforms,pr,{zoom:br});for(var fn=(Mr={},Mr[Ur.LINES]=2,Mr[Ur.TRIANGLES]=3,Mr[Ur.LINE_STRIP]=1,Mr)[ne],zn=0,kn=sr.get();zn<kn.length;zn+=1){var Dn=kn[zn],qn=Dn.vaos||(Dn.vaos={});(qn[ut]||(qn[ut]=new pu)).bind($,this,bt,Cr?Cr.getPaintVertexBuffers():[],jt,Dn.vertexOffset,Pr,jr),Ur.drawElements(ne,Dn.primitiveLength*fn,Ur.UNSIGNED_SHORT,Dn.primitiveOffset*fn*2)}}};var Ql=function($,ne,q,ve){var Se=ne.style.light,Oe=Se.properties.get("position"),Ye=[Oe.x,Oe.y,Oe.z],ut=t.create$1();Se.properties.get("anchor")==="viewport"&&t.fromRotation(ut,-ne.transform.angle),t.transformMat3(Ye,Ye,ut);var bt=Se.properties.get("color");return{u_matrix:$,u_lightpos:Ye,u_lightintensity:Se.properties.get("intensity"),u_lightcolor:[bt.r,bt.g,bt.b],u_vertical_gradient:+q,u_opacity:ve}},Cu=function($,ne,q,ve,Se,Oe,Ye){return t.extend(Ql($,ne,q,ve),du(Oe,ne,Ye),{u_height_factor:-Math.pow(2,Se.overscaledZ)/Ye.tileSize/8})},Lu=function($){return{u_matrix:$}},ml=function($,ne,q,ve){return t.extend(Lu($),du(q,ne,ve))},cl=function($,ne){return{u_matrix:$,u_world:ne}},Hu=function($,ne,q,ve,Se){return t.extend(ml($,ne,q,ve),{u_world:Se})},Pu=function($,ne,q,ve){var Se,Oe,Ye=$.transform;if(ve.paint.get("circle-pitch-alignment")==="map"){var ut=wn(q,1,Ye.zoom);Se=!0,Oe=[ut,ut]}else Se=!1,Oe=Ye.pixelsToGLUnits;return{u_camera_to_center_distance:Ye.cameraToCenterDistance,u_scale_with_map:+(ve.paint.get("circle-pitch-scale")==="map"),u_matrix:$.translatePosMatrix(ne.posMatrix,q,ve.paint.get("circle-translate"),ve.paint.get("circle-translate-anchor")),u_pitch_with_map:+Se,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:Oe}},ql=function($,ne,q){var ve=wn(q,1,ne.zoom),Se=Math.pow(2,ne.zoom-q.tileID.overscaledZ),Oe=q.tileID.overscaleFactor();return{u_matrix:$,u_camera_to_center_distance:ne.cameraToCenterDistance,u_pixels_to_tile_units:ve,u_extrude_scale:[ne.pixelsToGLUnits[0]/(ve*Se),ne.pixelsToGLUnits[1]/(ve*Se)],u_overscale_factor:Oe}},yl=function($,ne,q){return{u_matrix:$,u_inv_matrix:ne,u_camera_to_center_distance:q.cameraToCenterDistance,u_viewport_size:[q.width,q.height]}},pc=function($,ne,q){return q===void 0&&(q=1),{u_matrix:$,u_color:ne,u_overlay:0,u_overlay_scale:q}},tc=function($){return{u_matrix:$}},eo=function($,ne,q,ve){return{u_matrix:$,u_extrude_scale:wn(ne,1,q),u_intensity:ve}},$s=function($,ne,q){var ve=$.transform;return{u_matrix:Rl($,ne,q),u_ratio:1/wn(ne,1,ve.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/ve.pixelsToGLUnits[0],1/ve.pixelsToGLUnits[1]]}},qc=function($,ne,q){return t.extend($s($,ne,q),{u_image:0})},vu=function($,ne,q,ve){var Se=$.transform,Oe=mu(ne,Se);return{u_matrix:Rl($,ne,q),u_texsize:ne.imageAtlasTexture.size,u_ratio:1/wn(ne,1,Se.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[Oe,ve.fromScale,ve.toScale],u_fade:ve.t,u_units_to_pixels:[1/Se.pixelsToGLUnits[0],1/Se.pixelsToGLUnits[1]]}},Ds=function($,ne,q,ve,Se){var Oe=$.lineAtlas,Ye=mu(ne,$.transform),ut=q.layout.get("line-cap")==="round",bt=Oe.getDash(ve.from,ut),jt=Oe.getDash(ve.to,ut),sr=bt.width*Se.fromScale,pr=jt.width*Se.toScale;return t.extend($s($,ne,q),{u_patternscale_a:[Ye/sr,-bt.height/2],u_patternscale_b:[Ye/pr,-jt.height/2],u_sdfgamma:Oe.width/(256*Math.min(sr,pr)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:bt.y,u_tex_y_b:jt.y,u_mix:Se.t})};function mu($,ne){return 1/wn($,1,ne.tileZoom)}function Rl($,ne,q){return $.translatePosMatrix(ne.tileID.posMatrix,ne,q.paint.get("line-translate"),q.paint.get("line-translate-anchor"))}var xl=function($,ne,q,ve,Se){return{u_matrix:$,u_tl_parent:ne,u_scale_parent:q,u_buffer_scale:1,u_fade_t:ve.mix,u_opacity:ve.opacity*Se.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Se.paint.get("raster-brightness-min"),u_brightness_high:Se.paint.get("raster-brightness-max"),u_saturation_factor:(Ye=Se.paint.get("raster-saturation"),Ye>0?1-1/(1.001-Ye):-Ye),u_contrast_factor:(Oe=Se.paint.get("raster-contrast"),Oe>0?1/(1-Oe):1+Oe),u_spin_weights:Dl(Se.paint.get("raster-hue-rotate"))};var Oe,Ye};function Dl($){$*=Math.PI/180;var ne=Math.sin($),q=Math.cos($);return[(2*q+1)/3,(-Math.sqrt(3)*ne-q+1)/3,(Math.sqrt(3)*ne-q+1)/3]}var fl,hl=function($,ne,q,ve,Se,Oe,Ye,ut,bt,jt){var sr=Se.transform;return{u_is_size_zoom_constant:+($==="constant"||$==="source"),u_is_size_feature_constant:+($==="constant"||$==="camera"),u_size_t:ne?ne.uSizeT:0,u_size:ne?ne.uSize:0,u_camera_to_center_distance:sr.cameraToCenterDistance,u_pitch:sr.pitch/360*2*Math.PI,u_rotate_symbol:+q,u_aspect_ratio:sr.width/sr.height,u_fade_change:Se.options.fadeDuration?Se.symbolFadeChange:1,u_matrix:Oe,u_label_plane_matrix:Ye,u_coord_matrix:ut,u_is_text:+bt,u_pitch_with_map:+ve,u_texsize:jt,u_texture:0}},eu=function($,ne,q,ve,Se,Oe,Ye,ut,bt,jt,sr){var pr=Se.transform;return t.extend(hl($,ne,q,ve,Se,Oe,Ye,ut,bt,jt),{u_gamma_scale:ve?Math.cos(pr._pitch)*pr.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+sr})},As=function($,ne,q,ve,Se,Oe,Ye,ut,bt,jt){return t.extend(eu($,ne,q,ve,Se,Oe,Ye,ut,!0,bt,!0),{u_texsize_icon:jt,u_texture_icon:1})},Ru=function($,ne,q){return{u_matrix:$,u_opacity:ne,u_color:q}},ps=function($,ne,q,ve,Se,Oe){return t.extend(function(Ye,ut,bt,jt){var sr=bt.imageManager.getPattern(Ye.from.toString()),pr=bt.imageManager.getPattern(Ye.to.toString()),br=bt.imageManager.getPixelSize(),Cr=br.width,Pr=br.height,jr=Math.pow(2,jt.tileID.overscaledZ),Mr=jt.tileSize*Math.pow(2,bt.transform.tileZoom)/jr,Ur=Mr*(jt.tileID.canonical.x+jt.tileID.wrap*jr),Jr=Mr*jt.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:sr.tl,u_pattern_br_a:sr.br,u_pattern_tl_b:pr.tl,u_pattern_br_b:pr.br,u_texsize:[Cr,Pr],u_mix:ut.t,u_pattern_size_a:sr.displaySize,u_pattern_size_b:pr.displaySize,u_scale_a:ut.fromScale,u_scale_b:ut.toScale,u_tile_units_to_pixels:1/wn(jt,1,bt.transform.tileZoom),u_pixel_coord_upper:[Ur>>16,Jr>>16],u_pixel_coord_lower:[65535&Ur,65535&Jr]}}(ve,Oe,q,Se),{u_matrix:$,u_opacity:ne})},pl={fillExtrusion:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_lightpos:new t.Uniform3f($,ne.u_lightpos),u_lightintensity:new t.Uniform1f($,ne.u_lightintensity),u_lightcolor:new t.Uniform3f($,ne.u_lightcolor),u_vertical_gradient:new t.Uniform1f($,ne.u_vertical_gradient),u_opacity:new t.Uniform1f($,ne.u_opacity)}},fillExtrusionPattern:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_lightpos:new t.Uniform3f($,ne.u_lightpos),u_lightintensity:new t.Uniform1f($,ne.u_lightintensity),u_lightcolor:new t.Uniform3f($,ne.u_lightcolor),u_vertical_gradient:new t.Uniform1f($,ne.u_vertical_gradient),u_height_factor:new t.Uniform1f($,ne.u_height_factor),u_image:new t.Uniform1i($,ne.u_image),u_texsize:new t.Uniform2f($,ne.u_texsize),u_pixel_coord_upper:new t.Uniform2f($,ne.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f($,ne.u_pixel_coord_lower),u_scale:new t.Uniform3f($,ne.u_scale),u_fade:new t.Uniform1f($,ne.u_fade),u_opacity:new t.Uniform1f($,ne.u_opacity)}},fill:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix)}},fillPattern:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_image:new t.Uniform1i($,ne.u_image),u_texsize:new t.Uniform2f($,ne.u_texsize),u_pixel_coord_upper:new t.Uniform2f($,ne.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f($,ne.u_pixel_coord_lower),u_scale:new t.Uniform3f($,ne.u_scale),u_fade:new t.Uniform1f($,ne.u_fade)}},fillOutline:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_world:new t.Uniform2f($,ne.u_world)}},fillOutlinePattern:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_world:new t.Uniform2f($,ne.u_world),u_image:new t.Uniform1i($,ne.u_image),u_texsize:new t.Uniform2f($,ne.u_texsize),u_pixel_coord_upper:new t.Uniform2f($,ne.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f($,ne.u_pixel_coord_lower),u_scale:new t.Uniform3f($,ne.u_scale),u_fade:new t.Uniform1f($,ne.u_fade)}},circle:function($,ne){return{u_camera_to_center_distance:new t.Uniform1f($,ne.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i($,ne.u_scale_with_map),u_pitch_with_map:new t.Uniform1i($,ne.u_pitch_with_map),u_extrude_scale:new t.Uniform2f($,ne.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f($,ne.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f($,ne.u_matrix)}},collisionBox:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_camera_to_center_distance:new t.Uniform1f($,ne.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f($,ne.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f($,ne.u_extrude_scale),u_overscale_factor:new t.Uniform1f($,ne.u_overscale_factor)}},collisionCircle:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_inv_matrix:new t.UniformMatrix4f($,ne.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f($,ne.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f($,ne.u_viewport_size)}},debug:function($,ne){return{u_color:new t.UniformColor($,ne.u_color),u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_overlay:new t.Uniform1i($,ne.u_overlay),u_overlay_scale:new t.Uniform1f($,ne.u_overlay_scale)}},clippingMask:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix)}},heatmap:function($,ne){return{u_extrude_scale:new t.Uniform1f($,ne.u_extrude_scale),u_intensity:new t.Uniform1f($,ne.u_intensity),u_matrix:new t.UniformMatrix4f($,ne.u_matrix)}},heatmapTexture:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_world:new t.Uniform2f($,ne.u_world),u_image:new t.Uniform1i($,ne.u_image),u_color_ramp:new t.Uniform1i($,ne.u_color_ramp),u_opacity:new t.Uniform1f($,ne.u_opacity)}},hillshade:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_image:new t.Uniform1i($,ne.u_image),u_latrange:new t.Uniform2f($,ne.u_latrange),u_light:new t.Uniform2f($,ne.u_light),u_shadow:new t.UniformColor($,ne.u_shadow),u_highlight:new t.UniformColor($,ne.u_highlight),u_accent:new t.UniformColor($,ne.u_accent)}},hillshadePrepare:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_image:new t.Uniform1i($,ne.u_image),u_dimension:new t.Uniform2f($,ne.u_dimension),u_zoom:new t.Uniform1f($,ne.u_zoom),u_maxzoom:new t.Uniform1f($,ne.u_maxzoom),u_unpack:new t.Uniform4f($,ne.u_unpack)}},line:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_ratio:new t.Uniform1f($,ne.u_ratio),u_device_pixel_ratio:new t.Uniform1f($,ne.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f($,ne.u_units_to_pixels)}},lineGradient:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_ratio:new t.Uniform1f($,ne.u_ratio),u_device_pixel_ratio:new t.Uniform1f($,ne.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f($,ne.u_units_to_pixels),u_image:new t.Uniform1i($,ne.u_image)}},linePattern:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_texsize:new t.Uniform2f($,ne.u_texsize),u_ratio:new t.Uniform1f($,ne.u_ratio),u_device_pixel_ratio:new t.Uniform1f($,ne.u_device_pixel_ratio),u_image:new t.Uniform1i($,ne.u_image),u_units_to_pixels:new t.Uniform2f($,ne.u_units_to_pixels),u_scale:new t.Uniform3f($,ne.u_scale),u_fade:new t.Uniform1f($,ne.u_fade)}},lineSDF:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_ratio:new t.Uniform1f($,ne.u_ratio),u_device_pixel_ratio:new t.Uniform1f($,ne.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f($,ne.u_units_to_pixels),u_patternscale_a:new t.Uniform2f($,ne.u_patternscale_a),u_patternscale_b:new t.Uniform2f($,ne.u_patternscale_b),u_sdfgamma:new t.Uniform1f($,ne.u_sdfgamma),u_image:new t.Uniform1i($,ne.u_image),u_tex_y_a:new t.Uniform1f($,ne.u_tex_y_a),u_tex_y_b:new t.Uniform1f($,ne.u_tex_y_b),u_mix:new t.Uniform1f($,ne.u_mix)}},raster:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_tl_parent:new t.Uniform2f($,ne.u_tl_parent),u_scale_parent:new t.Uniform1f($,ne.u_scale_parent),u_buffer_scale:new t.Uniform1f($,ne.u_buffer_scale),u_fade_t:new t.Uniform1f($,ne.u_fade_t),u_opacity:new t.Uniform1f($,ne.u_opacity),u_image0:new t.Uniform1i($,ne.u_image0),u_image1:new t.Uniform1i($,ne.u_image1),u_brightness_low:new t.Uniform1f($,ne.u_brightness_low),u_brightness_high:new t.Uniform1f($,ne.u_brightness_high),u_saturation_factor:new t.Uniform1f($,ne.u_saturation_factor),u_contrast_factor:new t.Uniform1f($,ne.u_contrast_factor),u_spin_weights:new t.Uniform3f($,ne.u_spin_weights)}},symbolIcon:function($,ne){return{u_is_size_zoom_constant:new t.Uniform1i($,ne.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i($,ne.u_is_size_feature_constant),u_size_t:new t.Uniform1f($,ne.u_size_t),u_size:new t.Uniform1f($,ne.u_size),u_camera_to_center_distance:new t.Uniform1f($,ne.u_camera_to_center_distance),u_pitch:new t.Uniform1f($,ne.u_pitch),u_rotate_symbol:new t.Uniform1i($,ne.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f($,ne.u_aspect_ratio),u_fade_change:new t.Uniform1f($,ne.u_fade_change),u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f($,ne.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f($,ne.u_coord_matrix),u_is_text:new t.Uniform1i($,ne.u_is_text),u_pitch_with_map:new t.Uniform1i($,ne.u_pitch_with_map),u_texsize:new t.Uniform2f($,ne.u_texsize),u_texture:new t.Uniform1i($,ne.u_texture)}},symbolSDF:function($,ne){return{u_is_size_zoom_constant:new t.Uniform1i($,ne.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i($,ne.u_is_size_feature_constant),u_size_t:new t.Uniform1f($,ne.u_size_t),u_size:new t.Uniform1f($,ne.u_size),u_camera_to_center_distance:new t.Uniform1f($,ne.u_camera_to_center_distance),u_pitch:new t.Uniform1f($,ne.u_pitch),u_rotate_symbol:new t.Uniform1i($,ne.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f($,ne.u_aspect_ratio),u_fade_change:new t.Uniform1f($,ne.u_fade_change),u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f($,ne.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f($,ne.u_coord_matrix),u_is_text:new t.Uniform1i($,ne.u_is_text),u_pitch_with_map:new t.Uniform1i($,ne.u_pitch_with_map),u_texsize:new t.Uniform2f($,ne.u_texsize),u_texture:new t.Uniform1i($,ne.u_texture),u_gamma_scale:new t.Uniform1f($,ne.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f($,ne.u_device_pixel_ratio),u_is_halo:new t.Uniform1i($,ne.u_is_halo)}},symbolTextAndIcon:function($,ne){return{u_is_size_zoom_constant:new t.Uniform1i($,ne.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i($,ne.u_is_size_feature_constant),u_size_t:new t.Uniform1f($,ne.u_size_t),u_size:new t.Uniform1f($,ne.u_size),u_camera_to_center_distance:new t.Uniform1f($,ne.u_camera_to_center_distance),u_pitch:new t.Uniform1f($,ne.u_pitch),u_rotate_symbol:new t.Uniform1i($,ne.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f($,ne.u_aspect_ratio),u_fade_change:new t.Uniform1f($,ne.u_fade_change),u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f($,ne.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f($,ne.u_coord_matrix),u_is_text:new t.Uniform1i($,ne.u_is_text),u_pitch_with_map:new t.Uniform1i($,ne.u_pitch_with_map),u_texsize:new t.Uniform2f($,ne.u_texsize),u_texsize_icon:new t.Uniform2f($,ne.u_texsize_icon),u_texture:new t.Uniform1i($,ne.u_texture),u_texture_icon:new t.Uniform1i($,ne.u_texture_icon),u_gamma_scale:new t.Uniform1f($,ne.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f($,ne.u_device_pixel_ratio),u_is_halo:new t.Uniform1i($,ne.u_is_halo)}},background:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_opacity:new t.Uniform1f($,ne.u_opacity),u_color:new t.UniformColor($,ne.u_color)}},backgroundPattern:function($,ne){return{u_matrix:new t.UniformMatrix4f($,ne.u_matrix),u_opacity:new t.Uniform1f($,ne.u_opacity),u_image:new t.Uniform1i($,ne.u_image),u_pattern_tl_a:new t.Uniform2f($,ne.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f($,ne.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f($,ne.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f($,ne.u_pattern_br_b),u_texsize:new t.Uniform2f($,ne.u_texsize),u_mix:new t.Uniform1f($,ne.u_mix),u_pattern_size_a:new t.Uniform2f($,ne.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f($,ne.u_pattern_size_b),u_scale_a:new t.Uniform1f($,ne.u_scale_a),u_scale_b:new t.Uniform1f($,ne.u_scale_b),u_pixel_coord_upper:new t.Uniform2f($,ne.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f($,ne.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f($,ne.u_tile_units_to_pixels)}}};function Du($,ne,q,ve,Se,Oe,Ye){for(var ut=$.context,bt=ut.gl,jt=$.useProgram("collisionBox"),sr=[],pr=0,br=0,Cr=0;Cr<ve.length;Cr++){var Pr=ve[Cr],jr=ne.getTile(Pr),Mr=jr.getBucket(q);if(Mr){var Ur=Pr.posMatrix;Se[0]===0&&Se[1]===0||(Ur=$.translatePosMatrix(Pr.posMatrix,jr,Se,Oe));var Jr=Ye?Mr.textCollisionBox:Mr.iconCollisionBox,fn=Mr.collisionCircleArray;if(fn.length>0){var zn=t.create(),kn=Ur;t.mul(zn,Mr.placementInvProjMatrix,$.transform.glCoordMatrix),t.mul(zn,zn,Mr.placementViewportMatrix),sr.push({circleArray:fn,circleOffset:br,transform:kn,invTransform:zn}),br=pr+=fn.length/4}Jr&&jt.draw(ut,bt.LINES,et.disabled,Me.disabled,$.colorModeForRenderPass(),He.disabled,ql(Ur,$.transform,jr),q.id,Jr.layoutVertexBuffer,Jr.indexBuffer,Jr.segments,null,$.transform.zoom,null,null,Jr.collisionVertexBuffer)}}if(Ye&&sr.length){var Dn=$.useProgram("collisionCircle"),qn=new t.StructArrayLayout2f1f2i16;qn.resize(4*pr),qn._trim();for(var pa=0,ua=0,wa=sr;ua<wa.length;ua+=1)for(var Da=wa[ua],oi=0;oi<Da.circleArray.length/4;oi++){var qa=4*oi,Fi=Da.circleArray[qa+0],Ua=Da.circleArray[qa+1],fi=Da.circleArray[qa+2],Ii=Da.circleArray[qa+3];qn.emplace(pa++,Fi,Ua,fi,Ii,0),qn.emplace(pa++,Fi,Ua,fi,Ii,1),qn.emplace(pa++,Fi,Ua,fi,Ii,2),qn.emplace(pa++,Fi,Ua,fi,Ii,3)}(!fl||fl.length<2*pr)&&(fl=function(Bo){var bo=2*Bo,ho=new t.StructArrayLayout3ui6;ho.resize(bo),ho._trim();for(var es=0;es<bo;es++){var To=6*es;ho.uint16[To+0]=4*es+0,ho.uint16[To+1]=4*es+1,ho.uint16[To+2]=4*es+2,ho.uint16[To+3]=4*es+2,ho.uint16[To+4]=4*es+3,ho.uint16[To+5]=4*es+0}return ho}(pr));for(var hi=ut.createIndexBuffer(fl,!0),ii=ut.createVertexBuffer(qn,t.collisionCircleLayout.members,!0),zi=0,si=sr;zi<si.length;zi+=1){var Na=si[zi],os=yl(Na.transform,Na.invTransform,$.transform);Dn.draw(ut,bt.TRIANGLES,et.disabled,Me.disabled,$.colorModeForRenderPass(),He.disabled,os,q.id,ii,hi,t.SegmentVector.simpleSegment(0,2*Na.circleOffset,Na.circleArray.length,Na.circleArray.length/2),null,$.transform.zoom,null,null,null)}ii.destroy(),hi.destroy()}}var ns=t.identity(new Float32Array(16));function ef($,ne,q,ve,Se,Oe){var Ye=t.getAnchorAlignment($),ut=-(Ye.horizontalAlign-.5)*ne,bt=-(Ye.verticalAlign-.5)*q,jt=t.evaluateVariableOffset($,ve);return new t.Point((ut/Se+jt[0])*Oe,(bt/Se+jt[1])*Oe)}function bl($,ne,q,ve,Se,Oe,Ye,ut,bt,jt,sr){var pr=$.text.placedSymbolArray,br=$.text.dynamicLayoutVertexArray,Cr=$.icon.dynamicLayoutVertexArray,Pr={};br.clear();for(var jr=0;jr<pr.length;jr++){var Mr=pr.get(jr),Ur=Mr.hidden||!Mr.crossTileID||$.allowVerticalPlacement&&!Mr.placedOrientation?null:ve[Mr.crossTileID];if(Ur){var Jr=new t.Point(Mr.anchorX,Mr.anchorY),fn=zr(Jr,q?ut:Ye),zn=Or(Oe.cameraToCenterDistance,fn.signedDistanceFromCamera),kn=Se.evaluateSizeForFeature($.textSizeData,jt,Mr)*zn/t.ONE_EM;q&&(kn*=$.tilePixelRatio/bt);for(var Dn=ef(Ur.anchor,Ur.width,Ur.height,Ur.textOffset,Ur.textBoxScale,kn),qn=q?zr(Jr.add(Dn),Ye).point:fn.point.add(ne?Dn.rotate(-Oe.angle):Dn),pa=$.allowVerticalPlacement&&Mr.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,ua=0;ua<Mr.numGlyphs;ua++)t.addDynamicAttributes(br,qn,pa);sr&&Mr.associatedIconIndex>=0&&(Pr[Mr.associatedIconIndex]={shiftedAnchor:qn,angle:pa})}else dn(Mr.numGlyphs,br)}if(sr){Cr.clear();for(var wa=$.icon.placedSymbolArray,Da=0;Da<wa.length;Da++){var oi=wa.get(Da);if(oi.hidden)dn(oi.numGlyphs,Cr);else{var qa=Pr[Da];if(qa)for(var Fi=0;Fi<oi.numGlyphs;Fi++)t.addDynamicAttributes(Cr,qa.shiftedAnchor,qa.angle);else dn(oi.numGlyphs,Cr)}}$.icon.dynamicLayoutVertexBuffer.updateData(Cr)}$.text.dynamicLayoutVertexBuffer.updateData(br)}function gu($,ne,q){return q.iconsInText&&ne?"symbolTextAndIcon":$?"symbolSDF":"symbolIcon"}function yu($,ne,q,ve,Se,Oe,Ye,ut,bt,jt,sr,pr){for(var br=$.context,Cr=br.gl,Pr=$.transform,jr=ut==="map",Mr=bt==="map",Ur=jr&&q.layout.get("symbol-placement")!=="point",Jr=jr&&!Mr&&!Ur,fn=q.layout.get("symbol-sort-key").constantOr(1)!==void 0,zn=$.depthModeForSublayer(0,et.ReadOnly),kn=q.layout.get("text-variable-anchor"),Dn=[],qn=0,pa=ve;qn<pa.length;qn+=1){var ua=pa[qn],wa=ne.getTile(ua),Da=wa.getBucket(q);if(Da){var oi=Se?Da.text:Da.icon;if(oi&&oi.segments.get().length){var qa=oi.programConfigurations.get(q.id),Fi=Se||Da.sdfIcons,Ua=Se?Da.textSizeData:Da.iconSizeData,fi=Mr||Pr.pitch!==0,Ii=$.useProgram(gu(Fi,Se,Da),qa),hi=t.evaluateSizeForZoom(Ua,Pr.zoom),ii=void 0,zi=[0,0],si=void 0,Na=void 0,os=null,Bo=void 0;if(Se)si=wa.glyphAtlasTexture,Na=Cr.LINEAR,ii=wa.glyphAtlasTexture.size,Da.iconsInText&&(zi=wa.imageAtlasTexture.size,os=wa.imageAtlasTexture,Bo=fi||$.options.rotating||$.options.zooming||Ua.kind==="composite"||Ua.kind==="camera"?Cr.LINEAR:Cr.NEAREST);else{var bo=q.layout.get("icon-size").constantOr(0)!==1||Da.iconsNeedLinear;si=wa.imageAtlasTexture,Na=Fi||$.options.rotating||$.options.zooming||bo||fi?Cr.LINEAR:Cr.NEAREST,ii=wa.imageAtlasTexture.size}var ho=wn(wa,1,$.transform.zoom),es=_r(ua.posMatrix,Mr,jr,$.transform,ho),To=Gr(ua.posMatrix,Mr,jr,$.transform,ho),xu=kn&&Da.hasTextData(),Ms=q.layout.get("icon-text-fit")!=="none"&&xu&&Da.hasIconData();Ur&&Yn(Da,ua.posMatrix,$,Se,es,To,Mr,jt);var ru=$.translatePosMatrix(ua.posMatrix,wa,Oe,Ye),Al=Ur||Se&&kn||Ms?ns:es,nu=$.translatePosMatrix(To,wa,Oe,Ye,!0),Iu=Fi&&q.paint.get(Se?"text-halo-width":"icon-halo-width").constantOr(1)!==0,vc={program:Ii,buffers:oi,uniformValues:Fi?Da.iconsInText?As(Ua.kind,hi,Jr,Mr,$,ru,Al,nu,ii,zi):eu(Ua.kind,hi,Jr,Mr,$,ru,Al,nu,Se,ii,!0):hl(Ua.kind,hi,Jr,Mr,$,ru,Al,nu,Se,ii),atlasTexture:si,atlasTextureIcon:os,atlasInterpolation:Na,atlasInterpolationIcon:Bo,isSDF:Fi,hasHalo:Iu};if(fn)for(var mc=0,Il=oi.segments.get();mc<Il.length;mc+=1){var zu=Il[mc];Dn.push({segments:new t.SegmentVector([zu]),sortKey:zu.sortKey,state:vc})}else Dn.push({segments:oi.segments,sortKey:0,state:vc})}}}fn&&Dn.sort(function(nf,ws){return nf.sortKey-ws.sortKey});for(var Ff=0,gc=Dn;Ff<gc.length;Ff+=1){var au=gc[Ff],Ss=au.state;if(br.activeTexture.set(Cr.TEXTURE0),Ss.atlasTexture.bind(Ss.atlasInterpolation,Cr.CLAMP_TO_EDGE),Ss.atlasTextureIcon&&(br.activeTexture.set(Cr.TEXTURE1),Ss.atlasTextureIcon&&Ss.atlasTextureIcon.bind(Ss.atlasInterpolationIcon,Cr.CLAMP_TO_EDGE)),Ss.isSDF){var rf=Ss.uniformValues;Ss.hasHalo&&(rf.u_is_halo=1,_s(Ss.buffers,au.segments,q,$,Ss.program,zn,sr,pr,rf)),rf.u_is_halo=0}_s(Ss.buffers,au.segments,q,$,Ss.program,zn,sr,pr,Ss.uniformValues)}}function _s($,ne,q,ve,Se,Oe,Ye,ut,bt){var jt=ve.context;Se.draw(jt,jt.gl.TRIANGLES,Oe,Ye,ut,He.disabled,bt,q.id,$.layoutVertexBuffer,$.indexBuffer,ne,q.paint,ve.transform.zoom,$.programConfigurations.get(q.id),$.dynamicLayoutVertexBuffer,$.opacityVertexBuffer)}function dc($,ne,q,ve,Se,Oe,Ye){var ut,bt,jt,sr,pr,br=$.context.gl,Cr=q.paint.get("fill-pattern"),Pr=Cr&&Cr.constantOr(1),jr=q.getCrossfadeParameters();Ye?(bt=Pr&&!q.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ut=br.LINES):(bt=Pr?"fillPattern":"fill",ut=br.TRIANGLES);for(var Mr=0,Ur=ve;Mr<Ur.length;Mr+=1){var Jr=Ur[Mr],fn=ne.getTile(Jr);if(!Pr||fn.patternsLoaded()){var zn=fn.getBucket(q);if(zn){var kn=zn.programConfigurations.get(q.id),Dn=$.useProgram(bt,kn);Pr&&($.context.activeTexture.set(br.TEXTURE0),fn.imageAtlasTexture.bind(br.LINEAR,br.CLAMP_TO_EDGE),kn.updatePaintBuffers(jr));var qn=Cr.constantOr(null);if(qn&&fn.imageAtlas){var pa=fn.imageAtlas,ua=pa.patternPositions[qn.to.toString()],wa=pa.patternPositions[qn.from.toString()];ua&&wa&&kn.setConstantPatternPositions(ua,wa)}var Da=$.translatePosMatrix(Jr.posMatrix,fn,q.paint.get("fill-translate"),q.paint.get("fill-translate-anchor"));if(Ye){sr=zn.indexBuffer2,pr=zn.segments2;var oi=[br.drawingBufferWidth,br.drawingBufferHeight];jt=bt==="fillOutlinePattern"&&Pr?Hu(Da,$,jr,fn,oi):cl(Da,oi)}else sr=zn.indexBuffer,pr=zn.segments,jt=Pr?ml(Da,$,jr,fn):Lu(Da);Dn.draw($.context,ut,Se,$.stencilModeForClipping(Jr),Oe,He.disabled,jt,q.id,zn.layoutVertexBuffer,sr,pr,q.paint,$.transform.zoom,kn)}}}}function tu($,ne,q,ve,Se,Oe,Ye){for(var ut=$.context,bt=ut.gl,jt=q.paint.get("fill-extrusion-pattern"),sr=jt.constantOr(1),pr=q.getCrossfadeParameters(),br=q.paint.get("fill-extrusion-opacity"),Cr=0,Pr=ve;Cr<Pr.length;Cr+=1){var jr=Pr[Cr],Mr=ne.getTile(jr),Ur=Mr.getBucket(q);if(Ur){var Jr=Ur.programConfigurations.get(q.id),fn=$.useProgram(sr?"fillExtrusionPattern":"fillExtrusion",Jr);sr&&($.context.activeTexture.set(bt.TEXTURE0),Mr.imageAtlasTexture.bind(bt.LINEAR,bt.CLAMP_TO_EDGE),Jr.updatePaintBuffers(pr));var zn=jt.constantOr(null);if(zn&&Mr.imageAtlas){var kn=Mr.imageAtlas,Dn=kn.patternPositions[zn.to.toString()],qn=kn.patternPositions[zn.from.toString()];Dn&&qn&&Jr.setConstantPatternPositions(Dn,qn)}var pa=$.translatePosMatrix(jr.posMatrix,Mr,q.paint.get("fill-extrusion-translate"),q.paint.get("fill-extrusion-translate-anchor")),ua=q.paint.get("fill-extrusion-vertical-gradient"),wa=sr?Cu(pa,$,ua,br,jr,pr,Mr):Ql(pa,$,ua,br);fn.draw(ut,ut.gl.TRIANGLES,Se,Oe,Ye,He.backCCW,wa,q.id,Ur.layoutVertexBuffer,Ur.indexBuffer,Ur.segments,q.paint,$.transform.zoom,Jr)}}}function ds($,ne,q,ve,Se,Oe){var Ye=$.context,ut=Ye.gl,bt=ne.fbo;if(bt){var jt=$.useProgram("hillshade");Ye.activeTexture.set(ut.TEXTURE0),ut.bindTexture(ut.TEXTURE_2D,bt.colorAttachment.get());var sr=function(pr,br,Cr){var Pr=Cr.paint.get("hillshade-shadow-color"),jr=Cr.paint.get("hillshade-highlight-color"),Mr=Cr.paint.get("hillshade-accent-color"),Ur=Cr.paint.get("hillshade-illumination-direction")*(Math.PI/180);Cr.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ur-=pr.transform.angle);var Jr,fn,zn,kn=!pr.options.moving;return{u_matrix:pr.transform.calculatePosMatrix(br.tileID.toUnwrapped(),kn),u_image:0,u_latrange:(Jr=br.tileID,fn=Math.pow(2,Jr.canonical.z),zn=Jr.canonical.y,[new t.MercatorCoordinate(0,zn/fn).toLngLat().lat,new t.MercatorCoordinate(0,(zn+1)/fn).toLngLat().lat]),u_light:[Cr.paint.get("hillshade-exaggeration"),Ur],u_shadow:Pr,u_highlight:jr,u_accent:Mr}}($,ne,q);jt.draw(Ye,ut.TRIANGLES,ve,Se,Oe,He.disabled,sr,q.id,$.rasterBoundsBuffer,$.quadTriangleIndexBuffer,$.rasterBoundsSegments)}}function tf($,ne,q,ve,Se,Oe,Ye){var ut=$.context,bt=ut.gl,jt=ne.dem;if(jt&&jt.data){var sr=jt.dim,pr=jt.stride,br=jt.getPixels();if(ut.activeTexture.set(bt.TEXTURE1),ut.pixelStoreUnpackPremultiplyAlpha.set(!1),ne.demTexture=ne.demTexture||$.getTileTexture(pr),ne.demTexture){var Cr=ne.demTexture;Cr.update(br,{premultiply:!1}),Cr.bind(bt.NEAREST,bt.CLAMP_TO_EDGE)}else ne.demTexture=new t.Texture(ut,br,bt.RGBA,{premultiply:!1}),ne.demTexture.bind(bt.NEAREST,bt.CLAMP_TO_EDGE);ut.activeTexture.set(bt.TEXTURE0);var Pr=ne.fbo;if(!Pr){var jr=new t.Texture(ut,{width:sr,height:sr,data:null},bt.RGBA);jr.bind(bt.LINEAR,bt.CLAMP_TO_EDGE),(Pr=ne.fbo=ut.createFramebuffer(sr,sr,!0)).colorAttachment.set(jr.texture)}ut.bindFramebuffer.set(Pr.framebuffer),ut.viewport.set([0,0,sr,sr]),$.useProgram("hillshadePrepare").draw(ut,bt.TRIANGLES,Se,Oe,Ye,He.disabled,function(Mr,Ur,Jr){var fn=Ur.stride,zn=t.create();return t.ortho(zn,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(zn,zn,[0,-t.EXTENT,0]),{u_matrix:zn,u_image:1,u_dimension:[fn,fn],u_zoom:Mr.overscaledZ,u_maxzoom:Jr,u_unpack:Ur.getUnpackVector()}}(ne.tileID,jt,ve),q.id,$.rasterBoundsBuffer,$.quadTriangleIndexBuffer,$.rasterBoundsSegments),ne.needsHillshadePrepare=!1}}function Of($,ne,q,ve,Se){var Oe=ve.paint.get("raster-fade-duration");if(Oe>0){var Ye=t.browser.now(),ut=(Ye-$.timeAdded)/Oe,bt=ne?(Ye-ne.timeAdded)/Oe:-1,jt=q.getSource(),sr=Se.coveringZoomLevel({tileSize:jt.tileSize,roundZoom:jt.roundZoom}),pr=!ne||Math.abs(ne.tileID.overscaledZ-sr)>Math.abs($.tileID.overscaledZ-sr),br=pr&&$.refreshedUponExpiration?1:t.clamp(pr?ut:1-bt,0,1);return $.refreshedUponExpiration&&ut>=1&&($.refreshedUponExpiration=!1),ne?{opacity:1,mix:1-br}:{opacity:br,mix:0}}return{opacity:1,mix:0}}var rc=new t.Color(1,0,0,1),Dc=new t.Color(0,1,0,1),at=new t.Color(0,0,1,1),Qe=new t.Color(1,0,1,1),gt=new t.Color(0,1,1,1);function ct($,ne,q,ve){Ct($,0,ne+q/2,$.transform.width,q,ve)}function yt($,ne,q,ve){Ct($,ne-q/2,0,q,$.transform.height,ve)}function Ct($,ne,q,ve,Se,Oe){var Ye=$.context,ut=Ye.gl;ut.enable(ut.SCISSOR_TEST),ut.scissor(ne*t.browser.devicePixelRatio,q*t.browser.devicePixelRatio,ve*t.browser.devicePixelRatio,Se*t.browser.devicePixelRatio),Ye.clear({color:Oe}),ut.disable(ut.SCISSOR_TEST)}function Ut($,ne,q){var ve=$.context,Se=ve.gl,Oe=q.posMatrix,Ye=$.useProgram("debug"),ut=et.disabled,bt=Me.disabled,jt=$.colorModeForRenderPass();ve.activeTexture.set(Se.TEXTURE0),$.emptyTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),Ye.draw(ve,Se.LINE_STRIP,ut,bt,jt,He.disabled,pc(Oe,t.Color.red),"$debug",$.debugBuffer,$.tileBorderIndexBuffer,$.debugSegments);var sr=ne.getTileByID(q.key).latestRawTileData,pr=Math.floor((sr&&sr.byteLength||0)/1024),br=ne.getTile(q).tileSize,Cr=512/Math.min(br,512)*(q.overscaledZ/$.transform.zoom)*.5,Pr=q.canonical.toString();q.overscaledZ!==q.canonical.z&&(Pr+=" => "+q.overscaledZ),function(jr,Mr){jr.initDebugOverlayCanvas();var Ur=jr.debugOverlayCanvas,Jr=jr.context.gl,fn=jr.debugOverlayCanvas.getContext("2d");fn.clearRect(0,0,Ur.width,Ur.height),fn.shadowColor="white",fn.shadowBlur=2,fn.lineWidth=1.5,fn.strokeStyle="white",fn.textBaseline="top",fn.font="bold 36px Open Sans, sans-serif",fn.fillText(Mr,5,5),fn.strokeText(Mr,5,5),jr.debugOverlayTexture.update(Ur),jr.debugOverlayTexture.bind(Jr.LINEAR,Jr.CLAMP_TO_EDGE)}($,Pr+" "+pr+"kb"),Ye.draw(ve,Se.TRIANGLES,ut,bt,Ie.alphaBlended,He.disabled,pc(Oe,t.Color.transparent,Cr),"$debug",$.debugBuffer,$.quadTriangleIndexBuffer,$.debugSegments)}var tr={symbol:function($,ne,q,ve,Se){if($.renderPass==="translucent"){var Oe=Me.disabled,Ye=$.colorModeForRenderPass();q.layout.get("text-variable-anchor")&&function(ut,bt,jt,sr,pr,br,Cr){for(var Pr=bt.transform,jr=pr==="map",Mr=br==="map",Ur=0,Jr=ut;Ur<Jr.length;Ur+=1){var fn=Jr[Ur],zn=sr.getTile(fn),kn=zn.getBucket(jt);if(kn&&kn.text&&kn.text.segments.get().length){var Dn=t.evaluateSizeForZoom(kn.textSizeData,Pr.zoom),qn=wn(zn,1,bt.transform.zoom),pa=_r(fn.posMatrix,Mr,jr,bt.transform,qn),ua=jt.layout.get("icon-text-fit")!=="none"&&kn.hasIconData();if(Dn){var wa=Math.pow(2,Pr.zoom-zn.tileID.overscaledZ);bl(kn,jr,Mr,Cr,t.symbolSize,Pr,pa,fn.posMatrix,wa,Dn,ua)}}}}(ve,$,q,ne,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),Se),q.paint.get("icon-opacity").constantOr(1)!==0&&yu($,ne,q,ve,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),Oe,Ye),q.paint.get("text-opacity").constantOr(1)!==0&&yu($,ne,q,ve,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),Oe,Ye),ne.map.showCollisionBoxes&&(Du($,ne,q,ve,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),!0),Du($,ne,q,ve,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),!1))}},circle:function($,ne,q,ve){if($.renderPass==="translucent"){var Se=q.paint.get("circle-opacity"),Oe=q.paint.get("circle-stroke-width"),Ye=q.paint.get("circle-stroke-opacity"),ut=q.layout.get("circle-sort-key").constantOr(1)!==void 0;if(Se.constantOr(1)!==0||Oe.constantOr(1)!==0&&Ye.constantOr(1)!==0){for(var bt=$.context,jt=bt.gl,sr=$.depthModeForSublayer(0,et.ReadOnly),pr=Me.disabled,br=$.colorModeForRenderPass(),Cr=[],Pr=0;Pr<ve.length;Pr++){var jr=ve[Pr],Mr=ne.getTile(jr),Ur=Mr.getBucket(q);if(Ur){var Jr=Ur.programConfigurations.get(q.id),fn={programConfiguration:Jr,program:$.useProgram("circle",Jr),layoutVertexBuffer:Ur.layoutVertexBuffer,indexBuffer:Ur.indexBuffer,uniformValues:Pu($,jr,Mr,q)};if(ut)for(var zn=0,kn=Ur.segments.get();zn<kn.length;zn+=1){var Dn=kn[zn];Cr.push({segments:new t.SegmentVector([Dn]),sortKey:Dn.sortKey,state:fn})}else Cr.push({segments:Ur.segments,sortKey:0,state:fn})}}ut&&Cr.sort(function(Da,oi){return Da.sortKey-oi.sortKey});for(var qn=0,pa=Cr;qn<pa.length;qn+=1){var ua=pa[qn],wa=ua.state;wa.program.draw(bt,jt.TRIANGLES,sr,pr,br,He.disabled,wa.uniformValues,q.id,wa.layoutVertexBuffer,wa.indexBuffer,ua.segments,q.paint,$.transform.zoom,wa.programConfiguration)}}}},heatmap:function($,ne,q,ve){if(q.paint.get("heatmap-opacity")!==0)if($.renderPass==="offscreen"){var Se=$.context,Oe=Se.gl,Ye=Me.disabled,ut=new Ie([Oe.ONE,Oe.ONE],t.Color.transparent,[!0,!0,!0,!0]);(function(Cr,Pr,jr){var Mr=Cr.gl;Cr.activeTexture.set(Mr.TEXTURE1),Cr.viewport.set([0,0,Pr.width/4,Pr.height/4]);var Ur=jr.heatmapFbo;if(Ur)Mr.bindTexture(Mr.TEXTURE_2D,Ur.colorAttachment.get()),Cr.bindFramebuffer.set(Ur.framebuffer);else{var Jr=Mr.createTexture();Mr.bindTexture(Mr.TEXTURE_2D,Jr),Mr.texParameteri(Mr.TEXTURE_2D,Mr.TEXTURE_WRAP_S,Mr.CLAMP_TO_EDGE),Mr.texParameteri(Mr.TEXTURE_2D,Mr.TEXTURE_WRAP_T,Mr.CLAMP_TO_EDGE),Mr.texParameteri(Mr.TEXTURE_2D,Mr.TEXTURE_MIN_FILTER,Mr.LINEAR),Mr.texParameteri(Mr.TEXTURE_2D,Mr.TEXTURE_MAG_FILTER,Mr.LINEAR),Ur=jr.heatmapFbo=Cr.createFramebuffer(Pr.width/4,Pr.height/4,!1),function(fn,zn,kn,Dn){var qn=fn.gl;qn.texImage2D(qn.TEXTURE_2D,0,qn.RGBA,zn.width/4,zn.height/4,0,qn.RGBA,fn.extRenderToTextureHalfFloat?fn.extTextureHalfFloat.HALF_FLOAT_OES:qn.UNSIGNED_BYTE,null),Dn.colorAttachment.set(kn)}(Cr,Pr,Jr,Ur)}})(Se,$,q),Se.clear({color:t.Color.transparent});for(var bt=0;bt<ve.length;bt++){var jt=ve[bt];if(!ne.hasRenderableParent(jt)){var sr=ne.getTile(jt),pr=sr.getBucket(q);if(pr){var br=pr.programConfigurations.get(q.id);$.useProgram("heatmap",br).draw(Se,Oe.TRIANGLES,et.disabled,Ye,ut,He.disabled,eo(jt.posMatrix,sr,$.transform.zoom,q.paint.get("heatmap-intensity")),q.id,pr.layoutVertexBuffer,pr.indexBuffer,pr.segments,q.paint,$.transform.zoom,br)}}}Se.viewport.set([0,0,$.width,$.height])}else $.renderPass==="translucent"&&($.context.setColorMode($.colorModeForRenderPass()),function(Cr,Pr){var jr=Cr.context,Mr=jr.gl,Ur=Pr.heatmapFbo;if(Ur){jr.activeTexture.set(Mr.TEXTURE0),Mr.bindTexture(Mr.TEXTURE_2D,Ur.colorAttachment.get()),jr.activeTexture.set(Mr.TEXTURE1);var Jr=Pr.colorRampTexture;Jr||(Jr=Pr.colorRampTexture=new t.Texture(jr,Pr.colorRamp,Mr.RGBA)),Jr.bind(Mr.LINEAR,Mr.CLAMP_TO_EDGE),Cr.useProgram("heatmapTexture").draw(jr,Mr.TRIANGLES,et.disabled,Me.disabled,Cr.colorModeForRenderPass(),He.disabled,function(fn,zn,kn,Dn){var qn=t.create();t.ortho(qn,0,fn.width,fn.height,0,0,1);var pa=fn.context.gl;return{u_matrix:qn,u_world:[pa.drawingBufferWidth,pa.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:zn.paint.get("heatmap-opacity")}}(Cr,Pr),Pr.id,Cr.viewportBuffer,Cr.quadTriangleIndexBuffer,Cr.viewportSegments,Pr.paint,Cr.transform.zoom)}}($,q))},line:function($,ne,q,ve){if($.renderPass==="translucent"){var Se=q.paint.get("line-opacity"),Oe=q.paint.get("line-width");if(Se.constantOr(1)!==0&&Oe.constantOr(1)!==0){var Ye=$.depthModeForSublayer(0,et.ReadOnly),ut=$.colorModeForRenderPass(),bt=q.paint.get("line-dasharray"),jt=q.paint.get("line-pattern"),sr=jt.constantOr(1),pr=q.paint.get("line-gradient"),br=q.getCrossfadeParameters(),Cr=sr?"linePattern":bt?"lineSDF":pr?"lineGradient":"line",Pr=$.context,jr=Pr.gl,Mr=!0;if(pr){Pr.activeTexture.set(jr.TEXTURE0);var Ur=q.gradientTexture;if(!q.gradient)return;Ur||(Ur=q.gradientTexture=new t.Texture(Pr,q.gradient,jr.RGBA)),Ur.bind(jr.LINEAR,jr.CLAMP_TO_EDGE)}for(var Jr=0,fn=ve;Jr<fn.length;Jr+=1){var zn=fn[Jr],kn=ne.getTile(zn);if(!sr||kn.patternsLoaded()){var Dn=kn.getBucket(q);if(Dn){var qn=Dn.programConfigurations.get(q.id),pa=$.context.program.get(),ua=$.useProgram(Cr,qn),wa=Mr||ua.program!==pa,Da=jt.constantOr(null);if(Da&&kn.imageAtlas){var oi=kn.imageAtlas,qa=oi.patternPositions[Da.to.toString()],Fi=oi.patternPositions[Da.from.toString()];qa&&Fi&&qn.setConstantPatternPositions(qa,Fi)}var Ua=sr?vu($,kn,q,br):bt?Ds($,kn,q,bt,br):pr?qc($,kn,q):$s($,kn,q);sr?(Pr.activeTexture.set(jr.TEXTURE0),kn.imageAtlasTexture.bind(jr.LINEAR,jr.CLAMP_TO_EDGE),qn.updatePaintBuffers(br)):bt&&(wa||$.lineAtlas.dirty)&&(Pr.activeTexture.set(jr.TEXTURE0),$.lineAtlas.bind(Pr)),ua.draw(Pr,jr.TRIANGLES,Ye,$.stencilModeForClipping(zn),ut,He.disabled,Ua,q.id,Dn.layoutVertexBuffer,Dn.indexBuffer,Dn.segments,q.paint,$.transform.zoom,qn),Mr=!1}}}}}},fill:function($,ne,q,ve){var Se=q.paint.get("fill-color"),Oe=q.paint.get("fill-opacity");if(Oe.constantOr(1)!==0){var Ye=$.colorModeForRenderPass(),ut=q.paint.get("fill-pattern"),bt=$.opaquePassEnabledForLayer()&&!ut.constantOr(1)&&Se.constantOr(t.Color.transparent).a===1&&Oe.constantOr(0)===1?"opaque":"translucent";if($.renderPass===bt){var jt=$.depthModeForSublayer(1,$.renderPass==="opaque"?et.ReadWrite:et.ReadOnly);dc($,ne,q,ve,jt,Ye,!1)}if($.renderPass==="translucent"&&q.paint.get("fill-antialias")){var sr=$.depthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,et.ReadOnly);dc($,ne,q,ve,sr,Ye,!0)}}},"fill-extrusion":function($,ne,q,ve){var Se=q.paint.get("fill-extrusion-opacity");if(Se!==0&&$.renderPass==="translucent"){var Oe=new et($.context.gl.LEQUAL,et.ReadWrite,$.depthRangeFor3D);if(Se!==1||q.paint.get("fill-extrusion-pattern").constantOr(1))tu($,ne,q,ve,Oe,Me.disabled,Ie.disabled),tu($,ne,q,ve,Oe,$.stencilModeFor3D(),$.colorModeForRenderPass());else{var Ye=$.colorModeForRenderPass();tu($,ne,q,ve,Oe,Me.disabled,Ye)}}},hillshade:function($,ne,q,ve){if($.renderPass==="offscreen"||$.renderPass==="translucent"){for(var Se=$.context,Oe=ne.getSource().maxzoom,Ye=$.depthModeForSublayer(0,et.ReadOnly),ut=$.colorModeForRenderPass(),bt=$.renderPass==="translucent"?$.stencilConfigForOverlap(ve):[{},ve],jt=bt[0],sr=0,pr=bt[1];sr<pr.length;sr+=1){var br=pr[sr],Cr=ne.getTile(br);Cr.needsHillshadePrepare&&$.renderPass==="offscreen"?tf($,Cr,q,Oe,Ye,Me.disabled,ut):$.renderPass==="translucent"&&ds($,Cr,q,Ye,jt[br.overscaledZ],ut)}Se.viewport.set([0,0,$.width,$.height])}},raster:function($,ne,q,ve){if($.renderPass==="translucent"&&q.paint.get("raster-opacity")!==0&&ve.length)for(var Se=$.context,Oe=Se.gl,Ye=ne.getSource(),ut=$.useProgram("raster"),bt=$.colorModeForRenderPass(),jt=Ye instanceof j?[{},ve]:$.stencilConfigForOverlap(ve),sr=jt[0],pr=jt[1],br=pr[pr.length-1].overscaledZ,Cr=!$.options.moving,Pr=0,jr=pr;Pr<jr.length;Pr+=1){var Mr=jr[Pr],Ur=$.depthModeForSublayer(Mr.overscaledZ-br,q.paint.get("raster-opacity")===1?et.ReadWrite:et.ReadOnly,Oe.LESS),Jr=ne.getTile(Mr),fn=$.transform.calculatePosMatrix(Mr.toUnwrapped(),Cr);Jr.registerFadeDuration(q.paint.get("raster-fade-duration"));var zn=ne.findLoadedParent(Mr,0),kn=Of(Jr,zn,ne,q,$.transform),Dn=void 0,qn=void 0,pa=q.paint.get("raster-resampling")==="nearest"?Oe.NEAREST:Oe.LINEAR;Se.activeTexture.set(Oe.TEXTURE0),Jr.texture.bind(pa,Oe.CLAMP_TO_EDGE,Oe.LINEAR_MIPMAP_NEAREST),Se.activeTexture.set(Oe.TEXTURE1),zn?(zn.texture.bind(pa,Oe.CLAMP_TO_EDGE,Oe.LINEAR_MIPMAP_NEAREST),Dn=Math.pow(2,zn.tileID.overscaledZ-Jr.tileID.overscaledZ),qn=[Jr.tileID.canonical.x*Dn%1,Jr.tileID.canonical.y*Dn%1]):Jr.texture.bind(pa,Oe.CLAMP_TO_EDGE,Oe.LINEAR_MIPMAP_NEAREST);var ua=xl(fn,qn||[0,0],Dn||1,kn,q);Ye instanceof j?ut.draw(Se,Oe.TRIANGLES,Ur,Me.disabled,bt,He.disabled,ua,q.id,Ye.boundsBuffer,$.quadTriangleIndexBuffer,Ye.boundsSegments):ut.draw(Se,Oe.TRIANGLES,Ur,sr[Mr.overscaledZ],bt,He.disabled,ua,q.id,$.rasterBoundsBuffer,$.quadTriangleIndexBuffer,$.rasterBoundsSegments)}},background:function($,ne,q){var ve=q.paint.get("background-color"),Se=q.paint.get("background-opacity");if(Se!==0){var Oe=$.context,Ye=Oe.gl,ut=$.transform,bt=ut.tileSize,jt=q.paint.get("background-pattern");if(!$.isPatternMissing(jt)){var sr=!jt&&ve.a===1&&Se===1&&$.opaquePassEnabledForLayer()?"opaque":"translucent";if($.renderPass===sr){var pr=Me.disabled,br=$.depthModeForSublayer(0,sr==="opaque"?et.ReadWrite:et.ReadOnly),Cr=$.colorModeForRenderPass(),Pr=$.useProgram(jt?"backgroundPattern":"background"),jr=ut.coveringTiles({tileSize:bt});jt&&(Oe.activeTexture.set(Ye.TEXTURE0),$.imageManager.bind($.context));for(var Mr=q.getCrossfadeParameters(),Ur=0,Jr=jr;Ur<Jr.length;Ur+=1){var fn=Jr[Ur],zn=$.transform.calculatePosMatrix(fn.toUnwrapped()),kn=jt?ps(zn,Se,$,jt,{tileID:fn,tileSize:bt},Mr):Ru(zn,Se,ve);Pr.draw(Oe,Ye.TRIANGLES,br,pr,Cr,He.disabled,kn,q.id,$.tileExtentBuffer,$.quadTriangleIndexBuffer,$.tileExtentSegments)}}}}},debug:function($,ne,q){for(var ve=0;ve<q.length;ve++)Ut($,ne,q[ve])},custom:function($,ne,q){var ve=$.context,Se=q.implementation;if($.renderPass==="offscreen"){var Oe=Se.prerender;Oe&&($.setCustomLayerDefaults(),ve.setColorMode($.colorModeForRenderPass()),Oe.call(Se,ve.gl,$.transform.customLayerMatrix()),ve.setDirty(),$.setBaseState())}else if($.renderPass==="translucent"){$.setCustomLayerDefaults(),ve.setColorMode($.colorModeForRenderPass()),ve.setStencilMode(Me.disabled);var Ye=Se.renderingMode==="3d"?new et($.context.gl.LEQUAL,et.ReadWrite,$.depthRangeFor3D):$.depthModeForSublayer(0,et.ReadOnly);ve.setDepthMode(Ye),Se.render(ve.gl,$.transform.customLayerMatrix()),ve.setDirty(),$.setBaseState(),ve.bindFramebuffer.set(null)}}},ar=function($,ne){this.context=new Xe($),this.transform=ne,this._tileTextures={},this.setup(),this.numSublayers=ht.maxUnderzooming+ht.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Za,this.gpuTimers={}};ar.prototype.resize=function($,ne){if(this.width=$*t.browser.devicePixelRatio,this.height=ne*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var q=0,ve=this.style._order;q<ve.length;q+=1)this.style._layers[ve[q]].resize()},ar.prototype.setup=function(){var $=this.context,ne=new t.StructArrayLayout2i4;ne.emplaceBack(0,0),ne.emplaceBack(t.EXTENT,0),ne.emplaceBack(0,t.EXTENT),ne.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=$.createVertexBuffer(ne,nn.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var q=new t.StructArrayLayout2i4;q.emplaceBack(0,0),q.emplaceBack(t.EXTENT,0),q.emplaceBack(0,t.EXTENT),q.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=$.createVertexBuffer(q,nn.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var ve=new t.StructArrayLayout4i8;ve.emplaceBack(0,0,0,0),ve.emplaceBack(t.EXTENT,0,t.EXTENT,0),ve.emplaceBack(0,t.EXTENT,0,t.EXTENT),ve.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=$.createVertexBuffer(ve,B.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Se=new t.StructArrayLayout2i4;Se.emplaceBack(0,0),Se.emplaceBack(1,0),Se.emplaceBack(0,1),Se.emplaceBack(1,1),this.viewportBuffer=$.createVertexBuffer(Se,nn.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Oe=new t.StructArrayLayout1ui2;Oe.emplaceBack(0),Oe.emplaceBack(1),Oe.emplaceBack(3),Oe.emplaceBack(2),Oe.emplaceBack(0),this.tileBorderIndexBuffer=$.createIndexBuffer(Oe);var Ye=new t.StructArrayLayout3ui6;Ye.emplaceBack(0,1,2),Ye.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=$.createIndexBuffer(Ye),this.emptyTexture=new t.Texture($,{width:1,height:1,data:new Uint8Array([0,0,0,0])},$.gl.RGBA);var ut=this.context.gl;this.stencilClearMode=new Me({func:ut.ALWAYS,mask:0},0,255,ut.ZERO,ut.ZERO,ut.ZERO)},ar.prototype.clearStencil=function(){var $=this.context,ne=$.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var q=t.create();t.ortho(q,0,this.width,this.height,0,0,1),t.scale(q,q,[ne.drawingBufferWidth,ne.drawingBufferHeight,0]),this.useProgram("clippingMask").draw($,ne.TRIANGLES,et.disabled,this.stencilClearMode,Ie.disabled,He.disabled,tc(q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ar.prototype._renderTileClippingMasks=function($,ne){if(this.currentStencilSource!==$.source&&$.isTileClipped()&&ne&&ne.length){this.currentStencilSource=$.source;var q=this.context,ve=q.gl;this.nextStencilID+ne.length>256&&this.clearStencil(),q.setColorMode(Ie.disabled),q.setDepthMode(et.disabled);var Se=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Oe=0,Ye=ne;Oe<Ye.length;Oe+=1){var ut=Ye[Oe],bt=this._tileClippingMaskIDs[ut.key]=this.nextStencilID++;Se.draw(q,ve.TRIANGLES,et.disabled,new Me({func:ve.ALWAYS,mask:0},bt,255,ve.KEEP,ve.KEEP,ve.REPLACE),Ie.disabled,He.disabled,tc(ut.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ar.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var $=this.nextStencilID++,ne=this.context.gl;return new Me({func:ne.NOTEQUAL,mask:255},$,255,ne.KEEP,ne.KEEP,ne.REPLACE)},ar.prototype.stencilModeForClipping=function($){var ne=this.context.gl;return new Me({func:ne.EQUAL,mask:255},this._tileClippingMaskIDs[$.key],0,ne.KEEP,ne.KEEP,ne.REPLACE)},ar.prototype.stencilConfigForOverlap=function($){var ne,q=this.context.gl,ve=$.sort(function(bt,jt){return jt.overscaledZ-bt.overscaledZ}),Se=ve[ve.length-1].overscaledZ,Oe=ve[0].overscaledZ-Se+1;if(Oe>1){this.currentStencilSource=void 0,this.nextStencilID+Oe>256&&this.clearStencil();for(var Ye={},ut=0;ut<Oe;ut++)Ye[ut+Se]=new Me({func:q.GEQUAL,mask:255},ut+this.nextStencilID,255,q.KEEP,q.KEEP,q.REPLACE);return this.nextStencilID+=Oe,[Ye,ve]}return[(ne={},ne[Se]=Me.disabled,ne),ve]},ar.prototype.colorModeForRenderPass=function(){var $=this.context.gl;return this._showOverdrawInspector?new Ie([$.CONSTANT_COLOR,$.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ie.unblended:Ie.alphaBlended},ar.prototype.depthModeForSublayer=function($,ne,q){if(!this.opaquePassEnabledForLayer())return et.disabled;var ve=1-((1+this.currentLayer)*this.numSublayers+$)*this.depthEpsilon;return new et(q||this.context.gl.LEQUAL,ne,[ve,ve])},ar.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ar.prototype.render=function($,ne){var q=this;this.style=$,this.options=ne,this.lineAtlas=$.lineAtlas,this.imageManager=$.imageManager,this.glyphManager=$.glyphManager,this.symbolFadeChange=$.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var ve=this.style._order,Se=this.style.sourceCaches;for(var Oe in Se){var Ye=Se[Oe];Ye.used&&Ye.prepare(this.context)}var ut,bt,jt={},sr={},pr={};for(var br in Se){var Cr=Se[br];jt[br]=Cr.getVisibleCoordinates(),sr[br]=jt[br].slice().reverse(),pr[br]=Cr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Pr=0;Pr<ve.length;Pr++)if(this.style._layers[ve[Pr]].is3D()){this.opaquePassCutoff=Pr;break}this.renderPass="offscreen";for(var jr=0,Mr=ve;jr<Mr.length;jr+=1){var Ur=this.style._layers[Mr[jr]];if(Ur.hasOffscreenPass()&&!Ur.isHidden(this.transform.zoom)){var Jr=sr[Ur.source];(Ur.type==="custom"||Jr.length)&&this.renderLayer(this,Se[Ur.source],Ur,Jr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:ne.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ne.showOverdrawInspector,this.depthRangeFor3D=[0,1-($._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ve.length-1;this.currentLayer>=0;this.currentLayer--){var fn=this.style._layers[ve[this.currentLayer]],zn=Se[fn.source],kn=jt[fn.source];this._renderTileClippingMasks(fn,kn),this.renderLayer(this,zn,fn,kn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ve.length;this.currentLayer++){var Dn=this.style._layers[ve[this.currentLayer]],qn=Se[Dn.source],pa=(Dn.type==="symbol"?pr:sr)[Dn.source];this._renderTileClippingMasks(Dn,jt[Dn.source]),this.renderLayer(this,qn,Dn,pa)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach(function(ua){ua.source&&!ua.isHidden(q.transform.zoom)&&(ua.source!==(bt&&bt.id)&&(bt=q.style.sourceCaches[ua.source]),(!ut||ut.getSource().maxzoom<bt.getSource().maxzoom)&&(ut=bt))}),ut&&tr.debug(this,ut,ut.getVisibleCoordinates())),this.options.showPadding&&function(ua){var wa=ua.transform.padding;ct(ua,ua.transform.height-(wa.top||0),3,rc),ct(ua,wa.bottom||0,3,Dc),yt(ua,wa.left||0,3,at),yt(ua,ua.transform.width-(wa.right||0),3,Qe);var Da=ua.transform.centerPoint;(function(oi,qa,Fi,Ua){Ct(oi,qa-1,Fi-10,2,20,Ua),Ct(oi,qa-10,Fi-1,20,2,Ua)})(ua,Da.x,ua.transform.height-Da.y,gt)}(this),this.context.setDefault()},ar.prototype.renderLayer=function($,ne,q,ve){q.isHidden(this.transform.zoom)||(q.type==="background"||q.type==="custom"||ve.length)&&(this.id=q.id,this.gpuTimingStart(q),tr[q.type]($,ne,q,ve,this.style.placement.variableOffsets),this.gpuTimingEnd())},ar.prototype.gpuTimingStart=function($){if(this.options.gpuTiming){var ne=this.context.extTimerQuery,q=this.gpuTimers[$.id];q||(q=this.gpuTimers[$.id]={calls:0,cpuTime:0,query:ne.createQueryEXT()}),q.calls++,ne.beginQueryEXT(ne.TIME_ELAPSED_EXT,q.query)}},ar.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var $=this.context.extTimerQuery;$.endQueryEXT($.TIME_ELAPSED_EXT)}},ar.prototype.collectGpuTimers=function(){var $=this.gpuTimers;return this.gpuTimers={},$},ar.prototype.queryGpuTimers=function($){var ne={};for(var q in $){var ve=$[q],Se=this.context.extTimerQuery,Oe=Se.getQueryObjectEXT(ve.query,Se.QUERY_RESULT_EXT)/1e6;Se.deleteQueryEXT(ve.query),ne[q]=Oe}return ne},ar.prototype.translatePosMatrix=function($,ne,q,ve,Se){if(!q[0]&&!q[1])return $;var Oe=Se?ve==="map"?this.transform.angle:0:ve==="viewport"?-this.transform.angle:0;if(Oe){var Ye=Math.sin(Oe),ut=Math.cos(Oe);q=[q[0]*ut-q[1]*Ye,q[0]*Ye+q[1]*ut]}var bt=[Se?q[0]:wn(ne,q[0],this.transform.zoom),Se?q[1]:wn(ne,q[1],this.transform.zoom),0],jt=new Float32Array(16);return t.translate(jt,$,bt),jt},ar.prototype.saveTileTexture=function($){var ne=this._tileTextures[$.size[0]];ne?ne.push($):this._tileTextures[$.size[0]]=[$]},ar.prototype.getTileTexture=function($){var ne=this._tileTextures[$];return ne&&ne.length>0?ne.pop():null},ar.prototype.isPatternMissing=function($){if(!$)return!1;if(!$.from||!$.to)return!0;var ne=this.imageManager.getPattern($.from.toString()),q=this.imageManager.getPattern($.to.toString());return!ne||!q},ar.prototype.useProgram=function($,ne){this.cache=this.cache||{};var q=""+$+(ne?ne.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[q]||(this.cache[q]=new zf(this.context,uh[$],ne,pl[$],this._showOverdrawInspector)),this.cache[q]},ar.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ar.prototype.setBaseState=function(){var $=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set($.FUNC_ADD)},ar.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ar.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var fr=function($,ne){this.points=$,this.planes=ne};fr.fromInvProjectionMatrix=function($,ne,q){var ve=Math.pow(2,q),Se=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Ye){return t.transformMat4([],Ye,$)}).map(function(Ye){return t.scale$1([],Ye,1/Ye[3]/ne*ve)}),Oe=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Ye){var ut=t.sub([],Se[Ye[0]],Se[Ye[1]]),bt=t.sub([],Se[Ye[2]],Se[Ye[1]]),jt=t.normalize([],t.cross([],ut,bt)),sr=-t.dot(jt,Se[Ye[1]]);return jt.concat(sr)});return new fr(Se,Oe)};var vr=function($,ne){this.min=$,this.max=ne,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};vr.prototype.quadrant=function($){for(var ne=[$%2==0,$<2],q=t.clone$2(this.min),ve=t.clone$2(this.max),Se=0;Se<ne.length;Se++)q[Se]=ne[Se]?this.min[Se]:this.center[Se],ve[Se]=ne[Se]?this.center[Se]:this.max[Se];return ve[2]=this.max[2],new vr(q,ve)},vr.prototype.distanceX=function($){return Math.max(Math.min(this.max[0],$[0]),this.min[0])-$[0]},vr.prototype.distanceY=function($){return Math.max(Math.min(this.max[1],$[1]),this.min[1])-$[1]},vr.prototype.intersects=function($){for(var ne=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],q=!0,ve=0;ve<$.planes.length;ve++){for(var Se=$.planes[ve],Oe=0,Ye=0;Ye<ne.length;Ye++)Oe+=t.dot$1(Se,ne[Ye])>=0;if(Oe===0)return 0;Oe!==ne.length&&(q=!1)}if(q)return 2;for(var ut=0;ut<3;ut++){for(var bt=Number.MAX_VALUE,jt=-Number.MAX_VALUE,sr=0;sr<$.points.length;sr++){var pr=$.points[sr][ut]-this.min[ut];bt=Math.min(bt,pr),jt=Math.max(jt,pr)}if(jt<0||bt>this.max[ut]-this.min[ut])return 0}return 1};var Fr=function($,ne,q,ve){if($===void 0&&($=0),ne===void 0&&(ne=0),q===void 0&&(q=0),ve===void 0&&(ve=0),isNaN($)||$<0||isNaN(ne)||ne<0||isNaN(q)||q<0||isNaN(ve)||ve<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=$,this.bottom=ne,this.left=q,this.right=ve};Fr.prototype.interpolate=function($,ne,q){return ne.top!=null&&$.top!=null&&(this.top=t.number($.top,ne.top,q)),ne.bottom!=null&&$.bottom!=null&&(this.bottom=t.number($.bottom,ne.bottom,q)),ne.left!=null&&$.left!=null&&(this.left=t.number($.left,ne.left,q)),ne.right!=null&&$.right!=null&&(this.right=t.number($.right,ne.right,q)),this},Fr.prototype.getCenter=function($,ne){var q=t.clamp((this.left+$-this.right)/2,0,$),ve=t.clamp((this.top+ne-this.bottom)/2,0,ne);return new t.Point(q,ve)},Fr.prototype.equals=function($){return this.top===$.top&&this.bottom===$.bottom&&this.left===$.left&&this.right===$.right},Fr.prototype.clone=function(){return new Fr(this.top,this.bottom,this.left,this.right)},Fr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var qr=function($,ne,q,ve,Se){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Se===void 0||Se,this._minZoom=$||0,this._maxZoom=ne||22,this._minPitch=q??0,this._maxPitch=ve??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Fr,this._posMatrixCache={},this._alignedPosMatrixCache={}},$r={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};qr.prototype.clone=function(){var $=new qr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return $.tileSize=this.tileSize,$.latRange=this.latRange,$.width=this.width,$.height=this.height,$._center=this._center,$.zoom=this.zoom,$.angle=this.angle,$._fov=this._fov,$._pitch=this._pitch,$._unmodified=this._unmodified,$._edgeInsets=this._edgeInsets.clone(),$._calcMatrices(),$},$r.minZoom.get=function(){return this._minZoom},$r.minZoom.set=function($){this._minZoom!==$&&(this._minZoom=$,this.zoom=Math.max(this.zoom,$))},$r.maxZoom.get=function(){return this._maxZoom},$r.maxZoom.set=function($){this._maxZoom!==$&&(this._maxZoom=$,this.zoom=Math.min(this.zoom,$))},$r.minPitch.get=function(){return this._minPitch},$r.minPitch.set=function($){this._minPitch!==$&&(this._minPitch=$,this.pitch=Math.max(this.pitch,$))},$r.maxPitch.get=function(){return this._maxPitch},$r.maxPitch.set=function($){this._maxPitch!==$&&(this._maxPitch=$,this.pitch=Math.min(this.pitch,$))},$r.renderWorldCopies.get=function(){return this._renderWorldCopies},$r.renderWorldCopies.set=function($){$===void 0?$=!0:$===null&&($=!1),this._renderWorldCopies=$},$r.worldSize.get=function(){return this.tileSize*this.scale},$r.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},$r.size.get=function(){return new t.Point(this.width,this.height)},$r.bearing.get=function(){return-this.angle/Math.PI*180},$r.bearing.set=function($){var ne=-t.wrap($,-180,180)*Math.PI/180;this.angle!==ne&&(this._unmodified=!1,this.angle=ne,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},$r.pitch.get=function(){return this._pitch/Math.PI*180},$r.pitch.set=function($){var ne=t.clamp($,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==ne&&(this._unmodified=!1,this._pitch=ne,this._calcMatrices())},$r.fov.get=function(){return this._fov/Math.PI*180},$r.fov.set=function($){$=Math.max(.01,Math.min(60,$)),this._fov!==$&&(this._unmodified=!1,this._fov=$/180*Math.PI,this._calcMatrices())},$r.zoom.get=function(){return this._zoom},$r.zoom.set=function($){var ne=Math.min(Math.max($,this.minZoom),this.maxZoom);this._zoom!==ne&&(this._unmodified=!1,this._zoom=ne,this.scale=this.zoomScale(ne),this.tileZoom=Math.floor(ne),this.zoomFraction=ne-this.tileZoom,this._constrain(),this._calcMatrices())},$r.center.get=function(){return this._center},$r.center.set=function($){$.lat===this._center.lat&&$.lng===this._center.lng||(this._unmodified=!1,this._center=$,this._constrain(),this._calcMatrices())},$r.padding.get=function(){return this._edgeInsets.toJSON()},$r.padding.set=function($){this._edgeInsets.equals($)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,$,1),this._calcMatrices())},$r.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},qr.prototype.isPaddingEqual=function($){return this._edgeInsets.equals($)},qr.prototype.interpolatePadding=function($,ne,q){this._unmodified=!1,this._edgeInsets.interpolate($,ne,q),this._constrain(),this._calcMatrices()},qr.prototype.coveringZoomLevel=function($){var ne=($.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/$.tileSize));return Math.max(0,ne)},qr.prototype.getVisibleUnwrappedCoordinates=function($){var ne=[new t.UnwrappedTileID(0,$)];if(this._renderWorldCopies)for(var q=this.pointCoordinate(new t.Point(0,0)),ve=this.pointCoordinate(new t.Point(this.width,0)),Se=this.pointCoordinate(new t.Point(this.width,this.height)),Oe=this.pointCoordinate(new t.Point(0,this.height)),Ye=Math.floor(Math.min(q.x,ve.x,Se.x,Oe.x)),ut=Math.floor(Math.max(q.x,ve.x,Se.x,Oe.x)),bt=Ye-1;bt<=ut+1;bt++)bt!==0&&ne.push(new t.UnwrappedTileID(bt,$));return ne},qr.prototype.coveringTiles=function($){var ne=this.coveringZoomLevel($),q=ne;if($.minzoom!==void 0&&ne<$.minzoom)return[];$.maxzoom!==void 0&&ne>$.maxzoom&&(ne=$.maxzoom);var ve=t.MercatorCoordinate.fromLngLat(this.center),Se=Math.pow(2,ne),Oe=[Se*ve.x,Se*ve.y,0],Ye=fr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ne),ut=$.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ut=ne);var bt=function(ua){return{aabb:new vr([ua*Se,0,0],[(ua+1)*Se,Se,0]),zoom:0,x:0,y:0,wrap:ua,fullyVisible:!1}},jt=[],sr=[],pr=ne,br=$.reparseOverscaled?q:ne;if(this._renderWorldCopies)for(var Cr=1;Cr<=3;Cr++)jt.push(bt(-Cr)),jt.push(bt(Cr));for(jt.push(bt(0));jt.length>0;){var Pr=jt.pop(),jr=Pr.x,Mr=Pr.y,Ur=Pr.fullyVisible;if(!Ur){var Jr=Pr.aabb.intersects(Ye);if(Jr===0)continue;Ur=Jr===2}var fn=Pr.aabb.distanceX(Oe),zn=Pr.aabb.distanceY(Oe),kn=Math.max(Math.abs(fn),Math.abs(zn));if(Pr.zoom===pr||kn>3+(1<<pr-Pr.zoom)-2&&Pr.zoom>=ut)sr.push({tileID:new t.OverscaledTileID(Pr.zoom===pr?br:Pr.zoom,Pr.wrap,Pr.zoom,jr,Mr),distanceSq:t.sqrLen([Oe[0]-.5-jr,Oe[1]-.5-Mr])});else for(var Dn=0;Dn<4;Dn++){var qn=(jr<<1)+Dn%2,pa=(Mr<<1)+(Dn>>1);jt.push({aabb:Pr.aabb.quadrant(Dn),zoom:Pr.zoom+1,x:qn,y:pa,wrap:Pr.wrap,fullyVisible:Ur})}}return sr.sort(function(ua,wa){return ua.distanceSq-wa.distanceSq}).map(function(ua){return ua.tileID})},qr.prototype.resize=function($,ne){this.width=$,this.height=ne,this.pixelsToGLUnits=[2/$,-2/ne],this._constrain(),this._calcMatrices()},$r.unmodified.get=function(){return this._unmodified},qr.prototype.zoomScale=function($){return Math.pow(2,$)},qr.prototype.scaleZoom=function($){return Math.log($)/Math.LN2},qr.prototype.project=function($){var ne=t.clamp($.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng($.lng)*this.worldSize,t.mercatorYfromLat(ne)*this.worldSize)},qr.prototype.unproject=function($){return new t.MercatorCoordinate($.x/this.worldSize,$.y/this.worldSize).toLngLat()},$r.point.get=function(){return this.project(this.center)},qr.prototype.setLocationAtPoint=function($,ne){var q=this.pointCoordinate(ne),ve=this.pointCoordinate(this.centerPoint),Se=this.locationCoordinate($),Oe=new t.MercatorCoordinate(Se.x-(q.x-ve.x),Se.y-(q.y-ve.y));this.center=this.coordinateLocation(Oe),this._renderWorldCopies&&(this.center=this.center.wrap())},qr.prototype.locationPoint=function($){return this.coordinatePoint(this.locationCoordinate($))},qr.prototype.pointLocation=function($){return this.coordinateLocation(this.pointCoordinate($))},qr.prototype.locationCoordinate=function($){return t.MercatorCoordinate.fromLngLat($)},qr.prototype.coordinateLocation=function($){return $.toLngLat()},qr.prototype.pointCoordinate=function($){var ne=[$.x,$.y,0,1],q=[$.x,$.y,1,1];t.transformMat4(ne,ne,this.pixelMatrixInverse),t.transformMat4(q,q,this.pixelMatrixInverse);var ve=ne[3],Se=q[3],Oe=ne[1]/ve,Ye=q[1]/Se,ut=ne[2]/ve,bt=q[2]/Se,jt=(0-ut)/(bt-ut);return new t.MercatorCoordinate(t.number(ne[0]/ve,q[0]/Se,jt)/this.worldSize,t.number(Oe,Ye,jt)/this.worldSize)},qr.prototype.coordinatePoint=function($){var ne=[$.x*this.worldSize,$.y*this.worldSize,0,1];return t.transformMat4(ne,ne,this.pixelMatrix),new t.Point(ne[0]/ne[3],ne[1]/ne[3])},qr.prototype.getBounds=function(){return new t.LngLatBounds().extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},qr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},qr.prototype.setMaxBounds=function($){$?(this.lngRange=[$.getWest(),$.getEast()],this.latRange=[$.getSouth(),$.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},qr.prototype.calculatePosMatrix=function($,ne){ne===void 0&&(ne=!1);var q=$.key,ve=ne?this._alignedPosMatrixCache:this._posMatrixCache;if(ve[q])return ve[q];var Se=$.canonical,Oe=this.worldSize/this.zoomScale(Se.z),Ye=Se.x+Math.pow(2,Se.z)*$.wrap,ut=t.identity(new Float64Array(16));return t.translate(ut,ut,[Ye*Oe,Se.y*Oe,0]),t.scale(ut,ut,[Oe/t.EXTENT,Oe/t.EXTENT,1]),t.multiply(ut,ne?this.alignedProjMatrix:this.projMatrix,ut),ve[q]=new Float32Array(ut),ve[q]},qr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},qr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var $,ne,q,ve,Se=-90,Oe=90,Ye=-180,ut=180,bt=this.size,jt=this._unmodified;if(this.latRange){var sr=this.latRange;Se=t.mercatorYfromLat(sr[1])*this.worldSize,$=(Oe=t.mercatorYfromLat(sr[0])*this.worldSize)-Se<bt.y?bt.y/(Oe-Se):0}if(this.lngRange){var pr=this.lngRange;Ye=t.mercatorXfromLng(pr[0])*this.worldSize,ne=(ut=t.mercatorXfromLng(pr[1])*this.worldSize)-Ye<bt.x?bt.x/(ut-Ye):0}var br=this.point,Cr=Math.max(ne||0,$||0);if(Cr)return this.center=this.unproject(new t.Point(ne?(ut+Ye)/2:br.x,$?(Oe+Se)/2:br.y)),this.zoom+=this.scaleZoom(Cr),this._unmodified=jt,void(this._constraining=!1);if(this.latRange){var Pr=br.y,jr=bt.y/2;Pr-jr<Se&&(ve=Se+jr),Pr+jr>Oe&&(ve=Oe-jr)}if(this.lngRange){var Mr=br.x,Ur=bt.x/2;Mr-Ur<Ye&&(q=Ye+Ur),Mr+Ur>ut&&(q=ut-Ur)}q===void 0&&ve===void 0||(this.center=this.unproject(new t.Point(q!==void 0?q:br.x,ve!==void 0?ve:br.y))),this._unmodified=jt,this._constraining=!1}},qr.prototype._calcMatrices=function(){if(this.height){var $=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var ne=Math.PI/2+this._pitch,q=this._fov*(.5+$.y/this.height),ve=Math.sin(q)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-ne-q,.01,Math.PI-.01)),Se=this.point,Oe=Se.x,Ye=Se.y,ut=1.01*(Math.cos(Math.PI/2-this._pitch)*ve+this.cameraToCenterDistance),bt=this.height/50,jt=new Float64Array(16);t.perspective(jt,this._fov,this.width/this.height,bt,ut),jt[8]=2*-$.x/this.width,jt[9]=2*$.y/this.height,t.scale(jt,jt,[1,-1,1]),t.translate(jt,jt,[0,0,-this.cameraToCenterDistance]),t.rotateX(jt,jt,this._pitch),t.rotateZ(jt,jt,this.angle),t.translate(jt,jt,[-Oe,-Ye,0]),this.mercatorMatrix=t.scale([],jt,[this.worldSize,this.worldSize,this.worldSize]),t.scale(jt,jt,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=jt,this.invProjMatrix=t.invert([],this.projMatrix);var sr=this.width%2/2,pr=this.height%2/2,br=Math.cos(this.angle),Cr=Math.sin(this.angle),Pr=Oe-Math.round(Oe)+br*sr+Cr*pr,jr=Ye-Math.round(Ye)+br*pr+Cr*sr,Mr=new Float64Array(jt);if(t.translate(Mr,Mr,[Pr>.5?Pr-1:Pr,jr>.5?jr-1:jr,0]),this.alignedProjMatrix=Mr,jt=t.create(),t.scale(jt,jt,[this.width/2,-this.height/2,1]),t.translate(jt,jt,[1,-1,0]),this.labelPlaneMatrix=jt,jt=t.create(),t.scale(jt,jt,[1,-1,1]),t.translate(jt,jt,[-1,-1,0]),t.scale(jt,jt,[2/this.width,2/this.height,1]),this.glCoordMatrix=jt,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(jt=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=jt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},qr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var $=this.pointCoordinate(new t.Point(0,0)),ne=[$.x*this.worldSize,$.y*this.worldSize,0,1];return t.transformMat4(ne,ne,this.pixelMatrix)[3]/this.cameraToCenterDistance},qr.prototype.getCameraPoint=function(){var $=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,$))},qr.prototype.getCameraQueryGeometry=function($){var ne=this.getCameraPoint();if($.length===1)return[$[0],ne];for(var q=ne.x,ve=ne.y,Se=ne.x,Oe=ne.y,Ye=0,ut=$;Ye<ut.length;Ye+=1){var bt=ut[Ye];q=Math.min(q,bt.x),ve=Math.min(ve,bt.y),Se=Math.max(Se,bt.x),Oe=Math.max(Oe,bt.y)}return[new t.Point(q,ve),new t.Point(Se,ve),new t.Point(Se,Oe),new t.Point(q,Oe),new t.Point(q,ve)]},Object.defineProperties(qr.prototype,$r);var Nn=function($){var ne,q,ve,Se;this._hashName=$&&encodeURIComponent($),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(ne=this._updateHashUnthrottled.bind(this),q=!1,ve=null,Se=function(){ve=null,q&&(ne(),ve=setTimeout(Se,300),q=!1)},function(){return q=!0,ve||Se(),ve})};Nn.prototype.addTo=function($){return this._map=$,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Nn.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Nn.prototype.getHashString=function($){var ne=this._map.getCenter(),q=Math.round(100*this._map.getZoom())/100,ve=Math.ceil((q*Math.LN2+Math.log(512/360/.5))/Math.LN10),Se=Math.pow(10,ve),Oe=Math.round(ne.lng*Se)/Se,Ye=Math.round(ne.lat*Se)/Se,ut=this._map.getBearing(),bt=this._map.getPitch(),jt="";if(jt+=$?"/"+Oe+"/"+Ye+"/"+q:q+"/"+Ye+"/"+Oe,(ut||bt)&&(jt+="/"+Math.round(10*ut)/10),bt&&(jt+="/"+Math.round(bt)),this._hashName){var sr=this._hashName,pr=!1,br=t.window.location.hash.slice(1).split("&").map(function(Cr){var Pr=Cr.split("=")[0];return Pr===sr?(pr=!0,Pr+"="+jt):Cr}).filter(function(Cr){return Cr});return pr||br.push(sr+"="+jt),"#"+br.join("&")}return"#"+jt},Nn.prototype._getCurrentHash=function(){var $,ne=this,q=t.window.location.hash.replace("#","");return this._hashName?(q.split("&").map(function(ve){return ve.split("=")}).forEach(function(ve){ve[0]===ne._hashName&&($=ve)}),($&&$[1]||"").split("/")):q.split("/")},Nn.prototype._onHashChange=function(){var $=this._getCurrentHash();if($.length>=3&&!$.some(function(q){return isNaN(q)})){var ne=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+($[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+$[2],+$[1]],zoom:+$[0],bearing:ne,pitch:+($[4]||0)}),!0}return!1},Nn.prototype._updateHashUnthrottled=function(){var $=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",$)}catch{}};var ia={linearity:.3,easing:t.bezier(0,0,.3,1)},Pn=t.extend({deceleration:2500,maxSpeed:1400},ia),Wn=t.extend({deceleration:20,maxSpeed:1400},ia),aa=t.extend({deceleration:1e3,maxSpeed:360},ia),Un=t.extend({deceleration:1e3,maxSpeed:90},ia),Jn=function($){this._map=$,this.clear()};function Ia($,ne){(!$.duration||$.duration<ne.duration)&&($.duration=ne.duration,$.easing=ne.easing)}function ti($,ne,q){var ve=q.maxSpeed,Se=q.linearity,Oe=q.deceleration,Ye=t.clamp($*Se/(ne/1e3),-ve,ve),ut=Math.abs(Ye)/(Oe*Se);return{easing:q.easing,duration:1e3*ut,amount:Ye*(ut/2)}}Jn.prototype.clear=function(){this._inertiaBuffer=[]},Jn.prototype.record=function($){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:$})},Jn.prototype._drainInertiaBuffer=function(){for(var $=this._inertiaBuffer,ne=t.browser.now();$.length>0&&ne-$[0].time>160;)$.shift()},Jn.prototype._onMoveEnd=function($){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var ne={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},q=0,ve=this._inertiaBuffer;q<ve.length;q+=1){var Se=ve[q].settings;ne.zoom+=Se.zoomDelta||0,ne.bearing+=Se.bearingDelta||0,ne.pitch+=Se.pitchDelta||0,Se.panDelta&&ne.pan._add(Se.panDelta),Se.around&&(ne.around=Se.around),Se.pinchAround&&(ne.pinchAround=Se.pinchAround)}var Oe=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Ye={};if(ne.pan.mag()){var ut=ti(ne.pan.mag(),Oe,t.extend({},Pn,$||{}));Ye.offset=ne.pan.mult(ut.amount/ne.pan.mag()),Ye.center=this._map.transform.center,Ia(Ye,ut)}if(ne.zoom){var bt=ti(ne.zoom,Oe,Wn);Ye.zoom=this._map.transform.zoom+bt.amount,Ia(Ye,bt)}if(ne.bearing){var jt=ti(ne.bearing,Oe,aa);Ye.bearing=this._map.transform.bearing+t.clamp(jt.amount,-179,179),Ia(Ye,jt)}if(ne.pitch){var sr=ti(ne.pitch,Oe,Un);Ye.pitch=this._map.transform.pitch+sr.amount,Ia(Ye,sr)}if(Ye.zoom||Ye.bearing){var pr=ne.pinchAround===void 0?ne.around:ne.pinchAround;Ye.around=pr?this._map.unproject(pr):this._map.getCenter()}return this.clear(),t.extend(Ye,{noMoveStart:!0})}};var ya=function($){function ne(ve,Se,Oe,Ye){Ye===void 0&&(Ye={});var ut=a.mousePos(Se.getCanvasContainer(),Oe),bt=Se.unproject(ut);$.call(this,ve,t.extend({point:ut,lngLat:bt,originalEvent:Oe},Ye)),this._defaultPrevented=!1,this.target=Se}$&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne;var q={defaultPrevented:{configurable:!0}};return ne.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(ne.prototype,q),ne}(t.Event),Xa=function($){function ne(ve,Se,Oe){var Ye=ve==="touchend"?Oe.changedTouches:Oe.touches,ut=a.touchPos(Se.getCanvasContainer(),Ye),bt=ut.map(function(pr){return Se.unproject(pr)}),jt=ut.reduce(function(pr,br,Cr,Pr){return pr.add(br.div(Pr.length))},new t.Point(0,0)),sr=Se.unproject(jt);$.call(this,ve,{points:ut,point:jt,lngLats:bt,lngLat:sr,originalEvent:Oe}),this._defaultPrevented=!1}$&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne;var q={defaultPrevented:{configurable:!0}};return ne.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(ne.prototype,q),ne}(t.Event),na=function($){function ne(ve,Se,Oe){$.call(this,ve,{originalEvent:Oe}),this._defaultPrevented=!1}$&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne;var q={defaultPrevented:{configurable:!0}};return ne.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(ne.prototype,q),ne}(t.Event),_i=function($,ne){this._map=$,this._clickTolerance=ne.clickTolerance};_i.prototype.reset=function(){delete this._mousedownPos},_i.prototype.wheel=function($){return this._firePreventable(new na($.type,this._map,$))},_i.prototype.mousedown=function($,ne){return this._mousedownPos=ne,this._firePreventable(new ya($.type,this._map,$))},_i.prototype.mouseup=function($){this._map.fire(new ya($.type,this._map,$))},_i.prototype.click=function($,ne){this._mousedownPos&&this._mousedownPos.dist(ne)>=this._clickTolerance||this._map.fire(new ya($.type,this._map,$))},_i.prototype.dblclick=function($){return this._firePreventable(new ya($.type,this._map,$))},_i.prototype.mouseover=function($){this._map.fire(new ya($.type,this._map,$))},_i.prototype.mouseout=function($){this._map.fire(new ya($.type,this._map,$))},_i.prototype.touchstart=function($){return this._firePreventable(new Xa($.type,this._map,$))},_i.prototype.touchmove=function($){this._map.fire(new Xa($.type,this._map,$))},_i.prototype.touchend=function($){this._map.fire(new Xa($.type,this._map,$))},_i.prototype.touchcancel=function($){this._map.fire(new Xa($.type,this._map,$))},_i.prototype._firePreventable=function($){if(this._map.fire($),$.defaultPrevented)return{}},_i.prototype.isEnabled=function(){return!0},_i.prototype.isActive=function(){return!1},_i.prototype.enable=function(){},_i.prototype.disable=function(){};var _a=function($){this._map=$};_a.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},_a.prototype.mousemove=function($){this._map.fire(new ya($.type,this._map,$))},_a.prototype.mousedown=function(){this._delayContextMenu=!0},_a.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ya("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},_a.prototype.contextmenu=function($){this._delayContextMenu?this._contextMenuEvent=$:this._map.fire(new ya($.type,this._map,$)),this._map.listens("contextmenu")&&$.preventDefault()},_a.prototype.isEnabled=function(){return!0},_a.prototype.isActive=function(){return!1},_a.prototype.enable=function(){},_a.prototype.disable=function(){};var Fa=function($,ne){this._map=$,this._el=$.getCanvasContainer(),this._container=$.getContainer(),this._clickTolerance=ne.clickTolerance||1};function ki($,ne){for(var q={},ve=0;ve<$.length;ve++)q[$[ve].identifier]=ne[ve];return q}Fa.prototype.isEnabled=function(){return!!this._enabled},Fa.prototype.isActive=function(){return!!this._active},Fa.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Fa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Fa.prototype.mousedown=function($,ne){this.isEnabled()&&$.shiftKey&&$.button===0&&(a.disableDrag(),this._startPos=this._lastPos=ne,this._active=!0)},Fa.prototype.mousemoveWindow=function($,ne){if(this._active){var q=ne;if(!(this._lastPos.equals(q)||!this._box&&q.dist(this._startPos)<this._clickTolerance)){var ve=this._startPos;this._lastPos=q,this._box||(this._box=a.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",$));var Se=Math.min(ve.x,q.x),Oe=Math.max(ve.x,q.x),Ye=Math.min(ve.y,q.y),ut=Math.max(ve.y,q.y);a.setTransform(this._box,"translate("+Se+"px,"+Ye+"px)"),this._box.style.width=Oe-Se+"px",this._box.style.height=ut-Ye+"px"}}},Fa.prototype.mouseupWindow=function($,ne){var q=this;if(this._active&&$.button===0){var ve=this._startPos,Se=ne;if(this.reset(),a.suppressClick(),ve.x!==Se.x||ve.y!==Se.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:$})),{cameraAnimation:function(Oe){return Oe.fitScreenCoordinates(ve,Se,q._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",$)}},Fa.prototype.keydown=function($){this._active&&$.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",$))},Fa.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos},Fa.prototype._fireEvent=function($,ne){return this._map.fire(new t.Event($,{originalEvent:ne}))};var vi=function($){this.reset(),this.numTouches=$.numTouches};vi.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},vi.prototype.touchstart=function($,ne,q){(this.centroid||q.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=$.timeStamp),q.length===this.numTouches&&(this.centroid=function(ve){for(var Se=new t.Point(0,0),Oe=0,Ye=ve;Oe<Ye.length;Oe+=1)Se._add(Ye[Oe]);return Se.div(ve.length)}(ne),this.touches=ki(q,ne)))},vi.prototype.touchmove=function($,ne,q){if(!this.aborted&&this.centroid){var ve=ki(q,ne);for(var Se in this.touches){var Oe=ve[Se];(!Oe||Oe.dist(this.touches[Se])>30)&&(this.aborted=!0)}}},vi.prototype.touchend=function($,ne,q){if((!this.centroid||$.timeStamp-this.startTime>500)&&(this.aborted=!0),q.length===0){var ve=!this.aborted&&this.centroid;if(this.reset(),ve)return ve}};var xi=function($){this.singleTap=new vi($),this.numTaps=$.numTaps,this.reset()};xi.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},xi.prototype.touchstart=function($,ne,q){this.singleTap.touchstart($,ne,q)},xi.prototype.touchmove=function($,ne,q){this.singleTap.touchmove($,ne,q)},xi.prototype.touchend=function($,ne,q){var ve=this.singleTap.touchend($,ne,q);if(ve){var Se=$.timeStamp-this.lastTime<500,Oe=!this.lastTap||this.lastTap.dist(ve)<30;if(Se&&Oe||this.reset(),this.count++,this.lastTime=$.timeStamp,this.lastTap=ve,this.count===this.numTaps)return this.reset(),ve}};var Zn=function(){this._zoomIn=new xi({numTouches:1,numTaps:2}),this._zoomOut=new xi({numTouches:2,numTaps:1}),this.reset()};Zn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Zn.prototype.touchstart=function($,ne,q){this._zoomIn.touchstart($,ne,q),this._zoomOut.touchstart($,ne,q)},Zn.prototype.touchmove=function($,ne,q){this._zoomIn.touchmove($,ne,q),this._zoomOut.touchmove($,ne,q)},Zn.prototype.touchend=function($,ne,q){var ve=this,Se=this._zoomIn.touchend($,ne,q),Oe=this._zoomOut.touchend($,ne,q);return Se?(this._active=!0,$.preventDefault(),setTimeout(function(){return ve.reset()},0),{cameraAnimation:function(Ye){return Ye.easeTo({duration:300,zoom:Ye.getZoom()+1,around:Ye.unproject(Se)},{originalEvent:$})}}):Oe?(this._active=!0,$.preventDefault(),setTimeout(function(){return ve.reset()},0),{cameraAnimation:function(Ye){return Ye.easeTo({duration:300,zoom:Ye.getZoom()-1,around:Ye.unproject(Oe)},{originalEvent:$})}}):void 0},Zn.prototype.touchcancel=function(){this.reset()},Zn.prototype.enable=function(){this._enabled=!0},Zn.prototype.disable=function(){this._enabled=!1,this.reset()},Zn.prototype.isEnabled=function(){return this._enabled},Zn.prototype.isActive=function(){return this._active};var wi=function($){this.reset(),this._clickTolerance=$.clickTolerance||1};wi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},wi.prototype._correctButton=function($,ne){return!1},wi.prototype._move=function($,ne){return{}},wi.prototype.mousedown=function($,ne){if(!this._lastPoint){var q=a.mouseButton($);this._correctButton($,q)&&(this._lastPoint=ne,this._eventButton=q)}},wi.prototype.mousemoveWindow=function($,ne){var q=this._lastPoint;if(q&&($.preventDefault(),this._moved||!(ne.dist(q)<this._clickTolerance)))return this._moved=!0,this._lastPoint=ne,this._move(q,ne)},wi.prototype.mouseupWindow=function($){a.mouseButton($)===this._eventButton&&(this._moved&&a.suppressClick(),this.reset())},wi.prototype.enable=function(){this._enabled=!0},wi.prototype.disable=function(){this._enabled=!1,this.reset()},wi.prototype.isEnabled=function(){return this._enabled},wi.prototype.isActive=function(){return this._active};var Bi=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.mousedown=function(q,ve){$.prototype.mousedown.call(this,q,ve),this._lastPoint&&(this._active=!0)},ne.prototype._correctButton=function(q,ve){return ve===0&&!q.ctrlKey},ne.prototype._move=function(q,ve){return{around:ve,panDelta:ve.sub(q)}},ne}(wi),li=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype._correctButton=function(q,ve){return ve===0&&q.ctrlKey||ve===2},ne.prototype._move=function(q,ve){var Se=.8*(ve.x-q.x);if(Se)return this._active=!0,{bearingDelta:Se}},ne.prototype.contextmenu=function(q){q.preventDefault()},ne}(wi),Ca=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype._correctButton=function(q,ve){return ve===0&&q.ctrlKey||ve===2},ne.prototype._move=function(q,ve){var Se=-.5*(ve.y-q.y);if(Se)return this._active=!0,{pitchDelta:Se}},ne.prototype.contextmenu=function(q){q.preventDefault()},ne}(wi),to=function($){this._minTouches=1,this._clickTolerance=$.clickTolerance||1,this.reset()};to.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},to.prototype.touchstart=function($,ne,q){return this._calculateTransform($,ne,q)},to.prototype.touchmove=function($,ne,q){if(this._active)return $.preventDefault(),this._calculateTransform($,ne,q)},to.prototype.touchend=function($,ne,q){this._calculateTransform($,ne,q),this._active&&q.length<this._minTouches&&this.reset()},to.prototype.touchcancel=function(){this.reset()},to.prototype._calculateTransform=function($,ne,q){q.length>0&&(this._active=!0);var ve=ki(q,ne),Se=new t.Point(0,0),Oe=new t.Point(0,0),Ye=0;for(var ut in ve){var bt=ve[ut],jt=this._touches[ut];jt&&(Se._add(bt),Oe._add(bt.sub(jt)),Ye++,ve[ut]=bt)}if(this._touches=ve,!(Ye<this._minTouches)&&Oe.mag()){var sr=Oe.div(Ye);if(this._sum._add(sr),!(this._sum.mag()<this._clickTolerance))return{around:Se.div(Ye),panDelta:sr}}},to.prototype.enable=function(){this._enabled=!0},to.prototype.disable=function(){this._enabled=!1,this.reset()},to.prototype.isEnabled=function(){return this._enabled},to.prototype.isActive=function(){return this._active};var ro=function(){this.reset()};function Lo($,ne,q){for(var ve=0;ve<$.length;ve++)if($[ve].identifier===q)return ne[ve]}function Oo($,ne){return Math.log($/ne)/Math.LN2}ro.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ro.prototype._start=function($){},ro.prototype._move=function($,ne,q){return{}},ro.prototype.touchstart=function($,ne,q){this._firstTwoTouches||q.length<2||(this._firstTwoTouches=[q[0].identifier,q[1].identifier],this._start([ne[0],ne[1]]))},ro.prototype.touchmove=function($,ne,q){if(this._firstTwoTouches){$.preventDefault();var ve=this._firstTwoTouches,Se=ve[1],Oe=Lo(q,ne,ve[0]),Ye=Lo(q,ne,Se);if(Oe&&Ye){var ut=this._aroundCenter?null:Oe.add(Ye).div(2);return this._move([Oe,Ye],ut,$)}}},ro.prototype.touchend=function($,ne,q){if(this._firstTwoTouches){var ve=this._firstTwoTouches,Se=ve[1],Oe=Lo(q,ne,ve[0]),Ye=Lo(q,ne,Se);Oe&&Ye||(this._active&&a.suppressClick(),this.reset())}},ro.prototype.touchcancel=function(){this.reset()},ro.prototype.enable=function($){this._enabled=!0,this._aroundCenter=!!$&&$.around==="center"},ro.prototype.disable=function(){this._enabled=!1,this.reset()},ro.prototype.isEnabled=function(){return this._enabled},ro.prototype.isActive=function(){return this._active};var Ji=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.reset=function(){$.prototype.reset.call(this),delete this._distance,delete this._startDistance},ne.prototype._start=function(q){this._startDistance=this._distance=q[0].dist(q[1])},ne.prototype._move=function(q,ve){var Se=this._distance;if(this._distance=q[0].dist(q[1]),this._active||!(Math.abs(Oo(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Oo(this._distance,Se),pinchAround:ve}},ne}(ro);function Zi($,ne){return 180*$.angleWith(ne)/Math.PI}var _o=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.reset=function(){$.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},ne.prototype._start=function(q){this._startVector=this._vector=q[0].sub(q[1]),this._minDiameter=q[0].dist(q[1])},ne.prototype._move=function(q,ve){var Se=this._vector;if(this._vector=q[0].sub(q[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Zi(this._vector,Se),pinchAround:ve}},ne.prototype._isBelowThreshold=function(q){this._minDiameter=Math.min(this._minDiameter,q.mag());var ve=25/(Math.PI*this._minDiameter)*360,Se=Zi(q,this._startVector);return Math.abs(Se)<ve},ne}(ro);function as($){return Math.abs($.y)>Math.abs($.x)}var vs=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.reset=function(){$.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},ne.prototype._start=function(q){this._lastPoints=q,as(q[0].sub(q[1]))&&(this._valid=!1)},ne.prototype._move=function(q,ve,Se){var Oe=q[0].sub(this._lastPoints[0]),Ye=q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Oe,Ye,Se.timeStamp),this._valid)return this._lastPoints=q,this._active=!0,{pitchDelta:(Oe.y+Ye.y)/2*-.5}},ne.prototype.gestureBeginsVertically=function(q,ve,Se){if(this._valid!==void 0)return this._valid;var Oe=q.mag()>=2,Ye=ve.mag()>=2;if(Oe||Ye){if(!Oe||!Ye)return this._firstMove===void 0&&(this._firstMove=Se),Se-this._firstMove<100&&void 0;var ut=q.y>0==ve.y>0;return as(q)&&as(ve)&&ut}},ne}(ro),Js={panStep:100,bearingStep:15,pitchStep:10},xo=function(){var $=Js;this._panStep=$.panStep,this._bearingStep=$.bearingStep,this._pitchStep=$.pitchStep};function ni($){return $*(2-$)}xo.prototype.reset=function(){this._active=!1},xo.prototype.keydown=function($){var ne=this;if(!($.altKey||$.ctrlKey||$.metaKey)){var q=0,ve=0,Se=0,Oe=0,Ye=0;switch($.keyCode){case 61:case 107:case 171:case 187:q=1;break;case 189:case 109:case 173:q=-1;break;case 37:$.shiftKey?ve=-1:($.preventDefault(),Oe=-1);break;case 39:$.shiftKey?ve=1:($.preventDefault(),Oe=1);break;case 38:$.shiftKey?Se=1:($.preventDefault(),Ye=-1);break;case 40:$.shiftKey?Se=-1:($.preventDefault(),Ye=1);break;default:return}return{cameraAnimation:function(ut){var bt=ut.getZoom();ut.easeTo({duration:300,easeId:"keyboardHandler",easing:ni,zoom:q?Math.round(bt)+q*($.shiftKey?2:1):bt,bearing:ut.getBearing()+ve*ne._bearingStep,pitch:ut.getPitch()+Se*ne._pitchStep,offset:[-Oe*ne._panStep,-Ye*ne._panStep],center:ut.getCenter()},{originalEvent:$})}}}},xo.prototype.enable=function(){this._enabled=!0},xo.prototype.disable=function(){this._enabled=!1,this.reset()},xo.prototype.isEnabled=function(){return this._enabled},xo.prototype.isActive=function(){return this._active};var ui=function($,ne){this._map=$,this._el=$.getCanvasContainer(),this._handler=ne,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};ui.prototype.setZoomRate=function($){this._defaultZoomRate=$},ui.prototype.setWheelZoomRate=function($){this._wheelZoomRate=$},ui.prototype.isEnabled=function(){return!!this._enabled},ui.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ui.prototype.isZooming=function(){return!!this._zooming},ui.prototype.enable=function($){this.isEnabled()||(this._enabled=!0,this._aroundCenter=$&&$.around==="center")},ui.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ui.prototype.wheel=function($){if(this.isEnabled()){var ne=$.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*$.deltaY:$.deltaY,q=t.browser.now(),ve=q-(this._lastWheelEventTime||0);this._lastWheelEventTime=q,ne!==0&&ne%4.000244140625==0?this._type="wheel":ne!==0&&Math.abs(ne)<4?this._type="trackpad":ve>400?(this._type=null,this._lastValue=ne,this._timeout=setTimeout(this._onTimeout,40,$)):this._type||(this._type=Math.abs(ve*ne)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ne+=this._lastValue)),$.shiftKey&&ne&&(ne/=4),this._type&&(this._lastWheelEvent=$,this._delta-=ne,this._active||this._start($)),$.preventDefault()}},ui.prototype._onTimeout=function($){this._type="wheel",this._delta-=this._lastValue,this._active||this._start($)},ui.prototype._start=function($){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var ne=a.mousePos(this._el,$);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(ne)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ui.prototype.renderFrame=function(){return this._onScrollFrame()},ui.prototype._onScrollFrame=function(){var $=this;if(this._frameId&&(this._frameId=null,this.isActive())){var ne=this._map.transform;if(this._delta!==0){var q=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,ve=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&ve!==0&&(ve=1/ve);var Se=typeof this._targetZoom=="number"?ne.zoomScale(this._targetZoom):ne.scale;this._targetZoom=Math.min(ne.maxZoom,Math.max(ne.minZoom,ne.scaleZoom(Se*ve))),this._type==="wheel"&&(this._startZoom=ne.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Oe,Ye=typeof this._targetZoom=="number"?this._targetZoom:ne.zoom,ut=this._startZoom,bt=this._easing,jt=!1;if(this._type==="wheel"&&ut&&bt){var sr=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),pr=bt(sr);Oe=t.number(ut,Ye,pr),sr<1?this._frameId||(this._frameId=!0):jt=!0}else Oe=Ye,jt=!0;return this._active=!0,jt&&(this._active=!1,this._finishTimeout=setTimeout(function(){$._zooming=!1,$._handler._triggerRenderFrame(),delete $._targetZoom,delete $._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!jt,zoomDelta:Oe-ne.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ui.prototype._smoothOutEasing=function($){var ne=t.ease;if(this._prevEase){var q=this._prevEase,ve=(t.browser.now()-q.start)/q.duration,Se=q.easing(ve+.01)-q.easing(ve),Oe=.27/Math.sqrt(Se*Se+1e-4)*.01,Ye=Math.sqrt(.0729-Oe*Oe);ne=t.bezier(Oe,Ye,.25,1)}return this._prevEase={start:t.browser.now(),duration:$,easing:ne},ne},ui.prototype.reset=function(){this._active=!1};var Po=function($,ne){this._clickZoom=$,this._tapZoom=ne};Po.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Po.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Po.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Po.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var no=function(){this.reset()};no.prototype.reset=function(){this._active=!1},no.prototype.dblclick=function($,ne){return $.preventDefault(),{cameraAnimation:function(q){q.easeTo({duration:300,zoom:q.getZoom()+($.shiftKey?-1:1),around:q.unproject(ne)},{originalEvent:$})}}},no.prototype.enable=function(){this._enabled=!0},no.prototype.disable=function(){this._enabled=!1,this.reset()},no.prototype.isEnabled=function(){return this._enabled},no.prototype.isActive=function(){return this._active};var Ao=function(){this._tap=new xi({numTouches:1,numTaps:1}),this.reset()};Ao.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ao.prototype.touchstart=function($,ne,q){this._swipePoint||(this._tapTime&&$.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?q.length>0&&(this._swipePoint=ne[0],this._swipeTouch=q[0].identifier):this._tap.touchstart($,ne,q))},Ao.prototype.touchmove=function($,ne,q){if(this._tapTime){if(this._swipePoint){if(q[0].identifier!==this._swipeTouch)return;var ve=ne[0],Se=ve.y-this._swipePoint.y;return this._swipePoint=ve,$.preventDefault(),this._active=!0,{zoomDelta:Se/128}}}else this._tap.touchmove($,ne,q)},Ao.prototype.touchend=function($,ne,q){this._tapTime?this._swipePoint&&q.length===0&&this.reset():this._tap.touchend($,ne,q)&&(this._tapTime=$.timeStamp)},Ao.prototype.touchcancel=function(){this.reset()},Ao.prototype.enable=function(){this._enabled=!0},Ao.prototype.disable=function(){this._enabled=!1,this.reset()},Ao.prototype.isEnabled=function(){return this._enabled},Ao.prototype.isActive=function(){return this._active};var Qo=function($,ne,q){this._el=$,this._mousePan=ne,this._touchPan=q};Qo.prototype.enable=function($){this._inertiaOptions=$||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Qo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Qo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Qo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Gi=function($,ne,q){this._pitchWithRotate=$.pitchWithRotate,this._mouseRotate=ne,this._mousePitch=q};Gi.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Gi.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Gi.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Gi.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ya=function($,ne,q,ve){this._el=$,this._touchZoom=ne,this._touchRotate=q,this._tapDragZoom=ve,this._rotationDisabled=!1,this._enabled=!0};Ya.prototype.enable=function($){this._touchZoom.enable($),this._rotationDisabled||this._touchRotate.enable($),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ya.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ya.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ya.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ya.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ya.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var is=function($){return $.zoom||$.drag||$.pitch||$.rotate},Ea=function($){function ne(){$.apply(this,arguments)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne}(t.Event);function Ga($){return $.panDelta&&$.panDelta.mag()||$.zoomDelta||$.bearingDelta||$.pitchDelta}var Li=function($,ne){this._map=$,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Jn($),this._bearingSnap=ne.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(ne),t.bindAll(["handleEvent","handleWindowEvent"],this);var q=this._el;this._listeners=[[q,"touchstart",{passive:!1}],[q,"touchmove",{passive:!1}],[q,"touchend",void 0],[q,"touchcancel",void 0],[q,"mousedown",void 0],[q,"mousemove",void 0],[q,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[q,"mouseover",void 0],[q,"mouseout",void 0],[q,"dblclick",void 0],[q,"click",void 0],[q,"keydown",{capture:!1}],[q,"keyup",void 0],[q,"wheel",{passive:!1}],[q,"contextmenu",void 0],[t.window,"blur",void 0]];for(var ve=0,Se=this._listeners;ve<Se.length;ve+=1){var Oe=Se[ve],Ye=Oe[0];a.addEventListener(Ye,Oe[1],Ye===t.window.document?this.handleWindowEvent:this.handleEvent,Oe[2])}};Li.prototype.destroy=function(){for(var $=0,ne=this._listeners;$<ne.length;$+=1){var q=ne[$],ve=q[0];a.removeEventListener(ve,q[1],ve===t.window.document?this.handleWindowEvent:this.handleEvent,q[2])}},Li.prototype._addDefaultHandlers=function($){var ne=this._map,q=ne.getCanvasContainer();this._add("mapEvent",new _i(ne,$));var ve=ne.boxZoom=new Fa(ne,$);this._add("boxZoom",ve);var Se=new Zn,Oe=new no;ne.doubleClickZoom=new Po(Oe,Se),this._add("tapZoom",Se),this._add("clickZoom",Oe);var Ye=new Ao;this._add("tapDragZoom",Ye);var ut=ne.touchPitch=new vs;this._add("touchPitch",ut);var bt=new li($),jt=new Ca($);ne.dragRotate=new Gi($,bt,jt),this._add("mouseRotate",bt,["mousePitch"]),this._add("mousePitch",jt,["mouseRotate"]);var sr=new Bi($),pr=new to($);ne.dragPan=new Qo(q,sr,pr),this._add("mousePan",sr),this._add("touchPan",pr,["touchZoom","touchRotate"]);var br=new _o,Cr=new Ji;ne.touchZoomRotate=new Ya(q,Cr,br,Ye),this._add("touchRotate",br,["touchPan","touchZoom"]),this._add("touchZoom",Cr,["touchPan","touchRotate"]);var Pr=ne.scrollZoom=new ui(ne,this);this._add("scrollZoom",Pr,["mousePan"]);var jr=ne.keyboard=new xo;this._add("keyboard",jr),this._add("blockableMapEvent",new _a(ne));for(var Mr=0,Ur=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Mr<Ur.length;Mr+=1){var Jr=Ur[Mr];$.interactive&&$[Jr]&&ne[Jr].enable($[Jr])}},Li.prototype._add=function($,ne,q){this._handlers.push({handlerName:$,handler:ne,allowed:q}),this._handlersById[$]=ne},Li.prototype.stop=function(){if(!this._updatingCamera){for(var $=0,ne=this._handlers;$<ne.length;$+=1)ne[$].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Li.prototype.isActive=function(){for(var $=0,ne=this._handlers;$<ne.length;$+=1)if(ne[$].handler.isActive())return!0;return!1},Li.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Li.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Li.prototype.isMoving=function(){return!!is(this._eventsInProgress)||this.isZooming()},Li.prototype._blockedByActive=function($,ne,q){for(var ve in $)if(ve!==q&&(!ne||ne.indexOf(ve)<0))return!0;return!1},Li.prototype.handleWindowEvent=function($){this.handleEvent($,$.type+"Window")},Li.prototype._getMapTouches=function($){for(var ne=[],q=0,ve=$;q<ve.length;q+=1){var Se=ve[q];this._el.contains(Se.target)&&ne.push(Se)}return ne},Li.prototype.handleEvent=function($,ne){if($.type!=="blur"){this._updatingCamera=!0;for(var q=$.type==="renderFrame"?void 0:$,ve={needsRenderFrame:!1},Se={},Oe={},Ye=$.touches?this._getMapTouches($.touches):void 0,ut=Ye?a.touchPos(this._el,Ye):a.mousePos(this._el,$),bt=0,jt=this._handlers;bt<jt.length;bt+=1){var sr=jt[bt],pr=sr.handlerName,br=sr.handler,Cr=sr.allowed;if(br.isEnabled()){var Pr=void 0;this._blockedByActive(Oe,Cr,pr)?br.reset():br[ne||$.type]&&(Pr=br[ne||$.type]($,ut,Ye),this.mergeHandlerResult(ve,Se,Pr,pr,q),Pr&&Pr.needsRenderFrame&&this._triggerRenderFrame()),(Pr||br.isActive())&&(Oe[pr]=br)}}var jr={};for(var Mr in this._previousActiveHandlers)Oe[Mr]||(jr[Mr]=q);this._previousActiveHandlers=Oe,(Object.keys(jr).length||Ga(ve))&&(this._changes.push([ve,Se,jr]),this._triggerRenderFrame()),(Object.keys(Oe).length||Ga(ve))&&this._map._stop(!0),this._updatingCamera=!1;var Ur=ve.cameraAnimation;Ur&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Ur(this._map))}else this.stop()},Li.prototype.mergeHandlerResult=function($,ne,q,ve,Se){if(q){t.extend($,q);var Oe={handlerName:ve,originalEvent:q.originalEvent||Se};q.zoomDelta!==void 0&&(ne.zoom=Oe),q.panDelta!==void 0&&(ne.drag=Oe),q.pitchDelta!==void 0&&(ne.pitch=Oe),q.bearingDelta!==void 0&&(ne.rotate=Oe)}},Li.prototype._applyChanges=function(){for(var $={},ne={},q={},ve=0,Se=this._changes;ve<Se.length;ve+=1){var Oe=Se[ve],Ye=Oe[0],ut=Oe[1],bt=Oe[2];Ye.panDelta&&($.panDelta=($.panDelta||new t.Point(0,0))._add(Ye.panDelta)),Ye.zoomDelta&&($.zoomDelta=($.zoomDelta||0)+Ye.zoomDelta),Ye.bearingDelta&&($.bearingDelta=($.bearingDelta||0)+Ye.bearingDelta),Ye.pitchDelta&&($.pitchDelta=($.pitchDelta||0)+Ye.pitchDelta),Ye.around!==void 0&&($.around=Ye.around),Ye.pinchAround!==void 0&&($.pinchAround=Ye.pinchAround),Ye.noInertia&&($.noInertia=Ye.noInertia),t.extend(ne,ut),t.extend(q,bt)}this._updateMapTransform($,ne,q),this._changes=[]},Li.prototype._updateMapTransform=function($,ne,q){var ve=this._map,Se=ve.transform;if(!Ga($))return this._fireEvents(ne,q);var Oe=$.panDelta,Ye=$.zoomDelta,ut=$.bearingDelta,bt=$.pitchDelta,jt=$.around,sr=$.pinchAround;sr!==void 0&&(jt=sr),ve._stop(!0),jt=jt||ve.transform.centerPoint;var pr=Se.pointLocation(Oe?jt.sub(Oe):jt);ut&&(Se.bearing+=ut),bt&&(Se.pitch+=bt),Ye&&(Se.zoom+=Ye),Se.setLocationAtPoint(pr,jt),this._map._update(),$.noInertia||this._inertia.record($),this._fireEvents(ne,q)},Li.prototype._fireEvents=function($,ne){var q=this,ve=is(this._eventsInProgress),Se=is($),Oe={};for(var Ye in $)this._eventsInProgress[Ye]||(Oe[Ye+"start"]=$[Ye].originalEvent),this._eventsInProgress[Ye]=$[Ye];for(var ut in!ve&&Se&&this._fireEvent("movestart",Se.originalEvent),Oe)this._fireEvent(ut,Oe[ut]);for(var bt in $.rotate&&(this._bearingChanged=!0),Se&&this._fireEvent("move",Se.originalEvent),$)this._fireEvent(bt,$[bt].originalEvent);var jt,sr={};for(var pr in this._eventsInProgress){var br=this._eventsInProgress[pr],Cr=br.handlerName,Pr=br.originalEvent;this._handlersById[Cr].isActive()||(delete this._eventsInProgress[pr],sr[pr+"end"]=jt=ne[Cr]||Pr)}for(var jr in sr)this._fireEvent(jr,sr[jr]);var Mr=is(this._eventsInProgress);if((ve||Se)&&!Mr){this._updatingCamera=!0;var Ur=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Jr=function(fn){return fn!==0&&-q._bearingSnap<fn&&fn<q._bearingSnap};Ur?(Jr(Ur.bearing||this._map.getBearing())&&(Ur.bearing=0),this._map.easeTo(Ur,{originalEvent:jt})):(this._map.fire(new t.Event("moveend",{originalEvent:jt})),Jr(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},Li.prototype._fireEvent=function($,ne){this._map.fire(new t.Event($,ne?{originalEvent:ne}:{}))},Li.prototype._triggerRenderFrame=function(){var $=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(ne){delete $._frameId,$.handleEvent(new Ea("renderFrame",{timeStamp:ne})),$._applyChanges()}))};var Mi=function($){function ne(q,ve){$.call(this),this._moving=!1,this._zooming=!1,this.transform=q,this._bearingSnap=ve.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},ne.prototype.setCenter=function(q,ve){return this.jumpTo({center:q},ve)},ne.prototype.panBy=function(q,ve,Se){return q=t.Point.convert(q).mult(-1),this.panTo(this.transform.center,t.extend({offset:q},ve),Se)},ne.prototype.panTo=function(q,ve,Se){return this.easeTo(t.extend({center:q},ve),Se)},ne.prototype.getZoom=function(){return this.transform.zoom},ne.prototype.setZoom=function(q,ve){return this.jumpTo({zoom:q},ve),this},ne.prototype.zoomTo=function(q,ve,Se){return this.easeTo(t.extend({zoom:q},ve),Se)},ne.prototype.zoomIn=function(q,ve){return this.zoomTo(this.getZoom()+1,q,ve),this},ne.prototype.zoomOut=function(q,ve){return this.zoomTo(this.getZoom()-1,q,ve),this},ne.prototype.getBearing=function(){return this.transform.bearing},ne.prototype.setBearing=function(q,ve){return this.jumpTo({bearing:q},ve),this},ne.prototype.getPadding=function(){return this.transform.padding},ne.prototype.setPadding=function(q,ve){return this.jumpTo({padding:q},ve),this},ne.prototype.rotateTo=function(q,ve,Se){return this.easeTo(t.extend({bearing:q},ve),Se)},ne.prototype.resetNorth=function(q,ve){return this.rotateTo(0,t.extend({duration:1e3},q),ve),this},ne.prototype.resetNorthPitch=function(q,ve){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},q),ve),this},ne.prototype.snapToNorth=function(q,ve){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(q,ve):this},ne.prototype.getPitch=function(){return this.transform.pitch},ne.prototype.setPitch=function(q,ve){return this.jumpTo({pitch:q},ve),this},ne.prototype.cameraForBounds=function(q,ve){return q=t.LngLatBounds.convert(q),this._cameraForBoxAndBearing(q.getNorthWest(),q.getSouthEast(),0,ve)},ne.prototype._cameraForBoxAndBearing=function(q,ve,Se,Oe){var Ye={top:0,bottom:0,right:0,left:0};if(typeof(Oe=t.extend({padding:Ye,offset:[0,0],maxZoom:this.transform.maxZoom},Oe)).padding=="number"){var ut=Oe.padding;Oe.padding={top:ut,bottom:ut,right:ut,left:ut}}Oe.padding=t.extend(Ye,Oe.padding);var bt=this.transform,jt=bt.padding,sr=bt.project(t.LngLat.convert(q)),pr=bt.project(t.LngLat.convert(ve)),br=sr.rotate(-Se*Math.PI/180),Cr=pr.rotate(-Se*Math.PI/180),Pr=new t.Point(Math.max(br.x,Cr.x),Math.max(br.y,Cr.y)),jr=new t.Point(Math.min(br.x,Cr.x),Math.min(br.y,Cr.y)),Mr=Pr.sub(jr),Ur=(bt.width-(jt.left+jt.right+Oe.padding.left+Oe.padding.right))/Mr.x,Jr=(bt.height-(jt.top+jt.bottom+Oe.padding.top+Oe.padding.bottom))/Mr.y;if(!(Jr<0||Ur<0)){var fn=Math.min(bt.scaleZoom(bt.scale*Math.min(Ur,Jr)),Oe.maxZoom),zn=t.Point.convert(Oe.offset),kn=new t.Point(zn.x+(Oe.padding.left-Oe.padding.right)/2,zn.y+(Oe.padding.top-Oe.padding.bottom)/2).mult(bt.scale/bt.zoomScale(fn));return{center:bt.unproject(sr.add(pr).div(2).sub(kn)),zoom:fn,bearing:Se}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},ne.prototype.fitBounds=function(q,ve,Se){return this._fitInternal(this.cameraForBounds(q,ve),ve,Se)},ne.prototype.fitScreenCoordinates=function(q,ve,Se,Oe,Ye){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(q)),this.transform.pointLocation(t.Point.convert(ve)),Se,Oe),Oe,Ye)},ne.prototype._fitInternal=function(q,ve,Se){return q?(delete(ve=t.extend(q,ve)).padding,ve.linear?this.easeTo(ve,Se):this.flyTo(ve,Se)):this},ne.prototype.jumpTo=function(q,ve){this.stop();var Se=this.transform,Oe=!1,Ye=!1,ut=!1;return"zoom"in q&&Se.zoom!==+q.zoom&&(Oe=!0,Se.zoom=+q.zoom),q.center!==void 0&&(Se.center=t.LngLat.convert(q.center)),"bearing"in q&&Se.bearing!==+q.bearing&&(Ye=!0,Se.bearing=+q.bearing),"pitch"in q&&Se.pitch!==+q.pitch&&(ut=!0,Se.pitch=+q.pitch),q.padding==null||Se.isPaddingEqual(q.padding)||(Se.padding=q.padding),this.fire(new t.Event("movestart",ve)).fire(new t.Event("move",ve)),Oe&&this.fire(new t.Event("zoomstart",ve)).fire(new t.Event("zoom",ve)).fire(new t.Event("zoomend",ve)),Ye&&this.fire(new t.Event("rotatestart",ve)).fire(new t.Event("rotate",ve)).fire(new t.Event("rotateend",ve)),ut&&this.fire(new t.Event("pitchstart",ve)).fire(new t.Event("pitch",ve)).fire(new t.Event("pitchend",ve)),this.fire(new t.Event("moveend",ve))},ne.prototype.easeTo=function(q,ve){var Se=this;this._stop(!1,q.easeId),((q=t.extend({offset:[0,0],duration:500,easing:t.ease},q)).animate===!1||!q.essential&&t.browser.prefersReducedMotion)&&(q.duration=0);var Oe=this.transform,Ye=this.getZoom(),ut=this.getBearing(),bt=this.getPitch(),jt=this.getPadding(),sr="zoom"in q?+q.zoom:Ye,pr="bearing"in q?this._normalizeBearing(q.bearing,ut):ut,br="pitch"in q?+q.pitch:bt,Cr="padding"in q?q.padding:Oe.padding,Pr=t.Point.convert(q.offset),jr=Oe.centerPoint.add(Pr),Mr=Oe.pointLocation(jr),Ur=t.LngLat.convert(q.center||Mr);this._normalizeCenter(Ur);var Jr,fn,zn=Oe.project(Mr),kn=Oe.project(Ur).sub(zn),Dn=Oe.zoomScale(sr-Ye);q.around&&(Jr=t.LngLat.convert(q.around),fn=Oe.locationPoint(Jr));var qn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||sr!==Ye,this._rotating=this._rotating||ut!==pr,this._pitching=this._pitching||br!==bt,this._padding=!Oe.isPaddingEqual(Cr),this._easeId=q.easeId,this._prepareEase(ve,q.noMoveStart,qn),clearTimeout(this._easeEndTimeoutID),this._ease(function(pa){if(Se._zooming&&(Oe.zoom=t.number(Ye,sr,pa)),Se._rotating&&(Oe.bearing=t.number(ut,pr,pa)),Se._pitching&&(Oe.pitch=t.number(bt,br,pa)),Se._padding&&(Oe.interpolatePadding(jt,Cr,pa),jr=Oe.centerPoint.add(Pr)),Jr)Oe.setLocationAtPoint(Jr,fn);else{var ua=Oe.zoomScale(Oe.zoom-Ye),wa=sr>Ye?Math.min(2,Dn):Math.max(.5,Dn),Da=Math.pow(wa,1-pa),oi=Oe.unproject(zn.add(kn.mult(pa*Da)).mult(ua));Oe.setLocationAtPoint(Oe.renderWorldCopies?oi.wrap():oi,jr)}Se._fireMoveEvents(ve)},function(pa){Se._afterEase(ve,pa)},q),this},ne.prototype._prepareEase=function(q,ve,Se){Se===void 0&&(Se={}),this._moving=!0,ve||Se.moving||this.fire(new t.Event("movestart",q)),this._zooming&&!Se.zooming&&this.fire(new t.Event("zoomstart",q)),this._rotating&&!Se.rotating&&this.fire(new t.Event("rotatestart",q)),this._pitching&&!Se.pitching&&this.fire(new t.Event("pitchstart",q))},ne.prototype._fireMoveEvents=function(q){this.fire(new t.Event("move",q)),this._zooming&&this.fire(new t.Event("zoom",q)),this._rotating&&this.fire(new t.Event("rotate",q)),this._pitching&&this.fire(new t.Event("pitch",q))},ne.prototype._afterEase=function(q,ve){if(!this._easeId||!ve||this._easeId!==ve){delete this._easeId;var Se=this._zooming,Oe=this._rotating,Ye=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Se&&this.fire(new t.Event("zoomend",q)),Oe&&this.fire(new t.Event("rotateend",q)),Ye&&this.fire(new t.Event("pitchend",q)),this.fire(new t.Event("moveend",q))}},ne.prototype.flyTo=function(q,ve){var Se=this;if(!q.essential&&t.browser.prefersReducedMotion){var Oe=t.pick(q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Oe,ve)}this.stop(),q=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},q);var Ye=this.transform,ut=this.getZoom(),bt=this.getBearing(),jt=this.getPitch(),sr=this.getPadding(),pr="zoom"in q?t.clamp(+q.zoom,Ye.minZoom,Ye.maxZoom):ut,br="bearing"in q?this._normalizeBearing(q.bearing,bt):bt,Cr="pitch"in q?+q.pitch:jt,Pr="padding"in q?q.padding:Ye.padding,jr=Ye.zoomScale(pr-ut),Mr=t.Point.convert(q.offset),Ur=Ye.centerPoint.add(Mr),Jr=Ye.pointLocation(Ur),fn=t.LngLat.convert(q.center||Jr);this._normalizeCenter(fn);var zn=Ye.project(Jr),kn=Ye.project(fn).sub(zn),Dn=q.curve,qn=Math.max(Ye.width,Ye.height),pa=qn/jr,ua=kn.mag();if("minZoom"in q){var wa=t.clamp(Math.min(q.minZoom,ut,pr),Ye.minZoom,Ye.maxZoom),Da=qn/Ye.zoomScale(wa-ut);Dn=Math.sqrt(Da/ua*2)}var oi=Dn*Dn;function qa(si){var Na=(pa*pa-qn*qn+(si?-1:1)*oi*oi*ua*ua)/(2*(si?pa:qn)*oi*ua);return Math.log(Math.sqrt(Na*Na+1)-Na)}function Fi(si){return(Math.exp(si)-Math.exp(-si))/2}function Ua(si){return(Math.exp(si)+Math.exp(-si))/2}var fi=qa(0),Ii=function(si){return Ua(fi)/Ua(fi+Dn*si)},hi=function(si){return qn*((Ua(fi)*(Fi(Na=fi+Dn*si)/Ua(Na))-Fi(fi))/oi)/ua;var Na},ii=(qa(1)-fi)/Dn;if(Math.abs(ua)<1e-6||!isFinite(ii)){if(Math.abs(qn-pa)<1e-6)return this.easeTo(q,ve);var zi=pa<qn?-1:1;ii=Math.abs(Math.log(pa/qn))/Dn,hi=function(){return 0},Ii=function(si){return Math.exp(zi*Dn*si)}}return q.duration="duration"in q?+q.duration:1e3*ii/("screenSpeed"in q?+q.screenSpeed/Dn:+q.speed),q.maxDuration&&q.duration>q.maxDuration&&(q.duration=0),this._zooming=!0,this._rotating=bt!==br,this._pitching=Cr!==jt,this._padding=!Ye.isPaddingEqual(Pr),this._prepareEase(ve,!1),this._ease(function(si){var Na=si*ii,os=1/Ii(Na);Ye.zoom=si===1?pr:ut+Ye.scaleZoom(os),Se._rotating&&(Ye.bearing=t.number(bt,br,si)),Se._pitching&&(Ye.pitch=t.number(jt,Cr,si)),Se._padding&&(Ye.interpolatePadding(sr,Pr,si),Ur=Ye.centerPoint.add(Mr));var Bo=si===1?fn:Ye.unproject(zn.add(kn.mult(hi(Na))).mult(os));Ye.setLocationAtPoint(Ye.renderWorldCopies?Bo.wrap():Bo,Ur),Se._fireMoveEvents(ve)},function(){return Se._afterEase(ve)},q),this},ne.prototype.isEasing=function(){return!!this._easeFrameId},ne.prototype.stop=function(){return this._stop()},ne.prototype._stop=function(q,ve){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Se=this._onEaseEnd;delete this._onEaseEnd,Se.call(this,ve)}if(!q){var Oe=this.handlers;Oe&&Oe.stop()}return this},ne.prototype._ease=function(q,ve,Se){Se.animate===!1||Se.duration===0?(q(1),ve()):(this._easeStart=t.browser.now(),this._easeOptions=Se,this._onEaseFrame=q,this._onEaseEnd=ve,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},ne.prototype._renderFrameCallback=function(){var q=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(q)),q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},ne.prototype._normalizeBearing=function(q,ve){q=t.wrap(q,-180,180);var Se=Math.abs(q-ve);return Math.abs(q-360-ve)<Se&&(q-=360),Math.abs(q+360-ve)<Se&&(q+=360),q},ne.prototype._normalizeCenter=function(q){var ve=this.transform;if(ve.renderWorldCopies&&!ve.lngRange){var Se=q.lng-ve.center.lng;q.lng+=Se>180?-360:Se<-180?360:0}},ne}(t.Evented),Qn=function($){$===void 0&&($={}),this.options=$,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Qn.prototype.getDefaultPosition=function(){return"bottom-right"},Qn.prototype.onAdd=function($){var ne=this.options&&this.options.compact;return this._map=$,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=a.create("div","mapboxgl-ctrl-attrib-inner",this._container),ne&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),ne===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Qn.prototype.onRemove=function(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Qn.prototype._updateEditLink=function(){var $=this._editLink;$||($=this._editLink=this._container.querySelector(".mapbox-improve-map"));var ne=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if($){var q=ne.reduce(function(ve,Se,Oe){return Se.value&&(ve+=Se.key+"="+Se.value+(Oe<ne.length-1?"&":"")),ve},"?");$.href=t.config.FEEDBACK_URL+"/"+q+(this._map._hash?this._map._hash.getHashString(!0):""),$.rel="noopener nofollow"}},Qn.prototype._updateData=function($){!$||$.sourceDataType!=="metadata"&&$.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Qn.prototype._updateAttributions=function(){if(this._map.style){var $=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?$=$.concat(this.options.customAttribution.map(function(ut){return typeof ut!="string"?"":ut})):typeof this.options.customAttribution=="string"&&$.push(this.options.customAttribution)),this._map.style.stylesheet){var ne=this._map.style.stylesheet;this.styleOwner=ne.owner,this.styleId=ne.id}var q=this._map.style.sourceCaches;for(var ve in q){var Se=q[ve];if(Se.used){var Oe=Se.getSource();Oe.attribution&&$.indexOf(Oe.attribution)<0&&$.push(Oe.attribution)}}$.sort(function(ut,bt){return ut.length-bt.length});var Ye=($=$.filter(function(ut,bt){for(var jt=bt+1;jt<$.length;jt++)if($[jt].indexOf(ut)>=0)return!1;return!0})).join(" | ");Ye!==this._attribHTML&&(this._attribHTML=Ye,$.length?(this._innerContainer.innerHTML=Ye,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Qn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var za=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};za.prototype.onAdd=function($){this._map=$,this._container=a.create("div","mapboxgl-ctrl");var ne=a.create("a","mapboxgl-ctrl-logo");return ne.target="_blank",ne.rel="noopener nofollow",ne.href="https://www.mapbox.com/",ne.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ne.setAttribute("rel","noopener nofollow"),this._container.appendChild(ne),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},za.prototype.onRemove=function(){a.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},za.prototype.getDefaultPosition=function(){return"bottom-left"},za.prototype._updateLogo=function($){$&&$.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},za.prototype._logoRequired=function(){if(this._map.style){var $=this._map.style.sourceCaches;for(var ne in $)if($[ne].getSource().mapbox_logo)return!0;return!1}},za.prototype._updateCompact=function(){var $=this._container.children;if($.length){var ne=$[0];this._map.getCanvasContainer().offsetWidth<250?ne.classList.add("mapboxgl-compact"):ne.classList.remove("mapboxgl-compact")}};var Si=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Si.prototype.add=function($){var ne=++this._id;return this._queue.push({callback:$,id:ne,cancelled:!1}),ne},Si.prototype.remove=function($){for(var ne=this._currentlyRunning,q=0,ve=ne?this._queue.concat(ne):this._queue;q<ve.length;q+=1){var Se=ve[q];if(Se.id===$)return void(Se.cancelled=!0)}},Si.prototype.run=function($){$===void 0&&($=0);var ne=this._currentlyRunning=this._queue;this._queue=[];for(var q=0,ve=ne;q<ve.length;q+=1){var Se=ve[q];if(!Se.cancelled&&(Se.callback($),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Si.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Vi={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},uo=t.window.HTMLImageElement,Ei=t.window.HTMLElement,Qi=t.window.ImageBitmap,qo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ks=function($){function ne(ve){var Se=this;if((ve=t.extend({},qo,ve)).minZoom!=null&&ve.maxZoom!=null&&ve.minZoom>ve.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(ve.minPitch!=null&&ve.maxPitch!=null&&ve.minPitch>ve.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(ve.minPitch!=null&&ve.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(ve.maxPitch!=null&&ve.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var Oe=new qr(ve.minZoom,ve.maxZoom,ve.minPitch,ve.maxPitch,ve.renderWorldCopies);if($.call(this,Oe,ve),this._interactive=ve.interactive,this._maxTileCacheSize=ve.maxTileCacheSize,this._failIfMajorPerformanceCaveat=ve.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=ve.preserveDrawingBuffer,this._antialias=ve.antialias,this._trackResize=ve.trackResize,this._bearingSnap=ve.bearingSnap,this._refreshExpiredTiles=ve.refreshExpiredTiles,this._fadeDuration=ve.fadeDuration,this._crossSourceCollisions=ve.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=ve.collectResourceTiming,this._renderTaskQueue=new Si,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},Vi,ve.locale),this._requestManager=new t.RequestManager(ve.transformRequest,ve.accessToken),typeof ve.container=="string"){if(this._container=t.window.document.getElementById(ve.container),!this._container)throw new Error("Container '"+ve.container+"' not found.")}else{if(!(ve.container instanceof Ei))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=ve.container}if(ve.maxBounds&&this.setMaxBounds(ve.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return Se._update(!1)}),this.on("moveend",function(){return Se._update(!1)}),this.on("zoom",function(){return Se._update(!0)}),t.window!==void 0&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Li(this,ve),this._hash=ve.hash&&new Nn(typeof ve.hash=="string"&&ve.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:ve.center,zoom:ve.zoom,bearing:ve.bearing,pitch:ve.pitch}),ve.bounds&&(this.resize(),this.fitBounds(ve.bounds,t.extend({},ve.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=ve.localIdeographFontFamily,ve.style&&this.setStyle(ve.style,{localIdeographFontFamily:ve.localIdeographFontFamily}),ve.attributionControl&&this.addControl(new Qn({customAttribution:ve.customAttribution})),this.addControl(new za,ve.logoPosition),this.on("style.load",function(){Se.transform.unmodified&&Se.jumpTo(Se.style.stylesheet)}),this.on("data",function(Ye){Se._update(Ye.dataType==="style"),Se.fire(new t.Event(Ye.dataType+"data",Ye))}),this.on("dataloading",function(Ye){Se.fire(new t.Event(Ye.dataType+"dataloading",Ye))})}$&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne;var q={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return ne.prototype._getMapId=function(){return this._mapId},ne.prototype.addControl=function(ve,Se){if(Se===void 0&&ve.getDefaultPosition&&(Se=ve.getDefaultPosition()),Se===void 0&&(Se="top-right"),!ve||!ve.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Oe=ve.onAdd(this);this._controls.push(ve);var Ye=this._controlPositions[Se];return Se.indexOf("bottom")!==-1?Ye.insertBefore(Oe,Ye.firstChild):Ye.appendChild(Oe),this},ne.prototype.removeControl=function(ve){if(!ve||!ve.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Se=this._controls.indexOf(ve);return Se>-1&&this._controls.splice(Se,1),ve.onRemove(this),this},ne.prototype.resize=function(ve){var Se=this._containerDimensions(),Oe=Se[0],Ye=Se[1];this._resizeCanvas(Oe,Ye),this.transform.resize(Oe,Ye),this.painter.resize(Oe,Ye);var ut=!this._moving;return ut&&(this.stop(),this.fire(new t.Event("movestart",ve)).fire(new t.Event("move",ve))),this.fire(new t.Event("resize",ve)),ut&&this.fire(new t.Event("moveend",ve)),this},ne.prototype.getBounds=function(){return this.transform.getBounds()},ne.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},ne.prototype.setMaxBounds=function(ve){return this.transform.setMaxBounds(t.LngLatBounds.convert(ve)),this._update()},ne.prototype.setMinZoom=function(ve){if((ve=ve??-2)>=-2&&ve<=this.transform.maxZoom)return this.transform.minZoom=ve,this._update(),this.getZoom()<ve&&this.setZoom(ve),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},ne.prototype.getMinZoom=function(){return this.transform.minZoom},ne.prototype.setMaxZoom=function(ve){if((ve=ve??22)>=this.transform.minZoom)return this.transform.maxZoom=ve,this._update(),this.getZoom()>ve&&this.setZoom(ve),this;throw new Error("maxZoom must be greater than the current minZoom")},ne.prototype.getMaxZoom=function(){return this.transform.maxZoom},ne.prototype.setMinPitch=function(ve){if((ve=ve??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(ve>=0&&ve<=this.transform.maxPitch)return this.transform.minPitch=ve,this._update(),this.getPitch()<ve&&this.setPitch(ve),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},ne.prototype.getMinPitch=function(){return this.transform.minPitch},ne.prototype.setMaxPitch=function(ve){if((ve=ve??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(ve>=this.transform.minPitch)return this.transform.maxPitch=ve,this._update(),this.getPitch()>ve&&this.setPitch(ve),this;throw new Error("maxPitch must be greater than the current minPitch")},ne.prototype.getMaxPitch=function(){return this.transform.maxPitch},ne.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},ne.prototype.setRenderWorldCopies=function(ve){return this.transform.renderWorldCopies=ve,this._update()},ne.prototype.project=function(ve){return this.transform.locationPoint(t.LngLat.convert(ve))},ne.prototype.unproject=function(ve){return this.transform.pointLocation(t.Point.convert(ve))},ne.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},ne.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},ne.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},ne.prototype._createDelegatedListener=function(ve,Se,Oe){var Ye,ut=this;if(ve==="mouseenter"||ve==="mouseover"){var bt=!1;return{layer:Se,listener:Oe,delegates:{mousemove:function(sr){var pr=ut.getLayer(Se)?ut.queryRenderedFeatures(sr.point,{layers:[Se]}):[];pr.length?bt||(bt=!0,Oe.call(ut,new ya(ve,ut,sr.originalEvent,{features:pr}))):bt=!1},mouseout:function(){bt=!1}}}}if(ve==="mouseleave"||ve==="mouseout"){var jt=!1;return{layer:Se,listener:Oe,delegates:{mousemove:function(sr){(ut.getLayer(Se)?ut.queryRenderedFeatures(sr.point,{layers:[Se]}):[]).length?jt=!0:jt&&(jt=!1,Oe.call(ut,new ya(ve,ut,sr.originalEvent)))},mouseout:function(sr){jt&&(jt=!1,Oe.call(ut,new ya(ve,ut,sr.originalEvent)))}}}}return{layer:Se,listener:Oe,delegates:(Ye={},Ye[ve]=function(sr){var pr=ut.getLayer(Se)?ut.queryRenderedFeatures(sr.point,{layers:[Se]}):[];pr.length&&(sr.features=pr,Oe.call(ut,sr),delete sr.features)},Ye)}},ne.prototype.on=function(ve,Se,Oe){if(Oe===void 0)return $.prototype.on.call(this,ve,Se);var Ye=this._createDelegatedListener(ve,Se,Oe);for(var ut in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ve]=this._delegatedListeners[ve]||[],this._delegatedListeners[ve].push(Ye),Ye.delegates)this.on(ut,Ye.delegates[ut]);return this},ne.prototype.once=function(ve,Se,Oe){if(Oe===void 0)return $.prototype.once.call(this,ve,Se);var Ye=this._createDelegatedListener(ve,Se,Oe);for(var ut in Ye.delegates)this.once(ut,Ye.delegates[ut]);return this},ne.prototype.off=function(ve,Se,Oe){var Ye=this;return Oe===void 0?$.prototype.off.call(this,ve,Se):(this._delegatedListeners&&this._delegatedListeners[ve]&&function(ut){for(var bt=ut[ve],jt=0;jt<bt.length;jt++){var sr=bt[jt];if(sr.layer===Se&&sr.listener===Oe){for(var pr in sr.delegates)Ye.off(pr,sr.delegates[pr]);return bt.splice(jt,1),Ye}}}(this._delegatedListeners),this)},ne.prototype.queryRenderedFeatures=function(ve,Se){if(!this.style)return[];var Oe;if(Se!==void 0||ve===void 0||ve instanceof t.Point||Array.isArray(ve)||(Se=ve,ve=void 0),Se=Se||{},(ve=ve||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||typeof ve[0]=="number")Oe=[t.Point.convert(ve)];else{var Ye=t.Point.convert(ve[0]),ut=t.Point.convert(ve[1]);Oe=[Ye,new t.Point(ut.x,Ye.y),ut,new t.Point(Ye.x,ut.y),Ye]}return this.style.queryRenderedFeatures(Oe,Se,this.transform)},ne.prototype.querySourceFeatures=function(ve,Se){return this.style.querySourceFeatures(ve,Se)},ne.prototype.setStyle=function(ve,Se){return(Se=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Se)).diff!==!1&&Se.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ve?(this._diffStyle(ve,Se),this):(this._localIdeographFontFamily=Se.localIdeographFontFamily,this._updateStyle(ve,Se))},ne.prototype._getUIString=function(ve){var Se=this._locale[ve];if(Se==null)throw new Error("Missing UI string '"+ve+"'");return Se},ne.prototype._updateStyle=function(ve,Se){return this.style&&(this.style.setEventedParent(null),this.style._remove()),ve?(this.style=new en(this,Se||{}),this.style.setEventedParent(this,{style:this.style}),typeof ve=="string"?this.style.loadURL(ve):this.style.loadJSON(ve),this):(delete this.style,this)},ne.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new en(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},ne.prototype._diffStyle=function(ve,Se){var Oe=this;if(typeof ve=="string"){var Ye=this._requestManager.normalizeStyleURL(ve),ut=this._requestManager.transformRequest(Ye,t.ResourceType.Style);t.getJSON(ut,function(bt,jt){bt?Oe.fire(new t.ErrorEvent(bt)):jt&&Oe._updateDiff(jt,Se)})}else typeof ve=="object"&&this._updateDiff(ve,Se)},ne.prototype._updateDiff=function(ve,Se){try{this.style.setState(ve)&&this._update(!0)}catch(Oe){t.warnOnce("Unable to perform style diff: "+(Oe.message||Oe.error||Oe)+".  Rebuilding the style from scratch."),this._updateStyle(ve,Se)}},ne.prototype.getStyle=function(){if(this.style)return this.style.serialize()},ne.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},ne.prototype.addSource=function(ve,Se){return this._lazyInitEmptyStyle(),this.style.addSource(ve,Se),this._update(!0)},ne.prototype.isSourceLoaded=function(ve){var Se=this.style&&this.style.sourceCaches[ve];if(Se!==void 0)return Se.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+ve+"'")))},ne.prototype.areTilesLoaded=function(){var ve=this.style&&this.style.sourceCaches;for(var Se in ve){var Oe=ve[Se]._tiles;for(var Ye in Oe){var ut=Oe[Ye];if(ut.state!=="loaded"&&ut.state!=="errored")return!1}}return!0},ne.prototype.addSourceType=function(ve,Se,Oe){return this._lazyInitEmptyStyle(),this.style.addSourceType(ve,Se,Oe)},ne.prototype.removeSource=function(ve){return this.style.removeSource(ve),this._update(!0)},ne.prototype.getSource=function(ve){return this.style.getSource(ve)},ne.prototype.addImage=function(ve,Se,Oe){Oe===void 0&&(Oe={});var Ye=Oe.pixelRatio;Ye===void 0&&(Ye=1);var ut=Oe.sdf;ut===void 0&&(ut=!1);var bt=Oe.stretchX,jt=Oe.stretchY,sr=Oe.content;if(this._lazyInitEmptyStyle(),Se instanceof uo||Qi&&Se instanceof Qi){var pr=t.browser.getImageData(Se);this.style.addImage(ve,{data:new t.RGBAImage({width:pr.width,height:pr.height},pr.data),pixelRatio:Ye,stretchX:bt,stretchY:jt,content:sr,sdf:ut,version:0})}else{if(Se.width===void 0||Se.height===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var br=Se;this.style.addImage(ve,{data:new t.RGBAImage({width:Se.width,height:Se.height},new Uint8Array(Se.data)),pixelRatio:Ye,stretchX:bt,stretchY:jt,content:sr,sdf:ut,version:0,userImage:br}),br.onAdd&&br.onAdd(this,ve)}},ne.prototype.updateImage=function(ve,Se){var Oe=this.style.getImage(ve);if(!Oe)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Ye=Se instanceof uo||Qi&&Se instanceof Qi?t.browser.getImageData(Se):Se,ut=Ye.width,bt=Ye.height,jt=Ye.data;return ut===void 0||bt===void 0?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ut!==Oe.data.width||bt!==Oe.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Oe.data.replace(jt,!(Se instanceof uo||Qi&&Se instanceof Qi)),void this.style.updateImage(ve,Oe))},ne.prototype.hasImage=function(ve){return ve?!!this.style.getImage(ve):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},ne.prototype.removeImage=function(ve){this.style.removeImage(ve)},ne.prototype.loadImage=function(ve,Se){t.getImage(this._requestManager.transformRequest(ve,t.ResourceType.Image),Se)},ne.prototype.listImages=function(){return this.style.listImages()},ne.prototype.addLayer=function(ve,Se){return this._lazyInitEmptyStyle(),this.style.addLayer(ve,Se),this._update(!0)},ne.prototype.moveLayer=function(ve,Se){return this.style.moveLayer(ve,Se),this._update(!0)},ne.prototype.removeLayer=function(ve){return this.style.removeLayer(ve),this._update(!0)},ne.prototype.getLayer=function(ve){return this.style.getLayer(ve)},ne.prototype.setLayerZoomRange=function(ve,Se,Oe){return this.style.setLayerZoomRange(ve,Se,Oe),this._update(!0)},ne.prototype.setFilter=function(ve,Se,Oe){return Oe===void 0&&(Oe={}),this.style.setFilter(ve,Se,Oe),this._update(!0)},ne.prototype.getFilter=function(ve){return this.style.getFilter(ve)},ne.prototype.setPaintProperty=function(ve,Se,Oe,Ye){return Ye===void 0&&(Ye={}),this.style.setPaintProperty(ve,Se,Oe,Ye),this._update(!0)},ne.prototype.getPaintProperty=function(ve,Se){return this.style.getPaintProperty(ve,Se)},ne.prototype.setLayoutProperty=function(ve,Se,Oe,Ye){return Ye===void 0&&(Ye={}),this.style.setLayoutProperty(ve,Se,Oe,Ye),this._update(!0)},ne.prototype.getLayoutProperty=function(ve,Se){return this.style.getLayoutProperty(ve,Se)},ne.prototype.setLight=function(ve,Se){return Se===void 0&&(Se={}),this._lazyInitEmptyStyle(),this.style.setLight(ve,Se),this._update(!0)},ne.prototype.getLight=function(){return this.style.getLight()},ne.prototype.setFeatureState=function(ve,Se){return this.style.setFeatureState(ve,Se),this._update()},ne.prototype.removeFeatureState=function(ve,Se){return this.style.removeFeatureState(ve,Se),this._update()},ne.prototype.getFeatureState=function(ve){return this.style.getFeatureState(ve)},ne.prototype.getContainer=function(){return this._container},ne.prototype.getCanvasContainer=function(){return this._canvasContainer},ne.prototype.getCanvas=function(){return this._canvas},ne.prototype._containerDimensions=function(){var ve=0,Se=0;return this._container&&(ve=this._container.clientWidth||400,Se=this._container.clientHeight||300),[ve,Se]},ne.prototype._detectMissingCSS=function(){t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},ne.prototype._setupContainer=function(){var ve=this._container;ve.classList.add("mapboxgl-map"),(this._missingCSSCanary=a.create("div","mapboxgl-canary",ve)).style.visibility="hidden",this._detectMissingCSS();var Se=this._canvasContainer=a.create("div","mapboxgl-canvas-container",ve);this._interactive&&Se.classList.add("mapboxgl-interactive"),this._canvas=a.create("canvas","mapboxgl-canvas",Se),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Oe=this._containerDimensions();this._resizeCanvas(Oe[0],Oe[1]);var Ye=this._controlContainer=a.create("div","mapboxgl-control-container",ve),ut=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(bt){ut[bt]=a.create("div","mapboxgl-ctrl-"+bt,Ye)})},ne.prototype._resizeCanvas=function(ve,Se){var Oe=t.browser.devicePixelRatio||1;this._canvas.width=Oe*ve,this._canvas.height=Oe*Se,this._canvas.style.width=ve+"px",this._canvas.style.height=Se+"px"},ne.prototype._setupPainter=function(){var ve=t.extend({},f.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Se=this._canvas.getContext("webgl",ve)||this._canvas.getContext("experimental-webgl",ve);Se?(this.painter=new ar(Se,this.transform),t.webpSupported.testSupport(Se)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},ne.prototype._contextLost=function(ve){ve.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:ve}))},ne.prototype._contextRestored=function(ve){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:ve}))},ne.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},ne.prototype._update=function(ve){return this.style?(this._styleDirty=this._styleDirty||ve,this._sourcesDirty=!0,this.triggerRepaint(),this):this},ne.prototype._requestRenderFrame=function(ve){return this._update(),this._renderTaskQueue.add(ve)},ne.prototype._cancelRenderFrame=function(ve){this._renderTaskQueue.remove(ve)},ne.prototype._render=function(ve){var Se,Oe=this,Ye=0,ut=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Se=ut.createQueryEXT(),ut.beginQueryEXT(ut.TIME_ELAPSED_EXT,Se),Ye=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ve),!this._removed){var bt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var jt=this.transform.zoom,sr=t.browser.now();this.style.zoomHistory.update(jt,sr);var pr=new t.EvaluationParameters(jt,{now:sr,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),br=pr.crossFadingFactor();br===1&&br===this._crossFadingFactor||(bt=!0,this._crossFadingFactor=br),this.style.update(pr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||bt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Cr=t.browser.now()-Ye;ut.endQueryEXT(ut.TIME_ELAPSED_EXT,Se),setTimeout(function(){var jr=ut.getQueryObjectEXT(Se,ut.QUERY_RESULT_EXT)/1e6;ut.deleteQueryEXT(Se),Oe.fire(new t.Event("gpu-timing-frame",{cpuTime:Cr,gpuTime:jr}))},50)}if(this.listens("gpu-timing-layer")){var Pr=this.painter.collectGpuTimers();setTimeout(function(){var jr=Oe.painter.queryGpuTimers(Pr);Oe.fire(new t.Event("gpu-timing-layer",{layerTimes:jr}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new t.Event("idle"))),this}},ne.prototype.remove=function(){this._hash&&this._hash.remove();for(var ve=0,Se=this._controls;ve<Se.length;ve+=1)Se[ve].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),t.window!==void 0&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var Oe=this.painter.context.gl.getExtension("WEBGL_lose_context");Oe&&Oe.loseContext(),or(this._canvasContainer),or(this._controlContainer),or(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},ne.prototype.triggerRepaint=function(){var ve=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(Se){ve._frame=null,ve._render(Se)}))},ne.prototype._onWindowOnline=function(){this._update()},ne.prototype._onWindowResize=function(ve){this._trackResize&&this.resize({originalEvent:ve})._update()},q.showTileBoundaries.get=function(){return!!this._showTileBoundaries},q.showTileBoundaries.set=function(ve){this._showTileBoundaries!==ve&&(this._showTileBoundaries=ve,this._update())},q.showPadding.get=function(){return!!this._showPadding},q.showPadding.set=function(ve){this._showPadding!==ve&&(this._showPadding=ve,this._update())},q.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},q.showCollisionBoxes.set=function(ve){this._showCollisionBoxes!==ve&&(this._showCollisionBoxes=ve,ve?this.style._generateCollisionBoxes():this._update())},q.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},q.showOverdrawInspector.set=function(ve){this._showOverdrawInspector!==ve&&(this._showOverdrawInspector=ve,this._update())},q.repaint.get=function(){return!!this._repaint},q.repaint.set=function(ve){this._repaint!==ve&&(this._repaint=ve,this.triggerRepaint())},q.vertices.get=function(){return!!this._vertices},q.vertices.set=function(ve){this._vertices=ve,this._update()},ne.prototype._setCacheLimits=function(ve,Se){t.setCacheLimits(ve,Se)},q.version.get=function(){return t.version},Object.defineProperties(ne.prototype,q),ne}(Mi);function or($){$.parentNode&&$.parentNode.removeChild($)}var Fo={showCompass:!0,showZoom:!0,visualizePitch:!1},fo=function($){var ne=this;this.options=t.extend({},Fo,$),this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(q){return q.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(q){return ne._map.zoomIn({},{originalEvent:q})}),a.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(q){return ne._map.zoomOut({},{originalEvent:q})}),a.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(q){ne.options.visualizePitch?ne._map.resetNorthPitch({},{originalEvent:q}):ne._map.resetNorth({},{originalEvent:q})}),this._compassIcon=a.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};fo.prototype._updateZoomButtons=function(){var $=this._map.getZoom();this._zoomInButton.disabled=$===this._map.getMaxZoom(),this._zoomOutButton.disabled=$===this._map.getMinZoom()},fo.prototype._rotateCompassArrow=function(){var $=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=$},fo.prototype.onAdd=function($){return this._map=$,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Di(this._map,this._compass,this.options.visualizePitch)),this._container},fo.prototype.onRemove=function(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},fo.prototype._createButton=function($,ne){var q=a.create("button",$,this._container);return q.type="button",q.addEventListener("click",ne),q},fo.prototype._setButtonTitle=function($,ne){var q=this._map._getUIString("NavigationControl."+ne);$.title=q,$.setAttribute("aria-label",q)};var Di=function($,ne,q){q===void 0&&(q=!1),this._clickTolerance=10,this.element=ne,this.mouseRotate=new li({clickTolerance:$.dragRotate._mouseRotate._clickTolerance}),this.map=$,q&&(this.mousePitch=new Ca({clickTolerance:$.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),a.addEventListener(ne,"mousedown",this.mousedown),a.addEventListener(ne,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(ne,"touchmove",this.touchmove),a.addEventListener(ne,"touchend",this.touchend),a.addEventListener(ne,"touchcancel",this.reset)};function mi($,ne,q){if($=new t.LngLat($.lng,$.lat),ne){var ve=new t.LngLat($.lng-360,$.lat),Se=new t.LngLat($.lng+360,$.lat),Oe=q.locationPoint($).distSqr(ne);q.locationPoint(ve).distSqr(ne)<Oe?$=ve:q.locationPoint(Se).distSqr(ne)<Oe&&($=Se)}for(;Math.abs($.lng-q.center.lng)>180;){var Ye=q.locationPoint($);if(Ye.x>=0&&Ye.y>=0&&Ye.x<=q.width&&Ye.y<=q.height)break;$.lng>q.center.lng?$.lng-=360:$.lng+=360}return $}Di.prototype.down=function($,ne){this.mouseRotate.mousedown($,ne),this.mousePitch&&this.mousePitch.mousedown($,ne),a.disableDrag()},Di.prototype.move=function($,ne){var q=this.map,ve=this.mouseRotate.mousemoveWindow($,ne);if(ve&&ve.bearingDelta&&q.setBearing(q.getBearing()+ve.bearingDelta),this.mousePitch){var Se=this.mousePitch.mousemoveWindow($,ne);Se&&Se.pitchDelta&&q.setPitch(q.getPitch()+Se.pitchDelta)}},Di.prototype.off=function(){var $=this.element;a.removeEventListener($,"mousedown",this.mousedown),a.removeEventListener($,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener($,"touchmove",this.touchmove),a.removeEventListener($,"touchend",this.touchend),a.removeEventListener($,"touchcancel",this.reset),this.offTemp()},Di.prototype.offTemp=function(){a.enableDrag(),a.removeEventListener(t.window,"mousemove",this.mousemove),a.removeEventListener(t.window,"mouseup",this.mouseup)},Di.prototype.mousedown=function($){this.down(t.extend({},$,{ctrlKey:!0,preventDefault:function(){return $.preventDefault()}}),a.mousePos(this.element,$)),a.addEventListener(t.window,"mousemove",this.mousemove),a.addEventListener(t.window,"mouseup",this.mouseup)},Di.prototype.mousemove=function($){this.move($,a.mousePos(this.element,$))},Di.prototype.mouseup=function($){this.mouseRotate.mouseupWindow($),this.mousePitch&&this.mousePitch.mouseupWindow($),this.offTemp()},Di.prototype.touchstart=function($){$.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,$.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return $.preventDefault()}},this._startPos))},Di.prototype.touchmove=function($){$.targetTouches.length!==1?this.reset():(this._lastPos=a.touchPos(this.element,$.targetTouches)[0],this.move({preventDefault:function(){return $.preventDefault()}},this._lastPos))},Di.prototype.touchend=function($){$.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Di.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Is={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function _l($,ne,q){var ve=$.classList;for(var Se in Is)ve.remove("mapboxgl-"+q+"-anchor-"+Se);ve.add("mapboxgl-"+q+"-anchor-"+ne)}var dl,No=function($){function ne(q,ve){var Se=this;if($.call(this),(q instanceof t.window.HTMLElement||ve)&&(q=t.extend({element:q},ve)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=q&&q.anchor||"center",this._color=q&&q.color||"#3FB1CE",this._draggable=q&&q.draggable||!1,this._state="inactive",this._rotation=q&&q.rotation||0,this._rotationAlignment=q&&q.rotationAlignment||"auto",this._pitchAlignment=q&&q.pitchAlignment&&q.pitchAlignment!=="auto"?q.pitchAlignment:this._rotationAlignment,q&&q.element)this._element=q.element,this._offset=t.Point.convert(q&&q.offset||[0,0]);else{this._defaultMarker=!0,this._element=a.create("div"),this._element.setAttribute("aria-label","Map marker");var Oe=a.createNS("http://www.w3.org/2000/svg","svg");Oe.setAttributeNS(null,"display","block"),Oe.setAttributeNS(null,"height","41px"),Oe.setAttributeNS(null,"width","27px"),Oe.setAttributeNS(null,"viewBox","0 0 27 41");var Ye=a.createNS("http://www.w3.org/2000/svg","g");Ye.setAttributeNS(null,"stroke","none"),Ye.setAttributeNS(null,"stroke-width","1"),Ye.setAttributeNS(null,"fill","none"),Ye.setAttributeNS(null,"fill-rule","evenodd");var ut=a.createNS("http://www.w3.org/2000/svg","g");ut.setAttributeNS(null,"fill-rule","nonzero");var bt=a.createNS("http://www.w3.org/2000/svg","g");bt.setAttributeNS(null,"transform","translate(3.0, 29.0)"),bt.setAttributeNS(null,"fill","#000000");for(var jt=0,sr=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];jt<sr.length;jt+=1){var pr=sr[jt],br=a.createNS("http://www.w3.org/2000/svg","ellipse");br.setAttributeNS(null,"opacity","0.04"),br.setAttributeNS(null,"cx","10.5"),br.setAttributeNS(null,"cy","5.80029008"),br.setAttributeNS(null,"rx",pr.rx),br.setAttributeNS(null,"ry",pr.ry),bt.appendChild(br)}var Cr=a.createNS("http://www.w3.org/2000/svg","g");Cr.setAttributeNS(null,"fill",this._color);var Pr=a.createNS("http://www.w3.org/2000/svg","path");Pr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Cr.appendChild(Pr);var jr=a.createNS("http://www.w3.org/2000/svg","g");jr.setAttributeNS(null,"opacity","0.25"),jr.setAttributeNS(null,"fill","#000000");var Mr=a.createNS("http://www.w3.org/2000/svg","path");Mr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),jr.appendChild(Mr);var Ur=a.createNS("http://www.w3.org/2000/svg","g");Ur.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ur.setAttributeNS(null,"fill","#FFFFFF");var Jr=a.createNS("http://www.w3.org/2000/svg","g");Jr.setAttributeNS(null,"transform","translate(8.0, 8.0)");var fn=a.createNS("http://www.w3.org/2000/svg","circle");fn.setAttributeNS(null,"fill","#000000"),fn.setAttributeNS(null,"opacity","0.25"),fn.setAttributeNS(null,"cx","5.5"),fn.setAttributeNS(null,"cy","5.5"),fn.setAttributeNS(null,"r","5.4999962");var zn=a.createNS("http://www.w3.org/2000/svg","circle");zn.setAttributeNS(null,"fill","#FFFFFF"),zn.setAttributeNS(null,"cx","5.5"),zn.setAttributeNS(null,"cy","5.5"),zn.setAttributeNS(null,"r","5.4999962"),Jr.appendChild(fn),Jr.appendChild(zn),ut.appendChild(bt),ut.appendChild(Cr),ut.appendChild(jr),ut.appendChild(Ur),ut.appendChild(Jr),Oe.appendChild(ut),this._element.appendChild(Oe),this._offset=t.Point.convert(q&&q.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(kn){kn.preventDefault()}),this._element.addEventListener("mousedown",function(kn){kn.preventDefault()}),this._element.addEventListener("focus",function(){var kn=Se._map.getContainer();kn.scrollTop=0,kn.scrollLeft=0}),_l(this._element,this._anchor,"marker"),this._popup=null}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.addTo=function(q){return this.remove(),this._map=q,q.getCanvasContainer().appendChild(this._element),q.on("move",this._update),q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},ne.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this},ne.prototype.getLngLat=function(){return this._lngLat},ne.prototype.setLngLat=function(q){return this._lngLat=t.LngLat.convert(q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},ne.prototype.getElement=function(){return this._element},ne.prototype.setPopup=function(q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),q){if(!("offset"in q.options)){var ve=Math.sqrt(Math.pow(13.5,2)/2);q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[ve,-1*(24.6+ve)],"bottom-right":[-ve,-1*(24.6+ve)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},ne.prototype._onKeyPress=function(q){var ve=q.code,Se=q.charCode||q.keyCode;ve!=="Space"&&ve!=="Enter"&&Se!==32&&Se!==13||this.togglePopup()},ne.prototype._onMapClick=function(q){var ve=q.originalEvent.target,Se=this._element;this._popup&&(ve===Se||Se.contains(ve))&&this.togglePopup()},ne.prototype.getPopup=function(){return this._popup},ne.prototype.togglePopup=function(){var q=this._popup;return q?(q.isOpen()?q.remove():q.addTo(this._map),this):this},ne.prototype._update=function(q){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=mi(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ve="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?ve="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(ve="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Se="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Se="rotateX(0deg)":this._pitchAlignment==="map"&&(Se="rotateX("+this._map.getPitch()+"deg)"),q&&q.type!=="moveend"||(this._pos=this._pos.round()),a.setTransform(this._element,Is[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Se+" "+ve)}},ne.prototype.getOffset=function(){return this._offset},ne.prototype.setOffset=function(q){return this._offset=t.Point.convert(q),this._update(),this},ne.prototype._onMove=function(q){this._pos=q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},ne.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new t.Event("dragend")),this._state="inactive"},ne.prototype._addDragHandler=function(q){this._element.contains(q.originalEvent.target)&&(q.preventDefault(),this._positionDelta=q.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},ne.prototype.setDraggable=function(q){return this._draggable=!!q,this._map&&(q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},ne.prototype.isDraggable=function(){return this._draggable},ne.prototype.setRotation=function(q){return this._rotation=q||0,this._update(),this},ne.prototype.getRotation=function(){return this._rotation},ne.prototype.setRotationAlignment=function(q){return this._rotationAlignment=q||"auto",this._update(),this},ne.prototype.getRotationAlignment=function(){return this._rotationAlignment},ne.prototype.setPitchAlignment=function(q){return this._pitchAlignment=q&&q!=="auto"?q:this._rotationAlignment,this._update(),this},ne.prototype.getPitchAlignment=function(){return this._pitchAlignment},ne}(t.Evented),wl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Qs=0,Vo=!1,Tl=function($){function ne(q){$.call(this),this.options=t.extend({},wl,q),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.onAdd=function(q){var ve;return this._map=q,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),ve=this._setupUI,dl!==void 0?ve(dl):t.window.navigator.permissions!==void 0?t.window.navigator.permissions.query({name:"geolocation"}).then(function(Se){ve(dl=Se.state!=="denied")}):ve(dl=!!t.window.navigator.geolocation),this._container},ne.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Qs=0,Vo=!1},ne.prototype._isOutOfMapMaxBounds=function(q){var ve=this._map.getMaxBounds(),Se=q.coords;return ve&&(Se.longitude<ve.getWest()||Se.longitude>ve.getEast()||Se.latitude<ve.getSouth()||Se.latitude>ve.getNorth())},ne.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},ne.prototype._onSuccess=function(q){if(this._map){if(this._isOutOfMapMaxBounds(q))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",q)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(q),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",q)),this._finish()}},ne.prototype._updateCamera=function(q){var ve=new t.LngLat(q.coords.longitude,q.coords.latitude),Se=q.coords.accuracy,Oe=this._map.getBearing(),Ye=t.extend({bearing:Oe},this.options.fitBoundsOptions);this._map.fitBounds(ve.toBounds(Se),Ye,{geolocateSource:!0})},ne.prototype._updateMarker=function(q){if(q){var ve=new t.LngLat(q.coords.longitude,q.coords.latitude);this._accuracyCircleMarker.setLngLat(ve).addTo(this._map),this._userLocationDotMarker.setLngLat(ve).addTo(this._map),this._accuracy=q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},ne.prototype._updateCircleRadius=function(){var q=this._map._container.clientHeight/2,ve=this._map.unproject([0,q]),Se=this._map.unproject([1,q]),Oe=ve.distanceTo(Se),Ye=Math.ceil(2*this._accuracy/Oe);this._circleElement.style.width=Ye+"px",this._circleElement.style.height=Ye+"px"},ne.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},ne.prototype._onError=function(q){if(this._map){if(this.options.trackUserLocation)if(q.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ve=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ve,this._geolocateButton.setAttribute("aria-label",ve),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(q.code===3&&Vo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",q)),this._finish()}},ne.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},ne.prototype._setupUI=function(q){var ve=this;if(this._container.addEventListener("contextmenu",function(Ye){return Ye.preventDefault()}),this._geolocateButton=a.create("button","mapboxgl-ctrl-geolocate",this._container),a.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",q===!1){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Se=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Se,this._geolocateButton.setAttribute("aria-label",Se)}else{var Oe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Oe,this._geolocateButton.setAttribute("aria-label",Oe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new No(this._dotElement),this._circleElement=a.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new No({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Ye){Ye.geolocateSource||ve._watchState!=="ACTIVE_LOCK"||Ye.originalEvent&&Ye.originalEvent.type==="resize"||(ve._watchState="BACKGROUND",ve._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ve._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ve.fire(new t.Event("trackuserlocationend")))})},ne.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Qs--,Vo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var q;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Qs>1?(q={maximumAge:6e5,timeout:0},Vo=!0):(q=this.options.positionOptions,Vo=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,q)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},ne.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},ne}(t.Evented),Hl={maxWidth:100,unit:"metric"},So=function($){this.options=t.extend({},Hl,$),t.bindAll(["_onMove","setUnit"],this)};function ms($,ne,q){var ve=q&&q.maxWidth||100,Se=$._container.clientHeight/2,Oe=$.unproject([0,Se]),Ye=$.unproject([ve,Se]),ut=Oe.distanceTo(Ye);if(q&&q.unit==="imperial"){var bt=3.2808*ut;bt>5280?zs(ne,ve,bt/5280,$._getUIString("ScaleControl.Miles")):zs(ne,ve,bt,$._getUIString("ScaleControl.Feet"))}else q&&q.unit==="nautical"?zs(ne,ve,ut/1852,$._getUIString("ScaleControl.NauticalMiles")):ut>=1e3?zs(ne,ve,ut/1e3,$._getUIString("ScaleControl.Kilometers")):zs(ne,ve,ut,$._getUIString("ScaleControl.Meters"))}function zs($,ne,q,ve){var Se,Oe,Ye,ut=(Se=q,(Oe=Math.pow(10,(""+Math.floor(Se)).length-1))*(Ye=(Ye=Se/Oe)>=10?10:Ye>=5?5:Ye>=3?3:Ye>=2?2:Ye>=1?1:function(bt){var jt=Math.pow(10,Math.ceil(-Math.log(bt)/Math.LN10));return Math.round(bt*jt)/jt}(Ye)));$.style.width=ne*(ut/q)+"px",$.innerHTML=ut+"&nbsp;"+ve}So.prototype.getDefaultPosition=function(){return"bottom-left"},So.prototype._onMove=function(){ms(this._map,this._container,this.options)},So.prototype.onAdd=function($){return this._map=$,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",$.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},So.prototype.onRemove=function(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},So.prototype.setUnit=function($){this.options.unit=$,ms(this._map,this._container,this.options)};var vl=function($){this._fullscreen=!1,$&&$.container&&($.container instanceof t.window.HTMLElement?this._container=$.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};vl.prototype.onAdd=function($){return this._map=$,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},vl.prototype.onRemove=function(){a.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},vl.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},vl.prototype._setupUI=function(){var $=this._fullscreenButton=a.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);a.create("span","mapboxgl-ctrl-icon",$).setAttribute("aria-hidden",!0),$.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},vl.prototype._updateTitle=function(){var $=this._getTitle();this._fullscreenButton.setAttribute("aria-label",$),this._fullscreenButton.title=$},vl.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},vl.prototype._isFullscreen=function(){return this._fullscreen},vl.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},vl.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ro={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Xi=function($){function ne(q){$.call(this),this.options=t.extend(Object.create(Ro),q),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return $&&(ne.__proto__=$),(ne.prototype=Object.create($&&$.prototype)).constructor=ne,ne.prototype.addTo=function(q){return this._map&&this.remove(),this._map=q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},ne.prototype.isOpen=function(){return!!this._map},ne.prototype.remove=function(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},ne.prototype.getLngLat=function(){return this._lngLat},ne.prototype.setLngLat=function(q){return this._lngLat=t.LngLat.convert(q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},ne.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},ne.prototype.getElement=function(){return this._container},ne.prototype.setText=function(q){return this.setDOMContent(t.window.document.createTextNode(q))},ne.prototype.setHTML=function(q){var ve,Se=t.window.document.createDocumentFragment(),Oe=t.window.document.createElement("body");for(Oe.innerHTML=q;ve=Oe.firstChild;)Se.appendChild(ve);return this.setDOMContent(Se)},ne.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},ne.prototype.setMaxWidth=function(q){return this.options.maxWidth=q,this._update(),this},ne.prototype.setDOMContent=function(q){return this._createContent(),this._content.appendChild(q),this._update(),this},ne.prototype.addClassName=function(q){this._container&&this._container.classList.add(q)},ne.prototype.removeClassName=function(q){this._container&&this._container.classList.remove(q)},ne.prototype.toggleClassName=function(q){if(this._container)return this._container.classList.toggle(q)},ne.prototype._createContent=function(){this._content&&a.remove(this._content),this._content=a.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},ne.prototype._onMouseUp=function(q){this._update(q.point)},ne.prototype._onMouseMove=function(q){this._update(q.point)},ne.prototype._onDrag=function(q){this._update(q.point)},ne.prototype._update=function(q){var ve=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(pr){return ve._container.classList.add(pr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=mi(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||q)){var Se=this._pos=this._trackPointer&&q?q:this._map.project(this._lngLat),Oe=this.options.anchor,Ye=function pr(br){if(br){if(typeof br=="number"){var Cr=Math.round(Math.sqrt(.5*Math.pow(br,2)));return{center:new t.Point(0,0),top:new t.Point(0,br),"top-left":new t.Point(Cr,Cr),"top-right":new t.Point(-Cr,Cr),bottom:new t.Point(0,-br),"bottom-left":new t.Point(Cr,-Cr),"bottom-right":new t.Point(-Cr,-Cr),left:new t.Point(br,0),right:new t.Point(-br,0)}}if(br instanceof t.Point||Array.isArray(br)){var Pr=t.Point.convert(br);return{center:Pr,top:Pr,"top-left":Pr,"top-right":Pr,bottom:Pr,"bottom-left":Pr,"bottom-right":Pr,left:Pr,right:Pr}}return{center:t.Point.convert(br.center||[0,0]),top:t.Point.convert(br.top||[0,0]),"top-left":t.Point.convert(br["top-left"]||[0,0]),"top-right":t.Point.convert(br["top-right"]||[0,0]),bottom:t.Point.convert(br.bottom||[0,0]),"bottom-left":t.Point.convert(br["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(br["bottom-right"]||[0,0]),left:t.Point.convert(br.left||[0,0]),right:t.Point.convert(br.right||[0,0])}}return pr(new t.Point(0,0))}(this.options.offset);if(!Oe){var ut,bt=this._container.offsetWidth,jt=this._container.offsetHeight;ut=Se.y+Ye.bottom.y<jt?["top"]:Se.y>this._map.transform.height-jt?["bottom"]:[],Se.x<bt/2?ut.push("left"):Se.x>this._map.transform.width-bt/2&&ut.push("right"),Oe=ut.length===0?"bottom":ut.join("-")}var sr=Se.add(Ye[Oe]).round();a.setTransform(this._container,Is[Oe]+" translate("+sr.x+"px,"+sr.y+"px)"),_l(this._container,Oe,"popup")}},ne.prototype._onClose=function(){this.remove()},ne}(t.Evented),wo={version:t.version,supported:f,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:ks,NavigationControl:fo,GeolocateControl:Tl,AttributionControl:Qn,ScaleControl:So,FullscreenControl:vl,Popup:Xi,Marker:No,Style:en,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){nr().acquire(Je)},clearPrewarmedResources:function(){var $=It;$&&($.isPreloaded()&&$.numActive()===1?($.release(Je),It=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken($){t.config.ACCESS_TOKEN=$},get baseApiUrl(){return t.config.API_URL},set baseApiUrl($){t.config.API_URL=$},get workerCount(){return st.workerCount},set workerCount($){st.workerCount=$},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests($){t.config.MAX_PARALLEL_IMAGE_REQUESTS=$},clearStorage:function($){t.clearTileCache($)},workerUrl:""};return wo}),l})},{}],474:[function(e,v,M){v.exports=c;var r=e("convex-hull");function n(t,f,a){for(var o=new Array(t),u=0;u<t;++u)o[u]=0,u===f&&(o[u]+=.5),u===a&&(o[u]+=.5);return o}function l(t,f){if(f===0||f===(1<<t+1)-1)return[];for(var a=[],o=[],u=0;u<=t;++u)if(f&1<<u){a.push(n(t,u-1,u-1)),o.push(null);for(var h=0;h<=t;++h)~f&1<<h&&(a.push(n(t,u-1,h-1)),o.push([u,h]))}var i=r(a),s=[];e:for(var u=0;u<i.length;++u){for(var p=i[u],d=[],h=0;h<p.length;++h){if(!o[p[h]])continue e;d.push(o[p[h]].slice())}s.push(d)}return s}function c(t){for(var f=1<<t+1,a=new Array(f),o=0;o<f;++o)a[o]=l(t,o);return a}},{"convex-hull":135}],475:[function(e,v,M){var r=e("./normalize"),n=e("gl-mat4/create"),l=e("gl-mat4/clone"),c=e("gl-mat4/determinant"),t=e("gl-mat4/invert"),f=e("gl-mat4/transpose"),a={length:e("gl-vec3/length"),normalize:e("gl-vec3/normalize"),dot:e("gl-vec3/dot"),cross:e("gl-vec3/cross")},o=n(),u=n(),h=[0,0,0,0],i=[[0,0,0],[0,0,0],[0,0,0]],s=[0,0,0];v.exports=function(m,_,T,g,A,k){if(_||(_=[0,0,0]),T||(T=[0,0,0]),g||(g=[0,0,0]),A||(A=[0,0,0,1]),k||(k=[0,0,0,1]),!r(o,m)||(l(u,o),u[3]=0,u[7]=0,u[11]=0,u[15]=1,Math.abs(c(u)<1e-8)))return!1;var R=o[3],L=o[7],z=o[11],E=o[12],S=o[13],C=o[14],D=o[15];if(R!==0||L!==0||z!==0){h[0]=R,h[1]=L,h[2]=z,h[3]=D;var F=t(u,u);if(!F)return!1;f(u,u),p(A,h,u)}else A[0]=A[1]=A[2]=0,A[3]=1;if(_[0]=E,_[1]=S,_[2]=C,d(i,o),T[0]=a.length(i[0]),a.normalize(i[0],i[0]),g[0]=a.dot(i[0],i[1]),y(i[1],i[1],i[0],1,-g[0]),T[1]=a.length(i[1]),a.normalize(i[1],i[1]),g[0]/=T[1],g[1]=a.dot(i[0],i[2]),y(i[2],i[2],i[0],1,-g[1]),g[2]=a.dot(i[1],i[2]),y(i[2],i[2],i[1],1,-g[2]),T[2]=a.length(i[2]),a.normalize(i[2],i[2]),g[1]/=T[2],g[2]/=T[2],a.cross(s,i[1],i[2]),a.dot(i[0],s)<0)for(var N=0;N<3;N++)T[N]*=-1,i[N][0]*=-1,i[N][1]*=-1,i[N][2]*=-1;return k[0]=.5*Math.sqrt(Math.max(1+i[0][0]-i[1][1]-i[2][2],0)),k[1]=.5*Math.sqrt(Math.max(1-i[0][0]+i[1][1]-i[2][2],0)),k[2]=.5*Math.sqrt(Math.max(1-i[0][0]-i[1][1]+i[2][2],0)),k[3]=.5*Math.sqrt(Math.max(1+i[0][0]+i[1][1]+i[2][2],0)),i[2][1]>i[1][2]&&(k[0]=-k[0]),i[0][2]>i[2][0]&&(k[1]=-k[1]),i[1][0]>i[0][1]&&(k[2]=-k[2]),!0};function p(b,m,_){var T=m[0],g=m[1],A=m[2],k=m[3];return b[0]=_[0]*T+_[4]*g+_[8]*A+_[12]*k,b[1]=_[1]*T+_[5]*g+_[9]*A+_[13]*k,b[2]=_[2]*T+_[6]*g+_[10]*A+_[14]*k,b[3]=_[3]*T+_[7]*g+_[11]*A+_[15]*k,b}function d(b,m){b[0][0]=m[0],b[0][1]=m[1],b[0][2]=m[2],b[1][0]=m[4],b[1][1]=m[5],b[1][2]=m[6],b[2][0]=m[8],b[2][1]=m[9],b[2][2]=m[10]}function y(b,m,_,T,g){b[0]=m[0]*T+_[0]*g,b[1]=m[1]*T+_[1]*g,b[2]=m[2]*T+_[2]*g}},{"./normalize":476,"gl-mat4/clone":278,"gl-mat4/create":280,"gl-mat4/determinant":281,"gl-mat4/invert":293,"gl-mat4/transpose":306,"gl-vec3/cross":365,"gl-vec3/dot":370,"gl-vec3/length":380,"gl-vec3/normalize":387}],476:[function(e,v,M){v.exports=function(n,l){var c=l[15];if(c===0)return!1;for(var t=1/c,f=0;f<16;f++)n[f]=l[f]*t;return!0}},{}],477:[function(e,v,M){var r=e("gl-vec3/lerp"),n=e("mat4-recompose"),l=e("mat4-decompose"),c=e("gl-mat4/determinant"),t=e("quat-slerp"),f=h(),a=h(),o=h();v.exports=u;function u(p,d,y,b){if(c(d)===0||c(y)===0)return!1;var m=l(d,f.translate,f.scale,f.skew,f.perspective,f.quaternion),_=l(y,a.translate,a.scale,a.skew,a.perspective,a.quaternion);return!m||!_?!1:(r(o.translate,f.translate,a.translate,b),r(o.skew,f.skew,a.skew,b),r(o.scale,f.scale,a.scale,b),r(o.perspective,f.perspective,a.perspective,b),t(o.quaternion,f.quaternion,a.quaternion,b),n(p,o.translate,o.scale,o.skew,o.perspective,o.quaternion),!0)}function h(){return{translate:i(),scale:i(1),skew:i(),perspective:s(),quaternion:s()}}function i(p){return[p||0,p||0,p||0]}function s(){return[0,0,0,1]}},{"gl-mat4/determinant":281,"gl-vec3/lerp":381,"mat4-decompose":475,"mat4-recompose":478,"quat-slerp":527}],478:[function(e,v,M){var r={identity:e("gl-mat4/identity"),translate:e("gl-mat4/translate"),multiply:e("gl-mat4/multiply"),create:e("gl-mat4/create"),scale:e("gl-mat4/scale"),fromRotationTranslation:e("gl-mat4/fromRotationTranslation")};r.create();var n=r.create();v.exports=function(c,t,f,a,o,u){return r.identity(c),r.fromRotationTranslation(c,u,t),c[3]=o[0],c[7]=o[1],c[11]=o[2],c[15]=o[3],r.identity(n),a[2]!==0&&(n[9]=a[2],r.multiply(c,c,n)),a[1]!==0&&(n[9]=0,n[8]=a[1],r.multiply(c,c,n)),a[0]!==0&&(n[8]=0,n[4]=a[0],r.multiply(c,c,n)),r.scale(c,c,f),c}},{"gl-mat4/create":280,"gl-mat4/fromRotationTranslation":284,"gl-mat4/identity":291,"gl-mat4/multiply":295,"gl-mat4/scale":303,"gl-mat4/translate":305}],479:[function(e,v,M){v.exports=Math.log2||function(r){return Math.log(r)*Math.LOG2E}},{}],480:[function(e,v,M){var r=e("binary-search-bounds"),n=e("mat4-interpolate"),l=e("gl-mat4/invert"),c=e("gl-mat4/rotateX"),t=e("gl-mat4/rotateY"),f=e("gl-mat4/rotateZ"),a=e("gl-mat4/lookAt"),o=e("gl-mat4/translate");e("gl-mat4/scale");var u=e("gl-vec3/normalize"),h=[0,0,0];v.exports=d;function i(y){this._components=y.slice(),this._time=[0],this.prevMatrix=y.slice(),this.nextMatrix=y.slice(),this.computedMatrix=y.slice(),this.computedInverse=y.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var s=i.prototype;s.recalcMatrix=function(y){var b=this._time,m=r.le(b,y),_=this.computedMatrix;if(!(m<0)){var T=this._components;if(m===b.length-1)for(var g=16*m,A=0;A<16;++A)_[A]=T[g++];else{for(var k=b[m+1]-b[m],g=16*m,R=this.prevMatrix,L=!0,A=0;A<16;++A)R[A]=T[g++];for(var z=this.nextMatrix,A=0;A<16;++A)z[A]=T[g++],L=L&&R[A]===z[A];if(k<1e-6||L)for(var A=0;A<16;++A)_[A]=R[A];else n(_,R,z,(y-b[m])/k)}var E=this.computedUp;E[0]=_[1],E[1]=_[5],E[2]=_[9],u(E,E);var S=this.computedInverse;l(S,_);var C=this.computedEye,D=S[15];C[0]=S[12]/D,C[1]=S[13]/D,C[2]=S[14]/D;for(var F=this.computedCenter,N=Math.exp(this.computedRadius[0]),A=0;A<3;++A)F[A]=C[A]-_[2+4*A]*N}},s.idle=function(y){if(!(y<this.lastT())){for(var b=this._components,m=b.length-16,_=0;_<16;++_)b.push(b[m++]);this._time.push(y)}},s.flush=function(y){var b=r.gt(this._time,y)-2;b<0||(this._time.splice(0,b),this._components.splice(0,16*b))},s.lastT=function(){return this._time[this._time.length-1]},s.lookAt=function(y,b,m,_){this.recalcMatrix(y),b=b||this.computedEye,m=m||h,_=_||this.computedUp,this.setMatrix(y,a(this.computedMatrix,b,m,_));for(var T=0,g=0;g<3;++g)T+=Math.pow(m[g]-b[g],2);T=Math.log(Math.sqrt(T)),this.computedRadius[0]=T},s.rotate=function(y,b,m,_){this.recalcMatrix(y);var T=this.computedInverse;b&&t(T,T,b),m&&c(T,T,m),_&&f(T,T,_),this.setMatrix(y,l(this.computedMatrix,T))};var p=[0,0,0];s.pan=function(y,b,m,_){p[0]=-(b||0),p[1]=-(m||0),p[2]=-(_||0),this.recalcMatrix(y);var T=this.computedInverse;o(T,T,p),this.setMatrix(y,l(T,T))},s.translate=function(y,b,m,_){p[0]=b||0,p[1]=m||0,p[2]=_||0,this.recalcMatrix(y);var T=this.computedMatrix;o(T,T,p),this.setMatrix(y,T)},s.setMatrix=function(y,b){if(!(y<this.lastT())){this._time.push(y);for(var m=0;m<16;++m)this._components.push(b[m])}},s.setDistance=function(y,b){this.computedRadius[0]=b},s.setDistanceLimits=function(y,b){var m=this._limits;m[0]=y,m[1]=b},s.getDistanceLimits=function(y){var b=this._limits;return y?(y[0]=b[0],y[1]=b[1],y):b};function d(y){y=y||{};var b=y.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new i(b)}},{"binary-search-bounds":481,"gl-mat4/invert":293,"gl-mat4/lookAt":294,"gl-mat4/rotateX":300,"gl-mat4/rotateY":301,"gl-mat4/rotateZ":302,"gl-mat4/scale":303,"gl-mat4/translate":305,"gl-vec3/normalize":387,"mat4-interpolate":477}],481:[function(e,v,M){arguments[4][243][0].apply(M,arguments)},{dup:243}],482:[function(e,v,M){v.exports=n;var r=e("robust-orientation")[3];function n(l){var c=l.length;if(c<3){for(var s=new Array(c),t=0;t<c;++t)s[t]=t;return c===2&&l[0][0]===l[1][0]&&l[0][1]===l[1][1]?[0]:s}for(var f=new Array(c),t=0;t<c;++t)f[t]=t;f.sort(function(b,m){var _=l[b][0]-l[m][0];return _||l[b][1]-l[m][1]});for(var a=[f[0],f[1]],o=[f[0],f[1]],t=2;t<c;++t){for(var u=f[t],h=l[u],i=a.length;i>1&&r(l[a[i-2]],l[a[i-1]],h)<=0;)i-=1,a.pop();for(a.push(u),i=o.length;i>1&&r(l[o[i-2]],l[o[i-1]],h)>=0;)i-=1,o.pop();o.push(u)}for(var s=new Array(o.length+a.length-2),p=0,t=0,d=a.length;t<d;++t)s[p++]=a[t];for(var y=o.length-2;y>0;--y)s[p++]=o[y];return s}},{"robust-orientation":548}],483:[function(e,v,M){v.exports=n;var r=e("mouse-event");function n(l,c){c||(c=l,l=window);var t=0,f=0,a=0,o={shift:!1,alt:!1,control:!1,meta:!1},u=!1;function h(A){var k=!1;return"altKey"in A&&(k=k||A.altKey!==o.alt,o.alt=!!A.altKey),"shiftKey"in A&&(k=k||A.shiftKey!==o.shift,o.shift=!!A.shiftKey),"ctrlKey"in A&&(k=k||A.ctrlKey!==o.control,o.control=!!A.ctrlKey),"metaKey"in A&&(k=k||A.metaKey!==o.meta,o.meta=!!A.metaKey),k}function i(A,k){var R=r.x(k),L=r.y(k);"buttons"in k&&(A=k.buttons|0),(A!==t||R!==f||L!==a||h(k))&&(t=A|0,f=R||0,a=L||0,c&&c(t,f,a,o))}function s(A){i(0,A)}function p(){(t||f||a||o.shift||o.alt||o.meta||o.control)&&(f=a=0,t=0,o.shift=o.alt=o.control=o.meta=!1,c&&c(0,0,0,o))}function d(A){h(A)&&c&&c(t,f,a,o)}function y(A){r.buttons(A)===0?i(0,A):i(t,A)}function b(A){i(t|r.buttons(A),A)}function m(A){i(t&~r.buttons(A),A)}function _(){u||(u=!0,l.addEventListener("mousemove",y),l.addEventListener("mousedown",b),l.addEventListener("mouseup",m),l.addEventListener("mouseleave",s),l.addEventListener("mouseenter",s),l.addEventListener("mouseout",s),l.addEventListener("mouseover",s),l.addEventListener("blur",p),l.addEventListener("keyup",d),l.addEventListener("keydown",d),l.addEventListener("keypress",d),l!==window&&(window.addEventListener("blur",p),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}function T(){u&&(u=!1,l.removeEventListener("mousemove",y),l.removeEventListener("mousedown",b),l.removeEventListener("mouseup",m),l.removeEventListener("mouseleave",s),l.removeEventListener("mouseenter",s),l.removeEventListener("mouseout",s),l.removeEventListener("mouseover",s),l.removeEventListener("blur",p),l.removeEventListener("keyup",d),l.removeEventListener("keydown",d),l.removeEventListener("keypress",d),l!==window&&(window.removeEventListener("blur",p),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))}_();var g={element:l};return Object.defineProperties(g,{enabled:{get:function(){return u},set:function(A){A?_():T()},enumerable:!0},buttons:{get:function(){return t},enumerable:!0},x:{get:function(){return f},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),g}},{"mouse-event":485}],484:[function(e,v,M){var r={left:0,top:0};v.exports=n;function n(c,t,f){t=t||c.currentTarget||c.srcElement,Array.isArray(f)||(f=[0,0]);var a=c.clientX||0,o=c.clientY||0,u=l(t);return f[0]=a-u.left,f[1]=o-u.top,f}function l(c){return c===window||c===document||c===document.body?r:c.getBoundingClientRect()}},{}],485:[function(e,v,M){function r(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){var f=t.which;if(f===2)return 4;if(f===3)return 2;if(f>0)return 1<<f-1}else if("button"in t){var f=t.button;if(f===1)return 4;if(f===2)return 2;if(f>=0)return 1<<f}}return 0}M.buttons=r;function n(t){return t.target||t.srcElement||window}M.element=n;function l(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;var f=n(t),a=f.getBoundingClientRect();return t.clientX-a.left}return 0}M.x=l;function c(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;var f=n(t),a=f.getBoundingClientRect();return t.clientY-a.top}return 0}M.y=c},{}],486:[function(e,v,M){var r=e("to-px");v.exports=n;function n(l,c,t){typeof l=="function"&&(t=!!c,c=l,l=window);var f=r("ex",l),a=function(o){t&&o.preventDefault();var u=o.deltaX||0,h=o.deltaY||0,i=o.deltaZ||0,s=o.deltaMode,p=1;switch(s){case 1:p=f;break;case 2:p=window.innerHeight;break}if(u*=p,h*=p,i*=p,u||h||i)return c(u,h,i,o)};return l.addEventListener("wheel",a),a}},{"to-px":578}],487:[function(e,v,M){var r=e("typedarray-pool");v.exports=z;function n(E){return"a"+E}function l(E){return"d"+E}function c(E,S){return"c"+E+"_"+S}function t(E){return"s"+E}function f(E,S){return"t"+E+"_"+S}function a(E){return"o"+E}function o(E){return"x"+E}function u(E){return"p"+E}function h(E,S){return"d"+E+"_"+S}function i(E){return"i"+E}function s(E,S){return"u"+E+"_"+S}function p(E){return"b"+E}function d(E){return"y"+E}function y(E){return"e"+E}function b(E){return"v"+E}var m="V",_="P",T="N",g="Q",A="X",k="T";function R(E,S,C){for(var D=0,F=0;F<E;++F)S&1<<F&&(D|=1<<C[F]);return D}function L(E,S,C,D,F,N){var G=N.length,U=F.length;if(U<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var X="extractContour"+F.join("_"),I=[],B=[],j=[],H=0;H<G;++H)j.push(n(H));for(var H=0;H<D;++H)j.push(o(H));for(var H=0;H<U;++H)B.push(t(H)+"="+n(0)+".shape["+H+"]|0");for(var H=0;H<G;++H){B.push(l(H)+"="+n(H)+".data",a(H)+"="+n(H)+".offset|0");for(var K=0;K<U;++K)B.push(f(H,K)+"="+n(H)+".stride["+K+"]|0")}for(var H=0;H<G;++H){B.push(u(H)+"="+a(H)),B.push(c(H,0));for(var K=1;K<1<<U;++K){for(var te=[],J=0;J<U;++J)K&1<<J&&te.push("-"+f(H,J));B.push(h(H,K)+"=("+te.join("")+")|0"),B.push(c(H,K)+"=0")}}for(var H=0;H<G;++H)for(var K=0;K<U;++K){var oe=[f(H,F[K])];K>0&&oe.push(f(H,F[K-1])+"*"+t(F[K-1])),B.push(s(H,F[K])+"=("+oe.join("-")+")|0")}for(var H=0;H<U;++H)B.push(i(H)+"=0");B.push(T+"=0");for(var ie=["2"],H=U-2;H>=0;--H)ie.push(t(F[H]));B.push(g+"=("+ie.join("*")+")|0",_+"=mallocUint32("+g+")",m+"=mallocUint32("+g+")",A+"=0"),B.push(p(0)+"=0");for(var K=1;K<1<<U;++K){for(var Q=[],V=[],J=0;J<U;++J)K&1<<J&&(V.length===0?Q.push("1"):Q.unshift(V.join("*"))),V.push(t(F[J]));var se="";Q[0].indexOf(t(F[U-2]))<0&&(se="-");var re=R(U,K,F);B.push(y(re)+"=(-"+Q.join("-")+")|0",d(re)+"=("+se+Q.join("-")+")|0",p(re)+"=0")}B.push(b(0)+"=0",k+"=0");function ee(be,ke){I.push("for(",i(F[be]),"=",ke,";",i(F[be]),"<",t(F[be]),";","++",i(F[be]),"){")}function ae(be){for(var ke=0;ke<G;++ke)I.push(u(ke),"+=",s(ke,F[be]),";");I.push("}")}function fe(be){for(var ke=be-1;ke>=0;--ke)ee(ke,0);for(var Pe=[],ke=0;ke<G;++ke)N[ke]?Pe.push(l(ke)+".get("+u(ke)+")"):Pe.push(l(ke)+"["+u(ke)+"]");for(var ke=0;ke<D;++ke)Pe.push(o(ke));I.push(_,"[",A,"++]=phase(",Pe.join(),");");for(var ke=0;ke<be;++ke)ae(ke);for(var je=0;je<G;++je)I.push(u(je),"+=",s(je,F[be]),";")}function de(be){for(var ke=0;ke<G;++ke)N[ke]?I.push(c(ke,0),"=",l(ke),".get(",u(ke),");"):I.push(c(ke,0),"=",l(ke),"[",u(ke),"];");for(var Pe=[],ke=0;ke<G;++ke)Pe.push(c(ke,0));for(var ke=0;ke<D;++ke)Pe.push(o(ke));I.push(p(0),"=",_,"[",A,"]=phase(",Pe.join(),");");for(var je=1;je<1<<U;++je)I.push(p(je),"=",_,"[",A,"+",y(je),"];");for(var ze=[],je=1;je<1<<U;++je)ze.push("("+p(0)+"!=="+p(je)+")");I.push("if(",ze.join("||"),"){");for(var Ze=[],ke=0;ke<U;++ke)Ze.push(i(ke));for(var ke=0;ke<G;++ke){Ze.push(c(ke,0));for(var je=1;je<1<<U;++je)N[ke]?I.push(c(ke,je),"=",l(ke),".get(",u(ke),"+",h(ke,je),");"):I.push(c(ke,je),"=",l(ke),"[",u(ke),"+",h(ke,je),"];"),Ze.push(c(ke,je))}for(var ke=0;ke<1<<U;++ke)Ze.push(p(ke));for(var ke=0;ke<D;++ke)Ze.push(o(ke));I.push("vertex(",Ze.join(),");",b(0),"=",m,"[",A,"]=",T,"++;");for(var tt=(1<<U)-1,Ce=p(tt),je=0;je<U;++je)if(!(be&~(1<<je))){for(var Ae=tt^1<<je,Ne=p(Ae),qe=[],At=Ae;At>0;At=At-1&Ae)qe.push(m+"["+A+"+"+y(At)+"]");qe.push(b(0));for(var At=0;At<G;++At)je&1?qe.push(c(At,tt),c(At,Ae)):qe.push(c(At,Ae),c(At,tt));je&1?qe.push(Ce,Ne):qe.push(Ne,Ce);for(var At=0;At<D;++At)qe.push(o(At));I.push("if(",Ce,"!==",Ne,"){","face(",qe.join(),")}")}I.push("}",A,"+=1;")}function pe(){for(var be=1;be<1<<U;++be)I.push(k,"=",y(be),";",y(be),"=",d(be),";",d(be),"=",k,";")}function W(be,ke){if(be<0){de(ke);return}fe(be),I.push("if(",t(F[be]),">0){",i(F[be]),"=1;"),W(be-1,ke|1<<F[be]);for(var Pe=0;Pe<G;++Pe)I.push(u(Pe),"+=",s(Pe,F[be]),";");be===U-1&&(I.push(A,"=0;"),pe()),ee(be,2),W(be-1,ke),be===U-1&&(I.push("if(",i(F[U-1]),"&1){",A,"=0;}"),pe()),ae(be),I.push("}")}W(U-1,0),I.push("freeUint32(",m,");freeUint32(",_,");");var ue=["'use strict';","function ",X,"(",j.join(),"){","var ",B.join(),";",I.join(""),"}","return ",X].join(""),me=new Function("vertex","face","phase","mallocUint32","freeUint32",ue);return me(E,S,C,r.mallocUint32,r.freeUint32)}function z(E){function S(X){throw new Error("ndarray-extract-contour: "+X)}typeof E!="object"&&S("Must specify arguments");var C=E.order;Array.isArray(C)||S("Must specify order");var D=E.arrayArguments||1;D<1&&S("Must have at least one array argument");var F=E.scalarArguments||0;F<0&&S("Scalar arg count must be > 0"),typeof E.vertex!="function"&&S("Must specify vertex creation function"),typeof E.cell!="function"&&S("Must specify cell creation function"),typeof E.phase!="function"&&S("Must specify phase function");for(var N=E.getters||[],G=new Array(D),U=0;U<D;++U)N.indexOf(U)>=0?G[U]=!0:G[U]=!1;return L(E.vertex,E.cell,E.phase,F,C,G)}},{"typedarray-pool":595}],488:[function(e,v,M){v.exports=h;var r=e("dup"),n=e("cwise-compiler"),l={},c={},t={body:"",args:[],thisVars:[],localVars:[]},f=n({args:["array","array","array"],pre:t,post:t,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),a=n({args:["array"],pre:t,post:t,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"});function o(i){if(i in l)return l[i];for(var s=[],p=0;p<i;++p)s.push("out",p,"s=0.5*(inp",p,"l-inp",p,"r);");for(var d=["array"],y=["junk"],p=0;p<i;++p){d.push("array"),y.push("out"+p+"s");var b=r(i);b[p]=-1,d.push({array:0,offset:b.slice()}),b[p]=1,d.push({array:0,offset:b.slice()}),y.push("inp"+p+"l","inp"+p+"r")}return l[i]=n({args:d,pre:t,post:t,body:{body:s.join(""),args:y.map(function(m){return{name:m,lvalue:m.indexOf("out")===0,rvalue:m.indexOf("inp")===0,count:m!=="junk"|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+i})}function u(i){var s=i.join(),L=c[s];if(L)return L;var p=i.length,d=["function gradient(dst,src){var s=src.shape.slice();"];function y(z){for(var E=p-z.length,S=[],C=[],D=[],F=0;F<p;++F)z.indexOf(F+1)>=0?D.push("0"):z.indexOf(-(F+1))>=0?D.push("s["+F+"]-1"):(D.push("-1"),S.push("1"),C.push("s["+F+"]-2"));var N=".lo("+S.join()+").hi("+C.join()+")";if(S.length===0&&(N=""),E>0){d.push("if(1");for(var F=0;F<p;++F)z.indexOf(F+1)>=0||z.indexOf(-(F+1))>=0||d.push("&&s[",F,"]>2");d.push("){grad",E,"(src.pick(",D.join(),")",N);for(var F=0;F<p;++F)z.indexOf(F+1)>=0||z.indexOf(-(F+1))>=0||d.push(",dst.pick(",D.join(),",",F,")",N);d.push(");")}for(var F=0;F<z.length;++F){var G=Math.abs(z[F])-1,U="dst.pick("+D.join()+","+G+")"+N;switch(i[G]){case"clamp":var X=D.slice(),I=D.slice();z[F]<0?X[G]="s["+G+"]-2":I[G]="1",E===0?d.push("if(s[",G,"]>1){dst.set(",D.join(),",",G,",0.5*(src.get(",X.join(),")-src.get(",I.join(),")))}else{dst.set(",D.join(),",",G,",0)};"):d.push("if(s[",G,"]>1){diff(",U,",src.pick(",X.join(),")",N,",src.pick(",I.join(),")",N,");}else{zero(",U,");};");break;case"mirror":E===0?d.push("dst.set(",D.join(),",",G,",0);"):d.push("zero(",U,");");break;case"wrap":var B=D.slice(),j=D.slice();z[F]<0?(B[G]="s["+G+"]-2",j[G]="0"):(B[G]="s["+G+"]-1",j[G]="1"),E===0?d.push("if(s[",G,"]>2){dst.set(",D.join(),",",G,",0.5*(src.get(",B.join(),")-src.get(",j.join(),")))}else{dst.set(",D.join(),",",G,",0)};"):d.push("if(s[",G,"]>2){diff(",U,",src.pick(",B.join(),")",N,",src.pick(",j.join(),")",N,");}else{zero(",U,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}E>0&&d.push("};")}for(var b=0;b<1<<p;++b){for(var m=[],_=0;_<p;++_)b&1<<_&&m.push(_+1);for(var T=0;T<1<<m.length;++T){for(var g=m.slice(),_=0;_<m.length;++_)T&1<<_&&(g[_]=-g[_]);y(g)}}d.push("return dst;};return gradient");for(var A=["diff","zero"],k=[f,a],b=1;b<=p;++b)A.push("grad"+b),k.push(o(b));A.push(d.join(""));var R=Function.apply(void 0,A),L=R.apply(void 0,k);return l[s]=L,L}function h(i,s,p){if(Array.isArray(p)){if(p.length!==s.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else typeof p=="string"?p=r(s.dimension,p):p=r(s.dimension,"clamp");if(i.dimension!==s.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(i.shape[s.dimension]!==s.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var d=0;d<s.dimension;++d)if(i.shape[d]!==s.shape[d])throw new Error("ndarray-gradient: shape mismatch");if(s.size===0)return i;if(s.dimension<=0)return i.set(0),i;var y=u(p);return y(i,s)}},{"cwise-compiler":151,dup:176}],489:[function(e,v,M){function r(f,a){var o=Math.floor(a),u=a-o,h=0<=o&&o<f.shape[0],i=0<=o+1&&o+1<f.shape[0],s=h?+f.get(o):0,p=i?+f.get(o+1):0;return(1-u)*s+u*p}function n(f,a,o){var u=Math.floor(a),h=a-u,i=0<=u&&u<f.shape[0],s=0<=u+1&&u+1<f.shape[0],p=Math.floor(o),d=o-p,y=0<=p&&p<f.shape[1],b=0<=p+1&&p+1<f.shape[1],m=i&&y?f.get(u,p):0,_=i&&b?f.get(u,p+1):0,T=s&&y?f.get(u+1,p):0,g=s&&b?f.get(u+1,p+1):0;return(1-d)*((1-h)*m+h*T)+d*((1-h)*_+h*g)}function l(f,a,o,u){var h=Math.floor(a),i=a-h,s=0<=h&&h<f.shape[0],p=0<=h+1&&h+1<f.shape[0],d=Math.floor(o),y=o-d,b=0<=d&&d<f.shape[1],m=0<=d+1&&d+1<f.shape[1],_=Math.floor(u),T=u-_,g=0<=_&&_<f.shape[2],A=0<=_+1&&_+1<f.shape[2],k=s&&b&&g?f.get(h,d,_):0,R=s&&m&&g?f.get(h,d+1,_):0,L=p&&b&&g?f.get(h+1,d,_):0,z=p&&m&&g?f.get(h+1,d+1,_):0,E=s&&b&&A?f.get(h,d,_+1):0,S=s&&m&&A?f.get(h,d+1,_+1):0,C=p&&b&&A?f.get(h+1,d,_+1):0,D=p&&m&&A?f.get(h+1,d+1,_+1):0;return(1-T)*((1-y)*((1-i)*k+i*L)+y*((1-i)*R+i*z))+T*((1-y)*((1-i)*E+i*C)+y*((1-i)*S+i*D))}function c(f){var a=f.shape.length|0,o=new Array(a),u=new Array(a),h=new Array(a),i=new Array(a),s,p;for(s=0;s<a;++s)p=+arguments[s+1],o[s]=Math.floor(p),u[s]=p-o[s],h[s]=0<=o[s]&&o[s]<f.shape[s],i[s]=0<=o[s]+1&&o[s]+1<f.shape[s];var d=0,y,b,m;e:for(s=0;s<1<<a;++s){for(b=1,m=f.offset,y=0;y<a;++y)if(s&1<<y){if(!i[y])continue e;b*=u[y],m+=f.stride[y]*(o[y]+1)}else{if(!h[y])continue e;b*=1-u[y],m+=f.stride[y]*o[y]}d+=b*f.data[m]}return d}function t(f,a,o,u){switch(f.shape.length){case 0:return 0;case 1:return r(f,a);case 2:return n(f,a,o);case 3:return l(f,a,o,u);default:return c.apply(void 0,arguments)}}v.exports=t,v.exports.d1=r,v.exports.d2=n,v.exports.d3=l},{}],490:[function(e,v,M){var r=e("cwise-compiler"),n={body:"",args:[],thisVars:[],localVars:[]};function l(s){if(!s)return n;for(var p=0;p<s.args.length;++p){var d=s.args[p];p===0?s.args[p]={name:d,lvalue:!0,rvalue:!!s.rvalue,count:s.count||1}:s.args[p]={name:d,lvalue:!1,rvalue:!0,count:1}}return s.thisVars||(s.thisVars=[]),s.localVars||(s.localVars=[]),s}function c(s){return r({args:s.args,pre:l(s.pre),body:l(s.body),post:l(s.proc),funcName:s.funcName})}function t(s){for(var p=[],d=0;d<s.args.length;++d)p.push("a"+d);var y=new Function("P",["return function ",s.funcName,"_ndarrayops(",p.join(","),") {P(",p.join(","),");return a0}"].join(""));return y(c(s))}var f={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var s in f){var p=f[s];M[s]=t({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+p+"c"},funcName:s}),M[s+"eq"]=t({args:["array","array"],body:{args:["a","b"],body:"a"+p+"=b"},rvalue:!0,funcName:s+"eq"}),M[s+"s"]=t({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+p+"s"},funcName:s+"s"}),M[s+"seq"]=t({args:["array","scalar"],body:{args:["a","s"],body:"a"+p+"=s"},rvalue:!0,funcName:s+"seq"})}})();var a={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var s in a){var p=a[s];M[s]=t({args:["array","array"],body:{args:["a","b"],body:"a="+p+"b"},funcName:s}),M[s+"eq"]=t({args:["array"],body:{args:["a"],body:"a="+p+"a"},rvalue:!0,count:2,funcName:s+"eq"})}})();var o={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var s in o){var p=o[s];M[s]=t({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+p+"c"},funcName:s}),M[s+"s"]=t({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+p+"s"},funcName:s+"s"}),M[s+"eq"]=t({args:["array","array"],body:{args:["a","b"],body:"a=a"+p+"b"},rvalue:!0,count:2,funcName:s+"eq"}),M[s+"seq"]=t({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+p+"s"},rvalue:!0,count:2,funcName:s+"seq"})}})();var u=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var s=0;s<u.length;++s){var p=u[s];M[p]=t({args:["array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:p}),M[p+"eq"]=t({args:["array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"eq"})}})();var h=["max","min","atan2","pow"];(function(){for(var s=0;s<h.length;++s){var p=h[s];M[p]=t({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:p}),M[p+"s"]=t({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:p+"s"}),M[p+"eq"]=t({args:["array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"eq"}),M[p+"seq"]=t({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"seq"})}})();var i=["atan2","pow"];(function(){for(var s=0;s<i.length;++s){var p=i[s];M[p+"op"]=t({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:p+"op"}),M[p+"ops"]=t({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:p+"ops"}),M[p+"opeq"]=t({args:["array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"opeq"}),M[p+"opseq"]=t({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"opseq"})}})(),M.any=r({args:["array"],pre:n,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),M.all=r({args:["array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),M.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),M.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),M.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),M.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),M.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),M.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),M.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),M.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),M.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),M.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),M.random=t({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),M.assign=t({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),M.assigns=t({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),M.equals=r({args:["array","array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":151}],491:[function(e,v,M){var r=e("ndarray"),n=e("./doConvert.js");v.exports=function(c,t){for(var f=[],a=c,o=1;Array.isArray(a);)f.push(a.length),o*=a.length,a=a[0];return f.length===0?r():(t||(t=r(new Float64Array(o),f)),n(t,c),t)}},{"./doConvert.js":492,ndarray:495}],492:[function(e,v,M){v.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":151}],493:[function(e,v,M){var r=e("typedarray-pool"),n=32;function l(o){switch(o){case"uint8":return[r.mallocUint8,r.freeUint8];case"uint16":return[r.mallocUint16,r.freeUint16];case"uint32":return[r.mallocUint32,r.freeUint32];case"int8":return[r.mallocInt8,r.freeInt8];case"int16":return[r.mallocInt16,r.freeInt16];case"int32":return[r.mallocInt32,r.freeInt32];case"float32":return[r.mallocFloat,r.freeFloat];case"float64":return[r.mallocDouble,r.freeDouble];default:return null}}function c(o){for(var u=[],h=0;h<o;++h)u.push("s"+h);for(var h=0;h<o;++h)u.push("n"+h);for(var h=1;h<o;++h)u.push("d"+h);for(var h=1;h<o;++h)u.push("e"+h);for(var h=1;h<o;++h)u.push("f"+h);return u}function t(o,u){var h=["'use strict'"],i=["ndarrayInsertionSort",o.join("d"),u].join(""),s=["left","right","data","offset"].concat(c(o.length)),p=l(u),d=["i,j,cptr,ptr=left*s0+offset"];if(o.length>1){for(var y=[],b=1;b<o.length;++b)d.push("i"+b),y.push("n"+b);p?d.push("scratch=malloc("+y.join("*")+")"):d.push("scratch=new Array("+y.join("*")+")"),d.push("dptr","sptr","a","b")}else d.push("scratch");function m(A){return u==="generic"?["data.get(",A,")"].join(""):["data[",A,"]"].join("")}function _(A,k){return u==="generic"?["data.set(",A,",",k,")"].join(""):["data[",A,"]=",k].join("")}if(h.push(["function ",i,"(",s.join(","),"){var ",d.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),o.length>1){h.push("dptr=0;sptr=ptr");for(var b=o.length-1;b>=0;--b){var T=o[b];T!==0&&h.push(["for(i",T,"=0;i",T,"<n",T,";++i",T,"){"].join(""))}h.push("scratch[dptr++]=",m("sptr"));for(var b=0;b<o.length;++b){var T=o[b];T!==0&&h.push("sptr+=d"+T,"}")}h.push("__g:while(j-->left){","dptr=0","sptr=cptr-s0");for(var b=1;b<o.length;++b)b===1&&h.push("__l:"),h.push(["for(i",b,"=0;i",b,"<n",b,";++i",b,"){"].join(""));h.push(["a=",m("sptr"),`
b=scratch[dptr]
if(a<b){break __g}
if(a>b){break __l}`].join(""));for(var b=o.length-1;b>=1;--b)h.push("sptr+=e"+b,"dptr+=f"+b,"}");h.push("dptr=cptr;sptr=cptr-s0");for(var b=o.length-1;b>=0;--b){var T=o[b];T!==0&&h.push(["for(i",T,"=0;i",T,"<n",T,";++i",T,"){"].join(""))}h.push(_("dptr",m("sptr")));for(var b=0;b<o.length;++b){var T=o[b];T!==0&&h.push(["dptr+=d",T,";sptr+=d",T].join(""),"}")}h.push(`cptr-=s0
}`),h.push("dptr=cptr;sptr=0");for(var b=o.length-1;b>=0;--b){var T=o[b];T!==0&&h.push(["for(i",T,"=0;i",T,"<n",T,";++i",T,"){"].join(""))}h.push(_("dptr","scratch[sptr++]"));for(var b=0;b<o.length;++b){var T=o[b];T!==0&&h.push("dptr+=d"+T,"}")}}else h.push("scratch="+m("ptr"),"while((j-->left)&&("+m("cptr-s0")+">scratch)){",_("cptr",m("cptr-s0")),"cptr-=s0","}",_("cptr","scratch"));if(h.push("}"),o.length>1&&p&&h.push("free(scratch)"),h.push("} return "+i),p){var g=new Function("malloc","free",h.join(`
`));return g(p[0],p[1])}else{var g=new Function(h.join(`
`));return g()}}function f(o,u,h){var i=["'use strict'"],s=["ndarrayQuickSort",o.join("d"),u].join(""),p=["left","right","data","offset"].concat(c(o.length)),d=l(u),y=0;i.push(["function ",s,"(",p.join(","),"){"].join(""));var b=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(o.length>1){for(var m=[],_=1;_<o.length;++_)m.push("n"+_),b.push("i"+_);for(var _=0;_<8;++_)b.push("b_ptr"+_);b.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+m.join("*")),d?b.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):b.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else b.push("pivot1","pivot2");i.push("var "+b.join(","));function T(I){return["(offset+",I,"*s0)"].join("")}function g(I){return u==="generic"?["data.get(",I,")"].join(""):["data[",I,"]"].join("")}function A(I,B){return u==="generic"?["data.set(",I,",",B,")"].join(""):["data[",I,"]=",B].join("")}function k(I,B,j){if(I.length===1)i.push("ptr0="+T(I[0]));else for(var H=0;H<I.length;++H)i.push(["b_ptr",H,"=s0*",I[H]].join(""));B&&i.push("pivot_ptr=0"),i.push("ptr_shift=offset");for(var H=o.length-1;H>=0;--H){var K=o[H];K!==0&&i.push(["for(i",K,"=0;i",K,"<n",K,";++i",K,"){"].join(""))}if(I.length>1)for(var H=0;H<I.length;++H)i.push(["ptr",H,"=b_ptr",H,"+ptr_shift"].join(""));i.push(j),B&&i.push("++pivot_ptr");for(var H=0;H<o.length;++H){var K=o[H];K!==0&&(I.length>1?i.push("ptr_shift+=d"+K):i.push("ptr0+=d"+K),i.push("}"))}}function R(I,B,j,H){if(B.length===1)i.push("ptr0="+T(B[0]));else{for(var K=0;K<B.length;++K)i.push(["b_ptr",K,"=s0*",B[K]].join(""));i.push("ptr_shift=offset")}j&&i.push("pivot_ptr=0"),I&&i.push(I+":");for(var K=1;K<o.length;++K)i.push(["for(i",K,"=0;i",K,"<n",K,";++i",K,"){"].join(""));if(B.length>1)for(var K=0;K<B.length;++K)i.push(["ptr",K,"=b_ptr",K,"+ptr_shift"].join(""));i.push(H);for(var K=o.length-1;K>=1;--K)j&&i.push("pivot_ptr+=f"+K),B.length>1?i.push("ptr_shift+=e"+K):i.push("ptr0+=e"+K),i.push("}")}function L(){o.length>1&&d&&i.push("free(pivot1)","free(pivot2)")}function z(I,B){var j="el"+I,H="el"+B;if(o.length>1){var K="__l"+ ++y;R(K,[j,H],!1,["comp=",g("ptr0"),"-",g("ptr1"),`
`,"if(comp>0){tmp0=",j,";",j,"=",H,";",H,"=tmp0;break ",K,`}
`,"if(comp<0){break ",K,"}"].join(""))}else i.push(["if(",g(T(j)),">",g(T(H)),"){tmp0=",j,";",j,"=",H,";",H,"=tmp0}"].join(""))}z(1,2),z(4,5),z(1,3),z(2,3),z(1,4),z(3,4),z(2,5),z(2,3),z(4,5),o.length>1?k(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",g("ptr1"),`
`,"pivot2[pivot_ptr]=",g("ptr3"),`
`,`pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])
`,"x=",g("ptr0"),`
`,"y=",g("ptr2"),`
`,"z=",g("ptr4"),`
`,A("ptr5","x"),`
`,A("ptr6","y"),`
`,A("ptr7","z")].join("")):i.push(["pivot1=",g(T("el2")),`
`,"pivot2=",g(T("el4")),`
`,`pivots_are_equal=pivot1===pivot2
`,"x=",g(T("el1")),`
`,"y=",g(T("el3")),`
`,"z=",g(T("el5")),`
`,A(T("index1"),"x"),`
`,A(T("index3"),"y"),`
`,A(T("index5"),"z")].join(""));function E(I,B){o.length>1?k([I,B],!1,A("ptr0",g("ptr1"))):i.push(A(T(I),g(T(B))))}E("index2","left"),E("index4","right");function S(I,B,j){if(o.length>1){var H="__l"+ ++y;R(H,[B],!0,[I,"=",g("ptr0"),"-pivot",j,`[pivot_ptr]
`,"if(",I,"!==0){break ",H,"}"].join(""))}else i.push([I,"=",g(T(B)),"-pivot",j].join(""))}function C(I,B){o.length>1?k([I,B],!1,["tmp=",g("ptr0"),`
`,A("ptr0",g("ptr1")),`
`,A("ptr1","tmp")].join("")):i.push(["ptr0=",T(I),`
`,"ptr1=",T(B),`
`,"tmp=",g("ptr0"),`
`,A("ptr0",g("ptr1")),`
`,A("ptr1","tmp")].join(""))}function D(I,B,j){o.length>1?(k([I,B,j],!1,["tmp=",g("ptr0"),`
`,A("ptr0",g("ptr1")),`
`,A("ptr1",g("ptr2")),`
`,A("ptr2","tmp")].join("")),i.push("++"+B,"--"+j)):i.push(["ptr0=",T(I),`
`,"ptr1=",T(B),`
`,"ptr2=",T(j),`
`,"++",B,`
`,"--",j,`
`,"tmp=",g("ptr0"),`
`,A("ptr0",g("ptr1")),`
`,A("ptr1",g("ptr2")),`
`,A("ptr2","tmp")].join(""))}function F(I,B){C(I,B),i.push("--"+B)}i.push("if(pivots_are_equal){"),i.push("for(k=less;k<=great;++k){"),S("comp","k",1),i.push("if(comp===0){continue}"),i.push("if(comp<0){"),i.push("if(k!==less){"),C("k","less"),i.push("}"),i.push("++less"),i.push("}else{"),i.push("while(true){"),S("comp","great",1),i.push("if(comp>0){"),i.push("great--"),i.push("}else if(comp<0){"),D("k","less","great"),i.push("break"),i.push("}else{"),F("k","great"),i.push("break"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}else{"),i.push("for(k=less;k<=great;++k){"),S("comp_pivot1","k",1),i.push("if(comp_pivot1<0){"),i.push("if(k!==less){"),C("k","less"),i.push("}"),i.push("++less"),i.push("}else{"),S("comp_pivot2","k",2),i.push("if(comp_pivot2>0){"),i.push("while(true){"),S("comp","great",2),i.push("if(comp>0){"),i.push("if(--great<k){break}"),i.push("continue"),i.push("}else{"),S("comp","great",1),i.push("if(comp<0){"),D("k","less","great"),i.push("}else{"),F("k","great"),i.push("}"),i.push("break"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}");function N(I,B,j){o.length>1?k([I,B],!0,[A("ptr0",g("ptr1")),`
`,A("ptr1",["pivot",j,"[pivot_ptr]"].join(""))].join("")):i.push(A(T(I),g(T(B))),A(T(B),"pivot"+j))}N("left","(less-1)",1),N("right","(great+1)",2);function G(I,B){i.push(["if((",B,"-",I,")<=",n,`){
`,"insertionSort(",I,",",B,",data,offset,",c(o.length).join(","),`)
`,`}else{
`,s,"(",I,",",B,",data,offset,",c(o.length).join(","),`)
`,"}"].join(""))}G("left","(less-2)"),G("(great+2)","right"),i.push("if(pivots_are_equal){"),L(),i.push("return"),i.push("}");function U(I,B,j){o.length>1?(i.push(["__l",++y,":while(true){"].join("")),k([I],!0,["if(",g("ptr0"),"!==pivot",B,"[pivot_ptr]){break __l",y,"}"].join("")),i.push(j,"}")):i.push(["while(",g(T(I)),"===pivot",B,"){",j,"}"].join(""))}if(i.push("if(less<index1&&great>index5){"),U("less",1,"++less"),U("great",2,"--great"),i.push("for(k=less;k<=great;++k){"),S("comp_pivot1","k",1),i.push("if(comp_pivot1===0){"),i.push("if(k!==less){"),C("k","less"),i.push("}"),i.push("++less"),i.push("}else{"),S("comp_pivot2","k",2),i.push("if(comp_pivot2===0){"),i.push("while(true){"),S("comp","great",2),i.push("if(comp===0){"),i.push("if(--great<k){break}"),i.push("continue"),i.push("}else{"),S("comp","great",1),i.push("if(comp<0){"),D("k","less","great"),i.push("}else{"),F("k","great"),i.push("}"),i.push("break"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),L(),G("less","great"),i.push("}return "+s),o.length>1&&d){var X=new Function("insertionSort","malloc","free",i.join(`
`));return X(h,d[0],d[1])}var X=new Function("insertionSort",i.join(`
`));return X(h)}function a(o,u){var h=["'use strict'"],i=["ndarraySortWrapper",o.join("d"),u].join(""),s=["array"];h.push(["function ",i,"(",s.join(","),"){"].join(""));for(var p=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],d=0;d<o.length;++d)p.push(["s",d,"=stride[",d,"]|0,n",d,"=shape[",d,"]|0"].join(""));for(var y=new Array(o.length),b=[],d=0;d<o.length;++d){var m=o[d];m!==0&&(b.length===0?y[m]="1":y[m]=b.join("*"),b.push("n"+m))}for(var _=-1,T=-1,d=0;d<o.length;++d){var g=o[d];g!==0&&(_>0?p.push(["d",g,"=s",g,"-d",_,"*n",_].join("")):p.push(["d",g,"=s",g].join("")),_=g);var m=o.length-1-d;m!==0&&(T>0?p.push(["e",m,"=s",m,"-e",T,"*n",T,",f",m,"=",y[m],"-f",T,"*n",T].join("")):p.push(["e",m,"=s",m,",f",m,"=",y[m]].join("")),T=m)}h.push("var "+p.join(","));var A=["0","n0-1","data","offset"].concat(c(o.length));h.push(["if(n0<=",n,"){","insertionSort(",A.join(","),")}else{","quickSort(",A.join(","),")}"].join("")),h.push("}return "+i);var k=new Function("insertionSort","quickSort",h.join(`
`)),R=t(o,u),L=f(o,u,R);return k(R,L)}v.exports=a},{"typedarray-pool":595}],494:[function(e,v,M){var r=e("./lib/compile_sort.js"),n={};function l(c){var t=c.order,f=c.dtype,a=[t,f],o=a.join(":"),u=n[o];return u||(n[o]=u=r(t,f)),u(c),c}v.exports=l},{"./lib/compile_sort.js":493}],495:[function(e,v,M){var r=e("iota-array"),n=e("is-buffer"),l=typeof Float64Array<"u";function c(h,i){return h[0]-i[0]}function t(){var h=this.stride,i=new Array(h.length),s;for(s=0;s<i.length;++s)i[s]=[Math.abs(h[s]),s];i.sort(c);var p=new Array(i.length);for(s=0;s<p.length;++s)p[s]=i[s][1];return p}function f(h,i){var s=["View",i,"d",h].join("");i<0&&(s="View_Nil"+h);var p=h==="generic";if(i===-1){var d="function "+s+"(a){this.data=a;};	var proto="+s+".prototype;	proto.dtype='"+h+"';	proto.index=function(){return -1};	proto.size=0;	proto.dimension=-1;	proto.shape=proto.stride=proto.order=[];	proto.lo=proto.hi=proto.transpose=proto.step=	function(){return new "+s+"(this.data);};	proto.get=proto.set=function(){};	proto.pick=function(){return null};	return function construct_"+s+"(a){return new "+s+"(a);}",z=new Function(d);return z()}else if(i===0){var d="function "+s+"(a,d) {	this.data = a;	this.offset = d	};	var proto="+s+".prototype;	proto.dtype='"+h+"';	proto.index=function(){return this.offset};	proto.dimension=0;	proto.size=1;	proto.shape=	proto.stride=	proto.order=[];	proto.lo=	proto.hi=	proto.transpose=	proto.step=function "+s+"_copy() {	return new "+s+"(this.data,this.offset)	};	proto.pick=function "+s+"_pick(){	return TrivialArray(this.data);	};	proto.valueOf=proto.get=function "+s+"_get(){	return "+(p?"this.data.get(this.offset)":"this.data[this.offset]")+"};	proto.set=function "+s+"_set(v){	return "+(p?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"	};	return function construct_"+s+"(a,b,c,d){return new "+s+"(a,d)}",z=new Function("TrivialArray",d);return z(o[h][0])}var d=["'use strict'"],y=r(i),b=y.map(function(E){return"i"+E}),m="this.offset+"+y.map(function(E){return"this.stride["+E+"]*i"+E}).join("+"),_=y.map(function(E){return"b"+E}).join(","),T=y.map(function(E){return"c"+E}).join(",");d.push("function "+s+"(a,"+_+","+T+",d){this.data=a","this.shape=["+_+"]","this.stride=["+T+"]","this.offset=d|0}","var proto="+s+".prototype","proto.dtype='"+h+"'","proto.dimension="+i),d.push("Object.defineProperty(proto,'size',{get:function "+s+"_size(){	return "+y.map(function(E){return"this.shape["+E+"]"}).join("*"),"}})"),i===1?d.push("proto.order=[0]"):(d.push("Object.defineProperty(proto,'order',{get:"),i<4?(d.push("function "+s+"_order(){"),i===2?d.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):i===3&&d.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);	if(s0>s1){	if(s1>s2){	return [2,1,0];	}else if(s0>s2){	return [1,2,0];	}else{	return [1,0,2];	}	}else if(s0>s2){	return [2,0,1];	}else if(s2>s1){	return [0,1,2];	}else{	return [0,2,1];	}}})")):d.push("ORDER})")),d.push("proto.set=function "+s+"_set("+b.join(",")+",v){"),p?d.push("return this.data.set("+m+",v)}"):d.push("return this.data["+m+"]=v}"),d.push("proto.get=function "+s+"_get("+b.join(",")+"){"),p?d.push("return this.data.get("+m+")}"):d.push("return this.data["+m+"]}"),d.push("proto.index=function "+s+"_index(",b.join(),"){return "+m+"}"),d.push("proto.hi=function "+s+"_hi("+b.join(",")+"){return new "+s+"(this.data,"+y.map(function(E){return["(typeof i",E,"!=='number'||i",E,"<0)?this.shape[",E,"]:i",E,"|0"].join("")}).join(",")+","+y.map(function(E){return"this.stride["+E+"]"}).join(",")+",this.offset)}");var g=y.map(function(E){return"a"+E+"=this.shape["+E+"]"}),A=y.map(function(E){return"c"+E+"=this.stride["+E+"]"});d.push("proto.lo=function "+s+"_lo("+b.join(",")+"){var b=this.offset,d=0,"+g.join(",")+","+A.join(","));for(var k=0;k<i;++k)d.push("if(typeof i"+k+"==='number'&&i"+k+">=0){	d=i"+k+"|0;	b+=c"+k+"*d;	a"+k+"-=d}");d.push("return new "+s+"(this.data,"+y.map(function(E){return"a"+E}).join(",")+","+y.map(function(E){return"c"+E}).join(",")+",b)}"),d.push("proto.step=function "+s+"_step("+b.join(",")+"){var "+y.map(function(E){return"a"+E+"=this.shape["+E+"]"}).join(",")+","+y.map(function(E){return"b"+E+"=this.stride["+E+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var k=0;k<i;++k)d.push("if(typeof i"+k+"==='number'){	d=i"+k+"|0;	if(d<0){	c+=b"+k+"*(a"+k+"-1);	a"+k+"=ceil(-a"+k+"/d)	}else{	a"+k+"=ceil(a"+k+"/d)	}	b"+k+"*=d	}");d.push("return new "+s+"(this.data,"+y.map(function(E){return"a"+E}).join(",")+","+y.map(function(E){return"b"+E}).join(",")+",c)}");for(var R=new Array(i),L=new Array(i),k=0;k<i;++k)R[k]="a[i"+k+"]",L[k]="b[i"+k+"]";d.push("proto.transpose=function "+s+"_transpose("+b+"){"+b.map(function(E,S){return E+"=("+E+"===undefined?"+S+":"+E+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+s+"(this.data,"+R.join(",")+","+L.join(",")+",this.offset)}"),d.push("proto.pick=function "+s+"_pick("+b+"){var a=[],b=[],c=this.offset");for(var k=0;k<i;++k)d.push("if(typeof i"+k+"==='number'&&i"+k+">=0){c=(c+this.stride["+k+"]*i"+k+")|0}else{a.push(this.shape["+k+"]);b.push(this.stride["+k+"])}");d.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),d.push("return function construct_"+s+"(data,shape,stride,offset){return new "+s+"(data,"+y.map(function(E){return"shape["+E+"]"}).join(",")+","+y.map(function(E){return"stride["+E+"]"}).join(",")+",offset)}");var z=new Function("CTOR_LIST","ORDER",d.join(`
`));return z(o[h],t)}function a(h){if(n(h))return"buffer";if(l)switch(Object.prototype.toString.call(h)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(h)?"array":"generic"}var o={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function u(h,i,s,p){if(h===void 0){var T=o.array[0];return T([])}else typeof h=="number"&&(h=[h]);i===void 0&&(i=[h.length]);var d=i.length;if(s===void 0){s=new Array(d);for(var y=d-1,b=1;y>=0;--y)s[y]=b,b*=i[y]}if(p===void 0){p=0;for(var y=0;y<d;++y)s[y]<0&&(p-=(i[y]-1)*s[y])}for(var m=a(h),_=o[m];_.length<=d+1;)_.push(f(m,_.length-1));var T=_[d+1];return T(h,i,s,p)}v.exports=u},{"iota-array":463,"is-buffer":465}],496:[function(e,v,M){var r=e("double-bits"),n=Math.pow(2,-1074),l=-1>>>0;v.exports=c;function c(t,f){if(isNaN(t)||isNaN(f))return NaN;if(t===f)return t;if(t===0)return f<0?-n:n;var a=r.hi(t),o=r.lo(t);return f>t==t>0?o===l?(a+=1,o=0):o+=1:o===0?(o=l,a-=1):o-=1,r.pack(o,a)}},{"double-bits":173}],497:[function(e,v,M){var r=Math.PI,n=o(120);v.exports=l;function l(u){for(var h,i=[],s=0,p=0,d=0,y=0,b=null,m=null,_=0,T=0,g=0,A=u.length;g<A;g++){var k=u[g],R=k[0];switch(R){case"M":d=k[1],y=k[2];break;case"A":k=f(_,T,k[1],k[2],o(k[3]),k[4],k[5],k[6],k[7]),k.unshift("C"),k.length>7&&(i.push(k.splice(0,7)),k.unshift("C"));break;case"S":var L=_,z=T;(h=="C"||h=="S")&&(L+=L-s,z+=z-p),k=["C",L,z,k[1],k[2],k[3],k[4]];break;case"T":h=="Q"||h=="T"?(b=_*2-b,m=T*2-m):(b=_,m=T),k=t(_,T,b,m,k[1],k[2]);break;case"Q":b=k[1],m=k[2],k=t(_,T,k[1],k[2],k[3],k[4]);break;case"L":k=c(_,T,k[1],k[2]);break;case"H":k=c(_,T,k[1],T);break;case"V":k=c(_,T,_,k[1]);break;case"Z":k=c(_,T,d,y);break}h=R,_=k[k.length-2],T=k[k.length-1],k.length>4?(s=k[k.length-4],p=k[k.length-3]):(s=_,p=T),i.push(k)}return i}function c(u,h,i,s){return["C",u,h,i,s,i,s]}function t(u,h,i,s,p,d){return["C",u/3+2/3*i,h/3+2/3*s,p/3+2/3*i,d/3+2/3*s,p,d]}function f(u,h,i,s,p,d,y,b,m,_){if(_)C=_[0],D=_[1],E=_[2],S=_[3];else{var T=a(u,h,-p);u=T.x,h=T.y,T=a(b,m,-p),b=T.x,m=T.y;var g=(u-b)/2,A=(h-m)/2,k=g*g/(i*i)+A*A/(s*s);k>1&&(k=Math.sqrt(k),i=k*i,s=k*s);var R=i*i,L=s*s,z=(d==y?-1:1)*Math.sqrt(Math.abs((R*L-R*A*A-L*g*g)/(R*A*A+L*g*g)));z==1/0&&(z=1);var E=z*i*A/s+(u+b)/2,S=z*-s*g/i+(h+m)/2,C=Math.asin(((h-S)/s).toFixed(9)),D=Math.asin(((m-S)/s).toFixed(9));C=u<E?r-C:C,D=b<E?r-D:D,C<0&&(C=r*2+C),D<0&&(D=r*2+D),y&&C>D&&(C=C-r*2),!y&&D>C&&(D=D-r*2)}if(Math.abs(D-C)>n){var F=D,N=b,G=m;D=C+n*(y&&D>C?1:-1),b=E+i*Math.cos(D),m=S+s*Math.sin(D);var U=f(b,m,i,s,p,0,y,N,G,[D,F,E,S])}var X=Math.tan((D-C)/4),I=4/3*i*X,B=4/3*s*X,j=[2*u-(u+I*Math.sin(C)),2*h-(h-B*Math.cos(C)),b+I*Math.sin(D),m-B*Math.cos(D),b,m];if(_)return j;U&&(j=j.concat(U));for(var H=0;H<j.length;){var K=a(j[H],j[H+1],p);j[H++]=K.x,j[H++]=K.y}return j}function a(u,h,i){return{x:u*Math.cos(i)-h*Math.sin(i),y:u*Math.sin(i)+h*Math.cos(i)}}function o(u){return u*(r/180)}},{}],498:[function(e,v,M){var r=1e-6,n=1e-6;M.vertexNormals=function(l,c,t){for(var f=c.length,a=new Array(f),o=t===void 0?r:t,u=0;u<f;++u)a[u]=[0,0,0];for(var u=0;u<l.length;++u)for(var h=l[u],i=0,s=h[h.length-1],p=h[0],d=0;d<h.length;++d){i=s,s=p,p=h[(d+1)%h.length];for(var y=c[i],b=c[s],m=c[p],_=new Array(3),T=0,g=new Array(3),A=0,k=0;k<3;++k)_[k]=y[k]-b[k],T+=_[k]*_[k],g[k]=m[k]-b[k],A+=g[k]*g[k];if(T*A>o)for(var R=a[s],L=1/Math.sqrt(T*A),k=0;k<3;++k){var z=(k+1)%3,E=(k+2)%3;R[k]+=L*(g[z]*_[E]-g[E]*_[z])}}for(var u=0;u<f;++u){for(var R=a[u],S=0,k=0;k<3;++k)S+=R[k]*R[k];if(S>o)for(var L=1/Math.sqrt(S),k=0;k<3;++k)R[k]*=L;else for(var k=0;k<3;++k)R[k]=0}return a},M.faceNormals=function(l,c,t){for(var f=l.length,a=new Array(f),o=t===void 0?n:t,u=0;u<f;++u){for(var h=l[u],i=new Array(3),s=0;s<3;++s)i[s]=c[h[s]];for(var p=new Array(3),d=new Array(3),s=0;s<3;++s)p[s]=i[1][s]-i[0][s],d[s]=i[2][s]-i[0][s];for(var y=new Array(3),b=0,s=0;s<3;++s){var m=(s+1)%3,_=(s+2)%3;y[s]=p[m]*d[_]-p[_]*d[m],b+=y[s]*y[s]}b>o?b=1/Math.sqrt(b):b=0;for(var s=0;s<3;++s)y[s]*=b;a[u]=y}return a}},{}],499:[function(e,v,M){var r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;function c(f){if(f==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(f)}function t(){try{if(!Object.assign)return!1;var f=new String("abc");if(f[5]="de",Object.getOwnPropertyNames(f)[0]==="5")return!1;for(var a={},o=0;o<10;o++)a["_"+String.fromCharCode(o)]=o;var u=Object.getOwnPropertyNames(a).map(function(i){return a[i]});if(u.join("")!=="0123456789")return!1;var h={};return"abcdefghijklmnopqrst".split("").forEach(function(i){h[i]=i}),Object.keys(Object.assign({},h)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}v.exports=t()?Object.assign:function(f,a){for(var o,u=c(f),h,i=1;i<arguments.length;i++){o=Object(arguments[i]);for(var s in o)n.call(o,s)&&(u[s]=o[s]);if(r){h=r(o);for(var p=0;p<h.length;p++)l.call(o,h[p])&&(u[h[p]]=o[h[p]])}}return u}},{}],500:[function(e,v,M){v.exports=r;function r(n,l,c,t,f,a,o,u,h,i){var s=l+a+i;if(p>0){var p=Math.sqrt(s+1);n[0]=.5*(o-h)/p,n[1]=.5*(u-t)/p,n[2]=.5*(c-a)/p,n[3]=.5*p}else{var d=Math.max(l,a,i),p=Math.sqrt(2*d-s+1);l>=d?(n[0]=.5*p,n[1]=.5*(f+c)/p,n[2]=.5*(u+t)/p,n[3]=.5*(o-h)/p):a>=d?(n[0]=.5*(c+f)/p,n[1]=.5*p,n[2]=.5*(h+o)/p,n[3]=.5*(u-t)/p):(n[0]=.5*(t+u)/p,n[1]=.5*(o+h)/p,n[2]=.5*p,n[3]=.5*(c-f)/p)}return n}},{}],501:[function(e,v,M){v.exports=i;var r=e("filtered-vector"),n=e("gl-mat4/lookAt"),l=e("gl-mat4/fromQuat"),c=e("gl-mat4/invert"),t=e("./lib/quatFromFrame");function f(s,p,d){return Math.sqrt(Math.pow(s,2)+Math.pow(p,2)+Math.pow(d,2))}function a(s,p,d,y){return Math.sqrt(Math.pow(s,2)+Math.pow(p,2)+Math.pow(d,2)+Math.pow(y,2))}function o(s,p){var d=p[0],y=p[1],b=p[2],m=p[3],_=a(d,y,b,m);_>1e-6?(s[0]=d/_,s[1]=y/_,s[2]=b/_,s[3]=m/_):(s[0]=s[1]=s[2]=0,s[3]=1)}function u(s,p,d){this.radius=r([d]),this.center=r(p),this.rotation=r(s),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var h=u.prototype;h.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},h.recalcMatrix=function(s){this.radius.curve(s),this.center.curve(s),this.rotation.curve(s);var p=this.computedRotation;o(p,p);var d=this.computedMatrix;l(d,p);var y=this.computedCenter,b=this.computedEye,m=this.computedUp,_=Math.exp(this.computedRadius[0]);b[0]=y[0]+_*d[2],b[1]=y[1]+_*d[6],b[2]=y[2]+_*d[10],m[0]=d[1],m[1]=d[5],m[2]=d[9];for(var T=0;T<3;++T){for(var g=0,A=0;A<3;++A)g+=d[T+4*A]*b[A];d[12+T]=-g}},h.getMatrix=function(s,p){this.recalcMatrix(s);var d=this.computedMatrix;if(p){for(var y=0;y<16;++y)p[y]=d[y];return p}return d},h.idle=function(s){this.center.idle(s),this.radius.idle(s),this.rotation.idle(s)},h.flush=function(s){this.center.flush(s),this.radius.flush(s),this.rotation.flush(s)},h.pan=function(s,p,d,y){p=p||0,d=d||0,y=y||0,this.recalcMatrix(s);var b=this.computedMatrix,m=b[1],_=b[5],T=b[9],g=f(m,_,T);m/=g,_/=g,T/=g;var A=b[0],k=b[4],R=b[8],L=A*m+k*_+R*T;A-=m*L,k-=_*L,R-=T*L;var z=f(A,k,R);A/=z,k/=z,R/=z,b[2],b[6],b[10];var E=A*p+m*d,S=k*p+_*d,C=R*p+T*d;this.center.move(s,E,S,C);var D=Math.exp(this.computedRadius[0]);D=Math.max(1e-4,D+y),this.radius.set(s,Math.log(D))},h.rotate=function(s,p,d,y){this.recalcMatrix(s),p=p||0,d=d||0;var b=this.computedMatrix,m=b[0],_=b[4],T=b[8],g=b[1],A=b[5],k=b[9],R=b[2],L=b[6],z=b[10],E=p*m+d*g,S=p*_+d*A,C=p*T+d*k,D=-(L*C-z*S),F=-(z*E-R*C),N=-(R*S-L*E),G=Math.sqrt(Math.max(0,1-Math.pow(D,2)-Math.pow(F,2)-Math.pow(N,2))),U=a(D,F,N,G);U>1e-6?(D/=U,F/=U,N/=U,G/=U):(D=F=N=0,G=1);var X=this.computedRotation,I=X[0],B=X[1],j=X[2],H=X[3],K=I*G+H*D+B*N-j*F,te=B*G+H*F+j*D-I*N,J=j*G+H*N+I*F-B*D,oe=H*G-I*D-B*F-j*N;if(y){D=R,F=L,N=z;var ie=Math.sin(y)/f(D,F,N);D*=ie,F*=ie,N*=ie,G=Math.cos(p),K=K*G+oe*D+te*N-J*F,te=te*G+oe*F+J*D-K*N,J=J*G+oe*N+K*F-te*D,oe=oe*G-K*D-te*F-J*N}var Q=a(K,te,J,oe);Q>1e-6?(K/=Q,te/=Q,J/=Q,oe/=Q):(K=te=J=0,oe=1),this.rotation.set(s,K,te,J,oe)},h.lookAt=function(s,p,d,y){this.recalcMatrix(s),d=d||this.computedCenter,p=p||this.computedEye,y=y||this.computedUp;var b=this.computedMatrix;n(b,p,d,y);var m=this.computedRotation;t(m,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),o(m,m),this.rotation.set(s,m[0],m[1],m[2],m[3]);for(var _=0,T=0;T<3;++T)_+=Math.pow(d[T]-p[T],2);this.radius.set(s,.5*Math.log(Math.max(_,1e-6))),this.center.set(s,d[0],d[1],d[2])},h.translate=function(s,p,d,y){this.center.move(s,p||0,d||0,y||0)},h.setMatrix=function(s,p){var d=this.computedRotation;t(d,p[0],p[1],p[2],p[4],p[5],p[6],p[8],p[9],p[10]),o(d,d),this.rotation.set(s,d[0],d[1],d[2],d[3]);var y=this.computedMatrix;c(y,p);var b=y[15];if(Math.abs(b)>1e-6){var m=y[12]/b,_=y[13]/b,T=y[14]/b;this.recalcMatrix(s);var g=Math.exp(this.computedRadius[0]);this.center.set(s,m-y[2]*g,_-y[6]*g,T-y[10]*g),this.radius.idle(s)}else this.center.idle(s),this.radius.idle(s)},h.setDistance=function(s,p){p>0&&this.radius.set(s,Math.log(p))},h.setDistanceLimits=function(s,p){s>0?s=Math.log(s):s=-1/0,p>0?p=Math.log(p):p=1/0,p=Math.max(p,s),this.radius.bounds[0][0]=s,this.radius.bounds[1][0]=p},h.getDistanceLimits=function(s){var p=this.radius.bounds;return s?(s[0]=Math.exp(p[0][0]),s[1]=Math.exp(p[1][0]),s):[Math.exp(p[0][0]),Math.exp(p[1][0])]},h.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},h.fromJSON=function(s){var p=this.lastT(),d=s.center;d&&this.center.set(p,d[0],d[1],d[2]);var y=s.rotation;y&&this.rotation.set(p,y[0],y[1],y[2],y[3]);var b=s.distance;b&&b>0&&this.radius.set(p,Math.log(b)),this.setDistanceLimits(s.zoomMin,s.zoomMax)};function i(s){s=s||{};var p=s.center||[0,0,0],d=s.rotation||[0,0,0,1],y=s.radius||1;p=[].slice.call(p,0,3),d=[].slice.call(d,0,4),o(d,d);var b=new u(d,p,Math.log(y));return b.setDistanceLimits(s.zoomMin,s.zoomMax),("eye"in s||"up"in s)&&b.lookAt(0,s.eye,s.center,s.up),b}},{"./lib/quatFromFrame":500,"filtered-vector":242,"gl-mat4/fromQuat":282,"gl-mat4/invert":293,"gl-mat4/lookAt":294}],502:[function(e,v,M){var r=e("repeat-string");v.exports=function(l,c,t){return t=typeof t<"u"?t+"":" ",r(t,c)+l}},{"repeat-string":541}],503:[function(e,v,M){function r(c,t){if(typeof c!="string")return[c];var f=[c];typeof t=="string"||Array.isArray(t)?t={brackets:t}:t||(t={});var a=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],o=t.escape||"___",u=!!t.flat;a.forEach(function(s){var p=new RegExp(["\\",s[0],"[^\\",s[0],"\\",s[1],"]*\\",s[1]].join("")),d=[];function y(b,m,_){var T=f.push(b.slice(s[0].length,-s[1].length))-1;return d.push(T),o+T+o}f.forEach(function(b,m){for(var _,T=0;b!=_;)if(_=b,b=b.replace(p,y),T++>1e4)throw Error("References have circular dependency. Please, check them.");f[m]=b}),d=d.reverse(),f=f.map(function(b){return d.forEach(function(m){b=b.replace(new RegExp("(\\"+o+m+"\\"+o+")","g"),s[0]+"$1"+s[1])}),b})});var h=new RegExp("\\"+o+"([0-9]+)\\"+o);function i(s,p,d){for(var y=[],b,m=0;b=h.exec(s);){if(m++>1e4)throw Error("Circular references in parenthesis");y.push(s.slice(0,b.index)),y.push(i(p[b[1]],p)),s=s.slice(b.index+b[0].length)}return y.push(s),y}return u?f:i(f[0],f)}function n(c,t){if(t&&t.flat){var f=t&&t.escape||"___",a=c[0],o;if(!a)return"";for(var u=new RegExp("\\"+f+"([0-9]+)\\"+f),h=0;a!=o;){if(h++>1e4)throw Error("Circular references in "+c);o=a,a=a.replace(u,i)}return a}return c.reduce(function s(p,d){return Array.isArray(d)&&(d=d.reduce(s,"")),p+d},"");function i(s,p){if(c[p]==null)throw Error("Reference "+p+"is undefined");return c[p]}}function l(c,t){return Array.isArray(c)?n(c,t):r(c,t)}l.parse=r,l.stringify=n,v.exports=l},{}],504:[function(e,v,M){var r=e("pick-by-alias");v.exports=n;function n(l){var c;return arguments.length>1&&(l=arguments),typeof l=="string"?l=l.split(/\s/).map(parseFloat):typeof l=="number"&&(l=[l]),l.length&&typeof l[0]=="number"?l.length===1?c={width:l[0],height:l[0],x:0,y:0}:l.length===2?c={width:l[0],height:l[1],x:0,y:0}:c={x:l[0],y:l[1],width:l[2]-l[0]||0,height:l[3]-l[1]||0}:l&&(l=r(l,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),c={x:l.left||0,y:l.top||0},l.width==null?l.right?c.width=l.right-c.x:c.width=0:c.width=l.width,l.height==null?l.bottom?c.height=l.bottom-c.y:c.height=0:c.height=l.height),c}},{"pick-by-alias":511}],505:[function(e,v,M){v.exports=l;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function l(f){var a=[];return f.replace(n,function(o,u,h){var i=u.toLowerCase();for(h=t(h),i=="m"&&h.length>2&&(a.push([u].concat(h.splice(0,2))),i="l",u=u=="m"?"l":"L");;){if(h.length==r[i])return h.unshift(u),a.push(h);if(h.length<r[i])throw new Error("malformed path data");a.push([u].concat(h.splice(0,r[i])))}}),a}var c=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function t(f){var a=f.match(c);return a?a.map(Number):[]}},{}],506:[function(e,v,M){v.exports=function(n,l){l||(l=[0,""]),n=String(n);var c=parseFloat(n,10);return l[0]=c,l[1]=n.match(/[\d.\-\+]*\s*(.*)/)[1]||"",l}},{}],507:[function(e,v,M){(function(r){(function(){function n(f){if(typeof f!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(f))}function l(f,a){for(var o="",u=0,h=-1,i=0,s,p=0;p<=f.length;++p){if(p<f.length)s=f.charCodeAt(p);else{if(s===47)break;s=47}if(s===47){if(!(h===p-1||i===1))if(h!==p-1&&i===2){if(o.length<2||u!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var d=o.lastIndexOf("/");if(d!==o.length-1){d===-1?(o="",u=0):(o=o.slice(0,d),u=o.length-1-o.lastIndexOf("/")),h=p,i=0;continue}}else if(o.length===2||o.length===1){o="",u=0,h=p,i=0;continue}}a&&(o.length>0?o+="/..":o="..",u=2)}else o.length>0?o+="/"+f.slice(h+1,p):o=f.slice(h+1,p),u=p-h-1;h=p,i=0}else s===46&&i!==-1?++i:i=-1}return o}function c(f,a){var o=a.dir||a.root,u=a.base||(a.name||"")+(a.ext||"");return o?o===a.root?o+u:o+f+u:u}var t={resolve:function(){for(var a="",o=!1,u,h=arguments.length-1;h>=-1&&!o;h--){var i;h>=0?i=arguments[h]:(u===void 0&&(u=r.cwd()),i=u),n(i),i.length!==0&&(a=i+"/"+a,o=i.charCodeAt(0)===47)}return a=l(a,!o),o?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(a){if(n(a),a.length===0)return".";var o=a.charCodeAt(0)===47,u=a.charCodeAt(a.length-1)===47;return a=l(a,!o),a.length===0&&!o&&(a="."),a.length>0&&u&&(a+="/"),o?"/"+a:a},isAbsolute:function(a){return n(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,o=0;o<arguments.length;++o){var u=arguments[o];n(u),u.length>0&&(a===void 0?a=u:a+="/"+u)}return a===void 0?".":t.normalize(a)},relative:function(a,o){if(n(a),n(o),a===o||(a=t.resolve(a),o=t.resolve(o),a===o))return"";for(var u=1;u<a.length&&a.charCodeAt(u)===47;++u);for(var h=a.length,i=h-u,s=1;s<o.length&&o.charCodeAt(s)===47;++s);for(var p=o.length,d=p-s,y=i<d?i:d,b=-1,m=0;m<=y;++m){if(m===y){if(d>y){if(o.charCodeAt(s+m)===47)return o.slice(s+m+1);if(m===0)return o.slice(s+m)}else i>y&&(a.charCodeAt(u+m)===47?b=m:m===0&&(b=0));break}var _=a.charCodeAt(u+m),T=o.charCodeAt(s+m);if(_!==T)break;_===47&&(b=m)}var g="";for(m=u+b+1;m<=h;++m)(m===h||a.charCodeAt(m)===47)&&(g.length===0?g+="..":g+="/..");return g.length>0?g+o.slice(s+b):(s+=b,o.charCodeAt(s)===47&&++s,o.slice(s))},_makeLong:function(a){return a},dirname:function(a){if(n(a),a.length===0)return".";for(var o=a.charCodeAt(0),u=o===47,h=-1,i=!0,s=a.length-1;s>=1;--s)if(o=a.charCodeAt(s),o===47){if(!i){h=s;break}}else i=!1;return h===-1?u?"/":".":u&&h===1?"//":a.slice(0,h)},basename:function(a,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');n(a);var u=0,h=-1,i=!0,s;if(o!==void 0&&o.length>0&&o.length<=a.length){if(o.length===a.length&&o===a)return"";var p=o.length-1,d=-1;for(s=a.length-1;s>=0;--s){var y=a.charCodeAt(s);if(y===47){if(!i){u=s+1;break}}else d===-1&&(i=!1,d=s+1),p>=0&&(y===o.charCodeAt(p)?--p===-1&&(h=s):(p=-1,h=d))}return u===h?h=d:h===-1&&(h=a.length),a.slice(u,h)}else{for(s=a.length-1;s>=0;--s)if(a.charCodeAt(s)===47){if(!i){u=s+1;break}}else h===-1&&(i=!1,h=s+1);return h===-1?"":a.slice(u,h)}},extname:function(a){n(a);for(var o=-1,u=0,h=-1,i=!0,s=0,p=a.length-1;p>=0;--p){var d=a.charCodeAt(p);if(d===47){if(!i){u=p+1;break}continue}h===-1&&(i=!1,h=p+1),d===46?o===-1?o=p:s!==1&&(s=1):o!==-1&&(s=-1)}return o===-1||h===-1||s===0||s===1&&o===h-1&&o===u+1?"":a.slice(o,h)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return c("/",a)},parse:function(a){n(a);var o={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return o;var u=a.charCodeAt(0),h=u===47,i;h?(o.root="/",i=1):i=0;for(var s=-1,p=0,d=-1,y=!0,b=a.length-1,m=0;b>=i;--b){if(u=a.charCodeAt(b),u===47){if(!y){p=b+1;break}continue}d===-1&&(y=!1,d=b+1),u===46?s===-1?s=b:m!==1&&(m=1):s!==-1&&(m=-1)}return s===-1||d===-1||m===0||m===1&&s===d-1&&s===p+1?d!==-1&&(p===0&&h?o.base=o.name=a.slice(1,d):o.base=o.name=a.slice(p,d)):(p===0&&h?(o.name=a.slice(1,s),o.base=a.slice(1,d)):(o.name=a.slice(p,s),o.base=a.slice(p,d)),o.ext=a.slice(s,d)),p>0?o.dir=a.slice(0,p-1):h&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};t.posix=t,v.exports=t}).call(this)}).call(this,e("_process"))},{_process:526}],508:[function(e,v,M){(function(r){(function(){(function(){var n,l,c,t,f,a;typeof performance<"u"&&performance!==null&&performance.now?v.exports=function(){return performance.now()}:typeof r<"u"&&r!==null&&r.hrtime?(v.exports=function(){return(n()-f)/1e6},l=r.hrtime,n=function(){var o;return o=l(),o[0]*1e9+o[1]},t=n(),a=r.uptime()*1e9,f=t-a):Date.now?(v.exports=function(){return Date.now()-c},c=Date.now()):(v.exports=function(){return new Date().getTime()-c},c=new Date().getTime())}).call(this)}).call(this)}).call(this,e("_process"))},{_process:526}],509:[function(e,v,M){v.exports=l;var r=32,n=e("typedarray-pool");function l(c){var t=c.length;if(t<r){for(var f=1,a=0;a<t;++a)for(var o=0;o<a;++o)if(c[a]<c[o])f=-f;else if(c[a]===c[o])return 0;return f}else{for(var u=n.mallocUint8(t),a=0;a<t;++a)u[a]=0;for(var f=1,a=0;a<t;++a)if(!u[a]){var h=1;u[a]=1;for(var o=c[a];o!==a;o=c[o]){if(u[o])return n.freeUint8(u),0;h+=1,u[o]=1}h&1||(f=-f)}return n.freeUint8(u),f}}},{"typedarray-pool":595}],510:[function(e,v,M){var r=e("typedarray-pool"),n=e("invert-permutation");function l(t){var f=t.length;switch(f){case 0:case 1:return 0;case 2:return t[1]}var a=r.mallocUint32(f),o=r.mallocUint32(f),u=0,h,i,s;for(n(t,o),s=0;s<f;++s)a[s]=t[s];for(s=f-1;s>0;--s)i=o[s],h=a[s],a[s]=a[i],a[i]=h,o[s]=o[h],o[h]=i,u=(u+h)*s;return r.freeUint32(o),r.freeUint32(a),u}function c(t,f,a){switch(t){case 0:return a||[];case 1:return a?(a[0]=0,a):[0];case 2:return a?(f?(a[0]=0,a[1]=1):(a[0]=1,a[1]=0),a):f?[0,1]:[1,0]}a=a||new Array(t);var o,u,h,i=1;for(a[0]=0,h=1;h<t;++h)a[h]=h,i=i*h|0;for(h=t-1;h>0;--h)o=f/i|0,f=f-o*i|0,i=i/h|0,u=a[h]|0,a[h]=a[o]|0,a[o]=u|0;return a}M.rank=l,M.unrank=c},{"invert-permutation":462,"typedarray-pool":595}],511:[function(e,v,M){v.exports=function(c,t,f){var a={},o,u;if(typeof t=="string"&&(t=n(t)),Array.isArray(t)){var h={};for(u=0;u<t.length;u++)h[t[u]]=!0;t=h}for(o in t)t[o]=n(t[o]);var i={};for(o in t){var s=t[o];if(Array.isArray(s))for(u=0;u<s.length;u++){var p=s[u];if(f&&(i[p]=!0),p in c){if(a[o]=c[p],f)for(var d=u;d<s.length;d++)i[s[d]]=!0;break}}else o in c&&(t[o]&&(a[o]=c[o]),f&&(i[o]=!0))}if(f)for(o in c)i[o]||(a[o]=c[o]);return a};var r={};function n(l){return r[l]?r[l]:(typeof l=="string"&&(l=r[l]=l.split(/\s*,\s*|\s+/)),l)}},{}],512:[function(e,v,M){v.exports=n;var r=e("compare-angle");function n(l,c){for(var t=c.length|0,f=l.length,a=[new Array(t),new Array(t)],o=0;o<t;++o)a[0][o]=[],a[1][o]=[];for(var o=0;o<f;++o){var u=l[o];a[0][u[0]].push(u),a[1][u[1]].push(u)}for(var h=[],o=0;o<t;++o)a[0][o].length+a[1][o].length===0&&h.push([o]);function i(_,T){var g=a[T][_[T]];g.splice(g.indexOf(_),1)}function s(_,T,g){for(var A,k,R,L=0;L<2;++L)if(a[L][T].length>0){A=a[L][T][0],R=L;break}k=A[R^1];for(var z=0;z<2;++z)for(var E=a[z][T],S=0;S<E.length;++S){var C=E[S],D=C[z^1],F=r(c[_],c[T],c[k],c[D]);F>0&&(A=C,k=D,R=z)}return g||A&&i(A,R),k}function p(_,T){var g=a[T][_][0],A=[_];i(g,T);for(var k=g[T^1];;){for(;k!==_;)A.push(k),k=s(A[A.length-2],k,!1);if(a[0][_].length+a[1][_].length===0)break;var R=A[A.length-1],L=_,z=A[1],E=s(R,L,!0);if(r(c[R],c[L],c[z],c[E])<0)break;A.push(_),k=s(R,L)}return A}function d(_,T){return T[1]===T[T.length-1]}for(var o=0;o<t;++o)for(var y=0;y<2;++y){for(var b=[];a[y][o].length>0;){a[0][o].length;var m=p(o,y);d(b,m)?b.push.apply(b,m):(b.length>0&&h.push(b),b=m)}b.length>0&&h.push(b)}return h}},{"compare-angle":132}],513:[function(e,v,M){v.exports=n;var r=e("edges-to-adjacency-list");function n(l,c){for(var t=r(l,c.length),f=new Array(c.length),a=new Array(c.length),o=[],u=0;u<c.length;++u){var h=t[u].length;a[u]=h,f[u]=!0,h<=1&&o.push(u)}for(;o.length>0;){var i=o.pop();f[i]=!1;for(var s=t[i],u=0;u<s.length;++u){var p=s[u];--a[p]===0&&o.push(p)}}for(var d=new Array(c.length),y=[],u=0;u<c.length;++u)if(f[u]){var i=y.length;d[u]=i,y.push(c[u])}else d[u]=-1;for(var b=[],u=0;u<l.length;++u){var m=l[u];f[m[0]]&&f[m[1]]&&b.push([d[m[0]],d[m[1]]])}return[b,y]}},{"edges-to-adjacency-list":178}],514:[function(e,v,M){v.exports=h;var r=e("edges-to-adjacency-list"),n=e("planar-dual"),l=e("point-in-big-polygon"),c=e("two-product"),t=e("robust-sum"),f=e("uniq"),a=e("./lib/trim-leaves");function o(i,s){for(var p=new Array(i),d=0;d<i;++d)p[d]=s;return p}function u(i){for(var s=new Array(i),p=0;p<i;++p)s[p]=[];return s}function h(i,s){var oe=a(i,s);i=oe[0],s=oe[1];var p=s.length;i.length;for(var d=r(i,s.length),y=0;y<p;++y)if(d[y].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var b=n(i,s);function m(ae){for(var fe=ae.length,de=[0],pe=0;pe<fe;++pe){var W=s[ae[pe]],ue=s[ae[(pe+1)%fe]],me=c(-W[0],W[1]),be=c(-W[0],ue[1]),ke=c(ue[0],W[1]),Pe=c(ue[0],ue[1]);de=t(de,t(t(me,be),t(ke,Pe)))}return de[de.length-1]>0}b=b.filter(m);for(var _=b.length,T=new Array(_),g=new Array(_),y=0;y<_;++y){T[y]=y;var A=new Array(_),k=b[y].map(function(fe){return s[fe]}),R=l([k]),L=0;e:for(var z=0;z<_;++z)if(A[z]=0,y!==z){for(var E=b[z],S=E.length,C=0;C<S;++C){var D=R(s[E[C]]);if(D!==0){D<0&&(A[z]=1,L+=1);continue e}}A[z]=1,L+=1}g[y]=[L,y,A]}g.sort(function(ae,fe){return fe[0]-ae[0]});for(var y=0;y<_;++y)for(var A=g[y],F=A[1],N=A[2],z=0;z<_;++z)N[z]&&(T[z]=F);for(var G=u(_),y=0;y<_;++y)G[y].push(T[y]),G[T[y]].push(y);for(var U={},X=o(p,!1),y=0;y<_;++y)for(var E=b[y],S=E.length,z=0;z<S;++z){var I=E[z],B=E[(z+1)%S],j=Math.min(I,B)+":"+Math.max(I,B);if(j in U){var H=U[j];G[H].push(y),G[y].push(H),X[I]=X[B]=!0}else U[j]=y}function K(ae){for(var fe=ae.length,de=0;de<fe;++de)if(!X[ae[de]])return!1;return!0}for(var te=[],J=o(_,-1),y=0;y<_;++y)T[y]===y&&!K(b[y])?(te.push(y),J[y]=0):J[y]=-1;for(var oe=[];te.length>0;){var ie=te.pop(),Q=G[ie];f(Q,function(ae,fe){return ae-fe});var V=Q.length,se=J[ie],re;if(se===0){var E=b[ie];re=[E]}for(var y=0;y<V;++y){var ee=Q[y];if(!(J[ee]>=0)&&(J[ee]=se^1,te.push(ee),se===0)){var E=b[ee];K(E)||(E.reverse(),re.push(E))}}se===0&&oe.push(re)}return oe}},{"./lib/trim-leaves":513,"edges-to-adjacency-list":178,"planar-dual":512,"point-in-big-polygon":516,"robust-sum":553,"two-product":582,uniq:597}],515:[function(e,v,M){arguments[4][243][0].apply(M,arguments)},{dup:243}],516:[function(e,v,M){v.exports=s;var r=e("robust-orientation")[3],n=e("slab-decomposition"),l=e("interval-tree-1d"),c=e("binary-search-bounds");function t(){return!0}function f(p){return function(d,y){var b=p[d];return b?!!b.queryPoint(y,t):!1}}function a(p){for(var d={},y=0;y<p.length;++y){var b=p[y],m=b[0][0],_=b[0][1],T=b[1][1],g=[Math.min(_,T),Math.max(_,T)];m in d?d[m].push(g):d[m]=[g]}for(var A={},k=Object.keys(d),y=0;y<k.length;++y){var R=d[k[y]];A[k[y]]=l(R)}return f(A)}function o(p,d){return function(y){var b=c.le(d,y[0]);if(b<0)return 1;var m=p[b];if(!m)if(b>0&&d[b]===y[0])m=p[b-1];else return 1;for(var _=1;m;){var T=m.key,g=r(y,T[0],T[1]);if(T[0][0]<T[1][0])if(g<0)m=m.left;else if(g>0)_=-1,m=m.right;else return 0;else if(g>0)m=m.left;else if(g<0)_=1,m=m.right;else return 0}return _}}function u(p){return 1}function h(p){return function(y){return p(y[0],y[1])?0:1}}function i(p,d){return function(b){return p(b[0],b[1])?0:d(b)}}function s(p){for(var d=p.length,y=[],b=[],m=0;m<d;++m)for(var _=p[m],T=_.length,g=T-1,A=0;A<T;g=A++){var k=_[g],R=_[A];k[0]===R[0]?b.push([k,R]):y.push([k,R])}if(y.length===0)return b.length===0?u:h(a(b));var L=n(y),z=o(L.slabs,L.coordinates);return b.length===0?z:i(a(b),z)}},{"binary-search-bounds":515,"interval-tree-1d":460,"robust-orientation":548,"slab-decomposition":565}],517:[function(e,v,M){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var r=e("./lib/build-log"),n=e("./lib/epsilon"),l=e("./lib/intersecter"),c=e("./lib/segment-chainer"),t=e("./lib/segment-selector"),f=e("./lib/geojson"),a=!1,o=n(),u;u={buildLog:function(i){return i===!0?a=r():i===!1&&(a=!1),a===!1?!1:a.list},epsilon:function(i){return o.epsilon(i)},segments:function(i){var s=l(!0,o,a);return i.regions.forEach(s.addRegion),{segments:s.calculate(i.inverted),inverted:i.inverted}},combine:function(i,s){var p=l(!1,o,a);return{combined:p.calculate(i.segments,i.inverted,s.segments,s.inverted),inverted1:i.inverted,inverted2:s.inverted}},selectUnion:function(i){return{segments:t.union(i.combined,a),inverted:i.inverted1||i.inverted2}},selectIntersect:function(i){return{segments:t.intersect(i.combined,a),inverted:i.inverted1&&i.inverted2}},selectDifference:function(i){return{segments:t.difference(i.combined,a),inverted:i.inverted1&&!i.inverted2}},selectDifferenceRev:function(i){return{segments:t.differenceRev(i.combined,a),inverted:!i.inverted1&&i.inverted2}},selectXor:function(i){return{segments:t.xor(i.combined,a),inverted:i.inverted1!==i.inverted2}},polygon:function(i){return{regions:c(i.segments,o,a),inverted:i.inverted}},polygonFromGeoJSON:function(i){return f.toPolygon(u,i)},polygonToGeoJSON:function(i){return f.fromPolygon(u,o,i)},union:function(i,s){return h(i,s,u.selectUnion)},intersect:function(i,s){return h(i,s,u.selectIntersect)},difference:function(i,s){return h(i,s,u.selectDifference)},differenceRev:function(i,s){return h(i,s,u.selectDifferenceRev)},xor:function(i,s){return h(i,s,u.selectXor)}};function h(i,s,p){var d=u.segments(i),y=u.segments(s),b=u.combine(d,y),m=p(b);return u.polygon(m)}typeof window=="object"&&(window.PolyBool=u),v.exports=u},{"./lib/build-log":518,"./lib/epsilon":519,"./lib/geojson":520,"./lib/intersecter":521,"./lib/segment-chainer":523,"./lib/segment-selector":524}],518:[function(e,v,M){function r(){var n,l=0,c=!1;function t(f,a){return n.list.push({type:f,data:a?JSON.parse(JSON.stringify(a)):void 0}),n}return n={list:[],segmentId:function(){return l++},checkIntersection:function(f,a){return t("check",{seg1:f,seg2:a})},segmentChop:function(f,a){return t("div_seg",{seg:f,pt:a}),t("chop",{seg:f,pt:a})},statusRemove:function(f){return t("pop_seg",{seg:f})},segmentUpdate:function(f){return t("seg_update",{seg:f})},segmentNew:function(f,a){return t("new_seg",{seg:f,primary:a})},segmentRemove:function(f){return t("rem_seg",{seg:f})},tempStatus:function(f,a,o){return t("temp_status",{seg:f,above:a,below:o})},rewind:function(f){return t("rewind",{seg:f})},status:function(f,a,o){return t("status",{seg:f,above:a,below:o})},vert:function(f){return f===c?n:(c=f,t("vert",{x:f}))},log:function(f){return typeof f!="string"&&(f=JSON.stringify(f,!1,"  ")),t("log",{txt:f})},reset:function(){return t("reset")},selected:function(f){return t("selected",{segs:f})},chainStart:function(f){return t("chain_start",{seg:f})},chainRemoveHead:function(f,a){return t("chain_rem_head",{index:f,pt:a})},chainRemoveTail:function(f,a){return t("chain_rem_tail",{index:f,pt:a})},chainNew:function(f,a){return t("chain_new",{pt1:f,pt2:a})},chainMatch:function(f){return t("chain_match",{index:f})},chainClose:function(f){return t("chain_close",{index:f})},chainAddHead:function(f,a){return t("chain_add_head",{index:f,pt:a})},chainAddTail:function(f,a){return t("chain_add_tail",{index:f,pt:a})},chainConnect:function(f,a){return t("chain_con",{index1:f,index2:a})},chainReverse:function(f){return t("chain_rev",{index:f})},chainJoin:function(f,a){return t("chain_join",{index1:f,index2:a})},done:function(){return t("done")}},n}v.exports=r},{}],519:[function(e,v,M){function r(n){typeof n!="number"&&(n=1e-10);var l={epsilon:function(c){return typeof c=="number"&&(n=c),n},pointAboveOrOnLine:function(c,t,f){var a=t[0],o=t[1],u=f[0],h=f[1],i=c[0],s=c[1];return(u-a)*(s-o)-(h-o)*(i-a)>=-n},pointBetween:function(c,t,f){var a=c[1]-t[1],o=f[0]-t[0],u=c[0]-t[0],h=f[1]-t[1],i=u*o+a*h;if(i<n)return!1;var s=o*o+h*h;return!(i-s>-n)},pointsSameX:function(c,t){return Math.abs(c[0]-t[0])<n},pointsSameY:function(c,t){return Math.abs(c[1]-t[1])<n},pointsSame:function(c,t){return l.pointsSameX(c,t)&&l.pointsSameY(c,t)},pointsCompare:function(c,t){return l.pointsSameX(c,t)?l.pointsSameY(c,t)?0:c[1]<t[1]?-1:1:c[0]<t[0]?-1:1},pointsCollinear:function(c,t,f){var a=c[0]-t[0],o=c[1]-t[1],u=t[0]-f[0],h=t[1]-f[1];return Math.abs(a*h-u*o)<n},linesIntersect:function(c,t,f,a){var o=t[0]-c[0],u=t[1]-c[1],h=a[0]-f[0],i=a[1]-f[1],s=o*i-u*h;if(Math.abs(s)<n)return!1;var p=c[0]-f[0],d=c[1]-f[1],y=(h*d-i*p)/s,b=(o*d-u*p)/s,m={alongA:0,alongB:0,pt:[c[0]+y*o,c[1]+y*u]};return y<=-n?m.alongA=-2:y<n?m.alongA=-1:y-1<=-n?m.alongA=0:y-1<n?m.alongA=1:m.alongA=2,b<=-n?m.alongB=-2:b<n?m.alongB=-1:b-1<=-n?m.alongB=0:b-1<n?m.alongB=1:m.alongB=2,m},pointInsideRegion:function(c,t){for(var f=c[0],a=c[1],o=t[t.length-1][0],u=t[t.length-1][1],h=!1,i=0;i<t.length;i++){var s=t[i][0],p=t[i][1];p-a>n!=u-a>n&&(o-s)*(a-p)/(u-p)+s-f>n&&(h=!h),o=s,u=p}return h}};return l}v.exports=r},{}],520:[function(e,v,M){var r={toPolygon:function(n,l){function c(a){if(a.length<=0)return n.segments({inverted:!1,regions:[]});function o(i){var s=i.slice(0,i.length-1);return n.segments({inverted:!1,regions:[s]})}for(var u=o(a[0]),h=1;h<a.length;h++)u=n.selectDifference(n.combine(u,o(a[h])));return u}if(l.type==="Polygon")return n.polygon(c(l.coordinates));if(l.type==="MultiPolygon"){for(var t=n.segments({inverted:!1,regions:[]}),f=0;f<l.coordinates.length;f++)t=n.selectUnion(n.combine(t,c(l.coordinates[f])));return n.polygon(t)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(n,l,c){c=n.polygon(n.segments(c));function t(y,b){return l.pointInsideRegion([(y[0][0]+y[1][0])*.5,(y[0][1]+y[1][1])*.5],b)}function f(y){return{region:y,children:[]}}var a=f(null);function o(y,b){for(var m=0;m<y.children.length;m++){var _=y.children[m];if(t(b,_.region)){o(_,b);return}}for(var T=f(b),m=0;m<y.children.length;m++){var _=y.children[m];t(_.region,b)&&(T.children.push(_),y.children.splice(m,1),m--)}y.children.push(T)}for(var u=0;u<c.regions.length;u++){var h=c.regions[u];h.length<3||o(a,h)}function i(y,b){for(var m=0,_=y[y.length-1][0],T=y[y.length-1][1],g=[],A=0;A<y.length;A++){var k=y[A][0],R=y[A][1];g.push([k,R]),m+=R*_-k*T,_=k,T=R}var L=m<0;return L!==b&&g.reverse(),g.push([g[0][0],g[0][1]]),g}var s=[];function p(y){var b=[i(y.region,!1)];s.push(b);for(var m=0;m<y.children.length;m++)b.push(d(y.children[m]))}function d(y){for(var b=0;b<y.children.length;b++)p(y.children[b]);return i(y.region,!0)}for(var u=0;u<a.children.length;u++)p(a.children[u]);return s.length<=0?{type:"Polygon",coordinates:[]}:s.length==1?{type:"Polygon",coordinates:s[0]}:{type:"MultiPolygon",coordinates:s}}};v.exports=r},{}],521:[function(e,v,M){var r=e("./linked-list");function n(l,c,t){function f(m,_){return{id:t?t.segmentId():-1,start:m,end:_,myFill:{above:null,below:null},otherFill:null}}function a(m,_,T){return{id:t?t.segmentId():-1,start:m,end:_,myFill:{above:T.myFill.above,below:T.myFill.below},otherFill:null}}var o=r.create();function u(m,_,T,g,A,k){var R=c.pointsCompare(_,A);return R!==0?R:c.pointsSame(T,k)?0:m!==g?m?1:-1:c.pointAboveOrOnLine(T,g?A:k,g?k:A)?1:-1}function h(m,_){o.insertBefore(m,function(T){var g=u(m.isStart,m.pt,_,T.isStart,T.pt,T.other.pt);return g<0})}function i(m,_){var T=r.node({isStart:!0,pt:m.start,seg:m,primary:_,other:null,status:null});return h(T,m.end),T}function s(m,_,T){var g=r.node({isStart:!1,pt:_.end,seg:_,primary:T,other:m,status:null});m.other=g,h(g,m.pt)}function p(m,_){var T=i(m,_);return s(T,m,_),T}function d(m,_){t&&t.segmentChop(m.seg,_),m.other.remove(),m.seg.end=_,m.other.pt=_,h(m.other,m.pt)}function y(m,_){var T=a(_,m.seg.end,m.seg);return d(m,_),p(T,m.primary)}function b(m,_){var T=r.create();function g(U,X){var I=U.seg.start,B=U.seg.end,j=X.seg.start,H=X.seg.end;return c.pointsCollinear(I,j,H)?c.pointsCollinear(B,j,H)||c.pointAboveOrOnLine(B,j,H)?1:-1:c.pointAboveOrOnLine(I,j,H)?1:-1}function A(U){return T.findTransition(function(X){var I=g(U,X.ev);return I>0})}function k(U,X){var I=U.seg,B=X.seg,j=I.start,H=I.end,K=B.start,te=B.end;t&&t.checkIntersection(I,B);var J=c.linesIntersect(j,H,K,te);if(J===!1){if(!c.pointsCollinear(j,H,K)||c.pointsSame(j,te)||c.pointsSame(H,K))return!1;var oe=c.pointsSame(j,K),ie=c.pointsSame(H,te);if(oe&&ie)return X;var Q=!oe&&c.pointBetween(j,K,te),V=!ie&&c.pointBetween(H,K,te);if(oe)return V?y(X,H):y(U,te),X;Q&&(ie||(V?y(X,H):y(U,te)),y(X,j))}else J.alongA===0&&(J.alongB===-1?y(U,K):J.alongB===0?y(U,J.pt):J.alongB===1&&y(U,te)),J.alongB===0&&(J.alongA===-1?y(X,j):J.alongA===0?y(X,J.pt):J.alongA===1&&y(X,H));return!1}for(var R=[];!o.isEmpty();){var L=o.getHead();if(t&&t.vert(L.pt[0]),L.isStart){let U=function(){if(E){var X=k(L,E);if(X)return X}return S?k(L,S):!1};t&&t.segmentNew(L.seg,L.primary);var z=A(L),E=z.before?z.before.ev:null,S=z.after?z.after.ev:null;t&&t.tempStatus(L.seg,E?E.seg:!1,S?S.seg:!1);var C=U();if(C){if(l){var D;L.seg.myFill.below===null?D=!0:D=L.seg.myFill.above!==L.seg.myFill.below,D&&(C.seg.myFill.above=!C.seg.myFill.above)}else C.seg.otherFill=L.seg.myFill;t&&t.segmentUpdate(C.seg),L.other.remove(),L.remove()}if(o.getHead()!==L){t&&t.rewind(L.seg);continue}if(l){var D;L.seg.myFill.below===null?D=!0:D=L.seg.myFill.above!==L.seg.myFill.below,S?L.seg.myFill.below=S.seg.myFill.above:L.seg.myFill.below=m,D?L.seg.myFill.above=!L.seg.myFill.below:L.seg.myFill.above=L.seg.myFill.below}else if(L.seg.otherFill===null){var F;S?L.primary===S.primary?F=S.seg.otherFill.above:F=S.seg.myFill.above:F=L.primary?_:m,L.seg.otherFill={above:F,below:F}}t&&t.status(L.seg,E?E.seg:!1,S?S.seg:!1),L.other.status=z.insert(r.node({ev:L}))}else{var N=L.status;if(N===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(T.exists(N.prev)&&T.exists(N.next)&&k(N.prev.ev,N.next.ev),t&&t.statusRemove(N.ev.seg),N.remove(),!L.primary){var G=L.seg.myFill;L.seg.myFill=L.seg.otherFill,L.seg.otherFill=G}R.push(L.seg)}o.getHead().remove()}return t&&t.done(),R}return l?{addRegion:function(m){for(var _,T=m[m.length-1],g=0;g<m.length;g++){_=T,T=m[g];var A=c.pointsCompare(_,T);A!==0&&p(f(A<0?_:T,A<0?T:_),!0)}},calculate:function(m){return b(m,!1)}}:{calculate:function(m,_,T,g){return m.forEach(function(A){p(a(A.start,A.end,A),!0)}),T.forEach(function(A){p(a(A.start,A.end,A),!1)}),b(_,g)}}}v.exports=n},{"./linked-list":522}],522:[function(e,v,M){var r={create:function(){var n={root:{root:!0,next:null},exists:function(l){return!(l===null||l===n.root)},isEmpty:function(){return n.root.next===null},getHead:function(){return n.root.next},insertBefore:function(l,c){for(var t=n.root,f=n.root.next;f!==null;){if(c(f)){l.prev=f.prev,l.next=f,f.prev.next=l,f.prev=l;return}t=f,f=f.next}t.next=l,l.prev=t,l.next=null},findTransition:function(l){for(var c=n.root,t=n.root.next;t!==null&&!l(t);)c=t,t=t.next;return{before:c===n.root?null:c,after:t,insert:function(f){return f.prev=c,f.next=t,c.next=f,t!==null&&(t.prev=f),f}}}};return n},node:function(n){return n.prev=null,n.next=null,n.remove=function(){n.prev.next=n.next,n.next&&(n.next.prev=n.prev),n.prev=null,n.next=null},n}};v.exports=r},{}],523:[function(e,v,M){function r(n,l,c){var t=[],f=[];return n.forEach(function(a){var o=a.start,u=a.end;if(l.pointsSame(o,u)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}c&&c.chainStart(a);var h={index:0,matches_head:!1,matches_pt1:!1},i={index:0,matches_head:!1,matches_pt1:!1},s=h;function p(F,N,G){return s.index=F,s.matches_head=N,s.matches_pt1=G,s===h?(s=i,!1):(s=null,!0)}for(var d=0;d<t.length;d++){var y=t[d],b=y[0];y[1];var m=y[y.length-1];if(y[y.length-2],l.pointsSame(b,o)){if(p(d,!0,!0))break}else if(l.pointsSame(b,u)){if(p(d,!0,!1))break}else if(l.pointsSame(m,o)){if(p(d,!1,!0))break}else if(l.pointsSame(m,u)&&p(d,!1,!1))break}if(s===h){t.push([o,u]),c&&c.chainNew(o,u);return}if(s===i){c&&c.chainMatch(h.index);var _=h.index,T=h.matches_pt1?u:o,g=h.matches_head,y=t[_],A=g?y[0]:y[y.length-1],k=g?y[1]:y[y.length-2],R=g?y[y.length-1]:y[0],L=g?y[y.length-2]:y[1];if(l.pointsCollinear(k,A,T)&&(g?(c&&c.chainRemoveHead(h.index,T),y.shift()):(c&&c.chainRemoveTail(h.index,T),y.pop()),A=k),l.pointsSame(R,T)){t.splice(_,1),l.pointsCollinear(L,R,A)&&(g?(c&&c.chainRemoveTail(h.index,A),y.pop()):(c&&c.chainRemoveHead(h.index,A),y.shift())),c&&c.chainClose(h.index),f.push(y);return}g?(c&&c.chainAddHead(h.index,T),y.unshift(T)):(c&&c.chainAddTail(h.index,T),y.push(T));return}function z(F){c&&c.chainReverse(F),t[F].reverse()}function E(F,N){var G=t[F],U=t[N],X=G[G.length-1],I=G[G.length-2],B=U[0],j=U[1];l.pointsCollinear(I,X,B)&&(c&&c.chainRemoveTail(F,X),G.pop(),X=I),l.pointsCollinear(X,B,j)&&(c&&c.chainRemoveHead(N,B),U.shift()),c&&c.chainJoin(F,N),t[F]=G.concat(U),t.splice(N,1)}var S=h.index,C=i.index;c&&c.chainConnect(S,C);var D=t[S].length<t[C].length;h.matches_head?i.matches_head?D?(z(S),E(S,C)):(z(C),E(C,S)):E(C,S):i.matches_head?E(S,C):D?(z(S),E(C,S)):(z(C),E(S,C))}),f}v.exports=r},{}],524:[function(e,v,M){function r(l,c,t){var f=[];return l.forEach(function(a){var o=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);c[o]!==0&&f.push({id:t?t.segmentId():-1,start:a.start,end:a.end,myFill:{above:c[o]===1,below:c[o]===2},otherFill:null})}),t&&t.selected(f),f}var n={union:function(l,c){return r(l,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],c)},intersect:function(l,c){return r(l,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],c)},difference:function(l,c){return r(l,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],c)},differenceRev:function(l,c){return r(l,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],c)},xor:function(l,c){return r(l,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],c)}};v.exports=n},{}],525:[function(e,v,M){var r=new Float64Array(4),n=new Float64Array(4),l=new Float64Array(4);function c(t,f,a,o,u){r.length<o.length&&(r=new Float64Array(o.length),n=new Float64Array(o.length),l=new Float64Array(o.length));for(var h=0;h<o.length;++h)r[h]=t[h]-o[h],n[h]=f[h]-t[h],l[h]=a[h]-t[h];for(var i=0,s=0,p=0,d=0,y=0,b=0,h=0;h<o.length;++h){var m=n[h],_=l[h],T=r[h];i+=m*m,s+=m*_,p+=_*_,d+=T*m,y+=T*_,b+=T*T}var g=Math.abs(i*p-s*s),A=s*y-p*d,k=s*d-i*y,R;if(A+k<=g)if(A<0)k<0&&d<0?(k=0,-d>=i?(A=1,R=i+2*d+b):(A=-d/i,R=d*A+b)):(A=0,y>=0?(k=0,R=b):-y>=p?(k=1,R=p+2*y+b):(k=-y/p,R=y*k+b));else if(k<0)k=0,d>=0?(A=0,R=b):-d>=i?(A=1,R=i+2*d+b):(A=-d/i,R=d*A+b);else{var L=1/g;A*=L,k*=L,R=A*(i*A+s*k+2*d)+k*(s*A+p*k+2*y)+b}else{var z,E,S,C;A<0?(z=s+d,E=p+y,E>z?(S=E-z,C=i-2*s+p,S>=C?(A=1,k=0,R=i+2*d+b):(A=S/C,k=1-A,R=A*(i*A+s*k+2*d)+k*(s*A+p*k+2*y)+b)):(A=0,E<=0?(k=1,R=p+2*y+b):y>=0?(k=0,R=b):(k=-y/p,R=y*k+b))):k<0?(z=s+y,E=i+d,E>z?(S=E-z,C=i-2*s+p,S>=C?(k=1,A=0,R=p+2*y+b):(k=S/C,A=1-k,R=A*(i*A+s*k+2*d)+k*(s*A+p*k+2*y)+b)):(k=0,E<=0?(A=1,R=i+2*d+b):d>=0?(A=0,R=b):(A=-d/i,R=d*A+b))):(S=p+y-s-d,S<=0?(A=0,k=1,R=p+2*y+b):(C=i-2*s+p,S>=C?(A=1,k=0,R=i+2*d+b):(A=S/C,k=1-A,R=A*(i*A+s*k+2*d)+k*(s*A+p*k+2*y)+b)))}for(var D=1-A-k,h=0;h<o.length;++h)u[h]=D*t[h]+A*f[h]+k*a[h];return R<0?0:R}v.exports=c},{}],526:[function(e,v,M){var r=v.exports={},n,l;function c(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=c}catch{n=c}try{typeof clearTimeout=="function"?l=clearTimeout:l=t}catch{l=t}})();function f(b){if(n===setTimeout)return setTimeout(b,0);if((n===c||!n)&&setTimeout)return n=setTimeout,setTimeout(b,0);try{return n(b,0)}catch{try{return n.call(null,b,0)}catch{return n.call(this,b,0)}}}function a(b){if(l===clearTimeout)return clearTimeout(b);if((l===t||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(b);try{return l(b)}catch{try{return l.call(null,b)}catch{return l.call(this,b)}}}var o=[],u=!1,h,i=-1;function s(){!u||!h||(u=!1,h.length?o=h.concat(o):i=-1,o.length&&p())}function p(){if(!u){var b=f(s);u=!0;for(var m=o.length;m;){for(h=o,o=[];++i<m;)h&&h[i].run();i=-1,m=o.length}h=null,u=!1,a(b)}}r.nextTick=function(b){var m=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)m[_-1]=arguments[_];o.push(new d(b,m)),o.length===1&&!u&&f(p)};function d(b,m){this.fun=b,this.array=m}d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function y(){}r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(b){return[]},r.binding=function(b){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(b){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],527:[function(e,v,M){v.exports=e("gl-quat/slerp")},{"gl-quat/slerp":325}],528:[function(e,v,M){(function(r){(function(){for(var n=e("performance-now"),l=typeof window>"u"?r:window,c=["moz","webkit"],t="AnimationFrame",f=l["request"+t],a=l["cancel"+t]||l["cancelRequest"+t],o=0;!f&&o<c.length;o++)f=l[c[o]+"Request"+t],a=l[c[o]+"Cancel"+t]||l[c[o]+"CancelRequest"+t];if(!f||!a){var u=0,h=0,i=[],s=1e3/60;f=function(p){if(i.length===0){var d=n(),y=Math.max(0,s-(d-u));u=y+d,setTimeout(function(){var b=i.slice(0);i.length=0;for(var m=0;m<b.length;m++)if(!b[m].cancelled)try{b[m].callback(u)}catch(_){setTimeout(function(){throw _},0)}},Math.round(y))}return i.push({handle:++h,callback:p,cancelled:!1}),h},a=function(p){for(var d=0;d<i.length;d++)i[d].handle===p&&(i[d].cancelled=!0)}}v.exports=function(p){return f.call(l,p)},v.exports.cancel=function(){a.apply(l,arguments)},v.exports.polyfill=function(p){p||(p=l),p.requestAnimationFrame=f,p.cancelAnimationFrame=a}}).call(this)}).call(this,typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":508}],529:[function(e,v,M){var r=e("big-rat/add");v.exports=n;function n(l,c){for(var t=l.length,f=new Array(t),a=0;a<t;++a)f[a]=r(l[a],c[a]);return f}},{"big-rat/add":80}],530:[function(e,v,M){v.exports=n;var r=e("big-rat");function n(l){for(var c=new Array(l.length),t=0;t<l.length;++t)c[t]=r(l[t]);return c}},{"big-rat":83}],531:[function(e,v,M){var r=e("big-rat"),n=e("big-rat/mul");v.exports=l;function l(c,t){for(var f=r(t),a=c.length,o=new Array(a),u=0;u<a;++u)o[u]=n(c[u],f);return o}},{"big-rat":83,"big-rat/mul":92}],532:[function(e,v,M){var r=e("big-rat/sub");v.exports=n;function n(l,c){for(var t=l.length,f=new Array(t),a=0;a<t;++a)f[a]=r(l[a],c[a]);return f}},{"big-rat/sub":94}],533:[function(e,v,M){var r=e("compare-cell"),n=e("compare-oriented-cell"),l=e("cell-orientation");v.exports=c;function c(t){t.sort(n);for(var f=t.length,a=0,o=0;o<f;++o){var u=t[o],h=l(u);if(h!==0){if(a>0){var i=t[a-1];if(r(u,i)===0&&l(i)!==h){a-=1;continue}}t[a++]=u}}return t.length=a,t}},{"cell-orientation":117,"compare-cell":133,"compare-oriented-cell":134}],534:[function(e,v,M){var r=e("array-bounds"),n=e("color-normalize"),l=e("update-diff"),c=e("pick-by-alias"),t=e("object-assign"),f=e("flatten-vertex-data"),a=e("to-float32"),o=a.float32,u=a.fract32;v.exports=i;var h=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function i(s,p){if(typeof s=="function"?(p||(p={}),p.regl=s):p=s,p.length&&(p.positions=p),s=p.regl,!s.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var d=s._gl,y,b,m,_,T,g,A={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},k=[];return _=s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),b=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),T=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),g=s.buffer({usage:"static",type:"float",data:h}),E(p),y=s({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:s.prop("range"),lineWidth:s.prop("lineWidth"),capSize:s.prop("capSize"),opacity:s.prop("opacity"),scale:s.prop("scale"),translate:s.prop("translate"),scaleFract:s.prop("scaleFract"),translateFract:s.prop("translateFract"),viewport:function(C,D){return[D.viewport.x,D.viewport.y,C.viewportWidth,C.viewportHeight]}},attributes:{color:{buffer:_,offset:function(C,D){return D.offset*4},divisor:1},position:{buffer:b,offset:function(C,D){return D.offset*8},divisor:1},positionFract:{buffer:m,offset:function(C,D){return D.offset*8},divisor:1},error:{buffer:T,offset:function(C,D){return D.offset*16},divisor:1},direction:{buffer:g,stride:24,offset:0},lineOffset:{buffer:g,stride:24,offset:8},capOffset:{buffer:g,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:s.prop("viewport")},viewport:s.prop("viewport"),stencil:!1,instances:s.prop("count"),count:h.length}),t(R,{update:E,draw:L,destroy:S,regl:s,gl:d,canvas:d.canvas,groups:k}),R;function R(C){C?E(C):C===null&&S(),L()}function L(C){if(typeof C=="number")return z(C);C&&!Array.isArray(C)&&(C=[C]),s._refresh(),k.forEach(function(D,F){if(D){if(C&&(C[F]?D.draw=!0:D.draw=!1),!D.draw){D.draw=!0;return}z(F)}})}function z(C){typeof C=="number"&&(C=k[C]),C!=null&&C&&C.count&&C.color&&C.opacity&&C.positions&&C.positions.length>1&&(C.scaleRatio=[C.scale[0]*C.viewport.width,C.scale[1]*C.viewport.height],y(C),C.after&&C.after(C))}function E(C){if(C){C.length!=null?typeof C[0]=="number"&&(C=[{positions:C}]):Array.isArray(C)||(C=[C]);var D=0,F=0;if(R.groups=k=C.map(function(I,B){var j=k[B];if(I)typeof I=="function"?I={after:I}:typeof I[0]=="number"&&(I={positions:I});else return j;return I=c(I,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),j||(k[B]=j={id:B,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},I=t({},A,I)),l(j,I,[{lineWidth:function(H){return+H*.5},capSize:function(H){return+H*.5},opacity:parseFloat,errors:function(H){return H=f(H),F+=H.length,H},positions:function(H,K){return H=f(H,"float64"),K.count=Math.floor(H.length/2),K.bounds=r(H,2),K.offset=D,D+=K.count,H}},{color:function(H,K){var te=K.count;if(H||(H="transparent"),!Array.isArray(H)||typeof H[0]=="number"){var J=H;H=Array(te);for(var oe=0;oe<te;oe++)H[oe]=J}if(H.length<te)throw Error("Not enough colors");for(var ie=new Uint8Array(te*4),Q=0;Q<te;Q++){var V=n(H[Q],"uint8");ie.set(V,Q*4)}return ie},range:function(H,K,te){var J=K.bounds;return H||(H=J),K.scale=[1/(H[2]-H[0]),1/(H[3]-H[1])],K.translate=[-H[0],-H[1]],K.scaleFract=u(K.scale),K.translateFract=u(K.translate),H},viewport:function(H){var K;return Array.isArray(H)?K={x:H[0],y:H[1],width:H[2]-H[0],height:H[3]-H[1]}:H?(K={x:H.x||H.left||0,y:H.y||H.top||0},H.right?K.width=H.right-K.x:K.width=H.w||H.width||0,H.bottom?K.height=H.bottom-K.y:K.height=H.h||H.height||0):K={x:0,y:0,width:d.drawingBufferWidth,height:d.drawingBufferHeight},K}}]),j}),D||F){var N=k.reduce(function(I,B,j){return I+(B?B.count:0)},0),G=new Float64Array(N*2),U=new Uint8Array(N*4),X=new Float32Array(N*4);k.forEach(function(I,B){if(I){var j=I.positions,H=I.count,K=I.offset,te=I.color,J=I.errors;H&&(U.set(te,K*4),X.set(J,K*4),G.set(j,K*2))}}),b(o(G)),m(u(G)),_(U),T(X)}}}function S(){b.destroy(),m.destroy(),_.destroy(),T.destroy(),g.destroy()}}},{"array-bounds":70,"color-normalize":125,"flatten-vertex-data":244,"object-assign":499,"pick-by-alias":511,"to-float32":577,"update-diff":599}],535:[function(e,v,M){var r=e("color-normalize"),n=e("array-bounds"),l=e("object-assign"),c=e("glslify"),t=e("pick-by-alias"),f=e("flatten-vertex-data"),a=e("earcut"),o=e("array-normalize"),u=e("to-float32"),h=u.float32,i=u.fract32,s=e("es6-weak-map"),p=e("parse-rect");v.exports=d;function d(y,b){if(!(this instanceof d))return new d(y,b);if(typeof y=="function"?(b||(b={}),b.regl=y):b=y,b.length&&(b.positions=b),y=b.regl,!y.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=y._gl,this.regl=y,this.passes=[],this.shaders=d.shaders.has(y)?d.shaders.get(y):d.shaders.set(y,d.createShaders(y)).get(y),this.update(b)}d.dashMult=2,d.maxPatternLength=256,d.precisionThreshold=3e6,d.maxPoints=1e4,d.maxLines=2048,d.shaders=new s,d.createShaders=function(y){var b=y.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),m={primitive:"triangle strip",instances:y.prop("count"),count:4,offset:0,uniforms:{miterMode:function(A,k){return k.join==="round"?2:1},miterLimit:y.prop("miterLimit"),scale:y.prop("scale"),scaleFract:y.prop("scaleFract"),translateFract:y.prop("translateFract"),translate:y.prop("translate"),thickness:y.prop("thickness"),dashPattern:y.prop("dashTexture"),opacity:y.prop("opacity"),pixelRatio:y.context("pixelRatio"),id:y.prop("id"),dashSize:y.prop("dashLength"),viewport:function(A,k){return[k.viewport.x,k.viewport.y,A.viewportWidth,A.viewportHeight]},depth:y.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(A,k){return!k.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:y.prop("viewport")},viewport:y.prop("viewport")},_=y(l({vert:c([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:c([`precision highp float;
#define GLSLIFY 1

uniform sampler2D dashPattern;

uniform float dashSize, pixelRatio, thickness, opacity, id;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;
	float dash = texture2D(dashPattern, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:b,divisor:0,stride:8,offset:0},lineTop:{buffer:b,divisor:0,stride:8,offset:4},aCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:y.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:y.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:y.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},m)),T;try{T=y(l({cull:{enable:!0,face:"back"},vert:c([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:c([`precision highp float;
#define GLSLIFY 1

uniform sampler2D dashPattern;
uniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;
	float dash = texture2D(dashPattern, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:b,divisor:0,stride:8,offset:0},lineTop:{buffer:b,divisor:0,stride:8,offset:4},aColor:{buffer:y.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:y.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},m))}catch{T=_}var g=y({primitive:"triangle",elements:function(A,k){return k.triangles},offset:0,vert:c([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:c([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:y.prop("scale"),color:y.prop("fill"),scaleFract:y.prop("scaleFract"),translateFract:y.prop("translateFract"),translate:y.prop("translate"),opacity:y.prop("opacity"),pixelRatio:y.context("pixelRatio"),id:y.prop("id"),viewport:function(A,k){return[k.viewport.x,k.viewport.y,A.viewportWidth,A.viewportHeight]}},attributes:{position:{buffer:y.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:y.prop("positionFractBuffer"),stride:8,offset:8}},blend:m.blend,depth:{enable:!1},scissor:m.scissor,stencil:m.stencil,viewport:m.viewport});return{fill:g,rect:_,miter:T}},d.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},d.prototype.render=function(){for(var y,b=[],m=arguments.length;m--;)b[m]=arguments[m];b.length&&(y=this).update.apply(y,b),this.draw()},d.prototype.draw=function(){for(var y=this,b=[],m=arguments.length;m--;)b[m]=arguments[m];return(b.length?b:this.passes).forEach(function(_,T){var g;if(_&&Array.isArray(_))return(g=y).draw.apply(g,_);typeof _=="number"&&(_=y.passes[_]),_&&_.count>1&&_.opacity&&(y.regl._refresh(),_.fill&&_.triangles&&_.triangles.length>2&&y.shaders.fill(_),_.thickness&&(_.scale[0]*_.viewport.width>d.precisionThreshold||_.scale[1]*_.viewport.height>d.precisionThreshold||_.join==="rect"||!_.join&&(_.thickness<=2||_.count>=d.maxPoints)?y.shaders.rect(_):y.shaders.miter(_)))}),this},d.prototype.update=function(y){var b=this;if(y){y.length!=null?typeof y[0]=="number"&&(y=[{positions:y}]):Array.isArray(y)||(y=[y]);var m=this,_=m.regl,T=m.gl;if(y.forEach(function(L,z){var E=b.passes[z];if(L!==void 0){if(L===null){b.passes[z]=null;return}if(typeof L[0]=="number"&&(L={positions:L}),L=t(L,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"}),E||(b.passes[z]=E={id:z,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:_.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:_.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:_.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:_.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},L=l({},d.defaults,L)),L.thickness!=null&&(E.thickness=parseFloat(L.thickness)),L.opacity!=null&&(E.opacity=parseFloat(L.opacity)),L.miterLimit!=null&&(E.miterLimit=parseFloat(L.miterLimit)),L.overlay!=null&&(E.overlay=!!L.overlay,z<d.maxLines&&(E.depth=2*(d.maxLines-1-z%d.maxLines)/d.maxLines-1)),L.join!=null&&(E.join=L.join),L.hole!=null&&(E.hole=L.hole),L.fill!=null&&(E.fill=L.fill?r(L.fill,"uint8"):null),L.viewport!=null&&(E.viewport=p(L.viewport)),E.viewport||(E.viewport=p([T.drawingBufferWidth,T.drawingBufferHeight])),L.close!=null&&(E.close=L.close),L.positions===null&&(L.positions=[]),L.positions){var S,C;if(L.positions.x&&L.positions.y){var D=L.positions.x,F=L.positions.y;C=E.count=Math.max(D.length,F.length),S=new Float64Array(C*2);for(var N=0;N<C;N++)S[N*2]=D[N],S[N*2+1]=F[N]}else S=f(L.positions,"float64"),C=E.count=Math.floor(S.length/2);var G=E.bounds=n(S,2);if(E.fill){for(var U=[],X={},I=0,B=0,j=0,H=E.count;B<H;B++){var K=S[B*2],te=S[B*2+1];isNaN(K)||isNaN(te)||K==null||te==null?(K=S[I*2],te=S[I*2+1],X[B]=I):I=B,U[j++]=K,U[j++]=te}for(var J=a(U,E.hole||[]),oe=0,ie=J.length;oe<ie;oe++)X[J[oe]]!=null&&(J[oe]=X[J[oe]]);E.triangles=J}var Q=new Float64Array(S);o(Q,2,G);var V=new Float64Array(C*2+6);E.close?S[0]===S[C*2-2]&&S[1]===S[C*2-1]?(V[0]=Q[C*2-4],V[1]=Q[C*2-3]):(V[0]=Q[C*2-2],V[1]=Q[C*2-1]):(V[0]=Q[0],V[1]=Q[1]),V.set(Q,2),E.close?S[0]===S[C*2-2]&&S[1]===S[C*2-1]?(V[C*2+2]=Q[2],V[C*2+3]=Q[3],E.count-=1):(V[C*2+2]=Q[0],V[C*2+3]=Q[1],V[C*2+4]=Q[2],V[C*2+5]=Q[3]):(V[C*2+2]=Q[C*2-2],V[C*2+3]=Q[C*2-1],V[C*2+4]=Q[C*2-2],V[C*2+5]=Q[C*2-1]),E.positionBuffer(h(V)),E.positionFractBuffer(i(V))}if(L.range?E.range=L.range:E.range||(E.range=E.bounds),(L.range||L.positions)&&E.count){var se=E.bounds,re=se[2]-se[0],ee=se[3]-se[1],ae=E.range[2]-E.range[0],fe=E.range[3]-E.range[1];E.scale=[re/ae,ee/fe],E.translate=[-E.range[0]/ae+se[0]/ae||0,-E.range[1]/fe+se[1]/fe||0],E.scaleFract=i(E.scale),E.translateFract=i(E.translate)}if(L.dashes){var de=0,pe;if(!L.dashes||L.dashes.length<2)de=1,pe=new Uint8Array([255,255,255,255,255,255,255,255]);else{de=0;for(var W=0;W<L.dashes.length;++W)de+=L.dashes[W];pe=new Uint8Array(de*d.dashMult);for(var ue=0,me=255,be=0;be<2;be++)for(var ke=0;ke<L.dashes.length;++ke){for(var Pe=0,je=L.dashes[ke]*d.dashMult*.5;Pe<je;++Pe)pe[ue++]=me;me^=255}}E.dashLength=de,E.dashTexture({channels:1,data:pe,width:pe.length,height:1,mag:"linear",min:"linear"},0,0)}if(L.color){var ze=E.count,Ze=L.color;Ze||(Ze="transparent");var tt=new Uint8Array(ze*4+4);if(!Array.isArray(Ze)||typeof Ze[0]=="number")for(var Ce=r(Ze,"uint8"),Ae=0;Ae<ze+1;Ae++)tt.set(Ce,Ae*4);else{for(var Ne=0;Ne<ze;Ne++){var qe=r(Ze[Ne],"uint8");tt.set(qe,Ne*4)}tt.set(r(Ze[0],"uint8"),ze*4)}E.colorBuffer({usage:"dynamic",type:"uint8",data:tt})}}}),y.length<this.passes.length){for(var g=y.length;g<this.passes.length;g++){var A=this.passes[g];A&&(A.colorBuffer.destroy(),A.positionBuffer.destroy(),A.dashTexture.destroy())}this.passes.length=y.length}for(var k=[],R=0;R<this.passes.length;R++)this.passes[R]!==null&&k.push(this.passes[R]);return this.passes=k,this}},d.prototype.destroy=function(){return this.passes.forEach(function(y){y.colorBuffer.destroy(),y.positionBuffer.destroy(),y.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":70,"array-normalize":71,"color-normalize":125,earcut:177,"es6-weak-map":233,"flatten-vertex-data":244,glslify:536,"object-assign":499,"parse-rect":504,"pick-by-alias":511,"to-float32":577}],536:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],537:[function(e,v,M){function r(S,C){return c(S)||f(S,C)||a(S,C)||h()}function n(S){return l(S)||t(S)||a(S)||u()}function l(S){if(Array.isArray(S))return o(S)}function c(S){if(Array.isArray(S))return S}function t(S){if(typeof Symbol<"u"&&Symbol.iterator in Object(S))return Array.from(S)}function f(S,C){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(S)))){var D=[],F=!0,N=!1,G=void 0;try{for(var U=S[Symbol.iterator](),X;!(F=(X=U.next()).done)&&(D.push(X.value),!(C&&D.length===C));F=!0);}catch(I){N=!0,G=I}finally{try{!F&&U.return!=null&&U.return()}finally{if(N)throw G}}return D}}function a(S,C){if(S){if(typeof S=="string")return o(S,C);var D=Object.prototype.toString.call(S).slice(8,-1);if(D==="Object"&&S.constructor&&(D=S.constructor.name),D==="Map"||D==="Set")return Array.from(S);if(D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return o(S,C)}}function o(S,C){(C==null||C>S.length)&&(C=S.length);for(var D=0,F=new Array(C);D<C;D++)F[D]=S[D];return F}function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=e("color-normalize"),s=e("array-bounds"),p=e("color-id"),d=e("@plotly/point-cluster"),y=e("object-assign"),b=e("glslify"),m=e("pick-by-alias"),_=e("update-diff"),T=e("flatten-vertex-data"),g=e("is-iexplorer"),A=e("to-float32"),k=e("parse-rect"),R=L;function L(S,C){var D=this;if(!(this instanceof L))return new L(S,C);typeof S=="function"?(C||(C={}),C.regl=S):(C=S,S=null),C&&C.length&&(C.positions=C),S=C.regl;var F=S._gl,N,G=[],U={},X=[],I=[null],B=[null],j=255,H=100;this.tooManyColors=g,N=S.texture({data:new Uint8Array(j*4),width:j,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),y(this,{regl:S,gl:F,groups:X,markerCache:B,markerTextures:I,palette:G,paletteIds:U,paletteTexture:N,maxColors:j,maxSize:H,canvas:F.canvas}),this.update(C);var K={uniforms:{constPointSize:!!C.constPointSize,pixelRatio:S.context("pixelRatio"),palette:N,paletteSize:function(ie,Q){return[D.tooManyColors?0:j,N.height]},scale:S.prop("scale"),scaleFract:S.prop("scaleFract"),translate:S.prop("translate"),translateFract:S.prop("translateFract"),opacity:S.prop("opacity"),marker:S.prop("markerTexture")},attributes:{x:function(ie,Q){return Q.xAttr||{buffer:Q.positionBuffer,stride:8,offset:0}},y:function(ie,Q){return Q.yAttr||{buffer:Q.positionBuffer,stride:8,offset:4}},xFract:function(ie,Q){return Q.xAttr?{constant:[0,0]}:{buffer:Q.positionFractBuffer,stride:8,offset:0}},yFract:function(ie,Q){return Q.yAttr?{constant:[0,0]}:{buffer:Q.positionFractBuffer,stride:8,offset:4}},size:function(ie,Q){return Q.size.length?{buffer:Q.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(Q.size*255/D.maxSize)]}},borderSize:function(ie,Q){return Q.borderSize.length?{buffer:Q.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(Q.borderSize*255/D.maxSize)]}},colorId:function(ie,Q){return Q.color.length?{buffer:Q.colorBuffer,stride:D.tooManyColors?8:4,offset:0}:{constant:D.tooManyColors?G.slice(Q.color*4,Q.color*4+4):[Q.color]}},borderColorId:function(ie,Q){return Q.borderColor.length?{buffer:Q.colorBuffer,stride:D.tooManyColors?8:4,offset:D.tooManyColors?4:2}:{constant:D.tooManyColors?G.slice(Q.borderColor*4,Q.borderColor*4+4):[Q.borderColor]}},isActive:function(ie,Q){return Q.activation===!0?{constant:[1]}:Q.activation?Q.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:S.prop("viewport")},viewport:S.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:S.prop("elements"),count:S.prop("count"),offset:S.prop("offset"),primitive:"points"},te=y({},K);te.frag=b([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

uniform sampler2D marker;
uniform float opacity;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(marker, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),te.vert=b([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform float pixelRatio;
uniform bool constPointSize;
uniform sampler2D palette;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(palette,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=S(te);var J=y({},K);J.frag=b([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;

uniform float opacity;
varying float fragBorderRadius, fragWidth;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),J.vert=b([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio;
uniform bool constPointSize;
uniform sampler2D palette;
uniform vec2 paletteSize;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(palette,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),g&&(J.frag=J.frag.replace("smoothstep","smoothStep"),te.frag=te.frag.replace("smoothstep","smoothStep")),this.drawCircle=S(J)}L.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},L.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},L.prototype.draw=function(){for(var S=this,C=arguments.length,D=new Array(C),F=0;F<C;F++)D[F]=arguments[F];var N=this.groups;if(D.length===1&&Array.isArray(D[0])&&(D[0][0]===null||Array.isArray(D[0][0]))&&(D=D[0]),this.regl._refresh(),D.length)for(var G=0;G<D.length;G++)this.drawItem(G,D[G]);else N.forEach(function(U,X){S.drawItem(X)});return this},L.prototype.drawItem=function(S,C){var D=this.groups,F=D[S];if(typeof C=="number"&&(S=C,F=D[C],C=null),!!(F&&F.count&&F.opacity)){F.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,F,C));for(var N=[],G=1;G<F.activation.length;G++)!F.activation[G]||F.activation[G]!==!0&&!F.activation[G].data.length||N.push.apply(N,n(this.getMarkerDrawOptions(G,F,C)));N.length&&this.drawMarker(N)}},L.prototype.getMarkerDrawOptions=function(S,C,D){var F=C.range,N=C.tree,G=C.viewport,U=C.activation,X=C.selectionBuffer,I=C.count;if(this.regl,!N)return D?[y({},C,{markerTexture:this.markerTextures[S],activation:U[S],count:D.length,elements:D,offset:0})]:[y({},C,{markerTexture:this.markerTextures[S],activation:U[S],offset:0})];var B=[],j=N.range(F,{lod:!0,px:[(F[2]-F[0])/G.width,(F[3]-F[1])/G.height]});if(D){for(var H=U[S],K=H.data,te=new Uint8Array(I),J=0;J<D.length;J++){var oe=D[J];te[oe]=K?K[oe]:1}X.subdata(te)}for(var ie=j.length;ie--;){var Q=r(j[ie],2),V=Q[0],se=Q[1];B.push(y({},C,{markerTexture:this.markerTextures[S],activation:D?X:U[S],offset:V,count:se-V}))}return B},L.prototype.update=function(){for(var S=this,C=arguments.length,D=new Array(C),F=0;F<C;F++)D[F]=arguments[F];if(D.length){D.length===1&&Array.isArray(D[0])&&(D=D[0]);var N=this.groups,G=this.gl,U=this.regl,X=this.maxSize,I=this.maxColors,B=this.palette;this.groups=N=D.map(function(j,H){var K=N[H];if(j===void 0)return K;j===null?j={positions:null}:typeof j=="function"?j={ondraw:j}:typeof j[0]=="number"&&(j={positions:j}),j=m(j,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),j.positions===null&&(j.positions=[]),j.tooManyColors!=null&&(S.tooManyColors=j.tooManyColors),K||(N[H]=K={id:H,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:U.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:U.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:U.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:U.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:U.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},j=y({},L.defaults,j)),j.positions&&!("marker"in j)&&(j.marker=K.marker,delete K.marker),j.marker&&!("positions"in j)&&(j.positions=K.positions,delete K.positions);var te=0,J=0;if(_(K,j,[{snap:!0,size:function(ze,Ze){return ze==null&&(ze=L.defaults.size),te+=ze&&ze.length?1:0,ze},borderSize:function(ze,Ze){return ze==null&&(ze=L.defaults.borderSize),te+=ze&&ze.length?1:0,ze},opacity:parseFloat,color:function(ze,Ze){return ze==null&&(ze=L.defaults.color),ze=S.updateColor(ze),J++,ze},borderColor:function(ze,Ze){return ze==null&&(ze=L.defaults.borderColor),ze=S.updateColor(ze),J++,ze},bounds:function(ze,Ze,tt){return"range"in tt||(tt.range=null),ze},positions:function(ze,Ze,tt){var Ce=Ze.snap,Ae=Ze.positionBuffer,Ne=Ze.positionFractBuffer,qe=Ze.selectionBuffer;if(ze.x||ze.y)return ze.x.length?Ze.xAttr={buffer:U.buffer(ze.x),offset:0,stride:4,count:ze.x.length}:Ze.xAttr={buffer:ze.x.buffer,offset:ze.x.offset*4||0,stride:(ze.x.stride||1)*4,count:ze.x.count},ze.y.length?Ze.yAttr={buffer:U.buffer(ze.y),offset:0,stride:4,count:ze.y.length}:Ze.yAttr={buffer:ze.y.buffer,offset:ze.y.offset*4||0,stride:(ze.y.stride||1)*4,count:ze.y.count},Ze.count=Math.max(Ze.xAttr.count,Ze.yAttr.count),ze;ze=T(ze,"float64");var At=Ze.count=Math.floor(ze.length/2),kt=Ze.bounds=At?s(ze,2):null;if(!tt.range&&!Ze.range&&(delete Ze.range,tt.range=kt),!tt.marker&&!Ze.marker&&(delete Ze.marker,tt.marker=null),Ce&&(Ce===!0||At>Ce)?Ze.tree=d(ze,{bounds:kt}):Ce&&Ce.length&&(Ze.tree=Ce),Ze.tree){var Ve={primitive:"points",usage:"static",data:Ze.tree,type:"uint32"};Ze.elements?Ze.elements(Ve):Ze.elements=U.elements(Ve)}return Ae({data:A.float(ze),usage:"dynamic"}),Ne({data:A.fract(ze),usage:"dynamic"}),qe({data:new Uint8Array(At),type:"uint8",usage:"stream"}),ze}},{marker:function(ze,Ze,tt){var Ce=Ze.activation;if(Ce.forEach(function(St){return St&&St.destroy&&St.destroy()}),Ce.length=0,!ze||typeof ze[0]=="number"){var Ae=S.addMarker(ze);Ce[Ae]=!0}else{for(var Ne=[],qe=0,At=Math.min(ze.length,Ze.count);qe<At;qe++){var kt=S.addMarker(ze[qe]);Ne[kt]||(Ne[kt]=new Uint8Array(Ze.count)),Ne[kt][qe]=1}for(var Ve=0;Ve<Ne.length;Ve++)if(Ne[Ve]){var ft={data:Ne[Ve],type:"uint8",usage:"static"};Ce[Ve]?Ce[Ve](ft):Ce[Ve]=U.buffer(ft),Ce[Ve].data=Ne[Ve]}}return ze},range:function(ze,Ze,tt){var Ce=Ze.bounds;if(Ce)return ze||(ze=Ce),Ze.scale=[1/(ze[2]-ze[0]),1/(ze[3]-ze[1])],Ze.translate=[-ze[0],-ze[1]],Ze.scaleFract=A.fract(Ze.scale),Ze.translateFract=A.fract(Ze.translate),ze},viewport:function(ze){var Ze=k(ze||[G.drawingBufferWidth,G.drawingBufferHeight]);return Ze}}]),te){var oe=K,ie=oe.count,Q=oe.size,V=oe.borderSize,se=oe.sizeBuffer,re=new Uint8Array(ie*2);if(Q.length||V.length)for(var ee=0;ee<ie;ee++)re[ee*2]=Math.round((Q[ee]==null?Q:Q[ee])*255/X),re[ee*2+1]=Math.round((V[ee]==null?V:V[ee])*255/X);se({data:re,usage:"dynamic"})}if(J){var ae=K,fe=ae.count,de=ae.color,pe=ae.borderColor,W=ae.colorBuffer,ue;if(S.tooManyColors){if(de.length||pe.length){ue=new Uint8Array(fe*8);for(var me=0;me<fe;me++){var be=de[me];ue[me*8]=B[be*4],ue[me*8+1]=B[be*4+1],ue[me*8+2]=B[be*4+2],ue[me*8+3]=B[be*4+3];var ke=pe[me];ue[me*8+4]=B[ke*4],ue[me*8+5]=B[ke*4+1],ue[me*8+6]=B[ke*4+2],ue[me*8+7]=B[ke*4+3]}}}else if(de.length||pe.length){ue=new Uint8Array(fe*4+2);for(var Pe=0;Pe<fe;Pe++)de[Pe]!=null&&(ue[Pe*4]=de[Pe]%I,ue[Pe*4+1]=Math.floor(de[Pe]/I)),pe[Pe]!=null&&(ue[Pe*4+2]=pe[Pe]%I,ue[Pe*4+3]=Math.floor(pe[Pe]/I))}W({data:ue||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return K})}},L.prototype.addMarker=function(S){var C=this.markerTextures,D=this.regl,F=this.markerCache,N=S==null?0:F.indexOf(S);if(N>=0)return N;var G;if(S instanceof Uint8Array||S instanceof Uint8ClampedArray)G=S;else{G=new Uint8Array(S.length);for(var U=0,X=S.length;U<X;U++)G[U]=S[U]*255}var I=Math.floor(Math.sqrt(G.length));return N=C.length,F.push(S),C.push(D.texture({channels:1,data:G,radius:I,mag:"linear",min:"linear"})),N},L.prototype.updateColor=function(S){var C=this.paletteIds,D=this.palette,F=this.maxColors;Array.isArray(S)||(S=[S]);var N=[];if(typeof S[0]=="number"){var G=[];if(Array.isArray(S))for(var U=0;U<S.length;U+=4)G.push(S.slice(U,U+4));else for(var X=0;X<S.length;X+=4)G.push(S.subarray(X,X+4));S=G}for(var I=0;I<S.length;I++){var B=S[I];B=i(B,"uint8");var j=p(B,!1);if(C[j]==null){var H=D.length;C[j]=Math.floor(H/4),D[H]=B[0],D[H+1]=B[1],D[H+2]=B[2],D[H+3]=B[3]}N[I]=C[j]}return!this.tooManyColors&&D.length>F*4&&(this.tooManyColors=!0),this.updatePalette(D),N.length===1?N[0]:N},L.prototype.updatePalette=function(S){if(!this.tooManyColors){var C=this.maxColors,D=this.paletteTexture,F=Math.ceil(S.length*.25/C);if(F>1){S=S.slice();for(var N=S.length*.25%C;N<F*C;N++)S.push(0,0,0,0)}D.height<F&&D.resize(C,F),D.subimage({width:Math.min(S.length*.25,C),height:F,data:S},0,0)}},L.prototype.destroy=function(){return this.groups.forEach(function(S){S.sizeBuffer.destroy(),S.positionBuffer.destroy(),S.positionFractBuffer.destroy(),S.colorBuffer.destroy(),S.activation.forEach(function(C){return C&&C.destroy&&C.destroy()}),S.selectionBuffer.destroy(),S.elements&&S.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(S){return S&&S.destroy&&S.destroy()}),this};var z=e("object-assign"),E=function(C,D){var F=new R(C,D),N=F.render.bind(F);return z(N,{render:N,update:F.update.bind(F),draw:F.draw.bind(F),destroy:F.destroy.bind(F),regl:F.regl,gl:F.gl,canvas:F.gl.canvas,groups:F.groups,markers:F.markerCache,palette:F.palette}),N};v.exports=E},{"@plotly/point-cluster":57,"array-bounds":70,"color-id":123,"color-normalize":125,"flatten-vertex-data":244,glslify:538,"is-iexplorer":466,"object-assign":499,"parse-rect":504,"pick-by-alias":511,"to-float32":577,"update-diff":599}],538:[function(e,v,M){arguments[4][257][0].apply(M,arguments)},{dup:257}],539:[function(e,v,M){var r=e("regl-scatter2d"),n=e("pick-by-alias"),l=e("array-bounds"),c=e("raf"),t=e("array-range"),f=e("parse-rect"),a=e("flatten-vertex-data");v.exports=o;function o(s,p){if(!(this instanceof o))return new o(s);this.traces=[],this.passes={},this.regl=s,this.scatter=r(s),this.canvas=this.scatter.canvas}o.prototype.render=function(){for(var s=this,p,d=[],y=arguments.length;y--;)d[y]=arguments[y];return d.length&&(p=this).update.apply(p,d),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=c(function(){s.draw(),s.dirty=!0,s.planned=null})):(this.draw(),this.dirty=!0,c(function(){s.dirty=!1})),this)},o.prototype.update=function(){for(var s,p=[],d=arguments.length;d--;)p[d]=arguments[d];if(p.length){for(var y=0;y<p.length;y++)this.updateItem(y,p[y]);this.traces=this.traces.filter(Boolean);for(var b=[],m=0,_=0;_<this.traces.length;_++){for(var T=this.traces[_],g=this.traces[_].passes,A=0;A<g.length;A++)b.push(this.passes[g[A]]);T.passOffset=m,m+=T.passes.length}return(s=this.scatter).update.apply(s,b),this}},o.prototype.updateItem=function(s,p){var d=this,y=d.regl;if(p===null)return this.traces[s]=null,this;if(!p)return this;var b=n(p,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),m=this.traces[s]||(this.traces[s]={id:s,buffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:f([y._gl.drawingBufferWidth,y._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(b.color!=null&&(m.color=b.color),b.size!=null&&(m.size=b.size),b.marker!=null&&(m.marker=b.marker),b.borderColor!=null&&(m.borderColor=b.borderColor),b.borderSize!=null&&(m.borderSize=b.borderSize),b.opacity!=null&&(m.opacity=b.opacity),b.viewport&&(m.viewport=f(b.viewport)),b.diagonal!=null&&(m.diagonal=b.diagonal),b.upper!=null&&(m.upper=b.upper),b.lower!=null&&(m.lower=b.lower),b.data){m.buffer(a(b.data)),m.columns=b.data.length,m.count=b.data[0].length,m.bounds=[];for(var _=0;_<m.columns;_++)m.bounds[_]=l(b.data[_],1)}var T;b.range&&(m.range=b.range,T=m.range&&typeof m.range[0]!="number"),b.domain&&(m.domain=b.domain);var g=!1;b.padding!=null&&(Array.isArray(b.padding)&&b.padding.length===m.columns&&typeof b.padding[b.padding.length-1]=="number"?(m.padding=b.padding.map(i),g=!0):m.padding=i(b.padding));var A=m.columns,k=m.count,R=m.viewport.width,L=m.viewport.height,z=m.viewport.x,E=m.viewport.y,S=R/A,C=L/A;m.passes=[];for(var D=0;D<A;D++)for(var F=0;F<A;F++)if(!(!m.diagonal&&F===D)&&!(!m.upper&&D>F)&&!(!m.lower&&D<F)){var N=u(m.id,D,F),G=this.passes[N]||(this.passes[N]={});if(b.data&&(b.transpose?G.positions={x:{buffer:m.buffer,offset:F,count:k,stride:A},y:{buffer:m.buffer,offset:D,count:k,stride:A}}:G.positions={x:{buffer:m.buffer,offset:F*k,count:k},y:{buffer:m.buffer,offset:D*k,count:k}},G.bounds=h(m.bounds,D,F)),b.domain||b.viewport||b.data){var U=g?h(m.padding,D,F):m.padding;if(m.domain){var X=h(m.domain,D,F),I=X[0],B=X[1],j=X[2],H=X[3];G.viewport=[z+I*R+U[0],E+B*L+U[1],z+j*R-U[2],E+H*L-U[3]]}else G.viewport=[z+F*S+S*U[0],E+D*C+C*U[1],z+(F+1)*S-S*U[2],E+(D+1)*C-C*U[3]]}b.color&&(G.color=m.color),b.size&&(G.size=m.size),b.marker&&(G.marker=m.marker),b.borderSize&&(G.borderSize=m.borderSize),b.borderColor&&(G.borderColor=m.borderColor),b.opacity&&(G.opacity=m.opacity),b.range&&(G.range=T?h(m.range,D,F):m.range||G.bounds),m.passes.push(N)}return this},o.prototype.draw=function(){for(var s,p=[],d=arguments.length;d--;)p[d]=arguments[d];if(!p.length)this.scatter.draw();else{for(var y=[],b=0;b<p.length;b++)if(typeof p[b]=="number"){var m=this.traces[p[b]],_=m.passes,T=m.passOffset;y.push.apply(y,t(T,T+_.length))}else if(p[b].length){var g=p[b],A=this.traces[b],k=A.passes,R=A.passOffset;k=k.map(function(L,z){y[R+z]=g})}(s=this.scatter).draw.apply(s,y)}return this},o.prototype.destroy=function(){return this.traces.forEach(function(s){s.buffer&&s.buffer.destroy&&s.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function u(s,p,d){var y=s.id!=null?s.id:s,b=p,m=d,_=y<<16|(b&255)<<8|m&255;return _}function h(s,p,d){var y,b,m,_,T=s[p],g=s[d];return T.length>2?(T[0],T[2],y=T[1],b=T[3]):T.length?(y=T[0],b=T[1]):(T.x,y=T.y,T.x+T.width,b=T.y+T.height),g.length>2?(m=g[0],_=g[2],g[1],g[3]):g.length?(m=g[0],_=g[1]):(m=g.x,g.y,_=g.x+g.width,g.y+g.height),[m,y,_,b]}function i(s){if(typeof s=="number")return[s,s,s,s];if(s.length===2)return[s[0],s[1],s[0],s[1]];var p=f(s);return[p.x,p.y,p.x+p.width,p.y+p.height]}},{"array-bounds":70,"array-range":72,"flatten-vertex-data":244,"parse-rect":504,"pick-by-alias":511,raf:528,"regl-scatter2d":537}],540:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?v.exports=n():r.createREGL=n()})(this,function(){function r(Ge,ot){this.id=ae++,this.type=Ge,this.data=ot}function n(Ge){if(Ge.length===0)return[];var ot=Ge.charAt(0),Je=Ge.charAt(Ge.length-1);if(1<Ge.length&&ot===Je&&(ot==='"'||ot==="'"))return['"'+Ge.substr(1,Ge.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(ot=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ge))return n(Ge.substr(0,ot.index)).concat(n(ot[1])).concat(n(Ge.substr(ot.index+ot[0].length)));if(ot=Ge.split("."),ot.length===1)return['"'+Ge.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ge=[],Je=0;Je<ot.length;++Je)Ge=Ge.concat(n(ot[Je]));return Ge}function l(Ge){return"["+n(Ge).join("][")+"]"}function c(){var Ge={"":0},ot=[""];return{id:function(Je){var st=Ge[Je];return st||(st=Ge[Je]=ot.length,ot.push(Je),st)},str:function(Je){return ot[Je]}}}function t(Ge,ot,Je){function st(){var nr=window.innerWidth,We=window.innerHeight;Ge!==document.body&&(We=Ge.getBoundingClientRect(),nr=We.right-We.left,We=We.bottom-We.top),It.width=Je*nr,It.height=Je*We,ee(It.style,{width:nr+"px",height:We+"px"})}var It=document.createElement("canvas");ee(It.style,{border:0,margin:0,padding:0,top:0,left:0}),Ge.appendChild(It),Ge===document.body&&(It.style.position="absolute",ee(Ge.style,{margin:0,padding:0}));var Ft;return Ge!==document.body&&typeof ResizeObserver=="function"?(Ft=new ResizeObserver(function(){setTimeout(st)}),Ft.observe(Ge)):window.addEventListener("resize",st,!1),st(),{canvas:It,onDestroy:function(){Ft?Ft.disconnect():window.removeEventListener("resize",st),Ge.removeChild(It)}}}function f(Ge,ot){function Je(st){try{return Ge.getContext(st,ot)}catch{return null}}return Je("webgl")||Je("experimental-webgl")||Je("webgl-experimental")}function a(Ge){return typeof Ge=="string"?Ge.split():Ge}function o(Ge){return typeof Ge=="string"?document.querySelector(Ge):Ge}function u(Ge){var ot=Ge||{},Je,st,It,Ft;Ge={};var nr=[],We=[],Fe=typeof window>"u"?1:window.devicePixelRatio,_t=!1,Mt=function(Dt){},wt=function(){};if(typeof ot=="string"?Je=document.querySelector(ot):typeof ot=="object"&&(typeof ot.nodeName=="string"&&typeof ot.appendChild=="function"&&typeof ot.getBoundingClientRect=="function"?Je=ot:typeof ot.drawArrays=="function"||typeof ot.drawElements=="function"?(Ft=ot,It=Ft.canvas):("gl"in ot?Ft=ot.gl:"canvas"in ot?It=o(ot.canvas):"container"in ot&&(st=o(ot.container)),"attributes"in ot&&(Ge=ot.attributes),"extensions"in ot&&(nr=a(ot.extensions)),"optionalExtensions"in ot&&(We=a(ot.optionalExtensions)),"onDone"in ot&&(Mt=ot.onDone),"profile"in ot&&(_t=!!ot.profile),"pixelRatio"in ot&&(Fe=+ot.pixelRatio))),Je&&(Je.nodeName.toLowerCase()==="canvas"?It=Je:st=Je),!Ft){if(!It){if(Je=t(st||document.body,Mt,Fe),!Je)return null;It=Je.canvas,wt=Je.onDestroy}Ge.premultipliedAlpha===void 0&&(Ge.premultipliedAlpha=!0),Ft=f(It,Ge)}return Ft?{gl:Ft,canvas:It,container:st,extensions:nr,optionalExtensions:We,pixelRatio:Fe,profile:_t,onDone:Mt,onDestroy:wt}:(wt(),Mt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function h(Ge,ot){function Je(nr){nr=nr.toLowerCase();var We;try{We=st[nr]=Ge.getExtension(nr)}catch{}return!!We}for(var st={},It=0;It<ot.extensions.length;++It){var Ft=ot.extensions[It];if(!Je(Ft))return ot.onDestroy(),ot.onDone('"'+Ft+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ot.optionalExtensions.forEach(Je),{extensions:st,restore:function(){Object.keys(st).forEach(function(nr){if(st[nr]&&!Je(nr))throw Error("(regl): error restoring extension "+nr)})}}}function i(Ge,ot){for(var Je=Array(Ge),st=0;st<Ge;++st)Je[st]=ot(st);return Je}function s(Ge){var ot,Je;return ot=(65535<Ge)<<4,Ge>>>=ot,Je=(255<Ge)<<3,Ge>>>=Je,ot|=Je,Je=(15<Ge)<<2,Ge>>>=Je,ot|=Je,Je=(3<Ge)<<1,ot|Je|Ge>>>Je>>1}function p(){function Ge(st){e:{for(var It=16;268435456>=It;It*=16)if(st<=It){st=It;break e}st=0}return It=Je[s(st)>>2],0<It.length?It.pop():new ArrayBuffer(st)}function ot(st){Je[s(st.byteLength)>>2].push(st)}var Je=i(8,function(){return[]});return{alloc:Ge,free:ot,allocType:function(st,It){var Ft=null;switch(st){case 5120:Ft=new Int8Array(Ge(It),0,It);break;case 5121:Ft=new Uint8Array(Ge(It),0,It);break;case 5122:Ft=new Int16Array(Ge(2*It),0,It);break;case 5123:Ft=new Uint16Array(Ge(2*It),0,It);break;case 5124:Ft=new Int32Array(Ge(4*It),0,It);break;case 5125:Ft=new Uint32Array(Ge(4*It),0,It);break;case 5126:Ft=new Float32Array(Ge(4*It),0,It);break;default:return null}return Ft.length!==It?Ft.subarray(0,It):Ft},freeType:function(st){ot(st.buffer)}}}function d(Ge){return!!Ge&&typeof Ge=="object"&&Array.isArray(Ge.shape)&&Array.isArray(Ge.stride)&&typeof Ge.offset=="number"&&Ge.shape.length===Ge.stride.length&&(Array.isArray(Ge.data)||me(Ge.data))}function y(Ge,ot,Je,st,It,Ft){for(var nr=0;nr<ot;++nr)for(var We=Ge[nr],Fe=0;Fe<Je;++Fe)for(var _t=We[Fe],Mt=0;Mt<st;++Mt)It[Ft++]=_t[Mt]}function b(Ge,ot,Je,st,It){for(var Ft=1,nr=Je+1;nr<ot.length;++nr)Ft*=ot[nr];var We=ot[Je];if(ot.length-Je===4){var Fe=ot[Je+1],_t=ot[Je+2];for(ot=ot[Je+3],nr=0;nr<We;++nr)y(Ge[nr],Fe,_t,ot,st,It),It+=Ft}else for(nr=0;nr<We;++nr)b(Ge[nr],ot,Je+1,st,It),It+=Ft}function m(Ge){return Pe[Object.prototype.toString.call(Ge)]|0}function _(Ge,ot){for(var Je=0;Je<ot.length;++Je)Ge[Je]=ot[Je]}function T(Ge,ot,Je,st,It,Ft,nr){for(var We=0,Fe=0;Fe<Je;++Fe)for(var _t=0;_t<st;++_t)Ge[We++]=ot[It*Fe+Ft*_t+nr]}function g(Ge,ot,Je,st){function It(wt){this.id=Fe++,this.buffer=Ge.createBuffer(),this.type=wt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Je.profile&&(this.stats={size:0})}function Ft(wt,Dt,Rt){wt.byteLength=Dt.byteLength,Ge.bufferData(wt.type,Dt,Rt)}function nr(wt,Dt,Rt,Bt,Nt,er){if(wt.usage=Rt,Array.isArray(Dt)){if(wt.dtype=Bt||5126,0<Dt.length)if(Array.isArray(Dt[0])){Nt=tt(Dt);for(var qt=Bt=1;qt<Nt.length;++qt)Bt*=Nt[qt];wt.dimension=Bt,Dt=Ze(Dt,Nt,wt.dtype),Ft(wt,Dt,Rt),er?wt.persistentData=Dt:W.freeType(Dt)}else typeof Dt[0]=="number"?(wt.dimension=Nt,Nt=W.allocType(wt.dtype,Dt.length),_(Nt,Dt),Ft(wt,Nt,Rt),er?wt.persistentData=Nt:W.freeType(Nt)):me(Dt[0])&&(wt.dimension=Dt[0].length,wt.dtype=Bt||m(Dt[0])||5126,Dt=Ze(Dt,[Dt.length,Dt[0].length],wt.dtype),Ft(wt,Dt,Rt),er?wt.persistentData=Dt:W.freeType(Dt))}else if(me(Dt))wt.dtype=Bt||m(Dt),wt.dimension=Nt,Ft(wt,Dt,Rt),er&&(wt.persistentData=new Uint8Array(new Uint8Array(Dt.buffer)));else if(d(Dt)){Nt=Dt.shape;var Zt=Dt.stride,qt=Dt.offset,_r=0,Gr=0,zr=0,Or=0;Nt.length===1?(_r=Nt[0],Gr=1,zr=Zt[0],Or=0):Nt.length===2&&(_r=Nt[0],Gr=Nt[1],zr=Zt[0],Or=Zt[1]),wt.dtype=Bt||m(Dt.data)||5126,wt.dimension=Gr,Nt=W.allocType(wt.dtype,_r*Gr),T(Nt,Dt.data,_r,Gr,zr,Or,qt),Ft(wt,Nt,Rt),er?wt.persistentData=Nt:W.freeType(Nt)}else Dt instanceof ArrayBuffer&&(wt.dtype=5121,wt.dimension=Nt,Ft(wt,Dt,Rt),er&&(wt.persistentData=new Uint8Array(new Uint8Array(Dt))))}function We(wt){ot.bufferCount--,st(wt),Ge.deleteBuffer(wt.buffer),wt.buffer=null,delete _t[wt.id]}var Fe=0,_t={};It.prototype.bind=function(){Ge.bindBuffer(this.type,this.buffer)},It.prototype.destroy=function(){We(this)};var Mt=[];return Je.profile&&(ot.getTotalBufferSize=function(){var wt=0;return Object.keys(_t).forEach(function(Dt){wt+=_t[Dt].stats.size}),wt}),{create:function(wt,Dt,Rt,Bt){function Nt(qt){var Zt=35044,_r=null,Gr=0,zr=0,Or=1;return Array.isArray(qt)||me(qt)||d(qt)||qt instanceof ArrayBuffer?_r=qt:typeof qt=="number"?Gr=qt|0:qt&&("data"in qt&&(_r=qt.data),"usage"in qt&&(Zt=ze[qt.usage]),"type"in qt&&(zr=je[qt.type]),"dimension"in qt&&(Or=qt.dimension|0),"length"in qt&&(Gr=qt.length|0)),er.bind(),_r?nr(er,_r,Zt,zr,Or,Bt):(Gr&&Ge.bufferData(er.type,Gr,Zt),er.dtype=zr||5121,er.usage=Zt,er.dimension=Or,er.byteLength=Gr),Je.profile&&(er.stats.size=er.byteLength*Ce[er.dtype]),Nt}ot.bufferCount++;var er=new It(Dt);return _t[er.id]=er,Rt||Nt(wt),Nt._reglType="buffer",Nt._buffer=er,Nt.subdata=function(qt,Zt){var _r=(Zt||0)|0,Gr;if(er.bind(),me(qt)||qt instanceof ArrayBuffer)Ge.bufferSubData(er.type,_r,qt);else if(Array.isArray(qt)){if(0<qt.length)if(typeof qt[0]=="number"){var zr=W.allocType(er.dtype,qt.length);_(zr,qt),Ge.bufferSubData(er.type,_r,zr),W.freeType(zr)}else(Array.isArray(qt[0])||me(qt[0]))&&(Gr=tt(qt),zr=Ze(qt,Gr,er.dtype),Ge.bufferSubData(er.type,_r,zr),W.freeType(zr))}else if(d(qt)){Gr=qt.shape;var Or=qt.stride,Mn=zr=0,Yn=0,An=0;Gr.length===1?(zr=Gr[0],Mn=1,Yn=Or[0],An=0):Gr.length===2&&(zr=Gr[0],Mn=Gr[1],Yn=Or[0],An=Or[1]),Gr=Array.isArray(qt.data)?er.dtype:m(qt.data),Gr=W.allocType(Gr,zr*Mn),T(Gr,qt.data,zr,Mn,Yn,An,qt.offset),Ge.bufferSubData(er.type,_r,Gr),W.freeType(Gr)}return Nt},Je.profile&&(Nt.stats=er.stats),Nt.destroy=function(){We(er)},Nt},createStream:function(wt,Dt){var Rt=Mt.pop();return Rt||(Rt=new It(wt)),Rt.bind(),nr(Rt,Dt,35040,0,1,!1),Rt},destroyStream:function(wt){Mt.push(wt)},clear:function(){be(_t).forEach(We),Mt.forEach(We)},getBuffer:function(wt){return wt&&wt._buffer instanceof It?wt._buffer:null},restore:function(){be(_t).forEach(function(wt){wt.buffer=Ge.createBuffer(),Ge.bindBuffer(wt.type,wt.buffer),Ge.bufferData(wt.type,wt.persistentData||wt.byteLength,wt.usage)})},_initBuffer:nr}}function A(Ge,ot,Je,st){function It(wt){this.id=Fe++,We[this.id]=this,this.buffer=wt,this.primType=4,this.type=this.vertCount=0}function Ft(wt,Dt,Rt,Bt,Nt,er,qt){wt.buffer.bind();var Zt;if(Dt?((Zt=qt)||me(Dt)&&(!d(Dt)||me(Dt.data))||(Zt=ot.oes_element_index_uint?5125:5123),Je._initBuffer(wt.buffer,Dt,Rt,Zt,3)):(Ge.bufferData(34963,er,Rt),wt.buffer.dtype=Zt||5121,wt.buffer.usage=Rt,wt.buffer.dimension=3,wt.buffer.byteLength=er),Zt=qt,!qt){switch(wt.buffer.dtype){case 5121:case 5120:Zt=5121;break;case 5123:case 5122:Zt=5123;break;case 5125:case 5124:Zt=5125}wt.buffer.dtype=Zt}wt.type=Zt,Dt=Nt,0>Dt&&(Dt=wt.buffer.byteLength,Zt===5123?Dt>>=1:Zt===5125&&(Dt>>=2)),wt.vertCount=Dt,Dt=Bt,0>Bt&&(Dt=4,Bt=wt.buffer.dimension,Bt===1&&(Dt=0),Bt===2&&(Dt=1),Bt===3&&(Dt=4)),wt.primType=Dt}function nr(wt){st.elementsCount--,delete We[wt.id],wt.buffer.destroy(),wt.buffer=null}var We={},Fe=0,_t={uint8:5121,uint16:5123};ot.oes_element_index_uint&&(_t.uint32=5125),It.prototype.bind=function(){this.buffer.bind()};var Mt=[];return{create:function(wt,Dt){function Rt(er){if(er)if(typeof er=="number")Bt(er),Nt.primType=4,Nt.vertCount=er|0,Nt.type=5121;else{var qt=null,Zt=35044,_r=-1,Gr=-1,zr=0,Or=0;Array.isArray(er)||me(er)||d(er)?qt=er:("data"in er&&(qt=er.data),"usage"in er&&(Zt=ze[er.usage]),"primitive"in er&&(_r=Ae[er.primitive]),"count"in er&&(Gr=er.count|0),"type"in er&&(Or=_t[er.type]),"length"in er?zr=er.length|0:(zr=Gr,Or===5123||Or===5122?zr*=2:(Or===5125||Or===5124)&&(zr*=4))),Ft(Nt,qt,Zt,_r,Gr,zr,Or)}else Bt(),Nt.primType=4,Nt.vertCount=0,Nt.type=5121;return Rt}var Bt=Je.create(null,34963,!0),Nt=new It(Bt._buffer);return st.elementsCount++,Rt(wt),Rt._reglType="elements",Rt._elements=Nt,Rt.subdata=function(er,qt){return Bt.subdata(er,qt),Rt},Rt.destroy=function(){nr(Nt)},Rt},createStream:function(wt){var Dt=Mt.pop();return Dt||(Dt=new It(Je.create(null,34963,!0,!1)._buffer)),Ft(Dt,wt,35040,-1,-1,0,0),Dt},destroyStream:function(wt){Mt.push(wt)},getElements:function(wt){return typeof wt=="function"&&wt._elements instanceof It?wt._elements:null},clear:function(){be(We).forEach(nr)}}}function k(Ge){for(var ot=W.allocType(5123,Ge.length),Je=0;Je<Ge.length;++Je)if(isNaN(Ge[Je]))ot[Je]=65535;else if(Ge[Je]===1/0)ot[Je]=31744;else if(Ge[Je]===-1/0)ot[Je]=64512;else{Ne[0]=Ge[Je];var Ft=qe[0],st=Ft>>>31<<15,It=(Ft<<1>>>24)-127,Ft=Ft>>13&1023;ot[Je]=-24>It?st:-14>It?st+(Ft+1024>>-14-It):15<It?st+31744:st+(It+15<<10)+Ft}return ot}function R(Ge){return Array.isArray(Ge)||me(Ge)}function L(Ge){return"[object "+Ge+"]"}function z(Ge){return Array.isArray(Ge)&&(Ge.length===0||typeof Ge[0]=="number")}function E(Ge){return!!(Array.isArray(Ge)&&Ge.length!==0&&R(Ge[0]))}function S(Ge){return Object.prototype.toString.call(Ge)}function C(Ge){if(!Ge)return!1;var ot=S(Ge);return 0<=rr.indexOf(ot)?!0:z(Ge)||E(Ge)||d(Ge)}function D(Ge,ot){Ge.type===36193?(Ge.data=k(ot),W.freeType(ot)):Ge.data=ot}function F(Ge,ot,Je,st,It,Ft){if(Ge=typeof Lt[Ge]<"u"?Lt[Ge]:Ve[Ge]*Pt[ot],Ft&&(Ge*=6),It){for(st=0;1<=Je;)st+=Ge*Je*Je,Je/=2;return st}return Ge*Je*st}function N(Ge,ot,Je,st,It,Ft,nr){function We(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Fe(dr,an){dr.internalformat=an.internalformat,dr.format=an.format,dr.type=an.type,dr.compressed=an.compressed,dr.premultiplyAlpha=an.premultiplyAlpha,dr.flipY=an.flipY,dr.unpackAlignment=an.unpackAlignment,dr.colorSpace=an.colorSpace,dr.width=an.width,dr.height=an.height,dr.channels=an.channels}function _t(dr,an){if(typeof an=="object"&&an){"premultiplyAlpha"in an&&(dr.premultiplyAlpha=an.premultiplyAlpha),"flipY"in an&&(dr.flipY=an.flipY),"alignment"in an&&(dr.unpackAlignment=an.alignment),"colorSpace"in an&&(dr.colorSpace=tn[an.colorSpace]),"type"in an&&(dr.type=wn[an.type]);var Kr=dr.width,Rn=dr.height,Gn=dr.channels,Sa=!1;"shape"in an?(Kr=an.shape[0],Rn=an.shape[1],an.shape.length===3&&(Gn=an.shape[2],Sa=!0)):("radius"in an&&(Kr=Rn=an.radius),"width"in an&&(Kr=an.width),"height"in an&&(Rn=an.height),"channels"in an&&(Gn=an.channels,Sa=!0)),dr.width=Kr|0,dr.height=Rn|0,dr.channels=Gn|0,Kr=!1,"format"in an&&(Kr=an.format,Rn=dr.internalformat=Sn[Kr],dr.format=Hr[Rn],Kr in wn&&!("type"in an)&&(dr.type=wn[Kr]),Kr in un&&(dr.compressed=!0),Kr=!0),!Sa&&Kr?dr.channels=Ve[dr.format]:Sa&&!Kr&&dr.channels!==kt[dr.format]&&(dr.format=dr.internalformat=kt[dr.channels])}}function Mt(dr){Ge.pixelStorei(37440,dr.flipY),Ge.pixelStorei(37441,dr.premultiplyAlpha),Ge.pixelStorei(37443,dr.colorSpace),Ge.pixelStorei(3317,dr.unpackAlignment)}function wt(){We.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Dt(dr,an){var Kr=null;if(C(an)?Kr=an:an&&(_t(dr,an),"x"in an&&(dr.xOffset=an.x|0),"y"in an&&(dr.yOffset=an.y|0),C(an.data)&&(Kr=an.data)),an.copy){var Rn=It.viewportWidth,Gn=It.viewportHeight;dr.width=dr.width||Rn-dr.xOffset,dr.height=dr.height||Gn-dr.yOffset,dr.needsCopy=!0}else if(!Kr)dr.width=dr.width||1,dr.height=dr.height||1,dr.channels=dr.channels||4;else if(me(Kr))dr.channels=dr.channels||4,dr.data=Kr,"type"in an||dr.type!==5121||(dr.type=Pe[Object.prototype.toString.call(Kr)]|0);else if(z(Kr)){switch(dr.channels=dr.channels||4,Rn=Kr,Gn=Rn.length,dr.type){case 5121:case 5123:case 5125:case 5126:Gn=W.allocType(dr.type,Gn),Gn.set(Rn),dr.data=Gn;break;case 36193:dr.data=k(Rn)}dr.alignment=1,dr.needsFree=!0}else if(d(Kr)){Rn=Kr.data,Array.isArray(Rn)||dr.type!==5121||(dr.type=Pe[Object.prototype.toString.call(Rn)]|0);var Gn=Kr.shape,Sa=Kr.stride,ha,Aa,ka,Za;Gn.length===3?(ka=Gn[2],Za=Sa[2]):Za=ka=1,ha=Gn[0],Aa=Gn[1],Gn=Sa[0],Sa=Sa[1],dr.alignment=1,dr.width=ha,dr.height=Aa,dr.channels=ka,dr.format=dr.internalformat=kt[ka],dr.needsFree=!0,ha=Za,Kr=Kr.offset,ka=dr.width,Za=dr.height,Aa=dr.channels;for(var Xt=W.allocType(dr.type===36193?5126:dr.type,ka*Za*Aa),xr=0,Yr=0;Yr<Za;++Yr)for(var cn=0;cn<ka;++cn)for(var en=0;en<Aa;++en)Xt[xr++]=Rn[Gn*cn+Sa*Yr+ha*en+Kr];D(dr,Xt)}else if(S(Kr)===ft||S(Kr)===St||S(Kr)===Wt)S(Kr)===ft||S(Kr)===St?dr.element=Kr:dr.element=Kr.canvas,dr.width=dr.element.width,dr.height=dr.element.height,dr.channels=4;else if(S(Kr)===Qt)dr.element=Kr,dr.width=Kr.width,dr.height=Kr.height,dr.channels=4;else if(S(Kr)===zt)dr.element=Kr,dr.width=Kr.naturalWidth,dr.height=Kr.naturalHeight,dr.channels=4;else if(S(Kr)===$t)dr.element=Kr,dr.width=Kr.videoWidth,dr.height=Kr.videoHeight,dr.channels=4;else if(E(Kr)){for(Rn=dr.width||Kr[0].length,Gn=dr.height||Kr.length,Sa=dr.channels,Sa=R(Kr[0][0])?Sa||Kr[0][0].length:Sa||1,ha=ke.shape(Kr),ka=1,Za=0;Za<ha.length;++Za)ka*=ha[Za];ka=W.allocType(dr.type===36193?5126:dr.type,ka),ke.flatten(Kr,ha,"",ka),D(dr,ka),dr.alignment=1,dr.width=Rn,dr.height=Gn,dr.channels=Sa,dr.format=dr.internalformat=kt[Sa],dr.needsFree=!0}}function Rt(dr,an,Kr,Rn,Gn){var Sa=dr.element,ha=dr.data,Aa=dr.internalformat,ka=dr.format,Za=dr.type,Xt=dr.width,xr=dr.height;Mt(dr),Sa?Ge.texSubImage2D(an,Gn,Kr,Rn,ka,Za,Sa):dr.compressed?Ge.compressedTexSubImage2D(an,Gn,Kr,Rn,Aa,Xt,xr,ha):dr.needsCopy?(st(),Ge.copyTexSubImage2D(an,Gn,Kr,Rn,dr.xOffset,dr.yOffset,Xt,xr)):Ge.texSubImage2D(an,Gn,Kr,Rn,Xt,xr,ka,Za,ha)}function Bt(){return Cn.pop()||new wt}function Nt(dr){dr.needsFree&&W.freeType(dr.data),wt.call(dr),Cn.push(dr)}function er(){We.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function qt(dr,an,Kr){var Rn=dr.images[0]=Bt();dr.mipmask=1,Rn.width=dr.width=an,Rn.height=dr.height=Kr,Rn.channels=dr.channels=4}function Zt(dr,an){var Kr=null;if(C(an))Kr=dr.images[0]=Bt(),Fe(Kr,dr),Dt(Kr,an),dr.mipmask=1;else if(_t(dr,an),Array.isArray(an.mipmap))for(var Rn=an.mipmap,Gn=0;Gn<Rn.length;++Gn)Kr=dr.images[Gn]=Bt(),Fe(Kr,dr),Kr.width>>=Gn,Kr.height>>=Gn,Dt(Kr,Rn[Gn]),dr.mipmask|=1<<Gn;else Kr=dr.images[0]=Bt(),Fe(Kr,dr),Dt(Kr,an),dr.mipmask=1;Fe(dr,dr.images[0])}function _r(dr,an){for(var Kr=dr.images,Rn=0;Rn<Kr.length&&Kr[Rn];++Rn){var Gn=Kr[Rn],Sa=an,ha=Rn,Aa=Gn.element,ka=Gn.data,Za=Gn.internalformat,Xt=Gn.format,xr=Gn.type,Yr=Gn.width,cn=Gn.height;Mt(Gn),Aa?Ge.texImage2D(Sa,ha,Xt,Xt,xr,Aa):Gn.compressed?Ge.compressedTexImage2D(Sa,ha,Za,Yr,cn,0,ka):Gn.needsCopy?(st(),Ge.copyTexImage2D(Sa,ha,Xt,Gn.xOffset,Gn.yOffset,Yr,cn,0)):Ge.texImage2D(Sa,ha,Xt,Yr,cn,0,Xt,xr,ka||null)}}function Gr(){var dr=ra.pop()||new er;We.call(dr);for(var an=dr.mipmask=0;16>an;++an)dr.images[an]=null;return dr}function zr(dr){for(var an=dr.images,Kr=0;Kr<an.length;++Kr)an[Kr]&&Nt(an[Kr]),an[Kr]=null;ra.push(dr)}function Or(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Mn(dr,an){"min"in an&&(dr.minFilter=xn[an.min],0<=At.indexOf(dr.minFilter)&&!("faces"in an)&&(dr.genMipmaps=!0)),"mag"in an&&(dr.magFilter=dn[an.mag]);var Kr=dr.wrapS,Rn=dr.wrapT;if("wrap"in an){var Gn=an.wrap;typeof Gn=="string"?Kr=Rn=Ln[Gn]:Array.isArray(Gn)&&(Kr=Ln[Gn[0]],Rn=Ln[Gn[1]])}else"wrapS"in an&&(Kr=Ln[an.wrapS]),"wrapT"in an&&(Rn=Ln[an.wrapT]);if(dr.wrapS=Kr,dr.wrapT=Rn,"anisotropic"in an&&(dr.anisotropic=an.anisotropic),"mipmap"in an){switch(Kr=!1,typeof an.mipmap){case"string":dr.mipmapHint=Lr[an.mipmap],Kr=dr.genMipmaps=!0;break;case"boolean":Kr=dr.genMipmaps=an.mipmap;break;case"object":dr.genMipmaps=!1,Kr=!0}!Kr||"min"in an||(dr.minFilter=9984)}}function Yn(dr,an){Ge.texParameteri(an,10241,dr.minFilter),Ge.texParameteri(an,10240,dr.magFilter),Ge.texParameteri(an,10242,dr.wrapS),Ge.texParameteri(an,10243,dr.wrapT),ot.ext_texture_filter_anisotropic&&Ge.texParameteri(an,34046,dr.anisotropic),dr.genMipmaps&&(Ge.hint(33170,dr.mipmapHint),Ge.generateMipmap(an))}function An(dr){We.call(this),this.mipmask=0,this.internalformat=6408,this.id=ta++,this.refCount=1,this.target=dr,this.texture=Ge.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Or,nr.profile&&(this.stats={size:0})}function Bn(dr){Ge.activeTexture(33984),Ge.bindTexture(dr.target,dr.texture)}function jn(){var dr=ei[0];dr?Ge.bindTexture(dr.target,dr.texture):Ge.bindTexture(3553,null)}function Nr(dr){var an=dr.texture,Kr=dr.unit,Rn=dr.target;0<=Kr&&(Ge.activeTexture(33984+Kr),Ge.bindTexture(Rn,null),ei[Kr]=null),Ge.deleteTexture(an),dr.texture=null,dr.params=null,dr.pixels=null,dr.refCount=0,delete ba[dr.id],Ft.textureCount--}var Lr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ln={repeat:10497,clamp:33071,mirror:33648},dn={nearest:9728,linear:9729},xn=ee({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},dn),tn={none:0,browser:37444},wn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Sn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},un={};ot.ext_srgb&&(Sn.srgb=35904,Sn.srgba=35906),ot.oes_texture_float&&(wn.float32=wn.float=5126),ot.oes_texture_half_float&&(wn.float16=wn["half float"]=36193),ot.webgl_depth_texture&&(ee(Sn,{depth:6402,"depth stencil":34041}),ee(wn,{uint16:5123,uint32:5125,"depth stencil":34042})),ot.webgl_compressed_texture_s3tc&&ee(un,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),ot.webgl_compressed_texture_atc&&ee(un,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),ot.webgl_compressed_texture_pvrtc&&ee(un,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),ot.webgl_compressed_texture_etc1&&(un["rgb etc1"]=36196);var vt=Array.prototype.slice.call(Ge.getParameter(34467));Object.keys(un).forEach(function(dr){var an=un[dr];0<=vt.indexOf(an)&&(Sn[dr]=an)});var Gt=Object.keys(Sn);Je.textureFormats=Gt;var cr=[];Object.keys(Sn).forEach(function(dr){cr[Sn[dr]]=dr});var Er=[];Object.keys(wn).forEach(function(dr){Er[wn[dr]]=dr});var Wr=[];Object.keys(dn).forEach(function(dr){Wr[dn[dr]]=dr});var Vr=[];Object.keys(xn).forEach(function(dr){Vr[xn[dr]]=dr});var Qr=[];Object.keys(Ln).forEach(function(dr){Qr[Ln[dr]]=dr});var Hr=Gt.reduce(function(dr,an){var Kr=Sn[an];return Kr===6409||Kr===6406||Kr===6409||Kr===6410||Kr===6402||Kr===34041||ot.ext_srgb&&(Kr===35904||Kr===35906)?dr[Kr]=Kr:Kr===32855||0<=an.indexOf("rgba")?dr[Kr]=6408:dr[Kr]=6407,dr},{}),Cn=[],ra=[],ta=0,ba={},Wa=Je.maxTextureUnits,ei=Array(Wa).map(function(){return null});return ee(An.prototype,{bind:function(){this.bindCount+=1;var dr=this.unit;if(0>dr){for(var an=0;an<Wa;++an){var Kr=ei[an];if(Kr){if(0<Kr.bindCount)continue;Kr.unit=-1}ei[an]=this,dr=an;break}nr.profile&&Ft.maxTextureUnits<dr+1&&(Ft.maxTextureUnits=dr+1),this.unit=dr,Ge.activeTexture(33984+dr),Ge.bindTexture(this.target,this.texture)}return dr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Nr(this)}}),nr.profile&&(Ft.getTotalTextureSize=function(){var dr=0;return Object.keys(ba).forEach(function(an){dr+=ba[an].stats.size}),dr}),{create2D:function(dr,an){function Kr(Gn,Sa){var ha=Rn.texInfo;Or.call(ha);var Aa=Gr();return typeof Gn=="number"?typeof Sa=="number"?qt(Aa,Gn|0,Sa|0):qt(Aa,Gn|0,Gn|0):Gn?(Mn(ha,Gn),Zt(Aa,Gn)):qt(Aa,1,1),ha.genMipmaps&&(Aa.mipmask=(Aa.width<<1)-1),Rn.mipmask=Aa.mipmask,Fe(Rn,Aa),Rn.internalformat=Aa.internalformat,Kr.width=Aa.width,Kr.height=Aa.height,Bn(Rn),_r(Aa,3553),Yn(ha,3553),jn(),zr(Aa),nr.profile&&(Rn.stats.size=F(Rn.internalformat,Rn.type,Aa.width,Aa.height,ha.genMipmaps,!1)),Kr.format=cr[Rn.internalformat],Kr.type=Er[Rn.type],Kr.mag=Wr[ha.magFilter],Kr.min=Vr[ha.minFilter],Kr.wrapS=Qr[ha.wrapS],Kr.wrapT=Qr[ha.wrapT],Kr}var Rn=new An(3553);return ba[Rn.id]=Rn,Ft.textureCount++,Kr(dr,an),Kr.subimage=function(Gn,Sa,ha,Aa){Sa|=0,ha|=0,Aa|=0;var ka=Bt();return Fe(ka,Rn),ka.width=0,ka.height=0,Dt(ka,Gn),ka.width=ka.width||(Rn.width>>Aa)-Sa,ka.height=ka.height||(Rn.height>>Aa)-ha,Bn(Rn),Rt(ka,3553,Sa,ha,Aa),jn(),Nt(ka),Kr},Kr.resize=function(Gn,Sa){var ha=Gn|0,Aa=Sa|0||ha;if(ha===Rn.width&&Aa===Rn.height)return Kr;Kr.width=Rn.width=ha,Kr.height=Rn.height=Aa,Bn(Rn);for(var ka=0;Rn.mipmask>>ka;++ka){var Za=ha>>ka,Xt=Aa>>ka;if(!Za||!Xt)break;Ge.texImage2D(3553,ka,Rn.format,Za,Xt,0,Rn.format,Rn.type,null)}return jn(),nr.profile&&(Rn.stats.size=F(Rn.internalformat,Rn.type,ha,Aa,!1,!1)),Kr},Kr._reglType="texture2d",Kr._texture=Rn,nr.profile&&(Kr.stats=Rn.stats),Kr.destroy=function(){Rn.decRef()},Kr},createCube:function(dr,an,Kr,Rn,Gn,Sa){function ha(Za,Xt,xr,Yr,cn,en){var nn,pn=Aa.texInfo;for(Or.call(pn),nn=0;6>nn;++nn)ka[nn]=Gr();if(typeof Za=="number"||!Za)for(Za=Za|0||1,nn=0;6>nn;++nn)qt(ka[nn],Za,Za);else if(typeof Za=="object")if(Xt)Zt(ka[0],Za),Zt(ka[1],Xt),Zt(ka[2],xr),Zt(ka[3],Yr),Zt(ka[4],cn),Zt(ka[5],en);else if(Mn(pn,Za),_t(Aa,Za),"faces"in Za)for(Za=Za.faces,nn=0;6>nn;++nn)Fe(ka[nn],Aa),Zt(ka[nn],Za[nn]);else for(nn=0;6>nn;++nn)Zt(ka[nn],Za);for(Fe(Aa,ka[0]),Aa.mipmask=pn.genMipmaps?(ka[0].width<<1)-1:ka[0].mipmask,Aa.internalformat=ka[0].internalformat,ha.width=ka[0].width,ha.height=ka[0].height,Bn(Aa),nn=0;6>nn;++nn)_r(ka[nn],34069+nn);for(Yn(pn,34067),jn(),nr.profile&&(Aa.stats.size=F(Aa.internalformat,Aa.type,ha.width,ha.height,pn.genMipmaps,!0)),ha.format=cr[Aa.internalformat],ha.type=Er[Aa.type],ha.mag=Wr[pn.magFilter],ha.min=Vr[pn.minFilter],ha.wrapS=Qr[pn.wrapS],ha.wrapT=Qr[pn.wrapT],nn=0;6>nn;++nn)zr(ka[nn]);return ha}var Aa=new An(34067);ba[Aa.id]=Aa,Ft.cubeCount++;var ka=Array(6);return ha(dr,an,Kr,Rn,Gn,Sa),ha.subimage=function(Za,Xt,xr,Yr,cn){xr|=0,Yr|=0,cn|=0;var en=Bt();return Fe(en,Aa),en.width=0,en.height=0,Dt(en,Xt),en.width=en.width||(Aa.width>>cn)-xr,en.height=en.height||(Aa.height>>cn)-Yr,Bn(Aa),Rt(en,34069+Za,xr,Yr,cn),jn(),Nt(en),ha},ha.resize=function(Za){if(Za|=0,Za!==Aa.width){ha.width=Aa.width=Za,ha.height=Aa.height=Za,Bn(Aa);for(var Xt=0;6>Xt;++Xt)for(var xr=0;Aa.mipmask>>xr;++xr)Ge.texImage2D(34069+Xt,xr,Aa.format,Za>>xr,Za>>xr,0,Aa.format,Aa.type,null);return jn(),nr.profile&&(Aa.stats.size=F(Aa.internalformat,Aa.type,ha.width,ha.height,!1,!0)),ha}},ha._reglType="textureCube",ha._texture=Aa,nr.profile&&(ha.stats=Aa.stats),ha.destroy=function(){Aa.decRef()},ha},clear:function(){for(var dr=0;dr<Wa;++dr)Ge.activeTexture(33984+dr),Ge.bindTexture(3553,null),ei[dr]=null;be(ba).forEach(Nr),Ft.cubeCount=0,Ft.textureCount=0},getTexture:function(dr){return null},restore:function(){for(var dr=0;dr<Wa;++dr){var an=ei[dr];an&&(an.bindCount=0,an.unit=-1,ei[dr]=null)}be(ba).forEach(function(Kr){Kr.texture=Ge.createTexture(),Ge.bindTexture(Kr.target,Kr.texture);for(var Rn=0;32>Rn;++Rn)if(Kr.mipmask&1<<Rn)if(Kr.target===3553)Ge.texImage2D(3553,Rn,Kr.internalformat,Kr.width>>Rn,Kr.height>>Rn,0,Kr.internalformat,Kr.type,null);else for(var Gn=0;6>Gn;++Gn)Ge.texImage2D(34069+Gn,Rn,Kr.internalformat,Kr.width>>Rn,Kr.height>>Rn,0,Kr.internalformat,Kr.type,null);Yn(Kr.texInfo,Kr.target)})}}}function G(Ge,ot,Je,st,It,Ft){function nr(An,Bn,jn){this.target=An,this.texture=Bn,this.renderbuffer=jn;var Nr=An=0;Bn?(An=Bn.width,Nr=Bn.height):jn&&(An=jn.width,Nr=jn.height),this.width=An,this.height=Nr}function We(An){An&&(An.texture&&An.texture._texture.decRef(),An.renderbuffer&&An.renderbuffer._renderbuffer.decRef())}function Fe(An,Bn,jn){An&&(An.texture?An.texture._texture.refCount+=1:An.renderbuffer._renderbuffer.refCount+=1)}function _t(An,Bn){Bn&&(Bn.texture?Ge.framebufferTexture2D(36160,An,Bn.target,Bn.texture._texture.texture,0):Ge.framebufferRenderbuffer(36160,An,36161,Bn.renderbuffer._renderbuffer.renderbuffer))}function Mt(An){var Bn=3553,jn=null,Nr=null,Lr=An;return typeof An=="object"&&(Lr=An.data,"target"in An&&(Bn=An.target|0)),An=Lr._reglType,An==="texture2d"||An==="textureCube"?jn=Lr:An==="renderbuffer"&&(Nr=Lr,Bn=36161),new nr(Bn,jn,Nr)}function wt(An,Bn,jn,Nr,Lr){return jn?(An=st.create2D({width:An,height:Bn,format:Nr,type:Lr}),An._texture.refCount=0,new nr(3553,An,null)):(An=It.create({width:An,height:Bn,format:Nr}),An._renderbuffer.refCount=0,new nr(36161,null,An))}function Dt(An){return An&&(An.texture||An.renderbuffer)}function Rt(An,Bn,jn){An&&(An.texture?An.texture.resize(Bn,jn):An.renderbuffer&&An.renderbuffer.resize(Bn,jn),An.width=Bn,An.height=jn)}function Bt(){this.id=Mn++,Yn[this.id]=this,this.framebuffer=Ge.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Nt(An){An.colorAttachments.forEach(We),We(An.depthAttachment),We(An.stencilAttachment),We(An.depthStencilAttachment)}function er(An){Ge.deleteFramebuffer(An.framebuffer),An.framebuffer=null,Ft.framebufferCount--,delete Yn[An.id]}function qt(An){var Bn;Ge.bindFramebuffer(36160,An.framebuffer);var jn=An.colorAttachments;for(Bn=0;Bn<jn.length;++Bn)_t(36064+Bn,jn[Bn]);for(Bn=jn.length;Bn<Je.maxColorAttachments;++Bn)Ge.framebufferTexture2D(36160,36064+Bn,3553,null,0);Ge.framebufferTexture2D(36160,33306,3553,null,0),Ge.framebufferTexture2D(36160,36096,3553,null,0),Ge.framebufferTexture2D(36160,36128,3553,null,0),_t(36096,An.depthAttachment),_t(36128,An.stencilAttachment),_t(33306,An.depthStencilAttachment),Ge.checkFramebufferStatus(36160),Ge.isContextLost(),Ge.bindFramebuffer(36160,_r.next?_r.next.framebuffer:null),_r.cur=_r.next,Ge.getError()}function Zt(An,Bn){function jn(Lr,Ln){var dn,xn=0,tn=0,wn=!0,Sn=!0;dn=null;var un=!0,vt="rgba",Gt="uint8",cr=1,Er=null,Wr=null,Vr=null,Qr=!1;typeof Lr=="number"?(xn=Lr|0,tn=Ln|0||xn):Lr?("shape"in Lr?(tn=Lr.shape,xn=tn[0],tn=tn[1]):("radius"in Lr&&(xn=tn=Lr.radius),"width"in Lr&&(xn=Lr.width),"height"in Lr&&(tn=Lr.height)),("color"in Lr||"colors"in Lr)&&(dn=Lr.color||Lr.colors),dn||("colorCount"in Lr&&(cr=Lr.colorCount|0),"colorTexture"in Lr&&(un=!!Lr.colorTexture,vt="rgba4"),"colorType"in Lr&&(Gt=Lr.colorType,!un)&&(Gt==="half float"||Gt==="float16"?vt="rgba16f":(Gt==="float"||Gt==="float32")&&(vt="rgba32f")),"colorFormat"in Lr&&(vt=Lr.colorFormat,0<=Gr.indexOf(vt)?un=!0:0<=zr.indexOf(vt)&&(un=!1))),("depthTexture"in Lr||"depthStencilTexture"in Lr)&&(Qr=!(!Lr.depthTexture&&!Lr.depthStencilTexture)),"depth"in Lr&&(typeof Lr.depth=="boolean"?wn=Lr.depth:(Er=Lr.depth,Sn=!1)),"stencil"in Lr&&(typeof Lr.stencil=="boolean"?Sn=Lr.stencil:(Wr=Lr.stencil,wn=!1)),"depthStencil"in Lr&&(typeof Lr.depthStencil=="boolean"?wn=Sn=Lr.depthStencil:(Vr=Lr.depthStencil,Sn=wn=!1))):xn=tn=1;var Hr=null,Cn=null,ra=null,ta=null;if(Array.isArray(dn))Hr=dn.map(Mt);else if(dn)Hr=[Mt(dn)];else for(Hr=Array(cr),dn=0;dn<cr;++dn)Hr[dn]=wt(xn,tn,un,vt,Gt);for(xn=xn||Hr[0].width,tn=tn||Hr[0].height,Er?Cn=Mt(Er):wn&&!Sn&&(Cn=wt(xn,tn,Qr,"depth","uint32")),Wr?ra=Mt(Wr):Sn&&!wn&&(ra=wt(xn,tn,!1,"stencil","uint8")),Vr?ta=Mt(Vr):!Er&&!Wr&&Sn&&wn&&(ta=wt(xn,tn,Qr,"depth stencil","depth stencil")),wn=null,dn=0;dn<Hr.length;++dn)Fe(Hr[dn]),Hr[dn]&&Hr[dn].texture&&(Sn=Te[Hr[dn].texture._texture.format]*Le[Hr[dn].texture._texture.type],wn===null&&(wn=Sn));return Fe(Cn),Fe(ra),Fe(ta),Nt(Nr),Nr.width=xn,Nr.height=tn,Nr.colorAttachments=Hr,Nr.depthAttachment=Cn,Nr.stencilAttachment=ra,Nr.depthStencilAttachment=ta,jn.color=Hr.map(Dt),jn.depth=Dt(Cn),jn.stencil=Dt(ra),jn.depthStencil=Dt(ta),jn.width=Nr.width,jn.height=Nr.height,qt(Nr),jn}var Nr=new Bt;return Ft.framebufferCount++,jn(An,Bn),ee(jn,{resize:function(Lr,Ln){var dn=Math.max(Lr|0,1),xn=Math.max(Ln|0||dn,1);if(dn===Nr.width&&xn===Nr.height)return jn;for(var tn=Nr.colorAttachments,wn=0;wn<tn.length;++wn)Rt(tn[wn],dn,xn);return Rt(Nr.depthAttachment,dn,xn),Rt(Nr.stencilAttachment,dn,xn),Rt(Nr.depthStencilAttachment,dn,xn),Nr.width=jn.width=dn,Nr.height=jn.height=xn,qt(Nr),jn},_reglType:"framebuffer",_framebuffer:Nr,destroy:function(){er(Nr),Nt(Nr)},use:function(Lr){_r.setFBO({framebuffer:jn},Lr)}})}var _r={cur:null,next:null,dirty:!1,setFBO:null},Gr=["rgba"],zr=["rgba4","rgb565","rgb5 a1"];ot.ext_srgb&&zr.push("srgba"),ot.ext_color_buffer_half_float&&zr.push("rgba16f","rgb16f"),ot.webgl_color_buffer_float&&zr.push("rgba32f");var Or=["uint8"];ot.oes_texture_half_float&&Or.push("half float","float16"),ot.oes_texture_float&&Or.push("float","float32");var Mn=0,Yn={};return ee(_r,{getFramebuffer:function(An){return typeof An=="function"&&An._reglType==="framebuffer"&&(An=An._framebuffer,An instanceof Bt)?An:null},create:Zt,createCube:function(An){function Bn(Nr){var Lr,Ln={color:null},dn=0,xn=null;Lr="rgba";var tn="uint8",wn=1;if(typeof Nr=="number"?dn=Nr|0:Nr?("shape"in Nr?dn=Nr.shape[0]:("radius"in Nr&&(dn=Nr.radius|0),"width"in Nr?dn=Nr.width|0:"height"in Nr&&(dn=Nr.height|0)),("color"in Nr||"colors"in Nr)&&(xn=Nr.color||Nr.colors),xn||("colorCount"in Nr&&(wn=Nr.colorCount|0),"colorType"in Nr&&(tn=Nr.colorType),"colorFormat"in Nr&&(Lr=Nr.colorFormat)),"depth"in Nr&&(Ln.depth=Nr.depth),"stencil"in Nr&&(Ln.stencil=Nr.stencil),"depthStencil"in Nr&&(Ln.depthStencil=Nr.depthStencil)):dn=1,xn)if(Array.isArray(xn))for(Nr=[],Lr=0;Lr<xn.length;++Lr)Nr[Lr]=xn[Lr];else Nr=[xn];else for(Nr=Array(wn),xn={radius:dn,format:Lr,type:tn},Lr=0;Lr<wn;++Lr)Nr[Lr]=st.createCube(xn);for(Ln.color=Array(Nr.length),Lr=0;Lr<Nr.length;++Lr)wn=Nr[Lr],dn=dn||wn.width,Ln.color[Lr]={target:34069,data:Nr[Lr]};for(Lr=0;6>Lr;++Lr){for(wn=0;wn<Nr.length;++wn)Ln.color[wn].target=34069+Lr;0<Lr&&(Ln.depth=jn[0].depth,Ln.stencil=jn[0].stencil,Ln.depthStencil=jn[0].depthStencil),jn[Lr]?jn[Lr](Ln):jn[Lr]=Zt(Ln)}return ee(Bn,{width:dn,height:dn,color:Nr})}var jn=Array(6);return Bn(An),ee(Bn,{faces:jn,resize:function(Nr){var Lr=Nr|0;if(Lr===Bn.width)return Bn;var Ln=Bn.color;for(Nr=0;Nr<Ln.length;++Nr)Ln[Nr].resize(Lr);for(Nr=0;6>Nr;++Nr)jn[Nr].resize(Lr);return Bn.width=Bn.height=Lr,Bn},_reglType:"framebufferCube",destroy:function(){jn.forEach(function(Nr){Nr.destroy()})}})},clear:function(){be(Yn).forEach(er)},restore:function(){_r.cur=null,_r.next=null,_r.dirty=!0,be(Yn).forEach(function(An){An.framebuffer=Ge.createFramebuffer(),qt(An)})}})}function U(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function X(Ge,ot,Je,st,It){function Ft(Nt){if(Nt!==Bt.currentVAO){var er=ot.oes_vertex_array_object;Nt?er.bindVertexArrayOES(Nt.vao):er.bindVertexArrayOES(null),Bt.currentVAO=Nt}}function nr(Nt){if(Nt!==Bt.currentVAO){if(Nt)Nt.bindAttrs();else for(var er=ot.angle_instanced_arrays,qt=0;qt<wt.length;++qt){var Zt=wt[qt];Zt.buffer?(Ge.enableVertexAttribArray(qt),Ge.vertexAttribPointer(qt,Zt.size,Zt.type,Zt.normalized,Zt.stride,Zt.offfset),er&&er.vertexAttribDivisorANGLE(qt,Zt.divisor)):(Ge.disableVertexAttribArray(qt),Ge.vertexAttrib4f(qt,Zt.x,Zt.y,Zt.z,Zt.w))}Bt.currentVAO=Nt}}function We(){be(Rt).forEach(function(Nt){Nt.destroy()})}function Fe(){this.id=++Dt,this.attributes=[];var Nt=ot.oes_vertex_array_object;this.vao=Nt?Nt.createVertexArrayOES():null,Rt[this.id]=this,this.buffers=[]}function _t(){ot.oes_vertex_array_object&&be(Rt).forEach(function(Nt){Nt.refresh()})}var Mt=Je.maxAttributes,wt=Array(Mt);for(Je=0;Je<Mt;++Je)wt[Je]=new U;var Dt=0,Rt={},Bt={Record:U,scope:{},state:wt,currentVAO:null,targetVAO:null,restore:ot.oes_vertex_array_object?_t:function(){},createVAO:function(Nt){function er(Zt){for(var _r=0;_r<qt.buffers.length;++_r)qt.buffers[_r].destroy();qt.buffers.length=0,_r=qt.attributes,_r.length=Zt.length;for(var Gr=0;Gr<Zt.length;++Gr){var zr=Zt[Gr],Or=_r[Gr]=new U;Array.isArray(zr)||me(zr)||d(zr)?(zr=It.create(zr,34962,!1,!0),Or.buffer=It.getBuffer(zr),Or.size=Or.buffer.dimension|0,Or.normalized=!1,Or.type=Or.buffer.dtype,Or.offset=0,Or.stride=0,Or.divisor=0,Or.state=1,qt.buffers.push(zr)):It.getBuffer(zr)?(Or.buffer=It.getBuffer(zr),Or.size=Or.buffer.dimension|0,Or.normalized=!1,Or.type=Or.buffer.dtype,Or.offset=0,Or.stride=0,Or.divisor=0,Or.state=1):It.getBuffer(zr.buffer)?(Or.buffer=It.getBuffer(zr.buffer),Or.size=(+zr.size||Or.buffer.dimension)|0,Or.normalized=!!zr.normalized||!1,Or.type="type"in zr?je[zr.type]:Or.buffer.dtype,Or.offset=(zr.offset||0)|0,Or.stride=(zr.stride||0)|0,Or.divisor=(zr.divisor||0)|0,Or.state=1):"x"in zr&&(Or.x=+zr.x||0,Or.y=+zr.y||0,Or.z=+zr.z||0,Or.w=+zr.w||0,Or.state=2)}return qt.refresh(),er}var qt=new Fe;return st.vaoCount+=1,er.destroy=function(){qt.destroy()},er._vao=qt,er._reglType="vao",er(Nt)},getVAO:function(Nt){return typeof Nt=="function"&&Nt._vao?Nt._vao:null},destroyBuffer:function(Nt){for(var er=0;er<wt.length;++er){var qt=wt[er];qt.buffer===Nt&&(Ge.disableVertexAttribArray(er),qt.buffer=null)}},setVAO:ot.oes_vertex_array_object?Ft:nr,clear:ot.oes_vertex_array_object?We:function(){}};return Fe.prototype.bindAttrs=function(){for(var Nt=ot.angle_instanced_arrays,er=this.attributes,qt=0;qt<er.length;++qt){var Zt=er[qt];Zt.buffer?(Ge.enableVertexAttribArray(qt),Ge.bindBuffer(34962,Zt.buffer.buffer),Ge.vertexAttribPointer(qt,Zt.size,Zt.type,Zt.normalized,Zt.stride,Zt.offset),Nt&&Nt.vertexAttribDivisorANGLE(qt,Zt.divisor)):(Ge.disableVertexAttribArray(qt),Ge.vertexAttrib4f(qt,Zt.x,Zt.y,Zt.z,Zt.w))}for(Nt=er.length;Nt<Mt;++Nt)Ge.disableVertexAttribArray(Nt)},Fe.prototype.refresh=function(){var Nt=ot.oes_vertex_array_object;Nt&&(Nt.bindVertexArrayOES(this.vao),this.bindAttrs(),Bt.currentVAO=this)},Fe.prototype.destroy=function(){if(this.vao){var Nt=ot.oes_vertex_array_object;this===Bt.currentVAO&&(Bt.currentVAO=null,Nt.bindVertexArrayOES(null)),Nt.deleteVertexArrayOES(this.vao),this.vao=null}Rt[this.id]&&(delete Rt[this.id],--st.vaoCount)},Bt}function I(Ge,ot,Je,st){function It(Bt,Nt,er,qt){this.name=Bt,this.id=Nt,this.location=er,this.info=qt}function Ft(Bt,Nt){for(var er=0;er<Bt.length;++er)if(Bt[er].id===Nt.id){Bt[er].location=Nt.location;return}Bt.push(Nt)}function nr(Bt,Nt,er){er=Bt===35632?_t:Mt;var qt=er[Nt];if(!qt){var Zt=ot.str(Nt),qt=Ge.createShader(Bt);Ge.shaderSource(qt,Zt),Ge.compileShader(qt),er[Nt]=qt}return qt}function We(Bt,Nt){this.id=Rt++,this.fragId=Bt,this.vertId=Nt,this.program=null,this.uniforms=[],this.attributes=[],st.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Fe(Bt,Nt,er){var qt;qt=nr(35632,Bt.fragId);var Zt=nr(35633,Bt.vertId);if(Nt=Bt.program=Ge.createProgram(),Ge.attachShader(Nt,qt),Ge.attachShader(Nt,Zt),er)for(qt=0;qt<er.length;++qt)Zt=er[qt],Ge.bindAttribLocation(Nt,Zt[0],Zt[1]);Ge.linkProgram(Nt),Zt=Ge.getProgramParameter(Nt,35718),st.profile&&(Bt.stats.uniformsCount=Zt);var _r=Bt.uniforms;for(qt=0;qt<Zt;++qt)if(er=Ge.getActiveUniform(Nt,qt))if(1<er.size)for(var Gr=0;Gr<er.size;++Gr){var zr=er.name.replace("[0]","["+Gr+"]");Ft(_r,new It(zr,ot.id(zr),Ge.getUniformLocation(Nt,zr),er))}else Ft(_r,new It(er.name,ot.id(er.name),Ge.getUniformLocation(Nt,er.name),er));for(Zt=Ge.getProgramParameter(Nt,35721),st.profile&&(Bt.stats.attributesCount=Zt),Bt=Bt.attributes,qt=0;qt<Zt;++qt)(er=Ge.getActiveAttrib(Nt,qt))&&Ft(Bt,new It(er.name,ot.id(er.name),Ge.getAttribLocation(Nt,er.name),er))}var _t={},Mt={},wt={},Dt=[],Rt=0;return st.profile&&(Je.getMaxUniformsCount=function(){var Bt=0;return Dt.forEach(function(Nt){Nt.stats.uniformsCount>Bt&&(Bt=Nt.stats.uniformsCount)}),Bt},Je.getMaxAttributesCount=function(){var Bt=0;return Dt.forEach(function(Nt){Nt.stats.attributesCount>Bt&&(Bt=Nt.stats.attributesCount)}),Bt}),{clear:function(){var Bt=Ge.deleteShader.bind(Ge);be(_t).forEach(Bt),_t={},be(Mt).forEach(Bt),Mt={},Dt.forEach(function(Nt){Ge.deleteProgram(Nt.program)}),Dt.length=0,wt={},Je.shaderCount=0},program:function(Bt,Nt,er,qt){var Zt=wt[Nt];Zt||(Zt=wt[Nt]={});var _r=Zt[Bt];return _r&&!qt?_r:(Nt=new We(Nt,Bt),Je.shaderCount++,Fe(Nt,er,qt),_r||(Zt[Bt]=Nt),Dt.push(Nt),Nt)},restore:function(){_t={},Mt={};for(var Bt=0;Bt<Dt.length;++Bt)Fe(Dt[Bt],null,Dt[Bt].attributes.map(function(Nt){return[Nt.location,Nt.name]}))},shader:nr,frag:-1,vert:-1}}function B(Ge,ot,Je,st,It,Ft,nr){function We(_t){var Mt;Mt=ot.next===null?5121:ot.next.colorAttachments[0].texture._texture.type;var wt=0,Dt=0,Rt=st.framebufferWidth,Bt=st.framebufferHeight,Nt=null;return me(_t)?Nt=_t:_t&&(wt=_t.x|0,Dt=_t.y|0,Rt=(_t.width||st.framebufferWidth-wt)|0,Bt=(_t.height||st.framebufferHeight-Dt)|0,Nt=_t.data||null),Je(),_t=Rt*Bt*4,Nt||(Mt===5121?Nt=new Uint8Array(_t):Mt===5126&&(Nt=Nt||new Float32Array(_t))),Ge.pixelStorei(3333,4),Ge.readPixels(wt,Dt,Rt,Bt,6408,Mt,Nt),Nt}function Fe(_t){var Mt;return ot.setFBO({framebuffer:_t.framebuffer},function(){Mt=We(_t)}),Mt}return function(_t){return _t&&"framebuffer"in _t?Fe(_t):We(_t)}}function j(Ge){return Array.prototype.slice.call(Ge)}function H(Ge){return j(Ge).join("")}function K(){function Ge(){var We=[],Fe=[];return ee(function(){We.push.apply(We,j(arguments))},{def:function(){var _t="v"+Je++;return Fe.push(_t),0<arguments.length&&(We.push(_t,"="),We.push.apply(We,j(arguments)),We.push(";")),_t},toString:function(){return H([0<Fe.length?"var "+Fe.join(",")+";":"",H(We)])}})}function ot(){function We(Dt,Rt){_t(Dt,Rt,"=",Fe.def(Dt,Rt),";")}var Fe=Ge(),_t=Ge(),Mt=Fe.toString,wt=_t.toString;return ee(function(){Fe.apply(Fe,j(arguments))},{def:Fe.def,entry:Fe,exit:_t,save:We,set:function(Dt,Rt,Bt){We(Dt,Rt),Fe(Dt,Rt,"=",Bt,";")},toString:function(){return Mt()+wt()}})}var Je=0,st=[],It=[],Ft=Ge(),nr={};return{global:Ft,link:function(We){for(var Fe=0;Fe<It.length;++Fe)if(It[Fe]===We)return st[Fe];return Fe="g"+Je++,st.push(Fe),It.push(We),Fe},block:Ge,proc:function(We,Fe){function _t(){var Rt="a"+Mt.length;return Mt.push(Rt),Rt}var Mt=[];Fe=Fe||0;for(var wt=0;wt<Fe;++wt)_t();var wt=ot(),Dt=wt.toString;return nr[We]=ee(wt,{arg:_t,toString:function(){return H(["function(",Mt.join(),"){",Dt(),"}"])}})},scope:ot,cond:function(){var We=H(arguments),Fe=ot(),_t=ot(),Mt=Fe.toString,wt=_t.toString;return ee(Fe,{then:function(){return Fe.apply(Fe,j(arguments)),this},else:function(){return _t.apply(_t,j(arguments)),this},toString:function(){var Dt=wt();return Dt&&(Dt="else{"+Dt+"}"),H(["if(",We,"){",Mt(),"}",Dt])}})},compile:function(){var We=['"use strict";',Ft,"return {"];Object.keys(nr).forEach(function(_t){We.push('"',_t,'":',nr[_t].toString(),",")}),We.push("}");var Fe=H(We).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,st.concat(Fe)).apply(null,It)}}}function te(Ge){return Array.isArray(Ge)||me(Ge)||d(Ge)}function J(Ge){return Ge.sort(function(ot,Je){return ot==="viewport"?-1:Je==="viewport"?1:ot<Je?-1:1})}function oe(Ge,ot,Je,st){this.thisDep=Ge,this.contextDep=ot,this.propDep=Je,this.append=st}function ie(Ge){return Ge&&!(Ge.thisDep||Ge.contextDep||Ge.propDep)}function Q(Ge){return new oe(!1,!1,!1,Ge)}function V(Ge,ot){var Je=Ge.type;return Je===0?(Je=Ge.data.length,new oe(!0,1<=Je,2<=Je,ot)):Je===4?(Je=Ge.data,new oe(Je.thisDep,Je.contextDep,Je.propDep,ot)):new oe(Je===3,Je===2,Je===1,ot)}function se(Ge,ot,Je,st,It,Ft,nr,We,Fe,_t,Mt,wt,Dt,Rt,Bt){function Nt(Xt){return Xt.replace(".","_")}function er(Xt,xr,Yr){var cn=Nt(Xt);Gn.push(Xt),Rn[cn]=Kr[cn]=!!Yr,Sa[cn]=xr}function qt(Xt,xr,Yr){var cn=Nt(Xt);Gn.push(Xt),Array.isArray(Yr)?(Kr[cn]=Yr.slice(),Rn[cn]=Yr.slice()):Kr[cn]=Rn[cn]=Yr,ha[cn]=xr}function Zt(){var Xt=K(),xr=Xt.link,Yr=Xt.global;Xt.id=Za++,Xt.batchId="0";var cn=xr(Aa),en=Xt.shared={props:"a0"};Object.keys(Aa).forEach(function(Ir){en[Ir]=Yr.def(cn,".",Ir)});var nn=Xt.next={},pn=Xt.current={};Object.keys(ha).forEach(function(Ir){Array.isArray(Kr[Ir])&&(nn[Ir]=Yr.def(en.next,".",Ir),pn[Ir]=Yr.def(en.current,".",Ir))});var rn=Xt.constants={};Object.keys(ka).forEach(function(Ir){rn[Ir]=Yr.def(JSON.stringify(ka[Ir]))}),Xt.invoke=function(Ir,Tr){switch(Tr.type){case 0:var Fn=["this",en.context,en.props,Xt.batchId];return Ir.def(xr(Tr.data),".call(",Fn.slice(0,Math.max(Tr.data.length+1,4)),")");case 1:return Ir.def(en.props,Tr.data);case 2:return Ir.def(en.context,Tr.data);case 3:return Ir.def("this",Tr.data);case 4:return Tr.data.append(Xt,Ir),Tr.data.ref}},Xt.attribCache={};var wr={};return Xt.scopeAttrib=function(Ir){if(Ir=ot.id(Ir),Ir in wr)return wr[Ir];var Tr=_t.scope[Ir];return Tr||(Tr=_t.scope[Ir]=new Wa),wr[Ir]=xr(Tr)},Xt}function _r(Xt){var xr=Xt.static;Xt=Xt.dynamic;var Yr;if("profile"in xr){var cn=!!xr.profile;Yr=Q(function(nn,pn){return cn}),Yr.enable=cn}else if("profile"in Xt){var en=Xt.profile;Yr=V(en,function(nn,pn){return nn.invoke(pn,en)})}return Yr}function Gr(Xt,xr){var Yr=Xt.static,cn=Xt.dynamic;if("framebuffer"in Yr){var en=Yr.framebuffer;return en?(en=We.getFramebuffer(en),Q(function(pn,rn){var wr=pn.link(en),Ir=pn.shared;return rn.set(Ir.framebuffer,".next",wr),Ir=Ir.context,rn.set(Ir,".framebufferWidth",wr+".width"),rn.set(Ir,".framebufferHeight",wr+".height"),wr})):Q(function(pn,rn){var wr=pn.shared;return rn.set(wr.framebuffer,".next","null"),wr=wr.context,rn.set(wr,".framebufferWidth",wr+".drawingBufferWidth"),rn.set(wr,".framebufferHeight",wr+".drawingBufferHeight"),"null"})}if("framebuffer"in cn){var nn=cn.framebuffer;return V(nn,function(pn,rn){var Tr=pn.invoke(rn,nn),wr=pn.shared,Ir=wr.framebuffer,Tr=rn.def(Ir,".getFramebuffer(",Tr,")");return rn.set(Ir,".next",Tr),wr=wr.context,rn.set(wr,".framebufferWidth",Tr+"?"+Tr+".width:"+wr+".drawingBufferWidth"),rn.set(wr,".framebufferHeight",Tr+"?"+Tr+".height:"+wr+".drawingBufferHeight"),Tr})}return null}function zr(Xt,xr,Yr){function cn(rn){if(rn in en){var wr=en[rn];rn=!0;var Ir=wr.x|0,Tr=wr.y|0,Fn,Vn;return"width"in wr?Fn=wr.width|0:rn=!1,"height"in wr?Vn=wr.height|0:rn=!1,new oe(!rn&&xr&&xr.thisDep,!rn&&xr&&xr.contextDep,!rn&&xr&&xr.propDep,function(Ra,oa){var ai=Ra.shared.context,Ti=Fn;"width"in wr||(Ti=oa.def(ai,".","framebufferWidth","-",Ir));var Ui=Vn;return"height"in wr||(Ui=oa.def(ai,".","framebufferHeight","-",Tr)),[Ir,Tr,Ti,Ui]})}if(rn in nn){var la=nn[rn];return rn=V(la,function(Ra,oa){var di=Ra.invoke(oa,la),ai=Ra.shared.context,Ti=oa.def(di,".x|0"),Ui=oa.def(di,".y|0"),Qa=oa.def('"width" in ',di,"?",di,".width|0:","(",ai,".","framebufferWidth","-",Ti,")"),di=oa.def('"height" in ',di,"?",di,".height|0:","(",ai,".","framebufferHeight","-",Ui,")");return[Ti,Ui,Qa,di]}),xr&&(rn.thisDep=rn.thisDep||xr.thisDep,rn.contextDep=rn.contextDep||xr.contextDep,rn.propDep=rn.propDep||xr.propDep),rn}return xr?new oe(xr.thisDep,xr.contextDep,xr.propDep,function(Ra,oa){var ai=Ra.shared.context;return[0,0,oa.def(ai,".","framebufferWidth"),oa.def(ai,".","framebufferHeight")]}):null}var en=Xt.static,nn=Xt.dynamic;if(Xt=cn("viewport")){var pn=Xt;Xt=new oe(Xt.thisDep,Xt.contextDep,Xt.propDep,function(rn,wr){var Ir=pn.append(rn,wr),Tr=rn.shared.context;return wr.set(Tr,".viewportWidth",Ir[2]),wr.set(Tr,".viewportHeight",Ir[3]),Ir})}return{viewport:Xt,scissor_box:cn("scissor.box")}}function Or(Xt,xr){var Yr=Xt.static;if(typeof Yr.frag=="string"&&typeof Yr.vert=="string"){if(0<Object.keys(xr.dynamic).length)return null;var Yr=xr.static,cn=Object.keys(Yr);if(0<cn.length&&typeof Yr[cn[0]]=="number"){for(var en=[],nn=0;nn<cn.length;++nn)en.push([Yr[cn[nn]]|0,cn[nn]]);return en}}return null}function Mn(Xt,xr,Yr){function cn(Ir){if(Ir in en){var Tr=ot.id(en[Ir]);return Ir=Q(function(){return Tr}),Ir.id=Tr,Ir}if(Ir in nn){var Fn=nn[Ir];return V(Fn,function(Vn,la){var Ra=Vn.invoke(la,Fn);return la.def(Vn.shared.strings,".id(",Ra,")")})}return null}var en=Xt.static,nn=Xt.dynamic,pn=cn("frag"),rn=cn("vert"),wr=null;return ie(pn)&&ie(rn)?(wr=Mt.program(rn.id,pn.id,null,Yr),Xt=Q(function(Ir,Tr){return Ir.link(wr)})):Xt=new oe(pn&&pn.thisDep||rn&&rn.thisDep,pn&&pn.contextDep||rn&&rn.contextDep,pn&&pn.propDep||rn&&rn.propDep,function(Ir,Tr){var Fn=Ir.shared.shader,Vn;Vn=pn?pn.append(Ir,Tr):Tr.def(Fn,".","frag");var la;return la=rn?rn.append(Ir,Tr):Tr.def(Fn,".","vert"),Tr.def(Fn+".program("+la+","+Vn+")")}),{frag:pn,vert:rn,progVar:Xt,program:wr}}function Yn(Xt,xr){function Yr(rn,wr){if(rn in cn){var Ir=cn[rn]|0;return Q(function(Fn,Vn){return wr&&(Fn.OFFSET=Ir),Ir})}if(rn in en){var Tr=en[rn];return V(Tr,function(Fn,Vn){var la=Fn.invoke(Vn,Tr);return wr&&(Fn.OFFSET=la),la})}return wr&&nn?Q(function(Fn,Vn){return Fn.OFFSET="0",0}):null}var cn=Xt.static,en=Xt.dynamic,nn=function(){if("elements"in cn){var rn=cn.elements;te(rn)?rn=Ft.getElements(Ft.create(rn,!0)):rn&&(rn=Ft.getElements(rn));var wr=Q(function(Tr,Fn){if(rn){var Vn=Tr.link(rn);return Tr.ELEMENTS=Vn}return Tr.ELEMENTS=null});return wr.value=rn,wr}if("elements"in en){var Ir=en.elements;return V(Ir,function(Tr,Fn){var Vn=Tr.shared,Ra=Vn.isBufferArgs,Vn=Vn.elements,oa=Tr.invoke(Fn,Ir),la=Fn.def("null"),Ra=Fn.def(Ra,"(",oa,")"),oa=Tr.cond(Ra).then(la,"=",Vn,".createStream(",oa,");").else(la,"=",Vn,".getElements(",oa,");");return Fn.entry(oa),Fn.exit(Tr.cond(Ra).then(Vn,".destroyStream(",la,");")),Tr.ELEMENTS=la})}return null}(),pn=Yr("offset",!0);return{elements:nn,primitive:function(){if("primitive"in cn){var rn=cn.primitive;return Q(function(Ir,Tr){return Ae[rn]})}if("primitive"in en){var wr=en.primitive;return V(wr,function(Ir,Tr){var Fn=Ir.constants.primTypes,Vn=Ir.invoke(Tr,wr);return Tr.def(Fn,"[",Vn,"]")})}return nn?ie(nn)?nn.value?Q(function(Ir,Tr){return Tr.def(Ir.ELEMENTS,".primType")}):Q(function(){return 4}):new oe(nn.thisDep,nn.contextDep,nn.propDep,function(Ir,Tr){var Fn=Ir.ELEMENTS;return Tr.def(Fn,"?",Fn,".primType:",4)}):null}(),count:function(){if("count"in cn){var rn=cn.count|0;return Q(function(){return rn})}if("count"in en){var wr=en.count;return V(wr,function(Ir,Tr){return Ir.invoke(Tr,wr)})}return nn?ie(nn)?nn?pn?new oe(pn.thisDep,pn.contextDep,pn.propDep,function(Ir,Tr){return Tr.def(Ir.ELEMENTS,".vertCount-",Ir.OFFSET)}):Q(function(Ir,Tr){return Tr.def(Ir.ELEMENTS,".vertCount")}):Q(function(){return-1}):new oe(nn.thisDep||pn.thisDep,nn.contextDep||pn.contextDep,nn.propDep||pn.propDep,function(Ir,Tr){var Fn=Ir.ELEMENTS;return Ir.OFFSET?Tr.def(Fn,"?",Fn,".vertCount-",Ir.OFFSET,":-1"):Tr.def(Fn,"?",Fn,".vertCount:-1")}):null}(),instances:Yr("instances",!1),offset:pn}}function An(Xt,xr){var Yr=Xt.static,cn=Xt.dynamic,en={};return Gn.forEach(function(nn){function pn(wr,Ir){if(nn in Yr){var Tr=wr(Yr[nn]);en[rn]=Q(function(){return Tr})}else if(nn in cn){var Fn=cn[nn];en[rn]=V(Fn,function(Vn,la){return Ir(Vn,la,Vn.invoke(la,Fn))})}}var rn=Nt(nn);switch(nn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return pn(function(wr){return wr},function(wr,Ir,Tr){return Tr});case"depth.func":return pn(function(wr){return Ie[wr]},function(wr,Ir,Tr){return Ir.def(wr.constants.compareFuncs,"[",Tr,"]")});case"depth.range":return pn(function(wr){return wr},function(wr,Ir,Tr){return wr=Ir.def("+",Tr,"[0]"),Ir=Ir.def("+",Tr,"[1]"),[wr,Ir]});case"blend.func":return pn(function(wr){return[Me["srcRGB"in wr?wr.srcRGB:wr.src],Me["dstRGB"in wr?wr.dstRGB:wr.dst],Me["srcAlpha"in wr?wr.srcAlpha:wr.src],Me["dstAlpha"in wr?wr.dstAlpha:wr.dst]]},function(wr,Ir,Tr){function Fn(oa,ai){return Ir.def('"',oa,ai,'" in ',Tr,"?",Tr,".",oa,ai,":",Tr,".",oa)}wr=wr.constants.blendFuncs;var Vn=Fn("src","RGB"),Ra=Fn("dst","RGB"),Vn=Ir.def(wr,"[",Vn,"]"),la=Ir.def(wr,"[",Fn("src","Alpha"),"]"),Ra=Ir.def(wr,"[",Ra,"]");return wr=Ir.def(wr,"[",Fn("dst","Alpha"),"]"),[Vn,Ra,la,wr]});case"blend.equation":return pn(function(wr){if(typeof wr=="string")return[ei[wr],ei[wr]];if(typeof wr=="object")return[ei[wr.rgb],ei[wr.alpha]]},function(wr,Ir,Tr){var Fn=wr.constants.blendEquations,Vn=Ir.def(),la=Ir.def();return wr=wr.cond("typeof ",Tr,'==="string"'),wr.then(Vn,"=",la,"=",Fn,"[",Tr,"];"),wr.else(Vn,"=",Fn,"[",Tr,".rgb];",la,"=",Fn,"[",Tr,".alpha];"),Ir(wr),[Vn,la]});case"blend.color":return pn(function(wr){return i(4,function(Ir){return+wr[Ir]})},function(wr,Ir,Tr){return i(4,function(Fn){return Ir.def("+",Tr,"[",Fn,"]")})});case"stencil.mask":return pn(function(wr){return wr|0},function(wr,Ir,Tr){return Ir.def(Tr,"|0")});case"stencil.func":return pn(function(wr){return[Ie[wr.cmp||"keep"],wr.ref||0,"mask"in wr?wr.mask:-1]},function(wr,Ir,Tr){wr=Ir.def('"cmp" in ',Tr,"?",wr.constants.compareFuncs,"[",Tr,".cmp]",":",7680);var Fn=Ir.def(Tr,".ref|0");return Ir=Ir.def('"mask" in ',Tr,"?",Tr,".mask|0:-1"),[wr,Fn,Ir]});case"stencil.opFront":case"stencil.opBack":return pn(function(wr){return[nn==="stencil.opBack"?1029:1028,He[wr.fail||"keep"],He[wr.zfail||"keep"],He[wr.zpass||"keep"]]},function(wr,Ir,Tr){function Fn(la){return Ir.def('"',la,'" in ',Tr,"?",Vn,"[",Tr,".",la,"]:",7680)}var Vn=wr.constants.stencilOps;return[nn==="stencil.opBack"?1029:1028,Fn("fail"),Fn("zfail"),Fn("zpass")]});case"polygonOffset.offset":return pn(function(wr){return[wr.factor|0,wr.units|0]},function(wr,Ir,Tr){return wr=Ir.def(Tr,".factor|0"),Ir=Ir.def(Tr,".units|0"),[wr,Ir]});case"cull.face":return pn(function(wr){var Ir=0;return wr==="front"?Ir=1028:wr==="back"&&(Ir=1029),Ir},function(wr,Ir,Tr){return Ir.def(Tr,'==="front"?',1028,":",1029)});case"lineWidth":return pn(function(wr){return wr},function(wr,Ir,Tr){return Tr});case"frontFace":return pn(function(wr){return Xe[wr]},function(wr,Ir,Tr){return Ir.def(Tr+'==="cw"?2304:2305')});case"colorMask":return pn(function(wr){return wr.map(function(Ir){return!!Ir})},function(wr,Ir,Tr){return i(4,function(Fn){return"!!"+Tr+"["+Fn+"]"})});case"sample.coverage":return pn(function(wr){return["value"in wr?wr.value:1,!!wr.invert]},function(wr,Ir,Tr){return wr=Ir.def('"value" in ',Tr,"?+",Tr,".value:1"),Ir=Ir.def("!!",Tr,".invert"),[wr,Ir]})}}),en}function Bn(Xt,xr){var Yr=Xt.static,cn=Xt.dynamic,en={};return Object.keys(Yr).forEach(function(nn){var pn=Yr[nn],rn;if(typeof pn=="number"||typeof pn=="boolean")rn=Q(function(){return pn});else if(typeof pn=="function"){var wr=pn._reglType;wr==="texture2d"||wr==="textureCube"?rn=Q(function(Ir){return Ir.link(pn)}):(wr==="framebuffer"||wr==="framebufferCube")&&(rn=Q(function(Ir){return Ir.link(pn.color[0])}))}else R(pn)&&(rn=Q(function(Ir){return Ir.global.def("[",i(pn.length,function(Tr){return pn[Tr]}),"]")}));rn.value=pn,en[nn]=rn}),Object.keys(cn).forEach(function(nn){var pn=cn[nn];en[nn]=V(pn,function(rn,wr){return rn.invoke(wr,pn)})}),en}function jn(Xt,xr){var Yr=Xt.static,cn=Xt.dynamic,en={};return Object.keys(Yr).forEach(function(nn){var pn=Yr[nn],rn=ot.id(nn),wr=new Wa;if(te(pn))wr.state=1,wr.buffer=It.getBuffer(It.create(pn,34962,!1,!0)),wr.type=0;else{var Ir=It.getBuffer(pn);if(Ir)wr.state=1,wr.buffer=Ir,wr.type=0;else if("constant"in pn){var Tr=pn.constant;wr.buffer="null",wr.state=2,typeof Tr=="number"?wr.x=Tr:Be.forEach(function(ai,Ti){Ti<Tr.length&&(wr[ai]=Tr[Ti])})}else{var Ir=te(pn.buffer)?It.getBuffer(It.create(pn.buffer,34962,!1,!0)):It.getBuffer(pn.buffer),Fn=pn.offset|0,Vn=pn.stride|0,la=pn.size|0,Ra=!!pn.normalized,oa=0;"type"in pn&&(oa=je[pn.type]),pn=pn.divisor|0,wr.buffer=Ir,wr.state=1,wr.size=la,wr.normalized=Ra,wr.type=oa||Ir.dtype,wr.offset=Fn,wr.stride=Vn,wr.divisor=pn}}en[nn]=Q(function(ai,Ti){var Ui=ai.attribCache;if(rn in Ui)return Ui[rn];var Qa={isStream:!1};return Object.keys(wr).forEach(function(di){Qa[di]=wr[di]}),wr.buffer&&(Qa.buffer=ai.link(wr.buffer),Qa.type=Qa.type||Qa.buffer+".dtype"),Ui[rn]=Qa})}),Object.keys(cn).forEach(function(nn){var pn=cn[nn];en[nn]=V(pn,function(rn,wr){function Ir(Ui){wr(Ra[Ui],"=",Tr,".",Ui,"|0;")}var Tr=rn.invoke(wr,pn),la=rn.shared,Fn=rn.constants,Vn=la.isBufferArgs,la=la.buffer,Ra={isStream:wr.def(!1)},oa=new Wa;oa.state=1,Object.keys(oa).forEach(function(Ui){Ra[Ui]=wr.def(""+oa[Ui])});var ai=Ra.buffer,Ti=Ra.type;return wr("if(",Vn,"(",Tr,")){",Ra.isStream,"=true;",ai,"=",la,".createStream(",34962,",",Tr,");",Ti,"=",ai,".dtype;","}else{",ai,"=",la,".getBuffer(",Tr,");","if(",ai,"){",Ti,"=",ai,".dtype;",'}else if("constant" in ',Tr,"){",Ra.state,"=",2,";","if(typeof "+Tr+'.constant === "number"){',Ra[Be[0]],"=",Tr,".constant;",Be.slice(1).map(function(Ui){return Ra[Ui]}).join("="),"=0;","}else{",Be.map(function(Ui,Qa){return Ra[Ui]+"="+Tr+".constant.length>"+Qa+"?"+Tr+".constant["+Qa+"]:0;"}).join(""),"}}else{","if(",Vn,"(",Tr,".buffer)){",ai,"=",la,".createStream(",34962,",",Tr,".buffer);","}else{",ai,"=",la,".getBuffer(",Tr,".buffer);","}",Ti,'="type" in ',Tr,"?",Fn.glTypes,"[",Tr,".type]:",ai,".dtype;",Ra.normalized,"=!!",Tr,".normalized;"),Ir("size"),Ir("offset"),Ir("stride"),Ir("divisor"),wr("}}"),wr.exit("if(",Ra.isStream,"){",la,".destroyStream(",ai,");","}"),Ra})}),en}function Nr(Xt,xr){var Yr=Xt.static,cn=Xt.dynamic;if("vao"in Yr){var en=Yr.vao;return en!==null&&_t.getVAO(en)===null&&(en=_t.createVAO(en)),Q(function(pn){return pn.link(_t.getVAO(en))})}if("vao"in cn){var nn=cn.vao;return V(nn,function(pn,rn){var wr=pn.invoke(rn,nn);return rn.def(pn.shared.vao+".getVAO("+wr+")")})}return null}function Lr(Xt){var xr=Xt.static,Yr=Xt.dynamic,cn={};return Object.keys(xr).forEach(function(en){var nn=xr[en];cn[en]=Q(function(pn,rn){return typeof nn=="number"||typeof nn=="boolean"?""+nn:pn.link(nn)})}),Object.keys(Yr).forEach(function(en){var nn=Yr[en];cn[en]=V(nn,function(pn,rn){return pn.invoke(rn,nn)})}),cn}function Ln(Xt,xr,Yr,cn,en){function nn(oa){var ai=rn[oa];ai&&(Ir[oa]=ai)}var pn=Or(Xt,xr),Vn=Gr(Xt),rn=zr(Xt,Vn),wr=Yn(Xt),Ir=An(Xt),Tr=Mn(Xt,en,pn);nn("viewport"),nn(Nt("scissor.box"));var Fn=0<Object.keys(Ir).length,Vn={framebuffer:Vn,draw:wr,shader:Tr,state:Ir,dirty:Fn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Vn.profile=_r(Xt),Vn.uniforms=Bn(Yr),Vn.drawVAO=Vn.scopeVAO=Nr(Xt),!Vn.drawVAO&&Tr.program&&!pn&&Je.angle_instanced_arrays){var la=!0;if(Xt=Tr.program.attributes.map(function(oa){return oa=xr.static[oa],la=la&&!!oa,oa}),la&&0<Xt.length){var Ra=_t.getVAO(_t.createVAO(Xt));Vn.drawVAO=new oe(null,null,null,function(oa,ai){return oa.link(Ra)}),Vn.useVAO=!0}}return pn?Vn.useVAO=!0:Vn.attributes=jn(xr),Vn.context=Lr(cn),Vn}function dn(Xt,xr,Yr){var cn=Xt.shared.context,en=Xt.scope();Object.keys(Yr).forEach(function(nn){xr.save(cn,"."+nn),en(cn,".",nn,"=",Yr[nn].append(Xt,xr),";")}),xr(en)}function xn(Xt,xr,Yr,cn){var rn=Xt.shared,en=rn.gl,nn=rn.framebuffer,pn;an&&(pn=xr.def(rn.extensions,".webgl_draw_buffers"));var wr=Xt.constants,rn=wr.drawBuffer,wr=wr.backBuffer;Xt=Yr?Yr.append(Xt,xr):xr.def(nn,".next"),cn||xr("if(",Xt,"!==",nn,".cur){"),xr("if(",Xt,"){",en,".bindFramebuffer(",36160,",",Xt,".framebuffer);"),an&&xr(pn,".drawBuffersWEBGL(",rn,"[",Xt,".colorAttachments.length]);"),xr("}else{",en,".bindFramebuffer(",36160,",null);"),an&&xr(pn,".drawBuffersWEBGL(",wr,");"),xr("}",nn,".cur=",Xt,";"),cn||xr("}")}function tn(Xt,xr,Yr){var cn=Xt.shared,en=cn.gl,nn=Xt.current,pn=Xt.next,rn=cn.current,wr=cn.next,Ir=Xt.cond(rn,".dirty");Gn.forEach(function(Tr){if(Tr=Nt(Tr),!(Tr in Yr.state)){var Fn,Vn;if(Tr in pn){Fn=pn[Tr],Vn=nn[Tr];var la=i(Kr[Tr].length,function(Ra){return Ir.def(Fn,"[",Ra,"]")});Ir(Xt.cond(la.map(function(Ra,oa){return Ra+"!=="+Vn+"["+oa+"]"}).join("||")).then(en,".",ha[Tr],"(",la,");",la.map(function(Ra,oa){return Vn+"["+oa+"]="+Ra}).join(";"),";"))}else Fn=Ir.def(wr,".",Tr),la=Xt.cond(Fn,"!==",rn,".",Tr),Ir(la),Tr in Sa?la(Xt.cond(Fn).then(en,".enable(",Sa[Tr],");").else(en,".disable(",Sa[Tr],");"),rn,".",Tr,"=",Fn,";"):la(en,".",ha[Tr],"(",Fn,");",rn,".",Tr,"=",Fn,";")}}),Object.keys(Yr.state).length===0&&Ir(rn,".dirty=false;"),xr(Ir)}function wn(Xt,xr,Yr,cn){var en=Xt.shared,nn=Xt.current,pn=en.current,rn=en.gl;J(Object.keys(Yr)).forEach(function(wr){var Ir=Yr[wr];if(!cn||cn(Ir)){var Tr=Ir.append(Xt,xr);if(Sa[wr]){var Fn=Sa[wr];ie(Ir)?Tr?xr(rn,".enable(",Fn,");"):xr(rn,".disable(",Fn,");"):xr(Xt.cond(Tr).then(rn,".enable(",Fn,");").else(rn,".disable(",Fn,");")),xr(pn,".",wr,"=",Tr,";")}else if(R(Tr)){var Vn=nn[wr];xr(rn,".",ha[wr],"(",Tr,");",Tr.map(function(la,Ra){return Vn+"["+Ra+"]="+la}).join(";"),";")}else xr(rn,".",ha[wr],"(",Tr,");",pn,".",wr,"=",Tr,";")}})}function Sn(Xt,xr){dr&&(Xt.instancing=xr.def(Xt.shared.extensions,".angle_instanced_arrays"))}function un(Xt,xr,Yr,cn,en){function nn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function pn(oa){la=xr.def(),oa(la,"=",nn(),";"),typeof en=="string"?oa(Tr,".count+=",en,";"):oa(Tr,".count++;"),Rt&&(cn?(Ra=xr.def(),oa(Ra,"=",Vn,".getNumPendingQueries();")):oa(Vn,".beginQuery(",Tr,");"))}function rn(oa){oa(Tr,".cpuTime+=",nn(),"-",la,";"),Rt&&(cn?oa(Vn,".pushScopeStats(",Ra,",",Vn,".getNumPendingQueries(),",Tr,");"):oa(Vn,".endQuery();"))}function wr(oa){var ai=xr.def(Fn,".profile");xr(Fn,".profile=",oa,";"),xr.exit(Fn,".profile=",ai,";")}var Ir=Xt.shared,Tr=Xt.stats,Fn=Ir.current,Vn=Ir.timer;Yr=Yr.profile;var la,Ra;if(Yr){if(ie(Yr)){Yr.enable?(pn(xr),rn(xr.exit),wr("true")):wr("false");return}Yr=Yr.append(Xt,xr),wr(Yr)}else Yr=xr.def(Fn,".profile");Ir=Xt.block(),pn(Ir),xr("if(",Yr,"){",Ir,"}"),Xt=Xt.block(),rn(Xt),xr.exit("if(",Yr,"){",Xt,"}")}function vt(Xt,xr,Yr,cn,en){function nn(wr){switch(wr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function pn(wr,Ir,Tr){function Fn(){xr("if(!",oa,".buffer){",la,".enableVertexAttribArray(",Ra,");}");var Qa=Tr.type,di;di=Tr.size?xr.def(Tr.size,"||",Ir):Ir,xr("if(",oa,".type!==",Qa,"||",oa,".size!==",di,"||",Ui.map(function(Ps){return oa+"."+Ps+"!=="+Tr[Ps]}).join("||"),"){",la,".bindBuffer(",34962,",",ai,".buffer);",la,".vertexAttribPointer(",[Ra,di,Qa,Tr.normalized,Tr.stride,Tr.offset],");",oa,".type=",Qa,";",oa,".size=",di,";",Ui.map(function(Ps){return oa+"."+Ps+"="+Tr[Ps]+";"}).join(""),"}"),dr&&(Qa=Tr.divisor,xr("if(",oa,".divisor!==",Qa,"){",Xt.instancing,".vertexAttribDivisorANGLE(",[Ra,Qa],");",oa,".divisor=",Qa,";}"))}function Vn(){xr("if(",oa,".buffer){",la,".disableVertexAttribArray(",Ra,");",oa,".buffer=null;","}if(",Be.map(function(Qa,di){return oa+"."+Qa+"!=="+Ti[di]}).join("||"),"){",la,".vertexAttrib4f(",Ra,",",Ti,");",Be.map(function(Qa,di){return oa+"."+Qa+"="+Ti[di]+";"}).join(""),"}")}var la=rn.gl,Ra=xr.def(wr,".location"),oa=xr.def(rn.attributes,"[",Ra,"]");wr=Tr.state;var ai=Tr.buffer,Ti=[Tr.x,Tr.y,Tr.z,Tr.w],Ui=["buffer","normalized","offset","stride"];wr===1?Fn():wr===2?Vn():(xr("if(",wr,"===",1,"){"),Fn(),xr("}else{"),Vn(),xr("}"))}var rn=Xt.shared;cn.forEach(function(wr){var Ir=wr.name,Tr=Yr.attributes[Ir],Fn;if(Tr){if(!en(Tr))return;Fn=Tr.append(Xt,xr)}else{if(!en(ht))return;var Vn=Xt.scopeAttrib(Ir);Fn={},Object.keys(new Wa).forEach(function(la){Fn[la]=xr.def(Vn,".",la)})}pn(Xt.link(wr),nn(wr.info.type),Fn)})}function Gt(Xt,xr,Yr,cn,en){for(var nn=Xt.shared,pn=nn.gl,rn,wr=0;wr<cn.length;++wr){var Vn=cn[wr],Ir=Vn.name,Tr=Vn.info.type,Fn=Yr.uniforms[Ir],Vn=Xt.link(Vn)+".location",la;if(Fn){if(!en(Fn))continue;if(ie(Fn)){if(Ir=Fn.value,Tr===35678||Tr===35680)Tr=Xt.link(Ir._texture||Ir.color[0]._texture),xr(pn,".uniform1i(",Vn,",",Tr+".bind());"),xr.exit(Tr,".unbind();");else if(Tr===35674||Tr===35675||Tr===35676)Ir=Xt.global.def("new Float32Array(["+Array.prototype.slice.call(Ir)+"])"),Fn=2,Tr===35675?Fn=3:Tr===35676&&(Fn=4),xr(pn,".uniformMatrix",Fn,"fv(",Vn,",false,",Ir,");");else{switch(Tr){case 5126:rn="1f";break;case 35664:rn="2f";break;case 35665:rn="3f";break;case 35666:rn="4f";break;case 35670:rn="1i";break;case 5124:rn="1i";break;case 35671:rn="2i";break;case 35667:rn="2i";break;case 35672:rn="3i";break;case 35668:rn="3i";break;case 35673:rn="4i";break;case 35669:rn="4i"}xr(pn,".uniform",rn,"(",Vn,",",R(Ir)?Array.prototype.slice.call(Ir):Ir,");")}continue}else la=Fn.append(Xt,xr)}else{if(!en(ht))continue;la=xr.def(nn.uniforms,"[",ot.id(Ir),"]")}switch(Tr===35678?xr("if(",la,"&&",la,'._reglType==="framebuffer"){',la,"=",la,".color[0];","}"):Tr===35680&&xr("if(",la,"&&",la,'._reglType==="framebufferCube"){',la,"=",la,".color[0];","}"),Ir=1,Tr){case 35678:case 35680:Tr=xr.def(la,"._texture"),xr(pn,".uniform1i(",Vn,",",Tr,".bind());"),xr.exit(Tr,".unbind();");continue;case 5124:case 35670:rn="1i";break;case 35667:case 35671:rn="2i",Ir=2;break;case 35668:case 35672:rn="3i",Ir=3;break;case 35669:case 35673:rn="4i",Ir=4;break;case 5126:rn="1f";break;case 35664:rn="2f",Ir=2;break;case 35665:rn="3f",Ir=3;break;case 35666:rn="4f",Ir=4;break;case 35674:rn="Matrix2fv";break;case 35675:rn="Matrix3fv";break;case 35676:rn="Matrix4fv"}if(xr(pn,".uniform",rn,"(",Vn,","),rn.charAt(0)==="M"){var Vn=Math.pow(Tr-35674+2,2),Ra=Xt.global.def("new Float32Array(",Vn,")");xr("false,(Array.isArray(",la,")||",la," instanceof Float32Array)?",la,":(",i(Vn,function(ai){return Ra+"["+ai+"]="+la+"["+ai+"]"}),",",Ra,")")}else 1<Ir?xr(i(Ir,function(oa){return la+"["+oa+"]"})):xr(la);xr(");")}}function cr(Xt,xr,Yr,cn){function en(Qa){var di=Tr[Qa];return di?di.contextDep&&cn.contextDynamic||di.propDep?di.append(Xt,Yr):di.append(Xt,xr):xr.def(Ir,".",Qa)}function nn(){function Qa(){Yr(ai,".drawElementsInstancedANGLE(",[Vn,Ra,Ti,la+"<<(("+Ti+"-5121)>>1)",oa],");")}function di(){Yr(ai,".drawArraysInstancedANGLE(",[Vn,la,Ra,oa],");")}Fn?Ui?Qa():(Yr("if(",Fn,"){"),Qa(),Yr("}else{"),di(),Yr("}")):di()}function pn(){function Qa(){Yr(wr+".drawElements("+[Vn,Ra,Ti,la+"<<(("+Ti+"-5121)>>1)"]+");")}function di(){Yr(wr+".drawArrays("+[Vn,la,Ra]+");")}Fn?Ui?Qa():(Yr("if(",Fn,"){"),Qa(),Yr("}else{"),di(),Yr("}")):di()}var rn=Xt.shared,wr=rn.gl,Ir=rn.draw,Tr=cn.draw,Fn=function(){var Qa=Tr.elements,di=xr;return Qa?((Qa.contextDep&&cn.contextDynamic||Qa.propDep)&&(di=Yr),Qa=Qa.append(Xt,di)):Qa=di.def(Ir,".","elements"),Qa&&di("if("+Qa+")"+wr+".bindBuffer(34963,"+Qa+".buffer.buffer);"),Qa}(),Vn=en("primitive"),la=en("offset"),Ra=function(){var Qa=Tr.count,di=xr;return Qa?((Qa.contextDep&&cn.contextDynamic||Qa.propDep)&&(di=Yr),Qa=Qa.append(Xt,di)):Qa=di.def(Ir,".","count"),Qa}();if(typeof Ra=="number"){if(Ra===0)return}else Yr("if(",Ra,"){"),Yr.exit("}");var oa,ai;dr&&(oa=en("instances"),ai=Xt.instancing);var Ti=Fn+".type",Ui=Tr.elements&&ie(Tr.elements);dr&&(typeof oa!="number"||0<=oa)?typeof oa=="string"?(Yr("if(",oa,">0){"),nn(),Yr("}else if(",oa,"<0){"),pn(),Yr("}")):nn():pn()}function Er(Xt,xr,Yr,cn,en){return xr=Zt(),en=xr.proc("body",en),dr&&(xr.instancing=en.def(xr.shared.extensions,".angle_instanced_arrays")),Xt(xr,en,Yr,cn),xr.compile().body}function Wr(Xt,xr,Yr,cn){Sn(Xt,xr),Yr.useVAO?Yr.drawVAO?xr(Xt.shared.vao,".setVAO(",Yr.drawVAO.append(Xt,xr),");"):xr(Xt.shared.vao,".setVAO(",Xt.shared.vao,".targetVAO);"):(xr(Xt.shared.vao,".setVAO(null);"),vt(Xt,xr,Yr,cn.attributes,function(){return!0})),Gt(Xt,xr,Yr,cn.uniforms,function(){return!0}),cr(Xt,xr,xr,Yr)}function Vr(Xt,xr){var Yr=Xt.proc("draw",1);Sn(Xt,Yr),dn(Xt,Yr,xr.context),xn(Xt,Yr,xr.framebuffer),tn(Xt,Yr,xr),wn(Xt,Yr,xr.state),un(Xt,Yr,xr,!1,!0);var cn=xr.shader.progVar.append(Xt,Yr);if(Yr(Xt.shared.gl,".useProgram(",cn,".program);"),xr.shader.program)Wr(Xt,Yr,xr,xr.shader.program);else{Yr(Xt.shared.vao,".setVAO(null);");var en=Xt.global.def("{}"),nn=Yr.def(cn,".id"),pn=Yr.def(en,"[",nn,"]");Yr(Xt.cond(pn).then(pn,".call(this,a0);").else(pn,"=",en,"[",nn,"]=",Xt.link(function(rn){return Er(Wr,Xt,xr,rn,1)}),"(",cn,");",pn,".call(this,a0);"))}0<Object.keys(xr.state).length&&Yr(Xt.shared.current,".dirty=true;")}function Qr(Xt,xr,Yr,cn){function en(){return!0}Xt.batchId="a1",Sn(Xt,xr),vt(Xt,xr,Yr,cn.attributes,en),Gt(Xt,xr,Yr,cn.uniforms,en),cr(Xt,xr,xr,Yr)}function Hr(Xt,xr,Yr,cn){function en(Fn){return Fn.contextDep&&pn||Fn.propDep}function nn(Fn){return!en(Fn)}Sn(Xt,xr);var pn=Yr.contextDep,rn=xr.def(),wr=xr.def();Xt.shared.props=wr,Xt.batchId=rn;var Ir=Xt.scope(),Tr=Xt.scope();xr(Ir.entry,"for(",rn,"=0;",rn,"<","a1",";++",rn,"){",wr,"=","a0","[",rn,"];",Tr,"}",Ir.exit),Yr.needsContext&&dn(Xt,Tr,Yr.context),Yr.needsFramebuffer&&xn(Xt,Tr,Yr.framebuffer),wn(Xt,Tr,Yr.state,en),Yr.profile&&en(Yr.profile)&&un(Xt,Tr,Yr,!1,!0),cn?(Yr.useVAO?Yr.drawVAO?en(Yr.drawVAO)?Tr(Xt.shared.vao,".setVAO(",Yr.drawVAO.append(Xt,Tr),");"):Ir(Xt.shared.vao,".setVAO(",Yr.drawVAO.append(Xt,Ir),");"):Ir(Xt.shared.vao,".setVAO(",Xt.shared.vao,".targetVAO);"):(Ir(Xt.shared.vao,".setVAO(null);"),vt(Xt,Ir,Yr,cn.attributes,nn),vt(Xt,Tr,Yr,cn.attributes,en)),Gt(Xt,Ir,Yr,cn.uniforms,nn),Gt(Xt,Tr,Yr,cn.uniforms,en),cr(Xt,Ir,Tr,Yr)):(xr=Xt.global.def("{}"),cn=Yr.shader.progVar.append(Xt,Tr),wr=Tr.def(cn,".id"),Ir=Tr.def(xr,"[",wr,"]"),Tr(Xt.shared.gl,".useProgram(",cn,".program);","if(!",Ir,"){",Ir,"=",xr,"[",wr,"]=",Xt.link(function(Fn){return Er(Qr,Xt,Yr,Fn,2)}),"(",cn,");}",Ir,".call(this,a0[",rn,"],",rn,");"))}function Cn(Xt,xr){function Yr(Ir){return Ir.contextDep&&en||Ir.propDep}var cn=Xt.proc("batch",2);Xt.batchId="0",Sn(Xt,cn);var en=!1,nn=!0;Object.keys(xr.context).forEach(function(Ir){en=en||xr.context[Ir].propDep}),en||(dn(Xt,cn,xr.context),nn=!1);var pn=xr.framebuffer,rn=!1;if(pn?(pn.propDep?en=rn=!0:pn.contextDep&&en&&(rn=!0),rn||xn(Xt,cn,pn)):xn(Xt,cn,null),xr.state.viewport&&xr.state.viewport.propDep&&(en=!0),tn(Xt,cn,xr),wn(Xt,cn,xr.state,function(Ir){return!Yr(Ir)}),xr.profile&&Yr(xr.profile)||un(Xt,cn,xr,!1,"a1"),xr.contextDep=en,xr.needsContext=nn,xr.needsFramebuffer=rn,nn=xr.shader.progVar,nn.contextDep&&en||nn.propDep)Hr(Xt,cn,xr,null);else if(nn=nn.append(Xt,cn),cn(Xt.shared.gl,".useProgram(",nn,".program);"),xr.shader.program)Hr(Xt,cn,xr,xr.shader.program);else{cn(Xt.shared.vao,".setVAO(null);");var pn=Xt.global.def("{}"),rn=cn.def(nn,".id"),wr=cn.def(pn,"[",rn,"]");cn(Xt.cond(wr).then(wr,".call(this,a0,a1);").else(wr,"=",pn,"[",rn,"]=",Xt.link(function(Fn){return Er(Hr,Xt,xr,Fn,2)}),"(",nn,");",wr,".call(this,a0,a1);"))}0<Object.keys(xr.state).length&&cn(Xt.shared.current,".dirty=true;")}function ra(Xt,xr){function Yr(pn){var rn=xr.shader[pn];rn&&cn.set(en.shader,"."+pn,rn.append(Xt,cn))}var cn=Xt.proc("scope",3);Xt.batchId="a2";var en=Xt.shared,nn=en.current;dn(Xt,cn,xr.context),xr.framebuffer&&xr.framebuffer.append(Xt,cn),J(Object.keys(xr.state)).forEach(function(pn){var rn=xr.state[pn].append(Xt,cn);R(rn)?rn.forEach(function(wr,Ir){cn.set(Xt.next[pn],"["+Ir+"]",wr)}):cn.set(en.next,"."+pn,rn)}),un(Xt,cn,xr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(pn){var rn=xr.draw[pn];rn&&cn.set(en.draw,"."+pn,""+rn.append(Xt,cn))}),Object.keys(xr.uniforms).forEach(function(pn){cn.set(en.uniforms,"["+ot.id(pn)+"]",xr.uniforms[pn].append(Xt,cn))}),Object.keys(xr.attributes).forEach(function(pn){var rn=xr.attributes[pn].append(Xt,cn),wr=Xt.scopeAttrib(pn);Object.keys(new Wa).forEach(function(Ir){cn.set(wr,"."+Ir,rn[Ir])})}),xr.scopeVAO&&cn.set(en.vao,".targetVAO",xr.scopeVAO.append(Xt,cn)),Yr("vert"),Yr("frag"),0<Object.keys(xr.state).length&&(cn(nn,".dirty=true;"),cn.exit(nn,".dirty=true;")),cn("a1(",Xt.shared.context,",a0,",Xt.batchId,");")}function ta(Xt){if(typeof Xt=="object"&&!R(Xt)){for(var xr=Object.keys(Xt),Yr=0;Yr<xr.length;++Yr)if(fe.isDynamic(Xt[xr[Yr]]))return!0;return!1}}function ba(Xt,xr,Yr){function cn(Fn,Vn){pn.forEach(function(la){var Ra=en[la];fe.isDynamic(Ra)&&(Ra=Fn.invoke(Vn,Ra),Vn(Tr,".",la,"=",Ra,";"))})}var en=xr.static[Yr];if(en&&ta(en)){var nn=Xt.global,pn=Object.keys(en),rn=!1,wr=!1,Ir=!1,Tr=Xt.global.def("{}");pn.forEach(function(Fn){var Vn=en[Fn];if(fe.isDynamic(Vn))typeof Vn=="function"&&(Vn=en[Fn]=fe.unbox(Vn)),Fn=V(Vn,null),rn=rn||Fn.thisDep,Ir=Ir||Fn.propDep,wr=wr||Fn.contextDep;else{switch(nn(Tr,".",Fn,"="),typeof Vn){case"number":nn(Vn);break;case"string":nn('"',Vn,'"');break;case"object":Array.isArray(Vn)&&nn("[",Vn.join(),"]");break;default:nn(Xt.link(Vn))}nn(";")}}),xr.dynamic[Yr]=new fe.DynamicVariable(4,{thisDep:rn,contextDep:wr,propDep:Ir,ref:Tr,append:cn}),delete xr.static[Yr]}}var Wa=_t.Record,ei={add:32774,subtract:32778,"reverse subtract":32779};Je.ext_blend_minmax&&(ei.min=32775,ei.max=32776);var dr=Je.angle_instanced_arrays,an=Je.webgl_draw_buffers,Kr={dirty:!0,profile:Bt.profile},Rn={},Gn=[],Sa={},ha={};er("dither",3024),er("blend.enable",3042),qt("blend.color","blendColor",[0,0,0,0]),qt("blend.equation","blendEquationSeparate",[32774,32774]),qt("blend.func","blendFuncSeparate",[1,0,1,0]),er("depth.enable",2929,!0),qt("depth.func","depthFunc",513),qt("depth.range","depthRange",[0,1]),qt("depth.mask","depthMask",!0),qt("colorMask","colorMask",[!0,!0,!0,!0]),er("cull.enable",2884),qt("cull.face","cullFace",1029),qt("frontFace","frontFace",2305),qt("lineWidth","lineWidth",1),er("polygonOffset.enable",32823),qt("polygonOffset.offset","polygonOffset",[0,0]),er("sample.alpha",32926),er("sample.enable",32928),qt("sample.coverage","sampleCoverage",[1,!1]),er("stencil.enable",2960),qt("stencil.mask","stencilMask",-1),qt("stencil.func","stencilFunc",[519,0,-1]),qt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),qt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),er("scissor.enable",3089),qt("scissor.box","scissor",[0,0,Ge.drawingBufferWidth,Ge.drawingBufferHeight]),qt("viewport","viewport",[0,0,Ge.drawingBufferWidth,Ge.drawingBufferHeight]);var Aa={gl:Ge,context:Dt,strings:ot,next:Rn,current:Kr,draw:wt,elements:Ft,buffer:It,shader:Mt,attributes:_t.state,vao:_t,uniforms:Fe,framebuffer:We,extensions:Je,timer:Rt,isBufferArgs:te},ka={primTypes:Ae,compareFuncs:Ie,blendFuncs:Me,blendEquations:ei,stencilOps:He,glTypes:je,orientationType:Xe};an&&(ka.backBuffer=[1029],ka.drawBuffer=i(st.maxDrawbuffers,function(Xt){return Xt===0?[0]:i(Xt,function(xr){return 36064+xr})}));var Za=0;return{next:Rn,current:Kr,procs:function(){var Xt=Zt(),xr=Xt.proc("poll"),Yr=Xt.proc("refresh"),cn=Xt.block();xr(cn),Yr(cn);var en=Xt.shared,nn=en.gl,pn=en.next,rn=en.current;cn(rn,".dirty=false;"),xn(Xt,xr),xn(Xt,Yr,null,!0);var wr;dr&&(wr=Xt.link(dr)),Je.oes_vertex_array_object&&Yr(Xt.link(Je.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Ir=0;Ir<st.maxAttributes;++Ir){var Tr=Yr.def(en.attributes,"[",Ir,"]"),Fn=Xt.cond(Tr,".buffer");Fn.then(nn,".enableVertexAttribArray(",Ir,");",nn,".bindBuffer(",34962,",",Tr,".buffer.buffer);",nn,".vertexAttribPointer(",Ir,",",Tr,".size,",Tr,".type,",Tr,".normalized,",Tr,".stride,",Tr,".offset);").else(nn,".disableVertexAttribArray(",Ir,");",nn,".vertexAttrib4f(",Ir,",",Tr,".x,",Tr,".y,",Tr,".z,",Tr,".w);",Tr,".buffer=null;"),Yr(Fn),dr&&Yr(wr,".vertexAttribDivisorANGLE(",Ir,",",Tr,".divisor);")}return Yr(Xt.shared.vao,".currentVAO=null;",Xt.shared.vao,".setVAO(",Xt.shared.vao,".targetVAO);"),Object.keys(Sa).forEach(function(Vn){var la=Sa[Vn],Ra=cn.def(pn,".",Vn),oa=Xt.block();oa("if(",Ra,"){",nn,".enable(",la,")}else{",nn,".disable(",la,")}",rn,".",Vn,"=",Ra,";"),Yr(oa),xr("if(",Ra,"!==",rn,".",Vn,"){",oa,"}")}),Object.keys(ha).forEach(function(Vn){var la=ha[Vn],Ra=Kr[Vn],oa,ai,Ti=Xt.block();Ti(nn,".",la,"("),R(Ra)?(la=Ra.length,oa=Xt.global.def(pn,".",Vn),ai=Xt.global.def(rn,".",Vn),Ti(i(la,function(Ui){return oa+"["+Ui+"]"}),");",i(la,function(Ui){return ai+"["+Ui+"]="+oa+"["+Ui+"];"}).join("")),xr("if(",i(la,function(Ui){return oa+"["+Ui+"]!=="+ai+"["+Ui+"]"}).join("||"),"){",Ti,"}")):(oa=cn.def(pn,".",Vn),ai=cn.def(rn,".",Vn),Ti(oa,");",rn,".",Vn,"=",oa,";"),xr("if(",oa,"!==",ai,"){",Ti,"}")),Yr(Ti)}),Xt.compile()}(),compile:function(Xt,xr,Yr,cn,en){var nn=Zt();return nn.stats=nn.link(en),Object.keys(xr.static).forEach(function(pn){ba(nn,xr,pn)}),et.forEach(function(pn){ba(nn,Xt,pn)}),Yr=Ln(Xt,xr,Yr,cn,nn),Vr(nn,Yr),ra(nn,Yr),Cn(nn,Yr),nn.compile()}}}function re(Ge,ot){for(var Je=0;Je<Ge.length;++Je)if(Ge[Je]===ot)return Je;return-1}var ee=function(Ge,ot){for(var Je=Object.keys(ot),st=0;st<Je.length;++st)Ge[Je[st]]=ot[Je[st]];return Ge},ae=0,fe={DynamicVariable:r,define:function(Ge,ot){return new r(Ge,l(ot+""))},isDynamic:function(Ge){return typeof Ge=="function"&&!Ge._reglType||Ge instanceof r},unbox:function(Ge,ot){return typeof Ge=="function"?new r(0,Ge):Ge},accessor:l},de={next:typeof requestAnimationFrame=="function"?function(Ge){return requestAnimationFrame(Ge)}:function(Ge){return setTimeout(Ge,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ge){return cancelAnimationFrame(Ge)}:clearTimeout},pe=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},W=p();W.zero=p();var ue=function(Ge,ot){var Je=1;ot.ext_texture_filter_anisotropic&&(Je=Ge.getParameter(34047));var st=1,It=1;ot.webgl_draw_buffers&&(st=Ge.getParameter(34852),It=Ge.getParameter(36063));var Ft=!!ot.oes_texture_float;if(Ft){Ft=Ge.createTexture(),Ge.bindTexture(3553,Ft),Ge.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var nr=Ge.createFramebuffer();if(Ge.bindFramebuffer(36160,nr),Ge.framebufferTexture2D(36160,36064,3553,Ft,0),Ge.bindTexture(3553,null),Ge.checkFramebufferStatus(36160)!==36053)Ft=!1;else{Ge.viewport(0,0,1,1),Ge.clearColor(1,0,0,1),Ge.clear(16384);var We=W.allocType(5126,4);Ge.readPixels(0,0,1,1,6408,5126,We),Ge.getError()?Ft=!1:(Ge.deleteFramebuffer(nr),Ge.deleteTexture(Ft),Ft=We[0]===1),W.freeType(We)}}return We=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(We=Ge.createTexture(),nr=W.allocType(5121,36),Ge.activeTexture(33984),Ge.bindTexture(34067,We),Ge.texImage2D(34069,0,6408,3,3,0,6408,5121,nr),W.freeType(nr),Ge.bindTexture(34067,null),Ge.deleteTexture(We),We=!Ge.getError()),{colorBits:[Ge.getParameter(3410),Ge.getParameter(3411),Ge.getParameter(3412),Ge.getParameter(3413)],depthBits:Ge.getParameter(3414),stencilBits:Ge.getParameter(3415),subpixelBits:Ge.getParameter(3408),extensions:Object.keys(ot).filter(function(Fe){return!!ot[Fe]}),maxAnisotropic:Je,maxDrawbuffers:st,maxColorAttachments:It,pointSizeDims:Ge.getParameter(33901),lineWidthDims:Ge.getParameter(33902),maxViewportDims:Ge.getParameter(3386),maxCombinedTextureUnits:Ge.getParameter(35661),maxCubeMapSize:Ge.getParameter(34076),maxRenderbufferSize:Ge.getParameter(34024),maxTextureUnits:Ge.getParameter(34930),maxTextureSize:Ge.getParameter(3379),maxAttributes:Ge.getParameter(34921),maxVertexUniforms:Ge.getParameter(36347),maxVertexTextureUnits:Ge.getParameter(35660),maxVaryingVectors:Ge.getParameter(36348),maxFragmentUniforms:Ge.getParameter(36349),glsl:Ge.getParameter(35724),renderer:Ge.getParameter(7937),vendor:Ge.getParameter(7936),version:Ge.getParameter(7938),readFloat:Ft,npotTextureCube:We}},me=function(Ge){return Ge instanceof Uint8Array||Ge instanceof Uint16Array||Ge instanceof Uint32Array||Ge instanceof Int8Array||Ge instanceof Int16Array||Ge instanceof Int32Array||Ge instanceof Float32Array||Ge instanceof Float64Array||Ge instanceof Uint8ClampedArray},be=function(Ge){return Object.keys(Ge).map(function(ot){return Ge[ot]})},ke={shape:function(Ge){for(var ot=[];Ge.length;Ge=Ge[0])ot.push(Ge.length);return ot},flatten:function(Ge,ot,Je,st){var It=1;if(ot.length)for(var Ft=0;Ft<ot.length;++Ft)It*=ot[Ft];else It=0;switch(Je=st||W.allocType(Je,It),ot.length){case 0:break;case 1:for(st=ot[0],ot=0;ot<st;++ot)Je[ot]=Ge[ot];break;case 2:for(st=ot[0],ot=ot[1],Ft=It=0;Ft<st;++Ft)for(var nr=Ge[Ft],We=0;We<ot;++We)Je[It++]=nr[We];break;case 3:y(Ge,ot[0],ot[1],ot[2],Je,0);break;default:b(Ge,ot,0,Je,0)}return Je}},Pe={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},je={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ze={dynamic:35048,stream:35040,static:35044},Ze=ke.flatten,tt=ke.shape,Ce=[];Ce[5120]=1,Ce[5122]=2,Ce[5124]=4,Ce[5121]=1,Ce[5123]=2,Ce[5125]=4,Ce[5126]=4;var Ae={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ne=new Float32Array(1),qe=new Uint32Array(Ne.buffer),At=[9984,9986,9985,9987],kt=[0,6409,6410,6407,6408],Ve={};Ve[6409]=Ve[6406]=Ve[6402]=1,Ve[34041]=Ve[6410]=2,Ve[6407]=Ve[35904]=3,Ve[6408]=Ve[35906]=4;var ft=L("HTMLCanvasElement"),St=L("OffscreenCanvas"),Wt=L("CanvasRenderingContext2D"),Qt=L("ImageBitmap"),zt=L("HTMLImageElement"),$t=L("HTMLVideoElement"),rr=Object.keys(Pe).concat([ft,St,Wt,Qt,zt,$t]),Pt=[];Pt[5121]=1,Pt[5126]=4,Pt[36193]=2,Pt[5123]=2,Pt[5125]=4;var Lt=[];Lt[32854]=2,Lt[32855]=2,Lt[36194]=2,Lt[34041]=4,Lt[33776]=.5,Lt[33777]=.5,Lt[33778]=1,Lt[33779]=1,Lt[35986]=.5,Lt[35987]=1,Lt[34798]=1,Lt[35840]=.5,Lt[35841]=.25,Lt[35842]=.5,Lt[35843]=.25,Lt[36196]=.5;var dt=[];dt[32854]=2,dt[32855]=2,dt[36194]=2,dt[33189]=2,dt[36168]=1,dt[34041]=4,dt[35907]=4,dt[34836]=16,dt[34842]=8,dt[34843]=6;var lt=function(Ge,ot,Je,st,It){function Ft(wt){this.id=_t++,this.refCount=1,this.renderbuffer=wt,this.format=32854,this.height=this.width=0,It.profile&&(this.stats={size:0})}function nr(wt){var Dt=wt.renderbuffer;Ge.bindRenderbuffer(36161,null),Ge.deleteRenderbuffer(Dt),wt.renderbuffer=null,wt.refCount=0,delete Mt[wt.id],st.renderbufferCount--}var We={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};ot.ext_srgb&&(We.srgba=35907),ot.ext_color_buffer_half_float&&(We.rgba16f=34842,We.rgb16f=34843),ot.webgl_color_buffer_float&&(We.rgba32f=34836);var Fe=[];Object.keys(We).forEach(function(wt){Fe[We[wt]]=wt});var _t=0,Mt={};return Ft.prototype.decRef=function(){0>=--this.refCount&&nr(this)},It.profile&&(st.getTotalRenderbufferSize=function(){var wt=0;return Object.keys(Mt).forEach(function(Dt){wt+=Mt[Dt].stats.size}),wt}),{create:function(wt,Dt){function Rt(Nt,er){var qt=0,Zt=0,_r=32854;if(typeof Nt=="object"&&Nt?("shape"in Nt?(Zt=Nt.shape,qt=Zt[0]|0,Zt=Zt[1]|0):("radius"in Nt&&(qt=Zt=Nt.radius|0),"width"in Nt&&(qt=Nt.width|0),"height"in Nt&&(Zt=Nt.height|0)),"format"in Nt&&(_r=We[Nt.format])):typeof Nt=="number"?(qt=Nt|0,Zt=typeof er=="number"?er|0:qt):Nt||(qt=Zt=1),qt!==Bt.width||Zt!==Bt.height||_r!==Bt.format)return Rt.width=Bt.width=qt,Rt.height=Bt.height=Zt,Bt.format=_r,Ge.bindRenderbuffer(36161,Bt.renderbuffer),Ge.renderbufferStorage(36161,_r,qt,Zt),It.profile&&(Bt.stats.size=dt[Bt.format]*Bt.width*Bt.height),Rt.format=Fe[Bt.format],Rt}var Bt=new Ft(Ge.createRenderbuffer());return Mt[Bt.id]=Bt,st.renderbufferCount++,Rt(wt,Dt),Rt.resize=function(Nt,er){var qt=Nt|0,Zt=er|0||qt;return qt===Bt.width&&Zt===Bt.height||(Rt.width=Bt.width=qt,Rt.height=Bt.height=Zt,Ge.bindRenderbuffer(36161,Bt.renderbuffer),Ge.renderbufferStorage(36161,Bt.format,qt,Zt),It.profile&&(Bt.stats.size=dt[Bt.format]*Bt.width*Bt.height)),Rt},Rt._reglType="renderbuffer",Rt._renderbuffer=Bt,It.profile&&(Rt.stats=Bt.stats),Rt.destroy=function(){Bt.decRef()},Rt},clear:function(){be(Mt).forEach(nr)},restore:function(){be(Mt).forEach(function(wt){wt.renderbuffer=Ge.createRenderbuffer(),Ge.bindRenderbuffer(36161,wt.renderbuffer),Ge.renderbufferStorage(36161,wt.format,wt.width,wt.height)}),Ge.bindRenderbuffer(36161,null)}}},Te=[];Te[6408]=4,Te[6407]=3;var Le=[];Le[5121]=1,Le[5126]=4,Le[36193]=2;var Be=["x","y","z","w"],et="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Me={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ie={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},He={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Xe={cw:2304,ccw:2305},ht=new oe(!1,!1,!1,function(){}),it=function(Ge,ot){function Je(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function st(Mt,wt,Dt){var Rt=nr.pop()||new Je;Rt.startQueryIndex=Mt,Rt.endQueryIndex=wt,Rt.sum=0,Rt.stats=Dt,We.push(Rt)}if(!ot.ext_disjoint_timer_query)return null;var It=[],Ft=[],nr=[],We=[],Fe=[],_t=[];return{beginQuery:function(Mt){var wt=It.pop()||ot.ext_disjoint_timer_query.createQueryEXT();ot.ext_disjoint_timer_query.beginQueryEXT(35007,wt),Ft.push(wt),st(Ft.length-1,Ft.length,Mt)},endQuery:function(){ot.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:st,update:function(){var Mt,wt;if(Mt=Ft.length,Mt!==0){_t.length=Math.max(_t.length,Mt+1),Fe.length=Math.max(Fe.length,Mt+1),Fe[0]=0;var Dt=_t[0]=0;for(wt=Mt=0;wt<Ft.length;++wt){var Rt=Ft[wt];ot.ext_disjoint_timer_query.getQueryObjectEXT(Rt,34919)?(Dt+=ot.ext_disjoint_timer_query.getQueryObjectEXT(Rt,34918),It.push(Rt)):Ft[Mt++]=Rt,Fe[wt+1]=Dt,_t[wt+1]=Mt}for(Ft.length=Mt,wt=Mt=0;wt<We.length;++wt){var Dt=We[wt],Bt=Dt.startQueryIndex,Rt=Dt.endQueryIndex;Dt.sum+=Fe[Rt]-Fe[Bt],Bt=_t[Bt],Rt=_t[Rt],Rt===Bt?(Dt.stats.gpuTime+=Dt.sum/1e6,nr.push(Dt)):(Dt.startQueryIndex=Bt,Dt.endQueryIndex=Rt,We[Mt++]=Dt)}We.length=Mt}},getNumPendingQueries:function(){return Ft.length},clear:function(){It.push.apply(It,Ft);for(var Mt=0;Mt<It.length;Mt++)ot.ext_disjoint_timer_query.deleteQueryEXT(It[Mt]);Ft.length=0,It.length=0},restore:function(){Ft.length=0,It.length=0}}};return function(Ge){function ot(){if(Sn.length===0)Zt&&Zt.update(),cr=null;else{cr=de.next(ot),Mt();for(var Wr=Sn.length-1;0<=Wr;--Wr){var Vr=Sn[Wr];Vr&&Vr(Or,null,0)}Rt.flush(),Zt&&Zt.update()}}function Je(){!cr&&0<Sn.length&&(cr=de.next(ot))}function st(){cr&&(de.cancel(ot),cr=null)}function It(Wr){Wr.preventDefault(),st(),un.forEach(function(Vr){Vr()})}function Ft(Wr){Rt.getError(),Nt.restore(),jn.restore(),Yn.restore(),Nr.restore(),Lr.restore(),Ln.restore(),An.restore(),Zt&&Zt.restore(),dn.procs.refresh(),Je(),vt.forEach(function(Vr){Vr()})}function nr(Wr){function Vr(an){var Kr={},Rn={};return Object.keys(an).forEach(function(Gn){var Sa=an[Gn];fe.isDynamic(Sa)?Rn[Gn]=fe.unbox(Sa,Gn):Kr[Gn]=Sa}),{dynamic:Rn,static:Kr}}function Qr(an){for(;dr.length<an;)dr.push(null);return dr}var ta=Vr(Wr.context||{}),Hr=Vr(Wr.uniforms||{}),Cn=Vr(Wr.attributes||{}),ra=Vr(function(an){function Kr(Gn){if(Gn in Rn){var Sa=Rn[Gn];delete Rn[Gn],Object.keys(Sa).forEach(function(ha){Rn[Gn+"."+ha]=Sa[ha]})}}var Rn=ee({},an);return delete Rn.uniforms,delete Rn.attributes,delete Rn.context,delete Rn.vao,"stencil"in Rn&&Rn.stencil.op&&(Rn.stencil.opBack=Rn.stencil.opFront=Rn.stencil.op,delete Rn.stencil.op),Kr("blend"),Kr("depth"),Kr("cull"),Kr("stencil"),Kr("polygonOffset"),Kr("scissor"),Kr("sample"),"vao"in an&&(Rn.vao=an.vao),Rn}(Wr));Wr={gpuTime:0,cpuTime:0,count:0};var ta=dn.compile(ra,Cn,Hr,ta,Wr),ba=ta.draw,Wa=ta.batch,ei=ta.scope,dr=[];return ee(function(an,Kr){var Rn;if(typeof an=="function")return ei.call(this,null,an,0);if(typeof Kr=="function")if(typeof an=="number")for(Rn=0;Rn<an;++Rn)ei.call(this,null,Kr,Rn);else if(Array.isArray(an))for(Rn=0;Rn<an.length;++Rn)ei.call(this,an[Rn],Kr,Rn);else return ei.call(this,an,Kr,0);else if(typeof an=="number"){if(0<an)return Wa.call(this,Qr(an|0),an|0)}else if(Array.isArray(an)){if(an.length)return Wa.call(this,an,an.length)}else return ba.call(this,an)},{stats:Wr})}function We(Wr,Vr){var Qr=0;dn.procs.poll();var Hr=Vr.color;Hr&&(Rt.clearColor(+Hr[0]||0,+Hr[1]||0,+Hr[2]||0,+Hr[3]||0),Qr|=16384),"depth"in Vr&&(Rt.clearDepth(+Vr.depth),Qr|=256),"stencil"in Vr&&(Rt.clearStencil(Vr.stencil|0),Qr|=1024),Rt.clear(Qr)}function Fe(Wr){return Sn.push(Wr),Je(),{cancel:function(){function Vr(){var Hr=re(Sn,Vr);Sn[Hr]=Sn[Sn.length-1],--Sn.length,0>=Sn.length&&st()}var Qr=re(Sn,Wr);Sn[Qr]=Vr}}}function _t(){var Wr=tn.viewport,Vr=tn.scissor_box;Wr[0]=Wr[1]=Vr[0]=Vr[1]=0,Or.viewportWidth=Or.framebufferWidth=Or.drawingBufferWidth=Wr[2]=Vr[2]=Rt.drawingBufferWidth,Or.viewportHeight=Or.framebufferHeight=Or.drawingBufferHeight=Wr[3]=Vr[3]=Rt.drawingBufferHeight}function Mt(){Or.tick+=1,Or.time=Dt(),_t(),dn.procs.poll()}function wt(){_t(),dn.procs.refresh(),Zt&&Zt.update()}function Dt(){return(pe()-_r)/1e3}if(Ge=u(Ge),!Ge)return null;var Rt=Ge.gl,Bt=Rt.getContextAttributes();Rt.isContextLost();var Nt=h(Rt,Ge);if(!Nt)return null;var xn=c(),er={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},qt=Nt.extensions,Zt=it(Rt,qt),_r=pe(),Gr=Rt.drawingBufferWidth,zr=Rt.drawingBufferHeight,Or={tick:0,time:0,viewportWidth:Gr,viewportHeight:zr,framebufferWidth:Gr,framebufferHeight:zr,drawingBufferWidth:Gr,drawingBufferHeight:zr,pixelRatio:Ge.pixelRatio},Mn=ue(Rt,qt),Yn=g(Rt,er,Ge,function(Wr){return An.destroyBuffer(Wr)}),An=X(Rt,qt,Mn,er,Yn),Bn=A(Rt,qt,Yn,er),jn=I(Rt,xn,er,Ge),Nr=N(Rt,qt,Mn,function(){dn.procs.poll()},Or,er,Ge),Lr=lt(Rt,qt,Mn,er,Ge),Ln=G(Rt,qt,Mn,Nr,Lr,er),dn=se(Rt,xn,qt,Mn,Yn,Bn,Nr,Ln,{},An,jn,{elements:null,primitive:4,count:-1,offset:0,instances:-1},Or,Zt,Ge),xn=B(Rt,Ln,dn.procs.poll,Or),tn=dn.next,wn=Rt.canvas,Sn=[],un=[],vt=[],Gt=[Ge.onDestroy],cr=null;wn&&(wn.addEventListener("webglcontextlost",It,!1),wn.addEventListener("webglcontextrestored",Ft,!1));var Er=Ln.setFBO=nr({framebuffer:fe.define.call(null,1,"framebuffer")});return wt(),Bt=ee(nr,{clear:function(Wr){if("framebuffer"in Wr)if(Wr.framebuffer&&Wr.framebuffer_reglType==="framebufferCube")for(var Vr=0;6>Vr;++Vr)Er(ee({framebuffer:Wr.framebuffer.faces[Vr]},Wr),We);else Er(Wr,We);else We(null,Wr)},prop:fe.define.bind(null,1),context:fe.define.bind(null,2),this:fe.define.bind(null,3),draw:nr({}),buffer:function(Wr){return Yn.create(Wr,34962,!1,!1)},elements:function(Wr){return Bn.create(Wr,!1)},texture:Nr.create2D,cube:Nr.createCube,renderbuffer:Lr.create,framebuffer:Ln.create,framebufferCube:Ln.createCube,vao:An.createVAO,attributes:Bt,frame:Fe,on:function(Wr,Vr){var Qr;switch(Wr){case"frame":return Fe(Vr);case"lost":Qr=un;break;case"restore":Qr=vt;break;case"destroy":Qr=Gt}return Qr.push(Vr),{cancel:function(){for(var Hr=0;Hr<Qr.length;++Hr)if(Qr[Hr]===Vr){Qr[Hr]=Qr[Qr.length-1],Qr.pop();break}}}},limits:Mn,hasExtension:function(Wr){return 0<=Mn.extensions.indexOf(Wr.toLowerCase())},read:xn,destroy:function(){Sn.length=0,st(),wn&&(wn.removeEventListener("webglcontextlost",It),wn.removeEventListener("webglcontextrestored",Ft)),jn.clear(),Ln.clear(),Lr.clear(),Nr.clear(),Bn.clear(),Yn.clear(),An.clear(),Zt&&Zt.clear(),Gt.forEach(function(Wr){Wr()})},_gl:Rt,_refresh:wt,poll:function(){Mt(),Zt&&Zt.update()},now:Dt,stats:er}),Ge.onDone(null,Bt),Bt}})},{}],541:[function(e,v,M){var r="",n;v.exports=l;function l(c,t){if(typeof c!="string")throw new TypeError("expected a string");if(t===1)return c;if(t===2)return c+c;var f=c.length*t;if(n!==c||typeof n>"u")n=c,r="";else if(r.length>=f)return r.substr(0,f);for(;f>r.length&&t>1;)t&1&&(r+=c),t>>=1,c+=c;return r+=c,r=r.substr(0,f),r}},{}],542:[function(e,v,M){(function(r){(function(){v.exports=r.performance&&r.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{})},{}],543:[function(e,v,M){v.exports=r;function r(n){for(var l=n.length,c=n[n.length-1],t=l,f=l-2;f>=0;--f){var a=c,o=n[f];c=a+o;var u=c-a,h=o-u;h&&(n[--t]=c,c=h)}for(var i=0,f=t;f<l;++f){var a=n[f],o=c;c=a+o;var u=c-a,h=o-u;h&&(n[i++]=h)}return n[i++]=c,n.length=i,n}},{}],544:[function(e,v,M){var r=e("two-product"),n=e("robust-sum"),l=e("robust-scale"),c=e("robust-compress"),t=6;function f(d,y){for(var b=new Array(d.length-1),m=1;m<d.length;++m)for(var _=b[m-1]=new Array(d.length-1),T=0,g=0;T<d.length;++T)T!==y&&(_[g++]=d[m][T]);return b}function a(d){for(var y=new Array(d),b=0;b<d;++b){y[b]=new Array(d);for(var m=0;m<d;++m)y[b][m]=["m[",b,"][",m,"]"].join("")}return y}function o(d){return d&1?"-":""}function u(d){if(d.length===1)return d[0];if(d.length===2)return["sum(",d[0],",",d[1],")"].join("");var y=d.length>>1;return["sum(",u(d.slice(0,y)),",",u(d.slice(y)),")"].join("")}function h(d){if(d.length===2)return["sum(prod(",d[0][0],",",d[1][1],"),prod(-",d[0][1],",",d[1][0],"))"].join("");for(var y=[],b=0;b<d.length;++b)y.push(["scale(",h(f(d,b)),",",o(b),d[0][b],")"].join(""));return u(y)}function i(d){var y=new Function("sum","scale","prod","compress",["function robustDeterminant",d,"(m){return compress(",h(a(d)),")};return robustDeterminant",d].join(""));return y(n,l,r,c)}var s=[function(){return[0]},function(y){return[y[0][0]]}];function p(){for(;s.length<t;)s.push(i(s.length));for(var d=[],y=["function robustDeterminant(m){switch(m.length){"],b=0;b<t;++b)d.push("det"+b),y.push("case ",b,":return det",b,"(m);");y.push("}	var det=CACHE[m.length];	if(!det)	det=CACHE[m.length]=gen(m.length);	return det(m);	}	return robustDeterminant"),d.push("CACHE","gen",y.join(""));var m=Function.apply(void 0,d);v.exports=m.apply(void 0,s.concat([s,i]));for(var b=0;b<s.length;++b)v.exports[b]=s[b]}p()},{"robust-compress":543,"robust-scale":550,"robust-sum":553,"two-product":582}],545:[function(e,v,M){var r=e("two-product"),n=e("robust-sum");v.exports=l;function l(c,t){for(var f=r(c[0],t[0]),a=1;a<c.length;++a)f=n(f,r(c[a],t[a]));return f}},{"robust-sum":553,"two-product":582}],546:[function(e,v,M){var r=e("two-product"),n=e("robust-sum"),l=e("robust-subtract"),c=e("robust-scale"),t=6;function f(g,A){for(var k=new Array(g.length-1),R=1;R<g.length;++R)for(var L=k[R-1]=new Array(g.length-1),z=0,E=0;z<g.length;++z)z!==A&&(L[E++]=g[R][z]);return k}function a(g){for(var A=new Array(g),k=0;k<g;++k){A[k]=new Array(g);for(var R=0;R<g;++R)A[k][R]=["m",R,"[",g-k-2,"]"].join("")}return A}function o(g){if(g.length===1)return g[0];if(g.length===2)return["sum(",g[0],",",g[1],")"].join("");var A=g.length>>1;return["sum(",o(g.slice(0,A)),",",o(g.slice(A)),")"].join("")}function u(g,A){if(g.charAt(0)==="m")if(A.charAt(0)==="w"){var k=g.split("[");return["w",A.substr(1),"m",k[0].substr(1)].join("")}else return["prod(",g,",",A,")"].join("");else return u(A,g)}function h(g){return g&!0?"-":""}function i(g){if(g.length===2)return[["diff(",u(g[0][0],g[1][1]),",",u(g[1][0],g[0][1]),")"].join("")];for(var A=[],k=0;k<g.length;++k)A.push(["scale(",o(i(f(g,k))),",",h(k),g[0][k],")"].join(""));return A}function s(g,A){for(var k=[],R=0;R<A-2;++R)k.push(["prod(m",g,"[",R,"],m",g,"[",R,"])"].join(""));return o(k)}function p(g){for(var A=[],k=[],R=a(g),L=0;L<g;++L)R[0][L]="1",R[g-1][L]="w"+L;for(var L=0;L<g;++L)L&1?k.push.apply(k,i(f(R,L))):A.push.apply(A,i(f(R,L)));for(var z=o(A),E=o(k),S="exactInSphere"+g,C=[],L=0;L<g;++L)C.push("m"+L);for(var D=["function ",S,"(",C.join(),"){"],L=0;L<g;++L){D.push("var w",L,"=",s(L,g),";");for(var F=0;F<g;++F)F!==L&&D.push("var w",L,"m",F,"=scale(w",L,",m",F,"[0]);")}D.push("var p=",z,",n=",E,",d=diff(p,n);return d[d.length-1];}return ",S);var N=new Function("sum","diff","prod","scale",D.join(""));return N(n,l,r,c)}function d(){return 0}function y(){return 0}function b(){return 0}var m=[d,y,b];function _(g){var A=m[g.length];return A||(A=m[g.length]=p(g.length)),A.apply(void 0,g)}function T(){for(;m.length<=t;)m.push(p(m.length));for(var g=[],A=["slow"],k=0;k<=t;++k)g.push("a"+k),A.push("o"+k);for(var R=["function testInSphere(",g.join(),"){switch(arguments.length){case 0:case 1:return 0;"],k=2;k<=t;++k)R.push("case ",k,":return o",k,"(",g.slice(0,k).join(),");");R.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),A.push(R.join(""));var L=Function.apply(void 0,A);v.exports=L.apply(void 0,[_].concat(m));for(var k=0;k<=t;++k)v.exports[k]=m[k]}T()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":582}],547:[function(e,v,M){var r=e("robust-determinant"),n=6;function l(o){for(var u="robustLinearSolve"+o+"d",h=["function ",u,"(A,b){return ["],i=0;i<o;++i){h.push("det([");for(var s=0;s<o;++s){s>0&&h.push(","),h.push("[");for(var p=0;p<o;++p)p>0&&h.push(","),p===i?h.push("+b[",s,"]"):h.push("+A[",s,"][",p,"]");h.push("]")}h.push("]),")}h.push("det(A)]}return ",u);var d=new Function("det",h.join(""));return o<6?d(r[o]):d(r)}function c(){return[0]}function t(o,u){return[[u[0]],[o[0][0]]]}var f=[c,t];function a(){for(;f.length<n;)f.push(l(f.length));for(var o=[],u=["function dispatchLinearSolve(A,b){switch(A.length){"],h=0;h<n;++h)o.push("s"+h),u.push("case ",h,":return s",h,"(A,b);");u.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),o.push("CACHE","g",u.join(""));var i=Function.apply(void 0,o);v.exports=i.apply(void 0,f.concat([f,l]));for(var h=0;h<n;++h)v.exports[h]=f[h]}a()},{"robust-determinant":544}],548:[function(e,v,M){var r=e("two-product"),n=e("robust-sum"),l=e("robust-scale"),c=e("robust-subtract"),t=5,f=11102230246251565e-32,a=(3+16*f)*f,o=(7+56*f)*f;function u(g,A){for(var k=new Array(g.length-1),R=1;R<g.length;++R)for(var L=k[R-1]=new Array(g.length-1),z=0,E=0;z<g.length;++z)z!==A&&(L[E++]=g[R][z]);return k}function h(g){for(var A=new Array(g),k=0;k<g;++k){A[k]=new Array(g);for(var R=0;R<g;++R)A[k][R]=["m",R,"[",g-k-1,"]"].join("")}return A}function i(g){return g&1?"-":""}function s(g){if(g.length===1)return g[0];if(g.length===2)return["sum(",g[0],",",g[1],")"].join("");var A=g.length>>1;return["sum(",s(g.slice(0,A)),",",s(g.slice(A)),")"].join("")}function p(g){if(g.length===2)return[["sum(prod(",g[0][0],",",g[1][1],"),prod(-",g[0][1],",",g[1][0],"))"].join("")];for(var A=[],k=0;k<g.length;++k)A.push(["scale(",s(p(u(g,k))),",",i(k),g[0][k],")"].join(""));return A}function d(g){for(var A=[],k=[],R=h(g),L=[],z=0;z<g;++z)z&1?k.push.apply(k,p(u(R,z))):A.push.apply(A,p(u(R,z))),L.push("m"+z);var E=s(A),S=s(k),C="orientation"+g+"Exact",D=["function ",C,"(",L.join(),"){var p=",E,",n=",S,",d=sub(p,n);	return d[d.length-1];};return ",C].join(""),F=new Function("sum","prod","scale","sub",D);return F(n,r,l,c)}var y=d(3),b=d(4),m=[function(){return 0},function(){return 0},function(A,k){return k[0]-A[0]},function(A,k,R){var L=(A[1]-R[1])*(k[0]-R[0]),z=(A[0]-R[0])*(k[1]-R[1]),E=L-z,S;if(L>0){if(z<=0)return E;S=L+z}else if(L<0){if(z>=0)return E;S=-(L+z)}else return E;var C=a*S;return E>=C||E<=-C?E:y(A,k,R)},function(A,k,R,L){var z=A[0]-L[0],E=k[0]-L[0],S=R[0]-L[0],C=A[1]-L[1],D=k[1]-L[1],F=R[1]-L[1],N=A[2]-L[2],G=k[2]-L[2],U=R[2]-L[2],X=E*F,I=S*D,B=S*C,j=z*F,H=z*D,K=E*C,te=N*(X-I)+G*(B-j)+U*(H-K),J=(Math.abs(X)+Math.abs(I))*Math.abs(N)+(Math.abs(B)+Math.abs(j))*Math.abs(G)+(Math.abs(H)+Math.abs(K))*Math.abs(U),oe=o*J;return te>oe||-te>oe?te:b(A,k,R,L)}];function _(g){var A=m[g.length];return A||(A=m[g.length]=d(g.length)),A.apply(void 0,g)}function T(){for(;m.length<=t;)m.push(d(m.length));for(var g=[],A=["slow"],k=0;k<=t;++k)g.push("a"+k),A.push("o"+k);for(var R=["function getOrientation(",g.join(),"){switch(arguments.length){case 0:case 1:return 0;"],k=2;k<=t;++k)R.push("case ",k,":return o",k,"(",g.slice(0,k).join(),");");R.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),A.push(R.join(""));var L=Function.apply(void 0,A);v.exports=L.apply(void 0,[_].concat(m));for(var k=0;k<=t;++k)v.exports[k]=m[k]}T()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":582}],549:[function(e,v,M){var r=e("robust-sum"),n=e("robust-scale");v.exports=l;function l(c,t){if(c.length===1)return n(t,c[0]);if(t.length===1)return n(c,t[0]);if(c.length===0||t.length===0)return[0];var f=[0];if(c.length<t.length)for(var a=0;a<c.length;++a)f=r(f,n(t,c[a]));else for(var a=0;a<t.length;++a)f=r(f,n(c,t[a]));return f}},{"robust-scale":550,"robust-sum":553}],550:[function(e,v,M){var r=e("two-product"),n=e("two-sum");v.exports=l;function l(c,t){var f=c.length;if(f===1){var a=r(c[0],t);return a[0]?a:[a[1]]}var o=new Array(2*f),u=[.1,.1],h=[.1,.1],i=0;r(c[0],t,u),u[0]&&(o[i++]=u[0]);for(var s=1;s<f;++s){r(c[s],t,h);var p=u[1];n(p,h[0],u),u[0]&&(o[i++]=u[0]);var d=h[1],y=u[1],b=d+y,m=b-d,_=y-m;u[1]=b,_&&(o[i++]=_)}return u[1]&&(o[i++]=u[1]),i===0&&(o[i++]=0),o.length=i,o}},{"two-product":582,"two-sum":583}],551:[function(e,v,M){v.exports=l;var r=e("robust-orientation")[3];function n(c,t,f,a){for(var o=0;o<2;++o){var u=c[o],h=t[o],i=Math.min(u,h),s=Math.max(u,h),p=f[o],d=a[o],y=Math.min(p,d),b=Math.max(p,d);if(b<i||s<y)return!1}return!0}function l(c,t,f,a){var o=r(c,f,a),u=r(t,f,a);if(o>0&&u>0||o<0&&u<0)return!1;var h=r(f,c,t),i=r(a,c,t);return h>0&&i>0||h<0&&i<0?!1:o===0&&u===0&&h===0&&i===0?n(c,t,f,a):!0}},{"robust-orientation":548}],552:[function(e,v,M){v.exports=n;function r(l,c){var t=l+c,f=t-l,a=t-f,o=c-f,u=l-a,h=u+o;return h?[h,t]:[t]}function n(l,c){var t=l.length|0,f=c.length|0;if(t===1&&f===1)return r(l[0],-c[0]);var a=t+f,o=new Array(a),u=0,h=0,i=0,s=Math.abs,p=l[h],d=s(p),y=-c[i],b=s(y),m,_;d<b?(_=p,h+=1,h<t&&(p=l[h],d=s(p))):(_=y,i+=1,i<f&&(y=-c[i],b=s(y))),h<t&&d<b||i>=f?(m=p,h+=1,h<t&&(p=l[h],d=s(p))):(m=y,i+=1,i<f&&(y=-c[i],b=s(y)));for(var T=m+_,g=T-m,A=_-g,k=A,R=T,L,z,E,S,C;h<t&&i<f;)d<b?(m=p,h+=1,h<t&&(p=l[h],d=s(p))):(m=y,i+=1,i<f&&(y=-c[i],b=s(y))),_=k,T=m+_,g=T-m,A=_-g,A&&(o[u++]=A),L=R+T,z=L-R,E=L-z,S=T-z,C=R-E,k=C+S,R=L;for(;h<t;)m=p,_=k,T=m+_,g=T-m,A=_-g,A&&(o[u++]=A),L=R+T,z=L-R,E=L-z,S=T-z,C=R-E,k=C+S,R=L,h+=1,h<t&&(p=l[h]);for(;i<f;)m=y,_=k,T=m+_,g=T-m,A=_-g,A&&(o[u++]=A),L=R+T,z=L-R,E=L-z,S=T-z,C=R-E,k=C+S,R=L,i+=1,i<f&&(y=-c[i]);return k&&(o[u++]=k),R&&(o[u++]=R),u||(o[u++]=0),o.length=u,o}},{}],553:[function(e,v,M){v.exports=n;function r(l,c){var t=l+c,f=t-l,a=t-f,o=c-f,u=l-a,h=u+o;return h?[h,t]:[t]}function n(l,c){var t=l.length|0,f=c.length|0;if(t===1&&f===1)return r(l[0],c[0]);var a=t+f,o=new Array(a),u=0,h=0,i=0,s=Math.abs,p=l[h],d=s(p),y=c[i],b=s(y),m,_;d<b?(_=p,h+=1,h<t&&(p=l[h],d=s(p))):(_=y,i+=1,i<f&&(y=c[i],b=s(y))),h<t&&d<b||i>=f?(m=p,h+=1,h<t&&(p=l[h],d=s(p))):(m=y,i+=1,i<f&&(y=c[i],b=s(y)));for(var T=m+_,g=T-m,A=_-g,k=A,R=T,L,z,E,S,C;h<t&&i<f;)d<b?(m=p,h+=1,h<t&&(p=l[h],d=s(p))):(m=y,i+=1,i<f&&(y=c[i],b=s(y))),_=k,T=m+_,g=T-m,A=_-g,A&&(o[u++]=A),L=R+T,z=L-R,E=L-z,S=T-z,C=R-E,k=C+S,R=L;for(;h<t;)m=p,_=k,T=m+_,g=T-m,A=_-g,A&&(o[u++]=A),L=R+T,z=L-R,E=L-z,S=T-z,C=R-E,k=C+S,R=L,h+=1,h<t&&(p=l[h]);for(;i<f;)m=y,_=k,T=m+_,g=T-m,A=_-g,A&&(o[u++]=A),L=R+T,z=L-R,E=L-z,S=T-z,C=R-E,k=C+S,R=L,i+=1,i<f&&(y=c[i]);return k&&(o[u++]=k),R&&(o[u++]=R),u||(o[u++]=0),o.length=u,o}},{}],554:[function(e,v,M){v.exports=function(n){return n<0?-1:n>0?1:0}},{}],555:[function(e,v,M){v.exports=l;var r=e("boundary-cells"),n=e("reduce-simplicial-complex");function l(c){return n(r(c))}},{"boundary-cells":100,"reduce-simplicial-complex":533}],556:[function(e,v,M){v.exports=i;var r=e("ndarray"),n=e("typedarray-pool"),l=e("ndarray-sort"),c=e("./lib/codegen");function t(s){for(var p=s.length,d=0,y=0;y<p;++y)d=Math.max(d,s[y].length)|0;return d-1}function f(s,p){for(var d=s.length,y=n.mallocUint8(d),b=0;b<d;++b)y[b]=s[b]<p|0;return y}function a(s,p){for(var d=s.length,y=p*(p+1)/2*d|0,b=n.mallocUint32(y*2),m=0,_=0;_<d;++_)for(var T=s[_],p=T.length,g=0;g<p;++g)for(var A=0;A<g;++A){var k=T[A],R=T[g];b[m++]=Math.min(k,R)|0,b[m++]=Math.max(k,R)|0}var L=m/2|0;l(r(b,[L,2]));for(var z=2,_=2;_<m;_+=2)b[_-2]===b[_]&&b[_-1]===b[_+1]||(b[z++]=b[_],b[z++]=b[_+1]);return r(b,[z/2|0,2])}function o(s,p,d,y){for(var b=s.data,m=s.shape[0],_=n.mallocDouble(m),T=0,g=0;g<m;++g){var A=b[2*g],k=b[2*g+1];if(d[A]!==d[k]){var R=p[A],L=p[k];b[2*T]=A,b[2*T+1]=k,_[T++]=(L-y)/(L-R)}}return s.shape[0]=T,r(_,[T])}function u(s,p){var d=n.mallocInt32(p*2),y=s.shape[0],b=s.data;d[0]=0;for(var m=0,_=0;_<y;++_){var T=b[2*_];if(T!==m){for(d[2*m+1]=_;++m<T;)d[2*m]=_,d[2*m+1]=_;d[2*m]=_}}for(d[2*m+1]=y;++m<p;)d[2*m]=d[2*m+1]=y;return d}function h(s){for(var p=s.shape[0]|0,d=s.data,y=new Array(p),b=0;b<p;++b)y[b]=[d[2*b],d[2*b+1]];return y}function i(s,p,d,y){d=d||0,typeof y>"u"&&(y=t(s));var b=s.length;if(b===0||y<1)return{cells:[],vertexIds:[],vertexWeights:[]};var m=f(p,+d),_=a(s,y),T=o(_,p,m,+d),g=u(_,p.length|0),A=c(y)(s,_.data,g,m),k=h(_),R=[].slice.call(T.data,0,T.shape[0]);return n.free(m),n.free(_.data),n.free(T.data),n.free(g),{cells:A,vertexIds:k,vertexWeights:R}}},{"./lib/codegen":557,ndarray:495,"ndarray-sort":494,"typedarray-pool":595}],557:[function(e,v,M){v.exports=t;var r=e("typedarray-pool"),n=e("marching-simplex-table"),l={};function c(f){var a=0,o=new Array(f+1);o[0]=[[]];for(var u=1;u<=f;++u)for(var h=o[u]=n(u),i=0;i<h.length;++i)a=Math.max(a,h[u].length);var s=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",f,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"];function p(b){if(!(b.length<=0)){s.push("R.push(");for(var m=0;m<b.length;++m){var _=b[m];m>0&&s.push(","),s.push("[");for(var T=0;T<_.length;++T){var g=_[T];T>0&&s.push(","),s.push("B(C,E,c[",g[0],"],c[",g[1],"])")}s.push("]")}s.push(");")}}for(var u=f+1;u>1;--u){u<f+1&&s.push("else "),s.push("if(l===",u,"){");for(var d=[],i=0;i<u;++i)d.push("(S[c["+i+"]]<<"+i+")");s.push("var M=",d.join("+"),";if(M===0||M===",(1<<u)-1,"){continue}switch(M){");for(var h=o[u-1],i=0;i<h.length;++i)s.push("case ",i,":"),p(h[i]),s.push("break;");s.push("}}")}s.push("}return R;};return getContour",f,"d");var y=new Function("pool",s.join(""));return y(r)}function t(f){var a=l[f];return a||(a=l[f]=c(f)),a}},{"marching-simplex-table":474,"typedarray-pool":595}],558:[function(e,v,M){var r=e("bit-twiddle"),n=e("union-find");function l(T){for(var g=0,A=Math.max,k=0,R=T.length;k<R;++k)g=A(g,T[k].length);return g-1}M.dimension=l;function c(T){for(var g=-1,A=Math.max,k=0,R=T.length;k<R;++k)for(var L=T[k],z=0,E=L.length;z<E;++z)g=A(g,L[z]);return g+1}M.countVertices=c;function t(T){for(var g=new Array(T.length),A=0,k=T.length;A<k;++A)g[A]=T[A].slice(0);return g}M.cloneCells=t;function f(T,g){var A=T.length,k=T.length-g.length,R=Math.min;if(k)return k;switch(A){case 0:return 0;case 1:return T[0]-g[0];case 2:var C=T[0]+T[1]-g[0]-g[1];return C||R(T[0],T[1])-R(g[0],g[1]);case 3:var L=T[0]+T[1],z=g[0]+g[1];if(C=L+T[2]-(z+g[2]),C)return C;var E=R(T[0],T[1]),S=R(g[0],g[1]),C=R(E,T[2])-R(S,g[2]);return C||R(E+T[2],L)-R(S+g[2],z);default:var D=T.slice(0);D.sort();var F=g.slice(0);F.sort();for(var N=0;N<A;++N)if(k=D[N]-F[N],k)return k;return 0}}M.compareCells=f;function a(T,g){return f(T[0],g[0])}function o(T,g){if(g){for(var A=T.length,k=new Array(A),R=0;R<A;++R)k[R]=[T[R],g[R]];k.sort(a);for(var R=0;R<A;++R)T[R]=k[R][0],g[R]=k[R][1];return T}else return T.sort(f),T}M.normalize=o;function u(T){if(T.length===0)return[];for(var g=1,A=T.length,k=1;k<A;++k){var R=T[k];if(f(R,T[k-1])){if(k===g){g++;continue}T[g++]=R}}return T.length=g,T}M.unique=u;function h(T,g){for(var A=0,k=T.length-1,R=-1;A<=k;){var L=A+k>>1,z=f(T[L],g);z<=0?(z===0&&(R=L),A=L+1):z>0&&(k=L-1)}return R}M.findCell=h;function i(T,g){for(var A=new Array(T.length),k=0,R=A.length;k<R;++k)A[k]=[];for(var L=[],k=0,z=g.length;k<z;++k)for(var E=g[k],S=E.length,C=1,D=1<<S;C<D;++C){L.length=r.popCount(C);for(var F=0,N=0;N<S;++N)C&1<<N&&(L[F++]=E[N]);var G=h(T,L);if(!(G<0))for(;A[G++].push(k),!(G>=T.length||f(T[G],L)!==0););}return A}M.incidence=i;function s(T,g){if(!g)return i(u(d(T,0)),T);for(var A=new Array(g),k=0;k<g;++k)A[k]=[];for(var k=0,R=T.length;k<R;++k)for(var L=T[k],z=0,E=L.length;z<E;++z)A[L[z]].push(k);return A}M.dual=s;function p(T){for(var g=[],A=0,k=T.length;A<k;++A)for(var R=T[A],L=R.length|0,z=1,E=1<<L;z<E;++z){for(var S=[],C=0;C<L;++C)z>>>C&1&&S.push(R[C]);g.push(S)}return o(g)}M.explode=p;function d(T,g){if(g<0)return[];for(var A=[],k=(1<<g+1)-1,R=0;R<T.length;++R)for(var L=T[R],z=k;z<1<<L.length;z=r.nextCombination(z)){for(var E=new Array(g+1),S=0,C=0;C<L.length;++C)z&1<<C&&(E[S++]=L[C]);A.push(E)}return o(A)}M.skeleton=d;function y(T){for(var g=[],A=0,k=T.length;A<k;++A)for(var R=T[A],L=0,z=R.length;L<z;++L){for(var E=new Array(R.length-1),S=0,C=0;S<z;++S)S!==L&&(E[C++]=R[S]);g.push(E)}return o(g)}M.boundary=y;function b(T,g){for(var A=new n(g),k=0;k<T.length;++k)for(var R=T[k],L=0;L<R.length;++L)for(var z=L+1;z<R.length;++z)A.link(R[L],R[z]);for(var E=[],S=A.ranks,k=0;k<S.length;++k)S[k]=-1;for(var k=0;k<T.length;++k){var C=A.find(T[k][0]);S[C]<0?(S[C]=E.length,E.push([T[k].slice(0)])):E[S[C]].push(T[k].slice(0))}return E}function m(T){for(var g=u(o(d(T,0))),A=new n(g.length),k=0;k<T.length;++k)for(var R=T[k],L=0;L<R.length;++L)for(var z=h(g,[R[L]]),E=L+1;E<R.length;++E)A.link(z,h(g,[R[E]]));for(var S=[],C=A.ranks,k=0;k<C.length;++k)C[k]=-1;for(var k=0;k<T.length;++k){var D=A.find(h(g,[T[k][0]]));C[D]<0?(C[D]=S.length,S.push([T[k].slice(0)])):S[C[D]].push(T[k].slice(0))}return S}function _(T,g){return g?b(T,g):m(T)}M.connectedComponents=_},{"bit-twiddle":97,"union-find":596}],559:[function(e,v,M){arguments[4][97][0].apply(M,arguments)},{dup:97}],560:[function(e,v,M){arguments[4][558][0].apply(M,arguments)},{"bit-twiddle":559,dup:558,"union-find":561}],561:[function(e,v,M){v.exports=r;function r(n){this.roots=new Array(n),this.ranks=new Array(n);for(var l=0;l<n;++l)this.roots[l]=l,this.ranks[l]=0}r.prototype.length=function(){return this.roots.length},r.prototype.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},r.prototype.find=function(n){for(var l=this.roots;l[n]!==n;){var c=l[n];l[n]=l[c],n=c}return n},r.prototype.link=function(n,l){var c=this.find(n),t=this.find(l);if(c!==t){var f=this.ranks,a=this.roots,o=f[c],u=f[t];o<u?a[c]=t:u<o?a[t]=c:(a[t]=c,++f[c])}}},{}],562:[function(e,v,M){v.exports=c;var r=e("robust-orientation"),n=e("simplicial-complex");function l(t,f,a){var o=Math.abs(r(t,f,a)),u=Math.sqrt(Math.pow(f[0]-a[0],2)+Math.pow(f[1]-a[1],2));return o/u}function c(t,f,a){for(var o=f.length,u=t.length,h=new Array(o),i=new Array(o),s=new Array(o),p=new Array(o),d=0;d<o;++d)h[d]=i[d]=-1,s[d]=1/0,p[d]=!1;for(var d=0;d<u;++d){var y=t[d];if(y.length!==2)throw new Error("Input must be a graph");var b=y[1],m=y[0];i[m]!==-1?i[m]=-2:i[m]=b,h[b]!==-1?h[b]=-2:h[b]=m}function _(I){if(p[I])return 1/0;var B=h[I],j=i[I];return B<0||j<0?1/0:l(f[I],f[B],f[j])}function T(I,B){var j=S[I],H=S[B];S[I]=H,S[B]=j,C[j]=B,C[H]=I}function g(I){return s[S[I]]}function A(I){return I&1?I-1>>1:(I>>1)-1}function k(I){for(var B=g(I);;){var j=B,H=2*I+1,K=2*(I+1),te=I;if(H<F){var J=g(H);J<j&&(te=H,j=J)}if(K<F){var oe=g(K);oe<j&&(te=K)}if(te===I)return I;T(I,te),I=te}}function R(I){for(var B=g(I);I>0;){var j=A(I);if(j>=0){var H=g(j);if(B<H){T(I,j),I=j;continue}}return I}}function L(){if(F>0){var I=S[0];return T(0,F-1),F-=1,k(0),I}return-1}function z(I,B){var j=S[I];return s[j]===B?I:(s[j]=-1/0,R(I),L(),s[j]=B,F+=1,R(F-1))}function E(I){if(!p[I]){p[I]=!0;var B=h[I],j=i[I];h[j]>=0&&(h[j]=B),i[B]>=0&&(i[B]=j),C[B]>=0&&z(C[B],_(B)),C[j]>=0&&z(C[j],_(j))}}for(var S=[],C=new Array(o),d=0;d<o;++d){var D=s[d]=_(d);D<1/0?(C[d]=S.length,S.push(d)):C[d]=-1}for(var F=S.length,d=F>>1;d>=0;--d)k(d);for(;;){var N=L();if(N<0||s[N]>a)break;E(N)}for(var G=[],d=0;d<o;++d)p[d]||(C[d]=G.length,G.push(f[d].slice()));G.length;function U(I,B){if(I[B]<0)return B;var j=B,H=B;do{var K=I[H];if(!p[H]||K<0||K===H||(H=K,K=I[H],!p[H]||K<0||K===H))break;H=K,j=I[j]}while(j!==H);for(var te=B;te!==H;te=I[te])I[te]=H;return H}var X=[];return t.forEach(function(I){var B=U(h,I[0]),j=U(i,I[1]);if(B>=0&&j>=0&&B!==j){var H=C[B],K=C[j];H!==K&&X.push([H,K])}}),n.unique(n.normalize(X)),{positions:G,edges:X}}},{"robust-orientation":548,"simplicial-complex":560}],563:[function(e,v,M){v.exports=l;var r=e("robust-orientation");function n(c,t){var f,a;if(t[0][0]<t[1][0])f=t[0],a=t[1];else if(t[0][0]>t[1][0])f=t[1],a=t[0];else{var o=Math.min(c[0][1],c[1][1]),u=Math.max(c[0][1],c[1][1]),h=Math.min(t[0][1],t[1][1]),i=Math.max(t[0][1],t[1][1]);return u<h?u-h:o>i?o-i:u-i}var s,p;c[0][1]<c[1][1]?(s=c[0],p=c[1]):(s=c[1],p=c[0]);var d=r(a,f,s);return d||(d=r(a,f,p),d)?d:p-a}function l(c,t){var f,a;if(t[0][0]<t[1][0])f=t[0],a=t[1];else if(t[0][0]>t[1][0])f=t[1],a=t[0];else return n(t,c);var o,u;if(c[0][0]<c[1][0])o=c[0],u=c[1];else if(c[0][0]>c[1][0])o=c[1],u=c[0];else return-n(c,t);var h=r(f,a,u),i=r(f,a,o);if(h<0){if(i<=0)return h}else if(h>0){if(i>=0)return h}else if(i)return i;if(h=r(u,o,a),i=r(u,o,f),h<0){if(i<=0)return h}else if(h>0){if(i>=0)return h}else if(i)return i;return a[0]-u[0]}},{"robust-orientation":548}],564:[function(e,v,M){arguments[4][243][0].apply(M,arguments)},{dup:243}],565:[function(e,v,M){v.exports=i;var r=e("binary-search-bounds"),n=e("functional-red-black-tree"),l=e("robust-orientation"),c=e("./lib/order-segments");function t(s,p,d){this.slabs=s,this.coordinates=p,this.horizontal=d}var f=t.prototype;function a(s,p){return s.y-p}function o(s,p){for(var d=null;s;){var y=s.key,b,m;y[0][0]<y[1][0]?(b=y[0],m=y[1]):(b=y[1],m=y[0]);var _=l(b,m,p);if(_<0)s=s.left;else if(_>0)if(p[0]!==y[1][0])d=s,s=s.right;else{var T=o(s.right,p);if(T)return T;s=s.left}else{if(p[0]!==y[1][0])return s;var T=o(s.right,p);if(T)return T;s=s.left}}return d}f.castUp=function(s){var p=r.le(this.coordinates,s[0]);if(p<0)return-1;this.slabs[p];var d=o(this.slabs[p],s),y=-1;if(d&&(y=d.value),this.coordinates[p]===s[0]){var b=null;if(d&&(b=d.key),p>0){var m=o(this.slabs[p-1],s);m&&(b?c(m.key,b)>0&&(b=m.key,y=m.value):(y=m.value,b=m.key))}var _=this.horizontal[p];if(_.length>0){var T=r.ge(_,s[1],a);if(T<_.length){var g=_[T];if(s[1]===g.y){if(g.closed)return g.index;for(;T<_.length-1&&_[T+1].y===s[1];)if(T=T+1,g=_[T],g.closed)return g.index;if(g.y===s[1]&&!g.start){if(T=T+1,T>=_.length)return y;g=_[T]}}if(g.start)if(b){var A=l(b[0],b[1],[s[0],g.y]);b[0][0]>b[1][0]&&(A=-A),A>0&&(y=g.index)}else y=g.index;else g.y!==s[1]&&(y=g.index)}}}return y};function u(s,p,d,y){this.y=s,this.index=p,this.start=d,this.closed=y}function h(s,p,d,y){this.x=s,this.segment=p,this.create=d,this.index=y}function i(s){for(var p=s.length,d=2*p,y=new Array(d),b=0;b<p;++b){var m=s[b],_=m[0][0]<m[1][0];y[2*b]=new h(m[0][0],m,_,b),y[2*b+1]=new h(m[1][0],m,!_,b)}y.sort(function(E,S){var C=E.x-S.x;return C||(C=E.create-S.create,C)?C:Math.min(E.segment[0][1],E.segment[1][1])-Math.min(S.segment[0][1],S.segment[1][1])});for(var T=n(c),g=[],A=[],k=[],b=0;b<d;){for(var R=y[b].x,L=[];b<d;){var z=y[b];if(z.x!==R)break;b+=1,z.segment[0][0]===z.x&&z.segment[1][0]===z.x?z.create&&(z.segment[0][1]<z.segment[1][1]?(L.push(new u(z.segment[0][1],z.index,!0,!0)),L.push(new u(z.segment[1][1],z.index,!1,!1))):(L.push(new u(z.segment[1][1],z.index,!0,!1)),L.push(new u(z.segment[0][1],z.index,!1,!0)))):z.create?T=T.insert(z.segment,z.index):T=T.remove(z.segment)}g.push(T.root),A.push(R),k.push(L)}return new t(g,A,k)}},{"./lib/order-segments":563,"binary-search-bounds":564,"functional-red-black-tree":247,"robust-orientation":548}],566:[function(e,v,M){var r=e("robust-dot-product"),n=e("robust-sum");v.exports=t,v.exports.positive=f,v.exports.negative=a;function l(o,u){var h=n(r(o,u),[u[u.length-1]]);return h[h.length-1]}function c(o,u,h,i){var s=i-u,p=-u/s;p<0?p=0:p>1&&(p=1);for(var d=1-p,y=o.length,b=new Array(y),m=0;m<y;++m)b[m]=p*o[m]+d*h[m];return b}function t(o,u){for(var h=[],i=[],s=l(o[o.length-1],u),p=o[o.length-1],d=o[0],y=0;y<o.length;++y,p=d){d=o[y];var b=l(d,u);if(s<0&&b>0||s>0&&b<0){var m=c(p,b,d,s);h.push(m),i.push(m.slice())}b<0?i.push(d.slice()):b>0?h.push(d.slice()):(h.push(d.slice()),i.push(d.slice())),s=b}return{positive:h,negative:i}}function f(o,u){for(var h=[],i=l(o[o.length-1],u),s=o[o.length-1],p=o[0],d=0;d<o.length;++d,s=p){p=o[d];var y=l(p,u);(i<0&&y>0||i>0&&y<0)&&h.push(c(s,y,p,i)),y>=0&&h.push(p.slice()),i=y}return h}function a(o,u){for(var h=[],i=l(o[o.length-1],u),s=o[o.length-1],p=o[0],d=0;d<o.length;++d,s=p){p=o[d];var y=l(p,u);(i<0&&y>0||i>0&&y<0)&&h.push(c(s,y,p,i)),y<=0&&h.push(p.slice()),i=y}return h}},{"robust-dot-product":545,"robust-sum":553}],567:[function(e,v,M){(function(){var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(a){return c(f(a),arguments)}function l(a,o){return n.apply(null,[a].concat(o||[]))}function c(a,o){var u=1,h=a.length,i,s="",p,d,y,b,m,_,T,g;for(p=0;p<h;p++)if(typeof a[p]=="string")s+=a[p];else if(typeof a[p]=="object"){if(y=a[p],y.keys)for(i=o[u],d=0;d<y.keys.length;d++){if(i==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',y.keys[d],y.keys[d-1]));i=i[y.keys[d]]}else y.param_no?i=o[y.param_no]:i=o[u++];if(r.not_type.test(y.type)&&r.not_primitive.test(y.type)&&i instanceof Function&&(i=i()),r.numeric_arg.test(y.type)&&typeof i!="number"&&isNaN(i))throw new TypeError(n("[sprintf] expecting number but found %T",i));switch(r.number.test(y.type)&&(T=i>=0),y.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,y.width?parseInt(y.width):0);break;case"e":i=y.precision?parseFloat(i).toExponential(y.precision):parseFloat(i).toExponential();break;case"f":i=y.precision?parseFloat(i).toFixed(y.precision):parseFloat(i);break;case"g":i=y.precision?String(Number(i.toPrecision(y.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=y.precision?i.substring(0,y.precision):i;break;case"t":i=String(!!i),i=y.precision?i.substring(0,y.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=y.precision?i.substring(0,y.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=y.precision?i.substring(0,y.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase();break}r.json.test(y.type)?s+=i:(r.number.test(y.type)&&(!T||y.sign)?(g=T?"+":"-",i=i.toString().replace(r.sign,"")):g="",m=y.pad_char?y.pad_char==="0"?"0":y.pad_char.charAt(1):" ",_=y.width-(g+i).length,b=y.width&&_>0?m.repeat(_):"",s+=y.align?g+i+b:m==="0"?g+b+i:b+g+i)}return s}var t=Object.create(null);function f(a){if(t[a])return t[a];for(var o=a,u,h=[],i=0;o;){if((u=r.text.exec(o))!==null)h.push(u[0]);else if((u=r.modulo.exec(o))!==null)h.push("%");else if((u=r.placeholder.exec(o))!==null){if(u[2]){i|=1;var s=[],p=u[2],d=[];if((d=r.key.exec(p))!==null)for(s.push(d[1]);(p=p.substring(d[0].length))!=="";)if((d=r.key_access.exec(p))!==null)s.push(d[1]);else if((d=r.index_access.exec(p))!==null)s.push(d[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");u[2]=s}else i|=2;if(i===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");h.push({placeholder:u[0],param_no:u[1],keys:u[2],sign:u[3],pad_char:u[4],align:u[5],width:u[6],precision:u[7],type:u[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");o=o.substring(u[0].length)}return t[a]=h}typeof M<"u"&&(M.sprintf=n,M.vsprintf=l),typeof window<"u"&&(window.sprintf=n,window.vsprintf=l)})()},{}],568:[function(e,v,M){var r=e("parenthesis");v.exports=function(l,c,t){if(l==null)throw Error("First argument should be a string");if(c==null)throw Error("Separator should be a string or a RegExp");t?(typeof t=="string"||Array.isArray(t))&&(t={ignore:t}):t={},t.escape==null&&(t.escape=!0),t.ignore==null?t.ignore=["[]","()","{}","<>",'""',"''","``","“”","«»"]:(typeof t.ignore=="string"&&(t.ignore=[t.ignore]),t.ignore=t.ignore.map(function(p){return p.length===1&&(p=p+p),p}));var f=r.parse(l,{flat:!0,brackets:t.ignore}),a=f[0],o=a.split(c);if(t.escape){for(var u=[],h=0;h<o.length;h++){var i=o[h],s=o[h+1];i[i.length-1]==="\\"&&i[i.length-2]!=="\\"?(u.push(i+c+s),h++):u.push(i)}o=u}for(var h=0;h<o.length;h++)f[0]=o[h],o[h]=r.stringify(f,{flat:!0});return o}},{parenthesis:503}],569:[function(e,v,M){v.exports=r;function r(n){for(var l=n.length,c=new Array(l),t=new Array(l),f=new Array(l),a=new Array(l),o=new Array(l),u=new Array(l),h=0;h<l;++h)c[h]=-1,t[h]=0,f[h]=!1,a[h]=0,o[h]=-1,u[h]=[];var i=0,s=[],p=[];function d(_){var T=[_],g=[_];for(c[_]=t[_]=i,f[_]=!0,i+=1;g.length>0;){_=g[g.length-1];var A=n[_];if(a[_]<A.length){for(var k=a[_];k<A.length;++k){var R=A[k];if(c[R]<0){c[R]=t[R]=i,f[R]=!0,i+=1,T.push(R),g.push(R);break}else f[R]&&(t[_]=Math.min(t[_],t[R])|0);o[R]>=0&&u[_].push(o[R])}a[_]=k}else{if(t[_]===c[_]){for(var L=[],z=[],E=0,k=T.length-1;k>=0;--k){var S=T[k];if(f[S]=!1,L.push(S),z.push(u[S]),E+=u[S].length,o[S]=s.length,S===_){T.length=k;break}}s.push(L);for(var C=new Array(E),k=0;k<z.length;k++)for(var D=0;D<z[k].length;D++)C[--E]=z[k][D];p.push(C)}g.pop()}}}for(var h=0;h<l;++h)c[h]<0&&d(h);for(var y,h=0;h<p.length;h++){var b=p[h];if(b.length!==0){b.sort(function(T,g){return T-g}),y=[b[0]];for(var m=1;m<b.length;m++)b[m]!==b[m-1]&&y.push(b[m]);p[h]=y}}return{components:s,adjacencyList:p}}},{}],570:[function(e,v,M){v.exports=a;var r=e("ndarray-extract-contour"),n=e("triangulate-hypercube"),l=e("zero-crossings");function c(o,u){var h=o.length,i=["'use strict';"],s="surfaceNets"+o.join("_")+"d"+u;i.push("var contour=genContour({","order:[",o.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),u==="generic"&&i.push("getters:[0],");for(var p=[],d=[],y=0;y<h;++y)p.push("d"+y),d.push("d"+y);for(var y=0;y<1<<h;++y)p.push("v"+y),d.push("v"+y);for(var y=0;y<1<<h;++y)p.push("p"+y),d.push("p"+y);p.push("a","b","c"),d.push("a","c"),i.push("vertex:function vertexFunc(",p.join(),"){");for(var b=[],y=0;y<1<<h;++y)b.push("(p"+y+"<<"+y+")");i.push("var m=(",b.join("+"),")|0;if(m===0||m===",(1<<(1<<h))-1,"){return}");var m=[],_=[];1<<(1<<h)<=128?(i.push("switch(m){"),_=i):i.push("switch(m>>>7){");for(var y=0;y<1<<(1<<h);++y){if(1<<(1<<h)>128&&y%128===0){m.length>0&&_.push("}}");var T="vExtra"+m.length;i.push("case ",y>>>7,":",T,"(m&0x7f,",d.join(),");break;"),_=["function ",T,"(m,",d.join(),"){switch(m){"],m.push(_)}_.push("case ",y&127,":");for(var g=new Array(h),A=new Array(h),k=new Array(h),R=new Array(h),L=0,z=0;z<h;++z)g[z]=[],A[z]=[],k[z]=0,R[z]=0;for(var z=0;z<1<<h;++z)for(var E=0;E<h;++E){var S=z^1<<E;if(!(S>z)&&!(y&1<<S)!=!(y&1<<z)){var C=1;y&1<<S?A[E].push("v"+S+"-v"+z):(A[E].push("v"+z+"-v"+S),C=-C),C<0?(g[E].push("-v"+z+"-v"+S),k[E]+=2):(g[E].push("v"+z+"+v"+S),k[E]-=2),L+=1;for(var D=0;D<h;++D)D!==E&&(S&1<<D?R[D]+=1:R[D]-=1)}}for(var F=[],E=0;E<h;++E)if(g[E].length===0)F.push("d"+E+"-0.5");else{var N="";k[E]<0?N=k[E]+"*c":k[E]>0&&(N="+"+k[E]+"*c");var G=.5*(g[E].length/L),U=.5+.5*(R[E]/L);F.push("d"+E+"-"+U+"-"+G+"*("+g[E].join("+")+N+")/("+A[E].join("+")+")")}_.push("a.push([",F.join(),"]);","break;")}i.push("}},"),m.length>0&&_.push("}}");for(var X=[],y=0;y<1<<h-1;++y)X.push("v"+y);X.push("c0","c1","p0","p1","a","b","c"),i.push("cell:function cellFunc(",X.join(),"){");var I=n(h-1);i.push("if(p0){b.push(",I.map(function(j){return"["+j.map(function(H){return"v"+H})+"]"}).join(),")}else{b.push(",I.map(function(j){var H=j.slice();return H.reverse(),"["+H.map(function(K){return"v"+K})+"]"}).join(),")}}});function ",s,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",s,";");for(var y=0;y<m.length;++y)i.push(m[y].join(""));var B=new Function("genContour",i.join(""));return B(r)}function t(o,u){for(var h=l(o,u),i=h.length,s=new Array(i),p=new Array(i),d=0;d<i;++d)s[d]=[h[d]],p[d]=[d];return{positions:s,cells:p}}var f={};function a(o,s){if(o.dimension<=0)return{positions:[],cells:[]};if(o.dimension===1)return t(o,s);var h=o.order.join()+"-"+o.dtype,i=f[h],s=+s||0;return i||(i=f[h]=c(o.order,o.dtype)),i(o,s)}},{"ndarray-extract-contour":487,"triangulate-hypercube":580,"zero-crossings":624}],571:[function(e,v,M){Object.defineProperty(M,"__esModule",{value:!0});var r=function(){function o(u,h){var i=[],s=!0,p=!1,d=void 0;try{for(var y=u[Symbol.iterator](),b;!(s=(b=y.next()).done)&&(i.push(b.value),!(h&&i.length===h));s=!0);}catch(m){p=!0,d=m}finally{try{!s&&y.return&&y.return()}finally{if(p)throw d}}return i}return function(u,h){if(Array.isArray(u))return u;if(Symbol.iterator in Object(u))return o(u,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=Math.PI*2,l=function(u,h,i,s,p,d,y){var b=u.x,m=u.y;b*=h,m*=i;var _=s*b-p*m,T=p*b+s*m;return{x:_+d,y:T+y}},c=function(u,h){var i=h===1.5707963267948966?.551915024494:h===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(h/4),s=Math.cos(u),p=Math.sin(u),d=Math.cos(u+h),y=Math.sin(u+h);return[{x:s-p*i,y:p+s*i},{x:d+y*i,y:y-d*i},{x:d,y}]},t=function(u,h,i,s){var p=u*s-h*i<0?-1:1,d=u*i+h*s;return d>1&&(d=1),d<-1&&(d=-1),p*Math.acos(d)},f=function(u,h,i,s,p,d,y,b,m,_,T,g){var A=Math.pow(p,2),k=Math.pow(d,2),R=Math.pow(T,2),L=Math.pow(g,2),z=A*k-A*L-k*R;z<0&&(z=0),z/=A*L+k*R,z=Math.sqrt(z)*(y===b?-1:1);var E=z*p/d*g,S=z*-d/p*T,C=_*E-m*S+(u+i)/2,D=m*E+_*S+(h+s)/2,F=(T-E)/p,N=(g-S)/d,G=(-T-E)/p,U=(-g-S)/d,X=t(1,0,F,N),I=t(F,N,G,U);return b===0&&I>0&&(I-=n),b===1&&I<0&&(I+=n),[C,D,X,I]},a=function(u){var h=u.px,i=u.py,s=u.cx,p=u.cy,d=u.rx,y=u.ry,b=u.xAxisRotation,m=b===void 0?0:b,_=u.largeArcFlag,T=_===void 0?0:_,g=u.sweepFlag,A=g===void 0?0:g,k=[];if(d===0||y===0)return[];var R=Math.sin(m*n/360),L=Math.cos(m*n/360),z=L*(h-s)/2+R*(i-p)/2,E=-R*(h-s)/2+L*(i-p)/2;if(z===0&&E===0)return[];d=Math.abs(d),y=Math.abs(y);var S=Math.pow(z,2)/Math.pow(d,2)+Math.pow(E,2)/Math.pow(y,2);S>1&&(d*=Math.sqrt(S),y*=Math.sqrt(S));var C=f(h,i,s,p,d,y,T,A,R,L,z,E),D=r(C,4),F=D[0],N=D[1],G=D[2],U=D[3],X=Math.abs(U)/(n/4);Math.abs(1-X)<1e-7&&(X=1);var I=Math.max(Math.ceil(X),1);U/=I;for(var B=0;B<I;B++)k.push(c(G,U)),G+=U;return k.map(function(j){var H=l(j[0],d,y,L,R,F,N),K=H.x,te=H.y,J=l(j[1],d,y,L,R,F,N),oe=J.x,ie=J.y,Q=l(j[2],d,y,L,R,F,N),V=Q.x,se=Q.y;return{x1:K,y1:te,x2:oe,y2:ie,x:V,y:se}})};M.default=a,v.exports=M.default},{}],572:[function(e,v,M){var r=e("parse-svg-path"),n=e("abs-svg-path"),l=e("normalize-svg-path"),c=e("is-svg-path"),t=e("assert");v.exports=f;function f(a){if(Array.isArray(a)&&a.length===1&&typeof a[0]=="string"&&(a=a[0]),typeof a=="string"&&(t(c(a),"String is not an SVG path."),a=r(a)),t(Array.isArray(a),"Argument should be a string or an array of path segments."),a=n(a),a=l(a),!a.length)return[0,0,0,0];for(var o=[1/0,1/0,-1/0,-1/0],u=0,h=a.length;u<h;u++)for(var i=a[u].slice(1),s=0;s<i.length;s+=2)i[s+0]<o[0]&&(o[0]=i[s+0]),i[s+1]<o[1]&&(o[1]=i[s+1]),i[s+0]>o[2]&&(o[2]=i[s+0]),i[s+1]>o[3]&&(o[3]=i[s+1]);return o}},{"abs-svg-path":65,assert:73,"is-svg-path":471,"normalize-svg-path":573,"parse-svg-path":505}],573:[function(e,v,M){v.exports=n;var r=e("svg-arc-to-cubic-bezier");function n(t){for(var f,a=[],o=0,u=0,h=0,i=0,s=null,p=null,d=0,y=0,b=0,m=t.length;b<m;b++){var _=t[b],T=_[0];switch(T){case"M":h=_[1],i=_[2];break;case"A":var g=r({px:d,py:y,cx:_[6],cy:_[7],rx:_[1],ry:_[2],xAxisRotation:_[3],largeArcFlag:_[4],sweepFlag:_[5]});if(!g.length)continue;for(var A=0,k;A<g.length;A++)k=g[A],_=["C",k.x1,k.y1,k.x2,k.y2,k.x,k.y],A<g.length-1&&a.push(_);break;case"S":var R=d,L=y;(f=="C"||f=="S")&&(R+=R-o,L+=L-u),_=["C",R,L,_[1],_[2],_[3],_[4]];break;case"T":f=="Q"||f=="T"?(s=d*2-s,p=y*2-p):(s=d,p=y),_=c(d,y,s,p,_[1],_[2]);break;case"Q":s=_[1],p=_[2],_=c(d,y,_[1],_[2],_[3],_[4]);break;case"L":_=l(d,y,_[1],_[2]);break;case"H":_=l(d,y,_[1],y);break;case"V":_=l(d,y,d,_[1]);break;case"Z":_=l(d,y,h,i);break}f=T,d=_[_.length-2],y=_[_.length-1],_.length>4?(o=_[_.length-4],u=_[_.length-3]):(o=d,u=y),a.push(_)}return a}function l(t,f,a,o){return["C",t,f,a,o,a,o]}function c(t,f,a,o,u,h){return["C",t/3+2/3*a,f/3+2/3*o,u/3+2/3*a,h/3+2/3*o,u,h]}},{"svg-arc-to-cubic-bezier":571}],574:[function(e,v,M){var r=e("svg-path-bounds"),n=e("parse-svg-path"),l=e("draw-svg-path"),c=e("is-svg-path"),t=e("bitmap-sdf"),f=document.createElement("canvas"),a=f.getContext("2d");v.exports=o;function o(i,s){if(!c(i))throw Error("Argument should be valid svg path string");s||(s={});var p,d;s.shape?(p=s.shape[0],d=s.shape[1]):(p=f.width=s.w||s.width||200,d=f.height=s.h||s.height||200);var y=Math.min(p,d),b=s.stroke||0,m=s.viewbox||s.viewBox||r(i),_=[p/(m[2]-m[0]),d/(m[3]-m[1])],T=Math.min(_[0]||0,_[1]||0)/2;if(a.fillStyle="black",a.fillRect(0,0,p,d),a.fillStyle="white",b&&(typeof b!="number"&&(b=1),b>0?a.strokeStyle="white":a.strokeStyle="black",a.lineWidth=Math.abs(b)),a.translate(p*.5,d*.5),a.scale(T,T),h()){var g=new Path2D(i);a.fill(g),b&&a.stroke(g)}else{var A=n(i);l(a,A),a.fill(),b&&a.stroke()}a.setTransform(1,0,0,1,0,0);var k=t(a,{cutoff:s.cutoff!=null?s.cutoff:.5,radius:s.radius!=null?s.radius:y*.5});return k}var u;function h(){if(u!=null)return u;var i=document.createElement("canvas").getContext("2d");if(i.canvas.width=i.canvas.height=1,!window.Path2D)return u=!1;var s=new Path2D("M0,0h1v1h-1v-1Z");i.fillStyle="black",i.fill(s);var p=i.getImageData(0,0,1,1);return u=p&&p.data&&p.data[3]===255}},{"bitmap-sdf":98,"draw-svg-path":174,"is-svg-path":471,"parse-svg-path":505,"svg-path-bounds":572}],575:[function(e,v,M){(function(r){(function(){v.exports=f;var n=e("vectorize-text"),l=window||r.global||{},c=l.__TEXT_CACHE||{};l.__TEXT_CACHE={};function t(a){for(var o=a.cells,u=a.positions,h=new Float32Array(o.length*6),i=0,s=0,p=0;p<o.length;++p)for(var d=o[p],y=0;y<3;++y){var b=u[d[y]];h[i++]=b[0],h[i++]=b[1]+1.4,s=Math.max(b[0],s)}return{data:h,shape:s}}function f(a,o,h){var h=h||{},i=c[a];i||(i=c[a]={" ":{data:new Float32Array(0),shape:.2}});var s=i[o];if(!s)if(o.length<=1||!/\d/.test(o))s=i[o]=t(n(o,{triangles:!0,font:a,textAlign:h.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var p=o.split(/(\d|\s)/),d=new Array(p.length),y=0,b=0,m=0;m<p.length;++m)d[m]=f(a,p[m]),y+=d[m].data.length,b+=d[m].shape,m>0&&(b+=.02);for(var _=new Float32Array(y),T=0,g=-.5*b,m=0;m<d.length;++m){for(var A=d[m].data,k=0;k<A.length;k+=2)_[T++]=A[k]+g,_[T++]=A[k+1];g+=d[m].shape+.02}s=i[o]={data:_,shape:b}}return s}}).call(this)}).call(this,e("_process"))},{_process:526,"vectorize-text":600}],576:[function(e,v,M){(function(r){var n=/^\s+/,l=/\s+$/,c=0,t=r.round,f=r.min,a=r.max,o=r.random;function u(ae,fe){if(ae=ae||"",fe=fe||{},ae instanceof u)return ae;if(!(this instanceof u))return new u(ae,fe);var de=h(ae);this._originalInput=ae,this._r=de.r,this._g=de.g,this._b=de.b,this._a=de.a,this._roundA=t(100*this._a)/100,this._format=fe.format||de.format,this._gradientType=fe.gradientType,this._r<1&&(this._r=t(this._r)),this._g<1&&(this._g=t(this._g)),this._b<1&&(this._b=t(this._b)),this._ok=de.ok,this._tc_id=c++}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ae=this.toRgb();return(ae.r*299+ae.g*587+ae.b*114)/1e3},getLuminance:function(){var ae=this.toRgb(),fe,de,pe,W,ue,me;return fe=ae.r/255,de=ae.g/255,pe=ae.b/255,fe<=.03928?W=fe/12.92:W=r.pow((fe+.055)/1.055,2.4),de<=.03928?ue=de/12.92:ue=r.pow((de+.055)/1.055,2.4),pe<=.03928?me=pe/12.92:me=r.pow((pe+.055)/1.055,2.4),.2126*W+.7152*ue+.0722*me},setAlpha:function(ae){return this._a=I(ae),this._roundA=t(100*this._a)/100,this},toHsv:function(){var ae=d(this._r,this._g,this._b);return{h:ae.h*360,s:ae.s,v:ae.v,a:this._a}},toHsvString:function(){var ae=d(this._r,this._g,this._b),fe=t(ae.h*360),de=t(ae.s*100),pe=t(ae.v*100);return this._a==1?"hsv("+fe+", "+de+"%, "+pe+"%)":"hsva("+fe+", "+de+"%, "+pe+"%, "+this._roundA+")"},toHsl:function(){var ae=s(this._r,this._g,this._b);return{h:ae.h*360,s:ae.s,l:ae.l,a:this._a}},toHslString:function(){var ae=s(this._r,this._g,this._b),fe=t(ae.h*360),de=t(ae.s*100),pe=t(ae.l*100);return this._a==1?"hsl("+fe+", "+de+"%, "+pe+"%)":"hsla("+fe+", "+de+"%, "+pe+"%, "+this._roundA+")"},toHex:function(ae){return b(this._r,this._g,this._b,ae)},toHexString:function(ae){return"#"+this.toHex(ae)},toHex8:function(ae){return m(this._r,this._g,this._b,this._a,ae)},toHex8String:function(ae){return"#"+this.toHex8(ae)},toRgb:function(){return{r:t(this._r),g:t(this._g),b:t(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+t(this._r)+", "+t(this._g)+", "+t(this._b)+")":"rgba("+t(this._r)+", "+t(this._g)+", "+t(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:t(B(this._r,255)*100)+"%",g:t(B(this._g,255)*100)+"%",b:t(B(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+t(B(this._r,255)*100)+"%, "+t(B(this._g,255)*100)+"%, "+t(B(this._b,255)*100)+"%)":"rgba("+t(B(this._r,255)*100)+"%, "+t(B(this._g,255)*100)+"%, "+t(B(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:U[b(this._r,this._g,this._b,!0)]||!1},toFilter:function(ae){var fe="#"+_(this._r,this._g,this._b,this._a),de=fe,pe=this._gradientType?"GradientType = 1, ":"";if(ae){var W=u(ae);de="#"+_(W._r,W._g,W._b,W._a)}return"progid:DXImageTransform.Microsoft.gradient("+pe+"startColorstr="+fe+",endColorstr="+de+")"},toString:function(ae){var fe=!!ae;ae=ae||this._format;var de=!1,pe=this._a<1&&this._a>=0,W=!fe&&pe&&(ae==="hex"||ae==="hex6"||ae==="hex3"||ae==="hex4"||ae==="hex8"||ae==="name");return W?ae==="name"&&this._a===0?this.toName():this.toRgbString():(ae==="rgb"&&(de=this.toRgbString()),ae==="prgb"&&(de=this.toPercentageRgbString()),(ae==="hex"||ae==="hex6")&&(de=this.toHexString()),ae==="hex3"&&(de=this.toHexString(!0)),ae==="hex4"&&(de=this.toHex8String(!0)),ae==="hex8"&&(de=this.toHex8String()),ae==="name"&&(de=this.toName()),ae==="hsl"&&(de=this.toHslString()),ae==="hsv"&&(de=this.toHsvString()),de||this.toHexString())},clone:function(){return u(this.toString())},_applyModification:function(ae,fe){var de=ae.apply(null,[this].concat([].slice.call(fe)));return this._r=de._r,this._g=de._g,this._b=de._b,this.setAlpha(de._a),this},lighten:function(){return this._applyModification(k,arguments)},brighten:function(){return this._applyModification(R,arguments)},darken:function(){return this._applyModification(L,arguments)},desaturate:function(){return this._applyModification(T,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(A,arguments)},spin:function(){return this._applyModification(z,arguments)},_applyCombination:function(ae,fe){return ae.apply(null,[this].concat([].slice.call(fe)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(N,arguments)},splitcomplement:function(){return this._applyCombination(D,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(C,arguments)}},u.fromRatio=function(ae,fe){if(typeof ae=="object"){var de={};for(var pe in ae)ae.hasOwnProperty(pe)&&(pe==="a"?de[pe]=ae[pe]:de[pe]=oe(ae[pe]));ae=de}return u(ae,fe)};function h(ae){var fe={r:0,g:0,b:0},de=1,pe=null,W=null,ue=null,me=!1,be=!1;return typeof ae=="string"&&(ae=re(ae)),typeof ae=="object"&&(se(ae.r)&&se(ae.g)&&se(ae.b)?(fe=i(ae.r,ae.g,ae.b),me=!0,be=String(ae.r).substr(-1)==="%"?"prgb":"rgb"):se(ae.h)&&se(ae.s)&&se(ae.v)?(pe=oe(ae.s),W=oe(ae.v),fe=y(ae.h,pe,W),me=!0,be="hsv"):se(ae.h)&&se(ae.s)&&se(ae.l)&&(pe=oe(ae.s),ue=oe(ae.l),fe=p(ae.h,pe,ue),me=!0,be="hsl"),ae.hasOwnProperty("a")&&(de=ae.a)),de=I(de),{ok:me,format:ae.format||be,r:f(255,a(fe.r,0)),g:f(255,a(fe.g,0)),b:f(255,a(fe.b,0)),a:de}}function i(ae,fe,de){return{r:B(ae,255)*255,g:B(fe,255)*255,b:B(de,255)*255}}function s(ae,fe,de){ae=B(ae,255),fe=B(fe,255),de=B(de,255);var pe=a(ae,fe,de),W=f(ae,fe,de),ue,me,be=(pe+W)/2;if(pe==W)ue=me=0;else{var ke=pe-W;switch(me=be>.5?ke/(2-pe-W):ke/(pe+W),pe){case ae:ue=(fe-de)/ke+(fe<de?6:0);break;case fe:ue=(de-ae)/ke+2;break;case de:ue=(ae-fe)/ke+4;break}ue/=6}return{h:ue,s:me,l:be}}function p(ae,fe,de){var pe,W,ue;ae=B(ae,360),fe=B(fe,100),de=B(de,100);function me(Pe,je,ze){return ze<0&&(ze+=1),ze>1&&(ze-=1),ze<1/6?Pe+(je-Pe)*6*ze:ze<1/2?je:ze<2/3?Pe+(je-Pe)*(2/3-ze)*6:Pe}if(fe===0)pe=W=ue=de;else{var be=de<.5?de*(1+fe):de+fe-de*fe,ke=2*de-be;pe=me(ke,be,ae+1/3),W=me(ke,be,ae),ue=me(ke,be,ae-1/3)}return{r:pe*255,g:W*255,b:ue*255}}function d(ae,fe,de){ae=B(ae,255),fe=B(fe,255),de=B(de,255);var pe=a(ae,fe,de),W=f(ae,fe,de),ue,me,be=pe,ke=pe-W;if(me=pe===0?0:ke/pe,pe==W)ue=0;else{switch(pe){case ae:ue=(fe-de)/ke+(fe<de?6:0);break;case fe:ue=(de-ae)/ke+2;break;case de:ue=(ae-fe)/ke+4;break}ue/=6}return{h:ue,s:me,v:be}}function y(ae,fe,de){ae=B(ae,360)*6,fe=B(fe,100),de=B(de,100);var pe=r.floor(ae),W=ae-pe,ue=de*(1-fe),me=de*(1-W*fe),be=de*(1-(1-W)*fe),ke=pe%6,Pe=[de,me,ue,ue,be,de][ke],je=[be,de,de,me,ue,ue][ke],ze=[ue,ue,be,de,de,me][ke];return{r:Pe*255,g:je*255,b:ze*255}}function b(ae,fe,de,pe){var W=[J(t(ae).toString(16)),J(t(fe).toString(16)),J(t(de).toString(16))];return pe&&W[0].charAt(0)==W[0].charAt(1)&&W[1].charAt(0)==W[1].charAt(1)&&W[2].charAt(0)==W[2].charAt(1)?W[0].charAt(0)+W[1].charAt(0)+W[2].charAt(0):W.join("")}function m(ae,fe,de,pe,W){var ue=[J(t(ae).toString(16)),J(t(fe).toString(16)),J(t(de).toString(16)),J(ie(pe))];return W&&ue[0].charAt(0)==ue[0].charAt(1)&&ue[1].charAt(0)==ue[1].charAt(1)&&ue[2].charAt(0)==ue[2].charAt(1)&&ue[3].charAt(0)==ue[3].charAt(1)?ue[0].charAt(0)+ue[1].charAt(0)+ue[2].charAt(0)+ue[3].charAt(0):ue.join("")}function _(ae,fe,de,pe){var W=[J(ie(pe)),J(t(ae).toString(16)),J(t(fe).toString(16)),J(t(de).toString(16))];return W.join("")}u.equals=function(ae,fe){return!ae||!fe?!1:u(ae).toRgbString()==u(fe).toRgbString()},u.random=function(){return u.fromRatio({r:o(),g:o(),b:o()})};function T(ae,fe){fe=fe===0?0:fe||10;var de=u(ae).toHsl();return de.s-=fe/100,de.s=j(de.s),u(de)}function g(ae,fe){fe=fe===0?0:fe||10;var de=u(ae).toHsl();return de.s+=fe/100,de.s=j(de.s),u(de)}function A(ae){return u(ae).desaturate(100)}function k(ae,fe){fe=fe===0?0:fe||10;var de=u(ae).toHsl();return de.l+=fe/100,de.l=j(de.l),u(de)}function R(ae,fe){fe=fe===0?0:fe||10;var de=u(ae).toRgb();return de.r=a(0,f(255,de.r-t(255*-(fe/100)))),de.g=a(0,f(255,de.g-t(255*-(fe/100)))),de.b=a(0,f(255,de.b-t(255*-(fe/100)))),u(de)}function L(ae,fe){fe=fe===0?0:fe||10;var de=u(ae).toHsl();return de.l-=fe/100,de.l=j(de.l),u(de)}function z(ae,fe){var de=u(ae).toHsl(),pe=(de.h+fe)%360;return de.h=pe<0?360+pe:pe,u(de)}function E(ae){var fe=u(ae).toHsl();return fe.h=(fe.h+180)%360,u(fe)}function S(ae){var fe=u(ae).toHsl(),de=fe.h;return[u(ae),u({h:(de+120)%360,s:fe.s,l:fe.l}),u({h:(de+240)%360,s:fe.s,l:fe.l})]}function C(ae){var fe=u(ae).toHsl(),de=fe.h;return[u(ae),u({h:(de+90)%360,s:fe.s,l:fe.l}),u({h:(de+180)%360,s:fe.s,l:fe.l}),u({h:(de+270)%360,s:fe.s,l:fe.l})]}function D(ae){var fe=u(ae).toHsl(),de=fe.h;return[u(ae),u({h:(de+72)%360,s:fe.s,l:fe.l}),u({h:(de+216)%360,s:fe.s,l:fe.l})]}function F(ae,fe,de){fe=fe||6,de=de||30;var pe=u(ae).toHsl(),W=360/de,ue=[u(ae)];for(pe.h=(pe.h-(W*fe>>1)+720)%360;--fe;)pe.h=(pe.h+W)%360,ue.push(u(pe));return ue}function N(ae,fe){fe=fe||6;for(var de=u(ae).toHsv(),pe=de.h,W=de.s,ue=de.v,me=[],be=1/fe;fe--;)me.push(u({h:pe,s:W,v:ue})),ue=(ue+be)%1;return me}u.mix=function(ae,fe,de){de=de===0?0:de||50;var pe=u(ae).toRgb(),W=u(fe).toRgb(),ue=de/100,me={r:(W.r-pe.r)*ue+pe.r,g:(W.g-pe.g)*ue+pe.g,b:(W.b-pe.b)*ue+pe.b,a:(W.a-pe.a)*ue+pe.a};return u(me)},u.readability=function(ae,fe){var de=u(ae),pe=u(fe);return(r.max(de.getLuminance(),pe.getLuminance())+.05)/(r.min(de.getLuminance(),pe.getLuminance())+.05)},u.isReadable=function(ae,fe,de){var pe=u.readability(ae,fe),W,ue;switch(ue=!1,W=ee(de),W.level+W.size){case"AAsmall":case"AAAlarge":ue=pe>=4.5;break;case"AAlarge":ue=pe>=3;break;case"AAAsmall":ue=pe>=7;break}return ue},u.mostReadable=function(ae,fe,de){var pe=null,W=0,ue,me,be,ke;de=de||{},me=de.includeFallbackColors,be=de.level,ke=de.size;for(var Pe=0;Pe<fe.length;Pe++)ue=u.readability(ae,fe[Pe]),ue>W&&(W=ue,pe=u(fe[Pe]));return u.isReadable(ae,pe,{level:be,size:ke})||!me?pe:(de.includeFallbackColors=!1,u.mostReadable(ae,["#fff","#000"],de))};var G=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},U=u.hexNames=X(G);function X(ae){var fe={};for(var de in ae)ae.hasOwnProperty(de)&&(fe[ae[de]]=de);return fe}function I(ae){return ae=parseFloat(ae),(isNaN(ae)||ae<0||ae>1)&&(ae=1),ae}function B(ae,fe){K(ae)&&(ae="100%");var de=te(ae);return ae=f(fe,a(0,parseFloat(ae))),de&&(ae=parseInt(ae*fe,10)/100),r.abs(ae-fe)<1e-6?1:ae%fe/parseFloat(fe)}function j(ae){return f(1,a(0,ae))}function H(ae){return parseInt(ae,16)}function K(ae){return typeof ae=="string"&&ae.indexOf(".")!=-1&&parseFloat(ae)===1}function te(ae){return typeof ae=="string"&&ae.indexOf("%")!=-1}function J(ae){return ae.length==1?"0"+ae:""+ae}function oe(ae){return ae<=1&&(ae=ae*100+"%"),ae}function ie(ae){return r.round(parseFloat(ae)*255).toString(16)}function Q(ae){return H(ae)/255}var V=function(){var ae="[-\\+]?\\d+%?",fe="[-\\+]?\\d*\\.\\d+%?",de="(?:"+fe+")|(?:"+ae+")",pe="[\\s|\\(]+("+de+")[,|\\s]+("+de+")[,|\\s]+("+de+")\\s*\\)?",W="[\\s|\\(]+("+de+")[,|\\s]+("+de+")[,|\\s]+("+de+")[,|\\s]+("+de+")\\s*\\)?";return{CSS_UNIT:new RegExp(de),rgb:new RegExp("rgb"+pe),rgba:new RegExp("rgba"+W),hsl:new RegExp("hsl"+pe),hsla:new RegExp("hsla"+W),hsv:new RegExp("hsv"+pe),hsva:new RegExp("hsva"+W),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function se(ae){return!!V.CSS_UNIT.exec(ae)}function re(ae){ae=ae.replace(n,"").replace(l,"").toLowerCase();var fe=!1;if(G[ae])ae=G[ae],fe=!0;else if(ae=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var de;return(de=V.rgb.exec(ae))?{r:de[1],g:de[2],b:de[3]}:(de=V.rgba.exec(ae))?{r:de[1],g:de[2],b:de[3],a:de[4]}:(de=V.hsl.exec(ae))?{h:de[1],s:de[2],l:de[3]}:(de=V.hsla.exec(ae))?{h:de[1],s:de[2],l:de[3],a:de[4]}:(de=V.hsv.exec(ae))?{h:de[1],s:de[2],v:de[3]}:(de=V.hsva.exec(ae))?{h:de[1],s:de[2],v:de[3],a:de[4]}:(de=V.hex8.exec(ae))?{r:H(de[1]),g:H(de[2]),b:H(de[3]),a:Q(de[4]),format:fe?"name":"hex8"}:(de=V.hex6.exec(ae))?{r:H(de[1]),g:H(de[2]),b:H(de[3]),format:fe?"name":"hex"}:(de=V.hex4.exec(ae))?{r:H(de[1]+""+de[1]),g:H(de[2]+""+de[2]),b:H(de[3]+""+de[3]),a:Q(de[4]+""+de[4]),format:fe?"name":"hex8"}:(de=V.hex3.exec(ae))?{r:H(de[1]+""+de[1]),g:H(de[2]+""+de[2]),b:H(de[3]+""+de[3]),format:fe?"name":"hex"}:!1}function ee(ae){var fe,de;return ae=ae||{level:"AA",size:"small"},fe=(ae.level||"AA").toUpperCase(),de=(ae.size||"small").toLowerCase(),fe!=="AA"&&fe!=="AAA"&&(fe="AA"),de!=="small"&&de!=="large"&&(de="small"),{level:fe,size:de}}typeof v<"u"&&v.exports?v.exports=u:window.tinycolor=u})(Math)},{}],577:[function(e,v,M){v.exports=l,v.exports.float32=v.exports.float=l,v.exports.fract32=v.exports.fract=n;var r=new Float32Array(1);function n(c){if(c.length){for(var t=l(c),f=0,a=t.length;f<a;f++)t[f]=c[f]-t[f];return t}return l(c-l(c))}function l(c){if(c.length){if(c instanceof Float32Array)return c;var t=new Float32Array(c);return t.set(c),t}return r[0]=c,r[0]}},{}],578:[function(e,v,M){var r=e("parse-unit");v.exports=t;var n=96;function l(f,a){var o=r(getComputedStyle(f).getPropertyValue(a));return o[0]*t(o[1],f)}function c(f,a){var o=document.createElement("div");o.style["font-size"]="128"+f,a.appendChild(o);var u=l(o,"font-size")/128;return a.removeChild(o),u}function t(f,a){switch(a=a||document.body,f=(f||"px").trim().toLowerCase(),(a===window||a===document)&&(a=document.body),f){case"%":return a.clientHeight/100;case"ch":case"ex":return c(f,a);case"em":return l(a,"font-size");case"rem":return l(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return n;case"cm":return n/2.54;case"mm":return n/25.4;case"pt":return n/72;case"pc":return n/6}return 1}},{"parse-unit":506}],579:[function(e,v,M){(function(r,n){typeof M=="object"&&typeof v<"u"?n(M):(r=r||self,n(r.topojson=r.topojson||{}))})(this,function(r){function n(g){return g}function l(g){if(g==null)return n;var A,k,R=g.scale[0],L=g.scale[1],z=g.translate[0],E=g.translate[1];return function(S,C){C||(A=k=0);var D=2,F=S.length,N=new Array(F);for(N[0]=(A+=S[0])*R+z,N[1]=(k+=S[1])*L+E;D<F;)N[D]=S[D],++D;return N}}function c(g){var A=l(g.transform),k,R=1/0,L=R,z=-R,E=-R;function S(D){D=A(D),D[0]<R&&(R=D[0]),D[0]>z&&(z=D[0]),D[1]<L&&(L=D[1]),D[1]>E&&(E=D[1])}function C(D){switch(D.type){case"GeometryCollection":D.geometries.forEach(C);break;case"Point":S(D.coordinates);break;case"MultiPoint":D.coordinates.forEach(S);break}}g.arcs.forEach(function(D){for(var F=-1,N=D.length,G;++F<N;)G=A(D[F],F),G[0]<R&&(R=G[0]),G[0]>z&&(z=G[0]),G[1]<L&&(L=G[1]),G[1]>E&&(E=G[1])});for(k in g.objects)C(g.objects[k]);return[R,L,z,E]}function t(g,A){for(var k,R=g.length,L=R-A;L<--R;)k=g[L],g[L++]=g[R],g[R]=k}function f(g,A){return typeof A=="string"&&(A=g.objects[A]),A.type==="GeometryCollection"?{type:"FeatureCollection",features:A.geometries.map(function(k){return a(g,k)})}:a(g,A)}function a(g,A){var k=A.id,R=A.bbox,L=A.properties==null?{}:A.properties,z=o(g,A);return k==null&&R==null?{type:"Feature",properties:L,geometry:z}:R==null?{type:"Feature",id:k,properties:L,geometry:z}:{type:"Feature",id:k,bbox:R,properties:L,geometry:z}}function o(g,A){var k=l(g.transform),R=g.arcs;function L(F,N){N.length&&N.pop();for(var G=R[F<0?~F:F],U=0,X=G.length;U<X;++U)N.push(k(G[U],U));F<0&&t(N,X)}function z(F){return k(F)}function E(F){for(var N=[],G=0,U=F.length;G<U;++G)L(F[G],N);return N.length<2&&N.push(N[0]),N}function S(F){for(var N=E(F);N.length<4;)N.push(N[0]);return N}function C(F){return F.map(S)}function D(F){var N=F.type,G;switch(N){case"GeometryCollection":return{type:N,geometries:F.geometries.map(D)};case"Point":G=z(F.coordinates);break;case"MultiPoint":G=F.coordinates.map(z);break;case"LineString":G=E(F.arcs);break;case"MultiLineString":G=F.arcs.map(E);break;case"Polygon":G=C(F.arcs);break;case"MultiPolygon":G=F.arcs.map(C);break;default:return null}return{type:N,coordinates:G}}return D(A)}function u(g,A){var k={},R={},L={},z=[],E=-1;A.forEach(function(D,F){var N=g.arcs[D<0?~D:D],G;N.length<3&&!N[1][0]&&!N[1][1]&&(G=A[++E],A[E]=D,A[F]=G)}),A.forEach(function(D){var F=S(D),N=F[0],G=F[1],U,X;if(U=L[N])if(delete L[U.end],U.push(D),U.end=G,X=R[G]){delete R[X.start];var I=X===U?U:U.concat(X);R[I.start=U.start]=L[I.end=X.end]=I}else R[U.start]=L[U.end]=U;else if(U=R[G])if(delete R[U.start],U.unshift(D),U.start=N,X=L[N]){delete L[X.end];var B=X===U?U:X.concat(U);R[B.start=X.start]=L[B.end=U.end]=B}else R[U.start]=L[U.end]=U;else U=[D],R[U.start=N]=L[U.end=G]=U});function S(D){var F=g.arcs[D<0?~D:D],N=F[0],G;return g.transform?(G=[0,0],F.forEach(function(U){G[0]+=U[0],G[1]+=U[1]})):G=F[F.length-1],D<0?[G,N]:[N,G]}function C(D,F){for(var N in D){var G=D[N];delete F[G.start],delete G.start,delete G.end,G.forEach(function(U){k[U<0?~U:U]=1}),z.push(G)}}return C(L,R),C(R,L),A.forEach(function(D){k[D<0?~D:D]||z.push([D])}),z}function h(g){return o(g,i.apply(this,arguments))}function i(g,A,k){var R,L,z;if(arguments.length>1)R=s(g,A,k);else for(L=0,R=new Array(z=g.arcs.length);L<z;++L)R[L]=L;return{type:"MultiLineString",arcs:u(g,R)}}function s(g,A,k){var R=[],L=[],z;function E(N){var G=N<0?~N:N;(L[G]||(L[G]=[])).push({i:N,g:z})}function S(N){N.forEach(E)}function C(N){N.forEach(S)}function D(N){N.forEach(C)}function F(N){switch(z=N,N.type){case"GeometryCollection":N.geometries.forEach(F);break;case"LineString":S(N.arcs);break;case"MultiLineString":case"Polygon":C(N.arcs);break;case"MultiPolygon":D(N.arcs);break}}return F(A),L.forEach(k==null?function(N){R.push(N[0].i)}:function(N){k(N[0].g,N[N.length-1].g)&&R.push(N[0].i)}),R}function p(g){for(var A=-1,k=g.length,R,L=g[k-1],z=0;++A<k;)R=L,L=g[A],z+=R[0]*L[1]-R[1]*L[0];return Math.abs(z)}function d(g){return o(g,y.apply(this,arguments))}function y(g,A){var k={},R=[],L=[];A.forEach(z);function z(C){switch(C.type){case"GeometryCollection":C.geometries.forEach(z);break;case"Polygon":E(C.arcs);break;case"MultiPolygon":C.arcs.forEach(E);break}}function E(C){C.forEach(function(D){D.forEach(function(F){(k[F=F<0?~F:F]||(k[F]=[])).push(C)})}),R.push(C)}function S(C){return p(o(g,{type:"Polygon",arcs:[C]}).coordinates[0])}return R.forEach(function(C){if(!C._){var D=[],F=[C];for(C._=1,L.push(D);C=F.pop();)D.push(C),C.forEach(function(N){N.forEach(function(G){k[G<0?~G:G].forEach(function(U){U._||(U._=1,F.push(U))})})})}}),R.forEach(function(C){delete C._}),{type:"MultiPolygon",arcs:L.map(function(C){var D=[],F;if(C.forEach(function(I){I.forEach(function(B){B.forEach(function(j){k[j<0?~j:j].length<2&&D.push(j)})})}),D=u(g,D),(F=D.length)>1)for(var N=1,G=S(D[0]),U,X;N<F;++N)(U=S(D[N]))>G&&(X=D[0],D[0]=D[N],D[N]=X,G=U);return D}).filter(function(C){return C.length>0})}}function b(g,A){for(var k=0,R=g.length;k<R;){var L=k+R>>>1;g[L]<A?k=L+1:R=L}return k}function m(g){var A={},k=g.map(function(){return[]});function R(I,B){I.forEach(function(j){j<0&&(j=~j);var H=A[j];H?H.push(B):A[j]=[B]})}function L(I,B){I.forEach(function(j){R(j,B)})}function z(I,B){I.type==="GeometryCollection"?I.geometries.forEach(function(j){z(j,B)}):I.type in E&&E[I.type](I.arcs,B)}var E={LineString:R,MultiLineString:L,Polygon:L,MultiPolygon:function(I,B){I.forEach(function(j){L(j,B)})}};g.forEach(z);for(var S in A)for(var C=A[S],D=C.length,F=0;F<D;++F)for(var N=F+1;N<D;++N){var G=C[F],U=C[N],X;(X=k[G])[S=b(X,U)]!==U&&X.splice(S,0,U),(X=k[U])[S=b(X,G)]!==G&&X.splice(S,0,G)}return k}function _(g){if(g==null)return n;var A,k,R=g.scale[0],L=g.scale[1],z=g.translate[0],E=g.translate[1];return function(S,C){C||(A=k=0);var D=2,F=S.length,N=new Array(F),G=Math.round((S[0]-z)/R),U=Math.round((S[1]-E)/L);for(N[0]=G-A,A=G,N[1]=U-k,k=U;D<F;)N[D]=S[D],++D;return N}}function T(g,A){if(g.transform)throw new Error("already quantized");if(!A||!A.scale){if(!((E=Math.floor(A))>=2))throw new Error("n must be ≥2");C=g.bbox||c(g);var k=C[0],R=C[1],L=C[2],z=C[3],E;A={scale:[L-k?(L-k)/(E-1):1,z-R?(z-R)/(E-1):1],translate:[k,R]}}else C=g.bbox;var S=_(A),C,D,F=g.objects,N={};function G(I){return S(I)}function U(I){var B;switch(I.type){case"GeometryCollection":B={type:"GeometryCollection",geometries:I.geometries.map(U)};break;case"Point":B={type:"Point",coordinates:G(I.coordinates)};break;case"MultiPoint":B={type:"MultiPoint",coordinates:I.coordinates.map(G)};break;default:return I}return I.id!=null&&(B.id=I.id),I.bbox!=null&&(B.bbox=I.bbox),I.properties!=null&&(B.properties=I.properties),B}function X(I){var B=0,j=1,H=I.length,K,te=new Array(H);for(te[0]=S(I[0],0);++B<H;)((K=S(I[B],B))[0]||K[1])&&(te[j++]=K);return j===1&&(te[j++]=[0,0]),te.length=j,te}for(D in F)N[D]=U(F[D]);return{type:"Topology",bbox:C,transform:A,objects:N,arcs:g.arcs.map(X)}}r.bbox=c,r.feature=f,r.merge=d,r.mergeArcs=y,r.mesh=h,r.meshArcs=i,r.neighbors=m,r.quantize=T,r.transform=l,r.untransform=_,Object.defineProperty(r,"__esModule",{value:!0})})},{}],580:[function(e,v,M){v.exports=c;var r=e("permutation-rank"),n=e("permutation-parity"),l=e("gamma");function c(t){if(t<0)return[];if(t===0)return[[0]];for(var f=Math.round(l(t+1))|0,a=[],o=0;o<f;++o){for(var u=r.unrank(t,o),h=[0],i=0,s=0;s<u.length;++s)i+=1<<u[s],h.push(i);n(u)<1&&(h[0]=i,h[t]=0),a.push(h)}return a}},{gamma:248,"permutation-parity":509,"permutation-rank":510}],581:[function(e,v,M){v.exports=p;var r=e("filtered-vector"),n=e("gl-mat4/invert"),l=e("gl-mat4/rotate"),c=e("gl-vec3/cross"),t=e("gl-vec3/normalize"),f=e("gl-vec3/dot");function a(d,y,b){return Math.sqrt(Math.pow(d,2)+Math.pow(y,2)+Math.pow(b,2))}function o(d){return Math.min(1,Math.max(-1,d))}function u(d){var y=Math.abs(d[0]),b=Math.abs(d[1]),m=Math.abs(d[2]),_=[0,0,0];y>Math.max(b,m)?_[2]=1:b>Math.max(y,m)?_[0]=1:_[1]=1;for(var T=0,g=0,A=0;A<3;++A)T+=d[A]*d[A],g+=_[A]*d[A];for(var A=0;A<3;++A)_[A]-=g/T*d[A];return t(_,_),_}function h(d,y,b,m,_,T,g,A){this.center=r(b),this.up=r(m),this.right=r(_),this.radius=r([T]),this.angle=r([g,A]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(d,y),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var k=0;k<16;++k)this.computedMatrix[k]=.5;this.recalcMatrix(0)}var i=h.prototype;i.setDistanceLimits=function(d,y){d>0?d=Math.log(d):d=-1/0,y>0?y=Math.log(y):y=1/0,y=Math.max(y,d),this.radius.bounds[0][0]=d,this.radius.bounds[1][0]=y},i.getDistanceLimits=function(d){var y=this.radius.bounds[0];return d?(d[0]=Math.exp(y[0][0]),d[1]=Math.exp(y[1][0]),d):[Math.exp(y[0][0]),Math.exp(y[1][0])]},i.recalcMatrix=function(d){this.center.curve(d),this.up.curve(d),this.right.curve(d),this.radius.curve(d),this.angle.curve(d);for(var y=this.computedUp,b=this.computedRight,m=0,_=0,T=0;T<3;++T)_+=y[T]*b[T],m+=y[T]*y[T];for(var g=Math.sqrt(m),A=0,T=0;T<3;++T)b[T]-=y[T]*_/m,A+=b[T]*b[T],y[T]/=g;for(var k=Math.sqrt(A),T=0;T<3;++T)b[T]/=k;var R=this.computedToward;c(R,y,b),t(R,R);for(var L=Math.exp(this.computedRadius[0]),z=this.computedAngle[0],E=this.computedAngle[1],S=Math.cos(z),C=Math.sin(z),D=Math.cos(E),F=Math.sin(E),N=this.computedCenter,G=S*D,U=C*D,X=F,I=-S*F,B=-C*F,j=D,H=this.computedEye,K=this.computedMatrix,T=0;T<3;++T){var te=G*b[T]+U*R[T]+X*y[T];K[4*T+1]=I*b[T]+B*R[T]+j*y[T],K[4*T+2]=te,K[4*T+3]=0}var J=K[1],oe=K[5],ie=K[9],Q=K[2],V=K[6],se=K[10],re=oe*se-ie*V,ee=ie*Q-J*se,ae=J*V-oe*Q,fe=a(re,ee,ae);re/=fe,ee/=fe,ae/=fe,K[0]=re,K[4]=ee,K[8]=ae;for(var T=0;T<3;++T)H[T]=N[T]+K[2+4*T]*L;for(var T=0;T<3;++T){for(var A=0,de=0;de<3;++de)A+=K[T+4*de]*H[de];K[12+T]=-A}K[15]=1},i.getMatrix=function(d,y){this.recalcMatrix(d);var b=this.computedMatrix;if(y){for(var m=0;m<16;++m)y[m]=b[m];return y}return b};var s=[0,0,0];i.rotate=function(d,y,b,m){if(this.angle.move(d,y,b),m){this.recalcMatrix(d);var _=this.computedMatrix;s[0]=_[2],s[1]=_[6],s[2]=_[10];for(var T=this.computedUp,g=this.computedRight,A=this.computedToward,k=0;k<3;++k)_[4*k]=T[k],_[4*k+1]=g[k],_[4*k+2]=A[k];l(_,_,m,s);for(var k=0;k<3;++k)T[k]=_[4*k],g[k]=_[4*k+1];this.up.set(d,T[0],T[1],T[2]),this.right.set(d,g[0],g[1],g[2])}},i.pan=function(d,y,b,m){y=y||0,b=b||0,m=m||0,this.recalcMatrix(d);var _=this.computedMatrix;Math.exp(this.computedRadius[0]);var T=_[1],g=_[5],A=_[9],k=a(T,g,A);T/=k,g/=k,A/=k;var R=_[0],L=_[4],z=_[8],E=R*T+L*g+z*A;R-=T*E,L-=g*E,z-=A*E;var S=a(R,L,z);R/=S,L/=S,z/=S;var C=R*y+T*b,D=L*y+g*b,F=z*y+A*b;this.center.move(d,C,D,F);var N=Math.exp(this.computedRadius[0]);N=Math.max(1e-4,N+m),this.radius.set(d,Math.log(N))},i.translate=function(d,y,b,m){this.center.move(d,y||0,b||0,m||0)},i.setMatrix=function(d,y,b,m){var _=1;typeof b=="number"&&(_=b|0),(_<0||_>3)&&(_=1);var T=(_+2)%3;y||(this.recalcMatrix(d),y=this.computedMatrix);var g=y[_],A=y[_+4],k=y[_+8];if(m){var L=Math.abs(g),z=Math.abs(A),E=Math.abs(k),S=Math.max(L,z,E);L===S?(g=g<0?-1:1,A=k=0):E===S?(k=k<0?-1:1,g=A=0):(A=A<0?-1:1,g=k=0)}else{var R=a(g,A,k);g/=R,A/=R,k/=R}var C=y[T],D=y[T+4],F=y[T+8],N=C*g+D*A+F*k;C-=g*N,D-=A*N,F-=k*N;var G=a(C,D,F);C/=G,D/=G,F/=G;var U=A*F-k*D,X=k*C-g*F,I=g*D-A*C,B=a(U,X,I);U/=B,X/=B,I/=B,this.center.jump(d,me,be,ke),this.radius.idle(d),this.up.jump(d,g,A,k),this.right.jump(d,C,D,F);var j,H;if(_===2){var K=y[1],te=y[5],J=y[9],oe=K*C+te*D+J*F,ie=K*U+te*X+J*I;re<0?j=-Math.PI/2:j=Math.PI/2,H=Math.atan2(ie,oe)}else{var Q=y[2],V=y[6],se=y[10],re=Q*g+V*A+se*k,ee=Q*C+V*D+se*F,ae=Q*U+V*X+se*I;j=Math.asin(o(re)),H=Math.atan2(ae,ee)}this.angle.jump(d,H,j),this.recalcMatrix(d);var fe=y[2],de=y[6],pe=y[10],W=this.computedMatrix;n(W,y);var ue=W[15],me=W[12]/ue,be=W[13]/ue,ke=W[14]/ue,Pe=Math.exp(this.computedRadius[0]);this.center.jump(d,me-fe*Pe,be-de*Pe,ke-pe*Pe)},i.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},i.idle=function(d){this.center.idle(d),this.up.idle(d),this.right.idle(d),this.radius.idle(d),this.angle.idle(d)},i.flush=function(d){this.center.flush(d),this.up.flush(d),this.right.flush(d),this.radius.flush(d),this.angle.flush(d)},i.setDistance=function(d,y){y>0&&this.radius.set(d,Math.log(y))},i.lookAt=function(d,y,b,m){this.recalcMatrix(d),y=y||this.computedEye,b=b||this.computedCenter,m=m||this.computedUp;var _=m[0],T=m[1],g=m[2],A=a(_,T,g);if(!(A<1e-6)){_/=A,T/=A,g/=A;var k=y[0]-b[0],R=y[1]-b[1],L=y[2]-b[2],z=a(k,R,L);if(!(z<1e-6)){k/=z,R/=z,L/=z;var E=this.computedRight,S=E[0],C=E[1],D=E[2],F=_*S+T*C+g*D;S-=F*_,C-=F*T,D-=F*g;var N=a(S,C,D);if(!(N<.01&&(S=T*L-g*R,C=g*k-_*L,D=_*R-T*k,N=a(S,C,D),N<1e-6))){S/=N,C/=N,D/=N,this.up.set(d,_,T,g),this.right.set(d,S,C,D),this.center.set(d,b[0],b[1],b[2]),this.radius.set(d,Math.log(z));var G=T*D-g*C,U=g*S-_*D,X=_*C-T*S,I=a(G,U,X);G/=I,U/=I,X/=I;var B=_*k+T*R+g*L,j=S*k+C*R+D*L,H=G*k+U*R+X*L,K=Math.asin(o(B)),te=Math.atan2(H,j),J=this.angle._state,oe=J[J.length-1],ie=J[J.length-2];oe=oe%(2*Math.PI);var Q=Math.abs(oe+2*Math.PI-te),V=Math.abs(oe-te),se=Math.abs(oe-2*Math.PI-te);Q<V&&(oe+=2*Math.PI),se<V&&(oe-=2*Math.PI),this.angle.jump(this.angle.lastT(),oe,ie),this.angle.set(d,te,K)}}}};function p(d){d=d||{};var y=d.center||[0,0,0],b=d.up||[0,1,0],m=d.right||u(b),_=d.radius||1,T=d.theta||0,g=d.phi||0;if(y=[].slice.call(y,0,3),b=[].slice.call(b,0,3),t(b,b),m=[].slice.call(m,0,3),t(m,m),"eye"in d){var A=d.eye,k=[A[0]-y[0],A[1]-y[1],A[2]-y[2]];c(m,k,b),a(m[0],m[1],m[2])<1e-6?m=u(b):t(m,m),_=a(k[0],k[1],k[2]);var R=f(b,k)/_,L=f(m,k)/_;g=Math.acos(R),T=Math.acos(L)}return _=Math.log(_),new h(d.zoomMin,d.zoomMax,y,b,m,_,T,g)}},{"filtered-vector":242,"gl-mat4/invert":293,"gl-mat4/rotate":299,"gl-vec3/cross":365,"gl-vec3/dot":370,"gl-vec3/normalize":387}],582:[function(e,v,M){v.exports=n;var r=+(Math.pow(2,27)+1);function n(l,c,t){var f=l*c,a=r*l,o=a-l,u=a-o,h=l-u,i=r*c,s=i-c,p=i-s,d=c-p,y=f-u*p,b=y-h*p,m=b-u*d,_=h*d-m;return t?(t[0]=_,t[1]=f,t):[_,f]}},{}],583:[function(e,v,M){v.exports=r;function r(n,l,c){var t=n+l,f=t-n,a=t-f,o=l-f,u=n-a;return c?(c[0]=u+o,c[1]=t,c):[u+o,t]}},{}],584:[function(e,v,M){var r=e("../prototype/is");v.exports=function(n){if(typeof n!="function"||!hasOwnProperty.call(n,"length"))return!1;try{if(typeof n.length!="number"||typeof n.call!="function"||typeof n.apply!="function")return!1}catch{return!1}return!r(n)}},{"../prototype/is":591}],585:[function(e,v,M){var r=e("../value/is"),n=e("../object/is"),l=e("../string/coerce"),c=e("./to-short-string"),t=function(f,a){return f.replace("%v",c(a))};v.exports=function(f,a,o){if(!n(o))throw new TypeError(t(a,f));if(!r(f)){if("default"in o)return o.default;if(o.isOptional)return null}var u=l(o.errorMessage);throw r(u)||(u=a),new TypeError(t(u,f))}},{"../object/is":588,"../string/coerce":592,"../value/is":594,"./to-short-string":587}],586:[function(e,v,M){v.exports=function(r){try{return r.toString()}catch{try{return String(r)}catch{return null}}}},{}],587:[function(e,v,M){var r=e("./safe-to-string"),n=/[\n\r\u2028\u2029]/g;v.exports=function(l){var c=r(l);return c===null?"<Non-coercible to string value>":(c.length>100&&(c=c.slice(0,99)+"…"),c=c.replace(n,function(t){switch(t){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),c)}},{"./safe-to-string":586}],588:[function(e,v,M){var r=e("../value/is"),n={object:!0,function:!0,undefined:!0};v.exports=function(l){return r(l)?hasOwnProperty.call(n,typeof l):!1}},{"../value/is":594}],589:[function(e,v,M){var r=e("../lib/resolve-exception"),n=e("./is");v.exports=function(l){return n(l)?l:r(l,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":585,"./is":590}],590:[function(e,v,M){var r=e("../function/is"),n=/^\s*class[\s{/}]/,l=Function.prototype.toString;v.exports=function(c){return!(!r(c)||n.test(l.call(c)))}},{"../function/is":584}],591:[function(e,v,M){var r=e("../object/is");v.exports=function(n){if(!r(n))return!1;try{return n.constructor?n.constructor.prototype===n:!1}catch{return!1}}},{"../object/is":588}],592:[function(e,v,M){var r=e("../value/is"),n=e("../object/is"),l=Object.prototype.toString;v.exports=function(c){if(!r(c))return null;if(n(c)){var t=c.toString;if(typeof t!="function"||t===l)return null}try{return""+c}catch{return null}}},{"../object/is":588,"../value/is":594}],593:[function(e,v,M){var r=e("../lib/resolve-exception"),n=e("./is");v.exports=function(l){return n(l)?l:r(l,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":585,"./is":594}],594:[function(e,v,M){var r=void 0;v.exports=function(n){return n!==r&&n!==null}},{}],595:[function(e,v,M){(function(r){(function(){var n=e("bit-twiddle"),l=e("dup"),c=e("buffer").Buffer;r.__TYPEDARRAY_POOL||(r.__TYPEDARRAY_POOL={UINT8:l([32,0]),UINT16:l([32,0]),UINT32:l([32,0]),BIGUINT64:l([32,0]),INT8:l([32,0]),INT16:l([32,0]),INT32:l([32,0]),BIGINT64:l([32,0]),FLOAT:l([32,0]),DOUBLE:l([32,0]),DATA:l([32,0]),UINT8C:l([32,0]),BUFFER:l([32,0])});var t=typeof Uint8ClampedArray<"u",f=typeof BigUint64Array<"u",a=typeof BigInt64Array<"u",o=r.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=l([32,0])),o.BIGUINT64||(o.BIGUINT64=l([32,0])),o.BIGINT64||(o.BIGINT64=l([32,0])),o.BUFFER||(o.BUFFER=l([32,0]));var u=o.DATA,h=o.BUFFER;M.free=function(C){if(c.isBuffer(C))h[n.log2(C.length)].push(C);else{if(Object.prototype.toString.call(C)!=="[object ArrayBuffer]"&&(C=C.buffer),!C)return;var D=C.length||C.byteLength,F=n.log2(D)|0;u[F].push(C)}};function i(S){if(S){var C=S.length||S.byteLength,D=n.log2(C);u[D].push(S)}}function s(S){i(S.buffer)}M.freeUint8=M.freeUint16=M.freeUint32=M.freeBigUint64=M.freeInt8=M.freeInt16=M.freeInt32=M.freeBigInt64=M.freeFloat32=M.freeFloat=M.freeFloat64=M.freeDouble=M.freeUint8Clamped=M.freeDataView=s,M.freeArrayBuffer=i,M.freeBuffer=function(C){h[n.log2(C.length)].push(C)},M.malloc=function(C,D){if(D===void 0||D==="arraybuffer")return p(C);switch(D){case"uint8":return d(C);case"uint16":return y(C);case"uint32":return b(C);case"int8":return m(C);case"int16":return _(C);case"int32":return T(C);case"float":case"float32":return g(C);case"double":case"float64":return A(C);case"uint8_clamped":return k(C);case"bigint64":return L(C);case"biguint64":return R(C);case"buffer":return E(C);case"data":case"dataview":return z(C);default:return null}return null};function p(C){var C=n.nextPow2(C),D=n.log2(C),F=u[D];return F.length>0?F.pop():new ArrayBuffer(C)}M.mallocArrayBuffer=p;function d(S){return new Uint8Array(p(S),0,S)}M.mallocUint8=d;function y(S){return new Uint16Array(p(2*S),0,S)}M.mallocUint16=y;function b(S){return new Uint32Array(p(4*S),0,S)}M.mallocUint32=b;function m(S){return new Int8Array(p(S),0,S)}M.mallocInt8=m;function _(S){return new Int16Array(p(2*S),0,S)}M.mallocInt16=_;function T(S){return new Int32Array(p(4*S),0,S)}M.mallocInt32=T;function g(S){return new Float32Array(p(4*S),0,S)}M.mallocFloat32=M.mallocFloat=g;function A(S){return new Float64Array(p(8*S),0,S)}M.mallocFloat64=M.mallocDouble=A;function k(S){return t?new Uint8ClampedArray(p(S),0,S):d(S)}M.mallocUint8Clamped=k;function R(S){return f?new BigUint64Array(p(8*S),0,S):null}M.mallocBigUint64=R;function L(S){return a?new BigInt64Array(p(8*S),0,S):null}M.mallocBigInt64=L;function z(S){return new DataView(p(S),0,S)}M.mallocDataView=z;function E(S){S=n.nextPow2(S);var C=n.log2(S),D=h[C];return D.length>0?D.pop():new c(S)}M.mallocBuffer=E,M.clearCache=function(){for(var C=0;C<32;++C)o.UINT8[C].length=0,o.UINT16[C].length=0,o.UINT32[C].length=0,o.INT8[C].length=0,o.INT16[C].length=0,o.INT32[C].length=0,o.FLOAT[C].length=0,o.DOUBLE[C].length=0,o.BIGUINT64[C].length=0,o.BIGINT64[C].length=0,o.UINT8C[C].length=0,u[C].length=0,h[C].length=0}}).call(this)}).call(this,typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":97,buffer:111,dup:176}],596:[function(e,v,M){v.exports=r;function r(l){this.roots=new Array(l),this.ranks=new Array(l);for(var c=0;c<l;++c)this.roots[c]=c,this.ranks[c]=0}var n=r.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var l=this.roots.length;return this.roots.push(l),this.ranks.push(0),l},n.find=function(l){for(var c=l,t=this.roots;t[l]!==l;)l=t[l];for(;t[c]!==l;){var f=t[c];t[c]=l,c=f}return l},n.link=function(l,c){var t=this.find(l),f=this.find(c);if(t!==f){var a=this.ranks,o=this.roots,u=a[t],h=a[f];u<h?o[t]=f:h<u?o[f]=t:(o[f]=t,++a[t])}}},{}],597:[function(e,v,M){function r(c,t){for(var f=1,a=c.length,o=c[0],u=c[0],h=1;h<a;++h)if(u=o,o=c[h],t(o,u)){if(h===f){f++;continue}c[f++]=o}return c.length=f,c}function n(c){for(var t=1,f=c.length,a=c[0],o=c[0],u=1;u<f;++u,o=a)if(o=a,a=c[u],a!==o){if(u===t){t++;continue}c[t++]=a}return c.length=t,c}function l(c,t,f){return c.length===0?c:t?(f||c.sort(t),r(c,t)):(f||c.sort(),n(c))}v.exports=l},{}],598:[function(e,v,M){var r=/[\'\"]/;v.exports=function(l){return l?(r.test(l.charAt(0))&&(l=l.substr(1)),r.test(l.charAt(l.length-1))&&(l=l.substr(0,l.length-1)),l):""}},{}],599:[function(e,v,M){v.exports=function(n,l,c){Array.isArray(c)||(c=[].slice.call(arguments,2));for(var t=0,f=c.length;t<f;t++){var a=c[t];for(var o in a)if(!(l[o]!==void 0&&!Array.isArray(l[o])&&n[o]===l[o])&&o in l){var u;if(a[o]===!0)u=l[o];else{if(a[o]===!1)continue;if(typeof a[o]=="function"&&(u=a[o](l[o],n,l),u===void 0))continue}n[o]=u}}return n}},{}],600:[function(e,v,M){v.exports=c;var r=e("./lib/vtext"),n=null,l=null;typeof document<"u"&&(n=document.createElement("canvas"),n.width=8192,n.height=1024,l=n.getContext("2d"));function c(t,f){return(typeof f!="object"||f===null)&&(f={}),r(t,f.canvas||n,f.context||l,f)}},{"./lib/vtext":601}],601:[function(e,v,M){v.exports=R,v.exports.processPixels=k;var r=e("surface-nets"),n=e("ndarray"),l=e("simplify-planar-graph"),c=e("clean-pslg"),t=e("cdt2d"),f=e("planar-graph-to-polyline"),a="b",o="b|",u="i",h="i|",i="sup",s="+",p="+1",d="sub",y="-",b="-1";function m(L,z,E,S){for(var C="<"+L+">",D="</"+L+">",F=C.length,N=D.length,G=z[0]===s||z[0]===y,U=0,X=-N;U>-1&&(U=E.indexOf(C,U),!(U===-1||(X=E.indexOf(D,U+F),X===-1)||X<=U));){for(var I=U;I<X+N;++I)if(I<U+F||I>=X)S[I]=null,E=E.substr(0,I)+" "+E.substr(I+1);else if(S[I]!==null){var B=S[I].indexOf(z[0]);B===-1?S[I]+=z:G&&(S[I]=S[I].substr(0,B+1)+(1+parseInt(S[I][B+1]))+S[I].substr(B+2))}var j=U+F,H=E.substr(j,X-j),K=H.indexOf(C);K!==-1?U=K:U=X+N}return S}function _(L,z,E){for(var S=z.textAlign||"start",C=z.textBaseline||"alphabetic",D=[1<<30,1<<30],F=[0,0],N=L.length,G=0;G<N;++G)for(var U=L[G],X=0;X<2;++X)D[X]=Math.min(D[X],U[X])|0,F[X]=Math.max(F[X],U[X])|0;var I=0;switch(S){case"center":I=-.5*(D[0]+F[0]);break;case"right":case"end":I=-F[0];break;case"left":case"start":I=-D[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+S+"'")}var B=0;switch(C){case"hanging":case"top":B=-D[1];break;case"middle":B=-.5*(D[1]+F[1]);break;case"alphabetic":case"ideographic":B=-3*E;break;case"bottom":B=-F[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+C+"'")}var j=1/E;return"lineHeight"in z?j*=+z.lineHeight:"width"in z?j=z.width/(F[0]-D[0]):"height"in z&&(j=z.height/(F[1]-D[1])),L.map(function(H){return[j*(H[0]+I),j*(H[1]+B)]})}function T(L,z,E,S,C,D){E=E.replace(/\n/g,""),D.breaklines===!0?E=E.replace(/\<br\>/g,`
`):E=E.replace(/\<br\>/g," ");var F="",N=[];for(oe=0;oe<E.length;++oe)N[oe]=F;D.bolds===!0&&(N=m(a,o,E,N)),D.italics===!0&&(N=m(u,h,E,N)),D.superscripts===!0&&(N=m(i,p,E,N)),D.subscripts===!0&&(N=m(d,b,E,N));var G=[],U="";for(oe=0;oe<E.length;++oe)N[oe]!==null&&(U+=E[oe],G.push(N[oe]));var X=U.split(`
`),I=X.length,B=Math.round(C*S),j=S,H=S*2,K=0,te=I*B+H;L.height<te&&(L.height=te),z.fillStyle="#000",z.fillRect(0,0,L.width,L.height),z.fillStyle="#fff";var J,oe,ie,Q,V,se=0,re="";function ee(){if(re!==""){var ke=z.measureText(re).width;z.fillText(re,j+ie,H+Q),ie+=ke}}function ae(){return""+Math.round(V)+"px "}function fe(ke,Pe){var je=""+z.font;if(D.subscripts===!0){var ze=ke.indexOf(y),Ze=Pe.indexOf(y),tt=ze>-1?parseInt(ke[1+ze]):0,Ce=Ze>-1?parseInt(Pe[1+Ze]):0;tt!==Ce&&(je=je.replace(ae(),"?px "),V*=Math.pow(.75,Ce-tt),je=je.replace("?px ",ae())),Q+=.25*B*(Ce-tt)}if(D.superscripts===!0){var Ae=ke.indexOf(s),Ne=Pe.indexOf(s),qe=Ae>-1?parseInt(ke[1+Ae]):0,At=Ne>-1?parseInt(Pe[1+Ne]):0;qe!==At&&(je=je.replace(ae(),"?px "),V*=Math.pow(.75,At-qe),je=je.replace("?px ",ae())),Q-=.25*B*(At-qe)}if(D.bolds===!0){var kt=ke.indexOf(o)>-1,Ve=Pe.indexOf(o)>-1;!kt&&Ve&&(ft?je=je.replace("italic ","italic bold "):je="bold "+je),kt&&!Ve&&(je=je.replace("bold ",""))}if(D.italics===!0){var ft=ke.indexOf(h)>-1,St=Pe.indexOf(h)>-1;!ft&&St&&(je="italic "+je),ft&&!St&&(je=je.replace("italic ",""))}z.font=je}for(J=0;J<I;++J){var de=X[J]+`
`;for(ie=0,Q=J*B,V=S,re="",oe=0;oe<de.length;++oe){var pe=oe+se<G.length?G[oe+se]:G[G.length-1];F===pe?re+=de[oe]:(ee(),re=de[oe],pe!==void 0&&(fe(F,pe),F=pe))}ee(),se+=de.length;var W=Math.round(ie+2*j)|0;K<W&&(K=W)}var ue=K,me=H+B*I,be=n(z.getImageData(0,0,ue,me).data,[me,ue,4]);return be.pick(-1,-1,0).transpose(1,0)}function g(L,z){var E=r(L,128);return z?l(E.cells,E.positions,.25):{edges:E.cells,positions:E.positions}}function A(L,z,E,S){var C=g(L,S),D=_(C.positions,z,E),F=C.edges,N=z.orientation==="ccw";if(c(D,F),z.polygons||z.polygon||z.polyline){for(var G=f(F,D),U=new Array(G.length),X=0;X<G.length;++X){for(var I=G[X],B=new Array(I.length),j=0;j<I.length;++j){for(var H=I[j],K=new Array(H.length),te=0;te<H.length;++te)K[te]=D[H[te]].slice();N&&K.reverse(),B[j]=K}U[X]=B}return U}else return z.triangles||z.triangulate||z.triangle?{cells:t(D,F,{delaunay:!1,exterior:!1,interior:!0}),positions:D}:{edges:F,positions:D}}function k(L,z,E){try{return A(L,z,E,!0)}catch{}try{return A(L,z,E,!1)}catch{}return z.polygons||z.polyline||z.polygon?[]:z.triangles||z.triangulate||z.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function R(L,z,E,S){var C=64,D=1.25,F={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};S&&(S.size&&S.size>0&&(C=S.size),S.lineSpacing&&S.lineSpacing>0&&(D=S.lineSpacing),S.styletags&&S.styletags.breaklines&&(F.breaklines=!!S.styletags.breaklines),S.styletags&&S.styletags.bolds&&(F.bolds=!!S.styletags.bolds),S.styletags&&S.styletags.italics&&(F.italics=!!S.styletags.italics),S.styletags&&S.styletags.subscripts&&(F.subscripts=!!S.styletags.subscripts),S.styletags&&S.styletags.superscripts&&(F.superscripts=!!S.styletags.superscripts)),E.font=[S.fontStyle,S.fontVariant,S.fontWeight,C+"px",S.font].filter(function(G){return G}).join(" "),E.textAlign="start",E.textBaseline="alphabetic",E.direction="ltr";var N=T(z,E,L,C,D,F);return k(N,S,C)}},{cdt2d:112,"clean-pslg":121,ndarray:495,"planar-graph-to-polyline":514,"simplify-planar-graph":562,"surface-nets":570}],602:[function(e,v,M){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function n(k){k.permitHostObjects___&&k.permitHostObjects___(n)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=n);var l=!1;if(typeof WeakMap=="function"){var c=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var t=new c,f=Object.freeze({});if(t.set(f,1),t.get(f)!==1)l=!0;else{v.exports=WeakMap;return}}}var a=Object.getOwnPropertyNames,o=Object.defineProperty,u=Object.isExtensible,h="weakmap:",i=h+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var s=new ArrayBuffer(25),p=new Uint8Array(s);crypto.getRandomValues(p),i=h+"rand:"+Array.prototype.map.call(p,function(k){return(k%36).toString(36)}).join("")+"___"}function d(k){return!(k.substr(0,h.length)==h&&k.substr(k.length-3)==="___")}if(o(Object,"getOwnPropertyNames",{value:function(R){return a(R).filter(d)}}),"getPropertyNames"in Object){var y=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(R){return y(R).filter(d)}})}function b(k){if(k!==Object(k))throw new TypeError("Not an object: "+k);var R=k[i];if(R&&R.key===k)return R;if(u(k)){R={key:k};try{return o(k,i,{value:R,writable:!1,enumerable:!1,configurable:!1}),R}catch{return}}}(function(){var k=Object.freeze;o(Object,"freeze",{value:function(E){return b(E),k(E)}});var R=Object.seal;o(Object,"seal",{value:function(E){return b(E),R(E)}});var L=Object.preventExtensions;o(Object,"preventExtensions",{value:function(E){return b(E),L(E)}})})();function m(k){return k.prototype=null,Object.freeze(k)}var _=!1;function T(){!_&&typeof console<"u"&&(_=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var g=0,A=function(){this instanceof A||T();var k=[],R=[],L=g++;function z(D,F){var N,G=b(D);return G?L in G?G[L]:F:(N=k.indexOf(D),N>=0?R[N]:F)}function E(D){var F=b(D);return F?L in F:k.indexOf(D)>=0}function S(D,F){var N,G=b(D);return G?G[L]=F:(N=k.indexOf(D),N>=0?R[N]=F:(N=k.length,R[N]=F,k[N]=D)),this}function C(D){var F=b(D),N,G;return F?L in F&&delete F[L]:(N=k.indexOf(D),N<0?!1:(G=k.length-1,k[N]=void 0,R[N]=R[G],k[N]=k[G],k.length=G,R.length=G,!0))}return Object.create(A.prototype,{get___:{value:m(z)},has___:{value:m(E)},set___:{value:m(S)},delete___:{value:m(C)}})};A.prototype=Object.create(Object.prototype,{get:{value:function(R,L){return this.get___(R,L)},writable:!0,configurable:!0},has:{value:function(R){return this.has___(R)},writable:!0,configurable:!0},set:{value:function(R,L){return this.set___(R,L)},writable:!0,configurable:!0},delete:{value:function(R){return this.delete___(R)},writable:!0,configurable:!0}}),typeof c=="function"?function(){l&&typeof Proxy<"u"&&(Proxy=void 0);function k(){this instanceof A||T();var R=new c,L=void 0,z=!1;function E(F,N){return L?R.has(F)?R.get(F):L.get___(F,N):R.get(F,N)}function S(F){return R.has(F)||(L?L.has___(F):!1)}var C;l?C=function(F,N){return R.set(F,N),R.has(F)||(L||(L=new A),L.set(F,N)),this}:C=function(F,N){if(z)try{R.set(F,N)}catch{L||(L=new A),L.set___(F,N)}else R.set(F,N);return this};function D(F){var N=!!R.delete(F);return L&&L.delete___(F)||N}return Object.create(A.prototype,{get___:{value:m(E)},has___:{value:m(S)},set___:{value:m(C)},delete___:{value:m(D)},permitHostObjects___:{value:m(function(F){if(F===n)z=!0;else throw new Error("bogus call to permitHostObjects___")})}})}k.prototype=A.prototype,v.exports=k,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),v.exports=A)})()},{}],603:[function(e,v,M){var r=e("./hidden-store.js");v.exports=n;function n(){var l={};return function(c){if((typeof c!="object"||c===null)&&typeof c!="function")throw new Error("Weakmap-shim: Key must be object");var t=c.valueOf(l);return t&&t.identity===l?t:r(c,l)}}},{"./hidden-store.js":604}],604:[function(e,v,M){v.exports=r;function r(n,l){var c={identity:l},t=n.valueOf;return Object.defineProperty(n,"valueOf",{value:function(f){return f!==l?t.apply(this,arguments):c},writable:!0}),c}},{}],605:[function(e,v,M){var r=e("./create-store.js");v.exports=n;function n(){var l=r();return{get:function(c,t){var f=l(c);return f.hasOwnProperty("value")?f.value:t},set:function(c,t){return l(c).value=t,this},has:function(c){return"value"in l(c)},delete:function(c){return delete l(c).value}}}},{"./create-store.js":603}],606:[function(e,v,M){var r=e("get-canvas-context");v.exports=function(l){return r("webgl",l)}},{"get-canvas-context":249}],607:[function(e,v,M){var r=e("../main"),n=e("object-assign"),l=r.instance();function c(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}c.prototype=new r.baseCalendar,n(c.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(p,d){if(typeof p=="string"){var y=p.match(f);return y?y[0]:""}var b=this._validateYear(p),m=p.month(),_=""+this.toChineseMonth(b,m);return d&&_.length<2&&(_="0"+_),this.isIntercalaryMonth(b,m)&&(_+="i"),_},monthNames:function(p){if(typeof p=="string"){var d=p.match(a);return d?d[0]:""}var y=this._validateYear(p),b=p.month(),m=this.toChineseMonth(y,b),_=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][m-1];return this.isIntercalaryMonth(y,b)&&(_="闰"+_),_},monthNamesShort:function(p){if(typeof p=="string"){var d=p.match(o);return d?d[0]:""}var y=this._validateYear(p),b=p.month(),m=this.toChineseMonth(y,b),_=["一","二","三","四","五","六","七","八","九","十","十一","十二"][m-1];return this.isIntercalaryMonth(y,b)&&(_="闰"+_),_},parseMonth:function(p,d){p=this._validateYear(p);var y=parseInt(d),b;if(isNaN(y))d[0]==="闰"&&(b=!0,d=d.substring(1)),d[d.length-1]==="月"&&(d=d.substring(0,d.length-1)),y=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(d);else{var m=d[d.length-1];b=m==="i"||m==="I"}var _=this.toMonthIndex(p,y,b);return _},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(p,d){if(p.year&&(p=p.year()),typeof p!="number"||p<1888||p>2111)throw d.replace(/\{0\}/,this.local.name);return p},toMonthIndex:function(p,d,y){var b=this.intercalaryMonth(p),m=y&&d!==b;if(m||d<1||d>12)throw r.local.invalidMonth.replace(/\{0\}/,this.local.name);var _;return b?!y&&d<=b?_=d-1:_=d:_=d-1,_},toChineseMonth:function(p,d){p.year&&(p=p.year(),d=p.month());var y=this.intercalaryMonth(p),b=y?12:11;if(d<0||d>b)throw r.local.invalidMonth.replace(/\{0\}/,this.local.name);var m;return y?d<y?m=d+1:m=d:m=d+1,m},intercalaryMonth:function(p){p=this._validateYear(p);var d=u[p-u[0]],y=d>>13;return y},isIntercalaryMonth:function(p,d){p.year&&(p=p.year(),d=p.month());var y=this.intercalaryMonth(p);return!!y&&y===d},leapYear:function(p){return this.intercalaryMonth(p)!==0},weekOfYear:function(p,d,y){var b=this._validateYear(p,r.local.invalidyear),m=h[b-h[0]],_=m>>9&4095,T=m>>5&15,g=m&31,A;A=l.newDate(_,T,g),A.add(4-(A.dayOfWeek()||7),"d");var k=this.toJD(p,d,y)-A.toJD();return 1+Math.floor(k/7)},monthsInYear:function(p){return this.leapYear(p)?13:12},daysInMonth:function(p,d){p.year&&(d=p.month(),p=p.year()),p=this._validateYear(p);var y=u[p-u[0]],b=y>>13,m=b?12:11;if(d>m)throw r.local.invalidMonth.replace(/\{0\}/,this.local.name);var _=y&1<<12-d?30:29;return _},weekDay:function(p,d,y){return(this.dayOfWeek(p,d,y)||7)<6},toJD:function(p,d,y){var b=this._validate(p,_,y,r.local.invalidDate);p=this._validateYear(b.year()),d=b.month(),y=b.day();var m=this.isIntercalaryMonth(p,d),_=this.toChineseMonth(p,d),T=s(p,_,y,m);return l.toJD(T.year,T.month,T.day)},fromJD:function(p){var d=l.fromJD(p),y=i(d.year(),d.month(),d.day()),b=this.toMonthIndex(y.year,y.month,y.isIntercalary);return this.newDate(y.year,b,y.day)},fromString:function(p){var d=p.match(t),y=this._validateYear(+d[1]),b=+d[2],m=!!d[3],_=this.toMonthIndex(y,b,m),T=+d[4];return this.newDate(y,_,T)},add:function(p,d,y){var b=p.year(),m=p.month(),_=this.isIntercalaryMonth(b,m),T=this.toChineseMonth(b,m),g=Object.getPrototypeOf(c.prototype).add.call(this,p,d,y);if(y==="y"){var A=g.year(),k=g.month(),R=this.isIntercalaryMonth(A,T),L=_&&R?this.toMonthIndex(A,T,!0):this.toMonthIndex(A,T,!1);L!==k&&g.month(L)}return g}});var t=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,f=/^\d?\d[iI]?/m,a=/^闰?十?[一二三四五六七八九]?月/m,o=/^闰?十?[一二三四五六七八九]?/m;r.calendars.chinese=c;var u=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],h=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function i(p,d,y,b){var m,_;if(typeof p=="object")m=p,_=d||{};else{var T=typeof p=="number"&&p>=1888&&p<=2111;if(!T)throw new Error("Solar year outside range 1888-2111");var g=typeof d=="number"&&d>=1&&d<=12;if(!g)throw new Error("Solar month outside range 1 - 12");var A=typeof y=="number"&&y>=1&&y<=31;if(!A)throw new Error("Solar day outside range 1 - 31");m={year:p,month:d,day:y},_=b||{}}var k=h[m.year-h[0]],R=m.year<<9|m.month<<5|m.day;_.year=R>=k?m.year:m.year-1,k=h[_.year-h[0]];var L=k>>9&4095,z=k>>5&15,E=k&31,S,C=new Date(L,z-1,E),D=new Date(m.year,m.month-1,m.day);S=Math.round((D-C)/(24*3600*1e3));var F=u[_.year-u[0]],N;for(N=0;N<13;N++){var G=F&1<<12-N?30:29;if(S<G)break;S-=G}var U=F>>13;return!U||N<U?(_.isIntercalary=!1,_.month=1+N):N===U?(_.isIntercalary=!0,_.month=N):(_.isIntercalary=!1,_.month=N),_.day=1+S,_}function s(p,d,y,b,m){var _,T;if(typeof p=="object")T=p,_=d||{};else{var g=typeof p=="number"&&p>=1888&&p<=2111;if(!g)throw new Error("Lunar year outside range 1888-2111");var A=typeof d=="number"&&d>=1&&d<=12;if(!A)throw new Error("Lunar month outside range 1 - 12");var k=typeof y=="number"&&y>=1&&y<=30;if(!k)throw new Error("Lunar day outside range 1 - 30");var R;typeof b=="object"?(R=!1,_=b):(R=!!b,_=m||{}),T={year:p,month:d,day:y,isIntercalary:R}}var L;L=T.day-1;var z=u[T.year-u[0]],E=z>>13,S;E&&(T.month>E||T.isIntercalary)?S=T.month:S=T.month-1;for(var C=0;C<S;C++){var D=z&1<<12-C?30:29;L+=D}var F=h[T.year-h[0]],N=F>>9&4095,G=F>>5&15,U=F&31,X=new Date(N,G-1,U+L);return _.year=X.getFullYear(),_.month=1+X.getMonth(),_.day=X.getDate(),_}},{"../main":621,"object-assign":499}],608:[function(e,v,M){var r=e("../main"),n=e("object-assign");function l(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}l.prototype=new r.baseCalendar,n(l.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){var t=this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),f=t.year()+(t.year()<0?1:0);return f%4===3||f%4===-1},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(c,t,f){var a=this.newDate(c,t,f);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(c,t){var f=this._validate(c,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===13&&this.leapYear(f.year())?1:0)},weekDay:function(c,t,f){return(this.dayOfWeek(c,t,f)||7)<6},toJD:function(c,t,f){var a=this._validate(c,t,f,r.local.invalidDate);return c=a.year(),c<0&&c++,a.day()+(a.month()-1)*30+(c-1)*365+Math.floor(c/4)+this.jdEpoch-1},fromJD:function(c){var t=Math.floor(c)+.5-this.jdEpoch,f=Math.floor((t-Math.floor((t+366)/1461))/365)+1;f<=0&&f--,t=Math.floor(c)+.5-this.newDate(f,1,1).toJD();var a=Math.floor(t/30)+1,o=t-(a-1)*30+1;return this.newDate(f,a,o)}}),r.calendars.coptic=l},{"../main":621,"object-assign":499}],609:[function(e,v,M){var r=e("../main"),n=e("object-assign");function l(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}l.prototype=new r.baseCalendar,n(l.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(t){return this._validate(t,this.minMonth,this.minDay,r.local.invalidYear),!1},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,r.local.invalidYear),13},daysInYear:function(t){return this._validate(t,this.minMonth,this.minDay,r.local.invalidYear),400},weekOfYear:function(t,f,a){var o=this.newDate(t,f,a);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/8)+1},daysInMonth:function(t,f){var a=this._validate(t,f,this.minDay,r.local.invalidMonth);return this.daysPerMonth[a.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(t,f,a){var o=this._validate(t,f,a,r.local.invalidDate);return(o.day()+1)%8},weekDay:function(t,f,a){var o=this.dayOfWeek(t,f,a);return o>=2&&o<=6},extraInfo:function(t,f,a){var o=this._validate(t,f,a,r.local.invalidDate);return{century:c[Math.floor((o.year()-1)/100)+1]||""}},toJD:function(t,f,a){var o=this._validate(t,f,a,r.local.invalidDate);return t=o.year()+(o.year()<0?1:0),f=o.month(),a=o.day(),a+(f>1?16:0)+(f>2?(f-2)*32:0)+(t-1)*400+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t+.5)-Math.floor(this.jdEpoch)-1;var f=Math.floor(t/400)+1;t-=(f-1)*400,t+=t>15?16:0;var a=Math.floor(t/32)+1,o=t-(a-1)*32+1;return this.newDate(f<=0?f-1:f,a,o)}});var c={20:"Fruitbat",21:"Anchovy"};r.calendars.discworld=l},{"../main":621,"object-assign":499}],610:[function(e,v,M){var r=e("../main"),n=e("object-assign");function l(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}l.prototype=new r.baseCalendar,n(l.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){var t=this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),f=t.year()+(t.year()<0?1:0);return f%4===3||f%4===-1},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(c,t,f){var a=this.newDate(c,t,f);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(c,t){var f=this._validate(c,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===13&&this.leapYear(f.year())?1:0)},weekDay:function(c,t,f){return(this.dayOfWeek(c,t,f)||7)<6},toJD:function(c,t,f){var a=this._validate(c,t,f,r.local.invalidDate);return c=a.year(),c<0&&c++,a.day()+(a.month()-1)*30+(c-1)*365+Math.floor(c/4)+this.jdEpoch-1},fromJD:function(c){var t=Math.floor(c)+.5-this.jdEpoch,f=Math.floor((t-Math.floor((t+366)/1461))/365)+1;f<=0&&f--,t=Math.floor(c)+.5-this.newDate(f,1,1).toJD();var a=Math.floor(t/30)+1,o=t-(a-1)*30+1;return this.newDate(f,a,o)}}),r.calendars.ethiopian=l},{"../main":621,"object-assign":499}],611:[function(e,v,M){var r=e("../main"),n=e("object-assign");function l(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}l.prototype=new r.baseCalendar,n(l.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var f=this._validate(t,this.minMonth,this.minDay,r.local.invalidYear);return this._leapYear(f.year())},_leapYear:function(t){return t=t<0?t+1:t,c(t*7+1,19)<7},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,r.local.invalidYear),this._leapYear(t.year?t.year():t)?13:12},weekOfYear:function(t,f,a){var o=this.newDate(t,f,a);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(t){var f=this._validate(t,this.minMonth,this.minDay,r.local.invalidYear);return t=f.year(),this.toJD(t===-1?1:t+1,7,1)-this.toJD(t,7,1)},daysInMonth:function(t,f){return t.year&&(f=t.month(),t=t.year()),this._validate(t,f,this.minDay,r.local.invalidMonth),f===12&&this.leapYear(t)||f===8&&c(this.daysInYear(t),10)===5?30:f===9&&c(this.daysInYear(t),10)===3?29:this.daysPerMonth[f-1]},weekDay:function(t,f,a){return this.dayOfWeek(t,f,a)!==6},extraInfo:function(t,f,a){var o=this._validate(t,f,a,r.local.invalidDate);return{yearType:(this.leapYear(o)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(o)%10-3]}},toJD:function(t,f,a){var o=this._validate(t,f,a,r.local.invalidDate);t=o.year(),f=o.month(),a=o.day();var u=t<=0?t+1:t,h=this.jdEpoch+this._delay1(u)+this._delay2(u)+a+1;if(f<7){for(var i=7;i<=this.monthsInYear(t);i++)h+=this.daysInMonth(t,i);for(var i=1;i<f;i++)h+=this.daysInMonth(t,i)}else for(var i=7;i<f;i++)h+=this.daysInMonth(t,i);return h},_delay1:function(t){var f=Math.floor((235*t-234)/19),a=12084+13753*f,o=f*29+Math.floor(a/25920);return c(3*(o+1),7)<3&&o++,o},_delay2:function(t){var f=this._delay1(t-1),a=this._delay1(t),o=this._delay1(t+1);return o-a===356?2:a-f===382?1:0},fromJD:function(t){t=Math.floor(t)+.5;for(var f=Math.floor((t-this.jdEpoch)*98496/35975351)-1;t>=this.toJD(f===-1?1:f+1,7,1);)f++;for(var a=t<this.toJD(f,1,1)?7:1;t>this.toJD(f,a,this.daysInMonth(f,a));)a++;var o=t-this.toJD(f,a,1)+1;return this.newDate(f,a,o)}});function c(t,f){return t-f*Math.floor(t/f)}r.calendars.hebrew=l},{"../main":621,"object-assign":499}],612:[function(e,v,M){var r=e("../main"),n=e("object-assign");function l(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}l.prototype=new r.baseCalendar,n(l.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(c){var t=this._validate(c,this.minMonth,this.minDay,r.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(c,t,f){var a=this.newDate(c,t,f);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(c){return this.leapYear(c)?355:354},daysInMonth:function(c,t){var f=this._validate(c,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===12&&this.leapYear(f.year())?1:0)},weekDay:function(c,t,f){return this.dayOfWeek(c,t,f)!==5},toJD:function(c,t,f){var a=this._validate(c,t,f,r.local.invalidDate);return c=a.year(),t=a.month(),f=a.day(),c=c<=0?c+1:c,f+Math.ceil(29.5*(t-1))+(c-1)*354+Math.floor((3+11*c)/30)+this.jdEpoch-1},fromJD:function(c){c=Math.floor(c)+.5;var t=Math.floor((30*(c-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var f=Math.min(12,Math.ceil((c-29-this.toJD(t,1,1))/29.5)+1),a=c-this.toJD(t,f,1)+1;return this.newDate(t,f,a)}}),r.calendars.islamic=l},{"../main":621,"object-assign":499}],613:[function(e,v,M){var r=e("../main"),n=e("object-assign");function l(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}l.prototype=new r.baseCalendar,n(l.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){var t=this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),f=t.year()<0?t.year()+1:t.year();return f%4===0},weekOfYear:function(c,t,f){var a=this.newDate(c,t,f);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(c,t){var f=this._validate(c,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===2&&this.leapYear(f.year())?1:0)},weekDay:function(c,t,f){return(this.dayOfWeek(c,t,f)||7)<6},toJD:function(c,t,f){var a=this._validate(c,t,f,r.local.invalidDate);return c=a.year(),t=a.month(),f=a.day(),c<0&&c++,t<=2&&(c--,t+=12),Math.floor(365.25*(c+4716))+Math.floor(30.6001*(t+1))+f-1524.5},fromJD:function(c){var t=Math.floor(c+.5),f=t+1524,a=Math.floor((f-122.1)/365.25),o=Math.floor(365.25*a),u=Math.floor((f-o)/30.6001),h=u-Math.floor(u<14?1:13),i=a-Math.floor(h>2?4716:4715),s=f-o-Math.floor(30.6001*u);return i<=0&&i--,this.newDate(i,h,s)}}),r.calendars.julian=l},{"../main":621,"object-assign":499}],614:[function(e,v,M){var r=e("../main"),n=e("object-assign");function l(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}l.prototype=new r.baseCalendar,n(l.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(f){return this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),!1},formatYear:function(f){var a=this._validate(f,this.minMonth,this.minDay,r.local.invalidYear);f=a.year();var o=Math.floor(f/400);f=f%400,f+=f<0?400:0;var u=Math.floor(f/20);return o+"."+u+"."+f%20},forYear:function(f){if(f=f.split("."),f.length<3)throw"Invalid Mayan year";for(var a=0,o=0;o<f.length;o++){var u=parseInt(f[o],10);if(Math.abs(u)>19||o>0&&u<0)throw"Invalid Mayan year";a=a*20+u}return a},monthsInYear:function(f){return this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),18},weekOfYear:function(f,a,o){return this._validate(f,a,o,r.local.invalidDate),0},daysInYear:function(f){return this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),360},daysInMonth:function(f,a){return this._validate(f,a,this.minDay,r.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(f,a,o){var u=this._validate(f,a,o,r.local.invalidDate);return u.day()},weekDay:function(f,a,o){return this._validate(f,a,o,r.local.invalidDate),!0},extraInfo:function(f,a,o){var u=this._validate(f,a,o,r.local.invalidDate),h=u.toJD(),i=this._toHaab(h),s=this._toTzolkin(h);return{haabMonthName:this.local.haabMonths[i[0]-1],haabMonth:i[0],haabDay:i[1],tzolkinDayName:this.local.tzolkinMonths[s[0]-1],tzolkinDay:s[0],tzolkinTrecena:s[1]}},_toHaab:function(f){f-=this.jdEpoch;var a=c(f+8+(18-1)*20,365);return[Math.floor(a/20)+1,c(a,20)]},_toTzolkin:function(f){return f-=this.jdEpoch,[t(f+20,20),t(f+4,13)]},toJD:function(f,a,o){var u=this._validate(f,a,o,r.local.invalidDate);return u.day()+u.month()*20+u.year()*360+this.jdEpoch},fromJD:function(f){f=Math.floor(f)+.5-this.jdEpoch;var a=Math.floor(f/360);f=f%360,f+=f<0?360:0;var o=Math.floor(f/20),u=f%20;return this.newDate(a,o,u)}});function c(f,a){return f-a*Math.floor(f/a)}function t(f,a){return c(f-1,a)+1}r.calendars.mayan=l},{"../main":621,"object-assign":499}],615:[function(e,v,M){var r=e("../main"),n=e("object-assign");function l(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}l.prototype=new r.baseCalendar;var c=r.instance("gregorian");n(l.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var f=this._validate(t,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear);return c.leapYear(f.year()+(f.year()<1?1:0)+1469)},weekOfYear:function(t,f,a){var o=this.newDate(t,f,a);return o.add(1-(o.dayOfWeek()||7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(t,f){var a=this._validate(t,f,this.minDay,r.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(t,f,a){return(this.dayOfWeek(t,f,a)||7)<6},toJD:function(u,f,a){var o=this._validate(u,f,a,r.local.invalidMonth),u=o.year();u<0&&u++;for(var h=o.day(),i=1;i<o.month();i++)h+=this.daysPerMonth[i-1];return h+c.toJD(u+1468,3,13)},fromJD:function(t){t=Math.floor(t+.5);for(var f=Math.floor((t-(this.jdEpoch-1))/366);t>=this.toJD(f+1,1,1);)f++;for(var a=t-Math.floor(this.toJD(f,1,1)+.5)+1,o=1;a>this.daysInMonth(f,o);)a-=this.daysInMonth(f,o),o++;return this.newDate(f,o,a)}}),r.calendars.nanakshahi=l},{"../main":621,"object-assign":499}],616:[function(e,v,M){var r=e("../main"),n=e("object-assign");function l(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}l.prototype=new r.baseCalendar,n(l.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(c){return this.daysInYear(c)!==this.daysPerYear},weekOfYear:function(c,t,f){var a=this.newDate(c,t,f);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(c){var t=this._validate(c,this.minMonth,this.minDay,r.local.invalidYear);if(c=t.year(),typeof this.NEPALI_CALENDAR_DATA[c]>"u")return this.daysPerYear;for(var f=0,a=this.minMonth;a<=12;a++)f+=this.NEPALI_CALENDAR_DATA[c][a];return f},daysInMonth:function(c,t){return c.year&&(t=c.month(),c=c.year()),this._validate(c,t,this.minDay,r.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[c]>"u"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[c][t]},weekDay:function(c,t,f){return this.dayOfWeek(c,t,f)!==6},toJD:function(c,t,f){var a=this._validate(c,t,f,r.local.invalidDate);c=a.year(),t=a.month(),f=a.day();var o=r.instance(),u=0,h=t,i=c;this._createMissingCalendarData(c);var s=c-(h>9||h===9&&f>=this.NEPALI_CALENDAR_DATA[i][0]?56:57);for(t!==9&&(u=f,h--);h!==9;)h<=0&&(h=12,i--),u+=this.NEPALI_CALENDAR_DATA[i][h],h--;return t===9?(u+=f-this.NEPALI_CALENDAR_DATA[i][0],u<0&&(u+=o.daysInYear(s))):u+=this.NEPALI_CALENDAR_DATA[i][9]-this.NEPALI_CALENDAR_DATA[i][0],o.newDate(s,1,1).add(u,"d").toJD()},fromJD:function(c){var t=r.instance(),f=t.fromJD(c),a=f.year(),o=f.dayOfYear(),u=a+56;this._createMissingCalendarData(u);for(var h=9,i=this.NEPALI_CALENDAR_DATA[u][0],s=this.NEPALI_CALENDAR_DATA[u][h]-i+1;o>s;)h++,h>12&&(h=1,u++),s+=this.NEPALI_CALENDAR_DATA[u][h];var p=this.NEPALI_CALENDAR_DATA[u][h]-(s-o);return this.newDate(u,h,p)},_createMissingCalendarData:function(c){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var f=c-1;f<c+2;f++)typeof this.NEPALI_CALENDAR_DATA[f]>"u"&&(this.NEPALI_CALENDAR_DATA[f]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),r.calendars.nepali=l},{"../main":621,"object-assign":499}],617:[function(e,v,M){var r=e("../main"),n=e("object-assign");function l(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}l.prototype=new r.baseCalendar,n(l.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chæharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Chæ","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(t){var f=this._validate(t,this.minMonth,this.minDay,r.local.invalidYear);return((f.year()-(f.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(t,f,a){var o=this.newDate(t,f,a);return o.add(-((o.dayOfWeek()+1)%7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(t,f){var a=this._validate(t,f,this.minDay,r.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(t,f,a){return this.dayOfWeek(t,f,a)!==5},toJD:function(t,f,a){var o=this._validate(t,f,a,r.local.invalidDate);t=o.year(),f=o.month(),a=o.day();var u=t-(t>=0?474:473),h=474+c(u,2820);return a+(f<=7?(f-1)*31:(f-1)*30+6)+Math.floor((h*682-110)/2816)+(h-1)*365+Math.floor(u/2820)*1029983+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t)+.5;var f=t-this.toJD(475,1,1),a=Math.floor(f/1029983),o=c(f,1029983),u=2820;if(o!==1029982){var h=Math.floor(o/366),i=c(o,366);u=Math.floor((2134*h+2816*i+2815)/1028522)+h+1}var s=u+2820*a+474;s=s<=0?s-1:s;var p=t-this.toJD(s,1,1)+1,d=p<=186?Math.ceil(p/31):Math.ceil((p-6)/30),y=t-this.toJD(s,d,1)+1;return this.newDate(s,d,y)}});function c(t,f){return t-f*Math.floor(t/f)}r.calendars.persian=l,r.calendars.jalali=l},{"../main":621,"object-assign":499}],618:[function(e,v,M){var r=e("../main"),n=e("object-assign"),l=r.instance();function c(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}c.prototype=new r.baseCalendar,n(c.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(a){var f=this._validate(a,this.minMonth,this.minDay,r.local.invalidYear),a=this._t2gYear(f.year());return l.leapYear(a)},weekOfYear:function(u,f,a){var o=this._validate(u,this.minMonth,this.minDay,r.local.invalidYear),u=this._t2gYear(o.year());return l.weekOfYear(u,o.month(),o.day())},daysInMonth:function(t,f){var a=this._validate(t,f,this.minDay,r.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(t,f,a){return(this.dayOfWeek(t,f,a)||7)<6},toJD:function(u,f,a){var o=this._validate(u,f,a,r.local.invalidDate),u=this._t2gYear(o.year());return l.toJD(u,o.month(),o.day())},fromJD:function(t){var f=l.fromJD(t),a=this._g2tYear(f.year());return this.newDate(a,f.month(),f.day())},_t2gYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)},_g2tYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)}}),r.calendars.taiwan=c},{"../main":621,"object-assign":499}],619:[function(e,v,M){var r=e("../main"),n=e("object-assign"),l=r.instance();function c(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}c.prototype=new r.baseCalendar,n(c.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var f=this._validate(a,this.minMonth,this.minDay,r.local.invalidYear),a=this._t2gYear(f.year());return l.leapYear(a)},weekOfYear:function(u,f,a){var o=this._validate(u,this.minMonth,this.minDay,r.local.invalidYear),u=this._t2gYear(o.year());return l.weekOfYear(u,o.month(),o.day())},daysInMonth:function(t,f){var a=this._validate(t,f,this.minDay,r.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(t,f,a){return(this.dayOfWeek(t,f,a)||7)<6},toJD:function(u,f,a){var o=this._validate(u,f,a,r.local.invalidDate),u=this._t2gYear(o.year());return l.toJD(u,o.month(),o.day())},fromJD:function(t){var f=l.fromJD(t),a=this._g2tYear(f.year());return this.newDate(a,f.month(),f.day())},_t2gYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)},_g2tYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)}}),r.calendars.thai=c},{"../main":621,"object-assign":499}],620:[function(e,v,M){var r=e("../main"),n=e("object-assign");function l(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}l.prototype=new r.baseCalendar,n(l.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(t){var f=this._validate(t,this.minMonth,this.minDay,r.local.invalidYear);return this.daysInYear(f.year())===355},weekOfYear:function(t,f,a){var o=this.newDate(t,f,a);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(t){for(var f=0,a=1;a<=12;a++)f+=this.daysInMonth(t,a);return f},daysInMonth:function(t,f){for(var a=this._validate(t,f,this.minDay,r.local.invalidMonth),o=a.toJD()-24e5+.5,u=0,h=0;h<c.length;h++){if(c[h]>o)return c[u]-c[u-1];u++}return 30},weekDay:function(t,f,a){return this.dayOfWeek(t,f,a)!==5},toJD:function(t,f,a){var o=this._validate(t,f,a,r.local.invalidDate),u=12*(o.year()-1)+o.month()-15292,h=o.day()+c[u-1]-1;return h+24e5-.5},fromJD:function(t){for(var f=t-24e5+.5,a=0,o=0;o<c.length&&!(c[o]>f);o++)a++;var u=a+15292,h=Math.floor((u-1)/12),i=h+1,s=u-12*h,p=f-c[a-1]+1;return this.newDate(i,s,p)},isValid:function(t,f,a){var o=r.baseCalendar.prototype.isValid.apply(this,arguments);return o&&(t=t.year!=null?t.year:t,o=t>=1276&&t<=1500),o},_validate:function(t,f,a,o){var u=r.baseCalendar.prototype._validate.apply(this,arguments);if(u.year<1276||u.year>1500)throw o.replace(/\{0\}/,this.local.name);return u}}),r.calendars.ummalqura=l;var c=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":621,"object-assign":499}],621:[function(e,v,M){var r=e("object-assign");function n(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}r(n.prototype,{instance:function(o,u){o=(o||"gregorian").toLowerCase(),u=u||"";var h=this._localCals[o+"-"+u];if(!h&&this.calendars[o]&&(h=new this.calendars[o](u),this._localCals[o+"-"+u]=h),!h)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,o);return h},newDate:function(o,u,h,i,s){return i=(o!=null&&o.year?o.calendar():typeof i=="string"?this.instance(i,s):i)||this.instance(),i.newDate(o,u,h)},substituteDigits:function(o){return function(u){return(u+"").replace(/[0-9]/g,function(h){return o[h]})}},substituteChineseDigits:function(o,u){return function(h){for(var i="",s=0;h>0;){var p=h%10;i=(p===0?"":o[p]+u[s])+i,s++,h=Math.floor(h/10)}return i.indexOf(o[1]+u[1])===0&&(i=i.substr(1)),i||o[0]}}});function l(o,u,h,i){if(this._calendar=o,this._year=u,this._month=h,this._day=i,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function c(o,u){return o=""+o,"000000".substring(0,u-o.length)+o}r(l.prototype,{newDate:function(o,u,h){return this._calendar.newDate(o??this,u,h)},year:function(o){return arguments.length===0?this._year:this.set(o,"y")},month:function(o){return arguments.length===0?this._month:this.set(o,"m")},day:function(o){return arguments.length===0?this._day:this.set(o,"d")},date:function(o,u,h){if(!this._calendar.isValid(o,u,h))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=o,this._month=u,this._day=h,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(o,u){return this._calendar.add(this,o,u)},set:function(o,u){return this._calendar.set(this,o,u)},compareTo:function(o){if(this._calendar.name!==o._calendar.name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,o._calendar.local.name);var u=this._year!==o._year?this._year-o._year:this._month!==o._month?this.monthOfYear()-o.monthOfYear():this._day-o._day;return u===0?0:u<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(o){return this._calendar.fromJD(o)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(o){return this._calendar.fromJSDate(o)},toString:function(){return(this.year()<0?"-":"")+c(Math.abs(this.year()),4)+"-"+c(this.month(),2)+"-"+c(this.day(),2)}});function t(){this.shortYearCutoff="+10"}r(t.prototype,{_validateLevel:0,newDate:function(o,u,h){return o==null?this.today():(o.year&&(this._validate(o,u,h,a.local.invalidDate||a.regionalOptions[""].invalidDate),h=o.day(),u=o.month(),o=o.year()),new l(this,o,u,h))},today:function(){return this.fromJSDate(new Date)},epoch:function(o){var u=this._validate(o,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return u.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(o){var u=this._validate(o,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return(u.year()<0?"-":"")+c(Math.abs(u.year()),4)},monthsInYear:function(o){return this._validate(o,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),12},monthOfYear:function(o,u){var h=this._validate(o,u,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return(h.month()+this.monthsInYear(h)-this.firstMonth)%this.monthsInYear(h)+this.minMonth},fromMonthOfYear:function(o,u){var h=(u+this.firstMonth-2*this.minMonth)%this.monthsInYear(o)+this.minMonth;return this._validate(o,h,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth),h},daysInYear:function(o){var u=this._validate(o,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return this.leapYear(u)?366:365},dayOfYear:function(o,u,h){var i=this._validate(o,u,h,a.local.invalidDate||a.regionalOptions[""].invalidDate);return i.toJD()-this.newDate(i.year(),this.fromMonthOfYear(i.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(o,u,h){var i=this._validate(o,u,h,a.local.invalidDate||a.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(i))+2)%this.daysInWeek()},extraInfo:function(o,u,h){return this._validate(o,u,h,a.local.invalidDate||a.regionalOptions[""].invalidDate),{}},add:function(o,u,h){return this._validate(o,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate),this._correctAdd(o,this._add(o,u,h),u,h)},_add:function(o,u,h){if(this._validateLevel++,h==="d"||h==="w"){var i=o.toJD()+u*(h==="w"?this.daysInWeek():1),s=o.calendar().fromJD(i);return this._validateLevel--,[s.year(),s.month(),s.day()]}try{var p=o.year()+(h==="y"?u:0),d=o.monthOfYear()+(h==="m"?u:0),s=o.day(),y=function(_){for(;d<_.minMonth;)p--,d+=_.monthsInYear(p);for(var T=_.monthsInYear(p);d>T-1+_.minMonth;)p++,d-=T,T=_.monthsInYear(p)};h==="y"?(o.month()!==this.fromMonthOfYear(p,d)&&(d=this.newDate(p,o.month(),this.minDay).monthOfYear()),d=Math.min(d,this.monthsInYear(p)),s=Math.min(s,this.daysInMonth(p,this.fromMonthOfYear(p,d)))):h==="m"&&(y(this),s=Math.min(s,this.daysInMonth(p,this.fromMonthOfYear(p,d))));var b=[p,this.fromMonthOfYear(p,d),s];return this._validateLevel--,b}catch(m){throw this._validateLevel--,m}},_correctAdd:function(o,u,h,i){if(!this.hasYearZero&&(i==="y"||i==="m")&&(u[0]===0||o.year()>0!=u[0]>0)){var s={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[i],p=h<0?-1:1;u=this._add(o,h*s[0]+p*s[1],s[2])}return o.date(u[0],u[1],u[2])},set:function(o,u,h){this._validate(o,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate);var i=h==="y"?u:o.year(),s=h==="m"?u:o.month(),p=h==="d"?u:o.day();return(h==="y"||h==="m")&&(p=Math.min(p,this.daysInMonth(i,s))),o.date(i,s,p)},isValid:function(o,u,h){this._validateLevel++;var i=this.hasYearZero||o!==0;if(i){var s=this.newDate(o,u,this.minDay);i=u>=this.minMonth&&u-this.minMonth<this.monthsInYear(s)&&h>=this.minDay&&h-this.minDay<this.daysInMonth(s)}return this._validateLevel--,i},toJSDate:function(o,u,h){var i=this._validate(o,u,h,a.local.invalidDate||a.regionalOptions[""].invalidDate);return a.instance().fromJD(this.toJD(i)).toJSDate()},fromJSDate:function(o){return this.fromJD(a.instance().fromJSDate(o).toJD())},_validate:function(o,u,h,i){if(o.year){if(this._validateLevel===0&&this.name!==o.calendar().name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,o.calendar().local.name);return o}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(o,u,h))throw i.replace(/\{0\}/,this.local.name);var s=this.newDate(o,u,h);return this._validateLevel--,s}catch(p){throw this._validateLevel--,p}}});function f(o){this.local=this.regionalOptions[o]||this.regionalOptions[""]}f.prototype=new t,r(f.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var u=this._validate(h,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),h=u.year()+(u.year()<0?1:0);return h%4===0&&(h%100!==0||h%400===0)},weekOfYear:function(o,u,h){var i=this.newDate(o,u,h);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(o,u){var h=this._validate(o,u,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===2&&this.leapYear(h.year())?1:0)},weekDay:function(o,u,h){return(this.dayOfWeek(o,u,h)||7)<6},toJD:function(o,u,h){var i=this._validate(o,u,h,a.local.invalidDate||a.regionalOptions[""].invalidDate);o=i.year(),u=i.month(),h=i.day(),o<0&&o++,u<3&&(u+=12,o--);var s=Math.floor(o/100),p=2-s+Math.floor(s/4);return Math.floor(365.25*(o+4716))+Math.floor(30.6001*(u+1))+h+p-1524.5},fromJD:function(o){var u=Math.floor(o+.5),h=Math.floor((u-186721625e-2)/36524.25);h=u+1+h-Math.floor(h/4);var i=h+1524,s=Math.floor((i-122.1)/365.25),p=Math.floor(365.25*s),d=Math.floor((i-p)/30.6001),y=i-p-Math.floor(d*30.6001),b=d-(d>13.5?13:1),m=s-(b>2.5?4716:4715);return m<=0&&m--,this.newDate(m,b,y)},toJSDate:function(o,u,h){var i=this._validate(o,u,h,a.local.invalidDate||a.regionalOptions[""].invalidDate),s=new Date(i.year(),i.month()-1,i.day());return s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s.setHours(s.getHours()>12?s.getHours()+2:0),s},fromJSDate:function(o){return this.newDate(o.getFullYear(),o.getMonth()+1,o.getDate())}});var a=v.exports=new n;a.cdate=l,a.baseCalendar=t,a.calendars.gregorian=f},{"object-assign":499}],622:[function(e,v,M){var r=e("object-assign"),n=e("./main");r(n.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),n.local=n.regionalOptions[""],r(n.cdate.prototype,{formatDate:function(l,c){return typeof l!="string"&&(c=l,l=""),this._calendar.formatDate(l||"",this,c)}}),r(n.baseCalendar.prototype,{UNIX_EPOCH:n.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:n.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(l,c,t){if(typeof l!="string"&&(t=c,c=l,l=""),!c)return"";if(c.calendar()!==this)throw n.local.invalidFormat||n.regionalOptions[""].invalidFormat;l=l||this.local.dateFormat,t=t||{};var f=t.dayNamesShort||this.local.dayNamesShort,a=t.dayNames||this.local.dayNames,o=t.monthNumbers||this.local.monthNumbers,u=t.monthNamesShort||this.local.monthNamesShort,h=t.monthNames||this.local.monthNames;t.calculateWeek||this.local.calculateWeek;for(var i=function(k,R){for(var L=1;A+L<l.length&&l.charAt(A+L)===k;)L++;return A+=L-1,Math.floor(L/(R||1))>1},s=function(k,R,L,z){var E=""+R;if(i(k,z))for(;E.length<L;)E="0"+E;return E},p=function(k,R,L,z){return i(k)?z[R]:L[R]},d=this,y=function(k){return typeof o=="function"?o.call(d,k,i("m")):_(s("m",k.month(),2))},b=function(k,R){return R?typeof h=="function"?h.call(d,k):h[k.month()-d.minMonth]:typeof u=="function"?u.call(d,k):u[k.month()-d.minMonth]},m=this.local.digits,_=function(k){return t.localNumbers&&m?m(k):k},T="",g=!1,A=0;A<l.length;A++)if(g)l.charAt(A)==="'"&&!i("'")?g=!1:T+=l.charAt(A);else switch(l.charAt(A)){case"d":T+=_(s("d",c.day(),2));break;case"D":T+=p("D",c.dayOfWeek(),f,a);break;case"o":T+=s("o",c.dayOfYear(),3);break;case"w":T+=s("w",c.weekOfYear(),2);break;case"m":T+=y(c);break;case"M":T+=b(c,i("M"));break;case"y":T+=i("y",2)?c.year():(c.year()%100<10?"0":"")+c.year()%100;break;case"Y":i("Y",2),T+=c.formatYear();break;case"J":T+=c.toJD();break;case"@":T+=(c.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":T+=(c.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":i("'")?T+="'":g=!0;break;default:T+=l.charAt(A)}return T},parseDate:function(l,c,t){if(c==null)throw n.local.invalidArguments||n.regionalOptions[""].invalidArguments;if(c=typeof c=="object"?c.toString():c+"",c==="")return null;l=l||this.local.dateFormat,t=t||{};var f=t.shortYearCutoff||this.shortYearCutoff;f=typeof f!="string"?f:this.today().year()%100+parseInt(f,10);for(var a=t.dayNamesShort||this.local.dayNamesShort,o=t.dayNames||this.local.dayNames,u=t.parseMonth||this.local.parseMonth,h=t.monthNumbers||this.local.monthNumbers,i=t.monthNamesShort||this.local.monthNamesShort,s=t.monthNames||this.local.monthNames,p=-1,d=-1,y=-1,b=-1,m=-1,_=!1,T=!1,g=function(N,G){for(var U=1;C+U<l.length&&l.charAt(C+U)===N;)U++;return C+=U-1,Math.floor(U/(G||1))>1},A=function(N,G){var U=g(N,G),X=[2,3,U?4:2,U?4:2,10,11,20]["oyYJ@!".indexOf(N)+1],I=new RegExp("^-?\\d{1,"+X+"}"),B=c.substring(S).match(I);if(!B)throw(n.local.missingNumberAt||n.regionalOptions[""].missingNumberAt).replace(/\{0\}/,S);return S+=B[0].length,parseInt(B[0],10)},k=this,R=function(){if(typeof h=="function"){g("m");var N=h.call(k,c.substring(S));return S+=N.length,N}return A("m")},L=function(N,G,U,X){for(var I=g(N,X)?U:G,B=0;B<I.length;B++)if(c.substr(S,I[B].length).toLowerCase()===I[B].toLowerCase())return S+=I[B].length,B+k.minMonth;throw(n.local.unknownNameAt||n.regionalOptions[""].unknownNameAt).replace(/\{0\}/,S)},z=function(){if(typeof s=="function"){var N=g("M")?s.call(k,c.substring(S)):i.call(k,c.substring(S));return S+=N.length,N}return L("M",i,s)},E=function(){if(c.charAt(S)!==l.charAt(C))throw(n.local.unexpectedLiteralAt||n.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,S);S++},S=0,C=0;C<l.length;C++)if(T)l.charAt(C)==="'"&&!g("'")?T=!1:E();else switch(l.charAt(C)){case"d":b=A("d");break;case"D":L("D",a,o);break;case"o":m=A("o");break;case"w":A("w");break;case"m":y=R();break;case"M":y=z();break;case"y":var D=C;_=!g("y",2),C=D,d=A("y",2);break;case"Y":d=A("Y",2);break;case"J":p=A("J")+.5,c.charAt(S)==="."&&(S++,A("J"));break;case"@":p=A("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":p=A("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":S=c.length;break;case"'":g("'")?E():T=!0;break;default:E()}if(S<c.length)throw n.local.unexpectedText||n.regionalOptions[""].unexpectedText;if(d===-1?d=this.today().year():d<100&&_&&(d+=f===-1?1900:this.today().year()-this.today().year()%100-(d<=f?0:100)),typeof y=="string"&&(y=u.call(this,d,y)),m>-1){y=1,b=m;for(var F=this.daysInMonth(d,y);b>F;F=this.daysInMonth(d,y))y++,b-=F}return p>-1?this.fromJD(p):this.newDate(d,y,b)},determineDate:function(l,c,t,f,a){t&&typeof t!="object"&&(a=f,f=t,t=null),typeof f!="string"&&(a=f,f="");var o=this,u=function(h){try{return o.parseDate(f,h,a)}catch{}h=h.toLowerCase();for(var i=(h.match(/^c/)&&t?t.newDate():null)||o.today(),s=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,p=s.exec(h);p;)i.add(parseInt(p[1],10),p[2]||"d"),p=s.exec(h);return i};return c=c?c.newDate():null,l=l==null?c:typeof l=="string"?u(l):typeof l=="number"?isNaN(l)||l===1/0||l===-1/0?c:o.today().add(l,"d"):o.newDate(l),l}})},{"./main":621,"object-assign":499}],623:[function(e,v,M){v.exports=e("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_
        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_
        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {
          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))
        }
      }`,args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":151}],624:[function(e,v,M){v.exports=n;var r=e("./lib/zc-core");function n(l,c){var t=[];return c=+c||0,r(l.hi(l.shape[0]-1),t,c),t}},{"./lib/zc-core":623}],625:[function(e,v,M){v.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],626:[function(e,v,M){var r=e("./arrow_paths"),n=e("../../plots/font_attributes"),l=e("../../plots/cartesian/constants"),c=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),v.exports=c("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:n({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",l.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",l.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:n({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":746,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834,"../../plots/font_attributes":856,"./arrow_paths":625}],627:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/cartesian/axes"),l=e("./draw").draw;v.exports=function(a){var o=a._fullLayout,u=r.filterVisible(o.annotations);if(u.length&&a._fullData.length)return r.syncOrAsync([l,c],a)};function c(f){var a=f._fullLayout;r.filterVisible(a.annotations).forEach(function(o){var u=n.getFromId(f,o.xref),h=n.getFromId(f,o.yref),i=n.getRefType(o.xref),s=n.getRefType(o.yref);o._extremes={},i==="range"&&t(o,u),s==="range"&&t(o,h)})}function t(f,a){var o=a._id,u=o.charAt(0),h=f[u],i=f["a"+u],s=f[u+"ref"],p=f["a"+u+"ref"],d=f["_"+u+"padplus"],y=f["_"+u+"padminus"],b={x:1,y:-1}[u]*f[u+"shift"],m=3*f.arrowsize*f.arrowwidth||0,_=m+b,T=m-b,g=3*f.startarrowsize*f.arrowwidth||0,A=g+b,k=g-b,R;if(p===s){var L=n.findExtremes(a,[a.r2c(h)],{ppadplus:_,ppadminus:T}),z=n.findExtremes(a,[a.r2c(i)],{ppadplus:Math.max(d,A),ppadminus:Math.max(y,k)});R={min:[L.min[0],z.min[0]],max:[L.max[0],z.max[0]]}}else A=i?A+i:A,k=i?k-i:k,R=n.findExtremes(a,[a.r2c(h)],{ppadplus:Math.max(d,_,A),ppadminus:Math.max(y,T,k)});f._extremes[o]=R}},{"../../lib":778,"../../plots/cartesian/axes":828,"./draw":632}],628:[function(e,v,M){var r=e("../../lib"),n=e("../../registry"),l=e("../../plot_api/plot_template").arrayEditor;v.exports={hasClickToShow:c,onClick:t};function c(o,u){var h=f(o,u);return h.on.length>0||h.explicitOff.length>0}function t(o,u){var h=f(o,u),i=h.on,s=h.off.concat(h.explicitOff),p={},d=o._fullLayout.annotations,y,b;if(i.length||s.length){for(y=0;y<i.length;y++)b=l(o.layout,"annotations",d[i[y]]),b.modifyItem("visible",!0),r.extendFlat(p,b.getUpdateObj());for(y=0;y<s.length;y++)b=l(o.layout,"annotations",d[s[y]]),b.modifyItem("visible",!1),r.extendFlat(p,b.getUpdateObj());return n.call("update",o,{},p)}}function f(o,u){var h=o._fullLayout.annotations,i=[],s=[],p=[],d=(u||[]).length,y,b,m,_,T,g,A,k;for(y=0;y<h.length;y++)if(m=h[y],_=m.clicktoshow,_){for(b=0;b<d;b++)if(T=u[b],g=T.xaxis,A=T.yaxis,g._id===m.xref&&A._id===m.yref&&g.d2r(T.x)===a(m._xclick,g)&&A.d2r(T.y)===a(m._yclick,A)){m.visible?_==="onout"?k=s:k=p:k=i,k.push(y);break}b===d&&m.visible&&_==="onout"&&s.push(y)}return{on:i,off:s,explicitOff:p}}function a(o,u){return u.type==="log"?u.l2r(o):u.d2r(o)}},{"../../lib":778,"../../plot_api/plot_template":817,"../../registry":911}],629:[function(e,v,M){var r=e("../../lib"),n=e("../color");v.exports=function(c,t,f,a){a("opacity");var o=a("bgcolor"),u=a("bordercolor"),h=n.opacity(u);a("borderpad");var i=a("borderwidth"),s=a("showarrow");a("text",s?" ":f._dfltTitle.annotation),a("textangle"),r.coerceFont(a,"font",f.font),a("width"),a("align");var p=a("height");if(p&&a("valign"),s){var d=a("arrowside"),y,b;d.indexOf("end")!==-1&&(y=a("arrowhead"),b=a("arrowsize")),d.indexOf("start")!==-1&&(a("startarrowhead",y),a("startarrowsize",b)),a("arrowcolor",h?t.bordercolor:n.defaultLine),a("arrowwidth",(h&&i||1)*2),a("standoff"),a("startstandoff")}var m=a("hovertext"),_=f.hoverlabel||{};if(m){var T=a("hoverlabel.bgcolor",_.bgcolor||(n.opacity(o)?n.rgb(o):n.defaultLine)),g=a("hoverlabel.bordercolor",_.bordercolor||n.contrast(T));r.coerceFont(a,"hoverlabel.font",{family:_.font.family,size:_.font.size,color:_.font.color||g})}a("captureevents",!!m)}},{"../../lib":778,"../color":643}],630:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib/to_log_range");v.exports=function(c,t,f,a){t=t||{};var o=f==="log"&&t.type==="linear",u=f==="linear"&&t.type==="log";if(!(o||u))return;var h=c._fullLayout.annotations,i=t._id.charAt(0),s,p;function d(b){var m=s[b],_=null;o?_=n(m,t.range):_=Math.pow(10,m),r(_)||(_=null),a(p+b,_)}for(var y=0;y<h.length;y++)s=h[y],p="annotations["+y+"].",s[i+"ref"]===t._id&&d(i),s["a"+i+"ref"]===t._id&&d("a"+i)}},{"../../lib/to_log_range":805,"fast-isnumeric":241}],631:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/cartesian/axes"),l=e("../../plots/array_container_defaults"),c=e("./common_defaults"),t=e("./attributes");v.exports=function(o,u){l(o,u,{name:"annotations",handleItemDefaults:f})};function f(a,o,u){function h(E,S){return r.coerce(a,o,t,E,S)}var i=h("visible"),s=h("clicktoshow");if(i||s){c(a,o,u,h);for(var p=o.showarrow,d=["x","y"],y=[-10,-30],b={_fullLayout:u},m=0;m<2;m++){var _=d[m],T=n.coerceRef(a,o,b,_,"","paper");if(T!=="paper"){var g=n.getFromId(b,T);g._annIndices.push(o._index)}if(n.coercePosition(o,b,h,T,_,.5),p){var A="a"+_,k=n.coerceRef(a,o,b,A,"pixel",["pixel","paper"]);k!=="pixel"&&k!==T&&(k=o[A]="pixel");var R=k==="pixel"?y[m]:.4;n.coercePosition(o,b,h,k,A,R)}h(_+"anchor"),h(_+"shift")}if(r.noneOrAll(a,o,["x","y"]),p&&r.noneOrAll(a,o,["ax","ay"]),s){var L=h("xclick"),z=h("yclick");o._xclick=L===void 0?o.x:n.cleanPosition(L,b,o.xref),o._yclick=z===void 0?o.y:n.cleanPosition(z,b,o.yref)}}}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":626,"./common_defaults":629}],632:[function(e,v,M){var r=e("d3"),n=e("../../registry"),l=e("../../plots/plots"),c=e("../../lib"),t=c.strTranslate,f=e("../../plots/cartesian/axes"),a=e("../color"),o=e("../drawing"),u=e("../fx"),h=e("../../lib/svg_text_utils"),i=e("../../lib/setcursor"),s=e("../dragelement"),p=e("../../plot_api/plot_template").arrayEditor,d=e("./draw_arrow_head");v.exports={draw:y,drawOne:b,drawRaw:_};function y(T){var g=T._fullLayout;g._infolayer.selectAll(".annotation").remove();for(var A=0;A<g.annotations.length;A++)g.annotations[A].visible&&b(T,A);return l.previousPromises(T)}function b(T,g){var A=T._fullLayout,k=A.annotations[g]||{},R=f.getFromId(T,k.xref),L=f.getFromId(T,k.yref);R&&R.setScale(),L&&L.setScale(),_(T,k,g,!1,R,L)}function m(T,g,A,k,R){var L=R[A],z=R[A+"ref"],E=A.indexOf("y")!==-1,S=f.getRefType(z)==="domain",C=E?k.h:k.w;return T?S?L+(E?-g:g)/T._length:T.p2r(T.r2p(L)+g):L+(E?-g:g)/C}function _(T,g,A,k,R,L){var z=T._fullLayout,E=T._fullLayout._size,S=T._context.edits,C,D;k?(C="annotation-"+k,D=k+".annotations"):(C="annotation",D="annotations");var F=p(T.layout,D,g),N=F.modifyBase,G=F.modifyItem,U=F.getUpdateObj;z._infolayer.selectAll("."+C+'[data-index="'+A+'"]').remove();var X="clip"+z._uid+"_ann"+A;if(!g._input||g.visible===!1){r.selectAll("#"+X).remove();return}var I={x:{},y:{}},B=+g.textangle||0,j=z._infolayer.append("g").classed(C,!0).attr("data-index",String(A)).style("opacity",g.opacity),H=j.append("g").classed("annotation-text-g",!0),K=S[g.showarrow?"annotationTail":"annotationPosition"],te=g.captureevents||S.annotationText||K;function J(ue){var me={index:A,annotation:g._input,fullAnnotation:g,event:ue};return k&&(me.subplotId=k),me}var oe=H.append("g").style("pointer-events",te?"all":null).call(i,"pointer").on("click",function(){T._dragging=!1,T.emit("plotly_clickannotation",J(r.event))});g.hovertext&&oe.on("mouseover",function(){var ue=g.hoverlabel,me=ue.font,be=this.getBoundingClientRect(),ke=T.getBoundingClientRect();u.loneHover({x0:be.left-ke.left,x1:be.right-ke.left,y:(be.top+be.bottom)/2-ke.top,text:g.hovertext,color:ue.bgcolor,borderColor:ue.bordercolor,fontFamily:me.family,fontSize:me.size,fontColor:me.color},{container:z._hoverlayer.node(),outerContainer:z._paper.node(),gd:T})}).on("mouseout",function(){u.loneUnhover(z._hoverlayer.node())});var ie=g.borderwidth,Q=g.borderpad,V=ie+Q,se=oe.append("rect").attr("class","bg").style("stroke-width",ie+"px").call(a.stroke,g.bordercolor).call(a.fill,g.bgcolor),re=g.width||g.height,ee=z._topclips.selectAll("#"+X).data(re?[0]:[]);ee.enter().append("clipPath").classed("annclip",!0).attr("id",X).append("rect"),ee.exit().remove();var ae=g.font,fe=z._meta?c.templateString(g.text,z._meta):g.text,de=oe.append("text").classed("annotation-text",!0).text(fe);function pe(ue){return ue.call(o.font,ae).attr({"text-anchor":{left:"start",right:"end"}[g.align]||"middle"}),h.convertToTspans(ue,T,W),ue}function W(){var ue=de.selectAll("a");if(ue.size()===1&&ue.text()===de.text()){var me=oe.insert("a",":first-child").attr({"xlink:xlink:href":ue.attr("xlink:href"),"xlink:xlink:show":ue.attr("xlink:show")}).style({cursor:"pointer"});me.node().appendChild(se.node())}var be=oe.select(".annotation-text-math-group"),ke=!be.empty(),Pe=o.bBox((ke?be:de).node()),je=Pe.width,ze=Pe.height,Ze=g.width||je,tt=g.height||ze,Ce=Math.round(Ze+2*V),Ae=Math.round(tt+2*V);function Ne(Fe,_t){return _t==="auto"&&(Fe<1/3?_t="left":Fe>2/3?_t="right":_t="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[_t]}for(var qe=!1,At=["x","y"],kt=0;kt<At.length;kt++){var Ve=At[kt],ft=g[Ve+"ref"]||Ve,St=g["a"+Ve+"ref"],Wt={x:R,y:L}[Ve],Qt=(B+(Ve==="x"?0:-90))*Math.PI/180,zt=Ce*Math.cos(Qt),$t=Ae*Math.sin(Qt),rr=Math.abs(zt)+Math.abs($t),Pt=g[Ve+"anchor"],Lt=g[Ve+"shift"]*(Ve==="x"?1:-1),dt=I[Ve],lt,Te,Le,Be,et,Me=f.getRefType(ft);if(Wt&&Me!=="domain"){var Ie=Wt.r2fraction(g[Ve]);(Ie<0||Ie>1)&&(St===ft?(Ie=Wt.r2fraction(g["a"+Ve]),(Ie<0||Ie>1)&&(qe=!0)):qe=!0),lt=Wt._offset+Wt.r2p(g[Ve]),Be=.5}else{var He=Me==="domain";Ve==="x"?(Le=g[Ve],lt=He?Wt._offset+Wt._length*Le:lt=E.l+E.w*Le):(Le=1-g[Ve],lt=He?Wt._offset+Wt._length*Le:lt=E.t+E.h*Le),Be=g.showarrow?.5:Le}if(g.showarrow){dt.head=lt;var Xe=g["a"+Ve];if(et=zt*Ne(.5,g.xanchor)-$t*Ne(.5,g.yanchor),St===ft){var ht=f.getRefType(St);ht==="domain"?(Ve==="y"&&(Xe=1-Xe),dt.tail=Wt._offset+Wt._length*Xe):ht==="paper"?Ve==="y"?(Xe=1-Xe,dt.tail=E.t+E.h*Xe):dt.tail=E.l+E.w*Xe:dt.tail=Wt._offset+Wt.r2p(Xe),Te=et}else dt.tail=lt+Xe,Te=et+Xe;dt.text=dt.tail+et;var it=z[Ve==="x"?"width":"height"];if(ft==="paper"&&(dt.head=c.constrain(dt.head,1,it-1)),St==="pixel"){var Ge=-Math.max(dt.tail-3,dt.text),ot=Math.min(dt.tail+3,dt.text)-it;Ge>0?(dt.tail+=Ge,dt.text+=Ge):ot>0&&(dt.tail-=ot,dt.text-=ot)}dt.tail+=Lt,dt.head+=Lt}else et=rr*Ne(Be,Pt),Te=et,dt.text=lt+et;dt.text+=Lt,et+=Lt,Te+=Lt,g["_"+Ve+"padplus"]=rr/2+Te,g["_"+Ve+"padminus"]=rr/2-Te,g["_"+Ve+"size"]=rr,g["_"+Ve+"shift"]=et}if(qe){oe.remove();return}var Je=0,st=0;if(g.align!=="left"&&(Je=(Ze-je)*(g.align==="center"?.5:1)),g.valign!=="top"&&(st=(tt-ze)*(g.valign==="middle"?.5:1)),ke)be.select("svg").attr({x:V+Je-1,y:V+st}).call(o.setClipUrl,re?X:null,T);else{var It=V+st-Pe.top,Ft=V+Je-Pe.left;de.call(h.positionText,Ft,It).call(o.setClipUrl,re?X:null,T)}ee.select("rect").call(o.setRect,V,V,Ze,tt),se.call(o.setRect,ie/2,ie/2,Ce-ie,Ae-ie),oe.call(o.setTranslate,Math.round(I.x.text-Ce/2),Math.round(I.y.text-Ae/2)),H.attr({transform:"rotate("+B+","+I.x.text+","+I.y.text+")"});var nr=function(Fe,_t){j.selectAll(".annotation-arrow-g").remove();var Mt=I.x.head,wt=I.y.head,Dt=I.x.tail+Fe,Rt=I.y.tail+_t,Bt=I.x.text+Fe,Nt=I.y.text+_t,er=c.rotationXYMatrix(B,Bt,Nt),qt=c.apply2DTransform(er),Zt=c.apply2DTransform2(er),_r=+se.attr("width"),Gr=+se.attr("height"),zr=Bt-.5*_r,Or=zr+_r,Mn=Nt-.5*Gr,Yn=Mn+Gr,An=[[zr,Mn,zr,Yn],[zr,Yn,Or,Yn],[Or,Yn,Or,Mn],[Or,Mn,zr,Mn]].map(Zt);if(!An.reduce(function(vt,Gt){return vt^!!c.segmentsIntersect(Mt,wt,Mt+1e6,wt+1e6,Gt[0],Gt[1],Gt[2],Gt[3])},!1)){An.forEach(function(vt){var Gt=c.segmentsIntersect(Dt,Rt,Mt,wt,vt[0],vt[1],vt[2],vt[3]);Gt&&(Dt=Gt.x,Rt=Gt.y)});var Bn=g.arrowwidth,jn=g.arrowcolor,Nr=g.arrowside,Lr=j.append("g").style({opacity:a.opacity(jn)}).classed("annotation-arrow-g",!0),Ln=Lr.append("path").attr("d","M"+Dt+","+Rt+"L"+Mt+","+wt).style("stroke-width",Bn+"px").call(a.stroke,a.rgb(jn));if(d(Ln,Nr,g),S.annotationPosition&&Ln.node().parentNode&&!k){var dn=Mt,xn=wt;if(g.standoff){var tn=Math.sqrt(Math.pow(Mt-Dt,2)+Math.pow(wt-Rt,2));dn+=g.standoff*(Dt-Mt)/tn,xn+=g.standoff*(Rt-wt)/tn}var wn=Lr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Dt-dn)+","+(Rt-xn),transform:t(dn,xn)}).style("stroke-width",Bn+6+"px").call(a.stroke,"rgba(0,0,0,0)").call(a.fill,"rgba(0,0,0,0)"),Sn,un;s.init({element:wn.node(),gd:T,prepFn:function(){var vt=o.getTranslate(oe);Sn=vt.x,un=vt.y,R&&R.autorange&&N(R._name+".autorange",!0),L&&L.autorange&&N(L._name+".autorange",!0)},moveFn:function(vt,Gt){var cr=qt(Sn,un),Er=cr[0]+vt,Wr=cr[1]+Gt;oe.call(o.setTranslate,Er,Wr),G("x",m(R,vt,"x",E,g)),G("y",m(L,Gt,"y",E,g)),g.axref===g.xref&&G("ax",m(R,vt,"ax",E,g)),g.ayref===g.yref&&G("ay",m(L,Gt,"ay",E,g)),Lr.attr("transform",t(vt,Gt)),H.attr({transform:"rotate("+B+","+Er+","+Wr+")"})},doneFn:function(){n.call("_guiRelayout",T,U());var vt=document.querySelector(".js-notes-box-panel");vt&&vt.redraw(vt.selectedObj)}})}}};if(g.showarrow&&nr(0,0),K){var We;s.init({element:oe.node(),gd:T,prepFn:function(){We=H.attr("transform")},moveFn:function(Fe,_t){var Mt="pointer";if(g.showarrow)g.axref===g.xref?G("ax",m(R,Fe,"ax",E,g)):G("ax",g.ax+Fe),g.ayref===g.yref?G("ay",m(L,_t,"ay",E.w,g)):G("ay",g.ay+_t),nr(Fe,_t);else{if(k)return;var wt,Dt;if(R)wt=m(R,Fe,"x",E,g);else{var Rt=g._xsize/E.w,Bt=g.x+(g._xshift-g.xshift)/E.w-Rt/2;wt=s.align(Bt+Fe/E.w,Rt,0,1,g.xanchor)}if(L)Dt=m(L,_t,"y",E,g);else{var Nt=g._ysize/E.h,er=g.y-(g._yshift+g.yshift)/E.h-Nt/2;Dt=s.align(er-_t/E.h,Nt,0,1,g.yanchor)}G("x",wt),G("y",Dt),(!R||!L)&&(Mt=s.getCursor(R?.5:wt,L?.5:Dt,g.xanchor,g.yanchor))}H.attr({transform:t(Fe,_t)+We}),i(oe,Mt)},clickFn:function(Fe,_t){g.captureevents&&T.emit("plotly_clickannotation",J(_t))},doneFn:function(){i(oe),n.call("_guiRelayout",T,U());var Fe=document.querySelector(".js-notes-box-panel");Fe&&Fe.redraw(Fe.selectedObj)}})}}S.annotationText?de.call(h.makeEditable,{delegate:oe,gd:T}).call(pe).on("edit",function(ue){g.text=ue,this.call(pe),G("text",ue),R&&R.autorange&&N(R._name+".autorange",!0),L&&L.autorange&&N(L._name+".autorange",!0),n.call("_guiRelayout",T,U())}):de.call(pe)}},{"../../lib":778,"../../lib/setcursor":799,"../../lib/svg_text_utils":803,"../../plot_api/plot_template":817,"../../plots/cartesian/axes":828,"../../plots/plots":891,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"../fx":683,"./draw_arrow_head":633,d3:169}],633:[function(e,v,M){var r=e("d3"),n=e("../color"),l=e("./arrow_paths"),c=e("../../lib"),t=c.strScale,f=c.strRotate,a=c.strTranslate;v.exports=function(u,h,i){var s=u.node(),p=l[i.arrowhead||0],d=l[i.startarrowhead||0],y=(i.arrowwidth||1)*(i.arrowsize||1),b=(i.arrowwidth||1)*(i.startarrowsize||1),m=h.indexOf("start")>=0,_=h.indexOf("end")>=0,T=p.backoff*y+i.standoff,g=d.backoff*b+i.startstandoff,A,k,R,L;if(s.nodeName==="line"){A={x:+u.attr("x1"),y:+u.attr("y1")},k={x:+u.attr("x2"),y:+u.attr("y2")};var z=A.x-k.x,E=A.y-k.y;if(R=Math.atan2(E,z),L=R+Math.PI,T&&g&&T+g>Math.sqrt(z*z+E*E)){H();return}if(T){if(T*T>z*z+E*E){H();return}var S=T*Math.cos(R),C=T*Math.sin(R);k.x+=S,k.y+=C,u.attr({x2:k.x,y2:k.y})}if(g){if(g*g>z*z+E*E){H();return}var D=g*Math.cos(R),F=g*Math.sin(R);A.x-=D,A.y-=F,u.attr({x1:A.x,y1:A.y})}}else if(s.nodeName==="path"){var N=s.getTotalLength(),G="";if(N<T+g){H();return}var U=s.getPointAtLength(0),X=s.getPointAtLength(.1);R=Math.atan2(U.y-X.y,U.x-X.x),A=s.getPointAtLength(Math.min(g,N)),G="0px,"+g+"px,";var I=s.getPointAtLength(N),B=s.getPointAtLength(N-.1);L=Math.atan2(I.y-B.y,I.x-B.x),k=s.getPointAtLength(Math.max(0,N-T));var j=G?g+T:T;G+=N-j+"px,"+N+"px",u.style("stroke-dasharray",G)}function H(){u.style("stroke-dasharray","0px,100px")}function K(te,J,oe,ie){te.path&&(te.noRotate&&(oe=0),r.select(s.parentNode).append("path").attr({class:u.attr("class"),d:te.path,transform:a(J.x,J.y)+f(oe*180/Math.PI)+t(ie)}).style({fill:n.rgb(i.arrowcolor),"stroke-width":0}))}m&&K(d,A,R,b),_&&K(p,k,L,y)}},{"../../lib":778,"../color":643,"./arrow_paths":625,d3:169}],634:[function(e,v,M){var r=e("./draw"),n=e("./click");v.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:n.hasClickToShow,onClick:n.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":840,"./attributes":626,"./calc_autorange":627,"./click":628,"./convert_coords":630,"./defaults":631,"./draw":632}],635:[function(e,v,M){var r=e("../annotations/attributes"),n=e("../../plot_api/edit_types").overrideAll,l=e("../../plot_api/plot_template").templatedArray;v.exports=n(l("annotation",{visible:r.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../annotations/attributes":626}],636:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/cartesian/axes");v.exports=function(t){for(var f=t.fullSceneLayout,a=f.annotations,o=0;o<a.length;o++)l(a[o],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function l(c,t){var f=t.fullSceneLayout,a=f.domain,o=t.fullLayout._size,u={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};c._xa={},r.extendFlat(c._xa,u),n.setConvert(c._xa),c._xa._offset=o.l+a.x[0]*o.w,c._xa.l2p=function(){return .5*(1+c._pdata[0]/c._pdata[3])*o.w*(a.x[1]-a.x[0])},c._ya={},r.extendFlat(c._ya,u),n.setConvert(c._ya),c._ya._offset=o.t+(1-a.y[1])*o.h,c._ya.l2p=function(){return .5*(1-c._pdata[1]/c._pdata[3])*o.h*(a.y[1]-a.y[0])}}},{"../../lib":778,"../../plots/cartesian/axes":828}],637:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/cartesian/axes"),l=e("../../plots/array_container_defaults"),c=e("../annotations/common_defaults"),t=e("./attributes");v.exports=function(o,u,h){l(o,u,{name:"annotations",handleItemDefaults:f,fullLayout:h.fullLayout})};function f(a,o,u,h){function i(d,y){return r.coerce(a,o,t,d,y)}function s(d){var y=d+"axis",b={_fullLayout:{}};return b._fullLayout[y]=u[y],n.coercePosition(o,b,i,d,d,.5)}var p=i("visible");p&&(c(a,o,h.fullLayout,i),s("x"),s("y"),s("z"),r.noneOrAll(a,o,["x","y","z"]),o.xref="x",o.yref="y",o.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),o.showarrow&&(o.axref="pixel",o.ayref="pixel",i("ax",-10),i("ay",-30),r.noneOrAll(a,o,["ax","ay"])))}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"../annotations/common_defaults":629,"./attributes":635}],638:[function(e,v,M){var r=e("../annotations/draw").drawRaw,n=e("../../plots/gl3d/project"),l=["x","y","z"];v.exports=function(t){for(var f=t.fullSceneLayout,a=t.dataScale,o=f.annotations,u=0;u<o.length;u++){for(var h=o[u],i=!1,s=0;s<3;s++){var p=l[s],d=h[p],y=f[p+"axis"],b=y.r2fraction(d);if(b<0||b>1){i=!0;break}}i?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+u+'"]').remove():(h._pdata=n(t.glplot.cameraParams,[f.xaxis.r2l(h.x)*a[0],f.yaxis.r2l(h.y)*a[1],f.zaxis.r2l(h.z)*a[2]]),r(t.graphDiv,h,u,t.id,h._xa,h._ya))}}},{"../../plots/gl3d/project":879,"../annotations/draw":632}],639:[function(e,v,M){var r=e("../../registry"),n=e("../../lib");v.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:l,convert:e("./convert"),draw:e("./draw")};function l(c,t){var f=r.subplotsRegistry.gl3d;if(f)for(var a=f.attrRegex,o=Object.keys(c),u=0;u<o.length;u++){var h=o[u];a.test(h)&&(c[h].annotations||[]).length&&(n.pushUnique(t._basePlotModules,f),n.pushUnique(t._subplots.gl3d,h))}}},{"../../lib":778,"../../registry":911,"./attributes":635,"./convert":636,"./defaults":637,"./draw":638}],640:[function(e,v,M){v.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":607,"world-calendars/dist/calendars/coptic":608,"world-calendars/dist/calendars/discworld":609,"world-calendars/dist/calendars/ethiopian":610,"world-calendars/dist/calendars/hebrew":611,"world-calendars/dist/calendars/islamic":612,"world-calendars/dist/calendars/julian":613,"world-calendars/dist/calendars/mayan":614,"world-calendars/dist/calendars/nanakshahi":615,"world-calendars/dist/calendars/nepali":616,"world-calendars/dist/calendars/persian":617,"world-calendars/dist/calendars/taiwan":618,"world-calendars/dist/calendars/thai":619,"world-calendars/dist/calendars/ummalqura":620,"world-calendars/dist/main":621,"world-calendars/dist/plus":622}],641:[function(e,v,M){var r=e("./calendars"),n=e("../../lib"),l=e("../../constants/numerical"),c=l.EPOCHJD,t=l.ONEDAY,f={valType:"enumerated",values:Object.keys(r.calendars),editType:"calc",dflt:"gregorian"},a=function(R,L,z,E){var S={};return S[z]=f,n.coerce(R,L,S,z,E)},o=function(R,L,z,E){for(var S=0;S<z.length;S++)a(R,L,z[S]+"calendar",E.calendar)},u={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},h={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},i={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},s="##",p={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:s,w:s,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function d(R,L,z){for(var E=Math.floor((L+.05)/t)+c,S=b(z).fromJD(E),C=0,D,F,N,G,U;(C=R.indexOf("%",C))!==-1;)D=R.charAt(C+1),D==="0"||D==="-"||D==="_"?(N=3,F=R.charAt(C+2),D==="_"&&(D="-")):(F=D,D="0",N=2),G=p[F],G?(G===s?U=s:U=S.formatDate(G[D]),R=R.substr(0,C)+U+R.substr(C+N),C+=U.length):C+=N;return R}var y={};function b(R){var L=y[R];return L||(L=y[R]=r.instance(R),L)}function m(R){return n.extendFlat({},f,{description:R})}function _(R){return"Sets the calendar system to use with `"+R+"` date data."}var T={xcalendar:m(_("x"))},g=n.extendFlat({},T,{ycalendar:m(_("y"))}),A=n.extendFlat({},g,{zcalendar:m(_("z"))}),k=m(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));v.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:g,bar:g,box:g,heatmap:g,contour:g,histogram:g,histogram2d:g,histogram2dcontour:g,scatter3d:A,surface:A,mesh3d:A,scattergl:g,ohlc:T,candlestick:T},layout:{calendar:m(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:k},yaxis:{calendar:k},scene:{xaxis:{calendar:k},yaxis:{calendar:k},zaxis:{calendar:k}},polar:{radialaxis:{calendar:k}}},transforms:{filter:{valuecalendar:m(["Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:m(["Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:f,handleDefaults:a,handleTraceDefaults:o,CANONICAL_SUNDAY:h,CANONICAL_TICK:u,DFLTRANGE:i,getCal:b,worldCalFmt:d}},{"../../constants/numerical":753,"../../lib":778,"./calendars":640}],642:[function(e,v,M){M.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],M.defaultLine="#444",M.lightLine="#eee",M.background="#fff",M.borderLine="#BEC8D9",M.lightFraction=100*(14-4)/(15-4)},{}],643:[function(e,v,M){var r=e("tinycolor2"),n=e("fast-isnumeric"),l=v.exports={},c=e("./attributes");l.defaults=c.defaults;var t=l.defaultLine=c.defaultLine;l.lightLine=c.lightLine;var f=l.background=c.background;l.tinyRGB=function(o){var u=o.toRgb();return"rgb("+Math.round(u.r)+", "+Math.round(u.g)+", "+Math.round(u.b)+")"},l.rgb=function(o){return l.tinyRGB(r(o))},l.opacity=function(o){return o?r(o).getAlpha():0},l.addOpacity=function(o,u){var h=r(o).toRgb();return"rgba("+Math.round(h.r)+", "+Math.round(h.g)+", "+Math.round(h.b)+", "+u+")"},l.combine=function(o,u){var h=r(o).toRgb();if(h.a===1)return r(o).toRgbString();var i=r(u||f).toRgb(),s=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},p={r:s.r*(1-h.a)+h.r*h.a,g:s.g*(1-h.a)+h.g*h.a,b:s.b*(1-h.a)+h.b*h.a};return r(p).toRgbString()},l.contrast=function(o,u,h){var i=r(o);i.getAlpha()!==1&&(i=r(l.combine(o,f)));var s=i.isDark()?u?i.lighten(u):f:h?i.darken(h):t;return s.toString()},l.stroke=function(o,u){var h=r(u);o.style({stroke:l.tinyRGB(h),"stroke-opacity":h.getAlpha()})},l.fill=function(o,u){var h=r(u);o.style({fill:l.tinyRGB(h),"fill-opacity":h.getAlpha()})},l.clean=function(o){if(!(!o||typeof o!="object")){var u=Object.keys(o),h,i,s,p;for(h=0;h<u.length;h++)if(s=u[h],p=o[s],s.substr(s.length-5)==="color")if(Array.isArray(p))for(i=0;i<p.length;i++)p[i]=a(p[i]);else o[s]=a(p);else if(s.substr(s.length-10)==="colorscale"&&Array.isArray(p))for(i=0;i<p.length;i++)Array.isArray(p[i])&&(p[i][1]=a(p[i][1]));else if(Array.isArray(p)){var d=p[0];if(!Array.isArray(d)&&d&&typeof d=="object")for(i=0;i<p.length;i++)l.clean(p[i])}else p&&typeof p=="object"&&l.clean(p)}};function a(o){if(n(o)||typeof o!="string")return o;var u=o.trim();if(u.substr(0,3)!=="rgb")return o;var h=u.match(/^rgba?\s*\(([^()]*)\)$/);if(!h)return o;var i=h[1].trim().split(/\s*[\s,]\s*/),s=u.charAt(3)==="a"&&i.length===4;if(!s&&i.length!==3)return o;for(var p=0;p<i.length;p++){if(!i[p].length||(i[p]=Number(i[p]),!(i[p]>=0)))return o;if(p===3)i[p]>1&&(i[p]=1);else if(i[p]>=1)return o}var d=Math.round(i[0]*255)+", "+Math.round(i[1]*255)+", "+Math.round(i[2]*255);return s?"rgba("+d+", "+i[3]+")":"rgb("+d+")"}},{"./attributes":642,"fast-isnumeric":241,tinycolor2:576}],644:[function(e,v,M){var r=e("../../plots/cartesian/layout_attributes"),n=e("../../plots/font_attributes"),l=e("../../lib/extend").extendFlat,c=e("../../plot_api/edit_types").overrideAll;v.exports=c({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:l({},r.ticks,{dflt:""}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:n({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,title:{text:{valType:"string"},font:n({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:n({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/cartesian/layout_attributes":842,"../../plots/font_attributes":856}],645:[function(e,v,M){v.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],646:[function(e,v,M){var r=e("../../lib"),n=e("../../plot_api/plot_template"),l=e("../../plots/cartesian/tick_value_defaults"),c=e("../../plots/cartesian/tick_mark_defaults"),t=e("../../plots/cartesian/tick_label_defaults"),f=e("./attributes");v.exports=function(o,u,h){var i=n.newContainer(u,"colorbar"),s=o.colorbar||{};function p(_,T){return r.coerce(s,i,f,_,T)}var d=p("thicknessmode");p("thickness",d==="fraction"?30/(h.width-h.margin.l-h.margin.r):30);var y=p("lenmode");p("len",y==="fraction"?1:h.height-h.margin.t-h.margin.b),p("x"),p("xanchor"),p("xpad"),p("y"),p("yanchor"),p("ypad"),r.noneOrAll(s,i,["x","y"]),p("outlinecolor"),p("outlinewidth"),p("bordercolor"),p("borderwidth"),p("bgcolor");var b=p("ticklabelposition");l(s,i,p,"linear");var m={outerTicks:!1,font:h.font};b.indexOf("inside")!==-1&&(m.bgColor="black"),t(s,i,p,"linear",m),c(s,i,p,"linear",m),p("title.text",h._dfltTitle.colorbar),r.coerceFont(p,"title.font",h.font),p("title.side")}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/cartesian/tick_label_defaults":849,"../../plots/cartesian/tick_mark_defaults":850,"../../plots/cartesian/tick_value_defaults":851,"./attributes":644}],647:[function(e,v,M){var r=e("d3"),n=e("tinycolor2"),l=e("../../plots/plots"),c=e("../../registry"),t=e("../../plots/cartesian/axes"),f=e("../dragelement"),a=e("../../lib"),o=a.strTranslate,u=e("../../lib/extend").extendFlat,h=e("../../lib/setcursor"),i=e("../drawing"),s=e("../color"),p=e("../titles"),d=e("../../lib/svg_text_utils"),y=e("../colorscale/helpers").flipScale,b=e("../../plots/cartesian/axis_defaults"),m=e("../../plots/cartesian/position_defaults"),_=e("../../plots/cartesian/layout_attributes"),T=e("../../constants/alignment"),g=T.LINE_SPACING,A=T.FROM_TL,k=T.FROM_BR,R=e("./constants").cn;function L(F){var N=F._fullLayout,G=N._infolayer.selectAll("g."+R.colorbar).data(z(F),function(U){return U._id});G.enter().append("g").attr("class",function(U){return U._id}).classed(R.colorbar,!0),G.each(function(U){var X=r.select(this);a.ensureSingle(X,"rect",R.cbbg),a.ensureSingle(X,"g",R.cbfills),a.ensureSingle(X,"g",R.cblines),a.ensureSingle(X,"g",R.cbaxis,function(B){B.classed(R.crisp,!0)}),a.ensureSingle(X,"g",R.cbtitleunshift,function(B){B.append("g").classed(R.cbtitle,!0)}),a.ensureSingle(X,"rect",R.cboutline);var I=E(X,U,F);I&&I.then&&(F._promises||[]).push(I),F._context.edits.colorbarPosition&&S(X,U,F)}),G.exit().each(function(U){l.autoMargin(F,U._id)}).remove(),G.order()}function z(F){var N=F._fullLayout,G=F.calcdata,U=[],X,I,B,j;function H(ae){return u(ae,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function K(){typeof j.calc=="function"?j.calc(F,B,X):(X._fillgradient=I.reversescale?y(I.colorscale):I.colorscale,X._zrange=[I[j.min],I[j.max]])}for(var te=0;te<G.length;te++){var J=G[te];B=J[0].trace;var oe=B._module.colorbar;if(B.visible===!0&&oe)for(var ie=Array.isArray(oe),Q=ie?oe:[oe],V=0;V<Q.length;V++){j=Q[V];var se=j.container;I=se?B[se]:B,I&&I.showscale&&(X=H(I.colorbar),X._id="cb"+B.uid+(ie&&se?"-"+se:""),X._traceIndex=B.index,X._propPrefix=(se?se+".":"")+"colorbar.",X._meta=B._meta,K(),U.push(X))}}for(var re in N._colorAxes)if(I=N[re],I.showscale){var ee=N._colorAxes[re];X=H(I.colorbar),X._id="cb"+re,X._propPrefix=re+".colorbar.",X._meta=N._meta,j={min:"cmin",max:"cmax"},ee[0]!=="heatmap"&&(B=ee[1],j.calc=B._module.colorbar.calc),K(),U.push(X)}return U}function E(F,N,G){var U=G._fullLayout,X=U._size,I=N._fillcolor,B=N._line,j=N.title,H=j.side,K=N._zrange||r.extent((typeof I=="function"?I:B.color).domain()),te=typeof B.color=="function"?B.color:function(){return B.color},J=typeof I=="function"?I:function(){return I},oe=N._levels,ie=C(G,N,K),Q=ie.fill,V=ie.line,se=Math.round(N.thickness*(N.thicknessmode==="fraction"?X.w:1)),re=se/X.w,ee=Math.round(N.len*(N.lenmode==="fraction"?X.h:1)),ae=ee/X.h,fe=N.xpad/X.w,de=(N.borderwidth+N.outlinewidth)/2,pe=N.ypad/X.h,W=Math.round(N.x*X.w+N.xpad),ue=N.x-re*({middle:.5,right:1}[N.xanchor]||0),me=N.y+ae*(({top:-.5,bottom:.5}[N.yanchor]||0)-.5),be=Math.round(X.h*(1-me)),ke=be-ee;N._lenFrac=ae,N._thickFrac=re,N._xLeftFrac=ue,N._yBottomFrac=me;var Pe=N._axis=D(G,N,K);if(Pe.position=N.x+fe+re,["top","bottom"].indexOf(H)!==-1&&(Pe.title.side=H,Pe.titlex=N.x+fe,Pe.titley=me+(j.side==="top"?ae-pe:pe)),B.color&&N.tickmode==="auto"){Pe.tickmode="linear",Pe.tick0=oe.start;var je=oe.size,ze=a.constrain((be-ke)/50,4,15)+1,Ze=(K[1]-K[0])/((N.nticks||ze)*je);if(Ze>1){var tt=Math.pow(10,Math.floor(Math.log(Ze)/Math.LN10));je*=tt*a.roundUp(Ze/tt,[2,5,10]),(Math.abs(oe.start)/oe.size+1e-6)%1<2e-6&&(Pe.tick0=0)}Pe.dtick=je}Pe.domain=[me+pe,me+ae-pe],Pe.setScale(),F.attr("transform",o(Math.round(X.l),Math.round(X.t)));var Ce=F.select("."+R.cbtitleunshift).attr("transform",o(-Math.round(X.l),-Math.round(X.t))),Ae=F.select("."+R.cbaxis),Ne,qe=0;function At(Wt,Qt){var zt={propContainer:Pe,propName:N._propPrefix+"title",traceIndex:N._traceIndex,_meta:N._meta,placeholder:U._dfltTitle.colorbar,containerGroup:F.select("."+R.cbtitle)},$t=Wt.charAt(0)==="h"?Wt.substr(1):"h"+Wt;F.selectAll("."+$t+",."+$t+"-math-group").remove(),p.draw(G,Wt,u(zt,Qt||{}))}function kt(){if(["top","bottom"].indexOf(H)!==-1){var Wt=X.l+(N.x+fe)*X.w,Qt=Pe.title.font.size,zt;H==="top"?zt=(1-(me+ae-pe))*X.h+X.t+3+Qt*.75:zt=(1-(me+pe))*X.h+X.t-3-Qt*.25,At(Pe._id+"title",{attributes:{x:Wt,y:zt,"text-anchor":"start"}})}}function Ve(){if(["top","bottom"].indexOf(H)===-1){var Wt=Pe.title.font.size,Qt=Pe._offset+Pe._length/2,zt=X.l+(Pe.position||0)*X.w+(Pe.side==="right"?10+Wt*(Pe.showticklabels?1:.5):-10-Wt*(Pe.showticklabels?.5:0));At("h"+Pe._id+"title",{avoid:{selection:r.select(G).selectAll("g."+Pe._id+"tick"),side:H,offsetLeft:X.l,offsetTop:0,maxShift:U.width},attributes:{x:zt,y:Qt,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}function ft(){if(["top","bottom"].indexOf(H)!==-1){var Wt=F.select("."+R.cbtitle),Qt=Wt.select("text"),zt=[-N.outlinewidth/2,N.outlinewidth/2],$t=Wt.select(".h"+Pe._id+"title-math-group").node(),rr=15.6;if(Qt.node()&&(rr=parseInt(Qt.node().style.fontSize,10)*g),$t?(qe=i.bBox($t).height,qe>rr&&(zt[1]-=(qe-rr)/2)):Qt.node()&&!Qt.classed(R.jsPlaceholder)&&(qe=i.bBox(Qt.node()).height),qe){if(qe+=5,H==="top")Pe.domain[1]-=qe/X.h,zt[1]*=-1;else{Pe.domain[0]+=qe/X.h;var Pt=d.lineCount(Qt);zt[1]+=(1-Pt)*rr}Wt.attr("transform",o(zt[0],zt[1])),Pe.setScale()}}F.selectAll("."+R.cbfills+",."+R.cblines).attr("transform",o(0,Math.round(X.h*(1-Pe.domain[1])))),Ae.attr("transform",o(0,Math.round(-X.t)));var Lt=F.select("."+R.cbfills).selectAll("rect."+R.cbfill).attr("style","").data(Q);Lt.enter().append("rect").classed(R.cbfill,!0).style("stroke","none"),Lt.exit().remove();var dt=K.map(Pe.c2p).map(Math.round).sort(function(et,Me){return et-Me});Lt.each(function(et,Me){var Ie=[Me===0?K[0]:(Q[Me]+Q[Me-1])/2,Me===Q.length-1?K[1]:(Q[Me]+Q[Me+1])/2].map(Pe.c2p).map(Math.round);Ie[1]=a.constrain(Ie[1]+(Ie[1]>Ie[0])?1:-1,dt[0],dt[1]);var He=r.select(this).attr({x:W,width:Math.max(se,2),y:r.min(Ie),height:Math.max(r.max(Ie)-r.min(Ie),2)});if(N._fillgradient)i.gradient(He,G,N._id,"vertical",N._fillgradient,"fill");else{var Xe=J(et).replace("e-","");He.attr("fill",n(Xe).toHexString())}});var lt=F.select("."+R.cblines).selectAll("path."+R.cbline).data(B.color&&B.width?V:[]);lt.enter().append("path").classed(R.cbline,!0),lt.exit().remove(),lt.each(function(et){r.select(this).attr("d","M"+W+","+(Math.round(Pe.c2p(et))+B.width/2%1)+"h"+se).call(i.lineGroupStyle,B.width,te(et),B.dash)}),Ae.selectAll("g."+Pe._id+"tick,path").remove();var Te=W+se+(N.outlinewidth||0)/2-(N.ticks==="outside"?1:0),Le=t.calcTicks(Pe),Be=t.getTickSigns(Pe)[2];return t.drawTicks(G,Pe,{vals:Pe.ticks==="inside"?t.clipEnds(Pe,Le):Le,layer:Ae,path:t.makeTickPath(Pe,Te,Be),transFn:t.makeTransTickFn(Pe)}),t.drawLabels(G,Pe,{vals:Le,layer:Ae,transFn:t.makeTransTickLabelFn(Pe),labelFns:t.makeLabelFns(Pe,Te)})}function St(){var Wt=se+N.outlinewidth/2;if(Pe.ticklabelposition.indexOf("inside")===-1&&(Wt+=i.bBox(Ae.node()).width),Ne=Ce.select("text"),Ne.node()&&!Ne.classed(R.jsPlaceholder)){var Qt=Ce.select(".h"+Pe._id+"title-math-group").node(),zt;Qt&&["top","bottom"].indexOf(H)!==-1?zt=i.bBox(Qt).width:zt=i.bBox(Ce.node()).right-W-X.l,Wt=Math.max(Wt,zt)}var $t=2*N.xpad+Wt+N.borderwidth+N.outlinewidth/2,rr=be-ke;F.select("."+R.cbbg).attr({x:W-N.xpad-(N.borderwidth+N.outlinewidth)/2,y:ke-de,width:Math.max($t,2),height:Math.max(rr+2*de,2)}).call(s.fill,N.bgcolor).call(s.stroke,N.bordercolor).style("stroke-width",N.borderwidth),F.selectAll("."+R.cboutline).attr({x:W,y:ke+N.ypad+(H==="top"?qe:0),width:Math.max(se,2),height:Math.max(rr-2*N.ypad-qe,2)}).call(s.stroke,N.outlinecolor).style({fill:"none","stroke-width":N.outlinewidth});var Pt=({center:.5,right:1}[N.xanchor]||0)*$t;F.attr("transform",o(X.l-Pt,X.t));var Lt={},dt=A[N.yanchor],lt=k[N.yanchor];N.lenmode==="pixels"?(Lt.y=N.y,Lt.t=rr*dt,Lt.b=rr*lt):(Lt.t=Lt.b=0,Lt.yt=N.y+N.len*dt,Lt.yb=N.y-N.len*lt);var Te=A[N.xanchor],Le=k[N.xanchor];if(N.thicknessmode==="pixels")Lt.x=N.x,Lt.l=$t*Te,Lt.r=$t*Le;else{var Be=$t-se;Lt.l=Be*Te,Lt.r=Be*Le,Lt.xl=N.x-N.thickness*Te,Lt.xr=N.x+N.thickness*Le}l.autoMargin(G,N._id,Lt)}return a.syncOrAsync([l.previousPromises,kt,ft,Ve,l.previousPromises,St],G)}function S(F,N,G){var U=G._fullLayout,X=U._size,I,B,j;f.init({element:F.node(),gd:G,prepFn:function(){I=F.attr("transform"),h(F)},moveFn:function(H,K){F.attr("transform",I+o(H,K)),B=f.align(N._xLeftFrac+H/X.w,N._thickFrac,0,1,N.xanchor),j=f.align(N._yBottomFrac-K/X.h,N._lenFrac,0,1,N.yanchor);var te=f.getCursor(B,j,N.xanchor,N.yanchor);h(F,te)},doneFn:function(){if(h(F),B!==void 0&&j!==void 0){var H={};H[N._propPrefix+"x"]=B,H[N._propPrefix+"y"]=j,N._traceIndex!==void 0?c.call("_guiRestyle",G,H,N._traceIndex):c.call("_guiRelayout",G,H)}}})}function C(F,N,G){var U=N._levels,X=[],I=[],B,j,H=U.end+U.size/100,K=U.size,te=1.001*G[0]-.001*G[1],J=1.001*G[1]-.001*G[0];for(j=0;j<1e5&&(B=U.start+j*K,!(K>0?B>=H:B<=H));j++)B>te&&B<J&&X.push(B);if(N._fillgradient)I=[0];else if(typeof N._fillcolor=="function"){var oe=N._filllevels;if(oe)for(H=oe.end+oe.size/100,K=oe.size,j=0;j<1e5&&(B=oe.start+j*K,!(K>0?B>=H:B<=H));j++)B>G[0]&&B<G[1]&&I.push(B);else I=X.map(function(ie){return ie-U.size/2}),I.push(I[I.length-1]+U.size)}else N._fillcolor&&typeof N._fillcolor=="string"&&(I=[0]);return U.size<0&&(X.reverse(),I.reverse()),{line:X,fill:I}}function D(F,N,G){var U=F._fullLayout,X={type:"linear",range:G,tickmode:N.tickmode,nticks:N.nticks,tick0:N.tick0,dtick:N.dtick,tickvals:N.tickvals,ticktext:N.ticktext,ticks:N.ticks,ticklen:N.ticklen,tickwidth:N.tickwidth,tickcolor:N.tickcolor,showticklabels:N.showticklabels,ticklabelposition:N.ticklabelposition,tickfont:N.tickfont,tickangle:N.tickangle,tickformat:N.tickformat,exponentformat:N.exponentformat,minexponent:N.minexponent,separatethousands:N.separatethousands,showexponent:N.showexponent,showtickprefix:N.showtickprefix,tickprefix:N.tickprefix,showticksuffix:N.showticksuffix,ticksuffix:N.ticksuffix,title:N.title,showline:!0,anchor:"free",side:"right",position:1},I={type:"linear",_id:"y"+N._id},B={letter:"y",font:U.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:U.calendar};function j(H,K){return a.coerce(X,I,_,H,K)}return b(X,I,j,B,U),m(X,I,j,B),I}v.exports={draw:L}},{"../../constants/alignment":745,"../../lib":778,"../../lib/extend":768,"../../lib/setcursor":799,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_defaults":830,"../../plots/cartesian/layout_attributes":842,"../../plots/cartesian/position_defaults":845,"../../plots/plots":891,"../../registry":911,"../color":643,"../colorscale/helpers":654,"../dragelement":662,"../drawing":665,"../titles":738,"./constants":645,d3:169,tinycolor2:576}],648:[function(e,v,M){var r=e("../../lib");v.exports=function(l){return r.isPlainObject(l.colorbar)}},{"../../lib":778}],649:[function(e,v,M){v.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":644,"./defaults":646,"./draw":647,"./has_colorbar":648}],650:[function(e,v,M){var r=e("../colorbar/attributes"),n=e("../../lib/regex").counter,l=e("./scales.js").scales;v.exports=function(t,f){t=t||"",f=f||{};var a=f.cLetter||"c";"onlyIfNumerical"in f&&f.onlyIfNumerical;var o="noScale"in f?f.noScale:t==="marker.line",u="showScaleDflt"in f?f.showScaleDflt:a==="z",h=typeof f.colorscaleDflt=="string"?l[f.colorscaleDflt]:null,i=f.editTypeOverride||"",s;"colorAttr"in f?(s=f.colorAttr,f.colorAttr):s={z:"z",c:"color"}[a];var p=a+"auto",d=a+"min",y=a+"max",b=a+"mid",m={};m[d]=m[y]=void 0;var _={};_[p]=!1;var T={};return s==="color"&&(T.color={valType:"color",arrayOk:!0,editType:i||"style"},f.anim&&(T.color.anim=!0)),T[p]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:m},T[d]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:_},T[y]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:_},T[b]={valType:"number",dflt:null,editType:"calc",impliedEdits:m},T.colorscale={valType:"colorscale",editType:"calc",dflt:h,impliedEdits:{autocolorscale:!1}},T.autocolorscale={valType:"boolean",dflt:f.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},T.reversescale={valType:"boolean",dflt:!1,editType:"plot"},o||(T.showscale={valType:"boolean",dflt:u,editType:"calc"},T.colorbar=r),f.noColorAxis||(T.coloraxis={valType:"subplotid",regex:n("coloraxis"),dflt:null,editType:"calc"}),T}},{"../../lib/regex":795,"../colorbar/attributes":644,"./scales.js":658}],651:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib"),l=e("./helpers").extractOpts;v.exports=function(t,f,a){var o=t._fullLayout,u=a.vals,h=a.containerStr,i=h?n.nestedProperty(f,h).get():f,s=l(i),p=s.auto!==!1,d=s.min,y=s.max,b=s.mid,m=function(){return n.aggNums(Math.min,null,u)},_=function(){return n.aggNums(Math.max,null,u)};if(d===void 0?d=m():p&&(i._colorAx&&r(d)?d=Math.min(d,m()):d=m()),y===void 0?y=_():p&&(i._colorAx&&r(y)?y=Math.max(y,_()):y=_()),p&&b!==void 0&&(y-b>b-d?d=b-(y-b):y-b<b-d&&(y=b+(b-d))),d===y&&(d-=.5,y+=.5),s._sync("min",d),s._sync("max",y),s.autocolorscale){var T;d*y<0?T=o.colorscale.diverging:d>=0?T=o.colorscale.sequential:T=o.colorscale.sequentialminus,s._sync("colorscale",T)}}},{"../../lib":778,"./helpers":654,"fast-isnumeric":241}],652:[function(e,v,M){var r=e("../../lib"),n=e("./helpers").hasColorscale,l=e("./helpers").extractOpts;v.exports=function(t,f){function a(d,y){var b=d["_"+y];b!==void 0&&(d[y]=b)}function o(d,y){var b=y.container?r.nestedProperty(d,y.container).get():d;if(b)if(b.coloraxis)b._colorAx=f[b.coloraxis];else{var m=l(b),_=m.auto;(_||m.min===void 0)&&a(b,y.min),(_||m.max===void 0)&&a(b,y.max),m.autocolorscale&&a(b,"colorscale")}}for(var u=0;u<t.length;u++){var h=t[u],i=h._module.colorbar;if(i)if(Array.isArray(i))for(var s=0;s<i.length;s++)o(h,i[s]);else o(h,i);n(h,"marker.line")&&o(h,{container:"marker.line",min:"cmin",max:"cmax"})}for(var p in f._colorAxes)o(f[p],{min:"cmin",max:"cmax"})}},{"../../lib":778,"./helpers":654}],653:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib"),l=e("../colorbar/has_colorbar"),c=e("../colorbar/defaults"),t=e("./scales").isValid,f=e("../../registry").traceIs;function a(o,u){var h=u.slice(0,u.length-1);return u?n.nestedProperty(o,h).get()||{}:o}v.exports=function o(u,h,i,s,p){var d=p.prefix,y=p.cLetter,b="_module"in h,m=a(u,d),_=a(h,d),T=a(h._template||{},d)||{},g=function(){return delete u.coloraxis,delete h.coloraxis,o(u,h,i,s,p)};if(b){var A=i._colorAxes||{},k=s(d+"coloraxis");if(k){var R=f(h,"contour")&&n.nestedProperty(h,"contours.coloring").get()||"heatmap",L=A[k];L?(L[2].push(g),L[0]!==R&&(L[0]=!1,n.warn(["Ignoring coloraxis:",k,"setting","as it is linked to incompatible colorscales."].join(" ")))):A[k]=[R,h,[g]];return}}var z=m[y+"min"],E=m[y+"max"],S=r(z)&&r(E)&&z<E,C=s(d+y+"auto",!S);C?s(d+y+"mid"):(s(d+y+"min"),s(d+y+"max"));var D=m.colorscale,F=T.colorscale,N;if(D!==void 0&&(N=!t(D)),F!==void 0&&(N=!t(F)),s(d+"autocolorscale",N),s(d+"colorscale"),s(d+"reversescale"),d!=="marker.line."){var G;d&&b&&(G=l(m));var U=s(d+"showscale",G);U&&(d&&T&&(_._template=T),c(m,_,i))}}},{"../../lib":778,"../../registry":911,"../colorbar/defaults":646,"../colorbar/has_colorbar":648,"./scales":658,"fast-isnumeric":241}],654:[function(e,v,M){var r=e("d3"),n=e("tinycolor2"),l=e("fast-isnumeric"),c=e("../../lib"),t=e("../color"),f=e("./scales").isValid;function a(b,m,_){var T=m?c.nestedProperty(b,m).get()||{}:b,g=T[_||"color"],A=!1;if(c.isArrayOrTypedArray(g)){for(var k=0;k<g.length;k++)if(l(g[k])){A=!0;break}}return c.isPlainObject(T)&&(A||T.showscale===!0||l(T.cmin)&&l(T.cmax)||f(T.colorscale)||c.isPlainObject(T.colorbar))}var o=["showscale","autocolorscale","colorscale","reversescale","colorbar"],u=["min","max","mid","auto"];function h(b){var m=b._colorAx,_=m||b,T={},g,A,k;for(A=0;A<o.length;A++)k=o[A],T[k]=_[k];if(m)for(g="c",A=0;A<u.length;A++)k=u[A],T[k]=_["c"+k];else{var R;for(A=0;A<u.length;A++){if(k=u[A],R="c"+k,R in _){T[k]=_[R];continue}R="z"+k,R in _&&(T[k]=_[R])}g=R.charAt(0)}return T._sync=function(L,z){var E=u.indexOf(L)!==-1?g+L:L;_[E]=_["_"+E]=z},T}function i(b){for(var m=h(b),_=m.min,T=m.max,g=m.reversescale?s(m.colorscale):m.colorscale,A=g.length,k=new Array(A),R=new Array(A),L=0;L<A;L++){var z=g[L];k[L]=_+z[0]*(T-_),R[L]=z[1]}return{domain:k,range:R}}function s(b){for(var m=b.length,_=new Array(m),T=m-1,g=0;T>=0;T--,g++){var A=b[T];_[g]=[1-A[0],A[1]]}return _}function p(b,m){m=m||{};for(var _=b.domain,T=b.range,g=T.length,A=new Array(g),k=0;k<g;k++){var R=n(T[k]).toRgb();A[k]=[R.r,R.g,R.b,R.a]}var L=r.scale.linear().domain(_).range(A).clamp(!0),z=m.noNumericCheck,E=m.returnArray,S;return z&&E?S=L:z?S=function(C){return y(L(C))}:E?S=function(C){return l(C)?L(C):n(C).isValid()?C:t.defaultLine}:S=function(C){return l(C)?y(L(C)):n(C).isValid()?C:t.defaultLine},S.domain=L.domain,S.range=function(){return T},S}function d(b,m){return p(i(b),m)}function y(b){var m={r:b[0],g:b[1],b:b[2],a:b[3]};return n(m).toRgbString()}v.exports={hasColorscale:a,extractOpts:h,extractScale:i,flipScale:s,makeColorScaleFunc:p,makeColorScaleFuncFromTrace:d}},{"../../lib":778,"../color":643,"./scales":658,d3:169,"fast-isnumeric":241,tinycolor2:576}],655:[function(e,v,M){var r=e("./scales"),n=e("./helpers");v.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:r.scales,defaultScale:r.defaultScale,getScale:r.get,isValidScale:r.isValid,hasColorscale:n.hasColorscale,extractOpts:n.extractOpts,extractScale:n.extractScale,flipScale:n.flipScale,makeColorScaleFunc:n.makeColorScaleFunc,makeColorScaleFuncFromTrace:n.makeColorScaleFuncFromTrace}},{"./attributes":650,"./calc":651,"./cross_trace_defaults":652,"./defaults":653,"./helpers":654,"./layout_attributes":656,"./layout_defaults":657,"./scales":658}],656:[function(e,v,M){var r=e("../../lib/extend").extendFlat,n=e("./attributes"),l=e("./scales").scales;v.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:l.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:l.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:l.RdBu,editType:"calc"}},coloraxis:r({_isSubplotObj:!0,editType:"calc"},n("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":768,"./attributes":650,"./scales":658}],657:[function(e,v,M){var r=e("../../lib"),n=e("../../plot_api/plot_template"),l=e("./layout_attributes"),c=e("./defaults");v.exports=function(f,a){function o(b,m){return r.coerce(f,a,l,b,m)}o("colorscale.sequential"),o("colorscale.sequentialminus"),o("colorscale.diverging");var u=a._colorAxes,h,i;function s(b,m){return r.coerce(h,i,l.coloraxis,b,m)}for(var p in u){var d=u[p];if(d[0])h=f[p]||{},i=n.newContainer(a,p,"coloraxis"),i._name=p,c(h,i,a,s,{prefix:"",cLetter:"c"});else{for(var y=0;y<d[2].length;y++)d[2][y]();delete a._colorAxes[p]}}}},{"../../lib":778,"../../plot_api/plot_template":817,"./defaults":653,"./layout_attributes":656}],658:[function(e,v,M){var r=e("tinycolor2"),n={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},l=n.RdBu;function c(a,o){if(o||(o=l),!a)return o;function u(){try{a=n[a]||JSON.parse(a)}catch{a=o}}return typeof a=="string"&&(u(),typeof a=="string"&&u()),t(a)?a:o}function t(a){var o=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var u=0;u<a.length;u++){var h=a[u];if(h.length!==2||+h[0]<o||!r(h[1]).isValid())return!1;o=+h[0]}return!0}function f(a){return n[a]!==void 0?!0:t(a)}v.exports={scales:n,defaultScale:l,get:c,isValid:f}},{tinycolor2:576}],659:[function(e,v,M){v.exports=function(n,l,c,t,f){var a=(n-c)/(t-c),o=a+l/(t-c),u=(a+o)/2;return f==="left"||f==="bottom"?a:f==="center"||f==="middle"?u:f==="right"||f==="top"?o:a<2/3-u?a:o>4/3-u?o:u}},{}],660:[function(e,v,M){var r=e("../../lib"),n=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];v.exports=function(c,t,f,a){return f==="left"?c=0:f==="center"?c=1:f==="right"?c=2:c=r.constrain(Math.floor(c*3),0,2),a==="bottom"?t=0:a==="middle"?t=1:a==="top"?t=2:t=r.constrain(Math.floor(t*3),0,2),n[t][c]}},{"../../lib":778}],661:[function(e,v,M){M.selectMode=function(r){return r==="lasso"||r==="select"},M.drawMode=function(r){return r==="drawclosedpath"||r==="drawopenpath"||r==="drawline"||r==="drawrect"||r==="drawcircle"},M.openMode=function(r){return r==="drawline"||r==="drawopenpath"},M.rectMode=function(r){return r==="select"||r==="drawline"||r==="drawrect"||r==="drawcircle"},M.freeMode=function(r){return r==="lasso"||r==="drawclosedpath"||r==="drawopenpath"},M.selectingOrDrawing=function(r){return M.freeMode(r)||M.rectMode(r)}},{}],662:[function(e,v,M){var r=e("mouse-event-offset"),n=e("has-hover"),l=e("has-passive-events"),c=e("../../lib").removeElement,t=e("../../plots/cartesian/constants"),f=v.exports={};f.align=e("./align"),f.getCursor=e("./cursor");var a=e("./unhover");f.unhover=a.wrapped,f.unhoverRaw=a.raw,f.init=function(i){var s=i.gd,p=1,d=s._context.doubleClickDelay,y=i.element,b,m,_,T,g,A,k,R;s._mouseDownTime||(s._mouseDownTime=0),y.style.pointerEvents="all",y.onmousedown=E,l?(y._ontouchstart&&y.removeEventListener("touchstart",y._ontouchstart),y._ontouchstart=E,y.addEventListener("touchstart",E,{passive:!1})):y.ontouchstart=E;function L(D,F,N){return Math.abs(D)<N&&(D=0),Math.abs(F)<N&&(F=0),[D,F]}var z=i.clampFn||L;function E(D){s._dragged=!1,s._dragging=!0;var F=u(D);b=F[0],m=F[1],k=D.target,A=D,R=D.buttons===2||D.ctrlKey,typeof D.clientX>"u"&&typeof D.clientY>"u"&&(D.clientX=b,D.clientY=m),_=new Date().getTime(),_-s._mouseDownTime<d?p+=1:(p=1,s._mouseDownTime=_),i.prepFn&&i.prepFn(D,b,m),n&&!R?(g=o(),g.style.cursor=window.getComputedStyle(y).cursor):n||(g=document,T=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(y).cursor),document.addEventListener("mouseup",C),document.addEventListener("touchend",C),i.dragmode!==!1&&(D.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(D){D.preventDefault();var F=u(D),N=i.minDrag||t.MINDRAG,G=z(F[0]-b,F[1]-m,N),U=G[0],X=G[1];(U||X)&&(s._dragged=!0,f.unhover(s)),s._dragged&&i.moveFn&&!R&&(s._dragdata={element:y,dx:U,dy:X},i.moveFn(U,X))}function C(D){if(delete s._dragdata,i.dragmode!==!1&&(D.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",C),document.removeEventListener("touchend",C),n?c(g):T&&(g.documentElement.style.cursor=T,T=null),!s._dragging){s._dragged=!1;return}if(s._dragging=!1,new Date().getTime()-s._mouseDownTime>d&&(p=Math.max(p-1,1)),s._dragged)i.doneFn&&i.doneFn();else if(i.clickFn&&i.clickFn(p,A),!R){var F;try{F=new MouseEvent("click",D)}catch{var N=u(D);F=document.createEvent("MouseEvents"),F.initMouseEvent("click",D.bubbles,D.cancelable,D.view,D.detail,D.screenX,D.screenY,N[0],N[1],D.ctrlKey,D.altKey,D.shiftKey,D.metaKey,D.button,D.relatedTarget)}k.dispatchEvent(F)}s._dragging=!1,s._dragged=!1}};function o(){var h=document.createElement("div");h.className="dragcover";var i=h.style;return i.position="fixed",i.left=0,i.right=0,i.top=0,i.bottom=0,i.zIndex=999999999,i.background="none",document.body.appendChild(h),h}f.coverSlip=o;function u(h){return r(h.changedTouches?h.changedTouches[0]:h,document.body)}},{"../../lib":778,"../../plots/cartesian/constants":834,"./align":659,"./cursor":660,"./unhover":663,"has-hover":440,"has-passive-events":441,"mouse-event-offset":484}],663:[function(e,v,M){var r=e("../../lib/events"),n=e("../../lib/throttle"),l=e("../../lib/dom").getGraphDiv,c=e("../fx/constants"),t=v.exports={};t.wrapped=function(f,a,o){f=l(f),f._fullLayout&&n.clear(f._fullLayout._uid+c.HOVERID),t.raw(f,a,o)},t.raw=function(a,o){var u=a._fullLayout,h=a._hoverdata;o||(o={}),!(o.target&&r.triggerHandler(a,"plotly_beforehover",o)===!1)&&(u._hoverlayer.selectAll("g").remove(),u._hoverlayer.selectAll("line").remove(),u._hoverlayer.selectAll("circle").remove(),a._hoverdata=void 0,o.target&&h&&a.emit("plotly_unhover",{event:o,points:h}))}},{"../../lib/dom":766,"../../lib/events":767,"../../lib/throttle":804,"../fx/constants":677}],664:[function(e,v,M){M.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},{}],665:[function(e,v,M){var r=e("d3"),n=e("fast-isnumeric"),l=e("tinycolor2"),c=e("../../registry"),t=e("../color"),f=e("../colorscale"),a=e("../../lib"),o=a.strTranslate,u=e("../../lib/svg_text_utils"),h=e("../../constants/xmlns_namespaces"),i=e("../../constants/alignment"),s=i.LINE_SPACING,p=e("../../constants/interactions").DESELECTDIM,d=e("../../traces/scatter/subtypes"),y=e("../../traces/scatter/make_bubble_size_func"),b=e("../../components/fx/helpers").appendArrayPointValue,m=v.exports={};m.font=function(K,te,J,oe){a.isPlainObject(te)&&(oe=te.color,J=te.size,te=te.family),te&&K.style("font-family",te),J+1&&K.style("font-size",J+"px"),oe&&K.call(t.fill,oe)},m.setPosition=function(K,te,J){K.attr("x",te).attr("y",J)},m.setSize=function(K,te,J){K.attr("width",te).attr("height",J)},m.setRect=function(K,te,J,oe,ie){K.call(m.setPosition,te,J).call(m.setSize,oe,ie)},m.translatePoint=function(K,te,J,oe){var ie=J.c2p(K.x),Q=oe.c2p(K.y);if(n(ie)&&n(Q)&&te.node())te.node().nodeName==="text"?te.attr("x",ie).attr("y",Q):te.attr("transform",o(ie,Q));else return!1;return!0},m.translatePoints=function(K,te,J){K.each(function(oe){var ie=r.select(this);m.translatePoint(oe,ie,te,J)})},m.hideOutsideRangePoint=function(K,te,J,oe,ie,Q){te.attr("display",J.isPtWithinRange(K,ie)&&oe.isPtWithinRange(K,Q)?null:"none")},m.hideOutsideRangePoints=function(K,te){if(te._hasClipOnAxisFalse){var J=te.xaxis,oe=te.yaxis;K.each(function(ie){var Q=ie[0].trace,V=Q.xcalendar,se=Q.ycalendar,re=c.traceIs(Q,"bar-like")?".bartext":".point,.textpoint";K.selectAll(re).each(function(ee){m.hideOutsideRangePoint(ee,r.select(this),J,oe,V,se)})})}},m.crispRound=function(K,te,J){return!te||!n(te)?J||0:K._context.staticPlot?te:te<1?1:Math.round(te)},m.singleLineStyle=function(K,te,J,oe,ie){te.style("fill","none");var Q=(((K||[])[0]||{}).trace||{}).line||{},V=J||Q.width||0,se=ie||Q.dash||"";t.stroke(te,oe||Q.color),m.dashLine(te,se,V)},m.lineGroupStyle=function(K,te,J,oe){K.style("fill","none").each(function(ie){var Q=(((ie||[])[0]||{}).trace||{}).line||{},V=te||Q.width||0,se=oe||Q.dash||"";r.select(this).call(t.stroke,J||Q.color).call(m.dashLine,se,V)})},m.dashLine=function(K,te,J){J=+J||0,te=m.dashStyle(te,J),K.style({"stroke-dasharray":te,"stroke-width":J+"px"})},m.dashStyle=function(K,te){te=+te||1;var J=Math.max(te,3);return K==="solid"?K="":K==="dot"?K=J+"px,"+J+"px":K==="dash"?K=3*J+"px,"+3*J+"px":K==="longdash"?K=5*J+"px,"+5*J+"px":K==="dashdot"?K=3*J+"px,"+J+"px,"+J+"px,"+J+"px":K==="longdashdot"&&(K=5*J+"px,"+2*J+"px,"+J+"px,"+2*J+"px"),K},m.singleFillStyle=function(K){var te=r.select(K.node()),J=te.data(),oe=(((J[0]||[])[0]||{}).trace||{}).fillcolor;oe&&K.call(t.fill,oe)},m.fillGroupStyle=function(K){K.style("stroke-width",0).each(function(te){var J=r.select(this);te[0].trace&&J.call(t.fill,te[0].trace.fillcolor)})};var _=e("./symbol_defs");m.symbolNames=[],m.symbolFuncs=[],m.symbolNeedLines={},m.symbolNoDot={},m.symbolNoFill={},m.symbolList=[],Object.keys(_).forEach(function(K){var te=_[K],J=te.n;m.symbolList.push(J,String(J),K,J+100,String(J+100),K+"-open"),m.symbolNames[J]=K,m.symbolFuncs[J]=te.f,te.needLine&&(m.symbolNeedLines[J]=!0),te.noDot?m.symbolNoDot[J]=!0:m.symbolList.push(J+200,String(J+200),K+"-dot",J+300,String(J+300),K+"-open-dot"),te.noFill&&(m.symbolNoFill[J]=!0)});var T=m.symbolNames.length,g="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";m.symbolNumber=function(K){if(n(K))K=+K;else if(typeof K=="string"){var te=0;K.indexOf("-open")>0&&(te=100,K=K.replace("-open","")),K.indexOf("-dot")>0&&(te+=200,K=K.replace("-dot","")),K=m.symbolNames.indexOf(K),K>=0&&(K+=te)}return K%100>=T||K>=400?0:Math.floor(Math.max(K,0))};function A(K,te){var J=K%100;return m.symbolFuncs[J](te)+(K>=200?g:"")}var k={x1:1,x2:0,y1:0,y2:0},R={x1:0,x2:0,y1:1,y2:0},L=r.format("~.1f"),z={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:k},horizontalreversed:{node:"linearGradient",attrs:k,reversed:!0},vertical:{node:"linearGradient",attrs:R},verticalreversed:{node:"linearGradient",attrs:R,reversed:!0}};m.gradient=function(K,te,J,oe,ie,Q){for(var V=ie.length,se=z[oe],re=new Array(V),ee=0;ee<V;ee++)se.reversed?re[V-1-ee]=[L((1-ie[ee][0])*100),ie[ee][1]]:re[ee]=[L(ie[ee][0]*100),ie[ee][1]];var ae=te._fullLayout,fe="g"+ae._uid+"-"+J,de=ae._defs.select(".gradients").selectAll("#"+fe).data([oe+re.join(";")],a.identity);de.exit().remove(),de.enter().append(se.node).each(function(){var ue=r.select(this);se.attrs&&ue.attr(se.attrs),ue.attr("id",fe);var me=ue.selectAll("stop").data(re);me.exit().remove(),me.enter().append("stop"),me.each(function(be){var ke=l(be[1]);r.select(this).attr({offset:be[0]+"%","stop-color":t.tinyRGB(ke),"stop-opacity":ke.getAlpha()})})}),K.style(Q,B(fe,te)).style(Q+"-opacity",null);var pe=function(ue){return"."+ue.attr("class").replace(/\s/g,".")},W=pe(r.select(K.node().parentNode))+">"+pe(K);ae._gradientUrlQueryParts[W]=1},m.initGradients=function(K){var te=K._fullLayout,J=a.ensureSingle(te._defs,"g","gradients");J.selectAll("linearGradient,radialGradient").remove(),te._gradientUrlQueryParts={}},m.pointStyle=function(K,te,J){if(K.size()){var oe=m.makePointStyleFns(te);K.each(function(ie){m.singlePointStyle(ie,r.select(this),te,oe,J)})}},m.singlePointStyle=function(K,te,J,oe,ie){var Q=J.marker,V=Q.line;if(te.style("opacity",oe.selectedOpacityFn?oe.selectedOpacityFn(K):K.mo===void 0?Q.opacity:K.mo),oe.ms2mrc){var se;K.ms==="various"||Q.size==="various"?se=3:se=oe.ms2mrc(K.ms),K.mrc=se,oe.selectedSizeFn&&(se=K.mrc=oe.selectedSizeFn(K));var re=m.symbolNumber(K.mx||Q.symbol)||0;K.om=re%200>=100,te.attr("d",A(re,se))}var ee=!1,ae,fe,de;if(K.so)de=V.outlierwidth,fe=V.outliercolor,ae=Q.outliercolor;else{var pe=(V||{}).width;de=(K.mlw+1||pe+1||(K.trace?(K.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in K?fe=K.mlcc=oe.lineScale(K.mlc):a.isArrayOrTypedArray(V.color)?fe=t.defaultLine:fe=V.color,a.isArrayOrTypedArray(Q.color)&&(ae=t.defaultLine,ee=!0),"mc"in K?ae=K.mcc=oe.markerScale(K.mc):ae=Q.color||"rgba(0,0,0,0)",oe.selectedColorFn&&(ae=oe.selectedColorFn(K))}if(K.om)te.call(t.stroke,ae).style({"stroke-width":(de||1)+"px",fill:"none"});else{te.style("stroke-width",(K.isBlank?0:de)+"px");var W=Q.gradient,ue=K.mgt;if(ue?ee=!0:ue=W&&W.type,Array.isArray(ue)&&(ue=ue[0],z[ue]||(ue=0)),ue&&ue!=="none"){var me=K.mgc;me?ee=!0:me=W.color;var be=J.uid;ee&&(be+="-"+K.i),m.gradient(te,ie,be,ue,[[0,me],[1,ae]],"fill")}else t.fill(te,ae);de&&t.stroke(te,fe)}},m.makePointStyleFns=function(K){var te={},J=K.marker;return te.markerScale=m.tryColorscale(J,""),te.lineScale=m.tryColorscale(J,"line"),c.traceIs(K,"symbols")&&(te.ms2mrc=d.isBubble(K)?y(K):function(){return(J.size||6)/2}),K.selectedpoints&&a.extendFlat(te,m.makeSelectedPointStyleFns(K)),te},m.makeSelectedPointStyleFns=function(K){var te={},J=K.selected||{},oe=K.unselected||{},ie=K.marker||{},Q=J.marker||{},V=oe.marker||{},se=ie.opacity,re=Q.opacity,ee=V.opacity,ae=re!==void 0,fe=ee!==void 0;(a.isArrayOrTypedArray(se)||ae||fe)&&(te.selectedOpacityFn=function(je){var ze=je.mo===void 0?ie.opacity:je.mo;return je.selected?ae?re:ze:fe?ee:p*ze});var de=ie.color,pe=Q.color,W=V.color;(pe||W)&&(te.selectedColorFn=function(je){var ze=je.mcc||de;return je.selected?pe||ze:W||ze});var ue=ie.size,me=Q.size,be=V.size,ke=me!==void 0,Pe=be!==void 0;return c.traceIs(K,"symbols")&&(ke||Pe)&&(te.selectedSizeFn=function(je){var ze=je.mrc||ue/2;return je.selected?ke?me/2:ze:Pe?be/2:ze}),te},m.makeSelectedTextStyleFns=function(K){var te={},J=K.selected||{},oe=K.unselected||{},ie=K.textfont||{},Q=J.textfont||{},V=oe.textfont||{},se=ie.color,re=Q.color,ee=V.color;return te.selectedTextColorFn=function(ae){var fe=ae.tc||se;return ae.selected?re||fe:ee||(re?fe:t.addOpacity(fe,p))},te},m.selectedPointStyle=function(K,te){if(!(!K.size()||!te.selectedpoints)){var J=m.makeSelectedPointStyleFns(te),oe=te.marker||{},ie=[];J.selectedOpacityFn&&ie.push(function(Q,V){Q.style("opacity",J.selectedOpacityFn(V))}),J.selectedColorFn&&ie.push(function(Q,V){t.fill(Q,J.selectedColorFn(V))}),J.selectedSizeFn&&ie.push(function(Q,V){var se=V.mx||oe.symbol||0,re=J.selectedSizeFn(V);Q.attr("d",A(m.symbolNumber(se),re)),V.mrc2=re}),ie.length&&K.each(function(Q){for(var V=r.select(this),se=0;se<ie.length;se++)ie[se](V,Q)})}},m.tryColorscale=function(K,te){var J=te?a.nestedProperty(K,te).get():K;if(J){var oe=J.color;if((J.colorscale||J._colorAx)&&a.isArrayOrTypedArray(oe))return f.makeColorScaleFuncFromTrace(J)}return a.identity};var E={start:1,end:-1,middle:0,bottom:1,top:-1};function S(K,te,J,oe){var ie=r.select(K.node().parentNode),Q=te.indexOf("top")!==-1?"top":te.indexOf("bottom")!==-1?"bottom":"middle",V=te.indexOf("left")!==-1?"end":te.indexOf("right")!==-1?"start":"middle",se=oe?oe/.8+1:0,re=(u.lineCount(K)-1)*s+1,ee=E[V]*se,ae=J*.75+E[Q]*se+(E[Q]-1)*re*J/2;K.attr("text-anchor",V),ie.attr("transform",o(ee,ae))}function C(K,te){var J=K.ts||te.textfont.size;return n(J)&&J>0?J:0}m.textPointStyle=function(K,te,J){if(K.size()){var oe;if(te.selectedpoints){var ie=m.makeSelectedTextStyleFns(te);oe=ie.selectedTextColorFn}var Q=te.texttemplate,V=J._fullLayout;K.each(function(se){var re=r.select(this),ee=Q?a.extractOption(se,te,"txt","texttemplate"):a.extractOption(se,te,"tx","text");if(!ee&&ee!==0){re.remove();return}if(Q){var ae=te._module.formatLabels?te._module.formatLabels(se,te,V):{},fe={};b(fe,te,se.i);var de=te._meta||{};ee=a.texttemplateString(ee,ae,V._d3locale,fe,se,de)}var pe=se.tp||te.textposition,W=C(se,te),ue=oe?oe(se):se.tc||te.textfont.color;re.call(m.font,se.tf||te.textfont.family,W,ue).text(ee).call(u.convertToTspans,J).call(S,pe,W,se.mrc)})}},m.selectedTextStyle=function(K,te){if(!(!K.size()||!te.selectedpoints)){var J=m.makeSelectedTextStyleFns(te);K.each(function(oe){var ie=r.select(this),Q=J.selectedTextColorFn(oe),V=oe.tp||te.textposition,se=C(oe,te);t.fill(ie,Q),S(ie,V,se,oe.mrc2||oe.mrc)})}};var D=.5;m.smoothopen=function(K,te){if(K.length<3)return"M"+K.join("L");var J="M"+K[0],oe=[],ie;for(ie=1;ie<K.length-1;ie++)oe.push(F(K[ie-1],K[ie],K[ie+1],te));for(J+="Q"+oe[0][0]+" "+K[1],ie=2;ie<K.length-1;ie++)J+="C"+oe[ie-2][1]+" "+oe[ie-1][0]+" "+K[ie];return J+="Q"+oe[K.length-3][1]+" "+K[K.length-1],J},m.smoothclosed=function(K,te){if(K.length<3)return"M"+K.join("L")+"Z";var J="M"+K[0],oe=K.length-1,ie=[F(K[oe],K[0],K[1],te)],Q;for(Q=1;Q<oe;Q++)ie.push(F(K[Q-1],K[Q],K[Q+1],te));for(ie.push(F(K[oe-1],K[oe],K[0],te)),Q=1;Q<=oe;Q++)J+="C"+ie[Q-1][1]+" "+ie[Q][0]+" "+K[Q];return J+="C"+ie[oe][1]+" "+ie[0][0]+" "+K[0]+"Z",J};function F(K,te,J,oe){var ie=K[0]-te[0],Q=K[1]-te[1],V=J[0]-te[0],se=J[1]-te[1],re=Math.pow(ie*ie+Q*Q,D/2),ee=Math.pow(V*V+se*se,D/2),ae=(ee*ee*ie-re*re*V)*oe,fe=(ee*ee*Q-re*re*se)*oe,de=3*ee*(re+ee),pe=3*re*(re+ee);return[[r.round(te[0]+(de&&ae/de),2),r.round(te[1]+(de&&fe/de),2)],[r.round(te[0]-(pe&&ae/pe),2),r.round(te[1]-(pe&&fe/pe),2)]]}var N={hv:function(K,te){return"H"+r.round(te[0],2)+"V"+r.round(te[1],2)},vh:function(K,te){return"V"+r.round(te[1],2)+"H"+r.round(te[0],2)},hvh:function(K,te){return"H"+r.round((K[0]+te[0])/2,2)+"V"+r.round(te[1],2)+"H"+r.round(te[0],2)},vhv:function(K,te){return"V"+r.round((K[1]+te[1])/2,2)+"H"+r.round(te[0],2)+"V"+r.round(te[1],2)}},G=function(K,te){return"L"+r.round(te[0],2)+","+r.round(te[1],2)};m.steps=function(K){var te=N[K]||G;return function(J){for(var oe="M"+r.round(J[0][0],2)+","+r.round(J[0][1],2),ie=1;ie<J.length;ie++)oe+=te(J[ie-1],J[ie]);return oe}},m.makeTester=function(){var K=a.ensureSingleById(r.select("body"),"svg","js-plotly-tester",function(J){J.attr(h.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),te=a.ensureSingle(K,"path","js-reference-point",function(J){J.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});m.tester=K,m.testref=te},m.savedBBoxes={};var U=0,X=1e4;m.bBox=function(K,te,J){J||(J=I(K));var oe;if(J){if(oe=m.savedBBoxes[J],oe)return a.extendFlat({},oe)}else if(K.childNodes.length===1){var ie=K.childNodes[0];if(J=I(ie),J){var Q=+ie.getAttribute("x")||0,V=+ie.getAttribute("y")||0,se=ie.getAttribute("transform");if(!se){var re=m.bBox(ie,!1,J);return Q&&(re.left+=Q,re.right+=Q),V&&(re.top+=V,re.bottom+=V),re}if(J+="~"+Q+"~"+V+"~"+se,oe=m.savedBBoxes[J],oe)return a.extendFlat({},oe)}}var ee,ae;te?ee=K:(ae=m.tester.node(),ee=K.cloneNode(!0),ae.appendChild(ee)),r.select(ee).attr("transform",null).call(u.positionText,0,0);var fe=ee.getBoundingClientRect(),de=m.testref.node().getBoundingClientRect();te||ae.removeChild(ee);var pe={height:fe.height,width:fe.width,left:fe.left-de.left,top:fe.top-de.top,right:fe.right-de.left,bottom:fe.bottom-de.top};return U>=X&&(m.savedBBoxes={},U=0),J&&(m.savedBBoxes[J]=pe),U++,a.extendFlat({},pe)};function I(K){var te=K.getAttribute("data-unformatted");if(te!==null)return te+K.getAttribute("data-math")+K.getAttribute("text-anchor")+K.getAttribute("style")}m.setClipUrl=function(K,te,J){K.attr("clip-path",B(te,J))};function B(K,te){if(!K)return null;var J=te._context,oe=J._exportedPlot?"":J._baseUrl||"";return"url('"+oe+"#"+K+"')"}m.getTranslate=function(K){var te=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,J=K.attr?"attr":"getAttribute",oe=K[J]("transform")||"",ie=oe.replace(te,function(Q,V,se){return[V,se].join(" ")}).split(" ");return{x:+ie[0]||0,y:+ie[1]||0}},m.setTranslate=function(K,te,J){var oe=/(\btranslate\(.*?\);?)/,ie=K.attr?"attr":"getAttribute",Q=K.attr?"attr":"setAttribute",V=K[ie]("transform")||"";return te=te||0,J=J||0,V=V.replace(oe,"").trim(),V+=o(te,J),V=V.trim(),K[Q]("transform",V),V},m.getScale=function(K){var te=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,J=K.attr?"attr":"getAttribute",oe=K[J]("transform")||"",ie=oe.replace(te,function(Q,V,se){return[V,se].join(" ")}).split(" ");return{x:+ie[0]||1,y:+ie[1]||1}},m.setScale=function(K,te,J){var oe=/(\bscale\(.*?\);?)/,ie=K.attr?"attr":"getAttribute",Q=K.attr?"attr":"setAttribute",V=K[ie]("transform")||"";return te=te||1,J=J||1,V=V.replace(oe,"").trim(),V+="scale("+te+","+J+")",V=V.trim(),K[Q]("transform",V),V};var j=/\s*sc.*/;m.setPointGroupScale=function(K,te,J){if(te=te||1,J=J||1,!!K){var oe=te===1&&J===1?"":"scale("+te+","+J+")";K.each(function(){var ie=(this.getAttribute("transform")||"").replace(j,"");ie+=oe,ie=ie.trim(),this.setAttribute("transform",ie)})}};var H=/translate\([^)]*\)\s*$/;m.setTextPointsScale=function(K,te,J){K&&K.each(function(){var oe,ie=r.select(this),Q=ie.select("text");if(Q.node()){var V=parseFloat(Q.attr("x")||0),se=parseFloat(Q.attr("y")||0),re=(ie.attr("transform")||"").match(H);te===1&&J===1?oe=[]:oe=[o(V,se),"scale("+te+","+J+")",o(-V,-se)],re&&oe.push(re),ie.attr("transform",oe.join(""))}})}},{"../../components/fx/helpers":679,"../../constants/alignment":745,"../../constants/interactions":752,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../lib/svg_text_utils":803,"../../registry":911,"../../traces/scatter/make_bubble_size_func":1204,"../../traces/scatter/subtypes":1212,"../color":643,"../colorscale":655,"./symbol_defs":666,d3:169,"fast-isnumeric":241,tinycolor2:576}],666:[function(e,v,M){var r=e("d3");v.exports={circle:{n:0,f:function(n){var l=r.round(n,2);return"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z"}},square:{n:1,f:function(n){var l=r.round(n,2);return"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z"}},diamond:{n:2,f:function(n){var l=r.round(n*1.3,2);return"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"Z"}},cross:{n:3,f:function(n){var l=r.round(n*.4,2),c=r.round(n*1.2,2);return"M"+c+","+l+"H"+l+"V"+c+"H-"+l+"V"+l+"H-"+c+"V-"+l+"H-"+l+"V-"+c+"H"+l+"V-"+l+"H"+c+"Z"}},x:{n:4,f:function(n){var l=r.round(n*.8/Math.sqrt(2),2),c="l"+l+","+l,t="l"+l+",-"+l,f="l-"+l+",-"+l,a="l-"+l+","+l;return"M0,"+l+c+t+f+t+f+a+f+a+c+a+c+"Z"}},"triangle-up":{n:5,f:function(n){var l=r.round(n*2/Math.sqrt(3),2),c=r.round(n/2,2),t=r.round(n,2);return"M-"+l+","+c+"H"+l+"L0,-"+t+"Z"}},"triangle-down":{n:6,f:function(n){var l=r.round(n*2/Math.sqrt(3),2),c=r.round(n/2,2),t=r.round(n,2);return"M-"+l+",-"+c+"H"+l+"L0,"+t+"Z"}},"triangle-left":{n:7,f:function(n){var l=r.round(n*2/Math.sqrt(3),2),c=r.round(n/2,2),t=r.round(n,2);return"M"+c+",-"+l+"V"+l+"L-"+t+",0Z"}},"triangle-right":{n:8,f:function(n){var l=r.round(n*2/Math.sqrt(3),2),c=r.round(n/2,2),t=r.round(n,2);return"M-"+c+",-"+l+"V"+l+"L"+t+",0Z"}},"triangle-ne":{n:9,f:function(n){var l=r.round(n*.6,2),c=r.round(n*1.2,2);return"M-"+c+",-"+l+"H"+l+"V"+c+"Z"}},"triangle-se":{n:10,f:function(n){var l=r.round(n*.6,2),c=r.round(n*1.2,2);return"M"+l+",-"+c+"V"+l+"H-"+c+"Z"}},"triangle-sw":{n:11,f:function(n){var l=r.round(n*.6,2),c=r.round(n*1.2,2);return"M"+c+","+l+"H-"+l+"V-"+c+"Z"}},"triangle-nw":{n:12,f:function(n){var l=r.round(n*.6,2),c=r.round(n*1.2,2);return"M-"+l+","+c+"V-"+l+"H"+c+"Z"}},pentagon:{n:13,f:function(n){var l=r.round(n*.951,2),c=r.round(n*.588,2),t=r.round(-n,2),f=r.round(n*-.309,2),a=r.round(n*.809,2);return"M"+l+","+f+"L"+c+","+a+"H-"+c+"L-"+l+","+f+"L0,"+t+"Z"}},hexagon:{n:14,f:function(n){var l=r.round(n,2),c=r.round(n/2,2),t=r.round(n*Math.sqrt(3)/2,2);return"M"+t+",-"+c+"V"+c+"L0,"+l+"L-"+t+","+c+"V-"+c+"L0,-"+l+"Z"}},hexagon2:{n:15,f:function(n){var l=r.round(n,2),c=r.round(n/2,2),t=r.round(n*Math.sqrt(3)/2,2);return"M-"+c+","+t+"H"+c+"L"+l+",0L"+c+",-"+t+"H-"+c+"L-"+l+",0Z"}},octagon:{n:16,f:function(n){var l=r.round(n*.924,2),c=r.round(n*.383,2);return"M-"+c+",-"+l+"H"+c+"L"+l+",-"+c+"V"+c+"L"+c+","+l+"H-"+c+"L-"+l+","+c+"V-"+c+"Z"}},star:{n:17,f:function(n){var l=n*1.4,c=r.round(l*.225,2),t=r.round(l*.951,2),f=r.round(l*.363,2),a=r.round(l*.588,2),o=r.round(-l,2),u=r.round(l*-.309,2),h=r.round(l*.118,2),i=r.round(l*.809,2),s=r.round(l*.382,2);return"M"+c+","+u+"H"+t+"L"+f+","+h+"L"+a+","+i+"L0,"+s+"L-"+a+","+i+"L-"+f+","+h+"L-"+t+","+u+"H-"+c+"L0,"+o+"Z"}},hexagram:{n:18,f:function(n){var l=r.round(n*.66,2),c=r.round(n*.38,2),t=r.round(n*.76,2);return"M-"+t+",0l-"+c+",-"+l+"h"+t+"l"+c+",-"+l+"l"+c+","+l+"h"+t+"l-"+c+","+l+"l"+c+","+l+"h-"+t+"l-"+c+","+l+"l-"+c+",-"+l+"h-"+t+"Z"}},"star-triangle-up":{n:19,f:function(n){var l=r.round(n*Math.sqrt(3)*.8,2),c=r.round(n*.8,2),t=r.round(n*1.6,2),f=r.round(n*4,2),a="A "+f+","+f+" 0 0 1 ";return"M-"+l+","+c+a+l+","+c+a+"0,-"+t+a+"-"+l+","+c+"Z"}},"star-triangle-down":{n:20,f:function(n){var l=r.round(n*Math.sqrt(3)*.8,2),c=r.round(n*.8,2),t=r.round(n*1.6,2),f=r.round(n*4,2),a="A "+f+","+f+" 0 0 1 ";return"M"+l+",-"+c+a+"-"+l+",-"+c+a+"0,"+t+a+l+",-"+c+"Z"}},"star-square":{n:21,f:function(n){var l=r.round(n*1.1,2),c=r.round(n*2,2),t="A "+c+","+c+" 0 0 1 ";return"M-"+l+",-"+l+t+"-"+l+","+l+t+l+","+l+t+l+",-"+l+t+"-"+l+",-"+l+"Z"}},"star-diamond":{n:22,f:function(n){var l=r.round(n*1.4,2),c=r.round(n*1.9,2),t="A "+c+","+c+" 0 0 1 ";return"M-"+l+",0"+t+"0,"+l+t+l+",0"+t+"0,-"+l+t+"-"+l+",0Z"}},"diamond-tall":{n:23,f:function(n){var l=r.round(n*.7,2),c=r.round(n*1.4,2);return"M0,"+c+"L"+l+",0L0,-"+c+"L-"+l+",0Z"}},"diamond-wide":{n:24,f:function(n){var l=r.round(n*1.4,2),c=r.round(n*.7,2);return"M0,"+c+"L"+l+",0L0,-"+c+"L-"+l+",0Z"}},hourglass:{n:25,f:function(n){var l=r.round(n,2);return"M"+l+","+l+"H-"+l+"L"+l+",-"+l+"H-"+l+"Z"},noDot:!0},bowtie:{n:26,f:function(n){var l=r.round(n,2);return"M"+l+","+l+"V-"+l+"L-"+l+","+l+"V-"+l+"Z"},noDot:!0},"circle-cross":{n:27,f:function(n){var l=r.round(n,2);return"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(n){var l=r.round(n,2),c=r.round(n/Math.sqrt(2),2);return"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(n){var l=r.round(n,2);return"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(n){var l=r.round(n,2);return"M"+l+","+l+"L-"+l+",-"+l+"M"+l+",-"+l+"L-"+l+","+l+"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(n){var l=r.round(n*1.3,2);return"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM0,-"+l+"V"+l+"M-"+l+",0H"+l},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(n){var l=r.round(n*1.3,2),c=r.round(n*.65,2);return"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM-"+c+",-"+c+"L"+c+","+c+"M-"+c+","+c+"L"+c+",-"+c},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(n){var l=r.round(n*1.4,2);return"M0,"+l+"V-"+l+"M"+l+",0H-"+l},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(n){var l=r.round(n,2);return"M"+l+","+l+"L-"+l+",-"+l+"M"+l+",-"+l+"L-"+l+","+l},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(n){var l=r.round(n*1.2,2),c=r.round(n*.85,2);return"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(n){var l=r.round(n/2,2),c=r.round(n,2);return"M"+l+","+c+"V-"+c+"m-"+c+",0V"+c+"M"+c+","+l+"H-"+c+"m0,-"+c+"H"+c},needLine:!0,noFill:!0},"y-up":{n:37,f:function(n){var l=r.round(n*1.2,2),c=r.round(n*1.6,2),t=r.round(n*.8,2);return"M-"+l+","+t+"L0,0M"+l+","+t+"L0,0M0,-"+c+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(n){var l=r.round(n*1.2,2),c=r.round(n*1.6,2),t=r.round(n*.8,2);return"M-"+l+",-"+t+"L0,0M"+l+",-"+t+"L0,0M0,"+c+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(n){var l=r.round(n*1.2,2),c=r.round(n*1.6,2),t=r.round(n*.8,2);return"M"+t+","+l+"L0,0M"+t+",-"+l+"L0,0M-"+c+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(n){var l=r.round(n*1.2,2),c=r.round(n*1.6,2),t=r.round(n*.8,2);return"M-"+t+","+l+"L0,0M-"+t+",-"+l+"L0,0M"+c+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(n){var l=r.round(n*1.4,2);return"M"+l+",0H-"+l},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(n){var l=r.round(n*1.4,2);return"M0,"+l+"V-"+l},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(n){var l=r.round(n,2);return"M"+l+",-"+l+"L-"+l+","+l},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(n){var l=r.round(n,2);return"M"+l+","+l+"L-"+l+",-"+l},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(n){var l=r.round(n,2),c=r.round(n*2,2);return"M0,0L-"+l+","+c+"H"+l+"Z"},noDot:!0},"arrow-down":{n:46,f:function(n){var l=r.round(n,2),c=r.round(n*2,2);return"M0,0L-"+l+",-"+c+"H"+l+"Z"},noDot:!0},"arrow-left":{n:47,f:function(n){var l=r.round(n*2,2),c=r.round(n,2);return"M0,0L"+l+",-"+c+"V"+c+"Z"},noDot:!0},"arrow-right":{n:48,f:function(n){var l=r.round(n*2,2),c=r.round(n,2);return"M0,0L-"+l+",-"+c+"V"+c+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(n){var l=r.round(n,2),c=r.round(n*2,2);return"M-"+l+",0H"+l+"M0,0L-"+l+","+c+"H"+l+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(n){var l=r.round(n,2),c=r.round(n*2,2);return"M-"+l+",0H"+l+"M0,0L-"+l+",-"+c+"H"+l+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(n){var l=r.round(n*2,2),c=r.round(n,2);return"M0,-"+c+"V"+c+"M0,0L"+l+",-"+c+"V"+c+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(n){var l=r.round(n*2,2),c=r.round(n,2);return"M0,-"+c+"V"+c+"M0,0L-"+l+",-"+c+"V"+c+"Z"},needLine:!0,noDot:!0}}},{d3:169}],667:[function(e,v,M){v.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],668:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../registry"),l=e("../../plots/cartesian/axes"),c=e("../../lib"),t=e("./compute_error");v.exports=function(o){for(var u=o.calcdata,h=0;h<u.length;h++){var i=u[h],s=i[0].trace;if(s.visible===!0&&n.traceIs(s,"errorBarsOK")){var p=l.getFromId(o,s.xaxis),d=l.getFromId(o,s.yaxis);f(i,s,p,"x"),f(i,s,d,"y")}}};function f(a,o,u,h){var i=o["error_"+h]||{},s=i.visible&&["linear","log"].indexOf(u.type)!==-1,p=[];if(s){for(var d=t(i),y=0;y<a.length;y++){var b=a[y],m=b.i;if(m===void 0)m=y;else if(m===null)continue;var _=b[h];if(r(u.c2l(_))){var T=d(_,m);if(r(T[0])&&r(T[1])){var g=b[h+"s"]=_-T[0],A=b[h+"h"]=_+T[1];p.push(g,A)}}}var k=u._id,R=o._extremes[k],L=l.findExtremes(u,p,c.extendFlat({tozero:R.opts.tozero},{padded:!0}));R.min=R.min.concat(L.min),R.max=R.max.concat(L.max)}}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"./compute_error":669,"fast-isnumeric":241}],669:[function(e,v,M){v.exports=function(l){var c=l.type,t=l.symmetric;if(c==="data"){var f=l.array||[];if(t)return function(i,s){var p=+f[s];return[p,p]};var a=l.arrayminus||[];return function(i,s){var p=+f[s],d=+a[s];return!isNaN(p)||!isNaN(d)?[d||0,p||0]:[NaN,NaN]}}else{var o=r(c,l.value),u=r(c,l.valueminus);return t||l.valueminus===void 0?function(i){var s=o(i);return[s,s]}:function(i){return[u(i),o(i)]}}};function r(n,l){if(n==="percent")return function(c){return Math.abs(c*l/100)};if(n==="constant")return function(){return Math.abs(l)};if(n==="sqrt")return function(c){return Math.sqrt(Math.abs(c))}}},{}],670:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../registry"),l=e("../../lib"),c=e("../../plot_api/plot_template"),t=e("./attributes");v.exports=function(f,a,o,u){var h="error_"+u.axis,i=c.newContainer(a,h),s=f[h]||{};function p(g,A){return l.coerce(s,i,t,g,A)}var d=s.array!==void 0||s.value!==void 0||s.type==="sqrt",y=p("visible",d);if(y!==!1){var b=p("type","array"in s?"data":"percent"),m=!0;b!=="sqrt"&&(m=p("symmetric",!((b==="data"?"arrayminus":"valueminus")in s))),b==="data"?(p("array"),p("traceref"),m||(p("arrayminus"),p("tracerefminus"))):(b==="percent"||b==="constant")&&(p("value"),m||p("valueminus"));var _="copy_"+u.inherit+"style";if(u.inherit){var T=a["error_"+u.inherit];(T||{}).visible&&p(_,!(s.color||r(s.thickness)||r(s.width)))}(!u.inherit||!i[_])&&(p("color",o),p("thickness"),p("width",n.traceIs(a,"gl3d")?0:4))}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../registry":911,"./attributes":667,"fast-isnumeric":241}],671:[function(e,v,M){var r=e("../../lib"),n=e("../../plot_api/edit_types").overrideAll,l=e("./attributes"),c={error_x:r.extendFlat({},l),error_y:r.extendFlat({},l)};delete c.error_x.copy_zstyle,delete c.error_y.copy_zstyle,delete c.error_y.copy_ystyle;var t={error_x:r.extendFlat({},l),error_y:r.extendFlat({},l),error_z:r.extendFlat({},l)};delete t.error_x.copy_ystyle,delete t.error_y.copy_ystyle,delete t.error_z.copy_ystyle,delete t.error_z.copy_zstyle,v.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:c,bar:c,histogram:c,scatter3d:n(t,"calc","nested"),scattergl:n(c,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:f};function f(a,o,u){(o.error_y||{}).visible&&(u.yerr=a.yh-a.y,o.error_y.symmetric||(u.yerrneg=a.y-a.ys)),(o.error_x||{}).visible&&(u.xerr=a.xh-a.x,o.error_x.symmetric||(u.xerrneg=a.x-a.xs))}},{"../../lib":778,"../../plot_api/edit_types":810,"./attributes":667,"./calc":668,"./compute_error":669,"./defaults":670,"./plot":672,"./style":673}],672:[function(e,v,M){var r=e("d3"),n=e("fast-isnumeric"),l=e("../drawing"),c=e("../../traces/scatter/subtypes");v.exports=function(a,o,u,h){var i,s=u.xaxis,p=u.yaxis,d=h&&h.duration>0;o.each(function(y){var b=y[0].trace,m=b.error_x||{},_=b.error_y||{},T;b.ids&&(T=function(R){return R.id});var g=c.hasMarkers(b)&&b.marker.maxdisplayed>0;!_.visible&&!m.visible&&(y=[]);var A=r.select(this).selectAll("g.errorbar").data(y,T);if(A.exit().remove(),!!y.length){m.visible||A.selectAll("path.xerror").remove(),_.visible||A.selectAll("path.yerror").remove(),A.style("opacity",1);var k=A.enter().append("g").classed("errorbar",!0);d&&k.style("opacity",0).transition().duration(h.duration).style("opacity",1),l.setClipUrl(A,u.layerClipId,a),A.each(function(R){var L=r.select(this),z=t(R,s,p);if(!(g&&!R.vis)){var E,S=L.select("path.yerror");if(_.visible&&n(z.x)&&n(z.yh)&&n(z.ys)){var C=_.width;E="M"+(z.x-C)+","+z.yh+"h"+2*C+"m-"+C+",0V"+z.ys,z.noYS||(E+="m-"+C+",0h"+2*C),i=!S.size(),i?S=L.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):d&&(S=S.transition().duration(h.duration).ease(h.easing)),S.attr("d",E)}else S.remove();var D=L.select("path.xerror");if(m.visible&&n(z.y)&&n(z.xh)&&n(z.xs)){var F=(m.copy_ystyle?_:m).width;E="M"+z.xh+","+(z.y-F)+"v"+2*F+"m0,-"+F+"H"+z.xs,z.noXS||(E+="m0,-"+F+"v"+2*F),i=!D.size(),i?D=L.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):d&&(D=D.transition().duration(h.duration).ease(h.easing)),D.attr("d",E)}else D.remove()}})}})};function t(f,a,o){var u={x:a.c2p(f.x),y:o.c2p(f.y)};return f.yh!==void 0&&(u.yh=o.c2p(f.yh),u.ys=o.c2p(f.ys),n(u.ys)||(u.noYS=!0,u.ys=o.c2p(f.ys,!0))),f.xh!==void 0&&(u.xh=a.c2p(f.xh),u.xs=a.c2p(f.xs),n(u.xs)||(u.noXS=!0,u.xs=a.c2p(f.xs,!0))),u}},{"../../traces/scatter/subtypes":1212,"../drawing":665,d3:169,"fast-isnumeric":241}],673:[function(e,v,M){var r=e("d3"),n=e("../color");v.exports=function(c){c.each(function(t){var f=t[0].trace,a=f.error_y||{},o=f.error_x||{},u=r.select(this);u.selectAll("path.yerror").style("stroke-width",a.thickness+"px").call(n.stroke,a.color),o.copy_ystyle&&(o=a),u.selectAll("path.xerror").style("stroke-width",o.thickness+"px").call(n.stroke,o.color)})}},{"../color":643,d3:169}],674:[function(e,v,M){var r=e("../../plots/font_attributes"),n=e("./layout_attributes").hoverlabel,l=e("../../lib/extend").extendFlat;v.exports={hoverlabel:{bgcolor:l({},n.bgcolor,{arrayOk:!0}),bordercolor:l({},n.bordercolor,{arrayOk:!0}),font:r({arrayOk:!0,editType:"none"}),align:l({},n.align,{arrayOk:!0}),namelength:l({},n.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":768,"../../plots/font_attributes":856,"./layout_attributes":684}],675:[function(e,v,M){var r=e("../../lib"),n=e("../../registry");v.exports=function(t){var f=t.calcdata,a=t._fullLayout;function o(p){return function(d){return r.coerceHoverinfo({hoverinfo:d},{_module:p._module},a)}}for(var u=0;u<f.length;u++){var h=f[u],i=h[0].trace;if(!n.traceIs(i,"pie-like")){var s=n.traceIs(i,"2dMap")?l:r.fillArray;s(i.hoverinfo,h,"hi",o(i)),i.hovertemplate&&s(i.hovertemplate,h,"ht"),i.hoverlabel&&(s(i.hoverlabel.bgcolor,h,"hbg"),s(i.hoverlabel.bordercolor,h,"hbc"),s(i.hoverlabel.font.size,h,"hts"),s(i.hoverlabel.font.color,h,"htc"),s(i.hoverlabel.font.family,h,"htf"),s(i.hoverlabel.namelength,h,"hnl"),s(i.hoverlabel.align,h,"hta"))}}};function l(c,t,f,a){a=a||r.identity,Array.isArray(c)&&(t[0][f]=a(c))}},{"../../lib":778,"../../registry":911}],676:[function(e,v,M){var r=e("../../registry"),n=e("./hover").hover;v.exports=function(c,t,f){var a=r.getComponentMethod("annotations","onClick")(c,c._hoverdata);f!==void 0&&n(c,t,f,!0);function o(){c.emit("plotly_click",{points:c._hoverdata,event:t})}c._hoverdata&&t&&t.target&&(a&&a.then?a.then(o):o(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":911,"./hover":680}],677:[function(e,v,M){v.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],678:[function(e,v,M){var r=e("../../lib"),n=e("./attributes"),l=e("./hoverlabel_defaults");v.exports=function(t,f,a,o){function u(i,s){return r.coerce(t,f,n,i,s)}var h=r.extendFlat({},o.hoverlabel);f.hovertemplate&&(h.namelength=-1),l(t,f,u,h)}},{"../../lib":778,"./attributes":674,"./hoverlabel_defaults":681}],679:[function(e,v,M){var r=e("../../lib");M.getSubplot=function(a){return a.subplot||a.xaxis+a.yaxis||a.geo},M.isTraceInSubplots=function(a,o){if(a.type==="splom"){for(var u=a.xaxes||[],h=a.yaxes||[],i=0;i<u.length;i++)for(var s=0;s<h.length;s++)if(o.indexOf(u[i]+h[s])!==-1)return!0;return!1}return o.indexOf(M.getSubplot(a))!==-1},M.flat=function(a,o){for(var u=new Array(a.length),h=0;h<a.length;h++)u[h]=o;return u},M.p2c=function(a,o){for(var u=new Array(a.length),h=0;h<a.length;h++)u[h]=a[h].p2c(o);return u},M.getDistanceFunction=function(a,o,u,h){return a==="closest"?h||M.quadrature(o,u):a.charAt(0)==="x"?o:u},M.getClosest=function(a,o,u){if(u.index!==!1)u.index>=0&&u.index<a.length?u.distance=0:u.index=!1;else for(var h=0;h<a.length;h++){var i=o(a[h]);i<=u.distance&&(u.index=h,u.distance=i)}return u},M.inbox=function(a,o,u){return a*o<0||a===0?u:1/0},M.quadrature=function(a,o){return function(u){var h=a(u),i=o(u);return Math.sqrt(h*h+i*i)}},M.makeEventData=function(a,o,u){var h="index"in a?a.index:a.pointNumber,i={data:o._input,fullData:o,curveNumber:o.index,pointNumber:h};if(o._indexToPoints){var s=o._indexToPoints[h];s.length===1?i.pointIndex=s[0]:i.pointIndices=s}else i.pointIndex=h;return o._module.eventData?i=o._module.eventData(i,a,o,u,h):("xVal"in a?i.x=a.xVal:"x"in a&&(i.x=a.x),"yVal"in a?i.y=a.yVal:"y"in a&&(i.y=a.y),a.xa&&(i.xaxis=a.xa),a.ya&&(i.yaxis=a.ya),a.zLabelVal!==void 0&&(i.z=a.zLabelVal)),M.appendArrayPointValue(i,o,h),i},M.appendArrayPointValue=function(a,o,u){var h=o._arrayAttrs;if(h)for(var i=0;i<h.length;i++){var s=h[i],p=l(s);if(a[p]===void 0){var d=r.nestedProperty(o,s).get(),y=c(d,u);y!==void 0&&(a[p]=y)}}},M.appendArrayMultiPointValues=function(a,o,u){var h=o._arrayAttrs;if(h)for(var i=0;i<h.length;i++){var s=h[i],p=l(s);if(a[p]===void 0){for(var d=r.nestedProperty(o,s).get(),y=new Array(u.length),b=0;b<u.length;b++)y[b]=c(d,u[b]);a[p]=y}}};var n={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function l(a){return n[a]||a}function c(a,o){if(Array.isArray(o)){if(Array.isArray(a)&&Array.isArray(a[o[0]]))return a[o[0]][o[1]]}else return a[o]}var t={x:!0,y:!0},f={"x unified":!0,"y unified":!0};M.isUnifiedHover=function(a){return typeof a!="string"?!1:!!f[a]},M.isXYhover=function(a){return typeof a!="string"?!1:!!t[a]}},{"../../lib":778}],680:[function(e,v,M){var r=e("d3"),n=e("fast-isnumeric"),l=e("tinycolor2"),c=e("../../lib"),t=c.strTranslate,f=c.strRotate,a=e("../../lib/events"),o=e("../../lib/svg_text_utils"),u=e("../../lib/override_cursor"),h=e("../drawing"),i=e("../color"),s=e("../dragelement"),p=e("../../plots/cartesian/axes"),d=e("../../registry"),y=e("./helpers"),b=e("./constants"),m=e("../legend/defaults"),_=e("../legend/draw"),T=b.YANGLE,g=Math.PI*T/180,A=1/Math.sin(g),k=Math.cos(g),R=Math.sin(g),L=b.HOVERARROWSIZE,z=b.HOVERTEXTPAD;M.hover=function(K,te,J,oe){K=c.getGraphDiv(K),c.throttle(K._fullLayout._uid+b.HOVERID,b.HOVERMINTIME,function(){E(K,te,J,oe)})},M.loneHover=function(K,te){var J=!0;Array.isArray(K)||(J=!1,K=[K]);var oe=K.map(function(pe){return{color:pe.color||i.defaultLine,x0:pe.x0||pe.x||0,x1:pe.x1||pe.x||0,y0:pe.y0||pe.y||0,y1:pe.y1||pe.y||0,xLabel:pe.xLabel,yLabel:pe.yLabel,zLabel:pe.zLabel,text:pe.text,name:pe.name,idealAlign:pe.idealAlign,borderColor:pe.borderColor,fontFamily:pe.fontFamily,fontSize:pe.fontSize,fontColor:pe.fontColor,nameLength:pe.nameLength,textAlign:pe.textAlign,trace:pe.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:pe.hovertemplate||!1,eventData:pe.eventData||!1,hovertemplateLabels:pe.hovertemplateLabels||!1}}),ie=r.select(te.container),Q=te.outerContainer?r.select(te.outerContainer):ie,V={hovermode:"closest",rotateLabels:!1,bgColor:te.bgColor||i.background,container:ie,outerContainer:Q},se=D(oe,V,te.gd),re=5,ee=0,ae=0;se.sort(function(pe,W){return pe.y0-W.y0}).each(function(pe,W){var ue=pe.y0-pe.by/2;ue-re<ee?pe.offset=ee-ue+re:pe.offset=0,ee=ue+pe.by+pe.offset,W===te.anchorIndex&&(ae=pe.offset)}).each(function(pe){pe.offset-=ae});var fe=te.gd._fullLayout._invScaleX,de=te.gd._fullLayout._invScaleY;return G(se,V.rotateLabels,fe,de),J?se:se.node()};function E(H,K,te,J){te||(te="xy");var oe=Array.isArray(te)?te:[te],ie=H._fullLayout,Q=ie._plots||[],V=Q[te],se=ie._has("cartesian");if(V){var re=V.overlays.map(function(Zt){return Zt.id});oe=oe.concat(re)}for(var ee=oe.length,ae=new Array(ee),fe=new Array(ee),de=!1,pe=0;pe<ee;pe++){var W=oe[pe];if(Q[W])de=!0,ae[pe]=Q[W].xaxis,fe[pe]=Q[W].yaxis;else if(ie[W]&&ie[W]._subplot){var ue=ie[W]._subplot;ae[pe]=ue.xaxis,fe[pe]=ue.yaxis}else{c.warn("Unrecognized subplot: "+W);return}}var me=K.hovermode||ie.hovermode;if(me&&!de&&(me="closest"),["x","y","closest","x unified","y unified"].indexOf(me)===-1||!H.calcdata||H.querySelector(".zoombox")||H._dragging)return s.unhoverRaw(H,K);var be=ie.hoverdistance===-1?1/0:ie.hoverdistance,ke=ie.spikedistance===-1?1/0:ie.spikedistance,Pe=[],je=[],ze,Ze,tt,Ce,Ae,Ne,qe,At,kt,Ve,ft,St,Wt,Qt={hLinePoint:null,vLinePoint:null},zt=!1;if(Array.isArray(K))for(me="array",tt=0;tt<K.length;tt++)Ae=H.calcdata[K[tt].curveNumber||0],Ae&&(Ne=Ae[0].trace,Ae[0].trace.hoverinfo!=="skip"&&(je.push(Ae),Ne.orientation==="h"&&(zt=!0)));else{for(Ce=0;Ce<H.calcdata.length;Ce++)Ae=H.calcdata[Ce],Ne=Ae[0].trace,Ne.hoverinfo!=="skip"&&y.isTraceInSubplots(Ne,oe)&&(je.push(Ae),Ne.orientation==="h"&&(zt=!0));var $t=!K.target,rr,Pt;if($t)"xpx"in K?rr=K.xpx:rr=ae[0]._length/2,"ypx"in K?Pt=K.ypx:Pt=fe[0]._length/2;else{if(a.triggerHandler(H,"plotly_beforehover",K)===!1)return;var Lt=K.target.getBoundingClientRect();rr=K.clientX-Lt.left,Pt=K.clientY-Lt.top,ie._calcInverseTransform(H);var dt=c.apply3DTransform(ie._invTransform)(rr,Pt);if(rr=dt[0],Pt=dt[1],rr<0||rr>ae[0]._length||Pt<0||Pt>fe[0]._length)return s.unhoverRaw(H,K)}if(K.pointerX=rr+ae[0]._offset,K.pointerY=Pt+fe[0]._offset,"xval"in K?ze=y.flat(oe,K.xval):ze=y.p2c(ae,rr),"yval"in K?Ze=y.flat(oe,K.yval):Ze=y.p2c(fe,Pt),!n(ze[0])||!n(Ze[0]))return c.warn("Fx.hover failed",K,H),s.unhoverRaw(H,K)}var lt=1/0;function Te(Zt,_r){for(Ce=0;Ce<je.length;Ce++)if(Ae=je[Ce],!(!Ae||!Ae[0]||!Ae[0].trace)&&(Ne=Ae[0].trace,!(Ne.visible!==!0||Ne._length===0)&&["carpet","contourcarpet"].indexOf(Ne._module.name)===-1)){if(Ne.type==="splom"?(At=0,qe=oe[At]):(qe=y.getSubplot(Ne),At=oe.indexOf(qe)),kt=me,y.isUnifiedHover(kt)&&(kt=kt.charAt(0)),St={cd:Ae,trace:Ne,xa:ae[At],ya:fe[At],maxHoverDistance:be,maxSpikeDistance:ke,index:!1,distance:Math.min(lt,be),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:i.defaultLine,name:Ne.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ie[qe]&&(St.subplot=ie[qe]._subplot),ie._splomScenes&&ie._splomScenes[Ne.uid]&&(St.scene=ie._splomScenes[Ne.uid]),Wt=Pe.length,kt==="array"){var Gr=K[Ce];"pointNumber"in Gr?(St.index=Gr.pointNumber,kt="closest"):(kt="","xval"in Gr&&(Ve=Gr.xval,kt="x"),"yval"in Gr&&(ft=Gr.yval,kt=kt?"closest":"y"))}else Zt!==void 0&&_r!==void 0?(Ve=Zt,ft=_r):(Ve=ze[At],ft=Ze[At]);if(be!==0)if(Ne._module&&Ne._module.hoverPoints){var zr=Ne._module.hoverPoints(St,Ve,ft,kt,ie._hoverlayer);if(zr)for(var Or,Mn=0;Mn<zr.length;Mn++)Or=zr[Mn],n(Or.x0)&&n(Or.y0)&&Pe.push(U(Or,me))}else c.log("Unrecognized trace type in hover:",Ne);if(me==="closest"&&Pe.length>Wt&&(Pe.splice(0,Wt),lt=Pe[0].distance),se&&ke!==0&&Pe.length===0){St.distance=ke,St.index=!1;var Yn=Ne._module.hoverPoints(St,Ve,ft,"closest",ie._hoverlayer);if(Yn&&(Yn=Yn.filter(function(Ln){return Ln.spikeDistance<=ke})),Yn&&Yn.length){var An,Bn=Yn.filter(function(Ln){return Ln.xa.showspikes&&Ln.xa.spikesnap!=="hovered data"});if(Bn.length){var jn=Bn[0];n(jn.x0)&&n(jn.y0)&&(An=Be(jn),(!Qt.vLinePoint||Qt.vLinePoint.spikeDistance>An.spikeDistance)&&(Qt.vLinePoint=An))}var Nr=Yn.filter(function(Ln){return Ln.ya.showspikes&&Ln.ya.spikesnap!=="hovered data"});if(Nr.length){var Lr=Nr[0];n(Lr.x0)&&n(Lr.y0)&&(An=Be(Lr),(!Qt.hLinePoint||Qt.hLinePoint.spikeDistance>An.spikeDistance)&&(Qt.hLinePoint=An))}}}}}Te();function Le(Zt,_r){for(var Gr=null,zr=1/0,Or,Mn=0;Mn<Zt.length;Mn++)Or=Zt[Mn].spikeDistance,Or<=zr&&Or<=_r&&(Gr=Zt[Mn],zr=Or);return Gr}function Be(Zt){return Zt?{xa:Zt.xa,ya:Zt.ya,x:Zt.xSpike!==void 0?Zt.xSpike:(Zt.x0+Zt.x1)/2,y:Zt.ySpike!==void 0?Zt.ySpike:(Zt.y0+Zt.y1)/2,distance:Zt.distance,spikeDistance:Zt.spikeDistance,curveNumber:Zt.trace.index,color:Zt.color,pointNumber:Zt.index}:null}var et={fullLayout:ie,container:ie._hoverlayer,outerContainer:ie._paperdiv,event:K},Me=H._spikepoints,Ie={vLinePoint:Qt.vLinePoint,hLinePoint:Qt.hLinePoint};if(H._spikepoints=Ie,se&&ke!==0&&Pe.length!==0){var He=Pe.filter(function(Zt){return Zt.ya.showspikes}),Xe=Le(He,ke);Qt.hLinePoint=Be(Xe);var ht=Pe.filter(function(Zt){return Zt.xa.showspikes}),it=Le(ht,ke);Qt.vLinePoint=Be(it)}if(Pe.length===0){var Ge=s.unhoverRaw(H,K);return se&&(Qt.hLinePoint!==null||Qt.vLinePoint!==null)&&B(Me)&&X(H,Qt,et),Ge}if(se&&B(Me)&&X(H,Qt,et),Pe.sort(function(Zt,_r){return Zt.distance-_r.distance}),y.isXYhover(kt)&&Pe[0].length!==0&&Pe[0].trace.type!=="splom"){var ot=Pe[0],Je=ot.cd[ot.index],st=ie.boxmode==="group"||ie.violinmode==="group",It=ot.xVal,Ft=ot.xa;Ft.type==="category"&&(It=Ft._categoriesMap[It]),Ft.type==="date"&&(It=Ft.d2c(It)),Je&&Je.t&&Je.t.posLetter===Ft._id&&st&&(It+=Je.t.dPos);var nr=ot.yVal;Ft=ot.ya,Ft.type==="category"&&(nr=Ft._categoriesMap[nr]),Ft.type==="date"&&(nr=Ft.d2c(nr)),Je&&Je.t&&Je.t.posLetter===Ft._id&&st&&(nr+=Je.t.dPos),Te(It,nr);var We={};Pe=Pe.filter(function(Zt){var _r=S(Zt);if(!We[_r])return We[_r]=!0,We[_r]})}var Fe=H._hoverdata,_t=[];for(tt=0;tt<Pe.length;tt++){var Mt=Pe[tt],wt=y.makeEventData(Mt,Mt.trace,Mt.cd);if(Mt.hovertemplate!==!1){var Dt=!1;Mt.cd[Mt.index]&&Mt.cd[Mt.index].ht&&(Dt=Mt.cd[Mt.index].ht),Mt.hovertemplate=Dt||Mt.trace.hovertemplate||!1}Mt.eventData=[wt],_t.push(wt)}H._hoverdata=_t;var Rt=me==="y"&&(je.length>1||Pe.length>1)||me==="closest"&&zt&&Pe.length>1,Bt=i.combine(ie.plot_bgcolor||i.background,ie.paper_bgcolor),Nt={hovermode:me,rotateLabels:Rt,bgColor:Bt,container:ie._hoverlayer,outerContainer:ie._paperdiv,commonLabelOpts:ie.hoverlabel,hoverdistance:ie.hoverdistance},er=D(Pe,Nt,H);if(y.isUnifiedHover(me)||(N(er,Rt?"xa":"ya",ie),G(er,Rt,ie._invScaleX,ie._invScaleY)),K.target&&K.target.tagName){var qt=d.getComponentMethod("annotations","hasClickToShow")(H,_t);u(r.select(K.target),qt?"pointer":"")}!K.target||J||!I(H,K,Fe)||(Fe&&H.emit("plotly_unhover",{event:K,points:Fe}),H.emit("plotly_hover",{event:K,points:H._hoverdata,xaxes:ae,yaxes:fe,xvals:ze,yvals:Ze}))}function S(H){return[H.trace.index,H.index,H.x0,H.y0,H.name,H.attr,H.xa,H.ya||""].join(",")}var C=/<extra>([\s\S]*)<\/extra>/;function D(H,K,te){var J=te._fullLayout,oe=K.hovermode,ie=K.rotateLabels,Q=K.bgColor,V=K.container,se=K.outerContainer,re=K.commonLabelOpts||{},ee=K.fontFamily||b.HOVERFONT,ae=K.fontSize||b.HOVERFONTSIZE,fe=H[0],de=fe.xa,pe=fe.ya,W=oe.charAt(0)==="y"?"yLabel":"xLabel",ue=fe[W],me=(String(ue)||"").split(" ")[0],be=se.node().getBoundingClientRect(),ke=be.top,Pe=be.width,je=be.height,ze=ue!==void 0&&fe.distance<=K.hoverdistance&&(oe==="x"||oe==="y");if(ze){var Ze=!0,tt,Ce;for(tt=0;tt<H.length;tt++)if(Ze&&H[tt].zLabel===void 0&&(Ze=!1),Ce=H[tt].hoverinfo||H[tt].trace.hoverinfo,Ce){var Ae=Array.isArray(Ce)?Ce:Ce.split("+");if(Ae.indexOf("all")===-1&&Ae.indexOf(oe)===-1){ze=!1;break}}Ze&&(ze=!1)}var Ne=V.selectAll("g.axistext").data(ze?[0]:[]);Ne.enter().append("g").classed("axistext",!0),Ne.exit().remove(),Ne.each(function(){var Xe=r.select(this),ht=c.ensureSingle(Xe,"path","",function(Zt){Zt.style({"stroke-width":"1px"})}),it=c.ensureSingle(Xe,"text","",function(Zt){Zt.attr("data-notex",1)}),Ge=re.bgcolor||i.defaultLine,ot=re.bordercolor||i.contrast(Ge),Je=i.contrast(Ge),st={family:re.font.family||ee,size:re.font.size||ae,color:re.font.color||Je};ht.style({fill:Ge,stroke:ot}),it.text(ue).call(h.font,st).call(o.positionText,0,0).call(o.convertToTspans,te),Xe.attr("transform","");var It=it.node().getBoundingClientRect(),Ft,nr;if(oe==="x"){var We=de.side==="top"?"-":"";it.attr("text-anchor","middle").call(o.positionText,0,de.side==="top"?ke-It.bottom-L-z:ke-It.top+L+z),Ft=de._offset+(fe.x0+fe.x1)/2,nr=pe._offset+(de.side==="top"?0:pe._length);var Fe=It.width/2+z;Ft<Fe?(Ft=Fe,ht.attr("d","M-"+(Fe-L)+",0L-"+(Fe-L*2)+","+We+L+"H"+(z+It.width/2)+"v"+We+(z*2+It.height)+"H-"+Fe+"V"+We+L+"Z")):Ft>J.width-Fe?(Ft=J.width-Fe,ht.attr("d","M"+(Fe-L)+",0L"+Fe+","+We+L+"v"+We+(z*2+It.height)+"H-"+Fe+"V"+We+L+"H"+(Fe-L*2)+"Z")):ht.attr("d","M0,0L"+L+","+We+L+"H"+(z+It.width/2)+"v"+We+(z*2+It.height)+"H-"+(z+It.width/2)+"V"+We+L+"H-"+L+"Z")}else{var _t,Mt,wt;pe.side==="right"?(_t="start",Mt=1,wt="",Ft=de._offset+de._length):(_t="end",Mt=-1,wt="-",Ft=de._offset),nr=pe._offset+(fe.y0+fe.y1)/2,it.attr("text-anchor",_t),ht.attr("d","M0,0L"+wt+L+","+L+"V"+(z+It.height/2)+"h"+wt+(z*2+It.width)+"V-"+(z+It.height/2)+"H"+wt+L+"V-"+L+"Z");var Dt=It.height/2,Rt=ke-It.top-Dt,Bt="clip"+J._uid+"commonlabel"+pe._id,Nt;if(Ft<It.width+2*z+L){Nt="M-"+(L+z)+"-"+Dt+"h-"+(It.width-z)+"V"+Dt+"h"+(It.width-z)+"Z";var er=It.width-Ft+z;o.positionText(it,er,Rt),_t==="end"&&it.selectAll("tspan").each(function(){var Zt=r.select(this),_r=h.tester.append("text").text(Zt.text()).call(h.font,st),Gr=_r.node().getBoundingClientRect();Math.round(Gr.width)<Math.round(It.width)&&Zt.attr("x",er-Gr.width),_r.remove()})}else o.positionText(it,Mt*(z+L),Rt),Nt=null;var qt=J._topclips.selectAll("#"+Bt).data(Nt?[0]:[]);qt.enter().append("clipPath").attr("id",Bt).append("path"),qt.exit().remove(),qt.select("path").attr("d",Nt),h.setClipUrl(it,Nt?Bt:null,te)}Xe.attr("transform",t(Ft,nr)),H=qe(H)});function qe(Xe){return Xe.filter(function(ht){return ht.zLabelVal!==void 0||(ht[W]||"").split(" ")[0]===me})}if(y.isUnifiedHover(oe)){if(V.selectAll("g.hovertext").remove(),ue!==void 0&&fe.distance<=K.hoverdistance&&(H=qe(H)),H.length===0)return;var At={showlegend:!0,legend:{title:{text:ue,font:J.hoverlabel.font},font:J.hoverlabel.font,bgcolor:J.hoverlabel.bgcolor,bordercolor:J.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:J.legend?J.legend.traceorder:void 0,orientation:"v"}},kt={};m(At,kt,te._fullData);var Ve=kt.legend;Ve.entries=[];for(var ft=0;ft<H.length;ft++){var St=F(H[ft],!0,oe,J,ue),Wt=St[0],Qt=St[1],zt=H[ft];zt.name=Qt,Qt!==""?zt.text=Qt+" : "+Wt:zt.text=Wt;var $t=zt.cd[zt.index];$t&&($t.mc&&(zt.mc=$t.mc),$t.mcc&&(zt.mc=$t.mcc),$t.mlc&&(zt.mlc=$t.mlc),$t.mlcc&&(zt.mlc=$t.mlcc),$t.mlw&&(zt.mlw=$t.mlw),$t.mrc&&(zt.mrc=$t.mrc),$t.dir&&(zt.dir=$t.dir)),zt._distinct=!0,Ve.entries.push([zt])}Ve.entries.sort(function(Xe,ht){return Xe[0].trace.index-ht[0].trace.index}),Ve.layer=V,_(te,Ve);var rr=c.mean(H.map(function(Xe){return(Xe.y0+Xe.y1)/2})),Pt=c.mean(H.map(function(Xe){return(Xe.x0+Xe.x1)/2})),Lt=V.select("g.legend"),dt=Lt.node().getBoundingClientRect();Pt+=de._offset,rr+=pe._offset-dt.height/2;var lt=dt.width+2*z,Te=Pt+lt<=Pe,Le=Pt-lt>=0;!Te&&Le?Pt-=lt:Pt+=2*z;var Be=dt.height+2*z,et=rr<=ke,Me=rr+Be>=je,Ie=Be<=je;return Ie&&(et?rr=pe._offset+2*z:Me&&(rr=je-Be)),Lt.attr("transform",t(Pt,rr)),Lt}var He=V.selectAll("g.hovertext").data(H,function(Xe){return S(Xe)});return He.enter().append("g").classed("hovertext",!0).each(function(){var Xe=r.select(this);Xe.append("rect").call(i.fill,i.addOpacity(Q,.8)),Xe.append("text").classed("name",!0),Xe.append("path").style("stroke-width","1px"),Xe.append("text").classed("nums",!0).call(h.font,ee,ae)}),He.exit().remove(),He.each(function(Xe){var ht=r.select(this).attr("transform",""),it=Xe.color;Array.isArray(it)&&(it=it[Xe.eventData[0].pointNumber]);var Ge=Xe.bgcolor||it,ot=i.combine(i.opacity(Ge)?Ge:i.defaultLine,Q),Je=i.combine(i.opacity(it)?it:i.defaultLine,Q),st=Xe.borderColor||i.contrast(ot),It=F(Xe,ze,oe,J,ue,ht),Ft=It[0],nr=It[1],We=ht.select("text.nums").call(h.font,Xe.fontFamily||ee,Xe.fontSize||ae,Xe.fontColor||st).text(Ft).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,te),Fe=ht.select("text.name"),_t=0,Mt=0;if(nr&&nr!==Ft){Fe.call(h.font,Xe.fontFamily||ee,Xe.fontSize||ae,Je).text(nr).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,te);var wt=Fe.node().getBoundingClientRect();_t=wt.width+2*z,Mt=wt.height+2*z}else Fe.remove(),ht.select("rect").remove();ht.select("path").style({fill:ot,stroke:st});var Dt=We.node().getBoundingClientRect(),Rt=Xe.xa._offset+(Xe.x0+Xe.x1)/2,Bt=Xe.ya._offset+(Xe.y0+Xe.y1)/2,Nt=Math.abs(Xe.x1-Xe.x0),er=Math.abs(Xe.y1-Xe.y0),qt=Dt.width+L+z+_t,Zt,_r;if(Xe.ty0=ke-Dt.top,Xe.bx=Dt.width+2*z,Xe.by=Math.max(Dt.height+2*z,Mt),Xe.anchor="start",Xe.txwidth=Dt.width,Xe.tx2width=_t,Xe.offset=0,ie)Xe.pos=Rt,Zt=Bt+er/2+qt<=je,_r=Bt-er/2-qt>=0,(Xe.idealAlign==="top"||!Zt)&&_r?(Bt-=er/2,Xe.anchor="end"):Zt?(Bt+=er/2,Xe.anchor="start"):Xe.anchor="middle";else if(Xe.pos=Bt,Zt=Rt+Nt/2+qt<=Pe,_r=Rt-Nt/2-qt>=0,(Xe.idealAlign==="left"||!Zt)&&_r)Rt-=Nt/2,Xe.anchor="end";else if(Zt)Rt+=Nt/2,Xe.anchor="start";else{Xe.anchor="middle";var Gr=qt/2,zr=Rt+Gr-Pe,Or=Rt-Gr;zr>0&&(Rt-=zr),Or<0&&(Rt+=-Or)}We.attr("text-anchor",Xe.anchor),_t&&Fe.attr("text-anchor",Xe.anchor),ht.attr("transform",t(Rt,Bt)+(ie?f(T):""))}),He}function F(H,K,te,J,oe,ie){var Q="",V="";H.nameOverride!==void 0&&(H.name=H.nameOverride),H.name&&(H.trace._meta&&(H.name=c.templateString(H.name,H.trace._meta)),Q=j(H.name,H.nameLength)),H.zLabel!==void 0?(H.xLabel!==void 0&&(V+="x: "+H.xLabel+"<br>"),H.yLabel!==void 0&&(V+="y: "+H.yLabel+"<br>"),H.trace.type!=="choropleth"&&H.trace.type!=="choroplethmapbox"&&(V+=(V?"z: ":"")+H.zLabel)):K&&H[te.charAt(0)+"Label"]===oe?V=H[(te.charAt(0)==="x"?"y":"x")+"Label"]||"":H.xLabel===void 0?H.yLabel!==void 0&&H.trace.type!=="scattercarpet"&&(V=H.yLabel):H.yLabel===void 0?V=H.xLabel:V="("+H.xLabel+", "+H.yLabel+")",(H.text||H.text===0)&&!Array.isArray(H.text)&&(V+=(V?"<br>":"")+H.text),H.extraText!==void 0&&(V+=(V?"<br>":"")+H.extraText),ie&&V===""&&!H.hovertemplate&&(Q===""&&ie.remove(),V=Q);var se=J._d3locale,re=H.hovertemplate||!1,ee=H.hovertemplateLabels||H,ae=H.eventData[0]||{};return re&&(V=c.hovertemplateString(re,ee,se,ae,H.trace._meta),V=V.replace(C,function(fe,de){return Q=j(de,H.nameLength),""})),[V,Q]}function N(H,K,te){var J=0,oe=1,ie=H.size(),Q=new Array(ie),V=0;H.each(function(Ze){var tt=Ze[K],Ce=tt._id.charAt(0)==="x",Ae=tt.range;V===0&&Ae&&Ae[0]>Ae[1]!==Ce&&(oe=-1),Q[V++]=[{datum:Ze,traceIndex:Ze.trace.index,dp:0,pos:Ze.pos,posref:Ze.posref,size:Ze.by*(Ce?A:1)/2,pmin:0,pmax:Ce?te.width:te.height}]}),Q.sort(function(Ze,tt){return Ze[0].posref-tt[0].posref||oe*(tt[0].traceIndex-Ze[0].traceIndex)});var se,re,ee,ae,fe,de,pe;function W(Ze){var tt=Ze[0],Ce=Ze[Ze.length-1];if(re=tt.pmin-tt.pos-tt.dp+tt.size,ee=Ce.pos+Ce.dp+Ce.size-tt.pmax,re>.01){for(fe=Ze.length-1;fe>=0;fe--)Ze[fe].dp+=re;se=!1}if(!(ee<.01)){if(re<-.01){for(fe=Ze.length-1;fe>=0;fe--)Ze[fe].dp-=ee;se=!1}if(se){var Ae=0;for(ae=0;ae<Ze.length;ae++)de=Ze[ae],de.pos+de.dp+de.size>tt.pmax&&Ae++;for(ae=Ze.length-1;ae>=0&&!(Ae<=0);ae--)de=Ze[ae],de.pos>tt.pmax-1&&(de.del=!0,Ae--);for(ae=0;ae<Ze.length&&!(Ae<=0);ae++)if(de=Ze[ae],de.pos<tt.pmin+1)for(de.del=!0,Ae--,ee=de.size*2,fe=Ze.length-1;fe>=0;fe--)Ze[fe].dp-=ee;for(ae=Ze.length-1;ae>=0&&!(Ae<=0);ae--)de=Ze[ae],de.pos+de.dp+de.size>tt.pmax&&(de.del=!0,Ae--)}}}for(;!se&&J<=ie;){for(J++,se=!0,ae=0;ae<Q.length-1;){var ue=Q[ae],me=Q[ae+1],be=ue[ue.length-1],ke=me[0];if(re=be.pos+be.dp+be.size-ke.pos-ke.dp+ke.size,re>.01&&be.pmin===ke.pmin&&be.pmax===ke.pmax){for(fe=me.length-1;fe>=0;fe--)me[fe].dp+=re;for(ue.push.apply(ue,me),Q.splice(ae+1,1),pe=0,fe=ue.length-1;fe>=0;fe--)pe+=ue[fe].dp;for(ee=pe/ue.length,fe=ue.length-1;fe>=0;fe--)ue[fe].dp-=ee;se=!1}else ae++}Q.forEach(W)}for(ae=Q.length-1;ae>=0;ae--){var Pe=Q[ae];for(fe=Pe.length-1;fe>=0;fe--){var je=Pe[fe],ze=je.datum;ze.offset=je.dp,ze.del=je.del}}}function G(H,K,te,J){var oe=function(Q){return Q*te},ie=function(Q){return Q*J};H.each(function(Q){var V=r.select(this);if(Q.del)return V.remove();var se=V.select("text.nums"),re=Q.anchor,ee=re==="end"?-1:1,ae={start:1,end:-1,middle:0}[re],fe=ae*(L+z),de=fe+ae*(Q.txwidth+z),pe=0,W=Q.offset,ue=re==="middle";ue&&(fe-=Q.tx2width/2,de+=Q.txwidth/2+z),K&&(W*=-R,pe=Q.offset*k),V.select("path").attr("d",ue?"M-"+oe(Q.bx/2+Q.tx2width/2)+","+ie(W-Q.by/2)+"h"+oe(Q.bx)+"v"+ie(Q.by)+"h-"+oe(Q.bx)+"Z":"M0,0L"+oe(ee*L+pe)+","+ie(L+W)+"v"+ie(Q.by/2-L)+"h"+oe(ee*Q.bx)+"v-"+ie(Q.by)+"H"+oe(ee*L+pe)+"V"+ie(W-L)+"Z");var me=pe+fe,be=W+Q.ty0-Q.by/2+z,ke=Q.textAlign||"auto";ke!=="auto"&&(ke==="left"&&re!=="start"?(se.attr("text-anchor","start"),me=ue?-Q.bx/2-Q.tx2width/2+z:-Q.bx-z):ke==="right"&&re!=="end"&&(se.attr("text-anchor","end"),me=ue?Q.bx/2-Q.tx2width/2-z:Q.bx+z)),se.call(o.positionText,oe(me),ie(be)),Q.tx2width&&(V.select("text.name").call(o.positionText,oe(de+ae*z+pe),ie(W+Q.ty0-Q.by/2+z)),V.select("rect").call(h.setRect,oe(de+(ae-1)*Q.tx2width/2+pe),ie(W-Q.by/2-1),oe(Q.tx2width),ie(Q.by+2)))})}function U(H,K){var te=H.index,J=H.trace||{},oe=H.cd[0],ie=H.cd[te]||{};function Q(fe){return fe||n(fe)&&fe===0}var V=Array.isArray(te)?function(fe,de){var pe=c.castOption(oe,te,fe);return Q(pe)?pe:c.extractOption({},J,"",de)}:function(fe,de){return c.extractOption(ie,J,fe,de)};function se(fe,de,pe){var W=V(de,pe);Q(W)&&(H[fe]=W)}if(se("hoverinfo","hi","hoverinfo"),se("bgcolor","hbg","hoverlabel.bgcolor"),se("borderColor","hbc","hoverlabel.bordercolor"),se("fontFamily","htf","hoverlabel.font.family"),se("fontSize","hts","hoverlabel.font.size"),se("fontColor","htc","hoverlabel.font.color"),se("nameLength","hnl","hoverlabel.namelength"),se("textAlign","hta","hoverlabel.align"),H.posref=K==="y"||K==="closest"&&J.orientation==="h"?H.xa._offset+(H.x0+H.x1)/2:H.ya._offset+(H.y0+H.y1)/2,H.x0=c.constrain(H.x0,0,H.xa._length),H.x1=c.constrain(H.x1,0,H.xa._length),H.y0=c.constrain(H.y0,0,H.ya._length),H.y1=c.constrain(H.y1,0,H.ya._length),H.xLabelVal!==void 0&&(H.xLabel="xLabel"in H?H.xLabel:p.hoverLabelText(H.xa,H.xLabelVal),H.xVal=H.xa.c2d(H.xLabelVal)),H.yLabelVal!==void 0&&(H.yLabel="yLabel"in H?H.yLabel:p.hoverLabelText(H.ya,H.yLabelVal),H.yVal=H.ya.c2d(H.yLabelVal)),H.zLabelVal!==void 0&&H.zLabel===void 0&&(H.zLabel=String(H.zLabelVal)),!isNaN(H.xerr)&&!(H.xa.type==="log"&&H.xerr<=0)){var re=p.tickText(H.xa,H.xa.c2l(H.xerr),"hover").text;H.xerrneg!==void 0?H.xLabel+=" +"+re+" / -"+p.tickText(H.xa,H.xa.c2l(H.xerrneg),"hover").text:H.xLabel+=" ± "+re,K==="x"&&(H.distance+=1)}if(!isNaN(H.yerr)&&!(H.ya.type==="log"&&H.yerr<=0)){var ee=p.tickText(H.ya,H.ya.c2l(H.yerr),"hover").text;H.yerrneg!==void 0?H.yLabel+=" +"+ee+" / -"+p.tickText(H.ya,H.ya.c2l(H.yerrneg),"hover").text:H.yLabel+=" ± "+ee,K==="y"&&(H.distance+=1)}var ae=H.hoverinfo||H.trace.hoverinfo;return ae&&ae!=="all"&&(ae=Array.isArray(ae)?ae:ae.split("+"),ae.indexOf("x")===-1&&(H.xLabel=void 0),ae.indexOf("y")===-1&&(H.yLabel=void 0),ae.indexOf("z")===-1&&(H.zLabel=void 0),ae.indexOf("text")===-1&&(H.text=void 0),ae.indexOf("name")===-1&&(H.name=void 0)),H}function X(H,K,te){var J=te.container,oe=te.fullLayout,ie=oe._size,Q=te.event,V=!!K.hLinePoint,se=!!K.vLinePoint,re,ee;if(J.selectAll(".spikeline").remove(),!!(se||V)){var ae=i.combine(oe.plot_bgcolor,oe.paper_bgcolor);if(V){var fe=K.hLinePoint,de,pe;re=fe&&fe.xa,ee=fe&&fe.ya;var W=ee.spikesnap;W==="cursor"?(de=Q.pointerX,pe=Q.pointerY):(de=re._offset+fe.x,pe=ee._offset+fe.y);var ue=l.readability(fe.color,ae)<1.5?i.contrast(ae):fe.color,me=ee.spikemode,be=ee.spikethickness,ke=ee.spikecolor||ue,Pe=p.getPxPosition(H,ee),je,ze;if(me.indexOf("toaxis")!==-1||me.indexOf("across")!==-1){if(me.indexOf("toaxis")!==-1&&(je=Pe,ze=de),me.indexOf("across")!==-1){var Ze=ee._counterDomainMin,tt=ee._counterDomainMax;ee.anchor==="free"&&(Ze=Math.min(Ze,ee.position),tt=Math.max(tt,ee.position)),je=ie.l+Ze*ie.w,ze=ie.l+tt*ie.w}J.insert("line",":first-child").attr({x1:je,x2:ze,y1:pe,y2:pe,"stroke-width":be,stroke:ke,"stroke-dasharray":h.dashStyle(ee.spikedash,be)}).classed("spikeline",!0).classed("crisp",!0),J.insert("line",":first-child").attr({x1:je,x2:ze,y1:pe,y2:pe,"stroke-width":be+2,stroke:ae}).classed("spikeline",!0).classed("crisp",!0)}me.indexOf("marker")!==-1&&J.insert("circle",":first-child").attr({cx:Pe+(ee.side!=="right"?be:-be),cy:pe,r:be,fill:ke}).classed("spikeline",!0)}if(se){var Ce=K.vLinePoint,Ae,Ne;re=Ce&&Ce.xa,ee=Ce&&Ce.ya;var qe=re.spikesnap;qe==="cursor"?(Ae=Q.pointerX,Ne=Q.pointerY):(Ae=re._offset+Ce.x,Ne=ee._offset+Ce.y);var At=l.readability(Ce.color,ae)<1.5?i.contrast(ae):Ce.color,kt=re.spikemode,Ve=re.spikethickness,ft=re.spikecolor||At,St=p.getPxPosition(H,re),Wt,Qt;if(kt.indexOf("toaxis")!==-1||kt.indexOf("across")!==-1){if(kt.indexOf("toaxis")!==-1&&(Wt=St,Qt=Ne),kt.indexOf("across")!==-1){var zt=re._counterDomainMin,$t=re._counterDomainMax;re.anchor==="free"&&(zt=Math.min(zt,re.position),$t=Math.max($t,re.position)),Wt=ie.t+(1-$t)*ie.h,Qt=ie.t+(1-zt)*ie.h}J.insert("line",":first-child").attr({x1:Ae,x2:Ae,y1:Wt,y2:Qt,"stroke-width":Ve,stroke:ft,"stroke-dasharray":h.dashStyle(re.spikedash,Ve)}).classed("spikeline",!0).classed("crisp",!0),J.insert("line",":first-child").attr({x1:Ae,x2:Ae,y1:Wt,y2:Qt,"stroke-width":Ve+2,stroke:ae}).classed("spikeline",!0).classed("crisp",!0)}kt.indexOf("marker")!==-1&&J.insert("circle",":first-child").attr({cx:Ae,cy:St-(re.side!=="top"?Ve:-Ve),r:Ve,fill:ft}).classed("spikeline",!0)}}}function I(H,K,te){if(!te||te.length!==H._hoverdata.length)return!0;for(var J=te.length-1;J>=0;J--){var oe=te[J],ie=H._hoverdata[J];if(oe.curveNumber!==ie.curveNumber||String(oe.pointNumber)!==String(ie.pointNumber)||String(oe.pointNumbers)!==String(ie.pointNumbers))return!0}return!1}function B(H,K){return!K||K.vLinePoint!==H._spikepoints.vLinePoint||K.hLinePoint!==H._spikepoints.hLinePoint}function j(H,K){return o.plainText(H||"",{len:K,allowedTags:["br","sub","sup","b","i","em"]})}},{"../../lib":778,"../../lib/events":767,"../../lib/override_cursor":789,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"../legend/defaults":695,"../legend/draw":696,"./constants":677,"./helpers":679,d3:169,"fast-isnumeric":241,tinycolor2:576}],681:[function(e,v,M){var r=e("../../lib"),n=e("../color"),l=e("./helpers").isUnifiedHover;v.exports=function(t,f,a,o){o=o||{};function u(h){o.font[h]||(o.font[h]=f.legend?f.legend.font[h]:f.font[h])}f&&l(f.hovermode)&&(o.font||(o.font={}),u("size"),u("family"),u("color"),f.legend?(o.bgcolor||(o.bgcolor=n.combine(f.legend.bgcolor,f.paper_bgcolor)),o.bordercolor||(o.bordercolor=f.legend.bordercolor)):o.bgcolor||(o.bgcolor=f.paper_bgcolor)),a("hoverlabel.bgcolor",o.bgcolor),a("hoverlabel.bordercolor",o.bordercolor),a("hoverlabel.namelength",o.namelength),r.coerceFont(a,"hoverlabel.font",o.font),a("hoverlabel.align",o.align)}},{"../../lib":778,"../color":643,"./helpers":679}],682:[function(e,v,M){var r=e("../../lib"),n=e("./layout_attributes");v.exports=function(t,f,a){function o(i,s){return f[i]!==void 0?f[i]:r.coerce(t,f,n,i,s)}var u=o("clickmode"),h;return f._has("cartesian")?u.indexOf("select")>-1?h="closest":(f._isHoriz=l(a,f),h=f._isHoriz?"y":"x"):h="closest",o("hovermode",h)};function l(c,t){for(var f=t._scatterStackOpts||{},a=0;a<c.length;a++){var o=c[a],u=o.xaxis+o.yaxis,h=f[u]||{},i=h[o.stackgroup]||{};if(o.orientation!=="h"&&i.orientation!=="h")return!1}return!0}},{"../../lib":778,"./layout_attributes":684}],683:[function(e,v,M){var r=e("d3"),n=e("../../lib"),l=e("../dragelement"),c=e("./helpers"),t=e("./layout_attributes"),f=e("./hover");v.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:t},attributes:e("./attributes"),layoutAttributes:t,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:c.getDistanceFunction,getClosest:c.getClosest,inbox:c.inbox,quadrature:c.quadrature,appendArrayPointValue:c.appendArrayPointValue,castHoverOption:o,castHoverinfo:u,hover:f.hover,unhover:l.unhover,loneHover:f.loneHover,loneUnhover:a,click:e("./click")};function a(h){var i=n.isD3Selection(h)?h:r.select(h);i.selectAll("g.hovertext").remove(),i.selectAll(".spikeline").remove()}function o(h,i,s){return n.castOption(h,i,"hoverlabel."+s)}function u(h,i,s){function p(d){return n.coerceHoverinfo({hoverinfo:d},{_module:h._module},i)}return n.castOption(h,s,"hoverinfo",p)}},{"../../lib":778,"../dragelement":662,"./attributes":674,"./calc":675,"./click":676,"./constants":677,"./defaults":678,"./helpers":679,"./hover":680,"./layout_attributes":684,"./layout_defaults":685,"./layout_global_defaults":686,d3:169}],684:[function(e,v,M){var r=e("./constants"),n=e("../../plots/font_attributes")({editType:"none"});n.family.dflt=r.HOVERFONT,n.size.dflt=r.HOVERFONTSIZE,v.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:n,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":856,"./constants":677}],685:[function(e,v,M){var r=e("../../lib"),n=e("./helpers").isUnifiedHover,l=e("./layout_attributes"),c=e("./hovermode_defaults"),t=e("./hoverlabel_defaults");v.exports=function(a,o,u){function h(b,m){return r.coerce(a,o,l,b,m)}var i=c(a,o,u);i&&(h("hoverdistance"),h("spikedistance",n(i)?-1:void 0));var s=h("dragmode");s==="select"&&h("selectdirection");var p=o._has("mapbox"),d=o._has("geo"),y=o._basePlotModules.length;o.dragmode==="zoom"&&((p||d)&&y===1||p&&d&&y===2)&&(o.dragmode="pan"),t(a,o,h)}},{"../../lib":778,"./helpers":679,"./hoverlabel_defaults":681,"./hovermode_defaults":682,"./layout_attributes":684}],686:[function(e,v,M){var r=e("../../lib"),n=e("./hoverlabel_defaults"),l=e("./layout_attributes");v.exports=function(t,f){function a(o,u){return r.coerce(t,f,l,o,u)}n(t,f,a)}},{"../../lib":778,"./hoverlabel_defaults":681,"./layout_attributes":684}],687:[function(e,v,M){var r=e("../../lib"),n=e("../../lib/regex").counter,l=e("../../plots/domain").attributes,c=e("../../plots/cartesian/constants").idRegex,t=e("../../plot_api/plot_template"),f={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[n("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[c.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[c.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:l({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function a(s,p,d){var y=p[d+"axes"],b=Object.keys((s._splomAxes||{})[d]||{});if(Array.isArray(y))return y;if(b.length)return b}function o(s,p){var d=s.grid||{},y=a(p,d,"x"),b=a(p,d,"y");if(!s.grid&&!y&&!b)return;var m=Array.isArray(d.subplots)&&Array.isArray(d.subplots[0]),_=Array.isArray(y),T=Array.isArray(b),g=_&&y!==d.xaxes&&T&&b!==d.yaxes,A,k;m?(A=d.subplots.length,k=d.subplots[0].length):(T&&(A=b.length),_&&(k=y.length));var R=t.newContainer(p,"grid");function L(X,I){return r.coerce(d,R,f,X,I)}var z=L("rows",A),E=L("columns",k);if(!(z*E>1)){delete p.grid;return}if(!m&&!_&&!T){var S=L("pattern")==="independent";S&&(m=!0)}R._hasSubplotGrid=m;var C=L("roworder"),D=C==="top to bottom",F=m?.2:.1,N=m?.3:.1,G,U;g&&p._splomGridDflt&&(G=p._splomGridDflt.xside,U=p._splomGridDflt.yside),R._domains={x:u("x",L,F,G,E),y:u("y",L,N,U,z,D)}}function u(s,p,d,y,b,m){var _=p(s+"gap",d),T=p("domain."+s);p(s+"side",y);for(var g=new Array(b),A=T[0],k=(T[1]-A)/(b-_),R=k*(1-_),L=0;L<b;L++){var z=A+k*L;g[m?b-1-L:L]=[z,z+R]}return g}function h(s,p){var d=p.grid;if(!(!d||!d._domains)){var y=s.grid||{},b=p._subplots,m=d._hasSubplotGrid,_=d.rows,T=d.columns,g=d.pattern==="independent",A,k,R,L,z,E,S,C=d._axisMap={};if(m){var D=y.subplots||[];E=d.subplots=new Array(_);var F=1;for(A=0;A<_;A++){var N=E[A]=new Array(T),G=D[A]||[];for(k=0;k<T;k++)if(g?(z=F===1?"xy":"x"+F+"y"+F,F++):z=G[k],N[k]="",b.cartesian.indexOf(z)!==-1){if(S=z.indexOf("y"),R=z.slice(0,S),L=z.slice(S),C[R]!==void 0&&C[R]!==k||C[L]!==void 0&&C[L]!==A)continue;N[k]=z,C[R]=k,C[L]=A}}}else{var U=a(p,y,"x"),X=a(p,y,"y");d.xaxes=i(U,b.xaxis,T,C,"x"),d.yaxes=i(X,b.yaxis,_,C,"y")}var I=d._anchors={},B=d.roworder==="top to bottom";for(var j in C){var H=j.charAt(0),K=d[H+"side"],te,J,oe;if(K.length<8)I[j]="free";else if(H==="x"){if(K.charAt(0)==="t"===B?(te=0,J=1,oe=_):(te=_-1,J=-1,oe=-1),m){var ie=C[j];for(A=te;A!==oe;A+=J)if(z=E[A][ie],!!z&&(S=z.indexOf("y"),z.slice(0,S)===j)){I[j]=z.slice(S);break}}else for(A=te;A!==oe;A+=J)if(L=d.yaxes[A],b.cartesian.indexOf(j+L)!==-1){I[j]=L;break}}else if(K.charAt(0)==="l"?(te=0,J=1,oe=T):(te=T-1,J=-1,oe=-1),m){var Q=C[j];for(A=te;A!==oe;A+=J)if(z=E[Q][A],!!z&&(S=z.indexOf("y"),z.slice(S)===j)){I[j]=z.slice(0,S);break}}else for(A=te;A!==oe;A+=J)if(R=d.xaxes[A],b.cartesian.indexOf(R+j)!==-1){I[j]=R;break}}}}function i(s,p,d,y,b){var m=new Array(d),_;function T(g,A){p.indexOf(A)!==-1&&y[A]===void 0?(m[g]=A,y[A]=g):m[g]=""}if(Array.isArray(s))for(_=0;_<d;_++)T(_,s[_]);else for(T(0,b),_=1;_<d;_++)T(_,b+(_+1));return m}v.exports={moduleType:"component",name:"grid",schema:{layout:{grid:f}},layoutAttributes:f,sizeDefaults:o,contentDefaults:h}},{"../../lib":778,"../../lib/regex":795,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834,"../../plots/domain":855}],688:[function(e,v,M){var r=e("../../plots/cartesian/constants"),n=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),v.exports=n("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":746,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834}],689:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib/to_log_range");v.exports=function(c,t,f,a){t=t||{};var o=f==="log"&&t.type==="linear",u=f==="linear"&&t.type==="log";if(o||u){for(var h=c._fullLayout.images,i=t._id.charAt(0),s,p,d=0;d<h.length;d++)if(s=h[d],p="images["+d+"].",s[i+"ref"]===t._id){var y=s[i],b=s["size"+i],m=null,_=null;if(o){m=n(y,t.range);var T=b/Math.pow(10,m)/2;_=2*Math.log(T+Math.sqrt(1+T*T))/Math.LN10}else m=Math.pow(10,y),_=m*(Math.pow(10,b/2)-Math.pow(10,-b/2));r(m)?r(_)||(_=null):(m=null,_=null),a(p+i,m),a(p+"size"+i,_)}}}},{"../../lib/to_log_range":805,"fast-isnumeric":241}],690:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/cartesian/axes"),l=e("../../plots/array_container_defaults"),c=e("./attributes"),t="images";v.exports=function(o,u){var h={name:t,handleItemDefaults:f};l(o,u,h)};function f(a,o,u){function h(T,g){return r.coerce(a,o,c,T,g)}var i=h("source"),s=h("visible",!!i);if(!s)return o;h("layer"),h("xanchor"),h("yanchor"),h("sizex"),h("sizey"),h("sizing"),h("opacity");for(var p={_fullLayout:u},d=["x","y"],y=0;y<2;y++){var b=d[y],m=n.coerceRef(a,o,p,b,"paper",void 0);if(m!=="paper"){var _=n.getFromId(p,m);_._imgIndices.push(o._index)}n.coercePosition(o,p,h,m,b,0)}return o}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":688}],691:[function(e,v,M){var r=e("d3"),n=e("../drawing"),l=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/axis_ids"),t=e("../../constants/xmlns_namespaces");v.exports=function(a){var o=a._fullLayout,u=[],h={},i=[],s,p;for(p=0;p<o.images.length;p++){var d=o.images[p];if(d.visible)if(d.layer==="below"&&d.xref!=="paper"&&d.yref!=="paper"){s=c.ref2id(d.xref)+c.ref2id(d.yref);var y=o._plots[s];if(!y){i.push(d);continue}y.mainplot&&(s=y.mainplot.id),h[s]||(h[s]=[]),h[s].push(d)}else d.layer==="above"?u.push(d):i.push(d)}var b={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function m(L){var z=r.select(this);if(this._imgSrc!==L.source)if(z.attr("xmlns",t.svg),L.source&&L.source.slice(0,5)==="data:")z.attr("xlink:href",L.source),this._imgSrc=L.source;else{var E=new Promise(function(S){var C=new Image;this.img=C,C.setAttribute("crossOrigin","anonymous"),C.onerror=D,C.onload=function(){var F=document.createElement("canvas");F.width=this.width,F.height=this.height;var N=F.getContext("2d");N.drawImage(this,0,0);var G=F.toDataURL("image/png");z.attr("xlink:href",G),S()},z.on("error",D),C.src=L.source,this._imgSrc=L.source;function D(){z.remove(),S()}}.bind(this));a._promises.push(E)}}function _(L){var z=r.select(this),E=l.getFromId(a,L.xref),S=l.getFromId(a,L.yref),C=l.getRefType(L.xref)==="domain",D=l.getRefType(L.yref)==="domain",F=o._size,N,G;E!==void 0?N=typeof L.xref=="string"&&C?E._length*L.sizex:Math.abs(E.l2p(L.sizex)-E.l2p(0)):N=L.sizex*F.w,S!==void 0?G=typeof L.yref=="string"&&D?S._length*L.sizey:Math.abs(S.l2p(L.sizey)-S.l2p(0)):G=L.sizey*F.h;var U=N*b.x[L.xanchor].offset,X=G*b.y[L.yanchor].offset,I=b.x[L.xanchor].sizing+b.y[L.yanchor].sizing,B,j;switch(E!==void 0?B=typeof L.xref=="string"&&C?E._length*L.x+E._offset:E.r2p(L.x)+E._offset:B=L.x*F.w+F.l,B+=U,S!==void 0?j=typeof L.yref=="string"&&D?S._length*(1-L.y)+S._offset:S.r2p(L.y)+S._offset:j=F.h-L.y*F.h+F.t,j+=X,L.sizing){case"fill":I+=" slice";break;case"stretch":I="none";break}z.attr({x:B,y:j,width:N,height:G,preserveAspectRatio:I,opacity:L.opacity});var H=E&&l.getRefType(L.xref)!=="domain"?E._id:"",K=S&&l.getRefType(L.yref)!=="domain"?S._id:"",te=H+K;n.setClipUrl(z,te?"clip"+o._uid+te:null,a)}var T=o._imageLowerLayer.selectAll("image").data(i),g=o._imageUpperLayer.selectAll("image").data(u);T.enter().append("image"),g.enter().append("image"),T.exit().remove(),g.exit().remove(),T.each(function(L){m.bind(this)(L),_.bind(this)(L)}),g.each(function(L){m.bind(this)(L),_.bind(this)(L)});var A=Object.keys(o._plots);for(p=0;p<A.length;p++){s=A[p];var k=o._plots[s];if(k.imagelayer){var R=k.imagelayer.selectAll("image").data(h[s]||[]);R.enter().append("image"),R.exit().remove(),R.each(function(L){m.bind(this)(L),_.bind(this)(L)})}}}},{"../../constants/xmlns_namespaces":754,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_ids":831,"../drawing":665,d3:169}],692:[function(e,v,M){v.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":840,"./attributes":688,"./convert_coords":689,"./defaults":690,"./draw":691}],693:[function(e,v,M){var r=e("../../plots/font_attributes"),n=e("../color/attributes");v.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:r({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":856,"../color/attributes":642}],694:[function(e,v,M){v.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],695:[function(e,v,M){var r=e("../../registry"),n=e("../../lib"),l=e("../../plot_api/plot_template"),c=e("./attributes"),t=e("../../plots/layout_attributes"),f=e("./helpers");v.exports=function(o,u,h){for(var i=o.legend||{},s=0,p=!1,d="normal",y=0;y<h.length;y++){var b=h[y];b.visible&&((b.showlegend||b._dfltShowLegend&&!(b._module&&b._module.attributes&&b._module.attributes.showlegend&&b._module.attributes.showlegend.dflt===!1))&&(s++,b.showlegend&&(p=!0,(r.traceIs(b,"pie-like")||b._input.showlegend===!0)&&s++)),(r.traceIs(b,"bar")&&u.barmode==="stack"||["tonextx","tonexty"].indexOf(b.fill)!==-1)&&(d=f.isGrouped({traceorder:d})?"grouped+reversed":"reversed"),b.legendgroup!==void 0&&b.legendgroup!==""&&(d=f.isReversed({traceorder:d})?"reversed+grouped":"grouped"))}var m=n.coerce(o,u,t,"showlegend",p&&s>1);if(m===!1&&!i.uirevision)return;var _=l.newContainer(u,"legend");function T(z,E){return n.coerce(i,_,c,z,E)}if(T("uirevision",u.uirevision),m!==!1){T("bgcolor",u.paper_bgcolor),T("bordercolor"),T("borderwidth"),n.coerceFont(T,"font",u.font);var g=T("orientation"),A,k,R;g==="h"?(A=0,r.getComponentMethod("rangeslider","isVisible")(o.xaxis)?(k=1.1,R="bottom"):(k=-.1,R="top")):(A=1.02,k=1,R="auto"),T("traceorder",d),f.isGrouped(u.legend)&&T("tracegroupgap"),T("itemsizing"),T("itemwidth"),T("itemclick"),T("itemdoubleclick"),T("x",A),T("xanchor"),T("y",k),T("yanchor",R),T("valign"),n.noneOrAll(i,_,["x","y"]);var L=T("title.text");L&&(T("title.side",g==="h"?"left":"top"),n.coerceFont(T,"title.font",u.font))}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/layout_attributes":882,"../../registry":911,"./attributes":693,"./helpers":699}],696:[function(e,v,M){var r=e("d3"),n=e("../../lib"),l=e("../../plots/plots"),c=e("../../registry"),t=e("../../lib/events"),f=e("../dragelement"),a=e("../drawing"),o=e("../color"),u=e("../../lib/svg_text_utils"),h=e("./handle_click"),i=e("./constants"),s=e("../../constants/alignment"),p=s.LINE_SPACING,d=s.FROM_TL,y=s.FROM_BR,b=e("./get_legend_data"),m=e("./style"),_=e("./helpers");v.exports=function(N,G){var U=N._fullLayout,X="legend"+U._uid,I;if(G?(I=G.layer,X+="-hover"):(G=U.legend||{},G._main=!0,I=U._infolayer),!!I){N._legendMouseDownTime||(N._legendMouseDownTime=0);var B;if(G._main){if(!N.calcdata)return;B=U.showlegend&&b(N.calcdata,G)}else{if(!G.entries)return;B=b(G.entries,G)}var j=U.hiddenlabels||[];if(G._main&&(!U.showlegend||!B.length))return I.selectAll(".legend").remove(),U._topdefs.select("#"+X).remove(),l.autoMargin(N,"legend");var H=n.ensureSingle(I,"g","legend",function(re){G._main&&re.attr("pointer-events","all")}),K=n.ensureSingleById(U._topdefs,"clipPath",X,function(re){re.append("rect")}),te=n.ensureSingle(H,"rect","bg",function(re){re.attr("shape-rendering","crispEdges")});te.call(o.stroke,G.bordercolor).call(o.fill,G.bgcolor).style("stroke-width",G.borderwidth+"px");var J=n.ensureSingle(H,"g","scrollbox"),oe=G.title;if(G._titleWidth=0,G._titleHeight=0,oe.text){var ie=n.ensureSingle(J,"text","legendtitletext");ie.attr("text-anchor","start").call(a.font,oe.font).text(oe.text),R(ie,J,N,G)}else J.selectAll(".legendtitletext").remove();var Q=n.ensureSingle(H,"rect","scrollbar",function(re){re.attr(i.scrollBarEnterAttrs).call(o.fill,i.scrollBarColor)}),V=J.selectAll("g.groups").data(B);V.enter().append("g").attr("class","groups"),V.exit().remove();var se=V.selectAll("g.traces").data(n.identity);se.enter().append("g").attr("class","traces"),se.exit().remove(),se.style("opacity",function(re){var ee=re[0].trace;return c.traceIs(ee,"pie-like")?j.indexOf(re[0].label)!==-1?.5:1:ee.visible==="legendonly"?.5:1}).each(function(){r.select(this).call(g,N,G)}).call(m,N,G).each(function(){G._main&&r.select(this).call(k,N)}),n.syncOrAsync([l.previousPromises,function(){return E(N,V,se,G)},function(){if(G._main&&S(N))return;var re=U._size,ee=G.borderwidth,ae=re.l+re.w*G.x-d[C(G)]*G._width,fe=re.t+re.h*(1-G.y)-d[D(G)]*G._effHeight;if(G._main&&U.margin.autoexpand){var de=ae,pe=fe;ae=n.constrain(ae,0,U.width-G._width),fe=n.constrain(fe,0,U.height-G._effHeight),ae!==de&&n.log("Constrain legend.x to make legend fit inside graph"),fe!==pe&&n.log("Constrain legend.y to make legend fit inside graph")}if(G._main&&a.setTranslate(H,ae,fe),Q.on(".drag",null),H.on("wheel",null),!G._main||G._height<=G._maxHeight||N._context.staticPlot){var W=G._effHeight;G._main||(W=G._height),te.attr({width:G._width-ee,height:W-ee,x:ee/2,y:ee/2}),a.setTranslate(J,0,0),K.select("rect").attr({width:G._width-2*ee,height:W-2*ee,x:ee,y:ee}),a.setClipUrl(J,X,N),a.setRect(Q,0,0,0,0),delete G._scrollY}else{var ue=Math.max(i.scrollBarMinHeight,G._effHeight*G._effHeight/G._height),me=G._effHeight-ue-2*i.scrollBarMargin,be=G._height-G._effHeight,ke=me/be,Pe=Math.min(G._scrollY||0,be);te.attr({width:G._width-2*ee+i.scrollBarWidth+i.scrollBarMargin,height:G._effHeight-ee,x:ee/2,y:ee/2}),K.select("rect").attr({width:G._width-2*ee+i.scrollBarWidth+i.scrollBarMargin,height:G._effHeight-2*ee,x:ee,y:ee+Pe}),a.setClipUrl(J,X,N),qe(Pe,ue,ke),H.on("wheel",function(){Pe=n.constrain(G._scrollY+r.event.deltaY/me*be,0,be),qe(Pe,ue,ke),Pe!==0&&Pe!==be&&r.event.preventDefault()});var je,ze,Ze,tt=function(St,Wt,Qt){var zt=(Qt-Wt)/ke+St;return n.constrain(zt,0,be)},Ce=function(St,Wt,Qt){var zt=(Wt-Qt)/ke+St;return n.constrain(zt,0,be)},Ae=r.behavior.drag().on("dragstart",function(){var St=r.event.sourceEvent;St.type==="touchstart"?je=St.changedTouches[0].clientY:je=St.clientY,Ze=Pe}).on("drag",function(){var St=r.event.sourceEvent;St.buttons===2||St.ctrlKey||(St.type==="touchmove"?ze=St.changedTouches[0].clientY:ze=St.clientY,Pe=tt(Ze,je,ze),qe(Pe,ue,ke))});Q.call(Ae);var Ne=r.behavior.drag().on("dragstart",function(){var St=r.event.sourceEvent;St.type==="touchstart"&&(je=St.changedTouches[0].clientY,Ze=Pe)}).on("drag",function(){var St=r.event.sourceEvent;St.type==="touchmove"&&(ze=St.changedTouches[0].clientY,Pe=Ce(Ze,je,ze),qe(Pe,ue,ke))});J.call(Ne)}function qe(St,Wt,Qt){G._scrollY=N._fullLayout.legend._scrollY=St,a.setTranslate(J,0,-St),a.setRect(Q,G._width,i.scrollBarMargin+St*Qt,i.scrollBarWidth,Wt),K.select("rect").attr("y",ee+St)}if(N._context.edits.legendPosition){var At,kt,Ve,ft;H.classed("cursor-move",!0),f.init({element:H.node(),gd:N,prepFn:function(){var St=a.getTranslate(H);Ve=St.x,ft=St.y},moveFn:function(St,Wt){var Qt=Ve+St,zt=ft+Wt;a.setTranslate(H,Qt,zt),At=f.align(Qt,0,re.l,re.l+re.w,G.xanchor),kt=f.align(zt,0,re.t+re.h,re.t,G.yanchor)},doneFn:function(){At!==void 0&&kt!==void 0&&c.call("_guiRelayout",N,{"legend.x":At,"legend.y":kt})},clickFn:function(St,Wt){var Qt=I.selectAll("g.traces").filter(function(){var zt=this.getBoundingClientRect();return Wt.clientX>=zt.left&&Wt.clientX<=zt.right&&Wt.clientY>=zt.top&&Wt.clientY<=zt.bottom});Qt.size()>0&&T(N,H,Qt,St,Wt)}})}}],N)}};function T(F,N,G,U,X){var I=G.data()[0][0].trace,B={event:X,node:G.node(),curveNumber:I.index,expandedIndex:I._expandedIndex,data:F.data,layout:F.layout,frames:F._transitionData._frames,config:F._context,fullData:F._fullData,fullLayout:F._fullLayout};I._group&&(B.group=I._group),c.traceIs(I,"pie-like")&&(B.label=G.datum()[0].label);var j=t.triggerHandler(F,"plotly_legendclick",B);if(j!==!1){if(U===1)N._clickTimeout=setTimeout(function(){h(G,F,U)},F._context.doubleClickDelay);else if(U===2){N._clickTimeout&&clearTimeout(N._clickTimeout),F._legendMouseDownTime=0;var H=t.triggerHandler(F,"plotly_legenddoubleclick",B);H!==!1&&h(G,F,U)}}}function g(F,N,G){var U=F.data()[0][0],X=U.trace,I=c.traceIs(X,"pie-like"),B=X.index,j=G._main&&N._context.edits.legendText&&!I,H=G._maxNameLength,K;G.entries?K=U.text:(K=I?U.label:X.name,X._meta&&(K=n.templateString(K,X._meta)));var te=n.ensureSingle(F,"text","legendtext");te.attr("text-anchor","start").call(a.font,G.font).text(j?A(K,H):K);var J=G.itemwidth+i.itemGap*2;u.positionText(te,J,0),j?te.call(u.makeEditable,{gd:N,text:K}).call(R,F,N,G).on("edit",function(oe){this.text(A(oe,H)).call(R,F,N,G);var ie=U.trace._fullInput||{},Q={};if(c.hasTransform(ie,"groupby")){var V=c.getTransformIndices(ie,"groupby"),se=V[V.length-1],re=n.keyedContainer(ie,"transforms["+se+"].styles","target","value.name");re.set(U.trace._group,oe),Q=re.constructUpdate()}else Q.name=oe;return c.call("_guiRestyle",N,Q,B)}):R(te,F,N,G)}function A(F,N){var G=Math.max(4,N);if(F&&F.trim().length>=G/2)return F;F=F||"";for(var U=G-F.length;U>0;U--)F+=" ";return F}function k(F,N){var G=N._context.doubleClickDelay,U,X=1,I=n.ensureSingle(F,"rect","legendtoggle",function(B){N._context.staticPlot||B.style("cursor","pointer").attr("pointer-events","all"),B.call(o.fill,"rgba(0,0,0,0)")});N._context.staticPlot||(I.on("mousedown",function(){U=new Date().getTime(),U-N._legendMouseDownTime<G?X+=1:(X=1,N._legendMouseDownTime=U)}),I.on("mouseup",function(){if(!(N._dragged||N._editing)){var B=N._fullLayout.legend;new Date().getTime()-N._legendMouseDownTime>G&&(X=Math.max(X-1,1)),T(N,B,F,X,r.event)}}))}function R(F,N,G,U){U._main||F.attr("data-notex",!0),u.convertToTspans(F,G,function(){L(N,G,U)})}function L(F,N,G){var U=F.data()[0][0];if(G._main&&U&&!U.trace.showlegend){F.remove();return}var X=F.select("g[class*=math-group]"),I=X.node();G||(G=N._fullLayout.legend);var B=G.borderwidth,j=(U?G:G.title).font.size*p,H,K;if(I){var te=a.bBox(I);H=te.height,K=te.width,U?a.setTranslate(X,0,H*.25):a.setTranslate(X,B,H*.75+B)}else{var J=F.select(U?".legendtext":".legendtitletext"),oe=u.lineCount(J),ie=J.node();H=j*oe,K=ie?a.bBox(ie).width:0;var Q=j*((oe-1)/2-.3);if(U){var V=G.itemwidth+i.itemGap*2;u.positionText(J,V,-Q)}else u.positionText(J,i.titlePad+B,j+B)}U?(U.lineHeight=j,U.height=Math.max(H,16)+3,U.width=K):(G._titleWidth=K,G._titleHeight=H)}function z(F){var N=0,G=0,U=F.title.side;return U&&(U.indexOf("left")!==-1&&(N=F._titleWidth),U.indexOf("top")!==-1&&(G=F._titleHeight)),[N,G]}function E(F,N,G,U){var X=F._fullLayout;U||(U=X.legend);var I=X._size,B=_.isVertical(U),j=_.isGrouped(U),H=U.borderwidth,K=2*H,te=i.itemGap,J=U.itemwidth+te*2,oe=2*(H+te),ie=D(U),Q=U.y<0||U.y===0&&ie==="top",V=U.y>1||U.y===1&&ie==="bottom";U._maxHeight=Math.max(Q||V?X.height/2:I.h,30);var se=0;U._width=0,U._height=0;var re=z(U);if(B)G.each(function(At){var kt=At[0].height;a.setTranslate(this,H+re[0],H+re[1]+U._height+kt/2+te),U._height+=kt,U._width=Math.max(U._width,At[0].width)}),se=J+U._width,U._width+=te+J+K,U._height+=oe,j&&(N.each(function(At,kt){a.setTranslate(this,0,kt*U.tracegroupgap)}),U._height+=(U._lgroupsLength-1)*U.tracegroupgap);else{var ee=C(U),ae=U.x<0||U.x===0&&ee==="right",fe=U.x>1||U.x===1&&ee==="left",de=V||Q,pe=X.width/2;U._maxWidth=Math.max(ae?de&&ee==="left"?I.l+I.w:pe:fe?de&&ee==="right"?I.r+I.w:pe:I.w,2*J);var W=0,ue=0;G.each(function(At){var kt=At[0].width+J;W=Math.max(W,kt),ue+=kt}),se=null;var me=0;if(j){var be=0,ke=0,Pe=0;N.each(function(){var At=0,kt=0;r.select(this).selectAll("g.traces").each(function(ft){var St=ft[0].height;a.setTranslate(this,re[0],re[1]+H+te+St/2+kt),kt+=St,At=Math.max(At,J+ft[0].width)}),be=Math.max(be,kt);var Ve=At+te;Ve+H+ke>U._maxWidth&&(me=Math.max(me,ke),ke=0,Pe+=be+U.tracegroupgap,be=kt),a.setTranslate(this,ke,Pe),ke+=Ve}),U._width=Math.max(me,ke)+H,U._height=Pe+be+oe}else{var je=G.size(),ze=ue+K+(je-1)*te<U._maxWidth,Ze=0,tt=0,Ce=0,Ae=0;G.each(function(At){var kt=At[0].height,Ve=J+At[0].width,ft=(ze?Ve:W)+te;ft+H+tt-te>=U._maxWidth&&(me=Math.max(me,Ae),tt=0,Ce+=Ze,U._height+=Ze,Ze=0),a.setTranslate(this,re[0]+H+tt,re[1]+H+Ce+kt/2+te),Ae=tt+Ve+te,tt+=ft,Ze=Math.max(Ze,kt)}),ze?(U._width=tt+K,U._height=Ze+oe):(U._width=Math.max(me,Ae)+K,U._height+=Ze+oe)}}U._width=Math.ceil(Math.max(U._width+re[0],U._titleWidth+2*(H+i.titlePad))),U._height=Math.ceil(Math.max(U._height+re[1],U._titleHeight+2*(H+i.itemGap))),U._effHeight=Math.min(U._height,U._maxHeight);var Ne=F._context.edits,qe=Ne.legendText||Ne.legendPosition;G.each(function(At){var kt=r.select(this).select(".legendtoggle"),Ve=At[0].height,ft=qe?J:se||J+At[0].width;B||(ft+=te/2),a.setRect(kt,0,-Ve/2,ft,Ve)})}function S(F){var N=F._fullLayout,G=N.legend,U=C(G),X=D(G);return l.autoMargin(F,"legend",{x:G.x,y:G.y,l:G._width*d[U],r:G._width*y[U],b:G._effHeight*y[X],t:G._effHeight*d[X]})}function C(F){return n.isRightAnchor(F)?"right":n.isCenterAnchor(F)?"center":"left"}function D(F){return n.isBottomAnchor(F)?"bottom":n.isMiddleAnchor(F)?"middle":"top"}},{"../../constants/alignment":745,"../../lib":778,"../../lib/events":767,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"./constants":694,"./get_legend_data":697,"./handle_click":698,"./helpers":699,"./style":701,d3:169}],697:[function(e,v,M){var r=e("../../registry"),n=e("./helpers");v.exports=function(c,t){var f={},a=[],o=!1,u={},h=0,i=0,s,p,d=t._main;function y(L,z){if(L===""||!n.isGrouped(t)){var E="~~i"+h;a.push(E),f[E]=[[z]],h++}else a.indexOf(L)===-1?(a.push(L),o=!0,f[L]=[[z]]):f[L].push([z])}for(s=0;s<c.length;s++){var b=c[s],m=b[0],_=m.trace,T=_.legendgroup;if(!(d&&(!_.visible||!_.showlegend)))if(r.traceIs(_,"pie-like"))for(u[T]||(u[T]={}),p=0;p<b.length;p++){var g=b[p].label;u[T][g]||(y(T,{label:g,color:b[p].color,i:b[p].i,trace:_,pts:b[p].pts}),u[T][g]=!0,i=Math.max(i,(g||"").length))}else y(T,m),i=Math.max(i,(_.name||"").length)}if(!a.length)return[];var A=a.length,k,R;if(o&&n.isGrouped(t))for(R=new Array(A),s=0;s<A;s++)k=f[a[s]],R[s]=n.isReversed(t)?k.reverse():k;else{for(R=[new Array(A)],s=0;s<A;s++)k=f[a[s]][0],R[0][n.isReversed(t)?A-s-1:s]=k;A=1}return t._lgroupsLength=A,t._maxNameLength=i,R}},{"../../registry":911,"./helpers":699}],698:[function(e,v,M){var r=e("../../lib"),n=e("../../registry"),l=!0;v.exports=function(t,f,a){var o=f._fullLayout;if(f._dragged||f._editing)return;var u=o.legend.itemclick,h=o.legend.itemdoubleclick;a===1&&u==="toggle"&&h==="toggleothers"&&l&&f.data&&f._context.showTips&&r.notifier(r._(f,"Double-click on legend to isolate one trace"),"long"),l=!1;var i;if(a===1?i=u:a===2&&(i=h),!i)return;var s=o.hiddenlabels?o.hiddenlabels.slice():[],p=t.data()[0][0],d=f._fullData,y=p.trace,b=y.legendgroup,m,_,T,g,A,k,R={},L=[],z=[],E=[];function S(oe,ie,Q){var V=L.indexOf(oe),se=R[ie];return se||(se=R[ie]=[]),L.indexOf(oe)===-1&&(L.push(oe),V=L.length-1),se[V]=Q,V}function C(oe,ie){var Q=oe._fullInput;if(n.hasTransform(Q,"groupby")){var V=z[Q.index];if(!V){var se=n.getTransformIndices(Q,"groupby"),re=se[se.length-1];V=r.keyedContainer(Q,"transforms["+re+"].styles","target","value.visible"),z[Q.index]=V}var ee=V.get(oe._group);ee===void 0&&(ee=!0),ee!==!1&&V.set(oe._group,ie),E[Q.index]=S(Q.index,"visible",Q.visible!==!1)}else{var ae=Q.visible===!1?!1:ie;S(Q.index,"visible",ae)}}if(n.traceIs(y,"pie-like")){var D=p.label,F=s.indexOf(D);i==="toggle"?F===-1?s.push(D):s.splice(F,1):i==="toggleothers"&&(s=[],f.calcdata[0].forEach(function(oe){D!==oe.label&&s.push(oe.label)}),f._fullLayout.hiddenlabels&&f._fullLayout.hiddenlabels.length===s.length&&F===-1&&(s=[])),n.call("_guiRelayout",f,"hiddenlabels",s)}else{var N=b&&b.length,G=[],U;if(N)for(m=0;m<d.length;m++)U=d[m],U.visible&&U.legendgroup===b&&G.push(m);if(i==="toggle"){var X;switch(y.visible){case!0:X="legendonly";break;case!1:X=!1;break;case"legendonly":X=!0;break}if(N)for(m=0;m<d.length;m++)d[m].visible!==!1&&d[m].legendgroup===b&&C(d[m],X);else C(y,X)}else if(i==="toggleothers"){var I,B,j,H,K=!0;for(m=0;m<d.length;m++)if(I=d[m]===y,j=d[m].showlegend!==!0,!(I||j)&&(B=N&&d[m].legendgroup===b,!B&&d[m].visible===!0&&!n.traceIs(d[m],"notLegendIsolatable"))){K=!1;break}for(m=0;m<d.length;m++)if(d[m].visible!==!1&&!n.traceIs(d[m],"notLegendIsolatable"))switch(y.visible){case"legendonly":C(d[m],!0);break;case!0:H=K?!0:"legendonly",I=d[m]===y,j=d[m].showlegend!==!0&&!d[m].legendgroup,B=I||N&&d[m].legendgroup===b,C(d[m],B||j?!0:H);break}}for(m=0;m<z.length;m++)if(T=z[m],!!T){var te=T.constructUpdate(),J=Object.keys(te);for(_=0;_<J.length;_++)g=J[_],k=R[g]=R[g]||[],k[E[m]]=te[g]}for(A=Object.keys(R),m=0;m<A.length;m++)for(g=A[m],_=0;_<L.length;_++)R[g].hasOwnProperty(_)||(R[g][_]=void 0);n.call("_guiRestyle",f,R,L)}}},{"../../lib":778,"../../registry":911}],699:[function(e,v,M){M.isGrouped=function(n){return(n.traceorder||"").indexOf("grouped")!==-1},M.isVertical=function(n){return n.orientation!=="h"},M.isReversed=function(n){return(n.traceorder||"").indexOf("reversed")!==-1}},{}],700:[function(e,v,M){v.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":693,"./defaults":695,"./draw":696,"./style":701}],701:[function(e,v,M){var r=e("d3"),n=e("../../registry"),l=e("../../lib"),c=l.strTranslate,t=e("../drawing"),f=e("../color"),a=e("../colorscale/helpers").extractOpts,o=e("../../traces/scatter/subtypes"),u=e("../../traces/pie/style_one"),h=e("../../traces/pie/helpers").castOption,i=e("./constants"),s=12,p=5,d=2,y=10,b=5;v.exports=function(T,g,A){var k=g._fullLayout;A||(A=k.legend);var R=A.itemsizing==="constant",L=A.itemwidth,z=(L+i.itemGap*2)/2,E=c(z,0),S=function(J,oe,ie,Q){var V;if(J+1)V=J;else if(oe&&oe.width>0)V=oe.width;else return 0;return R?Q:Math.min(V,ie)};T.each(function(J){var oe=r.select(this),ie=l.ensureSingle(oe,"g","layers");ie.style("opacity",J[0].trace.opacity);var Q=A.valign,V=J[0].lineHeight,se=J[0].height;if(Q==="middle"||!V||!se)ie.attr("transform",null);else{var re={top:1,bottom:-1}[Q],ee=re*(.5*(V-se+3));ie.attr("transform",c(0,ee))}var ae=ie.selectAll("g.legendfill").data([J]);ae.enter().append("g").classed("legendfill",!0);var fe=ie.selectAll("g.legendlines").data([J]);fe.enter().append("g").classed("legendlines",!0);var de=ie.selectAll("g.legendsymbols").data([J]);de.enter().append("g").classed("legendsymbols",!0),de.selectAll("g.legendpoints").data([J]).enter().append("g").classed("legendpoints",!0)}).each(te).each(F).each(G).each(N).each(X).each(H).each(j).each(C).each(D).each(I).each(B);function C(J){var oe=J[0],ie=oe.trace,Q=ie.visible&&ie.fill&&ie.fill!=="none",V=o.hasLines(ie),se=ie.contours,re=!1,ee=!1,ae,fe,de=a(ie),pe=de.colorscale,W=de.reversescale,ue=function(Ne){if(Ne.size()){var qe="legendfill-"+ie.uid;t.gradient(Ne,g,qe,m(W),pe,"fill")}},me=function(Ne){if(Ne.size()){var qe="legendline-"+ie.uid;t.lineGroupStyle(Ne),t.gradient(Ne,g,qe,m(W),pe,"stroke")}};if(se){var be=se.coloring;be==="lines"?re=!0:V=be==="none"||be==="heatmap"||se.showlines,se.type==="constraint"?Q=se._operation!=="=":(be==="fill"||be==="heatmap")&&(ee=!0)}var ke=o.hasMarkers(ie)||o.hasText(ie),Pe=Q||ee,je=V||re,ze=ke||!Pe?"M5,0":je?"M5,-2":"M5,-3",Ze=r.select(this),tt=Ze.select(".legendfill").selectAll("path").data(Q||ee?[J]:[]);if(tt.enter().append("path").classed("js-fill",!0),tt.exit().remove(),tt.attr("d",ze+"h"+L+"v6h-"+L+"z").call(Q?t.fillGroupStyle:ue),V||re){var Ce=S(void 0,ie.line,y,p);fe=l.minExtend(ie,{line:{width:Ce}}),ae=[l.minExtend(oe,{trace:fe})]}var Ae=Ze.select(".legendlines").selectAll("path").data(V||re?[ae]:[]);Ae.enter().append("path").classed("js-line",!0),Ae.exit().remove(),Ae.attr("d",ze+(re?"l"+L+",0.0001":"h"+L)).call(V?t.lineGroupStyle:me)}function D(J){var oe=J[0],ie=oe.trace,Q=o.hasMarkers(ie),V=o.hasText(ie),se=o.hasLines(ie),re,ee;function ae(ke,Pe,je,ze){var Ze=l.nestedProperty(ie,ke).get(),tt=l.isArrayOrTypedArray(Ze)&&Pe?Pe(Ze):Ze;if(R&&tt&&ze!==void 0&&(tt=ze),je){if(tt<je[0])return je[0];if(tt>je[1])return je[1]}return tt}function fe(ke){return oe._distinct&&oe.index&&ke[oe.index]?ke[oe.index]:ke[0]}if(Q||V||se){var de={},pe={};if(Q){de.mc=ae("marker.color",fe),de.mx=ae("marker.symbol",fe),de.mo=ae("marker.opacity",l.mean,[.2,1]),de.mlc=ae("marker.line.color",fe),de.mlw=ae("marker.line.width",l.mean,[0,5],d),pe.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var W=ae("marker.size",l.mean,[2,16],s);de.ms=W,pe.marker.size=W}se&&(pe.line={width:ae("line.width",fe,[0,10],p)}),V&&(de.tx="Aa",de.tp=ae("textposition",fe),de.ts=10,de.tc=ae("textfont.color",fe),de.tf=ae("textfont.family",fe)),re=[l.minExtend(oe,de)],ee=l.minExtend(ie,pe),ee.selectedpoints=null,ee.texttemplate=null}var ue=r.select(this).select("g.legendpoints"),me=ue.selectAll("path.scatterpts").data(Q?re:[]);me.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",E),me.exit().remove(),me.call(t.pointStyle,ee,g),Q&&(re[0].mrc=3);var be=ue.selectAll("g.pointtext").data(V?re:[]);be.enter().append("g").classed("pointtext",!0).append("text").attr("transform",E),be.exit().remove(),be.selectAll("text").call(t.textPointStyle,ee,g)}function F(J){var oe=J[0].trace,ie=oe.type==="waterfall";if(J[0]._distinct&&ie){var Q=J[0].trace[J[0].dir].marker;return J[0].mc=Q.color,J[0].mlw=Q.line.width,J[0].mlc=Q.line.color,U(J,this,"waterfall")}var V=[];oe.visible&&ie&&(V=J[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var se=r.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(V);se.enter().append("path").classed("legendwaterfall",!0).attr("transform",E).style("stroke-miterlimit",1),se.exit().remove(),se.each(function(re){var ee=r.select(this),ae=oe[re[0]].marker,fe=S(void 0,ae.line,b,d);ee.attr("d",re[1]).style("stroke-width",fe+"px").call(f.fill,ae.color),fe&&ee.call(f.stroke,ae.line.color)})}function N(J){U(J,this)}function G(J){U(J,this,"funnel")}function U(J,oe,ie){var Q=J[0].trace,V=Q.marker||{},se=V.line||{},re=ie?Q.visible&&Q.type===ie:n.traceIs(Q,"bar"),ee=r.select(oe).select("g.legendpoints").selectAll("path.legend"+ie).data(re?[J]:[]);ee.enter().append("path").classed("legend"+ie,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),ee.exit().remove(),ee.each(function(ae){var fe=r.select(this),de=ae[0],pe=S(de.mlw,V.line,b,d);fe.style("stroke-width",pe+"px").call(f.fill,de.mc||V.color),pe&&f.stroke(fe,de.mlc||se.color)})}function X(J){var oe=J[0].trace,ie=r.select(this).select("g.legendpoints").selectAll("path.legendbox").data(oe.visible&&n.traceIs(oe,"box-violin")?[J]:[]);ie.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),ie.exit().remove(),ie.each(function(){var Q=r.select(this);if((oe.boxpoints==="all"||oe.points==="all")&&f.opacity(oe.fillcolor)===0&&f.opacity((oe.line||{}).color)===0){var V=l.minExtend(oe,{marker:{size:R?s:l.constrain(oe.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});ie.call(t.pointStyle,V,g)}else{var se=S(void 0,oe.line,b,d);Q.style("stroke-width",se+"px").call(f.fill,oe.fillcolor),se&&f.stroke(Q,oe.line.color)}})}function I(J){var oe=J[0].trace,ie=r.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(oe.visible&&oe.type==="candlestick"?[J,J]:[]);ie.enter().append("path").classed("legendcandle",!0).attr("d",function(Q,V){return V?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",E).style("stroke-miterlimit",1),ie.exit().remove(),ie.each(function(Q,V){var se=r.select(this),re=oe[V?"increasing":"decreasing"],ee=S(void 0,re.line,b,d);se.style("stroke-width",ee+"px").call(f.fill,re.fillcolor),ee&&f.stroke(se,re.line.color)})}function B(J){var oe=J[0].trace,ie=r.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(oe.visible&&oe.type==="ohlc"?[J,J]:[]);ie.enter().append("path").classed("legendohlc",!0).attr("d",function(Q,V){return V?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",E).style("stroke-miterlimit",1),ie.exit().remove(),ie.each(function(Q,V){var se=r.select(this),re=oe[V?"increasing":"decreasing"],ee=S(void 0,re.line,b,d);se.style("fill","none").call(t.dashLine,re.line.dash,ee),ee&&f.stroke(se,re.line.color)})}function j(J){K(J,this,"pie")}function H(J){K(J,this,"funnelarea")}function K(J,oe,ie){var Q=J[0],V=Q.trace,se=ie?V.visible&&V.type===ie:n.traceIs(V,ie),re=r.select(oe).select("g.legendpoints").selectAll("path.legend"+ie).data(se?[J]:[]);if(re.enter().append("path").classed("legend"+ie,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),re.exit().remove(),re.size()){var ee=(V.marker||{}).line,ae=S(h(ee.width,Q.pts),ee,b,d),fe=l.minExtend(V,{marker:{line:{width:ae}}});fe.marker.line.color=ee.color;var de=l.minExtend(Q,{trace:fe});u(re,de,fe)}}function te(J){var oe=J[0].trace,ie,Q=[];if(oe.visible)switch(oe.type){case"histogram2d":case"heatmap":Q=[["M-15,-2V4H15V-2Z"]],ie=!0;break;case"choropleth":case"choroplethmapbox":Q=[["M-6,-6V6H6V-6Z"]],ie=!0;break;case"densitymapbox":Q=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],ie="radial";break;case"cone":Q=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],ie=!1;break;case"streamtube":Q=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],ie=!1;break;case"surface":Q=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],ie=!0;break;case"mesh3d":Q=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],ie=!1;break;case"volume":Q=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],ie=!0;break;case"isosurface":Q=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],ie=!1;break}var V=r.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(Q);V.enter().append("path").classed("legend3dandfriends",!0).attr("transform",E).style("stroke-miterlimit",1),V.exit().remove(),V.each(function(se,re){var ee=r.select(this),ae=a(oe),fe=ae.colorscale,de=ae.reversescale,pe=function(be){if(be.size()){var ke="legendfill-"+oe.uid;t.gradient(be,g,ke,m(de,ie==="radial"),fe,"fill")}},W;if(fe){if(!ie){var me=fe.length;W=re===0?fe[de?me-1:0][1]:re===1?fe[de?0:me-1][1]:fe[Math.floor((me-1)/2)][1]}}else{var ue=oe.vertexcolor||oe.facecolor||oe.color;W=l.isArrayOrTypedArray(ue)?ue[re]||ue[0]:ue}ee.attr("d",se[0]),W?ee.call(f.fill,W):ee.call(pe)})}};function m(_,T){var g=T?"radial":"horizontal";return g+(_?"":"reversed")}},{"../../lib":778,"../../registry":911,"../../traces/pie/helpers":1166,"../../traces/pie/style_one":1172,"../../traces/scatter/subtypes":1212,"../color":643,"../colorscale/helpers":654,"../drawing":665,"./constants":694,d3:169}],702:[function(e,v,M){var r=e("../../registry"),n=e("../../plots/plots"),l=e("../../plots/cartesian/axis_ids"),c=e("../../fonts/ploticon"),t=e("../shapes/draw").eraseActiveShape,f=e("../../lib"),a=f._,o=v.exports={};o.toImage={name:"toImage",title:function(g){var A=g._context.toImageButtonOptions||{},k=A.format||"png";return k==="png"?a(g,"Download plot as a png"):a(g,"Download plot")},icon:c.camera,click:function(g){var A=g._context.toImageButtonOptions,k={format:A.format||"png"};f.notifier(a(g,"Taking snapshot - this may take a few seconds"),"long"),k.format!=="svg"&&f.isIE()&&(f.notifier(a(g,"IE only supports svg.  Changing format to svg."),"long"),k.format="svg"),["filename","width","height","scale"].forEach(function(R){R in A&&(k[R]=A[R])}),r.call("downloadImage",g,k).then(function(R){f.notifier(a(g,"Snapshot succeeded")+" - "+R,"long")}).catch(function(){f.notifier(a(g,"Sorry, there was a problem downloading your snapshot!"),"long")})}},o.sendDataToCloud={name:"sendDataToCloud",title:function(g){return a(g,"Edit in Chart Studio")},icon:c.disk,click:function(g){n.sendDataToCloud(g)}},o.editInChartStudio={name:"editInChartStudio",title:function(g){return a(g,"Edit in Chart Studio")},icon:c.pencil,click:function(g){n.sendDataToCloud(g)}},o.zoom2d={name:"zoom2d",title:function(g){return a(g,"Zoom")},attr:"dragmode",val:"zoom",icon:c.zoombox,click:u},o.pan2d={name:"pan2d",title:function(g){return a(g,"Pan")},attr:"dragmode",val:"pan",icon:c.pan,click:u},o.select2d={name:"select2d",title:function(g){return a(g,"Box Select")},attr:"dragmode",val:"select",icon:c.selectbox,click:u},o.lasso2d={name:"lasso2d",title:function(g){return a(g,"Lasso Select")},attr:"dragmode",val:"lasso",icon:c.lasso,click:u},o.drawclosedpath={name:"drawclosedpath",title:function(g){return a(g,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:c.drawclosedpath,click:u},o.drawopenpath={name:"drawopenpath",title:function(g){return a(g,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:c.drawopenpath,click:u},o.drawline={name:"drawline",title:function(g){return a(g,"Draw line")},attr:"dragmode",val:"drawline",icon:c.drawline,click:u},o.drawrect={name:"drawrect",title:function(g){return a(g,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:c.drawrect,click:u},o.drawcircle={name:"drawcircle",title:function(g){return a(g,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:c.drawcircle,click:u},o.eraseshape={name:"eraseshape",title:function(g){return a(g,"Erase active shape")},icon:c.eraseshape,click:t},o.zoomIn2d={name:"zoomIn2d",title:function(g){return a(g,"Zoom in")},attr:"zoom",val:"in",icon:c.zoom_plus,click:u},o.zoomOut2d={name:"zoomOut2d",title:function(g){return a(g,"Zoom out")},attr:"zoom",val:"out",icon:c.zoom_minus,click:u},o.autoScale2d={name:"autoScale2d",title:function(g){return a(g,"Autoscale")},attr:"zoom",val:"auto",icon:c.autoscale,click:u},o.resetScale2d={name:"resetScale2d",title:function(g){return a(g,"Reset axes")},attr:"zoom",val:"reset",icon:c.home,click:u},o.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(g){return a(g,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:c.tooltip_basic,gravity:"ne",click:u},o.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(g){return a(g,"Compare data on hover")},attr:"hovermode",val:function(g){return g._fullLayout._isHoriz?"y":"x"},icon:c.tooltip_compare,gravity:"ne",click:u};function u(g,A){var k=A.currentTarget,R=k.getAttribute("data-attr"),L=k.getAttribute("data-val")||!0,z=g._fullLayout,E={},S=l.list(g,null,!0),C=z._cartesianSpikesEnabled,D,F;if(R==="zoom"){var N=L==="in"?.5:2,G=(1+N)/2,U=(1-N)/2,X;for(F=0;F<S.length;F++)if(D=S[F],!D.fixedrange)if(X=D._name,L==="auto")E[X+".autorange"]=!0;else if(L==="reset"){if(D._rangeInitial===void 0)E[X+".autorange"]=!0;else{var I=D._rangeInitial.slice();E[X+".range[0]"]=I[0],E[X+".range[1]"]=I[1]}D._showSpikeInitial!==void 0&&(E[X+".showspikes"]=D._showSpikeInitial,C==="on"&&!D._showSpikeInitial&&(C="off"))}else{var B=[D.r2l(D.range[0]),D.r2l(D.range[1])],j=[G*B[0]+U*B[1],G*B[1]+U*B[0]];E[X+".range[0]"]=D.l2r(j[0]),E[X+".range[1]"]=D.l2r(j[1])}}else R==="hovermode"&&(L==="x"||L==="y")&&(L=z._isHoriz?"y":"x",k.setAttribute("data-val",L)),E[R]=L;z._cartesianSpikesEnabled=C,r.call("_guiRelayout",g,E)}o.zoom3d={name:"zoom3d",title:function(g){return a(g,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:c.zoombox,click:h},o.pan3d={name:"pan3d",title:function(g){return a(g,"Pan")},attr:"scene.dragmode",val:"pan",icon:c.pan,click:h},o.orbitRotation={name:"orbitRotation",title:function(g){return a(g,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:c["3d_rotate"],click:h},o.tableRotation={name:"tableRotation",title:function(g){return a(g,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:c["z-axis"],click:h};function h(g,A){for(var k=A.currentTarget,R=k.getAttribute("data-attr"),L=k.getAttribute("data-val")||!0,z=g._fullLayout._subplots.gl3d||[],E={},S=R.split("."),C=0;C<z.length;C++)E[z[C]+"."+S[1]]=L;var D=L==="pan"?L:"zoom";E.dragmode=D,r.call("_guiRelayout",g,E)}o.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(g){return a(g,"Reset camera to default")},attr:"resetDefault",icon:c.home,click:i},o.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(g){return a(g,"Reset camera to last save")},attr:"resetLastSave",icon:c.movie,click:i};function i(g,A){for(var k=A.currentTarget,R=k.getAttribute("data-attr"),L=R==="resetLastSave",z=R==="resetDefault",E=g._fullLayout,S=E._subplots.gl3d||[],C={},D=0;D<S.length;D++){var F=S[D],N=F+".camera",G=F+".aspectratio",U=F+".aspectmode",X=E[F]._scene,I;L?(C[N+".up"]=X.viewInitial.up,C[N+".eye"]=X.viewInitial.eye,C[N+".center"]=X.viewInitial.center,I=!0):z&&(C[N+".up"]=null,C[N+".eye"]=null,C[N+".center"]=null,I=!0),I&&(C[G+".x"]=X.viewInitial.aspectratio.x,C[G+".y"]=X.viewInitial.aspectratio.y,C[G+".z"]=X.viewInitial.aspectratio.z,C[U]=X.viewInitial.aspectmode)}r.call("_guiRelayout",g,C)}o.hoverClosest3d={name:"hoverClosest3d",title:function(g){return a(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:c.tooltip_basic,gravity:"ne",click:p};function s(g,A){var k=A.currentTarget,R=k._previousVal,L=g._fullLayout,z=L._subplots.gl3d||[],E=["xaxis","yaxis","zaxis"],S={},C={};if(R)C=R,k._previousVal=null;else{for(var D=0;D<z.length;D++){var F=z[D],N=L[F],G=F+".hovermode";S[G]=N.hovermode,C[G]=!1;for(var U=0;U<3;U++){var X=E[U],I=F+"."+X+".showspikes";C[I]=!1,S[I]=N[X].showspikes}}k._previousVal=S}return C}function p(g,A){var k=s(g,A);r.call("_guiRelayout",g,k)}o.zoomInGeo={name:"zoomInGeo",title:function(g){return a(g,"Zoom in")},attr:"zoom",val:"in",icon:c.zoom_plus,click:d},o.zoomOutGeo={name:"zoomOutGeo",title:function(g){return a(g,"Zoom out")},attr:"zoom",val:"out",icon:c.zoom_minus,click:d},o.resetGeo={name:"resetGeo",title:function(g){return a(g,"Reset")},attr:"reset",val:null,icon:c.autoscale,click:d},o.hoverClosestGeo={name:"hoverClosestGeo",title:function(g){return a(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:c.tooltip_basic,gravity:"ne",click:b};function d(g,A){for(var k=A.currentTarget,R=k.getAttribute("data-attr"),L=k.getAttribute("data-val")||!0,z=g._fullLayout,E=z._subplots.geo||[],S=0;S<E.length;S++){var C=E[S],D=z[C];if(R==="zoom"){var F=D.projection.scale,N=L==="in"?2*F:.5*F;r.call("_guiRelayout",g,C+".projection.scale",N)}}R==="reset"&&T(g,"geo")}o.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(g){return a(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:c.tooltip_basic,gravity:"ne",click:b},o.hoverClosestPie={name:"hoverClosestPie",title:function(g){return a(g,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:c.tooltip_basic,gravity:"ne",click:b};function y(g){var A=g._fullLayout;return A.hovermode?!1:A._has("cartesian")?A._isHoriz?"y":"x":"closest"}function b(g){var A=y(g);r.call("_guiRelayout",g,"hovermode",A)}o.resetViewSankey={name:"resetSankeyGroup",title:function(g){return a(g,"Reset view")},icon:c.home,click:function(g){for(var A={"node.groups":[],"node.x":[],"node.y":[]},k=0;k<g._fullData.length;k++){var R=g._fullData[k]._viewInitial;A["node.groups"].push(R.node.groups.slice()),A["node.x"].push(R.node.x.slice()),A["node.y"].push(R.node.y.slice())}r.call("restyle",g,A)}},o.toggleHover={name:"toggleHover",title:function(g){return a(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:c.tooltip_basic,gravity:"ne",click:function(g,A){var k=s(g,A);k.hovermode=y(g),r.call("_guiRelayout",g,k)}},o.resetViews={name:"resetViews",title:function(g){return a(g,"Reset views")},icon:c.home,click:function(g,A){var k=A.currentTarget;k.setAttribute("data-attr","zoom"),k.setAttribute("data-val","reset"),u(g,A),k.setAttribute("data-attr","resetLastSave"),i(g,A),T(g,"geo"),T(g,"mapbox")}},o.toggleSpikelines={name:"toggleSpikelines",title:function(g){return a(g,"Toggle Spike Lines")},icon:c.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(g){var A=g._fullLayout,k=A._cartesianSpikesEnabled;A._cartesianSpikesEnabled=k==="on"?"off":"on",r.call("_guiRelayout",g,m(g))}};function m(g){for(var A=g._fullLayout,k=A._cartesianSpikesEnabled==="on",R=l.list(g,null,!0),L={},z=0;z<R.length;z++){var E=R[z];L[E._name+".showspikes"]=k?!0:E._showSpikeInitial}return L}o.resetViewMapbox={name:"resetViewMapbox",title:function(g){return a(g,"Reset view")},attr:"reset",icon:c.home,click:function(g){T(g,"mapbox")}},o.zoomInMapbox={name:"zoomInMapbox",title:function(g){return a(g,"Zoom in")},attr:"zoom",val:"in",icon:c.zoom_plus,click:_},o.zoomOutMapbox={name:"zoomOutMapbox",title:function(g){return a(g,"Zoom out")},attr:"zoom",val:"out",icon:c.zoom_minus,click:_};function _(g,A){for(var k=A.currentTarget,R=k.getAttribute("data-val"),L=g._fullLayout,z=L._subplots.mapbox||[],E=1.05,S={},C=0;C<z.length;C++){var D=z[C],F=L[D].zoom,N=R==="in"?E*F:F/E;S[D+".zoom"]=N}r.call("_guiRelayout",g,S)}function T(g,A){for(var k=g._fullLayout,R=k._subplots[A]||[],L={},z=0;z<R.length;z++)for(var E=R[z],S=k[E]._subplot,C=S.viewInitial,D=Object.keys(C),F=0;F<D.length;F++){var N=D[F];L[E+"."+N]=C[N]}r.call("_guiRelayout",g,L)}},{"../../fonts/ploticon":757,"../../lib":778,"../../plots/cartesian/axis_ids":831,"../../plots/plots":891,"../../registry":911,"../shapes/draw":724}],703:[function(e,v,M){M.manage=e("./manage")},{"./manage":704}],704:[function(e,v,M){var r=e("../../plots/cartesian/axis_ids"),n=e("../../traces/scatter/subtypes"),l=e("../../registry"),c=e("../fx/helpers").isUnifiedHover,t=e("./modebar"),f=e("./buttons");v.exports=function(y){var b=y._fullLayout,m=y._context,_=b._modeBar;if(!m.displayModeBar&&!m.watermark){_&&(_.destroy(),delete b._modeBar);return}if(!Array.isArray(m.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(m.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var T=m.modeBarButtons,g;Array.isArray(T)&&T.length?g=p(T):!m.displayModeBar&&m.watermark?g=[]:g=o(y),_?_.update(y,g):b._modeBar=t(y,g)};var a=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"];function o(d){var y=d._fullLayout,b=d._fullData,m=d._context,_=m.modeBarButtonsToRemove,T=m.modeBarButtonsToAdd,g=y._has("cartesian"),A=y._has("gl3d"),k=y._has("geo"),R=y._has("pie"),L=y._has("funnelarea"),z=y._has("gl2d"),E=y._has("ternary"),S=y._has("mapbox"),C=y._has("polar"),D=y._has("sankey"),F=u(y),N=c(y.hovermode),G=[];function U(oe){if(oe.length){for(var ie=[],Q=0;Q<oe.length;Q++){var V=oe[Q];_.indexOf(V)===-1&&ie.push(f[V])}G.push(ie)}}var X=["toImage"];m.showEditInChartStudio?X.push("editInChartStudio"):m.showSendToCloud&&X.push("sendDataToCloud"),U(X);var I=[],B=[],j=[],H=[];if((g||z||R||L||E)+k+A+S+C>1?(B=["toggleHover"],j=["resetViews"]):k?(I=["zoomInGeo","zoomOutGeo"],B=["hoverClosestGeo"],j=["resetGeo"]):A?(B=["hoverClosest3d"],j=["resetCameraDefault3d","resetCameraLastSave3d"]):S?(I=["zoomInMapbox","zoomOutMapbox"],B=["toggleHover"],j=["resetViewMapbox"]):z?B=["hoverClosestGl2d"]:R?B=["hoverClosestPie"]:D?(B=["hoverClosestCartesian","hoverCompareCartesian"],j=["resetViewSankey"]):B=["toggleHover"],g&&(B=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(i(b)||N)&&(B=[]),(g||z)&&!F&&(I=["zoomIn2d","zoomOut2d","autoScale2d"],j[0]!=="resetViews"&&(j=["resetScale2d"])),A?H=["zoom3d","pan3d","orbitRotation","tableRotation"]:(g||z)&&!F||E?H=["zoom2d","pan2d"]:S||k?H=["pan2d"]:C&&(H=["zoom2d"]),h(b)&&H.push("select2d","lasso2d"),Array.isArray(T)){for(var K=[],te=0;te<T.length;te++){var J=T[te];typeof J=="string"?a.indexOf(J)!==-1&&(y._has("mapbox")||y._has("cartesian"))&&H.push(J):K.push(J)}T=K}return U(H),U(I.concat(j)),U(B),s(G,T)}function u(d){for(var y=r.list({_fullLayout:d},null,!0),b=0;b<y.length;b++)if(!y[b].fixedrange)return!1;return!0}function h(d){for(var y=!1,b=0;b<d.length&&!y;b++){var m=d[b];!m._module||!m._module.selectPoints||(l.traceIs(m,"scatter-like")?(n.hasMarkers(m)||n.hasText(m))&&(y=!0):l.traceIs(m,"box-violin")?(m.boxpoints==="all"||m.points==="all")&&(y=!0):y=!0)}return y}function i(d){for(var y=0;y<d.length;y++)if(!l.traceIs(d[y],"noHover"))return!1;return!0}function s(d,y){if(y.length)if(Array.isArray(y[0]))for(var b=0;b<y.length;b++)d.push(y[b]);else d.push(y);return d}function p(d){for(var y=0;y<d.length;y++)for(var b=d[y],m=0;m<b.length;m++){var _=b[m];if(typeof _=="string")if(f[_]!==void 0)d[y][m]=f[_];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return d}},{"../../plots/cartesian/axis_ids":831,"../../registry":911,"../../traces/scatter/subtypes":1212,"../fx/helpers":679,"./buttons":702,"./modebar":705}],705:[function(e,v,M){var r=e("d3"),n=e("fast-isnumeric"),l=e("../../lib"),c=e("../../fonts/ploticon"),t=new DOMParser;function f(u){this.container=u.container,this.element=document.createElement("div"),this.update(u.graphInfo,u.buttons),this.container.appendChild(this.element)}var a=f.prototype;a.update=function(u,h){this.graphInfo=u;var i=this.graphInfo._context,s=this.graphInfo._fullLayout,p="modebar-"+s._uid;this.element.setAttribute("id",p),this._uid=p,this.element.className="modebar",i.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),s.modebar.orientation==="v"&&(this.element.className+=" vertical",h=h.reverse());var d=s.modebar,y=i.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";l.deleteRelatedStyleRule(p),l.addRelatedStyleRule(p,y+"#"+p+" .modebar-group","background-color: "+d.bgcolor),l.addRelatedStyleRule(p,"#"+p+" .modebar-btn .icon path","fill: "+d.color),l.addRelatedStyleRule(p,"#"+p+" .modebar-btn:hover .icon path","fill: "+d.activecolor),l.addRelatedStyleRule(p,"#"+p+" .modebar-btn.active .icon path","fill: "+d.activecolor);var b=!this.hasButtons(h),m=this.hasLogo!==i.displaylogo,_=this.locale!==i.locale;if(this.locale=i.locale,(b||m||_)&&(this.removeAllButtons(),this.updateButtons(h),i.watermark||i.displaylogo)){var T=this.getLogo();i.watermark&&(T.className=T.className+" watermark"),s.modebar.orientation==="v"?this.element.insertBefore(T,this.element.childNodes[0]):this.element.appendChild(T),this.hasLogo=!0}this.updateActiveButton()},a.updateButtons=function(u){var h=this;this.buttons=u,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(i){var s=h.createGroup();i.forEach(function(p){var d=p.name;if(!d)throw new Error("must provide button 'name' in button config");if(h.buttonsNames.indexOf(d)!==-1)throw new Error("button name '"+d+"' is taken");h.buttonsNames.push(d);var y=h.createButton(p);h.buttonElements.push(y),s.appendChild(y)}),h.element.appendChild(s)})},a.createGroup=function(){var u=document.createElement("div");return u.className="modebar-group",u},a.createButton=function(u){var h=this,i=document.createElement("a");i.setAttribute("rel","tooltip"),i.className="modebar-btn";var s=u.title;s===void 0?s=u.name:typeof s=="function"&&(s=s(this.graphInfo)),(s||s===0)&&i.setAttribute("data-title",s),u.attr!==void 0&&i.setAttribute("data-attr",u.attr);var p=u.val;p!==void 0&&(typeof p=="function"&&(p=p(this.graphInfo)),i.setAttribute("data-val",p));var d=u.click;if(typeof d!="function")throw new Error("must provide button 'click' function in button config");i.addEventListener("click",function(b){u.click(h.graphInfo,b),h.updateActiveButton(b.currentTarget)}),i.setAttribute("data-toggle",u.toggle||!1),u.toggle&&r.select(i).classed("active",!0);var y=u.icon;return typeof y=="function"?i.appendChild(y()):i.appendChild(this.createIcon(y||c.question)),i.setAttribute("data-gravity",u.gravity||"n"),i},a.createIcon=function(u){var h=n(u.height)?Number(u.height):u.ascent-u.descent,i="http://www.w3.org/2000/svg",s;if(u.path){s=document.createElementNS(i,"svg"),s.setAttribute("viewBox",[0,0,u.width,h].join(" ")),s.setAttribute("class","icon");var p=document.createElementNS(i,"path");p.setAttribute("d",u.path),u.transform?p.setAttribute("transform",u.transform):u.ascent!==void 0&&p.setAttribute("transform","matrix(1 0 0 -1 0 "+u.ascent+")"),s.appendChild(p)}if(u.svg){var d=t.parseFromString(u.svg,"application/xml");s=d.childNodes[0]}return s.setAttribute("height","1em"),s.setAttribute("width","1em"),s},a.updateActiveButton=function(u){var h=this.graphInfo._fullLayout,i=u!==void 0?u.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var p=s.getAttribute("data-val")||!0,d=s.getAttribute("data-attr"),y=s.getAttribute("data-toggle")==="true",b=r.select(s);if(y)d===i&&b.classed("active",!b.classed("active"));else{var m=d===null?d:l.nestedProperty(h,d).get();b.classed("active",m===p)}})},a.hasButtons=function(u){var h=this.buttons;if(!h||u.length!==h.length)return!1;for(var i=0;i<u.length;++i){if(u[i].length!==h[i].length)return!1;for(var s=0;s<u[i].length;s++)if(u[i][s].name!==h[i][s].name)return!1}return!0},a.getLogo=function(){var u=this.createGroup(),h=document.createElement("a");return h.href="https://plotly.com/",h.target="_blank",h.setAttribute("data-title",l._(this.graphInfo,"Produced with Plotly")),h.className="modebar-btn plotlyjsicon modebar-btn--logo",h.appendChild(this.createIcon(c.newplotlylogo)),u.appendChild(h),u},a.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},a.destroy=function(){l.removeElement(this.container.querySelector(".modebar")),l.deleteRelatedStyleRule(this._uid)};function o(u,h){var i=u._fullLayout,s=new f({graphInfo:u,container:i._modebardiv.node(),buttons:h});return i._privateplot&&r.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}v.exports=o},{"../../fonts/ploticon":757,"../../lib":778,d3:169,"fast-isnumeric":241}],706:[function(e,v,M){var r=e("../../plots/font_attributes"),n=e("../color/attributes"),l=e("../../plot_api/plot_template").templatedArray,c=l("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});v.exports={visible:{valType:"boolean",editType:"plot"},buttons:c,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:r({editType:"plot"}),bgcolor:{valType:"color",dflt:n.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":817,"../../plots/font_attributes":856,"../color/attributes":642}],707:[function(e,v,M){v.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],708:[function(e,v,M){var r=e("../../lib"),n=e("../color"),l=e("../../plot_api/plot_template"),c=e("../../plots/array_container_defaults"),t=e("./attributes"),f=e("./constants");v.exports=function(h,i,s,p,d){var y=h.rangeselector||{},b=l.newContainer(i,"rangeselector");function m(k,R){return r.coerce(y,b,t,k,R)}var _=c(y,b,{name:"buttons",handleItemDefaults:a,calendar:d}),T=m("visible",_.length>0);if(T){var g=o(i,s,p);m("x",g[0]),m("y",g[1]),r.noneOrAll(h,i,["x","y"]),m("xanchor"),m("yanchor"),r.coerceFont(m,"font",s.font);var A=m("bgcolor");m("activecolor",n.contrast(A,f.lightAmount,f.darkAmount)),m("bordercolor"),m("borderwidth")}};function a(u,h,i,s){var p=s.calendar;function d(m,_){return r.coerce(u,h,t.buttons,m,_)}var y=d("visible");if(y){var b=d("step");b!=="all"&&(p&&p!=="gregorian"&&(b==="month"||b==="year")?h.stepmode="backward":d("stepmode"),d("count")),d("label")}}function o(u,h,i){for(var s=i.filter(function(b){return h[b].anchor===u._id}),p=0,d=0;d<s.length;d++){var y=h[s[d]].domain;y&&(p=Math.max(y[1],p))}return[u.domain[0],p+f.yPad]}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../color":643,"./attributes":706,"./constants":707}],709:[function(e,v,M){var r=e("d3"),n=e("../../registry"),l=e("../../plots/plots"),c=e("../color"),t=e("../drawing"),f=e("../../lib"),a=f.strTranslate,o=e("../../lib/svg_text_utils"),u=e("../../plots/cartesian/axis_ids"),h=e("../../constants/alignment"),i=h.LINE_SPACING,s=h.FROM_TL,p=h.FROM_BR,d=e("./constants"),y=e("./get_update_object");v.exports=function(z){var E=z._fullLayout,S=E._infolayer.selectAll(".rangeselector").data(b(z),m);S.enter().append("g").classed("rangeselector",!0),S.exit().remove(),S.style({cursor:"pointer","pointer-events":"all"}),S.each(function(C){var D=r.select(this),F=C,N=F.rangeselector,G=D.selectAll("g.button").data(f.filterVisible(N.buttons));G.enter().append("g").classed("button",!0),G.exit().remove(),G.each(function(U){var X=r.select(this),I=y(F,U);U._isActive=_(F,U,I),X.call(T,N,U),X.call(A,N,U,z),X.on("click",function(){z._dragged||n.call("_guiRelayout",z,I)}),X.on("mouseover",function(){U._isHovered=!0,X.call(T,N,U)}),X.on("mouseout",function(){U._isHovered=!1,X.call(T,N,U)})}),R(z,G,N,F._name,D)})};function b(L){for(var z=u.list(L,"x",!0),E=[],S=0;S<z.length;S++){var C=z[S];C.rangeselector&&C.rangeselector.visible&&E.push(C)}return E}function m(L){return L._id}function _(L,z,E){if(z.step==="all")return L.autorange===!0;var S=Object.keys(E);return L.range[0]===E[S[0]]&&L.range[1]===E[S[1]]}function T(L,z,E){var S=f.ensureSingle(L,"rect","selector-rect",function(C){C.attr("shape-rendering","crispEdges")});S.attr({rx:d.rx,ry:d.ry}),S.call(c.stroke,z.bordercolor).call(c.fill,g(z,E)).style("stroke-width",z.borderwidth+"px")}function g(L,z){return z._isActive||z._isHovered?L.activecolor:L.bgcolor}function A(L,z,E,S){function C(F){o.convertToTspans(F,S)}var D=f.ensureSingle(L,"text","selector-text",function(F){F.attr("text-anchor","middle")});D.call(t.font,z.font).text(k(E,S._fullLayout._meta)).call(C)}function k(L,z){return L.label?z?f.templateString(L.label,z):L.label:L.step==="all"?"all":L.count+L.step.charAt(0)}function R(L,z,E,S,C){var D=0,F=0,N=E.borderwidth;z.each(function(){var j=r.select(this),H=j.select(".selector-text"),K=E.font.size*i,te=Math.max(K*o.lineCount(H),16)+3;F=Math.max(F,te)}),z.each(function(){var j=r.select(this),H=j.select(".selector-rect"),K=j.select(".selector-text"),te=K.node()&&t.bBox(K.node()).width,J=E.font.size*i,oe=o.lineCount(K),ie=Math.max(te+10,d.minButtonWidth);j.attr("transform",a(N+D,N)),H.attr({x:0,y:0,width:ie,height:F}),o.positionText(K,ie/2,F/2-(oe-1)*J/2+3),D+=ie+5});var G=L._fullLayout._size,U=G.l+G.w*E.x,X=G.t+G.h*(1-E.y),I="left";f.isRightAnchor(E)&&(U-=D,I="right"),f.isCenterAnchor(E)&&(U-=D/2,I="center");var B="top";f.isBottomAnchor(E)&&(X-=F,B="bottom"),f.isMiddleAnchor(E)&&(X-=F/2,B="middle"),D=Math.ceil(D),F=Math.ceil(F),U=Math.round(U),X=Math.round(X),l.autoMargin(L,S+"-range-selector",{x:E.x,y:E.y,l:D*s[I],r:D*p[I],b:F*p[B],t:F*s[B]}),C.attr("transform",a(U,X))}},{"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axis_ids":831,"../../plots/plots":891,"../../registry":911,"../color":643,"../drawing":665,"./constants":707,"./get_update_object":710,d3:169}],710:[function(e,v,M){var r=e("d3");v.exports=function(c,t){var f=c._name,a={};if(t.step==="all")a[f+".autorange"]=!0;else{var o=n(c,t);a[f+".range[0]"]=o[0],a[f+".range[1]"]=o[1]}return a};function n(l,c){var t=l.range,f=new Date(l.r2l(t[1])),a=c.step,o=c.count,u;switch(c.stepmode){case"backward":u=l.l2r(+r.time[a].utc.offset(f,-o));break;case"todate":var h=r.time[a].utc.offset(f,-o);u=l.l2r(+r.time[a].utc.ceil(h));break}var i=t[1];return[u,i]}},{d3:169}],711:[function(e,v,M){v.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":706,"./defaults":708,"./draw":709}],712:[function(e,v,M){var r=e("../color/attributes");v.exports={bgcolor:{valType:"color",dflt:r.background,editType:"plot"},bordercolor:{valType:"color",dflt:r.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":642}],713:[function(e,v,M){var r=e("../../plots/cartesian/axis_ids").list,n=e("../../plots/cartesian/autorange").getAutoRange,l=e("./constants");v.exports=function(t){for(var f=r(t,"x",!0),a=0;a<f.length;a++){var o=f[a],u=o[l.name];u&&u.visible&&u.autorange&&(u._input.autorange=!0,u._input.range=u.range=n(t,o))}}},{"../../plots/cartesian/autorange":827,"../../plots/cartesian/axis_ids":831,"./constants":714}],714:[function(e,v,M){v.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],715:[function(e,v,M){var r=e("../../lib"),n=e("../../plot_api/plot_template"),l=e("../../plots/cartesian/axis_ids"),c=e("./attributes"),t=e("./oppaxis_attributes");v.exports=function(a,o,u){var h=a[u],i=o[u];if(!(h.rangeslider||o._requestRangeslider[i._id]))return;r.isPlainObject(h.rangeslider)||(h.rangeslider={});var s=h.rangeslider,p=n.newContainer(i,"rangeslider");function d(S,C){return r.coerce(s,p,c,S,C)}var y,b;function m(S,C){return r.coerce(y,b,t,S,C)}var _=d("visible");if(_){d("bgcolor",o.plot_bgcolor),d("bordercolor"),d("borderwidth"),d("thickness"),d("autorange",!i.isValidRange(s.range)),d("range");var T=o._subplots;if(T)for(var g=T.cartesian.filter(function(S){return S.substr(0,S.indexOf("y"))===l.name2id(u)}).map(function(S){return S.substr(S.indexOf("y"),S.length)}),A=r.simpleMap(g,l.id2name),k=0;k<A.length;k++){var R=A[k];y=s[R]||{},b=n.newContainer(p,R,"yaxis");var L=o[R],z;y.range&&L.isValidRange(y.range)&&(z="fixed");var E=m("rangemode",z);E!=="match"&&m("range",L.range.slice())}p._input=s}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/cartesian/axis_ids":831,"./attributes":712,"./oppaxis_attributes":719}],716:[function(e,v,M){var r=e("d3"),n=e("../../registry"),l=e("../../plots/plots"),c=e("../../lib"),t=c.strTranslate,f=e("../drawing"),a=e("../color"),o=e("../titles"),u=e("../../plots/cartesian"),h=e("../../plots/cartesian/axis_ids"),i=e("../dragelement"),s=e("../../lib/setcursor"),p=e("./constants");v.exports=function(L){for(var z=L._fullLayout,E=z._rangeSliderData,S=0;S<E.length;S++){var C=E[S][p.name];C._clipId=C._id+"-"+z._uid}function D(N){return N._name}var F=z._infolayer.selectAll("g."+p.containerClassName).data(E,D);F.exit().each(function(N){var G=N[p.name];z._topdefs.select("#"+G._clipId).remove()}).remove(),E.length!==0&&(F.enter().append("g").classed(p.containerClassName,!0).attr("pointer-events","all"),F.each(function(N){var G=r.select(this),U=N[p.name],X=z[h.id2name(N.anchor)],I=U[h.id2name(N.anchor)];if(U.range){var B=c.simpleMap(U.range,N.r2l),j=c.simpleMap(N.range,N.r2l),H;j[0]<j[1]?H=[Math.min(B[0],j[0]),Math.max(B[1],j[1])]:H=[Math.max(B[0],j[0]),Math.min(B[1],j[1])],U.range=U._input.range=c.simpleMap(H,N.l2r)}N.cleanRange("rangeslider.range");var K=z._size,te=N.domain;U._width=K.w*(te[1]-te[0]);var J=Math.round(K.l+K.w*te[0]),oe=Math.round(K.t+K.h*(1-N._counterDomainMin)+(N.side==="bottom"?N._depth:0)+U._offsetShift+p.extraPad);G.attr("transform",t(J,oe)),U._rl=c.simpleMap(U.range,N.r2l);var ie=U._rl[0],Q=U._rl[1],V=Q-ie;if(U.p2d=function(me){return me/U._width*V+ie},U.d2p=function(me){return(me-ie)/V*U._width},N.rangebreaks){var se=N.locateBreaks(ie,Q);if(se.length){var re,ee,ae=0;for(re=0;re<se.length;re++)ee=se[re],ae+=ee.max-ee.min;var fe=U._width/(Q-ie-ae),de=[-fe*ie];for(re=0;re<se.length;re++)ee=se[re],de.push(de[de.length-1]-fe*(ee.max-ee.min));for(U.d2p=function(me){for(var be=de[0],ke=0;ke<se.length;ke++){var Pe=se[ke];if(me>=Pe.max)be=de[ke+1];else if(me<Pe.min)break}return be+fe*me},re=0;re<se.length;re++)ee=se[re],ee.pmin=U.d2p(ee.min),ee.pmax=U.d2p(ee.max);U.p2d=function(me){for(var be=de[0],ke=0;ke<se.length;ke++){var Pe=se[ke];if(me>=Pe.pmax)be=de[ke+1];else if(me<Pe.pmin)break}return(me-be)/fe}}}if(I.rangemode!=="match"){var pe=X.r2l(I.range[0]),W=X.r2l(I.range[1]),ue=W-pe;U.d2pOppAxis=function(me){return(me-pe)/ue*U._height}}G.call(m,L,N,U).call(_,L,N,U).call(T,L,N,U).call(A,L,N,U,I).call(k,L,N,U).call(R,L,N,U),d(G,L,N,U),b(G,L,N,U,X,I),N.side==="bottom"&&o.draw(L,N._id+"title",{propContainer:N,propName:N._name+".title",placeholder:z._dfltTitle.x,attributes:{x:N._offset+N._length/2,y:oe+U._height+U._offsetShift+10+1.5*N.title.font.size,"text-anchor":"middle"}})}))};function d(L,z,E,S){if(z._context.staticPlot)return;var C=L.select("rect."+p.slideBoxClassName).node(),D=L.select("rect."+p.grabAreaMinClassName).node(),F=L.select("rect."+p.grabAreaMaxClassName).node();function N(){var G=r.event,U=G.target,X=G.clientX||G.touches[0].clientX,I=X-L.node().getBoundingClientRect().left,B=S.d2p(E._rl[0]),j=S.d2p(E._rl[1]),H=i.coverSlip();this.addEventListener("touchmove",K),this.addEventListener("touchend",te),H.addEventListener("mousemove",K),H.addEventListener("mouseup",te);function K(J){var oe=J.clientX||J.touches[0].clientX,ie=+oe-X,Q,V,se;switch(U){case C:se="ew-resize",Q=B+ie,V=j+ie;break;case D:se="col-resize",Q=B+ie,V=j;break;case F:se="col-resize",Q=B,V=j+ie;break;default:se="ew-resize",Q=I,V=I+ie;break}if(V<Q){var re=V;V=Q,Q=re}S._pixelMin=Q,S._pixelMax=V,s(r.select(H),se),y(L,z,E,S)}function te(){H.removeEventListener("mousemove",K),H.removeEventListener("mouseup",te),this.removeEventListener("touchmove",K),this.removeEventListener("touchend",te),c.removeElement(H)}}L.on("mousedown",N),L.on("touchstart",N)}function y(L,z,E,S){function C(N){return E.l2r(c.constrain(N,S._rl[0],S._rl[1]))}var D=C(S.p2d(S._pixelMin)),F=C(S.p2d(S._pixelMax));window.requestAnimationFrame(function(){n.call("_guiRelayout",z,E._name+".range",[D,F])})}function b(L,z,E,S,C,D){var F=p.handleWidth/2;function N(J){return c.constrain(J,0,S._width)}function G(J){return c.constrain(J,0,S._height)}function U(J){return c.constrain(J,-F,S._width+F)}var X=N(S.d2p(E._rl[0])),I=N(S.d2p(E._rl[1]));if(L.select("rect."+p.slideBoxClassName).attr("x",X).attr("width",I-X),L.select("rect."+p.maskMinClassName).attr("width",X),L.select("rect."+p.maskMaxClassName).attr("x",I).attr("width",S._width-I),D.rangemode!=="match"){var B=S._height-G(S.d2pOppAxis(C._rl[1])),j=S._height-G(S.d2pOppAxis(C._rl[0]));L.select("rect."+p.maskMinOppAxisClassName).attr("x",X).attr("height",B).attr("width",I-X),L.select("rect."+p.maskMaxOppAxisClassName).attr("x",X).attr("y",j).attr("height",S._height-j).attr("width",I-X),L.select("rect."+p.slideBoxClassName).attr("y",B).attr("height",j-B)}var H=.5,K=Math.round(U(X-F))-H,te=Math.round(U(I-F))+H;L.select("g."+p.grabberMinClassName).attr("transform",t(K,H)),L.select("g."+p.grabberMaxClassName).attr("transform",t(te,H))}function m(L,z,E,S){var C=c.ensureSingle(L,"rect",p.bgClassName,function(G){G.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),D=S.borderwidth%2===0?S.borderwidth:S.borderwidth-1,F=-S._offsetShift,N=f.crispRound(z,S.borderwidth);C.attr({width:S._width+D,height:S._height+D,transform:t(F,F),fill:S.bgcolor,stroke:S.bordercolor,"stroke-width":N})}function _(L,z,E,S){var C=z._fullLayout,D=c.ensureSingleById(C._topdefs,"clipPath",S._clipId,function(F){F.append("rect").attr({x:0,y:0})});D.select("rect").attr({width:S._width,height:S._height})}function T(L,z,E,S){var C=z.calcdata,D=L.selectAll("g."+p.rangePlotClassName).data(E._subplotsWith,c.identity);D.enter().append("g").attr("class",function(N){return p.rangePlotClassName+" "+N}).call(f.setClipUrl,S._clipId,z),D.order(),D.exit().remove();var F;D.each(function(N,G){var U=r.select(this),X=G===0,I=h.getFromId(z,N,"y"),B=I._name,j=S[B],H={data:[],layout:{xaxis:{type:E.type,domain:[0,1],range:S.range.slice(),calendar:E.calendar},width:S._width,height:S._height,margin:{t:0,b:0,l:0,r:0}},_context:z._context};E.rangebreaks&&(H.layout.xaxis.rangebreaks=E.rangebreaks),H.layout[B]={type:I.type,domain:[0,1],range:j.rangemode!=="match"?j.range.slice():I.range.slice(),calendar:I.calendar},I.rangebreaks&&(H.layout[B].rangebreaks=I.rangebreaks),l.supplyDefaults(H);var K=H._fullLayout.xaxis,te=H._fullLayout[B];K.clearCalc(),K.setScale(),te.clearCalc(),te.setScale();var J={id:N,plotgroup:U,xaxis:K,yaxis:te,isRangePlot:!0};X?F=J:(J.mainplot="xy",J.mainplotinfo=F),u.rangePlot(z,J,g(C,N))})}function g(L,z){for(var E=[],S=0;S<L.length;S++){var C=L[S],D=C[0].trace;D.xaxis+D.yaxis===z&&E.push(C)}return E}function A(L,z,E,S,C){var D=c.ensureSingle(L,"rect",p.maskMinClassName,function(U){U.attr({x:0,y:0,"shape-rendering":"crispEdges"})});D.attr("height",S._height).call(a.fill,p.maskColor);var F=c.ensureSingle(L,"rect",p.maskMaxClassName,function(U){U.attr({y:0,"shape-rendering":"crispEdges"})});if(F.attr("height",S._height).call(a.fill,p.maskColor),C.rangemode!=="match"){var N=c.ensureSingle(L,"rect",p.maskMinOppAxisClassName,function(U){U.attr({y:0,"shape-rendering":"crispEdges"})});N.attr("width",S._width).call(a.fill,p.maskOppAxisColor);var G=c.ensureSingle(L,"rect",p.maskMaxOppAxisClassName,function(U){U.attr({y:0,"shape-rendering":"crispEdges"})});G.attr("width",S._width).style("border-top",p.maskOppBorder).call(a.fill,p.maskOppAxisColor)}}function k(L,z,E,S){if(!z._context.staticPlot){var C=c.ensureSingle(L,"rect",p.slideBoxClassName,function(D){D.attr({y:0,cursor:p.slideBoxCursor,"shape-rendering":"crispEdges"})});C.attr({height:S._height,fill:p.slideBoxFill})}}function R(L,z,E,S){var C=c.ensureSingle(L,"g",p.grabberMinClassName),D=c.ensureSingle(L,"g",p.grabberMaxClassName),F={x:0,width:p.handleWidth,rx:p.handleRadius,fill:a.background,stroke:a.defaultLine,"stroke-width":p.handleStrokeWidth,"shape-rendering":"crispEdges"},N={y:Math.round(S._height/4),height:Math.round(S._height/2)},G=c.ensureSingle(C,"rect",p.handleMinClassName,function(j){j.attr(F)});G.attr(N);var U=c.ensureSingle(D,"rect",p.handleMaxClassName,function(j){j.attr(F)});U.attr(N);var X={width:p.grabAreaWidth,x:0,y:0,fill:p.grabAreaFill,cursor:z._context.staticPlot?void 0:p.grabAreaCursor},I=c.ensureSingle(C,"rect",p.grabAreaMinClassName,function(j){j.attr(X)});I.attr("height",S._height);var B=c.ensureSingle(D,"rect",p.grabAreaMaxClassName,function(j){j.attr(X)});B.attr("height",S._height)}},{"../../lib":778,"../../lib/setcursor":799,"../../plots/cartesian":841,"../../plots/cartesian/axis_ids":831,"../../plots/plots":891,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"../titles":738,"./constants":714,d3:169}],717:[function(e,v,M){var r=e("../../plots/cartesian/axis_ids"),n=e("../../lib/svg_text_utils"),l=e("./constants"),c=e("../../constants/alignment").LINE_SPACING,t=l.name;function f(a){var o=a&&a[t];return o&&o.visible}M.isVisible=f,M.makeData=function(a){var o=r.list({_fullLayout:a},"x",!0),u=a.margin,h=[];if(!a._has("gl2d"))for(var i=0;i<o.length;i++){var s=o[i];if(f(s)){h.push(s);var p=s[t];p._id=t+s._id,p._height=(a.height-u.b-u.t)*p.thickness,p._offsetShift=Math.floor(p.borderwidth/2)}}a._rangeSliderData=h},M.autoMarginOpts=function(a,o){var u=a._fullLayout,h=o[t],i=o._id.charAt(0),s=0,p=0;if(o.side==="bottom"&&(s=o._depth,o.title.text!==u._dfltTitle[i])){p=1.5*o.title.font.size+10+h._offsetShift;var d=(o.title.text.match(n.BR_TAG_ALL)||[]).length;p+=d*o.title.font.size*c}return{x:0,y:o._counterDomainMin,l:0,r:0,t:0,b:h._height+s+Math.max(u.margin.b,p),pad:l.extraPad+h._offsetShift*2}}},{"../../constants/alignment":745,"../../lib/svg_text_utils":803,"../../plots/cartesian/axis_ids":831,"./constants":714}],718:[function(e,v,M){var r=e("../../lib"),n=e("./attributes"),l=e("./oppaxis_attributes"),c=e("./helpers");v.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},n,{yaxis:l})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:c.isVisible,makeData:c.makeData,autoMarginOpts:c.autoMarginOpts}},{"../../lib":778,"./attributes":712,"./calc_autorange":713,"./defaults":715,"./draw":716,"./helpers":717,"./oppaxis_attributes":719}],719:[function(e,v,M){v.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],720:[function(e,v,M){var r=e("../annotations/attributes"),n=e("../../traces/scatter/attributes").line,l=e("../drawing/attributes").dash,c=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),v.exports=t("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:c({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:c({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:c({},n.color,{editType:"arraydraw"}),width:c({},n.width,{editType:"calc+arraydraw"}),dash:c({},l,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":746,"../../lib/extend":768,"../../plot_api/plot_template":817,"../../traces/scatter/attributes":1187,"../annotations/attributes":626,"../drawing/attributes":664}],721:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/cartesian/axes"),l=e("./constants"),c=e("./helpers");v.exports=function(h){var i=h._fullLayout,s=r.filterVisible(i.shapes);if(!(!s.length||!h._fullData.length))for(var p=0;p<s.length;p++){var d=s[p];d._extremes={};var y,b,m=n.getRefType(d.xref),_=n.getRefType(d.yref);if(d.xref!=="paper"&&m!=="domain"){var T=d.xsizemode==="pixel"?d.xanchor:d.x0,g=d.xsizemode==="pixel"?d.xanchor:d.x1;y=n.getFromId(h,d.xref),b=o(y,T,g,d.path,l.paramIsX),b&&(d._extremes[y._id]=n.findExtremes(y,b,t(d)))}if(d.yref!=="paper"&&_!=="domain"){var A=d.ysizemode==="pixel"?d.yanchor:d.y0,k=d.ysizemode==="pixel"?d.yanchor:d.y1;y=n.getFromId(h,d.yref),b=o(y,A,k,d.path,l.paramIsY),b&&(d._extremes[y._id]=n.findExtremes(y,b,f(d)))}}};function t(u){return a(u.line.width,u.xsizemode,u.x0,u.x1,u.path,!1)}function f(u){return a(u.line.width,u.ysizemode,u.y0,u.y1,u.path,!0)}function a(u,h,i,s,p,d){var y=u/2,b=d;if(h==="pixel"){var m=p?c.extractPathCoords(p,d?l.paramIsY:l.paramIsX):[i,s],_=r.aggNums(Math.max,null,m),T=r.aggNums(Math.min,null,m),g=T<0?Math.abs(T)+y:y,A=_>0?_+y:y;return{ppad:y,ppadplus:b?g:A,ppadminus:b?A:g}}else return{ppad:y}}function o(u,h,i,s,p){var d=u.type==="category"||u.type==="multicategory"?u.r2c:u.d2c;if(h!==void 0)return[d(h),d(i)];if(s){var y=1/0,b=-1/0,m=s.match(l.segmentRE),_,T,g,A,k;for(u.type==="date"&&(d=c.decodeDate(d)),_=0;_<m.length;_++)T=m[_],g=p[T.charAt(0)].drawn,g!==void 0&&(A=m[_].substr(1).match(l.paramRE),!(!A||A.length<g)&&(k=d(A[g]),k<y&&(y=k),k>b&&(b=k)));if(b>=y)return[y,b]}}},{"../../lib":778,"../../plots/cartesian/axes":828,"./constants":722,"./helpers":731}],722:[function(e,v,M){v.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],723:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/cartesian/axes"),l=e("../../plots/array_container_defaults"),c=e("./attributes"),t=e("./helpers");v.exports=function(o,u){l(o,u,{name:"shapes",handleItemDefaults:f})};function f(a,o,u){function h(B,j){return r.coerce(a,o,c,B,j)}var i=h("visible");if(i){var s=h("path"),p=s?"path":"rect",d=h("type",p);o.type!=="path"&&delete o.path,h("editable"),h("layer"),h("opacity"),h("fillcolor"),h("fillrule");var y=h("line.width");y&&(h("line.color"),h("line.dash"));for(var b=h("xsizemode"),m=h("ysizemode"),_=["x","y"],T=0;T<2;T++){var g=_[T],A=g+"anchor",k=g==="x"?b:m,R={_fullLayout:u},L,z,E,S=n.coerceRef(a,o,R,g,void 0,"paper"),C=n.getRefType(S);if(C==="range"?(L=n.getFromId(R,S),L._shapeIndices.push(o._index),E=t.rangeToShapePosition(L),z=t.shapePositionToRange(L)):z=E=r.identity,d!=="path"){var D=.25,F=.75,N=g+"0",G=g+"1",U=a[N],X=a[G];a[N]=z(a[N],!0),a[G]=z(a[G],!0),k==="pixel"?(h(N,0),h(G,10)):(n.coercePosition(o,R,h,S,N,D),n.coercePosition(o,R,h,S,G,F)),o[N]=E(o[N]),o[G]=E(o[G]),a[N]=U,a[G]=X}if(k==="pixel"){var I=a[A];a[A]=z(a[A],!0),n.coercePosition(o,R,h,S,A,.25),o[A]=E(o[A]),a[A]=I}}d==="path"?h("path"):r.noneOrAll(a,o,["x0","x1","y0","y1"])}}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":720,"./helpers":731}],724:[function(e,v,M){var r=e("../../registry"),n=e("../../lib"),l=e("../../plots/cartesian/axes"),c=e("./draw_newshape/helpers").readPaths,t=e("./draw_newshape/display_outlines"),f=e("../../plots/cartesian/handle_outline").clearOutlineControllers,a=e("../color"),o=e("../drawing"),u=e("../../plot_api/plot_template").arrayEditor,h=e("../dragelement"),i=e("../../lib/setcursor"),s=e("./constants"),p=e("./helpers");v.exports={draw:d,drawOne:m,eraseActiveShape:z};function d(E){var S=E._fullLayout;S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove();for(var C in S._plots){var D=S._plots[C].shapelayer;D&&D.selectAll("path").remove()}for(var F=0;F<S.shapes.length;F++)S.shapes[F].visible&&m(E,F)}function y(E){return!!E._fullLayout._drawing}function b(E){return!E._context.edits.shapePosition}function m(E,S){E._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var C=p.makeOptionsAndPlotinfo(E,S),D=C.options,F=C.plotinfo;if(!D._input||D.visible===!1)return;if(D.layer!=="below")G(E._fullLayout._shapeUpperLayer);else if(D.xref==="paper"||D.yref==="paper")G(E._fullLayout._shapeLowerLayer);else if(F._hadPlotinfo){var N=F.mainplotinfo||F;G(N.shapelayer)}else G(E._fullLayout._shapeLowerLayer);function G(U){var X=g(E,D),I={"data-index":S,"fill-rule":D.fillrule,d:X},B=D.opacity,j=D.fillcolor,H=D.line.width?D.line.color:"rgba(0,0,0,0)",K=D.line.width,te=D.line.dash;!K&&D.editable===!0&&(K=5,te="solid");var J=X[X.length-1]!=="Z",oe=b(E)&&D.editable&&E._fullLayout._activeShapeIndex===S;oe&&(j=J?"rgba(0,0,0,0)":E._fullLayout.activeshape.fillcolor,B=E._fullLayout.activeshape.opacity);var ie=U.append("path").attr(I).style("opacity",B).call(a.stroke,H).call(a.fill,j).call(o.dashLine,te,K);_(ie,E,D);var Q;if((oe||E._context.edits.shapePosition)&&(Q=u(E.layout,"shapes",D)),oe){ie.style({cursor:"move"});var V={element:ie.node(),plotinfo:F,gd:E,editHelpers:Q,isActiveShape:!0},se=c(X,E);t(se,ie,V)}else E._context.edits.shapePosition?T(E,ie,D,S,U,Q):D.editable===!0&&ie.style("pointer-events",J||a.opacity(j)*B<=.5?"stroke":"all");ie.node().addEventListener("click",function(){return R(E,ie)})}}function _(E,S,C){var D=(C.xref+C.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");o.setClipUrl(E,D?"clip"+S._fullLayout._uid+D:null,S)}function T(E,S,C,D,F,N){var G=10,U=10,X=C.xsizemode==="pixel",I=C.ysizemode==="pixel",B=C.type==="line",j=C.type==="path",H=N.modifyItem,K,te,J,oe,ie,Q,V,se,re,ee,ae,fe,de,pe,W,ue=l.getFromId(E,C.xref),me=l.getRefType(C.xref),be=l.getFromId(E,C.yref),ke=l.getRefType(C.yref),Pe=p.getDataToPixel(E,ue,!1,me),je=p.getDataToPixel(E,be,!0,ke),ze=p.getPixelToData(E,ue,!1,me),Ze=p.getPixelToData(E,be,!0,ke),tt=Ne(),Ce={element:tt.node(),gd:E,prepFn:kt,doneFn:Ve,clickFn:ft},Ae;h.init(Ce),tt.node().onmousemove=At;function Ne(){return B?qe():S}function qe(){var rr=10,Pt=Math.max(C.line.width,rr),Lt=F.append("g").attr("data-index",D);Lt.append("path").attr("d",S.attr("d")).style({cursor:"move","stroke-width":Pt,"stroke-opacity":"0"});var dt={"fill-opacity":"0"},lt=Math.max(Pt/2,rr);return Lt.append("circle").attr({"data-line-point":"start-point",cx:X?Pe(C.xanchor)+C.x0:Pe(C.x0),cy:I?je(C.yanchor)-C.y0:je(C.y0),r:lt}).style(dt).classed("cursor-grab",!0),Lt.append("circle").attr({"data-line-point":"end-point",cx:X?Pe(C.xanchor)+C.x1:Pe(C.x1),cy:I?je(C.yanchor)-C.y1:je(C.y1),r:lt}).style(dt).classed("cursor-grab",!0),Lt}function At(rr){if(y(E)){Ae=null;return}if(B)rr.target.tagName==="path"?Ae="move":Ae=rr.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Pt=Ce.element.getBoundingClientRect(),Lt=Pt.right-Pt.left,dt=Pt.bottom-Pt.top,lt=rr.clientX-Pt.left,Te=rr.clientY-Pt.top,Le=!j&&Lt>G&&dt>U&&!rr.shiftKey?h.getCursor(lt/Lt,1-Te/dt):"move";i(S,Le),Ae=Le.split("-")[0]}}function kt(rr){y(E)||(X&&(ie=Pe(C.xanchor)),I&&(Q=je(C.yanchor)),C.type==="path"?W=C.path:(K=X?C.x0:Pe(C.x0),te=I?C.y0:je(C.y0),J=X?C.x1:Pe(C.x1),oe=I?C.y1:je(C.y1)),K<J?(re=K,de="x0",ee=J,pe="x1"):(re=J,de="x1",ee=K,pe="x0"),!I&&te<oe||I&&te>oe?(V=te,ae="y0",se=oe,fe="y1"):(V=oe,ae="y1",se=te,fe="y0"),At(rr),Qt(F,C),$t(S,C,E),Ce.moveFn=Ae==="move"?St:Wt,Ce.altKey=rr.altKey)}function Ve(){y(E)||(i(S),zt(F),_(S,E,C),r.call("_guiRelayout",E,N.getUpdateObj()))}function ft(){y(E)||zt(F)}function St(rr,Pt){if(C.type==="path"){var Lt=function(Te){return Te},dt=Lt,lt=Lt;X?H("xanchor",C.xanchor=ze(ie+rr)):(dt=function(Le){return ze(Pe(Le)+rr)},ue&&ue.type==="date"&&(dt=p.encodeDate(dt))),I?H("yanchor",C.yanchor=Ze(Q+Pt)):(lt=function(Le){return Ze(je(Le)+Pt)},be&&be.type==="date"&&(lt=p.encodeDate(lt))),H("path",C.path=k(W,dt,lt))}else X?H("xanchor",C.xanchor=ze(ie+rr)):(H("x0",C.x0=ze(K+rr)),H("x1",C.x1=ze(J+rr))),I?H("yanchor",C.yanchor=Ze(Q+Pt)):(H("y0",C.y0=Ze(te+Pt)),H("y1",C.y1=Ze(oe+Pt)));S.attr("d",g(E,C)),Qt(F,C)}function Wt(rr,Pt){if(j){var Lt=function(st){return st},dt=Lt,lt=Lt;X?H("xanchor",C.xanchor=ze(ie+rr)):(dt=function(It){return ze(Pe(It)+rr)},ue&&ue.type==="date"&&(dt=p.encodeDate(dt))),I?H("yanchor",C.yanchor=Ze(Q+Pt)):(lt=function(It){return Ze(je(It)+Pt)},be&&be.type==="date"&&(lt=p.encodeDate(lt))),H("path",C.path=k(W,dt,lt))}else if(B){if(Ae==="resize-over-start-point"){var Te=K+rr,Le=I?te-Pt:te+Pt;H("x0",C.x0=X?Te:ze(Te)),H("y0",C.y0=I?Le:Ze(Le))}else if(Ae==="resize-over-end-point"){var Be=J+rr,et=I?oe-Pt:oe+Pt;H("x1",C.x1=X?Be:ze(Be)),H("y1",C.y1=I?et:Ze(et))}}else{var Me=function(st){return Ae.indexOf(st)!==-1},Ie=Me("n"),He=Me("s"),Xe=Me("w"),ht=Me("e"),it=Ie?V+Pt:V,Ge=He?se+Pt:se,ot=Xe?re+rr:re,Je=ht?ee+rr:ee;I&&(Ie&&(it=V-Pt),He&&(Ge=se-Pt)),(!I&&Ge-it>U||I&&it-Ge>U)&&(H(ae,C[ae]=I?it:Ze(it)),H(fe,C[fe]=I?Ge:Ze(Ge))),Je-ot>G&&(H(de,C[de]=X?ot:ze(ot)),H(pe,C[pe]=X?Je:ze(Je)))}S.attr("d",g(E,C)),Qt(F,C)}function Qt(rr,Pt){(X||I)&&Lt();function Lt(){var dt=Pt.type!=="path",lt=rr.selectAll(".visual-cue").data([0]),Te=1;lt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Te}).classed("visual-cue",!0);var Le=Pe(X?Pt.xanchor:n.midRange(dt?[Pt.x0,Pt.x1]:p.extractPathCoords(Pt.path,s.paramIsX))),Be=je(I?Pt.yanchor:n.midRange(dt?[Pt.y0,Pt.y1]:p.extractPathCoords(Pt.path,s.paramIsY)));if(Le=p.roundPositionForSharpStrokeRendering(Le,Te),Be=p.roundPositionForSharpStrokeRendering(Be,Te),X&&I){var et="M"+(Le-1-Te)+","+(Be-1-Te)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";lt.attr("d",et)}else if(X){var Me="M"+(Le-1-Te)+","+(Be-9-Te)+"v18 h2 v-18 Z";lt.attr("d",Me)}else{var Ie="M"+(Le-9-Te)+","+(Be-1-Te)+"h18 v2 h-18 Z";lt.attr("d",Ie)}}}function zt(rr){rr.selectAll(".visual-cue").remove()}function $t(rr,Pt,Lt){var dt=Pt.xref,lt=Pt.yref,Te=l.getFromId(Lt,dt),Le=l.getFromId(Lt,lt),Be="";dt!=="paper"&&!Te.autorange&&(Be+=dt),lt!=="paper"&&!Le.autorange&&(Be+=lt),o.setClipUrl(rr,Be?"clip"+Lt._fullLayout._uid+Be:null,Lt)}}function g(E,S){var C=S.type,D=l.getRefType(S.xref),F=l.getRefType(S.yref),N=l.getFromId(E,S.xref),G=l.getFromId(E,S.yref),U=E._fullLayout._size,X,I,B,j,H,K,te,J;if(N?D==="domain"?I=function(de){return N._offset+N._length*de}:(X=p.shapePositionToRange(N),I=function(de){return N._offset+N.r2p(X(de,!0))}):I=function(de){return U.l+U.w*de},G?F==="domain"?j=function(de){return G._offset+G._length*(1-de)}:(B=p.shapePositionToRange(G),j=function(de){return G._offset+G.r2p(B(de,!0))}):j=function(de){return U.t+U.h*(1-de)},C==="path")return N&&N.type==="date"&&(I=p.decodeDate(I)),G&&G.type==="date"&&(j=p.decodeDate(j)),A(S,I,j);if(S.xsizemode==="pixel"){var oe=I(S.xanchor);H=oe+S.x0,K=oe+S.x1}else H=I(S.x0),K=I(S.x1);if(S.ysizemode==="pixel"){var ie=j(S.yanchor);te=ie-S.y0,J=ie-S.y1}else te=j(S.y0),J=j(S.y1);if(C==="line")return"M"+H+","+te+"L"+K+","+J;if(C==="rect")return"M"+H+","+te+"H"+K+"V"+J+"H"+H+"Z";var Q=(H+K)/2,V=(te+J)/2,se=Math.abs(Q-H),re=Math.abs(V-te),ee="A"+se+","+re,ae=Q+se+","+V,fe=Q+","+(V-re);return"M"+ae+ee+" 0 1,1 "+fe+ee+" 0 0,1 "+ae+"Z"}function A(E,S,C){var D=E.path,F=E.xsizemode,N=E.ysizemode,G=E.xanchor,U=E.yanchor;return D.replace(s.segmentRE,function(X){var I=0,B=X.charAt(0),j=s.paramIsX[B],H=s.paramIsY[B],K=s.numParams[B],te=X.substr(1).replace(s.paramRE,function(J){return j[I]?F==="pixel"?J=S(G)+Number(J):J=S(J):H[I]&&(N==="pixel"?J=C(U)-Number(J):J=C(J)),I++,I>K&&(J="X"),J});return I>K&&(te=te.replace(/[\s,]*X.*/,""),n.log("Ignoring extra params in segment "+X)),B+te})}function k(E,S,C){return E.replace(s.segmentRE,function(D){var F=0,N=D.charAt(0),G=s.paramIsX[N],U=s.paramIsY[N],X=s.numParams[N],I=D.substr(1).replace(s.paramRE,function(B){return F>=X||(G[F]?B=S(B):U[F]&&(B=C(B)),F++),B});return N+I})}function R(E,S){if(b(E)){var C=S.node(),D=+C.getAttribute("data-index");if(D>=0){if(D===E._fullLayout._activeShapeIndex){L(E);return}E._fullLayout._activeShapeIndex=D,E._fullLayout._deactivateShape=L,d(E)}}}function L(E){if(b(E)){var S=E._fullLayout._activeShapeIndex;S>=0&&(f(E),delete E._fullLayout._activeShapeIndex,d(E))}}function z(E){if(b(E)){f(E);var S=E._fullLayout._activeShapeIndex,C=(E.layout||{}).shapes||[];if(S<C.length){for(var D=[],F=0;F<C.length;F++)F!==S&&D.push(C[F]);delete E._fullLayout._activeShapeIndex,r.call("_guiRelayout",E,{shapes:D})}}}},{"../../lib":778,"../../lib/setcursor":799,"../../plot_api/plot_template":817,"../../plots/cartesian/axes":828,"../../plots/cartesian/handle_outline":838,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"./constants":722,"./draw_newshape/display_outlines":728,"./draw_newshape/helpers":729,"./helpers":731}],725:[function(e,v,M){var r=e("../../drawing/attributes").dash,n=e("../../../lib/extend").extendFlat;v.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:n({},r,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":768,"../../drawing/attributes":664}],726:[function(e,v,M){var r=32;v.exports={CIRCLE_SIDES:r,i000:0,i090:r/4,i180:r/2,i270:r/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],727:[function(e,v,M){var r=e("../../color");v.exports=function(l,c,t){t("newshape.drawdirection"),t("newshape.layer"),t("newshape.fillcolor"),t("newshape.fillrule"),t("newshape.opacity");var f=t("newshape.line.width");if(f){var a=(l||{}).plot_bgcolor||"#FFF";t("newshape.line.color",r.contrast(a)),t("newshape.line.dash")}t("activeshape.fillcolor"),t("activeshape.opacity")}},{"../../color":643}],728:[function(e,v,M){var r=e("../../dragelement"),n=e("../../dragelement/helpers"),l=n.drawMode,c=e("../../../registry"),t=e("./constants"),f=t.i000,a=t.i090,o=t.i180,u=t.i270,h=e("../../../plots/cartesian/handle_outline"),i=h.clearOutlineControllers,s=e("./helpers"),p=s.pointsShapeRectangle,d=s.pointsShapeEllipse,y=s.writePaths,b=e("./newshapes");v.exports=function _(T,g,A,k){k||(k=0);var R=A.gd;function L(){_(T,g,A,k++),d(T[0])&&z({redrawing:!0})}function z(ee){A.isActiveShape=!1;var ae=b(g,A);Object.keys(ae).length&&c.call((ee||{}).redrawing?"relayout":"_guiRelayout",R,ae)}var E=A.isActiveShape,S=R._fullLayout,C=S._zoomlayer,D=A.dragmode,F=l(D);F?R._fullLayout._drawing=!0:R._fullLayout._activeShapeIndex>=0&&i(R),g.attr("d",y(T));var N,G,U,X,I;if(E&&!k){I=m([],T);var B=C.append("g").attr("class","outline-controllers");oe(B),re()}function j(ee){U=+ee.srcElement.getAttribute("data-i"),X=+ee.srcElement.getAttribute("data-j"),N[U][X].moveFn=H}function H(ee,ae){if(T.length){var fe=I[U][X][1],de=I[U][X][2],pe=T[U],W=pe.length;if(p(pe)){for(var ue=0;ue<W;ue++)if(ue!==X){var me=pe[ue];me[1]===pe[X][1]&&(me[1]=fe+ee),me[2]===pe[X][2]&&(me[2]=de+ae)}if(pe[X][1]=fe+ee,pe[X][2]=de+ae,!p(pe))for(var be=0;be<W;be++)for(var ke=0;ke<pe[be].length;ke++)pe[be][ke]=I[U][be][ke]}else pe[X][1]=fe+ee,pe[X][2]=de+ae;L()}}function K(){z()}function te(){if(T.length&&T[U]&&T[U].length){for(var ee=[],ae=0;ae<T[U].length;ae++)ae!==X&&ee.push(T[U][ae]);ee.length>1&&!(ee.length===2&&ee[1][0]==="Z")&&(X===0&&(ee[0][0]="M"),T[U]=ee,L(),z())}}function J(ee,ae){if(ee===2){U=+ae.srcElement.getAttribute("data-i"),X=+ae.srcElement.getAttribute("data-j");var fe=T[U];!p(fe)&&!d(fe)&&te()}}function oe(ee){N=[];for(var ae=0;ae<T.length;ae++){var fe=T[ae],de=p(fe),pe=!de&&d(fe);N[ae]=[];for(var W=0;W<fe.length;W++)if(fe[W][0]!=="Z"&&!(pe&&W!==f&&W!==a&&W!==o&&W!==u)){var ue=fe[W][1],me=fe[W][2],be=ee.append("circle").classed("cursor-grab",!0).attr("data-i",ae).attr("data-j",W).attr("cx",ue).attr("cy",me).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});N[ae][W]={element:be.node(),gd:R,prepFn:j,doneFn:K,clickFn:J},r.init(N[ae][W])}}}function ie(ee,ae){if(T.length)for(var fe=0;fe<T.length;fe++)for(var de=0;de<T[fe].length;de++)for(var pe=0;pe+2<T[fe][de].length;pe+=2)T[fe][de][pe+1]=I[fe][de][pe+1]+ee,T[fe][de][pe+2]=I[fe][de][pe+2]+ae}function Q(ee,ae){ie(ee,ae),L()}function V(ee){U=+ee.srcElement.getAttribute("data-i"),U||(U=0),G[U].moveFn=Q}function se(){z()}function re(){if(G=[],!!T.length){var ee=0;G[ee]={element:g[0][0],gd:R,prepFn:V,doneFn:se},r.init(G[ee])}}};function m(_,T){for(var g=0;g<T.length;g++){var A=T[g];_[g]=[];for(var k=0;k<A.length;k++){_[g][k]=[];for(var R=0;R<A[k].length;R++)_[g][k][R]=A[k][R]}}return _}},{"../../../plots/cartesian/handle_outline":838,"../../../registry":911,"../../dragelement":662,"../../dragelement/helpers":661,"./constants":726,"./helpers":729,"./newshapes":730}],729:[function(e,v,M){var r=e("parse-svg-path"),n=e("./constants"),l=n.CIRCLE_SIDES,c=n.SQRT2,t=e("../../../plots/cartesian/helpers"),f=t.p2r,a=t.r2p,o=[0,3,4,5,6,1,2],u=[0,3,4,1,2];M.writePaths=function(s){var p=s.length;if(!p)return"M0,0Z";for(var d="",y=0;y<p;y++)for(var b=s[y].length,m=0;m<b;m++){var _=s[y][m][0];if(_==="Z")d+="Z";else for(var T=s[y][m].length,g=0;g<T;g++){var A=g;_==="Q"||_==="S"?A=u[g]:_==="C"&&(A=o[g]),d+=s[y][m][A],g>0&&g<T-1&&(d+=",")}}return d},M.readPaths=function(s,p,d,y){var b=r(s),m=[],_=-1,T=function(){_++,m[_]=[]},g,A=0,k=0,R,L,z=function(){R=A,L=k};z();for(var E=0;E<b.length;E++){var S=[],C,D,F,N,G=b[E][0],U=G;switch(G){case"M":T(),A=+b[E][1],k=+b[E][2],S.push([U,A,k]),z();break;case"Q":case"S":C=+b[E][1],F=+b[E][2],A=+b[E][3],k=+b[E][4],S.push([U,A,k,C,F]);break;case"C":C=+b[E][1],F=+b[E][2],D=+b[E][3],N=+b[E][4],A=+b[E][5],k=+b[E][6],S.push([U,A,k,C,F,D,N]);break;case"T":case"L":A=+b[E][1],k=+b[E][2],S.push([U,A,k]);break;case"H":U="L",A=+b[E][1],S.push([U,A,k]);break;case"V":U="L",k=+b[E][1],S.push([U,A,k]);break;case"A":U="L";var X=+b[E][1],I=+b[E][2];+b[E][4]||(X=-X,I=-I);var B=A-X,j=k;for(g=1;g<=l/2;g++){var H=2*Math.PI*g/l;S.push([U,B+X*Math.cos(H),j+I*Math.sin(H)])}break;case"Z":(A!==R||k!==L)&&(A=R,k=L,S.push([U,A,k]));break}for(var K=(d||{}).domain,te=p._fullLayout._size,J=d&&d.xsizemode==="pixel",oe=d&&d.ysizemode==="pixel",ie=y===!1,Q=0;Q<S.length;Q++){for(g=0;g+2<7;g+=2){var V=S[Q][g+1],se=S[Q][g+2];V===void 0||se===void 0||(A=V,k=se,d&&(d.xaxis&&d.xaxis.p2r?(ie&&(V-=d.xaxis._offset),J?V=a(d.xaxis,d.xanchor)+V:V=f(d.xaxis,V)):(ie&&(V-=te.l),K?V=K.x[0]+V/te.w:V=V/te.w),d.yaxis&&d.yaxis.p2r?(ie&&(se-=d.yaxis._offset),oe?se=a(d.yaxis,d.yanchor)-se:se=f(d.yaxis,se)):(ie&&(se-=te.t),K?se=K.y[1]-se/te.h:se=1-se/te.h)),S[Q][g+1]=V,S[Q][g+2]=se)}m[_].push(S[Q].slice())}}return m};function h(s,p){return Math.abs(s-p)<=1e-6}function i(s,p){var d=p[1]-s[1],y=p[2]-s[2];return Math.sqrt(d*d+y*y)}M.pointsShapeRectangle=function(s){var p=s.length;if(p!==5)return!1;for(var d=1;d<3;d++){var y=s[0][d]-s[1][d],b=s[3][d]-s[2][d];if(!h(y,b))return!1;var m=s[0][d]-s[3][d],_=s[1][d]-s[2][d];if(!h(m,_))return!1}return!h(s[0][1],s[1][1])&&!h(s[0][1],s[3][1])?!1:!!(i(s[0],s[1])*i(s[0],s[3]))},M.pointsShapeEllipse=function(s){var p=s.length;if(p!==l+1)return!1;p=l;for(var d=0;d<p;d++){var y=(p*2-d)%p,b=(p/2+y)%p,m=(p/2+d)%p;if(!h(i(s[d],s[m]),i(s[y],s[b])))return!1}return!0},M.handleEllipse=function(s,p,d){if(!s)return[p,d];var y=M.ellipseOver({x0:p[0],y0:p[1],x1:d[0],y1:d[1]}),b=(y.x1+y.x0)/2,m=(y.y1+y.y0)/2,_=(y.x1-y.x0)/2,T=(y.y1-y.y0)/2;_||(_=T=T/c),T||(T=_=_/c);for(var g=[],A=0;A<l;A++){var k=A*2*Math.PI/l;g.push([b+_*Math.cos(k),m+T*Math.sin(k)])}return g},M.ellipseOver=function(s){var p=s.x0,d=s.y0,y=s.x1,b=s.y1,m=y-p,_=b-d;p-=m,d-=_;var T=(p+y)/2,g=(d+b)/2,A=c;return m*=A,_*=A,{x0:T-m,y0:g-_,x1:T+m,y1:g+_}}},{"../../../plots/cartesian/helpers":839,"./constants":726,"parse-svg-path":505}],730:[function(e,v,M){var r=e("../../dragelement/helpers"),n=r.drawMode,l=r.openMode,c=e("./constants"),t=c.i000,f=c.i090,a=c.i180,o=c.i270,u=c.cos45,h=c.sin45,i=e("../../../plots/cartesian/helpers"),s=i.p2r,p=i.r2p,d=e("../../../plots/cartesian/handle_outline"),y=d.clearSelect,b=e("./helpers"),m=b.readPaths,_=b.writePaths,T=b.ellipseOver;v.exports=function(k,R){if(k.length){var L=k[0][0];if(L){var z=L.getAttribute("d"),E=R.gd,S=E._fullLayout.newshape,C=R.plotinfo,D=C.xaxis,F=C.yaxis,N=!!C.domain||!C.xaxis,G=!!C.domain||!C.yaxis,U=R.isActiveShape,X=R.dragmode,I=(E.layout||{}).shapes||[];if(!n(X)&&U!==void 0){var B=E._fullLayout._activeShapeIndex;if(B<I.length)switch(E._fullLayout.shapes[B].type){case"rect":X="drawrect";break;case"circle":X="drawcircle";break;case"line":X="drawline";break;case"path":var j=I[B].path||"";j[j.length-1]==="Z"?X="drawclosedpath":X="drawopenpath";break}}var H=l(X),K=m(z,E,C,U),te={editable:!0,xref:N?"paper":D._id,yref:G?"paper":F._id,layer:S.layer,opacity:S.opacity,line:{color:S.line.color,width:S.line.width,dash:S.line.dash}};H||(te.fillcolor=S.fillcolor,te.fillrule=S.fillrule);var J;if(K.length===1&&(J=K[0]),J&&X==="drawrect")te.type="rect",te.x0=J[0][1],te.y0=J[0][2],te.x1=J[2][1],te.y1=J[2][2];else if(J&&X==="drawline")te.type="line",te.x0=J[0][1],te.y0=J[0][2],te.x1=J[1][1],te.y1=J[1][2];else if(J&&X==="drawcircle"){te.type="circle";var oe=J[t][1],ie=J[f][1],Q=J[a][1],V=J[o][1],se=J[t][2],re=J[f][2],ee=J[a][2],ae=J[o][2],fe=C.xaxis&&(C.xaxis.type==="date"||C.xaxis.type==="log"),de=C.yaxis&&(C.yaxis.type==="date"||C.yaxis.type==="log");fe&&(oe=p(C.xaxis,oe),ie=p(C.xaxis,ie),Q=p(C.xaxis,Q),V=p(C.xaxis,V)),de&&(se=p(C.yaxis,se),re=p(C.yaxis,re),ee=p(C.yaxis,ee),ae=p(C.yaxis,ae));var pe=(ie+V)/2,W=(se+ee)/2,ue=(V-ie+Q-oe)/2,me=(ae-re+ee-se)/2,be=T({x0:pe,y0:W,x1:pe+ue*u,y1:W+me*h});fe&&(be.x0=s(C.xaxis,be.x0),be.x1=s(C.xaxis,be.x1)),de&&(be.y0=s(C.yaxis,be.y0),be.y1=s(C.yaxis,be.y1)),te.x0=be.x0,te.y0=be.y0,te.x1=be.x1,te.y1=be.y1}else te.type="path",D&&F&&g(K,D,F),te.path=_(K),J=null;y(E);for(var ke=R.editHelpers,Pe=(ke||{}).modifyItem,je=[],ze=0;ze<I.length;ze++){var Ze=E._fullLayout.shapes[ze];if(je[ze]=Ze._input,U!==void 0&&ze===E._fullLayout._activeShapeIndex){var tt=te;switch(Ze.type){case"line":case"rect":case"circle":Pe("x0",tt.x0),Pe("x1",tt.x1),Pe("y0",tt.y0),Pe("y1",tt.y1);break;case"path":Pe("path",tt.path);break}}}return U===void 0?(je.push(te),je):ke?ke.getUpdateObj():{}}}};function g(A,k,R){var L=k.type==="date",z=R.type==="date";if(!L&&!z)return A;for(var E=0;E<A.length;E++)for(var S=0;S<A[E].length;S++)for(var C=0;C+2<A[E][S].length;C+=2)L&&(A[E][S][C+1]=A[E][S][C+1].replace(" ","_")),z&&(A[E][S][C+2]=A[E][S][C+2].replace(" ","_"));return A}},{"../../../plots/cartesian/handle_outline":838,"../../../plots/cartesian/helpers":839,"../../dragelement/helpers":661,"./constants":726,"./helpers":729}],731:[function(e,v,M){var r=e("./constants"),n=e("../../lib");M.rangeToShapePosition=function(l){return l.type==="log"?l.r2d:function(c){return c}},M.shapePositionToRange=function(l){return l.type==="log"?l.d2r:function(c){return c}},M.decodeDate=function(l){return function(c){return c.replace&&(c=c.replace("_"," ")),l(c)}},M.encodeDate=function(l){return function(c){return l(c).replace(" ","_")}},M.extractPathCoords=function(l,c){var t=[],f=l.match(r.segmentRE);return f.forEach(function(a){var o=c[a.charAt(0)].drawn;if(o!==void 0){var u=a.substr(1).match(r.paramRE);!u||u.length<o||t.push(n.cleanNumber(u[o]))}}),t},M.getDataToPixel=function(l,c,t,f){var a=l._fullLayout._size,o;if(c)if(f==="domain")o=function(h){return c._length*(t?1-h:h)+c._offset};else{var u=M.shapePositionToRange(c);o=function(h){return c._offset+c.r2p(u(h,!0))},c.type==="date"&&(o=M.decodeDate(o))}else t?o=function(h){return a.t+a.h*(1-h)}:o=function(h){return a.l+a.w*h};return o},M.getPixelToData=function(l,c,t,f){var a=l._fullLayout._size,o;if(c)if(f==="domain")o=function(h){var i=(h-c._offset)/c._length;return t?1-i:i};else{var u=M.rangeToShapePosition(c);o=function(h){return u(c.p2r(h-c._offset))}}else t?o=function(h){return 1-(h-a.t)/a.h}:o=function(h){return(h-a.l)/a.w};return o},M.roundPositionForSharpStrokeRendering=function(l,c){var t=Math.round(c%2)===1,f=Math.round(l);return t?f+.5:f},M.makeOptionsAndPlotinfo=function(l,c){var t=l._fullLayout.shapes[c]||{},f=l._fullLayout._plots[t.xref+t.yref],a=!!f;return a?f._hadPlotinfo=!0:(f={},t.xref&&t.xref!=="paper"&&(f.xaxis=l._fullLayout[t.xref+"axis"]),t.yref&&t.yref!=="paper"&&(f.yaxis=l._fullLayout[t.yref+"axis"])),f.xsizemode=t.xsizemode,f.ysizemode=t.ysizemode,f.xanchor=t.xanchor,f.yanchor=t.yanchor,{options:t,plotinfo:f}}},{"../../lib":778,"./constants":722}],732:[function(e,v,M){var r=e("./draw");v.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":840,"./attributes":720,"./calc_autorange":721,"./defaults":723,"./draw":724,"./draw_newshape/defaults":727}],733:[function(e,v,M){var r=e("../../plots/font_attributes"),n=e("../../plots/pad_attributes"),l=e("../../lib/extend").extendDeepAll,c=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/animation_attributes"),f=e("../../plot_api/plot_template").templatedArray,a=e("./constants"),o=f("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});v.exports=c(f("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:o,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:l(n({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:t.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:r({})},font:r({}),activebgcolor:{valType:"color",dflt:a.gripBgActiveColor},bgcolor:{valType:"color",dflt:a.railBgColor},bordercolor:{valType:"color",dflt:a.railBorderColor},borderwidth:{valType:"number",min:0,dflt:a.railBorderWidth},ticklen:{valType:"number",min:0,dflt:a.tickLength},tickcolor:{valType:"color",dflt:a.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:a.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/animation_attributes":822,"../../plots/font_attributes":856,"../../plots/pad_attributes":890,"./constants":734}],734:[function(e,v,M){v.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],735:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/array_container_defaults"),l=e("./attributes"),c=e("./constants"),t=c.name,f=l.steps;v.exports=function(h,i){n(h,i,{name:t,handleItemDefaults:a})};function a(u,h,i){function s(g,A){return r.coerce(u,h,l,g,A)}for(var p=n(u,h,{name:"steps",handleItemDefaults:o}),d=0,y=0;y<p.length;y++)p[y].visible&&d++;var b;if(d<2?b=h.visible=!1:b=s("visible"),!!b){h._stepCount=d;var m=h._visibleSteps=r.filterVisible(p),_=s("active");(p[_]||{}).visible||(h.active=m[0]._index),s("x"),s("y"),r.noneOrAll(u,h,["x","y"]),s("xanchor"),s("yanchor"),s("len"),s("lenmode"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),r.coerceFont(s,"font",i.font);var T=s("currentvalue.visible");T&&(s("currentvalue.xanchor"),s("currentvalue.prefix"),s("currentvalue.suffix"),s("currentvalue.offset"),r.coerceFont(s,"currentvalue.font",h.font)),s("transition.duration"),s("transition.easing"),s("bgcolor"),s("activebgcolor"),s("bordercolor"),s("borderwidth"),s("ticklen"),s("tickwidth"),s("tickcolor"),s("minorticklen")}}function o(u,h){function i(d,y){return r.coerce(u,h,f,d,y)}var s;if(u.method!=="skip"&&!Array.isArray(u.args)?s=h.visible=!1:s=i("visible"),s){i("method"),i("args");var p=i("label","step-"+h._index);i("value",p),i("execute")}}},{"../../lib":778,"../../plots/array_container_defaults":823,"./attributes":733,"./constants":734}],736:[function(e,v,M){var r=e("d3"),n=e("../../plots/plots"),l=e("../color"),c=e("../drawing"),t=e("../../lib"),f=t.strTranslate,a=e("../../lib/svg_text_utils"),o=e("../../plot_api/plot_template").arrayEditor,u=e("./constants"),h=e("../../constants/alignment"),i=h.LINE_SPACING,s=h.FROM_TL,p=h.FROM_BR;v.exports=function(X){var I=X._fullLayout,B=y(I,X),j=I._infolayer.selectAll("g."+u.containerClassName).data(B.length>0?[0]:[]);j.enter().append("g").classed(u.containerClassName,!0).style("cursor","ew-resize");function H(oe){oe._commandObserver&&(oe._commandObserver.remove(),delete oe._commandObserver),n.autoMargin(X,d(oe))}if(j.exit().each(function(){r.select(this).selectAll("g."+u.groupClassName).each(H)}).remove(),B.length!==0){var K=j.selectAll("g."+u.groupClassName).data(B,b);K.enter().append("g").classed(u.groupClassName,!0),K.exit().each(H).remove();for(var te=0;te<B.length;te++){var J=B[te];m(X,J)}K.each(function(oe){var ie=r.select(this);S(oe),n.manageCommandObserver(X,oe,oe._visibleSteps,function(Q){var V=ie.data()[0];V.active!==Q.index&&(V._dragging||L(X,ie,V,Q.index,!1,!0))}),_(X,r.select(this),oe)})}};function d(U){return u.autoMarginIdRoot+U._index}function y(U,X){for(var I=U[u.name],B=[],j=0;j<I.length;j++){var H=I[j];H.visible&&(H._gd=X,B.push(H))}return B}function b(U){return U._index}function m(U,X){var I=c.tester.selectAll("g."+u.labelGroupClass).data(X._visibleSteps);I.enter().append("g").classed(u.labelGroupClass,!0);var B=0,j=0;I.each(function(re){var ee=r.select(this),ae=A(ee,{step:re},X),fe=ae.node();if(fe){var de=c.bBox(fe);j=Math.max(j,de.height),B=Math.max(B,de.width)}}),I.remove();var H=X._dims={};H.inputAreaWidth=Math.max(u.railWidth,u.gripHeight);var K=U._fullLayout._size;H.lx=K.l+K.w*X.x,H.ly=K.t+K.h*(1-X.y),X.lenmode==="fraction"?H.outerLength=Math.round(K.w*X.len):H.outerLength=X.len,H.inputAreaStart=0,H.inputAreaLength=Math.round(H.outerLength-X.pad.l-X.pad.r);var te=H.inputAreaLength-2*u.stepInset,J=te/(X._stepCount-1),oe=B+u.labelPadding;if(H.labelStride=Math.max(1,Math.ceil(oe/J)),H.labelHeight=j,H.currentValueMaxWidth=0,H.currentValueHeight=0,H.currentValueTotalHeight=0,H.currentValueMaxLines=1,X.currentvalue.visible){var ie=c.tester.append("g");I.each(function(re){var ee=T(ie,X,re.label),ae=ee.node()&&c.bBox(ee.node())||{width:0,height:0},fe=a.lineCount(ee);H.currentValueMaxWidth=Math.max(H.currentValueMaxWidth,Math.ceil(ae.width)),H.currentValueHeight=Math.max(H.currentValueHeight,Math.ceil(ae.height)),H.currentValueMaxLines=Math.max(H.currentValueMaxLines,fe)}),H.currentValueTotalHeight=H.currentValueHeight+X.currentvalue.offset,ie.remove()}H.height=H.currentValueTotalHeight+u.tickOffset+X.ticklen+u.labelOffset+H.labelHeight+X.pad.t+X.pad.b;var Q="left";t.isRightAnchor(X)&&(H.lx-=H.outerLength,Q="right"),t.isCenterAnchor(X)&&(H.lx-=H.outerLength/2,Q="center");var V="top";t.isBottomAnchor(X)&&(H.ly-=H.height,V="bottom"),t.isMiddleAnchor(X)&&(H.ly-=H.height/2,V="middle"),H.outerLength=Math.ceil(H.outerLength),H.height=Math.ceil(H.height),H.lx=Math.round(H.lx),H.ly=Math.round(H.ly);var se={y:X.y,b:H.height*p[V],t:H.height*s[V]};X.lenmode==="fraction"?(se.l=0,se.xl=X.x-X.len*s[Q],se.r=0,se.xr=X.x+X.len*p[Q]):(se.x=X.x,se.l=H.outerLength*s[Q],se.r=H.outerLength*p[Q]),n.autoMargin(U,d(X),se)}function _(U,X,I){(I.steps[I.active]||{}).visible||(I.active=I._visibleSteps[0]._index),X.call(T,I).call(G,I).call(k,I).call(E,I).call(N,U,I).call(g,U,I);var B=I._dims;c.setTranslate(X,B.lx+I.pad.l,B.ly+I.pad.t),X.call(C,I,!1),X.call(T,I)}function T(U,X,I){if(X.currentvalue.visible){var B=X._dims,j,H;switch(X.currentvalue.xanchor){case"right":j=B.inputAreaLength-u.currentValueInset-B.currentValueMaxWidth,H="left";break;case"center":j=B.inputAreaLength*.5,H="middle";break;default:j=u.currentValueInset,H="left"}var K=t.ensureSingle(U,"text",u.labelClass,function(V){V.attr({"text-anchor":H,"data-notex":1})}),te=X.currentvalue.prefix?X.currentvalue.prefix:"";if(typeof I=="string")te+=I;else{var J=X.steps[X.active].label,oe=X._gd._fullLayout._meta;oe&&(J=t.templateString(J,oe)),te+=J}X.currentvalue.suffix&&(te+=X.currentvalue.suffix),K.call(c.font,X.currentvalue.font).text(te).call(a.convertToTspans,X._gd);var ie=a.lineCount(K),Q=(B.currentValueMaxLines+1-ie)*X.currentvalue.font.size*i;return a.positionText(K,j,Q),K}}function g(U,X,I){var B=t.ensureSingle(U,"rect",u.gripRectClass,function(j){j.call(z,X,U,I).style("pointer-events","all")});B.attr({width:u.gripWidth,height:u.gripHeight,rx:u.gripRadius,ry:u.gripRadius}).call(l.stroke,I.bordercolor).call(l.fill,I.bgcolor).style("stroke-width",I.borderwidth+"px")}function A(U,X,I){var B=t.ensureSingle(U,"text",u.labelClass,function(K){K.attr({"text-anchor":"middle","data-notex":1})}),j=X.step.label,H=I._gd._fullLayout._meta;return H&&(j=t.templateString(j,H)),B.call(c.font,I.font).text(j).call(a.convertToTspans,I._gd),B}function k(U,X){var I=t.ensureSingle(U,"g",u.labelsClass),B=X._dims,j=I.selectAll("g."+u.labelGroupClass).data(B.labelSteps);j.enter().append("g").classed(u.labelGroupClass,!0),j.exit().remove(),j.each(function(H){var K=r.select(this);K.call(A,H,X),c.setTranslate(K,D(X,H.fraction),u.tickOffset+X.ticklen+X.font.size*i+u.labelOffset+B.currentValueTotalHeight)})}function R(U,X,I,B,j){var H=Math.round(B*(I._stepCount-1)),K=I._visibleSteps[H]._index;K!==I.active&&L(U,X,I,K,!0,j)}function L(U,X,I,B,j,H){var K=I.active;I.active=B,o(U.layout,u.name,I).applyUpdate("active",B);var te=I.steps[I.active];X.call(C,I,H),X.call(T,I),U.emit("plotly_sliderchange",{slider:I,step:I.steps[I.active],interaction:j,previousActive:K}),te&&te.method&&j&&(X._nextMethod?(X._nextMethod.step=te,X._nextMethod.doCallback=j,X._nextMethod.doTransition=H):(X._nextMethod={step:te,doCallback:j,doTransition:H},X._nextMethodRaf=window.requestAnimationFrame(function(){var J=X._nextMethod.step;J.method&&(J.execute&&n.executeAPICommand(U,J.method,J.args),X._nextMethod=null,X._nextMethodRaf=null)})))}function z(U,X,I){var B=I.node(),j=r.select(X);function H(){return I.data()[0]}U.on("mousedown",function(){var K=H();X.emit("plotly_sliderstart",{slider:K});var te=I.select("."+u.gripRectClass);r.event.stopPropagation(),r.event.preventDefault(),te.call(l.fill,K.activebgcolor);var J=F(K,r.mouse(B)[0]);R(X,I,K,J,!0),K._dragging=!0,j.on("mousemove",function(){var oe=H(),ie=F(oe,r.mouse(B)[0]);R(X,I,oe,ie,!1)}),j.on("mouseup",function(){var oe=H();oe._dragging=!1,te.call(l.fill,oe.bgcolor),j.on("mouseup",null),j.on("mousemove",null),X.emit("plotly_sliderend",{slider:oe,step:oe.steps[oe.active]})})})}function E(U,X){var I=U.selectAll("rect."+u.tickRectClass).data(X._visibleSteps),B=X._dims;I.enter().append("rect").classed(u.tickRectClass,!0),I.exit().remove(),I.attr({width:X.tickwidth+"px","shape-rendering":"crispEdges"}),I.each(function(j,H){var K=H%B.labelStride===0,te=r.select(this);te.attr({height:K?X.ticklen:X.minorticklen}).call(l.fill,X.tickcolor),c.setTranslate(te,D(X,H/(X._stepCount-1))-.5*X.tickwidth,(K?u.tickOffset:u.minorTickOffset)+B.currentValueTotalHeight)})}function S(U){var X=U._dims;X.labelSteps=[];for(var I=U._stepCount,B=0;B<I;B+=X.labelStride)X.labelSteps.push({fraction:B/(I-1),step:U._visibleSteps[B]})}function C(U,X,I){for(var B=U.select("rect."+u.gripRectClass),j=0,H=0;H<X._stepCount;H++)if(X._visibleSteps[H]._index===X.active){j=H;break}var K=D(X,j/(X._stepCount-1));if(!X._invokingCommand){var te=B;I&&X.transition.duration>0&&(te=te.transition().duration(X.transition.duration).ease(X.transition.easing)),te.attr("transform",f(K-u.gripWidth*.5,X._dims.currentValueTotalHeight))}}function D(U,X){var I=U._dims;return I.inputAreaStart+u.stepInset+(I.inputAreaLength-2*u.stepInset)*Math.min(1,Math.max(0,X))}function F(U,X){var I=U._dims;return Math.min(1,Math.max(0,(X-u.stepInset-I.inputAreaStart)/(I.inputAreaLength-2*u.stepInset-2*I.inputAreaStart)))}function N(U,X,I){var B=I._dims,j=t.ensureSingle(U,"rect",u.railTouchRectClass,function(H){H.call(z,X,U,I).style("pointer-events","all")});j.attr({width:B.inputAreaLength,height:Math.max(B.inputAreaWidth,u.tickOffset+I.ticklen+B.labelHeight)}).call(l.fill,I.bgcolor).attr("opacity",0),c.setTranslate(j,0,B.currentValueTotalHeight)}function G(U,X){var I=X._dims,B=I.inputAreaLength-u.railInset*2,j=t.ensureSingle(U,"rect",u.railRectClass);j.attr({width:B,height:u.railWidth,rx:u.railRadius,ry:u.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,X.bordercolor).call(l.fill,X.bgcolor).style("stroke-width",X.borderwidth+"px"),c.setTranslate(j,u.railInset,(I.inputAreaWidth-u.railWidth)*.5+I.currentValueTotalHeight)}},{"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plot_api/plot_template":817,"../../plots/plots":891,"../color":643,"../drawing":665,"./constants":734,d3:169}],737:[function(e,v,M){var r=e("./constants");v.exports={moduleType:"component",name:r.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":733,"./constants":734,"./defaults":735,"./draw":736}],738:[function(e,v,M){var r=e("d3"),n=e("fast-isnumeric"),l=e("../../plots/plots"),c=e("../../registry"),t=e("../../lib"),f=t.strTranslate,a=e("../drawing"),o=e("../color"),u=e("../../lib/svg_text_utils"),h=e("../../constants/interactions"),i=e("../../constants/alignment").OPPOSITE_SIDE,s=/ [XY][0-9]* /;function p(d,y,b){var m=b.propContainer,_=b.propName,T=b.placeholder,g=b.traceIndex,A=b.avoid||{},k=b.attributes,R=b.transform,L=b.containerGroup,z=d._fullLayout,E=1,S=!1,C=m.title,D=(C&&C.text?C.text:"").trim(),F=C&&C.font?C.font:{},N=F.family,G=F.size,U=F.color,X;_==="title.text"?X="titleText":_.indexOf("axis")!==-1?X="axisTitleText":_.indexOf("colorbar"!==-1)&&(X="colorbarTitleText");var I=d._context.edits[X];D===""?E=0:D.replace(s," % ")===T.replace(s," % ")&&(E=.2,S=!0,I||(D="")),b._meta?D=t.templateString(D,b._meta):z._meta&&(D=t.templateString(D,z._meta));var B=D||I;L||(L=t.ensureSingle(z._infolayer,"g","g-"+y));var j=L.selectAll("text").data(B?[0]:[]);if(j.enter().append("text"),j.text(D).attr("class",y),j.exit().remove(),!B)return L;function H(oe){t.syncOrAsync([K,te],oe)}function K(oe){var ie;return R?(ie="",R.rotate&&(ie+="rotate("+[R.rotate,k.x,k.y]+")"),R.offset&&(ie+=f(0,R.offset))):ie=null,oe.attr("transform",ie),oe.style({"font-family":N,"font-size":r.round(G,2)+"px",fill:o.rgb(U),opacity:E*o.opacity(U),"font-weight":l.fontWeight}).attr(k).call(u.convertToTspans,d),l.previousPromises(d)}function te(oe){var ie=r.select(oe.node().parentNode);if(A&&A.selection&&A.side&&D){ie.attr("transform",null);var Q=i[A.side],V=A.side==="left"||A.side==="top"?-1:1,se=n(A.pad)?A.pad:2,re=a.bBox(ie.node()),ee={left:0,top:0,right:z.width,bottom:z.height},ae=A.maxShift||V*(ee[A.side]-re[A.side]),fe=0;if(ae<0)fe=ae;else{var de=A.offsetLeft||0,pe=A.offsetTop||0;re.left-=de,re.right-=de,re.top-=pe,re.bottom-=pe,A.selection.each(function(){var ue=a.bBox(this);t.bBoxIntersect(re,ue,se)&&(fe=Math.max(fe,V*(ue[A.side]-re[Q])+se))}),fe=Math.min(ae,fe)}if(fe>0||ae<0){var W={left:[-fe,0],right:[fe,0],top:[0,-fe],bottom:[0,fe]}[A.side];ie.attr("transform",f(W[0],W[1]))}}}j.call(H);function J(){E=0,S=!0,j.text(T).on("mouseover.opacity",function(){r.select(this).transition().duration(h.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(h.HIDE_PLACEHOLDER).style("opacity",0)})}return I&&(D?j.on(".opacity",null):J(),j.call(u.makeEditable,{gd:d}).on("edit",function(oe){g!==void 0?c.call("_guiRestyle",d,_,oe,g):c.call("_guiRelayout",d,_,oe)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(H)}).on("input",function(oe){this.text(oe||" ").call(u.positionText,k.x,k.y)})),j.classed("js-placeholder",S),L}v.exports={draw:p}},{"../../constants/alignment":745,"../../constants/interactions":752,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../../registry":911,"../color":643,"../drawing":665,d3:169,"fast-isnumeric":241}],739:[function(e,v,M){var r=e("../../plots/font_attributes"),n=e("../color/attributes"),l=e("../../lib/extend").extendFlat,c=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/pad_attributes"),f=e("../../plot_api/plot_template").templatedArray,a=f("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});v.exports=c(f("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:l(t({editType:"arraydraw"}),{}),font:r({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:n.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/font_attributes":856,"../../plots/pad_attributes":890,"../color/attributes":642}],740:[function(e,v,M){v.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},{}],741:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/array_container_defaults"),l=e("./attributes"),c=e("./constants"),t=c.name,f=l.buttons;v.exports=function(h,i){var s={name:t,handleItemDefaults:a};n(h,i,s)};function a(u,h,i){function s(y,b){return r.coerce(u,h,l,y,b)}var p=n(u,h,{name:"buttons",handleItemDefaults:o}),d=s("visible",p.length>0);d&&(s("active"),s("direction"),s("type"),s("showactive"),s("x"),s("y"),r.noneOrAll(u,h,["x","y"]),s("xanchor"),s("yanchor"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),r.coerceFont(s,"font",i.font),s("bgcolor",i.paper_bgcolor),s("bordercolor"),s("borderwidth"))}function o(u,h){function i(p,d){return r.coerce(u,h,f,p,d)}var s=i("visible",u.method==="skip"||Array.isArray(u.args));s&&(i("method"),i("args"),i("args2"),i("label"),i("execute"))}},{"../../lib":778,"../../plots/array_container_defaults":823,"./attributes":739,"./constants":740}],742:[function(e,v,M){var r=e("d3"),n=e("../../plots/plots"),l=e("../color"),c=e("../drawing"),t=e("../../lib"),f=e("../../lib/svg_text_utils"),a=e("../../plot_api/plot_template").arrayEditor,o=e("../../constants/alignment").LINE_SPACING,u=e("./constants"),h=e("./scrollbox");v.exports=function(F){var N=F._fullLayout,G=t.filterVisible(N[u.name]);function U(J){n.autoMargin(F,E(J))}var X=N._menulayer.selectAll("g."+u.containerClassName).data(G.length>0?[0]:[]);if(X.enter().append("g").classed(u.containerClassName,!0).style("cursor","pointer"),X.exit().each(function(){r.select(this).selectAll("g."+u.headerGroupClassName).each(U)}).remove(),G.length!==0){var I=X.selectAll("g."+u.headerGroupClassName).data(G,i);I.enter().append("g").classed(u.headerGroupClassName,!0);for(var B=t.ensureSingle(X,"g",u.dropdownButtonGroupClassName,function(J){J.style("pointer-events","all")}),j=0;j<G.length;j++){var H=G[j];z(F,H)}var K="updatemenus"+N._uid,te=new h(F,B,K);I.enter().size()&&(B.node().parentNode.appendChild(B.node()),B.call(C)),I.exit().each(function(J){B.call(C),U(J)}).remove(),I.each(function(J){var oe=r.select(this),ie=J.type==="dropdown"?B:null;n.manageCommandObserver(F,J,J.buttons,function(Q){d(F,J,J.buttons[Q.index],oe,ie,te,Q.index,!0)}),J.type==="dropdown"?(y(F,oe,B,te,J),p(B,J)&&b(F,oe,B,te,J)):b(F,oe,null,null,J)})}};function i(D){return D._index}function s(D){return+D.attr(u.menuIndexAttrName)==-1}function p(D,F){return+D.attr(u.menuIndexAttrName)===F._index}function d(D,F,N,G,U,X,I,B){F.active=I,a(D.layout,u.name,F).applyUpdate("active",I),F.type==="buttons"?b(D,G,null,null,F):F.type==="dropdown"&&(U.attr(u.menuIndexAttrName,"-1"),y(D,G,U,X,F),B||b(D,G,U,X,F))}function y(D,F,N,G,U){var X=t.ensureSingle(F,"g",u.headerClassName,function(J){J.style("pointer-events","all")}),I=U._dims,B=U.active,j=U.buttons[B]||u.blankHeaderOpts,H={y:U.pad.t,yPad:0,x:U.pad.l,xPad:0,index:0},K={width:I.headerWidth,height:I.headerHeight};X.call(T,U,j,D).call(S,U,H,K);var te=t.ensureSingle(F,"text",u.headerArrowClassName,function(J){J.attr("text-anchor","end").call(c.font,U.font).text(u.arrowSymbol[U.direction])});te.attr({x:I.headerWidth-u.arrowOffsetX+U.pad.l,y:I.headerHeight/2+u.textOffsetY+U.pad.t}),X.on("click",function(){N.call(C,String(p(N,U)?-1:U._index)),b(D,F,N,G,U)}),X.on("mouseover",function(){X.call(R)}),X.on("mouseout",function(){X.call(L,U)}),c.setTranslate(F,I.lx,I.ly)}function b(D,F,N,G,U){N||(N=F,N.attr("pointer-events","all"));var X=!s(N)||U.type==="buttons"?U.buttons:[],I=U.type==="dropdown"?u.dropdownButtonClassName:u.buttonClassName,B=N.selectAll("g."+I).data(t.filterVisible(X)),j=B.enter().append("g").classed(I,!0),H=B.exit();U.type==="dropdown"?(j.attr("opacity","0").transition().attr("opacity","1"),H.transition().attr("opacity","0").remove()):H.remove();var K=0,te=0,J=U._dims,oe=["up","down"].indexOf(U.direction)!==-1;U.type==="dropdown"&&(oe?te=J.headerHeight+u.gapButtonHeader:K=J.headerWidth+u.gapButtonHeader),U.type==="dropdown"&&U.direction==="up"&&(te=-u.gapButtonHeader+u.gapButton-J.openHeight),U.type==="dropdown"&&U.direction==="left"&&(K=-u.gapButtonHeader+u.gapButton-J.openWidth);var ie={x:J.lx+K+U.pad.l,y:J.ly+te+U.pad.t,yPad:u.gapButton,xPad:u.gapButton,index:0},Q={l:ie.x+U.borderwidth,t:ie.y+U.borderwidth};B.each(function(V,se){var re=r.select(this);re.call(T,U,V,D).call(S,U,ie),re.on("click",function(){r.event.defaultPrevented||(V.execute&&(V.args2&&U.active===se?(d(D,U,V,F,N,G,-1),n.executeAPICommand(D,V.method,V.args2)):(d(D,U,V,F,N,G,se),n.executeAPICommand(D,V.method,V.args))),D.emit("plotly_buttonclicked",{menu:U,button:V,active:U.active}))}),re.on("mouseover",function(){re.call(R)}),re.on("mouseout",function(){re.call(L,U),B.call(k,U)})}),B.call(k,U),oe?(Q.w=Math.max(J.openWidth,J.headerWidth),Q.h=ie.y-Q.t):(Q.w=ie.x-Q.l,Q.h=Math.max(J.openHeight,J.headerHeight)),Q.direction=U.direction,G&&(B.size()?m(D,F,N,G,U,Q):_(G))}function m(D,F,N,G,U,X){var I=U.direction,B=I==="up"||I==="down",j=U._dims,H=U.active,K,te,J;if(B)for(te=0,J=0;J<H;J++)te+=j.heights[J]+u.gapButton;else for(K=0,J=0;J<H;J++)K+=j.widths[J]+u.gapButton;G.enable(X,K,te),G.hbar&&G.hbar.attr("opacity","0").transition().attr("opacity","1"),G.vbar&&G.vbar.attr("opacity","0").transition().attr("opacity","1")}function _(D){var F=!!D.hbar,N=!!D.vbar;F&&D.hbar.transition().attr("opacity","0").each("end",function(){F=!1,N||D.disable()}),N&&D.vbar.transition().attr("opacity","0").each("end",function(){N=!1,F||D.disable()})}function T(D,F,N,G){D.call(g,F).call(A,F,N,G)}function g(D,F){var N=t.ensureSingle(D,"rect",u.itemRectClassName,function(G){G.attr({rx:u.rx,ry:u.ry,"shape-rendering":"crispEdges"})});N.call(l.stroke,F.bordercolor).call(l.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function A(D,F,N,G){var U=t.ensureSingle(D,"text",u.itemTextClassName,function(B){B.attr({"text-anchor":"start","data-notex":1})}),X=N.label,I=G._fullLayout._meta;I&&(X=t.templateString(X,I)),U.call(c.font,F.font).text(X).call(f.convertToTspans,G)}function k(D,F){var N=F.active;D.each(function(G,U){var X=r.select(this);U===N&&F.showactive&&X.select("rect."+u.itemRectClassName).call(l.fill,u.activeColor)})}function R(D){D.select("rect."+u.itemRectClassName).call(l.fill,u.hoverColor)}function L(D,F){D.select("rect."+u.itemRectClassName).call(l.fill,F.bgcolor)}function z(D,F){var N=F._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},G=c.tester.selectAll("g."+u.dropdownButtonClassName).data(t.filterVisible(F.buttons));G.enter().append("g").classed(u.dropdownButtonClassName,!0);var U=["up","down"].indexOf(F.direction)!==-1;G.each(function(K,te){var J=r.select(this);J.call(T,F,K,D);var oe=J.select("."+u.itemTextClassName),ie=oe.node()&&c.bBox(oe.node()).width,Q=Math.max(ie+u.textPadX,u.minWidth),V=F.font.size*o,se=f.lineCount(oe),re=Math.max(V*se,u.minHeight)+u.textOffsetY;re=Math.ceil(re),Q=Math.ceil(Q),N.widths[te]=Q,N.heights[te]=re,N.height1=Math.max(N.height1,re),N.width1=Math.max(N.width1,Q),U?(N.totalWidth=Math.max(N.totalWidth,Q),N.openWidth=N.totalWidth,N.totalHeight+=re+u.gapButton,N.openHeight+=re+u.gapButton):(N.totalWidth+=Q+u.gapButton,N.openWidth+=Q+u.gapButton,N.totalHeight=Math.max(N.totalHeight,re),N.openHeight=N.totalHeight)}),U?N.totalHeight-=u.gapButton:N.totalWidth-=u.gapButton,N.headerWidth=N.width1+u.arrowPadX,N.headerHeight=N.height1,F.type==="dropdown"&&(U?(N.width1+=u.arrowPadX,N.totalHeight=N.height1):N.totalWidth=N.width1,N.totalWidth+=u.arrowPadX),G.remove();var X=N.totalWidth+F.pad.l+F.pad.r,I=N.totalHeight+F.pad.t+F.pad.b,B=D._fullLayout._size;N.lx=B.l+B.w*F.x,N.ly=B.t+B.h*(1-F.y);var j="left";t.isRightAnchor(F)&&(N.lx-=X,j="right"),t.isCenterAnchor(F)&&(N.lx-=X/2,j="center");var H="top";t.isBottomAnchor(F)&&(N.ly-=I,H="bottom"),t.isMiddleAnchor(F)&&(N.ly-=I/2,H="middle"),N.totalWidth=Math.ceil(N.totalWidth),N.totalHeight=Math.ceil(N.totalHeight),N.lx=Math.round(N.lx),N.ly=Math.round(N.ly),n.autoMargin(D,E(F),{x:F.x,y:F.y,l:X*({right:1,center:.5}[j]||0),r:X*({left:1,center:.5}[j]||0),b:I*({top:1,middle:.5}[H]||0),t:I*({bottom:1,middle:.5}[H]||0)})}function E(D){return u.autoMarginIdRoot+D._index}function S(D,F,N,G){G=G||{};var U=D.select("."+u.itemRectClassName),X=D.select("."+u.itemTextClassName),I=F.borderwidth,B=N.index,j=F._dims;c.setTranslate(D,I+N.x,I+N.y);var H=["up","down"].indexOf(F.direction)!==-1,K=G.height||(H?j.heights[B]:j.height1);U.attr({x:0,y:0,width:G.width||(H?j.width1:j.widths[B]),height:K});var te=F.font.size*o,J=f.lineCount(X),oe=(J-1)*te/2;f.positionText(X,u.textOffsetX,K/2-oe+u.textOffsetY),H?N.y+=j.heights[B]+N.yPad:N.x+=j.widths[B]+N.xPad,N.index++}function C(D,F){D.attr(u.menuIndexAttrName,F||"-1").selectAll("g."+u.dropdownButtonClassName).remove()}},{"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plot_api/plot_template":817,"../../plots/plots":891,"../color":643,"../drawing":665,"./constants":740,"./scrollbox":744,d3:169}],743:[function(e,v,M){arguments[4][737][0].apply(M,arguments)},{"./attributes":739,"./constants":740,"./defaults":741,"./draw":742,dup:737}],744:[function(e,v,M){v.exports=t;var r=e("d3"),n=e("../color"),l=e("../drawing"),c=e("../../lib");function t(f,a,o){this.gd=f,this.container=a,this.id=o,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}t.barWidth=2,t.barLength=20,t.barRadius=2,t.barPad=1,t.barColor="#808BA4",t.prototype.enable=function(a,o,u){var h=this.gd._fullLayout,i=h.width,s=h.height;this.position=a;var p=this.position.l,d=this.position.w,y=this.position.t,b=this.position.h,m=this.position.direction,_=m==="down",T=m==="left",g=m==="right",A=m==="up",k=d,R=b,L,z,E,S;!_&&!T&&!g&&!A&&(this.position.direction="down",_=!0);var C=_||A;C?(L=p,z=L+k,_?(E=y,S=Math.min(E+R,s),R=S-E):(S=y+R,E=Math.max(S-R,0),R=S-E)):(E=y,S=E+R,T?(z=p+k,L=Math.max(z-k,0),k=z-L):(L=p,z=Math.min(L+k,i),k=z-L)),this._box={l:L,t:E,w:k,h:R};var D=d>k,F=t.barLength+2*t.barPad,N=t.barWidth+2*t.barPad,G=p,U=y+b;U+N>s&&(U=s-N);var X=this.container.selectAll("rect.scrollbar-horizontal").data(D?[0]:[]);X.exit().on(".drag",null).remove(),X.enter().append("rect").classed("scrollbar-horizontal",!0).call(n.fill,t.barColor),D?(this.hbar=X.attr({rx:t.barRadius,ry:t.barRadius,x:G,y:U,width:F,height:N}),this._hbarXMin=G+F/2,this._hbarTranslateMax=k-F):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var I=b>R,B=t.barWidth+2*t.barPad,j=t.barLength+2*t.barPad,H=p+d,K=y;H+B>i&&(H=i-B);var te=this.container.selectAll("rect.scrollbar-vertical").data(I?[0]:[]);te.exit().on(".drag",null).remove(),te.enter().append("rect").classed("scrollbar-vertical",!0).call(n.fill,t.barColor),I?(this.vbar=te.attr({rx:t.barRadius,ry:t.barRadius,x:H,y:K,width:B,height:j}),this._vbarYMin=K+j/2,this._vbarTranslateMax=R-j):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var J=this.id,oe=L-.5,ie=I?z+B+.5:z+.5,Q=E-.5,V=D?S+N+.5:S+.5,se=h._topdefs.selectAll("#"+J).data(D||I?[0]:[]);if(se.exit().remove(),se.enter().append("clipPath").attr("id",J).append("rect"),D||I?(this._clipRect=se.select("rect").attr({x:Math.floor(oe),y:Math.floor(Q),width:Math.ceil(ie)-Math.floor(oe),height:Math.ceil(V)-Math.floor(Q)}),this.container.call(l.setClipUrl,J,this.gd),this.bg.attr({x:p,y,width:d,height:b})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),D||I){var re=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(re);var ee=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault(),r.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));D&&this.hbar.on(".drag",null).call(ee),I&&this.vbar.on(".drag",null).call(ee)}this.setTranslate(o,u)},t.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},t.prototype._onBoxDrag=function(){var a=this.translateX,o=this.translateY;this.hbar&&(a-=r.event.dx),this.vbar&&(o-=r.event.dy),this.setTranslate(a,o)},t.prototype._onBoxWheel=function(){var a=this.translateX,o=this.translateY;this.hbar&&(a+=r.event.deltaY),this.vbar&&(o+=r.event.deltaY),this.setTranslate(a,o)},t.prototype._onBarDrag=function(){var a=this.translateX,o=this.translateY;if(this.hbar){var u=a+this._hbarXMin,h=u+this._hbarTranslateMax,i=c.constrain(r.event.x,u,h),s=(i-u)/(h-u),p=this.position.w-this._box.w;a=s*p}if(this.vbar){var d=o+this._vbarYMin,y=d+this._vbarTranslateMax,b=c.constrain(r.event.y,d,y),m=(b-d)/(y-d),_=this.position.h-this._box.h;o=m*_}this.setTranslate(a,o)},t.prototype.setTranslate=function(a,o){var u=this.position.w-this._box.w,h=this.position.h-this._box.h;if(a=c.constrain(a||0,0,u),o=c.constrain(o||0,0,h),this.translateX=a,this.translateY=o,this.container.call(l.setTranslate,this._box.l-this.position.l-a,this._box.t-this.position.t-o),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+a-.5),y:Math.floor(this.position.t+o-.5)}),this.hbar){var i=a/u;this.hbar.call(l.setTranslate,a+i*this._hbarTranslateMax,o)}if(this.vbar){var s=o/h;this.vbar.call(l.setTranslate,a,o+s*this._vbarTranslateMax)}}},{"../../lib":778,"../color":643,"../drawing":665,d3:169}],745:[function(e,v,M){v.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],746:[function(e,v,M){v.exports={axisRefDescription:function(r,n,l){return["If set to a",r,"axis id (e.g. *"+r+"* or","*"+r+"2*), the `"+r+"` position refers to a",r,"coordinate. If set to *paper*, the `"+r+"`","position refers to the distance from the",n,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",n,"("+l+"). If set to a",r,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",n,"of the domain of that axis: e.g.,","*"+r+"2 domain* refers to the domain of the second",r," axis and a",r,"position of 0.5 refers to the","point between the",n,"and the",l,"of the domain of the","second",r,"axis."].join(" ")}}},{}],747:[function(e,v,M){v.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},{}],748:[function(e,v,M){v.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],749:[function(e,v,M){v.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],750:[function(e,v,M){v.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],751:[function(e,v,M){v.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},{}],752:[function(e,v,M){v.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],753:[function(e,v,M){v.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"−"}},{}],754:[function(e,v,M){M.xmlns="http://www.w3.org/2000/xmlns/",M.svg="http://www.w3.org/2000/svg",M.xlink="http://www.w3.org/1999/xlink",M.svgAttrs={xmlns:M.svg,"xmlns:xlink":M.xlink}},{}],755:[function(e,v,M){M.version=e("./version").version,e("es6-promise").polyfill(),e("../build/plotcss"),e("./fonts/mathjax_config")();for(var r=e("./registry"),n=M.register=r.register,l=e("./plot_api"),c=Object.keys(l),t=0;t<c.length;t++){var f=c[t];f.charAt(0)!=="_"&&(M[f]=l[f]),n({moduleType:"apiMethod",name:f,fn:l[f]})}n(e("./traces/scatter")),n([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar")]),n([e("./locale-en"),e("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(n(window.PlotlyLocales),delete window.PlotlyLocales),M.Icons=e("./fonts/ploticon"),M.Plots=e("./plots/plots"),M.Fx=e("./components/fx"),M.Snapshot=e("./snapshot"),M.PlotSchema=e("./plot_api/plot_schema"),M.Queue=e("./lib/queue"),M.d3=e("d3")},{"../build/plotcss":1,"./components/annotations":634,"./components/annotations3d":639,"./components/colorbar":649,"./components/colorscale":655,"./components/errorbars":671,"./components/fx":683,"./components/grid":687,"./components/images":692,"./components/legend":700,"./components/rangeselector":711,"./components/rangeslider":718,"./components/shapes":732,"./components/sliders":737,"./components/updatemenus":743,"./fonts/mathjax_config":756,"./fonts/ploticon":757,"./lib/queue":794,"./locale-en":808,"./locale-en-us":807,"./plot_api":812,"./plot_api/plot_schema":816,"./plots/plots":891,"./registry":911,"./snapshot":916,"./traces/scatter":1199,"./version":1370,d3:169,"es6-promise":224}],756:[function(e,v,M){v.exports=function(){if(typeof MathJax<"u"){var r=(window.PlotlyConfig||{}).MathJaxConfig!=="local";r&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}}},{}],757:[function(e,v,M){v.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],758:[function(e,v,M){M.isLeftAnchor=function(n){return n.xanchor==="left"||n.xanchor==="auto"&&n.x<=1/3},M.isCenterAnchor=function(n){return n.xanchor==="center"||n.xanchor==="auto"&&n.x>1/3&&n.x<2/3},M.isRightAnchor=function(n){return n.xanchor==="right"||n.xanchor==="auto"&&n.x>=2/3},M.isTopAnchor=function(n){return n.yanchor==="top"||n.yanchor==="auto"&&n.y>=2/3},M.isMiddleAnchor=function(n){return n.yanchor==="middle"||n.yanchor==="auto"&&n.y>1/3&&n.y<2/3},M.isBottomAnchor=function(n){return n.yanchor==="bottom"||n.yanchor==="auto"&&n.y<=1/3}},{}],759:[function(e,v,M){var r=e("./mod"),n=r.mod,l=r.modHalf,c=Math.PI,t=2*c;function f(m){return m/180*c}function a(m){return m/c*180}function o(m){return Math.abs(m[1]-m[0])>t-1e-14}function u(m,_){return l(_-m,t)}function h(m,_){return Math.abs(u(m,_))}function i(m,_){if(o(_))return!0;var T,g;_[0]<_[1]?(T=_[0],g=_[1]):(T=_[1],g=_[0]),T=n(T,t),g=n(g,t),T>g&&(g+=t);var A=n(m,t),k=A+t;return A>=T&&A<=g||k>=T&&k<=g}function s(m,_,T,g){if(!i(_,g))return!1;var A,k;return T[0]<T[1]?(A=T[0],k=T[1]):(A=T[1],k=T[0]),m>=A&&m<=k}function p(m,_,T,g,A,k,R){A=A||0,k=k||0;var L=o([T,g]),z,E,S,C,D;L?(z=0,E=c,S=t):T<g?(z=T,S=g):(z=g,S=T),m<_?(C=m,D=_):(C=_,D=m);function F(X,I){return[X*Math.cos(I)+A,k-X*Math.sin(I)]}var N=Math.abs(S-z)<=c?0:1;function G(X,I,B){return"A"+[X,X]+" "+[0,N,B]+" "+F(X,I)}var U;return L?C===null?U="M"+F(D,z)+G(D,E,0)+G(D,S,0)+"Z":U="M"+F(C,z)+G(C,E,0)+G(C,S,0)+"ZM"+F(D,z)+G(D,E,1)+G(D,S,1)+"Z":C===null?(U="M"+F(D,z)+G(D,S,0),R&&(U+="L0,0Z")):U="M"+F(C,z)+"L"+F(D,z)+G(D,S,0)+"L"+F(C,S)+G(C,z,1)+"Z",U}function d(m,_,T,g,A){return p(null,m,_,T,g,A,0)}function y(m,_,T,g,A){return p(null,m,_,T,g,A,1)}function b(m,_,T,g,A,k){return p(m,_,T,g,A,k,1)}v.exports={deg2rad:f,rad2deg:a,angleDelta:u,angleDist:h,isFullCircle:o,isAngleInsideSector:i,isPtInsideSector:s,pathArc:d,pathSector:y,pathAnnulus:b}},{"./mod":785}],760:[function(e,v,M){var r=Array.isArray,n=typeof ArrayBuffer>"u"||!ArrayBuffer.isView?{isView:function(){return!1}}:ArrayBuffer,l=typeof DataView>"u"?function(){}:DataView;function c(o){return n.isView(o)&&!(o instanceof l)}M.isTypedArray=c;function t(o){return r(o)||c(o)}M.isArrayOrTypedArray=t;function f(o){return!t(o[0])}M.isArray1D=f,M.ensureArray=function(o,u){return r(o)||(o=[]),o.length=u,o},M.concat=function(){var o=[],u=!0,h=0,i,s,p,d,y,b,m,_;for(p=0;p<arguments.length;p++)d=arguments[p],b=d.length,b&&(s?o.push(d):(s=d,y=b),r(d)?i=!1:(u=!1,h?i!==d.constructor&&(i=!1):i=d.constructor),h+=b);if(!h)return[];if(!o.length)return s;if(u)return s.concat.apply(s,o);if(i){for(m=new i(h),m.set(s),p=0;p<o.length;p++)d=o[p],m.set(d,y),y+=d.length;return m}for(m=new Array(h),_=0;_<s.length;_++)m[_]=s[_];for(p=0;p<o.length;p++){for(d=o[p],_=0;_<d.length;_++)m[y+_]=d[_];y+=_}return m},M.maxRowLength=function(o){return a(o,Math.max,0)},M.minRowLength=function(o){return a(o,Math.min,1/0)};function a(o,u,h){if(t(o))if(t(o[0])){for(var i=h,s=0;s<o.length;s++)i=u(i,o[s].length);return i}else return o.length;return 0}},{}],761:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../constants/numerical").BADNUM,l=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;v.exports=function(t){return typeof t=="string"&&(t=t.replace(l,"")),r(t)?Number(t):n}},{"../constants/numerical":753,"fast-isnumeric":241}],762:[function(e,v,M){v.exports=function(n){var l=n._fullLayout;l._glcanvas&&l._glcanvas.size()&&l._glcanvas.each(function(c){c.regl&&c.regl.clear({color:!0,depth:!0})})}},{}],763:[function(e,v,M){v.exports=function(n){n._responsiveChartHandler&&(window.removeEventListener("resize",n._responsiveChartHandler),delete n._responsiveChartHandler)}},{}],764:[function(e,v,M){var r=e("fast-isnumeric"),n=e("tinycolor2"),l=e("../plots/attributes"),c=e("../components/colorscale/scales"),t=e("../constants/interactions").DESELECTDIM,f=e("./nested_property"),a=e("./regex").counter,o=e("./mod").modHalf,u=e("./array").isArrayOrTypedArray;M.valObjectMeta={data_array:{coerceFunction:function(i,s,p){u(i)?s.set(i):p!==void 0&&s.set(p)}},enumerated:{coerceFunction:function(i,s,p,d){d.coerceNumber&&(i=+i),d.values.indexOf(i)===-1?s.set(p):s.set(i)},validateFunction:function(i,s){s.coerceNumber&&(i=+i);for(var p=s.values,d=0;d<p.length;d++){var y=String(p[d]);if(y.charAt(0)==="/"&&y.charAt(y.length-1)==="/"){var b=new RegExp(y.substr(1,y.length-2));if(b.test(i))return!0}else if(i===p[d])return!0}return!1}},boolean:{coerceFunction:function(i,s,p){i===!0||i===!1?s.set(i):s.set(p)}},number:{coerceFunction:function(i,s,p,d){!r(i)||d.min!==void 0&&i<d.min||d.max!==void 0&&i>d.max?s.set(p):s.set(+i)}},integer:{coerceFunction:function(i,s,p,d){i%1||!r(i)||d.min!==void 0&&i<d.min||d.max!==void 0&&i>d.max?s.set(p):s.set(+i)}},string:{coerceFunction:function(i,s,p,d){if(typeof i!="string"){var y=typeof i=="number";d.strict===!0||!y?s.set(p):s.set(String(i))}else d.noBlank&&!i?s.set(p):s.set(i)}},color:{coerceFunction:function(i,s,p){n(i).isValid()?s.set(i):s.set(p)}},colorlist:{coerceFunction:function(i,s,p){function d(y){return n(y).isValid()}!Array.isArray(i)||!i.length?s.set(p):i.every(d)?s.set(i):s.set(p)}},colorscale:{coerceFunction:function(i,s,p){s.set(c.get(i,p))}},angle:{coerceFunction:function(i,s,p){i==="auto"?s.set("auto"):r(i)?s.set(o(+i,360)):s.set(p)}},subplotid:{coerceFunction:function(i,s,p,d){var y=d.regex||a(p);if(typeof i=="string"&&y.test(i)){s.set(i);return}s.set(p)},validateFunction:function(i,s){var p=s.dflt;return i===p?!0:typeof i!="string"?!1:!!a(p).test(i)}},flaglist:{coerceFunction:function(i,s,p,d){if(typeof i!="string"){s.set(p);return}if((d.extras||[]).indexOf(i)!==-1){s.set(i);return}for(var y=i.split("+"),b=0;b<y.length;){var m=y[b];d.flags.indexOf(m)===-1||y.indexOf(m)<b?y.splice(b,1):b++}y.length?s.set(y.join("+")):s.set(p)}},any:{coerceFunction:function(i,s,p){i===void 0?s.set(p):s.set(i)}},info_array:{coerceFunction:function(i,s,p,d){function y(D,F,N){var G,U={set:function(X){G=X}};return N===void 0&&(N=F.dflt),M.valObjectMeta[F.valType].coerceFunction(D,U,N,F),G}var b=d.dimensions===2||d.dimensions==="1-2"&&Array.isArray(i)&&Array.isArray(i[0]);if(!Array.isArray(i)){s.set(p);return}var m=d.items,_=[],T=Array.isArray(m),g=T&&b&&Array.isArray(m[0]),A=b&&T&&!g,k=T&&!A?m.length:i.length,R,L,z,E,S,C;if(p=Array.isArray(p)?p:[],b)for(R=0;R<k;R++)for(_[R]=[],z=Array.isArray(i[R])?i[R]:[],A?S=m.length:T?S=m[R].length:S=z.length,L=0;L<S;L++)A?E=m[L]:T?E=m[R][L]:E=m,C=y(z[L],E,(p[R]||[])[L]),C!==void 0&&(_[R][L]=C);else for(R=0;R<k;R++)C=y(i[R],T?m[R]:m,p[R]),C!==void 0&&(_[R]=C);s.set(_)},validateFunction:function(i,s){if(!Array.isArray(i))return!1;var p=s.items,d=Array.isArray(p),y=s.dimensions===2;if(!s.freeLength&&i.length!==p.length)return!1;for(var b=0;b<i.length;b++)if(y){if(!Array.isArray(i[b])||!s.freeLength&&i[b].length!==p[b].length)return!1;for(var m=0;m<i[b].length;m++)if(!h(i[b][m],d?p[b][m]:p))return!1}else if(!h(i[b],d?p[b]:p))return!1;return!0}}},M.coerce=function(i,s,p,d,y){var b=f(p,d).get(),m=f(i,d),_=f(s,d),T=m.get(),g=s._template;if(T===void 0&&g&&(T=f(g,d).get(),g=0),y===void 0&&(y=b.dflt),b.arrayOk&&u(T))return _.set(T),T;var A=M.valObjectMeta[b.valType].coerceFunction;A(T,_,y,b);var k=_.get();return g&&k===y&&!h(T,b)&&(T=f(g,d).get(),A(T,_,y,b),k=_.get()),k},M.coerce2=function(i,s,p,d,y){var b=f(i,d),m=M.coerce(i,s,p,d,y),_=b.get();return _!=null?m:!1},M.coerceFont=function(i,s,p){var d={};return p=p||{},d.family=i(s+".family",p.family),d.size=i(s+".size",p.size),d.color=i(s+".color",p.color),d},M.coerceHoverinfo=function(i,s,p){var d=s._module.attributes,y=d.hoverinfo?d:l,b=y.hoverinfo,m;if(p._dataLength===1){var _=b.dflt==="all"?b.flags.slice():b.dflt.split("+");_.splice(_.indexOf("name"),1),m=_.join("+")}return M.coerce(i,s,y,"hoverinfo",m)},M.coerceSelectionMarkerOpacity=function(i,s){if(i.marker){var p=i.marker.opacity;if(p!==void 0){var d,y;!u(p)&&!i.selected&&!i.unselected&&(d=p,y=t*p),s("selected.marker.opacity",d),s("unselected.marker.opacity",y)}}};function h(i,s){var p=M.valObjectMeta[s.valType];if(s.arrayOk&&u(i))return!0;if(p.validateFunction)return p.validateFunction(i,s);var d={},y=d,b={set:function(m){y=m}};return p.coerceFunction(i,b,d,s),y!==d}M.validate=h},{"../components/colorscale/scales":658,"../constants/interactions":752,"../plots/attributes":824,"./array":760,"./mod":785,"./nested_property":786,"./regex":795,"fast-isnumeric":241,tinycolor2:576}],765:[function(e,v,M){var r=e("d3-time-format").timeFormat,n=e("fast-isnumeric"),l=e("./loggers"),c=e("./mod").mod,t=e("../constants/numerical"),f=t.BADNUM,a=t.ONEDAY,o=t.ONEHOUR,u=t.ONEMIN,h=t.ONESEC,i=t.EPOCHJD,s=e("../registry"),p=e("d3-time-format").utcFormat,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=new Date().getFullYear()-70;function m(N){return N&&s.componentsRegistry.calendars&&typeof N=="string"&&N!=="gregorian"}M.dateTick0=function(N,G){var U=_(N,!!G);if(G<2)return U;var X=M.dateTime2ms(U,N);return X+=a*(G-1),M.ms2DateTime(X,0,N)};function _(N,G){return m(N)?G?s.getComponentMethod("calendars","CANONICAL_SUNDAY")[N]:s.getComponentMethod("calendars","CANONICAL_TICK")[N]:G?"2000-01-02":"2000-01-01"}M.dfltRange=function(N){return m(N)?s.getComponentMethod("calendars","DFLTRANGE")[N]:["2000-01-01","2001-01-01"]},M.isJSDate=function(N){return typeof N=="object"&&N!==null&&typeof N.getTime=="function"};var T,g;M.dateTime2ms=function(N,G){if(M.isJSDate(N)){var U=N.getTimezoneOffset()*u,X=(N.getUTCMinutes()-N.getMinutes())*u+(N.getUTCSeconds()-N.getSeconds())*h+(N.getUTCMilliseconds()-N.getMilliseconds());if(X){var I=3*u;U=U-I/2+c(X-U+I/2,I)}return N=Number(N)-U,N>=T&&N<=g?N:f}if(typeof N!="string"&&typeof N!="number")return f;N=String(N);var B=m(G),j=N.charAt(0);B&&(j==="G"||j==="g")&&(N=N.substr(1),G="");var H=B&&G.substr(0,7)==="chinese",K=N.match(H?y:d);if(!K)return f;var te=K[1],J=K[3]||"1",oe=Number(K[5]||1),ie=Number(K[7]||0),Q=Number(K[9]||0),V=Number(K[11]||0);if(B){if(te.length===2)return f;te=Number(te);var se;try{var re=s.getComponentMethod("calendars","getCal")(G);if(H){var ee=J.charAt(J.length-1)==="i";J=parseInt(J,10),se=re.newDate(te,re.toMonthIndex(te,J,ee),oe)}else se=re.newDate(te,Number(J),oe)}catch{return f}return se?(se.toJD()-i)*a+ie*o+Q*u+V*h:f}te.length===2?te=(Number(te)+2e3-b)%100+b:te=Number(te),J-=1;var ae=new Date(Date.UTC(2e3,J,oe,ie,Q));return ae.setUTCFullYear(te),ae.getUTCMonth()!==J||ae.getUTCDate()!==oe?f:ae.getTime()+V*h},T=M.MIN_MS=M.dateTime2ms("-9999"),g=M.MAX_MS=M.dateTime2ms("9999-12-31 23:59:59.9999"),M.isDateTime=function(N,G){return M.dateTime2ms(N,G)!==f};function A(N,G){return String(N+Math.pow(10,G)).substr(1)}var k=90*a,R=3*o,L=5*u;M.ms2DateTime=function(N,G,U){if(typeof N!="number"||!(N>=T&&N<=g))return f;G||(G=0);var X=Math.floor(c(N+.05,1)*10),I=Math.round(N-X/10),B,j,H,K,te,J;if(m(U)){var oe=Math.floor(I/a)+i,ie=Math.floor(c(N,a));try{B=s.getComponentMethod("calendars","getCal")(U).fromJD(oe).formatDate("yyyy-mm-dd")}catch{B=p("G%Y-%m-%d")(new Date(I))}if(B.charAt(0)==="-")for(;B.length<11;)B="-0"+B.substr(1);else for(;B.length<10;)B="0"+B;j=G<k?Math.floor(ie/o):0,H=G<k?Math.floor(ie%o/u):0,K=G<R?Math.floor(ie%u/h):0,te=G<L?ie%h*10+X:0}else J=new Date(I),B=p("%Y-%m-%d")(J),j=G<k?J.getUTCHours():0,H=G<k?J.getUTCMinutes():0,K=G<R?J.getUTCSeconds():0,te=G<L?J.getUTCMilliseconds()*10+X:0;return z(B,j,H,K,te)},M.ms2DateTimeLocal=function(N){if(!(N>=T+a&&N<=g-a))return f;var G=Math.floor(c(N+.05,1)*10),U=new Date(Math.round(N-G/10)),X=r("%Y-%m-%d")(U),I=U.getHours(),B=U.getMinutes(),j=U.getSeconds(),H=U.getUTCMilliseconds()*10+G;return z(X,I,B,j,H)};function z(N,G,U,X,I){if((G||U||X||I)&&(N+=" "+A(G,2)+":"+A(U,2),(X||I)&&(N+=":"+A(X,2),I))){for(var B=4;I%10===0;)B-=1,I/=10;N+="."+A(I,B)}return N}M.cleanDate=function(N,G,U){if(N===f)return G;if(M.isJSDate(N)||typeof N=="number"&&isFinite(N)){if(m(U))return l.error("JS Dates and milliseconds are incompatible with world calendars",N),G;if(N=M.ms2DateTimeLocal(+N),!N&&G!==void 0)return G}else if(!M.isDateTime(N,U))return l.error("unrecognized date",N),G;return N};var E=/%\d?f/g;function S(N,G,U,X){N=N.replace(E,function(B){var j=Math.min(+B.charAt(1)||6,6),H=(G/1e3%1+2).toFixed(j).substr(2).replace(/0+$/,"")||"0";return H});var I=new Date(Math.floor(G+.05));if(m(X))try{N=s.getComponentMethod("calendars","worldCalFmt")(N,G,X)}catch{return"Invalid"}return U(N)(I)}var C=[59,59.9,59.99,59.999,59.9999];function D(N,G){var U=c(N+.05,a),X=A(Math.floor(U/o),2)+":"+A(c(Math.floor(U/u),60),2);if(G!=="M"){n(G)||(G=0);var I=Math.min(c(N/h,60),C[G]),B=(100+I).toFixed(G).substr(1);G>0&&(B=B.replace(/0+$/,"").replace(/[\.]$/,"")),X+=":"+B}return X}M.formatDate=function(N,G,U,X,I,B){if(I=m(I)&&I,!G)if(U==="y")G=B.year;else if(U==="m")G=B.month;else if(U==="d")G=B.dayMonth+`
`+B.year;else return D(N,U)+`
`+S(B.dayMonthYear,N,X,I);return S(G,N,X,I)};var F=3*a;M.incrementMonth=function(N,G,U){U=m(U)&&U;var X=c(N,a);if(N=Math.round(N-X),U)try{var I=Math.round(N/a)+i,B=s.getComponentMethod("calendars","getCal")(U),j=B.fromJD(I);return G%12?B.add(j,G,"m"):B.add(j,G/12,"y"),(j.toJD()-i)*a+X}catch{l.error("invalid ms "+N+" in calendar "+U)}var H=new Date(N+F);return H.setUTCMonth(H.getUTCMonth()+G)+X-F},M.findExactDates=function(N,G){for(var U=0,X=0,I=0,B=0,j,H,K=m(G)&&s.getComponentMethod("calendars","getCal")(G),te=0;te<N.length;te++){if(H=N[te],!n(H)){B++;continue}if(!(H%a))if(K)try{j=K.fromJD(H/a+i),j.day()===1?j.month()===1?U++:X++:I++}catch{}else j=new Date(H),j.getUTCDate()===1?j.getUTCMonth()===0?U++:X++:I++}X+=U,I+=X;var J=N.length-B;return{exactYears:U/J,exactMonths:X/J,exactDays:I/J}}},{"../constants/numerical":753,"../registry":911,"./loggers":782,"./mod":785,"d3-time-format":166,"fast-isnumeric":241}],766:[function(e,v,M){var r=e("d3"),n=e("./loggers"),l=e("./matrix"),c=e("gl-mat4");function t(b){var m;if(typeof b=="string"){if(m=document.getElementById(b),m===null)throw new Error("No DOM element with id '"+b+"' exists on the page.");return m}else if(b==null)throw new Error("DOM element provided is null or undefined");return b}function f(b){var m=r.select(b);return m.node()instanceof HTMLElement&&m.size()&&m.classed("js-plotly-plot")}function a(b){var m=b&&b.parentNode;m&&m.removeChild(b)}function o(b,m){u("global",b,m)}function u(b,m,_){var T="plotly.js-style-"+b,g=document.getElementById(T);g||(g=document.createElement("style"),g.setAttribute("id",T),g.appendChild(document.createTextNode("")),document.head.appendChild(g));var A=g.sheet;A.insertRule?A.insertRule(m+"{"+_+"}",0):A.addRule?A.addRule(m,_,0):n.warn("addStyleRule failed")}function h(b){var m="plotly.js-style-"+b,_=document.getElementById(m);_&&a(_)}function i(b){var m=p(b),_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return m.forEach(function(T){var g=s(T);if(g){var A=l.convertCssMatrix(g);_=c.multiply(_,_,A)}}),_}function s(b){var m=window.getComputedStyle(b,null),_=m.getPropertyValue("-webkit-transform")||m.getPropertyValue("-moz-transform")||m.getPropertyValue("-ms-transform")||m.getPropertyValue("-o-transform")||m.getPropertyValue("transform");return _==="none"?null:_.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(T){return+T})}function p(b){for(var m=[];d(b);)m.push(b),b=b.parentNode;return m}function d(b){return b&&(b instanceof Element||b instanceof HTMLElement)}function y(b,m){return b&&m&&b.x===m.x&&b.y===m.y&&b.top===m.top&&b.left===m.left&&b.right===m.right&&b.bottom===m.bottom}v.exports={getGraphDiv:t,isPlotDiv:f,removeElement:a,addStyleRule:o,addRelatedStyleRule:u,deleteRelatedStyleRule:h,getFullTransformMatrix:i,getElementTransformMatrix:s,getElementAndAncestors:p,equalDomRects:y}},{"./loggers":782,"./matrix":784,d3:169,"gl-mat4":292}],767:[function(e,v,M){var r=e("events").EventEmitter,n={init:function(l){if(l._ev instanceof r)return l;var c=new r,t=new r;return l._ev=c,l._internalEv=t,l.on=c.on.bind(c),l.once=c.once.bind(c),l.removeListener=c.removeListener.bind(c),l.removeAllListeners=c.removeAllListeners.bind(c),l._internalOn=t.on.bind(t),l._internalOnce=t.once.bind(t),l._removeInternalListener=t.removeListener.bind(t),l._removeAllInternalListeners=t.removeAllListeners.bind(t),l.emit=function(f,a){typeof jQuery<"u"&&jQuery(l).trigger(f,a),c.emit(f,a),t.emit(f,a)},l},triggerHandler:function(l,c,t){var f,a;typeof jQuery<"u"&&(f=jQuery(l).triggerHandler(c,t));var o=l._ev;if(!o)return f;var u=o._events[c];if(!u)return f;function h(s){if(s.listener){if(o.removeListener(c,s.listener),!s.fired)return s.fired=!0,s.listener.apply(o,[t])}else return s.apply(o,[t])}u=Array.isArray(u)?u:[u];var i;for(i=0;i<u.length-1;i++)h(u[i]);return a=h(u[i]),f!==void 0?f:a},purge:function(l){return delete l._ev,delete l.on,delete l.once,delete l.removeListener,delete l.removeAllListeners,delete l.emit,delete l._ev,delete l._internalEv,delete l._internalOn,delete l._internalOnce,delete l._removeInternalListener,delete l._removeAllInternalListeners,l}};v.exports=n},{events:110}],768:[function(e,v,M){var r=e("./is_plain_object.js"),n=Array.isArray;function l(t,f){var a,o;for(a=0;a<t.length;a++){if(o=t[a],o!==null&&typeof o=="object")return!1;o!==void 0&&(f[a]=o)}return!0}M.extendFlat=function(){return c(arguments,!1,!1,!1)},M.extendDeep=function(){return c(arguments,!0,!1,!1)},M.extendDeepAll=function(){return c(arguments,!0,!0,!1)},M.extendDeepNoArrays=function(){return c(arguments,!0,!1,!0)};function c(t,f,a,o){var u=t[0],h=t.length,i,s,p,d,y,b,m;if(h===2&&n(u)&&n(t[1])&&u.length===0){if(m=l(t[1],u),m)return u;u.splice(0,u.length)}for(var _=1;_<h;_++){i=t[_];for(s in i)p=u[s],d=i[s],o&&n(d)?u[s]=d:f&&d&&(r(d)||(y=n(d)))?(y?(y=!1,b=p&&n(p)?p:[]):b=p&&r(p)?p:{},u[s]=c([b,d],f,a,o)):(typeof d<"u"||a)&&(u[s]=d)}return u}},{"./is_plain_object.js":779}],769:[function(e,v,M){v.exports=function(n){for(var l={},c=[],t=0,f=0;f<n.length;f++){var a=n[f];l[a]!==1&&(l[a]=1,c[t++]=a)}return c}},{}],770:[function(e,v,M){v.exports=function(t){for(var f=l(t)?n:r,a=[],o=0;o<t.length;o++){var u=t[o];f(u)&&a.push(u)}return a};function r(c){return c.visible===!0}function n(c){var t=c[0].trace;return t.visible===!0&&t._length!==0}function l(c){return Array.isArray(c)&&Array.isArray(c[0])&&c[0][0]&&c[0][0].trace}},{}],771:[function(e,v,M){var r=e("d3"),n=e("country-regex"),l=e("@turf/area"),c=e("@turf/centroid"),t=e("@turf/bbox"),f=e("./identity"),a=e("./loggers"),o=e("./is_plain_object"),u=e("./nested_property"),h=e("./polygon"),i=Object.keys(n),s={"ISO-3":f,"USA-states":f,"country names":p};function p(A){for(var k=0;k<i.length;k++){var R=i[k],L=new RegExp(n[R]);if(L.test(A.trim().toLowerCase()))return R}return a.log("Unrecognized country name: "+A+"."),!1}function d(A,k,R){if(!k||typeof k!="string")return!1;var L=s[A](k),z,E,S;if(L){if(A==="USA-states")for(z=[],S=0;S<R.length;S++)E=R[S],E.properties&&E.properties.gu&&E.properties.gu==="USA"&&z.push(E);else z=R;for(S=0;S<z.length;S++)if(E=z[S],E.id===L)return E;a.log(["Location with id",L,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function y(A){var k=A.geometry,R=k.coordinates,L=A.id,z=[],E,S,C,D;function F(N){for(var G=0;G<N.length-1;G++)if(N[G][0]>0&&N[G+1][0]<0)return G;return null}switch(L==="RUS"||L==="FJI"?E=function(N){var G;if(F(N)===null)G=N;else for(G=new Array(N.length),D=0;D<N.length;D++)G[D]=[N[D][0]<0?N[D][0]+360:N[D][0],N[D][1]];z.push(h.tester(G))}:L==="ATA"?E=function(N){var G=F(N);if(G===null)return z.push(h.tester(N));var U=new Array(N.length+1),X=0;for(D=0;D<N.length;D++)D>G?U[X++]=[N[D][0]+360,N[D][1]]:D===G?(U[X++]=N[D],U[X++]=[N[D][0],-90]):U[X++]=N[D];var I=h.tester(U);I.pts.pop(),z.push(I)}:E=function(N){z.push(h.tester(N))},k.type){case"MultiPolygon":for(S=0;S<R.length;S++)for(C=0;C<R[S].length;C++)E(R[S][C]);break;case"Polygon":for(S=0;S<R.length;S++)E(R[S]);break}return z}function b(A){var k=A.geojson,R=window.PlotlyGeoAssets||{},L=typeof k=="string"?R[k]:k;return o(L)?L:(a.error("Oops ... something went wrong when fetching "+k),!1)}function m(A){var k=A[0].trace,R=b(k);if(!R)return!1;var L={},z=[],E;for(E=0;E<k._length;E++){var S=A[E];(S.loc||S.loc===0)&&(L[S.loc]=S)}function C(N){var G=u(N,k.featureidkey||"id").get(),U=L[G];if(U){var X=N.geometry;if(X.type==="Polygon"||X.type==="MultiPolygon"){var I={type:"Feature",id:G,geometry:X,properties:{}};I.properties.ct=_(I),U.fIn=N,U.fOut=I,z.push(I)}else a.log(["Location",U.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete L[G]}switch(R.type){case"FeatureCollection":var D=R.features;for(E=0;E<D.length;E++)C(D[E]);break;case"Feature":C(R);break;default:return a.warn(["Invalid GeoJSON type",(R.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var F in L)a.log(["Location *"+F+"*","does not have a matching feature with id-key","*"+k.featureidkey+"*."].join(" "));return z}function _(A){var k=A.geometry,R;if(k.type==="MultiPolygon")for(var L=k.coordinates,z=0,E=0;E<L.length;E++){var S={type:"Polygon",coordinates:L[E]},C=l.default(S);C>z&&(z=C,R=S)}else R=k;return c.default(R).geometry.coordinates}function T(A){var k=window.PlotlyGeoAssets||{},R=[];function L(D){return new Promise(function(F,N){r.json(D,function(G,U){if(G){delete k[D];var X=G.status===404?'GeoJSON at URL "'+D+'" does not exist.':"Unexpected error while fetching from "+D;return N(new Error(X))}return k[D]=U,F(U)})})}function z(D){return new Promise(function(F,N){var G=0,U=setInterval(function(){if(k[D]&&k[D]!=="pending")return clearInterval(U),F(k[D]);if(G>100)return clearInterval(U),N("Unexpected error while fetching from "+D);G++},50)})}for(var E=0;E<A.length;E++){var S=A[E][0].trace,C=S.geojson;typeof C=="string"&&(k[C]?k[C]==="pending"&&R.push(z(C)):(k[C]="pending",R.push(L(C))))}return R}function g(A){return t.default(A)}v.exports={locationToFeature:d,feature2polygons:y,getTraceGeojson:b,extractTraceFeature:m,fetchTraceGeoData:T,computeBbox:g}},{"./identity":776,"./is_plain_object":779,"./loggers":782,"./nested_property":786,"./polygon":790,"@turf/area":59,"@turf/bbox":60,"@turf/centroid":61,"country-regex":139,d3:169}],772:[function(e,v,M){var r=e("../constants/numerical").BADNUM;M.calcTraceToLineCoords=function(n){for(var l=n[0].trace,c=l.connectgaps,t=[],f=[],a=0;a<n.length;a++){var o=n[a],u=o.lonlat;u[0]!==r?f.push(u):!c&&f.length>0&&(t.push(f),f=[])}return f.length>0&&t.push(f),t},M.makeLine=function(n){return n.length===1?{type:"LineString",coordinates:n[0]}:{type:"MultiLineString",coordinates:n}},M.makePolygon=function(n){if(n.length===1)return{type:"Polygon",coordinates:n};for(var l=new Array(n.length),c=0;c<n.length;c++)l[c]=[n[c]];return{type:"MultiPolygon",coordinates:l}},M.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":753}],773:[function(e,v,M){var r=e("./mod").mod;M.segmentsIntersect=n;function n(a,o,u,h,i,s,p,d){var y=u-a,b=i-a,m=p-i,_=h-o,T=s-o,g=d-s,A=y*g-m*_;if(A===0)return null;var k=(b*g-m*T)/A,R=(b*_-y*T)/A;return R<0||R>1||k<0||k>1?null:{x:a+y*k,y:o+_*k}}M.segmentDistance=function(o,u,h,i,s,p,d,y){if(n(o,u,h,i,s,p,d,y))return 0;var b=h-o,m=i-u,_=d-s,T=y-p,g=b*b+m*m,A=_*_+T*T,k=Math.min(l(b,m,g,s-o,p-u),l(b,m,g,d-o,y-u),l(_,T,A,o-s,u-p),l(_,T,A,h-s,i-p));return Math.sqrt(k)};function l(a,o,u,h,i){var s=h*a+i*o;if(s<0)return h*h+i*i;if(s>u){var p=h-a,d=i-o;return p*p+d*d}else{var y=h*o-i*a;return y*y/u}}var c,t,f;M.getTextLocation=function(o,u,h,i){if((o!==t||i!==f)&&(c={},t=o,f=i),c[h])return c[h];var s=o.getPointAtLength(r(h-i/2,u)),p=o.getPointAtLength(r(h+i/2,u)),d=Math.atan((p.y-s.y)/(p.x-s.x)),y=o.getPointAtLength(r(h,u)),b=(y.x*4+s.x+p.x)/6,m=(y.y*4+s.y+p.y)/6,_={x:b,y:m,theta:d};return c[h]=_,_},M.clearLocationCache=function(){t=null},M.getVisibleSegment=function(o,u,h){var i=u.left,s=u.right,p=u.top,d=u.bottom,y=0,b=o.getTotalLength(),m=b,_,T;function g(k){var R=o.getPointAtLength(k);k===0?_=R:k===b&&(T=R);var L=R.x<i?i-R.x:R.x>s?R.x-s:0,z=R.y<p?p-R.y:R.y>d?R.y-d:0;return Math.sqrt(L*L+z*z)}for(var A=g(y);A;){if(y+=A+h,y>m)return;A=g(y)}for(A=g(m);A;){if(m-=A+h,y>m)return;A=g(m)}return{min:y,max:m,len:m-y,total:b,isClosed:y===0&&m===b&&Math.abs(_.x-T.x)<.1&&Math.abs(_.y-T.y)<.1}},M.findPointOnPath=function(o,u,h,i){i=i||{};for(var s=i.pathLength||o.getTotalLength(),p=i.tolerance||.001,d=i.iterationLimit||30,y=o.getPointAtLength(0)[h]>o.getPointAtLength(s)[h]?-1:1,b=0,m=0,_=s,T,g,A;b<d;){if(T=(m+_)/2,g=o.getPointAtLength(T),A=g[h]-u,Math.abs(A)<p)return g;y*A>0?_=T:m=T,b++}return g}},{"./mod":785}],774:[function(e,v,M){var r=e("fast-isnumeric"),n=e("tinycolor2"),l=e("color-normalize"),c=e("../components/colorscale"),t=e("../components/color/attributes").defaultLine,f=e("./array").isArrayOrTypedArray,a=l(t),o=1;function u(d,y){var b=d;return b[3]*=y,b}function h(d){if(r(d))return a;var y=l(d);return y.length?y:a}function i(d){return r(d)?d:o}function s(d,y,b){var m=d.color,_=f(m),T=f(y),g=c.extractOpts(d),A=[],k,R,L,z,E;if(g.colorscale!==void 0?k=c.makeColorScaleFuncFromTrace(d):k=h,_?R=function(C,D){return C[D]===void 0?a:l(k(C[D]))}:R=h,T?L=function(C,D){return C[D]===void 0?o:i(C[D])}:L=i,_||T)for(var S=0;S<b;S++)z=R(m,S),E=L(y,S),A[S]=u(z,E);else A=u(l(m),y);return A}function p(d){var y=c.extractOpts(d),b=y.colorscale;return y.reversescale&&(b=c.flipScale(y.colorscale)),b.map(function(m){var _=m[0],T=n(m[1]),g=T.toRgb();return{index:_,rgb:[g.r,g.g,g.b,g.a]}})}v.exports={formatColor:s,parseColorScale:p}},{"../components/color/attributes":642,"../components/colorscale":655,"./array":760,"color-normalize":125,"fast-isnumeric":241,tinycolor2:576}],775:[function(e,v,M){var r=e("./identity");function n(l){return[l]}v.exports={keyFun:function(l){return l.key},repeat:n,descend:r,wrap:n,unwrap:function(l){return l[0]}}},{"./identity":776}],776:[function(e,v,M){v.exports=function(n){return n}},{}],777:[function(e,v,M){v.exports=function(n,l){if(!l)return n;var c=1/Math.abs(l),t=c>1?(c*n+c*l)/c:n+l,f=String(t).length;if(f>16){var a=String(l).length,o=String(n).length;if(f>=o+a){var u=parseFloat(t).toPrecision(12);u.indexOf("e+")===-1&&(t=+u)}}return t}},{}],778:[function(e,v,M){var r=e("d3"),n=e("d3-time-format").utcFormat,l=e("fast-isnumeric"),c=e("../constants/numerical"),t=c.FP_SAFE,f=c.BADNUM,a=v.exports={};a.nestedProperty=e("./nested_property"),a.keyedContainer=e("./keyed_container"),a.relativeAttr=e("./relative_attr"),a.isPlainObject=e("./is_plain_object"),a.toLogRange=e("./to_log_range"),a.relinkPrivateKeys=e("./relink_private");var o=e("./array");a.isTypedArray=o.isTypedArray,a.isArrayOrTypedArray=o.isArrayOrTypedArray,a.isArray1D=o.isArray1D,a.ensureArray=o.ensureArray,a.concat=o.concat,a.maxRowLength=o.maxRowLength,a.minRowLength=o.minRowLength;var u=e("./mod");a.mod=u.mod,a.modHalf=u.modHalf;var h=e("./coerce");a.valObjectMeta=h.valObjectMeta,a.coerce=h.coerce,a.coerce2=h.coerce2,a.coerceFont=h.coerceFont,a.coerceHoverinfo=h.coerceHoverinfo,a.coerceSelectionMarkerOpacity=h.coerceSelectionMarkerOpacity,a.validate=h.validate;var i=e("./dates");a.dateTime2ms=i.dateTime2ms,a.isDateTime=i.isDateTime,a.ms2DateTime=i.ms2DateTime,a.ms2DateTimeLocal=i.ms2DateTimeLocal,a.cleanDate=i.cleanDate,a.isJSDate=i.isJSDate,a.formatDate=i.formatDate,a.incrementMonth=i.incrementMonth,a.dateTick0=i.dateTick0,a.dfltRange=i.dfltRange,a.findExactDates=i.findExactDates,a.MIN_MS=i.MIN_MS,a.MAX_MS=i.MAX_MS;var s=e("./search");a.findBin=s.findBin,a.sorterAsc=s.sorterAsc,a.sorterDes=s.sorterDes,a.distinctVals=s.distinctVals,a.roundUp=s.roundUp,a.sort=s.sort,a.findIndexOfMin=s.findIndexOfMin;var p=e("./stats");a.aggNums=p.aggNums,a.len=p.len,a.mean=p.mean,a.median=p.median,a.midRange=p.midRange,a.variance=p.variance,a.stdev=p.stdev,a.interp=p.interp;var d=e("./matrix");a.init2dArray=d.init2dArray,a.transposeRagged=d.transposeRagged,a.dot=d.dot,a.translationMatrix=d.translationMatrix,a.rotationMatrix=d.rotationMatrix,a.rotationXYMatrix=d.rotationXYMatrix,a.apply3DTransform=d.apply3DTransform,a.apply2DTransform=d.apply2DTransform,a.apply2DTransform2=d.apply2DTransform2,a.convertCssMatrix=d.convertCssMatrix,a.inverseTransformMatrix=d.inverseTransformMatrix;var y=e("./angles");a.deg2rad=y.deg2rad,a.rad2deg=y.rad2deg,a.angleDelta=y.angleDelta,a.angleDist=y.angleDist,a.isFullCircle=y.isFullCircle,a.isAngleInsideSector=y.isAngleInsideSector,a.isPtInsideSector=y.isPtInsideSector,a.pathArc=y.pathArc,a.pathSector=y.pathSector,a.pathAnnulus=y.pathAnnulus;var b=e("./anchor_utils");a.isLeftAnchor=b.isLeftAnchor,a.isCenterAnchor=b.isCenterAnchor,a.isRightAnchor=b.isRightAnchor,a.isTopAnchor=b.isTopAnchor,a.isMiddleAnchor=b.isMiddleAnchor,a.isBottomAnchor=b.isBottomAnchor;var m=e("./geometry2d");a.segmentsIntersect=m.segmentsIntersect,a.segmentDistance=m.segmentDistance,a.getTextLocation=m.getTextLocation,a.clearLocationCache=m.clearLocationCache,a.getVisibleSegment=m.getVisibleSegment,a.findPointOnPath=m.findPointOnPath;var _=e("./extend");a.extendFlat=_.extendFlat,a.extendDeep=_.extendDeep,a.extendDeepAll=_.extendDeepAll,a.extendDeepNoArrays=_.extendDeepNoArrays;var T=e("./loggers");a.log=T.log,a.warn=T.warn,a.error=T.error;var g=e("./regex");a.counterRegex=g.counter;var A=e("./throttle");a.throttle=A.throttle,a.throttleDone=A.done,a.clearThrottle=A.clear;var k=e("./dom");a.getGraphDiv=k.getGraphDiv,a.isPlotDiv=k.isPlotDiv,a.removeElement=k.removeElement,a.addStyleRule=k.addStyleRule,a.addRelatedStyleRule=k.addRelatedStyleRule,a.deleteRelatedStyleRule=k.deleteRelatedStyleRule,a.getFullTransformMatrix=k.getFullTransformMatrix,a.getElementTransformMatrix=k.getElementTransformMatrix,a.getElementAndAncestors=k.getElementAndAncestors,a.equalDomRects=k.equalDomRects,a.clearResponsive=e("./clear_responsive"),a.preserveDrawingBuffer=e("./preserve_drawing_buffer"),a.makeTraceGroups=e("./make_trace_groups"),a._=e("./localize"),a.notifier=e("./notifier"),a.filterUnique=e("./filter_unique"),a.filterVisible=e("./filter_visible"),a.pushUnique=e("./push_unique"),a.increment=e("./increment"),a.cleanNumber=e("./clean_number"),a.ensureNumber=function(H){return!l(H)||(H=Number(H),H<-t||H>t)?f:l(H)?Number(H):f},a.isIndex=function(j,H){return H!==void 0&&j>=H?!1:l(j)&&j>=0&&j%1===0},a.noop=e("./noop"),a.identity=e("./identity"),a.repeat=function(j,H){for(var K=new Array(H),te=0;te<H;te++)K[te]=j;return K},a.swapAttrs=function(j,H,K,te){K||(K="x"),te||(te="y");for(var J=0;J<H.length;J++){var oe=H[J],ie=a.nestedProperty(j,oe.replace("?",K)),Q=a.nestedProperty(j,oe.replace("?",te)),V=ie.get();ie.set(Q.get()),Q.set(V)}},a.raiseToTop=function(H){H.parentNode.appendChild(H)},a.cancelTransition=function(j){return j.transition().duration(0)},a.constrain=function(j,H,K){return H>K?Math.max(K,Math.min(H,j)):Math.max(H,Math.min(K,j))},a.bBoxIntersect=function(j,H,K){return K=K||0,j.left<=H.right+K&&H.left<=j.right+K&&j.top<=H.bottom+K&&H.top<=j.bottom+K},a.simpleMap=function(j,H,K,te,J){for(var oe=j.length,ie=new Array(oe),Q=0;Q<oe;Q++)ie[Q]=H(j[Q],K,te,J);return ie},a.randstr=function j(H,K,te,J){if(te||(te=16),K===void 0&&(K=24),K<=0)return"0";var oe=Math.log(Math.pow(2,K))/Math.log(te),ie="",Q,V,se;for(Q=2;oe===1/0;Q*=2)oe=Math.log(Math.pow(2,K/Q))/Math.log(te)*Q;var re=oe-Math.floor(oe);for(Q=0;Q<Math.floor(oe);Q++)se=Math.floor(Math.random()*te).toString(te),ie=se+ie;re&&(V=Math.pow(te,re),se=Math.floor(Math.random()*V).toString(te),ie=se+ie);var ee=parseInt(ie,te);return H&&H[ie]||ee!==1/0&&ee>=Math.pow(2,K)?J>10?(a.warn("randstr failed uniqueness"),ie):j(H,K,te,(J||0)+1):ie},a.OptionControl=function(j,H){j||(j={}),H||(H="opt");var K={};return K.optionList=[],K._newoption=function(te){te[H]=j,K[te.name]=te,K.optionList.push(te)},K["_"+H]=j,K},a.smooth=function(j,H){if(H=Math.round(H)||0,H<2)return j;var K=j.length,te=2*K,J=2*H-1,oe=new Array(J),ie=new Array(K),Q,V,se,re;for(Q=0;Q<J;Q++)oe[Q]=(1-Math.cos(Math.PI*(Q+1)/H))/(2*H);for(Q=0;Q<K;Q++){for(re=0,V=0;V<J;V++)se=Q+V+1-H,se<-K?se-=te*Math.round(se/te):se>=te&&(se-=te*Math.floor(se/te)),se<0?se=-1-se:se>=K&&(se=te-1-se),re+=j[se]*oe[V];ie[Q]=re}return ie},a.syncOrAsync=function(j,H,K){var te,J;function oe(){return a.syncOrAsync(j,H,K)}for(;j.length;)if(J=j.splice(0,1)[0],te=J(H),te&&te.then)return te.then(oe).then(void 0,a.promiseError);return K&&K(H)},a.stripTrailingSlash=function(j){return j.substr(-1)==="/"?j.substr(0,j.length-1):j},a.noneOrAll=function(j,H,K){if(j){var te=!1,J=!0,oe,ie;for(oe=0;oe<K.length;oe++)ie=j[K[oe]],ie!=null?te=!0:J=!1;if(te&&!J)for(oe=0;oe<K.length;oe++)j[K[oe]]=H[K[oe]]}},a.mergeArray=function(j,H,K,te){var J=typeof te=="function";if(a.isArrayOrTypedArray(j))for(var oe=Math.min(j.length,H.length),ie=0;ie<oe;ie++){var Q=j[ie];H[ie][K]=J?te(Q):Q}},a.mergeArrayCastPositive=function(j,H,K){return a.mergeArray(j,H,K,function(te){var J=+te;return isFinite(J)&&J>0?J:0})},a.fillArray=function(j,H,K,te){if(te=te||a.identity,a.isArrayOrTypedArray(j))for(var J=0;J<H.length;J++)H[J][K]=te(j[J])},a.castOption=function(j,H,K,te){te=te||a.identity;var J=a.nestedProperty(j,K).get();return a.isArrayOrTypedArray(J)?Array.isArray(H)&&a.isArrayOrTypedArray(J[H[0]])?te(J[H[0]][H[1]]):te(J[H]):J},a.extractOption=function(j,H,K,te){if(K in j)return j[K];var J=a.nestedProperty(H,te).get();if(!Array.isArray(J))return J};function R(j){var H={};for(var K in j)for(var te=j[K],J=0;J<te.length;J++)H[te[J]]=+K;return H}a.tagSelected=function(j,H,K){var te=H.selectedpoints,J=H._indexToPoints,oe;J&&(oe=R(J));function ie(ee){return ee!==void 0&&ee<j.length}for(var Q=0;Q<te.length;Q++){var V=te[Q];if(a.isIndex(V)||a.isArrayOrTypedArray(V)&&a.isIndex(V[0])&&a.isIndex(V[1])){var se=oe?oe[V]:V,re=K?K[se]:se;ie(re)&&(j[re].selected=1)}}},a.selIndices2selPoints=function(j){var H=j.selectedpoints,K=j._indexToPoints;if(K){for(var te=R(K),J=[],oe=0;oe<H.length;oe++){var ie=H[oe];if(a.isIndex(ie)){var Q=te[ie];a.isIndex(Q)&&J.push(Q)}}return J}else return H},a.getTargetArray=function(j,H){var K=H.target;if(typeof K=="string"&&K){var te=a.nestedProperty(j,K).get();return Array.isArray(te)?te:!1}else if(Array.isArray(K))return K;return!1},a.minExtend=function(j,H){var K={};typeof H!="object"&&(H={});var te=3,J=Object.keys(j),oe,ie,Q;for(oe=0;oe<J.length;oe++)ie=J[oe],Q=j[ie],!(ie.charAt(0)==="_"||typeof Q=="function")&&(ie==="module"?K[ie]=Q:Array.isArray(Q)?ie==="colorscale"?K[ie]=Q.slice():K[ie]=Q.slice(0,te):a.isTypedArray(Q)?K[ie]=Q.subarray(0,te):Q&&typeof Q=="object"?K[ie]=a.minExtend(j[ie],H[ie]):K[ie]=Q);for(J=Object.keys(H),oe=0;oe<J.length;oe++)ie=J[oe],Q=H[ie],(typeof Q!="object"||!(ie in K)||typeof K[ie]!="object")&&(K[ie]=Q);return K},a.titleCase=function(j){return j.charAt(0).toUpperCase()+j.substr(1)},a.containsAny=function(j,H){for(var K=0;K<H.length;K++)if(j.indexOf(H[K])!==-1)return!0;return!1},a.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var L=/MSIE [1-9]\./;a.isIE9orBelow=function(){return a.isIE()&&L.test(window.navigator.userAgent)};var z=/Version\/[\d\.]+.*Safari/;a.isSafari=function(){return z.test(window.navigator.userAgent)};var E=/iPad|iPhone|iPod/;a.isIOS=function(){return E.test(window.navigator.userAgent)},a.isD3Selection=function(j){return j&&typeof j.classed=="function"},a.ensureSingle=function(j,H,K,te){var J=j.select(H+(K?"."+K:""));if(J.size())return J;var oe=j.append(H);return K&&oe.classed(K,!0),te&&oe.call(te),oe},a.ensureSingleById=function(j,H,K,te){var J=j.select(H+"#"+K);if(J.size())return J;var oe=j.append(H).attr("id",K);return te&&oe.call(te),oe},a.objectFromPath=function(j,H){for(var K=j.split("."),te,J=te={},oe=0;oe<K.length;oe++){var ie=K[oe],Q=null,V=K[oe].match(/(.*)\[([0-9]+)\]/);V?(ie=V[1],Q=V[2],te=te[ie]=[],oe===K.length-1?te[Q]=H:te[Q]={},te=te[Q]):(oe===K.length-1?te[ie]=H:te[ie]={},te=te[ie])}return J};var S=/^([^\[\.]+)\.(.+)?/,C=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;a.expandObjectPaths=function(j){var H,K,te,J,oe,ie,Q;if(typeof j=="object"&&!Array.isArray(j))for(K in j)j.hasOwnProperty(K)&&((H=K.match(S))?(J=j[K],te=H[1],delete j[K],j[te]=a.extendDeepNoArrays(j[te]||{},a.objectFromPath(K,a.expandObjectPaths(J))[te])):(H=K.match(C))?(J=j[K],te=H[1],oe=parseInt(H[2]),delete j[K],j[te]=j[te]||[],H[3]==="."?(Q=H[4],ie=j[te][oe]=j[te][oe]||{},a.extendDeepNoArrays(ie,a.objectFromPath(Q,a.expandObjectPaths(J)))):j[te][oe]=a.expandObjectPaths(J)):j[K]=a.expandObjectPaths(j[K]));return j},a.numSeparate=function(j,H,K){if(K||(K=!1),typeof H!="string"||H.length===0)throw new Error("Separator string required for formatting!");typeof j=="number"&&(j=String(j));var te=/(\d+)(\d{3})/,J=H.charAt(0),oe=H.charAt(1),ie=j.split("."),Q=ie[0],V=ie.length>1?J+ie[1]:"";if(oe&&(ie.length>1||Q.length>4||K))for(;te.test(Q);)Q=Q.replace(te,"$1"+oe+"$2");return Q+V},a.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;a.templateString=function(j,H){var K={};return j.replace(a.TEMPLATE_STRING_REGEX,function(te,J){var oe;return D.test(J)?oe=H[J]:(K[J]=K[J]||a.nestedProperty(H,J).get,oe=K[J]()),a.isValidTextValue(oe)?oe:""})};var F={max:10,count:0,name:"hovertemplate"};a.hovertemplateString=function(){return U.apply(F,arguments)};var N={max:10,count:0,name:"texttemplate"};a.texttemplateString=function(){return U.apply(N,arguments)};var G=/^[:|\|]/;function U(j,H,K){var te=this,J=arguments;H||(H={});var oe={};return j.replace(a.TEMPLATE_STRING_REGEX,function(ie,Q,V){var se,re,ee;for(ee=3;ee<J.length;ee++)if(se=J[ee],!!se){if(se.hasOwnProperty(Q)){re=se[Q];break}if(D.test(Q)||(re=oe[Q]||a.nestedProperty(se,Q).get(),re&&(oe[Q]=re)),re!==void 0)break}if(re===void 0&&te)return te.count<te.max&&(a.warn("Variable '"+Q+"' in "+te.name+" could not be found!"),re=ie),te.count===te.max&&a.warn("Too many "+te.name+" warnings - additional warnings will be suppressed"),te.count++,ie;if(V){var ae;if(V[0]===":"&&(ae=K?K.numberFormat:r.format,re=ae(V.replace(G,""))(re)),V[0]==="|"){ae=K?K.timeFormat:n;var fe=a.dateTime2ms(re);re=a.formatDate(fe,V.replace(G,""),!1,ae)}}else H.hasOwnProperty(Q+"Label")&&(re=H[Q+"Label"]);return re})}var X=48,I=57;a.subplotSort=function(j,H){for(var K=Math.min(j.length,H.length)+1,te=0,J=0,oe=0;oe<K;oe++){var ie=j.charCodeAt(oe)||0,Q=H.charCodeAt(oe)||0,V=ie>=X&&ie<=I,se=Q>=X&&Q<=I;if(V&&(te=10*te+ie-X),se&&(J=10*J+Q-X),!V||!se){if(te!==J)return te-J;if(ie!==Q)return ie-Q}}return J-te};var B=2e9;a.seedPseudoRandom=function(){B=2e9},a.pseudoRandom=function(){var j=B;return B=(69069*B+1)%4294967296,Math.abs(B-j)<429496729?a.pseudoRandom():B/4294967296},a.fillText=function(j,H,K){var te=Array.isArray(K)?function(ie){K.push(ie)}:function(ie){K.text=ie},J=a.extractOption(j,H,"htx","hovertext");if(a.isValidTextValue(J))return te(J);var oe=a.extractOption(j,H,"tx","text");if(a.isValidTextValue(oe))return te(oe)},a.isValidTextValue=function(j){return j||j===0},a.formatPercent=function(j,H){H=H||0;for(var K=(Math.round(100*j*Math.pow(10,H))*Math.pow(.1,H)).toFixed(H)+"%",te=0;te<H;te++)K.indexOf(".")!==-1&&(K=K.replace("0%","%"),K=K.replace(".%","%"));return K},a.isHidden=function(j){var H=window.getComputedStyle(j).display;return!H||H==="none"},a.strTranslate=function(j,H){return j||H?"translate("+j+","+H+")":""},a.strRotate=function(j){return j?"rotate("+j+")":""},a.strScale=function(j){return j!==1?"scale("+j+")":""},a.getTextTransform=function(j){var H=j.noCenter,K=j.textX,te=j.textY,J=j.targetX,oe=j.targetY,ie=j.anchorX||0,Q=j.anchorY||0,V=j.rotate,se=j.scale;return se?se>1&&(se=1):se=0,a.strTranslate(J-se*(K+ie),oe-se*(te+Q))+a.strScale(se)+(V?"rotate("+V+(H?"":" "+K+" "+te)+")":"")},a.ensureUniformFontSize=function(j,H){var K=a.extendFlat({},H);return K.size=Math.max(H.size,j._fullLayout.uniformtext.minsize||0),K},a.join2=function(j,H,K){var te=j.length;return te>1?j.slice(0,-1).join(H)+K+j[te-1]:j.join(H)}},{"../constants/numerical":753,"./anchor_utils":758,"./angles":759,"./array":760,"./clean_number":761,"./clear_responsive":763,"./coerce":764,"./dates":765,"./dom":766,"./extend":768,"./filter_unique":769,"./filter_visible":770,"./geometry2d":773,"./identity":776,"./increment":777,"./is_plain_object":779,"./keyed_container":780,"./localize":781,"./loggers":782,"./make_trace_groups":783,"./matrix":784,"./mod":785,"./nested_property":786,"./noop":787,"./notifier":788,"./preserve_drawing_buffer":792,"./push_unique":793,"./regex":795,"./relative_attr":796,"./relink_private":797,"./search":798,"./stats":801,"./throttle":804,"./to_log_range":805,d3:169,"d3-time-format":166,"fast-isnumeric":241}],779:[function(e,v,M){v.exports=function(n){return window&&window.process&&window.process.versions?Object.prototype.toString.call(n)==="[object Object]":Object.prototype.toString.call(n)==="[object Object]"&&Object.getPrototypeOf(n)===Object.prototype}},{}],780:[function(e,v,M){var r=e("./nested_property"),n=/^\w*$/,l=0,c=1,t=2,f=3,a=4;v.exports=function(u,h,i,s){i=i||"name",s=s||"value";var p,d,y,b={};h&&h.length?(y=r(u,h),d=y.get()):d=u,h=h||"";var m={};if(d)for(p=0;p<d.length;p++)m[d[p][i]]=p;var _=n.test(s),T={set:function(g,A){var k=A===null?a:l;if(!d){if(!y||k===a)return;d=[],y.set(d)}var R=m[g];if(R===void 0){if(k===a)return;k=k|f,R=d.length,m[g]=R}else A!==(_?d[R][s]:r(d[R],s).get())&&(k=k|t);var L=d[R]=d[R]||{};return L[i]=g,_?L[s]=A:r(L,s).set(A),A!==null&&(k=k&~a),b[R]=b[R]|k,T},get:function(g){if(d){var A=m[g];if(A!==void 0)return _?d[A][s]:r(d[A],s).get()}},rename:function(g,A){var k=m[g];return k===void 0||(b[k]=b[k]|c,m[A]=k,delete m[g],d[k][i]=A),T},remove:function(g){var A=m[g];if(A===void 0)return T;var k=d[A];if(Object.keys(k).length>2)return b[A]=b[A]|t,T.set(g,null);if(_){for(p=A;p<d.length;p++)b[p]=b[p]|f;for(p=A;p<d.length;p++)m[d[p][i]]--;d.splice(A,1),delete m[g]}else r(k,s).set(null),b[A]=b[A]|t|a;return T},constructUpdate:function(){for(var g,A,k={},R=Object.keys(b),L=0;L<R.length;L++)A=R[L],g=h+"["+A+"]",d[A]?(b[A]&c&&(k[g+"."+i]=d[A][i]),b[A]&t&&(_?k[g+"."+s]=b[A]&a?null:d[A][s]:k[g+"."+s]=b[A]&a?null:r(d[A],s).get())):k[g]=null;return k}};return T}},{"./nested_property":786}],781:[function(e,v,M){var r=e("../registry");v.exports=function(l,c){for(var t=l._context.locale,f=0;f<2;f++){for(var a=l._context.locales,o=0;o<2;o++){var u=(a[t]||{}).dictionary;if(u){var h=u[c];if(h)return h}a=r.localeRegistry}var i=t.split("-")[0];if(i===t)break;t=i}return c}},{"../registry":911}],782:[function(e,v,M){var r=e("../plot_api/plot_config").dfltConfig,n=e("./notifier"),l=v.exports={};l.log=function(){var t;if(r.logging>1){var f=["LOG:"];for(t=0;t<arguments.length;t++)f.push(arguments[t]);c(console.trace||console.log,f)}if(r.notifyOnLogging>1){var a=[];for(t=0;t<arguments.length;t++)a.push(arguments[t]);n(a.join("<br>"),"long")}},l.warn=function(){var t;if(r.logging>0){var f=["WARN:"];for(t=0;t<arguments.length;t++)f.push(arguments[t]);c(console.trace||console.log,f)}if(r.notifyOnLogging>0){var a=[];for(t=0;t<arguments.length;t++)a.push(arguments[t]);n(a.join("<br>"),"stick")}},l.error=function(){var t;if(r.logging>0){var f=["ERROR:"];for(t=0;t<arguments.length;t++)f.push(arguments[t]);c(console.error,f)}if(r.notifyOnLogging>0){var a=[];for(t=0;t<arguments.length;t++)a.push(arguments[t]);n(a.join("<br>"),"stick")}};function c(t,f){if(t&&t.apply)try{t.apply(console,f);return}catch{}for(var a=0;a<f.length;a++)try{t(f[a])}catch{console.log(f[a])}}},{"../plot_api/plot_config":815,"./notifier":788}],783:[function(e,v,M){var r=e("d3");v.exports=function(l,c,t){var f=l.selectAll("g."+t.replace(/\s/g,".")).data(c,function(o){return o[0].trace.uid});f.exit().remove(),f.enter().append("g").attr("class",t),f.order();var a=l.classed("rangeplot")?"nodeRangePlot3":"node3";return f.each(function(o){o[0][a]=r.select(this)}),f}},{d3:169}],784:[function(e,v,M){var r=e("gl-mat4");M.init2dArray=function(n,l){for(var c=new Array(n),t=0;t<n;t++)c[t]=new Array(l);return c},M.transposeRagged=function(n){var l=0,c=n.length,t,f;for(t=0;t<c;t++)l=Math.max(l,n[t].length);var a=new Array(l);for(t=0;t<l;t++)for(a[t]=new Array(c),f=0;f<c;f++)a[t][f]=n[f][t];return a},M.dot=function(n,l){if(!(n.length&&l.length)||n.length!==l.length)return null;var c=n.length,t,f;if(n[0].length)for(t=new Array(c),f=0;f<c;f++)t[f]=M.dot(n[f],l);else if(l[0].length){var a=M.transposeRagged(l);for(t=new Array(a.length),f=0;f<a.length;f++)t[f]=M.dot(n,a[f])}else for(t=0,f=0;f<c;f++)t+=n[f]*l[f];return t},M.translationMatrix=function(n,l){return[[1,0,n],[0,1,l],[0,0,1]]},M.rotationMatrix=function(n){var l=n*Math.PI/180;return[[Math.cos(l),-Math.sin(l),0],[Math.sin(l),Math.cos(l),0],[0,0,1]]},M.rotationXYMatrix=function(n,l,c){return M.dot(M.dot(M.translationMatrix(l,c),M.rotationMatrix(n)),M.translationMatrix(-l,-c))},M.apply3DTransform=function(n){return function(){var l=arguments,c=arguments.length===1?l[0]:[l[0],l[1],l[2]||0];return M.dot(n,[c[0],c[1],c[2],1]).slice(0,3)}},M.apply2DTransform=function(n){return function(){var l=arguments;l.length===3&&(l=l[0]);var c=arguments.length===1?l[0]:[l[0],l[1]];return M.dot(n,[c[0],c[1],1]).slice(0,2)}},M.apply2DTransform2=function(n){var l=M.apply2DTransform(n);return function(c){return l(c.slice(0,2)).concat(l(c.slice(2,4)))}},M.convertCssMatrix=function(n){if(n){var l=n.length;if(l===16)return n;if(l===6)return[n[0],n[1],0,0,n[2],n[3],0,0,0,0,1,0,n[4],n[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},M.inverseTransformMatrix=function(n){var l=[];return r.invert(l,n),[[l[0],l[1],l[2],l[3]],[l[4],l[5],l[6],l[7]],[l[8],l[9],l[10],l[11]],[l[12],l[13],l[14],l[15]]]}},{"gl-mat4":292}],785:[function(e,v,M){function r(l,c){var t=l%c;return t<0?t+c:t}function n(l,c){return Math.abs(l)>c/2?l-Math.round(l/c)*c:l}v.exports={mod:r,modHalf:n}},{}],786:[function(e,v,M){var r=e("fast-isnumeric"),n=e("./array").isArrayOrTypedArray;v.exports=function(s,p){if(r(p))p=String(p);else if(typeof p!="string"||p.substr(p.length-4)==="[-1]")throw"bad property string";for(var d=0,y=p.split("."),b,m,_;d<y.length;){if(b=String(y[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),b){if(b[1])y[d]=b[1];else if(d===0)y.splice(0,1);else throw"bad property string";for(m=b[2].substr(1,b[2].length-2).split("]["),_=0;_<m.length;_++)d++,y.splice(d,0,Number(m[_]))}d++}return typeof s!="object"?h(s,p,y):{set:f(s,y,p),get:l(s,y),astr:p,parts:y,obj:s}};function l(i,s){return function(){var p=i,d,y,b,m,_;for(m=0;m<s.length-1;m++){if(d=s[m],d===-1){for(y=!0,b=[],_=0;_<p.length;_++)b[_]=l(p[_],s.slice(m+1))(),b[_]!==b[0]&&(y=!1);return y?b[0]:b}if(typeof d=="number"&&!n(p)||(p=p[d],typeof p!="object"||p===null))return}if(!(typeof p!="object"||p===null)&&(b=p[s[m]],b!==null))return b}}var c=/(^|\.)args\[/;function t(i,s){return i===void 0||i===null&&!s.match(c)}function f(i,s,p){return function(d){var y=i,b="",m=t(d,p),_,T;for(T=0;T<s.length-1;T++){if(_=s[T],typeof _=="number"&&!n(y))throw"array index but container is not an array";if(_===-1){if(m=!o(y,s.slice(T+1),d,p),m)break;return}if(!u(y,_,s[T+1],m))break;if(y=y[_],typeof y!="object"||y===null)throw"container is not an object";b=a(b,_)}if(m){if(T===s.length-1&&(delete y[s[T]],Array.isArray(y)&&+s[T]===y.length-1))for(;y.length&&y[y.length-1]===void 0;)y.pop()}else y[s[T]]=d}}function a(i,s){var p=s;return r(s)?p="["+s+"]":i&&(p="."+s),i+p}function o(i,s,p,d){var y=n(p),b=!0,m=p,_=d.replace("-1",0),T=y?!1:t(p,_),g=s[0],A;for(A=0;A<i.length;A++)_=d.replace("-1",A),y&&(m=p[A%p.length],T=t(m,_)),T&&(b=!1),u(i,A,g,T)&&f(i[A],s,d.replace("-1",A))(m);return b}function u(i,s,p,d){if(i[s]===void 0){if(d)return!1;typeof p=="number"?i[s]=[]:i[s]={}}return!0}function h(i,s,p){return{set:function(){throw"bad container"},get:function(){},astr:s,parts:p,obj:i}}},{"./array":760,"fast-isnumeric":241}],787:[function(e,v,M){v.exports=function(){}},{}],788:[function(e,v,M){var r=e("d3"),n=e("fast-isnumeric"),l=[];v.exports=function(c,t){if(l.indexOf(c)!==-1)return;l.push(c);var f=1e3;n(t)?f=t:t==="long"&&(f=3e3);var a=r.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0);var o=a.selectAll(".notifier-note").data(l);function u(h){h.duration(700).style("opacity",0).each("end",function(i){var s=l.indexOf(i);s!==-1&&l.splice(s,1),r.select(this).remove()})}o.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(h){var i=r.select(this);i.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){i.transition().call(u)});for(var s=i.append("p"),p=h.split(/<br\s*\/?>/g),d=0;d<p.length;d++)d&&s.append("br"),s.append("span").text(p[d]);t==="stick"?i.transition().duration(350).style("opacity",1):i.transition().duration(700).style("opacity",1).transition().delay(f).call(u)})}},{d3:169,"fast-isnumeric":241}],789:[function(e,v,M){var r=e("./setcursor"),n="data-savedcursor",l="!!";v.exports=function(t,f){var a=t.attr(n);if(f){if(!a){for(var o=(t.attr("class")||"").split(" "),u=0;u<o.length;u++){var h=o[u];h.indexOf("cursor-")===0&&t.attr(n,h.substr(7)).classed(h,!1)}t.attr(n)||t.attr(n,l)}r(t,f)}else a&&(t.attr(n,null),a===l?r(t):r(t,a))}},{"./setcursor":799}],790:[function(e,v,M){var r=e("./matrix").dot,n=e("../constants/numerical").BADNUM,l=v.exports={};l.tester=function(t){var f=t.slice(),a=f[0][0],o=a,u=f[0][1],h=u,i;for(f.push(f[0]),i=1;i<f.length;i++)a=Math.min(a,f[i][0]),o=Math.max(o,f[i][0]),u=Math.min(u,f[i][1]),h=Math.max(h,f[i][1]);var s=!1,p;f.length===5&&(f[0][0]===f[1][0]?f[2][0]===f[3][0]&&f[0][1]===f[3][1]&&f[1][1]===f[2][1]&&(s=!0,p=function(_){return _[0]===f[0][0]}):f[0][1]===f[1][1]&&f[2][1]===f[3][1]&&f[0][0]===f[3][0]&&f[1][0]===f[2][0]&&(s=!0,p=function(_){return _[1]===f[0][1]}));function d(_,T){var g=_[0],A=_[1];return!(g===n||g<a||g>o||A===n||A<u||A>h||T&&p(_))}function y(_,T){var g=_[0],A=_[1];if(g===n||g<a||g>o||A===n||A<u||A>h)return!1;var k=f.length,R=f[0][0],L=f[0][1],z=0,E,S,C,D,F;for(E=1;E<k;E++)if(S=R,C=L,R=f[E][0],L=f[E][1],D=Math.min(S,R),!(g<D||g>Math.max(S,R)||A>Math.max(C,L)))if(A<Math.min(C,L))g!==D&&z++;else{if(R===S?F=A:F=C+(g-S)*(L-C)/(R-S),A===F)return!(E===1&&T);A<=F&&g!==D&&z++}return z%2===1}var b=!0,m=f[0];for(i=1;i<f.length;i++)if(m[0]!==f[i][0]||m[1]!==f[i][1]){b=!1;break}return{xmin:a,xmax:o,ymin:u,ymax:h,pts:f,contains:s?d:y,isRect:s,degenerate:b}},l.isSegmentBent=function(t,f,a,o){var u=t[f],h=[t[a][0]-u[0],t[a][1]-u[1]],i=r(h,h),s=Math.sqrt(i),p=[-h[1]/s,h[0]/s],d,y,b;for(d=f+1;d<a;d++)if(y=[t[d][0]-u[0],t[d][1]-u[1]],b=r(y,h),b<0||b>i||Math.abs(r(y,p))>o)return!0;return!1},l.filter=function(t,f){var a=[t[0]],o=0,u=0;function h(s){t.push(s);var p=a.length,d=o;a.splice(u+1);for(var y=d+1;y<t.length;y++)(y===t.length-1||l.isSegmentBent(t,d,y+1,f))&&(a.push(t[y]),a.length<p-2&&(o=y,u=a.length-1),d=y)}if(t.length>1){var i=t.pop();h(i)}return{addPt:h,raw:t,filtered:a}}},{"../constants/numerical":753,"./matrix":784}],791:[function(e,v,M){(function(r){(function(){var n=e("./show_no_webgl_msg"),l=e("regl");v.exports=function(t,f){var a=t._fullLayout,o=!0;return a._glcanvas.each(function(u){if(!u.regl&&!(u.pick&&!a._has("parcoords"))){try{u.regl=l({canvas:this,attributes:{antialias:!u.pick,preserveDrawingBuffer:!0},pixelRatio:t._context.plotGlPixelRatio||r.devicePixelRatio,extensions:f||[]})}catch{o=!1}u.regl||(o=!1),o&&this.addEventListener("webglcontextlost",function(h){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:h,layer:u.key})},!1)}}),o||n({container:a._glcontainer.node()}),o}}).call(this)}).call(this,typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":800,regl:540}],792:[function(e,v,M){var r=e("fast-isnumeric"),n=e("is-mobile");v.exports=function(t){var f;if(t&&t.hasOwnProperty("userAgent")?f=t.userAgent:f=l(),typeof f!="string")return!0;var a=n({ua:{headers:{"user-agent":f}},tablet:!0,featureDetect:!1});if(!a)for(var o=f.split(" "),u=1;u<o.length;u++){var h=o[u];if(h.indexOf("Safari")!==-1)for(var i=u-1;i>-1;i--){var s=o[i];if(s.substr(0,8)==="Version/"){var p=s.substr(8).split(".")[0];if(r(p)&&(p=+p),p>=13)return!0}}}return a};function l(){var c;return typeof navigator<"u"&&(c=navigator.userAgent),c&&c.headers&&typeof c.headers["user-agent"]=="string"&&(c=c.headers["user-agent"]),c}},{"fast-isnumeric":241,"is-mobile":467}],793:[function(e,v,M){v.exports=function(n,l){if(l instanceof RegExp){for(var c=l.toString(),t=0;t<n.length;t++)if(n[t]instanceof RegExp&&n[t].toString()===c)return n;n.push(l)}else(l||l===0)&&n.indexOf(l)===-1&&n.push(l);return n}},{}],794:[function(e,v,M){var r=e("../lib"),n=e("../plot_api/plot_config").dfltConfig;function l(t,f){for(var a=[],o,u=0;u<f.length;u++)o=f[u],o===t?a[u]=o:typeof o=="object"?a[u]=Array.isArray(o)?r.extendDeep([],o):r.extendDeepAll({},o):a[u]=o;return a}var c={};c.add=function(t,f,a,o,u){var h,i;if(t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},i=t.undoQueue.index,t.autoplay){t.undoQueue.inSequence||(t.autoplay=!1);return}!t.undoQueue.sequence||t.undoQueue.beginSequence?(h={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(i,t.undoQueue.queue.length-i,h),t.undoQueue.index+=1):h=t.undoQueue.queue[i-1],t.undoQueue.beginSequence=!1,h&&(h.undo.calls.unshift(f),h.undo.args.unshift(a),h.redo.calls.push(o),h.redo.args.push(u)),t.undoQueue.queue.length>n.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--)},c.startSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},c.stopSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},c.undo=function(f){var a,o;if(f.framework&&f.framework.isPolar){f.framework.undo();return}if(!(f.undoQueue===void 0||isNaN(f.undoQueue.index)||f.undoQueue.index<=0)){for(f.undoQueue.index--,a=f.undoQueue.queue[f.undoQueue.index],f.undoQueue.inSequence=!0,o=0;o<a.undo.calls.length;o++)c.plotDo(f,a.undo.calls[o],a.undo.args[o]);f.undoQueue.inSequence=!1,f.autoplay=!1}},c.redo=function(f){var a,o;if(f.framework&&f.framework.isPolar){f.framework.redo();return}if(!(f.undoQueue===void 0||isNaN(f.undoQueue.index)||f.undoQueue.index>=f.undoQueue.queue.length)){for(a=f.undoQueue.queue[f.undoQueue.index],f.undoQueue.inSequence=!0,o=0;o<a.redo.calls.length;o++)c.plotDo(f,a.redo.calls[o],a.redo.args[o]);f.undoQueue.inSequence=!1,f.autoplay=!1,f.undoQueue.index++}},c.plotDo=function(t,f,a){t.autoplay=!0,a=l(t,a),f.apply(null,a)},v.exports=c},{"../lib":778,"../plot_api/plot_config":815}],795:[function(e,v,M){M.counter=function(r,n,l,c){var t=(n||"")+(l?"":"$"),f=c===!1?"":"^";return r==="xy"?new RegExp(f+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+t):new RegExp(f+r+"([2-9]|[1-9][0-9]+)?"+t)}},{}],796:[function(e,v,M){var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,n=/^[^\.\[\]]+$/;v.exports=function(l,c){for(;c;){var t=l.match(r);if(t)l=t[1];else if(l.match(n))l="";else throw new Error("bad relativeAttr call:"+[l,c]);if(c.charAt(0)==="^")c=c.slice(1);else break}return l&&c.charAt(0)!=="["?l+"."+c:l+c}},{}],797:[function(e,v,M){var r=e("./array").isArrayOrTypedArray,n=e("./is_plain_object");v.exports=function l(c,t){for(var f in t){var a=t[f],o=c[f];if(o!==a)if(f.charAt(0)==="_"||typeof a=="function"){if(f in c)continue;c[f]=a}else if(r(a)&&r(o)&&n(a[0])){if(f==="customdata"||f==="ids")continue;for(var u=Math.min(a.length,o.length),h=0;h<u;h++)o[h]!==a[h]&&n(a[h])&&n(o[h])&&l(o[h],a[h])}else n(a)&&n(o)&&(l(o,a),Object.keys(o).length||delete c[f])}}},{"./array":760,"./is_plain_object":779}],798:[function(e,v,M){var r=e("fast-isnumeric"),n=e("./loggers"),l=e("./identity"),c=e("../constants/numerical").BADNUM,t=1e-9;M.findBin=function(h,i,s){if(r(i.start))return s?Math.ceil((h-i.start)/i.size-t)-1:Math.floor((h-i.start)/i.size+t);var p=0,d=i.length,y=0,b=d>1?(i[d-1]-i[0])/(d-1):1,m,_;for(b>=0?_=s?f:a:_=s?u:o,h+=b*t*(s?-1:1)*(b>=0?1:-1);p<d&&y++<100;)m=Math.floor((p+d)/2),_(i[m],h)?p=m+1:d=m;return y>90&&n.log("Long binary search..."),p-1};function f(h,i){return h<i}function a(h,i){return h<=i}function o(h,i){return h>i}function u(h,i){return h>=i}M.sorterAsc=function(h,i){return h-i},M.sorterDes=function(h,i){return i-h},M.distinctVals=function(h,i){var s=(i||{}).unitMinDiff,p=h.slice();p.sort(M.sorterAsc);var d;for(d=p.length-1;d>-1&&p[d]===c;d--);var y=1;s||(y=p[d]-p[0]||1);for(var b=y/(d||1)/1e4,m=[],_,T=0;T<=d;T++){var g=p[T],A=g-_;_===void 0?(m.push(g),_=g):A>b&&(y=Math.min(y,A),m.push(g),_=g)}return{vals:m,minDiff:y}},M.roundUp=function(h,i,s){for(var p=0,d=i.length-1,y,b=0,m=s?0:1,_=s?1:0,T=s?Math.ceil:Math.floor;p<d&&b++<100;)y=T((p+d)/2),i[y]<=h?p=y+m:d=y-_;return i[p]},M.sort=function(h,i){for(var s=0,p=0,d=1;d<h.length;d++){var y=i(h[d],h[d-1]);if(y<0?s=1:y>0&&(p=1),s&&p)return h.sort(i)}return p?h:h.reverse()},M.findIndexOfMin=function(h,i){i=i||l;for(var s=1/0,p,d=0;d<h.length;d++){var y=i(h[d]);y<s&&(s=y,p=d)}return p}},{"../constants/numerical":753,"./identity":776,"./loggers":782,"fast-isnumeric":241}],799:[function(e,v,M){v.exports=function(n,l){(n.attr("class")||"").split(" ").forEach(function(c){c.indexOf("cursor-")===0&&n.classed(c,!1)}),l&&n.classed("cursor-"+l,!0)}},{}],800:[function(e,v,M){var r=e("../components/color"),n=function(){};v.exports=function(c){for(var t in c)typeof c[t]=="function"&&(c[t]=n);c.destroy=function(){c.container.parentNode.removeChild(c.container)};var f=document.createElement("div");f.className="no-webgl",f.style.cursor="pointer",f.style.fontSize="24px",f.style.color=r.defaults[0],f.style.position="absolute",f.style.left=f.style.top="0px",f.style.width=f.style.height="100%",f.style["background-color"]=r.lightLine,f.style["z-index"]=30;var a=document.createElement("p");return a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",a.style.position="relative",a.style.top="50%",a.style.left="50%",a.style.height="30%",a.style.width="50%",a.style.margin="-15% 0 0 -25%",f.appendChild(a),c.container.appendChild(f),c.container.style.background="#FFFFFF",c.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":643}],801:[function(e,v,M){var r=e("fast-isnumeric"),n=e("./array").isArrayOrTypedArray;M.aggNums=function(l,c,t,f){var a,o;if((!f||f>t.length)&&(f=t.length),r(c)||(c=!1),n(t[0])){for(o=new Array(f),a=0;a<f;a++)o[a]=M.aggNums(l,c,t[a]);t=o}for(a=0;a<f;a++)r(c)?r(t[a])&&(c=l(+c,+t[a])):c=t[a];return c},M.len=function(l){return M.aggNums(function(c){return c+1},0,l)},M.mean=function(l,c){return c||(c=M.len(l)),M.aggNums(function(t,f){return t+f},0,l)/c},M.midRange=function(l){if(!(l===void 0||l.length===0))return(M.aggNums(Math.max,null,l)+M.aggNums(Math.min,null,l))/2},M.variance=function(l,c,t){return c||(c=M.len(l)),r(t)||(t=M.mean(l,c)),M.aggNums(function(f,a){return f+Math.pow(a-t,2)},0,l)/c},M.stdev=function(l,c,t){return Math.sqrt(M.variance(l,c,t))},M.median=function(l){var c=l.slice().sort();return M.interp(c,.5)},M.interp=function(l,c){if(!r(c))throw"n should be a finite number";if(c=c*l.length-.5,c<0)return l[0];if(c>l.length-1)return l[l.length-1];var t=c%1;return t*l[Math.ceil(c)]+(1-t)*l[Math.floor(c)]}},{"./array":760,"fast-isnumeric":241}],802:[function(e,v,M){var r=e("color-normalize");function n(l){return l?r(l):[0,0,0,1]}v.exports=n},{"color-normalize":125}],803:[function(e,v,M){var r=e("d3"),n=e("../lib"),l=n.strTranslate,c=e("../constants/xmlns_namespaces"),t=e("../constants/alignment").LINE_SPACING;function f(U,X){return U.node().getBoundingClientRect()[X]}var a=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;M.convertToTspans=function(U,X,I){var B=U.text(),j=!U.attr("data-notex")&&typeof MathJax<"u"&&B.match(a),H=r.select(U.node().parentNode);if(H.empty())return;var K=U.attr("class")?U.attr("class").split(" ")[0]:"text";K+="-math",H.selectAll("svg."+K).remove(),H.selectAll("g."+K+"-group").remove(),U.style("display",null).attr({"data-unformatted":B,"data-math":"N"});function te(){H.empty()||(K=U.attr("class")+"-math",H.select("svg."+K).remove()),U.text("").style("white-space","pre");var J=N(U.node(),B);J&&U.style("pointer-events","all"),M.positionText(U),I&&I.call(U)}return j?(X&&X._promises||[]).push(new Promise(function(J){U.style("display","none");var oe=parseInt(U.node().style.fontSize,10),ie={fontSize:oe};i(j[2],ie,function(Q,V,se){H.selectAll("svg."+K).remove(),H.selectAll("g."+K+"-group").remove();var re=Q&&Q.select("svg");if(!re||!re.node()){te(),J();return}var ee=H.append("g").classed(K+"-group",!0).attr({"pointer-events":"none","data-unformatted":B,"data-math":"Y"});ee.node().appendChild(re.node()),V&&V.node()&&re.node().insertBefore(V.node().cloneNode(!0),re.node().firstChild),re.attr({class:K,height:se.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ae=U.node().style.fill||"black",fe=re.select("g");fe.attr({fill:ae,stroke:ae});var de=f(fe,"width"),pe=f(fe,"height"),W=+U.attr("x")-de*{start:0,middle:.5,end:1}[U.attr("text-anchor")||"start"],ue=oe||f(U,"height"),me=-ue/4;K[0]==="y"?(ee.attr({transform:"rotate("+[-90,+U.attr("x"),+U.attr("y")]+")"+l(-de/2,me-pe/2)}),re.attr({x:+U.attr("x"),y:+U.attr("y")})):K[0]==="l"?re.attr({x:U.attr("x"),y:me-pe/2}):K[0]==="a"&&K.indexOf("atitle")!==0?re.attr({x:0,y:me}):re.attr({x:W,y:+U.attr("y")+me-pe/2}),I&&I.call(U,ee),J(ee)})})):te(),U};var o=/(<|&lt;|&#60;)/g,u=/(>|&gt;|&#62;)/g;function h(U){return U.replace(o,"\\lt ").replace(u,"\\gt ")}function i(U,X,I){var B,j,H,K;MathJax.Hub.Queue(function(){return j=n.extendDeepAll({},MathJax.Hub.config),H=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if(B=MathJax.Hub.config.menuSettings.renderer,B!=="SVG")return MathJax.Hub.setRenderer("SVG")},function(){var te="math-output-"+n.randstr({},64);return K=r.select("body").append("div").attr({id:te}).style({visibility:"hidden",position:"absolute"}).style({"font-size":X.fontSize+"px"}).text(h(U)),MathJax.Hub.Typeset(K.node())},function(){var te=r.select("body").select("#MathJax_SVG_glyphs");if(K.select(".MathJax_SVG").empty()||!K.select("svg").node())n.log("There was an error in the tex syntax.",U),I();else{var J=K.select("svg").node().getBoundingClientRect();I(K.select(".MathJax_SVG"),te,J)}if(K.remove(),B!=="SVG")return MathJax.Hub.setRenderer(B)},function(){return H!==void 0&&(MathJax.Hub.processSectionDelay=H),MathJax.Hub.Config(j)})}var s={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},p={sub:"0.3em",sup:"-0.6em"},d={sub:"-0.21em",sup:"0.42em"},y="​",b=["http:","https:","mailto:","",void 0,":"],m=M.NEWLINES=/(\r\n?|\n)/g,_=/(<[^<>]*>)/,T=/<(\/?)([^ >]*)(\s+(.*))?>/i,g=/<br(\s+.*)?>/i;M.BR_TAG_ALL=/<br(\s+.*)?>/gi;var A=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,k=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,R=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,L=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function z(U,X){if(!U)return null;var I=U.match(X),B=I&&(I[3]||I[4]);return B&&D(B)}var E=/(^|;)\s*color:/;M.plainText=function(U,X){X=X||{};for(var I=X.len!==void 0&&X.len!==-1?X.len:1/0,B=X.allowedTags!==void 0?X.allowedTags:["br"],j="...",H=j.length,K=U.split(_),te=[],J="",oe=0,ie=0;ie<K.length;ie++){var Q=K[ie],V=Q.match(T),se=V&&V[2].toLowerCase();if(se)B.indexOf(se)!==-1&&(te.push(Q),J=se);else{var re=Q.length;if(oe+re<I)te.push(Q),oe+=re;else if(oe<I){var ee=I-oe;J&&(J!=="br"||ee<=H||re<=H)&&te.pop(),I>H?te.push(Q.substr(0,ee-H)+j):te.push(Q.substr(0,ee));break}J=""}}return te.join("")};var S={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},C=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function D(U){return U.replace(C,function(X,I){var B;return I.charAt(0)==="#"?B=F(I.charAt(1)==="x"?parseInt(I.substr(2),16):parseInt(I.substr(1),10)):B=S[I],B||X})}M.convertEntities=D;function F(U){if(!(U>1114111)){var X=String.fromCodePoint;if(X)return X(U);var I=String.fromCharCode;return U<=65535?I(U):I((U>>10)+55232,U%1024+56320)}}function N(U,X){X=X.replace(m," ");var I=!1,B=[],j,H=-1;function K(){H++;var me=document.createElementNS(c.svg,"tspan");r.select(me).attr({class:"line",dy:H*t+"em"}),U.appendChild(me),j=me;var be=B;if(B=[{node:me}],be.length>1)for(var ke=1;ke<be.length;ke++)te(be[ke])}function te(me){var be=me.type,ke={},Pe;if(be==="a"){Pe="a";var je=me.target,ze=me.href,Ze=me.popup;ze&&(ke={"xlink:xlink:show":je==="_blank"||je.charAt(0)!=="_"?"new":"replace",target:je,"xlink:xlink:href":ze},Ze&&(ke.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ze+'");return false;'))}else Pe="tspan";me.style&&(ke.style=me.style);var tt=document.createElementNS(c.svg,Pe);if(be==="sup"||be==="sub"){J(j,y),j.appendChild(tt);var Ce=document.createElementNS(c.svg,"tspan");J(Ce,y),r.select(Ce).attr("dy",d[be]),ke.dy=p[be],j.appendChild(tt),j.appendChild(Ce)}else j.appendChild(tt);r.select(tt).attr(ke),j=me.node=tt,B.push(me)}function J(me,be){me.appendChild(document.createTextNode(be))}function oe(me){if(B.length===1){n.log("Ignoring unexpected end tag </"+me+">.",X);return}var be=B.pop();me!==be.type&&n.log("Start tag <"+be.type+"> doesnt match end tag <"+me+">. Pretending it did match.",X),j=B[B.length-1].node}var ie=g.test(X);ie?K():(j=U,B=[{node:U}]);for(var Q=X.split(_),V=0;V<Q.length;V++){var se=Q[V],re=se.match(T),ee=re&&re[2].toLowerCase(),ae=s[ee];if(ee==="br")K();else if(ae===void 0)J(j,D(se));else if(re[1])oe(ee);else{var fe=re[4],de={type:ee},pe=z(fe,A);if(pe?(pe=pe.replace(E,"$1 fill:"),ae&&(pe+=";"+ae)):ae&&(pe=ae),pe&&(de.style=pe),ee==="a"){I=!0;var W=z(fe,k);if(W){var ue=document.createElement("a");ue.href=W,b.indexOf(ue.protocol)!==-1&&(de.href=encodeURI(decodeURI(W)),de.target=z(fe,R)||"_blank",de.popup=z(fe,L))}}te(de)}}return I}M.sanitizeHTML=function(X){X=X.replace(m," ");for(var I=document.createElement("p"),B=I,j=[],H=X.split(_),K=0;K<H.length;K++){var te=H[K],J=te.match(T),oe=J&&J[2].toLowerCase();if(oe in s)if(J[1])j.length&&(B=j.pop());else{var ie=J[4],Q=z(ie,A),V=Q?{style:Q}:{};if(oe==="a"){var se=z(ie,k);if(se){var re=document.createElement("a");if(re.href=se,b.indexOf(re.protocol)!==-1){V.href=encodeURI(decodeURI(se));var ee=z(ie,R);ee&&(V.target=ee)}}}var ae=document.createElement(oe);B.appendChild(ae),r.select(ae).attr(V),B=ae,j.push(ae)}else B.appendChild(document.createTextNode(D(te)))}var fe="innerHTML";return I[fe]},M.lineCount=function(X){return X.selectAll("tspan.line").size()||1},M.positionText=function(X,I,B){return X.each(function(){var j=r.select(this);function H(J,oe){return oe===void 0?(oe=j.attr(J),oe===null&&(j.attr(J,0),oe=0)):j.attr(J,oe),oe}var K=H("x",I),te=H("y",B);this.nodeName==="text"&&j.selectAll("tspan.line").attr({x:K,y:te})})};function G(U,X,I){var B=I.horizontalAlign,j=I.verticalAlign||"top",H=U.node().getBoundingClientRect(),K=X.node().getBoundingClientRect(),te,J,oe;return j==="bottom"?J=function(){return H.bottom-te.height}:j==="middle"?J=function(){return H.top+(H.height-te.height)/2}:J=function(){return H.top},B==="right"?oe=function(){return H.right-te.width}:B==="center"?oe=function(){return H.left+(H.width-te.width)/2}:oe=function(){return H.left},function(){te=this.node().getBoundingClientRect();var ie=oe()-K.left,Q=J()-K.top,V=I.gd||{};if(I.gd){V._fullLayout._calcInverseTransform(V);var se=n.apply3DTransform(V._fullLayout._invTransform)(ie,Q);ie=se[0],Q=se[1]}return this.style({top:Q+"px",left:ie+"px","z-index":1e3}),this}}M.makeEditable=function(U,X){var I=X.gd,B=X.delegate,j=r.dispatch("edit","input","cancel"),H=B||U;if(U.style({"pointer-events":B?"none":"all"}),U.size()!==1)throw new Error("boo");function K(){J(),U.style({opacity:0});var oe=H.attr("class"),ie;oe?ie="."+oe.split(" ")[0]+"-math-group":ie="[class*=-math-group]",ie&&r.select(U.node().parentNode).select(ie).style({opacity:0})}function te(oe){var ie=oe.node(),Q=document.createRange();Q.selectNodeContents(ie);var V=window.getSelection();V.removeAllRanges(),V.addRange(Q),ie.focus()}function J(){var oe=r.select(I),ie=oe.select(".svg-container"),Q=ie.append("div"),V=U.node().style,se=parseFloat(V.fontSize||12),re=X.text;re===void 0&&(re=U.attr("data-unformatted")),Q.classed("plugin-editable editable",!0).style({position:"absolute","font-family":V.fontFamily||"Arial","font-size":se,color:X.fill||V.fill||"black",opacity:1,"background-color":X.background||"transparent",outline:"#ffffff33 1px solid",margin:[-se/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(re).call(G(U,ie,X)).on("blur",function(){I._editing=!1,U.text(this.textContent).style({opacity:1});var ee=r.select(this).attr("class"),ae;ee?ae="."+ee.split(" ")[0]+"-math-group":ae="[class*=-math-group]",ae&&r.select(U.node().parentNode).select(ae).style({opacity:0});var fe=this.textContent;r.select(this).transition().duration(0).remove(),r.select(document).on("mouseup",null),j.edit.call(U,fe)}).on("focus",function(){var ee=this;I._editing=!0,r.select(document).on("mouseup",function(){if(r.event.target===ee)return!1;document.activeElement===Q.node()&&Q.node().blur()})}).on("keyup",function(){r.event.which===27?(I._editing=!1,U.style({opacity:1}),r.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),j.cancel.call(U,this.textContent)):(j.input.call(U,this.textContent),r.select(this).call(G(U,ie,X)))}).on("keydown",function(){r.event.which===13&&this.blur()}).call(te)}return X.immediate?K():H.on("click",K),r.rebind(U,j,"on")}},{"../constants/alignment":745,"../constants/xmlns_namespaces":754,"../lib":778,d3:169}],804:[function(e,v,M){var r={};M.throttle=function(c,t,f){var a=r[c],o=Date.now();if(!a){for(var u in r)r[u].ts<o-6e4&&delete r[u];a=r[c]={ts:0,timer:null}}n(a);function h(){f(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}if(o>a.ts+t){h();return}a.timer=setTimeout(function(){h(),a.timer=null},t)},M.done=function(l){var c=r[l];return!c||!c.timer?Promise.resolve():new Promise(function(t){var f=c.onDone;c.onDone=function(){f&&f(),t(),c.onDone=null}})},M.clear=function(l){if(l)n(r[l]),delete r[l];else for(var c in r)M.clear(c)};function n(l){l&&l.timer!==null&&(clearTimeout(l.timer),l.timer=null)}},{}],805:[function(e,v,M){var r=e("fast-isnumeric");v.exports=function(l,c){if(l>0)return Math.log(l)/Math.LN10;var t=Math.log(Math.min(c[0],c[1]))/Math.LN10;return r(t)||(t=Math.log(Math.max(c[0],c[1]))/Math.LN10-6),t}},{"fast-isnumeric":241}],806:[function(e,v,M){var r=v.exports={},n=e("../plots/geo/constants").locationmodeToLayer,l=e("topojson-client").feature;r.getTopojsonName=function(c){return[c.scope.replace(/ /g,"-"),"_",c.resolution.toString(),"m"].join("")},r.getTopojsonPath=function(c,t){return c+t+".json"},r.getTopojsonFeatures=function(c,t){var f=n[c.locationmode],a=t.objects[f];return l(t,a).features}},{"../plots/geo/constants":858,"topojson-client":579}],807:[function(e,v,M){v.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],808:[function(e,v,M){v.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],809:[function(e,v,M){var r=e("../registry");v.exports=function(l){for(var c=r.layoutArrayContainers,t=r.layoutArrayRegexes,f=l.split("[")[0],a,o,u=0;u<t.length;u++)if(o=l.match(t[u]),o&&o.index===0){a=o[0];break}if(a||(a=c[c.indexOf(f)]),!a)return!1;var h=l.substr(a.length);return h?(o=h.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),o?{array:a,index:Number(o[1]),property:o[3]||""}:!1):{array:a,index:"",property:""}}},{"../registry":911}],810:[function(e,v,M){var r=e("../lib"),n=r.extendFlat,l=r.isPlainObject,c={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},t={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},f=c.flags.slice().concat(["fullReplot"]),a=t.flags.slice().concat("layoutReplot");v.exports={traces:c,layout:t,traceFlags:function(){return o(f)},layoutFlags:function(){return o(a)},update:function(i,s){var p=s.editType;if(p&&p!=="none")for(var d=p.split("+"),y=0;y<d.length;y++)i[d[y]]=!0},overrideAll:u};function o(i){for(var s={},p=0;p<i.length;p++)s[i[p]]=!1;return s}function u(i,s,p){var d=n({},i);for(var y in d){var b=d[y];l(b)&&(d[y]=h(b,s,p,y))}return p==="from-root"&&(d.editType=s),d}function h(i,s,p,d){if(i.valType){var y=n({},i);if(y.editType=s,Array.isArray(i.items)){y.items=new Array(i.items.length);for(var b=0;b<i.items.length;b++)y.items[b]=h(i.items[b],s)}return y}else return u(i,s,d.charAt(0)==="_"?"nested":"from-root")}},{"../lib":778}],811:[function(e,v,M){var r=e("fast-isnumeric"),n=e("gl-mat4/fromQuat"),l=e("../registry"),c=e("../lib"),t=e("../plots/plots"),f=e("../plots/cartesian/axis_ids"),a=e("../components/color"),o=f.cleanId,u=f.getFromTrace,h=l.traceIs;M.clearPromiseQueue=function(g){Array.isArray(g._promises)&&g._promises.length>0&&c.log("Clearing previous rejected promises from queue."),g._promises=[]},M.cleanLayout=function(g){var A,k;g||(g={}),g.xaxis1&&(g.xaxis||(g.xaxis=g.xaxis1),delete g.xaxis1),g.yaxis1&&(g.yaxis||(g.yaxis=g.yaxis1),delete g.yaxis1),g.scene1&&(g.scene||(g.scene=g.scene1),delete g.scene1);var R=(t.subplotsRegistry.cartesian||{}).attrRegex,L=(t.subplotsRegistry.polar||{}).attrRegex,z=(t.subplotsRegistry.ternary||{}).attrRegex,E=(t.subplotsRegistry.gl3d||{}).attrRegex,S=Object.keys(g);for(A=0;A<S.length;A++){var C=S[A];if(R&&R.test(C)){var D=g[C];D.anchor&&D.anchor!=="free"&&(D.anchor=o(D.anchor)),D.overlaying&&(D.overlaying=o(D.overlaying)),D.type||(D.isdate?D.type="date":D.islog?D.type="log":D.isdate===!1&&D.islog===!1&&(D.type="linear")),(D.autorange==="withzero"||D.autorange==="tozero")&&(D.autorange=!0,D.rangemode="tozero"),delete D.islog,delete D.isdate,delete D.categories,b(D,"domain")&&delete D.domain,D.autotick!==void 0&&(D.tickmode===void 0&&(D.tickmode=D.autotick?"auto":"linear"),delete D.autotick),s(D)}else if(L&&L.test(C)){var F=g[C];s(F.radialaxis)}else if(z&&z.test(C)){var N=g[C];s(N.aaxis),s(N.baxis),s(N.caxis)}else if(E&&E.test(C)){var G=g[C],U=G.cameraposition;if(Array.isArray(U)&&U[0].length===4){var X=U[0],I=U[1],B=U[2],j=n([],X),H=[];for(k=0;k<3;++k)H[k]=I[k]+B*j[2+4*k];G.camera={eye:{x:H[0],y:H[1],z:H[2]},center:{x:I[0],y:I[1],z:I[2]},up:{x:0,y:0,z:1}},delete G.cameraposition}s(G.xaxis),s(G.yaxis),s(G.zaxis)}}var K=Array.isArray(g.annotations)?g.annotations.length:0;for(A=0;A<K;A++){var te=g.annotations[A];c.isPlainObject(te)&&(te.ref&&(te.ref==="paper"?(te.xref="paper",te.yref="paper"):te.ref==="data"&&(te.xref="x",te.yref="y"),delete te.ref),i(te,"xref"),i(te,"yref"))}var J=Array.isArray(g.shapes)?g.shapes.length:0;for(A=0;A<J;A++){var oe=g.shapes[A];c.isPlainObject(oe)&&(i(oe,"xref"),i(oe,"yref"))}var ie=Array.isArray(g.images)?g.images.length:0;for(A=0;A<ie;A++){var Q=g.images[A];c.isPlainObject(Q)&&(i(Q,"xref"),i(Q,"yref"))}var V=g.legend;return V&&(V.x>3?(V.x=1.02,V.xanchor="left"):V.x<-2&&(V.x=-.02,V.xanchor="right"),V.y>3?(V.y=1.02,V.yanchor="bottom"):V.y<-2&&(V.y=-.02,V.yanchor="top")),s(g),g.dragmode==="rotate"&&(g.dragmode="orbit"),a.clean(g),g.template&&g.template.layout&&M.cleanLayout(g.template.layout),g};function i(g,A){var k=g[A],R=A.charAt(0);k&&k!=="paper"&&(g[A]=o(k,R,!0))}function s(g){g&&((typeof g.title=="string"||typeof g.title=="number")&&(g.title={text:g.title}),A("titlefont","font"),A("titleposition","position"),A("titleside","side"),A("titleoffset","offset"));function A(k,R){var L=g[k],z=g.title&&g.title[R];L&&!z&&(g.title||(g.title={}),g.title[R]=g[k],delete g[k])}}M.cleanData=function(g){for(var A=0;A<g.length;A++){var k=g[A],R;if(k.type==="histogramy"&&"xbins"in k&&!("ybins"in k)&&(k.ybins=k.xbins,delete k.xbins),k.error_y&&"opacity"in k.error_y){var L=a.defaults,z=k.error_y.color||(h(k,"bar")?a.defaultLine:L[A%L.length]);k.error_y.color=a.addOpacity(a.rgb(z),a.opacity(z)*k.error_y.opacity),delete k.error_y.opacity}if("bardir"in k&&(k.bardir==="h"&&(h(k,"bar")||k.type.substr(0,9)==="histogram")&&(k.orientation="h",M.swapXYData(k)),delete k.bardir),k.type==="histogramy"&&M.swapXYData(k),(k.type==="histogramx"||k.type==="histogramy")&&(k.type="histogram"),"scl"in k&&!("colorscale"in k)&&(k.colorscale=k.scl,delete k.scl),"reversescl"in k&&!("reversescale"in k)&&(k.reversescale=k.reversescl,delete k.reversescl),k.xaxis&&(k.xaxis=o(k.xaxis,"x")),k.yaxis&&(k.yaxis=o(k.yaxis,"y")),h(k,"gl3d")&&k.scene&&(k.scene=t.subplotsRegistry.gl3d.cleanId(k.scene)),!h(k,"pie-like")&&!h(k,"bar-like"))if(Array.isArray(k.textposition))for(R=0;R<k.textposition.length;R++)k.textposition[R]=y(k.textposition[R]);else k.textposition&&(k.textposition=y(k.textposition));var E=l.getModule(k);if(E&&E.colorbar){var S=E.colorbar.container,C=S?k[S]:k;C&&C.colorscale&&(C.colorscale==="YIGnBu"&&(C.colorscale="YlGnBu"),C.colorscale==="YIOrRd"&&(C.colorscale="YlOrRd"))}if(k.type==="surface"&&c.isPlainObject(k.contours)){var D=["x","y","z"];for(R=0;R<D.length;R++){var F=k.contours[D[R]];c.isPlainObject(F)&&(F.highlightColor&&(F.highlightcolor=F.highlightColor,delete F.highlightColor),F.highlightWidth&&(F.highlightwidth=F.highlightWidth,delete F.highlightWidth))}}if(k.type==="candlestick"||k.type==="ohlc"){var N=(k.increasing||{}).showlegend!==!1,G=(k.decreasing||{}).showlegend!==!1,U=p(k.increasing),X=p(k.decreasing);if(U!==!1&&X!==!1){var I=d(U,X,N,G);I&&(k.name=I)}else(U||X)&&!k.name&&(k.name=U||X)}if(Array.isArray(k.transforms)){var B=k.transforms;for(R=0;R<B.length;R++){var j=B[R];if(c.isPlainObject(j))switch(j.type){case"filter":j.filtersrc&&(j.target=j.filtersrc,delete j.filtersrc),j.calendar&&(j.valuecalendar||(j.valuecalendar=j.calendar),delete j.calendar);break;case"groupby":if(j.styles=j.styles||j.style,j.styles&&!Array.isArray(j.styles)){var H=j.styles,K=Object.keys(H);j.styles=[];for(var te=0;te<K.length;te++)j.styles.push({target:K[te],value:H[K[te]]})}break}}}b(k,"line")&&delete k.line,"marker"in k&&(b(k.marker,"line")&&delete k.marker.line,b(k,"marker")&&delete k.marker),a.clean(k),k.autobinx&&(delete k.autobinx,delete k.xbins),k.autobiny&&(delete k.autobiny,delete k.ybins),s(k),k.colorbar&&s(k.colorbar),k.marker&&k.marker.colorbar&&s(k.marker.colorbar),k.line&&k.line.colorbar&&s(k.line.colorbar),k.aaxis&&s(k.aaxis),k.baxis&&s(k.baxis)}};function p(g){if(!c.isPlainObject(g))return!1;var A=g.name;return delete g.name,delete g.showlegend,(typeof A=="string"||typeof A=="number")&&String(A)}function d(g,A,k,R){if(k&&!R)return g;if(R&&!k||!g.trim())return A;if(!A.trim())return g;var L=Math.min(g.length,A.length),z;for(z=0;z<L&&g.charAt(z)===A.charAt(z);z++);var E=g.substr(0,z);return E.trim()}function y(g){var A="middle",k="center";return typeof g=="string"&&(g.indexOf("top")!==-1?A="top":g.indexOf("bottom")!==-1&&(A="bottom"),g.indexOf("left")!==-1?k="left":g.indexOf("right")!==-1&&(k="right")),A+" "+k}function b(g,A){return A in g&&typeof g[A]=="object"&&Object.keys(g[A]).length===0}M.swapXYData=function(g){var A;if(c.swapAttrs(g,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(g.z)&&Array.isArray(g.z[0])&&(g.transpose?delete g.transpose:g.transpose=!0),g.error_x&&g.error_y){var k=g.error_y,R="copy_ystyle"in k?k.copy_ystyle:!(k.color||k.thickness||k.width);c.swapAttrs(g,["error_?.copy_ystyle"]),R&&c.swapAttrs(g,["error_?.color","error_?.thickness","error_?.width"])}if(typeof g.hoverinfo=="string"){var L=g.hoverinfo.split("+");for(A=0;A<L.length;A++)L[A]==="x"?L[A]="y":L[A]==="y"&&(L[A]="x");g.hoverinfo=L.join("+")}},M.coerceTraceIndices=function(g,A){if(r(A))return[A];if(!Array.isArray(A)||!A.length)return g.data.map(function(L,z){return z});if(Array.isArray(A)){for(var k=[],R=0;R<A.length;R++)c.isIndex(A[R],g.data.length)?k.push(A[R]):c.warn("trace index (",A[R],") is not a number or is out of bounds");return k}return A},M.manageArrayContainers=function(g,A,k){var R=g.obj,L=g.parts,z=L.length,E=L[z-1],S=r(E);if(S&&A===null){var C=L.slice(0,z-1).join("."),D=c.nestedProperty(R,C).get();D.splice(E,1)}else S&&g.get()===void 0&&g.get()===void 0&&(k[g.astr]=null),g.set(A)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function _(g){var A=g.search(m);if(A>0)return g.substr(0,A)}M.hasParent=function(g,A){for(var k=_(A);k;){if(k in g)return!0;k=_(k)}return!1};var T=["x","y","z"];M.clearAxisTypes=function(g,A,k){for(var R=0;R<A.length;R++)for(var L=g._fullData[R],z=0;z<3;z++){var E=u(g,L,T[z]);if(E&&E.type!=="log"){var S=E._name,C=E._id.substr(1);if(C.substr(0,5)==="scene"){if(k[C]!==void 0)continue;S=C+"."+S}var D=S+".type";k[S]===void 0&&k[D]===void 0&&c.nestedProperty(g.layout,D).set(null)}}}},{"../components/color":643,"../lib":778,"../plots/cartesian/axis_ids":831,"../plots/plots":891,"../registry":911,"fast-isnumeric":241,"gl-mat4/fromQuat":282}],812:[function(e,v,M){var r=e("./plot_api");M.plot=r.plot,M.newPlot=r.newPlot,M.restyle=r.restyle,M.relayout=r.relayout,M.redraw=r.redraw,M.update=r.update,M._guiRestyle=r._guiRestyle,M._guiRelayout=r._guiRelayout,M._guiUpdate=r._guiUpdate,M._storeDirectGUIEdit=r._storeDirectGUIEdit,M.react=r.react,M.extendTraces=r.extendTraces,M.prependTraces=r.prependTraces,M.addTraces=r.addTraces,M.deleteTraces=r.deleteTraces,M.moveTraces=r.moveTraces,M.purge=r.purge,M.addFrames=r.addFrames,M.deleteFrames=r.deleteFrames,M.animate=r.animate,M.setPlotConfig=r.setPlotConfig,M.toImage=e("./to_image"),M.validate=e("./validate"),M.downloadImage=e("../snapshot/download");var n=e("./template_api");M.makeTemplate=n.makeTemplate,M.validateTemplate=n.validateTemplate},{"../snapshot/download":913,"./plot_api":814,"./template_api":819,"./to_image":820,"./validate":821}],813:[function(e,v,M){var r=e("../lib/is_plain_object"),n=e("../lib/noop"),l=e("../lib/loggers"),c=e("../lib/search").sorterAsc,t=e("../registry");M.containerArrayMatch=e("./container_array_match");var f=M.isAddVal=function(u){return u==="add"||r(u)},a=M.isRemoveVal=function(u){return u===null||u==="remove"};M.applyContainerArrayChanges=function(u,h,i,s,p){var d=h.astr,y=t.getComponentMethod(d,"supplyLayoutDefaults"),b=t.getComponentMethod(d,"draw"),m=t.getComponentMethod(d,"drawOne"),_=s.replot||s.recalc||y===n||b===n,T=u.layout,g=u._fullLayout;if(i[""]){Object.keys(i).length>1&&l.warn("Full array edits are incompatible with other edits",d);var A=i[""][""];if(a(A))h.set(null);else if(Array.isArray(A))h.set(A);else return l.warn("Unrecognized full array edit value",d,A),!0;return _?!1:(y(T,g),b(u),!0)}var k=Object.keys(i).map(Number).sort(c),R=h.get(),L=R||[],z=p(g,d).get(),E=[],S=-1,C=L.length,D,F,N,G,U,X,I,B;for(D=0;D<k.length;D++){if(N=k[D],G=i[N],U=Object.keys(G),X=G[""],I=f(X),N<0||N>L.length-(I?0:1)){l.warn("index out of range",d,N);continue}if(X!==void 0)U.length>1&&l.warn("Insertion & removal are incompatible with edits to the same index.",d,N),a(X)?E.push(N):I?(X==="add"&&(X={}),L.splice(N,0,X),z&&z.splice(N,0,{})):l.warn("Unrecognized full object edit value",d,N,X),S===-1&&(S=N);else for(F=0;F<U.length;F++)B=d+"["+N+"].",p(L[N],U[F],B).set(G[U[F]])}for(D=E.length-1;D>=0;D--)L.splice(E[D],1),z&&z.splice(E[D],1);if(L.length?R||h.set(L):h.set(null),_)return!1;if(y(T,g),m!==n){var j;if(S===-1)j=k;else{for(C=Math.max(L.length,C),j=[],D=0;D<k.length&&(N=k[D],!(N>=S));D++)j.push(N);for(D=S;D<C;D++)j.push(D)}for(D=0;D<j.length;D++)m(u,j[D])}else b(u);return!0}},{"../lib/is_plain_object":779,"../lib/loggers":782,"../lib/noop":787,"../lib/search":798,"../registry":911,"./container_array_match":809}],814:[function(e,v,M){var r=e("d3"),n=e("fast-isnumeric"),l=e("has-hover"),c=e("../lib"),t=c.nestedProperty,f=e("../lib/events"),a=e("../lib/queue"),o=e("../registry"),u=e("./plot_schema"),h=e("../plots/plots"),i=e("../plots/polar/legacy"),s=e("../plots/cartesian/axes"),p=e("../components/drawing"),d=e("../components/color"),y=e("../plots/cartesian/graph_interact").initInteractions,b=e("../constants/xmlns_namespaces"),m=e("../lib/svg_text_utils"),_=e("../plots/cartesian/select").clearSelect,T=e("./plot_config").dfltConfig,g=e("./manage_arrays"),A=e("./helpers"),k=e("./subroutines"),R=e("./edit_types"),L=e("../plots/cartesian/constants").AX_NAME_PATTERN,z=0,E=5;function S(Me,Ie,He,Xe){var ht;if(Me=c.getGraphDiv(Me),f.init(Me),c.isPlainObject(Ie)){var it=Ie;Ie=it.data,He=it.layout,Xe=it.config,ht=it.frames}var Ge=f.triggerHandler(Me,"plotly_beforeplot",[Ie,He,Xe]);if(Ge===!1)return Promise.reject();!Ie&&!He&&!c.isPlotDiv(Me)&&c.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",Me);function ot(){if(ht)return M.addFrames(Me,ht)}G(Me,Xe),He||(He={}),r.select(Me).classed("js-plotly-plot",!0),p.makeTester(),Array.isArray(Me._promises)||(Me._promises=[]);var Je=(Me.data||[]).length===0&&Array.isArray(Ie);Array.isArray(Ie)&&(A.cleanData(Ie),Je?Me.data=Ie:Me.data.push.apply(Me.data,Ie),Me.empty=!1),(!Me.layout||Je)&&(Me.layout=A.cleanLayout(He)),h.supplyDefaults(Me);var st=Me._fullLayout,It=st._has("cartesian");if(!st._has("polar")&&Ie&&Ie[0]&&Ie[0].r)return c.log("Legacy polar charts are deprecated!"),U(Me,Ie,He);st._replotting=!0,(Je||st._shouldCreateBgLayer)&&(et(Me),st._shouldCreateBgLayer&&delete st._shouldCreateBgLayer),Me.framework!==et&&(Me.framework=et,et(Me)),p.initGradients(Me),Je&&s.saveShowSpikeInitial(Me);var Ft=!Me.calcdata||Me.calcdata.length!==(Me._fullData||[]).length;Ft&&h.doCalcdata(Me);for(var nr=0;nr<Me.calcdata.length;nr++)Me.calcdata[nr][0].trace=Me._fullData[nr];Me._context.responsive?Me._responsiveChartHandler||(Me._responsiveChartHandler=function(){c.isHidden(Me)||h.resize(Me)},window.addEventListener("resize",Me._responsiveChartHandler)):c.clearResponsive(Me);var We=c.extendFlat({},st._size),Fe=0;function _t(){for(var Zt=st._basePlotModules,_r=0;_r<Zt.length;_r++)Zt[_r].drawFramework&&Zt[_r].drawFramework(Me);if(!st._glcanvas&&st._has("gl")&&(st._glcanvas=st._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Or){return Or.key}),st._glcanvas.enter().append("canvas").attr("class",function(Or){return"gl-canvas gl-canvas-"+Or.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})),st._glcanvas){st._glcanvas.attr("width",st.width).attr("height",st.height);var Gr=st._glcanvas.data()[0].regl;if(Gr&&(Math.floor(st.width)!==Gr._gl.drawingBufferWidth||Math.floor(st.height)!==Gr._gl.drawingBufferHeight)){var zr="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(Fe)c.error(zr);else return c.log(zr+" Clearing graph and plotting again."),h.cleanPlot([],{},Me._fullData,st),h.supplyDefaults(Me),st=Me._fullLayout,h.doCalcdata(Me),Fe++,_t()}}return st.modebar.orientation==="h"?st._modebardiv.style("height",null).style("width","100%"):st._modebardiv.style("width",null).style("height",st.height+"px"),h.previousPromises(Me)}function Mt(){if(h.clearAutoMarginIds(Me),k.drawMarginPushers(Me),s.allowAutoMargin(Me),st._has("pie"))for(var Zt=Me._fullData,_r=0;_r<Zt.length;_r++){var Gr=Zt[_r];Gr.type==="pie"&&Gr.automargin&&h.allowAutoMargin(Me,"pie."+Gr.uid+".automargin")}return h.doAutoMargin(Me),h.previousPromises(Me)}function wt(){if(h.didMarginChange(We,st._size))return c.syncOrAsync([Mt,k.layoutStyles],Me)}function Dt(){if(!Ft){Rt();return}return c.syncOrAsync([o.getComponentMethod("shapes","calcAutorange"),o.getComponentMethod("annotations","calcAutorange"),Rt],Me)}function Rt(){Me._transitioning||(k.doAutoRangeAndConstraints(Me),Je&&s.saveRangeInitial(Me),o.getComponentMethod("rangeslider","calcAutorange")(Me))}function Bt(){return s.draw(Me,Je?"":"redraw")}var Nt=[h.previousPromises,ot,_t,Mt,wt];It&&Nt.push(Dt),Nt.push(k.layoutStyles),It&&Nt.push(Bt,function(_r){_r._fullLayout._insideTickLabelsAutorange&&be(_r,_r._fullLayout._insideTickLabelsAutorange).then(function(){_r._fullLayout._insideTickLabelsAutorange=void 0})}),Nt.push(k.drawData,k.finalDraw,y,h.addLinks,h.rehover,h.redrag,h.doAutoMargin,er,h.previousPromises);function er(Zt){Zt._fullLayout._insideTickLabelsAutorange&&Je&&s.saveRangeInitial(Zt,!0)}var qt=c.syncOrAsync(Nt,Me);return(!qt||!qt.then)&&(qt=Promise.resolve()),qt.then(function(){return C(Me),Me})}function C(Me){var Ie=Me._fullLayout;Ie._redrawFromAutoMarginCount?Ie._redrawFromAutoMarginCount--:Me.emit("plotly_afterplot")}function D(Me){return c.extendFlat(T,Me)}function F(Me,Ie){try{Me._fullLayout._paper.style("background",Ie)}catch(He){c.error(He)}}function N(Me,Ie){var He=d.combine(Ie,"white");F(Me,He)}function G(Me,Ie){if(!Me._context){Me._context=c.extendDeep({},T);var He=r.select("base");Me._context._baseUrl=He.size()&&He.attr("href")?window.location.href.split("#")[0]:""}var Xe=Me._context,ht,it,Ge;if(Ie){for(it=Object.keys(Ie),ht=0;ht<it.length;ht++)Ge=it[ht],!(Ge==="editable"||Ge==="edits")&&Ge in Xe&&(Ge==="setBackground"&&Ie[Ge]==="opaque"?Xe[Ge]=N:Xe[Ge]=Ie[Ge]);Ie.plot3dPixelRatio&&!Xe.plotGlPixelRatio&&(Xe.plotGlPixelRatio=Xe.plot3dPixelRatio);var ot=Ie.editable;if(ot!==void 0)for(Xe.editable=ot,it=Object.keys(Xe.edits),ht=0;ht<it.length;ht++)Xe.edits[it[ht]]=ot;if(Ie.edits)for(it=Object.keys(Ie.edits),ht=0;ht<it.length;ht++)Ge=it[ht],Ge in Xe.edits&&(Xe.edits[Ge]=Ie.edits[Ge]);Xe._exportedPlot=Ie._exportedPlot}Xe.staticPlot&&(Xe.editable=!1,Xe.edits={},Xe.autosizable=!1,Xe.scrollZoom=!1,Xe.doubleClick=!1,Xe.showTips=!1,Xe.showLink=!1,Xe.displayModeBar=!1),Xe.displayModeBar==="hover"&&!l&&(Xe.displayModeBar=!0),(Xe.setBackground==="transparent"||typeof Xe.setBackground!="function")&&(Xe.setBackground=F),Xe._hasZeroHeight=Xe._hasZeroHeight||Me.clientHeight===0,Xe._hasZeroWidth=Xe._hasZeroWidth||Me.clientWidth===0;var Je=Xe.scrollZoom,st=Xe._scrollZoom={};if(Je===!0)st.cartesian=1,st.gl3d=1,st.geo=1,st.mapbox=1;else if(typeof Je=="string"){var It=Je.split("+");for(ht=0;ht<It.length;ht++)st[It[ht]]=1}else Je!==!1&&(st.gl3d=1,st.geo=1,st.mapbox=1)}function U(Me,Ie,He){var Xe=r.select(Me).selectAll(".plot-container").data([0]);Xe.enter().insert("div",":first-child").classed("plot-container plotly",!0);var ht=Xe.selectAll(".svg-container").data([0]);ht.enter().append("div").classed("svg-container",!0).style("position","relative"),ht.html(""),Ie&&(Me.data=Ie),He&&(Me.layout=He),i.manager.fillLayout(Me),ht.style({width:Me._fullLayout.width+"px",height:Me._fullLayout.height+"px"}),Me.framework=i.manager.framework(Me),Me.framework({data:Me.data,layout:Me.layout},ht.node()),Me.framework.setUndoPoint();var it=Me.framework.svg(),Ge=1,ot=Me._fullLayout.title?Me._fullLayout.title.text:"";(ot===""||!ot)&&(Ge=0);var Je=function(){this.call(m.convertToTspans,Me)},st=it.select(".title-group text").call(Je);if(Me._context.edits.titleText){var It=c._(Me,"Click to enter Plot title");(!ot||ot===It)&&(Ge=.2,st.attr({"data-unformatted":It}).text(It).style({opacity:Ge}).on("mouseover.opacity",function(){r.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(1e3).style("opacity",0)}));var Ft=function(){this.call(m.makeEditable,{gd:Me}).on("edit",function(nr){Me.framework({layout:{title:{text:nr}}}),this.text(nr).call(Je),this.call(Ft)}).on("cancel",function(){var nr=this.attr("data-unformatted");this.text(nr).call(Je)})};st.call(Ft)}return Me._context.setBackground(Me,Me._fullLayout.paper_bgcolor),h.addLinks(Me),Promise.resolve()}function X(Me){if(Me=c.getGraphDiv(Me),!c.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me);return A.cleanData(Me.data),A.cleanLayout(Me.layout),Me.calcdata=void 0,M.plot(Me).then(function(){return Me.emit("plotly_redraw"),Me})}function I(Me,Ie,He,Xe){return Me=c.getGraphDiv(Me),h.cleanPlot([],{},Me._fullData||[],Me._fullLayout||{}),h.purge(Me),M.plot(Me,Ie,He,Xe)}function B(Me,Ie){var He=Ie+1,Xe=[],ht,it;for(ht=0;ht<Me.length;ht++)it=Me[ht],it<0?Xe.push(He+it):Xe.push(it);return Xe}function j(Me,Ie,He){var Xe,ht;for(Xe=0;Xe<Ie.length;Xe++){if(ht=Ie[Xe],ht!==parseInt(ht,10))throw new Error("all values in "+He+" must be integers");if(ht>=Me.data.length||ht<-Me.data.length)throw new Error(He+" must be valid indices for gd.data.");if(Ie.indexOf(ht,Xe+1)>-1||ht>=0&&Ie.indexOf(-Me.data.length+ht)>-1||ht<0&&Ie.indexOf(Me.data.length+ht)>-1)throw new Error("each index in "+He+" must be unique.")}}function H(Me,Ie,He){if(!Array.isArray(Me.data))throw new Error("gd.data must be an array.");if(typeof Ie>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(Ie)||(Ie=[Ie]),j(Me,Ie,"currentIndices"),typeof He<"u"&&!Array.isArray(He)&&(He=[He]),typeof He<"u"&&j(Me,He,"newIndices"),typeof He<"u"&&Ie.length!==He.length)throw new Error("current and new indices must be of equal length.")}function K(Me,Ie,He){var Xe,ht;if(!Array.isArray(Me.data))throw new Error("gd.data must be an array.");if(typeof Ie>"u")throw new Error("traces must be defined.");for(Array.isArray(Ie)||(Ie=[Ie]),Xe=0;Xe<Ie.length;Xe++)if(ht=Ie[Xe],typeof ht!="object"||Array.isArray(ht)||ht===null)throw new Error("all values in traces array must be non-array objects");if(typeof He<"u"&&!Array.isArray(He)&&(He=[He]),typeof He<"u"&&He.length!==Ie.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function te(Me,Ie,He,Xe){var ht=c.isPlainObject(Xe);if(!Array.isArray(Me.data))throw new Error("gd.data must be an array");if(!c.isPlainObject(Ie))throw new Error("update must be a key:value object");if(typeof He>"u")throw new Error("indices must be an integer or array of integers");j(Me,He,"indices");for(var it in Ie){if(!Array.isArray(Ie[it])||Ie[it].length!==He.length)throw new Error("attribute "+it+" must be an array of length equal to indices array length");if(ht&&(!(it in Xe)||!Array.isArray(Xe[it])||Xe[it].length!==Ie[it].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function J(Me,Ie,He,Xe){var ht=c.isPlainObject(Xe),it=[],Ge,ot,Je,st,It;Array.isArray(He)||(He=[He]),He=B(He,Me.data.length-1);for(var Ft in Ie)for(var nr=0;nr<He.length;nr++){if(Ge=Me.data[He[nr]],Je=t(Ge,Ft),ot=Je.get(),st=Ie[Ft][nr],!c.isArrayOrTypedArray(st))throw new Error("attribute: "+Ft+" index: "+nr+" must be an array");if(!c.isArrayOrTypedArray(ot))throw new Error("cannot extend missing or non-array attribute: "+Ft);if(ot.constructor!==st.constructor)throw new Error("cannot extend array with an array of a different type: "+Ft);It=ht?Xe[Ft][nr]:Xe,n(It)||(It=-1),it.push({prop:Je,target:ot,insert:st,maxp:Math.floor(It)})}return it}function oe(Me,Ie,He,Xe,ht){te(Me,Ie,He,Xe);for(var it=J(Me,Ie,He,Xe),Ge={},ot={},Je=0;Je<it.length;Je++){var st=it[Je].prop,It=it[Je].maxp,Ft=ht(it[Je].target,it[Je].insert,It);st.set(Ft[0]),Array.isArray(Ge[st.astr])||(Ge[st.astr]=[]),Ge[st.astr].push(Ft[1]),Array.isArray(ot[st.astr])||(ot[st.astr]=[]),ot[st.astr].push(it[Je].target.length)}return{update:Ge,maxPoints:ot}}function ie(Me,Ie){var He=new Me.constructor(Me.length+Ie.length);return He.set(Me),He.set(Ie,Me.length),He}function Q(Me,Ie,He,Xe){Me=c.getGraphDiv(Me);function ht(Je,st,It){var Ft,nr;if(c.isTypedArray(Je))if(It<0){var We=new Je.constructor(0),Fe=ie(Je,st);It<0?(Ft=Fe,nr=We):(Ft=We,nr=Fe)}else if(Ft=new Je.constructor(It),nr=new Je.constructor(Je.length+st.length-It),It===st.length)Ft.set(st),nr.set(Je);else if(It<st.length){var _t=st.length-It;Ft.set(st.subarray(_t)),nr.set(Je),nr.set(st.subarray(0,_t),Je.length)}else{var Mt=It-st.length,wt=Je.length-Mt;Ft.set(Je.subarray(wt)),Ft.set(st,Mt),nr.set(Je.subarray(0,wt))}else Ft=Je.concat(st),nr=It>=0&&It<Ft.length?Ft.splice(0,Ft.length-It):[];return[Ft,nr]}var it=oe(Me,Ie,He,Xe,ht),Ge=M.redraw(Me),ot=[Me,it.update,He,it.maxPoints];return a.add(Me,M.prependTraces,ot,Q,arguments),Ge}function V(Me,Ie,He,Xe){Me=c.getGraphDiv(Me);function ht(Je,st,It){var Ft,nr;if(c.isTypedArray(Je))if(It<=0){var We=new Je.constructor(0),Fe=ie(st,Je);It<0?(Ft=Fe,nr=We):(Ft=We,nr=Fe)}else if(Ft=new Je.constructor(It),nr=new Je.constructor(Je.length+st.length-It),It===st.length)Ft.set(st),nr.set(Je);else if(It<st.length){var _t=st.length-It;Ft.set(st.subarray(0,_t)),nr.set(st.subarray(_t)),nr.set(Je,_t)}else{var Mt=It-st.length;Ft.set(st),Ft.set(Je.subarray(0,Mt),st.length),nr.set(Je.subarray(Mt))}else Ft=st.concat(Je),nr=It>=0&&It<Ft.length?Ft.splice(It,Ft.length):[];return[Ft,nr]}var it=oe(Me,Ie,He,Xe,ht),Ge=M.redraw(Me),ot=[Me,it.update,He,it.maxPoints];return a.add(Me,M.extendTraces,ot,V,arguments),Ge}function se(Me,Ie,He){Me=c.getGraphDiv(Me);var Xe=[],ht=M.deleteTraces,it=se,Ge=[Me,Xe],ot=[Me,Ie],Je,st;for(K(Me,Ie,He),Array.isArray(Ie)||(Ie=[Ie]),Ie=Ie.map(function(It){return c.extendFlat({},It)}),A.cleanData(Ie),Je=0;Je<Ie.length;Je++)Me.data.push(Ie[Je]);for(Je=0;Je<Ie.length;Je++)Xe.push(-Ie.length+Je);if(typeof He>"u")return st=M.redraw(Me),a.add(Me,ht,Ge,it,ot),st;Array.isArray(He)||(He=[He]);try{H(Me,Xe,He)}catch(It){throw Me.data.splice(Me.data.length-Ie.length,Ie.length),It}return a.startSequence(Me),a.add(Me,ht,Ge,it,ot),st=M.moveTraces(Me,Xe,He),a.stopSequence(Me),st}function re(Me,Ie){Me=c.getGraphDiv(Me);var He=[],Xe=M.addTraces,ht=re,it=[Me,He,Ie],Ge=[Me,Ie],ot,Je;if(typeof Ie>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ie)||(Ie=[Ie]),j(Me,Ie,"indices"),Ie=B(Ie,Me.data.length-1),Ie.sort(c.sorterDes),ot=0;ot<Ie.length;ot+=1)Je=Me.data.splice(Ie[ot],1)[0],He.push(Je);var st=M.redraw(Me);return a.add(Me,Xe,it,ht,Ge),st}function ee(Me,Ie,He){Me=c.getGraphDiv(Me);var Xe=[],ht=[],it=ee,Ge=ee,ot=[Me,He,Ie],Je=[Me,Ie,He],st;if(H(Me,Ie,He),Ie=Array.isArray(Ie)?Ie:[Ie],typeof He>"u")for(He=[],st=0;st<Ie.length;st++)He.push(-Ie.length+st);for(He=Array.isArray(He)?He:[He],Ie=B(Ie,Me.data.length-1),He=B(He,Me.data.length-1),st=0;st<Me.data.length;st++)Ie.indexOf(st)===-1&&Xe.push(Me.data[st]);for(st=0;st<Ie.length;st++)ht.push({newIndex:He[st],trace:Me.data[Ie[st]]});for(ht.sort(function(Ft,nr){return Ft.newIndex-nr.newIndex}),st=0;st<ht.length;st+=1)Xe.splice(ht[st].newIndex,0,ht[st].trace);Me.data=Xe;var It=M.redraw(Me);return a.add(Me,it,ot,Ge,Je),It}function ae(Me,Ie,He,Xe){Me=c.getGraphDiv(Me),A.clearPromiseQueue(Me);var ht={};if(typeof Ie=="string")ht[Ie]=He;else if(c.isPlainObject(Ie))ht=c.extendFlat({},Ie),Xe===void 0&&(Xe=He);else return c.warn("Restyle fail.",Ie,He,Xe),Promise.reject();Object.keys(ht).length&&(Me.changed=!0);var it=A.coerceTraceIndices(Me,Xe),Ge=ue(Me,ht,it),ot=Ge.flags;ot.calc&&(Me.calcdata=void 0),ot.clearAxisTypes&&A.clearAxisTypes(Me,it,{});var Je=[];ot.fullReplot?Je.push(M.plot):(Je.push(h.previousPromises),h.supplyDefaults(Me),ot.markerSize&&(h.doCalcdata(Me),Pe(Je)),ot.style&&Je.push(k.doTraceStyle),ot.colorbars&&Je.push(k.doColorBars),Je.push(C)),Je.push(h.rehover,h.redrag),a.add(Me,ae,[Me,Ge.undoit,Ge.traces],ae,[Me,Ge.redoit,Ge.traces]);var st=c.syncOrAsync(Je,Me);return(!st||!st.then)&&(st=Promise.resolve()),st.then(function(){return Me.emit("plotly_restyle",Ge.eventData),Me})}function fe(Me){return Me===void 0?null:Me}function de(Me,Ie){return Ie?function(He,Xe,ht){var it=t(He,Xe),Ge=it.set;return it.set=function(ot){var Je=(ht||"")+Xe;pe(Je,it.get(),ot,Me),Ge(ot)},it}:t}function pe(Me,Ie,He,Xe){if(Array.isArray(Ie)||Array.isArray(He))for(var ht=Array.isArray(Ie)?Ie:[],it=Array.isArray(He)?He:[],Ge=Math.max(ht.length,it.length),ot=0;ot<Ge;ot++)pe(Me+"["+ot+"]",ht[ot],it[ot],Xe);else if(c.isPlainObject(Ie)||c.isPlainObject(He)){var Je=c.isPlainObject(Ie)?Ie:{},st=c.isPlainObject(He)?He:{},It=c.extendFlat({},Je,st);for(var Ft in It)pe(Me+"."+Ft,Je[Ft],st[Ft],Xe)}else Xe[Me]===void 0&&(Xe[Me]=fe(Ie))}function W(Me,Ie,He){for(var Xe in He){var ht=t(Me,Xe);pe(Xe,ht.get(),He[Xe],Ie)}}function ue(Me,Ie,He){var Xe=Me._fullLayout,ht=Me._fullData,it=Me.data,Ge=Xe._guiEditing,ot=de(Xe._preGUI,Ge),Je=c.extendDeepAll({},Ie),st;me(Ie);var It=R.traceFlags(),Ft={},nr={},We;function Fe(){return He.map(function(){})}function _t(Vr){var Qr=s.id2name(Vr);We.indexOf(Qr)===-1&&We.push(Qr)}function Mt(Vr){return"LAYOUT"+Vr+".autorange"}function wt(Vr){return"LAYOUT"+Vr+".range"}function Dt(Vr){for(var Qr=Vr;Qr<ht.length;Qr++)if(ht[Qr]._input===it[Vr])return ht[Qr]}function Rt(Vr,Qr,Hr){if(Array.isArray(Vr)){Vr.forEach(function(ba){Rt(ba,Qr,Hr)});return}if(!(Vr in Ie||A.hasParent(Ie,Vr))){var Cn;if(Vr.substr(0,6)==="LAYOUT")Cn=ot(Me.layout,Vr.replace("LAYOUT",""));else{var ra=He[Hr],ta=Xe._tracePreGUI[Dt(ra)._fullInput.uid];Cn=de(ta,Ge)(it[ra],Vr)}Vr in nr||(nr[Vr]=Fe()),nr[Vr][Hr]===void 0&&(nr[Vr][Hr]=fe(Cn.get())),Qr!==void 0&&Cn.set(Qr)}}function Bt(Vr){return function(Qr){return ht[Qr][Vr]}}function Nt(Vr){return function(Qr,Hr){return Qr===!1?ht[He[Hr]][Vr]:null}}for(var er in Ie){if(A.hasParent(Ie,er))throw new Error("cannot set "+er+" and a parent attribute simultaneously");var qt=Ie[er],Zt,_r,Gr,zr,Or,Mn;if((er==="autobinx"||er==="autobiny")&&(er=er.charAt(er.length-1)+"bins",Array.isArray(qt)?qt=qt.map(Nt(er)):qt===!1?qt=He.map(Bt(er)):qt=null),Ft[er]=qt,er.substr(0,6)==="LAYOUT"){Gr=ot(Me.layout,er.replace("LAYOUT","")),nr[er]=[fe(Gr.get())],Gr.set(Array.isArray(qt)?qt[0]:qt),It.calc=!0;continue}for(nr[er]=Fe(),st=0;st<He.length;st++){Zt=it[He[st]],_r=Dt(He[st]);var Yn=Xe._tracePreGUI[_r._fullInput.uid];if(Gr=de(Yn,Ge)(Zt,er),zr=Gr.get(),Or=Array.isArray(qt)?qt[st%qt.length]:qt,Or!==void 0){var An=Gr.parts[Gr.parts.length-1],Bn=er.substr(0,er.length-An.length-1),jn=Bn?Bn+".":"",Nr=Bn?t(_r,Bn).get():_r;if(Mn=u.getTraceValObject(_r,Gr.parts),Mn&&Mn.impliedEdits&&Or!==null)for(var Lr in Mn.impliedEdits)Rt(c.relativeAttr(er,Lr),Mn.impliedEdits[Lr],st);else if((An==="thicknessmode"||An==="lenmode")&&zr!==Or&&(Or==="fraction"||Or==="pixels")&&Nr){var Ln=Xe._size,dn=Nr.orient,xn=dn==="top"||dn==="bottom";if(An==="thicknessmode"){var tn=xn?Ln.h:Ln.w;Rt(jn+"thickness",Nr.thickness*(Or==="fraction"?1/tn:tn),st)}else{var wn=xn?Ln.w:Ln.h;Rt(jn+"len",Nr.len*(Or==="fraction"?1/wn:wn),st)}}else if(er==="type"&&(Or==="pie"!=(zr==="pie")||Or==="funnelarea"!=(zr==="funnelarea"))){var Sn="x",un="y";(Or==="bar"||zr==="bar")&&Zt.orientation==="h"&&(Sn="y",un="x"),c.swapAttrs(Zt,["?","?src"],"labels",Sn),c.swapAttrs(Zt,["d?","?0"],"label",Sn),c.swapAttrs(Zt,["?","?src"],"values",un),zr==="pie"||zr==="funnelarea"?(t(Zt,"marker.color").set(t(Zt,"marker.colors").get()),Xe._pielayer.selectAll("g.trace").remove()):o.traceIs(Zt,"cartesian")&&t(Zt,"marker.colors").set(t(Zt,"marker.color").get())}nr[er][st]=fe(zr);var vt=["swapxy","swapxyaxes","orientation","orientationaxes"];if(vt.indexOf(er)!==-1){if(er==="orientation"){Gr.set(Or);var Gt=Zt.x&&!Zt.y?"h":"v";if((Gr.get()||Gt)===_r.orientation)continue}else er==="orientationaxes"&&(Zt.orientation={v:"h",h:"v"}[_r.orientation]);A.swapXYData(Zt),It.calc=It.clearAxisTypes=!0}else h.dataArrayContainers.indexOf(Gr.parts[0])!==-1?(A.manageArrayContainers(Gr,Or,nr),It.calc=!0):(Mn?Mn.arrayOk&&!o.traceIs(_r,"regl")&&(c.isArrayOrTypedArray(Or)||c.isArrayOrTypedArray(zr))?It.calc=!0:R.update(It,Mn):It.calc=!0,Gr.set(Or))}}if(["swapxyaxes","orientationaxes"].indexOf(er)!==-1&&s.swap(Me,He),er==="orientationaxes"){var cr=t(Me.layout,"hovermode"),Er=cr.get();Er==="x"?cr.set("y"):Er==="y"?cr.set("x"):Er==="x unified"?cr.set("y unified"):Er==="y unified"&&cr.set("x unified")}if(["orientation","type"].indexOf(er)!==-1){for(We=[],st=0;st<He.length;st++){var Wr=it[He[st]];o.traceIs(Wr,"cartesian")&&(_t(Wr.xaxis||"x"),_t(Wr.yaxis||"y"))}Rt(We.map(Mt),!0,0),Rt(We.map(wt),[0,1],0)}}return(It.calc||It.plot)&&(It.fullReplot=!0),{flags:It,undoit:nr,redoit:Ft,traces:He,eventData:c.extendDeepNoArrays([],[Je,He])}}function me(Me){var Ie=c.counterRegex("axis",".title",!1,!1),He=/colorbar\.title$/,Xe=Object.keys(Me),ht,it,Ge;for(ht=0;ht<Xe.length;ht++)it=Xe[ht],Ge=Me[it],(it==="title"||Ie.test(it)||He.test(it))&&(typeof Ge=="string"||typeof Ge=="number")?ot(it,it.replace("title","title.text")):it.indexOf("titlefont")>-1?ot(it,it.replace("titlefont","title.font")):it.indexOf("titleposition")>-1?ot(it,it.replace("titleposition","title.position")):it.indexOf("titleside")>-1?ot(it,it.replace("titleside","title.side")):it.indexOf("titleoffset")>-1&&ot(it,it.replace("titleoffset","title.offset"));function ot(Je,st){Me[st]=Me[Je],delete Me[Je]}}function be(Me,Ie,He){if(Me=c.getGraphDiv(Me),A.clearPromiseQueue(Me),Me.framework&&Me.framework.isPolar)return Promise.resolve(Me);var Xe={};if(typeof Ie=="string")Xe[Ie]=He;else if(c.isPlainObject(Ie))Xe=c.extendFlat({},Ie);else return c.warn("Relayout fail.",Ie,He),Promise.reject();Object.keys(Xe).length&&(Me.changed=!0);var ht=tt(Me,Xe),it=ht.flags;it.calc&&(Me.calcdata=void 0);var Ge=[h.previousPromises];it.layoutReplot?Ge.push(k.layoutReplot):Object.keys(Xe).length&&(ke(Me,it,ht)||h.supplyDefaults(Me),it.legend&&Ge.push(k.doLegend),it.layoutstyle&&Ge.push(k.layoutStyles),it.axrange&&Pe(Ge,ht.rangesAltered),it.ticks&&Ge.push(k.doTicksRelayout),it.modebar&&Ge.push(k.doModeBar),it.camera&&Ge.push(k.doCamera),it.colorbars&&Ge.push(k.doColorBars),Ge.push(C)),Ge.push(h.rehover,h.redrag),a.add(Me,be,[Me,ht.undoit],be,[Me,ht.redoit]);var ot=c.syncOrAsync(Ge,Me);return(!ot||!ot.then)&&(ot=Promise.resolve(Me)),ot.then(function(){return Me.emit("plotly_relayout",ht.eventData),Me})}function ke(Me,Ie,He){var Xe=Me._fullLayout;if(!Ie.axrange)return!1;for(var ht in Ie)if(ht!=="axrange"&&Ie[ht])return!1;for(var it in He.rangesAltered){var Ge=s.id2name(it),ot=Me.layout[Ge],Je=Xe[Ge];if(Je.autorange=ot.autorange,ot.range&&(Je.range=ot.range.slice()),Je.cleanRange(),Je._matchGroup){for(var st in Je._matchGroup)if(st!==it){var It=Xe[s.id2name(st)];It.autorange=Je.autorange,It.range=Je.range.slice(),It._input.range=Je.range.slice()}}}return!0}function Pe(Me,Ie){var He=Ie?function(Xe){var ht=[],it=!0;for(var Ge in Ie){var ot=s.getFromId(Xe,Ge);if(ht.push(Ge),(ot.ticklabelposition||"").indexOf("inside")!==-1&&ot._anchorAxis&&ht.push(ot._anchorAxis._id),ot._matchGroup)for(var Je in ot._matchGroup)Ie[Je]||ht.push(Je);ot.automargin&&(it=!1)}return s.draw(Xe,ht,{skipTitle:it})}:function(Xe){return s.draw(Xe,"redraw")};Me.push(_,k.doAutoRangeAndConstraints,He,k.drawData,k.finalDraw)}var je=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ze=/^[xyz]axis[0-9]*\.autorange$/,Ze=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function tt(Me,Ie){var He=Me.layout,Xe=Me._fullLayout,ht=Xe._guiEditing,it=de(Xe._preGUI,ht),Ge=Object.keys(Ie),ot=s.list(Me),Je=c.extendDeepAll({},Ie),st={},It,Ft,nr;for(me(Ie),Ge=Object.keys(Ie),Ft=0;Ft<Ge.length;Ft++)if(Ge[Ft].indexOf("allaxes")===0){for(nr=0;nr<ot.length;nr++){var We=ot[nr]._id.substr(1),Fe=We.indexOf("scene")!==-1?We+".":"",_t=Ge[Ft].replace("allaxes",Fe+ot[nr]._name);Ie[_t]||(Ie[_t]=Ie[Ge[Ft]])}delete Ie[Ge[Ft]]}var Mt=R.layoutFlags(),wt={},Dt={};function Rt(ra,ta){if(Array.isArray(ra)){ra.forEach(function(Wa){Rt(Wa,ta)});return}if(!(ra in Ie||A.hasParent(Ie,ra))){var ba=it(He,ra);ra in Dt||(Dt[ra]=fe(ba.get())),ta!==void 0&&ba.set(ta)}}var Bt={},Nt;function er(ra){var ta=s.name2id(ra.split(".")[0]);return Bt[ta]=1,ta}for(var qt in Ie){if(A.hasParent(Ie,qt))throw new Error("cannot set "+qt+" and a parent attribute simultaneously");for(var Zt=it(He,qt),_r=Ie[qt],Gr=Zt.parts.length,zr=Gr-1;zr>0&&typeof Zt.parts[zr]!="string";)zr--;var Or=Zt.parts[zr],Mn=Zt.parts[zr-1]+"."+Or,Yn=Zt.parts.slice(0,zr).join("."),An=t(Me.layout,Yn).get(),Bn=t(Xe,Yn).get(),jn=Zt.get();if(_r!==void 0){wt[qt]=_r,Dt[qt]=Or==="reverse"?_r:fe(jn);var Nr=u.getLayoutValObject(Xe,Zt.parts);if(Nr&&Nr.impliedEdits&&_r!==null)for(var Lr in Nr.impliedEdits)Rt(c.relativeAttr(qt,Lr),Nr.impliedEdits[Lr]);if(["width","height"].indexOf(qt)!==-1)if(_r){Rt("autosize",null);var Ln=qt==="height"?"width":"height";Rt(Ln,Xe[Ln])}else Xe[qt]=Me._initialAutoSize[qt];else if(qt==="autosize")Rt("width",_r?null:Xe.width),Rt("height",_r?null:Xe.height);else if(Mn.match(je))er(Mn),t(Xe,Yn+"._inputRange").set(null);else if(Mn.match(ze)){er(Mn),t(Xe,Yn+"._inputRange").set(null);var dn=t(Xe,Yn).get();dn._inputDomain&&(dn._input.domain=dn._inputDomain.slice())}else Mn.match(Ze)&&t(Xe,Yn+"._inputDomain").set(null);if(Or==="type"){Nt=An;var xn=Bn.type==="linear"&&_r==="log",tn=Bn.type==="log"&&_r==="linear";if(xn||tn){if(!Nt||!Nt.range)Rt(Yn+".autorange",!0);else if(Bn.autorange)xn&&(Nt.range=Nt.range[1]>Nt.range[0]?[1,2]:[2,1]);else{var wn=Nt.range[0],Sn=Nt.range[1];xn?(wn<=0&&Sn<=0&&Rt(Yn+".autorange",!0),wn<=0?wn=Sn/1e6:Sn<=0&&(Sn=wn/1e6),Rt(Yn+".range[0]",Math.log(wn)/Math.LN10),Rt(Yn+".range[1]",Math.log(Sn)/Math.LN10)):(Rt(Yn+".range[0]",Math.pow(10,wn)),Rt(Yn+".range[1]",Math.pow(10,Sn)))}Array.isArray(Xe._subplots.polar)&&Xe._subplots.polar.length&&Xe[Zt.parts[0]]&&Zt.parts[1]==="radialaxis"&&delete Xe[Zt.parts[0]]._subplot.viewInitial["radialaxis.range"],o.getComponentMethod("annotations","convertCoords")(Me,Bn,_r,Rt),o.getComponentMethod("images","convertCoords")(Me,Bn,_r,Rt)}else Rt(Yn+".autorange",!0),Rt(Yn+".range",null);t(Xe,Yn+"._inputRange").set(null)}else if(Or.match(L)){var un=t(Xe,qt).get(),vt=(_r||{}).type;(!vt||vt==="-")&&(vt="linear"),o.getComponentMethod("annotations","convertCoords")(Me,un,vt,Rt),o.getComponentMethod("images","convertCoords")(Me,un,vt,Rt)}var Gt=g.containerArrayMatch(qt);if(Gt){It=Gt.array,Ft=Gt.index;var cr=Gt.property,Er=Nr||{editType:"calc"};Ft!==""&&cr===""&&(g.isAddVal(_r)?Dt[qt]=null:g.isRemoveVal(_r)?Dt[qt]=(t(He,It).get()||[])[Ft]:c.warn("unrecognized full object value",Ie)),R.update(Mt,Er),st[It]||(st[It]={});var Wr=st[It][Ft];Wr||(Wr=st[It][Ft]={}),Wr[cr]=_r,delete Ie[qt]}else Or==="reverse"?(An.range?An.range.reverse():(Rt(Yn+".autorange",!0),An.range=[1,0]),Bn.autorange?Mt.calc=!0:Mt.plot=!0):(Xe._has("scatter-like")&&Xe._has("regl")&&qt==="dragmode"&&(_r==="lasso"||_r==="select")&&!(jn==="lasso"||jn==="select")||Xe._has("gl2d")?Mt.plot=!0:Nr?R.update(Mt,Nr):Mt.calc=!0,Zt.set(_r))}}for(It in st){var Vr=g.applyContainerArrayChanges(Me,it(He,It),st[It],Mt,it);Vr||(Mt.plot=!0)}for(var Qr in Bt){Nt=s.getFromId(Me,Qr);var Hr=Nt&&Nt._constraintGroup;if(Hr){Mt.calc=!0;for(var Cn in Hr)Bt[Cn]||(s.getFromId(Me,Cn)._constraintShrinkable=!0)}}return(Ce(Me)||Ie.height||Ie.width)&&(Mt.plot=!0),(Mt.plot||Mt.calc)&&(Mt.layoutReplot=!0),{flags:Mt,rangesAltered:Bt,undoit:Dt,redoit:wt,eventData:Je}}function Ce(Me){var Ie=Me._fullLayout,He=Ie.width,Xe=Ie.height;return Me.layout.autosize&&h.plotAutoSize(Me,Me.layout,Ie),Ie.width!==He||Ie.height!==Xe}function Ae(Me,Ie,He,Xe){if(Me=c.getGraphDiv(Me),A.clearPromiseQueue(Me),Me.framework&&Me.framework.isPolar)return Promise.resolve(Me);c.isPlainObject(Ie)||(Ie={}),c.isPlainObject(He)||(He={}),Object.keys(Ie).length&&(Me.changed=!0),Object.keys(He).length&&(Me.changed=!0);var ht=A.coerceTraceIndices(Me,Xe),it=ue(Me,c.extendFlat({},Ie),ht),Ge=it.flags,ot=tt(Me,c.extendFlat({},He)),Je=ot.flags;(Ge.calc||Je.calc)&&(Me.calcdata=void 0),Ge.clearAxisTypes&&A.clearAxisTypes(Me,ht,He);var st=[];Je.layoutReplot?st.push(k.layoutReplot):Ge.fullReplot?st.push(M.plot):(st.push(h.previousPromises),ke(Me,Je,ot)||h.supplyDefaults(Me),Ge.style&&st.push(k.doTraceStyle),(Ge.colorbars||Je.colorbars)&&st.push(k.doColorBars),Je.legend&&st.push(k.doLegend),Je.layoutstyle&&st.push(k.layoutStyles),Je.axrange&&Pe(st,ot.rangesAltered),Je.ticks&&st.push(k.doTicksRelayout),Je.modebar&&st.push(k.doModeBar),Je.camera&&st.push(k.doCamera),st.push(C)),st.push(h.rehover,h.redrag),a.add(Me,Ae,[Me,it.undoit,ot.undoit,it.traces],Ae,[Me,it.redoit,ot.redoit,it.traces]);var It=c.syncOrAsync(st,Me);return(!It||!It.then)&&(It=Promise.resolve(Me)),It.then(function(){return Me.emit("plotly_update",{data:it.eventData,layout:ot.eventData}),Me})}function Ne(Me){return function(He){He._fullLayout._guiEditing=!0;var Xe=Me.apply(null,arguments);return He._fullLayout._guiEditing=!1,Xe}}var qe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],At=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function kt(Me,Ie){for(var He=0;He<Ie.length;He++){var Xe=Ie[He],ht=Me.match(Xe.pattern);if(ht)return{head:ht[1],attr:Xe.attr}}}function Ve(Me,Ie){var He=t(Ie,Me).get();if(He!==void 0)return He;var Xe=Me.split(".");for(Xe.pop();Xe.length>1;)if(Xe.pop(),He=t(Ie,Xe.join(".")+".uirevision").get(),He!==void 0)return He;return Ie.uirevision}function ft(Me,Ie){for(var He=0;He<Ie.length;He++)if(Ie[He]._fullInput.uid===Me)return He;return-1}function St(Me,Ie,He){for(var Xe=0;Xe<Ie.length;Xe++)if(Ie[Xe].uid===Me)return Xe;return!Ie[He]||Ie[He].uid?-1:He}function Wt(Me,Ie){var He=c.isPlainObject(Me),Xe=Array.isArray(Me);return He||Xe?(He&&c.isPlainObject(Ie)||Xe&&Array.isArray(Ie))&&JSON.stringify(Me)===JSON.stringify(Ie):Me===Ie}function Qt(Me,Ie,He,Xe){var ht=Xe._preGUI,it,Ge,ot,Je,st,It,Ft,nr,We=[],Fe={};for(it in ht){if(st=kt(it,qe),st){if(Ge=st.attr||st.head+".uirevision",ot=t(Xe,Ge).get(),Je=ot&&Ve(Ge,Ie),Je&&Je===ot&&(It=ht[it],It===null&&(It=void 0),Ft=t(Ie,it),nr=Ft.get(),Wt(nr,It))){nr===void 0&&it.substr(it.length-9)==="autorange"&&We.push(it.substr(0,it.length-10)),Ft.set(fe(t(Xe,it).get()));continue}}else c.warn("unrecognized GUI edit: "+it);delete ht[it],it.substr(it.length-8,6)==="range["&&(Fe[it.substr(0,it.length-9)]=1)}for(var _t=0;_t<We.length;_t++){var Mt=We[_t];if(Fe[Mt]){var wt=t(Ie,Mt).get();wt&&delete wt.autorange}}var Dt=Xe._tracePreGUI;for(var Rt in Dt){var Bt=Dt[Rt],Nt=null,er;for(it in Bt){if(!Nt){var qt=ft(Rt,He);if(qt<0){delete Dt[Rt];break}var Zt=He[qt];er=Zt._fullInput;var _r=St(Rt,Me,er.index);if(_r<0){delete Dt[Rt];break}Nt=Me[_r]}if(st=kt(it,At),st){if(st.attr?(ot=t(Xe,st.attr).get(),Je=ot&&Ve(st.attr,Ie)):(ot=er.uirevision,Je=Nt.uirevision,Je===void 0&&(Je=Ie.uirevision)),Je&&Je===ot&&(It=Bt[it],It===null&&(It=void 0),Ft=t(Nt,it),nr=Ft.get(),Wt(nr,It))){Ft.set(fe(t(er,it).get()));continue}}else c.warn("unrecognized GUI edit: "+it+" in trace uid "+Rt);delete Bt[it]}}}function zt(Me,Ie,He,Xe){var ht,it;function Ge(){return M.addFrames(Me,ht)}Me=c.getGraphDiv(Me),A.clearPromiseQueue(Me);var ot=Me._fullData,Je=Me._fullLayout;if(!c.isPlotDiv(Me)||!ot||!Je)it=M.newPlot(Me,Ie,He,Xe);else{if(c.isPlainObject(Ie)){var st=Ie;Ie=st.data,He=st.layout,Xe=st.config,ht=st.frames}var It=!1;if(Xe){var Ft=c.extendDeep({},Me._context);Me._context=void 0,G(Me,Xe),It=Lt(Ft,Me._context)}Me.data=Ie||[],A.cleanData(Me.data),Me.layout=He||{},A.cleanLayout(Me.layout),Qt(Me.data,Me.layout,ot,Je),h.supplyDefaults(Me,{skipUpdateCalc:!0});var nr=Me._fullData,We=Me._fullLayout,Fe=We.datarevision===void 0,_t=We.transition,Mt=rr(Me,Je,We,Fe,_t),wt=Mt.newDataRevision,Dt=$t(Me,ot,nr,Fe,_t,wt);if(Ce(Me)&&(Mt.layoutReplot=!0),Dt.calc||Mt.calc){Me.calcdata=void 0;for(var Rt=Object.getOwnPropertyNames(We),Bt=0;Bt<Rt.length;Bt++){var Nt=Rt[Bt],er=Nt.substring(0,5);if(er==="xaxis"||er==="yaxis"){var qt=We[Nt]._emptyCategories;qt&&qt()}}}else h.supplyDefaultsUpdateCalc(Me.calcdata,nr);var Zt=[];if(ht&&(Me._transitionData={},h.createTransitionData(Me),Zt.push(Ge)),We.transition&&!It&&(Dt.anim||Mt.anim))Mt.ticks&&Zt.push(k.doTicksRelayout),h.doCalcdata(Me),k.doAutoRangeAndConstraints(Me),Zt.push(function(){return h.transitionFromReact(Me,Dt,Mt,Je)});else if(Dt.fullReplot||Mt.layoutReplot||It)Me._fullLayout._skipDefaults=!0,Zt.push(M.plot);else{for(var _r in Mt.arrays){var Gr=Mt.arrays[_r];if(Gr.length){var zr=o.getComponentMethod(_r,"drawOne");if(zr!==c.noop)for(var Or=0;Or<Gr.length;Or++)zr(Me,Gr[Or]);else{var Mn=o.getComponentMethod(_r,"draw");if(Mn===c.noop)throw new Error("cannot draw components: "+_r);Mn(Me)}}}Zt.push(h.previousPromises),Dt.style&&Zt.push(k.doTraceStyle),(Dt.colorbars||Mt.colorbars)&&Zt.push(k.doColorBars),Mt.legend&&Zt.push(k.doLegend),Mt.layoutstyle&&Zt.push(k.layoutStyles),Mt.axrange&&Pe(Zt),Mt.ticks&&Zt.push(k.doTicksRelayout),Mt.modebar&&Zt.push(k.doModeBar),Mt.camera&&Zt.push(k.doCamera),Zt.push(C)}Zt.push(h.rehover,h.redrag),it=c.syncOrAsync(Zt,Me),(!it||!it.then)&&(it=Promise.resolve(Me))}return it.then(function(){return Me.emit("plotly_react",{data:Ie,layout:He}),Me})}function $t(Me,Ie,He,Xe,ht,it){var Ge=Ie.length===He.length;if(!ht&&!Ge)return{fullReplot:!0,calc:!0};var ot=R.traceFlags();ot.arrays={},ot.nChanges=0,ot.nChangesAnim=0;var Je,st;function It(We){var Fe=u.getTraceValObject(st,We);return!st._module.animatable&&Fe.anim&&(Fe.anim=!1),Fe}var Ft={getValObject:It,flags:ot,immutable:Xe,transition:ht,newDataRevision:it,gd:Me},nr={};for(Je=0;Je<Ie.length;Je++)if(He[Je]){if(st=He[Je]._fullInput,h.hasMakesDataTransform(st)&&(st=He[Je]),nr[st.uid])continue;nr[st.uid]=1,Pt(Ie[Je]._fullInput,st,[],Ft)}return(ot.calc||ot.plot)&&(ot.fullReplot=!0),ht&&ot.nChanges&&ot.nChangesAnim&&(ot.anim=ot.nChanges===ot.nChangesAnim&&Ge?"all":"some"),ot}function rr(Me,Ie,He,Xe,ht){var it=R.layoutFlags();it.arrays={},it.rangesAltered={},it.nChanges=0,it.nChangesAnim=0;function Ge(Je){return u.getLayoutValObject(He,Je)}var ot={getValObject:Ge,flags:it,immutable:Xe,transition:ht,gd:Me};return Pt(Ie,He,[],ot),(it.plot||it.calc)&&(it.layoutReplot=!0),ht&&it.nChanges&&it.nChangesAnim&&(it.anim=it.nChanges===it.nChangesAnim?"all":"some"),it}function Pt(Me,Ie,He,Xe){var ht,it,Ge,ot=Xe.getValObject,Je=Xe.flags,st=Xe.immutable,It=Xe.inArray,Ft=Xe.arrayIndex;function nr(){var Yn=ht.editType;if(It&&Yn.indexOf("arraydraw")!==-1){c.pushUnique(Je.arrays[It],Ft);return}R.update(Je,ht),Yn!=="none"&&Je.nChanges++,Xe.transition&&ht.anim&&Je.nChangesAnim++,(je.test(Ge)||ze.test(Ge))&&(Je.rangesAltered[He[0]]=1),Ze.test(Ge)&&t(Ie,"_inputDomain").set(null),it==="datarevision"&&(Je.newDataRevision=1)}function We(Yn){return Yn.valType==="data_array"||Yn.arrayOk}for(it in Me){if(Je.calc&&!Xe.transition)return;var Fe=Me[it],_t=Ie[it],Mt=He.concat(it);if(Ge=Mt.join("."),!(it.charAt(0)==="_"||typeof Fe=="function"||Fe===_t)){if((it==="tick0"||it==="dtick")&&He[0]!=="geo"){var wt=Ie.tickmode;if(wt==="auto"||wt==="array"||!wt)continue}if(!(it==="range"&&Ie.autorange)&&!((it==="zmin"||it==="zmax")&&Ie.type==="contourcarpet")&&(ht=ot(Mt),!!ht&&!(ht._compareAsJSON&&JSON.stringify(Fe)===JSON.stringify(_t)))){var Dt=ht.valType,Rt,Bt=We(ht),Nt=Array.isArray(Fe),er=Array.isArray(_t);if(Nt&&er){var qt="_input_"+it,Zt=Me[qt],_r=Ie[qt];if(Array.isArray(Zt)&&Zt===_r)continue}if(_t===void 0)Bt&&Nt?Je.calc=!0:nr();else if(ht._isLinkedToArray){var Gr=[],zr=!1;It||(Je.arrays[it]=Gr);var Or=Math.min(Fe.length,_t.length),Mn=Math.max(Fe.length,_t.length);if(Or!==Mn)if(ht.editType==="arraydraw")zr=!0;else{nr();continue}for(Rt=0;Rt<Or;Rt++)Pt(Fe[Rt],_t[Rt],Mt.concat(Rt),c.extendFlat({inArray:it,arrayIndex:Rt},Xe));if(zr)for(Rt=Or;Rt<Mn;Rt++)Gr.push(Rt)}else!Dt&&c.isPlainObject(Fe)?Pt(Fe,_t,Mt,Xe):Bt?Nt&&er?(st&&(Je.calc=!0),(st||Xe.newDataRevision)&&nr()):Nt!==er?Je.calc=!0:nr():Nt&&er?(Fe.length!==_t.length||String(Fe)!==String(_t))&&nr():nr()}}}for(it in Ie)if(!(it in Me||it.charAt(0)==="_"||typeof Ie[it]=="function"))if(ht=ot(He.concat(it)),We(ht)&&Array.isArray(Ie[it])){Je.calc=!0;return}else nr()}function Lt(Me,Ie){var He;for(He in Me)if(He.charAt(0)!=="_"){var Xe=Me[He],ht=Ie[He];if(Xe!==ht)if(c.isPlainObject(Xe)&&c.isPlainObject(ht)){if(Lt(Xe,ht))return!0}else if(Array.isArray(Xe)&&Array.isArray(ht)){if(Xe.length!==ht.length)return!0;for(var it=0;it<Xe.length;it++)if(Xe[it]!==ht[it])if(c.isPlainObject(Xe[it])&&c.isPlainObject(ht[it])){if(Lt(Xe[it],ht[it]))return!0}else return!0}else return!0}}function dt(Me,Ie,He){if(Me=c.getGraphDiv(Me),!c.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Xe=Me._transitionData;Xe._frameQueue||(Xe._frameQueue=[]),He=h.supplyAnimationDefaults(He);var ht=He.transition,it=He.frame;Xe._frameWaitingCnt===void 0&&(Xe._frameWaitingCnt=0);function Ge(st){return Array.isArray(ht)?st>=ht.length?ht[0]:ht[st]:ht}function ot(st){return Array.isArray(it)?st>=it.length?it[0]:it[st]:it}function Je(st,It){var Ft=0;return function(){if(st&&++Ft===It)return st()}}return new Promise(function(st,It){function Ft(){if(Xe._frameQueue.length!==0){for(;Xe._frameQueue.length;){var Or=Xe._frameQueue.pop();Or.onInterrupt&&Or.onInterrupt()}Me.emit("plotly_animationinterrupted",[])}}function nr(Or){if(Or.length!==0){for(var Mn=0;Mn<Or.length;Mn++){var Yn;Or[Mn].type==="byname"?Yn=h.computeFrame(Me,Or[Mn].name):Yn=Or[Mn].data;var An=ot(Mn),Bn=Ge(Mn);Bn.duration=Math.min(Bn.duration,An.duration);var jn={frame:Yn,name:Or[Mn].name,frameOpts:An,transitionOpts:Bn};Mn===Or.length-1&&(jn.onComplete=Je(st,2),jn.onInterrupt=It),Xe._frameQueue.push(jn)}He.mode==="immediate"&&(Xe._lastFrameAt=-1/0),Xe._animationRaf||_t()}}function We(){Me.emit("plotly_animated"),window.cancelAnimationFrame(Xe._animationRaf),Xe._animationRaf=null}function Fe(){Xe._currentFrame&&Xe._currentFrame.onComplete&&Xe._currentFrame.onComplete();var Or=Xe._currentFrame=Xe._frameQueue.shift();if(Or){var Mn=Or.name?Or.name.toString():null;Me._fullLayout._currentFrame=Mn,Xe._lastFrameAt=Date.now(),Xe._timeToNext=Or.frameOpts.duration,h.transition(Me,Or.frame.data,Or.frame.layout,A.coerceTraceIndices(Me,Or.frame.traces),Or.frameOpts,Or.transitionOpts).then(function(){Or.onComplete&&Or.onComplete()}),Me.emit("plotly_animatingframe",{name:Mn,frame:Or.frame,animation:{frame:Or.frameOpts,transition:Or.transitionOpts}})}else We()}function _t(){Me.emit("plotly_animating"),Xe._lastFrameAt=-1/0,Xe._timeToNext=0,Xe._runningTransitions=0,Xe._currentFrame=null;var Or=function(){Xe._animationRaf=window.requestAnimationFrame(Or),Date.now()-Xe._lastFrameAt>Xe._timeToNext&&Fe()};Or()}var Mt=0;function wt(Or){return Array.isArray(ht)?Mt>=ht.length?Or.transitionOpts=ht[Mt]:Or.transitionOpts=ht[0]:Or.transitionOpts=ht,Mt++,Or}var Dt,Rt,Bt=[],Nt=Ie==null,er=Array.isArray(Ie),qt=!Nt&&!er&&c.isPlainObject(Ie);if(qt)Bt.push({type:"object",data:wt(c.extendFlat({},Ie))});else if(Nt||["string","number"].indexOf(typeof Ie)!==-1)for(Dt=0;Dt<Xe._frames.length;Dt++)Rt=Xe._frames[Dt],Rt&&(Nt||String(Rt.group)===String(Ie))&&Bt.push({type:"byname",name:String(Rt.name),data:wt({name:Rt.name})});else if(er)for(Dt=0;Dt<Ie.length;Dt++){var Zt=Ie[Dt];["number","string"].indexOf(typeof Zt)!==-1?(Zt=String(Zt),Bt.push({type:"byname",name:Zt,data:wt({name:Zt})})):c.isPlainObject(Zt)&&Bt.push({type:"object",data:wt(c.extendFlat({},Zt))})}for(Dt=0;Dt<Bt.length;Dt++)if(Rt=Bt[Dt],Rt.type==="byname"&&!Xe._frameHash[Rt.data.name]){c.warn('animate failure: frame not found: "'+Rt.data.name+'"'),It();return}["next","immediate"].indexOf(He.mode)!==-1&&Ft(),He.direction==="reverse"&&Bt.reverse();var _r=Me._fullLayout._currentFrame;if(_r&&He.fromcurrent){var Gr=-1;for(Dt=0;Dt<Bt.length;Dt++)if(Rt=Bt[Dt],Rt.type==="byname"&&Rt.name===_r){Gr=Dt;break}if(Gr>0&&Gr<Bt.length-1){var zr=[];for(Dt=0;Dt<Bt.length;Dt++)Rt=Bt[Dt],(Bt[Dt].type!=="byname"||Dt>Gr)&&zr.push(Rt);Bt=zr}}Bt.length>0?nr(Bt):(Me.emit("plotly_animated"),st())})}function lt(Me,Ie,He){if(Me=c.getGraphDiv(Me),Ie==null)return Promise.resolve();if(!c.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Xe,ht,it,Ge,ot=Me._transitionData._frames,Je=Me._transitionData._frameHash;if(!Array.isArray(Ie))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ie);var st=ot.length+Ie.length*2,It=[],Ft={};for(Xe=Ie.length-1;Xe>=0;Xe--)if(c.isPlainObject(Ie[Xe])){var nr=Ie[Xe].name,We=(Je[nr]||Ft[nr]||{}).name,Fe=Ie[Xe].name,_t=Je[We]||Ft[We];We&&Fe&&typeof Fe=="number"&&_t&&z<E&&(z++,c.warn('addFrames: overwriting frame "'+(Je[We]||Ft[We]).name+'" with a frame whose name of type "number" also equates to "'+We+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),z===E&&c.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ft[nr]={name:nr},It.push({frame:h.supplyFrameDefaults(Ie[Xe]),index:He&&He[Xe]!==void 0&&He[Xe]!==null?He[Xe]:st+Xe})}It.sort(function(qt,Zt){return qt.index>Zt.index?-1:qt.index<Zt.index?1:0});var Mt=[],wt=[],Dt=ot.length;for(Xe=It.length-1;Xe>=0;Xe--){if(ht=It[Xe].frame,typeof ht.name=="number"&&c.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!ht.name)for(;Je[ht.name="frame "+Me._transitionData._counter++];);if(Je[ht.name]){for(it=0;it<ot.length&&(ot[it]||{}).name!==ht.name;it++);Mt.push({type:"replace",index:it,value:ht}),wt.unshift({type:"replace",index:it,value:ot[it]})}else Ge=Math.max(0,Math.min(It[Xe].index,Dt)),Mt.push({type:"insert",index:Ge,value:ht}),wt.unshift({type:"delete",index:Ge}),Dt++}var Rt=h.modifyFrames,Bt=h.modifyFrames,Nt=[Me,wt],er=[Me,Mt];return a&&a.add(Me,Rt,Nt,Bt,er),h.modifyFrames(Me,Mt)}function Te(Me,Ie){if(Me=c.getGraphDiv(Me),!c.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me);var He,Xe,ht=Me._transitionData._frames,it=[],Ge=[];if(!Ie)for(Ie=[],He=0;He<ht.length;He++)Ie.push(He);for(Ie=Ie.slice(),Ie.sort(),He=Ie.length-1;He>=0;He--)Xe=Ie[He],it.push({type:"delete",index:Xe}),Ge.unshift({type:"insert",index:Xe,value:ht[Xe]});var ot=h.modifyFrames,Je=h.modifyFrames,st=[Me,Ge],It=[Me,it];return a&&a.add(Me,ot,st,Je,It),h.modifyFrames(Me,it)}function Le(Me){Me=c.getGraphDiv(Me);var Ie=Me._fullLayout||{},He=Me._fullData||[];return h.cleanPlot([],{},He,Ie),h.purge(Me),f.purge(Me),Ie._container&&Ie._container.remove(),delete Me._context,Me}function Be(Me){var Ie=Me._fullLayout,He=Me.getBoundingClientRect();if(!c.equalDomRects(He,Ie._lastBBox)){var Xe=Ie._invTransform=c.inverseTransformMatrix(c.getFullTransformMatrix(Me));Ie._invScaleX=Math.sqrt(Xe[0][0]*Xe[0][0]+Xe[0][1]*Xe[0][1]+Xe[0][2]*Xe[0][2]),Ie._invScaleY=Math.sqrt(Xe[1][0]*Xe[1][0]+Xe[1][1]*Xe[1][1]+Xe[1][2]*Xe[1][2]),Ie._lastBBox=He}}function et(Me){var Ie=r.select(Me),He=Me._fullLayout;if(He._calcInverseTransform=Be,He._calcInverseTransform(Me),He._container=Ie.selectAll(".plot-container").data([0]),He._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),He._paperdiv=He._container.selectAll(".svg-container").data([0]),He._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),He._glcontainer=He._paperdiv.selectAll(".gl-container").data([{}]),He._glcontainer.enter().append("div").classed("gl-container",!0),He._paperdiv.selectAll(".main-svg").remove(),He._paperdiv.select(".modebar-container").remove(),He._paper=He._paperdiv.insert("svg",":first-child").classed("main-svg",!0),He._toppaper=He._paperdiv.append("svg").classed("main-svg",!0),He._modebardiv=He._paperdiv.append("div"),delete He._modeBar,He._hoverpaper=He._paperdiv.append("svg").classed("main-svg",!0),!He._uid){var Xe={};r.selectAll("defs").each(function(){this.id&&(Xe[this.id.split("-")[1]]=1)}),He._uid=c.randstr(Xe)}He._paperdiv.selectAll(".main-svg").attr(b.svgAttrs),He._defs=He._paper.append("defs").attr("id","defs-"+He._uid),He._clips=He._defs.append("g").classed("clips",!0),He._topdefs=He._toppaper.append("defs").attr("id","topdefs-"+He._uid),He._topclips=He._topdefs.append("g").classed("clips",!0),He._bgLayer=He._paper.append("g").classed("bglayer",!0),He._draggers=He._paper.append("g").classed("draglayer",!0);var ht=He._paper.append("g").classed("layer-below",!0);He._imageLowerLayer=ht.append("g").classed("imagelayer",!0),He._shapeLowerLayer=ht.append("g").classed("shapelayer",!0),He._cartesianlayer=He._paper.append("g").classed("cartesianlayer",!0),He._polarlayer=He._paper.append("g").classed("polarlayer",!0),He._ternarylayer=He._paper.append("g").classed("ternarylayer",!0),He._geolayer=He._paper.append("g").classed("geolayer",!0),He._funnelarealayer=He._paper.append("g").classed("funnelarealayer",!0),He._pielayer=He._paper.append("g").classed("pielayer",!0),He._treemaplayer=He._paper.append("g").classed("treemaplayer",!0),He._sunburstlayer=He._paper.append("g").classed("sunburstlayer",!0),He._indicatorlayer=He._toppaper.append("g").classed("indicatorlayer",!0),He._glimages=He._paper.append("g").classed("glimages",!0);var it=He._toppaper.append("g").classed("layer-above",!0);He._imageUpperLayer=it.append("g").classed("imagelayer",!0),He._shapeUpperLayer=it.append("g").classed("shapelayer",!0),He._infolayer=He._toppaper.append("g").classed("infolayer",!0),He._menulayer=He._toppaper.append("g").classed("menulayer",!0),He._zoomlayer=He._toppaper.append("g").classed("zoomlayer",!0),He._hoverlayer=He._hoverpaper.append("g").classed("hoverlayer",!0),He._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Me.emit("plotly_framework")}M.animate=dt,M.addFrames=lt,M.deleteFrames=Te,M.addTraces=se,M.deleteTraces=re,M.extendTraces=Q,M.moveTraces=ee,M.prependTraces=V,M.newPlot=I,M.plot=S,M.purge=Le,M.react=zt,M.redraw=X,M.relayout=be,M.restyle=ae,M.setPlotConfig=D,M.update=Ae,M._guiRelayout=Ne(be),M._guiRestyle=Ne(ae),M._guiUpdate=Ne(Ae),M._storeDirectGUIEdit=W},{"../components/color":643,"../components/drawing":665,"../constants/xmlns_namespaces":754,"../lib":778,"../lib/events":767,"../lib/queue":794,"../lib/svg_text_utils":803,"../plots/cartesian/axes":828,"../plots/cartesian/constants":834,"../plots/cartesian/graph_interact":837,"../plots/cartesian/select":847,"../plots/plots":891,"../plots/polar/legacy":899,"../registry":911,"./edit_types":810,"./helpers":811,"./manage_arrays":813,"./plot_config":815,"./plot_schema":816,"./subroutines":818,d3:169,"fast-isnumeric":241,"has-hover":440}],815:[function(e,v,M){var r={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},n={};function l(c,t){for(var f in c){var a=c[f];a.valType?t[f]=a.dflt:(t[f]||(t[f]={}),l(a,t[f]))}}l(r,n),v.exports={configAttributes:r,dfltConfig:n}},{}],816:[function(e,v,M){var r=e("../registry"),n=e("../lib"),l=e("../plots/attributes"),c=e("../plots/layout_attributes"),t=e("../plots/frame_attributes"),f=e("../plots/animation_attributes"),a=e("./plot_config").configAttributes,o=e("../plots/polar/legacy/area_attributes"),u=e("../plots/polar/legacy/axis_attributes"),h=e("./edit_types"),i=n.extendFlat,s=n.extendDeepAll,p=n.isPlainObject,d=n.isArrayOrTypedArray,y=n.nestedProperty,b=n.valObjectMeta,m="_isSubplotObj",_="_isLinkedToArray",T="_arrayAttrRegexps",g="_deprecated",A=[m,_,T,g];M.IS_SUBPLOT_OBJ=m,M.IS_LINKED_TO_ARRAY=_,M.DEPRECATED=g,M.UNDERSCORE_ATTRS=A,M.get=function(){var B={};r.allTypes.concat("area").forEach(function(H){B[H]=z(H)});var j={};return Object.keys(r.transformsRegistry).forEach(function(H){j[H]=S(H)}),{defs:{valObjects:b,metaKeys:A.concat(["description","role","editType","impliedEdits"]),editType:{traces:h.traces,layout:h.layout},impliedEdits:{}},traces:B,layout:E(),transforms:j,frames:C(),animation:D(f),config:D(a)}},M.crawl=function(B,j,H,K){var te=H||0;K=K||"",Object.keys(B).forEach(function(J){var oe=B[J];if(A.indexOf(J)===-1){var ie=(K?K+".":"")+J;j(oe,J,B,te,ie),!M.isValObject(oe)&&p(oe)&&J!=="impliedEdits"&&M.crawl(oe,j,te+1,ie)}})},M.isValObject=function(B){return B&&B.valType!==void 0},M.findArrayAttributes=function(B){var j=[],H=[],K=[],te,J;function oe(ee,ae,fe,de){H=H.slice(0,de).concat([ae]),K=K.slice(0,de).concat([ee&&ee._isLinkedToArray]);var pe=ee&&(ee.valType==="data_array"||ee.arrayOk===!0)&&!(H[de-1]==="colorbar"&&(ae==="ticktext"||ae==="tickvals"));pe&&ie(te,0,"")}function ie(ee,ae,fe){var de=ee[H[ae]],pe=fe+H[ae];if(ae===H.length-1)d(de)&&j.push(J+pe);else if(K[ae]){if(Array.isArray(de))for(var W=0;W<de.length;W++)p(de[W])&&ie(de[W],ae+1,pe+"["+W+"].")}else p(de)&&ie(de,ae+1,pe+".")}te=B,J="",M.crawl(l,oe),B._module&&B._module.attributes&&M.crawl(B._module.attributes,oe);var Q=B.transforms;if(Q)for(var V=0;V<Q.length;V++){var se=Q[V],re=se._module;re&&(J="transforms["+V+"].",te=se,M.crawl(re.attributes,oe))}return j},M.getTraceValObject=function(B,j){var H=j[0],K=1,te,J;if(H==="transforms"){if(j.length===1)return l.transforms;var oe=B.transforms;if(!Array.isArray(oe)||!oe.length)return!1;var ie=j[1];if(!L(ie)||ie>=oe.length)return!1;te=(r.transformsRegistry[oe[ie].type]||{}).attributes,J=te&&te[j[2]],K=3}else if(B.type==="area")J=o[H];else{var Q=B._module;if(Q||(Q=(r.modules[B.type||l.type.dflt]||{})._module),!Q)return!1;if(te=Q.attributes,J=te&&te[H],!J){var V=Q.basePlotModule;V&&V.attributes&&(J=V.attributes[H])}J||(J=l[H])}return R(J,j,K)},M.getLayoutValObject=function(B,j){var H=k(B,j[0]);return R(H,j,1)};function k(B,j){var H,K,te,J,oe=B._basePlotModules;if(oe){var ie;for(H=0;H<oe.length;H++){if(te=oe[H],te.attrRegex&&te.attrRegex.test(j)){if(te.layoutAttrOverrides)return te.layoutAttrOverrides;!ie&&te.layoutAttributes&&(ie=te.layoutAttributes)}var Q=te.baseLayoutAttrOverrides;if(Q&&j in Q)return Q[j]}if(ie)return ie}var V=B._modules;if(V){for(H=0;H<V.length;H++)if(J=V[H].layoutAttributes,J&&j in J)return J[j]}for(K in r.componentsRegistry){if(te=r.componentsRegistry[K],te.name==="colorscale"&&j.indexOf("coloraxis")===0)return te.layoutAttributes[j];if(!te.schema&&j===te.name)return te.layoutAttributes}return j in c?c[j]:j==="radialaxis"||j==="angularaxis"?u[j]:u.layout[j]||!1}function R(B,j,H){if(!B)return!1;if(B._isLinkedToArray){if(L(j[H]))H++;else if(H<j.length)return!1}for(;H<j.length;H++){var K=B[j[H]];if(p(K))B=K;else break;if(H===j.length-1)break;if(B._isLinkedToArray){if(H++,!L(j[H]))return!1}else if(B.valType==="info_array"){H++;var te=j[H];if(!L(te))return!1;var J=B.items;if(Array.isArray(J)){if(te>=J.length)return!1;if(B.dimensions===2){if(H++,j.length===H)return B;var oe=j[H];if(!L(oe))return!1;B=J[te][oe]}else B=J[te]}else B=J}}return B}function L(B){return B===Math.round(B)&&B>=0}function z(B){var j,H;B==="area"?(j={attributes:o},H={}):(j=r.modules[B]._module,H=j.basePlotModule);var K={};K.type=null;var te=s({},l),J=s({},j.attributes);M.crawl(J,function(Q,V,se,re,ee){y(te,ee).set(void 0),Q===void 0&&y(J,ee).set(void 0)}),s(K,te),r.traceIs(B,"noOpacity")&&delete K.opacity,r.traceIs(B,"showLegend")||(delete K.showlegend,delete K.legendgroup),r.traceIs(B,"noHover")&&(delete K.hoverinfo,delete K.hoverlabel),j.selectPoints||delete K.selectedpoints,s(K,J),H.attributes&&s(K,H.attributes),K.type=B;var oe={meta:j.meta||{},categories:j.categories||{},animatable:!!j.animatable,type:B,attributes:D(K)};if(j.layoutAttributes){var ie={};s(ie,j.layoutAttributes),oe.layoutAttributes=D(ie)}return j.animatable||M.crawl(oe,function(Q){M.isValObject(Q)&&"anim"in Q&&delete Q.anim}),oe}function E(){var B={},j,H;s(B,c);for(j in r.subplotsRegistry)if(H=r.subplotsRegistry[j],!!H.layoutAttributes)if(Array.isArray(H.attr))for(var K=0;K<H.attr.length;K++)X(B,H,H.attr[K]);else{var te=H.attr==="subplot"?H.name:H.attr;X(B,H,te)}B=U(B);for(j in r.componentsRegistry){H=r.componentsRegistry[j];var J=H.schema;if(J&&(J.subplots||J.layout)){var oe=J.subplots;if(oe&&oe.xaxis&&!oe.yaxis)for(var ie in oe.xaxis)delete B.yaxis[ie]}else H.name==="colorscale"?s(B,H.layoutAttributes):H.layoutAttributes&&I(B,H.layoutAttributes,H.name)}return{layoutAttributes:D(B)}}function S(B){var j=r.transformsRegistry[B],H=s({},j.attributes);return Object.keys(r.componentsRegistry).forEach(function(K){var te=r.componentsRegistry[K];te.schema&&te.schema.transforms&&te.schema.transforms[B]&&Object.keys(te.schema.transforms[B]).forEach(function(J){I(H,te.schema.transforms[B][J],J)})}),{attributes:D(H)}}function C(){var B={frames:s({},t)};return D(B),B.frames}function D(B){return F(B),N(B),G(B),B}function F(B){function j(K){return{valType:"string",editType:"none"}}function H(K,te,J){M.isValObject(K)?K.valType==="data_array"?(K.role="data",J[te+"src"]=j()):K.arrayOk===!0&&(J[te+"src"]=j()):p(K)&&(K.role="object")}M.crawl(B,H)}function N(B){function j(H,K,te){if(H){var J=H[_];J&&(delete H[_],te[K]={items:{}},te[K].items[J]=H,te[K].role="object")}}M.crawl(B,j)}function G(B){function j(H){for(var K in H)if(p(H[K]))j(H[K]);else if(Array.isArray(H[K]))for(var te=0;te<H[K].length;te++)j(H[K][te]);else H[K]instanceof RegExp&&(H[K]=H[K].toString())}j(B)}function U(B){return i(B,{radialaxis:u.radialaxis,angularaxis:u.angularaxis}),i(B,u.layout),B}function X(B,j,H){var K=y(B,H),te=s({},j.layoutAttributes);te[m]=!0,K.set(te)}function I(B,j,H){var K=y(B,H);K.set(s(K.get()||{},j))}},{"../lib":778,"../plots/animation_attributes":822,"../plots/attributes":824,"../plots/frame_attributes":857,"../plots/layout_attributes":882,"../plots/polar/legacy/area_attributes":897,"../plots/polar/legacy/axis_attributes":898,"../registry":911,"./edit_types":810,"./plot_config":815}],817:[function(e,v,M){var r=e("../lib"),n=e("../plots/attributes"),l="templateitemname",c={name:{valType:"string",editType:"none"}};c[l]={valType:"string",editType:"calc"},M.templatedArray=function(a,o){return o._isLinkedToArray=a,o.name=c.name,o[l]=c[l],o},M.traceTemplater=function(a){var o={},u,h;for(u in a)h=a[u],Array.isArray(h)&&h.length&&(o[u]=0);function i(s){u=r.coerce(s,{},n,"type");var p={type:u,_template:null};if(u in o){h=a[u];var d=o[u]%h.length;o[u]++,p._template=h[d]}return p}return{newTrace:i}},M.newContainer=function(a,o,u){var h=a._template,i=h&&(h[o]||u&&h[u]);r.isPlainObject(i)||(i=null);var s=a[o]={_template:i};return s},M.arrayTemplater=function(a,o,u){var h=a._template,i=h&&h[f(o)],s=h&&h[o];(!Array.isArray(s)||!s.length)&&(s=[]);var p={};function d(b){var m={name:b.name,_input:b},_=m[l]=b[l];if(!t(_))return m._template=i,m;for(var T=0;T<s.length;T++){var g=s[T];if(g.name===_)return p[_]=1,m._template=g,m}return m[u]=b[u]||!1,m._template=!1,m}function y(){for(var b=[],m=0;m<s.length;m++){var _=s[m],T=_.name;if(t(T)&&!p[T]){var g={_template:_,name:T,_input:{_templateitemname:T}};g[l]=_[l],b.push(g),p[T]=1}}return b}return{newItem:d,defaultItems:y}};function t(a){return a&&typeof a=="string"}function f(a){var o=a.length-1;return a.charAt(o)!=="s"&&r.warn("bad argument to arrayDefaultKey: "+a),a.substr(0,a.length-1)+"defaults"}M.arrayDefaultKey=f,M.arrayEditor=function(a,o,u){var h=(r.nestedProperty(a,o).get()||[]).length,i=u._index,s=i>=h&&(u._input||{})._templateitemname;s&&(i=h);var p=o+"["+i+"]",d;function y(){d={},s&&(d[p]={},d[p][l]=s)}y();function b(g,A){d[g]=A}function m(g,A){s?r.nestedProperty(d[p],g).set(A):d[p+"."+g]=A}function _(){var g=d;return y(),g}function T(g,A){g&&m(g,A);var k=_();for(var R in k)r.nestedProperty(a,R).set(k[R])}return{modifyBase:b,modifyItem:m,getUpdateObj:_,applyUpdate:T}}},{"../lib":778,"../plots/attributes":824}],818:[function(e,v,M){var r=e("d3"),n=e("../registry"),l=e("../plots/plots"),c=e("../lib"),t=e("../lib/clear_gl_canvases"),f=e("../components/color"),a=e("../components/drawing"),o=e("../components/titles"),u=e("../components/modebar"),h=e("../plots/cartesian/axes"),i=e("../constants/alignment"),s=e("../plots/cartesian/constraints"),p=s.enforce,d=s.clean,y=e("../plots/cartesian/autorange").doAutoRange,b="start",m="middle",_="end";M.layoutStyles=function(C){return c.syncOrAsync([l.doAutoMargin,g],C)};function T(C,D,F){for(var N=0;N<F.length;N++){var G=F[N][0],U=F[N][1];if(!(G[0]>=C[1]||G[1]<=C[0])&&U[0]<D[1]&&U[1]>D[0])return!0}return!1}function g(C){var D=C._fullLayout,F=D._size,N=F.p,G=h.list(C,"",!0),U,X,I,B,j,H;if(D._paperdiv.style({width:C._context.responsive&&D.autosize&&!C._context._hasZeroWidth&&!C.layout.width?"100%":D.width+"px",height:C._context.responsive&&D.autosize&&!C._context._hasZeroHeight&&!C.layout.height?"100%":D.height+"px"}).selectAll(".main-svg").call(a.setSize,D.width,D.height),C._context.setBackground(C,D.paper_bgcolor),M.drawMainTitle(C),u.manage(C),!D._has("cartesian"))return l.previousPromises(C);function K($t,rr,Pt){var Lt=$t._lw/2;if($t._id.charAt(0)==="x"){if(rr){if(Pt==="top")return rr._offset-N-Lt}else return F.t+F.h*(1-($t.position||0))+Lt%1;return rr._offset+rr._length+N+Lt}if(rr){if(Pt==="right")return rr._offset+rr._length+N+Lt}else return F.l+F.w*($t.position||0)+Lt%1;return rr._offset-N-Lt}for(U=0;U<G.length;U++){B=G[U];var te=B._anchorAxis;B._linepositions={},B._lw=a.crispRound(C,B.linewidth,1),B._mainLinePosition=K(B,te,B.side),B._mainMirrorPosition=B.mirror&&te?K(B,te,i.OPPOSITE_SIDE[B.side]):null}var J=[],oe=[],ie=[],Q=f.opacity(D.paper_bgcolor)===1&&f.opacity(D.plot_bgcolor)===1&&D.paper_bgcolor===D.plot_bgcolor;for(X in D._plots)if(I=D._plots[X],I.mainplot)I.bg&&I.bg.remove(),I.bg=void 0;else{var V=I.xaxis.domain,se=I.yaxis.domain,re=I.plotgroup;if(T(V,se,ie)){var ee=re.node(),ae=I.bg=c.ensureSingle(re,"rect","bg");ee.insertBefore(ae.node(),ee.childNodes[0]),oe.push(X)}else re.select("rect.bg").remove(),ie.push([V,se]),Q||(J.push(X),oe.push(X))}var fe=D._bgLayer.selectAll(".bg").data(J);for(fe.enter().append("rect").classed("bg",!0),fe.exit().remove(),fe.each(function($t){D._plots[$t].bg=r.select(this)}),U=0;U<oe.length;U++)I=D._plots[oe[U]],j=I.xaxis,H=I.yaxis,I.bg&&j._offset!==void 0&&H._offset!==void 0&&I.bg.call(a.setRect,j._offset-N,H._offset-N,j._length+2*N,H._length+2*N).call(f.fill,D.plot_bgcolor).style("stroke-width",0);if(!D._hasOnlyLargeSploms)for(X in D._plots){I=D._plots[X],j=I.xaxis,H=I.yaxis;var de=I.clipId="clip"+D._uid+X+"plot",pe=c.ensureSingleById(D._clips,"clipPath",de,function($t){$t.classed("plotclip",!0).append("rect")});I.clipRect=pe.select("rect").attr({width:j._length,height:H._length}),a.setTranslate(I.plot,j._offset,H._offset);var W,ue;I._hasClipOnAxisFalse?(W=null,ue=de):(W=de,ue=null),a.setClipUrl(I.plot,W,C),I.layerClipId=ue}var me,be,ke,Pe,je,ze,Ze,tt,Ce,Ae,Ne,qe,At;function kt($t){return"M"+me+","+$t+"H"+be}function Ve($t){return"M"+j._offset+","+$t+"h"+j._length}function ft($t){return"M"+$t+","+tt+"V"+Ze}function St($t){return"M"+$t+","+H._offset+"v"+H._length}function Wt($t,rr,Pt){if(!$t.showline||X!==$t._mainSubplot)return"";if(!$t._anchorAxis)return Pt($t._mainLinePosition);var Lt=rr($t._mainLinePosition);return $t.mirror&&(Lt+=rr($t._mainMirrorPosition)),Lt}for(X in D._plots){I=D._plots[X],j=I.xaxis,H=I.yaxis;var Qt="M0,0";A(j,X)&&(je=R(j,"left",H,G),me=j._offset-(je?N+je:0),ze=R(j,"right",H,G),be=j._offset+j._length+(ze?N+ze:0),ke=K(j,H,"bottom"),Pe=K(j,H,"top"),At=!j._anchorAxis||X!==j._mainSubplot,At&&(j.mirror==="allticks"||j.mirror==="all")&&(j._linepositions[X]=[ke,Pe]),Qt=Wt(j,kt,Ve),At&&j.showline&&(j.mirror==="all"||j.mirror==="allticks")&&(Qt+=kt(ke)+kt(Pe)),I.xlines.style("stroke-width",j._lw+"px").call(f.stroke,j.showline?j.linecolor:"rgba(0,0,0,0)")),I.xlines.attr("d",Qt);var zt="M0,0";A(H,X)&&(Ne=R(H,"bottom",j,G),Ze=H._offset+H._length+(Ne?N:0),qe=R(H,"top",j,G),tt=H._offset-(qe?N:0),Ce=K(H,j,"left"),Ae=K(H,j,"right"),At=!H._anchorAxis||X!==H._mainSubplot,At&&(H.mirror==="allticks"||H.mirror==="all")&&(H._linepositions[X]=[Ce,Ae]),zt=Wt(H,ft,St),At&&H.showline&&(H.mirror==="all"||H.mirror==="allticks")&&(zt+=ft(Ce)+ft(Ae)),I.ylines.style("stroke-width",H._lw+"px").call(f.stroke,H.showline?H.linecolor:"rgba(0,0,0,0)")),I.ylines.attr("d",zt)}return h.makeClipPaths(C),l.previousPromises(C)}function A(C,D){return(C.ticks||C.showline)&&(D===C._mainSubplot||C.mirror==="all"||C.mirror==="allticks")}function k(C,D,F){if(!F.showline||!F._lw)return!1;if(F.mirror==="all"||F.mirror==="allticks")return!0;var N=F._anchorAxis;if(!N)return!1;var G=i.FROM_BL[D];return F.side===D?N.domain[G]===C.domain[G]:F.mirror&&N.domain[1-G]===C.domain[1-G]}function R(C,D,F,N){if(k(C,D,F))return F._lw;for(var G=0;G<N.length;G++){var U=N[G];if(U._mainAxis===F._mainAxis&&k(C,D,U))return U._lw}return 0}M.drawMainTitle=function(C){var D=C._fullLayout,F=E(D),N=S(D);o.draw(C,"gtitle",{propContainer:D,propName:"title.text",placeholder:D._dfltTitle.plot,attributes:{x:L(D,F),y:z(D,N),"text-anchor":F,dy:N}})};function L(C,D){var F=C.title,N=C._size,G=0;switch(D===b?G=F.pad.l:D===_&&(G=-F.pad.r),F.xref){case"paper":return N.l+N.w*F.x+G;case"container":default:return C.width*F.x+G}}function z(C,D){var F=C.title,N=C._size,G=0;if(D==="0em"||!D?G=-F.pad.b:D===i.CAP_SHIFT+"em"&&(G=F.pad.t),F.y==="auto")return N.t/2;switch(F.yref){case"paper":return N.t+N.h-N.h*F.y+G;case"container":default:return C.height-C.height*F.y+G}}function E(C){var D=C.title,F=m;return c.isRightAnchor(D)?F=_:c.isLeftAnchor(D)&&(F=b),F}function S(C){var D=C.title,F="0em";return c.isTopAnchor(D)?F=i.CAP_SHIFT+"em":c.isMiddleAnchor(D)&&(F=i.MID_SHIFT+"em"),F}M.doTraceStyle=function(C){var D=C.calcdata,F=[],N;for(N=0;N<D.length;N++){var G=D[N],U=G[0]||{},X=U.trace||{},I=X._module||{},B=I.arraysToCalcdata;B&&B(G,X);var j=I.editStyle;j&&F.push({fn:j,cd0:U})}if(F.length){for(N=0;N<F.length;N++){var H=F[N];H.fn(C,H.cd0)}t(C),M.redrawReglTraces(C)}return l.style(C),n.getComponentMethod("legend","draw")(C),l.previousPromises(C)},M.doColorBars=function(C){return n.getComponentMethod("colorbar","draw")(C),l.previousPromises(C)},M.layoutReplot=function(C){var D=C.layout;return C.layout=void 0,n.call("plot",C,"",D)},M.doLegend=function(C){return n.getComponentMethod("legend","draw")(C),l.previousPromises(C)},M.doTicksRelayout=function(C){return h.draw(C,"redraw"),C._fullLayout._hasOnlyLargeSploms&&(n.subplotsRegistry.splom.updateGrid(C),t(C),M.redrawReglTraces(C)),M.drawMainTitle(C),l.previousPromises(C)},M.doModeBar=function(C){var D=C._fullLayout;u.manage(C);for(var F=0;F<D._basePlotModules.length;F++){var N=D._basePlotModules[F].updateFx;N&&N(C)}return l.previousPromises(C)},M.doCamera=function(C){for(var D=C._fullLayout,F=D._subplots.gl3d,N=0;N<F.length;N++){var G=D[F[N]],U=G._scene;U.setViewport(G)}},M.drawData=function(C){var D=C._fullLayout;t(C);for(var F=D._basePlotModules,N=0;N<F.length;N++)F[N].plot(C);return M.redrawReglTraces(C),l.style(C),n.getComponentMethod("shapes","draw")(C),n.getComponentMethod("annotations","draw")(C),n.getComponentMethod("images","draw")(C),D._replotting=!1,l.previousPromises(C)},M.redrawReglTraces=function(C){var D=C._fullLayout;if(D._has("regl")){var F=C._fullData,N=[],G=[],U,X;for(D._hasOnlyLargeSploms&&D._splomGrid.draw(),U=0;U<F.length;U++){var I=F[U];I.visible===!0&&I._length!==0&&(I.type==="splom"?D._splomScenes[I.uid].draw():I.type==="scattergl"?c.pushUnique(N,I.xaxis+I.yaxis):I.type==="scatterpolargl"&&c.pushUnique(G,I.subplot))}for(U=0;U<N.length;U++)X=D._plots[N[U]],X._scene&&X._scene.draw();for(U=0;U<G.length;U++)X=D[G[U]]._subplot,X._scene&&X._scene.draw()}},M.doAutoRangeAndConstraints=function(C){for(var D=h.list(C,"",!0),F,N={},G=0;G<D.length;G++)if(F=D[G],!N[F._id]){N[F._id]=1,d(C,F),y(C,F);var U=F._matchGroup;if(U)for(var X in U){var I=h.getFromId(C,X);y(C,I,F.range),N[X]=1}}p(C)},M.finalDraw=function(C){n.getComponentMethod("rangeslider","draw")(C),n.getComponentMethod("rangeselector","draw")(C)},M.drawMarginPushers=function(C){n.getComponentMethod("legend","draw")(C),n.getComponentMethod("rangeselector","draw")(C),n.getComponentMethod("sliders","draw")(C),n.getComponentMethod("updatemenus","draw")(C),n.getComponentMethod("colorbar","draw")(C)}},{"../components/color":643,"../components/drawing":665,"../components/modebar":703,"../components/titles":738,"../constants/alignment":745,"../lib":778,"../lib/clear_gl_canvases":762,"../plots/cartesian/autorange":827,"../plots/cartesian/axes":828,"../plots/cartesian/constraints":835,"../plots/plots":891,"../registry":911,d3:169}],819:[function(e,v,M){var r=e("../lib"),n=r.isPlainObject,l=e("./plot_schema"),c=e("../plots/plots"),t=e("../plots/attributes"),f=e("./plot_template"),a=e("./plot_config").dfltConfig;M.makeTemplate=function(b){b=r.isPlainObject(b)?b:r.getGraphDiv(b),b=r.extendDeep({_context:a},{data:b.data,layout:b.layout}),c.supplyDefaults(b);var m=b.data||[],_=b.layout||{};_._basePlotModules=b._fullLayout._basePlotModules,_._modules=b._fullLayout._modules;var T={data:{},layout:{}};m.forEach(function(D){var F={};h(D,F,s.bind(null,D));var N=r.coerce(D,{},t,"type"),G=T.data[N];G||(G=T.data[N]=[]),G.push(F)}),h(_,T.layout,i.bind(null,_)),delete T.layout.template;var g=_.template;if(n(g)){var A=g.layout,k,R,L,z,E,S;n(A)&&o(A,T.layout);var C=g.data;if(n(C)){for(R in T.data)if(L=C[R],Array.isArray(L)){for(E=T.data[R],S=E.length,z=L.length,k=0;k<S;k++)o(L[k%z],E[k]);for(k=S;k<z;k++)E.push(r.extendDeep({},L[k]))}for(R in C)R in T.data||(T.data[R]=r.extendDeep([],C[R]))}}return T};function o(b,m){b=r.extendDeep({},b);var _=Object.keys(b).sort(),T,g;function A(E,S,C){if(n(S)&&n(E))o(E,S);else if(Array.isArray(S)&&Array.isArray(E)){var D=f.arrayTemplater({_template:b},C);for(g=0;g<S.length;g++){var F=S[g],N=D.newItem(F)._template;N&&o(N,F)}var G=D.defaultItems();for(g=0;g<G.length;g++)S.push(G[g]._template);for(g=0;g<S.length;g++)delete S[g].templateitemname}}for(T=0;T<_.length;T++){var k=_[T],R=b[k];if(k in m?A(R,m[k],k):m[k]=R,u(k)===k)for(var L in m){var z=u(L);L!==z&&z===k&&!(L in b)&&A(R,m[L],k)}}}function u(b){return b.replace(/[0-9]+$/,"")}function h(b,m,_,T,g){var A=g&&_(g);for(var k in b){var R=b[k],L=p(b,k,T),z=p(b,k,g),E=_(z);if(!E){var S=u(k);S!==k&&(z=p(b,S,g),E=_(z))}if(!(A&&A===E)&&!(!E||E._noTemplating||E.valType==="data_array"||E.arrayOk&&Array.isArray(R)))if(!E.valType&&n(R))h(R,m,_,L,z);else if(E._isLinkedToArray&&Array.isArray(R))for(var C=!1,D=0,F={},N=0;N<R.length;N++){var G=R[N];if(n(G)){var U=G.name;if(U)F[U]||(h(G,m,_,p(R,D,L),p(R,D,z)),D++,F[U]=1);else if(!C){var X=f.arrayDefaultKey(k),I=p(b,X,T),B=p(R,D,L);h(G,m,_,B,p(R,D,z));var j=r.nestedProperty(m,B),H=r.nestedProperty(m,I);H.set(j.get()),j.set(null),C=!0}}}else{var K=r.nestedProperty(m,L);K.set(R)}}}function i(b,m){return l.getLayoutValObject(b,r.nestedProperty({},m).parts)}function s(b,m){return l.getTraceValObject(b,r.nestedProperty({},m).parts)}function p(b,m,_){var T;return _?Array.isArray(b)?T=_+"["+m+"]":T=_+"."+m:T=m,T}M.validateTemplate=function(b,m){var _=r.extendDeep({},{_context:a,data:b.data,layout:b.layout}),T=_.layout||{};n(m)||(m=T.template||{});var g=m.layout,A=m.data,k=[];_.layout=T,_.layout.template=m,c.supplyDefaults(_);var R=_._fullLayout,L=_._fullData,z={};function E(I,B){for(var j in I)if(j.charAt(0)!=="_"&&n(I[j])){var H=u(j),K=[],te;for(te=0;te<B.length;te++)K.push(p(I,j,B[te])),H!==j&&K.push(p(I,H,B[te]));for(te=0;te<K.length;te++)z[K[te]]=1;E(I[j],K)}}function S(I,B){for(var j in I)if(j.indexOf("defaults")===-1&&n(I[j])){var H=p(I,j,B);z[H]?S(I[j],H):k.push({code:"unused",path:H})}}if(n(g)?(E(R,["layout"]),S(g,"layout")):k.push({code:"layout"}),!n(A))k.push({code:"data"});else{for(var C={},D,F=0;F<L.length;F++){var N=L[F];D=N.type,C[D]=(C[D]||0)+1,N._fullInput._template||k.push({code:"missing",index:N._fullInput.index,traceType:D})}for(D in A){var G=A[D].length,U=C[D]||0;G>U?k.push({code:"unused",traceType:D,templateCount:G,dataCount:U}):U>G&&k.push({code:"reused",traceType:D,templateCount:G,dataCount:U})}}function X(I,B){for(var j in I)if(j.charAt(0)!=="_"){var H=I[j],K=p(I,j,B);n(H)?(Array.isArray(I)&&H._template===!1&&H.templateitemname&&k.push({code:"missing",path:K,templateitemname:H.templateitemname}),X(H,K)):Array.isArray(H)&&d(H)&&X(H,K)}}if(X({data:L,layout:R},""),k.length)return k.map(y)};function d(b){for(var m=0;m<b.length;m++)if(n(b[m]))return!0}function y(b){var m;switch(b.code){case"data":m="The template has no key data.";break;case"layout":m="The template has no key layout.";break;case"missing":b.path?m="There are no templates for item "+b.path+" with name "+b.templateitemname:m="There are no templates for trace "+b.index+", of type "+b.traceType+".";break;case"unused":b.path?m="The template item at "+b.path+" was not used in constructing the plot.":b.dataCount?m="Some of the templates of type "+b.traceType+" were not used. The template has "+b.templateCount+" traces, the data only has "+b.dataCount+" of this type.":m="The template has "+b.templateCount+" traces of type "+b.traceType+" but there are none in the data.";break;case"reused":m="Some of the templates of type "+b.traceType+" were used more than once. The template has "+b.templateCount+" traces, the data has "+b.dataCount+" of this type.";break}return b.msg=m,b}},{"../lib":778,"../plots/attributes":824,"../plots/plots":891,"./plot_config":815,"./plot_schema":816,"./plot_template":817}],820:[function(e,v,M){var r=e("fast-isnumeric"),n=e("./plot_api"),l=e("../plots/plots"),c=e("../lib"),t=e("../snapshot/helpers"),f=e("../snapshot/tosvg"),a=e("../snapshot/svgtoimg"),o=e("../version").version,u={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function h(i,s){s=s||{};var p,d,y,b;c.isPlainObject(i)?(p=i.data||[],d=i.layout||{},y=i.config||{},b={}):(i=c.getGraphDiv(i),p=c.extendDeep([],i.data),d=c.extendDeep({},i.layout),y=i._context,b=i._fullLayout||{});function m(U){return!(U in s)||c.validate(s[U],u[U])}if(!m("width")&&s.width!==null||!m("height")&&s.height!==null)throw new Error("Height and width should be pixel values.");if(!m("format"))throw new Error("Export format is not "+c.join2(u.format.values,", "," or ")+".");var _={};function T(U,X){return c.coerce(s,_,u,U,X)}var g=T("format"),A=T("width"),k=T("height"),R=T("scale"),L=T("setBackground"),z=T("imageDataOnly"),E=document.createElement("div");E.style.position="absolute",E.style.left="-5000px",document.body.appendChild(E);var S=c.extendFlat({},d);A?S.width=A:s.width===null&&r(b.width)&&(S.width=b.width),k?S.height=k:s.height===null&&r(b.height)&&(S.height=b.height);var C=c.extendFlat({},y,{_exportedPlot:!0,staticPlot:!0,setBackground:L}),D=t.getRedrawFunc(E);function F(){return new Promise(function(U){setTimeout(U,t.getDelay(E._fullLayout))})}function N(){return new Promise(function(U,X){var I=f(E,g,R),B=E._fullLayout.width,j=E._fullLayout.height;function H(){n.purge(E),document.body.removeChild(E)}if(g==="full-json"){var K=l.graphJson(E,!1,"keepdata","object",!0,!0);return K.version=o,K=JSON.stringify(K),H(),U(z?K:t.encodeJSON(K))}if(H(),g==="svg")return U(z?I:t.encodeSVG(I));var te=document.createElement("canvas");te.id=c.randstr(),a({format:g,width:B,height:j,scale:R,canvas:te,svg:I,promise:!0}).then(U).catch(X)})}function G(U){return z?U.replace(t.IMAGE_URL_PREFIX,""):U}return new Promise(function(U,X){n.plot(E,p,S,C).then(D).then(F).then(N).then(function(I){U(G(I))}).catch(function(I){X(I)})})}v.exports=h},{"../lib":778,"../plots/plots":891,"../snapshot/helpers":915,"../snapshot/svgtoimg":917,"../snapshot/tosvg":919,"../version":1370,"./plot_api":814,"fast-isnumeric":241}],821:[function(e,v,M){var r=e("../lib"),n=e("../plots/plots"),l=e("./plot_schema"),c=e("./plot_config").dfltConfig,t=r.isPlainObject,f=Array.isArray,a=r.isArrayOrTypedArray;v.exports=function(T,g){T===void 0&&(T=[]),g===void 0&&(g={});var A=l.get(),k=[],R={_context:r.extendFlat({},c)},L,z;f(T)?(R.data=r.extendDeep([],T),L=T):(R.data=[],L=[],k.push(s("array","data"))),t(g)?(R.layout=r.extendDeep({},g),z=g):(R.layout={},z={},arguments.length>1&&k.push(s("object","layout"))),n.supplyDefaults(R);for(var E=R._fullData,S=L.length,C=0;C<S;C++){var D=L[C],F=["data",C];if(!t(D)){k.push(s("object",F));continue}var N=E[C],G=N.type,U=A.traces[G].attributes;U.type={valType:"enumerated",values:[G]},N.visible===!1&&D.visible!==!1&&k.push(s("invisible",F)),o(D,N,U,k,F);var X=D.transforms,I=N.transforms;if(X){f(X)||k.push(s("array",F,["transforms"])),F.push("transforms");for(var B=0;B<X.length;B++){var j=["transforms",B],H=X[B].type;if(!t(X[B])){k.push(s("object",F,j));continue}var K=A.transforms[H]?A.transforms[H].attributes:{};K.type={valType:"enumerated",values:Object.keys(A.transforms)},o(X[B],I[B],K,k,F,j)}}}var te=R._fullLayout,J=u(A,E);return o(z,te,J,k,"layout"),k.length===0?void 0:k};function o(_,T,g,A,k,R){R=R||[];for(var L=Object.keys(_),z=0;z<L.length;z++){var E=L[z];if(E!=="transforms"){var S=R.slice();S.push(E);var C=_[E],D=T[E],F=d(g,E),N=(F||{}).valType,G=N==="info_array",U=N==="colorscale",X=(F||{}).items;if(!p(g,E))A.push(s("schema",k,S));else if(t(C)&&t(D)&&N!=="any")o(C,D,F,A,k,S);else if(G&&f(C)){C.length>D.length&&A.push(s("unused",k,S.concat(D.length)));var I=D.length,B=Array.isArray(X);B&&(I=Math.min(I,X.length));var j,H,K,te,J;if(F.dimensions===2)for(H=0;H<I;H++)if(f(C[H])){C[H].length>D[H].length&&A.push(s("unused",k,S.concat(H,D[H].length)));var oe=D[H].length;for(j=0;j<(B?Math.min(oe,X[H].length):oe);j++)K=B?X[H][j]:X,te=C[H][j],J=D[H][j],r.validate(te,K)?J!==te&&J!==+te&&A.push(s("dynamic",k,S.concat(H,j),te,J)):A.push(s("value",k,S.concat(H,j),te))}else A.push(s("array",k,S.concat(H),C[H]));else for(H=0;H<I;H++)K=B?X[H]:X,te=C[H],J=D[H],r.validate(te,K)?J!==te&&J!==+te&&A.push(s("dynamic",k,S.concat(H),te,J)):A.push(s("value",k,S.concat(H),te))}else if(F.items&&!G&&f(C)){var ie=X[Object.keys(X)[0]],Q=[],V,se;for(V=0;V<D.length;V++){var re=D[V]._index||V;if(se=S.slice(),se.push(re),t(C[re])&&t(D[V])){Q.push(re);var ee=C[re],ae=D[V];t(ee)&&ee.visible!==!1&&ae.visible===!1?A.push(s("invisible",k,se)):o(ee,ae,ie,A,k,se)}}for(V=0;V<C.length;V++)se=S.slice(),se.push(V),t(C[V])?Q.indexOf(V)===-1&&A.push(s("unused",k,se)):A.push(s("object",k,se,C[V]))}else!t(C)&&t(D)?A.push(s("object",k,S,C)):!a(C)&&a(D)&&!G&&!U?A.push(s("array",k,S,C)):E in T?r.validate(C,F)?F.valType==="enumerated"&&(F.coerceNumber&&C!==+D||C!==D)&&A.push(s("dynamic",k,S,C,D)):A.push(s("value",k,S,C)):A.push(s("unused",k,S,C))}}return A}function u(_,T){for(var g=_.layout.layoutAttributes,A=0;A<T.length;A++){var k=T[A],R=_.traces[k.type],L=R.layoutAttributes;L&&(k.subplot?r.extendFlat(g[R.attributes.subplot.dflt],L):r.extendFlat(g,L))}return g}var h={object:function(_,T){var g;return _==="layout"&&T===""?g="The layout argument":_[0]==="data"&&T===""?g="Trace "+_[1]+" in the data argument":g=i(_)+"key "+T,g+" must be linked to an object container"},array:function(_,T){var g;return _==="data"?g="The data argument":g=i(_)+"key "+T,g+" must be linked to an array container"},schema:function(_,T){return i(_)+"key "+T+" is not part of the schema"},unused:function(_,T,g){var A=t(g)?"container":"key";return i(_)+A+" "+T+" did not get coerced"},dynamic:function(_,T,g,A){return[i(_)+"key",T,"(set to '"+g+"')","got reset to","'"+A+"'","during defaults."].join(" ")},invisible:function(_,T){return(T?i(_)+"item "+T:"Trace "+_[1])+" got defaulted to be not visible"},value:function(_,T,g){return[i(_)+"key "+T,"is set to an invalid value ("+g+")"].join(" ")}};function i(_){return f(_)?"In data trace "+_[1]+", ":"In "+_+", "}function s(_,T,g,A,k){g=g||"";var R,L;f(T)?(R=T[0],L=T[1]):(R=T,L=null);var z=m(g),E=h[_](T,z,A,k);return r.log(E),{code:_,container:R,trace:L,path:g,astr:z,msg:E}}function p(_,T){var g=b(T),A=g.keyMinusId,k=g.id;return A in _&&_[A]._isSubplotObj&&k?!0:T in _}function d(_,T){if(T in _)return _[T];var g=b(T);return _[g.keyMinusId]}var y=r.counterRegex("([a-z]+)");function b(_){var T=_.match(y);return{keyMinusId:T&&T[1],id:T&&T[2]}}function m(_){if(!f(_))return String(_);for(var T="",g=0;g<_.length;g++){var A=_[g];typeof A=="number"?T=T.substr(0,T.length-1)+"["+A+"]":T+=A,g<_.length-1&&(T+=".")}return T}},{"../lib":778,"../plots/plots":891,"./plot_config":815,"./plot_schema":816}],822:[function(e,v,M){v.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],823:[function(e,v,M){var r=e("../lib"),n=e("../plot_api/plot_template");v.exports=function(c,t,f){var a=f.name,o=f.inclusionAttr||"visible",u=t[a],h=r.isArrayOrTypedArray(c[a])?c[a]:[],i=t[a]=[],s=n.arrayTemplater(t,a,o),p,d;for(p=0;p<h.length;p++){var y=h[p];r.isPlainObject(y)?d=s.newItem(y):(d=s.newItem({}),d[o]=!1),d._index=p,d[o]!==!1&&f.handleItemDefaults(y,d,t,f),i.push(d)}var b=s.defaultItems();for(p=0;p<b.length;p++)d=b[p],d._index=i.length,f.handleItemDefaults({},d,t,f,{}),i.push(d);if(r.isArrayOrTypedArray(u)){var m=Math.min(u.length,i.length);for(p=0;p<m;p++)r.relinkPrivateKeys(i[p],u[p])}return i}},{"../lib":778,"../plot_api/plot_template":817}],824:[function(e,v,M){var r=e("../components/fx/attributes");v.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:r.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":674}],825:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib"),l=n.dateTime2ms,c=n.incrementMonth,t=e("../../constants/numerical"),f=t.ONEAVGMONTH;v.exports=function(o,u,h,i){if(u.type!=="date")return i;var s=o[h+"periodalignment"];if(!s)return i;var p=o[h+"period"],d;if(r(p)){if(p=+p,p<=0)return i}else if(typeof p=="string"&&p.charAt(0)==="M"){var y=+p.substring(1);if(y>0&&Math.round(y)===y)d=y;else return i}for(var b=u.calendar,m=s==="start",_=s==="end",T=o[h+"period0"],g=l(T,b)||0,A=[],k=i.length,R=0;R<k;R++){var L=i[R],z,E,S;if(d){for(z=Math.round((L-g)/(d*f)),S=c(g,d*z,b);S>L;)S=c(S,-d,b);for(;S<=L;)S=c(S,d,b);E=c(S,-d,b)}else{for(z=Math.round((L-g)/p),S=g+z*p;S>L;)S-=p;for(;S<=L;)S+=p;E=S-p}A[R]=m?E:_?S:(E+S)/2}return A}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],826:[function(e,v,M){v.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],827:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib"),l=e("../../constants/numerical").FP_SAFE,c=e("../../registry"),t=e("./axis_ids"),f=t.getFromId,a=t.isLinked;v.exports={getAutoRange:o,makePadFn:h,doAutoRange:d,findExtremes:y,concatExtremes:p};function o(k,R){var L,z,E=[],S=k._fullLayout,C=h(S,R,0),D=h(S,R,1),F=p(k,R),N=F.min,G=F.max;if(N.length===0||G.length===0)return n.simpleMap(R.range,R.r2l);var U=N[0].val,X=G[0].val;for(L=1;L<N.length&&U===X;L++)U=Math.min(U,N[L].val);for(L=1;L<G.length&&U===X;L++)X=Math.max(X,G[L].val);var I=!1;if(R.range){var B=n.simpleMap(R.range,R.r2l);I=B[1]<B[0]}R.autorange==="reversed"&&(I=!0,R.autorange=!0);var j=R.rangemode,H=j==="tozero",K=j==="nonnegative",te=R._length,J=te/10,oe=0,ie,Q,V,se,re,ee;for(L=0;L<N.length;L++)for(ie=N[L],z=0;z<G.length;z++)Q=G[z],ee=Q.val-ie.val-u(R,ie.val,Q.val),ee>0&&(re=te-C(ie)-D(Q),re>J?ee/re>oe&&(V=ie,se=Q,oe=ee/re):ee/te>oe&&(V={val:ie.val,nopad:1},se={val:Q.val,nopad:1},oe=ee/te));function ae(ue,me){return Math.max(ue,D(me))}if(U===X){var fe=U-1,de=U+1;if(H)if(U===0)E=[0,1];else{var pe=(U>0?G:N).reduce(ae,0),W=U/(1-Math.min(.5,pe/te));E=U>0?[0,W]:[W,0]}else K?E=[Math.max(0,fe),Math.max(1,de)]:E=[fe,de]}else H?(V.val>=0&&(V={val:0,nopad:1}),se.val<=0&&(se={val:0,nopad:1})):K&&(V.val-oe*C(V)<0&&(V={val:0,nopad:1}),se.val<=0&&(se={val:1,nopad:1})),oe=(se.val-V.val-u(R,ie.val,Q.val))/(te-C(V)-D(se)),E=[V.val-oe*C(V),se.val+oe*D(se)];return I&&E.reverse(),n.simpleMap(E,R.l2r||Number)}function u(k,R,L){var z=0;if(k.rangebreaks)for(var E=k.locateBreaks(R,L),S=0;S<E.length;S++){var C=E[S];z+=C.max-C.min}return z}function h(k,R,L){var z=.05*R._length,E=R._anchorAxis||{};if((R.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var S=R.autorange==="reversed";if(!S){var C=n.simpleMap(R.range,R.r2l);S=C[1]<C[0]}S&&(L=!L)}var D=0;return a(k,R._id)||(D=s(R,L)),z=Math.max(D,z),R.constrain==="domain"&&R._inputDomain&&(z*=(R._inputDomain[1]-R._inputDomain[0])/(R.domain[1]-R.domain[0])),function(N){return N.nopad?0:N.pad+(N.extrapad?z:D)}}var i=3;function s(k,R){var L=0,z=k._anchorAxis||{};if((z.ticklabelposition||"").indexOf("inside")!==-1&&(!R&&(z.side==="left"||z.side==="bottom")||R&&(z.side==="top"||z.side==="right"))){var E=k._id.charAt(0)==="x";if(z._vals){var S=n.deg2rad(z._tickAngles[z._id+"tick"]||0),C=Math.abs(Math.cos(S)),D=Math.abs(Math.sin(S));z._vals.forEach(function(F){if(F.bb){var N=2*i+F.bb.width,G=2*i+F.bb.height;L=Math.max(L,E?Math.max(N*C,G*D):Math.max(G*C,N*D))}})}z.ticks==="inside"&&z.ticklabelposition==="inside"&&(L+=z.ticklen||0)}return L}function p(k,R,L){var z=R._id,E=k._fullData,S=k._fullLayout,C=[],D=[],F,N,G;function U(H,K){for(F=0;F<K.length;F++){var te=H[K[F]],J=(te._extremes||{})[z];if(te.visible===!0&&J){for(N=0;N<J.min.length;N++)G=J.min[N],b(C,G.val,G.pad,{extrapad:G.extrapad});for(N=0;N<J.max.length;N++)G=J.max[N],m(D,G.val,G.pad,{extrapad:G.extrapad})}}}if(U(E,R._traceIndices),U(S.annotations||[],R._annIndices||[]),U(S.shapes||[],R._shapeIndices||[]),R._matchGroup&&!L){for(var X in R._matchGroup)if(X!==R._id){var I=f(k,X),B=p(k,I,!0),j=R._length/I._length;for(N=0;N<B.min.length;N++)G=B.min[N],b(C,G.val,G.pad*j,{extrapad:G.extrapad});for(N=0;N<B.max.length;N++)G=B.max[N],m(D,G.val,G.pad*j,{extrapad:G.extrapad})}}return{min:C,max:D}}function d(k,R,L){if(R.setScale(),R.autorange){R.range=L?L.slice():o(k,R),R._r=R.range.slice(),R._rl=n.simpleMap(R._r,R.r2l);var z=R._input,E={};E[R._attr+".range"]=R.range,E[R._attr+".autorange"]=R.autorange,c.call("_storeDirectGUIEdit",k.layout,k._fullLayout._preGUI,E),z.range=R.range.slice(),z.autorange=R.autorange}var S=R._anchorAxis;if(S&&S.rangeslider){var C=S.rangeslider[R._name];C&&C.rangemode==="auto"&&(C.range=o(k,R)),S._input.rangeslider[R._name]=n.extendFlat({},C)}}function y(k,R,L){L||(L={}),k._m||k.setScale();var z=[],E=[],S=R.length,C=L.padded||!1,D=L.tozero&&(k.type==="linear"||k.type==="-"),F=k.type==="log",N=!1,G=L.vpadLinearized||!1,U,X,I,B,j,H,K,te,J;function oe(fe){if(Array.isArray(fe))return N=!0,function(pe){return Math.max(Number(fe[pe]||0),0)};var de=Math.max(Number(fe||0),0);return function(){return de}}var ie=oe((k._m>0?L.ppadplus:L.ppadminus)||L.ppad||0),Q=oe((k._m>0?L.ppadminus:L.ppadplus)||L.ppad||0),V=oe(L.vpadplus||L.vpad),se=oe(L.vpadminus||L.vpad);if(!N){if(te=1/0,J=-1/0,F)for(U=0;U<S;U++)X=R[U],X<te&&X>0&&(te=X),X>J&&X<l&&(J=X);else for(U=0;U<S;U++)X=R[U],X<te&&X>-l&&(te=X),X>J&&X<l&&(J=X);R=[te,J],S=2}var re={tozero:D,extrapad:C};function ee(fe){I=R[fe],r(I)&&(H=ie(fe),K=Q(fe),G?(B=k.c2l(I)-se(fe),j=k.c2l(I)+V(fe)):(te=I-se(fe),J=I+V(fe),F&&te<J/10&&(te=J/10),B=k.c2l(te),j=k.c2l(J)),D&&(B=Math.min(0,B),j=Math.max(0,j)),T(B)&&b(z,B,K,re),T(j)&&m(E,j,H,re))}var ae=Math.min(6,S);for(U=0;U<ae;U++)ee(U);for(U=S-1;U>=ae;U--)ee(U);return{min:z,max:E,opts:L}}function b(k,R,L,z){_(k,R,L,z,g)}function m(k,R,L,z){_(k,R,L,z,A)}function _(k,R,L,z,E){for(var S=z.tozero,C=z.extrapad,D=!0,F=0;F<k.length&&D;F++){var N=k[F];if(E(N.val,R)&&N.pad>=L&&(N.extrapad||!C)){D=!1;break}else E(R,N.val)&&N.pad<=L&&(C||!N.extrapad)&&(k.splice(F,1),F--)}if(D){var G=S&&R===0;k.push({val:R,pad:G?0:L,extrapad:G?!1:C})}}function T(k){return r(k)&&Math.abs(k)<l}function g(k,R){return k<=R}function A(k,R){return k>=R}},{"../../constants/numerical":753,"../../lib":778,"../../registry":911,"./axis_ids":831,"fast-isnumeric":241}],828:[function(e,v,M){var r=e("d3"),n=e("fast-isnumeric"),l=e("../../plots/plots"),c=e("../../registry"),t=e("../../lib"),f=t.strTranslate,a=e("../../lib/svg_text_utils"),o=e("../../components/titles"),u=e("../../components/color"),h=e("../../components/drawing"),i=e("./layout_attributes"),s=e("./clean_ticks"),p=e("../../constants/numerical"),d=p.ONEMAXYEAR,y=p.ONEAVGYEAR,b=p.ONEMINYEAR,m=p.ONEMAXQUARTER,_=p.ONEAVGQUARTER,T=p.ONEMINQUARTER,g=p.ONEMAXMONTH,A=p.ONEAVGMONTH,k=p.ONEMINMONTH,R=p.ONEWEEK,L=p.ONEDAY,z=L/2,E=p.ONEHOUR,S=p.ONEMIN,C=p.ONESEC,D=p.MINUS_SIGN,F=p.BADNUM,N=e("../../constants/alignment"),G=N.MID_SHIFT,U=N.CAP_SHIFT,X=N.LINE_SPACING,I=N.OPPOSITE_SIDE,B=3,j=v.exports={};j.setConvert=e("./set_convert");var H=e("./axis_autotype"),K=e("./axis_ids"),te=K.idSort,J=K.isLinked;j.id2name=K.id2name,j.name2id=K.name2id,j.cleanId=K.cleanId,j.list=K.list,j.listIds=K.listIds,j.getFromId=K.getFromId,j.getFromTrace=K.getFromTrace;var oe=e("./autorange");j.getAutoRange=oe.getAutoRange,j.findExtremes=oe.findExtremes;var ie=1e-4;function Q(We){var Fe=(We[1]-We[0])*ie;return[We[0]-Fe,We[1]+Fe]}j.coerceRef=function(We,Fe,_t,Mt,wt,Dt){var Rt=Mt.charAt(Mt.length-1),Bt=_t._fullLayout._subplots[Rt+"axis"],Nt=Mt+"ref",er={};return wt||(wt=Bt[0]||(typeof Dt=="string"?Dt:Dt[0])),Dt||(Dt=wt),Bt=Bt.concat(Bt.map(function(qt){return qt+" domain"})),er[Nt]={valType:"enumerated",values:Bt.concat(Dt?typeof Dt=="string"?[Dt]:Dt:[]),dflt:wt},t.coerce(We,Fe,er,Nt)},j.getRefType=function(We){return We===void 0?We:We==="paper"?"paper":We==="pixel"?"pixel":/( domain)$/.test(We)?"domain":"range"},j.coercePosition=function(We,Fe,_t,Mt,wt,Dt){var Rt,Bt,Nt=j.getRefType(Mt);if(Nt!=="range")Rt=t.ensureNumber,Bt=_t(wt,Dt);else{var er=j.getFromId(Fe,Mt);Dt=er.fraction2r(Dt),Bt=_t(wt,Dt),Rt=er.cleanPos}We[wt]=Rt(Bt)},j.cleanPosition=function(We,Fe,_t){var Mt=_t==="paper"||_t==="pixel"?t.ensureNumber:j.getFromId(Fe,_t).cleanPos;return Mt(We)},j.redrawComponents=function(We,Fe){Fe=Fe||j.listIds(We);var _t=We._fullLayout;function Mt(wt,Dt,Rt,Bt){for(var Nt=c.getComponentMethod(wt,Dt),er={},qt=0;qt<Fe.length;qt++)for(var Zt=_t[j.id2name(Fe[qt])],_r=Zt[Rt],Gr=0;Gr<_r.length;Gr++){var zr=_r[Gr];if(!er[zr]&&(Nt(We,zr),er[zr]=1,Bt))return}}Mt("annotations","drawOne","_annIndices"),Mt("shapes","drawOne","_shapeIndices"),Mt("images","draw","_imgIndices",!0)};var V=j.getDataConversions=function(We,Fe,_t,Mt){var wt,Dt=_t==="x"||_t==="y"||_t==="z"?_t:Mt;if(Array.isArray(Dt)){if(wt={type:H(Mt,void 0,{autotypenumbers:We._fullLayout.autotypenumbers}),_categories:[]},j.setConvert(wt),wt.type==="category")for(var Rt=0;Rt<Mt.length;Rt++)wt.d2c(Mt[Rt])}else wt=j.getFromTrace(We,Fe,Dt);return wt?{d2c:wt.d2c,c2d:wt.c2d}:Dt==="ids"?{d2c:re,c2d:re}:{d2c:se,c2d:se}};function se(We){return+We}function re(We){return String(We)}j.getDataToCoordFunc=function(We,Fe,_t,Mt){return V(We,Fe,_t,Mt).d2c},j.counterLetter=function(We){var Fe=We.charAt(0);if(Fe==="x")return"y";if(Fe==="y")return"x"},j.minDtick=function(We,Fe,_t,Mt){["log","category","multicategory"].indexOf(We.type)!==-1||!Mt?We._minDtick=0:We._minDtick===void 0?(We._minDtick=Fe,We._forceTick0=_t):We._minDtick&&((We._minDtick/Fe+1e-6)%1<2e-6&&((_t-We._forceTick0)/Fe%1+1.000001)%1<2e-6?(We._minDtick=Fe,We._forceTick0=_t):((Fe/We._minDtick+1e-6)%1>2e-6||((_t-We._forceTick0)/We._minDtick%1+1.000001)%1>2e-6)&&(We._minDtick=0))},j.saveRangeInitial=function(We,Fe){for(var _t=j.list(We,"",!0),Mt=!1,wt=0;wt<_t.length;wt++){var Dt=_t[wt],Rt=Dt._rangeInitial===void 0,Bt=Rt||!(Dt.range[0]===Dt._rangeInitial[0]&&Dt.range[1]===Dt._rangeInitial[1]);(Rt&&Dt.autorange===!1||Fe&&Bt)&&(Dt._rangeInitial=Dt.range.slice(),Mt=!0)}return Mt},j.saveShowSpikeInitial=function(We,Fe){for(var _t=j.list(We,"",!0),Mt=!1,wt="on",Dt=0;Dt<_t.length;Dt++){var Rt=_t[Dt],Bt=Rt._showSpikeInitial===void 0,Nt=Bt||Rt.showspikes!==Rt._showspikes;(Bt||Fe&&Nt)&&(Rt._showSpikeInitial=Rt.showspikes,Mt=!0),wt==="on"&&!Rt.showspikes&&(wt="off")}return We._fullLayout._cartesianSpikesEnabled=wt,Mt},j.autoBin=function(We,Fe,_t,Mt,wt,Dt){var Rt=t.aggNums(Math.min,null,We),Bt=t.aggNums(Math.max,null,We);if(Fe.type==="category"||Fe.type==="multicategory")return{start:Rt-.5,end:Bt+.5,size:Math.max(1,Math.round(Dt)||1),_dataSpan:Bt-Rt};wt||(wt=Fe.calendar);var Nt;if(Fe.type==="log"?Nt={type:"linear",range:[Rt,Bt]}:Nt={type:Fe.type,range:t.simpleMap([Rt,Bt],Fe.c2r,0,wt),calendar:wt},j.setConvert(Nt),Dt=Dt&&s.dtick(Dt,Nt.type),Dt)Nt.dtick=Dt,Nt.tick0=s.tick0(void 0,Nt.type,wt);else{var er;if(_t)er=(Bt-Rt)/_t;else{var qt=t.distinctVals(We),Zt=Math.pow(10,Math.floor(Math.log(qt.minDiff)/Math.LN10)),_r=Zt*t.roundUp(qt.minDiff/Zt,[.9,1.9,4.9,9.9],!0);er=Math.max(_r,2*t.stdev(We)/Math.pow(We.length,Mt?.25:.4)),n(er)||(er=1)}j.autoTicks(Nt,er)}var Gr=Nt.dtick,zr=j.tickIncrement(j.tickFirst(Nt),Gr,"reverse",wt),Or,Mn;if(typeof Gr=="number")zr=ee(zr,We,Nt,Rt,Bt),Mn=1+Math.floor((Bt-zr)/Gr),Or=zr+Mn*Gr;else for(Nt.dtick.charAt(0)==="M"&&(zr=ae(zr,We,Gr,Rt,wt)),Or=zr,Mn=0;Or<=Bt;)Or=j.tickIncrement(Or,Gr,!1,wt),Mn++;return{start:Fe.c2r(zr,0,wt),end:Fe.c2r(Or,0,wt),size:Gr,_dataSpan:Bt-Rt}};function ee(We,Fe,_t,Mt,wt){var Dt=0,Rt=0,Bt=0,Nt=0;function er(Gr){return(1+(Gr-We)*100/_t.dtick)%100<2}for(var qt=0;qt<Fe.length;qt++)Fe[qt]%1===0?Bt++:n(Fe[qt])||Nt++,er(Fe[qt])&&Dt++,er(Fe[qt]+_t.dtick/2)&&Rt++;var Zt=Fe.length-Nt;if(Bt===Zt&&_t.type!=="date")_t.dtick<1?We=Mt-.5*_t.dtick:(We-=.5,We+_t.dtick<Mt&&(We+=_t.dtick));else if(Rt<Zt*.1&&(Dt>Zt*.3||er(Mt)||er(wt))){var _r=_t.dtick/2;We+=We+_r<Mt?_r:-_r}return We}function ae(We,Fe,_t,Mt,wt){var Dt=t.findExactDates(Fe,wt),Rt=.8;if(Dt.exactDays>Rt){var Bt=Number(_t.substr(1));Dt.exactYears>Rt&&Bt%12===0?We=j.tickIncrement(We,"M6","reverse")+L*1.5:Dt.exactMonths>Rt?We=j.tickIncrement(We,"M1","reverse")+L*15.5:We-=z;var Nt=j.tickIncrement(We,_t);if(Nt<=Mt)return Nt}return We}j.prepTicks=function(We,Fe){var _t=t.simpleMap(We.range,We.r2l,void 0,void 0,Fe);if(We._dtickInit=We.dtick,We._tick0Init=We.tick0,We.tickmode==="auto"||!We.dtick){var Mt=We.nticks,wt;Mt||(We.type==="category"||We.type==="multicategory"?(wt=We.tickfont?(We.tickfont.size||12)*1.2:15,Mt=We._length/wt):(wt=We._id.charAt(0)==="y"?40:80,Mt=t.constrain(We._length/wt,4,9)+1),We._name==="radialaxis"&&(Mt*=2)),We.tickmode==="array"&&(Mt*=100),We._roughDTick=Math.abs(_t[1]-_t[0])/Mt,j.autoTicks(We,We._roughDTick),We._minDtick>0&&We.dtick<We._minDtick*2&&(We.dtick=We._minDtick,We.tick0=We.l2r(We._forceTick0))}We.ticklabelmode==="period"&&de(We),We.tick0||(We.tick0=We.type==="date"?"2000-01-01":0),We.type==="date"&&We.dtick<.1&&(We.dtick=.1),tt(We)};function fe(We){return+We.substring(1)}function de(We){var Fe;function _t(){return!(n(We.dtick)||We.dtick.charAt(0)!=="M")}var Mt=_t(),wt=j.getTickFormat(We);if(wt){var Dt=We._dtickInit!==We.dtick;/%[fLQsSMX]/.test(wt)||(/%[HI]/.test(wt)?(Fe=E,Dt&&!Mt&&We.dtick<E&&(We.dtick=E)):/%p/.test(wt)?(Fe=z,Dt&&!Mt&&We.dtick<z&&(We.dtick=z)):/%[Aadejuwx]/.test(wt)?(Fe=L,Dt&&!Mt&&We.dtick<L&&(We.dtick=L)):/%[UVW]/.test(wt)?(Fe=R,Dt&&!Mt&&We.dtick<R&&(We.dtick=R)):/%[Bbm]/.test(wt)?(Fe=A,Dt&&(Mt?fe(We.dtick)<1:We.dtick<k)&&(We.dtick="M1")):/%[q]/.test(wt)?(Fe=_,Dt&&(Mt?fe(We.dtick)<3:We.dtick<T)&&(We.dtick="M3")):/%[Yy]/.test(wt)&&(Fe=y,Dt&&(Mt?fe(We.dtick)<12:We.dtick<b)&&(We.dtick="M12")))}Mt=_t(),Mt&&We.tick0===We._dowTick0&&(We.tick0=We._rawTick0),We._definedDelta=Fe}function pe(We,Fe,_t){for(var Mt=0;Mt<We.length;Mt++){var wt=We[Mt].value,Dt=Mt,Rt=Mt+1;Mt<We.length-1?(Dt=Mt,Rt=Mt+1):Mt>0?(Dt=Mt-1,Rt=Mt):(Dt=Mt,Rt=Mt);var Bt=We[Dt].value,Nt=We[Rt].value,er=Math.abs(Nt-Bt),qt=_t||er,Zt=0;qt>=b?er>=b&&er<=d?Zt=er:Zt=y:_t===_&&qt>=T?er>=T&&er<=m?Zt=er:Zt=_:qt>=k?er>=k&&er<=g?Zt=er:Zt=A:_t===R&&qt>=R?Zt=R:qt>=L?Zt=L:_t===z&&qt>=z?Zt=z:_t===E&&qt>=E&&(Zt=E);var _r;Zt>=er&&(Zt=er,_r=!0);var Gr=wt+Zt;if(Fe.rangebreaks&&Zt>0){for(var zr=84,Or=0,Mn=0;Mn<zr;Mn++){var Yn=(Mn+.5)/zr;Fe.maskBreaks(wt*(1-Yn)+Yn*Gr)!==F&&Or++}Zt*=Or/zr,Zt||(We[Mt].drop=!0),_r&&er>R&&(Zt=er)}(Zt>0||Mt===0)&&(We[Mt].periodX=wt+Zt/2)}}j.calcTicks=function(Fe,_t){j.prepTicks(Fe,_t);var Mt=t.simpleMap(Fe.range,Fe.r2l,void 0,void 0,_t);if(Fe.tickmode==="array")return W(Fe);var wt=Q(Mt),Dt=wt[0],Rt=wt[1],Bt=Mt[1]<Mt[0],Nt=Math.min(Mt[0],Mt[1]),er=Math.max(Mt[0],Mt[1]),qt=Fe.type==="log"&&!(n(Fe.dtick)||Fe.dtick.charAt(0)==="L"),Zt=Fe.ticklabelmode==="period";if(Fe._tmin=j.tickFirst(Fe,_t),Fe._tmin<Dt!==Bt)return[];(Fe.type==="category"||Fe.type==="multicategory")&&(Rt=Bt?Math.max(-.5,Rt):Math.min(Fe._categories.length-.5,Rt));var _r=Fe._tmin;Fe.rangebreaks&&Fe._tick0Init!==Fe.tick0&&(_r=nr(_r,Fe),Bt||(_r=j.tickIncrement(_r,Fe.dtick,!Bt,Fe.calendar))),Zt&&(_r=j.tickIncrement(_r,Fe.dtick,!Bt,Fe.calendar));for(var Gr=Math.max(1e3,Fe._length||0),zr=[],Or=null;Bt?_r>=Rt:_r<=Rt;_r=j.tickIncrement(_r,Fe.dtick,Bt,Fe.calendar)){if(Fe.rangebreaks&&!Bt){if(_r<Dt)continue;if(Fe.maskBreaks(_r)===F&&nr(_r,Fe)>=er)break}if(zr.length>Gr||_r===Or)break;Or=_r;var Mn=!1;qt&&_r!==(_r|0)&&(Mn=!0),zr.push({minor:Mn,value:_r})}Zt&&pe(zr,Fe,Fe._definedDelta);var Yn;if(Fe.rangebreaks){var An=Fe._id.charAt(0)==="y",Bn=1;Fe.tickmode==="auto"&&(Bn=Fe.tickfont?Fe.tickfont.size:12);var jn=NaN;for(Yn=zr.length-1;Yn>-1;Yn--){if(zr[Yn].drop){zr.splice(Yn,1);continue}zr[Yn].value=nr(zr[Yn].value,Fe);var Nr=Fe.c2p(zr[Yn].value);(An?jn>Nr-Bn:jn<Nr+Bn)?zr.splice(Bt?Yn+1:Yn,1):jn=Nr}}Ft(Fe)&&Math.abs(Mt[1]-Mt[0])===360&&zr.pop(),Fe._tmax=(zr[zr.length-1]||{}).value,Fe._prevDateHead="",Fe._inCalcTicks=!0;var Lr=[],Ln,dn;for(Yn=0;Yn<zr.length;Yn++){var xn=zr[Yn].minor,tn=zr[Yn].value;Ln=j.tickText(Fe,tn,!1,xn),dn=zr[Yn].periodX,dn!==void 0&&(Ln.periodX=dn,(dn>er||dn<Nt)&&(dn>er&&(Ln.periodX=er),dn<Nt&&(Ln.periodX=Nt),Ln.text=" ",Fe._prevDateHead="")),Lr.push(Ln)}return Fe._inCalcTicks=!1,Lr};function W(We){var Fe=We.tickvals,_t=We.ticktext,Mt=new Array(Fe.length),wt=t.simpleMap(We.range,We.r2l),Dt=Q(wt),Rt=Math.min(Dt[0],Dt[1]),Bt=Math.max(Dt[0],Dt[1]),Nt=0;Array.isArray(_t)||(_t=[]);var er=We.type==="category"?We.d2l_noadd:We.d2l;We.type==="log"&&String(We.dtick).charAt(0)!=="L"&&(We.dtick="L"+Math.pow(10,Math.floor(Math.min(We.range[0],We.range[1]))-1));for(var qt=0;qt<Fe.length;qt++){var Zt=er(Fe[qt]);Zt>Rt&&Zt<Bt&&(_t[qt]===void 0?Mt[Nt]=j.tickText(We,Zt):Mt[Nt]=Ce(We,Zt,String(_t[qt])),Nt++)}return Nt<Fe.length&&Mt.splice(Nt,Fe.length-Nt),We.rangebreaks&&(Mt=Mt.filter(function(_r){return We.maskBreaks(_r.x)!==F})),Mt}var ue=[2,5,10],me=[1,2,3,6,12],be=[1,2,5,10,15,30],ke=[1,2,3,7,14],Pe=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],je=[-.301,0,.301,.699,1],ze=[15,30,45,90,180];function Ze(We,Fe,_t){return Fe*t.roundUp(We/Fe,_t)}j.autoTicks=function(We,Fe){var _t;function Mt(qt){return Math.pow(qt,Math.floor(Math.log(Fe)/Math.LN10))}if(We.type==="date"){We.tick0=t.dateTick0(We.calendar,0);var wt=2*Fe;if(wt>y)Fe/=y,_t=Mt(10),We.dtick="M"+12*Ze(Fe,_t,ue);else if(wt>A)Fe/=A,We.dtick="M"+Ze(Fe,1,me);else if(wt>L){We.dtick=Ze(Fe,L,We._hasDayOfWeekBreaks?[1,2,7,14]:ke);var Dt=j.getTickFormat(We),Rt=We.ticklabelmode==="period";Rt&&(We._rawTick0=We.tick0),/%[uVW]/.test(Dt)?We.tick0=t.dateTick0(We.calendar,2):We.tick0=t.dateTick0(We.calendar,1),Rt&&(We._dowTick0=We.tick0)}else wt>E?We.dtick=Ze(Fe,E,me):wt>S?We.dtick=Ze(Fe,S,be):wt>C?We.dtick=Ze(Fe,C,be):(_t=Mt(10),We.dtick=Ze(Fe,_t,ue))}else if(We.type==="log"){We.tick0=0;var Bt=t.simpleMap(We.range,We.r2l);if(Fe>.7)We.dtick=Math.ceil(Fe);else if(Math.abs(Bt[1]-Bt[0])<1){var Nt=1.5*Math.abs((Bt[1]-Bt[0])/Fe);Fe=Math.abs(Math.pow(10,Bt[1])-Math.pow(10,Bt[0]))/Nt,_t=Mt(10),We.dtick="L"+Ze(Fe,_t,ue)}else We.dtick=Fe>.3?"D2":"D1"}else We.type==="category"||We.type==="multicategory"?(We.tick0=0,We.dtick=Math.ceil(Math.max(Fe,1))):Ft(We)?(We.tick0=0,_t=1,We.dtick=Ze(Fe,_t,ze)):(We.tick0=0,_t=Mt(10),We.dtick=Ze(Fe,_t,ue));if(We.dtick===0&&(We.dtick=1),!n(We.dtick)&&typeof We.dtick!="string"){var er=We.dtick;throw We.dtick=1,"ax.dtick error: "+String(er)}};function tt(We){var Fe=We.dtick;if(We._tickexponent=0,!n(Fe)&&typeof Fe!="string"&&(Fe=1),(We.type==="category"||We.type==="multicategory")&&(We._tickround=null),We.type==="date"){var _t=We.r2l(We.tick0),Mt=We.l2r(_t).replace(/(^-|i)/g,""),wt=Mt.length;if(String(Fe).charAt(0)==="M")wt>10||Mt.substr(5)!=="01-01"?We._tickround="d":We._tickround=+Fe.substr(1)%12===0?"y":"m";else if(Fe>=L&&wt<=10||Fe>=L*15)We._tickround="d";else if(Fe>=S&&wt<=16||Fe>=E)We._tickround="M";else if(Fe>=C&&wt<=19||Fe>=S)We._tickround="S";else{var Dt=We.l2r(_t+Fe).replace(/^-/,"").length;We._tickround=Math.max(wt,Dt)-20,We._tickround<0&&(We._tickround=4)}}else if(n(Fe)||Fe.charAt(0)==="L"){var Rt=We.range.map(We.r2d||Number);n(Fe)||(Fe=Number(Fe.substr(1))),We._tickround=2-Math.floor(Math.log(Fe)/Math.LN10+.01);var Bt=Math.max(Math.abs(Rt[0]),Math.abs(Rt[1])),Nt=Math.floor(Math.log(Bt)/Math.LN10+.01),er=We.minexponent===void 0?3:We.minexponent;Math.abs(Nt)>er&&(Wt(We.exponentformat)&&!Qt(Nt)?We._tickexponent=3*Math.round((Nt-1)/3):We._tickexponent=Nt)}else We._tickround=null}j.tickIncrement=function(We,Fe,_t,Mt){var wt=_t?-1:1;if(n(Fe))return t.increment(We,wt*Fe);var Dt=Fe.charAt(0),Rt=wt*Number(Fe.substr(1));if(Dt==="M")return t.incrementMonth(We,Rt,Mt);if(Dt==="L")return Math.log(Math.pow(10,We)+Rt)/Math.LN10;if(Dt==="D"){var Bt=Fe==="D2"?je:Pe,Nt=We+wt*.01,er=t.roundUp(t.mod(Nt,1),Bt,_t);return Math.floor(Nt)+Math.log(r.round(Math.pow(10,er),1))/Math.LN10}throw"unrecognized dtick "+String(Fe)},j.tickFirst=function(We,Fe){var _t=We.r2l||Number,Mt=t.simpleMap(We.range,_t,void 0,void 0,Fe),wt=Mt[1]<Mt[0],Dt=wt?Math.floor:Math.ceil,Rt=Q(Mt)[0],Bt=We.dtick,Nt=_t(We.tick0);if(n(Bt)){var er=Dt((Rt-Nt)/Bt)*Bt+Nt;return(We.type==="category"||We.type==="multicategory")&&(er=t.constrain(er,0,We._categories.length-1)),er}var qt=Bt.charAt(0),Zt=Number(Bt.substr(1));if(qt==="M"){for(var _r=0,Gr=Nt,zr,Or,Mn;_r<10;){if(zr=j.tickIncrement(Gr,Bt,wt,We.calendar),(zr-Rt)*(Gr-Rt)<=0)return wt?Math.min(Gr,zr):Math.max(Gr,zr);Or=(Rt-(Gr+zr)/2)/(zr-Gr),Mn=qt+(Math.abs(Math.round(Or))||1)*Zt,Gr=j.tickIncrement(Gr,Mn,Or<0?!wt:wt,We.calendar),_r++}return t.error("tickFirst did not converge",We),Gr}else{if(qt==="L")return Math.log(Dt((Math.pow(10,Rt)-Nt)/Zt)*Zt+Nt)/Math.LN10;if(qt==="D"){var Yn=Bt==="D2"?je:Pe,An=t.roundUp(t.mod(Rt,1),Yn,wt);return Math.floor(Rt)+Math.log(r.round(Math.pow(10,An),1))/Math.LN10}else throw"unrecognized dtick "+String(Bt)}},j.tickText=function(We,Fe,_t,Mt){var wt=Ce(We,Fe),Dt=We.tickmode==="array",Rt=_t||Dt,Bt=We.type,Nt=Bt==="category"?We.d2l_noadd:We.d2l,er;if(Dt&&Array.isArray(We.ticktext)){var qt=t.simpleMap(We.range,We.r2l),Zt=(Math.abs(qt[1]-qt[0])-(We._lBreaks||0))/1e4;for(er=0;er<We.ticktext.length&&!(Math.abs(Fe-Nt(We.tickvals[er]))<Zt);er++);if(er<We.ticktext.length)return wt.text=String(We.ticktext[er]),wt}function _r(Or){if(Or===void 0)return!0;if(_t)return Or==="none";var Mn={first:We._tmin,last:We._tmax}[Or];return Or!=="all"&&Fe!==Mn}var Gr=_t?"never":We.exponentformat!=="none"&&_r(We.showexponent)?"hide":"";if(Bt==="date"?Ae(We,wt,_t,Rt):Bt==="log"?Ne(We,wt,_t,Rt,Gr):Bt==="category"?qe(We,wt):Bt==="multicategory"?At(We,wt,_t):Ft(We)?Ve(We,wt,_t,Rt,Gr):kt(We,wt,_t,Rt,Gr),Mt||(We.tickprefix&&!_r(We.showtickprefix)&&(wt.text=We.tickprefix+wt.text),We.ticksuffix&&!_r(We.showticksuffix)&&(wt.text+=We.ticksuffix)),We.tickson==="boundaries"||We.showdividers){var zr=function(Or){var Mn=We.l2p(Or);return Mn>=0&&Mn<=We._length?Or:null};wt.xbnd=[zr(wt.x-.5),zr(wt.x+We.dtick-.5)]}return wt},j.hoverLabelText=function(We,Fe,_t){if(_t!==F&&_t!==Fe)return j.hoverLabelText(We,Fe)+" - "+j.hoverLabelText(We,_t);var Mt=We.type==="log"&&Fe<=0,wt=j.tickText(We,We.c2l(Mt?-Fe:Fe),"hover").text;return Mt?Fe===0?"0":D+wt:wt};function Ce(We,Fe,_t){var Mt=We.tickfont||{};return{x:Fe,dx:0,dy:0,text:_t||"",fontSize:Mt.size,font:Mt.family,fontColor:Mt.color}}function Ae(We,Fe,_t,Mt){var wt=We._tickround,Dt=_t&&We.hoverformat||j.getTickFormat(We);Mt&&(n(wt)?wt=4:wt={y:"m",m:"d",d:"M",M:"S",S:4}[wt]);var Rt=t.formatDate(Fe.x,Dt,wt,We._dateFormat,We.calendar,We._extraFormat),Bt,Nt=Rt.indexOf(`
`);if(Nt!==-1&&(Bt=Rt.substr(Nt+1),Rt=Rt.substr(0,Nt)),Mt&&(Rt==="00:00:00"||Rt==="00:00"?(Rt=Bt,Bt=""):Rt.length===8&&(Rt=Rt.replace(/:00$/,""))),Bt)if(_t)wt==="d"?Rt+=", "+Bt:Rt=Bt+(Rt?", "+Rt:"");else if(!We._inCalcTicks||We._prevDateHead!==Bt)We._prevDateHead=Bt,Rt+="<br>"+Bt;else{var er=(We.ticklabelposition||"").indexOf("inside")!==-1,qt=We._realSide||We.side;(!er&&qt==="top"||er&&qt==="bottom")&&(Rt+="<br> ")}Fe.text=Rt}function Ne(We,Fe,_t,Mt,wt){var Dt=We.dtick,Rt=Fe.x,Bt=We.tickformat,Nt=typeof Dt=="string"&&Dt.charAt(0);if(wt==="never"&&(wt=""),Mt&&Nt!=="L"&&(Dt="L3",Nt="L"),Bt||Nt==="L")Fe.text=zt(Math.pow(10,Rt),We,wt,Mt);else if(n(Dt)||Nt==="D"&&t.mod(Rt+.01,1)<.1){var er=Math.round(Rt),qt=Math.abs(er),Zt=We.exponentformat;Zt==="power"||Wt(Zt)&&Qt(er)?(er===0?Fe.text=1:er===1?Fe.text="10":Fe.text="10<sup>"+(er>1?"":D)+qt+"</sup>",Fe.fontSize*=1.25):(Zt==="e"||Zt==="E")&&qt>2?Fe.text="1"+Zt+(er>0?"+":D)+qt:(Fe.text=zt(Math.pow(10,Rt),We,"","fakehover"),Dt==="D1"&&We._id.charAt(0)==="y"&&(Fe.dy-=Fe.fontSize/6))}else if(Nt==="D")Fe.text=String(Math.round(Math.pow(10,t.mod(Rt,1)))),Fe.fontSize*=.75;else throw"unrecognized dtick "+String(Dt);if(We.dtick==="D1"){var _r=String(Fe.text).charAt(0);(_r==="0"||_r==="1")&&(We._id.charAt(0)==="y"?Fe.dx-=Fe.fontSize/4:(Fe.dy+=Fe.fontSize/2,Fe.dx+=(We.range[1]>We.range[0]?1:-1)*Fe.fontSize*(Rt<0?.5:.25)))}}function qe(We,Fe){var _t=We._categories[Math.round(Fe.x)];_t===void 0&&(_t=""),Fe.text=String(_t)}function At(We,Fe,_t){var Mt=Math.round(Fe.x),wt=We._categories[Mt]||[],Dt=wt[1]===void 0?"":String(wt[1]),Rt=wt[0]===void 0?"":String(wt[0]);_t?Fe.text=Rt+" - "+Dt:(Fe.text=Dt,Fe.text2=Rt)}function kt(We,Fe,_t,Mt,wt){wt==="never"?wt="":We.showexponent==="all"&&Math.abs(Fe.x/We.dtick)<1e-6&&(wt="hide"),Fe.text=zt(Fe.x,We,wt,Mt)}function Ve(We,Fe,_t,Mt,wt){if(We.thetaunit==="radians"&&!_t){var Dt=Fe.x/180;if(Dt===0)Fe.text="0";else{var Rt=ft(Dt);if(Rt[1]>=100)Fe.text=zt(t.deg2rad(Fe.x),We,wt,Mt);else{var Bt=Fe.x<0;Rt[1]===1?Rt[0]===1?Fe.text="π":Fe.text=Rt[0]+"π":Fe.text=["<sup>",Rt[0],"</sup>","⁄","<sub>",Rt[1],"</sub>","π"].join(""),Bt&&(Fe.text=D+Fe.text)}}}else Fe.text=zt(Fe.x,We,wt,Mt)}function ft(We){function Fe(Bt,Nt){return Math.abs(Bt-Nt)<=1e-6}function _t(Bt,Nt){return Fe(Nt,0)?Bt:_t(Nt,Bt%Nt)}function Mt(Bt){for(var Nt=1;!Fe(Math.round(Bt*Nt)/Nt,Bt);)Nt*=10;return Nt}var wt=Mt(We),Dt=We*wt,Rt=Math.abs(_t(Dt,wt));return[Math.round(Dt/Rt),Math.round(wt/Rt)]}var St=["f","p","n","μ","m","","k","M","G","T"];function Wt(We){return We==="SI"||We==="B"}function Qt(We){return We>14||We<-15}function zt(We,Fe,_t,Mt){var wt=We<0,Dt=Fe._tickround,Rt=_t||Fe.exponentformat||"B",Bt=Fe._tickexponent,Nt=j.getTickFormat(Fe),er=Fe.separatethousands;if(Mt){var qt={exponentformat:Rt,minexponent:Fe.minexponent,dtick:Fe.showexponent==="none"?Fe.dtick:n(We)&&Math.abs(We)||1,range:Fe.showexponent==="none"?Fe.range.map(Fe.r2d):[0,We||1]};tt(qt),Dt=(Number(qt._tickround)||0)+4,Bt=qt._tickexponent,Fe.hoverformat&&(Nt=Fe.hoverformat)}if(Nt)return Fe._numFormat(Nt)(We).replace(/-/g,D);var Zt=Math.pow(10,-Dt)/2;if(Rt==="none"&&(Bt=0),We=Math.abs(We),We<Zt)We="0",wt=!1;else{if(We+=Zt,Bt&&(We*=Math.pow(10,-Bt),Dt+=Bt),Dt===0)We=String(Math.floor(We));else if(Dt<0){We=String(Math.round(We)),We=We.substr(0,We.length+Dt);for(var _r=Dt;_r<0;_r++)We+="0"}else{We=String(We);var Gr=We.indexOf(".")+1;Gr&&(We=We.substr(0,Gr+Dt).replace(/\.?0+$/,""))}We=t.numSeparate(We,Fe._separators,er)}if(Bt&&Rt!=="hide"){Wt(Rt)&&Qt(Bt)&&(Rt="power");var zr;Bt<0?zr=D+-Bt:Rt!=="power"?zr="+"+Bt:zr=String(Bt),Rt==="e"||Rt==="E"?We+=Rt+zr:Rt==="power"?We+="×10<sup>"+zr+"</sup>":Rt==="B"&&Bt===9?We+="B":Wt(Rt)&&(We+=St[Bt/3+5])}return wt?D+We:We}j.getTickFormat=function(We){var Fe;function _t(Nt){return typeof Nt!="string"?Nt:Number(Nt.replace("M",""))*A}function Mt(Nt,er){var qt=["L","D"];if(typeof Nt==typeof er){if(typeof Nt=="number")return Nt-er;var Zt=qt.indexOf(Nt.charAt(0)),_r=qt.indexOf(er.charAt(0));return Zt===_r?Number(Nt.replace(/(L|D)/g,""))-Number(er.replace(/(L|D)/g,"")):Zt-_r}else return typeof Nt=="number"?1:-1}function wt(Nt,er,qt){var Zt=qt||function(zr){return zr},_r=er[0],Gr=er[1];return(!_r&&typeof _r!="number"||Zt(_r)<=Zt(Nt))&&(!Gr&&typeof Gr!="number"||Zt(Gr)>=Zt(Nt))}function Dt(Nt,er){var qt=er[0]===null,Zt=er[1]===null,_r=Mt(Nt,er[0])>=0,Gr=Mt(Nt,er[1])<=0;return(qt||_r)&&(Zt||Gr)}var Rt,Bt;if(We.tickformatstops&&We.tickformatstops.length>0)switch(We.type){case"date":case"linear":{for(Fe=0;Fe<We.tickformatstops.length;Fe++)if(Bt=We.tickformatstops[Fe],Bt.enabled&&wt(We.dtick,Bt.dtickrange,_t)){Rt=Bt;break}break}case"log":{for(Fe=0;Fe<We.tickformatstops.length;Fe++)if(Bt=We.tickformatstops[Fe],Bt.enabled&&Dt(We.dtick,Bt.dtickrange)){Rt=Bt;break}break}}return Rt?Rt.value:We.tickformat},j.getSubplots=function(We,Fe){var _t=We._fullLayout._subplots,Mt=_t.cartesian.concat(_t.gl2d||[]),wt=Fe?j.findSubplotsWithAxis(Mt,Fe):Mt;return wt.sort(function(Dt,Rt){var Bt=Dt.substr(1).split("y"),Nt=Rt.substr(1).split("y");return Bt[0]===Nt[0]?+Bt[1]-+Nt[1]:+Bt[0]-+Nt[0]}),wt},j.findSubplotsWithAxis=function(We,Fe){for(var _t=new RegExp(Fe._id.charAt(0)==="x"?"^"+Fe._id+"y":Fe._id+"$"),Mt=[],wt=0;wt<We.length;wt++){var Dt=We[wt];_t.test(Dt)&&Mt.push(Dt)}return Mt},j.makeClipPaths=function(We){var Fe=We._fullLayout;if(!Fe._hasOnlyLargeSploms){var _t={_offset:0,_length:Fe.width,_id:""},Mt={_offset:0,_length:Fe.height,_id:""},wt=j.list(We,"x",!0),Dt=j.list(We,"y",!0),Rt=[],Bt,Nt;for(Bt=0;Bt<wt.length;Bt++)for(Rt.push({x:wt[Bt],y:Mt}),Nt=0;Nt<Dt.length;Nt++)Bt===0&&Rt.push({x:_t,y:Dt[Nt]}),Rt.push({x:wt[Bt],y:Dt[Nt]});var er=Fe._clips.selectAll(".axesclip").data(Rt,function(qt){return qt.x._id+qt.y._id});er.enter().append("clipPath").classed("axesclip",!0).attr("id",function(qt){return"clip"+Fe._uid+qt.x._id+qt.y._id}).append("rect"),er.exit().remove(),er.each(function(qt){r.select(this).select("rect").attr({x:qt.x._offset||0,y:qt.y._offset||0,width:qt.x._length||1,height:qt.y._length||1})})}},j.draw=function(We,Fe,_t){var Mt=We._fullLayout;Fe==="redraw"&&Mt._paper.selectAll("g.subplot").each(function(Dt){var Rt=Dt[0],Bt=Mt._plots[Rt];if(Bt){var Nt=Bt.xaxis,er=Bt.yaxis;Bt.xaxislayer.selectAll("."+Nt._id+"tick").remove(),Bt.yaxislayer.selectAll("."+er._id+"tick").remove(),Bt.xaxislayer.selectAll("."+Nt._id+"tick2").remove(),Bt.yaxislayer.selectAll("."+er._id+"tick2").remove(),Bt.xaxislayer.selectAll("."+Nt._id+"divider").remove(),Bt.yaxislayer.selectAll("."+er._id+"divider").remove(),Bt.gridlayer&&Bt.gridlayer.selectAll("path").remove(),Bt.zerolinelayer&&Bt.zerolinelayer.selectAll("path").remove(),Mt._infolayer.select(".g-"+Nt._id+"title").remove(),Mt._infolayer.select(".g-"+er._id+"title").remove()}});var wt=!Fe||Fe==="redraw"?j.listIds(We):Fe;return t.syncOrAsync(wt.map(function(Dt){return function(){if(Dt){var Rt=j.getFromId(We,Dt),Bt=j.drawOne(We,Rt,_t);return Rt._r=Rt.range.slice(),Rt._rl=t.simpleMap(Rt._r,Rt.r2l),Bt}}}))},j.drawOne=function(We,Fe,_t){_t=_t||{};var Mt,wt,Dt;Fe.setScale();var Rt=We._fullLayout,Bt=Fe._id,Nt=Bt.charAt(0),er=j.counterLetter(Bt),qt=Rt._plots[Fe._mainSubplot];if(!qt)return;var Zt=qt[Nt+"axislayer"],_r=Fe._mainLinePosition,Gr=Fe._mainMirrorPosition,zr=Fe._vals=j.calcTicks(Fe),Or=[Fe.mirror,_r,Gr].join("_");for(Mt=0;Mt<zr.length;Mt++)zr[Mt].axInfo=Or;Fe._selections={},Fe._tickAngles&&(Fe._prevTickAngles=Fe._tickAngles),Fe._tickAngles={},Fe._depth=null;var Mn={};function Yn(dr){var an=Bt+(dr||"tick");return Mn[an]||(Mn[an]=Lt(Fe,an)),Mn[an]}if(Fe.visible){var An=j.makeTransTickFn(Fe),Bn=j.makeTransTickLabelFn(Fe),jn,Nr,Lr=Fe.ticks==="inside",Ln=Fe.ticks==="outside";if(Fe.tickson==="boundaries"){var dn=$t(Fe,zr);Nr=j.clipEnds(Fe,dn),jn=Lr?Nr:dn}else Nr=j.clipEnds(Fe,zr),jn=Lr&&Fe.ticklabelmode!=="period"?Nr:zr;var xn=Fe._gridVals=Nr,tn=Pt(Fe,zr);if(!Rt._hasOnlyLargeSploms){var wn=Fe._subplotsWith,Sn={};for(Mt=0;Mt<wn.length;Mt++){wt=wn[Mt],Dt=Rt._plots[wt];var un=Dt[er+"axis"],vt=un._mainAxis._id;if(!Sn[vt]){Sn[vt]=1;var Gt=Nt==="x"?"M0,"+un._offset+"v"+un._length:"M"+un._offset+",0h"+un._length;j.drawGrid(We,Fe,{vals:xn,counterAxis:un,layer:Dt.gridlayer.select("."+Bt),path:Gt,transFn:An}),j.drawZeroLine(We,Fe,{counterAxis:un,layer:Dt.zerolinelayer,path:Gt,transFn:An})}}}var cr=j.getTickSigns(Fe),Er=[];if(Fe.ticks){var Wr=j.makeTickPath(Fe,_r,cr[2]),Vr,Qr;Fe._anchorAxis&&Fe.mirror&&Fe.mirror!==!0?(Vr=j.makeTickPath(Fe,Gr,cr[3]),Qr=Wr+Vr):(Vr="",Qr=Wr);var Hr;if(Fe.showdividers&&Ln&&Fe.tickson==="boundaries"){var Cn={};for(Mt=0;Mt<tn.length;Mt++)Cn[tn[Mt].x]=1;Hr=function(dr){return Cn[dr.x]?Vr:Qr}}else Hr=Qr;j.drawTicks(We,Fe,{vals:jn,layer:Zt,path:Hr,transFn:An}),Fe.mirror==="allticks"&&(Er=Object.keys(Fe._linepositions||{}))}for(Mt=0;Mt<Er.length;Mt++){wt=Er[Mt],Dt=Rt._plots[wt];var ra=Fe._linepositions[wt]||[],ta=j.makeTickPath(Fe,ra[0],cr[0])+j.makeTickPath(Fe,ra[1],cr[1]);j.drawTicks(We,Fe,{vals:jn,layer:Dt[Nt+"axislayer"],path:ta,transFn:An})}var ba=[];if(ba.push(function(){return j.drawLabels(We,Fe,{vals:zr,layer:Zt,transFn:Bn,labelFns:j.makeLabelFns(Fe,_r)})}),Fe.type==="multicategory"){var Wa={x:2,y:10}[Nt];ba.push(function(){var dr={x:"height",y:"width"}[Nt],an=Yn()[dr]+Wa+(Fe._tickAngles[Bt+"tick"]?Fe.tickfont.size*X:0);return j.drawLabels(We,Fe,{vals:rr(Fe,zr),layer:Zt,cls:Bt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:An,labelFns:j.makeLabelFns(Fe,_r+an*cr[4])})}),ba.push(function(){return Fe._depth=cr[4]*(Yn("tick2")[Fe.side]-_r),Le(We,Fe,{vals:tn,layer:Zt,path:j.makeTickPath(Fe,_r,cr[4],Fe._depth),transFn:An})})}else Fe.title.hasOwnProperty("standoff")&&ba.push(function(){Fe._depth=cr[4]*(Yn()[Fe.side]-_r)});var ei=c.getComponentMethod("rangeslider","isVisible")(Fe);return ba.push(function(){var dr=Fe.side.charAt(0),an=I[Fe.side].charAt(0),Kr=j.getPxPosition(We,Fe),Rn=Ln?Fe.ticklen:0,Gn,Sa,ha,Aa;if((Fe.automargin||ei)&&(Fe.type==="multicategory"?Gn=Yn("tick2"):(Gn=Yn(),Nt==="x"&&dr==="b"&&(Fe._depth=Math.max(Gn.width>0?Gn.bottom-Kr:0,Rn)))),Fe.automargin){Sa={x:0,y:0,r:0,l:0,t:0,b:0};var ka=[0,1];if(Nt==="x"){if(dr==="b"?Sa[dr]=Fe._depth:(Sa[dr]=Fe._depth=Math.max(Gn.width>0?Kr-Gn.top:0,Rn),ka.reverse()),Gn.width>0){var Za=Gn.right-(Fe._offset+Fe._length);Za>0&&(Sa.xr=1,Sa.r=Za);var Xt=Fe._offset-Gn.left;Xt>0&&(Sa.xl=0,Sa.l=Xt)}}else if(dr==="l"?Sa[dr]=Fe._depth=Math.max(Gn.height>0?Kr-Gn.left:0,Rn):(Sa[dr]=Fe._depth=Math.max(Gn.height>0?Gn.right-Kr:0,Rn),ka.reverse()),Gn.height>0){var xr=Gn.bottom-(Fe._offset+Fe._length);xr>0&&(Sa.yb=0,Sa.b=xr);var Yr=Fe._offset-Gn.top;Yr>0&&(Sa.yt=1,Sa.t=Yr)}Sa[er]=Fe.anchor==="free"?Fe.position:Fe._anchorAxis.domain[ka[0]],Fe.title.text!==Rt._dfltTitle[Nt]&&(Sa[dr]+=Be(Fe)+(Fe.title.standoff||0)),Fe.mirror&&Fe.anchor!=="free"&&(ha={x:0,y:0,r:0,l:0,t:0,b:0},ha[an]=Fe.linewidth,Fe.mirror&&Fe.mirror!==!0&&(ha[an]+=Rn),Fe.mirror===!0||Fe.mirror==="ticks"?ha[er]=Fe._anchorAxis.domain[ka[1]]:(Fe.mirror==="all"||Fe.mirror==="allticks")&&(ha[er]=[Fe._counterDomainMin,Fe._counterDomainMax][ka[1]]))}ei&&(Aa=c.getComponentMethod("rangeslider","autoMarginOpts")(We,Fe)),l.autoMargin(We,ht(Fe),Sa),l.autoMargin(We,it(Fe),ha),l.autoMargin(We,Ge(Fe),Aa)}),!_t.skipTitle&&!(ei&&Fe.side==="bottom")&&ba.push(function(){return et(We,Fe)}),t.syncOrAsync(ba)}};function $t(We,Fe){var _t=[],Mt,wt=function(Dt,Rt){var Bt=Dt.xbnd[Rt];Bt!==null&&_t.push(t.extendFlat({},Dt,{x:Bt}))};if(Fe.length){for(Mt=0;Mt<Fe.length;Mt++)wt(Fe[Mt],0);wt(Fe[Mt-1],1)}return _t}function rr(We,Fe){for(var _t=[],Mt={},wt=0;wt<Fe.length;wt++){var Dt=Fe[wt];Mt[Dt.text2]?Mt[Dt.text2].push(Dt.x):Mt[Dt.text2]=[Dt.x]}for(var Rt in Mt)_t.push(Ce(We,t.interp(Mt[Rt],.5),Rt));return _t}function Pt(We,Fe){var _t=[],Mt,wt,Dt=Fe.length&&Fe[Fe.length-1].x<Fe[0].x,Rt=function(Nt,er){var qt=Nt.xbnd[er];qt!==null&&_t.push(t.extendFlat({},Nt,{x:qt}))};if(We.showdividers&&Fe.length){for(Mt=0;Mt<Fe.length;Mt++){var Bt=Fe[Mt];Bt.text2!==wt&&Rt(Bt,Dt?1:0),wt=Bt.text2}Rt(Fe[Mt-1],Dt?0:1)}return _t}function Lt(We,Fe){var _t,Mt,wt,Dt;return We._selections[Fe].size()?(_t=1/0,Mt=-1/0,wt=1/0,Dt=-1/0,We._selections[Fe].each(function(){var Rt=Xe(this),Bt=h.bBox(Rt.node().parentNode);_t=Math.min(_t,Bt.top),Mt=Math.max(Mt,Bt.bottom),wt=Math.min(wt,Bt.left),Dt=Math.max(Dt,Bt.right)})):(_t=0,Mt=0,wt=0,Dt=0),{top:_t,bottom:Mt,left:wt,right:Dt,height:Mt-_t,width:Dt-wt}}j.getTickSigns=function(We){var Fe=We._id.charAt(0),_t={x:"top",y:"right"}[Fe],Mt=We.side===_t?1:-1,wt=[-1,1,Mt,-Mt];return We.ticks!=="inside"==(Fe==="x")&&(wt=wt.map(function(Dt){return-Dt})),We.side&&wt.push({l:-1,t:-1,r:1,b:1}[We.side.charAt(0)]),wt},j.makeTransTickFn=function(We){return We._id.charAt(0)==="x"?function(Fe){return f(We._offset+We.l2p(Fe.x),0)}:function(Fe){return f(0,We._offset+We.l2p(Fe.x))}},j.makeTransTickLabelFn=function(We){var Fe=lt(We),_t=Fe[0],Mt=Fe[1];return We._id.charAt(0)==="x"?function(wt){return f(_t+We._offset+We.l2p(dt(wt)),Mt)}:function(wt){return f(Mt,_t+We._offset+We.l2p(dt(wt)))}};function dt(We){return We.periodX!==void 0?We.periodX:We.x}function lt(We){var Fe=We.ticklabelposition||"",_t=function(Gr){return Fe.indexOf(Gr)!==-1},Mt=_t("top"),wt=_t("left"),Dt=_t("right"),Rt=_t("bottom"),Bt=_t("inside"),Nt=Rt||wt||Mt||Dt;if(!Nt&&!Bt)return[0,0];var er=We.side,qt=Nt?(We.tickwidth||0)/2:0,Zt=B,_r=We.tickfont?We.tickfont.size:12;return(Rt||Mt)&&(qt+=_r*U,Zt+=(We.linewidth||0)/2),(wt||Dt)&&(qt+=(We.linewidth||0)/2,Zt+=B),Bt&&er==="top"&&(Zt-=_r*(1-U)),(wt||Mt)&&(qt=-qt),(er==="bottom"||er==="right")&&(Zt=-Zt),[Nt?qt:0,Bt?Zt:0]}j.makeTickPath=function(We,Fe,_t,Mt){Mt=Mt!==void 0?Mt:We.ticklen;var wt=We._id.charAt(0),Dt=(We.linewidth||1)/2;return wt==="x"?"M0,"+(Fe+Dt*_t)+"v"+Mt*_t:"M"+(Fe+Dt*_t)+",0h"+Mt*_t},j.makeLabelFns=function(We,Fe,_t){var Mt=We.ticklabelposition||"",wt=function(Sn){return Mt.indexOf(Sn)!==-1},Dt=wt("top"),Rt=wt("left"),Bt=wt("right"),Nt=wt("bottom"),er=Nt||Rt||Dt||Bt,qt=wt("inside"),Zt=Mt==="inside"&&We.ticks==="inside"||!qt&&We.ticks==="outside"&&We.tickson!=="boundaries",_r=0,Gr=0,zr=Zt?We.ticklen:0;if(qt?zr*=-1:er&&(zr=0),Zt&&(_r+=zr,_t)){var Or=t.deg2rad(_t);_r=zr*Math.cos(Or)+1,Gr=zr*Math.sin(Or)}We.showticklabels&&(Zt||We.showline)&&(_r+=.2*We.tickfont.size),_r+=(We.linewidth||1)/2*(qt?-1:1);var Mn={labelStandoff:_r,labelShift:Gr},Yn,An,Bn,jn,Nr=0,Lr=We.side,Ln=We._id.charAt(0),dn=We.tickangle,xn;if(Ln==="x")xn=!qt&&Lr==="bottom"||qt&&Lr==="top",jn=xn?1:-1,qt&&(jn*=-1),Yn=Gr*jn,An=Fe+_r*jn,Bn=xn?1:-.2,Math.abs(dn)===90&&(qt?Bn+=G:dn===-90&&Lr==="bottom"?Bn=U:dn===90&&Lr==="top"?Bn=G:Bn=.5,Nr=G/2*(dn/90)),Mn.xFn=function(Sn){return Sn.dx+Yn+Nr*Sn.fontSize},Mn.yFn=function(Sn){return Sn.dy+An+Sn.fontSize*Bn},Mn.anchorFn=function(Sn,un){if(er){if(Rt)return"end";if(Bt)return"start"}return!n(un)||un===0||un===180?"middle":un*jn<0!==qt?"end":"start"},Mn.heightFn=function(Sn,un,vt){return un<-60||un>60?-.5*vt:We.side==="top"!==qt?-vt:0};else if(Ln==="y"){if(xn=!qt&&Lr==="left"||qt&&Lr==="right",jn=xn?1:-1,qt&&(jn*=-1),Yn=_r,An=Gr*jn,Bn=0,!qt&&Math.abs(dn)===90&&(dn===-90&&Lr==="left"||dn===90&&Lr==="right"?Bn=U:Bn=.5),qt){var tn=n(dn)?+dn:0;if(tn!==0){var wn=t.deg2rad(tn);Nr=Math.abs(Math.sin(wn))*U*jn,Bn=0}}Mn.xFn=function(Sn){return Sn.dx+Fe-(Yn+Sn.fontSize*Bn)*jn+Nr*Sn.fontSize},Mn.yFn=function(Sn){return Sn.dy+An+Sn.fontSize*G},Mn.anchorFn=function(Sn,un){return n(un)&&Math.abs(un)===90?"middle":xn?"end":"start"},Mn.heightFn=function(Sn,un,vt){return We.side==="right"&&(un*=-1),un<-30?-vt:un<30?-.5*vt:0}}return Mn};function Te(We){return[We.text,We.x,We.axInfo,We.font,We.fontSize,We.fontColor].join("_")}j.drawTicks=function(We,Fe,_t){_t=_t||{};var Mt=Fe._id+"tick",wt=_t.vals;Fe.ticklabelmode==="period"&&(wt=wt.slice(),wt.shift());var Dt=_t.layer.selectAll("path."+Mt).data(Fe.ticks?wt:[],Te);Dt.exit().remove(),Dt.enter().append("path").classed(Mt,1).classed("ticks",1).classed("crisp",_t.crisp!==!1).call(u.stroke,Fe.tickcolor).style("stroke-width",h.crispRound(We,Fe.tickwidth,1)+"px").attr("d",_t.path),Dt.attr("transform",_t.transFn)},j.drawGrid=function(We,Fe,_t){_t=_t||{};var Mt=Fe._id+"grid",wt=_t.vals,Dt=_t.counterAxis;if(Fe.showgrid===!1)wt=[];else if(Dt&&j.shouldShowZeroLine(We,Fe,Dt))for(var Rt=Fe.tickmode==="array",Bt=0;Bt<wt.length;Bt++){var Nt=wt[Bt].x;if(Rt?!Nt:Math.abs(Nt)<Fe.dtick/100)if(wt=wt.slice(0,Bt).concat(wt.slice(Bt+1)),Rt)Bt--;else break}var er=_t.layer.selectAll("path."+Mt).data(wt,Te);er.exit().remove(),er.enter().append("path").classed(Mt,1).classed("crisp",_t.crisp!==!1),Fe._gw=h.crispRound(We,Fe.gridwidth,1),er.attr("transform",_t.transFn).attr("d",_t.path).call(u.stroke,Fe.gridcolor||"#ddd").style("stroke-width",Fe._gw+"px"),typeof _t.path=="function"&&er.attr("d",_t.path)},j.drawZeroLine=function(We,Fe,_t){_t=_t||_t;var Mt=Fe._id+"zl",wt=j.shouldShowZeroLine(We,Fe,_t.counterAxis),Dt=_t.layer.selectAll("path."+Mt).data(wt?[{x:0,id:Fe._id}]:[]);Dt.exit().remove(),Dt.enter().append("path").classed(Mt,1).classed("zl",1).classed("crisp",_t.crisp!==!1).each(function(){_t.layer.selectAll("path").sort(function(Rt,Bt){return te(Rt.id,Bt.id)})}),Dt.attr("transform",_t.transFn).attr("d",_t.path).call(u.stroke,Fe.zerolinecolor||u.defaultLine).style("stroke-width",h.crispRound(We,Fe.zerolinewidth,Fe._gw||1)+"px")},j.drawLabels=function(We,Fe,_t){_t=_t||{};var Mt=We._fullLayout,wt=Fe._id,Dt=wt.charAt(0),Rt=_t.cls||wt+"tick",Bt=_t.vals,Nt=_t.labelFns,er=_t.secondary?0:Fe.tickangle,qt=(Fe._prevTickAngles||{})[Rt],Zt=_t.layer.selectAll("g."+Rt).data(Fe.showticklabels?Bt:[],Te),_r=[];Zt.enter().append("g").classed(Rt,1).append("text").attr("text-anchor","middle").each(function(jn){var Nr=r.select(this),Lr=We._promises.length;Nr.call(a.positionText,Nt.xFn(jn),Nt.yFn(jn)).call(h.font,jn.font,jn.fontSize,jn.fontColor).text(jn.text).call(a.convertToTspans,We),We._promises[Lr]?_r.push(We._promises.pop().then(function(){Gr(Nr,er)})):Gr(Nr,er)}),Zt.exit().remove(),_t.repositionOnUpdate&&Zt.each(function(jn){r.select(this).select("text").call(a.positionText,Nt.xFn(jn),Nt.yFn(jn))});function Gr(jn,Nr){var Lr=(Fe.ticklabelposition||"").indexOf("inside")!==-1;jn.each(function(Ln){var dn=r.select(this),xn=dn.select(".text-math-group"),tn=Nt.anchorFn(Ln,Nr),wn=_t.transFn.call(dn.node(),Ln)+(n(Nr)&&+Nr!=0?" rotate("+Nr+","+Nt.xFn(Ln)+","+(Nt.yFn(Ln)-Ln.fontSize/2)+")":""),Sn=a.lineCount(dn),un=X*Ln.fontSize,vt=Nt.heightFn(Ln,n(Nr)?+Nr:0,(Sn-1)*un);if(vt&&(wn+=f(0,vt)),xn.empty()){var Gt=dn.select("text");Gt.attr({transform:wn,"text-anchor":tn}),Lr&&(Gt.style({opacity:100}),Fe._hideOutOfRangeInsideTickLabels&&Fe._hideOutOfRangeInsideTickLabels())}else{var cr=h.bBox(xn.node()).width,Er=cr*{end:-.5,start:.5}[tn];xn.attr("transform",wn+f(Er,0))}})}Fe._hideOutOfRangeInsideTickLabels=void 0,(Fe.ticklabelposition||"").indexOf("inside")!==-1&&(Fe._hideOutOfRangeInsideTickLabels=function(){var jn=t.simpleMap(Fe.range,Fe.r2l),Nr=Fe.l2p(jn[0]),Lr=Fe.l2p(jn[1]),Ln=Math.min(Nr,Lr)+Fe._offset,dn=Math.max(Nr,Lr)+Fe._offset,xn=Fe._id.charAt(0)==="x";Zt.each(function(tn){var wn=r.select(this),Sn=wn.select(".text-math-group");if(Sn.empty()){var un=h.bBox(wn.node()),vt=!1;xn?(un.right>dn||un.left<Ln)&&(vt=!0):(un.bottom>dn||un.top+(Fe.tickangle?0:tn.fontSize/4)<Ln)&&(vt=!0),vt&&wn.select("text").style({opacity:0})}})}),Gr(Zt,qt+1?qt:er);function zr(){return _r.length&&Promise.all(_r)}var Or=null;function Mn(){if(Gr(Zt,er),Bt.length&&Dt==="x"&&!n(er)&&(Fe.type!=="log"||String(Fe.dtick).charAt(0)!=="D")){Or=0;var jn=0,Nr=[],Lr;if(Zt.each(function(Hr){jn=Math.max(jn,Hr.fontSize);var Cn=Fe.l2p(Hr.x),ra=Xe(this),ta=h.bBox(ra.node());Nr.push({top:0,bottom:10,height:10,left:Cn-ta.width/2,right:Cn+ta.width/2+2,width:ta.width+2})}),(Fe.tickson==="boundaries"||Fe.showdividers)&&!_t.secondary){var Ln=2;for(Fe.ticks&&(Ln+=Fe.tickwidth/2),Lr=0;Lr<Nr.length;Lr++){var dn=Bt[Lr].xbnd,xn=Nr[Lr];if(dn[0]!==null&&xn.left-Fe.l2p(dn[0])<Ln||dn[1]!==null&&Fe.l2p(dn[1])-xn.right<Ln){Or=90;break}}}else{var tn=Bt.length,wn=Math.abs((Bt[tn-1].x-Bt[0].x)*Fe._m)/(tn-1),Sn=Fe.ticklabelposition||"",un=function(Hr){return Sn.indexOf(Hr)!==-1},vt=un("top"),Gt=un("left"),cr=un("right"),Er=un("bottom"),Wr=Er||Gt||vt||cr,Vr=Wr?(Fe.tickwidth||0)+2*B:0,Qr=wn<jn*2.5||Fe.type==="multicategory";for(Lr=0;Lr<Nr.length-1;Lr++)if(t.bBoxIntersect(Nr[Lr],Nr[Lr+1],Vr)){Or=Qr?90:30;break}}Or&&Gr(Zt,Or)}}Fe._selections&&(Fe._selections[Rt]=Zt);var Yn=[zr];Fe.automargin&&Mt._redrawFromAutoMarginCount&&qt===90?(Or=90,Yn.push(function(){Gr(Zt,qt)})):Yn.push(Mn),Fe._tickAngles&&Yn.push(function(){Fe._tickAngles[Rt]=Or===null?n(er)?er:0:Or});var An=Fe._anchorAxis;An&&An.autorange&&(Fe.ticklabelposition||"").indexOf("inside")!==-1&&!J(Mt,Fe._id)&&(Mt._insideTickLabelsAutorange||(Mt._insideTickLabelsAutorange={}),Mt._insideTickLabelsAutorange[An._name+".autorange"]=An.autorange,Yn.push(function(){Zt.each(function(Nr,Lr){var Ln=Xe(this);Fe._vals[Lr].bb=h.bBox(Ln.node())})}));var Bn=t.syncOrAsync(Yn);return Bn&&Bn.then&&We._promises.push(Bn),Bn};function Le(We,Fe,_t){var Mt=Fe._id+"divider",wt=_t.vals,Dt=_t.layer.selectAll("path."+Mt).data(wt,Te);Dt.exit().remove(),Dt.enter().insert("path",":first-child").classed(Mt,1).classed("crisp",1).call(u.stroke,Fe.dividercolor).style("stroke-width",h.crispRound(We,Fe.dividerwidth,1)+"px"),Dt.attr("transform",_t.transFn).attr("d",_t.path)}j.getPxPosition=function(We,Fe){var _t=We._fullLayout._size,Mt=Fe._id.charAt(0),wt=Fe.side,Dt;if(Fe.anchor!=="free"?Dt=Fe._anchorAxis:Mt==="x"?Dt={_offset:_t.t+(1-(Fe.position||0))*_t.h,_length:0}:Mt==="y"&&(Dt={_offset:_t.l+(Fe.position||0)*_t.w,_length:0}),wt==="top"||wt==="left")return Dt._offset;if(wt==="bottom"||wt==="right")return Dt._offset+Dt._length};function Be(We){var Fe=We.title.font.size,_t=(We.title.text.match(a.BR_TAG_ALL)||[]).length;return We.title.hasOwnProperty("standoff")?_t?Fe*(U+_t*X):Fe*U:_t?Fe*(_t+1)*X:Fe}function et(We,Fe){var _t=We._fullLayout,Mt=Fe._id,wt=Mt.charAt(0),Dt=Fe.title.font.size,Rt;if(Fe.title.hasOwnProperty("standoff"))Rt=Fe._depth+Fe.title.standoff+Be(Fe);else{var Bt=(Fe.ticklabelposition||"").indexOf("inside")!==-1;if(Fe.type==="multicategory")Rt=Fe._depth;else{var Nt=1.5*Dt;Bt&&(Nt=.5*Dt,Fe.ticks==="outside"&&(Nt+=Fe.ticklen)),Rt=10+Nt+(Fe.linewidth?Fe.linewidth-1:0)}Bt||(wt==="x"?Rt+=Fe.side==="top"?Dt*(Fe.showticklabels?1:0):Dt*(Fe.showticklabels?1.5:.5):Rt+=Fe.side==="right"?Dt*(Fe.showticklabels?1:.5):Dt*(Fe.showticklabels?.5:0))}var er=j.getPxPosition(We,Fe),qt,Zt,_r;wt==="x"?(Zt=Fe._offset+Fe._length/2,_r=Fe.side==="top"?er-Rt:er+Rt):(_r=Fe._offset+Fe._length/2,Zt=Fe.side==="right"?er+Rt:er-Rt,qt={rotate:"-90",offset:0});var Gr;if(Fe.type!=="multicategory"){var zr=Fe._selections[Fe._id+"tick"];if(Gr={selection:zr,side:Fe.side},zr&&zr.node()&&zr.node().parentNode){var Or=h.getTranslate(zr.node().parentNode);Gr.offsetLeft=Or.x,Gr.offsetTop=Or.y}Fe.title.hasOwnProperty("standoff")&&(Gr.pad=0)}return o.draw(We,Mt+"title",{propContainer:Fe,propName:Fe._name+".title.text",placeholder:_t._dfltTitle[wt],avoid:Gr,transform:qt,attributes:{x:Zt,y:_r,"text-anchor":"middle"}})}j.shouldShowZeroLine=function(We,Fe,_t){var Mt=t.simpleMap(Fe.range,Fe.r2l);return Mt[0]*Mt[1]<=0&&Fe.zeroline&&(Fe.type==="linear"||Fe.type==="-")&&!(Fe.rangebreaks&&Fe.maskBreaks(0)===F)&&(Me(Fe,0)||!Ie(We,Fe,_t,Mt)||He(We,Fe))},j.clipEnds=function(We,Fe){return Fe.filter(function(_t){return Me(We,_t.x)})};function Me(We,Fe){var _t=We.l2p(Fe);return _t>1&&_t<We._length-1}function Ie(We,Fe,_t,Mt){var wt=_t._mainAxis;if(!wt)return;var Dt=We._fullLayout,Rt=Fe._id.charAt(0),Bt=j.counterLetter(Fe._id),Nt=Fe._offset+(Math.abs(Mt[0])<Math.abs(Mt[1])==(Rt==="x")?0:Fe._length);function er(zr){if(!zr.showline||!zr.linewidth)return!1;var Or=Math.max((zr.linewidth+Fe.zerolinewidth)/2,1);function Mn(Bn){return typeof Bn=="number"&&Math.abs(Bn-Nt)<Or}if(Mn(zr._mainLinePosition)||Mn(zr._mainMirrorPosition))return!0;var Yn=zr._linepositions||{};for(var An in Yn)if(Mn(Yn[An][0])||Mn(Yn[An][1]))return!0}var qt=Dt._plots[_t._mainSubplot];if(!(qt.mainplotinfo||qt).overlays.length)return er(_t);for(var Zt=j.list(We,Bt),_r=0;_r<Zt.length;_r++){var Gr=Zt[_r];if(Gr._mainAxis===wt&&er(Gr))return!0}}function He(We,Fe){for(var _t=We._fullData,Mt=Fe._mainSubplot,wt=Fe._id.charAt(0),Dt=0;Dt<_t.length;Dt++){var Rt=_t[Dt];if(Rt.visible===!0&&Rt.xaxis+Rt.yaxis===Mt&&(c.traceIs(Rt,"bar-like")&&Rt.orientation==={x:"h",y:"v"}[wt]||Rt.fill&&Rt.fill.charAt(Rt.fill.length-1)===wt))return!0}return!1}function Xe(We){var Fe=r.select(We),_t=Fe.select(".text-math-group");return _t.empty()?Fe.select("text"):_t}j.allowAutoMargin=function(We){for(var Fe=j.list(We,"",!0),_t=0;_t<Fe.length;_t++){var Mt=Fe[_t];Mt.automargin&&(l.allowAutoMargin(We,ht(Mt)),Mt.mirror&&l.allowAutoMargin(We,it(Mt))),c.getComponentMethod("rangeslider","isVisible")(Mt)&&l.allowAutoMargin(We,Ge(Mt))}};function ht(We){return We._id+".automargin"}function it(We){return ht(We)+".mirror"}function Ge(We){return We._id+".rangeslider"}j.swap=function(We,Fe){for(var _t=ot(We,Fe),Mt=0;Mt<_t.length;Mt++)st(We,_t[Mt].x,_t[Mt].y)};function ot(We,Fe){var _t=[],Mt,wt;for(Mt=0;Mt<Fe.length;Mt++){var Dt=[],Rt=We._fullData[Fe[Mt]].xaxis,Bt=We._fullData[Fe[Mt]].yaxis;if(!(!Rt||!Bt)){for(wt=0;wt<_t.length;wt++)(_t[wt].x.indexOf(Rt)!==-1||_t[wt].y.indexOf(Bt)!==-1)&&Dt.push(wt);if(!Dt.length){_t.push({x:[Rt],y:[Bt]});continue}var Nt=_t[Dt[0]],er;if(Dt.length>1)for(wt=1;wt<Dt.length;wt++)er=_t[Dt[wt]],Je(Nt.x,er.x),Je(Nt.y,er.y);Je(Nt.x,[Rt]),Je(Nt.y,[Bt])}}return _t}function Je(We,Fe){for(var _t=0;_t<Fe.length;_t++)We.indexOf(Fe[_t])===-1&&We.push(Fe[_t])}function st(We,Fe,_t){var Mt=[],wt=[],Dt=We.layout,Rt,Bt;for(Rt=0;Rt<Fe.length;Rt++)Mt.push(j.getFromId(We,Fe[Rt]));for(Rt=0;Rt<_t.length;Rt++)wt.push(j.getFromId(We,_t[Rt]));var Nt=Object.keys(i),er=["anchor","domain","overlaying","position","side","tickangle","editType"],qt=["linear","log"];for(Rt=0;Rt<Nt.length;Rt++){var Zt=Nt[Rt],_r=Mt[0][Zt],Gr=wt[0][Zt],zr=!0,Or=!1,Mn=!1;if(!(Zt.charAt(0)==="_"||typeof _r=="function"||er.indexOf(Zt)!==-1)){for(Bt=1;Bt<Mt.length&&zr;Bt++){var Yn=Mt[Bt][Zt];Zt==="type"&&qt.indexOf(_r)!==-1&&qt.indexOf(Yn)!==-1&&_r!==Yn?Or=!0:Yn!==_r&&(zr=!1)}for(Bt=1;Bt<wt.length&&zr;Bt++){var An=wt[Bt][Zt];Zt==="type"&&qt.indexOf(Gr)!==-1&&qt.indexOf(An)!==-1&&Gr!==An?Mn=!0:wt[Bt][Zt]!==Gr&&(zr=!1)}zr&&(Or&&(Dt[Mt[0]._name].type="linear"),Mn&&(Dt[wt[0]._name].type="linear"),It(Dt,Zt,Mt,wt,We._fullLayout._dfltTitle))}}for(Rt=0;Rt<We._fullLayout.annotations.length;Rt++){var Bn=We._fullLayout.annotations[Rt];Fe.indexOf(Bn.xref)!==-1&&_t.indexOf(Bn.yref)!==-1&&t.swapAttrs(Dt.annotations[Rt],["?"])}}function It(We,Fe,_t,Mt,wt){var Dt=t.nestedProperty,Rt=Dt(We[_t[0]._name],Fe).get(),Bt=Dt(We[Mt[0]._name],Fe).get(),Nt;for(Fe==="title"&&(Rt&&Rt.text===wt.x&&(Rt.text=wt.y),Bt&&Bt.text===wt.y&&(Bt.text=wt.x)),Nt=0;Nt<_t.length;Nt++)Dt(We,_t[Nt]._name+"."+Fe).set(Bt);for(Nt=0;Nt<Mt.length;Nt++)Dt(We,Mt[Nt]._name+"."+Fe).set(Rt)}function Ft(We){return We._id==="angularaxis"}function nr(We,Fe){for(var _t=Fe._rangebreaks.length,Mt=0;Mt<_t;Mt++){var wt=Fe._rangebreaks[Mt];if(We>=wt.min&&We<wt.max)return wt.max}return We}},{"../../components/color":643,"../../components/drawing":665,"../../components/titles":738,"../../constants/alignment":745,"../../constants/numerical":753,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../../registry":911,"./autorange":827,"./axis_autotype":829,"./axis_ids":831,"./clean_ticks":833,"./layout_attributes":842,"./set_convert":848,d3:169,"fast-isnumeric":241}],829:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib"),l=e("../../constants/numerical").BADNUM,c=n.isArrayOrTypedArray,t=n.isDateTime,f=n.cleanNumber,a=Math.round;v.exports=function(y,b,m){var _=y,T=m.noMultiCategory;if(c(_)&&!_.length)return"-";if(!T&&p(_))return"multicategory";if(T&&Array.isArray(_[0])){for(var g=[],A=0;A<_.length;A++)if(c(_[A]))for(var k=0;k<_[A].length;k++)g.push(_[A][k]);_=g}if(h(_,b))return"date";var R=m.autotypenumbers!=="strict";return s(_,R)?"category":u(_,R)?"linear":"-"};function o(d,y){return y?r(d):typeof d=="number"}function u(d,y){for(var b=d.length,m=0;m<b;m++)if(o(d[m],y))return!0;return!1}function h(d,y){for(var b=d.length,m=i(b),_=0,T=0,g={},A=0;A<b;A+=m){var k=a(A),R=d[k],L=String(R);g[L]||(g[L]=1,t(R,y)&&_++,r(R)&&T++)}return _>T*2}function i(d){return Math.max(1,(d-1)/1e3)}function s(d,y){for(var b=d.length,m=i(b),_=0,T=0,g={},A=0;A<b;A+=m){var k=a(A),R=d[k],L=String(R);if(!g[L]){g[L]=1;var z=typeof R;z==="boolean"?T++:(y?f(R)!==l:z==="number")?_++:z==="string"&&T++}}return T>_*2}function p(d){return c(d[0])&&c(d[1])}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],830:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../registry"),l=e("../../lib"),c=e("../array_container_defaults"),t=e("./layout_attributes"),f=e("./tick_value_defaults"),a=e("./tick_mark_defaults"),o=e("./tick_label_defaults"),u=e("./category_order_defaults"),h=e("./line_grid_defaults"),i=e("./set_convert"),s=e("./constants").WEEKDAY_PATTERN,p=e("./constants").HOUR_PATTERN;v.exports=function(_,T,g,A,k){var R=A.letter,L=A.font||{},z=A.splomStash||{},E=g("visible",!A.visibleDflt),S=T._template||{},C=T.type||S.type||"-",D;if(C==="date"){var F=n.getComponentMethod("calendars","handleDefaults");F(_,T,"calendar",A.calendar),A.noTicklabelmode||(D=g("ticklabelmode"))}(!A.noTicklabelposition||C==="multicategory")&&l.coerce(_,T,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:D==="period"?["outside","inside"]:R==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition"),i(T,k);var N=!T.isValidRange(_.range);N&&A.reverseDflt&&(N="reversed");var G=g("autorange",N);G&&(C==="linear"||C==="-")&&g("rangemode"),g("range"),T.cleanRange(),u(_,T,g,A),C!=="category"&&!A.noHover&&g("hoverformat");var U=g("color"),X=U!==t.color.dflt?U:L.color,I=z.label||k._dfltTitle[R];if(o(_,T,g,C,A,{pass:1}),!E)return T;g("title.text",I),l.coerceFont(g,"title.font",{family:L.family,size:Math.round(L.size*1.2),color:X}),f(_,T,g,C),o(_,T,g,C,A,{pass:2}),a(_,T,g,A),h(_,T,g,{dfltColor:U,bgColor:A.bgColor,showGrid:A.showGrid,attributes:t}),(T.showline||T.ticks)&&g("mirror"),A.automargin&&g("automargin");var B=C==="multicategory";if(!A.noTickson&&(C==="category"||B)&&(T.ticks||T.showgrid)){var j;B&&(j="boundaries");var H=g("tickson",j);H==="boundaries"&&delete T.ticklabelposition}if(B){var K=g("showdividers");K&&(g("dividercolor"),g("dividerwidth"))}if(C==="date")if(c(_,T,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:d}),!T.rangebreaks.length)delete T.rangebreaks;else{for(var te=0;te<T.rangebreaks.length;te++)if(T.rangebreaks[te].pattern===s){T._hasDayOfWeekBreaks=!0;break}if(i(T,k),k._has("scattergl")||k._has("splom"))for(var J=0;J<A.data.length;J++){var oe=A.data[J];(oe.type==="scattergl"||oe.type==="splom")&&(oe.visible=!1,l.warn(oe.type+" traces do not work on axes with rangebreaks. Setting trace "+oe.index+" to `visible: false`."))}}return T};function d(m,_,T){function g(D,F){return l.coerce(m,_,t.rangebreaks,D,F)}var A=g("enabled");if(A){var k=g("bounds");if(k&&k.length>=2){var R="",L,z;if(k.length===2){for(L=0;L<2;L++)if(z=b(k[L]),z){R=s;break}}var E=g("pattern",R);if(E===s)for(L=0;L<2;L++)z=b(k[L]),z&&(_.bounds[L]=k[L]=z-1);if(E)for(L=0;L<2;L++)switch(z=k[L],E){case s:if(!r(z)){_.enabled=!1;return}if(z=+z,z!==Math.floor(z)||z<0||z>=7){_.enabled=!1;return}_.bounds[L]=k[L]=z;break;case p:if(!r(z)){_.enabled=!1;return}if(z=+z,z<0||z>24){_.enabled=!1;return}_.bounds[L]=k[L]=z;break}if(T.autorange===!1){var S=T.range;if(S[0]<S[1]){if(k[0]<S[0]&&k[1]>S[1]){_.enabled=!1;return}}else if(k[0]>S[0]&&k[1]<S[1]){_.enabled=!1;return}}}else{var C=g("values");if(C&&C.length)g("dvalue");else{_.enabled=!1;return}}}}var y={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function b(m){if(typeof m=="string")return y[m.substr(0,3).toLowerCase()]}},{"../../lib":778,"../../registry":911,"../array_container_defaults":823,"./category_order_defaults":832,"./constants":834,"./layout_attributes":842,"./line_grid_defaults":844,"./set_convert":848,"./tick_label_defaults":849,"./tick_mark_defaults":850,"./tick_value_defaults":851,"fast-isnumeric":241}],831:[function(e,v,M){var r=e("../../registry"),n=e("./constants");M.id2name=function(t){if(!(typeof t!="string"||!t.match(n.AX_ID_PATTERN))){var f=t.split(" ")[0].substr(1);return f==="1"&&(f=""),t.charAt(0)+"axis"+f}},M.name2id=function(t){if(t.match(n.AX_NAME_PATTERN)){var f=t.substr(5);return f==="1"&&(f=""),t.charAt(0)+f}},M.cleanId=function(t,f,a){var o=/( domain)$/.test(t);if(!(typeof t!="string"||!t.match(n.AX_ID_PATTERN))&&!(f&&t.charAt(0)!==f)&&!(o&&!a)){var u=t.split(" ")[0].substr(1).replace(/^0+/,"");return u==="1"&&(u=""),t.charAt(0)+u+(o&&a?" domain":"")}},M.list=function(c,t,f){var a=c._fullLayout;if(!a)return[];var o=M.listIds(c,t),u=new Array(o.length),h;for(h=0;h<o.length;h++){var i=o[h];u[h]=a[i.charAt(0)+"axis"+i.substr(1)]}if(!f){var s=a._subplots.gl3d||[];for(h=0;h<s.length;h++){var p=a[s[h]];t?u.push(p[t+"axis"]):u.push(p.xaxis,p.yaxis,p.zaxis)}}return u},M.listIds=function(c,t){var f=c._fullLayout;if(!f)return[];var a=f._subplots;return t?a[t+"axis"]:a.xaxis.concat(a.yaxis)},M.getFromId=function(c,t,f){var a=c._fullLayout;return t=t===void 0||typeof t!="string"?t:t.replace(" domain",""),f==="x"?t=t.replace(/y[0-9]*/,""):f==="y"&&(t=t.replace(/x[0-9]*/,"")),a[M.id2name(t)]},M.getFromTrace=function(c,t,f){var a=c._fullLayout,o=null;if(r.traceIs(t,"gl3d")){var u=t.scene;u.substr(0,5)==="scene"&&(o=a[u][f+"axis"])}else o=M.getFromId(c,t[f+"axis"]||f);return o},M.idSort=function(c,t){var f=c.charAt(0),a=t.charAt(0);return f!==a?f>a?1:-1:+(c.substr(1)||1)-+(t.substr(1)||1)},M.ref2id=function(c){return/^[xyz]/.test(c)?c.split(" ")[0]:!1};function l(c,t){if(t&&t.length){for(var f=0;f<t.length;f++)if(t[f][c])return!0}return!1}M.isLinked=function(c,t){return l(t,c._axisMatchGroups)||l(t,c._axisConstraintGroups)}},{"../../registry":911,"./constants":834}],832:[function(e,v,M){function r(n,l){var c=l.dataAttr||n._id.charAt(0),t={},f,a,o;if(l.axData)f=l.axData;else for(f=[],a=0;a<l.data.length;a++){var u=l.data[a];u[c+"axis"]===n._id&&f.push(u)}for(a=0;a<f.length;a++){var h=f[a][c];for(o=0;o<h.length;o++){var i=h[o];i!=null&&(t[i]=1)}}return Object.keys(t)}v.exports=function(l,c,t,f){if(c.type==="category"){var a=l.categoryarray,o=Array.isArray(a)&&a.length>0,u;o&&(u="array");var h=t("categoryorder",u),i;h==="array"&&(i=t("categoryarray")),!o&&h==="array"&&(h=c.categoryorder="trace"),h==="trace"?c._initialCategories=[]:h==="array"?c._initialCategories=i.slice():(i=r(c,f).sort(),h==="category ascending"?c._initialCategories=i:h==="category descending"&&(c._initialCategories=i.reverse()))}}},{}],833:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib"),l=e("../../constants/numerical"),c=l.ONEDAY,t=l.ONEWEEK;M.dtick=function(f,a){var o=a==="log",u=a==="date",h=a==="category",i=u?c:1;if(!f)return i;if(r(f))return f=Number(f),f<=0?i:h?Math.max(1,Math.round(f)):u?Math.max(.1,f):f;if(typeof f!="string"||!(u||o))return i;var s=f.charAt(0),p=f.substr(1);return p=r(p)?Number(p):0,p<=0||!(u&&s==="M"&&p===Math.round(p)||o&&s==="L"||o&&s==="D"&&(p===1||p===2))?i:f},M.tick0=function(f,a,o,u){if(a==="date")return n.cleanDate(f,n.dateTick0(o,u%t===0?1:0));if(!(u==="D1"||u==="D2"))return r(f)?Number(f):0}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],834:[function(e,v,M){var r=e("../../lib/regex").counter;v.exports={idRegex:{x:r("x","( domain)?"),y:r("y","( domain)?")},attrRegex:r("[xy]axis"),xAxisMatch:r("xaxis"),yAxisMatch:r("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":795}],835:[function(e,v,M){var r=e("../../lib"),n=e("./autorange"),l=e("./axis_ids").id2name,c=e("./layout_attributes"),t=e("./scale_zoom"),f=e("./set_convert"),a=e("../../constants/numerical").ALMOST_EQUAL,o=e("../../constants/alignment").FROM_BL;M.handleDefaults=function(b,m,_){var T=_.axIds,g=_.axHasImage,A=m._axisConstraintGroups=[],k=m._axisMatchGroups=[],R,L,z,E,S,C,D,F;for(R=0;R<T.length;R++)E=l(T[R]),S=b[E],C=m[E],u(S,C,{axIds:T,layoutOut:m,hasImage:g[E]});function N(te,J){for(R=0;R<te.length;R++){L=te[R];for(z in L)m[l(z)][J]=L}}for(N(k,"_matchGroup"),R=0;R<A.length;R++){L=A[R];for(z in L)if(C=m[l(z)],C.fixedrange){for(var G in L){var U=l(G);(b[U]||{}).fixedrange===!1&&r.warn("fixedrange was specified as false for axis "+U+" but was overridden because another axis in its constraint group has fixedrange true"),m[U].fixedrange=!0}break}}for(R=0;R<A.length;){L=A[R];for(z in L){C=m[l(z)],C._matchGroup&&Object.keys(C._matchGroup).length===Object.keys(L).length&&(A.splice(R,1),R--);break}R++}N(A,"_constraintGroup");var X=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],I=!1,B=!1;function j(){F=C[D],D==="rangebreaks"&&(B=C._hasDayOfWeekBreaks)}for(R=0;R<k.length;R++){L=k[R];for(var H=0;H<X.length;H++){D=X[H],F=null;var K;for(z in L)if(E=l(z),S=b[E],C=m[E],D in C){if(!C.matches&&(K=C,D in S)){j();break}F===null&&D in S&&j()}if(D==="range"&&F&&(I=!0),D==="autorange"&&F===null&&I&&(F=!1),F===null&&D in K&&(F=K[D]),F!==null)for(z in L)C=m[l(z)],C[D]=D==="range"?F.slice():F,D==="rangebreaks"&&(C._hasDayOfWeekBreaks=B,f(C,m))}}};function u(b,m,_){var T=_.axIds,g=_.layoutOut,A=_.hasImage,k=g._axisConstraintGroups,R=g._axisMatchGroups,L=m._id,z=L.charAt(0),E=((g._splomAxes||{})[z]||{})[L]||{},S=m._id,C=S.charAt(0)==="x";m._matchGroup=null,m._constraintGroup=null;function D(Q,V){return r.coerce(b,m,c,Q,V)}D("constrain",A?"domain":"range"),r.coerce(b,m,{constraintoward:{valType:"enumerated",values:C?["left","center","right"]:["bottom","middle","top"],dflt:C?"center":"middle"}},"constraintoward");var F=m.type,N,G,U=[];for(N=0;N<T.length;N++)if(G=T[N],G!==S){var X=g[l(G)];X.type===F&&U.push(G)}var I=i(k,S);if(I){var B=[];for(N=0;N<U.length;N++)G=U[N],I[G]||B.push(G);U=B}var j=U.length,H,K;j&&(b.matches||E.matches)&&(H=r.coerce(b,m,{matches:{valType:"enumerated",values:U,dflt:U.indexOf(E.matches)!==-1?E.matches:void 0}},"matches"));var te=A&&!C?m.anchor:void 0;if(j&&!H&&(b.scaleanchor||te)&&(K=r.coerce(b,m,{scaleanchor:{valType:"enumerated",values:U}},"scaleanchor",te)),H){m._matchGroup=s(R,S,H,1);var J=g[l(H)],oe=h(g,m)/h(g,J);C!==(H.charAt(0)==="x")&&(oe=(C?"x":"y")+oe),s(k,S,H,oe)}else b.matches&&T.indexOf(b.matches)!==-1&&r.warn("ignored "+m._name+'.matches: "'+b.matches+'" to avoid an infinite loop');if(K){var ie=D("scaleratio");ie||(ie=m.scaleratio=1),s(k,S,K,ie)}else b.scaleanchor&&T.indexOf(b.scaleanchor)!==-1&&r.warn("ignored "+m._name+'.scaleanchor: "'+b.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function h(b,m){var _=m.domain;return _||(_=b[l(m.overlaying)].domain),_[1]-_[0]}function i(b,m){for(var _=0;_<b.length;_++)if(b[_][m])return b[_];return null}function s(b,m,_,T){var g,A,k,R,L,z=i(b,m);z===null?(z={},z[m]=1,L=b.length,b.push(z)):L=b.indexOf(z);var E=Object.keys(z);for(g=0;g<b.length;g++)if(k=b[g],g!==L&&k[_]){var S=k[_];for(A=0;A<E.length;A++)R=E[A],k[R]=p(S,p(T,z[R]));b.splice(L,1);return}if(T!==1)for(A=0;A<E.length;A++){var C=E[A];z[C]=p(T,z[C])}z[_]=1}function p(b,m){var _="",T="",g,A;typeof b=="string"&&(_=b.match(/^[xy]*/)[0],g=_.length,b=+b.substr(g)),typeof m=="string"&&(T=m.match(/^[xy]*/)[0],A=T.length,m=+m.substr(A));var k=b*m;return!g&&!A?k:!g||!A||_.charAt(0)===T.charAt(0)?_+T+b*m:g===A?k:(g>A?_.substr(A):T.substr(g))+k}function d(b,m){for(var _=m._size,T=_.h/_.w,g={},A=Object.keys(b),k=0;k<A.length;k++){var R=A[k],L=b[R];if(typeof L=="string"){var z=L.match(/^[xy]*/)[0],E=z.length;L=+L.substr(E);for(var S=z.charAt(0)==="y"?T:1/T,C=0;C<E;C++)L*=S}g[R]=L}return g}M.enforce=function(m){var _=m._fullLayout,T=_._axisConstraintGroups||[],g,A,k,R,L,z,E,S;for(g=0;g<T.length;g++){k=d(T[g],_);var C=Object.keys(k),D=1/0,F=0,N=1/0,G={},U={},X=!1;for(A=0;A<C.length;A++)R=C[A],U[R]=L=_[l(R)],L._inputDomain?L.domain=L._inputDomain.slice():L._inputDomain=L.domain.slice(),L._inputRange||(L._inputRange=L.range.slice()),L.setScale(),G[R]=z=Math.abs(L._m)/k[R],D=Math.min(D,z),(L.constrain==="domain"||!L._constraintShrinkable)&&(N=Math.min(N,z)),delete L._constraintShrinkable,F=Math.max(F,z),L.constrain==="domain"&&(X=!0);if(!(D>a*F&&!X)){for(A=0;A<C.length;A++)if(R=C[A],z=G[R],L=U[R],E=L.constrain,z!==N||E==="domain")if(S=z/N,E==="range")t(L,S);else{var I=L._inputDomain,B=(L.domain[1]-L.domain[0])/(I[1]-I[0]),j=(L.r2l(L.range[1])-L.r2l(L.range[0]))/(L.r2l(L._inputRange[1])-L.r2l(L._inputRange[0]));if(S/=B,S*j<1){L.domain=L._input.domain=I.slice(),t(L,S);continue}if(j<1&&(L.range=L._input.range=L._inputRange.slice(),S*=j),L.autorange){var H=L.r2l(L.range[0]),K=L.r2l(L.range[1]),te=(H+K)/2,J=te,oe=te,ie=Math.abs(K-te),Q=te-ie*S*1.0001,V=te+ie*S*1.0001,se=n.makePadFn(_,L,0),re=n.makePadFn(_,L,1);y(L,S);var ee=Math.abs(L._m),ae=n.concatExtremes(m,L),fe=ae.min,de=ae.max,pe,W;for(W=0;W<fe.length;W++)pe=fe[W].val-se(fe[W])/ee,pe>Q&&pe<J&&(J=pe);for(W=0;W<de.length;W++)pe=de[W].val+re(de[W])/ee,pe<V&&pe>oe&&(oe=pe);var ue=(oe-J)/(2*ie);S/=ue,J=L.l2r(J),oe=L.l2r(oe),L.range=L._input.range=H<K?[J,oe]:[oe,J]}y(L,S)}}}},M.getAxisGroup=function(m,_){for(var T=m._axisMatchGroups,g=0;g<T.length;g++){var A=T[g];if(A[_])return"g"+g}return _},M.clean=function(m,_){if(_._inputDomain){for(var T=!1,g=_._id,A=m._fullLayout._axisConstraintGroups,k=0;k<A.length;k++)if(A[k][g]){T=!0;break}(!T||_.constrain!=="domain")&&(_._input.domain=_.domain=_._inputDomain,delete _._inputDomain)}};function y(b,m){var _=b._inputDomain,T=o[b.constraintoward],g=_[0]+(_[1]-_[0])*T;b.domain=b._input.domain=[g+(_[0]-g)/m,g+(_[1]-g)/m],b.setScale()}},{"../../constants/alignment":745,"../../constants/numerical":753,"../../lib":778,"./autorange":827,"./axis_ids":831,"./layout_attributes":842,"./scale_zoom":846,"./set_convert":848}],836:[function(e,v,M){var r=e("d3"),n=e("tinycolor2"),l=e("has-passive-events"),c=e("../../registry"),t=e("../../lib"),f=t.strTranslate,a=e("../../lib/svg_text_utils"),o=e("../../components/color"),u=e("../../components/drawing"),h=e("../../components/fx"),i=e("./axes"),s=e("../../lib/setcursor"),p=e("../../components/dragelement"),d=e("../../components/dragelement/helpers"),y=d.selectingOrDrawing,b=d.freeMode,m=e("../../constants/alignment").FROM_TL,_=e("../../lib/clear_gl_canvases"),T=e("../../plot_api/subroutines").redrawReglTraces,g=e("../plots"),A=e("./axis_ids").getFromId,k=e("./select").prepSelect,R=e("./select").clearSelect,L=e("./select").selectOnClick,z=e("./scale_zoom"),E=e("./constants"),S=E.MINDRAG,C=E.MINZOOM,D=!0;function F(de,pe,W,ue,me,be,ke,Pe){var je=de._fullLayout._zoomlayer,ze=ke+Pe==="nsew",Ze=(ke+Pe).length===1,tt,Ce,Ae,Ne,qe,At,kt,Ve,ft,St,Wt,Qt,zt,$t,rr,Pt,Lt,dt,lt,Te,Le,Be,et;function Me(){if(tt=pe.xaxis,Ce=pe.yaxis,ft=tt._length,St=Ce._length,kt=tt._offset,Ve=Ce._offset,Ae={},Ae[tt._id]=tt,Ne={},Ne[Ce._id]=Ce,ke&&Pe)for(var Nr=pe.overlays,Lr=0;Lr<Nr.length;Lr++){var Ln=Nr[Lr].xaxis;Ae[Ln._id]=Ln;var dn=Nr[Lr].yaxis;Ne[dn._id]=dn}qe=fe(Ae),At=fe(Ne),zt=U(qe,Pe),$t=U(At,ke),rr=!$t&&!zt,Qt=ee(de,de._fullLayout._axisMatchGroups,Ae,Ne),Wt=ee(de,de._fullLayout._axisConstraintGroups,Ae,Ne,Qt);var xn=Wt.isSubplotConstrained||Qt.isSubplotConstrained;Pt=Pe||xn,Lt=ke||xn;var tn=de._fullLayout;dt=tn._has("scattergl"),lt=tn._has("splom"),Te=tn._has("svg")}Me();var Ie=H($t+zt,de._fullLayout.dragmode,ze),He=G(pe,ke+Pe+"drag",Ie,W,ue,me,be);if(rr&&!ze)return He.onmousedown=null,He.style.pointerEvents="none",He;var Xe={element:He,gd:de,plotinfo:pe};Xe.prepFn=function(Nr,Lr,Ln){var dn=Xe.dragmode,xn=de._fullLayout.dragmode;xn!==dn&&(Xe.dragmode=xn),Me(),Be=de._fullLayout._invScaleX,et=de._fullLayout._invScaleY,rr||(ze?Nr.shiftKey?xn==="pan"?xn="zoom":y(xn)||(xn="pan"):Nr.ctrlKey&&(xn="pan"):xn="pan"),b(xn)?Xe.minDrag=1:Xe.minDrag=void 0,y(xn)?(Xe.xaxes=qe,Xe.yaxes=At,k(Nr,Lr,Ln,Xe,xn)):(Xe.clickFn=it,y(dn)&&ht(),rr||(xn==="zoom"?(Xe.moveFn=wt,Xe.doneFn=Rt,Xe.minDrag=1,Mt(Nr,Lr,Ln)):xn==="pan"&&(Xe.moveFn=_r,Xe.doneFn=Mn))),de._fullLayout._redrag=function(){var tn=de._dragdata;if(tn&&tn.element===He){var wn=de._fullLayout.dragmode;y(wn)||(Me(),Yn([0,0,ft,St]),Xe.moveFn(tn.dx,tn.dy))}}};function ht(){Xe.plotinfo.selection=!1,R(de)}function it(Nr,Lr){var Ln=Xe.gd;if(Ln._fullLayout._activeShapeIndex>=0){Ln._fullLayout._deactivateShape(Ln);return}var dn=Ln._fullLayout.clickmode;if(ie(Ln),Nr===2&&!Ze&&Or(),ze)dn.indexOf("select")>-1&&L(Lr,Ln,qe,At,pe.id,Xe),dn.indexOf("event")>-1&&h.click(Ln,Lr,pe.id);else if(Nr===1&&Ze){var xn=ke?Ce:tt,tn=ke==="s"||Pe==="w"?0:1,wn=xn._name+".range["+tn+"]",Sn=X(xn,tn),un="left",vt="middle";if(xn.fixedrange)return;ke?(vt=ke==="n"?"top":"bottom",xn.side==="right"&&(un="right")):Pe==="e"&&(un="right"),Ln._context.showAxisRangeEntryBoxes&&r.select(He).call(a.makeEditable,{gd:Ln,immediate:!0,background:Ln._fullLayout.paper_bgcolor,text:String(Sn),fill:xn.tickfont?xn.tickfont.color:"#444",horizontalAlign:un,verticalAlign:vt}).on("edit",function(Gt){var cr=xn.d2r(Gt);cr!==void 0&&c.call("_guiRelayout",Ln,wn,cr)})}}p.init(Xe);var Ge,ot,Je,st,It,Ft,nr,We,Fe,_t;function Mt(Nr,Lr,Ln){var dn=He.getBoundingClientRect();Ge=Lr-dn.left,ot=Ln-dn.top,de._fullLayout._calcInverseTransform(de);var xn=t.apply3DTransform(de._fullLayout._invTransform)(Ge,ot);Ge=xn[0],ot=xn[1],Je={l:Ge,r:Ge,w:0,t:ot,b:ot,h:0},st=de._hmpixcount?de._hmlumcount/de._hmpixcount:n(de._fullLayout.plot_bgcolor).getLuminance(),It="M0,0H"+ft+"V"+St+"H0V0",Ft=!1,nr="xy",_t=!1,We=K(je,st,kt,Ve,It),Fe=te(je,kt,Ve)}function wt(Nr,Lr){if(de._transitioningWithDuration)return!1;var Ln=Math.max(0,Math.min(ft,Be*Nr+Ge)),dn=Math.max(0,Math.min(St,et*Lr+ot)),xn=Math.abs(Ln-Ge),tn=Math.abs(dn-ot);Je.l=Math.min(Ge,Ln),Je.r=Math.max(Ge,Ln),Je.t=Math.min(ot,dn),Je.b=Math.max(ot,dn);function wn(){nr="",Je.r=Je.l,Je.t=Je.b,Fe.attr("d","M0,0Z")}if(Wt.isSubplotConstrained)xn>C||tn>C?(nr="xy",xn/ft>tn/St?(tn=xn*St/ft,ot>dn?Je.t=ot-tn:Je.b=ot+tn):(xn=tn*ft/St,Ge>Ln?Je.l=Ge-xn:Je.r=Ge+xn),Fe.attr("d",re(Je))):wn();else if(Qt.isSubplotConstrained)if(xn>C||tn>C){nr="xy";var Sn=Math.min(Je.l/ft,(St-Je.b)/St),un=Math.max(Je.r/ft,(St-Je.t)/St);Je.l=Sn*ft,Je.r=un*ft,Je.b=(1-Sn)*St,Je.t=(1-un)*St,Fe.attr("d",re(Je))}else wn();else!$t||tn<Math.min(Math.max(xn*.6,S),C)?xn<S||!zt?wn():(Je.t=0,Je.b=St,nr="x",Fe.attr("d",V(Je,ot))):!zt||xn<Math.min(tn*.6,C)?(Je.l=0,Je.r=ft,nr="y",Fe.attr("d",se(Je,Ge))):(nr="xy",Fe.attr("d",re(Je)));Je.w=Je.r-Je.l,Je.h=Je.b-Je.t,nr&&(_t=!0),de._dragged=_t,J(We,Fe,Je,It,Ft,st),Dt(),de.emit("plotly_relayouting",Le),Ft=!0}function Dt(){Le={},(nr==="xy"||nr==="x")&&(I(qe,Je.l/ft,Je.r/ft,Le,Wt.xaxes),Gr("x",Le)),(nr==="xy"||nr==="y")&&(I(At,(St-Je.b)/St,(St-Je.t)/St,Le,Wt.yaxes),Gr("y",Le))}function Rt(){Dt(),ie(de),Mn(),Q(de)}var Bt=[0,0,ft,St],Nt=null,er=E.REDRAWDELAY,qt=pe.mainplot?de._fullLayout._plots[pe.mainplot]:pe;function Zt(Nr){if(!de._context._scrollZoom.cartesian&&!de._fullLayout._enablescrollzoom)return;if(ht(),de._transitioningWithDuration){Nr.preventDefault(),Nr.stopPropagation();return}Me(),clearTimeout(Nt);var Lr=-Nr.deltaY;if(isFinite(Lr)||(Lr=Nr.wheelDelta/10),!isFinite(Lr)){t.log("Did not find wheel motion attributes: ",Nr);return}var Ln=Math.exp(-Math.min(Math.max(Lr,-20),20)/200),dn=qt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),xn=(Nr.clientX-dn.left)/dn.width,tn=(dn.bottom-Nr.clientY)/dn.height,wn;function Sn(un,vt,Gt){if(un.fixedrange)return;var cr=t.simpleMap(un.range,un.r2l),Er=cr[0]+(cr[1]-cr[0])*vt;function Wr(Vr){return un.l2r(Er+(Vr-Er)*Gt)}un.range=cr.map(Wr)}if(Pt){for(Pe||(xn=.5),wn=0;wn<qe.length;wn++)Sn(qe[wn],xn,Ln);Gr("x"),Bt[2]*=Ln,Bt[0]+=Bt[2]*xn*(1/Ln-1)}if(Lt){for(ke||(tn=.5),wn=0;wn<At.length;wn++)Sn(At[wn],tn,Ln);Gr("y"),Bt[3]*=Ln,Bt[1]+=Bt[3]*(1-tn)*(1/Ln-1)}Yn(Bt),zr(),de.emit("plotly_relayouting",Le),Nt=setTimeout(function(){Bt=[0,0,ft,St],Mn()},er),Nr.preventDefault()}ke.length*Pe.length!==1&&ae(He,Zt);function _r(Nr,Lr){if(Nr=Nr*Be,Lr=Lr*et,de._transitioningWithDuration)return;if(de._fullLayout._replotting=!0,zt==="ew"||$t==="ns"){var Ln=zt?-Nr:0,dn=$t?-Lr:0;if(Qt.isSubplotConstrained){if(zt&&$t){var xn=(Nr/ft-Lr/St)/2;Nr=xn*ft,Lr=-xn*St,Ln=-Nr,dn=-Lr}$t?Ln=-dn*ft/St:dn=-Ln*St/ft}zt&&(B(qe,Nr),Gr("x")),$t&&(B(At,Lr),Gr("y")),Yn([Ln,dn,ft,St]),zr(),de.emit("plotly_relayouting",Le);return}function tn(Wr,Vr,Qr){for(var Hr=1-Vr,Cn,ra,ta=0;ta<Wr.length;ta++){var ba=Wr[ta];if(!ba.fixedrange){Cn=ba,ra=ba._rl[Hr]+(ba._rl[Vr]-ba._rl[Hr])/j(Qr/ba._length);var Wa=ba.l2r(ra);Wa!==!1&&Wa!==void 0&&(ba.range[Vr]=Wa)}}return Cn._length*(Cn._rl[Vr]-ra)/(Cn._rl[Vr]-Cn._rl[Hr])}var wn=zt==="w"==($t==="n")?1:-1;if(zt&&$t&&(Wt.isSubplotConstrained||Qt.isSubplotConstrained)){var Sn=(Nr/ft+wn*Lr/St)/2;Nr=Sn*ft,Lr=wn*Sn*St}var un,vt;if(zt==="w"?Nr=tn(qe,0,Nr):zt==="e"?Nr=tn(qe,1,-Nr):zt||(Nr=0),$t==="n"?Lr=tn(At,1,Lr):$t==="s"?Lr=tn(At,0,-Lr):$t||(Lr=0),un=zt==="w"?Nr:0,vt=$t==="n"?Lr:0,Wt.isSubplotConstrained&&!Qt.isSubplotConstrained||Qt.isSubplotConstrained&&zt&&$t&&wn>0){var Gt;if(Qt.isSubplotConstrained||!zt&&$t.length===1){for(Gt=0;Gt<qe.length;Gt++)qe[Gt].range=qe[Gt]._r.slice(),z(qe[Gt],1-Lr/St);Nr=Lr*ft/St,un=Nr/2}if(Qt.isSubplotConstrained||!$t&&zt.length===1){for(Gt=0;Gt<At.length;Gt++)At[Gt].range=At[Gt]._r.slice(),z(At[Gt],1-Nr/ft);Lr=Nr*St/ft,vt=Lr/2}}(!Qt.isSubplotConstrained||!$t)&&Gr("x"),(!Qt.isSubplotConstrained||!zt)&&Gr("y");var cr=ft-Nr,Er=St-Lr;Qt.isSubplotConstrained&&!(zt&&$t)&&(zt?(vt=un?0:Nr*St/ft,Er=cr*St/ft):(un=vt?0:Lr*ft/St,cr=Er*ft/St)),Yn([un,vt,cr,Er]),zr(),de.emit("plotly_relayouting",Le)}function Gr(Nr,Lr){for(var Ln=Qt.isSubplotConstrained?{x:At,y:qe}[Nr]:Qt[Nr+"axes"],dn=Qt.isSubplotConstrained?{x:qe,y:At}[Nr]:[],xn=0;xn<Ln.length;xn++){var tn=Ln[xn],wn=tn._id,Sn=Qt.xLinks[wn]||Qt.yLinks[wn],un=dn[0]||Ae[Sn]||Ne[Sn];un&&(Lr?(Lr[tn._name+".range[0]"]=Lr[un._name+".range[0]"],Lr[tn._name+".range[1]"]=Lr[un._name+".range[1]"]):tn.range=un.range.slice())}}function zr(){var Nr=[],Lr;function Ln(tn){for(Lr=0;Lr<tn.length;Lr++)tn[Lr].fixedrange||Nr.push(tn[Lr]._id)}for(Pt&&(Ln(qe),Ln(Wt.xaxes),Ln(Qt.xaxes)),Lt&&(Ln(At),Ln(Wt.yaxes),Ln(Qt.yaxes)),Le={},Lr=0;Lr<Nr.length;Lr++){var dn=Nr[Lr],xn=A(de,dn);i.drawOne(de,xn,{skipTitle:!0}),Le[xn._name+".range[0]"]=xn.range[0],Le[xn._name+".range[1]"]=xn.range[1]}i.redrawComponents(de,Nr)}function Or(){if(!de._transitioningWithDuration){var Nr=de._context.doubleClick,Lr=[];zt&&(Lr=Lr.concat(qe)),$t&&(Lr=Lr.concat(At)),Qt.xaxes&&(Lr=Lr.concat(Qt.xaxes)),Qt.yaxes&&(Lr=Lr.concat(Qt.yaxes));var Ln={},dn,xn,tn;if(Nr==="reset+autosize"){for(Nr="autosize",xn=0;xn<Lr.length;xn++)if(dn=Lr[xn],dn._rangeInitial&&(dn.range[0]!==dn._rangeInitial[0]||dn.range[1]!==dn._rangeInitial[1])||!dn._rangeInitial&&!dn.autorange){Nr="reset";break}}if(Nr==="autosize")for(xn=0;xn<Lr.length;xn++)dn=Lr[xn],dn.fixedrange||(Ln[dn._name+".autorange"]=!0);else if(Nr==="reset")for((zt||Wt.isSubplotConstrained)&&(Lr=Lr.concat(Wt.xaxes)),$t&&!Wt.isSubplotConstrained&&(Lr=Lr.concat(Wt.yaxes)),Wt.isSubplotConstrained&&(zt?$t||(Lr=Lr.concat(At)):Lr=Lr.concat(qe)),xn=0;xn<Lr.length;xn++)dn=Lr[xn],dn.fixedrange||(dn._rangeInitial?(tn=dn._rangeInitial,Ln[dn._name+".range[0]"]=tn[0],Ln[dn._name+".range[1]"]=tn[1]):Ln[dn._name+".autorange"]=!0);de.emit("plotly_doubleclick",null),c.call("_guiRelayout",de,Ln)}}function Mn(){Yn([0,0,ft,St]),t.syncOrAsync([g.previousPromises,function(){de._fullLayout._replotting=!1,c.call("_guiRelayout",de,Le)}],de)}function Yn(Nr){var Lr=de._fullLayout,Ln=Lr._plots,dn=Lr._subplots.cartesian,xn,tn,wn,Sn;if(lt&&c.subplotsRegistry.splom.drag(de),dt){for(xn=0;xn<dn.length;xn++)if(tn=Ln[dn[xn]],wn=tn.xaxis,Sn=tn.yaxis,tn._scene){var un=t.simpleMap(wn.range,wn.r2l),vt=t.simpleMap(Sn.range,Sn.r2l);tn._scene.update({range:[un[0],vt[0],un[1],vt[1]]})}}if((lt||dt)&&(_(de),T(de)),Te){var Gt=Nr[2]/tt._length,cr=Nr[3]/Ce._length;for(xn=0;xn<dn.length;xn++){tn=Ln[dn[xn]],wn=tn.xaxis,Sn=tn.yaxis;var Er=(Pt||Qt.isSubplotConstrained)&&!wn.fixedrange&&Ae[wn._id],Wr=(Lt||Qt.isSubplotConstrained)&&!Sn.fixedrange&&Ne[Sn._id],Vr,Qr,Hr,Cn;if(Er?(Vr=Gt,Hr=Pe||Qt.isSubplotConstrained?Nr[0]:jn(wn,Vr)):Qt.xaHash[wn._id]?(Vr=Gt,Hr=Nr[0]*wn._length/tt._length):Qt.yaHash[wn._id]?(Vr=cr,Hr=$t==="ns"?-Nr[1]*wn._length/Ce._length:jn(wn,Vr,{n:"top",s:"bottom"}[$t])):(Vr=An(wn,Gt,cr),Hr=Bn(wn,Vr)),Wr?(Qr=cr,Cn=ke||Qt.isSubplotConstrained?Nr[1]:jn(Sn,Qr)):Qt.yaHash[Sn._id]?(Qr=cr,Cn=Nr[1]*Sn._length/Ce._length):Qt.xaHash[Sn._id]?(Qr=Gt,Cn=zt==="ew"?-Nr[0]*Sn._length/tt._length:jn(Sn,Qr,{e:"right",w:"left"}[zt])):(Qr=An(Sn,Gt,cr),Cn=Bn(Sn,Qr)),!(!Vr&&!Qr)){Vr||(Vr=1),Qr||(Qr=1);var ra=wn._offset-Hr/Vr,ta=Sn._offset-Cn/Qr;tn.clipRect.call(u.setTranslate,Hr,Cn).call(u.setScale,Vr,Qr),tn.plot.call(u.setTranslate,ra,ta).call(u.setScale,1/Vr,1/Qr),(Vr!==tn.xScaleFactor||Qr!==tn.yScaleFactor)&&(u.setPointGroupScale(tn.zoomScalePts,Vr,Qr),u.setTextPointsScale(tn.zoomScaleTxt,Vr,Qr)),u.hideOutsideRangePoints(tn.clipOnAxisFalseTraces,tn),tn.xScaleFactor=Vr,tn.yScaleFactor=Qr}}}}function An(Nr,Lr,Ln){return Nr.fixedrange?0:Pt&&Wt.xaHash[Nr._id]?Lr:Lt&&(Wt.isSubplotConstrained?Wt.xaHash:Wt.yaHash)[Nr._id]?Ln:0}function Bn(Nr,Lr){return Lr?(Nr.range=Nr._r.slice(),z(Nr,Lr),jn(Nr,Lr)):0}function jn(Nr,Lr,Ln){return Nr._length*(1-Lr)*m[Ln||Nr.constraintoward||"middle"]}return He}function N(de,pe,W,ue){var me=t.ensureSingle(de.draglayer,pe,W,function(be){be.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",de.id)});return me.call(s,ue),me.node()}function G(de,pe,W,ue,me,be,ke){var Pe=N(de,"rect",pe,W);return r.select(Pe).call(u.setRect,ue,me,be,ke),Pe}function U(de,pe){for(var W=0;W<de.length;W++)if(!de[W].fixedrange)return pe;return""}function X(de,pe){var W=de.range[pe],ue=Math.abs(W-de.range[1-pe]),me;return de.type==="date"?W:de.type==="log"?(me=Math.ceil(Math.max(0,-Math.log(ue)/Math.LN10))+3,r.format("."+me+"g")(Math.pow(10,W))):(me=Math.floor(Math.log(Math.abs(W))/Math.LN10)-Math.floor(Math.log(ue)/Math.LN10)+4,r.format("."+String(me)+"g")(W))}function I(de,pe,W,ue,me){for(var be=0;be<de.length;be++){var ke=de[be];if(!ke.fixedrange)if(ke.rangebreaks){var Pe=ke._id.charAt(0)==="y",je=Pe?1-pe:pe,ze=Pe?1-W:W;ue[ke._name+".range[0]"]=ke.l2r(ke.p2l(je*ke._length)),ue[ke._name+".range[1]"]=ke.l2r(ke.p2l(ze*ke._length))}else{var Ze=ke._rl[0],tt=ke._rl[1]-Ze;ue[ke._name+".range[0]"]=ke.l2r(Ze+tt*pe),ue[ke._name+".range[1]"]=ke.l2r(Ze+tt*W)}}if(me&&me.length){var Ce=(pe+(1-W))/2;I(me,Ce,1-Ce,ue,[])}}function B(de,pe){for(var W=0;W<de.length;W++){var ue=de[W];if(!ue.fixedrange)if(ue.rangebreaks){var me=0,be=ue._length,ke=ue.p2l(me+pe)-ue.p2l(me),Pe=ue.p2l(be+pe)-ue.p2l(be),je=(ke+Pe)/2;ue.range=[ue.l2r(ue._rl[0]-je),ue.l2r(ue._rl[1]-je)]}else ue.range=[ue.l2r(ue._rl[0]-pe/ue._m),ue.l2r(ue._rl[1]-pe/ue._m)]}}function j(de){return 1-(de>=0?Math.min(de,.9):1/(1/Math.max(de,-.3)+3.222))}function H(de,pe,W){return de?de==="nsew"?W?"":pe==="pan"?"move":"crosshair":de.toLowerCase()+"-resize":"pointer"}function K(de,pe,W,ue,me){return de.append("path").attr("class","zoombox").style({fill:pe>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",f(W,ue)).attr("d",me+"Z")}function te(de,pe,W){return de.append("path").attr("class","zoombox-corners").style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,opacity:0}).attr("transform",f(pe,W)).attr("d","M0,0Z")}function J(de,pe,W,ue,me,be){de.attr("d",ue+"M"+W.l+","+W.t+"v"+W.h+"h"+W.w+"v-"+W.h+"h-"+W.w+"Z"),oe(de,pe,me,be)}function oe(de,pe,W,ue){W||(de.transition().style("fill",ue>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),pe.transition().style("opacity",1).duration(200))}function ie(de){r.select(de).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Q(de){D&&de.data&&de._context.showTips&&(t.notifier(t._(de,"Double-click to zoom back out"),"long"),D=!1)}function V(de,pe){return"M"+(de.l-.5)+","+(pe-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(de.r+.5)+","+(pe-C-.5)+"h3v"+(2*C+1)+"h-3Z"}function se(de,pe){return"M"+(pe-C-.5)+","+(de.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+(pe-C-.5)+","+(de.b+.5)+"v3h"+(2*C+1)+"v-3Z"}function re(de){var pe=Math.floor(Math.min(de.b-de.t,de.r-de.l,C)/2);return"M"+(de.l-3.5)+","+(de.t-.5+pe)+"h3v"+-pe+"h"+pe+"v-3h-"+(pe+3)+"ZM"+(de.r+3.5)+","+(de.t-.5+pe)+"h-3v"+-pe+"h"+-pe+"v-3h"+(pe+3)+"ZM"+(de.r+3.5)+","+(de.b+.5-pe)+"h-3v"+pe+"h"+-pe+"v3h"+(pe+3)+"ZM"+(de.l-3.5)+","+(de.b+.5-pe)+"h3v"+pe+"h"+pe+"v3h-"+(pe+3)+"Z"}function ee(de,pe,W,ue,me){for(var be=!1,ke={},Pe={},je,ze,Ze,tt,Ce=(me||{}).xaHash,Ae=(me||{}).yaHash,Ne=0;Ne<pe.length;Ne++){var qe=pe[Ne];for(je in W)if(qe[je]){for(Ze in qe)!(me&&(Ce[Ze]||Ae[Ze]))&&!(Ze.charAt(0)==="x"?W:ue)[Ze]&&(ke[Ze]=je);for(ze in ue)!(me&&(Ce[ze]||Ae[ze]))&&qe[ze]&&(be=!0)}for(ze in ue)if(qe[ze])for(tt in qe)!(me&&(Ce[tt]||Ae[tt]))&&!(tt.charAt(0)==="x"?W:ue)[tt]&&(Pe[tt]=ze)}be&&(t.extendFlat(ke,Pe),Pe={});var At={},kt=[];for(Ze in ke){var Ve=A(de,Ze);kt.push(Ve),At[Ve._id]=Ve}var ft={},St=[];for(tt in Pe){var Wt=A(de,tt);St.push(Wt),ft[Wt._id]=Wt}return{xaHash:At,yaHash:ft,xaxes:kt,yaxes:St,xLinks:ke,yLinks:Pe,isSubplotConstrained:be}}function ae(de,pe){if(!l)de.onwheel!==void 0?de.onwheel=pe:de.onmousewheel!==void 0?de.onmousewheel=pe:de.isAddedWheelEvent||(de.isAddedWheelEvent=!0,de.addEventListener("wheel",pe,{passive:!1}));else{var W=de.onwheel!==void 0?"wheel":"mousewheel";de._onwheel&&de.removeEventListener(W,de._onwheel),de._onwheel=pe,de.addEventListener(W,pe,{passive:!1})}}function fe(de){var pe=[];for(var W in de)pe.push(de[W]);return pe}v.exports={makeDragBox:F,makeDragger:N,makeRectDragger:G,makeZoombox:K,makeCorners:te,updateZoombox:J,xyCorners:re,transitionZoombox:oe,removeZoombox:ie,showDoubleClickNotifier:Q,attachWheelEventHandler:ae}},{"../../components/color":643,"../../components/dragelement":662,"../../components/dragelement/helpers":661,"../../components/drawing":665,"../../components/fx":683,"../../constants/alignment":745,"../../lib":778,"../../lib/clear_gl_canvases":762,"../../lib/setcursor":799,"../../lib/svg_text_utils":803,"../../plot_api/subroutines":818,"../../registry":911,"../plots":891,"./axes":828,"./axis_ids":831,"./constants":834,"./scale_zoom":846,"./select":847,d3:169,"has-passive-events":441,tinycolor2:576}],837:[function(e,v,M){var r=e("d3"),n=e("../../components/fx"),l=e("../../components/dragelement"),c=e("../../lib/setcursor"),t=e("./dragbox").makeDragBox,f=e("./constants").DRAGGERSIZE;M.initInteractions=function(o){var u=o._fullLayout;if(o._context.staticPlot){r.select(o).selectAll(".drag").remove();return}if(!(!u._has("cartesian")&&!u._has("splom"))){var h=Object.keys(u._plots||{}).sort(function(s,p){if((u._plots[s].mainplot&&!0)===(u._plots[p].mainplot&&!0)){var d=s.split("y"),y=p.split("y");return d[0]===y[0]?Number(d[1]||1)-Number(y[1]||1):Number(d[0]||1)-Number(y[0]||1)}return u._plots[s].mainplot?1:-1});h.forEach(function(s){var p=u._plots[s],d=p.xaxis,y=p.yaxis;if(!p.mainplot){var b=t(o,p,d._offset,y._offset,d._length,y._length,"ns","ew");b.onmousemove=function(T){o._fullLayout._rehover=function(){o._fullLayout._hoversubplot===s&&o._fullLayout._plots[s]&&n.hover(o,T,s)},n.hover(o,T,s),o._fullLayout._lasthover=b,o._fullLayout._hoversubplot=s},b.onmouseout=function(T){o._dragging||(o._fullLayout._hoversubplot=null,l.unhover(o,T))},o._context.showAxisDragHandles&&(t(o,p,d._offset-f,y._offset-f,f,f,"n","w"),t(o,p,d._offset+d._length,y._offset-f,f,f,"n","e"),t(o,p,d._offset-f,y._offset+y._length,f,f,"s","w"),t(o,p,d._offset+d._length,y._offset+y._length,f,f,"s","e"))}if(o._context.showAxisDragHandles){if(s===d._mainSubplot){var m=d._mainLinePosition;d.side==="top"&&(m-=f),t(o,p,d._offset+d._length*.1,m,d._length*.8,f,"","ew"),t(o,p,d._offset,m,d._length*.1,f,"","w"),t(o,p,d._offset+d._length*.9,m,d._length*.1,f,"","e")}if(s===y._mainSubplot){var _=y._mainLinePosition;y.side!=="right"&&(_-=f),t(o,p,_,y._offset+y._length*.1,f,y._length*.8,"ns",""),t(o,p,_,y._offset+y._length*.9,f,y._length*.1,"s",""),t(o,p,_,y._offset,f,y._length*.1,"n","")}}});var i=u._hoverlayer.node();i.onmousemove=function(s){s.target=o._fullLayout._lasthover,n.hover(o,s,u._hoversubplot)},i.onclick=function(s){s.target=o._fullLayout._lasthover,n.click(o,s)},i.onmousedown=function(s){o._fullLayout._lasthover.onmousedown(s)},M.updateFx(o)}},M.updateFx=function(a){var o=a._fullLayout,u=o.dragmode==="pan"?"move":"crosshair";c(o._draggers,u)}},{"../../components/dragelement":662,"../../components/fx":683,"../../lib/setcursor":799,"./constants":834,"./dragbox":836,d3:169}],838:[function(e,v,M){function r(l){var c=l._fullLayout._zoomlayer;c&&c.selectAll(".outline-controllers").remove()}function n(l){var c=l._fullLayout._zoomlayer;c&&c.selectAll(".select-outline").remove(),l._fullLayout._drawing=!1}v.exports={clearOutlineControllers:r,clearSelect:n}},{}],839:[function(e,v,M){var r=e("../../lib").strTranslate;function n(f,a){switch(f.type){case"log":return f.p2d(a);case"date":return f.p2r(a,0,f.calendar);default:return f.p2r(a)}}function l(f,a){switch(f.type){case"log":return f.d2p(a);case"date":return f.r2p(a,0,f.calendar);default:return f.r2p(a)}}function c(f){var a=f._id.charAt(0)==="y"?1:0;return function(o){return n(f,o[a])}}function t(f){return r(f.xaxis._offset,f.yaxis._offset)}v.exports={p2r:n,r2p:l,axValue:c,getTransform:t}},{"../../lib":778}],840:[function(e,v,M){var r=e("../../registry"),n=e("../../lib"),l=e("./axis_ids");v.exports=function(t){return function(a,o){var u=a[t];if(Array.isArray(u))for(var h=r.subplotsRegistry.cartesian,i=h.idRegex,s=o._subplots,p=s.xaxis,d=s.yaxis,y=s.cartesian,b=o._has("cartesian")||o._has("gl2d"),m=0;m<u.length;m++){var _=u[m];if(n.isPlainObject(_)){var T=l.cleanId(_.xref,"x",!1),g=l.cleanId(_.yref,"y",!1),A=i.x.test(T),k=i.y.test(g);if(A||k){b||n.pushUnique(o._basePlotModules,h);var R=!1;A&&p.indexOf(T)===-1&&(p.push(T),R=!0),k&&d.indexOf(g)===-1&&(d.push(g),R=!0),R&&A&&k&&y.push(T+g)}}}}}},{"../../lib":778,"../../registry":911,"./axis_ids":831}],841:[function(e,v,M){var r=e("d3"),n=e("../../registry"),l=e("../../lib"),c=e("../plots"),t=e("../../components/drawing"),f=e("../get_data").getModuleCalcData,a=e("./axis_ids"),o=e("./constants"),u=e("../../constants/xmlns_namespaces"),h=l.ensureSingle;function i(m,_,T){return l.ensureSingle(m,_,T,function(g){g.datum(T)})}M.name="cartesian",M.attr=["xaxis","yaxis"],M.idRoot=["x","y"],M.idRegex=o.idRegex,M.attrRegex=o.attrRegex,M.attributes=e("./attributes"),M.layoutAttributes=e("./layout_attributes"),M.supplyLayoutDefaults=e("./layout_defaults"),M.transitionAxes=e("./transition_axes"),M.finalizeSubplots=function(m,_){var T=_._subplots,g=T.xaxis,A=T.yaxis,k=T.cartesian,R=k.concat(T.gl2d||[]),L={},z={},E,S,C;for(E=0;E<R.length;E++){var D=R[E].split("y");L[D[0]]=1,z["y"+D[1]]=1}for(E=0;E<g.length;E++)S=g[E],L[S]||(C=(m[a.id2name(S)]||{}).anchor,o.idRegex.y.test(C)||(C="y"),k.push(S+C),R.push(S+C),z[C]||(z[C]=1,l.pushUnique(A,C)));for(E=0;E<A.length;E++)C=A[E],z[C]||(S=(m[a.id2name(C)]||{}).anchor,o.idRegex.x.test(S)||(S="x"),k.push(S+C),R.push(S+C),L[S]||(L[S]=1,l.pushUnique(g,S)));if(!R.length){S="",C="";for(var F in m)if(o.attrRegex.test(F)){var N=F.charAt(0);N==="x"?(!S||+F.substr(5)<+S.substr(5))&&(S=F):(!C||+F.substr(5)<+C.substr(5))&&(C=F)}S=S?a.name2id(S):"x",C=C?a.name2id(C):"y",g.push(S),A.push(C),k.push(S+C)}},M.plot=function(m,_,T,g){var A=m._fullLayout,k=A._subplots.cartesian,R=m.calcdata,L;if(!Array.isArray(_))for(_=[],L=0;L<R.length;L++)_.push(L);for(L=0;L<k.length;L++){for(var z=k[L],E=A._plots[z],S=[],C,D=0;D<R.length;D++){var F=R[D],N=F[0].trace;N.xaxis+N.yaxis===z&&((_.indexOf(N.index)!==-1||N.carpet)&&(C&&C[0].trace.xaxis+C[0].trace.yaxis===z&&["tonextx","tonexty","tonext"].indexOf(N.fill)!==-1&&S.indexOf(C)===-1&&S.push(C),S.push(F)),C=F)}s(m,E,S,T,g)}};function s(m,_,T,g,A){for(var k=o.traceLayerClasses,R=m._fullLayout,L=R._modules,z,E,S,C=[],D=[],F=0;F<L.length;F++){z=L[F];var N=z.name,G=n.modules[N].categories;if(G.svg){var U=z.layerName||N+"layer",X=z.plot;E=f(T,X),S=E[0],T=E[1],S.length&&C.push({i:k.indexOf(U),className:U,plotMethod:X,cdModule:S}),G.zoomScale&&D.push("."+U)}}C.sort(function(j,H){return j.i-H.i});var I=_.plot.selectAll("g.mlayer").data(C,function(j){return j.className});if(I.enter().append("g").attr("class",function(j){return j.className}).classed("mlayer",!0).classed("rangeplot",_.isRangePlot),I.exit().remove(),I.order(),I.each(function(j){var H=r.select(this),K=j.className;j.plotMethod(m,_,j.cdModule,H,g,A),o.clipOnAxisFalseQuery.indexOf("."+K)===-1&&t.setClipUrl(H,_.layerClipId,m)}),R._has("scattergl")&&(z=n.getModule("scattergl"),S=f(T,z)[0],z.plot(m,_,S)),!m._context.staticPlot&&(_._hasClipOnAxisFalse&&(_.clipOnAxisFalseTraces=_.plot.selectAll(o.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),D.length)){var B=_.plot.selectAll(D.join(",")).selectAll(".trace");_.zoomScalePts=B.selectAll("path.point"),_.zoomScaleTxt=B.selectAll(".textpoint")}}M.clean=function(m,_,T,g){var A=g._plots||{},k=_._plots||{},R=g._subplots||{},L,z,E;if(g._hasOnlyLargeSploms&&!_._hasOnlyLargeSploms)for(E in A)L=A[E],L.plotgroup&&L.plotgroup.remove();var S=g._has&&g._has("gl"),C=_._has&&_._has("gl");if(S&&!C)for(E in A)L=A[E],L._scene&&L._scene.destroy();if(R.xaxis&&R.yaxis){var D=a.listIds({_fullLayout:g});for(z=0;z<D.length;z++){var F=D[z];_[a.id2name(F)]||g._infolayer.selectAll(".g-"+F+"title").remove()}}var N=g._has&&g._has("cartesian"),G=_._has&&_._has("cartesian");if(N&&!G)y(g._cartesianlayer.selectAll(".subplot"),g),g._defs.selectAll(".axesclip").remove(),delete g._axisConstraintGroups,delete g._axisMatchGroups;else if(R.cartesian)for(z=0;z<R.cartesian.length;z++){var U=R.cartesian[z];if(!k[U]){var X="."+U+",."+U+"-x,."+U+"-y";g._cartesianlayer.selectAll(X).remove(),b(U,g)}}},M.drawFramework=function(m){var _=m._fullLayout,T=p(m),g=_._cartesianlayer.selectAll(".subplot").data(T,String);g.enter().append("g").attr("class",function(A){return"subplot "+A[0]}),g.order(),g.exit().call(y,_),g.each(function(A){var k=A[0],R=_._plots[k];R.plotgroup=r.select(this),d(m,R),R.draglayer=h(_._draggers,"g",k)})},M.rangePlot=function(m,_,T){d(m,_),s(m,_,T),c.style(m)};function p(m){var _=m._fullLayout,T=_._subplots.cartesian,g=T.length,A,k,R,L,z,E,S=[],C=[];for(A=0;A<g;A++){R=T[A],L=_._plots[R],z=L.xaxis,E=L.yaxis;var D=z._mainAxis,F=E._mainAxis,N=D._id+F._id,G=_._plots[N];L.overlays=[],N!==R&&G?(L.mainplot=N,L.mainplotinfo=G,C.push(R)):(L.mainplot=void 0,L.mainplotinfo=void 0,S.push(R))}for(A=0;A<C.length;A++)R=C[A],L=_._plots[R],L.mainplotinfo.overlays.push(L);var U=S.concat(C),X=new Array(g);for(A=0;A<g;A++){R=U[A],L=_._plots[R],z=L.xaxis,E=L.yaxis;var I=[R,z.layer,E.layer,z.overlaying||"",E.overlaying||""];for(k=0;k<L.overlays.length;k++)I.push(L.overlays[k].id);X[A]=I}return X}function d(m,_){var T=_.plotgroup,g=_.id,A=o.layerValue2layerClass[_.xaxis.layer],k=o.layerValue2layerClass[_.yaxis.layer],R=m._fullLayout._hasOnlyLargeSploms;if(_.mainplot){var z=_.mainplotinfo,E=z.plotgroup,S=g+"-x",C=g+"-y";_.gridlayer=z.gridlayer,_.zerolinelayer=z.zerolinelayer,h(z.overlinesBelow,"path",S),h(z.overlinesBelow,"path",C),h(z.overaxesBelow,"g",S),h(z.overaxesBelow,"g",C),_.plot=h(z.overplot,"g",g),h(z.overlinesAbove,"path",S),h(z.overlinesAbove,"path",C),h(z.overaxesAbove,"g",S),h(z.overaxesAbove,"g",C),_.xlines=E.select(".overlines-"+A).select("."+S),_.ylines=E.select(".overlines-"+k).select("."+C),_.xaxislayer=E.select(".overaxes-"+A).select("."+S),_.yaxislayer=E.select(".overaxes-"+k).select("."+C)}else if(R)_.xlines=h(T,"path","xlines-above"),_.ylines=h(T,"path","ylines-above"),_.xaxislayer=h(T,"g","xaxislayer-above"),_.yaxislayer=h(T,"g","yaxislayer-above");else{var L=h(T,"g","layer-subplot");_.shapelayer=h(L,"g","shapelayer"),_.imagelayer=h(L,"g","imagelayer"),_.gridlayer=h(T,"g","gridlayer"),_.zerolinelayer=h(T,"g","zerolinelayer"),h(T,"path","xlines-below"),h(T,"path","ylines-below"),_.overlinesBelow=h(T,"g","overlines-below"),h(T,"g","xaxislayer-below"),h(T,"g","yaxislayer-below"),_.overaxesBelow=h(T,"g","overaxes-below"),_.plot=h(T,"g","plot"),_.overplot=h(T,"g","overplot"),_.xlines=h(T,"path","xlines-above"),_.ylines=h(T,"path","ylines-above"),_.overlinesAbove=h(T,"g","overlines-above"),h(T,"g","xaxislayer-above"),h(T,"g","yaxislayer-above"),_.overaxesAbove=h(T,"g","overaxes-above"),_.xlines=T.select(".xlines-"+A),_.ylines=T.select(".ylines-"+k),_.xaxislayer=T.select(".xaxislayer-"+A),_.yaxislayer=T.select(".yaxislayer-"+k)}R||(i(_.gridlayer,"g",_.xaxis._id),i(_.gridlayer,"g",_.yaxis._id),_.gridlayer.selectAll("g").map(function(D){return D[0]}).sort(a.idSort)),_.xlines.style("fill","none").classed("crisp",!0),_.ylines.style("fill","none").classed("crisp",!0)}function y(m,_){if(m){var T={};m.each(function(z){var E=z[0],S=r.select(this);S.remove(),b(E,_),T[E]=!0});for(var g in _._plots)for(var A=_._plots[g],k=A.overlays||[],R=0;R<k.length;R++){var L=k[R];T[L.id]&&L.plot.selectAll(".trace").remove()}}}function b(m,_){_._draggers.selectAll("g."+m).remove(),_._defs.select("#clip"+_._uid+m+"plot").remove()}M.toSVG=function(m){var _=m._fullLayout._glimages,T=r.select(m).selectAll(".svg-container"),g=T.filter(function(k,R){return R===T.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function A(){var k=this,R=k.toDataURL("image/png"),L=_.append("svg:image");L.attr({xmlns:u.svg,"xlink:href":R,preserveAspectRatio:"none",x:0,y:0,width:k.width,height:k.height})}g.each(A)},M.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":665,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../registry":911,"../get_data":865,"../plots":891,"./attributes":826,"./axis_ids":831,"./constants":834,"./graph_interact":837,"./layout_attributes":842,"./layout_defaults":843,"./transition_axes":852,d3:169}],842:[function(e,v,M){var r=e("../font_attributes"),n=e("../../components/color/attributes"),l=e("../../components/drawing/attributes").dash,c=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray;e("../../constants/docs").FORMAT_LINK,e("../../constants/docs").DATE_FORMAT_LINK;var f=e("../../constants/numerical").ONEDAY,a=e("./constants"),o=a.HOUR_PATTERN,u=a.WEEKDAY_PATTERN;v.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:n.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:r({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"calc"},rangebreaks:t("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[u,o,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:f},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:c({},l,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"data",editType:"none"},tickfont:r({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:t("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:n.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:n.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:r({editType:"ticks"})}}},{"../../components/color/attributes":642,"../../components/drawing/attributes":664,"../../constants/docs":748,"../../constants/numerical":753,"../../lib/extend":768,"../../plot_api/plot_template":817,"../font_attributes":856,"./constants":834}],843:[function(e,v,M){var r=e("../../lib"),n=e("../../components/color"),l=e("../../components/fx/helpers").isUnifiedHover,c=e("../../components/fx/hovermode_defaults"),t=e("../../plot_api/plot_template"),f=e("../layout_attributes"),a=e("./layout_attributes"),o=e("./type_defaults"),u=e("./axis_defaults"),h=e("./constraints"),i=e("./position_defaults"),s=e("./axis_ids"),p=s.id2name,d=s.name2id,y=e("./constants").AX_ID_PATTERN,b=e("../../registry"),m=b.traceIs,_=b.getComponentMethod;function T(g,A,k){Array.isArray(g[A])?g[A].push(k):g[A]=[k]}v.exports=function(A,k,R){var L=k.autotypenumbers,z={},E={},S={},C={},D={},F={},N={},G={},U={},X={},I,B;for(I=0;I<R.length;I++){var j=R[I];if(!(!m(j,"cartesian")&&!m(j,"gl2d"))){var H;if(j.xaxis)H=p(j.xaxis),T(z,H,j);else if(j.xaxes)for(B=0;B<j.xaxes.length;B++)T(z,p(j.xaxes[B]),j);var K;if(j.yaxis)K=p(j.yaxis),T(z,K,j);else if(j.yaxes)for(B=0;B<j.yaxes.length;B++)T(z,p(j.yaxes[B]),j);if(j.type==="funnel"?j.orientation==="h"?(H&&(E[H]=!0),K&&(N[K]=!0)):K&&(S[K]=!0):j.type==="image"?(K&&(G[K]=!0),H&&(G[H]=!0)):(K&&(D[K]=!0,F[K]=!0),(!m(j,"carpet")||j.type==="carpet"&&!j._cheater)&&H&&(C[H]=!0)),j.type==="carpet"&&j._cheater&&H&&(E[H]=!0),m(j,"2dMap")&&(U[H]=!0,U[K]=!0),m(j,"oriented")){var te=j.orientation==="h"?K:H;X[te]=!0}}}var J=k._subplots,oe=J.xaxis,ie=J.yaxis,Q=r.simpleMap(oe,p),V=r.simpleMap(ie,p),se=Q.concat(V),re=n.background;oe.length&&ie.length&&(re=r.coerce(A,k,f,"plot_bgcolor"));var ee=n.combine(re,k.paper_bgcolor),ae,fe,de,pe,W;function ue(){var Te=z[ae]||[];W._traceIndices=Te.map(function(Le){return Le._expandedIndex}),W._annIndices=[],W._shapeIndices=[],W._imgIndices=[],W._subplotsWith=[],W._counterAxes=[],W._name=W._attr=ae,W._id=fe}function me(Te,Le){return r.coerce(pe,W,a,Te,Le)}function be(Te,Le){return r.coerce2(pe,W,a,Te,Le)}function ke(Te){return Te==="x"?ie:oe}function Pe(Te,Le){for(var Be=Te==="x"?Q:V,et=[],Me=0;Me<Be.length;Me++){var Ie=Be[Me];Ie!==Le&&!(A[Ie]||{}).overlaying&&et.push(d(Ie))}return et}var je={x:ke("x"),y:ke("y")},ze=je.x.concat(je.y),Ze={},tt=[];function Ce(){var Te=pe.matches;y.test(Te)&&ze.indexOf(Te)===-1&&(Ze[Te]=pe.type,tt=Object.keys(Ze))}var Ae=c(A,k,R),Ne=l(Ae);for(I=0;I<se.length;I++){ae=se[I],fe=d(ae),de=ae.charAt(0),r.isPlainObject(A[ae])||(A[ae]={}),pe=A[ae],W=t.newContainer(k,ae,de+"axis"),ue();var qe=de==="x"&&!C[ae]&&E[ae]||de==="y"&&!D[ae]&&S[ae],At=de==="y"&&(!F[ae]&&N[ae]||G[ae]),kt={letter:de,font:k.font,outerTicks:U[ae],showGrid:!X[ae],data:z[ae]||[],bgColor:ee,calendar:k.calendar,automargin:!0,visibleDflt:qe,reverseDflt:At,autotypenumbersDflt:L,splomStash:((k._splomAxes||{})[de]||{})[fe]};me("uirevision",k.uirevision),o(pe,W,me,kt),u(pe,W,me,kt,k);var Ve=Ne&&de===Ae.charAt(0),ft=be("spikecolor",Ne?W.color:void 0),St=be("spikethickness",Ne?1.5:void 0),Wt=be("spikedash",Ne?"dot":void 0),Qt=be("spikemode",Ne?"across":void 0),zt=be("spikesnap",Ne?"hovered data":void 0),$t=me("showspikes",!!Ve||!!ft||!!St||!!Wt||!!Qt||!!zt);$t||(delete W.spikecolor,delete W.spikethickness,delete W.spikedash,delete W.spikemode,delete W.spikesnap),i(pe,W,me,{letter:de,counterAxes:je[de],overlayableAxes:Pe(de,ae),grid:k.grid}),me("title.standoff"),Ce(),W._input=pe}for(I=0;I<tt.length;){fe=tt[I++],ae=p(fe),de=ae.charAt(0),r.isPlainObject(A[ae])||(A[ae]={}),pe=A[ae],W=t.newContainer(k,ae,de+"axis"),ue();var rr={letter:de,font:k.font,outerTicks:U[ae],showGrid:!X[ae],data:[],bgColor:ee,calendar:k.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:L,splomStash:((k._splomAxes||{})[de]||{})[fe]};me("uirevision",k.uirevision),W.type=Ze[fe]||"linear",u(pe,W,me,rr,k),i(pe,W,me,{letter:de,counterAxes:je[de],overlayableAxes:Pe(de,ae),grid:k.grid}),me("fixedrange"),Ce(),W._input=pe}var Pt=_("rangeslider","handleDefaults"),Lt=_("rangeselector","handleDefaults");for(I=0;I<Q.length;I++)ae=Q[I],pe=A[ae],W=k[ae],Pt(A,k,ae),W.type==="date"&&Lt(pe,W,k,V,W.calendar),me("fixedrange");for(I=0;I<V.length;I++){ae=V[I],pe=A[ae],W=k[ae];var dt=k[p(W.anchor)],lt=_("rangeslider","isVisible")(dt);me("fixedrange",lt)}h.handleDefaults(A,k,{axIds:ze.concat(tt).sort(s.idSort),axHasImage:G})}},{"../../components/color":643,"../../components/fx/helpers":679,"../../components/fx/hovermode_defaults":682,"../../lib":778,"../../plot_api/plot_template":817,"../../registry":911,"../layout_attributes":882,"./axis_defaults":830,"./axis_ids":831,"./constants":834,"./constraints":835,"./layout_attributes":842,"./position_defaults":845,"./type_defaults":853}],844:[function(e,v,M){var r=e("tinycolor2").mix,n=e("../../components/color/attributes").lightFraction,l=e("../../lib");v.exports=function(t,f,a,o){o=o||{};var u=o.dfltColor;function h(A,k){return l.coerce2(t,f,o.attributes,A,k)}var i=h("linecolor",u),s=h("linewidth"),p=a("showline",o.showLine||!!i||!!s);p||(delete f.linecolor,delete f.linewidth);var d=r(u,o.bgColor,o.blend||n).toRgbString(),y=h("gridcolor",d),b=h("gridwidth"),m=a("showgrid",o.showGrid||!!y||!!b);if(m||(delete f.gridcolor,delete f.gridwidth),!o.noZeroLine){var _=h("zerolinecolor",u),T=h("zerolinewidth"),g=a("zeroline",o.showGrid||!!_||!!T);g||(delete f.zerolinecolor,delete f.zerolinewidth)}}},{"../../components/color/attributes":642,"../../lib":778,tinycolor2:576}],845:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib");v.exports=function(c,t,f,a){var o=a.counterAxes||[],u=a.overlayableAxes||[],h=a.letter,i=a.grid,s,p,d,y;i&&(p=i._domains[h][i._axisMap[t._id]],s=i._anchors[t._id],p&&(d=i[h+"side"].split(" ")[0],y=i.domain[h][d==="right"||d==="top"?1:0])),p=p||[0,1],s=s||(r(c.position)?"free":o[0]||"free"),d=d||(h==="x"?"bottom":"left"),y=y||0;var b=n.coerce(c,t,{anchor:{valType:"enumerated",values:["free"].concat(o),dflt:s}},"anchor");b==="free"&&f("position",y),n.coerce(c,t,{side:{valType:"enumerated",values:h==="x"?["bottom","top"]:["left","right"],dflt:d}},"side");var m=!1;if(u.length&&(m=n.coerce(c,t,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!m){var _=f("domain",p);_[0]>_[1]-1/4096&&(t.domain=p),n.noneOrAll(c.domain,t.domain,p)}return f("layer"),t}},{"../../lib":778,"fast-isnumeric":241}],846:[function(e,v,M){var r=e("../../constants/alignment").FROM_BL;v.exports=function(l,c,t){t===void 0&&(t=r[l.constraintoward||"center"]);var f=[l.r2l(l.range[0]),l.r2l(l.range[1])],a=f[0]+(f[1]-f[0])*t;l.range=l._input.range=[l.l2r(a+(f[0]-a)*c),l.l2r(a+(f[1]-a)*c)],l.setScale()}},{"../../constants/alignment":745}],847:[function(e,v,M){var r=e("polybooljs"),n=e("../../registry"),l=e("../../components/drawing").dashStyle,c=e("../../components/color"),t=e("../../components/fx"),f=e("../../components/fx/helpers").makeEventData,a=e("../../components/dragelement/helpers"),o=a.freeMode,u=a.rectMode,h=a.drawMode,i=a.openMode,s=a.selectMode,p=e("../../components/shapes/draw_newshape/display_outlines"),d=e("../../components/shapes/draw_newshape/helpers").handleEllipse,y=e("../../components/shapes/draw_newshape/newshapes"),b=e("../../lib"),m=e("../../lib/polygon"),_=e("../../lib/throttle"),T=e("./axis_ids").getFromId,g=e("../../lib/clear_gl_canvases"),A=e("../../plot_api/subroutines").redrawReglTraces,k=e("./constants"),R=k.MINSELECT,L=m.filter,z=m.tester,E=e("./handle_outline").clearSelect,S=e("./helpers"),C=S.p2r,D=S.axValue,F=S.getTransform;function N(ae,fe,de,pe,W){var ue=o(W),me=u(W),be=i(W),ke=h(W),Pe=s(W),je=W==="drawline",ze=W==="drawcircle",Ze=je||ze,tt=pe.gd,Ce=tt._fullLayout,Ae=Ce._zoomlayer,Ne=pe.element.getBoundingClientRect(),qe=pe.plotinfo,At=F(qe),kt=fe-Ne.left,Ve=de-Ne.top;Ce._calcInverseTransform(tt);var ft=b.apply3DTransform(Ce._invTransform)(kt,Ve);kt=ft[0],Ve=ft[1];var St=Ce._invScaleX,Wt=Ce._invScaleY,Qt=kt,zt=Ve,$t="M"+kt+","+Ve,rr=pe.xaxes[0]._length,Pt=pe.yaxes[0]._length,Lt=pe.xaxes.concat(pe.yaxes),dt=ae.altKey&&!(h(W)&&be),lt,Te,Le,Be,et,Me,Ie;j(ae,tt,pe),ue&&(lt=L([[kt,Ve]],k.BENDPX));var He=Ae.selectAll("path.select-outline-"+qe.id).data(ke?[0]:[1,2]),Xe=Ce.newshape;He.enter().append("path").attr("class",function(It){return"select-outline select-outline-"+It+" select-outline-"+qe.id}).style(ke?{opacity:Xe.opacity/2,fill:be?void 0:Xe.fillcolor,stroke:Xe.line.color,"stroke-dasharray":l(Xe.line.dash,Xe.line.width),"stroke-width":Xe.line.width+"px"}:{}).attr("fill-rule",Xe.fillrule).classed("cursor-move",!!ke).attr("transform",At).attr("d",$t+"Z");var ht=Ae.append("path").attr("class","zoombox-corners").style({fill:c.background,stroke:c.defaultLine,"stroke-width":1}).attr("transform",At).attr("d","M0,0Z"),it=Ce._uid+k.SELECTID,Ge=[],ot=K(tt,pe.xaxes,pe.yaxes,pe.subplot);function Je(It,Ft){return It-Ft}var st;qe.fillRangeItems?st=qe.fillRangeItems:me?st=function(It,Ft){var nr=It.range={};for(et=0;et<Lt.length;et++){var We=Lt[et],Fe=We._id.charAt(0);nr[We._id]=[C(We,Ft[Fe+"min"]),C(We,Ft[Fe+"max"])].sort(Je)}}:st=function(It,Ft,nr){var We=It.lassoPoints={};for(et=0;et<Lt.length;et++){var Fe=Lt[et];We[Fe._id]=nr.filtered.map(D(Fe))}},pe.moveFn=function(It,Ft){Qt=Math.max(0,Math.min(rr,St*It+kt)),zt=Math.max(0,Math.min(Pt,Wt*Ft+Ve));var nr=Math.abs(Qt-kt),We=Math.abs(zt-Ve);if(me){var Fe,_t,Mt;if(Pe){var wt=Ce.selectdirection;switch(wt==="any"?We<Math.min(nr*.6,R)?Fe="h":nr<Math.min(We*.6,R)?Fe="v":Fe="d":Fe=wt,Fe){case"h":_t=ze?Pt/2:0,Mt=Pt;break;case"v":_t=ze?rr/2:0,Mt=rr;break}}if(ke)switch(Ce.newshape.drawdirection){case"vertical":Fe="h",_t=ze?Pt/2:0,Mt=Pt;break;case"horizontal":Fe="v",_t=ze?rr/2:0,Mt=rr;break;case"ortho":nr<We?(Fe="h",_t=Ve,Mt=zt):(Fe="v",_t=kt,Mt=Qt);break;default:Fe="d"}Fe==="h"?(Be=Ze?d(ze,[Qt,_t],[Qt,Mt]):[[kt,_t],[kt,Mt],[Qt,Mt],[Qt,_t]],Be.xmin=Ze?Qt:Math.min(kt,Qt),Be.xmax=Ze?Qt:Math.max(kt,Qt),Be.ymin=Math.min(_t,Mt),Be.ymax=Math.max(_t,Mt),ht.attr("d","M"+Be.xmin+","+(Ve-R)+"h-4v"+2*R+"h4ZM"+(Be.xmax-1)+","+(Ve-R)+"h4v"+2*R+"h-4Z")):Fe==="v"?(Be=Ze?d(ze,[_t,zt],[Mt,zt]):[[_t,Ve],[_t,zt],[Mt,zt],[Mt,Ve]],Be.xmin=Math.min(_t,Mt),Be.xmax=Math.max(_t,Mt),Be.ymin=Ze?zt:Math.min(Ve,zt),Be.ymax=Ze?zt:Math.max(Ve,zt),ht.attr("d","M"+(kt-R)+","+Be.ymin+"v-4h"+2*R+"v4ZM"+(kt-R)+","+(Be.ymax-1)+"v4h"+2*R+"v-4Z")):Fe==="d"&&(Be=Ze?d(ze,[kt,Ve],[Qt,zt]):[[kt,Ve],[kt,zt],[Qt,zt],[Qt,Ve]],Be.xmin=Math.min(kt,Qt),Be.xmax=Math.max(kt,Qt),Be.ymin=Math.min(Ve,zt),Be.ymax=Math.max(Ve,zt),ht.attr("d","M0,0Z"))}else ue&&(lt.addPt([Qt,zt]),Be=lt.filtered);pe.selectionDefs&&pe.selectionDefs.length?(Le=se(pe.mergedPolygons,Be,dt),Be.subtract=dt,Te=B(pe.selectionDefs.concat([Be]))):(Le=[Be],Te=z(Be)),p(ee(Le,be),He,pe),Pe&&_.throttle(it,k.SELECTDELAY,function(){Ge=[];var Dt,Rt;for(et=0;et<ot.length;et++)if(Me=ot[et],Rt=Me._module.selectPoints(Me,Te),Dt=re(Rt,Me),Ge.length)for(var Bt=0;Bt<Dt.length;Bt++)Ge.push(Dt[Bt]);else Ge=Dt;Ie={points:Ge},V(tt,ot,Ie),st(Ie,Be,lt),pe.gd.emit("plotly_selecting",Ie)})},pe.clickFn=function(It,Ft){if(ht.remove(),tt._fullLayout._activeShapeIndex>=0){tt._fullLayout._deactivateShape(tt);return}if(!ke){var nr=Ce.clickmode;_.done(it).then(function(){if(_.clear(it),It===2){for(He.remove(),et=0;et<ot.length;et++)Me=ot[et],Me._module.selectPoints(Me,!1);V(tt,ot),H(pe),tt.emit("plotly_deselect",null)}else nr.indexOf("select")>-1&&G(Ft,tt,pe.xaxes,pe.yaxes,pe.subplot,pe,He),nr==="event"&&tt.emit("plotly_selected",void 0);t.click(tt,Ft)}).catch(b.error)}},pe.doneFn=function(){ht.remove(),_.done(it).then(function(){_.clear(it),pe.gd.emit("plotly_selected",Ie),Be&&pe.selectionDefs&&(Be.subtract=dt,pe.selectionDefs.push(Be),pe.mergedPolygons.length=0,[].push.apply(pe.mergedPolygons,Le)),pe.doneFnCompleted&&pe.doneFnCompleted(Ge)}).catch(b.error),ke&&H(pe)}}function G(ae,fe,de,pe,W,ue,me){var be=fe._hoverdata,ke=fe._fullLayout,Pe=ke.clickmode,je=Pe.indexOf("event")>-1,ze=[],Ze,tt,Ce,Ae,Ne,qe,At,kt,Ve,ft;if(te(be)){j(ae,fe,ue),Ze=K(fe,de,pe,W);var St=J(be,Ze),Wt=St.pointNumbers.length>0;if(Wt?ie(Ze,St):Q(Ze)&&(At=oe(St))){for(me&&me.remove(),ft=0;ft<Ze.length;ft++)tt=Ze[ft],tt._module.selectPoints(tt,!1);V(fe,Ze),H(ue),je&&fe.emit("plotly_deselect",null)}else{kt=ae.shiftKey&&(At!==void 0?At:oe(St)),Ce=U(St.pointNumber,St.searchInfo,kt);var Qt=ue.selectionDefs.concat([Ce]);for(Ae=B(Qt),ft=0;ft<Ze.length;ft++)if(Ne=Ze[ft]._module.selectPoints(Ze[ft],Ae),qe=re(Ne,Ze[ft]),ze.length)for(var zt=0;zt<qe.length;zt++)ze.push(qe[zt]);else ze=qe;if(Ve={points:ze},V(fe,Ze,Ve),Ce&&ue&&ue.selectionDefs.push(Ce),me){var $t=ue.mergedPolygons,rr=i(ue.dragmode);p(ee($t,rr),me,ue)}je&&fe.emit("plotly_selected",Ve)}}}function U(ae,fe,de){return{pointNumber:ae,searchInfo:fe,subtract:de}}function X(ae){return"pointNumber"in ae&&"searchInfo"in ae}function I(ae){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(fe,de,pe,W){var ue=ae.searchInfo.cd[0].trace._expandedIndex,me=W.cd[0].trace._expandedIndex;return me===ue&&pe===ae.pointNumber},isRect:!1,degenerate:!1,subtract:ae.subtract}}function B(ae){for(var fe=[],de=X(ae[0])?0:ae[0][0][0],pe=de,W=X(ae[0])?0:ae[0][0][1],ue=W,me=0;me<ae.length;me++)if(X(ae[me]))fe.push(I(ae[me]));else{var be=m.tester(ae[me]);be.subtract=ae[me].subtract,fe.push(be),de=Math.min(de,be.xmin),pe=Math.max(pe,be.xmax),W=Math.min(W,be.ymin),ue=Math.max(ue,be.ymax)}function ke(Pe,je,ze,Ze){for(var tt=!1,Ce=0;Ce<fe.length;Ce++)fe[Ce].contains(Pe,je,ze,Ze)&&(tt=fe[Ce].subtract===!1);return tt}return{xmin:de,xmax:pe,ymin:W,ymax:ue,pts:[],contains:ke,isRect:!1,degenerate:!1}}function j(ae,fe,de){fe._fullLayout._drawing=!1;var pe=fe._fullLayout,W=de.plotinfo,ue=de.dragmode,me=pe._lastSelectedSubplot&&pe._lastSelectedSubplot===W.id,be=(ae.shiftKey||ae.altKey)&&!(h(ue)&&i(ue));me&&be&&W.selection&&W.selection.selectionDefs&&!de.selectionDefs?(de.selectionDefs=W.selection.selectionDefs,de.mergedPolygons=W.selection.mergedPolygons):(!be||!W.selection)&&H(de),me||(E(fe),pe._lastSelectedSubplot=W.id)}function H(ae){var fe=ae.dragmode,de=ae.plotinfo,pe=ae.gd;if(pe._fullLayout._activeShapeIndex>=0&&pe._fullLayout._deactivateShape(pe),h(fe)){var W=pe._fullLayout,ue=W._zoomlayer,me=ue.selectAll(".select-outline-"+de.id);if(me&&pe._fullLayout._drawing){var be=y(me,ae);be&&n.call("_guiRelayout",pe,{shapes:be}),pe._fullLayout._drawing=!1}}de.selection={},de.selection.selectionDefs=ae.selectionDefs=[],de.selection.mergedPolygons=ae.mergedPolygons=[]}function K(ae,fe,de,pe){var W=[],ue=fe.map(function(tt){return tt._id}),me=de.map(function(tt){return tt._id}),be,ke,Pe;for(Pe=0;Pe<ae.calcdata.length;Pe++)if(be=ae.calcdata[Pe],ke=be[0].trace,!(ke.visible!==!0||!ke._module||!ke._module.selectPoints))if(pe&&(ke.subplot===pe||ke.geo===pe))W.push(Ze(ke._module,be,fe[0],de[0]));else if(ke.type==="splom"&&ke._xaxes[ue[0]]&&ke._yaxes[me[0]]){var je=Ze(ke._module,be,fe[0],de[0]);je.scene=ae._fullLayout._splomScenes[ke.uid],W.push(je)}else if(ke.type==="sankey"){var ze=Ze(ke._module,be,fe[0],de[0]);W.push(ze)}else{if(ue.indexOf(ke.xaxis)===-1||me.indexOf(ke.yaxis)===-1)continue;W.push(Ze(ke._module,be,T(ae,ke.xaxis),T(ae,ke.yaxis)))}return W;function Ze(tt,Ce,Ae,Ne){return{_module:tt,cd:Ce,xaxis:Ae,yaxis:Ne}}}function te(ae){return ae&&Array.isArray(ae)&&ae[0].hoverOnBox!==!0}function J(ae,fe){var de=ae[0],pe=-1,W=[],ue,me;for(me=0;me<fe.length;me++)if(ue=fe[me],de.fullData._expandedIndex===ue.cd[0].trace._expandedIndex){if(de.hoverOnBox===!0)break;de.pointNumber!==void 0?pe=de.pointNumber:de.binNumber!==void 0&&(pe=de.binNumber,W=de.pointNumbers);break}return{pointNumber:pe,pointNumbers:W,searchInfo:ue}}function oe(ae){var fe=ae.searchInfo.cd[0].trace,de=ae.pointNumber,pe=ae.pointNumbers,W=pe.length>0,ue=W?pe[0]:de;return fe.selectedpoints?fe.selectedpoints.indexOf(ue)>-1:!1}function ie(ae,fe){var de=[],pe,W,ue,me;for(me=0;me<ae.length;me++)pe=ae[me],pe.cd[0].trace.selectedpoints&&pe.cd[0].trace.selectedpoints.length>0&&de.push(pe);if(de.length===1&&(ue=de[0]===fe.searchInfo,ue&&(W=fe.searchInfo.cd[0].trace,W.selectedpoints.length===fe.pointNumbers.length))){for(me=0;me<fe.pointNumbers.length;me++)if(W.selectedpoints.indexOf(fe.pointNumbers[me])<0)return!1;return!0}return!1}function Q(ae){var fe=0,de,pe,W;for(W=0;W<ae.length;W++)if(de=ae[W],pe=de.cd[0].trace,pe.selectedpoints&&(pe.selectedpoints.length>1||(fe+=pe.selectedpoints.length,fe>1)))return!1;return fe===1}function V(ae,fe,de){var pe,W,ue,me;for(pe=0;pe<fe.length;pe++){var be=fe[pe].cd[0].trace._fullInput,ke=ae._fullLayout._tracePreGUI[be.uid]||{};ke.selectedpoints===void 0&&(ke.selectedpoints=be._input.selectedpoints||null)}if(de){var Pe=de.points||[];for(pe=0;pe<fe.length;pe++)me=fe[pe].cd[0].trace,me._input.selectedpoints=me._fullInput.selectedpoints=[],me._fullInput!==me&&(me.selectedpoints=[]);for(pe=0;pe<Pe.length;pe++){var je=Pe[pe],ze=je.data,Ze=je.fullData;je.pointIndices?([].push.apply(ze.selectedpoints,je.pointIndices),me._fullInput!==me&&[].push.apply(Ze.selectedpoints,je.pointIndices)):(ze.selectedpoints.push(je.pointIndex),me._fullInput!==me&&Ze.selectedpoints.push(je.pointIndex))}}else for(pe=0;pe<fe.length;pe++)me=fe[pe].cd[0].trace,delete me.selectedpoints,delete me._input.selectedpoints,me._fullInput!==me&&delete me._fullInput.selectedpoints;var tt=!1;for(pe=0;pe<fe.length;pe++){W=fe[pe],ue=W.cd,me=ue[0].trace,n.traceIs(me,"regl")&&(tt=!0);var Ce=W._module,Ae=Ce.styleOnSelect||Ce.style;Ae&&(Ae(ae,ue,ue[0].node3),ue[0].nodeRangePlot3&&Ae(ae,ue,ue[0].nodeRangePlot3))}tt&&(g(ae),A(ae))}function se(ae,fe,de){var pe;return de?(pe=r.difference({regions:ae,inverted:!1},{regions:[fe],inverted:!1}),pe.regions):(pe=r.union({regions:ae,inverted:!1},{regions:[fe],inverted:!1}),pe.regions)}function re(ae,fe){if(Array.isArray(ae))for(var de=fe.cd,pe=fe.cd[0].trace,W=0;W<ae.length;W++)ae[W]=f(ae[W],pe,de);return ae}function ee(ae,fe){for(var de=[],pe=0;pe<ae.length;pe++){de[pe]=[];for(var W=0;W<ae[pe].length;W++){de[pe][W]=[],de[pe][W][0]=W?"L":"M";for(var ue=0;ue<ae[pe][W].length;ue++)de[pe][W].push(ae[pe][W][ue])}fe||de[pe].push(["Z",de[pe][0][1],de[pe][0][2]])}return de}v.exports={prepSelect:N,clearSelect:E,clearSelectionsCache:H,selectOnClick:G}},{"../../components/color":643,"../../components/dragelement/helpers":661,"../../components/drawing":665,"../../components/fx":683,"../../components/fx/helpers":679,"../../components/shapes/draw_newshape/display_outlines":728,"../../components/shapes/draw_newshape/helpers":729,"../../components/shapes/draw_newshape/newshapes":730,"../../lib":778,"../../lib/clear_gl_canvases":762,"../../lib/polygon":790,"../../lib/throttle":804,"../../plot_api/subroutines":818,"../../registry":911,"./axis_ids":831,"./constants":834,"./handle_outline":838,"./helpers":839,polybooljs:517}],848:[function(e,v,M){var r=e("d3"),n=e("d3-time-format").utcFormat,l=e("fast-isnumeric"),c=e("../../lib"),t=c.cleanNumber,f=c.ms2DateTime,a=c.dateTime2ms,o=c.ensureNumber,u=c.isArrayOrTypedArray,h=e("../../constants/numerical"),i=h.FP_SAFE,s=h.BADNUM,p=h.LOG_CLIP,d=h.ONEWEEK,y=h.ONEDAY,b=h.ONEHOUR,m=h.ONEMIN,_=h.ONESEC,T=e("./axis_ids"),g=e("./constants"),A=g.HOUR_PATTERN,k=g.WEEKDAY_PATTERN;function R(z){return Math.pow(10,z)}function L(z){return z!=null}v.exports=function(E,S){S=S||{};var C=E._id||"x",D=C.charAt(0);function F(V,se){if(V>0)return Math.log(V)/Math.LN10;if(V<=0&&se&&E.range&&E.range.length===2){var re=E.range[0],ee=E.range[1];return .5*(re+ee-2*p*Math.abs(re-ee))}else return s}function N(V,se,re,ee){if((ee||{}).msUTC&&l(V))return+V;var ae=a(V,re||E.calendar);if(ae===s)if(l(V)){V=+V;var fe=Math.floor(c.mod(V+.05,1)*10),de=Math.round(V-fe/10);ae=a(new Date(de))+fe/10}else return s;return ae}function G(V,se,re){return f(V,se,re||E.calendar)}function U(V){return E._categories[Math.round(V)]}function X(V){if(L(V)){if(E._categoriesMap===void 0&&(E._categoriesMap={}),E._categoriesMap[V]!==void 0)return E._categoriesMap[V];E._categories.push(typeof V=="number"?String(V):V);var se=E._categories.length-1;return E._categoriesMap[V]=se,se}return s}function I(V,se){for(var re=new Array(se),ee=0;ee<se;ee++){var ae=(V[0]||[])[ee],fe=(V[1]||[])[ee];re[ee]=B([ae,fe])}return re}function B(V){if(E._categoriesMap)return E._categoriesMap[V]}function j(V){var se=B(V);if(se!==void 0)return se;if(l(V))return+V}function H(V){return l(V)?+V:B(V)}function K(V,se,re){return r.round(re+se*V,2)}function te(V,se,re){return(V-re)/se}var J=function(se){return l(se)?K(se,E._m,E._b):s},oe=function(V){return te(V,E._m,E._b)};if(E.rangebreaks){var ie=D==="y";J=function(V){if(!l(V))return s;var se=E._rangebreaks.length;if(!se)return K(V,E._m,E._b);var re=ie;E.range[0]>E.range[1]&&(re=!re);for(var ee=re?-1:1,ae=ee*V,fe=0,de=0;de<se;de++){var pe=ee*E._rangebreaks[de].min,W=ee*E._rangebreaks[de].max;if(ae<pe)break;if(ae>W)fe=de+1;else{fe=ae<(pe+W)/2?de:de+1;break}}var ue=E._B[fe]||0;return isFinite(ue)?K(V,E._m2,ue):0},oe=function(V){var se=E._rangebreaks.length;if(!se)return te(V,E._m,E._b);for(var re=0,ee=0;ee<se&&!(V<E._rangebreaks[ee].pmin);ee++)V>E._rangebreaks[ee].pmax&&(re=ee+1);return te(V,E._m2,E._B[re])}}E.c2l=E.type==="log"?F:o,E.l2c=E.type==="log"?R:o,E.l2p=J,E.p2l=oe,E.c2p=E.type==="log"?function(V,se){return J(F(V,se))}:J,E.p2c=E.type==="log"?function(V){return R(oe(V))}:oe,["linear","-"].indexOf(E.type)!==-1?(E.d2r=E.r2d=E.d2c=E.r2c=E.d2l=E.r2l=t,E.c2d=E.c2r=E.l2d=E.l2r=o,E.d2p=E.r2p=function(V){return E.l2p(t(V))},E.p2d=E.p2r=oe,E.cleanPos=o):E.type==="log"?(E.d2r=E.d2l=function(V,se){return F(t(V),se)},E.r2d=E.r2c=function(V){return R(t(V))},E.d2c=E.r2l=t,E.c2d=E.l2r=o,E.c2r=F,E.l2d=R,E.d2p=function(V,se){return E.l2p(E.d2r(V,se))},E.p2d=function(V){return R(oe(V))},E.r2p=function(V){return E.l2p(t(V))},E.p2r=oe,E.cleanPos=o):E.type==="date"?(E.d2r=E.r2d=c.identity,E.d2c=E.r2c=E.d2l=E.r2l=N,E.c2d=E.c2r=E.l2d=E.l2r=G,E.d2p=E.r2p=function(V,se,re){return E.l2p(N(V,0,re))},E.p2d=E.p2r=function(V,se,re){return G(oe(V),se,re)},E.cleanPos=function(V){return c.cleanDate(V,s,E.calendar)}):E.type==="category"?(E.d2c=E.d2l=X,E.r2d=E.c2d=E.l2d=U,E.d2r=E.d2l_noadd=j,E.r2c=function(V){var se=H(V);return se!==void 0?se:E.fraction2r(.5)},E.l2r=E.c2r=o,E.r2l=H,E.d2p=function(V){return E.l2p(E.r2c(V))},E.p2d=function(V){return U(oe(V))},E.r2p=E.d2p,E.p2r=oe,E.cleanPos=function(V){return typeof V=="string"&&V!==""?V:o(V)}):E.type==="multicategory"&&(E.r2d=E.c2d=E.l2d=U,E.d2r=E.d2l_noadd=j,E.r2c=function(V){var se=j(V);return se!==void 0?se:E.fraction2r(.5)},E.r2c_just_indices=B,E.l2r=E.c2r=o,E.r2l=j,E.d2p=function(V){return E.l2p(E.r2c(V))},E.p2d=function(V){return U(oe(V))},E.r2p=E.d2p,E.p2r=oe,E.cleanPos=function(V){return Array.isArray(V)||typeof V=="string"&&V!==""?V:o(V)},E.setupMultiCategory=function(V){var se=E._traceIndices,re,ee,ae=E._matchGroup;if(ae&&E._categories.length===0){for(var fe in ae)if(fe!==C){var de=S[T.id2name(fe)];se=se.concat(de._traceIndices)}}var pe=[[0,{}],[0,{}]],W=[];for(re=0;re<se.length;re++){var ue=V[se[re]];if(D in ue){var me=ue[D],be=ue._length||c.minRowLength(me);if(u(me[0])&&u(me[1]))for(ee=0;ee<be;ee++){var ke=me[0][ee],Pe=me[1][ee];L(ke)&&L(Pe)&&(W.push([ke,Pe]),ke in pe[0][1]||(pe[0][1][ke]=pe[0][0]++),Pe in pe[1][1]||(pe[1][1][Pe]=pe[1][0]++))}}}for(W.sort(function(je,ze){var Ze=pe[0][1],tt=Ze[je[0]]-Ze[ze[0]];if(tt)return tt;var Ce=pe[1][1];return Ce[je[1]]-Ce[ze[1]]}),re=0;re<W.length;re++)X(W[re])}),E.fraction2r=function(V){var se=E.r2l(E.range[0]),re=E.r2l(E.range[1]);return E.l2r(se+V*(re-se))},E.r2fraction=function(V){var se=E.r2l(E.range[0]),re=E.r2l(E.range[1]);return(E.r2l(V)-se)/(re-se)},E.cleanRange=function(V,se){se||(se={}),V||(V="range");var re=c.nestedProperty(E,V).get(),ee,ae;if(E.type==="date"?ae=c.dfltRange(E.calendar):D==="y"?ae=g.DFLTRANGEY:ae=se.dfltRange||g.DFLTRANGEX,ae=ae.slice(),(E.rangemode==="tozero"||E.rangemode==="nonnegative")&&(ae[0]=0),!re||re.length!==2){c.nestedProperty(E,V).set(ae);return}for(E.type==="date"&&!E.autorange&&(re[0]=c.cleanDate(re[0],s,E.calendar),re[1]=c.cleanDate(re[1],s,E.calendar)),ee=0;ee<2;ee++)if(E.type==="date"){if(!c.isDateTime(re[ee],E.calendar)){E[V]=ae;break}if(E.r2l(re[0])===E.r2l(re[1])){var fe=c.constrain(E.r2l(re[0]),c.MIN_MS+1e3,c.MAX_MS-1e3);re[0]=E.l2r(fe-1e3),re[1]=E.l2r(fe+1e3);break}}else{if(!l(re[ee]))if(l(re[1-ee]))re[ee]=re[1-ee]*(ee?10:.1);else{E[V]=ae;break}if(re[ee]<-i?re[ee]=-i:re[ee]>i&&(re[ee]=i),re[0]===re[1]){var de=Math.max(1,Math.abs(re[0]*1e-6));re[0]-=de,re[1]+=de}}},E.setScale=function(V){var se=S._size;if(E.overlaying){var re=T.getFromId({_fullLayout:S},E.overlaying);E.domain=re.domain}var ee=V&&E._r?"_r":"range",ae=E.calendar;E.cleanRange(ee);var fe=E.r2l(E[ee][0],ae),de=E.r2l(E[ee][1],ae),pe=D==="y";if(pe?(E._offset=se.t+(1-E.domain[1])*se.h,E._length=se.h*(E.domain[1]-E.domain[0]),E._m=E._length/(fe-de),E._b=-E._m*de):(E._offset=se.l+E.domain[0]*se.w,E._length=se.w*(E.domain[1]-E.domain[0]),E._m=E._length/(de-fe),E._b=-E._m*fe),E._rangebreaks=[],E._lBreaks=0,E._m2=0,E._B=[],E.rangebreaks){var W,ue;if(E._rangebreaks=E.locateBreaks(Math.min(fe,de),Math.max(fe,de)),E._rangebreaks.length){for(W=0;W<E._rangebreaks.length;W++)ue=E._rangebreaks[W],E._lBreaks+=Math.abs(ue.max-ue.min);var me=pe;fe>de&&(me=!me),me&&E._rangebreaks.reverse();var be=me?-1:1;for(E._m2=be*E._length/(Math.abs(de-fe)-E._lBreaks),E._B.push(-E._m2*(pe?de:fe)),W=0;W<E._rangebreaks.length;W++)ue=E._rangebreaks[W],E._B.push(E._B[E._B.length-1]-be*E._m2*(ue.max-ue.min));for(W=0;W<E._rangebreaks.length;W++)ue=E._rangebreaks[W],ue.pmin=J(ue.min),ue.pmax=J(ue.max)}}if(!isFinite(E._m)||!isFinite(E._b)||E._length<0)throw S._replotting=!1,new Error("Something went wrong with axis scaling")},E.maskBreaks=function(V){for(var se=E.rangebreaks||[],re,ee,ae,fe,de,pe=0;pe<se.length;pe++){var W=se[pe];if(W.enabled){if(W.bounds){var ue=W.pattern;switch(re=c.simpleMap(W.bounds,ue?t:E.d2c),ee=re[0],ae=re[1],ue){case k:de=new Date(V),fe=de.getUTCDay(),ee>ae&&(ae+=7,fe<ee&&(fe+=7));break;case A:de=new Date(V);var me=de.getUTCHours(),be=de.getUTCMinutes(),ke=de.getUTCSeconds(),Pe=de.getUTCMilliseconds();fe=me+(be/60+ke/3600+Pe/36e5),ee>ae&&(ae+=24,fe<ee&&(fe+=24));break;case"":fe=V;break}if(fe>=ee&&fe<ae)return s}else for(var je=c.simpleMap(W.values,E.d2c).sort(c.sorterAsc),ze=0;ze<je.length;ze++)if(ee=je[ze],ae=ee+W.dvalue,V>=ee&&V<ae)return s}}return V},E.locateBreaks=function(V,se){var re,ee,ae,fe,de=[];if(!E.rangebreaks)return de;var pe=E.rangebreaks.slice().sort(function(Ce,Ae){return Ce.pattern===k&&Ae.pattern===A?-1:Ae.pattern===k&&Ce.pattern===A?1:0}),W=function(Ce,Ae){if(Ce=c.constrain(Ce,V,se),Ae=c.constrain(Ae,V,se),Ce!==Ae){for(var Ne=!0,qe=0;qe<de.length;qe++){var At=de[qe];Ce<At.max&&Ae>=At.min&&(Ce<At.min&&(At.min=Ce),Ae>At.max&&(At.max=Ae),Ne=!1)}Ne&&de.push({min:Ce,max:Ae})}};for(re=0;re<pe.length;re++){var ue=pe[re];if(ue.enabled)if(ue.bounds){var me=V,be=se;ue.pattern&&(me=Math.floor(me)),ee=c.simpleMap(ue.bounds,ue.pattern?t:E.r2l),ae=ee[0],fe=ee[1];var ke=new Date(me),Pe,je;switch(ue.pattern){case k:je=d,Pe=((fe<ae?7:0)+(fe-ae))*y,me+=ae*y-(ke.getUTCDay()*y+ke.getUTCHours()*b+ke.getUTCMinutes()*m+ke.getUTCSeconds()*_+ke.getUTCMilliseconds());break;case A:je=y,Pe=((fe<ae?24:0)+(fe-ae))*b,me+=ae*b-(ke.getUTCHours()*b+ke.getUTCMinutes()*m+ke.getUTCSeconds()*_+ke.getUTCMilliseconds());break;default:me=Math.min(ee[0],ee[1]),be=Math.max(ee[0],ee[1]),je=be-me,Pe=je}for(var ze=me;ze<be;ze+=je)W(ze,ze+Pe)}else for(var Ze=c.simpleMap(ue.values,E.d2c),tt=0;tt<Ze.length;tt++)ae=Ze[tt],fe=ae+ue.dvalue,W(ae,fe)}return de.sort(function(Ce,Ae){return Ce.min-Ae.min}),de},E.makeCalcdata=function(V,se,re){var ee,ae,fe,de,pe=E.type,W=pe==="date"&&V[se+"calendar"];if(se in V){if(ee=V[se],de=V._length||c.minRowLength(ee),c.isTypedArray(ee)&&(pe==="linear"||pe==="log")){if(de===ee.length)return ee;if(ee.subarray)return ee.subarray(0,de)}if(pe==="multicategory")return I(ee,de);for(ae=new Array(de),fe=0;fe<de;fe++)ae[fe]=E.d2c(ee[fe],0,W,re)}else{var ue=se+"0"in V?E.d2c(V[se+"0"],0,W):0,me=V["d"+se]?Number(V["d"+se]):1;for(ee=V[{x:"y",y:"x"}[se]],de=V._length||ee.length,ae=new Array(de),fe=0;fe<de;fe++)ae[fe]=ue+fe*me}if(E.rangebreaks)for(fe=0;fe<de;fe++)ae[fe]=E.maskBreaks(ae[fe]);return ae},E.isValidRange=function(V){return Array.isArray(V)&&V.length===2&&l(E.r2l(V[0]))&&l(E.r2l(V[1]))},E.isPtWithinRange=function(V,se){var re=E.c2l(V[D],null,se),ee=E.r2l(E.range[0]),ae=E.r2l(E.range[1]);return ee<ae?ee<=re&&re<=ae:ae<=re&&re<=ee},E._emptyCategories=function(){E._categories=[],E._categoriesMap={}},E.clearCalc=function(){var V=E._matchGroup;if(V){var se=null,re=null;for(var ee in V){var ae=S[T.id2name(ee)];if(ae._categories){se=ae._categories,re=ae._categoriesMap;break}}se&&re?(E._categories=se,E._categoriesMap=re):E._emptyCategories()}else E._emptyCategories();if(E._initialCategories)for(var fe=0;fe<E._initialCategories.length;fe++)X(E._initialCategories[fe])},E.sortByInitialCategories=function(){var V=[];if(E._emptyCategories(),E._initialCategories)for(var se=0;se<E._initialCategories.length;se++)X(E._initialCategories[se]);V=V.concat(E._traceIndices);var re=E._matchGroup;for(var ee in re)if(C!==ee){var ae=S[T.id2name(ee)];ae._categories=E._categories,ae._categoriesMap=E._categoriesMap,V=V.concat(ae._traceIndices)}return V};var Q=S._d3locale;E.type==="date"&&(E._dateFormat=Q?Q.timeFormat:n,E._extraFormat=S._extraFormat),E._separators=S.separators,E._numFormat=Q?Q.numberFormat:r.format,delete E._minDtick,delete E._forceTick0}},{"../../constants/numerical":753,"../../lib":778,"./axis_ids":831,"./constants":834,d3:169,"d3-time-format":166,"fast-isnumeric":241}],849:[function(e,v,M){var r=e("../../lib"),n=e("../../components/color").contrast,l=e("./layout_attributes"),c=e("../array_container_defaults");v.exports=function(h,i,s,p,d,y){(!y||y.pass===1)&&t(h,i,s,p,d),(!y||y.pass===2)&&f(h,i,s,p,d)};function t(u,h,i,s,p){var d=a(u),y=i("tickprefix");y&&i("showtickprefix",d);var b=i("ticksuffix",p.tickSuffixDflt);b&&i("showticksuffix",d)}function f(u,h,i,s,p){var d=a(u),y=i("tickprefix");y&&i("showtickprefix",d);var b=i("ticksuffix",p.tickSuffixDflt);b&&i("showticksuffix",d);var m=i("showticklabels");if(m){var _=p.font||{},T=h.color,g=h.ticklabelposition||"",A=g.indexOf("inside")!==-1?n(p.bgColor):T&&T!==l.color.dflt?T:_.color;if(r.coerceFont(i,"tickfont",{family:_.family,size:_.size,color:A}),i("tickangle"),s!=="category"){var k=i("tickformat");c(u,h,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:o}),h.tickformatstops.length||delete h.tickformatstops,!k&&s!=="date"&&(i("showexponent",d),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}function a(u){var h=["showexponent","showtickprefix","showticksuffix"],i=h.filter(function(p){return u[p]!==void 0}),s=function(p){return u[p]===u[i[0]]};if(i.every(s)||i.length===1)return u[i[0]]}function o(u,h){function i(p,d){return r.coerce(u,h,l.tickformatstops,p,d)}var s=i("enabled");s&&(i("dtickrange"),i("value"))}},{"../../components/color":643,"../../lib":778,"../array_container_defaults":823,"./layout_attributes":842}],850:[function(e,v,M){var r=e("../../lib"),n=e("./layout_attributes");v.exports=function(c,t,f,a){var o=r.coerce2(c,t,n,"ticklen"),u=r.coerce2(c,t,n,"tickwidth"),h=r.coerce2(c,t,n,"tickcolor",t.color),i=f("ticks",a.outerTicks||o||u||h?"outside":"");i||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":778,"./layout_attributes":842}],851:[function(e,v,M){var r=e("./clean_ticks"),n=e("../../lib").isArrayOrTypedArray;v.exports=function(c,t,f,a){function o(b){var m=c[b];return m!==void 0?m:(t._template||{})[b]}var u=o("tick0"),h=o("dtick"),i=o("tickvals"),s=n(i)?"array":h?"linear":"auto",p=f("tickmode",s);if(p==="auto")f("nticks");else if(p==="linear"){var d=t.dtick=r.dtick(h,a);t.tick0=r.tick0(u,a,t.calendar,d)}else if(a!=="multicategory"){var y=f("tickvals");y===void 0?t.tickmode="auto":f("ticktext")}}},{"../../lib":778,"./clean_ticks":833}],852:[function(e,v,M){var r=e("d3"),n=e("../../registry"),l=e("../../lib"),c=e("../../components/drawing"),t=e("./axes");v.exports=function(a,o,u,h){var i=a._fullLayout;if(o.length===0){t.redrawComponents(a);return}function s(k){var R=k.xaxis,L=k.yaxis;i._defs.select("#"+k.clipId+"> rect").call(c.setTranslate,0,0).call(c.setScale,1,1),k.plot.call(c.setTranslate,R._offset,L._offset).call(c.setScale,1,1);var z=k.plot.selectAll(".scatterlayer .trace");z.selectAll(".point").call(c.setPointGroupScale,1,1),z.selectAll(".textpoint").call(c.setTextPointsScale,1,1),z.call(c.hideOutsideRangePoints,k)}function p(k,R){var L=k.plotinfo,z=L.xaxis,E=L.yaxis,S=z._length,C=E._length,D=!!k.xr1,F=!!k.yr1,N=[];if(D){var G=l.simpleMap(k.xr0,z.r2l),U=l.simpleMap(k.xr1,z.r2l),X=G[1]-G[0],I=U[1]-U[0];N[0]=(G[0]*(1-R)+R*U[0]-G[0])/(G[1]-G[0])*S,N[2]=S*(1-R+R*I/X),z.range[0]=z.l2r(G[0]*(1-R)+R*U[0]),z.range[1]=z.l2r(G[1]*(1-R)+R*U[1])}else N[0]=0,N[2]=S;if(F){var B=l.simpleMap(k.yr0,E.r2l),j=l.simpleMap(k.yr1,E.r2l),H=B[1]-B[0],K=j[1]-j[0];N[1]=(B[1]*(1-R)+R*j[1]-B[1])/(B[0]-B[1])*C,N[3]=C*(1-R+R*K/H),E.range[0]=z.l2r(B[0]*(1-R)+R*j[0]),E.range[1]=E.l2r(B[1]*(1-R)+R*j[1])}else N[1]=0,N[3]=C;t.drawOne(a,z,{skipTitle:!0}),t.drawOne(a,E,{skipTitle:!0}),t.redrawComponents(a,[z._id,E._id]);var te=D?S/N[2]:1,J=F?C/N[3]:1,oe=D?N[0]:0,ie=F?N[1]:0,Q=D?N[0]/N[2]*S:0,V=F?N[1]/N[3]*C:0,se=z._offset-Q,re=E._offset-V;L.clipRect.call(c.setTranslate,oe,ie).call(c.setScale,1/te,1/J),L.plot.call(c.setTranslate,se,re).call(c.setScale,te,J),c.setPointGroupScale(L.zoomScalePts,1/te,1/J),c.setTextPointsScale(L.zoomScaleTxt,1/te,1/J)}var d;h&&(d=h());function y(){for(var k={},R=0;R<o.length;R++){var L=o[R],z=L.plotinfo.xaxis,E=L.plotinfo.yaxis;L.xr1&&(k[z._name+".range"]=L.xr1.slice()),L.yr1&&(k[E._name+".range"]=L.yr1.slice())}return d&&d(),n.call("relayout",a,k).then(function(){for(var S=0;S<o.length;S++)s(o[S].plotinfo)})}function b(){for(var k={},R=0;R<o.length;R++){var L=o[R],z=L.plotinfo.xaxis,E=L.plotinfo.yaxis;L.xr0&&(k[z._name+".range"]=L.xr0.slice()),L.yr0&&(k[E._name+".range"]=L.yr0.slice())}return n.call("relayout",a,k).then(function(){for(var S=0;S<o.length;S++)s(o[S].plotinfo)})}var m,_,T,g=r.ease(u.easing);a._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(T),T=null,b()});function A(){_=Date.now();for(var k=Math.min(1,(_-m)/u.duration),R=g(k),L=0;L<o.length;L++)p(o[L],R);_-m>u.duration?(y(),T=window.cancelAnimationFrame(A)):T=window.requestAnimationFrame(A)}return m=Date.now(),T=window.requestAnimationFrame(A),Promise.resolve()}},{"../../components/drawing":665,"../../lib":778,"../../registry":911,"./axes":828,d3:169}],853:[function(e,v,M){var r=e("../../registry").traceIs,n=e("./axis_autotype");v.exports=function(o,u,h,i){h("autotypenumbers",i.autotypenumbersDflt);var s=h("type",(i.splomStash||{}).type);s==="-"&&(l(u,i.data),u.type==="-"?u.type="linear":o.type=u.type)};function l(a,o){if(a.type==="-"){var u=a._id,h=u.charAt(0),i;u.indexOf("scene")!==-1&&(u=h);var s=c(o,u,h);if(s){if(s.type==="histogram"&&h==={v:"y",h:"x"}[s.orientation||"v"]){a.type="linear";return}var p=h+"calendar",d=s[p],y={noMultiCategory:!r(s,"cartesian")||r(s,"noMultiCategory")};if(s.type==="box"&&s._hasPreCompStats&&h==={h:"x",v:"y"}[s.orientation||"v"]&&(y.noMultiCategory=!0),y.autotypenumbers=a.autotypenumbers,f(s,h)){var b=t(s),m=[];for(i=0;i<o.length;i++){var _=o[i];!r(_,"box-violin")||(_[h+"axis"]||h)!==u||(_[b]!==void 0?m.push(_[b][0]):_.name!==void 0?m.push(_.name):m.push("text"),_[p]!==d&&(d=void 0))}a.type=n(m,d,y)}else if(s.type==="splom"){var T=s.dimensions,g=T[s._axesDim[u]];g.visible&&(a.type=n(g.values,d,y))}else a.type=n(s[h]||[s[h+"0"]],d,y)}}}function c(a,o,u){for(var h=0;h<a.length;h++){var i=a[h];if(i.type==="splom"&&i._length>0&&(i["_"+u+"axes"]||{})[o])return i;if((i[u+"axis"]||u)===o){if(f(i,u))return i;if((i[u]||[]).length||i[u+"0"])return i}}}function t(a){return{v:"x",h:"y"}[a.orientation||"v"]}function f(a,o){var u=t(a),h=r(a,"box-violin"),i=r(a._fullInput||{},"candlestick");return h&&!i&&o===u&&a[u]===void 0&&a[u+"0"]===void 0}},{"../../registry":911,"./axis_autotype":829}],854:[function(e,v,M){var r=e("../registry"),n=e("../lib");M.manageCommandObserver=function(o,u,h,i){var s={},p=!0;u&&u._commandObserver&&(s=u._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var d=M.hasSimpleAPICommandBindings(o,h,s.lookupTable);if(u&&u._commandObserver){if(d)return s;if(u._commandObserver.remove)return u._commandObserver.remove(),u._commandObserver=null,s}if(d){l(o,d,s.cache),s.check=function(){if(p){var _=l(o,d,s.cache);return _.changed&&i&&s.lookupTable[_.value]!==void 0&&(s.disable(),Promise.resolve(i({value:_.value,type:d.type,prop:d.prop,traces:d.traces,index:s.lookupTable[_.value]})).then(s.enable,s.enable)),_.changed}};for(var y=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],b=0;b<y.length;b++)o._internalOn(y[b],s.check);s.remove=function(){for(var m=0;m<y.length;m++)o._removeInternalListener(y[m],s.check)}}else n.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){p=!1},s.enable=function(){p=!0},u&&(u._commandObserver=s),s},M.hasSimpleAPICommandBindings=function(o,u,h){var i,s=u.length,p;for(i=0;i<s;i++){var d,y=u[i],b=y.method,m=y.args;if(Array.isArray(m)||(m=[]),!b)return!1;var _=M.computeAPICommandBindings(o,b,m);if(_.length!==1)return!1;if(!p)p=_[0],Array.isArray(p.traces)&&p.traces.sort();else{if(d=_[0],d.type!==p.type||d.prop!==p.prop)return!1;if(Array.isArray(p.traces))if(Array.isArray(d.traces)){d.traces.sort();for(var T=0;T<p.traces.length;T++)if(p.traces[T]!==d.traces[T])return!1}else return!1;else if(d.prop!==p.prop)return!1}d=_[0];var g=d.value;if(Array.isArray(g))if(g.length===1)g=g[0];else return!1;h&&(h[g]=i)}return p};function l(o,u,h){var i,s,p,d=!1;if(u.type==="data")i=o._fullData[u.traces!==null?u.traces[0]:0];else if(u.type==="layout")i=o._fullLayout;else return!1;return s=n.nestedProperty(i,u.prop).get(),p=h[u.type]=h[u.type]||{},p.hasOwnProperty(u.prop)&&p[u.prop]!==s&&(d=!0),p[u.prop]=s,{changed:d,value:s}}M.executeAPICommand=function(o,u,h){if(u==="skip")return Promise.resolve();var i=r.apiMethodRegistry[u],s=[o];Array.isArray(h)||(h=[]);for(var p=0;p<h.length;p++)s.push(h[p]);return i.apply(null,s).catch(function(d){return n.warn("API call to Plotly."+u+" rejected.",d),Promise.reject(d)})},M.computeAPICommandBindings=function(o,u,h){var i;switch(Array.isArray(h)||(h=[]),u){case"restyle":i=f(o,h);break;case"relayout":i=t(o,h);break;case"update":i=f(o,[h[0],h[2]]).concat(t(o,[h[1]]));break;case"animate":i=c(o,h);break;default:i=[]}return i};function c(o,u){return Array.isArray(u[0])&&u[0].length===1&&["string","number"].indexOf(typeof u[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:u[0][0].toString()}]:[]}function t(o,u){var h=[],i=u[0],s={};if(typeof i=="string")s[i]=u[1];else if(n.isPlainObject(i))s=i;else return h;return a(s,function(p,d,y){h.push({type:"layout",prop:p,value:y})},"",0),h}function f(o,u){var h,i,s,p,d=[];if(i=u[0],s=u[1],h=u[2],p={},typeof i=="string")p[i]=s;else if(n.isPlainObject(i))p=i,h===void 0&&(h=s);else return d;return h===void 0&&(h=null),a(p,function(y,b,m){var _,T;if(Array.isArray(m)){T=m.slice();var g=Math.min(T.length,o.data.length);h&&(g=Math.min(g,h.length)),_=[];for(var A=0;A<g;A++)_[A]=h?h[A]:A}else T=m,_=h?h.slice():null;if(_===null)Array.isArray(T)&&(T=T[0]);else if(Array.isArray(_)){if(!Array.isArray(T)){var k=T;T=[];for(var R=0;R<_.length;R++)T[R]=k}T.length=Math.min(_.length,T.length)}d.push({type:"data",prop:y,traces:_,value:T})},"",0),d}function a(o,u,h,i){Object.keys(o).forEach(function(s){var p=o[s];if(s[0]!=="_"){var d=h+(i>0?".":"")+s;n.isPlainObject(p)?a(p,u,d,i+1):u(d,s,p)}})}},{"../lib":778,"../registry":911}],855:[function(e,v,M){var r=e("../lib/extend").extendFlat;M.attributes=function(n,l){n=n||{},l=l||{};var c={valType:"info_array",editType:n.editType,items:[{valType:"number",min:0,max:1,editType:n.editType},{valType:"number",min:0,max:1,editType:n.editType}],dflt:[0,1]};n.name&&n.name+"",n.trace,l.description&&""+l.description;var t={x:r({},c,{}),y:r({},c,{}),editType:n.editType};return n.noGridCell||(t.row={valType:"integer",min:0,dflt:0,editType:n.editType},t.column={valType:"integer",min:0,dflt:0,editType:n.editType}),t},M.defaults=function(n,l,c,t){var f=t&&t.x||[0,1],a=t&&t.y||[0,1],o=l.grid;if(o){var u=c("domain.column");u!==void 0&&(u<o.columns?f=o._domains.x[u]:delete n.domain.column);var h=c("domain.row");h!==void 0&&(h<o.rows?a=o._domains.y[h]:delete n.domain.row)}var i=c("domain.x",f),s=c("domain.y",a);i[0]<i[1]||(n.domain.x=f.slice()),s[0]<s[1]||(n.domain.y=a.slice())}},{"../lib/extend":768}],856:[function(e,v,M){v.exports=function(r){var n=r.editType,l=r.colorEditType;l===void 0&&(l=n);var c={family:{valType:"string",noBlank:!0,strict:!0,editType:n},size:{valType:"number",min:1,editType:n},color:{valType:"color",editType:l},editType:n};return r.arrayOk&&(c.family.arrayOk=!0,c.size.arrayOk=!0,c.color.arrayOk=!0),c}},{}],857:[function(e,v,M){v.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],858:[function(e,v,M){M.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"},M.axesNames=["lonaxis","lataxis"],M.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},M.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},M.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},M.clipPad=.001,M.precision=.1,M.landColor="#F0DC82",M.waterColor="#3399FF",M.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},M.sphereSVG={type:"Sphere"},M.fillLayers={ocean:1,land:1,lakes:1},M.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},M.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],M.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],M.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],859:[function(e,v,M){var r=e("d3"),n=e("../../registry"),l=e("../../lib"),c=l.strTranslate,t=e("../../components/color"),f=e("../../components/drawing"),a=e("../../components/fx"),o=e("../plots"),u=e("../cartesian/axes"),h=e("../cartesian/autorange").getAutoRange,i=e("../../components/dragelement"),s=e("../cartesian/select").prepSelect,p=e("../cartesian/select").clearSelect,d=e("../cartesian/select").selectOnClick,y=e("./zoom"),b=e("./constants"),m=e("../../lib/geo_location_utils"),_=e("../../lib/topojson_utils"),T=e("topojson-client").feature;e("./projections")(r);function g(z){this.id=z.id,this.graphDiv=z.graphDiv,this.container=z.container,this.topojsonURL=z.topojsonURL,this.isStatic=z.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var A=g.prototype;v.exports=function(E){return new g(E)},A.plot=function(z,E,S){var C=this,D=E[this.id],F=[],N=!1;for(var G in b.layerNameToAdjective)if(G!=="frame"&&D["show"+G]){N=!0;break}for(var U=0;U<z.length;U++)if(z[0][0].trace.locationmode){N=!0;break}if(N){var X=_.getTopojsonName(D);(C.topojson===null||X!==C.topojsonName)&&(C.topojsonName=X,PlotlyGeoAssets.topojson[C.topojsonName]===void 0&&F.push(C.fetchTopojson()))}F=F.concat(m.fetchTraceGeoData(z)),S.push(new Promise(function(I,B){Promise.all(F).then(function(){C.topojson=PlotlyGeoAssets.topojson[C.topojsonName],C.update(z,E),I()}).catch(B)}))},A.fetchTopojson=function(){var z=this,E=_.getTopojsonPath(z.topojsonURL,z.topojsonName);return new Promise(function(S,C){r.json(E,function(D,F){if(D)return D.status===404?C(new Error(["plotly.js could not find topojson file at",E,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):C(new Error(["unexpected error while fetching topojson file at",E].join(" ")));PlotlyGeoAssets.topojson[z.topojsonName]=F,S()})})},A.update=function(z,E){var S=E[this.id];this.hasChoropleth=!1;for(var C=0;C<z.length;C++){var D=z[C],F=D[0].trace;F.type==="choropleth"&&(this.hasChoropleth=!0),F.visible===!0&&F._length>0&&F._module.calcGeoJSON(D,E)}var N=this.updateProjection(z,E);if(!N){(!this.viewInitial||this.scope!==S.scope)&&this.saveViewInitial(S),this.scope=S.scope,this.updateBaseLayers(E,S),this.updateDims(E,S),this.updateFx(E,S),o.generalUpdatePerTraceModule(this.graphDiv,this,z,S);var G=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=G.selectAll(".point"),this.dataPoints.text=G.selectAll("text"),this.dataPaths.line=G.selectAll(".js-line");var U=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=U.selectAll("path"),this.render()}},A.updateProjection=function(z,E){var S=this.graphDiv,C=E[this.id],D=E._size,F=C.domain,N=C.projection,G=C.lonaxis,U=C.lataxis,X=G._ax,I=U._ax,B=this.projection=k(C),j=[[D.l+D.w*F.x[0],D.t+D.h*(1-F.y[1])],[D.l+D.w*F.x[1],D.t+D.h*(1-F.y[0])]],H=C.center||{},K=N.rotation||{},te=G.range||[],J=U.range||[];if(C.fitbounds){X._length=j[1][0]-j[0][0],I._length=j[1][1]-j[0][1],X.range=h(S,X),I.range=h(S,I);var oe=(X.range[0]+X.range[1])/2,ie=(I.range[0]+I.range[1])/2;if(C._isScoped)H={lon:oe,lat:ie};else if(C._isClipped){H={lon:oe,lat:ie},K={lon:oe,lat:ie,roll:K.roll};var Q=N.type,V=b.lonaxisSpan[Q]/2||180,se=b.lataxisSpan[Q]/2||90;te=[oe-V,oe+V],J=[ie-se,ie+se]}else H={lon:oe,lat:ie},K={lon:oe,lat:K.lat,roll:K.roll}}B.center([H.lon-K.lon,H.lat-K.lat]).rotate([-K.lon,-K.lat,K.roll]).parallels(N.parallels);var re=L(te,J);B.fitExtent(j,re);var ee=this.bounds=B.getBounds(re),ae=this.fitScale=B.scale(),fe=B.translate();if(!isFinite(ee[0][0])||!isFinite(ee[0][1])||!isFinite(ee[1][0])||!isFinite(ee[1][1])||isNaN(fe[0])||isNaN(fe[0])){for(var de=["fitbounds","projection.rotation","center","lonaxis.range","lataxis.range"],pe="Invalid geo settings, relayout'ing to default view.",W={},ue=0;ue<de.length;ue++)W[this.id+"."+de[ue]]=null;return this.viewInitial=null,l.warn(pe),S._promises.push(n.call("relayout",S,W)),pe}if(C.fitbounds){var me=B.getBounds(L(X.range,I.range)),be=Math.min((ee[1][0]-ee[0][0])/(me[1][0]-me[0][0]),(ee[1][1]-ee[0][1])/(me[1][1]-me[0][1]));isFinite(be)?B.scale(be*ae):l.warn("Something went wrong during"+this.id+"fitbounds computations.")}else B.scale(N.scale*ae);var ke=this.midPt=[(ee[0][0]+ee[1][0])/2,(ee[0][1]+ee[1][1])/2];if(B.translate([fe[0]+(ke[0]-fe[0]),fe[1]+(ke[1]-fe[1])]).clipExtent(ee),C._isAlbersUsa){var Pe=B([H.lon,H.lat]),je=B.translate();B.translate([je[0]-(Pe[0]-je[0]),je[1]-(Pe[1]-je[1])])}},A.updateBaseLayers=function(z,E){var S=this,C=S.topojson,D=S.layers,F=S.basePaths;function N(j){return j==="lonaxis"||j==="lataxis"}function G(j){return!!b.lineLayers[j]}function U(j){return!!b.fillLayers[j]}var X=this.hasChoropleth?b.layersForChoropleth:b.layers,I=X.filter(function(j){return G(j)||U(j)?E["show"+j]:N(j)?E[j].showgrid:!0}),B=S.framework.selectAll(".layer").data(I,String);B.exit().each(function(j){delete D[j],delete F[j],r.select(this).remove()}),B.enter().append("g").attr("class",function(j){return"layer "+j}).each(function(j){var H=D[j]=r.select(this);j==="bg"?S.bgRect=H.append("rect").style("pointer-events","all"):N(j)?F[j]=H.append("path").style("fill","none"):j==="backplot"?H.append("g").classed("choroplethlayer",!0):j==="frontplot"?H.append("g").classed("scatterlayer",!0):G(j)?F[j]=H.append("path").style("fill","none").style("stroke-miterlimit",2):U(j)&&(F[j]=H.append("path").style("stroke","none"))}),B.order(),B.each(function(j){var H=F[j],K=b.layerNameToAdjective[j];j==="frame"?H.datum(b.sphereSVG):G(j)||U(j)?H.datum(T(C,C.objects[j])):N(j)&&H.datum(R(j,E,z)).call(t.stroke,E[j].gridcolor).call(f.dashLine,"",E[j].gridwidth),G(j)?H.call(t.stroke,E[K+"color"]).call(f.dashLine,"",E[K+"width"]):U(j)&&H.call(t.fill,E[K+"color"])})},A.updateDims=function(z,E){var S=this.bounds,C=(E.framewidth||0)/2,D=S[0][0]-C,F=S[0][1]-C,N=S[1][0]-D+C,G=S[1][1]-F+C;f.setRect(this.clipRect,D,F,N,G),this.bgRect.call(f.setRect,D,F,N,G).call(t.fill,E.bgcolor),this.xaxis._offset=D,this.xaxis._length=N,this.yaxis._offset=F,this.yaxis._length=G},A.updateFx=function(z,E){var S=this,C=S.graphDiv,D=S.bgRect,F=z.dragmode,N=z.clickmode;if(S.isStatic)return;function G(){var B=S.viewInitial,j={};for(var H in B)j[S.id+"."+H]=B[H];n.call("_guiRelayout",C,j),C.emit("plotly_doubleclick",null)}function U(B){return S.projection.invert([B[0]+S.xaxis._offset,B[1]+S.yaxis._offset])}var X;F==="select"?X=function(B,j){var H=B.range={};H[S.id]=[U([j.xmin,j.ymin]),U([j.xmax,j.ymax])]}:F==="lasso"&&(X=function(B,j,H){var K=B.lassoPoints={};K[S.id]=H.filtered.map(U)});var I={element:S.bgRect.node(),gd:C,plotinfo:{id:S.id,xaxis:S.xaxis,yaxis:S.yaxis,fillRangeItems:X},xaxes:[S.xaxis],yaxes:[S.yaxis],subplot:S.id,clickFn:function(B){B===2&&p(C)}};F==="pan"?(D.node().onmousedown=null,D.call(y(S,E)),D.on("dblclick.zoom",G),C._context._scrollZoom.geo||D.on("wheel.zoom",null)):(F==="select"||F==="lasso")&&(D.on(".zoom",null),I.prepFn=function(B,j,H){s(B,j,H,I,F)},i.init(I)),D.on("mousemove",function(){var B=S.projection.invert(r.mouse(this));if(!B||isNaN(B[0])||isNaN(B[1]))return i.unhover(C,r.event);S.xaxis.p2c=function(){return B[0]},S.yaxis.p2c=function(){return B[1]},a.hover(C,r.event,S.id)}),D.on("mouseout",function(){C._dragging||i.unhover(C,r.event)}),D.on("click",function(){F!=="select"&&F!=="lasso"&&(N.indexOf("select")>-1&&d(r.event,C,[S.xaxis],[S.yaxis],S.id,I),N.indexOf("event")>-1&&a.click(C,r.event))})},A.makeFramework=function(){var z=this,E=z.graphDiv,S=E._fullLayout,C="clip"+S._uid+z.id;z.clipDef=S._clips.append("clipPath").attr("id",C),z.clipRect=z.clipDef.append("rect"),z.framework=r.select(z.container).append("g").attr("class","geo "+z.id).call(f.setClipUrl,C,E),z.project=function(D){var F=z.projection(D);return F?[F[0]-z.xaxis._offset,F[1]-z.yaxis._offset]:[null,null]},z.xaxis={_id:"x",c2p:function(D){return z.project(D)[0]}},z.yaxis={_id:"y",c2p:function(D){return z.project(D)[1]}},z.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},u.setConvert(z.mockAxis,S)},A.saveViewInitial=function(z){var E=z.center||{},S=z.projection,C=S.rotation||{};this.viewInitial={fitbounds:z.fitbounds,"projection.scale":S.scale};var D;z._isScoped?D={"center.lon":E.lon,"center.lat":E.lat}:z._isClipped?D={"projection.rotation.lon":C.lon,"projection.rotation.lat":C.lat}:D={"center.lon":E.lon,"center.lat":E.lat,"projection.rotation.lon":C.lon},l.extendFlat(this.viewInitial,D)},A.render=function(){var z=this.projection,E=z.getPath(),S;function C(F){var N=z(F.lonlat);return N?c(N[0],N[1]):null}function D(F){return z.isLonLatOverEdges(F.lonlat)?"none":null}for(S in this.basePaths)this.basePaths[S].attr("d",E);for(S in this.dataPaths)this.dataPaths[S].attr("d",function(F){return E(F.geojson)});for(S in this.dataPoints)this.dataPoints[S].attr("display",D).attr("transform",C)};function k(z){for(var E=z.projection,S=E.type,C=r.geo[b.projNames[S]](),D=z._isClipped?b.lonaxisSpan[S]/2:null,F=["center","rotate","parallels","clipExtent"],N=function(X){return X?C:[]},G=0;G<F.length;G++){var U=F[G];typeof C[U]!="function"&&(C[U]=N)}return C.isLonLatOverEdges=function(X){if(C(X)===null)return!0;if(D){var I=C.rotate(),B=r.geo.distance(X,[-I[0],-I[1]]),j=D*Math.PI/180;return B>j}else return!1},C.getPath=function(){return r.geo.path().projection(C)},C.getBounds=function(X){return C.getPath().bounds(X)},C.fitExtent=function(X,I){var B=X[1][0]-X[0][0],j=X[1][1]-X[0][1],H=C.clipExtent&&C.clipExtent();C.scale(150).translate([0,0]),H&&C.clipExtent(null);var K=C.getBounds(I),te=Math.min(B/(K[1][0]-K[0][0]),j/(K[1][1]-K[0][1])),J=+X[0][0]+(B-te*(K[1][0]+K[0][0]))/2,oe=+X[0][1]+(j-te*(K[1][1]+K[0][1]))/2;return H&&C.clipExtent(H),C.scale(te*150).translate([J,oe])},C.precision(b.precision),D&&C.clipAngle(D-b.clipPad),C}function R(z,E,S){var C=1e-6,D=2.5,F=E[z],N=b.scopeDefaults[E.scope],G,U,X;z==="lonaxis"?(G=N.lonaxisRange,U=N.lataxisRange,X=function(ie,Q){return[ie,Q]}):z==="lataxis"&&(G=N.lataxisRange,U=N.lonaxisRange,X=function(ie,Q){return[Q,ie]});var I={type:"linear",range:[G[0],G[1]-C],tick0:F.tick0,dtick:F.dtick};u.setConvert(I,S);var B=u.calcTicks(I);!E.isScoped&&z==="lonaxis"&&B.pop();for(var j=B.length,H=new Array(j),K=0;K<j;K++)for(var te=B[K].x,J=H[K]=[],oe=U[0];oe<U[1]+D;oe+=D)J.push(X(te,oe));return{type:"MultiLineString",coordinates:H}}function L(z,E){var S=b.clipPad,C=z[0]+S,D=z[1]-S,F=E[0]+S,N=E[1]-S;C>0&&D<0&&(D+=360);var G=(D-C)/4;return{type:"Polygon",coordinates:[[[C,F],[C,N],[C+G,N],[C+2*G,N],[C+3*G,N],[D,N],[D,F],[D-G,F],[D-2*G,F],[D-3*G,F],[C,F]]]}}},{"../../components/color":643,"../../components/dragelement":662,"../../components/drawing":665,"../../components/fx":683,"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/topojson_utils":806,"../../registry":911,"../cartesian/autorange":827,"../cartesian/axes":828,"../cartesian/select":847,"../plots":891,"./constants":858,"./projections":863,"./zoom":864,d3:169,"topojson-client":579}],860:[function(e,v,M){var r=e("../../plots/get_data").getSubplotCalcData,n=e("../../lib").counterRegex,l=e("./geo"),c="geo",t=n(c),f={};f[c]={valType:"subplotid",dflt:c,editType:"calc"};function a(h){for(var i=h._fullLayout,s=h.calcdata,p=i._subplots[c],d=0;d<p.length;d++){var y=p[d],b=r(s,c,y),m=i[y],_=m._subplot;_||(_=l({id:y,graphDiv:h,container:i._geolayer.node(),topojsonURL:h._context.topojsonURL,staticPlot:h._context.staticPlot}),i[y]._subplot=_),_.plot(b,i,h._promises)}}function o(h,i,s,p){for(var d=p._subplots[c]||[],y=0;y<d.length;y++){var b=d[y],m=p[b]._subplot;!i[b]&&m&&(m.framework.remove(),m.clipDef.remove())}}function u(h){for(var i=h._fullLayout,s=i._subplots[c],p=0;p<s.length;p++){var d=i[s[p]],y=d._subplot;y.updateFx(i,d)}}v.exports={attr:c,name:c,idRoot:c,idRegex:t,attrRegex:t,attributes:f,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:a,updateFx:u,clean:o}},{"../../lib":778,"../../plots/get_data":865,"./geo":859,"./layout_attributes":861,"./layout_defaults":862}],861:[function(e,v,M){var r=e("../../components/color/attributes"),n=e("../domain").attributes,l=e("./constants"),c=e("../../plot_api/edit_types").overrideAll,t={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:r.lightLine},gridwidth:{valType:"number",min:0,dflt:1}},f=v.exports=c({domain:n({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(l.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(l.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:r.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:l.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:l.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:l.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:l.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:r.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:r.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:r.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:r.background},lonaxis:t,lataxis:t},"plot","from-root");f.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":642,"../../plot_api/edit_types":810,"../domain":855,"./constants":858}],862:[function(e,v,M){var r=e("../../lib"),n=e("../subplot_defaults"),l=e("../get_data").getSubplotData,c=e("./constants"),t=e("./layout_attributes"),f=c.axesNames;v.exports=function(u,h,i){n(u,h,i,{type:"geo",attributes:t,handleDefaults:a,fullData:i,partition:"y"})};function a(o,u,h,i){var s=l(i.fullData,"geo",i.id),p=s.map(function(Q){return Q._expandedIndex}),d=h("resolution"),y=h("scope"),b=c.scopeDefaults[y],m=h("projection.type",b.projType),_=u._isAlbersUsa=m==="albers usa";_&&(y=u.scope="usa");var T=u._isScoped=y!=="world",g=u._isConic=m.indexOf("conic")!==-1,A=u._isClipped=!!c.lonaxisSpan[m];if(o.visible===!1){var k=r.extendDeep({},u._template);k.showcoastlines=!1,k.showcountries=!1,k.showframe=!1,k.showlakes=!1,k.showland=!1,k.showocean=!1,k.showrivers=!1,k.showsubunits=!1,k.lonaxis&&(k.lonaxis.showgrid=!1),k.lataxis&&(k.lataxis.showgrid=!1),u._template=k}for(var R=h("visible"),L,z=0;z<f.length;z++){var E=f[z],S=[30,10][z],C;if(T)C=b[E+"Range"];else{var D=c[E+"Span"],F=(D[m]||D["*"])/2,N=h("projection.rotation."+E.substr(0,3),b.projRotate[z]);C=[N-F,N+F]}var G=h(E+".range",C);h(E+".tick0"),h(E+".dtick",S),L=h(E+".showgrid",R?void 0:!1),L&&(h(E+".gridcolor"),h(E+".gridwidth")),u[E]._ax={type:"linear",_id:E.slice(0,3),_traceIndices:p,setScale:r.identity,c2l:r.identity,r2l:r.identity,autorange:!0,range:G.slice(),_m:1,_input:{}}}var U=u.lonaxis.range,X=u.lataxis.range,I=U[0],B=U[1];I>0&&B<0&&(B+=360);var j=(I+B)/2,H;if(!_){var K=T?b.projRotate:[j,0,0];H=h("projection.rotation.lon",K[0]),h("projection.rotation.lat",K[1]),h("projection.rotation.roll",K[2]),L=h("showcoastlines",!T&&R),L&&(h("coastlinecolor"),h("coastlinewidth")),L=h("showocean",R?void 0:!1),L&&h("oceancolor")}var te,J;if(_?(te=-96.6,J=38.7):(te=T?j:H,J=(X[0]+X[1])/2),h("center.lon",te),h("center.lat",J),g){var oe=b.projParallels||[0,60];h("projection.parallels",oe)}h("projection.scale"),L=h("showland",R?void 0:!1),L&&h("landcolor"),L=h("showlakes",R?void 0:!1),L&&h("lakecolor"),L=h("showrivers",R?void 0:!1),L&&(h("rivercolor"),h("riverwidth")),L=h("showcountries",T&&y!=="usa"&&R),L&&(h("countrycolor"),h("countrywidth")),(y==="usa"||y==="north america"&&d===50)&&(h("showsubunits",R),h("subunitcolor"),h("subunitwidth")),T||(L=h("showframe",R),L&&(h("framecolor"),h("framewidth"))),h("bgcolor");var ie=h("fitbounds");ie&&(delete u.projection.scale,T?(delete u.center.lon,delete u.center.lat):A?(delete u.center.lon,delete u.center.lat,delete u.projection.rotation.lon,delete u.projection.rotation.lat,delete u.lonaxis.range,delete u.lataxis.range):(delete u.center.lon,delete u.center.lat,delete u.projection.rotation.lon))}},{"../../lib":778,"../get_data":865,"../subplot_defaults":905,"./constants":858,"./layout_attributes":861}],863:[function(e,v,M){function r(n){n.geo.project=function(oe,ie){var Q=ie.stream;if(!Q)throw new Error("not yet supported");return(oe&&t.hasOwnProperty(oe.type)?t[oe.type]:c)(oe,Q)};function l(oe,ie){return{type:"Feature",id:oe.id,properties:oe.properties,geometry:c(oe.geometry,ie)}}function c(oe,ie){if(!oe)return null;if(oe.type==="GeometryCollection")return{type:"GeometryCollection",geometries:object.geometries.map(function(V){return c(V,ie)})};if(!i.hasOwnProperty(oe.type))return null;var Q=i[oe.type];return n.geo.stream(oe,ie(Q)),Q.result()}var t={Feature:l,FeatureCollection:function(oe,ie){return{type:"FeatureCollection",features:oe.features.map(function(Q){return l(Q,ie)})}}},f=[],a=[],o={point:function(oe,ie){f.push([oe,ie])},result:function(){var oe=f.length?f.length<2?{type:"Point",coordinates:f[0]}:{type:"MultiPoint",coordinates:f}:null;return f=[],oe}},u={lineStart:s,point:function(oe,ie){f.push([oe,ie])},lineEnd:function(){f.length&&(a.push(f),f=[])},result:function(){var oe=a.length?a.length<2?{type:"LineString",coordinates:a[0]}:{type:"MultiLineString",coordinates:a}:null;return a=[],oe}},h={polygonStart:s,lineStart:s,point:function(oe,ie){f.push([oe,ie])},lineEnd:function(){var oe=f.length;if(oe){do f.push(f[0].slice());while(++oe<4);a.push(f),f=[]}},polygonEnd:s,result:function(){if(!a.length)return null;var oe=[],ie=[];return a.forEach(function(Q){p(Q)?oe.push([Q]):ie.push(Q)}),ie.forEach(function(Q){var V=Q[0];oe.some(function(se){if(d(se[0],V))return se.push(Q),!0})||oe.push([Q])}),a=[],oe.length?oe.length>1?{type:"MultiPolygon",coordinates:oe}:{type:"Polygon",coordinates:oe[0]}:null}},i={Point:o,MultiPoint:o,LineString:u,MultiLineString:u,Polygon:h,MultiPolygon:h,Sphere:h};function s(){}function p(oe){if((Q=oe.length)<4)return!1;for(var ie=0,Q,V=oe[Q-1][1]*oe[0][0]-oe[Q-1][0]*oe[0][1];++ie<Q;)V+=oe[ie-1][1]*oe[ie][0]-oe[ie-1][0]*oe[ie][1];return V<=0}function d(oe,ie){for(var Q=ie[0],V=ie[1],se=!1,re=0,ee=oe.length,ae=ee-1;re<ee;ae=re++){var fe=oe[re],de=fe[0],pe=fe[1],W=oe[ae],ue=W[0],me=W[1];pe>V^me>V&&Q<(ue-de)*(V-pe)/(me-pe)+de&&(se=!se)}return se}var y=1e-6,b=y*y,m=Math.PI,_=m/2,T=m/180,g=180/m;function A(oe){return oe?oe/Math.sin(oe):1}function k(oe){return oe>1?_:oe<-1?-_:Math.asin(oe)}function R(oe){return oe>1?0:oe<-1?m:Math.acos(oe)}var L=n.geo.projection,z=n.geo.projectionMutator;n.geo.interrupt=function(oe){var ie=[[[[-m,0],[0,_],[m,0]]],[[[-m,0],[0,-_],[m,0]]]],Q;function V(pe,W){for(var ue=W<0?-1:1,me=ie[+(W<0)],be=0,ke=me.length-1;be<ke&&pe>me[be][2][0];++be);var Pe=oe(pe-me[be][1][0],W);return Pe[0]+=oe(me[be][1][0],ue*W>ue*me[be][0][1]?me[be][0][1]:W)[0],Pe}function se(){Q=ie.map(function(pe){return pe.map(function(W){var ue=oe(W[0][0],W[0][1])[0],me=oe(W[2][0],W[2][1])[0],be=oe(W[1][0],W[0][1])[1],ke=oe(W[1][0],W[1][1])[1],Pe;return be>ke&&(Pe=be,be=ke,ke=Pe),[[ue,be],[me,ke]]})})}oe.invert&&(V.invert=function(pe,W){for(var ue=Q[+(W<0)],me=ie[+(W<0)],be=0,ke=ue.length;be<ke;++be){var Pe=ue[be];if(Pe[0][0]<=pe&&pe<Pe[1][0]&&Pe[0][1]<=W&&W<Pe[1][1]){var je=oe.invert(pe-oe(me[be][1][0],0)[0],W);return je[0]+=me[be][1][0],de(V(je[0],je[1]),[pe,W])?je:null}}});var re=n.geo.projection(V),ee=re.stream;re.stream=function(pe){var W=re.rotate(),ue=ee(pe),me=(re.rotate([0,0]),ee(pe));return re.rotate(W),ue.sphere=function(){n.geo.stream(ae(),me)},ue},re.lobes=function(pe){return arguments.length?(ie=pe.map(function(W){return W.map(function(ue){return[[ue[0][0]*m/180,ue[0][1]*m/180],[ue[1][0]*m/180,ue[1][1]*m/180],[ue[2][0]*m/180,ue[2][1]*m/180]]})}),se(),re):ie.map(function(W){return W.map(function(ue){return[[ue[0][0]*180/m,ue[0][1]*180/m],[ue[1][0]*180/m,ue[1][1]*180/m],[ue[2][0]*180/m,ue[2][1]*180/m]]})})};function ae(){for(var pe=1e-6,W=[],ue=0,me=ie[0].length;ue<me;++ue){var be=ie[0][ue],ke=be[0][0]*180/m,Pe=be[0][1]*180/m,je=be[1][1]*180/m,ze=be[2][0]*180/m,Ze=be[2][1]*180/m;W.push(fe([[ke+pe,Pe+pe],[ke+pe,je-pe],[ze-pe,je-pe],[ze-pe,Ze+pe]],30))}for(var ue=ie[1].length-1;ue>=0;--ue){var be=ie[1][ue],ke=be[0][0]*180/m,Pe=be[0][1]*180/m,je=be[1][1]*180/m,ze=be[2][0]*180/m,Ze=be[2][1]*180/m;W.push(fe([[ze-pe,Ze-pe],[ze-pe,je+pe],[ke+pe,je+pe],[ke+pe,Pe-pe]],30))}return{type:"Polygon",coordinates:[n.merge(W)]}}function fe(pe,W){for(var ue=-1,me=pe.length,be=pe[0],ke,Pe,je,ze=[];++ue<me;){ke=pe[ue],Pe=(ke[0]-be[0])/W,je=(ke[1]-be[1])/W;for(var Ze=0;Ze<W;++Ze)ze.push([be[0]+Ze*Pe,be[1]+Ze*je]);be=ke}return ze.push(ke),ze}function de(pe,W){return Math.abs(pe[0]-W[0])<y&&Math.abs(pe[1]-W[1])<y}return re};function E(oe,ie){var Q=(2+_)*Math.sin(ie);ie/=2;for(var V=0,se=1/0;V<10&&Math.abs(se)>y;V++){var re=Math.cos(ie);ie-=se=(ie+Math.sin(ie)*(re+2)-Q)/(2*re*(1+re))}return[2/Math.sqrt(m*(4+m))*oe*(1+Math.cos(ie)),2*Math.sqrt(m/(4+m))*Math.sin(ie)]}E.invert=function(oe,ie){var Q=.5*ie*Math.sqrt((4+m)/m),V=k(Q),se=Math.cos(V);return[oe/(2/Math.sqrt(m*(4+m))*(1+se)),k((V+Q*(se+2))/(2+_))]},(n.geo.eckert4=function(){return L(E)}).raw=E;var S=n.geo.azimuthalEqualArea.raw;function C(oe,ie){if(arguments.length<2&&(ie=oe),ie===1)return S;if(ie===1/0)return F;function Q(V,se){var re=S(V/ie,se);return re[0]*=oe,re}return Q.invert=function(V,se){var re=S.invert(V/oe,se);return re[0]*=ie,re},Q}function D(){var oe=2,ie=z(C),Q=ie(oe);return Q.coefficient=function(V){return arguments.length?ie(oe=+V):oe},Q}function F(oe,ie){return[oe*Math.cos(ie)/Math.cos(ie/=2),2*Math.sin(ie)]}F.invert=function(oe,ie){var Q=2*k(ie/2);return[oe*Math.cos(Q/2)/Math.cos(Q),Q]},(n.geo.hammer=D).raw=C;function N(oe,ie){return[3*oe/(2*m)*Math.sqrt(m*m/3-ie*ie),ie]}N.invert=function(oe,ie){return[2/3*m*oe/Math.sqrt(m*m/3-ie*ie),ie]},(n.geo.kavrayskiy7=function(){return L(N)}).raw=N;function G(oe,ie){return[oe,1.25*Math.log(Math.tan(m/4+.4*ie))]}G.invert=function(oe,ie){return[oe,2.5*Math.atan(Math.exp(.8*ie))-.625*m]},(n.geo.miller=function(){return L(G)}).raw=G;function U(oe){return function(ie){var Q=oe*Math.sin(ie),V=30,se;do ie-=se=(ie+Math.sin(ie)-Q)/(1+Math.cos(ie));while(Math.abs(se)>y&&--V>0);return ie/2}}function X(oe,ie,Q){var V=U(Q);function se(re,ee){return[oe*re*Math.cos(ee=V(ee)),ie*Math.sin(ee)]}return se.invert=function(re,ee){var ae=k(ee/ie);return[re/(oe*Math.cos(ae)),k((2*ae+Math.sin(2*ae))/Q)]},se}var I=X(Math.SQRT2/_,Math.SQRT2,m);(n.geo.mollweide=function(){return L(I)}).raw=I;function B(oe,ie){var Q=ie*ie,V=Q*Q;return[oe*(.8707-.131979*Q+V*(-.013791+V*(.003971*Q-.001529*V))),ie*(1.007226+Q*(.015085+V*(-.044475+.028874*Q-.005916*V)))]}B.invert=function(oe,ie){var Q=ie,V=25,se;do{var re=Q*Q,ee=re*re;Q-=se=(Q*(1.007226+re*(.015085+ee*(-.044475+.028874*re-.005916*ee)))-ie)/(1.007226+re*(.015085*3+ee*(-.044475*7+.028874*9*re-.005916*11*ee)))}while(Math.abs(se)>y&&--V>0);return[oe/(.8707+(re=Q*Q)*(-.131979+re*(-.013791+re*re*re*(.003971-.001529*re)))),Q]},(n.geo.naturalEarth=function(){return L(B)}).raw=B;var j=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];j.forEach(function(oe){oe[1]*=1.0144});function H(oe,ie){var Q=Math.min(18,Math.abs(ie)*36/m),V=Math.floor(Q),se=Q-V,re=(W=j[V])[0],ee=W[1],ae=(W=j[++V])[0],fe=W[1],de=(W=j[Math.min(19,++V)])[0],pe=W[1],W;return[oe*(ae+se*(de-re)/2+se*se*(de-2*ae+re)/2),(ie>0?_:-_)*(fe+se*(pe-ee)/2+se*se*(pe-2*fe+ee)/2)]}H.invert=function(oe,ie){var Q=ie/_,V=Q*90,se=Math.min(18,Math.abs(V/5)),re=Math.max(0,Math.floor(se));do{var ee=j[re][1],ae=j[re+1][1],fe=j[Math.min(19,re+2)][1],de=fe-ee,pe=fe-2*ae+ee,W=2*(Math.abs(Q)-ae)/de,ue=pe/de,me=W*(1-ue*W*(1-2*ue*W));if(me>=0||re===1){V=(ie>=0?5:-5)*(me+se);var be=50,ke;do se=Math.min(18,Math.abs(V)/5),re=Math.floor(se),me=se-re,ee=j[re][1],ae=j[re+1][1],fe=j[Math.min(19,re+2)][1],V-=(ke=(ie>=0?_:-_)*(ae+me*(fe-ee)/2+me*me*(fe-2*ae+ee)/2)-ie)*g;while(Math.abs(ke)>b&&--be>0);break}}while(--re>=0);var Pe=j[re][0],je=j[re+1][0],ze=j[Math.min(19,re+2)][0];return[oe/(je+me*(ze-Pe)/2+me*me*(ze-2*je+Pe)/2),V*T]},(n.geo.robinson=function(){return L(H)}).raw=H;function K(oe,ie){return[oe*Math.cos(ie),ie]}K.invert=function(oe,ie){return[oe/Math.cos(ie),ie]},(n.geo.sinusoidal=function(){return L(K)}).raw=K;function te(oe,ie){var Q=Math.cos(ie),V=A(R(Q*Math.cos(oe/=2)));return[2*Q*Math.sin(oe)*V,Math.sin(ie)*V]}te.invert=function(oe,ie){if(!(oe*oe+4*ie*ie>m*m+y)){var Q=oe,V=ie,se=25;do{var re=Math.sin(Q),ee=Math.sin(Q/2),ae=Math.cos(Q/2),fe=Math.sin(V),de=Math.cos(V),pe=Math.sin(2*V),W=fe*fe,ue=de*de,me=ee*ee,be=1-ue*ae*ae,ke=be?R(de*ae)*Math.sqrt(Pe=1/be):Pe=0,Pe,je=2*ke*de*ee-oe,ze=ke*fe-ie,Ze=Pe*(ue*me+ke*de*ae*W),tt=Pe*(.5*re*pe-ke*2*fe*ee),Ce=Pe*.25*(pe*ee-ke*fe*ue*re),Ae=Pe*(W*ae+ke*me*de),Ne=tt*Ce-Ae*Ze;if(!Ne)break;var qe=(ze*tt-je*Ae)/Ne,At=(je*Ce-ze*Ze)/Ne;Q-=qe,V-=At}while((Math.abs(qe)>y||Math.abs(At)>y)&&--se>0);return[Q,V]}},(n.geo.aitoff=function(){return L(te)}).raw=te;function J(oe,ie){var Q=te(oe,ie);return[(Q[0]+oe/_)/2,(Q[1]+ie)/2]}J.invert=function(oe,ie){var Q=oe,V=ie,se=25;do{var re=Math.cos(V),ee=Math.sin(V),ae=Math.sin(2*V),fe=ee*ee,de=re*re,pe=Math.sin(Q),W=Math.cos(Q/2),ue=Math.sin(Q/2),me=ue*ue,be=1-de*W*W,ke=be?R(re*W)*Math.sqrt(Pe=1/be):Pe=0,Pe,je=.5*(2*ke*re*ue+Q/_)-oe,ze=.5*(ke*ee+V)-ie,Ze=.5*Pe*(de*me+ke*re*W*fe)+.5/_,tt=Pe*(pe*ae/4-ke*ee*ue),Ce=.125*Pe*(ae*ue-ke*ee*de*pe),Ae=.5*Pe*(fe*W+ke*me*re)+.5,Ne=tt*Ce-Ae*Ze,qe=(ze*tt-je*Ae)/Ne,At=(je*Ce-ze*Ze)/Ne;Q-=qe,V-=At}while((Math.abs(qe)>y||Math.abs(At)>y)&&--se>0);return[Q,V]},(n.geo.winkel3=function(){return L(J)}).raw=J}v.exports=r},{}],864:[function(e,v,M){var r=e("d3"),n=e("../../lib"),l=e("../../registry"),c=Math.PI/180,t=180/Math.PI,f={cursor:"pointer"},a={cursor:"auto"};function o(S,C){var D=S.projection,F;return C._isScoped?F=i:C._isClipped?F=p:F=s,F(S,D)}v.exports=o;function u(S,C){return r.behavior.zoom().translate(C.translate()).scale(C.scale())}function h(S,C,D){var F=S.id,N=S.graphDiv,G=N.layout,U=G[F],X=N._fullLayout,I=X[F],B={},j={};function H(K,te){B[F+"."+K]=n.nestedProperty(U,K).get(),l.call("_storeDirectGUIEdit",G,X._preGUI,B);var J=n.nestedProperty(I,K);J.get()!==te&&(J.set(te),n.nestedProperty(U,K).set(te),j[F+"."+K]=te)}D(H),H("projection.scale",C.scale()/S.fitScale),H("fitbounds",!1),N.emit("plotly_relayout",j)}function i(S,C){var D=u(S,C);function F(){r.select(this).style(f)}function N(){C.scale(r.event.scale).translate(r.event.translate),S.render();var X=C.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":C.scale()/S.fitScale,"geo.center.lon":X[0],"geo.center.lat":X[1]})}function G(X){var I=C.invert(S.midPt);X("center.lon",I[0]),X("center.lat",I[1])}function U(){r.select(this).style(a),h(S,C,G)}return D.on("zoomstart",F).on("zoom",N).on("zoomend",U),D}function s(S,C){var D=u(S,C),F=2,N,G,U,X,I,B,j,H,K;function te(se){return C.invert(se)}function J(se){var re=te(se);if(!re)return!0;var ee=C(re);return Math.abs(ee[0]-se[0])>F||Math.abs(ee[1]-se[1])>F}function oe(){r.select(this).style(f),N=r.mouse(this),G=C.rotate(),U=C.translate(),X=G,I=te(N)}function ie(){if(B=r.mouse(this),J(N)){D.scale(C.scale()),D.translate(C.translate());return}C.scale(r.event.scale),C.translate([U[0],r.event.translate[1]]),I?te(B)&&(H=te(B),j=[X[0]+(H[0]-I[0]),G[1],G[2]],C.rotate(j),X=j):(N=B,I=te(N)),K=!0,S.render();var se=C.rotate(),re=C.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":C.scale()/S.fitScale,"geo.center.lon":re[0],"geo.center.lat":re[1],"geo.projection.rotation.lon":-se[0]})}function Q(){r.select(this).style(a),K&&h(S,C,V)}function V(se){var re=C.rotate(),ee=C.invert(S.midPt);se("projection.rotation.lon",-re[0]),se("center.lon",ee[0]),se("center.lat",ee[1])}return D.on("zoomstart",oe).on("zoom",ie).on("zoomend",Q),D}function p(S,C){C.rotate(),C.scale();var D=u(S,C),F=E(D,"zoomstart","zoom","zoomend"),N=0,G=D.on,U;D.on("zoomstart",function(){r.select(this).style(f);var H=r.mouse(this),K=C.rotate(),te=K,J=C.translate(),oe=y(K);U=d(C,H),G.call(D,"zoom",function(){var ie=r.mouse(this);if(C.scale(r.event.scale),!U)H=ie,U=d(C,H);else if(d(C,ie)){C.rotate(K).translate(J);var Q=d(C,ie),V=m(U,Q),se=k(b(oe,V)),re=_(se,U,te);(!isFinite(re[0])||!isFinite(re[1])||!isFinite(re[2]))&&(re=te),C.rotate(re),te=re}I(F.of(this,arguments))}),X(F.of(this,arguments))}).on("zoomend",function(){r.select(this).style(a),G.call(D,"zoom",null),B(F.of(this,arguments)),h(S,C,j)}).on("zoom.redraw",function(){S.render();var H=C.rotate();S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":C.scale()/S.fitScale,"geo.projection.rotation.lon":-H[0],"geo.projection.rotation.lat":-H[1]})});function X(H){N++||H({type:"zoomstart"})}function I(H){H({type:"zoom"})}function B(H){--N||H({type:"zoomend"})}function j(H){var K=C.rotate();H("projection.rotation.lon",-K[0]),H("projection.rotation.lat",-K[1])}return r.rebind(D,F,"on")}function d(S,C){var D=S.invert(C);return D&&isFinite(D[0])&&isFinite(D[1])&&R(D)}function y(S){var C=.5*S[0]*c,D=.5*S[1]*c,F=.5*S[2]*c,N=Math.sin(C),G=Math.cos(C),U=Math.sin(D),X=Math.cos(D),I=Math.sin(F),B=Math.cos(F);return[G*X*B+N*U*I,N*X*B-G*U*I,G*U*B+N*X*I,G*X*I-N*U*B]}function b(S,C){var D=S[0],F=S[1],N=S[2],G=S[3],U=C[0],X=C[1],I=C[2],B=C[3];return[D*U-F*X-N*I-G*B,D*X+F*U+N*B-G*I,D*I-F*B+N*U+G*X,D*B+F*I-N*X+G*U]}function m(S,C){if(!(!S||!C)){var D=z(S,C),F=Math.sqrt(L(D,D)),N=.5*Math.acos(Math.max(-1,Math.min(1,L(S,C)))),G=Math.sin(N)/F;return F&&[Math.cos(N),D[2]*G,-D[1]*G,D[0]*G]}}function _(S,C,D){var F=A(C,2,S[0]);F=A(F,1,S[1]),F=A(F,0,S[2]-D[2]);var N=C[0],G=C[1],U=C[2],X=F[0],I=F[1],B=F[2],j=Math.atan2(G,N)*t,H=Math.sqrt(N*N+G*G),K,te;Math.abs(I)>H?(te=(I>0?90:-90)-j,K=0):(te=Math.asin(I/H)*t-j,K=Math.sqrt(H*H-I*I));var J=180-te-2*j,oe=(Math.atan2(B,X)-Math.atan2(U,K))*t,ie=(Math.atan2(B,X)-Math.atan2(U,-K))*t,Q=T(D[0],D[1],te,oe),V=T(D[0],D[1],J,ie);return Q<=V?[te,oe,D[2]]:[J,ie,D[2]]}function T(S,C,D,F){var N=g(D-S),G=g(F-C);return Math.sqrt(N*N+G*G)}function g(S){return(S%360+540)%360-180}function A(S,C,D){var F=D*c,N=S.slice(),G=C===0?1:0,U=C===2?1:2,X=Math.cos(F),I=Math.sin(F);return N[G]=S[G]*X-S[U]*I,N[U]=S[U]*X+S[G]*I,N}function k(S){return[Math.atan2(2*(S[0]*S[1]+S[2]*S[3]),1-2*(S[1]*S[1]+S[2]*S[2]))*t,Math.asin(Math.max(-1,Math.min(1,2*(S[0]*S[2]-S[3]*S[1]))))*t,Math.atan2(2*(S[0]*S[3]+S[1]*S[2]),1-2*(S[2]*S[2]+S[3]*S[3]))*t]}function R(S){var C=S[0]*c,D=S[1]*c,F=Math.cos(D);return[F*Math.cos(C),F*Math.sin(C),Math.sin(D)]}function L(S,C){for(var D=0,F=0,N=S.length;F<N;++F)D+=S[F]*C[F];return D}function z(S,C){return[S[1]*C[2]-S[2]*C[1],S[2]*C[0]-S[0]*C[2],S[0]*C[1]-S[1]*C[0]]}function E(S){for(var C=0,D=arguments.length,F=[];++C<D;)F.push(arguments[C]);var N=r.dispatch.apply(null,F);return N.of=function(G,U){return function(X){var I;try{I=X.sourceEvent=r.event,X.target=S,r.event=X,N[X.type].apply(G,U)}finally{r.event=I}}},N}},{"../../lib":778,"../../registry":911,d3:169}],865:[function(e,v,M){var r=e("../registry"),n=e("./cartesian/constants").SUBPLOT_PATTERN;M.getSubplotCalcData=function(l,c,t){var f=r.subplotsRegistry[c];if(!f)return[];for(var a=f.attr,o=[],u=0;u<l.length;u++){var h=l[u],i=h[0].trace;i[a]===t&&o.push(h)}return o},M.getModuleCalcData=function(l,c){var t=[],f=[],a;if(typeof c=="string"?a=r.getModule(c).plot:typeof c=="function"?a=c:a=c.plot,!a)return[t,l];for(var o=0;o<l.length;o++){var u=l[o],h=u[0].trace;h.visible!==!0||h._length===0||(h._module.plot===a?t.push(u):f.push(u))}return[t,f]},M.getSubplotData=function(c,t,f){if(!r.subplotsRegistry[t])return[];var a=r.subplotsRegistry[t].attr,o=[],u,h,i;if(t==="gl2d"){var s=f.match(n);h="x"+s[1],i="y"+s[2]}for(var p=0;p<c.length;p++)u=c[p],t==="gl2d"&&r.traceIs(u,"gl2d")?u[a[0]]===h&&u[a[1]]===i&&o.push(u):u[a]===f&&o.push(u);return o}},{"../registry":911,"./cartesian/constants":834}],866:[function(e,v,M){var r=e("mouse-change"),n=e("mouse-wheel"),l=e("mouse-event-offset"),c=e("../cartesian/constants"),t=e("has-passive-events");v.exports=a;function f(o,u){this.element=o,this.plot=u,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function a(o){var u=o.mouseContainer,h=o.glplot,i=new f(u,h);function s(){o.xaxis.autorange=!1,o.yaxis.autorange=!1}function p(){for(var y=o.graphDiv._fullLayout._axisConstraintGroups,b=o.xaxis._id,m=o.yaxis._id,_=0;_<y.length;_++)if(y[_][b]!==-1){if(y[_][m]!==-1)return!0;break}return!1}i.mouseListener=r(u,d),u.addEventListener("touchstart",function(y){var b=l(y.changedTouches[0],u);d(0,b[0],b[1]),d(1,b[0],b[1]),y.preventDefault()},t?{passive:!1}:!1),u.addEventListener("touchmove",function(y){y.preventDefault();var b=l(y.changedTouches[0],u);d(1,b[0],b[1]),y.preventDefault()},t?{passive:!1}:!1),u.addEventListener("touchend",function(y){d(0,i.lastPos[0],i.lastPos[1]),y.preventDefault()},t?{passive:!1}:!1);function d(y,b,m){var _=o.calcDataBox(),T=h.viewBox,g=i.lastPos[0],A=i.lastPos[1],k=c.MINDRAG*h.pixelRatio,R=c.MINZOOM*h.pixelRatio,L,z;b*=h.pixelRatio,m*=h.pixelRatio,m=T[3]-T[1]-m;function E(G,U,X){var I=Math.min(U,X),B=Math.max(U,X);I!==B?(_[G]=I,_[G+2]=B,i.dataBox=_,o.setRanges(_)):(o.selectBox.selectBox=[0,0,1,1],o.glplot.setDirty())}switch(o.fullLayout.dragmode){case"zoom":if(y){var S=b/(T[2]-T[0])*(_[2]-_[0])+_[0],C=m/(T[3]-T[1])*(_[3]-_[1])+_[1];i.boxInited||(i.boxStart[0]=S,i.boxStart[1]=C,i.dragStart[0]=b,i.dragStart[1]=m),i.boxEnd[0]=S,i.boxEnd[1]=C,i.boxInited=!0,!i.boxEnabled&&(i.boxStart[0]!==i.boxEnd[0]||i.boxStart[1]!==i.boxEnd[1])&&(i.boxEnabled=!0);var D=Math.abs(i.dragStart[0]-b)<R,F=Math.abs(i.dragStart[1]-m)<R;if(p()&&!(D&&F)){L=i.boxEnd[0]-i.boxStart[0],z=i.boxEnd[1]-i.boxStart[1];var N=(_[3]-_[1])/(_[2]-_[0]);Math.abs(L*N)>Math.abs(z)?(i.boxEnd[1]=i.boxStart[1]+Math.abs(L)*N*(z>=0?1:-1),i.boxEnd[1]<_[1]?(i.boxEnd[1]=_[1],i.boxEnd[0]=i.boxStart[0]+(_[1]-i.boxStart[1])/Math.abs(N)):i.boxEnd[1]>_[3]&&(i.boxEnd[1]=_[3],i.boxEnd[0]=i.boxStart[0]+(_[3]-i.boxStart[1])/Math.abs(N))):(i.boxEnd[0]=i.boxStart[0]+Math.abs(z)/N*(L>=0?1:-1),i.boxEnd[0]<_[0]?(i.boxEnd[0]=_[0],i.boxEnd[1]=i.boxStart[1]+(_[0]-i.boxStart[0])*Math.abs(N)):i.boxEnd[0]>_[2]&&(i.boxEnd[0]=_[2],i.boxEnd[1]=i.boxStart[1]+(_[2]-i.boxStart[0])*Math.abs(N)))}else D&&(i.boxEnd[0]=i.boxStart[0]),F&&(i.boxEnd[1]=i.boxStart[1])}else i.boxEnabled?(L=i.boxStart[0]!==i.boxEnd[0],z=i.boxStart[1]!==i.boxEnd[1],L||z?(L&&(E(0,i.boxStart[0],i.boxEnd[0]),o.xaxis.autorange=!1),z&&(E(1,i.boxStart[1],i.boxEnd[1]),o.yaxis.autorange=!1),o.relayoutCallback()):o.glplot.setDirty(),i.boxEnabled=!1,i.boxInited=!1):i.boxInited&&(i.boxInited=!1);break;case"pan":i.boxEnabled=!1,i.boxInited=!1,y?(i.panning||(i.dragStart[0]=b,i.dragStart[1]=m),Math.abs(i.dragStart[0]-b)<k&&(b=i.dragStart[0]),Math.abs(i.dragStart[1]-m)<k&&(m=i.dragStart[1]),L=(g-b)*(_[2]-_[0])/(h.viewBox[2]-h.viewBox[0]),z=(A-m)*(_[3]-_[1])/(h.viewBox[3]-h.viewBox[1]),_[0]+=L,_[2]+=L,_[1]+=z,_[3]+=z,o.setRanges(_),i.panning=!0,i.lastInputTime=Date.now(),s(),o.cameraChanged(),o.handleAnnotations()):i.panning&&(i.panning=!1,o.relayoutCallback());break}i.lastPos[0]=b,i.lastPos[1]=m}return i.wheelListener=n(u,function(y,b){if(!o.scrollZoom)return!1;var m=o.calcDataBox(),_=h.viewBox,T=i.lastPos[0],g=i.lastPos[1],A=Math.exp(5*b/(_[3]-_[1])),k=T/(_[2]-_[0])*(m[2]-m[0])+m[0],R=g/(_[3]-_[1])*(m[3]-m[1])+m[1];return m[0]=(m[0]-k)*A+k,m[2]=(m[2]-k)*A+k,m[1]=(m[1]-R)*A+R,m[3]=(m[3]-R)*A+R,o.setRanges(m),i.lastInputTime=Date.now(),s(),o.cameraChanged(),o.handleAnnotations(),o.relayoutCallback(),!0},!0),i}},{"../cartesian/constants":834,"has-passive-events":441,"mouse-change":483,"mouse-event-offset":484,"mouse-wheel":486}],867:[function(e,v,M){var r=e("../cartesian/axes"),n=e("../../lib/str2rgbarray");function l(a){this.scene=a,this.gl=a.gl,this.pixelRatio=a.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var c=l.prototype,t=["xaxis","yaxis"];c.merge=function(a){this.titleEnable=!1,this.backgroundColor=n(a.plot_bgcolor);var o,u,h,i,s,p,d,y,b,m,_;for(m=0;m<2;++m){o=t[m];var T=o.charAt(0);for(u=a[this.scene[o]._name],h=u.title.text===this.scene.fullLayout._dfltTitle[T]?"":u.title.text,_=0;_<=2;_+=2)this.labelEnable[m+_]=!1,this.labels[m+_]=h,this.labelColor[m+_]=n(u.title.font.color),this.labelFont[m+_]=u.title.font.family,this.labelSize[m+_]=u.title.font.size,this.labelPad[m+_]=this.getLabelPad(o,u),this.tickEnable[m+_]=!1,this.tickColor[m+_]=n((u.tickfont||{}).color),this.tickAngle[m+_]=u.tickangle==="auto"?0:Math.PI*-u.tickangle/180,this.tickPad[m+_]=this.getTickPad(u),this.tickMarkLength[m+_]=0,this.tickMarkWidth[m+_]=u.tickwidth||0,this.tickMarkColor[m+_]=n(u.tickcolor),this.borderLineEnable[m+_]=!1,this.borderLineColor[m+_]=n(u.linecolor),this.borderLineWidth[m+_]=u.linewidth||0;d=this.hasSharedAxis(u),s=this.hasAxisInDfltPos(o,u)&&!d,p=this.hasAxisInAltrPos(o,u)&&!d,i=u.mirror||!1,y=d?String(i).indexOf("all")!==-1:!!i,b=d?i==="allticks":String(i).indexOf("ticks")!==-1,s?this.labelEnable[m]=!0:p&&(this.labelEnable[m+2]=!0),s?this.tickEnable[m]=u.showticklabels:p&&(this.tickEnable[m+2]=u.showticklabels),(s||y)&&(this.borderLineEnable[m]=u.showline),(p||y)&&(this.borderLineEnable[m+2]=u.showline),(s||b)&&(this.tickMarkLength[m]=this.getTickMarkLength(u)),(p||b)&&(this.tickMarkLength[m+2]=this.getTickMarkLength(u)),this.gridLineEnable[m]=u.showgrid,this.gridLineColor[m]=n(u.gridcolor),this.gridLineWidth[m]=u.gridwidth,this.zeroLineEnable[m]=u.zeroline,this.zeroLineColor[m]=n(u.zerolinecolor),this.zeroLineWidth[m]=u.zerolinewidth}},c.hasSharedAxis=function(a){var o=this.scene,u=o.fullLayout._subplots.gl2d,h=r.findSubplotsWithAxis(u,a);return h.indexOf(o.id)!==0},c.hasAxisInDfltPos=function(a,o){var u=o.side;if(a==="xaxis")return u==="bottom";if(a==="yaxis")return u==="left"},c.hasAxisInAltrPos=function(a,o){var u=o.side;if(a==="xaxis")return u==="top";if(a==="yaxis")return u==="right"},c.getLabelPad=function(a,o){var u=1.5,h=o.title.font.size,i=o.showticklabels;if(a==="xaxis")return o.side==="top"?-10+h*(u+(i?1:0)):-10+h*(u+(i?.5:0));if(a==="yaxis")return o.side==="right"?10+h*(u+(i?1:.5)):10+h*(u+(i?.5:0))},c.getTickPad=function(a){return a.ticks==="outside"?10+a.ticklen:15},c.getTickMarkLength=function(a){if(!a.ticks)return 0;var o=a.ticklen;return a.ticks==="inside"?-o:o};function f(a){return new l(a)}v.exports=f},{"../../lib/str2rgbarray":802,"../cartesian/axes":828}],868:[function(e,v,M){var r=e("../../plot_api/edit_types").overrideAll,n=e("./scene2d"),l=e("../layout_attributes"),c=e("../../constants/xmlns_namespaces"),t=e("../cartesian/constants"),f=e("../cartesian"),a=e("../../components/fx/layout_attributes"),o=e("../get_data").getSubplotData;M.name="gl2d",M.attr=["xaxis","yaxis"],M.idRoot=["x","y"],M.idRegex=t.idRegex,M.attrRegex=t.attrRegex,M.attributes=e("../cartesian/attributes"),M.supplyLayoutDefaults=function(u,h,i){h._has("cartesian")||f.supplyLayoutDefaults(u,h,i)},M.layoutAttrOverrides=r(f.layoutAttributes,"plot","from-root"),M.baseLayoutAttrOverrides=r({plot_bgcolor:l.plot_bgcolor,hoverlabel:a.hoverlabel},"plot","nested"),M.plot=function(h){for(var i=h._fullLayout,s=h._fullData,p=i._subplots.gl2d,d=0;d<p.length;d++){var y=p[d],b=i._plots[y],m=o(s,"gl2d",y),_=b._scene2d;_===void 0&&(_=new n({id:y,graphDiv:h,container:h.querySelector(".gl-container"),staticPlot:h._context.staticPlot,plotGlPixelRatio:h._context.plotGlPixelRatio},i),b._scene2d=_),_.plot(m,h.calcdata,i,h.layout)}},M.clean=function(u,h,i,s){for(var p=s._subplots.gl2d||[],d=0;d<p.length;d++){var y=p[d],b=s._plots[y];if(b._scene2d){var m=o(u,"gl2d",y);m.length===0&&(b._scene2d.destroy(),delete s._plots[y])}}f.clean.apply(this,arguments)},M.drawFramework=function(u){u._context.staticPlot||f.drawFramework(u)},M.toSVG=function(u){for(var h=u._fullLayout,i=h._subplots.gl2d,s=0;s<i.length;s++){var p=h._plots[i[s]],d=p._scene2d,y=d.toImage("png"),b=h._glimages.append("svg:image");b.attr({xmlns:c.svg,"xlink:href":y,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),d.destroy()}},M.updateFx=function(u){for(var h=u._fullLayout,i=h._subplots.gl2d,s=0;s<i.length;s++){var p=h._plots[i[s]]._scene2d;p.updateFx(h.dragmode)}}},{"../../components/fx/layout_attributes":684,"../../constants/xmlns_namespaces":754,"../../plot_api/edit_types":810,"../cartesian":841,"../cartesian/attributes":826,"../cartesian/constants":834,"../get_data":865,"../layout_attributes":882,"./scene2d":869}],869:[function(e,v,M){var r=e("../../registry"),n=e("../../plots/cartesian/axes"),l=e("../../components/fx"),c=e("gl-plot2d"),t=e("gl-spikes2d"),f=e("gl-select-box"),a=e("webgl-context"),o=e("./convert"),u=e("./camera"),h=e("../../lib/show_no_webgl_msg"),i=e("../cartesian/constraints"),s=i.enforce,p=i.clean,d=e("../cartesian/autorange").doAutoRange,y=e("../../components/dragelement/helpers"),b=y.drawMode,m=y.selectMode,_=["xaxis","yaxis"],T,g,A=e("../cartesian/constants").SUBPLOT_PATTERN;function k(z,E){this.container=z.container,this.graphDiv=z.graphDiv,this.pixelRatio=z.plotGlPixelRatio||window.devicePixelRatio,this.id=z.id,this.staticPlot=!!z.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(E),this.makeFramework(),!this.stopped&&(this.glplotOptions=o(this),this.glplotOptions.merge(E),this.glplot=c(this.glplotOptions),this.camera=u(this),this.traces={},this.spikes=t(this.glplot),this.selectBox=f(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}v.exports=k;var R=k.prototype;R.makeFramework=function(){if(this.staticPlot){if(!g&&(T=document.createElement("canvas"),g=a({canvas:T,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!g))throw new Error("Error creating static canvas/context for image server");this.canvas=T,this.gl=g}else{var z=this.container.querySelector(".gl-canvas-focus"),E=a({canvas:z,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!E){h(this),this.stopped=!0;return}this.canvas=z,this.gl=E}var S=this.canvas;S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.top="0px",S.style.left="0px",S.style["pointer-events"]="none",this.updateSize(S);var C=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");C.style.position="absolute",C.style.top=C.style.left="0px",C.style.width=C.style.height="100%",C.style["z-index"]=20,C.style["pointer-events"]="none";var D=this.mouseContainer=document.createElement("div");D.style.position="absolute",D.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var F=this.container;F.appendChild(C),F.appendChild(D);var N=this;D.addEventListener("mouseout",function(){N.isMouseOver=!1,N.unhover()}),D.addEventListener("mouseover",function(){N.isMouseOver=!0})},R.toImage=function(z){z||(z="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(T),this.updateSize(this.canvas);var E=this.glplot.gl,S=E.drawingBufferWidth,C=E.drawingBufferHeight;E.clearColor(1,1,1,0),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),E.bindFramebuffer(E.FRAMEBUFFER,null);var D=new Uint8Array(S*C*4);E.readPixels(0,0,S,C,E.RGBA,E.UNSIGNED_BYTE,D);for(var F=0,N=C-1;F<N;++F,--N)for(var G=0;G<S;++G)for(var U=0;U<4;++U){var X=D[4*(S*F+G)+U];D[4*(S*F+G)+U]=D[4*(S*N+G)+U],D[4*(S*N+G)+U]=X}var I=document.createElement("canvas");I.width=S,I.height=C;var B=I.getContext("2d"),j=B.createImageData(S,C);j.data.set(D),B.putImageData(j,0,0);var H;switch(z){case"jpeg":H=I.toDataURL("image/jpeg");break;case"webp":H=I.toDataURL("image/webp");break;default:H=I.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(T),H},R.updateSize=function(z){z||(z=this.canvas);var E=this.pixelRatio,S=this.fullLayout,C=S.width,D=S.height,F=Math.ceil(E*C)|0,N=Math.ceil(E*D)|0;return(z.width!==F||z.height!==N)&&(z.width=F,z.height=N),z},R.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var z=[n.calcTicks(this.xaxis),n.calcTicks(this.yaxis)],E=0;E<2;++E)for(var S=0;S<z[E].length;++S)z[E][S].text=z[E][S].text+"";return z};function L(z,E){for(var S=0;S<2;++S){var C=z[S],D=E[S];if(C.length!==D.length)return!0;for(var F=0;F<C.length;++F)if(C[F].x!==D[F].x)return!0}return!1}R.updateRefs=function(z){this.fullLayout=z;var E=this.id.match(A),S="xaxis"+E[1],C="yaxis"+E[2];this.xaxis=this.fullLayout[S],this.yaxis=this.fullLayout[C]},R.relayoutCallback=function(){var z=this.graphDiv,E=this.xaxis,S=this.yaxis,C=z.layout,D={},F=D[E._name+".range"]=E.range.slice(),N=D[S._name+".range"]=S.range.slice();D[E._name+".autorange"]=E.autorange,D[S._name+".autorange"]=S.autorange,r.call("_storeDirectGUIEdit",z.layout,z._fullLayout._preGUI,D);var G=C[E._name];G.range=F,G.autorange=E.autorange;var U=C[S._name];U.range=N,U.autorange=S.autorange,D.lastInputTime=this.camera.lastInputTime,z.emit("plotly_relayout",D)},R.cameraChanged=function(){var z=this.camera;this.glplot.setDataBox(this.calcDataBox());var E=this.computeTickMarks(),S=this.glplotOptions.ticks;L(E,S)&&(this.glplotOptions.ticks=E,this.glplotOptions.dataBox=z.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},R.handleAnnotations=function(){for(var z=this.graphDiv,E=this.fullLayout.annotations,S=0;S<E.length;S++){var C=E[S];C.xref===this.xaxis._id&&C.yref===this.yaxis._id&&r.getComponentMethod("annotations","drawOne")(z,S)}},R.destroy=function(){if(this.glplot){var z=this.traces;z&&Object.keys(z).map(function(E){z[E].dispose(),delete z[E]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},R.plot=function(z,E,S){var C=this.glplot;this.updateRefs(S),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(z,E),this.updateFx(S.dragmode);var D=S.width,F=S.height;this.updateSize(this.canvas);var N=this.glplotOptions;N.merge(S),N.screenBox=[0,0,D,F];var G={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis}};p(G,this.xaxis),p(G,this.yaxis);var U=S._size,X=this.xaxis.domain,I=this.yaxis.domain;N.viewBox=[U.l+X[0]*U.w,U.b+I[0]*U.h,D-U.r-(1-X[1])*U.w,F-U.t-(1-I[1])*U.h],this.mouseContainer.style.width=U.w*(X[1]-X[0])+"px",this.mouseContainer.style.height=U.h*(I[1]-I[0])+"px",this.mouseContainer.height=U.h*(I[1]-I[0]),this.mouseContainer.style.left=U.l+X[0]*U.w+"px",this.mouseContainer.style.top=U.t+(1-I[1])*U.h+"px";var B,j;for(j=0;j<2;++j)B=this[_[j]],B._length=N.viewBox[j+2]-N.viewBox[j],d(this.graphDiv,B),B.setScale();s(G),N.ticks=this.computeTickMarks(),N.dataBox=this.calcDataBox(),N.merge(S),C.update(N),this.glplot.draw()},R.calcDataBox=function(){var z=this.xaxis,E=this.yaxis,S=z.range,C=E.range,D=z.r2l,F=E.r2l;return[D(S[0]),F(C[0]),D(S[1]),F(C[1])]},R.setRanges=function(z){var E=this.xaxis,S=this.yaxis,C=E.l2r,D=S.l2r;E.range=[C(z[0]),C(z[2])],S.range=[D(z[1]),D(z[3])]},R.updateTraces=function(z,E){var S=Object.keys(this.traces),C,D,F;this.fullData=z;e:for(C=0;C<S.length;C++){var N=S[C],G=this.traces[N];for(D=0;D<z.length;D++)if(F=z[D],F.uid===N&&F.type===G.type)continue e;G.dispose(),delete this.traces[N]}for(C=0;C<z.length;C++){F=z[C];var U=E[C],X=this.traces[F.uid];X?X.update(F,U):(X=F._module.plot(this,F,U),this.traces[F.uid]=X)}this.glplot.objects.sort(function(I,B){return I._trace.index-B._trace.index})},R.updateFx=function(z){m(z)||b(z)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),z==="pan"?this.mouseContainer.style.cursor="move":z==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},R.emitPointAction=function(z,E){for(var S=z.trace.uid,C=z.pointIndex,D,F=0;F<this.fullData.length;F++)this.fullData[F].uid===S&&(D=this.fullData[F]);var N={x:z.traceCoord[0],y:z.traceCoord[1],curveNumber:D.index,pointNumber:C,data:D._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};l.appendArrayPointValue(N,D,C),this.graphDiv.emit(E,{points:[N]})},R.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var z=this.glplot,E=this.camera,S=E.mouseListener,C=this.lastButtonState===1&&S.buttons===0,D=this.fullLayout;this.lastButtonState=S.buttons,this.cameraChanged();var F=S.x*z.pixelRatio,N=this.canvas.height-z.pixelRatio*S.y,G;if(E.boxEnabled&&D.dragmode==="zoom"){this.selectBox.enabled=!0;for(var U=this.selectBox.selectBox=[Math.min(E.boxStart[0],E.boxEnd[0]),Math.min(E.boxStart[1],E.boxEnd[1]),Math.max(E.boxStart[0],E.boxEnd[0]),Math.max(E.boxStart[1],E.boxEnd[1])],X=0;X<2;X++)E.boxStart[X]===E.boxEnd[X]&&(U[X]=z.dataBox[X],U[X+2]=z.dataBox[X+2]);z.setDirty()}else if(!E.panning&&this.isMouseOver){this.selectBox.enabled=!1;var I=D._size,B=this.xaxis.domain,j=this.yaxis.domain;G=z.pick(F/z.pixelRatio+I.l+B[0]*I.w,N/z.pixelRatio-(I.t+(1-j[1])*I.h));var H=G&&G.object._trace.handlePick(G);if(H&&C&&this.emitPointAction(H,"plotly_click"),G&&G.object._trace.hoverinfo!=="skip"&&D.hovermode&&H&&(!this.lastPickResult||this.lastPickResult.traceUid!==H.trace.uid||this.lastPickResult.dataCoord[0]!==H.dataCoord[0]||this.lastPickResult.dataCoord[1]!==H.dataCoord[1])){var K=H;this.lastPickResult={traceUid:H.trace?H.trace.uid:null,dataCoord:H.dataCoord.slice()},this.spikes.update({center:G.dataCoord}),K.screenCoord=[((z.viewBox[2]-z.viewBox[0])*(G.dataCoord[0]-z.dataBox[0])/(z.dataBox[2]-z.dataBox[0])+z.viewBox[0])/z.pixelRatio,(this.canvas.height-(z.viewBox[3]-z.viewBox[1])*(G.dataCoord[1]-z.dataBox[1])/(z.dataBox[3]-z.dataBox[1])-z.viewBox[1])/z.pixelRatio],this.emitPointAction(H,"plotly_hover");var te=this.fullData[K.trace.index]||{},J=K.pointIndex,oe=l.castHoverinfo(te,D,J);if(oe&&oe!=="all"){var ie=oe.split("+");ie.indexOf("x")===-1&&(K.traceCoord[0]=void 0),ie.indexOf("y")===-1&&(K.traceCoord[1]=void 0),ie.indexOf("z")===-1&&(K.traceCoord[2]=void 0),ie.indexOf("text")===-1&&(K.textLabel=void 0),ie.indexOf("name")===-1&&(K.name=void 0)}l.loneHover({x:K.screenCoord[0],y:K.screenCoord[1],xLabel:this.hoverFormatter("xaxis",K.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",K.traceCoord[1]),zLabel:K.traceCoord[2],text:K.textLabel,name:K.name,color:l.castHoverOption(te,J,"bgcolor")||K.color,borderColor:l.castHoverOption(te,J,"bordercolor"),fontFamily:l.castHoverOption(te,J,"font.family"),fontSize:l.castHoverOption(te,J,"font.size"),fontColor:l.castHoverOption(te,J,"font.color"),nameLength:l.castHoverOption(te,J,"namelength"),textAlign:l.castHoverOption(te,J,"align")},{container:this.svgContainer,gd:this.graphDiv})}}G||this.unhover(),z.draw()}},R.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),l.loneUnhover(this.svgContainer))},R.hoverFormatter=function(z,E){if(E!==void 0){var S=this[z];return n.tickText(S,S.c2l(E),"hover").text}}},{"../../components/dragelement/helpers":661,"../../components/fx":683,"../../lib/show_no_webgl_msg":800,"../../plots/cartesian/axes":828,"../../registry":911,"../cartesian/autorange":827,"../cartesian/constants":834,"../cartesian/constraints":835,"./camera":866,"./convert":867,"gl-plot2d":317,"gl-select-box":333,"gl-spikes2d":342,"webgl-context":606}],870:[function(e,v,M){var r=e("../../plot_api/edit_types").overrideAll,n=e("../../components/fx/layout_attributes"),l=e("./scene"),c=e("../get_data").getSubplotData,t=e("../../lib"),f=e("../../constants/xmlns_namespaces"),a="gl3d",o="scene";M.name=a,M.attr=o,M.idRoot=o,M.idRegex=M.attrRegex=t.counterRegex("scene"),M.attributes=e("./layout/attributes"),M.layoutAttributes=e("./layout/layout_attributes"),M.baseLayoutAttrOverrides=r({hoverlabel:n.hoverlabel},"plot","nested"),M.supplyLayoutDefaults=e("./layout/defaults"),M.plot=function(h){for(var i=h._fullLayout,s=h._fullData,p=i._subplots[a],d=0;d<p.length;d++){var y=p[d],b=c(s,a,y),m=i[y],_=m.camera,T=m._scene;T||(T=new l({id:y,graphDiv:h,container:h.querySelector(".gl-container"),staticPlot:h._context.staticPlot,plotGlPixelRatio:h._context.plotGlPixelRatio,camera:_},i),m._scene=T),T.viewInitial||(T.viewInitial={up:{x:_.up.x,y:_.up.y,z:_.up.z},eye:{x:_.eye.x,y:_.eye.y,z:_.eye.z},center:{x:_.center.x,y:_.center.y,z:_.center.z}}),T.plot(b,i,h.layout)}},M.clean=function(u,h,i,s){for(var p=s._subplots[a]||[],d=0;d<p.length;d++){var y=p[d];!h[y]&&s[y]._scene&&(s[y]._scene.destroy(),s._infolayer&&s._infolayer.selectAll(".annotation-"+y).remove())}},M.toSVG=function(u){for(var h=u._fullLayout,i=h._subplots[a],s=h._size,p=0;p<i.length;p++){var d=h[i[p]],y=d.domain,b=d._scene,m=b.toImage("png"),_=h._glimages.append("svg:image");_.attr({xmlns:f.svg,"xlink:href":m,x:s.l+s.w*y.x[0],y:s.t+s.h*(1-y.y[1]),width:s.w*(y.x[1]-y.x[0]),height:s.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"}),b.destroy()}},M.cleanId=function(h){if(h.match(/^scene[0-9]*$/)){var i=h.substr(5);return i==="1"&&(i=""),o+i}},M.updateFx=function(u){for(var h=u._fullLayout,i=h._subplots[a],s=0;s<i.length;s++){var p=h[i[s]]._scene;p.updateFx(h.dragmode,h.hovermode)}}},{"../../components/fx/layout_attributes":684,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../plot_api/edit_types":810,"../get_data":865,"./layout/attributes":871,"./layout/defaults":875,"./layout/layout_attributes":876,"./scene":880}],871:[function(e,v,M){v.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],872:[function(e,v,M){var r=e("../../../components/color"),n=e("../../cartesian/layout_attributes"),l=e("../../../lib/extend").extendFlat,c=e("../../../plot_api/edit_types").overrideAll;v.exports=c({visible:n.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:r.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:n.color,categoryorder:n.categoryorder,categoryarray:n.categoryarray,title:{text:n.title.text,font:n.title.font},type:l({},n.type,{values:["-","linear","log","date","category"]}),autotypenumbers:n.autotypenumbers,autorange:n.autorange,rangemode:n.rangemode,range:l({},n.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,mirror:n.mirror,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:n.tickfont,tickangle:n.tickangle,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,showexponent:n.showexponent,exponentformat:n.exponentformat,minexponent:n.minexponent,separatethousands:n.separatethousands,tickformat:n.tickformat,tickformatstops:n.tickformatstops,hoverformat:n.hoverformat,showline:n.showline,linecolor:n.linecolor,linewidth:n.linewidth,showgrid:n.showgrid,gridcolor:l({},n.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:n.gridwidth,zeroline:n.zeroline,zerolinecolor:n.zerolinecolor,zerolinewidth:n.zerolinewidth,_deprecated:{title:n._deprecated.title,titlefont:n._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":643,"../../../lib/extend":768,"../../../plot_api/edit_types":810,"../../cartesian/layout_attributes":842}],873:[function(e,v,M){var r=e("tinycolor2").mix,n=e("../../../lib"),l=e("../../../plot_api/plot_template"),c=e("./axis_attributes"),t=e("../../cartesian/type_defaults"),f=e("../../cartesian/axis_defaults"),a=["xaxis","yaxis","zaxis"],o=100*(204-68)/(255-68);v.exports=function(h,i,s){var p,d;function y(_,T){return n.coerce(p,d,c,_,T)}for(var b=0;b<a.length;b++){var m=a[b];p=h[m]||{},d=l.newContainer(i,m),d._id=m[0]+s.scene,d._name=m,t(p,d,y,s),f(p,d,y,{font:s.font,letter:m[0],data:s.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,bgColor:s.bgColor,calendar:s.calendar},s.fullLayout),y("gridcolor",r(d.color,s.bgColor,o).toRgbString()),y("title.text",m[0]),d.setScale=n.noop,y("showspikes")&&(y("spikesides"),y("spikethickness"),y("spikecolor",d.color)),y("showaxeslabels"),y("showbackground")&&y("backgroundcolor")}}},{"../../../lib":778,"../../../plot_api/plot_template":817,"../../cartesian/axis_defaults":830,"../../cartesian/type_defaults":853,"./axis_attributes":872,tinycolor2:576}],874:[function(e,v,M){var r=e("../../../lib/str2rgbarray"),n=e("../../../lib"),l=["xaxis","yaxis","zaxis"];function c(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var t=c.prototype;t.merge=function(a,o){for(var u=this,h=0;h<3;++h){var i=o[l[h]];if(!i.visible){u.tickEnable[h]=!1,u.labelEnable[h]=!1,u.lineEnable[h]=!1,u.lineTickEnable[h]=!1,u.gridEnable[h]=!1,u.zeroEnable[h]=!1,u.backgroundEnable[h]=!1;continue}u.labels[h]=a._meta?n.templateString(i.title.text,a._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(u.labelColor[h]=r(i.title.font.color)),i.title.font.family&&(u.labelFont[h]=i.title.font.family),i.title.font.size&&(u.labelSize[h]=i.title.font.size)),"showline"in i&&(u.lineEnable[h]=i.showline),"linecolor"in i&&(u.lineColor[h]=r(i.linecolor)),"linewidth"in i&&(u.lineWidth[h]=i.linewidth),"showgrid"in i&&(u.gridEnable[h]=i.showgrid),"gridcolor"in i&&(u.gridColor[h]=r(i.gridcolor)),"gridwidth"in i&&(u.gridWidth[h]=i.gridwidth),i.type==="log"?u.zeroEnable[h]=!1:"zeroline"in i&&(u.zeroEnable[h]=i.zeroline),"zerolinecolor"in i&&(u.zeroLineColor[h]=r(i.zerolinecolor)),"zerolinewidth"in i&&(u.zeroLineWidth[h]=i.zerolinewidth),"ticks"in i&&i.ticks?u.lineTickEnable[h]=!0:u.lineTickEnable[h]=!1,"ticklen"in i&&(u.lineTickLength[h]=u._defaultLineTickLength[h]=i.ticklen),"tickcolor"in i&&(u.lineTickColor[h]=r(i.tickcolor)),"tickwidth"in i&&(u.lineTickWidth[h]=i.tickwidth),"tickangle"in i&&(u.tickAngle[h]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(u.tickEnable[h]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(u.tickColor[h]=r(i.tickfont.color)),i.tickfont.family&&(u.tickFont[h]=i.tickfont.family),i.tickfont.size&&(u.tickSize[h]=i.tickfont.size)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(u.lineTickMirror[h]=!0,u.lineMirror[h]=!0):i.mirror===!0?(u.lineTickMirror[h]=!1,u.lineMirror[h]=!0):(u.lineTickMirror[h]=!1,u.lineMirror[h]=!1):u.lineMirror[h]=!1,"showbackground"in i&&i.showbackground!==!1?(u.backgroundEnable[h]=!0,u.backgroundColor[h]=r(i.backgroundcolor)):u.backgroundEnable[h]=!1}};function f(a,o){var u=new c;return u.merge(a,o),u}v.exports=f},{"../../../lib":778,"../../../lib/str2rgbarray":802}],875:[function(e,v,M){var r=e("../../../lib"),n=e("../../../components/color"),l=e("../../../registry"),c=e("../../subplot_defaults"),t=e("./axis_defaults"),f=e("./layout_attributes"),a=e("../../get_data").getSubplotData,o="gl3d";v.exports=function(i,s,p){var d=s._basePlotModules.length>1;function y(b){if(!d){var m=r.validate(i[b],f[b]);if(m)return i[b]}}c(i,s,p,{type:o,attributes:f,handleDefaults:u,fullLayout:s,font:s.font,fullData:p,getDfltFromLayout:y,autotypenumbersDflt:s.autotypenumbers,paper_bgcolor:s.paper_bgcolor,calendar:s.calendar})};function u(h,i,s,p){for(var d=s("bgcolor"),y=n.combine(d,p.paper_bgcolor),b=["up","center","eye"],m=0;m<b.length;m++)s("camera."+b[m]+".x"),s("camera."+b[m]+".y"),s("camera."+b[m]+".z");s("camera.projection.type");var _=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),T=_?"manual":"auto",g=s("aspectmode",T);_||(h.aspectratio=i.aspectratio={x:1,y:1,z:1},g==="manual"&&(i.aspectmode="auto"),h.aspectmode=i.aspectmode);var A=a(p.fullData,o,p.id);t(h,i,{font:p.font,scene:p.id,data:A,bgColor:y,calendar:p.calendar,autotypenumbersDflt:p.autotypenumbersDflt,fullLayout:p.fullLayout}),l.getComponentMethod("annotations3d","handleDefaults")(h,i,p);var k=p.getDfltFromLayout("dragmode");if(k!==!1&&!k)if(k="orbit",h.camera&&h.camera.up){var R=h.camera.up.x,L=h.camera.up.y,z=h.camera.up.z;z!==0&&(!R||!L||!z||z/Math.sqrt(R*R+L*L+z*z)>.999)&&(k="turntable")}else k="turntable";s("dragmode",k),s("hovermode",p.getDfltFromLayout("hovermode"))}},{"../../../components/color":643,"../../../lib":778,"../../../registry":911,"../../get_data":865,"../../subplot_defaults":905,"./axis_defaults":873,"./layout_attributes":876}],876:[function(e,v,M){var r=e("./axis_attributes"),n=e("../../domain").attributes,l=e("../../../lib/extend").extendFlat,c=e("../../../lib").counterRegex;function t(f,a,o){return{x:{valType:"number",dflt:f,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:o,editType:"camera"},editType:"camera"}}v.exports={_arrayAttrRegexps:[c("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:l(t(0,0,1),{}),center:l(t(0,0,0),{}),eye:l(t(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:n({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:r,yaxis:r,zaxis:r,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":778,"../../../lib/extend":768,"../../domain":855,"./axis_attributes":872}],877:[function(e,v,M){var r=e("../../../lib/str2rgbarray"),n=["xaxis","yaxis","zaxis"];function l(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var c=l.prototype;c.merge=function(f){for(var a=0;a<3;++a){var o=f[n[a]];if(!o.visible){this.enabled[a]=!1,this.drawSides[a]=!1;continue}this.enabled[a]=o.showspikes,this.colors[a]=r(o.spikecolor),this.drawSides[a]=o.spikesides,this.lineWidth[a]=o.spikethickness}};function t(f){var a=new l;return a.merge(f),a}v.exports=t},{"../../../lib/str2rgbarray":802}],878:[function(e,v,M){v.exports=t;var r=e("../../cartesian/axes"),n=e("../../../lib"),l=["xaxis","yaxis","zaxis"];function c(f){for(var a=new Array(3),o=0;o<3;++o){for(var u=f[o],h=new Array(u.length),i=0;i<u.length;++i)h[i]=u[i].x;a[o]=h}return a}function t(f){for(var a=f.axesOptions,o=f.glplot.axesPixels,u=f.fullSceneLayout,h=[[],[],[]],i=0;i<3;++i){var s=u[l[i]];if(s._length=(o[i].hi-o[i].lo)*o[i].pixelsPerDataUnit/f.dataScale[i],Math.abs(s._length)===1/0||isNaN(s._length))h[i]=[];else{s._input_range=s.range.slice(),s.range[0]=o[i].lo/f.dataScale[i],s.range[1]=o[i].hi/f.dataScale[i],s._m=1/(f.dataScale[i]*o[i].pixelsPerDataUnit),s.range[0]===s.range[1]&&(s.range[0]-=1,s.range[1]+=1);var p=s.tickmode;if(s.tickmode==="auto"){s.tickmode="linear";var d=s.nticks||n.constrain(s._length/40,4,9);r.autoTicks(s,Math.abs(s.range[1]-s.range[0])/d)}for(var y=r.calcTicks(s,{msUTC:!0}),b=0;b<y.length;++b)y[b].x=y[b].x*f.dataScale[i],s.type==="date"&&(y[b].text=y[b].text.replace(/\<br\>/g," "));h[i]=y,s.tickmode=p}}a.ticks=h;for(var i=0;i<3;++i){.5*(f.glplot.bounds[0][i]+f.glplot.bounds[1][i]);for(var b=0;b<2;++b)a.bounds[b][i]=f.glplot.bounds[b][i]}f.contourLevels=c(h)}},{"../../../lib":778,"../../cartesian/axes":828}],879:[function(e,v,M){function r(l,c){var t=[0,0,0,0],f,a;for(f=0;f<4;++f)for(a=0;a<4;++a)t[a]+=l[4*f+a]*c[f];return t}function n(l,c){var t=r(l.projection,r(l.view,r(l.model,[c[0],c[1],c[2],1])));return t}v.exports=n},{}],880:[function(e,v,M){var r=e("gl-plot3d"),n=r.createCamera,l=r.createScene,c=e("webgl-context"),t=e("has-passive-events"),f=e("../../registry"),a=e("../../lib"),o=a.preserveDrawingBuffer(),u=e("../../plots/cartesian/axes"),h=e("../../components/fx"),i=e("../../lib/str2rgbarray"),s=e("../../lib/show_no_webgl_msg"),p=e("./project"),d=e("./layout/convert"),y=e("./layout/spikes"),b=e("./layout/tick_marks"),m,_;function T(D,F){var N=document.createElement("div"),G=D.container;this.graphDiv=D.graphDiv;var U=document.createElementNS("http://www.w3.org/2000/svg","svg");U.style.position="absolute",U.style.top=U.style.left="0px",U.style.width=U.style.height="100%",U.style["z-index"]=20,U.style["pointer-events"]="none",N.appendChild(U),this.svgContainer=U,N.id=D.id,N.style.position="absolute",N.style.top=N.style.left="0px",N.style.width=N.style.height="100%",G.appendChild(N),this.fullLayout=F,this.id=D.id||"scene",this.fullSceneLayout=F[this.id],this.plotArgs=[[],{},{}],this.axesOptions=d(F,F[this.id]),this.spikeOptions=y(F[this.id]),this.container=N,this.staticMode=!!D.staticPlot,this.pixelRatio=this.pixelRatio||D.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=f.getComponentMethod("annotations3d","convert"),this.drawAnnotations=f.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var g=T.prototype;g.prepareOptions=function(){var D=this,F={canvas:D.canvas,gl:D.gl,glOptions:{preserveDrawingBuffer:o,premultipliedAlpha:!0,antialias:!0},container:D.container,axes:D.axesOptions,spikes:D.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:D.camera,pixelRatio:D.pixelRatio};if(D.staticMode){if(!_&&(m=document.createElement("canvas"),_=c({canvas:m,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!_))throw new Error("error creating static canvas/context for image server");F.gl=_,F.canvas=m}return F};var A=!0;g.tryCreatePlot=function(){var D=this,F=D.prepareOptions(),N=!0;try{D.glplot=l(F)}catch{if(D.staticMode||!A||o)N=!1;else{a.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{o=F.glOptions.preserveDrawingBuffer=!0,D.glplot=l(F)}catch{o=F.glOptions.preserveDrawingBuffer=!1,N=!1}}}return A=!1,N},g.initializeGLCamera=function(){var D=this,F=D.fullSceneLayout.camera,N=F.projection.type==="orthographic";D.camera=n(D.container,{center:[F.center.x,F.center.y,F.center.z],eye:[F.eye.x,F.eye.y,F.eye.z],up:[F.up.x,F.up.y,F.up.z],_ortho:N,zoomMin:.01,zoomMax:100,mode:"orbit"})},g.initializeGLPlot=function(){var D=this;D.initializeGLCamera();var F=D.tryCreatePlot();if(!F)return s(D);D.traces={},D.make4thDimension();var N=D.graphDiv,G=N.layout,U=function(){var I={};return D.isCameraChanged(G)&&(I[D.id+".camera"]=D.getCamera()),D.isAspectChanged(G)&&(I[D.id+".aspectratio"]=D.glplot.getAspectratio(),G[D.id].aspectmode!=="manual"&&(D.fullSceneLayout.aspectmode=G[D.id].aspectmode=I[D.id+".aspectmode"]="manual")),I},X=function(I){if(I.fullSceneLayout.dragmode!==!1){var B=U();I.saveLayout(G),I.graphDiv.emit("plotly_relayout",B)}};return D.glplot.canvas&&(D.glplot.canvas.addEventListener("mouseup",function(){X(D)}),D.glplot.canvas.addEventListener("wheel",function(I){if(N._context._scrollZoom.gl3d){if(D.camera._ortho){var B=I.deltaX>I.deltaY?1.1:.9090909090909091,j=D.glplot.getAspectratio();D.glplot.setAspectratio({x:B*j.x,y:B*j.y,z:B*j.z})}X(D)}},t?{passive:!1}:!1),D.glplot.canvas.addEventListener("mousemove",function(){if(D.fullSceneLayout.dragmode!==!1&&D.camera.mouseListener.buttons!==0){var I=U();D.graphDiv.emit("plotly_relayouting",I)}}),D.staticMode||D.glplot.canvas.addEventListener("webglcontextlost",function(I){N&&N.emit&&N.emit("plotly_webglcontextlost",{event:I,layer:D.id})},!1)),D.glplot.oncontextloss=function(){D.recoverContext()},D.glplot.onrender=function(){D.render()},!0},g.render=function(){var D=this,F=D.graphDiv,N,G=D.svgContainer,U=D.container.getBoundingClientRect();F._fullLayout._calcInverseTransform(F);var X=F._fullLayout._invScaleX,I=F._fullLayout._invScaleY,B=U.width*X,j=U.height*I;G.setAttributeNS(null,"viewBox","0 0 "+B+" "+j),G.setAttributeNS(null,"width",B),G.setAttributeNS(null,"height",j),b(D),D.glplot.axes.update(D.axesOptions);for(var H=Object.keys(D.traces),K=null,te=D.glplot.selection,J=0;J<H.length;++J)N=D.traces[H[J]],N.data.hoverinfo!=="skip"&&N.handlePick(te)&&(K=N),N.setContourLevels&&N.setContourLevels();function oe(me,be){var ke=D.fullSceneLayout[me];return u.tickText(ke,ke.d2l(be),"hover").text}var ie;if(K!==null){var Q=p(D.glplot.cameraParams,te.dataCoordinate);N=K.data;var V=F._fullData[N.index],se=te.index,re={xLabel:oe("xaxis",te.traceCoordinate[0]),yLabel:oe("yaxis",te.traceCoordinate[1]),zLabel:oe("zaxis",te.traceCoordinate[2])},ee=h.castHoverinfo(V,D.fullLayout,se),ae=(ee||"").split("+"),fe=ee&&ee==="all";!V.hovertemplate&&!fe&&(ae.indexOf("x")===-1&&(re.xLabel=void 0),ae.indexOf("y")===-1&&(re.yLabel=void 0),ae.indexOf("z")===-1&&(re.zLabel=void 0),ae.indexOf("text")===-1&&(te.textLabel=void 0),ae.indexOf("name")===-1&&(K.name=void 0));var de,pe=[];N.type==="cone"||N.type==="streamtube"?(re.uLabel=oe("xaxis",te.traceCoordinate[3]),(fe||ae.indexOf("u")!==-1)&&pe.push("u: "+re.uLabel),re.vLabel=oe("yaxis",te.traceCoordinate[4]),(fe||ae.indexOf("v")!==-1)&&pe.push("v: "+re.vLabel),re.wLabel=oe("zaxis",te.traceCoordinate[5]),(fe||ae.indexOf("w")!==-1)&&pe.push("w: "+re.wLabel),re.normLabel=te.traceCoordinate[6].toPrecision(3),(fe||ae.indexOf("norm")!==-1)&&pe.push("norm: "+re.normLabel),N.type==="streamtube"&&(re.divergenceLabel=te.traceCoordinate[7].toPrecision(3),(fe||ae.indexOf("divergence")!==-1)&&pe.push("divergence: "+re.divergenceLabel)),te.textLabel&&pe.push(te.textLabel),de=pe.join("<br>")):N.type==="isosurface"||N.type==="volume"?(re.valueLabel=u.tickText(D._mockAxis,D._mockAxis.d2l(te.traceCoordinate[3]),"hover").text,pe.push("value: "+re.valueLabel),te.textLabel&&pe.push(te.textLabel),de=pe.join("<br>")):de=te.textLabel;var W={x:te.traceCoordinate[0],y:te.traceCoordinate[1],z:te.traceCoordinate[2],data:V._input,fullData:V,curveNumber:V.index,pointNumber:se};h.appendArrayPointValue(W,V,se),N._module.eventData&&(W=V._module.eventData(W,te,V,{},se));var ue={points:[W]};D.fullSceneLayout.hovermode&&h.loneHover({trace:V,x:(.5+.5*Q[0]/Q[3])*B,y:(.5-.5*Q[1]/Q[3])*j,xLabel:re.xLabel,yLabel:re.yLabel,zLabel:re.zLabel,text:de,name:K.name,color:h.castHoverOption(V,se,"bgcolor")||K.color,borderColor:h.castHoverOption(V,se,"bordercolor"),fontFamily:h.castHoverOption(V,se,"font.family"),fontSize:h.castHoverOption(V,se,"font.size"),fontColor:h.castHoverOption(V,se,"font.color"),nameLength:h.castHoverOption(V,se,"namelength"),textAlign:h.castHoverOption(V,se,"align"),hovertemplate:a.castOption(V,se,"hovertemplate"),hovertemplateLabels:a.extendFlat({},W,re),eventData:[W]},{container:G,gd:F}),te.buttons&&te.distance<5?F.emit("plotly_click",ue):F.emit("plotly_hover",ue),ie=ue}else h.loneUnhover(G),F.emit("plotly_unhover",ie);D.drawAnnotations(D)},g.recoverContext=function(){var D=this;D.glplot.dispose();var F=function(){if(D.glplot.gl.isContextLost()){requestAnimationFrame(F);return}if(!D.initializeGLPlot()){a.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}D.plot.apply(D,D.plotArgs)};requestAnimationFrame(F)};var k=["xaxis","yaxis","zaxis"];function R(D,F,N){for(var G=D.fullSceneLayout,U=0;U<3;U++){var X=k[U],I=X.charAt(0),B=G[X],j=F[I],H=F[I+"calendar"],K=F["_"+I+"length"];if(!a.isArrayOrTypedArray(j))N[0][U]=Math.min(N[0][U],0),N[1][U]=Math.max(N[1][U],K-1);else for(var te,J=0;J<(K||j.length);J++)if(a.isArrayOrTypedArray(j[J]))for(var oe=0;oe<j[J].length;++oe)te=B.d2l(j[J][oe],0,H),!isNaN(te)&&isFinite(te)&&(N[0][U]=Math.min(N[0][U],te),N[1][U]=Math.max(N[1][U],te));else te=B.d2l(j[J],0,H),!isNaN(te)&&isFinite(te)&&(N[0][U]=Math.min(N[0][U],te),N[1][U]=Math.max(N[1][U],te))}}function L(D,F){for(var N=D.fullSceneLayout,G=N.annotations||[],U=0;U<3;U++)for(var X=k[U],I=X.charAt(0),B=N[X],j=0;j<G.length;j++){var H=G[j];if(H.visible){var K=B.r2l(H[I]);!isNaN(K)&&isFinite(K)&&(F[0][U]=Math.min(F[0][U],K),F[1][U]=Math.max(F[1][U],K))}}}g.plot=function(D,F,N){var G=this;if(G.plotArgs=[D,F,N],!G.glplot.contextLost){var U,X,I,B,j,H,K=F[G.id],te=N[G.id];G.fullLayout=F,G.fullSceneLayout=K,G.axesOptions.merge(F,K),G.spikeOptions.merge(K),G.setViewport(K),G.updateFx(K.dragmode,K.hovermode),G.camera.enableWheel=G.graphDiv._context._scrollZoom.gl3d,G.glplot.setClearColor(i(K.bgcolor)),G.setConvert(j),D?Array.isArray(D)||(D=[D]):D=[];var J=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(I=0;I<D.length;++I)U=D[I],!(U.visible!==!0||U._length===0)&&R(this,U,J);L(this,J);var oe=[1,1,1];for(B=0;B<3;++B)J[1][B]===J[0][B]?oe[B]=1:oe[B]=1/(J[1][B]-J[0][B]);for(G.dataScale=oe,G.convertAnnotations(this),I=0;I<D.length;++I)U=D[I],!(U.visible!==!0||U._length===0)&&(X=G.traces[U.uid],X?X.data.type===U.type?X.update(U):(X.dispose(),X=U._module.plot(this,U),G.traces[U.uid]=X):(X=U._module.plot(this,U),G.traces[U.uid]=X),X.name=U.name);var ie=Object.keys(G.traces);e:for(I=0;I<ie.length;++I){for(B=0;B<D.length;++B)if(D[B].uid===ie[I]&&D[B].visible===!0&&D[B]._length!==0)continue e;X=G.traces[ie[I]],X.dispose(),delete G.traces[ie[I]]}G.glplot.objects.sort(function(Ne,qe){return Ne._trace.data.index-qe._trace.data.index});var Q=[[0,0,0],[0,0,0]],V={};for(I=0;I<3;++I){if(j=K[k[I]],H=j.type,H in V?(V[H].acc*=oe[I],V[H].count+=1):V[H]={acc:oe[I],count:1},j.autorange){Q[0][I]=1/0,Q[1][I]=-1/0;var se=G.glplot.objects,re=G.fullSceneLayout.annotations||[],ee=j._name.charAt(0);for(B=0;B<se.length;B++){var ae=se[B],fe=ae.bounds,de=ae._trace.data._pad||0;ae.constructor.name==="ErrorBars"&&j._lowerLogErrorBound?Q[0][I]=Math.min(Q[0][I],j._lowerLogErrorBound):Q[0][I]=Math.min(Q[0][I],fe[0][I]/oe[I]-de),Q[1][I]=Math.max(Q[1][I],fe[1][I]/oe[I]+de)}for(B=0;B<re.length;B++){var pe=re[B];if(pe.visible){var W=j.r2l(pe[ee]);Q[0][I]=Math.min(Q[0][I],W),Q[1][I]=Math.max(Q[1][I],W)}}if("rangemode"in j&&j.rangemode==="tozero"&&(Q[0][I]=Math.min(Q[0][I],0),Q[1][I]=Math.max(Q[1][I],0)),Q[0][I]>Q[1][I])Q[0][I]=-1,Q[1][I]=1;else{var ue=Q[1][I]-Q[0][I];Q[0][I]-=ue/32,Q[1][I]+=ue/32}if(j.autorange==="reversed"){var me=Q[0][I];Q[0][I]=Q[1][I],Q[1][I]=me}}else{var be=j.range;Q[0][I]=j.r2l(be[0]),Q[1][I]=j.r2l(be[1])}Q[0][I]===Q[1][I]&&(Q[0][I]-=1,Q[1][I]+=1),G.glplot.setBounds(I,{min:Q[0][I]*oe[I],max:Q[1][I]*oe[I]})}var ke,Pe=K.aspectmode;if(Pe==="cube")ke=[1,1,1];else if(Pe==="manual"){var je=K.aspectratio;ke=[je.x,je.y,je.z]}else if(Pe==="auto"||Pe==="data"){var ze=[1,1,1];for(I=0;I<3;++I){j=K[k[I]],H=j.type;var Ze=V[H];ze[I]=Math.pow(Ze.acc,1/Ze.count)/oe[I]}Pe==="data"||Math.max.apply(null,ze)/Math.min.apply(null,ze)<=4?ke=ze:ke=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");K.aspectratio.x=te.aspectratio.x=ke[0],K.aspectratio.y=te.aspectratio.y=ke[1],K.aspectratio.z=te.aspectratio.z=ke[2],G.glplot.setAspectratio(K.aspectratio),G.viewInitial.aspectratio||(G.viewInitial.aspectratio={x:K.aspectratio.x,y:K.aspectratio.y,z:K.aspectratio.z}),G.viewInitial.aspectmode||(G.viewInitial.aspectmode=K.aspectmode);var tt=K.domain||null,Ce=F._size||null;if(tt&&Ce){var Ae=G.container.style;Ae.position="absolute",Ae.left=Ce.l+tt.x[0]*Ce.w+"px",Ae.top=Ce.t+(1-tt.y[1])*Ce.h+"px",Ae.width=Ce.w*(tt.x[1]-tt.x[0])+"px",Ae.height=Ce.h*(tt.y[1]-tt.y[0])+"px"}G.glplot.redraw()}},g.destroy=function(){var D=this;D.glplot&&(D.camera.mouseListener.enabled=!1,D.container.removeEventListener("wheel",D.camera.wheelListener),D.camera=null,D.glplot.dispose(),D.container.parentNode.removeChild(D.container),D.glplot=null)};function z(D){return[[D.eye.x,D.eye.y,D.eye.z],[D.center.x,D.center.y,D.center.z],[D.up.x,D.up.y,D.up.z]]}function E(D){return{up:{x:D.up[0],y:D.up[1],z:D.up[2]},center:{x:D.center[0],y:D.center[1],z:D.center[2]},eye:{x:D.eye[0],y:D.eye[1],z:D.eye[2]},projection:{type:D._ortho===!0?"orthographic":"perspective"}}}g.getCamera=function(){var D=this;return D.camera.view.recalcMatrix(D.camera.view.lastT()),E(D.camera)},g.setViewport=function(D){var F=this,N=D.camera;F.camera.lookAt.apply(this,z(N)),F.glplot.setAspectratio(D.aspectratio);var G=N.projection.type==="orthographic",U=F.camera._ortho;G!==U&&(F.glplot.redraw(),F.glplot.clearRGBA(),F.glplot.dispose(),F.initializeGLPlot())},g.isCameraChanged=function(D){var F=this,N=F.getCamera(),G=a.nestedProperty(D,F.id+".camera"),U=G.get();function X(H,K,te,J){var oe=["up","center","eye"],ie=["x","y","z"];return K[oe[te]]&&H[oe[te]][ie[J]]===K[oe[te]][ie[J]]}var I=!1;if(U===void 0)I=!0;else{for(var B=0;B<3;B++)for(var j=0;j<3;j++)if(!X(N,U,B,j)){I=!0;break}(!U.projection||N.projection&&N.projection.type!==U.projection.type)&&(I=!0)}return I},g.isAspectChanged=function(D){var F=this,N=F.glplot.getAspectratio(),G=a.nestedProperty(D,F.id+".aspectratio"),U=G.get();return U===void 0||U.x!==N.x||U.y!==N.y||U.z!==N.z},g.saveLayout=function(D){var F=this,N=F.fullLayout,G,U,X,I,B,j,H=F.isCameraChanged(D),K=F.isAspectChanged(D),te=H||K;if(te){var J={};if(H&&(G=F.getCamera(),U=a.nestedProperty(D,F.id+".camera"),X=U.get(),J[F.id+".camera"]=X),K&&(I=F.glplot.getAspectratio(),B=a.nestedProperty(D,F.id+".aspectratio"),j=B.get(),J[F.id+".aspectratio"]=j),f.call("_storeDirectGUIEdit",D,N._preGUI,J),H){U.set(G);var oe=a.nestedProperty(N,F.id+".camera");oe.set(G)}if(K){B.set(I);var ie=a.nestedProperty(N,F.id+".aspectratio");ie.set(I),F.glplot.redraw()}}return te},g.updateFx=function(D,F){var N=this,G=N.camera;if(G)if(D==="orbit")G.mode="orbit",G.keyBindingMode="rotate";else if(D==="turntable"){G.up=[0,0,1],G.mode="turntable",G.keyBindingMode="rotate";var U=N.graphDiv,X=U._fullLayout,I=N.fullSceneLayout.camera,B=I.up.x,j=I.up.y,H=I.up.z;if(H/Math.sqrt(B*B+j*j+H*H)<.999){var K=N.id+".camera.up",te={x:0,y:0,z:1},J={};J[K]=te;var oe=U.layout;f.call("_storeDirectGUIEdit",oe,X._preGUI,J),I.up=te,a.nestedProperty(oe,K).set(te)}}else G.keyBindingMode=D;N.fullSceneLayout.hovermode=F};function S(D,F,N){for(var G=0,U=N-1;G<U;++G,--U)for(var X=0;X<F;++X)for(var I=0;I<4;++I){var B=4*(F*G+X)+I,j=4*(F*U+X)+I,H=D[B];D[B]=D[j],D[j]=H}}function C(D,F,N){for(var G=0;G<N;++G)for(var U=0;U<F;++U){var X=4*(F*G+U),I=D[X+3];if(I>0)for(var B=255/I,j=0;j<3;++j)D[X+j]=Math.min(B*D[X+j],255)}}g.toImage=function(D){var F=this;D||(D="png"),F.staticMode&&F.container.appendChild(m),F.glplot.redraw();var N=F.glplot.gl,G=N.drawingBufferWidth,U=N.drawingBufferHeight;N.bindFramebuffer(N.FRAMEBUFFER,null);var X=new Uint8Array(G*U*4);N.readPixels(0,0,G,U,N.RGBA,N.UNSIGNED_BYTE,X),S(X,G,U),C(X,G,U);var I=document.createElement("canvas");I.width=G,I.height=U;var B=I.getContext("2d"),j=B.createImageData(G,U);j.data.set(X),B.putImageData(j,0,0);var H;switch(D){case"jpeg":H=I.toDataURL("image/jpeg");break;case"webp":H=I.toDataURL("image/webp");break;default:H=I.toDataURL("image/png")}return F.staticMode&&F.container.removeChild(m),H},g.setConvert=function(){for(var D=this,F=0;F<3;F++){var N=D.fullSceneLayout[k[F]];u.setConvert(N,D.fullLayout),N.setScale=a.noop}},g.make4thDimension=function(){var D=this,F=D.graphDiv,N=F._fullLayout;D._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},u.setConvert(D._mockAxis,N)},v.exports=T},{"../../components/fx":683,"../../lib":778,"../../lib/show_no_webgl_msg":800,"../../lib/str2rgbarray":802,"../../plots/cartesian/axes":828,"../../registry":911,"./layout/convert":874,"./layout/spikes":877,"./layout/tick_marks":878,"./project":879,"gl-plot3d":321,"has-passive-events":441,"webgl-context":606}],881:[function(e,v,M){v.exports=function(n,l,c,t){t=t||n.length;for(var f=new Array(t),a=0;a<t;a++)f[a]=[n[a],l[a],c[a]];return f}},{}],882:[function(e,v,M){var r=e("./font_attributes"),n=e("./animation_attributes"),l=e("../components/color/attributes"),c=e("../components/shapes/draw_newshape/attributes"),t=e("./pad_attributes"),f=e("../lib/extend").extendFlat,a=r({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif',a.size.dflt=12,a.color.dflt=l.defaultLine,v.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:r({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:f(t({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:l.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:l.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:l.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},newshape:c.newshape,activeshape:c.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:f({},n.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:r({editType:"layoutstyle"})}}},{"../components/color/attributes":642,"../components/shapes/draw_newshape/attributes":725,"../lib/extend":768,"./animation_attributes":822,"./font_attributes":856,"./pad_attributes":890}],883:[function(e,v,M){var r="1.10.1",n={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:'<a href="http://www.openstreetmap.org/about/" target="_blank">© OpenStreetMap</a>',tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:'<a href="https://carto.com/" target="_blank">© CARTO</a>',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:'<a href="https://carto.com/" target="_blank">© CARTO</a>',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.',tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},l=Object.keys(n);v.exports={requiredVersion:r,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:n,styleValuesNonMapbox:l,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+r+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",l.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{}],884:[function(e,v,M){var r=e("../../lib");v.exports=function(l,c){var t=l.split(" "),f=t[0],a=t[1],o=r.isArrayOrTypedArray(c)?r.mean(c):c,u=.5+o/100,h=1.5+o/100,i=["",""],s=[0,0];switch(f){case"top":i[0]="top",s[1]=-h;break;case"bottom":i[0]="bottom",s[1]=h;break}switch(a){case"left":i[1]="right",s[0]=-u;break;case"right":i[1]="left",s[0]=u;break}var p;return i[0]&&i[1]?p=i.join("-"):i[0]?p=i[0]:i[1]?p=i[1]:p="center",{anchor:p,offset:s}}},{"../../lib":778}],885:[function(e,v,M){var r=e("mapbox-gl"),n=e("../../lib"),l=n.strTranslate,c=n.strScale,t=e("../../plots/get_data").getSubplotCalcData,f=e("../../constants/xmlns_namespaces"),a=e("d3"),o=e("../../components/drawing"),u=e("../../lib/svg_text_utils"),h=e("./mapbox"),i="mapbox",s=M.constants=e("./constants");M.name=i,M.attr="subplot",M.idRoot=i,M.idRegex=M.attrRegex=n.counterRegex(i),M.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},M.layoutAttributes=e("./layout_attributes"),M.supplyLayoutDefaults=e("./layout_defaults"),M.plot=function(b){var m=b._fullLayout,_=b.calcdata,T=m._subplots[i];if(r.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var g=p(b,T);r.accessToken=g;for(var A=0;A<T.length;A++){var k=T[A],R=t(_,i,k),L=m[k],z=L._subplot;z||(z=new h(b,k),m[k]._subplot=z),z.viewInitial||(z.viewInitial={center:n.extendFlat({},L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch}),z.plot(R,m,b._promises)}},M.clean=function(y,b,m,_){for(var T=_._subplots[i]||[],g=0;g<T.length;g++){var A=T[g];!b[A]&&_[A]._subplot&&_[A]._subplot.destroy()}},M.toSVG=function(y){for(var b=y._fullLayout,m=b._subplots[i],_=b._size,T=0;T<m.length;T++){var g=b[m[T]],A=g.domain,k=g._subplot,R=k.toImage("png"),L=b._glimages.append("svg:image");L.attr({xmlns:f.svg,"xlink:href":R,x:_.l+_.w*A.x[0],y:_.t+_.h*(1-A.y[1]),width:_.w*(A.x[1]-A.x[0]),height:_.h*(A.y[1]-A.y[0]),preserveAspectRatio:"none"});var z=a.select(g._subplot.div),E=z.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!E){var S=b._glimages.append("g");S.attr("transform",l(_.l+_.w*A.x[0]+10,_.t+_.h*(1-A.y[0])-31)),S.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),S.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),S.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),S.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var C=z.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),D=b._glimages.append("g"),F=D.append("text");F.text(C).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":C});var N=o.bBox(F.node()),G=_.w*(A.x[1]-A.x[0]);if(N.width>G/2){var U=C.split("|").join("<br>");F.text(U).attr("data-unformatted",U).call(u.convertToTspans,y),N=o.bBox(F.node())}F.attr("transform",l(-3,-N.height+8)),D.insert("rect",".static-attribution").attr({x:-N.width-6,y:-N.height-3,width:N.width+6,height:N.height+3,fill:"rgba(255, 255, 255, 0.75)"});var X=1;N.width+6>G&&(X=G/(N.width+6));var I=[_.l+_.w*A.x[1],_.t+_.h*(1-A.y[0])];D.attr("transform",l(I[0],I[1])+c(X))}};function p(y,b){var m=y._fullLayout,_=y._context;if(_.mapboxAccessToken==="")return"";for(var T=[],g=[],A=!1,k=!1,R=0;R<b.length;R++){var L=m[b[R]],z=L.accesstoken;d(L.style)&&(z?n.pushUnique(T,z):(d(L._input.style)&&(n.error("Uses Mapbox map style, but did not set an access token."),A=!0),k=!0)),z&&n.pushUnique(g,z)}if(k){var E=A?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw n.error(E),new Error(E)}return T.length?(T.length>1&&n.warn(s.multipleTokensErrorMsg),T[0]):(g.length&&n.log(["Listed mapbox access token(s)",g.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function d(y){return typeof y=="string"&&(s.styleValuesMapbox.indexOf(y)!==-1||y.indexOf("mapbox://")===0)}M.updateFx=function(y){for(var b=y._fullLayout,m=b._subplots[i],_=0;_<m.length;_++){var T=b[m[_]]._subplot;T.updateFx(b)}}},{"../../components/drawing":665,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/get_data":865,"./constants":883,"./layout_attributes":887,"./layout_defaults":888,"./mapbox":889,d3:169,"mapbox-gl":473}],886:[function(e,v,M){var r=e("../../lib"),n=e("../../lib/svg_text_utils").sanitizeHTML,l=e("./convert_text_opts"),c=e("./constants");function t(h,i){this.subplot=h,this.uid=h.uid+"-"+i,this.index=i,this.idSource="source-"+this.uid,this.idLayer=c.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var f=t.prototype;f.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=a(i)},f.needsNewImage=function(h){var i=this.subplot.map;return i.getSource(this.idSource)&&this.sourceType==="image"&&h.sourcetype==="image"&&(this.source!==h.source||JSON.stringify(this.coordinates)!==JSON.stringify(h.coordinates))},f.needsNewSource=function(h){return this.sourceType!==h.sourcetype||JSON.stringify(this.source)!==JSON.stringify(h.source)||this.layerType!==h.type},f.needsNewLayer=function(h){return this.layerType!==h.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},f.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},f.updateImage=function(h){var i=this.subplot.map;i.getSource(this.idSource).updateImage({url:h.source,coordinates:h.coordinates});var s=this.findFollowingMapboxLayerId(this.lookupBelow());s!==null&&this.subplot.map.moveLayer(this.idLayer,s)},f.updateSource=function(h){var i=this.subplot.map;if(i.getSource(this.idSource)&&i.removeSource(this.idSource),this.sourceType=h.sourcetype,this.source=h.source,!!a(h)){var s=u(h);i.addSource(this.idSource,s)}},f.findFollowingMapboxLayerId=function(h){if(h==="traces")for(var i=this.subplot.getMapLayers(),s=0;s<i.length;s++){var p=i[s].id;if(typeof p=="string"&&p.indexOf(c.traceLayerPrefix)===0){h=p;break}}return h},f.updateLayer=function(h){var i=this.subplot,s=o(h),p=this.lookupBelow(),d=this.findFollowingMapboxLayerId(p);this.removeLayer(),a(h)&&i.addLayer({id:this.idLayer,source:this.idSource,"source-layer":h.sourcelayer||"",type:h.type,minzoom:h.minzoom,maxzoom:h.maxzoom,layout:s.layout,paint:s.paint},d),this.layerType=h.type,this.below=p},f.updateStyle=function(h){if(a(h)){var i=o(h);this.subplot.setOptions(this.idLayer,"setLayoutProperty",i.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",i.paint)}},f.removeLayer=function(){var h=this.subplot.map;h.getLayer(this.idLayer)&&h.removeLayer(this.idLayer)},f.dispose=function(){var h=this.subplot.map;h.getLayer(this.idLayer)&&h.removeLayer(this.idLayer),h.getSource(this.idSource)&&h.removeSource(this.idSource)};function a(h){if(!h.visible)return!1;var i=h.source;if(Array.isArray(i)&&i.length>0){for(var s=0;s<i.length;s++)if(typeof i[s]!="string"||i[s].length===0)return!1;return!0}return r.isPlainObject(i)||typeof i=="string"&&i.length>0}function o(h){var i={},s={};switch(h.type){case"circle":r.extendFlat(s,{"circle-radius":h.circle.radius,"circle-color":h.color,"circle-opacity":h.opacity});break;case"line":r.extendFlat(s,{"line-width":h.line.width,"line-color":h.color,"line-opacity":h.opacity,"line-dasharray":h.line.dash});break;case"fill":r.extendFlat(s,{"fill-color":h.color,"fill-outline-color":h.fill.outlinecolor,"fill-opacity":h.opacity});break;case"symbol":var p=h.symbol,d=l(p.textposition,p.iconsize);r.extendFlat(i,{"icon-image":p.icon+"-15","icon-size":p.iconsize/10,"text-field":p.text,"text-size":p.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":p.placement}),r.extendFlat(s,{"icon-color":h.color,"text-color":p.textfont.color,"text-opacity":h.opacity});break;case"raster":r.extendFlat(s,{"raster-fade-duration":0,"raster-opacity":h.opacity});break}return{layout:i,paint:s}}function u(h){var i=h.sourcetype,s=h.source,p={type:i},d;return i==="geojson"?d="data":i==="vector"?d=typeof s=="string"?"url":"tiles":i==="raster"?(d="tiles",p.tileSize=256):i==="image"&&(d="url",p.coordinates=h.coordinates),p[d]=s,h.sourceattribution&&(p.attribution=n(h.sourceattribution)),p}v.exports=function(i,s,p){var d=new t(i,s);return d.update(p),d}},{"../../lib":778,"../../lib/svg_text_utils":803,"./constants":883,"./convert_text_opts":884}],887:[function(e,v,M){var r=e("../../lib"),n=e("../../components/color").defaultLine,l=e("../domain").attributes,c=e("../font_attributes"),t=e("../../traces/scatter/attributes").textposition,f=e("../../plot_api/edit_types").overrideAll,a=e("../../plot_api/plot_template").templatedArray,o=e("./constants"),u=c({});u.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var h=v.exports=f({_arrayAttrRegexps:[r.counterRegex("mapbox",".layers",!0)],domain:l({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:o.styleValuesMapbox.concat(o.styleValuesNonMapbox),dflt:o.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:a("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:n},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:n}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:u,textposition:r.extendFlat({},t,{arrayOk:!1})}})},"plot","from-root");h.uirevision={valType:"any",editType:"none"}},{"../../components/color":643,"../../lib":778,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../traces/scatter/attributes":1187,"../domain":855,"../font_attributes":856,"./constants":883}],888:[function(e,v,M){var r=e("../../lib"),n=e("../subplot_defaults"),l=e("../array_container_defaults"),c=e("./layout_attributes");v.exports=function(o,u,h){n(o,u,h,{type:"mapbox",attributes:c,handleDefaults:t,partition:"y",accessToken:u._mapboxAccessToken})};function t(a,o,u,h){u("accesstoken",h.accessToken),u("style"),u("center.lon"),u("center.lat"),u("zoom"),u("bearing"),u("pitch"),l(a,o,{name:"layers",handleItemDefaults:f}),o._input=a}function f(a,o){function u(y,b){return r.coerce(a,o,c.layers,y,b)}var h=u("visible");if(h){var i=u("sourcetype"),s=i==="raster"||i==="image";u("source"),u("sourceattribution"),i==="vector"&&u("sourcelayer"),i==="image"&&u("coordinates");var p;s&&(p="raster");var d=u("type",p);s&&d!=="raster"&&(d=o.type="raster",r.log("Source types *raster* and *image* must drawn *raster* layer type.")),u("below"),u("color"),u("opacity"),u("minzoom"),u("maxzoom"),d==="circle"&&u("circle.radius"),d==="line"&&(u("line.width"),u("line.dash")),d==="fill"&&u("fill.outlinecolor"),d==="symbol"&&(u("symbol.icon"),u("symbol.iconsize"),u("symbol.text"),r.coerceFont(u,"symbol.textfont"),u("symbol.textposition"),u("symbol.placement"))}}},{"../../lib":778,"../array_container_defaults":823,"../subplot_defaults":905,"./layout_attributes":887}],889:[function(e,v,M){var r=e("mapbox-gl"),n=e("../../lib"),l=e("../../lib/geo_location_utils"),c=e("../../registry"),t=e("../cartesian/axes"),f=e("../../components/dragelement"),a=e("../../components/fx"),o=e("../../components/dragelement/helpers"),u=o.rectMode,h=o.drawMode,i=o.selectMode,s=e("../cartesian/select").prepSelect,p=e("../cartesian/select").clearSelect,d=e("../cartesian/select").clearSelectionsCache,y=e("../cartesian/select").selectOnClick,b=e("./constants"),m=e("./layers");function _(L,z){this.id=z,this.gd=L;var E=L._fullLayout,S=L._context;this.container=E._glcontainer.node(),this.isStatic=S.staticPlot,this.uid=E._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(E),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var T=_.prototype;T.plot=function(L,z,E){var S=this,C=z[S.id];S.map&&C.accesstoken!==S.accessToken&&(S.map.remove(),S.map=null,S.styleObj=null,S.traceHash={},S.layerList=[]);var D;S.map?D=new Promise(function(F,N){S.updateMap(L,z,F,N)}):D=new Promise(function(F,N){S.createMap(L,z,F,N)}),E.push(D)},T.createMap=function(L,z,E,S){var C=this,D=z[C.id],F=C.styleObj=A(D.style);C.accessToken=D.accesstoken;var N=C.map=new r.Map({container:C.div,style:F.style,center:R(D.center),zoom:D.zoom,bearing:D.bearing,pitch:D.pitch,interactive:!C.isStatic,preserveDrawingBuffer:C.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new r.AttributionControl({compact:!0}));N._canvas.style.left="0px",N._canvas.style.top="0px",C.rejectOnError(S),C.isStatic||C.initFx(L,z);var G=[];G.push(new Promise(function(U){N.once("load",U)})),G=G.concat(l.fetchTraceGeoData(L)),Promise.all(G).then(function(){C.fillBelowLookup(L,z),C.updateData(L),C.updateLayout(z),C.resolveOnRender(E)}).catch(S)},T.updateMap=function(L,z,E,S){var C=this,D=C.map,F=z[this.id];C.rejectOnError(S);var N=[],G=A(F.style);JSON.stringify(C.styleObj)!==JSON.stringify(G)&&(C.styleObj=G,D.setStyle(G.style),C.traceHash={},N.push(new Promise(function(U){D.once("styledata",U)}))),N=N.concat(l.fetchTraceGeoData(L)),Promise.all(N).then(function(){C.fillBelowLookup(L,z),C.updateData(L),C.updateLayout(z),C.resolveOnRender(E)}).catch(S)},T.fillBelowLookup=function(L,z){var E=z[this.id],S=E.layers,C,D,F=this.belowLookup={},N=!1;for(C=0;C<L.length;C++){var G=L[C][0].trace,U=G._module;typeof G.below=="string"?D=G.below:U.getBelow&&(D=U.getBelow(G,this)),D===""&&(N=!0),F["trace-"+G.uid]=D||""}for(C=0;C<S.length;C++){var X=S[C];typeof X.below=="string"?D=X.below:N?D="traces":D="",F["layout-"+C]=D}var I={},B,j;for(B in F)D=F[B],I[D]?I[D].push(B):I[D]=[B];for(D in I){var H=I[D];if(H.length>1)for(C=0;C<H.length;C++)B=H[C],B.indexOf("trace-")===0?(j=B.split("trace-")[1],this.traceHash[j]&&(this.traceHash[j].below=null)):B.indexOf("layout-")===0&&(j=B.split("layout-")[1],this.layerList[j]&&(this.layerList[j].below=null))}};var g={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};T.updateData=function(L){var z=this.traceHash,E,S,C,D,F=L.slice().sort(function(I,B){return g[I[0].trace.type]-g[B[0].trace.type]});for(C=0;C<F.length;C++){var N=F[C];S=N[0].trace,E=z[S.uid];var G=!1;E&&(E.type===S.type?(E.update(N),G=!0):E.dispose()),!G&&S._module&&(z[S.uid]=S._module.plot(this,N))}var U=Object.keys(z);e:for(C=0;C<U.length;C++){var X=U[C];for(D=0;D<L.length;D++)if(S=L[D][0].trace,X===S.uid)continue e;E=z[X],E.dispose(),delete z[X]}},T.updateLayout=function(L){var z=this.map,E=L[this.id];!this.dragging&&!this.wheeling&&(z.setCenter(R(E.center)),z.setZoom(E.zoom),z.setBearing(E.bearing),z.setPitch(E.pitch)),this.updateLayers(L),this.updateFramework(L),this.updateFx(L),this.map.resize(),this.gd._context._scrollZoom.mapbox?z.scrollZoom.enable():z.scrollZoom.disable()},T.resolveOnRender=function(L){var z=this.map;z.on("render",function E(){z.loaded()&&(z.off("render",E),setTimeout(L,10))})},T.rejectOnError=function(L){var z=this.map;function E(){L(new Error(b.mapOnErrorMsg))}z.once("error",E),z.once("style.error",E),z.once("source.error",E),z.once("tile.error",E),z.once("layer.error",E)},T.createFramework=function(L){var z=this,E=z.div=document.createElement("div");E.id=z.uid,E.style.position="absolute",z.container.appendChild(E),z.xaxis={_id:"x",c2p:function(S){return z.project(S).x}},z.yaxis={_id:"y",c2p:function(S){return z.project(S).y}},z.updateFramework(L),z.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},t.setConvert(z.mockAxis,L)},T.initFx=function(L,z){var E=this,S=E.gd,C=E.map;C.on("moveend",function(N){if(E.map){var G=S._fullLayout;if(N.originalEvent||E.wheeling){var U=G[E.id];c.call("_storeDirectGUIEdit",S.layout,G._preGUI,E.getViewEdits(U));var X=E.getView();U._input.center=U.center=X.center,U._input.zoom=U.zoom=X.zoom,U._input.bearing=U.bearing=X.bearing,U._input.pitch=U.pitch=X.pitch,S.emit("plotly_relayout",E.getViewEditsWithDerived(X))}N.originalEvent&&N.originalEvent.type==="mouseup"?E.dragging=!1:E.wheeling&&(E.wheeling=!1),G._rehover&&G._rehover()}}),C.on("wheel",function(){E.wheeling=!0}),C.on("mousemove",function(N){var G=E.div.getBoundingClientRect(),U=[N.originalEvent.offsetX,N.originalEvent.offsetY];N.target.getBoundingClientRect=function(){return G},E.xaxis.p2c=function(){return C.unproject(U).lng},E.yaxis.p2c=function(){return C.unproject(U).lat},S._fullLayout._rehover=function(){S._fullLayout._hoversubplot===E.id&&S._fullLayout[E.id]&&a.hover(S,N,E.id)},a.hover(S,N,E.id),S._fullLayout._hoversubplot=E.id});function D(){a.loneUnhover(z._hoverlayer)}C.on("dragstart",function(){E.dragging=!0,D()}),C.on("zoomstart",D),C.on("mouseout",function(){S._fullLayout._hoversubplot=null});function F(){var N=E.getView();S.emit("plotly_relayouting",E.getViewEditsWithDerived(N))}C.on("drag",F),C.on("zoom",F),C.on("dblclick",function(){var N=S._fullLayout[E.id];c.call("_storeDirectGUIEdit",S.layout,S._fullLayout._preGUI,E.getViewEdits(N));var G=E.viewInitial;C.setCenter(R(G.center)),C.setZoom(G.zoom),C.setBearing(G.bearing),C.setPitch(G.pitch);var U=E.getView();N._input.center=N.center=U.center,N._input.zoom=N.zoom=U.zoom,N._input.bearing=N.bearing=U.bearing,N._input.pitch=N.pitch=U.pitch,S.emit("plotly_doubleclick",null),S.emit("plotly_relayout",E.getViewEditsWithDerived(U))}),E.clearSelect=function(){d(E.dragOptions),p(E.dragOptions.gd)},E.onClickInPanFn=function(N){return function(G){var U=S._fullLayout.clickmode;U.indexOf("select")>-1&&y(G.originalEvent,S,[E.xaxis],[E.yaxis],E.id,N),U.indexOf("event")>-1&&a.click(S,G.originalEvent)}}},T.updateFx=function(L){var z=this,E=z.map,S=z.gd;if(z.isStatic)return;function C(G){var U=z.map.unproject(G);return[U.lng,U.lat]}var D=L.dragmode,F;u(D)?F=function(G,U){var X=G.range={};X[z.id]=[C([U.xmin,U.ymin]),C([U.xmax,U.ymax])]}:F=function(G,U,X){var I=G.lassoPoints={};I[z.id]=X.filtered.map(C)};var N=z.dragOptions;z.dragOptions=n.extendDeep(N||{},{dragmode:L.dragmode,element:z.div,gd:S,plotinfo:{id:z.id,domain:L[z.id].domain,xaxis:z.xaxis,yaxis:z.yaxis,fillRangeItems:F},xaxes:[z.xaxis],yaxes:[z.yaxis],subplot:z.id}),E.off("click",z.onClickInPanHandler),i(D)||h(D)?(E.dragPan.disable(),E.on("zoomstart",z.clearSelect),z.dragOptions.prepFn=function(G,U,X){s(G,U,X,z.dragOptions,D)},f.init(z.dragOptions)):(E.dragPan.enable(),E.off("zoomstart",z.clearSelect),z.div.onmousedown=null,z.onClickInPanHandler=z.onClickInPanFn(z.dragOptions),E.on("click",z.onClickInPanHandler))},T.updateFramework=function(L){var z=L[this.id].domain,E=L._size,S=this.div.style;S.width=E.w*(z.x[1]-z.x[0])+"px",S.height=E.h*(z.y[1]-z.y[0])+"px",S.left=E.l+z.x[0]*E.w+"px",S.top=E.t+(1-z.y[1])*E.h+"px",this.xaxis._offset=E.l+z.x[0]*E.w,this.xaxis._length=E.w*(z.x[1]-z.x[0]),this.yaxis._offset=E.t+(1-z.y[1])*E.h,this.yaxis._length=E.h*(z.y[1]-z.y[0])},T.updateLayers=function(L){var z=L[this.id],E=z.layers,S=this.layerList,C;if(E.length!==S.length){for(C=0;C<S.length;C++)S[C].dispose();for(S=this.layerList=[],C=0;C<E.length;C++)S.push(m(this,C,E[C]))}else for(C=0;C<E.length;C++)S[C].update(E[C])},T.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},T.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},T.setOptions=function(L,z,E){for(var S in E)this.map[z](L,S,E[S])},T.getMapLayers=function(){return this.map.getStyle().layers},T.addLayer=function(L,z){var E=this.map;if(typeof z=="string"){if(z===""){E.addLayer(L,z);return}for(var S=this.getMapLayers(),C=0;C<S.length;C++)if(z===S[C].id){E.addLayer(L,z);return}n.warn(["Trying to add layer with *below* value",z,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}E.addLayer(L)},T.project=function(L){return this.map.project(new r.LngLat(L[0],L[1]))},T.getView=function(){var L=this.map,z=L.getCenter(),E={lon:z.lng,lat:z.lat},S=L.getCanvas(),C=S.width,D=S.height;return{center:E,zoom:L.getZoom(),bearing:L.getBearing(),pitch:L.getPitch(),_derived:{coordinates:[L.unproject([0,0]).toArray(),L.unproject([C,0]).toArray(),L.unproject([C,D]).toArray(),L.unproject([0,D]).toArray()]}}},T.getViewEdits=function(L){for(var z=this.id,E=["center","zoom","bearing","pitch"],S={},C=0;C<E.length;C++){var D=E[C];S[z+"."+D]=L[D]}return S},T.getViewEditsWithDerived=function(L){var z=this.id,E=this.getViewEdits(L);return E[z+"._derived"]=L._derived,E};function A(L){var z={};return n.isPlainObject(L)?(z.id=L.id,z.style=L):typeof L=="string"?(z.id=L,b.styleValuesMapbox.indexOf(L)!==-1?z.style=k(L):b.stylesNonMapbox[L]?z.style=b.stylesNonMapbox[L]:z.style=L):(z.id=b.styleValueDflt,z.style=k(b.styleValueDflt)),z.transition={duration:0,delay:0},z}function k(L){return b.styleUrlPrefix+L+"-"+b.styleUrlSuffix}function R(L){return[L.lon,L.lat]}v.exports=_},{"../../components/dragelement":662,"../../components/dragelement/helpers":661,"../../components/fx":683,"../../lib":778,"../../lib/geo_location_utils":771,"../../registry":911,"../cartesian/axes":828,"../cartesian/select":847,"./constants":883,"./layers":886,"mapbox-gl":473}],890:[function(e,v,M){v.exports=function(r){var n=r.editType;return{t:{valType:"number",dflt:0,editType:n},r:{valType:"number",dflt:0,editType:n},b:{valType:"number",dflt:0,editType:n},l:{valType:"number",dflt:0,editType:n},editType:n}}},{}],891:[function(e,v,M){var r=e("d3"),n=e("d3-time-format").timeFormatLocale,l=e("fast-isnumeric"),c=e("../registry"),t=e("../plot_api/plot_schema"),f=e("../plot_api/plot_template"),a=e("../lib"),o=e("../components/color"),u=e("../constants/numerical").BADNUM,h=e("./cartesian/axis_ids"),i=e("./cartesian/handle_outline").clearSelect,s=e("./animation_attributes"),p=e("./frame_attributes"),d=e("../plots/get_data").getModuleCalcData,y=a.relinkPrivateKeys,b=a._,m=v.exports={};a.extendFlat(m,c),m.attributes=e("./attributes"),m.attributes.type.values=m.allTypes,m.fontAttrs=e("./font_attributes"),m.layoutAttributes=e("./layout_attributes"),m.fontWeight="normal";var _=m.transformsRegistry,T=e("./command");m.executeAPICommand=T.executeAPICommand,m.computeAPICommandBindings=T.computeAPICommandBindings,m.manageCommandObserver=T.manageCommandObserver,m.hasSimpleAPICommandBindings=T.hasSimpleAPICommandBindings,m.redrawText=function(Q){Q=a.getGraphDiv(Q);var V=Q._fullLayout||{},se=V._has&&V._has("polar"),re=!se&&Q.data&&Q.data[0]&&Q.data[0].r;if(!re)return new Promise(function(ee){setTimeout(function(){c.getComponentMethod("annotations","draw")(Q),c.getComponentMethod("legend","draw")(Q),c.getComponentMethod("colorbar","draw")(Q),ee(m.previousPromises(Q))},300)})},m.resize=function(Q){Q=a.getGraphDiv(Q);var V,se=new Promise(function(re,ee){(!Q||a.isHidden(Q))&&ee(new Error("Resize must be passed a displayed plot div element.")),Q._redrawTimer&&clearTimeout(Q._redrawTimer),Q._resolveResize&&(V=Q._resolveResize),Q._resolveResize=re,Q._redrawTimer=setTimeout(function(){if(!Q.layout||Q.layout.width&&Q.layout.height||a.isHidden(Q)){re(Q);return}delete Q.layout.width,delete Q.layout.height;var ae=Q.changed;Q.autoplay=!0,c.call("relayout",Q,{autosize:!0}).then(function(){Q.changed=ae,Q._resolveResize===re&&(delete Q._resolveResize,re(Q))})},100)});return V&&V(se),se},m.previousPromises=function(Q){if((Q._promises||[]).length)return Promise.all(Q._promises).then(function(){Q._promises=[]})},m.addLinks=function(Q){if(!(!Q._context.showLink&&!Q._context.showSources)){var V=Q._fullLayout,se=a.ensureSingle(V._paper,"text","js-plot-link-container",function(pe){pe.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:o.defaultLine,"pointer-events":"all"}).each(function(){var W=r.select(this);W.append("tspan").classed("js-link-to-tool",!0),W.append("tspan").classed("js-link-spacer",!0),W.append("tspan").classed("js-sourcelinks",!0)})}),re=se.node(),ee={y:V._paper.attr("height")-9};document.body.contains(re)&&re.getComputedTextLength()>=V.width-20?(ee["text-anchor"]="start",ee.x=5):(ee["text-anchor"]="end",ee.x=V._paper.attr("width")-7),se.attr(ee);var ae=se.select(".js-link-to-tool"),fe=se.select(".js-link-spacer"),de=se.select(".js-sourcelinks");Q._context.showSources&&Q._context.showSources(Q),Q._context.showLink&&g(Q,ae),fe.text(ae.text()&&de.text()?" - ":"")}};function g(Q,V){V.text("");var se=V.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Q._context.linkText+" "+String.fromCharCode(187));if(Q._context.sendData)se.on("click",function(){m.sendDataToCloud(Q)});else{var re=window.location.pathname.split("/"),ee=window.location.search;se.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+re[2].split(".")[0]+"/"+re[1]+ee})}}m.sendDataToCloud=function(Q){var V=(window.PLOTLYENV||{}).BASE_URL||Q._context.plotlyServerURL;if(V){Q.emit("plotly_beforeexport");var se=r.select(Q).append("div").attr("id","hiddenform").style("display","none"),re=se.append("form").attr({action:V+"/external",method:"post",target:"_blank"}),ee=re.append("input").attr({type:"text",name:"data"});return ee.node().value=m.graphJson(Q,!1,"keepdata"),re.node().submit(),se.remove(),Q.emit("plotly_afterexport"),!1}};var A=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],k=["year","month","dayMonth","dayMonthYear"];m.supplyDefaults=function(Q,V){var se=V&&V.skipUpdateCalc,re=Q._fullLayout||{};if(re._skipDefaults){delete re._skipDefaults;return}var ee=Q._fullLayout={},ae=Q.layout||{},fe=Q._fullData||[],de=Q._fullData=[],pe=Q.data||[],W=Q.calcdata||[],ue=Q._context||{},me;Q._transitionData||m.createTransitionData(Q),ee._dfltTitle={plot:b(Q,"Click to enter Plot title"),x:b(Q,"Click to enter X axis title"),y:b(Q,"Click to enter Y axis title"),colorbar:b(Q,"Click to enter Colorscale title"),annotation:b(Q,"new text")},ee._traceWord=b(Q,"trace");var be=z(Q,A);if(ee._mapboxAccessToken=ue.mapboxAccessToken,re._initialAutoSizeIsDone){var ke=re.width,Pe=re.height;m.supplyLayoutGlobalDefaults(ae,ee,be),ae.width||(ee.width=ke),ae.height||(ee.height=Pe),m.sanitizeMargins(ee)}else{m.supplyLayoutGlobalDefaults(ae,ee,be);var je=!ae.width||!ae.height,ze=ee.autosize,Ze=ue.autosizable,tt=je&&(ze||Ze);tt?m.plotAutoSize(Q,ae,ee):je&&m.sanitizeMargins(ee),!ze&&je&&(ae.width=ee.width,ae.height=ee.height)}ee._d3locale=E(be,ee.separators),ee._extraFormat=z(Q,k),ee._initialAutoSizeIsDone=!0,ee._dataLength=pe.length,ee._modules=[],ee._visibleModules=[],ee._basePlotModules=[];var Ce=ee._subplots=L(),Ae=ee._splomAxes={x:{},y:{}},Ne=ee._splomSubplots={};ee._splomGridDflt={},ee._scatterStackOpts={},ee._firstScatter={},ee._alignmentOpts={},ee._colorAxes={},ee._requestRangeslider={},ee._traceUids=R(fe,pe),ee._globalTransforms=(Q._context||{}).globalTransforms,m.supplyDataDefaults(pe,de,ae,ee);var qe=Object.keys(Ae.x),At=Object.keys(Ae.y);if(qe.length>1&&At.length>1){for(c.getComponentMethod("grid","sizeDefaults")(ae,ee),me=0;me<qe.length;me++)a.pushUnique(Ce.xaxis,qe[me]);for(me=0;me<At.length;me++)a.pushUnique(Ce.yaxis,At[me]);for(var kt in Ne)a.pushUnique(Ce.cartesian,kt)}if(ee._has=m._hasPlotType.bind(ee),fe.length===de.length)for(me=0;me<de.length;me++)y(de[me],fe[me]);m.supplyLayoutModuleDefaults(ae,ee,de,Q._transitionData);var Ve=ee._visibleModules,ft=[];for(me=0;me<Ve.length;me++){var St=Ve[me].crossTraceDefaults;St&&a.pushUnique(ft,St)}for(me=0;me<ft.length;me++)ft[me](de,ee);ee._hasOnlyLargeSploms=ee._basePlotModules.length===1&&ee._basePlotModules[0].name==="splom"&&qe.length>15&&At.length>15&&ee.shapes.length===0&&ee.images.length===0,ee._hasCartesian=ee._has("cartesian"),ee._hasGeo=ee._has("geo"),ee._hasGL3D=ee._has("gl3d"),ee._hasGL2D=ee._has("gl2d"),ee._hasTernary=ee._has("ternary"),ee._hasPie=ee._has("pie"),m.linkSubplots(de,ee,fe,re),m.cleanPlot(de,ee,fe,re);var Wt=!!(re._has&&re._has("gl2d")),Qt=!!(ee._has&&ee._has("gl2d")),zt=!!(re._has&&re._has("cartesian")),$t=!!(ee._has&&ee._has("cartesian")),rr=zt||Wt,Pt=$t||Qt;rr&&!Pt?re._bgLayer.remove():Pt&&!rr&&(ee._shouldCreateBgLayer=!0),re._zoomlayer&&!Q._dragging&&i({_fullLayout:re}),S(de,ee),y(ee,re),c.getComponentMethod("colorscale","crossTraceDefaults")(de,ee),ee._preGUI||(ee._preGUI={}),ee._tracePreGUI||(ee._tracePreGUI={});var Lt=ee._tracePreGUI,dt={},lt;for(lt in Lt)dt[lt]="old";for(me=0;me<de.length;me++)lt=de[me]._fullInput.uid,dt[lt]||(Lt[lt]={}),dt[lt]="new";for(lt in dt)dt[lt]==="old"&&delete Lt[lt];G(ee),c.getComponentMethod("rangeslider","makeData")(ee),!se&&W.length===de.length&&m.supplyDefaultsUpdateCalc(W,de)},m.supplyDefaultsUpdateCalc=function(Q,V){for(var se=0;se<V.length;se++){var re=V[se],ee=(Q[se]||[])[0];if(ee&&ee.trace){var ae=ee.trace;if(ae._hasCalcTransform){var fe=ae._arrayAttrs,de,pe,W;for(de=0;de<fe.length;de++)pe=fe[de],W=a.nestedProperty(ae,pe).get().slice(),a.nestedProperty(re,pe).set(W)}ee.trace=re}}};function R(Q,V){var se=V.length,re=[],ee,ae;for(ee=0;ee<Q.length;ee++){var fe=Q[ee]._fullInput;fe!==ae&&re.push(fe),ae=fe}var de=re.length,pe=new Array(se),W={};function ue(ke,Pe){pe[Pe]=ke,W[ke]=1}function me(ke,Pe){if(ke&&typeof ke=="string"&&!W[ke])return ue(ke,Pe),!0}for(ee=0;ee<se;ee++){var be=V[ee].uid;typeof be=="number"&&(be=String(be)),!me(be,ee)&&(ee<de&&me(re[ee].uid,ee)||ue(a.randstr(W),ee))}return pe}function L(){var Q=c.collectableSubplotTypes,V={},se,re;if(!Q){Q=[];var ee=c.subplotsRegistry;for(var ae in ee){var fe=ee[ae],de=fe.attr;if(de&&(Q.push(ae),Array.isArray(de)))for(re=0;re<de.length;re++)a.pushUnique(Q,de[re])}}for(se=0;se<Q.length;se++)V[Q[se]]=[];return V}function z(Q,V){var se=Q._context.locale;se||(se="en-US");var re=!1,ee={};function ae(me){for(var be=!0,ke=0;ke<V.length;ke++){var Pe=V[ke];ee[Pe]||(me[Pe]?ee[Pe]=me[Pe]:be=!1)}be&&(re=!0)}for(var fe=0;fe<2;fe++){for(var de=Q._context.locales,pe=0;pe<2;pe++){var W=(de[se]||{}).format;if(W&&(ae(W),re))break;de=c.localeRegistry}var ue=se.split("-")[0];if(re||ue===se)break;se=ue}return re||ae(c.localeRegistry.en.format),ee}function E(Q,V){return Q.decimal=V.charAt(0),Q.thousands=V.charAt(1),{numberFormat:r.locale(Q).numberFormat,timeFormat:n(Q).utcFormat}}function S(Q,V){var se,re=[];V.meta&&(se=V._meta={meta:V.meta,layout:{meta:V.meta}});for(var ee=0;ee<Q.length;ee++){var ae=Q[ee];ae.meta?re[ae.index]=ae._meta={meta:ae.meta}:V.meta&&(ae._meta={meta:V.meta}),V.meta&&(ae._meta.layout={meta:V.meta})}re.length&&(se||(se=V._meta={}),se.data=re)}m.createTransitionData=function(Q){Q._transitionData||(Q._transitionData={}),Q._transitionData._frames||(Q._transitionData._frames=[]),Q._transitionData._frameHash||(Q._transitionData._frameHash={}),Q._transitionData._counter||(Q._transitionData._counter=0),Q._transitionData._interruptCallbacks||(Q._transitionData._interruptCallbacks=[])},m._hasPlotType=function(Q){var V,se=this._basePlotModules||[];for(V=0;V<se.length;V++)if(se[V].name===Q)return!0;var re=this._modules||[];for(V=0;V<re.length;V++){var ee=re[V].name;if(ee===Q)return!0;var ae=c.modules[ee];if(ae&&ae.categories[Q])return!0}return!1},m.cleanPlot=function(Q,V,se,re){var ee,ae,fe=re._basePlotModules||[];for(ee=0;ee<fe.length;ee++){var de=fe[ee];de.clean&&de.clean(Q,V,se,re)}var pe=re._has&&re._has("gl"),W=V._has&&V._has("gl");pe&&!W&&re._glcontainer!==void 0&&(re._glcontainer.selectAll(".gl-canvas").remove(),re._glcontainer.selectAll(".no-webgl").remove(),re._glcanvas=null);var ue=!!re._infolayer;e:for(ee=0;ee<se.length;ee++){var me=se[ee],be=me.uid;for(ae=0;ae<Q.length;ae++){var ke=Q[ae];if(be===ke.uid)continue e}ue&&re._infolayer.select(".cb"+be).remove()}},m.linkSubplots=function(Q,V,se,re){var ee,ae,fe=re._plots||{},de=V._plots={},pe=V._subplots,W={_fullData:Q,_fullLayout:V},ue=pe.cartesian.concat(pe.gl2d||[]);for(ee=0;ee<ue.length;ee++){var me=ue[ee],be=fe[me],ke=h.getFromId(W,me,"x"),Pe=h.getFromId(W,me,"y"),je;for(be?je=de[me]=be:(je=de[me]={},je.id=me),ke._counterAxes.push(Pe._id),Pe._counterAxes.push(ke._id),ke._subplotsWith.push(me),Pe._subplotsWith.push(me),je.xaxis=ke,je.yaxis=Pe,je._hasClipOnAxisFalse=!1,ae=0;ae<Q.length;ae++){var ze=Q[ae];if(ze.xaxis===je.xaxis._id&&ze.yaxis===je.yaxis._id&&ze.cliponaxis===!1){je._hasClipOnAxisFalse=!0;break}}}var Ze=h.list(W,null,!0),tt;for(ee=0;ee<Ze.length;ee++){tt=Ze[ee];var Ce=null;tt.overlaying&&(Ce=h.getFromId(W,tt.overlaying),Ce&&Ce.overlaying&&(tt.overlaying=!1,Ce=null)),tt._mainAxis=Ce||tt,Ce&&(tt.domain=Ce.domain.slice()),tt._anchorAxis=tt.anchor==="free"?null:h.getFromId(W,tt.anchor)}for(ee=0;ee<Ze.length;ee++)if(tt=Ze[ee],tt._counterAxes.sort(h.idSort),tt._subplotsWith.sort(a.subplotSort),tt._mainSubplot=C(tt,V),tt._counterAxes.length&&(tt.spikemode&&tt.spikemode.indexOf("across")!==-1||tt.automargin&&tt.mirror&&tt.anchor!=="free"||c.getComponentMethod("rangeslider","isVisible")(tt))){var Ae=1,Ne=0;for(ae=0;ae<tt._counterAxes.length;ae++){var qe=h.getFromId(W,tt._counterAxes[ae]);Ae=Math.min(Ae,qe.domain[0]),Ne=Math.max(Ne,qe.domain[1])}Ae<Ne&&(tt._counterDomainMin=Ae,tt._counterDomainMax=Ne)}};function C(Q,V){var se={_fullLayout:V},re=Q._id.charAt(0)==="x",ee=Q._mainAxis._anchorAxis,ae="",fe="",de="";if(ee&&(de=ee._mainAxis._id,ae=re?Q._id+de:de+Q._id),!ae||!V._plots[ae]){ae="";for(var pe=Q._counterAxes,W=0;W<pe.length;W++){var ue=pe[W],me=re?Q._id+ue:ue+Q._id;fe||(fe=me);var be=h.getFromId(se,ue);if(de&&be.overlaying===de){ae=me;break}}}return ae||fe}m.clearExpandedTraceDefaultColors=function(Q){var V,se,re;function ee(fe,de,pe,W){se[W]=de,se.length=W+1,fe.valType==="color"&&fe.dflt===void 0&&V.push(se.join("."))}for(se=[],V=Q._module._colorAttrs,V||(Q._module._colorAttrs=V=[],t.crawl(Q._module.attributes,ee)),re=0;re<V.length;re++){var ae=a.nestedProperty(Q,"_input."+V[re]);ae.get()||a.nestedProperty(Q,V[re]).set(null)}},m.supplyDataDefaults=function(Q,V,se,re){var ee=re._modules,ae=re._visibleModules,fe=re._basePlotModules,de=0,pe=0,W,ue,me;re._transformModules=[];function be(At){V.push(At);var kt=At._module;kt&&(a.pushUnique(ee,kt),At.visible===!0&&a.pushUnique(ae,kt),a.pushUnique(fe,At._module.basePlotModule),de++,At._input.visible!==!1&&pe++)}var ke={},Pe=[],je=(se.template||{}).data||{},ze=f.traceTemplater(je);for(W=0;W<Q.length;W++){if(me=Q[W],ue=ze.newTrace(me),ue.uid=re._traceUids[W],m.supplyTraceDefaults(me,ue,pe,re,W),ue.index=W,ue._input=me,ue._expandedIndex=de,ue.transforms&&ue.transforms.length)for(var Ze=me.visible!==!1&&ue.visible===!1,tt=F(ue,V,se,re),Ce=0;Ce<tt.length;Ce++){var Ae=tt[Ce],Ne={_template:ue._template,type:ue.type,uid:ue.uid+Ce};Ze&&Ae.visible===!1&&delete Ae.visible,m.supplyTraceDefaults(Ae,Ne,de,re,W),y(Ne,Ae),Ne.index=W,Ne._input=me,Ne._fullInput=ue,Ne._expandedIndex=de,Ne._expandedInput=Ae,be(Ne)}else ue._fullInput=ue,ue._expandedInput=ue,be(ue);c.traceIs(ue,"carpetAxis")&&(ke[ue.carpet]=ue),c.traceIs(ue,"carpetDependent")&&Pe.push(W)}for(W=0;W<Pe.length;W++)if(ue=V[Pe[W]],!!ue.visible){var qe=ke[ue.carpet];if(ue._carpet=qe,!qe||!qe.visible){ue.visible=!1;continue}ue.xaxis=qe.xaxis,ue.yaxis=qe.yaxis}},m.supplyAnimationDefaults=function(Q){Q=Q||{};var V,se={};function re(ee,ae){return a.coerce(Q||{},se,s,ee,ae)}if(re("mode"),re("direction"),re("fromcurrent"),Array.isArray(Q.frame))for(se.frame=[],V=0;V<Q.frame.length;V++)se.frame[V]=m.supplyAnimationFrameDefaults(Q.frame[V]||{});else se.frame=m.supplyAnimationFrameDefaults(Q.frame||{});if(Array.isArray(Q.transition))for(se.transition=[],V=0;V<Q.transition.length;V++)se.transition[V]=m.supplyAnimationTransitionDefaults(Q.transition[V]||{});else se.transition=m.supplyAnimationTransitionDefaults(Q.transition||{});return se},m.supplyAnimationFrameDefaults=function(Q){var V={};function se(re,ee){return a.coerce(Q||{},V,s.frame,re,ee)}return se("duration"),se("redraw"),V},m.supplyAnimationTransitionDefaults=function(Q){var V={};function se(re,ee){return a.coerce(Q||{},V,s.transition,re,ee)}return se("duration"),se("easing"),V},m.supplyFrameDefaults=function(Q){var V={};function se(re,ee){return a.coerce(Q,V,p,re,ee)}return se("group"),se("name"),se("traces"),se("baseframe"),se("data"),se("layout"),V},m.supplyTraceDefaults=function(Q,V,se,re,ee){var ae=re.colorway||o.defaults,fe=ae[se%ae.length],de;function pe(tt,Ce){return a.coerce(Q,V,m.attributes,tt,Ce)}var W=pe("visible");pe("type"),pe("name",re._traceWord+" "+ee),pe("uirevision",re.uirevision);var ue=m.getModule(V);if(V._module=ue,ue){var me=ue.basePlotModule,be=me.attr,ke=me.attributes;if(be&&ke){var Pe=re._subplots,je="";if(W||me.name!=="gl2d"){if(Array.isArray(be))for(de=0;de<be.length;de++){var ze=be[de],Ze=a.coerce(Q,V,ke,ze);Pe[ze]&&a.pushUnique(Pe[ze],Ze),je+=Ze}else je=a.coerce(Q,V,ke,be);Pe[me.name]&&a.pushUnique(Pe[me.name],je)}}}return W&&(pe("customdata"),pe("ids"),pe("meta"),c.traceIs(V,"showLegend")?(a.coerce(Q,V,ue.attributes.showlegend?ue.attributes:m.attributes,"showlegend"),pe("legendgroup"),V._dfltShowLegend=!0):V._dfltShowLegend=!1,ue&&ue.supplyDefaults(Q,V,fe,re),c.traceIs(V,"noOpacity")||pe("opacity"),c.traceIs(V,"notLegendIsolatable")&&(V.visible=!!V.visible),c.traceIs(V,"noHover")||(V.hovertemplate||a.coerceHoverinfo(Q,V,re),V.type!=="parcats"&&c.getComponentMethod("fx","supplyDefaults")(Q,V,fe,re)),ue&&ue.selectPoints&&pe("selectedpoints"),m.supplyTransformDefaults(Q,V,re)),V};function D(Q){var V=Q.transforms;if(Array.isArray(V)&&V.length)for(var se=0;se<V.length;se++){var re=V[se],ee=re._module||_[re.type];if(ee&&ee.makesData)return!0}return!1}m.hasMakesDataTransform=D,m.supplyTransformDefaults=function(Q,V,se){if(V._length||D(Q)){var re=se._globalTransforms||[],ee=se._transformModules||[];if(!(!Array.isArray(Q.transforms)&&re.length===0))for(var ae=Q.transforms||[],fe=re.concat(ae),de=V.transforms=[],pe=0;pe<fe.length;pe++){var W=fe[pe],ue=W.type,me=_[ue],be,ke=!(W._module&&W._module===me),Pe=me&&typeof me.transform=="function";me||a.warn("Unrecognized transform type "+ue+"."),me&&me.supplyDefaults&&(ke||Pe)?(be=me.supplyDefaults(W,V,se,Q),be.type=ue,be._module=me,a.pushUnique(ee,me)):be=a.extendFlat({},W),de.push(be)}}};function F(Q,V,se,re){for(var ee=Q.transforms,ae=[Q],fe=0;fe<ee.length;fe++){var de=ee[fe],pe=_[de.type];pe&&pe.transform&&(ae=pe.transform(ae,{transform:de,fullTrace:Q,fullData:V,layout:se,fullLayout:re,transformIndex:fe}))}return ae}m.supplyLayoutGlobalDefaults=function(Q,V,se){function re(W,ue){return a.coerce(Q,V,m.layoutAttributes,W,ue)}var ee=Q.template;a.isPlainObject(ee)&&(V.template=ee,V._template=ee.layout,V._dataTemplate=ee.data),re("autotypenumbers");var ae=a.coerceFont(re,"font");re("title.text",V._dfltTitle.plot),a.coerceFont(re,"title.font",{family:ae.family,size:Math.round(ae.size*1.4),color:ae.color}),re("title.xref"),re("title.yref"),re("title.x"),re("title.y"),re("title.xanchor"),re("title.yanchor"),re("title.pad.t"),re("title.pad.r"),re("title.pad.b"),re("title.pad.l");var fe=re("uniformtext.mode");fe&&re("uniformtext.minsize"),re("autosize",!(Q.width&&Q.height)),re("width"),re("height"),re("margin.l"),re("margin.r"),re("margin.t"),re("margin.b"),re("margin.pad"),re("margin.autoexpand"),Q.width&&Q.height&&m.sanitizeMargins(V),c.getComponentMethod("grid","sizeDefaults")(Q,V),re("paper_bgcolor"),re("separators",se.decimal+se.thousands),re("hidesources"),re("colorway"),re("datarevision");var de=re("uirevision");re("editrevision",de),re("selectionrevision",de),re("modebar.orientation"),re("modebar.bgcolor",o.addOpacity(V.paper_bgcolor,.5));var pe=o.contrast(o.rgb(V.modebar.bgcolor));re("modebar.color",o.addOpacity(pe,.3)),re("modebar.activecolor",o.addOpacity(pe,.7)),re("modebar.uirevision",de),c.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(Q,V,re),re("meta"),a.isPlainObject(Q.transition)&&(re("transition.duration"),re("transition.easing"),re("transition.ordering")),c.getComponentMethod("calendars","handleDefaults")(Q,V,"calendar"),c.getComponentMethod("fx","supplyLayoutGlobalDefaults")(Q,V,re)};function N(Q){return typeof Q=="string"&&Q.substr(Q.length-2)==="px"&&parseFloat(Q)}m.plotAutoSize=function(V,se,re){var ee=V._context||{},ae=ee.frameMargins,fe,de,pe=a.isPlotDiv(V);if(pe&&V.emit("plotly_autosize"),ee.fillFrame)fe=window.innerWidth,de=window.innerHeight,document.body.style.overflow="hidden";else{var W=pe?window.getComputedStyle(V):{};if(fe=N(W.width)||N(W.maxWidth)||re.width,de=N(W.height)||N(W.maxHeight)||re.height,l(ae)&&ae>0){var ue=1-2*ae;fe=Math.round(ue*fe),de=Math.round(ue*de)}}var me=m.layoutAttributes.width.min,be=m.layoutAttributes.height.min;fe<me&&(fe=me),de<be&&(de=be);var ke=!se.width&&Math.abs(re.width-fe)>1,Pe=!se.height&&Math.abs(re.height-de)>1;(Pe||ke)&&(ke&&(re.width=fe),Pe&&(re.height=de)),V._initialAutoSize||(V._initialAutoSize={width:fe,height:de}),m.sanitizeMargins(re)},m.supplyLayoutModuleDefaults=function(Q,V,se,re){var ee=c.componentsRegistry,ae=V._basePlotModules,fe,de,pe,W=c.subplotsRegistry.cartesian;for(fe in ee)pe=ee[fe],pe.includeBasePlot&&pe.includeBasePlot(Q,V);ae.length||ae.push(W),V._has("cartesian")&&(c.getComponentMethod("grid","contentDefaults")(Q,V),W.finalizeSubplots(Q,V));for(var ue in V._subplots)V._subplots[ue].sort(a.subplotSort);for(de=0;de<ae.length;de++)pe=ae[de],pe.supplyLayoutDefaults&&pe.supplyLayoutDefaults(Q,V,se);var me=V._modules;for(de=0;de<me.length;de++)pe=me[de],pe.supplyLayoutDefaults&&pe.supplyLayoutDefaults(Q,V,se);var be=V._transformModules;for(de=0;de<be.length;de++)pe=be[de],pe.supplyLayoutDefaults&&pe.supplyLayoutDefaults(Q,V,se,re);for(fe in ee)pe=ee[fe],pe.supplyLayoutDefaults&&pe.supplyLayoutDefaults(Q,V,se)},m.purge=function(Q){var V=Q._fullLayout||{};V._glcontainer!==void 0&&(V._glcontainer.selectAll(".gl-canvas").remove(),V._glcontainer.remove(),V._glcanvas=null),V._modeBar&&V._modeBar.destroy(),Q._transitionData&&(Q._transitionData._interruptCallbacks&&(Q._transitionData._interruptCallbacks.length=0),Q._transitionData._animationRaf&&window.cancelAnimationFrame(Q._transitionData._animationRaf)),a.clearThrottle(),a.clearResponsive(Q),delete Q.data,delete Q.layout,delete Q._fullData,delete Q._fullLayout,delete Q.calcdata,delete Q.framework,delete Q.empty,delete Q.fid,delete Q.undoqueue,delete Q.undonum,delete Q.autoplay,delete Q.changed,delete Q._promises,delete Q._redrawTimer,delete Q._hmlumcount,delete Q._hmpixcount,delete Q._transitionData,delete Q._transitioning,delete Q._initialAutoSize,delete Q._transitioningWithDuration,delete Q._dragging,delete Q._dragged,delete Q._dragdata,delete Q._hoverdata,delete Q._snapshotInProgress,delete Q._editing,delete Q._mouseDownTime,delete Q._legendMouseDownTime,Q.removeAllListeners&&Q.removeAllListeners()},m.style=function(Q){var V=Q._fullLayout._visibleModules,se=[],re;for(re=0;re<V.length;re++){var ee=V[re];ee.style&&a.pushUnique(se,ee.style)}for(re=0;re<se.length;re++)se[re](Q)},m.sanitizeMargins=function(Q){if(!(!Q||!Q.margin)){var V=Q.width,se=Q.height,re=Q.margin,ee=V-(re.l+re.r),ae=se-(re.t+re.b),fe;ee<0&&(fe=(V-1)/(re.l+re.r),re.l=Math.floor(fe*re.l),re.r=Math.floor(fe*re.r)),ae<0&&(fe=(se-1)/(re.t+re.b),re.t=Math.floor(fe*re.t),re.b=Math.floor(fe*re.b))}},m.clearAutoMarginIds=function(Q){Q._fullLayout._pushmarginIds={}},m.allowAutoMargin=function(Q,V){Q._fullLayout._pushmarginIds[V]=1};function G(Q){var V=Q.margin;if(!Q._size){var se=Q._size={l:Math.round(V.l),r:Math.round(V.r),t:Math.round(V.t),b:Math.round(V.b),p:Math.round(V.pad)};se.w=Math.round(Q.width)-se.l-se.r,se.h=Math.round(Q.height)-se.t-se.b}Q._pushmargin||(Q._pushmargin={}),Q._pushmarginIds||(Q._pushmarginIds={})}var U=2,X=2,I=64,B=64;m.autoMargin=function(Q,V,se){var re=Q._fullLayout,ee=re.width,ae=re.height,fe=re.margin,de=a.constrain(ee-fe.l-fe.r,U,I),pe=a.constrain(ae-fe.t-fe.b,X,B),W=Math.max(0,ee-de),ue=Math.max(0,ae-pe),me=re._pushmargin,be=re._pushmarginIds;if(fe.autoexpand!==!1){if(!se)delete me[V],delete be[V];else{var ke=se.pad;if(ke===void 0&&(ke=Math.min(12,fe.l,fe.r,fe.t,fe.b)),W){var Pe=(se.l+se.r)/W;Pe>1&&(se.l/=Pe,se.r/=Pe)}if(ue){var je=(se.t+se.b)/ue;je>1&&(se.t/=je,se.b/=je)}var ze=se.xl!==void 0?se.xl:se.x,Ze=se.xr!==void 0?se.xr:se.x,tt=se.yt!==void 0?se.yt:se.y,Ce=se.yb!==void 0?se.yb:se.y;me[V]={l:{val:ze,size:se.l+ke},r:{val:Ze,size:se.r+ke},b:{val:Ce,size:se.b+ke},t:{val:tt,size:se.t+ke}},be[V]=1}if(!re._replotting)return m.doAutoMargin(Q)}},m.doAutoMargin=function(Q){var V=Q._fullLayout,se=V.width,re=V.height;V._size||(V._size={}),G(V);var ee=V._size,ae=V.margin,fe=a.extendFlat({},ee),de=ae.l,pe=ae.r,W=ae.t,ue=ae.b,me=V._pushmargin,be=V._pushmarginIds;if(V.margin.autoexpand!==!1){for(var ke in me)be[ke]||delete me[ke];me.base={l:{val:0,size:de},r:{val:1,size:pe},t:{val:1,size:W},b:{val:0,size:ue}};for(var Pe in me){var je=me[Pe].l||{},ze=me[Pe].b||{},Ze=je.val,tt=je.size,Ce=ze.val,Ae=ze.size;for(var Ne in me){if(l(tt)&&me[Ne].r){var qe=me[Ne].r.val,At=me[Ne].r.size;if(qe>Ze){var kt=(tt*qe+(At-se)*Ze)/(qe-Ze),Ve=(At*(1-Ze)+(tt-se)*(1-qe))/(qe-Ze);kt+Ve>de+pe&&(de=kt,pe=Ve)}}if(l(Ae)&&me[Ne].t){var ft=me[Ne].t.val,St=me[Ne].t.size;if(ft>Ce){var Wt=(Ae*ft+(St-re)*Ce)/(ft-Ce),Qt=(St*(1-Ce)+(Ae-re)*(1-ft))/(ft-Ce);Wt+Qt>ue+W&&(ue=Wt,W=Qt)}}}}}var zt=a.constrain(se-ae.l-ae.r,U,I),$t=a.constrain(re-ae.t-ae.b,X,B),rr=Math.max(0,se-zt),Pt=Math.max(0,re-$t);if(rr){var Lt=(de+pe)/rr;Lt>1&&(de/=Lt,pe/=Lt)}if(Pt){var dt=(ue+W)/Pt;dt>1&&(ue/=dt,W/=dt)}if(ee.l=Math.round(de),ee.r=Math.round(pe),ee.t=Math.round(W),ee.b=Math.round(ue),ee.p=Math.round(ae.pad),ee.w=Math.round(se)-ee.l-ee.r,ee.h=Math.round(re)-ee.t-ee.b,!V._replotting&&m.didMarginChange(fe,ee)){"_redrawFromAutoMarginCount"in V?V._redrawFromAutoMarginCount++:V._redrawFromAutoMarginCount=1;var lt=3*(1+Object.keys(be).length);if(V._redrawFromAutoMarginCount<lt)return c.call("plot",Q);V._size=fe,a.warn("Too many auto-margin redraws.")}j(Q)};function j(Q){for(var V=h.list(Q,"",!0),se=0;se<V.length;se++){var re=V[se],ee=re._hideOutOfRangeInsideTickLabels;ee&&ee()}}var H=["l","r","t","b","p","w","h"];m.didMarginChange=function(Q,V){for(var se=0;se<H.length;se++){var re=H[se],ee=Q[re],ae=V[re];if(!l(ee)||Math.abs(ae-ee)>1)return!0}return!1},m.graphJson=function(Q,V,se,re,ee,ae){(ee&&V&&!Q._fullData||ee&&!V&&!Q._fullLayout)&&m.supplyDefaults(Q);var fe=ee?Q._fullData:Q.data,de=ee?Q._fullLayout:Q.layout,pe=(Q._transitionData||{})._frames;function W(be,ke){if(typeof be=="function")return ke?"_function_":null;if(a.isPlainObject(be)){var Pe={},je;return Object.keys(be).sort().forEach(function(ze){if(["_","["].indexOf(ze.charAt(0))===-1){if(typeof be[ze]=="function"){ke&&(Pe[ze]="_function");return}if(se==="keepdata"){if(ze.substr(ze.length-3)==="src")return}else if(se==="keepstream"){if(je=be[ze+"src"],typeof je=="string"&&je.indexOf(":")>0&&!a.isPlainObject(be.stream))return}else if(se!=="keepall"&&(je=be[ze+"src"],typeof je=="string"&&je.indexOf(":")>0))return;Pe[ze]=W(be[ze],ke)}}),Pe}return Array.isArray(be)?be.map(function(ze){return W(ze,ke)}):a.isTypedArray(be)?a.simpleMap(be,a.identity):a.isJSDate(be)?a.ms2DateTimeLocal(+be):be}var ue={data:(fe||[]).map(function(be){var ke=W(be);return V&&delete ke.fit,ke})};if(!V&&(ue.layout=W(de),ee)){var me=de._size;ue.layout.computed={margin:{b:me.b,l:me.l,r:me.r,t:me.t}}}return Q.framework&&Q.framework.isPolar&&(ue=Q.framework.getConfig()),pe&&(ue.frames=W(pe)),ae&&(ue.config=W(Q._context,!0)),re==="object"?ue:JSON.stringify(ue)},m.modifyFrames=function(Q,V){var se,re,ee,ae=Q._transitionData._frames,fe=Q._transitionData._frameHash;for(se=0;se<V.length;se++)switch(re=V[se],re.type){case"replace":ee=re.value;var de=(ae[re.index]||{}).name,pe=ee.name;ae[re.index]=fe[pe]=ee,pe!==de&&(delete fe[de],fe[pe]=ee);break;case"insert":ee=re.value,fe[ee.name]=ee,ae.splice(re.index,0,ee);break;case"delete":ee=ae[re.index],delete fe[ee.name],ae.splice(re.index,1);break}return Promise.resolve()},m.computeFrame=function(Q,V){var se=Q._transitionData._frameHash,re,ee,ae,fe;if(!V)throw new Error("computeFrame must be given a string frame name");var de=se[V.toString()];if(!de)return!1;for(var pe=[de],W=[de.name];de.baseframe&&(de=se[de.baseframe.toString()])&&W.indexOf(de.name)===-1;)pe.push(de),W.push(de.name);for(var ue={};de=pe.pop();)if(de.layout&&(ue.layout=m.extendLayout(ue.layout,de.layout)),de.data){if(ue.data||(ue.data=[]),ee=de.traces,!ee)for(ee=[],re=0;re<de.data.length;re++)ee[re]=re;for(ue.traces||(ue.traces=[]),re=0;re<de.data.length;re++)ae=ee[re],ae!=null&&(fe=ue.traces.indexOf(ae),fe===-1&&(fe=ue.data.length,ue.traces[fe]=ae),ue.data[fe]=m.extendTrace(ue.data[fe],de.data[re]))}return ue},m.recomputeFrameHash=function(Q){for(var V=Q._transitionData._frameHash={},se=Q._transitionData._frames,re=0;re<se.length;re++){var ee=se[re];ee&&ee.name&&(V[ee.name]=ee)}},m.extendObjectWithContainers=function(Q,V,se){var re,ee,ae,fe,de,pe,W,ue,me=a.extendDeepNoArrays({},V||{}),be=a.expandObjectPaths(me),ke={};if(se&&se.length)for(ae=0;ae<se.length;ae++)re=a.nestedProperty(be,se[ae]),ee=re.get(),ee===void 0?a.nestedProperty(ke,se[ae]).set(null):(re.set(null),a.nestedProperty(ke,se[ae]).set(ee));if(Q=a.extendDeepNoArrays(Q||{},be),se&&se.length){for(ae=0;ae<se.length;ae++)if(de=a.nestedProperty(ke,se[ae]),W=de.get(),!!W){for(pe=a.nestedProperty(Q,se[ae]),ue=pe.get(),Array.isArray(ue)||(ue=[],pe.set(ue)),fe=0;fe<W.length;fe++){var Pe=W[fe];Pe===null?ue[fe]=null:ue[fe]=m.extendObjectWithContainers(ue[fe],Pe)}pe.set(ue)}}return Q},m.dataArrayContainers=["transforms","dimensions"],m.layoutArrayContainers=c.layoutArrayContainers,m.extendTrace=function(Q,V){return m.extendObjectWithContainers(Q,V,m.dataArrayContainers)},m.extendLayout=function(Q,V){return m.extendObjectWithContainers(Q,V,m.layoutArrayContainers)},m.transition=function(Q,V,se,re,ee,ae){var fe={redraw:ee.redraw},de={},pe=[];return fe.prepareFn=function(){for(var W=Array.isArray(V)?V.length:0,ue=re.slice(0,W),me=0;me<ue.length;me++){var be=ue[me],ke=Q._fullData[be],Pe=ke._module;if(Pe){if(Pe.animatable){var je=Pe.basePlotModule.name;de[je]||(de[je]=[]),de[je].push(be)}Q.data[ue[me]]=m.extendTrace(Q.data[ue[me]],V[me])}}var ze=a.expandObjectPaths(a.extendDeepNoArrays({},se)),Ze=/^[xy]axis[0-9]*$/;for(var tt in ze)Ze.test(tt)&&delete ze[tt].range;m.extendLayout(Q.layout,ze),delete Q.calcdata,m.supplyDefaults(Q),m.doCalcdata(Q);var Ce=a.expandObjectPaths(se);if(Ce){var Ae=Q._fullLayout._plots;for(var Ne in Ae){var qe=Ae[Ne],At=qe.xaxis,kt=qe.yaxis,Ve=At.range.slice(),ft=kt.range.slice(),St=null,Wt=null,Qt=null,zt=null;Array.isArray(Ce[At._name+".range"])?St=Ce[At._name+".range"].slice():Array.isArray((Ce[At._name]||{}).range)&&(St=Ce[At._name].range.slice()),Array.isArray(Ce[kt._name+".range"])?Wt=Ce[kt._name+".range"].slice():Array.isArray((Ce[kt._name]||{}).range)&&(Wt=Ce[kt._name].range.slice()),Ve&&St&&(At.r2l(Ve[0])!==At.r2l(St[0])||At.r2l(Ve[1])!==At.r2l(St[1]))&&(Qt={xr0:Ve,xr1:St}),ft&&Wt&&(kt.r2l(ft[0])!==kt.r2l(Wt[0])||kt.r2l(ft[1])!==kt.r2l(Wt[1]))&&(zt={yr0:ft,yr1:Wt}),(Qt||zt)&&pe.push(a.extendFlat({plotinfo:qe},Qt,zt))}}return Promise.resolve()},fe.runFn=function(W){var ue,me=Q._fullLayout._basePlotModules,be=pe.length,ke;if(se)for(ke=0;ke<me.length;ke++)me[ke].transitionAxes&&me[ke].transitionAxes(Q,pe,ae,W);be?(ue=a.extendFlat({},ae),ue.duration=0,delete de.cartesian):ue=ae;for(var Pe in de){var je=de[Pe],ze=Q._fullData[je[0]]._module;ze.basePlotModule.plot(Q,je,ue,W)}},K(Q,ae,fe)},m.transitionFromReact=function(Q,V,se,re){var ee=Q._fullLayout,ae=ee.transition,fe={},de=[];return fe.prepareFn=function(){var pe=ee._plots;fe.redraw=!1,V.anim==="some"&&(fe.redraw=!0),se.anim==="some"&&(fe.redraw=!0);for(var W in pe){var ue=pe[W],me=ue.xaxis,be=ue.yaxis,ke=re[me._name].range.slice(),Pe=re[be._name].range.slice(),je=me.range.slice(),ze=be.range.slice();me.setScale(),be.setScale();var Ze=null,tt=null;(me.r2l(ke[0])!==me.r2l(je[0])||me.r2l(ke[1])!==me.r2l(je[1]))&&(Ze={xr0:ke,xr1:je}),(be.r2l(Pe[0])!==be.r2l(ze[0])||be.r2l(Pe[1])!==be.r2l(ze[1]))&&(tt={yr0:Pe,yr1:ze}),(Ze||tt)&&de.push(a.extendFlat({plotinfo:ue},Ze,tt))}return Promise.resolve()},fe.runFn=function(pe){for(var W=Q._fullData,ue=Q._fullLayout,me=ue._basePlotModules,be,ke,Pe,je=[],ze=0;ze<W.length;ze++)je.push(ze);function Ze(){for(var Ce=0;Ce<me.length;Ce++)me[Ce].transitionAxes&&me[Ce].transitionAxes(Q,de,be,pe)}function tt(){for(var Ce=0;Ce<me.length;Ce++)me[Ce].plot(Q,Pe,ke,pe)}de.length&&V.anim?ae.ordering==="traces first"?(be=a.extendFlat({},ae,{duration:0}),Pe=je,ke=ae,setTimeout(Ze,ae.duration),tt()):(be=ae,Pe=null,ke=a.extendFlat({},ae,{duration:0}),setTimeout(tt,be.duration),Ze()):de.length?(be=ae,Ze()):V.anim&&(Pe=je,ke=ae,tt())},K(Q,ae,fe)};function K(Q,V,se){var re=!1;function ee(me){var be=Promise.resolve();if(!me)return be;for(;me.length;)be=be.then(me.shift());return be}function ae(me){if(me)for(;me.length;)me.shift()}function fe(){return Q.emit("plotly_transitioning",[]),new Promise(function(me){Q._transitioning=!0,V.duration>0&&(Q._transitioningWithDuration=!0),Q._transitionData._interruptCallbacks.push(function(){re=!0}),se.redraw&&Q._transitionData._interruptCallbacks.push(function(){return c.call("redraw",Q)}),Q._transitionData._interruptCallbacks.push(function(){Q.emit("plotly_transitioninterrupted",[])});var be=0,ke=0;function Pe(){return be++,function(){ke++,!re&&ke===be&&de(me)}}se.runFn(Pe),setTimeout(Pe())})}function de(me){if(Q._transitionData)return ae(Q._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(se.redraw)return c.call("redraw",Q)}).then(function(){Q._transitioning=!1,Q._transitioningWithDuration=!1,Q.emit("plotly_transitioned",[])}).then(me)}function pe(){if(Q._transitionData)return Q._transitioning=!1,ee(Q._transitionData._interruptCallbacks)}var W=[m.previousPromises,pe,se.prepareFn,m.rehover,fe],ue=a.syncOrAsync(W,Q);return(!ue||!ue.then)&&(ue=Promise.resolve()),ue.then(function(){return Q})}m.doCalcdata=function(Q,V){var se=h.list(Q),re=Q._fullData,ee=Q._fullLayout,ae,fe,de,pe,W=new Array(re.length),ue=(Q.calcdata||[]).slice();for(Q.calcdata=W,ee._numBoxes=0,ee._numViolins=0,ee._violinScaleGroupStats={},Q._hmpixcount=0,Q._hmlumcount=0,ee._piecolormap={},ee._sunburstcolormap={},ee._treemapcolormap={},ee._funnelareacolormap={},de=0;de<re.length;de++)if(Array.isArray(V)&&V.indexOf(de)===-1){W[de]=ue[de];continue}for(de=0;de<re.length;de++)ae=re[de],ae._arrayAttrs=t.findArrayAttributes(ae),ae._extremes={};var me=ee._subplots.polar||[];for(de=0;de<me.length;de++)se.push(ee[me[de]].radialaxis,ee[me[de]].angularaxis);for(var be in ee._colorAxes){var ke=ee[be];ke.cauto!==!1&&(delete ke.cmin,delete ke.cmax)}var Pe=!1;function je(tt){if(ae=re[tt],fe=ae._module,ae.visible===!0&&ae.transforms){if(fe&&fe.calc){var Ce=fe.calc(Q,ae);Ce[0]&&Ce[0].t&&Ce[0].t._scene&&delete Ce[0].t._scene.dirty}for(pe=0;pe<ae.transforms.length;pe++){var Ae=ae.transforms[pe];fe=_[Ae.type],fe&&fe.calcTransform&&(ae._hasCalcTransform=!0,Pe=!0,fe.calcTransform(Q,ae,Ae))}}}function ze(tt,Ce){if(ae=re[tt],fe=ae._module,!!fe.isContainer===Ce){var Ae=[];if(ae.visible===!0&&ae._length!==0){delete ae._indexToPoints;var Ne=ae.transforms||[];for(pe=Ne.length-1;pe>=0;pe--)if(Ne[pe].enabled){ae._indexToPoints=Ne[pe]._indexToPoints;break}fe&&fe.calc&&(Ae=fe.calc(Q,ae))}(!Array.isArray(Ae)||!Ae[0])&&(Ae=[{x:u,y:u}]),Ae[0].t||(Ae[0].t={}),Ae[0].trace=ae,W[tt]=Ae}}for(oe(se,re,ee),de=0;de<re.length;de++)ze(de,!0);for(de=0;de<re.length;de++)je(de);for(Pe&&oe(se,re,ee),de=0;de<re.length;de++)ze(de,!0);for(de=0;de<re.length;de++)ze(de,!1);ie(Q);var Ze=J(se,Q);if(Ze.length){for(ee._numBoxes=0,ee._numViolins=0,de=0;de<Ze.length;de++)ze(Ze[de],!0);for(de=0;de<Ze.length;de++)ze(Ze[de],!1);ie(Q)}c.getComponentMethod("fx","calc")(Q),c.getComponentMethod("errorbars","calc")(Q)};var te=/(total|sum|min|max|mean|median) (ascending|descending)/;function J(Q,V){var se=[],re,ee,ae,fe,de;function pe(rr,Pt,Lt){var dt=Pt._id.charAt(0);if(rr==="histogram2dcontour"){var lt=Pt._counterAxes[0],Te=h.getFromId(V,lt),Le=dt==="x"||lt==="x"&&Te.type==="category",Be=dt==="y"||lt==="y"&&Te.type==="category";return function(et,Me){return et===0||Me===0||Le&&et===Lt[Me].length-1||Be&&Me===Lt.length-1?-1:(dt==="y"?Me:et)-1}}else return function(et,Me){return dt==="y"?Me:et}}var W={min:function(rr){return a.aggNums(Math.min,null,rr)},max:function(rr){return a.aggNums(Math.max,null,rr)},sum:function(rr){return a.aggNums(function(Pt,Lt){return Pt+Lt},null,rr)},total:function(rr){return a.aggNums(function(Pt,Lt){return Pt+Lt},null,rr)},mean:function(rr){return a.mean(rr)},median:function(rr){return a.median(rr)}};for(re=0;re<Q.length;re++){var ue=Q[re];if(ue.type==="category"){var me=ue.categoryorder.match(te);if(me){var be=me[1],ke=me[2],Pe=ue._id.charAt(0),je=Pe==="x",ze=[];for(ee=0;ee<ue._categories.length;ee++)ze.push([ue._categories[ee],[]]);for(ee=0;ee<ue._traceIndices.length;ee++){var Ze=ue._traceIndices[ee],tt=V._fullData[Ze];if(tt.visible===!0){var Ce=tt.type;c.traceIs(tt,"histogram")&&(delete tt._xautoBinFinished,delete tt._yautoBinFinished);var Ae=Ce==="splom",Ne=Ce==="scattergl",qe=V.calcdata[Ze];for(ae=0;ae<qe.length;ae++){var At=qe[ae],kt,Ve;if(Ae){var ft=tt._axesDim[ue._id];if(!je){var St=tt._diag[ft][0];St&&(ue=V._fullLayout[h.id2name(St)])}var Wt=At.trace.dimensions[ft].values;for(fe=0;fe<Wt.length;fe++)for(kt=ue._categoriesMap[Wt[fe]],de=0;de<At.trace.dimensions.length;de++)if(de!==ft){var Qt=At.trace.dimensions[de];ze[kt][1].push(Qt.values[fe])}}else if(Ne){for(fe=0;fe<At.t.x.length;fe++)je?(kt=At.t.x[fe],Ve=At.t.y[fe]):(kt=At.t.y[fe],Ve=At.t.x[fe]),ze[kt][1].push(Ve);At.t&&At.t._scene&&delete At.t._scene.dirty}else if(At.hasOwnProperty("z")){Ve=At.z;var zt=pe(tt.type,ue,Ve);for(fe=0;fe<Ve.length;fe++)for(de=0;de<Ve[fe].length;de++)kt=zt(de,fe),kt+1&&ze[kt][1].push(Ve[fe][de])}else for(kt=At.p,kt===void 0&&(kt=At[Pe]),Ve=At.s,Ve===void 0&&(Ve=At.v),Ve===void 0&&(Ve=je?At.y:At.x),Array.isArray(Ve)||(Ve===void 0?Ve=[]:Ve=[Ve]),fe=0;fe<Ve.length;fe++)ze[kt][1].push(Ve[fe])}}}ue._categoriesValue=ze;var $t=[];for(ee=0;ee<ze.length;ee++)$t.push([ze[ee][0],W[be](ze[ee][1])]);$t.sort(function(rr,Pt){return rr[1]-Pt[1]}),ue._categoriesAggregatedValue=$t,ue._initialCategories=$t.map(function(rr){return rr[0]}),ke==="descending"&&ue._initialCategories.reverse(),se=se.concat(ue.sortByInitialCategories())}}}return se}function oe(Q,V,se){var re={};function ee(pe){pe.clearCalc(),pe.type==="multicategory"&&pe.setupMultiCategory(V),re[pe._id]=1}a.simpleMap(Q,ee);for(var ae=se._axisMatchGroups||[],fe=0;fe<ae.length;fe++)for(var de in ae[fe])re[de]||ee(se[h.id2name(de)])}function ie(Q){var V=Q._fullLayout,se=V._visibleModules,re={},ee,ae,fe;for(ae=0;ae<se.length;ae++){var de=se[ae],pe=de.crossTraceCalc;if(pe){var W=de.basePlotModule.name;re[W]?a.pushUnique(re[W],pe):re[W]=[pe]}}for(fe in re){var ue=re[fe],me=V._subplots[fe];if(Array.isArray(me))for(ee=0;ee<me.length;ee++){var be=me[ee],ke=fe==="cartesian"?V._plots[be]:V[be];for(ae=0;ae<ue.length;ae++)ue[ae](Q,ke,be)}else for(ae=0;ae<ue.length;ae++)ue[ae](Q)}}m.rehover=function(Q){Q._fullLayout._rehover&&Q._fullLayout._rehover()},m.redrag=function(Q){Q._fullLayout._redrag&&Q._fullLayout._redrag()},m.generalUpdatePerTraceModule=function(Q,V,se,re){var ee=V.traceHash,ae={},fe;for(fe=0;fe<se.length;fe++){var de=se[fe],pe=de[0].trace;pe.visible&&(ae[pe.type]=ae[pe.type]||[],ae[pe.type].push(de))}for(var W in ee)if(!ae[W]){var ue=ee[W][0],me=ue[0].trace;me.visible=!1,ae[W]=[ue]}for(var be in ae){var ke=ae[be],Pe=ke[0][0].trace._module;Pe.plot(Q,V,a.filterVisible(ke),re)}V.traceHash=ae},m.plotBasePlot=function(Q,V,se,re,ee){var ae=c.getModule(Q),fe=d(V.calcdata,ae)[0];ae.plot(V,fe,re,ee)},m.cleanBasePlot=function(Q,V,se,re,ee){var ae=ee._has&&ee._has(Q),fe=se._has&&se._has(Q);ae&&!fe&&ee["_"+Q+"layer"].selectAll("g.trace").remove()}},{"../components/color":643,"../constants/numerical":753,"../lib":778,"../plot_api/plot_schema":816,"../plot_api/plot_template":817,"../plots/get_data":865,"../registry":911,"./animation_attributes":822,"./attributes":824,"./cartesian/axis_ids":831,"./cartesian/handle_outline":838,"./command":854,"./font_attributes":856,"./frame_attributes":857,"./layout_attributes":882,d3:169,"d3-time-format":166,"fast-isnumeric":241}],892:[function(e,v,M){v.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],893:[function(e,v,M){var r=e("../../lib"),n=e("../../lib/polygon").tester,l=r.findIndexOfMin,c=r.isAngleInsideSector,t=r.angleDelta,f=r.angleDist;function a(T,g,A,k,R){if(!c(g,k))return!1;var L,z;A[0]<A[1]?(L=A[0],z=A[1]):(L=A[1],z=A[0]);var E=n(s(L,k[0],k[1],R)),S=n(s(z,k[0],k[1],R)),C=[T*Math.cos(g),T*Math.sin(g)];return S.contains(C)&&!E.contains(C)}function o(T,g,A,k){var R,L,z=k[0],E=k[1],S=y(Math.sin(g)-Math.sin(T)),C=y(Math.cos(g)-Math.cos(T)),D=Math.tan(A),F=y(1/D),N=S/C,G=E-N*z;return F?S&&C?(R=G/(D-N),L=D*R):C?(R=E*F,L=E):(R=z,L=z*D):S&&C?(R=0,L=G):C?(R=0,L=E):R=L=NaN,[R,L]}function u(T,g,A,k){var R=-g*A,L=g*g+1,z=2*(g*R-A),E=R*R+A*A-T*T,S=Math.sqrt(z*z-4*L*E),C=(-z+S)/(2*L),D=(-z-S)/(2*L);return[[C,g*C+R+k],[D,g*D+R+k]]}function h(T,g){var A=g.length,k=new Array(A+1),R;for(R=0;R<A;R++){var L=g[R];k[R]=[T*Math.cos(L),T*Math.sin(L)]}return k[R]=k[0].slice(),k}function i(T,g,A,k){var R=k.length,L=[],z,E;function S(B){return[T*Math.cos(B),T*Math.sin(B)]}function C(B,j,H){return o(B,j,H,S(B))}function D(B){return r.mod(B,R)}function F(B){return c(B,[g,A])}var N=l(k,function(B){return F(B)?f(B,g):1/0}),G=C(k[N],k[D(N-1)],g);for(L.push(G),z=N,E=0;E<R;z++,E++){var U=k[D(z)];if(!F(U))break;L.push(S(U))}var X=l(k,function(B){return F(B)?f(B,A):1/0}),I=C(k[X],k[D(X+1)],A);return L.push(I),L.push([0,0]),L.push(L[0].slice()),L}function s(T,g,A,k){return r.isFullCircle([g,A])?h(T,k):i(T,g,A,k)}function p(T,g,A,k){for(var R=1/0,L=1/0,z=s(T,g,A,k),E=0;E<z.length;E++){var S=z[E];R=Math.min(R,S[0]),L=Math.min(L,-S[1])}return[R,L]}function d(T,g){var A=function(L){var z=t(L,T);return z>0?z:1/0},k=l(g,A),R=r.mod(k+1,g.length);return[g[k],g[R]]}function y(T){return Math.abs(T)>1e-10?T:0}function b(T,g,A){g=g||0,A=A||0;for(var k=T.length,R=new Array(k),L=0;L<k;L++){var z=T[L];R[L]=[g+z[0],A-z[1]]}return R}function m(T,g,A,k,R,L){var z=s(T,g,A,k);return"M"+b(z,R,L).join("L")}function _(T,g,A,k,R,L,z){var E,S;T<g?(E=T,S=g):(E=g,S=T);var C=b(s(E,A,k,R),L,z),D=b(s(S,A,k,R),L,z);return"M"+D.reverse().join("L")+"M"+C.join("L")}v.exports={isPtInsidePolygon:a,findPolygonOffset:p,findEnclosingVertexAngles:d,findIntersectionXY:o,findXYatLength:u,clampTiny:y,pathPolygon:m,pathPolygonAnnulus:_}},{"../../lib":778,"../../lib/polygon":790}],894:[function(e,v,M){var r=e("../get_data").getSubplotCalcData,n=e("../../lib").counterRegex,l=e("./polar"),c=e("./constants"),t=c.attr,f=c.name,a=n(f),o={};o[t]={valType:"subplotid",dflt:f,editType:"calc"};function u(i){for(var s=i._fullLayout,p=i.calcdata,d=s._subplots[f],y=0;y<d.length;y++){var b=d[y],m=r(p,f,b),_=s[b]._subplot;_||(_=l(i,b),s[b]._subplot=_),_.plot(m,s,i._promises)}}function h(i,s,p,d){for(var y=d._subplots[f]||[],b=d._has&&d._has("gl"),m=s._has&&s._has("gl"),_=b&&!m,T=0;T<y.length;T++){var g=y[T],A=d[g]._subplot;if(!s[g]&&A){A.framework.remove(),A.layers["radial-axis-title"].remove();for(var k in A.clipPaths)A.clipPaths[k].remove()}_&&A._scene&&(A._scene.destroy(),A._scene=null)}}v.exports={attr:t,name:f,idRoot:f,idRegex:a,attrRegex:a,attributes:o,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:u,clean:h,toSVG:e("../cartesian").toSVG}},{"../../lib":778,"../cartesian":841,"../get_data":865,"./constants":892,"./layout_attributes":895,"./layout_defaults":896,"./polar":903}],895:[function(e,v,M){var r=e("../../components/color/attributes"),n=e("../cartesian/layout_attributes"),l=e("../domain").attributes,c=e("../../lib").extendFlat,t=e("../../plot_api/edit_types").overrideAll,f=t({color:n.color,showline:c({},n.showline,{dflt:!0}),linecolor:n.linecolor,linewidth:n.linewidth,showgrid:c({},n.showgrid,{dflt:!0}),gridcolor:n.gridcolor,gridwidth:n.gridwidth},"plot","from-root"),a=t({tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,showexponent:n.showexponent,exponentformat:n.exponentformat,minexponent:n.minexponent,separatethousands:n.separatethousands,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,layer:n.layer},"plot","from-root"),o={visible:c({},n.visible,{dflt:!0}),type:c({},n.type,{values:["-","linear","log","date","category"]}),autotypenumbers:n.autotypenumbers,autorange:c({},n.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:c({},n.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:n.categoryorder,categoryarray:n.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:c({},n.title.text,{editType:"plot",dflt:""}),font:c({},n.title.font,{editType:"plot"}),editType:"plot"},hoverformat:n.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:n._deprecated.title,titlefont:n._deprecated.titlefont}};c(o,f,a);var u={visible:c({},n.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:n.autotypenumbers,categoryorder:n.categoryorder,categoryarray:n.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:n.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};c(u,f,a),v.exports={domain:l({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:r.background},radialaxis:o,angularaxis:u,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":642,"../../lib":778,"../../plot_api/edit_types":810,"../cartesian/layout_attributes":842,"../domain":855}],896:[function(e,v,M){var r=e("../../lib"),n=e("../../components/color"),l=e("../../plot_api/plot_template"),c=e("../subplot_defaults"),t=e("../get_data").getSubplotData,f=e("../cartesian/tick_value_defaults"),a=e("../cartesian/tick_mark_defaults"),o=e("../cartesian/tick_label_defaults"),u=e("../cartesian/category_order_defaults"),h=e("../cartesian/line_grid_defaults"),i=e("../cartesian/axis_autotype"),s=e("./layout_attributes"),p=e("./set_convert"),d=e("./constants"),y=d.axisNames;function b(_,T,g,A){var k=g("bgcolor");A.bgColor=n.combine(k,A.paper_bgcolor);var R=g("sector");g("hole");var L=t(A.fullData,d.name,A.id),z=A.layoutOut,E;function S(te,J){return g(E+"."+te,J)}for(var C=0;C<y.length;C++){E=y[C],r.isPlainObject(_[E])||(_[E]={});var D=_[E],F=l.newContainer(T,E);F._id=F._name=E,F._attr=A.id+"."+E,F._traceIndices=L.map(function(te){return te._expandedIndex});var N=d.axisName2dataArray[E],G=m(D,F,S,L,N,A);u(D,F,S,{axData:L,dataAttr:N});var U=S("visible");p(F,T,z),S("uirevision",T.uirevision);var X,I;switch(U&&(X=S("color"),I=X===D.color?X:A.font.color),F._m=1,E){case"radialaxis":var B=S("autorange",!F.isValidRange(D.range));D.autorange=B,B&&(G==="linear"||G==="-")&&S("rangemode"),B==="reversed"&&(F._m=-1),S("range"),F.cleanRange("range",{dfltRange:[0,1]}),U&&(S("side"),S("angle",R[0]),S("title.text"),r.coerceFont(S,"title.font",{family:A.font.family,size:Math.round(A.font.size*1.2),color:I}));break;case"angularaxis":if(G==="date"){r.log("Polar plots do not support date angular axes yet.");for(var j=0;j<L.length;j++)L[j].visible=!1;G=D.type=F.type="linear"}S(G==="linear"?"thetaunit":"period");var H=S("direction");S("rotation",{counterclockwise:0,clockwise:90}[H]);break}if(U){f(D,F,S,F.type),o(D,F,S,F.type,{tickSuffixDflt:F.thetaunit==="degrees"?"°":void 0}),a(D,F,S,{outerTicks:!0});var K=S("showticklabels");K&&(r.coerceFont(S,"tickfont",{family:A.font.family,size:A.font.size,color:I}),S("tickangle"),S("tickformat")),h(D,F,S,{dfltColor:X,bgColor:A.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:s[E]}),S("layer")}G!=="category"&&S("hoverformat"),F._input=D}T.angularaxis.type==="category"&&g("gridshape")}function m(_,T,g,A,k,R){var L=g("autotypenumbers",R.autotypenumbersDflt),z=g("type");if(z==="-"){for(var E,S=0;S<A.length;S++)if(A[S].visible){E=A[S];break}E&&E[k]&&(T.type=i(E[k],"gregorian",{noMultiCategory:!0,autotypenumbers:L})),T.type==="-"?T.type="linear":_.type=T.type}return T.type}v.exports=function(T,g,A){c(T,g,A,{type:d.name,attributes:s,handleDefaults:b,font:g.font,autotypenumbersDflt:g.autotypenumbers,paper_bgcolor:g.paper_bgcolor,fullData:A,layoutOut:g})}},{"../../components/color":643,"../../lib":778,"../../plot_api/plot_template":817,"../cartesian/axis_autotype":829,"../cartesian/category_order_defaults":832,"../cartesian/line_grid_defaults":844,"../cartesian/tick_label_defaults":849,"../cartesian/tick_mark_defaults":850,"../cartesian/tick_value_defaults":851,"../get_data":865,"../subplot_defaults":905,"./constants":892,"./layout_attributes":895,"./set_convert":904}],897:[function(e,v,M){var r=e("../../../traces/scatter/attributes"),n=r.marker,l=e("../../../lib/extend").extendFlat;v.exports={r:l({},r.r,{}),t:l({},r.t,{}),marker:{color:l({},n.color,{}),size:l({},n.size,{}),symbol:l({},n.symbol,{}),opacity:l({},n.opacity,{}),editType:"calc"}}},{"../../../lib/extend":768,"../../../traces/scatter/attributes":1187}],898:[function(e,v,M){var r=e("../../cartesian/layout_attributes"),n=e("../../../lib/extend").extendFlat,l=e("../../../plot_api/edit_types").overrideAll,c=["Legacy polar charts are deprecated!","Please switch to *polar* subplots."].join(" "),t=n({},r.domain,{});function f(a,o){var u={showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:c},visible:{valType:"boolean"}};return n({},o,u)}v.exports=l({radialaxis:f("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:t,orientation:{valType:"number"}}),angularaxis:f("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:t}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":768,"../../../plot_api/edit_types":810,"../../cartesian/layout_attributes":842}],899:[function(e,v,M){var r=v.exports=e("./micropolar");r.manager=e("./micropolar_manager")},{"./micropolar":900,"./micropolar_manager":901}],900:[function(e,v,M){var r=e("d3"),n=e("../../../lib"),l=n.extendDeepAll,c=e("../../../constants/alignment").MID_SHIFT,t=v.exports={version:"0.2.2"};t.Axis=function(){var a={data:[],layout:{}},o={},u={},h,i,s=r.dispatch("hover"),p,d,y={};function b(m){i=m||i;var _=a.data,T=a.layout;return(typeof i=="string"||i.nodeName)&&(i=r.select(i)),i.datum(_).each(function(g,A){var k=g.slice();u={data:t.util.cloneJson(k),layout:t.util.cloneJson(T)};var R=0;k.forEach(function(Te,Le){Te.color||(Te.color=T.defaultColorRange[R],R=(R+1)%T.defaultColorRange.length),Te.strokeColor||(Te.strokeColor=Te.geometry==="LinePlot"?Te.color:r.rgb(Te.color).darker().toString()),u.data[Le].color=Te.color,u.data[Le].strokeColor=Te.strokeColor,u.data[Le].strokeDash=Te.strokeDash,u.data[Le].strokeSize=Te.strokeSize});var L=k.filter(function(Te,Le){var Be=Te.visible;return typeof Be>"u"||Be===!0}),z=!1,E=L.map(function(Te,Le){return z=z||typeof Te.groupId<"u",Te});if(z){var S=r.nest().key(function(Te,Le){return typeof Te.groupId<"u"?Te.groupId:"unstacked"}).entries(E),C=[],D=S.map(function(Te,Le){if(Te.key==="unstacked")return Te.values;var Be=Te.values[0].r.map(function(et,Me){return 0});return Te.values.forEach(function(et,Me,Ie){et.yStack=[Be],C.push(Be),Be=t.util.sumArrays(et.r,Be)}),Te.values});L=r.merge(D)}L.forEach(function(Te,Le){Te.t=Array.isArray(Te.t[0])?Te.t:[Te.t],Te.r=Array.isArray(Te.r[0])?Te.r:[Te.r]});var F=Math.min(T.width-T.margin.left-T.margin.right,T.height-T.margin.top-T.margin.bottom)/2;F=Math.max(10,F);var N=[T.margin.left+F,T.margin.top+F],G;if(z){var U=r.max(t.util.sumArrays(t.util.arrayLast(L).r[0],t.util.arrayLast(C)));G=[0,U]}else G=r.extent(t.util.flattenArray(L.map(function(Te,Le){return Te.r})));T.radialAxis.domain!=t.DATAEXTENT&&(G[0]=0),p=r.scale.linear().domain(T.radialAxis.domain!=t.DATAEXTENT&&T.radialAxis.domain?T.radialAxis.domain:G).range([0,F]),u.layout.radialAxis.domain=p.domain();var X=t.util.flattenArray(L.map(function(Te,Le){return Te.t})),I=typeof X[0]=="string",B;I&&(X=t.util.deduplicate(X),B=X.slice(),X=r.range(X.length),L=L.map(function(Te,Le){var Be=Te;return Te.t=[X],z&&(Be.yStack=Te.yStack),Be}));var j=L.filter(function(Te,Le){return Te.geometry==="LinePlot"||Te.geometry==="DotPlot"}).length===L.length,H=T.needsEndSpacing===null?I||!j:T.needsEndSpacing,K=T.angularAxis.domain&&T.angularAxis.domain!=t.DATAEXTENT&&!I&&T.angularAxis.domain[0]>=0,te=K?T.angularAxis.domain:r.extent(X),J=Math.abs(X[1]-X[0]);j&&!I&&(J=0);var oe=te.slice();H&&I&&(oe[1]+=J);var ie=T.angularAxis.ticksCount||4;ie>8&&(ie=ie/(ie/8)+ie%8),T.angularAxis.ticksStep&&(ie=(oe[1]-oe[0])/ie);var Q=T.angularAxis.ticksStep||(oe[1]-oe[0])/(ie*(T.minorTicks+1));B&&(Q=Math.max(Math.round(Q),1)),oe[2]||(oe[2]=Q);var V=r.range.apply(this,oe);if(V=V.map(function(Te,Le){return parseFloat(Te.toPrecision(12))}),d=r.scale.linear().domain(oe.slice(0,2)).range(T.direction==="clockwise"?[0,360]:[360,0]),u.layout.angularAxis.domain=d.domain(),u.layout.angularAxis.endPadding=H?J:0,h=r.select(this).select("svg.chart-root"),typeof h>"u"||h.empty()){var se="<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>",re=new DOMParser().parseFromString(se,"application/xml"),ee=this.appendChild(this.ownerDocument.importNode(re.documentElement,!0));h=r.select(ee)}h.select(".guides-group").style({"pointer-events":"none"}),h.select(".angular.axis-group").style({"pointer-events":"none"}),h.select(".radial.axis-group").style({"pointer-events":"none"});var ae=h.select(".chart-group"),fe={fill:"none",stroke:T.tickColor},de={"font-size":T.font.size,"font-family":T.font.family,fill:T.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(Te,Le){return" "+Te+" 0 "+T.font.outlineColor}).join(",")},pe;if(T.showLegend){pe=h.select(".legend-group").attr({transform:"translate("+[F,T.margin.top]+")"}).style({display:"block"});var W=L.map(function(Te,Le){var Be=t.util.cloneJson(Te);return Be.symbol=Te.geometry==="DotPlot"?Te.dotType||"circle":Te.geometry!="LinePlot"?"square":"line",Be.visibleInLegend=typeof Te.visibleInLegend>"u"||Te.visibleInLegend,Be.color=Te.geometry==="LinePlot"?Te.strokeColor:Te.color,Be});t.Legend().config({data:L.map(function(Te,Le){return Te.name||"Element"+Le}),legendConfig:l({},t.Legend.defaultConfig().legendConfig,{container:pe,elements:W,reverseOrder:T.legend.reverseOrder})})();var ue=pe.node().getBBox();F=Math.min(T.width-ue.width-T.margin.left-T.margin.right,T.height-T.margin.top-T.margin.bottom)/2,F=Math.max(10,F),N=[T.margin.left+F,T.margin.top+F],p.range([0,F]),u.layout.radialAxis.domain=p.domain(),pe.attr("transform","translate("+[N[0]+F,N[1]-F]+")")}else pe=h.select(".legend-group").style({display:"none"});h.attr({width:T.width,height:T.height}).style({opacity:T.opacity}),ae.attr("transform","translate("+N+")").style({cursor:"crosshair"});var me=[(T.width-(T.margin.left+T.margin.right+F*2+(ue?ue.width:0)))/2,(T.height-(T.margin.top+T.margin.bottom+F*2))/2];if(me[0]=Math.max(0,me[0]),me[1]=Math.max(0,me[1]),h.select(".outer-group").attr("transform","translate("+me+")"),T.title&&T.title.text){var be=h.select("g.title-group text").style(de).text(T.title.text),ke=be.node().getBBox();be.attr({x:N[0]-ke.width/2,y:N[1]-F-20})}var Pe=h.select(".radial.axis-group");if(T.radialAxis.gridLinesVisible){var je=Pe.selectAll("circle.grid-circle").data(p.ticks(5));je.enter().append("circle").attr({class:"grid-circle"}).style(fe),je.attr("r",p),je.exit().remove()}Pe.select("circle.outside-circle").attr({r:F}).style(fe);var ze=h.select("circle.background-circle").attr({r:F}).style({fill:T.backgroundColor,stroke:T.stroke});function Ze(Te,Le){return d(Te)%360+T.orientation}if(T.radialAxis.visible){var tt=r.svg.axis().scale(p).ticks(5).tickSize(5);Pe.call(tt).attr({transform:"rotate("+T.radialAxis.orientation+")"}),Pe.selectAll(".domain").style(fe),Pe.selectAll("g>text").text(function(Te,Le){return this.textContent+T.radialAxis.ticksSuffix}).style(de).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(Te,Le){return T.radialAxis.tickOrientation==="horizontal"?"rotate("+-T.radialAxis.orientation+") translate("+[0,de["font-size"]]+")":"translate("+[0,de["font-size"]]+")"}}),Pe.selectAll("g>line").style({stroke:"black"})}var Ce=h.select(".angular.axis-group").selectAll("g.angular-tick").data(V),Ae=Ce.enter().append("g").classed("angular-tick",!0);Ce.attr({transform:function(Te,Le){return"rotate("+Ze(Te)+")"}}).style({display:T.angularAxis.visible?"block":"none"}),Ce.exit().remove(),Ae.append("line").classed("grid-line",!0).classed("major",function(Te,Le){return Le%(T.minorTicks+1)==0}).classed("minor",function(Te,Le){return Le%(T.minorTicks+1)!=0}).style(fe),Ae.selectAll(".minor").style({stroke:T.minorTickColor}),Ce.select("line.grid-line").attr({x1:T.tickLength?F-T.tickLength:0,x2:F}).style({display:T.angularAxis.gridLinesVisible?"block":"none"}),Ae.append("text").classed("axis-text",!0).style(de);var Ne=Ce.select("text.axis-text").attr({x:F+T.labelOffset,dy:c+"em",transform:function(Te,Le){var Be=Ze(Te),et=F+T.labelOffset,Me=T.angularAxis.tickOrientation;return Me=="horizontal"?"rotate("+-Be+" "+et+" 0)":Me=="radial"?Be<270&&Be>90?"rotate(180 "+et+" 0)":null:"rotate("+(Be<=180&&Be>0?-90:90)+" "+et+" 0)"}}).style({"text-anchor":"middle",display:T.angularAxis.labelsVisible?"block":"none"}).text(function(Te,Le){return Le%(T.minorTicks+1)!=0?"":B?B[Te]+T.angularAxis.ticksSuffix:Te+T.angularAxis.ticksSuffix}).style(de);T.angularAxis.rewriteTicks&&Ne.text(function(Te,Le){return Le%(T.minorTicks+1)!=0?"":T.angularAxis.rewriteTicks(this.textContent,Le)});var qe=r.max(ae.selectAll(".angular-tick text")[0].map(function(Te,Le){return Te.getCTM().e+Te.getBBox().width}));pe.attr({transform:"translate("+[F+qe,T.margin.top]+")"});var At=h.select("g.geometry-group").selectAll("g").size()>0,kt=h.select("g.geometry-group").selectAll("g.geometry").data(L);if(kt.enter().append("g").attr({class:function(Te,Le){return"geometry geometry"+Le}}),kt.exit().remove(),L[0]||At){var Ve=[];L.forEach(function(Te,Le){var Be={};Be.radialScale=p,Be.angularScale=d,Be.container=kt.filter(function(et,Me){return Me==Le}),Be.geometry=Te.geometry,Be.orientation=T.orientation,Be.direction=T.direction,Be.index=Le,Ve.push({data:Te,geometryConfig:Be})});var ft=r.nest().key(function(Te,Le){return typeof Te.data.groupId<"u"||"unstacked"}).entries(Ve),St=[];ft.forEach(function(Te,Le){Te.key==="unstacked"?St=St.concat(Te.values.map(function(Be,et){return[Be]})):St.push(Te.values)}),St.forEach(function(Te,Le){var Be;Array.isArray(Te)?Be=Te[0].geometryConfig.geometry:Be=Te.geometryConfig.geometry;var et=Te.map(function(Me,Ie){return l(t[Be].defaultConfig(),Me)});t[Be]().config(et)()})}var Wt=h.select(".guides-group"),Qt=h.select(".tooltips-group"),zt=t.tooltipPanel().config({container:Qt,fontSize:8})(),$t=t.tooltipPanel().config({container:Qt,fontSize:8})(),rr=t.tooltipPanel().config({container:Qt,hasTick:!0})(),Pt,Lt;if(!I){var dt=Wt.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});ae.on("mousemove.angular-guide",function(Te,Le){var Be=t.util.getMousePos(ze).angle;dt.attr({x2:-F,transform:"rotate("+Be+")"}).style({opacity:.5});var et=(Be+180+360-T.orientation)%360;Pt=d.invert(et);var Me=t.util.convertToCartesian(F+12,Be+180);zt.text(t.util.round(Pt)).move([Me[0]+N[0],Me[1]+N[1]])}).on("mouseout.angular-guide",function(Te,Le){Wt.select("line").style({opacity:0})})}var lt=Wt.select("circle").style({stroke:"grey",fill:"none"});ae.on("mousemove.radial-guide",function(Te,Le){var Be=t.util.getMousePos(ze).radius;lt.attr({r:Be}).style({opacity:.5}),Lt=p.invert(t.util.getMousePos(ze).radius);var et=t.util.convertToCartesian(Be,T.radialAxis.orientation);$t.text(t.util.round(Lt)).move([et[0]+N[0],et[1]+N[1]])}).on("mouseout.radial-guide",function(Te,Le){lt.style({opacity:0}),rr.hide(),zt.hide(),$t.hide()}),h.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(Te,Le){var Be=r.select(this),et=this.style.fill,Me="black",Ie=this.style.opacity||1;if(Be.attr({"data-opacity":Ie}),et&&et!=="none"){Be.attr({"data-fill":et}),Me=r.hsl(et).darker().toString(),Be.style({fill:Me,opacity:1});var He={t:t.util.round(Te[0]),r:t.util.round(Te[1])};I&&(He.t=B[Te[0]]);var Xe="t: "+He.t+", r: "+He.r,ht=this.getBoundingClientRect(),it=h.node().getBoundingClientRect(),Ge=[ht.left+ht.width/2-me[0]-it.left,ht.top+ht.height/2-me[1]-it.top];rr.config({color:Me}).text(Xe),rr.move(Ge)}else et=this.style.stroke||"black",Be.attr({"data-stroke":et}),Me=r.hsl(et).darker().toString(),Be.style({stroke:Me,opacity:1})}).on("mousemove.tooltip",function(Te,Le){if(r.event.which!=0)return!1;r.select(this).attr("data-fill")&&rr.show()}).on("mouseout.tooltip",function(Te,Le){rr.hide();var Be=r.select(this),et=Be.attr("data-fill");et?Be.style({fill:et,opacity:Be.attr("data-opacity")}):Be.style({stroke:Be.attr("data-stroke"),opacity:Be.attr("data-opacity")})})}),y}return y.render=function(m){return b(m),this},y.config=function(m){if(!arguments.length)return a;var _=t.util.cloneJson(m);return _.data.forEach(function(T,g){a.data[g]||(a.data[g]={}),l(a.data[g],t.Axis.defaultConfig().data[0]),l(a.data[g],T)}),l(a.layout,t.Axis.defaultConfig().layout),l(a.layout,_.layout),this},y.getLiveConfig=function(){return u},y.getinputConfig=function(){return o},y.radialScale=function(m){return p},y.angularScale=function(m){return d},y.svg=function(){return h},r.rebind(y,s,"on"),y},t.Axis.defaultConfig=function(f,a){var o={data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:r.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}};return o},t.util={},t.DATAEXTENT="dataExtent",t.AREA="AreaChart",t.LINE="LinePlot",t.DOT="DotPlot",t.BAR="BarChart",t.util._override=function(f,a){for(var o in f)o in a&&(a[o]=f[o])},t.util._extend=function(f,a){for(var o in f)a[o]=f[o]},t.util._rndSnd=function(){return Math.random()*2-1+(Math.random()*2-1)+(Math.random()*2-1)},t.util.dataFromEquation2=function(f,a){var o=a||6,u=r.range(0,360+o,o).map(function(h,i){var s=h*Math.PI/180,p=f(s);return[h,p]});return u},t.util.dataFromEquation=function(f,a,o){var u=a||6,h=[],i=[];r.range(0,360+u,u).forEach(function(p,d){var y=p*Math.PI/180,b=f(y);h.push(p),i.push(b)});var s={t:h,r:i};return o&&(s.name=o),s},t.util.ensureArray=function(f,a){if(typeof f>"u")return null;var o=[].concat(f);return r.range(a).map(function(u,h){return o[h]||o[0]})},t.util.fillArrays=function(f,a,o){return a.forEach(function(u,h){f[u]=t.util.ensureArray(f[u],o)}),f},t.util.cloneJson=function(f){return JSON.parse(JSON.stringify(f))},t.util.validateKeys=function(f,a){typeof a=="string"&&(a=a.split("."));var o=a.shift();return f[o]&&(!a.length||objHasKeys(f[o],a))},t.util.sumArrays=function(f,a){return r.zip(f,a).map(function(o,u){return r.sum(o)})},t.util.arrayLast=function(f){return f[f.length-1]},t.util.arrayEqual=function(f,a){for(var o=Math.max(f.length,a.length,1);o-->=0&&f[o]===a[o];);return o===-2},t.util.flattenArray=function(f){for(var a=[];!t.util.arrayEqual(a,f);)a=f,f=[].concat.apply([],f);return f},t.util.deduplicate=function(f){return f.filter(function(a,o,u){return u.indexOf(a)==o})},t.util.convertToCartesian=function(f,a){var o=a*Math.PI/180,u=f*Math.cos(o),h=f*Math.sin(o);return[u,h]},t.util.round=function(f,a){var o=a||2,u=Math.pow(10,o);return Math.round(f*u)/u},t.util.getMousePos=function(f){var a=r.mouse(f.node()),o=a[0],u=a[1],h={};return h.x=o,h.y=u,h.pos=a,h.angle=(Math.atan2(u,o)+Math.PI)*180/Math.PI,h.radius=Math.sqrt(o*o+u*u),h},t.util.duplicatesCount=function(f){for(var a={},o,u={},h=0,i=f.length;h<i;h++)o=f[h],o in a?(a[o]++,u[o]=a[o]):a[o]=1;return u},t.util.duplicates=function(f){return Object.keys(t.util.duplicatesCount(f))},t.util.translator=function(f,a,o,u){if(u){var h=o.slice();o=a,a=h}var i=a.reduce(function(s,p){if(typeof s<"u")return s[p]},f);typeof i>"u"||(a.reduce(function(s,p,d){if(!(typeof s>"u"))return d===a.length-1&&delete s[p],s[p]},f),o.reduce(function(s,p,d){return typeof s[p]>"u"&&(s[p]={}),d===o.length-1&&(s[p]=i),s[p]},f))},t.PolyChart=function(){var a=[t.PolyChart.defaultConfig()],o=r.dispatch("hover"),u={solid:"none",dash:[5,2],dot:[2,5]},h;function i(){var s=a[0].geometryConfig,p=s.container;typeof p=="string"&&(p=r.select(p)),p.datum(a).each(function(d,y){var b=!!d[0].data.yStack,m=d.map(function(F,N){return b?r.zip(F.data.t[0],F.data.r[0],F.data.yStack[0]):r.zip(F.data.t[0],F.data.r[0])}),_=s.angularScale,T=s.radialScale.domain()[0],g={};g.bar=function(F,N,G){var U=d[G].data,X=s.radialScale(F[1])-s.radialScale(0),I=s.radialScale(F[2]||0),B=U.barWidth;r.select(this).attr({class:"mark bar",d:"M"+[[X+I,-B/2],[X+I,B/2],[I,B/2],[I,-B/2]].join("L")+"Z",transform:function(j,H){return"rotate("+(s.orientation+_(j[0]))+")"}})},g.dot=function(F,N,G){var U=F[2]?[F[0],F[1]+F[2]]:F,X=r.svg.symbol().size(d[G].data.dotSize).type(d[G].data.dotType)(F,N);r.select(this).attr({class:"mark dot",d:X,transform:function(I,B){var j=D(C(U));return"translate("+[j.x,j.y]+")"}})};var A=r.svg.line.radial().interpolate(d[0].data.lineInterpolation).radius(function(F){return s.radialScale(F[1])}).angle(function(F){return s.angularScale(F[0])*Math.PI/180});g.line=function(F,N,G){var U=F[2]?m[G].map(function(I,B){return[I[0],I[1]+I[2]]}):m[G];if(r.select(this).each(g.dot).style({opacity:function(I,B){return+d[G].data.dotVisible},fill:z.stroke(F,N,G)}).attr({class:"mark dot"}),!(N>0)){var X=r.select(this.parentNode).selectAll("path.line").data([0]);X.enter().insert("path"),X.attr({class:"line",d:A(U),transform:function(I,B){return"rotate("+(s.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(I,B){return z.fill(F,N,G)},"fill-opacity":0,stroke:function(I,B){return z.stroke(F,N,G)},"stroke-width":function(I,B){return z["stroke-width"](F,N,G)},"stroke-dasharray":function(I,B){return z["stroke-dasharray"](F,N,G)},opacity:function(I,B){return z.opacity(F,N,G)},display:function(I,B){return z.display(F,N,G)}})}};var k=s.angularScale.range(),R=Math.abs(k[1]-k[0])/m[0].length*Math.PI/180,L=r.svg.arc().startAngle(function(F){return-R/2}).endAngle(function(F){return R/2}).innerRadius(function(F){return s.radialScale(T+(F[2]||0))}).outerRadius(function(F){return s.radialScale(T+(F[2]||0))+s.radialScale(F[1])});g.arc=function(F,N,G){r.select(this).attr({class:"mark arc",d:L,transform:function(U,X){return"rotate("+(s.orientation+_(U[0])+90)+")"}})};var z={fill:function(F,N,G){return d[G].data.color},stroke:function(F,N,G){return d[G].data.strokeColor},"stroke-width":function(F,N,G){return d[G].data.strokeSize+"px"},"stroke-dasharray":function(F,N,G){return u[d[G].data.strokeDash]},opacity:function(F,N,G){return d[G].data.opacity},display:function(F,N,G){return typeof d[G].data.visible>"u"||d[G].data.visible?"block":"none"}},E=r.select(this).selectAll("g.layer").data(m);E.enter().append("g").attr({class:"layer"});var S=E.selectAll("path.mark").data(function(F,N){return F});S.enter().append("path").attr({class:"mark"}),S.style(z).each(g[s.geometryType]),S.exit().remove(),E.exit().remove();function C(F,N){var G=s.radialScale(F[1]),U=(s.angularScale(F[0])+s.orientation)*Math.PI/180;return{r:G,t:U}}function D(F){var N=F.r*Math.cos(F.t),G=F.r*Math.sin(F.t);return{x:N,y:G}}})}return i.config=function(s){return arguments.length?(s.forEach(function(p,d){a[d]||(a[d]={}),l(a[d],t.PolyChart.defaultConfig()),l(a[d],p)}),this):a},i.getColorScale=function(){return h},r.rebind(i,o,"on"),i},t.PolyChart.defaultConfig=function(){var f={data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:r.scale.category20()}};return f},t.BarChart=function(){return t.PolyChart()},t.BarChart.defaultConfig=function(){var f={geometryConfig:{geometryType:"bar"}};return f},t.AreaChart=function(){return t.PolyChart()},t.AreaChart.defaultConfig=function(){var f={geometryConfig:{geometryType:"arc"}};return f},t.DotPlot=function(){return t.PolyChart()},t.DotPlot.defaultConfig=function(){var f={geometryConfig:{geometryType:"dot",dotType:"circle"}};return f},t.LinePlot=function(){return t.PolyChart()},t.LinePlot.defaultConfig=function(){var f={geometryConfig:{geometryType:"line"}};return f},t.Legend=function(){var a=t.Legend.defaultConfig(),o=r.dispatch("hover");function u(){var h=a.legendConfig,i=a.data.map(function(D,F){return[].concat(D).map(function(N,G){var U=l({},h.elements[F]);return U.name=N,U.color=[].concat(h.elements[F].color)[G],U})}),s=r.merge(i);s=s.filter(function(D,F){return h.elements[F]&&(h.elements[F].visibleInLegend||typeof h.elements[F].visibleInLegend>"u")}),h.reverseOrder&&(s=s.reverse());var p=h.container;(typeof p=="string"||p.nodeName)&&(p=r.select(p));var d=s.map(function(D,F){return D.color}),y=h.fontSize,b=h.isContinuous==null?typeof s[0]=="number":h.isContinuous,m=b?h.height:y*s.length,_=p.classed("legend-group",!0),T=_.selectAll("svg").data([0]),g=T.enter().append("svg").attr({width:300,height:m+y,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});g.append("g").classed("legend-axis",!0),g.append("g").classed("legend-marks",!0);var A=r.range(s.length),k=r.scale[b?"linear":"ordinal"]().domain(A).range(d),R=r.scale[b?"linear":"ordinal"]().domain(A)[b?"range":"rangePoints"]([0,m]),L=function(D,F){var N=F*3;return D==="line"?"M"+[[-F/2,-F/12],[F/2,-F/12],[F/2,F/12],[-F/2,F/12]]+"Z":r.svg.symbolTypes.indexOf(D)!=-1?r.svg.symbol().type(D).size(N)():r.svg.symbol().type("square").size(N)()};if(b){var z=T.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(d);z.enter().append("stop"),z.attr({offset:function(D,F){return F/(d.length-1)*100+"%"}}).style({"stop-color":function(D,F){return D}}),T.append("rect").classed("legend-mark",!0).attr({height:h.height,width:h.colorBandWidth,fill:"url(#grad1)"})}else{var E=T.select(".legend-marks").selectAll("path.legend-mark").data(s);E.enter().append("path").classed("legend-mark",!0),E.attr({transform:function(D,F){return"translate("+[y/2,R(F)+y/2]+")"},d:function(D,F){var N=D.symbol;return L(N,y)},fill:function(D,F){return k(F)}}),E.exit().remove()}var S=r.svg.axis().scale(R).orient("right"),C=T.select("g.legend-axis").attr({transform:"translate("+[b?h.colorBandWidth:y,y/2]+")"}).call(S);return C.selectAll(".domain").style({fill:"none",stroke:"none"}),C.selectAll("line").style({fill:"none",stroke:b?h.textColor:"none"}),C.selectAll("text").style({fill:h.textColor,"font-size":h.fontSize}).text(function(D,F){return s[F].name}),u}return u.config=function(h){return arguments.length?(l(a,h),this):a},r.rebind(u,o,"on"),u},t.Legend.defaultConfig=function(f,a){var o={data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}};return o},t.tooltipPanel=function(){var f,a,o,u={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},h="tooltip-"+t.tooltipPanel.uid++,i=10,s=function(){f=u.container.selectAll("g."+h).data([0]);var p=f.enter().append("g").classed(h,!0).style({"pointer-events":"none",display:"none"});return o=p.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),a=p.append("text").attr({dx:u.padding+i,dy:+u.fontSize*.3}),s};return s.text=function(p){var d=r.hsl(u.color).l,y=d>=.5?"#aaa":"white",b=d>=.5?"black":"white",m=p||"";a.style({fill:b,"font-size":u.fontSize+"px"}).text(m);var _=u.padding,T=a.node().getBBox(),g={fill:u.color,stroke:y,"stroke-width":"2px"},A=T.width+_*2+i,k=T.height+_*2;return o.attr({d:"M"+[[i,-k/2],[i,-k/4],[u.hasTick?0:i,0],[i,k/4],[i,k/2],[A,k/2],[A,-k/2]].join("L")+"Z"}).style(g),f.attr({transform:"translate("+[i,-k/2+_*2]+")"}),f.style({display:"block"}),s},s.move=function(p){if(f)return f.attr({transform:"translate("+[p[0],p[1]]+")"}).style({display:"block"}),s},s.hide=function(){if(f)return f.style({display:"none"}),s},s.show=function(){if(f)return f.style({display:"block"}),s},s.config=function(p){return l(u,p),s},s},t.tooltipPanel.uid=1,t.adapter={},t.adapter.plotly=function(){var a={};return a.convert=function(o,u){var h={};if(o.data&&(h.data=o.data.map(function(m,_){var T=l({},m),g=[[T,["marker","color"],["color"]],[T,["marker","opacity"],["opacity"]],[T,["marker","line","color"],["strokeColor"]],[T,["marker","line","dash"],["strokeDash"]],[T,["marker","line","width"],["strokeSize"]],[T,["marker","symbol"],["dotType"]],[T,["marker","size"],["dotSize"]],[T,["marker","barWidth"],["barWidth"]],[T,["line","interpolation"],["lineInterpolation"]],[T,["showlegend"],["visibleInLegend"]]];return g.forEach(function(A,k){t.util.translator.apply(null,A.concat(u))}),u||delete T.marker,u&&delete T.groupId,u?(T.geometry==="LinePlot"?(T.type="scatter",T.dotVisible===!0?(delete T.dotVisible,T.mode="lines+markers"):T.mode="lines"):T.geometry==="DotPlot"?(T.type="scatter",T.mode="markers"):T.geometry==="AreaChart"?T.type="area":T.geometry==="BarChart"&&(T.type="bar"),delete T.geometry):(T.type==="scatter"?T.mode==="lines"?T.geometry="LinePlot":T.mode==="markers"?T.geometry="DotPlot":T.mode==="lines+markers"&&(T.geometry="LinePlot",T.dotVisible=!0):T.type==="area"?T.geometry="AreaChart":T.type==="bar"&&(T.geometry="BarChart"),delete T.mode,delete T.type),T}),!u&&o.layout&&o.layout.barmode==="stack")){var i=t.util.duplicates(h.data.map(function(m,_){return m.geometry}));h.data.forEach(function(m,_){var T=i.indexOf(m.geometry);T!=-1&&(h.data[_].groupId=T)})}if(o.layout){var s=l({},o.layout),p=[[s,["plot_bgcolor"],["backgroundColor"]],[s,["showlegend"],["showLegend"]],[s,["radialaxis"],["radialAxis"]],[s,["angularaxis"],["angularAxis"]],[s.angularaxis,["showline"],["gridLinesVisible"]],[s.angularaxis,["showticklabels"],["labelsVisible"]],[s.angularaxis,["nticks"],["ticksCount"]],[s.angularaxis,["tickorientation"],["tickOrientation"]],[s.angularaxis,["ticksuffix"],["ticksSuffix"]],[s.angularaxis,["range"],["domain"]],[s.angularaxis,["endpadding"],["endPadding"]],[s.radialaxis,["showline"],["gridLinesVisible"]],[s.radialaxis,["tickorientation"],["tickOrientation"]],[s.radialaxis,["ticksuffix"],["ticksSuffix"]],[s.radialaxis,["range"],["domain"]],[s.angularAxis,["showline"],["gridLinesVisible"]],[s.angularAxis,["showticklabels"],["labelsVisible"]],[s.angularAxis,["nticks"],["ticksCount"]],[s.angularAxis,["tickorientation"],["tickOrientation"]],[s.angularAxis,["ticksuffix"],["ticksSuffix"]],[s.angularAxis,["range"],["domain"]],[s.angularAxis,["endpadding"],["endPadding"]],[s.radialAxis,["showline"],["gridLinesVisible"]],[s.radialAxis,["tickorientation"],["tickOrientation"]],[s.radialAxis,["ticksuffix"],["ticksSuffix"]],[s.radialAxis,["range"],["domain"]],[s.font,["outlinecolor"],["outlineColor"]],[s.legend,["traceorder"],["reverseOrder"]],[s,["labeloffset"],["labelOffset"]],[s,["defaultcolorrange"],["defaultColorRange"]]];if(p.forEach(function(m,_){t.util.translator.apply(null,m.concat(u))}),u?(typeof s.tickLength<"u"&&(s.angularaxis.ticklen=s.tickLength,delete s.tickLength),s.tickColor&&(s.angularaxis.tickcolor=s.tickColor,delete s.tickColor)):(s.angularAxis&&typeof s.angularAxis.ticklen<"u"&&(s.tickLength=s.angularAxis.ticklen),s.angularAxis&&typeof s.angularAxis.tickcolor<"u"&&(s.tickColor=s.angularAxis.tickcolor)),s.legend&&typeof s.legend.reverseOrder!="boolean"&&(s.legend.reverseOrder=s.legend.reverseOrder!="normal"),s.legend&&typeof s.legend.traceorder=="boolean"&&(s.legend.traceorder=s.legend.traceorder?"reversed":"normal",delete s.legend.reverseOrder),s.margin&&typeof s.margin.t<"u"){var d=["t","r","b","l","pad"],y=["top","right","bottom","left","pad"],b={};r.entries(s.margin).forEach(function(m,_){b[y[d.indexOf(m.key)]]=m.value}),s.margin=b}u&&(delete s.needsEndSpacing,delete s.minorTickColor,delete s.minorTicks,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksStep,delete s.angularaxis.rewriteTicks,delete s.angularaxis.nticks,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksStep,delete s.radialaxis.rewriteTicks,delete s.radialaxis.nticks),h.layout=s}return h},a}},{"../../../constants/alignment":745,"../../../lib":778,d3:169}],901:[function(e,v,M){var r=e("d3"),n=e("../../../lib"),l=e("../../../components/color"),c=e("./micropolar"),t=e("./undo_manager"),f=n.extendDeepAll,a=v.exports={};a.framework=function(o){var u,h,i,s,p,d=new t;function y(b,m){return m&&(p=m),r.select(r.select(p).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),u=u?f(u,b):b,i||(i=c.Axis()),s=c.adapter.plotly().convert(u),i.config(s).render(p),o.data=u.data,o.layout=u.layout,a.fillLayout(o),u}return y.isPolar=!0,y.svg=function(){return i.svg()},y.getConfig=function(){return u},y.getLiveConfig=function(){return c.adapter.plotly().convert(i.getLiveConfig(),!0)},y.getLiveScales=function(){return{t:i.angularScale(),r:i.radialScale()}},y.setUndoPoint=function(){var b=this,m=c.util.cloneJson(u);(function(_,T){d.add({undo:function(){T&&b(T)},redo:function(){b(_)}})})(m,h),h=c.util.cloneJson(m)},y.undo=function(){d.undo()},y.redo=function(){d.redo()},y},a.fillLayout=function(o){var u=r.select(o).selectAll(".plot-container"),h=u.selectAll(".svg-container"),i=o.framework&&o.framework.svg&&o.framework.svg(),s={width:800,height:600,paper_bgcolor:l.background,_container:u,_paperdiv:h,_paper:i};o._fullLayout=f(s,o.layout)}},{"../../../components/color":643,"../../../lib":778,"./micropolar":900,"./undo_manager":902,d3:169}],902:[function(e,v,M){v.exports=function(){var n=[],l=-1,c=!1,t;function f(a,o){return a?(c=!0,a[o](),c=!1,this):this}return{add:function(a){return c?this:(n.splice(l+1,n.length-l),n.push(a),l=n.length-1,this)},setCallback:function(a){t=a},undo:function(){var a=n[l];return a?(f(a,"undo"),l-=1,t&&t(a.undo),this):this},redo:function(){var a=n[l+1];return a?(f(a,"redo"),l+=1,t&&t(a.redo),this):this},clear:function(){n=[],l=-1},hasUndo:function(){return l!==-1},hasRedo:function(){return l<n.length-1},getCommands:function(){return n},getPreviousCommand:function(){return n[l-1]},getIndex:function(){return l}}}},{}],903:[function(e,v,M){var r=e("d3"),n=e("tinycolor2"),l=e("../../registry"),c=e("../../lib"),t=c.strRotate,f=c.strTranslate,a=e("../../components/color"),o=e("../../components/drawing"),u=e("../plots"),h=e("../../plots/cartesian/axes"),i=e("../cartesian/set_convert"),s=e("./set_convert"),p=e("../cartesian/autorange").doAutoRange,d=e("../cartesian/dragbox"),y=e("../../components/dragelement"),b=e("../../components/fx"),m=e("../../components/titles"),_=e("../cartesian/select").prepSelect,T=e("../cartesian/select").selectOnClick,g=e("../cartesian/select").clearSelect,A=e("../../lib/setcursor"),k=e("../../lib/clear_gl_canvases"),R=e("../../plot_api/subroutines").redrawReglTraces,L=e("../../constants/alignment").MID_SHIFT,z=e("./constants"),E=e("./helpers"),S=c._,C=c.mod,D=c.deg2rad,F=c.rad2deg;function N(j,H){this.id=H,this.gd=j,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var K=j._fullLayout,te="clip"+K._uid+H;this.clipIds.forTraces=te+"-for-traces",this.clipPaths.forTraces=K._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=K._polarlayer.append("g").attr("class",H),this.radialTickLayout=null,this.angularTickLayout=null}var G=N.prototype;v.exports=function(H,K){return new N(H,K)},G.plot=function(j,H){var K=this,te=H[K.id];K._hasClipOnAxisFalse=!1;for(var J=0;J<j.length;J++){var oe=j[J][0].trace;if(oe.cliponaxis===!1){K._hasClipOnAxisFalse=!0;break}}K.updateLayers(H,te),K.updateLayout(H,te),u.generalUpdatePerTraceModule(K.gd,K,j,te),K.updateFx(H,te)},G.updateLayers=function(j,H){var K=this,te=K.layers,J=H.radialaxis,oe=H.angularaxis,ie=z.layerNames,Q=ie.indexOf("frontplot"),V=ie.slice(0,Q),se=oe.layer==="below traces",re=J.layer==="below traces";se&&V.push("angular-line"),re&&V.push("radial-line"),se&&V.push("angular-axis"),re&&V.push("radial-axis"),V.push("frontplot"),se||V.push("angular-line"),re||V.push("radial-line"),se||V.push("angular-axis"),re||V.push("radial-axis");var ee=K.framework.selectAll(".polarsublayer").data(V,String);ee.enter().append("g").attr("class",function(ae){return"polarsublayer "+ae}).each(function(ae){var fe=te[ae]=r.select(this);switch(ae){case"frontplot":fe.append("g").classed("barlayer",!0),fe.append("g").classed("scatterlayer",!0);break;case"backplot":fe.append("g").classed("maplayer",!0);break;case"plotbg":te.bg=fe.append("path");break;case"radial-grid":fe.style("fill","none");break;case"angular-grid":fe.style("fill","none");break;case"radial-line":fe.append("line").style("fill","none");break;case"angular-line":fe.append("path").style("fill","none");break}}),ee.order()},G.updateLayout=function(j,H){var K=this,te=K.layers,J=j._size,oe=H.radialaxis,ie=H.angularaxis,Q=H.domain.x,V=H.domain.y;K.xOffset=J.l+J.w*Q[0],K.yOffset=J.t+J.h*(1-V[1]);var se=K.xLength=J.w*(Q[1]-Q[0]),re=K.yLength=J.h*(V[1]-V[0]),ee=H.sector;K.sectorInRad=ee.map(D);var ae=K.sectorBBox=X(ee),fe=ae[2]-ae[0],de=ae[3]-ae[1],pe=re/se,W=Math.abs(de/fe),ue,me,be,ke,Pe;pe>W?(ue=se,me=se*W,Pe=(re-me)/J.h/2,be=[Q[0],Q[1]],ke=[V[0]+Pe,V[1]-Pe]):(ue=re/W,me=re,Pe=(se-ue)/J.w/2,be=[Q[0]+Pe,Q[1]-Pe],ke=[V[0],V[1]]),K.xLength2=ue,K.yLength2=me,K.xDomain2=be,K.yDomain2=ke;var je=K.xOffset2=J.l+J.w*be[0],ze=K.yOffset2=J.t+J.h*(1-ke[1]),Ze=K.radius=ue/fe,tt=K.innerRadius=H.hole*Ze,Ce=K.cx=je-Ze*ae[0],Ae=K.cy=ze+Ze*ae[3],Ne=K.cxx=Ce-je,qe=K.cyy=Ae-ze;K.radialAxis=K.mockAxis(j,H,oe,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[oe.side],_realSide:oe.side,domain:[tt/J.w,Ze/J.w]}),K.angularAxis=K.mockAxis(j,H,ie,{side:"right",domain:[0,Math.PI],autorange:!1}),K.doAutoRange(j,H),K.updateAngularAxis(j,H),K.updateRadialAxis(j,H),K.updateRadialAxisTitle(j,H),K.xaxis=K.mockCartesianAxis(j,H,{_id:"x",domain:be}),K.yaxis=K.mockCartesianAxis(j,H,{_id:"y",domain:ke});var At=K.pathSubplot();K.clipPaths.forTraces.select("path").attr("d",At).attr("transform",f(Ne,qe)),te.frontplot.attr("transform",f(je,ze)).call(o.setClipUrl,K._hasClipOnAxisFalse?null:K.clipIds.forTraces,K.gd),te.bg.attr("d",At).attr("transform",f(Ce,Ae)).call(a.fill,H.bgcolor)},G.mockAxis=function(j,H,K,te){var J=c.extendFlat({},K,te);return s(J,H,j),J},G.mockCartesianAxis=function(j,H,K){var te=this,J=K._id,oe=c.extendFlat({type:"linear"},K);i(oe,j);var ie={x:[0,2],y:[1,3]};return oe.setRange=function(){var Q=te.sectorBBox,V=ie[J],se=te.radialAxis._rl,re=(se[1]-se[0])/(1-H.hole);oe.range=[Q[V[0]]*re,Q[V[1]]*re]},oe.isPtWithinRange=J==="x"?function(Q){return te.isPtInside(Q)}:function(){return!0},oe.setRange(),oe.setScale(),oe},G.doAutoRange=function(j,H){var K=this.gd,te=this.radialAxis,J=H.radialaxis;te.setScale(),p(K,te);var oe=te.range;J.range=oe.slice(),J._input.range=oe.slice(),te._rl=[te.r2l(oe[0],null,"gregorian"),te.r2l(oe[1],null,"gregorian")]},G.updateRadialAxis=function(j,H){var K=this,te=K.gd,J=K.layers,oe=K.radius,ie=K.innerRadius,Q=K.cx,V=K.cy,se=H.radialaxis,re=C(H.sector[0],360),ee=K.radialAxis,ae=ie<oe;K.fillViewInitialKey("radialaxis.angle",se.angle),K.fillViewInitialKey("radialaxis.range",ee.range.slice()),ee.setGeometry(),ee.tickangle==="auto"&&re>90&&re<=270&&(ee.tickangle=180);var fe=function(je){return f(ee.l2p(je.x)+ie,0)},de=function(je){return K.pathArc(ee.r2p(je.x)+ie)},pe=U(se);if(K.radialTickLayout!==pe&&(J["radial-axis"].selectAll(".xtick").remove(),K.radialTickLayout=pe),ae){ee.setScale();var W=h.calcTicks(ee),ue=h.clipEnds(ee,W),me=h.getTickSigns(ee)[2];h.drawTicks(te,ee,{vals:W,layer:J["radial-axis"],path:h.makeTickPath(ee,0,me),transFn:fe,crisp:!1}),h.drawGrid(te,ee,{vals:ue,layer:J["radial-grid"],path:de,transFn:c.noop,crisp:!1}),h.drawLabels(te,ee,{vals:W,layer:J["radial-axis"],transFn:fe,labelFns:h.makeLabelFns(ee,0)})}var be=K.radialAxisAngle=K.vangles?F(I(D(se.angle),K.vangles)):se.angle,ke=f(Q,V),Pe=ke+t(-be);B(J["radial-axis"],ae&&(se.showticklabels||se.ticks),{transform:Pe}),B(J["radial-grid"],ae&&se.showgrid,{transform:ke}),B(J["radial-line"].select("line"),ae&&se.showline,{x1:ie,y1:0,x2:oe,y2:0,transform:Pe}).attr("stroke-width",se.linewidth).call(a.stroke,se.linecolor)},G.updateRadialAxisTitle=function(j,H,K){var te=this,J=te.gd,oe=te.radius,ie=te.cx,Q=te.cy,V=H.radialaxis,se=te.id+"title",re=K!==void 0?K:te.radialAxisAngle,ee=D(re),ae=Math.cos(ee),fe=Math.sin(ee),de=0;if(V.title){var pe=o.bBox(te.layers["radial-axis"].node()).height,W=V.title.font.size;de=V.side==="counterclockwise"?-pe-W*.4:pe+W*.8}te.layers["radial-axis-title"]=m.draw(J,se,{propContainer:V,propName:te.id+".radialaxis.title",placeholder:S(J,"Click to enter radial axis title"),attributes:{x:ie+oe/2*ae+de*fe,y:Q-oe/2*fe+de*ae,"text-anchor":"middle"},transform:{rotate:-re}})},G.updateAngularAxis=function(j,H){var K=this,te=K.gd,J=K.layers,oe=K.radius,ie=K.innerRadius,Q=K.cx,V=K.cy,se=H.angularaxis,re=K.angularAxis;K.fillViewInitialKey("angularaxis.rotation",se.rotation),re.setGeometry(),re.setScale();var ee=function(Ze){return re.t2g(Ze.x)};re.type==="linear"&&re.thetaunit==="radians"&&(re.tick0=F(re.tick0),re.dtick=F(re.dtick));var ae=function(Ze){return f(Q+oe*Math.cos(Ze),V-oe*Math.sin(Ze))},fe=function(Ze){return ae(ee(Ze))},de=function(Ze){var tt=ee(Ze);return ae(tt)+t(-F(tt))},pe=function(Ze){var tt=ee(Ze),Ce=Math.cos(tt),Ae=Math.sin(tt);return"M"+[Q+ie*Ce,V-ie*Ae]+"L"+[Q+oe*Ce,V-oe*Ae]},W=h.makeLabelFns(re,0),ue=W.labelStandoff,me={};me.xFn=function(Ze){var tt=ee(Ze);return Math.cos(tt)*ue},me.yFn=function(Ze){var tt=ee(Ze),Ce=Math.sin(tt)>0?.2:1;return-Math.sin(tt)*(ue+Ze.fontSize*Ce)+Math.abs(Math.cos(tt))*(Ze.fontSize*L)},me.anchorFn=function(Ze){var tt=ee(Ze),Ce=Math.cos(tt);return Math.abs(Ce)<.1?"middle":Ce>0?"start":"end"},me.heightFn=function(Ze,tt,Ce){var Ae=ee(Ze);return-.5*(1+Math.sin(Ae))*Ce};var be=U(se);K.angularTickLayout!==be&&(J["angular-axis"].selectAll("."+re._id+"tick").remove(),K.angularTickLayout=be);var ke=h.calcTicks(re),Pe;if(H.gridshape==="linear"?(Pe=ke.map(ee),c.angleDelta(Pe[0],Pe[1])<0&&(Pe=Pe.slice().reverse())):Pe=null,K.vangles=Pe,re.type==="category"&&(ke=ke.filter(function(Ze){return c.isAngleInsideSector(ee(Ze),K.sectorInRad)})),re.visible){var je=re.ticks==="inside"?-1:1,ze=(re.linewidth||1)/2;h.drawTicks(te,re,{vals:ke,layer:J["angular-axis"],path:"M"+je*ze+",0h"+je*re.ticklen,transFn:de,crisp:!1}),h.drawGrid(te,re,{vals:ke,layer:J["angular-grid"],path:pe,transFn:c.noop,crisp:!1}),h.drawLabels(te,re,{vals:ke,layer:J["angular-axis"],repositionOnUpdate:!0,transFn:fe,labelFns:me})}B(J["angular-line"].select("path"),se.showline,{d:K.pathSubplot(),transform:f(Q,V)}).attr("stroke-width",se.linewidth).call(a.stroke,se.linecolor)},G.updateFx=function(j,H){this.gd._context.staticPlot||(this.updateAngularDrag(j),this.updateRadialDrag(j,H,0),this.updateRadialDrag(j,H,1),this.updateMainDrag(j))},G.updateMainDrag=function(j){var H=this,K=H.gd,te=H.layers,J=j._zoomlayer,oe=z.MINZOOM,ie=z.OFFEDGE,Q=H.radius,V=H.innerRadius,se=H.cx,re=H.cy,ee=H.cxx,ae=H.cyy,fe=H.sectorInRad,de=H.vangles,pe=H.radialAxis,W=E.clampTiny,ue=E.findXYatLength,me=E.findEnclosingVertexAngles,be=z.cornerHalfWidth,ke=z.cornerLen/2,Pe,je,ze=d.makeDragger(te,"path","maindrag","crosshair");r.select(ze).attr("d",H.pathSubplot()).attr("transform",f(se,re));var Ze={element:ze,gd:K,subplot:H.id,plotinfo:{id:H.id,xaxis:H.xaxis,yaxis:H.yaxis},xaxes:[H.xaxis],yaxes:[H.yaxis]},tt,Ce,Ae,Ne,qe,At,kt,Ve,ft;function St(Ie,He){return Math.sqrt(Ie*Ie+He*He)}function Wt(Ie,He){return St(Ie-ee,He-ae)}function Qt(Ie,He){return Math.atan2(ae-He,Ie-ee)}function zt(Ie,He){return[Ie*Math.cos(He),Ie*Math.sin(-He)]}function $t(Ie,He){if(Ie===0)return H.pathSector(2*be);var Xe=ke/Ie,ht=He-Xe,it=He+Xe,Ge=Math.max(0,Math.min(Ie,Q)),ot=Ge-be,Je=Ge+be;return"M"+zt(ot,ht)+"A"+[ot,ot]+" 0,0,0 "+zt(ot,it)+"L"+zt(Je,it)+"A"+[Je,Je]+" 0,0,1 "+zt(Je,ht)+"Z"}function rr(Ie,He,Xe){if(Ie===0)return H.pathSector(2*be);var ht=zt(Ie,He),it=zt(Ie,Xe),Ge=W((ht[0]+it[0])/2),ot=W((ht[1]+it[1])/2),Je,st;if(Ge&&ot){var It=ot/Ge,Ft=-1/It,nr=ue(be,It,Ge,ot);Je=ue(ke,Ft,nr[0][0],nr[0][1]),st=ue(ke,Ft,nr[1][0],nr[1][1])}else{var We,Fe;ot?(We=ke,Fe=be):(We=be,Fe=ke),Je=[[Ge-We,ot-Fe],[Ge+We,ot-Fe]],st=[[Ge-We,ot+Fe],[Ge+We,ot+Fe]]}return"M"+Je.join("L")+"L"+st.reverse().join("L")+"Z"}function Pt(){Ae=null,Ne=null,qe=H.pathSubplot(),At=!1;var Ie=K._fullLayout[H.id];kt=n(Ie.bgcolor).getLuminance(),Ve=d.makeZoombox(J,kt,se,re,qe),Ve.attr("fill-rule","evenodd"),ft=d.makeCorners(J,se,re),g(K)}function Lt(Ie,He){return He=Math.max(Math.min(He,Q),V),Ie<ie?Ie=0:Q-Ie<ie?Ie=Q:He<ie?He=0:Q-He<ie&&(He=Q),Math.abs(He-Ie)>oe?(Ie<He?(Ae=Ie,Ne=He):(Ae=He,Ne=Ie),!0):(Ae=null,Ne=null,!1)}function dt(Ie,He){Ie=Ie||qe,He=He||"M0,0Z",Ve.attr("d",Ie),ft.attr("d",He),d.transitionZoombox(Ve,ft,At,kt),At=!0;var Xe={};et(Xe),K.emit("plotly_relayouting",Xe)}function lt(Ie,He){Ie=Ie*Pe,He=He*je;var Xe=tt+Ie,ht=Ce+He,it=Wt(tt,Ce),Ge=Math.min(Wt(Xe,ht),Q),ot=Qt(tt,Ce),Je,st;Lt(it,Ge)&&(Je=qe+H.pathSector(Ne),Ae&&(Je+=H.pathSector(Ae)),st=$t(Ae,ot)+$t(Ne,ot)),dt(Je,st)}function Te(Ie,He,Xe,ht){var it=E.findIntersectionXY(Xe,ht,Xe,[Ie-ee,ae-He]);return St(it[0],it[1])}function Le(Ie,He){var Xe=tt+Ie,ht=Ce+He,it=Qt(tt,Ce),Ge=Qt(Xe,ht),ot=me(it,de),Je=me(Ge,de),st=Te(tt,Ce,ot[0],ot[1]),It=Math.min(Te(Xe,ht,Je[0],Je[1]),Q),Ft,nr;Lt(st,It)&&(Ft=qe+H.pathSector(Ne),Ae&&(Ft+=H.pathSector(Ae)),nr=[rr(Ae,ot[0],ot[1]),rr(Ne,ot[0],ot[1])].join(" ")),dt(Ft,nr)}function Be(){if(d.removeZoombox(K),!(Ae===null||Ne===null)){var Ie={};et(Ie),d.showDoubleClickNotifier(K),l.call("_guiRelayout",K,Ie)}}function et(Ie){var He=pe._rl,Xe=(He[1]-He[0])/(1-V/Q)/Q,ht=[He[0]+(Ae-V)*Xe,He[0]+(Ne-V)*Xe];Ie[H.id+".radialaxis.range"]=ht}function Me(Ie,He){var Xe=K._fullLayout.clickmode;if(d.removeZoombox(K),Ie===2){var ht={};for(var it in H.viewInitial)ht[H.id+"."+it]=H.viewInitial[it];K.emit("plotly_doubleclick",null),l.call("_guiRelayout",K,ht)}Xe.indexOf("select")>-1&&Ie===1&&T(He,K,[H.xaxis],[H.yaxis],H.id,Ze),Xe.indexOf("event")>-1&&b.click(K,He,H.id)}Ze.prepFn=function(Ie,He,Xe){var ht=K._fullLayout.dragmode,it=ze.getBoundingClientRect();K._fullLayout._calcInverseTransform(K);var Ge=K._fullLayout._invTransform;Pe=K._fullLayout._invScaleX,je=K._fullLayout._invScaleY;var ot=c.apply3DTransform(Ge)(He-it.left,Xe-it.top);if(tt=ot[0],Ce=ot[1],de){var Je=E.findPolygonOffset(Q,fe[0],fe[1],de);tt+=ee+Je[0],Ce+=ae+Je[1]}switch(ht){case"zoom":de?Ze.moveFn=Le:Ze.moveFn=lt,Ze.clickFn=Me,Ze.doneFn=Be,Pt();break;case"select":case"lasso":_(Ie,He,Xe,Ze,ht);break}},ze.onmousemove=function(Ie){b.hover(K,Ie,H.id),K._fullLayout._lasthover=ze,K._fullLayout._hoversubplot=H.id},ze.onmouseout=function(Ie){K._dragging||y.unhover(K,Ie)},y.init(Ze)},G.updateRadialDrag=function(j,H,K){var te=this,J=te.gd,oe=te.layers,ie=te.radius,Q=te.innerRadius,V=te.cx,se=te.cy,re=te.radialAxis,ee=z.radialDragBoxSize,ae=ee/2;if(!re.visible)return;var fe=D(te.radialAxisAngle),de=re._rl,pe=de[0],W=de[1],ue=de[K],me=.75*(de[1]-de[0])/(1-H.hole)/ie,be,ke,Pe;K?(be=V+(ie+ae)*Math.cos(fe),ke=se-(ie+ae)*Math.sin(fe),Pe="radialdrag"):(be=V+(Q-ae)*Math.cos(fe),ke=se-(Q-ae)*Math.sin(fe),Pe="radialdrag-inner");var je=d.makeRectDragger(oe,Pe,"crosshair",-ae,-ae,ee,ee),ze={element:je,gd:J};B(r.select(je),re.visible&&Q<ie,{transform:f(be,ke)});var Ze,tt,Ce;function Ae(Ve,ft){if(Ze)Ze(Ve,ft);else{var St=[Ve,-ft],Wt=[Math.cos(fe),Math.sin(fe)],Qt=Math.abs(c.dot(St,Wt)/Math.sqrt(c.dot(St,St)));isNaN(Qt)||(Ze=Qt<.5?At:kt)}var zt={};Ne(zt),J.emit("plotly_relayouting",zt)}function Ne(Ve){tt!==null?Ve[te.id+".radialaxis.angle"]=tt:Ce!==null&&(Ve[te.id+".radialaxis.range["+K+"]"]=Ce)}function qe(){tt!==null?l.call("_guiRelayout",J,te.id+".radialaxis.angle",tt):Ce!==null&&l.call("_guiRelayout",J,te.id+".radialaxis.range["+K+"]",Ce)}function At(Ve,ft){if(K!==0){var St=be+Ve,Wt=ke+ft;tt=Math.atan2(se-Wt,St-V),te.vangles&&(tt=I(tt,te.vangles)),tt=F(tt);var Qt=f(V,se)+t(-tt);oe["radial-axis"].attr("transform",Qt),oe["radial-line"].select("line").attr("transform",Qt);var zt=te.gd._fullLayout,$t=zt[te.id];te.updateRadialAxisTitle(zt,$t,tt)}}function kt(Ve,ft){var St=c.dot([Ve,-ft],[Math.cos(fe),Math.sin(fe)]);if(Ce=ue-me*St,me>0!=(K?Ce>pe:Ce<W)){Ce=null;return}var Wt=J._fullLayout,Qt=Wt[te.id];re.range[K]=Ce,re._rl[K]=Ce,te.updateRadialAxis(Wt,Qt),te.xaxis.setRange(),te.xaxis.setScale(),te.yaxis.setRange(),te.yaxis.setScale();var zt=!1;for(var $t in te.traceHash){var rr=te.traceHash[$t],Pt=c.filterVisible(rr),Lt=rr[0][0].trace._module;Lt.plot(J,te,Pt,Qt),l.traceIs($t,"gl")&&Pt.length&&(zt=!0)}zt&&(k(J),R(J))}ze.prepFn=function(){Ze=null,tt=null,Ce=null,ze.moveFn=Ae,ze.doneFn=qe,g(J)},ze.clampFn=function(Ve,ft){return Math.sqrt(Ve*Ve+ft*ft)<z.MINDRAG&&(Ve=0,ft=0),[Ve,ft]},y.init(ze)},G.updateAngularDrag=function(j){var H=this,K=H.gd,te=H.layers,J=H.radius,oe=H.angularAxis,ie=H.cx,Q=H.cy,V=H.cxx,se=H.cyy,re=z.angularDragBoxSize,ee=d.makeDragger(te,"path","angulardrag","move"),ae={element:ee,gd:K};r.select(ee).attr("d",H.pathAnnulus(J,J+re)).attr("transform",f(ie,Q)).call(A,"move");function fe(Ce,Ae){return Math.atan2(se+re-Ae,Ce-V-re)}var de=te.frontplot.select(".scatterlayer").selectAll(".trace"),pe=de.selectAll(".point"),W=de.selectAll(".textpoint"),ue,me,be,ke,Pe,je;function ze(Ce,Ae){var Ne=H.gd._fullLayout,qe=Ne[H.id],At=ue+Ce*j._invScaleX,kt=me+Ae*j._invScaleY,Ve=fe(At,kt),ft=F(Ve-je);if(ke=be+ft,te.frontplot.attr("transform",f(H.xOffset2,H.yOffset2)+t([-ft,V,se])),H.vangles){Pe=H.radialAxisAngle+ft;var St=f(ie,Q)+t(-ft),Wt=f(ie,Q)+t(-Pe);te.bg.attr("transform",St),te["radial-grid"].attr("transform",St),te["radial-axis"].attr("transform",Wt),te["radial-line"].select("line").attr("transform",Wt),H.updateRadialAxisTitle(Ne,qe,Pe)}else H.clipPaths.forTraces.select("path").attr("transform",f(V,se)+t(ft));pe.each(function(){var dt=r.select(this),lt=o.getTranslate(dt);dt.attr("transform",f(lt.x,lt.y)+t([ft]))}),W.each(function(){var dt=r.select(this),lt=dt.select("text"),Te=o.getTranslate(dt);dt.attr("transform",t([ft,lt.attr("x"),lt.attr("y")])+f(Te.x,Te.y))}),oe.rotation=c.modHalf(ke,360),H.updateAngularAxis(Ne,qe),H._hasClipOnAxisFalse&&!c.isFullCircle(H.sectorInRad)&&de.call(o.hideOutsideRangePoints,H);var Qt=!1;for(var zt in H.traceHash)if(l.traceIs(zt,"gl")){var $t=H.traceHash[zt],rr=c.filterVisible($t),Pt=$t[0][0].trace._module;Pt.plot(K,H,rr,qe),rr.length&&(Qt=!0)}Qt&&(k(K),R(K));var Lt={};Ze(Lt),K.emit("plotly_relayouting",Lt)}function Ze(Ce){Ce[H.id+".angularaxis.rotation"]=ke,H.vangles&&(Ce[H.id+".radialaxis.angle"]=Pe)}function tt(){W.select("text").attr("transform",null);var Ce={};Ze(Ce),l.call("_guiRelayout",K,Ce)}ae.prepFn=function(Ce,Ae,Ne){var qe=j[H.id];be=qe.angularaxis.rotation;var At=ee.getBoundingClientRect();ue=Ae-At.left,me=Ne-At.top,K._fullLayout._calcInverseTransform(K);var kt=c.apply3DTransform(j._invTransform)(ue,me);ue=kt[0],me=kt[1],je=fe(ue,me),ae.moveFn=ze,ae.doneFn=tt,g(K)},H.vangles&&!c.isFullCircle(H.sectorInRad)&&(ae.prepFn=c.noop,A(r.select(ee),null)),y.init(ae)},G.isPtInside=function(j){var H=this.sectorInRad,K=this.vangles,te=this.angularAxis.c2g(j.theta),J=this.radialAxis,oe=J.c2l(j.r),ie=J._rl,Q=K?E.isPtInsidePolygon:c.isPtInsideSector;return Q(oe,te,ie,H,K)},G.pathArc=function(j){var H=this.sectorInRad,K=this.vangles,te=K?E.pathPolygon:c.pathArc;return te(j,H[0],H[1],K)},G.pathSector=function(j){var H=this.sectorInRad,K=this.vangles,te=K?E.pathPolygon:c.pathSector;return te(j,H[0],H[1],K)},G.pathAnnulus=function(j,H){var K=this.sectorInRad,te=this.vangles,J=te?E.pathPolygonAnnulus:c.pathAnnulus;return J(j,H,K[0],K[1],te)},G.pathSubplot=function(){var j=this.innerRadius,H=this.radius;return j?this.pathAnnulus(j,H):this.pathSector(H)},G.fillViewInitialKey=function(j,H){j in this.viewInitial||(this.viewInitial[j]=H)};function U(j){var H=j.ticks+String(j.ticklen)+String(j.showticklabels);return"side"in j&&(H+=j.side),H}function X(j){var H=j[0],K=j[1],te=K-H,J=C(H,360),oe=J+te,ie=Math.cos(D(J)),Q=Math.sin(D(J)),V=Math.cos(D(oe)),se=Math.sin(D(oe)),re,ee,ae,fe;return J<=90&&oe>=90||J>90&&oe>=450?fe=1:Q<=0&&se<=0?fe=0:fe=Math.max(Q,se),J<=180&&oe>=180||J>180&&oe>=540?re=-1:ie>=0&&V>=0?re=0:re=Math.min(ie,V),J<=270&&oe>=270||J>270&&oe>=630?ee=-1:Q>=0&&se>=0?ee=0:ee=Math.min(Q,se),oe>=360?ae=1:ie<=0&&V<=0?ae=0:ae=Math.max(ie,V),[re,ee,ae,fe]}function I(j,H){var K=function(J){return c.angleDist(j,J)},te=c.findIndexOfMin(H,K);return H[te]}function B(j,H,K){return H?(j.attr("display",null),j.attr(K)):j&&j.attr("display","none"),j}},{"../../components/color":643,"../../components/dragelement":662,"../../components/drawing":665,"../../components/fx":683,"../../components/titles":738,"../../constants/alignment":745,"../../lib":778,"../../lib/clear_gl_canvases":762,"../../lib/setcursor":799,"../../plot_api/subroutines":818,"../../plots/cartesian/axes":828,"../../registry":911,"../cartesian/autorange":827,"../cartesian/dragbox":836,"../cartesian/select":847,"../cartesian/set_convert":848,"../plots":891,"./constants":892,"./helpers":893,"./set_convert":904,d3:169,tinycolor2:576}],904:[function(e,v,M){var r=e("../../lib"),n=e("../cartesian/set_convert"),l=r.deg2rad,c=r.rad2deg;v.exports=function(h,i,s){switch(n(h,s),h._id){case"x":case"radialaxis":t(h,i);break;case"angularaxis":o(h,i);break}};function t(u,h){var i=h._subplot;u.setGeometry=function(){var s=u._rl[0],p=u._rl[1],d=i.innerRadius,y=(i.radius-d)/(p-s),b=d/y,m=s>p?function(_){return _<=0}:function(_){return _>=0};u.c2g=function(_){var T=u.c2l(_)-s;return(m(T)?T:0)+b},u.g2c=function(_){return u.l2c(_+s-b)},u.g2p=function(_){return _*y},u.c2p=function(_){return u.g2p(u.c2g(_))}}}function f(u,h){return h==="degrees"?l(u):u}function a(u,h){return h==="degrees"?c(u):u}function o(u,h){var i=u.type;if(i==="linear"){var s=u.d2c,p=u.c2d;u.d2c=function(d,y){return f(s(d),y)},u.c2d=function(d,y){return p(a(d,y))}}u.makeCalcdata=function(d,y){var b=d[y],m=d._length,_,T,g=function(z){return u.d2c(z,d.thetaunit)};if(b){if(r.isTypedArray(b)&&i==="linear"){if(m===b.length)return b;if(b.subarray)return b.subarray(0,m)}for(_=new Array(m),T=0;T<m;T++)_[T]=g(b[T])}else{var A=y+"0",k="d"+y,R=A in d?g(d[A]):0,L=d[k]?g(d[k]):(u.period||2*Math.PI)/m;for(_=new Array(m),T=0;T<m;T++)_[T]=R+T*L}return _},u.setGeometry=function(){var d=h.sector,y=d.map(l),b={clockwise:-1,counterclockwise:1}[u.direction],m=l(u.rotation),_=function(E){return b*E+m},T=function(E){return(E-m)/b},g,A,k,R;switch(i){case"linear":A=g=r.identity,R=l,k=c,u.range=r.isFullCircle(y)?[d[0],d[0]+360]:y.map(T).map(c);break;case"category":var L=u._categories.length,z=u.period?Math.max(u.period,L):L;z===0&&(z=1),A=R=function(E){return E*2*Math.PI/z},g=k=function(E){return E*z/Math.PI/2},u.range=[0,z];break}u.c2g=function(E){return _(A(E))},u.g2c=function(E){return g(T(E))},u.t2g=function(E){return _(R(E))},u.g2t=function(E){return k(T(E))}}}},{"../../lib":778,"../cartesian/set_convert":848}],905:[function(e,v,M){var r=e("../lib"),n=e("../plot_api/plot_template"),l=e("./domain").defaults;v.exports=function(t,f,a,o){var u=o.type,h=o.attributes,i=o.handleDefaults,s=o.partition||"x",p=f._subplots[u],d=p.length,y=d&&p[0].replace(/\d+$/,""),b,m;function _(k,R){return r.coerce(b,m,h,k,R)}for(var T=0;T<d;T++){var g=p[T];t[g]?b=t[g]:b=t[g]={},m=n.newContainer(f,g,y),_("uirevision",f.uirevision);var A={};A[s]=[T/d,(T+1)/d],l(m,f,_,A),o.id=g,i(b,m,_,o)}}},{"../lib":778,"../plot_api/plot_template":817,"./domain":855}],906:[function(e,v,M){e("../constants/docs").FORMAT_LINK,e("../constants/docs").DATE_FORMAT_LINK;function r(n){var l=n.description?" "+n.description:"",c=n.keys||[];if(c.length>0){for(var t=[],f=0;f<c.length;f++)t[f]="`"+c[f]+"`";l=l+"Finally, the template string has access to ",c.length===1?l="variable "+t[0]:l="variables "+t.slice(0,-1).join(", ")+" and "+t.slice(-1)+"."}return l}M.hovertemplateAttrs=function(n,l){n=n||{},l=l||{},r(l);var c={valType:"string",dflt:"",editType:n.editType||"none"};return n.arrayOk!==!1&&(c.arrayOk=!0),c},M.texttemplateAttrs=function(n,l){n=n||{},l=l||{},r(l);var c={valType:"string",dflt:"",editType:n.editType||"calc"};return n.arrayOk!==!1&&(c.arrayOk=!0),c}},{"../constants/docs":748}],907:[function(e,v,M){var r=e("./ternary"),n=e("../../plots/get_data").getSubplotCalcData,l=e("../../lib").counterRegex,c="ternary";M.name=c;var t=M.attr="subplot";M.idRoot=c,M.idRegex=M.attrRegex=l(c);var f=M.attributes={};f[t]={valType:"subplotid",dflt:"ternary",editType:"calc"},M.layoutAttributes=e("./layout_attributes"),M.supplyLayoutDefaults=e("./layout_defaults"),M.plot=function(o){for(var u=o._fullLayout,h=o.calcdata,i=u._subplots[c],s=0;s<i.length;s++){var p=i[s],d=n(h,c,p),y=u[p]._subplot;y||(y=new r({id:p,graphDiv:o,container:u._ternarylayer.node()},u),u[p]._subplot=y),y.plot(d,u,o._promises)}},M.clean=function(a,o,u,h){for(var i=h._subplots[c]||[],s=0;s<i.length;s++){var p=i[s],d=h[p]._subplot;!o[p]&&d&&(d.plotContainer.remove(),d.clipDef.remove(),d.clipDefRelative.remove(),d.layers["a-title"].remove(),d.layers["b-title"].remove(),d.layers["c-title"].remove())}}},{"../../lib":778,"../../plots/get_data":865,"./layout_attributes":908,"./layout_defaults":909,"./ternary":910}],908:[function(e,v,M){var r=e("../../components/color/attributes"),n=e("../domain").attributes,l=e("../cartesian/layout_attributes"),c=e("../../plot_api/edit_types").overrideAll,t=e("../../lib/extend").extendFlat,f={title:{text:l.title.text,font:l.title.font},color:l.color,tickmode:l.tickmode,nticks:t({},l.nticks,{dflt:6,min:1}),tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:l.ticks,ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,showticklabels:l.showticklabels,showtickprefix:l.showtickprefix,tickprefix:l.tickprefix,showticksuffix:l.showticksuffix,ticksuffix:l.ticksuffix,showexponent:l.showexponent,exponentformat:l.exponentformat,minexponent:l.minexponent,separatethousands:l.separatethousands,tickfont:l.tickfont,tickangle:l.tickangle,tickformat:l.tickformat,tickformatstops:l.tickformatstops,hoverformat:l.hoverformat,showline:t({},l.showline,{dflt:!0}),linecolor:l.linecolor,linewidth:l.linewidth,showgrid:t({},l.showgrid,{dflt:!0}),gridcolor:l.gridcolor,gridwidth:l.gridwidth,layer:l.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:l._deprecated.title,titlefont:l._deprecated.titlefont}},a=v.exports=c({domain:n({name:"ternary"}),bgcolor:{valType:"color",dflt:r.background},sum:{valType:"number",dflt:1,min:0},aaxis:f,baxis:f,caxis:f},"plot","from-root");a.uirevision={valType:"any",editType:"none"},a.aaxis.uirevision=a.baxis.uirevision=a.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":642,"../../lib/extend":768,"../../plot_api/edit_types":810,"../cartesian/layout_attributes":842,"../domain":855}],909:[function(e,v,M){var r=e("../../components/color"),n=e("../../plot_api/plot_template"),l=e("../../lib"),c=e("../subplot_defaults"),t=e("../cartesian/tick_label_defaults"),f=e("../cartesian/tick_mark_defaults"),a=e("../cartesian/tick_value_defaults"),o=e("../cartesian/line_grid_defaults"),u=e("./layout_attributes"),h=["aaxis","baxis","caxis"];v.exports=function(d,y,b){c(d,y,b,{type:"ternary",attributes:u,handleDefaults:i,font:y.font,paper_bgcolor:y.paper_bgcolor})};function i(p,d,y,b){var m=y("bgcolor"),_=y("sum");b.bgColor=r.combine(m,b.paper_bgcolor);for(var T,g,A,k=0;k<h.length;k++)T=h[k],g=p[T]||{},A=n.newContainer(d,T),A._name=T,s(g,A,b,d);var R=d.aaxis,L=d.baxis,z=d.caxis;R.min+L.min+z.min>=_&&(R.min=0,L.min=0,z.min=0,p.aaxis&&delete p.aaxis.min,p.baxis&&delete p.baxis.min,p.caxis&&delete p.caxis.min)}function s(p,d,y,b){var m=u[d._name];function _(E,S){return l.coerce(p,d,m,E,S)}_("uirevision",b.uirevision),d.type="linear";var T=_("color"),g=T!==m.color.dflt?T:y.font.color,A=d._name,k=A.charAt(0).toUpperCase(),R="Component "+k,L=_("title.text",R);d._hovertitle=L===R?L:k,l.coerceFont(_,"title.font",{family:y.font.family,size:Math.round(y.font.size*1.2),color:g}),_("min"),a(p,d,_,"linear"),t(p,d,_,"linear",{}),f(p,d,_,{outerTicks:!0});var z=_("showticklabels");z&&(l.coerceFont(_,"tickfont",{family:y.font.family,size:y.font.size,color:g}),_("tickangle"),_("tickformat")),o(p,d,_,{dfltColor:T,bgColor:y.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:m}),_("hoverformat"),_("layer")}},{"../../components/color":643,"../../lib":778,"../../plot_api/plot_template":817,"../cartesian/line_grid_defaults":844,"../cartesian/tick_label_defaults":849,"../cartesian/tick_mark_defaults":850,"../cartesian/tick_value_defaults":851,"../subplot_defaults":905,"./layout_attributes":908}],910:[function(e,v,M){var r=e("d3"),n=e("tinycolor2"),l=e("../../registry"),c=e("../../lib"),t=c.strTranslate,f=c._,a=e("../../components/color"),o=e("../../components/drawing"),u=e("../cartesian/set_convert"),h=e("../../lib/extend").extendFlat,i=e("../plots"),s=e("../cartesian/axes"),p=e("../../components/dragelement"),d=e("../../components/fx"),y=e("../../components/dragelement/helpers"),b=y.freeMode,m=y.rectMode,_=e("../../components/titles"),T=e("../cartesian/select").prepSelect,g=e("../cartesian/select").selectOnClick,A=e("../cartesian/select").clearSelect,k=e("../cartesian/select").clearSelectionsCache,R=e("../cartesian/constants");function L(I,B){this.id=I.id,this.graphDiv=I.graphDiv,this.init(B),this.makeFramework(B),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}v.exports=L;var z=L.prototype;z.init=function(I){this.container=I._ternarylayer,this.defs=I._defs,this.layoutId=I._uid,this.traceHash={},this.layers={}},z.plot=function(I,B){var j=this,H=B[j.id],K=B._size;j._hasClipOnAxisFalse=!1;for(var te=0;te<I.length;te++){var J=I[te][0].trace;if(J.cliponaxis===!1){j._hasClipOnAxisFalse=!0;break}}j.updateLayers(H),j.adjustLayout(H,K),i.generalUpdatePerTraceModule(j.graphDiv,j,I,H),j.layers.plotbg.select("path").call(a.fill,H.bgcolor)},z.makeFramework=function(I){var B=this,j=B.graphDiv,H=I[B.id],K=B.clipId="clip"+B.layoutId+B.id,te=B.clipIdRelative="clip-relative"+B.layoutId+B.id;B.clipDef=c.ensureSingleById(I._clips,"clipPath",K,function(J){J.append("path").attr("d","M0,0Z")}),B.clipDefRelative=c.ensureSingleById(I._clips,"clipPath",te,function(J){J.append("path").attr("d","M0,0Z")}),B.plotContainer=c.ensureSingle(B.container,"g",B.id),B.updateLayers(H),o.setClipUrl(B.layers.backplot,K,j),o.setClipUrl(B.layers.grids,K,j)},z.updateLayers=function(I){var B=this,j=B.layers,H=["draglayer","plotbg","backplot","grids"];I.aaxis.layer==="below traces"&&H.push("aaxis","aline"),I.baxis.layer==="below traces"&&H.push("baxis","bline"),I.caxis.layer==="below traces"&&H.push("caxis","cline"),H.push("frontplot"),I.aaxis.layer==="above traces"&&H.push("aaxis","aline"),I.baxis.layer==="above traces"&&H.push("baxis","bline"),I.caxis.layer==="above traces"&&H.push("caxis","cline");var K=B.plotContainer.selectAll("g.toplevel").data(H,String),te=["agrid","bgrid","cgrid"];K.enter().append("g").attr("class",function(J){return"toplevel "+J}).each(function(J){var oe=r.select(this);j[J]=oe,J==="frontplot"?oe.append("g").classed("scatterlayer",!0):J==="backplot"?oe.append("g").classed("maplayer",!0):J==="plotbg"?oe.append("path").attr("d","M0,0Z"):J==="aline"||J==="bline"||J==="cline"?oe.append("path"):J==="grids"&&te.forEach(function(ie){j[ie]=oe.append("g").classed("grid "+ie,!0)})}),K.order()};var E=Math.sqrt(4/3);z.adjustLayout=function(I,B){var j=this,H=I.domain,K=(H.x[0]+H.x[1])/2,te=(H.y[0]+H.y[1])/2,J=H.x[1]-H.x[0],oe=H.y[1]-H.y[0],ie=J*B.w,Q=oe*B.h,V=I.sum,se=I.aaxis.min,re=I.baxis.min,ee=I.caxis.min,ae,fe,de,pe,W,ue;ie>E*Q?(pe=Q,de=pe*E):(de=ie,pe=de/E),W=J*de/ie,ue=oe*pe/Q,ae=B.l+B.w*K-de/2,fe=B.t+B.h*(1-te)-pe/2,j.x0=ae,j.y0=fe,j.w=de,j.h=pe,j.sum=V,j.xaxis={type:"linear",range:[se+2*ee-V,V-se-2*re],domain:[K-W/2,K+W/2],_id:"x"},u(j.xaxis,j.graphDiv._fullLayout),j.xaxis.setScale(),j.xaxis.isPtWithinRange=function(Ne){return Ne.a>=j.aaxis.range[0]&&Ne.a<=j.aaxis.range[1]&&Ne.b>=j.baxis.range[1]&&Ne.b<=j.baxis.range[0]&&Ne.c>=j.caxis.range[1]&&Ne.c<=j.caxis.range[0]},j.yaxis={type:"linear",range:[se,V-re-ee],domain:[te-ue/2,te+ue/2],_id:"y"},u(j.yaxis,j.graphDiv._fullLayout),j.yaxis.setScale(),j.yaxis.isPtWithinRange=function(){return!0};var me=j.yaxis.domain[0],be=j.aaxis=h({},I.aaxis,{range:[se,V-re-ee],side:"left",tickangle:(+I.aaxis.tickangle||0)-30,domain:[me,me+ue*E],anchor:"free",position:0,_id:"y",_length:de});u(be,j.graphDiv._fullLayout),be.setScale();var ke=j.baxis=h({},I.baxis,{range:[V-se-ee,re],side:"bottom",domain:j.xaxis.domain,anchor:"free",position:0,_id:"x",_length:de});u(ke,j.graphDiv._fullLayout),ke.setScale();var Pe=j.caxis=h({},I.caxis,{range:[V-se-re,ee],side:"right",tickangle:(+I.caxis.tickangle||0)+30,domain:[me,me+ue*E],anchor:"free",position:0,_id:"y",_length:de});u(Pe,j.graphDiv._fullLayout),Pe.setScale();var je="M"+ae+","+(fe+pe)+"h"+de+"l-"+de/2+",-"+pe+"Z";j.clipDef.select("path").attr("d",je),j.layers.plotbg.select("path").attr("d",je);var ze="M0,"+pe+"h"+de+"l-"+de/2+",-"+pe+"Z";j.clipDefRelative.select("path").attr("d",ze);var Ze=t(ae,fe);j.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ze),j.clipDefRelative.select("path").attr("transform",null);var tt=t(ae-ke._offset,fe+pe);j.layers.baxis.attr("transform",tt),j.layers.bgrid.attr("transform",tt);var Ce=t(ae+de/2,fe)+"rotate(30)"+t(0,-be._offset);j.layers.aaxis.attr("transform",Ce),j.layers.agrid.attr("transform",Ce);var Ae=t(ae+de/2,fe)+"rotate(-30)"+t(0,-Pe._offset);j.layers.caxis.attr("transform",Ae),j.layers.cgrid.attr("transform",Ae),j.drawAxes(!0),j.layers.aline.select("path").attr("d",be.showline?"M"+ae+","+(fe+pe)+"l"+de/2+",-"+pe:"M0,0").call(a.stroke,be.linecolor||"#000").style("stroke-width",(be.linewidth||0)+"px"),j.layers.bline.select("path").attr("d",ke.showline?"M"+ae+","+(fe+pe)+"h"+de:"M0,0").call(a.stroke,ke.linecolor||"#000").style("stroke-width",(ke.linewidth||0)+"px"),j.layers.cline.select("path").attr("d",Pe.showline?"M"+(ae+de/2)+","+fe+"l"+de/2+","+pe:"M0,0").call(a.stroke,Pe.linecolor||"#000").style("stroke-width",(Pe.linewidth||0)+"px"),j.graphDiv._context.staticPlot||j.initInteractions(),o.setClipUrl(j.layers.frontplot,j._hasClipOnAxisFalse?null:j.clipId,j.graphDiv)},z.drawAxes=function(I){var B=this,j=B.graphDiv,H=B.id.substr(7)+"title",K=B.layers,te=B.aaxis,J=B.baxis,oe=B.caxis;if(B.drawAx(te),B.drawAx(J),B.drawAx(oe),I){var ie=Math.max(te.showticklabels?te.tickfont.size/2:0,(oe.showticklabels?oe.tickfont.size*.75:0)+(oe.ticks==="outside"?oe.ticklen*.87:0)),Q=(J.showticklabels?J.tickfont.size:0)+(J.ticks==="outside"?J.ticklen:0)+3;K["a-title"]=_.draw(j,"a"+H,{propContainer:te,propName:B.id+".aaxis.title",placeholder:f(j,"Click to enter Component A title"),attributes:{x:B.x0+B.w/2,y:B.y0-te.title.font.size/3-ie,"text-anchor":"middle"}}),K["b-title"]=_.draw(j,"b"+H,{propContainer:J,propName:B.id+".baxis.title",placeholder:f(j,"Click to enter Component B title"),attributes:{x:B.x0-Q,y:B.y0+B.h+J.title.font.size*.83+Q,"text-anchor":"middle"}}),K["c-title"]=_.draw(j,"c"+H,{propContainer:oe,propName:B.id+".caxis.title",placeholder:f(j,"Click to enter Component C title"),attributes:{x:B.x0+B.w+Q,y:B.y0+B.h+oe.title.font.size*.83+Q,"text-anchor":"middle"}})}},z.drawAx=function(I){var B=this,j=B.graphDiv,H=I._name,K=H.charAt(0),te=I._id,J=B.layers[H],oe=30,ie=K+"tickLayout",Q=S(I);B[ie]!==Q&&(J.selectAll("."+te+"tick").remove(),B[ie]=Q),I.setScale();var V=s.calcTicks(I),se=s.clipEnds(I,V),re=s.makeTransTickFn(I),ee=s.getTickSigns(I)[2],ae=c.deg2rad(oe),fe=ee*(I.linewidth||1)/2,de=ee*I.ticklen,pe=B.w,W=B.h,ue=K==="b"?"M0,"+fe+"l"+Math.sin(ae)*de+","+Math.cos(ae)*de:"M"+fe+",0l"+Math.cos(ae)*de+","+-Math.sin(ae)*de,me={a:"M0,0l"+W+",-"+pe/2,b:"M0,0l-"+pe/2+",-"+W,c:"M0,0l-"+W+","+pe/2}[K];s.drawTicks(j,I,{vals:I.ticks==="inside"?se:V,layer:J,path:ue,transFn:re,crisp:!1}),s.drawGrid(j,I,{vals:se,layer:B.layers[K+"grid"],path:me,transFn:re,crisp:!1}),s.drawLabels(j,I,{vals:V,layer:J,transFn:re,labelFns:s.makeLabelFns(I,0,oe)})};function S(I){return I.ticks+String(I.ticklen)+String(I.showticklabels)}var C=R.MINZOOM/2+.87,D="m-0.87,.5h"+C+"v3h-"+(C+5.2)+"l"+(C/2+2.6)+",-"+(C*.87+4.5)+"l2.6,1.5l-"+C/2+","+C*.87+"Z",F="m0.87,.5h-"+C+"v3h"+(C+5.2)+"l-"+(C/2+2.6)+",-"+(C*.87+4.5)+"l-2.6,1.5l"+C/2+","+C*.87+"Z",N="m0,1l"+C/2+","+C*.87+"l2.6,-1.5l-"+(C/2+2.6)+",-"+(C*.87+4.5)+"l-"+(C/2+2.6)+","+(C*.87+4.5)+"l2.6,1.5l"+C/2+",-"+C*.87+"Z",G="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",U=!0;z.clearSelect=function(){k(this.dragOptions),A(this.dragOptions.gd)},z.initInteractions=function(){var I=this,B=I.layers.plotbg.select("path").node(),j=I.graphDiv,H=j._fullLayout._zoomlayer,K,te;this.dragOptions={element:B,gd:j,plotinfo:{id:I.id,domain:j._fullLayout[I.id].domain,xaxis:I.xaxis,yaxis:I.yaxis},subplot:I.id,prepFn:function(tt,Ce,Ae){I.dragOptions.xaxes=[I.xaxis],I.dragOptions.yaxes=[I.yaxis],K=j._fullLayout._invScaleX,te=j._fullLayout._invScaleY;var Ne=I.dragOptions.dragmode=j._fullLayout.dragmode;b(Ne)?I.dragOptions.minDrag=1:I.dragOptions.minDrag=void 0,Ne==="zoom"?(I.dragOptions.moveFn=ke,I.dragOptions.clickFn=pe,I.dragOptions.doneFn=Pe,W(tt,Ce,Ae)):Ne==="pan"?(I.dragOptions.moveFn=ze,I.dragOptions.clickFn=pe,I.dragOptions.doneFn=Ze,je(),I.clearSelect(j)):(m(Ne)||b(Ne))&&T(tt,Ce,Ae,I.dragOptions,Ne)}};var J,oe,ie,Q,V,se,re,ee,ae,fe;function de(tt){var Ce={};return Ce[I.id+".aaxis.min"]=tt.a,Ce[I.id+".baxis.min"]=tt.b,Ce[I.id+".caxis.min"]=tt.c,Ce}function pe(tt,Ce){var Ae=j._fullLayout.clickmode;X(j),tt===2&&(j.emit("plotly_doubleclick",null),l.call("_guiRelayout",j,de({a:0,b:0,c:0}))),Ae.indexOf("select")>-1&&tt===1&&g(Ce,j,[I.xaxis],[I.yaxis],I.id,I.dragOptions),Ae.indexOf("event")>-1&&d.click(j,Ce,I.id)}function W(tt,Ce,Ae){var Ne=B.getBoundingClientRect();J=Ce-Ne.left,oe=Ae-Ne.top,j._fullLayout._calcInverseTransform(j);var qe=j._fullLayout._invTransform,At=c.apply3DTransform(qe)(J,oe);J=At[0],oe=At[1],ie={a:I.aaxis.range[0],b:I.baxis.range[1],c:I.caxis.range[1]},V=ie,Q=I.aaxis.range[1]-ie.a,se=n(I.graphDiv._fullLayout[I.id].bgcolor).getLuminance(),re="M0,"+I.h+"L"+I.w/2+", 0L"+I.w+","+I.h+"Z",ee=!1,ae=H.append("path").attr("class","zoombox").attr("transform",t(I.x0,I.y0)).style({fill:se>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",re),fe=H.append("path").attr("class","zoombox-corners").attr("transform",t(I.x0,I.y0)).style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),I.clearSelect(j)}function ue(tt,Ce){return 1-Ce/I.h}function me(tt,Ce){return 1-(tt+(I.h-Ce)/Math.sqrt(3))/I.w}function be(tt,Ce){return(tt-(I.h-Ce)/Math.sqrt(3))/I.w}function ke(tt,Ce){var Ae=J+tt*K,Ne=oe+Ce*te,qe=Math.max(0,Math.min(1,ue(J,oe),ue(Ae,Ne))),At=Math.max(0,Math.min(1,me(J,oe),me(Ae,Ne))),kt=Math.max(0,Math.min(1,be(J,oe),be(Ae,Ne))),Ve=(qe/2+kt)*I.w,ft=(1-qe/2-At)*I.w,St=(Ve+ft)/2,Wt=ft-Ve,Qt=(1-qe)*I.h,zt=Qt-Wt/E;Wt<R.MINZOOM?(V=ie,ae.attr("d",re),fe.attr("d","M0,0Z")):(V={a:ie.a+qe*Q,b:ie.b+At*Q,c:ie.c+kt*Q},ae.attr("d",re+"M"+Ve+","+Qt+"H"+ft+"L"+St+","+zt+"L"+Ve+","+Qt+"Z"),fe.attr("d","M"+J+","+oe+G+"M"+Ve+","+Qt+D+"M"+ft+","+Qt+F+"M"+St+","+zt+N)),ee||(ae.transition().style("fill",se>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),fe.transition().style("opacity",1).duration(200),ee=!0),j.emit("plotly_relayouting",de(V))}function Pe(){X(j),V!==ie&&(l.call("_guiRelayout",j,de(V)),U&&j.data&&j._context.showTips&&(c.notifier(f(j,"Double-click to zoom back out"),"long"),U=!1))}function je(){ie={a:I.aaxis.range[0],b:I.baxis.range[1],c:I.caxis.range[1]},V=ie}function ze(tt,Ce){var Ae=tt/I.xaxis._m,Ne=Ce/I.yaxis._m;V={a:ie.a-Ne,b:ie.b+(Ae+Ne)/2,c:ie.c-(Ae-Ne)/2};var qe=[V.a,V.b,V.c].sort(c.sorterAsc),At={a:qe.indexOf(V.a),b:qe.indexOf(V.b),c:qe.indexOf(V.c)};qe[0]<0&&(qe[1]+qe[0]/2<0?(qe[2]+=qe[0]+qe[1],qe[0]=qe[1]=0):(qe[2]+=qe[0]/2,qe[1]+=qe[0]/2,qe[0]=0),V={a:qe[At.a],b:qe[At.b],c:qe[At.c]},Ce=(ie.a-V.a)*I.yaxis._m,tt=(ie.c-V.c-ie.b+V.b)*I.xaxis._m);var kt=t(I.x0+tt,I.y0+Ce);I.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",kt);var Ve=t(-tt,-Ce);I.clipDefRelative.select("path").attr("transform",Ve),I.aaxis.range=[V.a,I.sum-V.b-V.c],I.baxis.range=[I.sum-V.a-V.c,V.b],I.caxis.range=[I.sum-V.a-V.b,V.c],I.drawAxes(!1),I._hasClipOnAxisFalse&&I.plotContainer.select(".scatterlayer").selectAll(".trace").call(o.hideOutsideRangePoints,I),j.emit("plotly_relayouting",de(V))}function Ze(){l.call("_guiRelayout",j,de(V))}B.onmousemove=function(tt){d.hover(j,tt,I.id),j._fullLayout._lasthover=B,j._fullLayout._hoversubplot=I.id},B.onmouseout=function(tt){j._dragging||p.unhover(j,tt)},p.init(this.dragOptions)};function X(I){r.select(I).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":643,"../../components/dragelement":662,"../../components/dragelement/helpers":661,"../../components/drawing":665,"../../components/fx":683,"../../components/titles":738,"../../lib":778,"../../lib/extend":768,"../../registry":911,"../cartesian/axes":828,"../cartesian/constants":834,"../cartesian/select":847,"../cartesian/set_convert":848,"../plots":891,d3:169,tinycolor2:576}],911:[function(e,v,M){var r=e("./lib/loggers"),n=e("./lib/noop"),l=e("./lib/push_unique"),c=e("./lib/is_plain_object"),t=e("./lib/dom").addStyleRule,f=e("./lib/extend"),a=e("./plots/attributes"),o=e("./plots/layout_attributes"),u=f.extendFlat,h=f.extendDeepAll;M.modules={},M.allCategories={},M.allTypes=[],M.subplotsRegistry={},M.transformsRegistry={},M.componentsRegistry={},M.layoutArrayContainers=[],M.layoutArrayRegexes=[],M.traceLayoutAttributes={},M.localeRegistry={},M.apiMethodRegistry={},M.collectableSubplotTypes=null,M.register=function(k){if(M.collectableSubplotTypes=null,k)k&&!Array.isArray(k)&&(k=[k]);else throw new Error("No argument passed to Plotly.register.");for(var R=0;R<k.length;R++){var L=k[R];if(!L)throw new Error("Invalid module was attempted to be registered!");switch(L.moduleType){case"trace":i(L);break;case"transform":d(L);break;case"component":p(L);break;case"locale":y(L);break;case"apiMethod":var z=L.name;M.apiMethodRegistry[z]=L.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},M.getModule=function(A){var k=M.modules[g(A)];return k?k._module:!1},M.traceIs=function(A,k){if(A=g(A),A==="various")return!1;var R=M.modules[A];return R||(A&&A!=="area"&&r.log("Unrecognized trace type "+A+"."),R=M.modules[a.type.dflt]),!!R.categories[k]},M.getTransformIndices=function(A,k){for(var R=[],L=A.transforms||[],z=0;z<L.length;z++)L[z].type===k&&R.push(z);return R},M.hasTransform=function(A,k){for(var R=A.transforms||[],L=0;L<R.length;L++)if(R[L].type===k)return!0;return!1},M.getComponentMethod=function(A,k){var R=M.componentsRegistry[A];return R&&R[k]||n},M.call=function(){var A=arguments[0],k=[].slice.call(arguments,1);return M.apiMethodRegistry[A].apply(null,k)};function i(A){var k=A.name,R=A.categories,L=A.meta;if(M.modules[k]){r.log("Type "+k+" already registered");return}M.subplotsRegistry[A.basePlotModule.name]||s(A.basePlotModule);for(var z={},E=0;E<R.length;E++)z[R[E]]=!0,M.allCategories[R[E]]=!0;M.modules[k]={_module:A,categories:z},L&&Object.keys(L).length&&(M.modules[k].meta=L),M.allTypes.push(k);for(var S in M.componentsRegistry)m(S,k);A.layoutAttributes&&u(M.traceLayoutAttributes,A.layoutAttributes);var C=A.basePlotModule,D=C.name;if(D==="mapbox"){var F=C.constants.styleRules;for(var N in F)t(".js-plotly-plot .plotly .mapboxgl-"+N,F[N])}(D==="geo"||D==="mapbox")&&typeof window!==void 0&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function s(A){var k=A.name;if(M.subplotsRegistry[k]){r.log("Plot type "+k+" already registered.");return}b(A),M.subplotsRegistry[k]=A;for(var R in M.componentsRegistry)T(R,A.name)}function p(A){if(typeof A.name!="string")throw new Error("Component module *name* must be a string.");var k=A.name;M.componentsRegistry[k]=A,A.layoutAttributes&&(A.layoutAttributes._isLinkedToArray&&l(M.layoutArrayContainers,k),b(A));for(var R in M.modules)m(k,R);for(var L in M.subplotsRegistry)T(k,L);for(var z in M.transformsRegistry)_(k,z);A.schema&&A.schema.layout&&h(o,A.schema.layout)}function d(A){if(typeof A.name!="string")throw new Error("Transform module *name* must be a string.");var k="Transform module "+A.name,R=typeof A.transform=="function",L=typeof A.calcTransform=="function";if(!R&&!L)throw new Error(k+" is missing a *transform* or *calcTransform* method.");R&&L&&r.log([k+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),c(A.attributes)||r.log(k+" registered without an *attributes* object."),typeof A.supplyDefaults!="function"&&r.log(k+" registered without a *supplyDefaults* method."),M.transformsRegistry[A.name]=A;for(var z in M.componentsRegistry)_(z,A.name)}function y(A){var k=A.name,R=k.split("-")[0],L=A.dictionary,z=A.format,E=L&&Object.keys(L).length,S=z&&Object.keys(z).length,C=M.localeRegistry,D=C[k];if(D||(C[k]=D={}),R!==k){var F=C[R];F||(C[R]=F={}),E&&F.dictionary===D.dictionary&&(F.dictionary=L),S&&F.format===D.format&&(F.format=z)}E&&(D.dictionary=L),S&&(D.format=z)}function b(A){if(A.layoutAttributes){var k=A.layoutAttributes._arrayAttrRegexps;if(k)for(var R=0;R<k.length;R++)l(M.layoutArrayRegexes,k[R])}}function m(A,k){var R=M.componentsRegistry[A].schema;if(!(!R||!R.traces)){var L=R.traces[k];L&&h(M.modules[k]._module.attributes,L)}}function _(A,k){var R=M.componentsRegistry[A].schema;if(!(!R||!R.transforms)){var L=R.transforms[k];L&&h(M.transformsRegistry[k].attributes,L)}}function T(A,k){var R=M.componentsRegistry[A].schema;if(!(!R||!R.subplots)){var L=M.subplotsRegistry[k],z=L.layoutAttributes,E=L.attr==="subplot"?L.name:L.attr;Array.isArray(E)&&(E=E[0]);var S=R.subplots[E];z&&S&&h(z,S)}}function g(A){return typeof A=="object"&&(A=A.type),A}},{"./lib/dom":766,"./lib/extend":768,"./lib/is_plain_object":779,"./lib/loggers":782,"./lib/noop":787,"./lib/push_unique":793,"./plots/attributes":824,"./plots/layout_attributes":882}],912:[function(e,v,M){var r=e("../registry"),n=e("../lib"),l=n.extendFlat,c=n.extendDeep;function t(a){var o;switch(a){case"themes__thumb":o={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":o={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:o={}}return o}function f(a){var o=["xaxis","yaxis","zaxis"];return o.indexOf(a.slice(0,5))>-1}v.exports=function(o,u){o.framework&&o.framework.isPolar&&(o=o.framework.getConfig());var h,i=o.data,s=o.layout,p=c([],i),d=c({},s,t(u.tileClass)),y=o._context||{};if(u.width&&(d.width=u.width),u.height&&(d.height=u.height),u.tileClass==="thumbnail"||u.tileClass==="themes__thumb"){d.annotations=[];var b=Object.keys(d);for(h=0;h<b.length;h++)f(b[h])&&(d[b[h]].title={text:""});for(h=0;h<p.length;h++){var m=p[h];m.showscale=!1,m.marker&&(m.marker.showscale=!1),r.traceIs(m,"pie-like")&&(m.textposition="none")}}if(Array.isArray(u.annotations))for(h=0;h<u.annotations.length;h++)d.annotations.push(u.annotations[h]);var _=Object.keys(d).filter(function(R){return R.match(/^scene\d*$/)});if(_.length){var T={};for(u.tileClass==="thumbnail"&&(T={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),h=0;h<_.length;h++){var g=d[_[h]];g.xaxis||(g.xaxis={}),g.yaxis||(g.yaxis={}),g.zaxis||(g.zaxis={}),l(g.xaxis,T),l(g.yaxis,T),l(g.zaxis,T),g._scene=null}}var A=document.createElement("div");u.tileClass&&(A.className=u.tileClass);var k={gd:A,td:A,layout:d,data:p,config:{staticPlot:u.staticPlot===void 0?!0:u.staticPlot,plotGlPixelRatio:u.plotGlPixelRatio===void 0?2:u.plotGlPixelRatio,displaylogo:u.displaylogo||!1,showLink:u.showLink||!1,showTips:u.showTips||!1,mapboxAccessToken:y.mapboxAccessToken}};return u.setBackground!=="transparent"&&(k.config.setBackground=u.setBackground||"opaque"),k.gd.defaultLayout=t(u.tileClass),k}},{"../lib":778,"../registry":911}],913:[function(e,v,M){var r=e("../lib"),n=e("../plot_api/to_image"),l=e("./filesaver"),c=e("./helpers");function t(f,a){var o;return r.isPlainObject(f)||(o=r.getGraphDiv(f)),a=a||{},a.format=a.format||"png",a.width=a.width||null,a.height=a.height||null,a.imageDataOnly=!0,new Promise(function(u,h){o&&o._snapshotInProgress&&h(new Error("Snapshotting already in progress.")),r.isIE()&&a.format!=="svg"&&h(new Error(c.MSG_IE_BAD_FORMAT)),o&&(o._snapshotInProgress=!0);var i=n(f,a),s=a.filename||f.fn||"newplot";s+="."+a.format.replace("-","."),i.then(function(p){return o&&(o._snapshotInProgress=!1),l(p,s,a.format)}).then(function(p){u(p)}).catch(function(p){o&&(o._snapshotInProgress=!1),h(p)})})}v.exports=t},{"../lib":778,"../plot_api/to_image":820,"./filesaver":914,"./helpers":915}],914:[function(e,v,M){var r=e("../lib"),n=e("./helpers");function l(c,t,f){var a=document.createElement("a"),o="download"in a,u=new Promise(function(h,i){var s,p;if(r.isIE9orBelow()&&i(new Error("IE < 10 unsupported")),r.isSafari()){var d=f==="svg"?",":";base64,";return n.octetStream(d+encodeURIComponent(c)),h(t)}if(r.isIE())return s=n.createBlob(c,"svg"),window.navigator.msSaveBlob(s,t),s=null,h(t);if(o)return s=n.createBlob(c,f),p=n.createObjectURL(s),a.href=p,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),n.revokeObjectURL(p),s=null,h(t);i(new Error("download error"))});return u}v.exports=l},{"../lib":778,"./helpers":915}],915:[function(e,v,M){var r=e("../registry");M.getDelay=function(c){return c._has&&(c._has("gl3d")||c._has("gl2d")||c._has("mapbox"))?500:0},M.getRedrawFunc=function(c){return function(){var t=c._fullLayout||{},f=t._has&&t._has("polar"),a=!f&&c.data&&c.data[0]&&c.data[0].r;a||r.getComponentMethod("colorbar","draw")(c)}},M.encodeSVG=function(c){return"data:image/svg+xml,"+encodeURIComponent(c)},M.encodeJSON=function(c){return"data:application/json,"+encodeURIComponent(c)};var n=window.URL||window.webkitURL;M.createObjectURL=function(c){return n.createObjectURL(c)},M.revokeObjectURL=function(c){return n.revokeObjectURL(c)},M.createBlob=function(c,t){if(t==="svg")return new window.Blob([c],{type:"image/svg+xml;charset=utf-8"});if(t==="full-json")return new window.Blob([c],{type:"application/json;charset=utf-8"});var f=l(window.atob(c));return new window.Blob([f],{type:"image/"+t})},M.octetStream=function(c){document.location.href="data:application/octet-stream"+c};function l(c){for(var t=c.length,f=new ArrayBuffer(t),a=new Uint8Array(f),o=0;o<t;o++)a[o]=c.charCodeAt(o);return f}M.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,M.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":911}],916:[function(e,v,M){var r=e("./helpers"),n={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};v.exports=n},{"./cloneplot":912,"./download":913,"./helpers":915,"./svgtoimg":917,"./toimage":918,"./tosvg":919}],917:[function(e,v,M){var r=e("../lib"),n=e("events").EventEmitter,l=e("./helpers");function c(t){var f=t.emitter||new n,a=new Promise(function(o,u){var h=window.Image,i=t.svg,s=t.format||"png";if(r.isIE()&&s!=="svg"){var p=new Error(l.MSG_IE_BAD_FORMAT);return u(p),t.promise?a:f.emit("error",p)}var d=t.canvas,y=t.scale||1,b=t.width||300,m=t.height||150,_=y*b,T=y*m,g=d.getContext("2d"),A=new h,k,R;s==="svg"||r.isIE9orBelow()||r.isSafari()?R=l.encodeSVG(i):(k=l.createBlob(i,"svg"),R=l.createObjectURL(k)),d.width=_,d.height=T,A.onload=function(){var L;switch(k=null,l.revokeObjectURL(R),s!=="svg"&&g.drawImage(A,0,0,_,T),s){case"jpeg":L=d.toDataURL("image/jpeg");break;case"png":L=d.toDataURL("image/png");break;case"webp":L=d.toDataURL("image/webp");break;case"svg":L=R;break;default:var z="Image format is not jpeg, png, svg or webp.";if(u(new Error(z)),!t.promise)return f.emit("error",z)}o(L),t.promise||f.emit("success",L)},A.onerror=function(L){if(k=null,l.revokeObjectURL(R),u(L),!t.promise)return f.emit("error",L)},A.src=R});return t.promise?a:f}v.exports=c},{"../lib":778,"./helpers":915,events:110}],918:[function(e,v,M){var r=e("events").EventEmitter,n=e("../registry"),l=e("../lib"),c=e("./helpers"),t=e("./cloneplot"),f=e("./tosvg"),a=e("./svgtoimg");function o(u,h){var i=new r,s=t(u,{format:"png"}),p=s.gd;p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);function d(){var b=c.getDelay(p._fullLayout);setTimeout(function(){var m=f(p),_=document.createElement("canvas");_.id=l.randstr(),i=a({format:h.format,width:p._fullLayout.width,height:p._fullLayout.height,canvas:_,emitter:i,svg:m}),i.clean=function(){p&&document.body.removeChild(p)}},b)}var y=c.getRedrawFunc(p);return n.call("plot",p,s.data,s.layout,s.config).then(y).then(d).catch(function(b){i.emit("error",b)}),i}v.exports=o},{"../lib":778,"../registry":911,"./cloneplot":912,"./helpers":915,"./svgtoimg":917,"./tosvg":919,events:110}],919:[function(e,v,M){var r=e("d3"),n=e("../lib"),l=e("../components/drawing"),c=e("../components/color"),t=e("../constants/xmlns_namespaces"),f=/"/g,a="TOBESTRIPPED",o=new RegExp('("'+a+")|("+a+'")',"g");function u(i){var s=r.select("body").append("div").style({display:"none"}).html(""),p=i.replace(/(&[^;]*;)/gi,function(d){return d==="&lt;"?"&#60;":d==="&rt;"?"&#62;":d.indexOf("<")!==-1||d.indexOf(">")!==-1?"":s.html(d).text()});return s.remove(),p}function h(i){return i.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}v.exports=function(s,p,d){var y=s._fullLayout,b=y._paper,m=y._toppaper,_=y.width,T=y.height,g;b.insert("rect",":first-child").call(l.setRect,0,0,_,T).call(c.fill,y.paper_bgcolor);var A=y._basePlotModules||[];for(g=0;g<A.length;g++){var k=A[g];k.toSVG&&k.toSVG(s)}if(m){var R=m.node().childNodes,L=Array.prototype.slice.call(R);for(g=0;g<L.length;g++){var z=L[g];z.childNodes.length&&b.node().appendChild(z)}}if(y._draggers&&y._draggers.remove(),b.node().style.background="",b.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var D=r.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){D.remove();return}else D.style({visibility:null,display:null});var F=this.style.fontFamily;F&&F.indexOf('"')!==-1&&D.style("font-family",F.replace(f,a))}),y._gradientUrlQueryParts){var E=[];for(var S in y._gradientUrlQueryParts)E.push(S);E.length&&b.selectAll(E.join(",")).each(function(){var D=r.select(this),F=this.style.fill;F&&F.indexOf("url(")!==-1&&D.style("fill",F.replace(f,a));var N=this.style.stroke;N&&N.indexOf("url(")!==-1&&D.style("stroke",N.replace(f,a))})}(p==="pdf"||p==="eps")&&b.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),b.node().setAttributeNS(t.xmlns,"xmlns",t.svg),b.node().setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),p==="svg"&&d&&(b.attr("width",d*_),b.attr("height",d*T),b.attr("viewBox","0 0 "+_+" "+T));var C=new window.XMLSerializer().serializeToString(b.node());return C=u(C),C=h(C),C=C.replace(o,"'"),n.isIE()&&(C=C.replace(/"/gi,"'"),C=C.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),C=C.replace(/(\\')/gi,'"')),C}},{"../components/color":643,"../components/drawing":665,"../constants/xmlns_namespaces":754,"../lib":778,d3:169}],920:[function(e,v,M){var r=e("../../lib");v.exports=function(l,c){for(var t=0;t<l.length;t++)l[t].i=t;r.mergeArray(c.text,l,"tx"),r.mergeArray(c.hovertext,l,"htx");var f=c.marker;if(f){r.mergeArray(f.opacity,l,"mo",!0),r.mergeArray(f.color,l,"mc");var a=f.line;a&&(r.mergeArray(a.color,l,"mlc"),r.mergeArrayCastPositive(a.width,l,"mlw"))}}},{"../../lib":778}],921:[function(e,v,M){var r=e("../scatter/attributes"),n=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,c=e("../../components/colorscale/attributes"),t=e("../../plots/font_attributes"),f=e("./constants"),a=e("../../lib/extend").extendFlat,o=t({editType:"calc",arrayOk:!0,colorEditType:"style"}),u=r.marker,h=u.line,i=a({},h.width,{dflt:0}),s=a({width:i,editType:"calc"},c("marker.line")),p=a({line:s,editType:"calc"},c("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});v.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,text:r.text,texttemplate:l({editType:"plot"},{keys:f.eventDataKeys}),hovertext:r.hovertext,hovertemplate:n({},{keys:f.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:a({},o,{}),insidetextfont:a({},o,{}),outsidetextfont:a({},o,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:a({},r.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:p,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},r:r.r,t:r.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/font_attributes":856,"../../plots/template_attributes":906,"../scatter/attributes":1187,"./constants":923}],922:[function(e,v,M){var r=e("../../plots/cartesian/axes"),n=e("../../plots/cartesian/align_period"),l=e("../../components/colorscale/helpers").hasColorscale,c=e("../../components/colorscale/calc"),t=e("./arrays_to_calcdata"),f=e("../scatter/calc_selection");v.exports=function(o,u){var h=r.getFromId(o,u.xaxis||"x"),i=r.getFromId(o,u.yaxis||"y"),s,p,d,y={msUTC:!!(u.base||u.base===0)},b;u.orientation==="h"?(s=h.makeCalcdata(u,"x",y),d=i.makeCalcdata(u,"y"),p=n(u,i,"y",d),b=!!u.yperiodalignment):(s=i.makeCalcdata(u,"y",y),d=h.makeCalcdata(u,"x"),p=n(u,h,"x",d),b=!!u.xperiodalignment);for(var m=Math.min(p.length,s.length),_=new Array(m),T=0;T<m;T++)_[T]={p:p[T],s:s[T]},b&&(_[T].orig_p=d[T]),u.ids&&(_[T].id=String(u.ids[T]));return l(u,"marker")&&c(o,u,{vals:u.marker.color,containerStr:"marker",cLetter:"c"}),l(u,"marker.line")&&c(o,u,{vals:u.marker.line.color,containerStr:"marker.line",cLetter:"c"}),t(_,u),f(_,u),_}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../scatter/calc_selection":1189,"./arrays_to_calcdata":920}],923:[function(e,v,M){v.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],924:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib").isArrayOrTypedArray,l=e("../../constants/numerical").BADNUM,c=e("../../registry"),t=e("../../plots/cartesian/axes"),f=e("../../plots/cartesian/constraints").getAxisGroup,a=e("./sieve.js");function o(E,S){for(var C=S.xaxis,D=S.yaxis,F=E._fullLayout,N=E._fullData,G=E.calcdata,U=[],X=[],I=0;I<N.length;I++){var B=N[I];if(B.visible===!0&&c.traceIs(B,"bar")&&B.xaxis===C._id&&B.yaxis===D._id&&(B.orientation==="h"?U.push(G[I]):X.push(G[I]),B._computePh))for(var j=E.calcdata[I],H=0;H<j.length;H++)typeof j[H].ph0=="function"&&(j[H].ph0=j[H].ph0()),typeof j[H].ph1=="function"&&(j[H].ph1=j[H].ph1())}var K={xCat:C.type==="category"||C.type==="multicategory",yCat:D.type==="category"||D.type==="multicategory",mode:F.barmode,norm:F.barnorm,gap:F.bargap,groupgap:F.bargroupgap};u(E,C,D,X,K),u(E,D,C,U,K)}function u(E,S,C,D,F){if(D.length){var N,G,U,X,I;switch(h(C,D),F.mode){case"overlay":i(S,C,D,F);break;case"group":for(N=[],G=[],U=0;U<D.length;U++)X=D[U],I=X[0].trace,I.offset===void 0?G.push(X):N.push(X);G.length&&s(E,S,C,G,F),N.length&&i(S,C,N,F);break;case"stack":case"relative":for(N=[],G=[],U=0;U<D.length;U++)X=D[U],I=X[0].trace,I.base===void 0?G.push(X):N.push(X);G.length&&p(E,S,C,G,F),N.length&&i(S,C,N,F);break}L(D,S)}}function h(E,S){var C,D;for(C=0;C<S.length;C++){var F=S[C],N=F[0].trace,G=N.type==="funnel"?N._base:N.base,U,X=N.orientation==="h"?N.xcalendar:N.ycalendar,I=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(n(G)){for(D=0;D<Math.min(G.length,F.length);D++)U=I(G[D],0,X),r(U)?(F[D].b=+U,F[D].hasB=1):F[D].b=0;for(;D<F.length;D++)F[D].b=0}else{U=I(G,0,X);var B=r(U);for(U=B?U:0,D=0;D<F.length;D++)F[D].b=U,B&&(F[D].hasB=1)}}}function i(E,S,C,D){for(var F=0;F<C.length;F++){var N=C[F],G=new a([N],{unitMinDiff:D.xCat||D.yCat,sepNegVal:!1,overlapNoMerge:!D.norm});d(E,G,D),D.norm?(A(G),R(S,G,D)):T(S,G)}}function s(E,S,C,D,F){var N=new a(D,{sepNegVal:!1,overlapNoMerge:!F.norm});y(E,S,N,F),k(N),F.norm?(A(N),R(C,N,F)):T(C,N)}function p(E,S,C,D,F){var N=new a(D,{sepNegVal:F.mode==="relative",overlapNoMerge:!(F.norm||F.mode==="stack"||F.mode==="relative")});d(S,N,F),g(C,N,F);for(var G=0;G<D.length;G++)for(var U=D[G],X=0;X<U.length;X++){var I=U[X];if(I.s!==l){var B=I.b+I.s===N.get(I.p,I.s);B&&(I._outmost=!0)}}F.norm&&R(C,N,F)}function d(E,S,C){for(var D=S.minDiff,F=S.traces,N=D*(1-C.gap),G=N,U=G*(1-(C.groupgap||0)),X=-U/2,I=0;I<F.length;I++){var B=F[I],j=B[0].t;j.barwidth=U,j.poffset=X,j.bargroupwidth=N,j.bardelta=D}S.binWidth=F[0][0].t.barwidth/100,b(S),m(E,S),_(E,S)}function y(E,S,C,D){for(var F=E._fullLayout,N=C.positions,G=C.distinctPositions,U=C.minDiff,X=C.traces,I=X.length,B=N.length!==G.length,j=U*(1-D.gap),H=f(F,S._id)+X[0][0].trace.orientation,K=F._alignmentOpts[H]||{},te=0;te<I;te++){var J=X[te],oe=J[0].trace,ie=K[oe.alignmentgroup]||{},Q=Object.keys(ie.offsetGroups||{}).length,V;Q?V=j/Q:V=B?j/I:j;var se=V*(1-(D.groupgap||0)),re;Q?re=((2*oe._offsetIndex+1-Q)*V-se)/2:re=B?((2*te+1-I)*V-se)/2:-se/2;var ee=J[0].t;ee.barwidth=se,ee.poffset=re,ee.bargroupwidth=j,ee.bardelta=U}C.binWidth=X[0][0].t.barwidth/100,b(C),m(S,C),_(S,C,B)}function b(E){var S=E.traces,C,D;for(C=0;C<S.length;C++){var F=S[C],N=F[0],G=N.trace,U=N.t,X=G._offset||G.offset,I=U.poffset,B;if(n(X)){for(B=Array.prototype.slice.call(X,0,F.length),D=0;D<B.length;D++)r(B[D])||(B[D]=I);for(D=B.length;D<F.length;D++)B.push(I);U.poffset=B}else X!==void 0&&(U.poffset=X);var j=G._width||G.width,H=U.barwidth;if(n(j)){var K=Array.prototype.slice.call(j,0,F.length);for(D=0;D<K.length;D++)r(K[D])||(K[D]=H);for(D=K.length;D<F.length;D++)K.push(H);if(U.barwidth=K,X===void 0){for(B=[],D=0;D<F.length;D++)B.push(I+(H-K[D])/2);U.poffset=B}}else j!==void 0&&(U.barwidth=j,X===void 0&&(U.poffset=I+(H-j)/2))}}function m(E,S){for(var C=S.traces,D=z(E),F=0;F<C.length;F++)for(var N=C[F],G=N[0].t,U=G.poffset,X=Array.isArray(U),I=G.barwidth,B=Array.isArray(I),j=0;j<N.length;j++){var H=N[j],K=H.w=B?I[j]:I;H[D]=H.p+(X?U[j]:U)+K/2}}function _(E,S,C){var D=S.traces,F=S.minDiff,N=F/2;t.minDtick(E,S.minDiff,S.distinctPositions[0],C);for(var G=0;G<D.length;G++){var U=D[G],X=U[0],I=X.trace,B=[],j,H,K,te;for(te=0;te<U.length;te++)j=U[te],H=j.p-N,K=j.p+N,B.push(H,K);if(I.width||I.offset){var J=X.t,oe=J.poffset,ie=J.barwidth,Q=Array.isArray(oe),V=Array.isArray(ie);for(te=0;te<U.length;te++){j=U[te];var se=Q?oe[te]:oe,re=V?ie[te]:ie;H=j.p+se,K=H+re,B.push(H,K)}}I._extremes[E._id]=t.findExtremes(E,B,{padded:!1})}}function T(E,S){for(var C=S.traces,D=z(E),F=0;F<C.length;F++){for(var N=C[F],G=N[0].trace,U=[],X=!1,I=0;I<N.length;I++){var B=N[I],j=B.b,H=j+B.s;B[D]=H,U.push(H),B.hasB&&U.push(j),(!B.hasB||!B.b)&&(X=!0)}G._extremes[E._id]=t.findExtremes(E,U,{tozero:X,padded:!0})}}function g(E,S,C){var D=z(E),F=S.traces,N,G,U,X,I,B;for(X=0;X<F.length;X++)if(N=F[X],G=N[0].trace,G.type==="funnel")for(I=0;I<N.length;I++)B=N[I],B.s!==l&&S.put(B.p,-.5*B.s);for(X=0;X<F.length;X++){N=F[X],G=N[0].trace,U=G.type==="funnel";var j=[];for(I=0;I<N.length;I++)if(B=N[I],B.s!==l){var H;U?H=B.s:H=B.s+B.b;var K=S.put(B.p,H),te=K+H;B.b=K,B[D]=te,C.norm||(j.push(te),B.hasB&&j.push(K))}C.norm||(G._extremes[E._id]=t.findExtremes(E,j,{tozero:!0,padded:!0}))}}function A(E){for(var S=E.traces,C=0;C<S.length;C++)for(var D=S[C],F=0;F<D.length;F++){var N=D[F];N.s!==l&&E.put(N.p,N.b+N.s)}}function k(E){for(var S=E.traces,C=0;C<S.length;C++){var D=S[C],F=D[0].trace;if(F.base===void 0)for(var N=new a([D],{sepNegVal:!0,overlapNoMerge:!0}),G=0;G<D.length;G++){var U=D[G];if(U.p!==l){var X=N.put(U.p,U.b+U.s);X&&(U.b=X)}}}}function R(E,S,C){var D=S.traces,F=z(E),N=C.norm==="fraction"?1:100,G=N/1e9,U=E.l2c(E.c2l(0)),X=C.mode==="stack"?N:U;function I(re){return r(E.c2l(re))&&(re<U-G||re>X+G||!r(U))}for(var B=0;B<D.length;B++){for(var j=D[B],H=j[0].trace,K=[],te=!1,J=!1,oe=0;oe<j.length;oe++){var ie=j[oe];if(ie.s!==l){var Q=Math.abs(N/S.get(ie.p,ie.s));ie.b*=Q,ie.s*=Q;var V=ie.b,se=V+ie.s;ie[F]=se,K.push(se),J=J||I(se),ie.hasB&&(K.push(V),J=J||I(V)),(!ie.hasB||!ie.b)&&(te=!0)}}H._extremes[E._id]=t.findExtremes(E,K,{tozero:te,padded:J})}}function L(E,S){var C=z(S),D={},F,N,G,U=1/0,X=-1/0;for(F=0;F<E.length;F++)for(G=E[F],N=0;N<G.length;N++){var I=G[N].p;r(I)&&(U=Math.min(U,I),X=Math.max(X,I))}var B=1e4/(X-U),j=D.round=function(Q){return String(Math.round(B*(Q-U)))};for(F=0;F<E.length;F++){G=E[F],G[0].t.extents=D;var H=G[0].t.poffset,K=Array.isArray(H);for(N=0;N<G.length;N++){var te=G[N],J=te[C]-te.w/2;if(r(J)){var oe=te[C]+te.w/2,ie=j(te.p);D[ie]?D[ie]=[Math.min(J,D[ie][0]),Math.max(oe,D[ie][1])]:D[ie]=[J,oe]}te.p0=te.p+(K?H[N]:H),te.p1=te.p0+te.w,te.s0=te.b,te.s1=te.s0+te.s}}}function z(E){return E._id.charAt(0)}v.exports={crossTraceCalc:o,setGroupPositions:u}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axes":828,"../../plots/cartesian/constraints":835,"../../registry":911,"./sieve.js":934,"fast-isnumeric":241}],925:[function(e,v,M){var r=e("../../lib"),n=e("../../components/color"),l=e("../../registry"),c=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),f=e("./style_defaults"),a=e("../../plots/cartesian/constraints").getAxisGroup,o=e("./attributes"),u=r.coerceFont;function h(d,y,b,m){function _(R,L){return r.coerce(d,y,o,R,L)}var T=c(d,y,m,_);if(!T){y.visible=!1;return}t(d,y,m,_),_("orientation",y.x&&!y.y?"h":"v"),_("base"),_("offset"),_("width"),_("text"),_("hovertext"),_("hovertemplate");var g=_("textposition");p(d,y,m,_,g,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),f(d,y,_,b,m);var A=(y.marker.line||{}).color,k=l.getComponentMethod("errorbars","supplyDefaults");k(d,y,A||n.defaultLine,{axis:"y"}),k(d,y,A||n.defaultLine,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(y,_)}function i(d,y,b,m){var _=y.orientation,T=y[{v:"x",h:"y"}[_]+"axis"],g=a(b,T)+_,A=b._alignmentOpts||{},k=m("alignmentgroup"),R=A[g];R||(R=A[g]={});var L=R[k];L?L.traces.push(y):L=R[k]={traces:[y],alignmentIndex:Object.keys(R).length,offsetGroups:{}};var z=m("offsetgroup"),E=L.offsetGroups,S=E[z];z&&(S||(S=E[z]={offsetIndex:Object.keys(E).length}),y._offsetIndex=S.offsetIndex)}function s(d,y){var b,m;function _(g){return r.coerce(m._input,m,o,g)}if(y.barmode==="group")for(var T=0;T<d.length;T++)m=d[T],m.type==="bar"&&(b=m._input,i(b,m,y,_))}function p(d,y,b,m,_,T){T=T||{};var g=T.moduleHasSelected!==!1,A=T.moduleHasUnselected!==!1,k=T.moduleHasConstrain!==!1,R=T.moduleHasCliponaxis!==!1,L=T.moduleHasTextangle!==!1,z=T.moduleHasInsideanchor!==!1,E=!!T.hasPathbar,S=Array.isArray(_)||_==="auto",C=S||_==="inside",D=S||_==="outside";if(C||D){var F=u(m,"textfont",b.font),N=r.extendFlat({},F),G=d.textfont&&d.textfont.color,U=!G;if(U&&delete N.color,u(m,"insidetextfont",N),E){var X=r.extendFlat({},F);U&&delete X.color,u(m,"pathbar.textfont",X)}D&&u(m,"outsidetextfont",F),g&&m("selected.textfont.color"),A&&m("unselected.textfont.color"),k&&m("constraintext"),R&&m("cliponaxis"),L&&m("textangle"),m("texttemplate")}C&&z&&m("insidetextanchor")}v.exports={supplyDefaults:h,crossTraceDefaults:s,handleGroupingDefaults:i,handleText:p}},{"../../components/color":643,"../../lib":778,"../../plots/cartesian/constraints":835,"../../registry":911,"../scatter/period_defaults":1207,"../scatter/xy_defaults":1214,"./attributes":921,"./style_defaults":936}],926:[function(e,v,M){v.exports=function(n,l,c){return n.x="xVal"in l?l.xVal:l.x,n.y="yVal"in l?l.yVal:l.y,l.xa&&(n.xaxis=l.xa),l.ya&&(n.yaxis=l.ya),c.orientation==="h"?(n.label=n.y,n.value=n.x):(n.label=n.x,n.value=n.y),n}},{}],927:[function(e,v,M){var r=e("fast-isnumeric"),n=e("tinycolor2"),l=e("../../lib").isArrayOrTypedArray;M.coerceString=function(c,t,f){if(typeof t=="string"){if(t||!c.noBlank)return t}else if((typeof t=="number"||t===!0)&&!c.strict)return String(t);return f!==void 0?f:c.dflt},M.coerceNumber=function(c,t,f){if(r(t)){t=+t;var a=c.min,o=c.max,u=a!==void 0&&t<a||o!==void 0&&t>o;if(!u)return t}return f!==void 0?f:c.dflt},M.coerceColor=function(c,t,f){return n(t).isValid()?t:f!==void 0?f:c.dflt},M.coerceEnumerated=function(c,t,f){return c.coerceNumber&&(t=+t),c.values.indexOf(t)!==-1?t:f!==void 0?f:c.dflt},M.getValue=function(c,t){var f;return Array.isArray(c)?t<c.length&&(f=c[t]):f=c,f},M.getLineWidth=function(c,t){var f=0<t.mlw?t.mlw:l(c.marker.line.width)?0:c.marker.line.width;return f}},{"../../lib":778,"fast-isnumeric":241,tinycolor2:576}],928:[function(e,v,M){var r=e("../../components/fx"),n=e("../../registry"),l=e("../../components/color"),c=e("../../lib").fillText,t=e("./helpers").getLineWidth,f=e("../../plots/cartesian/axes").hoverLabelText,a=e("../../constants/numerical").BADNUM;function o(i,s,p,d){var y=u(i,s,p,d);if(y){var b=y.cd,m=b[0].trace,_=b[y.index];return y.color=h(m,_),n.getComponentMethod("errorbars","hoverInfo")(_,m,y),[y]}}function u(i,s,p,d){var y=i.cd,b=y[0].trace,m=y[0].t,_=d==="closest",T=b.type==="waterfall",g=i.maxHoverDistance,A,k,R,L,z,E,S;function C(V){return V[R]-V.w/2}function D(V){return V[R]+V.w/2}var F=_?C:function(V){return Math.min(C(V),V.p-m.bardelta/2)},N=_?D:function(V){return Math.max(D(V),V.p+m.bardelta/2)};function G(V,se){return r.inbox(V-A,se-A,g+Math.min(1,Math.abs(se-V)/S)-1)}function U(V){return G(F(V),N(V))}function X(V){return G(C(V),D(V))}function I(V){var se=k,re=V.b,ee=V[L];if(T){var ae=Math.abs(V.rawS)||0;se>0?ee+=ae:se<0&&(ee-=ae)}return r.inbox(re-se,ee-se,g+(ee-se)/(ee-re)-1)}b.orientation==="h"?(A=p,k=s,R="y",L="x",z=I,E=U):(A=s,k=p,R="x",L="y",E=I,z=U);var B=i[R+"a"],j=i[L+"a"];S=Math.abs(B.r2c(B.range[1])-B.r2c(B.range[0]));function H(V){return(z(V)+E(V))/2}var K=r.getDistanceFunction(d,z,E,H);if(r.getClosest(y,K,i),i.index!==!1&&y[i.index].p!==a){_||(F=function(V){return Math.min(C(V),V.p-m.bargroupwidth/2)},N=function(V){return Math.max(D(V),V.p+m.bargroupwidth/2)});var te=i.index,J=y[te],oe=b.base?J.b+J.s:J.s;i[L+"0"]=i[L+"1"]=j.c2p(J[L],!0),i[L+"LabelVal"]=oe;var ie=m.extents[m.extents.round(J.p)];i[R+"0"]=B.c2p(_?F(J):ie[0],!0),i[R+"1"]=B.c2p(_?N(J):ie[1],!0);var Q=J.orig_p!==void 0;return i[R+"LabelVal"]=Q?J.orig_p:J.p,i.labelLabel=f(B,i[R+"LabelVal"]),i.valueLabel=f(j,i[L+"LabelVal"]),i.baseLabel=f(j,J.b),i.spikeDistance=(I(J)+X(J))/2-g,i[R+"Spike"]=B.c2p(J.p,!0),c(J,b,i),i.hovertemplate=b.hovertemplate,i}}function h(i,s){var p=s.mcc||i.marker.color,d=s.mlcc||i.marker.line.color,y=t(i,s);if(l.opacity(p))return p;if(l.opacity(d)&&y)return d}v.exports={hoverPoints:o,hoverOnBars:u,getTraceColor:h}},{"../../components/color":643,"../../components/fx":683,"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"./helpers":927}],929:[function(e,v,M){v.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":841,"../scatter/marker_colorbar":1205,"./arrays_to_calcdata":920,"./attributes":921,"./calc":922,"./cross_trace_calc":924,"./defaults":925,"./event_data":926,"./hover":928,"./layout_attributes":930,"./layout_defaults":931,"./plot":932,"./select":933,"./style":935}],930:[function(e,v,M){v.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],931:[function(e,v,M){var r=e("../../registry"),n=e("../../plots/cartesian/axes"),l=e("../../lib"),c=e("./layout_attributes");v.exports=function(t,f,a){function o(_,T){return l.coerce(t,f,c,_,T)}for(var u=!1,h=!1,i=!1,s={},p=o("barmode"),d=0;d<a.length;d++){var y=a[d];if(r.traceIs(y,"bar")&&y.visible)u=!0;else continue;if(p==="group"){var b=y.xaxis+y.yaxis;s[b]&&(i=!0),s[b]=!0}if(y.visible&&y.type==="histogram"){var m=n.getFromId({_fullLayout:f},y[y.orientation==="v"?"xaxis":"yaxis"]);m.type!=="category"&&(h=!0)}}if(!u){delete f.barmode;return}p!=="overlay"&&o("barnorm"),o("bargap",h&&!i?0:.2),o("bargroupgap")}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"./layout_attributes":930}],932:[function(e,v,M){var r=e("d3"),n=e("fast-isnumeric"),l=e("../../lib"),c=e("../../lib/svg_text_utils"),t=e("../../components/color"),f=e("../../components/drawing"),a=e("../../registry"),o=e("../../plots/cartesian/axes").tickText,u=e("./uniform_text"),h=u.recordMinTextSize,i=u.clearMinTextSize,s=e("./style"),p=e("./helpers"),d=e("./constants"),y=e("./attributes"),b=y.text,m=y.textposition,_=e("../../components/fx/helpers").appendArrayPointValue,T=d.TEXTPAD;function g(B){return B.id}function A(B){if(B.ids)return g}function k(B,j){return B<j?1:-1}function R(B,j,H,K){var te=[],J=[],oe=K?j:H,ie=K?H:j;return te[0]=oe.c2p(B.s0,!0),J[0]=ie.c2p(B.p0,!0),te[1]=oe.c2p(B.s1,!0),J[1]=ie.c2p(B.p1,!0),K?[te,J]:[J,te]}function L(B,j,H,K){if(!j.uniformtext.mode&&z(H)){var te;return K&&(te=K()),B.transition().duration(H.duration).ease(H.easing).each("end",function(){te&&te()}).each("interrupt",function(){te&&te()})}else return B}function z(B){return B&&B.duration>0}function E(B,j,H,K,te,J){var oe=j.xaxis,ie=j.yaxis,Q=B._fullLayout;te||(te={mode:Q.barmode,norm:Q.barmode,gap:Q.bargap,groupgap:Q.bargroupgap},i("bar",Q));var V=l.makeTraceGroups(K,H,"trace bars").each(function(se){var re=r.select(this),ee=se[0].trace,ae=ee.type==="waterfall",fe=ee.type==="funnel",de=ee.type==="bar",pe=de||fe,W=0;ae&&ee.connector.visible&&ee.connector.mode==="between"&&(W=ee.connector.line.width/2);var ue=ee.orientation==="h",me=z(te),be=l.ensureSingle(re,"g","points"),ke=A(ee),Pe=be.selectAll("g.point").data(l.identity,ke);Pe.enter().append("g").classed("point",!0),Pe.exit().remove(),Pe.each(function(ze,Ze){var tt=r.select(this),Ce=R(ze,oe,ie,ue),Ae=Ce[0][0],Ne=Ce[0][1],qe=Ce[1][0],At=Ce[1][1],kt=(ue?Ne-Ae:At-qe)===0;kt&&pe&&p.getLineWidth(ee,ze)&&(kt=!1),kt||(kt=!n(Ae)||!n(Ne)||!n(qe)||!n(At)),ze.isBlank=kt,kt&&(ue?Ne=Ae:At=qe),W&&!kt&&(ue?(Ae-=k(Ae,Ne)*W,Ne+=k(Ae,Ne)*W):(qe-=k(qe,At)*W,At+=k(qe,At)*W));var Ve,ft;if(ee.type==="waterfall"){if(!kt){var St=ee[ze.dir].marker;Ve=St.line.width,ft=St.color}}else Ve=p.getLineWidth(ee,ze),ft=ze.mc||ee.marker.color;function Wt(Lt){var dt=r.round(Ve/2%1,2);return te.gap===0&&te.groupgap===0?r.round(Math.round(Lt)-dt,2):Lt}function Qt(Lt,dt,lt){return lt&&Lt===dt?Lt:Math.abs(Lt-dt)>=2?Wt(Lt):Lt>dt?Math.ceil(Lt):Math.floor(Lt)}if(!B._context.staticPlot){var zt=t.opacity(ft),$t=zt<1||Ve>.01?Wt:Qt;Ae=$t(Ae,Ne,ue),Ne=$t(Ne,Ae,ue),qe=$t(qe,At,!ue),At=$t(At,qe,!ue)}var rr=L(l.ensureSingle(tt,"path"),Q,te,J);if(rr.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Ne-Ae)*(At-qe))||kt&&B._context.staticPlot?"M0,0Z":"M"+Ae+","+qe+"V"+At+"H"+Ne+"V"+qe+"Z").call(f.setClipUrl,j.layerClipId,B),!Q.uniformtext.mode&&me){var Pt=f.makePointStyleFns(ee);f.singlePointStyle(ze,rr,ee,Pt,B)}S(B,j,tt,se,Ze,Ae,Ne,qe,At,te,J),j.layerClipId&&f.hideOutsideRangePoint(ze,tt.select("text"),oe,ie,ee.xcalendar,ee.ycalendar)});var je=ee.cliponaxis===!1;f.setClipUrl(re,je?null:j.layerClipId,B)});a.getComponentMethod("errorbars","plot")(B,V,j,te)}function S(B,j,H,K,te,J,oe,ie,Q,V,se){var re=j.xaxis,ee=j.yaxis,ae=B._fullLayout,fe;function de(Lt,dt,lt){var Te=l.ensureSingle(Lt,"text").text(dt).attr({class:"bartext bartext-"+fe,"text-anchor":"middle","data-notex":1}).call(f.font,lt).call(c.convertToTspans,B);return Te}var pe=K[0].trace,W=pe.orientation==="h",ue=G(ae,K,te,re,ee);fe=U(pe,te);var me=V.mode==="stack"||V.mode==="relative",be=K[te],ke=!me||be._outmost;if(!ue||fe==="none"||(be.isBlank||J===oe||ie===Q)&&(fe==="auto"||fe==="inside")){H.select("text").remove();return}var Pe=ae.font,je=s.getBarColor(K[te],pe),ze=s.getInsideTextFont(pe,te,Pe,je),Ze=s.getOutsideTextFont(pe,te,Pe),tt=H.datum();W?re.type==="log"&&tt.s0<=0&&(re.range[0]<re.range[1]?J=0:J=re._length):ee.type==="log"&&tt.s0<=0&&(ee.range[0]<ee.range[1]?ie=ee._length:ie=0);var Ce=Math.abs(oe-J)-2*T,Ae=Math.abs(Q-ie)-2*T,Ne,qe,At,kt,Ve;if(fe==="outside"&&!ke&&!be.hasB&&(fe="inside"),fe==="auto")if(ke){fe="inside",Ve=l.ensureUniformFontSize(B,ze),Ne=de(H,ue,Ve),qe=f.bBox(Ne.node()),At=qe.width,kt=qe.height;var ft=At>0&&kt>0,St=At<=Ce&&kt<=Ae,Wt=At<=Ae&&kt<=Ce,Qt=W?Ce>=At*(Ae/kt):Ae>=kt*(Ce/At);ft&&(St||Wt||Qt)?fe="inside":(fe="outside",Ne.remove(),Ne=null)}else fe="inside";if(!Ne){Ve=l.ensureUniformFontSize(B,fe==="outside"?Ze:ze),Ne=de(H,ue,Ve);var zt=Ne.attr("transform");if(Ne.attr("transform",""),qe=f.bBox(Ne.node()),At=qe.width,kt=qe.height,Ne.attr("transform",zt),At<=0||kt<=0){Ne.remove();return}}var $t=pe.textangle,rr,Pt;fe==="outside"?(Pt=pe.constraintext==="both"||pe.constraintext==="outside",rr=N(J,oe,ie,Q,qe,{isHorizontal:W,constrained:Pt,angle:$t})):(Pt=pe.constraintext==="both"||pe.constraintext==="inside",rr=F(J,oe,ie,Q,qe,{isHorizontal:W,constrained:Pt,angle:$t,anchor:pe.insidetextanchor})),rr.fontSize=Ve.size,h(pe.type,rr,ae),be.transform=rr,L(Ne,ae,V,se).attr("transform",l.getTextTransform(rr))}function C(B){return B==="auto"?0:B}function D(B,j){var H=Math.PI/180*j,K=Math.abs(Math.sin(H)),te=Math.abs(Math.cos(H));return{x:B.width*te+B.height*K,y:B.width*K+B.height*te}}function F(B,j,H,K,te,J){var oe=!!J.isHorizontal,ie=!!J.constrained,Q=J.angle||0,V=J.anchor||"end",se=V==="end",re=V==="start",ee=J.leftToRight||0,ae=(ee+1)/2,fe=1-ae,de=te.width,pe=te.height,W=Math.abs(j-B),ue=Math.abs(K-H),me=W>2*T&&ue>2*T?T:0;W-=2*me,ue-=2*me;var be=C(Q);Q==="auto"&&!(de<=W&&pe<=ue)&&(de>W||pe>ue)&&(!(de>ue||pe>W)||de<pe!=W<ue)&&(be+=90);var ke=D(te,be),Pe=1;ie&&(Pe=Math.min(1,W/ke.x,ue/ke.y));var je=te.left*fe+te.right*ae,ze=(te.top+te.bottom)/2,Ze=(B+T)*fe+(j-T)*ae,tt=(H+K)/2,Ce=0,Ae=0;if(re||se){var Ne=(oe?ke.x:ke.y)/2,qe=oe?k(B,j):k(H,K);oe?re?(Ze=B+qe*me,Ce=-qe*Ne):(Ze=j-qe*me,Ce=qe*Ne):re?(tt=H+qe*me,Ae=-qe*Ne):(tt=K-qe*me,Ae=qe*Ne)}return{textX:je,textY:ze,targetX:Ze,targetY:tt,anchorX:Ce,anchorY:Ae,scale:Pe,rotate:be}}function N(B,j,H,K,te,J){var oe=!!J.isHorizontal,ie=!!J.constrained,Q=J.angle||0,V=te.width,se=te.height,re=Math.abs(j-B),ee=Math.abs(K-H),ae;oe?ae=ee>2*T?T:0:ae=re>2*T?T:0;var fe=1;ie&&(fe=oe?Math.min(1,ee/se):Math.min(1,re/V));var de=C(Q),pe=D(te,de),W=(oe?pe.x:pe.y)/2,ue=(te.left+te.right)/2,me=(te.top+te.bottom)/2,be=(B+j)/2,ke=(H+K)/2,Pe=0,je=0,ze=oe?k(j,B):k(H,K);return oe?(be=j-ze*ae,Pe=ze*W):(ke=K+ze*ae,je=-ze*W),{textX:ue,textY:me,targetX:be,targetY:ke,anchorX:Pe,anchorY:je,scale:fe,rotate:de}}function G(B,j,H,K,te){var J=j[0].trace,oe=J.texttemplate,ie;return oe?ie=X(B,j,H,K,te):J.textinfo?ie=I(j,H,K,te):ie=p.getValue(J.text,H),p.coerceString(b,ie)}function U(B,j){var H=p.getValue(B.textposition,j);return p.coerceEnumerated(m,H)}function X(B,j,H,K,te){var J=j[0].trace,oe=l.castOption(J,H,"texttemplate");if(!oe)return"";var ie=J.type==="waterfall",Q=J.type==="funnel",V,se,re,ee;J.orientation==="h"?(V="y",se=te,re="x",ee=K):(V="x",se=K,re="y",ee=te);function ae(be){return o(se,be,!0).text}function fe(be){return o(ee,+be,!0).text}var de=j[H],pe={};pe.label=de.p,pe.labelLabel=pe[V+"Label"]=ae(de.p);var W=l.castOption(J,de.i,"text");(W===0||W)&&(pe.text=W),pe.value=de.s,pe.valueLabel=pe[re+"Label"]=fe(de.s);var ue={};_(ue,J,de.i),ie&&(pe.delta=+de.rawS||de.s,pe.deltaLabel=fe(pe.delta),pe.final=de.v,pe.finalLabel=fe(pe.final),pe.initial=pe.final-pe.delta,pe.initialLabel=fe(pe.initial)),Q&&(pe.value=de.s,pe.valueLabel=fe(pe.value),pe.percentInitial=de.begR,pe.percentInitialLabel=l.formatPercent(de.begR),pe.percentPrevious=de.difR,pe.percentPreviousLabel=l.formatPercent(de.difR),pe.percentTotal=de.sumR,pe.percenTotalLabel=l.formatPercent(de.sumR));var me=l.castOption(J,de.i,"customdata");return me&&(pe.customdata=me),l.texttemplateString(oe,pe,B._d3locale,ue,pe,J._meta||{})}function I(B,j,H,K){var te=B[0].trace,J=te.orientation==="h",oe=te.type==="waterfall",ie=te.type==="funnel";function Q(ke){var Pe=J?K:H;return o(Pe,ke,!0).text}function V(ke){var Pe=J?H:K;return o(Pe,+ke,!0).text}var se=te.textinfo,re=B[j],ee=se.split("+"),ae=[],fe,de=function(ke){return ee.indexOf(ke)!==-1};if(de("label")&&ae.push(Q(B[j].p)),de("text")&&(fe=l.castOption(te,re.i,"text"),(fe===0||fe)&&ae.push(fe)),oe){var pe=+re.rawS||re.s,W=re.v,ue=W-pe;de("initial")&&ae.push(V(ue)),de("delta")&&ae.push(V(pe)),de("final")&&ae.push(V(W))}if(ie){de("value")&&ae.push(V(re.s));var me=0;de("percent initial")&&me++,de("percent previous")&&me++,de("percent total")&&me++;var be=me>1;de("percent initial")&&(fe=l.formatPercent(re.begR),be&&(fe+=" of initial"),ae.push(fe)),de("percent previous")&&(fe=l.formatPercent(re.difR),be&&(fe+=" of previous"),ae.push(fe)),de("percent total")&&(fe=l.formatPercent(re.sumR),be&&(fe+=" of total"),ae.push(fe))}return ae.join("<br>")}v.exports={plot:E,toMoveInsideBar:F}},{"../../components/color":643,"../../components/drawing":665,"../../components/fx/helpers":679,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../registry":911,"./attributes":921,"./constants":923,"./helpers":927,"./style":935,"./uniform_text":937,d3:169,"fast-isnumeric":241}],933:[function(e,v,M){v.exports=function(l,c){var t=l.cd,f=l.xaxis,a=l.yaxis,o=t[0].trace,u=o.type==="funnel",h=o.orientation==="h",i=[],s;if(c===!1)for(s=0;s<t.length;s++)t[s].selected=0;else for(s=0;s<t.length;s++){var p=t[s],d="ct"in p?p.ct:r(p,f,a,h,u);c.contains(d,!1,s,l)?(i.push({pointNumber:s,x:f.c2d(p.x),y:a.c2d(p.y)}),p.selected=1):p.selected=0}return i};function r(n,l,c,t,f){var a=l.c2p(t?n.s0:n.p0,!0),o=l.c2p(t?n.s1:n.p1,!0),u=c.c2p(t?n.p0:n.s0,!0),h=c.c2p(t?n.p1:n.s1,!0);return f?[(a+o)/2,(u+h)/2]:t?[o,(u+h)/2]:[(a+o)/2,h]}},{}],934:[function(e,v,M){v.exports=l;var r=e("../../lib").distinctVals,n=e("../../constants/numerical").BADNUM;function l(c,t){this.traces=c,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var f=1/0,a=[],o=0;o<c.length;o++){for(var u=c[o],h=0;h<u.length;h++){var i=u[h];i.p!==n&&a.push(i.p)}u[0]&&u[0].width1&&(f=Math.min(u[0].width1,f))}this.positions=a;var s=r(a,{unitMinDiff:t.unitMinDiff});this.distinctPositions=s.vals,s.vals.length===1&&f!==1/0?this.minDiff=f:this.minDiff=Math.min(s.minDiff,f),this.binWidth=this.minDiff,this.bins={}}l.prototype.put=function(t,f){var a=this.getLabel(t,f),o=this.bins[a]||0;return this.bins[a]=o+f,o},l.prototype.get=function(t,f){var a=this.getLabel(t,f);return this.bins[a]||0},l.prototype.getLabel=function(t,f){var a=f<0&&this.sepNegVal?"v":"^",o=this.overlapNoMerge?t:Math.round(t/this.binWidth);return a+o}},{"../../constants/numerical":753,"../../lib":778}],935:[function(e,v,M){var r=e("d3"),n=e("../../components/color"),l=e("../../components/drawing"),c=e("../../lib"),t=e("../../registry"),f=e("./uniform_text").resizeText,a=e("./attributes"),o=a.textfont,u=a.insidetextfont,h=a.outsidetextfont,i=e("./helpers");function s(L){var z=r.select(L).selectAll("g.barlayer").selectAll("g.trace");f(L,z,"bar");var E=z.size(),S=L._fullLayout;z.style("opacity",function(C){return C[0].trace.opacity}).each(function(C){(S.barmode==="stack"&&E>1||S.bargap===0&&S.bargroupgap===0&&!C[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")}),z.selectAll("g.points").each(function(C){var D=r.select(this),F=C[0].trace;p(D,F,L)}),t.getComponentMethod("errorbars","style")(z)}function p(L,z,E){l.pointStyle(L.selectAll("path"),z,E),d(L,z,E)}function d(L,z,E){L.selectAll("text").each(function(S){var C=r.select(this),D=c.ensureUniformFontSize(E,_(C,S,z,E));l.font(C,D)})}function y(L,z,E){var S=z[0].trace;S.selectedpoints?b(E,S,L):(p(E,S,L),t.getComponentMethod("errorbars","style")(E))}function b(L,z,E){l.selectedPointStyle(L.selectAll("path"),z),m(L.selectAll("text"),z,E)}function m(L,z,E){L.each(function(S){var C=r.select(this),D;if(S.selected){D=c.ensureUniformFontSize(E,_(C,S,z,E));var F=z.selected.textfont&&z.selected.textfont.color;F&&(D.color=F),l.font(C,D)}else l.selectedTextStyle(C,z)})}function _(L,z,E,S){var C=S._fullLayout.font,D=E.textfont;if(L.classed("bartext-inside")){var F=R(z,E);D=g(E,z.i,C,F)}else L.classed("bartext-outside")&&(D=A(E,z.i,C));return D}function T(L,z,E){return k(o,L.textfont,z,E)}function g(L,z,E,S){var C=T(L,z,E),D=L._input.textfont===void 0||L._input.textfont.color===void 0||Array.isArray(L.textfont.color)&&L.textfont.color[z]===void 0;return D&&(C={color:n.contrast(S),family:C.family,size:C.size}),k(u,L.insidetextfont,z,C)}function A(L,z,E){var S=T(L,z,E);return k(h,L.outsidetextfont,z,S)}function k(L,z,E,S){z=z||{};var C=i.getValue(z.family,E),D=i.getValue(z.size,E),F=i.getValue(z.color,E);return{family:i.coerceString(L.family,C,S.family),size:i.coerceNumber(L.size,D,S.size),color:i.coerceColor(L.color,F,S.color)}}function R(L,z){return z.type==="waterfall"?z[L.dir].marker.color:L.mc||z.marker.color}v.exports={style:s,styleTextPoints:d,styleOnSelect:y,getInsideTextFont:g,getOutsideTextFont:A,getBarColor:R,resizeText:f}},{"../../components/color":643,"../../components/drawing":665,"../../lib":778,"../../registry":911,"./attributes":921,"./helpers":927,"./uniform_text":937,d3:169}],936:[function(e,v,M){var r=e("../../components/color"),n=e("../../components/colorscale/helpers").hasColorscale,l=e("../../components/colorscale/defaults");v.exports=function(t,f,a,o,u){a("marker.color",o),n(t,"marker")&&l(t,f,u,a,{prefix:"marker.",cLetter:"c"}),a("marker.line.color",r.defaultLine),n(t,"marker.line")&&l(t,f,u,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width"),a("marker.opacity"),a("selected.marker.color"),a("unselected.marker.color")}},{"../../components/color":643,"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654}],937:[function(e,v,M){var r=e("d3"),n=e("../../lib");function l(a,o,u){var h=a._fullLayout,i=h["_"+u+"Text_minsize"];if(i){var s=h.uniformtext.mode==="hide",p;switch(u){case"funnelarea":case"pie":case"sunburst":p="g.slice";break;case"treemap":p="g.slice, g.pathbar";break;default:p="g.points > g.point"}o.selectAll(p).each(function(d){var y=d.transform;if(y){y.scale=s&&y.hide?0:i/y.fontSize;var b=r.select(this).select("text");b.attr("transform",n.getTextTransform(y))}})}}function c(a,o,u){if(u.uniformtext.mode){var h=f(a),i=u.uniformtext.minsize,s=o.scale*o.fontSize;o.hide=s<i,u[h]=u[h]||1/0,o.hide||(u[h]=Math.min(u[h],Math.max(s,i)))}}function t(a,o){var u=f(a);o[u]=void 0}function f(a){return"_"+a+"Text_minsize"}v.exports={recordMinTextSize:c,clearMinTextSize:t,resizeText:l}},{"../../lib":778,d3:169}],938:[function(e,v,M){var r=e("../../plots/template_attributes").hovertemplateAttrs,n=e("../../lib/extend").extendFlat,l=e("../scatterpolar/attributes"),c=e("../bar/attributes");v.exports={r:l.r,theta:l.theta,r0:l.r0,dr:l.dr,theta0:l.theta0,dtheta:l.dtheta,thetaunit:l.thetaunit,base:n({},c.base,{}),offset:n({},c.offset,{}),width:n({},c.width,{}),text:n({},c.text,{}),hovertext:n({},c.hovertext,{}),marker:c.marker,hoverinfo:l.hoverinfo,hovertemplate:r(),selected:c.selected,unselected:c.unselected}},{"../../lib/extend":768,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatterpolar/attributes":1261}],939:[function(e,v,M){var r=e("../../components/colorscale/helpers").hasColorscale,n=e("../../components/colorscale/calc"),l=e("../bar/arrays_to_calcdata"),c=e("../bar/cross_trace_calc").setGroupPositions,t=e("../scatter/calc_selection"),f=e("../../registry").traceIs,a=e("../../lib").extendFlat;function o(h,i){for(var s=h._fullLayout,p=i.subplot,d=s[p].radialaxis,y=s[p].angularaxis,b=d.makeCalcdata(i,"r"),m=y.makeCalcdata(i,"theta"),_=i._length,T=new Array(_),g=b,A=m,k=0;k<_;k++)T[k]={p:A[k],s:g[k]};function R(L){var z=i[L];z!==void 0&&(i["_"+L]=Array.isArray(z)?y.makeCalcdata(i,L):y.d2c(z,i.thetaunit))}return y.type==="linear"&&(R("width"),R("offset")),r(i,"marker")&&n(h,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),r(i,"marker.line")&&n(h,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}),l(T,i),t(T,i),T}function u(h,i,s){for(var p=h.calcdata,d=[],y=0;y<p.length;y++){var b=p[y],m=b[0].trace;m.visible===!0&&f(m,"bar")&&m.subplot===s&&d.push(b)}var _=a({},i.radialaxis,{_id:"x"}),T=i.angularaxis;c(h,T,_,d,{mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap})}v.exports={calc:o,crossTraceCalc:u}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"../../lib":778,"../../registry":911,"../bar/arrays_to_calcdata":920,"../bar/cross_trace_calc":924,"../scatter/calc_selection":1189}],940:[function(e,v,M){var r=e("../../lib"),n=e("../scatterpolar/defaults").handleRThetaDefaults,l=e("../bar/style_defaults"),c=e("./attributes");v.exports=function(f,a,o,u){function h(s,p){return r.coerce(f,a,c,s,p)}var i=n(f,a,u,h);if(!i){a.visible=!1;return}h("thetaunit"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate"),l(f,a,h,o,u),r.coerceSelectionMarkerOpacity(a,h)}},{"../../lib":778,"../bar/style_defaults":936,"../scatterpolar/defaults":1263,"./attributes":938}],941:[function(e,v,M){var r=e("../../components/fx"),n=e("../../lib"),l=e("../bar/hover").getTraceColor,c=n.fillText,t=e("../scatterpolar/hover").makeHoverPointText,f=e("../../plots/polar/helpers").isPtInsidePolygon;v.exports=function(o,u,h){var i=o.cd,s=i[0].trace,p=o.subplot,d=p.radialAxis,y=p.angularAxis,b=p.vangles,m=b?f:n.isPtInsideSector,_=o.maxHoverDistance,T=y._period||2*Math.PI,g=Math.abs(d.g2p(Math.sqrt(u*u+h*h))),A=Math.atan2(h,u);d.range[0]>d.range[1]&&(A+=Math.PI);var k=function(E){return m(g,A,[E.rp0,E.rp1],[E.thetag0,E.thetag1],b)?_+Math.min(1,Math.abs(E.thetag1-E.thetag0)/T)-1+(E.rp1-g)/(E.rp1-E.rp0)-1:1/0};if(r.getClosest(i,k,o),o.index!==!1){var R=o.index,L=i[R];o.x0=o.x1=L.ct[0],o.y0=o.y1=L.ct[1];var z=n.extendFlat({},L,{r:L.s,theta:L.p});return c(L,s,o),t(z,s,p,o),o.hovertemplate=s.hovertemplate,o.color=l(s,L),o.xLabelVal=o.yLabelVal=void 0,L.s<0&&(o.idealAlign="left"),[o]}}},{"../../components/fx":683,"../../lib":778,"../../plots/polar/helpers":893,"../bar/hover":928,"../scatterpolar/hover":1265}],942:[function(e,v,M){v.exports={moduleType:"trace",name:"barpolar",basePlotModule:e("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("../scatterpolar/format_labels"),style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../bar/select"),meta:{}}},{"../../plots/polar":894,"../bar/select":933,"../bar/style":935,"../scatter/marker_colorbar":1205,"../scatterpolar/format_labels":1264,"./attributes":938,"./calc":939,"./defaults":940,"./hover":941,"./layout_attributes":943,"./layout_defaults":944,"./plot":945}],943:[function(e,v,M){v.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],944:[function(e,v,M){var r=e("../../lib"),n=e("./layout_attributes");v.exports=function(l,c,t){var f={},a;function o(i,s){return r.coerce(l[a]||{},c[a],n,i,s)}for(var u=0;u<t.length;u++){var h=t[u];h.type==="barpolar"&&h.visible===!0&&(a=h.subplot,f[a]||(o("barmode"),o("bargap"),f[a]=1))}}},{"../../lib":778,"./layout_attributes":943}],945:[function(e,v,M){var r=e("d3"),n=e("fast-isnumeric"),l=e("../../lib"),c=e("../../components/drawing"),t=e("../../plots/polar/helpers");v.exports=function(o,u,h){var i=u.xaxis,s=u.yaxis,p=u.radialAxis,d=u.angularAxis,y=f(u),b=u.layers.frontplot.select("g.barlayer");l.makeTraceGroups(b,h,"trace bars").each(function(){var m=r.select(this),_=l.ensureSingle(m,"g","points"),T=_.selectAll("g.point").data(l.identity);T.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),T.exit().remove(),T.each(function(g){var A=r.select(this),k=g.rp0=p.c2p(g.s0),R=g.rp1=p.c2p(g.s1),L=g.thetag0=d.c2g(g.p0),z=g.thetag1=d.c2g(g.p1),E;if(!n(k)||!n(R)||!n(L)||!n(z)||k===R||L===z)E="M0,0Z";else{var S=p.c2g(g.s1),C=(L+z)/2;g.ct=[i.c2p(S*Math.cos(C)),s.c2p(S*Math.sin(C))],E=y(k,R,L,z)}l.ensureSingle(A,"path").attr("d",E)}),c.setClipUrl(m,u._hasClipOnAxisFalse?u.clipIds.forTraces:null,o)})};function f(a){var o=a.cxx,u=a.cyy;return a.vangles?function(h,i,s,p){var d,y;l.angleDelta(s,p)>0?(d=s,y=p):(d=p,y=s);var b=t.findEnclosingVertexAngles(d,a.vangles)[0],m=t.findEnclosingVertexAngles(y,a.vangles)[1],_=[b,(d+y)/2,m];return t.pathPolygonAnnulus(h,i,d,y,_,o,u)}:function(h,i,s,p){return l.pathAnnulus(h,i,s,p,o,u)}}},{"../../components/drawing":665,"../../lib":778,"../../plots/polar/helpers":893,d3:169,"fast-isnumeric":241}],946:[function(e,v,M){var r=e("../scatter/attributes"),n=e("../bar/attributes"),l=e("../../components/color/attributes"),c=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../lib/extend").extendFlat,f=r.marker,a=f.line;v.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:t({},f.symbol,{arrayOk:!1,editType:"plot"}),opacity:t({},f.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:t({},f.size,{arrayOk:!1,editType:"calc"}),color:t({},f.color,{arrayOk:!1,editType:"style"}),line:{color:t({},a.color,{arrayOk:!1,dflt:l.defaultLine,editType:"style"}),width:t({},a.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:r.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup,selected:{marker:r.selected.marker,editType:"style"},unselected:{marker:r.unselected.marker,editType:"style"},text:t({},r.text,{}),hovertext:t({},r.hovertext,{}),hovertemplate:c({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":642,"../../lib/extend":768,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatter/attributes":1187}],947:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../plots/cartesian/axes"),l=e("../../plots/cartesian/align_period"),c=e("../../lib"),t=e("../../constants/numerical").BADNUM,f=c._;v.exports=function(A,k){var R=A._fullLayout,L=n.getFromId(A,k.xaxis||"x"),z=n.getFromId(A,k.yaxis||"y"),E=[],S=k.type==="violin"?"_numViolins":"_numBoxes",C,D,F,N,G,U,X;k.orientation==="h"?(F=L,N="x",G=z,U="y",X=!!k.yperiodalignment):(F=z,N="y",G=L,U="x",X=!!k.xperiodalignment);var I=a(k,U,G,R[S]),B=I[0],j=I[1],H=c.distinctVals(B),K=H.vals,te=H.minDiff/2,J,oe,ie,Q,V,se,re=(k.boxpoints||k.points)==="all"?c.identity:function(zt){return zt.v<J.lf||zt.v>J.uf};if(k._hasPreCompStats){var ee=k[N],ae=function(zt){return F.d2c((k[zt]||[])[C])},fe=1/0,de=-1/0;for(C=0;C<k._length;C++){var pe=B[C];if(r(pe)){if(J={},J.pos=J[U]=pe,X&&j&&(J.orig_p=j[C]),J.q1=ae("q1"),J.med=ae("median"),J.q3=ae("q3"),oe=[],ee&&c.isArrayOrTypedArray(ee[C]))for(D=0;D<ee[C].length;D++)se=F.d2c(ee[C][D]),se!==t&&(V={v:se,i:[C,D]},i(V,k,[C,D]),oe.push(V));if(J.pts=oe.sort(p),ie=J[N]=oe.map(d),Q=ie.length,J.med!==t&&J.q1!==t&&J.q3!==t&&J.med>=J.q1&&J.q3>=J.med){var W=ae("lowerfence");J.lf=W!==t&&W<=J.q1?W:y(J,ie,Q);var ue=ae("upperfence");J.uf=ue!==t&&ue>=J.q3?ue:b(J,ie,Q);var me=ae("mean");J.mean=me!==t?me:Q?c.mean(ie,Q):(J.q1+J.q3)/2;var be=ae("sd");J.sd=me!==t&&be>=0?be:Q?c.stdev(ie,Q,J.mean):J.q3-J.q1,J.lo=m(J),J.uo=_(J);var ke=ae("notchspan");ke=ke!==t&&ke>0?ke:T(J,Q),J.ln=J.med-ke,J.un=J.med+ke;var Pe=J.lf,je=J.uf;k.boxpoints&&ie.length&&(Pe=Math.min(Pe,ie[0]),je=Math.max(je,ie[Q-1])),k.notched&&(Pe=Math.min(Pe,J.ln),je=Math.max(je,J.un)),J.min=Pe,J.max=je}else{c.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+J.q1,"median = "+J.med,"q3 = "+J.q3].join(`
`));var ze;J.med!==t?ze=J.med:J.q1!==t?J.q3!==t?ze=(J.q1+J.q3)/2:ze=J.q1:J.q3!==t?ze=J.q3:ze=0,J.med=ze,J.q1=J.q3=ze,J.lf=J.uf=ze,J.mean=J.sd=ze,J.ln=J.un=ze,J.min=J.max=ze}fe=Math.min(fe,J.min),de=Math.max(de,J.max),J.pts2=oe.filter(re),E.push(J)}}k._extremes[F._id]=n.findExtremes(F,[fe,de],{padded:!0})}else{var Ze=F.makeCalcdata(k,N),tt=o(K,te),Ce=K.length,Ae=u(Ce);for(C=0;C<k._length;C++)if(se=Ze[C],!!r(se)){var Ne=c.findBin(B[C],tt);Ne>=0&&Ne<Ce&&(V={v:se,i:C},i(V,k,C),Ae[Ne].push(V))}var qe=1/0,At=-1/0,kt=k.quartilemethod,Ve=kt==="exclusive",ft=kt==="inclusive";for(C=0;C<Ce;C++)if(Ae[C].length>0){if(J={},J.pos=J[U]=K[C],oe=J.pts=Ae[C].sort(p),ie=J[N]=oe.map(d),Q=ie.length,J.min=ie[0],J.max=ie[Q-1],J.mean=c.mean(ie,Q),J.sd=c.stdev(ie,Q,J.mean),J.med=c.interp(ie,.5),Q%2&&(Ve||ft)){var St,Wt;Ve?(St=ie.slice(0,Q/2),Wt=ie.slice(Q/2+1)):ft&&(St=ie.slice(0,Q/2+1),Wt=ie.slice(Q/2)),J.q1=c.interp(St,.5),J.q3=c.interp(Wt,.5)}else J.q1=c.interp(ie,.25),J.q3=c.interp(ie,.75);J.lf=y(J,ie,Q),J.uf=b(J,ie,Q),J.lo=m(J),J.uo=_(J);var Qt=T(J,Q);J.ln=J.med-Qt,J.un=J.med+Qt,qe=Math.min(qe,J.ln),At=Math.max(At,J.un),J.pts2=oe.filter(re),E.push(J)}k._extremes[F._id]=n.findExtremes(F,k.notched?Ze.concat([qe,At]):Ze,{padded:!0})}return s(E,k),E.length>0?(E[0].t={num:R[S],dPos:te,posLetter:U,valLetter:N,labels:{med:f(A,"median:"),min:f(A,"min:"),q1:f(A,"q1:"),q3:f(A,"q3:"),max:f(A,"max:"),mean:k.boxmean==="sd"?f(A,"mean ± σ:"):f(A,"mean:"),lf:f(A,"lower fence:"),uf:f(A,"upper fence:")}},R[S]++,E):[{t:{empty:!0}}]};function a(g,A,k,R){var L=A in g,z=A+"0"in g,E="d"+A in g;if(L||z&&E){var S=k.makeCalcdata(g,A),C=l(g,k,A,S);return[C,S]}var D;z?D=g[A+"0"]:"name"in g&&(k.type==="category"||r(g.name)&&["linear","log"].indexOf(k.type)!==-1||c.isDateTime(g.name)&&k.type==="date")?D=g.name:D=R;for(var F=k.type==="multicategory"?k.r2c_just_indices(D):k.d2c(D,0,g[A+"calendar"]),N=g._length,G=new Array(N),U=0;U<N;U++)G[U]=F;return[G]}function o(g,A){for(var k=g.length,R=new Array(k+1),L=0;L<k;L++)R[L]=g[L]-A;return R[k]=g[k-1]+A,R}function u(g){for(var A=new Array(g),k=0;k<g;k++)A[k]=[];return A}var h={text:"tx",hovertext:"htx"};function i(g,A,k){for(var R in h)c.isArrayOrTypedArray(A[R])&&(Array.isArray(k)?c.isArrayOrTypedArray(A[R][k[0]])&&(g[h[R]]=A[R][k[0]][k[1]]):g[h[R]]=A[R][k])}function s(g,A){if(c.isArrayOrTypedArray(A.selectedpoints))for(var k=0;k<g.length;k++){for(var R=g[k].pts||[],L={},z=0;z<R.length;z++)L[R[z].i]=z;c.tagSelected(R,A,L)}}function p(g,A){return g.v-A.v}function d(g){return g.v}function y(g,A,k){return k===0?g.q1:Math.min(g.q1,A[Math.min(c.findBin(2.5*g.q1-1.5*g.q3,A,!0)+1,k-1)])}function b(g,A,k){return k===0?g.q3:Math.max(g.q3,A[Math.max(c.findBin(2.5*g.q3-1.5*g.q1,A),0)])}function m(g){return 4*g.q1-3*g.q3}function _(g){return 4*g.q3-3*g.q1}function T(g,A){return A===0?0:1.57*(g.q3-g.q1)/Math.sqrt(A)}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"fast-isnumeric":241}],948:[function(e,v,M){var r=e("../../plots/cartesian/axes"),n=e("../../lib"),l=e("../../plots/cartesian/constraints").getAxisGroup,c=["v","h"];function t(a,o){for(var u=a.calcdata,h=o.xaxis,i=o.yaxis,s=0;s<c.length;s++){for(var p=c[s],d=p==="h"?i:h,y=[],b=0;b<u.length;b++){var m=u[b],_=m[0].t,T=m[0].trace;T.visible===!0&&(T.type==="box"||T.type==="candlestick")&&!_.empty&&(T.orientation||"v")===p&&T.xaxis===h._id&&T.yaxis===i._id&&y.push(b)}f("box",a,y,d)}}function f(a,o,u,h){var i=o.calcdata,s=o._fullLayout,p=h._id,d=p.charAt(0),y,b,m,_=[],T=0;for(y=0;y<u.length;y++)for(m=i[u[y]],b=0;b<m.length;b++)_.push(h.c2l(m[b].pos,!0)),T+=(m[b].pts2||[]).length;if(_.length){var g=n.distinctVals(_,{unitMinDiff:h.type==="category"||h.type==="multicategory"}),A=g.minDiff/2;r.minDtick(h,g.minDiff,g.vals[0],!0);var k=a==="violin"?"_numViolins":"_numBoxes",R=s[k],L=s[a+"mode"]==="group"&&R>1,z=1-s[a+"gap"],E=1-s[a+"groupgap"];for(y=0;y<u.length;y++){m=i[u[y]];var S=m[0].trace,C=m[0].t,D=S.width,F=S.side,N,G,U,X;if(D)N=G=X=D/2,U=0;else if(N=A,L){var I=l(s,h._id)+S.orientation,B=s._alignmentOpts[I]||{},j=B[S.alignmentgroup]||{},H=Object.keys(j.offsetGroups||{}).length,K=H||R,te=H?S._offsetIndex:C.num;G=N*z*E/K,U=2*N*(-.5+(te+.5)/K)*z,X=N*z/K}else G=N*z*E,U=0,X=N;C.dPos=N,C.bPos=U,C.bdPos=G,C.wHover=X;var J,oe,ie=U+G,Q,V,se,re,ee,ae,fe=!!D,de=(S.boxpoints||S.points)&&T>0;if(F==="positive"?(J=N*(D?1:.5),Q=ie,oe=Q=U):F==="negative"?(J=Q=U,oe=N*(D?1:.5),V=ie):(J=oe=N,Q=V=ie),de){var pe=S.pointpos,W=S.jitter,ue=S.marker.size/2,me=0;pe+W>=0&&(me=ie*(pe+W),me>J?(fe=!0,ee=ue,se=me):me>Q&&(ee=ue,se=J)),me<=J&&(se=J);var be=0;pe-W<=0&&(be=-ie*(pe-W),be>oe?(fe=!0,ae=ue,re=be):be>V&&(ae=ue,re=oe)),be<=oe&&(re=oe)}else se=J,re=oe;var ke=new Array(m.length);for(b=0;b<m.length;b++)ke[b]=m[b].pos;S._extremes[p]=r.findExtremes(h,ke,{padded:fe,vpadminus:re,vpadplus:se,vpadLinearized:!0,ppadminus:{x:ae,y:ee}[d],ppadplus:{x:ee,y:ae}[d]})}}}v.exports={crossTraceCalc:t,setPositionOffset:f}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../plots/cartesian/constraints":835}],949:[function(e,v,M){var r=e("../../lib"),n=e("../../registry"),l=e("../../components/color"),c=e("../scatter/period_defaults"),t=e("../bar/defaults").handleGroupingDefaults,f=e("../../plots/cartesian/axis_autotype"),a=e("./attributes");function o(s,p,d,y){function b(L,z){return r.coerce(s,p,a,L,z)}if(u(s,p,b,y),p.visible!==!1){c(s,p,y,b);var m=p._hasPreCompStats;m&&(b("lowerfence"),b("upperfence")),b("line.color",(s.marker||{}).color||d),b("line.width"),b("fillcolor",l.addOpacity(p.line.color,.5));var _=!1;if(m){var T=b("mean"),g=b("sd");T&&T.length&&(_=!0,g&&g.length&&(_="sd"))}b("boxmean",_),b("whiskerwidth"),b("width"),b("quartilemethod");var A=!1;if(m){var k=b("notchspan");k&&k.length&&(A=!0)}else r.validate(s.notchwidth,a.notchwidth)&&(A=!0);var R=b("notched",A);R&&b("notchwidth"),h(s,p,b,{prefix:"box"})}}function u(s,p,d,y){function b(H){var K=0;return H&&H.length&&(K+=1,r.isArrayOrTypedArray(H[0])&&H[0].length&&(K+=1)),K}function m(H){return r.validate(s[H],a[H])}var _=d("y"),T=d("x"),g;if(p.type==="box"){var A=d("q1"),k=d("median"),R=d("q3");p._hasPreCompStats=A&&A.length&&k&&k.length&&R&&R.length,g=Math.min(r.minRowLength(A),r.minRowLength(k),r.minRowLength(R))}var L=b(_),z=b(T),E=L&&r.minRowLength(_),S=z&&r.minRowLength(T),C=y.calendar,D={autotypenumbers:y.autotypenumbers},F,N;if(p._hasPreCompStats)switch(String(z)+String(L)){case"00":var G=m("x0")||m("dx"),U=m("y0")||m("dy");U&&!G?F="h":F="v",N=g;break;case"10":F="v",N=Math.min(g,S);break;case"20":F="h",N=Math.min(g,T.length);break;case"01":F="h",N=Math.min(g,E);break;case"02":F="v",N=Math.min(g,_.length);break;case"12":F="v",N=Math.min(g,S,_.length);break;case"21":F="h",N=Math.min(g,T.length,E);break;case"11":N=0;break;case"22":var X=!1,I;for(I=0;I<T.length;I++)if(f(T[I],C,D)==="category"){X=!0;break}if(X)F="v",N=Math.min(g,S,_.length);else{for(I=0;I<_.length;I++)if(f(_[I],C,D)==="category"){X=!0;break}X?(F="h",N=Math.min(g,T.length,E)):(F="v",N=Math.min(g,S,_.length))}break}else L>0?(F="v",z>0?N=Math.min(S,E):N=Math.min(E)):z>0?(F="h",N=Math.min(S)):N=0;if(!N){p.visible=!1;return}p._length=N;var B=d("orientation",F);p._hasPreCompStats?B==="v"&&z===0?(d("x0",0),d("dx",1)):B==="h"&&L===0&&(d("y0",0),d("dy",1)):B==="v"&&z===0?d("x0"):B==="h"&&L===0&&d("y0");var j=n.getComponentMethod("calendars","handleTraceDefaults");j(s,p,["x","y"],y)}function h(s,p,d,y){var b=y.prefix,m=r.coerce2(s,p,a,"marker.outliercolor"),_=d("marker.line.outliercolor"),T="outliers";p._hasPreCompStats?T="all":(m||_)&&(T="suspectedoutliers");var g=d(b+"points",T);g?(d("jitter",g==="all"?.3:0),d("pointpos",g==="all"?-1.5:0),d("marker.symbol"),d("marker.opacity"),d("marker.size"),d("marker.color",p.line.color),d("marker.line.color"),d("marker.line.width"),g==="suspectedoutliers"&&(d("marker.line.outliercolor",p.marker.color),d("marker.line.outlierwidth")),d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size"),d("text"),d("hovertext")):delete p.marker;var A=d("hoveron");(A==="all"||A.indexOf("points")!==-1)&&d("hovertemplate"),r.coerceSelectionMarkerOpacity(p,d)}function i(s,p){var d,y;function b(T){return r.coerce(y._input,y,a,T)}for(var m=0;m<s.length;m++){y=s[m];var _=y.type;(_==="box"||_==="violin")&&(d=y._input,p[_+"mode"]==="group"&&t(d,y,p,b))}}v.exports={supplyDefaults:o,crossTraceDefaults:i,handleSampleDefaults:u,handlePointsDefaults:h}},{"../../components/color":643,"../../lib":778,"../../plots/cartesian/axis_autotype":829,"../../registry":911,"../bar/defaults":925,"../scatter/period_defaults":1207,"./attributes":946}],950:[function(e,v,M){v.exports=function(n,l){return l.hoverOnBox&&(n.hoverOnBox=l.hoverOnBox),"xVal"in l&&(n.x=l.xVal),"yVal"in l&&(n.y=l.yVal),l.xa&&(n.xaxis=l.xa),l.ya&&(n.yaxis=l.ya),n}},{}],951:[function(e,v,M){var r=e("../../plots/cartesian/axes"),n=e("../../lib"),l=e("../../components/fx"),c=e("../../components/color"),t=n.fillText;function f(u,h,i,s){var p=u.cd,d=p[0].trace,y=d.hoveron,b=[],m;return y.indexOf("boxes")!==-1&&(b=b.concat(a(u,h,i,s))),y.indexOf("points")!==-1&&(m=o(u,h,i)),s==="closest"?m?[m]:b:(m&&b.push(m),b)}function a(u,h,i,s){var p=u.cd,d=u.xa,y=u.ya,b=p[0].trace,m=p[0].t,_=b.type==="violin",T=[],g,A,k,R,L,z,E,S,C,D,F,N=m.bdPos,G,U,X=m.wHover,I=function(de){return k.c2l(de.pos)+m.bPos-k.c2l(z)};_&&b.side!=="both"?(b.side==="positive"&&(C=function(de){var pe=I(de);return l.inbox(pe,pe+X,D)},G=N,U=0),b.side==="negative"&&(C=function(de){var pe=I(de);return l.inbox(pe-X,pe,D)},G=0,U=N)):(C=function(de){var pe=I(de);return l.inbox(pe-X,pe+X,D)},G=U=N);var B;_?B=function(de){return l.inbox(de.span[0]-L,de.span[1]-L,D)}:B=function(de){return l.inbox(de.min-L,de.max-L,D)},b.orientation==="h"?(L=h,z=i,E=B,S=C,g="y",k=y,A="x",R=d):(L=i,z=h,E=C,S=B,g="x",k=d,A="y",R=y);var j=Math.min(1,N/Math.abs(k.r2c(k.range[1])-k.r2c(k.range[0])));D=u.maxHoverDistance-j,F=u.maxSpikeDistance-j;function H(de){return(E(de)+S(de))/2}var K=l.getDistanceFunction(s,E,S,H);if(l.getClosest(p,K,u),u.index===!1)return[];var te=p[u.index],J=b.line.color,oe=(b.marker||{}).color;c.opacity(J)&&b.line.width?u.color=J:c.opacity(oe)&&b.boxpoints?u.color=oe:u.color=b.fillcolor,u[g+"0"]=k.c2p(te.pos+m.bPos-U,!0),u[g+"1"]=k.c2p(te.pos+m.bPos+G,!0),u[g+"LabelVal"]=te.orig_p!==void 0?te.orig_p:te.pos;var ie=g+"Spike";u.spikeDistance=H(te)*F/D,u[ie]=k.c2p(te.pos,!0);var Q={},V=["med","q1","q3","min","max"];(b.boxmean||(b.meanline||{}).visible)&&V.push("mean"),(b.boxpoints||b.points)&&V.push("lf","uf");for(var se=0;se<V.length;se++){var re=V[se];if(!(!(re in te)||te[re]in Q)){Q[te[re]]=!0;var ee=te[re],ae=R.c2p(ee,!0),fe=n.extendFlat({},u);fe.attr=re,fe[A+"0"]=fe[A+"1"]=ae,fe[A+"LabelVal"]=ee,fe[A+"Label"]=(m.labels?m.labels[re]+" ":"")+r.hoverLabelText(R,ee),fe.hoverOnBox=!0,re==="mean"&&"sd"in te&&b.boxmean==="sd"&&(fe[A+"err"]=te.sd),u.name="",u.spikeDistance=void 0,u[ie]=void 0,fe.hovertemplate=!1,T.push(fe)}}return T}function o(u,h,i){for(var s=u.cd,p=u.xa,d=u.ya,y=s[0].trace,b=p.c2p(h),m=d.c2p(i),_,T=function(I){var B=Math.max(3,I.mrc||0);return Math.max(Math.abs(p.c2p(I.x)-b)-B,1-3/B)},g=function(I){var B=Math.max(3,I.mrc||0);return Math.max(Math.abs(d.c2p(I.y)-m)-B,1-3/B)},A=l.quadrature(T,g),k=!1,R,L,z=0;z<s.length;z++){R=s[z];for(var E=0;E<(R.pts||[]).length;E++){L=R.pts[E];var S=A(L);S<=u.distance&&(u.distance=S,k=[z,E])}}if(!k)return!1;R=s[k[0]],L=R.pts[k[1]];var C=p.c2p(L.x,!0),D=d.c2p(L.y,!0),F=L.mrc||1;_=n.extendFlat({},u,{index:L.i,color:(y.marker||{}).color,name:y.name,x0:C-F,x1:C+F,y0:D-F,y1:D+F,spikeDistance:u.distance,hovertemplate:y.hovertemplate});var N=R.orig_p,G=N!==void 0?N:R.pos,U;y.orientation==="h"?(U=d,_.xLabelVal=L.x,_.yLabelVal=G):(U=p,_.xLabelVal=G,_.yLabelVal=L.y);var X=U._id.charAt(0);return _[X+"Spike"]=U.c2p(R.pos,!0),t(L,y,_),_}v.exports={hoverPoints:f,hoverOnBoxes:a,hoverOnPoints:o}},{"../../components/color":643,"../../components/fx":683,"../../lib":778,"../../plots/cartesian/axes":828}],952:[function(e,v,M){v.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults").supplyLayoutDefaults,calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"box",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"./attributes":946,"./calc":947,"./cross_trace_calc":948,"./defaults":949,"./event_data":950,"./hover":951,"./layout_attributes":953,"./layout_defaults":954,"./plot":955,"./select":956,"./style":957}],953:[function(e,v,M){v.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],954:[function(e,v,M){var r=e("../../registry"),n=e("../../lib"),l=e("./layout_attributes");function c(f,a,o,u,h){for(var i=h+"Layout",s=!1,p=0;p<o.length;p++){var d=o[p];if(r.traceIs(d,i)){s=!0;break}}s&&(u(h+"mode"),u(h+"gap"),u(h+"groupgap"))}function t(f,a,o){function u(h,i){return n.coerce(f,a,l,h,i)}c(f,a,o,u,"box")}v.exports={supplyLayoutDefaults:t,_supply:c}},{"../../lib":778,"../../registry":911,"./layout_attributes":953}],955:[function(e,v,M){var r=e("d3"),n=e("../../lib"),l=e("../../components/drawing"),c=5,t=.01;function f(h,i,s,p){var d=i.xaxis,y=i.yaxis;n.makeTraceGroups(p,s,"trace boxes").each(function(b){var m=r.select(this),_=b[0],T=_.t,g=_.trace;if(T.wdPos=T.bdPos*g.whiskerwidth,g.visible!==!0||T.empty){m.remove();return}var A,k;g.orientation==="h"?(A=y,k=d):(A=d,k=y),a(m,{pos:A,val:k},g,T),o(m,{x:d,y},g,T),u(m,{pos:A,val:k},g,T)})}function a(h,i,s,p){var d=s.orientation==="h",y=i.val,b=i.pos,m=!!b.rangebreaks,_=p.bPos,T=p.wdPos||0,g=p.bPosPxOffset||0,A=s.whiskerwidth||0,k=s.notched||!1,R=k?1-2*s.notchwidth:1,L,z;Array.isArray(p.bdPos)?(L=p.bdPos[0],z=p.bdPos[1]):(L=p.bdPos,z=p.bdPos);var E=h.selectAll("path.box").data(s.type!=="violin"||s.box.visible?n.identity:[]);E.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),E.exit().remove(),E.each(function(S){if(S.empty)return"M0,0Z";var C=b.c2l(S.pos+_,!0),D=b.l2p(C-L)+g,F=b.l2p(C+z)+g,N=m?(D+F)/2:b.l2p(C)+g,G=s.whiskerwidth,U=m?D*G+(1-G)*N:b.l2p(C-T)+g,X=m?F*G+(1-G)*N:b.l2p(C+T)+g,I=b.l2p(C-L*R)+g,B=b.l2p(C+z*R)+g,j=y.c2p(S.q1,!0),H=y.c2p(S.q3,!0),K=n.constrain(y.c2p(S.med,!0),Math.min(j,H)+1,Math.max(j,H)-1),te=S.lf===void 0||s.boxpoints===!1,J=y.c2p(te?S.min:S.lf,!0),oe=y.c2p(te?S.max:S.uf,!0),ie=y.c2p(S.ln,!0),Q=y.c2p(S.un,!0);d?r.select(this).attr("d","M"+K+","+I+"V"+B+"M"+j+","+D+"V"+F+(k?"H"+ie+"L"+K+","+B+"L"+Q+","+F:"")+"H"+H+"V"+D+(k?"H"+Q+"L"+K+","+I+"L"+ie+","+D:"")+"ZM"+j+","+N+"H"+J+"M"+H+","+N+"H"+oe+(A===0?"":"M"+J+","+U+"V"+X+"M"+oe+","+U+"V"+X)):r.select(this).attr("d","M"+I+","+K+"H"+B+"M"+D+","+j+"H"+F+(k?"V"+ie+"L"+B+","+K+"L"+F+","+Q:"")+"V"+H+"H"+D+(k?"V"+Q+"L"+I+","+K+"L"+D+","+ie:"")+"ZM"+N+","+j+"V"+J+"M"+N+","+H+"V"+oe+(A===0?"":"M"+U+","+J+"H"+X+"M"+U+","+oe+"H"+X))})}function o(h,i,s,p){var d=i.x,y=i.y,b=p.bdPos,m=p.bPos,_=s.boxpoints||s.points;n.seedPseudoRandom();var T=function(k){return k.forEach(function(R){R.t=p,R.trace=s}),k},g=h.selectAll("g.points").data(_?T:[]);g.enter().append("g").attr("class","points"),g.exit().remove();var A=g.selectAll("path").data(function(k){var R,L=k.pts2,z=Math.max((k.max-k.min)/10,k.q3-k.q1),E=z*1e-9,S=z*t,C=[],D=0,F;if(s.jitter){if(z===0)for(D=1,C=new Array(L.length),R=0;R<L.length;R++)C[R]=1;else for(R=0;R<L.length;R++){var N=Math.max(0,R-c),G=L[N].v,U=Math.min(L.length-1,R+c),X=L[U].v;_!=="all"&&(L[R].v<k.lf?X=Math.min(X,k.lf):G=Math.max(G,k.uf));var I=Math.sqrt(S*(U-N)/(X-G+E))||0;I=n.constrain(Math.abs(I),0,1),C.push(I),D=Math.max(I,D)}F=s.jitter*2/(D||1)}for(R=0;R<L.length;R++){var B=L[R],j=B.v,H=s.jitter?F*C[R]*(n.pseudoRandom()-.5):0,K=k.pos+m+b*(s.pointpos+H);s.orientation==="h"?(B.y=K,B.x=j):(B.x=K,B.y=j),_==="suspectedoutliers"&&j<k.uo&&j>k.lo&&(B.so=!0)}return L});A.enter().append("path").classed("point",!0),A.exit().remove(),A.call(l.translatePoints,d,y)}function u(h,i,s,p){var d=i.val,y=i.pos,b=!!y.rangebreaks,m=p.bPos,_=p.bPosPxOffset||0,T=s.boxmean||(s.meanline||{}).visible,g,A;Array.isArray(p.bdPos)?(g=p.bdPos[0],A=p.bdPos[1]):(g=p.bdPos,A=p.bdPos);var k=h.selectAll("path.mean").data(s.type==="box"&&s.boxmean||s.type==="violin"&&s.box.visible&&s.meanline.visible?n.identity:[]);k.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),k.exit().remove(),k.each(function(R){var L=y.c2l(R.pos+m,!0),z=y.l2p(L-g)+_,E=y.l2p(L+A)+_,S=b?(z+E)/2:y.l2p(L)+_,C=d.c2p(R.mean,!0),D=d.c2p(R.mean-R.sd,!0),F=d.c2p(R.mean+R.sd,!0);s.orientation==="h"?r.select(this).attr("d","M"+C+","+z+"V"+E+(T==="sd"?"m0,0L"+D+","+S+"L"+C+","+z+"L"+F+","+S+"Z":"")):r.select(this).attr("d","M"+z+","+C+"H"+E+(T==="sd"?"m0,0L"+S+","+D+"L"+z+","+C+"L"+S+","+F+"Z":""))})}v.exports={plot:f,plotBoxAndWhiskers:a,plotPoints:o,plotBoxMean:u}},{"../../components/drawing":665,"../../lib":778,d3:169}],956:[function(e,v,M){v.exports=function(n,l){var c=n.cd,t=n.xaxis,f=n.yaxis,a=[],o,u;if(l===!1)for(o=0;o<c.length;o++)for(u=0;u<(c[o].pts||[]).length;u++)c[o].pts[u].selected=0;else for(o=0;o<c.length;o++)for(u=0;u<(c[o].pts||[]).length;u++){var h=c[o].pts[u],i=t.c2p(h.x),s=f.c2p(h.y);l.contains([i,s],null,h.i,n)?(a.push({pointNumber:h.i,x:t.c2d(h.x),y:f.c2d(h.y)}),h.selected=1):h.selected=0}return a}},{}],957:[function(e,v,M){var r=e("d3"),n=e("../../components/color"),l=e("../../components/drawing");function c(f,a,o){var u=o||r.select(f).selectAll("g.trace.boxes");u.style("opacity",function(h){return h[0].trace.opacity}),u.each(function(h){var i=r.select(this),s=h[0].trace,p=s.line.width;function d(m,_,T,g){m.style("stroke-width",_+"px").call(n.stroke,T).call(n.fill,g)}var y=i.selectAll("path.box");if(s.type==="candlestick")y.each(function(m){if(!m.empty){var _=r.select(this),T=s[m.dir];d(_,T.line.width,T.line.color,T.fillcolor),_.style("opacity",s.selectedpoints&&!m.selected?.3:1)}});else{d(y,p,s.line.color,s.fillcolor),i.selectAll("path.mean").style({"stroke-width":p,"stroke-dasharray":2*p+"px,"+p+"px"}).call(n.stroke,s.line.color);var b=i.selectAll("path.point");l.pointStyle(b,s,f)}})}function t(f,a,o){var u=a[0].trace,h=o.selectAll("path.point");u.selectedpoints?l.selectedPointStyle(h,u):l.pointStyle(h,u,f)}v.exports={style:c,styleOnSelect:t}},{"../../components/color":643,"../../components/drawing":665,d3:169}],958:[function(e,v,M){var r=e("../../lib").extendFlat,n=e("../ohlc/attributes"),l=e("../box/attributes");function c(t){return{line:{color:r({},l.line.color,{dflt:t}),width:l.line.width,editType:"style"},fillcolor:l.fillcolor,editType:"style"}}v.exports={xperiod:n.xperiod,xperiod0:n.xperiod0,xperiodalignment:n.xperiodalignment,x:n.x,open:n.open,high:n.high,low:n.low,close:n.close,line:{width:r({},l.line.width,{}),editType:"style"},increasing:c(n.increasing.line.color.dflt),decreasing:c(n.decreasing.line.color.dflt),text:n.text,hovertext:n.hovertext,whiskerwidth:r({},l.whiskerwidth,{dflt:0}),hoverlabel:n.hoverlabel}},{"../../lib":778,"../box/attributes":946,"../ohlc/attributes":1133}],959:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/cartesian/axes"),l=e("../../plots/cartesian/align_period"),c=e("../ohlc/calc").calcCommon;v.exports=function(f,a){var o=f._fullLayout,u=n.getFromId(f,a.xaxis),h=n.getFromId(f,a.yaxis),i=u.makeCalcdata(a,"x"),s=l(a,u,"x",i),p=c(f,a,i,s,h,t);return p.length?(r.extendFlat(p[0].t,{num:o._numBoxes,dPos:r.distinctVals(s).minDiff/2,posLetter:"x",valLetter:"y"}),o._numBoxes++,p):[{t:{empty:!0}}]};function t(f,a,o,u){return{min:o,q1:Math.min(f,u),med:u,q3:Math.max(f,u),max:a}}},{"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../ohlc/calc":1134}],960:[function(e,v,M){var r=e("../../lib"),n=e("../../components/color"),l=e("../ohlc/ohlc_defaults"),c=e("../scatter/period_defaults"),t=e("./attributes");v.exports=function(o,u,h,i){function s(d,y){return r.coerce(o,u,t,d,y)}var p=l(o,u,s,i);if(!p){u.visible=!1;return}c(o,u,i,s,{x:!0}),s("line.width"),f(o,u,s,"increasing"),f(o,u,s,"decreasing"),s("text"),s("hovertext"),s("whiskerwidth"),i._requestRangeslider[u.xaxis]=!0};function f(a,o,u,h){var i=u(h+".line.color");u(h+".line.width",o.line.width),u(h+".fillcolor",n.addOpacity(i,.5))}},{"../../components/color":643,"../../lib":778,"../ohlc/ohlc_defaults":1138,"../scatter/period_defaults":1207,"./attributes":958}],961:[function(e,v,M){v.exports={moduleType:"trace",name:"candlestick",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e("./attributes"),layoutAttributes:e("../box/layout_attributes"),supplyLayoutDefaults:e("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:e("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("../box/plot").plot,layerName:"boxlayer",style:e("../box/style").style,hoverPoints:e("../ohlc/hover").hoverPoints,selectPoints:e("../ohlc/select")}},{"../../plots/cartesian":841,"../box/cross_trace_calc":948,"../box/layout_attributes":953,"../box/layout_defaults":954,"../box/plot":955,"../box/style":957,"../ohlc/hover":1136,"../ohlc/select":1140,"./attributes":958,"./calc":959,"./defaults":960}],962:[function(e,v,M){var r=e("./axis_defaults"),n=e("../../plot_api/plot_template");v.exports=function(t,f,a,o,u){var h=o("a");h||(o("da"),o("a0"));var i=o("b");i||(o("db"),o("b0")),l(t,f,a,u)};function l(c,t,f,a){var o=["aaxis","baxis"];o.forEach(function(u){var h=u.charAt(0),i=c[u]||{},s=n.newContainer(t,u),p={tickfont:"x",id:h+"axis",letter:h,font:t.font,name:u,data:c[h],calendar:t.calendar,dfltColor:a,bgColor:f.paper_bgcolor,autotypenumbersDflt:f.autotypenumbers,fullLayout:f};r(i,s,p),s._categories=s._categories||[],!c[u]&&i.type!=="-"&&(c[u]={type:i.type})})}},{"../../plot_api/plot_template":817,"./axis_defaults":967}],963:[function(e,v,M){var r=e("../../lib").isArrayOrTypedArray;v.exports=function(l){return n(l,0)};function n(l,c){if(!r(l)||c>=10)return null;for(var t=1/0,f=-1/0,a=l.length,o=0;o<a;o++){var u=l[o];if(r(u)){var h=n(u,c+1);h&&(t=Math.min(h[0],t),f=Math.max(h[1],f))}else t=Math.min(u,t),f=Math.max(u,f)}return[t,f]}},{"../../lib":778}],964:[function(e,v,M){var r=e("../../plots/font_attributes"),n=e("./axis_attributes"),l=e("../../components/color/attributes"),c=r({editType:"calc"});c.family.dflt='"Open Sans", verdana, arial, sans-serif',c.size.dflt=12,c.color.dflt=l.defaultLine,v.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:n,baxis:n,font:c,color:{valType:"color",dflt:l.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":642,"../../plots/font_attributes":856,"./axis_attributes":966}],965:[function(e,v,M){var r=e("../../lib").isArrayOrTypedArray;v.exports=function(n,l,c,t){var f,a,o,u,h,i,s,p,d,y,b,m,_,T=r(c)?"a":"b",g=T==="a"?n.aaxis:n.baxis,A=g.smoothing,k=T==="a"?n.a2i:n.b2j,R=T==="a"?c:t,L=T==="a"?t:c,z=T==="a"?l.a.length:l.b.length,E=T==="a"?l.b.length:l.a.length,S=Math.floor(T==="a"?n.b2j(L):n.a2i(L)),C=T==="a"?function(te){return n.evalxy([],te,S)}:function(te){return n.evalxy([],S,te)};A&&(o=Math.max(0,Math.min(E-2,S)),u=S-o,a=T==="a"?function(te,J){return n.dxydi([],te,o,J,u)}:function(te,J){return n.dxydj([],o,te,u,J)});var D=k(R[0]),F=k(R[1]),N=D<F?1:-1,G=(F-D)*1e-8,U=N>0?Math.floor:Math.ceil,X=N>0?Math.ceil:Math.floor,I=N>0?Math.min:Math.max,B=N>0?Math.max:Math.min,j=U(D+G),H=X(F-G);s=C(D);var K=[[s]];for(f=j;f*N<H*N;f+=N)h=[],b=B(D,f),m=I(F,f+N),_=m-b,i=Math.max(0,Math.min(z-2,Math.floor(.5*(b+m)))),p=C(m),A&&(d=a(i,b-i),y=a(i,m-i),h.push([s[0]+d[0]/3*_,s[1]+d[1]/3*_]),h.push([p[0]-y[0]/3*_,p[1]-y[1]/3*_])),h.push(p),K.push(h),s=p;return K}},{"../../lib":778}],966:[function(e,v,M){var r=e("../../plots/font_attributes"),n=e("../../components/color/attributes"),l=e("../../plots/cartesian/layout_attributes"),c=e("../../plot_api/edit_types").overrideAll;e("../../constants/docs").FORMAT_LINK,e("../../constants/docs").TIME_FORMAT_LINK,v.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:r({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:l.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:r({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:c(l.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:n.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:n.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:r({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":642,"../../constants/docs":748,"../../plot_api/edit_types":810,"../../plots/cartesian/layout_attributes":842,"../../plots/font_attributes":856}],967:[function(e,v,M){var r=e("./attributes"),n=e("../../components/color").addOpacity,l=e("../../registry"),c=e("../../lib"),t=e("../../plots/cartesian/tick_value_defaults"),f=e("../../plots/cartesian/tick_label_defaults"),a=e("../../plots/cartesian/category_order_defaults"),o=e("../../plots/cartesian/set_convert"),u=e("../../plots/cartesian/axis_autotype");v.exports=function(s,p,d){var y=d.letter,b=d.font||{},m=r[y+"axis"];function _(I,B){return c.coerce(s,p,m,I,B)}function T(I,B){return c.coerce2(s,p,m,I,B)}d.name&&(p._name=d.name,p._id=d.name),_("autotypenumbers",d.autotypenumbersDflt);var g=_("type");if(g==="-"&&(d.data&&h(p,d.data),p.type==="-"?p.type="linear":g=s.type=p.type),_("smoothing"),_("cheatertype"),_("showticklabels"),_("labelprefix",y+" = "),_("labelsuffix"),_("showtickprefix"),_("showticksuffix"),_("separatethousands"),_("tickformat"),_("exponentformat"),_("minexponent"),_("showexponent"),_("categoryorder"),_("tickmode"),_("tickvals"),_("ticktext"),_("tick0"),_("dtick"),p.tickmode==="array"&&(_("arraytick0"),_("arraydtick")),_("labelpadding"),p._hovertitle=y,g==="date"){var A=l.getComponentMethod("calendars","handleDefaults");A(s,p,"calendar",d.calendar)}o(p,d.fullLayout),p.c2p=c.identity;var k=_("color",d.dfltColor),R=k===s.color?k:b.color,L=_("title.text");L&&(c.coerceFont(_,"title.font",{family:b.family,size:Math.round(b.size*1.2),color:R}),_("title.offset")),_("tickangle");var z=_("autorange",!p.isValidRange(s.range));z&&_("rangemode"),_("range"),p.cleanRange(),_("fixedrange"),t(s,p,_,g),f(s,p,_,g,d),a(s,p,_,{data:d.data,dataAttr:y});var E=T("gridcolor",n(k,.3)),S=T("gridwidth"),C=_("showgrid");C||(delete p.gridcolor,delete p.gridwidth);var D=T("startlinecolor",k),F=T("startlinewidth",S),N=_("startline",p.showgrid||!!D||!!F);N||(delete p.startlinecolor,delete p.startlinewidth);var G=T("endlinecolor",k),U=T("endlinewidth",S),X=_("endline",p.showgrid||!!G||!!U);return X||(delete p.endlinecolor,delete p.endlinewidth),C?(_("minorgridcount"),_("minorgridwidth",S),_("minorgridcolor",n(E,.06)),p.minorgridcount||(delete p.minorgridwidth,delete p.minorgridcolor)):(delete p.gridcolor,delete p.gridWidth),p.showticklabels==="none"&&(delete p.tickfont,delete p.tickangle,delete p.showexponent,delete p.exponentformat,delete p.minexponent,delete p.tickformat,delete p.showticksuffix,delete p.showtickprefix),p.showticksuffix||delete p.ticksuffix,p.showtickprefix||delete p.tickprefix,_("tickmode"),p};function h(i,s){if(i.type==="-"){var p=i._id,d=p.charAt(0),y=d+"calendar",b=i[y];i.type=u(s,b,{autotypenumbers:i.autotypenumbers})}}},{"../../components/color":643,"../../lib":778,"../../plots/cartesian/axis_autotype":829,"../../plots/cartesian/category_order_defaults":832,"../../plots/cartesian/set_convert":848,"../../plots/cartesian/tick_label_defaults":849,"../../plots/cartesian/tick_value_defaults":851,"../../registry":911,"./attributes":964}],968:[function(e,v,M){var r=e("../../plots/cartesian/axes"),n=e("../../lib").isArray1D,l=e("./cheater_basis"),c=e("./array_minmax"),t=e("./calc_gridlines"),f=e("./calc_labels"),a=e("./calc_clippath"),o=e("../heatmap/clean_2d_array"),u=e("./smooth_fill_2d_array"),h=e("../heatmap/convert_column_xyz"),i=e("./set_convert");v.exports=function(p,d){var y=r.getFromId(p,d.xaxis),b=r.getFromId(p,d.yaxis),m=d.aaxis,_=d.baxis,T=d.x,g=d.y,A=[];T&&n(T)&&A.push("x"),g&&n(g)&&A.push("y"),A.length&&h(d,m,_,"a","b",A);var k=d._a=d._a||d.a,R=d._b=d._b||d.b;T=d._x||d.x,g=d._y||d.y;var L={};if(d._cheater){var z=m.cheatertype==="index"?k.length:k,E=_.cheatertype==="index"?R.length:R;T=l(z,E,d.cheaterslope)}d._x=T=o(T),d._y=g=o(g),u(T,k,R),u(g,k,R),i(d),d.setScale();var S=c(T),C=c(g),D=.5*(S[1]-S[0]),F=.5*(S[1]+S[0]),N=.5*(C[1]-C[0]),G=.5*(C[1]+C[0]),U=1.3;return S=[F-D*U,F+D*U],C=[G-N*U,G+N*U],d._extremes[y._id]=r.findExtremes(y,S,{padded:!0}),d._extremes[b._id]=r.findExtremes(b,C,{padded:!0}),t(d,"a","b"),t(d,"b","a"),f(d,m),f(d,_),L.clipsegments=a(d._xctrl,d._yctrl,m,_),L.x=T,L.y=g,L.a=k,L.b=R,[L]}},{"../../lib":778,"../../plots/cartesian/axes":828,"../heatmap/clean_2d_array":1067,"../heatmap/convert_column_xyz":1069,"./array_minmax":963,"./calc_clippath":969,"./calc_gridlines":970,"./calc_labels":971,"./cheater_basis":973,"./set_convert":986,"./smooth_fill_2d_array":987}],969:[function(e,v,M){v.exports=function(n,l,c,t){var f,a,o,u=[],h=!!c.smoothing,i=!!t.smoothing,s=n[0].length-1,p=n.length-1;for(f=0,a=[],o=[];f<=s;f++)a[f]=n[0][f],o[f]=l[0][f];for(u.push({x:a,y:o,bicubic:h}),f=0,a=[],o=[];f<=p;f++)a[f]=n[f][s],o[f]=l[f][s];for(u.push({x:a,y:o,bicubic:i}),f=s,a=[],o=[];f>=0;f--)a[s-f]=n[p][f],o[s-f]=l[p][f];for(u.push({x:a,y:o,bicubic:h}),f=p,a=[],o=[];f>=0;f--)a[p-f]=n[f][0],o[p-f]=l[f][0];return u.push({x:a,y:o,bicubic:i}),u}},{}],970:[function(e,v,M){var r=e("../../plots/cartesian/axes"),n=e("../../lib/extend").extendFlat;v.exports=function(c,t,f){var a,o,u,h,i,s,p,d,y,b,m,_,T,g,A=c["_"+t],k=c[t+"axis"],R=k._gridlines=[],L=k._minorgridlines=[],z=k._boundarylines=[],E=c["_"+f],S=c[f+"axis"];k.tickmode==="array"&&(k.tickvals=A.slice());var C=c._xctrl,D=c._yctrl,F=C[0].length,N=C.length,G=c._a.length,U=c._b.length;r.prepTicks(k),k.tickmode==="array"&&delete k.tickvals;var X=k.smoothing?3:1;function I(j){var H,K,te,J,oe,ie,Q,V,se,re,ee,ae,fe=[],de=[],pe={};if(t==="b")for(K=c.b2j(j),te=Math.floor(Math.max(0,Math.min(U-2,K))),J=K-te,pe.length=U,pe.crossLength=G,pe.xy=function(W){return c.evalxy([],W,K)},pe.dxy=function(W,ue){return c.dxydi([],W,te,ue,J)},H=0;H<G;H++)ie=Math.min(G-2,H),Q=H-ie,V=c.evalxy([],H,K),S.smoothing&&H>0&&(se=c.dxydi([],H-1,te,0,J),fe.push(oe[0]+se[0]/3),de.push(oe[1]+se[1]/3),re=c.dxydi([],H-1,te,1,J),fe.push(V[0]-re[0]/3),de.push(V[1]-re[1]/3)),fe.push(V[0]),de.push(V[1]),oe=V;else for(H=c.a2i(j),ie=Math.floor(Math.max(0,Math.min(G-2,H))),Q=H-ie,pe.length=G,pe.crossLength=U,pe.xy=function(W){return c.evalxy([],H,W)},pe.dxy=function(W,ue){return c.dxydj([],ie,W,Q,ue)},K=0;K<U;K++)te=Math.min(U-2,K),J=K-te,V=c.evalxy([],H,K),S.smoothing&&K>0&&(ee=c.dxydj([],ie,K-1,Q,0),fe.push(oe[0]+ee[0]/3),de.push(oe[1]+ee[1]/3),ae=c.dxydj([],ie,K-1,Q,1),fe.push(V[0]-ae[0]/3),de.push(V[1]-ae[1]/3)),fe.push(V[0]),de.push(V[1]),oe=V;return pe.axisLetter=t,pe.axis=k,pe.crossAxis=S,pe.value=j,pe.constvar=f,pe.index=d,pe.x=fe,pe.y=de,pe.smoothing=S.smoothing,pe}function B(j){var H,K,te,J,oe,ie=[],Q=[],V={};if(V.length=A.length,V.crossLength=E.length,t==="b")for(te=Math.max(0,Math.min(U-2,j)),oe=Math.min(1,Math.max(0,j-te)),V.xy=function(se){return c.evalxy([],se,j)},V.dxy=function(se,re){return c.dxydi([],se,te,re,oe)},H=0;H<F;H++)ie[H]=C[j*X][H],Q[H]=D[j*X][H];else for(K=Math.max(0,Math.min(G-2,j)),J=Math.min(1,Math.max(0,j-K)),V.xy=function(se){return c.evalxy([],j,se)},V.dxy=function(se,re){return c.dxydj([],K,se,J,re)},H=0;H<N;H++)ie[H]=C[H][j*X],Q[H]=D[H][j*X];return V.axisLetter=t,V.axis=k,V.crossAxis=S,V.value=A[j],V.constvar=f,V.index=j,V.x=ie,V.y=Q,V.smoothing=S.smoothing,V}if(k.tickmode==="array"){for(h=5e-15,i=[Math.floor((A.length-1-k.arraytick0)/k.arraydtick*(1+h)),Math.ceil(-k.arraytick0/k.arraydtick/(1+h))].sort(function(j,H){return j-H}),s=i[0]-1,p=i[1]+1,d=s;d<p;d++)o=k.arraytick0+k.arraydtick*d,!(o<0||o>A.length-1)&&R.push(n(B(o),{color:k.gridcolor,width:k.gridwidth}));for(d=s;d<p;d++)if(u=k.arraytick0+k.arraydtick*d,m=Math.min(u+k.arraydtick,A.length-1),!(u<0||u>A.length-1)&&!(m<0||m>A.length-1))for(_=A[u],T=A[m],a=0;a<k.minorgridcount;a++)g=m-u,!(g<=0)&&(b=_+(T-_)*(a+1)/(k.minorgridcount+1)*(k.arraydtick/g),!(b<A[0]||b>A[A.length-1])&&L.push(n(I(b),{color:k.minorgridcolor,width:k.minorgridwidth})));k.startline&&z.push(n(B(0),{color:k.startlinecolor,width:k.startlinewidth})),k.endline&&z.push(n(B(A.length-1),{color:k.endlinecolor,width:k.endlinewidth}))}else{for(h=5e-15,i=[Math.floor((A[A.length-1]-k.tick0)/k.dtick*(1+h)),Math.ceil((A[0]-k.tick0)/k.dtick/(1+h))].sort(function(j,H){return j-H}),s=i[0],p=i[1],d=s;d<=p;d++)y=k.tick0+k.dtick*d,R.push(n(I(y),{color:k.gridcolor,width:k.gridwidth}));for(d=s-1;d<p+1;d++)for(y=k.tick0+k.dtick*d,a=0;a<k.minorgridcount;a++)b=y+k.dtick*(a+1)/(k.minorgridcount+1),!(b<A[0]||b>A[A.length-1])&&L.push(n(I(b),{color:k.minorgridcolor,width:k.minorgridwidth}));k.startline&&z.push(n(I(A[0]),{color:k.startlinecolor,width:k.startlinewidth})),k.endline&&z.push(n(I(A[A.length-1]),{color:k.endlinecolor,width:k.endlinewidth}))}}},{"../../lib/extend":768,"../../plots/cartesian/axes":828}],971:[function(e,v,M){var r=e("../../plots/cartesian/axes"),n=e("../../lib/extend").extendFlat;v.exports=function(c,t){var f,a,o,u,h,i=t._labels=[],s=t._gridlines;for(f=0;f<s.length;f++)h=s[f],["start","both"].indexOf(t.showticklabels)!==-1&&(a=r.tickText(t,h.value),n(a,{prefix:o,suffix:u,endAnchor:!0,xy:h.xy(0),dxy:h.dxy(0,0),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:f===0,isLast:f===s.length-1}),i.push(a)),["end","both"].indexOf(t.showticklabels)!==-1&&(a=r.tickText(t,h.value),n(a,{endAnchor:!1,xy:h.xy(h.crossLength-1),dxy:h.dxy(h.crossLength-2,1),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:f===0,isLast:f===s.length-1}),i.push(a))}},{"../../lib/extend":768,"../../plots/cartesian/axes":828}],972:[function(e,v,M){var r=.5;v.exports=function(l,c,t,f){var a=l[0]-c[0],o=l[1]-c[1],u=t[0]-c[0],h=t[1]-c[1],i=Math.pow(a*a+o*o,r/2),s=Math.pow(u*u+h*h,r/2),p=(s*s*a-i*i*u)*f,d=(s*s*o-i*i*h)*f,y=s*(i+s)*3,b=i*(i+s)*3;return[[c[0]+(y&&p/y),c[1]+(y&&d/y)],[c[0]-(b&&p/b),c[1]-(b&&d/b)]]}},{}],973:[function(e,v,M){var r=e("../../lib").isArrayOrTypedArray;v.exports=function(n,l,c){var t,f,a,o,u,h,i=[],s=r(n)?n.length:n,p=r(l)?l.length:l,d=r(n)?n:null,y=r(l)?l:null;d&&(a=(d.length-1)/(d[d.length-1]-d[0])/(s-1)),y&&(o=(y.length-1)/(y[y.length-1]-y[0])/(p-1));var b,m=1/0,_=-1/0;for(f=0;f<p;f++)for(i[f]=[],h=y?(y[f]-y[0])*o:f/(p-1),t=0;t<s;t++)u=d?(d[t]-d[0])*a:t/(s-1),b=u-h*c,m=Math.min(b,m),_=Math.max(b,_),i[f][t]=b;var T=1/(_-m),g=-m*T;for(f=0;f<p;f++)for(t=0;t<s;t++)i[f][t]=T*i[f][t]+g;return i}},{"../../lib":778}],974:[function(e,v,M){var r=e("./catmull_rom"),n=e("../../lib").ensureArray;function l(c,t,f){var a=-.5*f[0]+1.5*t[0],o=-.5*f[1]+1.5*t[1];return[(2*a+c[0])/3,(2*o+c[1])/3]}v.exports=function(t,f,a,o,u,h){var i,s,p,d,y,b,m,_,T,g,A=a[0].length,k=a.length,R=u?3*A-2:A,L=h?3*k-2:k;for(t=n(t,L),f=n(f,L),p=0;p<L;p++)t[p]=n(t[p],R),f[p]=n(f[p],R);for(s=0,d=0;s<k;s++,d+=h?3:1)for(y=t[d],b=f[d],m=a[s],_=o[s],i=0,p=0;i<A;i++,p+=u?3:1)y[p]=m[i],b[p]=_[i];if(u)for(s=0,d=0;s<k;s++,d+=h?3:1){for(i=1,p=3;i<A-1;i++,p+=3)T=r([a[s][i-1],o[s][i-1]],[a[s][i],o[s][i]],[a[s][i+1],o[s][i+1]],u),t[d][p-1]=T[0][0],f[d][p-1]=T[0][1],t[d][p+1]=T[1][0],f[d][p+1]=T[1][1];g=l([t[d][0],f[d][0]],[t[d][2],f[d][2]],[t[d][3],f[d][3]]),t[d][1]=g[0],f[d][1]=g[1],g=l([t[d][R-1],f[d][R-1]],[t[d][R-3],f[d][R-3]],[t[d][R-4],f[d][R-4]]),t[d][R-2]=g[0],f[d][R-2]=g[1]}if(h)for(p=0;p<R;p++){for(d=3;d<L-3;d+=3)T=r([t[d-3][p],f[d-3][p]],[t[d][p],f[d][p]],[t[d+3][p],f[d+3][p]],h),t[d-1][p]=T[0][0],f[d-1][p]=T[0][1],t[d+1][p]=T[1][0],f[d+1][p]=T[1][1];g=l([t[0][p],f[0][p]],[t[2][p],f[2][p]],[t[3][p],f[3][p]]),t[1][p]=g[0],f[1][p]=g[1],g=l([t[L-1][p],f[L-1][p]],[t[L-3][p],f[L-3][p]],[t[L-4][p],f[L-4][p]]),t[L-2][p]=g[0],f[L-2][p]=g[1]}if(u&&h)for(d=1;d<L;d+=(d+1)%3===0?2:1){for(p=3;p<R-3;p+=3)T=r([t[d][p-3],f[d][p-3]],[t[d][p],f[d][p]],[t[d][p+3],f[d][p+3]],u),t[d][p-1]=.5*(t[d][p-1]+T[0][0]),f[d][p-1]=.5*(f[d][p-1]+T[0][1]),t[d][p+1]=.5*(t[d][p+1]+T[1][0]),f[d][p+1]=.5*(f[d][p+1]+T[1][1]);g=l([t[d][0],f[d][0]],[t[d][2],f[d][2]],[t[d][3],f[d][3]]),t[d][1]=.5*(t[d][1]+g[0]),f[d][1]=.5*(f[d][1]+g[1]),g=l([t[d][R-1],f[d][R-1]],[t[d][R-3],f[d][R-3]],[t[d][R-4],f[d][R-4]]),t[d][R-2]=.5*(t[d][R-2]+g[0]),f[d][R-2]=.5*(f[d][R-2]+g[1])}return[t,f]}},{"../../lib":778,"./catmull_rom":972}],975:[function(e,v,M){v.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],976:[function(e,v,M){v.exports=function(r,n,l){return n&&l?function(c,t,f,a,o){c||(c=[]);var u,h,i,s,p,d;t*=3,f*=3;var y=a*a,b=1-a,m=b*b,_=b*a*2,T=-3*m,g=3*(m-_),A=3*(_-y),k=3*y,R=o*o,L=R*o,z=1-o,E=z*z,S=E*z;for(d=0;d<r.length;d++)p=r[d],u=T*p[f][t]+g*p[f][t+1]+A*p[f][t+2]+k*p[f][t+3],h=T*p[f+1][t]+g*p[f+1][t+1]+A*p[f+1][t+2]+k*p[f+1][t+3],i=T*p[f+2][t]+g*p[f+2][t+1]+A*p[f+2][t+2]+k*p[f+2][t+3],s=T*p[f+3][t]+g*p[f+3][t+1]+A*p[f+3][t+2]+k*p[f+3][t+3],c[d]=S*u+3*(E*o*h+z*R*i)+L*s;return c}:n?function(c,t,f,a,o){c||(c=[]);var u,h,i,s;t*=3;var p=a*a,d=1-a,y=d*d,b=d*a*2,m=-3*y,_=3*(y-b),T=3*(b-p),g=3*p,A=1-o;for(i=0;i<r.length;i++)s=r[i],u=m*s[f][t]+_*s[f][t+1]+T*s[f][t+2]+g*s[f][t+3],h=m*s[f+1][t]+_*s[f+1][t+1]+T*s[f+1][t+2]+g*s[f+1][t+3],c[i]=A*u+o*h;return c}:l?function(c,t,f,a,o){c||(c=[]);var u,h,i,s,p,d;f*=3;var y=o*o,b=y*o,m=1-o,_=m*m,T=_*m;for(p=0;p<r.length;p++)d=r[p],u=d[f][t+1]-d[f][t],h=d[f+1][t+1]-d[f+1][t],i=d[f+2][t+1]-d[f+2][t],s=d[f+3][t+1]-d[f+3][t],c[p]=T*u+3*(_*o*h+m*y*i)+b*s;return c}:function(c,t,f,a,o){c||(c=[]);var u,h,i,s,p=1-o;for(i=0;i<r.length;i++)s=r[i],u=s[f][t+1]-s[f][t],h=s[f+1][t+1]-s[f+1][t],c[i]=p*u+o*h;return c}}},{}],977:[function(e,v,M){v.exports=function(r,n,l){return n&&l?function(c,t,f,a,o){c||(c=[]);var u,h,i,s,p,d;t*=3,f*=3;var y=a*a,b=y*a,m=1-a,_=m*m,T=_*m,g=o*o,A=1-o,k=A*A,R=A*o*2,L=-3*k,z=3*(k-R),E=3*(R-g),S=3*g;for(d=0;d<r.length;d++)p=r[d],u=L*p[f][t]+z*p[f+1][t]+E*p[f+2][t]+S*p[f+3][t],h=L*p[f][t+1]+z*p[f+1][t+1]+E*p[f+2][t+1]+S*p[f+3][t+1],i=L*p[f][t+2]+z*p[f+1][t+2]+E*p[f+2][t+2]+S*p[f+3][t+2],s=L*p[f][t+3]+z*p[f+1][t+3]+E*p[f+2][t+3]+S*p[f+3][t+3],c[d]=T*u+3*(_*a*h+m*y*i)+b*s;return c}:n?function(c,t,f,a,o){c||(c=[]);var u,h,i,s,p,d;t*=3;var y=o*o,b=y*o,m=1-o,_=m*m,T=_*m;for(p=0;p<r.length;p++)d=r[p],u=d[f+1][t]-d[f][t],h=d[f+1][t+1]-d[f][t+1],i=d[f+1][t+2]-d[f][t+2],s=d[f+1][t+3]-d[f][t+3],c[p]=T*u+3*(_*o*h+m*y*i)+b*s;return c}:l?function(c,t,f,a,o){c||(c=[]);var u,h,i,s;f*=3;var p=1-a,d=o*o,y=1-o,b=y*y,m=y*o*2,_=-3*b,T=3*(b-m),g=3*(m-d),A=3*d;for(i=0;i<r.length;i++)s=r[i],u=_*s[f][t]+T*s[f+1][t]+g*s[f+2][t]+A*s[f+3][t],h=_*s[f][t+1]+T*s[f+1][t+1]+g*s[f+2][t+1]+A*s[f+3][t+1],c[i]=p*u+a*h;return c}:function(c,t,f,a,o){c||(c=[]);var u,h,i,s,p=1-a;for(i=0;i<r.length;i++)s=r[i],u=s[f+1][t]-s[f][t],h=s[f+1][t+1]-s[f][t+1],c[i]=p*u+a*h;return c}}},{}],978:[function(e,v,M){v.exports=function(r,n,l,c,t){var f=n-2,a=l-2;return c&&t?function(o,u,h){o||(o=[]);var i,s,p,d,y,b,m=Math.max(0,Math.min(Math.floor(u),f)),_=Math.max(0,Math.min(Math.floor(h),a)),T=Math.max(0,Math.min(1,u-m)),g=Math.max(0,Math.min(1,h-_));m*=3,_*=3;var A=T*T,k=A*T,R=1-T,L=R*R,z=L*R,E=g*g,S=E*g,C=1-g,D=C*C,F=D*C;for(b=0;b<r.length;b++)y=r[b],i=z*y[_][m]+3*(L*T*y[_][m+1]+R*A*y[_][m+2])+k*y[_][m+3],s=z*y[_+1][m]+3*(L*T*y[_+1][m+1]+R*A*y[_+1][m+2])+k*y[_+1][m+3],p=z*y[_+2][m]+3*(L*T*y[_+2][m+1]+R*A*y[_+2][m+2])+k*y[_+2][m+3],d=z*y[_+3][m]+3*(L*T*y[_+3][m+1]+R*A*y[_+3][m+2])+k*y[_+3][m+3],o[b]=F*i+3*(D*g*s+C*E*p)+S*d;return o}:c?function(o,u,h){o||(o=[]);var i=Math.max(0,Math.min(Math.floor(u),f)),s=Math.max(0,Math.min(Math.floor(h),a)),p=Math.max(0,Math.min(1,u-i)),d=Math.max(0,Math.min(1,h-s)),y,b,m,_,T,g;i*=3;var A=p*p,k=A*p,R=1-p,L=R*R,z=L*R,E=1-d;for(T=0;T<r.length;T++)g=r[T],y=E*g[s][i]+d*g[s+1][i],b=E*g[s][i+1]+d*g[s+1][i+1],m=E*g[s][i+2]+d*g[s+1][i+1],_=E*g[s][i+3]+d*g[s+1][i+1],o[T]=z*y+3*(L*p*b+R*A*m)+k*_;return o}:t?function(o,u,h){o||(o=[]);var i=Math.max(0,Math.min(Math.floor(u),f)),s=Math.max(0,Math.min(Math.floor(h),a)),p=Math.max(0,Math.min(1,u-i)),d=Math.max(0,Math.min(1,h-s)),y,b,m,_,T,g;s*=3;var A=d*d,k=A*d,R=1-d,L=R*R,z=L*R,E=1-p;for(T=0;T<r.length;T++)g=r[T],y=E*g[s][i]+p*g[s][i+1],b=E*g[s+1][i]+p*g[s+1][i+1],m=E*g[s+2][i]+p*g[s+2][i+1],_=E*g[s+3][i]+p*g[s+3][i+1],o[T]=z*y+3*(L*d*b+R*A*m)+k*_;return o}:function(o,u,h){o||(o=[]);var i=Math.max(0,Math.min(Math.floor(u),f)),s=Math.max(0,Math.min(Math.floor(h),a)),p=Math.max(0,Math.min(1,u-i)),d=Math.max(0,Math.min(1,h-s)),y,b,m,_,T=1-d,g=1-p;for(m=0;m<r.length;m++)_=r[m],y=g*_[s][i]+p*_[s][i+1],b=g*_[s+1][i]+p*_[s+1][i+1],o[m]=T*y+d*b;return o}}},{}],979:[function(e,v,M){var r=e("../../lib"),n=e("./xy_defaults"),l=e("./ab_defaults"),c=e("./attributes"),t=e("../../components/color/attributes");v.exports=function(a,o,u,h){function i(d,y){return r.coerce(a,o,c,d,y)}o._clipPathId="clip"+o.uid+"carpet";var s=i("color",t.defaultLine);if(r.coerceFont(i,"font"),i("carpet"),l(a,o,h,i,s),!o.a||!o.b){o.visible=!1;return}o.a.length<3&&(o.aaxis.smoothing=0),o.b.length<3&&(o.baxis.smoothing=0);var p=n(a,o,i);p||(o.visible=!1),o._cheater&&i("cheaterslope")}},{"../../components/color/attributes":642,"../../lib":778,"./ab_defaults":962,"./attributes":964,"./xy_defaults":988}],980:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),plot:e("./plot"),calc:e("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":841,"./attributes":964,"./calc":968,"./defaults":979,"./plot":985}],981:[function(e,v,M){v.exports=function(r,n){for(var l=r._fullData.length,c,t=0;t<l;t++){var f=r._fullData[t];if(f.index!==n.index&&f.type==="carpet"&&(c||(c=f),f.carpet===n.carpet))return f}return c}},{}],982:[function(e,v,M){v.exports=function(n,l,c){if(n.length===0)return"";var t,f=[],a=c?3:1;for(t=0;t<n.length;t+=a)f.push(n[t]+","+l[t]),c&&t<n.length-a&&(f.push("C"),f.push([n[t+1]+","+l[t+1],n[t+2]+","+l[t+2]+" "].join(" ")));return f.join(c?"":"L")}},{}],983:[function(e,v,M){var r=e("../../lib").isArrayOrTypedArray;v.exports=function(l,c,t){var f;for(r(l)?l.length>c.length&&(l=l.slice(0,c.length)):l=[],f=0;f<c.length;f++)l[f]=t(c[f]);return l}},{"../../lib":778}],984:[function(e,v,M){v.exports=function(n,l,c,t,f,a){var o=f[0]*n.dpdx(l),u=f[1]*n.dpdy(c),h=1,i=1;if(a){var s=Math.sqrt(f[0]*f[0]+f[1]*f[1]),p=Math.sqrt(a[0]*a[0]+a[1]*a[1]),d=(f[0]*a[0]+f[1]*a[1])/s/p;i=Math.max(0,d)}var y=Math.atan2(u,o)*180/Math.PI;return y<-90?(y+=180,h=-h):y>90&&(y-=180,h=-h),{angle:y,flip:h,p:n.c2p(t,l,c),offsetMultplier:i}}},{}],985:[function(e,v,M){var r=e("d3"),n=e("../../components/drawing"),l=e("./map_1d_array"),c=e("./makepath"),t=e("./orient_text"),f=e("../../lib/svg_text_utils"),a=e("../../lib"),o=a.strRotate,u=a.strTranslate,h=e("../../constants/alignment");v.exports=function(T,g,A,k){var R=g.xaxis,L=g.yaxis,z=T._fullLayout,E=z._clips;a.makeTraceGroups(k,A,"trace").each(function(S){var C=r.select(this),D=S[0],F=D.trace,N=F.aaxis,G=F.baxis,U=a.ensureSingle(C,"g","minorlayer"),X=a.ensureSingle(C,"g","majorlayer"),I=a.ensureSingle(C,"g","boundarylayer"),B=a.ensureSingle(C,"g","labellayer");C.style("opacity",F.opacity),s(R,L,X,N,"a",N._gridlines),s(R,L,X,G,"b",G._gridlines),s(R,L,U,N,"a",N._minorgridlines),s(R,L,U,G,"b",G._minorgridlines),s(R,L,I,N,"a-boundary",N._boundarylines),s(R,L,I,G,"b-boundary",G._boundarylines);var j=p(T,R,L,F,D,B,N._labels,"a-label"),H=p(T,R,L,F,D,B,G._labels,"b-label");d(T,B,F,D,R,L,j,H),i(F,D,E,R,L)})};function i(_,T,g,A,k){var R,L,z,E,S=g.select("#"+_._clipPathId);S.size()||(S=g.append("clipPath").classed("carpetclip",!0));var C=a.ensureSingle(S,"path","carpetboundary"),D=T.clipsegments,F=[];for(E=0;E<D.length;E++)R=D[E],L=l([],R.x,A.c2p),z=l([],R.y,k.c2p),F.push(c(L,z,R.bicubic));var N="M"+F.join("L")+"Z";S.attr("id",_._clipPathId),C.attr("d",N)}function s(_,T,g,A,k,R){var L="const-"+k+"-lines",z=g.selectAll("."+L).data(R);z.enter().append("path").classed(L,!0).style("vector-effect","non-scaling-stroke"),z.each(function(E){var S=E,C=S.x,D=S.y,F=l([],C,_.c2p),N=l([],D,T.c2p),G="M"+c(F,N,S.smoothing),U=r.select(this);U.attr("d",G).style("stroke-width",S.width).style("stroke",S.color).style("fill","none")}),z.exit().remove()}function p(_,T,g,A,k,R,L,z){var E=R.selectAll("text."+z).data(L);E.enter().append("text").classed(z,!0);var S=0,C={};return E.each(function(D,F){var N;if(D.axis.tickangle==="auto")N=t(A,T,g,D.xy,D.dxy);else{var G=(D.axis.tickangle+180)*Math.PI/180;N=t(A,T,g,D.xy,[Math.cos(G),Math.sin(G)])}F||(C={angle:N.angle,flip:N.flip});var U=(D.endAnchor?-1:1)*N.flip,X=r.select(this).attr({"text-anchor":U>0?"start":"end","data-notex":1}).call(n.font,D.font).text(D.text).call(f.convertToTspans,_),I=n.bBox(this);X.attr("transform",u(N.p[0],N.p[1])+o(N.angle)+u(D.axis.labelpadding*U,I.height*.3)),S=Math.max(S,I.width+D.axis.labelpadding)}),E.exit().remove(),C.maxExtent=S,C}function d(_,T,g,A,k,R,L,z){var E,S,C,D,F=a.aggNums(Math.min,null,g.a),N=a.aggNums(Math.max,null,g.a),G=a.aggNums(Math.min,null,g.b),U=a.aggNums(Math.max,null,g.b);E=.5*(F+N),S=G,C=g.ab2xy(E,S,!0),D=g.dxyda_rough(E,S),L.angle===void 0&&a.extendFlat(L,t(g,k,R,C,g.dxydb_rough(E,S))),m(_,T,g,A,C,D,g.aaxis,k,R,L,"a-title"),E=F,S=.5*(G+U),C=g.ab2xy(E,S,!0),D=g.dxydb_rough(E,S),z.angle===void 0&&a.extendFlat(z,t(g,k,R,C,g.dxyda_rough(E,S))),m(_,T,g,A,C,D,g.baxis,k,R,z,"b-title")}var y=h.LINE_SPACING,b=(1-h.MID_SHIFT)/y+1;function m(_,T,g,A,k,R,L,z,E,S,C){var D=[];L.title.text&&D.push(L.title.text);var F=T.selectAll("text."+C).data(D),N=S.maxExtent;F.enter().append("text").classed(C,!0),F.each(function(){var G=t(g,z,E,k,R);["start","both"].indexOf(L.showticklabels)===-1&&(N=0);var U=L.title.font.size;N+=U+L.title.offset;var X=S.angle+(S.flip<0?180:0),I=(X-G.angle+450)%360,B=I>90&&I<270,j=r.select(this);j.text(L.title.text).call(f.convertToTspans,_),B&&(N=(-f.lineCount(j)+b)*y*U-N),j.attr("transform",u(G.p[0],G.p[1])+o(G.angle)+u(0,N)).attr("text-anchor","middle").call(n.font,L.title.font)}),F.exit().remove()}},{"../../components/drawing":665,"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"./makepath":982,"./map_1d_array":983,"./orient_text":984,d3:169}],986:[function(e,v,M){var r=e("./constants"),n=e("../../lib/search").findBin,l=e("./compute_control_points"),c=e("./create_spline_evaluator"),t=e("./create_i_derivative_evaluator"),f=e("./create_j_derivative_evaluator");v.exports=function(o){var u=o._a,h=o._b,i=u.length,s=h.length,p=o.aaxis,d=o.baxis,y=u[0],b=u[i-1],m=h[0],_=h[s-1],T=u[u.length-1]-u[0],g=h[h.length-1]-h[0],A=T*r.RELATIVE_CULL_TOLERANCE,k=g*r.RELATIVE_CULL_TOLERANCE;y-=A,b+=A,m-=k,_+=k,o.isVisible=function(R,L){return R>y&&R<b&&L>m&&L<_},o.isOccluded=function(R,L){return R<y||R>b||L<m||L>_},o.setScale=function(){var R=o._x,L=o._y,z=l(o._xctrl,o._yctrl,R,L,p.smoothing,d.smoothing);o._xctrl=z[0],o._yctrl=z[1],o.evalxy=c([o._xctrl,o._yctrl],i,s,p.smoothing,d.smoothing),o.dxydi=t([o._xctrl,o._yctrl],p.smoothing,d.smoothing),o.dxydj=f([o._xctrl,o._yctrl],p.smoothing,d.smoothing)},o.i2a=function(R){var L=Math.max(0,Math.floor(R[0]),i-2),z=R[0]-L;return(1-z)*u[L]+z*u[L+1]},o.j2b=function(R){var L=Math.max(0,Math.floor(R[1]),i-2),z=R[1]-L;return(1-z)*h[L]+z*h[L+1]},o.ij2ab=function(R){return[o.i2a(R[0]),o.j2b(R[1])]},o.a2i=function(R){var L=Math.max(0,Math.min(n(R,u),i-2)),z=u[L],E=u[L+1];return Math.max(0,Math.min(i-1,L+(R-z)/(E-z)))},o.b2j=function(R){var L=Math.max(0,Math.min(n(R,h),s-2)),z=h[L],E=h[L+1];return Math.max(0,Math.min(s-1,L+(R-z)/(E-z)))},o.ab2ij=function(R){return[o.a2i(R[0]),o.b2j(R[1])]},o.i2c=function(R,L){return o.evalxy([],R,L)},o.ab2xy=function(R,L,z){if(!z&&(R<u[0]||R>u[i-1]|L<h[0]||L>h[s-1]))return[!1,!1];var E=o.a2i(R),S=o.b2j(L),C=o.evalxy([],E,S);if(z){var D=0,F=0,N=[],G,U,X,I;R<u[0]?(G=0,U=0,D=(R-u[0])/(u[1]-u[0])):R>u[i-1]?(G=i-2,U=1,D=(R-u[i-1])/(u[i-1]-u[i-2])):(G=Math.max(0,Math.min(i-2,Math.floor(E))),U=E-G),L<h[0]?(X=0,I=0,F=(L-h[0])/(h[1]-h[0])):L>h[s-1]?(X=s-2,I=1,F=(L-h[s-1])/(h[s-1]-h[s-2])):(X=Math.max(0,Math.min(s-2,Math.floor(S))),I=S-X),D&&(o.dxydi(N,G,X,U,I),C[0]+=N[0]*D,C[1]+=N[1]*D),F&&(o.dxydj(N,G,X,U,I),C[0]+=N[0]*F,C[1]+=N[1]*F)}return C},o.c2p=function(R,L,z){return[L.c2p(R[0]),z.c2p(R[1])]},o.p2x=function(R,L,z){return[L.p2c(R[0]),z.p2c(R[1])]},o.dadi=function(R){var L=Math.max(0,Math.min(u.length-2,R));return u[L+1]-u[L]},o.dbdj=function(R){var L=Math.max(0,Math.min(h.length-2,R));return h[L+1]-h[L]},o.dxyda=function(R,L,z,E){var S=o.dxydi(null,R,L,z,E),C=o.dadi(R,z);return[S[0]/C,S[1]/C]},o.dxydb=function(R,L,z,E){var S=o.dxydj(null,R,L,z,E),C=o.dbdj(L,E);return[S[0]/C,S[1]/C]},o.dxyda_rough=function(R,L,z){var E=T*(z||.1),S=o.ab2xy(R+E,L,!0),C=o.ab2xy(R-E,L,!0);return[(S[0]-C[0])*.5/E,(S[1]-C[1])*.5/E]},o.dxydb_rough=function(R,L,z){var E=g*(z||.1),S=o.ab2xy(R,L+E,!0),C=o.ab2xy(R,L-E,!0);return[(S[0]-C[0])*.5/E,(S[1]-C[1])*.5/E]},o.dpdx=function(R){return R._m},o.dpdy=function(R){return R._m}}},{"../../lib/search":798,"./compute_control_points":974,"./constants":975,"./create_i_derivative_evaluator":976,"./create_j_derivative_evaluator":977,"./create_spline_evaluator":978}],987:[function(e,v,M){var r=e("../../lib");v.exports=function(l,c,t){var f,a,o,u=[],h=[],i=l[0].length,s=l.length;function p(K,te){var J=0,oe,ie=0;return K>0&&(oe=l[te][K-1])!==void 0&&(ie++,J+=oe),K<i-1&&(oe=l[te][K+1])!==void 0&&(ie++,J+=oe),te>0&&(oe=l[te-1][K])!==void 0&&(ie++,J+=oe),te<s-1&&(oe=l[te+1][K])!==void 0&&(ie++,J+=oe),J/Math.max(1,ie)}var d=0;for(f=0;f<i;f++)for(a=0;a<s;a++)l[a][f]===void 0&&(u.push(f),h.push(a),l[a][f]=p(f,a)),d=Math.max(d,Math.abs(l[a][f]));if(!u.length)return l;var y,b,m,_,T,g,A,k,R,L,z,E=1e-5,S=0,C=100,D=0,F=u.length;do{for(S=0,o=0;o<F;o++){f=u[o],a=h[o];var N=0,G=0,U,X,I,B,j,H;f===0?(j=Math.min(i-1,2),I=c[j],B=c[1],U=l[a][j],X=l[a][1],G+=X+(X-U)*(c[0]-B)/(B-I),N++):f===i-1&&(j=Math.max(0,i-3),I=c[j],B=c[i-2],U=l[a][j],X=l[a][i-2],G+=X+(X-U)*(c[i-1]-B)/(B-I),N++),(f===0||f===i-1)&&a>0&&a<s-1&&(y=t[a+1]-t[a],b=t[a]-t[a-1],G+=(b*l[a+1][f]+y*l[a-1][f])/(b+y),N++),a===0?(H=Math.min(s-1,2),I=t[H],B=t[1],U=l[H][f],X=l[1][f],G+=X+(X-U)*(t[0]-B)/(B-I),N++):a===s-1&&(H=Math.max(0,s-3),I=t[H],B=t[s-2],U=l[H][f],X=l[s-2][f],G+=X+(X-U)*(t[s-1]-B)/(B-I),N++),(a===0||a===s-1)&&f>0&&f<i-1&&(y=c[f+1]-c[f],b=c[f]-c[f-1],G+=(b*l[a][f+1]+y*l[a][f-1])/(b+y),N++),N?G/=N:(m=c[f+1]-c[f],_=c[f]-c[f-1],T=t[a+1]-t[a],g=t[a]-t[a-1],A=m*_*(m+_),k=T*g*(T+g),G=(A*(g*l[a+1][f]+T*l[a-1][f])+k*(_*l[a][f+1]+m*l[a][f-1]))/(k*(_+m)+A*(g+T))),R=G-l[a][f],L=R/d,S+=L*L,z=N?0:.85,l[a][f]+=R*(1+z)}S=Math.sqrt(S)}while(D++<C&&S>E);return r.log("Smoother converged to",S,"after",D,"iterations"),l}},{"../../lib":778}],988:[function(e,v,M){var r=e("../../lib").isArray1D;v.exports=function(l,c,t){var f=t("x"),a=f&&f.length,o=t("y"),u=o&&o.length;if(!a&&!u)return!1;if(c._cheater=!f,(!a||r(f))&&(!u||r(o))){var h=a?f.length:1/0;u&&(h=Math.min(h,o.length)),c.a&&c.a.length&&(h=Math.min(h,c.a.length)),c.b&&c.b.length&&(h=Math.min(h,c.b.length)),c._length=h}else c._length=null;return!0}},{"../../lib":778}],989:[function(e,v,M){var r=e("../../plots/template_attributes").hovertemplateAttrs,n=e("../scattergeo/attributes"),l=e("../../components/colorscale/attributes"),c=e("../../plots/attributes"),t=e("../../components/color/attributes").defaultLine,f=e("../../lib/extend").extendFlat,a=n.marker.line;v.exports=f({locations:{valType:"data_array",editType:"calc"},locationmode:n.locationmode,z:{valType:"data_array",editType:"calc"},geojson:f({},n.geojson,{}),featureidkey:n.featureidkey,text:f({},n.text,{}),hovertext:f({},n.hovertext,{}),marker:{line:{color:f({},a.color,{dflt:t}),width:f({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:n.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:n.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:f({},c.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:r(),showlegend:f({},c.showlegend,{dflt:!1})},l("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":642,"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scattergeo/attributes":1229}],990:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../constants/numerical").BADNUM,l=e("../../components/colorscale/calc"),c=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection");function f(a){return a&&typeof a=="string"}v.exports=function(o,u){var h=u._length,i=new Array(h),s;u.geojson?s=function(m){return f(m)||r(m)}:s=f;for(var p=0;p<h;p++){var d=i[p]={},y=u.locations[p],b=u.z[p];s(y)&&r(b)?(d.loc=y,d.z=b):(d.loc=null,d.z=n),d.index=p}return c(i,u),l(o,u,{vals:u.z,containerStr:"",cLetter:"z"}),t(i,u),i}},{"../../components/colorscale/calc":651,"../../constants/numerical":753,"../scatter/arrays_to_calcdata":1186,"../scatter/calc_selection":1189,"fast-isnumeric":241}],991:[function(e,v,M){var r=e("../../lib"),n=e("../../components/colorscale/defaults"),l=e("./attributes");v.exports=function(t,f,a,o){function u(b,m){return r.coerce(t,f,l,b,m)}var h=u("locations"),i=u("z");if(!(h&&h.length&&r.isArrayOrTypedArray(i)&&i.length)){f.visible=!1;return}f._length=Math.min(h.length,i.length);var s=u("geojson"),p;(typeof s=="string"&&s!==""||r.isPlainObject(s))&&(p="geojson-id");var d=u("locationmode",p);d==="geojson-id"&&u("featureidkey"),u("text"),u("hovertext"),u("hovertemplate");var y=u("marker.line.width");y&&u("marker.line.color"),u("marker.opacity"),n(t,f,o,u,{prefix:"",cLetter:"z"}),r.coerceSelectionMarkerOpacity(f,u)}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":989}],992:[function(e,v,M){v.exports=function(n,l,c,t,f){n.location=l.location,n.z=l.z;var a=t[f];return a.fIn&&a.fIn.properties&&(n.properties=a.fIn.properties),n.ct=a.ct,n}},{}],993:[function(e,v,M){var r=e("../../plots/cartesian/axes"),n=e("./attributes"),l=e("../../lib").fillText;v.exports=function(f,a,o){var u=f.cd,h=u[0].trace,i=f.subplot,s,p,d,y,b=[a,o],m=[a+360,o];for(p=0;p<u.length;p++)if(s=u[p],y=!1,s._polygons){for(d=0;d<s._polygons.length;d++)s._polygons[d].contains(b)&&(y=!y),s._polygons[d].contains(m)&&(y=!y);if(y)break}if(!(!y||!s))return f.x0=f.x1=f.xa.c2p(s.ct),f.y0=f.y1=f.ya.c2p(s.ct),f.index=s.index,f.location=s.loc,f.z=s.z,f.zLabel=r.tickText(i.mockAxis,i.mockAxis.c2l(s.z),"hover").text,f.hovertemplate=s.hovertemplate,c(f,h,s),[f]};function c(t,f,a){if(!f.hovertemplate){var o=a.hi||f.hoverinfo,u=String(a.loc),h=o==="all"?n.hoverinfo.flags:o.split("+"),i=h.indexOf("name")!==-1,s=h.indexOf("location")!==-1,p=h.indexOf("z")!==-1,d=h.indexOf("text")!==-1,y=!i&&s,b=[];y?t.nameOverride=u:(i&&(t.nameOverride=f.name),s&&b.push(u)),p&&b.push(t.zLabel),d&&l(a,f,b),t.extraText=b.join("<br>")}}},{"../../lib":778,"../../plots/cartesian/axes":828,"./attributes":989}],994:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"choropleth",basePlotModule:e("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":860,"../heatmap/colorbar":1068,"./attributes":989,"./calc":990,"./defaults":991,"./event_data":992,"./hover":993,"./plot":995,"./select":996,"./style":997}],995:[function(e,v,M){var r=e("d3"),n=e("../../lib"),l=e("../../lib/geo_location_utils"),c=e("../../lib/topojson_utils").getTopojsonFeatures,t=e("../../plots/cartesian/autorange").findExtremes,f=e("./style").style;function a(u,h,i){var s=h.layers.backplot.select(".choroplethlayer");n.makeTraceGroups(s,i,"trace choropleth").each(function(p){var d=r.select(this),y=d.selectAll("path.choroplethlocation").data(n.identity);y.enter().append("path").classed("choroplethlocation",!0),y.exit().remove(),f(u,p)})}function o(u,h){for(var i=u[0].trace,s=h[i.geo],p=s._subplot,d=i.locationmode,y=i._length,b=d==="geojson-id"?l.extractTraceFeature(u):c(i,p.topojson),m=[],_=[],T=0;T<y;T++){var g=u[T],A=d==="geojson-id"?g.fOut:l.locationToFeature(d,g.loc,b);if(A){g.geojson=A,g.ct=A.properties.ct,g._polygons=l.feature2polygons(A);var k=l.computeBbox(A);m.push(k[0],k[2]),_.push(k[1],k[3])}else g.geojson=null}if(s.fitbounds==="geojson"&&d==="geojson-id"){var R=l.computeBbox(l.getTraceGeojson(i));m=[R[0],R[2]],_=[R[1],R[3]]}var L={padded:!0};i._extremes.lon=t(s.lonaxis._ax,m,L),i._extremes.lat=t(s.lataxis._ax,_,L)}v.exports={calcGeoJSON:o,plot:a}},{"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/topojson_utils":806,"../../plots/cartesian/autorange":827,"./style":997,d3:169}],996:[function(e,v,M){v.exports=function(n,l){var c=n.cd,t=n.xaxis,f=n.yaxis,a=[],o,u,h,i,s;if(l===!1)for(o=0;o<c.length;o++)c[o].selected=0;else for(o=0;o<c.length;o++)u=c[o],h=u.ct,h&&(i=t.c2p(h),s=f.c2p(h),l.contains([i,s],null,o,n)?(a.push({pointNumber:o,lon:h[0],lat:h[1]}),u.selected=1):u.selected=0);return a}},{}],997:[function(e,v,M){var r=e("d3"),n=e("../../components/color"),l=e("../../components/drawing"),c=e("../../components/colorscale");function t(o,u){u&&f(o,u)}function f(o,u){var h=u[0].trace,i=u[0].node3,s=i.selectAll(".choroplethlocation"),p=h.marker||{},d=p.line||{},y=c.makeColorScaleFuncFromTrace(h);s.each(function(b){r.select(this).attr("fill",y(b.z)).call(n.stroke,b.mlc||d.color).call(l.dashLine,"",b.mlw||d.width||0).style("opacity",p.opacity)}),l.selectedPointStyle(s,h,o)}function a(o,u){var h=u[0].node3,i=u[0].trace;i.selectedpoints?l.selectedPointStyle(h.selectAll(".choroplethlocation"),i,o):f(o,u)}v.exports={style:t,styleOnSelect:a}},{"../../components/color":643,"../../components/colorscale":655,"../../components/drawing":665,d3:169}],998:[function(e,v,M){var r=e("../choropleth/attributes"),n=e("../../components/colorscale/attributes"),l=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat;v.exports=t({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:t({},r.featureidkey,{}),below:{valType:"string",editType:"plot"},text:r.text,hovertext:r.hovertext,marker:{line:{color:t({},r.marker.line.color,{editType:"plot"}),width:t({},r.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:t({},r.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:t({},r.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:t({},r.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:r.hoverinfo,hovertemplate:l({},{keys:["properties"]}),showlegend:t({},c.showlegend,{dflt:!1})},n("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../choropleth/attributes":989}],999:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib"),l=e("../../components/colorscale"),c=e("../../components/drawing"),t=e("../../lib/geojson_utils").makeBlank,f=e("../../lib/geo_location_utils");function a(u){var h=u[0].trace,i=h.visible===!0&&h._length!==0,s={layout:{visibility:"none"},paint:{}},p={layout:{visibility:"none"},paint:{}},d=h._opts={fill:s,line:p,geojson:t()};if(!i)return d;var y=f.extractTraceFeature(u);if(!y)return d;var b=l.makeColorScaleFuncFromTrace(h),m=h.marker,_=m.line||{},T;n.isArrayOrTypedArray(m.opacity)&&(T=function(S){var C=S.mo;return r(C)?+n.constrain(C,0,1):0});var g;n.isArrayOrTypedArray(_.color)&&(g=function(S){return S.mlc});var A;n.isArrayOrTypedArray(_.width)&&(A=function(S){return S.mlw});for(var k=0;k<u.length;k++){var R=u[k],L=R.fOut;if(L){var z=L.properties;z.fc=b(R.z),T&&(z.mo=T(R)),g&&(z.mlc=g(R)),A&&(z.mlw=A(R)),R.ct=z.ct,R._polygons=f.feature2polygons(L)}}var E=T?{type:"identity",property:"mo"}:m.opacity;return n.extendFlat(s.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":E}),n.extendFlat(p.paint,{"line-color":g?{type:"identity",property:"mlc"}:_.color,"line-width":A?{type:"identity",property:"mlw"}:_.width,"line-opacity":E}),s.layout.visibility="visible",p.layout.visibility="visible",d.geojson={type:"FeatureCollection",features:y},o(u),d}function o(u){var h=u[0].trace,i=h._opts,s;if(h.selectedpoints){for(var p=c.makeSelectedPointStyleFns(h),d=0;d<u.length;d++){var y=u[d];y.fOut&&(y.fOut.properties.mo2=p.selectedOpacityFn(y))}s={type:"identity",property:"mo2"}}else s=n.isArrayOrTypedArray(h.marker.opacity)?{type:"identity",property:"mo"}:h.marker.opacity;return n.extendFlat(i.fill.paint,{"fill-opacity":s}),n.extendFlat(i.line.paint,{"line-opacity":s}),i}v.exports={convert:a,convertOnSelect:o}},{"../../components/colorscale":655,"../../components/drawing":665,"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/geojson_utils":772,"fast-isnumeric":241}],1e3:[function(e,v,M){var r=e("../../lib"),n=e("../../components/colorscale/defaults"),l=e("./attributes");v.exports=function(t,f,a,o){function u(d,y){return r.coerce(t,f,l,d,y)}var h=u("locations"),i=u("z"),s=u("geojson");if(!r.isArrayOrTypedArray(h)||!h.length||!r.isArrayOrTypedArray(i)||!i.length||!(typeof s=="string"&&s!==""||r.isPlainObject(s))){f.visible=!1;return}u("featureidkey"),f._length=Math.min(h.length,i.length),u("below"),u("text"),u("hovertext"),u("hovertemplate");var p=u("marker.line.width");p&&u("marker.line.color"),u("marker.opacity"),n(t,f,o,u,{prefix:"",cLetter:"z"}),r.coerceSelectionMarkerOpacity(f,u)}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":998}],1001:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../choropleth/calc"),plot:e("./plot"),hoverPoints:e("../choropleth/hover"),eventData:e("../choropleth/event_data"),selectPoints:e("../choropleth/select"),styleOnSelect:function(r,n){if(n){var l=n[0].trace;l._glTrace.updateOnSelect(n)}},getBelow:function(r,n){for(var l=n.getMapLayers(),c=l.length-2;c>=0;c--){var t=l[c].id;if(typeof t=="string"&&t.indexOf("water")===0){for(var f=c+1;f<l.length;f++)if(t=l[f].id,typeof t=="string"&&t.indexOf("plotly-")===-1)return t}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":885,"../choropleth/calc":990,"../choropleth/event_data":992,"../choropleth/hover":993,"../choropleth/select":996,"../heatmap/colorbar":1068,"./attributes":998,"./defaults":1e3,"./plot":1002}],1002:[function(e,v,M){var r=e("./convert").convert,n=e("./convert").convertOnSelect,l=e("../../plots/mapbox/constants").traceLayerPrefix;function c(f,a){this.type="choroplethmapbox",this.subplot=f,this.uid=a,this.sourceId="source-"+a,this.layerList=[["fill",l+a+"-fill"],["line",l+a+"-line"]],this.below=null}var t=c.prototype;t.update=function(f){this._update(r(f))},t.updateOnSelect=function(f){this._update(n(f))},t._update=function(f){var a=this.subplot,o=this.layerList,u=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(f.geojson),u!==this.below&&(this._removeLayers(),this._addLayers(f,u),this.below=u);for(var h=0;h<o.length;h++){var i=o[h],s=i[0],p=i[1],d=f[s];a.setOptions(p,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&a.setOptions(p,"setPaintProperty",d.paint)}},t._addLayers=function(f,a){for(var o=this.subplot,u=this.layerList,h=this.sourceId,i=0;i<u.length;i++){var s=u[i],p=s[0],d=f[p];o.addLayer({type:p,id:s[1],source:h,layout:d.layout,paint:d.paint},a)}},t._removeLayers=function(){for(var f=this.subplot.map,a=this.layerList,o=a.length-1;o>=0;o--)f.removeLayer(a[o][1])},t.dispose=function(){var f=this.subplot.map;this._removeLayers(),f.removeSource(this.sourceId)},v.exports=function(a,o){var u=o[0].trace,h=new c(a,u.uid),i=h.sourceId,s=r(o),p=h.below=a.belowLookup["trace-"+u.uid];return a.map.addSource(i,{type:"geojson",data:s.geojson}),h._addLayers(s,p),o[0].trace._glTrace=h,h}},{"../../plots/mapbox/constants":883,"./convert":999}],1003:[function(e,v,M){var r=e("../../components/colorscale/attributes"),n=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../mesh3d/attributes"),c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,f={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:n({editType:"calc"},{keys:["norm"]}),showlegend:t({},c.showlegend,{dflt:!1})};t(f,r("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var a=["opacity","lightposition","lighting"];a.forEach(function(o){f[o]=l[o]}),f.hoverinfo=t({},c.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),f.transforms=void 0,v.exports=f},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../mesh3d/attributes":1128}],1004:[function(e,v,M){var r=e("../../components/colorscale/calc");v.exports=function(l,c){for(var t=c.u,f=c.v,a=c.w,o=Math.min(c.x.length,c.y.length,c.z.length,t.length,f.length,a.length),u=-1/0,h=1/0,i=0;i<o;i++){var s=t[i],p=f[i],d=a[i],y=Math.sqrt(s*s+p*p+d*d);u=Math.max(u,y),h=Math.min(h,y)}c._len=o,c._normMax=u,r(l,c,{vals:[h,u],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651}],1005:[function(e,v,M){var r=e("gl-cone3d"),n=e("gl-cone3d").createConeMesh,l=e("../../lib").simpleMap,c=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,f=e("../../plots/gl3d/zip3");function a(d,y){this.scene=d,this.uid=y,this.mesh=null,this.data=null}var o=a.prototype;o.handlePick=function(d){if(d.object===this.mesh){var y=d.index=d.data.index,b=this.data.x[y],m=this.data.y[y],_=this.data.z[y],T=this.data.u[y],g=this.data.v[y],A=this.data.w[y];d.traceCoordinate=[b,m,_,T,g,A,Math.sqrt(T*T+g*g+A*A)];var k=this.data.hovertext||this.data.text;return Array.isArray(k)&&k[y]!==void 0?d.textLabel=k[y]:k&&(d.textLabel=k),!0}};var u={xaxis:0,yaxis:1,zaxis:2},h={tip:1,tail:0,cm:.25,center:.5},i={tip:1,tail:1,cm:.75,center:.5};function s(d,y){var b=d.fullSceneLayout,m=d.dataScale,_={};function T(R,L){var z=b[L],E=m[u[L]];return l(R,function(S){return z.d2l(S)*E})}_.vectors=f(T(y.u,"xaxis"),T(y.v,"yaxis"),T(y.w,"zaxis"),y._len),_.positions=f(T(y.x,"xaxis"),T(y.y,"yaxis"),T(y.z,"zaxis"),y._len);var g=t(y);_.colormap=c(y),_.vertexIntensityBounds=[g.min/y._normMax,g.max/y._normMax],_.coneOffset=h[y.anchor],y.sizemode==="scaled"?_.coneSize=y.sizeref||.5:_.coneSize=y.sizeref&&y._normMax?y.sizeref/y._normMax:.5;var A=r(_),k=y.lightposition;return A.lightPosition=[k.x,k.y,k.z],A.ambient=y.lighting.ambient,A.diffuse=y.lighting.diffuse,A.specular=y.lighting.specular,A.roughness=y.lighting.roughness,A.fresnel=y.lighting.fresnel,A.opacity=y.opacity,y._pad=i[y.anchor]*A.vectorScale*A.coneScale*y._normMax,A}o.update=function(d){this.data=d;var y=s(this.scene,d);this.mesh.update(y)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function p(d,y){var b=d.glplot.gl,m=s(d,y),_=n(b,m),T=new a(d,y.uid);return T.mesh=_,T.data=y,_._trace=T,d.glplot.add(_),T}v.exports=p},{"../../components/colorscale":655,"../../lib":778,"../../lib/gl_format_color":774,"../../plots/gl3d/zip3":881,"gl-cone3d":260}],1006:[function(e,v,M){var r=e("../../lib"),n=e("../../components/colorscale/defaults"),l=e("./attributes");v.exports=function(t,f,a,o){function u(b,m){return r.coerce(t,f,l,b,m)}var h=u("u"),i=u("v"),s=u("w"),p=u("x"),d=u("y"),y=u("z");if(!h||!h.length||!i||!i.length||!s||!s.length||!p||!p.length||!d||!d.length||!y||!y.length){f.visible=!1;return}u("sizeref"),u("sizemode"),u("anchor"),u("lighting.ambient"),u("lighting.diffuse"),u("lighting.specular"),u("lighting.roughness"),u("lighting.fresnel"),u("lightposition.x"),u("lightposition.y"),u("lightposition.z"),n(t,f,o,u,{prefix:"",cLetter:"c"}),u("text"),u("hovertext"),u("hovertemplate"),f._length=null}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":1003}],1007:[function(e,v,M){v.exports={moduleType:"trace",name:"cone",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),eventData:function(r,n){return r.norm=n.traceCoordinate[6],r},meta:{}}},{"../../plots/gl3d":870,"./attributes":1003,"./calc":1004,"./convert":1005,"./defaults":1006}],1008:[function(e,v,M){var r=e("../heatmap/attributes"),n=e("../scatter/attributes"),l=e("../../components/colorscale/attributes"),c=e("../../components/drawing/attributes").dash,t=e("../../plots/font_attributes"),f=e("../../lib/extend").extendFlat,a=e("../../constants/filter_ops"),o=a.COMPARISON_OPS2,u=a.INTERVAL_OPS;e("../../constants/docs").FORMAT_LINK;var h=n.line;v.exports=f({z:r.z,x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:n.xperiod0,yperiod0:n.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,text:r.text,hovertext:r.hovertext,transpose:r.transpose,xtype:r.xtype,ytype:r.ytype,zhoverformat:r.zhoverformat,hovertemplate:r.hovertemplate,hoverongaps:r.hoverongaps,connectgaps:f({},r.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",values:[].concat(o).concat(u),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:f({},h.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:c,smoothing:f({},h.smoothing,{}),editType:"plot"}},l("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../components/drawing/attributes":664,"../../constants/docs":748,"../../constants/filter_ops":749,"../../lib/extend":768,"../../plots/font_attributes":856,"../heatmap/attributes":1065,"../scatter/attributes":1187}],1009:[function(e,v,M){var r=e("../../components/colorscale"),n=e("../heatmap/calc"),l=e("./set_contours"),c=e("./end_plus");v.exports=function(f,a){var o=n(f,a),u=o[0].z;l(a,u);var h=a.contours,i=r.extractOpts(a),s;if(h.coloring==="heatmap"&&i.auto&&a.autocontour===!1){var p=h.start,d=c(h),y=h.size||1,b=Math.floor((d-p)/y)+1;isFinite(y)||(y=1,b=1);var m=p-y/2,_=m+b*y;s=[m,_]}else s=u;return r.calc(f,a,{vals:s,cLetter:"z"}),o}},{"../../components/colorscale":655,"../heatmap/calc":1066,"./end_plus":1019,"./set_contours":1027}],1010:[function(e,v,M){v.exports=function(r,n){var l=r[0],c=l.z,t;switch(n.type){case"levels":var f=Math.min(c[0][0],c[0][1]);for(t=0;t<r.length;t++){var a=r[t];a.prefixBoundary=!a.edgepaths.length&&(f>a.level||a.starts.length&&f===a.level)}break;case"constraint":if(l.prefixBoundary=!1,l.edgepaths.length)return;var o=l.x.length,u=l.y.length,h=-1/0,i=1/0;for(t=0;t<u;t++)i=Math.min(i,c[t][0]),i=Math.min(i,c[t][o-1]),h=Math.max(h,c[t][0]),h=Math.max(h,c[t][o-1]);for(t=1;t<o-1;t++)i=Math.min(i,c[0][t]),i=Math.min(i,c[u-1][t]),h=Math.max(h,c[0][t]),h=Math.max(h,c[u-1][t]);var s=n.value,p,d;switch(n._operation){case">":s>h&&(l.prefixBoundary=!0);break;case"<":(s<i||l.starts.length&&s===i)&&(l.prefixBoundary=!0);break;case"[]":p=Math.min(s[0],s[1]),d=Math.max(s[0],s[1]),(d<i||p>h||l.starts.length&&d===i)&&(l.prefixBoundary=!0);break;case"][":p=Math.min(s[0],s[1]),d=Math.max(s[0],s[1]),p<i&&d>h&&(l.prefixBoundary=!0);break}break}}},{}],1011:[function(e,v,M){var r=e("../../components/colorscale"),n=e("./make_color_map"),l=e("./end_plus");function c(t,f,a){var o=f.contours,u=f.line,h=o.size||1,i=o.coloring,s=n(f,{isColorbar:!0});if(i==="heatmap"){var p=r.extractOpts(f);a._fillgradient=p.reversescale?r.flipScale(p.colorscale):p.colorscale,a._zrange=[p.min,p.max]}else i==="fill"&&(a._fillcolor=s);a._line={color:i==="lines"?s:u.color,width:o.showlines!==!1?u.width:0,dash:u.dash},a._levels={start:o.start,end:l(o),size:h}}v.exports={min:"zmin",max:"zmax",calc:c}},{"../../components/colorscale":655,"./end_plus":1019,"./make_color_map":1024}],1012:[function(e,v,M){v.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],1013:[function(e,v,M){var r=e("fast-isnumeric"),n=e("./label_defaults"),l=e("../../components/color"),c=l.addOpacity,t=l.opacity,f=e("../../constants/filter_ops"),a=f.CONSTRAINT_REDUCTION,o=f.COMPARISON_OPS2;v.exports=function(i,s,p,d,y,b){var m=s.contours,_,T,g,A=p("contours.operation");if(m._operation=a[A],u(p,m),A==="="?_=m.showlines=!0:(_=p("contours.showlines"),g=p("fillcolor",c((i.line||{}).color||y,.5))),_){var k=g&&t(g)?c(s.fillcolor,1):y;T=p("line.color",k),p("line.width",2),p("line.dash")}p("line.smoothing"),n(p,d,T,b)};function u(h,i){var s;o.indexOf(i.operation)===-1?(h("contours.value",[0,1]),Array.isArray(i.value)?i.value.length>2?i.value=i.value.slice(2):i.length===0?i.value=[0,1]:i.length<2?(s=parseFloat(i.value[0]),i.value=[s,s+1]):i.value=[parseFloat(i.value[0]),parseFloat(i.value[1])]:r(i.value)&&(s=parseFloat(i.value),i.value=[s,s+1])):(h("contours.value",0),r(i.value)||(Array.isArray(i.value)?i.value=parseFloat(i.value[0]):i.value=0))}},{"../../components/color":643,"../../constants/filter_ops":749,"./label_defaults":1023,"fast-isnumeric":241}],1014:[function(e,v,M){var r=e("../../constants/filter_ops"),n=e("fast-isnumeric");v.exports={"[]":c("[]"),"][":c("]["),">":t(">"),"<":t("<"),"=":t("=")};function l(f,a){var o=Array.isArray(a),u;function h(i){return n(i)?+i:null}return r.COMPARISON_OPS2.indexOf(f)!==-1?u=h(o?a[0]:a):r.INTERVAL_OPS.indexOf(f)!==-1?u=o?[h(a[0]),h(a[1])]:[h(a),h(a)]:r.SET_OPS.indexOf(f)!==-1&&(u=o?a.map(h):[h(a)]),u}function c(f){return function(a){a=l(f,a);var o=Math.min(a[0],a[1]),u=Math.max(a[0],a[1]);return{start:o,end:u,size:u-o}}}function t(f){return function(a){return a=l(f,a),{start:a,end:1/0,size:1/0}}}},{"../../constants/filter_ops":749,"fast-isnumeric":241}],1015:[function(e,v,M){v.exports=function(n,l,c,t){var f=t("contours.start"),a=t("contours.end"),o=f===!1||a===!1,u=c("contours.size"),h;o?h=l.autocontour=!0:h=c("autocontour",!1),(h||!u)&&c("ncontours")}},{}],1016:[function(e,v,M){var r=e("../../lib");v.exports=function(l,c){var t,f,a,o=function(i){return i.reverse()},u=function(i){return i};switch(c){case"=":case"<":return l;case">":for(l.length!==1&&r.warn("Contour data invalid for the specified inequality operation."),f=l[0],t=0;t<f.edgepaths.length;t++)f.edgepaths[t]=o(f.edgepaths[t]);for(t=0;t<f.paths.length;t++)f.paths[t]=o(f.paths[t]);for(t=0;t<f.starts.length;t++)f.starts[t]=o(f.starts[t]);return l;case"][":var h=o;o=u,u=h;case"[]":for(l.length!==2&&r.warn("Contour data invalid for the specified inequality range operation."),f=n(l[0]),a=n(l[1]),t=0;t<f.edgepaths.length;t++)f.edgepaths[t]=o(f.edgepaths[t]);for(t=0;t<f.paths.length;t++)f.paths[t]=o(f.paths[t]);for(t=0;t<f.starts.length;t++)f.starts[t]=o(f.starts[t]);for(;a.edgepaths.length;)f.edgepaths.push(u(a.edgepaths.shift()));for(;a.paths.length;)f.paths.push(u(a.paths.shift()));for(;a.starts.length;)f.starts.push(u(a.starts.shift()));return[f]}};function n(l){return r.extendFlat({},l,{edgepaths:r.extendDeep([],l.edgepaths),paths:r.extendDeep([],l.paths),starts:r.extendDeep([],l.starts)})}},{"../../lib":778}],1017:[function(e,v,M){var r=e("../../lib"),n=e("../heatmap/xyz_defaults"),l=e("../scatter/period_defaults"),c=e("./constraint_defaults"),t=e("./contours_defaults"),f=e("./style_defaults"),a=e("./attributes");v.exports=function(u,h,i,s){function p(m,_){return r.coerce(u,h,a,m,_)}function d(m){return r.coerce2(u,h,a,m)}var y=n(u,h,p,s);if(!y){h.visible=!1;return}l(u,h,s,p),p("text"),p("hovertext"),p("hovertemplate"),p("hoverongaps");var b=p("contours.type")==="constraint";p("connectgaps",r.isArray1D(h.z)),b?c(u,h,p,s,i):(t(u,h,p,d),f(u,h,p,s))}},{"../../lib":778,"../heatmap/xyz_defaults":1079,"../scatter/period_defaults":1207,"./attributes":1008,"./constraint_defaults":1013,"./contours_defaults":1015,"./style_defaults":1029}],1018:[function(e,v,M){var r=e("../../lib"),n=e("./constraint_mapping"),l=e("./end_plus");v.exports=function(t,f,a){for(var o=t.type==="constraint"?n[t._operation](t.value):t,u=o.size,h=[],i=l(o),s=a.trace._carpetTrace,p=s?{xaxis:s.aaxis,yaxis:s.baxis,x:a.a,y:a.b}:{xaxis:f.xaxis,yaxis:f.yaxis,x:a.x,y:a.y},d=o.start;d<i;d+=u)if(h.push(r.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:a.z,smoothing:a.trace.line.smoothing},p)),h.length>1e3){r.warn("Too many contours, clipping at 1000",t);break}return h}},{"../../lib":778,"./constraint_mapping":1014,"./end_plus":1019}],1019:[function(e,v,M){v.exports=function(n){return n.end+n.size/1e6}},{}],1020:[function(e,v,M){var r=e("../../lib"),n=e("./constants");v.exports=function(u,h,i){var s,p,d,y,b;for(h=h||.01,i=i||.01,d=0;d<u.length;d++){for(y=u[d],b=0;b<y.starts.length;b++)p=y.starts[b],t(y,p,"edge",h,i);for(s=0;Object.keys(y.crossings).length&&s<1e4;)s++,p=Object.keys(y.crossings)[0].split(",").map(Number),t(y,p,void 0,h,i);s===1e4&&r.log("Infinite loop in contour?")}};function l(o,u,h,i){return Math.abs(o[0]-u[0])<h&&Math.abs(o[1]-u[1])<i}function c(o,u){var h=o[2]-u[2],i=o[3]-u[3];return Math.sqrt(h*h+i*i)}function t(o,u,h,i,s){var p=u.join(","),d=o.crossings[p],y=f(d,h,u),b=[a(o,u,[-y[0],-y[1]])],m=o.z.length,_=o.z[0].length,T=u.slice(),g=y.slice(),A;for(A=0;A<1e4;A++){if(d>20?(d=n.CHOOSESADDLE[d][(y[0]||y[1])<0?0:1],o.crossings[p]=n.SADDLEREMAINDER[d]):delete o.crossings[p],y=n.NEWDELTA[d],!y){r.log("Found bad marching index:",d,u,o.level);break}b.push(a(o,u,y)),u[0]+=y[0],u[1]+=y[1],p=u.join(","),l(b[b.length-1],b[b.length-2],i,s)&&b.pop();var k=y[0]&&(u[0]<0||u[0]>_-2)||y[1]&&(u[1]<0||u[1]>m-2),R=u[0]===T[0]&&u[1]===T[1]&&y[0]===g[0]&&y[1]===g[1];if(R||h&&k)break;d=o.crossings[p]}A===1e4&&r.log("Infinite loop in contour?");var L=l(b[0],b[b.length-1],i,s),z=0,E=.2*o.smoothing,S=[],C=0,D,F,N,G,U,X,I,B,j,H,K;for(A=1;A<b.length;A++)I=c(b[A],b[A-1]),z+=I,S.push(I);var te=z/S.length*E;function J(Q){return b[Q%b.length]}for(A=b.length-2;A>=C;A--)if(D=S[A],D<te){for(N=0,F=A-1;F>=C&&D+S[F]<te;F--)D+=S[F];if(L&&A===b.length-2)for(N=0;N<F&&D+S[N]<te;N++)D+=S[N];U=A-F+N+1,X=Math.floor((A+F+N+2)/2),!L&&A===b.length-2?G=b[b.length-1]:!L&&F===-1?G=b[0]:U%2?G=J(X):G=[(J(X)[0]+J(X+1)[0])/2,(J(X)[1]+J(X+1)[1])/2],b.splice(F+1,A-F+1,G),A=F+1,N&&(C=N),L&&(A===b.length-2?b[N]=b[b.length-1]:A===0&&(b[b.length-1]=b[0]))}for(b.splice(0,C),A=0;A<b.length;A++)b[A].length=2;if(!(b.length<2))if(L)b.pop(),o.paths.push(b);else{h||r.log("Unclosed interior contour?",o.level,T.join(","),b.join("L"));var oe=!1;for(B=0;B<o.edgepaths.length;B++)if(H=o.edgepaths[B],!oe&&l(H[0],b[b.length-1],i,s)){b.pop(),oe=!0;var ie=!1;for(j=0;j<o.edgepaths.length;j++)if(K=o.edgepaths[j],l(K[K.length-1],b[0],i,s)){ie=!0,b.shift(),o.edgepaths.splice(B,1),j===B?o.paths.push(b.concat(K)):(j>B&&j--,o.edgepaths[j]=K.concat(b,H));break}ie||(o.edgepaths[B]=b.concat(H))}for(B=0;B<o.edgepaths.length&&!oe;B++)H=o.edgepaths[B],l(H[H.length-1],b[0],i,s)&&(b.shift(),o.edgepaths[B]=H.concat(b),oe=!0);oe||o.edgepaths.push(b)}}function f(o,u,h){var i=0,s=0;return o>20&&u?o===208||o===1114?i=h[0]===0?1:-1:s=h[1]===0?1:-1:n.BOTTOMSTART.indexOf(o)!==-1?s=1:n.LEFTSTART.indexOf(o)!==-1?i=1:n.TOPSTART.indexOf(o)!==-1?s=-1:i=-1,[i,s]}function a(o,u,h){var i=u[0]+Math.max(h[0],0),s=u[1]+Math.max(h[1],0),p=o.z[s][i],d=o.xaxis,y=o.yaxis;if(h[1]){var b=(o.level-p)/(o.z[s][i+1]-p);return[d.c2p((1-b)*o.x[i]+b*o.x[i+1],!0),y.c2p(o.y[s],!0),i+b,s]}else{var m=(o.level-p)/(o.z[s+1][i]-p);return[d.c2p(o.x[i],!0),y.c2p((1-m)*o.y[s]+m*o.y[s+1],!0),i,s+m]}}},{"../../lib":778,"./constants":1012}],1021:[function(e,v,M){var r=e("../../components/color"),n=e("../heatmap/hover");v.exports=function(c,t,f,a,o){var u=n(c,t,f,a,o,!0);return u&&u.forEach(function(h){var i=h.trace;i.contours.type==="constraint"&&(i.fillcolor&&r.opacity(i.fillcolor)?h.color=r.addOpacity(i.fillcolor,1):i.contours.showlines&&r.opacity(i.line.color)&&(h.color=r.addOpacity(i.line.color,1)))}),u}},{"../../components/color":643,"../heatmap/hover":1072}],1022:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot").plot,style:e("./style"),colorbar:e("./colorbar"),hoverPoints:e("./hover"),moduleType:"trace",name:"contour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":841,"./attributes":1008,"./calc":1009,"./colorbar":1011,"./defaults":1017,"./hover":1021,"./plot":1026,"./style":1028}],1023:[function(e,v,M){var r=e("../../lib");v.exports=function(l,c,t,f){f||(f={});var a=l("contours.showlabels");if(a){var o=c.font;r.coerceFont(l,"contours.labelfont",{family:o.family,size:o.size,color:t}),l("contours.labelformat")}f.hasHover!==!1&&l("zhoverformat")}},{"../../lib":778}],1024:[function(e,v,M){var r=e("d3"),n=e("../../components/colorscale"),l=e("./end_plus");v.exports=function(t){var f=t.contours,a=f.start,o=l(f),u=f.size||1,h=Math.floor((o-a)/u)+1,i=f.coloring==="lines"?0:1,s=n.extractOpts(t);isFinite(u)||(u=1,h=1);var p=s.reversescale?n.flipScale(s.colorscale):s.colorscale,d=p.length,y=new Array(d),b=new Array(d),m,_;if(f.coloring==="heatmap"){var T=s.min,g=s.max;for(_=0;_<d;_++)m=p[_],y[_]=m[0]*(g-T)+T,b[_]=m[1];var A=r.extent([T,g,f.start,f.start+u*(h-1)]),k=A[T<g?0:1],R=A[T<g?1:0];k!==T&&(y.splice(0,0,k),b.splice(0,0,b[0])),R!==g&&(y.push(R),b.push(b[b.length-1]))}else for(_=0;_<d;_++)m=p[_],y[_]=(m[0]*(h+i-1)-i/2)*u+a,b[_]=m[1];return n.makeColorScaleFunc({domain:y,range:b},{noNumericCheck:!0})}},{"../../components/colorscale":655,"./end_plus":1019,d3:169}],1025:[function(e,v,M){var r=e("./constants");v.exports=function(c){var t=c[0].z,f=t.length,a=t[0].length,o=f===2||a===2,u,h,i,s,p,d,y,b,m;for(h=0;h<f-1;h++)for(s=[],h===0&&(s=s.concat(r.BOTTOMSTART)),h===f-2&&(s=s.concat(r.TOPSTART)),u=0;u<a-1;u++)for(i=s.slice(),u===0&&(i=i.concat(r.LEFTSTART)),u===a-2&&(i=i.concat(r.RIGHTSTART)),p=u+","+h,d=[[t[h][u],t[h][u+1]],[t[h+1][u],t[h+1][u+1]]],m=0;m<c.length;m++)b=c[m],y=n(b.level,d),y&&(b.crossings[p]=y,i.indexOf(y)!==-1&&(b.starts.push([u,h]),o&&i.indexOf(y,i.indexOf(y)+1)!==-1&&b.starts.push([u,h])))};function n(l,c){var t=(c[0][0]>l?0:1)+(c[0][1]>l?0:2)+(c[1][1]>l?0:4)+(c[1][0]>l?0:8);if(t===5||t===10){var f=(c[0][0]+c[0][1]+c[1][0]+c[1][1])/4;return l>f?t===5?713:1114:t===5?104:208}return t===15?0:t}},{"./constants":1012}],1026:[function(e,v,M){var r=e("d3"),n=e("../../lib"),l=e("../../components/drawing"),c=e("../../components/colorscale"),t=e("../../lib/svg_text_utils"),f=e("../../plots/cartesian/axes"),a=e("../../plots/cartesian/set_convert"),o=e("../heatmap/plot"),u=e("./make_crossings"),h=e("./find_all_paths"),i=e("./empty_pathinfo"),s=e("./convert_to_constraints"),p=e("./close_boundaries"),d=e("./constants"),y=d.LABELOPTIMIZER;M.plot=function(L,z,E,S){var C=z.xaxis,D=z.yaxis;n.makeTraceGroups(S,E,"contour").each(function(F){var N=r.select(this),G=F[0],U=G.trace,X=G.x,I=G.y,B=U.contours,j=i(B,z,G),H=n.ensureSingle(N,"g","heatmapcoloring"),K=[];B.coloring==="heatmap"&&(K=[F]),o(L,z,K,H),u(j),h(j);var te=C.c2p(X[0],!0),J=C.c2p(X[X.length-1],!0),oe=D.c2p(I[0],!0),ie=D.c2p(I[I.length-1],!0),Q=[[te,ie],[J,ie],[J,oe],[te,oe]],V=j;B.type==="constraint"&&(V=s(j,B._operation)),b(N,Q,B),m(N,V,Q,B),T(N,j,L,G,B),A(N,z,L,G,Q)})};function b(R,L,z){var E=n.ensureSingle(R,"g","contourbg"),S=E.selectAll("path").data(z.coloring==="fill"?[0]:[]);S.enter().append("path"),S.exit().remove(),S.attr("d","M"+L.join("L")+"Z").style("stroke","none")}function m(R,L,z,E){var S=E.coloring==="fill"||E.type==="constraint"&&E._operation!=="=",C="M"+z.join("L")+"Z";S&&p(L,E);var D=n.ensureSingle(R,"g","contourfill"),F=D.selectAll("path").data(S?L:[]);F.enter().append("path"),F.exit().remove(),F.each(function(N){var G=(N.prefixBoundary?C:"")+_(N,z);G?r.select(this).attr("d",G).style("stroke","none"):r.select(this).remove()})}function _(R,L){var z="",E=0,S=R.edgepaths.map(function(te,J){return J}),C=!0,D,F,N,G,U,X;function I(te){return Math.abs(te[1]-L[0][1])<.01}function B(te){return Math.abs(te[1]-L[2][1])<.01}function j(te){return Math.abs(te[0]-L[0][0])<.01}function H(te){return Math.abs(te[0]-L[2][0])<.01}for(;S.length;){for(X=l.smoothopen(R.edgepaths[E],R.smoothing),z+=C?X:X.replace(/^M/,"L"),S.splice(S.indexOf(E),1),D=R.edgepaths[E][R.edgepaths[E].length-1],G=-1,N=0;N<4;N++){if(!D){n.log("Missing end?",E,R);break}for(I(D)&&!H(D)?F=L[1]:j(D)?F=L[0]:B(D)?F=L[3]:H(D)&&(F=L[2]),U=0;U<R.edgepaths.length;U++){var K=R.edgepaths[U][0];Math.abs(D[0]-F[0])<.01?Math.abs(D[0]-K[0])<.01&&(K[1]-D[1])*(F[1]-K[1])>=0&&(F=K,G=U):Math.abs(D[1]-F[1])<.01?Math.abs(D[1]-K[1])<.01&&(K[0]-D[0])*(F[0]-K[0])>=0&&(F=K,G=U):n.log("endpt to newendpt is not vert. or horz.",D,F,K)}if(D=F,G>=0)break;z+="L"+F}if(G===R.edgepaths.length){n.log("unclosed perimeter path");break}E=G,C=S.indexOf(E)===-1,C&&(E=S[0],z+="Z")}for(E=0;E<R.paths.length;E++)z+=l.smoothclosed(R.paths[E],R.smoothing);return z}function T(R,L,z,E,S){var C=n.ensureSingle(R,"g","contourlines"),D=S.showlines!==!1,F=S.showlabels,N=D&&F,G=M.createLines(C,D||F,L),U=M.createLineClip(C,N,z,E.trace.uid),X=R.selectAll("g.contourlabels").data(F?[0]:[]);if(X.exit().remove(),X.enter().append("g").classed("contourlabels",!0),F){var I=[],B=[];n.clearLocationCache();var j=M.labelFormatter(z,E),H=l.tester.append("text").attr("data-notex",1).call(l.font,S.labelfont),K=L[0].xaxis,te=L[0].yaxis,J=K._length,oe=te._length,ie=K.range,Q=te.range,V=n.aggNums(Math.min,null,E.x),se=n.aggNums(Math.max,null,E.x),re=n.aggNums(Math.min,null,E.y),ee=n.aggNums(Math.max,null,E.y),ae=Math.max(K.c2p(V,!0),0),fe=Math.min(K.c2p(se,!0),J),de=Math.max(te.c2p(ee,!0),0),pe=Math.min(te.c2p(re,!0),oe),W={};ie[0]<ie[1]?(W.left=ae,W.right=fe):(W.left=fe,W.right=ae),Q[0]<Q[1]?(W.top=de,W.bottom=pe):(W.top=pe,W.bottom=de),W.middle=(W.top+W.bottom)/2,W.center=(W.left+W.right)/2,I.push([[W.left,W.top],[W.right,W.top],[W.right,W.bottom],[W.left,W.bottom]]);var ue=Math.sqrt(J*J+oe*oe),me=d.LABELDISTANCE*ue/Math.max(1,L.length/d.LABELINCREASE);G.each(function(be){var ke=M.calcTextOpts(be.level,j,H,z);r.select(this).selectAll("path").each(function(){var Pe=this,je=n.getVisibleSegment(Pe,W,ke.height/2);if(je&&!(je.len<(ke.width+ke.height)*d.LABELMIN))for(var ze=Math.min(Math.ceil(je.len/me),d.LABELMAX),Ze=0;Ze<ze;Ze++){var tt=M.findBestTextLocation(Pe,je,ke,B,W);if(!tt)break;M.addLabelData(tt,ke,B,I)}})}),H.remove(),M.drawLabels(X,B,z,U,N?I:null)}F&&!D&&G.remove()}M.createLines=function(R,L,z){var E=z[0].smoothing,S=R.selectAll("g.contourlevel").data(L?z:[]);if(S.exit().remove(),S.enter().append("g").classed("contourlevel",!0),L){var C=S.selectAll("path.openline").data(function(F){return F.pedgepaths||F.edgepaths});C.exit().remove(),C.enter().append("path").classed("openline",!0),C.attr("d",function(F){return l.smoothopen(F,E)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var D=S.selectAll("path.closedline").data(function(F){return F.ppaths||F.paths});D.exit().remove(),D.enter().append("path").classed("closedline",!0),D.attr("d",function(F){return l.smoothclosed(F,E)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return S},M.createLineClip=function(R,L,z,E){var S=z._fullLayout._clips,C=L?"clipline"+E:null,D=S.selectAll("#"+C).data(L?[0]:[]);return D.exit().remove(),D.enter().append("clipPath").classed("contourlineclip",!0).attr("id",C),l.setClipUrl(R,C,z),D},M.labelFormatter=function(R,L){var z=R._fullLayout,E=L.trace,S=E.contours,C={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(S.labelformat)C.tickformat=S.labelformat,a(C,z);else{var D=c.extractOpts(E);if(D&&D.colorbar&&D.colorbar._axis)C=D.colorbar._axis;else{if(S.type==="constraint"){var F=S.value;Array.isArray(F)?C.range=[F[0],F[F.length-1]]:C.range=[F,F]}else C.range=[S.start,S.end],C.nticks=(S.end-S.start)/S.size;C.range[0]===C.range[1]&&(C.range[1]+=C.range[0]||1),C.nticks||(C.nticks=1e3),a(C,z),f.prepTicks(C),C._tmin=null,C._tmax=null}}return function(N){return f.tickText(C,N).text}},M.calcTextOpts=function(R,L,z,E){var S=L(R);z.text(S).call(t.convertToTspans,E);var C=z.node(),D=l.bBox(C,!0);return{text:S,width:D.width,height:D.height,fontSize:+C.style["font-size"].replace("px",""),level:R,dy:(D.top+D.bottom)/2}},M.findBestTextLocation=function(R,L,z,E,S){var C=z.width,D,F,N,G,U;L.isClosed?(F=L.len/y.INITIALSEARCHPOINTS,D=L.min+F/2,N=L.max):(F=(L.len-C)/(y.INITIALSEARCHPOINTS+1),D=L.min+F+C/2,N=L.max-(F+C)/2);for(var X=1/0,I=0;I<y.ITERATIONS;I++){for(var B=D;B<N;B+=F){var j=n.getTextLocation(R,L.total,B,C),H=g(j,z,E,S);H<X&&(X=H,U=j,G=B)}if(X>y.MAXCOST*2)break;I&&(F/=2),D=G-F/2,N=D+F*1.5}if(X<=y.MAXCOST)return U};function g(R,L,z,E){var S=L.width/2,C=L.height/2,D=R.x,F=R.y,N=R.theta,G=Math.cos(N)*S,U=Math.sin(N)*S,X=(D>E.center?E.right-D:D-E.left)/(G+Math.abs(Math.sin(N)*C)),I=(F>E.middle?E.bottom-F:F-E.top)/(Math.abs(U)+Math.cos(N)*C);if(X<1||I<1)return 1/0;var B=y.EDGECOST*(1/(X-1)+1/(I-1));B+=y.ANGLECOST*N*N;for(var j=D-G,H=F-U,K=D+G,te=F+U,J=0;J<z.length;J++){var oe=z[J],ie=Math.cos(oe.theta)*oe.width/2,Q=Math.sin(oe.theta)*oe.width/2,V=n.segmentDistance(j,H,K,te,oe.x-ie,oe.y-Q,oe.x+ie,oe.y+Q)*2/(L.height+oe.height),se=oe.level===L.level,re=se?y.SAMELEVELDISTANCE:1;if(V<=re)return 1/0;var ee=y.NEIGHBORCOST*(se?y.SAMELEVELFACTOR:1);B+=ee/(V-re)}return B}M.addLabelData=function(R,L,z,E){var S=L.fontSize,C=L.width+S/3,D=Math.max(0,L.height-S/3),F=R.x,N=R.y,G=R.theta,U=Math.sin(G),X=Math.cos(G),I=function(j,H){return[F+j*X-H*U,N+j*U+H*X]},B=[I(-C/2,-D/2),I(-C/2,D/2),I(C/2,D/2),I(C/2,-D/2)];z.push({text:L.text,x:F,y:N,dy:L.dy,theta:G,level:L.level,width:C,height:D}),E.push(B)},M.drawLabels=function(R,L,z,E,S){var C=R.selectAll("text").data(L,function(G){return G.text+","+G.x+","+G.y+","+G.theta});if(C.exit().remove(),C.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(G){var U=G.x+Math.sin(G.theta)*G.dy,X=G.y-Math.cos(G.theta)*G.dy;r.select(this).text(G.text).attr({x:U,y:X,transform:"rotate("+180*G.theta/Math.PI+" "+U+" "+X+")"}).call(t.convertToTspans,z)}),S){for(var D="",F=0;F<S.length;F++)D+="M"+S[F].join("L")+"Z";var N=n.ensureSingle(E,"path","");N.attr("d",D)}};function A(R,L,z,E,S){var C=E.trace,D=z._fullLayout._clips,F="clip"+C.uid,N=D.selectAll("#"+F).data(C.connectgaps?[]:[0]);if(N.enter().append("clipPath").classed("contourclip",!0).attr("id",F),N.exit().remove(),C.connectgaps===!1){var G={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:L.xaxis,yaxis:L.yaxis,x:E.x,y:E.y,z:k(E),smoothing:0};u([G]),h([G]),p([G],{type:"levels"});var U=n.ensureSingle(N,"path","");U.attr("d",(G.prefixBoundary?"M"+S.join("L")+"Z":"")+_(G,S))}else F=null;l.setClipUrl(R,F,z)}function k(R){var L=R.trace._emptypoints,z=[],E=R.z.length,S=R.z[0].length,C,D=[],F;for(C=0;C<S;C++)D.push(1);for(C=0;C<E;C++)z.push(D.slice());for(C=0;C<L.length;C++)F=L[C],z[F[0]][F[1]]=0;return R.zmask=z,z}},{"../../components/colorscale":655,"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../plots/cartesian/set_convert":848,"../heatmap/plot":1076,"./close_boundaries":1010,"./constants":1012,"./convert_to_constraints":1016,"./empty_pathinfo":1018,"./find_all_paths":1020,"./make_crossings":1025,d3:169}],1027:[function(e,v,M){var r=e("../../plots/cartesian/axes"),n=e("../../lib");v.exports=function(t,f){var a=t.contours;if(t.autocontour){var o=t.zmin,u=t.zmax;(t.zauto||o===void 0)&&(o=n.aggNums(Math.min,null,f)),(t.zauto||u===void 0)&&(u=n.aggNums(Math.max,null,f));var h=l(o,u,t.ncontours);a.size=h.dtick,a.start=r.tickFirst(h),h.range.reverse(),a.end=r.tickFirst(h),a.start===o&&(a.start+=a.size),a.end===u&&(a.end-=a.size),a.start>a.end&&(a.start=a.end=(a.start+a.end)/2),t._input.contours||(t._input.contours={}),n.extendFlat(t._input.contours,{start:a.start,end:a.end,size:a.size}),t._input.autocontour=!0}else if(a.type!=="constraint"){var i=a.start,s=a.end,p=t._input.contours;if(i>s&&(a.start=p.start=s,s=a.end=p.end=i,i=a.start),!(a.size>0)){var d;i===s?d=1:d=l(i,s,t.ncontours).dtick,p.size=a.size=d}}};function l(c,t,f){var a={type:"linear",range:[c,t]};return r.autoTicks(a,(t-c)/(f||15)),a}},{"../../lib":778,"../../plots/cartesian/axes":828}],1028:[function(e,v,M){var r=e("d3"),n=e("../../components/drawing"),l=e("../heatmap/style"),c=e("./make_color_map");v.exports=function(f){var a=r.select(f).selectAll("g.contour");a.style("opacity",function(o){return o[0].trace.opacity}),a.each(function(o){var u=r.select(this),h=o[0].trace,i=h.contours,s=h.line,p=i.size||1,d=i.start,y=i.type==="constraint",b=!y&&i.coloring==="lines",m=!y&&i.coloring==="fill",_=b||m?c(h):null;u.selectAll("g.contourlevel").each(function(A){r.select(this).selectAll("path").call(n.lineGroupStyle,s.width,b?_(A.level):s.color,s.dash)});var T=i.labelfont;if(u.selectAll("g.contourlabels text").each(function(A){n.font(r.select(this),{family:T.family,size:T.size,color:T.color||(b?_(A.level):s.color)})}),y)u.selectAll("g.contourfill path").style("fill",h.fillcolor);else if(m){var g;u.selectAll("g.contourfill path").style("fill",function(A){return g===void 0&&(g=A.level),_(A.level+.5*p)}),g===void 0&&(g=d),u.selectAll("g.contourbg path").style("fill",_(g-.5*p))}}),l(f)}},{"../../components/drawing":665,"../heatmap/style":1077,"./make_color_map":1024,d3:169}],1029:[function(e,v,M){var r=e("../../components/colorscale/defaults"),n=e("./label_defaults");v.exports=function(c,t,f,a,o){var u=f("contours.coloring"),h,i="";u==="fill"&&(h=f("contours.showlines")),h!==!1&&(u!=="lines"&&(i=f("line.color","#000")),f("line.width",.5),f("line.dash")),u!=="none"&&(c.showlegend!==!0&&(t.showlegend=!1),t._dfltShowLegend=!1,r(c,t,a,f,{prefix:"",cLetter:"z"})),f("line.smoothing"),n(f,a,i,o)}},{"../../components/colorscale/defaults":653,"./label_defaults":1023}],1030:[function(e,v,M){var r=e("../heatmap/attributes"),n=e("../contour/attributes"),l=e("../../components/colorscale/attributes"),c=e("../../lib/extend").extendFlat,t=n.contours;v.exports=c({carpet:{valType:"string",editType:"calc"},z:r.z,a:r.x,a0:r.x0,da:r.dx,b:r.y,b0:r.y0,db:r.dy,text:r.text,hovertext:r.hovertext,transpose:r.transpose,atype:r.xtype,btype:r.ytype,fillcolor:n.fillcolor,autocontour:n.autocontour,ncontours:n.ncontours,contours:{type:t.type,start:t.start,end:t.end,size:t.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:t.showlines,showlabels:t.showlabels,labelfont:t.labelfont,labelformat:t.labelformat,operation:t.operation,value:t.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:n.line.color,width:n.line.width,dash:n.line.dash,smoothing:n.line.smoothing,editType:"plot"},transforms:void 0},l("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../contour/attributes":1008,"../heatmap/attributes":1065}],1031:[function(e,v,M){var r=e("../../components/colorscale/calc"),n=e("../../lib"),l=e("../heatmap/convert_column_xyz"),c=e("../heatmap/clean_2d_array"),t=e("../heatmap/interp2d"),f=e("../heatmap/find_empties"),a=e("../heatmap/make_bound_array"),o=e("./defaults"),u=e("../carpet/lookup_carpetid"),h=e("../contour/set_contours");v.exports=function(p,d){var y=d._carpetTrace=u(p,d);if(!(!y||!y.visible||y.visible==="legendonly")){if(!d.a||!d.b){var b=p.data[y.index],m=p.data[d.index];m.a||(m.a=b.a),m.b||(m.b=b.b),o(m,d,d._defaultColor,p._fullLayout)}var _=i(p,d);return h(d,d._z),_}};function i(s,p){var d=p._carpetTrace,y=d.aaxis,b=d.baxis,m,_,T,g,A,k,R;y._minDtick=0,b._minDtick=0,n.isArray1D(p.z)&&l(p,y,b,"a","b",["z"]),m=p._a=p._a||p.a,g=p._b=p._b||p.b,m=m?y.makeCalcdata(p,"_a"):[],g=g?b.makeCalcdata(p,"_b"):[],_=p.a0||0,T=p.da||1,A=p.b0||0,k=p.db||1,R=p._z=c(p._z||p.z,p.transpose),p._emptypoints=f(R),t(R,p._emptypoints);var L=n.maxRowLength(R),z=p.xtype==="scaled"?"":m,E=a(p,z,_,T,L,y),S=p.ytype==="scaled"?"":g,C=a(p,S,A,k,R.length,b),D={a:E,b:C,z:R};return p.contours.type==="levels"&&p.contours.coloring!=="none"&&r(s,p,{vals:R,containerStr:"",cLetter:"z"}),[D]}},{"../../components/colorscale/calc":651,"../../lib":778,"../carpet/lookup_carpetid":981,"../contour/set_contours":1027,"../heatmap/clean_2d_array":1067,"../heatmap/convert_column_xyz":1069,"../heatmap/find_empties":1071,"../heatmap/interp2d":1074,"../heatmap/make_bound_array":1075,"./defaults":1032}],1032:[function(e,v,M){var r=e("../../lib"),n=e("../heatmap/xyz_defaults"),l=e("./attributes"),c=e("../contour/constraint_defaults"),t=e("../contour/contours_defaults"),f=e("../contour/style_defaults");v.exports=function(o,u,h,i){function s(b,m){return r.coerce(o,u,l,b,m)}function p(b){return r.coerce2(o,u,l,b)}if(s("carpet"),o.a&&o.b){var d=n(o,u,s,i,"a","b");if(!d){u.visible=!1;return}s("text");var y=s("contours.type")==="constraint";y?c(o,u,s,i,h,{hasHover:!1}):(t(o,u,s,p),f(o,u,s,i,{hasHover:!1}))}else u._defaultColor=h,u._length=null}},{"../../lib":778,"../contour/constraint_defaults":1013,"../contour/contours_defaults":1015,"../contour/style_defaults":1029,"../heatmap/xyz_defaults":1079,"./attributes":1030}],1033:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../contour/colorbar"),calc:e("./calc"),plot:e("./plot"),style:e("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":841,"../contour/colorbar":1011,"../contour/style":1028,"./attributes":1030,"./calc":1031,"./defaults":1032,"./plot":1034}],1034:[function(e,v,M){var r=e("d3"),n=e("../carpet/map_1d_array"),l=e("../carpet/makepath"),c=e("../../components/drawing"),t=e("../../lib"),f=e("../contour/make_crossings"),a=e("../contour/find_all_paths"),o=e("../contour/plot"),u=e("../contour/constants"),h=e("../contour/convert_to_constraints"),i=e("../contour/empty_pathinfo"),s=e("../contour/close_boundaries"),p=e("../carpet/lookup_carpetid"),d=e("../carpet/axis_aligned_line");v.exports=function(z,E,S,C){var D=E.xaxis,F=E.yaxis;t.makeTraceGroups(C,S,"contour").each(function(N){var G=r.select(this),U=N[0],X=U.trace,I=X._carpetTrace=p(z,X),B=z.calcdata[I.index][0];if(!I.visible||I.visible==="legendonly")return;var j=U.a,H=U.b,K=X.contours,te=i(K,E,U),J=K.type==="constraint",oe=K._operation,ie=J?oe==="="?"lines":"fill":K.coloring;function Q(me){var be=I.ab2xy(me[0],me[1],!0);return[D.c2p(be[0]),F.c2p(be[1])]}var V=[[j[0],H[H.length-1]],[j[j.length-1],H[H.length-1]],[j[j.length-1],H[0]],[j[0],H[0]]];f(te);var se=(j[j.length-1]-j[0])*1e-8,re=(H[H.length-1]-H[0])*1e-8;a(te,se,re);var ee=te;K.type==="constraint"&&(ee=h(te,oe)),y(te,Q);var ae,fe,de,pe,W=[];for(pe=B.clipsegments.length-1;pe>=0;pe--)ae=B.clipsegments[pe],fe=n([],ae.x,D.c2p),de=n([],ae.y,F.c2p),fe.reverse(),de.reverse(),W.push(l(fe,de,ae.bicubic));var ue="M"+W.join("L")+"Z";A(G,B.clipsegments,D,F,J,ie),k(X,G,D,F,ee,V,Q,I,B,ie,ue),b(G,te,z,U,K,E,I),c.setClipUrl(G,I._clipPathId,z)})};function y(L,z){var E,S,C,D,F,N,G,U,X;for(E=0;E<L.length;E++){for(D=L[E],F=D.pedgepaths=[],N=D.ppaths=[],S=0;S<D.edgepaths.length;S++){for(X=D.edgepaths[S],G=[],C=0;C<X.length;C++)G[C]=z(X[C]);F.push(G)}for(S=0;S<D.paths.length;S++){for(X=D.paths[S],U=[],C=0;C<X.length;C++)U[C]=z(X[C]);N.push(U)}}}function b(L,z,E,S,C,D,F){var N=t.ensureSingle(L,"g","contourlines"),G=C.showlines!==!1,U=C.showlabels,X=G&&U,I=o.createLines(N,G||U,z),B=o.createLineClip(N,X,E,S.trace.uid),j=L.selectAll("g.contourlabels").data(U?[0]:[]);if(j.exit().remove(),j.enter().append("g").classed("contourlabels",!0),U){var H=D.xaxis,K=D.yaxis,te=H._length,J=K._length,oe=[[[0,0],[te,0],[te,J],[0,J]]],ie=[];t.clearLocationCache();var Q=o.labelFormatter(E,S),V=c.tester.append("text").attr("data-notex",1).call(c.font,C.labelfont),se={left:0,right:te,center:te/2,top:0,bottom:J,middle:J/2},re=Math.sqrt(te*te+J*J),ee=u.LABELDISTANCE*re/Math.max(1,z.length/u.LABELINCREASE);I.each(function(ae){var fe=o.calcTextOpts(ae.level,Q,V,E);r.select(this).selectAll("path").each(function(de){var pe=this,W=t.getVisibleSegment(pe,se,fe.height/2);if(W&&(m(pe,de,ae,W,F,fe.height),!(W.len<(fe.width+fe.height)*u.LABELMIN)))for(var ue=Math.min(Math.ceil(W.len/ee),u.LABELMAX),me=0;me<ue;me++){var be=o.findBestTextLocation(pe,W,fe,ie,se);if(!be)break;o.addLabelData(be,fe,ie,oe)}})}),V.remove(),o.drawLabels(j,ie,E,B,X?oe:null)}U&&!G&&I.remove()}function m(L,z,E,S,C,D){for(var F,N=0;N<E.pedgepaths.length;N++)z===E.pedgepaths[N]&&(F=E.edgepaths[N]);if(!F)return;var G=C.a[0],U=C.a[C.a.length-1],X=C.b[0],I=C.b[C.b.length-1];function B(J,oe){var ie=0,Q,V=.1;return(Math.abs(J[0]-G)<V||Math.abs(J[0]-U)<V)&&(Q=T(C.dxydb_rough(J[0],J[1],V)),ie=Math.max(ie,D*g(oe,Q)/2)),(Math.abs(J[1]-X)<V||Math.abs(J[1]-I)<V)&&(Q=T(C.dxyda_rough(J[0],J[1],V)),ie=Math.max(ie,D*g(oe,Q)/2)),ie}var j=_(L,0,1),H=_(L,S.total,S.total-1),K=B(F[0],j),te=S.total-B(F[F.length-1],H);S.min<K&&(S.min=K),S.max>te&&(S.max=te),S.len=S.max-S.min}function _(L,z,E){var S=L.getPointAtLength(z),C=L.getPointAtLength(E),D=C.x-S.x,F=C.y-S.y,N=Math.sqrt(D*D+F*F);return[D/N,F/N]}function T(L){var z=Math.sqrt(L[0]*L[0]+L[1]*L[1]);return[L[0]/z,L[1]/z]}function g(L,z){var E=Math.abs(L[0]*z[0]+L[1]*z[1]),S=Math.sqrt(1-E*E);return S/E}function A(L,z,E,S,C,D){var F,N,G,U,X=t.ensureSingle(L,"g","contourbg"),I=X.selectAll("path").data(D==="fill"&&!C?[0]:[]);I.enter().append("path"),I.exit().remove();var B=[];for(U=0;U<z.length;U++)F=z[U],N=n([],F.x,E.c2p),G=n([],F.y,S.c2p),B.push(l(N,G,F.bicubic));I.attr("d","M"+B.join("L")+"Z").style("stroke","none")}function k(L,z,E,S,C,D,F,N,G,U,X){var I=U==="fill";I&&s(C,L.contours);var B=t.ensureSingle(z,"g","contourfill"),j=B.selectAll("path").data(I?C:[]);j.enter().append("path"),j.exit().remove(),j.each(function(H){var K=(H.prefixBoundary?X:"")+R(L,H,D,F,N,G,E,S);K?r.select(this).attr("d",K).style("stroke","none"):r.select(this).remove()})}function R(L,z,E,S,C,D,F,N){var G,U="",X=z.edgepaths.map(function(de,pe){return pe}),I=!0,B,j,H,K,te,J,oe=Math.abs(E[0][0]-E[2][0])*1e-4,ie=Math.abs(E[0][1]-E[2][1])*1e-4;function Q(de){return Math.abs(de[1]-E[0][1])<ie}function V(de){return Math.abs(de[1]-E[2][1])<ie}function se(de){return Math.abs(de[0]-E[0][0])<oe}function re(de){return Math.abs(de[0]-E[2][0])<oe}function ee(de,pe){var W,ue,me,be,ke="";for(Q(de)&&!re(de)||V(de)&&!se(de)?(be=C.aaxis,me=d(C,D,[de[0],pe[0]],.5*(de[1]+pe[1]))):(be=C.baxis,me=d(C,D,.5*(de[0]+pe[0]),[de[1],pe[1]])),W=1;W<me.length;W++)for(ke+=be.smoothing?"C":"L",ue=0;ue<me[W].length;ue++){var Pe=me[W][ue];ke+=[F.c2p(Pe[0]),N.c2p(Pe[1])]+" "}return ke}for(G=0,B=null;X.length;){var ae=z.edgepaths[G][0];for(B&&(U+=ee(B,ae)),J=c.smoothopen(z.edgepaths[G].map(S),z.smoothing),U+=I?J:J.replace(/^M/,"L"),X.splice(X.indexOf(G),1),B=z.edgepaths[G][z.edgepaths[G].length-1],K=-1,H=0;H<4;H++){if(!B){t.log("Missing end?",G,z);break}for(Q(B)&&!re(B)?j=E[1]:se(B)?j=E[0]:V(B)?j=E[3]:re(B)&&(j=E[2]),te=0;te<z.edgepaths.length;te++){var fe=z.edgepaths[te][0];Math.abs(B[0]-j[0])<oe?Math.abs(B[0]-fe[0])<oe&&(fe[1]-B[1])*(j[1]-fe[1])>=0&&(j=fe,K=te):Math.abs(B[1]-j[1])<ie?Math.abs(B[1]-fe[1])<ie&&(fe[0]-B[0])*(j[0]-fe[0])>=0&&(j=fe,K=te):t.log("endpt to newendpt is not vert. or horz.",B,j,fe)}if(K>=0)break;U+=ee(B,j),B=j}if(K===z.edgepaths.length){t.log("unclosed perimeter path");break}G=K,I=X.indexOf(G)===-1,I&&(G=X[0],U+=ee(B,j)+"Z",B=null)}for(G=0;G<z.paths.length;G++)U+=c.smoothclosed(z.paths[G].map(S),z.smoothing);return U}},{"../../components/drawing":665,"../../lib":778,"../carpet/axis_aligned_line":965,"../carpet/lookup_carpetid":981,"../carpet/makepath":982,"../carpet/map_1d_array":983,"../contour/close_boundaries":1010,"../contour/constants":1012,"../contour/convert_to_constraints":1016,"../contour/empty_pathinfo":1018,"../contour/find_all_paths":1020,"../contour/make_crossings":1025,"../contour/plot":1026,d3:169}],1035:[function(e,v,M){var r=e("../../components/colorscale/attributes"),n=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/attributes"),c=e("../scattermapbox/attributes"),t=e("../../lib/extend").extendFlat;v.exports=t({lon:c.lon,lat:c.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:c.text,hovertext:c.hovertext,hoverinfo:t({},l.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:n(),showlegend:t({},l.showlegend,{dflt:!1})},r("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scattermapbox/attributes":1252}],1036:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib").isArrayOrTypedArray,l=e("../../constants/numerical").BADNUM,c=e("../../components/colorscale/calc"),t=e("../../lib")._;v.exports=function(a,o){for(var u=o._length,h=new Array(u),i=o.z,s=n(i)&&i.length,p=0;p<u;p++){var d=h[p]={},y=o.lon[p],b=o.lat[p];if(d.lonlat=r(y)&&r(b)?[+y,+b]:[l,l],s){var m=i[p];d.z=r(m)?m:l}}return c(a,o,{vals:s?i:[0,1],containerStr:"",cLetter:"z"}),u&&(h[0].t={labels:{lat:t(a,"lat:")+" ",lon:t(a,"lon:")+" "}}),h}},{"../../components/colorscale/calc":651,"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],1037:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib"),l=e("../../components/color"),c=e("../../components/colorscale"),t=e("../../constants/numerical").BADNUM,f=e("../../lib/geojson_utils").makeBlank;v.exports=function(o){var u=o[0].trace,h=u.visible===!0&&u._length!==0,i={layout:{visibility:"none"},paint:{}},s=u._opts={heatmap:i,geojson:f()};if(!h)return s;var p=[],d,y=u.z,b=u.radius,m=n.isArrayOrTypedArray(y)&&y.length,_=n.isArrayOrTypedArray(b);for(d=0;d<o.length;d++){var T=o[d],g=T.lonlat;if(g[0]!==t){var A={};if(m){var k=T.z;A.z=k!==t?k:0}_&&(A.r=r(b[d])&&b[d]>0?+b[d]:0),p.push({type:"Feature",geometry:{type:"Point",coordinates:g},properties:A})}}var R=c.extractOpts(u),L=R.reversescale?c.flipScale(R.colorscale):R.colorscale,z=L[0][1],E=l.opacity(z)<1?z:l.addOpacity(z,0),S=["interpolate",["linear"],["heatmap-density"],0,E];for(d=1;d<L.length;d++)S.push(L[d][0],L[d][1]);var C=["interpolate",["linear"],["get","z"],R.min,0,R.max,1];return n.extendFlat(s.heatmap.paint,{"heatmap-weight":m?C:1/(R.max-R.min),"heatmap-color":S,"heatmap-radius":_?{type:"identity",property:"r"}:u.radius,"heatmap-opacity":u.opacity}),s.geojson={type:"FeatureCollection",features:p},s.heatmap.layout.visibility="visible",s}},{"../../components/color":643,"../../components/colorscale":655,"../../constants/numerical":753,"../../lib":778,"../../lib/geojson_utils":772,"fast-isnumeric":241}],1038:[function(e,v,M){var r=e("../../lib"),n=e("../../components/colorscale/defaults"),l=e("./attributes");v.exports=function(t,f,a,o){function u(p,d){return r.coerce(t,f,l,p,d)}var h=u("lon")||[],i=u("lat")||[],s=Math.min(h.length,i.length);if(!s){f.visible=!1;return}f._length=s,u("z"),u("radius"),u("below"),u("text"),u("hovertext"),u("hovertemplate"),n(t,f,o,u,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":1035}],1039:[function(e,v,M){v.exports=function(n,l){return n.lon=l.lon,n.lat=l.lat,n.z=l.z,n}},{}],1040:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/cartesian/axes"),l=e("../scattermapbox/hover");v.exports=function(f,a,o){var u=l(f,a,o);if(u){var h=u[0],i=h.cd,s=i[0].trace,p=i[h.index];if(delete h.color,"z"in p){var d=h.subplot.mockAxis;h.z=p.z,h.zLabel=n.tickText(d,d.c2l(p.z),"hover").text}return h.extraText=c(s,p,i[0].t.labels),[h]}};function c(t,f,a){if(t.hovertemplate)return;var o=f.hi||t.hoverinfo,u=o.split("+"),h=u.indexOf("all")!==-1,i=u.indexOf("lon")!==-1,s=u.indexOf("lat")!==-1,p=f.lonlat,d=[];function y(b){return b+"°"}return h||i&&s?d.push("("+y(p[0])+", "+y(p[1])+")"):i?d.push(a.lon+y(p[0])):s&&d.push(a.lat+y(p[1])),(h||u.indexOf("text")!==-1)&&r.fillText(f,t,d),d.join("<br>")}},{"../../lib":778,"../../plots/cartesian/axes":828,"../scattermapbox/hover":1257}],1041:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),formatLabels:e("../scattermapbox/format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover"),eventData:e("./event_data"),getBelow:function(r,n){for(var l=n.getMapLayers(),c=0;c<l.length;c++){var t=l[c],f=t.id;if(t.type==="symbol"&&typeof f=="string"&&f.indexOf("plotly-")===-1)return f}},moduleType:"trace",name:"densitymapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":885,"../heatmap/colorbar":1068,"../scattermapbox/format_labels":1256,"./attributes":1035,"./calc":1036,"./defaults":1038,"./event_data":1039,"./hover":1040,"./plot":1042}],1042:[function(e,v,M){var r=e("./convert"),n=e("../../plots/mapbox/constants").traceLayerPrefix;function l(t,f){this.type="densitymapbox",this.subplot=t,this.uid=f,this.sourceId="source-"+f,this.layerList=[["heatmap",n+f+"-heatmap"]],this.below=null}var c=l.prototype;c.update=function(t){var f=this.subplot,a=this.layerList,o=r(t),u=f.belowLookup["trace-"+this.uid];f.map.getSource(this.sourceId).setData(o.geojson),u!==this.below&&(this._removeLayers(),this._addLayers(o,u),this.below=u);for(var h=0;h<a.length;h++){var i=a[h],s=i[0],p=i[1],d=o[s];f.setOptions(p,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&f.setOptions(p,"setPaintProperty",d.paint)}},c._addLayers=function(t,f){for(var a=this.subplot,o=this.layerList,u=this.sourceId,h=0;h<o.length;h++){var i=o[h],s=i[0],p=t[s];a.addLayer({type:s,id:i[1],source:u,layout:p.layout,paint:p.paint},f)}},c._removeLayers=function(){for(var t=this.subplot.map,f=this.layerList,a=f.length-1;a>=0;a--)t.removeLayer(f[a][1])},c.dispose=function(){var t=this.subplot.map;this._removeLayers(),t.removeSource(this.sourceId)},v.exports=function(f,a){var o=a[0].trace,u=new l(f,o.uid),h=u.sourceId,i=r(a),s=u.below=f.belowLookup["trace-"+o.uid];return f.map.addSource(h,{type:"geojson",data:i.geojson}),u._addLayers(i,s),u}},{"../../plots/mapbox/constants":883,"./convert":1037}],1043:[function(e,v,M){var r=e("../../lib");v.exports=function(l,c){for(var t=0;t<l.length;t++)l[t].i=t;r.mergeArray(c.text,l,"tx"),r.mergeArray(c.hovertext,l,"htx");var f=c.marker;if(f){r.mergeArray(f.opacity,l,"mo"),r.mergeArray(f.color,l,"mc");var a=f.line;a&&(r.mergeArray(a.color,l,"mlc"),r.mergeArrayCastPositive(a.width,l,"mlw"))}}},{"../../lib":778}],1044:[function(e,v,M){var r=e("../bar/attributes"),n=e("../scatter/attributes").line,l=e("../../plots/attributes"),c=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,f=e("./constants"),a=e("../../lib/extend").extendFlat,o=e("../../components/color");v.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,hovertext:r.hovertext,hovertemplate:c({},{keys:f.eventDataKeys}),hoverinfo:a({},l.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:t({editType:"plot"},{keys:f.eventDataKeys.concat(["label","value"])}),text:r.text,textposition:a({},r.textposition,{dflt:"auto"}),insidetextanchor:a({},r.insidetextanchor,{dflt:"middle"}),textangle:a({},r.textangle,{dflt:0}),textfont:r.textfont,insidetextfont:r.insidetextfont,outsidetextfont:r.outsidetextfont,constraintext:r.constraintext,cliponaxis:r.cliponaxis,orientation:a({},r.orientation,{}),offset:a({},r.offset,{arrayOk:!1}),width:a({},r.width,{arrayOk:!1}),marker:r.marker,connector:{fillcolor:{valType:"color",editType:"style"},line:{color:a({},n.color,{dflt:o.defaultLine}),width:a({},n.width,{dflt:0,editType:"plot"}),dash:n.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup}},{"../../components/color":643,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatter/attributes":1187,"./constants":1046}],1045:[function(e,v,M){var r=e("../../plots/cartesian/axes"),n=e("../../plots/cartesian/align_period"),l=e("./arrays_to_calcdata"),c=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;v.exports=function(o,u){var h=r.getFromId(o,u.xaxis||"x"),i=r.getFromId(o,u.yaxis||"y"),s,p,d,y,b,m;u.orientation==="h"?(s=h.makeCalcdata(u,"x"),d=i.makeCalcdata(u,"y"),p=n(u,i,"y",d),m=!!u.yperiodalignment):(s=i.makeCalcdata(u,"y"),d=h.makeCalcdata(u,"x"),p=n(u,h,"x",d),m=!!u.xperiodalignment);var _=Math.min(p.length,s.length),T=new Array(_);for(u._base=[],y=0;y<_;y++){s[y]<0&&(s[y]=t);var g=!1;s[y]!==t&&y+1<_&&s[y+1]!==t&&(g=!0),b=T[y]={p:p[y],s:s[y],cNext:g},u._base[y]=-.5*b.s,m&&(T[y].orig_p=d[y]),u.ids&&(b.id=String(u.ids[y])),y===0&&(T[0].vTotal=0),T[0].vTotal+=f(b.s),b.begR=f(b.s)/f(T[0].s)}var A;for(y=0;y<_;y++)b=T[y],b.s!==t&&(b.sumR=b.s/T[0].vTotal,b.difR=A!==void 0?b.s/A:1,A=b.s);return l(T,u),c(T,u),T};function f(a){return a===t?0:a}},{"../../constants/numerical":753,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../scatter/calc_selection":1189,"./arrays_to_calcdata":1043}],1046:[function(e,v,M){v.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],1047:[function(e,v,M){var r=e("../bar/cross_trace_calc").setGroupPositions;v.exports=function(l,c){var t=l._fullLayout,f=l._fullData,a=l.calcdata,o=c.xaxis,u=c.yaxis,h=[],i=[],s=[],p,d;for(d=0;d<f.length;d++){var y=f[d],b=y.orientation==="h";y.visible===!0&&y.xaxis===o._id&&y.yaxis===u._id&&y.type==="funnel"&&(p=a[d],b?s.push(p):i.push(p),h.push(p))}var m={mode:t.funnelmode,norm:t.funnelnorm,gap:t.funnelgap,groupgap:t.funnelgroupgap};for(r(l,o,u,i,m),r(l,u,o,s,m),d=0;d<h.length;d++){p=h[d];for(var _=0;_<p.length;_++)_+1<p.length&&(p[_].nextP0=p[_+1].p0,p[_].nextS0=p[_+1].s0,p[_].nextP1=p[_+1].p1,p[_].nextS1=p[_+1].s1)}}},{"../bar/cross_trace_calc":924}],1048:[function(e,v,M){var r=e("../../lib"),n=e("../bar/defaults").handleGroupingDefaults,l=e("../bar/defaults").handleText,c=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),f=e("./attributes"),a=e("../../components/color");function o(i,s,p,d){function y(k,R){return r.coerce(i,s,f,k,R)}var b=c(i,s,d,y);if(!b){s.visible=!1;return}t(i,s,d,y),y("orientation",s.y&&!s.x?"v":"h"),y("offset"),y("width");var m=y("text");y("hovertext"),y("hovertemplate");var _=y("textposition");l(i,s,d,y,_,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s.textposition!=="none"&&!s.texttemplate&&y("textinfo",Array.isArray(m)?"text+value":"value");var T=y("marker.color",p);y("marker.line.color",a.defaultLine),y("marker.line.width");var g=y("connector.visible");if(g){y("connector.fillcolor",u(T));var A=y("connector.line.width");A&&(y("connector.line.color"),y("connector.line.dash"))}}function u(i){var s=r.isArrayOrTypedArray(i)?"#000":i;return a.addOpacity(s,.5*a.opacity(s))}function h(i,s){var p,d;function y(m){return r.coerce(d._input,d,f,m)}if(s.funnelmode==="group")for(var b=0;b<i.length;b++)d=i[b],p=d._input,n(p,d,s,y)}v.exports={supplyDefaults:o,crossTraceDefaults:h}},{"../../components/color":643,"../../lib":778,"../bar/defaults":925,"../scatter/period_defaults":1207,"../scatter/xy_defaults":1214,"./attributes":1044}],1049:[function(e,v,M){v.exports=function(n,l){return n.x="xVal"in l?l.xVal:l.x,n.y="yVal"in l?l.yVal:l.y,"percentInitial"in l&&(n.percentInitial=l.percentInitial),"percentPrevious"in l&&(n.percentPrevious=l.percentPrevious),"percentTotal"in l&&(n.percentTotal=l.percentTotal),l.xa&&(n.xaxis=l.xa),l.ya&&(n.yaxis=l.ya),n}},{}],1050:[function(e,v,M){var r=e("../../components/color").opacity,n=e("../bar/hover").hoverOnBars,l=e("../../lib").formatPercent;v.exports=function(f,a,o,u){var h=n(f,a,o,u);if(h){var i=h.cd,s=i[0].trace,p=s.orientation==="h",d=h.index,y=i[d],b=p?"x":"y";h[b+"LabelVal"]=y.s,h.percentInitial=y.begR,h.percentInitialLabel=l(y.begR,1),h.percentPrevious=y.difR,h.percentPreviousLabel=l(y.difR,1),h.percentTotal=y.sumR,h.percentTotalLabel=l(y.sumR,1);var m=y.hi||s.hoverinfo,_=[];if(m&&m!=="none"&&m!=="skip"){var T=m==="all",g=m.split("+"),A=function(k){return T||g.indexOf(k)!==-1};A("percent initial")&&_.push(h.percentInitialLabel+" of initial"),A("percent previous")&&_.push(h.percentPreviousLabel+" of previous"),A("percent total")&&_.push(h.percentTotalLabel+" of total")}return h.extraText=_.join("<br>"),h.color=c(s,y),[h]}};function c(t,f){var a=t.marker,o=f.mc||a.color,u=f.mlc||a.line.color,h=f.mlw||a.line.width;if(r(o))return o;if(r(u)&&h)return u}},{"../../components/color":643,"../../lib":778,"../bar/hover":928}],1051:[function(e,v,M){v.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"../bar/select":933,"./attributes":1044,"./calc":1045,"./cross_trace_calc":1047,"./defaults":1048,"./event_data":1049,"./hover":1050,"./layout_attributes":1052,"./layout_defaults":1053,"./plot":1054,"./style":1055}],1052:[function(e,v,M){v.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1053:[function(e,v,M){var r=e("../../lib"),n=e("./layout_attributes");v.exports=function(l,c,t){var f=!1;function a(h,i){return r.coerce(l,c,n,h,i)}for(var o=0;o<t.length;o++){var u=t[o];if(u.visible&&u.type==="funnel"){f=!0;break}}f&&(a("funnelmode"),a("funnelgap",.2),a("funnelgroupgap"))}},{"../../lib":778,"./layout_attributes":1052}],1054:[function(e,v,M){var r=e("d3"),n=e("../../lib"),l=e("../../components/drawing"),c=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),f=e("../bar/uniform_text").clearMinTextSize;v.exports=function(i,s,p,d){var y=i._fullLayout;f("funnel",y),a(i,s,p,d),o(i,s,p,d),t.plot(i,s,p,d,{mode:y.funnelmode,norm:y.funnelmode,gap:y.funnelgap,groupgap:y.funnelgroupgap})};function a(h,i,s,p){var d=i.xaxis,y=i.yaxis;n.makeTraceGroups(p,s,"trace bars").each(function(b){var m=r.select(this),_=b[0].trace,T=n.ensureSingle(m,"g","regions");if(!_.connector||!_.connector.visible){T.remove();return}var g=_.orientation==="h",A=T.selectAll("g.region").data(n.identity);A.enter().append("g").classed("region",!0),A.exit().remove();var k=A.size();A.each(function(R,L){if(!(L!==k-1&&!R.cNext)){var z=u(R,d,y,g),E=z[0],S=z[1],C="";E[0]!==c&&S[0]!==c&&E[1]!==c&&S[1]!==c&&E[2]!==c&&S[2]!==c&&E[3]!==c&&S[3]!==c&&(g?C+="M"+E[0]+","+S[1]+"L"+E[2]+","+S[2]+"H"+E[3]+"L"+E[1]+","+S[1]+"Z":C+="M"+E[1]+","+S[1]+"L"+E[2]+","+S[3]+"V"+S[2]+"L"+E[1]+","+S[0]+"Z"),C===""&&(C="M0,0Z"),n.ensureSingle(r.select(this),"path").attr("d",C).call(l.setClipUrl,i.layerClipId,h)}})})}function o(h,i,s,p){var d=i.xaxis,y=i.yaxis;n.makeTraceGroups(p,s,"trace bars").each(function(b){var m=r.select(this),_=b[0].trace,T=n.ensureSingle(m,"g","lines");if(!_.connector||!_.connector.visible||!_.connector.line.width){T.remove();return}var g=_.orientation==="h",A=T.selectAll("g.line").data(n.identity);A.enter().append("g").classed("line",!0),A.exit().remove();var k=A.size();A.each(function(R,L){if(!(L!==k-1&&!R.cNext)){var z=u(R,d,y,g),E=z[0],S=z[1],C="";E[3]!==void 0&&S[3]!==void 0&&(g?(C+="M"+E[0]+","+S[1]+"L"+E[2]+","+S[2],C+="M"+E[1]+","+S[1]+"L"+E[3]+","+S[2]):(C+="M"+E[1]+","+S[1]+"L"+E[2]+","+S[3],C+="M"+E[1]+","+S[0]+"L"+E[2]+","+S[2])),C===""&&(C="M0,0Z"),n.ensureSingle(r.select(this),"path").attr("d",C).call(l.setClipUrl,i.layerClipId,h)}})})}function u(h,i,s,p){var d=[],y=[],b=p?i:s,m=p?s:i;return d[0]=b.c2p(h.s0,!0),y[0]=m.c2p(h.p0,!0),d[1]=b.c2p(h.s1,!0),y[1]=m.c2p(h.p1,!0),d[2]=b.c2p(h.nextS0,!0),y[2]=m.c2p(h.nextP0,!0),d[3]=b.c2p(h.nextS1,!0),y[3]=m.c2p(h.nextP1,!0),p?[d,y]:[y,d]}},{"../../components/drawing":665,"../../constants/numerical":753,"../../lib":778,"../bar/plot":932,"../bar/uniform_text":937,d3:169}],1055:[function(e,v,M){var r=e("d3"),n=e("../../components/drawing"),l=e("../../components/color"),c=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),f=e("../bar/uniform_text").resizeText,a=t.styleTextPoints;function o(u,h,i){var s=i||r.select(u).selectAll("g.funnellayer").selectAll("g.trace");f(u,s,"funnel"),s.style("opacity",function(p){return p[0].trace.opacity}),s.each(function(p){var d=r.select(this),y=p[0].trace;d.selectAll(".point > path").each(function(b){if(!b.isBlank){var m=y.marker;r.select(this).call(l.fill,b.mc||m.color).call(l.stroke,b.mlc||m.line.color).call(n.dashLine,m.line.dash,b.mlw||m.line.width).style("opacity",y.selectedpoints&&!b.selected?c:1)}}),a(d,y,u),d.selectAll(".regions").each(function(){r.select(this).selectAll("path").style("stroke-width",0).call(l.fill,y.connector.fillcolor)}),d.selectAll(".lines").each(function(){var b=y.connector.line;n.lineGroupStyle(r.select(this).selectAll("path"),b.width,b.color,b.dash)})})}v.exports={style:o}},{"../../components/color":643,"../../components/drawing":665,"../../constants/interactions":752,"../bar/style":935,"../bar/uniform_text":937,d3:169}],1056:[function(e,v,M){var r=e("../pie/attributes"),n=e("../../plots/attributes"),l=e("../../plots/domain").attributes,c=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,f=e("../../lib/extend").extendFlat;v.exports={labels:r.labels,label0:r.label0,dlabel:r.dlabel,values:r.values,marker:{colors:r.marker.colors,line:{color:f({},r.marker.line.color,{dflt:null}),width:f({},r.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:r.text,hovertext:r.hovertext,scalegroup:f({},r.scalegroup,{}),textinfo:f({},r.textinfo,{flags:["label","text","value","percent"]}),texttemplate:t({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:f({},n.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:c({},{keys:["label","color","value","text","percent"]}),textposition:f({},r.textposition,{values:["inside","none"],dflt:"inside"}),textfont:r.textfont,insidetextfont:r.insidetextfont,title:{text:r.title.text,font:r.title.font,position:f({},r.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:l({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/template_attributes":906,"../pie/attributes":1161}],1057:[function(e,v,M){var r=e("../../plots/plots");M.name="funnelarea",M.plot=function(n,l,c,t){r.plotBasePlot(M.name,n,l,c,t)},M.clean=function(n,l,c,t){r.cleanBasePlot(M.name,n,l,c,t)}},{"../../plots/plots":891}],1058:[function(e,v,M){var r=e("../pie/calc");function n(c,t){return r.calc(c,t)}function l(c){r.crossTraceCalc(c,{type:"funnelarea"})}v.exports={calc:n,crossTraceCalc:l}},{"../pie/calc":1163}],1059:[function(e,v,M){var r=e("../../lib"),n=e("./attributes"),l=e("../../plots/domain").defaults,c=e("../bar/defaults").handleText,t=e("../pie/defaults").handleLabelsAndValues;v.exports=function(a,o,u,h){function i(k,R){return r.coerce(a,o,n,k,R)}var s=i("labels"),p=i("values"),d=t(s,p),y=d.len;if(o._hasLabels=d.hasLabels,o._hasValues=d.hasValues,!o._hasLabels&&o._hasValues&&(i("label0"),i("dlabel")),!y){o.visible=!1;return}o._length=y;var b=i("marker.line.width");b&&i("marker.line.color",h.paper_bgcolor),i("marker.colors"),i("scalegroup");var m=i("text"),_=i("texttemplate"),T;if(_||(T=i("textinfo",Array.isArray(m)?"text+percent":"percent")),i("hovertext"),i("hovertemplate"),_||T&&T!=="none"){var g=i("textposition");c(a,o,h,i,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}l(o,h,i);var A=i("title.text");A&&(i("title.position"),r.coerceFont(i,"title.font",h.font)),i("aspectratio"),i("baseratio")}},{"../../lib":778,"../../plots/domain":855,"../bar/defaults":925,"../pie/defaults":1164,"./attributes":1056}],1060:[function(e,v,M){v.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style"),styleOne:e("../pie/style_one"),meta:{}}},{"../pie/style_one":1172,"./attributes":1056,"./base_plot":1057,"./calc":1058,"./defaults":1059,"./layout_attributes":1061,"./layout_defaults":1062,"./plot":1063,"./style":1064}],1061:[function(e,v,M){var r=e("../pie/layout_attributes").hiddenlabels;v.exports={hiddenlabels:r,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":1168}],1062:[function(e,v,M){var r=e("../../lib"),n=e("./layout_attributes");v.exports=function(c,t){function f(a,o){return r.coerce(c,t,n,a,o)}f("hiddenlabels"),f("funnelareacolorway",t.colorway),f("extendfunnelareacolors")}},{"../../lib":778,"./layout_attributes":1061}],1063:[function(e,v,M){var r=e("d3"),n=e("../../components/drawing"),l=e("../../lib"),c=l.strScale,t=l.strTranslate,f=e("../../lib/svg_text_utils"),a=e("../bar/plot"),o=a.toMoveInsideBar,u=e("../bar/uniform_text"),h=u.recordMinTextSize,i=u.clearMinTextSize,s=e("../pie/helpers"),p=e("../pie/plot"),d=p.attachFxHandlers,y=p.determineInsideTextFont,b=p.layoutAreas,m=p.prerenderTitles,_=p.positionTitleOutside,T=p.formatSliceLabel;v.exports=function(L,z){var E=L._fullLayout;i("funnelarea",E),m(z,L),b(z,E._size),l.makeTraceGroups(E._funnelarealayer,z,"trace").each(function(S){var C=r.select(this),D=S[0],F=D.trace;k(S),C.each(function(){var N=r.select(this).selectAll("g.slice").data(S);N.enter().append("g").classed("slice",!0),N.exit().remove(),N.each(function(U,X){if(U.hidden){r.select(this).selectAll("path,g").remove();return}U.pointNumber=U.i,U.curveNumber=F.index;var I=D.cx,B=D.cy,j=r.select(this),H=j.selectAll("path.surface").data([U]);H.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),j.call(d,L,S);var K="M"+(I+U.TR[0])+","+(B+U.TR[1])+g(U.TR,U.BR)+g(U.BR,U.BL)+g(U.BL,U.TL)+"Z";H.attr("d",K),T(L,U,D);var te=s.castOption(F.textposition,U.pts),J=j.selectAll("g.slicetext").data(U.text&&te!=="none"?[0]:[]);J.enter().append("g").classed("slicetext",!0),J.exit().remove(),J.each(function(){var oe=l.ensureSingle(r.select(this),"text","",function(fe){fe.attr("data-notex",1)}),ie=l.ensureUniformFontSize(L,y(F,U,E.font));oe.text(U.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(n.font,ie).call(f.convertToTspans,L);var Q=n.bBox(oe.node()),V,se,re,ee=Math.min(U.BL[1],U.BR[1])+B,ae=Math.max(U.TL[1],U.TR[1])+B;se=Math.max(U.TL[0],U.BL[0])+I,re=Math.min(U.TR[0],U.BR[0])+I,V=o(se,re,ee,ae,Q,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),V.fontSize=ie.size,h(F.type,V,E),S[X].transform=V,oe.attr("transform",l.getTextTransform(V))})});var G=r.select(this).selectAll("g.titletext").data(F.title.text?[0]:[]);G.enter().append("g").classed("titletext",!0),G.exit().remove(),G.each(function(){var U=l.ensureSingle(r.select(this),"text","",function(B){B.attr("data-notex",1)}),X=F.title.text;F._meta&&(X=l.templateString(X,F._meta)),U.text(X).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(n.font,F.title.font).call(f.convertToTspans,L);var I=_(D,E._size);U.attr("transform",t(I.x,I.y)+c(Math.min(1,I.scale))+t(I.tx,I.ty))})})})};function g(R,L){var z=L[0]-R[0],E=L[1]-R[1];return"l"+z+","+E}function A(R,L){return[.5*(R[0]+L[0]),.5*(R[1]+L[1])]}function k(R){if(!R.length)return;var L=R[0],z=L.trace,E=z.aspectratio,S=z.baseratio;S>.999&&(S=.999);var C=Math.pow(S,2),D=L.vTotal,F=D*C/(1-C),N=D,G=F/D;function U(){var pe=Math.sqrt(G);return{x:pe,y:-pe}}function X(){var pe=U();return[pe.x,pe.y]}var I,B=[];B.push(X());var j,H;for(j=R.length-1;j>-1;j--)if(H=R[j],!H.hidden){var K=H.v/N;G+=K,B.push(X())}var te=1/0,J=-1/0;for(j=0;j<B.length;j++)I=B[j],te=Math.min(te,I[1]),J=Math.max(J,I[1]);for(j=0;j<B.length;j++)B[j][1]-=(J+te)/2;var oe=B[B.length-1][0],ie=L.r,Q=(J-te)/2,V=ie/oe,se=ie/Q*E;for(L.r=se*Q,j=0;j<B.length;j++)B[j][0]*=V,B[j][1]*=se;I=B[0];var re=[-I[0],I[1]],ee=[I[0],I[1]],ae=0;for(j=R.length-1;j>-1;j--)if(H=R[j],!H.hidden){ae+=1;var fe=B[ae][0],de=B[ae][1];H.TL=[-fe,de],H.TR=[fe,de],H.BL=re,H.BR=ee,H.pxmid=A(H.TR,H.BR),re=H.TL,ee=H.TR}}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../bar/plot":932,"../bar/uniform_text":937,"../pie/helpers":1166,"../pie/plot":1170,d3:169}],1064:[function(e,v,M){var r=e("d3"),n=e("../pie/style_one"),l=e("../bar/uniform_text").resizeText;v.exports=function(t){var f=t._fullLayout._funnelarealayer.selectAll(".trace");l(t,f,"funnelarea"),f.each(function(a){var o=a[0],u=o.trace,h=r.select(this);h.style({opacity:u.opacity}),h.selectAll("path.surface").each(function(i){r.select(this).call(n,i,u)})})}},{"../bar/uniform_text":937,"../pie/style_one":1172,d3:169}],1065:[function(e,v,M){var r=e("../scatter/attributes"),n=e("../../plots/attributes"),l=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../components/colorscale/attributes");e("../../constants/docs").FORMAT_LINK;var t=e("../../lib/extend").extendFlat;v.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},r.x,{impliedEdits:{xtype:"array"}}),x0:t({},r.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},r.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},r.y,{impliedEdits:{ytype:"array"}}),y0:t({},r.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},r.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},r.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},r.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},r.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},r.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},r.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},r.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"},hovertemplate:l(),showlegend:t({},n.showlegend,{dflt:!1})},{transforms:void 0},c("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":650,"../../constants/docs":748,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1066:[function(e,v,M){var r=e("../../registry"),n=e("../../lib"),l=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/align_period"),t=e("../histogram2d/calc"),f=e("../../components/colorscale/calc"),a=e("./convert_column_xyz"),o=e("./clean_2d_array"),u=e("./interp2d"),h=e("./find_empties"),i=e("./make_bound_array"),s=e("../../constants/numerical").BADNUM;v.exports=function(b,m){var _=l.getFromId(b,m.xaxis||"x"),T=l.getFromId(b,m.yaxis||"y"),g=r.traceIs(m,"contour"),A=r.traceIs(m,"histogram"),k=r.traceIs(m,"gl2d"),R=g?"best":m.zsmooth,L,z,E,S,C,D,F,N,G,U,X;if(_._minDtick=0,T._minDtick=0,A)X=t(b,m),S=X.orig_x,L=X.x,z=X.x0,E=X.dx,N=X.orig_y,C=X.y,D=X.y0,F=X.dy,G=X.z;else{var I=m.z;n.isArray1D(I)?(a(m,_,T,"x","y",["z"]),L=m._x,C=m._y,I=m._z):(S=m.x?_.makeCalcdata(m,"x"):[],N=m.y?T.makeCalcdata(m,"y"):[],L=c(m,_,"x",S),C=c(m,T,"y",N),m._x=L,m._y=C),z=m.x0,E=m.dx,D=m.y0,F=m.dy,G=o(I,m,_,T)}(_.rangebreaks||T.rangebreaks)&&(G=d(L,C,G),A||(L=p(L),C=p(C),m._x=L,m._y=C)),!A&&(g||m.connectgaps)&&(m._emptypoints=h(G),u(G,m._emptypoints));function B(ee){R=m._input.zsmooth=m.zsmooth=!1,n.warn('cannot use zsmooth: "fast": '+ee)}if(R==="fast"){if(_.type==="log"||T.type==="log")B("log axis found");else if(!A){if(L.length){var j=(L[L.length-1]-L[0])/(L.length-1),H=Math.abs(j/100);for(U=0;U<L.length-1;U++)if(Math.abs(L[U+1]-L[U]-j)>H){B("x scale is not linear");break}}if(C.length&&R==="fast"){var K=(C[C.length-1]-C[0])/(C.length-1),te=Math.abs(K/100);for(U=0;U<C.length-1;U++)if(Math.abs(C[U+1]-C[U]-K)>te){B("y scale is not linear");break}}}}var J=n.maxRowLength(G),oe=m.xtype==="scaled"?"":L,ie=i(m,oe,z,E,J,_),Q=m.ytype==="scaled"?"":C,V=i(m,Q,D,F,G.length,T);k||(m._extremes[_._id]=l.findExtremes(_,ie),m._extremes[T._id]=l.findExtremes(T,V));var se={x:ie,y:V,z:G,text:m._text||m.text,hovertext:m._hovertext||m.hovertext};if(m.xperiodalignment&&S&&(se.orig_x=S),m.yperiodalignment&&N&&(se.orig_y=N),oe&&oe.length===ie.length-1&&(se.xCenter=oe),Q&&Q.length===V.length-1&&(se.yCenter=Q),A&&(se.xRanges=X.xRanges,se.yRanges=X.yRanges,se.pts=X.pts),g||f(b,m,{vals:G,cLetter:"z"}),g&&m.contours&&m.contours.coloring==="heatmap"){var re={type:m.type==="contour"?"heatmap":"histogram2d",xcalendar:m.xcalendar,ycalendar:m.ycalendar};se.xfill=i(re,oe,z,E,J,_),se.yfill=i(re,Q,D,F,G.length,T)}return[se]};function p(y){for(var b=[],m=y.length,_=0;_<m;_++){var T=y[_];T!==s&&b.push(T)}return b}function d(y,b,m){for(var _=[],T=-1,g=0;g<m.length;g++)if(b[g]!==s){T++,_[T]=[];for(var A=0;A<m[g].length;A++)y[A]!==s&&_[T].push(m[g][A])}return _}},{"../../components/colorscale/calc":651,"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../../registry":911,"../histogram2d/calc":1098,"./clean_2d_array":1067,"./convert_column_xyz":1069,"./find_empties":1071,"./interp2d":1074,"./make_bound_array":1075}],1067:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib"),l=e("../../constants/numerical").BADNUM;v.exports=function(t,f,a,o){var u,h,i,s,p,d;function y(A){if(r(A))return+A}if(f&&f.transpose){for(u=0,p=0;p<t.length;p++)u=Math.max(u,t[p].length);if(u===0)return!1;i=function(A){return A.length},s=function(A,k,R){return(A[R]||[])[k]}}else u=t.length,i=function(A,k){return A[k].length},s=function(A,k,R){return(A[k]||[])[R]};var b=function(A,k,R){return k===l||R===l?l:s(A,k,R)};function m(A){if(f&&f.type!=="carpet"&&f.type!=="contourcarpet"&&A&&A.type==="category"&&f["_"+A._id.charAt(0)].length){var k=A._id.charAt(0),R={},L=f["_"+k+"CategoryMap"]||f[k];for(p=0;p<L.length;p++)R[L[p]]=p;return function(z){var E=R[A._categories[z]];return E+1?E:l}}else return n.identity}var _=m(a),T=m(o);o&&o.type==="category"&&(u=o._categories.length);var g=new Array(u);for(p=0;p<u;p++)for(a&&a.type==="category"?h=a._categories.length:h=i(t,p),g[p]=new Array(h),d=0;d<h;d++)g[p][d]=y(b(t,T(p),_(d)));return g}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],1068:[function(e,v,M){v.exports={min:"zmin",max:"zmax"}},{}],1069:[function(e,v,M){var r=e("../../lib"),n=e("../../constants/numerical").BADNUM,l=e("../../plots/cartesian/align_period");v.exports=function(t,f,a,o,u,h){var i=t._length,s=f.makeCalcdata(t,o),p=a.makeCalcdata(t,u);s=l(t,f,o,s),p=l(t,a,u,p);var d=t.text,y=d!==void 0&&r.isArray1D(d),b=t.hovertext,m=b!==void 0&&r.isArray1D(b),_,T,g=r.distinctVals(s),A=g.vals,k=r.distinctVals(p),R=k.vals,L=[],z,E,S=R.length,C=A.length;for(_=0;_<h.length;_++)L[_]=r.init2dArray(S,C);y&&(z=r.init2dArray(S,C)),m&&(E=r.init2dArray(S,C));var D=r.init2dArray(S,C);for(_=0;_<i;_++)if(s[_]!==n&&p[_]!==n){var F=r.findBin(s[_]+g.minDiff/2,A),N=r.findBin(p[_]+k.minDiff/2,R);for(T=0;T<h.length;T++){var G=h[T],U=t[G],X=L[T];X[N][F]=U[_],D[N][F]=_}y&&(z[N][F]=d[_]),m&&(E[N][F]=b[_])}for(t["_"+o]=A,t["_"+u]=R,T=0;T<h.length;T++)t["_"+h[T]]=L[T];y&&(t._text=z),m&&(t._hovertext=E),f&&f.type==="category"&&(t["_"+o+"CategoryMap"]=A.map(function(I){return f._categories[I]})),a&&a.type==="category"&&(t["_"+u+"CategoryMap"]=R.map(function(I){return a._categories[I]})),t._after2before=D}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825}],1070:[function(e,v,M){var r=e("../../lib"),n=e("./xyz_defaults"),l=e("../scatter/period_defaults"),c=e("./style_defaults"),t=e("../../components/colorscale/defaults"),f=e("./attributes");v.exports=function(o,u,h,i){function s(d,y){return r.coerce(o,u,f,d,y)}var p=n(o,u,s,i);if(!p){u.visible=!1;return}l(o,u,i,s),s("text"),s("hovertext"),s("hovertemplate"),c(o,u,s,i),s("hoverongaps"),s("connectgaps",r.isArray1D(u.z)&&u.zsmooth!==!1),t(o,u,i,s,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":653,"../../lib":778,"../scatter/period_defaults":1207,"./attributes":1065,"./style_defaults":1078,"./xyz_defaults":1079}],1071:[function(e,v,M){var r=e("../../lib").maxRowLength;v.exports=function(l){var c=[],t={},f=[],a=l[0],o=[],u=[0,0,0],h=r(l),i,s,p,d,y,b,m,_;for(s=0;s<l.length;s++)for(i=o,o=a,a=l[s+1]||[],p=0;p<h;p++)o[p]===void 0&&(b=(o[p-1]!==void 0?1:0)+(o[p+1]!==void 0?1:0)+(i[p]!==void 0?1:0)+(a[p]!==void 0?1:0),b?(s===0&&b++,p===0&&b++,s===l.length-1&&b++,p===o.length-1&&b++,b<4&&(t[[s,p]]=[s,p,b]),c.push([s,p,b])):f.push([s,p]));for(;f.length;){for(m={},_=!1,y=f.length-1;y>=0;y--)d=f[y],s=d[0],p=d[1],b=((t[[s-1,p]]||u)[2]+(t[[s+1,p]]||u)[2]+(t[[s,p-1]]||u)[2]+(t[[s,p+1]]||u)[2])/20,b&&(m[d]=[s,p,b],f.splice(y,1),_=!0);if(!_)throw"findEmpties iterated with no new neighbors";for(d in m)t[d]=m[d],c.push(m[d])}return c.sort(function(T,g){return g[2]-T[2]})}},{"../../lib":778}],1072:[function(e,v,M){var r=e("../../components/fx"),n=e("../../lib"),l=e("../../plots/cartesian/axes"),c=e("../../components/colorscale").extractOpts;v.exports=function(f,a,o,u,h,i){var s=f.cd[0],p=s.trace,d=f.xa,y=f.ya,b=s.x,m=s.y,_=s.z,T=s.xCenter,g=s.yCenter,A=s.zmask,k=p.zhoverformat,R=b,L=m,z,E,S,C;if(f.index!==!1){try{S=Math.round(f.index[1]),C=Math.round(f.index[0])}catch{n.error("Error hovering on heatmap, pointNumber must be [row,col], found:",f.index);return}if(S<0||S>=_[0].length||C<0||C>_.length)return}else{if(r.inbox(a-b[0],a-b[b.length-1],0)>0||r.inbox(o-m[0],o-m[m.length-1],0)>0)return;if(i){var D;for(R=[2*b[0]-b[1]],D=1;D<b.length;D++)R.push((b[D]+b[D-1])/2);for(R.push([2*b[b.length-1]-b[b.length-2]]),L=[2*m[0]-m[1]],D=1;D<m.length;D++)L.push((m[D]+m[D-1])/2);L.push([2*m[m.length-1]-m[m.length-2]])}S=Math.max(0,Math.min(R.length-2,n.findBin(a,R))),C=Math.max(0,Math.min(L.length-2,n.findBin(o,L)))}var F=d.c2p(b[S]),N=d.c2p(b[S+1]),G=y.c2p(m[C]),U=y.c2p(m[C+1]),X,I;i?(X=s.orig_x||b,I=s.orig_y||m,N=F,z=X[S],U=G,E=I[C]):(X=s.orig_x||T||b,I=s.orig_y||g||m,z=T?X[S]:(X[S]+X[S+1])/2,E=g?I[C]:(I[C]+I[C+1])/2,d&&d.type==="category"&&(z=b[S]),y&&y.type==="category"&&(E=m[C]),p.zsmooth&&(F=N=d.c2p(z),G=U=y.c2p(E)));var B=_[C][S];if(A&&!A[C][S]&&(B=void 0),!(B===void 0&&!p.hoverongaps)){var j;Array.isArray(s.hovertext)&&Array.isArray(s.hovertext[C])?j=s.hovertext[C][S]:Array.isArray(s.text)&&Array.isArray(s.text[C])&&(j=s.text[C][S]);var H=c(p),K={type:"linear",range:[H.min,H.max],hoverformat:k,_separators:d._separators,_numFormat:d._numFormat},te=l.tickText(K,B,"hover").text;return[n.extendFlat(f,{index:p._after2before?p._after2before[C][S]:[C,S],distance:f.maxHoverDistance,spikeDistance:f.maxSpikeDistance,x0:F,x1:N,y0:G,y1:U,xLabelVal:z,yLabelVal:E,zLabelVal:B,zLabel:te,text:j})]}}},{"../../components/colorscale":655,"../../components/fx":683,"../../lib":778,"../../plots/cartesian/axes":828}],1073:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:e("./colorbar"),style:e("./style"),hoverPoints:e("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":841,"./attributes":1065,"./calc":1066,"./colorbar":1068,"./defaults":1070,"./hover":1072,"./plot":1076,"./style":1077}],1074:[function(e,v,M){var r=e("../../lib"),n=.01,l=[[-1,0],[1,0],[0,-1],[0,1]];function c(f){return .5-.25*Math.min(1,f*.5)}v.exports=function(a,o){var u=1,h;for(t(a,o),h=0;h<o.length&&!(o[h][2]<4);h++);for(o=o.slice(h),h=0;h<100&&u>n;h++)u=t(a,o,c(u));return u>n&&r.log("interp2d didn't converge quickly",u),a};function t(f,a,o){var u=0,h,i,s,p,d,y,b,m,_,T,g,A,k;for(p=0;p<a.length;p++){for(h=a[p],i=h[0],s=h[1],g=f[i][s],T=0,_=0,d=0;d<4;d++)y=l[d],b=f[i+y[0]],b&&(m=b[s+y[1]],m!==void 0&&(T===0?A=k=m:(A=Math.min(A,m),k=Math.max(k,m)),_++,T+=m));if(_===0)throw"iterateInterp2d order is wrong: no defined neighbors";f[i][s]=T/_,g===void 0?_<4&&(u=1):(f[i][s]=(1+o)*f[i][s]-o*g,k>A&&(u=Math.max(u,Math.abs(f[i][s]-g)/(k-A))))}return u}},{"../../lib":778}],1075:[function(e,v,M){var r=e("../../registry"),n=e("../../lib").isArrayOrTypedArray;v.exports=function(c,t,f,a,o,u){var h=[],i=r.traceIs(c,"contour"),s=r.traceIs(c,"histogram"),p=r.traceIs(c,"gl2d"),d,y,b,m=n(t)&&t.length>1;if(m&&!s&&u.type!=="category"){var _=t.length;if(_<=o){if(i||p)h=t.slice(0,o);else if(o===1)h=[t[0]-.5,t[0]+.5];else{for(h=[1.5*t[0]-.5*t[1]],b=1;b<_;b++)h.push((t[b-1]+t[b])*.5);h.push(1.5*t[_-1]-.5*t[_-2])}if(_<o){var T=h[h.length-1],g=T-h[h.length-2];for(b=_;b<o;b++)T+=g,h.push(T)}}else return i?t.slice(0,o):t.slice(0,o+1)}else{var A=c[u._id.charAt(0)+"calendar"];if(s)d=u.r2c(f,0,A);else if(n(t)&&t.length===1)d=t[0];else if(f===void 0)d=0;else{var k=u.type==="log"?u.d2c:u.r2c;d=k(f,0,A)}for(y=a||1,b=i||p?0:-.5;b<o;b++)h.push(d+y*b)}return h}},{"../../lib":778,"../../registry":911}],1076:[function(e,v,M){var r=e("d3"),n=e("tinycolor2"),l=e("../../registry"),c=e("../../lib"),t=e("../../components/colorscale").makeColorScaleFuncFromTrace,f=e("../../constants/xmlns_namespaces");v.exports=function(h,i,s,p){var d=i.xaxis,y=i.yaxis;c.makeTraceGroups(p,s,"hm").each(function(b){var m=r.select(this),_=b[0],T=_.trace,g=_.z,A=_.x,k=_.y,R=_.xCenter,L=_.yCenter,z=l.traceIs(T,"contour"),E=z?"best":T.zsmooth,S=g.length,C=c.maxRowLength(g),D=!1,F=!1,N,G,U,X,I,B;for(B=0;N===void 0&&B<A.length-1;)N=d.c2p(A[B]),B++;for(B=A.length-1;G===void 0&&B>0;)G=d.c2p(A[B]),B--;for(G<N&&(U=G,G=N,N=U,D=!0),B=0;X===void 0&&B<k.length-1;)X=y.c2p(k[B]),B++;for(B=k.length-1;I===void 0&&B>0;)I=y.c2p(k[B]),B--;if(I<X&&(U=X,X=I,I=U,F=!0),z&&(R=A,L=k,A=_.xfill,k=_.yfill),E!=="fast"){var j=E==="best"?0:.5;N=Math.max(-j*d._length,N),G=Math.min((1+j)*d._length,G),X=Math.max(-j*y._length,X),I=Math.min((1+j)*y._length,I)}var H=Math.round(G-N),K=Math.round(I-X),te=H<=0||K<=0;if(te){var J=m.selectAll("image").data([]);J.exit().remove();return}var oe,ie;E==="fast"?(oe=C,ie=S):(oe=H,ie=K);var Q=document.createElement("canvas");Q.width=oe,Q.height=ie;var V=Q.getContext("2d"),se=t(T,{noNumericCheck:!0,returnArray:!0}),re,ee;E==="fast"?(re=D?function(Ie){return C-1-Ie}:c.identity,ee=F?function(Ie){return S-1-Ie}:c.identity):(re=function(Ie){return c.constrain(Math.round(d.c2p(A[Ie])-N),0,H)},ee=function(Ie){return c.constrain(Math.round(y.c2p(k[Ie])-X),0,K)});var ae=ee(0),fe=[ae,ae],de=D?0:1,pe=F?0:1,W=0,ue=0,me=0,be=0,ke,Pe,je,ze,Ze,tt;function Ce(Ie,He){if(Ie!==void 0){var Xe=se(Ie);return Xe[0]=Math.round(Xe[0]),Xe[1]=Math.round(Xe[1]),Xe[2]=Math.round(Xe[2]),W+=He,ue+=Xe[0]*He,me+=Xe[1]*He,be+=Xe[2]*He,Xe}return[0,0,0,0]}function Ae(Ie,He,Xe,ht){var it=Ie[Xe.bin0];if(it===void 0)return Ce(void 0,1);var Ge=Ie[Xe.bin1],ot=He[Xe.bin0],Je=He[Xe.bin1],st=Ge-it||0,It=ot-it||0,Ft;return Ge===void 0?Je===void 0?Ft=0:ot===void 0?Ft=2*(Je-it):Ft=(2*Je-ot-it)*2/3:Je===void 0?ot===void 0?Ft=0:Ft=(2*it-Ge-ot)*2/3:ot===void 0?Ft=(2*Je-Ge-it)*2/3:Ft=Je+it-Ge-ot,Ce(it+Xe.frac*st+ht.frac*(It+Xe.frac*Ft))}if(E){var Ne=0,qe;try{qe=new Uint8Array(H*K*4)}catch{qe=new Array(H*K*4)}if(E==="best"){var At=R||A,kt=L||k,Ve=new Array(At.length),ft=new Array(kt.length),St=new Array(H),Wt=R?o:a,Qt=L?o:a,zt,$t,rr;for(B=0;B<At.length;B++)Ve[B]=Math.round(d.c2p(At[B])-N);for(B=0;B<kt.length;B++)ft[B]=Math.round(y.c2p(kt[B])-X);for(B=0;B<H;B++)St[B]=Wt(B,Ve);for(Pe=0;Pe<K;Pe++)for(zt=Qt(Pe,ft),$t=g[zt.bin0],rr=g[zt.bin1],B=0;B<H;B++,Ne+=4)tt=Ae($t,rr,St[B],zt),u(qe,Ne,tt)}else for(Pe=0;Pe<S;Pe++)for(Ze=g[Pe],fe=ee(Pe),B=0;B<H;B++)tt=Ce(Ze[B],1),Ne=(fe*H+re(B))*4,u(qe,Ne,tt);var Pt=V.createImageData(H,K);try{Pt.data.set(qe)}catch{var Lt=Pt.data,dt=Lt.length;for(Pe=0;Pe<dt;Pe++)Lt[Pe]=qe[Pe]}V.putImageData(Pt,0,0)}else{var lt=T.xgap,Te=T.ygap,Le=Math.floor(lt/2),Be=Math.floor(Te/2);for(Pe=0;Pe<S;Pe++)if(Ze=g[Pe],fe.reverse(),fe[pe]=ee(Pe+1),!(fe[0]===fe[1]||fe[0]===void 0||fe[1]===void 0))for(je=re(0),ke=[je,je],B=0;B<C;B++)ke.reverse(),ke[de]=re(B+1),!(ke[0]===ke[1]||ke[0]===void 0||ke[1]===void 0)&&(ze=Ze[B],tt=Ce(ze,(ke[1]-ke[0])*(fe[1]-fe[0])),V.fillStyle="rgba("+tt.join(",")+")",V.fillRect(ke[0]+Le,fe[0]+Be,ke[1]-ke[0]-lt,fe[1]-fe[0]-Te))}ue=Math.round(ue/W),me=Math.round(me/W),be=Math.round(be/W);var et=n("rgb("+ue+","+me+","+be+")");h._hmpixcount=(h._hmpixcount||0)+W,h._hmlumcount=(h._hmlumcount||0)+W*et.getLuminance();var Me=m.selectAll("image").data(b);Me.enter().append("svg:image").attr({xmlns:f.svg,preserveAspectRatio:"none"}),Me.attr({height:K,width:H,x:N,y:X,"xlink:href":Q.toDataURL("image/png")})})};function a(h,i){var s=i.length-2,p=c.constrain(c.findBin(h,i),0,s),d=i[p],y=i[p+1],b=c.constrain(p+(h-d)/(y-d)-.5,0,s),m=Math.round(b),_=Math.abs(b-m);return!b||b===s||!_?{bin0:m,bin1:m,frac:0}:{bin0:m,frac:_,bin1:Math.round(m+_/(b-m))}}function o(h,i){var s=i.length-1,p=c.constrain(c.findBin(h,i),0,s),d=i[p],y=i[p+1],b=(h-d)/(y-d)||0;return b<=0?{bin0:p,bin1:p,frac:0}:b<.5?{bin0:p,bin1:p+1,frac:b}:{bin0:p+1,bin1:p,frac:1-b}}function u(h,i,s){h[i]=s[0],h[i+1]=s[1],h[i+2]=s[2],h[i+3]=Math.round(s[3]*255)}},{"../../components/colorscale":655,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../registry":911,d3:169,tinycolor2:576}],1077:[function(e,v,M){var r=e("d3");v.exports=function(l){r.select(l).selectAll(".hm image").style("opacity",function(c){return c.trace.opacity})}},{d3:169}],1078:[function(e,v,M){v.exports=function(n,l,c){var t=c("zsmooth");t===!1&&(c("xgap"),c("ygap")),c("zhoverformat")}},{}],1079:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib"),l=e("../../registry");v.exports=function(a,o,u,h,i,s){var p=u("z");i=i||"x",s=s||"y";var d,y;if(p===void 0||!p.length)return 0;if(n.isArray1D(a.z)){d=u(i),y=u(s);var b=n.minRowLength(d),m=n.minRowLength(y);if(b===0||m===0)return 0;o._length=Math.min(b,m,p.length)}else{if(d=c(i,u),y=c(s,u),!t(p))return 0;u("transpose"),o._length=null}if(a.type==="heatmapgl"||a.type==="contourgl")return!0;var _=l.getComponentMethod("calendars","handleTraceDefaults");return _(a,o,[i,s],h),!0};function c(f,a){var o=a(f),u=o?a(f+"type","array"):"scaled";return u==="scaled"&&(a(f+"0"),a("d"+f)),o}function t(f){for(var a=!0,o=!1,u=!1,h,i=0;i<f.length;i++){if(h=f[i],!n.isArrayOrTypedArray(h)){a=!1;break}h.length>0&&(o=!0);for(var s=0;s<h.length;s++)if(r(h[s])){u=!0;break}}return a&&o&&u}},{"../../lib":778,"../../registry":911,"fast-isnumeric":241}],1080:[function(e,v,M){for(var r=e("../heatmap/attributes"),n=e("../../components/colorscale/attributes"),l=e("../../lib/extend").extendFlat,c=e("../../plot_api/edit_types").overrideAll,t=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],f={},a=0;a<t.length;a++){var o=t[a];f[o]=r[o]}f.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},l(f,n("",{cLetter:"z",autoColorDflt:!1})),v.exports=c(f,"calc","nested")},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../heatmap/attributes":1065}],1081:[function(e,v,M){var r=e("gl-heatmap2d"),n=e("../../plots/cartesian/axes"),l=e("../../lib/str2rgbarray");function c(o,u){this.scene=o,this.uid=u,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=r(o.glplot,this.options),this.heatmap._trace=this}var t=c.prototype;t.handlePick=function(o){var u=this.options,h=u.shape,i=o.pointId,s=i%h[0],p=Math.floor(i/h[0]),d=i;return{trace:this,dataCoord:o.dataCoord,traceCoord:[u.x[s],u.y[p],u.z[d]],textLabel:this.textLabels[i],name:this.name,pointIndex:[p,s],hoverinfo:this.hoverinfo}},t.update=function(o,u){var h=u[0];this.index=o.index,this.name=o.name,this.hoverinfo=o.hoverinfo;var i=h.z;this.options.z=[].concat.apply([],i);var s=i[0].length,p=i.length;this.options.shape=[s,p],this.options.x=h.x,this.options.y=h.y,this.options.zsmooth=o.zsmooth;var d=f(o);this.options.colorLevels=d.colorLevels,this.options.colorValues=d.colorValues,this.textLabels=[].concat.apply([],o.text),this.heatmap.update(this.options);var y=this.scene.xaxis,b=this.scene.yaxis,m,_;o.zsmooth===!1&&(m={ppad:h.x[1]-h.x[0]},_={ppad:h.y[1]-h.y[0]}),o._extremes[y._id]=n.findExtremes(y,h.x,m),o._extremes[b._id]=n.findExtremes(b,h.y,_)},t.dispose=function(){this.heatmap.dispose()};function f(o){for(var u=o.colorscale,h=o.zmin,i=o.zmax,s=u.length,p=new Array(s),d=new Array(4*s),y=0;y<s;y++){var b=u[y],m=l(b[1]);p[y]=h+b[0]*(i-h);for(var _=0;_<4;_++)d[4*y+_]=m[_]}return{colorLevels:p,colorValues:d}}function a(o,u,h){var i=new c(o,u.uid);return i.update(u,h),i}v.exports=a},{"../../lib/str2rgbarray":802,"../../plots/cartesian/axes":828,"gl-heatmap2d":271}],1082:[function(e,v,M){var r=e("../../lib"),n=e("../heatmap/xyz_defaults"),l=e("../../components/colorscale/defaults"),c=e("./attributes");v.exports=function(f,a,o,u){function h(s,p){return r.coerce(f,a,c,s,p)}var i=n(f,a,h,u);if(!i){a.visible=!1;return}h("text"),h("zsmooth"),l(f,a,u,h,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":653,"../../lib":778,"../heatmap/xyz_defaults":1079,"./attributes":1080}],1083:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../heatmap/calc"),plot:e("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":868,"../heatmap/calc":1066,"../heatmap/colorbar":1068,"./attributes":1080,"./convert":1081,"./defaults":1082}],1084:[function(e,v,M){var r=e("../bar/attributes"),n=e("../../plots/template_attributes").hovertemplateAttrs,l=e("./bin_attributes"),c=e("./constants"),t=e("../../lib/extend").extendFlat;v.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:t({},r.text,{}),hovertext:t({},r.hovertext,{}),orientation:r.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:l("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:l("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:n({},{keys:c.eventDataKeys}),marker:r.marker,offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,_deprecated:{bardir:r._deprecated.bardir}}},{"../../lib/extend":768,"../../plots/template_attributes":906,"../bar/attributes":921,"./bin_attributes":1086,"./constants":1090}],1085:[function(e,v,M){v.exports=function(n,l){for(var c=n.length,t=0,f=0;f<c;f++)l[f]?(n[f]/=l[f],t+=n[f]):n[f]=null;return t}},{}],1086:[function(e,v,M){v.exports=function(n,l){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],1087:[function(e,v,M){var r=e("fast-isnumeric");v.exports={count:function(n,l,c){return c[n]++,1},sum:function(n,l,c,t){var f=t[l];return r(f)?(f=Number(f),c[n]+=f,f):0},avg:function(n,l,c,t,f){var a=t[l];return r(a)&&(a=Number(a),c[n]+=a,f[n]++),0},min:function(n,l,c,t){var f=t[l];if(r(f))if(f=Number(f),r(c[n])){if(c[n]>f){var a=f-c[n];return c[n]=f,a}}else return c[n]=f,f;return 0},max:function(n,l,c,t){var f=t[l];if(r(f))if(f=Number(f),r(c[n])){if(c[n]<f){var a=f-c[n];return c[n]=f,a}}else return c[n]=f,f;return 0}}},{"fast-isnumeric":241}],1088:[function(e,v,M){var r=e("../../constants/numerical"),n=r.ONEAVGYEAR,l=r.ONEAVGMONTH,c=r.ONEDAY,t=r.ONEHOUR,f=r.ONEMIN,a=r.ONESEC,o=e("../../plots/cartesian/axes").tickIncrement;v.exports=function(d,y,b,m,_){var T=-1.1*y,g=-.1*y,A=d-g,k=b[0],R=b[1],L=Math.min(u(k+g,k+A,m,_),u(R+g,R+A,m,_)),z=Math.min(u(k+T,k+g,m,_),u(R+T,R+g,m,_)),E,S;if(L>z&&z<Math.abs(R-k)/4e3?(E=L,S=!1):(E=Math.min(L,z),S=!0),m.type==="date"&&E>c){var C=E===n?1:6,D=E===n?"M12":"M1";return function(F,N){var G=m.c2d(F,n,_),U=G.indexOf("-",C);U>0&&(G=G.substr(0,U));var X=m.d2c(G,0,_);if(X<F){var I=o(X,D,!1,_);(X+I)/2<F+d&&(X=I)}return N&&S?o(X,D,!0,_):X}}return function(F,N){var G=E*Math.round(F/E);return G+E/10<F&&G+E*.9<F+d&&(G+=E),N&&S&&(G-=E),G}};function u(p,d,y,b){if(p*d<=0)return 1/0;for(var m=Math.abs(d-p),_=y.type==="date",T=h(m,_),g=0;g<10;g++){var A=h(T*80,_);if(T===A)break;if(i(A,p,d,_,y,b))T=A;else break}return T}function h(p,d){return d&&p>a?p>c?p>n*1.1?n:p>l*1.1?l:c:p>t?t:p>f?f:a:Math.pow(10,Math.floor(Math.log(p)/Math.LN10))}function i(p,d,y,b,m,_){if(b&&p>c){var T=s(d,m,_),g=s(y,m,_),A=p===n?0:1;return T[A]!==g[A]}return Math.floor(y/p)-Math.floor(d/p)>.1}function s(p,d,y){var b=d.c2d(p,n,y).split("-");return b[0]===""&&(b.unshift(),b[0]="-"+b[0]),b}},{"../../constants/numerical":753,"../../plots/cartesian/axes":828}],1089:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib"),l=e("../../registry"),c=e("../../plots/cartesian/axes"),t=e("../bar/arrays_to_calcdata"),f=e("./bin_functions"),a=e("./norm_functions"),o=e("./average"),u=e("./bin_label_vals");function h(y,b){var m=[],_=[],T=c.getFromId(y,b.orientation==="h"?b.yaxis:b.xaxis),g=b.orientation==="h"?"y":"x",A={x:"y",y:"x"}[g],k=b[g+"calendar"],R=b.cumulative,L,z=i(y,b,T,g),E=z[0],S=z[1],C=typeof E.size=="string",D=[],F=C?D:E,N=[],G=[],U=[],X=0,I=b.histnorm,B=b.histfunc,j=I.indexOf("density")!==-1,H,K,te;R.enabled&&j&&(I=I.replace(/ ?density$/,""),j=!1);var J=B==="max"||B==="min",oe=J?null:0,ie=f.count,Q=a[I],V=!1,se=function(tt){return T.r2c(tt,0,k)},re;for(n.isArrayOrTypedArray(b[A])&&B!=="count"&&(re=b[A],V=B==="avg",ie=f[B]),L=se(E.start),K=se(E.end)+(L-c.tickIncrement(L,E.size,!1,k))/1e6;L<K&&m.length<1e6&&(H=c.tickIncrement(L,E.size,!1,k),m.push((L+H)/2),_.push(oe),U.push([]),D.push(L),j&&N.push(1/(H-L)),V&&G.push(0),!(H<=L));)L=H;D.push(L),!C&&T.type==="date"&&(F={start:se(F.start),end:se(F.end),size:F.size}),y._fullLayout._roundFnOpts||(y._fullLayout._roundFnOpts={});var ee=b["_"+g+"bingroup"],ae={leftGap:1/0,rightGap:1/0};ee&&(y._fullLayout._roundFnOpts[ee]||(y._fullLayout._roundFnOpts[ee]=ae),ae=y._fullLayout._roundFnOpts[ee]);var fe=_.length,de=!0,pe=ae.leftGap,W=ae.rightGap,ue={};for(L=0;L<S.length;L++){var me=S[L];te=n.findBin(me,F),te>=0&&te<fe&&(X+=ie(te,L,_,re,G),de&&U[te].length&&me!==S[U[te][0]]&&(de=!1),U[te].push(L),ue[L]=te,pe=Math.min(pe,me-D[te]),W=Math.min(W,D[te+1]-me))}ae.leftGap=pe,ae.rightGap=W;var be;de||(be=function(tt,Ce){return function(){var Ae=y._fullLayout._roundFnOpts[ee];return u(Ae.leftGap,Ae.rightGap,D,T,k)(tt,Ce)}}),V&&(X=o(_,G)),Q&&Q(_,X,N),R.enabled&&d(_,R.direction,R.currentbin);var ke=Math.min(m.length,_.length),Pe=[],je=0,ze=ke-1;for(L=0;L<ke;L++)if(_[L]){je=L;break}for(L=ke-1;L>=je;L--)if(_[L]){ze=L;break}for(L=je;L<=ze;L++)if(r(m[L])&&r(_[L])){var Ze={p:m[L],s:_[L],b:0};R.enabled||(Ze.pts=U[L],de?Ze.ph0=Ze.ph1=U[L].length?S[U[L][0]]:m[L]:(b._computePh=!0,Ze.ph0=be(D[L]),Ze.ph1=be(D[L+1],!0))),Pe.push(Ze)}return Pe.length===1&&(Pe[0].width1=c.tickIncrement(Pe[0].p,E.size,!1,k)-Pe[0].p),t(Pe,b),n.isArrayOrTypedArray(b.selectedpoints)&&n.tagSelected(Pe,b,ue),Pe}function i(y,b,m,_,T){var g=_+"bins",A=y._fullLayout,k=b["_"+_+"bingroup"],R=A._histogramBinOpts[k],L=A.barmode==="overlay",z,E,S,C,D,F,N,G=function(be){return m.r2c(be,0,C)},U=function(be){return m.c2r(be,0,C)},X=m.type==="date"?function(be){return be||be===0?n.cleanDate(be,null,C):null}:function(be){return r(be)?Number(be):null};function I(be,ke,Pe){ke[be+"Found"]?(ke[be]=X(ke[be]),ke[be]===null&&(ke[be]=Pe[be])):(F[be]=ke[be]=Pe[be],n.nestedProperty(E[0],g+"."+be).set(Pe[be]))}if(b["_"+_+"autoBinFinished"])delete b["_"+_+"autoBinFinished"];else{E=R.traces;var B=[],j=!0,H=!1,K=!1;for(z=0;z<E.length;z++)if(S=E[z],S.visible){var te=R.dirs[z];D=S["_"+te+"pos0"]=m.makeCalcdata(S,te),B=n.concat(B,D),delete S["_"+_+"autoBinFinished"],b.visible===!0&&(j?j=!1:(delete S._autoBin,S["_"+_+"autoBinFinished"]=1),l.traceIs(S,"2dMap")&&(H=!0),S.type==="histogram2dcontour"&&(K=!0))}C=E[0][_+"calendar"];var J=c.autoBin(B,m,R.nbins,H,C,R.sizeFound&&R.size),oe=E[0]._autoBin={};if(F=oe[R.dirs[0]]={},K&&(R.size||(J.start=U(c.tickIncrement(G(J.start),J.size,!0,C))),R.end===void 0&&(J.end=U(c.tickIncrement(G(J.end),J.size,!1,C)))),L&&!l.traceIs(b,"2dMap")&&J._dataSpan===0&&m.type!=="category"&&m.type!=="multicategory"){if(T)return[J,D,!0];J=s(y,b,m,_,g)}N=S.cumulative||{},N.enabled&&N.currentbin!=="include"&&(N.direction==="decreasing"?J.start=U(c.tickIncrement(G(J.start),J.size,!0,C)):J.end=U(c.tickIncrement(G(J.end),J.size,!1,C))),R.size=J.size,R.sizeFound||(F.size=J.size,n.nestedProperty(E[0],g+".size").set(J.size)),I("start",R,J),I("end",R,J)}D=b["_"+_+"pos0"],delete b["_"+_+"pos0"];var ie=b._input[g]||{},Q=n.extendFlat({},R),V=R.start,se=m.r2l(ie.start),re=se!==void 0;if((R.startFound||re)&&se!==m.r2l(V)){var ee=re?se:n.aggNums(Math.min,null,D),ae={type:m.type==="category"||m.type==="multicategory"?"linear":m.type,r2l:m.r2l,dtick:R.size,tick0:V,calendar:C,range:[ee,c.tickIncrement(ee,R.size,!1,C)].map(m.l2r)},fe=c.tickFirst(ae);fe>m.r2l(ee)&&(fe=c.tickIncrement(fe,R.size,!0,C)),Q.start=m.l2r(fe),re||n.nestedProperty(b,g+".start").set(Q.start)}var de=R.end,pe=m.r2l(ie.end),W=pe!==void 0;if((R.endFound||W)&&pe!==m.r2l(de)){var ue=W?pe:n.aggNums(Math.max,null,D);Q.end=m.l2r(ue),W||n.nestedProperty(b,g+".start").set(Q.end)}var me="autobin"+_;return b._input[me]===!1&&(b._input[g]=n.extendFlat({},b[g]||{}),delete b._input[me],delete b[me]),[Q,D]}function s(y,b,m,_,T){var g=y._fullLayout,A=p(y,b),k=!1,R=1/0,L=[b],z,E,S;for(z=0;z<A.length;z++)if(E=A[z],E===b)k=!0;else if(!k)S=g._histogramBinOpts[E["_"+_+"bingroup"]],R=Math.min(R,S.size||E[T].size);else{var C=i(y,E,m,_,!0),D=C[0],F=C[2];E["_"+_+"autoBinFinished"]=1,E["_"+_+"pos0"]=C[1],F?L.push(E):R=Math.min(R,D.size)}var N=new Array(L.length);for(z=0;z<L.length;z++)for(var G=L[z]["_"+_+"pos0"],U=0;U<G.length;U++)if(G[U]!==void 0){N[z]=G[U];break}for(isFinite(R)||(R=n.distinctVals(N).minDiff),z=0;z<L.length;z++){E=L[z];var X=E[_+"calendar"],I={start:m.c2r(N[z]-R/2,0,X),end:m.c2r(N[z]+R/2,0,X),size:R};E._input[T]=E[T]=I,S=g._histogramBinOpts[E["_"+_+"bingroup"]],S&&n.extendFlat(S,I)}return b[T]}function p(y,b){for(var m=b.xaxis,_=b.yaxis,T=b.orientation,g=[],A=y._fullData,k=0;k<A.length;k++){var R=A[k];R.type==="histogram"&&R.visible===!0&&R.orientation===T&&R.xaxis===m&&R.yaxis===_&&g.push(R)}return g}function d(y,b,m){var _,T,g;function A(R){g=y[R],y[R]/=2}function k(R){T=y[R],y[R]=g+T/2,g+=T}if(m==="half")if(b==="increasing")for(A(0),_=1;_<y.length;_++)k(_);else for(A(y.length-1),_=y.length-2;_>=0;_--)k(_);else if(b==="increasing"){for(_=1;_<y.length;_++)y[_]+=y[_-1];m==="exclude"&&(y.unshift(0),y.pop())}else{for(_=y.length-2;_>=0;_--)y[_]+=y[_+1];m==="exclude"&&(y.push(0),y.shift())}}v.exports={calc:h,calcAllAutoBins:i}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"../bar/arrays_to_calcdata":920,"./average":1085,"./bin_functions":1087,"./bin_label_vals":1088,"./norm_functions":1096,"fast-isnumeric":241}],1090:[function(e,v,M){v.exports={eventDataKeys:["binNumber"]}},{}],1091:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/cartesian/axis_ids"),l=e("../../registry").traceIs,c=e("../bar/defaults").handleGroupingDefaults,t=r.nestedProperty,f=e("../../plots/cartesian/constraints").getAxisGroup,a=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],o=["x","y"];v.exports=function(h,i){var s=i._histogramBinOpts={},p=[],d={},y=[],b,m,_,T,g,A,k;function R(K,te){return r.coerce(b._input,b,b._module.attributes,K,te)}function L(K){return K.orientation==="v"?"x":"y"}function z(K,te){var J=n.getFromTrace({_fullLayout:i},K,te);return J.type}function E(K,te,J){var oe=K.uid+"__"+J;te||(te=oe);var ie=z(K,J),Q=K[J+"calendar"]||"",V=s[te],se=!0;V&&(ie===V.axType&&Q===V.calendar?(se=!1,V.traces.push(K),V.dirs.push(J)):(te=oe,ie!==V.axType&&r.warn(["Attempted to group the bins of trace",K.index,"set on a","type:"+ie,"axis","with bins on","type:"+V.axType,"axis."].join(" ")),Q!==V.calendar&&r.warn(["Attempted to group the bins of trace",K.index,"set with a",Q,"calendar","with bins",V.calendar?"on a "+V.calendar+" calendar":"w/o a set calendar"].join(" ")))),se&&(s[te]={traces:[K],dirs:[J],axType:ie,calendar:K[J+"calendar"]||""}),K["_"+J+"bingroup"]=te}for(g=0;g<h.length;g++)b=h[g],l(b,"histogram")&&(p.push(b),delete b._xautoBinFinished,delete b._yautoBinFinished,l(b,"2dMap")||c(b._input,b,i,R));var S=i._alignmentOpts||{};for(g=0;g<p.length;g++){if(b=p[g],_="",!l(b,"2dMap")){if(T=L(b),i.barmode==="group"&&b.alignmentgroup){var C=b[T+"axis"],D=f(i,C)+b.orientation;(S[D]||{})[b.alignmentgroup]&&(_=D)}!_&&i.barmode!=="overlay"&&(_=f(i,b.xaxis)+f(i,b.yaxis)+L(b))}_?(d[_]||(d[_]=[]),d[_].push(b)):y.push(b)}for(_ in d){if(m=d[_],m.length===1){y.push(m[0]);continue}var F=!1;for(m.length&&(b=m[0],F=R("bingroup")),_=F||_,g=0;g<m.length;g++){b=m[g];var N=b._input.bingroup;N&&N!==_&&r.warn(["Trace",b.index,"must match","within bingroup",_+".","Ignoring its bingroup:",N,"setting."].join(" ")),b.bingroup=_,E(b,_,L(b))}}for(g=0;g<y.length;g++){b=y[g];var G=R("bingroup");if(l(b,"2dMap"))for(k=0;k<2;k++){T=o[k];var U=R(T+"bingroup",G?G+"__"+T:null);E(b,U,T)}else E(b,G,L(b))}for(_ in s){var X=s[_];for(m=X.traces,A=0;A<a.length;A++){var I=a[A],B=I.name,j,H;if(!(B==="nbins"&&X.sizeFound)){for(g=0;g<m.length;g++){if(b=m[g],T=X.dirs[g],j=I.aStr[T],t(b._input,j).get()!==void 0){X[B]=R(j),X[B+"Found"]=!0;break}H=(b._autoBin||{})[T]||{},H[B]&&t(b,j).set(H[B])}if(B==="start"||B==="end")for(;g<m.length;g++)b=m[g],b["_"+T+"bingroup"]&&(H=(b._autoBin||{})[T]||{},R(j,H[B]));B==="nbins"&&!X.sizeFound&&!X.nbinsFound&&(b=m[0],X[B]=R(j))}}}}},{"../../lib":778,"../../plots/cartesian/axis_ids":831,"../../plots/cartesian/constraints":835,"../../registry":911,"../bar/defaults":925}],1092:[function(e,v,M){var r=e("../../registry"),n=e("../../lib"),l=e("../../components/color"),c=e("../bar/style_defaults"),t=e("./attributes");v.exports=function(a,o,u,h){function i(R,L){return n.coerce(a,o,t,R,L)}var s=i("x"),p=i("y"),d=i("cumulative.enabled");d&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text"),i("hovertext"),i("hovertemplate");var y=i("orientation",p&&!s?"h":"v"),b=y==="v"?"x":"y",m=y==="v"?"y":"x",_=s&&p?Math.min(n.minRowLength(s)&&n.minRowLength(p)):n.minRowLength(o[b]||[]);if(!_){o.visible=!1;return}o._length=_;var T=r.getComponentMethod("calendars","handleTraceDefaults");T(a,o,["x","y"],h);var g=o[m];g&&i("histfunc"),i("histnorm"),i("autobin"+b),c(a,o,i,u,h),n.coerceSelectionMarkerOpacity(o,i);var A=(o.marker.line||{}).color,k=r.getComponentMethod("errorbars","supplyDefaults");k(a,o,A||l.defaultLine,{axis:"y"}),k(a,o,A||l.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":643,"../../lib":778,"../../registry":911,"../bar/style_defaults":936,"./attributes":1084}],1093:[function(e,v,M){v.exports=function(n,l,c,t,f){if(n.x="xVal"in l?l.xVal:l.x,n.y="yVal"in l?l.yVal:l.y,"zLabelVal"in l&&(n.z=l.zLabelVal),l.xa&&(n.xaxis=l.xa),l.ya&&(n.yaxis=l.ya),!(c.cumulative||{}).enabled){var a=Array.isArray(f)?t[0].pts[f[0]][f[1]]:t[f].pts;n.pointNumbers=a,n.binNumber=n.pointNumber,delete n.pointNumber,delete n.pointIndex;var o;if(c._indexToPoints){o=[];for(var u=0;u<a.length;u++)o=o.concat(c._indexToPoints[a[u]])}else o=a;n.pointIndices=o}return n}},{}],1094:[function(e,v,M){var r=e("../bar/hover").hoverPoints,n=e("../../plots/cartesian/axes").hoverLabelText;v.exports=function(c,t,f,a){var o=r(c,t,f,a);if(o){c=o[0];var u=c.cd[c.index],h=c.cd[0].trace;if(!h.cumulative.enabled){var i=h.orientation==="h"?"y":"x";c[i+"Label"]=n(c[i+"a"],u.ph0,u.ph1)}return o}}},{"../../plots/cartesian/axes":828,"../bar/hover":928}],1095:[function(e,v,M){v.exports={attributes:e("./attributes"),layoutAttributes:e("../bar/layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),supplyLayoutDefaults:e("../bar/layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("../bar/cross_trace_calc").crossTraceCalc,plot:e("../bar/plot").plot,layerName:"barlayer",style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,colorbar:e("../scatter/marker_colorbar"),hoverPoints:e("./hover"),selectPoints:e("../bar/select"),eventData:e("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":841,"../bar/cross_trace_calc":924,"../bar/layout_attributes":930,"../bar/layout_defaults":931,"../bar/plot":932,"../bar/select":933,"../bar/style":935,"../scatter/marker_colorbar":1205,"./attributes":1084,"./calc":1089,"./cross_trace_defaults":1091,"./defaults":1092,"./event_data":1093,"./hover":1094}],1096:[function(e,v,M){v.exports={percent:function(r,n){for(var l=r.length,c=100/n,t=0;t<l;t++)r[t]*=c},probability:function(r,n){for(var l=r.length,c=0;c<l;c++)r[c]/=n},density:function(r,n,l,c){var t=r.length;c=c||1;for(var f=0;f<t;f++)r[f]*=l[f]*c},"probability density":function(r,n,l,c){var t=r.length;c&&(n/=c);for(var f=0;f<t;f++)r[f]*=l[f]/n}}},{}],1097:[function(e,v,M){var r=e("../histogram/attributes"),n=e("../histogram/bin_attributes"),l=e("../heatmap/attributes"),c=e("../../plots/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,f=e("../../components/colorscale/attributes"),a=e("../../lib/extend").extendFlat;v.exports=a({x:r.x,y:r.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:n("x"),nbinsy:r.nbinsy,ybins:n("y"),autobinx:r.autobinx,autobiny:r.autobiny,bingroup:a({},r.bingroup,{}),xbingroup:a({},r.bingroup,{}),ybingroup:a({},r.bingroup,{}),xgap:l.xgap,ygap:l.ygap,zsmooth:l.zsmooth,zhoverformat:l.zhoverformat,hovertemplate:t({},{keys:"z"}),showlegend:a({},c.showlegend,{dflt:!1})},f("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../heatmap/attributes":1065,"../histogram/attributes":1084,"../histogram/bin_attributes":1086}],1098:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/cartesian/axes"),l=e("../histogram/bin_functions"),c=e("../histogram/norm_functions"),t=e("../histogram/average"),f=e("../histogram/bin_label_vals"),a=e("../histogram/calc").calcAllAutoBins;v.exports=function(s,p){var d=n.getFromId(s,p.xaxis),y=n.getFromId(s,p.yaxis),b=p.xcalendar,m=p.ycalendar,_=function(dt){return d.r2c(dt,0,b)},T=function(dt){return y.r2c(dt,0,m)},g=function(dt){return d.c2r(dt,0,b)},A=function(dt){return y.c2r(dt,0,m)},k,R,L,z,E=a(s,p,d,"x"),S=E[0],C=E[1],D=a(s,p,y,"y"),F=D[0],N=D[1],G=p._length;C.length>G&&C.splice(G,C.length-G),N.length>G&&N.splice(G,N.length-G);var U=[],X=[],I=[],B=typeof S.size=="string",j=typeof F.size=="string",H=[],K=[],te=B?H:S,J=j?K:F,oe=0,ie=[],Q=[],V=p.histnorm,se=p.histfunc,re=V.indexOf("density")!==-1,ee=se==="max"||se==="min",ae=ee?null:0,fe=l.count,de=c[V],pe=!1,W=[],ue=[],me="z"in p?p.z:"marker"in p&&Array.isArray(p.marker.color)?p.marker.color:"";me&&se!=="count"&&(pe=se==="avg",fe=l[se]);var be=S.size,ke=_(S.start),Pe=_(S.end)+(ke-n.tickIncrement(ke,be,!1,b))/1e6;for(k=ke;k<Pe;k=n.tickIncrement(k,be,!1,b))X.push(ae),H.push(k),pe&&I.push(0);H.push(k);var je=X.length,ze=(k-ke)/je,Ze=g(ke+ze/2),tt=F.size,Ce=T(F.start),Ae=T(F.end)+(Ce-n.tickIncrement(Ce,tt,!1,m))/1e6;for(k=Ce;k<Ae;k=n.tickIncrement(k,tt,!1,m)){U.push(X.slice()),K.push(k);var Ne=new Array(je);for(R=0;R<je;R++)Ne[R]=[];Q.push(Ne),pe&&ie.push(I.slice())}K.push(k);var qe=U.length,At=(k-Ce)/qe,kt=A(Ce+At/2);re&&(W=o(X.length,te,ze,B),ue=o(U.length,J,At,j)),!B&&d.type==="date"&&(te=u(_,te)),!j&&y.type==="date"&&(J=u(T,J));var Ve=!0,ft=!0,St=new Array(je),Wt=new Array(qe),Qt=1/0,zt=1/0,$t=1/0,rr=1/0;for(k=0;k<G;k++){var Pt=C[k],Lt=N[k];L=r.findBin(Pt,te),z=r.findBin(Lt,J),L>=0&&L<je&&z>=0&&z<qe&&(oe+=fe(L,k,U[z],me,ie[z]),Q[z][L].push(k),Ve&&(St[L]===void 0?St[L]=Pt:St[L]!==Pt&&(Ve=!1)),ft&&(Wt[z]===void 0?Wt[z]=Lt:Wt[z]!==Lt&&(ft=!1)),Qt=Math.min(Qt,Pt-H[L]),zt=Math.min(zt,H[L+1]-Pt),$t=Math.min($t,Lt-K[z]),rr=Math.min(rr,K[z+1]-Lt))}if(pe)for(z=0;z<qe;z++)oe+=t(U[z],ie[z]);if(de)for(z=0;z<qe;z++)de(U[z],oe,W,ue[z]);return{x:C,xRanges:h(H,Ve&&St,Qt,zt,d,b),x0:Ze,dx:ze,y:N,yRanges:h(K,ft&&Wt,$t,rr,y,m),y0:kt,dy:At,z:U,pts:Q}};function o(i,s,p,d){var y=new Array(i),b;if(d)for(b=0;b<i;b++)y[b]=1/(s[b+1]-s[b]);else{var m=1/p;for(b=0;b<i;b++)y[b]=m}return y}function u(i,s){return{start:i(s.start),end:i(s.end),size:s.size}}function h(i,s,p,d,y,b){var m,_=i.length-1,T=new Array(_),g=f(p,d,i,y,b);for(m=0;m<_;m++){var A=(s||[])[m];T[m]=A===void 0?[g(i[m]),g(i[m+1],!0)]:[A,A]}return T}},{"../../lib":778,"../../plots/cartesian/axes":828,"../histogram/average":1085,"../histogram/bin_functions":1087,"../histogram/bin_label_vals":1088,"../histogram/calc":1089,"../histogram/norm_functions":1096}],1099:[function(e,v,M){var r=e("../../lib"),n=e("./sample_defaults"),l=e("../heatmap/style_defaults"),c=e("../../components/colorscale/defaults"),t=e("./attributes");v.exports=function(a,o,u,h){function i(s,p){return r.coerce(a,o,t,s,p)}n(a,o,i,h),o.visible!==!1&&(l(a,o,i,h),c(a,o,h,i,{prefix:"",cLetter:"z"}),i("hovertemplate"))}},{"../../components/colorscale/defaults":653,"../../lib":778,"../heatmap/style_defaults":1078,"./attributes":1097,"./sample_defaults":1102}],1100:[function(e,v,M){var r=e("../heatmap/hover"),n=e("../../plots/cartesian/axes").hoverLabelText;v.exports=function(c,t,f,a,o,u){var h=r(c,t,f,a,o,u);if(h){c=h[0];var i=c.index,s=i[0],p=i[1],d=c.cd[0],y=d.xRanges[p],b=d.yRanges[s];return c.xLabel=n(c.xa,y[0],y[1]),c.yLabel=n(c.ya,b[0],b[1]),h}}},{"../../plots/cartesian/axes":828,"../heatmap/hover":1072}],1101:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../heatmap/calc"),plot:e("../heatmap/plot"),layerName:"heatmaplayer",colorbar:e("../heatmap/colorbar"),style:e("../heatmap/style"),hoverPoints:e("./hover"),eventData:e("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":841,"../heatmap/calc":1066,"../heatmap/colorbar":1068,"../heatmap/plot":1076,"../heatmap/style":1077,"../histogram/cross_trace_defaults":1091,"../histogram/event_data":1093,"./attributes":1097,"./defaults":1099,"./hover":1100}],1102:[function(e,v,M){var r=e("../../registry"),n=e("../../lib");v.exports=function(c,t,f,a){var o=f("x"),u=f("y"),h=n.minRowLength(o),i=n.minRowLength(u);if(!h||!i){t.visible=!1;return}t._length=Math.min(h,i);var s=r.getComponentMethod("calendars","handleTraceDefaults");s(c,t,["x","y"],a);var p=f("z")||f("marker.color");p&&f("histfunc"),f("histnorm"),f("autobinx"),f("autobiny")}},{"../../lib":778,"../../registry":911}],1103:[function(e,v,M){var r=e("../histogram2d/attributes"),n=e("../contour/attributes"),l=e("../../components/colorscale/attributes"),c=e("../../lib/extend").extendFlat;v.exports=c({x:r.x,y:r.y,z:r.z,marker:r.marker,histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:r.xbins,nbinsy:r.nbinsy,ybins:r.ybins,autobinx:r.autobinx,autobiny:r.autobiny,bingroup:r.bingroup,xbingroup:r.xbingroup,ybingroup:r.ybingroup,autocontour:n.autocontour,ncontours:n.ncontours,contours:n.contours,line:{color:n.line.color,width:c({},n.line.width,{dflt:.5}),dash:n.line.dash,smoothing:n.line.smoothing,editType:"plot"},zhoverformat:r.zhoverformat,hovertemplate:r.hovertemplate},l("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../contour/attributes":1008,"../histogram2d/attributes":1097}],1104:[function(e,v,M){var r=e("../../lib"),n=e("../histogram2d/sample_defaults"),l=e("../contour/contours_defaults"),c=e("../contour/style_defaults"),t=e("./attributes");v.exports=function(a,o,u,h){function i(p,d){return r.coerce(a,o,t,p,d)}function s(p){return r.coerce2(a,o,t,p)}n(a,o,i,h),o.visible!==!1&&(l(a,o,i,s),c(a,o,i,h),i("hovertemplate"))}},{"../../lib":778,"../contour/contours_defaults":1015,"../contour/style_defaults":1029,"../histogram2d/sample_defaults":1102,"./attributes":1103}],1105:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../contour/calc"),plot:e("../contour/plot").plot,layerName:"contourlayer",style:e("../contour/style"),colorbar:e("../contour/colorbar"),hoverPoints:e("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":841,"../contour/calc":1009,"../contour/colorbar":1011,"../contour/hover":1021,"../contour/plot":1026,"../contour/style":1028,"../histogram/cross_trace_defaults":1091,"./attributes":1103,"./defaults":1104}],1106:[function(e,v,M){for(var r=e("../../plots/attributes"),n=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../lib/extend").extendFlat,c=e("./constants").colormodel,t=["rgb","rgba","rgba256","hsl","hsla"],f=[],a=[],o=0;o<t.length;o++){var u=c[t[o]];f.push("For the `"+t[o]+"` colormodel, it is ["+(u.zminDflt||u.min).join(", ")+"]."),a.push("For the `"+t[o]+"` colormodel, it is ["+(u.zmaxDflt||u.max).join(", ")+"].")}v.exports=l({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:t,editType:"calc"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:l({},r.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:n({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"./constants":1108}],1107:[function(e,v,M){var r=e("../../lib"),n=e("./constants"),l=e("fast-isnumeric"),c=e("../../plots/cartesian/axes"),t=e("../../lib").maxRowLength,f=e("./helpers").getImageSize;v.exports=function(i,s){var p,d;if(s._hasZ)p=s.z.length,d=t(s.z);else if(s._hasSource){var y=f(s.source);p=y.height,d=y.width}var b=c.getFromId(i,s.xaxis||"x"),m=c.getFromId(i,s.yaxis||"y"),_=b.d2c(s.x0)-s.dx/2,T=m.d2c(s.y0)-s.dy/2,g,A=[_,_+d*s.dx],k=[T,T+p*s.dy];if(b&&b.type==="log")for(g=0;g<d;g++)A.push(_+g*s.dx);if(m&&m.type==="log")for(g=0;g<p;g++)k.push(T+g*s.dy);s._extremes[b._id]=c.findExtremes(b,A),s._extremes[m._id]=c.findExtremes(m,k),s._scaler=u(s);var R={x0:_,y0:T,z:s.z,w:d,h:p};return[R]};function a(h,i,s,p){return function(d){return r.constrain((d-h)*i,s,p)}}function o(h,i){return function(s){return r.constrain(s,h,i)}}function u(h){var i=n.colormodel[h.colormodel],s=i.colormodel||h.colormodel,p=s.length;h._sArray=[];for(var d=0;d<p;d++)i.min[d]!==h.zmin[d]||i.max[d]!==h.zmax[d]?h._sArray.push(a(h.zmin[d],(i.max[d]-i.min[d])/(h.zmax[d]-h.zmin[d]),i.min[d],i.max[d])):h._sArray.push(o(i.min[d],i.max[d]));return function(y){for(var b=y.slice(0,p),m=0;m<p;m++){var _=b[m];if(!l(_))return!1;b[m]=h._sArray[m](_)}return b}}},{"../../lib":778,"../../plots/cartesian/axes":828,"./constants":1108,"./helpers":1111,"fast-isnumeric":241}],1108:[function(e,v,M){v.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(r){return r.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(r){return r.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(r){return r.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(r){var n=r.slice(0,3);return n[1]=n[1]+"%",n[2]=n[2]+"%",n},suffix:["°","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(r){var n=r.slice(0,4);return n[1]=n[1]+"%",n[2]=n[2]+"%",n},suffix:["°","%","%",""]}}}},{}],1109:[function(e,v,M){var r=e("../../lib"),n=e("./attributes"),l=e("./constants"),c=e("../../snapshot/helpers").IMAGE_URL_PREFIX;v.exports=function(f,a){function o(i,s){return r.coerce(f,a,n,i,s)}o("source"),a.source&&!a.source.match(c)&&delete a.source,a._hasSource=!!a.source;var u=o("z");if(a._hasZ=!(u===void 0||!u.length||!u[0]||!u[0].length),!a._hasZ&&!a._hasSource){a.visible=!1;return}o("x0"),o("y0"),o("dx"),o("dy");var h;a._hasZ?(o("colormodel","rgb"),h=l.colormodel[a.colormodel],o("zmin",h.zminDflt||h.min),o("zmax",h.zmaxDflt||h.max)):a._hasSource&&(a.colormodel="rgba256",h=l.colormodel[a.colormodel],a.zmin=h.zminDflt,a.zmax=h.zmaxDflt),o("text"),o("hovertext"),o("hovertemplate"),a._length=null}},{"../../lib":778,"../../snapshot/helpers":915,"./attributes":1106,"./constants":1108}],1110:[function(e,v,M){v.exports=function(n,l){return"xVal"in l&&(n.x=l.xVal),"yVal"in l&&(n.y=l.yVal),l.xa&&(n.xaxis=l.xa),l.ya&&(n.yaxis=l.ya),n.color=l.color,n.colormodel=l.trace.colormodel,n.z||(n.z=l.color),n}},{}],1111:[function(e,v,M){var r=e("image-size"),n=e("../../snapshot/helpers").IMAGE_URL_PREFIX,l=e("buffer/").Buffer;M.getImageSize=function(c){var t=c.replace(n,""),f=new l(t,"base64");return r(f)}},{"../../snapshot/helpers":915,"buffer/":111,"image-size":444}],1112:[function(e,v,M){var r=e("../../components/fx"),n=e("../../lib"),l=e("./constants");v.exports=function(t,f,a){var o=t.cd[0],u=o.trace,h=t.xa,i=t.ya;if(!(r.inbox(f-o.x0,f-(o.x0+o.w*u.dx),0)>0||r.inbox(a-o.y0,a-(o.y0+o.h*u.dy),0)>0)){var s=Math.floor((f-o.x0)/u.dx),p=Math.floor(Math.abs(a-o.y0)/u.dy),d;if(u._hasZ?d=o.z[p][s]:u._hasSource&&(d=u._canvas.el.getContext("2d").getImageData(s,p,1,1).data),!!d){var y=o.hi||u.hoverinfo,b;if(y){var m=y.split("+");m.indexOf("all")!==-1&&(m=["color"]),m.indexOf("color")!==-1&&(b=!0)}var _=l.colormodel[u.colormodel],T=_.colormodel||u.colormodel,g=T.length,A=u._scaler(d),k=_.suffix,R=[];(u.hovertemplate||b)&&(R.push("["+[A[0]+k[0],A[1]+k[1],A[2]+k[2]].join(", ")),g===4&&R.push(", "+A[3]+k[3]),R.push("]"),R=R.join(""),t.extraText=T.toUpperCase()+": "+R);var L;Array.isArray(u.hovertext)&&Array.isArray(u.hovertext[p])?L=u.hovertext[p][s]:Array.isArray(u.text)&&Array.isArray(u.text[p])&&(L=u.text[p][s]);var z=i.c2p(o.y0+(p+.5)*u.dy),E=o.x0+(s+.5)*u.dx,S=o.y0+(p+.5)*u.dy,C="["+d.slice(0,u.colormodel.length).join(", ")+"]";return[n.extendFlat(t,{index:[p,s],x0:h.c2p(o.x0+s*u.dx),x1:h.c2p(o.x0+(s+1)*u.dx),y0:z,y1:z,color:A,xVal:E,xLabelVal:E,yVal:S,yLabelVal:S,zLabelVal:C,text:L,hovertemplateLabels:{zLabel:C,colorLabel:R,"color[0]Label":A[0]+k[0],"color[1]Label":A[1]+k[1],"color[2]Label":A[2]+k[2],"color[3]Label":A[3]+k[3]}})]}}}},{"../../components/fx":683,"../../lib":778,"./constants":1108}],1113:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover"),eventData:e("./event_data"),moduleType:"trace",name:"image",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":841,"./attributes":1106,"./calc":1107,"./defaults":1109,"./event_data":1110,"./hover":1112,"./plot":1114,"./style":1115}],1114:[function(e,v,M){var r=e("d3"),n=e("../../lib"),l=n.strTranslate,c=e("../../constants/xmlns_namespaces"),t=e("./constants"),f=n.isIOS()||n.isSafari()||n.isIE();v.exports=function(o,u,h,i){var s=u.xaxis,p=u.yaxis,d=!(f||o._context._exportedPlot);n.makeTraceGroups(i,h,"im").each(function(y){var b=r.select(this),m=y[0],_=m.trace,T=d&&!_._hasZ&&_._hasSource&&s.type==="linear"&&p.type==="linear";_._fastImage=T;var g=m.z,A=m.x0,k=m.y0,R=m.w,L=m.h,z=_.dx,E=_.dy,S,C,D,F,N,G;for(G=0;S===void 0&&G<R;)S=s.c2p(A+G*z),G++;for(G=R;C===void 0&&G>0;)C=s.c2p(A+G*z),G--;for(G=0;F===void 0&&G<L;)F=p.c2p(k+G*E),G++;for(G=L;N===void 0&&G>0;)N=p.c2p(k+G*E),G--;if(C<S&&(D=C,C=S,S=D),N<F&&(D=F,F=N,N=D),!T){var U=.5;S=Math.max(-U*s._length,S),C=Math.min((1+U)*s._length,C),F=Math.max(-U*p._length,F),N=Math.min((1+U)*p._length,N)}var X=Math.round(C-S),I=Math.round(N-F),B=X<=0||I<=0;if(B){var j=b.selectAll("image").data([]);j.exit().remove();return}function H(ee){var ae=document.createElement("canvas");ae.width=X,ae.height=I;var fe=ae.getContext("2d"),de=function(tt){return n.constrain(Math.round(s.c2p(A+tt*z)-S),0,X)},pe=function(tt){return n.constrain(Math.round(p.c2p(k+tt*E)-F),0,I)},W=t.colormodel[_.colormodel],ue=W.colormodel||_.colormodel,me=W.fmt,be;for(G=0;G<m.w;G++){var ke=de(G),Pe=de(G+1);if(!(Pe===ke||isNaN(Pe)||isNaN(ke)))for(var je=0;je<m.h;je++){var ze=pe(je),Ze=pe(je+1);Ze===ze||isNaN(Ze)||isNaN(ze)||!ee(G,je)||(be=_._scaler(ee(G,je)),be?fe.fillStyle=ue+"("+me(be).join(",")+")":fe.fillStyle="rgba(0,0,0,0)",fe.fillRect(ke,ze,Pe-ke,Ze-ze))}}return ae}var K=b.selectAll("image").data([y]);K.enter().append("svg:image").attr({xmlns:c.svg,preserveAspectRatio:"none"}),K.exit().remove();var te="image-rendering: optimizeSpeed; image-rendering: -moz-crisp-edges; image-rendering: -o-crisp-edges; image-rendering: -webkit-optimize-contrast; image-rendering: optimize-contrast; image-rendering: crisp-edges; image-rendering: pixelated;";if(T){var J=n.simpleMap(s.range,s.r2l),oe=n.simpleMap(p.range,p.r2l),ie=J[1]<J[0],Q=oe[1]>oe[0];if(ie||Q){var V=S+X/2,se=F+I/2;te+="transform:"+l(V+"px",se+"px")+"scale("+(ie?-1:1)+","+(Q?-1:1)+")"+l(-V+"px",-se+"px")+";"}}K.attr("style",te);var re=new Promise(function(ee){if(_._hasZ)ee();else if(_._hasSource)if(_._canvas&&_._canvas.el.width===R&&_._canvas.el.height===L&&_._canvas.source===_.source)ee();else{var ae=document.createElement("canvas");ae.width=R,ae.height=L;var fe=ae.getContext("2d");_._image=_._image||new Image;var de=_._image;de.onload=function(){fe.drawImage(de,0,0),_._canvas={el:ae,source:_.source},ee()},de.setAttribute("src",_.source)}}).then(function(){var ee,ae;if(_._hasZ)ae=H(function(pe,W){return g[W][pe]}),ee=ae.toDataURL("image/png");else if(_._hasSource)if(T)ee=_.source;else{var fe=_._canvas.el.getContext("2d"),de=fe.getImageData(0,0,R,L).data;ae=H(function(pe,W){var ue=4*(W*R+pe);return[de[ue],de[ue+1],de[ue+2],de[ue+3]]}),ee=ae.toDataURL("image/png")}K.attr({"xlink:href":ee,height:I,width:X,x:S,y:F})});o._promises.push(re)})}},{"../../constants/xmlns_namespaces":754,"../../lib":778,"./constants":1108,d3:169}],1115:[function(e,v,M){var r=e("d3");v.exports=function(l){r.select(l).selectAll(".im image").style("opacity",function(c){return c[0].trace.opacity})}},{d3:169}],1116:[function(e,v,M){var r=e("../../lib/extend").extendFlat,n=e("../../lib/extend").extendDeep,l=e("../../plot_api/edit_types").overrideAll,c=e("../../plots/font_attributes"),t=e("../../components/color/attributes"),f=e("../../plots/domain").attributes,a=e("../../plots/cartesian/layout_attributes"),o=e("../../plot_api/plot_template").templatedArray,u=e("../../constants/delta.js");e("../../constants/docs").FORMAT_LINK;var h=c({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:t.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},s={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},p=o("step",n({},i,{range:s}));v.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:f({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:r({},h,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot"},font:r({},h,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot"},increasing:{symbol:{valType:"string",dflt:u.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:u.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:u.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:u.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:r({},h,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:n({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:t.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:l({range:s,visible:r({},a.visible,{dflt:!0}),tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:r({},a.ticks,{dflt:"outside"}),ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,tickfont:c({}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,minexponent:a.minexponent,showexponent:a.showexponent,editType:"plot"},"plot"),steps:p,threshold:{line:{color:r({},i.line.color,{}),width:r({},i.line.width,{dflt:1}),editType:"plot"},thickness:r({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":642,"../../constants/delta.js":747,"../../constants/docs":748,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/cartesian/layout_attributes":842,"../../plots/domain":855,"../../plots/font_attributes":856}],1117:[function(e,v,M){var r=e("../../plots/plots");M.name="indicator",M.plot=function(n,l,c,t){r.plotBasePlot(M.name,n,l,c,t)},M.clean=function(n,l,c,t){r.cleanBasePlot(M.name,n,l,c,t)}},{"../../plots/plots":891}],1118:[function(e,v,M){function r(n,l){var c=[],t=l.value;typeof l._lastValue!="number"&&(l._lastValue=l.value);var f=l._lastValue,a=f;return l._hasDelta&&typeof l.delta.reference=="number"&&(a=l.delta.reference),c[0]={y:t,lastY:f,delta:t-a,relativeDelta:(t-a)/a},c}v.exports={calc:r}},{}],1119:[function(e,v,M){v.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],1120:[function(e,v,M){var r=e("../../lib"),n=e("./attributes"),l=e("../../plots/domain").defaults,c=e("../../plot_api/plot_template"),t=e("../../plots/array_container_defaults"),f=e("./constants.js"),a=e("../../plots/cartesian/tick_value_defaults"),o=e("../../plots/cartesian/tick_mark_defaults"),u=e("../../plots/cartesian/tick_label_defaults");function h(s,p,d,y){function b(N,G){return r.coerce(s,p,n,N,G)}l(p,y,b),b("mode"),p._hasNumber=p.mode.indexOf("number")!==-1,p._hasDelta=p.mode.indexOf("delta")!==-1,p._hasGauge=p.mode.indexOf("gauge")!==-1;var m=b("value");p._range=[0,typeof m=="number"?1.5*m:1];var _=new Array(2),T;p._hasNumber&&(b("number.valueformat"),b("number.font.color",y.font.color),b("number.font.family",y.font.family),b("number.font.size"),p.number.font.size===void 0&&(p.number.font.size=f.defaultNumberFontSize,_[0]=!0),b("number.prefix"),b("number.suffix"),T=p.number.font.size);var g;p._hasDelta&&(b("delta.font.color",y.font.color),b("delta.font.family",y.font.family),b("delta.font.size"),p.delta.font.size===void 0&&(p.delta.font.size=(p._hasNumber?.5:1)*(T||f.defaultNumberFontSize),_[1]=!0),b("delta.reference",p.value),b("delta.relative"),b("delta.valueformat",p.delta.relative?"2%":""),b("delta.increasing.symbol"),b("delta.increasing.color"),b("delta.decreasing.symbol"),b("delta.decreasing.color"),b("delta.position"),g=p.delta.font.size),p._scaleNumbers=(!p._hasNumber||_[0])&&(!p._hasDelta||_[1])||!1,b("title.font.color",y.font.color),b("title.font.family",y.font.family),b("title.font.size",.25*(T||g||f.defaultNumberFontSize)),b("title.text");var A,k,R,L;function z(N,G){return r.coerce(A,k,n.gauge,N,G)}function E(N,G){return r.coerce(R,L,n.gauge.axis,N,G)}if(p._hasGauge){A=s.gauge,A||(A={}),k=c.newContainer(p,"gauge"),z("shape");var S=p._isBullet=p.gauge.shape==="bullet";S||b("title.align","center");var C=p._isAngular=p.gauge.shape==="angular";C||b("align","center"),z("bgcolor",y.paper_bgcolor),z("borderwidth"),z("bordercolor"),z("bar.color"),z("bar.line.color"),z("bar.line.width");var D=f.valueThickness*(p.gauge.shape==="bullet"?.5:1);z("bar.thickness",D),t(A,k,{name:"steps",handleItemDefaults:i}),z("threshold.value"),z("threshold.thickness"),z("threshold.line.width"),z("threshold.line.color"),R={},A&&(R=A.axis||{}),L=c.newContainer(k,"axis"),E("visible"),p._range=E("range",p._range);var F={outerTicks:!0};a(R,L,E,"linear"),u(R,L,E,"linear",F),o(R,L,E,F)}else b("title.align","center"),b("align","center"),p._isAngular=p._isBullet=!1;p._length=null}function i(s,p){function d(y,b){return r.coerce(s,p,n.gauge.steps,y,b)}d("color"),d("line.color"),d("line.width"),d("range"),d("thickness")}v.exports={supplyDefaults:h}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../../plots/cartesian/tick_label_defaults":849,"../../plots/cartesian/tick_mark_defaults":850,"../../plots/cartesian/tick_value_defaults":851,"../../plots/domain":855,"./attributes":1116,"./constants.js":1119}],1121:[function(e,v,M){v.exports={moduleType:"trace",name:"indicator",basePlotModule:e("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc").calc,plot:e("./plot"),meta:{}}},{"./attributes":1116,"./base_plot":1117,"./calc":1118,"./defaults":1120,"./plot":1122}],1122:[function(e,v,M){var r=e("d3"),n=e("../../lib"),l=n.strScale,c=n.strTranslate,t=n.rad2deg,f=e("../../constants/alignment").MID_SHIFT,a=e("../../components/drawing"),o=e("./constants"),u=e("../../lib/svg_text_utils"),h=e("../../plots/cartesian/axes"),i=e("../../plots/cartesian/axis_defaults"),s=e("../../plots/cartesian/position_defaults"),p=e("../../plots/cartesian/layout_attributes"),d=e("../../components/color"),y={left:"start",center:"middle",right:"end"},b={left:0,center:.5,right:1},m=/[yzafpnµmkMGTPEZY]/;function _(D){return D&&D.duration>0}v.exports=function(F,N,G,U){var X=F._fullLayout,I;_(G)&&U&&(I=U()),n.makeTraceGroups(X._indicatorlayer,N,"trace").each(function(B){var j=B[0],H=j.trace,K=r.select(this),te=H._hasGauge,J=H._isAngular,oe=H._isBullet,ie=H.domain,Q={w:X._size.w*(ie.x[1]-ie.x[0]),h:X._size.h*(ie.y[1]-ie.y[0]),l:X._size.l+X._size.w*ie.x[0],r:X._size.r+X._size.w*(1-ie.x[1]),t:X._size.t+X._size.h*(1-ie.y[1]),b:X._size.b+X._size.h*ie.y[0]},V=Q.l+Q.w/2,se=Q.t+Q.h/2,re=Math.min(Q.w/2,Q.h),ee=o.innerRadius*re,ae,fe,de,pe=H.align||"center";if(fe=se,!te)ae=Q.l+b[pe]*Q.w,de=function(tt){return z(tt,Q.w,Q.h)};else if(J&&(ae=V,fe=se+re/2,de=function(tt){return E(tt,.9*ee)}),oe){var W=o.bulletPadding,ue=1-o.bulletNumberDomainSize+W;ae=Q.l+(ue+(1-ue)*b[pe])*Q.w,de=function(tt){return z(tt,(o.bulletNumberDomainSize-W)*Q.w,Q.h)}}A(F,K,B,{numbersX:ae,numbersY:fe,numbersScaler:de,transitionOpts:G,onComplete:I});var me,be;te&&(me={range:H.gauge.axis.range,color:H.gauge.bgcolor,line:{color:H.gauge.bordercolor,width:0},thickness:1},be={range:H.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:H.gauge.bordercolor,width:H.gauge.borderwidth},thickness:1});var ke=K.selectAll("g.angular").data(J?B:[]);ke.exit().remove();var Pe=K.selectAll("g.angularaxis").data(J?B:[]);Pe.exit().remove(),J&&g(F,K,B,{radius:re,innerRadius:ee,gauge:ke,layer:Pe,size:Q,gaugeBg:me,gaugeOutline:be,transitionOpts:G,onComplete:I});var je=K.selectAll("g.bullet").data(oe?B:[]);je.exit().remove();var ze=K.selectAll("g.bulletaxis").data(oe?B:[]);ze.exit().remove(),oe&&T(F,K,B,{gauge:je,layer:ze,size:Q,gaugeBg:me,gaugeOutline:be,transitionOpts:G,onComplete:I});var Ze=K.selectAll("text.title").data(B);Ze.exit().remove(),Ze.enter().append("text").classed("title",!0),Ze.attr("text-anchor",function(){return oe?y.right:y[H.title.align]}).text(H.title.text).call(a.font,H.title.font).call(u.convertToTspans,F),Ze.attr("transform",function(){var tt=Q.l+Q.w*b[H.title.align],Ce,Ae=o.titlePadding,Ne=a.bBox(Ze.node());if(te){if(J)if(H.gauge.axis.visible){var qe=a.bBox(Pe.node());Ce=qe.top-Ae-Ne.bottom}else Ce=Q.t+Q.h/2-re/2-Ne.bottom-Ae;oe&&(Ce=fe-(Ne.top+Ne.bottom)/2,tt=Q.l-o.bulletPadding*Q.w)}else Ce=H._numbersTop-Ae-Ne.bottom;return c(tt,Ce)})})};function T(D,F,N,G){var U=N[0].trace,X=G.gauge,I=G.layer,B=G.gaugeBg,j=G.gaugeOutline,H=G.size,K=U.domain,te=G.transitionOpts,J=G.onComplete,oe,ie,Q,V,se;X.enter().append("g").classed("bullet",!0),X.attr("transform",c(H.l,H.t)),I.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),I.selectAll("g.xbulletaxistick,path,text").remove();var re=H.h,ee=U.gauge.bar.thickness*re,ae=K.x[0],fe=K.x[0]+(K.x[1]-K.x[0])*(U._hasNumber||U._hasDelta?1-o.bulletNumberDomainSize:1);oe=L(D,U.gauge.axis),oe._id="xbulletaxis",oe.domain=[ae,fe],oe.setScale(),ie=h.calcTicks(oe),Q=h.makeTransTickFn(oe),V=h.getTickSigns(oe)[2],se=H.t+H.h,oe.visible&&(h.drawTicks(D,oe,{vals:oe.ticks==="inside"?h.clipEnds(oe,ie):ie,layer:I,path:h.makeTickPath(oe,se,V),transFn:Q}),h.drawLabels(D,oe,{vals:ie,layer:I,transFn:Q,labelFns:h.makeLabelFns(oe,se)}));function de(Pe){Pe.attr("width",function(je){return Math.max(0,oe.c2p(je.range[1])-oe.c2p(je.range[0]))}).attr("x",function(je){return oe.c2p(je.range[0])}).attr("y",function(je){return .5*(1-je.thickness)*re}).attr("height",function(je){return je.thickness*re})}var pe=[B].concat(U.gauge.steps),W=X.selectAll("g.bg-bullet").data(pe);W.enter().append("g").classed("bg-bullet",!0).append("rect"),W.select("rect").call(de).call(k),W.exit().remove();var ue=X.selectAll("g.value-bullet").data([U.gauge.bar]);ue.enter().append("g").classed("value-bullet",!0).append("rect"),ue.select("rect").attr("height",ee).attr("y",(re-ee)/2).call(k),_(te)?ue.select("rect").transition().duration(te.duration).ease(te.easing).each("end",function(){J&&J()}).each("interrupt",function(){J&&J()}).attr("width",Math.max(0,oe.c2p(Math.min(U.gauge.axis.range[1],N[0].y)))):ue.select("rect").attr("width",typeof N[0].y=="number"?Math.max(0,oe.c2p(Math.min(U.gauge.axis.range[1],N[0].y))):0),ue.exit().remove();var me=N.filter(function(){return U.gauge.threshold.value}),be=X.selectAll("g.threshold-bullet").data(me);be.enter().append("g").classed("threshold-bullet",!0).append("line"),be.select("line").attr("x1",oe.c2p(U.gauge.threshold.value)).attr("x2",oe.c2p(U.gauge.threshold.value)).attr("y1",(1-U.gauge.threshold.thickness)/2*re).attr("y2",(1-(1-U.gauge.threshold.thickness)/2)*re).call(d.stroke,U.gauge.threshold.line.color).style("stroke-width",U.gauge.threshold.line.width),be.exit().remove();var ke=X.selectAll("g.gauge-outline").data([j]);ke.enter().append("g").classed("gauge-outline",!0).append("rect"),ke.select("rect").call(de).call(k),ke.exit().remove()}function g(D,F,N,G){var U=N[0].trace,X=G.size,I=G.radius,B=G.innerRadius,j=G.gaugeBg,H=G.gaugeOutline,K=[X.l+X.w/2,X.t+X.h/2+I/2],te=G.gauge,J=G.layer,oe=G.transitionOpts,ie=G.onComplete,Q=Math.PI/2;function V(At){var kt=U.gauge.axis.range[0],Ve=U.gauge.axis.range[1],ft=(At-kt)/(Ve-kt)*Math.PI-Q;return ft<-Q?-Q:ft>Q?Q:ft}function se(At){return r.svg.arc().innerRadius((B+I)/2-At/2*(I-B)).outerRadius((B+I)/2+At/2*(I-B)).startAngle(-Q)}function re(At){At.attr("d",function(kt){return se(kt.thickness).startAngle(V(kt.range[0])).endAngle(V(kt.range[1]))()})}var ee,ae,fe,de;te.enter().append("g").classed("angular",!0),te.attr("transform",c(K[0],K[1])),J.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),J.selectAll("g.xangularaxistick,path,text").remove(),ee=L(D,U.gauge.axis),ee.type="linear",ee.range=U.gauge.axis.range,ee._id="xangularaxis",ee.setScale();var pe=function(At){return(ee.range[0]-At.x)/(ee.range[1]-ee.range[0])*Math.PI+Math.PI},W={},ue=h.makeLabelFns(ee,0),me=ue.labelStandoff;W.xFn=function(At){var kt=pe(At);return Math.cos(kt)*me},W.yFn=function(At){var kt=pe(At),Ve=Math.sin(kt)>0?.2:1;return-Math.sin(kt)*(me+At.fontSize*Ve)+Math.abs(Math.cos(kt))*(At.fontSize*f)},W.anchorFn=function(At){var kt=pe(At),Ve=Math.cos(kt);return Math.abs(Ve)<.1?"middle":Ve>0?"start":"end"},W.heightFn=function(At,kt,Ve){var ft=pe(At);return-.5*(1+Math.sin(ft))*Ve};var be=function(At){return c(K[0]+I*Math.cos(At),K[1]-I*Math.sin(At))};fe=function(At){return be(pe(At))};var ke=function(At){var kt=pe(At);return be(kt)+"rotate("+-t(kt)+")"};if(ae=h.calcTicks(ee),de=h.getTickSigns(ee)[2],ee.visible){de=ee.ticks==="inside"?-1:1;var Pe=(ee.linewidth||1)/2;h.drawTicks(D,ee,{vals:ae,layer:J,path:"M"+de*Pe+",0h"+de*ee.ticklen,transFn:ke}),h.drawLabels(D,ee,{vals:ae,layer:J,transFn:fe,labelFns:W})}var je=[j].concat(U.gauge.steps),ze=te.selectAll("g.bg-arc").data(je);ze.enter().append("g").classed("bg-arc",!0).append("path"),ze.select("path").call(re).call(k),ze.exit().remove();var Ze=se(U.gauge.bar.thickness),tt=te.selectAll("g.value-arc").data([U.gauge.bar]);tt.enter().append("g").classed("value-arc",!0).append("path");var Ce=tt.select("path");_(oe)?(Ce.transition().duration(oe.duration).ease(oe.easing).each("end",function(){ie&&ie()}).each("interrupt",function(){ie&&ie()}).attrTween("d",R(Ze,V(N[0].lastY),V(N[0].y))),U._lastValue=N[0].y):Ce.attr("d",typeof N[0].y=="number"?Ze.endAngle(V(N[0].y)):"M0,0Z"),Ce.call(k),tt.exit().remove(),je=[];var Ae=U.gauge.threshold.value;Ae&&je.push({range:[Ae,Ae],color:U.gauge.threshold.color,line:{color:U.gauge.threshold.line.color,width:U.gauge.threshold.line.width},thickness:U.gauge.threshold.thickness});var Ne=te.selectAll("g.threshold-arc").data(je);Ne.enter().append("g").classed("threshold-arc",!0).append("path"),Ne.select("path").call(re).call(k),Ne.exit().remove();var qe=te.selectAll("g.gauge-outline").data([H]);qe.enter().append("g").classed("gauge-outline",!0).append("path"),qe.select("path").call(re).call(k),qe.exit().remove()}function A(D,F,N,G){var U=N[0].trace,X=G.numbersX,I=G.numbersY,B=U.align||"center",j=y[B],H=G.transitionOpts,K=G.onComplete,te=n.ensureSingle(F,"g","numbers"),J,oe,ie,Q=[];U._hasNumber&&Q.push("number"),U._hasDelta&&(Q.push("delta"),U.delta.position==="left"&&Q.reverse());var V=te.selectAll("text").data(Q);V.enter().append("text"),V.attr("text-anchor",function(){return j}).attr("class",function(be){return be}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),V.exit().remove();function se(be,ke,Pe,je){if(be.match("s")&&Pe>=0!=je>=0&&!ke(Pe).slice(-1).match(m)&&!ke(je).slice(-1).match(m)){var ze=be.slice().replace("s","f").replace(/\d+/,function(tt){return parseInt(tt)-1}),Ze=L(D,{tickformat:ze});return function(tt){return Math.abs(tt)<1?h.tickText(Ze,tt).text:ke(tt)}}else return ke}function re(){var be=L(D,{tickformat:U.number.valueformat},U._range);be.setScale(),h.prepTicks(be);var ke=function(tt){return h.tickText(be,tt).text},Pe=U.number.suffix,je=U.number.prefix,ze=te.select("text.number");function Ze(){var tt=typeof N[0].y=="number"?je+ke(N[0].y)+Pe:"-";ze.text(tt).call(a.font,U.number.font).call(u.convertToTspans,D)}return _(H)?ze.transition().duration(H.duration).ease(H.easing).each("end",function(){Ze(),K&&K()}).each("interrupt",function(){Ze(),K&&K()}).attrTween("text",function(){var tt=r.select(this),Ce=r.interpolateNumber(N[0].lastY,N[0].y);U._lastValue=N[0].y;var Ae=se(U.number.valueformat,ke,N[0].lastY,N[0].y);return function(Ne){tt.text(je+Ae(Ce(Ne))+Pe)}}):Ze(),J=S(je+ke(N[0].y)+Pe,U.number.font,j,D),ze}function ee(){var be=L(D,{tickformat:U.delta.valueformat},U._range);be.setScale(),h.prepTicks(be);var ke=function(Ce){return h.tickText(be,Ce).text},Pe=function(Ce){var Ae=U.delta.relative?Ce.relativeDelta:Ce.delta;return Ae},je=function(Ce,Ae){return Ce===0||typeof Ce!="number"||isNaN(Ce)?"-":(Ce>0?U.delta.increasing.symbol:U.delta.decreasing.symbol)+Ae(Ce)},ze=function(Ce){return Ce.delta>=0?U.delta.increasing.color:U.delta.decreasing.color};U._deltaLastValue===void 0&&(U._deltaLastValue=Pe(N[0]));var Ze=te.select("text.delta");Ze.call(a.font,U.delta.font).call(d.fill,ze({delta:U._deltaLastValue}));function tt(){Ze.text(je(Pe(N[0]),ke)).call(d.fill,ze(N[0])).call(u.convertToTspans,D)}return _(H)?Ze.transition().duration(H.duration).ease(H.easing).tween("text",function(){var Ce=r.select(this),Ae=Pe(N[0]),Ne=U._deltaLastValue,qe=se(U.delta.valueformat,ke,Ne,Ae),At=r.interpolateNumber(Ne,Ae);return U._deltaLastValue=Ae,function(kt){Ce.text(je(At(kt),qe)),Ce.call(d.fill,ze({delta:At(kt)}))}}).each("end",function(){tt(),K&&K()}).each("interrupt",function(){tt(),K&&K()}):tt(),oe=S(je(Pe(N[0]),ke),U.delta.font,j,D),Ze}var ae=U.mode+U.align,fe;if(U._hasDelta&&(fe=ee(),ae+=U.delta.position+U.delta.font.size+U.delta.font.family+U.delta.valueformat,ae+=U.delta.increasing.symbol+U.delta.decreasing.symbol,ie=oe),U._hasNumber&&(re(),ae+=U.number.font.size+U.number.font.family+U.number.valueformat+U.number.suffix+U.number.prefix,ie=J),U._hasDelta&&U._hasNumber){var de=[(J.left+J.right)/2,(J.top+J.bottom)/2],pe=[(oe.left+oe.right)/2,(oe.top+oe.bottom)/2],W,ue,me=.75*U.delta.font.size;U.delta.position==="left"&&(W=C(U,"deltaPos",0,-1*(J.width*b[U.align]+oe.width*(1-b[U.align])+me),ae,Math.min),ue=de[1]-pe[1],ie={width:J.width+oe.width+me,height:Math.max(J.height,oe.height),left:oe.left+W,right:J.right,top:Math.min(J.top,oe.top+ue),bottom:Math.max(J.bottom,oe.bottom+ue)}),U.delta.position==="right"&&(W=C(U,"deltaPos",0,J.width*(1-b[U.align])+oe.width*b[U.align]+me,ae,Math.max),ue=de[1]-pe[1],ie={width:J.width+oe.width+me,height:Math.max(J.height,oe.height),left:J.left,right:oe.right+W,top:Math.min(J.top,oe.top+ue),bottom:Math.max(J.bottom,oe.bottom+ue)}),U.delta.position==="bottom"&&(W=null,ue=oe.height,ie={width:Math.max(J.width,oe.width),height:J.height+oe.height,left:Math.min(J.left,oe.left),right:Math.max(J.right,oe.right),top:J.bottom-J.height,bottom:J.bottom+oe.height}),U.delta.position==="top"&&(W=null,ue=J.top,ie={width:Math.max(J.width,oe.width),height:J.height+oe.height,left:Math.min(J.left,oe.left),right:Math.max(J.right,oe.right),top:J.bottom-J.height-oe.height,bottom:J.bottom}),fe.attr({dx:W,dy:ue})}(U._hasNumber||U._hasDelta)&&te.attr("transform",function(){var be=G.numbersScaler(ie);ae+=be[2];var ke=C(U,"numbersScale",1,be[0],ae,Math.min),Pe;U._scaleNumbers||(ke=1),U._isAngular?Pe=I-ke*ie.bottom:Pe=I-ke*(ie.top+ie.bottom)/2,U._numbersTop=ke*ie.top+Pe;var je=ie[B];B==="center"&&(je=(ie.left+ie.right)/2);var ze=X-ke*je;return ze=C(U,"numbersTranslate",0,ze,ae,Math.max),c(ze,Pe)+l(ke)})}function k(D){D.each(function(F){d.stroke(r.select(this),F.line.color)}).each(function(F){d.fill(r.select(this),F.color)}).style("stroke-width",function(F){return F.line.width})}function R(D,F,N){return function(){var G=r.interpolate(F,N);return function(U){return D.endAngle(G(U))()}}}function L(D,F,N){var G=D._fullLayout,U=n.extendFlat({type:"linear",ticks:"outside",range:N,showline:!0},F),X={type:"linear",_id:"x"+F._id},I={letter:"x",font:G.font,noHover:!0,noTickson:!0};function B(j,H){return n.coerce(U,X,p,j,H)}return i(U,X,B,I,G),s(U,X,B,I),X}function z(D,F,N){var G=Math.min(F/D.width,N/D.height);return[G,D,F+"x"+N]}function E(D,F){var N=Math.sqrt(D.width/2*(D.width/2)+D.height*D.height),G=F/N;return[G,D,F]}function S(D,F,N,G){var U=document.createElementNS("http://www.w3.org/2000/svg","text"),X=r.select(U);return X.text(D).attr("x",0).attr("y",0).attr("text-anchor",N).attr("data-unformatted",D).call(u.convertToTspans,G).call(a.font,F),a.bBox(X.node())}function C(D,F,N,G,U,X){var I="_cache"+F;D[I]&&D[I].key===U||(D[I]={key:U,value:N});var B=n.aggNums(X,null,[D[I].value,G],2);return D[I].value=B,B}},{"../../components/color":643,"../../components/drawing":665,"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_defaults":830,"../../plots/cartesian/layout_attributes":842,"../../plots/cartesian/position_defaults":845,"./constants":1119,d3:169}],1123:[function(e,v,M){var r=e("../../components/colorscale/attributes"),n=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../mesh3d/attributes"),c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,f=e("../../plot_api/edit_types").overrideAll;function a(h){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function o(h){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var u=v.exports=f(t({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:a(),y:a(),z:a()},caps:{x:o(),y:o(),z:o()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:n(),showlegend:t({},c.showlegend,{dflt:!1})},r("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:l.opacity,lightposition:l.lightposition,lighting:l.lighting,flatshading:l.flatshading,contour:l.contour,hoverinfo:t({},c.hoverinfo)}),"calc","nested");u.flatshading.dflt=!0,u.lighting.facenormalsepsilon.dflt=0,u.x.editType=u.y.editType=u.z.editType=u.value.editType="calc+clearAxisTypes",u.transforms=void 0},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906,"../mesh3d/attributes":1128}],1124:[function(e,v,M){var r=e("../../components/colorscale/calc"),n=e("../streamtube/calc").processGrid,l=e("../streamtube/calc").filter;v.exports=function(t,f){f._len=Math.min(f.x.length,f.y.length,f.z.length,f.value.length),f._x=l(f.x,f._len),f._y=l(f.y,f._len),f._z=l(f.z,f._len),f._value=l(f.value,f._len);var a=n(f);f._gridFill=a.fill,f._Xs=a.Xs,f._Ys=a.Ys,f._Zs=a.Zs,f._len=a.len;for(var o=1/0,u=-1/0,h=0;h<f._len;h++){var i=f._value[h];o=Math.min(o,i),u=Math.max(u,i)}f._minValues=o,f._maxValues=u,f._vMin=f.isomin===void 0||f.isomin===null?o:f.isomin,f._vMax=f.isomax===void 0||f.isomin===null?u:f.isomax,r(t,f,{vals:[f._vMin,f._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651,"../streamtube/calc":1295}],1125:[function(e,v,M){var r=e("gl-mesh3d"),n=e("../../lib/gl_format_color").parseColorScale,l=e("../../lib/str2rgbarray"),c=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),f=function(s,p){for(var d=p.length-1;d>0;d--){var y=Math.min(p[d],p[d-1]),b=Math.max(p[d],p[d-1]);if(b>y&&y<s&&s<=b)return{id:d,distRatio:(b-s)/(b-y)}}return{id:0,distRatio:0}};function a(s,p,d){this.scene=s,this.uid=d,this.mesh=p,this.name="",this.data=null,this.showContour=!1}var o=a.prototype;o.handlePick=function(s){if(s.object===this.mesh){var p=s.data.index,d=this.data._meshX[p],y=this.data._meshY[p],b=this.data._meshZ[p],m=this.data._Ys.length,_=this.data._Zs.length,T=f(d,this.data._Xs).id,g=f(y,this.data._Ys).id,A=f(b,this.data._Zs).id,k=s.index=A+_*g+_*m*T;s.traceCoordinate=[this.data._meshX[k],this.data._meshY[k],this.data._meshZ[k],this.data._value[k]];var R=this.data.hovertext||this.data.text;return Array.isArray(R)&&R[k]!==void 0?s.textLabel=R[k]:R&&(s.textLabel=R),!0}},o.update=function(s){var p=this.scene,d=p.fullSceneLayout;this.data=h(s);function y(g,A,k,R){return A.map(function(L){return g.d2l(L,0,R)*k})}var b=t(y(d.xaxis,s._meshX,p.dataScale[0],s.xcalendar),y(d.yaxis,s._meshY,p.dataScale[1],s.ycalendar),y(d.zaxis,s._meshZ,p.dataScale[2],s.zcalendar)),m=t(s._meshI,s._meshJ,s._meshK),_={positions:b,cells:m,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,contourEnable:s.contour.show,contourColor:l(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},T=c(s);_.vertexIntensity=s._meshIntensity,_.vertexIntensityBounds=[T.min,T.max],_.colormap=n(s),this.mesh.update(_)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var u=["xyz","xzy","yxz","yzx","zxy","zyx"];function h(s){s._meshI=[],s._meshJ=[],s._meshK=[];var p=s.surface.show,d=s.spaceframe.show,y=s.surface.fill,b=s.spaceframe.fill,m=!1,_=!1,T=0,g,A,k=s._Xs,R=s._Ys,L=s._Zs,z=k.length,E=R.length,S=L.length,C=u.indexOf(s._gridFill.replace(/-/g,"").replace(/\+/g,"")),D=function(Pt,Lt,dt){switch(C){case 5:return dt+S*Lt+S*E*Pt;case 4:return dt+S*Pt+S*z*Lt;case 3:return Lt+E*dt+E*S*Pt;case 2:return Lt+E*Pt+E*z*dt;case 1:return Pt+z*dt+z*S*Lt;default:return Pt+z*Lt+z*E*dt}},F=s._minValues,N=s._maxValues,G=s._vMin,U=s._vMax,X,I,B,j;function H(Pt,Lt,dt){for(var lt=j.length,Te=A;Te<lt;Te++)if(Pt===X[Te]&&Lt===I[Te]&&dt===B[Te])return Te;return-1}function K(){A=g}function te(){X=[],I=[],B=[],j=[],g=0,K()}function J(Pt,Lt,dt,lt){return X.push(Pt),I.push(Lt),B.push(dt),j.push(lt),g++,g-1}function oe(Pt,Lt,dt){return s._meshI.push(Pt),s._meshJ.push(Lt),s._meshK.push(dt),T++,T-1}function ie(Pt,Lt,dt){for(var lt=[],Te=0;Te<Pt.length;Te++)lt[Te]=(Pt[Te]+Lt[Te]+dt[Te])/3;return lt}function Q(Pt,Lt,dt){for(var lt=[],Te=0;Te<Pt.length;Te++)lt[Te]=Pt[Te]*(1-dt)+dt*Lt[Te];return lt}var V;function se(Pt){V=Pt}function re(Pt,Lt){var dt=Pt[0],lt=Pt[1],Te=Pt[2],Le=ie(dt,lt,Te),Be=Math.sqrt(1-V),et=Q(Le,dt,Be),Me=Q(Le,lt,Be),Ie=Q(Le,Te,Be),He=Lt[0],Xe=Lt[1],ht=Lt[2];return{xyzv:[[dt,lt,Me],[Me,et,dt],[lt,Te,Ie],[Ie,Me,lt],[Te,dt,et],[et,Ie,Te]],abc:[[He,Xe,-1],[-1,-1,He],[Xe,ht,-1],[-1,-1,Xe],[ht,He,-1],[-1,-1,ht]]}}function ee(Pt,Lt){return Pt==="all"||Pt===null?!0:Pt.indexOf(Lt)>-1}function ae(Pt,Lt){return Pt===null?Lt:Pt}function fe(Pt,Lt,dt){K();var lt=[Lt],Te=[dt];if(V>=1)lt=[Lt],Te=[dt];else if(V>0){var Le=re(Lt,dt);lt=Le.xyzv,Te=Le.abc}for(var Be=0;Be<lt.length;Be++){Lt=lt[Be],dt=Te[Be];for(var et=[],Me=0;Me<3;Me++){var Ie=Lt[Me][0],He=Lt[Me][1],Xe=Lt[Me][2],ht=Lt[Me][3],it=dt[Me]>-1?dt[Me]:H(Ie,He,Xe);it>-1?et[Me]=it:et[Me]=J(Ie,He,Xe,ae(Pt,ht))}oe(et[0],et[1],et[2])}}function de(Pt,Lt,dt){var lt=function(Te,Le,Be){fe(Pt,[Lt[Te],Lt[Le],Lt[Be]],[dt[Te],dt[Le],dt[Be]])};lt(0,1,2),lt(2,3,0)}function pe(Pt,Lt,dt){var lt=function(Te,Le,Be){fe(Pt,[Lt[Te],Lt[Le],Lt[Be]],[dt[Te],dt[Le],dt[Be]])};lt(0,1,2),lt(3,0,1),lt(2,3,0),lt(1,2,3)}function W(Pt,Lt,dt,lt){var Te=Pt[3];Te<dt&&(Te=dt),Te>lt&&(Te=lt);for(var Le=(Pt[3]-Te)/(Pt[3]-Lt[3]+1e-9),Be=[],et=0;et<4;et++)Be[et]=(1-Le)*Pt[et]+Le*Lt[et];return Be}function ue(Pt,Lt,dt){return Pt>=Lt&&Pt<=dt}function me(Pt){var Lt=.001*(U-G);return Pt>=G-Lt&&Pt<=U+Lt}function be(Pt){for(var Lt=[],dt=0;dt<4;dt++){var lt=Pt[dt];Lt.push([s._x[lt],s._y[lt],s._z[lt],s._value[lt]])}return Lt}var ke=3;function Pe(Pt,Lt,dt,lt,Te,Le){Le||(Le=1),dt=[-1,-1,-1];var Be=!1,et=[ue(Lt[0][3],lt,Te),ue(Lt[1][3],lt,Te),ue(Lt[2][3],lt,Te)];if(!et[0]&&!et[1]&&!et[2])return!1;var Me=function(He,Xe,ht){return me(Xe[0][3])&&me(Xe[1][3])&&me(Xe[2][3])?(fe(He,Xe,ht),!0):Le<ke?Pe(He,Xe,ht,G,U,++Le):!1};if(et[0]&&et[1]&&et[2])return Me(Pt,Lt,dt)||Be;var Ie=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(He){if(et[He[0]]&&et[He[1]]&&!et[He[2]]){var Xe=Lt[He[0]],ht=Lt[He[1]],it=Lt[He[2]],Ge=W(it,Xe,lt,Te),ot=W(it,ht,lt,Te);Be=Me(Pt,[ot,Ge,Xe],[-1,-1,dt[He[0]]])||Be,Be=Me(Pt,[Xe,ht,ot],[dt[He[0]],dt[He[1]],-1])||Be,Ie=!0}}),Ie||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(He){if(et[He[0]]&&!et[He[1]]&&!et[He[2]]){var Xe=Lt[He[0]],ht=Lt[He[1]],it=Lt[He[2]],Ge=W(ht,Xe,lt,Te),ot=W(it,Xe,lt,Te);Be=Me(Pt,[ot,Ge,Xe],[-1,-1,dt[He[0]]])||Be,Ie=!0}}),Be}function je(Pt,Lt,dt,lt){var Te=!1,Le=be(Lt),Be=[ue(Le[0][3],dt,lt),ue(Le[1][3],dt,lt),ue(Le[2][3],dt,lt),ue(Le[3][3],dt,lt)];if(!Be[0]&&!Be[1]&&!Be[2]&&!Be[3])return Te;if(Be[0]&&Be[1]&&Be[2]&&Be[3])return _&&(Te=pe(Pt,Le,Lt)||Te),Te;var et=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Me){if(Be[Me[0]]&&Be[Me[1]]&&Be[Me[2]]&&!Be[Me[3]]){var Ie=Le[Me[0]],He=Le[Me[1]],Xe=Le[Me[2]],ht=Le[Me[3]];if(_)Te=fe(Pt,[Ie,He,Xe],[Lt[Me[0]],Lt[Me[1]],Lt[Me[2]]])||Te;else{var it=W(ht,Ie,dt,lt),Ge=W(ht,He,dt,lt),ot=W(ht,Xe,dt,lt);Te=fe(null,[it,Ge,ot],[-1,-1,-1])||Te}et=!0}}),et||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Me){if(Be[Me[0]]&&Be[Me[1]]&&!Be[Me[2]]&&!Be[Me[3]]){var Ie=Le[Me[0]],He=Le[Me[1]],Xe=Le[Me[2]],ht=Le[Me[3]],it=W(Xe,Ie,dt,lt),Ge=W(Xe,He,dt,lt),ot=W(ht,He,dt,lt),Je=W(ht,Ie,dt,lt);_?(Te=fe(Pt,[Ie,Je,it],[Lt[Me[0]],-1,-1])||Te,Te=fe(Pt,[He,Ge,ot],[Lt[Me[1]],-1,-1])||Te):Te=de(null,[it,Ge,ot,Je],[-1,-1,-1,-1])||Te,et=!0}}),et)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Me){if(Be[Me[0]]&&!Be[Me[1]]&&!Be[Me[2]]&&!Be[Me[3]]){var Ie=Le[Me[0]],He=Le[Me[1]],Xe=Le[Me[2]],ht=Le[Me[3]],it=W(He,Ie,dt,lt),Ge=W(Xe,Ie,dt,lt),ot=W(ht,Ie,dt,lt);_?(Te=fe(Pt,[Ie,it,Ge],[Lt[Me[0]],-1,-1])||Te,Te=fe(Pt,[Ie,Ge,ot],[Lt[Me[0]],-1,-1])||Te,Te=fe(Pt,[Ie,ot,it],[Lt[Me[0]],-1,-1])||Te):Te=fe(null,[it,Ge,ot],[-1,-1,-1])||Te,et=!0}}),Te}function ze(Pt,Lt,dt,lt,Te,Le,Be,et,Me,Ie,He){var Xe=!1;return m&&(ee(Pt,"A")&&(Xe=je(null,[Lt,dt,lt,Le],Ie,He)||Xe),ee(Pt,"B")&&(Xe=je(null,[dt,lt,Te,Me],Ie,He)||Xe),ee(Pt,"C")&&(Xe=je(null,[dt,Le,Be,Me],Ie,He)||Xe),ee(Pt,"D")&&(Xe=je(null,[lt,Le,et,Me],Ie,He)||Xe),ee(Pt,"E")&&(Xe=je(null,[dt,lt,Le,Me],Ie,He)||Xe)),_&&(Xe=je(Pt,[dt,lt,Le,Me],Ie,He)||Xe),Xe}function Ze(Pt,Lt,dt,lt,Te,Le,Be,et){return[et[0]===!0?!0:Pe(Pt,be([Lt,dt,lt]),[Lt,dt,lt],Le,Be),et[1]===!0?!0:Pe(Pt,be([lt,Te,Lt]),[lt,Te,Lt],Le,Be)]}function tt(Pt,Lt,dt,lt,Te,Le,Be,et,Me){return et?Ze(Pt,Lt,dt,Te,lt,Le,Be,Me):Ze(Pt,dt,Te,lt,Lt,Le,Be,Me)}function Ce(Pt,Lt,dt,lt,Te,Le,Be){var et=!1,Me,Ie,He,Xe,ht=function(){et=Pe(Pt,[Me,Ie,He],[-1,-1,-1],Te,Le)||et,et=Pe(Pt,[He,Xe,Me],[-1,-1,-1],Te,Le)||et},it=Be[0],Ge=Be[1],ot=Be[2];return it&&(Me=Q(be([D(Lt,dt-0,lt-0)])[0],be([D(Lt-1,dt-0,lt-0)])[0],it),Ie=Q(be([D(Lt,dt-0,lt-1)])[0],be([D(Lt-1,dt-0,lt-1)])[0],it),He=Q(be([D(Lt,dt-1,lt-1)])[0],be([D(Lt-1,dt-1,lt-1)])[0],it),Xe=Q(be([D(Lt,dt-1,lt-0)])[0],be([D(Lt-1,dt-1,lt-0)])[0],it),ht()),Ge&&(Me=Q(be([D(Lt-0,dt,lt-0)])[0],be([D(Lt-0,dt-1,lt-0)])[0],Ge),Ie=Q(be([D(Lt-0,dt,lt-1)])[0],be([D(Lt-0,dt-1,lt-1)])[0],Ge),He=Q(be([D(Lt-1,dt,lt-1)])[0],be([D(Lt-1,dt-1,lt-1)])[0],Ge),Xe=Q(be([D(Lt-1,dt,lt-0)])[0],be([D(Lt-1,dt-1,lt-0)])[0],Ge),ht()),ot&&(Me=Q(be([D(Lt-0,dt-0,lt)])[0],be([D(Lt-0,dt-0,lt-1)])[0],ot),Ie=Q(be([D(Lt-0,dt-1,lt)])[0],be([D(Lt-0,dt-1,lt-1)])[0],ot),He=Q(be([D(Lt-1,dt-1,lt)])[0],be([D(Lt-1,dt-1,lt-1)])[0],ot),Xe=Q(be([D(Lt-1,dt-0,lt)])[0],be([D(Lt-1,dt-0,lt-1)])[0],ot),ht()),et}function Ae(Pt,Lt,dt,lt,Te,Le,Be,et,Me,Ie,He,Xe){var ht=Pt;return Xe?(m&&Pt==="even"&&(ht=null),ze(ht,Lt,dt,lt,Te,Le,Be,et,Me,Ie,He)):(m&&Pt==="odd"&&(ht=null),ze(ht,Me,et,Be,Le,Te,lt,dt,Lt,Ie,He))}function Ne(Pt,Lt,dt,lt,Te){for(var Le=[],Be=0,et=0;et<Lt.length;et++)for(var Me=Lt[et],Ie=1;Ie<S;Ie++)for(var He=1;He<E;He++)Le.push(tt(Pt,D(Me,He-1,Ie-1),D(Me,He-1,Ie),D(Me,He,Ie-1),D(Me,He,Ie),dt,lt,(Me+He+Ie)%2,Te&&Te[Be]?Te[Be]:[])),Be++;return Le}function qe(Pt,Lt,dt,lt,Te){for(var Le=[],Be=0,et=0;et<Lt.length;et++)for(var Me=Lt[et],Ie=1;Ie<z;Ie++)for(var He=1;He<S;He++)Le.push(tt(Pt,D(Ie-1,Me,He-1),D(Ie,Me,He-1),D(Ie-1,Me,He),D(Ie,Me,He),dt,lt,(Ie+Me+He)%2,Te&&Te[Be]?Te[Be]:[])),Be++;return Le}function At(Pt,Lt,dt,lt,Te){for(var Le=[],Be=0,et=0;et<Lt.length;et++)for(var Me=Lt[et],Ie=1;Ie<E;Ie++)for(var He=1;He<z;He++)Le.push(tt(Pt,D(He-1,Ie-1,Me),D(He-1,Ie,Me),D(He,Ie-1,Me),D(He,Ie,Me),dt,lt,(He+Ie+Me)%2,Te&&Te[Be]?Te[Be]:[])),Be++;return Le}function kt(Pt,Lt,dt){for(var lt=1;lt<S;lt++)for(var Te=1;Te<E;Te++)for(var Le=1;Le<z;Le++)Ae(Pt,D(Le-1,Te-1,lt-1),D(Le-1,Te-1,lt),D(Le-1,Te,lt-1),D(Le-1,Te,lt),D(Le,Te-1,lt-1),D(Le,Te-1,lt),D(Le,Te,lt-1),D(Le,Te,lt),Lt,dt,(Le+Te+lt)%2)}function Ve(Pt,Lt,dt){_=!0,kt(Pt,Lt,dt),_=!1}function ft(Pt,Lt,dt){m=!0,kt(Pt,Lt,dt),m=!1}function St(Pt,Lt,dt,lt,Te,Le){for(var Be=[],et=0,Me=0;Me<Lt.length;Me++)for(var Ie=Lt[Me],He=1;He<S;He++)for(var Xe=1;Xe<E;Xe++)Be.push(Ce(Pt,Ie,Xe,He,dt,lt,Te[Me],Le&&Le[et]?Le[et]:[])),et++;return Be}function Wt(Pt,Lt,dt,lt,Te,Le){for(var Be=[],et=0,Me=0;Me<Lt.length;Me++)for(var Ie=Lt[Me],He=1;He<z;He++)for(var Xe=1;Xe<S;Xe++)Be.push(Ce(Pt,He,Ie,Xe,dt,lt,Te[Me],Le&&Le[et]?Le[et]:[])),et++;return Be}function Qt(Pt,Lt,dt,lt,Te,Le){for(var Be=[],et=0,Me=0;Me<Lt.length;Me++)for(var Ie=Lt[Me],He=1;He<E;He++)for(var Xe=1;Xe<z;Xe++)Be.push(Ce(Pt,Xe,He,Ie,dt,lt,Te[Me],Le&&Le[et]?Le[et]:[])),et++;return Be}function zt(Pt,Lt){for(var dt=[],lt=Pt;lt<Lt;lt++)dt.push(lt);return dt}function $t(){for(var Pt=0;Pt<z;Pt++)for(var Lt=0;Lt<E;Lt++)for(var dt=0;dt<S;dt++){var lt=D(Pt,Lt,dt);J(s._x[lt],s._y[lt],s._z[lt],s._value[lt])}}function rr(){te(),$t();var Pt=null;if(d&&b&&(se(b),Ve(Pt,G,U)),p&&y){se(y);for(var Lt=s.surface.pattern,dt=s.surface.count,lt=0;lt<dt;lt++){var Te=dt===1?.5:lt/(dt-1),Le=(1-Te)*G+Te*U,Be=Math.abs(Le-F),et=Math.abs(Le-N),Me=Be>et?[F,Le]:[Le,N];ft(Lt,Me[0],Me[1])}}var Ie=[[Math.min(G,N),Math.max(G,N)],[Math.min(F,U),Math.max(F,U)]];["x","y","z"].forEach(function(He){for(var Xe=[],ht=0;ht<Ie.length;ht++){var it=0,Ge=Ie[ht][0],ot=Ie[ht][1],Je=s.slices[He];if(Je.show&&Je.fill){se(Je.fill);var st=[],It=[],Ft=[];if(Je.locations.length)for(var nr=0;nr<Je.locations.length;nr++){var We=f(Je.locations[nr],He==="x"?k:He==="y"?R:L);We.distRatio===0?st.push(We.id):We.id>0&&(It.push(We.id),He==="x"?Ft.push([We.distRatio,0,0]):He==="y"?Ft.push([0,We.distRatio,0]):Ft.push([0,0,We.distRatio]))}else He==="x"?st=zt(1,z-1):He==="y"?st=zt(1,E-1):st=zt(1,S-1);It.length>0&&(He==="x"?Xe[it]=St(Pt,It,Ge,ot,Ft,Xe[it]):He==="y"?Xe[it]=Wt(Pt,It,Ge,ot,Ft,Xe[it]):Xe[it]=Qt(Pt,It,Ge,ot,Ft,Xe[it]),it++),st.length>0&&(He==="x"?Xe[it]=Ne(Pt,st,Ge,ot,Xe[it]):He==="y"?Xe[it]=qe(Pt,st,Ge,ot,Xe[it]):Xe[it]=At(Pt,st,Ge,ot,Xe[it]),it++)}var Fe=s.caps[He];Fe.show&&Fe.fill&&(se(Fe.fill),He==="x"?Xe[it]=Ne(Pt,[0,z-1],Ge,ot,Xe[it]):He==="y"?Xe[it]=qe(Pt,[0,E-1],Ge,ot,Xe[it]):Xe[it]=At(Pt,[0,S-1],Ge,ot,Xe[it]),it++)}}),T===0&&te(),s._meshX=X,s._meshY=I,s._meshZ=B,s._meshIntensity=j,s._Xs=k,s._Ys=R,s._Zs=L}return rr(),s}function i(s,p){var d=s.glplot.gl,y=r({gl:d}),b=new a(s,y,p.uid);return y._trace=b,b.update(p),s.glplot.add(y),b}v.exports={findNearestOnAxis:f,generateIsoMeshes:h,createIsosurfaceTrace:i}},{"../../components/colorscale":655,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/gl3d/zip3":881,"gl-mesh3d":309}],1126:[function(e,v,M){var r=e("../../lib"),n=e("../../registry"),l=e("./attributes"),c=e("../../components/colorscale/defaults");function t(a,o,u,h){function i(s,p){return r.coerce(a,o,l,s,p)}f(a,o,u,h,i)}function f(a,o,u,h,i){var s=i("isomin"),p=i("isomax");p!=null&&s!==void 0&&s!==null&&s>p&&(o.isomin=null,o.isomax=null);var d=i("x"),y=i("y"),b=i("z"),m=i("value");if(!d||!d.length||!y||!y.length||!b||!b.length||!m||!m.length){o.visible=!1;return}var _=n.getComponentMethod("calendars","handleTraceDefaults");_(a,o,["x","y","z"],h),["x","y","z"].forEach(function(k){var R="caps."+k,L=i(R+".show");L&&i(R+".fill");var z="slices."+k,E=i(z+".show");E&&(i(z+".fill"),i(z+".locations"))});var T=i("spaceframe.show");T&&i("spaceframe.fill");var g=i("surface.show");g&&(i("surface.count"),i("surface.fill"),i("surface.pattern"));var A=i("contour.show");A&&(i("contour.color"),i("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(k){i(k)}),c(a,o,h,i,{prefix:"",cLetter:"c"}),o._length=null}v.exports={supplyDefaults:t,supplyIsoDefaults:f}},{"../../components/colorscale/defaults":653,"../../lib":778,"../../registry":911,"./attributes":1123}],1127:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":870,"./attributes":1123,"./calc":1124,"./convert":1125,"./defaults":1126}],1128:[function(e,v,M){var r=e("../../components/colorscale/attributes"),n=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../surface/attributes"),c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat;v.exports=t({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:n({editType:"calc"}),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},r("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:l.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:t({},l.contours.x.show,{}),color:l.contours.x.color,width:l.contours.x.width,editType:"calc"},lightposition:{x:t({},l.lightposition.x,{dflt:1e5}),y:t({},l.lightposition.y,{dflt:1e5}),z:t({},l.lightposition.z,{dflt:0}),editType:"calc"},lighting:t({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},l.lighting),hoverinfo:t({},c.hoverinfo,{editType:"calc"}),showlegend:t({},c.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../surface/attributes":1311}],1129:[function(e,v,M){var r=e("../../components/colorscale/calc");v.exports=function(l,c){c.intensity&&r(l,c,{vals:c.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651}],1130:[function(e,v,M){var r=e("gl-mesh3d"),n=e("delaunay-triangulate"),l=e("alpha-shape"),c=e("convex-hull"),t=e("../../lib/gl_format_color").parseColorScale,f=e("../../lib/str2rgbarray"),a=e("../../components/colorscale").extractOpts,o=e("../../plots/gl3d/zip3");function u(m,_,T){this.scene=m,this.uid=T,this.mesh=_,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var h=u.prototype;h.handlePick=function(m){if(m.object===this.mesh){var _=m.index=m.data.index;m.data._cellCenter?m.traceCoordinate=m.data.dataCoordinate:m.traceCoordinate=[this.data.x[_],this.data.y[_],this.data.z[_]];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&T[_]!==void 0?m.textLabel=T[_]:T&&(m.textLabel=T),!0}};function i(m){for(var _=[],T=m.length,g=0;g<T;g++)_[g]=f(m[g]);return _}function s(m,_,T,g){for(var A=[],k=_.length,R=0;R<k;R++)A[R]=m.d2l(_[R],0,g)*T;return A}function p(m){for(var _=[],T=m.length,g=0;g<T;g++)_[g]=Math.round(m[g]);return _}function d(m,_){for(var T=["x","y","z"].indexOf(m),g=[],A=_.length,k=0;k<A;k++)g[k]=[_[k][(T+1)%3],_[k][(T+2)%3]];return n(g)}function y(m,_){for(var T=m.length,g=0;g<T;g++)if(m[g]<=-.5||m[g]>=_-.5)return!1;return!0}h.update=function(m){var _=this.scene,T=_.fullSceneLayout;this.data=m;var g=m.x.length,A=o(s(T.xaxis,m.x,_.dataScale[0],m.xcalendar),s(T.yaxis,m.y,_.dataScale[1],m.ycalendar),s(T.zaxis,m.z,_.dataScale[2],m.zcalendar)),k;if(m.i&&m.j&&m.k){if(m.i.length!==m.j.length||m.j.length!==m.k.length||!y(m.i,g)||!y(m.j,g)||!y(m.k,g))return;k=o(p(m.i),p(m.j),p(m.k))}else m.alphahull===0?k=c(A):m.alphahull>0?k=l(m.alphahull,A):k=d(m.delaunayaxis,A);var R={positions:A,cells:k,lightPosition:[m.lightposition.x,m.lightposition.y,m.lightposition.z],ambient:m.lighting.ambient,diffuse:m.lighting.diffuse,specular:m.lighting.specular,roughness:m.lighting.roughness,fresnel:m.lighting.fresnel,vertexNormalsEpsilon:m.lighting.vertexnormalsepsilon,faceNormalsEpsilon:m.lighting.facenormalsepsilon,opacity:m.opacity,contourEnable:m.contour.show,contourColor:f(m.contour.color).slice(0,3),contourWidth:m.contour.width,useFacetNormals:m.flatshading};if(m.intensity){var L=a(m);this.color="#fff";var z=m.intensitymode;R[z+"Intensity"]=m.intensity,R[z+"IntensityBounds"]=[L.min,L.max],R.colormap=t(m)}else m.vertexcolor?(this.color=m.vertexcolor[0],R.vertexColors=i(m.vertexcolor)):m.facecolor?(this.color=m.facecolor[0],R.cellColors=i(m.facecolor)):(this.color=m.color,R.meshColor=f(m.color));this.mesh.update(R)},h.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function b(m,_){var T=m.glplot.gl,g=r({gl:T}),A=new u(m,g,_.uid);return g._trace=A,A.update(_),m.glplot.add(g),A}v.exports=b},{"../../components/colorscale":655,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/gl3d/zip3":881,"alpha-shape":69,"convex-hull":135,"delaunay-triangulate":171,"gl-mesh3d":309}],1131:[function(e,v,M){var r=e("../../registry"),n=e("../../lib"),l=e("../../components/colorscale/defaults"),c=e("./attributes");v.exports=function(f,a,o,u){function h(y,b){return n.coerce(f,a,c,y,b)}function i(y){var b=y.map(function(m){var _=h(m);return _&&n.isArrayOrTypedArray(_)?_:null});return b.every(function(m){return m&&m.length===b[0].length})&&b}var s=i(["x","y","z"]);if(!s){a.visible=!1;return}if(i(["i","j","k"]),a.i&&(!a.j||!a.k)||a.j&&(!a.k||!a.i)||a.k&&(!a.i||!a.j)){a.visible=!1;return}var p=r.getComponentMethod("calendars","handleTraceDefaults");p(f,a,["x","y","z"],u),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(y){h(y)});var d=h("contour.show");d&&(h("contour.color"),h("contour.width")),"intensity"in f?(h("intensity"),h("intensitymode"),l(f,a,u,h,{prefix:"",cLetter:"c"})):(a.showscale=!1,"facecolor"in f?h("facecolor"):"vertexcolor"in f?h("vertexcolor"):h("color",o)),h("text"),h("hovertext"),h("hovertemplate"),a._length=null}},{"../../components/colorscale/defaults":653,"../../lib":778,"../../registry":911,"./attributes":1128}],1132:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":870,"./attributes":1128,"./calc":1129,"./convert":1130,"./defaults":1131}],1133:[function(e,v,M){var r=e("../../lib").extendFlat,n=e("../scatter/attributes"),l=e("../../components/drawing/attributes").dash,c=e("../../components/fx/attributes"),t=e("../../constants/delta.js"),f=t.INCREASING.COLOR,a=t.DECREASING.COLOR,o=n.line;function u(h){return{line:{color:r({},o.color,{dflt:h}),width:o.width,dash:l,editType:"style"},editType:"style"}}v.exports={xperiod:n.xperiod,xperiod0:n.xperiod0,xperiodalignment:n.xperiodalignment,x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:r({},o.width,{}),dash:r({},l,{}),editType:"style"},increasing:u(f),decreasing:u(a),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:r({},c.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":664,"../../components/fx/attributes":674,"../../constants/delta.js":747,"../../lib":778,"../scatter/attributes":1187}],1134:[function(e,v,M){var r=e("../../lib"),n=r._,l=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM;function f(h,i){var s=l.getFromId(h,i.xaxis),p=l.getFromId(h,i.yaxis),d=u(h,s,i),y=i._minDiff;i._minDiff=null;var b=i._origX;i._origX=null;var m=i._xcalc;i._xcalc=null;var _=o(h,i,b,m,p,a);return i._extremes[s._id]=l.findExtremes(s,m,{vpad:y/2}),_.length?(r.extendFlat(_[0].t,{wHover:y/2,tickLen:d}),_):[{t:{empty:!0}}]}function a(h,i,s,p){return{o:h,h:i,l:s,c:p}}function o(h,i,s,p,d,y){for(var b=d.makeCalcdata(i,"open"),m=d.makeCalcdata(i,"high"),_=d.makeCalcdata(i,"low"),T=d.makeCalcdata(i,"close"),g=Array.isArray(i.text),A=Array.isArray(i.hovertext),k=!0,R=null,L=!!i.xperiodalignment,z=[],E=0;E<p.length;E++){var S=p[E],C=b[E],D=m[E],F=_[E],N=T[E];if(S!==t&&C!==t&&D!==t&&F!==t&&N!==t){N===C?R!==null&&N!==R&&(k=N>R):k=N>C,R=N;var G=y(C,D,F,N);G.pos=S,G.yc=(C+N)/2,G.i=E,G.dir=k?"increasing":"decreasing",G.x=G.pos,G.y=[F,D],L&&(G.orig_p=s[E]),g&&(G.tx=i.text[E]),A&&(G.htx=i.hovertext[E]),z.push(G)}else z.push({pos:S,empty:!0})}return i._extremes[d._id]=l.findExtremes(d,r.concat(_,m),{padded:!0}),z.length&&(z[0].t={labels:{open:n(h,"open:")+" ",high:n(h,"high:")+" ",low:n(h,"low:")+" ",close:n(h,"close:")+" "}}),z}function u(h,i,s){var p=s._minDiff;if(!p){var d=h._fullData,y=[];p=1/0;var b;for(b=0;b<d.length;b++){var m=d[b];if(m.type==="ohlc"&&m.visible===!0&&m.xaxis===i._id){y.push(m);var _=i.makeCalcdata(m,"x");m._origX=_;var T=c(s,i,"x",_);m._xcalc=T;var g=r.distinctVals(T).minDiff;g&&isFinite(g)&&(p=Math.min(p,g))}}for(p===1/0&&(p=1),b=0;b<y.length;b++)y[b]._minDiff=p}return p*s.tickwidth}v.exports={calc:f,calcCommon:o}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828}],1135:[function(e,v,M){var r=e("../../lib"),n=e("./ohlc_defaults"),l=e("../scatter/period_defaults"),c=e("./attributes");v.exports=function(a,o,u,h){function i(p,d){return r.coerce(a,o,c,p,d)}var s=n(a,o,i,h);if(!s){o.visible=!1;return}l(a,o,h,i,{x:!0}),i("line.width"),i("line.dash"),t(a,o,i,"increasing"),t(a,o,i,"decreasing"),i("text"),i("hovertext"),i("tickwidth"),h._requestRangeslider[o.xaxis]=!0};function t(f,a,o,u){o(u+".line.color"),o(u+".line.width",a.line.width),o(u+".line.dash",a.line.dash)}},{"../../lib":778,"../scatter/period_defaults":1207,"./attributes":1133,"./ohlc_defaults":1138}],1136:[function(e,v,M){var r=e("../../plots/cartesian/axes"),n=e("../../lib"),l=e("../../components/fx"),c=e("../../components/color"),t=e("../../lib").fillText,f=e("../../constants/delta.js"),a={increasing:f.INCREASING.SYMBOL,decreasing:f.DECREASING.SYMBOL};function o(s,p,d,y){var b=s.cd,m=b[0].trace;return m.hoverlabel.split?h(s,p,d,y):i(s,p,d,y)}function u(s,p,d,y){var b=s.cd,m=s.xa,_=b[0].trace,T=b[0].t,g=_.type,A=g==="ohlc"?"l":"min",k=g==="ohlc"?"h":"max",R,L,z=T.bPos||0,E=function(H){return H.pos+z-p},S=T.bdPos||T.tickLen,C=T.wHover,D=Math.min(1,S/Math.abs(m.r2c(m.range[1])-m.r2c(m.range[0])));R=s.maxHoverDistance-D,L=s.maxSpikeDistance-D;function F(H){var K=E(H);return l.inbox(K-C,K+C,R)}function N(H){var K=H[A],te=H[k];return K===te||l.inbox(K-d,te-d,R)}function G(H){return(F(H)+N(H))/2}var U=l.getDistanceFunction(y,F,N,G);if(l.getClosest(b,U,s),s.index===!1)return null;var X=b[s.index];if(X.empty)return null;var I=X.dir,B=_[I],j=B.line.color;return c.opacity(j)&&B.line.width?s.color=j:s.color=B.fillcolor,s.x0=m.c2p(X.pos+z-S,!0),s.x1=m.c2p(X.pos+z+S,!0),s.xLabelVal=X.orig_p!==void 0?X.orig_p:X.pos,s.spikeDistance=G(X)*L/R,s.xSpike=m.c2p(X.pos,!0),s}function h(s,p,d,y){var b=s.cd,m=s.ya,_=b[0].trace,T=b[0].t,g=[],A=u(s,p,d,y);if(!A)return[];var k=A.index,R=b[k],L=R.hi||_.hoverinfo,z=L.split("+"),E=L==="all",S=E||z.indexOf("y")!==-1;if(!S)return[];for(var C=["high","open","close","low"],D={},F=0;F<C.length;F++){var N=C[F],G=_[N][A.index],U=m.c2p(G,!0),X;G in D?(X=D[G],X.yLabel+="<br>"+T.labels[N]+r.hoverLabelText(m,G)):(X=n.extendFlat({},A),X.y0=X.y1=U,X.yLabelVal=G,X.yLabel=T.labels[N]+r.hoverLabelText(m,G),X.name="",g.push(X),D[G]=X)}return g}function i(s,p,d,y){var b=s.cd,m=s.ya,_=b[0].trace,T=b[0].t,g=u(s,p,d,y);if(!g)return[];var A=g.index,k=b[A],R=g.index=k.i,L=k.dir;function z(G){return T.labels[G]+r.hoverLabelText(m,_[G][R])}var E=k.hi||_.hoverinfo,S=E.split("+"),C=E==="all",D=C||S.indexOf("y")!==-1,F=C||S.indexOf("text")!==-1,N=D?[z("open"),z("high"),z("low"),z("close")+"  "+a[L]]:[];return F&&t(k,_,N),g.extraText=N.join("<br>"),g.y0=g.y1=m.c2p(k.yc,!0),[g]}v.exports={hoverPoints:o,hoverSplit:h,hoverOnPoints:i}},{"../../components/color":643,"../../components/fx":683,"../../constants/delta.js":747,"../../lib":778,"../../plots/cartesian/axes":828}],1137:[function(e,v,M){v.exports={moduleType:"trace",name:"ohlc",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc").calc,plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select")}},{"../../plots/cartesian":841,"./attributes":1133,"./calc":1134,"./defaults":1135,"./hover":1136,"./plot":1139,"./select":1140,"./style":1141}],1138:[function(e,v,M){var r=e("../../registry"),n=e("../../lib");v.exports=function(c,t,f,a){var o=f("x"),u=f("open"),h=f("high"),i=f("low"),s=f("close");f("hoverlabel.split");var p=r.getComponentMethod("calendars","handleTraceDefaults");if(p(c,t,["x"],a),!!(u&&h&&i&&s)){var d=Math.min(u.length,h.length,i.length,s.length);return o&&(d=Math.min(d,n.minRowLength(o))),t._length=d,d}}},{"../../lib":778,"../../registry":911}],1139:[function(e,v,M){var r=e("d3"),n=e("../../lib");v.exports=function(c,t,f,a){var o=t.yaxis,u=t.xaxis,h=!!u.rangebreaks;n.makeTraceGroups(a,f,"trace ohlc").each(function(i){var s=r.select(this),p=i[0],d=p.t,y=p.trace;if(y.visible!==!0||d.empty){s.remove();return}var b=d.tickLen,m=s.selectAll("path").data(n.identity);m.enter().append("path"),m.exit().remove(),m.attr("d",function(_){if(_.empty)return"M0,0Z";var T=u.c2p(_.pos-b,!0),g=u.c2p(_.pos+b,!0),A=h?(T+g)/2:u.c2p(_.pos,!0),k=o.c2p(_.o,!0),R=o.c2p(_.h,!0),L=o.c2p(_.l,!0),z=o.c2p(_.c,!0);return"M"+T+","+k+"H"+A+"M"+A+","+R+"V"+L+"M"+g+","+z+"H"+A})})}},{"../../lib":778,d3:169}],1140:[function(e,v,M){v.exports=function(n,l){var c=n.cd,t=n.xaxis,f=n.yaxis,a=[],o,u=c[0].t.bPos||0;if(l===!1)for(o=0;o<c.length;o++)c[o].selected=0;else for(o=0;o<c.length;o++){var h=c[o];l.contains([t.c2p(h.pos+u),f.c2p(h.yc)],null,h.i,n)?(a.push({pointNumber:h.i,x:t.c2d(h.pos),y:f.c2d(h.yc)}),h.selected=1):h.selected=0}return a}},{}],1141:[function(e,v,M){var r=e("d3"),n=e("../../components/drawing"),l=e("../../components/color");v.exports=function(t,f,a){var o=a||r.select(t).selectAll("g.ohlclayer").selectAll("g.trace");o.style("opacity",function(u){return u[0].trace.opacity}),o.each(function(u){var h=u[0].trace;r.select(this).selectAll("path").each(function(i){if(!i.empty){var s=h[i.dir].line;r.select(this).style("fill","none").call(l.stroke,s.color).call(n.dashLine,s.dash,s.width).style("opacity",h.selectedpoints&&!i.selected?.3:1)}})})}},{"../../components/color":643,"../../components/drawing":665,d3:169}],1142:[function(e,v,M){var r=e("../../lib/extend").extendFlat,n=e("../../plots/attributes"),l=e("../../plots/font_attributes"),c=e("../../components/colorscale/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,f=e("../../plots/domain").attributes,a=r({editType:"calc"},c("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});v.exports={domain:f({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:r({},n.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:l({editType:"calc"}),tickfont:l({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:a,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/font_attributes":856,"../../plots/template_attributes":906}],1143:[function(e,v,M){var r=e("../../plots/get_data").getModuleCalcData,n=e("./plot"),l="parcats";M.name=l,M.plot=function(c,t,f,a){var o=r(c.calcdata,l);if(o.length){var u=o[0];n(c,u,f,a)}},M.clean=function(c,t,f,a){var o=a._has&&a._has("parcats"),u=t._has&&t._has("parcats");o&&!u&&a._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":865,"./plot":1148}],1144:[function(e,v,M){var r=e("../../lib/gup").wrap,n=e("../../components/colorscale/helpers").hasColorscale,l=e("../../components/colorscale/calc"),c=e("../../lib/filter_unique.js"),t=e("../../components/drawing"),f=e("../../lib"),a=e("fast-isnumeric");v.exports=function(T,g){var A=f.filterVisible(g.dimensions);if(A.length===0)return[];var k=A.map(function(ie){var Q;if(ie.categoryorder==="trace")Q=null;else if(ie.categoryorder==="array")Q=ie.categoryarray;else{Q=c(ie.values);for(var V=!0,se=0;se<Q.length;se++)if(!a(Q[se])){V=!1;break}Q.sort(V?f.sorterAsc:void 0),ie.categoryorder==="category descending"&&(Q=Q.reverse())}return d(ie.values,Q)}),R,L,z;f.isArrayOrTypedArray(g.counts)?R=g.counts:R=[g.counts],y(A),A.forEach(function(ie,Q){b(ie,k[Q])});var E=g.line,S;E?(n(g,"line")&&l(T,g,{vals:g.line.color,containerStr:"line",cLetter:"c"}),S=t.tryColorscale(E)):S=f.identity;function C(ie){var Q,V;return f.isArrayOrTypedArray(E.color)?(Q=E.color[ie%E.color.length],V=Q):Q=E.color,{color:S(Q),rawColor:V}}var D=A[0].values.length,F={},N=k.map(function(ie){return ie.inds});z=0;var G,U;for(G=0;G<D;G++){var X=[];for(U=0;U<N.length;U++)X.push(N[U][G]);L=R[G%R.length],z+=L;var I=C(G),B=X+"-"+I.rawColor;F[B]===void 0&&(F[B]=s(X,I.color,I.rawColor)),p(F[B],G,L)}var j=A.map(function(ie,Q){return u(Q,ie._index,ie._displayindex,ie.label,z)});for(G=0;G<D;G++)for(L=R[G%R.length],U=0;U<j.length;U++){var H=j[U].containerInd,K=k[U].inds[G],te=j[U].categories;if(te[K]===void 0){var J=g.dimensions[H]._categoryarray[K],oe=g.dimensions[H]._ticktext[K];te[K]=h(U,K,J,oe)}i(te[K],G,L)}return r(o(j,F,z))};function o(_,T,g){var A=_.map(function(k){return k.categories.length}).reduce(function(k,R){return Math.max(k,R)});return{dimensions:_,paths:T,trace:void 0,maxCats:A,count:g}}function u(_,T,g,A,k){return{dimensionInd:_,containerInd:T,displayInd:g,dimensionLabel:A,count:k,categories:[],dragX:null}}function h(_,T,g,A){return{dimensionInd:_,categoryInd:T,categoryValue:g,displayInd:T,categoryLabel:A,valueInds:[],count:0,dragY:null}}function i(_,T,g){_.valueInds.push(T),_.count+=g}function s(_,T,g){return{categoryInds:_,color:T,rawColor:g,valueInds:[],count:0}}function p(_,T,g){_.valueInds.push(T),_.count+=g}function d(_,T){T==null?T=[]:T=T.map(function(S){return S});var g={},A={},k=[];T.forEach(function(S,C){g[S]=0,A[S]=C});for(var R=0;R<_.length;R++){var L=_[R],z;g[L]===void 0?(g[L]=1,z=T.push(L)-1,A[L]=z):(g[L]++,z=A[L]),k.push(z)}var E=T.map(function(S){return g[S]});return{uniqueValues:T,uniqueCounts:E,inds:k}}function y(_){var T=_.map(function(A){return A.displayindex}),g;if(m(T))for(g=0;g<_.length;g++)_[g]._displayindex=_[g].displayindex;else for(g=0;g<_.length;g++)_[g]._displayindex=g}function b(_,T){_._categoryarray=T.uniqueValues,_.ticktext===null||_.ticktext===void 0?_._ticktext=[]:_._ticktext=_.ticktext.slice();for(var g=_._ticktext.length;g<T.uniqueValues.length;g++)_._ticktext.push(T.uniqueValues[g])}function m(_){for(var T=new Array(_.length),g=0;g<_.length;g++){if(_[g]<0||_[g]>=_.length||T[_[g]]!==void 0)return!1;T[_[g]]=!0}return!0}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"../../components/drawing":665,"../../lib":778,"../../lib/filter_unique.js":769,"../../lib/gup":775,"fast-isnumeric":241}],1145:[function(e,v,M){var r=e("../../lib"),n=e("../../components/colorscale/helpers").hasColorscale,l=e("../../components/colorscale/defaults"),c=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),f=e("./attributes"),a=e("../parcoords/merge_length");function o(h,i,s,p,d){d("line.shape"),d("line.hovertemplate");var y=d("line.color",p.colorway[0]);if(n(h,"line")&&r.isArrayOrTypedArray(y)){if(y.length)return d("line.colorscale"),l(h,i,p,d,{prefix:"line.",cLetter:"c"}),y.length;i.line.color=s}return 1/0}function u(h,i){function s(T,g){return r.coerce(h,i,f.dimensions,T,g)}var p=s("values"),d=s("visible");if(p&&p.length||(d=i.visible=!1),d){s("label"),s("displayindex",i._index);var y=h.categoryarray,b=Array.isArray(y)&&y.length>0,m;b&&(m="array");var _=s("categoryorder",m);_==="array"?(s("categoryarray"),s("ticktext")):(delete h.categoryarray,delete h.ticktext),!b&&_==="array"&&(i.categoryorder="trace")}}v.exports=function(i,s,p,d){function y(g,A){return r.coerce(i,s,f,g,A)}var b=t(i,s,{name:"dimensions",handleItemDefaults:u}),m=o(i,s,p,d,y);c(s,d,y),(!Array.isArray(b)||!b.length)&&(s.visible=!1),a(s,b,"values",m),y("hoveron"),y("hovertemplate"),y("arrangement"),y("bundlecolors"),y("sortpaths"),y("counts");var _={family:d.font.family,size:Math.round(d.font.size),color:d.font.color};r.coerceFont(y,"labelfont",_);var T={family:d.font.family,size:Math.round(d.font.size/1.2),color:d.font.color};r.coerceFont(y,"tickfont",T)}},{"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/domain":855,"../parcoords/merge_length":1158,"./attributes":1142}],1146:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1142,"./base_plot":1143,"./calc":1144,"./defaults":1145,"./plot":1148}],1147:[function(e,v,M){var r=e("d3"),n=e("../../plot_api/plot_api"),l=e("../../components/fx"),c=e("../../lib"),t=c.strTranslate,f=e("../../components/drawing"),a=e("tinycolor2"),o=e("../../lib/svg_text_utils");function u(V,se,re,ee){var ae=V.map(te.bind(0,se,re)),fe=ee.selectAll("g.parcatslayer").data([null]);fe.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var de=fe.selectAll("g.trace.parcats").data(ae,h),pe=de.enter().append("g").attr("class","trace parcats");de.attr("transform",function(Ce){return t(Ce.x,Ce.y)}),pe.append("g").attr("class","paths");var W=de.select("g.paths"),ue=W.selectAll("path.path").data(function(Ce){return Ce.paths},h);ue.attr("fill",function(Ce){return Ce.model.color});var me=ue.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Ce){return Ce.model.color}).attr("fill-opacity",0);_(me),ue.attr("d",function(Ce){return Ce.svgD}),me.empty()||ue.sort(s),ue.exit().remove(),ue.on("mouseover",p).on("mouseout",d).on("click",m),pe.append("g").attr("class","dimensions");var be=de.select("g.dimensions"),ke=be.selectAll("g.dimension").data(function(Ce){return Ce.dimensions},h);ke.enter().append("g").attr("class","dimension"),ke.attr("transform",function(Ce){return t(Ce.x,0)}),ke.exit().remove();var Pe=ke.selectAll("g.category").data(function(Ce){return Ce.categories},h),je=Pe.enter().append("g").attr("class","category");Pe.attr("transform",function(Ce){return t(0,Ce.y)}),je.append("rect").attr("class","catrect").attr("pointer-events","none"),Pe.select("rect.catrect").attr("fill","none").attr("width",function(Ce){return Ce.width}).attr("height",function(Ce){return Ce.height}),A(je);var ze=Pe.selectAll("rect.bandrect").data(function(Ce){return Ce.bands},h);ze.each(function(){c.raiseToTop(this)}),ze.attr("fill",function(Ce){return Ce.color});var Ze=ze.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Ce){return Ce.color}).attr("fill-opacity",0);ze.attr("fill",function(Ce){return Ce.color}).attr("width",function(Ce){return Ce.width}).attr("height",function(Ce){return Ce.height}).attr("y",function(Ce){return Ce.y}).attr("cursor",function(Ce){return Ce.parcatsViewModel.arrangement==="fixed"?"default":Ce.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),R(Ze),ze.exit().remove(),je.append("text").attr("class","catlabel").attr("pointer-events","none");var tt=se._fullLayout.paper_bgcolor;Pe.select("text.catlabel").attr("text-anchor",function(Ce){return i(Ce)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",tt+" -1px  1px 2px, "+tt+" 1px  1px 2px, "+tt+"  1px -1px 2px, "+tt+" -1px -1px 2px").style("fill","rgb(0, 0, 0)").attr("x",function(Ce){return i(Ce)?Ce.width+5:-5}).attr("y",function(Ce){return Ce.height/2}).text(function(Ce){return Ce.model.categoryLabel}).each(function(Ce){f.font(r.select(this),Ce.parcatsViewModel.categorylabelfont),o.convertToTspans(r.select(this),se)}),je.append("text").attr("class","dimlabel"),Pe.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Ce){return Ce.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Ce){return Ce.width/2}).attr("y",-5).text(function(Ce,Ae){return Ae===0?Ce.parcatsViewModel.model.dimensions[Ce.model.dimensionInd].dimensionLabel:null}).each(function(Ce){f.font(r.select(this),Ce.parcatsViewModel.labelfont)}),Pe.selectAll("rect.bandrect").on("mouseover",G).on("mouseout",U),Pe.exit().remove(),ke.call(r.behavior.drag().origin(function(Ce){return{x:Ce.x,y:0}}).on("dragstart",X).on("drag",I).on("dragend",B)),de.each(function(Ce){Ce.traceSelection=r.select(this),Ce.pathSelection=r.select(this).selectAll("g.paths").selectAll("path.path"),Ce.dimensionSelection=r.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),de.exit().remove()}v.exports=function(V,se,re,ee){u(re,V,ee,se)};function h(V){return V.key}function i(V){var se=V.parcatsViewModel.dimensions.length,re=V.parcatsViewModel.dimensions[se-1].model.dimensionInd;return V.model.dimensionInd===re}function s(V,se){return V.model.rawColor>se.model.rawColor?1:V.model.rawColor<se.model.rawColor?-1:0}function p(V){if(!V.parcatsViewModel.dragDimension&&V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){c.raiseToTop(this),T(r.select(this));var se=y(V),re=b(V);if(V.parcatsViewModel.graphDiv.emit("plotly_hover",{points:se,event:r.event,constraints:re}),V.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ee=r.mouse(this)[0],ae=V.parcatsViewModel.graphDiv,fe=V.parcatsViewModel.trace,de=ae._fullLayout,pe=de._paperdiv.node().getBoundingClientRect(),W=V.parcatsViewModel.graphDiv.getBoundingClientRect(),ue,me,be;for(be=0;be<V.leftXs.length-1;be++)if(V.leftXs[be]+V.dimWidths[be]-2<=ee&&ee<=V.leftXs[be+1]+2){var ke=V.parcatsViewModel.dimensions[be],Pe=V.parcatsViewModel.dimensions[be+1];ue=(ke.x+ke.width+Pe.x)/2,me=(V.topYs[be]+V.topYs[be+1]+V.height)/2;break}var je=V.parcatsViewModel.x+ue,ze=V.parcatsViewModel.y+me,Ze=a.mostReadable(V.model.color,["black","white"]),tt=V.model.count,Ce=tt/V.parcatsViewModel.model.count,Ae={countLabel:tt,probabilityLabel:Ce.toFixed(3)},Ne=[];V.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ne.push(["Count:",Ae.countLabel].join(" ")),V.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ne.push(["P:",Ae.probabilityLabel].join(" "));var qe=Ne.join("<br>"),At=r.mouse(ae)[0];l.loneHover({trace:fe,x:je-pe.left+W.left,y:ze-pe.top+W.top,text:qe,color:V.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Ze,idealAlign:At<je?"right":"left",hovertemplate:(fe.line||{}).hovertemplate,hovertemplateLabels:Ae,eventData:[{data:fe._input,fullData:fe,count:tt,probability:Ce}]},{container:de._hoverlayer.node(),outerContainer:de._paper.node(),gd:ae})}}}function d(V){if(!V.parcatsViewModel.dragDimension&&(_(r.select(this)),l.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),V.parcatsViewModel.pathSelection.sort(s),V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var se=y(V),re=b(V);V.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:se,event:r.event,constraints:re})}}function y(V){for(var se=[],re=j(V.parcatsViewModel),ee=0;ee<V.model.valueInds.length;ee++){var ae=V.model.valueInds[ee];se.push({curveNumber:re,pointNumber:ae})}return se}function b(V){for(var se={},re=V.parcatsViewModel.model.dimensions,ee=0;ee<re.length;ee++){var ae=re[ee],fe=ae.categories[V.model.categoryInds[ee]];se[ae.containerInd]=fe.categoryValue}return V.model.rawColor!==void 0&&(se.color=V.model.rawColor),se}function m(V){if(V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var se=y(V),re=b(V);V.parcatsViewModel.graphDiv.emit("plotly_click",{points:se,event:r.event,constraints:re})}}function _(V){V.attr("fill",function(se){return se.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function T(V){V.attr("fill-opacity",.8).attr("stroke",function(se){return a.mostReadable(se.model.color,["black","white"])}).attr("stroke-width",.3)}function g(V){V.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function A(V){V.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function k(V){V.attr("stroke","black").attr("stroke-width",1.5)}function R(V){V.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function L(V){var se=V.parcatsViewModel.pathSelection,re=V.categoryViewModel.model.dimensionInd,ee=V.categoryViewModel.model.categoryInd;return se.filter(function(ae){return ae.model.categoryInds[re]===ee&&ae.model.color===V.color})}function z(V){var se=r.select(V.parentNode).selectAll("rect.bandrect");se.each(function(re){var ee=L(re);T(ee),ee.each(function(){c.raiseToTop(this)})}),g(r.select(V.parentNode))}function E(V){var se=r.select(V).datum(),re=L(se);T(re),re.each(function(){c.raiseToTop(this)}),r.select(V.parentNode).selectAll("rect.bandrect").filter(function(ee){return ee.color===se.color}).each(function(){c.raiseToTop(this),k(r.select(this))})}function S(V,se,re){var ee=r.select(V).datum(),ae=ee.categoryViewModel.model,fe=ee.parcatsViewModel.graphDiv,de=r.select(V.parentNode).selectAll("rect.bandrect"),pe=[];de.each(function(ue){var me=L(ue);me.each(function(be){Array.prototype.push.apply(pe,y(be))})});var W={};W[ae.dimensionInd]=ae.categoryValue,fe.emit(se,{points:pe,event:re,constraints:W})}function C(V,se,re){var ee=r.select(V).datum(),ae=ee.categoryViewModel.model,fe=ee.parcatsViewModel.graphDiv,de=L(ee),pe=[];de.each(function(ue){Array.prototype.push.apply(pe,y(ue))});var W={};W[ae.dimensionInd]=ae.categoryValue,ee.rawColor!==void 0&&(W.color=ee.rawColor),fe.emit(se,{points:pe,event:re,constraints:W})}function D(V,se,re){V._fullLayout._calcInverseTransform(V);var ee=V._fullLayout._invScaleX,ae=V._fullLayout._invScaleY,fe=r.select(re.parentNode).select("rect.catrect"),de=fe.node().getBoundingClientRect(),pe=fe.datum(),W=pe.parcatsViewModel,ue=W.model.dimensions[pe.model.dimensionInd],me=W.trace,be=de.top+de.height/2,ke,Pe;W.dimensions.length>1&&ue.displayInd===W.dimensions.length-1?(ke=de.left,Pe="left"):(ke=de.left+de.width,Pe="right");var je=pe.model.count,ze=pe.model.categoryLabel,Ze=je/pe.parcatsViewModel.model.count,tt={countLabel:je,categoryLabel:ze,probabilityLabel:Ze.toFixed(3)},Ce=[];pe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ce.push(["Count:",tt.countLabel].join(" ")),pe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ce.push(["P("+tt.categoryLabel+"):",tt.probabilityLabel].join(" "));var Ae=Ce.join("<br>");return{trace:me,x:ee*(ke-se.left),y:ae*(be-se.top),text:Ae,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Pe,hovertemplate:me.hovertemplate,hovertemplateLabels:tt,eventData:[{data:me._input,fullData:me,count:je,category:ze,probability:Ze}]}}function F(V,se,re){var ee=[];return r.select(re.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var ae=this;ee.push(D(V,se,ae))}),ee}function N(V,se,re){V._fullLayout._calcInverseTransform(V);var ee=V._fullLayout._invScaleX,ae=V._fullLayout._invScaleY,fe=re.getBoundingClientRect(),de=r.select(re).datum(),pe=de.categoryViewModel,W=pe.parcatsViewModel,ue=W.model.dimensions[pe.model.dimensionInd],me=W.trace,be=fe.y+fe.height/2,ke,Pe;W.dimensions.length>1&&ue.displayInd===W.dimensions.length-1?(ke=fe.left,Pe="left"):(ke=fe.left+fe.width,Pe="right");var je=pe.model.categoryLabel,ze=de.parcatsViewModel.model.count,Ze=0;de.categoryViewModel.bands.forEach(function(St){St.color===de.color&&(Ze+=St.count)});var tt=pe.model.count,Ce=0;W.pathSelection.each(function(St){St.model.color===de.color&&(Ce+=St.model.count)});var Ae=Ze/ze,Ne=Ze/Ce,qe=Ze/tt,At={countLabel:ze,categoryLabel:je,probabilityLabel:Ae.toFixed(3)},kt=[];pe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&kt.push(["Count:",At.countLabel].join(" ")),pe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(kt.push("P(color ∩ "+je+"): "+At.probabilityLabel),kt.push("P("+je+" | color): "+Ne.toFixed(3)),kt.push("P(color | "+je+"): "+qe.toFixed(3)));var Ve=kt.join("<br>"),ft=a.mostReadable(de.color,["black","white"]);return{trace:me,x:ee*(ke-se.left),y:ae*(be-se.top),text:Ve,color:de.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:ft,fontSize:10,idealAlign:Pe,hovertemplate:me.hovertemplate,hovertemplateLabels:At,eventData:[{data:me._input,fullData:me,category:je,count:ze,probability:Ae,categorycount:tt,colorcount:Ce,bandcolorcount:Ze}]}}function G(V){if(!V.parcatsViewModel.dragDimension&&V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var se=r.mouse(this)[1];if(se<-1)return;var re=V.parcatsViewModel.graphDiv,ee=re._fullLayout,ae=ee._paperdiv.node().getBoundingClientRect(),fe=V.parcatsViewModel.hoveron,de=this;if(fe==="color"?(E(de),C(de,"plotly_hover",r.event)):(z(de),S(de,"plotly_hover",r.event)),V.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var pe;fe==="category"?pe=D(re,ae,de):fe==="color"?pe=N(re,ae,de):fe==="dimension"&&(pe=F(re,ae,de)),pe&&l.loneHover(pe,{container:ee._hoverlayer.node(),outerContainer:ee._paper.node(),gd:re})}}}function U(V){var se=V.parcatsViewModel;if(!se.dragDimension&&(_(se.pathSelection),A(se.dimensionSelection.selectAll("g.category")),R(se.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),l.loneUnhover(se.graphDiv._fullLayout._hoverlayer.node()),se.pathSelection.sort(s),se.hoverinfoItems.indexOf("skip")===-1)){var re=V.parcatsViewModel.hoveron,ee=this;re==="color"?C(ee,"plotly_unhover",r.event):S(ee,"plotly_unhover",r.event)}}function X(V){V.parcatsViewModel.arrangement!=="fixed"&&(V.dragDimensionDisplayInd=V.model.displayInd,V.initialDragDimensionDisplayInds=V.parcatsViewModel.model.dimensions.map(function(se){return se.displayInd}),V.dragHasMoved=!1,V.dragCategoryDisplayInd=null,r.select(this).selectAll("g.category").select("rect.catrect").each(function(se){var re=r.mouse(this)[0],ee=r.mouse(this)[1];-2<=re&&re<=se.width+2&&-2<=ee&&ee<=se.height+2&&(V.dragCategoryDisplayInd=se.model.displayInd,V.initialDragCategoryDisplayInds=V.model.categories.map(function(ae){return ae.displayInd}),se.model.dragY=se.y,c.raiseToTop(this.parentNode),r.select(this.parentNode).selectAll("rect.bandrect").each(function(ae){ae.y<ee&&ee<=ae.y+ae.height&&(V.potentialClickBand=this)}))}),V.parcatsViewModel.dragDimension=V,l.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function I(V){if(V.parcatsViewModel.arrangement!=="fixed"&&(V.dragHasMoved=!0,V.dragDimensionDisplayInd!==null)){var se=V.dragDimensionDisplayInd,re=se-1,ee=se+1,ae=V.parcatsViewModel.dimensions[se];if(V.dragCategoryDisplayInd!==null){var fe=ae.categories[V.dragCategoryDisplayInd];fe.model.dragY+=r.event.dy;var de=fe.model.dragY,pe=fe.model.displayInd,W=ae.categories,ue=W[pe-1],me=W[pe+1];ue!==void 0&&de<ue.y+ue.height/2&&(fe.model.displayInd=ue.model.displayInd,ue.model.displayInd=pe),me!==void 0&&de+fe.height>me.y+me.height/2&&(fe.model.displayInd=me.model.displayInd,me.model.displayInd=pe),V.dragCategoryDisplayInd=fe.model.displayInd}if(V.dragCategoryDisplayInd===null||V.parcatsViewModel.arrangement==="freeform"){ae.model.dragX=r.event.x;var be=V.parcatsViewModel.dimensions[re],ke=V.parcatsViewModel.dimensions[ee];be!==void 0&&ae.model.dragX<be.x+be.width&&(ae.model.displayInd=be.model.displayInd,be.model.displayInd=se),ke!==void 0&&ae.model.dragX+ae.width>ke.x&&(ae.model.displayInd=ke.model.displayInd,ke.model.displayInd=V.dragDimensionDisplayInd),V.dragDimensionDisplayInd=ae.model.displayInd}ie(V.parcatsViewModel),oe(V.parcatsViewModel),K(V.parcatsViewModel),H(V.parcatsViewModel)}}function B(V){if(V.parcatsViewModel.arrangement!=="fixed"&&V.dragDimensionDisplayInd!==null){r.select(this).selectAll("text").attr("font-weight","normal");var se={},re=j(V.parcatsViewModel),ee=V.parcatsViewModel.model.dimensions.map(function(ke){return ke.displayInd}),ae=V.initialDragDimensionDisplayInds.some(function(ke,Pe){return ke!==ee[Pe]});ae&&ee.forEach(function(ke,Pe){var je=V.parcatsViewModel.model.dimensions[Pe].containerInd;se["dimensions["+je+"].displayindex"]=ke});var fe=!1;if(V.dragCategoryDisplayInd!==null){var de=V.model.categories.map(function(ke){return ke.displayInd});if(fe=V.initialDragCategoryDisplayInds.some(function(ke,Pe){return ke!==de[Pe]}),fe){var pe=V.model.categories.slice().sort(function(ke,Pe){return ke.displayInd-Pe.displayInd}),W=pe.map(function(ke){return ke.categoryValue}),ue=pe.map(function(ke){return ke.categoryLabel});se["dimensions["+V.model.containerInd+"].categoryarray"]=[W],se["dimensions["+V.model.containerInd+"].ticktext"]=[ue],se["dimensions["+V.model.containerInd+"].categoryorder"]="array"}}if(V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!V.dragHasMoved&&V.potentialClickBand&&(V.parcatsViewModel.hoveron==="color"?C(V.potentialClickBand,"plotly_click",r.event.sourceEvent):S(V.potentialClickBand,"plotly_click",r.event.sourceEvent)),V.model.dragX=null,V.dragCategoryDisplayInd!==null){var me=V.parcatsViewModel.dimensions[V.dragDimensionDisplayInd].categories[V.dragCategoryDisplayInd];me.model.dragY=null,V.dragCategoryDisplayInd=null}V.dragDimensionDisplayInd=null,V.parcatsViewModel.dragDimension=null,V.dragHasMoved=null,V.potentialClickBand=null,ie(V.parcatsViewModel),oe(V.parcatsViewModel);var be=r.transition().duration(300).ease("cubic-in-out");be.each(function(){K(V.parcatsViewModel,!0),H(V.parcatsViewModel,!0)}).each("end",function(){(ae||fe)&&n.restyle(V.parcatsViewModel.graphDiv,se,[re])})}}function j(V){for(var se,re=V.graphDiv._fullData,ee=0;ee<re.length;ee++)if(V.key===re[ee].uid){se=ee;break}return se}function H(V,se){se===void 0&&(se=!1);function re(ee){return se?ee.transition():ee}V.pathSelection.data(function(ee){return ee.paths},h),re(V.pathSelection).attr("d",function(ee){return ee.svgD})}function K(V,se){se===void 0&&(se=!1);function re(W){return se?W.transition():W}V.dimensionSelection.data(function(W){return W.dimensions},h);var ee=V.dimensionSelection.selectAll("g.category").data(function(W){return W.categories},h);re(V.dimensionSelection).attr("transform",function(W){return t(W.x,0)}),re(ee).attr("transform",function(W){return t(0,W.y)});var ae=ee.select(".dimlabel");ae.text(function(W,ue){return ue===0?W.parcatsViewModel.model.dimensions[W.model.dimensionInd].dimensionLabel:null});var fe=ee.select(".catlabel");fe.attr("text-anchor",function(W){return i(W)?"start":"end"}).attr("x",function(W){return i(W)?W.width+5:-5}).each(function(W){var ue,me;i(W)?(ue=W.width+5,me="start"):(ue=-5,me="end"),r.select(this).selectAll("tspan").attr("x",ue).attr("text-anchor",me)});var de=ee.selectAll("rect.bandrect").data(function(W){return W.bands},h),pe=de.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(W){return W.color}).attr("fill-opacity",0);de.attr("fill",function(W){return W.color}).attr("width",function(W){return W.width}).attr("height",function(W){return W.height}).attr("y",function(W){return W.y}),R(pe),de.each(function(){c.raiseToTop(this)}),de.exit().remove()}function te(V,se,re){var ee=re[0],ae=se.margin||{l:80,r:80,t:100,b:80},fe=ee.trace,de=fe.domain,pe=se.width,W=se.height,ue=Math.floor(pe*(de.x[1]-de.x[0])),me=Math.floor(W*(de.y[1]-de.y[0])),be=de.x[0]*pe+ae.l,ke=se.height-de.y[1]*se.height+ae.t,Pe=fe.line.shape,je;fe.hoverinfo==="all"?je=["count","probability"]:je=(fe.hoverinfo||"").split("+");var ze={trace:fe,key:fe.uid,model:ee,x:be,y:ke,width:ue,height:me,hoveron:fe.hoveron,hoverinfoItems:je,arrangement:fe.arrangement,bundlecolors:fe.bundlecolors,sortpaths:fe.sortpaths,labelfont:fe.labelfont,categorylabelfont:fe.tickfont,pathShape:Pe,dragDimension:null,margin:ae,paths:[],dimensions:[],graphDiv:V,traceSelection:null,pathSelection:null,dimensionSelection:null};return ee.dimensions&&(ie(ze),oe(ze)),ze}function J(V,se,re,ee,ae){var fe=[],de=[],pe,W;for(W=0;W<re.length-1;W++)pe=r.interpolateNumber(re[W]+V[W],V[W+1]),fe.push(pe(ae)),de.push(pe(1-ae));var ue="M "+V[0]+","+se[0];for(ue+="l"+re[0]+",0 ",W=1;W<re.length;W++)ue+="C"+fe[W-1]+","+se[W-1]+" "+de[W-1]+","+se[W]+" "+V[W]+","+se[W],ue+="l"+re[W]+",0 ";for(ue+="l0,"+ee+" ",ue+="l -"+re[re.length-1]+",0 ",W=re.length-2;W>=0;W--)ue+="C"+de[W]+","+(se[W+1]+ee)+" "+fe[W]+","+(se[W]+ee)+" "+(V[W]+re[W])+","+(se[W]+ee),ue+="l-"+re[W]+",0 ";return ue+="Z",ue}function oe(V){var se=V.dimensions,re=V.model,ee=se.map(function(zt){return zt.categories.map(function($t){return $t.y})}),ae=V.model.dimensions.map(function(zt){return zt.categories.map(function($t){return $t.displayInd})}),fe=V.model.dimensions.map(function(zt){return zt.displayInd}),de=V.dimensions.map(function(zt){return zt.model.dimensionInd}),pe=se.map(function(zt){return zt.x}),W=se.map(function(zt){return zt.width}),ue=[];for(var me in re.paths)re.paths.hasOwnProperty(me)&&ue.push(re.paths[me]);function be(zt){var $t=zt.categoryInds.map(function(Pt,Lt){return ae[Lt][Pt]}),rr=de.map(function(Pt){return $t[Pt]});return rr}ue.sort(function(zt,$t){var rr=be(zt),Pt=be($t);return V.sortpaths==="backward"&&(rr.reverse(),Pt.reverse()),rr.push(zt.valueInds[0]),Pt.push($t.valueInds[0]),V.bundlecolors&&(rr.unshift(zt.rawColor),Pt.unshift($t.rawColor)),rr<Pt?-1:rr>Pt?1:0});for(var ke=new Array(ue.length),Pe=se[0].model.count,je=se[0].categories.map(function(zt){return zt.height}).reduce(function(zt,$t){return zt+$t}),ze=0;ze<ue.length;ze++){var Ze=ue[ze],tt;Pe>0?tt=je*(Ze.count/Pe):tt=0;for(var Ce=new Array(ee.length),Ae=0;Ae<Ze.categoryInds.length;Ae++){var Ne=Ze.categoryInds[Ae],qe=ae[Ae][Ne],At=fe[Ae];Ce[At]=ee[At][qe],ee[At][qe]+=tt;var kt=V.dimensions[At].categories[qe],Ve=kt.bands.length,ft=kt.bands[Ve-1];if(ft===void 0||Ze.rawColor!==ft.rawColor){var St=ft===void 0?0:ft.y+ft.height;kt.bands.push({key:St,color:Ze.color,rawColor:Ze.rawColor,height:tt,width:kt.width,count:Ze.count,y:St,categoryViewModel:kt,parcatsViewModel:V})}else{var Wt=kt.bands[Ve-1];Wt.height+=tt,Wt.count+=Ze.count}}var Qt;V.pathShape==="hspline"?Qt=J(pe,Ce,W,tt,.5):Qt=J(pe,Ce,W,tt,0),ke[ze]={key:Ze.valueInds[0],model:Ze,height:tt,leftXs:pe,topYs:Ce,dimWidths:W,svgD:Qt,parcatsViewModel:V}}V.paths=ke}function ie(V){var se=V.model.dimensions.map(function(de){return{displayInd:de.displayInd,dimensionInd:de.dimensionInd}});se.sort(function(de,pe){return de.displayInd-pe.displayInd});var re=[];for(var ee in se){var ae=se[ee].dimensionInd,fe=V.model.dimensions[ae];re.push(Q(V,fe))}V.dimensions=re}function Q(V,se){var re=40,ee=16,ae=V.model.dimensions.length,fe=se.displayInd,de,pe,W;ae>1?de=(V.width-2*re-ee)/(ae-1):de=0,pe=re,W=pe+de*fe;var ue=[],me=V.model.maxCats,be=se.categories.length,ke=8,Pe=se.count,je=V.height-ke*(me-1),ze,Ze,tt,Ce,Ae,Ne=(me-be)*ke/2,qe=se.categories.map(function(At){return{displayInd:At.displayInd,categoryInd:At.categoryInd}});for(qe.sort(function(At,kt){return At.displayInd-kt.displayInd}),Ae=0;Ae<be;Ae++)Ce=qe[Ae].categoryInd,Ze=se.categories[Ce],Pe>0?ze=Ze.count/Pe*je:ze=0,tt={key:Ze.valueInds[0],model:Ze,width:ee,height:ze,y:Ze.dragY!==null?Ze.dragY:Ne,bands:[],parcatsViewModel:V},Ne=Ne+ze+ke,ue.push(tt);return{key:se.dimensionInd,x:se.dragX!==null?se.dragX:W,y:0,width:ee,model:se,categories:ue,parcatsViewModel:V,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":665,"../../components/fx":683,"../../lib":778,"../../lib/svg_text_utils":803,"../../plot_api/plot_api":814,d3:169,tinycolor2:576}],1148:[function(e,v,M){var r=e("./parcats");v.exports=function(l,c,t,f){var a=l._fullLayout,o=a._paper,u=a._size;r(l,o,c,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},t,f)}},{"./parcats":1147}],1149:[function(e,v,M){var r=e("../../components/colorscale/attributes"),n=e("../../plots/cartesian/layout_attributes"),l=e("../../plots/font_attributes"),c=e("../../plots/domain").attributes,t=e("../../lib/extend").extendFlat,f=e("../../plot_api/plot_template").templatedArray;v.exports={domain:c({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:l({editType:"plot"}),tickfont:l({editType:"plot"}),rangefont:l({editType:"plot"}),dimensions:f("dimension",{label:{valType:"string",editType:"plot"},tickvals:t({},n.tickvals,{editType:"plot"}),ticktext:t({},n.ticktext,{editType:"plot"}),tickformat:t({},n.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:t({editType:"calc"},r("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/plot_template":817,"../../plots/cartesian/layout_attributes":842,"../../plots/domain":855,"../../plots/font_attributes":856}],1150:[function(e,v,M){var r=e("./constants"),n=e("d3"),l=e("../../lib/gup").keyFun,c=e("../../lib/gup").repeat,t=e("../../lib").sorterAsc,f=e("../../lib").strTranslate,a=r.bar.snapRatio;function o(j,H){return j*(1-a)+H*a}var u=r.bar.snapClose;function h(j,H){return j*(1-u)+H*u}function i(j,H,K,te){if(s(K,te))return K;var J=j?-1:1,oe=0,ie=H.length-1;if(J<0){var Q=oe;oe=ie,ie=Q}for(var V=H[oe],se=V,re=oe;J*re<J*ie;re+=J){var ee=re+J,ae=H[ee];if(J*K<J*h(V,ae))return o(V,se);if(J*K<J*ae||ee===ie)return o(ae,V);se=V,V=ae}}function s(j,H){for(var K=0;K<H.length;K++)if(j>=H[K][0]&&j<=H[K][1])return!0;return!1}function p(j){j.attr("x",-r.bar.captureWidth/2).attr("width",r.bar.captureWidth)}function d(j){j.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function y(j){if(!j.brush.filterSpecified)return"0,"+j.height;for(var H=b(j.brush.filter.getConsolidated(),j.height),K=[0],te,J,oe,ie=H.length?H[0][0]:null,Q=0;Q<H.length;Q++)te=H[Q],J=te[1]-te[0],K.push(ie),K.push(J),oe=Q+1,oe<H.length&&(ie=H[oe][0]-te[1]);return K.push(j.height),K}function b(j,H){return j.map(function(K){return K.map(function(te){return Math.max(0,te*H)}).sort(t)})}function m(j,H){var K=r.bar.handleHeight;if(!(H>j[1]+K||H<j[0]-K))return H>=.9*j[1]+.1*j[0]?"n":H<=.9*j[0]+.1*j[1]?"s":"ns"}function _(){n.select(document.body).style("cursor",null)}function T(j){j.attr("stroke-dasharray",y)}function g(j,H){var K=n.select(j).selectAll(".highlight, .highlight-shadow"),te=H?K.transition().duration(r.bar.snapDuration).each("end",H):K;T(te)}function A(j,H){var K=j.brush,te=K.filterSpecified,J=NaN,oe={},ie;if(te){var Q=j.height,V=K.filter.getConsolidated(),se=b(V,Q),re=NaN,ee=NaN,ae=NaN;for(ie=0;ie<=se.length;ie++){var fe=se[ie];if(fe&&fe[0]<=H&&H<=fe[1]){re=ie;break}else if(ee=ie?ie-1:NaN,fe&&fe[0]>H){ae=ie;break}}if(J=re,isNaN(J)&&(isNaN(ee)||isNaN(ae)?J=isNaN(ee)?ae:ee:J=H-se[ee][1]<se[ae][0]-H?ee:ae),!isNaN(J)){var de=se[J],pe=m(de,H);pe&&(oe.interval=V[J],oe.intervalPix=de,oe.region=pe)}}if(j.ordinal&&!oe.region){var W=j.unitTickvals,ue=j.unitToPaddedPx.invert(H);for(ie=0;ie<W.length;ie++){var me=[W[Math.max(ie-1,0)]*.25+W[ie]*.75,W[Math.min(ie+1,W.length-1)]*.25+W[ie]*.75];if(ue>=me[0]&&ue<=me[1]){oe.clickableOrdinalRange=me;break}}}return oe}function k(j,H){n.event.sourceEvent.stopPropagation();var K=H.height-n.mouse(j)[1]-2*r.verticalPadding,te=H.unitToPaddedPx.invert(K),J=H.brush,oe=A(H,K),ie=oe.interval,Q=J.svgBrush;if(Q.wasDragged=!1,Q.grabbingBar=oe.region==="ns",Q.grabbingBar){var V=ie.map(H.unitToPaddedPx);Q.grabPoint=K-V[0]-r.verticalPadding,Q.barLength=V[1]-V[0]}Q.clickableOrdinalRange=oe.clickableOrdinalRange,Q.stayingIntervals=H.multiselect&&J.filterSpecified?J.filter.getConsolidated():[],ie&&(Q.stayingIntervals=Q.stayingIntervals.filter(function(se){return se[0]!==ie[0]&&se[1]!==ie[1]})),Q.startExtent=oe.region?ie[oe.region==="s"?1:0]:te,H.parent.inBrushDrag=!0,Q.brushStartCallback()}function R(j,H){n.event.sourceEvent.stopPropagation();var K=H.height-n.mouse(j)[1]-2*r.verticalPadding,te=H.brush.svgBrush;te.wasDragged=!0,te._dragging=!0,te.grabbingBar?te.newExtent=[K-te.grabPoint,K+te.barLength-te.grabPoint].map(H.unitToPaddedPx.invert):te.newExtent=[te.startExtent,H.unitToPaddedPx.invert(K)].sort(t),H.brush.filterSpecified=!0,te.extent=te.stayingIntervals.concat([te.newExtent]),te.brushCallback(H),g(j.parentNode)}function L(j,H){var K=H.brush,te=K.filter,J=K.svgBrush;J._dragging||(z(j,H),R(j,H),H.brush.svgBrush.wasDragged=!1),J._dragging=!1;var oe=n.event;oe.sourceEvent.stopPropagation();var ie=J.grabbingBar;if(J.grabbingBar=!1,J.grabLocation=void 0,H.parent.inBrushDrag=!1,_(),!J.wasDragged){J.wasDragged=void 0,J.clickableOrdinalRange?K.filterSpecified&&H.multiselect?J.extent.push(J.clickableOrdinalRange):(J.extent=[J.clickableOrdinalRange],K.filterSpecified=!0):ie?(J.extent=J.stayingIntervals,J.extent.length===0&&N(K)):N(K),J.brushCallback(H),g(j.parentNode),J.brushEndCallback(K.filterSpecified?te.getConsolidated():[]);return}var Q=function(){te.set(te.getConsolidated())};if(H.ordinal){var V=H.unitTickvals;V[V.length-1]<V[0]&&V.reverse(),J.newExtent=[i(0,V,J.newExtent[0],J.stayingIntervals),i(1,V,J.newExtent[1],J.stayingIntervals)];var se=J.newExtent[1]>J.newExtent[0];J.extent=J.stayingIntervals.concat(se?[J.newExtent]:[]),J.extent.length||N(K),J.brushCallback(H),se?g(j.parentNode,Q):(Q(),g(j.parentNode))}else Q();J.brushEndCallback(K.filterSpecified?te.getConsolidated():[])}function z(j,H){var K=H.height-n.mouse(j)[1]-2*r.verticalPadding,te=A(H,K),J="crosshair";te.clickableOrdinalRange?J="pointer":te.region&&(J=te.region+"-resize"),n.select(document.body).style("cursor",J)}function E(j){j.on("mousemove",function(H){n.event.preventDefault(),H.parent.inBrushDrag||z(this,H)}).on("mouseleave",function(H){H.parent.inBrushDrag||_()}).call(n.behavior.drag().on("dragstart",function(H){k(this,H)}).on("drag",function(H){R(this,H)}).on("dragend",function(H){L(this,H)}))}function S(j,H){return j[0]-H[0]}function C(j){var H=j.selectAll(".background").data(c);H.enter().append("rect").classed("background",!0).call(p).call(d).style("pointer-events","auto").attr("transform",f(0,r.verticalPadding)),H.call(E).attr("height",function(J){return J.height-r.verticalPadding});var K=j.selectAll(".highlight-shadow").data(c);K.enter().append("line").classed("highlight-shadow",!0).attr("x",-r.bar.width/2).attr("stroke-width",r.bar.width+r.bar.strokeWidth).attr("stroke",r.bar.strokeColor).attr("opacity",r.bar.strokeOpacity).attr("stroke-linecap","butt"),K.attr("y1",function(J){return J.height}).call(T);var te=j.selectAll(".highlight").data(c);te.enter().append("line").classed("highlight",!0).attr("x",-r.bar.width/2).attr("stroke-width",r.bar.width-r.bar.strokeWidth).attr("stroke",r.bar.fillColor).attr("opacity",r.bar.fillOpacity).attr("stroke-linecap","butt"),te.attr("y1",function(J){return J.height}).call(T)}function D(j){var H=j.selectAll("."+r.cn.axisBrush).data(c,l);H.enter().append("g").classed(r.cn.axisBrush,!0),C(H)}function F(j){return j.svgBrush.extent.map(function(H){return H.slice()})}function N(j){j.filterSpecified=!1,j.svgBrush.extent=[[-1/0,1/0]]}function G(j){return function(K){var te=K.brush,J=F(te),oe=J.slice();te.filter.set(oe),j()}}function U(j){for(var H=j.slice(),K=[],te,J=H.shift();J;){for(te=J.slice();(J=H.shift())&&J[0]<=te[1];)te[1]=Math.max(te[1],J[1]);K.push(te)}return K.length===1&&K[0][0]>K[0][1]&&(K=[]),K}function X(){var j=[],H,K;return{set:function(te){j=te.map(function(J){return J.slice().sort(t)}).sort(S),j.length===1&&j[0][0]===-1/0&&j[0][1]===1/0&&(j=[[0,-1]]),H=U(j),K=j.reduce(function(J,oe){return[Math.min(J[0],oe[0]),Math.max(J[1],oe[1])]},[1/0,-1/0])},get:function(){return j.slice()},getConsolidated:function(){return H},getBounds:function(){return K}}}function I(j,H,K,te,J,oe){var ie=X();return ie.set(K),{filter:ie,filterSpecified:H,svgBrush:{extent:[],brushStartCallback:te,brushCallback:G(J),brushEndCallback:oe}}}function B(j,H){if(Array.isArray(j[0])?(j=j.map(function(te){return te.sort(t)}),H.multiselect?j=U(j.sort(S)):j=[j[0]]):j=[j.sort(t)],H.tickvals){var K=H.tickvals.slice().sort(t);if(j=j.map(function(te){var J=[i(0,K,te[0],[]),i(1,K,te[1],[])];if(J[1]>J[0])return J}).filter(function(te){return te}),!j.length)return}return j.length>1?j:j[0]}v.exports={makeBrush:I,ensureAxisBrush:D,cleanRanges:B}},{"../../lib":778,"../../lib/gup":775,"./constants":1153,d3:169}],1151:[function(e,v,M){var r=e("d3"),n=e("../../plots/get_data").getModuleCalcData,l=e("./plot"),c=e("../../constants/xmlns_namespaces");M.name="parcoords",M.plot=function(t){var f=n(t.calcdata,"parcoords")[0];f.length&&l(t,f)},M.clean=function(t,f,a,o){var u=o._has&&o._has("parcoords"),h=f._has&&f._has("parcoords");u&&!h&&(o._paperdiv.selectAll(".parcoords").remove(),o._glimages.selectAll("*").remove())},M.toSVG=function(t){var f=t._fullLayout._glimages,a=r.select(t).selectAll(".svg-container"),o=a.filter(function(h,i){return i===a.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function u(){var h=this,i=h.toDataURL("image/png"),s=f.append("svg:image");s.attr({xmlns:c.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:h.width,height:h.height})}o.each(u),window.setTimeout(function(){r.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":754,"../../plots/get_data":865,"./plot":1160,d3:169}],1152:[function(e,v,M){var r=e("../../lib").isArrayOrTypedArray,n=e("../../components/colorscale"),l=e("../../lib/gup").wrap;v.exports=function(f,a){var o,u;return n.hasColorscale(a,"line")&&r(a.line.color)?(o=a.line.color,u=n.extractOpts(a.line).colorscale,n.calc(f,a,{vals:o,containerStr:"line",cLetter:"c"})):(o=c(a._length),u=[[0,a.line.color],[1,a.line.color]]),l({lineColor:o,cscale:u})};function c(t){for(var f=new Array(t),a=0;a<t;a++)f[a]=.5;return f}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gup":775}],1153:[function(e,v,M){v.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1154:[function(e,v,M){var r=e("../../lib"),n=e("../../components/colorscale/helpers").hasColorscale,l=e("../../components/colorscale/defaults"),c=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),f=e("../../plots/cartesian/axes"),a=e("./attributes"),o=e("./axisbrush"),u=e("./constants").maxDimensionCount,h=e("./merge_length");function i(p,d,y,b,m){var _=m("line.color",y);if(n(p,"line")&&r.isArrayOrTypedArray(_)){if(_.length)return m("line.colorscale"),l(p,d,b,m,{prefix:"line.",cLetter:"c"}),_.length;d.line.color=y}return 1/0}function s(p,d,y,b){function m(k,R){return r.coerce(p,d,a.dimensions,k,R)}var _=m("values"),T=m("visible");if(_&&_.length||(T=d.visible=!1),T){m("label"),m("tickvals"),m("ticktext"),m("tickformat");var g=m("range");d._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:g},f.setConvert(d._ax,b.layout),m("multiselect");var A=m("constraintrange");A&&(d.constraintrange=o.cleanRanges(A,d))}}v.exports=function(d,y,b,m){function _(R,L){return r.coerce(d,y,a,R,L)}var T=d.dimensions;Array.isArray(T)&&T.length>u&&(r.log("parcoords traces support up to "+u+" dimensions at the moment"),T.splice(u));var g=t(d,y,{name:"dimensions",layout:m,handleItemDefaults:s}),A=i(d,y,b,m,_);c(y,m,_),(!Array.isArray(g)||!g.length)&&(y.visible=!1),h(y,g,"values",A);var k={family:m.font.family,size:Math.round(m.font.size/1.2),color:m.font.color};r.coerceFont(_,"labelfont",k),r.coerceFont(_,"tickfont",k),r.coerceFont(_,"rangefont",k),_("labelangle"),_("labelside")}},{"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"../../plots/domain":855,"./attributes":1149,"./axisbrush":1150,"./constants":1153,"./merge_length":1158}],1155:[function(e,v,M){var r=e("../../lib").isTypedArray;M.convertTypedArray=function(n){return r(n)?Array.prototype.slice.call(n):n},M.isOrdinal=function(n){return!!n.tickvals},M.isVisible=function(n){return n.visible||!("visible"in n)}},{"../../lib":778}],1156:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":1149,"./base_plot":1151,"./calc":1152,"./defaults":1154,"./plot":1160}],1157:[function(e,v,M){var r=e("glslify"),n=r([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform sampler2D mask, palette;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(mask,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),l=r([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),c=e("./constants").maxDimensionCount,t=e("../../lib"),f=1e-6,a=2048,o=new Uint8Array(4),u=new Uint8Array(4),h={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(z){z.read({x:0,y:0,width:1,height:1,data:o})}function s(z,E,S,C,D){var F=z._gl;F.enable(F.SCISSOR_TEST),F.scissor(E,S,C,D),z.clear({color:[0,0,0,0],depth:1})}function p(z,E,S,C,D,F){var N=F.key;function G(U){var X=Math.min(C,D-U*C);U===0&&(window.cancelAnimationFrame(S.currentRafs[N]),delete S.currentRafs[N],s(z,F.scissorX,F.scissorY,F.scissorWidth,F.viewBoxSize[1])),!S.clearOnly&&(F.count=2*X,F.offset=2*U*C,E(F),U*C+X<D&&(S.currentRafs[N]=window.requestAnimationFrame(function(){G(U+1)})),S.drawCompleted=!1)}S.drawCompleted||(i(z),S.drawCompleted=!0),G(0)}function d(z){return Math.max(f,Math.min(1-f,z))}function y(z,E){for(var S=new Array(256),C=0;C<256;C++)S[C]=z(C/255).concat(E);return S}function b(z,E){return(z>>>8*E)%256/255}function m(z,E,S){for(var C=new Array(z*(c+4)),D=0,F=0;F<z;F++){for(var N=0;N<c;N++)C[D++]=N<E.length?E[N].paddedUnitValues[F]:.5;C[D++]=b(F,2),C[D++]=b(F,1),C[D++]=b(F,0),C[D++]=d(S[F])}return C}function _(z,E,S){for(var C=new Array(E*8),D=0,F=0;F<E;F++)for(var N=0;N<2;N++)for(var G=0;G<4;G++){var U=z*4+G,X=S[F*64+U];U===63&&N===0&&(X*=-1),C[D++]=X}return C}function T(z){var E="0"+z;return E.substr(E.length-2)}function g(z){return z<c?"p"+T(z+1)+"_"+T(z+4):"colors"}function A(z,E,S){for(var C=0;C<=c;C+=4)z[g(C)](_(C/4,E,S))}function k(z){for(var E={},S=0;S<=c;S+=4)E[g(S)]=z.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return E}function R(z,E,S,C,D,F,N,G,U,X,I,B,j){for(var H=[[],[]],K=0;K<64;K++)H[0][K]=K===D?1:0,H[1][K]=K===F?1:0;var te=z.lines.canvasOverdrag,J=z.domain,oe=z.canvasWidth,ie=z.canvasHeight,Q=z.deselectedLines.color,V=t.extendFlat({key:I,resolution:[oe,ie],viewBoxPos:[N+te,G],viewBoxSize:[U,X],i0:D,i1:F,dim0A:H[0].slice(0,16),dim0B:H[0].slice(16,32),dim0C:H[0].slice(32,48),dim0D:H[0].slice(48,64),dim1A:H[1].slice(0,16),dim1B:H[1].slice(16,32),dim1C:H[1].slice(32,48),dim1D:H[1].slice(48,64),drwLayer:B,contextColor:[Q[0]/255,Q[1]/255,Q[2]/255,Q[3]<1?Q[3]:Math.max(1/255,Math.pow(1/z.lines.color.length,1/3))],scissorX:(C===E?0:N+te)+(z.pad.l-te)+z.layoutWidth*J.x[0],scissorWidth:(C===S?oe-N+te:U+.5)+(C===E?N+te:0),scissorY:G+z.pad.b+z.layoutHeight*J.y[0],scissorHeight:X,viewportX:z.pad.l-te+z.layoutWidth*J.x[0],viewportY:z.pad.b+z.layoutHeight*J.y[0],viewportWidth:oe,viewportHeight:ie},j);return V}function L(z){var E=a-1,S=Math.max(0,Math.floor(z[0]*E),0),C=Math.min(E,Math.ceil(z[1]*E),E);return[Math.min(S,C),Math.max(S,C)]}v.exports=function(z,E){var S=E.context,C=E.pick,D=E.regl,F={currentRafs:{},drawCompleted:!0,clearOnly:!1},N,G,U,X,I=k(D),B,j=D.texture(h),H=[];te(E);var K=D({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:D.prop("scissorX"),y:D.prop("scissorY"),width:D.prop("scissorWidth"),height:D.prop("scissorHeight")}},viewport:{x:D.prop("viewportX"),y:D.prop("viewportY"),width:D.prop("viewportWidth"),height:D.prop("viewportHeight")},dither:!1,vert:n,frag:l,primitive:"lines",lineWidth:1,attributes:I,uniforms:{resolution:D.prop("resolution"),viewBoxPos:D.prop("viewBoxPos"),viewBoxSize:D.prop("viewBoxSize"),dim0A:D.prop("dim0A"),dim1A:D.prop("dim1A"),dim0B:D.prop("dim0B"),dim1B:D.prop("dim1B"),dim0C:D.prop("dim0C"),dim1C:D.prop("dim1C"),dim0D:D.prop("dim0D"),dim1D:D.prop("dim1D"),loA:D.prop("loA"),hiA:D.prop("hiA"),loB:D.prop("loB"),hiB:D.prop("hiB"),loC:D.prop("loC"),hiC:D.prop("hiC"),loD:D.prop("loD"),hiD:D.prop("hiD"),palette:j,contextColor:D.prop("contextColor"),mask:D.prop("maskTexture"),drwLayer:D.prop("drwLayer"),maskHeight:D.prop("maskHeight")},offset:D.prop("offset"),count:D.prop("count")});function te(se){N=se.model,G=se.viewModel,U=G.dimensions.slice(),X=U[0]?U[0].values.length:0;var re=N.lines,ee=C?re.color.map(function(fe,de){return de/re.color.length}):re.color,ae=m(X,U,ee);A(I,X,ae),!S&&!C&&(j=D.texture(t.extendFlat({data:y(N.unitToColor,255)},h)))}function J(se){var re,ee,ae,fe=[[],[]];for(ae=0;ae<64;ae++){var de=!se&&ae<U.length?U[ae].brush.filter.getBounds():[-1/0,1/0];fe[0][ae]=de[0],fe[1][ae]=de[1]}var pe=a*8,W=new Array(pe);for(re=0;re<pe;re++)W[re]=255;if(!se)for(re=0;re<U.length;re++){var ue=re%8,me=(re-ue)/8,be=Math.pow(2,ue),ke=U[re],Pe=ke.brush.filter.get();if(!(Pe.length<2)){var je=L(Pe[0])[1];for(ee=1;ee<Pe.length;ee++){var ze=L(Pe[ee]);for(ae=je+1;ae<ze[0];ae++)W[ae*8+me]&=~be;je=Math.max(je,ze[1])}}}var Ze={shape:[8,a],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:W};return B?B(Ze):B=D.texture(Ze),{maskTexture:B,maskHeight:a,loA:fe[0].slice(0,16),loB:fe[0].slice(16,32),loC:fe[0].slice(32,48),loD:fe[0].slice(48,64),hiA:fe[1].slice(0,16),hiB:fe[1].slice(16,32),hiC:fe[1].slice(32,48),hiD:fe[1].slice(48,64)}}function oe(se,re,ee){var ae=se.length,fe,de,pe,W=1/0,ue=-1/0;for(fe=0;fe<ae;fe++)se[fe].dim0.canvasX<W&&(W=se[fe].dim0.canvasX,de=fe),se[fe].dim1.canvasX>ue&&(ue=se[fe].dim1.canvasX,pe=fe);ae===0&&s(D,0,0,N.canvasWidth,N.canvasHeight);var me=J(S);for(fe=0;fe<ae;fe++){var be=se[fe],ke=be.dim0.crossfilterDimensionIndex,Pe=be.dim1.crossfilterDimensionIndex,je=be.canvasX,ze=be.canvasY,Ze=je+be.panelSizeX;if(re||!H[ke]||H[ke][0]!==je||H[ke][1]!==Ze){H[ke]=[je,Ze];var tt=R(N,de,pe,fe,ke,Pe,je,ze,be.panelSizeX,be.panelSizeY,be.dim0.crossfilterDimensionIndex,S?0:C?2:1,me);F.clearOnly=ee;var Ce=re?N.lines.blockLineCount:X;p(D,K,F,Ce,X,tt)}}}function ie(se,re){return D.read({x:se,y:re,width:1,height:1,data:u}),u}function Q(se,re,ee,ae){var fe=new Uint8Array(4*ee*ae);return D.read({x:se,y:re,width:ee,height:ae,data:fe}),fe}function V(){z.style["pointer-events"]="none",j.destroy(),B&&B.destroy();for(var se in I)I[se].destroy()}return{render:oe,readPixel:ie,readPixels:Q,destroy:V,update:te}}},{"../../lib":778,"./constants":1153,glslify:439}],1158:[function(e,v,M){v.exports=function(r,n,l,c){c||(c=1/0);var t,f;for(t=0;t<n.length;t++)f=n[t],f.visible&&(c=Math.min(c,f[l].length));for(c===1/0&&(c=0),r._length=c,t=0;t<n.length;t++)f=n[t],f.visible&&(f._length=c);return c}},{}],1159:[function(e,v,M){var r=e("d3"),n=e("color-rgba"),l=e("../../plots/cartesian/axes"),c=e("../../lib"),t=c.strRotate,f=c.strTranslate,a=e("../../lib/svg_text_utils"),o=e("../../components/drawing"),u=e("../../components/colorscale"),h=e("../../lib/gup"),i=h.keyFun,s=h.repeat,p=h.unwrap,d=e("./helpers"),y=e("./constants"),b=e("./axisbrush"),m=e("./lines");function _(H,K,te){return c.aggNums(H,null,K,te)}function T(H,K){return A(_(Math.min,H,K),_(Math.max,H,K))}function g(H){var K=H.range;return K?A(K[0],K[1]):T(H.values,H._length)}function A(H,K){return(isNaN(H)||!isFinite(H))&&(H=0),(isNaN(K)||!isFinite(K))&&(K=0),H===K&&(H===0?(H-=1,K+=1):(H*=.9,K*=1.1)),[H,K]}function k(H,K){return K?function(te,J){var oe=K[J];return oe??H(te)}:H}function R(H,K,te,J,oe){var ie=g(te);return J?r.scale.ordinal().domain(J.map(k(r.format(te.tickformat),oe))).range(J.map(function(Q){var V=(Q-ie[0])/(ie[1]-ie[0]);return H-K+V*(2*K-H)})):r.scale.linear().domain(ie).range([H-K,K])}function L(H,K){return r.scale.linear().range([K,H-K])}function z(H,K){return r.scale.linear().domain(g(H)).range([K,1-K])}function E(H){if(H.tickvals){var K=g(H);return r.scale.ordinal().domain(H.tickvals).range(H.tickvals.map(function(te){return(te-K[0])/(K[1]-K[0])}))}}function S(H){var K=H.map(function(ie){return ie[0]}),te=H.map(function(ie){var Q=n(ie[1]);return r.rgb("rgb("+Q[0]+","+Q[1]+","+Q[2]+")")}),J=function(ie){return function(Q){return Q[ie]}},oe="rgb".split("").map(function(ie){return r.scale.linear().clamp(!0).domain(K).range(te.map(J(ie)))});return function(ie){return oe.map(function(Q){return Q(ie)})}}function C(H){return H.dimensions.some(function(K){return K.brush.filterSpecified})}function D(H,K,te){var J=p(K),oe=J.trace,ie=d.convertTypedArray(J.lineColor),Q=oe.line,V={color:n(y.deselectedLineColor)},se=u.extractOpts(Q),re=se.reversescale?u.flipScale(J.cscale):J.cscale,ee=oe.domain,ae=oe.dimensions,fe=H.width,de=oe.labelangle,pe=oe.labelside,W=oe.labelfont,ue=oe.tickfont,me=oe.rangefont,be=c.extendDeepNoArrays({},Q,{color:ie.map(r.scale.linear().domain(g({values:ie,range:[se.min,se.max],_length:oe._length}))),blockLineCount:y.blockLineCount,canvasOverdrag:y.overdrag*y.canvasPixelRatio}),ke=Math.floor(fe*(ee.x[1]-ee.x[0])),Pe=Math.floor(H.height*(ee.y[1]-ee.y[0])),je=H.margin||{l:80,r:80,t:100,b:80},ze=ke,Ze=Pe;return{key:te,colCount:ae.filter(d.isVisible).length,dimensions:ae,tickDistance:y.tickDistance,unitToColor:S(re),lines:be,deselectedLines:V,labelAngle:de,labelSide:pe,labelFont:W,tickFont:ue,rangeFont:me,layoutWidth:fe,layoutHeight:H.height,domain:ee,translateX:ee.x[0]*fe,translateY:H.height-ee.y[1]*H.height,pad:je,canvasWidth:ze*y.canvasPixelRatio+2*be.canvasOverdrag,canvasHeight:Ze*y.canvasPixelRatio,width:ze,height:Ze,canvasPixelRatio:y.canvasPixelRatio}}function F(H,K,te){var J=te.width,oe=te.height,ie=te.dimensions,Q=te.canvasPixelRatio,V=function(fe){return J*fe/Math.max(1,te.colCount-1)},se=y.verticalPadding/oe,re=L(oe,y.verticalPadding),ee={key:te.key,xScale:V,model:te,inBrushDrag:!1},ae={};return ee.dimensions=ie.filter(d.isVisible).map(function(fe,de){var pe=z(fe,se),W=ae[fe.label];ae[fe.label]=(W||0)+1;var ue=fe.label+(W?"__"+W:""),me=fe.constraintrange,be=me&&me.length;be&&!Array.isArray(me[0])&&(me=[me]);var ke=be?me.map(function(At){return At.map(pe)}):[[-1/0,1/0]],Pe=function(){var At=ee;At.focusLayer&&At.focusLayer.render(At.panels,!0);var kt=C(At);!H.contextShown()&&kt?(At.contextLayer&&At.contextLayer.render(At.panels,!0),H.contextShown(!0)):H.contextShown()&&!kt&&(At.contextLayer&&At.contextLayer.render(At.panels,!0,!0),H.contextShown(!1))},je=fe.values;je.length>fe._length&&(je=je.slice(0,fe._length));var ze=fe.tickvals,Ze;function tt(At,kt){return{val:At,text:Ze[kt]}}function Ce(At,kt){return At.val-kt.val}if(Array.isArray(ze)&&ze.length){Ze=fe.ticktext,!Array.isArray(Ze)||!Ze.length?Ze=ze.map(r.format(fe.tickformat)):Ze.length>ze.length?Ze=Ze.slice(0,ze.length):ze.length>Ze.length&&(ze=ze.slice(0,Ze.length));for(var Ae=1;Ae<ze.length;Ae++)if(ze[Ae]<ze[Ae-1]){for(var Ne=ze.map(tt).sort(Ce),qe=0;qe<ze.length;qe++)ze[qe]=Ne[qe].val,Ze[qe]=Ne[qe].text;break}}else ze=void 0;return je=d.convertTypedArray(je),{key:ue,label:fe.label,tickFormat:fe.tickformat,tickvals:ze,ticktext:Ze,ordinal:d.isOrdinal(fe),multiselect:fe.multiselect,xIndex:de,crossfilterDimensionIndex:de,visibleIndex:fe._index,height:oe,values:je,paddedUnitValues:je.map(pe),unitTickvals:ze&&ze.map(pe),xScale:V,x:V(de),canvasX:V(de)*Q,unitToPaddedPx:re,domainScale:R(oe,y.verticalPadding,fe,ze,Ze),ordinalScale:E(fe),parent:ee,model:te,brush:b.makeBrush(H,be,ke,function(){H.linePickActive(!1)},Pe,function(At){if(ee.focusLayer.render(ee.panels,!0),ee.pickLayer&&ee.pickLayer.render(ee.panels,!0),H.linePickActive(!0),K&&K.filterChanged){var kt=pe.invert,Ve=At.map(function(ft){return ft.map(kt).sort(c.sorterAsc)}).sort(function(ft,St){return ft[0]-St[0]});K.filterChanged(ee.key,fe._index,Ve)}})}}),ee}function N(H){H.classed(y.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function G(){var H=!0,K=!1;return{linePickActive:function(te){return arguments.length?H=!!te:H},contextShown:function(te){return arguments.length?K=!!te:K}}}function U(H,K){var te=K==="top"?1:-1,J=H*Math.PI/180,oe=Math.sin(J),ie=Math.cos(J);return{dir:te,dx:oe,dy:ie,degrees:H}}function X(H,K){for(var te=K.panels||(K.panels=[]),J=H.data(),oe=0;oe<J.length-1;oe++){var ie=te[oe]||(te[oe]={}),Q=J[oe],V=J[oe+1];ie.dim0=Q,ie.dim1=V,ie.canvasX=Q.canvasX,ie.panelSizeX=V.canvasX-Q.canvasX,ie.panelSizeY=K.model.canvasHeight,ie.y=0,ie.canvasY=0}}function I(H){for(var K=0;K<H.length;K++)for(var te=0;te<H[K].length;te++)for(var J=H[K][te].trace,oe=J.dimensions,ie=0;ie<oe.length;ie++){var Q=oe[ie].values,V=oe[ie]._ax;V&&(V.range?V.range=A(V.range[0],V.range[1]):V.range=T(Q,J._length),V.dtick||(V.dtick=.01*(Math.abs(V.range[1]-V.range[0])||1)),V.tickformat=oe[ie].tickformat,l.calcTicks(V),V.cleanRange())}}function B(H,K){return l.tickText(H._ax,K,!1).text}function j(H,K){if(H.ordinal)return"";var te=H.domainScale.domain(),J=te[K?te.length-1:0];return B(H.model.dimensions[H.visibleIndex],J)}v.exports=function(K,te,J,oe){var ie=K._fullLayout,Q=ie._toppaper,V=ie._glcontainer;I(te);var se=G(),re=te.filter(function(Ce){return p(Ce).trace.visible}).map(D.bind(0,J)).map(F.bind(0,se,oe));V.each(function(Ce,Ae){return c.extendFlat(Ce,re[Ae])});var ee=V.selectAll(".gl-canvas").each(function(Ce){Ce.viewModel=re[0],Ce.model=Ce.viewModel?Ce.viewModel.model:null}),ae=null,fe=ee.filter(function(Ce){return Ce.pick});fe.style("pointer-events","auto").on("mousemove",function(Ce){if(se.linePickActive()&&Ce.lineLayer&&oe&&oe.hover){var Ae=r.event,Ne=this.width,qe=this.height,At=r.mouse(this),kt=At[0],Ve=At[1];if(kt<0||Ve<0||kt>=Ne||Ve>=qe)return;var ft=Ce.lineLayer.readPixel(kt,qe-1-Ve),St=ft[3]!==0,Wt=St?ft[2]+256*(ft[1]+256*ft[0]):null,Qt={x:kt,y:Ve,clientX:Ae.clientX,clientY:Ae.clientY,dataIndex:Ce.model.key,curveNumber:Wt};Wt!==ae&&(St?oe.hover(Qt):oe.unhover&&oe.unhover(Qt),ae=Wt)}}),ee.style("opacity",function(Ce){return Ce.pick?0:1}),Q.style("background","rgba(255, 255, 255, 0)");var de=Q.selectAll("."+y.cn.parcoords).data(re,i);de.exit().remove(),de.enter().append("g").classed(y.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),de.attr("transform",function(Ce){return f(Ce.model.translateX,Ce.model.translateY)});var pe=de.selectAll("."+y.cn.parcoordsControlView).data(s,i);pe.enter().append("g").classed(y.cn.parcoordsControlView,!0),pe.attr("transform",function(Ce){return f(Ce.model.pad.l,Ce.model.pad.t)});var W=pe.selectAll("."+y.cn.yAxis).data(function(Ce){return Ce.dimensions},i);W.enter().append("g").classed(y.cn.yAxis,!0),pe.each(function(Ce){X(W,Ce)}),ee.each(function(Ce){if(Ce.viewModel){!Ce.lineLayer||oe?Ce.lineLayer=m(this,Ce):Ce.lineLayer.update(Ce),(Ce.key||Ce.key===0)&&(Ce.viewModel[Ce.key]=Ce.lineLayer);var Ae=!Ce.context||oe;Ce.lineLayer.render(Ce.viewModel.panels,Ae)}}),W.attr("transform",function(Ce){return f(Ce.xScale(Ce.xIndex),0)}),W.call(r.behavior.drag().origin(function(Ce){return Ce}).on("drag",function(Ce){var Ae=Ce.parent;se.linePickActive(!1),Ce.x=Math.max(-y.overdrag,Math.min(Ce.model.width+y.overdrag,r.event.x)),Ce.canvasX=Ce.x*Ce.model.canvasPixelRatio,W.sort(function(Ne,qe){return Ne.x-qe.x}).each(function(Ne,qe){Ne.xIndex=qe,Ne.x=Ce===Ne?Ne.x:Ne.xScale(Ne.xIndex),Ne.canvasX=Ne.x*Ne.model.canvasPixelRatio}),X(W,Ae),W.filter(function(Ne){return Math.abs(Ce.xIndex-Ne.xIndex)!==0}).attr("transform",function(Ne){return f(Ne.xScale(Ne.xIndex),0)}),r.select(this).attr("transform",f(Ce.x,0)),W.each(function(Ne,qe,At){At===Ce.parent.key&&(Ae.dimensions[qe]=Ne)}),Ae.contextLayer&&Ae.contextLayer.render(Ae.panels,!1,!C(Ae)),Ae.focusLayer.render&&Ae.focusLayer.render(Ae.panels)}).on("dragend",function(Ce){var Ae=Ce.parent;Ce.x=Ce.xScale(Ce.xIndex),Ce.canvasX=Ce.x*Ce.model.canvasPixelRatio,X(W,Ae),r.select(this).attr("transform",function(Ne){return f(Ne.x,0)}),Ae.contextLayer&&Ae.contextLayer.render(Ae.panels,!1,!C(Ae)),Ae.focusLayer&&Ae.focusLayer.render(Ae.panels),Ae.pickLayer&&Ae.pickLayer.render(Ae.panels,!0),se.linePickActive(!0),oe&&oe.axesMoved&&oe.axesMoved(Ae.key,Ae.dimensions.map(function(Ne){return Ne.crossfilterDimensionIndex}))})),W.exit().remove();var ue=W.selectAll("."+y.cn.axisOverlays).data(s,i);ue.enter().append("g").classed(y.cn.axisOverlays,!0),ue.selectAll("."+y.cn.axis).remove();var me=ue.selectAll("."+y.cn.axis).data(s,i);me.enter().append("g").classed(y.cn.axis,!0),me.each(function(Ce){var Ae=Ce.model.height/Ce.model.tickDistance,Ne=Ce.domainScale,qe=Ne.domain();r.select(this).call(r.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ae,Ce.tickFormat).tickValues(Ce.ordinal?qe:null).tickFormat(function(At){return d.isOrdinal(Ce)?At:B(Ce.model.dimensions[Ce.visibleIndex],At)}).scale(Ne)),o.font(me.selectAll("text"),Ce.model.tickFont)}),me.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),me.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default");var be=ue.selectAll("."+y.cn.axisHeading).data(s,i);be.enter().append("g").classed(y.cn.axisHeading,!0);var ke=be.selectAll("."+y.cn.axisTitle).data(s,i);ke.enter().append("text").classed(y.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),ke.text(function(Ce){return Ce.label}).each(function(Ce){var Ae=r.select(this);o.font(Ae,Ce.model.labelFont),a.convertToTspans(Ae,K)}).attr("transform",function(Ce){var Ae=U(Ce.model.labelAngle,Ce.model.labelSide),Ne=y.axisTitleOffset;return(Ae.dir>0?"":f(0,2*Ne+Ce.model.height))+t(Ae.degrees)+f(-Ne*Ae.dx,-Ne*Ae.dy)}).attr("text-anchor",function(Ce){var Ae=U(Ce.model.labelAngle,Ce.model.labelSide),Ne=Math.abs(Ae.dx),qe=Math.abs(Ae.dy);return 2*Ne>qe?Ae.dir*Ae.dx<0?"start":"end":"middle"});var Pe=ue.selectAll("."+y.cn.axisExtent).data(s,i);Pe.enter().append("g").classed(y.cn.axisExtent,!0);var je=Pe.selectAll("."+y.cn.axisExtentTop).data(s,i);je.enter().append("g").classed(y.cn.axisExtentTop,!0),je.attr("transform",f(0,-y.axisExtentOffset));var ze=je.selectAll("."+y.cn.axisExtentTopText).data(s,i);ze.enter().append("text").classed(y.cn.axisExtentTopText,!0).call(N),ze.text(function(Ce){return j(Ce,!0)}).each(function(Ce){o.font(r.select(this),Ce.model.rangeFont)});var Ze=Pe.selectAll("."+y.cn.axisExtentBottom).data(s,i);Ze.enter().append("g").classed(y.cn.axisExtentBottom,!0),Ze.attr("transform",function(Ce){return f(0,Ce.model.height+y.axisExtentOffset)});var tt=Ze.selectAll("."+y.cn.axisExtentBottomText).data(s,i);tt.enter().append("text").classed(y.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(N),tt.text(function(Ce){return j(Ce,!1)}).each(function(Ce){o.font(r.select(this),Ce.model.rangeFont)}),b.ensureAxisBrush(ue)}},{"../../components/colorscale":655,"../../components/drawing":665,"../../lib":778,"../../lib/gup":775,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"./axisbrush":1150,"./constants":1153,"./helpers":1155,"./lines":1157,"color-rgba":127,d3:169}],1160:[function(e,v,M){var r=e("./parcoords"),n=e("../../lib/prepare_regl"),l=e("./helpers").isVisible;function c(f,a,o){var u=a.indexOf(o),h=f.indexOf(u);return h===-1&&(h+=a.length),h}function t(f,a){return function(u,h){return c(f,a,u)-c(f,a,h)}}v.exports=function(a,o){var u=a._fullLayout,h=n(a);if(h){var i={},s={},p={},d={},y=u._size;o.forEach(function(g,A){var k=g[0].trace;p[A]=k.index;var R=d[A]=k._fullInput.index;i[A]=a.data[R].dimensions,s[A]=a.data[R].dimensions.slice()});var b=function(g,A,k){var R=s[g][A],L=k.map(function(F){return F.slice()}),z="dimensions["+A+"].constraintrange",E=u._tracePreGUI[a._fullData[p[g]]._fullInput.uid];if(E[z]===void 0){var S=R.constraintrange;E[z]=S||null}var C=a._fullData[p[g]].dimensions[A];L.length?(L.length===1&&(L=L[0]),R.constraintrange=L,C.constraintrange=L.slice(),L=[L]):(delete R.constraintrange,delete C.constraintrange,L=null);var D={};D[z]=L,a.emit("plotly_restyle",[D,[d[g]]])},m=function(g){a.emit("plotly_hover",g)},_=function(g){a.emit("plotly_unhover",g)},T=function(g,A){var k=t(A,s[g].filter(l));i[g].sort(k),s[g].filter(function(R){return!l(R)}).sort(function(R){return s[g].indexOf(R)}).forEach(function(R){i[g].splice(i[g].indexOf(R),1),i[g].splice(s[g].indexOf(R),0,R)}),a.emit("plotly_restyle",[{dimensions:[i[g]]},[d[g]]])};r(a,o,{width:y.w,height:y.h,margin:{t:y.t,r:y.r,b:y.b,l:y.l}},{filterChanged:b,hover:m,unhover:_,axesMoved:T})}}},{"../../lib/prepare_regl":791,"./helpers":1155,"./parcoords":1159}],1161:[function(e,v,M){var r=e("../../plots/attributes"),n=e("../../plots/domain").attributes,l=e("../../plots/font_attributes"),c=e("../../components/color/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,f=e("../../plots/template_attributes").texttemplateAttrs,a=e("../../lib/extend").extendFlat,o=l({editType:"plot",arrayOk:!0,colorEditType:"plot"});v.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:c.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:a({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:t({},{keys:["label","color","value","percent","text"]}),texttemplate:f({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:a({},o,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:a({},o,{}),outsidetextfont:a({},o,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:a({},o,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:n({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:a({},o,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":642,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/font_attributes":856,"../../plots/template_attributes":906}],1162:[function(e,v,M){var r=e("../../plots/plots");M.name="pie",M.plot=function(n,l,c,t){r.plotBasePlot(M.name,n,l,c,t)},M.clean=function(n,l,c,t){r.cleanBasePlot(M.name,n,l,c,t)}},{"../../plots/plots":891}],1163:[function(e,v,M){var r=e("fast-isnumeric"),n=e("tinycolor2"),l=e("../../components/color"),c={};function t(u,h){var i=[],s=u._fullLayout,p=s.hiddenlabels||[],d=h.labels,y=h.marker.colors||[],b=h.values,m=h._length,_=h._hasValues&&m,T,g;if(h.dlabel)for(d=new Array(m),T=0;T<m;T++)d[T]=String(h.label0+T*h.dlabel);var A={},k=f(s["_"+h.type+"colormap"]),R=0,L=!1;for(T=0;T<m;T++){var z,E,S;if(_){if(z=b[T],!r(z)||(z=+z,z<0))continue}else z=1;E=d[T],(E===void 0||E==="")&&(E=T),E=String(E);var C=A[E];C===void 0?(A[E]=i.length,S=p.indexOf(E)!==-1,S||(R+=z),i.push({v:z,label:E,color:k(y[T],E),i:T,pts:[T],hidden:S})):(L=!0,g=i[C],g.v+=z,g.pts.push(T),g.hidden||(R+=z),g.color===!1&&y[T]&&(g.color=k(y[T],E)))}var D=h.type==="funnelarea"?L:h.sort;return D&&i.sort(function(F,N){return N.v-F.v}),i[0]&&(i[0].vTotal=R),i}function f(u){return function(i,s){return!i||(i=n(i),!i.isValid())?!1:(i=l.addOpacity(i,i.getAlpha()),u[s]||(u[s]=i),i)}}function a(u,h){var i=(h||{}).type;i||(i="pie");var s=u._fullLayout,p=u.calcdata,d=s[i+"colorway"],y=s["_"+i+"colormap"];s["extend"+i+"colors"]&&(d=o(d,c));for(var b=0,m=0;m<p.length;m++){var _=p[m],T=_[0].trace.type;if(T===i)for(var g=0;g<_.length;g++){var A=_[g];A.color===!1&&(y[A.label]?A.color=y[A.label]:(y[A.label]=A.color=d[b%d.length],b++))}}}function o(u,h){var i,s=JSON.stringify(u),p=h[s];if(!p){for(p=u.slice(),i=0;i<u.length;i++)p.push(n(u[i]).lighten(20).toHexString());for(i=0;i<u.length;i++)p.push(n(u[i]).darken(20).toHexString());h[s]=p}return p}v.exports={calc:t,crossTraceCalc:a,makePullColorFn:f,generateExtendedColors:o}},{"../../components/color":643,"fast-isnumeric":241,tinycolor2:576}],1164:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib"),l=e("./attributes"),c=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText;function f(o,u){var h=Array.isArray(o),i=n.isArrayOrTypedArray(u),s=Math.min(h?o.length:1/0,i?u.length:1/0);if(isFinite(s)||(s=0),s&&i){for(var p,d=0;d<s;d++){var y=u[d];if(r(y)&&y>0){p=!0;break}}p||(s=0)}return{hasLabels:h,hasValues:i,len:s}}function a(o,u,h,i){function s(S,C){return n.coerce(o,u,l,S,C)}var p=s("labels"),d=s("values"),y=f(p,d),b=y.len;if(u._hasLabels=y.hasLabels,u._hasValues=y.hasValues,!u._hasLabels&&u._hasValues&&(s("label0"),s("dlabel")),!b){u.visible=!1;return}u._length=b;var m=s("marker.line.width");m&&s("marker.line.color"),s("marker.colors"),s("scalegroup");var _=s("text"),T=s("texttemplate"),g;if(T||(g=s("textinfo",Array.isArray(_)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),T||g&&g!=="none"){var A=s("textposition");t(o,u,i,s,A,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var k=Array.isArray(A)||A==="auto",R=k||A==="outside";R&&s("automargin"),(A==="inside"||A==="auto"||Array.isArray(A))&&s("insidetextorientation")}c(u,i,s);var L=s("hole"),z=s("title.text");if(z){var E=s("title.position",L?"middle center":"top center");!L&&E==="middle center"&&(u.title.position="top center"),n.coerceFont(s,"title.font",i.font)}s("sort"),s("direction"),s("rotation"),s("pull")}v.exports={handleLabelsAndValues:f,supplyDefaults:a}},{"../../lib":778,"../../plots/domain":855,"../bar/defaults":925,"./attributes":1161,"fast-isnumeric":241}],1165:[function(e,v,M){var r=e("../../components/fx/helpers").appendArrayMultiPointValues;v.exports=function(l,c){var t={curveNumber:c.index,pointNumbers:l.pts,data:c._input,fullData:c,label:l.label,color:l.color,value:l.v,percent:l.percent,text:l.text,v:l.v};return l.pts.length===1&&(t.pointNumber=t.i=l.pts[0]),r(t,c,l.pts),c.type==="funnelarea"&&(delete t.v,delete t.i),t}},{"../../components/fx/helpers":679}],1166:[function(e,v,M){var r=e("../../lib");function n(l){return l.indexOf("e")!==-1?l.replace(/[.]?0+e/,"e"):l.indexOf(".")!==-1?l.replace(/[.]?0+$/,""):l}M.formatPiePercent=function(c,t){var f=n((c*100).toPrecision(3));return r.numSeparate(f,t)+"%"},M.formatPieValue=function(c,t){var f=n(c.toPrecision(10));return r.numSeparate(f,t)},M.getFirstFilled=function(c,t){if(Array.isArray(c))for(var f=0;f<t.length;f++){var a=c[t[f]];if(a||a===0||a==="")return a}},M.castOption=function(c,t){if(Array.isArray(c))return M.getFirstFilled(c,t);if(c)return c},M.getRotationAngle=function(l){return(l==="auto"?0:l)*Math.PI/180}},{"../../lib":778}],1167:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":1161,"./base_plot":1162,"./calc":1163,"./defaults":1164,"./layout_attributes":1168,"./layout_defaults":1169,"./plot":1170,"./style":1171,"./style_one":1172}],1168:[function(e,v,M){v.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1169:[function(e,v,M){var r=e("../../lib"),n=e("./layout_attributes");v.exports=function(c,t){function f(a,o){return r.coerce(c,t,n,a,o)}f("hiddenlabels"),f("piecolorway",t.colorway),f("extendpiecolors")}},{"../../lib":778,"./layout_attributes":1168}],1170:[function(e,v,M){var r=e("d3"),n=e("../../plots/plots"),l=e("../../components/fx"),c=e("../../components/color"),t=e("../../components/drawing"),f=e("../../lib"),a=f.strScale,o=f.strTranslate,u=e("../../lib/svg_text_utils"),h=e("../bar/uniform_text"),i=h.recordMinTextSize,s=h.clearMinTextSize,p=e("../bar/constants").TEXTPAD,d=e("./helpers"),y=e("./event_data"),b=e("../../lib").isValidTextValue;function m(Q,V){var se=Q._fullLayout,re=se._size;s("pie",se),k(V,Q),H(V,re);var ee=f.makeTraceGroups(se._pielayer,V,"trace").each(function(ae){var fe=r.select(this),de=ae[0],pe=de.trace;te(ae),fe.attr("stroke-linejoin","round"),fe.each(function(){var W=r.select(this).selectAll("g.slice").data(ae);W.enter().append("g").classed("slice",!0),W.exit().remove();var ue=[[[],[]],[[],[]]],me=!1;W.each(function(Ce,Ae){if(Ce.hidden){r.select(this).selectAll("path,g").remove();return}Ce.pointNumber=Ce.i,Ce.curveNumber=pe.index,ue[Ce.pxmid[1]<0?0:1][Ce.pxmid[0]<0?0:1].push(Ce);var Ne=de.cx,qe=de.cy,At=r.select(this),kt=At.selectAll("path.surface").data([Ce]);if(kt.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),At.call(T,Q,ae),pe.pull){var Ve=+d.castOption(pe.pull,Ce.pts)||0;Ve>0&&(Ne+=Ve*Ce.pxmid[0],qe+=Ve*Ce.pxmid[1])}Ce.cxFinal=Ne,Ce.cyFinal=qe;function ft(Pt,Lt,dt,lt){var Te=lt*(Lt[0]-Pt[0]),Le=lt*(Lt[1]-Pt[1]);return"a"+lt*de.r+","+lt*de.r+" 0 "+Ce.largeArc+(dt?" 1 ":" 0 ")+Te+","+Le}var St=pe.hole;if(Ce.v===de.vTotal){var Wt="M"+(Ne+Ce.px0[0])+","+(qe+Ce.px0[1])+ft(Ce.px0,Ce.pxmid,!0,1)+ft(Ce.pxmid,Ce.px0,!0,1)+"Z";St?kt.attr("d","M"+(Ne+St*Ce.px0[0])+","+(qe+St*Ce.px0[1])+ft(Ce.px0,Ce.pxmid,!1,St)+ft(Ce.pxmid,Ce.px0,!1,St)+"Z"+Wt):kt.attr("d",Wt)}else{var Qt=ft(Ce.px0,Ce.px1,!0,1);if(St){var zt=1-St;kt.attr("d","M"+(Ne+St*Ce.px1[0])+","+(qe+St*Ce.px1[1])+ft(Ce.px1,Ce.px0,!1,St)+"l"+zt*Ce.px0[0]+","+zt*Ce.px0[1]+Qt+"Z")}else kt.attr("d","M"+Ne+","+qe+"l"+Ce.px0[0]+","+Ce.px0[1]+Qt+"Z")}oe(Q,Ce,de);var $t=d.castOption(pe.textposition,Ce.pts),rr=At.selectAll("g.slicetext").data(Ce.text&&$t!=="none"?[0]:[]);rr.enter().append("g").classed("slicetext",!0),rr.exit().remove(),rr.each(function(){var Pt=f.ensureSingle(r.select(this),"text","",function(Me){Me.attr("data-notex",1)}),Lt=f.ensureUniformFontSize(Q,$t==="outside"?g(pe,Ce,se.font):A(pe,Ce,se.font));Pt.text(Ce.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(t.font,Lt).call(u.convertToTspans,Q);var dt=t.bBox(Pt.node()),lt;if($t==="outside")lt=N(dt,Ce);else if(lt=R(dt,Ce,de),$t==="auto"&&lt.scale<1){var Te=f.ensureUniformFontSize(Q,pe.outsidetextfont);Pt.call(t.font,Te),dt=t.bBox(Pt.node()),lt=N(dt,Ce)}var Le=lt.textPosAngle,Be=Le===void 0?Ce.pxmid:J(de.r,Le);if(lt.targetX=Ne+Be[0]*lt.rCenter+(lt.x||0),lt.targetY=qe+Be[1]*lt.rCenter+(lt.y||0),ie(lt,dt),lt.outside){var et=lt.targetY;Ce.yLabelMin=et-dt.height/2,Ce.yLabelMid=et,Ce.yLabelMax=et+dt.height/2,Ce.labelExtraX=0,Ce.labelExtraY=0,me=!0}lt.fontSize=Lt.size,i(pe.type,lt,se),ae[Ae].transform=lt,Pt.attr("transform",f.getTextTransform(lt))})});var be=r.select(this).selectAll("g.titletext").data(pe.title.text?[0]:[]);if(be.enter().append("g").classed("titletext",!0),be.exit().remove(),be.each(function(){var Ce=f.ensureSingle(r.select(this),"text","",function(qe){qe.attr("data-notex",1)}),Ae=pe.title.text;pe._meta&&(Ae=f.templateString(Ae,pe._meta)),Ce.text(Ae).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(t.font,pe.title.font).call(u.convertToTspans,Q);var Ne;pe.title.position==="middle center"?Ne=G(de):Ne=U(de,re),Ce.attr("transform",o(Ne.x,Ne.y)+a(Math.min(1,Ne.scale))+o(Ne.tx,Ne.ty))}),me&&j(ue,pe),_(W,pe),me&&pe.automargin){var ke=t.bBox(fe.node()),Pe=pe.domain,je=re.w*(Pe.x[1]-Pe.x[0]),ze=re.h*(Pe.y[1]-Pe.y[0]),Ze=(.5*je-de.r)/re.w,tt=(.5*ze-de.r)/re.h;n.autoMargin(Q,"pie."+pe.uid+".automargin",{xl:Pe.x[0]-Ze,xr:Pe.x[1]+Ze,yb:Pe.y[0]-tt,yt:Pe.y[1]+tt,l:Math.max(de.cx-de.r-ke.left,0),r:Math.max(ke.right-(de.cx+de.r),0),b:Math.max(ke.bottom-(de.cy+de.r),0),t:Math.max(de.cy-de.r-ke.top,0),pad:5})}})});setTimeout(function(){ee.selectAll("tspan").each(function(){var ae=r.select(this);ae.attr("dy")&&ae.attr("dy",ae.attr("dy"))})},0)}function _(Q,V){Q.each(function(se){var re=r.select(this);if(!se.labelExtraX&&!se.labelExtraY){re.select("path.textline").remove();return}var ee=re.select("g.slicetext text");se.transform.targetX+=se.labelExtraX,se.transform.targetY+=se.labelExtraY,ee.attr("transform",f.getTextTransform(se.transform));var ae=se.cxFinal+se.pxmid[0],fe=se.cyFinal+se.pxmid[1],de="M"+ae+","+fe,pe=(se.yLabelMax-se.yLabelMin)*(se.pxmid[0]<0?-1:1)/4;if(se.labelExtraX){var W=se.labelExtraX*se.pxmid[1]/se.pxmid[0],ue=se.yLabelMid+se.labelExtraY-(se.cyFinal+se.pxmid[1]);Math.abs(W)>Math.abs(ue)?de+="l"+ue*se.pxmid[0]/se.pxmid[1]+","+ue+"H"+(ae+se.labelExtraX+pe):de+="l"+se.labelExtraX+","+W+"v"+(ue-W)+"h"+pe}else de+="V"+(se.yLabelMid+se.labelExtraY)+"h"+pe;f.ensureSingle(re,"path","textline").call(c.stroke,V.outsidetextfont.color).attr({"stroke-width":Math.min(2,V.outsidetextfont.size/8),d:de,fill:"none"})})}function T(Q,V,se){var re=se[0],ee=re.trace,ae=re.cx,fe=re.cy;"_hasHoverLabel"in ee||(ee._hasHoverLabel=!1),"_hasHoverEvent"in ee||(ee._hasHoverEvent=!1),Q.on("mouseover",function(de){var pe=V._fullLayout,W=V._fullData[ee.index];if(!(V._dragging||pe.hovermode===!1)){var ue=W.hoverinfo;if(Array.isArray(ue)&&(ue=l.castHoverinfo({hoverinfo:[d.castOption(ue,de.pts)],_module:ee._module},pe,0)),ue==="all"&&(ue="label+text+value+percent+name"),W.hovertemplate||ue!=="none"&&ue!=="skip"&&ue){var me=de.rInscribed||0,be=ae+de.pxmid[0]*(1-me),ke=fe+de.pxmid[1]*(1-me),Pe=pe.separators,je=[];if(ue&&ue.indexOf("label")!==-1&&je.push(de.label),de.text=d.castOption(W.hovertext||W.text,de.pts),ue&&ue.indexOf("text")!==-1){var ze=de.text;f.isValidTextValue(ze)&&je.push(ze)}de.value=de.v,de.valueLabel=d.formatPieValue(de.v,Pe),ue&&ue.indexOf("value")!==-1&&je.push(de.valueLabel),de.percent=de.v/re.vTotal,de.percentLabel=d.formatPiePercent(de.percent,Pe),ue&&ue.indexOf("percent")!==-1&&je.push(de.percentLabel);var Ze=W.hoverlabel,tt=Ze.font;l.loneHover({trace:ee,x0:be-me*re.r,x1:be+me*re.r,y:ke,text:je.join("<br>"),name:W.hovertemplate||ue.indexOf("name")!==-1?W.name:void 0,idealAlign:de.pxmid[0]<0?"left":"right",color:d.castOption(Ze.bgcolor,de.pts)||de.color,borderColor:d.castOption(Ze.bordercolor,de.pts),fontFamily:d.castOption(tt.family,de.pts),fontSize:d.castOption(tt.size,de.pts),fontColor:d.castOption(tt.color,de.pts),nameLength:d.castOption(Ze.namelength,de.pts),textAlign:d.castOption(Ze.align,de.pts),hovertemplate:d.castOption(W.hovertemplate,de.pts),hovertemplateLabels:de,eventData:[y(de,W)]},{container:pe._hoverlayer.node(),outerContainer:pe._paper.node(),gd:V}),ee._hasHoverLabel=!0}ee._hasHoverEvent=!0,V.emit("plotly_hover",{points:[y(de,W)],event:r.event})}}),Q.on("mouseout",function(de){var pe=V._fullLayout,W=V._fullData[ee.index],ue=r.select(this).datum();ee._hasHoverEvent&&(de.originalEvent=r.event,V.emit("plotly_unhover",{points:[y(ue,W)],event:r.event}),ee._hasHoverEvent=!1),ee._hasHoverLabel&&(l.loneUnhover(pe._hoverlayer.node()),ee._hasHoverLabel=!1)}),Q.on("click",function(de){var pe=V._fullLayout,W=V._fullData[ee.index];V._dragging||pe.hovermode===!1||(V._hoverdata=[y(de,W)],l.click(V,r.event))})}function g(Q,V,se){var re=d.castOption(Q.outsidetextfont.color,V.pts)||d.castOption(Q.textfont.color,V.pts)||se.color,ee=d.castOption(Q.outsidetextfont.family,V.pts)||d.castOption(Q.textfont.family,V.pts)||se.family,ae=d.castOption(Q.outsidetextfont.size,V.pts)||d.castOption(Q.textfont.size,V.pts)||se.size;return{color:re,family:ee,size:ae}}function A(Q,V,se){var re=d.castOption(Q.insidetextfont.color,V.pts);!re&&Q._input.textfont&&(re=d.castOption(Q._input.textfont.color,V.pts));var ee=d.castOption(Q.insidetextfont.family,V.pts)||d.castOption(Q.textfont.family,V.pts)||se.family,ae=d.castOption(Q.insidetextfont.size,V.pts)||d.castOption(Q.textfont.size,V.pts)||se.size;return{color:re||c.contrast(V.color),family:ee,size:ae}}function k(Q,V){for(var se,re,ee=0;ee<Q.length;ee++)if(se=Q[ee][0],re=se.trace,re.title.text){var ae=re.title.text;re._meta&&(ae=f.templateString(ae,re._meta));var fe=t.tester.append("text").attr("data-notex",1).text(ae).call(t.font,re.title.font).call(u.convertToTspans,V),de=t.bBox(fe.node(),!0);se.titleBox={width:de.width,height:de.height},fe.remove()}}function R(Q,V,se){var re=se.r||V.rpx1,ee=V.rInscribed,ae=V.startangle===V.stopangle;if(ae)return{rCenter:1-ee,scale:0,rotate:0,textPosAngle:0};var fe=V.ring,de=fe===1&&Math.abs(V.startangle-V.stopangle)===Math.PI*2,pe=V.halfangle,W=V.midangle,ue=se.trace.insidetextorientation,me=ue==="horizontal",be=ue==="tangential",ke=ue==="radial",Pe=ue==="auto",je=[],ze;if(!Pe){var Ze=function(kt,Ve){if(L(V,kt)){var ft=Math.abs(kt-V.startangle),St=Math.abs(kt-V.stopangle),Wt=ft<St?ft:St;Ve==="tan"?ze=E(Q,re,fe,Wt,0):ze=z(Q,re,fe,Wt,Math.PI/2),ze.textPosAngle=kt,je.push(ze)}},tt;if(me||be){for(tt=4;tt>=-4;tt-=2)Ze(Math.PI*tt,"tan");for(tt=4;tt>=-4;tt-=2)Ze(Math.PI*(tt+1),"tan")}if(me||ke){for(tt=4;tt>=-4;tt-=2)Ze(Math.PI*(tt+1.5),"rad");for(tt=4;tt>=-4;tt-=2)Ze(Math.PI*(tt+.5),"rad")}}if(de||Pe||me){var Ce=Math.sqrt(Q.width*Q.width+Q.height*Q.height);if(ze={scale:ee*re*2/Ce,rCenter:1-ee,rotate:0},ze.textPosAngle=(V.startangle+V.stopangle)/2,ze.scale>=1)return ze;je.push(ze)}(Pe||ke)&&(ze=z(Q,re,fe,pe,W),ze.textPosAngle=(V.startangle+V.stopangle)/2,je.push(ze)),(Pe||be)&&(ze=E(Q,re,fe,pe,W),ze.textPosAngle=(V.startangle+V.stopangle)/2,je.push(ze));for(var Ae=0,Ne=0,qe=0;qe<je.length;qe++){var At=je[qe].scale;if(Ne<At&&(Ne=At,Ae=qe),!Pe&&Ne>=1)break}return je[Ae]}function L(Q,V){var se=Q.startangle,re=Q.stopangle;return se>V&&V>re||se<V&&V<re}function z(Q,V,se,re,ee){V=Math.max(0,V-2*p);var ae=Q.width/Q.height,fe=D(ae,re,V,se);return{scale:fe*2/Q.height,rCenter:S(ae,fe/V),rotate:C(ee)}}function E(Q,V,se,re,ee){V=Math.max(0,V-2*p);var ae=Q.height/Q.width,fe=D(ae,re,V,se);return{scale:fe*2/Q.width,rCenter:S(ae,fe/V),rotate:C(ee+Math.PI/2)}}function S(Q,V){return Math.cos(V)-Q*V}function C(Q){return(180/Math.PI*Q+720)%180-90}function D(Q,V,se,re){var ee=Q+1/(2*Math.tan(V));return se*Math.min(1/(Math.sqrt(ee*ee+.5)+ee),re/(Math.sqrt(Q*Q+re/2)+Q))}function F(Q,V){return Q.v===V.vTotal&&!V.trace.hole?1:Math.min(1/(1+1/Math.sin(Q.halfangle)),Q.ring/2)}function N(Q,V){var se=V.pxmid[0],re=V.pxmid[1],ee=Q.width/2,ae=Q.height/2;return se<0&&(ee*=-1),re<0&&(ae*=-1),{scale:1,rCenter:1,rotate:0,x:ee+Math.abs(ae)*(ee>0?1:-1)/2,y:ae/(1+se*se/(re*re)),outside:!0}}function G(Q){var V=Math.sqrt(Q.titleBox.width*Q.titleBox.width+Q.titleBox.height*Q.titleBox.height);return{x:Q.cx,y:Q.cy,scale:Q.trace.hole*Q.r*2/V,tx:0,ty:-Q.titleBox.height/2+Q.trace.title.font.size}}function U(Q,V){var se=1,re=1,ee,ae=Q.trace,fe={x:Q.cx,y:Q.cy},de={tx:0,ty:0};de.ty+=ae.title.font.size,ee=B(ae),ae.title.position.indexOf("top")!==-1?(fe.y-=(1+ee)*Q.r,de.ty-=Q.titleBox.height):ae.title.position.indexOf("bottom")!==-1&&(fe.y+=(1+ee)*Q.r);var pe=X(Q.r,Q.trace.aspectratio),W=V.w*(ae.domain.x[1]-ae.domain.x[0])/2;return ae.title.position.indexOf("left")!==-1?(W=W+pe,fe.x-=(1+ee)*pe,de.tx+=Q.titleBox.width/2):ae.title.position.indexOf("center")!==-1?W*=2:ae.title.position.indexOf("right")!==-1&&(W=W+pe,fe.x+=(1+ee)*pe,de.tx-=Q.titleBox.width/2),se=W/Q.titleBox.width,re=I(Q,V)/Q.titleBox.height,{x:fe.x,y:fe.y,scale:Math.min(se,re),tx:de.tx,ty:de.ty}}function X(Q,V){return Q/(V===void 0?1:V)}function I(Q,V){var se=Q.trace,re=V.h*(se.domain.y[1]-se.domain.y[0]);return Math.min(Q.titleBox.height,re/2)}function B(Q){var V=Q.pull;if(!V)return 0;var se;if(Array.isArray(V))for(V=0,se=0;se<Q.pull.length;se++)Q.pull[se]>V&&(V=Q.pull[se]);return V}function j(Q,V){var se,re,ee,ae,fe,de,pe,W,ue,me,be,ke,Pe;function je(Ce,Ae){return Ce.pxmid[1]-Ae.pxmid[1]}function ze(Ce,Ae){return Ae.pxmid[1]-Ce.pxmid[1]}function Ze(Ce,Ae){Ae||(Ae={});var Ne=Ae.labelExtraY+(re?Ae.yLabelMax:Ae.yLabelMin),qe=re?Ce.yLabelMin:Ce.yLabelMax,At=re?Ce.yLabelMax:Ce.yLabelMin,kt=Ce.cyFinal+fe(Ce.px0[1],Ce.px1[1]),Ve=Ne-qe,ft,St,Wt,Qt,zt,$t;if(Ve*pe>0&&(Ce.labelExtraY=Ve),!!Array.isArray(V.pull))for(St=0;St<me.length;St++)Wt=me[St],!(Wt===Ce||(d.castOption(V.pull,Ce.pts)||0)>=(d.castOption(V.pull,Wt.pts)||0))&&((Ce.pxmid[1]-Wt.pxmid[1])*pe>0?(Qt=Wt.cyFinal+fe(Wt.px0[1],Wt.px1[1]),Ve=Qt-qe-Ce.labelExtraY,Ve*pe>0&&(Ce.labelExtraY+=Ve)):(At+Ce.labelExtraY-kt)*pe>0&&(ft=3*de*Math.abs(St-me.indexOf(Ce)),zt=Wt.cxFinal+ae(Wt.px0[0],Wt.px1[0]),$t=zt+ft-(Ce.cxFinal+Ce.pxmid[0])-Ce.labelExtraX,$t*de>0&&(Ce.labelExtraX+=$t)))}for(re=0;re<2;re++)for(ee=re?je:ze,fe=re?Math.max:Math.min,pe=re?1:-1,se=0;se<2;se++){for(ae=se?Math.max:Math.min,de=se?1:-1,W=Q[re][se],W.sort(ee),ue=Q[1-re][se],me=ue.concat(W),ke=[],be=0;be<W.length;be++)W[be].yLabelMid!==void 0&&ke.push(W[be]);for(Pe=!1,be=0;re&&be<ue.length;be++)if(ue[be].yLabelMid!==void 0){Pe=ue[be];break}for(be=0;be<ke.length;be++){var tt=be&&ke[be-1];Pe&&!be&&(tt=Pe),Ze(ke[be],tt)}}}function H(Q,V){for(var se=[],re=0;re<Q.length;re++){var ee=Q[re][0],ae=ee.trace,fe=ae.domain,de=V.w*(fe.x[1]-fe.x[0]),pe=V.h*(fe.y[1]-fe.y[0]);ae.title.text&&ae.title.position!=="middle center"&&(pe-=I(ee,V));var W=de/2,ue=pe/2;ae.type==="funnelarea"&&!ae.scalegroup&&(ue/=ae.aspectratio),ee.r=Math.min(W,ue)/(1+B(ae)),ee.cx=V.l+V.w*(ae.domain.x[1]+ae.domain.x[0])/2,ee.cy=V.t+V.h*(1-ae.domain.y[0])-pe/2,ae.title.text&&ae.title.position.indexOf("bottom")!==-1&&(ee.cy-=I(ee,V)),ae.scalegroup&&se.indexOf(ae.scalegroup)===-1&&se.push(ae.scalegroup)}K(Q,se)}function K(Q,V){for(var se,re,ee,ae=0;ae<V.length;ae++){var fe=1/0,de=V[ae];for(re=0;re<Q.length;re++)if(se=Q[re][0],ee=se.trace,ee.scalegroup===de){var pe;if(ee.type==="pie")pe=se.r*se.r;else if(ee.type==="funnelarea"){var W,ue;ee.aspectratio>1?(W=se.r,ue=W/ee.aspectratio):(ue=se.r,W=ue*ee.aspectratio),W*=(1+ee.baseratio)/2,pe=W*ue}fe=Math.min(fe,pe/se.vTotal)}for(re=0;re<Q.length;re++)if(se=Q[re][0],ee=se.trace,ee.scalegroup===de){var me=fe*se.vTotal;ee.type==="funnelarea"&&(me/=(1+ee.baseratio)/2,me/=ee.aspectratio),se.r=Math.sqrt(me)}}}function te(Q){var V=Q[0],se=V.r,re=V.trace,ee=d.getRotationAngle(re.rotation),ae=2*Math.PI/V.vTotal,fe="px0",de="px1",pe,W,ue;if(re.direction==="counterclockwise"){for(pe=0;pe<Q.length&&Q[pe].hidden;pe++);if(pe===Q.length)return;ee+=ae*Q[pe].v,ae*=-1,fe="px1",de="px0"}for(ue=J(se,ee),pe=0;pe<Q.length;pe++)W=Q[pe],!W.hidden&&(W[fe]=ue,W.startangle=ee,ee+=ae*W.v/2,W.pxmid=J(se,ee),W.midangle=ee,ee+=ae*W.v/2,ue=J(se,ee),W.stopangle=ee,W[de]=ue,W.largeArc=W.v>V.vTotal/2?1:0,W.halfangle=Math.PI*Math.min(W.v/V.vTotal,.5),W.ring=1-re.hole,W.rInscribed=F(W,V))}function J(Q,V){return[Q*Math.sin(V),-Q*Math.cos(V)]}function oe(Q,V,se){var re=Q._fullLayout,ee=se.trace,ae=ee.texttemplate,fe=ee.textinfo;if(!ae&&fe&&fe!=="none"){var de=fe.split("+"),pe=function(Ae){return de.indexOf(Ae)!==-1},W=pe("label"),ue=pe("text"),me=pe("value"),be=pe("percent"),ke=re.separators,Pe;if(Pe=W?[V.label]:[],ue){var je=d.getFirstFilled(ee.text,V.pts);b(je)&&Pe.push(je)}me&&Pe.push(d.formatPieValue(V.v,ke)),be&&Pe.push(d.formatPiePercent(V.v/se.vTotal,ke)),V.text=Pe.join("<br>")}function ze(Ae){return{label:Ae.label,value:Ae.v,valueLabel:d.formatPieValue(Ae.v,re.separators),percent:Ae.v/se.vTotal,percentLabel:d.formatPiePercent(Ae.v/se.vTotal,re.separators),color:Ae.color,text:Ae.text,customdata:f.castOption(ee,Ae.i,"customdata")}}if(ae){var Ze=f.castOption(ee,V.i,"texttemplate");if(!Ze)V.text="";else{var tt=ze(V),Ce=d.getFirstFilled(ee.text,V.pts);(b(Ce)||Ce==="")&&(tt.text=Ce),V.text=f.texttemplateString(Ze,tt,Q._fullLayout._d3locale,tt,ee._meta||{})}}}function ie(Q,V){var se=Q.rotate*Math.PI/180,re=Math.cos(se),ee=Math.sin(se),ae=(V.left+V.right)/2,fe=(V.top+V.bottom)/2;Q.textX=ae*re-fe*ee,Q.textY=ae*ee+fe*re,Q.noCenter=!0}v.exports={plot:m,formatSliceLabel:oe,transformInsideText:R,determineInsideTextFont:A,positionTitleOutside:U,prerenderTitles:k,layoutAreas:H,attachFxHandlers:T,computeTransform:ie}},{"../../components/color":643,"../../components/drawing":665,"../../components/fx":683,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../bar/constants":923,"../bar/uniform_text":937,"./event_data":1165,"./helpers":1166,d3:169}],1171:[function(e,v,M){var r=e("d3"),n=e("./style_one"),l=e("../bar/uniform_text").resizeText;v.exports=function(t){var f=t._fullLayout._pielayer.selectAll(".trace");l(t,f,"pie"),f.each(function(a){var o=a[0],u=o.trace,h=r.select(this);h.style({opacity:u.opacity}),h.selectAll("path.surface").each(function(i){r.select(this).call(n,i,u)})})}},{"../bar/uniform_text":937,"./style_one":1172,d3:169}],1172:[function(e,v,M){var r=e("../../components/color"),n=e("./helpers").castOption;v.exports=function(c,t,f){var a=f.marker.line,o=n(a.color,t.pts)||r.defaultLine,u=n(a.width,t.pts)||0;c.style("stroke-width",u).call(r.fill,t.color).call(r.stroke,o)}},{"../../components/color":643,"./helpers":1166}],1173:[function(e,v,M){var r=e("../scatter/attributes");v.exports={x:r.x,y:r.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:r.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1187}],1174:[function(e,v,M){var r=e("gl-pointcloud2d"),n=e("../../lib/str2rgbarray"),l=e("../../plots/cartesian/autorange").findExtremes,c=e("../scatter/get_trace_color");function t(o,u){this.scene=o,this.uid=u,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=r(o.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var f=t.prototype;f.handlePick=function(o){var u=this.idToIndex[o.pointId];return{trace:this,dataCoord:o.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[u*2],this.pickXYData[u*2+1]]:[this.pickXData[u],this.pickYData[u]],textLabel:Array.isArray(this.textLabels)?this.textLabels[u]:this.textLabels,color:this.color,name:this.name,pointIndex:u,hoverinfo:this.hoverinfo}},f.update=function(o){this.index=o.index,this.textLabels=o.text,this.name=o.name,this.hoverinfo=o.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(o),this.color=c(o,{})},f.updateFast=function(o){var u=this.xData=this.pickXData=o.x,h=this.yData=this.pickYData=o.y,i=this.pickXYData=o.xy,s=o.xbounds&&o.ybounds,p=o.indices,d,y,b,m=this.bounds,_,T,g;if(i){if(b=i,d=i.length>>>1,s)m[0]=o.xbounds[0],m[2]=o.xbounds[1],m[1]=o.ybounds[0],m[3]=o.ybounds[1];else for(g=0;g<d;g++)_=b[g*2],T=b[g*2+1],_<m[0]&&(m[0]=_),_>m[2]&&(m[2]=_),T<m[1]&&(m[1]=T),T>m[3]&&(m[3]=T);if(p)y=p;else for(y=new Int32Array(d),g=0;g<d;g++)y[g]=g}else for(d=u.length,b=new Float32Array(2*d),y=new Int32Array(d),g=0;g<d;g++)_=u[g],T=h[g],y[g]=g,b[g*2]=_,b[g*2+1]=T,_<m[0]&&(m[0]=_),_>m[2]&&(m[2]=_),T<m[1]&&(m[1]=T),T>m[3]&&(m[3]=T);this.idToIndex=y,this.pointcloudOptions.idToIndex=y,this.pointcloudOptions.positions=b;var A=n(o.marker.color),k=n(o.marker.border.color),R=o.opacity*o.marker.opacity;A[3]*=R,this.pointcloudOptions.color=A;var L=o.marker.blend;if(L===null){var z=100;L=u.length<z||h.length<z}this.pointcloudOptions.blend=L,k[3]*=R,this.pointcloudOptions.borderColor=k;var E=o.marker.sizemin,S=Math.max(o.marker.sizemax,o.marker.sizemin);this.pointcloudOptions.sizeMin=E,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=o.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var C=this.scene.xaxis,D=this.scene.yaxis,F=S/2||.5;o._extremes[C._id]=l(C,[m[0],m[2]],{ppad:F}),o._extremes[D._id]=l(D,[m[1],m[3]],{ppad:F})},f.dispose=function(){this.pointcloud.dispose()};function a(o,u){var h=new t(o,u.uid);return h.update(u),h}v.exports=a},{"../../lib/str2rgbarray":802,"../../plots/cartesian/autorange":827,"../scatter/get_trace_color":1197,"gl-pointcloud2d":324}],1175:[function(e,v,M){var r=e("../../lib"),n=e("./attributes");v.exports=function(c,t,f){function a(o,u){return r.coerce(c,t,n,o,u)}a("x"),a("y"),a("xbounds"),a("ybounds"),c.xy&&c.xy instanceof Float32Array&&(t.xy=c.xy),c.indices&&c.indices instanceof Int32Array&&(t.indices=c.indices),a("text"),a("marker.color",f),a("marker.opacity"),a("marker.blend"),a("marker.sizemin"),a("marker.sizemax"),a("marker.border.color",f),a("marker.border.arearatio"),t._length=null}},{"../../lib":778,"./attributes":1173}],1176:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../scatter3d/calc"),plot:e("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":868,"../scatter3d/calc":1216,"./attributes":1173,"./convert":1174,"./defaults":1175}],1177:[function(e,v,M){var r=e("../../plots/font_attributes"),n=e("../../plots/attributes"),l=e("../../components/color/attributes"),c=e("../../components/fx/attributes"),t=e("../../plots/domain").attributes,f=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../components/colorscale/attributes"),o=e("../../plot_api/plot_template").templatedArray,u=e("../../lib/extend").extendFlat,h=e("../../plot_api/edit_types").overrideAll;e("../../constants/docs").FORMAT_LINK;var i=v.exports=h({hoverinfo:u({},n.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:c.hoverlabel,domain:t({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:r({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:c.hoverlabel,hovertemplate:f({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:c.hoverlabel,hovertemplate:f({},{keys:["value","label"]}),colorscales:o("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:u(a().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");i.transforms=void 0},{"../../components/color/attributes":642,"../../components/colorscale/attributes":650,"../../components/fx/attributes":674,"../../constants/docs":748,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/font_attributes":856,"../../plots/template_attributes":906}],1178:[function(e,v,M){var r=e("../../plot_api/edit_types").overrideAll,n=e("../../plots/get_data").getModuleCalcData,l=e("./plot"),c=e("../../components/fx/layout_attributes"),t=e("../../lib/setcursor"),f=e("../../components/dragelement"),a=e("../../plots/cartesian/select").prepSelect,o=e("../../lib"),u=e("../../registry"),h="sankey";M.name=h,M.baseLayoutAttrOverrides=r({hoverlabel:c.hoverlabel},"plot","nested"),M.plot=function(s){var p=n(s.calcdata,h)[0];l(s,p),M.updateFx(s)},M.clean=function(s,p,d,y){var b=y._has&&y._has(h),m=p._has&&p._has(h);b&&!m&&(y._paperdiv.selectAll(".sankey").remove(),y._paperdiv.selectAll(".bgsankey").remove())},M.updateFx=function(s){for(var p=0;p<s._fullData.length;p++)i(s,p)};function i(s,p){var d=s._fullData[p],y=s._fullLayout,b=y.dragmode,m=y.dragmode==="pan"?"move":"crosshair",_=d._bgRect;if(!(b==="pan"||b==="zoom")){t(_,m);var T={_id:"x",c2p:o.identity,_offset:d._sankey.translateX,_length:d._sankey.width},g={_id:"y",c2p:o.identity,_offset:d._sankey.translateY,_length:d._sankey.height},A={gd:s,element:_.node(),plotinfo:{id:p,xaxis:T,yaxis:g,fillRangeItems:o.noop},subplot:p,xaxes:[T],yaxes:[g],doneFnCompleted:function(k){var R=s._fullData[p],L,z=R.node.groups.slice(),E=[];function S(N){for(var G=R._sankey.graph.nodes,U=0;U<G.length;U++)if(G[U].pointNumber===N)return G[U]}for(var C=0;C<k.length;C++){var D=S(k[C].pointNumber);if(D)if(D.group){for(var F=0;F<D.childrenNodes.length;F++)E.push(D.childrenNodes[F].pointNumber);z[D.pointNumber-R.node._count]=!1}else E.push(D.pointNumber)}L=z.filter(Boolean).concat([E]),u.call("_guiRestyle",s,{"node.groups":[L]},p)}};A.prepFn=function(k,R,L){a(k,R,L,A,b)},f.init(A)}}},{"../../components/dragelement":662,"../../components/fx/layout_attributes":684,"../../lib":778,"../../lib/setcursor":799,"../../plot_api/edit_types":810,"../../plots/cartesian/select":847,"../../plots/get_data":865,"../../registry":911,"./plot":1183}],1179:[function(e,v,M){var r=e("strongly-connected-components"),n=e("../../lib"),l=e("../../lib/gup").wrap,c=n.isArrayOrTypedArray,t=n.isIndex,f=e("../../components/colorscale");function a(u){var h=u.node,i=u.link,s=[],p=c(i.color),d=c(i.customdata),y={},b={},m=i.colorscales.length,_;for(_=0;_<m;_++){var T=i.colorscales[_],g=f.extractScale(T,{cLetter:"c"}),A=f.makeColorScaleFunc(g);b[T.label]=A}var k=0;for(_=0;_<i.value.length;_++)i.source[_]>k&&(k=i.source[_]),i.target[_]>k&&(k=i.target[_]);var R=k+1;u.node._count=R;var L,z=u.node.groups,E={};for(_=0;_<z.length;_++){var S=z[_];for(L=0;L<S.length;L++){var C=S[L],D=R+_;E.hasOwnProperty(C)?n.warn("Node "+C+" is already part of a group."):E[C]=D}}var F={source:[],target:[]};for(_=0;_<i.value.length;_++){var N=i.value[_],G=i.source[_],U=i.target[_];if(N>0&&t(G,R)&&t(U,R)&&!(E.hasOwnProperty(G)&&E.hasOwnProperty(U)&&E[G]===E[U])){E.hasOwnProperty(U)&&(U=E[U]),E.hasOwnProperty(G)&&(G=E[G]),G=+G,U=+U,y[G]=y[U]=!0;var X="";i.label&&i.label[_]&&(X=i.label[_]);var I=null;X&&b.hasOwnProperty(X)&&(I=b[X]),s.push({pointNumber:_,label:X,color:p?i.color[_]:i.color,customdata:d?i.customdata[_]:i.customdata,concentrationscale:I,source:G,target:U,value:+N}),F.source.push(G),F.target.push(U)}}var B=R+z.length,j=c(h.color),H=c(h.customdata),K=[];for(_=0;_<B;_++)if(y[_]){var te=h.label[_];K.push({group:_>R-1,childrenNodes:[],pointNumber:_,label:te,color:j?h.color[_]:h.color,customdata:H?h.customdata[_]:h.customdata})}var J=!1;return o(B,F.source,F.target)&&(J=!0),{circular:J,links:s,nodes:K,groups:z,groupLookup:E}}function o(u,h,i){for(var s=n.init2dArray(u,0),p=0;p<Math.min(h.length,i.length);p++)if(n.isIndex(h[p],u)&&n.isIndex(i[p],u)){if(h[p]===i[p])return!0;s[h[p]].push(i[p])}var d=r(s);return d.components.some(function(y){return y.length>1})}v.exports=function(h,i){var s=a(i);return l({circular:s.circular,_nodes:s.nodes,_links:s.links,_groups:s.groups,_groupLookup:s.groupLookup})}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gup":775,"strongly-connected-components":569}],1180:[function(e,v,M){v.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1181:[function(e,v,M){var r=e("../../lib"),n=e("./attributes"),l=e("../../components/color"),c=e("tinycolor2"),t=e("../../plots/domain").defaults,f=e("../../components/fx/hoverlabel_defaults"),a=e("../../plot_api/plot_template"),o=e("../../plots/array_container_defaults");v.exports=function(i,s,p,d){function y(S,C){return r.coerce(i,s,n,S,C)}var b=r.extendDeep(d.hoverlabel,i.hoverlabel),m=i.node,_=a.newContainer(s,"node");function T(S,C){return r.coerce(m,_,n.node,S,C)}T("label"),T("groups"),T("x"),T("y"),T("pad"),T("thickness"),T("line.color"),T("line.width"),T("hoverinfo",i.hoverinfo),f(m,_,T,b),T("hovertemplate");var g=d.colorway,A=function(S){return g[S%g.length]};T("color",_.label.map(function(S,C){return l.addOpacity(A(C),.8)})),T("customdata");var k=i.link||{},R=a.newContainer(s,"link");function L(S,C){return r.coerce(k,R,n.link,S,C)}L("label"),L("source"),L("target"),L("value"),L("line.color"),L("line.width"),L("hoverinfo",i.hoverinfo),f(k,R,L,b),L("hovertemplate");var z=c(d.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";L("color",r.repeat(z,R.value.length)),L("customdata"),o(k,R,{name:"colorscales",handleItemDefaults:u}),t(s,d,y),y("orientation"),y("valueformat"),y("valuesuffix");var E;_.x.length&&_.y.length&&(E="freeform"),y("arrangement",E),r.coerceFont(y,"textfont",r.extendFlat({},d.font)),s._length=null};function u(h,i){function s(p,d){return r.coerce(h,i,n.link.colorscales,p,d)}s("label"),s("cmin"),s("cmax"),s("colorscale")}},{"../../components/color":643,"../../components/fx/hoverlabel_defaults":681,"../../lib":778,"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../../plots/domain":855,"./attributes":1177,tinycolor2:576}],1182:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"sankey",basePlotModule:e("./base_plot"),selectPoints:e("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":1177,"./base_plot":1178,"./calc":1179,"./defaults":1181,"./plot":1183,"./select.js":1185}],1183:[function(e,v,M){var r=e("d3"),n=e("./render"),l=e("../../components/fx"),c=e("../../components/color"),t=e("../../lib"),f=e("./constants").cn,a=t._;function o(T){return T!==""}function u(T,g){return T.filter(function(A){return A.key===g.traceId})}function h(T,g){r.select(T).select("path").style("fill-opacity",g),r.select(T).select("rect").style("fill-opacity",g)}function i(T){r.select(T).select("text.name").style("fill","black")}function s(T){return function(g){return T.node.sourceLinks.indexOf(g.link)!==-1||T.node.targetLinks.indexOf(g.link)!==-1}}function p(T){return function(g){return g.node.sourceLinks.indexOf(T.link)!==-1||g.node.targetLinks.indexOf(T.link)!==-1}}function d(T,g,A){g&&A&&u(A,g).selectAll("."+f.sankeyLink).filter(s(g)).call(b.bind(0,g,A,!1))}function y(T,g,A){g&&A&&u(A,g).selectAll("."+f.sankeyLink).filter(s(g)).call(m.bind(0,g,A,!1))}function b(T,g,A,k){var R=k.datum().link.label;k.style("fill-opacity",function(L){if(!L.link.concentrationscale)return .4}),R&&u(g,T).selectAll("."+f.sankeyLink).filter(function(L){return L.link.label===R}).style("fill-opacity",function(L){if(!L.link.concentrationscale)return .4}),A&&u(g,T).selectAll("."+f.sankeyNode).filter(p(T)).call(d)}function m(T,g,A,k){var R=k.datum().link.label;k.style("fill-opacity",function(L){return L.tinyColorAlpha}),R&&u(g,T).selectAll("."+f.sankeyLink).filter(function(L){return L.link.label===R}).style("fill-opacity",function(L){return L.tinyColorAlpha}),A&&u(g,T).selectAll(f.sankeyNode).filter(p(T)).call(y)}function _(T,g){var A=T.hoverlabel||{},k=t.nestedProperty(A,g).get();return Array.isArray(k)?!1:k}v.exports=function(g,A){for(var k=g._fullLayout,R=k._paper,L=k._size,z=0;z<g._fullData.length;z++)if(g._fullData[z].visible&&g._fullData[z].type===f.sankey&&!g._fullData[z]._viewInitial){var E=g._fullData[z].node;g._fullData[z]._viewInitial={node:{groups:E.groups.slice(),x:E.x.slice(),y:E.y.slice()}}}var S=function(te,J){var oe=J.link;oe.originalEvent=r.event,g._hoverdata=[oe],l.click(g,{target:!0})},C=function(te,J,oe){g._fullLayout.hovermode!==!1&&(r.select(te).call(b.bind(0,J,oe,!0)),J.link.trace.link.hoverinfo!=="skip"&&(J.link.fullData=J.link.trace,g.emit("plotly_hover",{event:r.event,points:[J.link]})))},D=a(g,"source:")+" ",F=a(g,"target:")+" ",N=a(g,"concentration:")+" ",G=a(g,"incoming flow count:")+" ",U=a(g,"outgoing flow count:")+" ",X=function(te,J){if(g._fullLayout.hovermode===!1)return;var oe=J.link.trace.link;if(oe.hoverinfo==="none"||oe.hoverinfo==="skip")return;var ie=[];function Q(de){var pe,W;de.circular?(pe=(de.circularPathData.leftInnerExtent+de.circularPathData.rightInnerExtent)/2,W=de.circularPathData.verticalFullExtent):(pe=(de.source.x1+de.target.x0)/2,W=(de.y0+de.y1)/2);var ue=[pe,W];return de.trace.orientation==="v"&&ue.reverse(),ue[0]+=J.parent.translateX,ue[1]+=J.parent.translateY,ue}for(var V=0,se=0;se<J.flow.links.length;se++){var re=J.flow.links[se];if(!(g._fullLayout.hovermode==="closest"&&J.link.pointNumber!==re.pointNumber)){J.link.pointNumber===re.pointNumber&&(V=se),re.fullData=re.trace,oe=J.link.trace.link;var ee=Q(re),ae={valueLabel:r.format(J.valueFormat)(re.value)+J.valueSuffix};ie.push({x:ee[0],y:ee[1],name:ae.valueLabel,text:[re.label||"",D+re.source.label,F+re.target.label,re.concentrationscale?N+r.format("%0.2f")(re.flow.labelConcentration):""].filter(o).join("<br>"),color:_(oe,"bgcolor")||c.addOpacity(re.color,1),borderColor:_(oe,"bordercolor"),fontFamily:_(oe,"font.family"),fontSize:_(oe,"font.size"),fontColor:_(oe,"font.color"),nameLength:_(oe,"namelength"),textAlign:_(oe,"align"),idealAlign:r.event.x<ee[0]?"right":"left",hovertemplate:oe.hovertemplate,hovertemplateLabels:ae,eventData:[re]})}}var fe=l.loneHover(ie,{container:k._hoverlayer.node(),outerContainer:k._paper.node(),gd:g,anchorIndex:V});fe.each(function(){var de=this;J.link.concentrationscale||h(de,.65),i(de)})},I=function(te,J,oe){g._fullLayout.hovermode!==!1&&(r.select(te).call(m.bind(0,J,oe,!0)),J.link.trace.link.hoverinfo!=="skip"&&(J.link.fullData=J.link.trace,g.emit("plotly_unhover",{event:r.event,points:[J.link]})),l.loneUnhover(k._hoverlayer.node()))},B=function(te,J,oe){var ie=J.node;ie.originalEvent=r.event,g._hoverdata=[ie],r.select(te).call(y,J,oe),l.click(g,{target:!0})},j=function(te,J,oe){g._fullLayout.hovermode!==!1&&(r.select(te).call(d,J,oe),J.node.trace.node.hoverinfo!=="skip"&&(J.node.fullData=J.node.trace,g.emit("plotly_hover",{event:r.event,points:[J.node]})))},H=function(te,J){if(g._fullLayout.hovermode!==!1){var oe=J.node.trace.node;if(!(oe.hoverinfo==="none"||oe.hoverinfo==="skip")){var ie=r.select(te).select("."+f.nodeRect),Q=g._fullLayout._paperdiv.node().getBoundingClientRect(),V=ie.node().getBoundingClientRect(),se=V.left-2-Q.left,re=V.right+2-Q.left,ee=V.top+V.height/4-Q.top,ae={valueLabel:r.format(J.valueFormat)(J.node.value)+J.valueSuffix};J.node.fullData=J.node.trace,g._fullLayout._calcInverseTransform(g);var fe=g._fullLayout._invScaleX,de=g._fullLayout._invScaleY,pe=l.loneHover({x0:fe*se,x1:fe*re,y:de*ee,name:r.format(J.valueFormat)(J.node.value)+J.valueSuffix,text:[J.node.label,G+J.node.targetLinks.length,U+J.node.sourceLinks.length].filter(o).join("<br>"),color:_(oe,"bgcolor")||J.tinyColorHue,borderColor:_(oe,"bordercolor"),fontFamily:_(oe,"font.family"),fontSize:_(oe,"font.size"),fontColor:_(oe,"font.color"),nameLength:_(oe,"namelength"),textAlign:_(oe,"align"),idealAlign:"left",hovertemplate:oe.hovertemplate,hovertemplateLabels:ae,eventData:[J.node]},{container:k._hoverlayer.node(),outerContainer:k._paper.node(),gd:g});h(pe,.85),i(pe)}}},K=function(te,J,oe){g._fullLayout.hovermode!==!1&&(r.select(te).call(y,J,oe),J.node.trace.node.hoverinfo!=="skip"&&(J.node.fullData=J.node.trace,g.emit("plotly_unhover",{event:r.event,points:[J.node]})),l.loneUnhover(k._hoverlayer.node()))};n(g,R,A,{width:L.w,height:L.h,margin:{t:L.t,r:L.r,b:L.b,l:L.l}},{linkEvents:{hover:C,follow:X,unhover:I,select:S},nodeEvents:{hover:j,follow:H,unhover:K,select:B}})}},{"../../components/color":643,"../../components/fx":683,"../../lib":778,"./constants":1180,"./render":1184,d3:169}],1184:[function(e,v,M){var r=e("./constants"),n=e("d3"),l=e("tinycolor2"),c=e("../../components/color"),t=e("../../components/drawing"),f=e("@plotly/d3-sankey"),a=e("@plotly/d3-sankey-circular"),o=e("d3-force"),u=e("../../lib"),h=u.strTranslate,i=e("../../lib/gup"),s=i.keyFun,p=i.repeat,d=i.unwrap,y=e("d3-interpolate").interpolateNumber,b=e("../../registry");function m(V,se,re){var ee=d(se),ae=ee.trace,fe=ae.domain,de=ae.orientation==="h",pe=ae.node.pad,W=ae.node.thickness,ue=V.width*(fe.x[1]-fe.x[0]),me=V.height*(fe.y[1]-fe.y[0]),be=ee._nodes,ke=ee._links,Pe=ee.circular,je;Pe?je=a.sankeyCircular().circularLinkGap(0):je=f.sankey(),je.iterations(r.sankeyIterations).size(de?[ue,me]:[me,ue]).nodeWidth(W).nodePadding(pe).nodeId(function(zt){return zt.pointNumber}).nodes(be).links(ke);var ze=je();je.nodePadding()<pe&&u.warn("node.pad was reduced to ",je.nodePadding()," to fit within the figure.");var Ze,tt,Ce;for(var Ae in ee._groupLookup){var Ne=parseInt(ee._groupLookup[Ae]),qe;for(Ze=0;Ze<ze.nodes.length;Ze++)if(ze.nodes[Ze].pointNumber===Ne){qe=ze.nodes[Ze];break}if(qe){var At={pointNumber:parseInt(Ae),x0:qe.x0,x1:qe.x1,y0:qe.y0,y1:qe.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};ze.nodes.unshift(At),qe.childrenNodes.unshift(At)}}function kt(){for(Ze=0;Ze<ze.nodes.length;Ze++){var zt=ze.nodes[Ze],$t={},rr,Pt;for(tt=0;tt<zt.targetLinks.length;tt++)Pt=zt.targetLinks[tt],rr=Pt.source.pointNumber+":"+Pt.target.pointNumber,$t.hasOwnProperty(rr)||($t[rr]=[]),$t[rr].push(Pt);var Lt=Object.keys($t);for(tt=0;tt<Lt.length;tt++){rr=Lt[tt];var dt=$t[rr],lt=0,Te={};for(Ce=0;Ce<dt.length;Ce++)Pt=dt[Ce],Te[Pt.label]||(Te[Pt.label]=0),Te[Pt.label]+=Pt.value,lt+=Pt.value;for(Ce=0;Ce<dt.length;Ce++)Pt=dt[Ce],Pt.flow={value:lt,labelConcentration:Te[Pt.label]/lt,concentration:Pt.value/lt,links:dt},Pt.concentrationscale&&(Pt.color=l(Pt.concentrationscale(Pt.flow.labelConcentration)))}var Le=0;for(tt=0;tt<zt.sourceLinks.length;tt++)Le+=zt.sourceLinks[tt].value;for(tt=0;tt<zt.sourceLinks.length;tt++)Pt=zt.sourceLinks[tt],Pt.concentrationOut=Pt.value/Le;var Be=0;for(tt=0;tt<zt.targetLinks.length;tt++)Be+=zt.targetLinks[tt].value;for(tt=0;tt<zt.targetLinks.length;tt++)Pt=zt.targetLinks[tt],Pt.concenrationIn=Pt.value/Be}}kt();function Ve(zt){zt.forEach(function($t){var rr,Pt,Lt=0,dt=$t.length,lt;for($t.sort(function(Te,Le){return Te.y0-Le.y0}),lt=0;lt<dt;++lt)rr=$t[lt],rr.y0>=Lt||(Pt=Lt-rr.y0,Pt>1e-6&&(rr.y0+=Pt,rr.y1+=Pt)),Lt=rr.y1+pe})}function ft(zt){var $t=zt.map(function(Le,Be){return{x0:Le.x0,index:Be}}).sort(function(Le,Be){return Le.x0-Be.x0}),rr=[],Pt=-1,Lt,dt=-1/0,lt;for(Ze=0;Ze<$t.length;Ze++){var Te=zt[$t[Ze].index];Te.x0>dt+W&&(Pt+=1,Lt=Te.x0),dt=Te.x0,rr[Pt]||(rr[Pt]=[]),rr[Pt].push(Te),lt=Lt-Te.x0,Te.x0+=lt,Te.x1+=lt}return rr}if(ae.node.x.length&&ae.node.y.length){for(Ze=0;Ze<Math.min(ae.node.x.length,ae.node.y.length,ze.nodes.length);Ze++)if(ae.node.x[Ze]&&ae.node.y[Ze]){var St=[ae.node.x[Ze]*ue,ae.node.y[Ze]*me];ze.nodes[Ze].x0=St[0]-W/2,ze.nodes[Ze].x1=St[0]+W/2;var Wt=ze.nodes[Ze].y1-ze.nodes[Ze].y0;ze.nodes[Ze].y0=St[1]-Wt/2,ze.nodes[Ze].y1=St[1]+Wt/2}if(ae.arrangement==="snap"){be=ze.nodes;var Qt=ft(be);Ve(Qt)}je.update(ze)}return{circular:Pe,key:re,trace:ae,guid:u.randstr(),horizontal:de,width:ue,height:me,nodePad:ae.node.pad,nodeLineColor:ae.node.line.color,nodeLineWidth:ae.node.line.width,linkLineColor:ae.link.line.color,linkLineWidth:ae.link.line.width,valueFormat:ae.valueformat,valueSuffix:ae.valuesuffix,textFont:ae.textfont,translateX:fe.x[0]*V.width+V.margin.l,translateY:V.height-fe.y[1]*V.height+V.margin.t,dragParallel:de?me:ue,dragPerpendicular:de?ue:me,arrangement:ae.arrangement,sankey:je,graph:ze,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(V,se,re){var ee=l(se.color),ae=se.source.label+"|"+se.target.label,fe=ae+"__"+re;return se.trace=V.trace,se.curveNumber=V.trace.index,{circular:V.circular,key:fe,traceId:V.key,pointNumber:se.pointNumber,link:se,tinyColorHue:c.tinyRGB(ee),tinyColorAlpha:ee.getAlpha(),linkPath:g,linkLineColor:V.linkLineColor,linkLineWidth:V.linkLineWidth,valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,parent:V,interactionState:V.interactionState,flow:se.flow}}function T(V){var se="",re=V.width/2,ee=V.circularPathData;return V.circularLinkType==="top"?se="M "+ee.targetX+" "+(ee.targetY+re)+" L"+ee.rightInnerExtent+" "+(ee.targetY+re)+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightSmallArcRadius+re)+" 0 0 1 "+(ee.rightFullExtent-re)+" "+(ee.targetY-ee.rightSmallArcRadius)+"L"+(ee.rightFullExtent-re)+" "+ee.verticalRightInnerExtent+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightLargeArcRadius+re)+" 0 0 1 "+ee.rightInnerExtent+" "+(ee.verticalFullExtent-re)+"L"+ee.leftInnerExtent+" "+(ee.verticalFullExtent-re)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftLargeArcRadius+re)+" 0 0 1 "+(ee.leftFullExtent+re)+" "+ee.verticalLeftInnerExtent+"L"+(ee.leftFullExtent+re)+" "+(ee.sourceY-ee.leftSmallArcRadius)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftSmallArcRadius+re)+" 0 0 1 "+ee.leftInnerExtent+" "+(ee.sourceY+re)+"L"+ee.sourceX+" "+(ee.sourceY+re)+"L"+ee.sourceX+" "+(ee.sourceY-re)+"L"+ee.leftInnerExtent+" "+(ee.sourceY-re)+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftSmallArcRadius-re)+" 0 0 0 "+(ee.leftFullExtent-re)+" "+(ee.sourceY-ee.leftSmallArcRadius)+"L"+(ee.leftFullExtent-re)+" "+ee.verticalLeftInnerExtent+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftLargeArcRadius-re)+" 0 0 0 "+ee.leftInnerExtent+" "+(ee.verticalFullExtent+re)+"L"+ee.rightInnerExtent+" "+(ee.verticalFullExtent+re)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightLargeArcRadius-re)+" 0 0 0 "+(ee.rightFullExtent+re)+" "+ee.verticalRightInnerExtent+"L"+(ee.rightFullExtent+re)+" "+(ee.targetY-ee.rightSmallArcRadius)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightSmallArcRadius-re)+" 0 0 0 "+ee.rightInnerExtent+" "+(ee.targetY-re)+"L"+ee.targetX+" "+(ee.targetY-re)+"Z":se="M "+ee.targetX+" "+(ee.targetY-re)+" L"+ee.rightInnerExtent+" "+(ee.targetY-re)+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightSmallArcRadius+re)+" 0 0 0 "+(ee.rightFullExtent-re)+" "+(ee.targetY+ee.rightSmallArcRadius)+"L"+(ee.rightFullExtent-re)+" "+ee.verticalRightInnerExtent+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightLargeArcRadius+re)+" 0 0 0 "+ee.rightInnerExtent+" "+(ee.verticalFullExtent+re)+"L"+ee.leftInnerExtent+" "+(ee.verticalFullExtent+re)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftLargeArcRadius+re)+" 0 0 0 "+(ee.leftFullExtent+re)+" "+ee.verticalLeftInnerExtent+"L"+(ee.leftFullExtent+re)+" "+(ee.sourceY+ee.leftSmallArcRadius)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftSmallArcRadius+re)+" 0 0 0 "+ee.leftInnerExtent+" "+(ee.sourceY-re)+"L"+ee.sourceX+" "+(ee.sourceY-re)+"L"+ee.sourceX+" "+(ee.sourceY+re)+"L"+ee.leftInnerExtent+" "+(ee.sourceY+re)+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftSmallArcRadius-re)+" 0 0 1 "+(ee.leftFullExtent-re)+" "+(ee.sourceY+ee.leftSmallArcRadius)+"L"+(ee.leftFullExtent-re)+" "+ee.verticalLeftInnerExtent+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftLargeArcRadius-re)+" 0 0 1 "+ee.leftInnerExtent+" "+(ee.verticalFullExtent-re)+"L"+ee.rightInnerExtent+" "+(ee.verticalFullExtent-re)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightLargeArcRadius-re)+" 0 0 1 "+(ee.rightFullExtent+re)+" "+ee.verticalRightInnerExtent+"L"+(ee.rightFullExtent+re)+" "+(ee.targetY+ee.rightSmallArcRadius)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightSmallArcRadius-re)+" 0 0 1 "+ee.rightInnerExtent+" "+(ee.targetY+re)+"L"+ee.targetX+" "+(ee.targetY+re)+"Z",se}function g(){var V=.5;function se(re){if(re.link.circular)return T(re.link);var ee=re.link.source.x1,ae=re.link.target.x0,fe=y(ee,ae),de=fe(V),pe=fe(1-V),W=re.link.y0-re.link.width/2,ue=re.link.y0+re.link.width/2,me=re.link.y1-re.link.width/2,be=re.link.y1+re.link.width/2;return"M"+ee+","+W+"C"+de+","+W+" "+pe+","+me+" "+ae+","+me+"L"+ae+","+be+"C"+pe+","+be+" "+de+","+ue+" "+ee+","+ue+"Z"}return se}function A(V,se){var re=l(se.color),ee=r.nodePadAcross,ae=V.nodePad/2;se.dx=se.x1-se.x0,se.dy=se.y1-se.y0;var fe=se.dx,de=Math.max(.5,se.dy),pe="node_"+se.pointNumber;return se.group&&(pe=u.randstr()),se.trace=V.trace,se.curveNumber=V.trace.index,{index:se.pointNumber,key:pe,partOfGroup:se.partOfGroup||!1,group:se.group,traceId:V.key,trace:V.trace,node:se,nodePad:V.nodePad,nodeLineColor:V.nodeLineColor,nodeLineWidth:V.nodeLineWidth,textFont:V.textFont,size:V.horizontal?V.height:V.width,visibleWidth:Math.ceil(fe),visibleHeight:de,zoneX:-ee,zoneY:-ae,zoneWidth:fe+2*ee,zoneHeight:de+2*ae,labelY:V.horizontal?se.dy/2+1:se.dx/2+1,left:se.originalLayer===1,sizeAcross:V.width,forceLayouts:V.forceLayouts,horizontal:V.horizontal,darkBackground:re.getBrightness()<=128,tinyColorHue:c.tinyRGB(re),tinyColorAlpha:re.getAlpha(),valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,graph:V.graph,arrangement:V.arrangement,uniqueNodeLabelPathId:[V.guid,V.key,pe].join("_"),interactionState:V.interactionState,figure:V}}function k(V){V.attr("transform",function(se){return h(se.node.x0.toFixed(3),se.node.y0.toFixed(3))})}function R(V){V.call(k)}function L(V,se){V.call(R),se.attr("d",g())}function z(V){V.attr("width",function(se){return se.node.x1-se.node.x0}).attr("height",function(se){return se.visibleHeight})}function E(V){return V.link.width>1||V.linkLineWidth>0}function S(V){var se=h(V.translateX,V.translateY);return se+(V.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function C(V){return h(V.horizontal?0:V.labelY,V.horizontal?V.labelY:0)}function D(V){return n.svg.line()([[V.horizontal?V.left?-V.sizeAcross:V.visibleWidth+r.nodeTextOffsetHorizontal:r.nodeTextOffsetHorizontal,0],[V.horizontal?V.left?-r.nodeTextOffsetHorizontal:V.sizeAcross:V.visibleHeight-r.nodeTextOffsetHorizontal,0]])}function F(V){return V.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)"}function N(V){return V.horizontal?"scale(1 1)":"scale(-1 1)"}function G(V){return V.darkBackground&&!V.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function U(V){return V.horizontal&&V.left?"100%":"0%"}function X(V,se,re){V.on(".basic",null).on("mouseover.basic",function(ee){!ee.interactionState.dragInProgress&&!ee.partOfGroup&&(re.hover(this,ee,se),ee.interactionState.hovered=[this,ee])}).on("mousemove.basic",function(ee){!ee.interactionState.dragInProgress&&!ee.partOfGroup&&(re.follow(this,ee),ee.interactionState.hovered=[this,ee])}).on("mouseout.basic",function(ee){!ee.interactionState.dragInProgress&&!ee.partOfGroup&&(re.unhover(this,ee,se),ee.interactionState.hovered=!1)}).on("click.basic",function(ee){ee.interactionState.hovered&&(re.unhover(this,ee,se),ee.interactionState.hovered=!1),!ee.interactionState.dragInProgress&&!ee.partOfGroup&&re.select(this,ee,se)})}function I(V,se,re,ee){var ae=n.behavior.drag().origin(function(fe){return{x:fe.node.x0+fe.visibleWidth/2,y:fe.node.y0+fe.visibleHeight/2}}).on("dragstart",function(fe){if(fe.arrangement!=="fixed"&&(u.ensureSingle(ee._fullLayout._infolayer,"g","dragcover",function(pe){ee._fullLayout._dragCover=pe}),u.raiseToTop(this),fe.interactionState.dragInProgress=fe.node,J(fe.node),fe.interactionState.hovered&&(re.nodeEvents.unhover.apply(0,fe.interactionState.hovered),fe.interactionState.hovered=!1),fe.arrangement==="snap")){var de=fe.traceId+"|"+fe.key;fe.forceLayouts[de]?fe.forceLayouts[de].alpha(1):B(V,de,fe),j(V,se,fe,de,ee)}}).on("drag",function(fe){if(fe.arrangement!=="fixed"){var de=n.event.x,pe=n.event.y;fe.arrangement==="snap"?(fe.node.x0=de-fe.visibleWidth/2,fe.node.x1=de+fe.visibleWidth/2,fe.node.y0=pe-fe.visibleHeight/2,fe.node.y1=pe+fe.visibleHeight/2):(fe.arrangement==="freeform"&&(fe.node.x0=de-fe.visibleWidth/2,fe.node.x1=de+fe.visibleWidth/2),pe=Math.max(0,Math.min(fe.size-fe.visibleHeight/2,pe)),fe.node.y0=pe-fe.visibleHeight/2,fe.node.y1=pe+fe.visibleHeight/2),J(fe.node),fe.arrangement!=="snap"&&(fe.sankey.update(fe.graph),L(V.filter(oe(fe)),se))}}).on("dragend",function(fe){if(fe.arrangement!=="fixed"){fe.interactionState.dragInProgress=!1;for(var de=0;de<fe.node.childrenNodes.length;de++)fe.node.childrenNodes[de].x=fe.node.x,fe.node.childrenNodes[de].y=fe.node.y;fe.arrangement!=="snap"&&K(fe,ee)}});V.on(".drag",null).call(ae)}function B(V,se,re,ee){ie(re.graph.nodes);var ae=re.graph.nodes.filter(function(fe){return fe.originalX===re.node.originalX}).filter(function(fe){return!fe.partOfGroup});re.forceLayouts[se]=o.forceSimulation(ae).alphaDecay(0).force("collide",o.forceCollide().radius(function(fe){return fe.dy/2+re.nodePad/2}).strength(1).iterations(r.forceIterations)).force("constrain",H(V,se,ae,re)).stop()}function j(V,se,re,ee,ae){window.requestAnimationFrame(function fe(){var de;for(de=0;de<r.forceTicksPerFrame;de++)re.forceLayouts[ee].tick();var pe=re.graph.nodes;if(Q(pe),re.sankey.update(re.graph),L(V.filter(oe(re)),se),re.forceLayouts[ee].alpha()>0)window.requestAnimationFrame(fe);else{var W=re.node.originalX;re.node.x0=W-re.visibleWidth/2,re.node.x1=W+re.visibleWidth/2,K(re,ae)}})}function H(V,se,re,ee){return function(){for(var fe=0,de=0;de<re.length;de++){var pe=re[de];pe===ee.interactionState.dragInProgress?(pe.x=pe.lastDraggedX,pe.y=pe.lastDraggedY):(pe.vx=(pe.originalX-pe.x)/r.forceTicksPerFrame,pe.y=Math.min(ee.size-pe.dy/2,Math.max(pe.dy/2,pe.y))),fe=Math.max(fe,Math.abs(pe.vx),Math.abs(pe.vy))}!ee.interactionState.dragInProgress&&fe<.1&&ee.forceLayouts[se].alpha()>0&&ee.forceLayouts[se].alpha(0)}}function K(V,se){for(var re=[],ee=[],ae=0;ae<V.graph.nodes.length;ae++){var fe=(V.graph.nodes[ae].x0+V.graph.nodes[ae].x1)/2,de=(V.graph.nodes[ae].y0+V.graph.nodes[ae].y1)/2;re.push(fe/V.figure.width),ee.push(de/V.figure.height)}b.call("_guiRestyle",se,{"node.x":[re],"node.y":[ee]},V.trace.index).then(function(){se._fullLayout._dragCover&&se._fullLayout._dragCover.remove()})}function te(V){var se=[],re;for(re=0;re<V.length;re++)V[re].originalX=(V[re].x0+V[re].x1)/2,V[re].originalY=(V[re].y0+V[re].y1)/2,se.indexOf(V[re].originalX)===-1&&se.push(V[re].originalX);for(se.sort(function(ee,ae){return ee-ae}),re=0;re<V.length;re++)V[re].originalLayerIndex=se.indexOf(V[re].originalX),V[re].originalLayer=V[re].originalLayerIndex/(se.length-1)}function J(V){V.lastDraggedX=V.x0+V.dx/2,V.lastDraggedY=V.y0+V.dy/2}function oe(V){return function(se){return se.node.originalX===V.node.originalX}}function ie(V){for(var se=0;se<V.length;se++)V[se].y=(V[se].y0+V[se].y1)/2,V[se].x=(V[se].x0+V[se].x1)/2}function Q(V){for(var se=0;se<V.length;se++)V[se].y0=V[se].y-V[se].dy/2,V[se].y1=V[se].y0+V[se].dy,V[se].x0=V[se].x-V[se].dx/2,V[se].x1=V[se].x0+V[se].dx}v.exports=function(V,se,re,ee,ae){var fe=!1;u.ensureSingle(V._fullLayout._infolayer,"g","first-render",function(){fe=!0});var de=V._fullLayout._dragCover,pe=re.filter(function(Ae){return d(Ae).trace.visible}).map(m.bind(null,ee)),W=se.selectAll("."+r.cn.sankey).data(pe,s);W.exit().remove(),W.enter().append("g").classed(r.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",S),W.each(function(Ae,Ne){V._fullData[Ne]._sankey=Ae;var qe="bgsankey-"+Ae.trace.uid+"-"+Ne;u.ensureSingle(V._fullLayout._draggers,"rect",qe),V._fullData[Ne]._bgRect=n.select("."+qe),V._fullData[Ne]._bgRect.style("pointer-events","all").attr("width",Ae.width).attr("height",Ae.height).attr("x",Ae.translateX).attr("y",Ae.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),W.transition().ease(r.ease).duration(r.duration).attr("transform",S);var ue=W.selectAll("."+r.cn.sankeyLinks).data(p,s);ue.enter().append("g").classed(r.cn.sankeyLinks,!0).style("fill","none");var me=ue.selectAll("."+r.cn.sankeyLink).data(function(Ae){var Ne=Ae.graph.links;return Ne.filter(function(qe){return qe.value}).map(_.bind(null,Ae))},s);me.enter().append("path").classed(r.cn.sankeyLink,!0).call(X,W,ae.linkEvents),me.style("stroke",function(Ae){return E(Ae)?c.tinyRGB(l(Ae.linkLineColor)):Ae.tinyColorHue}).style("stroke-opacity",function(Ae){return E(Ae)?c.opacity(Ae.linkLineColor):Ae.tinyColorAlpha}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}).style("stroke-width",function(Ae){return E(Ae)?Ae.linkLineWidth:1}).attr("d",g()),me.style("opacity",function(){return V._context.staticPlot||fe||de?1:0}).transition().ease(r.ease).duration(r.duration).style("opacity",1),me.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var be=W.selectAll("."+r.cn.sankeyNodeSet).data(p,s);be.enter().append("g").classed(r.cn.sankeyNodeSet,!0),be.style("cursor",function(Ae){switch(Ae.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ke=be.selectAll("."+r.cn.sankeyNode).data(function(Ae){var Ne=Ae.graph.nodes;return te(Ne),Ne.map(A.bind(null,Ae))},s);ke.enter().append("g").classed(r.cn.sankeyNode,!0).call(k).style("opacity",function(Ae){return(V._context.staticPlot||fe)&&!Ae.partOfGroup?1:0}),ke.call(X,W,ae.nodeEvents).call(I,me,ae,V),ke.transition().ease(r.ease).duration(r.duration).call(k).style("opacity",function(Ae){return Ae.partOfGroup?0:1}),ke.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var Pe=ke.selectAll("."+r.cn.nodeRect).data(p);Pe.enter().append("rect").classed(r.cn.nodeRect,!0).call(z),Pe.style("stroke-width",function(Ae){return Ae.nodeLineWidth}).style("stroke",function(Ae){return c.tinyRGB(l(Ae.nodeLineColor))}).style("stroke-opacity",function(Ae){return c.opacity(Ae.nodeLineColor)}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}),Pe.transition().ease(r.ease).duration(r.duration).call(z);var je=ke.selectAll("."+r.cn.nodeCapture).data(p);je.enter().append("rect").classed(r.cn.nodeCapture,!0).style("fill-opacity",0),je.attr("x",function(Ae){return Ae.zoneX}).attr("y",function(Ae){return Ae.zoneY}).attr("width",function(Ae){return Ae.zoneWidth}).attr("height",function(Ae){return Ae.zoneHeight});var ze=ke.selectAll("."+r.cn.nodeCentered).data(p);ze.enter().append("g").classed(r.cn.nodeCentered,!0).attr("transform",C),ze.transition().ease(r.ease).duration(r.duration).attr("transform",C);var Ze=ze.selectAll("."+r.cn.nodeLabelGuide).data(p);Ze.enter().append("path").classed(r.cn.nodeLabelGuide,!0).attr("id",function(Ae){return Ae.uniqueNodeLabelPathId}).attr("d",D).attr("transform",F),Ze.transition().ease(r.ease).duration(r.duration).attr("d",D).attr("transform",F);var tt=ze.selectAll("."+r.cn.nodeLabel).data(p);tt.enter().append("text").classed(r.cn.nodeLabel,!0).attr("transform",N).style("cursor","default").style("fill","black"),tt.style("text-shadow",function(Ae){return Ae.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":"none"}).each(function(Ae){t.font(tt,Ae.textFont)}),tt.transition().ease(r.ease).duration(r.duration).attr("transform",N);var Ce=tt.selectAll("."+r.cn.nodeLabelTextPath).data(p);Ce.enter().append("textPath").classed(r.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(Ae){return"#"+Ae.uniqueNodeLabelPathId}).attr("startOffset",U).style("fill",G),Ce.text(function(Ae){return Ae.horizontal||Ae.node.dy>5?Ae.node.label:""}).attr("text-anchor",function(Ae){return Ae.horizontal&&Ae.left?"end":"start"}),Ce.transition().ease(r.ease).duration(r.duration).attr("startOffset",U).style("fill",G)}},{"../../components/color":643,"../../components/drawing":665,"../../lib":778,"../../lib/gup":775,"../../registry":911,"./constants":1180,"@plotly/d3-sankey":56,"@plotly/d3-sankey-circular":55,d3:169,"d3-force":160,"d3-interpolate":162,tinycolor2:576}],1185:[function(e,v,M){v.exports=function(n,l){for(var c=n.cd,t=[],f=c[0].trace,a=f._sankey.graph.nodes,o=0;o<a.length;o++){var u=a[o];if(!u.partOfGroup){var h=[(u.x0+u.x1)/2,(u.y0+u.y1)/2];f.orientation==="v"&&h.reverse(),l&&l.contains(h,!1,o,n)&&t.push({pointNumber:u.pointNumber})}}return t}},{}],1186:[function(e,v,M){var r=e("../../lib");v.exports=function(l,c){for(var t=0;t<l.length;t++)l[t].i=t;r.mergeArray(c.text,l,"tx"),r.mergeArray(c.texttemplate,l,"txt"),r.mergeArray(c.hovertext,l,"htx"),r.mergeArray(c.customdata,l,"data"),r.mergeArray(c.textposition,l,"tp"),c.textfont&&(r.mergeArrayCastPositive(c.textfont.size,l,"ts"),r.mergeArray(c.textfont.color,l,"tc"),r.mergeArray(c.textfont.family,l,"tf"));var f=c.marker;if(f){r.mergeArrayCastPositive(f.size,l,"ms"),r.mergeArrayCastPositive(f.opacity,l,"mo"),r.mergeArray(f.symbol,l,"mx"),r.mergeArray(f.color,l,"mc");var a=f.line;f.line&&(r.mergeArray(a.color,l,"mlc"),r.mergeArrayCastPositive(a.width,l,"mlw"));var o=f.gradient;o&&o.type!=="none"&&(r.mergeArray(o.type,l,"mgt"),r.mergeArray(o.color,l,"mgc"))}}},{"../../lib":778}],1187:[function(e,v,M){var r=e("../../plots/template_attributes").texttemplateAttrs,n=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../components/colorscale/attributes"),c=e("../../plots/font_attributes"),t=e("../../components/drawing/attributes").dash,f=e("../../components/drawing"),a=e("./constants"),o=e("../../lib/extend").extendFlat;function u(s){return{valType:"any",dflt:0,editType:"calc"}}function h(s){return{valType:"any",editType:"calc"}}function i(s){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}v.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:u(),yperiod:u(),xperiod0:h(),yperiod0:h(),xperiodalignment:i(),yperiodalignment:i(),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:r({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:n({},{keys:a.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:o({},t,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:o({symbol:{valType:"enumerated",values:f.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:o({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},l("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},l("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:c({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorscale/attributes":650,"../../components/drawing":665,"../../components/drawing/attributes":664,"../../lib/extend":768,"../../plots/font_attributes":856,"../../plots/template_attributes":906,"./constants":1191}],1188:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib"),l=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM,f=e("./subtypes"),a=e("./colorscale_calc"),o=e("./arrays_to_calcdata"),u=e("./calc_selection");function h(b,m){var _=b._fullLayout,T=l.getFromId(b,m.xaxis||"x"),g=l.getFromId(b,m.yaxis||"y"),A=T.makeCalcdata(m,"x"),k=g.makeCalcdata(m,"y"),R=c(m,T,"x",A),L=c(m,g,"y",k),z=m._length,E=new Array(z),S=m.ids,C=y(m,_,T,g),D=!1,F,N,G,U,X,I;p(_,m);var B="x",j="y",H;if(C)n.pushUnique(C.traceIndices,m._expandedIndex),F=C.orientation==="v",F?(j="s",H="x"):(B="s",H="y"),X=C.stackgaps==="interpolate";else{var K=s(m,z);i(b,m,T,g,R,L,K)}var te=!!m.xperiodalignment,J=!!m.yperiodalignment;for(N=0;N<z;N++){var oe=E[N]={},ie=r(R[N]),Q=r(L[N]);ie&&Q?(oe[B]=R[N],oe[j]=L[N],te&&(oe.orig_x=A[N]),J&&(oe.orig_y=k[N])):C&&(F?ie:Q)?(oe[H]=F?R[N]:L[N],oe.gap=!0,X?(oe.s=t,D=!0):oe.s=0):oe[B]=oe[j]=t,S&&(oe.id=String(S[N]))}if(o(E,m),a(b,m),u(E,m),C){for(N=0;N<E.length;)E[N][H]===t?E.splice(N,1):N++;if(n.sort(E,function(ee,ae){return ee[H]-ae[H]||ee.i-ae.i}),D){for(N=0;N<E.length-1&&E[N].gap;)N++;for(I=E[N].s,I||(I=E[N].s=0),G=0;G<N;G++)E[G].s=I;for(U=E.length-1;U>N&&E[U].gap;)U--;for(I=E[U].s,G=E.length-1;G>U;G--)E[G].s=I;for(;N<U;)if(N++,E[N].gap){for(G=N+1;E[G].gap;)G++;for(var V=E[N-1][H],se=E[N-1].s,re=(E[G].s-se)/(E[G][H]-V);N<G;)E[N].s=se+(E[N][H]-V)*re,N++}}}return E}function i(b,m,_,T,g,A,k){var R=m._length,L=b._fullLayout,z=_._id,E=T._id,S=L._firstScatter[d(m)]===m.uid,C=(y(m,L,_,T)||{}).orientation,D=m.fill;_._minDtick=0,T._minDtick=0;var F={padded:!0},N={padded:!0};k&&(F.ppad=N.ppad=k);var G=R<2||g[0]!==g[R-1]||A[0]!==A[R-1];G&&(D==="tozerox"||D==="tonextx"&&(S||C==="h"))?F.tozero=!0:!(m.error_y||{}).visible&&(D==="tonexty"||D==="tozeroy"||!f.hasMarkers(m)&&!f.hasText(m))&&(F.padded=!1,F.ppad=0),G&&(D==="tozeroy"||D==="tonexty"&&(S||C==="v"))?N.tozero=!0:(D==="tonextx"||D==="tozerox")&&(N.padded=!1),z&&(m._extremes[z]=l.findExtremes(_,g,F)),E&&(m._extremes[E]=l.findExtremes(T,A,N))}function s(b,m){if(f.hasMarkers(b)){var _=b.marker,T=1.6*(b.marker.sizeref||1),g;if(b.marker.sizemode==="area"?g=function(z){return Math.max(Math.sqrt((z||0)/T),3)}:g=function(z){return Math.max((z||0)/T,3)},n.isArrayOrTypedArray(_.size)){var A={type:"linear"};l.setConvert(A);for(var k=A.makeCalcdata(b.marker,"size"),R=new Array(m),L=0;L<m;L++)R[L]=g(k[L]);return R}else return g(_.size)}}function p(b,m){var _=d(m),T=b._firstScatter;T[_]||(T[_]=m.uid)}function d(b){var m=b.stackgroup;return b.xaxis+b.yaxis+b.type+(m?"-"+m:"")}function y(b,m,_,T){var g=b.stackgroup;if(g){var A=m._scatterStackOpts[_._id+T._id][g],k=A.orientation==="v"?T:_;if(k.type==="linear"||k.type==="log")return A}}v.exports={calc:h,calcMarkerSize:s,calcAxisExpansion:i,setFirstScatter:p,getStackOpts:y}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"./arrays_to_calcdata":1186,"./calc_selection":1189,"./colorscale_calc":1190,"./subtypes":1212,"fast-isnumeric":241}],1189:[function(e,v,M){var r=e("../../lib");v.exports=function(l,c){r.isArrayOrTypedArray(c.selectedpoints)&&r.tagSelected(l,c)}},{"../../lib":778}],1190:[function(e,v,M){var r=e("../../components/colorscale/helpers").hasColorscale,n=e("../../components/colorscale/calc"),l=e("./subtypes");v.exports=function(t,f){l.hasLines(f)&&r(f,"line")&&n(t,f,{vals:f.line.color,containerStr:"line",cLetter:"c"}),l.hasMarkers(f)&&(r(f,"marker")&&n(t,f,{vals:f.marker.color,containerStr:"marker",cLetter:"c"}),r(f,"marker.line")&&n(t,f,{vals:f.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"./subtypes":1212}],1191:[function(e,v,M){v.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],1192:[function(e,v,M){var r=e("./calc");v.exports=function(t,f){var a=f.xaxis,o=f.yaxis,u=a._id+o._id,h=t._fullLayout._scatterStackOpts[u];if(h){var i=t.calcdata,s,p,d,y,b,m,_,T,g,A,k,R,L,z,E;for(var S in h){A=h[S];var C=A.traceIndices;if(C.length){for(k=A.stackgaps==="interpolate",R=A.groupnorm,A.orientation==="v"?(L="x",z="y"):(L="y",z="x"),E=new Array(C.length),s=0;s<E.length;s++)E[s]=!1;m=i[C[0]];var D=new Array(m.length);for(s=0;s<m.length;s++)D[s]=m[s][L];for(s=1;s<C.length;s++){for(b=i[C[s]],p=d=0;p<b.length;p++){for(_=b[p][L];_>D[d]&&d<D.length;d++)n(b,p,D[d],s,E,k,L),p++;if(_!==D[d]){for(y=0;y<s;y++)n(i[C[y]],d,_,y,E,k,L);D.splice(d,0,_)}d++}for(;d<D.length;d++)n(b,p,D[d],s,E,k,L),p++}var F=D.length;for(p=0;p<m.length;p++){for(T=m[p][z]=m[p].s,s=1;s<C.length;s++)b=i[C[s]],b[0].trace._rawLength=b[0].trace._length,b[0].trace._length=F,T+=b[p].s,b[p][z]=T;if(R)for(g=(R==="fraction"?T:T/100)||1,s=0;s<C.length;s++){var N=i[C[s]][p];N[z]/=g,N.sNorm=N.s/g}}for(s=0;s<C.length;s++){b=i[C[s]];var G=b[0].trace,U=r.calcMarkerSize(G,G._rawLength),X=Array.isArray(U);if(U&&E[s]||X){var I=U;for(U=new Array(F),p=0;p<F;p++)U[p]=b[p].gap?0:X?I[b[p].i]:I}var B=new Array(F),j=new Array(F);for(p=0;p<F;p++)B[p]=b[p].x,j[p]=b[p].y;r.calcAxisExpansion(t,G,a,o,B,j,U),b[0].t.orientation=A.orientation}}}}};function n(c,t,f,a,o,u,h){o[a]=!0;var i={i:null,gap:!0,s:0};if(i[h]=f,c.splice(t,0,i),t&&f===c[t-1][h]){var s=c[t-1];i.s=s.s,i.i=s.i,i.gap=s.gap}else u&&(i.s=l(c,t,f,h));t||(c[0].t=c[1].t,c[0].trace=c[1].trace,delete c[1].t,delete c[1].trace)}function l(c,t,f,a){var o=c[t-1],u=c[t+1];return u?o?o.s+(u.s-o.s)*(f-o[a])/(u[a]-o[a]):u.s:o.s}},{"./calc":1188}],1193:[function(e,v,M){v.exports=function(n){for(var l=0;l<n.length;l++){var c=n[l];if(c.type==="scatter"){var t=c.fill;if(!(t==="none"||t==="toself")&&(c.opacity=void 0,t==="tonexty"||t==="tonextx"))for(var f=l-1;f>=0;f--){var a=n[f];if(a.type==="scatter"&&a.xaxis===c.xaxis&&a.yaxis===c.yaxis){a.opacity=void 0;break}}}}}},{}],1194:[function(e,v,M){var r=e("../../lib"),n=e("../../registry"),l=e("./attributes"),c=e("./constants"),t=e("./subtypes"),f=e("./xy_defaults"),a=e("./period_defaults"),o=e("./stack_defaults"),u=e("./marker_defaults"),h=e("./line_defaults"),i=e("./line_shape_defaults"),s=e("./text_defaults"),p=e("./fillcolor_defaults");v.exports=function(y,b,m,_){function T(S,C){return r.coerce(y,b,l,S,C)}var g=f(y,b,_,T);if(g||(b.visible=!1),!!b.visible){a(y,b,_,T);var A=o(y,b,_,T),k=!A&&g<c.PTS_LINESONLY?"lines+markers":"lines";T("text"),T("hovertext"),T("mode",k),t.hasLines(b)&&(h(y,b,m,_,T),i(y,b,T),T("connectgaps"),T("line.simplify")),t.hasMarkers(b)&&u(y,b,m,_,T,{gradient:!0}),t.hasText(b)&&(T("texttemplate"),s(y,b,_,T));var R=[];(t.hasMarkers(b)||t.hasText(b))&&(T("cliponaxis"),T("marker.maxdisplayed"),R.push("points")),T("fill",A?A.fillDflt:"none"),b.fill!=="none"&&(p(y,b,m,T),t.hasLines(b)||i(y,b,T));var L=(b.line||{}).color,z=(b.marker||{}).color;(b.fill==="tonext"||b.fill==="toself")&&R.push("fills"),T("hoveron",R.join("+")||"points"),b.hoveron!=="fills"&&T("hovertemplate");var E=n.getComponentMethod("errorbars","supplyDefaults");E(y,b,L||z||m,{axis:"y"}),E(y,b,L||z||m,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(b,T)}}},{"../../lib":778,"../../registry":911,"./attributes":1187,"./constants":1191,"./fillcolor_defaults":1195,"./line_defaults":1200,"./line_shape_defaults":1202,"./marker_defaults":1206,"./period_defaults":1207,"./stack_defaults":1210,"./subtypes":1212,"./text_defaults":1213,"./xy_defaults":1214}],1195:[function(e,v,M){var r=e("../../components/color"),n=e("../../lib").isArrayOrTypedArray;v.exports=function(c,t,f,a){var o=!1;if(t.marker){var u=t.marker.color,h=(t.marker.line||{}).color;u&&!n(u)?o=u:h&&!n(h)&&(o=h)}a("fillcolor",r.addOpacity((t.line||{}).color||o||f,.5))}},{"../../components/color":643,"../../lib":778}],1196:[function(e,v,M){var r=e("../../plots/cartesian/axes");v.exports=function(l,c,t){var f={},a={_fullLayout:t},o=r.getFromTrace(a,c,"x"),u=r.getFromTrace(a,c,"y");return f.xLabel=r.tickText(o,l.x,!0).text,f.yLabel=r.tickText(u,l.y,!0).text,f}},{"../../plots/cartesian/axes":828}],1197:[function(e,v,M){var r=e("../../components/color"),n=e("./subtypes");v.exports=function(c,t){var f,a;if(c.mode==="lines")return f=c.line.color,f&&r.opacity(f)?f:c.fillcolor;if(c.mode==="none")return c.fill?c.fillcolor:"";var o=t.mcc||(c.marker||{}).color,u=t.mlcc||((c.marker||{}).line||{}).color;return a=o&&r.opacity(o)?o:u&&r.opacity(u)&&(t.mlw||((c.marker||{}).line||{}).width)?u:"",a?r.opacity(a)<.3?r.addOpacity(a,.3):a:(f=(c.line||{}).color,f&&r.opacity(f)&&n.hasLines(c)&&c.line.width?f:c.fillcolor)}},{"../../components/color":643,"./subtypes":1212}],1198:[function(e,v,M){var r=e("../../lib"),n=e("../../components/fx"),l=e("../../registry"),c=e("./get_trace_color"),t=e("../../components/color"),f=r.fillText;v.exports=function(o,u,h,i){var s=o.cd,p=s[0].trace,d=o.xa,y=o.ya,b=d.c2p(u),m=y.c2p(h),_=[b,m],T=p.hoveron||"",g=p.mode.indexOf("markers")!==-1?3:.5;if(T.indexOf("points")!==-1){var A=function(de){var pe=Math.max(3,de.mrc||0),W=1-1/pe,ue=Math.abs(d.c2p(de.x)-b),me=ue<pe?W*ue/pe:ue-pe+W;return me},k=function(de){var pe=Math.max(3,de.mrc||0),W=1-1/pe,ue=Math.abs(y.c2p(de.y)-m);return ue<pe?W*ue/pe:ue-pe+W},R=function(de){var pe=Math.max(g,de.mrc||0),W=d.c2p(de.x)-b,ue=y.c2p(de.y)-m;return Math.max(Math.sqrt(W*W+ue*ue)-pe,1-g/pe)},L=n.getDistanceFunction(i,A,k,R);if(n.getClosest(s,L,o),o.index!==!1){var z=s[o.index],E=d.c2p(z.x,!0),S=y.c2p(z.y,!0),C=z.mrc||1;o.index=z.i;var D=s[0].t.orientation,F=D&&(z.sNorm||z.s),N=D==="h"?F:z.orig_x!==void 0?z.orig_x:z.x,G=D==="v"?F:z.orig_y!==void 0?z.orig_y:z.y;return r.extendFlat(o,{color:c(p,z),x0:E-C,x1:E+C,xLabelVal:N,y0:S-C,y1:S+C,yLabelVal:G,spikeDistance:R(z),hovertemplate:p.hovertemplate}),f(z,p,o),l.getComponentMethod("errorbars","hoverInfo")(z,p,o),[o]}}if(T.indexOf("fills")!==-1&&p._polygons){var U=p._polygons,X=[],I=!1,B=1/0,j=-1/0,H=1/0,K=-1/0,te,J,oe,ie,Q,V,se,re,ee;for(te=0;te<U.length;te++)oe=U[te],oe.contains(_)&&(I=!I,X.push(oe),H=Math.min(H,oe.ymin),K=Math.max(K,oe.ymax));if(I){H=Math.max(H,0),K=Math.min(K,y._length);var ae=(H+K)/2;for(te=0;te<X.length;te++)for(ie=X[te].pts,J=1;J<ie.length;J++)re=ie[J-1][1],ee=ie[J][1],re>ae!=ee>=ae&&(V=ie[J-1][0],se=ie[J][0],ee-re&&(Q=V+(se-V)*(ae-re)/(ee-re),B=Math.min(B,Q),j=Math.max(j,Q)));B=Math.max(B,0),j=Math.min(j,d._length);var fe=t.defaultLine;return t.opacity(p.fillcolor)?fe=p.fillcolor:t.opacity((p.line||{}).color)&&(fe=p.line.color),r.extendFlat(o,{distance:o.maxHoverDistance,x0:B,x1:j,y0:ae,y1:ae,color:fe,hovertemplate:!1}),delete o.index,p.text&&!Array.isArray(p.text)?o.text=String(p.text):o.text=p.name,[o]}}}},{"../../components/color":643,"../../components/fx":683,"../../lib":778,"../../registry":911,"./get_trace_color":1197}],1199:[function(e,v,M){var r=e("./subtypes");v.exports={hasLines:r.hasLines,hasMarkers:r.hasMarkers,hasText:r.hasText,isBubble:r.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"./arrays_to_calcdata":1186,"./attributes":1187,"./calc":1188,"./cross_trace_calc":1192,"./cross_trace_defaults":1193,"./defaults":1194,"./format_labels":1196,"./hover":1198,"./marker_colorbar":1205,"./plot":1208,"./select":1209,"./style":1211,"./subtypes":1212}],1200:[function(e,v,M){var r=e("../../lib").isArrayOrTypedArray,n=e("../../components/colorscale/helpers").hasColorscale,l=e("../../components/colorscale/defaults");v.exports=function(t,f,a,o,u,h){var i=(t.marker||{}).color;if(u("line.color",a),n(t,"line"))l(t,f,o,u,{prefix:"line.",cLetter:"c"});else{var s=(r(i)?!1:i)||a;u("line.color",s)}u("line.width"),(h||{}).noDash||u("line.dash")}},{"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"../../lib":778}],1201:[function(e,v,M){var r=e("../../constants/numerical"),n=r.BADNUM,l=r.LOG_CLIP,c=l+.5,t=l-.5,f=e("../../lib"),a=f.segmentsIntersect,o=f.constrain,u=e("./constants");v.exports=function(i,s){var p=s.xaxis,d=s.yaxis,y=p.type==="log",b=d.type==="log",m=p._length,_=d._length,T=s.connectGaps,g=s.baseTolerance,A=s.shape,k=A==="linear",R=s.fill&&s.fill!=="none",L=[],z=u.minTolerance,E=i.length,S=new Array(E),C=0,D,F,N,G,U,X,I,B,j,H,K,te,J,oe,ie,Q;function V(zt){var $t=i[zt];if(!$t)return!1;var rr=s.linearized?p.l2p($t.x):p.c2p($t.x),Pt=s.linearized?d.l2p($t.y):d.c2p($t.y);if(rr===n){if(y&&(rr=p.c2p($t.x,!0)),rr===n)return!1;b&&Pt===n&&(rr*=Math.abs(p._m*_*(p._m>0?c:t)/(d._m*m*(d._m>0?c:t)))),rr*=1e3}if(Pt===n){if(b&&(Pt=d.c2p($t.y,!0)),Pt===n)return!1;Pt*=1e3}return[rr,Pt]}function se(zt,$t,rr,Pt){var Lt=rr-zt,dt=Pt-$t,lt=.5-zt,Te=.5-$t,Le=Lt*Lt+dt*dt,Be=Lt*lt+dt*Te;if(Be>0&&Be<Le){var et=lt*dt-Te*Lt;if(et*et<Le)return!0}}var re,ee;function ae(zt,$t){var rr=zt[0]/m,Pt=zt[1]/_,Lt=Math.max(0,-rr,rr-1,-Pt,Pt-1);return Lt&&re!==void 0&&se(rr,Pt,re,ee)&&(Lt=0),Lt&&$t&&se(rr,Pt,$t[0]/m,$t[1]/_)&&(Lt=0),(1+u.toleranceGrowth*Lt)*g}function fe(zt,$t){var rr=zt[0]-$t[0],Pt=zt[1]-$t[1];return Math.sqrt(rr*rr+Pt*Pt)}var de=u.maxScreensAway,pe=-m*de,W=m*(1+de),ue=-_*de,me=_*(1+de),be=[[pe,ue,W,ue],[W,ue,W,me],[W,me,pe,me],[pe,me,pe,ue]],ke,Pe,je,ze,Ze,tt;function Ce(zt,$t){for(var rr=[],Pt=0,Lt=0;Lt<4;Lt++){var dt=be[Lt],lt=a(zt[0],zt[1],$t[0],$t[1],dt[0],dt[1],dt[2],dt[3]);lt&&(!Pt||Math.abs(lt.x-rr[0][0])>1||Math.abs(lt.y-rr[0][1])>1)&&(lt=[lt.x,lt.y],Pt&&fe(lt,zt)<fe(rr[0],zt)?rr.unshift(lt):rr.push(lt),Pt++)}return rr}function Ae(zt){if(zt[0]<pe||zt[0]>W||zt[1]<ue||zt[1]>me)return[o(zt[0],pe,W),o(zt[1],ue,me)]}function Ne(zt,$t){if(zt[0]===$t[0]&&(zt[0]===pe||zt[0]===W)||zt[1]===$t[1]&&(zt[1]===ue||zt[1]===me))return!0}function qe(zt,$t){var rr=[],Pt=Ae(zt),Lt=Ae($t);return Pt&&Lt&&Ne(Pt,Lt)||(Pt&&rr.push(Pt),Lt&&rr.push(Lt)),rr}function At(zt,$t,rr){return function(Pt,Lt){var dt=Ae(Pt),lt=Ae(Lt),Te=[];if(dt&&lt&&Ne(dt,lt))return Te;dt&&Te.push(dt),lt&&Te.push(lt);var Le=2*f.constrain((Pt[zt]+Lt[zt])/2,$t,rr)-((dt||Pt)[zt]+(lt||Lt)[zt]);if(Le){var Be;dt&&lt?Be=Le>0==dt[zt]>lt[zt]?dt:lt:Be=dt||lt,Be[zt]+=Le}return Te}}var kt;A==="linear"||A==="spline"?kt=Ce:A==="hv"||A==="vh"?kt=qe:A==="hvh"?kt=At(0,pe,W):A==="vhv"&&(kt=At(1,ue,me));function Ve(zt,$t){var rr=$t[0]-zt[0],Pt=($t[1]-zt[1])/rr,Lt=(zt[1]*$t[0]-$t[1]*zt[0])/rr;return Lt>0?[Pt>0?pe:W,me]:[Pt>0?W:pe,ue]}function ft(zt){var $t=zt[0],rr=zt[1],Pt=$t===S[C-1][0],Lt=rr===S[C-1][1];if(!(Pt&&Lt))if(C>1){var dt=$t===S[C-2][0],lt=rr===S[C-2][1];Pt&&($t===pe||$t===W)&&dt?lt?C--:S[C-1]=zt:Lt&&(rr===ue||rr===me)&&lt?dt?C--:S[C-1]=zt:S[C++]=zt}else S[C++]=zt}function St(zt){S[C-1][0]!==zt[0]&&S[C-1][1]!==zt[1]&&ft([je,ze]),ft(zt),Ze=null,je=ze=0}function Wt(zt){if(re=zt[0]/m,ee=zt[1]/_,ke=zt[0]<pe?pe:zt[0]>W?W:0,Pe=zt[1]<ue?ue:zt[1]>me?me:0,ke||Pe){if(!C)S[C++]=[ke||zt[0],Pe||zt[1]];else if(Ze){var $t=kt(Ze,zt);$t.length>1&&(St($t[0]),S[C++]=$t[1])}else tt=kt(S[C-1],zt)[0],S[C++]=tt;var rr=S[C-1];ke&&Pe&&(rr[0]!==ke||rr[1]!==Pe)?(Ze&&(je!==ke&&ze!==Pe?ft(je&&ze?Ve(Ze,zt):[je||ke,ze||Pe]):je&&ze&&ft([je,ze])),ft([ke,Pe])):je-ke&&ze-Pe&&ft([ke||je,Pe||ze]),Ze=zt,je=ke,ze=Pe}else Ze&&St(kt(Ze,zt)[0]),S[C++]=zt}for(D=0;D<E;D++)if(F=V(D),!!F){for(C=0,Ze=null,Wt(F),D++;D<E;D++){if(G=V(D),!G){if(T)continue;break}if(!k||!s.simplify){Wt(G);continue}var Qt=V(D+1);if(H=fe(G,F),!(!(R&&(C===0||C===E-1))&&H<ae(G,Qt)*z)){for(B=[(G[0]-F[0])/H,(G[1]-F[1])/H],U=F,K=H,te=oe=ie=0,I=!1,N=G,D++;D<i.length;D++){if(X=Qt,Qt=V(D+1),!X){if(T)continue;break}if(j=[X[0]-F[0],X[1]-F[1]],Q=j[0]*B[1]-j[1]*B[0],oe=Math.min(oe,Q),ie=Math.max(ie,Q),ie-oe>ae(X,Qt))break;N=X,J=j[0]*B[0]+j[1]*B[1],J>K?(K=J,G=X,I=!1):J<te&&(te=J,U=X,I=!0)}if(I?(Wt(G),N!==U&&Wt(U)):(U!==F&&Wt(U),N!==G&&Wt(G)),Wt(N),D>=i.length||!X)break;Wt(X),F=X}}Ze&&ft([je||Ze[0],ze||Ze[1]]),L.push(S.slice(0,C))}return L}},{"../../constants/numerical":753,"../../lib":778,"./constants":1191}],1202:[function(e,v,M){v.exports=function(n,l,c){var t=c("line.shape");t==="spline"&&c("line.smoothing")}},{}],1203:[function(e,v,M){var r={tonextx:1,tonexty:1,tonext:1};v.exports=function(l,c,t){var f,a,o,u,h,i={},s=!1,p=-1,d=0,y=-1;for(a=0;a<t.length;a++)f=t[a][0].trace,o=f.stackgroup||"",o?o in i?h=i[o]:(h=i[o]=d,d++):f.fill in r&&y>=0?h=y:(h=y=d,d++),h<p&&(s=!0),f._groupIndex=p=h;var b=t.slice();s&&b.sort(function(_,T){var g=_[0].trace,A=T[0].trace;return g._groupIndex-A._groupIndex||g.index-A.index});var m={};for(a=0;a<b.length;a++)f=b[a][0].trace,o=f.stackgroup||"",f.visible===!0?(f._nexttrace=null,f.fill in r&&(u=m[o],f._prevtrace=u||null,u&&(u._nexttrace=f)),f._ownfill=f.fill&&(f.fill.substr(0,6)==="tozero"||f.fill==="toself"||f.fill.substr(0,2)==="to"&&!f._prevtrace),m[o]=f):f._prevtrace=f._nexttrace=f._ownfill=null;return b}},{}],1204:[function(e,v,M){var r=e("fast-isnumeric");v.exports=function(l){var c=l.marker,t=c.sizeref||1,f=c.sizemin||0,a=c.sizemode==="area"?function(o){return Math.sqrt(o/t)}:function(o){return o/t};return function(o){var u=a(o/2);return r(u)&&u>0?Math.max(u,f):0}}},{"fast-isnumeric":241}],1205:[function(e,v,M){v.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1206:[function(e,v,M){var r=e("../../components/color"),n=e("../../components/colorscale/helpers").hasColorscale,l=e("../../components/colorscale/defaults"),c=e("./subtypes");v.exports=function(f,a,o,u,h,i){var s=c.isBubble(f),p=(f.line||{}).color,d;if(i=i||{},p&&(o=p),h("marker.symbol"),h("marker.opacity",s?.7:1),h("marker.size"),h("marker.color",o),n(f,"marker")&&l(f,a,u,h,{prefix:"marker.",cLetter:"c"}),i.noSelect||(h("selected.marker.color"),h("unselected.marker.color"),h("selected.marker.size"),h("unselected.marker.size")),i.noLine||(p&&!Array.isArray(p)&&a.marker.color!==p?d=p:s?d=r.background:d=r.defaultLine,h("marker.line.color",d),n(f,"marker.line")&&l(f,a,u,h,{prefix:"marker.line.",cLetter:"c"}),h("marker.line.width",s?1:0)),s&&(h("marker.sizeref"),h("marker.sizemin"),h("marker.sizemode")),i.gradient){var y=h("marker.gradient.type");y!=="none"&&h("marker.gradient.color")}}},{"../../components/color":643,"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"./subtypes":1212}],1207:[function(e,v,M){var r=e("../../lib").dateTick0,n=e("../../constants/numerical"),l=n.ONEWEEK;function c(t,f){return t%l===0?r(f,1):r(f,0)}v.exports=function(f,a,o,u,h){if(h||(h={x:!0,y:!0}),h.x){var i=u("xperiod");i&&(u("xperiod0",c(i,a.xcalendar)),u("xperiodalignment"))}if(h.y){var s=u("yperiod");s&&(u("yperiod0",c(s,a.ycalendar)),u("yperiodalignment"))}}},{"../../constants/numerical":753,"../../lib":778}],1208:[function(e,v,M){var r=e("d3"),n=e("../../registry"),l=e("../../lib"),c=l.ensureSingle,t=l.identity,f=e("../../components/drawing"),a=e("./subtypes"),o=e("./line_points"),u=e("./link_traces"),h=e("../../lib/polygon").tester;v.exports=function(y,b,m,_,T,g){var A,k,R=!T,L=!!T&&T.duration>0,z=u(y,b,m);if(A=_.selectAll("g.trace").data(z,function(S){return S[0].trace.uid}),A.enter().append("g").attr("class",function(S){return"trace scatter trace"+S[0].trace.uid}).style("stroke-miterlimit",2),A.order(),i(y,A,b),L){g&&(k=g());var E=r.transition().duration(T.duration).ease(T.easing).each("end",function(){k&&k()}).each("interrupt",function(){k&&k()});E.each(function(){_.selectAll("g.trace").each(function(S,C){s(y,C,b,S,z,this,T)})})}else A.each(function(S,C){s(y,C,b,S,z,this,T)});R&&A.exit().remove(),_.selectAll("path:not([d])").remove()};function i(d,y,b){y.each(function(m){var _=c(r.select(this),"g","fills");f.setClipUrl(_,b.layerClipId,d);var T=m[0].trace,g=[];T._ownfill&&g.push("_ownFill"),T._nexttrace&&g.push("_nextFill");var A=_.selectAll("g").data(g,t);A.enter().append("g"),A.exit().each(function(k){T[k]=null}).remove(),A.order().each(function(k){T[k]=c(r.select(this),"path","js-fill")})})}function s(d,y,b,m,_,T,g){var A;p(d,y,b,m,_);var k=!!g&&g.duration>0;function R(Ce){return k?Ce.transition():Ce}var L=b.xaxis,z=b.yaxis,E=m[0].trace,S=E.line,C=r.select(T),D=c(C,"g","errorbars"),F=c(C,"g","lines"),N=c(C,"g","points"),G=c(C,"g","text");if(n.getComponentMethod("errorbars","plot")(d,D,b,g),E.visible!==!0)return;R(C).style("opacity",E.opacity);var U,X,I=E.fill.charAt(E.fill.length-1);I!=="x"&&I!=="y"&&(I=""),m[0][b.isRangePlot?"nodeRangePlot3":"node3"]=C;var B="",j=[],H=E._prevtrace;H&&(B=H._prevRevpath||"",X=H._nextFill,j=H._polygons);var K,te,J="",oe="",ie,Q,V,se,re,ee,ae,fe=[],de=l.noop;if(U=E._ownFill,a.hasLines(E)||E.fill!=="none"){for(X&&X.datum(m),["hv","vh","hvh","vhv"].indexOf(S.shape)!==-1?(ie=f.steps(S.shape),Q=f.steps(S.shape.split("").reverse().join(""))):S.shape==="spline"?ie=Q=function(Ce){var Ae=Ce[Ce.length-1];return Ce.length>1&&Ce[0][0]===Ae[0]&&Ce[0][1]===Ae[1]?f.smoothclosed(Ce.slice(1),S.smoothing):f.smoothopen(Ce,S.smoothing)}:ie=Q=function(Ce){return"M"+Ce.join("L")},V=function(Ce){return Q(Ce.reverse())},fe=o(m,{xaxis:L,yaxis:z,connectGaps:E.connectgaps,baseTolerance:Math.max(S.width||1,3)/4,shape:S.shape,simplify:S.simplify,fill:E.fill}),ae=E._polygons=new Array(fe.length),A=0;A<fe.length;A++)E._polygons[A]=h(fe[A]);fe.length&&(se=fe[0][0],re=fe[fe.length-1],ee=re[re.length-1]),de=function(Ce){return function(Ae){if(K=ie(Ae),te=V(Ae),J?I?(J+="L"+K.substr(1),oe=te+("L"+oe.substr(1))):(J+="Z"+K,oe=te+"Z"+oe):(J=K,oe=te),a.hasLines(E)&&Ae.length>1){var Ne=r.select(this);if(Ne.datum(m),Ce)R(Ne.style("opacity",0).attr("d",K).call(f.lineGroupStyle)).style("opacity",1);else{var qe=R(Ne);qe.attr("d",K),f.singleLineStyle(m,qe)}}}}}var pe=F.selectAll(".js-line").data(fe);R(pe.exit()).style("opacity",0).remove(),pe.each(de(!1)),pe.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(f.lineGroupStyle).each(de(!0)),f.setClipUrl(pe,b.layerClipId,d);function W(Ce){R(Ce).attr("d","M0,0Z")}fe.length?(U?(U.datum(m),se&&ee&&(I?(I==="y"?se[1]=ee[1]=z.c2p(0,!0):I==="x"&&(se[0]=ee[0]=L.c2p(0,!0)),R(U).attr("d","M"+ee+"L"+se+"L"+J.substr(1)).call(f.singleFillStyle)):R(U).attr("d",J+"Z").call(f.singleFillStyle))):X&&(E.fill.substr(0,6)==="tonext"&&J&&B?(E.fill==="tonext"?R(X).attr("d",J+"Z"+B+"Z").call(f.singleFillStyle):R(X).attr("d",J+"L"+B.substr(1)+"Z").call(f.singleFillStyle),E._polygons=E._polygons.concat(j)):(W(X),E._polygons=null)),E._prevRevpath=oe,E._prevPolygons=ae):(U?W(U):X&&W(X),E._polygons=E._prevRevpath=E._prevPolygons=null);function ue(Ce){return Ce.filter(function(Ae){return!Ae.gap&&Ae.vis})}function me(Ce){return Ce.filter(function(Ae){return Ae.vis})}function be(Ce){return Ce.filter(function(Ae){return!Ae.gap})}function ke(Ce){return Ce.id}function Pe(Ce){if(Ce.ids)return ke}function je(){return!1}function ze(Ce,Ae,Ne){var qe,At,kt,Ve=Ne[0].trace,ft=a.hasMarkers(Ve),St=a.hasText(Ve),Wt=Pe(Ve),Qt=je,zt=je;if(ft||St){var $t=t,rr=Ve.stackgroup,Pt=rr&&d._fullLayout._scatterStackOpts[L._id+z._id][rr].stackgaps==="infer zero";Ve.marker.maxdisplayed||Ve._needsCull?$t=Pt?me:ue:rr&&!Pt&&($t=be),ft&&(Qt=$t),St&&(zt=$t)}At=Ce.selectAll("path.point"),qe=At.data(Qt,Wt);var Lt=qe.enter().append("path").classed("point",!0);k&&Lt.call(f.pointStyle,Ve,d).call(f.translatePoints,L,z).style("opacity",0).transition().style("opacity",1),qe.order();var dt;ft&&(dt=f.makePointStyleFns(Ve)),qe.each(function(lt){var Te=r.select(this),Le=R(Te);kt=f.translatePoint(lt,Le,L,z),kt?(f.singlePointStyle(lt,Le,Ve,dt,d),b.layerClipId&&f.hideOutsideRangePoint(lt,Le,L,z,Ve.xcalendar,Ve.ycalendar),Ve.customdata&&Te.classed("plotly-customdata",lt.data!==null&&lt.data!==void 0)):Le.remove()}),k?qe.exit().transition().style("opacity",0).remove():qe.exit().remove(),At=Ae.selectAll("g"),qe=At.data(zt,Wt),qe.enter().append("g").classed("textpoint",!0).append("text"),qe.order(),qe.each(function(lt){var Te=r.select(this),Le=R(Te.select("text"));kt=f.translatePoint(lt,Le,L,z),kt?b.layerClipId&&f.hideOutsideRangePoint(lt,Te,L,z,Ve.xcalendar,Ve.ycalendar):Te.remove()}),qe.selectAll("text").call(f.textPointStyle,Ve,d).each(function(lt){var Te=L.c2p(lt.x),Le=z.c2p(lt.y);r.select(this).selectAll("tspan.line").each(function(){R(r.select(this)).attr({x:Te,y:Le})})}),qe.exit().remove()}N.datum(m),G.datum(m),ze(N,G,m);var Ze=E.cliponaxis===!1,tt=Ze?null:b.layerClipId;f.setClipUrl(N,tt,d),f.setClipUrl(G,tt,d)}function p(d,y,b,m,_){var T=b.xaxis,g=b.yaxis,A=r.extent(l.simpleMap(T.range,T.r2c)),k=r.extent(l.simpleMap(g.range,g.r2c)),R=m[0].trace;if(a.hasMarkers(R)){var L=R.marker.maxdisplayed;if(L!==0){var z=m.filter(function(D){return D.x>=A[0]&&D.x<=A[1]&&D.y>=k[0]&&D.y<=k[1]}),E=Math.ceil(z.length/L),S=0;_.forEach(function(D,F){var N=D[0].trace;a.hasMarkers(N)&&N.marker.maxdisplayed>0&&F<y&&S++});var C=Math.round(S*E/3+Math.floor(S/3)*E/7.1);m.forEach(function(D){delete D.vis}),z.forEach(function(D,F){Math.round((F+C)%E)===0&&(D.vis=!0)})}}}},{"../../components/drawing":665,"../../lib":778,"../../lib/polygon":790,"../../registry":911,"./line_points":1201,"./link_traces":1203,"./subtypes":1212,d3:169}],1209:[function(e,v,M){var r=e("./subtypes");v.exports=function(l,c){var t=l.cd,f=l.xaxis,a=l.yaxis,o=[],u=t[0].trace,h,i,s,p,d=!r.hasMarkers(u)&&!r.hasText(u);if(d)return[];if(c===!1)for(h=0;h<t.length;h++)t[h].selected=0;else for(h=0;h<t.length;h++)i=t[h],s=f.c2p(i.x),p=a.c2p(i.y),i.i!==null&&c.contains([s,p],!1,h,l)?(o.push({pointNumber:i.i,x:f.c2d(i.x),y:a.c2d(i.y)}),i.selected=1):i.selected=0;return o}},{"./subtypes":1212}],1210:[function(e,v,M){var r=["orientation","groupnorm","stackgaps"];v.exports=function(l,c,t,f){var a=t._scatterStackOpts,o=f("stackgroup");if(o){var u=c.xaxis+c.yaxis,h=a[u];h||(h=a[u]={});var i=h[o],s=!1;i?i.traces.push(c):(i=h[o]={traceIndices:[],traces:[c]},s=!0);for(var p={orientation:c.x&&!c.y?"h":"v"},d=0;d<r.length;d++){var y=r[d],b=y+"Found";if(!i[b]){var m=l[y]!==void 0,_=y==="orientation";if((m||s)&&(i[y]=f(y,p[y]),_&&(i.fillDflt=i[y]==="h"?"tonextx":"tonexty"),m&&(i[b]=!0,!s&&(delete i.traces[0][y],_))))for(var T=0;T<i.traces.length-1;T++){var g=i.traces[T];g._input.fill!==g.fill&&(g.fill=i.fillDflt)}}}return i}}},{}],1211:[function(e,v,M){var r=e("d3"),n=e("../../components/drawing"),l=e("../../registry");function c(o){var u=r.select(o).selectAll("g.trace.scatter");u.style("opacity",function(h){return h[0].trace.opacity}),u.selectAll("g.points").each(function(h){var i=r.select(this),s=h.trace||h[0].trace;t(i,s,o)}),u.selectAll("g.text").each(function(h){var i=r.select(this),s=h.trace||h[0].trace;f(i,s,o)}),u.selectAll("g.trace path.js-line").call(n.lineGroupStyle),u.selectAll("g.trace path.js-fill").call(n.fillGroupStyle),l.getComponentMethod("errorbars","style")(u)}function t(o,u,h){n.pointStyle(o.selectAll("path.point"),u,h)}function f(o,u,h){n.textPointStyle(o.selectAll("text"),u,h)}function a(o,u,h){var i=u[0].trace;i.selectedpoints?(n.selectedPointStyle(h.selectAll("path.point"),i),n.selectedTextStyle(h.selectAll("text"),i)):(t(h,i,o),f(h,i,o))}v.exports={style:c,stylePoints:t,styleText:f,styleOnSelect:a}},{"../../components/drawing":665,"../../registry":911,d3:169}],1212:[function(e,v,M){var r=e("../../lib");v.exports={hasLines:function(n){return n.visible&&n.mode&&n.mode.indexOf("lines")!==-1},hasMarkers:function(n){return n.visible&&(n.mode&&n.mode.indexOf("markers")!==-1||n.type==="splom")},hasText:function(n){return n.visible&&n.mode&&n.mode.indexOf("text")!==-1},isBubble:function(n){return r.isPlainObject(n.marker)&&r.isArrayOrTypedArray(n.marker.size)}}},{"../../lib":778}],1213:[function(e,v,M){var r=e("../../lib");v.exports=function(n,l,c,t,f){f=f||{},t("textposition"),r.coerceFont(t,"textfont",c.font),f.noSelect||(t("selected.textfont.color"),t("unselected.textfont.color"))}},{"../../lib":778}],1214:[function(e,v,M){var r=e("../../lib"),n=e("../../registry");v.exports=function(c,t,f,a){var o=a("x"),u=a("y"),h,i=n.getComponentMethod("calendars","handleTraceDefaults");if(i(c,t,["x","y"],f),o){var s=r.minRowLength(o);u?h=Math.min(s,r.minRowLength(u)):(h=s,a("y0"),a("dy"))}else{if(!u)return 0;h=r.minRowLength(u),a("x0"),a("dx")}return t._length=h,h}},{"../../lib":778,"../../registry":911}],1215:[function(e,v,M){var r=e("../scatter/attributes"),n=e("../../components/colorscale/attributes"),l=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../plots/attributes"),f=e("../../constants/gl3d_dashes"),a=e("../../constants/gl3d_markers"),o=e("../../lib/extend").extendFlat,u=e("../../plot_api/edit_types").overrideAll,h=r.line,i=r.marker,s=i.line,p=o({width:h.width,dash:{valType:"enumerated",values:Object.keys(f),dflt:"solid"}},n("line"));function d(b){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var y=v.exports=u({x:r.x,y:r.y,z:{valType:"data_array"},text:o({},r.text,{}),texttemplate:c({},{}),hovertext:o({},r.hovertext,{}),hovertemplate:l(),mode:o({},r.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:d(),y:d(),z:d()},connectgaps:r.connectgaps,line:p,marker:o({symbol:{valType:"enumerated",values:Object.keys(a),dflt:"circle",arrayOk:!0},size:o({},i.size,{dflt:8}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:o({},i.opacity,{arrayOk:!1}),colorbar:i.colorbar,line:o({width:o({},s.width,{arrayOk:!1})},n("marker.line"))},n("marker")),textposition:o({},r.textposition,{dflt:"top center"}),textfont:{color:r.textfont.color,size:r.textfont.size,family:o({},r.textfont.family,{arrayOk:!1})},hoverinfo:o({},t.hoverinfo)},"calc","nested");y.x.editType=y.y.editType=y.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":650,"../../constants/gl3d_dashes":750,"../../constants/gl3d_markers":751,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1216:[function(e,v,M){var r=e("../scatter/arrays_to_calcdata"),n=e("../scatter/colorscale_calc");v.exports=function(c,t){var f=[{x:!1,y:!1,trace:t,t:{}}];return r(f,t),n(c,t),f}},{"../scatter/arrays_to_calcdata":1186,"../scatter/colorscale_calc":1190}],1217:[function(e,v,M){var r=e("../../registry");function n(t,f,a,o){if(!f||!f.visible)return null;for(var u=r.getComponentMethod("errorbars","makeComputeError")(f),h=new Array(t.length),i=0;i<t.length;i++){var s=u(+t[i],i);if(o.type==="log"){var p=o.c2l(t[i]),d=t[i]-s[0],y=t[i]+s[1];if(h[i]=[(o.c2l(d,!0)-p)*a,(o.c2l(y,!0)-p)*a],d>0){var b=o.c2l(d);o._lowerLogErrorBound||(o._lowerLogErrorBound=b),o._lowerErrorBound=Math.min(o._lowerLogErrorBound,b)}}else h[i]=[-s[0]*a,s[1]*a]}return h}function l(t){for(var f=0;f<t.length;f++)if(t[f])return t[f].length;return 0}function c(t,f,a){var o=[n(t.x,t.error_x,f[0],a.xaxis),n(t.y,t.error_y,f[1],a.yaxis),n(t.z,t.error_z,f[2],a.zaxis)],u=l(o);if(u===0)return null;for(var h=new Array(u),i=0;i<u;i++){for(var s=[[0,0,0],[0,0,0]],p=0;p<3;p++)if(o[p])for(var d=0;d<2;d++)s[d][p]=o[p][i][d];h[i]=s}return h}v.exports=c},{"../../registry":911}],1218:[function(e,v,M){var r=e("gl-line3d"),n=e("gl-scatter3d"),l=e("gl-error3d"),c=e("gl-mesh3d"),t=e("delaunay-triangulate"),f=e("../../lib"),a=e("../../lib/str2rgbarray"),o=e("../../lib/gl_format_color").formatColor,u=e("../scatter/make_bubble_size_func"),h=e("../../constants/gl3d_dashes"),i=e("../../constants/gl3d_markers"),s=e("../../plots/cartesian/axes"),p=e("../../components/fx/helpers").appendArrayPointValue,d=e("./calc_errors");function y(D,F){this.scene=D,this.uid=F,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var b=y.prototype;b.handlePick=function(D){if(D.object&&(D.object===this.linePlot||D.object===this.delaunayMesh||D.object===this.textMarkers||D.object===this.scatterPlot)){var F=D.index=D.data.index;return D.object.highlight&&D.object.highlight(null),this.scatterPlot&&(D.object=this.scatterPlot,this.scatterPlot.highlight(D.data)),D.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[F]||this.textLabels[F]===0)&&(D.textLabel=this.textLabels[F]):D.textLabel=this.textLabels),D.traceCoordinate=[this.data.x[F],this.data.y[F],this.data.z[F]],!0}};function m(D,F,N){var G=(N+1)%3,U=(N+2)%3,X=[],I=[],B;for(B=0;B<D.length;++B){var j=D[B];isNaN(j[G])||!isFinite(j[G])||isNaN(j[U])||!isFinite(j[U])||(X.push([j[G],j[U]]),I.push(B))}var H=t(X);for(B=0;B<H.length;++B)for(var K=H[B],te=0;te<K.length;++te)K[te]=I[K[te]];return{positions:D,cells:H,meshColor:F}}function _(D){for(var F=[0,0,0],N=[[0,0,0],[0,0,0],[0,0,0]],G=[1,1,1],U=0;U<3;U++){var X=D[U];X&&X.copy_zstyle!==!1&&D[2].visible!==!1&&(X=D[2]),!(!X||!X.visible)&&(F[U]=X.width/2,N[U]=a(X.color),G[U]=X.thickness)}return{capSize:F,color:N,lineWidth:G}}function T(D){return D==null?0:D.indexOf("left")>-1?-1:D.indexOf("right")>-1?1:0}function g(D){return D==null?0:D.indexOf("top")>-1?-1:D.indexOf("bottom")>-1?1:0}function A(D){var F=0,N=0,G=[F,N];if(Array.isArray(D))for(var U=0;U<D.length;U++)G[U]=[F,N],D[U]&&(G[U][0]=T(D[U]),G[U][1]=g(D[U]));else G[0]=T(D),G[1]=g(D);return G}function k(D,F){return F(D*4)}function R(D){return i[D]}function L(D,F,N,G,U){var X=null;if(f.isArrayOrTypedArray(D)){X=[];for(var I=0;I<F;I++)D[I]===void 0?X[I]=G:X[I]=N(D[I],U)}else X=N(D,f.identity);return X}function z(D,F){var N=[],G=D.fullSceneLayout,U=D.dataScale,X=G.xaxis,I=G.yaxis,B=G.zaxis,j=F.marker,H=F.line,K=F.x||[],te=F.y||[],J=F.z||[],oe=K.length,ie=F.xcalendar,Q=F.ycalendar,V=F.zcalendar,se,re,ee,ae,fe,de;for(fe=0;fe<oe;fe++)se=X.d2l(K[fe],0,ie)*U[0],re=I.d2l(te[fe],0,Q)*U[1],ee=B.d2l(J[fe],0,V)*U[2],N[fe]=[se,re,ee];if(Array.isArray(F.text))de=F.text;else if(F.text!==void 0)for(de=new Array(oe),fe=0;fe<oe;fe++)de[fe]=F.text;function pe(At,kt){var Ve=G[At];return s.tickText(Ve,Ve.d2l(kt),!0).text}var W=F.texttemplate;if(W){var ue=D.fullLayout,me=ue._d3locale,be=Array.isArray(W),ke=be?Math.min(W.length,oe):oe,Pe=be?function(At){return W[At]}:function(){return W};for(de=new Array(ke),fe=0;fe<ke;fe++){var je={x:K[fe],y:te[fe],z:J[fe]},ze={xLabel:pe("xaxis",K[fe]),yLabel:pe("yaxis",te[fe]),zLabel:pe("zaxis",J[fe])},Ze={};p(Ze,F,fe);var tt=F._meta||{};de[fe]=f.texttemplateString(Pe(fe),ze,me,Ze,je,tt)}}if(ae={position:N,mode:F.mode,text:de},"line"in F&&(ae.lineColor=o(H,1,oe),ae.lineWidth=H.width,ae.lineDashes=H.dash),"marker"in F){var Ce=u(F);ae.scatterColor=o(j,1,oe),ae.scatterSize=L(j.size,oe,k,20,Ce),ae.scatterMarker=L(j.symbol,oe,R,"●"),ae.scatterLineWidth=j.line.width,ae.scatterLineColor=o(j.line,1,oe),ae.scatterAngle=0}"textposition"in F&&(ae.textOffset=A(F.textposition),ae.textColor=o(F.textfont,1,oe),ae.textSize=L(F.textfont.size,oe,f.identity,12),ae.textFont=F.textfont.family,ae.textAngle=0);var Ae=["x","y","z"];for(ae.project=[!1,!1,!1],ae.projectScale=[1,1,1],ae.projectOpacity=[1,1,1],fe=0;fe<3;++fe){var Ne=F.projection[Ae[fe]];(ae.project[fe]=Ne.show)&&(ae.projectOpacity[fe]=Ne.opacity,ae.projectScale[fe]=Ne.scale)}ae.errorBounds=d(F,U,G);var qe=_([F.error_x,F.error_y,F.error_z]);return ae.errorColor=qe.color,ae.errorLineWidth=qe.lineWidth,ae.errorCapSize=qe.capSize,ae.delaunayAxis=F.surfaceaxis,ae.delaunayColor=a(F.surfacecolor),ae}function E(D){if(f.isArrayOrTypedArray(D)){var F=D[0];return f.isArrayOrTypedArray(F)&&(D=F),"rgb("+D.slice(0,3).map(function(N){return Math.round(N*255)})+")"}return null}function S(D){return f.isArrayOrTypedArray(D)?D.length===4&&typeof D[0]=="number"?E(D):D.map(E):null}b.update=function(D){var F=this.scene.glplot.gl,N,G,U,X,I=h.solid;this.data=D;var B=z(this.scene,D);"mode"in B&&(this.mode=B.mode),"lineDashes"in B&&B.lineDashes in h&&(I=h[B.lineDashes]),this.color=S(B.scatterColor)||S(B.lineColor),this.dataPoints=B.position,N={gl:this.scene.glplot.gl,position:B.position,color:B.lineColor,lineWidth:B.lineWidth||1,dashes:I[0],dashScale:I[1],opacity:D.opacity,connectGaps:D.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(N):(this.linePlot=r(N),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var j=D.opacity;if(D.marker&&D.marker.opacity&&(j*=D.marker.opacity),G={gl:this.scene.glplot.gl,position:B.position,color:B.scatterColor,size:B.scatterSize,glyph:B.scatterMarker,opacity:j,orthographic:!0,lineWidth:B.scatterLineWidth,lineColor:B.scatterLineColor,project:B.project,projectScale:B.projectScale,projectOpacity:B.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(G):(this.scatterPlot=n(G),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),X={gl:this.scene.glplot.gl,position:B.position,glyph:B.text,color:B.textColor,size:B.textSize,angle:B.textAngle,alignment:B.textOffset,font:B.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:D.opacity},this.textLabels=D.hovertext||D.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(X):(this.textMarkers=n(X),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),U={gl:this.scene.glplot.gl,position:B.position,color:B.errorColor,error:B.errorBounds,lineWidth:B.errorLineWidth,capSize:B.errorCapSize,opacity:D.opacity},this.errorBars?B.errorBounds?this.errorBars.update(U):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):B.errorBounds&&(this.errorBars=l(U),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),B.delaunayAxis>=0){var H=m(B.position,B.delaunayColor,B.delaunayAxis);H.opacity=D.opacity,this.delaunayMesh?this.delaunayMesh.update(H):(H.gl=F,this.delaunayMesh=c(H),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},b.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function C(D,F){var N=new y(D,F.uid);return N.update(F),N}v.exports=C},{"../../components/fx/helpers":679,"../../constants/gl3d_dashes":750,"../../constants/gl3d_markers":751,"../../lib":778,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/cartesian/axes":828,"../scatter/make_bubble_size_func":1204,"./calc_errors":1217,"delaunay-triangulate":171,"gl-error3d":266,"gl-line3d":275,"gl-mesh3d":309,"gl-scatter3d":330}],1219:[function(e,v,M){var r=e("../../registry"),n=e("../../lib"),l=e("../scatter/subtypes"),c=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),f=e("../scatter/text_defaults"),a=e("./attributes");v.exports=function(h,i,s,p){function d(k,R){return n.coerce(h,i,a,k,R)}var y=o(h,i,d,p);if(!y){i.visible=!1;return}d("text"),d("hovertext"),d("hovertemplate"),d("mode"),l.hasLines(i)&&(d("connectgaps"),t(h,i,s,p,d)),l.hasMarkers(i)&&c(h,i,s,p,d,{noSelect:!0}),l.hasText(i)&&(d("texttemplate"),f(h,i,p,d,{noSelect:!0}));var b=(i.line||{}).color,m=(i.marker||{}).color;d("surfaceaxis")>=0&&d("surfacecolor",b||m);for(var _=["x","y","z"],T=0;T<3;++T){var g="projection."+_[T];d(g+".show")&&(d(g+".opacity"),d(g+".scale"))}var A=r.getComponentMethod("errorbars","supplyDefaults");A(h,i,b||m||s,{axis:"z"}),A(h,i,b||m||s,{axis:"y",inherit:"z"}),A(h,i,b||m||s,{axis:"x",inherit:"z"})};function o(u,h,i,s){var p=0,d=i("x"),y=i("y"),b=i("z"),m=r.getComponentMethod("calendars","handleTraceDefaults");return m(u,h,["x","y","z"],s),d&&y&&b&&(p=Math.min(d.length,y.length,b.length),h._length=h._xlength=h._ylength=h._zlength=p),p}},{"../../lib":778,"../../registry":911,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1215}],1220:[function(e,v,M){v.exports={plot:e("./convert"),attributes:e("./attributes"),markerSymbols:e("../../constants/gl3d_markers"),supplyDefaults:e("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":751,"../../plots/gl3d":870,"./attributes":1215,"./calc":1216,"./convert":1218,"./defaults":1219}],1221:[function(e,v,M){var r=e("../scatter/attributes"),n=e("../../plots/attributes"),l=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../components/colorscale/attributes"),f=e("../../lib/extend").extendFlat,a=r.marker,o=r.line,u=a.line;v.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:f({},r.mode,{dflt:"markers"}),text:f({},r.text,{}),texttemplate:c({editType:"plot"},{keys:["a","b","text"]}),hovertext:f({},r.hovertext,{}),line:{color:o.color,width:o.width,dash:o.dash,shape:f({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:r.connectgaps,fill:f({},r.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:r.fillcolor,marker:f({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:f({width:u.width,editType:"calc"},t("marker.line")),gradient:a.gradient,editType:"calc"},t("marker")),textfont:r.textfont,textposition:r.textposition,selected:r.selected,unselected:r.unselected,hoverinfo:f({},n.hoverinfo,{flags:["a","b","text","name"]}),hoveron:r.hoveron,hovertemplate:l()}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1222:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../scatter/colorscale_calc"),l=e("../scatter/arrays_to_calcdata"),c=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,f=e("../carpet/lookup_carpetid");v.exports=function(o,u){var h=u._carpetTrace=f(o,u);if(!(!h||!h.visible||h.visible==="legendonly")){var i;u.xaxis=h.xaxis,u.yaxis=h.yaxis;var s=u._length,p=new Array(s),d,y,b=!1;for(i=0;i<s;i++)if(d=u.a[i],y=u.b[i],r(d)&&r(y)){var m=h.ab2xy(+d,+y,!0),_=h.isVisible(+d,+y);_||(b=!0),p[i]={x:m[0],y:m[1],a:d,b:y,vis:_}}else p[i]={x:!1,y:!1};return u._needsCull=b,p[0].carpet=h,p[0].trace=u,t(u,s),n(o,u),l(p,u),c(p,u),p}}},{"../carpet/lookup_carpetid":981,"../scatter/arrays_to_calcdata":1186,"../scatter/calc":1188,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1223:[function(e,v,M){var r=e("../../lib"),n=e("../scatter/constants"),l=e("../scatter/subtypes"),c=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),f=e("../scatter/line_shape_defaults"),a=e("../scatter/text_defaults"),o=e("../scatter/fillcolor_defaults"),u=e("./attributes");v.exports=function(i,s,p,d){function y(k,R){return r.coerce(i,s,u,k,R)}y("carpet"),s.xaxis="x",s.yaxis="y";var b=y("a"),m=y("b"),_=Math.min(b.length,m.length);if(!_){s.visible=!1;return}s._length=_,y("text"),y("texttemplate"),y("hovertext");var T=_<n.PTS_LINESONLY?"lines+markers":"lines";y("mode",T),l.hasLines(s)&&(t(i,s,p,d,y),f(i,s,y),y("connectgaps")),l.hasMarkers(s)&&c(i,s,p,d,y,{gradient:!0}),l.hasText(s)&&a(i,s,d,y);var g=[];(l.hasMarkers(s)||l.hasText(s))&&(y("marker.maxdisplayed"),g.push("points")),y("fill"),s.fill!=="none"&&(o(i,s,p,y),l.hasLines(s)||f(i,s,y)),(s.fill==="tonext"||s.fill==="toself")&&g.push("fills");var A=y("hoveron",g.join("+")||"points");A!=="fills"&&y("hovertemplate"),r.coerceSelectionMarkerOpacity(s,y)}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/line_shape_defaults":1202,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1221}],1224:[function(e,v,M){v.exports=function(n,l,c,t,f){var a=t[f];return n.a=a.a,n.b=a.b,n.y=a.y,n}},{}],1225:[function(e,v,M){v.exports=function(n,l){var c={},t=l._carpet,f=t.ab2ij([n.a,n.b]),a=Math.floor(f[0]),o=f[0]-a,u=Math.floor(f[1]),h=f[1]-u,i=t.evalxy([],a,u,o,h);return c.yLabel=i[1].toFixed(3),c}},{}],1226:[function(e,v,M){var r=e("../scatter/hover"),n=e("../../lib").fillText;v.exports=function(c,t,f,a){var o=r(c,t,f,a);if(!o||o[0].index===!1)return;var u=o[0];if(u.index===void 0){var h=1-u.y0/c.ya._length,i=c.xa._length,s=i*h/2,p=i-s;return u.x0=Math.max(Math.min(u.x0,p),s),u.x1=Math.max(Math.min(u.x1,p),s),o}var d=u.cd[u.index];u.a=d.a,u.b=d.b,u.xLabelVal=void 0,u.yLabelVal=void 0;var y=u.trace,b=y._carpet,m=y._module.formatLabels(d,y);u.yLabel=m.yLabel,delete u.text;var _=[];function T(k,R){var L;k.labelprefix&&k.labelprefix.length>0?L=k.labelprefix.replace(/ = $/,""):L=k._hovertitle,_.push(L+": "+R.toFixed(3)+k.labelsuffix)}if(!y.hovertemplate){var g=d.hi||y.hoverinfo,A=g.split("+");A.indexOf("all")!==-1&&(A=["a","b","text"]),A.indexOf("a")!==-1&&T(b.aaxis,d.a),A.indexOf("b")!==-1&&T(b.baxis,d.b),_.push("y: "+u.yLabel),A.indexOf("text")!==-1&&n(d,y,_),u.extraText=_.join("<br>")}return o}},{"../../lib":778,"../scatter/hover":1198}],1227:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:e("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"../scatter/marker_colorbar":1205,"../scatter/select":1209,"../scatter/style":1211,"./attributes":1221,"./calc":1222,"./defaults":1223,"./event_data":1224,"./format_labels":1225,"./hover":1226,"./plot":1228}],1228:[function(e,v,M){var r=e("../scatter/plot"),n=e("../../plots/cartesian/axes"),l=e("../../components/drawing");v.exports=function(t,f,a,o){var u,h,i,s=a[0][0].carpet,p={xaxis:n.getFromId(t,s.xaxis||"x"),yaxis:n.getFromId(t,s.yaxis||"y"),plot:f.plot};for(r(t,p,a,o),u=0;u<a.length;u++)h=a[u][0].trace,i=o.selectAll("g.trace"+h.uid+" .js-line"),l.setClipUrl(i,a[u][0].carpet._clipPathId,t)}},{"../../components/drawing":665,"../../plots/cartesian/axes":828,"../scatter/plot":1208}],1229:[function(e,v,M){var r=e("../../plots/template_attributes").hovertemplateAttrs,n=e("../../plots/template_attributes").texttemplateAttrs,l=e("../scatter/attributes"),c=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),f=e("../../components/drawing/attributes").dash,a=e("../../lib/extend").extendFlat,o=e("../../plot_api/edit_types").overrideAll,u=l.marker,h=l.line,i=u.line;v.exports=o({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:a({},l.mode,{dflt:"markers"}),text:a({},l.text,{}),texttemplate:n({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:a({},l.hovertext,{}),textfont:l.textfont,textposition:l.textposition,line:{color:h.color,width:h.width,dash:f},connectgaps:l.connectgaps,marker:a({symbol:u.symbol,opacity:u.opacity,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,colorbar:u.colorbar,line:a({width:i.width},t("marker.line")),gradient:u.gradient},t("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:l.fillcolor,selected:l.selected,unselected:l.unselected,hoverinfo:a({},c.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:r()},"calc","nested")},{"../../components/colorscale/attributes":650,"../../components/drawing/attributes":664,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1230:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../constants/numerical").BADNUM,l=e("../scatter/colorscale_calc"),c=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection"),f=e("../../lib")._;function a(o){return o&&typeof o=="string"}v.exports=function(u,h){var i=Array.isArray(h.locations),s=i?h.locations.length:h._length,p=new Array(s),d;h.geojson?d=function(g){return a(g)||r(g)}:d=a;for(var y=0;y<s;y++){var b=p[y]={};if(i){var m=h.locations[y];b.loc=d(m)?m:null}else{var _=h.lon[y],T=h.lat[y];r(_)&&r(T)?b.lonlat=[+_,+T]:b.lonlat=[n,n]}}return c(p,h),l(u,h),t(p,h),s&&(p[0].t={labels:{lat:f(u,"lat:")+" ",lon:f(u,"lon:")+" "}}),p}},{"../../constants/numerical":753,"../../lib":778,"../scatter/arrays_to_calcdata":1186,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1231:[function(e,v,M){var r=e("../../lib"),n=e("../scatter/subtypes"),l=e("../scatter/marker_defaults"),c=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),f=e("../scatter/fillcolor_defaults"),a=e("./attributes");v.exports=function(u,h,i,s){function p(A,k){return r.coerce(u,h,a,A,k)}var d=p("locations"),y;if(d&&d.length){var b=p("geojson"),m;(typeof b=="string"&&b!==""||r.isPlainObject(b))&&(m="geojson-id");var _=p("locationmode",m);_==="geojson-id"&&p("featureidkey"),y=d.length}else{var T=p("lon")||[],g=p("lat")||[];y=Math.min(T.length,g.length)}if(!y){h.visible=!1;return}h._length=y,p("text"),p("hovertext"),p("hovertemplate"),p("mode"),n.hasLines(h)&&(c(u,h,i,s,p),p("connectgaps")),n.hasMarkers(h)&&l(u,h,i,s,p,{gradient:!0}),n.hasText(h)&&(p("texttemplate"),t(u,h,s,p)),p("fill"),h.fill!=="none"&&f(u,h,i,p),r.coerceSelectionMarkerOpacity(h,p)}},{"../../lib":778,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1229}],1232:[function(e,v,M){v.exports=function(n,l,c,t,f){n.lon=l.lon,n.lat=l.lat,n.location=l.loc?l.loc:null;var a=t[f];return a.fIn&&a.fIn.properties&&(n.properties=a.fIn.properties),n}},{}],1233:[function(e,v,M){var r=e("../../plots/cartesian/axes");v.exports=function(l,c,t){var f={},a=t[c.geo]._subplot,o=a.mockAxis,u=l.lonlat;return f.lonLabel=r.tickText(o,o.c2l(u[0]),!0).text,f.latLabel=r.tickText(o,o.c2l(u[1]),!0).text,f}},{"../../plots/cartesian/axes":828}],1234:[function(e,v,M){var r=e("../../components/fx"),n=e("../../constants/numerical").BADNUM,l=e("../scatter/get_trace_color"),c=e("../../lib").fillText,t=e("./attributes");v.exports=function(o,u,h){var i=o.cd,s=i[0].trace,p=o.xa,d=o.ya,y=o.subplot,b=y.projection.isLonLatOverEdges,m=y.project;function _(z){var E=z.lonlat;if(E[0]===n||b(E))return 1/0;var S=m(E),C=m([u,h]),D=Math.abs(S[0]-C[0]),F=Math.abs(S[1]-C[1]),N=Math.max(3,z.mrc||0);return Math.max(Math.sqrt(D*D+F*F)-N,1-3/N)}if(r.getClosest(i,_,o),o.index!==!1){var T=i[o.index],g=T.lonlat,A=[p.c2p(g),d.c2p(g)],k=T.mrc||1;o.x0=A[0]-k,o.x1=A[0]+k,o.y0=A[1]-k,o.y1=A[1]+k,o.loc=T.loc,o.lon=g[0],o.lat=g[1];var R={};R[s.geo]={_subplot:y};var L=s._module.formatLabels(T,s,R);return o.lonLabel=L.lonLabel,o.latLabel=L.latLabel,o.color=l(s,T),o.extraText=f(s,T,o,i[0].t.labels),o.hovertemplate=s.hovertemplate,[o]}};function f(a,o,u,h){if(a.hovertemplate)return;var i=o.hi||a.hoverinfo,s=i==="all"?t.hoverinfo.flags:i.split("+"),p=s.indexOf("location")!==-1&&Array.isArray(a.locations),d=s.indexOf("lon")!==-1,y=s.indexOf("lat")!==-1,b=s.indexOf("text")!==-1,m=[];function _(T){return T+"°"}return p?m.push(o.loc):d&&y?m.push("("+_(u.lonLabel)+", "+_(u.latLabel)+")"):d?m.push(h.lon+_(u.lonLabel)):y&&m.push(h.lat+_(u.latLabel)),b&&c(o,a,m),m.join("<br>")}},{"../../components/fx":683,"../../constants/numerical":753,"../../lib":778,"../scatter/get_trace_color":1197,"./attributes":1229}],1235:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:e("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":860,"../scatter/marker_colorbar":1205,"../scatter/style":1211,"./attributes":1229,"./calc":1230,"./defaults":1231,"./event_data":1232,"./format_labels":1233,"./hover":1234,"./plot":1236,"./select":1237,"./style":1238}],1236:[function(e,v,M){var r=e("d3"),n=e("../../lib"),l=e("../../lib/topojson_utils").getTopojsonFeatures,c=e("../../lib/geojson_utils"),t=e("../../lib/geo_location_utils"),f=e("../../plots/cartesian/autorange").findExtremes,a=e("../../constants/numerical").BADNUM,o=e("../scatter/calc").calcMarkerSize,u=e("../scatter/subtypes"),h=e("./style");function i(p,d,y){var b=d.layers.frontplot.select(".scatterlayer"),m=n.makeTraceGroups(b,y,"trace scattergeo");function _(T,g){T.lonlat[0]===a&&r.select(g).remove()}m.selectAll("*").remove(),m.each(function(T){var g=r.select(this),A=T[0].trace;if(u.hasLines(A)||A.fill!=="none"){var k=c.calcTraceToLineCoords(T),R=A.fill!=="none"?c.makePolygon(k):c.makeLine(k);g.selectAll("path.js-line").data([{geojson:R,trace:A}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}u.hasMarkers(A)&&g.selectAll("path.point").data(n.identity).enter().append("path").classed("point",!0).each(function(L){_(L,this)}),u.hasText(A)&&g.selectAll("g").data(n.identity).enter().append("g").append("text").each(function(L){_(L,this)}),h(p,T)})}function s(p,d){var y=p[0].trace,b=d[y.geo],m=b._subplot,_=y._length,T,g;if(Array.isArray(y.locations)){var A=y.locationmode,k=A==="geojson-id"?t.extractTraceFeature(p):l(y,m.topojson);for(T=0;T<_;T++){g=p[T];var R=A==="geojson-id"?g.fOut:t.locationToFeature(A,g.loc,k);g.lonlat=R?R.properties.ct:[a,a]}}var L={padded:!0},z,E;if(b.fitbounds==="geojson"&&y.locationmode==="geojson-id"){var S=t.computeBbox(t.getTraceGeojson(y));z=[S[0],S[2]],E=[S[1],S[3]]}else{for(z=new Array(_),E=new Array(_),T=0;T<_;T++)g=p[T],z[T]=g.lonlat[0],E[T]=g.lonlat[1];L.ppad=o(y,_)}y._extremes.lon=f(b.lonaxis._ax,z,L),y._extremes.lat=f(b.lataxis._ax,E,L)}v.exports={calcGeoJSON:s,plot:i}},{"../../constants/numerical":753,"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/geojson_utils":772,"../../lib/topojson_utils":806,"../../plots/cartesian/autorange":827,"../scatter/calc":1188,"../scatter/subtypes":1212,"./style":1238,d3:169}],1237:[function(e,v,M){var r=e("../scatter/subtypes"),n=e("../../constants/numerical").BADNUM;v.exports=function(c,t){var f=c.cd,a=c.xaxis,o=c.yaxis,u=[],h=f[0].trace,i,s,p,d,y,b=!r.hasMarkers(h)&&!r.hasText(h);if(b)return[];if(t===!1)for(y=0;y<f.length;y++)f[y].selected=0;else for(y=0;y<f.length;y++)i=f[y],s=i.lonlat,s[0]!==n&&(p=a.c2p(s),d=o.c2p(s),t.contains([p,d],null,y,c)?(u.push({pointNumber:y,lon:s[0],lat:s[1]}),i.selected=1):i.selected=0);return u}},{"../../constants/numerical":753,"../scatter/subtypes":1212}],1238:[function(e,v,M){var r=e("d3"),n=e("../../components/drawing"),l=e("../../components/color"),c=e("../scatter/style"),t=c.stylePoints,f=c.styleText;v.exports=function(u,h){h&&a(u,h)};function a(o,u){var h=u[0].trace,i=u[0].node3;i.style("opacity",u[0].trace.opacity),t(i,h,o),f(i,h,o),i.selectAll("path.js-line").style("fill","none").each(function(s){var p=r.select(this),d=s.trace,y=d.line||{};p.call(l.stroke,y.color).call(n.dashLine,y.dash||"",y.width||0),d.fill!=="none"&&p.call(l.fill,d.fillcolor)})}},{"../../components/color":643,"../../components/drawing":665,"../scatter/style":1211,d3:169}],1239:[function(e,v,M){var r=e("../../plots/attributes"),n=e("../scatter/attributes"),l=e("../../components/colorscale/attributes"),c=e("../../lib/extend").extendFlat,t=e("../../plot_api/edit_types").overrideAll,f=e("./constants").DASHES,a=n.line,o=n.marker,u=o.line,h=v.exports=t({x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,xperiod:n.xperiod,yperiod:n.yperiod,xperiod0:n.xperiod0,yperiod0:n.yperiod0,xperiodalignment:n.xperiodalignment,yperiodalignment:n.yperiodalignment,text:n.text,hovertext:n.hovertext,textposition:n.textposition,textfont:n.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:a.color,width:a.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Object.keys(f),dflt:"solid"}},marker:c({},l("marker"),{symbol:o.symbol,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:o.opacity,colorbar:o.colorbar,line:c({},l("marker.line"),{width:u.width})}),connectgaps:n.connectgaps,fill:c({},n.fill,{dflt:"none"}),fillcolor:n.fillcolor,selected:{marker:n.selected.marker,textfont:n.selected.textfont},unselected:{marker:n.unselected.marker,textfont:n.unselected.textfont},opacity:r.opacity},"calc","nested");h.x.editType=h.y.editType=h.x0.editType=h.y0.editType="calc+clearAxisTypes",h.hovertemplate=n.hovertemplate,h.texttemplate=n.texttemplate},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../scatter/attributes":1187,"./constants":1241}],1240:[function(e,v,M){var r=e("@plotly/point-cluster"),n=e("../../lib"),l=e("../../plots/cartesian/axis_ids"),c=e("../../plots/cartesian/autorange").findExtremes,t=e("../../plots/cartesian/align_period"),f=e("../scatter/calc"),a=f.calcMarkerSize,o=f.calcAxisExpansion,u=f.setFirstScatter,h=e("../scatter/colorscale_calc"),i=e("./convert"),s=e("./scene_update"),p=e("../../constants/numerical").BADNUM,d=e("./constants").TOO_MANY_POINTS;v.exports=function(_,T){var g=_._fullLayout,A=l.getFromId(_,T.xaxis),k=l.getFromId(_,T.yaxis),R=g._plots[T.xaxis+T.yaxis],L=T._length,z=L>=d,E=L*2,S={},C,D,F,N=A.makeCalcdata(T,"x"),G=k.makeCalcdata(T,"y"),U=t(T,A,"x",N),X=t(T,k,"y",G);T._x=U,T._y=X,T.xperiodalignment&&(T._origX=N),T.yperiodalignment&&(T._origY=G);var I=new Array(E);for(C=0;C<L;C++)D=U[C],F=X[C],I[C*2]=D===p?NaN:D,I[C*2+1]=F===p?NaN:F;if(A.type==="log")for(C=0;C<E;C+=2)I[C]=A.c2l(I[C]);if(k.type==="log")for(C=1;C<E;C+=2)I[C]=k.c2l(I[C]);if(z&&A.type!=="log"&&k.type!=="log")S.tree=r(I);else{var B=S.ids=new Array(L);for(C=0;C<L;C++)B[C]=C}h(_,T);var j=b(_,R,T,I,U,X),H=s(_,R);u(g,T);var K;return z?j.marker&&(K=2*(j.marker.sizeAvg||Math.max(j.marker.size,3))):K=a(T,L),o(_,T,A,k,U,X,K),j.errorX&&y(T,A,j.errorX),j.errorY&&y(T,k,j.errorY),j.fill&&!H.fill2d&&(H.fill2d=!0),j.marker&&!H.scatter2d&&(H.scatter2d=!0),j.line&&!H.line2d&&(H.line2d=!0),(j.errorX||j.errorY)&&!H.error2d&&(H.error2d=!0),j.text&&!H.glText&&(H.glText=!0),j.marker&&(j.marker.snap=L),H.lineOptions.push(j.line),H.errorXOptions.push(j.errorX),H.errorYOptions.push(j.errorY),H.fillOptions.push(j.fill),H.markerOptions.push(j.marker),H.markerSelectedOptions.push(j.markerSel),H.markerUnselectedOptions.push(j.markerUnsel),H.textOptions.push(j.text),H.textSelectedOptions.push(j.textSel),H.textUnselectedOptions.push(j.textUnsel),H.selectBatch.push([]),H.unselectBatch.push([]),S._scene=H,S.index=H.count,S.x=U,S.y=X,S.positions=I,H.count++,[{x:!1,y:!1,t:S,trace:T}]};function y(m,_,T){var g=m._extremes[_._id],A=c(_,T._bnds,{padded:!0});g.min=g.min.concat(A.min),g.max=g.max.concat(A.max)}function b(m,_,T,g,A,k){var R=i.style(m,T);if(R.marker&&(R.marker.positions=g),R.line&&g.length>1&&n.extendFlat(R.line,i.linePositions(m,T,g)),R.errorX||R.errorY){var L=i.errorBarPositions(m,T,g,A,k);R.errorX&&n.extendFlat(R.errorX,L.x),R.errorY&&n.extendFlat(R.errorY,L.y)}return R.text&&(n.extendFlat(R.text,{positions:g},i.textPosition(m,T,R.text,R.marker)),n.extendFlat(R.textSel,{positions:g},i.textPosition(m,T,R.text,R.markerSel)),n.extendFlat(R.textUnsel,{positions:g},i.textPosition(m,T,R.text,R.markerUnsel))),R}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/autorange":827,"../../plots/cartesian/axis_ids":831,"../scatter/calc":1188,"../scatter/colorscale_calc":1190,"./constants":1241,"./convert":1242,"./scene_update":1250,"@plotly/point-cluster":57}],1241:[function(e,v,M){var r=20;v.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:r,SYMBOL_STROKE:r/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1242:[function(e,v,M){var r=e("fast-isnumeric"),n=e("svg-path-sdf"),l=e("color-normalize"),c=e("../../registry"),t=e("../../lib"),f=e("../../components/drawing"),a=e("../../plots/cartesian/axis_ids"),o=e("../../lib/gl_format_color").formatColor,u=e("../scatter/subtypes"),h=e("../scatter/make_bubble_size_func"),i=e("./helpers"),s=e("./constants"),p=e("../../constants/interactions").DESELECTDIM,d={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},y=e("../../components/fx/helpers").appendArrayPointValue;function b(N,G){var U,X={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0};if(G.visible!==!0)return X;if(u.hasText(G)&&(X.text=m(N,G),X.textSel=g(N,G,G.selected),X.textUnsel=g(N,G,G.unselected)),u.hasMarkers(G)&&(X.marker=_(G),X.markerSel=T(G,G.selected),X.markerUnsel=T(G,G.unselected),!G.unselected&&t.isArrayOrTypedArray(G.marker.opacity))){var I=G.marker.opacity;for(X.markerUnsel.opacity=new Array(I.length),U=0;U<I.length;U++)X.markerUnsel.opacity[U]=p*I[U]}if(u.hasLines(G)){X.line={overlay:!0,thickness:G.line.width,color:G.line.color,opacity:G.opacity};var B=(s.DASHES[G.line.dash]||[1]).slice();for(U=0;U<B.length;++U)B[U]*=G.line.width;X.line.dashes=B}return G.error_x&&G.error_x.visible&&(X.errorX=A(G,G.error_x)),G.error_y&&G.error_y.visible&&(X.errorY=A(G,G.error_y)),G.fill&&G.fill!=="none"&&(X.fill={closed:!0,fill:G.fillcolor,thickness:0}),X}function m(N,G){var U=N._fullLayout,X=G._length,I=G.textfont,B=G.textposition,j=Array.isArray(B)?B:[B],H=I.color,K=I.size,te=I.family,J={},oe,ie=G.texttemplate;if(ie){J.text=[];var Q=U._d3locale,V=Array.isArray(ie),se=V?Math.min(ie.length,X):X,re=V?function(ue){return ie[ue]}:function(){return ie};for(oe=0;oe<se;oe++){var ee={i:oe},ae=G._module.formatLabels(ee,G,U),fe={};y(fe,G,oe);var de=G._meta||{};J.text.push(t.texttemplateString(re(oe),ae,Q,fe,ee,de))}}else Array.isArray(G.text)&&G.text.length<X?J.text=G.text.slice():J.text=G.text;if(Array.isArray(J.text))for(oe=J.text.length;oe<X;oe++)J.text[oe]="";for(J.opacity=G.opacity,J.font={},J.align=[],J.baseline=[],oe=0;oe<j.length;oe++){var pe=j[oe].split(/\s+/);switch(pe[1]){case"left":J.align.push("right");break;case"right":J.align.push("left");break;default:J.align.push(pe[1])}switch(pe[0]){case"top":J.baseline.push("bottom");break;case"bottom":J.baseline.push("top");break;default:J.baseline.push(pe[0])}}if(Array.isArray(H))for(J.color=new Array(X),oe=0;oe<X;oe++)J.color[oe]=H[oe];else J.color=H;if(t.isArrayOrTypedArray(K)||Array.isArray(te))for(J.font=new Array(X),oe=0;oe<X;oe++){var W=J.font[oe]={};W.size=t.isTypedArray(K)?K[oe]:Array.isArray(K)?r(K[oe])?K[oe]:0:K,W.family=Array.isArray(te)?te[oe]:te}else J.font={size:K,family:te};return J}function _(N){var G=N._length,U=N.marker,X={},I,B=t.isArrayOrTypedArray(U.symbol),j=t.isArrayOrTypedArray(U.color),H=t.isArrayOrTypedArray(U.line.color),K=t.isArrayOrTypedArray(U.opacity),te=t.isArrayOrTypedArray(U.size),J=t.isArrayOrTypedArray(U.line.width),oe;if(B||(oe=i.isOpenSymbol(U.symbol)),B||j||H||K){X.colors=new Array(G),X.borderColors=new Array(G);var ie=o(U,U.opacity,G),Q=o(U.line,U.opacity,G);if(!Array.isArray(Q[0])){var V=Q;for(Q=Array(G),I=0;I<G;I++)Q[I]=V}if(!Array.isArray(ie[0])){var se=ie;for(ie=Array(G),I=0;I<G;I++)ie[I]=se}for(X.colors=ie,X.borderColors=Q,I=0;I<G;I++){if(B){var re=U.symbol[I];oe=i.isOpenSymbol(re)}oe&&(Q[I]=ie[I].slice(),ie[I]=ie[I].slice(),ie[I][3]=0)}X.opacity=N.opacity}else oe?(X.color=l(U.color,"uint8"),X.color[3]=0,X.borderColor=l(U.color,"uint8")):(X.color=l(U.color,"uint8"),X.borderColor=l(U.line.color,"uint8")),X.opacity=N.opacity*U.opacity;if(B)for(X.markers=new Array(G),I=0;I<G;I++)X.markers[I]=S(U.symbol[I]);else X.marker=S(U.symbol);var ee=h(N),ae;if(te||J){var fe=X.sizes=new Array(G),de=X.borderSizes=new Array(G),pe=0,W;if(te){for(I=0;I<G;I++)fe[I]=ee(U.size[I]),pe+=fe[I];W=pe/G}else for(ae=ee(U.size),I=0;I<G;I++)fe[I]=ae;if(J)for(I=0;I<G;I++)de[I]=U.line.width[I]/2;else for(ae=U.line.width/2,I=0;I<G;I++)de[I]=ae;X.sizeAvg=W}else X.size=ee(U&&U.size||10),X.borderSizes=ee(U.line.width);return X}function T(N,G){var U=N.marker,X={};return G&&(G.marker&&G.marker.symbol?X=_(t.extendFlat({},U,G.marker)):G.marker&&(G.marker.size&&(X.size=G.marker.size/2),G.marker.color&&(X.colors=G.marker.color),G.marker.opacity!==void 0&&(X.opacity=G.marker.opacity))),X}function g(N,G,U){var X={};if(!U)return X;if(U.textfont){var I={opacity:1,text:G.text,texttemplate:G.texttemplate,textposition:G.textposition,textfont:t.extendFlat({},G.textfont)};U.textfont&&t.extendFlat(I.textfont,U.textfont),X=m(N,I)}return X}function A(N,G){var U={capSize:G.width*2,lineWidth:G.thickness,color:G.color};return G.copy_ystyle&&(U=N.error_y),U}var k=s.SYMBOL_SDF_SIZE,R=s.SYMBOL_SIZE,L=s.SYMBOL_STROKE,z={},E=f.symbolFuncs[0](R*.05);function S(N){if(N==="circle")return null;var G,U,X=f.symbolNumber(N),I=f.symbolFuncs[X%100],B=!!f.symbolNoDot[X%100],j=!!f.symbolNoFill[X%100],H=i.isDotSymbol(N);return z[N]?z[N]:(H&&!B?G=I(R*1.1)+E:G=I(R),U=n(G,{w:k,h:k,viewBox:[-R,-R,R,R],stroke:j?L:-L}),z[N]=U,U||null)}function C(N,G,U){var X=U.length,I=X/2,B,j;if(u.hasLines(G)&&I)if(G.line.shape==="hv"){for(B=[],j=0;j<I-1;j++)isNaN(U[j*2])||isNaN(U[j*2+1])?B.push(NaN,NaN,NaN,NaN):(B.push(U[j*2],U[j*2+1]),!isNaN(U[j*2+2])&&!isNaN(U[j*2+3])?B.push(U[j*2+2],U[j*2+1]):B.push(NaN,NaN));B.push(U[X-2],U[X-1])}else if(G.line.shape==="hvh"){for(B=[],j=0;j<I-1;j++)if(isNaN(U[j*2])||isNaN(U[j*2+1])||isNaN(U[j*2+2])||isNaN(U[j*2+3]))!isNaN(U[j*2])&&!isNaN(U[j*2+1])?B.push(U[j*2],U[j*2+1]):B.push(NaN,NaN),B.push(NaN,NaN);else{var H=(U[j*2]+U[j*2+2])/2;B.push(U[j*2],U[j*2+1],H,U[j*2+1],H,U[j*2+3])}B.push(U[X-2],U[X-1])}else if(G.line.shape==="vhv"){for(B=[],j=0;j<I-1;j++)if(isNaN(U[j*2])||isNaN(U[j*2+1])||isNaN(U[j*2+2])||isNaN(U[j*2+3]))!isNaN(U[j*2])&&!isNaN(U[j*2+1])?B.push(U[j*2],U[j*2+1]):B.push(NaN,NaN),B.push(NaN,NaN);else{var K=(U[j*2+1]+U[j*2+3])/2;B.push(U[j*2],U[j*2+1],U[j*2],K,U[j*2+2],K)}B.push(U[X-2],U[X-1])}else if(G.line.shape==="vh"){for(B=[],j=0;j<I-1;j++)isNaN(U[j*2])||isNaN(U[j*2+1])?B.push(NaN,NaN,NaN,NaN):(B.push(U[j*2],U[j*2+1]),!isNaN(U[j*2+2])&&!isNaN(U[j*2+3])?B.push(U[j*2],U[j*2+3]):B.push(NaN,NaN));B.push(U[X-2],U[X-1])}else B=U;var te=!1;for(j=0;j<B.length;j++)if(isNaN(B[j])){te=!0;break}var J=te||B.length>s.TOO_MANY_POINTS||u.hasMarkers(G)?"rect":"round";if(te&&G.connectgaps){var oe=B[0],ie=B[1];for(j=0;j<B.length;j+=2)isNaN(B[j])||isNaN(B[j+1])?(B[j]=oe,B[j+1]=ie):(oe=B[j],ie=B[j+1])}return{join:J,positions:B}}function D(N,G,U,X,I){var B=c.getComponentMethod("errorbars","makeComputeError"),j=a.getFromId(N,G.xaxis),H=a.getFromId(N,G.yaxis),K=U.length/2,te={};function J(oe,ie){var Q=ie._id.charAt(0),V=G["error_"+Q];if(V&&V.visible&&(ie.type==="linear"||ie.type==="log")){for(var se=B(V),re={x:0,y:1}[Q],ee={x:[0,1,2,3],y:[2,3,0,1]}[Q],ae=new Float64Array(4*K),fe=1/0,de=-1/0,pe=0,W=0;pe<K;pe++,W+=4){var ue=oe[pe];if(r(ue)){var me=U[pe*2+re],be=se(ue,pe),ke=be[0],Pe=be[1];if(r(ke)&&r(Pe)){var je=ue-ke,ze=ue+Pe;ae[W+ee[0]]=me-ie.c2l(je),ae[W+ee[1]]=ie.c2l(ze)-me,ae[W+ee[2]]=0,ae[W+ee[3]]=0,fe=Math.min(fe,ue-ke),de=Math.max(de,ue+Pe)}}}te[Q]={positions:U,errors:ae,_bnds:[fe,de]}}}return J(X,j),J(I,H),te}function F(N,G,U,X){var I=G._length,B={},j;if(u.hasMarkers(G)){var H=U.font,K=U.align,te=U.baseline;for(B.offset=new Array(I),j=0;j<I;j++){var J=X.sizes?X.sizes[j]:X.size,oe=Array.isArray(H)?H[j].size:H.size,ie=Array.isArray(K)?K.length>1?K[j]:K[0]:K,Q=Array.isArray(te)?te.length>1?te[j]:te[0]:te,V=d[ie],se=d[Q],re=J?J/.8+1:0,ee=-se*re-se*.5;B.offset[j]=[V*re/oe,ee/oe]}}return B}v.exports={style:b,markerStyle:_,markerSelection:T,linePositions:C,errorBarPositions:D,textPosition:F}},{"../../components/drawing":665,"../../components/fx/helpers":679,"../../constants/interactions":752,"../../lib":778,"../../lib/gl_format_color":774,"../../plots/cartesian/axis_ids":831,"../../registry":911,"../scatter/make_bubble_size_func":1204,"../scatter/subtypes":1212,"./constants":1241,"./helpers":1246,"color-normalize":125,"fast-isnumeric":241,"svg-path-sdf":574}],1243:[function(e,v,M){var r=e("../../lib"),n=e("../../registry"),l=e("./helpers"),c=e("./attributes"),t=e("../scatter/constants"),f=e("../scatter/subtypes"),a=e("../scatter/xy_defaults"),o=e("../scatter/period_defaults"),u=e("../scatter/marker_defaults"),h=e("../scatter/line_defaults"),i=e("../scatter/fillcolor_defaults"),s=e("../scatter/text_defaults");v.exports=function(d,y,b,m){function _(E,S){return r.coerce(d,y,c,E,S)}var T=d.marker?l.isOpenSymbol(d.marker.symbol):!1,g=f.isBubble(d),A=a(d,y,m,_);if(!A){y.visible=!1;return}o(d,y,m,_);var k=A<t.PTS_LINESONLY?"lines+markers":"lines";_("text"),_("hovertext"),_("hovertemplate"),_("mode",k),f.hasLines(y)&&(_("connectgaps"),h(d,y,b,m,_),_("line.shape")),f.hasMarkers(y)&&(u(d,y,b,m,_),_("marker.line.width",T||g?1:0)),f.hasText(y)&&(_("texttemplate"),s(d,y,m,_));var R=(y.line||{}).color,L=(y.marker||{}).color;_("fill"),y.fill!=="none"&&i(d,y,b,_);var z=n.getComponentMethod("errorbars","supplyDefaults");z(d,y,R||L||b,{axis:"y"}),z(d,y,R||L||b,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(y,_)}},{"../../lib":778,"../../registry":911,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/period_defaults":1207,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"../scatter/xy_defaults":1214,"./attributes":1239,"./helpers":1246}],1244:[function(e,v,M){var r=e("../../lib"),n=e("../../components/color"),l=e("../../constants/interactions").DESELECTDIM;function c(t){var f=t[0],a=f.trace,o=f.t,u=o._scene,h=o.index,i=u.selectBatch[h],s=u.unselectBatch[h],p=u.textOptions[h],d=u.textSelectedOptions[h]||{},y=u.textUnselectedOptions[h]||{},b=r.extendFlat({},p),m,_;if(i.length||s.length){var T=d.color,g=y.color,A=p.color,k=Array.isArray(A);for(b.color=new Array(a._length),m=0;m<i.length;m++)_=i[m],b.color[_]=T||(k?A[_]:A);for(m=0;m<s.length;m++){_=s[m];var R=k?A[_]:A;b.color[_]=g||(T?R:n.addOpacity(R,l))}}u.glText[h].update(b)}v.exports={styleTextSelection:c}},{"../../components/color":643,"../../constants/interactions":752,"../../lib":778}],1245:[function(e,v,M){var r=e("../scatter/format_labels");v.exports=function(l,c,t){var f=l.i;return"x"in l||(l.x=c._x[f]),"y"in l||(l.y=c._y[f]),r(l,c,t)}},{"../scatter/format_labels":1196}],1246:[function(e,v,M){var r=e("./constants");M.isOpenSymbol=function(n){return typeof n=="string"?r.OPEN_RE.test(n):n%200>100},M.isDotSymbol=function(n){return typeof n=="string"?r.DOT_RE.test(n):n>200}},{"./constants":1241}],1247:[function(e,v,M){var r=e("../../registry"),n=e("../../lib"),l=e("../scatter/get_trace_color");function c(f,a,o,u){var h=f.cd,i=h[0].t,s=h[0].trace,p=f.xa,d=f.ya,y=i.x,b=i.y,m=p.c2p(a),_=d.c2p(o),T=f.distance,g;if(i.tree){var A=p.p2c(m-T),k=p.p2c(m+T),R=d.p2c(_-T),L=d.p2c(_+T);u==="x"?g=i.tree.range(Math.min(A,k),Math.min(d._rl[0],d._rl[1]),Math.max(A,k),Math.max(d._rl[0],d._rl[1])):g=i.tree.range(Math.min(A,k),Math.min(R,L),Math.max(A,k),Math.max(R,L))}else g=i.ids;var z,E,S,C,D,F,N,G,U=T;if(u==="x")for(C=0;C<g.length;C++)E=y[g[C]],D=Math.abs(p.c2p(E)-m),D<U&&(U=D,F=d.c2p(b[g[C]])-_,G=Math.sqrt(D*D+F*F),z=g[C]);else for(C=g.length-1;C>-1;C--)E=y[g[C]],S=b[g[C]],D=p.c2p(E)-m,F=d.c2p(S)-_,N=Math.sqrt(D*D+F*F),N<U&&(U=G=N,z=g[C]);return f.index=z,f.distance=U,f.dxy=G,z===void 0?[f]:[t(f,y,b,s)]}function t(f,a,o,u){var h=f.xa,i=f.ya,s=f.distance,p=f.dxy,d=f.index,y={pointNumber:d,x:a[d],y:o[d]};y.tx=Array.isArray(u.text)?u.text[d]:u.text,y.htx=Array.isArray(u.hovertext)?u.hovertext[d]:u.hovertext,y.data=Array.isArray(u.customdata)?u.customdata[d]:u.customdata,y.tp=Array.isArray(u.textposition)?u.textposition[d]:u.textposition;var b=u.textfont;b&&(y.ts=n.isArrayOrTypedArray(b.size)?b.size[d]:b.size,y.tc=Array.isArray(b.color)?b.color[d]:b.color,y.tf=Array.isArray(b.family)?b.family[d]:b.family);var m=u.marker;m&&(y.ms=n.isArrayOrTypedArray(m.size)?m.size[d]:m.size,y.mo=n.isArrayOrTypedArray(m.opacity)?m.opacity[d]:m.opacity,y.mx=n.isArrayOrTypedArray(m.symbol)?m.symbol[d]:m.symbol,y.mc=n.isArrayOrTypedArray(m.color)?m.color[d]:m.color);var _=m&&m.line;_&&(y.mlc=Array.isArray(_.color)?_.color[d]:_.color,y.mlw=n.isArrayOrTypedArray(_.width)?_.width[d]:_.width);var T=m&&m.gradient;T&&T.type!=="none"&&(y.mgt=Array.isArray(T.type)?T.type[d]:T.type,y.mgc=Array.isArray(T.color)?T.color[d]:T.color);var g=h.c2p(y.x,!0),A=i.c2p(y.y,!0),k=y.mrc||1,R=u.hoverlabel;R&&(y.hbg=Array.isArray(R.bgcolor)?R.bgcolor[d]:R.bgcolor,y.hbc=Array.isArray(R.bordercolor)?R.bordercolor[d]:R.bordercolor,y.hts=n.isArrayOrTypedArray(R.font.size)?R.font.size[d]:R.font.size,y.htc=Array.isArray(R.font.color)?R.font.color[d]:R.font.color,y.htf=Array.isArray(R.font.family)?R.font.family[d]:R.font.family,y.hnl=n.isArrayOrTypedArray(R.namelength)?R.namelength[d]:R.namelength);var L=u.hoverinfo;L&&(y.hi=Array.isArray(L)?L[d]:L);var z=u.hovertemplate;z&&(y.ht=Array.isArray(z)?z[d]:z);var E={};E[f.index]=y;var S=u._origX,C=u._origY,D=n.extendFlat({},f,{color:l(u,y),x0:g-k,x1:g+k,xLabelVal:S?S[d]:y.x,y0:A-k,y1:A+k,yLabelVal:C?C[d]:y.y,cd:E,distance:s,spikeDistance:p,hovertemplate:y.ht});return y.htx?D.text=y.htx:y.tx?D.text=y.tx:u.text&&(D.text=u.text),n.fillText(y,u,D),r.getComponentMethod("errorbars","hoverInfo")(y,u,D),D}v.exports={hoverPoints:c,calcHover:t}},{"../../lib":778,"../../registry":911,"../scatter/get_trace_color":1197}],1248:[function(e,v,M){var r=e("./hover");v.exports={moduleType:"trace",name:"scattergl",basePlotModule:e("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../scatter/cross_trace_defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:r.hoverPoints,selectPoints:e("./select"),meta:{}}},{"../../plots/cartesian":841,"../scatter/cross_trace_defaults":1193,"../scatter/marker_colorbar":1205,"./attributes":1239,"./calc":1240,"./defaults":1243,"./format_labels":1245,"./hover":1247,"./plot":1249,"./select":1251}],1249:[function(e,v,M){var r=e("regl-scatter2d"),n=e("regl-line2d"),l=e("regl-error2d"),c=e("gl-text"),t=e("../../lib"),f=e("../../components/dragelement/helpers").selectMode,a=e("../../lib/prepare_regl"),o=e("../scatter/subtypes"),u=e("../scatter/link_traces"),h=e("./edit_style").styleTextSelection;function i(s,p,d){var y=s._size,b=s.width,m=s.height;return[y.l+p.domain[0]*y.w,y.b+d.domain[0]*y.h,b-y.r-(1-p.domain[1])*y.w,m-y.t-(1-d.domain[1])*y.h]}v.exports=function(p,d,y){if(y.length){var b=p._fullLayout,m=d._scene,_=d.xaxis,T=d.yaxis,g,A;if(m){var k=a(p,["ANGLE_instanced_arrays","OES_element_index_uint"]);if(!k){m.init();return}var R=m.count,L=b._glcanvas.data()[0].regl;if(u(p,d,y),m.dirty){if(m.error2d===!0&&(m.error2d=l(L)),m.line2d===!0&&(m.line2d=n(L)),m.scatter2d===!0&&(m.scatter2d=r(L,{constPointSize:!0})),m.fill2d===!0&&(m.fill2d=n(L)),m.glText===!0)for(m.glText=new Array(R),g=0;g<R;g++)m.glText[g]=new c(L);if(m.glText){if(R>m.glText.length){var z=R-m.glText.length;for(g=0;g<z;g++)m.glText.push(new c(L))}else if(R<m.glText.length){var E=m.glText.length-R,S=m.glText.splice(R,E);S.forEach(function(re){re.destroy()})}for(g=0;g<R;g++)m.glText[g].update(m.textOptions[g])}if(m.line2d&&(m.line2d.update(m.lineOptions),m.lineOptions=m.lineOptions.map(function(re){if(re&&re.positions){for(var ee=re.positions,ae=0;ae<ee.length&&(isNaN(ee[ae])||isNaN(ee[ae+1]));)ae+=2;for(var fe=ee.length-2;fe>ae&&(isNaN(ee[fe])||isNaN(ee[fe+1]));)fe-=2;re.positions=ee.slice(ae,fe+2)}return re}),m.line2d.update(m.lineOptions)),m.error2d){var C=(m.errorXOptions||[]).concat(m.errorYOptions||[]);m.error2d.update(C)}m.scatter2d&&m.scatter2d.update(m.markerOptions),m.fillOrder=t.repeat(null,R),m.fill2d&&(m.fillOptions=m.fillOptions.map(function(re,ee){var ae=y[ee];if(!(!re||!ae||!ae[0]||!ae[0].trace)){var fe=ae[0],de=fe.trace,pe=fe.t,W=m.lineOptions[ee],ue,me,be=[];de._ownfill&&be.push(ee),de._nexttrace&&be.push(ee+1),be.length&&(m.fillOrder[ee]=be);var ke=[],Pe=W&&W.positions||pe.positions,je,ze;if(de.fill==="tozeroy"){for(je=0;je<Pe.length&&isNaN(Pe[je+1]);)je+=2;for(ze=Pe.length-2;ze>je&&isNaN(Pe[ze+1]);)ze-=2;Pe[je+1]!==0&&(ke=[Pe[je],0]),ke=ke.concat(Pe.slice(je,ze+2)),Pe[ze+1]!==0&&(ke=ke.concat([Pe[ze],0]))}else if(de.fill==="tozerox"){for(je=0;je<Pe.length&&isNaN(Pe[je]);)je+=2;for(ze=Pe.length-2;ze>je&&isNaN(Pe[ze]);)ze-=2;Pe[je]!==0&&(ke=[0,Pe[je+1]]),ke=ke.concat(Pe.slice(je,ze+2)),Pe[ze]!==0&&(ke=ke.concat([0,Pe[ze+1]]))}else if(de.fill==="toself"||de.fill==="tonext"){for(ke=[],ue=0,me=0;me<Pe.length;me+=2)(isNaN(Pe[me])||isNaN(Pe[me+1]))&&(ke=ke.concat(Pe.slice(ue,me)),ke.push(Pe[ue],Pe[ue+1]),ue=me+2);ke=ke.concat(Pe.slice(ue)),ue&&ke.push(Pe[ue],Pe[ue+1])}else{var Ze=de._nexttrace;if(Ze){var tt=m.lineOptions[ee+1];if(tt){var Ce=tt.positions;if(de.fill==="tonexty"){for(ke=Pe.slice(),ee=Math.floor(Ce.length/2);ee--;){var Ae=Ce[ee*2],Ne=Ce[ee*2+1];isNaN(Ae)||isNaN(Ne)||ke.push(Ae,Ne)}re.fill=Ze.fillcolor}}}}if(de._prevtrace&&de._prevtrace.fill==="tonext"){var qe=m.lineOptions[ee-1].positions,At=ke.length/2;ue=At;var kt=[ue];for(me=0;me<qe.length;me+=2)(isNaN(qe[me])||isNaN(qe[me+1]))&&(kt.push(me/2+At+1),ue=me+2);ke=ke.concat(qe),re.hole=kt}return re.fillmode=de.fill,re.opacity=de.opacity,re.positions=ke,re}}),m.fill2d.update(m.fillOptions))}var D=b.dragmode,F=f(D),N=b.clickmode.indexOf("select")>-1;for(g=0;g<R;g++){var G=y[g][0],U=G.trace,X=G.t,I=X.index,B=U._length,j=X.x,H=X.y;if(U.selectedpoints||F||N){if(F||(F=!0),U.selectedpoints){var K=m.selectBatch[I]=t.selIndices2selPoints(U),te={};for(A=0;A<K.length;A++)te[K[A]]=1;var J=[];for(A=0;A<B;A++)te[A]||J.push(A);m.unselectBatch[I]=J}var oe=X.xpx=new Array(B),ie=X.ypx=new Array(B);for(A=0;A<B;A++)oe[A]=_.c2p(j[A]),ie[A]=T.c2p(H[A])}else X.xpx=X.ypx=null}if(F){if(m.select2d||(m.select2d=r(b._glcanvas.data()[1].regl)),m.scatter2d){var Q=new Array(R);for(g=0;g<R;g++)Q[g]=m.selectBatch[g].length||m.unselectBatch[g].length?m.markerUnselectedOptions[g]:{};m.scatter2d.update(Q)}m.select2d&&(m.select2d.update(m.markerOptions),m.select2d.update(m.markerSelectedOptions)),m.glText&&y.forEach(function(re){var ee=((re||[])[0]||{}).trace||{};o.hasText(ee)&&h(re)})}else m.scatter2d&&m.scatter2d.update(m.markerOptions);var V={viewport:i(b,_,T),range:[(_._rl||_.range)[0],(T._rl||T.range)[0],(_._rl||_.range)[1],(T._rl||T.range)[1]]},se=t.repeat(V,m.count);m.fill2d&&m.fill2d.update(se),m.line2d&&m.line2d.update(se),m.error2d&&m.error2d.update(se.concat(se)),m.scatter2d&&m.scatter2d.update(se),m.select2d&&m.select2d.update(se),m.glText&&m.glText.forEach(function(re){re.update(V)})}}}},{"../../components/dragelement/helpers":661,"../../lib":778,"../../lib/prepare_regl":791,"../scatter/link_traces":1203,"../scatter/subtypes":1212,"./edit_style":1244,"gl-text":352,"regl-error2d":534,"regl-line2d":535,"regl-scatter2d":537}],1250:[function(e,v,M){var r=e("../../lib");v.exports=function(l,c){var t=c._scene,f={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},a={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return c._scene||(t=c._scene={},t.init=function(){r.extendFlat(t,a,f)},t.init(),t.update=function(u){var h=r.repeat(u,t.count);if(t.fill2d&&t.fill2d.update(h),t.scatter2d&&t.scatter2d.update(h),t.line2d&&t.line2d.update(h),t.error2d&&t.error2d.update(h.concat(h)),t.select2d&&t.select2d.update(h),t.glText)for(var i=0;i<t.count;i++)t.glText[i].update(u)},t.draw=function(){for(var u=t.count,h=t.fill2d,i=t.error2d,s=t.line2d,p=t.scatter2d,d=t.glText,y=t.select2d,b=t.selectBatch,m=t.unselectBatch,_=0;_<u;_++){if(h&&t.fillOrder[_]&&h.draw(t.fillOrder[_]),s&&t.lineOptions[_]&&s.draw(_),i&&(t.errorXOptions[_]&&i.draw(_),t.errorYOptions[_]&&i.draw(_+u)),p&&t.markerOptions[_])if(m[_].length){var T=r.repeat([],t.count);T[_]=m[_],p.draw(T)}else b[_].length||p.draw(_);d[_]&&t.textOptions[_]&&d[_].render()}y&&y.draw(b),t.dirty=!1},t.destroy=function(){t.fill2d&&t.fill2d.destroy&&t.fill2d.destroy(),t.scatter2d&&t.scatter2d.destroy&&t.scatter2d.destroy(),t.error2d&&t.error2d.destroy&&t.error2d.destroy(),t.line2d&&t.line2d.destroy&&t.line2d.destroy(),t.select2d&&t.select2d.destroy&&t.select2d.destroy(),t.glText&&t.glText.forEach(function(u){u.destroy&&u.destroy()}),t.lineOptions=null,t.fillOptions=null,t.markerOptions=null,t.markerSelectedOptions=null,t.markerUnselectedOptions=null,t.errorXOptions=null,t.errorYOptions=null,t.textOptions=null,t.textSelectedOptions=null,t.textUnselectedOptions=null,t.selectBatch=null,t.unselectBatch=null,c._scene=null}),t.dirty||r.extendFlat(t,f),t}},{"../../lib":778}],1251:[function(e,v,M){var r=e("../scatter/subtypes"),n=e("./edit_style").styleTextSelection;v.exports=function(c,t){var f=c.cd,a=[],o=f[0].trace,u=f[0].t,h=o._length,i=u.x,s=u.y,p=u._scene,d=u.index;if(!p)return a;var y=r.hasText(o),b=r.hasMarkers(o),m=!b&&!y;if(o.visible!==!0||m)return a;var _=[],T=[];if(t!==!1&&!t.degenerate)for(var g=0;g<h;g++)t.contains([u.xpx[g],u.ypx[g]],!1,g,c)?(_.push(g),a.push({pointNumber:g,x:i[g],y:s[g]})):T.push(g);if(b){var A=p.scatter2d;if(!_.length&&!T.length){var k=new Array(p.count);k[d]=p.markerOptions[d],A.update.apply(A,k)}else if(!p.selectBatch[d].length&&!p.unselectBatch[d].length){var R=new Array(p.count);R[d]=p.markerUnselectedOptions[d],A.update.apply(A,R)}}return p.selectBatch[d]=_,p.unselectBatch[d]=T,y&&n(f),a}},{"../scatter/subtypes":1212,"./edit_style":1244}],1252:[function(e,v,M){var r=e("../../plots/template_attributes").hovertemplateAttrs,n=e("../../plots/template_attributes").texttemplateAttrs,l=e("../scattergeo/attributes"),c=e("../scatter/attributes"),t=e("../../plots/mapbox/layout_attributes"),f=e("../../plots/attributes"),a=e("../../components/colorscale/attributes"),o=e("../../lib/extend").extendFlat,u=e("../../plot_api/edit_types").overrideAll,h=l.line,i=l.marker;v.exports=u({lon:l.lon,lat:l.lat,mode:o({},c.mode,{dflt:"markers"}),text:o({},c.text,{}),texttemplate:n({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:o({},c.hovertext,{}),line:{color:h.color,width:h.width},connectgaps:c.connectgaps,marker:o({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:i.opacity,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode},a("marker")),fill:l.fill,fillcolor:c.fillcolor,textfont:t.layers.symbol.textfont,textposition:t.layers.symbol.textposition,below:{valType:"string"},selected:{marker:c.selected.marker},unselected:{marker:c.unselected.marker},hoverinfo:o({},f.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:r()},"calc","nested")},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/mapbox/layout_attributes":887,"../../plots/template_attributes":906,"../scatter/attributes":1187,"../scattergeo/attributes":1229}],1253:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../lib"),l=e("../../constants/numerical").BADNUM,c=e("../../lib/geojson_utils"),t=e("../../components/colorscale"),f=e("../../components/drawing"),a=e("../scatter/make_bubble_size_func"),o=e("../scatter/subtypes"),u=e("../../plots/mapbox/convert_text_opts"),h=e("../../components/fx/helpers").appendArrayPointValue,i=e("../../lib/svg_text_utils").NEWLINES,s=e("../../lib/svg_text_utils").BR_TAG_ALL;v.exports=function(g,A){var k=A[0].trace,R=k.visible===!0&&k._length!==0,L=k.fill!=="none",z=o.hasLines(k),E=o.hasMarkers(k),S=o.hasText(k),C=E&&k.marker.symbol==="circle",D=E&&k.marker.symbol!=="circle",F=p(),N=p(),G=p(),U=p(),X={fill:F,line:N,circle:G,symbol:U};if(!R)return X;var I;if((L||z)&&(I=c.calcTraceToLineCoords(A)),L&&(F.geojson=c.makePolygon(I),F.layout.visibility="visible",n.extendFlat(F.paint,{"fill-color":k.fillcolor})),z&&(N.geojson=c.makeLine(I),N.layout.visibility="visible",n.extendFlat(N.paint,{"line-width":k.line.width,"line-color":k.line.color,"line-opacity":k.opacity})),C){var B=d(A);G.geojson=B.geojson,G.layout.visibility="visible",n.extendFlat(G.paint,{"circle-color":B.mcc,"circle-radius":B.mrc,"circle-opacity":B.mo})}if((D||S)&&(U.geojson=y(A,g),n.extendFlat(U.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),D&&(n.extendFlat(U.layout,{"icon-size":k.marker.size/10}),"angle"in k.marker&&k.marker.angle!=="auto"&&n.extendFlat(U.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),U.layout["icon-allow-overlap"]=k.marker.allowoverlap,n.extendFlat(U.paint,{"icon-opacity":k.opacity*k.marker.opacity,"icon-color":k.marker.color})),S)){var j=(k.marker||{}).size,H=u(k.textposition,j);n.extendFlat(U.layout,{"text-size":k.textfont.size,"text-anchor":H.anchor,"text-offset":H.offset}),n.extendFlat(U.paint,{"text-color":k.textfont.color,"text-opacity":k.opacity})}return X};function p(){return{geojson:c.makeBlank(),layout:{visibility:"none"},paint:{}}}function d(T){var g=T[0].trace,A=g.marker,k=g.selectedpoints,R=n.isArrayOrTypedArray(A.color),L=n.isArrayOrTypedArray(A.size),z=n.isArrayOrTypedArray(A.opacity),E;function S(H){return g.opacity*H}function C(H){return H/2}var D;R&&(t.hasColorscale(g,"marker")?D=t.makeColorScaleFuncFromTrace(A):D=n.identity);var F;L&&(F=a(g));var N;z&&(N=function(H){var K=r(H)?+n.constrain(H,0,1):0;return S(K)});var G=[];for(E=0;E<T.length;E++){var U=T[E],X=U.lonlat;if(!_(X)){var I={};D&&(I.mcc=U.mcc=D(U.mc)),F&&(I.mrc=U.mrc=F(U.ms)),N&&(I.mo=N(U.mo)),k&&(I.selected=U.selected||0),G.push({type:"Feature",geometry:{type:"Point",coordinates:X},properties:I})}}var B;if(k)for(B=f.makeSelectedPointStyleFns(g),E=0;E<G.length;E++){var j=G[E].properties;B.selectedOpacityFn&&(j.mo=S(B.selectedOpacityFn(j))),B.selectedColorFn&&(j.mcc=B.selectedColorFn(j)),B.selectedSizeFn&&(j.mrc=B.selectedSizeFn(j))}return{geojson:{type:"FeatureCollection",features:G},mcc:R||B&&B.selectedColorFn?{type:"identity",property:"mcc"}:A.color,mrc:L||B&&B.selectedSizeFn?{type:"identity",property:"mrc"}:C(A.size),mo:z||B&&B.selectedOpacityFn?{type:"identity",property:"mo"}:S(A.opacity)}}function y(T,g){for(var A=g._fullLayout,k=T[0].trace,R=k.marker||{},L=R.symbol,z=R.angle,E=L!=="circle"?b(L):m,S=z!=="auto"?b(z,!0):m,C=o.hasText(k)?b(k.text):m,D=[],F=0;F<T.length;F++){var N=T[F];if(!_(N.lonlat)){var G=k.texttemplate,U;if(G){var X=Array.isArray(G)?G[F]||"":G,I=k._module.formatLabels(N,k,A),B={};h(B,k,N.i);var j=k._meta||{};U=n.texttemplateString(X,I,A._d3locale,B,N,j)}else U=C(F);U&&(U=U.replace(i,"").replace(s,`
`)),D.push({type:"Feature",geometry:{type:"Point",coordinates:N.lonlat},properties:{symbol:E(F),angle:S(F),text:U}})}}return{type:"FeatureCollection",features:D}}function b(T,g){return n.isArrayOrTypedArray(T)?g?function(A){return r(T[A])?+T[A]:0}:function(A){return T[A]}:T?function(){return T}:m}function m(){return""}function _(T){return T[0]===l}},{"../../components/colorscale":655,"../../components/drawing":665,"../../components/fx/helpers":679,"../../constants/numerical":753,"../../lib":778,"../../lib/geojson_utils":772,"../../lib/svg_text_utils":803,"../../plots/mapbox/convert_text_opts":884,"../scatter/make_bubble_size_func":1204,"../scatter/subtypes":1212,"fast-isnumeric":241}],1254:[function(e,v,M){var r=e("../../lib"),n=e("../scatter/subtypes"),l=e("../scatter/marker_defaults"),c=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),f=e("../scatter/fillcolor_defaults"),a=e("./attributes");v.exports=function(h,i,s,p){function d(m,_){return r.coerce(h,i,a,m,_)}var y=o(h,i,d);if(!y){i.visible=!1;return}if(d("text"),d("texttemplate"),d("hovertext"),d("hovertemplate"),d("mode"),d("below"),n.hasLines(i)&&(c(h,i,s,p,d,{noDash:!0}),d("connectgaps")),n.hasMarkers(i)){l(h,i,s,p,d,{noLine:!0}),d("marker.allowoverlap"),d("marker.angle");var b=i.marker;b.symbol!=="circle"&&(r.isArrayOrTypedArray(b.size)&&(b.size=b.size[0]),r.isArrayOrTypedArray(b.color)&&(b.color=b.color[0]))}n.hasText(i)&&t(h,i,p,d,{noSelect:!0}),d("fill"),i.fill!=="none"&&f(h,i,s,d),r.coerceSelectionMarkerOpacity(i,d)};function o(u,h,i){var s=i("lon")||[],p=i("lat")||[],d=Math.min(s.length,p.length);return h._length=d,d}},{"../../lib":778,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1252}],1255:[function(e,v,M){v.exports=function(n,l){return n.lon=l.lon,n.lat=l.lat,n}},{}],1256:[function(e,v,M){var r=e("../../plots/cartesian/axes");v.exports=function(l,c,t){var f={},a=t[c.subplot]._subplot,o=a.mockAxis,u=l.lonlat;return f.lonLabel=r.tickText(o,o.c2l(u[0]),!0).text,f.latLabel=r.tickText(o,o.c2l(u[1]),!0).text,f}},{"../../plots/cartesian/axes":828}],1257:[function(e,v,M){var r=e("../../components/fx"),n=e("../../lib"),l=e("../scatter/get_trace_color"),c=n.fillText,t=e("../../constants/numerical").BADNUM;v.exports=function(o,u,h){var i=o.cd,s=i[0].trace,p=o.xa,d=o.ya,y=o.subplot,b=u>=0?Math.floor((u+180)/360):Math.ceil((u-180)/360),m=b*360,_=u-m;function T(C){var D=C.lonlat;if(D[0]===t)return 1/0;var F=n.modHalf(D[0],360),N=D[1],G=y.project([F,N]),U=G.x-p.c2p([_,N]),X=G.y-d.c2p([F,h]),I=Math.max(3,C.mrc||0);return Math.max(Math.sqrt(U*U+X*X)-I,1-3/I)}if(r.getClosest(i,T,o),o.index!==!1){var g=i[o.index],A=g.lonlat,k=[n.modHalf(A[0],360)+m,A[1]],R=p.c2p(k),L=d.c2p(k),z=g.mrc||1;o.x0=R-z,o.x1=R+z,o.y0=L-z,o.y1=L+z;var E={};E[s.subplot]={_subplot:y};var S=s._module.formatLabels(g,s,E);return o.lonLabel=S.lonLabel,o.latLabel=S.latLabel,o.color=l(s,g),o.extraText=f(s,g,i[0].t.labels),o.hovertemplate=s.hovertemplate,[o]}};function f(a,o,u){if(a.hovertemplate)return;var h=o.hi||a.hoverinfo,i=h.split("+"),s=i.indexOf("all")!==-1,p=i.indexOf("lon")!==-1,d=i.indexOf("lat")!==-1,y=o.lonlat,b=[];function m(_){return _+"°"}return s||p&&d?b.push("("+m(y[0])+", "+m(y[1])+")"):p?b.push(u.lon+m(y[0])):d&&b.push(u.lat+m(y[1])),(s||i.indexOf("text")!==-1)&&c(o,a,b),b.join("<br>")}},{"../../components/fx":683,"../../constants/numerical":753,"../../lib":778,"../scatter/get_trace_color":1197}],1258:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("../scattergeo/calc"),plot:e("./plot"),hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),styleOnSelect:function(r,n){if(n){var l=n[0].trace;l._glTrace.update(n)}},moduleType:"trace",name:"scattermapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":885,"../scatter/marker_colorbar":1205,"../scattergeo/calc":1230,"./attributes":1252,"./defaults":1254,"./event_data":1255,"./format_labels":1256,"./hover":1257,"./plot":1259,"./select":1260}],1259:[function(e,v,M){var r=e("./convert"),n=e("../../plots/mapbox/constants").traceLayerPrefix,l=["fill","line","circle","symbol"];function c(f,a){this.type="scattermapbox",this.subplot=f,this.uid=a,this.sourceIds={fill:"source-"+a+"-fill",line:"source-"+a+"-line",circle:"source-"+a+"-circle",symbol:"source-"+a+"-symbol"},this.layerIds={fill:n+a+"-fill",line:n+a+"-line",circle:n+a+"-circle",symbol:n+a+"-symbol"},this.below=null}var t=c.prototype;t.addSource=function(f,a){this.subplot.map.addSource(this.sourceIds[f],{type:"geojson",data:a.geojson})},t.setSourceData=function(f,a){this.subplot.map.getSource(this.sourceIds[f]).setData(a.geojson)},t.addLayer=function(f,a,o){this.subplot.addLayer({type:f,id:this.layerIds[f],source:this.sourceIds[f],layout:a.layout,paint:a.paint},o)},t.update=function(a){var o=this.subplot,u=o.map,h=r(o.gd,a),i=o.belowLookup["trace-"+this.uid],s,p,d;if(i!==this.below){for(s=l.length-1;s>=0;s--)p=l[s],u.removeLayer(this.layerIds[p]);for(s=0;s<l.length;s++)p=l[s],d=h[p],this.addLayer(p,d,i);this.below=i}for(s=0;s<l.length;s++)p=l[s],d=h[p],o.setOptions(this.layerIds[p],"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&(this.setSourceData(p,d),o.setOptions(this.layerIds[p],"setPaintProperty",d.paint));a[0].trace._glTrace=this},t.dispose=function(){for(var a=this.subplot.map,o=l.length-1;o>=0;o--){var u=l[o];a.removeLayer(this.layerIds[u]),a.removeSource(this.sourceIds[u])}},v.exports=function(a,o){for(var u=o[0].trace,h=new c(a,u.uid),i=r(a.gd,o),s=h.below=a.belowLookup["trace-"+u.uid],p=0;p<l.length;p++){var d=l[p],y=i[d];h.addSource(d,y),h.addLayer(d,y,s)}return o[0].trace._glTrace=h,h}},{"../../plots/mapbox/constants":883,"./convert":1253}],1260:[function(e,v,M){var r=e("../../lib"),n=e("../scatter/subtypes"),l=e("../../constants/numerical").BADNUM;v.exports=function(t,f){var a=t.cd,o=t.xaxis,u=t.yaxis,h=[],i=a[0].trace,s;if(!n.hasMarkers(i))return[];if(f===!1)for(s=0;s<a.length;s++)a[s].selected=0;else for(s=0;s<a.length;s++){var p=a[s],d=p.lonlat;if(d[0]!==l){var y=[r.modHalf(d[0],360),d[1]],b=[o.c2p(y),u.c2p(y)];f.contains(b,null,s,t)?(h.push({pointNumber:s,lon:d[0],lat:d[1]}),p.selected=1):p.selected=0}}return h}},{"../../constants/numerical":753,"../../lib":778,"../scatter/subtypes":1212}],1261:[function(e,v,M){var r=e("../../plots/template_attributes").hovertemplateAttrs,n=e("../../plots/template_attributes").texttemplateAttrs,l=e("../../lib/extend").extendFlat,c=e("../scatter/attributes"),t=e("../../plots/attributes"),f=c.line;v.exports={mode:c.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:c.text,texttemplate:n({editType:"plot"},{keys:["r","theta","text"]}),hovertext:c.hovertext,line:{color:f.color,width:f.width,dash:f.dash,shape:l({},f.shape,{values:["linear","spline"]}),smoothing:f.smoothing,editType:"calc"},connectgaps:c.connectgaps,marker:c.marker,cliponaxis:l({},c.cliponaxis,{dflt:!1}),textposition:c.textposition,textfont:c.textfont,fill:l({},c.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:c.fillcolor,hoverinfo:l({},t.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:c.hoveron,hovertemplate:r(),selected:c.selected,unselected:c.unselected}},{"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1262:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../../constants/numerical").BADNUM,l=e("../../plots/cartesian/axes"),c=e("../scatter/colorscale_calc"),t=e("../scatter/arrays_to_calcdata"),f=e("../scatter/calc_selection"),a=e("../scatter/calc").calcMarkerSize;v.exports=function(u,h){for(var i=u._fullLayout,s=h.subplot,p=i[s].radialaxis,d=i[s].angularaxis,y=p.makeCalcdata(h,"r"),b=d.makeCalcdata(h,"theta"),m=h._length,_=new Array(m),T=0;T<m;T++){var g=y[T],A=b[T],k=_[T]={};r(g)&&r(A)?(k.r=g,k.theta=A):k.r=n}var R=a(h,m);return h._extremes.x=l.findExtremes(p,y,{ppad:R}),c(u,h),t(_,h),f(_,h),_}},{"../../constants/numerical":753,"../../plots/cartesian/axes":828,"../scatter/arrays_to_calcdata":1186,"../scatter/calc":1188,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1263:[function(e,v,M){var r=e("../../lib"),n=e("../scatter/subtypes"),l=e("../scatter/marker_defaults"),c=e("../scatter/line_defaults"),t=e("../scatter/line_shape_defaults"),f=e("../scatter/text_defaults"),a=e("../scatter/fillcolor_defaults"),o=e("../scatter/constants").PTS_LINESONLY,u=e("./attributes");function h(s,p,d,y){function b(T,g){return r.coerce(s,p,u,T,g)}var m=i(s,p,y,b);if(!m){p.visible=!1;return}b("thetaunit"),b("mode",m<o?"lines+markers":"lines"),b("text"),b("hovertext"),p.hoveron!=="fills"&&b("hovertemplate"),n.hasLines(p)&&(c(s,p,d,y,b),t(s,p,b),b("connectgaps")),n.hasMarkers(p)&&l(s,p,d,y,b,{gradient:!0}),n.hasText(p)&&(b("texttemplate"),f(s,p,y,b));var _=[];(n.hasMarkers(p)||n.hasText(p))&&(b("cliponaxis"),b("marker.maxdisplayed"),_.push("points")),b("fill"),p.fill!=="none"&&(a(s,p,d,b),n.hasLines(p)||t(s,p,b)),(p.fill==="tonext"||p.fill==="toself")&&_.push("fills"),b("hoveron",_.join("+")||"points"),r.coerceSelectionMarkerOpacity(p,b)}function i(s,p,d,y){var b=y("r"),m=y("theta"),_;if(b)m?_=Math.min(b.length,m.length):(_=b.length,y("theta0"),y("dtheta"));else{if(!m)return 0;_=p.theta.length,y("r0"),y("dr")}return p._length=_,_}v.exports={handleRThetaDefaults:i,supplyDefaults:h}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/line_shape_defaults":1202,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1261}],1264:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/cartesian/axes");v.exports=function(c,t,f){var a={},o=f[t.subplot]._subplot,u,h;o?(u=o.radialAxis,h=o.angularAxis):(o=f[t.subplot],u=o.radialaxis,h=o.angularaxis);var i=u.c2l(c.r);a.rLabel=n.tickText(u,i,!0).text;var s=h.thetaunit==="degrees"?r.rad2deg(c.theta):c.theta;return a.thetaLabel=n.tickText(h,s,!0).text,a}},{"../../lib":778,"../../plots/cartesian/axes":828}],1265:[function(e,v,M){var r=e("../scatter/hover");function n(c,t,f,a){var o=r(c,t,f,a);if(!(!o||o[0].index===!1)){var u=o[0];if(u.index===void 0)return o;var h=c.subplot,i=u.cd[u.index],s=u.trace;if(h.isPtInside(i))return u.xLabelVal=void 0,u.yLabelVal=void 0,l(i,s,h,u),u.hovertemplate=s.hovertemplate,o}}function l(c,t,f,a){var o=f.radialAxis,u=f.angularAxis;o._hovertitle="r",u._hovertitle="θ";var h={};h[t.subplot]={_subplot:f};var i=t._module.formatLabels(c,t,h);a.rLabel=i.rLabel,a.thetaLabel=i.thetaLabel;var s=c.hi||t.hoverinfo,p=[];function d(b,m){p.push(b._hovertitle+": "+m)}if(!t.hovertemplate){var y=s.split("+");y.indexOf("all")!==-1&&(y=["r","theta","text"]),y.indexOf("r")!==-1&&d(o,a.rLabel),y.indexOf("theta")!==-1&&d(u,a.thetaLabel),y.indexOf("text")!==-1&&a.text&&(p.push(a.text),delete a.text),a.extraText=p.join("<br>")}}v.exports={hoverPoints:n,makeHoverPointText:l}},{"../scatter/hover":1198}],1266:[function(e,v,M){v.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scatter/select"),meta:{}}},{"../../plots/polar":894,"../scatter/marker_colorbar":1205,"../scatter/select":1209,"../scatter/style":1211,"./attributes":1261,"./calc":1262,"./defaults":1263,"./format_labels":1264,"./hover":1265,"./plot":1267}],1267:[function(e,v,M){var r=e("../scatter/plot"),n=e("../../constants/numerical").BADNUM;v.exports=function(c,t,f){for(var a=t.layers.frontplot.select("g.scatterlayer"),o={xaxis:t.xaxis,yaxis:t.yaxis,plot:t.framework,layerClipId:t._hasClipOnAxisFalse?t.clipIds.forTraces:null},u=t.radialAxis,h=t.angularAxis,i=0;i<f.length;i++)for(var s=f[i],p=0;p<s.length;p++){var d=s[p],y=d.r;if(y===n)d.x=d.y=n;else{var b=u.c2g(y),m=h.c2g(d.theta);d.x=b*Math.cos(m),d.y=b*Math.sin(m)}}r(c,o,f,a)}},{"../../constants/numerical":753,"../scatter/plot":1208}],1268:[function(e,v,M){var r=e("../scatterpolar/attributes"),n=e("../scattergl/attributes"),l=e("../../plots/template_attributes").texttemplateAttrs;v.exports={mode:r.mode,r:r.r,theta:r.theta,r0:r.r0,dr:r.dr,theta0:r.theta0,dtheta:r.dtheta,thetaunit:r.thetaunit,text:r.text,texttemplate:l({editType:"plot"},{keys:["r","theta","text"]}),hovertext:r.hovertext,hovertemplate:r.hovertemplate,line:n.line,connectgaps:n.connectgaps,marker:n.marker,fill:n.fill,fillcolor:n.fillcolor,textposition:n.textposition,textfont:n.textfont,hoverinfo:r.hoverinfo,selected:r.selected,unselected:r.unselected}},{"../../plots/template_attributes":906,"../scattergl/attributes":1239,"../scatterpolar/attributes":1261}],1269:[function(e,v,M){var r=e("../scatter/colorscale_calc"),n=e("../scatter/calc").calcMarkerSize,l=e("../scattergl/convert"),c=e("../../plots/cartesian/axes"),t=e("../scattergl/constants").TOO_MANY_POINTS;v.exports=function(a,o){var u=a._fullLayout,h=o.subplot,i=u[h].radialaxis,s=u[h].angularaxis,p=o._r=i.makeCalcdata(o,"r"),d=o._theta=s.makeCalcdata(o,"theta"),y=o._length,b={};y<p.length&&(p=p.slice(0,y)),y<d.length&&(d=d.slice(0,y)),b.r=p,b.theta=d,r(a,o);var m=b.opts=l.style(a,o),_;return y<t?_=n(o,y):m.marker&&(_=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),o._extremes.x=c.findExtremes(i,p,{ppad:_}),[{x:!1,y:!1,t:b,trace:o}]}},{"../../plots/cartesian/axes":828,"../scatter/calc":1188,"../scatter/colorscale_calc":1190,"../scattergl/constants":1241,"../scattergl/convert":1242}],1270:[function(e,v,M){var r=e("../../lib"),n=e("../scatter/subtypes"),l=e("../scatterpolar/defaults").handleRThetaDefaults,c=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),f=e("../scatter/text_defaults"),a=e("../scatter/fillcolor_defaults"),o=e("../scatter/constants").PTS_LINESONLY,u=e("./attributes");v.exports=function(i,s,p,d){function y(m,_){return r.coerce(i,s,u,m,_)}var b=l(i,s,d,y);if(!b){s.visible=!1;return}y("thetaunit"),y("mode",b<o?"lines+markers":"lines"),y("text"),y("hovertext"),s.hoveron!=="fills"&&y("hovertemplate"),n.hasLines(s)&&(t(i,s,p,d,y),y("connectgaps")),n.hasMarkers(s)&&c(i,s,p,d,y),n.hasText(s)&&(y("texttemplate"),f(i,s,d,y)),y("fill"),s.fill!=="none"&&a(i,s,p,y),r.coerceSelectionMarkerOpacity(s,y)}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"../scatterpolar/defaults":1263,"./attributes":1268}],1271:[function(e,v,M){var r=e("../scatterpolar/format_labels");v.exports=function(l,c,t){var f=l.i;return"r"in l||(l.r=c._r[f]),"theta"in l||(l.theta=c._theta[f]),r(l,c,t)}},{"../scatterpolar/format_labels":1264}],1272:[function(e,v,M){var r=e("../scattergl/hover"),n=e("../scatterpolar/hover").makeHoverPointText;function l(c,t,f,a){var o=c.cd,u=o[0].t,h=u.r,i=u.theta,s=r.hoverPoints(c,t,f,a);if(!(!s||s[0].index===!1)){var p=s[0];if(p.index===void 0)return s;var d=c.subplot,y=p.cd[p.index],b=p.trace;if(y.r=h[p.index],y.theta=i[p.index],!!d.isPtInside(y))return p.xLabelVal=void 0,p.yLabelVal=void 0,n(y,b,d,p),s}}v.exports={hoverPoints:l}},{"../scattergl/hover":1247,"../scatterpolar/hover":1265}],1273:[function(e,v,M){v.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scattergl/select"),meta:{}}},{"../../plots/polar":894,"../scatter/marker_colorbar":1205,"../scattergl/select":1251,"./attributes":1268,"./calc":1269,"./defaults":1270,"./format_labels":1271,"./hover":1272,"./plot":1274}],1274:[function(e,v,M){var r=e("@plotly/point-cluster"),n=e("fast-isnumeric"),l=e("../scattergl/plot"),c=e("../scattergl/scene_update"),t=e("../scattergl/convert"),f=e("../../lib"),a=e("../scattergl/constants").TOO_MANY_POINTS;v.exports=function(u,h,i){if(i.length){var s=h.radialAxis,p=h.angularAxis,d=c(u,h);return i.forEach(function(y){if(!(!y||!y[0]||!y[0].trace)){var b=y[0],m=b.trace,_=b.t,T=m._length,g=_.r,A=_.theta,k=_.opts,R,L=g.slice(),z=A.slice();for(R=0;R<g.length;R++)h.isPtInside({r:g[R],theta:A[R]})||(L[R]=NaN,z[R]=NaN);var E=new Array(T*2),S=Array(T),C=Array(T);for(R=0;R<T;R++){var D=L[R],F,N;if(n(D)){var G=s.c2g(D),U=p.c2g(z[R],m.thetaunit);F=G*Math.cos(U),N=G*Math.sin(U)}else F=N=NaN;S[R]=E[R*2]=F,C[R]=E[R*2+1]=N}_.tree=r(E),k.marker&&T>=a&&(k.marker.cluster=_.tree),k.marker&&(k.markerSel.positions=k.markerUnsel.positions=k.marker.positions=E),k.line&&E.length>1&&f.extendFlat(k.line,t.linePositions(u,m,E)),k.text&&(f.extendFlat(k.text,{positions:E},t.textPosition(u,m,k.text,k.marker)),f.extendFlat(k.textSel,{positions:E},t.textPosition(u,m,k.text,k.markerSel)),f.extendFlat(k.textUnsel,{positions:E},t.textPosition(u,m,k.text,k.markerUnsel))),k.fill&&!d.fill2d&&(d.fill2d=!0),k.marker&&!d.scatter2d&&(d.scatter2d=!0),k.line&&!d.line2d&&(d.line2d=!0),k.text&&!d.glText&&(d.glText=!0),d.lineOptions.push(k.line),d.fillOptions.push(k.fill),d.markerOptions.push(k.marker),d.markerSelectedOptions.push(k.markerSel),d.markerUnselectedOptions.push(k.markerUnsel),d.textOptions.push(k.text),d.textSelectedOptions.push(k.textSel),d.textUnselectedOptions.push(k.textUnsel),d.selectBatch.push([]),d.unselectBatch.push([]),_.x=S,_.y=C,_.rawx=S,_.rawy=C,_.r=g,_.theta=A,_.positions=E,_._scene=d,_.index=d.count,d.count++}}),l(u,h,i)}}},{"../../lib":778,"../scattergl/constants":1241,"../scattergl/convert":1242,"../scattergl/plot":1249,"../scattergl/scene_update":1250,"@plotly/point-cluster":57,"fast-isnumeric":241}],1275:[function(e,v,M){var r=e("../../plots/template_attributes").hovertemplateAttrs,n=e("../../plots/template_attributes").texttemplateAttrs,l=e("../scatter/attributes"),c=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),f=e("../../components/drawing/attributes").dash,a=e("../../lib/extend").extendFlat,o=l.marker,u=l.line,h=o.line;v.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:a({},l.mode,{dflt:"markers"}),text:a({},l.text,{}),texttemplate:n({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:a({},l.hovertext,{}),line:{color:u.color,width:u.width,dash:f,shape:a({},u.shape,{values:["linear","spline"]}),smoothing:u.smoothing,editType:"calc"},connectgaps:l.connectgaps,cliponaxis:l.cliponaxis,fill:a({},l.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:l.fillcolor,marker:a({symbol:o.symbol,opacity:o.opacity,maxdisplayed:o.maxdisplayed,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,line:a({width:h.width,editType:"calc"},t("marker.line")),gradient:o.gradient,editType:"calc"},t("marker")),textfont:l.textfont,textposition:l.textposition,selected:l.selected,unselected:l.unselected,hoverinfo:a({},c.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:l.hoveron,hovertemplate:r()}},{"../../components/colorscale/attributes":650,"../../components/drawing/attributes":664,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1276:[function(e,v,M){var r=e("fast-isnumeric"),n=e("../scatter/colorscale_calc"),l=e("../scatter/arrays_to_calcdata"),c=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,f=["a","b","c"],a={a:["b","c"],b:["a","c"],c:["a","b"]};v.exports=function(u,h){var i=u._fullLayout[h.subplot],s=i.sum,p=h.sum||s,d={a:h.a,b:h.b,c:h.c},y,b,m,_,T,g;for(y=0;y<f.length;y++)if(m=f[y],!d[m]){for(T=d[a[m][0]],g=d[a[m][1]],_=new Array(T.length),b=0;b<T.length;b++)_[b]=p-T[b]-g[b];d[m]=_}var A=h._length,k=new Array(A),R,L,z,E,S,C;for(y=0;y<A;y++)R=d.a[y],L=d.b[y],z=d.c[y],r(R)&&r(L)&&r(z)?(R=+R,L=+L,z=+z,E=s/(R+L+z),E!==1&&(R*=E,L*=E,z*=E),C=R,S=z-L,k[y]={x:S,y:C,a:R,b:L,c:z}):k[y]={x:!1,y:!1};return t(h,A),n(u,h),l(k,h),c(k,h),k}},{"../scatter/arrays_to_calcdata":1186,"../scatter/calc":1188,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1277:[function(e,v,M){var r=e("../../lib"),n=e("../scatter/constants"),l=e("../scatter/subtypes"),c=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),f=e("../scatter/line_shape_defaults"),a=e("../scatter/text_defaults"),o=e("../scatter/fillcolor_defaults"),u=e("./attributes");v.exports=function(i,s,p,d){function y(k,R){return r.coerce(i,s,u,k,R)}var b=y("a"),m=y("b"),_=y("c"),T;if(b?(T=b.length,m?(T=Math.min(T,m.length),_&&(T=Math.min(T,_.length))):_?T=Math.min(T,_.length):T=0):m&&_&&(T=Math.min(m.length,_.length)),!T){s.visible=!1;return}s._length=T,y("sum"),y("text"),y("hovertext"),s.hoveron!=="fills"&&y("hovertemplate");var g=T<n.PTS_LINESONLY?"lines+markers":"lines";y("mode",g),l.hasLines(s)&&(t(i,s,p,d,y),f(i,s,y),y("connectgaps")),l.hasMarkers(s)&&c(i,s,p,d,y,{gradient:!0}),l.hasText(s)&&(y("texttemplate"),a(i,s,d,y));var A=[];(l.hasMarkers(s)||l.hasText(s))&&(y("cliponaxis"),y("marker.maxdisplayed"),A.push("points")),y("fill"),s.fill!=="none"&&(o(i,s,p,y),l.hasLines(s)||f(i,s,y)),(s.fill==="tonext"||s.fill==="toself")&&A.push("fills"),y("hoveron",A.join("+")||"points"),r.coerceSelectionMarkerOpacity(s,y)}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/line_shape_defaults":1202,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1275}],1278:[function(e,v,M){v.exports=function(n,l,c,t,f){if(l.xa&&(n.xaxis=l.xa),l.ya&&(n.yaxis=l.ya),t[f]){var a=t[f];n.a=a.a,n.b=a.b,n.c=a.c}else n.a=l.a,n.b=l.b,n.c=l.c;return n}},{}],1279:[function(e,v,M){var r=e("../../plots/cartesian/axes");v.exports=function(l,c,t){var f={},a=t[c.subplot]._subplot;return f.aLabel=r.tickText(a.aaxis,l.a,!0).text,f.bLabel=r.tickText(a.baxis,l.b,!0).text,f.cLabel=r.tickText(a.caxis,l.c,!0).text,f}},{"../../plots/cartesian/axes":828}],1280:[function(e,v,M){var r=e("../scatter/hover");v.exports=function(l,c,t,f){var a=r(l,c,t,f);if(!a||a[0].index===!1)return;var o=a[0];if(o.index===void 0){var u=1-o.y0/l.ya._length,h=l.xa._length,i=h*u/2,s=h-i;return o.x0=Math.max(Math.min(o.x0,s),i),o.x1=Math.max(Math.min(o.x1,s),i),a}var p=o.cd[o.index],d=o.trace,y=o.subplot;o.a=p.a,o.b=p.b,o.c=p.c,o.xLabelVal=void 0,o.yLabelVal=void 0;var b={};b[d.subplot]={_subplot:y};var m=d._module.formatLabels(p,d,b);o.aLabel=m.aLabel,o.bLabel=m.bLabel,o.cLabel=m.cLabel;var _=p.hi||d.hoverinfo,T=[];function g(k,R){T.push(k._hovertitle+": "+R)}if(!d.hovertemplate){var A=_.split("+");A.indexOf("all")!==-1&&(A=["a","b","c"]),A.indexOf("a")!==-1&&g(y.aaxis,o.aLabel),A.indexOf("b")!==-1&&g(y.baxis,o.bLabel),A.indexOf("c")!==-1&&g(y.caxis,o.cLabel)}return o.extraText=T.join("<br>"),o.hovertemplate=d.hovertemplate,a}},{"../scatter/hover":1198}],1281:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:e("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":907,"../scatter/marker_colorbar":1205,"../scatter/select":1209,"../scatter/style":1211,"./attributes":1275,"./calc":1276,"./defaults":1277,"./event_data":1278,"./format_labels":1279,"./hover":1280,"./plot":1282}],1282:[function(e,v,M){var r=e("../scatter/plot");v.exports=function(l,c,t){var f=c.plotContainer;f.select(".scatterlayer").selectAll("*").remove();var a={xaxis:c.xaxis,yaxis:c.yaxis,plot:f,layerClipId:c._hasClipOnAxisFalse?c.clipIdRelative:null},o=c.layers.frontplot.select("g.scatterlayer");r(l,a,t,o)}},{"../scatter/plot":1208}],1283:[function(e,v,M){var r=e("../scatter/attributes"),n=e("../../components/colorscale/attributes"),l=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../scattergl/attributes"),t=e("../../plots/cartesian/constants").idRegex,f=e("../../plot_api/plot_template").templatedArray,a=e("../../lib/extend").extendFlat,o=r.marker,u=o.line,h=a(n("marker.line",{editTypeOverride:"calc"}),{width:a({},u.width,{editType:"calc"}),editType:"calc"}),i=a(n("marker"),{symbol:o.symbol,size:a({},o.size,{editType:"markerSize"}),sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:o.opacity,colorbar:o.colorbar,line:h,editType:"calc"});i.color.editType=i.cmin.editType=i.cmax.editType="style";function s(p){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:t[p],editType:"plot"}}}v.exports={dimensions:f("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:a({},c.text,{}),hovertext:a({},c.hovertext,{}),hovertemplate:l(),marker:i,xaxes:s("x"),yaxes:s("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:c.selected.marker,editType:"calc"},unselected:{marker:c.unselected.marker,editType:"calc"},opacity:c.opacity}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834,"../../plots/template_attributes":906,"../scatter/attributes":1187,"../scattergl/attributes":1239}],1284:[function(e,v,M){var r=e("regl-line2d"),n=e("../../registry"),l=e("../../lib/prepare_regl"),c=e("../../plots/get_data").getModuleCalcData,t=e("../../plots/cartesian"),f=e("../../plots/cartesian/axis_ids").getFromId,a=e("../../plots/cartesian/axes").shouldShowZeroLine,o="splom";function u(y){var b=y._fullLayout,m=n.getModule(o),_=c(y.calcdata,m)[0],T=l(y,["ANGLE_instanced_arrays","OES_element_index_uint"]);T&&(b._hasOnlyLargeSploms&&s(y),m.plot(y,{},_))}function h(y){var b=y.calcdata,m=y._fullLayout;m._hasOnlyLargeSploms&&s(y);for(var _=0;_<b.length;_++){var T=b[_][0],g=T.trace,A=m._splomScenes[g.uid];g.type==="splom"&&A&&A.matrix&&i(y,g,A)}}function i(y,b,m){for(var _=m.matrixOptions.data.length,T=b._visibleDims,g=m.viewOpts.ranges=new Array(_),A=0;A<T.length;A++){var k=T[A],R=g[A]=new Array(4),L=f(y,b._diag[k][0]);L&&(R[0]=L.r2l(L.range[0]),R[2]=L.r2l(L.range[1]));var z=f(y,b._diag[k][1]);z&&(R[1]=z.r2l(z.range[0]),R[3]=z.r2l(z.range[1]))}m.selectBatch.length||m.unselectBatch.length?m.matrix.update({ranges:g},{ranges:g}):m.matrix.update({ranges:g})}function s(y){var b=y._fullLayout,m=b._glcanvas.data()[0].regl,_=b._splomGrid;_||(_=b._splomGrid=r(m)),_.update(p(y))}function p(y){var b=y._fullLayout,m=b._size,_=[0,0,b.width,b.height],T={},g;function A(U,X,I,B,j,H){var K=X[U+"color"],te=X[U+"width"],J=String(K+te);J in T?T[J].data.push(NaN,NaN,I,B,j,H):T[J]={data:[I,B,j,H],join:"rect",thickness:te,color:K,viewport:_,range:_,overlay:!1}}for(g in b._splomSubplots){var k=b._plots[g],R=k.xaxis,L=k.yaxis,z=R._gridVals,E=L._gridVals,S=m.b+L.domain[0]*m.h,C=-L._m,D=-C*L.r2l(L.range[0],L.calendar),F,N;if(R.showgrid)for(g=0;g<z.length;g++)F=R._offset+R.l2p(z[g].x),A("grid",R,F,S,F,S+L._length);if(L.showgrid)for(g=0;g<E.length;g++)N=S+D+C*E[g].x,A("grid",L,R._offset,N,R._offset+R._length,N);a(y,R,L)&&(F=R._offset+R.l2p(0),A("zeroline",R,F,S,F,S+L._length)),a(y,L,R)&&(N=S+D+0,A("zeroline",L,R._offset,N,R._offset+R._length,N))}var G=[];for(g in T)G.push(T[g]);return G}function d(y,b,m,_){var T={},g;if(_._splomScenes){for(g=0;g<y.length;g++){var A=y[g];A.type==="splom"&&(T[A.uid]=1)}for(g=0;g<m.length;g++){var k=m[g];if(!T[k.uid]){var R=_._splomScenes[k.uid];R&&R.destroy&&R.destroy(),_._splomScenes[k.uid]=null,delete _._splomScenes[k.uid]}}}Object.keys(_._splomScenes||{}).length===0&&delete _._splomScenes,_._splomGrid&&!b._hasOnlyLargeSploms&&_._hasOnlyLargeSploms&&(_._splomGrid.destroy(),_._splomGrid=null,delete _._splomGrid),t.clean(y,b,m,_)}v.exports={name:o,attr:t.attr,attrRegex:t.attrRegex,layoutAttributes:t.layoutAttributes,supplyLayoutDefaults:t.supplyLayoutDefaults,drawFramework:t.drawFramework,plot:u,drag:h,updateGrid:s,clean:d,updateFx:t.updateFx,toSVG:t.toSVG}},{"../../lib/prepare_regl":791,"../../plots/cartesian":841,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_ids":831,"../../plots/get_data":865,"../../registry":911,"regl-line2d":535}],1285:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/cartesian/axis_ids"),l=e("../scatter/calc").calcMarkerSize,c=e("../scatter/calc").calcAxisExpansion,t=e("../scatter/colorscale_calc"),f=e("../scattergl/convert").markerSelection,a=e("../scattergl/convert").markerStyle,o=e("./scene_update"),u=e("../../constants/numerical").BADNUM,h=e("../scattergl/constants").TOO_MANY_POINTS;v.exports=function(s,p){var d=p.dimensions,y=p._length,b={},m=b.cdata=[],_=b.data=[],T=p._visibleDims=[],g,A,k,R,L;function z(F,N){for(var G=F.makeCalcdata({v:N.values,vcalendar:p.calendar},"v"),U=0;U<G.length;U++)G[U]=G[U]===u?NaN:G[U];m.push(G),_.push(F.type==="log"?r.simpleMap(G,F.c2l):G)}for(g=0;g<d.length;g++)if(k=d[g],k.visible){if(R=n.getFromId(s,p._diag[g][0]),L=n.getFromId(s,p._diag[g][1]),R&&L&&R.type!==L.type){r.log("Skipping splom dimension "+g+" with conflicting axis types");continue}R?(z(R,k),L&&L.type==="category"&&(L._categories=R._categories.slice())):z(L,k),T.push(g)}t(s,p),r.extendFlat(b,a(p));var E=m.length,S=E*y>h,C;for(S?C=2*(b.sizeAvg||Math.max(b.size,3)):C=l(p,y),A=0;A<T.length;A++)g=T[A],k=d[g],R=n.getFromId(s,p._diag[g][0])||{},L=n.getFromId(s,p._diag[g][1])||{},c(s,p,R,L,m[A],m[A],C);var D=o(s,p);return D.matrix||(D.matrix=!0),D.matrixOptions=b,D.selectedOptions=f(p,p.selected),D.unselectedOptions=f(p,p.unselected),[{x:!1,y:!1,t:{},trace:p}]}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axis_ids":831,"../scatter/calc":1188,"../scatter/colorscale_calc":1190,"../scattergl/constants":1241,"../scattergl/convert":1242,"./scene_update":1292}],1286:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/array_container_defaults"),l=e("./attributes"),c=e("../scatter/subtypes"),t=e("../scatter/marker_defaults"),f=e("../parcoords/merge_length"),a=e("../scattergl/helpers").isOpenSymbol;v.exports=function(i,s,p,d){function y(R,L){return r.coerce(i,s,l,R,L)}var b=n(i,s,{name:"dimensions",handleItemDefaults:o}),m=y("diagonal.visible"),_=y("showupperhalf"),T=y("showlowerhalf"),g=f(s,b,"values");if(!g||!m&&!_&&!T){s.visible=!1;return}y("text"),y("hovertext"),y("hovertemplate"),t(i,s,p,d,y);var A=a(s.marker.symbol),k=c.isBubble(s);y("marker.line.width",A||k?1:0),u(i,s,d,y),r.coerceSelectionMarkerOpacity(s,y)};function o(h,i){function s(d,y){return r.coerce(h,i,l.dimensions,d,y)}s("label");var p=s("values");p&&p.length?s("visible"):i.visible=!1,s("axis.type"),s("axis.matches")}function u(h,i,s,p){var d=i.dimensions,y=d.length,b=i.showupperhalf,m=i.showlowerhalf,_=i.diagonal.visible,T,g,A=new Array(y),k=new Array(y);for(T=0;T<y;T++){var R=T?T+1:"";A[T]="x"+R,k[T]="y"+R}var L=p("xaxes",A),z=p("yaxes",k),E=i._diag=new Array(y);i._xaxes={},i._yaxes={};var S=[],C=[];function D(H,K,te,J){if(H){var oe=H.charAt(0),ie=s._splomAxes[oe];if(i["_"+oe+"axes"][H]=1,J.push(H),!(H in ie)){var Q=ie[H]={};te&&(Q.label=te.label||"",te.visible&&te.axis&&(te.axis.type&&(Q.type=te.axis.type),te.axis.matches&&(Q.matches=K)))}}}var F=!_&&!m,N=!_&&!b;for(i._axesDim={},T=0;T<y;T++){var G=d[T],U=T===0,X=T===y-1,I=U&&F||X&&N?void 0:L[T],B=U&&N||X&&F?void 0:z[T];D(I,B,G,S),D(B,I,G,C),E[T]=[I,B],i._axesDim[I]=T,i._axesDim[B]=T}for(T=0;T<S.length;T++)for(g=0;g<C.length;g++){var j=S[T]+C[g];(T>g&&b||T<g&&m||T===g&&(_||!m||!b))&&(s._splomSubplots[j]=1)}(!m||!_&&b&&m)&&(s._splomGridDflt.xside="bottom",s._splomGridDflt.yside="left")}},{"../../lib":778,"../../plots/array_container_defaults":823,"../parcoords/merge_length":1158,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scattergl/helpers":1246,"./attributes":1283}],1287:[function(e,v,M){var r=e("../../lib"),n=e("../scatter/colorscale_calc"),l=e("../scattergl/convert").markerStyle;v.exports=function(t,f){var a=f.trace,o=t._fullLayout._splomScenes[a.uid];if(o){n(t,a),r.extendFlat(o.matrixOptions,l(a));var u=r.extendFlat({},o.matrixOptions,o.viewOpts);o.matrix.update(u,null)}}},{"../../lib":778,"../scatter/colorscale_calc":1190,"../scattergl/convert":1242}],1288:[function(e,v,M){M.getDimIndex=function(n,l){for(var c=l._id,t=c.charAt(0),f={x:0,y:1}[t],a=n._visibleDims,o=0;o<a.length;o++){var u=a[o];if(n._diag[u][f]===c)return o}return!1}},{}],1289:[function(e,v,M){var r=e("./helpers"),n=e("../scattergl/hover").calcHover;function l(c,t,f){var a=c.cd,o=a[0].trace,u=c.scene,h=u.matrixOptions.cdata,i=c.xa,s=c.ya,p=i.c2p(t),d=s.c2p(f),y=c.distance,b=r.getDimIndex(o,i),m=r.getDimIndex(o,s);if(b===!1||m===!1)return[c];for(var _=h[b],T=h[m],g,A,k=y,R=0;R<_.length;R++){var L=_[R],z=T[R],E=i.c2p(L)-p,S=s.c2p(z)-d,C=Math.sqrt(E*E+S*S);C<k&&(k=A=C,g=R)}return c.index=g,c.distance=k,c.dxy=A,g===void 0?[c]:[n(c,_,T,o)]}v.exports={hoverPoints:l}},{"../scattergl/hover":1247,"./helpers":1288}],1290:[function(e,v,M){var r=e("../../registry"),n=e("../../components/grid");v.exports={moduleType:"trace",name:"splom",basePlotModule:e("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select"),editStyle:e("./edit_style"),meta:{}},r.register(n)},{"../../components/grid":687,"../../registry":911,"../scatter/marker_colorbar":1205,"./attributes":1283,"./base_plot":1284,"./calc":1285,"./defaults":1286,"./edit_style":1287,"./hover":1289,"./plot":1291,"./select":1293}],1291:[function(e,v,M){var r=e("regl-splom"),n=e("../../lib"),l=e("../../plots/cartesian/axis_ids"),c=e("../../components/dragelement/helpers").selectMode;v.exports=function(a,o,u){if(u.length)for(var h=0;h<u.length;h++)t(a,u[h][0])};function t(f,a){var o=f._fullLayout,u=o._size,h=a.trace,i=a.t,s=o._splomScenes[h.uid],p=s.matrixOptions,d=p.cdata,y=o._glcanvas.data()[0].regl,b=o.dragmode,m,_,T,g,A;if(d.length!==0){p.lower=h.showupperhalf,p.upper=h.showlowerhalf,p.diagonal=h.diagonal.visible;var k=h._visibleDims,R=d.length,L=s.viewOpts={};for(L.ranges=new Array(R),L.domains=new Array(R),A=0;A<k.length;A++){T=k[A];var z=L.ranges[A]=new Array(4),E=L.domains[A]=new Array(4);m=l.getFromId(f,h._diag[T][0]),m&&(z[0]=m._rl[0],z[2]=m._rl[1],E[0]=m.domain[0],E[2]=m.domain[1]),_=l.getFromId(f,h._diag[T][1]),_&&(z[1]=_._rl[0],z[3]=_._rl[1],E[1]=_.domain[0],E[3]=_.domain[1])}L.viewport=[u.l,u.b,u.w+u.l,u.h+u.b],s.matrix===!0&&(s.matrix=r(y));var S=o.clickmode.indexOf("select")>-1,C=c(b)||!!h.selectedpoints||S,D=!0;if(C){var F=h._length;if(h.selectedpoints){s.selectBatch=h.selectedpoints;var N=h.selectedpoints,G={};for(T=0;T<N.length;T++)G[N[T]]=!0;var U=[];for(T=0;T<F;T++)G[T]||U.push(T);s.unselectBatch=U}var X=i.xpx=new Array(R),I=i.ypx=new Array(R);for(A=0;A<k.length;A++){if(T=k[A],m=l.getFromId(f,h._diag[T][0]),m)for(X[A]=new Array(F),g=0;g<F;g++)X[A][g]=m.c2p(d[A][g]);if(_=l.getFromId(f,h._diag[T][1]),_)for(I[A]=new Array(F),g=0;g<F;g++)I[A][g]=_.c2p(d[A][g])}if(s.selectBatch.length||s.unselectBatch.length){var B=n.extendFlat({},p,s.unselectedOptions,L),j=n.extendFlat({},p,s.selectedOptions,L);s.matrix.update(B,j),D=!1}}else i.xpx=i.ypx=null;if(D){var H=n.extendFlat({},p,L);s.matrix.update(H,null)}}}},{"../../components/dragelement/helpers":661,"../../lib":778,"../../plots/cartesian/axis_ids":831,"regl-splom":539}],1292:[function(e,v,M){var r=e("../../lib");v.exports=function(l,c){var t=l._fullLayout,f=c.uid,a=t._splomScenes;a||(a=t._splomScenes={});var o={dirty:!0,selectBatch:[],unselectBatch:[]},u={matrix:!1,selectBatch:[],unselectBatch:[]},h=a[c.uid];return h||(h=a[f]=r.extendFlat({},o,u),h.draw=function(){h.matrix&&h.matrix.draw&&(h.selectBatch.length||h.unselectBatch.length?h.matrix.draw(h.unselectBatch,h.selectBatch):h.matrix.draw()),h.dirty=!1},h.destroy=function(){h.matrix&&h.matrix.destroy&&h.matrix.destroy(),h.matrixOptions=null,h.selectBatch=null,h.unselectBatch=null,h=null}),h.dirty||r.extendFlat(h,o),h}},{"../../lib":778}],1293:[function(e,v,M){var r=e("../../lib"),n=e("../scatter/subtypes"),l=e("./helpers");v.exports=function(t,f){var a=t.cd,o=a[0].trace,u=a[0].t,h=t.scene,i=h.matrixOptions.cdata,s=t.xaxis,p=t.yaxis,d=[];if(!h)return d;var y=!n.hasMarkers(o)&&!n.hasText(o);if(o.visible!==!0||y)return d;var b=l.getDimIndex(o,s),m=l.getDimIndex(o,p);if(b===!1||m===!1)return d;var _=u.xpx[b],T=u.ypx[m],g=i[b],A=i[m],k=[],R=[];if(f!==!1&&!f.degenerate)for(var L=0;L<g.length;L++)f.contains([_[L],T[L]],null,L,t)?(k.push(L),d.push({pointNumber:L,x:g[L],y:A[L]})):R.push(L);var z=h.matrixOptions;return!k.length&&!R.length?h.matrix.update(z,null):!h.selectBatch.length&&!h.unselectBatch.length&&h.matrix.update(h.unselectedOptions,r.extendFlat({},z,h.selectedOptions,h.viewOpts)),h.selectBatch=k,h.unselectBatch=R,d}},{"../../lib":778,"../scatter/subtypes":1212,"./helpers":1288}],1294:[function(e,v,M){var r=e("../../components/colorscale/attributes"),n=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../mesh3d/attributes"),c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,f={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:n({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),showlegend:t({},c.showlegend,{dflt:!1})};t(f,r("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var a=["opacity","lightposition","lighting"];a.forEach(function(o){f[o]=l[o]}),f.hoverinfo=t({},c.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),f.transforms=void 0,v.exports=f},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../mesh3d/attributes":1128}],1295:[function(e,v,M){var r=e("../../lib"),n=e("../../components/colorscale/calc");function l(a,o){o._len=Math.min(o.u.length,o.v.length,o.w.length,o.x.length,o.y.length,o.z.length),o._u=f(o.u,o._len),o._v=f(o.v,o._len),o._w=f(o.w,o._len),o._x=f(o.x,o._len),o._y=f(o.y,o._len),o._z=f(o.z,o._len);var u=c(o);o._gridFill=u.fill,o._Xs=u.Xs,o._Ys=u.Ys,o._Zs=u.Zs,o._len=u.len;var h=0,i,s,p;o.starts&&(i=f(o.starts.x||[]),s=f(o.starts.y||[]),p=f(o.starts.z||[]),h=Math.min(i.length,s.length,p.length)),o._startsX=i||[],o._startsY=s||[],o._startsZ=p||[];var d=0,y=1/0,b;for(b=0;b<o._len;b++){var m=o._u[b],_=o._v[b],T=o._w[b],g=Math.sqrt(m*m+_*_+T*T);d=Math.max(d,g),y=Math.min(y,g)}for(n(a,o,{vals:[y,d],containerStr:"",cLetter:"c"}),b=0;b<h;b++){var A=i[b];u.xMax=Math.max(u.xMax,A),u.xMin=Math.min(u.xMin,A);var k=s[b];u.yMax=Math.max(u.yMax,k),u.yMin=Math.min(u.yMin,k);var R=p[b];u.zMax=Math.max(u.zMax,R),u.zMin=Math.min(u.zMin,R)}o._slen=h,o._normMax=d,o._xbnds=[u.xMin,u.xMax],o._ybnds=[u.yMin,u.yMax],o._zbnds=[u.zMin,u.zMax]}function c(a){var o=a._x,u=a._y,h=a._z,i=a._len,s,p,d,y=-1/0,b=1/0,m=-1/0,_=1/0,T=-1/0,g=1/0,A="",k,R,L,z,E,S,C,D,F;for(i&&(z=o[0],S=u[0],D=h[0]),i>1&&(E=o[i-1],C=u[i-1],F=h[i-1]),s=0;s<i;s++)y=Math.max(y,o[s]),b=Math.min(b,o[s]),m=Math.max(m,u[s]),_=Math.min(_,u[s]),T=Math.max(T,h[s]),g=Math.min(g,h[s]),!k&&o[s]!==z&&(k=!0,A+="x"),!R&&u[s]!==S&&(R=!0,A+="y"),!L&&h[s]!==D&&(L=!0,A+="z");k||(A+="x"),R||(A+="y"),L||(A+="z");var N=t(a._x),G=t(a._y),U=t(a._z);A=A.replace("x",(z>E?"-":"+")+"x"),A=A.replace("y",(S>C?"-":"+")+"y"),A=A.replace("z",(D>F?"-":"+")+"z");var X=function(){i=0,N=[],G=[],U=[]};(!i||i<N.length*G.length*U.length)&&X();var I=function(W){return W==="x"?o:W==="y"?u:h},B=function(W){return W==="x"?N:W==="y"?G:U},j=function(W){return W[i-1]<W[0]?-1:1},H=I(A[1]),K=I(A[3]),te=I(A[5]),J=B(A[1]).length,oe=B(A[3]).length,ie=B(A[5]).length,Q=!1,V=function(W,ue,me){return J*(oe*W+ue)+me},se=j(I(A[1])),re=j(I(A[3])),ee=j(I(A[5]));for(s=0;s<ie-1;s++){for(p=0;p<oe-1;p++){for(d=0;d<J-1;d++){var ae=V(s,p,d),fe=V(s,p,d+1),de=V(s,p+1,d),pe=V(s+1,p,d);if((!(H[ae]*se<H[fe]*se)||!(K[ae]*re<K[de]*re)||!(te[ae]*ee<te[pe]*ee))&&(Q=!0),Q)break}if(Q)break}if(Q)break}return Q&&(r.warn("Encountered arbitrary coordinates! Unable to input data grid."),X()),{xMin:b,yMin:_,zMin:g,xMax:y,yMax:m,zMax:T,Xs:N,Ys:G,Zs:U,len:i,fill:A}}function t(a){return r.distinctVals(a).vals}function f(a,o){if(o===void 0&&(o=a.length),r.isTypedArray(a))return a.subarray(0,o);for(var u=[],h=0;h<o;h++)u[h]=+a[h];return u}v.exports={calc:l,filter:f,processGrid:c}},{"../../components/colorscale/calc":651,"../../lib":778}],1296:[function(e,v,M){var r=e("gl-streamtube3d"),n=r.createTubeMesh,l=e("../../lib"),c=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,f=e("../../plots/gl3d/zip3"),a={xaxis:0,yaxis:1,zaxis:2};function o(d,y){this.scene=d,this.uid=y,this.mesh=null,this.data=null}var u=o.prototype;u.handlePick=function(d){var y=this.scene.fullSceneLayout,b=this.scene.dataScale;function m(g,A){var k=y[A],R=b[a[A]];return k.l2c(g)/R}if(d.object===this.mesh){var _=d.data.position,T=d.data.velocity;return d.traceCoordinate=[m(_[0],"xaxis"),m(_[1],"yaxis"),m(_[2],"zaxis"),m(T[0],"xaxis"),m(T[1],"yaxis"),m(T[2],"zaxis"),d.data.intensity*this.data._normMax,d.data.divergence],d.textLabel=this.data.hovertext||this.data.text,!0}};function h(d){var y=d.length,b;return y>2?b=d.slice(1,y-1):y===2?b=[(d[0]+d[1])/2]:b=d,b}function i(d){var y=d.length;return y===1?[.5,.5]:[d[1]-d[0],d[y-1]-d[y-2]]}function s(d,y){var b=d.fullSceneLayout,m=d.dataScale,_=y._len,T={};function g(oe,ie){var Q=b[ie],V=m[a[ie]];return l.simpleMap(oe,function(se){return Q.d2l(se)*V})}if(T.vectors=f(g(y._u,"xaxis"),g(y._v,"yaxis"),g(y._w,"zaxis"),_),!_)return{positions:[],cells:[]};var A=g(y._Xs,"xaxis"),k=g(y._Ys,"yaxis"),R=g(y._Zs,"zaxis");T.meshgrid=[A,k,R],T.gridFill=y._gridFill;var L=y._slen;if(L)T.startingPositions=f(g(y._startsX,"xaxis"),g(y._startsY,"yaxis"),g(y._startsZ,"zaxis"));else{for(var z=k[0],E=h(A),S=h(R),C=new Array(E.length*S.length),D=0,F=0;F<E.length;F++)for(var N=0;N<S.length;N++)C[D++]=[E[F],z,S[N]];T.startingPositions=C}T.colormap=c(y),T.tubeSize=y.sizeref,T.maxLength=y.maxdisplayed;var G=g(y._xbnds,"xaxis"),U=g(y._ybnds,"yaxis"),X=g(y._zbnds,"zaxis"),I=i(A),B=i(k),j=i(R),H=[[G[0]-I[0],U[0]-B[0],X[0]-j[0]],[G[1]+I[1],U[1]+B[1],X[1]+j[1]]],K=r(T,H),te=t(y);K.vertexIntensityBounds=[te.min/y._normMax,te.max/y._normMax];var J=y.lightposition;return K.lightPosition=[J.x,J.y,J.z],K.ambient=y.lighting.ambient,K.diffuse=y.lighting.diffuse,K.specular=y.lighting.specular,K.roughness=y.lighting.roughness,K.fresnel=y.lighting.fresnel,K.opacity=y.opacity,y._pad=K.tubeScale*y.sizeref*2,K}u.update=function(d){this.data=d;var y=s(this.scene,d);this.mesh.update(y)},u.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function p(d,y){var b=d.glplot.gl,m=s(d,y),_=n(b,m),T=new o(d,y.uid);return T.mesh=_,T.data=y,_._trace=T,d.glplot.add(_),T}v.exports=p},{"../../components/colorscale":655,"../../lib":778,"../../lib/gl_format_color":774,"../../plots/gl3d/zip3":881,"gl-streamtube3d":348}],1297:[function(e,v,M){var r=e("../../lib"),n=e("../../components/colorscale/defaults"),l=e("./attributes");v.exports=function(t,f,a,o){function u(b,m){return r.coerce(t,f,l,b,m)}var h=u("u"),i=u("v"),s=u("w"),p=u("x"),d=u("y"),y=u("z");if(!h||!h.length||!i||!i.length||!s||!s.length||!p||!p.length||!d||!d.length||!y||!y.length){f.visible=!1;return}u("starts.x"),u("starts.y"),u("starts.z"),u("maxdisplayed"),u("sizeref"),u("lighting.ambient"),u("lighting.diffuse"),u("lighting.specular"),u("lighting.roughness"),u("lighting.fresnel"),u("lightposition.x"),u("lightposition.y"),u("lightposition.z"),n(t,f,o,u,{prefix:"",cLetter:"c"}),u("text"),u("hovertext"),u("hovertemplate"),f._length=null}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":1294}],1298:[function(e,v,M){v.exports={moduleType:"trace",name:"streamtube",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc").calc,plot:e("./convert"),eventData:function(r,n){return r.tubex=r.x,r.tubey=r.y,r.tubez=r.z,r.tubeu=n.traceCoordinate[3],r.tubev=n.traceCoordinate[4],r.tubew=n.traceCoordinate[5],r.norm=n.traceCoordinate[6],r.divergence=n.traceCoordinate[7],delete r.x,delete r.y,delete r.z,r},meta:{}}},{"../../plots/gl3d":870,"./attributes":1294,"./calc":1295,"./convert":1296,"./defaults":1297}],1299:[function(e,v,M){var r=e("../../plots/attributes"),n=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,c=e("../../components/colorscale/attributes"),t=e("../../plots/domain").attributes,f=e("../pie/attributes"),a=e("./constants"),o=e("../../lib/extend").extendFlat;v.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:o({colors:{valType:"data_array",editType:"calc"},line:{color:o({},f.marker.line.color,{dflt:null}),width:o({},f.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},c("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:f.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:l({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:f.hovertext,hoverinfo:o({},r.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:n({},{keys:a.eventDataKeys}),textfont:f.textfont,insidetextorientation:f.insidetextorientation,insidetextfont:f.insidetextfont,outsidetextfont:o({},f.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:f.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:t({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/template_attributes":906,"../pie/attributes":1161,"./constants":1302}],1300:[function(e,v,M){var r=e("../../plots/plots");M.name="sunburst",M.plot=function(n,l,c,t){r.plotBasePlot(M.name,n,l,c,t)},M.clean=function(n,l,c,t){r.cleanBasePlot(M.name,n,l,c,t)}},{"../../plots/plots":891}],1301:[function(e,v,M){var r=e("d3-hierarchy"),n=e("fast-isnumeric"),l=e("../../lib"),c=e("../../components/colorscale").makeColorScaleFuncFromTrace,t=e("../pie/calc").makePullColorFn,f=e("../pie/calc").generateExtendedColors,a=e("../../components/colorscale").calc,o=e("../../constants/numerical").ALMOST_EQUAL,u={},h={};M.calc=function(s,p){var d=s._fullLayout,y=p.ids,b=l.isArrayOrTypedArray(y),m=p.labels,_=p.parents,T=p.values,g=l.isArrayOrTypedArray(T),A=[],k={},R={},L=function(V,se){k[V]?k[V].push(se):k[V]=[se],R[se]=1},z=function(V){return V||typeof V=="number"},E=function(V){return!g||n(T[V])&&T[V]>=0},S,C,D;b?(S=Math.min(y.length,_.length),C=function(V){return z(y[V])&&E(V)},D=function(V){return String(y[V])}):(S=Math.min(m.length,_.length),C=function(V){return z(m[V])&&E(V)},D=function(V){return String(m[V])}),g&&(S=Math.min(S,T.length));for(var F=0;F<S;F++)if(C(F)){var N=D(F),G=z(_[F])?String(_[F]):"",U={i:F,id:N,pid:G,label:z(m[F])?String(m[F]):""};g&&(U.v=+T[F]),A.push(U),L(G,N)}if(k[""]){if(k[""].length>1){for(var B=l.randstr(),j=0;j<A.length;j++)A[j].pid===""&&(A[j].pid=B);A.unshift({hasMultipleRoots:!0,id:B,pid:"",label:""})}}else{var X=[],I;for(I in k)R[I]||X.push(I);if(X.length===1)I=X[0],A.unshift({hasImpliedRoot:!0,id:I,pid:"",label:I});else return l.warn(["Multiple implied roots, cannot build",p.type,"hierarchy of",p.name+".","These roots include:",X.join(", ")].join(" "))}var H;try{H=r.stratify().id(function(V){return V.id}).parentId(function(V){return V.pid})(A)}catch(V){return l.warn(["Failed to build",p.type,"hierarchy of",p.name+".","Error:",V.message].join(" "))}var K=r.hierarchy(H),te=!1;if(g)switch(p.branchvalues){case"remainder":K.sum(function(V){return V.data.v});break;case"total":K.each(function(V){var se=V.data.data,re=se.v;if(V.children){var ee=V.children.reduce(function(ae,fe){return ae+fe.data.data.v},0);if((se.hasImpliedRoot||se.hasMultipleRoots)&&(re=ee),re<ee*o)return te=!0,l.warn(["Total value for node",V.data.data.id,"of",p.name,"is smaller than the sum of its children.",`
parent value =`,re,`
children sum =`,ee].join(" "))}V.value=re});break}else i(K,p,{branches:p.count.indexOf("branches")!==-1,leaves:p.count.indexOf("leaves")!==-1});if(!te){p.sort&&K.sort(function(V,se){return se.value-V.value});var J,oe,ie=p.marker.colors||[],Q=!!ie.length;return p._hasColorscale?(Q||(ie=g?p.values:p._values),a(s,p,{vals:ie,containerStr:"marker",cLetter:"c"}),oe=c(p.marker)):J=t(d["_"+p.type+"colormap"]),K.each(function(V){var se=V.data.data;se.color=p._hasColorscale?oe(ie[se.i]):J(ie[se.i],se.id)}),A[0].hierarchy=K,A}},M._runCrossTraceCalc=function(s,p){var d=p._fullLayout,y=p.calcdata,b=d[s+"colorway"],m=d["_"+s+"colormap"];d["extend"+s+"colors"]&&(b=f(b,s==="treemap"?h:u));var _=0,T;function g(L){var z=L.data.data,E=z.id;z.color===!1&&(m[E]?z.color=m[E]:L.parent?L.parent.parent?z.color=L.parent.data.data.color:(m[E]=z.color=b[_%b.length],_++):z.color=T)}for(var A=0;A<y.length;A++){var k=y[A],R=k[0];R.trace.type===s&&R.hierarchy&&(T=R.trace.root.color,R.hierarchy.each(g))}},M.crossTraceCalc=function(s){return M._runCrossTraceCalc("sunburst",s)};function i(s,p,d){var y=0,b=s.children;if(b){for(var m=b.length,_=0;_<m;_++)y+=i(b[_],p,d);d.branches&&y++}else d.leaves&&y++;return s.value=s.data.data.value=y,p._values||(p._values=[]),p._values[s.data.data.i]=y,y}},{"../../components/colorscale":655,"../../constants/numerical":753,"../../lib":778,"../pie/calc":1163,"d3-hierarchy":161,"fast-isnumeric":241}],1302:[function(e,v,M){v.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1303:[function(e,v,M){var r=e("../../lib"),n=e("./attributes"),l=e("../../plots/domain").defaults,c=e("../bar/defaults").handleText,t=e("../../components/colorscale"),f=t.hasColorscale,a=t.handleDefaults;v.exports=function(u,h,i,s){function p(A,k){return r.coerce(u,h,n,A,k)}var d=p("labels"),y=p("parents");if(!d||!d.length||!y||!y.length){h.visible=!1;return}var b=p("values");b&&b.length?p("branchvalues"):p("count"),p("level"),p("maxdepth");var m=p("marker.line.width");m&&p("marker.line.color",s.paper_bgcolor),p("marker.colors");var _=h._hasColorscale=f(u,"marker","colors")||(u.marker||{}).coloraxis;_&&a(u,h,s,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",_?1:.7);var T=p("text");p("texttemplate"),h.texttemplate||p("textinfo",Array.isArray(T)?"text+label":"label"),p("hovertext"),p("hovertemplate");var g="auto";c(u,h,s,p,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("insidetextorientation"),p("sort"),p("rotation"),p("root.color"),l(h,s,p),h._length=null}},{"../../components/colorscale":655,"../../lib":778,"../../plots/domain":855,"../bar/defaults":925,"./attributes":1299}],1304:[function(e,v,M){var r=e("d3"),n=e("../../registry"),l=e("../../components/fx/helpers").appendArrayPointValue,c=e("../../components/fx"),t=e("../../lib"),f=e("../../lib/events"),a=e("./helpers"),o=e("../pie/helpers"),u=o.formatPieValue;v.exports=function(s,p,d,y,b){var m=y[0],_=m.trace,T=m.hierarchy,g=_.type==="sunburst",A=_.type==="treemap";"_hasHoverLabel"in _||(_._hasHoverLabel=!1),"_hasHoverEvent"in _||(_._hasHoverEvent=!1);var k=function(z){var E=d._fullLayout;if(!(d._dragging||E.hovermode===!1)){var S=d._fullData[_.index],C=z.data.data,D=C.i,F=a.isHierarchyRoot(z),N=a.getParent(T,z),G=a.getValue(z),U=function(ee){return t.castOption(S,D,ee)},X=U("hovertemplate"),I=c.castHoverinfo(S,E,D),B=E.separators;if(X||I&&I!=="none"&&I!=="skip"){var j,H;g&&(j=m.cx+z.pxmid[0]*(1-z.rInscribed),H=m.cy+z.pxmid[1]*(1-z.rInscribed)),A&&(j=z._hoverX,H=z._hoverY);var K={},te=[],J=[],oe=function(ee){return te.indexOf(ee)!==-1};I&&(te=I==="all"?S._module.attributes.hoverinfo.flags:I.split("+")),K.label=C.label,oe("label")&&K.label&&J.push(K.label),C.hasOwnProperty("v")&&(K.value=C.v,K.valueLabel=u(K.value,B),oe("value")&&J.push(K.valueLabel)),K.currentPath=z.currentPath=a.getPath(z.data),oe("current path")&&!F&&J.push(K.currentPath);var ie,Q=[],V=function(){Q.indexOf(ie)===-1&&(J.push(ie),Q.push(ie))};K.percentParent=z.percentParent=G/a.getValue(N),K.parent=z.parentString=a.getPtLabel(N),oe("percent parent")&&(ie=a.formatPercent(K.percentParent,B)+" of "+K.parent,V()),K.percentEntry=z.percentEntry=G/a.getValue(p),K.entry=z.entry=a.getPtLabel(p),oe("percent entry")&&!F&&!z.onPathbar&&(ie=a.formatPercent(K.percentEntry,B)+" of "+K.entry,V()),K.percentRoot=z.percentRoot=G/a.getValue(T),K.root=z.root=a.getPtLabel(T),oe("percent root")&&!F&&(ie=a.formatPercent(K.percentRoot,B)+" of "+K.root,V()),K.text=U("hovertext")||U("text"),oe("text")&&(ie=K.text,t.isValidTextValue(ie)&&J.push(ie));var se={trace:S,y:H,text:J.join("<br>"),name:X||oe("name")?S.name:void 0,color:U("hoverlabel.bgcolor")||C.color,borderColor:U("hoverlabel.bordercolor"),fontFamily:U("hoverlabel.font.family"),fontSize:U("hoverlabel.font.size"),fontColor:U("hoverlabel.font.color"),nameLength:U("hoverlabel.namelength"),textAlign:U("hoverlabel.align"),hovertemplate:X,hovertemplateLabels:K,eventData:[h(z,S,b.eventDataKeys)]};g&&(se.x0=j-z.rInscribed*z.rpx1,se.x1=j+z.rInscribed*z.rpx1,se.idealAlign=z.pxmid[0]<0?"left":"right"),A&&(se.x=j,se.idealAlign=j<0?"left":"right"),c.loneHover(se,{container:E._hoverlayer.node(),outerContainer:E._paper.node(),gd:d}),_._hasHoverLabel=!0}if(A){var re=s.select("path.surface");b.styleOne(re,z,S,{hovered:!0})}_._hasHoverEvent=!0,d.emit("plotly_hover",{points:[h(z,S,b.eventDataKeys)],event:r.event})}},R=function(z){var E=d._fullLayout,S=d._fullData[_.index],C=r.select(this).datum();if(_._hasHoverEvent&&(z.originalEvent=r.event,d.emit("plotly_unhover",{points:[h(C,S,b.eventDataKeys)],event:r.event}),_._hasHoverEvent=!1),_._hasHoverLabel&&(c.loneUnhover(E._hoverlayer.node()),_._hasHoverLabel=!1),A){var D=s.select("path.surface");b.styleOne(D,C,S,{hovered:!1})}},L=function(z){var E=d._fullLayout,S=d._fullData[_.index],C=g&&(a.isHierarchyRoot(z)||a.isLeaf(z)),D=a.getPtId(z),F=a.isEntry(z)?a.findEntryWithChild(T,D):a.findEntryWithLevel(T,D),N=a.getPtId(F),G={points:[h(z,S,b.eventDataKeys)],event:r.event};C||(G.nextLevel=N);var U=f.triggerHandler(d,"plotly_"+_.type+"click",G);if(U!==!1&&E.hovermode&&(d._hoverdata=[h(z,S,b.eventDataKeys)],c.click(d,r.event)),!C&&U!==!1&&!d._dragging&&!d._transitioning){n.call("_storeDirectGUIEdit",S,E._tracePreGUI[S.uid],{level:S.level});var X={data:[{level:N}],traces:[_.index]},I={frame:{redraw:!1,duration:b.transitionTime},transition:{duration:b.transitionTime,easing:b.transitionEasing},mode:"immediate",fromcurrent:!0};c.loneUnhover(E._hoverlayer.node()),n.call("animate",d,X,I)}};s.on("mouseover",k),s.on("mouseout",R),s.on("click",L)};function h(i,s,p){for(var d=i.data.data,y={curveNumber:s.index,pointNumber:d.i,data:s._input,fullData:s},b=0;b<p.length;b++){var m=p[b];m in i&&(y[m]=i[m])}return"parentString"in i&&!a.isHierarchyRoot(i)&&(y.parent=i.parentString),l(y,s,d.i),y}},{"../../components/fx":683,"../../components/fx/helpers":679,"../../lib":778,"../../lib/events":767,"../../registry":911,"../pie/helpers":1166,"./helpers":1305,d3:169}],1305:[function(e,v,M){var r=e("../../lib"),n=e("../../components/color"),l=e("../../lib/setcursor"),c=e("../pie/helpers");M.findEntryWithLevel=function(o,u){var h;return u&&o.eachAfter(function(i){if(M.getPtId(i)===u)return h=i.copy()}),h||o},M.findEntryWithChild=function(o,u){var h;return o.eachAfter(function(i){for(var s=i.children||[],p=0;p<s.length;p++){var d=s[p];if(M.getPtId(d)===u)return h=i.copy()}}),h||o},M.isEntry=function(o){return!o.parent},M.isLeaf=function(o){return!o.children},M.getPtId=function(o){return o.data.data.id},M.getPtLabel=function(o){return o.data.data.label},M.getValue=function(o){return o.value},M.isHierarchyRoot=function(o){return a(o)===""},M.setSliceCursor=function(o,u,h){var i=h.isTransitioning;if(!i){var s=o.datum();i=h.hideOnRoot&&M.isHierarchyRoot(s)||h.hideOnLeaves&&M.isLeaf(s)}l(o,i?null:"pointer")};function t(o,u,h){return{color:M.getOutsideTextFontKey("color",o,u,h),family:M.getOutsideTextFontKey("family",o,u,h),size:M.getOutsideTextFontKey("size",o,u,h)}}function f(o,u,h,i){var s=(i||{}).onPathbar,p=u.data.data,d=p.i,y=r.castOption(o,d,(s?"pathbar.textfont":"insidetextfont")+".color");return!y&&o._input.textfont&&(y=r.castOption(o._input,d,"textfont.color")),{color:y||n.contrast(p.color),family:M.getInsideTextFontKey("family",o,u,h,i),size:M.getInsideTextFontKey("size",o,u,h,i)}}M.getInsideTextFontKey=function(o,u,h,i,s){var p=(s||{}).onPathbar,d=p?"pathbar.textfont":"insidetextfont",y=h.data.data.i;return r.castOption(u,y,d+"."+o)||r.castOption(u,y,"textfont."+o)||i.size},M.getOutsideTextFontKey=function(o,u,h,i){var s=h.data.data.i;return r.castOption(u,s,"outsidetextfont."+o)||r.castOption(u,s,"textfont."+o)||i.size},M.isOutsideText=function(o,u){return!o._hasColorscale&&M.isHierarchyRoot(u)},M.determineTextFont=function(o,u,h,i){return M.isOutsideText(o,u)?t(o,u,h):f(o,u,h,i)},M.hasTransition=function(o){return!!(o&&o.duration>0)},M.getMaxDepth=function(o){return o.maxdepth>=0?o.maxdepth:1/0},M.isHeader=function(o,u){return!(M.isLeaf(o)||o.depth===u._maxDepth-1)};function a(o){return o.data.data.pid}M.getParent=function(o,u){return M.findEntryWithLevel(o,a(u))},M.listPath=function(o,u){var h=o.parent;if(!h)return[];var i=u?[h.data[u]]:[h];return M.listPath(h,u).concat(i)},M.getPath=function(o){return M.listPath(o,"label").join("/")+"/"},M.formatValue=c.formatPieValue,M.formatPercent=function(o,u){var h=r.formatPercent(o,0);return h==="0%"&&(h=c.formatPiePercent(o,u)),h}},{"../../components/color":643,"../../lib":778,"../../lib/setcursor":799,"../pie/helpers":1166}],1306:[function(e,v,M){v.exports={moduleType:"trace",name:"sunburst",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1205,"./attributes":1299,"./base_plot":1300,"./calc":1301,"./defaults":1303,"./layout_attributes":1307,"./layout_defaults":1308,"./plot":1309,"./style":1310}],1307:[function(e,v,M){v.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1308:[function(e,v,M){var r=e("../../lib"),n=e("./layout_attributes");v.exports=function(c,t){function f(a,o){return r.coerce(c,t,n,a,o)}f("sunburstcolorway",t.colorway),f("extendsunburstcolors")}},{"../../lib":778,"./layout_attributes":1307}],1309:[function(e,v,M){var r=e("d3"),n=e("d3-hierarchy"),l=e("../../components/drawing"),c=e("../../lib"),t=e("../../lib/svg_text_utils"),f=e("../bar/uniform_text"),a=f.recordMinTextSize,o=f.clearMinTextSize,u=e("../pie/plot"),h=e("../pie/helpers").getRotationAngle,i=u.computeTransform,s=u.transformInsideText,p=e("./style").styleOne,d=e("../bar/style").resizeText,y=e("./fx"),b=e("./constants"),m=e("./helpers");M.plot=function(R,L,z,E){var S=R._fullLayout,C=S._sunburstlayer,D,F,N=!z,G=!S.uniformtext.mode&&m.hasTransition(z);if(o("sunburst",S),D=C.selectAll("g.trace.sunburst").data(L,function(X){return X[0].trace.uid}),D.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),D.order(),G){E&&(F=E());var U=r.transition().duration(z.duration).ease(z.easing).each("end",function(){F&&F()}).each("interrupt",function(){F&&F()});U.each(function(){C.selectAll("g.trace").each(function(X){_(R,X,this,z)})})}else D.each(function(X){_(R,X,this,z)}),S.uniformtext.mode&&d(R,S._sunburstlayer.selectAll(".trace"),"sunburst");N&&D.exit().remove()};function _(R,L,z,E){var S=R._fullLayout,C=!S.uniformtext.mode&&m.hasTransition(E),D=r.select(z),F=D.selectAll("g.slice"),N=L[0],G=N.trace,U=N.hierarchy,X=m.findEntryWithLevel(U,G.level),I=m.getMaxDepth(G),B=S._size,j=G.domain,H=B.w*(j.x[1]-j.x[0]),K=B.h*(j.y[1]-j.y[0]),te=.5*Math.min(H,K),J=N.cx=B.l+B.w*(j.x[1]+j.x[0])/2,oe=N.cy=B.t+B.h*(1-j.y[0])-K/2;if(!X)return F.remove();var ie=null,Q={};C&&F.each(function(Ce){Q[m.getPtId(Ce)]={rpx0:Ce.rpx0,rpx1:Ce.rpx1,x0:Ce.x0,x1:Ce.x1,transform:Ce.transform},!ie&&m.isEntry(Ce)&&(ie=Ce)});var V=T(X).descendants(),se=X.height+1,re=0,ee=I;N.hasMultipleRoots&&m.isHierarchyRoot(X)&&(V=V.slice(1),se-=1,re=1,ee+=1),V=V.filter(function(Ce){return Ce.y1<=ee});var ae=h(G.rotation);ae&&V.forEach(function(Ce){Ce.x0+=ae,Ce.x1+=ae});var fe=Math.min(se,I),de=function(Ce){return(Ce-re)/fe*te},pe=function(Ce,Ae){return[Ce*Math.cos(Ae),-Ce*Math.sin(Ae)]},W=function(Ce){return c.pathAnnulus(Ce.rpx0,Ce.rpx1,Ce.x0,Ce.x1,J,oe)},ue=function(Ce){return J+A(Ce)[0]*(Ce.transform.rCenter||0)+(Ce.transform.x||0)},me=function(Ce){return oe+A(Ce)[1]*(Ce.transform.rCenter||0)+(Ce.transform.y||0)};F=F.data(V,m.getPtId),F.enter().append("g").classed("slice",!0),C?F.exit().transition().each(function(){var Ce=r.select(this),Ae=Ce.select("path.surface");Ae.transition().attrTween("d",function(qe){var At=je(qe);return function(kt){return W(At(kt))}});var Ne=Ce.select("g.slicetext");Ne.attr("opacity",0)}).remove():F.exit().remove(),F.order();var be=null;if(C&&ie){var ke=m.getPtId(ie);F.each(function(Ce){be===null&&m.getPtId(Ce)===ke&&(be=Ce.x1)})}var Pe=F;C&&(Pe=Pe.transition().each("end",function(){var Ce=r.select(this);m.setSliceCursor(Ce,R,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Pe.each(function(Ce){var Ae=r.select(this),Ne=c.ensureSingle(Ae,"path","surface",function(St){St.style("pointer-events","all")});Ce.rpx0=de(Ce.y0),Ce.rpx1=de(Ce.y1),Ce.xmid=(Ce.x0+Ce.x1)/2,Ce.pxmid=pe(Ce.rpx1,Ce.xmid),Ce.midangle=-(Ce.xmid-Math.PI/2),Ce.startangle=-(Ce.x0-Math.PI/2),Ce.stopangle=-(Ce.x1-Math.PI/2),Ce.halfangle=.5*Math.min(c.angleDelta(Ce.x0,Ce.x1)||Math.PI,Math.PI),Ce.ring=1-Ce.rpx0/Ce.rpx1,Ce.rInscribed=g(Ce),C?Ne.transition().attrTween("d",function(St){var Wt=ze(St);return function(Qt){return W(Wt(Qt))}}):Ne.attr("d",W),Ae.call(y,X,R,L,{eventDataKeys:b.eventDataKeys,transitionTime:b.CLICK_TRANSITION_TIME,transitionEasing:b.CLICK_TRANSITION_EASING}).call(m.setSliceCursor,R,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:R._transitioning}),Ne.call(p,Ce,G);var qe=c.ensureSingle(Ae,"g","slicetext"),At=c.ensureSingle(qe,"text","",function(St){St.attr("data-notex",1)}),kt=c.ensureUniformFontSize(R,m.determineTextFont(G,Ce,S.font));At.text(M.formatSliceLabel(Ce,X,G,L,S)).classed("slicetext",!0).attr("text-anchor","middle").call(l.font,kt).call(t.convertToTspans,R);var Ve=l.bBox(At.node());Ce.transform=s(Ve,Ce,N),Ce.transform.targetX=ue(Ce),Ce.transform.targetY=me(Ce);var ft=function(St,Wt){var Qt=St.transform;return i(Qt,Wt),Qt.fontSize=kt.size,a(G.type,Qt,S),c.getTextTransform(Qt)};C?At.transition().attrTween("transform",function(St){var Wt=Ze(St);return function(Qt){return ft(Wt(Qt),Ve)}}):At.attr("transform",ft(Ce,Ve))});function je(Ce){var Ae=m.getPtId(Ce),Ne=Q[Ae],qe=Q[m.getPtId(X)],At;if(qe){var kt=(Ce.x1>qe.x1?2*Math.PI:0)+ae;At=Ce.rpx1<qe.rpx1?{rpx0:0,rpx1:0}:{x0:kt,x1:kt}}else{var Ve,ft=m.getPtId(Ce.parent);F.each(function($t){if(m.getPtId($t)===ft)return Ve=$t});var St=Ve.children,Wt;St.forEach(function($t,rr){if(m.getPtId($t)===Ae)return Wt=rr});var Qt=St.length,zt=r.interpolate(Ve.x0,Ve.x1);At={rpx0:te,rpx1:te,x0:zt(Wt/Qt),x1:zt((Wt+1)/Qt)}}return r.interpolate(Ne,At)}function ze(Ce){var Ae=Q[m.getPtId(Ce)],Ne,qe={x0:Ce.x0,x1:Ce.x1,rpx0:Ce.rpx0,rpx1:Ce.rpx1};if(Ae)Ne=Ae;else if(ie)if(Ce.parent)if(be){var At=(Ce.x1>be?2*Math.PI:0)+ae;Ne={x0:At,x1:At}}else Ne={rpx0:te,rpx1:te},c.extendFlat(Ne,tt(Ce));else Ne={rpx0:0,rpx1:0};else Ne={x0:ae,x1:ae};return r.interpolate(Ne,qe)}function Ze(Ce){var Ae=Q[m.getPtId(Ce)],Ne,qe=Ce.transform;if(Ae)Ne=Ae;else if(Ne={rpx1:Ce.rpx1,transform:{textPosAngle:qe.textPosAngle,scale:0,rotate:qe.rotate,rCenter:qe.rCenter,x:qe.x,y:qe.y}},ie)if(Ce.parent)if(be){var At=Ce.x1>be?2*Math.PI:0;Ne.x0=Ne.x1=At}else c.extendFlat(Ne,tt(Ce));else Ne.x0=Ne.x1=ae;else Ne.x0=Ne.x1=ae;var kt=r.interpolate(Ne.transform.textPosAngle,Ce.transform.textPosAngle),Ve=r.interpolate(Ne.rpx1,Ce.rpx1),ft=r.interpolate(Ne.x0,Ce.x0),St=r.interpolate(Ne.x1,Ce.x1),Wt=r.interpolate(Ne.transform.scale,qe.scale),Qt=r.interpolate(Ne.transform.rotate,qe.rotate),zt=qe.rCenter===0?3:Ne.transform.rCenter===0?1/3:1,$t=r.interpolate(Ne.transform.rCenter,qe.rCenter),rr=function(Pt){return $t(Math.pow(Pt,zt))};return function(Pt){var Lt=Ve(Pt),dt=ft(Pt),lt=St(Pt),Te=rr(Pt),Le=pe(Lt,(dt+lt)/2),Be=kt(Pt),et={pxmid:Le,rpx1:Lt,transform:{textPosAngle:Be,rCenter:Te,x:qe.x,y:qe.y}};return a(G.type,qe,S),{transform:{targetX:ue(et),targetY:me(et),scale:Wt(Pt),rotate:Qt(Pt),rCenter:Te}}}}function tt(Ce){var Ae=Ce.parent,Ne=Q[m.getPtId(Ae)],qe={};if(Ne){var At=Ae.children,kt=At.indexOf(Ce),Ve=At.length,ft=r.interpolate(Ne.x0,Ne.x1);qe.x0=ft(kt/Ve),qe.x1=ft(kt/Ve)}else qe.x0=qe.x1=0;return qe}}function T(R){return n.partition().size([2*Math.PI,R.height+1])(R)}M.formatSliceLabel=function(R,L,z,E,S){var C=z.texttemplate,D=z.textinfo;if(!C&&(!D||D==="none"))return"";var F=S.separators,N=E[0],G=R.data.data,U=N.hierarchy,X=m.isHierarchyRoot(R),I=m.getParent(U,R),B=m.getValue(R);if(!C){var j=D.split("+"),H=function(ee){return j.indexOf(ee)!==-1},K=[],te;if(H("label")&&G.label&&K.push(G.label),G.hasOwnProperty("v")&&H("value")&&K.push(m.formatValue(G.v,F)),!X){H("current path")&&K.push(m.getPath(R.data));var J=0;H("percent parent")&&J++,H("percent entry")&&J++,H("percent root")&&J++;var oe=J>1;if(J){var ie,Q=function(ee){te=m.formatPercent(ie,F),oe&&(te+=" of "+ee),K.push(te)};H("percent parent")&&!X&&(ie=B/m.getValue(I),Q("parent")),H("percent entry")&&(ie=B/m.getValue(L),Q("entry")),H("percent root")&&(ie=B/m.getValue(U),Q("root"))}}return H("text")&&(te=c.castOption(z,G.i,"text"),c.isValidTextValue(te)&&K.push(te)),K.join("<br>")}var V=c.castOption(z,G.i,"texttemplate");if(!V)return"";var se={};G.label&&(se.label=G.label),G.hasOwnProperty("v")&&(se.value=G.v,se.valueLabel=m.formatValue(G.v,F)),se.currentPath=m.getPath(R.data),X||(se.percentParent=B/m.getValue(I),se.percentParentLabel=m.formatPercent(se.percentParent,F),se.parent=m.getPtLabel(I)),se.percentEntry=B/m.getValue(L),se.percentEntryLabel=m.formatPercent(se.percentEntry,F),se.entry=m.getPtLabel(L),se.percentRoot=B/m.getValue(U),se.percentRootLabel=m.formatPercent(se.percentRoot,F),se.root=m.getPtLabel(U),G.hasOwnProperty("color")&&(se.color=G.color);var re=c.castOption(z,G.i,"text");return(c.isValidTextValue(re)||re==="")&&(se.text=re),se.customdata=c.castOption(z,G.i,"customdata"),c.texttemplateString(V,se,S._d3locale,se,z._meta||{})};function g(R){return R.rpx0===0&&c.isFullCircle([R.x0,R.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(R.halfangle)),R.ring/2))}function A(R){return k(R.rpx1,R.transform.textPosAngle)}function k(R,L){return[R*Math.sin(L),-R*Math.cos(L)]}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../bar/style":935,"../bar/uniform_text":937,"../pie/helpers":1166,"../pie/plot":1170,"./constants":1302,"./fx":1304,"./helpers":1305,"./style":1310,d3:169,"d3-hierarchy":161}],1310:[function(e,v,M){var r=e("d3"),n=e("../../components/color"),l=e("../../lib"),c=e("../bar/uniform_text").resizeText;function t(a){var o=a._fullLayout._sunburstlayer.selectAll(".trace");c(a,o,"sunburst"),o.each(function(u){var h=r.select(this),i=u[0],s=i.trace;h.style("opacity",s.opacity),h.selectAll("path.surface").each(function(p){r.select(this).call(f,p,s)})})}function f(a,o,u){var h=o.data.data,i=!o.children,s=h.i,p=l.castOption(u,s,"marker.line.color")||n.defaultLine,d=l.castOption(u,s,"marker.line.width")||0;a.style("stroke-width",d).call(n.fill,h.color).call(n.stroke,p).style("opacity",i?u.leaf.opacity:null)}v.exports={style:t,styleOne:f}},{"../../components/color":643,"../../lib":778,"../bar/uniform_text":937,d3:169}],1311:[function(e,v,M){var r=e("../../components/color"),n=e("../../components/colorscale/attributes"),l=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,f=e("../../plot_api/edit_types").overrideAll;function a(h){return{valType:"boolean",dflt:!1}}function o(h){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:a(),y:a(),z:a()},color:{valType:"color",dflt:r.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:r.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var u=v.exports=f(t({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:l(),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},n("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:o(),y:o(),z:o()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:t({},n.zauto,{}),zmin:t({},n.zmin,{}),zmax:t({},n.zmax,{})},hoverinfo:t({},c.hoverinfo),showlegend:t({},c.showlegend,{dflt:!1})}),"calc","nested");u.x.editType=u.y.editType=u.z.editType="calc+clearAxisTypes",u.transforms=void 0},{"../../components/color":643,"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906}],1312:[function(e,v,M){var r=e("../../components/colorscale/calc");v.exports=function(l,c){c.surfacecolor?r(l,c,{vals:c.surfacecolor,containerStr:"",cLetter:"c"}):r(l,c,{vals:c.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651}],1313:[function(e,v,M){var r=e("gl-surface3d"),n=e("ndarray"),l=e("ndarray-linear-interpolate").d2,c=e("../heatmap/interp2d"),t=e("../heatmap/find_empties"),f=e("../../lib").isArrayOrTypedArray,a=e("../../lib/gl_format_color").parseColorScale,o=e("../../lib/str2rgbarray"),u=e("../../components/colorscale").extractOpts;function h(S,C,D){this.scene=S,this.uid=D,this.surface=C,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var i=h.prototype;i.getXat=function(S,C,D,F){var N=f(this.data.x)?f(this.data.x[0])?this.data.x[C][S]:this.data.x[S]:S;return D===void 0?N:F.d2l(N,0,D)},i.getYat=function(S,C,D,F){var N=f(this.data.y)?f(this.data.y[0])?this.data.y[C][S]:this.data.y[C]:C;return D===void 0?N:F.d2l(N,0,D)},i.getZat=function(S,C,D,F){var N=this.data.z[C][S];return N===null&&this.data.connectgaps&&this.data._interpolatedZ&&(N=this.data._interpolatedZ[C][S]),D===void 0?N:F.d2l(N,0,D)},i.handlePick=function(S){if(S.object===this.surface){var C=(S.data.index[0]-1)/this.dataScaleX-1,D=(S.data.index[1]-1)/this.dataScaleY-1,F=Math.max(Math.min(Math.round(C),this.data.z[0].length-1),0),N=Math.max(Math.min(Math.round(D),this.data._ylength-1),0);S.index=[F,N],S.traceCoordinate=[this.getXat(F,N),this.getYat(F,N),this.getZat(F,N)],S.dataCoordinate=[this.getXat(F,N,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(F,N,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(F,N,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var G=0;G<3;G++){var U=S.dataCoordinate[G];U!=null&&(S.dataCoordinate[G]*=this.scene.dataScale[G])}var X=this.data.hovertext||this.data.text;return Array.isArray(X)&&X[N]&&X[N][F]!==void 0?S.textLabel=X[N][F]:X?S.textLabel=X:S.textLabel="",S.data.dataCoordinate=S.dataCoordinate.slice(),this.surface.highlight(S.data),this.scene.glplot.spikes.position=S.dataCoordinate,!0}};function s(S){var C=S[0].rgb,D=S[S.length-1].rgb;return C[0]===D[0]&&C[1]===D[1]&&C[2]===D[2]&&C[3]===D[3]}var p=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function d(S,C){if(S<C)return 0;for(var D=0;Math.floor(S%C)===0;)S/=C,D++;return D}function y(S){for(var C=[],D=0;D<p.length;D++){var F=p[D];C.push(d(S,F))}return C}function b(S){for(var C=y(S),D=S,F=0;F<p.length;F++)if(C[F]>0){D=p[F];break}return D}function m(S,C){if(!(S<1||C<1)){for(var D=y(S),F=y(C),N=1,G=0;G<p.length;G++)N*=Math.pow(p[G],Math.max(D[G],F[G]));return N}}function _(S){if(S.length!==0){for(var C=1,D=0;D<S.length;D++)C=m(C,S[D]);return C}}i.calcXnums=function(S){var C,D=[];for(C=1;C<S;C++){var F=this.getXat(C-1,0),N=this.getXat(C,0);N!==F&&F!==void 0&&F!==null&&N!==void 0&&N!==null?D[C-1]=Math.abs(N-F):D[C-1]=0}var G=0;for(C=1;C<S;C++)G+=D[C-1];for(C=1;C<S;C++)D[C-1]===0?D[C-1]=1:D[C-1]=Math.round(G/D[C-1]);return D},i.calcYnums=function(S){var C,D=[];for(C=1;C<S;C++){var F=this.getYat(0,C-1),N=this.getYat(0,C);N!==F&&F!==void 0&&F!==null&&N!==void 0&&N!==null?D[C-1]=Math.abs(N-F):D[C-1]=0}var G=0;for(C=1;C<S;C++)G+=D[C-1];for(C=1;C<S;C++)D[C-1]===0?D[C-1]=1:D[C-1]=Math.round(G/D[C-1]);return D};var T=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],g=T[9],A=T[13];i.estimateScale=function(S,C){for(var D=C===0?this.calcXnums(S):this.calcYnums(S),F=1+_(D);F<g;)F*=2;for(;F>A;)F--,F/=b(F),F++,F<g&&(F=A);var N=Math.round(F/S);return N>1?N:1};function k(S,C,D){var F=D[8]+D[2]*C[0]+D[5]*C[1];return S[0]=(D[6]+D[0]*C[0]+D[3]*C[1])/F,S[1]=(D[7]+D[1]*C[0]+D[4]*C[1])/F,S}function R(S,C,D){return L(S,C,k,D),S}function L(S,C,D,F){for(var N=[0,0],G=S.shape[0],U=S.shape[1],X=0;X<G;X++)for(var I=0;I<U;I++)D(N,[X,I],F),S.set(X,I,l(C,N[0],N[1]));return S}i.refineCoords=function(S){for(var C=this.dataScaleX,D=this.dataScaleY,F=S[0].shape[0],N=S[0].shape[1],G=Math.floor(S[0].shape[0]*C+1)|0,U=Math.floor(S[0].shape[1]*D+1)|0,X=1+F+1,I=1+N+1,B=n(new Float32Array(X*I),[X,I]),j=[1/C,0,0,0,1/D,0,0,0,1],H=0;H<S.length;++H){this.surface.padField(B,S[H]);var K=n(new Float32Array(G*U),[G,U]);R(K,B,j),S[H]=K}};function z(S,C){for(var D=!1,F=0;F<S.length;F++)if(C===S[F]){D=!0;break}D===!1&&S.push(C)}i.setContourLevels=function(){var S=[[],[],[]],C=[!1,!1,!1],D=!1,F,N,G;for(F=0;F<3;++F)if(this.showContour[F]&&(D=!0,this.contourSize[F]>0&&this.contourStart[F]!==null&&this.contourEnd[F]!==null&&this.contourEnd[F]>this.contourStart[F]))for(C[F]=!0,N=this.contourStart[F];N<this.contourEnd[F];N+=this.contourSize[F])G=N*this.scene.dataScale[F],z(S[F],G);if(D){var U=[[],[],[]];for(F=0;F<3;++F)this.showContour[F]&&(U[F]=C[F]?S[F]:this.scene.contourLevels[F]);this.surface.update({levels:U})}},i.update=function(S){var C=this.scene,D=C.fullSceneLayout,F=this.surface,N=a(S),G=C.dataScale,U=S.z[0].length,X=S._ylength,I=C.contourLevels;this.data=S;var B,j,H,K,te=[];for(B=0;B<3;B++)for(te[B]=[],j=0;j<U;j++)te[B][j]=[];for(j=0;j<U;j++)for(H=0;H<X;H++)te[0][j][H]=this.getXat(j,H,S.xcalendar,D.xaxis),te[1][j][H]=this.getYat(j,H,S.ycalendar,D.yaxis),te[2][j][H]=this.getZat(j,H,S.zcalendar,D.zaxis);if(S.connectgaps)for(S._emptypoints=t(te[2]),c(te[2],S._emptypoints),S._interpolatedZ=[],j=0;j<U;j++)for(S._interpolatedZ[j]=[],H=0;H<X;H++)S._interpolatedZ[j][H]=te[2][j][H];for(B=0;B<3;B++)for(j=0;j<U;j++)for(H=0;H<X;H++)K=te[B][j][H],K==null?te[B][j][H]=NaN:K=te[B][j][H]*=G[B];for(B=0;B<3;B++)for(j=0;j<U;j++)for(H=0;H<X;H++)K=te[B][j][H],K!=null&&(this.minValues[B]>K&&(this.minValues[B]=K),this.maxValues[B]<K&&(this.maxValues[B]=K));for(B=0;B<3;B++)this.objectOffset[B]=.5*(this.minValues[B]+this.maxValues[B]);for(B=0;B<3;B++)for(j=0;j<U;j++)for(H=0;H<X;H++)K=te[B][j][H],K!=null&&(te[B][j][H]-=this.objectOffset[B]);var J=[n(new Float32Array(U*X),[U,X]),n(new Float32Array(U*X),[U,X]),n(new Float32Array(U*X),[U,X])];for(B=0;B<3;B++)for(j=0;j<U;j++)for(H=0;H<X;H++)J[B].set(j,H,te[B][j][H]);te=[];var oe={colormap:N,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!S.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:S.opacityscale,opacity:S.opacity},ie=u(S);if(oe.intensityBounds=[ie.min,ie.max],S.surfacecolor){var Q=n(new Float32Array(U*X),[U,X]);for(j=0;j<U;j++)for(H=0;H<X;H++)Q.set(j,H,S.surfacecolor[H][j]);J.push(Q)}else oe.intensityBounds[0]*=G[2],oe.intensityBounds[1]*=G[2];(A<J[0].shape[0]||A<J[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(J[0].shape[0],0),this.dataScaleY=this.estimateScale(J[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(J)),S.surfacecolor&&(oe.intensity=J.pop());var V=[!0,!0,!0],se=["x","y","z"];for(B=0;B<3;++B){var re=S.contours[se[B]];V[B]=re.highlight,oe.showContour[B]=re.show||re.highlight,oe.showContour[B]&&(oe.contourProject[B]=[re.project.x,re.project.y,re.project.z],re.show?(this.showContour[B]=!0,oe.levels[B]=I[B],F.highlightColor[B]=oe.contourColor[B]=o(re.color),re.usecolormap?F.highlightTint[B]=oe.contourTint[B]=0:F.highlightTint[B]=oe.contourTint[B]=1,oe.contourWidth[B]=re.width,this.contourStart[B]=re.start,this.contourEnd[B]=re.end,this.contourSize[B]=re.size):(this.showContour[B]=!1,this.contourStart[B]=null,this.contourEnd[B]=null,this.contourSize[B]=0),re.highlight&&(oe.dynamicColor[B]=o(re.highlightcolor),oe.dynamicWidth[B]=re.highlightwidth))}s(N)&&(oe.vertexColor=!0),oe.objectOffset=this.objectOffset,oe.coords=J,F.update(oe),F.visible=S.visible,F.enableDynamic=V,F.enableHighlight=V,F.snapToData=!0,"lighting"in S&&(F.ambientLight=S.lighting.ambient,F.diffuseLight=S.lighting.diffuse,F.specularLight=S.lighting.specular,F.roughness=S.lighting.roughness,F.fresnel=S.lighting.fresnel),"lightposition"in S&&(F.lightPosition=[S.lightposition.x,S.lightposition.y,S.lightposition.z])},i.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function E(S,C){var D=S.glplot.gl,F=r({gl:D}),N=new h(S,F,C.uid);return F._trace=N,N.update(C),S.glplot.add(F),N}v.exports=E},{"../../components/colorscale":655,"../../lib":778,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../heatmap/find_empties":1071,"../heatmap/interp2d":1074,"gl-surface3d":351,ndarray:495,"ndarray-linear-interpolate":489}],1314:[function(e,v,M){var r=e("../../registry"),n=e("../../lib"),l=e("../../components/colorscale/defaults"),c=e("./attributes"),t=.1;function f(i,s){for(var p=[],d=32,y=0;y<d;y++){var b=y/(d-1),m=s+(1-s)*(1-Math.pow(Math.sin(i*b*Math.PI),2));p.push([b,Math.max(0,Math.min(1,m))])}return p}function a(i){var s=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||+i[0][0]!=0||+i[i.length-1][0]!=1)return!1;for(var p=0;p<i.length;p++){var d=i[p];if(d.length!==2||+d[0]<s)return!1;s=+d[0]}return!0}function o(i,s,p,d){var y,b;function m(S,C){return n.coerce(i,s,c,S,C)}var _=m("x"),T=m("y"),g=m("z");if(!g||!g.length||_&&_.length<1||T&&T.length<1){s.visible=!1;return}s._xlength=Array.isArray(_)&&n.isArrayOrTypedArray(_[0])?g.length:g[0].length,s._ylength=g.length;var A=r.getComponentMethod("calendars","handleTraceDefaults");A(i,s,["x","y","z"],d),m("text"),m("hovertext"),m("hovertemplate"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(S){m(S)});var k=m("surfacecolor"),R=["x","y","z"];for(y=0;y<3;++y){var L="contours."+R[y],z=m(L+".show"),E=m(L+".highlight");if(z||E)for(b=0;b<3;++b)m(L+".project."+R[b]);z&&(m(L+".color"),m(L+".width"),m(L+".usecolormap")),E&&(m(L+".highlightcolor"),m(L+".highlightwidth")),m(L+".start"),m(L+".end"),m(L+".size")}k||(h(i,"zmin","cmin"),h(i,"zmax","cmax"),h(i,"zauto","cauto")),l(i,s,d,m,{prefix:"",cLetter:"c"}),u(i,s,d,m),s._length=null}function u(i,s,p,d){var y=d("opacityscale");y==="max"?s.opacityscale=[[0,t],[1,1]]:y==="min"?s.opacityscale=[[0,1],[1,t]]:y==="extremes"?s.opacityscale=f(1,t):a(y)||(s.opacityscale=void 0)}function h(i,s,p){s in i&&!(p in i)&&(i[p]=i[s])}v.exports={supplyDefaults:o,opacityscaleDefaults:u}},{"../../components/colorscale/defaults":653,"../../lib":778,"../../registry":911,"./attributes":1311}],1315:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),moduleType:"trace",name:"surface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":870,"./attributes":1311,"./calc":1312,"./convert":1313,"./defaults":1314}],1316:[function(e,v,M){var r=e("../../components/annotations/attributes"),n=e("../../lib/extend").extendFlat,l=e("../../plot_api/edit_types").overrideAll,c=e("../../plots/font_attributes"),t=e("../../plots/domain").attributes;e("../../constants/docs").FORMAT_LINK;var f=v.exports=l({domain:t({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:n({},r.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:n({},c({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:n({},r.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:n({},c({arrayOk:!0}))}},"calc","from-root");f.transforms=void 0},{"../../components/annotations/attributes":626,"../../constants/docs":748,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/domain":855,"../../plots/font_attributes":856}],1317:[function(e,v,M){var r=e("../../plots/get_data").getModuleCalcData,n=e("./plot"),l="table";M.name=l,M.plot=function(c){var t=r(c.calcdata,l)[0];t.length&&n(c,t)},M.clean=function(c,t,f,a){var o=a._has&&a._has(l),u=t._has&&t._has(l);o&&!u&&a._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":865,"./plot":1324}],1318:[function(e,v,M){var r=e("../../lib/gup").wrap;v.exports=function(){return r({})}},{"../../lib/gup":775}],1319:[function(e,v,M){v.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1320:[function(e,v,M){var r=e("./constants"),n=e("../../lib/extend").extendFlat,l=e("fast-isnumeric");v.exports=function(p,d){var y=f(d.cells.values),b=function(j){return j.slice(d.header.values.length,j.length)},m=f(d.header.values);m.length&&!m[0].length&&(m[0]=[""],m=f(m));var _=m.concat(b(y).map(function(){return a((m[0]||[""]).length)})),T=d.domain,g=Math.floor(p._fullLayout._size.w*(T.x[1]-T.x[0])),A=Math.floor(p._fullLayout._size.h*(T.y[1]-T.y[0])),k=d.header.values.length?_[0].map(function(){return d.header.height}):[r.emptyHeaderHeight],R=y.length?y[0].map(function(){return d.cells.height}):[],L=k.reduce(t,0),z=A-L,E=z+r.uplift,S=h(R,E),C=h(k,L),D=u(C,[]),F=u(S,D),N={},G=d._fullInput.columnorder.concat(b(y.map(function(j,H){return H}))),U=_.map(function(j,H){var K=Array.isArray(d.columnwidth)?d.columnwidth[Math.min(H,d.columnwidth.length-1)]:d.columnwidth;return l(K)?Number(K):1}),X=U.reduce(t,0);U=U.map(function(j){return j/X*g});var I=Math.max(c(d.header.line.width),c(d.cells.line.width)),B={key:d.uid+p._context.staticPlot,translateX:T.x[0]*p._fullLayout._size.w,translateY:p._fullLayout._size.h*(1-T.y[1]),size:p._fullLayout._size,width:g,maxLineWidth:I,height:A,columnOrder:G,groupHeight:A,rowBlocks:F,headerRowBlocks:D,scrollY:0,cells:n({},d.cells,{values:y}),headerCells:n({},d.header,{values:_}),gdColumns:_.map(function(j){return j[0]}),gdColumnsOriginalOrder:_.map(function(j){return j[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:_.map(function(j,H){var K=N[j];N[j]=(K||0)+1;var te=j+"__"+N[j];return{key:te,label:j,specIndex:H,xIndex:G[H],xScale:o,x:void 0,calcdata:void 0,columnWidth:U[H]}})};return B.columns.forEach(function(j){j.calcdata=B,j.x=o(j)}),B};function c(s){if(Array.isArray(s)){for(var p=0,d=0;d<s.length;d++)p=Math.max(p,c(s[d]));return p}return s}function t(s,p){return s+p}function f(s){var p=s.slice(),d=1/0,y=0,b;for(b=0;b<p.length;b++)Array.isArray(p[b])||(p[b]=[p[b]]),d=Math.min(d,p[b].length),y=Math.max(y,p[b].length);if(d!==y)for(b=0;b<p.length;b++){var m=y-p[b].length;m&&(p[b]=p[b].concat(a(m)))}return p}function a(s){for(var p=new Array(s),d=0;d<s;d++)p[d]="";return p}function o(s){return s.calcdata.columns.reduce(function(p,d){return d.xIndex<s.xIndex?p+d.columnWidth:p},0)}function u(s,p){var d=Object.keys(s);return d.map(function(y){return n({},s[y],{auxiliaryBlocks:p})})}function h(s,p){for(var d={},y,b=0,m=0,_=i(),T=0,g=0,A=0;A<s.length;A++)y=s[A],_.rows.push({rowIndex:A,rowHeight:y}),m+=y,(m>=p||A===s.length-1)&&(d[b]=_,_.key=g++,_.firstRowIndex=T,_.lastRowIndex=A,_=i(),b+=m,T=A+1,m=0);return d}function i(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":768,"./constants":1319,"fast-isnumeric":241}],1321:[function(e,v,M){var r=e("../../lib/extend").extendFlat;M.splitToPanels=function(l){var c=[0,0],t=r({},l,{key:"header",type:"header",page:0,prevPages:c,currentRepaint:[null,null],dragHandle:!0,values:l.calcdata.headerCells.values[l.specIndex],rowBlocks:l.calcdata.headerRowBlocks,calcdata:r({},l.calcdata,{cells:l.calcdata.headerCells})}),f=r({},l,{key:"cells1",type:"cells",page:0,prevPages:c,currentRepaint:[null,null],dragHandle:!1,values:l.calcdata.cells.values[l.specIndex],rowBlocks:l.calcdata.rowBlocks}),a=r({},l,{key:"cells2",type:"cells",page:1,prevPages:c,currentRepaint:[null,null],dragHandle:!1,values:l.calcdata.cells.values[l.specIndex],rowBlocks:l.calcdata.rowBlocks});return[f,a,t]},M.splitToCells=function(l){var c=n(l);return(l.values||[]).slice(c[0],c[1]).map(function(t,f){var a=typeof t=="string"&&t.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:f+a,key:c[0]+f,column:l,calcdata:l.calcdata,page:l.page,rowBlocks:l.rowBlocks,value:t}})};function n(l){var c=l.rowBlocks[l.page],t=c?c.rows[0].rowIndex:0,f=c?t+c.rows.length:0;return[t,f]}},{"../../lib/extend":768}],1322:[function(e,v,M){var r=e("../../lib"),n=e("./attributes"),l=e("../../plots/domain").defaults;function c(t,f){for(var a=t.columnorder||[],o=t.header.values.length,u=a.slice(0,o),h=u.slice().sort(function(p,d){return p-d}),i=u.map(function(p){return h.indexOf(p)}),s=i.length;s<o;s++)i.push(s);f("columnorder",i)}v.exports=function(f,a,o,u){function h(i,s){return r.coerce(f,a,n,i,s)}l(a,u,h),h("columnwidth"),h("header.values"),h("header.format"),h("header.align"),h("header.prefix"),h("header.suffix"),h("header.height"),h("header.line.width"),h("header.line.color"),h("header.fill.color"),r.coerceFont(h,"header.font",r.extendFlat({},u.font)),c(a,h),h("cells.values"),h("cells.format"),h("cells.align"),h("cells.prefix"),h("cells.suffix"),h("cells.height"),h("cells.line.width"),h("cells.line.color"),h("cells.fill.color"),r.coerceFont(h,"cells.font",r.extendFlat({},u.font)),a._length=null}},{"../../lib":778,"../../plots/domain":855,"./attributes":1316}],1323:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"table",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1316,"./base_plot":1317,"./calc":1318,"./defaults":1322,"./plot":1324}],1324:[function(e,v,M){var r=e("./constants"),n=e("d3"),l=e("../../lib/gup"),c=e("../../components/drawing"),t=e("../../lib/svg_text_utils"),f=e("../../lib").raiseToTop,a=e("../../lib").strTranslate,o=e("../../lib").cancelTransition,u=e("./data_preparation_helper"),h=e("./data_split_helpers"),i=e("../../components/color");v.exports=function(ae,fe){var de=!ae._context.staticPlot,pe=ae._fullLayout._paper.selectAll("."+r.cn.table).data(fe.map(function(qe){var At=l.unwrap(qe),kt=At.trace;return u(ae,kt)}),l.keyFun);pe.exit().remove(),pe.enter().append("g").classed(r.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),pe.attr("width",function(qe){return qe.width+qe.size.l+qe.size.r}).attr("height",function(qe){return qe.height+qe.size.t+qe.size.b}).attr("transform",function(qe){return a(qe.translateX,qe.translateY)});var W=pe.selectAll("."+r.cn.tableControlView).data(l.repeat,l.keyFun),ue=W.enter().append("g").classed(r.cn.tableControlView,!0).style("box-sizing","content-box");if(de){var me="onwheel"in document?"wheel":"mousewheel";ue.on("mousemove",function(qe){W.filter(function(At){return qe===At}).call(b,ae)}).on(me,function(qe){if(!qe.scrollbarState.wheeling){qe.scrollbarState.wheeling=!0;var At=qe.scrollY+n.event.deltaY,kt=j(ae,W,null,At)(qe);kt||(n.event.stopPropagation(),n.event.preventDefault()),qe.scrollbarState.wheeling=!1}}).call(b,ae,!0)}W.attr("transform",function(qe){return a(qe.size.l,qe.size.t)});var be=W.selectAll("."+r.cn.scrollBackground).data(l.repeat,l.keyFun);be.enter().append("rect").classed(r.cn.scrollBackground,!0).attr("fill","none"),be.attr("width",function(qe){return qe.width}).attr("height",function(qe){return qe.height}),W.each(function(qe){c.setClipUrl(n.select(this),p(ae,qe),ae)});var ke=W.selectAll("."+r.cn.yColumn).data(function(qe){return qe.columns},l.keyFun);ke.enter().append("g").classed(r.cn.yColumn,!0),ke.exit().remove(),ke.attr("transform",function(qe){return a(qe.x,0)}),de&&ke.call(n.behavior.drag().origin(function(qe){var At=n.select(this);return N(At,qe,-r.uplift),f(this),qe.calcdata.columnDragInProgress=!0,b(W.filter(function(kt){return qe.calcdata.key===kt.key}),ae),qe}).on("drag",function(qe){var At=n.select(this),kt=function(St){return(qe===St?n.event.x:St.x)+St.columnWidth/2};qe.x=Math.max(-r.overdrag,Math.min(qe.calcdata.width+r.overdrag-qe.columnWidth,n.event.x));var Ve=y(ke).filter(function(St){return St.calcdata.key===qe.calcdata.key}),ft=Ve.sort(function(St,Wt){return kt(St)-kt(Wt)});ft.forEach(function(St,Wt){St.xIndex=Wt,St.x=qe===St?St.x:St.xScale(St)}),ke.filter(function(St){return qe!==St}).transition().ease(r.transitionEase).duration(r.transitionDuration).attr("transform",function(St){return a(St.x,0)}),At.call(o).attr("transform",a(qe.x,-r.uplift))}).on("dragend",function(qe){var At=n.select(this),kt=qe.calcdata;qe.x=qe.xScale(qe),qe.calcdata.columnDragInProgress=!1,N(At,qe,0),D(ae,kt,kt.columns.map(function(Ve){return Ve.xIndex}))})),ke.each(function(qe){c.setClipUrl(n.select(this),d(ae,qe),ae)});var Pe=ke.selectAll("."+r.cn.columnBlock).data(h.splitToPanels,l.keyFun);Pe.enter().append("g").classed(r.cn.columnBlock,!0).attr("id",function(qe){return qe.key}),Pe.style("cursor",function(qe){return qe.dragHandle?"ew-resize":qe.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var je=Pe.filter(U),ze=Pe.filter(G);de&&ze.call(n.behavior.drag().origin(function(qe){return n.event.stopPropagation(),qe}).on("drag",j(ae,W,-1)).on("dragend",function(){})),m(ae,W,je,Pe),m(ae,W,ze,Pe);var Ze=W.selectAll("."+r.cn.scrollAreaClip).data(l.repeat,l.keyFun);Ze.enter().append("clipPath").classed(r.cn.scrollAreaClip,!0).attr("id",function(qe){return p(ae,qe)});var tt=Ze.selectAll("."+r.cn.scrollAreaClipRect).data(l.repeat,l.keyFun);tt.enter().append("rect").classed(r.cn.scrollAreaClipRect,!0).attr("x",-r.overdrag).attr("y",-r.uplift).attr("fill","none"),tt.attr("width",function(qe){return qe.width+2*r.overdrag}).attr("height",function(qe){return qe.height+r.uplift});var Ce=ke.selectAll("."+r.cn.columnBoundary).data(l.repeat,l.keyFun);Ce.enter().append("g").classed(r.cn.columnBoundary,!0);var Ae=ke.selectAll("."+r.cn.columnBoundaryClippath).data(l.repeat,l.keyFun);Ae.enter().append("clipPath").classed(r.cn.columnBoundaryClippath,!0),Ae.attr("id",function(qe){return d(ae,qe)});var Ne=Ae.selectAll("."+r.cn.columnBoundaryRect).data(l.repeat,l.keyFun);Ne.enter().append("rect").classed(r.cn.columnBoundaryRect,!0).attr("fill","none"),Ne.attr("width",function(qe){return qe.columnWidth+2*s(qe)}).attr("height",function(qe){return qe.calcdata.height+2*s(qe)+r.uplift}).attr("x",function(qe){return-s(qe)}).attr("y",function(qe){return-s(qe)}),B(null,ze,W)};function s(ee){return Math.ceil(ee.calcdata.maxLineWidth/2)}function p(ee,ae){return"clip"+ee._fullLayout._uid+"_scrollAreaBottomClip_"+ae.key}function d(ee,ae){return"clip"+ee._fullLayout._uid+"_columnBoundaryClippath_"+ae.calcdata.key+"_"+ae.specIndex}function y(ee){return[].concat.apply([],ee.map(function(ae){return ae})).map(function(ae){return ae.__data__})}function b(ee,ae,fe){function de(ke){var Pe=ke.rowBlocks;return ie(Pe,Pe.length-1)+(Pe.length?Q(Pe[Pe.length-1],1/0):1)}var pe=ee.selectAll("."+r.cn.scrollbarKit).data(l.repeat,l.keyFun);pe.enter().append("g").classed(r.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),pe.each(function(ke){var Pe=ke.scrollbarState;Pe.totalHeight=de(ke),Pe.scrollableAreaHeight=ke.groupHeight-X(ke),Pe.currentlyVisibleHeight=Math.min(Pe.totalHeight,Pe.scrollableAreaHeight),Pe.ratio=Pe.currentlyVisibleHeight/Pe.totalHeight,Pe.barLength=Math.max(Pe.ratio*Pe.currentlyVisibleHeight,r.goldenRatio*r.scrollbarWidth),Pe.barWiggleRoom=Pe.currentlyVisibleHeight-Pe.barLength,Pe.wiggleRoom=Math.max(0,Pe.totalHeight-Pe.scrollableAreaHeight),Pe.topY=Pe.barWiggleRoom===0?0:ke.scrollY/Pe.wiggleRoom*Pe.barWiggleRoom,Pe.bottomY=Pe.topY+Pe.barLength,Pe.dragMultiplier=Pe.wiggleRoom/Pe.barWiggleRoom}).attr("transform",function(ke){var Pe=ke.width+r.scrollbarWidth/2+r.scrollbarOffset;return a(Pe,X(ke))});var W=pe.selectAll("."+r.cn.scrollbar).data(l.repeat,l.keyFun);W.enter().append("g").classed(r.cn.scrollbar,!0);var ue=W.selectAll("."+r.cn.scrollbarSlider).data(l.repeat,l.keyFun);ue.enter().append("g").classed(r.cn.scrollbarSlider,!0),ue.attr("transform",function(ke){return a(0,ke.scrollbarState.topY||0)});var me=ue.selectAll("."+r.cn.scrollbarGlyph).data(l.repeat,l.keyFun);me.enter().append("line").classed(r.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",r.scrollbarWidth).attr("stroke-linecap","round").attr("y1",r.scrollbarWidth/2),me.attr("y2",function(ke){return ke.scrollbarState.barLength-r.scrollbarWidth/2}).attr("stroke-opacity",function(ke){return ke.columnDragInProgress||!ke.scrollbarState.barWiggleRoom||fe?0:.4}),me.transition().delay(0).duration(0),me.transition().delay(r.scrollbarHideDelay).duration(r.scrollbarHideDuration).attr("stroke-opacity",0);var be=W.selectAll("."+r.cn.scrollbarCaptureZone).data(l.repeat,l.keyFun);be.enter().append("line").classed(r.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",r.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ke){var Pe=n.event.y,je=this.getBoundingClientRect(),ze=ke.scrollbarState,Ze=Pe-je.top,tt=n.scale.linear().domain([0,ze.scrollableAreaHeight]).range([0,ze.totalHeight]).clamp(!0);ze.topY<=Ze&&Ze<=ze.bottomY||j(ae,ee,null,tt(Ze-ze.barLength/2))(ke)}).call(n.behavior.drag().origin(function(ke){return n.event.stopPropagation(),ke.scrollbarState.scrollbarScrollInProgress=!0,ke}).on("drag",j(ae,ee)).on("dragend",function(){})),be.attr("y2",function(ke){return ke.scrollbarState.scrollableAreaHeight}),ae._context.staticPlot&&(me.remove(),be.remove())}function m(ee,ae,fe,de){var pe=_(fe),W=T(pe);R(W);var ue=g(W);z(ue);var me=k(W),be=A(me);L(be),E(be,ae,de,ee),oe(W)}function _(ee){var ae=ee.selectAll("."+r.cn.columnCells).data(l.repeat,l.keyFun);return ae.enter().append("g").classed(r.cn.columnCells,!0),ae.exit().remove(),ae}function T(ee){var ae=ee.selectAll("."+r.cn.columnCell).data(h.splitToCells,function(fe){return fe.keyWithinBlock});return ae.enter().append("g").classed(r.cn.columnCell,!0),ae.exit().remove(),ae}function g(ee){var ae=ee.selectAll("."+r.cn.cellRect).data(l.repeat,function(fe){return fe.keyWithinBlock});return ae.enter().append("rect").classed(r.cn.cellRect,!0),ae}function A(ee){var ae=ee.selectAll("."+r.cn.cellText).data(l.repeat,function(fe){return fe.keyWithinBlock});return ae.enter().append("text").classed(r.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){n.event.stopPropagation()}),ae}function k(ee){var ae=ee.selectAll("."+r.cn.cellTextHolder).data(l.repeat,function(fe){return fe.keyWithinBlock});return ae.enter().append("g").classed(r.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ae}function R(ee){ee.each(function(ae,fe){var de=ae.calcdata.cells.font,pe=ae.column.specIndex,W={size:F(de.size,pe,fe),color:F(de.color,pe,fe),family:F(de.family,pe,fe)};ae.rowNumber=ae.key,ae.align=F(ae.calcdata.cells.align,pe,fe),ae.cellBorderWidth=F(ae.calcdata.cells.line.width,pe,fe),ae.font=W})}function L(ee){ee.each(function(ae){c.font(n.select(this),ae.font)})}function z(ee){ee.attr("width",function(ae){return ae.column.columnWidth}).attr("stroke-width",function(ae){return ae.cellBorderWidth}).each(function(ae){var fe=n.select(this);i.stroke(fe,F(ae.calcdata.cells.line.color,ae.column.specIndex,ae.rowNumber)),i.fill(fe,F(ae.calcdata.cells.fill.color,ae.column.specIndex,ae.rowNumber))})}function E(ee,ae,fe,de){ee.text(function(pe){var W=pe.column.specIndex,ue=pe.rowNumber,me=pe.value,be=typeof me=="string",ke=be&&me.match(/<br>/i),Pe=!be||ke;pe.mayHaveMarkup=be&&me.match(/[<&>]/);var je=S(me);pe.latex=je;var ze=je?"":F(pe.calcdata.cells.prefix,W,ue)||"",Ze=je?"":F(pe.calcdata.cells.suffix,W,ue)||"",tt=je?null:F(pe.calcdata.cells.format,W,ue)||null,Ce=ze+(tt?n.format(tt)(pe.value):pe.value)+Ze,Ae;pe.wrappingNeeded=!pe.wrapped&&!Pe&&!je&&(Ae=C(Ce)),pe.cellHeightMayIncrease=ke||je||pe.mayHaveMarkup||(Ae===void 0?C(Ce):Ae),pe.needsConvertToTspans=pe.mayHaveMarkup||pe.wrappingNeeded||pe.latex;var Ne;if(pe.wrappingNeeded){var qe=r.wrapSplitCharacter===" "?Ce.replace(/<a href=/ig,"<a_href="):Ce,At=qe.split(r.wrapSplitCharacter),kt=r.wrapSplitCharacter===" "?At.map(function(Ve){return Ve.replace(/<a_href=/ig,"<a href=")}):At;pe.fragments=kt.map(function(Ve){return{text:Ve,width:null}}),pe.fragments.push({fragment:r.wrapSpacer,width:null}),Ne=kt.join(r.lineBreaker)+r.lineBreaker+r.wrapSpacer}else delete pe.fragments,Ne=Ce;return Ne}).attr("dy",function(pe){return pe.needsConvertToTspans?0:"0.75em"}).each(function(pe){var W=this,ue=n.select(W),me=pe.wrappingNeeded?K:te;pe.needsConvertToTspans?t.convertToTspans(ue,de,me(fe,W,ae,de,pe)):n.select(W.parentNode).attr("transform",function(be){return a(J(be),r.cellPad)}).attr("text-anchor",function(be){return{left:"start",center:"middle",right:"end"}[be.align]})})}function S(ee){return typeof ee=="string"&&ee.match(r.latexCheck)}function C(ee){return ee.indexOf(r.wrapSplitCharacter)!==-1}function D(ee,ae,fe){var de=ae.gdColumnsOriginalOrder;ae.gdColumns.sort(function(pe,W){return fe[de.indexOf(pe)]-fe[de.indexOf(W)]}),ae.columnorder=fe,ee.emit("plotly_restyle")}function F(ee,ae,fe){if(Array.isArray(ee)){var de=ee[Math.min(ae,ee.length-1)];return Array.isArray(de)?de[Math.min(fe,de.length-1)]:de}else return ee}function N(ee,ae,fe){ee.transition().ease(r.releaseTransitionEase).duration(r.releaseTransitionDuration).attr("transform",a(ae.x,fe))}function G(ee){return ee.type==="cells"}function U(ee){return ee.type==="header"}function X(ee){var ae=ee.rowBlocks.length?ee.rowBlocks[0].auxiliaryBlocks:[];return ae.reduce(function(fe,de){return fe+Q(de,1/0)},0)}function I(ee,ae,fe){for(var de=[],pe=0,W=0;W<ee.length;W++){for(var ue=ee[W],me=ue.rows,be=0,ke=0;ke<me.length;ke++)be+=me[ke].rowHeight;ue.allRowsHeight=be;var Pe=pe+be,je=ae,ze=je+fe;je<Pe&&ze>pe&&de.push(W),pe+=be}return de}function B(ee,ae,fe){var de=y(ae)[0];if(de!==void 0){var pe=de.rowBlocks,W=de.calcdata,ue=ie(pe,pe.length),me=de.calcdata.groupHeight-X(de),be=W.scrollY=Math.max(0,Math.min(ue-me,W.scrollY)),ke=I(pe,be,me);ke.length===1&&(ke[0]===pe.length-1?ke.unshift(ke[0]-1):ke.push(ke[0]+1)),ke[0]%2&&ke.reverse(),ae.each(function(Pe,je){Pe.page=ke[je],Pe.scrollY=be}),ae.attr("transform",function(Pe){var je=ie(Pe.rowBlocks,Pe.page)-Pe.scrollY;return a(0,je)}),ee&&(H(ee,fe,ae,ke,de.prevPages,de,0),H(ee,fe,ae,ke,de.prevPages,de,1),b(fe,ee))}}function j(ee,ae,fe,de){return function(W){var ue=W.calcdata?W.calcdata:W,me=ae.filter(function(je){return ue.key===je.key}),be=fe||ue.scrollbarState.dragMultiplier,ke=ue.scrollY;ue.scrollY=de===void 0?ue.scrollY+be*n.event.dy:de;var Pe=me.selectAll("."+r.cn.yColumn).selectAll("."+r.cn.columnBlock).filter(G);return B(ee,Pe,me),ue.scrollY===ke}}function H(ee,ae,fe,de,pe,W,ue){var me=de[ue]!==pe[ue];me&&(clearTimeout(W.currentRepaint[ue]),W.currentRepaint[ue]=setTimeout(function(){var be=fe.filter(function(ke,Pe){return Pe===ue&&de[Pe]!==pe[Pe]});m(ee,ae,be,fe),pe[ue]=de[ue]}))}function K(ee,ae,fe,de){return function(){var W=n.select(ae.parentNode);W.each(function(ue){var me=ue.fragments;W.selectAll("tspan.line").each(function(Ce,Ae){me[Ae].width=this.getComputedTextLength()});var be=me[me.length-1].width,ke=me.slice(0,-1),Pe=[],je,ze,Ze=0,tt=ue.column.columnWidth-2*r.cellPad;for(ue.value="";ke.length;)je=ke.shift(),ze=je.width+be,Ze+ze>tt&&(ue.value+=Pe.join(r.wrapSpacer)+r.lineBreaker,Pe=[],Ze=0),Pe.push(je.text),Ze+=ze;Ze&&(ue.value+=Pe.join(r.wrapSpacer)),ue.wrapped=!0}),W.selectAll("tspan.line").remove(),E(W.select("."+r.cn.cellText),fe,ee,de),n.select(ae.parentNode.parentNode).call(oe)}}function te(ee,ae,fe,de,pe){return function(){if(!pe.settledY){var ue=n.select(ae.parentNode),me=se(pe),be=pe.key-me.firstRowIndex,ke=me.rows[be].rowHeight,Pe=pe.cellHeightMayIncrease?ae.parentNode.getBoundingClientRect().height+2*r.cellPad:ke,je=Math.max(Pe,ke),ze=je-me.rows[be].rowHeight;ze&&(me.rows[be].rowHeight=je,ee.selectAll("."+r.cn.columnCell).call(oe),B(null,ee.filter(G),0),b(fe,de,!0)),ue.attr("transform",function(){var Ze=this,tt=Ze.parentNode,Ce=tt.getBoundingClientRect(),Ae=n.select(Ze.parentNode).select("."+r.cn.cellRect).node().getBoundingClientRect(),Ne=Ze.transform.baseVal.consolidate(),qe=Ae.top-Ce.top+(Ne?Ne.matrix.f:r.cellPad);return a(J(pe,n.select(Ze.parentNode).select("."+r.cn.cellTextHolder).node().getBoundingClientRect().width),qe)}),pe.settledY=!0}}}function J(ee,ae){switch(ee.align){case"left":return r.cellPad;case"right":return ee.column.columnWidth-(ae||0)-r.cellPad;case"center":return(ee.column.columnWidth-(ae||0))/2;default:return r.cellPad}}function oe(ee){ee.attr("transform",function(ae){var fe=ae.rowBlocks[0].auxiliaryBlocks.reduce(function(ue,me){return ue+Q(me,1/0)},0),de=se(ae),pe=Q(de,ae.key),W=pe+fe;return a(0,W)}).selectAll("."+r.cn.cellRect).attr("height",function(ae){return re(se(ae),ae.key).rowHeight})}function ie(ee,ae){for(var fe=0,de=ae-1;de>=0;de--)fe+=V(ee[de]);return fe}function Q(ee,ae){for(var fe=0,de=0;de<ee.rows.length&&ee.rows[de].rowIndex<ae;de++)fe+=ee.rows[de].rowHeight;return fe}function V(ee){var ae=ee.allRowsHeight;if(ae!==void 0)return ae;for(var fe=0,de=0;de<ee.rows.length;de++)fe+=ee.rows[de].rowHeight;return ee.allRowsHeight=fe,fe}function se(ee){return ee.rowBlocks[ee.page]}function re(ee,ae){return ee.rows[ae-ee.firstRowIndex]}},{"../../components/color":643,"../../components/drawing":665,"../../lib":778,"../../lib/gup":775,"../../lib/svg_text_utils":803,"./constants":1319,"./data_preparation_helper":1320,"./data_split_helpers":1321,d3:169}],1325:[function(e,v,M){var r=e("../../plots/template_attributes").hovertemplateAttrs,n=e("../../plots/template_attributes").texttemplateAttrs,l=e("../../components/colorscale/attributes"),c=e("../../plots/domain").attributes,t=e("../pie/attributes"),f=e("../sunburst/attributes"),a=e("./constants"),o=e("../../lib/extend").extendFlat;v.exports={labels:f.labels,parents:f.parents,values:f.values,branchvalues:f.branchvalues,count:f.count,level:f.level,maxdepth:f.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:o({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:f.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:f.marker.line,editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:o({},t.textfont,{}),editType:"calc"},text:t.text,textinfo:f.textinfo,texttemplate:n({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:t.hovertext,hoverinfo:f.hoverinfo,hovertemplate:r({},{keys:a.eventDataKeys}),textfont:t.textfont,insidetextfont:t.insidetextfont,outsidetextfont:o({},t.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:t.sort,root:f.root,domain:c({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/domain":855,"../../plots/template_attributes":906,"../pie/attributes":1161,"../sunburst/attributes":1299,"./constants":1328}],1326:[function(e,v,M){var r=e("../../plots/plots");M.name="treemap",M.plot=function(n,l,c,t){r.plotBasePlot(M.name,n,l,c,t)},M.clean=function(n,l,c,t){r.cleanBasePlot(M.name,n,l,c,t)}},{"../../plots/plots":891}],1327:[function(e,v,M){var r=e("../sunburst/calc");M.calc=function(n,l){return r.calc(n,l)},M.crossTraceCalc=function(n){return r._runCrossTraceCalc("treemap",n)}},{"../sunburst/calc":1301}],1328:[function(e,v,M){v.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1329:[function(e,v,M){var r=e("../../lib"),n=e("./attributes"),l=e("../../components/color"),c=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText,f=e("../bar/constants").TEXTPAD,a=e("../../components/colorscale"),o=a.hasColorscale,u=a.handleDefaults;v.exports=function(i,s,p,d){function y(C,D){return r.coerce(i,s,n,C,D)}var b=y("labels"),m=y("parents");if(!b||!b.length||!m||!m.length){s.visible=!1;return}var _=y("values");_&&_.length?y("branchvalues"):y("count"),y("level"),y("maxdepth");var T=y("tiling.packing");T==="squarify"&&y("tiling.squarifyratio"),y("tiling.flip"),y("tiling.pad");var g=y("text");y("texttemplate"),s.texttemplate||y("textinfo",Array.isArray(g)?"text+label":"label"),y("hovertext"),y("hovertemplate");var A=y("pathbar.visible"),k="auto";t(i,s,d,y,k,{hasPathbar:A,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("textposition");var R=s.textposition.indexOf("bottom")!==-1,L=y("marker.line.width");L&&y("marker.line.color",d.paper_bgcolor);var z=y("marker.colors"),E=s._hasColorscale=o(i,"marker","colors")||(i.marker||{}).coloraxis;E?u(i,s,d,y,{prefix:"marker.",cLetter:"c"}):y("marker.depthfade",!(z||[]).length);var S=s.textfont.size*2;y("marker.pad.t",R?S/4:S),y("marker.pad.l",S/4),y("marker.pad.r",S/4),y("marker.pad.b",R?S:S/4),E&&u(i,s,d,y,{prefix:"marker.",cLetter:"c"}),s._hovered={marker:{line:{width:2,color:l.contrast(d.paper_bgcolor)}}},A&&(y("pathbar.thickness",s.pathbar.textfont.size+2*f),y("pathbar.side"),y("pathbar.edgeshape")),y("sort"),y("root.color"),c(s,d,y),s._length=null}},{"../../components/color":643,"../../components/colorscale":655,"../../lib":778,"../../plots/domain":855,"../bar/constants":923,"../bar/defaults":925,"./attributes":1325}],1330:[function(e,v,M){var r=e("d3"),n=e("../../lib"),l=e("../../components/drawing"),c=e("../../lib/svg_text_utils"),t=e("./partition"),f=e("./style").styleOne,a=e("./constants"),o=e("../sunburst/helpers"),u=e("../sunburst/fx"),h=!0;v.exports=function(s,p,d,y,b){var m=b.barDifY,_=b.width,T=b.height,g=b.viewX,A=b.viewY,k=b.pathSlice,R=b.toMoveInsideSlice,L=b.strTransform,z=b.hasTransition,E=b.handleSlicesExit,S=b.makeUpdateSliceInterpolator,C=b.makeUpdateTextInterpolator,D={},F=s._fullLayout,N=p[0],G=N.trace,U=N.hierarchy,X=_/G._entryDepth,I=o.listPath(d.data,"id"),B=t(U.copy(),[_,T],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();B=B.filter(function(H){var K=I.indexOf(H.data.id);return K===-1?!1:(H.x0=X*K,H.x1=X*(K+1),H.y0=m,H.y1=m+T,H.onPathbar=!0,!0)}),B.reverse(),y=y.data(B,o.getPtId),y.enter().append("g").classed("pathbar",!0),E(y,h,D,[_,T],k),y.order();var j=y;z&&(j=j.transition().each("end",function(){var H=r.select(this);o.setSliceCursor(H,s,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),j.each(function(H){H._hoverX=g(H.x1-Math.min(_,T)/2),H._hoverY=A(H.y1-T/2);var K=r.select(this),te=n.ensureSingle(K,"path","surface",function(Q){Q.style("pointer-events","all")});z?te.transition().attrTween("d",function(Q){var V=S(Q,h,D,[_,T]);return function(se){return k(V(se))}}):te.attr("d",k),K.call(u,d,s,p,{styleOne:f,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,s,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:s._transitioning}),te.call(f,H,G,{hovered:!1}),H._text=(o.getPtLabel(H)||"").split("<br>").join(" ")||"";var J=n.ensureSingle(K,"g","slicetext"),oe=n.ensureSingle(J,"text","",function(Q){Q.attr("data-notex",1)}),ie=n.ensureUniformFontSize(s,o.determineTextFont(G,H,F.font,{onPathbar:!0}));oe.text(H._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(l.font,ie).call(c.convertToTspans,s),H.textBB=l.bBox(oe.node()),H.transform=R(H,{fontSize:ie.size,onPathbar:!0}),H.transform.fontSize=ie.size,z?oe.transition().attrTween("transform",function(Q){var V=C(Q,h,D,[_,T]);return function(se){return L(V(se))}}):oe.attr("transform",L(H))})}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../sunburst/fx":1304,"../sunburst/helpers":1305,"./constants":1328,"./partition":1335,"./style":1337,d3:169}],1331:[function(e,v,M){var r=e("d3"),n=e("../../lib"),l=e("../../components/drawing"),c=e("../../lib/svg_text_utils"),t=e("./partition"),f=e("./style").styleOne,a=e("./constants"),o=e("../sunburst/helpers"),u=e("../sunburst/fx"),h=e("../sunburst/plot").formatSliceLabel,i=!1;v.exports=function(p,d,y,b,m){var _=m.width,T=m.height,g=m.viewX,A=m.viewY,k=m.pathSlice,R=m.toMoveInsideSlice,L=m.strTransform,z=m.hasTransition,E=m.handleSlicesExit,S=m.makeUpdateSliceInterpolator,C=m.makeUpdateTextInterpolator,D=m.prevEntry,F={},N=p._fullLayout,G=d[0],U=G.trace,X=U.textposition.indexOf("left")!==-1,I=U.textposition.indexOf("right")!==-1,B=U.textposition.indexOf("bottom")!==-1,j=!B&&!U.marker.pad.t||B&&!U.marker.pad.b,H=t(y,[_,T],{packing:U.tiling.packing,squarifyratio:U.tiling.squarifyratio,flipX:U.tiling.flip.indexOf("x")>-1,flipY:U.tiling.flip.indexOf("y")>-1,pad:{inner:U.tiling.pad,top:U.marker.pad.t,left:U.marker.pad.l,right:U.marker.pad.r,bottom:U.marker.pad.b}}),K=H.descendants(),te=1/0,J=-1/0;K.forEach(function(se){var re=se.depth;re>=U._maxDepth?(se.x0=se.x1=(se.x0+se.x1)/2,se.y0=se.y1=(se.y0+se.y1)/2):(te=Math.min(te,re),J=Math.max(J,re))}),b=b.data(K,o.getPtId),U._maxVisibleLayers=isFinite(J)?J-te+1:0,b.enter().append("g").classed("slice",!0),E(b,i,F,[_,T],k),b.order();var oe=null;if(z&&D){var ie=o.getPtId(D);b.each(function(se){oe===null&&o.getPtId(se)===ie&&(oe={x0:se.x0,x1:se.x1,y0:se.y0,y1:se.y1})})}var Q=function(){return oe||{x0:0,x1:_,y0:0,y1:T}},V=b;return z&&(V=V.transition().each("end",function(){var se=r.select(this);o.setSliceCursor(se,p,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(se){var re=o.isHeader(se,U);se._hoverX=g(se.x1-U.marker.pad.r),se._hoverY=A(B?se.y1-U.marker.pad.b/2:se.y0+U.marker.pad.t/2);var ee=r.select(this),ae=n.ensureSingle(ee,"path","surface",function(W){W.style("pointer-events","all")});z?ae.transition().attrTween("d",function(W){var ue=S(W,i,Q(),[_,T]);return function(me){return k(ue(me))}}):ae.attr("d",k),ee.call(u,y,p,d,{styleOne:f,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,p,{isTransitioning:p._transitioning}),ae.call(f,se,U,{hovered:!1}),se.x0===se.x1||se.y0===se.y1?se._text="":re?se._text=j?"":o.getPtLabel(se)||"":se._text=h(se,y,U,d,N)||"";var fe=n.ensureSingle(ee,"g","slicetext"),de=n.ensureSingle(fe,"text","",function(W){W.attr("data-notex",1)}),pe=n.ensureUniformFontSize(p,o.determineTextFont(U,se,N.font));de.text(se._text||" ").classed("slicetext",!0).attr("text-anchor",I?"end":X||re?"start":"middle").call(l.font,pe).call(c.convertToTspans,p),se.textBB=l.bBox(de.node()),se.transform=R(se,{fontSize:pe.size,isHeader:re}),se.transform.fontSize=pe.size,z?de.transition().attrTween("transform",function(W){var ue=C(W,i,Q(),[_,T]);return function(me){return L(ue(me))}}):de.attr("transform",L(se))}),oe}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../sunburst/fx":1304,"../sunburst/helpers":1305,"../sunburst/plot":1309,"./constants":1328,"./partition":1335,"./style":1337,d3:169}],1332:[function(e,v,M){v.exports={moduleType:"trace",name:"treemap",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1205,"./attributes":1325,"./base_plot":1326,"./calc":1327,"./defaults":1329,"./layout_attributes":1333,"./layout_defaults":1334,"./plot":1336,"./style":1337}],1333:[function(e,v,M){v.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1334:[function(e,v,M){var r=e("../../lib"),n=e("./layout_attributes");v.exports=function(c,t){function f(a,o){return r.coerce(c,t,n,a,o)}f("treemapcolorway",t.colorway),f("extendtreemapcolors")}},{"../../lib":778,"./layout_attributes":1333}],1335:[function(e,v,M){var r=e("d3-hierarchy");v.exports=function(t,f,a){var o=a.flipX,u=a.flipY,h=a.packing==="dice-slice",i=a.pad[u?"bottom":"top"],s=a.pad[o?"right":"left"],p=a.pad[o?"left":"right"],d=a.pad[u?"top":"bottom"],y;h&&(y=s,s=i,i=y,y=p,p=d,d=y);var b=r.treemap().tile(n(a.packing,a.squarifyratio)).paddingInner(a.pad.inner).paddingLeft(s).paddingRight(p).paddingTop(i).paddingBottom(d).size(h?[f[1],f[0]]:f)(t);return(h||o||u)&&l(b,f,{swapXY:h,flipX:o,flipY:u}),b};function n(c,t){switch(c){case"squarify":return r.treemapSquarify.ratio(t);case"binary":return r.treemapBinary;case"dice":return r.treemapDice;case"slice":return r.treemapSlice;default:return r.treemapSliceDice}}function l(c,t,f){var a;f.swapXY&&(a=c.x0,c.x0=c.y0,c.y0=a,a=c.x1,c.x1=c.y1,c.y1=a),f.flipX&&(a=c.x0,c.x0=t[0]-c.x1,c.x1=t[0]-a),f.flipY&&(a=c.y0,c.y0=t[1]-c.y1,c.y1=t[1]-a);var o=c.children;if(o)for(var u=0;u<o.length;u++)l(o[u],t,f)}},{"d3-hierarchy":161}],1336:[function(e,v,M){var r=e("d3"),n=e("../sunburst/helpers"),l=e("../../lib"),c=e("../bar/constants").TEXTPAD,t=e("../bar/plot"),f=t.toMoveInsideBar,a=e("../bar/uniform_text"),o=a.recordMinTextSize,u=a.clearMinTextSize,h=e("../bar/style").resizeText,i=e("./constants"),s=e("./draw_descendants"),p=e("./draw_ancestors");v.exports=function(b,m,_,T){var g=b._fullLayout,A=g._treemaplayer,k,R,L=!_;if(u("treemap",g),k=A.selectAll("g.trace.treemap").data(m,function(E){return E[0].trace.uid}),k.enter().append("g").classed("trace",!0).classed("treemap",!0),k.order(),!g.uniformtext.mode&&n.hasTransition(_)){T&&(R=T());var z=r.transition().duration(_.duration).ease(_.easing).each("end",function(){R&&R()}).each("interrupt",function(){R&&R()});z.each(function(){A.selectAll("g.trace").each(function(E){y(b,E,this,_)})})}else k.each(function(E){y(b,E,this,_)}),g.uniformtext.mode&&h(b,g._treemaplayer.selectAll(".trace"),"treemap");L&&k.exit().remove()};function d(b){return n.isHierarchyRoot(b)?"":n.getPtId(b)}function y(b,m,_,T){var g=b._fullLayout,A=m[0],k=A.trace,R=A.hierarchy,L=n.findEntryWithLevel(R,k.level),z=r.select(_),E=z.selectAll("g.pathbar"),S=z.selectAll("g.slice");if(!L){E.remove(),S.remove();return}var C=n.isHierarchyRoot(L),D=!g.uniformtext.mode&&n.hasTransition(T),F=n.getMaxDepth(k),N=function(Ve){return Ve.data.depth-L.data.depth<F},G=g._size,U=k.domain,X=G.w*(U.x[1]-U.x[0]),I=G.h*(U.y[1]-U.y[0]),B=X,j=k.pathbar.thickness,H=k.marker.line.width+i.gapWithPathbar,K=k.pathbar.visible?k.pathbar.side.indexOf("bottom")>-1?I+H:-(j+H):0,te={x0:B,x1:B,y0:K,y1:K+j},J=function(Ve,ft,St){var Wt=k.tiling.pad,Qt=function(Pt){return Pt-Wt<=ft.x0},zt=function(Pt){return Pt+Wt>=ft.x1},$t=function(Pt){return Pt-Wt<=ft.y0},rr=function(Pt){return Pt+Wt>=ft.y1};return{x0:Qt(Ve.x0-Wt)?0:zt(Ve.x0-Wt)?St[0]:Ve.x0,x1:Qt(Ve.x1+Wt)?0:zt(Ve.x1+Wt)?St[0]:Ve.x1,y0:$t(Ve.y0-Wt)?0:rr(Ve.y0-Wt)?St[1]:Ve.y0,y1:$t(Ve.y1+Wt)?0:rr(Ve.y1+Wt)?St[1]:Ve.y1}},oe=null,ie={},Q={},V=null,se=function(Ve,ft){return ft?ie[d(Ve)]:Q[d(Ve)]},re=function(Ve,ft,St,Wt){if(ft)return ie[d(R)]||te;var Qt=Q[k.level]||St;return N(Ve)?J(Ve,Qt,Wt):{}};A.hasMultipleRoots&&C&&F++,k._maxDepth=F,k._backgroundColor=g.paper_bgcolor,k._entryDepth=L.data.depth,k._atRootLevel=C;var ee=-X/2+G.l+G.w*(U.x[1]+U.x[0])/2,ae=-I/2+G.t+G.h*(1-(U.y[1]+U.y[0])/2),fe=function(Ve){return ee+Ve},de=function(Ve){return ae+Ve},pe=de(0),W=fe(0),ue=function(Ve){return W+Ve},me=function(Ve){return pe+Ve};function be(Ve,ft){return Ve+","+ft}var ke=ue(0),Pe=function(Ve){Ve.x=Math.max(ke,Ve.x)},je=k.pathbar.edgeshape,ze=function(Ve){var ft=ue(Math.max(Math.min(Ve.x0,Ve.x0),0)),St=ue(Math.min(Math.max(Ve.x1,Ve.x1),B)),Wt=me(Ve.y0),Qt=me(Ve.y1),zt=j/2,$t={},rr={};$t.x=ft,rr.x=St,$t.y=rr.y=(Wt+Qt)/2;var Pt={x:ft,y:Wt},Lt={x:St,y:Wt},dt={x:St,y:Qt},lt={x:ft,y:Qt};return je===">"?(Pt.x-=zt,Lt.x-=zt,dt.x-=zt,lt.x-=zt):je==="/"?(dt.x-=zt,lt.x-=zt,$t.x-=zt/2,rr.x-=zt/2):je==="\\"?(Pt.x-=zt,Lt.x-=zt,$t.x-=zt/2,rr.x-=zt/2):je==="<"&&($t.x-=zt,rr.x-=zt),Pe(Pt),Pe(lt),Pe($t),Pe(Lt),Pe(dt),Pe(rr),"M"+be(Pt.x,Pt.y)+"L"+be(Lt.x,Lt.y)+"L"+be(rr.x,rr.y)+"L"+be(dt.x,dt.y)+"L"+be(lt.x,lt.y)+"L"+be($t.x,$t.y)+"Z"},Ze=function(Ve){var ft=fe(Ve.x0),St=fe(Ve.x1),Wt=de(Ve.y0),Qt=de(Ve.y1),zt=St-ft,$t=Qt-Wt;if(!zt||!$t)return"";var rr=0,Pt=zt>2*rr&&$t>2*rr?rr:0,Lt=function(dt,lt){return Pt?"a"+be(Pt,Pt)+" 0 0 1 "+be(dt,lt):""};return"M"+be(ft,Wt+Pt)+Lt(Pt,-Pt)+"L"+be(St-Pt,Wt)+Lt(Pt,Pt)+"L"+be(St,Qt-Pt)+Lt(-Pt,Pt)+"L"+be(ft+Pt,Qt)+Lt(-Pt,-Pt)+"Z"},tt=function(Ve,ft){var St=Ve.x0,Wt=Ve.x1,Qt=Ve.y0,zt=Ve.y1,$t=Ve.textBB,rr=function(He){return k.textposition.indexOf(He)!==-1},Pt=rr("bottom"),Lt=rr("top")||ft.isHeader&&!Pt,dt=Lt?"start":Pt?"end":"middle",lt=rr("right"),Te=rr("left")||ft.onPathbar,Le=Te?-1:lt?1:0,Be=k.marker.pad;if(ft.isHeader){if(St+=Be.l-c,Wt-=Be.r-c,St>=Wt){var et=(St+Wt)/2;St=et,Wt=et}var Me;Pt?(Me=zt-Be.b,Qt<Me&&Me<zt&&(Qt=Me)):(Me=Qt+Be.t,Qt<Me&&Me<zt&&(zt=Me))}var Ie=f(St,Wt,Qt,zt,$t,{isHorizontal:!1,constrained:!0,angle:0,anchor:dt,leftToRight:Le});return Ie.fontSize=ft.fontSize,Ie.targetX=fe(Ie.targetX),Ie.targetY=de(Ie.targetY),isNaN(Ie.targetX)||isNaN(Ie.targetY)?{}:(St!==Wt&&Qt!==zt&&o(k.type,Ie,g),{scale:Ie.scale,rotate:Ie.rotate,textX:Ie.textX,textY:Ie.textY,anchorX:Ie.anchorX,anchorY:Ie.anchorY,targetX:Ie.targetX,targetY:Ie.targetY})},Ce=function(Ve,ft){for(var St,Wt=0,Qt=Ve;!St&&Wt<F;)Wt++,Qt=Qt.parent,Qt?St=se(Qt,ft):Wt=F;return St||{}},Ae=function(Ve,ft,St,Wt){var Qt=se(Ve,ft),zt;if(ft)zt=te;else{var $t=se(L,ft);$t?zt=J(Ve,$t,Wt):zt={}}return r.interpolate(Qt,zt)},Ne=function(Ve,ft,St,Wt){var Qt=se(Ve,ft),zt;if(Qt)zt=Qt;else if(ft)zt=te;else if(oe)if(Ve.parent){var $t=V||St;$t&&!ft?zt=J(Ve,$t,Wt):(zt={},l.extendFlat(zt,Ce(Ve,ft)))}else zt=Ve;else zt={};return r.interpolate(zt,{x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1})},qe=function(Ve,ft,St,Wt){var Qt=se(Ve,ft),zt={},$t=re(Ve,ft,St,Wt);l.extendFlat(zt,{transform:tt({x0:$t.x0,x1:$t.x1,y0:$t.y0,y1:$t.y1,textBB:Ve.textBB,_text:Ve._text},{isHeader:n.isHeader(Ve,k)})}),Qt?zt=Qt:Ve.parent&&l.extendFlat(zt,Ce(Ve,ft));var rr=Ve.transform;return Ve.x0!==Ve.x1&&Ve.y0!==Ve.y1&&o(k.type,rr,g),r.interpolate(zt,{transform:{scale:rr.scale,rotate:rr.rotate,textX:rr.textX,textY:rr.textY,anchorX:rr.anchorX,anchorY:rr.anchorY,targetX:rr.targetX,targetY:rr.targetY}})},At=function(Ve,ft,St,Wt,Qt){var zt=Wt[0],$t=Wt[1];D?Ve.exit().transition().each(function(){var rr=r.select(this),Pt=rr.select("path.surface");Pt.transition().attrTween("d",function(dt){var lt=Ae(dt,ft,St,[zt,$t]);return function(Te){return Qt(lt(Te))}});var Lt=rr.select("g.slicetext");Lt.attr("opacity",0)}).remove():Ve.exit().remove()},kt=function(Ve){var ft=Ve.transform;return Ve.x0!==Ve.x1&&Ve.y0!==Ve.y1&&o(k.type,ft,g),l.getTextTransform({textX:ft.textX,textY:ft.textY,anchorX:ft.anchorX,anchorY:ft.anchorY,targetX:ft.targetX,targetY:ft.targetY,scale:ft.scale,rotate:ft.rotate})};D&&(E.each(function(Ve){ie[d(Ve)]={x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1},Ve.transform&&(ie[d(Ve)].transform={textX:Ve.transform.textX,textY:Ve.transform.textY,anchorX:Ve.transform.anchorX,anchorY:Ve.transform.anchorY,targetX:Ve.transform.targetX,targetY:Ve.transform.targetY,scale:Ve.transform.scale,rotate:Ve.transform.rotate})}),S.each(function(Ve){Q[d(Ve)]={x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1},Ve.transform&&(Q[d(Ve)].transform={textX:Ve.transform.textX,textY:Ve.transform.textY,anchorX:Ve.transform.anchorX,anchorY:Ve.transform.anchorY,targetX:Ve.transform.targetX,targetY:Ve.transform.targetY,scale:Ve.transform.scale,rotate:Ve.transform.rotate}),!oe&&n.isEntry(Ve)&&(oe=Ve)})),V=s(b,m,L,S,{width:X,height:I,viewX:fe,viewY:de,pathSlice:Ze,toMoveInsideSlice:tt,prevEntry:oe,makeUpdateSliceInterpolator:Ne,makeUpdateTextInterpolator:qe,handleSlicesExit:At,hasTransition:D,strTransform:kt}),k.pathbar.visible?p(b,m,L,E,{barDifY:K,width:B,height:j,viewX:ue,viewY:me,pathSlice:ze,toMoveInsideSlice:tt,makeUpdateSliceInterpolator:Ne,makeUpdateTextInterpolator:qe,handleSlicesExit:At,hasTransition:D,strTransform:kt}):E.remove()}},{"../../lib":778,"../bar/constants":923,"../bar/plot":932,"../bar/style":935,"../bar/uniform_text":937,"../sunburst/helpers":1305,"./constants":1328,"./draw_ancestors":1330,"./draw_descendants":1331,d3:169}],1337:[function(e,v,M){var r=e("d3"),n=e("../../components/color"),l=e("../../lib"),c=e("../sunburst/helpers"),t=e("../bar/uniform_text").resizeText;function f(o){var u=o._fullLayout._treemaplayer.selectAll(".trace");t(o,u,"treemap"),u.each(function(h){var i=r.select(this),s=h[0],p=s.trace;i.style("opacity",p.opacity),i.selectAll("path.surface").each(function(d){r.select(this).call(a,d,p,{hovered:!1})})})}function a(o,u,h,i){var s=(i||{}).hovered,p=u.data.data,d=p.i,y,b,m=p.color,_=c.isHierarchyRoot(u),T=1;if(s)y=h._hovered.marker.line.color,b=h._hovered.marker.line.width;else if(_&&m===h.root.color)T=100,y="rgba(0,0,0,0)",b=0;else if(y=l.castOption(h,d,"marker.line.color")||n.defaultLine,b=l.castOption(h,d,"marker.line.width")||0,!h._hasColorscale&&!u.onPathbar){var g=h.marker.depthfade;if(g){var A=n.combine(n.addOpacity(h._backgroundColor,.75),m),k;if(g===!0){var R=c.getMaxDepth(h);isFinite(R)?c.isLeaf(u)?k=0:k=h._maxVisibleLayers-(u.data.depth-h._entryDepth):k=u.data.height+1}else k=u.data.depth-h._entryDepth,h._atRootLevel||k++;if(k>0)for(var L=0;L<k;L++){var z=.5*L/k;m=n.combine(n.addOpacity(A,z),m)}}}o.style("stroke-width",b).call(n.fill,m).call(n.stroke,y).style("opacity",T)}v.exports={style:f,styleOne:a}},{"../../components/color":643,"../../lib":778,"../bar/uniform_text":937,"../sunburst/helpers":1305,d3:169}],1338:[function(e,v,M){var r=e("../box/attributes"),n=e("../../lib/extend").extendFlat;v.exports={y:r.y,x:r.x,x0:r.x0,y0:r.y0,name:n({},r.name,{}),orientation:n({},r.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:r.fillcolor,points:n({},r.boxpoints,{}),jitter:n({},r.jitter,{}),pointpos:n({},r.pointpos,{}),width:n({},r.width,{}),marker:r.marker,text:r.text,hovertext:r.hovertext,hovertemplate:r.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":768,"../box/attributes":946}],1339:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/cartesian/axes"),l=e("../box/calc"),c=e("./helpers"),t=e("../../constants/numerical").BADNUM;v.exports=function(h,i){var s=l(h,i);if(s[0].t.empty)return s;for(var p=h._fullLayout,d=n.getFromId(h,i[i.orientation==="h"?"xaxis":"yaxis"]),y=1/0,b=-1/0,m=0,_=0,T=0;T<s.length;T++){var g=s[T],A=g.pts.map(c.extractVal),k=g.bandwidth=a(i,g,A),R=g.span=o(i,g,d,k);if(g.min===g.max&&k===0)R=g.span=[g.min,g.max],g.density=[{v:1,t:R[0]}],g.bandwidth=k,m=Math.max(m,1);else{var L=R[1]-R[0],z=Math.ceil(L/(k/3)),E=L/z;if(!isFinite(E)||!isFinite(z))return r.error("Something went wrong with computing the violin span"),s[0].t.empty=!0,s;var S=c.makeKDE(g,i,A);g.density=new Array(z);for(var C=0,D=R[0];D<R[1]+E/2;C++,D+=E){var F=S(D);g.density[C]={v:F,t:D},m=Math.max(m,F)}}_=Math.max(_,A.length),y=Math.min(y,R[0]),b=Math.max(b,R[1])}var N=n.findExtremes(d,[y,b],{padded:!0});if(i._extremes[d._id]=N,i.width)s[0].t.maxKDE=m;else{var G=p._violinScaleGroupStats,U=i.scalegroup,X=G[U];X?(X.maxKDE=Math.max(X.maxKDE,m),X.maxCount=Math.max(X.maxCount,_)):G[U]={maxKDE:m,maxCount:_}}return s[0].t.labels.kde=r._(h,"kde:"),s};function f(u,h,i){var s=Math.min(h,i/1.349);return 1.059*s*Math.pow(u,-.2)}function a(u,h,i){var s=h.max-h.min;if(!s)return u.bandwidth?u.bandwidth:0;if(u.bandwidth)return Math.max(u.bandwidth,s/1e4);var p=i.length,d=r.stdev(i,p-1,h.mean);return Math.max(f(p,d,h.q3-h.q1),s/100)}function o(u,h,i,s){var p=u.spanmode,d=u.span||[],y=[h.min,h.max],b=[h.min-2*s,h.max+2*s],m;function _(g){var A=d[g],k=i.type==="multicategory"?i.r2c(A):i.d2c(A,0,u[h.valLetter+"calendar"]);return k===t?b[g]:k}p==="soft"?m=b:p==="hard"?m=y:m=[_(0),_(1)];var T={type:"linear",range:m};return n.setConvert(T),T.cleanRange(),m}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axes":828,"../box/calc":947,"./helpers":1342}],1340:[function(e,v,M){var r=e("../box/cross_trace_calc").setPositionOffset,n=["v","h"];v.exports=function(c,t){for(var f=c.calcdata,a=t.xaxis,o=t.yaxis,u=0;u<n.length;u++){for(var h=n[u],i=h==="h"?o:a,s=[],p=0;p<f.length;p++){var d=f[p],y=d[0].t,b=d[0].trace;b.visible===!0&&b.type==="violin"&&!y.empty&&b.orientation===h&&b.xaxis===a._id&&b.yaxis===o._id&&s.push(p)}r("violin",c,s,i)}}},{"../box/cross_trace_calc":948}],1341:[function(e,v,M){var r=e("../../lib"),n=e("../../components/color"),l=e("../box/defaults"),c=e("./attributes");v.exports=function(f,a,o,u){function h(E,S){return r.coerce(f,a,c,E,S)}function i(E,S){return r.coerce2(f,a,c,E,S)}if(l.handleSampleDefaults(f,a,h,u),a.visible!==!1){h("bandwidth"),h("side");var s=h("width");s||(h("scalegroup",a.name),h("scalemode"));var p=h("span"),d;Array.isArray(p)&&(d="manual"),h("spanmode",d);var y=h("line.color",(f.marker||{}).color||o),b=h("line.width"),m=h("fillcolor",n.addOpacity(a.line.color,.5));l.handlePointsDefaults(f,a,h,{prefix:""});var _=i("box.width"),T=i("box.fillcolor",m),g=i("box.line.color",y),A=i("box.line.width",b),k=h("box.visible",!!(_||T||g||A));k||(a.box={visible:!1});var R=i("meanline.color",y),L=i("meanline.width",b),z=h("meanline.visible",!!(R||L));z||(a.meanline={visible:!1})}}},{"../../components/color":643,"../../lib":778,"../box/defaults":949,"./attributes":1338}],1342:[function(e,v,M){var r=e("../../lib"),n={gaussian:function(l){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*l*l)}};M.makeKDE=function(l,c,t){var f=t.length,a=n.gaussian,o=l.bandwidth,u=1/(f*o);return function(h){for(var i=0,s=0;s<f;s++)i+=a((h-t[s])/o);return u*i}},M.getPositionOnKdePath=function(l,c,t){var f,a;c.orientation==="h"?(f="y",a="x"):(f="x",a="y");var o=r.findPointOnPath(l.path,t,a,{pathLength:l.pathLength}),u=l.posCenterPx,h=o[f],i=c.side==="both"?2*u-h:u;return[h,i]},M.getKdeValue=function(l,c,t){var f=l.pts.map(M.extractVal),a=M.makeKDE(l,c,f);return a(t)/l.posDensityScale},M.extractVal=function(l){return l.v}},{"../../lib":778}],1343:[function(e,v,M){var r=e("../../lib"),n=e("../../plots/cartesian/axes"),l=e("../box/hover"),c=e("./helpers");v.exports=function(f,a,o,u,h){var i=f.cd,s=i[0].trace,p=s.hoveron,d=p.indexOf("violins")!==-1,y=p.indexOf("kde")!==-1,b=[],m,_;if(d||y){var T=l.hoverOnBoxes(f,a,o,u);if(y&&T.length>0){var g=f.xa,A=f.ya,k,R,L,z,E;s.orientation==="h"?(E=a,k="y",L=A,R="x",z=g):(E=o,k="x",L=g,R="y",z=A);var S=i[f.index];if(E>=S.span[0]&&E<=S.span[1]){var C=r.extendFlat({},f),D=z.c2p(E,!0),F=c.getKdeValue(S,s,E),N=c.getPositionOnKdePath(S,s,D),G=L._offset,U=L._length;C[k+"0"]=N[0],C[k+"1"]=N[1],C[R+"0"]=C[R+"1"]=D,C[R+"Label"]=R+": "+n.hoverLabelText(z,E)+", "+i[0].t.labels.kde+" "+F.toFixed(3),C.spikeDistance=T[0].spikeDistance;var X=k+"Spike";C[X]=T[0][X],T[0].spikeDistance=void 0,T[0][X]=void 0,C.hovertemplate=!1,b.push(C),_={stroke:f.color},_[k+"1"]=r.constrain(G+N[0],G,G+U),_[k+"2"]=r.constrain(G+N[1],G,G+U),_[R+"1"]=_[R+"2"]=z._offset+D}}d&&(b=b.concat(T))}p.indexOf("points")!==-1&&(m=l.hoverOnPoints(f,a,o));var I=h.selectAll(".violinline-"+s.uid).data(_?[0]:[]);return I.enter().append("line").classed("violinline-"+s.uid,!0).attr("stroke-width",1.5),I.exit().remove(),I.attr(_),u==="closest"?m?[m]:b:(m&&b.push(m),b)}},{"../../lib":778,"../../plots/cartesian/axes":828,"../box/hover":951,"./helpers":1342}],1344:[function(e,v,M){v.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../box/select"),moduleType:"trace",name:"violin",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"../box/defaults":949,"../box/select":956,"../scatter/style":1211,"./attributes":1338,"./calc":1339,"./cross_trace_calc":1340,"./defaults":1341,"./hover":1343,"./layout_attributes":1345,"./layout_defaults":1346,"./plot":1347,"./style":1348}],1345:[function(e,v,M){var r=e("../box/layout_attributes"),n=e("../../lib").extendFlat;v.exports={violinmode:n({},r.boxmode,{}),violingap:n({},r.boxgap,{}),violingroupgap:n({},r.boxgroupgap,{})}},{"../../lib":778,"../box/layout_attributes":953}],1346:[function(e,v,M){var r=e("../../lib"),n=e("./layout_attributes"),l=e("../box/layout_defaults");v.exports=function(t,f,a){function o(u,h){return r.coerce(t,f,n,u,h)}l._supply(t,f,a,o,"violin")}},{"../../lib":778,"../box/layout_defaults":954,"./layout_attributes":1345}],1347:[function(e,v,M){var r=e("d3"),n=e("../../lib"),l=e("../../components/drawing"),c=e("../box/plot"),t=e("../scatter/line_points"),f=e("./helpers");v.exports=function(o,u,h,i){var s=o._fullLayout,p=u.xaxis,d=u.yaxis;function y(b){var m=t(b,{xaxis:p,yaxis:d,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return l.smoothopen(m[0],1)}n.makeTraceGroups(i,h,"trace violins").each(function(b){var m=r.select(this),_=b[0],T=_.t,g=_.trace;if(g.visible!==!0||T.empty){m.remove();return}var A=T.bPos,k=T.bdPos,R=u[T.valLetter+"axis"],L=u[T.posLetter+"axis"],z=g.side==="both",E=z||g.side==="positive",S=z||g.side==="negative",C=m.selectAll("path.violin").data(n.identity);C.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),C.exit().remove(),C.each(function(B){var j=r.select(this),H=B.density,K=H.length,te=L.c2l(B.pos+A,!0),J=L.l2p(te),oe;if(g.width)oe=T.maxKDE/k;else{var ie=s._violinScaleGroupStats[g.scalegroup];oe=g.scalemode==="count"?ie.maxKDE/k*(ie.maxCount/B.pts.length):ie.maxKDE/k}var Q,V,se,re,ee,ae,fe;if(E){for(ae=new Array(K),re=0;re<K;re++)fe=ae[re]={},fe[T.posLetter]=te+H[re].v/oe,fe[T.valLetter]=R.c2l(H[re].t,!0);Q=y(ae)}if(S){for(ae=new Array(K),ee=0,re=K-1;ee<K;ee++,re--)fe=ae[ee]={},fe[T.posLetter]=te-H[re].v/oe,fe[T.valLetter]=R.c2l(H[re].t,!0);V=y(ae)}if(z)se=Q+"L"+V.substr(1)+"Z";else{var de=[J,R.c2p(H[0].t)],pe=[J,R.c2p(H[K-1].t)];g.orientation==="h"&&(de.reverse(),pe.reverse()),E?se="M"+de+"L"+Q.substr(1)+"L"+pe:se="M"+pe+"L"+V.substr(1)+"L"+de}j.attr("d",se),B.posCenterPx=J,B.posDensityScale=oe*k,B.path=j.node(),B.pathLength=B.path.getTotalLength()/(z?2:1)});var D=g.box,F=D.width,N=(D.line||{}).width,G,U;z?(G=k*F,U=0):E?(G=[0,k*F/2],U=N*{x:1,y:-1}[T.posLetter]):(G=[k*F/2,0],U=N*{x:-1,y:1}[T.posLetter]),c.plotBoxAndWhiskers(m,{pos:L,val:R},g,{bPos:A,bdPos:G,bPosPxOffset:U}),c.plotBoxMean(m,{pos:L,val:R},g,{bPos:A,bdPos:G,bPosPxOffset:U});var X;!g.box.visible&&g.meanline.visible&&(X=n.identity);var I=m.selectAll("path.meanline").data(X||[]);I.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),I.exit().remove(),I.each(function(B){var j=R.c2p(B.mean,!0),H=f.getPositionOnKdePath(B,g,j);r.select(this).attr("d",g.orientation==="h"?"M"+j+","+H[0]+"V"+H[1]:"M"+H[0]+","+j+"H"+H[1])}),c.plotPoints(m,{x:p,y:d},g,T)})}},{"../../components/drawing":665,"../../lib":778,"../box/plot":955,"../scatter/line_points":1201,"./helpers":1342,d3:169}],1348:[function(e,v,M){var r=e("d3"),n=e("../../components/color"),l=e("../scatter/style").stylePoints;v.exports=function(t){var f=r.select(t).selectAll("g.trace.violins");f.style("opacity",function(a){return a[0].trace.opacity}),f.each(function(a){var o=a[0].trace,u=r.select(this),h=o.box||{},i=h.line||{},s=o.meanline||{},p=s.width;u.selectAll("path.violin").style("stroke-width",o.line.width+"px").call(n.stroke,o.line.color).call(n.fill,o.fillcolor),u.selectAll("path.box").style("stroke-width",i.width+"px").call(n.stroke,i.color).call(n.fill,h.fillcolor);var d={"stroke-width":p+"px","stroke-dasharray":2*p+"px,"+p+"px"};u.selectAll("path.mean").style(d).call(n.stroke,s.color),u.selectAll("path.meanline").style(d).call(n.stroke,s.color),l(u,o,t)})}},{"../../components/color":643,"../scatter/style":1211,d3:169}],1349:[function(e,v,M){var r=e("../../components/colorscale/attributes"),n=e("../isosurface/attributes"),l=e("../surface/attributes"),c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,f=e("../../plot_api/edit_types").overrideAll,a=v.exports=f(t({x:n.x,y:n.y,z:n.z,value:n.value,isomin:n.isomin,isomax:n.isomax,surface:n.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:n.slices,caps:n.caps,text:n.text,hovertext:n.hovertext,hovertemplate:n.hovertemplate},r("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:n.colorbar,opacity:n.opacity,opacityscale:l.opacityscale,lightposition:n.lightposition,lighting:n.lighting,flatshading:n.flatshading,contour:n.contour,hoverinfo:t({},c.hoverinfo),showlegend:t({},c.showlegend,{dflt:!1})}),"calc","nested");a.x.editType=a.y.editType=a.z.editType=a.value.editType="calc+clearAxisTypes",a.transforms=void 0},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../isosurface/attributes":1123,"../surface/attributes":1311}],1350:[function(e,v,M){var r=e("gl-mesh3d"),n=e("../../lib/gl_format_color").parseColorScale,l=e("../../lib/str2rgbarray"),c=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),f=e("../isosurface/convert").findNearestOnAxis,a=e("../isosurface/convert").generateIsoMeshes;function o(i,s,p){this.scene=i,this.uid=p,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var u=o.prototype;u.handlePick=function(i){if(i.object===this.mesh){var s=i.data.index,p=this.data._meshX[s],d=this.data._meshY[s],y=this.data._meshZ[s],b=this.data._Ys.length,m=this.data._Zs.length,_=f(p,this.data._Xs).id,T=f(d,this.data._Ys).id,g=f(y,this.data._Zs).id,A=i.index=g+m*T+m*b*_;i.traceCoordinate=[this.data._meshX[A],this.data._meshY[A],this.data._meshZ[A],this.data._value[A]];var k=this.data.hovertext||this.data.text;return Array.isArray(k)&&k[A]!==void 0?i.textLabel=k[A]:k&&(i.textLabel=k),!0}},u.update=function(i){var s=this.scene,p=s.fullSceneLayout;this.data=a(i);function d(T,g,A,k){return g.map(function(R){return T.d2l(R,0,k)*A})}var y=t(d(p.xaxis,i._meshX,s.dataScale[0],i.xcalendar),d(p.yaxis,i._meshY,s.dataScale[1],i.ycalendar),d(p.zaxis,i._meshZ,s.dataScale[2],i.zcalendar)),b=t(i._meshI,i._meshJ,i._meshK),m={positions:y,cells:b,lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,opacityscale:i.opacityscale,contourEnable:i.contour.show,contourColor:l(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},_=c(i);m.vertexIntensity=i._meshIntensity,m.vertexIntensityBounds=[_.min,_.max],m.colormap=n(i),this.mesh.update(m)},u.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function h(i,s){var p=i.glplot.gl,d=r({gl:p}),y=new o(i,d,s.uid);return d._trace=y,y.update(s),i.glplot.add(d),y}v.exports=h},{"../../components/colorscale":655,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/gl3d/zip3":881,"../isosurface/convert":1125,"gl-mesh3d":309}],1351:[function(e,v,M){var r=e("../../lib"),n=e("./attributes"),l=e("../isosurface/defaults").supplyIsoDefaults,c=e("../surface/defaults").opacityscaleDefaults;v.exports=function(f,a,o,u){function h(i,s){return r.coerce(f,a,n,i,s)}l(f,a,o,u,h),c(f,a,u,h)}},{"../../lib":778,"../isosurface/defaults":1126,"../surface/defaults":1314,"./attributes":1349}],1352:[function(e,v,M){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"volume",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":870,"../isosurface/calc":1124,"./attributes":1349,"./convert":1350,"./defaults":1351}],1353:[function(e,v,M){var r=e("../bar/attributes"),n=e("../scatter/attributes").line,l=e("../../plots/attributes"),c=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,f=e("./constants"),a=e("../../lib/extend").extendFlat,o=e("../../components/color");function u(h){return{marker:{color:a({},r.marker.color,{arrayOk:!1,editType:"style"}),line:{color:a({},r.marker.line.color,{arrayOk:!1,editType:"style"}),width:a({},r.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}v.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,hovertext:r.hovertext,hovertemplate:c({},{keys:f.eventDataKeys}),hoverinfo:a({},l.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:t({editType:"plot"},{keys:f.eventDataKeys.concat(["label"])}),text:r.text,textposition:r.textposition,insidetextanchor:r.insidetextanchor,textangle:r.textangle,textfont:r.textfont,insidetextfont:r.insidetextfont,outsidetextfont:r.outsidetextfont,constraintext:r.constraintext,cliponaxis:r.cliponaxis,orientation:r.orientation,offset:r.offset,width:r.width,increasing:u(),decreasing:u(),totals:u(),connector:{line:{color:a({},n.color,{dflt:o.defaultLine}),width:a({},n.width,{editType:"plot"}),dash:n.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup}},{"../../components/color":643,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatter/attributes":1187,"./constants":1355}],1354:[function(e,v,M){var r=e("../../plots/cartesian/axes"),n=e("../../plots/cartesian/align_period"),l=e("../../lib").mergeArray,c=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;function f(o){return o==="a"||o==="absolute"}function a(o){return o==="t"||o==="total"}v.exports=function(u,h){var i=r.getFromId(u,h.xaxis||"x"),s=r.getFromId(u,h.yaxis||"y"),p,d,y,b;h.orientation==="h"?(p=i.makeCalcdata(h,"x"),y=s.makeCalcdata(h,"y"),d=n(h,s,"y",y),b=!!h.yperiodalignment):(p=s.makeCalcdata(h,"y"),y=i.makeCalcdata(h,"x"),d=n(h,i,"x",y),b=!!h.xperiodalignment);for(var m=Math.min(d.length,p.length),_=new Array(m),T=0,g,A=!1,k=0;k<m;k++){var R=p[k]||0,L=!1;(p[k]!==t||a(h.measure[k])||f(h.measure[k]))&&k+1<m&&(p[k+1]!==t||a(h.measure[k+1])||f(h.measure[k+1]))&&(L=!0);var z=_[k]={i:k,p:d[k],s:R,rawS:R,cNext:L};f(h.measure[k])?(T=z.s,z.isSum=!0,z.dir="totals",z.s=T):a(h.measure[k])?(z.isSum=!0,z.dir="totals",z.s=T):(z.isSum=!1,z.dir=z.rawS<0?"decreasing":"increasing",g=z.s,z.s=T+g,T+=g),z.dir==="totals"&&(A=!0),b&&(_[k].orig_p=y[k]),h.ids&&(z.id=String(h.ids[k])),z.v=(h.base||0)+T}return _.length&&(_[0].hasTotals=A),l(h.text,_,"tx"),l(h.hovertext,_,"htx"),c(_,h),_}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../scatter/calc_selection":1189}],1355:[function(e,v,M){v.exports={eventDataKeys:["initial","delta","final"]}},{}],1356:[function(e,v,M){var r=e("../bar/cross_trace_calc").setGroupPositions;v.exports=function(l,c){var t=l._fullLayout,f=l._fullData,a=l.calcdata,o=c.xaxis,u=c.yaxis,h=[],i=[],s=[],p,d;for(d=0;d<f.length;d++){var y=f[d];y.visible===!0&&y.xaxis===o._id&&y.yaxis===u._id&&y.type==="waterfall"&&(p=a[d],y.orientation==="h"?s.push(p):i.push(p),h.push(p))}var b={mode:t.waterfallmode,norm:t.waterfallnorm,gap:t.waterfallgap,groupgap:t.waterfallgroupgap};for(r(l,o,u,i,b),r(l,u,o,s,b),d=0;d<h.length;d++){p=h[d];for(var m=0;m<p.length;m++){var _=p[m];_.isSum===!1&&(_.s0+=m===0?0:p[m-1].s),m+1<p.length&&(p[m].nextP0=p[m+1].p0,p[m].nextS0=p[m+1].s0)}}}},{"../bar/cross_trace_calc":924}],1357:[function(e,v,M){var r=e("../../lib"),n=e("../bar/defaults").handleGroupingDefaults,l=e("../bar/defaults").handleText,c=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),f=e("./attributes"),a=e("../../components/color"),o=e("../../constants/delta.js"),u=o.INCREASING.COLOR,h=o.DECREASING.COLOR,i="#4499FF";function s(y,b,m){y(b+".marker.color",m),y(b+".marker.line.color",a.defaultLine),y(b+".marker.line.width")}function p(y,b,m,_){function T(L,z){return r.coerce(y,b,f,L,z)}var g=c(y,b,_,T);if(!g){b.visible=!1;return}t(y,b,_,T),T("measure"),T("orientation",b.x&&!b.y?"h":"v"),T("base"),T("offset"),T("width"),T("text"),T("hovertext"),T("hovertemplate");var A=T("textposition");l(y,b,_,T,A,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),b.textposition!=="none"&&(T("texttemplate"),b.texttemplate||T("textinfo")),s(T,"increasing",u),s(T,"decreasing",h),s(T,"totals",i);var k=T("connector.visible");if(k){T("connector.mode");var R=T("connector.line.width");R&&(T("connector.line.color"),T("connector.line.dash"))}}function d(y,b){var m,_;function T(A){return r.coerce(_._input,_,f,A)}if(b.waterfallmode==="group")for(var g=0;g<y.length;g++)_=y[g],m=_._input,n(m,_,b,T)}v.exports={supplyDefaults:p,crossTraceDefaults:d}},{"../../components/color":643,"../../constants/delta.js":747,"../../lib":778,"../bar/defaults":925,"../scatter/period_defaults":1207,"../scatter/xy_defaults":1214,"./attributes":1353}],1358:[function(e,v,M){v.exports=function(n,l){return n.x="xVal"in l?l.xVal:l.x,n.y="yVal"in l?l.yVal:l.y,"initial"in l&&(n.initial=l.initial),"delta"in l&&(n.delta=l.delta),"final"in l&&(n.final=l.final),l.xa&&(n.xaxis=l.xa),l.ya&&(n.yaxis=l.ya),n}},{}],1359:[function(e,v,M){var r=e("../../plots/cartesian/axes").hoverLabelText,n=e("../../components/color").opacity,l=e("../bar/hover").hoverOnBars,c=e("../../constants/delta.js"),t={increasing:c.INCREASING.SYMBOL,decreasing:c.DECREASING.SYMBOL};v.exports=function(o,u,h,i){var s=l(o,u,h,i);if(!s)return;var p=s.cd,d=p[0].trace,y=d.orientation==="h",b=y?o.xa:o.ya;function m(S){return r(b,S)}var _=s.index,T=p[_],g=T.isSum?T.b+T.s:T.rawS;if(!T.isSum){s.initial=T.b+T.s-g,s.delta=g,s.final=s.initial+s.delta;var A=m(Math.abs(s.delta));s.deltaLabel=g<0?"("+A+")":A,s.finalLabel=m(s.final),s.initialLabel=m(s.initial)}var k=T.hi||d.hoverinfo,R=[];if(k&&k!=="none"&&k!=="skip"){var L=k==="all",z=k.split("+"),E=function(S){return L||z.indexOf(S)!==-1};T.isSum||(E("final")&&(y?!E("x"):!E("y"))&&R.push(s.finalLabel),E("delta")&&(g<0?R.push(s.deltaLabel+" "+t.decreasing):R.push(s.deltaLabel+" "+t.increasing)),E("initial")&&R.push("Initial: "+s.initialLabel))}return R.length&&(s.extraText=R.join("<br>")),s.color=f(d,T),[s]};function f(a,o){var u=a[o.dir].marker,h=u.color,i=u.line.color,s=u.line.width;if(n(h))return h;if(n(i)&&s)return i}},{"../../components/color":643,"../../constants/delta.js":747,"../../plots/cartesian/axes":828,"../bar/hover":928}],1360:[function(e,v,M){v.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"../bar/select":933,"./attributes":1353,"./calc":1354,"./cross_trace_calc":1356,"./defaults":1357,"./event_data":1358,"./hover":1359,"./layout_attributes":1361,"./layout_defaults":1362,"./plot":1363,"./style":1364}],1361:[function(e,v,M){v.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1362:[function(e,v,M){var r=e("../../lib"),n=e("./layout_attributes");v.exports=function(l,c,t){var f=!1;function a(h,i){return r.coerce(l,c,n,h,i)}for(var o=0;o<t.length;o++){var u=t[o];if(u.visible&&u.type==="waterfall"){f=!0;break}}f&&(a("waterfallmode"),a("waterfallgap",.2),a("waterfallgroupgap"))}},{"../../lib":778,"./layout_attributes":1361}],1363:[function(e,v,M){var r=e("d3"),n=e("../../lib"),l=e("../../components/drawing"),c=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),f=e("../bar/uniform_text").clearMinTextSize;v.exports=function(h,i,s,p){var d=h._fullLayout;f("waterfall",d),t.plot(h,i,s,p,{mode:d.waterfallmode,norm:d.waterfallmode,gap:d.waterfallgap,groupgap:d.waterfallgroupgap}),a(h,i,s,p)};function a(u,h,i,s){var p=h.xaxis,d=h.yaxis;n.makeTraceGroups(s,i,"trace bars").each(function(y){var b=r.select(this),m=y[0].trace,_=n.ensureSingle(b,"g","lines");if(!m.connector||!m.connector.visible){_.remove();return}var T=m.orientation==="h",g=m.connector.mode,A=_.selectAll("g.line").data(n.identity);A.enter().append("g").classed("line",!0),A.exit().remove();var k=A.size();A.each(function(R,L){if(!(L!==k-1&&!R.cNext)){var z=o(R,p,d,T),E=z[0],S=z[1],C="";E[0]!==c&&S[0]!==c&&E[1]!==c&&S[1]!==c&&(g==="spanning"&&!R.isSum&&L>0&&(T?C+="M"+E[0]+","+S[1]+"V"+S[0]:C+="M"+E[1]+","+S[0]+"H"+E[0]),g!=="between"&&(R.isSum||L<k-1)&&(T?C+="M"+E[1]+","+S[0]+"V"+S[1]:C+="M"+E[0]+","+S[1]+"H"+E[1]),E[2]!==c&&S[2]!==c&&(T?C+="M"+E[1]+","+S[1]+"V"+S[2]:C+="M"+E[1]+","+S[1]+"H"+E[2])),C===""&&(C="M0,0Z"),n.ensureSingle(r.select(this),"path").attr("d",C).call(l.setClipUrl,h.layerClipId,u)}})})}function o(u,h,i,s){var p=[],d=[],y=s?h:i,b=s?i:h;return p[0]=y.c2p(u.s0,!0),d[0]=b.c2p(u.p0,!0),p[1]=y.c2p(u.s1,!0),d[1]=b.c2p(u.p1,!0),p[2]=y.c2p(u.nextS0,!0),d[2]=b.c2p(u.nextP0,!0),s?[p,d]:[d,p]}},{"../../components/drawing":665,"../../constants/numerical":753,"../../lib":778,"../bar/plot":932,"../bar/uniform_text":937,d3:169}],1364:[function(e,v,M){var r=e("d3"),n=e("../../components/drawing"),l=e("../../components/color"),c=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),f=e("../bar/uniform_text").resizeText,a=t.styleTextPoints;function o(u,h,i){var s=i||r.select(u).selectAll("g.waterfalllayer").selectAll("g.trace");f(u,s,"waterfall"),s.style("opacity",function(p){return p[0].trace.opacity}),s.each(function(p){var d=r.select(this),y=p[0].trace;d.selectAll(".point > path").each(function(b){if(!b.isBlank){var m=y[b.dir].marker;r.select(this).call(l.fill,m.color).call(l.stroke,m.line.color).call(n.dashLine,m.line.dash,m.line.width).style("opacity",y.selectedpoints&&!b.selected?c:1)}}),a(d,y,u),d.selectAll(".lines").each(function(){var b=y.connector.line;n.lineGroupStyle(r.select(this).selectAll("path"),b.width,b.color,b.dash)})})}v.exports={style:o}},{"../../components/color":643,"../../components/drawing":665,"../../constants/interactions":752,"../bar/style":935,"../bar/uniform_text":937,d3:169}],1365:[function(e,v,M){var r=e("../plots/cartesian/axes"),n=e("../lib"),l=e("../plot_api/plot_schema"),c=e("./helpers").pointsAccessorFunction,t=e("../constants/numerical").BADNUM;M.moduleType="transform",M.name="aggregate";var f=M.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},a=f.aggregations;M.supplyDefaults=function(p,d){var y={},b;function m(D,F){return n.coerce(p,y,f,D,F)}var _=m("enabled");if(!_)return y;var T=l.findArrayAttributes(d),g={};for(b=0;b<T.length;b++)g[T[b]]=1;var A=m("groups");if(!Array.isArray(A)){if(!g[A])return y.enabled=!1,y;g[A]=0}var k=p.aggregations||[],R=y.aggregations=new Array(k.length),L;function z(D,F){return n.coerce(k[b],L,a,D,F)}for(b=0;b<k.length;b++){L={_index:b};var E=z("target"),S=z("func"),C=z("enabled");C&&E&&(g[E]||S==="count"&&g[E]===void 0)?(S==="stddev"&&z("funcmode"),g[E]=0,R[b]=L):R[b]={enabled:!1,_index:b}}for(b=0;b<T.length;b++)g[T[b]]&&R.push({target:T[b],func:a.func.dflt,enabled:!0,_index:-1});return y},M.calcTransform=function(p,d,y){if(y.enabled){var b=y.groups,m=n.getTargetArray(d,{target:b});if(m){var _,T,g,A,k={},R={},L=[],z=c(d.transforms,y),E=m.length;for(d._length&&(E=Math.min(E,d._length)),_=0;_<E;_++)T=m[_],g=k[T],g===void 0?(k[T]=L.length,A=[_],L.push(A),R[k[T]]=z(_)):(L[g].push(_),R[k[T]]=(R[k[T]]||[]).concat(z(_)));y._indexToPoints=R;var S=y.aggregations;for(_=0;_<S.length;_++)o(p,d,L,S[_]);typeof b=="string"&&o(p,d,L,{target:b,func:"first",enabled:!0}),d._length=L.length}}};function o(p,d,y,b){if(b.enabled){for(var m=b.target,_=n.nestedProperty(d,m),T=_.get(),g=r.getDataConversions(p,d,m,T),A=u(b,g),k=new Array(y.length),R=0;R<y.length;R++)k[R]=A(T,y[R]);_.set(k),b.func==="count"&&n.pushUnique(d._arrayAttrs,m)}}function u(p,d){var y=p.func,b=d.d2c,m=d.c2d;switch(y){case"count":return h;case"first":return i;case"last":return s;case"sum":return function(_,T){for(var g=0,A=0;A<T.length;A++){var k=b(_[T[A]]);k!==t&&(g+=k)}return m(g)};case"avg":return function(_,T){for(var g=0,A=0,k=0;k<T.length;k++){var R=b(_[T[k]]);R!==t&&(g+=R,A++)}return A?m(g/A):t};case"min":return function(_,T){for(var g=1/0,A=0;A<T.length;A++){var k=b(_[T[A]]);k!==t&&(g=Math.min(g,k))}return g===1/0?t:m(g)};case"max":return function(_,T){for(var g=-1/0,A=0;A<T.length;A++){var k=b(_[T[A]]);k!==t&&(g=Math.max(g,k))}return g===-1/0?t:m(g)};case"range":return function(_,T){for(var g=1/0,A=-1/0,k=0;k<T.length;k++){var R=b(_[T[k]]);R!==t&&(g=Math.min(g,R),A=Math.max(A,R))}return A===-1/0||g===1/0?t:m(A-g)};case"change":return function(_,T){var g=b(_[T[0]]),A=b(_[T[T.length-1]]);return g===t||A===t?t:m(A-g)};case"median":return function(_,T){for(var g=[],A=0;A<T.length;A++){var k=b(_[T[A]]);k!==t&&g.push(k)}if(!g.length)return t;g.sort(n.sorterAsc);var R=(g.length-1)/2;return m((g[Math.floor(R)]+g[Math.ceil(R)])/2)};case"mode":return function(_,T){for(var g={},A=0,k=t,R=0;R<T.length;R++){var L=b(_[T[R]]);if(L!==t){var z=g[L]=(g[L]||0)+1;z>A&&(A=z,k=L)}}return A?m(k):t};case"rms":return function(_,T){for(var g=0,A=0,k=0;k<T.length;k++){var R=b(_[T[k]]);R!==t&&(g+=R*R,A++)}return A?m(Math.sqrt(g/A)):t};case"stddev":return function(_,T){var g=0,A=0,k=1,R=t,L;for(L=0;L<T.length&&R===t;L++)R=b(_[T[L]]);if(R===t)return t;for(;L<T.length;L++){var z=b(_[T[L]]);if(z!==t){var E=z-R;g+=E,A+=E*E,k++}}var S=p.funcmode==="sample"?k-1:k;return S?Math.sqrt((A-g*g/k)/S):0}}}function h(p,d){return d.length}function i(p,d){return p[d[0]]}function s(p,d){return p[d[d.length-1]]}},{"../constants/numerical":753,"../lib":778,"../plot_api/plot_schema":816,"../plots/cartesian/axes":828,"./helpers":1368}],1366:[function(e,v,M){var r=e("../lib"),n=e("../registry"),l=e("../plots/cartesian/axes"),c=e("./helpers").pointsAccessorFunction,t=e("../constants/filter_ops"),f=t.COMPARISON_OPS,a=t.INTERVAL_OPS,o=t.SET_OPS;M.moduleType="transform",M.name="filter",M.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(f).concat(a).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},M.supplyDefaults=function(h){var i={};function s(b,m){return r.coerce(h,i,M.attributes,b,m)}var p=s("enabled");if(p){var d=s("target");if(r.isArrayOrTypedArray(d)&&d.length===0)return i.enabled=!1,i;s("preservegaps"),s("operation"),s("value");var y=n.getComponentMethod("calendars","handleDefaults");y(h,i,"valuecalendar",null),y(h,i,"targetcalendar",null)}return i},M.calcTransform=function(h,i,s){if(!s.enabled)return;var p=r.getTargetArray(i,s);if(!p)return;var d=s.target,y=p.length;i._length&&(y=Math.min(y,i._length));var b=s.targetcalendar,m=i._arrayAttrs,_=s.preservegaps;if(typeof d=="string"){var T=r.nestedProperty(i,d+"calendar").get();T&&(b=T)}var g=l.getDataToCoordFunc(h,i,d,p),A=u(s,g,b),k={},R={},L=0;function z(N,G){for(var U=0;U<m.length;U++){var X=r.nestedProperty(i,m[U]);N(X,G)}}var E,S;_?(E=function(N){k[N.astr]=r.extendDeep([],N.get()),N.set(new Array(y))},S=function(N,G){var U=k[N.astr][G];N.get()[G]=U}):(E=function(N){k[N.astr]=r.extendDeep([],N.get()),N.set([])},S=function(N,G){var U=k[N.astr][G];N.get().push(U)}),z(E);for(var C=c(i.transforms,s),D=0;D<y;D++){var F=A(p[D]);F?(z(S,D),R[L++]=C(D)):_&&L++}s._indexToPoints=R,i._length=L};function u(h,i,s){var p=h.operation,d=h.value,y=Array.isArray(d);function b(g){return g.indexOf(p)!==-1}var m=function(g){return i(g,0,h.valuecalendar)},_=function(g){return i(g,0,s)},T;switch(b(f)?T=m(y?d[0]:d):b(a)?T=y?[m(d[0]),m(d[1])]:[m(d),m(d)]:b(o)&&(T=y?d.map(m):[m(d)]),p){case"=":return function(g){return _(g)===T};case"!=":return function(g){return _(g)!==T};case"<":return function(g){return _(g)<T};case"<=":return function(g){return _(g)<=T};case">":return function(g){return _(g)>T};case">=":return function(g){return _(g)>=T};case"[]":return function(g){var A=_(g);return A>=T[0]&&A<=T[1]};case"()":return function(g){var A=_(g);return A>T[0]&&A<T[1]};case"[)":return function(g){var A=_(g);return A>=T[0]&&A<T[1]};case"(]":return function(g){var A=_(g);return A>T[0]&&A<=T[1]};case"][":return function(g){var A=_(g);return A<=T[0]||A>=T[1]};case")(":return function(g){var A=_(g);return A<T[0]||A>T[1]};case"](":return function(g){var A=_(g);return A<=T[0]||A>T[1]};case")[":return function(g){var A=_(g);return A<T[0]||A>=T[1]};case"{}":return function(g){return T.indexOf(_(g))!==-1};case"}{":return function(g){return T.indexOf(_(g))===-1}}}},{"../constants/filter_ops":749,"../lib":778,"../plots/cartesian/axes":828,"../registry":911,"./helpers":1368}],1367:[function(e,v,M){var r=e("../lib"),n=e("../plot_api/plot_schema"),l=e("../plots/plots"),c=e("./helpers").pointsAccessorFunction;M.moduleType="transform",M.name="groupby",M.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},M.supplyDefaults=function(f,a,o){var u,h={};function i(m,_){return r.coerce(f,h,M.attributes,m,_)}var s=i("enabled");if(!s)return h;i("groups"),i("nameformat",o._dataLength>1?"%{group} (%{trace})":"%{group}");var p=f.styles,d=h.styles=[];if(p)for(u=0;u<p.length;u++){var y=d[u]={};r.coerce(p[u],d[u],M.attributes.styles,"target");var b=r.coerce(p[u],d[u],M.attributes.styles,"value");r.isPlainObject(b)?y.value=r.extendDeep({},b):b&&delete y.value}return h},M.transform=function(f,a){var o,u,h,i=[];for(u=0;u<f.length;u++)for(o=t(f[u],a),h=0;h<o.length;h++)i.push(o[h]);return i};function t(f,a){var o,u,h,i,s,p,d,y,b,m,_=a.transform,T=a.transformIndex,g=f.transforms[T].groups,A=c(f.transforms,_);if(!r.isArrayOrTypedArray(g)||g.length===0)return[f];var k=r.filterUnique(g),R=new Array(k.length),L=g.length,z=n.findArrayAttributes(f),E=_.styles||[],S={};for(o=0;o<E.length;o++)S[E[o].target]=E[o].value;_.styles&&(m=r.keyedContainer(_,"styles","target","value.name"));var C={},D={};for(o=0;o<k.length;o++){p=k[o],C[p]=o,D[p]=0,d=R[o]=r.extendDeepNoArrays({},f),d._group=p,d.transforms[T]._indexToPoints={};var F=null;for(m&&(F=m.get(p)),F||F===""?d.name=F:d.name=r.templateString(_.nameformat,{trace:f.name,group:p}),y=d.transforms,d.transforms=[],u=0;u<y.length;u++)d.transforms[u]=r.extendDeepNoArrays({},y[u]);for(u=0;u<z.length;u++)r.nestedProperty(d,z[u]).set([])}for(h=0;h<z.length;h++){for(i=z[h],u=0,b=[];u<k.length;u++)b[u]=r.nestedProperty(R[u],i).get();for(s=r.nestedProperty(f,i).get(),u=0;u<L;u++)b[C[g[u]]].push(s[u])}for(u=0;u<L;u++){d=R[C[g[u]]];var N=d.transforms[T]._indexToPoints;N[D[g[u]]]=A(u),D[g[u]]++}for(o=0;o<k.length;o++)p=k[o],d=R[o],l.clearExpandedTraceDefaultColors(d),d=r.extendDeepNoArrays(d,S[p]||{});return R}},{"../lib":778,"../plot_api/plot_schema":816,"../plots/plots":891,"./helpers":1368}],1368:[function(e,v,M){M.pointsAccessorFunction=function(r,n){for(var l,c,t=0;t<r.length&&(l=r[t],l!==n);t++)!l._indexToPoints||l.enabled===!1||(c=l._indexToPoints);var f=c?function(a){return c[a]}:function(a){return[a]};return f}},{}],1369:[function(e,v,M){var r=e("../lib"),n=e("../plots/cartesian/axes"),l=e("./helpers").pointsAccessorFunction,c=e("../constants/numerical").BADNUM;M.moduleType="transform",M.name="sort",M.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},M.supplyDefaults=function(a){var o={};function u(i,s){return r.coerce(a,o,M.attributes,i,s)}var h=u("enabled");return h&&(u("target"),u("order")),o},M.calcTransform=function(a,o,u){if(u.enabled){var h=r.getTargetArray(o,u);if(h){var i=u.target,s=h.length;o._length&&(s=Math.min(s,o._length));var p=o._arrayAttrs,d=n.getDataToCoordFunc(a,o,i,h),y=t(u,h,d,s),b=l(o.transforms,u),m={},_,T;for(_=0;_<p.length;_++){var g=r.nestedProperty(o,p[_]),A=g.get(),k=new Array(s);for(T=0;T<s;T++)k[T]=A[y[T]];g.set(k)}for(T=0;T<s;T++)m[T]=b(y[T]);u._indexToPoints=m,o._length=s}}};function t(a,o,u,h){var i=new Array(h),s=new Array(h),p;for(p=0;p<h;p++)i[p]={v:o[p],i:p};for(i.sort(f(a,u)),p=0;p<h;p++)s[p]=i[p].i;return s}function f(a,o){switch(a.order){case"ascending":return function(u,h){var i=o(u.v),s=o(h.v);return i===c?1:s===c?-1:i-s};case"descending":return function(u,h){var i=o(u.v),s=o(h.v);return i===c?1:s===c?-1:s-i}}}},{"../constants/numerical":753,"../lib":778,"../plots/cartesian/axes":828,"./helpers":1368}],1370:[function(e,v,M){M.version="1.58.4"},{}]},{},[26])(26)})})(F9);(function(x){Object.defineProperty(x,"__esModule",{value:!0}),x.default=void 0;var P=v(i6),e=v(Xb);function v(n){return n&&n.__esModule?n:{default:n}}var M=(0,P.default)(e.default),r=M;x.default=r})(a6);const N9=F5(a6);function od(x){return od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},od(x)}function B9(x,P){if(od(x)!=="object"||x===null)return x;var e=x[Symbol.toPrimitive];if(e!==void 0){var v=e.call(x,P||"default");if(od(v)!=="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(x)}function o6(x){var P=B9(x,"string");return od(P)==="symbol"?P:String(P)}function up(x,P,e){return P=o6(P),P in x?Object.defineProperty(x,P,{value:e,enumerable:!0,configurable:!0,writable:!0}):x[P]=e,x}function Zb(x,P){(P==null||P>x.length)&&(P=x.length);for(var e=0,v=new Array(P);e<P;e++)v[e]=x[e];return v}function U9(x){if(Array.isArray(x))return Zb(x)}function V9(x){if(typeof Symbol<"u"&&x[Symbol.iterator]!=null||x["@@iterator"]!=null)return Array.from(x)}function s6(x,P){if(x){if(typeof x=="string")return Zb(x,P);var e=Object.prototype.toString.call(x).slice(8,-1);if(e==="Object"&&x.constructor&&(e=x.constructor.name),e==="Map"||e==="Set")return Array.from(x);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Zb(x,P)}}function H9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cp(x){return U9(x)||V9(x)||s6(x)||H9()}function j9(x){if(Array.isArray(x))return x}function G9(x,P){var e=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(e!=null){var v,M,r,n,l=[],c=!0,t=!1;try{if(r=(e=e.call(x)).next,P===0){if(Object(e)!==e)return;c=!1}else for(;!(c=(v=r.call(e)).done)&&(l.push(v.value),l.length!==P);c=!0);}catch(f){t=!0,M=f}finally{try{if(!c&&e.return!=null&&(n=e.return(),Object(n)!==n))return}finally{if(t)throw M}}return l}}function W9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xc(x,P){return j9(x)||G9(x,P)||s6(x,P)||W9()}var Kb={},Y9={get exports(){return Kb},set exports(x){Kb=x}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(x){(function(){var P={}.hasOwnProperty;function e(){for(var v=[],M=0;M<arguments.length;M++){var r=arguments[M];if(r){var n=typeof r;if(n==="string"||n==="number")v.push(r);else if(Array.isArray(r)){if(r.length){var l=e.apply(null,r);l&&v.push(l)}}else if(n==="object"){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){v.push(r.toString());continue}for(var c in r)P.call(r,c)&&r[c]&&v.push(c)}}}return v.join(" ")}x.exports?(e.default=e,x.exports=e):window.classNames=e})()})(Y9);const vg=Kb;var Jw={};function X9(x,P){}function Z9(x,P,e){!P&&!Jw[e]&&(x(!1,e),Jw[e]=!0)}function K9(x,P){Z9(X9,x,P)}function $9(x,P){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,v=new Set;function M(r,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,c=v.has(r);if(K9(!c,"Warning: There may be circular references"),c)return!1;if(r===n)return!0;if(e&&l>1)return!1;v.add(r);var t=l+1;if(Array.isArray(r)){if(!Array.isArray(n)||r.length!==n.length)return!1;for(var f=0;f<r.length;f++)if(!M(r[f],n[f],t))return!1;return!0}if(r&&n&&od(r)==="object"&&od(n)==="object"){var a=Object.keys(r);return a.length!==Object.keys(n).length?!1:a.every(function(o){return M(r[o],n[o],t)})}return!1}return M(x,P)}function Qw(x){var P=_n.useRef();P.current=x;var e=_n.useCallback(function(){for(var v,M=arguments.length,r=new Array(M),n=0;n<M;n++)r[n]=arguments[n];return(v=P.current)===null||v===void 0?void 0:v.call.apply(v,[P].concat(r))},[]);return e}function J9(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var qw=J9()?_n.useLayoutEffect:_n.useEffect,e5=function(P,e){var v=_n.useRef(!0);qw(function(){if(!v.current)return P()},e),qw(function(){return v.current=!1,function(){v.current=!0}},[])};function t5(x){var P=_n.useRef(!1),e=_n.useState(x),v=Xc(e,2),M=v[0],r=v[1];_n.useEffect(function(){return P.current=!1,function(){P.current=!0}},[]);function n(l,c){c&&P.current||r(l)}return[M,n]}function Rx(x){return x!==void 0}function Q9(x,P){var e=P||{},v=e.defaultValue,M=e.value,r=e.onChange,n=e.postState,l=t5(function(){return Rx(M)?M:Rx(v)?typeof v=="function"?v():v:typeof x=="function"?x():x}),c=Xc(l,2),t=c[0],f=c[1],a=M!==void 0?M:t,o=n?n(a):a,u=Qw(r),h=t5([a]),i=Xc(h,2),s=i[0],p=i[1];e5(function(){var y=s[0];t!==y&&u(t,y)},[s]),e5(function(){Rx(M)||f(M)},[M]);var d=Qw(function(y,b){f(y,b),p([a],b)});return[o,d]}function l6(x,P){if(x==null)return{};var e=fs(x,P),v,M;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(x);for(M=0;M<r.length;M++)v=r[M],!(P.indexOf(v)>=0)&&Object.prototype.propertyIsEnumerable.call(x,v)&&(e[v]=x[v])}return e}function r5(x,P){var e=Object.keys(x);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(x);P&&(v=v.filter(function(M){return Object.getOwnPropertyDescriptor(x,M).enumerable})),e.push.apply(e,v)}return e}function Rh(x){for(var P=1;P<arguments.length;P++){var e=arguments[P]!=null?arguments[P]:{};P%2?r5(Object(e),!0).forEach(function(v){up(x,v,e[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(e)):r5(Object(e)).forEach(function(v){Object.defineProperty(x,v,Object.getOwnPropertyDescriptor(e,v))})}return x}var Ri={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(P){var e=P.keyCode;if(P.altKey&&!P.ctrlKey||P.metaKey||e>=Ri.F1&&e<=Ri.F12)return!1;switch(e){case Ri.ALT:case Ri.CAPS_LOCK:case Ri.CONTEXT_MENU:case Ri.CTRL:case Ri.DOWN:case Ri.END:case Ri.ESC:case Ri.HOME:case Ri.INSERT:case Ri.LEFT:case Ri.MAC_FF_META:case Ri.META:case Ri.NUMLOCK:case Ri.NUM_CENTER:case Ri.PAGE_DOWN:case Ri.PAGE_UP:case Ri.PAUSE:case Ri.PRINT_SCREEN:case Ri.RIGHT:case Ri.SHIFT:case Ri.UP:case Ri.WIN_KEY:case Ri.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(P){if(P>=Ri.ZERO&&P<=Ri.NINE||P>=Ri.NUM_ZERO&&P<=Ri.NUM_MULTIPLY||P>=Ri.A&&P<=Ri.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&P===0)return!0;switch(P){case Ri.SPACE:case Ri.QUESTION_MARK:case Ri.NUM_PLUS:case Ri.NUM_MINUS:case Ri.NUM_PERIOD:case Ri.NUM_DIVISION:case Ri.SEMICOLON:case Ri.DASH:case Ri.EQUALS:case Ri.COMMA:case Ri.PERIOD:case Ri.SLASH:case Ri.APOSTROPHE:case Ri.SINGLE_QUOTE:case Ri.OPEN_SQUARE_BRACKET:case Ri.BACKSLASH:case Ri.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},rv=_n.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0});function $b(x,P,e){return(x-P)/(e-P)}function C_(x,P,e,v){var M=$b(P,e,v),r={};switch(x){case"rtl":r.right="".concat(M*100,"%"),r.transform="translateX(50%)";break;case"btt":r.bottom="".concat(M*100,"%"),r.transform="translateY(50%)";break;case"ttb":r.top="".concat(M*100,"%"),r.transform="translateY(-50%)";break;default:r.left="".concat(M*100,"%"),r.transform="translateX(-50%)";break}return r}function t0(x,P){return Array.isArray(x)?x[P]:x}var q9=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"],eL=_n.forwardRef(function(x,P){var e,v,M=x.prefixCls,r=x.value,n=x.valueIndex,l=x.onStartMove,c=x.style,t=x.render,f=x.dragging,a=x.onOffsetChange,o=l6(x,q9),u=_n.useContext(rv),h=u.min,i=u.max,s=u.direction,p=u.disabled,d=u.keyboard,y=u.range,b=u.tabIndex,m=u.ariaLabelForHandle,_=u.ariaLabelledByForHandle,T=u.ariaValueTextFormatterForHandle,g="".concat(M,"-handle"),A=function(E){p||l(E,n)},k=function(E){if(!p&&d){var S=null;switch(E.which||E.keyCode){case Ri.LEFT:S=s==="ltr"||s==="btt"?-1:1;break;case Ri.RIGHT:S=s==="ltr"||s==="btt"?1:-1;break;case Ri.UP:S=s!=="ttb"?1:-1;break;case Ri.DOWN:S=s!=="ttb"?-1:1;break;case Ri.HOME:S="min";break;case Ri.END:S="max";break;case Ri.PAGE_UP:S=2;break;case Ri.PAGE_DOWN:S=-2;break}S!==null&&(E.preventDefault(),a(S,n))}},R=C_(s,r,h,i),L=_n.createElement("div",Ta({ref:P,className:vg(g,(e={},up(e,"".concat(g,"-").concat(n+1),y),up(e,"".concat(g,"-dragging"),f),e)),style:Rh(Rh({},R),c),onMouseDown:A,onTouchStart:A,onKeyDown:k,tabIndex:p?null:t0(b,n),role:"slider","aria-valuemin":h,"aria-valuemax":i,"aria-valuenow":r,"aria-disabled":p,"aria-label":t0(m,n),"aria-labelledby":t0(_,n),"aria-valuetext":(v=t0(T,n))===null||v===void 0?void 0:v(r)},o));return t&&(L=t(L,{index:n,prefixCls:M,value:r,dragging:f})),L}),tL=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],rL=_n.forwardRef(function(x,P){var e=x.prefixCls,v=x.style,M=x.onStartMove,r=x.onOffsetChange,n=x.values,l=x.handleRender,c=x.draggingIndex,t=l6(x,tL),f=_n.useRef({});return _n.useImperativeHandle(P,function(){return{focus:function(o){var u;(u=f.current[o])===null||u===void 0||u.focus()}}}),_n.createElement(_n.Fragment,null,n.map(function(a,o){return _n.createElement(eL,Ta({ref:function(h){h?f.current[o]=h:delete f.current[o]},dragging:c===o,prefixCls:e,style:t0(v,o),key:o,value:a,valueIndex:o,onStartMove:M,onOffsetChange:r,render:l},t))}))});function n5(x){var P="touches"in x?x.touches[0]:x;return{pageX:P.pageX,pageY:P.pageY}}function nL(x,P,e,v,M,r,n,l,c){var t=_n.useState(null),f=Xc(t,2),a=f[0],o=f[1],u=_n.useState(-1),h=Xc(u,2),i=h[0],s=h[1],p=_n.useState(e),d=Xc(p,2),y=d[0],b=d[1],m=_n.useState(e),_=Xc(m,2),T=_[0],g=_[1],A=_n.useRef(null),k=_n.useRef(null);_n.useEffect(function(){i===-1&&b(e)},[e,i]),_n.useEffect(function(){return function(){document.removeEventListener("mousemove",A.current),document.removeEventListener("mouseup",k.current),document.removeEventListener("touchmove",A.current),document.removeEventListener("touchend",k.current)}},[]);var R=function(D,F){y.some(function(N,G){return N!==D[G]})&&(F!==void 0&&o(F),b(D),n(D))},L=function(D,F){if(D===-1){var N=T[0],G=T[T.length-1],U=v-N,X=M-G,I=F*(M-v);I=Math.max(I,U),I=Math.min(I,X);var B=r(N+I);I=B-N;var j=T.map(function(J){return J+I});R(j)}else{var H=(M-v)*F,K=cp(y);K[D]=T[D];var te=c(K,H,D,"dist");R(te.values,te.value)}},z=_n.useRef(L);z.current=L;var E=function(D,F){D.stopPropagation();var N=e[F];s(F),o(N),g(e);var G=n5(D),U=G.pageX,X=G.pageY,I=function(H){H.preventDefault();var K=n5(H),te=K.pageX,J=K.pageY,oe=te-U,ie=J-X,Q=x.current.getBoundingClientRect(),V=Q.width,se=Q.height,re;switch(P){case"btt":re=-ie/se;break;case"ttb":re=ie/se;break;case"rtl":re=-oe/V;break;default:re=oe/V}z.current(F,re)},B=function j(H){H.preventDefault(),document.removeEventListener("mouseup",j),document.removeEventListener("mousemove",I),document.removeEventListener("touchend",j),document.removeEventListener("touchmove",I),A.current=null,k.current=null,s(-1),l()};document.addEventListener("mouseup",B),document.addEventListener("mousemove",I),document.addEventListener("touchend",B),document.addEventListener("touchmove",I),A.current=I,k.current=B},S=_n.useMemo(function(){var C=cp(e).sort(function(F,N){return F-N}),D=cp(y).sort(function(F,N){return F-N});return C.every(function(F,N){return F===D[N]})?y:e},[e,y]);return[i,a,S,E]}function aL(x){var P=x.prefixCls,e=x.style,v=x.start,M=x.end,r=x.index,n=x.onStartMove,l=_n.useContext(rv),c=l.direction,t=l.min,f=l.max,a=l.disabled,o=l.range,u="".concat(P,"-track"),h=$b(v,t,f),i=$b(M,t,f),s=function(y){!a&&n&&n(y,-1)},p={};switch(c){case"rtl":p.right="".concat(h*100,"%"),p.width="".concat(i*100-h*100,"%");break;case"btt":p.bottom="".concat(h*100,"%"),p.height="".concat(i*100-h*100,"%");break;case"ttb":p.top="".concat(h*100,"%"),p.height="".concat(i*100-h*100,"%");break;default:p.left="".concat(h*100,"%"),p.width="".concat(i*100-h*100,"%")}return _n.createElement("div",{className:vg(u,o&&"".concat(u,"-").concat(r+1)),style:Rh(Rh({},p),e),onMouseDown:s,onTouchStart:s})}function iL(x){var P=x.prefixCls,e=x.style,v=x.values,M=x.startPoint,r=x.onStartMove,n=_n.useContext(rv),l=n.included,c=n.range,t=n.min,f=_n.useMemo(function(){if(!c){if(v.length===0)return[];var a=M??t,o=v[0];return[{start:Math.min(a,o),end:Math.max(a,o)}]}for(var u=[],h=0;h<v.length-1;h+=1)u.push({start:v[h],end:v[h+1]});return u},[v,c,M,t]);return l?f.map(function(a,o){var u=a.start,h=a.end;return _n.createElement(aL,{index:o,prefixCls:P,style:t0(e,o),start:u,end:h,key:o,onStartMove:r})}):null}function oL(x){var P=x.prefixCls,e=x.style,v=x.children,M=x.value,r=x.onClick,n=_n.useContext(rv),l=n.min,c=n.max,t=n.direction,f=n.includedStart,a=n.includedEnd,o=n.included,u="".concat(P,"-text"),h=C_(t,M,l,c);return _n.createElement("span",{className:vg(u,up({},"".concat(u,"-active"),o&&f<=M&&M<=a)),style:Rh(Rh({},h),e),onMouseDown:function(s){s.stopPropagation()},onClick:function(){r(M)}},v)}function sL(x){var P=x.prefixCls,e=x.marks,v=x.onClick,M="".concat(P,"-mark");return e.length?_n.createElement("div",{className:M},e.map(function(r){var n=r.value,l=r.style,c=r.label;return _n.createElement(oL,{key:n,prefixCls:M,style:l,value:n,onClick:v},c)})):null}function lL(x){var P=x.prefixCls,e=x.value,v=x.style,M=x.activeStyle,r=_n.useContext(rv),n=r.min,l=r.max,c=r.direction,t=r.included,f=r.includedStart,a=r.includedEnd,o="".concat(P,"-dot"),u=t&&f<=e&&e<=a,h=Rh(Rh({},C_(c,e,n,l)),typeof v=="function"?v(e):v);return u&&(h=Rh(Rh({},h),typeof M=="function"?M(e):M)),_n.createElement("span",{className:vg(o,up({},"".concat(o,"-active"),u)),style:h})}function uL(x){var P=x.prefixCls,e=x.marks,v=x.dots,M=x.style,r=x.activeStyle,n=_n.useContext(rv),l=n.min,c=n.max,t=n.step,f=_n.useMemo(function(){var a=new Set;if(e.forEach(function(u){a.add(u.value)}),v&&t!==null)for(var o=l;o<=c;)a.add(o),o+=t;return Array.from(a)},[l,c,t,v,e]);return _n.createElement("div",{className:"".concat(P,"-step")},f.map(function(a){return _n.createElement(lL,{prefixCls:P,key:a,value:a,style:M,activeStyle:r})}))}function cL(x,P,e,v,M,r){var n=_n.useCallback(function(u){var h=isFinite(u)?u:x;return h=Math.min(P,u),h=Math.max(x,h),h},[x,P]),l=_n.useCallback(function(u){if(e!==null){var h=x+Math.round((n(u)-x)/e)*e,i=function(y){return(String(y).split(".")[1]||"").length},s=Math.max(i(e),i(P),i(x)),p=Number(h.toFixed(s));return x<=p&&p<=P?p:null}return null},[e,x,P,n]),c=_n.useCallback(function(u){var h=n(u),i=v.map(function(d){return d.value});e!==null&&i.push(l(u)),i.push(x,P);var s=i[0],p=P-x;return i.forEach(function(d){var y=Math.abs(h-d);y<=p&&(s=d,p=y)}),s},[x,P,v,e,n,l]),t=function u(h,i,s){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof i=="number"){var d,y=h[s],b=y+i,m=[];v.forEach(function(k){m.push(k.value)}),m.push(x,P),m.push(l(y));var _=i>0?1:-1;p==="unit"?m.push(l(y+_*e)):m.push(l(b)),m=m.filter(function(k){return k!==null}).filter(function(k){return i<0?k<=y:k>=y}),p==="unit"&&(m=m.filter(function(k){return k!==y}));var T=p==="unit"?y:b;d=m[0];var g=Math.abs(d-T);if(m.forEach(function(k){var R=Math.abs(k-T);R<g&&(d=k,g=R)}),d===void 0)return i<0?x:P;if(p==="dist")return d;if(Math.abs(i)>1){var A=cp(h);return A[s]=d,u(A,i-_,s,p)}return d}else{if(i==="min")return x;if(i==="max")return P}},f=function(h,i,s){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",d=h[s],y=t(h,i,s,p);return{value:y,changed:y!==d}},a=function(h){return r===null&&h===0||typeof r=="number"&&h<r},o=function(h,i,s){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",d=h.map(c),y=d[s],b=t(d,i,s,p);if(d[s]=b,M===!1){var m=r||0;s>0&&d[s-1]!==y&&(d[s]=Math.max(d[s],d[s-1]+m)),s<d.length-1&&d[s+1]!==y&&(d[s]=Math.min(d[s],d[s+1]-m))}else if(typeof r=="number"||r===null){for(var _=s+1;_<d.length;_+=1)for(var T=!0;a(d[_]-d[_-1])&&T;){var g=f(d,1,_);d[_]=g.value,T=g.changed}for(var A=s;A>0;A-=1)for(var k=!0;a(d[A]-d[A-1])&&k;){var R=f(d,-1,A-1);d[A-1]=R.value,k=R.changed}for(var L=d.length-1;L>0;L-=1)for(var z=!0;a(d[L]-d[L-1])&&z;){var E=f(d,-1,L-1);d[L-1]=E.value,z=E.changed}for(var S=0;S<d.length-1;S+=1)for(var C=!0;a(d[S+1]-d[S])&&C;){var D=f(d,1,S+1);d[S+1]=D.value,C=D.changed}}return{value:d[s],values:d}};return[c,o]}var fL=_n.forwardRef(function(x,P){var e,v=x.prefixCls,M=v===void 0?"rc-slider":v,r=x.className,n=x.style,l=x.disabled,c=l===void 0?!1:l,t=x.keyboard,f=t===void 0?!0:t,a=x.autoFocus,o=x.onFocus,u=x.onBlur,h=x.min,i=h===void 0?0:h,s=x.max,p=s===void 0?100:s,d=x.step,y=d===void 0?1:d,b=x.value,m=x.defaultValue,_=x.range,T=x.count,g=x.onChange,A=x.onBeforeChange,k=x.onAfterChange,R=x.allowCross,L=R===void 0?!0:R,z=x.pushable,E=z===void 0?!1:z,S=x.draggableTrack,C=x.reverse,D=x.vertical,F=x.included,N=F===void 0?!0:F,G=x.startPoint,U=x.trackStyle,X=x.handleStyle,I=x.railStyle,B=x.dotStyle,j=x.activeDotStyle,H=x.marks,K=x.dots,te=x.handleRender,J=x.tabIndex,oe=J===void 0?0:J,ie=x.ariaLabelForHandle,Q=x.ariaLabelledByForHandle,V=x.ariaValueTextFormatterForHandle,se=_n.useRef(),re=_n.useRef(),ee=_n.useMemo(function(){return D?C?"ttb":"btt":C?"rtl":"ltr"},[C,D]),ae=_n.useMemo(function(){return isFinite(i)?i:0},[i]),fe=_n.useMemo(function(){return isFinite(p)?p:100},[p]),de=_n.useMemo(function(){return y!==null&&y<=0?1:y},[y]),pe=_n.useMemo(function(){return E===!0?de:E>=0?E:!1},[E,de]),W=_n.useMemo(function(){var ht=Object.keys(H||{});return ht.map(function(it){var Ge=H[it],ot={value:Number(it)};return Ge&&od(Ge)==="object"&&!_n.isValidElement(Ge)&&("label"in Ge||"style"in Ge)?(ot.style=Ge.style,ot.label=Ge.label):ot.label=Ge,ot}).filter(function(it){var Ge=it.label;return Ge||typeof Ge=="number"}).sort(function(it,Ge){return it.value-Ge.value})},[H]),ue=cL(ae,fe,de,W,L,pe),me=Xc(ue,2),be=me[0],ke=me[1],Pe=Q9(m,{value:b}),je=Xc(Pe,2),ze=je[0],Ze=je[1],tt=_n.useMemo(function(){var ht=ze==null?[]:Array.isArray(ze)?ze:[ze],it=Xc(ht,1),Ge=it[0],ot=Ge===void 0?ae:Ge,Je=ze===null?[]:[ot];if(_){if(Je=cp(ht),T||ze===void 0){var st=T>=0?T+1:2;for(Je=Je.slice(0,st);Je.length<st;){var It;Je.push((It=Je[Je.length-1])!==null&&It!==void 0?It:ae)}}Je.sort(function(Ft,nr){return Ft-nr})}return Je.forEach(function(Ft,nr){Je[nr]=be(Ft)}),Je},[ze,_,ae,T,be]),Ce=_n.useRef(tt);Ce.current=tt;var Ae=function(it){return _?it:it[0]},Ne=function(it){var Ge=cp(it).sort(function(ot,Je){return ot-Je});g&&!$9(Ge,Ce.current,!0)&&g(Ae(Ge)),Ze(Ge)},qe=function(it){if(!c){var Ge=0,ot=fe-ae;tt.forEach(function(st,It){var Ft=Math.abs(it-st);Ft<=ot&&(ot=Ft,Ge=It)});var Je=cp(tt);Je[Ge]=it,_&&!tt.length&&T===void 0&&Je.push(it),A==null||A(Ae(Je)),Ne(Je),k==null||k(Ae(Je))}},At=function(it){it.preventDefault();var Ge=re.current.getBoundingClientRect(),ot=Ge.width,Je=Ge.height,st=Ge.left,It=Ge.top,Ft=Ge.bottom,nr=Ge.right,We=it.clientX,Fe=it.clientY,_t;switch(ee){case"btt":_t=(Ft-Fe)/Je;break;case"ttb":_t=(Fe-It)/Je;break;case"rtl":_t=(nr-We)/ot;break;default:_t=(We-st)/ot}var Mt=ae+_t*(fe-ae);qe(be(Mt))},kt=_n.useState(null),Ve=Xc(kt,2),ft=Ve[0],St=Ve[1],Wt=function(it,Ge){if(!c){var ot=ke(tt,it,Ge);A==null||A(Ae(tt)),Ne(ot.values),k==null||k(Ae(ot.values)),St(ot.value)}};_n.useEffect(function(){if(ft!==null){var ht=tt.indexOf(ft);ht>=0&&se.current.focus(ht)}St(null)},[ft]);var Qt=_n.useMemo(function(){return S&&de===null?!1:S},[S,de]),zt=function(){k==null||k(Ae(Ce.current))},$t=nL(re,ee,tt,ae,fe,be,Ne,zt,ke),rr=Xc($t,4),Pt=rr[0],Lt=rr[1],dt=rr[2],lt=rr[3],Te=function(it,Ge){lt(it,Ge),A==null||A(Ae(Ce.current))},Le=Pt!==-1;_n.useEffect(function(){if(!Le){var ht=tt.lastIndexOf(Lt);se.current.focus(ht)}},[Le]);var Be=_n.useMemo(function(){return cp(dt).sort(function(ht,it){return ht-it})},[dt]),et=_n.useMemo(function(){return _?[Be[0],Be[Be.length-1]]:[ae,Be[0]]},[Be,_,ae]),Me=Xc(et,2),Ie=Me[0],He=Me[1];_n.useImperativeHandle(P,function(){return{focus:function(){se.current.focus(0)},blur:function(){var it=document,Ge=it.activeElement;re.current.contains(Ge)&&(Ge==null||Ge.blur())}}}),_n.useEffect(function(){a&&se.current.focus(0)},[]);var Xe=_n.useMemo(function(){return{min:ae,max:fe,direction:ee,disabled:c,keyboard:f,step:de,included:N,includedStart:Ie,includedEnd:He,range:_,tabIndex:oe,ariaLabelForHandle:ie,ariaLabelledByForHandle:Q,ariaValueTextFormatterForHandle:V}},[ae,fe,ee,c,f,de,N,Ie,He,_,oe,ie,Q,V]);return _n.createElement(rv.Provider,{value:Xe},_n.createElement("div",{ref:re,className:vg(M,r,(e={},up(e,"".concat(M,"-disabled"),c),up(e,"".concat(M,"-vertical"),D),up(e,"".concat(M,"-horizontal"),!D),up(e,"".concat(M,"-with-marks"),W.length),e)),style:n,onMouseDown:At},_n.createElement("div",{className:"".concat(M,"-rail"),style:I}),_n.createElement(iL,{prefixCls:M,style:U,values:Be,startPoint:G,onStartMove:Qt?Te:null}),_n.createElement(uL,{prefixCls:M,marks:W,dots:K,style:B,activeStyle:j}),_n.createElement(rL,{ref:se,prefixCls:M,style:X,values:dt,draggingIndex:Pt,onStartMove:Te,onOffsetChange:Wt,onFocus:o,onBlur:u,handleRender:te}),_n.createElement(sL,{prefixCls:M,marks:W,onClick:qe})))});function u6(x,P){return function(){return x.apply(P,arguments)}}const{toString:c6}=Object.prototype,{getPrototypeOf:L_}=Object,P_=(x=>P=>{const e=c6.call(P);return x[e]||(x[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),vp=x=>(x=x.toLowerCase(),P=>P_(P)===x),Uy=x=>P=>typeof P===x,{isArray:P0}=Array,ng=Uy("undefined");function hL(x){return x!==null&&!ng(x)&&x.constructor!==null&&!ng(x.constructor)&&sd(x.constructor.isBuffer)&&x.constructor.isBuffer(x)}const f6=vp("ArrayBuffer");function pL(x){let P;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?P=ArrayBuffer.isView(x):P=x&&x.buffer&&f6(x.buffer),P}const dL=Uy("string"),sd=Uy("function"),h6=Uy("number"),R_=x=>x!==null&&typeof x=="object",vL=x=>x===!0||x===!1,w1=x=>{if(P_(x)!=="object")return!1;const P=L_(x);return(P===null||P===Object.prototype||Object.getPrototypeOf(P)===null)&&!(Symbol.toStringTag in x)&&!(Symbol.iterator in x)},mL=vp("Date"),gL=vp("File"),yL=vp("Blob"),xL=vp("FileList"),bL=x=>R_(x)&&sd(x.pipe),_L=x=>{const P="[object FormData]";return x&&(typeof FormData=="function"&&x instanceof FormData||c6.call(x)===P||sd(x.toString)&&x.toString()===P)},wL=vp("URLSearchParams"),TL=x=>x.trim?x.trim():x.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function mg(x,P,{allOwnKeys:e=!1}={}){if(x===null||typeof x>"u")return;let v,M;if(typeof x!="object"&&(x=[x]),P0(x))for(v=0,M=x.length;v<M;v++)P.call(null,x[v],v,x);else{const r=e?Object.getOwnPropertyNames(x):Object.keys(x),n=r.length;let l;for(v=0;v<n;v++)l=r[v],P.call(null,x[l],l,x)}}function p6(x,P){P=P.toLowerCase();const e=Object.keys(x);let v=e.length,M;for(;v-- >0;)if(M=e[v],P===M.toLowerCase())return M;return null}const d6=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),v6=x=>!ng(x)&&x!==d6;function Jb(){const{caseless:x}=v6(this)&&this||{},P={},e=(v,M)=>{const r=x&&p6(P,M)||M;w1(P[r])&&w1(v)?P[r]=Jb(P[r],v):w1(v)?P[r]=Jb({},v):P0(v)?P[r]=v.slice():P[r]=v};for(let v=0,M=arguments.length;v<M;v++)arguments[v]&&mg(arguments[v],e);return P}const AL=(x,P,e,{allOwnKeys:v}={})=>(mg(P,(M,r)=>{e&&sd(M)?x[r]=u6(M,e):x[r]=M},{allOwnKeys:v}),x),kL=x=>(x.charCodeAt(0)===65279&&(x=x.slice(1)),x),ML=(x,P,e,v)=>{x.prototype=Object.create(P.prototype,v),x.prototype.constructor=x,Object.defineProperty(x,"super",{value:P.prototype}),e&&Object.assign(x.prototype,e)},SL=(x,P,e,v)=>{let M,r,n;const l={};if(P=P||{},x==null)return P;do{for(M=Object.getOwnPropertyNames(x),r=M.length;r-- >0;)n=M[r],(!v||v(n,x,P))&&!l[n]&&(P[n]=x[n],l[n]=!0);x=e!==!1&&L_(x)}while(x&&(!e||e(x,P))&&x!==Object.prototype);return P},EL=(x,P,e)=>{x=String(x),(e===void 0||e>x.length)&&(e=x.length),e-=P.length;const v=x.indexOf(P,e);return v!==-1&&v===e},CL=x=>{if(!x)return null;if(P0(x))return x;let P=x.length;if(!h6(P))return null;const e=new Array(P);for(;P-- >0;)e[P]=x[P];return e},LL=(x=>P=>x&&P instanceof x)(typeof Uint8Array<"u"&&L_(Uint8Array)),PL=(x,P)=>{const v=(x&&x[Symbol.iterator]).call(x);let M;for(;(M=v.next())&&!M.done;){const r=M.value;P.call(x,r[0],r[1])}},RL=(x,P)=>{let e;const v=[];for(;(e=x.exec(P))!==null;)v.push(e);return v},DL=vp("HTMLFormElement"),IL=x=>x.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,v,M){return v.toUpperCase()+M}),a5=(({hasOwnProperty:x})=>(P,e)=>x.call(P,e))(Object.prototype),zL=vp("RegExp"),m6=(x,P)=>{const e=Object.getOwnPropertyDescriptors(x),v={};mg(e,(M,r)=>{P(M,r,x)!==!1&&(v[r]=M)}),Object.defineProperties(x,v)},OL=x=>{m6(x,(P,e)=>{if(sd(x)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const v=x[e];if(sd(v)){if(P.enumerable=!1,"writable"in P){P.writable=!1;return}P.set||(P.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},FL=(x,P)=>{const e={},v=M=>{M.forEach(r=>{e[r]=!0})};return P0(x)?v(x):v(String(x).split(P)),e},NL=()=>{},BL=(x,P)=>(x=+x,Number.isFinite(x)?x:P),Dx="abcdefghijklmnopqrstuvwxyz",i5="0123456789",g6={DIGIT:i5,ALPHA:Dx,ALPHA_DIGIT:Dx+Dx.toUpperCase()+i5},UL=(x=16,P=g6.ALPHA_DIGIT)=>{let e="";const{length:v}=P;for(;x--;)e+=P[Math.random()*v|0];return e};function VL(x){return!!(x&&sd(x.append)&&x[Symbol.toStringTag]==="FormData"&&x[Symbol.iterator])}const HL=x=>{const P=new Array(10),e=(v,M)=>{if(R_(v)){if(P.indexOf(v)>=0)return;if(!("toJSON"in v)){P[M]=v;const r=P0(v)?[]:{};return mg(v,(n,l)=>{const c=e(n,M+1);!ng(c)&&(r[l]=c)}),P[M]=void 0,r}}return v};return e(x,0)},fa={isArray:P0,isArrayBuffer:f6,isBuffer:hL,isFormData:_L,isArrayBufferView:pL,isString:dL,isNumber:h6,isBoolean:vL,isObject:R_,isPlainObject:w1,isUndefined:ng,isDate:mL,isFile:gL,isBlob:yL,isRegExp:zL,isFunction:sd,isStream:bL,isURLSearchParams:wL,isTypedArray:LL,isFileList:xL,forEach:mg,merge:Jb,extend:AL,trim:TL,stripBOM:kL,inherits:ML,toFlatObject:SL,kindOf:P_,kindOfTest:vp,endsWith:EL,toArray:CL,forEachEntry:PL,matchAll:RL,isHTMLForm:DL,hasOwnProperty:a5,hasOwnProp:a5,reduceDescriptors:m6,freezeMethods:OL,toObjectSet:FL,toCamelCase:IL,noop:NL,toFiniteNumber:BL,findKey:p6,global:d6,isContextDefined:v6,ALPHABET:g6,generateString:UL,isSpecCompliantForm:VL,toJSONObject:HL};function Wo(x,P,e,v,M){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=x,this.name="AxiosError",P&&(this.code=P),e&&(this.config=e),v&&(this.request=v),M&&(this.response=M)}fa.inherits(Wo,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fa.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const y6=Wo.prototype,x6={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(x=>{x6[x]={value:x}});Object.defineProperties(Wo,x6);Object.defineProperty(y6,"isAxiosError",{value:!0});Wo.from=(x,P,e,v,M,r)=>{const n=Object.create(y6);return fa.toFlatObject(x,n,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Wo.call(n,x.message,P,e,v,M),n.cause=x,n.name=x.name,r&&Object.assign(n,r),n};const jL=null;function Qb(x){return fa.isPlainObject(x)||fa.isArray(x)}function b6(x){return fa.endsWith(x,"[]")?x.slice(0,-2):x}function o5(x,P,e){return x?x.concat(P).map(function(M,r){return M=b6(M),!e&&r?"["+M+"]":M}).join(e?".":""):P}function GL(x){return fa.isArray(x)&&!x.some(Qb)}const WL=fa.toFlatObject(fa,{},null,function(P){return/^is[A-Z]/.test(P)});function Vy(x,P,e){if(!fa.isObject(x))throw new TypeError("target must be an object");P=P||new FormData,e=fa.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(i,s){return!fa.isUndefined(s[i])});const v=e.metaTokens,M=e.visitor||f,r=e.dots,n=e.indexes,c=(e.Blob||typeof Blob<"u"&&Blob)&&fa.isSpecCompliantForm(P);if(!fa.isFunction(M))throw new TypeError("visitor must be a function");function t(h){if(h===null)return"";if(fa.isDate(h))return h.toISOString();if(!c&&fa.isBlob(h))throw new Wo("Blob is not supported. Use a Buffer instead.");return fa.isArrayBuffer(h)||fa.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function f(h,i,s){let p=h;if(h&&!s&&typeof h=="object"){if(fa.endsWith(i,"{}"))i=v?i:i.slice(0,-2),h=JSON.stringify(h);else if(fa.isArray(h)&&GL(h)||(fa.isFileList(h)||fa.endsWith(i,"[]"))&&(p=fa.toArray(h)))return i=b6(i),p.forEach(function(y,b){!(fa.isUndefined(y)||y===null)&&P.append(n===!0?o5([i],b,r):n===null?i:i+"[]",t(y))}),!1}return Qb(h)?!0:(P.append(o5(s,i,r),t(h)),!1)}const a=[],o=Object.assign(WL,{defaultVisitor:f,convertValue:t,isVisitable:Qb});function u(h,i){if(!fa.isUndefined(h)){if(a.indexOf(h)!==-1)throw Error("Circular reference detected in "+i.join("."));a.push(h),fa.forEach(h,function(p,d){(!(fa.isUndefined(p)||p===null)&&M.call(P,p,fa.isString(d)?d.trim():d,i,o))===!0&&u(p,i?i.concat(d):[d])}),a.pop()}}if(!fa.isObject(x))throw new TypeError("data must be an object");return u(x),P}function s5(x){const P={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(x).replace(/[!'()~]|%20|%00/g,function(v){return P[v]})}function D_(x,P){this._pairs=[],x&&Vy(x,this,P)}const _6=D_.prototype;_6.append=function(P,e){this._pairs.push([P,e])};_6.toString=function(P){const e=P?function(v){return P.call(this,v,s5)}:s5;return this._pairs.map(function(M){return e(M[0])+"="+e(M[1])},"").join("&")};function YL(x){return encodeURIComponent(x).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function w6(x,P,e){if(!P)return x;const v=e&&e.encode||YL,M=e&&e.serialize;let r;if(M?r=M(P,e):r=fa.isURLSearchParams(P)?P.toString():new D_(P,e).toString(v),r){const n=x.indexOf("#");n!==-1&&(x=x.slice(0,n)),x+=(x.indexOf("?")===-1?"?":"&")+r}return x}class XL{constructor(){this.handlers=[]}use(P,e,v){return this.handlers.push({fulfilled:P,rejected:e,synchronous:v?v.synchronous:!1,runWhen:v?v.runWhen:null}),this.handlers.length-1}eject(P){this.handlers[P]&&(this.handlers[P]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(P){fa.forEach(this.handlers,function(v){v!==null&&P(v)})}}const l5=XL,T6={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ZL=typeof URLSearchParams<"u"?URLSearchParams:D_,KL=typeof FormData<"u"?FormData:null,$L=typeof Blob<"u"?Blob:null,JL=(()=>{let x;return typeof navigator<"u"&&((x=navigator.product)==="ReactNative"||x==="NativeScript"||x==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),QL=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Dh={isBrowser:!0,classes:{URLSearchParams:ZL,FormData:KL,Blob:$L},isStandardBrowserEnv:JL,isStandardBrowserWebWorkerEnv:QL,protocols:["http","https","file","blob","url","data"]};function qL(x,P){return Vy(x,new Dh.classes.URLSearchParams,Object.assign({visitor:function(e,v,M,r){return Dh.isNode&&fa.isBuffer(e)?(this.append(v,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},P))}function eP(x){return fa.matchAll(/\w+|\[(\w*)]/g,x).map(P=>P[0]==="[]"?"":P[1]||P[0])}function tP(x){const P={},e=Object.keys(x);let v;const M=e.length;let r;for(v=0;v<M;v++)r=e[v],P[r]=x[r];return P}function A6(x){function P(e,v,M,r){let n=e[r++];const l=Number.isFinite(+n),c=r>=e.length;return n=!n&&fa.isArray(M)?M.length:n,c?(fa.hasOwnProp(M,n)?M[n]=[M[n],v]:M[n]=v,!l):((!M[n]||!fa.isObject(M[n]))&&(M[n]=[]),P(e,v,M[n],r)&&fa.isArray(M[n])&&(M[n]=tP(M[n])),!l)}if(fa.isFormData(x)&&fa.isFunction(x.entries)){const e={};return fa.forEachEntry(x,(v,M)=>{P(eP(v),M,e,0)}),e}return null}const rP={"Content-Type":void 0};function nP(x,P,e){if(fa.isString(x))try{return(P||JSON.parse)(x),fa.trim(x)}catch(v){if(v.name!=="SyntaxError")throw v}return(e||JSON.stringify)(x)}const Hy={transitional:T6,adapter:["xhr","http"],transformRequest:[function(P,e){const v=e.getContentType()||"",M=v.indexOf("application/json")>-1,r=fa.isObject(P);if(r&&fa.isHTMLForm(P)&&(P=new FormData(P)),fa.isFormData(P))return M&&M?JSON.stringify(A6(P)):P;if(fa.isArrayBuffer(P)||fa.isBuffer(P)||fa.isStream(P)||fa.isFile(P)||fa.isBlob(P))return P;if(fa.isArrayBufferView(P))return P.buffer;if(fa.isURLSearchParams(P))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),P.toString();let l;if(r){if(v.indexOf("application/x-www-form-urlencoded")>-1)return qL(P,this.formSerializer).toString();if((l=fa.isFileList(P))||v.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Vy(l?{"files[]":P}:P,c&&new c,this.formSerializer)}}return r||M?(e.setContentType("application/json",!1),nP(P)):P}],transformResponse:[function(P){const e=this.transitional||Hy.transitional,v=e&&e.forcedJSONParsing,M=this.responseType==="json";if(P&&fa.isString(P)&&(v&&!this.responseType||M)){const n=!(e&&e.silentJSONParsing)&&M;try{return JSON.parse(P)}catch(l){if(n)throw l.name==="SyntaxError"?Wo.from(l,Wo.ERR_BAD_RESPONSE,this,null,this.response):l}}return P}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dh.classes.FormData,Blob:Dh.classes.Blob},validateStatus:function(P){return P>=200&&P<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};fa.forEach(["delete","get","head"],function(P){Hy.headers[P]={}});fa.forEach(["post","put","patch"],function(P){Hy.headers[P]=fa.merge(rP)});const I_=Hy,aP=fa.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),iP=x=>{const P={};let e,v,M;return x&&x.split(`
`).forEach(function(n){M=n.indexOf(":"),e=n.substring(0,M).trim().toLowerCase(),v=n.substring(M+1).trim(),!(!e||P[e]&&aP[e])&&(e==="set-cookie"?P[e]?P[e].push(v):P[e]=[v]:P[e]=P[e]?P[e]+", "+v:v)}),P},u5=Symbol("internals");function dm(x){return x&&String(x).trim().toLowerCase()}function T1(x){return x===!1||x==null?x:fa.isArray(x)?x.map(T1):String(x)}function oP(x){const P=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let v;for(;v=e.exec(x);)P[v[1]]=v[2];return P}const sP=x=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(x.trim());function Ix(x,P,e,v,M){if(fa.isFunction(v))return v.call(this,P,e);if(M&&(P=e),!!fa.isString(P)){if(fa.isString(v))return P.indexOf(v)!==-1;if(fa.isRegExp(v))return v.test(P)}}function lP(x){return x.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(P,e,v)=>e.toUpperCase()+v)}function uP(x,P){const e=fa.toCamelCase(" "+P);["get","set","has"].forEach(v=>{Object.defineProperty(x,v+e,{value:function(M,r,n){return this[v].call(this,P,M,r,n)},configurable:!0})})}class jy{constructor(P){P&&this.set(P)}set(P,e,v){const M=this;function r(l,c,t){const f=dm(c);if(!f)throw new Error("header name must be a non-empty string");const a=fa.findKey(M,f);(!a||M[a]===void 0||t===!0||t===void 0&&M[a]!==!1)&&(M[a||c]=T1(l))}const n=(l,c)=>fa.forEach(l,(t,f)=>r(t,f,c));return fa.isPlainObject(P)||P instanceof this.constructor?n(P,e):fa.isString(P)&&(P=P.trim())&&!sP(P)?n(iP(P),e):P!=null&&r(e,P,v),this}get(P,e){if(P=dm(P),P){const v=fa.findKey(this,P);if(v){const M=this[v];if(!e)return M;if(e===!0)return oP(M);if(fa.isFunction(e))return e.call(this,M,v);if(fa.isRegExp(e))return e.exec(M);throw new TypeError("parser must be boolean|regexp|function")}}}has(P,e){if(P=dm(P),P){const v=fa.findKey(this,P);return!!(v&&this[v]!==void 0&&(!e||Ix(this,this[v],v,e)))}return!1}delete(P,e){const v=this;let M=!1;function r(n){if(n=dm(n),n){const l=fa.findKey(v,n);l&&(!e||Ix(v,v[l],l,e))&&(delete v[l],M=!0)}}return fa.isArray(P)?P.forEach(r):r(P),M}clear(P){const e=Object.keys(this);let v=e.length,M=!1;for(;v--;){const r=e[v];(!P||Ix(this,this[r],r,P,!0))&&(delete this[r],M=!0)}return M}normalize(P){const e=this,v={};return fa.forEach(this,(M,r)=>{const n=fa.findKey(v,r);if(n){e[n]=T1(M),delete e[r];return}const l=P?lP(r):String(r).trim();l!==r&&delete e[r],e[l]=T1(M),v[l]=!0}),this}concat(...P){return this.constructor.concat(this,...P)}toJSON(P){const e=Object.create(null);return fa.forEach(this,(v,M)=>{v!=null&&v!==!1&&(e[M]=P&&fa.isArray(v)?v.join(", "):v)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([P,e])=>P+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(P){return P instanceof this?P:new this(P)}static concat(P,...e){const v=new this(P);return e.forEach(M=>v.set(M)),v}static accessor(P){const v=(this[u5]=this[u5]={accessors:{}}).accessors,M=this.prototype;function r(n){const l=dm(n);v[l]||(uP(M,n),v[l]=!0)}return fa.isArray(P)?P.forEach(r):r(P),this}}jy.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);fa.freezeMethods(jy.prototype);fa.freezeMethods(jy);const hp=jy;function zx(x,P){const e=this||I_,v=P||e,M=hp.from(v.headers);let r=v.data;return fa.forEach(x,function(l){r=l.call(e,r,M.normalize(),P?P.status:void 0)}),M.normalize(),r}function k6(x){return!!(x&&x.__CANCEL__)}function gg(x,P,e){Wo.call(this,x??"canceled",Wo.ERR_CANCELED,P,e),this.name="CanceledError"}fa.inherits(gg,Wo,{__CANCEL__:!0});function cP(x,P,e){const v=e.config.validateStatus;!e.status||!v||v(e.status)?x(e):P(new Wo("Request failed with status code "+e.status,[Wo.ERR_BAD_REQUEST,Wo.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const fP=Dh.isStandardBrowserEnv?function(){return{write:function(e,v,M,r,n,l){const c=[];c.push(e+"="+encodeURIComponent(v)),fa.isNumber(M)&&c.push("expires="+new Date(M).toGMTString()),fa.isString(r)&&c.push("path="+r),fa.isString(n)&&c.push("domain="+n),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){const v=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return v?decodeURIComponent(v[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function hP(x){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(x)}function pP(x,P){return P?x.replace(/\/+$/,"")+"/"+P.replace(/^\/+/,""):x}function M6(x,P){return x&&!hP(P)?pP(x,P):P}const dP=Dh.isStandardBrowserEnv?function(){const P=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let v;function M(r){let n=r;return P&&(e.setAttribute("href",n),n=e.href),e.setAttribute("href",n),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return v=M(window.location.href),function(n){const l=fa.isString(n)?M(n):n;return l.protocol===v.protocol&&l.host===v.host}}():function(){return function(){return!0}}();function vP(x){const P=/^([-+\w]{1,25})(:?\/\/|:)/.exec(x);return P&&P[1]||""}function mP(x,P){x=x||10;const e=new Array(x),v=new Array(x);let M=0,r=0,n;return P=P!==void 0?P:1e3,function(c){const t=Date.now(),f=v[r];n||(n=t),e[M]=c,v[M]=t;let a=r,o=0;for(;a!==M;)o+=e[a++],a=a%x;if(M=(M+1)%x,M===r&&(r=(r+1)%x),t-n<P)return;const u=f&&t-f;return u?Math.round(o*1e3/u):void 0}}function c5(x,P){let e=0;const v=mP(50,250);return M=>{const r=M.loaded,n=M.lengthComputable?M.total:void 0,l=r-e,c=v(l),t=r<=n;e=r;const f={loaded:r,total:n,progress:n?r/n:void 0,bytes:l,rate:c||void 0,estimated:c&&n&&t?(n-r)/c:void 0,event:M};f[P?"download":"upload"]=!0,x(f)}}const gP=typeof XMLHttpRequest<"u",yP=gP&&function(x){return new Promise(function(e,v){let M=x.data;const r=hp.from(x.headers).normalize(),n=x.responseType;let l;function c(){x.cancelToken&&x.cancelToken.unsubscribe(l),x.signal&&x.signal.removeEventListener("abort",l)}fa.isFormData(M)&&(Dh.isStandardBrowserEnv||Dh.isStandardBrowserWebWorkerEnv)&&r.setContentType(!1);let t=new XMLHttpRequest;if(x.auth){const u=x.auth.username||"",h=x.auth.password?unescape(encodeURIComponent(x.auth.password)):"";r.set("Authorization","Basic "+btoa(u+":"+h))}const f=M6(x.baseURL,x.url);t.open(x.method.toUpperCase(),w6(f,x.params,x.paramsSerializer),!0),t.timeout=x.timeout;function a(){if(!t)return;const u=hp.from("getAllResponseHeaders"in t&&t.getAllResponseHeaders()),i={data:!n||n==="text"||n==="json"?t.responseText:t.response,status:t.status,statusText:t.statusText,headers:u,config:x,request:t};cP(function(p){e(p),c()},function(p){v(p),c()},i),t=null}if("onloadend"in t?t.onloadend=a:t.onreadystatechange=function(){!t||t.readyState!==4||t.status===0&&!(t.responseURL&&t.responseURL.indexOf("file:")===0)||setTimeout(a)},t.onabort=function(){t&&(v(new Wo("Request aborted",Wo.ECONNABORTED,x,t)),t=null)},t.onerror=function(){v(new Wo("Network Error",Wo.ERR_NETWORK,x,t)),t=null},t.ontimeout=function(){let h=x.timeout?"timeout of "+x.timeout+"ms exceeded":"timeout exceeded";const i=x.transitional||T6;x.timeoutErrorMessage&&(h=x.timeoutErrorMessage),v(new Wo(h,i.clarifyTimeoutError?Wo.ETIMEDOUT:Wo.ECONNABORTED,x,t)),t=null},Dh.isStandardBrowserEnv){const u=(x.withCredentials||dP(f))&&x.xsrfCookieName&&fP.read(x.xsrfCookieName);u&&r.set(x.xsrfHeaderName,u)}M===void 0&&r.setContentType(null),"setRequestHeader"in t&&fa.forEach(r.toJSON(),function(h,i){t.setRequestHeader(i,h)}),fa.isUndefined(x.withCredentials)||(t.withCredentials=!!x.withCredentials),n&&n!=="json"&&(t.responseType=x.responseType),typeof x.onDownloadProgress=="function"&&t.addEventListener("progress",c5(x.onDownloadProgress,!0)),typeof x.onUploadProgress=="function"&&t.upload&&t.upload.addEventListener("progress",c5(x.onUploadProgress)),(x.cancelToken||x.signal)&&(l=u=>{t&&(v(!u||u.type?new gg(null,x,t):u),t.abort(),t=null)},x.cancelToken&&x.cancelToken.subscribe(l),x.signal&&(x.signal.aborted?l():x.signal.addEventListener("abort",l)));const o=vP(f);if(o&&Dh.protocols.indexOf(o)===-1){v(new Wo("Unsupported protocol "+o+":",Wo.ERR_BAD_REQUEST,x));return}t.send(M||null)})},A1={http:jL,xhr:yP};fa.forEach(A1,(x,P)=>{if(x){try{Object.defineProperty(x,"name",{value:P})}catch{}Object.defineProperty(x,"adapterName",{value:P})}});const xP={getAdapter:x=>{x=fa.isArray(x)?x:[x];const{length:P}=x;let e,v;for(let M=0;M<P&&(e=x[M],!(v=fa.isString(e)?A1[e.toLowerCase()]:e));M++);if(!v)throw v===!1?new Wo(`Adapter ${e} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(fa.hasOwnProp(A1,e)?`Adapter '${e}' is not available in the build`:`Unknown adapter '${e}'`);if(!fa.isFunction(v))throw new TypeError("adapter is not a function");return v},adapters:A1};function Ox(x){if(x.cancelToken&&x.cancelToken.throwIfRequested(),x.signal&&x.signal.aborted)throw new gg(null,x)}function f5(x){return Ox(x),x.headers=hp.from(x.headers),x.data=zx.call(x,x.transformRequest),["post","put","patch"].indexOf(x.method)!==-1&&x.headers.setContentType("application/x-www-form-urlencoded",!1),xP.getAdapter(x.adapter||I_.adapter)(x).then(function(v){return Ox(x),v.data=zx.call(x,x.transformResponse,v),v.headers=hp.from(v.headers),v},function(v){return k6(v)||(Ox(x),v&&v.response&&(v.response.data=zx.call(x,x.transformResponse,v.response),v.response.headers=hp.from(v.response.headers))),Promise.reject(v)})}const h5=x=>x instanceof hp?x.toJSON():x;function w0(x,P){P=P||{};const e={};function v(t,f,a){return fa.isPlainObject(t)&&fa.isPlainObject(f)?fa.merge.call({caseless:a},t,f):fa.isPlainObject(f)?fa.merge({},f):fa.isArray(f)?f.slice():f}function M(t,f,a){if(fa.isUndefined(f)){if(!fa.isUndefined(t))return v(void 0,t,a)}else return v(t,f,a)}function r(t,f){if(!fa.isUndefined(f))return v(void 0,f)}function n(t,f){if(fa.isUndefined(f)){if(!fa.isUndefined(t))return v(void 0,t)}else return v(void 0,f)}function l(t,f,a){if(a in P)return v(t,f);if(a in x)return v(void 0,t)}const c={url:r,method:r,data:r,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:l,headers:(t,f)=>M(h5(t),h5(f),!0)};return fa.forEach(Object.keys(x).concat(Object.keys(P)),function(f){const a=c[f]||M,o=a(x[f],P[f],f);fa.isUndefined(o)&&a!==l||(e[f]=o)}),e}const S6="1.3.5",z_={};["object","boolean","number","function","string","symbol"].forEach((x,P)=>{z_[x]=function(v){return typeof v===x||"a"+(P<1?"n ":" ")+x}});const p5={};z_.transitional=function(P,e,v){function M(r,n){return"[Axios v"+S6+"] Transitional option '"+r+"'"+n+(v?". "+v:"")}return(r,n,l)=>{if(P===!1)throw new Wo(M(n," has been removed"+(e?" in "+e:"")),Wo.ERR_DEPRECATED);return e&&!p5[n]&&(p5[n]=!0,console.warn(M(n," has been deprecated since v"+e+" and will be removed in the near future"))),P?P(r,n,l):!0}};function bP(x,P,e){if(typeof x!="object")throw new Wo("options must be an object",Wo.ERR_BAD_OPTION_VALUE);const v=Object.keys(x);let M=v.length;for(;M-- >0;){const r=v[M],n=P[r];if(n){const l=x[r],c=l===void 0||n(l,r,x);if(c!==!0)throw new Wo("option "+r+" must be "+c,Wo.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Wo("Unknown option "+r,Wo.ERR_BAD_OPTION)}}const qb={assertOptions:bP,validators:z_},Bp=qb.validators;class Q1{constructor(P){this.defaults=P,this.interceptors={request:new l5,response:new l5}}request(P,e){typeof P=="string"?(e=e||{},e.url=P):e=P||{},e=w0(this.defaults,e);const{transitional:v,paramsSerializer:M,headers:r}=e;v!==void 0&&qb.assertOptions(v,{silentJSONParsing:Bp.transitional(Bp.boolean),forcedJSONParsing:Bp.transitional(Bp.boolean),clarifyTimeoutError:Bp.transitional(Bp.boolean)},!1),M!=null&&(fa.isFunction(M)?e.paramsSerializer={serialize:M}:qb.assertOptions(M,{encode:Bp.function,serialize:Bp.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let n;n=r&&fa.merge(r.common,r[e.method]),n&&fa.forEach(["delete","get","head","post","put","patch","common"],h=>{delete r[h]}),e.headers=hp.concat(n,r);const l=[];let c=!0;this.interceptors.request.forEach(function(i){typeof i.runWhen=="function"&&i.runWhen(e)===!1||(c=c&&i.synchronous,l.unshift(i.fulfilled,i.rejected))});const t=[];this.interceptors.response.forEach(function(i){t.push(i.fulfilled,i.rejected)});let f,a=0,o;if(!c){const h=[f5.bind(this),void 0];for(h.unshift.apply(h,l),h.push.apply(h,t),o=h.length,f=Promise.resolve(e);a<o;)f=f.then(h[a++],h[a++]);return f}o=l.length;let u=e;for(a=0;a<o;){const h=l[a++],i=l[a++];try{u=h(u)}catch(s){i.call(this,s);break}}try{f=f5.call(this,u)}catch(h){return Promise.reject(h)}for(a=0,o=t.length;a<o;)f=f.then(t[a++],t[a++]);return f}getUri(P){P=w0(this.defaults,P);const e=M6(P.baseURL,P.url);return w6(e,P.params,P.paramsSerializer)}}fa.forEach(["delete","get","head","options"],function(P){Q1.prototype[P]=function(e,v){return this.request(w0(v||{},{method:P,url:e,data:(v||{}).data}))}});fa.forEach(["post","put","patch"],function(P){function e(v){return function(r,n,l){return this.request(w0(l||{},{method:P,headers:v?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}Q1.prototype[P]=e(),Q1.prototype[P+"Form"]=e(!0)});const k1=Q1;class O_{constructor(P){if(typeof P!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const v=this;this.promise.then(M=>{if(!v._listeners)return;let r=v._listeners.length;for(;r-- >0;)v._listeners[r](M);v._listeners=null}),this.promise.then=M=>{let r;const n=new Promise(l=>{v.subscribe(l),r=l}).then(M);return n.cancel=function(){v.unsubscribe(r)},n},P(function(r,n,l){v.reason||(v.reason=new gg(r,n,l),e(v.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(P){if(this.reason){P(this.reason);return}this._listeners?this._listeners.push(P):this._listeners=[P]}unsubscribe(P){if(!this._listeners)return;const e=this._listeners.indexOf(P);e!==-1&&this._listeners.splice(e,1)}static source(){let P;return{token:new O_(function(M){P=M}),cancel:P}}}const _P=O_;function wP(x){return function(e){return x.apply(null,e)}}function TP(x){return fa.isObject(x)&&x.isAxiosError===!0}const e2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(e2).forEach(([x,P])=>{e2[P]=x});const AP=e2;function E6(x){const P=new k1(x),e=u6(k1.prototype.request,P);return fa.extend(e,k1.prototype,P,{allOwnKeys:!0}),fa.extend(e,P,null,{allOwnKeys:!0}),e.create=function(M){return E6(w0(x,M))},e}const fu=E6(I_);fu.Axios=k1;fu.CanceledError=gg;fu.CancelToken=_P;fu.isCancel=k6;fu.VERSION=S6;fu.toFormData=Vy;fu.AxiosError=Wo;fu.Cancel=fu.CanceledError;fu.all=function(P){return Promise.all(P)};fu.spread=wP;fu.isAxiosError=TP;fu.mergeConfig=w0;fu.AxiosHeaders=hp;fu.formToJSON=x=>A6(fa.isHTMLForm(x)?new FormData(x):x);fu.HttpStatusCode=AP;fu.default=fu;const kP=fu;class t2 extends bn.Component{constructor(P){super(P),this.windowWidth=P.windowWidth,this.onSliderChange=this.onSliderChange.bind(this),this.state={rawdata:[{y:null,x:null,type:"bar"}]}}async onSliderChange(P){return console.log("what?"),kP.get("https://frontend-dev.ruralopportunitymap.us/__api__/hist-raw",{params:{bins:P}}).then(e=>{console.log(e.data),this.setState({rawdata:[{y:e.data.map(v=>v.counts),x:e.data.map(v=>v.mids),type:"bar"}]}),console.log("(Re-)Render to plotly component: ",`
<Plot
    data={"${this.state.rawdata}"}
    layout={{
        title: 'Histogram of waiting times',
        bargap: 0.01,
        autosize: false,
        width: (0.364583 * ${this.windowWidth}),
        height: (0.234375 * ${this.windowWidth}),
        xaxis: {
            title: 'Waiting time to next eruption (in mins)'
        },
        yaxis: {
            title: 'Frequency'
        },
        useResizeHandler: true,
        responsive: true
    }}
/>
`)})}render(){return bn.createElement(bn.Fragment,null,bn.createElement("div",{className:"card"},bn.createElement(N9,{data:this.state.rawdata,layout:{title:"Histogram of waiting times",bargap:.01,autosize:!1,width:.364583*this.windowWidth,height:.234375*this.windowWidth,xaxis:{title:"Waiting time to next eruption (in mins)"},yaxis:{title:"Frequency"},useResizeHandler:!0,responsive:!0}}),bn.createElement(fL,{id:"bins",onChange:J1.debounce(this.onSliderChange,100),min:1,max:50,marks:{1:"1",13:"13",26:"26",38:"38",50:"50"},toolTipVisibleAlways:!0}),bn.createElement("br",null),bn.createElement("label",{htmlFor:"bins",className:"col-form-label"},"Number of bins")),bn.createElement("br",null),bn.createElement("br",null),bn.createElement("br",null))}}Y_(t2,"defaultProps",{windowWidth:1024});class MP extends bn.Component{render(){return bn.createElement("h1",null,"User Profile")}}var a1=f2,SP={};function ah(x,P,e,v,M,r,n,l){if(!x){var c;if(P===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var t=[e,v,M,r,n,l],f=0;c=new Error(P.replace(/%s/g,function(){return t[f++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var d5="mixins";function EP(x,P,e){var v=[],M={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},r={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},n={displayName:function(b,m){b.displayName=m},mixins:function(b,m){if(m)for(var _=0;_<m.length;_++)c(b,m[_])},childContextTypes:function(b,m){b.childContextTypes=a1({},b.childContextTypes,m)},contextTypes:function(b,m){b.contextTypes=a1({},b.contextTypes,m)},getDefaultProps:function(b,m){b.getDefaultProps?b.getDefaultProps=a(b.getDefaultProps,m):b.getDefaultProps=m},propTypes:function(b,m){b.propTypes=a1({},b.propTypes,m)},statics:function(b,m){t(b,m)},autobind:function(){}};function l(b,m){var _=M.hasOwnProperty(m)?M[m]:null;p.hasOwnProperty(m)&&ah(_==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",m),b&&ah(_==="DEFINE_MANY"||_==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",m)}function c(b,m){if(m){ah(typeof m!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),ah(!P(m),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var _=b.prototype,T=_.__reactAutoBindPairs;m.hasOwnProperty(d5)&&n.mixins(b,m.mixins);for(var g in m)if(m.hasOwnProperty(g)&&g!==d5){var A=m[g],k=_.hasOwnProperty(g);if(l(k,g),n.hasOwnProperty(g))n[g](b,A);else{var R=M.hasOwnProperty(g),L=typeof A=="function",z=L&&!R&&!k&&m.autobind!==!1;if(z)T.push(g,A),_[g]=A;else if(k){var E=M[g];ah(R&&(E==="DEFINE_MANY_MERGED"||E==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",E,g),E==="DEFINE_MANY_MERGED"?_[g]=a(_[g],A):E==="DEFINE_MANY"&&(_[g]=o(_[g],A))}else _[g]=A}}}}function t(b,m){if(m)for(var _ in m){var T=m[_];if(m.hasOwnProperty(_)){var g=_ in n;ah(!g,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',_);var A=_ in b;if(A){var k=r.hasOwnProperty(_)?r[_]:null;ah(k==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",_),b[_]=a(b[_],T);return}b[_]=T}}}function f(b,m){ah(b&&m&&typeof b=="object"&&typeof m=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var _ in m)m.hasOwnProperty(_)&&(ah(b[_]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",_),b[_]=m[_]);return b}function a(b,m){return function(){var T=b.apply(this,arguments),g=m.apply(this,arguments);if(T==null)return g;if(g==null)return T;var A={};return f(A,T),f(A,g),A}}function o(b,m){return function(){b.apply(this,arguments),m.apply(this,arguments)}}function u(b,m){var _=m.bind(b);return _}function h(b){for(var m=b.__reactAutoBindPairs,_=0;_<m.length;_+=2){var T=m[_],g=m[_+1];b[T]=u(b,g)}}var i={componentDidMount:function(){this.__isMounted=!0}},s={componentWillUnmount:function(){this.__isMounted=!1}},p={replaceState:function(b,m){this.updater.enqueueReplaceState(this,b,m)},isMounted:function(){return!!this.__isMounted}},d=function(){};a1(d.prototype,x.prototype,p);function y(b){var m=function(T,g,A){this.__reactAutoBindPairs.length&&h(this),this.props=T,this.context=g,this.refs=SP,this.updater=A||e,this.state=null;var k=this.getInitialState?this.getInitialState():null;ah(typeof k=="object"&&!Array.isArray(k),"%s.getInitialState(): must return an object or null",m.displayName||"ReactCompositeComponent"),this.state=k};m.prototype=new d,m.prototype.constructor=m,m.prototype.__reactAutoBindPairs=[],v.forEach(c.bind(null,m)),c(m,i),c(m,b),c(m,s),m.getDefaultProps&&(m.defaultProps=m.getDefaultProps()),ah(m.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var _ in M)m.prototype[_]||(m.prototype[_]=null);return m}return y}var CP=EP,q1=_n,LP=CP;if(typeof q1>"u")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var PP=new q1.Component().updater,RP=LP(q1.Component,q1.isValidElement,PP);const v5=RP({render(){return bn.createElement("h1",null,"User Profile")}}),DP=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];function IP(x={}){const{disableGlobal:P=!1,productionPrefix:e="jss",seed:v=""}=x,M=v===""?"":`${v}-`;let r=0;const n=()=>(r+=1,r);return(l,c)=>{const t=c.options.name;if(t&&t.indexOf("Mui")===0&&!c.options.link&&!P){if(DP.indexOf(l.key)!==-1)return`Mui-${l.key}`;const f=`${M}${t}-${l.key}`;return!c.options.theme[ZE]||v!==""?f:`${f}-${n()}`}return`${M}${e}${n()}`}}function zP(x){const{theme:P,name:e,props:v}=x;if(!P||!P.components||!P.components[e]||!P.components[e].defaultProps)return v;const M=Ta({},v),r=P.components[e].defaultProps;let n;for(n in r)M[n]===void 0&&(M[n]=r[n]);return M}var m5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},yg=(typeof window>"u"?"undefined":m5(window))==="object"&&(typeof document>"u"?"undefined":m5(document))==="object"&&document.nodeType===9;function g5(x,P){for(var e=0;e<P.length;e++){var v=P[e];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(x,o6(v.key),v)}}function C6(x,P,e){return P&&g5(x.prototype,P),e&&g5(x,e),Object.defineProperty(x,"prototype",{writable:!1}),x}var OP={}.constructor;function r2(x){if(x==null||typeof x!="object")return x;if(Array.isArray(x))return x.map(r2);if(x.constructor!==OP)return x;var P={};for(var e in x)P[e]=r2(x[e]);return P}function F_(x,P,e){x===void 0&&(x="unnamed");var v=e.jss,M=r2(P),r=v.plugins.onCreateRule(x,M,e);return r||(x[0],null)}var y5=function(P,e){for(var v="",M=0;M<P.length&&P[M]!=="!important";M++)v&&(v+=e),v+=P[M];return v},Xd=function(P){if(!Array.isArray(P))return P;var e="";if(Array.isArray(P[0]))for(var v=0;v<P.length&&P[v]!=="!important";v++)e&&(e+=", "),e+=y5(P[v]," ");else e=y5(P,", ");return P[P.length-1]==="!important"&&(e+=" !important"),e};function R0(x){return x&&x.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function vm(x,P){for(var e="",v=0;v<P;v++)e+="  ";return e+x}function ag(x,P,e){e===void 0&&(e={});var v="";if(!P)return v;var M=e,r=M.indent,n=r===void 0?0:r,l=P.fallbacks;e.format===!1&&(n=-1/0);var c=R0(e),t=c.linebreak,f=c.space;if(x&&n++,l)if(Array.isArray(l))for(var a=0;a<l.length;a++){var o=l[a];for(var u in o){var h=o[u];h!=null&&(v&&(v+=t),v+=vm(u+":"+f+Xd(h)+";",n))}}else for(var i in l){var s=l[i];s!=null&&(v&&(v+=t),v+=vm(i+":"+f+Xd(s)+";",n))}for(var p in P){var d=P[p];d!=null&&p!=="fallbacks"&&(v&&(v+=t),v+=vm(p+":"+f+Xd(d)+";",n))}return!v&&!e.allowEmpty||!x?v:(n--,v&&(v=""+t+v+t),vm(""+x+f+"{"+v,n)+vm("}",n))}var FP=/([[\].#*$><+~=|^:(),"'`\s])/g,x5=typeof CSS<"u"&&CSS.escape,N_=function(x){return x5?x5(x):x.replace(FP,"\\$1")},L6=function(){function x(e,v,M){this.type="style",this.isProcessed=!1;var r=M.sheet,n=M.Renderer;this.key=e,this.options=M,this.style=v,r?this.renderer=r.renderer:n&&(this.renderer=new n)}var P=x.prototype;return P.prop=function(v,M,r){if(M===void 0)return this.style[v];var n=r?r.force:!1;if(!n&&this.style[v]===M)return this;var l=M;(!r||r.process!==!1)&&(l=this.options.jss.plugins.onChangeValue(M,v,this));var c=l==null||l===!1,t=v in this.style;if(c&&!t&&!n)return this;var f=c&&t;if(f?delete this.style[v]:this.style[v]=l,this.renderable&&this.renderer)return f?this.renderer.removeProperty(this.renderable,v):this.renderer.setProperty(this.renderable,v,l),this;var a=this.options.sheet;return a&&a.attached,this},x}(),n2=function(x){M_(P,x);function P(v,M,r){var n;n=x.call(this,v,M,r)||this;var l=r.selector,c=r.scoped,t=r.sheet,f=r.generateId;return l?n.selectorText=l:c!==!1&&(n.id=f(Wb(Wb(n)),t),n.selectorText="."+N_(n.id)),n}var e=P.prototype;return e.applyTo=function(M){var r=this.renderer;if(r){var n=this.toJSON();for(var l in n)r.setProperty(M,l,n[l])}return this},e.toJSON=function(){var M={};for(var r in this.style){var n=this.style[r];typeof n!="object"?M[r]=n:Array.isArray(n)&&(M[r]=Xd(n))}return M},e.toString=function(M){var r=this.options.sheet,n=r?r.options.link:!1,l=n?Ta({},M,{allowEmpty:!0}):M;return ag(this.selectorText,this.style,l)},C6(P,[{key:"selector",set:function(M){if(M!==this.selectorText){this.selectorText=M;var r=this.renderer,n=this.renderable;if(!(!n||!r)){var l=r.setSelector(n,M);l||r.replaceRule(n,this)}}},get:function(){return this.selectorText}}]),P}(L6),NP={onCreateRule:function(P,e,v){return P[0]==="@"||v.parent&&v.parent.type==="keyframes"?null:new n2(P,e,v)}},Fx={indent:1,children:!0},BP=/@([\w-]+)/,UP=function(){function x(e,v,M){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(BP);this.at=r?r[1]:"unknown",this.query=M.name||"@"+this.at,this.options=M,this.rules=new Gy(Ta({},M,{parent:this}));for(var n in v)this.rules.add(n,v[n]);this.rules.process()}var P=x.prototype;return P.getRule=function(v){return this.rules.get(v)},P.indexOf=function(v){return this.rules.indexOf(v)},P.addRule=function(v,M,r){var n=this.rules.add(v,M,r);return n?(this.options.jss.plugins.onProcessRule(n),n):null},P.replaceRule=function(v,M,r){var n=this.rules.replace(v,M,r);return n&&this.options.jss.plugins.onProcessRule(n),n},P.toString=function(v){v===void 0&&(v=Fx);var M=R0(v),r=M.linebreak;if(v.indent==null&&(v.indent=Fx.indent),v.children==null&&(v.children=Fx.children),v.children===!1)return this.query+" {}";var n=this.rules.toString(v);return n?this.query+" {"+r+n+r+"}":""},x}(),VP=/@container|@media|@supports\s+/,HP={onCreateRule:function(P,e,v){return VP.test(P)?new UP(P,e,v):null}},Nx={indent:1,children:!0},jP=/@keyframes\s+([\w-]+)/,a2=function(){function x(e,v,M){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(jP);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=M;var n=M.scoped,l=M.sheet,c=M.generateId;this.id=n===!1?this.name:N_(c(this,l)),this.rules=new Gy(Ta({},M,{parent:this}));for(var t in v)this.rules.add(t,v[t],Ta({},M,{parent:this}));this.rules.process()}var P=x.prototype;return P.toString=function(v){v===void 0&&(v=Nx);var M=R0(v),r=M.linebreak;if(v.indent==null&&(v.indent=Nx.indent),v.children==null&&(v.children=Nx.children),v.children===!1)return this.at+" "+this.id+" {}";var n=this.rules.toString(v);return n&&(n=""+r+n+r),this.at+" "+this.id+" {"+n+"}"},x}(),GP=/@keyframes\s+/,WP=/\$([\w-]+)/g,i2=function(P,e){return typeof P=="string"?P.replace(WP,function(v,M){return M in e?e[M]:v}):P},b5=function(P,e,v){var M=P[e],r=i2(M,v);r!==M&&(P[e]=r)},YP={onCreateRule:function(P,e,v){return typeof P=="string"&&GP.test(P)?new a2(P,e,v):null},onProcessStyle:function(P,e,v){return e.type!=="style"||!v||("animation-name"in P&&b5(P,"animation-name",v.keyframes),"animation"in P&&b5(P,"animation",v.keyframes)),P},onChangeValue:function(P,e,v){var M=v.options.sheet;if(!M)return P;switch(e){case"animation":return i2(P,M.keyframes);case"animation-name":return i2(P,M.keyframes);default:return P}}},XP=function(x){M_(P,x);function P(){return x.apply(this,arguments)||this}var e=P.prototype;return e.toString=function(M){var r=this.options.sheet,n=r?r.options.link:!1,l=n?Ta({},M,{allowEmpty:!0}):M;return ag(this.key,this.style,l)},P}(L6),ZP={onCreateRule:function(P,e,v){return v.parent&&v.parent.type==="keyframes"?new XP(P,e,v):null}},KP=function(){function x(e,v,M){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=v,this.options=M}var P=x.prototype;return P.toString=function(v){var M=R0(v),r=M.linebreak;if(Array.isArray(this.style)){for(var n="",l=0;l<this.style.length;l++)n+=ag(this.at,this.style[l]),this.style[l+1]&&(n+=r);return n}return ag(this.at,this.style,v)},x}(),$P=/@font-face/,JP={onCreateRule:function(P,e,v){return $P.test(P)?new KP(P,e,v):null}},QP=function(){function x(e,v,M){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=v,this.options=M}var P=x.prototype;return P.toString=function(v){return ag(this.key,this.style,v)},x}(),qP={onCreateRule:function(P,e,v){return P==="@viewport"||P==="@-ms-viewport"?new QP(P,e,v):null}},eR=function(){function x(e,v,M){this.type="simple",this.isProcessed=!1,this.key=e,this.value=v,this.options=M}var P=x.prototype;return P.toString=function(v){if(Array.isArray(this.value)){for(var M="",r=0;r<this.value.length;r++)M+=this.key+" "+this.value[r]+";",this.value[r+1]&&(M+=`
`);return M}return this.key+" "+this.value+";"},x}(),tR={"@charset":!0,"@import":!0,"@namespace":!0},rR={onCreateRule:function(P,e,v){return P in tR?new eR(P,e,v):null}},_5=[NP,HP,YP,ZP,JP,qP,rR],nR={process:!0},w5={force:!0,process:!0},Gy=function(){function x(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var P=x.prototype;return P.add=function(v,M,r){var n=this.options,l=n.parent,c=n.sheet,t=n.jss,f=n.Renderer,a=n.generateId,o=n.scoped,u=Ta({classes:this.classes,parent:l,sheet:c,jss:t,Renderer:f,generateId:a,scoped:o,name:v,keyframes:this.keyframes,selector:void 0},r),h=v;v in this.raw&&(h=v+"-d"+this.counter++),this.raw[h]=M,h in this.classes&&(u.selector="."+N_(this.classes[h]));var i=F_(h,M,u);if(!i)return null;this.register(i);var s=u.index===void 0?this.index.length:u.index;return this.index.splice(s,0,i),i},P.replace=function(v,M,r){var n=this.get(v),l=this.index.indexOf(n);n&&this.remove(n);var c=r;return l!==-1&&(c=Ta({},r,{index:l})),this.add(v,M,c)},P.get=function(v){return this.map[v]},P.remove=function(v){this.unregister(v),delete this.raw[v.key],this.index.splice(this.index.indexOf(v),1)},P.indexOf=function(v){return this.index.indexOf(v)},P.process=function(){var v=this.options.jss.plugins;this.index.slice(0).forEach(v.onProcessRule,v)},P.register=function(v){this.map[v.key]=v,v instanceof n2?(this.map[v.selector]=v,v.id&&(this.classes[v.key]=v.id)):v instanceof a2&&this.keyframes&&(this.keyframes[v.name]=v.id)},P.unregister=function(v){delete this.map[v.key],v instanceof n2?(delete this.map[v.selector],delete this.classes[v.key]):v instanceof a2&&delete this.keyframes[v.name]},P.update=function(){var v,M,r;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(v=arguments.length<=0?void 0:arguments[0],M=arguments.length<=1?void 0:arguments[1],r=arguments.length<=2?void 0:arguments[2]):(M=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],v=null),v)this.updateOne(this.get(v),M,r);else for(var n=0;n<this.index.length;n++)this.updateOne(this.index[n],M,r)},P.updateOne=function(v,M,r){r===void 0&&(r=nR);var n=this.options,l=n.jss.plugins,c=n.sheet;if(v.rules instanceof x){v.rules.update(M,r);return}var t=v.style;if(l.onUpdate(M,v,c,r),r.process&&t&&t!==v.style){l.onProcessStyle(v.style,v,c);for(var f in v.style){var a=v.style[f],o=t[f];a!==o&&v.prop(f,a,w5)}for(var u in t){var h=v.style[u],i=t[u];h==null&&h!==i&&v.prop(u,null,w5)}}},P.toString=function(v){for(var M="",r=this.options.sheet,n=r?r.options.link:!1,l=R0(v),c=l.linebreak,t=0;t<this.index.length;t++){var f=this.index[t],a=f.toString(v);!a&&!n||(M&&(M+=c),M+=a)}return M},x}(),P6=function(){function x(e,v){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Ta({},v,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),v.Renderer&&(this.renderer=new v.Renderer(this)),this.rules=new Gy(this.options);for(var M in e)this.rules.add(M,e[M]);this.rules.process()}var P=x.prototype;return P.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},P.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},P.addRule=function(v,M,r){var n=this.queue;this.attached&&!n&&(this.queue=[]);var l=this.rules.add(v,M,r);return l?(this.options.jss.plugins.onProcessRule(l),this.attached?(this.deployed&&(n?n.push(l):(this.insertRule(l),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),l):(this.deployed=!1,l)):null},P.replaceRule=function(v,M,r){var n=this.rules.get(v);if(!n)return this.addRule(v,M,r);var l=this.rules.replace(v,M,r);return l&&this.options.jss.plugins.onProcessRule(l),this.attached?(this.deployed&&this.renderer&&(l?n.renderable&&this.renderer.replaceRule(n.renderable,l):this.renderer.deleteRule(n)),l):(this.deployed=!1,l)},P.insertRule=function(v){this.renderer&&this.renderer.insertRule(v)},P.addRules=function(v,M){var r=[];for(var n in v){var l=this.addRule(n,v[n],M);l&&r.push(l)}return r},P.getRule=function(v){return this.rules.get(v)},P.deleteRule=function(v){var M=typeof v=="object"?v:this.rules.get(v);return!M||this.attached&&!M.renderable?!1:(this.rules.remove(M),this.attached&&M.renderable&&this.renderer?this.renderer.deleteRule(M.renderable):!0)},P.indexOf=function(v){return this.rules.indexOf(v)},P.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},P.update=function(){var v;return(v=this.rules).update.apply(v,arguments),this},P.updateOne=function(v,M,r){return this.rules.updateOne(v,M,r),this},P.toString=function(v){return this.rules.toString(v)},x}(),aR=function(){function x(){this.plugins={internal:[],external:[]},this.registry={}}var P=x.prototype;return P.onCreateRule=function(v,M,r){for(var n=0;n<this.registry.onCreateRule.length;n++){var l=this.registry.onCreateRule[n](v,M,r);if(l)return l}return null},P.onProcessRule=function(v){if(!v.isProcessed){for(var M=v.options.sheet,r=0;r<this.registry.onProcessRule.length;r++)this.registry.onProcessRule[r](v,M);v.style&&this.onProcessStyle(v.style,v,M),v.isProcessed=!0}},P.onProcessStyle=function(v,M,r){for(var n=0;n<this.registry.onProcessStyle.length;n++)M.style=this.registry.onProcessStyle[n](M.style,M,r)},P.onProcessSheet=function(v){for(var M=0;M<this.registry.onProcessSheet.length;M++)this.registry.onProcessSheet[M](v)},P.onUpdate=function(v,M,r,n){for(var l=0;l<this.registry.onUpdate.length;l++)this.registry.onUpdate[l](v,M,r,n)},P.onChangeValue=function(v,M,r){for(var n=v,l=0;l<this.registry.onChangeValue.length;l++)n=this.registry.onChangeValue[l](n,M,r);return n},P.use=function(v,M){M===void 0&&(M={queue:"external"});var r=this.plugins[M.queue];r.indexOf(v)===-1&&(r.push(v),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(n,l){for(var c in l)c in n&&n[c].push(l[c]);return n},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},x}(),iR=function(){function x(){this.registry=[]}var P=x.prototype;return P.add=function(v){var M=this.registry,r=v.options.index;if(M.indexOf(v)===-1){if(M.length===0||r>=this.index){M.push(v);return}for(var n=0;n<M.length;n++)if(M[n].options.index>r){M.splice(n,0,v);return}}},P.reset=function(){this.registry=[]},P.remove=function(v){var M=this.registry.indexOf(v);this.registry.splice(M,1)},P.toString=function(v){for(var M=v===void 0?{}:v,r=M.attached,n=fs(M,["attached"]),l=R0(n),c=l.linebreak,t="",f=0;f<this.registry.length;f++){var a=this.registry[f];r!=null&&a.attached!==r||(t&&(t+=c),t+=a.toString(n))}return t},C6(x,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),x}(),Om=new iR,o2=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),s2="2f1acc6c3a606b082e5eef5e54414ffb";o2[s2]==null&&(o2[s2]=0);var T5=o2[s2]++,A5=function(P){P===void 0&&(P={});var e=0,v=function(r,n){e+=1;var l="",c="";return n&&(n.options.classNamePrefix&&(c=n.options.classNamePrefix),n.options.jss.id!=null&&(l=String(n.options.jss.id))),P.minify?""+(c||"c")+T5+l+e:c+r.key+"-"+T5+(l?"-"+l:"")+"-"+e};return v},R6=function(P){var e;return function(){return e||(e=P()),e}},oR=function(P,e){try{return P.attributeStyleMap?P.attributeStyleMap.get(e):P.style.getPropertyValue(e)}catch{return""}},sR=function(P,e,v){try{var M=v;if(Array.isArray(v)&&(M=Xd(v)),P.attributeStyleMap)P.attributeStyleMap.set(e,M);else{var r=M?M.indexOf("!important"):-1,n=r>-1?M.substr(0,r-1):M;P.style.setProperty(e,n,r>-1?"important":"")}}catch{return!1}return!0},lR=function(P,e){try{P.attributeStyleMap?P.attributeStyleMap.delete(e):P.style.removeProperty(e)}catch{}},uR=function(P,e){return P.selectorText=e,P.selectorText===e},D6=R6(function(){return document.querySelector("head")});function cR(x,P){for(var e=0;e<x.length;e++){var v=x[e];if(v.attached&&v.options.index>P.index&&v.options.insertionPoint===P.insertionPoint)return v}return null}function fR(x,P){for(var e=x.length-1;e>=0;e--){var v=x[e];if(v.attached&&v.options.insertionPoint===P.insertionPoint)return v}return null}function hR(x){for(var P=D6(),e=0;e<P.childNodes.length;e++){var v=P.childNodes[e];if(v.nodeType===8&&v.nodeValue.trim()===x)return v}return null}function pR(x){var P=Om.registry;if(P.length>0){var e=cR(P,x);if(e&&e.renderer)return{parent:e.renderer.element.parentNode,node:e.renderer.element};if(e=fR(P,x),e&&e.renderer)return{parent:e.renderer.element.parentNode,node:e.renderer.element.nextSibling}}var v=x.insertionPoint;if(v&&typeof v=="string"){var M=hR(v);if(M)return{parent:M.parentNode,node:M.nextSibling}}return!1}function dR(x,P){var e=P.insertionPoint,v=pR(P);if(v!==!1&&v.parent){v.parent.insertBefore(x,v.node);return}if(e&&typeof e.nodeType=="number"){var M=e,r=M.parentNode;r&&r.insertBefore(x,M.nextSibling);return}D6().appendChild(x)}var vR=R6(function(){var x=document.querySelector('meta[property="csp-nonce"]');return x?x.getAttribute("content"):null}),k5=function(P,e,v){try{"insertRule"in P?P.insertRule(e,v):"appendRule"in P&&P.appendRule(e)}catch{return!1}return P.cssRules[v]},M5=function(P,e){var v=P.cssRules.length;return e===void 0||e>v?v:e},mR=function(){var P=document.createElement("style");return P.textContent=`
`,P},gR=function(){function x(e){this.getPropertyValue=oR,this.setProperty=sR,this.removeProperty=lR,this.setSelector=uR,this.hasInsertedRules=!1,this.cssRules=[],e&&Om.add(e),this.sheet=e;var v=this.sheet?this.sheet.options:{},M=v.media,r=v.meta,n=v.element;this.element=n||mR(),this.element.setAttribute("data-jss",""),M&&this.element.setAttribute("media",M),r&&this.element.setAttribute("data-meta",r);var l=vR();l&&this.element.setAttribute("nonce",l)}var P=x.prototype;return P.attach=function(){if(!(this.element.parentNode||!this.sheet)){dR(this.element,this.sheet.options);var v=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&v&&(this.hasInsertedRules=!1,this.deploy())}},P.detach=function(){if(this.sheet){var v=this.element.parentNode;v&&v.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},P.deploy=function(){var v=this.sheet;if(v){if(v.options.link){this.insertRules(v.rules);return}this.element.textContent=`
`+v.toString()+`
`}},P.insertRules=function(v,M){for(var r=0;r<v.index.length;r++)this.insertRule(v.index[r],r,M)},P.insertRule=function(v,M,r){if(r===void 0&&(r=this.element.sheet),v.rules){var n=v,l=r;if(v.type==="conditional"||v.type==="keyframes"){var c=M5(r,M);if(l=k5(r,n.toString({children:!1}),c),l===!1)return!1;this.refCssRule(v,c,l)}return this.insertRules(n.rules,l),l}var t=v.toString();if(!t)return!1;var f=M5(r,M),a=k5(r,t,f);return a===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(v,f,a),a)},P.refCssRule=function(v,M,r){v.renderable=r,v.options.parent instanceof P6&&this.cssRules.splice(M,0,r)},P.deleteRule=function(v){var M=this.element.sheet,r=this.indexOf(v);return r===-1?!1:(M.deleteRule(r),this.cssRules.splice(r,1),!0)},P.indexOf=function(v){return this.cssRules.indexOf(v)},P.replaceRule=function(v,M){var r=this.indexOf(v);return r===-1?!1:(this.element.sheet.deleteRule(r),this.cssRules.splice(r,1),this.insertRule(M,r))},P.getRules=function(){return this.element.sheet.cssRules},x}(),yR=0,xR=function(){function x(e){this.id=yR++,this.version="10.10.0",this.plugins=new aR,this.options={id:{minify:!1},createGenerateId:A5,Renderer:yg?gR:null,plugins:[]},this.generateId=A5({minify:!1});for(var v=0;v<_5.length;v++)this.plugins.use(_5[v],{queue:"internal"});this.setup(e)}var P=x.prototype;return P.setup=function(v){return v===void 0&&(v={}),v.createGenerateId&&(this.options.createGenerateId=v.createGenerateId),v.id&&(this.options.id=Ta({},this.options.id,v.id)),(v.createGenerateId||v.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),v.insertionPoint!=null&&(this.options.insertionPoint=v.insertionPoint),"Renderer"in v&&(this.options.Renderer=v.Renderer),v.plugins&&this.use.apply(this,v.plugins),this},P.createStyleSheet=function(v,M){M===void 0&&(M={});var r=M,n=r.index;typeof n!="number"&&(n=Om.index===0?0:Om.index+1);var l=new P6(v,Ta({},M,{jss:this,generateId:M.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(l),l},P.removeStyleSheet=function(v){return v.detach(),Om.remove(v),this},P.createRule=function(v,M,r){if(M===void 0&&(M={}),r===void 0&&(r={}),typeof v=="object")return this.createRule(void 0,v,M);var n=Ta({},r,{name:v,jss:this,Renderer:this.options.Renderer});n.generateId||(n.generateId=this.generateId),n.classes||(n.classes={}),n.keyframes||(n.keyframes={});var l=F_(v,M,n);return l&&this.plugins.onProcessRule(l),l},P.use=function(){for(var v=this,M=arguments.length,r=new Array(M),n=0;n<M;n++)r[n]=arguments[n];return r.forEach(function(l){v.plugins.use(l)}),this},x}(),I6=function(P){return new xR(P)},B_=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function z6(x){var P=null;for(var e in x){var v=x[e],M=typeof v;if(M==="function")P||(P={}),P[e]=v;else if(M==="object"&&v!==null&&!Array.isArray(v)){var r=z6(v);r&&(P||(P={}),P[e]=r)}}return P}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */I6();var O6=Date.now(),Bx="fnValues"+O6,Ux="fnStyle"+ ++O6,bR=function(){return{onCreateRule:function(e,v,M){if(typeof v!="function")return null;var r=F_(e,{},M);return r[Ux]=v,r},onProcessStyle:function(e,v){if(Bx in v||Ux in v)return e;var M={};for(var r in e){var n=e[r];typeof n=="function"&&(delete e[r],M[r]=n)}return v[Bx]=M,e},onUpdate:function(e,v,M,r){var n=v,l=n[Ux];l&&(n.style=l(e)||{});var c=n[Bx];if(c)for(var t in c)n.prop(t,c[t](e),r)}}};const _R=bR;var ed="@global",l2="@global ",wR=function(){function x(e,v,M){this.type="global",this.at=ed,this.isProcessed=!1,this.key=e,this.options=M,this.rules=new Gy(Ta({},M,{parent:this}));for(var r in v)this.rules.add(r,v[r]);this.rules.process()}var P=x.prototype;return P.getRule=function(v){return this.rules.get(v)},P.addRule=function(v,M,r){var n=this.rules.add(v,M,r);return n&&this.options.jss.plugins.onProcessRule(n),n},P.replaceRule=function(v,M,r){var n=this.rules.replace(v,M,r);return n&&this.options.jss.plugins.onProcessRule(n),n},P.indexOf=function(v){return this.rules.indexOf(v)},P.toString=function(v){return this.rules.toString(v)},x}(),TR=function(){function x(e,v,M){this.type="global",this.at=ed,this.isProcessed=!1,this.key=e,this.options=M;var r=e.substr(l2.length);this.rule=M.jss.createRule(r,v,Ta({},M,{parent:this}))}var P=x.prototype;return P.toString=function(v){return this.rule?this.rule.toString(v):""},x}(),AR=/\s*,\s*/g;function F6(x,P){for(var e=x.split(AR),v="",M=0;M<e.length;M++)v+=P+" "+e[M].trim(),e[M+1]&&(v+=", ");return v}function kR(x,P){var e=x.options,v=x.style,M=v?v[ed]:null;if(M){for(var r in M)P.addRule(r,M[r],Ta({},e,{selector:F6(r,x.selector)}));delete v[ed]}}function MR(x,P){var e=x.options,v=x.style;for(var M in v)if(!(M[0]!=="@"||M.substr(0,ed.length)!==ed)){var r=F6(M.substr(ed.length),x.selector);P.addRule(r,v[M],Ta({},e,{selector:r})),delete v[M]}}function SR(){function x(e,v,M){if(!e)return null;if(e===ed)return new wR(e,v,M);if(e[0]==="@"&&e.substr(0,l2.length)===l2)return new TR(e,v,M);var r=M.parent;return r&&(r.type==="global"||r.options.parent&&r.options.parent.type==="global")&&(M.scoped=!1),!M.selector&&M.scoped===!1&&(M.selector=e),null}function P(e,v){e.type!=="style"||!v||(kR(e,v),MR(e,v))}return{onCreateRule:x,onProcessRule:P}}var S5=/\s*,\s*/g,ER=/&/g,CR=/\$([\w-]+)/g;function LR(){function x(M,r){return function(n,l){var c=M.getRule(l)||r&&r.getRule(l);return c?c.selector:l}}function P(M,r){for(var n=r.split(S5),l=M.split(S5),c="",t=0;t<n.length;t++)for(var f=n[t],a=0;a<l.length;a++){var o=l[a];c&&(c+=", "),c+=o.indexOf("&")!==-1?o.replace(ER,f):f+" "+o}return c}function e(M,r,n){if(n)return Ta({},n,{index:n.index+1});var l=M.options.nestingLevel;l=l===void 0?1:l+1;var c=Ta({},M.options,{nestingLevel:l,index:r.indexOf(M)+1});return delete c.name,c}function v(M,r,n){if(r.type!=="style")return M;var l=r,c=l.options.parent,t,f;for(var a in M){var o=a.indexOf("&")!==-1,u=a[0]==="@";if(!(!o&&!u)){if(t=e(l,c,t),o){var h=P(a,l.selector);f||(f=x(c,n)),h=h.replace(CR,f);var i=l.key+"-"+a;"replaceRule"in c?c.replaceRule(i,M[a],Ta({},t,{selector:h})):c.addRule(i,M[a],Ta({},t,{selector:h}))}else u&&c.addRule(a,{},t).addRule(l.key,M[a],{selector:l.selector});delete M[a]}}return M}return{onProcessStyle:v}}var PR=/[A-Z]/g,RR=/^ms-/,Vx={};function DR(x){return"-"+x.toLowerCase()}function N6(x){if(Vx.hasOwnProperty(x))return Vx[x];var P=x.replace(PR,DR);return Vx[x]=RR.test(P)?"-"+P:P}function ey(x){var P={};for(var e in x){var v=e.indexOf("--")===0?e:N6(e);P[v]=x[e]}return x.fallbacks&&(Array.isArray(x.fallbacks)?P.fallbacks=x.fallbacks.map(ey):P.fallbacks=ey(x.fallbacks)),P}function IR(){function x(e){if(Array.isArray(e)){for(var v=0;v<e.length;v++)e[v]=ey(e[v]);return e}return ey(e)}function P(e,v,M){if(v.indexOf("--")===0)return e;var r=N6(v);return v===r?e:(M.prop(r,e),null)}return{onProcessStyle:x,onChangeValue:P}}var sa=B_&&CSS?CSS.px:"px",i1=B_&&CSS?CSS.ms:"ms",Wv=B_&&CSS?CSS.percent:"%",zR={"animation-delay":i1,"animation-duration":i1,"background-position":sa,"background-position-x":sa,"background-position-y":sa,"background-size":sa,border:sa,"border-bottom":sa,"border-bottom-left-radius":sa,"border-bottom-right-radius":sa,"border-bottom-width":sa,"border-left":sa,"border-left-width":sa,"border-radius":sa,"border-right":sa,"border-right-width":sa,"border-top":sa,"border-top-left-radius":sa,"border-top-right-radius":sa,"border-top-width":sa,"border-width":sa,"border-block":sa,"border-block-end":sa,"border-block-end-width":sa,"border-block-start":sa,"border-block-start-width":sa,"border-block-width":sa,"border-inline":sa,"border-inline-end":sa,"border-inline-end-width":sa,"border-inline-start":sa,"border-inline-start-width":sa,"border-inline-width":sa,"border-start-start-radius":sa,"border-start-end-radius":sa,"border-end-start-radius":sa,"border-end-end-radius":sa,margin:sa,"margin-bottom":sa,"margin-left":sa,"margin-right":sa,"margin-top":sa,"margin-block":sa,"margin-block-end":sa,"margin-block-start":sa,"margin-inline":sa,"margin-inline-end":sa,"margin-inline-start":sa,padding:sa,"padding-bottom":sa,"padding-left":sa,"padding-right":sa,"padding-top":sa,"padding-block":sa,"padding-block-end":sa,"padding-block-start":sa,"padding-inline":sa,"padding-inline-end":sa,"padding-inline-start":sa,"mask-position-x":sa,"mask-position-y":sa,"mask-size":sa,height:sa,width:sa,"min-height":sa,"max-height":sa,"min-width":sa,"max-width":sa,bottom:sa,left:sa,top:sa,right:sa,inset:sa,"inset-block":sa,"inset-block-end":sa,"inset-block-start":sa,"inset-inline":sa,"inset-inline-end":sa,"inset-inline-start":sa,"box-shadow":sa,"text-shadow":sa,"column-gap":sa,"column-rule":sa,"column-rule-width":sa,"column-width":sa,"font-size":sa,"font-size-delta":sa,"letter-spacing":sa,"text-decoration-thickness":sa,"text-indent":sa,"text-stroke":sa,"text-stroke-width":sa,"word-spacing":sa,motion:sa,"motion-offset":sa,outline:sa,"outline-offset":sa,"outline-width":sa,perspective:sa,"perspective-origin-x":Wv,"perspective-origin-y":Wv,"transform-origin":Wv,"transform-origin-x":Wv,"transform-origin-y":Wv,"transform-origin-z":Wv,"transition-delay":i1,"transition-duration":i1,"vertical-align":sa,"flex-basis":sa,"shape-margin":sa,size:sa,gap:sa,grid:sa,"grid-gap":sa,"row-gap":sa,"grid-row-gap":sa,"grid-column-gap":sa,"grid-template-rows":sa,"grid-template-columns":sa,"grid-auto-rows":sa,"grid-auto-columns":sa,"box-shadow-x":sa,"box-shadow-y":sa,"box-shadow-blur":sa,"box-shadow-spread":sa,"font-line-height":sa,"text-shadow-x":sa,"text-shadow-y":sa,"text-shadow-blur":sa};function B6(x){var P=/(-[a-z])/g,e=function(n){return n[1].toUpperCase()},v={};for(var M in x)v[M]=x[M],v[M.replace(P,e)]=x[M];return v}var OR=B6(zR);function Fm(x,P,e){if(P==null)return P;if(Array.isArray(P))for(var v=0;v<P.length;v++)P[v]=Fm(x,P[v],e);else if(typeof P=="object")if(x==="fallbacks")for(var M in P)P[M]=Fm(M,P[M],e);else for(var r in P)P[r]=Fm(x+"-"+r,P[r],e);else if(typeof P=="number"&&isNaN(P)===!1){var n=e[x]||OR[x];return n&&!(P===0&&n===sa)?typeof n=="function"?n(P).toString():""+P+n:P.toString()}return P}function FR(x){x===void 0&&(x={});var P=B6(x);function e(M,r){if(r.type!=="style")return M;for(var n in M)M[n]=Fm(n,M[n],P);return M}function v(M,r){return Fm(r,M,P)}return{onProcessStyle:e,onChangeValue:v}}var _m="",u2="",U6="",V6="",NR=yg&&"ontouchstart"in document.documentElement;if(yg){var Hx={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},BR=document.createElement("p"),jx=BR.style,UR="Transform";for(var Gx in Hx)if(Gx+UR in jx){_m=Gx,u2=Hx[Gx];break}_m==="Webkit"&&"msHyphens"in jx&&(_m="ms",u2=Hx.ms,V6="edge"),_m==="Webkit"&&"-apple-trailing-word"in jx&&(U6="apple")}var co={js:_m,css:u2,vendor:U6,browser:V6,isTouch:NR};function VR(x){return x[1]==="-"||co.js==="ms"?x:"@"+co.css+"keyframes"+x.substr(10)}var HR={noPrefill:["appearance"],supportedProperty:function(P){return P!=="appearance"?!1:co.js==="ms"?"-webkit-"+P:co.css+P}},jR={noPrefill:["color-adjust"],supportedProperty:function(P){return P!=="color-adjust"?!1:co.js==="Webkit"?co.css+"print-"+P:P}},GR=/[-\s]+(.)?/g;function WR(x,P){return P?P.toUpperCase():""}function U_(x){return x.replace(GR,WR)}function ld(x){return U_("-"+x)}var YR={noPrefill:["mask"],supportedProperty:function(P,e){if(!/^mask/.test(P))return!1;if(co.js==="Webkit"){var v="mask-image";if(U_(v)in e)return P;if(co.js+ld(v)in e)return co.css+P}return P}},XR={noPrefill:["text-orientation"],supportedProperty:function(P){return P!=="text-orientation"?!1:co.vendor==="apple"&&!co.isTouch?co.css+P:P}},ZR={noPrefill:["transform"],supportedProperty:function(P,e,v){return P!=="transform"?!1:v.transform?P:co.css+P}},KR={noPrefill:["transition"],supportedProperty:function(P,e,v){return P!=="transition"?!1:v.transition?P:co.css+P}},$R={noPrefill:["writing-mode"],supportedProperty:function(P){return P!=="writing-mode"?!1:co.js==="Webkit"||co.js==="ms"&&co.browser!=="edge"?co.css+P:P}},JR={noPrefill:["user-select"],supportedProperty:function(P){return P!=="user-select"?!1:co.js==="Moz"||co.js==="ms"||co.vendor==="apple"?co.css+P:P}},QR={supportedProperty:function(P,e){if(!/^break-/.test(P))return!1;if(co.js==="Webkit"){var v="WebkitColumn"+ld(P);return v in e?co.css+"column-"+P:!1}if(co.js==="Moz"){var M="page"+ld(P);return M in e?"page-"+P:!1}return!1}},qR={supportedProperty:function(P,e){if(!/^(border|margin|padding)-inline/.test(P))return!1;if(co.js==="Moz")return P;var v=P.replace("-inline","");return co.js+ld(v)in e?co.css+v:!1}},eD={supportedProperty:function(P,e){return U_(P)in e?P:!1}},tD={supportedProperty:function(P,e){var v=ld(P);return P[0]==="-"||P[0]==="-"&&P[1]==="-"?P:co.js+v in e?co.css+P:co.js!=="Webkit"&&"Webkit"+v in e?"-webkit-"+P:!1}},rD={supportedProperty:function(P){return P.substring(0,11)!=="scroll-snap"?!1:co.js==="ms"?""+co.css+P:P}},nD={supportedProperty:function(P){return P!=="overscroll-behavior"?!1:co.js==="ms"?co.css+"scroll-chaining":P}},aD={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},iD={supportedProperty:function(P,e){var v=aD[P];return v&&co.js+ld(v)in e?co.css+v:!1}},H6={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},oD=Object.keys(H6),sD=function(P){return co.css+P},lD={supportedProperty:function(P,e,v){var M=v.multiple;if(oD.indexOf(P)>-1){var r=H6[P];if(!Array.isArray(r))return co.js+ld(r)in e?co.css+r:!1;if(!M)return!1;for(var n=0;n<r.length;n++)if(!(co.js+ld(r[0])in e))return!1;return r.map(sD)}return!1}},j6=[HR,jR,YR,XR,ZR,KR,$R,JR,QR,qR,eD,tD,rD,nD,iD,lD],E5=j6.filter(function(x){return x.supportedProperty}).map(function(x){return x.supportedProperty}),uD=j6.filter(function(x){return x.noPrefill}).reduce(function(x,P){return x.push.apply(x,cp(P.noPrefill)),x},[]),wm,Bd={};if(yg){wm=document.createElement("p");var Wx=window.getComputedStyle(document.documentElement,"");for(var Yx in Wx)isNaN(Yx)||(Bd[Wx[Yx]]=Wx[Yx]);uD.forEach(function(x){return delete Bd[x]})}function c2(x,P){if(P===void 0&&(P={}),!wm)return x;if(Bd[x]!=null)return Bd[x];(x==="transition"||x==="transform")&&(P[x]=x in wm.style);for(var e=0;e<E5.length&&(Bd[x]=E5[e](x,wm.style,P),!Bd[x]);e++);try{wm.style[x]=""}catch{return!1}return Bd[x]}var Yv={},cD={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},fD=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Up;function hD(x,P,e){if(P==="var")return"var";if(P==="all")return"all";if(e==="all")return", all";var v=P?c2(P):", "+c2(e);return v||P||e}yg&&(Up=document.createElement("p"));function C5(x,P){var e=P;if(!Up||x==="content")return P;if(typeof e!="string"||!isNaN(parseInt(e,10)))return e;var v=x+e;if(Yv[v]!=null)return Yv[v];try{Up.style[x]=e}catch{return Yv[v]=!1,!1}if(cD[x])e=e.replace(fD,hD);else if(Up.style[x]===""&&(e=co.css+e,e==="-ms-flex"&&(Up.style[x]="-ms-flexbox"),Up.style[x]=e,Up.style[x]===""))return Yv[v]=!1,!1;return Up.style[x]="",Yv[v]=e,Yv[v]}function pD(){function x(M){if(M.type==="keyframes"){var r=M;r.at=VR(r.at)}}function P(M){for(var r in M){var n=M[r];if(r==="fallbacks"&&Array.isArray(n)){M[r]=n.map(P);continue}var l=!1,c=c2(r);c&&c!==r&&(l=!0);var t=!1,f=C5(c,Xd(n));f&&f!==n&&(t=!0),(l||t)&&(l&&delete M[r],M[c||r]=f||n)}return M}function e(M,r){return r.type!=="style"?M:P(M)}function v(M,r){return C5(r,Xd(M))||M}return{onProcessRule:x,onProcessStyle:e,onChangeValue:v}}function dD(){var x=function(e,v){return e.length===v.length?e>v?1:-1:e.length-v.length};return{onProcessStyle:function(e,v){if(v.type!=="style")return e;for(var M={},r=Object.keys(e).sort(x),n=0;n<r.length;n++)M[r[n]]=e[r[n]];return M}}}function vD(){return{plugins:[_R(),SR(),LR(),IR(),FR(),typeof window>"u"?null:pD(),dD()]}}function G6(x={}){const{baseClasses:P,newClasses:e,Component:v}=x;if(!e)return P;const M=Ta({},P);return Object.keys(e).forEach(r=>{e[r]&&(M[r]=`${P[r]} ${e[r]}`)}),M}const mD={set:(x,P,e,v)=>{let M=x.get(P);M||(M=new Map,x.set(P,M)),M.set(e,v)},get:(x,P,e)=>{const v=x.get(P);return v?v.get(e):void 0},delete:(x,P,e)=>{x.get(P).delete(e)}},r0=mD,gD=I6(vD()),yD=IP(),xD=new Map,bD={disableGeneration:!1,generateClassName:yD,jss:gD,sheetsCache:null,sheetsManager:xD,sheetsRegistry:null},_D=_n.createContext(bD);let L5=-1e9;function wD(){return L5+=1,L5}const TD=["variant"];function P5(x){return x.length===0}function AD(x){const{variant:P}=x,e=fs(x,TD);let v=P||"";return Object.keys(e).sort().forEach(M=>{M==="color"?v+=P5(v)?x[M]:Ki(x[M]):v+=`${P5(v)?M:Ki(M)}${Ki(x[M].toString())}`}),v}const kD={},MD=kD;function SD(x){const P=typeof x=="function";return{create:(e,v)=>{let M;try{M=P?x(e):x}catch(c){throw c}if(!v||!e.components||!e.components[v]||!e.components[v].styleOverrides&&!e.components[v].variants)return M;const r=e.components[v].styleOverrides||{},n=e.components[v].variants||[],l=Ta({},M);return Object.keys(r).forEach(c=>{l[c]=sh(l[c]||{},r[c])}),n.forEach(c=>{const t=AD(c.props);l[t]=sh(l[t]||{},c.style)}),l},options:{}}}const ED=["name","classNamePrefix","Component","defaultTheme"];function CD({state:x,stylesOptions:P},e,v){if(P.disableGeneration)return e||{};x.cacheClasses||(x.cacheClasses={value:null,lastProp:null,lastJSS:{}});let M=!1;return x.classes!==x.cacheClasses.lastJSS&&(x.cacheClasses.lastJSS=x.classes,M=!0),e!==x.cacheClasses.lastProp&&(x.cacheClasses.lastProp=e,M=!0),M&&(x.cacheClasses.value=G6({baseClasses:x.cacheClasses.lastJSS,newClasses:e,Component:v})),x.cacheClasses.value}function LD({state:x,theme:P,stylesOptions:e,stylesCreator:v,name:M},r){if(e.disableGeneration)return;let n=r0.get(e.sheetsManager,v,P);n||(n={refs:0,staticSheet:null,dynamicStyles:null},r0.set(e.sheetsManager,v,P,n));const l=Ta({},v.options,e,{theme:P,flip:typeof e.flip=="boolean"?e.flip:P.direction==="rtl"});l.generateId=l.serverGenerateClassName||l.generateClassName;const c=e.sheetsRegistry;if(n.refs===0){let t;e.sheetsCache&&(t=r0.get(e.sheetsCache,v,P));const f=v.create(P,M);t||(t=e.jss.createStyleSheet(f,Ta({link:!1},l)),t.attach(),e.sheetsCache&&r0.set(e.sheetsCache,v,P,t)),c&&c.add(t),n.staticSheet=t,n.dynamicStyles=z6(f)}if(n.dynamicStyles){const t=e.jss.createStyleSheet(n.dynamicStyles,Ta({link:!0},l));t.update(r),t.attach(),x.dynamicSheet=t,x.classes=G6({baseClasses:n.staticSheet.classes,newClasses:t.classes}),c&&c.add(t)}else x.classes=n.staticSheet.classes;n.refs+=1}function PD({state:x},P){x.dynamicSheet&&x.dynamicSheet.update(P)}function RD({state:x,theme:P,stylesOptions:e,stylesCreator:v}){if(e.disableGeneration)return;const M=r0.get(e.sheetsManager,v,P);M.refs-=1;const r=e.sheetsRegistry;M.refs===0&&(r0.delete(e.sheetsManager,v,P),e.jss.removeStyleSheet(M.staticSheet),r&&r.remove(M.staticSheet)),x.dynamicSheet&&(e.jss.removeStyleSheet(x.dynamicSheet),r&&r.remove(x.dynamicSheet))}function DD(x,P){const e=_n.useRef([]);let v;const M=_n.useMemo(()=>({}),P);e.current!==M&&(e.current=M,v=x()),_n.useEffect(()=>()=>{v&&v()},[M])}function ID(x,P={}){const{name:e,classNamePrefix:v,Component:M,defaultTheme:r=MD}=P,n=fs(P,ED),l=SD(x),c=e||v||"makeStyles";return l.options={index:wD(),name:e,meta:c,classNamePrefix:c},(f={})=>{const a=T_()||r,o=Ta({},_n.useContext(_D),n),u=_n.useRef(),h=_n.useRef();return DD(()=>{const s={name:e,state:{},stylesCreator:l,stylesOptions:o,theme:a};return LD(s,f),h.current=!1,u.current=s,()=>{RD(s)}},[a,l]),_n.useEffect(()=>{h.current&&PD(u.current,f),h.current=!0}),CD(u.current,f.classes,M)}}const zD=["defaultTheme","withTheme","name"],OD=["classes"],FD=(x,P={})=>e=>{const{defaultTheme:v,withTheme:M=!1,name:r}=P,n=fs(P,zD);let l=r;const c=ID(x,Ta({defaultTheme:v,Component:e,name:r||e.displayName,classNamePrefix:l},n)),t=_n.forwardRef(function(a,o){const u=fs(a,OD),h=c(Ta({},e.defaultProps,a));let i,s=u;return(typeof r=="string"||M)&&(i=T_()||v,r&&(s=zP({theme:i,name:r,props:u})),M&&!s.theme&&(s.theme=i)),xs.jsx(e,Ta({ref:o,classes:h},s))});return xS(t,e),t},V_=FD,ND=x=>({root:{textAlign:"center"},paper:{padding:x.spacing(2),textAlign:"center",color:x.palette.text.secondary}}),BD=x=>bn.createElement(lo,{container:!0,spacing:4,...x}),o1=x=>bn.createElement(lo,{item:!0,xs:12,sm:9,md:6,...x}),R5=V_(ND)(({classes:x,justify:P})=>bn.createElement("div",{className:x.root},bn.createElement("h3",null,"Abstract Container (Grid) with abstract component Items (Grids)"),bn.createElement(BD,null,bn.createElement(o1,null,bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:"space-between"},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"})))),bn.createElement(o1,null,bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:"space-between"},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"})))),bn.createElement(o1,null,bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:"space-between"},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"})))),bn.createElement(o1,null,bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:"space-between"},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"}))))))),UD=x=>({root:{textAlign:"center"},paper:{padding:x.spacing(2),textAlign:"center",color:x.palette.text.secondary}}),D5=V_(UD)(({classes:x,justify:P})=>bn.createElement("div",{className:x.root},bn.createElement("h3",null,'Grid with component grids set to "justify" contents'),bn.createElement(lo,{container:!0,spacing:4},bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:P},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"})))),bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:P},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"})))),bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:P},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"})))),bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:P},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"}))))),bn.createElement("h3",null,'Grid with component grids set to "center" contents'),bn.createElement(lo,{container:!0,spacing:4},bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:"center"},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"})))),bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:"center"},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"})))),bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:"center"},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"})))),bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:"center"},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"}))))),bn.createElement("h3",null,'Grid with component grids set to "space-around" contents'),bn.createElement(lo,{container:!0,spacing:4},bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:"space-around"},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"})))),bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:"space-around"},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"})))),bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:"space-around"},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"})))),bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},bn.createElement(lo,{container:!0,justifyContent:"space-around"},bn.createElement(Yi,{label:"xs=12"}),bn.createElement(Yi,{label:"sm=9"}),bn.createElement(Yi,{label:"md=6"}))))))),VD=x=>({root:{textAlign:"center"},paper:{padding:x.spacing(2),textAlign:"center",color:x.palette.text.secondary}}),I5=V_(VD)(({classes:x})=>bn.createElement("div",{className:x.root},bn.createElement("h3",null,'Grid with "auto" screen widths'),bn.createElement(lo,{container:!0,spacing:4},bn.createElement(lo,{item:!0,xs:"auto",sm:"auto",md:"auto"},bn.createElement(Xs,{className:x.paper},'xs="auto" sm="auto" md="auto"')),bn.createElement(lo,{item:!0,xs:"auto",sm:"auto",md:"auto"},bn.createElement(Xs,{className:x.paper},'xs="auto" sm="auto" md="auto"')),bn.createElement(lo,{item:!0,xs:"auto",sm:"auto",md:"auto"},bn.createElement(Xs,{className:x.paper},'xs="auto" sm="auto" md="auto"')),bn.createElement(lo,{item:!0,xs:"auto",sm:"auto",md:"auto"},bn.createElement(Xs,{className:x.paper},'xs="auto" sm="auto" md="auto"'))),bn.createElement("h3",null,"Grid with proportional (1-12/12) screen widths"),bn.createElement(lo,{container:!0,spacing:4},bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},"xs=12 sm=9 md=6")),bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},"xs=12 sm=9 md=6")),bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},"xs=12 sm=9 md=6")),bn.createElement(lo,{item:!0,xs:12,sm:9,md:6},bn.createElement(Xs,{className:x.paper},"xs=12 sm=9 md=6")))));function Xx(x,P,e,v,M){return{name:x,calories:P,fat:e,carbs:v,protein:M}}const HD=["name","calories","fat","carbs","protein"],jD={name:"Dessert (100g serving)",calories:"Calories",fat:"Fat (g)",carbs:"Carbs (g)",protein:"Protein (g)"},GD=[Xx("Frozen yoghurt",159,6,24,4),Xx("Ice cream sandwich",237,9,37,4.3),Xx("Eclair",262,16,24,6)];class WD extends _n.Component{render(){return bn.createElement("div",null,bn.createElement("header",{className:"App-header"},bn.createElement("h1",{className:"App-title"},"Amplify / React Frontend v.s. Shiny / Plumber Backend "),bn.createElement("div",null,bn.createElement("a",{href:"https://vitejs.dev",target:"_blank"},bn.createElement("img",{src:"/vite.svg",className:"logo",alt:"Vite logo"})),bn.createElement("a",{href:"https://reactjs.org",target:"_blank"},bn.createElement("img",{src:t8,className:"logo react",alt:"React logo"}))),bn.createElement("h1",null,"Vite + React"),bn.createElement("p",{className:"read-the-docs"},"Click on the Vite and React logos to learn more")))}}function W6({content:x}){let P=!1;const[e,v]=_n.useState(0),[M,r]=_n.useState(0),[n,l]=_n.useState(0);(function(){console.log("Welcome to Amplify React app version:","1"),console.log("Custom components..."),console.log("App is: ",W6.name),console.log("AccessibleTable is: ",$w.name),console.log("Header is: ",WD.name),console.log("MyComponent is: ",I9.name),console.log("Foo is: ",z9.name),console.log("FooWithoutBind is: ",n6.name),console.log("PlotlyPlumberHistogramEx is: ",t2.name),console.log("UserProfileClass is: ",MP.name),console.log("UserProfileCreateReactClass is: ",v5.name||v5.constructor.name),console.log("AbstactingContainersAndItems is: ",R5.name||R5.constructor.name),console.log("FillingSpace is: ",D5.name||D5.constructor.name),console.log("UnderstandingBreakpoints is: ",I5.name||I5.constructor.name)})();function c(){if(!P){const f=document.getElementsByClassName("App")[0],a=f.childNodes[0]||null,o=typeof x=="function"?x():{childNodes:[]};setTimeout(u=>{o.childNodes.forEach(h=>{u.insertBefore(h,a)})},53,f),P=!0}}_n.useEffect(c,[]);function t(){window&&window.hasOwnProperty("innerWidth")&&window.hasOwnProperty("innerHeight")&&(console.log("Update width to: "+window.innerWidth),v(window.innerWidth),console.log("Update height to: "+window.innerHeight),r(window.innerHeight),console.log("Update height/width ratio to: "+window.innerHeight/window.innerWidth),l(window.innerHeight/window.innerWidth),setTimeout(()=>{console.log({windowWidth:e,windowHeight:M,windowRatio:n})}))}return _n.useEffect(()=>(window.addEventListener("load",t),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)),[]),bn.createElement("div",{className:"App"},bn.createElement($w,{columns:HD,labels:jD,rows:GD}),bn.createElement(t2,{windowWidth:e}))}const YD="react-app",Zx=document.getElementById(YD),z5=document.createElement("div"),O5=x=>{for(const P of Zx.childNodes){const e=P;P.nodeType===1?(console.log(P.nodeType,P),z5.appendChild(e)):P.nodeType===3&&console.log(P.nodeType,P)}Kx.render(bn.createElement(bn.StrictMode,null,bn.createElement(W6,{content:()=>z5})),Zx),Zx.style.opacity="1.0"};typeof Shiny=="object"?document.body.addEventListener("cori.apps:init",O5):(document.body.childNodes.forEach(x=>"data"in x&&x.data.match(/headContent/)!==null?document.body.removeChild(x):!0),O5());
