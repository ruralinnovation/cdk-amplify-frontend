(function(){const R=document.createElement("link").relList;if(R&&R.supports&&R.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))v(S);new MutationObserver(S=>{for(const r of S)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&v(a)}).observe(document,{childList:!0,subtree:!0});function e(S){const r={};return S.integrity&&(r.integrity=S.integrity),S.referrerpolicy&&(r.referrerPolicy=S.referrerpolicy),S.crossorigin==="use-credentials"?r.credentials="include":S.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function v(S){if(S.ep)return;S.ep=!0;const r=e(S);fetch(S.href,r)}})();(function(A){function R(nt){return nt&&nt.__esModule&&Object.prototype.hasOwnProperty.call(nt,"default")?nt.default:nt}function e(nt,$e){return $e={exports:{}},nt($e,$e.exports),$e.exports}var v=e(function(nt){function $e(gt){return nt.exports=$e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ht){return ht.__proto__||Object.getPrototypeOf(ht)},nt.exports.__esModule=!0,nt.exports.default=nt.exports,$e(gt)}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(v);var S=e(function(nt){function $e(gt,Ft){for(;!Object.prototype.hasOwnProperty.call(gt,Ft)&&(gt=v(gt),gt!==null););return gt}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(S);var r=e(function(nt){function $e(){return typeof Reflect<"u"&&Reflect.get?(nt.exports=$e=Reflect.get.bind(),nt.exports.__esModule=!0,nt.exports.default=nt.exports):(nt.exports=$e=function(Ft,ht,Pt){var Et=S(Ft,ht);if(!!Et){var Jt=Object.getOwnPropertyDescriptor(Et,ht);return Jt.get?Jt.get.call(arguments.length<3?Ft:Pt):Jt.value}},nt.exports.__esModule=!0,nt.exports.default=nt.exports),$e.apply(this,arguments)}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(r);var a=e(function(nt){function $e(gt,Ft){return nt.exports=$e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Pt,Et){return Pt.__proto__=Et,Pt},nt.exports.__esModule=!0,nt.exports.default=nt.exports,$e(gt,Ft)}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(a);var u=e(function(nt){function $e(gt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function");gt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:gt,writable:!0,configurable:!0}}),Object.defineProperty(gt,"prototype",{writable:!1}),Ft&&a(gt,Ft)}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(u);var c=e(function(nt){function $e(gt){return nt.exports=$e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ft){return typeof Ft}:function(Ft){return Ft&&typeof Symbol=="function"&&Ft.constructor===Symbol&&Ft!==Symbol.prototype?"symbol":typeof Ft},nt.exports.__esModule=!0,nt.exports.default=nt.exports,$e(gt)}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports}),t=R(c),f=e(function(nt){function $e(gt){if(gt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return gt}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(f);var n=e(function(nt){var $e=c.default;function gt(Ft,ht){if(ht&&($e(ht)==="object"||typeof ht=="function"))return ht;if(ht!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(Ft)}nt.exports=gt,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(n);var o=e(function(nt){function $e(gt){return Function.toString.call(gt).indexOf("[native code]")!==-1}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(o);var l=e(function(nt){function $e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(l);var h=e(function(nt){function $e(gt,Ft,ht){return l()?(nt.exports=$e=Reflect.construct.bind(),nt.exports.__esModule=!0,nt.exports.default=nt.exports):(nt.exports=$e=function(Et,Jt,ur){var ar=[null];ar.push.apply(ar,Jt);var xr=Function.bind.apply(Et,ar),Ar=new xr;return ur&&a(Ar,ur.prototype),Ar},nt.exports.__esModule=!0,nt.exports.default=nt.exports),$e.apply(null,arguments)}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(h);var i=e(function(nt){function $e(gt){var Ft=typeof Map=="function"?new Map:void 0;return nt.exports=$e=function(Pt){if(Pt===null||!o(Pt))return Pt;if(typeof Pt!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Ft<"u"){if(Ft.has(Pt))return Ft.get(Pt);Ft.set(Pt,Et)}function Et(){return h(Pt,arguments,v(this).constructor)}return Et.prototype=Object.create(Pt.prototype,{constructor:{value:Et,enumerable:!1,writable:!0,configurable:!0}}),a(Et,Pt)},nt.exports.__esModule=!0,nt.exports.default=nt.exports,$e(gt)}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(i);var s=e(function(nt){function $e(gt,Ft){(Ft==null||Ft>gt.length)&&(Ft=gt.length);for(var ht=0,Pt=new Array(Ft);ht<Ft;ht++)Pt[ht]=gt[ht];return Pt}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(s);var p=e(function(nt){function $e(gt){if(Array.isArray(gt))return s(gt)}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(p);var d=e(function(nt){function $e(gt){if(typeof Symbol<"u"&&gt[Symbol.iterator]!=null||gt["@@iterator"]!=null)return Array.from(gt)}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(d);var g=e(function(nt){function $e(gt,Ft){if(!!gt){if(typeof gt=="string")return s(gt,Ft);var ht=Object.prototype.toString.call(gt).slice(8,-1);if(ht==="Object"&&gt.constructor&&(ht=gt.constructor.name),ht==="Map"||ht==="Set")return Array.from(gt);if(ht==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ht))return s(gt,Ft)}}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(g);var b=e(function(nt){function $e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports});R(b);var m=e(function(nt){function $e(gt){return p(gt)||d(gt)||g(gt)||b()}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports}),x=R(m),w=e(function(nt){function $e(gt,Ft){if(!(gt instanceof Ft))throw new TypeError("Cannot call a class as a function")}nt.exports=$e,nt.exports.__esModule=!0,nt.exports.default=nt.exports}),y=R(w),T=e(function(nt){function $e(Ft,ht){for(var Pt=0;Pt<ht.length;Pt++){var Et=ht[Pt];Et.enumerable=Et.enumerable||!1,Et.configurable=!0,"value"in Et&&(Et.writable=!0),Object.defineProperty(Ft,Et.key,Et)}}function gt(Ft,ht,Pt){return ht&&$e(Ft.prototype,ht),Pt&&$e(Ft,Pt),Object.defineProperty(Ft,"prototype",{writable:!1}),Ft}nt.exports=gt,nt.exports.__esModule=!0,nt.exports.default=nt.exports}),M=R(T);function P(){}var L=function($e){return $e};function I(nt,$e){for(var gt in $e)nt[gt]=$e[gt];return nt}function E(nt){return nt()}function k(){return Object.create(null)}function C(nt){nt.forEach(E)}function D(nt){return typeof nt=="function"}function F(nt,$e){return nt!=nt?$e==$e:nt!==$e||nt&&t(nt)==="object"||typeof nt=="function"}function N(nt){return Object.keys(nt).length===0}function G(nt,$e,gt,Ft){if(nt){var ht=U(nt,$e,gt,Ft);return nt[0](ht)}}function U(nt,$e,gt,Ft){return nt[1]&&Ft?I(gt.ctx.slice(),nt[1](Ft($e))):gt.ctx}function X(nt,$e,gt,Ft){if(nt[2]&&Ft){var ht=nt[2](Ft(gt));if($e.dirty===void 0)return ht;if(t(ht)==="object"){for(var Pt=[],Et=Math.max($e.dirty.length,ht.length),Jt=0;Jt<Et;Jt+=1)Pt[Jt]=$e.dirty[Jt]|ht[Jt];return Pt}return $e.dirty|ht}return $e.dirty}function z(nt,$e,gt,Ft,ht,Pt,Et){var Jt=X($e,Ft,ht,Pt);if(Jt){var ur=U($e,gt,Ft,Et);nt.p(ur,Jt)}}function B(nt){return nt==null?"":nt}var j=typeof window<"u",V=j?function(){return window.performance.now()}:function(){return Date.now()},K=j?function(nt){return requestAnimationFrame(nt)}:P,te=new Set;function $(nt){te.forEach(function($e){$e.c(nt)||(te.delete($e),$e.f())}),te.size!==0&&K($)}function ie(nt){var $e;return te.size===0&&K($),{promise:new Promise(function(gt){te.add($e={c:nt,f:gt})}),abort:function(){te.delete($e)}}}function se(nt,$e){nt.appendChild($e)}function Q(nt,$e,gt){nt.insertBefore($e,gt||null)}function H(nt){nt.parentNode.removeChild(nt)}function oe(nt,$e){for(var gt=0;gt<nt.length;gt+=1)nt[gt]&&nt[gt].d($e)}function re(nt){return document.createElement(nt)}function ee(nt){return document.createElementNS("http://www.w3.org/2000/svg",nt)}function ae(nt){return document.createTextNode(nt)}function fe(){return ae(" ")}function de(){return ae("")}function pe(nt,$e,gt,Ft){return nt.addEventListener($e,gt,Ft),function(){return nt.removeEventListener($e,gt,Ft)}}function W(nt,$e,gt){gt==null?nt.removeAttribute($e):nt.getAttribute($e)!==gt&&nt.setAttribute($e,gt)}function ue(nt){return Array.from(nt.childNodes)}function me(nt,$e,gt,Ft){for(var ht=0;ht<nt.length;ht+=1){var Pt=nt[ht];if(Pt.nodeName===$e){for(var Et=0,Jt=[];Et<Pt.attributes.length;){var ur=Pt.attributes[Et++];gt[ur.name]||Jt.push(ur.name)}for(var ar=0;ar<Jt.length;ar++)Pt.removeAttribute(Jt[ar]);return nt.splice(ht,1)[0]}}return Ft?ee($e):re($e)}function be(nt,$e){for(var gt=0;gt<nt.length;gt+=1){var Ft=nt[gt];if(Ft.nodeType===3)return Ft.data=""+$e,nt.splice(gt,1)[0]}return ae($e)}function Me(nt){return be(nt," ")}function Pe(nt,$e){$e=""+$e,nt.wholeText!==$e&&(nt.data=$e)}function Ge(nt,$e,gt,Ft){nt.style.setProperty($e,gt,Ft?"important":"")}function ze(nt,$e,gt){nt.classList[gt?"add":"remove"]($e)}function Qe(nt,$e){var gt=document.createEvent("CustomEvent");return gt.initCustomEvent(nt,!1,!1,$e),gt}var tt=function(){function nt(){var $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;y(this,nt),this.a=$e,this.e=this.n=null}return M(nt,[{key:"m",value:function(gt,Ft){var ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this.e||(this.e=re(Ft.nodeName),this.t=Ft,this.h(gt)),this.i(ht)}},{key:"h",value:function(gt){this.e.innerHTML=gt,this.n=Array.from(this.e.childNodes)}},{key:"i",value:function(gt){for(var Ft=0;Ft<this.n.length;Ft+=1)Q(this.t,this.n[Ft],gt)}},{key:"p",value:function(gt){this.d(),this.h(gt),this.i(this.a)}},{key:"d",value:function(){this.n.forEach(H)}}]),nt}(),Ce=new Set,Ae=0;function Be(nt){for(var $e=5381,gt=nt.length;gt--;)$e=($e<<5)-$e^nt.charCodeAt(gt);return $e>>>0}function qe(nt,$e,gt,Ft,ht,Pt,Et){for(var Jt=arguments.length>7&&arguments[7]!==void 0?arguments[7]:0,ur=16.666/Ft,ar=`{
`,xr=0;xr<=1;xr+=ur){var Ar=$e+(gt-$e)*Pt(xr);ar+=xr*100+"%{".concat(Et(Ar,1-Ar),`}
`)}var mn=ar+"100% {".concat(Et(gt,1-gt),`}
}`),Zr="__svelte_".concat(Be(mn),"_").concat(Jt),bn=nt.ownerDocument;Ce.add(bn);var Qn=bn.__svelte_stylesheet||(bn.__svelte_stylesheet=bn.head.appendChild(re("style")).sheet),Cn=bn.__svelte_rules||(bn.__svelte_rules={});Cn[Zr]||(Cn[Zr]=!0,Qn.insertRule("@keyframes ".concat(Zr," ").concat(mn),Qn.cssRules.length));var Hn=nt.style.animation||"";return nt.style.animation="".concat(Hn?"".concat(Hn,", "):"").concat(Zr," ").concat(Ft,"ms linear ").concat(ht,"ms 1 both"),Ae+=1,Zr}function Tt(nt,$e){var gt=(nt.style.animation||"").split(", "),Ft=gt.filter($e?function(Pt){return Pt.indexOf($e)<0}:function(Pt){return Pt.indexOf("__svelte")===-1}),ht=gt.length-Ft.length;ht&&(nt.style.animation=Ft.join(", "),Ae-=ht,Ae||At())}function At(){K(function(){Ae||(Ce.forEach(function(nt){for(var $e=nt.__svelte_stylesheet,gt=$e.cssRules.length;gt--;)$e.deleteRule(gt);nt.__svelte_rules={}}),Ce.clear())})}var Ne;function ct(nt){Ne=nt}function Mt(){if(!Ne)throw new Error("Function called outside component initialization");return Ne}function Wt(nt){Mt().$$.on_mount.push(nt)}var qt=[],zt=[],$t=[],rr=[],Lt=Promise.resolve(),Ct=!1;function dt(){Ct||(Ct=!0,Lt.then(et))}function lt(nt){$t.push(nt)}function Te(nt){rr.push(nt)}var Le=!1,Ue=new Set;function et(){if(!Le){Le=!0;do{for(var nt=0;nt<qt.length;nt+=1){var $e=qt[nt];ct($e),ke($e.$$)}for(ct(null),qt.length=0;zt.length;)zt.pop()();for(var gt=0;gt<$t.length;gt+=1){var Ft=$t[gt];Ue.has(Ft)||(Ue.add(Ft),Ft())}$t.length=0}while(qt.length);for(;rr.length;)rr.pop()();Ct=!1,Le=!1,Ue.clear()}}function ke(nt){if(nt.fragment!==null){nt.update(),C(nt.before_update);var $e=nt.dirty;nt.dirty=[-1],nt.fragment&&nt.fragment.p(nt.ctx,$e),nt.after_update.forEach(lt)}}var Ie;function He(){return Ie||(Ie=Promise.resolve(),Ie.then(function(){Ie=null})),Ie}function Ye(nt,$e,gt){nt.dispatchEvent(Qe("".concat($e?"intro":"outro").concat(gt)))}var ft=new Set,it;function je(){it={r:0,c:[],p:it}}function ot(){it.r||C(it.c),it=it.p}function Je(nt,$e){nt&&nt.i&&(ft.delete(nt),nt.i($e))}function st(nt,$e,gt,Ft){if(nt&&nt.o){if(ft.has(nt))return;ft.add(nt),it.c.push(function(){ft.delete(nt),Ft&&(gt&&nt.d(1),Ft())}),nt.o($e)}}var It={duration:0};function Nt(nt,$e,gt){var Ft=$e(nt,gt),ht=!1,Pt,Et,Jt=0;function ur(){Pt&&Tt(nt,Pt)}function ar(){var Ar=Ft||It,mn=Ar.delay,Zr=mn===void 0?0:mn,bn=Ar.duration,Qn=bn===void 0?300:bn,Cn=Ar.easing,Hn=Cn===void 0?L:Cn,ra=Ar.tick,qn=ra===void 0?P:ra,Un=Ar.css;Un&&(Pt=qe(nt,0,1,Qn,Zr,Hn,Un,Jt++)),qn(0,1);var Fa=V()+Zr,ai=Fa+Qn;Et&&Et.abort(),ht=!0,lt(function(){return Ye(nt,!0,"start")}),Et=ie(function(_a){if(ht){if(_a>=ai)return qn(1,0),Ye(nt,!0,"end"),ur(),ht=!1;if(_a>=Fa){var Na=Hn((_a-Fa)/Qn);qn(Na,1-Na)}}return ht})}var xr=!1;return{start:function(){xr||(Tt(nt),D(Ft)?(Ft=Ft(),He().then(ar)):ar())},invalidate:function(){xr=!1},end:function(){ht&&(ur(),ht=!1)}}}function nr(nt,$e,gt){var Ft=$e(nt,gt),ht=!0,Pt,Et=it;Et.r+=1;function Jt(){var ur=Ft||It,ar=ur.delay,xr=ar===void 0?0:ar,Ar=ur.duration,mn=Ar===void 0?300:Ar,Zr=ur.easing,bn=Zr===void 0?L:Zr,Qn=ur.tick,Cn=Qn===void 0?P:Qn,Hn=ur.css;Hn&&(Pt=qe(nt,1,0,mn,xr,bn,Hn));var ra=V()+xr,qn=ra+mn;lt(function(){return Ye(nt,!1,"start")}),ie(function(Un){if(ht){if(Un>=qn)return Cn(0,1),Ye(nt,!1,"end"),--Et.r||C(Et.c),!1;if(Un>=ra){var Fa=bn((Un-ra)/mn);Cn(1-Fa,Fa)}}return ht})}return D(Ft)?He().then(function(){Ft=Ft(),Jt()}):Jt(),{end:function(ar){ar&&Ft.tick&&Ft.tick(1,0),ht&&(Pt&&Tt(nt,Pt),ht=!1)}}}function We(nt,$e,gt,Ft){var ht=$e(nt,gt),Pt=Ft?0:1,Et=null,Jt=null,ur=null;function ar(){ur&&Tt(nt,ur)}function xr(mn,Zr){var bn=mn.b-Pt;return Zr*=Math.abs(bn),{a:Pt,b:mn.b,d:bn,duration:Zr,start:mn.start,end:mn.start+Zr,group:mn.group}}function Ar(mn){var Zr=ht||It,bn=Zr.delay,Qn=bn===void 0?0:bn,Cn=Zr.duration,Hn=Cn===void 0?300:Cn,ra=Zr.easing,qn=ra===void 0?L:ra,Un=Zr.tick,Fa=Un===void 0?P:Un,ai=Zr.css,_a={start:V()+Qn,b:mn};mn||(_a.group=it,it.r+=1),Et?Jt=_a:(ai&&(ar(),ur=qe(nt,Pt,mn,Hn,Qn,qn,ai)),mn&&Fa(0,1),Et=xr(_a,Hn),lt(function(){return Ye(nt,mn,"start")}),ie(function(Na){if(Jt&&Na>Jt.start&&(Et=xr(Jt,Hn),Jt=null,Ye(nt,Et.b,"start"),ai&&(ar(),ur=qe(nt,Pt,Et.b,Et.duration,0,qn,ht.css))),Et){if(Na>=Et.end)Fa(Pt=Et.b,1-Pt),Ye(nt,Et.b,"end"),Jt||(Et.b?ar():--Et.group.r||C(Et.group.c)),Et=null;else if(Na>=Et.start){var wi=Na-Et.start;Pt=Et.a+Et.d*qn(wi/Et.duration),Fa(Pt,1-Pt)}}return!!(Et||Jt)}))}return{run:function(Zr){D(ht)?He().then(function(){ht=ht(),Ar(Zr)}):Ar(Zr)},end:function(){ar(),Et=Jt=null}}}var Fe=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function bt(nt,$e,gt){var Ft=nt.$$.props[$e];Ft!==void 0&&(nt.$$.bound[Ft]=gt,gt(nt.$$.ctx[Ft]))}function kt(nt){nt&&nt.c()}function _t(nt,$e){nt&&nt.l($e)}function Rt(nt,$e,gt){var Ft=nt.$$,ht=Ft.fragment,Pt=Ft.on_mount,Et=Ft.on_destroy,Jt=Ft.after_update;ht&&ht.m($e,gt),lt(function(){var ur=Pt.map(E).filter(D);Et?Et.push.apply(Et,x(ur)):C(ur),nt.$$.on_mount=[]}),Jt.forEach(lt)}function Dt(nt,$e){var gt=nt.$$;gt.fragment!==null&&(C(gt.on_destroy),gt.fragment&&gt.fragment.d($e),gt.on_destroy=gt.fragment=null,gt.ctx=[])}function Ut(nt,$e){nt.$$.dirty[0]===-1&&(qt.push(nt),dt(),nt.$$.dirty.fill(0)),nt.$$.dirty[$e/31|0]|=1<<$e%31}function Bt(nt,$e,gt,Ft,ht,Pt){var Et=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[-1],Jt=Ne;ct(nt);var ur=$e.props||{},ar=nt.$$={fragment:null,ctx:null,props:Pt,update:P,not_equal:ht,bound:k(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(Jt?Jt.$$.context:[]),callbacks:k(),dirty:Et,skip_bound:!1},xr=!1;if(ar.ctx=gt?gt(nt,ur,function(mn,Zr){var bn=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:Zr;return ar.ctx&&ht(ar.ctx[mn],ar.ctx[mn]=bn)&&(!ar.skip_bound&&ar.bound[mn]&&ar.bound[mn](bn),xr&&Ut(nt,mn)),Zr}):[],ar.update(),xr=!0,C(ar.before_update),ar.fragment=Ft?Ft(ar.ctx):!1,$e.target){if($e.hydrate){var Ar=ue($e.target);ar.fragment&&ar.fragment.l(Ar),Ar.forEach(H)}else ar.fragment&&ar.fragment.c();$e.intro&&Je(nt.$$.fragment),Rt(nt,$e.target,$e.anchor),et()}ct(Jt)}var tr=function(){function nt(){y(this,nt)}return M(nt,[{key:"$destroy",value:function(){Dt(this,1),this.$destroy=P}},{key:"$on",value:function(gt,Ft){var ht=this.$$.callbacks[gt]||(this.$$.callbacks[gt]=[]);return ht.push(Ft),function(){var Pt=ht.indexOf(Ft);Pt!==-1&&ht.splice(Pt,1)}}},{key:"$set",value:function(gt){this.$$set&&!N(gt)&&(this.$$.skip_bound=!0,this.$$set(gt),this.$$.skip_bound=!1)}}]),nt}();function er(nt){return nt<.5?4*nt*nt*nt:.5*Math.pow(2*nt-2,3)+1}function Zt(nt){var $e=nt-1;return $e*$e*$e+1}function _r(nt){return--nt*nt*nt*nt*nt+1}function Gr(nt,$e){var gt=$e.delay,Ft=gt===void 0?0:gt,ht=$e.duration,Pt=ht===void 0?400:ht,Et=$e.easing,Jt=Et===void 0?L:Et,ur=+getComputedStyle(nt).opacity;return{delay:Ft,duration:Pt,easing:Jt,css:function(xr){return"opacity: ".concat(xr*ur)}}}function Or(nt,$e){var gt=$e.delay,Ft=gt===void 0?0:gt,ht=$e.duration,Pt=ht===void 0?400:ht,Et=$e.easing,Jt=Et===void 0?Zt:Et,ur=$e.x,ar=ur===void 0?0:ur,xr=$e.y,Ar=xr===void 0?0:xr,mn=$e.opacity,Zr=mn===void 0?0:mn,bn=getComputedStyle(nt),Qn=+bn.opacity,Cn=bn.transform==="none"?"":bn.transform,Hn=Qn*(1-Zr);return{delay:Ft,duration:Pt,easing:Jt,css:function(qn,Un){return`
			transform: `.concat(Cn," translate(").concat((1-qn)*ar,"px, ").concat((1-qn)*Ar,`px);
			opacity: `).concat(Qn-Hn*Un)}}}function Fr(nt,$e){var gt=$e.delay,Ft=gt===void 0?0:gt,ht=$e.speed,Pt=$e.duration,Et=$e.easing,Jt=Et===void 0?er:Et,ur=nt.getTotalLength();return Pt===void 0?ht===void 0?Pt=800:Pt=ur/ht:typeof Pt=="function"&&(Pt=Pt(ur)),{delay:Ft,duration:Pt,easing:Jt,css:function(xr,Ar){return"stroke-dasharray: ".concat(xr*ur," ").concat(Ar*ur)}}}function Mn(nt,$e){var gt=$e.delay,Ft=gt===void 0?0:gt,ht=$e.duration,Pt=ht===void 0?400:ht,Et=$e.easing,Jt=Et===void 0?Zt:Et,ur=parseFloat(getComputedStyle(nt).strokeWidth);return{delay:Ft,duration:Pt,easing:Jt,css:function(xr){return"opacity: ".concat(xr,"; stroke-width: ").concat(xr*ur)}}}var Wn="M101.801 40.115l-.413-.225-27.01-15.617-3.901-2.252L30.6 45.07l-.637-2.891.037-.038L67.663 20.37l-3.038-1.764-35.338 20.459-.637-2.89.037-.038L61.812 16.99l-1.013-.6c-1.313-.75-2.889-.6-4.727.45L28.65 32.72l-3.864 2.215v46.099l-2.814-.901V36.549l-3.038 1.764v40.844l-2.814-.901V39.928l-1.013.6c-1.313.75-1.988 2.215-1.988 4.28v36.188l39.914 23.05-2.175 1.989-.038-.037-37.7-21.736v3.491l35.374 20.422-2.176 1.99-.037-.038-33.162-19.108v1.164c0 1.502.938 2.816 2.739 3.867l.412.225 27.047 15.617 3.864 2.214 39.915-23.05.637 2.891-.037.038-37.664 21.773 3.039 1.765 35.375-20.422.638 2.89-.038.038-33.124 19.145.975.563.038.038c1.313.751 2.888.601 4.726-.451l27.46-15.841 3.864-2.215V55.131l2.814.901v43.584l3.038-1.764V56.97l2.814.9V96.2l1.012-.6c1.313-.752 1.989-2.216 1.989-4.318V55.094L64.625 32.119l2.213-1.99.038.038 37.663 21.773V48.45L69.164 28.027l2.176-1.99.037.038 33.125 19.146v-1.164c.037-1.614-.901-2.89-2.701-3.942zm-15.23 9.122c1.275.751 2.4 2.703 2.438 4.167v29.282c0 1.463-1.126 3.453-2.401 4.204L61.286 101.53c-.638.375-1.5.563-2.438.563-.9 0-1.8-.188-2.4-.563L31.087 86.89c-1.275-.75-2.363-2.665-2.4-4.167V53.404c.037-1.501 1.125-3.378 2.4-4.13l25.322-14.64c.6-.375 1.5-.563 2.438-.563.938 0 1.8.188 2.438.563L86.57 49.237z",Tn="M41.14 55.694h-2.663c-3.488 0-5.14 1.69-5.14 5.18V75.29c0 3.491 1.689 5.143 5.14 5.143h2.589c3.45 0 5.139-1.69 5.139-5.143v-6.457h-5.552v6.344c0 .338-.225.526-.638.526h-.562c-.376 0-.526-.188-.526-.526v-14.19c0-.375.188-.525.526-.525h.675c.375 0 .525.187.525.525v3.154c0 1.651.075 2.44 1.613 2.44h3.939v-5.706c0-3.53-1.613-5.18-5.064-5.18z M56.297 55.694h-2.813c-3.49 0-5.177 1.69-5.177 5.18V75.29c0 3.491 1.688 5.143 5.176 5.143h2.814c3.451 0 5.14-1.69 5.14-5.143V60.875c.037-3.492-1.651-5.18-5.14-5.18zm-.525 19.483c0 .376-.188.526-.6.526h-.563c-.413 0-.6-.188-.6-.526v-14.19c0-.375.187-.525.6-.525h.563c.412 0 .6.187.6.525v14.19zM69.09 71.498h1.162c.376 0 .526.188.526.526v5.743c0 1.652.075 2.44 1.613 2.44h4.876s0-.037-.075-.112c-.45-.375-.675-1.464-.675-2.29v-5.256c0-1.914-.788-2.928-2.626-3.378l-.3-.075.263-.075c1.763-.6 2.588-1.84 2.588-3.942v-3.98c0-3.453-1.688-5.142-5.177-5.142H63.5v24.288h5.59v-8.747zm0-10.774h1.2c.375 0 .525.188.525.526v4.993c0 .375-.188.525-.525.525h-1.2v-6.044zM84.32 55.92h-5.777v24.288h5.777V55.919z",Nn="M 126.28696,41.835323 72.573872,10.80815 C 71.679135,10.259762 70.668948,10 69.601036,10 c -1.067912,0 -2.049237,0.259762 -2.972837,0.80815 L 12.972836,41.835323 C 11.096775,42.874373 10,44.837022 10,46.943983 v 62.112077 c 0,2.10696 1.096775,4.06961 2.972836,5.10866 l 53.713088,31.02717 c 0.894738,0.54839 1.904925,0.80815 2.972837,0.80815 1.010187,0 2.049236,-0.25976 2.972836,-0.80815 l 53.713093,-31.02717 c 1.81833,-1.03905 2.97283,-3.0017 2.97283,-5.10866 V 46.943983 c -0.11545,-2.106961 -1.21222,-4.06961 -3.03056,-5.10866 z m -25.45671,71.319207 3.17487,5.42615 -16.36503,9.46689 -3.174874,-5.42615 z m -27.534816,7.96604 c -0.548387,0.34635 -1.154499,0.54839 -1.818337,0.75043 -0.663837,0.20204 -1.241087,0.25976 -1.904924,0.25976 -0.808149,0 -1.616299,-0.14431 -2.366724,-0.40407 -0.4618,-0.14432 -0.894737,-0.34635 -1.298812,-0.60612 l -31.80646,-18.3854 c -0.548388,-0.34635 -1.067912,-0.6927 -1.50085,-1.1545 -0.202037,-0.20204 -0.461799,-0.4618 -0.606112,-0.6927 -0.202037,-0.25976 -0.34635,-0.49066 -0.490662,-0.80815 -0.08659,-0.144311 -0.144313,-0.288623 -0.202038,-0.404073 -0.08659,-0.259762 -0.259762,-0.490662 -0.288624,-0.750425 -0.288625,-0.808149 -0.4618,-1.616299 -0.4618,-2.453311 V 59.585753 c 0,-0.490663 0.05773,-0.952462 0.144312,-1.443125 0.05772,-0.144312 0.05772,-0.288625 0.08659,-0.461799 0.08659,-0.404075 0.259762,-0.750425 0.404074,-1.1545 0.144313,-0.288625 0.288625,-0.606112 0.4618,-0.865875 0.08659,-0.202037 0.259763,-0.346349 0.34635,-0.548387 0.202038,-0.259762 0.404075,-0.490662 0.606112,-0.6927 0.202038,-0.202037 0.4618,-0.461799 0.6927,-0.663837 0.259762,-0.202037 0.490662,-0.404075 0.80815,-0.548387 L 53.582355,41.921911 65.906637,34.821739 c 1.1545,-0.663837 2.395587,-1.010187 3.665536,-1.010187 1.26995,0 2.511037,0.34635 3.665536,1.010187 l 22.39729,12.930394 9.438031,5.45501 c 0.14431,0.08659 0.28863,0.202037 0.4618,0.288625 0.14431,0.08659 0.28863,0.202037 0.40408,0.288625 1.76061,1.356537 2.7708,3.463498 2.7708,5.714772 v 36.799671 c 0,2.597624 -1.41427,5.022074 -3.66554,6.320884 z m -3.665536,10.04415 7.186759,-4.09847 3.174874,5.42614 -10.33277,5.97454 -10.275046,-5.97454 3.174874,-5.42614 z m -14.921906,-8.57216 -3.174873,5.42615 -16.393893,-9.49576 3.174874,-5.42615 z M 23.507644,51.417669 v 8.283534 H 17.186759 V 47.780995 l 10.275046,-5.974534 3.174873,5.426147 z m 0,17.144317 V 87.466915 H 17.186759 V 68.561986 Z m 0,27.765713 v 8.283531 l 7.186759,4.1562 -3.174873,5.42615 -10.303908,-6.0034 V 96.298836 h 6.292022 z m 14.864181,-53.482189 -3.174874,-5.426147 16.36503,-9.466896 3.174874,5.426147 z m 31.258073,-18.067917 -7.186759,4.156198 -3.174874,-5.426147 10.332771,-6.003397 10.33277,5.974534 -3.174874,5.426148 z m 14.864181,8.572159 3.174874,-5.426148 16.336167,9.495759 -3.17487,5.426147 z m 31.258071,71.232618 v -8.283534 h 6.26316 v 11.891344 l -10.27504,5.97454 -3.17488,-5.42615 z m 0,-17.144317 V 68.533124 h 6.26316 v 18.904929 z m 0,-27.765713 v -8.283534 l -7.18676,-4.156198 3.17488,-5.426147 10.27504,5.974534 V 59.67234 Z",jn="M 57.767416,91.594251 v -7.359934 c 0,-2.713074 -1.096775,-4.098474 -3.723261,-4.762311 l -0.404075,-0.08659 0.34635,-0.08659 c 2.511037,-0.865874 3.665536,-2.597624 3.665536,-5.512735 v -5.628185 c 0,-4.848898 -2.366724,-7.215621 -7.273347,-7.215621 H 39.382012 v 34.144322 h 7.879459 V 82.820055 h 1.645161 c 0.548388,0 0.750425,0.259762 0.750425,0.750424 v 8.081497 c 0,2.308999 0.08659,3.405773 2.251274,3.405773 h 6.782685 c 0.05773,0 0.08659,0 0.08659,0 0,0 0,-0.05773 -0.08659,-0.144312 -0.606113,-0.606112 -0.9236,-2.164687 -0.9236,-3.319186 z M 49.714782,75.373533 c 0,0.548387 -0.259762,0.750425 -0.750425,0.750425 h -1.731749 v -8.485571 h 1.702887 c 0.548387,0 0.750425,0.259762 0.750425,0.750424 v 6.984722 z M 68.764024,60.94229 h -8.139222 v 34.144322 h 8.139222 z M 82.127355,60.94229 h -3.665536 c -4.820035,0 -7.129034,2.308999 -7.129034,7.129034 0,0 0,1.500849 0,3.954161 0,4.358235 2.222411,5.801359 3.521223,6.667234 1.414262,0.80815 5.22411,3.319186 5.512735,3.463498 0.6927,0.4618 0.952462,1.298812 1.010187,1.818337 0,1.356537 0,2.511037 0,3.867573 0,0.4618 -0.202037,0.6927 -0.692699,0.6927 h -0.80815 c -0.548387,0 -0.894737,-0.259762 -0.894737,-0.6927 v -4.560273 h -7.677422 v 4.704586 c 0,4.76231 2.308999,7.071309 7.129035,7.071309 h 3.550086 c 4.76231,0 7.129034,-2.251274 7.129034,-7.071309 v -3.059424 c 0,0 0,-0.05772 0,-1.558574 0,-0.952462 -0.490662,-3.117149 -1.962649,-4.820035 -3.001699,-3.521224 -6.84041,-3.867574 -7.735147,-6.320885 -0.144312,-0.4618 -0.34635,-1.096775 -0.34635,-1.616299 v -2.366724 c 0,-0.490663 0.259763,-0.6927 0.6927,-0.6927 h 0.952462 c 0.490662,0 0.6927,0.259762 0.6927,0.6927 v 1.414262 c 0,2.251274 0.08659,3.348048 2.222411,3.348048 h 5.426148 v -4.906623 c 0.08659,-4.906622 -2.164687,-7.157896 -6.926997,-7.157896 z M 99.848922,60.94229 h -8.139221 v 34.144322 h 8.139221 z";function Nr(){var nt=re("style");nt.id="svelte-sdid3b-style",nt.textContent=".svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before{box-sizing:border-box}button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{border:0;cursor:pointer;overflow:visible;text-transform:none}svg.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b:not(:root){overflow:hidden}.site-header.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{position:absolute;top:0;left:0;width:100vw}*.Light-on-Dark.site-header.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.site-header.svelte-sdid3b a.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.site-header.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{background-color:#16343e;background-color:#26535c}.site-header__inner.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{background-color:transparent;transition:all .35s ease,background-color 0s}.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{width:100%;padding-left:56px;padding-right:56px;margin-right:0px;margin-left:0px}@media(max-width: 540px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{padding:0 0 0 1em;max-width:100vh;width:100%}}@media(min-width: 640px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 768px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 1024px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 1080px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:100%}}.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{list-style:none;display:flex;flex-wrap:wrap;margin-right:-10px;margin-left:-10px}.justify-content-between.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{justify-content:space-between !important}.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{width:calc(100% + 20px);list-style:none;padding:0;margin:0 0 0 -10px}.site-header__row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{height:76px;flex-wrap:nowrap;transition:.35s ease}@media(min-width: 768px){.site-header__row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{will-change:height}}@media(min-width: 768px){}.col.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,.col-auto.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{position:relative;width:100%;padding-right:10px;padding-left:10px}.col-auto.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{flex:0 0 auto;width:auto;max-width:100%}.site-header__main-logo.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:50%;align-self:flex-start}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:143px;height:92px;position:absolute;top:12px;left:0;transition:all .35s ease;transform-origin:top left;pointer-events:none;touch-action:none;background-color:transparent}@media(max-width: 768px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{height:54px}}@media(min-width: 768px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:154px;height:74px;top:4px;left:1px}}@media(min-width: 1200px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:211px;height:92px;will-change:height,width,top,left}}.site-header__main-logo.svelte-sdid3b svg.logo-border.svelte-sdid3b.svelte-sdid3b{fill:none;z-index:0}.header-stuck .site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{top:-1px}@media(min-width: 768px){.header-stuck .site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:155px;height:100px;top:-3px;left:1px}}.site-header__main-logo.svelte-sdid3b svg .text-group.svelte-sdid3b.svelte-sdid3b{transition:.25s cubic-bezier(.77,0,.175,1)}@media(max-width: 1023px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .text g.svelte-sdid3b,.site-header__main-logo.svelte-sdid3b svg .text-group.svelte-sdid3b.svelte-sdid3b{display:none}}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .logo path.svelte-sdid3b,.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .text path.svelte-sdid3b{fill:#16343e}.header-stuck .site-header__main-logo.svelte-sdid3b svg .border.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.home .menu.svelte-sdid3b g.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.home .site-header__main-logo.svelte-sdid3b .logo path.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.home .site-header__main-logo.svelte-sdid3b .text path.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .menu.svelte-sdid3b g.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .site-header__main-logo.svelte-sdid3b .logo path.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .site-header__main-logo.svelte-sdid3b .text path.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.svelte-sdid3b .site-header__main-logo svg .logo path.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.svelte-sdid3b .site-header__main-logo svg .text path.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.svelte-sdid3b .header-stuck .site-header__main-logo svg .border.svelte-sdid3b.svelte-sdid3b{fill:#16343e;fill:#26535c}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b path.svelte-sdid3b{transition:all .35s ease,fill 0s}.site-header__menu-section.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex}.site-header__primary-menu.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{padding-top:10px}.site-header__item.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex}.site-header__item.svelte-sdid3b .site-header__item_inner.svelte-sdid3b.svelte-sdid3b{display:flex;align-items:center;flex:1 0 auto}.site-header__menu-section.svelte-sdid3b .menu.svelte-sdid3b.svelte-sdid3b{align-items:stretch;flex-wrap:nowrap}.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{margin-right:0;align-items:center}@media(min-width: 1200px){.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{align-items:center}}.mobile-menu-toggle.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex;flex:0 0 0;margin-right:2.5%;order:4;align-items:center}@media(max-width: 820px){.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{display:none}}@media(min-width: 820px){.mobile-menu-toggle.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:none}}.hamburger-control__inner.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{background-color:transparent}.hamburger-control__inner.svelte-sdid3b .hamburger-control__open.svelte-sdid3b.svelte-sdid3b{background-color:transparent}.hamburger-control__inner.svelte-sdid3b .hamburger-control__open .menu g.svelte-sdid3b.svelte-sdid3b{fill:#16343E}*.Light-on-Dark.svelte-sdid3b .hamburger-control__inner .hamburger-control__open .menu g.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9 !important}*.Light-on-Dark.svelte-sdid3b .hamburger-control__inner .hamburger-control__close .menu g.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9 !important}*.hamburger-control__close.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:none}.site-header__menu-section.svelte-sdid3b .menu .menu-item.svelte-sdid3b.svelte-sdid3b{align-items:stretch;display:flex}.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b>li.svelte-sdid3b{padding:0 !important;margin:0 12px}.site-header__row.svelte-sdid3b #primary-navigation>li a.svelte-sdid3b.svelte-sdid3b{padding-left:0;padding-right:0}.site-header__primary-menu.svelte-sdid3b .top-level-nav-link.svelte-sdid3b.svelte-sdid3b{padding:0 10px 0 10px}.header-stuck .site-header__menu-section.svelte-sdid3b .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:#16343e !important;display:inline;background-size:0 1px;background-position:0 calc(100% - 4px);background-repeat:no-repeat;transition:.25s cubic-bezier(.77,0,.175,1);transition-duration:.35s;background-image:linear-gradient(#16343e,#16343e) !important}*.Light-on-Dark.svelte-sdid3b .site-header__menu-section .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:rgb(251, 248, 233)}*.Light-on-Dark.svelte-sdid3b .header-stuck .site-header__menu-section .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:rgb(251, 248, 233) !important}.has-dropdowns.svelte-sdid3b .sub-menu li.svelte-sdid3b.svelte-sdid3b{width:100%;margin:0 0 12px;padding:0;border:0 !important;display:inline-block !important;clear:both}.screen-reader-text.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b:not(:focus):not(:active),.sr-dropdown-button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute !important;width:1px;word-wrap:normal !important}.sr-dropdown-button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{flex:0 1 auto;padding:0;margin:0;display:flex;align-items:center;width:auto;height:100%}.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before,.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before{content:initial !important;display:block !important}",se(document.head,nt)}function Pr(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar,xr,Ar;const mn=[pn,Ln],Zr=[];function bn(ra,qn){return ra[4]?0:ra[6]?1:-1}~(Jt=bn(nt))&&(ur=Zr[Jt]=mn[Jt](nt));const Qn=[kn,_n,en,xn],Cn=[];function Hn(ra,qn){return!ra[3]&&!ra[4]?0:ra[3]?!ra[5]&&!ra[6]?2:ra[5]?-1:3:1}return~(ar=Hn(nt))&&(xr=Cn[ar]=Qn[ar](nt)),{c(){$e=ee("svg"),gt=ee("defs"),Ft=ee("mask"),ht=ee("path"),Pt=ee("path"),Et=ee("g"),ur&&ur.c(),xr&&xr.c(),this.h()},l(ra){$e=me(ra,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,style:!0,class:!0},1);var qn=ue($e);gt=me(qn,"defs",{class:!0},1);var Un=ue(gt);Ft=me(Un,"mask",{id:!0,x:!0,y:!0,width:!0,height:!0,maskUnits:!0,maskContentUnits:!0,class:!0},1);var Fa=ue(Ft);ht=me(Fa,"path",{fill:!0,d:!0,class:!0},1),ue(ht).forEach(H),Pt=me(Fa,"path",{d:!0,fill:!0,class:!0},1),ue(Pt).forEach(H),Fa.forEach(H),Un.forEach(H),Et=me(qn,"g",{class:!0,mask:!0},1);var ai=ue(Et);ur&&ur.l(ai),ai.forEach(H),xr&&xr.l(qn),qn.forEach(H),this.h()},h(){W(ht,"fill","#fff"),W(ht,"d","M0 0h308v136H0z"),W(ht,"class","svelte-sdid3b"),W(Pt,"d","M115.084 31.849L61.916.809a5.66 5.66 0 00-5.832 0L2.916 31.85C1.118 32.927 0 34.839 0 36.949v62.127c0 2.109 1.118 4.021 2.916 5.1l53.168 31.039c.923.54 1.895.785 2.916.785 1.02 0 2.041-.245 2.916-.785l53.168-31.039c1.798-1.03 2.916-2.991 2.916-5.1V36.948c0-2.108-1.118-4.02-2.916-5.1z"),W(Pt,"fill","#000"),W(Pt,"class","svelte-sdid3b"),W(Ft,"id","border-mask"),W(Ft,"x","0"),W(Ft,"y","0"),W(Ft,"width","308"),W(Ft,"height","136"),W(Ft,"maskUnits","userSpaceOnUse"),W(Ft,"maskContentUnits","userSpaceOnUse"),W(Ft,"class","svelte-sdid3b"),W(gt,"class","svelte-sdid3b"),W(Et,"class","text svelte-sdid3b"),W(Et,"mask","url(#border-mask)"),W($e,"xmlns","http://www.w3.org/2000/svg"),W($e,"width","308"),W($e,"height","136"),W($e,"viewBox","0 0 308 136"),W($e,"fill","none"),Ge($e,"background-color","transparent"),W($e,"class","svelte-sdid3b")},m(ra,qn){Q(ra,$e,qn),se($e,gt),se(gt,Ft),se(Ft,ht),se(Ft,Pt),se($e,Et),~Jt&&Zr[Jt].m(Et,null),~ar&&Cn[ar].m($e,null),Ar=!0},p(ra,qn){let Un=Jt;Jt=bn(ra),Jt===Un?~Jt&&Zr[Jt].p(ra,qn):(ur&&(je(),st(Zr[Un],1,1,()=>{Zr[Un]=null}),ot()),~Jt?(ur=Zr[Jt],ur||(ur=Zr[Jt]=mn[Jt](ra),ur.c()),Je(ur,1),ur.m(Et,null)):ur=null);let Fa=ar;ar=Hn(ra),ar===Fa?~ar&&Cn[ar].p(ra,qn):(xr&&(je(),st(Cn[Fa],1,1,()=>{Cn[Fa]=null}),ot()),~ar?(xr=Cn[ar],xr||(xr=Cn[ar]=Qn[ar](ra),xr.c()),Je(xr,1),xr.m($e,null)):xr=null)},i(ra){Ar||(Je(ur),Je(xr),Ar=!0)},o(ra){st(ur),st(xr),Ar=!1},d(ra){ra&&H($e),~Jt&&Zr[Jt].d(),~ar&&Cn[ar].d()}}}function Ln(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar,xr,Ar,mn,Zr,bn,Qn,Cn,Hn,ra,qn,Un,Fa,ai,_a,Na,wi,ya,va,Ia,ui,ki,vi,Ci,Xn,oi;return{c(){$e=ee("g"),gt=ee("path"),Ft=ee("path"),ht=ee("path"),Pt=ee("path"),Et=ee("path"),Jt=ee("path"),ur=ee("path"),ar=ee("path"),xr=ee("path"),Ar=ee("path"),mn=ee("path"),Zr=ee("path"),bn=ee("path"),Qn=ee("path"),Cn=ee("path"),Hn=ee("path"),ra=ee("path"),qn=ee("path"),Un=ee("path"),Fa=ee("path"),ai=ee("path"),_a=ee("path"),Na=ee("path"),wi=ee("path"),ya=ee("path"),va=ee("path"),Ia=ee("path"),ui=ee("path"),ki=ee("path"),this.h()},l(Ti){$e=me(Ti,"g",{class:!0,fill:!0,opacity:!0,transform:!0},1);var Sa=ue($e);gt=me(Sa,"path",{class:!0,d:!0},1),ue(gt).forEach(H),Ft=me(Sa,"path",{class:!0,d:!0},1),ue(Ft).forEach(H),ht=me(Sa,"path",{class:!0,d:!0},1),ue(ht).forEach(H),Pt=me(Sa,"path",{class:!0,d:!0},1),ue(Pt).forEach(H),Et=me(Sa,"path",{class:!0,d:!0},1),ue(Et).forEach(H),Jt=me(Sa,"path",{class:!0,d:!0},1),ue(Jt).forEach(H),ur=me(Sa,"path",{class:!0,d:!0},1),ue(ur).forEach(H),ar=me(Sa,"path",{class:!0,d:!0},1),ue(ar).forEach(H),xr=me(Sa,"path",{class:!0,d:!0},1),ue(xr).forEach(H),Ar=me(Sa,"path",{class:!0,d:!0},1),ue(Ar).forEach(H),mn=me(Sa,"path",{class:!0,d:!0},1),ue(mn).forEach(H),Zr=me(Sa,"path",{class:!0,d:!0},1),ue(Zr).forEach(H),bn=me(Sa,"path",{class:!0,d:!0},1),ue(bn).forEach(H),Qn=me(Sa,"path",{class:!0,d:!0},1),ue(Qn).forEach(H),Cn=me(Sa,"path",{class:!0,d:!0},1),ue(Cn).forEach(H),Hn=me(Sa,"path",{class:!0,d:!0},1),ue(Hn).forEach(H),ra=me(Sa,"path",{class:!0,d:!0},1),ue(ra).forEach(H),qn=me(Sa,"path",{class:!0,d:!0},1),ue(qn).forEach(H),Un=me(Sa,"path",{class:!0,d:!0},1),ue(Un).forEach(H),Fa=me(Sa,"path",{class:!0,d:!0},1),ue(Fa).forEach(H),ai=me(Sa,"path",{class:!0,d:!0},1),ue(ai).forEach(H),_a=me(Sa,"path",{class:!0,d:!0},1),ue(_a).forEach(H),Na=me(Sa,"path",{class:!0,d:!0},1),ue(Na).forEach(H),wi=me(Sa,"path",{class:!0,d:!0},1),ue(wi).forEach(H),ya=me(Sa,"path",{class:!0,d:!0},1),ue(ya).forEach(H),va=me(Sa,"path",{class:!0,d:!0},1),ue(va).forEach(H),Ia=me(Sa,"path",{class:!0,d:!0},1),ue(Ia).forEach(H),ui=me(Sa,"path",{class:!0,d:!0},1),ue(ui).forEach(H),ki=me(Sa,"path",{class:!0,d:!0},1),ue(ki).forEach(H),Sa.forEach(H),this.h()},h(){W(gt,"class","st0 svelte-sdid3b"),W(gt,"d","m 163.17322,54.246193 c 2.19355,-0.865875 3.55008,-2.828524 3.55008,-5.426148 0,-3.059424 -2.30899,-5.714772 -6.14771,-5.714772 h -8.2258 v 17.981329 h 4.04074 v -6.349747 h 2.51104 l 3.86757,6.349747 h 4.73345 V 60.82684 Z m -6.78269,-7.53311 h 3.98303 c 1.55857,0 2.22241,1.067912 2.22241,2.164687 0,1.125637 -0.57725,2.280136 -2.22241,2.280136 h -3.98303 z"),W(Ft,"class","st0 svelte-sdid3b"),W(Ft,"d","m 173.53485,61.317502 c 1.76061,0 2.91511,-0.634975 3.66554,-1.529712 h 0.11545 l 0.31748,1.26995 h 3.52123 V 47.636683 h -3.95416 v 7.446522 c 0,1.616299 -1.03905,2.626486 -2.45331,2.626486 -1.55858,0 -2.25128,-0.9236 -2.25128,-2.453311 v -7.590834 h -3.95416 v 8.831921 c 0,2.943973 1.99151,4.820035 4.99321,4.820035 z"),W(ht,"class","st0 svelte-sdid3b"),W(ht,"d","m 182.91516,61.086602 h 3.6944 V 54.44823 c 0,-2.164687 1.21222,-3.405773 3.08828,-3.405773 h 1.29882 v -3.607811 h -0.9236 c -1.73175,0 -2.85739,1.010187 -3.43464,2.193549 h -0.11545 l -0.31749,-1.962649 h -3.29032 z"),W(Pt,"class","st0 svelte-sdid3b"),W(Pt,"d","m 196.04759,61.317502 c 1.67403,0 2.85739,-0.57725 3.60781,-1.443124 h 0.11545 l 0.28863,1.212224 h 3.55008 v -8.831921 c 0,-2.799661 -2.22241,-4.820035 -5.88794,-4.820035 -3.95417,0 -5.7725,2.164686 -5.7725,4.675723 h 3.6944 c 0,-0.80815 0.72156,-1.50085 1.96265,-1.50085 1.47198,0 2.04923,0.721562 2.04923,1.645162 v 0.721562 h -2.88625 c -3.69439,0 -5.39728,1.645162 -5.39728,4.127336 -0.0289,2.395586 1.64516,4.213923 4.67572,4.213923 z m 1.01019,-3.088286 c -1.18336,0 -1.78948,-0.57725 -1.78948,-1.327675 0,-0.721562 0.57725,-1.269949 1.81834,-1.269949 h 2.5399 v 0.57725 c 0,1.067912 -0.95246,2.020374 -2.56876,2.020374 z"),W(Et,"class","st0 svelte-sdid3b"),W(Et,"d","m 205.37017,61.086602 h 3.95417 V 42.066223 h -3.95417 z"),W(Jt,"class","st0 svelte-sdid3b"),W(Jt,"d","m 152.34979,85.331091 h 4.06961 V 67.349762 h -4.06961 z"),W(ur,"class","st0 svelte-sdid3b"),W(ur,"d","m 158.98816,85.331091 h 3.95416 v -7.446522 c 0,-1.616299 1.03905,-2.626486 2.45331,-2.626486 1.55857,0 2.25127,0.9236 2.25127,2.453312 v 7.619696 h 3.95416 V 76.49917 c 0,-2.943974 -1.99151,-4.820035 -4.99321,-4.820035 -1.76061,0 -2.91511,0.634974 -3.66553,1.529712 h -0.11545 l -0.31749,-1.26995 h -3.55008 v 13.392194 z"),W(ar,"class","st0 svelte-sdid3b"),W(ar,"d","m 173.39054,85.331091 h 3.95416 v -7.446522 c 0,-1.616299 1.03905,-2.626486 2.45331,-2.626486 1.55858,0 2.25128,0.9236 2.25128,2.453312 v 7.619696 h 3.95416 V 76.49917 c 0,-2.943974 -1.99152,-4.820035 -4.99321,-4.820035 -1.76062,0 -2.91512,0.634974 -3.66554,1.529712 h -0.11545 l -0.31749,-1.26995 h -3.55008 v 13.392194 z"),W(xr,"class","st0 svelte-sdid3b"),W(xr,"d","m 193.85404,85.561991 c 4.35824,0 6.6961,-2.915111 6.6961,-6.926997 0,-4.040748 -2.39559,-6.955859 -6.6961,-6.955859 -4.32937,0 -6.69609,2.915111 -6.69609,6.955859 0,4.011886 2.33786,6.926997 6.69609,6.926997 z m 0,-3.463498 c -1.6163,0 -2.68421,-1.03905 -2.68421,-3.463499 0,-2.424449 1.03905,-3.492361 2.68421,-3.492361 1.64516,0 2.68421,1.03905 2.68421,3.492361 0,2.453311 -1.03905,3.463499 -2.68421,3.463499 z"),W(Ar,"class","st0 svelte-sdid3b"),W(Ar,"d","m 204.7352,85.331091 h 5.05094 l 4.21392,-13.190156 v -0.259763 h -4.01189 l -2.65535,9.697796 h -0.11545 l -2.71307,-9.697796 h -4.06961 v 0.259763 z"),W(mn,"class","st0 svelte-sdid3b"),W(mn,"d","m 218.58919,85.561991 c 1.67403,0 2.85739,-0.57725 3.60781,-1.443124 h 0.11545 l 0.28863,1.212224 h 3.55009 V 76.49917 c 0,-2.799661 -2.22242,-4.820035 -5.88795,-4.820035 -3.95416,0 -5.7725,2.164686 -5.7725,4.675723 h 3.6944 c 0,-0.80815 0.72156,-1.50085 1.96265,-1.50085 1.47198,0 2.04923,0.721562 2.04923,1.645162 v 0.721562 h -2.88624 c -3.6944,0 -5.39729,1.645162 -5.39729,4.127336 -0.0289,2.395586 1.64516,4.213923 4.67572,4.213923 z m 0.98133,-3.088286 c -1.18336,0 -1.78948,-0.57725 -1.78948,-1.327675 0,-0.721562 0.57725,-1.269949 1.81834,-1.269949 h 2.5399 v 0.57725 c 0,1.067912 -0.9236,2.020374 -2.56876,2.020374 z"),W(Zr,"class","st0 svelte-sdid3b"),W(Zr,"d","m 233.82859,85.331091 h 2.71307 v -3.434636 h -1.52971 c -1.18336,0 -1.73175,-0.548387 -1.73175,-1.789474 v -4.820035 h 3.20374 v -3.376911 h -3.20374 v -3.521224 h -3.78099 v 3.521224 h -2.36672 v 3.376911 h 2.19355 v 5.772497 c 0,2.424449 1.3854,4.271648 4.50255,4.271648 z"),W(bn,"class","st0 svelte-sdid3b"),W(bn,"d","m 238.33113,70.293735 h 4.21393 V 66.28185 h -4.21393 z m 0.11545,15.037356 h 3.95417 V 71.910035 h -3.95417 z"),W(Qn,"class","st0 svelte-sdid3b"),W(Qn,"d","m 250.2802,85.561991 c 4.35824,0 6.6961,-2.915111 6.6961,-6.926997 0,-4.040748 -2.39559,-6.955859 -6.6961,-6.955859 -4.32937,0 -6.69609,2.915111 -6.69609,6.955859 0,4.011886 2.33786,6.926997 6.69609,6.926997 z m 0,-3.463498 c -1.61629,0 -2.68421,-1.03905 -2.68421,-3.463499 0,-2.424449 1.03905,-3.492361 2.68421,-3.492361 1.64517,0 2.68422,1.03905 2.68422,3.492361 0,2.453311 -1.03905,3.463499 -2.68422,3.463499 z"),W(Cn,"class","st0 svelte-sdid3b"),W(Cn,"d","m 258.39056,85.331091 h 3.95416 v -7.446522 c 0,-1.616299 1.03905,-2.626486 2.45332,-2.626486 1.55857,0 2.25127,0.9236 2.25127,2.453312 v 7.619696 h 3.95416 V 76.49917 c 0,-2.943974 -1.99151,-4.820035 -4.99321,-4.820035 -1.76061,0 -2.91511,0.634974 -3.66554,1.529712 h -0.0866 l -0.31749,-1.26995 h -3.55009 z"),W(Hn,"class","st0 svelte-sdid3b"),W(Hn,"d","m 158.64181,109.80648 c 5.39728,0 7.50424,-2.309 7.50424,-5.51273 0,-3.52123 -2.53989,-4.877765 -5.88794,-5.570465 L 157.8048,98.20376 c -1.67403,-0.34635 -2.02038,-0.981324 -2.02038,-1.674024 0,-0.750425 0.72156,-1.558574 2.82853,-1.558574 2.13582,0 3.03056,1.067912 3.14601,2.251274 h 4.09847 c -0.0289,-3.434636 -3.05942,-5.859085 -7.1579,-5.859085 -4.24278,0 -7.01358,2.135824 -7.01358,5.166385 0,3.434636 2.45331,4.733444 5.5416,5.397284 l 2.62648,0.57725 c 1.58744,0.34635 2.19355,0.9236 2.19355,1.90492 0,1.06792 -0.89474,1.8472 -3.37691,1.8472 -1.96265,0 -3.31919,-0.86587 -3.49236,-2.82852 h -4.09847 c 0.2309,3.86757 2.7708,6.37861 7.56197,6.37861 z"),W(ra,"class","st0 svelte-sdid3b"),W(ra,"d","m 173.47713,109.57558 h 2.71307 v -3.43464 h -1.52971 c -1.18336,0 -1.73175,-0.54838 -1.73175,-1.78947 v -4.820035 h 3.20374 v -3.376911 h -3.20374 V 92.6333 h -3.78099 v 3.521224 h -2.36672 v 3.376911 h 2.19355 v 5.772495 c 0,2.42445 1.3854,4.27165 4.50255,4.27165 z"),W(qn,"class","st0 svelte-sdid3b"),W(qn,"d","m 178.12399,109.57558 h 3.6944 v -6.63837 c 0,-2.16469 1.21222,-3.405775 3.08828,-3.405775 h 1.29881 v -3.607811 h -0.9236 c -1.73175,0 -2.85738,1.010187 -3.43463,2.193549 h -0.11545 l -0.31749,-1.962649 h -3.29032 z"),W(Un,"class","st0 svelte-sdid3b"),W(Un,"d","m 191.25642,109.80648 c 1.67402,0 2.85738,-0.57725 3.60781,-1.44312 h 0.11545 l 0.28862,1.21222 h 3.55009 v -8.83192 c 0,-2.799662 -2.22241,-4.820036 -5.88795,-4.820036 -3.95416,0 -5.77249,2.164686 -5.77249,4.675726 h 3.69439 c 0,-0.808153 0.72157,-1.500853 1.96265,-1.500853 1.47199,0 2.04924,0.721563 2.04924,1.645163 v 0.72156 h -2.88625 c -3.6944,0 -5.39728,1.64516 -5.39728,4.12734 -0.0289,2.39558 1.64516,4.21392 4.67572,4.21392 z m 1.01019,-3.08829 c -1.18337,0 -1.78948,-0.57725 -1.78948,-1.32767 0,-0.72156 0.57725,-1.29881 1.81834,-1.29881 h 2.5399 v 0.57725 c 0,1.09677 -0.95247,2.04923 -2.56876,2.04923 z"),W(Fa,"class","st0 svelte-sdid3b"),W(Fa,"d","m 206.49581,109.57558 h 2.71308 v -3.43464 h -1.52972 c -1.18336,0 -1.73175,-0.54838 -1.73175,-1.78947 v -4.820035 h 3.20374 v -3.376911 h -3.20374 V 92.6333 h -3.78098 v 3.521224 h -2.36673 v 3.376911 h 2.19355 v 5.772495 c 0,2.42445 1.3854,4.27165 4.50255,4.27165 z"),W(ai,"class","st0 svelte-sdid3b"),W(ai,"d","m 217.14607,109.80648 c 3.66554,0 5.80136,-2.13582 6.17657,-4.56027 h -3.83871 c -0.2309,0.60611 -0.86587,1.32767 -2.33786,1.32767 -1.78947,0 -2.59762,-1.09677 -2.62649,-2.68421 h 8.97624 v -1.47199 c 0,-3.63667 -2.309,-6.551781 -6.40748,-6.551781 -4.35823,0 -6.58064,3.146011 -6.58064,6.955861 0,3.89643 2.39558,6.98472 6.63837,6.98472 z m -2.59762,-8.37012 c 0.0866,-1.26995 0.80815,-2.280138 2.51103,-2.280138 1.55858,0 2.309,1.010188 2.39559,2.280138 z"),W(_a,"class","st0 svelte-sdid3b"),W(_a,"d","m 230.7403,115.69443 c 3.75212,0 6.58065,-2.10696 6.58065,-5.48388 V 96.125661 h -3.55009 l -0.40407,1.298812 h -0.11545 c -0.63498,-0.779287 -1.67403,-1.529712 -3.57895,-1.529712 -3.37691,0 -5.45501,2.915111 -5.45501,6.955859 0,4.01189 2.04924,6.927 5.45501,6.927 1.90492,0 2.91511,-0.75043 3.57895,-1.52971 h 0.11545 v 1.87606 c 0,1.21222 -0.86588,2.13582 -2.62649,2.13582 -1.24109,0 -2.13582,-0.66384 -2.22241,-1.55857 h -3.86757 c 0.0577,3.05942 2.48217,4.99321 6.08998,4.99321 z m 0.17318,-9.35145 c -1.99152,0 -2.65535,-1.58744 -2.65535,-3.4635 0,-1.87606 0.6927,-3.492358 2.65535,-3.492358 1.96264,0 2.65534,1.616298 2.65534,3.492358 0,1.87606 -0.66383,3.4635 -2.65534,3.4635 z"),W(Na,"class","st0 svelte-sdid3b"),W(Na,"d","m 238.99497,94.538224 h 4.21392 v -4.011885 h -4.21392 z m 0.14431,15.037356 h 3.95417 V 96.154524 h -3.95417 z"),W(wi,"class","st0 svelte-sdid3b"),W(wi,"d","m 250.91518,109.80648 c 3.66553,0 5.80136,-2.13582 6.17657,-4.56027 h -3.83871 c -0.2309,0.60611 -0.86587,1.32767 -2.33786,1.32767 -1.78948,0 -2.59762,-1.09677 -2.62649,-2.68421 h 8.97624 v -1.47199 c 0,-3.63667 -2.309,-6.551781 -6.40748,-6.551781 -4.35823,0 -6.58064,3.146011 -6.58064,6.955861 -0.0289,3.89643 2.39558,6.98472 6.63837,6.98472 z m -2.59762,-8.37012 c 0.0866,-1.26995 0.80814,-2.280138 2.51103,-2.280138 1.55858,0 2.309,1.010188 2.39559,2.280138 z"),W(ya,"class","st0 svelte-sdid3b"),W(ya,"d","m 263.96102,109.80648 c 3.40578,0 5.88795,-1.52971 5.88795,-4.30051 0,-2.82852 -1.93379,-3.78099 -3.98302,-4.1562 l -2.56876,-0.49066 c -0.63498,-0.11545 -1.01019,-0.40408 -1.01019,-0.923601 0,-0.519524 0.57725,-0.923599 1.55857,-0.923599 1.32768,0 1.78948,0.779287 1.76061,1.3854 h 3.89644 c 0,-2.482175 -2.10696,-4.502549 -5.59932,-4.502549 -3.60781,0 -5.51274,1.789475 -5.51274,3.983024 0,2.684215 1.96265,3.809845 4.09848,4.213925 l 1.99151,0.37521 c 0.9236,0.17317 1.35653,0.4618 1.35653,1.03905 0,0.4618 -0.49066,0.98132 -1.90492,0.98132 -1.41426,0 -1.99151,-0.75042 -1.99151,-1.50085 h -3.95416 c 0.0866,2.79967 1.78947,4.82004 5.97453,4.82004 z"),W(va,"class","st0 svelte-sdid3b"),W(va,"d","m 278.44999,109.57558 h 4.06961 V 91.594251 h -4.06961 z"),W(Ia,"class","st0 svelte-sdid3b"),W(Ia,"d","m 285.08836,109.57558 h 3.95416 v -7.44652 c 0,-1.6163 1.03905,-2.626488 2.45332,-2.626488 1.55857,0 2.25127,0.923598 2.25127,2.453308 v 7.6197 h 3.95416 v -8.83192 c 0,-2.943975 -1.99151,-4.820036 -4.99321,-4.820036 -1.76061,0 -2.91511,0.634975 -3.66554,1.529712 h -0.11545 l -0.31748,-1.298812 h -3.55009 v 13.421056 z"),W(ui,"class","st0 svelte-sdid3b"),W(ui,"d","m 305.60959,109.80648 c 3.89644,0 5.94567,-2.42445 6.11885,-5.51273 h -3.98302 c -0.11545,1.18336 -0.95247,2.04923 -2.22242,2.04923 -1.67402,0 -2.62648,-1.03905 -2.62648,-3.49236 0,-2.42445 0.95246,-3.463498 2.62648,-3.463498 1.29882,0 2.10697,0.865878 2.22242,2.049238 h 3.98302 c -0.17318,-3.11715 -2.22241,-5.512736 -6.20544,-5.512736 -4.30051,0 -6.63837,2.886248 -6.63837,6.926996 -0.0289,4.06961 2.42445,6.95586 6.72496,6.95586 z"),W(ki,"class","st0 svelte-sdid3b"),W(ki,"d","m 312.85408,109.57558 h 4.21392 v -4.01189 h -4.21392 z"),W($e,"class","text-group svelte-sdid3b"),W($e,"fill",vi=nt[0]?"#fbf8e9":"#16343e"),W($e,"opacity","1.0"),W($e,"transform","scale(0.75, 0.76) translate(9, 12)")},m(Ti,Sa){Q(Ti,$e,Sa),se($e,gt),se($e,Ft),se($e,ht),se($e,Pt),se($e,Et),se($e,Jt),se($e,ur),se($e,ar),se($e,xr),se($e,Ar),se($e,mn),se($e,Zr),se($e,bn),se($e,Qn),se($e,Cn),se($e,Hn),se($e,ra),se($e,qn),se($e,Un),se($e,Fa),se($e,ai),se($e,_a),se($e,Na),se($e,wi),se($e,ya),se($e,va),se($e,Ia),se($e,ui),se($e,ki),oi=!0},p(Ti,Sa){nt=Ti,(!oi||Sa&1&&vi!==(vi=nt[0]?"#fbf8e9":"#16343e"))&&W($e,"fill",vi)},i(Ti){oi||(lt(()=>{Xn&&Xn.end(1),Ci||(Ci=Nt($e,Gr,{duration:Gt})),Ci.start()}),oi=!0)},o(Ti){Ci&&Ci.invalidate(),Xn=nr($e,Gr,{duration:Gt}),oi=!1},d(Ti){Ti&&H($e),Ti&&Xn&&Xn.end()}}}function pn(nt){let $e,gt,Ft,ht,Pt,Et,Jt;return{c(){$e=ee("g"),gt=ee("path"),Ft=ee("path"),this.h()},l(ur){$e=me(ur,"g",{class:!0,fill:!0,opacity:!0},1);var ar=ue($e);gt=me(ar,"path",{d:!0,class:!0},1),ue(gt).forEach(H),Ft=me(ar,"path",{d:!0,class:!0},1),ue(Ft).forEach(H),ar.forEach(H),this.h()},h(){W(gt,"d","M126.863 55.99c3.466 0 5.764-2.38 6.037-5.188h-3.096c-.234 1.287-1.11 2.438-2.941 2.438-2.259 0-3.486-1.482-3.486-4.231 0-2.75 1.227-4.251 3.486-4.251 1.909 0 2.804 1.248 2.921 2.554h3.116c-.195-2.886-2.551-5.323-6.037-5.323-4.382 0-6.602 3.08-6.602 7.02 0 3.88 2.22 6.98 6.602 6.98z"),W(gt,"class","svelte-sdid3b"),W(Ft,"d","M138.625 55.99c2.785 0 4.401-1.62 4.674-3.452h-2.902c-.175.468-.662 1.014-1.772 1.014-1.363 0-1.967-.839-1.986-2.028h6.796v-1.111c0-2.77-1.753-4.973-4.868-4.973-3.311 0-4.986 2.399-4.986 5.285 0 2.924 1.831 5.264 5.044 5.264zm-1.967-6.357c.059-.975.623-1.736 1.909-1.736 1.187 0 1.752.76 1.811 1.736h-3.72zM144.5 55.814h2.999v-5.655c0-1.228.778-1.989 1.85-1.989 1.187 0 1.713.702 1.713 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.784 1.15h-.078l-.234-.974H144.5v10.198zM159.904 55.814h2.065V53.2H160.8c-.896 0-1.304-.41-1.304-1.365V48.17h2.434v-2.554h-2.434v-2.672h-2.863v2.672h-1.792v2.554h1.656v4.387c0 1.853 1.051 3.257 3.407 3.257zM167.98 55.99c2.784 0 4.401-1.62 4.673-3.452h-2.901c-.176.468-.662 1.014-1.772 1.014-1.364 0-1.967-.839-1.987-2.028h6.797v-1.111c0-2.77-1.753-4.973-4.869-4.973-3.31 0-4.985 2.399-4.985 5.285 0 2.924 1.83 5.264 5.044 5.264zm-1.967-6.357c.058-.975.623-1.736 1.908-1.736 1.188 0 1.753.76 1.811 1.736h-3.719zM173.854 55.814h2.804v-5.031c0-1.638.916-2.593 2.337-2.593h.974v-2.75h-.701c-1.305 0-2.162.76-2.61 1.658h-.078l-.233-1.482h-2.493v10.198zM125.247 74.393c3.31 0 5.082-2.223 5.082-5.265 0-3.061-1.811-5.284-5.082-5.284-3.272 0-5.083 2.223-5.083 5.284s1.772 5.265 5.083 5.265zm0-2.633c-1.227 0-2.026-.78-2.026-2.632 0-1.833.779-2.652 2.026-2.652 1.246 0 2.025.8 2.025 2.652s-.779 2.632-2.025 2.632zM131.406 74.217h2.999v-5.655c0-1.228.779-1.988 1.85-1.988 1.188 0 1.713.701 1.713 1.871v5.772h2.999V67.51c0-2.243-1.519-3.666-3.778-3.666-1.324 0-2.22.487-2.784 1.15h-.078l-.234-.975h-2.687v10.198zM155.988 69.03c1.655-.663 2.687-2.145 2.687-4.114 0-2.32-1.752-4.348-4.654-4.348h-6.231v13.65h3.057V69.4h1.908l2.941 4.816h3.583v-.195l-3.291-4.992zm-5.141-5.732h3.018c1.188 0 1.675.819 1.675 1.638 0 .858-.448 1.735-1.675 1.735h-3.018v-3.373zM163.835 74.393c1.324 0 2.22-.488 2.784-1.15h.078l.234.974h2.687V64.02h-2.999v5.655c0 1.228-.779 1.989-1.85 1.989-1.188 0-1.713-.702-1.713-1.872v-5.772h-2.999v6.708c0 2.242 1.519 3.666 3.778 3.666zM170.944 74.217h2.805v-5.03c0-1.638.915-2.594 2.337-2.594h.973v-2.75h-.701c-1.305 0-2.161.761-2.609 1.658h-.078l-.234-1.482h-2.493v10.198zM180.916 74.393c1.265 0 2.161-.449 2.726-1.092h.078l.214.916h2.687V67.51c0-2.126-1.674-3.666-4.459-3.666-2.999 0-4.382 1.638-4.382 3.548h2.805c0-.623.545-1.13 1.48-1.13 1.11 0 1.557.546 1.557 1.248v.545h-2.181c-2.804 0-4.089 1.248-4.089 3.14 0 1.813 1.266 3.198 3.564 3.198zm.759-2.34c-.896 0-1.363-.43-1.363-1.014 0-.546.428-.975 1.383-.975h1.927v.429c0 .838-.72 1.56-1.947 1.56zM187.985 74.217h2.999V59.788h-2.999v14.43zM121.04 92.62h3.077V78.972h-3.077v13.65zM126.062 92.62h2.999v-5.654c0-1.229.779-1.989 1.85-1.989 1.188 0 1.713.702 1.713 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.784 1.15h-.078l-.234-.974h-2.687V92.62zM136.988 92.62h2.999v-5.654c0-1.229.779-1.989 1.85-1.989 1.188 0 1.713.702 1.713 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.784 1.15h-.078l-.234-.974h-2.687V92.62zM152.509 92.796c3.311 0 5.083-2.223 5.083-5.265 0-3.061-1.811-5.284-5.083-5.284-3.271 0-5.082 2.223-5.082 5.284 0 3.062 1.772 5.265 5.082 5.265zm0-2.632c-1.226 0-2.025-.78-2.025-2.633 0-1.833.779-2.652 2.025-2.652 1.247 0 2.026.8 2.026 2.652 0 1.853-.779 2.633-2.026 2.633zM160.742 92.62h3.836l3.194-10.002v-.195h-3.038l-2.006 7.37h-.078l-2.064-7.37h-3.077v.195l3.233 10.003zM171.245 92.796c1.266 0 2.161-.449 2.726-1.092h.078l.214.917h2.688v-6.708c0-2.126-1.675-3.666-4.46-3.666-2.999 0-4.381 1.638-4.381 3.549h2.804c0-.624.545-1.131 1.48-1.131 1.11 0 1.558.546 1.558 1.248v.546h-2.181c-2.805 0-4.09 1.248-4.09 3.14 0 1.813 1.266 3.197 3.564 3.197zm.759-2.34c-.896 0-1.363-.429-1.363-1.014 0-.546.429-.975 1.383-.975h1.928v.43c0 .838-.721 1.56-1.948 1.56zM182.793 92.62h2.064v-2.612h-1.168c-.896 0-1.305-.41-1.305-1.365v-3.666h2.434v-2.554h-2.434V79.75h-2.862v2.672h-1.792v2.554h1.655v4.387c0 1.853 1.052 3.257 3.408 3.257zM186.214 81.214h3.194v-3.042h-3.194v3.042zm.097 11.407h2.999V82.423h-2.999V92.62zM195.272 92.796c3.311 0 5.083-2.223 5.083-5.265 0-3.061-1.811-5.284-5.083-5.284-3.272 0-5.083 2.223-5.083 5.284 0 3.062 1.773 5.265 5.083 5.265zm0-2.632c-1.227 0-2.025-.78-2.025-2.633 0-1.833.779-2.652 2.025-2.652s2.025.8 2.025 2.652c0 1.853-.779 2.633-2.025 2.633zM201.431 92.62h2.999v-5.654c0-1.229.779-1.989 1.85-1.989 1.188 0 1.714.702 1.714 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.785 1.15h-.078l-.234-.974h-2.687V92.62z"),W(Ft,"class","svelte-sdid3b"),W($e,"class","text-group svelte-sdid3b"),W($e,"fill",ht=nt[0]?"#fbf8e9":"#16343e"),W($e,"opacity","1.0")},m(ur,ar){Q(ur,$e,ar),se($e,gt),se($e,Ft),Jt=!0},p(ur,ar){nt=ur,(!Jt||ar&1&&ht!==(ht=nt[0]?"#fbf8e9":"#16343e"))&&W($e,"fill",ht)},i(ur){Jt||(lt(()=>{Et&&Et.end(1),Pt||(Pt=Nt($e,Gr,{duration:Gt})),Pt.start()}),Jt=!0)},o(ur){Pt&&Pt.invalidate(),Et=nr($e,Gr,{duration:Gt}),Jt=!1},d(ur){ur&&H($e),ur&&Et&&Et.end()}}}function xn(nt){let $e,gt,Ft,ht,Pt,Et,Jt;return{c(){$e=ee("g"),gt=ee("path"),ht=ee("path"),this.h()},l(ur){$e=me(ur,"g",{opacity:!0,transform:!0,class:!0},1);var ar=ue($e);gt=me(ar,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(gt).forEach(H),ht=me(ar,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(ht).forEach(H),ar.forEach(H),this.h()},h(){W(gt,"fill","none"),W(gt,"style",Ft=(nt[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",jn),W(gt,"class","svelte-sdid3b"),W(ht,"fill","none"),W(ht,"style",Pt=(nt[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(ht,"d",Nn),W(ht,"class","svelte-sdid3b"),W($e,"opacity","0.75"),W($e,"transform","scale(0.75, 0.76) translate(9, 12)"),W($e,"class","svelte-sdid3b")},m(ur,ar){Q(ur,$e,ar),se($e,gt),se($e,ht),Jt=!0},p(ur,ar){nt=ur,(!Jt||ar&1&&Ft!==(Ft=(nt[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",Ft),(!Jt||ar&1&&Pt!==(Pt=(nt[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(ht,"style",Pt)},i(ur){Jt||(Et&&Et.end(1),Jt=!0)},o(ur){Et=nr($e,Gr,{duration:Gt}),Jt=!1},d(ur){ur&&H($e),ur&&Et&&Et.end()}}}function en(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar;return{c(){$e=ee("g"),gt=ee("path"),Pt=ee("path"),this.h()},l(xr){$e=me(xr,"g",{opacity:!0,transform:!0,class:!0},1);var Ar=ue($e);gt=me(Ar,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(H),Pt=me(Ar,"path",{style:!0,d:!0,class:!0},1),ue(Pt).forEach(H),Ar.forEach(H),this.h()},h(){W(gt,"style",Ft=(nt[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",jn),W(gt,"class","svelte-sdid3b"),W(Pt,"style",Et=(nt[0]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"),W(Pt,"d",Nn),W(Pt,"class","svelte-sdid3b"),W($e,"opacity","0.5"),W($e,"transform","scale(0.75, 0.76) translate(9, 12)"),W($e,"class","svelte-sdid3b")},m(xr,Ar){Q(xr,$e,Ar),se($e,gt),se($e,Pt),ar=!0},p(xr,Ar){nt=xr,(!ar||Ar&1&&Ft!==(Ft=(nt[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",Ft),(!ar||Ar&1&&Et!==(Et=(nt[0]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"))&&W(Pt,"style",Et)},i(xr){ar||(ht||lt(()=>{ht=Nt(gt,Mn,{duration:Gt,delay:vt,easing:_r}),ht.start()}),Jt||lt(()=>{Jt=Nt(Pt,Fr,{duration:vt}),Jt.start()}),ur&&ur.end(1),ar=!0)},o(xr){ur=nr($e,Gr,{duration:Gt}),ar=!1},d(xr){xr&&H($e),xr&&ur&&ur.end()}}}function _n(nt){let $e,gt,Ft,ht,Pt,Et,Jt;return{c(){$e=ee("g"),gt=ee("path"),ht=ee("path"),this.h()},l(ur){$e=me(ur,"g",{opacity:!0,class:!0},1);var ar=ue($e);gt=me(ar,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(gt).forEach(H),ht=me(ar,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(ht).forEach(H),ar.forEach(H),this.h()},h(){W(gt,"fill","none"),W(gt,"style",Ft=(nt[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",Tn),W(gt,"class","svelte-sdid3b"),W(ht,"fill","none"),W(ht,"style",Pt=(nt[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(ht,"d",Wn),W(ht,"class","svelte-sdid3b"),W($e,"opacity","0.75"),W($e,"class","svelte-sdid3b")},m(ur,ar){Q(ur,$e,ar),se($e,gt),se($e,ht),Jt=!0},p(ur,ar){nt=ur,(!Jt||ar&1&&Ft!==(Ft=(nt[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",Ft),(!Jt||ar&1&&Pt!==(Pt=(nt[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(ht,"style",Pt)},i(ur){Jt||(Et&&Et.end(1),Jt=!0)},o(ur){Et=nr($e,Gr,{duration:Gt}),Jt=!1},d(ur){ur&&H($e),ur&&Et&&Et.end()}}}function kn(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar;return{c(){$e=ee("g"),gt=ee("path"),Pt=ee("path"),this.h()},l(xr){$e=me(xr,"g",{opacity:!0,class:!0},1);var Ar=ue($e);gt=me(Ar,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(H),Pt=me(Ar,"path",{style:!0,d:!0,class:!0},1),ue(Pt).forEach(H),Ar.forEach(H),this.h()},h(){W(gt,"style",Ft=(nt[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",Tn),W(gt,"class","svelte-sdid3b"),W(Pt,"style",Et=(nt[0]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"),W(Pt,"d",Wn),W(Pt,"class","svelte-sdid3b"),W($e,"opacity","0.5"),W($e,"class","svelte-sdid3b")},m(xr,Ar){Q(xr,$e,Ar),se($e,gt),se($e,Pt),ar=!0},p(xr,Ar){nt=xr,(!ar||Ar&1&&Ft!==(Ft=(nt[0]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",Ft),(!ar||Ar&1&&Et!==(Et=(nt[0]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"))&&W(Pt,"style",Et)},i(xr){ar||(ht||lt(()=>{ht=Nt(gt,Mn,{duration:Gt,delay:vt,easing:_r}),ht.start()}),Jt||lt(()=>{Jt=Nt(Pt,Fr,{duration:vt}),Jt.start()}),ur&&ur.end(1),ar=!0)},o(xr){ur=nr($e,Gr,{duration:Gt}),ar=!1},d(xr){xr&&H($e),xr&&ur&&ur.end()}}}function ln(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar,xr,Ar,mn,Zr,bn,Qn,Cn,Hn,ra,qn,Un,Fa,ai,_a,Na,wi,ya,va,Ia,ui,ki,vi,Ci,Xn,oi,Ti,Sa,_o,Zi,qi,zs,Gi,Ni,yo,ts,ls,Ss,Ws,so,Xa,hi,Oo,lo,Eo,Ki,si,eo,xo,Oa,Da,Za,aa,Ua,mi,pi,wo,Xo,ji,Ui,ps,ds,or,To,co,zi,Si,Es,yl,ys,rs,Ys,Cs,ns,Sl,El,to,xl,Eu,fo=!!nt[2]&&Pr(nt);return{c(){$e=re("header"),gt=re("div"),Ft=re("div"),ht=re("div"),Pt=re("div"),Et=ee("svg"),Jt=ee("path"),ar=fe(),fo&&fo.c(),xr=fe(),Ar=re("nav"),mn=re("ul"),Zr=re("li"),bn=re("a"),Qn=ae("About"),Cn=re("button"),Hn=re("span"),ra=ae("Show submenu for \u201CAbout\u201D"),qn=fe(),Un=re("li"),Fa=re("a"),ai=ae("Apps & Data"),_a=re("button"),Na=re("span"),wi=ae("Show submenu for \u201CApps & Data\u201D"),ya=fe(),va=re("li"),Ia=re("a"),ui=ae("Docs & How To's"),ki=re("button"),vi=re("span"),Ci=ae("Show submenu for \u201CDocs & How To's\u201D"),Xn=fe(),oi=re("li"),Ti=re("a"),Sa=ae("Project Mgmt"),_o=re("button"),Zi=re("span"),qi=ae("Show submenu for \u201CProject Mgmt\u201D"),zs=fe(),Gi=re("li"),Ni=re("a"),yo=ae("Past Work (Gallery)"),ts=re("button"),ls=re("span"),Ss=ae("Show submenu for \u201CPast Work (Gallery)\u201D"),Ws=fe(),so=re("div"),Xa=re("a"),hi=re("span"),Oo=re("span"),lo=re("span"),Eo=ae("Site Menu"),Ki=fe(),si=re("span"),eo=re("span"),xo=ae("Close Menu"),Oa=fe(),Da=re("span"),Za=re("span"),aa=re("span"),Ua=ee("svg"),mi=ee("g"),pi=ee("rect"),wo=ee("rect"),Xo=ee("rect"),Ui=ee("defs"),ps=ee("clipPath"),ds=ee("path"),or=fe(),To=re("span"),co=ee("svg"),zi=ee("path"),Cs=fe(),ns=re("br"),Sl=fe(),El=re("br"),this.h()},l(Xi){$e=me(Xi,"HEADER",{id:!0,class:!0,style:!0});var Do=ue($e);gt=me(Do,"DIV",{class:!0});var Cl=ue(gt);Ft=me(Cl,"DIV",{class:!0});var J=ue(Ft);ht=me(J,"DIV",{class:!0});var ne=ue(ht);Pt=me(ne,"DIV",{class:!0});var q=ue(Pt);Et=me(q,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,style:!0},1);var ve=ue(Et);Jt=me(ve,"path",{class:!0,fill:!0,d:!0},1),ue(Jt).forEach(H),ve.forEach(H),ar=Me(q),fo&&fo.l(q),q.forEach(H),xr=Me(ne),Ar=me(ne,"NAV",{class:!0,"data-itemcount":!0,"data-textlength":!0,role:!0,"aria-label":!0});var Se=ue(Ar);mn=me(Se,"UL",{id:!0,class:!0});var Oe=ue(mn);Zr=me(Oe,"LI",{id:!0,class:!0,"aria-haspopup":!0});var Xe=ue(Zr);bn=me(Xe,"A",{href:!0,role:!0,class:!0});var ut=ue(bn);Qn=be(ut,"About"),ut.forEach(H),Cn=me(Xe,"BUTTON",{class:!0,"aria-haspopup":!0});var yt=ue(Cn);Hn=me(yt,"SPAN",{class:!0});var jt=ue(Hn);ra=be(jt,"Show submenu for \u201CAbout\u201D"),jt.forEach(H),yt.forEach(H),Xe.forEach(H),qn=Me(Oe),Un=me(Oe,"LI",{id:!0,class:!0,"aria-haspopup":!0});var sr=ue(Un);Fa=me(sr,"A",{href:!0,role:!0,class:!0});var pr=ue(Fa);ai=be(pr,"Apps & Data"),pr.forEach(H),_a=me(sr,"BUTTON",{class:!0,"aria-haspopup":!0});var br=ue(_a);Na=me(br,"SPAN",{class:!0});var Lr=ue(Na);wi=be(Lr,"Show submenu for \u201CApps & Data\u201D"),Lr.forEach(H),br.forEach(H),sr.forEach(H),ya=Me(Oe),va=me(Oe,"LI",{id:!0,class:!0,"aria-haspopup":!0});var Dr=ue(va);Ia=me(Dr,"A",{href:!0,role:!0,class:!0});var jr=ue(Ia);ui=be(jr,"Docs & How To's"),jr.forEach(H),ki=me(Dr,"BUTTON",{class:!0,"aria-haspopup":!0});var Sr=ue(ki);vi=me(Sr,"SPAN",{class:!0});var Ur=ue(vi);Ci=be(Ur,"Show submenu for \u201CDocs & How To's\u201D"),Ur.forEach(H),Sr.forEach(H),Dr.forEach(H),Xn=Me(Oe),oi=me(Oe,"LI",{id:!0,class:!0,"aria-haspopup":!0});var $r=ue(oi);Ti=me($r,"A",{href:!0,role:!0,class:!0});var cn=ue(Ti);Sa=be(cn,"Project Mgmt"),cn.forEach(H),_o=me($r,"BUTTON",{class:!0,"aria-haspopup":!0});var In=ue(_o);Zi=me(In,"SPAN",{class:!0});var An=ue(Zi);qi=be(An,"Show submenu for \u201CProject Mgmt\u201D"),An.forEach(H),In.forEach(H),$r.forEach(H),zs=Me(Oe),Gi=me(Oe,"LI",{id:!0,class:!0,"aria-haspopup":!0});var Dn=ue(Gi);Ni=me(Dn,"A",{href:!0,role:!0,class:!0});var Jn=ue(Ni);yo=be(Jn,"Past Work (Gallery)"),Jn.forEach(H),ts=me(Dn,"BUTTON",{class:!0,"aria-haspopup":!0});var ha=ue(ts);ls=me(ha,"SPAN",{class:!0});var la=ue(ls);Ss=be(la,"Show submenu for \u201CPast Work (Gallery)\u201D"),la.forEach(H),ha.forEach(H),Dn.forEach(H),Oe.forEach(H),Se.forEach(H),Ws=Me(ne),so=me(ne,"DIV",{class:!0});var wa=ue(so);Xa=me(wa,"A",{href:!0,class:!0,role:!0,labelledby:!0});var Ea=ue(Xa);hi=me(Ea,"SPAN",{id:!0,class:!0});var ii=ue(hi);Oo=me(ii,"SPAN",{class:!0});var ti=ue(Oo);lo=me(ti,"SPAN",{class:!0});var Oi=ue(lo);Eo=be(Oi,"Site Menu"),Oi.forEach(H),ti.forEach(H),Ki=Me(ii),si=me(ii,"SPAN",{class:!0,"aria-hidden":!0});var Va=ue(si);eo=me(Va,"SPAN",{class:!0});var gi=ue(eo);xo=be(gi,"Close Menu"),gi.forEach(H),Va.forEach(H),ii.forEach(H),Oa=Me(Ea),Da=me(Ea,"SPAN",{class:!0,"aria-hidden":!0});var Ri=ue(Da);Za=me(Ri,"SPAN",{class:!0});var ci=ue(Za);aa=me(ci,"SPAN",{class:!0,"aria-hidden":!0});var li=ue(aa);Ua=me(li,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var Li=ue(Ua);mi=me(Li,"g",{"clip-path":!0,fill:!0,class:!0},1);var ni=ue(mi);pi=me(ni,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(pi).forEach(H),wo=me(ni,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(wo).forEach(H),Xo=me(ni,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(Xo).forEach(H),ni.forEach(H),Ui=me(Li,"defs",{class:!0},1);var Ha=ue(Ui);ps=me(Ha,"clipPath",{id:!0,class:!0},1);var as=ue(ps);ds=me(as,"path",{fill:!0,transform:!0,d:!0,class:!0},1),ue(ds).forEach(H),as.forEach(H),Ha.forEach(H),Li.forEach(H),li.forEach(H),or=Me(ci),To=me(ci,"SPAN",{class:!0,"aria-hidden":!0});var Fo=ue(To);co=me(Fo,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var bo=ue(co);zi=me(bo,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0},1),ue(zi).forEach(H),bo.forEach(H),Fo.forEach(H),ci.forEach(H),Ri.forEach(H),Ea.forEach(H),wa.forEach(H),ne.forEach(H),J.forEach(H),Cl.forEach(H),Do.forEach(H),Cs=Me(Xi),ns=me(Xi,"BR",{class:!0}),Sl=Me(Xi),El=me(Xi,"BR",{class:!0}),this.h()},h(){W(Jt,"class","border svelte-sdid3b"),W(Jt,"fill",ur=nt[0]?"#26535c":"#fbf8e9"),W(Jt,"d","M115.084 31.849L61.916.809a5.66 5.66 0 00-5.832 0L2.916 31.85C1.118 32.927 0 34.839 0 36.949v62.127c0 2.109 1.118 4.021 2.916 5.1l53.168 31.039c.923.54 1.895.785 2.916.785 1.02 0 2.041-.245 2.916-.785l53.168-31.039c1.798-1.03 2.916-2.991 2.916-5.1V36.948c0-2.108-1.118-4.02-2.916-5.1z"),W(Et,"class","logo-border svelte-sdid3b"),W(Et,"xmlns","http://www.w3.org/2000/svg"),W(Et,"width","308"),W(Et,"height","136"),W(Et,"viewBox","0 0 308 136"),W(Et,"fill","none"),Ge(Et,"background-color","transparent"),W(Pt,"class","site-header__item site-header__main-logo col-auto svelte-sdid3b"),W(bn,"href","#about/"),W(bn,"role","menuitem"),W(bn,"class"," top-level-nav-link svelte-sdid3b"),W(Hn,"class","screen-reader-text svelte-sdid3b"),W(Cn,"class","sr-dropdown-button has-dropdown-trigger-indictator dropdown-trigger hover-target svelte-sdid3b"),W(Cn,"aria-haspopup","true"),W(Zr,"id","menu-item-12"),W(Zr,"class","menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-12 col-auto top-level-menu-item svelte-sdid3b"),W(Zr,"aria-haspopup","true"),W(Fa,"href","#applications/"),W(Fa,"role","menuitem"),W(Fa,"class"," top-level-nav-link svelte-sdid3b"),W(Na,"class","screen-reader-text svelte-sdid3b"),W(_a,"class","sr-dropdown-button has-dropdown-trigger-indictator dropdown-trigger hover-target svelte-sdid3b"),W(_a,"aria-haspopup","true"),W(Un,"id","menu-item-13"),W(Un,"class","menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-13 col-auto top-level-menu-item svelte-sdid3b"),W(Un,"aria-haspopup","true"),W(Ia,"href","#documentation/"),W(Ia,"role","menuitem"),W(Ia,"class"," top-level-nav-link svelte-sdid3b"),W(vi,"class","screen-reader-text svelte-sdid3b"),W(ki,"class","sr-dropdown-button has-dropdown-trigger-indictator dropdown-trigger hover-target svelte-sdid3b"),W(ki,"aria-haspopup","true"),W(va,"id","menu-item-14"),W(va,"class","menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-14 col-auto top-level-menu-item svelte-sdid3b"),W(va,"aria-haspopup","true"),W(Ti,"href","#project/"),W(Ti,"role","menuitem"),W(Ti,"class"," top-level-nav-link svelte-sdid3b"),W(Zi,"class","screen-reader-text svelte-sdid3b"),W(_o,"class","sr-dropdown-button has-dropdown-trigger-indictator dropdown-trigger hover-target svelte-sdid3b"),W(_o,"aria-haspopup","true"),W(oi,"id","menu-item-15"),W(oi,"class","menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-14 col-auto top-level-menu-item svelte-sdid3b"),W(oi,"aria-haspopup","true"),W(Ni,"href","#past/"),W(Ni,"role","menuitem"),W(Ni,"class"," top-level-nav-link svelte-sdid3b"),W(ls,"class","screen-reader-text svelte-sdid3b"),W(ts,"class","sr-dropdown-button has-dropdown-trigger-indictator dropdown-trigger hover-target svelte-sdid3b"),W(ts,"aria-haspopup","true"),W(Gi,"id","menu-item-16"),W(Gi,"class","menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-14 col-auto top-level-menu-item svelte-sdid3b"),W(Gi,"aria-haspopup","true"),W(mn,"id","primary-navigation"),W(mn,"class","row menu justify-content-start site-header__item_inner has-dropdowns has-aria-dropdowns svelte-sdid3b"),W(Ar,"class","site-header__item site-header__menu-section col-auto site-header__primary-menu  over-four-items over-fourty-characters svelte-sdid3b"),W(Ar,"data-itemcount","5"),W(Ar,"data-textlength","42"),W(Ar,"role","navigation"),W(Ar,"aria-label","Primary Navigation"),W(lo,"class","screen-reader-text svelte-sdid3b"),W(Oo,"class","hamburger-control__open-label svelte-sdid3b"),W(eo,"class","screen-reader-text svelte-sdid3b"),W(si,"class","hamburger-control__close-label svelte-sdid3b"),W(si,"aria-hidden","true"),W(hi,"id","mm-label"),W(hi,"class","hamburger-control__label svelte-sdid3b"),W(pi,"y",".5"),W(pi,"width","20"),W(pi,"height","3"),W(pi,"rx","1.5"),W(pi,"class","svelte-sdid3b"),W(wo,"y","7.5"),W(wo,"width","20"),W(wo,"height","3"),W(wo,"rx","1.5"),W(wo,"class","svelte-sdid3b"),W(Xo,"y","14.5"),W(Xo,"width","20"),W(Xo,"height","3"),W(Xo,"rx","1.5"),W(Xo,"class","svelte-sdid3b"),W(mi,"clip-path","url(#clip0)"),W(mi,"fill",ji=nt[0]?"#fbf8e9":"#16343e"),W(mi,"class","svelte-sdid3b"),W(ds,"fill","#fff"),W(ds,"transform","translate(0 .5)"),W(ds,"d","M0 0h20v17H0z"),W(ds,"class","svelte-sdid3b"),W(ps,"id","clip0"),W(ps,"class","svelte-sdid3b"),W(Ui,"class","svelte-sdid3b"),W(Ua,"class","menu svelte-sdid3b"),W(Ua,"width","20"),W(Ua,"height","18"),W(Ua,"viewBox","0 0 20 18"),W(Ua,"fill","none"),W(Ua,"xmlns","http://www.w3.org/2000/svg"),W(aa,"class","hamburger-control__open svelte-sdid3b"),W(aa,"aria-hidden","true"),W(zi,"d","M3.304 20.801L11 13.104l7.698 7.697c.296.297.671.449 1.052.449.38 0 .756-.152 1.052-.449a1.459 1.459 0 000-2.104L13.104 11 20.8 3.303a1.459 1.459 0 000-2.104 1.46 1.46 0 00-2.104 0h0L11 8.898 3.301 1.2a1.46 1.46 0 00-2.103 0h0a1.46 1.46 0 000 2.104L8.834 11 1.2 18.697s0 0 0 0a1.458 1.458 0 00-.012 2.092c.255.326.713.461 1.064.461.38 0 .756-.152 1.052-.449h0z"),W(zi,"fill",Si=nt[0]?"#fbf8e9":"#16343e"),W(zi,"stroke","#16343e"),W(zi,"stroke-width",".5"),W(zi,"class","svelte-sdid3b"),W(co,"class","menu-close svelte-sdid3b"),W(co,"width","22"),W(co,"height","22"),W(co,"viewBox","0 0 22 22"),W(co,"fill","none"),W(co,"xmlns","http://www.w3.org/2000/svg"),W(To,"class","hamburger-control__close svelte-sdid3b"),W(To,"aria-hidden","true"),W(Za,"class","hamburger-control__inner svelte-sdid3b"),W(Da,"class",Es=B(nt[0]?"Light-on-Dark hamburger-control":"hamburger-control")+" svelte-sdid3b"),W(Da,"aria-hidden","true"),W(Xa,"href","#primary-footer-menu-section"),W(Xa,"class","mobile-menu-toggle__control js-mobile-menu-control js-open-main-menu svelte-sdid3b"),W(Xa,"role","button"),W(Xa,"labelledby","mm-label"),W(so,"class","site-header__item mobile-menu-toggle col svelte-sdid3b"),W(ht,"class",yl=B(nt[0]?"Light-on-Dark row site-header__row justify-content-between align-items-center":"row site-header__row justify-content-between align-items-center")+" svelte-sdid3b"),W(Ft,"class",ys=B(nt[0]?"Light-on-Dark container":"container")+" svelte-sdid3b"),W(gt,"class",rs=B(nt[0]?"Light-on-Dark site-header__inner":"site-header__inner")+" svelte-sdid3b"),W($e,"id","desktop-header"),W($e,"class",Ys=B(nt[0]?"Light-on-Dark site-header":"site-header")+" svelte-sdid3b"),Ge($e,"position","fixed"),Ge($e,"max-width","100%"),Ge($e,"max-height","108px"),Ge($e,"height","75px"),Ge($e,"z-index","1"),W(ns,"class","svelte-sdid3b"),W(El,"class","svelte-sdid3b")},m(Xi,Do){Q(Xi,$e,Do),se($e,gt),se(gt,Ft),se(Ft,ht),se(ht,Pt),se(Pt,Et),se(Et,Jt),se(Pt,ar),fo&&fo.m(Pt,null),se(ht,xr),se(ht,Ar),se(Ar,mn),se(mn,Zr),se(Zr,bn),se(bn,Qn),se(Zr,Cn),se(Cn,Hn),se(Hn,ra),se(mn,qn),se(mn,Un),se(Un,Fa),se(Fa,ai),se(Un,_a),se(_a,Na),se(Na,wi),se(mn,ya),se(mn,va),se(va,Ia),se(Ia,ui),se(va,ki),se(ki,vi),se(vi,Ci),se(mn,Xn),se(mn,oi),se(oi,Ti),se(Ti,Sa),se(oi,_o),se(_o,Zi),se(Zi,qi),se(mn,zs),se(mn,Gi),se(Gi,Ni),se(Ni,yo),se(Gi,ts),se(ts,ls),se(ls,Ss),se(ht,Ws),se(ht,so),se(so,Xa),se(Xa,hi),se(hi,Oo),se(Oo,lo),se(lo,Eo),se(hi,Ki),se(hi,si),se(si,eo),se(eo,xo),se(Xa,Oa),se(Xa,Da),se(Da,Za),se(Za,aa),se(aa,Ua),se(Ua,mi),se(mi,pi),se(mi,wo),se(mi,Xo),se(Ua,Ui),se(Ui,ps),se(ps,ds),se(Za,or),se(Za,To),se(To,co),se(co,zi),Q(Xi,Cs,Do),Q(Xi,ns,Do),Q(Xi,Sl,Do),Q(Xi,El,Do),to=!0,xl||(Eu=pe(bn,"click",nt[7]),xl=!0)},p(Xi,[Do]){(!to||Do&1&&ur!==(ur=Xi[0]?"#26535c":"#fbf8e9"))&&W(Jt,"fill",ur),Xi[2]?fo?(fo.p(Xi,Do),Do&4&&Je(fo,1)):(fo=Pr(Xi),fo.c(),Je(fo,1),fo.m(Pt,null)):fo&&(je(),st(fo,1,1,()=>{fo=null}),ot()),(!to||Do&1&&ji!==(ji=Xi[0]?"#fbf8e9":"#16343e"))&&W(mi,"fill",ji),(!to||Do&1&&Si!==(Si=Xi[0]?"#fbf8e9":"#16343e"))&&W(zi,"fill",Si),(!to||Do&1&&Es!==(Es=B(Xi[0]?"Light-on-Dark hamburger-control":"hamburger-control")+" svelte-sdid3b"))&&W(Da,"class",Es),(!to||Do&1&&yl!==(yl=B(Xi[0]?"Light-on-Dark row site-header__row justify-content-between align-items-center":"row site-header__row justify-content-between align-items-center")+" svelte-sdid3b"))&&W(ht,"class",yl),(!to||Do&1&&ys!==(ys=B(Xi[0]?"Light-on-Dark container":"container")+" svelte-sdid3b"))&&W(Ft,"class",ys),(!to||Do&1&&rs!==(rs=B(Xi[0]?"Light-on-Dark site-header__inner":"site-header__inner")+" svelte-sdid3b"))&&W(gt,"class",rs),(!to||Do&1&&Ys!==(Ys=B(Xi[0]?"Light-on-Dark site-header":"site-header")+" svelte-sdid3b"))&&W($e,"class",Ys)},i(Xi){to||(Je(fo),to=!0)},o(Xi){st(fo),to=!1},d(Xi){Xi&&H($e),fo&&fo.d(),Xi&&H(Cs),Xi&&H(ns),Xi&&H(Sl),Xi&&H(El),xl=!1,Eu()}}}let vt=1500,Gt=500,fr=2500;function Cr(nt,$e,gt){let{light_on_dark:Ft=!1}=$e,ht=!1,{sidebarFunction:Pt=function(Zr){console.log("showSidebar",Zr),ht=!ht,Zr.target.data={action:"show",set:ht,path:"target"in Zr&&"hash"in Zr.target?Zr.target.hash:""},Zr.target.dispatchEvent(new CustomEvent("sidebar",Zr))}}=$e,Et=!1,Jt=!1,ur=!1,ar=!0,xr=!1,Ar=function(Zr){if(!!Zr&&!Jt&&!ur)return gt(2,Et=!0),setTimeout(()=>{gt(4,ur=!0),gt(6,xr=!1),setTimeout(()=>{gt(3,Jt=!Jt)},fr),setTimeout(()=>{gt(5,ar=!ar),setTimeout(()=>{gt(6,xr=!0),gt(4,ur=!1),Et&&setTimeout(()=>{gt(3,Jt=!Jt),gt(5,ar=!ar),Ar(Zr)},fr)},vt+Gt)},fr-Gt)},vt+Gt),!0;if(!Et)return gt(4,ur=!1),gt(6,xr=!1),!1};Wt(function(){console.log("light_on_dark",Ft);const Zr=(this||window).document.body;(this||window).document.getElementById("desktop-header"),Zr.style.maxHeight="348px",gt(2,Et=!0)});const mn=Zr=>Pt(Zr);return nt.$$set=Zr=>{"light_on_dark"in Zr&&gt(0,Ft=Zr.light_on_dark),"sidebarFunction"in Zr&&gt(1,Pt=Zr.sidebarFunction)},nt.$$.update=()=>{nt.$$.dirty&4&&Ar(Et)},[Ft,Pt,Et,Jt,ur,ar,xr,mn]}class Wr extends tr{constructor($e){super(),document.getElementById("svelte-sdid3b-style")||Nr(),Bt(this,$e,Cr,ln,F,{light_on_dark:0,sidebarFunction:1})}}function Vr(){var nt=re("style");nt.id="svelte-shzkbs-style",nt.textContent="button.sidebar-toggle.svelte-shzkbs{position:fixed;bottom:0;left:0;right:auto;word-break:keep-all}",se(document.head,nt)}function Qr(nt){let $e;const gt=nt[6].default,Ft=G(gt,nt,nt[5],null);return{c(){Ft&&Ft.c()},l(ht){Ft&&Ft.l(ht)},m(ht,Pt){Ft&&Ft.m(ht,Pt),$e=!0},p(ht,Pt){Ft&&Ft.p&&Pt&32&&z(Ft,gt,ht,ht[5],Pt,null,null)},i(ht){$e||(Je(Ft,ht),$e=!0)},o(ht){st(Ft,ht),$e=!1},d(ht){Ft&&Ft.d(ht)}}}function Hr(nt){let $e,gt,Ft,ht;return{c(){$e=re("button"),gt=ae(nt[1]),this.h()},l(Pt){$e=me(Pt,"BUTTON",{class:!0});var Et=ue($e);gt=be(Et,nt[1]),Et.forEach(H),this.h()},h(){W($e,"class","sidebar-toggle svelte-shzkbs")},m(Pt,Et){Q(Pt,$e,Et),se($e,gt),Ft||(ht=pe($e,"click",nt[8]),Ft=!0)},p(Pt,Et){Et&2&&Pe(gt,Pt[1])},d(Pt){Pt&&H($e),Ft=!1,ht()}}}function En(nt){let $e,gt,Ft,ht,Pt,Et;$e=new Wr({props:{light_on_dark:nt[0]!==null&&"light_on_dark"in nt[0]?!!nt[0].light_on_dark&&nt[0].light_on_dark!=="false":!1,sidebarFunction:nt[3]}});let Jt=nt[2]==null&&Qr(nt),ur=nt[0]!==null&&"show_sidebar_toggle_button"in nt[0]&&!!nt[0].show_sidebar_toggle_button&&nt[0].show_sidebar_toggle_button!=="false"&&Hr(nt);return{c(){kt($e.$$.fragment),gt=fe(),Ft=re("div"),Jt&&Jt.c(),ht=fe(),ur&&ur.c(),Pt=de()},l(ar){_t($e.$$.fragment,ar),gt=Me(ar),Ft=me(ar,"DIV",{});var xr=ue(Ft);Jt&&Jt.l(xr),xr.forEach(H),ht=Me(ar),ur&&ur.l(ar),Pt=de()},m(ar,xr){Rt($e,ar,xr),Q(ar,gt,xr),Q(ar,Ft,xr),Jt&&Jt.m(Ft,null),nt[7](Ft),Q(ar,ht,xr),ur&&ur.m(ar,xr),Q(ar,Pt,xr),Et=!0},p(ar,[xr]){const Ar={};xr&1&&(Ar.light_on_dark=ar[0]!==null&&"light_on_dark"in ar[0]?!!ar[0].light_on_dark&&ar[0].light_on_dark!=="false":!1),$e.$set(Ar),ar[2]==null?Jt?(Jt.p(ar,xr),xr&4&&Je(Jt,1)):(Jt=Qr(ar),Jt.c(),Je(Jt,1),Jt.m(Ft,null)):Jt&&(je(),st(Jt,1,1,()=>{Jt=null}),ot()),ar[0]!==null&&"show_sidebar_toggle_button"in ar[0]&&!!ar[0].show_sidebar_toggle_button&&ar[0].show_sidebar_toggle_button!=="false"?ur?ur.p(ar,xr):(ur=Hr(ar),ur.c(),ur.m(Pt.parentNode,Pt)):ur&&(ur.d(1),ur=null)},i(ar){Et||(Je($e.$$.fragment,ar),Je(Jt),Et=!0)},o(ar){st($e.$$.fragment,ar),st(Jt),Et=!1},d(ar){Dt($e,ar),ar&&H(gt),ar&&H(Ft),Jt&&Jt.d(),nt[7](null),ar&&H(ht),ur&&ur.d(ar),ar&&H(Pt)}}}function ta(nt,$e,gt){let{$$slots:Ft={},$$scope:ht}=$e,{attributes:Pt=null}=$e,{innerElms:Et=null}=$e,Jt=null,ur=!1,{toggle_sidebar_label:ar="Toggle Sidebar"}=$e;function xr(Zr){console.log("showSidebar",Zr),ur=!ur,Zr.target.data={action:"show",set:ur,path:"target"in Zr&&"hash"in Zr.target?Zr.target.hash:""},Zr.target.dispatchEvent(new CustomEvent("sidebar",Zr))}Wt(()=>{if(Et!=null){console.log("Apps inner:",Et.childNodes.length,Et.innerHTML);const Zr=[...Et.childNodes];for(const bn of Zr)console.log(bn.nodeType,bn),bn.nodeType===1&&(Et.removeChild(bn),Jt.append(bn))}});function Ar(Zr){zt[Zr?"unshift":"push"](()=>{Jt=Zr,gt(2,Jt)})}const mn=Zr=>xr(Zr);return nt.$$set=Zr=>{"attributes"in Zr&&gt(0,Pt=Zr.attributes),"innerElms"in Zr&&gt(4,Et=Zr.innerElms),"toggle_sidebar_label"in Zr&&gt(1,ar=Zr.toggle_sidebar_label),"$$scope"in Zr&&gt(5,ht=Zr.$$scope)},[Pt,ar,Jt,xr,Et,ht,Ft,Ar,mn]}class ea extends tr{constructor($e){super(),document.getElementById("svelte-shzkbs-style")||Vr(),Bt(this,$e,ta,En,F,{attributes:0,innerElms:4,toggle_sidebar_label:1})}}const{document:ba}=Fe;function Wa(){var nt=re("style");nt.id="svelte-dsjiep-style",nt.textContent=".modal-frame.svelte-dsjiep{display:block;pointer-events:none;visibility:hidden}.modal-frame.shown.svelte-dsjiep{pointer-events:visible;visibility:visible}.modal-overlay.svelte-dsjiep{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.5);z-index:10;display:flex;flex-direction:column;justify-content:center}.modal-container.svelte-dsjiep{position:relative;background-color:transparent;top:1vh;left:5vw;width:90vw;height:90vh;max-height:620px;overflow:hidden;overflow-y:auto}main.svelte-dsjiep{height:100%;padding:0.5rem;overflow:auto}",se(ba.head,nt)}function qa(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur;const ar=nt[3].default,xr=G(ar,nt,nt[2],null);return{c(){$e=re("div"),gt=re("div"),Ft=re("div"),ht=re("main"),xr&&xr.c(),this.h()},l(Ar){$e=me(Ar,"DIV",{class:!0});var mn=ue($e);gt=me(mn,"DIV",{class:!0,"data-close":!0});var Zr=ue(gt);Ft=me(Zr,"DIV",{class:!0});var bn=ue(Ft);ht=me(bn,"MAIN",{class:!0});var Qn=ue(ht);xr&&xr.l(Qn),Qn.forEach(H),bn.forEach(H),Zr.forEach(H),mn.forEach(H),this.h()},h(){W(ht,"class","svelte-dsjiep"),W(Ft,"class","modal-container svelte-dsjiep"),W(gt,"class","modal-overlay svelte-dsjiep"),W(gt,"data-close",""),W($e,"class","modal-frame svelte-dsjiep"),ze($e,"shown",!!nt[0])},m(Ar,mn){Q(Ar,$e,mn),se($e,gt),se(gt,Ft),se(Ft,ht),xr&&xr.m(ht,null),Et=!0,Jt||(ur=pe(gt,"click",nt[1]),Jt=!0)},p(Ar,[mn]){xr&&xr.p&&mn&4&&z(xr,ar,Ar,Ar[2],mn,null,null),mn&1&&ze($e,"shown",!!Ar[0])},i(Ar){Et||(Je(xr,Ar),lt(()=>{Pt||(Pt=We(gt,Gr,{duration:150},!0)),Pt.run(1)}),Et=!0)},o(Ar){st(xr,Ar),Pt||(Pt=We(gt,Gr,{duration:150},!1)),Pt.run(0),Et=!1},d(Ar){Ar&&H($e),xr&&xr.d(Ar),Ar&&Pt&&Pt.end(),Jt=!1,ur()}}}function dr(nt,$e,gt){let{$$slots:Ft={},$$scope:ht}=$e,{show:Pt=!1}=$e;function Et(ur){"close"in ur.target.dataset&&gt(0,Pt=!1)}let Jt=0;return Wt(()=>{document.addEventListener("keydown",function(ur){const ar=ur||window.event;return console.log(ar),new Date().getTime()-Jt>66&&ar.keyCode===27&&(Jt=new Date().getTime(),ar.target.dataset.close=!0,Et(ar),ar.preventDefault()),!0})}),nt.$$set=ur=>{"show"in ur&&gt(0,Pt=ur.show),"$$scope"in ur&&gt(2,ht=ur.$$scope)},[Pt,Et,ht,Ft]}class nn extends tr{constructor($e){super(),ba.getElementById("svelte-dsjiep-style")||Wa(),Bt(this,$e,dr,qa,F,{show:0})}}function Jr(){window.CustomEvent||(console.log("Define CustomEvent"),function(){function nt($e,gt){gt=gt||{bubbles:!1,cancelable:!1,detail:void 0};var Ft=document.createEvent("CustomEvent");return Ft.initCustomEvent($e,gt.bubbles,gt.cancelable,gt.detail),Ft}nt.prototype=window.Event.prototype,window.CustomEvent=nt}())}const{document:Pn}=Fe;function Gn(){var nt=re("style");nt.id="svelte-101869m-style",nt.textContent="nav.svelte-101869m{position:fixed;color:#1a1a1a;display:block;top:0;right:0;height:100%;padding:2rem 2rem 0.6rem 2rem;border-left:1px solid #aaa;background:#fff;overflow-y:auto;width:75vw;z-index:1}nav.hide-menu.svelte-101869m{display:block;transform:translateX(200%);transition:transform 0.5s}nav.shown.svelte-101869m{display:block;transform:translateX(0);transition:transform 0.5s}button.about.svelte-101869m{position:absolute;left:2rem}button.collapse-sidebar.svelte-101869m{position:absolute;right:2rem}",se(Pn.head,nt)}function ka(nt){let $e,gt=nt[0].innerHTML+"",Ft;return{c(){Ft=de(),this.h()},l(ht){Ft=de(),this.h()},h(){$e=new tt(Ft)},m(ht,Pt){$e.m(gt,ht,Pt),Q(ht,Ft,Pt)},p(ht,Pt){Pt&1&&gt!==(gt=ht[0].innerHTML+"")&&$e.p(gt)},i:P,o:P,d(ht){ht&&H(Ft),ht&&$e.d()}}}function ca(nt){let $e;const gt=nt[5].default,Ft=G(gt,nt,nt[11],null);return{c(){Ft&&Ft.c()},l(ht){Ft&&Ft.l(ht)},m(ht,Pt){Ft&&Ft.m(ht,Pt),$e=!0},p(ht,Pt){Ft&&Ft.p&&Pt&2048&&z(Ft,gt,ht,ht[11],Pt,null,null)},i(ht){$e||(Je(Ft,ht),$e=!0)},o(ht){st(Ft,ht),$e=!1},d(ht){Ft&&Ft.d(ht)}}}function Ta(nt){let $e;return{c(){$e=re("div")},l(gt){$e=me(gt,"DIV",{}),ue($e).forEach(H)},m(gt,Ft){Q(gt,$e,Ft),nt[9]($e)},p:P,d(gt){gt&&H($e),nt[9](null)}}}function Aa(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar,xr,Ar,mn,Zr,bn,Qn,Cn,Hn,ra,qn,Un,Fa;const ai=[ca,ka],_a=[];function Na(va,Ia){return va[0]==null?0:1}Zr=Na(nt),bn=_a[Zr]=ai[Zr](nt);function wi(va){nt[10].call(null,va)}let ya={$$slots:{default:[Ta]},$$scope:{ctx:nt}};return nt[2]!==void 0&&(ya.show=nt[2]),Hn=new nn({props:ya}),zt.push(()=>bt(Hn,"show",wi)),{c(){$e=re("nav"),gt=re("button"),Ft=ae("Close Sidebar"),ht=fe(),Pt=re("button"),Et=ae("About"),Jt=fe(),ur=re("br"),ar=re("br"),xr=re("br"),Ar=fe(),mn=re("div"),bn.c(),Cn=fe(),kt(Hn.$$.fragment),this.h()},l(va){$e=me(va,"NAV",{class:!0});var Ia=ue($e);gt=me(Ia,"BUTTON",{class:!0});var ui=ue(gt);Ft=be(ui,"Close Sidebar"),ui.forEach(H),ht=Me(Ia),Pt=me(Ia,"BUTTON",{class:!0});var ki=ue(Pt);Et=be(ki,"About"),ki.forEach(H),Jt=Me(Ia),ur=me(Ia,"BR",{}),ar=me(Ia,"BR",{}),xr=me(Ia,"BR",{}),Ar=Me(Ia),mn=me(Ia,"DIV",{class:!0});var vi=ue(mn);bn.l(vi),vi.forEach(H),Ia.forEach(H),Cn=Me(va),_t(Hn.$$.fragment,va),this.h()},h(){W(gt,"class","collapse-sidebar svelte-101869m"),W(Pt,"class","about svelte-101869m"),W(mn,"class","sidebar-content"),W($e,"class","svelte-101869m"),ze($e,"shown",!!nt[1]),ze($e,"hide-menu",!nt[1])},m(va,Ia){Q(va,$e,Ia),se($e,gt),se(gt,Ft),se($e,ht),se($e,Pt),se(Pt,Et),se($e,Jt),se($e,ur),se($e,ar),se($e,xr),se($e,Ar),se($e,mn),_a[Zr].m(mn,null),Q(va,Cn,Ia),Rt(Hn,va,Ia),qn=!0,Un||(Fa=[pe(gt,"click",nt[6]),pe(Pt,"click",nt[7]),pe($e,"sidebar",nt[8])],Un=!0)},p(va,[Ia]){let ui=Zr;Zr=Na(va),Zr===ui?_a[Zr].p(va,Ia):(je(),st(_a[ui],1,1,()=>{_a[ui]=null}),ot(),bn=_a[Zr],bn||(bn=_a[Zr]=ai[Zr](va),bn.c()),Je(bn,1),bn.m(mn,null)),Ia&2&&ze($e,"shown",!!va[1]),Ia&2&&ze($e,"hide-menu",!va[1]);const ki={};Ia&2056&&(ki.$$scope={dirty:Ia,ctx:va}),!ra&&Ia&4&&(ra=!0,ki.show=va[2],Te(()=>ra=!1)),Hn.$set(ki)},i(va){qn||(Je(bn),lt(()=>{Qn||(Qn=We($e,Or,{x:250,opacity:1},!0)),Qn.run(1)}),Je(Hn.$$.fragment,va),qn=!0)},o(va){st(bn),Qn||(Qn=We($e,Or,{x:250,opacity:1},!1)),Qn.run(0),st(Hn.$$.fragment,va),qn=!1},d(va){va&&H($e),_a[Zr].d(),va&&Qn&&Qn.end(),va&&H(Cn),Dt(Hn,va),Un=!1,C(Fa)}}}function Ya(nt,$e,gt){let{$$slots:Ft={},$$scope:ht}=$e;Jr();let{innerElms:Pt=null}=$e,{show:Et=!1}=$e,Jt=!1,ur=null,ar=0,xr=!1;const Ar={};function mn(qn){"data"in qn.target&&"set"in qn.target.data&&"action"in qn.target.data&&qn.target.data.action==="show"?gt(1,Et=qn.target.data.set):gt(1,Et=!Et),Et?document.getElementById("sidebar").style.visibility="visible":document.getElementById("sidebar").style.visibility="hide-menu"}function Zr(qn){console.log("showAbout",qn.target.data),gt(2,Jt=!0),gt(1,Et=!1)}Wt(()=>{gt(13,xr=!0),document.addEventListener("sidebar",function(qn){"target"in qn&&!!qn.target.data.path?qn.target.data.path.match(/about/)!==null&&Zr(qn):mn(qn)},!0),document.addEventListener("keydown",function(qn){const Un=qn||window.event;return Un.keyCode===32?Un.preventDefault():(Un.ctrlKey||Un.shiftKey)&&new Date().getTime()-ar>66&&Un.keyCode===73&&(ar=new Date().getTime(),mn(Un),Un.preventDefault()),!0})});const bn=()=>gt(1,Et=!Et),Qn=qn=>(qn.target.data={action:"show",set:!1,path:"about"},qn.target.dispatchEvent(new CustomEvent("sidebar",qn))),Cn=qn=>mn(qn);function Hn(qn){zt[qn?"unshift":"push"](()=>{ur=qn,gt(3,ur)})}function ra(qn){Jt=qn,gt(2,Jt)}return nt.$$set=qn=>{"innerElms"in qn&&gt(0,Pt=qn.innerElms),"show"in qn&&gt(1,Et=qn.show),"$$scope"in qn&&gt(11,ht=qn.$$scope)},nt.$$.update=()=>{nt.$$.dirty&24585&&function(Un,Fa){if(!!xr&&Un!=null&&!!Un.innerHTML){const ai=[...Un.childNodes];for(const _a of ai)if(_a.nodeType===1&&_a.className.match(/modal-content/)!==null){const Na="id"in _a&&!!_a.id?_a.id:_a.innerHTML.toString().substring(0,16)+_a.toString(),wi=_a;Un.removeChild(_a),Na in Ar||Fa.append(wi),gt(14,Ar[Na]=wi,Ar)}gt(0,Pt=Un)}}(Pt,ur)},[Pt,Et,Jt,ur,mn,Ft,bn,Qn,Cn,Hn,ra,ht]}class Xt extends tr{constructor($e){super(),Pn.getElementById("svelte-101869m-style")||Gn(),Bt(this,$e,Ya,Aa,F,{innerElms:0,show:1})}}const{document:yr}=Fe;function Yr(){var nt=re("style");nt.id="svelte-k4up2x-style",nt.textContent="svg.svelte-k4up2x.svelte-k4up2x{padding:20px 20px;width:25vw;height:auto;max-width:356px;min-width:112px}path.svelte-k4up2x.svelte-k4up2x{fill:white;opacity:1}label.svelte-k4up2x.svelte-k4up2x{position:absolute;top:1em;left:1em}.centered.svelte-k4up2x.svelte-k4up2x{float:right;position:relative;margin:10% 0 0 0;padding:2% 0 0 0;color:#676778;width:66%;clear:none}.centered.svelte-k4up2x span.svelte-k4up2x{font-family:'TT Hoves Bold',sans-serif;font-size:320%;font-weight:600;letter-spacing:0.12em;will-change:filter}",se(yr.head,nt)}function un(nt,$e,gt){const Ft=nt.slice();return Ft[8]=$e[gt],Ft[10]=gt,Ft}function qr(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar,xr,Ar,mn=nt[0],Zr=[];for(let Hn=0;Hn<mn.length;Hn+=1)Zr[Hn]=rn(un(nt,mn,Hn));const bn=[zr,wr,tn,hn],Qn=[];function Cn(Hn,ra){return!Hn[2]&&!Hn[3]?0:Hn[2]?!Hn[4]&&!Hn[5]?2:Hn[4]?-1:3:1}return~(ar=Cn(nt))&&(xr=Qn[ar]=bn[ar](nt)),{c(){$e=re("div");for(let Hn=0;Hn<Zr.length;Hn+=1)Zr[Hn].c();Ft=fe(),ht=ee("svg"),Pt=ee("defs"),Et=ee("mask"),Jt=ee("path"),ur=ee("path"),xr&&xr.c(),this.h()},l(Hn){$e=me(Hn,"DIV",{class:!0});var ra=ue($e);for(let ai=0;ai<Zr.length;ai+=1)Zr[ai].l(ra);ra.forEach(H),Ft=Me(Hn),ht=me(Hn,"svg",{xmlns:!0,fill:!0,width:!0,height:!0,viewBox:!0,style:!0,class:!0},1);var qn=ue(ht);Pt=me(qn,"defs",{},1);var Un=ue(Pt);Et=me(Un,"mask",{id:!0,x:!0,y:!0,width:!0,height:!0,maskUnits:!0,maskContentUnits:!0},1);var Fa=ue(Et);Jt=me(Fa,"path",{fill:!0,d:!0,class:!0},1),ue(Jt).forEach(H),ur=me(Fa,"path",{d:!0,fill:!0,class:!0},1),ue(ur).forEach(H),Fa.forEach(H),Un.forEach(H),xr&&xr.l(qn),qn.forEach(H),this.h()},h(){W($e,"class","centered svelte-k4up2x"),W(Jt,"fill","#fff"),W(Jt,"d","M0 0h308v136H0z"),W(Jt,"class","svelte-k4up2x"),W(ur,"d","M115.084 31.849L61.916.809a5.66 5.66 0 00-5.832 0L2.916 31.85C1.118 32.927 0 34.839 0 36.949v62.127c0 2.109 1.118 4.021 2.916 5.1l53.168 31.039c.923.54 1.895.785 2.916.785 1.02 0 2.041-.245 2.916-.785l53.168-31.039c1.798-1.03 2.916-2.991 2.916-5.1V36.948c0-2.108-1.118-4.02-2.916-5.1z"),W(ur,"fill","#000"),W(ur,"class","svelte-k4up2x"),W(Et,"id","border-mask"),W(Et,"x","0"),W(Et,"y","0"),W(Et,"width","308"),W(Et,"height","136"),W(Et,"maskUnits","userSpaceOnUse"),W(Et,"maskContentUnits","userSpaceOnUse"),W(ht,"xmlns","http://www.w3.org/2000/svg"),W(ht,"fill","none"),W(ht,"width","136"),W(ht,"height","136"),W(ht,"viewBox","0 0 136 136"),Ge(ht,"background-color","transparent"),W(ht,"class","svelte-k4up2x")},m(Hn,ra){Q(Hn,$e,ra);for(let qn=0;qn<Zr.length;qn+=1)Zr[qn].m($e,null);Q(Hn,Ft,ra),Q(Hn,ht,ra),se(ht,Pt),se(Pt,Et),se(Et,Jt),se(Et,ur),~ar&&Qn[ar].m(ht,null),Ar=!0},p(Hn,ra){if(ra&1){mn=Hn[0];let Un;for(Un=0;Un<mn.length;Un+=1){const Fa=un(Hn,mn,Un);Zr[Un]?(Zr[Un].p(Fa,ra),Je(Zr[Un],1)):(Zr[Un]=rn(Fa),Zr[Un].c(),Je(Zr[Un],1),Zr[Un].m($e,null))}for(;Un<Zr.length;Un+=1)Zr[Un].d(1);Zr.length=mn.length}let qn=ar;ar=Cn(Hn),ar===qn?~ar&&Qn[ar].p(Hn,ra):(xr&&(je(),st(Qn[qn],1,1,()=>{Qn[qn]=null}),ot()),~ar?(xr=Qn[ar],xr||(xr=Qn[ar]=bn[ar](Hn),xr.c()),Je(xr,1),xr.m(ht,null)):xr=null)},i(Hn){if(!Ar){for(let ra=0;ra<mn.length;ra+=1)Je(Zr[ra]);gt&&gt.end(1),Je(xr),Ar=!0}},o(Hn){gt=nr($e,Or,{y:0,duration:800}),st(xr),Ar=!1},d(Hn){Hn&&H($e),oe(Zr,Hn),Hn&&gt&&gt.end(),Hn&&H(Ft),Hn&&H(ht),~ar&&Qn[ar].d()}}}function rn(nt){let $e,gt=nt[8]+"",Ft,ht;return{c(){$e=re("span"),Ft=ae(gt),this.h()},l(Pt){$e=me(Pt,"SPAN",{class:!0});var Et=ue($e);Ft=be(Et,gt),Et.forEach(H),this.h()},h(){W($e,"class","svelte-k4up2x")},m(Pt,Et){Q(Pt,$e,Et),se($e,Ft)},p(Pt,Et){nt=Pt,Et&1&&gt!==(gt=nt[8]+"")&&Pe(Ft,gt)},i(Pt){ht||lt(()=>{ht=Nt($e,Gr,{delay:Fn+nt[10]*150,duration:800}),ht.start()})},o:P,d(Pt){Pt&&H($e)}}}function hn(nt){let $e,gt,Ft,ht,Pt;return{c(){$e=ee("g"),gt=ee("path"),Ft=ee("path"),this.h()},l(Et){$e=me(Et,"g",{opacity:!0,transform:!0},1);var Jt=ue($e);gt=me(Jt,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(H),Ft=me(Jt,"path",{style:!0,d:!0,class:!0},1),ue(Ft).forEach(H),Jt.forEach(H),this.h()},h(){Ge(gt,"fill","#16343e"),Ge(gt,"stroke","none"),W(gt,"d",jn),W(gt,"class","svelte-k4up2x"),Ge(Ft,"fill","#16343e"),Ge(Ft,"stroke","#16343e"),Ge(Ft,"stroke-width","1.5"),W(Ft,"d",Nn),W(Ft,"class","svelte-k4up2x"),W($e,"opacity","0.75"),W($e,"transform","scale(0.75, 0.76) translate(9, 12)")},m(Et,Jt){Q(Et,$e,Jt),se($e,gt),se($e,Ft),Pt=!0},p(Et,Jt){},i(Et){Pt||(ht&&ht.end(1),Pt=!0)},o(Et){ht=nr($e,Gr,{duration:Bn}),Pt=!1},d(Et){Et&&H($e),Et&&ht&&ht.end()}}}function tn(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar;return{c(){$e=ee("g"),gt=ee("path"),ht=ee("path"),Et=ee("path"),this.h()},l(xr){$e=me(xr,"g",{opacity:!0,transform:!0},1);var Ar=ue($e);gt=me(Ar,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(H),ht=me(Ar,"path",{style:!0,d:!0,class:!0},1),ue(ht).forEach(H),Et=me(Ar,"path",{style:!0,d:!0,class:!0},1),ue(Et).forEach(H),Ar.forEach(H),this.h()},h(){Ge(gt,"fill","#16343e"),Ge(gt,"stroke","none"),W(gt,"d",jn),W(gt,"class","svelte-k4up2x"),Ge(ht,"fill","none"),Ge(ht,"stroke","#16343e"),Ge(ht,"stroke-width","1.5"),W(ht,"d",Nn),W(ht,"class","svelte-k4up2x"),Ge(Et,"fill","#16343e"),Ge(Et,"stroke","#16343e"),Ge(Et,"stroke-width","1.5"),W(Et,"d",Nn),W(Et,"class","svelte-k4up2x"),W($e,"opacity","0.5"),W($e,"transform","scale(0.75, 0.76) translate(9, 12)")},m(xr,Ar){Q(xr,$e,Ar),se($e,gt),se($e,ht),se($e,Et),ar=!0},p(xr,Ar){},i(xr){ar||(Ft||lt(()=>{Ft=Nt(gt,Mn,{duration:Bn,delay:Fn,easing:_r}),Ft.start()}),Pt||lt(()=>{Pt=Nt(ht,Fr,{duration:Fn}),Pt.start()}),Jt||lt(()=>{Jt=Nt(Et,Mn,{duration:Bn,delay:Fn,easing:_r}),Jt.start()}),ur&&ur.end(1),ar=!0)},o(xr){ur=nr($e,Gr,{duration:Bn}),ar=!1},d(xr){xr&&H($e),xr&&ur&&ur.end()}}}function wr(nt){let $e,gt,Ft,ht,Pt;return{c(){$e=ee("g"),gt=ee("path"),Ft=ee("path"),this.h()},l(Et){$e=me(Et,"g",{opacity:!0},1);var Jt=ue($e);gt=me(Jt,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(H),Ft=me(Jt,"path",{style:!0,d:!0,class:!0},1),ue(Ft).forEach(H),Jt.forEach(H),this.h()},h(){Ge(gt,"fill","#16343e"),Ge(gt,"stroke","none"),W(gt,"d",Tn),W(gt,"class","svelte-k4up2x"),Ge(Ft,"fill","#16343e"),Ge(Ft,"stroke","#16343e"),Ge(Ft,"stroke-width","1.5"),W(Ft,"d",Wn),W(Ft,"class","svelte-k4up2x"),W($e,"opacity","0.75")},m(Et,Jt){Q(Et,$e,Jt),se($e,gt),se($e,Ft),Pt=!0},p(Et,Jt){},i(Et){Pt||(ht&&ht.end(1),Pt=!0)},o(Et){ht=nr($e,Gr,{duration:Bn}),Pt=!1},d(Et){Et&&H($e),Et&&ht&&ht.end()}}}function zr(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar;return{c(){$e=ee("g"),gt=ee("path"),ht=ee("path"),Et=ee("path"),this.h()},l(xr){$e=me(xr,"g",{opacity:!0},1);var Ar=ue($e);gt=me(Ar,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(H),ht=me(Ar,"path",{style:!0,d:!0,class:!0},1),ue(ht).forEach(H),Et=me(Ar,"path",{style:!0,d:!0,class:!0},1),ue(Et).forEach(H),Ar.forEach(H),this.h()},h(){Ge(gt,"fill","#16343e"),Ge(gt,"stroke","none"),W(gt,"d",Tn),W(gt,"class","svelte-k4up2x"),Ge(ht,"fill","none"),Ge(ht,"stroke","#16343e"),Ge(ht,"stroke-width","1.5"),W(ht,"d",Wn),W(ht,"class","svelte-k4up2x"),Ge(Et,"fill","#16343e"),Ge(Et,"stroke","#16343e"),Ge(Et,"stroke-width","1.5"),W(Et,"d",Wn),W(Et,"class","svelte-k4up2x"),W($e,"opacity","0.5")},m(xr,Ar){Q(xr,$e,Ar),se($e,gt),se($e,ht),se($e,Et),ar=!0},p(xr,Ar){},i(xr){ar||(Ft||lt(()=>{Ft=Nt(gt,Mn,{duration:Bn,delay:Fn,easing:_r}),Ft.start()}),Pt||lt(()=>{Pt=Nt(ht,Fr,{duration:Fn}),Pt.start()}),Jt||lt(()=>{Jt=Nt(Et,Mn,{duration:Bn,delay:Fn,easing:_r}),Jt.start()}),ur&&ur.end(1),ar=!0)},o(xr){ur=nr($e,Gr,{duration:Bn}),ar=!1},d(xr){xr&&H($e),xr&&ur&&ur.end()}}}function Tr(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar=nt[1]&&qr(nt);return{c(){$e=re("label"),gt=re("input"),Ft=fe(),ar&&ar.c(),ht=fe(),Pt=re("link"),this.h()},l(xr){$e=me(xr,"LABEL",{class:!0});var Ar=ue($e);gt=me(Ar,"INPUT",{type:!0}),Ar.forEach(H),Ft=Me(xr),ar&&ar.l(xr),ht=Me(xr),Pt=me(xr,"LINK",{href:!0,rel:!0}),this.h()},h(){W(gt,"type","checkbox"),W($e,"class","svelte-k4up2x"),W(Pt,"href","https://fonts.googleapis.com/css?family=Overpass:100,400"),W(Pt,"rel","stylesheet")},m(xr,Ar){Q(xr,$e,Ar),se($e,gt),gt.checked=nt[1],Q(xr,Ft,Ar),ar&&ar.m(xr,Ar),Q(xr,ht,Ar),Q(xr,Pt,Ar),Et=!0,Jt||(ur=pe(gt,"change",nt[6]),Jt=!0)},p(xr,[Ar]){Ar&2&&(gt.checked=xr[1]),xr[1]?ar?(ar.p(xr,Ar),Ar&2&&Je(ar,1)):(ar=qr(xr),ar.c(),Je(ar,1),ar.m(ht.parentNode,ht)):ar&&(je(),st(ar,1,1,()=>{ar=null}),ot())},i(xr){Et||(Je(ar),Et=!0)},o(xr){st(ar),Et=!1},d(xr){xr&&H($e),xr&&H(Ft),ar&&ar.d(xr),xr&&H(ht),xr&&H(Pt),Jt=!1,ur()}}}let Fn=1500,Bn=500,sa=2500;function Pa(nt,$e,gt){let{title:Ft="Mapping & Data Analytics"}=$e,ht=!1,Pt=!1,Et=!1,Jt=!0,ur=!1,ar=function(Ar){if(!!Ar&&!Pt&&!Et)return gt(1,ht=!0),setTimeout(()=>{gt(3,Et=!0),gt(5,ur=!1),setTimeout(()=>{console.log("hide cori"),gt(2,Pt=!Pt)},sa),setTimeout(()=>{console.log("show risi"),gt(4,Jt=!Jt),setTimeout(()=>{gt(5,ur=!0),gt(3,Et=!1),ht&&setTimeout(()=>{console.log("show cori"),gt(2,Pt=!Pt),console.log("hide risi"),gt(4,Jt=!Jt),console.log("redraw"),ar(Ar)},sa)},Fn+Bn)},sa-Bn)},Fn+Bn),!0;if(!ht)return gt(3,Et=!1),gt(5,ur=!1),!1};document.addEventListener("sidebar",function(Ar){console.log("sidebar event dispatched"),"target"in Ar&&!!Ar.target.data.path&&Ar.target.data.path.match(/about/)!==null&&gt(1,ht=!0)},!0);function xr(){ht=this.checked,gt(1,ht)}return nt.$$set=Ar=>{"title"in Ar&&gt(0,Ft=Ar.title)},nt.$$.update=()=>{nt.$$.dirty&2&&ar(ht)},[Ft,ht,Pt,Et,Jt,ur,xr]}class ia extends tr{constructor($e){super(),yr.getElementById("svelte-k4up2x-style")||Yr(),Bt(this,$e,Pa,Tr,F,{title:0})}}const{document:ri}=Fe;function Ai(){var nt=re("style");nt.id="svelte-sdid3b-style",nt.textContent=".svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before{box-sizing:border-box}button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{border:0;cursor:pointer;overflow:visible;text-transform:none}svg.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b:not(:root){overflow:hidden}.site-header.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{position:absolute;top:0;left:0;width:100vw}*.Light-on-Dark.site-header.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.site-header.svelte-sdid3b a.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.site-header.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{background-color:#16343e;background-color:#26535c}.site-header__inner.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{background-color:transparent;transition:all .35s ease,background-color 0s}.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{width:100%;padding-left:56px;padding-right:56px;margin-right:0px;margin-left:0px}@media(max-width: 540px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{padding:0 0 0 1em;max-width:100vh;width:100%}}@media(min-width: 640px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 768px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 1024px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 1080px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:100%}}.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{list-style:none;display:flex;flex-wrap:wrap;margin-right:-10px;margin-left:-10px}.justify-content-between.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{justify-content:space-between !important}.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{width:calc(100% + 20px);list-style:none;padding:0;margin:0 0 0 -10px}.site-header__row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{height:76px;flex-wrap:nowrap;transition:.35s ease}@media(min-width: 768px){.site-header__row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{will-change:height}}@media(min-width: 768px){}.col.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,.col-auto.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{position:relative;width:100%;padding-right:10px;padding-left:10px}.col-auto.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{flex:0 0 auto;width:auto;max-width:100%}.site-header__main-logo.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:50%;align-self:flex-start}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:143px;height:92px;position:absolute;top:12px;left:0;transition:all .35s ease;transform-origin:top left;pointer-events:none;touch-action:none;background-color:transparent}@media(max-width: 768px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{height:54px}}@media(min-width: 768px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:154px;height:74px;top:4px;left:1px}}@media(min-width: 1200px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:211px;height:92px;will-change:height,width,top,left}}.site-header__main-logo.svelte-sdid3b svg.logo-border.svelte-sdid3b.svelte-sdid3b{fill:none;z-index:0}.header-stuck .site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{top:-1px}@media(min-width: 768px){.header-stuck .site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:155px;height:100px;top:-3px;left:1px}}.site-header__main-logo.svelte-sdid3b svg .text-group.svelte-sdid3b.svelte-sdid3b{transition:.25s cubic-bezier(.77,0,.175,1)}@media(max-width: 1023px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .text g.svelte-sdid3b,.site-header__main-logo.svelte-sdid3b svg .text-group.svelte-sdid3b.svelte-sdid3b{display:none}}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .logo path.svelte-sdid3b,.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .text path.svelte-sdid3b{fill:#16343e}.header-stuck .site-header__main-logo.svelte-sdid3b svg .border.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.home .menu.svelte-sdid3b g.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.home .site-header__main-logo.svelte-sdid3b .logo path.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.home .site-header__main-logo.svelte-sdid3b .text path.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .menu.svelte-sdid3b g.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .site-header__main-logo.svelte-sdid3b .logo path.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .site-header__main-logo.svelte-sdid3b .text path.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.svelte-sdid3b .site-header__main-logo svg .logo path.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.svelte-sdid3b .site-header__main-logo svg .text path.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.svelte-sdid3b .header-stuck .site-header__main-logo svg .border.svelte-sdid3b.svelte-sdid3b{fill:#16343e;fill:#26535c}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b path.svelte-sdid3b{transition:all .35s ease,fill 0s}.site-header__menu-section.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex}.site-header__primary-menu.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{padding-top:10px}.site-header__item.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex}.site-header__item.svelte-sdid3b .site-header__item_inner.svelte-sdid3b.svelte-sdid3b{display:flex;align-items:center;flex:1 0 auto}.site-header__menu-section.svelte-sdid3b .menu.svelte-sdid3b.svelte-sdid3b{align-items:stretch;flex-wrap:nowrap}.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{margin-right:0;align-items:center}@media(min-width: 1200px){.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{align-items:center}}.mobile-menu-toggle.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex;flex:0 0 0;margin-right:2.5%;order:4;align-items:center}@media(max-width: 820px){.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{display:none}}@media(min-width: 820px){.mobile-menu-toggle.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:none}}.hamburger-control__inner.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{background-color:transparent}.hamburger-control__inner.svelte-sdid3b .hamburger-control__open.svelte-sdid3b.svelte-sdid3b{background-color:transparent}.hamburger-control__inner.svelte-sdid3b .hamburger-control__open .menu g.svelte-sdid3b.svelte-sdid3b{fill:#16343E}*.Light-on-Dark.svelte-sdid3b .hamburger-control__inner .hamburger-control__open .menu g.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9 !important}*.Light-on-Dark.svelte-sdid3b .hamburger-control__inner .hamburger-control__close .menu g.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9 !important}*.hamburger-control__close.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:none}.site-header__menu-section.svelte-sdid3b .menu .menu-item.svelte-sdid3b.svelte-sdid3b{align-items:stretch;display:flex}.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b>li.svelte-sdid3b{padding:0 !important;margin:0 12px}.site-header__row.svelte-sdid3b #primary-navigation>li a.svelte-sdid3b.svelte-sdid3b{padding-left:0;padding-right:0}.site-header__primary-menu.svelte-sdid3b .top-level-nav-link.svelte-sdid3b.svelte-sdid3b{padding:0 10px 0 10px}.header-stuck .site-header__menu-section.svelte-sdid3b .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:#16343e !important;display:inline;background-size:0 1px;background-position:0 calc(100% - 4px);background-repeat:no-repeat;transition:.25s cubic-bezier(.77,0,.175,1);transition-duration:.35s;background-image:linear-gradient(#16343e,#16343e) !important}*.Light-on-Dark.svelte-sdid3b .site-header__menu-section .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:rgb(251, 248, 233)}*.Light-on-Dark.svelte-sdid3b .header-stuck .site-header__menu-section .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:rgb(251, 248, 233) !important}.has-dropdowns.svelte-sdid3b .sub-menu li.svelte-sdid3b.svelte-sdid3b{width:100%;margin:0 0 12px;padding:0;border:0 !important;display:inline-block !important;clear:both}.screen-reader-text.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b:not(:focus):not(:active),.sr-dropdown-button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute !important;width:1px;word-wrap:normal !important}.sr-dropdown-button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{flex:0 1 auto;padding:0;margin:0;display:flex;align-items:center;width:auto;height:100%}.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before,.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before{content:initial !important;display:block !important}",se(ri.head,nt)}function Bi(nt,$e,gt){const Ft=nt.slice();return Ft[14]=$e[gt],Ft}function Qa(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar,xr=!!nt[5]&&yi(nt);const Ar=[qo,As],mn=[];function Zr(bn,Qn){return bn[5]?1:0}return~(Jt=Zr(nt))&&(ur=mn[Jt]=Ar[Jt](nt)),{c(){$e=ee("svg"),gt=ee("defs"),Ft=ee("mask"),ht=ee("path"),Pt=ee("path"),Et=ee("g"),xr&&xr.c(),ur&&ur.c(),this.h()},l(bn){$e=me(bn,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,style:!0,class:!0},1);var Qn=ue($e);gt=me(Qn,"defs",{class:!0},1);var Cn=ue(gt);Ft=me(Cn,"mask",{id:!0,x:!0,y:!0,width:!0,height:!0,maskUnits:!0,maskContentUnits:!0,class:!0},1);var Hn=ue(Ft);ht=me(Hn,"path",{fill:!0,d:!0,class:!0},1),ue(ht).forEach(H),Pt=me(Hn,"path",{d:!0,fill:!0,class:!0},1),ue(Pt).forEach(H),Hn.forEach(H),Cn.forEach(H),Et=me(Qn,"g",{class:!0,mask:!0},1);var ra=ue(Et);xr&&xr.l(ra),ra.forEach(H),ur&&ur.l(Qn),Qn.forEach(H),this.h()},h(){W(ht,"fill","#fff"),W(ht,"d","M0 0h308v136H0z"),W(ht,"class","svelte-sdid3b"),W(Pt,"d","M115.084 31.849L61.916.809a5.66 5.66 0 00-5.832 0L2.916 31.85C1.118 32.927 0 34.839 0 36.949v62.127c0 2.109 1.118 4.021 2.916 5.1l53.168 31.039c.923.54 1.895.785 2.916.785 1.02 0 2.041-.245 2.916-.785l53.168-31.039c1.798-1.03 2.916-2.991 2.916-5.1V36.948c0-2.108-1.118-4.02-2.916-5.1z"),W(Pt,"fill","#000"),W(Pt,"class","svelte-sdid3b"),W(Ft,"id","border-mask"),W(Ft,"x","0"),W(Ft,"y","0"),W(Ft,"width","308"),W(Ft,"height","136"),W(Ft,"maskUnits","userSpaceOnUse"),W(Ft,"maskContentUnits","userSpaceOnUse"),W(Ft,"class","svelte-sdid3b"),W(gt,"class","svelte-sdid3b"),W(Et,"class","text svelte-sdid3b"),W(Et,"mask","url(#border-mask)"),W($e,"xmlns","http://www.w3.org/2000/svg"),W($e,"width","308"),W($e,"height","136"),W($e,"viewBox","0 0 308 136"),W($e,"fill","none"),Ge($e,"background-color","transparent"),W($e,"class","svelte-sdid3b")},m(bn,Qn){Q(bn,$e,Qn),se($e,gt),se(gt,Ft),se(Ft,ht),se(Ft,Pt),se($e,Et),xr&&xr.m(Et,null),~Jt&&mn[Jt].m($e,null),ar=!0},p(bn,Qn){bn[5]?xr?(xr.p(bn,Qn),Qn&32&&Je(xr,1)):(xr=yi(bn),xr.c(),Je(xr,1),xr.m(Et,null)):xr&&(je(),st(xr,1,1,()=>{xr=null}),ot());let Cn=Jt;Jt=Zr(bn),Jt===Cn?~Jt&&mn[Jt].p(bn,Qn):(ur&&(je(),st(mn[Cn],1,1,()=>{mn[Cn]=null}),ot()),~Jt?(ur=mn[Jt],ur||(ur=mn[Jt]=Ar[Jt](bn),ur.c()),Je(ur,1),ur.m($e,null)):ur=null)},i(bn){ar||(Je(xr),Je(ur),ar=!0)},o(bn){st(xr),st(ur),ar=!1},d(bn){bn&&H($e),xr&&xr.d(),~Jt&&mn[Jt].d()}}}function yi(nt){let $e,gt,Ft,ht,Pt,Et,Jt;return{c(){$e=ee("g"),gt=ee("path"),Ft=ee("path"),this.h()},l(ur){$e=me(ur,"g",{class:!0,fill:!0,opacity:!0},1);var ar=ue($e);gt=me(ar,"path",{d:!0,class:!0},1),ue(gt).forEach(H),Ft=me(ar,"path",{d:!0,class:!0},1),ue(Ft).forEach(H),ar.forEach(H),this.h()},h(){W(gt,"d","M126.863 55.99c3.466 0 5.764-2.38 6.037-5.188h-3.096c-.234 1.287-1.11 2.438-2.941 2.438-2.259 0-3.486-1.482-3.486-4.231 0-2.75 1.227-4.251 3.486-4.251 1.909 0 2.804 1.248 2.921 2.554h3.116c-.195-2.886-2.551-5.323-6.037-5.323-4.382 0-6.602 3.08-6.602 7.02 0 3.88 2.22 6.98 6.602 6.98z"),W(gt,"class","svelte-sdid3b"),W(Ft,"d","M138.625 55.99c2.785 0 4.401-1.62 4.674-3.452h-2.902c-.175.468-.662 1.014-1.772 1.014-1.363 0-1.967-.839-1.986-2.028h6.796v-1.111c0-2.77-1.753-4.973-4.868-4.973-3.311 0-4.986 2.399-4.986 5.285 0 2.924 1.831 5.264 5.044 5.264zm-1.967-6.357c.059-.975.623-1.736 1.909-1.736 1.187 0 1.752.76 1.811 1.736h-3.72zM144.5 55.814h2.999v-5.655c0-1.228.778-1.989 1.85-1.989 1.187 0 1.713.702 1.713 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.784 1.15h-.078l-.234-.974H144.5v10.198zM159.904 55.814h2.065V53.2H160.8c-.896 0-1.304-.41-1.304-1.365V48.17h2.434v-2.554h-2.434v-2.672h-2.863v2.672h-1.792v2.554h1.656v4.387c0 1.853 1.051 3.257 3.407 3.257zM167.98 55.99c2.784 0 4.401-1.62 4.673-3.452h-2.901c-.176.468-.662 1.014-1.772 1.014-1.364 0-1.967-.839-1.987-2.028h6.797v-1.111c0-2.77-1.753-4.973-4.869-4.973-3.31 0-4.985 2.399-4.985 5.285 0 2.924 1.83 5.264 5.044 5.264zm-1.967-6.357c.058-.975.623-1.736 1.908-1.736 1.188 0 1.753.76 1.811 1.736h-3.719zM173.854 55.814h2.804v-5.031c0-1.638.916-2.593 2.337-2.593h.974v-2.75h-.701c-1.305 0-2.162.76-2.61 1.658h-.078l-.233-1.482h-2.493v10.198zM125.247 74.393c3.31 0 5.082-2.223 5.082-5.265 0-3.061-1.811-5.284-5.082-5.284-3.272 0-5.083 2.223-5.083 5.284s1.772 5.265 5.083 5.265zm0-2.633c-1.227 0-2.026-.78-2.026-2.632 0-1.833.779-2.652 2.026-2.652 1.246 0 2.025.8 2.025 2.652s-.779 2.632-2.025 2.632zM131.406 74.217h2.999v-5.655c0-1.228.779-1.988 1.85-1.988 1.188 0 1.713.701 1.713 1.871v5.772h2.999V67.51c0-2.243-1.519-3.666-3.778-3.666-1.324 0-2.22.487-2.784 1.15h-.078l-.234-.975h-2.687v10.198zM155.988 69.03c1.655-.663 2.687-2.145 2.687-4.114 0-2.32-1.752-4.348-4.654-4.348h-6.231v13.65h3.057V69.4h1.908l2.941 4.816h3.583v-.195l-3.291-4.992zm-5.141-5.732h3.018c1.188 0 1.675.819 1.675 1.638 0 .858-.448 1.735-1.675 1.735h-3.018v-3.373zM163.835 74.393c1.324 0 2.22-.488 2.784-1.15h.078l.234.974h2.687V64.02h-2.999v5.655c0 1.228-.779 1.989-1.85 1.989-1.188 0-1.713-.702-1.713-1.872v-5.772h-2.999v6.708c0 2.242 1.519 3.666 3.778 3.666zM170.944 74.217h2.805v-5.03c0-1.638.915-2.594 2.337-2.594h.973v-2.75h-.701c-1.305 0-2.161.761-2.609 1.658h-.078l-.234-1.482h-2.493v10.198zM180.916 74.393c1.265 0 2.161-.449 2.726-1.092h.078l.214.916h2.687V67.51c0-2.126-1.674-3.666-4.459-3.666-2.999 0-4.382 1.638-4.382 3.548h2.805c0-.623.545-1.13 1.48-1.13 1.11 0 1.557.546 1.557 1.248v.545h-2.181c-2.804 0-4.089 1.248-4.089 3.14 0 1.813 1.266 3.198 3.564 3.198zm.759-2.34c-.896 0-1.363-.43-1.363-1.014 0-.546.428-.975 1.383-.975h1.927v.429c0 .838-.72 1.56-1.947 1.56zM187.985 74.217h2.999V59.788h-2.999v14.43zM121.04 92.62h3.077V78.972h-3.077v13.65zM126.062 92.62h2.999v-5.654c0-1.229.779-1.989 1.85-1.989 1.188 0 1.713.702 1.713 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.784 1.15h-.078l-.234-.974h-2.687V92.62zM136.988 92.62h2.999v-5.654c0-1.229.779-1.989 1.85-1.989 1.188 0 1.713.702 1.713 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.784 1.15h-.078l-.234-.974h-2.687V92.62zM152.509 92.796c3.311 0 5.083-2.223 5.083-5.265 0-3.061-1.811-5.284-5.083-5.284-3.271 0-5.082 2.223-5.082 5.284 0 3.062 1.772 5.265 5.082 5.265zm0-2.632c-1.226 0-2.025-.78-2.025-2.633 0-1.833.779-2.652 2.025-2.652 1.247 0 2.026.8 2.026 2.652 0 1.853-.779 2.633-2.026 2.633zM160.742 92.62h3.836l3.194-10.002v-.195h-3.038l-2.006 7.37h-.078l-2.064-7.37h-3.077v.195l3.233 10.003zM171.245 92.796c1.266 0 2.161-.449 2.726-1.092h.078l.214.917h2.688v-6.708c0-2.126-1.675-3.666-4.46-3.666-2.999 0-4.381 1.638-4.381 3.549h2.804c0-.624.545-1.131 1.48-1.131 1.11 0 1.558.546 1.558 1.248v.546h-2.181c-2.805 0-4.09 1.248-4.09 3.14 0 1.813 1.266 3.197 3.564 3.197zm.759-2.34c-.896 0-1.363-.429-1.363-1.014 0-.546.429-.975 1.383-.975h1.928v.43c0 .838-.721 1.56-1.948 1.56zM182.793 92.62h2.064v-2.612h-1.168c-.896 0-1.305-.41-1.305-1.365v-3.666h2.434v-2.554h-2.434V79.75h-2.862v2.672h-1.792v2.554h1.655v4.387c0 1.853 1.052 3.257 3.408 3.257zM186.214 81.214h3.194v-3.042h-3.194v3.042zm.097 11.407h2.999V82.423h-2.999V92.62zM195.272 92.796c3.311 0 5.083-2.223 5.083-5.265 0-3.061-1.811-5.284-5.083-5.284-3.272 0-5.083 2.223-5.083 5.284 0 3.062 1.773 5.265 5.083 5.265zm0-2.632c-1.227 0-2.025-.78-2.025-2.633 0-1.833.779-2.652 2.025-2.652s2.025.8 2.025 2.652c0 1.853-.779 2.633-2.025 2.633zM201.431 92.62h2.999v-5.654c0-1.229.779-1.989 1.85-1.989 1.188 0 1.714.702 1.714 1.872v5.772h2.999v-6.708c0-2.242-1.519-3.666-3.778-3.666-1.324 0-2.22.488-2.785 1.15h-.078l-.234-.974h-2.687V92.62z"),W(Ft,"class","svelte-sdid3b"),W($e,"class","text-group svelte-sdid3b"),W($e,"fill",ht=nt[2]?"#fbf8e9":"#16343e"),W($e,"opacity","1.0")},m(ur,ar){Q(ur,$e,ar),se($e,gt),se($e,Ft),Jt=!0},p(ur,ar){nt=ur,(!Jt||ar&4&&ht!==(ht=nt[2]?"#fbf8e9":"#16343e"))&&W($e,"fill",ht)},i(ur){Jt||(lt(()=>{Et&&Et.end(1),Pt||(Pt=Nt($e,Gr,{duration:al})),Pt.start()}),Jt=!0)},o(ur){Pt&&Pt.invalidate(),Et=nr($e,Gr,{duration:al}),Jt=!1},d(ur){ur&&H($e),ur&&Et&&Et.end()}}}function As(nt){let $e,gt,Ft,ht,Pt,Et,Jt;return{c(){$e=ee("g"),gt=ee("path"),ht=ee("path"),this.h()},l(ur){$e=me(ur,"g",{opacity:!0,class:!0},1);var ar=ue($e);gt=me(ar,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(gt).forEach(H),ht=me(ar,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(ht).forEach(H),ar.forEach(H),this.h()},h(){W(gt,"fill","none"),W(gt,"style",Ft=(nt[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",Tn),W(gt,"class","svelte-sdid3b"),W(ht,"fill","none"),W(ht,"style",Pt=(nt[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(ht,"d",Wn),W(ht,"class","svelte-sdid3b"),W($e,"opacity","0.75"),W($e,"class","svelte-sdid3b")},m(ur,ar){Q(ur,$e,ar),se($e,gt),se($e,ht),Jt=!0},p(ur,ar){nt=ur,(!Jt||ar&4&&Ft!==(Ft=(nt[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",Ft),(!Jt||ar&4&&Pt!==(Pt=(nt[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(ht,"style",Pt)},i(ur){Jt||(Et&&Et.end(1),Jt=!0)},o(ur){Et=nr($e,Gr,{duration:al}),Jt=!1},d(ur){ur&&H($e),ur&&Et&&Et.end()}}}function qo(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar;return{c(){$e=ee("g"),gt=ee("path"),Pt=ee("path"),this.h()},l(xr){$e=me(xr,"g",{opacity:!0,class:!0},1);var Ar=ue($e);gt=me(Ar,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(H),Pt=me(Ar,"path",{style:!0,d:!0,class:!0},1),ue(Pt).forEach(H),Ar.forEach(H),this.h()},h(){W(gt,"style",Ft=(nt[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",Tn),W(gt,"class","svelte-sdid3b"),W(Pt,"style",Et=(nt[2]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"),W(Pt,"d",Wn),W(Pt,"class","svelte-sdid3b"),W($e,"opacity","0.5"),W($e,"class","svelte-sdid3b")},m(xr,Ar){Q(xr,$e,Ar),se($e,gt),se($e,Pt),ar=!0},p(xr,Ar){nt=xr,(!ar||Ar&4&&Ft!==(Ft=(nt[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",Ft),(!ar||Ar&4&&Et!==(Et=(nt[2]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"))&&W(Pt,"style",Et)},i(xr){ar||(ht||lt(()=>{ht=Nt(gt,Mn,{duration:al,delay:Po,easing:_r}),ht.start()}),Jt||lt(()=>{Jt=Nt(Pt,Fr,{duration:Po}),Jt.start()}),ur&&ur.end(1),ar=!0)},o(xr){ur=nr($e,Gr,{duration:al}),ar=!1},d(xr){xr&&H($e),xr&&ur&&ur.end()}}}function Tu(nt){let $e,gt=nt[6].innerHTML+"",Ft;return{c(){Ft=de(),this.h()},l(ht){Ft=de(),this.h()},h(){$e=new tt(Ft)},m(ht,Pt){$e.m(gt,ht,Pt),Q(ht,Ft,Pt)},p:P,i:P,o:P,d(ht){ht&&H(Ft),ht&&$e.d()}}}function Ms(nt){let $e;const gt=nt[9].default,Ft=G(gt,nt,nt[8],null);return{c(){Ft&&Ft.c()},l(ht){Ft&&Ft.l(ht)},m(ht,Pt){Ft&&Ft.m(ht,Pt),$e=!0},p(ht,Pt){Ft&&Ft.p&&Pt&256&&z(Ft,gt,ht,ht[8],Pt,null,null)},i(ht){$e||(Je(Ft,ht),$e=!0)},o(ht){st(Ft,ht),$e=!1},d(ht){Ft&&Ft.d(ht)}}}function Zu(nt){let $e,gt=nt[14].elm().innerHTML+"",Ft;return{c(){Ft=de(),this.h()},l(ht){Ft=de(),this.h()},h(){$e=new tt(Ft)},m(ht,Pt){$e.m(gt,ht,Pt),Q(ht,Ft,Pt)},p(ht,Pt){Pt&2&&gt!==(gt=ht[14].elm().innerHTML+"")&&$e.p(gt)},d(ht){ht&&H(Ft),ht&&$e.d()}}}function Au(nt){let $e,gt=nt[14].label+"",Ft,ht,Pt,Et,Jt,ur,ar,xr;return{c(){$e=re("a"),Ft=ae(gt),Pt=fe(),Et=re("button"),Jt=re("span"),ur=ae("Show submenu for \u201CAbout\u201D"),this.h()},l(Ar){$e=me(Ar,"A",{href:!0,role:!0,class:!0});var mn=ue($e);Ft=be(mn,gt),mn.forEach(H),Pt=Me(Ar),Et=me(Ar,"BUTTON",{class:!0,"aria-haspopup":!0});var Zr=ue(Et);Jt=me(Zr,"SPAN",{class:!0});var bn=ue(Jt);ur=be(bn,"Show submenu for \u201CAbout\u201D"),bn.forEach(H),Zr.forEach(H),this.h()},h(){W($e,"href",ht=nt[14].link),W($e,"role","menuitem"),W($e,"class"," top-level-nav-link svelte-sdid3b"),W(Jt,"class","screen-reader-text svelte-sdid3b"),W(Et,"class","sr-dropdown-button has-dropdown-trigger-indictator dropdown-trigger hover-target svelte-sdid3b"),W(Et,"aria-haspopup","true")},m(Ar,mn){Q(Ar,$e,mn),se($e,Ft),Q(Ar,Pt,mn),Q(Ar,Et,mn),se(Et,Jt),se(Jt,ur),ar||(xr=pe($e,"click",nt[10]),ar=!0)},p(Ar,mn){mn&2&&gt!==(gt=Ar[14].label+"")&&Pe(Ft,gt),mn&2&&ht!==(ht=Ar[14].link)&&W($e,"href",ht)},d(Ar){Ar&&H($e),Ar&&H(Pt),Ar&&H(Et),ar=!1,xr()}}}function su(nt){let $e,gt;function Ft(Et,Jt){return Et[14].link=="#about/"?Au:Zu}let ht=Ft(nt),Pt=ht(nt);return{c(){$e=re("li"),Pt.c(),gt=fe(),this.h()},l(Et){$e=me(Et,"LI",{id:!0,class:!0,"aria-haspopup":!0});var Jt=ue($e);Pt.l(Jt),gt=Me(Jt),Jt.forEach(H),this.h()},h(){W($e,"id","menu-item-12"),W($e,"class","menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-12 col-auto top-level-menu-item svelte-sdid3b"),W($e,"aria-haspopup","true")},m(Et,Jt){Q(Et,$e,Jt),Pt.m($e,null),se($e,gt)},p(Et,Jt){ht===(ht=Ft(Et))&&Pt?Pt.p(Et,Jt):(Pt.d(1),Pt=ht(Et),Pt&&(Pt.c(),Pt.m($e,gt)))},d(Et){Et&&H($e),Pt.d()}}}function Sc(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar,xr,Ar,mn,Zr,bn,Qn,Cn,Hn,ra,qn,Un,Fa,ai,_a,Na,wi,ya,va,Ia,ui,ki,vi,Ci,Xn,oi,Ti,Sa,_o,Zi,qi,zs,Gi,Ni,yo,ts,ls,Ss,Ws,so,Xa,hi,Oo,lo,Eo,Ki,si=!!nt[4]&&Qa(nt);const eo=[Ms,Tu],xo=[];function Oa(aa,Ua){return aa[0]==null?0:1}mn=Oa(nt),Zr=xo[mn]=eo[mn](nt);let Da=nt[1],Za=[];for(let aa=0;aa<Da.length;aa+=1)Za[aa]=su(Bi(nt,Da,aa));return{c(){$e=re("header"),gt=re("div"),Ft=re("div"),ht=re("div"),Pt=re("div"),Et=ee("svg"),Jt=ee("path"),ar=fe(),si&&si.c(),xr=fe(),Ar=re("nav"),Zr.c(),bn=fe(),Qn=re("ul");for(let aa=0;aa<Za.length;aa+=1)Za[aa].c();Cn=fe(),Hn=re("div"),ra=re("a"),qn=re("span"),Un=re("span"),Fa=re("span"),ai=ae("Site Menu"),_a=fe(),Na=re("span"),wi=re("span"),ya=ae("Close Menu"),va=fe(),Ia=re("span"),ui=re("span"),ki=re("span"),vi=ee("svg"),Ci=ee("g"),Xn=ee("rect"),oi=ee("rect"),Ti=ee("rect"),_o=ee("defs"),Zi=ee("clipPath"),qi=ee("path"),zs=fe(),Gi=re("span"),Ni=ee("svg"),yo=ee("path"),hi=fe(),Oo=re("br"),lo=fe(),Eo=re("br"),this.h()},l(aa){$e=me(aa,"HEADER",{id:!0,class:!0,style:!0});var Ua=ue($e);gt=me(Ua,"DIV",{class:!0});var mi=ue(gt);Ft=me(mi,"DIV",{class:!0});var pi=ue(Ft);ht=me(pi,"DIV",{class:!0,style:!0});var wo=ue(ht);Pt=me(wo,"DIV",{class:!0});var Xo=ue(Pt);Et=me(Xo,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,style:!0},1);var ji=ue(Et);Jt=me(ji,"path",{class:!0,fill:!0,d:!0},1),ue(Jt).forEach(H),ji.forEach(H),ar=Me(Xo),si&&si.l(Xo),Xo.forEach(H),xr=Me(wo),Ar=me(wo,"NAV",{class:!0,"data-itemcount":!0,"data-textlength":!0,role:!0,"aria-label":!0});var Ui=ue(Ar);Zr.l(Ui),bn=Me(Ui),Qn=me(Ui,"UL",{id:!0,class:!0});var ps=ue(Qn);for(let xl=0;xl<Za.length;xl+=1)Za[xl].l(ps);ps.forEach(H),Ui.forEach(H),Cn=Me(wo),Hn=me(wo,"DIV",{class:!0});var ds=ue(Hn);ra=me(ds,"A",{href:!0,class:!0,role:!0,labelledby:!0});var or=ue(ra);qn=me(or,"SPAN",{id:!0,class:!0});var To=ue(qn);Un=me(To,"SPAN",{class:!0});var co=ue(Un);Fa=me(co,"SPAN",{class:!0});var zi=ue(Fa);ai=be(zi,"Site Menu"),zi.forEach(H),co.forEach(H),_a=Me(To),Na=me(To,"SPAN",{class:!0,"aria-hidden":!0});var Si=ue(Na);wi=me(Si,"SPAN",{class:!0});var Es=ue(wi);ya=be(Es,"Close Menu"),Es.forEach(H),Si.forEach(H),To.forEach(H),va=Me(or),Ia=me(or,"SPAN",{class:!0,"aria-hidden":!0});var yl=ue(Ia);ui=me(yl,"SPAN",{class:!0});var ys=ue(ui);ki=me(ys,"SPAN",{class:!0,"aria-hidden":!0});var rs=ue(ki);vi=me(rs,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var Ys=ue(vi);Ci=me(Ys,"g",{"clip-path":!0,fill:!0,class:!0},1);var Cs=ue(Ci);Xn=me(Cs,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(Xn).forEach(H),oi=me(Cs,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(oi).forEach(H),Ti=me(Cs,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(Ti).forEach(H),Cs.forEach(H),_o=me(Ys,"defs",{class:!0},1);var ns=ue(_o);Zi=me(ns,"clipPath",{id:!0,class:!0},1);var Sl=ue(Zi);qi=me(Sl,"path",{fill:!0,transform:!0,d:!0,class:!0},1),ue(qi).forEach(H),Sl.forEach(H),ns.forEach(H),Ys.forEach(H),rs.forEach(H),zs=Me(ys),Gi=me(ys,"SPAN",{class:!0,"aria-hidden":!0});var El=ue(Gi);Ni=me(El,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var to=ue(Ni);yo=me(to,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0},1),ue(yo).forEach(H),to.forEach(H),El.forEach(H),ys.forEach(H),yl.forEach(H),or.forEach(H),ds.forEach(H),wo.forEach(H),pi.forEach(H),mi.forEach(H),Ua.forEach(H),hi=Me(aa),Oo=me(aa,"BR",{class:!0}),lo=Me(aa),Eo=me(aa,"BR",{class:!0}),this.h()},h(){W(Jt,"class","border svelte-sdid3b"),W(Jt,"fill",ur=nt[2]?"#26535c":"#fbf8e9"),W(Jt,"d","M115.084 31.849L61.916.809a5.66 5.66 0 00-5.832 0L2.916 31.85C1.118 32.927 0 34.839 0 36.949v62.127c0 2.109 1.118 4.021 2.916 5.1l53.168 31.039c.923.54 1.895.785 2.916.785 1.02 0 2.041-.245 2.916-.785l53.168-31.039c1.798-1.03 2.916-2.991 2.916-5.1V36.948c0-2.108-1.118-4.02-2.916-5.1z"),W(Et,"class","logo-border svelte-sdid3b"),W(Et,"xmlns","http://www.w3.org/2000/svg"),W(Et,"width","308"),W(Et,"height","136"),W(Et,"viewBox","0 0 308 136"),W(Et,"fill","none"),Ge(Et,"background-color","transparent"),W(Pt,"class","site-header__item site-header__main-logo col-auto svelte-sdid3b"),W(Qn,"id","primary-navigation"),W(Qn,"class","row menu justify-content-start site-header__item_inner has-dropdowns has-aria-dropdowns svelte-sdid3b"),W(Ar,"class","site-header__item site-header__menu-section col-auto site-header__primary-menu  over-four-items over-fourty-characters svelte-sdid3b"),W(Ar,"data-itemcount","5"),W(Ar,"data-textlength","42"),W(Ar,"role","navigation"),W(Ar,"aria-label","Primary Navigation"),W(Fa,"class","screen-reader-text svelte-sdid3b"),W(Un,"class","hamburger-control__open-label svelte-sdid3b"),W(wi,"class","screen-reader-text svelte-sdid3b"),W(Na,"class","hamburger-control__close-label svelte-sdid3b"),W(Na,"aria-hidden","true"),W(qn,"id","mm-label"),W(qn,"class","hamburger-control__label svelte-sdid3b"),W(Xn,"y",".5"),W(Xn,"width","20"),W(Xn,"height","3"),W(Xn,"rx","1.5"),W(Xn,"class","svelte-sdid3b"),W(oi,"y","7.5"),W(oi,"width","20"),W(oi,"height","3"),W(oi,"rx","1.5"),W(oi,"class","svelte-sdid3b"),W(Ti,"y","14.5"),W(Ti,"width","20"),W(Ti,"height","3"),W(Ti,"rx","1.5"),W(Ti,"class","svelte-sdid3b"),W(Ci,"clip-path","url(#clip0)"),W(Ci,"fill",Sa=nt[2]?"#fbf8e9":"#16343e"),W(Ci,"class","svelte-sdid3b"),W(qi,"fill","#fff"),W(qi,"transform","translate(0 .5)"),W(qi,"d","M0 0h20v17H0z"),W(qi,"class","svelte-sdid3b"),W(Zi,"id","clip0"),W(Zi,"class","svelte-sdid3b"),W(_o,"class","svelte-sdid3b"),W(vi,"class","menu svelte-sdid3b"),W(vi,"width","20"),W(vi,"height","18"),W(vi,"viewBox","0 0 20 18"),W(vi,"fill","none"),W(vi,"xmlns","http://www.w3.org/2000/svg"),W(ki,"class","hamburger-control__open svelte-sdid3b"),W(ki,"aria-hidden","true"),W(yo,"d","M3.304 20.801L11 13.104l7.698 7.697c.296.297.671.449 1.052.449.38 0 .756-.152 1.052-.449a1.459 1.459 0 000-2.104L13.104 11 20.8 3.303a1.459 1.459 0 000-2.104 1.46 1.46 0 00-2.104 0h0L11 8.898 3.301 1.2a1.46 1.46 0 00-2.103 0h0a1.46 1.46 0 000 2.104L8.834 11 1.2 18.697s0 0 0 0a1.458 1.458 0 00-.012 2.092c.255.326.713.461 1.064.461.38 0 .756-.152 1.052-.449h0z"),W(yo,"fill",ts=nt[2]?"#fbf8e9":"#16343e"),W(yo,"stroke","#16343e"),W(yo,"stroke-width",".5"),W(yo,"class","svelte-sdid3b"),W(Ni,"class","menu-close svelte-sdid3b"),W(Ni,"width","22"),W(Ni,"height","22"),W(Ni,"viewBox","0 0 22 22"),W(Ni,"fill","none"),W(Ni,"xmlns","http://www.w3.org/2000/svg"),W(Gi,"class","hamburger-control__close svelte-sdid3b"),W(Gi,"aria-hidden","true"),W(ui,"class","hamburger-control__inner svelte-sdid3b"),W(Ia,"class",ls=B(nt[2]?"Light-on-Dark hamburger-control":"hamburger-control")+" svelte-sdid3b"),W(Ia,"aria-hidden","true"),W(ra,"href","#primary-footer-menu-section"),W(ra,"class","mobile-menu-toggle__control js-mobile-menu-control js-open-main-menu svelte-sdid3b"),W(ra,"role","button"),W(ra,"labelledby","mm-label"),W(Hn,"class","site-header__item mobile-menu-toggle col svelte-sdid3b"),W(ht,"class",Ss=B(nt[2]?"Light-on-Dark row site-header__row justify-content-between align-items-center":"row site-header__row justify-content-between align-items-center")+" svelte-sdid3b"),Ge(ht,"width","100%"),W(Ft,"class",Ws=B(nt[2]?"Light-on-Dark container":"container")+" svelte-sdid3b"),W(gt,"class",so=B(nt[2]?"Light-on-Dark site-header__inner":"site-header__inner")+" svelte-sdid3b"),W($e,"id","desktop-header"),W($e,"class",Xa=B(nt[2]?"Light-on-Dark site-header":"site-header")+" svelte-sdid3b"),Ge($e,"position","fixed"),Ge($e,"max-width","100%"),Ge($e,"max-height","108px"),Ge($e,"height","75px"),Ge($e,"z-index","1"),W(Oo,"class","svelte-sdid3b"),W(Eo,"class","svelte-sdid3b")},m(aa,Ua){Q(aa,$e,Ua),se($e,gt),se(gt,Ft),se(Ft,ht),se(ht,Pt),se(Pt,Et),se(Et,Jt),se(Pt,ar),si&&si.m(Pt,null),se(ht,xr),se(ht,Ar),xo[mn].m(Ar,null),se(Ar,bn),se(Ar,Qn);for(let mi=0;mi<Za.length;mi+=1)Za[mi].m(Qn,null);se(ht,Cn),se(ht,Hn),se(Hn,ra),se(ra,qn),se(qn,Un),se(Un,Fa),se(Fa,ai),se(qn,_a),se(qn,Na),se(Na,wi),se(wi,ya),se(ra,va),se(ra,Ia),se(Ia,ui),se(ui,ki),se(ki,vi),se(vi,Ci),se(Ci,Xn),se(Ci,oi),se(Ci,Ti),se(vi,_o),se(_o,Zi),se(Zi,qi),se(ui,zs),se(ui,Gi),se(Gi,Ni),se(Ni,yo),Q(aa,hi,Ua),Q(aa,Oo,Ua),Q(aa,lo,Ua),Q(aa,Eo,Ua),Ki=!0},p(aa,[Ua]){(!Ki||Ua&4&&ur!==(ur=aa[2]?"#26535c":"#fbf8e9"))&&W(Jt,"fill",ur),aa[4]?si?(si.p(aa,Ua),Ua&16&&Je(si,1)):(si=Qa(aa),si.c(),Je(si,1),si.m(Pt,null)):si&&(je(),st(si,1,1,()=>{si=null}),ot());let mi=mn;if(mn=Oa(aa),mn===mi?xo[mn].p(aa,Ua):(je(),st(xo[mi],1,1,()=>{xo[mi]=null}),ot(),Zr=xo[mn],Zr||(Zr=xo[mn]=eo[mn](aa),Zr.c()),Je(Zr,1),Zr.m(Ar,bn)),Ua&10){Da=aa[1];let pi;for(pi=0;pi<Da.length;pi+=1){const wo=Bi(aa,Da,pi);Za[pi]?Za[pi].p(wo,Ua):(Za[pi]=su(wo),Za[pi].c(),Za[pi].m(Qn,null))}for(;pi<Za.length;pi+=1)Za[pi].d(1);Za.length=Da.length}(!Ki||Ua&4&&Sa!==(Sa=aa[2]?"#fbf8e9":"#16343e"))&&W(Ci,"fill",Sa),(!Ki||Ua&4&&ts!==(ts=aa[2]?"#fbf8e9":"#16343e"))&&W(yo,"fill",ts),(!Ki||Ua&4&&ls!==(ls=B(aa[2]?"Light-on-Dark hamburger-control":"hamburger-control")+" svelte-sdid3b"))&&W(Ia,"class",ls),(!Ki||Ua&4&&Ss!==(Ss=B(aa[2]?"Light-on-Dark row site-header__row justify-content-between align-items-center":"row site-header__row justify-content-between align-items-center")+" svelte-sdid3b"))&&W(ht,"class",Ss),(!Ki||Ua&4&&Ws!==(Ws=B(aa[2]?"Light-on-Dark container":"container")+" svelte-sdid3b"))&&W(Ft,"class",Ws),(!Ki||Ua&4&&so!==(so=B(aa[2]?"Light-on-Dark site-header__inner":"site-header__inner")+" svelte-sdid3b"))&&W(gt,"class",so),(!Ki||Ua&4&&Xa!==(Xa=B(aa[2]?"Light-on-Dark site-header":"site-header")+" svelte-sdid3b"))&&W($e,"class",Xa)},i(aa){Ki||(Je(si),Je(Zr),Ki=!0)},o(aa){st(si),st(Zr),Ki=!1},d(aa){aa&&H($e),si&&si.d(),xo[mn].d(),oe(Za,aa),aa&&H(hi),aa&&H(Oo),aa&&H(lo),aa&&H(Eo)}}}let zu=!1,Po=1500,al=500;function go(nt,$e,gt){let{$$slots:Ft={},$$scope:ht}=$e,{light_on_dark:Pt=!1}=$e,{innerElms:Et=null}=$e,{nav_links:Jt=[{label:"About",link:"#about/",elm(){const Cn=document.createElement("li");return Cn.className="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-12 col-auto top-level-menu-item",Cn.innerHTML=`
                    <a href="${this.link}" onClick="${Hn=>ur(Hn)}" role="menuitem" class=" top-level-nav-link">${this.label}</a>
`,console.log(`Resulting nav_link (${this.label})`,Cn),Cn},fun(){}}]}=$e,{sidebarFunction:ur=Cn=>{console.log("showSidebar",Cn),Cn.target.data={action:"show",set:!1,path:"target"in Cn&&"hash"in Cn.target?Cn.target.hash:""},Cn.target.dispatchEvent(new CustomEvent("sidebar",Cn))}}=$e,{title:ar=""}=$e,xr=!1,Ar=!1,mn=document.createElement("div");const Zr={};let bn=function(Cn){if(!!Cn&&!zu&&!Ar)return gt(4,xr=!0),setTimeout(()=>{gt(5,Ar=!0)},Po+al),!0;if(!xr)return gt(5,Ar=!1),!1};Wt(function(){console.log("light_on_dark",Pt),gt(4,xr=!0),gt(1,Jt=Jt.map((Cn,Hn,ra)=>(console.log("title:",ar),!!ar&&Cn.link==="#about/"&&(Cn.label=ar),gt(1,Jt[Hn]=Cn,Jt),console.log("label:",Jt[Hn].label),Cn)))});const Qn=Cn=>ur(Cn);return nt.$$set=Cn=>{"light_on_dark"in Cn&&gt(2,Pt=Cn.light_on_dark),"innerElms"in Cn&&gt(0,Et=Cn.innerElms),"nav_links"in Cn&&gt(1,Jt=Cn.nav_links),"sidebarFunction"in Cn&&gt(3,ur=Cn.sidebarFunction),"title"in Cn&&gt(7,ar=Cn.title),"$$scope"in Cn&&gt(8,ht=Cn.$$scope)},nt.$$.update=()=>{nt.$$.dirty&16&&bn(xr),nt.$$.dirty&4097&&function(Hn,ra){if(Et!=null&&console.log("extractLinkContentFromHTML:",Hn.innerHTML),Et!=null&&Hn!=null&&!!Hn.innerHTML){const qn=[...Hn.childNodes];for(const Un of qn)if(Un.nodeType===1&&Un.className.match(/container-fluid/)!==null){const Fa="id"in Un&&!!Un.id?Un.id:Un.innerHTML.toString().substring(0,16)+Un.className+Un.toString();console.log(Fa,Un);const ai=[...Un.childNodes];for(const _a of ai)if(_a.nodeType===1&&_a.className.match(/navbar-nav/)!==null){const Na="id"in _a&&!!_a.id?_a.id:_a.innerHTML.toString().substring(0,16)+_a.className+_a.toString(),wi=_a;if(console.log(Na,_a),console.log(`Found ul elm (${Na}). Remove from inner:`,_a),Un.removeChild(_a),Na in Zr)console.log("Already processed",Na);else if(wi.children.length>0){console.log("Add ul to nav target:");const ya=[..._a.childNodes];for(const va of ya)if(va.nodeType===1){const Ia="id"in va&&!!va.id?va.id:va.innerHTML.toString().substring(0,16)+va.className+va.toString();va.children[0].innerHTML?console.log(`Found link elm (${Ia}). Remove from inner:`,va):(console.log("Found blank link elm. Remove from inner:",va),_a.removeChild(va))}ra.append(wi),gt(12,Zr[Na]=wi,Zr)}}}console.log("Resulting target container:",ra)}gt(0,Et=Hn)}(Et,mn)},[Et,Jt,Pt,ur,xr,Ar,mn,ar,ht,Ft,Qn]}class ah extends tr{constructor($e){super(),ri.getElementById("svelte-sdid3b-style")||Ai(),Bt(this,$e,go,Sc,F,{light_on_dark:2,innerElms:0,nav_links:1,sidebarFunction:3,title:7})}}const{document:lu}=Fe;function Ef(){var nt=re("style");nt.id="svelte-sdid3b-style",nt.textContent=".svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before{box-sizing:border-box}button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{border:0;cursor:pointer;overflow:visible;text-transform:none}svg.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b:not(:root){overflow:hidden}.site-header.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{position:absolute;top:0;left:0;width:100vw}*.Light-on-Dark.site-header.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.site-header.svelte-sdid3b a.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.site-header.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{background-color:#16343e;background-color:#26535c}.site-header__inner.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{background-color:transparent;transition:all .35s ease,background-color 0s}.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{width:100%;padding-left:56px;padding-right:56px;margin-right:0px;margin-left:0px}@media(max-width: 540px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{padding:0 0 0 1em;max-width:100vh;width:100%}}@media(min-width: 640px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 768px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 1024px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:1024px}}@media(min-width: 1080px){.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:100%}}.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{list-style:none;display:flex;flex-wrap:wrap;margin-right:-10px;margin-left:-10px}.justify-content-between.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{justify-content:space-between !important}.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{width:calc(100% + 20px);list-style:none;padding:0;margin:0 0 0 -10px}.site-header__row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{height:76px;flex-wrap:nowrap;transition:.35s ease}@media(min-width: 768px){.site-header__row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{will-change:height}}@media(min-width: 768px){}.col.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b,.col-auto.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{position:relative;width:100%;padding-right:10px;padding-left:10px}.col-auto.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{flex:0 0 auto;width:auto;max-width:100%}.site-header__main-logo.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{max-width:50%;align-self:flex-start}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:143px;height:92px;position:absolute;top:12px;left:0;transition:all .35s ease;transform-origin:top left;pointer-events:none;touch-action:none;background-color:transparent}@media(max-width: 768px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{height:54px}}@media(min-width: 768px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:154px;height:74px;top:4px;left:1px}}@media(min-width: 1200px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:211px;height:92px;will-change:height,width,top,left}}.site-header__main-logo.svelte-sdid3b svg.logo-border.svelte-sdid3b.svelte-sdid3b{fill:none;z-index:0}.header-stuck .site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{top:-1px}@media(min-width: 768px){.header-stuck .site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b.svelte-sdid3b{width:155px;height:100px;top:-3px;left:1px}}.site-header__main-logo.svelte-sdid3b svg .text-group.svelte-sdid3b.svelte-sdid3b{transition:.25s cubic-bezier(.77,0,.175,1)}@media(max-width: 1023px){.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .text g.svelte-sdid3b,.site-header__main-logo.svelte-sdid3b svg .text-group.svelte-sdid3b.svelte-sdid3b{display:none}}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .logo path.svelte-sdid3b,.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b .text path.svelte-sdid3b{fill:#16343e}.header-stuck .site-header__main-logo.svelte-sdid3b svg .border.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.home .menu.svelte-sdid3b g.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.home .site-header__main-logo.svelte-sdid3b .logo path.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.home .site-header__main-logo.svelte-sdid3b .text path.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .menu.svelte-sdid3b g.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .site-header__main-logo.svelte-sdid3b .logo path.svelte-sdid3b.svelte-sdid3b,.topper-has-teal-bg .site-header__main-logo.svelte-sdid3b .text path.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.svelte-sdid3b .site-header__main-logo svg .logo path.svelte-sdid3b.svelte-sdid3b,*.Light-on-Dark.svelte-sdid3b .site-header__main-logo svg .text path.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9}*.Light-on-Dark.svelte-sdid3b .header-stuck .site-header__main-logo svg .border.svelte-sdid3b.svelte-sdid3b{fill:#16343e;fill:#26535c}.site-header__main-logo.svelte-sdid3b svg.svelte-sdid3b path.svelte-sdid3b{transition:all .35s ease,fill 0s}.site-header__menu-section.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex}.site-header__primary-menu.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{padding-top:10px}.site-header__item.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex}.site-header__item.svelte-sdid3b .site-header__item_inner.svelte-sdid3b.svelte-sdid3b{display:flex;align-items:center;flex:1 0 auto}.site-header__menu-section.svelte-sdid3b .menu.svelte-sdid3b.svelte-sdid3b{align-items:stretch;flex-wrap:nowrap}.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{margin-right:0;align-items:center}@media(min-width: 1200px){.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{align-items:center}}.mobile-menu-toggle.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:flex;flex:0 0 0;margin-right:2.5%;order:4;align-items:center}@media(max-width: 820px){.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b.svelte-sdid3b{display:none}}@media(min-width: 820px){.mobile-menu-toggle.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:none}}.hamburger-control__inner.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{background-color:transparent}.hamburger-control__inner.svelte-sdid3b .hamburger-control__open.svelte-sdid3b.svelte-sdid3b{background-color:transparent}.hamburger-control__inner.svelte-sdid3b .hamburger-control__open .menu g.svelte-sdid3b.svelte-sdid3b{fill:#16343E}*.Light-on-Dark.svelte-sdid3b .hamburger-control__inner .hamburger-control__open .menu g.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9 !important}*.Light-on-Dark.svelte-sdid3b .hamburger-control__inner .hamburger-control__close .menu g.svelte-sdid3b.svelte-sdid3b{fill:#fbf8e9 !important}*.hamburger-control__close.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{display:none}.site-header__menu-section.svelte-sdid3b .menu .menu-item.svelte-sdid3b.svelte-sdid3b{align-items:stretch;display:flex}.site-header__row.svelte-sdid3b #primary-navigation.svelte-sdid3b>li.svelte-sdid3b{padding:0 !important;margin:0 12px}.site-header__row.svelte-sdid3b #primary-navigation>li a.svelte-sdid3b.svelte-sdid3b{padding-left:0;padding-right:0}.site-header__primary-menu.svelte-sdid3b .top-level-nav-link.svelte-sdid3b.svelte-sdid3b{padding:0 10px 0 10px}.header-stuck .site-header__menu-section.svelte-sdid3b .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:#16343e !important;display:inline;background-size:0 1px;background-position:0 calc(100% - 4px);background-repeat:no-repeat;transition:.25s cubic-bezier(.77,0,.175,1);transition-duration:.35s;background-image:linear-gradient(#16343e,#16343e) !important}*.Light-on-Dark.svelte-sdid3b .site-header__menu-section .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:rgb(251, 248, 233)}*.Light-on-Dark.svelte-sdid3b .header-stuck .site-header__menu-section .menu .menu-item .top-level-nav-link.svelte-sdid3b.svelte-sdid3b:not(.btn){color:rgb(251, 248, 233) !important}.has-dropdowns.svelte-sdid3b .sub-menu li.svelte-sdid3b.svelte-sdid3b{width:100%;margin:0 0 12px;padding:0;border:0 !important;display:inline-block !important;clear:both}.screen-reader-text.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b:not(:focus):not(:active),.sr-dropdown-button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute !important;width:1px;word-wrap:normal !important}.sr-dropdown-button.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b{flex:0 1 auto;padding:0;margin:0;display:flex;align-items:center;width:auto;height:100%}.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.container.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before,.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::after,.row.svelte-sdid3b.svelte-sdid3b.svelte-sdid3b::before{content:initial !important;display:block !important}",se(lu.head,nt)}function uu(nt,$e,gt){const Ft=nt.slice();return Ft[14]=$e[gt],Ft}function Xl(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar,xr=!!nt[5]&&Mu(nt);const Ar=[pl,ku],mn=[];function Zr(bn,Qn){return bn[5]?1:0}return~(Jt=Zr(nt))&&(ur=mn[Jt]=Ar[Jt](nt)),{c(){$e=ee("svg"),gt=ee("defs"),Ft=ee("mask"),ht=ee("path"),Pt=ee("path"),Et=ee("g"),xr&&xr.c(),ur&&ur.c(),this.h()},l(bn){$e=me(bn,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,style:!0,class:!0},1);var Qn=ue($e);gt=me(Qn,"defs",{class:!0},1);var Cn=ue(gt);Ft=me(Cn,"mask",{id:!0,x:!0,y:!0,width:!0,height:!0,maskUnits:!0,maskContentUnits:!0,class:!0},1);var Hn=ue(Ft);ht=me(Hn,"path",{fill:!0,d:!0,class:!0},1),ue(ht).forEach(H),Pt=me(Hn,"path",{d:!0,fill:!0,class:!0},1),ue(Pt).forEach(H),Hn.forEach(H),Cn.forEach(H),Et=me(Qn,"g",{class:!0,mask:!0},1);var ra=ue(Et);xr&&xr.l(ra),ra.forEach(H),ur&&ur.l(Qn),Qn.forEach(H),this.h()},h(){W(ht,"fill","#fff"),W(ht,"d","M0 0h308v136H0z"),W(ht,"class","svelte-sdid3b"),W(Pt,"d","M115.084 31.849L61.916.809a5.66 5.66 0 00-5.832 0L2.916 31.85C1.118 32.927 0 34.839 0 36.949v62.127c0 2.109 1.118 4.021 2.916 5.1l53.168 31.039c.923.54 1.895.785 2.916.785 1.02 0 2.041-.245 2.916-.785l53.168-31.039c1.798-1.03 2.916-2.991 2.916-5.1V36.948c0-2.108-1.118-4.02-2.916-5.1z"),W(Pt,"fill","#000"),W(Pt,"class","svelte-sdid3b"),W(Ft,"id","border-mask"),W(Ft,"x","0"),W(Ft,"y","0"),W(Ft,"width","308"),W(Ft,"height","136"),W(Ft,"maskUnits","userSpaceOnUse"),W(Ft,"maskContentUnits","userSpaceOnUse"),W(Ft,"class","svelte-sdid3b"),W(gt,"class","svelte-sdid3b"),W(Et,"class","text svelte-sdid3b"),W(Et,"mask","url(#border-mask)"),W($e,"xmlns","http://www.w3.org/2000/svg"),W($e,"width","308"),W($e,"height","136"),W($e,"viewBox","0 0 308 136"),W($e,"fill","none"),Ge($e,"background-color","transparent"),W($e,"class","svelte-sdid3b")},m(bn,Qn){Q(bn,$e,Qn),se($e,gt),se(gt,Ft),se(Ft,ht),se(Ft,Pt),se($e,Et),xr&&xr.m(Et,null),~Jt&&mn[Jt].m($e,null),ar=!0},p(bn,Qn){bn[5]?xr?(xr.p(bn,Qn),Qn&32&&Je(xr,1)):(xr=Mu(bn),xr.c(),Je(xr,1),xr.m(Et,null)):xr&&(je(),st(xr,1,1,()=>{xr=null}),ot());let Cn=Jt;Jt=Zr(bn),Jt===Cn?~Jt&&mn[Jt].p(bn,Qn):(ur&&(je(),st(mn[Cn],1,1,()=>{mn[Cn]=null}),ot()),~Jt?(ur=mn[Jt],ur||(ur=mn[Jt]=Ar[Jt](bn),ur.c()),Je(ur,1),ur.m($e,null)):ur=null)},i(bn){ar||(Je(xr),Je(ur),ar=!0)},o(bn){st(xr),st(ur),ar=!1},d(bn){bn&&H($e),xr&&xr.d(),~Jt&&mn[Jt].d()}}}function Mu(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar,xr,Ar,mn,Zr,bn,Qn,Cn,Hn,ra,qn,Un,Fa,ai,_a,Na,wi,ya,va,Ia,ui,ki,vi,Ci,Xn,oi;return{c(){$e=ee("g"),gt=ee("path"),Ft=ee("path"),ht=ee("path"),Pt=ee("path"),Et=ee("path"),Jt=ee("path"),ur=ee("path"),ar=ee("path"),xr=ee("path"),Ar=ee("path"),mn=ee("path"),Zr=ee("path"),bn=ee("path"),Qn=ee("path"),Cn=ee("path"),Hn=ee("path"),ra=ee("path"),qn=ee("path"),Un=ee("path"),Fa=ee("path"),ai=ee("path"),_a=ee("path"),Na=ee("path"),wi=ee("path"),ya=ee("path"),va=ee("path"),Ia=ee("path"),ui=ee("path"),ki=ee("path"),this.h()},l(Ti){$e=me(Ti,"g",{class:!0,fill:!0,opacity:!0,transform:!0},1);var Sa=ue($e);gt=me(Sa,"path",{class:!0,d:!0},1),ue(gt).forEach(H),Ft=me(Sa,"path",{class:!0,d:!0},1),ue(Ft).forEach(H),ht=me(Sa,"path",{class:!0,d:!0},1),ue(ht).forEach(H),Pt=me(Sa,"path",{class:!0,d:!0},1),ue(Pt).forEach(H),Et=me(Sa,"path",{class:!0,d:!0},1),ue(Et).forEach(H),Jt=me(Sa,"path",{class:!0,d:!0},1),ue(Jt).forEach(H),ur=me(Sa,"path",{class:!0,d:!0},1),ue(ur).forEach(H),ar=me(Sa,"path",{class:!0,d:!0},1),ue(ar).forEach(H),xr=me(Sa,"path",{class:!0,d:!0},1),ue(xr).forEach(H),Ar=me(Sa,"path",{class:!0,d:!0},1),ue(Ar).forEach(H),mn=me(Sa,"path",{class:!0,d:!0},1),ue(mn).forEach(H),Zr=me(Sa,"path",{class:!0,d:!0},1),ue(Zr).forEach(H),bn=me(Sa,"path",{class:!0,d:!0},1),ue(bn).forEach(H),Qn=me(Sa,"path",{class:!0,d:!0},1),ue(Qn).forEach(H),Cn=me(Sa,"path",{class:!0,d:!0},1),ue(Cn).forEach(H),Hn=me(Sa,"path",{class:!0,d:!0},1),ue(Hn).forEach(H),ra=me(Sa,"path",{class:!0,d:!0},1),ue(ra).forEach(H),qn=me(Sa,"path",{class:!0,d:!0},1),ue(qn).forEach(H),Un=me(Sa,"path",{class:!0,d:!0},1),ue(Un).forEach(H),Fa=me(Sa,"path",{class:!0,d:!0},1),ue(Fa).forEach(H),ai=me(Sa,"path",{class:!0,d:!0},1),ue(ai).forEach(H),_a=me(Sa,"path",{class:!0,d:!0},1),ue(_a).forEach(H),Na=me(Sa,"path",{class:!0,d:!0},1),ue(Na).forEach(H),wi=me(Sa,"path",{class:!0,d:!0},1),ue(wi).forEach(H),ya=me(Sa,"path",{class:!0,d:!0},1),ue(ya).forEach(H),va=me(Sa,"path",{class:!0,d:!0},1),ue(va).forEach(H),Ia=me(Sa,"path",{class:!0,d:!0},1),ue(Ia).forEach(H),ui=me(Sa,"path",{class:!0,d:!0},1),ue(ui).forEach(H),ki=me(Sa,"path",{class:!0,d:!0},1),ue(ki).forEach(H),Sa.forEach(H),this.h()},h(){W(gt,"class","st0 svelte-sdid3b"),W(gt,"d","m 163.17322,54.246193 c 2.19355,-0.865875 3.55008,-2.828524 3.55008,-5.426148 0,-3.059424 -2.30899,-5.714772 -6.14771,-5.714772 h -8.2258 v 17.981329 h 4.04074 v -6.349747 h 2.51104 l 3.86757,6.349747 h 4.73345 V 60.82684 Z m -6.78269,-7.53311 h 3.98303 c 1.55857,0 2.22241,1.067912 2.22241,2.164687 0,1.125637 -0.57725,2.280136 -2.22241,2.280136 h -3.98303 z"),W(Ft,"class","st0 svelte-sdid3b"),W(Ft,"d","m 173.53485,61.317502 c 1.76061,0 2.91511,-0.634975 3.66554,-1.529712 h 0.11545 l 0.31748,1.26995 h 3.52123 V 47.636683 h -3.95416 v 7.446522 c 0,1.616299 -1.03905,2.626486 -2.45331,2.626486 -1.55858,0 -2.25128,-0.9236 -2.25128,-2.453311 v -7.590834 h -3.95416 v 8.831921 c 0,2.943973 1.99151,4.820035 4.99321,4.820035 z"),W(ht,"class","st0 svelte-sdid3b"),W(ht,"d","m 182.91516,61.086602 h 3.6944 V 54.44823 c 0,-2.164687 1.21222,-3.405773 3.08828,-3.405773 h 1.29882 v -3.607811 h -0.9236 c -1.73175,0 -2.85739,1.010187 -3.43464,2.193549 h -0.11545 l -0.31749,-1.962649 h -3.29032 z"),W(Pt,"class","st0 svelte-sdid3b"),W(Pt,"d","m 196.04759,61.317502 c 1.67403,0 2.85739,-0.57725 3.60781,-1.443124 h 0.11545 l 0.28863,1.212224 h 3.55008 v -8.831921 c 0,-2.799661 -2.22241,-4.820035 -5.88794,-4.820035 -3.95417,0 -5.7725,2.164686 -5.7725,4.675723 h 3.6944 c 0,-0.80815 0.72156,-1.50085 1.96265,-1.50085 1.47198,0 2.04923,0.721562 2.04923,1.645162 v 0.721562 h -2.88625 c -3.69439,0 -5.39728,1.645162 -5.39728,4.127336 -0.0289,2.395586 1.64516,4.213923 4.67572,4.213923 z m 1.01019,-3.088286 c -1.18336,0 -1.78948,-0.57725 -1.78948,-1.327675 0,-0.721562 0.57725,-1.269949 1.81834,-1.269949 h 2.5399 v 0.57725 c 0,1.067912 -0.95246,2.020374 -2.56876,2.020374 z"),W(Et,"class","st0 svelte-sdid3b"),W(Et,"d","m 205.37017,61.086602 h 3.95417 V 42.066223 h -3.95417 z"),W(Jt,"class","st0 svelte-sdid3b"),W(Jt,"d","m 152.34979,85.331091 h 4.06961 V 67.349762 h -4.06961 z"),W(ur,"class","st0 svelte-sdid3b"),W(ur,"d","m 158.98816,85.331091 h 3.95416 v -7.446522 c 0,-1.616299 1.03905,-2.626486 2.45331,-2.626486 1.55857,0 2.25127,0.9236 2.25127,2.453312 v 7.619696 h 3.95416 V 76.49917 c 0,-2.943974 -1.99151,-4.820035 -4.99321,-4.820035 -1.76061,0 -2.91511,0.634974 -3.66553,1.529712 h -0.11545 l -0.31749,-1.26995 h -3.55008 v 13.392194 z"),W(ar,"class","st0 svelte-sdid3b"),W(ar,"d","m 173.39054,85.331091 h 3.95416 v -7.446522 c 0,-1.616299 1.03905,-2.626486 2.45331,-2.626486 1.55858,0 2.25128,0.9236 2.25128,2.453312 v 7.619696 h 3.95416 V 76.49917 c 0,-2.943974 -1.99152,-4.820035 -4.99321,-4.820035 -1.76062,0 -2.91512,0.634974 -3.66554,1.529712 h -0.11545 l -0.31749,-1.26995 h -3.55008 v 13.392194 z"),W(xr,"class","st0 svelte-sdid3b"),W(xr,"d","m 193.85404,85.561991 c 4.35824,0 6.6961,-2.915111 6.6961,-6.926997 0,-4.040748 -2.39559,-6.955859 -6.6961,-6.955859 -4.32937,0 -6.69609,2.915111 -6.69609,6.955859 0,4.011886 2.33786,6.926997 6.69609,6.926997 z m 0,-3.463498 c -1.6163,0 -2.68421,-1.03905 -2.68421,-3.463499 0,-2.424449 1.03905,-3.492361 2.68421,-3.492361 1.64516,0 2.68421,1.03905 2.68421,3.492361 0,2.453311 -1.03905,3.463499 -2.68421,3.463499 z"),W(Ar,"class","st0 svelte-sdid3b"),W(Ar,"d","m 204.7352,85.331091 h 5.05094 l 4.21392,-13.190156 v -0.259763 h -4.01189 l -2.65535,9.697796 h -0.11545 l -2.71307,-9.697796 h -4.06961 v 0.259763 z"),W(mn,"class","st0 svelte-sdid3b"),W(mn,"d","m 218.58919,85.561991 c 1.67403,0 2.85739,-0.57725 3.60781,-1.443124 h 0.11545 l 0.28863,1.212224 h 3.55009 V 76.49917 c 0,-2.799661 -2.22242,-4.820035 -5.88795,-4.820035 -3.95416,0 -5.7725,2.164686 -5.7725,4.675723 h 3.6944 c 0,-0.80815 0.72156,-1.50085 1.96265,-1.50085 1.47198,0 2.04923,0.721562 2.04923,1.645162 v 0.721562 h -2.88624 c -3.6944,0 -5.39729,1.645162 -5.39729,4.127336 -0.0289,2.395586 1.64516,4.213923 4.67572,4.213923 z m 0.98133,-3.088286 c -1.18336,0 -1.78948,-0.57725 -1.78948,-1.327675 0,-0.721562 0.57725,-1.269949 1.81834,-1.269949 h 2.5399 v 0.57725 c 0,1.067912 -0.9236,2.020374 -2.56876,2.020374 z"),W(Zr,"class","st0 svelte-sdid3b"),W(Zr,"d","m 233.82859,85.331091 h 2.71307 v -3.434636 h -1.52971 c -1.18336,0 -1.73175,-0.548387 -1.73175,-1.789474 v -4.820035 h 3.20374 v -3.376911 h -3.20374 v -3.521224 h -3.78099 v 3.521224 h -2.36672 v 3.376911 h 2.19355 v 5.772497 c 0,2.424449 1.3854,4.271648 4.50255,4.271648 z"),W(bn,"class","st0 svelte-sdid3b"),W(bn,"d","m 238.33113,70.293735 h 4.21393 V 66.28185 h -4.21393 z m 0.11545,15.037356 h 3.95417 V 71.910035 h -3.95417 z"),W(Qn,"class","st0 svelte-sdid3b"),W(Qn,"d","m 250.2802,85.561991 c 4.35824,0 6.6961,-2.915111 6.6961,-6.926997 0,-4.040748 -2.39559,-6.955859 -6.6961,-6.955859 -4.32937,0 -6.69609,2.915111 -6.69609,6.955859 0,4.011886 2.33786,6.926997 6.69609,6.926997 z m 0,-3.463498 c -1.61629,0 -2.68421,-1.03905 -2.68421,-3.463499 0,-2.424449 1.03905,-3.492361 2.68421,-3.492361 1.64517,0 2.68422,1.03905 2.68422,3.492361 0,2.453311 -1.03905,3.463499 -2.68422,3.463499 z"),W(Cn,"class","st0 svelte-sdid3b"),W(Cn,"d","m 258.39056,85.331091 h 3.95416 v -7.446522 c 0,-1.616299 1.03905,-2.626486 2.45332,-2.626486 1.55857,0 2.25127,0.9236 2.25127,2.453312 v 7.619696 h 3.95416 V 76.49917 c 0,-2.943974 -1.99151,-4.820035 -4.99321,-4.820035 -1.76061,0 -2.91511,0.634974 -3.66554,1.529712 h -0.0866 l -0.31749,-1.26995 h -3.55009 z"),W(Hn,"class","st0 svelte-sdid3b"),W(Hn,"d","m 158.64181,109.80648 c 5.39728,0 7.50424,-2.309 7.50424,-5.51273 0,-3.52123 -2.53989,-4.877765 -5.88794,-5.570465 L 157.8048,98.20376 c -1.67403,-0.34635 -2.02038,-0.981324 -2.02038,-1.674024 0,-0.750425 0.72156,-1.558574 2.82853,-1.558574 2.13582,0 3.03056,1.067912 3.14601,2.251274 h 4.09847 c -0.0289,-3.434636 -3.05942,-5.859085 -7.1579,-5.859085 -4.24278,0 -7.01358,2.135824 -7.01358,5.166385 0,3.434636 2.45331,4.733444 5.5416,5.397284 l 2.62648,0.57725 c 1.58744,0.34635 2.19355,0.9236 2.19355,1.90492 0,1.06792 -0.89474,1.8472 -3.37691,1.8472 -1.96265,0 -3.31919,-0.86587 -3.49236,-2.82852 h -4.09847 c 0.2309,3.86757 2.7708,6.37861 7.56197,6.37861 z"),W(ra,"class","st0 svelte-sdid3b"),W(ra,"d","m 173.47713,109.57558 h 2.71307 v -3.43464 h -1.52971 c -1.18336,0 -1.73175,-0.54838 -1.73175,-1.78947 v -4.820035 h 3.20374 v -3.376911 h -3.20374 V 92.6333 h -3.78099 v 3.521224 h -2.36672 v 3.376911 h 2.19355 v 5.772495 c 0,2.42445 1.3854,4.27165 4.50255,4.27165 z"),W(qn,"class","st0 svelte-sdid3b"),W(qn,"d","m 178.12399,109.57558 h 3.6944 v -6.63837 c 0,-2.16469 1.21222,-3.405775 3.08828,-3.405775 h 1.29881 v -3.607811 h -0.9236 c -1.73175,0 -2.85738,1.010187 -3.43463,2.193549 h -0.11545 l -0.31749,-1.962649 h -3.29032 z"),W(Un,"class","st0 svelte-sdid3b"),W(Un,"d","m 191.25642,109.80648 c 1.67402,0 2.85738,-0.57725 3.60781,-1.44312 h 0.11545 l 0.28862,1.21222 h 3.55009 v -8.83192 c 0,-2.799662 -2.22241,-4.820036 -5.88795,-4.820036 -3.95416,0 -5.77249,2.164686 -5.77249,4.675726 h 3.69439 c 0,-0.808153 0.72157,-1.500853 1.96265,-1.500853 1.47199,0 2.04924,0.721563 2.04924,1.645163 v 0.72156 h -2.88625 c -3.6944,0 -5.39728,1.64516 -5.39728,4.12734 -0.0289,2.39558 1.64516,4.21392 4.67572,4.21392 z m 1.01019,-3.08829 c -1.18337,0 -1.78948,-0.57725 -1.78948,-1.32767 0,-0.72156 0.57725,-1.29881 1.81834,-1.29881 h 2.5399 v 0.57725 c 0,1.09677 -0.95247,2.04923 -2.56876,2.04923 z"),W(Fa,"class","st0 svelte-sdid3b"),W(Fa,"d","m 206.49581,109.57558 h 2.71308 v -3.43464 h -1.52972 c -1.18336,0 -1.73175,-0.54838 -1.73175,-1.78947 v -4.820035 h 3.20374 v -3.376911 h -3.20374 V 92.6333 h -3.78098 v 3.521224 h -2.36673 v 3.376911 h 2.19355 v 5.772495 c 0,2.42445 1.3854,4.27165 4.50255,4.27165 z"),W(ai,"class","st0 svelte-sdid3b"),W(ai,"d","m 217.14607,109.80648 c 3.66554,0 5.80136,-2.13582 6.17657,-4.56027 h -3.83871 c -0.2309,0.60611 -0.86587,1.32767 -2.33786,1.32767 -1.78947,0 -2.59762,-1.09677 -2.62649,-2.68421 h 8.97624 v -1.47199 c 0,-3.63667 -2.309,-6.551781 -6.40748,-6.551781 -4.35823,0 -6.58064,3.146011 -6.58064,6.955861 0,3.89643 2.39558,6.98472 6.63837,6.98472 z m -2.59762,-8.37012 c 0.0866,-1.26995 0.80815,-2.280138 2.51103,-2.280138 1.55858,0 2.309,1.010188 2.39559,2.280138 z"),W(_a,"class","st0 svelte-sdid3b"),W(_a,"d","m 230.7403,115.69443 c 3.75212,0 6.58065,-2.10696 6.58065,-5.48388 V 96.125661 h -3.55009 l -0.40407,1.298812 h -0.11545 c -0.63498,-0.779287 -1.67403,-1.529712 -3.57895,-1.529712 -3.37691,0 -5.45501,2.915111 -5.45501,6.955859 0,4.01189 2.04924,6.927 5.45501,6.927 1.90492,0 2.91511,-0.75043 3.57895,-1.52971 h 0.11545 v 1.87606 c 0,1.21222 -0.86588,2.13582 -2.62649,2.13582 -1.24109,0 -2.13582,-0.66384 -2.22241,-1.55857 h -3.86757 c 0.0577,3.05942 2.48217,4.99321 6.08998,4.99321 z m 0.17318,-9.35145 c -1.99152,0 -2.65535,-1.58744 -2.65535,-3.4635 0,-1.87606 0.6927,-3.492358 2.65535,-3.492358 1.96264,0 2.65534,1.616298 2.65534,3.492358 0,1.87606 -0.66383,3.4635 -2.65534,3.4635 z"),W(Na,"class","st0 svelte-sdid3b"),W(Na,"d","m 238.99497,94.538224 h 4.21392 v -4.011885 h -4.21392 z m 0.14431,15.037356 h 3.95417 V 96.154524 h -3.95417 z"),W(wi,"class","st0 svelte-sdid3b"),W(wi,"d","m 250.91518,109.80648 c 3.66553,0 5.80136,-2.13582 6.17657,-4.56027 h -3.83871 c -0.2309,0.60611 -0.86587,1.32767 -2.33786,1.32767 -1.78948,0 -2.59762,-1.09677 -2.62649,-2.68421 h 8.97624 v -1.47199 c 0,-3.63667 -2.309,-6.551781 -6.40748,-6.551781 -4.35823,0 -6.58064,3.146011 -6.58064,6.955861 -0.0289,3.89643 2.39558,6.98472 6.63837,6.98472 z m -2.59762,-8.37012 c 0.0866,-1.26995 0.80814,-2.280138 2.51103,-2.280138 1.55858,0 2.309,1.010188 2.39559,2.280138 z"),W(ya,"class","st0 svelte-sdid3b"),W(ya,"d","m 263.96102,109.80648 c 3.40578,0 5.88795,-1.52971 5.88795,-4.30051 0,-2.82852 -1.93379,-3.78099 -3.98302,-4.1562 l -2.56876,-0.49066 c -0.63498,-0.11545 -1.01019,-0.40408 -1.01019,-0.923601 0,-0.519524 0.57725,-0.923599 1.55857,-0.923599 1.32768,0 1.78948,0.779287 1.76061,1.3854 h 3.89644 c 0,-2.482175 -2.10696,-4.502549 -5.59932,-4.502549 -3.60781,0 -5.51274,1.789475 -5.51274,3.983024 0,2.684215 1.96265,3.809845 4.09848,4.213925 l 1.99151,0.37521 c 0.9236,0.17317 1.35653,0.4618 1.35653,1.03905 0,0.4618 -0.49066,0.98132 -1.90492,0.98132 -1.41426,0 -1.99151,-0.75042 -1.99151,-1.50085 h -3.95416 c 0.0866,2.79967 1.78947,4.82004 5.97453,4.82004 z"),W(va,"class","st0 svelte-sdid3b"),W(va,"d","m 278.44999,109.57558 h 4.06961 V 91.594251 h -4.06961 z"),W(Ia,"class","st0 svelte-sdid3b"),W(Ia,"d","m 285.08836,109.57558 h 3.95416 v -7.44652 c 0,-1.6163 1.03905,-2.626488 2.45332,-2.626488 1.55857,0 2.25127,0.923598 2.25127,2.453308 v 7.6197 h 3.95416 v -8.83192 c 0,-2.943975 -1.99151,-4.820036 -4.99321,-4.820036 -1.76061,0 -2.91511,0.634975 -3.66554,1.529712 h -0.11545 l -0.31748,-1.298812 h -3.55009 v 13.421056 z"),W(ui,"class","st0 svelte-sdid3b"),W(ui,"d","m 305.60959,109.80648 c 3.89644,0 5.94567,-2.42445 6.11885,-5.51273 h -3.98302 c -0.11545,1.18336 -0.95247,2.04923 -2.22242,2.04923 -1.67402,0 -2.62648,-1.03905 -2.62648,-3.49236 0,-2.42445 0.95246,-3.463498 2.62648,-3.463498 1.29882,0 2.10697,0.865878 2.22242,2.049238 h 3.98302 c -0.17318,-3.11715 -2.22241,-5.512736 -6.20544,-5.512736 -4.30051,0 -6.63837,2.886248 -6.63837,6.926996 -0.0289,4.06961 2.42445,6.95586 6.72496,6.95586 z"),W(ki,"class","st0 svelte-sdid3b"),W(ki,"d","m 312.85408,109.57558 h 4.21392 v -4.01189 h -4.21392 z"),W($e,"class","text-group svelte-sdid3b"),W($e,"fill",vi=nt[2]?"#fbf8e9":"#16343e"),W($e,"opacity","1.0"),W($e,"transform","scale(0.75, 0.76) translate(9, 12)")},m(Ti,Sa){Q(Ti,$e,Sa),se($e,gt),se($e,Ft),se($e,ht),se($e,Pt),se($e,Et),se($e,Jt),se($e,ur),se($e,ar),se($e,xr),se($e,Ar),se($e,mn),se($e,Zr),se($e,bn),se($e,Qn),se($e,Cn),se($e,Hn),se($e,ra),se($e,qn),se($e,Un),se($e,Fa),se($e,ai),se($e,_a),se($e,Na),se($e,wi),se($e,ya),se($e,va),se($e,Ia),se($e,ui),se($e,ki),oi=!0},p(Ti,Sa){nt=Ti,(!oi||Sa&4&&vi!==(vi=nt[2]?"#fbf8e9":"#16343e"))&&W($e,"fill",vi)},i(Ti){oi||(lt(()=>{Xn&&Xn.end(1),Ci||(Ci=Nt($e,Gr,{duration:Gs})),Ci.start()}),oi=!0)},o(Ti){Ci&&Ci.invalidate(),Xn=nr($e,Gr,{duration:Gs}),oi=!1},d(Ti){Ti&&H($e),Ti&&Xn&&Xn.end()}}}function ku(nt){let $e,gt,Ft,ht,Pt,Et,Jt;return{c(){$e=ee("g"),gt=ee("path"),ht=ee("path"),this.h()},l(ur){$e=me(ur,"g",{opacity:!0,transform:!0,class:!0},1);var ar=ue($e);gt=me(ar,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(gt).forEach(H),ht=me(ar,"path",{fill:!0,style:!0,d:!0,class:!0},1),ue(ht).forEach(H),ar.forEach(H),this.h()},h(){W(gt,"fill","none"),W(gt,"style",Ft=(nt[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",jn),W(gt,"class","svelte-sdid3b"),W(ht,"fill","none"),W(ht,"style",Pt=(nt[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(ht,"d",Nn),W(ht,"class","svelte-sdid3b"),W($e,"opacity","0.75"),W($e,"transform","scale(0.75, 0.76) translate(9, 12)"),W($e,"class","svelte-sdid3b")},m(ur,ar){Q(ur,$e,ar),se($e,gt),se($e,ht),Jt=!0},p(ur,ar){nt=ur,(!Jt||ar&4&&Ft!==(Ft=(nt[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",Ft),(!Jt||ar&4&&Pt!==(Pt=(nt[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(ht,"style",Pt)},i(ur){Jt||(Et&&Et.end(1),Jt=!0)},o(ur){Et=nr($e,Gr,{duration:Gs}),Jt=!1},d(ur){ur&&H($e),ur&&Et&&Et.end()}}}function pl(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar;return{c(){$e=ee("g"),gt=ee("path"),Pt=ee("path"),this.h()},l(xr){$e=me(xr,"g",{opacity:!0,transform:!0,class:!0},1);var Ar=ue($e);gt=me(Ar,"path",{style:!0,d:!0,class:!0},1),ue(gt).forEach(H),Pt=me(Ar,"path",{style:!0,d:!0,class:!0},1),ue(Pt).forEach(H),Ar.forEach(H),this.h()},h(){W(gt,"style",Ft=(nt[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"),W(gt,"d",jn),W(gt,"class","svelte-sdid3b"),W(Pt,"style",Et=(nt[2]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"),W(Pt,"d",Nn),W(Pt,"class","svelte-sdid3b"),W($e,"opacity","0.5"),W($e,"transform","scale(0.75, 0.76) translate(9, 12)"),W($e,"class","svelte-sdid3b")},m(xr,Ar){Q(xr,$e,Ar),se($e,gt),se($e,Pt),ar=!0},p(xr,Ar){nt=xr,(!ar||Ar&4&&Ft!==(Ft=(nt[2]?"fill: #fbf8e9; ":"fill: #16343e; ")+"stroke: none;"))&&W(gt,"style",Ft),(!ar||Ar&4&&Et!==(Et=(nt[2]?"stroke: #fbf8e9; ":"stroke: #16343e; ")+"fill: none; stroke-width: 1.5;"))&&W(Pt,"style",Et)},i(xr){ar||(ht||lt(()=>{ht=Nt(gt,Mn,{duration:Gs,delay:$i,easing:_r}),ht.start()}),Jt||lt(()=>{Jt=Nt(Pt,Fr,{duration:$i}),Jt.start()}),ur&&ur.end(1),ar=!0)},o(xr){ur=nr($e,Gr,{duration:Gs}),ar=!1},d(xr){xr&&H($e),xr&&ur&&ur.end()}}}function il(nt){let $e,gt=nt[6].innerHTML+"",Ft;return{c(){Ft=de(),this.h()},l(ht){Ft=de(),this.h()},h(){$e=new tt(Ft)},m(ht,Pt){$e.m(gt,ht,Pt),Q(ht,Ft,Pt)},p:P,i:P,o:P,d(ht){ht&&H(Ft),ht&&$e.d()}}}function Ou(nt){let $e;const gt=nt[9].default,Ft=G(gt,nt,nt[8],null);return{c(){Ft&&Ft.c()},l(ht){Ft&&Ft.l(ht)},m(ht,Pt){Ft&&Ft.m(ht,Pt),$e=!0},p(ht,Pt){Ft&&Ft.p&&Pt&256&&z(Ft,gt,ht,ht[8],Pt,null,null)},i(ht){$e||(Je(Ft,ht),$e=!0)},o(ht){st(Ft,ht),$e=!1},d(ht){Ft&&Ft.d(ht)}}}function Su(nt){let $e,gt=nt[14].elm().innerHTML+"",Ft;return{c(){Ft=de(),this.h()},l(ht){Ft=de(),this.h()},h(){$e=new tt(Ft)},m(ht,Pt){$e.m(gt,ht,Pt),Q(ht,Ft,Pt)},p(ht,Pt){Pt&2&&gt!==(gt=ht[14].elm().innerHTML+"")&&$e.p(gt)},d(ht){ht&&H(Ft),ht&&$e.d()}}}function Zl(nt){let $e,gt=nt[14].label+"",Ft,ht,Pt,Et,Jt,ur,ar,xr;return{c(){$e=re("a"),Ft=ae(gt),Pt=fe(),Et=re("button"),Jt=re("span"),ur=ae("Show submenu for \u201CAbout\u201D"),this.h()},l(Ar){$e=me(Ar,"A",{href:!0,role:!0,class:!0});var mn=ue($e);Ft=be(mn,gt),mn.forEach(H),Pt=Me(Ar),Et=me(Ar,"BUTTON",{class:!0,"aria-haspopup":!0});var Zr=ue(Et);Jt=me(Zr,"SPAN",{class:!0});var bn=ue(Jt);ur=be(bn,"Show submenu for \u201CAbout\u201D"),bn.forEach(H),Zr.forEach(H),this.h()},h(){W($e,"href",ht=nt[14].link),W($e,"role","menuitem"),W($e,"class"," top-level-nav-link svelte-sdid3b"),W(Jt,"class","screen-reader-text svelte-sdid3b"),W(Et,"class","sr-dropdown-button has-dropdown-trigger-indictator dropdown-trigger hover-target svelte-sdid3b"),W(Et,"aria-haspopup","true")},m(Ar,mn){Q(Ar,$e,mn),se($e,Ft),Q(Ar,Pt,mn),Q(Ar,Et,mn),se(Et,Jt),se(Jt,ur),ar||(xr=pe($e,"click",nt[10]),ar=!0)},p(Ar,mn){mn&2&&gt!==(gt=Ar[14].label+"")&&Pe(Ft,gt),mn&2&&ht!==(ht=Ar[14].link)&&W($e,"href",ht)},d(Ar){Ar&&H($e),Ar&&H(Pt),Ar&&H(Et),ar=!1,xr()}}}function dl(nt){let $e,gt;function Ft(Et,Jt){return Et[14].link=="#about/"?Zl:Su}let ht=Ft(nt),Pt=ht(nt);return{c(){$e=re("li"),Pt.c(),gt=fe(),this.h()},l(Et){$e=me(Et,"LI",{id:!0,class:!0,"aria-haspopup":!0});var Jt=ue($e);Pt.l(Jt),gt=Me(Jt),Jt.forEach(H),this.h()},h(){W($e,"id","menu-item-12"),W($e,"class","menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-12 col-auto top-level-menu-item svelte-sdid3b"),W($e,"aria-haspopup","true")},m(Et,Jt){Q(Et,$e,Jt),Pt.m($e,null),se($e,gt)},p(Et,Jt){ht===(ht=Ft(Et))&&Pt?Pt.p(Et,Jt):(Pt.d(1),Pt=ht(Et),Pt&&(Pt.c(),Pt.m($e,gt)))},d(Et){Et&&H($e),Pt.d()}}}function lc(nt){let $e,gt,Ft,ht,Pt,Et,Jt,ur,ar,xr,Ar,mn,Zr,bn,Qn,Cn,Hn,ra,qn,Un,Fa,ai,_a,Na,wi,ya,va,Ia,ui,ki,vi,Ci,Xn,oi,Ti,Sa,_o,Zi,qi,zs,Gi,Ni,yo,ts,ls,Ss,Ws,so,Xa,hi,Oo,lo,Eo,Ki,si=!!nt[4]&&Xl(nt);const eo=[Ou,il],xo=[];function Oa(aa,Ua){return aa[0]==null?0:1}mn=Oa(nt),Zr=xo[mn]=eo[mn](nt);let Da=nt[1],Za=[];for(let aa=0;aa<Da.length;aa+=1)Za[aa]=dl(uu(nt,Da,aa));return{c(){$e=re("header"),gt=re("div"),Ft=re("div"),ht=re("div"),Pt=re("div"),Et=ee("svg"),Jt=ee("path"),ar=fe(),si&&si.c(),xr=fe(),Ar=re("nav"),Zr.c(),bn=fe(),Qn=re("ul");for(let aa=0;aa<Za.length;aa+=1)Za[aa].c();Cn=fe(),Hn=re("div"),ra=re("a"),qn=re("span"),Un=re("span"),Fa=re("span"),ai=ae("Site Menu"),_a=fe(),Na=re("span"),wi=re("span"),ya=ae("Close Menu"),va=fe(),Ia=re("span"),ui=re("span"),ki=re("span"),vi=ee("svg"),Ci=ee("g"),Xn=ee("rect"),oi=ee("rect"),Ti=ee("rect"),_o=ee("defs"),Zi=ee("clipPath"),qi=ee("path"),zs=fe(),Gi=re("span"),Ni=ee("svg"),yo=ee("path"),hi=fe(),Oo=re("br"),lo=fe(),Eo=re("br"),this.h()},l(aa){$e=me(aa,"HEADER",{id:!0,class:!0,style:!0});var Ua=ue($e);gt=me(Ua,"DIV",{class:!0});var mi=ue(gt);Ft=me(mi,"DIV",{class:!0});var pi=ue(Ft);ht=me(pi,"DIV",{class:!0,style:!0});var wo=ue(ht);Pt=me(wo,"DIV",{class:!0});var Xo=ue(Pt);Et=me(Xo,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,style:!0},1);var ji=ue(Et);Jt=me(ji,"path",{class:!0,fill:!0,d:!0},1),ue(Jt).forEach(H),ji.forEach(H),ar=Me(Xo),si&&si.l(Xo),Xo.forEach(H),xr=Me(wo),Ar=me(wo,"NAV",{class:!0,"data-itemcount":!0,"data-textlength":!0,role:!0,"aria-label":!0});var Ui=ue(Ar);Zr.l(Ui),bn=Me(Ui),Qn=me(Ui,"UL",{id:!0,class:!0});var ps=ue(Qn);for(let xl=0;xl<Za.length;xl+=1)Za[xl].l(ps);ps.forEach(H),Ui.forEach(H),Cn=Me(wo),Hn=me(wo,"DIV",{class:!0});var ds=ue(Hn);ra=me(ds,"A",{href:!0,class:!0,role:!0,labelledby:!0});var or=ue(ra);qn=me(or,"SPAN",{id:!0,class:!0});var To=ue(qn);Un=me(To,"SPAN",{class:!0});var co=ue(Un);Fa=me(co,"SPAN",{class:!0});var zi=ue(Fa);ai=be(zi,"Site Menu"),zi.forEach(H),co.forEach(H),_a=Me(To),Na=me(To,"SPAN",{class:!0,"aria-hidden":!0});var Si=ue(Na);wi=me(Si,"SPAN",{class:!0});var Es=ue(wi);ya=be(Es,"Close Menu"),Es.forEach(H),Si.forEach(H),To.forEach(H),va=Me(or),Ia=me(or,"SPAN",{class:!0,"aria-hidden":!0});var yl=ue(Ia);ui=me(yl,"SPAN",{class:!0});var ys=ue(ui);ki=me(ys,"SPAN",{class:!0,"aria-hidden":!0});var rs=ue(ki);vi=me(rs,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var Ys=ue(vi);Ci=me(Ys,"g",{"clip-path":!0,fill:!0,class:!0},1);var Cs=ue(Ci);Xn=me(Cs,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(Xn).forEach(H),oi=me(Cs,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(oi).forEach(H),Ti=me(Cs,"rect",{y:!0,width:!0,height:!0,rx:!0,class:!0},1),ue(Ti).forEach(H),Cs.forEach(H),_o=me(Ys,"defs",{class:!0},1);var ns=ue(_o);Zi=me(ns,"clipPath",{id:!0,class:!0},1);var Sl=ue(Zi);qi=me(Sl,"path",{fill:!0,transform:!0,d:!0,class:!0},1),ue(qi).forEach(H),Sl.forEach(H),ns.forEach(H),Ys.forEach(H),rs.forEach(H),zs=Me(ys),Gi=me(ys,"SPAN",{class:!0,"aria-hidden":!0});var El=ue(Gi);Ni=me(El,"svg",{class:!0,width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var to=ue(Ni);yo=me(to,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0},1),ue(yo).forEach(H),to.forEach(H),El.forEach(H),ys.forEach(H),yl.forEach(H),or.forEach(H),ds.forEach(H),wo.forEach(H),pi.forEach(H),mi.forEach(H),Ua.forEach(H),hi=Me(aa),Oo=me(aa,"BR",{class:!0}),lo=Me(aa),Eo=me(aa,"BR",{class:!0}),this.h()},h(){W(Jt,"class","border svelte-sdid3b"),W(Jt,"fill",ur=nt[2]?"#26535c":"#fbf8e9"),W(Jt,"d","M115.084 31.849L61.916.809a5.66 5.66 0 00-5.832 0L2.916 31.85C1.118 32.927 0 34.839 0 36.949v62.127c0 2.109 1.118 4.021 2.916 5.1l53.168 31.039c.923.54 1.895.785 2.916.785 1.02 0 2.041-.245 2.916-.785l53.168-31.039c1.798-1.03 2.916-2.991 2.916-5.1V36.948c0-2.108-1.118-4.02-2.916-5.1z"),W(Et,"class","logo-border svelte-sdid3b"),W(Et,"xmlns","http://www.w3.org/2000/svg"),W(Et,"width","308"),W(Et,"height","136"),W(Et,"viewBox","0 0 308 136"),W(Et,"fill","none"),Ge(Et,"background-color","transparent"),W(Pt,"class","site-header__item site-header__main-logo col-auto svelte-sdid3b"),W(Qn,"id","primary-navigation"),W(Qn,"class","row menu justify-content-start site-header__item_inner has-dropdowns has-aria-dropdowns svelte-sdid3b"),W(Ar,"class","site-header__item site-header__menu-section col-auto site-header__primary-menu  over-four-items over-fourty-characters svelte-sdid3b"),W(Ar,"data-itemcount","5"),W(Ar,"data-textlength","42"),W(Ar,"role","navigation"),W(Ar,"aria-label","Primary Navigation"),W(Fa,"class","screen-reader-text svelte-sdid3b"),W(Un,"class","hamburger-control__open-label svelte-sdid3b"),W(wi,"class","screen-reader-text svelte-sdid3b"),W(Na,"class","hamburger-control__close-label svelte-sdid3b"),W(Na,"aria-hidden","true"),W(qn,"id","mm-label"),W(qn,"class","hamburger-control__label svelte-sdid3b"),W(Xn,"y",".5"),W(Xn,"width","20"),W(Xn,"height","3"),W(Xn,"rx","1.5"),W(Xn,"class","svelte-sdid3b"),W(oi,"y","7.5"),W(oi,"width","20"),W(oi,"height","3"),W(oi,"rx","1.5"),W(oi,"class","svelte-sdid3b"),W(Ti,"y","14.5"),W(Ti,"width","20"),W(Ti,"height","3"),W(Ti,"rx","1.5"),W(Ti,"class","svelte-sdid3b"),W(Ci,"clip-path","url(#clip0)"),W(Ci,"fill",Sa=nt[2]?"#fbf8e9":"#16343e"),W(Ci,"class","svelte-sdid3b"),W(qi,"fill","#fff"),W(qi,"transform","translate(0 .5)"),W(qi,"d","M0 0h20v17H0z"),W(qi,"class","svelte-sdid3b"),W(Zi,"id","clip0"),W(Zi,"class","svelte-sdid3b"),W(_o,"class","svelte-sdid3b"),W(vi,"class","menu svelte-sdid3b"),W(vi,"width","20"),W(vi,"height","18"),W(vi,"viewBox","0 0 20 18"),W(vi,"fill","none"),W(vi,"xmlns","http://www.w3.org/2000/svg"),W(ki,"class","hamburger-control__open svelte-sdid3b"),W(ki,"aria-hidden","true"),W(yo,"d","M3.304 20.801L11 13.104l7.698 7.697c.296.297.671.449 1.052.449.38 0 .756-.152 1.052-.449a1.459 1.459 0 000-2.104L13.104 11 20.8 3.303a1.459 1.459 0 000-2.104 1.46 1.46 0 00-2.104 0h0L11 8.898 3.301 1.2a1.46 1.46 0 00-2.103 0h0a1.46 1.46 0 000 2.104L8.834 11 1.2 18.697s0 0 0 0a1.458 1.458 0 00-.012 2.092c.255.326.713.461 1.064.461.38 0 .756-.152 1.052-.449h0z"),W(yo,"fill",ts=nt[2]?"#fbf8e9":"#16343e"),W(yo,"stroke","#16343e"),W(yo,"stroke-width",".5"),W(yo,"class","svelte-sdid3b"),W(Ni,"class","menu-close svelte-sdid3b"),W(Ni,"width","22"),W(Ni,"height","22"),W(Ni,"viewBox","0 0 22 22"),W(Ni,"fill","none"),W(Ni,"xmlns","http://www.w3.org/2000/svg"),W(Gi,"class","hamburger-control__close svelte-sdid3b"),W(Gi,"aria-hidden","true"),W(ui,"class","hamburger-control__inner svelte-sdid3b"),W(Ia,"class",ls=B(nt[2]?"Light-on-Dark hamburger-control":"hamburger-control")+" svelte-sdid3b"),W(Ia,"aria-hidden","true"),W(ra,"href","#primary-footer-menu-section"),W(ra,"class","mobile-menu-toggle__control js-mobile-menu-control js-open-main-menu svelte-sdid3b"),W(ra,"role","button"),W(ra,"labelledby","mm-label"),W(Hn,"class","site-header__item mobile-menu-toggle col svelte-sdid3b"),W(ht,"class",Ss=B(nt[2]?"Light-on-Dark row site-header__row justify-content-between align-items-center":"row site-header__row justify-content-between align-items-center")+" svelte-sdid3b"),Ge(ht,"width","100%"),W(Ft,"class",Ws=B(nt[2]?"Light-on-Dark container":"container")+" svelte-sdid3b"),W(gt,"class",so=B(nt[2]?"Light-on-Dark site-header__inner":"site-header__inner")+" svelte-sdid3b"),W($e,"id","desktop-header"),W($e,"class",Xa=B(nt[2]?"Light-on-Dark site-header":"site-header")+" svelte-sdid3b"),Ge($e,"position","fixed"),Ge($e,"max-width","100%"),Ge($e,"max-height","108px"),Ge($e,"height","75px"),Ge($e,"z-index","1"),W(Oo,"class","svelte-sdid3b"),W(Eo,"class","svelte-sdid3b")},m(aa,Ua){Q(aa,$e,Ua),se($e,gt),se(gt,Ft),se(Ft,ht),se(ht,Pt),se(Pt,Et),se(Et,Jt),se(Pt,ar),si&&si.m(Pt,null),se(ht,xr),se(ht,Ar),xo[mn].m(Ar,null),se(Ar,bn),se(Ar,Qn);for(let mi=0;mi<Za.length;mi+=1)Za[mi].m(Qn,null);se(ht,Cn),se(ht,Hn),se(Hn,ra),se(ra,qn),se(qn,Un),se(Un,Fa),se(Fa,ai),se(qn,_a),se(qn,Na),se(Na,wi),se(wi,ya),se(ra,va),se(ra,Ia),se(Ia,ui),se(ui,ki),se(ki,vi),se(vi,Ci),se(Ci,Xn),se(Ci,oi),se(Ci,Ti),se(vi,_o),se(_o,Zi),se(Zi,qi),se(ui,zs),se(ui,Gi),se(Gi,Ni),se(Ni,yo),Q(aa,hi,Ua),Q(aa,Oo,Ua),Q(aa,lo,Ua),Q(aa,Eo,Ua),Ki=!0},p(aa,[Ua]){(!Ki||Ua&4&&ur!==(ur=aa[2]?"#26535c":"#fbf8e9"))&&W(Jt,"fill",ur),aa[4]?si?(si.p(aa,Ua),Ua&16&&Je(si,1)):(si=Xl(aa),si.c(),Je(si,1),si.m(Pt,null)):si&&(je(),st(si,1,1,()=>{si=null}),ot());let mi=mn;if(mn=Oa(aa),mn===mi?xo[mn].p(aa,Ua):(je(),st(xo[mi],1,1,()=>{xo[mi]=null}),ot(),Zr=xo[mn],Zr||(Zr=xo[mn]=eo[mn](aa),Zr.c()),Je(Zr,1),Zr.m(Ar,bn)),Ua&10){Da=aa[1];let pi;for(pi=0;pi<Da.length;pi+=1){const wo=uu(aa,Da,pi);Za[pi]?Za[pi].p(wo,Ua):(Za[pi]=dl(wo),Za[pi].c(),Za[pi].m(Qn,null))}for(;pi<Za.length;pi+=1)Za[pi].d(1);Za.length=Da.length}(!Ki||Ua&4&&Sa!==(Sa=aa[2]?"#fbf8e9":"#16343e"))&&W(Ci,"fill",Sa),(!Ki||Ua&4&&ts!==(ts=aa[2]?"#fbf8e9":"#16343e"))&&W(yo,"fill",ts),(!Ki||Ua&4&&ls!==(ls=B(aa[2]?"Light-on-Dark hamburger-control":"hamburger-control")+" svelte-sdid3b"))&&W(Ia,"class",ls),(!Ki||Ua&4&&Ss!==(Ss=B(aa[2]?"Light-on-Dark row site-header__row justify-content-between align-items-center":"row site-header__row justify-content-between align-items-center")+" svelte-sdid3b"))&&W(ht,"class",Ss),(!Ki||Ua&4&&Ws!==(Ws=B(aa[2]?"Light-on-Dark container":"container")+" svelte-sdid3b"))&&W(Ft,"class",Ws),(!Ki||Ua&4&&so!==(so=B(aa[2]?"Light-on-Dark site-header__inner":"site-header__inner")+" svelte-sdid3b"))&&W(gt,"class",so),(!Ki||Ua&4&&Xa!==(Xa=B(aa[2]?"Light-on-Dark site-header":"site-header")+" svelte-sdid3b"))&&W($e,"class",Xa)},i(aa){Ki||(Je(si),Je(Zr),Ki=!0)},o(aa){st(si),st(Zr),Ki=!1},d(aa){aa&&H($e),si&&si.d(),xo[mn].d(),oe(Za,aa),aa&&H(hi),aa&&H(Oo),aa&&H(lo),aa&&H(Eo)}}}let Ku=!1,$i=1500,Gs=500;function $c(nt,$e,gt){let{$$slots:Ft={},$$scope:ht}=$e,{light_on_dark:Pt=!1}=$e,{innerElms:Et=null}=$e,{nav_links:Jt=[{label:"About",link:"#about/",elm(){const Cn=document.createElement("li");return Cn.className="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-12 col-auto top-level-menu-item",Cn.innerHTML=`
                    <a href="${this.link}" onClick="${Hn=>ur(Hn)}" role="menuitem" class=" top-level-nav-link">${this.label}</a>
`,console.log(`Resulting nav_link (${this.label})`,Cn),Cn},fun(){}}]}=$e,{sidebarFunction:ur=Cn=>{console.log("showSidebar",Cn),Cn.target.data={action:"show",set:!1,path:"target"in Cn&&"hash"in Cn.target?Cn.target.hash:""},Cn.target.dispatchEvent(new CustomEvent("sidebar",Cn))}}=$e,{title:ar=""}=$e,xr=!1,Ar=!1,mn=document.createElement("div");const Zr={};let bn=function(Cn){if(!!Cn&&!Ku&&!Ar)return gt(4,xr=!0),setTimeout(()=>{gt(5,Ar=!0)},$i+Gs),!0;if(!xr)return gt(5,Ar=!1),!1};Wt(function(){console.log("light_on_dark",Pt),gt(4,xr=!0),gt(1,Jt=Jt.map((Cn,Hn,ra)=>(console.log("title:",ar),!!ar&&Cn.link==="#about/"&&(Cn.label=ar),gt(1,Jt[Hn]=Cn,Jt),console.log("label:",Jt[Hn].label),Cn)))});const Qn=Cn=>ur(Cn);return nt.$$set=Cn=>{"light_on_dark"in Cn&&gt(2,Pt=Cn.light_on_dark),"innerElms"in Cn&&gt(0,Et=Cn.innerElms),"nav_links"in Cn&&gt(1,Jt=Cn.nav_links),"sidebarFunction"in Cn&&gt(3,ur=Cn.sidebarFunction),"title"in Cn&&gt(7,ar=Cn.title),"$$scope"in Cn&&gt(8,ht=Cn.$$scope)},nt.$$.update=()=>{nt.$$.dirty&16&&bn(xr),nt.$$.dirty&4097&&function(Hn,ra){if(Et!=null&&console.log("extractLinkContentFromHTML:",Hn.innerHTML),Et!=null&&Hn!=null&&!!Hn.innerHTML){const qn=[...Hn.childNodes];for(const Un of qn)if(Un.nodeType===1&&Un.className.match(/container-fluid/)!==null){const Fa="id"in Un&&!!Un.id?Un.id:Un.innerHTML.toString().substring(0,16)+Un.className+Un.toString();console.log(Fa,Un);const ai=[...Un.childNodes];for(const _a of ai)if(_a.nodeType===1&&_a.className.match(/navbar-nav/)!==null){const Na="id"in _a&&!!_a.id?_a.id:_a.innerHTML.toString().substring(0,16)+_a.className+_a.toString(),wi=_a;if(console.log(Na,_a),console.log(`Found ul elm (${Na}). Remove from inner:`,_a),Un.removeChild(_a),Na in Zr)console.log("Already processed",Na);else if(wi.children.length>0){console.log("Add ul to nav target:");const ya=[..._a.childNodes];for(const va of ya)if(va.nodeType===1){const Ia="id"in va&&!!va.id?va.id:va.innerHTML.toString().substring(0,16)+va.className+va.toString();va.children[0].innerHTML?console.log(`Found link elm (${Ia}). Remove from inner:`,va):(console.log("Found blank link elm. Remove from inner:",va),_a.removeChild(va))}ra.append(wi),gt(12,Zr[Na]=wi,Zr)}}}console.log("Resulting target container:",ra)}gt(0,Et=Hn)}(Et,mn)},[Et,Jt,Pt,ur,xr,Ar,mn,ar,ht,Ft,Qn]}class cu extends tr{constructor($e){super(),lu.getElementById("svelte-sdid3b-style")||Ef(),Bt(this,$e,$c,lc,F,{light_on_dark:2,innerElms:0,nav_links:1,sidebarFunction:3,title:7})}}var ks={};function fu(){return typeof Shiny<"u"&&typeof Shiny.setInputValue=="function"}function Ml(nt,$e){if(fu())try{ks[nt]||console.log('Shiny input ("'.concat(nt,'"):'),$e),ks[nt]=!0,Shiny.setInputValue(nt,$e,{priority:"event"})}finally{return!0}return!1}function vl(nt,$e){var gt=typeof Symbol<"u"&&nt[Symbol.iterator]||nt["@@iterator"];if(!gt){if(Array.isArray(nt)||(gt=kl(nt))||$e&&nt&&typeof nt.length=="number"){gt&&(nt=gt);var Ft=0,ht=function(){};return{s:ht,n:function(){return Ft>=nt.length?{done:!0}:{done:!1,value:nt[Ft++]}},e:function(ar){throw ar},f:ht}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Pt=!0,Et=!1,Jt;return{s:function(){gt=gt.call(nt)},n:function(){var ar=gt.next();return Pt=ar.done,ar},e:function(ar){Et=!0,Jt=ar},f:function(){try{!Pt&&gt.return!=null&&gt.return()}finally{if(Et)throw Jt}}}}function kl(nt,$e){if(!!nt){if(typeof nt=="string")return ol(nt,$e);var gt=Object.prototype.toString.call(nt).slice(8,-1);if(gt==="Object"&&nt.constructor&&(gt=nt.constructor.name),gt==="Map"||gt==="Set")return Array.from(nt);if(gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gt))return ol(nt,$e)}}function ol(nt,$e){($e==null||$e>nt.length)&&($e=nt.length);for(var gt=0,Ft=new Array($e);gt<$e;gt++)Ft[gt]=nt[gt];return Ft}window.CustomEvent||function(){function nt($e,gt){gt=gt||{bubbles:!1,cancelable:!1,detail:void 0};var Ft=document.createEvent("CustomEvent");return Ft.initCustomEvent($e,gt.bubbles,gt.cancelable,gt.detail),Ft}nt.prototype=window.Event.prototype,window.CustomEvent=nt}();var ml="apps",gs=document.getElementById(ml),Kl=gs!==null&&(gs.constructor.name==="HTMLElement"||gs.constructor.name==="HTMLBodyElement"||gs.constructor.name==="HTMLDivElement")?new ea({target:gs,props:{attributes:gs.attributes,innerElms:function(){var nt=document.createElement("div");console.log("Apps pre-mount:",gs.innerHTML);var $e=vl(gs.childNodes),gt;try{for($e.s();!(gt=$e.n()).done;){var Ft=gt.value;Ft.nodeType===1&&nt.appendChild(Ft)}}catch(ht){$e.e(ht)}finally{$e.f()}return gs.innerHTML="",nt}(),toggle_sidebar_label:"Toggle Developer Sidebar"},hydrate:!0}):{},hu="cori-header",es=".cori * .header",sl=".cori * .navbar.navbar-default.navbar-static-top",Yo=document.getElementById(hu)!==null?function(){var nt=(this||window).document.body;console.log(nt);var $e=(this||window).document.getElementById(hu);return console.log($e),nt.style.maxHeight="348px",nt.style.paddingTop=$e.offsetHeight+"px",$e.style.top="-"+nt.style.paddingTop+"px",$e}():document.querySelectorAll(es)!==null&&document.querySelectorAll(es).length>0?function(){var nt=(this||window).document.querySelectorAll(es)[0];return console.log(nt),nt}():document.querySelectorAll(sl)!==null&&document.querySelectorAll(sl).length>0?function(){var nt=(this||window).document.querySelectorAll(sl)[0];return console.log(nt),nt}():null,Ec=Yo!==null&&(Yo.constructor.name==="HTMLElement"||Yo.constructor.name==="HTMLDivElement")?new ah({target:Yo,props:{attributes:Yo.attributes,title:function(){var nt=Yo.attributes;return nt!==null&&"title"in nt?nt.title.value:"getElementsByClassName"in Yo&&typeof Yo.getElementsByClassName=="function"&&Yo.getElementsByClassName("container-fluid").length>0&&"getElementsByClassName"in Yo.getElementsByClassName("container-fluid")[0]&&typeof Yo.getElementsByClassName("container-fluid")[0].getElementsByClassName=="function"&&Yo.getElementsByClassName("container-fluid")[0].getElementsByClassName("navbar-header").length>0?Yo.getElementsByClassName("container-fluid")[0].getElementsByClassName("navbar-header")[0].getElementsByClassName("navbar-brand")[0].innerText:""}(),innerElms:function(){var nt=document.createElement("div");console.log("CORIHeader pre-mount:",Yo.innerHTML);var $e=vl(Yo.childNodes),gt;try{for($e.s();!(gt=$e.n()).done;){var Ft=gt.value;Ft.nodeType===1&&nt.appendChild(Ft)}}catch(ht){$e.e(ht)}finally{$e.f()}return console.log(nt.innerHTML),Yo.innerHTML="",nt}(),light_on_dark:function(){var nt=Yo.attributes;return nt!==null&&"light_on_dark"in nt?!!nt.light_on_dark&&nt.light_on_dark.value!=="false":Yo.getElementsByClassName("container-fluid")!==null}()},hydrate:!0}):{},Cc="risi-header",ll=".risi * .header",pu=".risi * .navbar.navbar-default.navbar-static-top",Uo=document.getElementById(Cc)!==null?function(){var nt=(this||window).document.body;console.log(nt);var $e=(this||window).document.getElementById(Cc);return console.log($e),nt.style.maxHeight="348px",nt.style.paddingTop=$e.offsetHeight+"px",$e.style.top="-"+nt.style.paddingTop+"px",$e}():document.querySelectorAll(ll)!==null&&document.querySelectorAll(ll).length>0?function(){var nt=(this||window).document.querySelectorAll(ll)[0];return console.log(nt),nt}():document.querySelectorAll(pu)!==null&&document.querySelectorAll(pu).length>0?function(){var nt=(this||window).document.querySelectorAll(pu)[0];return console.log(nt),nt}():null,Cf=Uo!==null&&(Uo.constructor.name==="HTMLElement"||Uo.constructor.name==="HTMLDivElement")?new cu({target:Uo,props:{attributes:Uo.attributes,title:function(){var nt=Uo.attributes;return nt!==null&&"title"in nt?nt.title.value:"getElementsByClassName"in Uo&&typeof Uo.getElementsByClassName=="function"&&Uo.getElementsByClassName("container-fluid").length>0&&"getElementsByClassName"in Uo.getElementsByClassName("container-fluid")[0]&&typeof Uo.getElementsByClassName("container-fluid")[0].getElementsByClassName=="function"&&Uo.getElementsByClassName("container-fluid")[0].getElementsByClassName("navbar-header").length>0?Uo.getElementsByClassName("container-fluid")[0].getElementsByClassName("navbar-header")[0].getElementsByClassName("navbar-brand")[0].innerText:""}(),innerElms:function(){var nt=document.createElement("div");console.log("RISIHeader pre-mount:",Uo.innerHTML);var $e=vl(Uo.childNodes),gt;try{for($e.s();!(gt=$e.n()).done;){var Ft=gt.value;Ft.nodeType===1&&nt.appendChild(Ft)}}catch(ht){$e.e(ht)}finally{$e.f()}return console.log(nt.innerHTML),Uo.innerHTML="",nt}(),light_on_dark:function(){var nt=Uo.attributes;return nt!==null&&"light_on_dark"in nt?!!nt.light_on_dark&&nt.light_on_dark.value!=="false":Uo.getElementsByClassName("container-fluid")!==null}()},hydrate:!0}):{},uc="sidebar",Is=document.getElementById(uc),ul=Is!==null&&(Is.constructor.name==="HTMLElement"||Is.constructor.name==="HTMLDivElement")?new Xt({target:Is,props:{innerElms:function(){var nt=document.createElement("div");console.log("Sidebar pre-mount:",Is.innerHTML);var $e=vl(Is.childNodes),gt;try{for($e.s();!(gt=$e.n()).done;){var Ft=gt.value;Ft.nodeType===1&&nt.appendChild(Ft)}}catch(ht){$e.e(ht)}finally{$e.f()}return Is.innerHTML="",nt}()},hydrate:!0}):{},Qc="draw-logo-test",Fu=document.getElementsByClassName(Qc),ih=Fu!==null&&Fu.length>0&&(Fu[0].constructor.name==="HTMLElement"||Fu[0].constructor.name==="HTMLDivElement")?function(){console.log(Fu);var nt=Fu[0];return new ia({target:nt,props:{innerElms:function(){var $e=document.createElement("div");console.log("Draw logo pre-mount:",nt.innerHTML);var gt=vl(nt.childNodes),Ft;try{for(gt.s();!(Ft=gt.n()).done;){var ht=Ft.value;ht.nodeType===1&&$e.appendChild(ht)}}catch(Pt){gt.e(Pt)}finally{gt.f()}return nt.innerHTML="",$e}()},hydrate:!0})}():[];return function(){setTimeout(function(){console.log("Send input to shiny"),setInterval(function(){Ml("wake",Math.random())},533)},1533)}(),A.default=Kl,A.drawLogoTestApp=ih,A.headerApp1=Ec,A.headerApp2=Cf,A.sidebarApp=ul,Object.defineProperty(A,"__esModule",{value:!0}),A})({});var Hs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nw(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var na={exports:{}},Lo={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm=Symbol.for("react.element"),m6=Symbol.for("react.portal"),g6=Symbol.for("react.fragment"),y6=Symbol.for("react.strict_mode"),x6=Symbol.for("react.profiler"),b6=Symbol.for("react.provider"),_6=Symbol.for("react.context"),w6=Symbol.for("react.forward_ref"),T6=Symbol.for("react.suspense"),A6=Symbol.for("react.memo"),M6=Symbol.for("react.lazy"),Y2=Symbol.iterator;function k6(A){return A===null||typeof A!="object"?null:(A=Y2&&A[Y2]||A["@@iterator"],typeof A=="function"?A:null)}var aw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iw=Object.assign,ow={};function d0(A,R,e){this.props=A,this.context=R,this.refs=ow,this.updater=e||aw}d0.prototype.isReactComponent={};d0.prototype.setState=function(A,R){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,R,"setState")};d0.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function sw(){}sw.prototype=d0.prototype;function Mb(A,R,e){this.props=A,this.context=R,this.refs=ow,this.updater=e||aw}var kb=Mb.prototype=new sw;kb.constructor=Mb;iw(kb,d0.prototype);kb.isPureReactComponent=!0;var X2=Array.isArray,lw=Object.prototype.hasOwnProperty,Sb={current:null},uw={key:!0,ref:!0,__self:!0,__source:!0};function cw(A,R,e){var v,S={},r=null,a=null;if(R!=null)for(v in R.ref!==void 0&&(a=R.ref),R.key!==void 0&&(r=""+R.key),R)lw.call(R,v)&&!uw.hasOwnProperty(v)&&(S[v]=R[v]);var u=arguments.length-2;if(u===1)S.children=e;else if(1<u){for(var c=Array(u),t=0;t<u;t++)c[t]=arguments[t+2];S.children=c}if(A&&A.defaultProps)for(v in u=A.defaultProps,u)S[v]===void 0&&(S[v]=u[v]);return{$$typeof:Pm,type:A,key:r,ref:a,props:S,_owner:Sb.current}}function S6(A,R){return{$$typeof:Pm,type:A.type,key:R,ref:A.ref,props:A.props,_owner:A._owner}}function Eb(A){return typeof A=="object"&&A!==null&&A.$$typeof===Pm}function E6(A){var R={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(e){return R[e]})}var Z2=/\/+/g;function gy(A,R){return typeof A=="object"&&A!==null&&A.key!=null?E6(""+A.key):R.toString(36)}function Lg(A,R,e,v,S){var r=typeof A;(r==="undefined"||r==="boolean")&&(A=null);var a=!1;if(A===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(A.$$typeof){case Pm:case m6:a=!0}}if(a)return a=A,S=S(a),A=v===""?"."+gy(a,0):v,X2(S)?(e="",A!=null&&(e=A.replace(Z2,"$&/")+"/"),Lg(S,R,e,"",function(t){return t})):S!=null&&(Eb(S)&&(S=S6(S,e+(!S.key||a&&a.key===S.key?"":(""+S.key).replace(Z2,"$&/")+"/")+A)),R.push(S)),1;if(a=0,v=v===""?".":v+":",X2(A))for(var u=0;u<A.length;u++){r=A[u];var c=v+gy(r,u);a+=Lg(r,R,e,c,S)}else if(c=k6(A),typeof c=="function")for(A=c.call(A),u=0;!(r=A.next()).done;)r=r.value,c=v+gy(r,u++),a+=Lg(r,R,e,c,S);else if(r==="object")throw R=String(A),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return a}function ug(A,R,e){if(A==null)return A;var v=[],S=0;return Lg(A,v,"","",function(r){return R.call(e,r,S++)}),v}function C6(A){if(A._status===-1){var R=A._result;R=R(),R.then(function(e){(A._status===0||A._status===-1)&&(A._status=1,A._result=e)},function(e){(A._status===0||A._status===-1)&&(A._status=2,A._result=e)}),A._status===-1&&(A._status=0,A._result=R)}if(A._status===1)return A._result.default;throw A._result}var oc={current:null},Pg={transition:null},L6={ReactCurrentDispatcher:oc,ReactCurrentBatchConfig:Pg,ReactCurrentOwner:Sb};Lo.Children={map:ug,forEach:function(A,R,e){ug(A,function(){R.apply(this,arguments)},e)},count:function(A){var R=0;return ug(A,function(){R++}),R},toArray:function(A){return ug(A,function(R){return R})||[]},only:function(A){if(!Eb(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};Lo.Component=d0;Lo.Fragment=g6;Lo.Profiler=x6;Lo.PureComponent=Mb;Lo.StrictMode=y6;Lo.Suspense=T6;Lo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L6;Lo.cloneElement=function(A,R,e){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var v=iw({},A.props),S=A.key,r=A.ref,a=A._owner;if(R!=null){if(R.ref!==void 0&&(r=R.ref,a=Sb.current),R.key!==void 0&&(S=""+R.key),A.type&&A.type.defaultProps)var u=A.type.defaultProps;for(c in R)lw.call(R,c)&&!uw.hasOwnProperty(c)&&(v[c]=R[c]===void 0&&u!==void 0?u[c]:R[c])}var c=arguments.length-2;if(c===1)v.children=e;else if(1<c){u=Array(c);for(var t=0;t<c;t++)u[t]=arguments[t+2];v.children=u}return{$$typeof:Pm,type:A.type,key:S,ref:r,props:v,_owner:a}};Lo.createContext=function(A){return A={$$typeof:_6,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:b6,_context:A},A.Consumer=A};Lo.createElement=cw;Lo.createFactory=function(A){var R=cw.bind(null,A);return R.type=A,R};Lo.createRef=function(){return{current:null}};Lo.forwardRef=function(A){return{$$typeof:w6,render:A}};Lo.isValidElement=Eb;Lo.lazy=function(A){return{$$typeof:M6,_payload:{_status:-1,_result:A},_init:C6}};Lo.memo=function(A,R){return{$$typeof:A6,type:A,compare:R===void 0?null:R}};Lo.startTransition=function(A){var R=Pg.transition;Pg.transition={};try{A()}finally{Pg.transition=R}};Lo.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Lo.useCallback=function(A,R){return oc.current.useCallback(A,R)};Lo.useContext=function(A){return oc.current.useContext(A)};Lo.useDebugValue=function(){};Lo.useDeferredValue=function(A){return oc.current.useDeferredValue(A)};Lo.useEffect=function(A,R){return oc.current.useEffect(A,R)};Lo.useId=function(){return oc.current.useId()};Lo.useImperativeHandle=function(A,R,e){return oc.current.useImperativeHandle(A,R,e)};Lo.useInsertionEffect=function(A,R){return oc.current.useInsertionEffect(A,R)};Lo.useLayoutEffect=function(A,R){return oc.current.useLayoutEffect(A,R)};Lo.useMemo=function(A,R){return oc.current.useMemo(A,R)};Lo.useReducer=function(A,R,e){return oc.current.useReducer(A,R,e)};Lo.useRef=function(A){return oc.current.useRef(A)};Lo.useState=function(A){return oc.current.useState(A)};Lo.useSyncExternalStore=function(A,R,e){return oc.current.useSyncExternalStore(A,R,e)};Lo.useTransition=function(){return oc.current.useTransition()};Lo.version="18.2.0";(function(A){A.exports=Lo})(na);const iu=nw(na.exports);var w1={exports:{}},Zc={},fw={exports:{}},hw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(A){function R(F,N){var G=F.length;F.push(N);e:for(;0<G;){var U=G-1>>>1,X=F[U];if(0<S(X,N))F[U]=N,F[G]=X,G=U;else break e}}function e(F){return F.length===0?null:F[0]}function v(F){if(F.length===0)return null;var N=F[0],G=F.pop();if(G!==N){F[0]=G;e:for(var U=0,X=F.length,z=X>>>1;U<z;){var B=2*(U+1)-1,j=F[B],V=B+1,K=F[V];if(0>S(j,G))V<X&&0>S(K,j)?(F[U]=K,F[V]=G,U=V):(F[U]=j,F[B]=G,U=B);else if(V<X&&0>S(K,G))F[U]=K,F[V]=G,U=V;else break e}}return N}function S(F,N){var G=F.sortIndex-N.sortIndex;return G!==0?G:F.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;A.unstable_now=function(){return r.now()}}else{var a=Date,u=a.now();A.unstable_now=function(){return a.now()-u}}var c=[],t=[],f=1,n=null,o=3,l=!1,h=!1,i=!1,s=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(F){for(var N=e(t);N!==null;){if(N.callback===null)v(t);else if(N.startTime<=F)v(t),N.sortIndex=N.expirationTime,R(c,N);else break;N=e(t)}}function b(F){if(i=!1,g(F),!h)if(e(c)!==null)h=!0,C(m);else{var N=e(t);N!==null&&D(b,N.startTime-F)}}function m(F,N){h=!1,i&&(i=!1,p(y),y=-1),l=!0;var G=o;try{for(g(N),n=e(c);n!==null&&(!(n.expirationTime>N)||F&&!P());){var U=n.callback;if(typeof U=="function"){n.callback=null,o=n.priorityLevel;var X=U(n.expirationTime<=N);N=A.unstable_now(),typeof X=="function"?n.callback=X:n===e(c)&&v(c),g(N)}else v(c);n=e(c)}if(n!==null)var z=!0;else{var B=e(t);B!==null&&D(b,B.startTime-N),z=!1}return z}finally{n=null,o=G,l=!1}}var x=!1,w=null,y=-1,T=5,M=-1;function P(){return!(A.unstable_now()-M<T)}function L(){if(w!==null){var F=A.unstable_now();M=F;var N=!0;try{N=w(!0,F)}finally{N?I():(x=!1,w=null)}}else x=!1}var I;if(typeof d=="function")I=function(){d(L)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,k=E.port2;E.port1.onmessage=L,I=function(){k.postMessage(null)}}else I=function(){s(L,0)};function C(F){w=F,x||(x=!0,I())}function D(F,N){y=s(function(){F(A.unstable_now())},N)}A.unstable_IdlePriority=5,A.unstable_ImmediatePriority=1,A.unstable_LowPriority=4,A.unstable_NormalPriority=3,A.unstable_Profiling=null,A.unstable_UserBlockingPriority=2,A.unstable_cancelCallback=function(F){F.callback=null},A.unstable_continueExecution=function(){h||l||(h=!0,C(m))},A.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<F?Math.floor(1e3/F):5},A.unstable_getCurrentPriorityLevel=function(){return o},A.unstable_getFirstCallbackNode=function(){return e(c)},A.unstable_next=function(F){switch(o){case 1:case 2:case 3:var N=3;break;default:N=o}var G=o;o=N;try{return F()}finally{o=G}},A.unstable_pauseExecution=function(){},A.unstable_requestPaint=function(){},A.unstable_runWithPriority=function(F,N){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var G=o;o=F;try{return N()}finally{o=G}},A.unstable_scheduleCallback=function(F,N,G){var U=A.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?U+G:U):G=U,F){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=G+X,F={id:f++,callback:N,priorityLevel:F,startTime:G,expirationTime:X,sortIndex:-1},G>U?(F.sortIndex=G,R(t,F),e(c)===null&&F===e(t)&&(i?(p(y),y=-1):i=!0,D(b,G-U))):(F.sortIndex=X,R(c,F),h||l||(h=!0,C(m))),F},A.unstable_shouldYield=P,A.unstable_wrapCallback=function(F){var N=o;return function(){var G=o;o=N;try{return F.apply(this,arguments)}finally{o=G}}}})(hw);(function(A){A.exports=hw})(fw);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pw=na.exports,Xc=fw.exports;function Ra(A){for(var R="https://reactjs.org/docs/error-decoder.html?invariant="+A,e=1;e<arguments.length;e++)R+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+A+"; visit "+R+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dw=new Set,hm={};function Jd(A,R){i0(A,R),i0(A+"Capture",R)}function i0(A,R){for(hm[A]=R,A=0;A<R.length;A++)dw.add(R[A])}var ip=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),px=Object.prototype.hasOwnProperty,P6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,K2={},J2={};function D6(A){return px.call(J2,A)?!0:px.call(K2,A)?!1:P6.test(A)?J2[A]=!0:(K2[A]=!0,!1)}function R6(A,R,e,v){if(e!==null&&e.type===0)return!1;switch(typeof R){case"function":case"symbol":return!0;case"boolean":return v?!1:e!==null?!e.acceptsBooleans:(A=A.toLowerCase().slice(0,5),A!=="data-"&&A!=="aria-");default:return!1}}function I6(A,R,e,v){if(R===null||typeof R>"u"||R6(A,R,e,v))return!0;if(v)return!1;if(e!==null)switch(e.type){case 3:return!R;case 4:return R===!1;case 5:return isNaN(R);case 6:return isNaN(R)||1>R}return!1}function sc(A,R,e,v,S,r,a){this.acceptsBooleans=R===2||R===3||R===4,this.attributeName=v,this.attributeNamespace=S,this.mustUseProperty=e,this.propertyName=A,this.type=R,this.sanitizeURL=r,this.removeEmptyString=a}var Iu={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(A){Iu[A]=new sc(A,0,!1,A,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(A){var R=A[0];Iu[R]=new sc(R,1,!1,A[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(A){Iu[A]=new sc(A,2,!1,A.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(A){Iu[A]=new sc(A,2,!1,A,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(A){Iu[A]=new sc(A,3,!1,A.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(A){Iu[A]=new sc(A,3,!0,A,null,!1,!1)});["capture","download"].forEach(function(A){Iu[A]=new sc(A,4,!1,A,null,!1,!1)});["cols","rows","size","span"].forEach(function(A){Iu[A]=new sc(A,6,!1,A,null,!1,!1)});["rowSpan","start"].forEach(function(A){Iu[A]=new sc(A,5,!1,A.toLowerCase(),null,!1,!1)});var Cb=/[\-:]([a-z])/g;function Lb(A){return A[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(A){var R=A.replace(Cb,Lb);Iu[R]=new sc(R,1,!1,A,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(A){var R=A.replace(Cb,Lb);Iu[R]=new sc(R,1,!1,A,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(A){var R=A.replace(Cb,Lb);Iu[R]=new sc(R,1,!1,A,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(A){Iu[A]=new sc(A,1,!1,A.toLowerCase(),null,!1,!1)});Iu.xlinkHref=new sc("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(A){Iu[A]=new sc(A,1,!1,A.toLowerCase(),null,!0,!0)});function Pb(A,R,e,v){var S=Iu.hasOwnProperty(R)?Iu[R]:null;(S!==null?S.type!==0:v||!(2<R.length)||R[0]!=="o"&&R[0]!=="O"||R[1]!=="n"&&R[1]!=="N")&&(I6(R,e,S,v)&&(e=null),v||S===null?D6(R)&&(e===null?A.removeAttribute(R):A.setAttribute(R,""+e)):S.mustUseProperty?A[S.propertyName]=e===null?S.type===3?!1:"":e:(R=S.attributeName,v=S.attributeNamespace,e===null?A.removeAttribute(R):(S=S.type,e=S===3||S===4&&e===!0?"":""+e,v?A.setAttributeNS(v,R,e):A.setAttribute(R,e))))}var up=pw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cg=Symbol.for("react.element"),Bv=Symbol.for("react.portal"),Uv=Symbol.for("react.fragment"),Db=Symbol.for("react.strict_mode"),dx=Symbol.for("react.profiler"),vw=Symbol.for("react.provider"),mw=Symbol.for("react.context"),Rb=Symbol.for("react.forward_ref"),vx=Symbol.for("react.suspense"),mx=Symbol.for("react.suspense_list"),Ib=Symbol.for("react.memo"),Bp=Symbol.for("react.lazy"),gw=Symbol.for("react.offscreen"),$2=Symbol.iterator;function N0(A){return A===null||typeof A!="object"?null:(A=$2&&A[$2]||A["@@iterator"],typeof A=="function"?A:null)}var hl=Object.assign,yy;function Z0(A){if(yy===void 0)try{throw Error()}catch(e){var R=e.stack.trim().match(/\n( *(at )?)/);yy=R&&R[1]||""}return`
`+yy+A}var xy=!1;function by(A,R){if(!A||xy)return"";xy=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(R)if(R=function(){throw Error()},Object.defineProperty(R.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(R,[])}catch(t){var v=t}Reflect.construct(A,[],R)}else{try{R.call()}catch(t){v=t}A.call(R.prototype)}else{try{throw Error()}catch(t){v=t}A()}}catch(t){if(t&&v&&typeof t.stack=="string"){for(var S=t.stack.split(`
`),r=v.stack.split(`
`),a=S.length-1,u=r.length-1;1<=a&&0<=u&&S[a]!==r[u];)u--;for(;1<=a&&0<=u;a--,u--)if(S[a]!==r[u]){if(a!==1||u!==1)do if(a--,u--,0>u||S[a]!==r[u]){var c=`
`+S[a].replace(" at new "," at ");return A.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",A.displayName)),c}while(1<=a&&0<=u);break}}}finally{xy=!1,Error.prepareStackTrace=e}return(A=A?A.displayName||A.name:"")?Z0(A):""}function z6(A){switch(A.tag){case 5:return Z0(A.type);case 16:return Z0("Lazy");case 13:return Z0("Suspense");case 19:return Z0("SuspenseList");case 0:case 2:case 15:return A=by(A.type,!1),A;case 11:return A=by(A.type.render,!1),A;case 1:return A=by(A.type,!0),A;default:return""}}function gx(A){if(A==null)return null;if(typeof A=="function")return A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case Uv:return"Fragment";case Bv:return"Portal";case dx:return"Profiler";case Db:return"StrictMode";case vx:return"Suspense";case mx:return"SuspenseList"}if(typeof A=="object")switch(A.$$typeof){case mw:return(A.displayName||"Context")+".Consumer";case vw:return(A._context.displayName||"Context")+".Provider";case Rb:var R=A.render;return A=A.displayName,A||(A=R.displayName||R.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case Ib:return R=A.displayName||null,R!==null?R:gx(A.type)||"Memo";case Bp:R=A._payload,A=A._init;try{return gx(A(R))}catch{}}return null}function O6(A){var R=A.type;switch(A.tag){case 24:return"Cache";case 9:return(R.displayName||"Context")+".Consumer";case 10:return(R._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return A=R.render,A=A.displayName||A.name||"",R.displayName||(A!==""?"ForwardRef("+A+")":"ForwardRef");case 7:return"Fragment";case 5:return R;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gx(R);case 8:return R===Db?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof R=="function")return R.displayName||R.name||null;if(typeof R=="string")return R}return null}function ed(A){switch(typeof A){case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function yw(A){var R=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(R==="checkbox"||R==="radio")}function F6(A){var R=yw(A)?"checked":"value",e=Object.getOwnPropertyDescriptor(A.constructor.prototype,R),v=""+A[R];if(!A.hasOwnProperty(R)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var S=e.get,r=e.set;return Object.defineProperty(A,R,{configurable:!0,get:function(){return S.call(this)},set:function(a){v=""+a,r.call(this,a)}}),Object.defineProperty(A,R,{enumerable:e.enumerable}),{getValue:function(){return v},setValue:function(a){v=""+a},stopTracking:function(){A._valueTracker=null,delete A[R]}}}}function fg(A){A._valueTracker||(A._valueTracker=F6(A))}function xw(A){if(!A)return!1;var R=A._valueTracker;if(!R)return!0;var e=R.getValue(),v="";return A&&(v=yw(A)?A.checked?"true":"false":A.value),A=v,A!==e?(R.setValue(A),!0):!1}function Xg(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}function yx(A,R){var e=R.checked;return hl({},R,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e!=null?e:A._wrapperState.initialChecked})}function Q2(A,R){var e=R.defaultValue==null?"":R.defaultValue,v=R.checked!=null?R.checked:R.defaultChecked;e=ed(R.value!=null?R.value:e),A._wrapperState={initialChecked:v,initialValue:e,controlled:R.type==="checkbox"||R.type==="radio"?R.checked!=null:R.value!=null}}function bw(A,R){R=R.checked,R!=null&&Pb(A,"checked",R,!1)}function xx(A,R){bw(A,R);var e=ed(R.value),v=R.type;if(e!=null)v==="number"?(e===0&&A.value===""||A.value!=e)&&(A.value=""+e):A.value!==""+e&&(A.value=""+e);else if(v==="submit"||v==="reset"){A.removeAttribute("value");return}R.hasOwnProperty("value")?bx(A,R.type,e):R.hasOwnProperty("defaultValue")&&bx(A,R.type,ed(R.defaultValue)),R.checked==null&&R.defaultChecked!=null&&(A.defaultChecked=!!R.defaultChecked)}function q2(A,R,e){if(R.hasOwnProperty("value")||R.hasOwnProperty("defaultValue")){var v=R.type;if(!(v!=="submit"&&v!=="reset"||R.value!==void 0&&R.value!==null))return;R=""+A._wrapperState.initialValue,e||R===A.value||(A.value=R),A.defaultValue=R}e=A.name,e!==""&&(A.name=""),A.defaultChecked=!!A._wrapperState.initialChecked,e!==""&&(A.name=e)}function bx(A,R,e){(R!=="number"||Xg(A.ownerDocument)!==A)&&(e==null?A.defaultValue=""+A._wrapperState.initialValue:A.defaultValue!==""+e&&(A.defaultValue=""+e))}var K0=Array.isArray;function qv(A,R,e,v){if(A=A.options,R){R={};for(var S=0;S<e.length;S++)R["$"+e[S]]=!0;for(e=0;e<A.length;e++)S=R.hasOwnProperty("$"+A[e].value),A[e].selected!==S&&(A[e].selected=S),S&&v&&(A[e].defaultSelected=!0)}else{for(e=""+ed(e),R=null,S=0;S<A.length;S++){if(A[S].value===e){A[S].selected=!0,v&&(A[S].defaultSelected=!0);return}R!==null||A[S].disabled||(R=A[S])}R!==null&&(R.selected=!0)}}function _x(A,R){if(R.dangerouslySetInnerHTML!=null)throw Error(Ra(91));return hl({},R,{value:void 0,defaultValue:void 0,children:""+A._wrapperState.initialValue})}function e_(A,R){var e=R.value;if(e==null){if(e=R.children,R=R.defaultValue,e!=null){if(R!=null)throw Error(Ra(92));if(K0(e)){if(1<e.length)throw Error(Ra(93));e=e[0]}R=e}R==null&&(R=""),e=R}A._wrapperState={initialValue:ed(e)}}function _w(A,R){var e=ed(R.value),v=ed(R.defaultValue);e!=null&&(e=""+e,e!==A.value&&(A.value=e),R.defaultValue==null&&A.defaultValue!==e&&(A.defaultValue=e)),v!=null&&(A.defaultValue=""+v)}function t_(A){var R=A.textContent;R===A._wrapperState.initialValue&&R!==""&&R!==null&&(A.value=R)}function ww(A){switch(A){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wx(A,R){return A==null||A==="http://www.w3.org/1999/xhtml"?ww(R):A==="http://www.w3.org/2000/svg"&&R==="foreignObject"?"http://www.w3.org/1999/xhtml":A}var hg,Tw=function(A){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(R,e,v,S){MSApp.execUnsafeLocalFunction(function(){return A(R,e,v,S)})}:A}(function(A,R){if(A.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in A)A.innerHTML=R;else{for(hg=hg||document.createElement("div"),hg.innerHTML="<svg>"+R.valueOf().toString()+"</svg>",R=hg.firstChild;A.firstChild;)A.removeChild(A.firstChild);for(;R.firstChild;)A.appendChild(R.firstChild)}});function pm(A,R){if(R){var e=A.firstChild;if(e&&e===A.lastChild&&e.nodeType===3){e.nodeValue=R;return}}A.textContent=R}var tm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N6=["Webkit","ms","Moz","O"];Object.keys(tm).forEach(function(A){N6.forEach(function(R){R=R+A.charAt(0).toUpperCase()+A.substring(1),tm[R]=tm[A]})});function Aw(A,R,e){return R==null||typeof R=="boolean"||R===""?"":e||typeof R!="number"||R===0||tm.hasOwnProperty(A)&&tm[A]?(""+R).trim():R+"px"}function Mw(A,R){A=A.style;for(var e in R)if(R.hasOwnProperty(e)){var v=e.indexOf("--")===0,S=Aw(e,R[e],v);e==="float"&&(e="cssFloat"),v?A.setProperty(e,S):A[e]=S}}var B6=hl({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tx(A,R){if(R){if(B6[A]&&(R.children!=null||R.dangerouslySetInnerHTML!=null))throw Error(Ra(137,A));if(R.dangerouslySetInnerHTML!=null){if(R.children!=null)throw Error(Ra(60));if(typeof R.dangerouslySetInnerHTML!="object"||!("__html"in R.dangerouslySetInnerHTML))throw Error(Ra(61))}if(R.style!=null&&typeof R.style!="object")throw Error(Ra(62))}}function Ax(A,R){if(A.indexOf("-")===-1)return typeof R.is=="string";switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mx=null;function zb(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var kx=null,e0=null,t0=null;function r_(A){if(A=Im(A)){if(typeof kx!="function")throw Error(Ra(280));var R=A.stateNode;R&&(R=S1(R),kx(A.stateNode,A.type,R))}}function kw(A){e0?t0?t0.push(A):t0=[A]:e0=A}function Sw(){if(e0){var A=e0,R=t0;if(t0=e0=null,r_(A),R)for(A=0;A<R.length;A++)r_(R[A])}}function Ew(A,R){return A(R)}function Cw(){}var _y=!1;function Lw(A,R,e){if(_y)return A(R,e);_y=!0;try{return Ew(A,R,e)}finally{_y=!1,(e0!==null||t0!==null)&&(Cw(),Sw())}}function dm(A,R){var e=A.stateNode;if(e===null)return null;var v=S1(e);if(v===null)return null;e=v[R];e:switch(R){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(A=A.type,v=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!v;break e;default:A=!1}if(A)return null;if(e&&typeof e!="function")throw Error(Ra(231,R,typeof e));return e}var Sx=!1;if(ip)try{var B0={};Object.defineProperty(B0,"passive",{get:function(){Sx=!0}}),window.addEventListener("test",B0,B0),window.removeEventListener("test",B0,B0)}catch{Sx=!1}function U6(A,R,e,v,S,r,a,u,c){var t=Array.prototype.slice.call(arguments,3);try{R.apply(e,t)}catch(f){this.onError(f)}}var rm=!1,Zg=null,Kg=!1,Ex=null,V6={onError:function(A){rm=!0,Zg=A}};function H6(A,R,e,v,S,r,a,u,c){rm=!1,Zg=null,U6.apply(V6,arguments)}function j6(A,R,e,v,S,r,a,u,c){if(H6.apply(this,arguments),rm){if(rm){var t=Zg;rm=!1,Zg=null}else throw Error(Ra(198));Kg||(Kg=!0,Ex=t)}}function $d(A){var R=A,e=A;if(A.alternate)for(;R.return;)R=R.return;else{A=R;do R=A,(R.flags&4098)!==0&&(e=R.return),A=R.return;while(A)}return R.tag===3?e:null}function Pw(A){if(A.tag===13){var R=A.memoizedState;if(R===null&&(A=A.alternate,A!==null&&(R=A.memoizedState)),R!==null)return R.dehydrated}return null}function n_(A){if($d(A)!==A)throw Error(Ra(188))}function G6(A){var R=A.alternate;if(!R){if(R=$d(A),R===null)throw Error(Ra(188));return R!==A?null:A}for(var e=A,v=R;;){var S=e.return;if(S===null)break;var r=S.alternate;if(r===null){if(v=S.return,v!==null){e=v;continue}break}if(S.child===r.child){for(r=S.child;r;){if(r===e)return n_(S),A;if(r===v)return n_(S),R;r=r.sibling}throw Error(Ra(188))}if(e.return!==v.return)e=S,v=r;else{for(var a=!1,u=S.child;u;){if(u===e){a=!0,e=S,v=r;break}if(u===v){a=!0,v=S,e=r;break}u=u.sibling}if(!a){for(u=r.child;u;){if(u===e){a=!0,e=r,v=S;break}if(u===v){a=!0,v=r,e=S;break}u=u.sibling}if(!a)throw Error(Ra(189))}}if(e.alternate!==v)throw Error(Ra(190))}if(e.tag!==3)throw Error(Ra(188));return e.stateNode.current===e?A:R}function Dw(A){return A=G6(A),A!==null?Rw(A):null}function Rw(A){if(A.tag===5||A.tag===6)return A;for(A=A.child;A!==null;){var R=Rw(A);if(R!==null)return R;A=A.sibling}return null}var Iw=Xc.unstable_scheduleCallback,a_=Xc.unstable_cancelCallback,W6=Xc.unstable_shouldYield,Y6=Xc.unstable_requestPaint,Fl=Xc.unstable_now,X6=Xc.unstable_getCurrentPriorityLevel,Ob=Xc.unstable_ImmediatePriority,zw=Xc.unstable_UserBlockingPriority,Jg=Xc.unstable_NormalPriority,Z6=Xc.unstable_LowPriority,Ow=Xc.unstable_IdlePriority,T1=null,Eh=null;function K6(A){if(Eh&&typeof Eh.onCommitFiberRoot=="function")try{Eh.onCommitFiberRoot(T1,A,void 0,(A.current.flags&128)===128)}catch{}}var th=Math.clz32?Math.clz32:Q6,J6=Math.log,$6=Math.LN2;function Q6(A){return A>>>=0,A===0?32:31-(J6(A)/$6|0)|0}var pg=64,dg=4194304;function J0(A){switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return A&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return A}}function $g(A,R){var e=A.pendingLanes;if(e===0)return 0;var v=0,S=A.suspendedLanes,r=A.pingedLanes,a=e&268435455;if(a!==0){var u=a&~S;u!==0?v=J0(u):(r&=a,r!==0&&(v=J0(r)))}else a=e&~S,a!==0?v=J0(a):r!==0&&(v=J0(r));if(v===0)return 0;if(R!==0&&R!==v&&(R&S)===0&&(S=v&-v,r=R&-R,S>=r||S===16&&(r&4194240)!==0))return R;if((v&4)!==0&&(v|=e&16),R=A.entangledLanes,R!==0)for(A=A.entanglements,R&=v;0<R;)e=31-th(R),S=1<<e,v|=A[e],R&=~S;return v}function q6(A,R){switch(A){case 1:case 2:case 4:return R+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return R+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eA(A,R){for(var e=A.suspendedLanes,v=A.pingedLanes,S=A.expirationTimes,r=A.pendingLanes;0<r;){var a=31-th(r),u=1<<a,c=S[a];c===-1?((u&e)===0||(u&v)!==0)&&(S[a]=q6(u,R)):c<=R&&(A.expiredLanes|=u),r&=~u}}function Cx(A){return A=A.pendingLanes&-1073741825,A!==0?A:A&1073741824?1073741824:0}function Fw(){var A=pg;return pg<<=1,(pg&4194240)===0&&(pg=64),A}function wy(A){for(var R=[],e=0;31>e;e++)R.push(A);return R}function Dm(A,R,e){A.pendingLanes|=R,R!==536870912&&(A.suspendedLanes=0,A.pingedLanes=0),A=A.eventTimes,R=31-th(R),A[R]=e}function tA(A,R){var e=A.pendingLanes&~R;A.pendingLanes=R,A.suspendedLanes=0,A.pingedLanes=0,A.expiredLanes&=R,A.mutableReadLanes&=R,A.entangledLanes&=R,R=A.entanglements;var v=A.eventTimes;for(A=A.expirationTimes;0<e;){var S=31-th(e),r=1<<S;R[S]=0,v[S]=-1,A[S]=-1,e&=~r}}function Fb(A,R){var e=A.entangledLanes|=R;for(A=A.entanglements;e;){var v=31-th(e),S=1<<v;S&R|A[v]&R&&(A[v]|=R),e&=~S}}var fs=0;function Nw(A){return A&=-A,1<A?4<A?(A&268435455)!==0?16:536870912:4:1}var Bw,Nb,Uw,Vw,Hw,Lx=!1,vg=[],Wp=null,Yp=null,Xp=null,vm=new Map,mm=new Map,Vp=[],rA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function i_(A,R){switch(A){case"focusin":case"focusout":Wp=null;break;case"dragenter":case"dragleave":Yp=null;break;case"mouseover":case"mouseout":Xp=null;break;case"pointerover":case"pointerout":vm.delete(R.pointerId);break;case"gotpointercapture":case"lostpointercapture":mm.delete(R.pointerId)}}function U0(A,R,e,v,S,r){return A===null||A.nativeEvent!==r?(A={blockedOn:R,domEventName:e,eventSystemFlags:v,nativeEvent:r,targetContainers:[S]},R!==null&&(R=Im(R),R!==null&&Nb(R)),A):(A.eventSystemFlags|=v,R=A.targetContainers,S!==null&&R.indexOf(S)===-1&&R.push(S),A)}function nA(A,R,e,v,S){switch(R){case"focusin":return Wp=U0(Wp,A,R,e,v,S),!0;case"dragenter":return Yp=U0(Yp,A,R,e,v,S),!0;case"mouseover":return Xp=U0(Xp,A,R,e,v,S),!0;case"pointerover":var r=S.pointerId;return vm.set(r,U0(vm.get(r)||null,A,R,e,v,S)),!0;case"gotpointercapture":return r=S.pointerId,mm.set(r,U0(mm.get(r)||null,A,R,e,v,S)),!0}return!1}function jw(A){var R=zd(A.target);if(R!==null){var e=$d(R);if(e!==null){if(R=e.tag,R===13){if(R=Pw(e),R!==null){A.blockedOn=R,Hw(A.priority,function(){Uw(e)});return}}else if(R===3&&e.stateNode.current.memoizedState.isDehydrated){A.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}A.blockedOn=null}function Dg(A){if(A.blockedOn!==null)return!1;for(var R=A.targetContainers;0<R.length;){var e=Px(A.domEventName,A.eventSystemFlags,R[0],A.nativeEvent);if(e===null){e=A.nativeEvent;var v=new e.constructor(e.type,e);Mx=v,e.target.dispatchEvent(v),Mx=null}else return R=Im(e),R!==null&&Nb(R),A.blockedOn=e,!1;R.shift()}return!0}function o_(A,R,e){Dg(A)&&e.delete(R)}function aA(){Lx=!1,Wp!==null&&Dg(Wp)&&(Wp=null),Yp!==null&&Dg(Yp)&&(Yp=null),Xp!==null&&Dg(Xp)&&(Xp=null),vm.forEach(o_),mm.forEach(o_)}function V0(A,R){A.blockedOn===R&&(A.blockedOn=null,Lx||(Lx=!0,Xc.unstable_scheduleCallback(Xc.unstable_NormalPriority,aA)))}function gm(A){function R(S){return V0(S,A)}if(0<vg.length){V0(vg[0],A);for(var e=1;e<vg.length;e++){var v=vg[e];v.blockedOn===A&&(v.blockedOn=null)}}for(Wp!==null&&V0(Wp,A),Yp!==null&&V0(Yp,A),Xp!==null&&V0(Xp,A),vm.forEach(R),mm.forEach(R),e=0;e<Vp.length;e++)v=Vp[e],v.blockedOn===A&&(v.blockedOn=null);for(;0<Vp.length&&(e=Vp[0],e.blockedOn===null);)jw(e),e.blockedOn===null&&Vp.shift()}var r0=up.ReactCurrentBatchConfig,Qg=!0;function iA(A,R,e,v){var S=fs,r=r0.transition;r0.transition=null;try{fs=1,Bb(A,R,e,v)}finally{fs=S,r0.transition=r}}function oA(A,R,e,v){var S=fs,r=r0.transition;r0.transition=null;try{fs=4,Bb(A,R,e,v)}finally{fs=S,r0.transition=r}}function Bb(A,R,e,v){if(Qg){var S=Px(A,R,e,v);if(S===null)Dy(A,R,v,qg,e),i_(A,v);else if(nA(S,A,R,e,v))v.stopPropagation();else if(i_(A,v),R&4&&-1<rA.indexOf(A)){for(;S!==null;){var r=Im(S);if(r!==null&&Bw(r),r=Px(A,R,e,v),r===null&&Dy(A,R,v,qg,e),r===S)break;S=r}S!==null&&v.stopPropagation()}else Dy(A,R,v,null,e)}}var qg=null;function Px(A,R,e,v){if(qg=null,A=zb(v),A=zd(A),A!==null)if(R=$d(A),R===null)A=null;else if(e=R.tag,e===13){if(A=Pw(R),A!==null)return A;A=null}else if(e===3){if(R.stateNode.current.memoizedState.isDehydrated)return R.tag===3?R.stateNode.containerInfo:null;A=null}else R!==A&&(A=null);return qg=A,null}function Gw(A){switch(A){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(X6()){case Ob:return 1;case zw:return 4;case Jg:case Z6:return 16;case Ow:return 536870912;default:return 16}default:return 16}}var jp=null,Ub=null,Rg=null;function Ww(){if(Rg)return Rg;var A,R=Ub,e=R.length,v,S="value"in jp?jp.value:jp.textContent,r=S.length;for(A=0;A<e&&R[A]===S[A];A++);var a=e-A;for(v=1;v<=a&&R[e-v]===S[r-v];v++);return Rg=S.slice(A,1<v?1-v:void 0)}function Ig(A){var R=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&R===13&&(A=13)):A=R,A===10&&(A=13),32<=A||A===13?A:0}function mg(){return!0}function s_(){return!1}function Kc(A){function R(e,v,S,r,a){this._reactName=e,this._targetInst=S,this.type=v,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var u in A)A.hasOwnProperty(u)&&(e=A[u],this[u]=e?e(r):r[u]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?mg:s_,this.isPropagationStopped=s_,this}return hl(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=mg)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=mg)},persist:function(){},isPersistent:mg}),R}var v0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vb=Kc(v0),Rm=hl({},v0,{view:0,detail:0}),sA=Kc(Rm),Ty,Ay,H0,A1=hl({},Rm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hb,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==H0&&(H0&&A.type==="mousemove"?(Ty=A.screenX-H0.screenX,Ay=A.screenY-H0.screenY):Ay=Ty=0,H0=A),Ty)},movementY:function(A){return"movementY"in A?A.movementY:Ay}}),l_=Kc(A1),lA=hl({},A1,{dataTransfer:0}),uA=Kc(lA),cA=hl({},Rm,{relatedTarget:0}),My=Kc(cA),fA=hl({},v0,{animationName:0,elapsedTime:0,pseudoElement:0}),hA=Kc(fA),pA=hl({},v0,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),dA=Kc(pA),vA=hl({},v0,{data:0}),u_=Kc(vA),mA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xA(A){var R=this.nativeEvent;return R.getModifierState?R.getModifierState(A):(A=yA[A])?!!R[A]:!1}function Hb(){return xA}var bA=hl({},Rm,{key:function(A){if(A.key){var R=mA[A.key]||A.key;if(R!=="Unidentified")return R}return A.type==="keypress"?(A=Ig(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?gA[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hb,charCode:function(A){return A.type==="keypress"?Ig(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Ig(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),_A=Kc(bA),wA=hl({},A1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c_=Kc(wA),TA=hl({},Rm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hb}),AA=Kc(TA),MA=hl({},v0,{propertyName:0,elapsedTime:0,pseudoElement:0}),kA=Kc(MA),SA=hl({},A1,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),EA=Kc(SA),CA=[9,13,27,32],jb=ip&&"CompositionEvent"in window,nm=null;ip&&"documentMode"in document&&(nm=document.documentMode);var LA=ip&&"TextEvent"in window&&!nm,Yw=ip&&(!jb||nm&&8<nm&&11>=nm),f_=String.fromCharCode(32),h_=!1;function Xw(A,R){switch(A){case"keyup":return CA.indexOf(R.keyCode)!==-1;case"keydown":return R.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zw(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Vv=!1;function PA(A,R){switch(A){case"compositionend":return Zw(R);case"keypress":return R.which!==32?null:(h_=!0,f_);case"textInput":return A=R.data,A===f_&&h_?null:A;default:return null}}function DA(A,R){if(Vv)return A==="compositionend"||!jb&&Xw(A,R)?(A=Ww(),Rg=Ub=jp=null,Vv=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(R.ctrlKey||R.altKey||R.metaKey)||R.ctrlKey&&R.altKey){if(R.char&&1<R.char.length)return R.char;if(R.which)return String.fromCharCode(R.which)}return null;case"compositionend":return Yw&&R.locale!=="ko"?null:R.data;default:return null}}var RA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p_(A){var R=A&&A.nodeName&&A.nodeName.toLowerCase();return R==="input"?!!RA[A.type]:R==="textarea"}function Kw(A,R,e,v){kw(v),R=e1(R,"onChange"),0<R.length&&(e=new Vb("onChange","change",null,e,v),A.push({event:e,listeners:R}))}var am=null,ym=null;function IA(A){o5(A,0)}function M1(A){var R=Gv(A);if(xw(R))return A}function zA(A,R){if(A==="change")return R}var Jw=!1;if(ip){var ky;if(ip){var Sy="oninput"in document;if(!Sy){var d_=document.createElement("div");d_.setAttribute("oninput","return;"),Sy=typeof d_.oninput=="function"}ky=Sy}else ky=!1;Jw=ky&&(!document.documentMode||9<document.documentMode)}function v_(){am&&(am.detachEvent("onpropertychange",$w),ym=am=null)}function $w(A){if(A.propertyName==="value"&&M1(ym)){var R=[];Kw(R,ym,A,zb(A)),Lw(IA,R)}}function OA(A,R,e){A==="focusin"?(v_(),am=R,ym=e,am.attachEvent("onpropertychange",$w)):A==="focusout"&&v_()}function FA(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return M1(ym)}function NA(A,R){if(A==="click")return M1(R)}function BA(A,R){if(A==="input"||A==="change")return M1(R)}function UA(A,R){return A===R&&(A!==0||1/A===1/R)||A!==A&&R!==R}var nh=typeof Object.is=="function"?Object.is:UA;function xm(A,R){if(nh(A,R))return!0;if(typeof A!="object"||A===null||typeof R!="object"||R===null)return!1;var e=Object.keys(A),v=Object.keys(R);if(e.length!==v.length)return!1;for(v=0;v<e.length;v++){var S=e[v];if(!px.call(R,S)||!nh(A[S],R[S]))return!1}return!0}function m_(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function g_(A,R){var e=m_(A);A=0;for(var v;e;){if(e.nodeType===3){if(v=A+e.textContent.length,A<=R&&v>=R)return{node:e,offset:R-A};A=v}e:{for(;e;){if(e.nextSibling){e=e.nextSibling;break e}e=e.parentNode}e=void 0}e=m_(e)}}function Qw(A,R){return A&&R?A===R?!0:A&&A.nodeType===3?!1:R&&R.nodeType===3?Qw(A,R.parentNode):"contains"in A?A.contains(R):A.compareDocumentPosition?!!(A.compareDocumentPosition(R)&16):!1:!1}function qw(){for(var A=window,R=Xg();R instanceof A.HTMLIFrameElement;){try{var e=typeof R.contentWindow.location.href=="string"}catch{e=!1}if(e)A=R.contentWindow;else break;R=Xg(A.document)}return R}function Gb(A){var R=A&&A.nodeName&&A.nodeName.toLowerCase();return R&&(R==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||R==="textarea"||A.contentEditable==="true")}function VA(A){var R=qw(),e=A.focusedElem,v=A.selectionRange;if(R!==e&&e&&e.ownerDocument&&Qw(e.ownerDocument.documentElement,e)){if(v!==null&&Gb(e)){if(R=v.start,A=v.end,A===void 0&&(A=R),"selectionStart"in e)e.selectionStart=R,e.selectionEnd=Math.min(A,e.value.length);else if(A=(R=e.ownerDocument||document)&&R.defaultView||window,A.getSelection){A=A.getSelection();var S=e.textContent.length,r=Math.min(v.start,S);v=v.end===void 0?r:Math.min(v.end,S),!A.extend&&r>v&&(S=v,v=r,r=S),S=g_(e,r);var a=g_(e,v);S&&a&&(A.rangeCount!==1||A.anchorNode!==S.node||A.anchorOffset!==S.offset||A.focusNode!==a.node||A.focusOffset!==a.offset)&&(R=R.createRange(),R.setStart(S.node,S.offset),A.removeAllRanges(),r>v?(A.addRange(R),A.extend(a.node,a.offset)):(R.setEnd(a.node,a.offset),A.addRange(R)))}}for(R=[],A=e;A=A.parentNode;)A.nodeType===1&&R.push({element:A,left:A.scrollLeft,top:A.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<R.length;e++)A=R[e],A.element.scrollLeft=A.left,A.element.scrollTop=A.top}}var HA=ip&&"documentMode"in document&&11>=document.documentMode,Hv=null,Dx=null,im=null,Rx=!1;function y_(A,R,e){var v=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Rx||Hv==null||Hv!==Xg(v)||(v=Hv,"selectionStart"in v&&Gb(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),im&&xm(im,v)||(im=v,v=e1(Dx,"onSelect"),0<v.length&&(R=new Vb("onSelect","select",null,R,e),A.push({event:R,listeners:v}),R.target=Hv)))}function gg(A,R){var e={};return e[A.toLowerCase()]=R.toLowerCase(),e["Webkit"+A]="webkit"+R,e["Moz"+A]="moz"+R,e}var jv={animationend:gg("Animation","AnimationEnd"),animationiteration:gg("Animation","AnimationIteration"),animationstart:gg("Animation","AnimationStart"),transitionend:gg("Transition","TransitionEnd")},Ey={},e5={};ip&&(e5=document.createElement("div").style,"AnimationEvent"in window||(delete jv.animationend.animation,delete jv.animationiteration.animation,delete jv.animationstart.animation),"TransitionEvent"in window||delete jv.transitionend.transition);function k1(A){if(Ey[A])return Ey[A];if(!jv[A])return A;var R=jv[A],e;for(e in R)if(R.hasOwnProperty(e)&&e in e5)return Ey[A]=R[e];return A}var t5=k1("animationend"),r5=k1("animationiteration"),n5=k1("animationstart"),a5=k1("transitionend"),i5=new Map,x_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nd(A,R){i5.set(A,R),Jd(R,[A])}for(var Cy=0;Cy<x_.length;Cy++){var Ly=x_[Cy],jA=Ly.toLowerCase(),GA=Ly[0].toUpperCase()+Ly.slice(1);nd(jA,"on"+GA)}nd(t5,"onAnimationEnd");nd(r5,"onAnimationIteration");nd(n5,"onAnimationStart");nd("dblclick","onDoubleClick");nd("focusin","onFocus");nd("focusout","onBlur");nd(a5,"onTransitionEnd");i0("onMouseEnter",["mouseout","mouseover"]);i0("onMouseLeave",["mouseout","mouseover"]);i0("onPointerEnter",["pointerout","pointerover"]);i0("onPointerLeave",["pointerout","pointerover"]);Jd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WA=new Set("cancel close invalid load scroll toggle".split(" ").concat($0));function b_(A,R,e){var v=A.type||"unknown-event";A.currentTarget=e,j6(v,R,void 0,A),A.currentTarget=null}function o5(A,R){R=(R&4)!==0;for(var e=0;e<A.length;e++){var v=A[e],S=v.event;v=v.listeners;e:{var r=void 0;if(R)for(var a=v.length-1;0<=a;a--){var u=v[a],c=u.instance,t=u.currentTarget;if(u=u.listener,c!==r&&S.isPropagationStopped())break e;b_(S,u,t),r=c}else for(a=0;a<v.length;a++){if(u=v[a],c=u.instance,t=u.currentTarget,u=u.listener,c!==r&&S.isPropagationStopped())break e;b_(S,u,t),r=c}}}if(Kg)throw A=Ex,Kg=!1,Ex=null,A}function Vs(A,R){var e=R[Nx];e===void 0&&(e=R[Nx]=new Set);var v=A+"__bubble";e.has(v)||(s5(R,A,2,!1),e.add(v))}function Py(A,R,e){var v=0;R&&(v|=4),s5(e,A,v,R)}var yg="_reactListening"+Math.random().toString(36).slice(2);function bm(A){if(!A[yg]){A[yg]=!0,dw.forEach(function(e){e!=="selectionchange"&&(WA.has(e)||Py(e,!1,A),Py(e,!0,A))});var R=A.nodeType===9?A:A.ownerDocument;R===null||R[yg]||(R[yg]=!0,Py("selectionchange",!1,R))}}function s5(A,R,e,v){switch(Gw(R)){case 1:var S=iA;break;case 4:S=oA;break;default:S=Bb}e=S.bind(null,R,e,A),S=void 0,!Sx||R!=="touchstart"&&R!=="touchmove"&&R!=="wheel"||(S=!0),v?S!==void 0?A.addEventListener(R,e,{capture:!0,passive:S}):A.addEventListener(R,e,!0):S!==void 0?A.addEventListener(R,e,{passive:S}):A.addEventListener(R,e,!1)}function Dy(A,R,e,v,S){var r=v;if((R&1)===0&&(R&2)===0&&v!==null)e:for(;;){if(v===null)return;var a=v.tag;if(a===3||a===4){var u=v.stateNode.containerInfo;if(u===S||u.nodeType===8&&u.parentNode===S)break;if(a===4)for(a=v.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===S||c.nodeType===8&&c.parentNode===S))return;a=a.return}for(;u!==null;){if(a=zd(u),a===null)return;if(c=a.tag,c===5||c===6){v=r=a;continue e}u=u.parentNode}}v=v.return}Lw(function(){var t=r,f=zb(e),n=[];e:{var o=i5.get(A);if(o!==void 0){var l=Vb,h=A;switch(A){case"keypress":if(Ig(e)===0)break e;case"keydown":case"keyup":l=_A;break;case"focusin":h="focus",l=My;break;case"focusout":h="blur",l=My;break;case"beforeblur":case"afterblur":l=My;break;case"click":if(e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=l_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=uA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=AA;break;case t5:case r5:case n5:l=hA;break;case a5:l=kA;break;case"scroll":l=sA;break;case"wheel":l=EA;break;case"copy":case"cut":case"paste":l=dA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=c_}var i=(R&4)!==0,s=!i&&A==="scroll",p=i?o!==null?o+"Capture":null:o;i=[];for(var d=t,g;d!==null;){g=d;var b=g.stateNode;if(g.tag===5&&b!==null&&(g=b,p!==null&&(b=dm(d,p),b!=null&&i.push(_m(d,b,g)))),s)break;d=d.return}0<i.length&&(o=new l(o,h,null,e,f),n.push({event:o,listeners:i}))}}if((R&7)===0){e:{if(o=A==="mouseover"||A==="pointerover",l=A==="mouseout"||A==="pointerout",o&&e!==Mx&&(h=e.relatedTarget||e.fromElement)&&(zd(h)||h[op]))break e;if((l||o)&&(o=f.window===f?f:(o=f.ownerDocument)?o.defaultView||o.parentWindow:window,l?(h=e.relatedTarget||e.toElement,l=t,h=h?zd(h):null,h!==null&&(s=$d(h),h!==s||h.tag!==5&&h.tag!==6)&&(h=null)):(l=null,h=t),l!==h)){if(i=l_,b="onMouseLeave",p="onMouseEnter",d="mouse",(A==="pointerout"||A==="pointerover")&&(i=c_,b="onPointerLeave",p="onPointerEnter",d="pointer"),s=l==null?o:Gv(l),g=h==null?o:Gv(h),o=new i(b,d+"leave",l,e,f),o.target=s,o.relatedTarget=g,b=null,zd(f)===t&&(i=new i(p,d+"enter",h,e,f),i.target=g,i.relatedTarget=s,b=i),s=b,l&&h)t:{for(i=l,p=h,d=0,g=i;g;g=zv(g))d++;for(g=0,b=p;b;b=zv(b))g++;for(;0<d-g;)i=zv(i),d--;for(;0<g-d;)p=zv(p),g--;for(;d--;){if(i===p||p!==null&&i===p.alternate)break t;i=zv(i),p=zv(p)}i=null}else i=null;l!==null&&__(n,o,l,i,!1),h!==null&&s!==null&&__(n,s,h,i,!0)}}e:{if(o=t?Gv(t):window,l=o.nodeName&&o.nodeName.toLowerCase(),l==="select"||l==="input"&&o.type==="file")var m=zA;else if(p_(o))if(Jw)m=BA;else{m=FA;var x=OA}else(l=o.nodeName)&&l.toLowerCase()==="input"&&(o.type==="checkbox"||o.type==="radio")&&(m=NA);if(m&&(m=m(A,t))){Kw(n,m,e,f);break e}x&&x(A,o,t),A==="focusout"&&(x=o._wrapperState)&&x.controlled&&o.type==="number"&&bx(o,"number",o.value)}switch(x=t?Gv(t):window,A){case"focusin":(p_(x)||x.contentEditable==="true")&&(Hv=x,Dx=t,im=null);break;case"focusout":im=Dx=Hv=null;break;case"mousedown":Rx=!0;break;case"contextmenu":case"mouseup":case"dragend":Rx=!1,y_(n,e,f);break;case"selectionchange":if(HA)break;case"keydown":case"keyup":y_(n,e,f)}var w;if(jb)e:{switch(A){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Vv?Xw(A,e)&&(y="onCompositionEnd"):A==="keydown"&&e.keyCode===229&&(y="onCompositionStart");y&&(Yw&&e.locale!=="ko"&&(Vv||y!=="onCompositionStart"?y==="onCompositionEnd"&&Vv&&(w=Ww()):(jp=f,Ub="value"in jp?jp.value:jp.textContent,Vv=!0)),x=e1(t,y),0<x.length&&(y=new u_(y,A,null,e,f),n.push({event:y,listeners:x}),w?y.data=w:(w=Zw(e),w!==null&&(y.data=w)))),(w=LA?PA(A,e):DA(A,e))&&(t=e1(t,"onBeforeInput"),0<t.length&&(f=new u_("onBeforeInput","beforeinput",null,e,f),n.push({event:f,listeners:t}),f.data=w))}o5(n,R)})}function _m(A,R,e){return{instance:A,listener:R,currentTarget:e}}function e1(A,R){for(var e=R+"Capture",v=[];A!==null;){var S=A,r=S.stateNode;S.tag===5&&r!==null&&(S=r,r=dm(A,e),r!=null&&v.unshift(_m(A,r,S)),r=dm(A,R),r!=null&&v.push(_m(A,r,S))),A=A.return}return v}function zv(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5);return A||null}function __(A,R,e,v,S){for(var r=R._reactName,a=[];e!==null&&e!==v;){var u=e,c=u.alternate,t=u.stateNode;if(c!==null&&c===v)break;u.tag===5&&t!==null&&(u=t,S?(c=dm(e,r),c!=null&&a.unshift(_m(e,c,u))):S||(c=dm(e,r),c!=null&&a.push(_m(e,c,u)))),e=e.return}a.length!==0&&A.push({event:R,listeners:a})}var YA=/\r\n?/g,XA=/\u0000|\uFFFD/g;function w_(A){return(typeof A=="string"?A:""+A).replace(YA,`
`).replace(XA,"")}function xg(A,R,e){if(R=w_(R),w_(A)!==R&&e)throw Error(Ra(425))}function t1(){}var Ix=null,zx=null;function Ox(A,R){return A==="textarea"||A==="noscript"||typeof R.children=="string"||typeof R.children=="number"||typeof R.dangerouslySetInnerHTML=="object"&&R.dangerouslySetInnerHTML!==null&&R.dangerouslySetInnerHTML.__html!=null}var Fx=typeof setTimeout=="function"?setTimeout:void 0,ZA=typeof clearTimeout=="function"?clearTimeout:void 0,T_=typeof Promise=="function"?Promise:void 0,KA=typeof queueMicrotask=="function"?queueMicrotask:typeof T_<"u"?function(A){return T_.resolve(null).then(A).catch(JA)}:Fx;function JA(A){setTimeout(function(){throw A})}function Ry(A,R){var e=R,v=0;do{var S=e.nextSibling;if(A.removeChild(e),S&&S.nodeType===8)if(e=S.data,e==="/$"){if(v===0){A.removeChild(S),gm(R);return}v--}else e!=="$"&&e!=="$?"&&e!=="$!"||v++;e=S}while(e);gm(R)}function Zp(A){for(;A!=null;A=A.nextSibling){var R=A.nodeType;if(R===1||R===3)break;if(R===8){if(R=A.data,R==="$"||R==="$!"||R==="$?")break;if(R==="/$")return null}}return A}function A_(A){A=A.previousSibling;for(var R=0;A;){if(A.nodeType===8){var e=A.data;if(e==="$"||e==="$!"||e==="$?"){if(R===0)return A;R--}else e==="/$"&&R++}A=A.previousSibling}return null}var m0=Math.random().toString(36).slice(2),Ah="__reactFiber$"+m0,wm="__reactProps$"+m0,op="__reactContainer$"+m0,Nx="__reactEvents$"+m0,$A="__reactListeners$"+m0,QA="__reactHandles$"+m0;function zd(A){var R=A[Ah];if(R)return R;for(var e=A.parentNode;e;){if(R=e[op]||e[Ah]){if(e=R.alternate,R.child!==null||e!==null&&e.child!==null)for(A=A_(A);A!==null;){if(e=A[Ah])return e;A=A_(A)}return R}A=e,e=A.parentNode}return null}function Im(A){return A=A[Ah]||A[op],!A||A.tag!==5&&A.tag!==6&&A.tag!==13&&A.tag!==3?null:A}function Gv(A){if(A.tag===5||A.tag===6)return A.stateNode;throw Error(Ra(33))}function S1(A){return A[wm]||null}var Bx=[],Wv=-1;function ad(A){return{current:A}}function js(A){0>Wv||(A.current=Bx[Wv],Bx[Wv]=null,Wv--)}function Rs(A,R){Wv++,Bx[Wv]=A.current,A.current=R}var td={},Yu=ad(td),Ac=ad(!1),Hd=td;function o0(A,R){var e=A.type.contextTypes;if(!e)return td;var v=A.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===R)return v.__reactInternalMemoizedMaskedChildContext;var S={},r;for(r in e)S[r]=R[r];return v&&(A=A.stateNode,A.__reactInternalMemoizedUnmaskedChildContext=R,A.__reactInternalMemoizedMaskedChildContext=S),S}function Mc(A){return A=A.childContextTypes,A!=null}function r1(){js(Ac),js(Yu)}function M_(A,R,e){if(Yu.current!==td)throw Error(Ra(168));Rs(Yu,R),Rs(Ac,e)}function l5(A,R,e){var v=A.stateNode;if(R=R.childContextTypes,typeof v.getChildContext!="function")return e;v=v.getChildContext();for(var S in v)if(!(S in R))throw Error(Ra(108,O6(A)||"Unknown",S));return hl({},e,v)}function n1(A){return A=(A=A.stateNode)&&A.__reactInternalMemoizedMergedChildContext||td,Hd=Yu.current,Rs(Yu,A),Rs(Ac,Ac.current),!0}function k_(A,R,e){var v=A.stateNode;if(!v)throw Error(Ra(169));e?(A=l5(A,R,Hd),v.__reactInternalMemoizedMergedChildContext=A,js(Ac),js(Yu),Rs(Yu,A)):js(Ac),Rs(Ac,e)}var ep=null,E1=!1,Iy=!1;function u5(A){ep===null?ep=[A]:ep.push(A)}function qA(A){E1=!0,u5(A)}function id(){if(!Iy&&ep!==null){Iy=!0;var A=0,R=fs;try{var e=ep;for(fs=1;A<e.length;A++){var v=e[A];do v=v(!0);while(v!==null)}ep=null,E1=!1}catch(S){throw ep!==null&&(ep=ep.slice(A+1)),Iw(Ob,id),S}finally{fs=R,Iy=!1}}return null}var Yv=[],Xv=0,a1=null,i1=0,_f=[],wf=0,jd=null,tp=1,rp="";function Dd(A,R){Yv[Xv++]=i1,Yv[Xv++]=a1,a1=A,i1=R}function c5(A,R,e){_f[wf++]=tp,_f[wf++]=rp,_f[wf++]=jd,jd=A;var v=tp;A=rp;var S=32-th(v)-1;v&=~(1<<S),e+=1;var r=32-th(R)+S;if(30<r){var a=S-S%5;r=(v&(1<<a)-1).toString(32),v>>=a,S-=a,tp=1<<32-th(R)+S|e<<S|v,rp=r+A}else tp=1<<r|e<<S|v,rp=A}function Wb(A){A.return!==null&&(Dd(A,1),c5(A,1,0))}function Yb(A){for(;A===a1;)a1=Yv[--Xv],Yv[Xv]=null,i1=Yv[--Xv],Yv[Xv]=null;for(;A===jd;)jd=_f[--wf],_f[wf]=null,rp=_f[--wf],_f[wf]=null,tp=_f[--wf],_f[wf]=null}var Yc=null,Wc=null,nl=!1,eh=null;function f5(A,R){var e=Tf(5,null,null,0);e.elementType="DELETED",e.stateNode=R,e.return=A,R=A.deletions,R===null?(A.deletions=[e],A.flags|=16):R.push(e)}function S_(A,R){switch(A.tag){case 5:var e=A.type;return R=R.nodeType!==1||e.toLowerCase()!==R.nodeName.toLowerCase()?null:R,R!==null?(A.stateNode=R,Yc=A,Wc=Zp(R.firstChild),!0):!1;case 6:return R=A.pendingProps===""||R.nodeType!==3?null:R,R!==null?(A.stateNode=R,Yc=A,Wc=null,!0):!1;case 13:return R=R.nodeType!==8?null:R,R!==null?(e=jd!==null?{id:tp,overflow:rp}:null,A.memoizedState={dehydrated:R,treeContext:e,retryLane:1073741824},e=Tf(18,null,null,0),e.stateNode=R,e.return=A,A.child=e,Yc=A,Wc=null,!0):!1;default:return!1}}function Ux(A){return(A.mode&1)!==0&&(A.flags&128)===0}function Vx(A){if(nl){var R=Wc;if(R){var e=R;if(!S_(A,R)){if(Ux(A))throw Error(Ra(418));R=Zp(e.nextSibling);var v=Yc;R&&S_(A,R)?f5(v,e):(A.flags=A.flags&-4097|2,nl=!1,Yc=A)}}else{if(Ux(A))throw Error(Ra(418));A.flags=A.flags&-4097|2,nl=!1,Yc=A}}}function E_(A){for(A=A.return;A!==null&&A.tag!==5&&A.tag!==3&&A.tag!==13;)A=A.return;Yc=A}function bg(A){if(A!==Yc)return!1;if(!nl)return E_(A),nl=!0,!1;var R;if((R=A.tag!==3)&&!(R=A.tag!==5)&&(R=A.type,R=R!=="head"&&R!=="body"&&!Ox(A.type,A.memoizedProps)),R&&(R=Wc)){if(Ux(A))throw h5(),Error(Ra(418));for(;R;)f5(A,R),R=Zp(R.nextSibling)}if(E_(A),A.tag===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(Ra(317));e:{for(A=A.nextSibling,R=0;A;){if(A.nodeType===8){var e=A.data;if(e==="/$"){if(R===0){Wc=Zp(A.nextSibling);break e}R--}else e!=="$"&&e!=="$!"&&e!=="$?"||R++}A=A.nextSibling}Wc=null}}else Wc=Yc?Zp(A.stateNode.nextSibling):null;return!0}function h5(){for(var A=Wc;A;)A=Zp(A.nextSibling)}function s0(){Wc=Yc=null,nl=!1}function Xb(A){eh===null?eh=[A]:eh.push(A)}var eM=up.ReactCurrentBatchConfig;function Qf(A,R){if(A&&A.defaultProps){R=hl({},R),A=A.defaultProps;for(var e in A)R[e]===void 0&&(R[e]=A[e]);return R}return R}var o1=ad(null),s1=null,Zv=null,Zb=null;function Kb(){Zb=Zv=s1=null}function Jb(A){var R=o1.current;js(o1),A._currentValue=R}function Hx(A,R,e){for(;A!==null;){var v=A.alternate;if((A.childLanes&R)!==R?(A.childLanes|=R,v!==null&&(v.childLanes|=R)):v!==null&&(v.childLanes&R)!==R&&(v.childLanes|=R),A===e)break;A=A.return}}function n0(A,R){s1=A,Zb=Zv=null,A=A.dependencies,A!==null&&A.firstContext!==null&&((A.lanes&R)!==0&&(Tc=!0),A.firstContext=null)}function kf(A){var R=A._currentValue;if(Zb!==A)if(A={context:A,memoizedValue:R,next:null},Zv===null){if(s1===null)throw Error(Ra(308));Zv=A,s1.dependencies={lanes:0,firstContext:A}}else Zv=Zv.next=A;return R}var Od=null;function $b(A){Od===null?Od=[A]:Od.push(A)}function p5(A,R,e,v){var S=R.interleaved;return S===null?(e.next=e,$b(R)):(e.next=S.next,S.next=e),R.interleaved=e,sp(A,v)}function sp(A,R){A.lanes|=R;var e=A.alternate;for(e!==null&&(e.lanes|=R),e=A,A=A.return;A!==null;)A.childLanes|=R,e=A.alternate,e!==null&&(e.childLanes|=R),e=A,A=A.return;return e.tag===3?e.stateNode:null}var Up=!1;function Qb(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d5(A,R){A=A.updateQueue,R.updateQueue===A&&(R.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,effects:A.effects})}function np(A,R){return{eventTime:A,lane:R,tag:0,payload:null,callback:null,next:null}}function Kp(A,R,e){var v=A.updateQueue;if(v===null)return null;if(v=v.shared,(Wo&2)!==0){var S=v.pending;return S===null?R.next=R:(R.next=S.next,S.next=R),v.pending=R,sp(A,e)}return S=v.interleaved,S===null?(R.next=R,$b(v)):(R.next=S.next,S.next=R),v.interleaved=R,sp(A,e)}function zg(A,R,e){if(R=R.updateQueue,R!==null&&(R=R.shared,(e&4194240)!==0)){var v=R.lanes;v&=A.pendingLanes,e|=v,R.lanes=e,Fb(A,e)}}function C_(A,R){var e=A.updateQueue,v=A.alternate;if(v!==null&&(v=v.updateQueue,e===v)){var S=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var a={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?S=r=a:r=r.next=a,e=e.next}while(e!==null);r===null?S=r=R:r=r.next=R}else S=r=R;e={baseState:v.baseState,firstBaseUpdate:S,lastBaseUpdate:r,shared:v.shared,effects:v.effects},A.updateQueue=e;return}A=e.lastBaseUpdate,A===null?e.firstBaseUpdate=R:A.next=R,e.lastBaseUpdate=R}function l1(A,R,e,v){var S=A.updateQueue;Up=!1;var r=S.firstBaseUpdate,a=S.lastBaseUpdate,u=S.shared.pending;if(u!==null){S.shared.pending=null;var c=u,t=c.next;c.next=null,a===null?r=t:a.next=t,a=c;var f=A.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==a&&(u===null?f.firstBaseUpdate=t:u.next=t,f.lastBaseUpdate=c))}if(r!==null){var n=S.baseState;a=0,f=t=c=null,u=r;do{var o=u.lane,l=u.eventTime;if((v&o)===o){f!==null&&(f=f.next={eventTime:l,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var h=A,i=u;switch(o=R,l=e,i.tag){case 1:if(h=i.payload,typeof h=="function"){n=h.call(l,n,o);break e}n=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=i.payload,o=typeof h=="function"?h.call(l,n,o):h,o==null)break e;n=hl({},n,o);break e;case 2:Up=!0}}u.callback!==null&&u.lane!==0&&(A.flags|=64,o=S.effects,o===null?S.effects=[u]:o.push(u))}else l={eventTime:l,lane:o,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(t=f=l,c=n):f=f.next=l,a|=o;if(u=u.next,u===null){if(u=S.shared.pending,u===null)break;o=u,u=o.next,o.next=null,S.lastBaseUpdate=o,S.shared.pending=null}}while(1);if(f===null&&(c=n),S.baseState=c,S.firstBaseUpdate=t,S.lastBaseUpdate=f,R=S.shared.interleaved,R!==null){S=R;do a|=S.lane,S=S.next;while(S!==R)}else r===null&&(S.shared.lanes=0);Wd|=a,A.lanes=a,A.memoizedState=n}}function L_(A,R,e){if(A=R.effects,R.effects=null,A!==null)for(R=0;R<A.length;R++){var v=A[R],S=v.callback;if(S!==null){if(v.callback=null,v=e,typeof S!="function")throw Error(Ra(191,S));S.call(v)}}}var v5=new pw.Component().refs;function jx(A,R,e,v){R=A.memoizedState,e=e(v,R),e=e==null?R:hl({},R,e),A.memoizedState=e,A.lanes===0&&(A.updateQueue.baseState=e)}var C1={isMounted:function(A){return(A=A._reactInternals)?$d(A)===A:!1},enqueueSetState:function(A,R,e){A=A._reactInternals;var v=ic(),S=$p(A),r=np(v,S);r.payload=R,e!=null&&(r.callback=e),R=Kp(A,r,S),R!==null&&(rh(R,A,S,v),zg(R,A,S))},enqueueReplaceState:function(A,R,e){A=A._reactInternals;var v=ic(),S=$p(A),r=np(v,S);r.tag=1,r.payload=R,e!=null&&(r.callback=e),R=Kp(A,r,S),R!==null&&(rh(R,A,S,v),zg(R,A,S))},enqueueForceUpdate:function(A,R){A=A._reactInternals;var e=ic(),v=$p(A),S=np(e,v);S.tag=2,R!=null&&(S.callback=R),R=Kp(A,S,v),R!==null&&(rh(R,A,v,e),zg(R,A,v))}};function P_(A,R,e,v,S,r,a){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(v,r,a):R.prototype&&R.prototype.isPureReactComponent?!xm(e,v)||!xm(S,r):!0}function m5(A,R,e){var v=!1,S=td,r=R.contextType;return typeof r=="object"&&r!==null?r=kf(r):(S=Mc(R)?Hd:Yu.current,v=R.contextTypes,r=(v=v!=null)?o0(A,S):td),R=new R(e,r),A.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=C1,A.stateNode=R,R._reactInternals=A,v&&(A=A.stateNode,A.__reactInternalMemoizedUnmaskedChildContext=S,A.__reactInternalMemoizedMaskedChildContext=r),R}function D_(A,R,e,v){A=R.state,typeof R.componentWillReceiveProps=="function"&&R.componentWillReceiveProps(e,v),typeof R.UNSAFE_componentWillReceiveProps=="function"&&R.UNSAFE_componentWillReceiveProps(e,v),R.state!==A&&C1.enqueueReplaceState(R,R.state,null)}function Gx(A,R,e,v){var S=A.stateNode;S.props=e,S.state=A.memoizedState,S.refs=v5,Qb(A);var r=R.contextType;typeof r=="object"&&r!==null?S.context=kf(r):(r=Mc(R)?Hd:Yu.current,S.context=o0(A,r)),S.state=A.memoizedState,r=R.getDerivedStateFromProps,typeof r=="function"&&(jx(A,R,r,e),S.state=A.memoizedState),typeof R.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(R=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),R!==S.state&&C1.enqueueReplaceState(S,S.state,null),l1(A,e,S,v),S.state=A.memoizedState),typeof S.componentDidMount=="function"&&(A.flags|=4194308)}function j0(A,R,e){if(A=e.ref,A!==null&&typeof A!="function"&&typeof A!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(Ra(309));var v=e.stateNode}if(!v)throw Error(Ra(147,A));var S=v,r=""+A;return R!==null&&R.ref!==null&&typeof R.ref=="function"&&R.ref._stringRef===r?R.ref:(R=function(a){var u=S.refs;u===v5&&(u=S.refs={}),a===null?delete u[r]:u[r]=a},R._stringRef=r,R)}if(typeof A!="string")throw Error(Ra(284));if(!e._owner)throw Error(Ra(290,A))}return A}function _g(A,R){throw A=Object.prototype.toString.call(R),Error(Ra(31,A==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":A))}function R_(A){var R=A._init;return R(A._payload)}function g5(A){function R(p,d){if(A){var g=p.deletions;g===null?(p.deletions=[d],p.flags|=16):g.push(d)}}function e(p,d){if(!A)return null;for(;d!==null;)R(p,d),d=d.sibling;return null}function v(p,d){for(p=new Map;d!==null;)d.key!==null?p.set(d.key,d):p.set(d.index,d),d=d.sibling;return p}function S(p,d){return p=Qp(p,d),p.index=0,p.sibling=null,p}function r(p,d,g){return p.index=g,A?(g=p.alternate,g!==null?(g=g.index,g<d?(p.flags|=2,d):g):(p.flags|=2,d)):(p.flags|=1048576,d)}function a(p){return A&&p.alternate===null&&(p.flags|=2),p}function u(p,d,g,b){return d===null||d.tag!==6?(d=Vy(g,p.mode,b),d.return=p,d):(d=S(d,g),d.return=p,d)}function c(p,d,g,b){var m=g.type;return m===Uv?f(p,d,g.props.children,b,g.key):d!==null&&(d.elementType===m||typeof m=="object"&&m!==null&&m.$$typeof===Bp&&R_(m)===d.type)?(b=S(d,g.props),b.ref=j0(p,d,g),b.return=p,b):(b=Vg(g.type,g.key,g.props,null,p.mode,b),b.ref=j0(p,d,g),b.return=p,b)}function t(p,d,g,b){return d===null||d.tag!==4||d.stateNode.containerInfo!==g.containerInfo||d.stateNode.implementation!==g.implementation?(d=Hy(g,p.mode,b),d.return=p,d):(d=S(d,g.children||[]),d.return=p,d)}function f(p,d,g,b,m){return d===null||d.tag!==7?(d=Ud(g,p.mode,b,m),d.return=p,d):(d=S(d,g),d.return=p,d)}function n(p,d,g){if(typeof d=="string"&&d!==""||typeof d=="number")return d=Vy(""+d,p.mode,g),d.return=p,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case cg:return g=Vg(d.type,d.key,d.props,null,p.mode,g),g.ref=j0(p,null,d),g.return=p,g;case Bv:return d=Hy(d,p.mode,g),d.return=p,d;case Bp:var b=d._init;return n(p,b(d._payload),g)}if(K0(d)||N0(d))return d=Ud(d,p.mode,g,null),d.return=p,d;_g(p,d)}return null}function o(p,d,g,b){var m=d!==null?d.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return m!==null?null:u(p,d,""+g,b);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case cg:return g.key===m?c(p,d,g,b):null;case Bv:return g.key===m?t(p,d,g,b):null;case Bp:return m=g._init,o(p,d,m(g._payload),b)}if(K0(g)||N0(g))return m!==null?null:f(p,d,g,b,null);_g(p,g)}return null}function l(p,d,g,b,m){if(typeof b=="string"&&b!==""||typeof b=="number")return p=p.get(g)||null,u(d,p,""+b,m);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case cg:return p=p.get(b.key===null?g:b.key)||null,c(d,p,b,m);case Bv:return p=p.get(b.key===null?g:b.key)||null,t(d,p,b,m);case Bp:var x=b._init;return l(p,d,g,x(b._payload),m)}if(K0(b)||N0(b))return p=p.get(g)||null,f(d,p,b,m,null);_g(d,b)}return null}function h(p,d,g,b){for(var m=null,x=null,w=d,y=d=0,T=null;w!==null&&y<g.length;y++){w.index>y?(T=w,w=null):T=w.sibling;var M=o(p,w,g[y],b);if(M===null){w===null&&(w=T);break}A&&w&&M.alternate===null&&R(p,w),d=r(M,d,y),x===null?m=M:x.sibling=M,x=M,w=T}if(y===g.length)return e(p,w),nl&&Dd(p,y),m;if(w===null){for(;y<g.length;y++)w=n(p,g[y],b),w!==null&&(d=r(w,d,y),x===null?m=w:x.sibling=w,x=w);return nl&&Dd(p,y),m}for(w=v(p,w);y<g.length;y++)T=l(w,p,y,g[y],b),T!==null&&(A&&T.alternate!==null&&w.delete(T.key===null?y:T.key),d=r(T,d,y),x===null?m=T:x.sibling=T,x=T);return A&&w.forEach(function(P){return R(p,P)}),nl&&Dd(p,y),m}function i(p,d,g,b){var m=N0(g);if(typeof m!="function")throw Error(Ra(150));if(g=m.call(g),g==null)throw Error(Ra(151));for(var x=m=null,w=d,y=d=0,T=null,M=g.next();w!==null&&!M.done;y++,M=g.next()){w.index>y?(T=w,w=null):T=w.sibling;var P=o(p,w,M.value,b);if(P===null){w===null&&(w=T);break}A&&w&&P.alternate===null&&R(p,w),d=r(P,d,y),x===null?m=P:x.sibling=P,x=P,w=T}if(M.done)return e(p,w),nl&&Dd(p,y),m;if(w===null){for(;!M.done;y++,M=g.next())M=n(p,M.value,b),M!==null&&(d=r(M,d,y),x===null?m=M:x.sibling=M,x=M);return nl&&Dd(p,y),m}for(w=v(p,w);!M.done;y++,M=g.next())M=l(w,p,y,M.value,b),M!==null&&(A&&M.alternate!==null&&w.delete(M.key===null?y:M.key),d=r(M,d,y),x===null?m=M:x.sibling=M,x=M);return A&&w.forEach(function(L){return R(p,L)}),nl&&Dd(p,y),m}function s(p,d,g,b){if(typeof g=="object"&&g!==null&&g.type===Uv&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case cg:e:{for(var m=g.key,x=d;x!==null;){if(x.key===m){if(m=g.type,m===Uv){if(x.tag===7){e(p,x.sibling),d=S(x,g.props.children),d.return=p,p=d;break e}}else if(x.elementType===m||typeof m=="object"&&m!==null&&m.$$typeof===Bp&&R_(m)===x.type){e(p,x.sibling),d=S(x,g.props),d.ref=j0(p,x,g),d.return=p,p=d;break e}e(p,x);break}else R(p,x);x=x.sibling}g.type===Uv?(d=Ud(g.props.children,p.mode,b,g.key),d.return=p,p=d):(b=Vg(g.type,g.key,g.props,null,p.mode,b),b.ref=j0(p,d,g),b.return=p,p=b)}return a(p);case Bv:e:{for(x=g.key;d!==null;){if(d.key===x)if(d.tag===4&&d.stateNode.containerInfo===g.containerInfo&&d.stateNode.implementation===g.implementation){e(p,d.sibling),d=S(d,g.children||[]),d.return=p,p=d;break e}else{e(p,d);break}else R(p,d);d=d.sibling}d=Hy(g,p.mode,b),d.return=p,p=d}return a(p);case Bp:return x=g._init,s(p,d,x(g._payload),b)}if(K0(g))return h(p,d,g,b);if(N0(g))return i(p,d,g,b);_g(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,d!==null&&d.tag===6?(e(p,d.sibling),d=S(d,g),d.return=p,p=d):(e(p,d),d=Vy(g,p.mode,b),d.return=p,p=d),a(p)):e(p,d)}return s}var l0=g5(!0),y5=g5(!1),zm={},Ch=ad(zm),Tm=ad(zm),Am=ad(zm);function Fd(A){if(A===zm)throw Error(Ra(174));return A}function qb(A,R){switch(Rs(Am,R),Rs(Tm,A),Rs(Ch,zm),A=R.nodeType,A){case 9:case 11:R=(R=R.documentElement)?R.namespaceURI:wx(null,"");break;default:A=A===8?R.parentNode:R,R=A.namespaceURI||null,A=A.tagName,R=wx(R,A)}js(Ch),Rs(Ch,R)}function u0(){js(Ch),js(Tm),js(Am)}function x5(A){Fd(Am.current);var R=Fd(Ch.current),e=wx(R,A.type);R!==e&&(Rs(Tm,A),Rs(Ch,e))}function e2(A){Tm.current===A&&(js(Ch),js(Tm))}var cl=ad(0);function u1(A){for(var R=A;R!==null;){if(R.tag===13){var e=R.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return R}else if(R.tag===19&&R.memoizedProps.revealOrder!==void 0){if((R.flags&128)!==0)return R}else if(R.child!==null){R.child.return=R,R=R.child;continue}if(R===A)break;for(;R.sibling===null;){if(R.return===null||R.return===A)return null;R=R.return}R.sibling.return=R.return,R=R.sibling}return null}var zy=[];function t2(){for(var A=0;A<zy.length;A++)zy[A]._workInProgressVersionPrimary=null;zy.length=0}var Og=up.ReactCurrentDispatcher,Oy=up.ReactCurrentBatchConfig,Gd=0,fl=null,au=null,xu=null,c1=!1,om=!1,Mm=0,tM=0;function ju(){throw Error(Ra(321))}function r2(A,R){if(R===null)return!1;for(var e=0;e<R.length&&e<A.length;e++)if(!nh(A[e],R[e]))return!1;return!0}function n2(A,R,e,v,S,r){if(Gd=r,fl=R,R.memoizedState=null,R.updateQueue=null,R.lanes=0,Og.current=A===null||A.memoizedState===null?iM:oM,A=e(v,S),om){r=0;do{if(om=!1,Mm=0,25<=r)throw Error(Ra(301));r+=1,xu=au=null,R.updateQueue=null,Og.current=sM,A=e(v,S)}while(om)}if(Og.current=f1,R=au!==null&&au.next!==null,Gd=0,xu=au=fl=null,c1=!1,R)throw Error(Ra(300));return A}function a2(){var A=Mm!==0;return Mm=0,A}function Th(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xu===null?fl.memoizedState=xu=A:xu=xu.next=A,xu}function Sf(){if(au===null){var A=fl.alternate;A=A!==null?A.memoizedState:null}else A=au.next;var R=xu===null?fl.memoizedState:xu.next;if(R!==null)xu=R,au=A;else{if(A===null)throw Error(Ra(310));au=A,A={memoizedState:au.memoizedState,baseState:au.baseState,baseQueue:au.baseQueue,queue:au.queue,next:null},xu===null?fl.memoizedState=xu=A:xu=xu.next=A}return xu}function km(A,R){return typeof R=="function"?R(A):R}function Fy(A){var R=Sf(),e=R.queue;if(e===null)throw Error(Ra(311));e.lastRenderedReducer=A;var v=au,S=v.baseQueue,r=e.pending;if(r!==null){if(S!==null){var a=S.next;S.next=r.next,r.next=a}v.baseQueue=S=r,e.pending=null}if(S!==null){r=S.next,v=v.baseState;var u=a=null,c=null,t=r;do{var f=t.lane;if((Gd&f)===f)c!==null&&(c=c.next={lane:0,action:t.action,hasEagerState:t.hasEagerState,eagerState:t.eagerState,next:null}),v=t.hasEagerState?t.eagerState:A(v,t.action);else{var n={lane:f,action:t.action,hasEagerState:t.hasEagerState,eagerState:t.eagerState,next:null};c===null?(u=c=n,a=v):c=c.next=n,fl.lanes|=f,Wd|=f}t=t.next}while(t!==null&&t!==r);c===null?a=v:c.next=u,nh(v,R.memoizedState)||(Tc=!0),R.memoizedState=v,R.baseState=a,R.baseQueue=c,e.lastRenderedState=v}if(A=e.interleaved,A!==null){S=A;do r=S.lane,fl.lanes|=r,Wd|=r,S=S.next;while(S!==A)}else S===null&&(e.lanes=0);return[R.memoizedState,e.dispatch]}function Ny(A){var R=Sf(),e=R.queue;if(e===null)throw Error(Ra(311));e.lastRenderedReducer=A;var v=e.dispatch,S=e.pending,r=R.memoizedState;if(S!==null){e.pending=null;var a=S=S.next;do r=A(r,a.action),a=a.next;while(a!==S);nh(r,R.memoizedState)||(Tc=!0),R.memoizedState=r,R.baseQueue===null&&(R.baseState=r),e.lastRenderedState=r}return[r,v]}function b5(){}function _5(A,R){var e=fl,v=Sf(),S=R(),r=!nh(v.memoizedState,S);if(r&&(v.memoizedState=S,Tc=!0),v=v.queue,i2(A5.bind(null,e,v,A),[A]),v.getSnapshot!==R||r||xu!==null&&xu.memoizedState.tag&1){if(e.flags|=2048,Sm(9,T5.bind(null,e,v,S,R),void 0,null),bu===null)throw Error(Ra(349));(Gd&30)!==0||w5(e,R,S)}return S}function w5(A,R,e){A.flags|=16384,A={getSnapshot:R,value:e},R=fl.updateQueue,R===null?(R={lastEffect:null,stores:null},fl.updateQueue=R,R.stores=[A]):(e=R.stores,e===null?R.stores=[A]:e.push(A))}function T5(A,R,e,v){R.value=e,R.getSnapshot=v,M5(R)&&k5(A)}function A5(A,R,e){return e(function(){M5(R)&&k5(A)})}function M5(A){var R=A.getSnapshot;A=A.value;try{var e=R();return!nh(A,e)}catch{return!0}}function k5(A){var R=sp(A,1);R!==null&&rh(R,A,1,-1)}function I_(A){var R=Th();return typeof A=="function"&&(A=A()),R.memoizedState=R.baseState=A,A={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:km,lastRenderedState:A},R.queue=A,A=A.dispatch=aM.bind(null,fl,A),[R.memoizedState,A]}function Sm(A,R,e,v){return A={tag:A,create:R,destroy:e,deps:v,next:null},R=fl.updateQueue,R===null?(R={lastEffect:null,stores:null},fl.updateQueue=R,R.lastEffect=A.next=A):(e=R.lastEffect,e===null?R.lastEffect=A.next=A:(v=e.next,e.next=A,A.next=v,R.lastEffect=A)),A}function S5(){return Sf().memoizedState}function Fg(A,R,e,v){var S=Th();fl.flags|=A,S.memoizedState=Sm(1|R,e,void 0,v===void 0?null:v)}function L1(A,R,e,v){var S=Sf();v=v===void 0?null:v;var r=void 0;if(au!==null){var a=au.memoizedState;if(r=a.destroy,v!==null&&r2(v,a.deps)){S.memoizedState=Sm(R,e,r,v);return}}fl.flags|=A,S.memoizedState=Sm(1|R,e,r,v)}function z_(A,R){return Fg(8390656,8,A,R)}function i2(A,R){return L1(2048,8,A,R)}function E5(A,R){return L1(4,2,A,R)}function C5(A,R){return L1(4,4,A,R)}function L5(A,R){if(typeof R=="function")return A=A(),R(A),function(){R(null)};if(R!=null)return A=A(),R.current=A,function(){R.current=null}}function P5(A,R,e){return e=e!=null?e.concat([A]):null,L1(4,4,L5.bind(null,R,A),e)}function o2(){}function D5(A,R){var e=Sf();R=R===void 0?null:R;var v=e.memoizedState;return v!==null&&R!==null&&r2(R,v[1])?v[0]:(e.memoizedState=[A,R],A)}function R5(A,R){var e=Sf();R=R===void 0?null:R;var v=e.memoizedState;return v!==null&&R!==null&&r2(R,v[1])?v[0]:(A=A(),e.memoizedState=[A,R],A)}function I5(A,R,e){return(Gd&21)===0?(A.baseState&&(A.baseState=!1,Tc=!0),A.memoizedState=e):(nh(e,R)||(e=Fw(),fl.lanes|=e,Wd|=e,A.baseState=!0),R)}function rM(A,R){var e=fs;fs=e!==0&&4>e?e:4,A(!0);var v=Oy.transition;Oy.transition={};try{A(!1),R()}finally{fs=e,Oy.transition=v}}function z5(){return Sf().memoizedState}function nM(A,R,e){var v=$p(A);if(e={lane:v,action:e,hasEagerState:!1,eagerState:null,next:null},O5(A))F5(R,e);else if(e=p5(A,R,e,v),e!==null){var S=ic();rh(e,A,v,S),N5(e,R,v)}}function aM(A,R,e){var v=$p(A),S={lane:v,action:e,hasEagerState:!1,eagerState:null,next:null};if(O5(A))F5(R,S);else{var r=A.alternate;if(A.lanes===0&&(r===null||r.lanes===0)&&(r=R.lastRenderedReducer,r!==null))try{var a=R.lastRenderedState,u=r(a,e);if(S.hasEagerState=!0,S.eagerState=u,nh(u,a)){var c=R.interleaved;c===null?(S.next=S,$b(R)):(S.next=c.next,c.next=S),R.interleaved=S;return}}catch{}finally{}e=p5(A,R,S,v),e!==null&&(S=ic(),rh(e,A,v,S),N5(e,R,v))}}function O5(A){var R=A.alternate;return A===fl||R!==null&&R===fl}function F5(A,R){om=c1=!0;var e=A.pending;e===null?R.next=R:(R.next=e.next,e.next=R),A.pending=R}function N5(A,R,e){if((e&4194240)!==0){var v=R.lanes;v&=A.pendingLanes,e|=v,R.lanes=e,Fb(A,e)}}var f1={readContext:kf,useCallback:ju,useContext:ju,useEffect:ju,useImperativeHandle:ju,useInsertionEffect:ju,useLayoutEffect:ju,useMemo:ju,useReducer:ju,useRef:ju,useState:ju,useDebugValue:ju,useDeferredValue:ju,useTransition:ju,useMutableSource:ju,useSyncExternalStore:ju,useId:ju,unstable_isNewReconciler:!1},iM={readContext:kf,useCallback:function(A,R){return Th().memoizedState=[A,R===void 0?null:R],A},useContext:kf,useEffect:z_,useImperativeHandle:function(A,R,e){return e=e!=null?e.concat([A]):null,Fg(4194308,4,L5.bind(null,R,A),e)},useLayoutEffect:function(A,R){return Fg(4194308,4,A,R)},useInsertionEffect:function(A,R){return Fg(4,2,A,R)},useMemo:function(A,R){var e=Th();return R=R===void 0?null:R,A=A(),e.memoizedState=[A,R],A},useReducer:function(A,R,e){var v=Th();return R=e!==void 0?e(R):R,v.memoizedState=v.baseState=R,A={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:R},v.queue=A,A=A.dispatch=nM.bind(null,fl,A),[v.memoizedState,A]},useRef:function(A){var R=Th();return A={current:A},R.memoizedState=A},useState:I_,useDebugValue:o2,useDeferredValue:function(A){return Th().memoizedState=A},useTransition:function(){var A=I_(!1),R=A[0];return A=rM.bind(null,A[1]),Th().memoizedState=A,[R,A]},useMutableSource:function(){},useSyncExternalStore:function(A,R,e){var v=fl,S=Th();if(nl){if(e===void 0)throw Error(Ra(407));e=e()}else{if(e=R(),bu===null)throw Error(Ra(349));(Gd&30)!==0||w5(v,R,e)}S.memoizedState=e;var r={value:e,getSnapshot:R};return S.queue=r,z_(A5.bind(null,v,r,A),[A]),v.flags|=2048,Sm(9,T5.bind(null,v,r,e,R),void 0,null),e},useId:function(){var A=Th(),R=bu.identifierPrefix;if(nl){var e=rp,v=tp;e=(v&~(1<<32-th(v)-1)).toString(32)+e,R=":"+R+"R"+e,e=Mm++,0<e&&(R+="H"+e.toString(32)),R+=":"}else e=tM++,R=":"+R+"r"+e.toString(32)+":";return A.memoizedState=R},unstable_isNewReconciler:!1},oM={readContext:kf,useCallback:D5,useContext:kf,useEffect:i2,useImperativeHandle:P5,useInsertionEffect:E5,useLayoutEffect:C5,useMemo:R5,useReducer:Fy,useRef:S5,useState:function(){return Fy(km)},useDebugValue:o2,useDeferredValue:function(A){var R=Sf();return I5(R,au.memoizedState,A)},useTransition:function(){var A=Fy(km)[0],R=Sf().memoizedState;return[A,R]},useMutableSource:b5,useSyncExternalStore:_5,useId:z5,unstable_isNewReconciler:!1},sM={readContext:kf,useCallback:D5,useContext:kf,useEffect:i2,useImperativeHandle:P5,useInsertionEffect:E5,useLayoutEffect:C5,useMemo:R5,useReducer:Ny,useRef:S5,useState:function(){return Ny(km)},useDebugValue:o2,useDeferredValue:function(A){var R=Sf();return au===null?R.memoizedState=A:I5(R,au.memoizedState,A)},useTransition:function(){var A=Ny(km)[0],R=Sf().memoizedState;return[A,R]},useMutableSource:b5,useSyncExternalStore:_5,useId:z5,unstable_isNewReconciler:!1};function c0(A,R){try{var e="",v=R;do e+=z6(v),v=v.return;while(v);var S=e}catch(r){S=`
Error generating stack: `+r.message+`
`+r.stack}return{value:A,source:R,stack:S,digest:null}}function By(A,R,e){return{value:A,source:null,stack:e!=null?e:null,digest:R!=null?R:null}}function Wx(A,R){try{console.error(R.value)}catch(e){setTimeout(function(){throw e})}}var lM=typeof WeakMap=="function"?WeakMap:Map;function B5(A,R,e){e=np(-1,e),e.tag=3,e.payload={element:null};var v=R.value;return e.callback=function(){p1||(p1=!0,tb=v),Wx(A,R)},e}function U5(A,R,e){e=np(-1,e),e.tag=3;var v=A.type.getDerivedStateFromError;if(typeof v=="function"){var S=R.value;e.payload=function(){return v(S)},e.callback=function(){Wx(A,R)}}var r=A.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Wx(A,R),typeof v!="function"&&(Jp===null?Jp=new Set([this]):Jp.add(this));var a=R.stack;this.componentDidCatch(R.value,{componentStack:a!==null?a:""})}),e}function O_(A,R,e){var v=A.pingCache;if(v===null){v=A.pingCache=new lM;var S=new Set;v.set(R,S)}else S=v.get(R),S===void 0&&(S=new Set,v.set(R,S));S.has(e)||(S.add(e),A=wM.bind(null,A,R,e),R.then(A,A))}function F_(A){do{var R;if((R=A.tag===13)&&(R=A.memoizedState,R=R!==null?R.dehydrated!==null:!0),R)return A;A=A.return}while(A!==null);return null}function N_(A,R,e,v,S){return(A.mode&1)===0?(A===R?A.flags|=65536:(A.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(R=np(-1,1),R.tag=2,Kp(e,R,1))),e.lanes|=1),A):(A.flags|=65536,A.lanes=S,A)}var uM=up.ReactCurrentOwner,Tc=!1;function ac(A,R,e,v){R.child=A===null?y5(R,null,e,v):l0(R,A.child,e,v)}function B_(A,R,e,v,S){e=e.render;var r=R.ref;return n0(R,S),v=n2(A,R,e,v,r,S),e=a2(),A!==null&&!Tc?(R.updateQueue=A.updateQueue,R.flags&=-2053,A.lanes&=~S,lp(A,R,S)):(nl&&e&&Wb(R),R.flags|=1,ac(A,R,v,S),R.child)}function U_(A,R,e,v,S){if(A===null){var r=e.type;return typeof r=="function"&&!d2(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(R.tag=15,R.type=r,V5(A,R,r,v,S)):(A=Vg(e.type,null,v,R,R.mode,S),A.ref=R.ref,A.return=R,R.child=A)}if(r=A.child,(A.lanes&S)===0){var a=r.memoizedProps;if(e=e.compare,e=e!==null?e:xm,e(a,v)&&A.ref===R.ref)return lp(A,R,S)}return R.flags|=1,A=Qp(r,v),A.ref=R.ref,A.return=R,R.child=A}function V5(A,R,e,v,S){if(A!==null){var r=A.memoizedProps;if(xm(r,v)&&A.ref===R.ref)if(Tc=!1,R.pendingProps=v=r,(A.lanes&S)!==0)(A.flags&131072)!==0&&(Tc=!0);else return R.lanes=A.lanes,lp(A,R,S)}return Yx(A,R,e,v,S)}function H5(A,R,e){var v=R.pendingProps,S=v.children,r=A!==null?A.memoizedState:null;if(v.mode==="hidden")if((R.mode&1)===0)R.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rs(Jv,jc),jc|=e;else{if((e&1073741824)===0)return A=r!==null?r.baseLanes|e:e,R.lanes=R.childLanes=1073741824,R.memoizedState={baseLanes:A,cachePool:null,transitions:null},R.updateQueue=null,Rs(Jv,jc),jc|=A,null;R.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=r!==null?r.baseLanes:e,Rs(Jv,jc),jc|=v}else r!==null?(v=r.baseLanes|e,R.memoizedState=null):v=e,Rs(Jv,jc),jc|=v;return ac(A,R,S,e),R.child}function j5(A,R){var e=R.ref;(A===null&&e!==null||A!==null&&A.ref!==e)&&(R.flags|=512,R.flags|=2097152)}function Yx(A,R,e,v,S){var r=Mc(e)?Hd:Yu.current;return r=o0(R,r),n0(R,S),e=n2(A,R,e,v,r,S),v=a2(),A!==null&&!Tc?(R.updateQueue=A.updateQueue,R.flags&=-2053,A.lanes&=~S,lp(A,R,S)):(nl&&v&&Wb(R),R.flags|=1,ac(A,R,e,S),R.child)}function V_(A,R,e,v,S){if(Mc(e)){var r=!0;n1(R)}else r=!1;if(n0(R,S),R.stateNode===null)Ng(A,R),m5(R,e,v),Gx(R,e,v,S),v=!0;else if(A===null){var a=R.stateNode,u=R.memoizedProps;a.props=u;var c=a.context,t=e.contextType;typeof t=="object"&&t!==null?t=kf(t):(t=Mc(e)?Hd:Yu.current,t=o0(R,t));var f=e.getDerivedStateFromProps,n=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";n||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==v||c!==t)&&D_(R,a,v,t),Up=!1;var o=R.memoizedState;a.state=o,l1(R,v,a,S),c=R.memoizedState,u!==v||o!==c||Ac.current||Up?(typeof f=="function"&&(jx(R,e,f,v),c=R.memoizedState),(u=Up||P_(R,e,u,v,o,c,t))?(n||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(R.flags|=4194308)):(typeof a.componentDidMount=="function"&&(R.flags|=4194308),R.memoizedProps=v,R.memoizedState=c),a.props=v,a.state=c,a.context=t,v=u):(typeof a.componentDidMount=="function"&&(R.flags|=4194308),v=!1)}else{a=R.stateNode,d5(A,R),u=R.memoizedProps,t=R.type===R.elementType?u:Qf(R.type,u),a.props=t,n=R.pendingProps,o=a.context,c=e.contextType,typeof c=="object"&&c!==null?c=kf(c):(c=Mc(e)?Hd:Yu.current,c=o0(R,c));var l=e.getDerivedStateFromProps;(f=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==n||o!==c)&&D_(R,a,v,c),Up=!1,o=R.memoizedState,a.state=o,l1(R,v,a,S);var h=R.memoizedState;u!==n||o!==h||Ac.current||Up?(typeof l=="function"&&(jx(R,e,l,v),h=R.memoizedState),(t=Up||P_(R,e,t,v,o,h,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(v,h,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(v,h,c)),typeof a.componentDidUpdate=="function"&&(R.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(R.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===A.memoizedProps&&o===A.memoizedState||(R.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===A.memoizedProps&&o===A.memoizedState||(R.flags|=1024),R.memoizedProps=v,R.memoizedState=h),a.props=v,a.state=h,a.context=c,v=t):(typeof a.componentDidUpdate!="function"||u===A.memoizedProps&&o===A.memoizedState||(R.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===A.memoizedProps&&o===A.memoizedState||(R.flags|=1024),v=!1)}return Xx(A,R,e,v,r,S)}function Xx(A,R,e,v,S,r){j5(A,R);var a=(R.flags&128)!==0;if(!v&&!a)return S&&k_(R,e,!1),lp(A,R,r);v=R.stateNode,uM.current=R;var u=a&&typeof e.getDerivedStateFromError!="function"?null:v.render();return R.flags|=1,A!==null&&a?(R.child=l0(R,A.child,null,r),R.child=l0(R,null,u,r)):ac(A,R,u,r),R.memoizedState=v.state,S&&k_(R,e,!0),R.child}function G5(A){var R=A.stateNode;R.pendingContext?M_(A,R.pendingContext,R.pendingContext!==R.context):R.context&&M_(A,R.context,!1),qb(A,R.containerInfo)}function H_(A,R,e,v,S){return s0(),Xb(S),R.flags|=256,ac(A,R,e,v),R.child}var Zx={dehydrated:null,treeContext:null,retryLane:0};function Kx(A){return{baseLanes:A,cachePool:null,transitions:null}}function W5(A,R,e){var v=R.pendingProps,S=cl.current,r=!1,a=(R.flags&128)!==0,u;if((u=a)||(u=A!==null&&A.memoizedState===null?!1:(S&2)!==0),u?(r=!0,R.flags&=-129):(A===null||A.memoizedState!==null)&&(S|=1),Rs(cl,S&1),A===null)return Vx(R),A=R.memoizedState,A!==null&&(A=A.dehydrated,A!==null)?((R.mode&1)===0?R.lanes=1:A.data==="$!"?R.lanes=8:R.lanes=1073741824,null):(a=v.children,A=v.fallback,r?(v=R.mode,r=R.child,a={mode:"hidden",children:a},(v&1)===0&&r!==null?(r.childLanes=0,r.pendingProps=a):r=R1(a,v,0,null),A=Ud(A,v,e,null),r.return=R,A.return=R,r.sibling=A,R.child=r,R.child.memoizedState=Kx(e),R.memoizedState=Zx,A):s2(R,a));if(S=A.memoizedState,S!==null&&(u=S.dehydrated,u!==null))return cM(A,R,a,v,u,S,e);if(r){r=v.fallback,a=R.mode,S=A.child,u=S.sibling;var c={mode:"hidden",children:v.children};return(a&1)===0&&R.child!==S?(v=R.child,v.childLanes=0,v.pendingProps=c,R.deletions=null):(v=Qp(S,c),v.subtreeFlags=S.subtreeFlags&14680064),u!==null?r=Qp(u,r):(r=Ud(r,a,e,null),r.flags|=2),r.return=R,v.return=R,v.sibling=r,R.child=v,v=r,r=R.child,a=A.child.memoizedState,a=a===null?Kx(e):{baseLanes:a.baseLanes|e,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=A.childLanes&~e,R.memoizedState=Zx,v}return r=A.child,A=r.sibling,v=Qp(r,{mode:"visible",children:v.children}),(R.mode&1)===0&&(v.lanes=e),v.return=R,v.sibling=null,A!==null&&(e=R.deletions,e===null?(R.deletions=[A],R.flags|=16):e.push(A)),R.child=v,R.memoizedState=null,v}function s2(A,R){return R=R1({mode:"visible",children:R},A.mode,0,null),R.return=A,A.child=R}function wg(A,R,e,v){return v!==null&&Xb(v),l0(R,A.child,null,e),A=s2(R,R.pendingProps.children),A.flags|=2,R.memoizedState=null,A}function cM(A,R,e,v,S,r,a){if(e)return R.flags&256?(R.flags&=-257,v=By(Error(Ra(422))),wg(A,R,a,v)):R.memoizedState!==null?(R.child=A.child,R.flags|=128,null):(r=v.fallback,S=R.mode,v=R1({mode:"visible",children:v.children},S,0,null),r=Ud(r,S,a,null),r.flags|=2,v.return=R,r.return=R,v.sibling=r,R.child=v,(R.mode&1)!==0&&l0(R,A.child,null,a),R.child.memoizedState=Kx(a),R.memoizedState=Zx,r);if((R.mode&1)===0)return wg(A,R,a,null);if(S.data==="$!"){if(v=S.nextSibling&&S.nextSibling.dataset,v)var u=v.dgst;return v=u,r=Error(Ra(419)),v=By(r,v,void 0),wg(A,R,a,v)}if(u=(a&A.childLanes)!==0,Tc||u){if(v=bu,v!==null){switch(a&-a){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(v.suspendedLanes|a))!==0?0:S,S!==0&&S!==r.retryLane&&(r.retryLane=S,sp(A,S),rh(v,A,S,-1))}return p2(),v=By(Error(Ra(421))),wg(A,R,a,v)}return S.data==="$?"?(R.flags|=128,R.child=A.child,R=TM.bind(null,A),S._reactRetry=R,null):(A=r.treeContext,Wc=Zp(S.nextSibling),Yc=R,nl=!0,eh=null,A!==null&&(_f[wf++]=tp,_f[wf++]=rp,_f[wf++]=jd,tp=A.id,rp=A.overflow,jd=R),R=s2(R,v.children),R.flags|=4096,R)}function j_(A,R,e){A.lanes|=R;var v=A.alternate;v!==null&&(v.lanes|=R),Hx(A.return,R,e)}function Uy(A,R,e,v,S){var r=A.memoizedState;r===null?A.memoizedState={isBackwards:R,rendering:null,renderingStartTime:0,last:v,tail:e,tailMode:S}:(r.isBackwards=R,r.rendering=null,r.renderingStartTime=0,r.last=v,r.tail=e,r.tailMode=S)}function Y5(A,R,e){var v=R.pendingProps,S=v.revealOrder,r=v.tail;if(ac(A,R,v.children,e),v=cl.current,(v&2)!==0)v=v&1|2,R.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=R.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&j_(A,e,R);else if(A.tag===19)j_(A,e,R);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===R)break e;for(;A.sibling===null;){if(A.return===null||A.return===R)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}v&=1}if(Rs(cl,v),(R.mode&1)===0)R.memoizedState=null;else switch(S){case"forwards":for(e=R.child,S=null;e!==null;)A=e.alternate,A!==null&&u1(A)===null&&(S=e),e=e.sibling;e=S,e===null?(S=R.child,R.child=null):(S=e.sibling,e.sibling=null),Uy(R,!1,S,e,r);break;case"backwards":for(e=null,S=R.child,R.child=null;S!==null;){if(A=S.alternate,A!==null&&u1(A)===null){R.child=S;break}A=S.sibling,S.sibling=e,e=S,S=A}Uy(R,!0,e,null,r);break;case"together":Uy(R,!1,null,null,void 0);break;default:R.memoizedState=null}return R.child}function Ng(A,R){(R.mode&1)===0&&A!==null&&(A.alternate=null,R.alternate=null,R.flags|=2)}function lp(A,R,e){if(A!==null&&(R.dependencies=A.dependencies),Wd|=R.lanes,(e&R.childLanes)===0)return null;if(A!==null&&R.child!==A.child)throw Error(Ra(153));if(R.child!==null){for(A=R.child,e=Qp(A,A.pendingProps),R.child=e,e.return=R;A.sibling!==null;)A=A.sibling,e=e.sibling=Qp(A,A.pendingProps),e.return=R;e.sibling=null}return R.child}function fM(A,R,e){switch(R.tag){case 3:G5(R),s0();break;case 5:x5(R);break;case 1:Mc(R.type)&&n1(R);break;case 4:qb(R,R.stateNode.containerInfo);break;case 10:var v=R.type._context,S=R.memoizedProps.value;Rs(o1,v._currentValue),v._currentValue=S;break;case 13:if(v=R.memoizedState,v!==null)return v.dehydrated!==null?(Rs(cl,cl.current&1),R.flags|=128,null):(e&R.child.childLanes)!==0?W5(A,R,e):(Rs(cl,cl.current&1),A=lp(A,R,e),A!==null?A.sibling:null);Rs(cl,cl.current&1);break;case 19:if(v=(e&R.childLanes)!==0,(A.flags&128)!==0){if(v)return Y5(A,R,e);R.flags|=128}if(S=R.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Rs(cl,cl.current),v)break;return null;case 22:case 23:return R.lanes=0,H5(A,R,e)}return lp(A,R,e)}var X5,Jx,Z5,K5;X5=function(A,R){for(var e=R.child;e!==null;){if(e.tag===5||e.tag===6)A.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===R)break;for(;e.sibling===null;){if(e.return===null||e.return===R)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};Jx=function(){};Z5=function(A,R,e,v){var S=A.memoizedProps;if(S!==v){A=R.stateNode,Fd(Ch.current);var r=null;switch(e){case"input":S=yx(A,S),v=yx(A,v),r=[];break;case"select":S=hl({},S,{value:void 0}),v=hl({},v,{value:void 0}),r=[];break;case"textarea":S=_x(A,S),v=_x(A,v),r=[];break;default:typeof S.onClick!="function"&&typeof v.onClick=="function"&&(A.onclick=t1)}Tx(e,v);var a;e=null;for(t in S)if(!v.hasOwnProperty(t)&&S.hasOwnProperty(t)&&S[t]!=null)if(t==="style"){var u=S[t];for(a in u)u.hasOwnProperty(a)&&(e||(e={}),e[a]="")}else t!=="dangerouslySetInnerHTML"&&t!=="children"&&t!=="suppressContentEditableWarning"&&t!=="suppressHydrationWarning"&&t!=="autoFocus"&&(hm.hasOwnProperty(t)?r||(r=[]):(r=r||[]).push(t,null));for(t in v){var c=v[t];if(u=S!=null?S[t]:void 0,v.hasOwnProperty(t)&&c!==u&&(c!=null||u!=null))if(t==="style")if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(e||(e={}),e[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(e||(e={}),e[a]=c[a])}else e||(r||(r=[]),r.push(t,e)),e=c;else t==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(r=r||[]).push(t,c)):t==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(t,""+c):t!=="suppressContentEditableWarning"&&t!=="suppressHydrationWarning"&&(hm.hasOwnProperty(t)?(c!=null&&t==="onScroll"&&Vs("scroll",A),r||u===c||(r=[])):(r=r||[]).push(t,c))}e&&(r=r||[]).push("style",e);var t=r;(R.updateQueue=t)&&(R.flags|=4)}};K5=function(A,R,e,v){e!==v&&(R.flags|=4)};function G0(A,R){if(!nl)switch(A.tailMode){case"hidden":R=A.tail;for(var e=null;R!==null;)R.alternate!==null&&(e=R),R=R.sibling;e===null?A.tail=null:e.sibling=null;break;case"collapsed":e=A.tail;for(var v=null;e!==null;)e.alternate!==null&&(v=e),e=e.sibling;v===null?R||A.tail===null?A.tail=null:A.tail.sibling=null:v.sibling=null}}function Gu(A){var R=A.alternate!==null&&A.alternate.child===A.child,e=0,v=0;if(R)for(var S=A.child;S!==null;)e|=S.lanes|S.childLanes,v|=S.subtreeFlags&14680064,v|=S.flags&14680064,S.return=A,S=S.sibling;else for(S=A.child;S!==null;)e|=S.lanes|S.childLanes,v|=S.subtreeFlags,v|=S.flags,S.return=A,S=S.sibling;return A.subtreeFlags|=v,A.childLanes=e,R}function hM(A,R,e){var v=R.pendingProps;switch(Yb(R),R.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gu(R),null;case 1:return Mc(R.type)&&r1(),Gu(R),null;case 3:return v=R.stateNode,u0(),js(Ac),js(Yu),t2(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(A===null||A.child===null)&&(bg(R)?R.flags|=4:A===null||A.memoizedState.isDehydrated&&(R.flags&256)===0||(R.flags|=1024,eh!==null&&(ab(eh),eh=null))),Jx(A,R),Gu(R),null;case 5:e2(R);var S=Fd(Am.current);if(e=R.type,A!==null&&R.stateNode!=null)Z5(A,R,e,v,S),A.ref!==R.ref&&(R.flags|=512,R.flags|=2097152);else{if(!v){if(R.stateNode===null)throw Error(Ra(166));return Gu(R),null}if(A=Fd(Ch.current),bg(R)){v=R.stateNode,e=R.type;var r=R.memoizedProps;switch(v[Ah]=R,v[wm]=r,A=(R.mode&1)!==0,e){case"dialog":Vs("cancel",v),Vs("close",v);break;case"iframe":case"object":case"embed":Vs("load",v);break;case"video":case"audio":for(S=0;S<$0.length;S++)Vs($0[S],v);break;case"source":Vs("error",v);break;case"img":case"image":case"link":Vs("error",v),Vs("load",v);break;case"details":Vs("toggle",v);break;case"input":Q2(v,r),Vs("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!r.multiple},Vs("invalid",v);break;case"textarea":e_(v,r),Vs("invalid",v)}Tx(e,r),S=null;for(var a in r)if(r.hasOwnProperty(a)){var u=r[a];a==="children"?typeof u=="string"?v.textContent!==u&&(r.suppressHydrationWarning!==!0&&xg(v.textContent,u,A),S=["children",u]):typeof u=="number"&&v.textContent!==""+u&&(r.suppressHydrationWarning!==!0&&xg(v.textContent,u,A),S=["children",""+u]):hm.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Vs("scroll",v)}switch(e){case"input":fg(v),q2(v,r,!0);break;case"textarea":fg(v),t_(v);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(v.onclick=t1)}v=S,R.updateQueue=v,v!==null&&(R.flags|=4)}else{a=S.nodeType===9?S:S.ownerDocument,A==="http://www.w3.org/1999/xhtml"&&(A=ww(e)),A==="http://www.w3.org/1999/xhtml"?e==="script"?(A=a.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild)):typeof v.is=="string"?A=a.createElement(e,{is:v.is}):(A=a.createElement(e),e==="select"&&(a=A,v.multiple?a.multiple=!0:v.size&&(a.size=v.size))):A=a.createElementNS(A,e),A[Ah]=R,A[wm]=v,X5(A,R,!1,!1),R.stateNode=A;e:{switch(a=Ax(e,v),e){case"dialog":Vs("cancel",A),Vs("close",A),S=v;break;case"iframe":case"object":case"embed":Vs("load",A),S=v;break;case"video":case"audio":for(S=0;S<$0.length;S++)Vs($0[S],A);S=v;break;case"source":Vs("error",A),S=v;break;case"img":case"image":case"link":Vs("error",A),Vs("load",A),S=v;break;case"details":Vs("toggle",A),S=v;break;case"input":Q2(A,v),S=yx(A,v),Vs("invalid",A);break;case"option":S=v;break;case"select":A._wrapperState={wasMultiple:!!v.multiple},S=hl({},v,{value:void 0}),Vs("invalid",A);break;case"textarea":e_(A,v),S=_x(A,v),Vs("invalid",A);break;default:S=v}Tx(e,S),u=S;for(r in u)if(u.hasOwnProperty(r)){var c=u[r];r==="style"?Mw(A,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Tw(A,c)):r==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&pm(A,c):typeof c=="number"&&pm(A,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(hm.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Vs("scroll",A):c!=null&&Pb(A,r,c,a))}switch(e){case"input":fg(A),q2(A,v,!1);break;case"textarea":fg(A),t_(A);break;case"option":v.value!=null&&A.setAttribute("value",""+ed(v.value));break;case"select":A.multiple=!!v.multiple,r=v.value,r!=null?qv(A,!!v.multiple,r,!1):v.defaultValue!=null&&qv(A,!!v.multiple,v.defaultValue,!0);break;default:typeof S.onClick=="function"&&(A.onclick=t1)}switch(e){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(R.flags|=4)}R.ref!==null&&(R.flags|=512,R.flags|=2097152)}return Gu(R),null;case 6:if(A&&R.stateNode!=null)K5(A,R,A.memoizedProps,v);else{if(typeof v!="string"&&R.stateNode===null)throw Error(Ra(166));if(e=Fd(Am.current),Fd(Ch.current),bg(R)){if(v=R.stateNode,e=R.memoizedProps,v[Ah]=R,(r=v.nodeValue!==e)&&(A=Yc,A!==null))switch(A.tag){case 3:xg(v.nodeValue,e,(A.mode&1)!==0);break;case 5:A.memoizedProps.suppressHydrationWarning!==!0&&xg(v.nodeValue,e,(A.mode&1)!==0)}r&&(R.flags|=4)}else v=(e.nodeType===9?e:e.ownerDocument).createTextNode(v),v[Ah]=R,R.stateNode=v}return Gu(R),null;case 13:if(js(cl),v=R.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(nl&&Wc!==null&&(R.mode&1)!==0&&(R.flags&128)===0)h5(),s0(),R.flags|=98560,r=!1;else if(r=bg(R),v!==null&&v.dehydrated!==null){if(A===null){if(!r)throw Error(Ra(318));if(r=R.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Ra(317));r[Ah]=R}else s0(),(R.flags&128)===0&&(R.memoizedState=null),R.flags|=4;Gu(R),r=!1}else eh!==null&&(ab(eh),eh=null),r=!0;if(!r)return R.flags&65536?R:null}return(R.flags&128)!==0?(R.lanes=e,R):(v=v!==null,v!==(A!==null&&A.memoizedState!==null)&&v&&(R.child.flags|=8192,(R.mode&1)!==0&&(A===null||(cl.current&1)!==0?ou===0&&(ou=3):p2())),R.updateQueue!==null&&(R.flags|=4),Gu(R),null);case 4:return u0(),Jx(A,R),A===null&&bm(R.stateNode.containerInfo),Gu(R),null;case 10:return Jb(R.type._context),Gu(R),null;case 17:return Mc(R.type)&&r1(),Gu(R),null;case 19:if(js(cl),r=R.memoizedState,r===null)return Gu(R),null;if(v=(R.flags&128)!==0,a=r.rendering,a===null)if(v)G0(r,!1);else{if(ou!==0||A!==null&&(A.flags&128)!==0)for(A=R.child;A!==null;){if(a=u1(A),a!==null){for(R.flags|=128,G0(r,!1),v=a.updateQueue,v!==null&&(R.updateQueue=v,R.flags|=4),R.subtreeFlags=0,v=e,e=R.child;e!==null;)r=e,A=v,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=A,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,A=a.dependencies,r.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext}),e=e.sibling;return Rs(cl,cl.current&1|2),R.child}A=A.sibling}r.tail!==null&&Fl()>f0&&(R.flags|=128,v=!0,G0(r,!1),R.lanes=4194304)}else{if(!v)if(A=u1(a),A!==null){if(R.flags|=128,v=!0,e=A.updateQueue,e!==null&&(R.updateQueue=e,R.flags|=4),G0(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!nl)return Gu(R),null}else 2*Fl()-r.renderingStartTime>f0&&e!==1073741824&&(R.flags|=128,v=!0,G0(r,!1),R.lanes=4194304);r.isBackwards?(a.sibling=R.child,R.child=a):(e=r.last,e!==null?e.sibling=a:R.child=a,r.last=a)}return r.tail!==null?(R=r.tail,r.rendering=R,r.tail=R.sibling,r.renderingStartTime=Fl(),R.sibling=null,e=cl.current,Rs(cl,v?e&1|2:e&1),R):(Gu(R),null);case 22:case 23:return h2(),v=R.memoizedState!==null,A!==null&&A.memoizedState!==null!==v&&(R.flags|=8192),v&&(R.mode&1)!==0?(jc&1073741824)!==0&&(Gu(R),R.subtreeFlags&6&&(R.flags|=8192)):Gu(R),null;case 24:return null;case 25:return null}throw Error(Ra(156,R.tag))}function pM(A,R){switch(Yb(R),R.tag){case 1:return Mc(R.type)&&r1(),A=R.flags,A&65536?(R.flags=A&-65537|128,R):null;case 3:return u0(),js(Ac),js(Yu),t2(),A=R.flags,(A&65536)!==0&&(A&128)===0?(R.flags=A&-65537|128,R):null;case 5:return e2(R),null;case 13:if(js(cl),A=R.memoizedState,A!==null&&A.dehydrated!==null){if(R.alternate===null)throw Error(Ra(340));s0()}return A=R.flags,A&65536?(R.flags=A&-65537|128,R):null;case 19:return js(cl),null;case 4:return u0(),null;case 10:return Jb(R.type._context),null;case 22:case 23:return h2(),null;case 24:return null;default:return null}}var Tg=!1,Wu=!1,dM=typeof WeakSet=="function"?WeakSet:Set,di=null;function Kv(A,R){var e=A.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(v){Al(A,R,v)}else e.current=null}function $x(A,R,e){try{e()}catch(v){Al(A,R,v)}}var G_=!1;function vM(A,R){if(Ix=Qg,A=qw(),Gb(A)){if("selectionStart"in A)var e={start:A.selectionStart,end:A.selectionEnd};else e:{e=(e=A.ownerDocument)&&e.defaultView||window;var v=e.getSelection&&e.getSelection();if(v&&v.rangeCount!==0){e=v.anchorNode;var S=v.anchorOffset,r=v.focusNode;v=v.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break e}var a=0,u=-1,c=-1,t=0,f=0,n=A,o=null;t:for(;;){for(var l;n!==e||S!==0&&n.nodeType!==3||(u=a+S),n!==r||v!==0&&n.nodeType!==3||(c=a+v),n.nodeType===3&&(a+=n.nodeValue.length),(l=n.firstChild)!==null;)o=n,n=l;for(;;){if(n===A)break t;if(o===e&&++t===S&&(u=a),o===r&&++f===v&&(c=a),(l=n.nextSibling)!==null)break;n=o,o=n.parentNode}n=l}e=u===-1||c===-1?null:{start:u,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(zx={focusedElem:A,selectionRange:e},Qg=!1,di=R;di!==null;)if(R=di,A=R.child,(R.subtreeFlags&1028)!==0&&A!==null)A.return=R,di=A;else for(;di!==null;){R=di;try{var h=R.alternate;if((R.flags&1024)!==0)switch(R.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var i=h.memoizedProps,s=h.memoizedState,p=R.stateNode,d=p.getSnapshotBeforeUpdate(R.elementType===R.type?i:Qf(R.type,i),s);p.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var g=R.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ra(163))}}catch(b){Al(R,R.return,b)}if(A=R.sibling,A!==null){A.return=R.return,di=A;break}di=R.return}return h=G_,G_=!1,h}function sm(A,R,e){var v=R.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var S=v=v.next;do{if((S.tag&A)===A){var r=S.destroy;S.destroy=void 0,r!==void 0&&$x(R,e,r)}S=S.next}while(S!==v)}}function P1(A,R){if(R=R.updateQueue,R=R!==null?R.lastEffect:null,R!==null){var e=R=R.next;do{if((e.tag&A)===A){var v=e.create;e.destroy=v()}e=e.next}while(e!==R)}}function Qx(A){var R=A.ref;if(R!==null){var e=A.stateNode;switch(A.tag){case 5:A=e;break;default:A=e}typeof R=="function"?R(A):R.current=A}}function J5(A){var R=A.alternate;R!==null&&(A.alternate=null,J5(R)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(R=A.stateNode,R!==null&&(delete R[Ah],delete R[wm],delete R[Nx],delete R[$A],delete R[QA])),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}function $5(A){return A.tag===5||A.tag===3||A.tag===4}function W_(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||$5(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function qx(A,R,e){var v=A.tag;if(v===5||v===6)A=A.stateNode,R?e.nodeType===8?e.parentNode.insertBefore(A,R):e.insertBefore(A,R):(e.nodeType===8?(R=e.parentNode,R.insertBefore(A,e)):(R=e,R.appendChild(A)),e=e._reactRootContainer,e!=null||R.onclick!==null||(R.onclick=t1));else if(v!==4&&(A=A.child,A!==null))for(qx(A,R,e),A=A.sibling;A!==null;)qx(A,R,e),A=A.sibling}function eb(A,R,e){var v=A.tag;if(v===5||v===6)A=A.stateNode,R?e.insertBefore(A,R):e.appendChild(A);else if(v!==4&&(A=A.child,A!==null))for(eb(A,R,e),A=A.sibling;A!==null;)eb(A,R,e),A=A.sibling}var Du=null,qf=!1;function zp(A,R,e){for(e=e.child;e!==null;)Q5(A,R,e),e=e.sibling}function Q5(A,R,e){if(Eh&&typeof Eh.onCommitFiberUnmount=="function")try{Eh.onCommitFiberUnmount(T1,e)}catch{}switch(e.tag){case 5:Wu||Kv(e,R);case 6:var v=Du,S=qf;Du=null,zp(A,R,e),Du=v,qf=S,Du!==null&&(qf?(A=Du,e=e.stateNode,A.nodeType===8?A.parentNode.removeChild(e):A.removeChild(e)):Du.removeChild(e.stateNode));break;case 18:Du!==null&&(qf?(A=Du,e=e.stateNode,A.nodeType===8?Ry(A.parentNode,e):A.nodeType===1&&Ry(A,e),gm(A)):Ry(Du,e.stateNode));break;case 4:v=Du,S=qf,Du=e.stateNode.containerInfo,qf=!0,zp(A,R,e),Du=v,qf=S;break;case 0:case 11:case 14:case 15:if(!Wu&&(v=e.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){S=v=v.next;do{var r=S,a=r.destroy;r=r.tag,a!==void 0&&((r&2)!==0||(r&4)!==0)&&$x(e,R,a),S=S.next}while(S!==v)}zp(A,R,e);break;case 1:if(!Wu&&(Kv(e,R),v=e.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(u){Al(e,R,u)}zp(A,R,e);break;case 21:zp(A,R,e);break;case 22:e.mode&1?(Wu=(v=Wu)||e.memoizedState!==null,zp(A,R,e),Wu=v):zp(A,R,e);break;default:zp(A,R,e)}}function Y_(A){var R=A.updateQueue;if(R!==null){A.updateQueue=null;var e=A.stateNode;e===null&&(e=A.stateNode=new dM),R.forEach(function(v){var S=AM.bind(null,A,v);e.has(v)||(e.add(v),v.then(S,S))})}}function Jf(A,R){var e=R.deletions;if(e!==null)for(var v=0;v<e.length;v++){var S=e[v];try{var r=A,a=R,u=a;e:for(;u!==null;){switch(u.tag){case 5:Du=u.stateNode,qf=!1;break e;case 3:Du=u.stateNode.containerInfo,qf=!0;break e;case 4:Du=u.stateNode.containerInfo,qf=!0;break e}u=u.return}if(Du===null)throw Error(Ra(160));Q5(r,a,S),Du=null,qf=!1;var c=S.alternate;c!==null&&(c.return=null),S.return=null}catch(t){Al(S,R,t)}}if(R.subtreeFlags&12854)for(R=R.child;R!==null;)q5(R,A),R=R.sibling}function q5(A,R){var e=A.alternate,v=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:if(Jf(R,A),wh(A),v&4){try{sm(3,A,A.return),P1(3,A)}catch(i){Al(A,A.return,i)}try{sm(5,A,A.return)}catch(i){Al(A,A.return,i)}}break;case 1:Jf(R,A),wh(A),v&512&&e!==null&&Kv(e,e.return);break;case 5:if(Jf(R,A),wh(A),v&512&&e!==null&&Kv(e,e.return),A.flags&32){var S=A.stateNode;try{pm(S,"")}catch(i){Al(A,A.return,i)}}if(v&4&&(S=A.stateNode,S!=null)){var r=A.memoizedProps,a=e!==null?e.memoizedProps:r,u=A.type,c=A.updateQueue;if(A.updateQueue=null,c!==null)try{u==="input"&&r.type==="radio"&&r.name!=null&&bw(S,r),Ax(u,a);var t=Ax(u,r);for(a=0;a<c.length;a+=2){var f=c[a],n=c[a+1];f==="style"?Mw(S,n):f==="dangerouslySetInnerHTML"?Tw(S,n):f==="children"?pm(S,n):Pb(S,f,n,t)}switch(u){case"input":xx(S,r);break;case"textarea":_w(S,r);break;case"select":var o=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!r.multiple;var l=r.value;l!=null?qv(S,!!r.multiple,l,!1):o!==!!r.multiple&&(r.defaultValue!=null?qv(S,!!r.multiple,r.defaultValue,!0):qv(S,!!r.multiple,r.multiple?[]:"",!1))}S[wm]=r}catch(i){Al(A,A.return,i)}}break;case 6:if(Jf(R,A),wh(A),v&4){if(A.stateNode===null)throw Error(Ra(162));S=A.stateNode,r=A.memoizedProps;try{S.nodeValue=r}catch(i){Al(A,A.return,i)}}break;case 3:if(Jf(R,A),wh(A),v&4&&e!==null&&e.memoizedState.isDehydrated)try{gm(R.containerInfo)}catch(i){Al(A,A.return,i)}break;case 4:Jf(R,A),wh(A);break;case 13:Jf(R,A),wh(A),S=A.child,S.flags&8192&&(r=S.memoizedState!==null,S.stateNode.isHidden=r,!r||S.alternate!==null&&S.alternate.memoizedState!==null||(c2=Fl())),v&4&&Y_(A);break;case 22:if(f=e!==null&&e.memoizedState!==null,A.mode&1?(Wu=(t=Wu)||f,Jf(R,A),Wu=t):Jf(R,A),wh(A),v&8192){if(t=A.memoizedState!==null,(A.stateNode.isHidden=t)&&!f&&(A.mode&1)!==0)for(di=A,f=A.child;f!==null;){for(n=di=f;di!==null;){switch(o=di,l=o.child,o.tag){case 0:case 11:case 14:case 15:sm(4,o,o.return);break;case 1:Kv(o,o.return);var h=o.stateNode;if(typeof h.componentWillUnmount=="function"){v=o,e=o.return;try{R=v,h.props=R.memoizedProps,h.state=R.memoizedState,h.componentWillUnmount()}catch(i){Al(v,e,i)}}break;case 5:Kv(o,o.return);break;case 22:if(o.memoizedState!==null){Z_(n);continue}}l!==null?(l.return=o,di=l):Z_(n)}f=f.sibling}e:for(f=null,n=A;;){if(n.tag===5){if(f===null){f=n;try{S=n.stateNode,t?(r=S.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(u=n.stateNode,c=n.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Aw("display",a))}catch(i){Al(A,A.return,i)}}}else if(n.tag===6){if(f===null)try{n.stateNode.nodeValue=t?"":n.memoizedProps}catch(i){Al(A,A.return,i)}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===A)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===A)break e;for(;n.sibling===null;){if(n.return===null||n.return===A)break e;f===n&&(f=null),n=n.return}f===n&&(f=null),n.sibling.return=n.return,n=n.sibling}}break;case 19:Jf(R,A),wh(A),v&4&&Y_(A);break;case 21:break;default:Jf(R,A),wh(A)}}function wh(A){var R=A.flags;if(R&2){try{e:{for(var e=A.return;e!==null;){if($5(e)){var v=e;break e}e=e.return}throw Error(Ra(160))}switch(v.tag){case 5:var S=v.stateNode;v.flags&32&&(pm(S,""),v.flags&=-33);var r=W_(A);eb(A,r,S);break;case 3:case 4:var a=v.stateNode.containerInfo,u=W_(A);qx(A,u,a);break;default:throw Error(Ra(161))}}catch(c){Al(A,A.return,c)}A.flags&=-3}R&4096&&(A.flags&=-4097)}function mM(A,R,e){di=A,e4(A)}function e4(A,R,e){for(var v=(A.mode&1)!==0;di!==null;){var S=di,r=S.child;if(S.tag===22&&v){var a=S.memoizedState!==null||Tg;if(!a){var u=S.alternate,c=u!==null&&u.memoizedState!==null||Wu;u=Tg;var t=Wu;if(Tg=a,(Wu=c)&&!t)for(di=S;di!==null;)a=di,c=a.child,a.tag===22&&a.memoizedState!==null?K_(S):c!==null?(c.return=a,di=c):K_(S);for(;r!==null;)di=r,e4(r),r=r.sibling;di=S,Tg=u,Wu=t}X_(A)}else(S.subtreeFlags&8772)!==0&&r!==null?(r.return=S,di=r):X_(A)}}function X_(A){for(;di!==null;){var R=di;if((R.flags&8772)!==0){var e=R.alternate;try{if((R.flags&8772)!==0)switch(R.tag){case 0:case 11:case 15:Wu||P1(5,R);break;case 1:var v=R.stateNode;if(R.flags&4&&!Wu)if(e===null)v.componentDidMount();else{var S=R.elementType===R.type?e.memoizedProps:Qf(R.type,e.memoizedProps);v.componentDidUpdate(S,e.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var r=R.updateQueue;r!==null&&L_(R,r,v);break;case 3:var a=R.updateQueue;if(a!==null){if(e=null,R.child!==null)switch(R.child.tag){case 5:e=R.child.stateNode;break;case 1:e=R.child.stateNode}L_(R,a,e)}break;case 5:var u=R.stateNode;if(e===null&&R.flags&4){e=u;var c=R.memoizedProps;switch(R.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&e.focus();break;case"img":c.src&&(e.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(R.memoizedState===null){var t=R.alternate;if(t!==null){var f=t.memoizedState;if(f!==null){var n=f.dehydrated;n!==null&&gm(n)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ra(163))}Wu||R.flags&512&&Qx(R)}catch(o){Al(R,R.return,o)}}if(R===A){di=null;break}if(e=R.sibling,e!==null){e.return=R.return,di=e;break}di=R.return}}function Z_(A){for(;di!==null;){var R=di;if(R===A){di=null;break}var e=R.sibling;if(e!==null){e.return=R.return,di=e;break}di=R.return}}function K_(A){for(;di!==null;){var R=di;try{switch(R.tag){case 0:case 11:case 15:var e=R.return;try{P1(4,R)}catch(c){Al(R,e,c)}break;case 1:var v=R.stateNode;if(typeof v.componentDidMount=="function"){var S=R.return;try{v.componentDidMount()}catch(c){Al(R,S,c)}}var r=R.return;try{Qx(R)}catch(c){Al(R,r,c)}break;case 5:var a=R.return;try{Qx(R)}catch(c){Al(R,a,c)}}}catch(c){Al(R,R.return,c)}if(R===A){di=null;break}var u=R.sibling;if(u!==null){u.return=R.return,di=u;break}di=R.return}}var gM=Math.ceil,h1=up.ReactCurrentDispatcher,l2=up.ReactCurrentOwner,Mf=up.ReactCurrentBatchConfig,Wo=0,bu=null,Yl=null,Ru=0,jc=0,Jv=ad(0),ou=0,Em=null,Wd=0,D1=0,u2=0,lm=null,wc=null,c2=0,f0=1/0,Qh=null,p1=!1,tb=null,Jp=null,Ag=!1,Gp=null,d1=0,um=0,rb=null,Bg=-1,Ug=0;function ic(){return(Wo&6)!==0?Fl():Bg!==-1?Bg:Bg=Fl()}function $p(A){return(A.mode&1)===0?1:(Wo&2)!==0&&Ru!==0?Ru&-Ru:eM.transition!==null?(Ug===0&&(Ug=Fw()),Ug):(A=fs,A!==0||(A=window.event,A=A===void 0?16:Gw(A.type)),A)}function rh(A,R,e,v){if(50<um)throw um=0,rb=null,Error(Ra(185));Dm(A,e,v),((Wo&2)===0||A!==bu)&&(A===bu&&((Wo&2)===0&&(D1|=e),ou===4&&Hp(A,Ru)),kc(A,v),e===1&&Wo===0&&(R.mode&1)===0&&(f0=Fl()+500,E1&&id()))}function kc(A,R){var e=A.callbackNode;eA(A,R);var v=$g(A,A===bu?Ru:0);if(v===0)e!==null&&a_(e),A.callbackNode=null,A.callbackPriority=0;else if(R=v&-v,A.callbackPriority!==R){if(e!=null&&a_(e),R===1)A.tag===0?qA(J_.bind(null,A)):u5(J_.bind(null,A)),KA(function(){(Wo&6)===0&&id()}),e=null;else{switch(Nw(v)){case 1:e=Ob;break;case 4:e=zw;break;case 16:e=Jg;break;case 536870912:e=Ow;break;default:e=Jg}e=l4(e,t4.bind(null,A))}A.callbackPriority=R,A.callbackNode=e}}function t4(A,R){if(Bg=-1,Ug=0,(Wo&6)!==0)throw Error(Ra(327));var e=A.callbackNode;if(a0()&&A.callbackNode!==e)return null;var v=$g(A,A===bu?Ru:0);if(v===0)return null;if((v&30)!==0||(v&A.expiredLanes)!==0||R)R=v1(A,v);else{R=v;var S=Wo;Wo|=2;var r=n4();(bu!==A||Ru!==R)&&(Qh=null,f0=Fl()+500,Bd(A,R));do try{bM();break}catch(u){r4(A,u)}while(1);Kb(),h1.current=r,Wo=S,Yl!==null?R=0:(bu=null,Ru=0,R=ou)}if(R!==0){if(R===2&&(S=Cx(A),S!==0&&(v=S,R=nb(A,S))),R===1)throw e=Em,Bd(A,0),Hp(A,v),kc(A,Fl()),e;if(R===6)Hp(A,v);else{if(S=A.current.alternate,(v&30)===0&&!yM(S)&&(R=v1(A,v),R===2&&(r=Cx(A),r!==0&&(v=r,R=nb(A,r))),R===1))throw e=Em,Bd(A,0),Hp(A,v),kc(A,Fl()),e;switch(A.finishedWork=S,A.finishedLanes=v,R){case 0:case 1:throw Error(Ra(345));case 2:Rd(A,wc,Qh);break;case 3:if(Hp(A,v),(v&130023424)===v&&(R=c2+500-Fl(),10<R)){if($g(A,0)!==0)break;if(S=A.suspendedLanes,(S&v)!==v){ic(),A.pingedLanes|=A.suspendedLanes&S;break}A.timeoutHandle=Fx(Rd.bind(null,A,wc,Qh),R);break}Rd(A,wc,Qh);break;case 4:if(Hp(A,v),(v&4194240)===v)break;for(R=A.eventTimes,S=-1;0<v;){var a=31-th(v);r=1<<a,a=R[a],a>S&&(S=a),v&=~r}if(v=S,v=Fl()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*gM(v/1960))-v,10<v){A.timeoutHandle=Fx(Rd.bind(null,A,wc,Qh),v);break}Rd(A,wc,Qh);break;case 5:Rd(A,wc,Qh);break;default:throw Error(Ra(329))}}}return kc(A,Fl()),A.callbackNode===e?t4.bind(null,A):null}function nb(A,R){var e=lm;return A.current.memoizedState.isDehydrated&&(Bd(A,R).flags|=256),A=v1(A,R),A!==2&&(R=wc,wc=e,R!==null&&ab(R)),A}function ab(A){wc===null?wc=A:wc.push.apply(wc,A)}function yM(A){for(var R=A;;){if(R.flags&16384){var e=R.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var v=0;v<e.length;v++){var S=e[v],r=S.getSnapshot;S=S.value;try{if(!nh(r(),S))return!1}catch{return!1}}}if(e=R.child,R.subtreeFlags&16384&&e!==null)e.return=R,R=e;else{if(R===A)break;for(;R.sibling===null;){if(R.return===null||R.return===A)return!0;R=R.return}R.sibling.return=R.return,R=R.sibling}}return!0}function Hp(A,R){for(R&=~u2,R&=~D1,A.suspendedLanes|=R,A.pingedLanes&=~R,A=A.expirationTimes;0<R;){var e=31-th(R),v=1<<e;A[e]=-1,R&=~v}}function J_(A){if((Wo&6)!==0)throw Error(Ra(327));a0();var R=$g(A,0);if((R&1)===0)return kc(A,Fl()),null;var e=v1(A,R);if(A.tag!==0&&e===2){var v=Cx(A);v!==0&&(R=v,e=nb(A,v))}if(e===1)throw e=Em,Bd(A,0),Hp(A,R),kc(A,Fl()),e;if(e===6)throw Error(Ra(345));return A.finishedWork=A.current.alternate,A.finishedLanes=R,Rd(A,wc,Qh),kc(A,Fl()),null}function f2(A,R){var e=Wo;Wo|=1;try{return A(R)}finally{Wo=e,Wo===0&&(f0=Fl()+500,E1&&id())}}function Yd(A){Gp!==null&&Gp.tag===0&&(Wo&6)===0&&a0();var R=Wo;Wo|=1;var e=Mf.transition,v=fs;try{if(Mf.transition=null,fs=1,A)return A()}finally{fs=v,Mf.transition=e,Wo=R,(Wo&6)===0&&id()}}function h2(){jc=Jv.current,js(Jv)}function Bd(A,R){A.finishedWork=null,A.finishedLanes=0;var e=A.timeoutHandle;if(e!==-1&&(A.timeoutHandle=-1,ZA(e)),Yl!==null)for(e=Yl.return;e!==null;){var v=e;switch(Yb(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&r1();break;case 3:u0(),js(Ac),js(Yu),t2();break;case 5:e2(v);break;case 4:u0();break;case 13:js(cl);break;case 19:js(cl);break;case 10:Jb(v.type._context);break;case 22:case 23:h2()}e=e.return}if(bu=A,Yl=A=Qp(A.current,null),Ru=jc=R,ou=0,Em=null,u2=D1=Wd=0,wc=lm=null,Od!==null){for(R=0;R<Od.length;R++)if(e=Od[R],v=e.interleaved,v!==null){e.interleaved=null;var S=v.next,r=e.pending;if(r!==null){var a=r.next;r.next=S,v.next=a}e.pending=v}Od=null}return A}function r4(A,R){do{var e=Yl;try{if(Kb(),Og.current=f1,c1){for(var v=fl.memoizedState;v!==null;){var S=v.queue;S!==null&&(S.pending=null),v=v.next}c1=!1}if(Gd=0,xu=au=fl=null,om=!1,Mm=0,l2.current=null,e===null||e.return===null){ou=1,Em=R,Yl=null;break}e:{var r=A,a=e.return,u=e,c=R;if(R=Ru,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var t=c,f=u,n=f.tag;if((f.mode&1)===0&&(n===0||n===11||n===15)){var o=f.alternate;o?(f.updateQueue=o.updateQueue,f.memoizedState=o.memoizedState,f.lanes=o.lanes):(f.updateQueue=null,f.memoizedState=null)}var l=F_(a);if(l!==null){l.flags&=-257,N_(l,a,u,r,R),l.mode&1&&O_(r,t,R),R=l,c=t;var h=R.updateQueue;if(h===null){var i=new Set;i.add(c),R.updateQueue=i}else h.add(c);break e}else{if((R&1)===0){O_(r,t,R),p2();break e}c=Error(Ra(426))}}else if(nl&&u.mode&1){var s=F_(a);if(s!==null){(s.flags&65536)===0&&(s.flags|=256),N_(s,a,u,r,R),Xb(c0(c,u));break e}}r=c=c0(c,u),ou!==4&&(ou=2),lm===null?lm=[r]:lm.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,R&=-R,r.lanes|=R;var p=B5(r,c,R);C_(r,p);break e;case 1:u=c;var d=r.type,g=r.stateNode;if((r.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Jp===null||!Jp.has(g)))){r.flags|=65536,R&=-R,r.lanes|=R;var b=U5(r,u,R);C_(r,b);break e}}r=r.return}while(r!==null)}i4(e)}catch(m){R=m,Yl===e&&e!==null&&(Yl=e=e.return);continue}break}while(1)}function n4(){var A=h1.current;return h1.current=f1,A===null?f1:A}function p2(){(ou===0||ou===3||ou===2)&&(ou=4),bu===null||(Wd&268435455)===0&&(D1&268435455)===0||Hp(bu,Ru)}function v1(A,R){var e=Wo;Wo|=2;var v=n4();(bu!==A||Ru!==R)&&(Qh=null,Bd(A,R));do try{xM();break}catch(S){r4(A,S)}while(1);if(Kb(),Wo=e,h1.current=v,Yl!==null)throw Error(Ra(261));return bu=null,Ru=0,ou}function xM(){for(;Yl!==null;)a4(Yl)}function bM(){for(;Yl!==null&&!W6();)a4(Yl)}function a4(A){var R=s4(A.alternate,A,jc);A.memoizedProps=A.pendingProps,R===null?i4(A):Yl=R,l2.current=null}function i4(A){var R=A;do{var e=R.alternate;if(A=R.return,(R.flags&32768)===0){if(e=hM(e,R,jc),e!==null){Yl=e;return}}else{if(e=pM(e,R),e!==null){e.flags&=32767,Yl=e;return}if(A!==null)A.flags|=32768,A.subtreeFlags=0,A.deletions=null;else{ou=6,Yl=null;return}}if(R=R.sibling,R!==null){Yl=R;return}Yl=R=A}while(R!==null);ou===0&&(ou=5)}function Rd(A,R,e){var v=fs,S=Mf.transition;try{Mf.transition=null,fs=1,_M(A,R,e,v)}finally{Mf.transition=S,fs=v}return null}function _M(A,R,e,v){do a0();while(Gp!==null);if((Wo&6)!==0)throw Error(Ra(327));e=A.finishedWork;var S=A.finishedLanes;if(e===null)return null;if(A.finishedWork=null,A.finishedLanes=0,e===A.current)throw Error(Ra(177));A.callbackNode=null,A.callbackPriority=0;var r=e.lanes|e.childLanes;if(tA(A,r),A===bu&&(Yl=bu=null,Ru=0),(e.subtreeFlags&2064)===0&&(e.flags&2064)===0||Ag||(Ag=!0,l4(Jg,function(){return a0(),null})),r=(e.flags&15990)!==0,(e.subtreeFlags&15990)!==0||r){r=Mf.transition,Mf.transition=null;var a=fs;fs=1;var u=Wo;Wo|=4,l2.current=null,vM(A,e),q5(e,A),VA(zx),Qg=!!Ix,zx=Ix=null,A.current=e,mM(e),Y6(),Wo=u,fs=a,Mf.transition=r}else A.current=e;if(Ag&&(Ag=!1,Gp=A,d1=S),r=A.pendingLanes,r===0&&(Jp=null),K6(e.stateNode),kc(A,Fl()),R!==null)for(v=A.onRecoverableError,e=0;e<R.length;e++)S=R[e],v(S.value,{componentStack:S.stack,digest:S.digest});if(p1)throw p1=!1,A=tb,tb=null,A;return(d1&1)!==0&&A.tag!==0&&a0(),r=A.pendingLanes,(r&1)!==0?A===rb?um++:(um=0,rb=A):um=0,id(),null}function a0(){if(Gp!==null){var A=Nw(d1),R=Mf.transition,e=fs;try{if(Mf.transition=null,fs=16>A?16:A,Gp===null)var v=!1;else{if(A=Gp,Gp=null,d1=0,(Wo&6)!==0)throw Error(Ra(331));var S=Wo;for(Wo|=4,di=A.current;di!==null;){var r=di,a=r.child;if((di.flags&16)!==0){var u=r.deletions;if(u!==null){for(var c=0;c<u.length;c++){var t=u[c];for(di=t;di!==null;){var f=di;switch(f.tag){case 0:case 11:case 15:sm(8,f,r)}var n=f.child;if(n!==null)n.return=f,di=n;else for(;di!==null;){f=di;var o=f.sibling,l=f.return;if(J5(f),f===t){di=null;break}if(o!==null){o.return=l,di=o;break}di=l}}}var h=r.alternate;if(h!==null){var i=h.child;if(i!==null){h.child=null;do{var s=i.sibling;i.sibling=null,i=s}while(i!==null)}}di=r}}if((r.subtreeFlags&2064)!==0&&a!==null)a.return=r,di=a;else e:for(;di!==null;){if(r=di,(r.flags&2048)!==0)switch(r.tag){case 0:case 11:case 15:sm(9,r,r.return)}var p=r.sibling;if(p!==null){p.return=r.return,di=p;break e}di=r.return}}var d=A.current;for(di=d;di!==null;){a=di;var g=a.child;if((a.subtreeFlags&2064)!==0&&g!==null)g.return=a,di=g;else e:for(a=d;di!==null;){if(u=di,(u.flags&2048)!==0)try{switch(u.tag){case 0:case 11:case 15:P1(9,u)}}catch(m){Al(u,u.return,m)}if(u===a){di=null;break e}var b=u.sibling;if(b!==null){b.return=u.return,di=b;break e}di=u.return}}if(Wo=S,id(),Eh&&typeof Eh.onPostCommitFiberRoot=="function")try{Eh.onPostCommitFiberRoot(T1,A)}catch{}v=!0}return v}finally{fs=e,Mf.transition=R}}return!1}function $_(A,R,e){R=c0(e,R),R=B5(A,R,1),A=Kp(A,R,1),R=ic(),A!==null&&(Dm(A,1,R),kc(A,R))}function Al(A,R,e){if(A.tag===3)$_(A,A,e);else for(;R!==null;){if(R.tag===3){$_(R,A,e);break}else if(R.tag===1){var v=R.stateNode;if(typeof R.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Jp===null||!Jp.has(v))){A=c0(e,A),A=U5(R,A,1),R=Kp(R,A,1),A=ic(),R!==null&&(Dm(R,1,A),kc(R,A));break}}R=R.return}}function wM(A,R,e){var v=A.pingCache;v!==null&&v.delete(R),R=ic(),A.pingedLanes|=A.suspendedLanes&e,bu===A&&(Ru&e)===e&&(ou===4||ou===3&&(Ru&130023424)===Ru&&500>Fl()-c2?Bd(A,0):u2|=e),kc(A,R)}function o4(A,R){R===0&&((A.mode&1)===0?R=1:(R=dg,dg<<=1,(dg&130023424)===0&&(dg=4194304)));var e=ic();A=sp(A,R),A!==null&&(Dm(A,R,e),kc(A,e))}function TM(A){var R=A.memoizedState,e=0;R!==null&&(e=R.retryLane),o4(A,e)}function AM(A,R){var e=0;switch(A.tag){case 13:var v=A.stateNode,S=A.memoizedState;S!==null&&(e=S.retryLane);break;case 19:v=A.stateNode;break;default:throw Error(Ra(314))}v!==null&&v.delete(R),o4(A,e)}var s4;s4=function(A,R,e){if(A!==null)if(A.memoizedProps!==R.pendingProps||Ac.current)Tc=!0;else{if((A.lanes&e)===0&&(R.flags&128)===0)return Tc=!1,fM(A,R,e);Tc=(A.flags&131072)!==0}else Tc=!1,nl&&(R.flags&1048576)!==0&&c5(R,i1,R.index);switch(R.lanes=0,R.tag){case 2:var v=R.type;Ng(A,R),A=R.pendingProps;var S=o0(R,Yu.current);n0(R,e),S=n2(null,R,v,A,S,e);var r=a2();return R.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(R.tag=1,R.memoizedState=null,R.updateQueue=null,Mc(v)?(r=!0,n1(R)):r=!1,R.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Qb(R),S.updater=C1,R.stateNode=S,S._reactInternals=R,Gx(R,v,A,e),R=Xx(null,R,v,!0,r,e)):(R.tag=0,nl&&r&&Wb(R),ac(null,R,S,e),R=R.child),R;case 16:v=R.elementType;e:{switch(Ng(A,R),A=R.pendingProps,S=v._init,v=S(v._payload),R.type=v,S=R.tag=kM(v),A=Qf(v,A),S){case 0:R=Yx(null,R,v,A,e);break e;case 1:R=V_(null,R,v,A,e);break e;case 11:R=B_(null,R,v,A,e);break e;case 14:R=U_(null,R,v,Qf(v.type,A),e);break e}throw Error(Ra(306,v,""))}return R;case 0:return v=R.type,S=R.pendingProps,S=R.elementType===v?S:Qf(v,S),Yx(A,R,v,S,e);case 1:return v=R.type,S=R.pendingProps,S=R.elementType===v?S:Qf(v,S),V_(A,R,v,S,e);case 3:e:{if(G5(R),A===null)throw Error(Ra(387));v=R.pendingProps,r=R.memoizedState,S=r.element,d5(A,R),l1(R,v,null,e);var a=R.memoizedState;if(v=a.element,r.isDehydrated)if(r={element:v,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},R.updateQueue.baseState=r,R.memoizedState=r,R.flags&256){S=c0(Error(Ra(423)),R),R=H_(A,R,v,e,S);break e}else if(v!==S){S=c0(Error(Ra(424)),R),R=H_(A,R,v,e,S);break e}else for(Wc=Zp(R.stateNode.containerInfo.firstChild),Yc=R,nl=!0,eh=null,e=y5(R,null,v,e),R.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(s0(),v===S){R=lp(A,R,e);break e}ac(A,R,v,e)}R=R.child}return R;case 5:return x5(R),A===null&&Vx(R),v=R.type,S=R.pendingProps,r=A!==null?A.memoizedProps:null,a=S.children,Ox(v,S)?a=null:r!==null&&Ox(v,r)&&(R.flags|=32),j5(A,R),ac(A,R,a,e),R.child;case 6:return A===null&&Vx(R),null;case 13:return W5(A,R,e);case 4:return qb(R,R.stateNode.containerInfo),v=R.pendingProps,A===null?R.child=l0(R,null,v,e):ac(A,R,v,e),R.child;case 11:return v=R.type,S=R.pendingProps,S=R.elementType===v?S:Qf(v,S),B_(A,R,v,S,e);case 7:return ac(A,R,R.pendingProps,e),R.child;case 8:return ac(A,R,R.pendingProps.children,e),R.child;case 12:return ac(A,R,R.pendingProps.children,e),R.child;case 10:e:{if(v=R.type._context,S=R.pendingProps,r=R.memoizedProps,a=S.value,Rs(o1,v._currentValue),v._currentValue=a,r!==null)if(nh(r.value,a)){if(r.children===S.children&&!Ac.current){R=lp(A,R,e);break e}}else for(r=R.child,r!==null&&(r.return=R);r!==null;){var u=r.dependencies;if(u!==null){a=r.child;for(var c=u.firstContext;c!==null;){if(c.context===v){if(r.tag===1){c=np(-1,e&-e),c.tag=2;var t=r.updateQueue;if(t!==null){t=t.shared;var f=t.pending;f===null?c.next=c:(c.next=f.next,f.next=c),t.pending=c}}r.lanes|=e,c=r.alternate,c!==null&&(c.lanes|=e),Hx(r.return,e,R),u.lanes|=e;break}c=c.next}}else if(r.tag===10)a=r.type===R.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(Ra(341));a.lanes|=e,u=a.alternate,u!==null&&(u.lanes|=e),Hx(a,e,R),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===R){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}ac(A,R,S.children,e),R=R.child}return R;case 9:return S=R.type,v=R.pendingProps.children,n0(R,e),S=kf(S),v=v(S),R.flags|=1,ac(A,R,v,e),R.child;case 14:return v=R.type,S=Qf(v,R.pendingProps),S=Qf(v.type,S),U_(A,R,v,S,e);case 15:return V5(A,R,R.type,R.pendingProps,e);case 17:return v=R.type,S=R.pendingProps,S=R.elementType===v?S:Qf(v,S),Ng(A,R),R.tag=1,Mc(v)?(A=!0,n1(R)):A=!1,n0(R,e),m5(R,v,S),Gx(R,v,S,e),Xx(null,R,v,!0,A,e);case 19:return Y5(A,R,e);case 22:return H5(A,R,e)}throw Error(Ra(156,R.tag))};function l4(A,R){return Iw(A,R)}function MM(A,R,e,v){this.tag=A,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=R,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tf(A,R,e,v){return new MM(A,R,e,v)}function d2(A){return A=A.prototype,!(!A||!A.isReactComponent)}function kM(A){if(typeof A=="function")return d2(A)?1:0;if(A!=null){if(A=A.$$typeof,A===Rb)return 11;if(A===Ib)return 14}return 2}function Qp(A,R){var e=A.alternate;return e===null?(e=Tf(A.tag,R,A.key,A.mode),e.elementType=A.elementType,e.type=A.type,e.stateNode=A.stateNode,e.alternate=A,A.alternate=e):(e.pendingProps=R,e.type=A.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=A.flags&14680064,e.childLanes=A.childLanes,e.lanes=A.lanes,e.child=A.child,e.memoizedProps=A.memoizedProps,e.memoizedState=A.memoizedState,e.updateQueue=A.updateQueue,R=A.dependencies,e.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext},e.sibling=A.sibling,e.index=A.index,e.ref=A.ref,e}function Vg(A,R,e,v,S,r){var a=2;if(v=A,typeof A=="function")d2(A)&&(a=1);else if(typeof A=="string")a=5;else e:switch(A){case Uv:return Ud(e.children,S,r,R);case Db:a=8,S|=8;break;case dx:return A=Tf(12,e,R,S|2),A.elementType=dx,A.lanes=r,A;case vx:return A=Tf(13,e,R,S),A.elementType=vx,A.lanes=r,A;case mx:return A=Tf(19,e,R,S),A.elementType=mx,A.lanes=r,A;case gw:return R1(e,S,r,R);default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case vw:a=10;break e;case mw:a=9;break e;case Rb:a=11;break e;case Ib:a=14;break e;case Bp:a=16,v=null;break e}throw Error(Ra(130,A==null?A:typeof A,""))}return R=Tf(a,e,R,S),R.elementType=A,R.type=v,R.lanes=r,R}function Ud(A,R,e,v){return A=Tf(7,A,v,R),A.lanes=e,A}function R1(A,R,e,v){return A=Tf(22,A,v,R),A.elementType=gw,A.lanes=e,A.stateNode={isHidden:!1},A}function Vy(A,R,e){return A=Tf(6,A,null,R),A.lanes=e,A}function Hy(A,R,e){return R=Tf(4,A.children!==null?A.children:[],A.key,R),R.lanes=e,R.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},R}function SM(A,R,e,v,S){this.tag=R,this.containerInfo=A,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wy(0),this.expirationTimes=wy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wy(0),this.identifierPrefix=v,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function v2(A,R,e,v,S,r,a,u,c){return A=new SM(A,R,e,u,c),R===1?(R=1,r===!0&&(R|=8)):R=0,r=Tf(3,null,null,R),A.current=r,r.stateNode=A,r.memoizedState={element:v,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qb(r),A}function EM(A,R,e){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bv,key:v==null?null:""+v,children:A,containerInfo:R,implementation:e}}function u4(A){if(!A)return td;A=A._reactInternals;e:{if($d(A)!==A||A.tag!==1)throw Error(Ra(170));var R=A;do{switch(R.tag){case 3:R=R.stateNode.context;break e;case 1:if(Mc(R.type)){R=R.stateNode.__reactInternalMemoizedMergedChildContext;break e}}R=R.return}while(R!==null);throw Error(Ra(171))}if(A.tag===1){var e=A.type;if(Mc(e))return l5(A,e,R)}return R}function c4(A,R,e,v,S,r,a,u,c){return A=v2(e,v,!0,A,S,r,a,u,c),A.context=u4(null),e=A.current,v=ic(),S=$p(e),r=np(v,S),r.callback=R!=null?R:null,Kp(e,r,S),A.current.lanes=S,Dm(A,S,v),kc(A,v),A}function I1(A,R,e,v){var S=R.current,r=ic(),a=$p(S);return e=u4(e),R.context===null?R.context=e:R.pendingContext=e,R=np(r,a),R.payload={element:A},v=v===void 0?null:v,v!==null&&(R.callback=v),A=Kp(S,R,a),A!==null&&(rh(A,S,a,r),zg(A,S,a)),a}function m1(A){if(A=A.current,!A.child)return null;switch(A.child.tag){case 5:return A.child.stateNode;default:return A.child.stateNode}}function Q_(A,R){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var e=A.retryLane;A.retryLane=e!==0&&e<R?e:R}}function m2(A,R){Q_(A,R),(A=A.alternate)&&Q_(A,R)}function CM(){return null}var f4=typeof reportError=="function"?reportError:function(A){console.error(A)};function g2(A){this._internalRoot=A}z1.prototype.render=g2.prototype.render=function(A){var R=this._internalRoot;if(R===null)throw Error(Ra(409));I1(A,R,null,null)};z1.prototype.unmount=g2.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var R=A.containerInfo;Yd(function(){I1(null,A,null,null)}),R[op]=null}};function z1(A){this._internalRoot=A}z1.prototype.unstable_scheduleHydration=function(A){if(A){var R=Vw();A={blockedOn:null,target:A,priority:R};for(var e=0;e<Vp.length&&R!==0&&R<Vp[e].priority;e++);Vp.splice(e,0,A),e===0&&jw(A)}};function y2(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function O1(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11&&(A.nodeType!==8||A.nodeValue!==" react-mount-point-unstable "))}function q_(){}function LM(A,R,e,v,S){if(S){if(typeof v=="function"){var r=v;v=function(){var t=m1(a);r.call(t)}}var a=c4(R,v,A,0,null,!1,!1,"",q_);return A._reactRootContainer=a,A[op]=a.current,bm(A.nodeType===8?A.parentNode:A),Yd(),a}for(;S=A.lastChild;)A.removeChild(S);if(typeof v=="function"){var u=v;v=function(){var t=m1(c);u.call(t)}}var c=v2(A,0,!1,null,null,!1,!1,"",q_);return A._reactRootContainer=c,A[op]=c.current,bm(A.nodeType===8?A.parentNode:A),Yd(function(){I1(R,c,e,v)}),c}function F1(A,R,e,v,S){var r=e._reactRootContainer;if(r){var a=r;if(typeof S=="function"){var u=S;S=function(){var c=m1(a);u.call(c)}}I1(R,a,A,S)}else a=LM(e,R,A,S,v);return m1(a)}Bw=function(A){switch(A.tag){case 3:var R=A.stateNode;if(R.current.memoizedState.isDehydrated){var e=J0(R.pendingLanes);e!==0&&(Fb(R,e|1),kc(R,Fl()),(Wo&6)===0&&(f0=Fl()+500,id()))}break;case 13:Yd(function(){var v=sp(A,1);if(v!==null){var S=ic();rh(v,A,1,S)}}),m2(A,1)}};Nb=function(A){if(A.tag===13){var R=sp(A,134217728);if(R!==null){var e=ic();rh(R,A,134217728,e)}m2(A,134217728)}};Uw=function(A){if(A.tag===13){var R=$p(A),e=sp(A,R);if(e!==null){var v=ic();rh(e,A,R,v)}m2(A,R)}};Vw=function(){return fs};Hw=function(A,R){var e=fs;try{return fs=A,R()}finally{fs=e}};kx=function(A,R,e){switch(R){case"input":if(xx(A,e),R=e.name,e.type==="radio"&&R!=null){for(e=A;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+R)+'][type="radio"]'),R=0;R<e.length;R++){var v=e[R];if(v!==A&&v.form===A.form){var S=S1(v);if(!S)throw Error(Ra(90));xw(v),xx(v,S)}}}break;case"textarea":_w(A,e);break;case"select":R=e.value,R!=null&&qv(A,!!e.multiple,R,!1)}};Ew=f2;Cw=Yd;var PM={usingClientEntryPoint:!1,Events:[Im,Gv,S1,kw,Sw,f2]},W0={findFiberByHostInstance:zd,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},DM={bundleType:W0.bundleType,version:W0.version,rendererPackageName:W0.rendererPackageName,rendererConfig:W0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:up.ReactCurrentDispatcher,findHostInstanceByFiber:function(A){return A=Dw(A),A===null?null:A.stateNode},findFiberByHostInstance:W0.findFiberByHostInstance||CM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mg.isDisabled&&Mg.supportsFiber)try{T1=Mg.inject(DM),Eh=Mg}catch{}}Zc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PM;Zc.createPortal=function(A,R){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y2(R))throw Error(Ra(200));return EM(A,R,null,e)};Zc.createRoot=function(A,R){if(!y2(A))throw Error(Ra(299));var e=!1,v="",S=f4;return R!=null&&(R.unstable_strictMode===!0&&(e=!0),R.identifierPrefix!==void 0&&(v=R.identifierPrefix),R.onRecoverableError!==void 0&&(S=R.onRecoverableError)),R=v2(A,1,!1,null,null,e,!1,v,S),A[op]=R.current,bm(A.nodeType===8?A.parentNode:A),new g2(R)};Zc.findDOMNode=function(A){if(A==null)return null;if(A.nodeType===1)return A;var R=A._reactInternals;if(R===void 0)throw typeof A.render=="function"?Error(Ra(188)):(A=Object.keys(A).join(","),Error(Ra(268,A)));return A=Dw(R),A=A===null?null:A.stateNode,A};Zc.flushSync=function(A){return Yd(A)};Zc.hydrate=function(A,R,e){if(!O1(R))throw Error(Ra(200));return F1(null,A,R,!0,e)};Zc.hydrateRoot=function(A,R,e){if(!y2(A))throw Error(Ra(405));var v=e!=null&&e.hydratedSources||null,S=!1,r="",a=f4;if(e!=null&&(e.unstable_strictMode===!0&&(S=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),R=c4(R,null,A,1,e!=null?e:null,S,!1,r,a),A[op]=R.current,bm(A),v)for(A=0;A<v.length;A++)e=v[A],S=e._getVersion,S=S(e._source),R.mutableSourceEagerHydrationData==null?R.mutableSourceEagerHydrationData=[e,S]:R.mutableSourceEagerHydrationData.push(e,S);return new z1(R)};Zc.render=function(A,R,e){if(!O1(R))throw Error(Ra(200));return F1(null,A,R,!1,e)};Zc.unmountComponentAtNode=function(A){if(!O1(A))throw Error(Ra(40));return A._reactRootContainer?(Yd(function(){F1(null,null,A,!1,function(){A._reactRootContainer=null,A[op]=null})}),!0):!1};Zc.unstable_batchedUpdates=f2;Zc.unstable_renderSubtreeIntoContainer=function(A,R,e,v){if(!O1(e))throw Error(Ra(200));if(A==null||A._reactInternals===void 0)throw Error(Ra(38));return F1(A,R,e,!1,v)};Zc.version="18.2.0-next-9e3b772b8-20220608";(function(A){function R(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R)}catch(e){console.error(e)}}R(),A.exports=Zc})(w1);var h4,e3=w1.exports;h4=e3.createRoot,e3.hydrateRoot;const RM="/assets/react.35ef61ed.svg";function p4(A,R){return function(){return A.apply(R,arguments)}}const{toString:d4}=Object.prototype,{getPrototypeOf:x2}=Object,b2=(A=>R=>{const e=d4.call(R);return A[e]||(A[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),cp=A=>(A=A.toLowerCase(),R=>b2(R)===A),N1=A=>R=>typeof R===A,{isArray:g0}=Array,Cm=N1("undefined");function IM(A){return A!==null&&!Cm(A)&&A.constructor!==null&&!Cm(A.constructor)&&Xd(A.constructor.isBuffer)&&A.constructor.isBuffer(A)}const v4=cp("ArrayBuffer");function zM(A){let R;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?R=ArrayBuffer.isView(A):R=A&&A.buffer&&v4(A.buffer),R}const OM=N1("string"),Xd=N1("function"),m4=N1("number"),_2=A=>A!==null&&typeof A=="object",FM=A=>A===!0||A===!1,Hg=A=>{if(b2(A)!=="object")return!1;const R=x2(A);return(R===null||R===Object.prototype||Object.getPrototypeOf(R)===null)&&!(Symbol.toStringTag in A)&&!(Symbol.iterator in A)},NM=cp("Date"),BM=cp("File"),UM=cp("Blob"),VM=cp("FileList"),HM=A=>_2(A)&&Xd(A.pipe),jM=A=>{const R="[object FormData]";return A&&(typeof FormData=="function"&&A instanceof FormData||d4.call(A)===R||Xd(A.toString)&&A.toString()===R)},GM=cp("URLSearchParams"),WM=A=>A.trim?A.trim():A.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Om(A,R,{allOwnKeys:e=!1}={}){if(A===null||typeof A>"u")return;let v,S;if(typeof A!="object"&&(A=[A]),g0(A))for(v=0,S=A.length;v<S;v++)R.call(null,A[v],v,A);else{const r=e?Object.getOwnPropertyNames(A):Object.keys(A),a=r.length;let u;for(v=0;v<a;v++)u=r[v],R.call(null,A[u],u,A)}}function g4(A,R){R=R.toLowerCase();const e=Object.keys(A);let v=e.length,S;for(;v-- >0;)if(S=e[v],R===S.toLowerCase())return S;return null}const y4=typeof self>"u"?typeof global>"u"?globalThis:global:self,x4=A=>!Cm(A)&&A!==y4;function ib(){const{caseless:A}=x4(this)&&this||{},R={},e=(v,S)=>{const r=A&&g4(R,S)||S;Hg(R[r])&&Hg(v)?R[r]=ib(R[r],v):Hg(v)?R[r]=ib({},v):g0(v)?R[r]=v.slice():R[r]=v};for(let v=0,S=arguments.length;v<S;v++)arguments[v]&&Om(arguments[v],e);return R}const YM=(A,R,e,{allOwnKeys:v}={})=>(Om(R,(S,r)=>{e&&Xd(S)?A[r]=p4(S,e):A[r]=S},{allOwnKeys:v}),A),XM=A=>(A.charCodeAt(0)===65279&&(A=A.slice(1)),A),ZM=(A,R,e,v)=>{A.prototype=Object.create(R.prototype,v),A.prototype.constructor=A,Object.defineProperty(A,"super",{value:R.prototype}),e&&Object.assign(A.prototype,e)},KM=(A,R,e,v)=>{let S,r,a;const u={};if(R=R||{},A==null)return R;do{for(S=Object.getOwnPropertyNames(A),r=S.length;r-- >0;)a=S[r],(!v||v(a,A,R))&&!u[a]&&(R[a]=A[a],u[a]=!0);A=e!==!1&&x2(A)}while(A&&(!e||e(A,R))&&A!==Object.prototype);return R},JM=(A,R,e)=>{A=String(A),(e===void 0||e>A.length)&&(e=A.length),e-=R.length;const v=A.indexOf(R,e);return v!==-1&&v===e},$M=A=>{if(!A)return null;if(g0(A))return A;let R=A.length;if(!m4(R))return null;const e=new Array(R);for(;R-- >0;)e[R]=A[R];return e},QM=(A=>R=>A&&R instanceof A)(typeof Uint8Array<"u"&&x2(Uint8Array)),qM=(A,R)=>{const v=(A&&A[Symbol.iterator]).call(A);let S;for(;(S=v.next())&&!S.done;){const r=S.value;R.call(A,r[0],r[1])}},ek=(A,R)=>{let e;const v=[];for(;(e=A.exec(R))!==null;)v.push(e);return v},tk=cp("HTMLFormElement"),rk=A=>A.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(e,v,S){return v.toUpperCase()+S}),t3=(({hasOwnProperty:A})=>(R,e)=>A.call(R,e))(Object.prototype),nk=cp("RegExp"),b4=(A,R)=>{const e=Object.getOwnPropertyDescriptors(A),v={};Om(e,(S,r)=>{R(S,r,A)!==!1&&(v[r]=S)}),Object.defineProperties(A,v)},ak=A=>{b4(A,(R,e)=>{if(Xd(A)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const v=A[e];if(!!Xd(v)){if(R.enumerable=!1,"writable"in R){R.writable=!1;return}R.set||(R.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},ik=(A,R)=>{const e={},v=S=>{S.forEach(r=>{e[r]=!0})};return g0(A)?v(A):v(String(A).split(R)),e},ok=()=>{},sk=(A,R)=>(A=+A,Number.isFinite(A)?A:R),lk=A=>{const R=new Array(10),e=(v,S)=>{if(_2(v)){if(R.indexOf(v)>=0)return;if(!("toJSON"in v)){R[S]=v;const r=g0(v)?[]:{};return Om(v,(a,u)=>{const c=e(a,S+1);!Cm(c)&&(r[u]=c)}),R[S]=void 0,r}}return v};return e(A,0)},fa={isArray:g0,isArrayBuffer:v4,isBuffer:IM,isFormData:jM,isArrayBufferView:zM,isString:OM,isNumber:m4,isBoolean:FM,isObject:_2,isPlainObject:Hg,isUndefined:Cm,isDate:NM,isFile:BM,isBlob:UM,isRegExp:nk,isFunction:Xd,isStream:HM,isURLSearchParams:GM,isTypedArray:QM,isFileList:VM,forEach:Om,merge:ib,extend:YM,trim:WM,stripBOM:XM,inherits:ZM,toFlatObject:KM,kindOf:b2,kindOfTest:cp,endsWith:JM,toArray:$M,forEachEntry:qM,matchAll:ek,isHTMLForm:tk,hasOwnProperty:t3,hasOwnProp:t3,reduceDescriptors:b4,freezeMethods:ak,toObjectSet:ik,toCamelCase:rk,noop:ok,toFiniteNumber:sk,findKey:g4,global:y4,isContextDefined:x4,toJSONObject:lk};function Go(A,R,e,v,S){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=A,this.name="AxiosError",R&&(this.code=R),e&&(this.config=e),v&&(this.request=v),S&&(this.response=S)}fa.inherits(Go,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fa.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const _4=Go.prototype,w4={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(A=>{w4[A]={value:A}});Object.defineProperties(Go,w4);Object.defineProperty(_4,"isAxiosError",{value:!0});Go.from=(A,R,e,v,S,r)=>{const a=Object.create(_4);return fa.toFlatObject(A,a,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),Go.call(a,A.message,R,e,v,S),a.cause=A,a.name=A.name,r&&Object.assign(a,r),a};var uk=typeof self=="object"?self.FormData:window.FormData;const ck=uk;function ob(A){return fa.isPlainObject(A)||fa.isArray(A)}function T4(A){return fa.endsWith(A,"[]")?A.slice(0,-2):A}function r3(A,R,e){return A?A.concat(R).map(function(S,r){return S=T4(S),!e&&r?"["+S+"]":S}).join(e?".":""):R}function fk(A){return fa.isArray(A)&&!A.some(ob)}const hk=fa.toFlatObject(fa,{},null,function(R){return/^is[A-Z]/.test(R)});function pk(A){return A&&fa.isFunction(A.append)&&A[Symbol.toStringTag]==="FormData"&&A[Symbol.iterator]}function B1(A,R,e){if(!fa.isObject(A))throw new TypeError("target must be an object");R=R||new(ck||FormData),e=fa.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(i,s){return!fa.isUndefined(s[i])});const v=e.metaTokens,S=e.visitor||f,r=e.dots,a=e.indexes,c=(e.Blob||typeof Blob<"u"&&Blob)&&pk(R);if(!fa.isFunction(S))throw new TypeError("visitor must be a function");function t(h){if(h===null)return"";if(fa.isDate(h))return h.toISOString();if(!c&&fa.isBlob(h))throw new Go("Blob is not supported. Use a Buffer instead.");return fa.isArrayBuffer(h)||fa.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function f(h,i,s){let p=h;if(h&&!s&&typeof h=="object"){if(fa.endsWith(i,"{}"))i=v?i:i.slice(0,-2),h=JSON.stringify(h);else if(fa.isArray(h)&&fk(h)||fa.isFileList(h)||fa.endsWith(i,"[]")&&(p=fa.toArray(h)))return i=T4(i),p.forEach(function(g,b){!(fa.isUndefined(g)||g===null)&&R.append(a===!0?r3([i],b,r):a===null?i:i+"[]",t(g))}),!1}return ob(h)?!0:(R.append(r3(s,i,r),t(h)),!1)}const n=[],o=Object.assign(hk,{defaultVisitor:f,convertValue:t,isVisitable:ob});function l(h,i){if(!fa.isUndefined(h)){if(n.indexOf(h)!==-1)throw Error("Circular reference detected in "+i.join("."));n.push(h),fa.forEach(h,function(p,d){(!(fa.isUndefined(p)||p===null)&&S.call(R,p,fa.isString(d)?d.trim():d,i,o))===!0&&l(p,i?i.concat(d):[d])}),n.pop()}}if(!fa.isObject(A))throw new TypeError("data must be an object");return l(A),R}function n3(A){const R={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(A).replace(/[!'()~]|%20|%00/g,function(v){return R[v]})}function w2(A,R){this._pairs=[],A&&B1(A,this,R)}const A4=w2.prototype;A4.append=function(R,e){this._pairs.push([R,e])};A4.toString=function(R){const e=R?function(v){return R.call(this,v,n3)}:n3;return this._pairs.map(function(S){return e(S[0])+"="+e(S[1])},"").join("&")};function dk(A){return encodeURIComponent(A).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function M4(A,R,e){if(!R)return A;const v=e&&e.encode||dk,S=e&&e.serialize;let r;if(S?r=S(R,e):r=fa.isURLSearchParams(R)?R.toString():new w2(R,e).toString(v),r){const a=A.indexOf("#");a!==-1&&(A=A.slice(0,a)),A+=(A.indexOf("?")===-1?"?":"&")+r}return A}class vk{constructor(){this.handlers=[]}use(R,e,v){return this.handlers.push({fulfilled:R,rejected:e,synchronous:v?v.synchronous:!1,runWhen:v?v.runWhen:null}),this.handlers.length-1}eject(R){this.handlers[R]&&(this.handlers[R]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(R){fa.forEach(this.handlers,function(v){v!==null&&R(v)})}}const a3=vk,k4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mk=typeof URLSearchParams<"u"?URLSearchParams:w2,gk=FormData,yk=(()=>{let A;return typeof navigator<"u"&&((A=navigator.product)==="ReactNative"||A==="NativeScript"||A==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),xk=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Mh={isBrowser:!0,classes:{URLSearchParams:mk,FormData:gk,Blob},isStandardBrowserEnv:yk,isStandardBrowserWebWorkerEnv:xk,protocols:["http","https","file","blob","url","data"]};function bk(A,R){return B1(A,new Mh.classes.URLSearchParams,Object.assign({visitor:function(e,v,S,r){return Mh.isNode&&fa.isBuffer(e)?(this.append(v,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},R))}function _k(A){return fa.matchAll(/\w+|\[(\w*)]/g,A).map(R=>R[0]==="[]"?"":R[1]||R[0])}function wk(A){const R={},e=Object.keys(A);let v;const S=e.length;let r;for(v=0;v<S;v++)r=e[v],R[r]=A[r];return R}function S4(A){function R(e,v,S,r){let a=e[r++];const u=Number.isFinite(+a),c=r>=e.length;return a=!a&&fa.isArray(S)?S.length:a,c?(fa.hasOwnProp(S,a)?S[a]=[S[a],v]:S[a]=v,!u):((!S[a]||!fa.isObject(S[a]))&&(S[a]=[]),R(e,v,S[a],r)&&fa.isArray(S[a])&&(S[a]=wk(S[a])),!u)}if(fa.isFormData(A)&&fa.isFunction(A.entries)){const e={};return fa.forEachEntry(A,(v,S)=>{R(_k(v),S,e,0)}),e}return null}const Tk={"Content-Type":void 0};function Ak(A,R,e){if(fa.isString(A))try{return(R||JSON.parse)(A),fa.trim(A)}catch(v){if(v.name!=="SyntaxError")throw v}return(e||JSON.stringify)(A)}const U1={transitional:k4,adapter:["xhr","http"],transformRequest:[function(R,e){const v=e.getContentType()||"",S=v.indexOf("application/json")>-1,r=fa.isObject(R);if(r&&fa.isHTMLForm(R)&&(R=new FormData(R)),fa.isFormData(R))return S&&S?JSON.stringify(S4(R)):R;if(fa.isArrayBuffer(R)||fa.isBuffer(R)||fa.isStream(R)||fa.isFile(R)||fa.isBlob(R))return R;if(fa.isArrayBufferView(R))return R.buffer;if(fa.isURLSearchParams(R))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),R.toString();let u;if(r){if(v.indexOf("application/x-www-form-urlencoded")>-1)return bk(R,this.formSerializer).toString();if((u=fa.isFileList(R))||v.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return B1(u?{"files[]":R}:R,c&&new c,this.formSerializer)}}return r||S?(e.setContentType("application/json",!1),Ak(R)):R}],transformResponse:[function(R){const e=this.transitional||U1.transitional,v=e&&e.forcedJSONParsing,S=this.responseType==="json";if(R&&fa.isString(R)&&(v&&!this.responseType||S)){const a=!(e&&e.silentJSONParsing)&&S;try{return JSON.parse(R)}catch(u){if(a)throw u.name==="SyntaxError"?Go.from(u,Go.ERR_BAD_RESPONSE,this,null,this.response):u}}return R}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Mh.classes.FormData,Blob:Mh.classes.Blob},validateStatus:function(R){return R>=200&&R<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};fa.forEach(["delete","get","head"],function(R){U1.headers[R]={}});fa.forEach(["post","put","patch"],function(R){U1.headers[R]=fa.merge(Tk)});const T2=U1,Mk=fa.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),kk=A=>{const R={};let e,v,S;return A&&A.split(`
`).forEach(function(a){S=a.indexOf(":"),e=a.substring(0,S).trim().toLowerCase(),v=a.substring(S+1).trim(),!(!e||R[e]&&Mk[e])&&(e==="set-cookie"?R[e]?R[e].push(v):R[e]=[v]:R[e]=R[e]?R[e]+", "+v:v)}),R},i3=Symbol("internals");function Y0(A){return A&&String(A).trim().toLowerCase()}function jg(A){return A===!1||A==null?A:fa.isArray(A)?A.map(jg):String(A)}function Sk(A){const R=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let v;for(;v=e.exec(A);)R[v[1]]=v[2];return R}function Ek(A){return/^[-_a-zA-Z]+$/.test(A.trim())}function o3(A,R,e,v){if(fa.isFunction(v))return v.call(this,R,e);if(!!fa.isString(R)){if(fa.isString(v))return R.indexOf(v)!==-1;if(fa.isRegExp(v))return v.test(R)}}function Ck(A){return A.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(R,e,v)=>e.toUpperCase()+v)}function Lk(A,R){const e=fa.toCamelCase(" "+R);["get","set","has"].forEach(v=>{Object.defineProperty(A,v+e,{value:function(S,r,a){return this[v].call(this,R,S,r,a)},configurable:!0})})}class V1{constructor(R){R&&this.set(R)}set(R,e,v){const S=this;function r(u,c,t){const f=Y0(c);if(!f)throw new Error("header name must be a non-empty string");const n=fa.findKey(S,f);(!n||S[n]===void 0||t===!0||t===void 0&&S[n]!==!1)&&(S[n||c]=jg(u))}const a=(u,c)=>fa.forEach(u,(t,f)=>r(t,f,c));return fa.isPlainObject(R)||R instanceof this.constructor?a(R,e):fa.isString(R)&&(R=R.trim())&&!Ek(R)?a(kk(R),e):R!=null&&r(e,R,v),this}get(R,e){if(R=Y0(R),R){const v=fa.findKey(this,R);if(v){const S=this[v];if(!e)return S;if(e===!0)return Sk(S);if(fa.isFunction(e))return e.call(this,S,v);if(fa.isRegExp(e))return e.exec(S);throw new TypeError("parser must be boolean|regexp|function")}}}has(R,e){if(R=Y0(R),R){const v=fa.findKey(this,R);return!!(v&&(!e||o3(this,this[v],v,e)))}return!1}delete(R,e){const v=this;let S=!1;function r(a){if(a=Y0(a),a){const u=fa.findKey(v,a);u&&(!e||o3(v,v[u],u,e))&&(delete v[u],S=!0)}}return fa.isArray(R)?R.forEach(r):r(R),S}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(R){const e=this,v={};return fa.forEach(this,(S,r)=>{const a=fa.findKey(v,r);if(a){e[a]=jg(S),delete e[r];return}const u=R?Ck(r):String(r).trim();u!==r&&delete e[r],e[u]=jg(S),v[u]=!0}),this}concat(...R){return this.constructor.concat(this,...R)}toJSON(R){const e=Object.create(null);return fa.forEach(this,(v,S)=>{v!=null&&v!==!1&&(e[S]=R&&fa.isArray(v)?v.join(", "):v)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([R,e])=>R+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(R){return R instanceof this?R:new this(R)}static concat(R,...e){const v=new this(R);return e.forEach(S=>v.set(S)),v}static accessor(R){const v=(this[i3]=this[i3]={accessors:{}}).accessors,S=this.prototype;function r(a){const u=Y0(a);v[u]||(Lk(S,a),v[u]=!0)}return fa.isArray(R)?R.forEach(r):r(R),this}}V1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);fa.freezeMethods(V1.prototype);fa.freezeMethods(V1);const ap=V1;function jy(A,R){const e=this||T2,v=R||e,S=ap.from(v.headers);let r=v.data;return fa.forEach(A,function(u){r=u.call(e,r,S.normalize(),R?R.status:void 0)}),S.normalize(),r}function E4(A){return!!(A&&A.__CANCEL__)}function Fm(A,R,e){Go.call(this,A==null?"canceled":A,Go.ERR_CANCELED,R,e),this.name="CanceledError"}fa.inherits(Fm,Go,{__CANCEL__:!0});const Pk=null;function Dk(A,R,e){const v=e.config.validateStatus;!e.status||!v||v(e.status)?A(e):R(new Go("Request failed with status code "+e.status,[Go.ERR_BAD_REQUEST,Go.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const Rk=Mh.isStandardBrowserEnv?function(){return{write:function(e,v,S,r,a,u){const c=[];c.push(e+"="+encodeURIComponent(v)),fa.isNumber(S)&&c.push("expires="+new Date(S).toGMTString()),fa.isString(r)&&c.push("path="+r),fa.isString(a)&&c.push("domain="+a),u===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){const v=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return v?decodeURIComponent(v[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Ik(A){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(A)}function zk(A,R){return R?A.replace(/\/+$/,"")+"/"+R.replace(/^\/+/,""):A}function C4(A,R){return A&&!Ik(R)?zk(A,R):R}const Ok=Mh.isStandardBrowserEnv?function(){const R=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let v;function S(r){let a=r;return R&&(e.setAttribute("href",a),a=e.href),e.setAttribute("href",a),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return v=S(window.location.href),function(a){const u=fa.isString(a)?S(a):a;return u.protocol===v.protocol&&u.host===v.host}}():function(){return function(){return!0}}();function Fk(A){const R=/^([-+\w]{1,25})(:?\/\/|:)/.exec(A);return R&&R[1]||""}function Nk(A,R){A=A||10;const e=new Array(A),v=new Array(A);let S=0,r=0,a;return R=R!==void 0?R:1e3,function(c){const t=Date.now(),f=v[r];a||(a=t),e[S]=c,v[S]=t;let n=r,o=0;for(;n!==S;)o+=e[n++],n=n%A;if(S=(S+1)%A,S===r&&(r=(r+1)%A),t-a<R)return;const l=f&&t-f;return l?Math.round(o*1e3/l):void 0}}function s3(A,R){let e=0;const v=Nk(50,250);return S=>{const r=S.loaded,a=S.lengthComputable?S.total:void 0,u=r-e,c=v(u),t=r<=a;e=r;const f={loaded:r,total:a,progress:a?r/a:void 0,bytes:u,rate:c||void 0,estimated:c&&a&&t?(a-r)/c:void 0,event:S};f[R?"download":"upload"]=!0,A(f)}}const Bk=typeof XMLHttpRequest<"u",Uk=Bk&&function(A){return new Promise(function(e,v){let S=A.data;const r=ap.from(A.headers).normalize(),a=A.responseType;let u;function c(){A.cancelToken&&A.cancelToken.unsubscribe(u),A.signal&&A.signal.removeEventListener("abort",u)}fa.isFormData(S)&&(Mh.isStandardBrowserEnv||Mh.isStandardBrowserWebWorkerEnv)&&r.setContentType(!1);let t=new XMLHttpRequest;if(A.auth){const l=A.auth.username||"",h=A.auth.password?unescape(encodeURIComponent(A.auth.password)):"";r.set("Authorization","Basic "+btoa(l+":"+h))}const f=C4(A.baseURL,A.url);t.open(A.method.toUpperCase(),M4(f,A.params,A.paramsSerializer),!0),t.timeout=A.timeout;function n(){if(!t)return;const l=ap.from("getAllResponseHeaders"in t&&t.getAllResponseHeaders()),i={data:!a||a==="text"||a==="json"?t.responseText:t.response,status:t.status,statusText:t.statusText,headers:l,config:A,request:t};Dk(function(p){e(p),c()},function(p){v(p),c()},i),t=null}if("onloadend"in t?t.onloadend=n:t.onreadystatechange=function(){!t||t.readyState!==4||t.status===0&&!(t.responseURL&&t.responseURL.indexOf("file:")===0)||setTimeout(n)},t.onabort=function(){!t||(v(new Go("Request aborted",Go.ECONNABORTED,A,t)),t=null)},t.onerror=function(){v(new Go("Network Error",Go.ERR_NETWORK,A,t)),t=null},t.ontimeout=function(){let h=A.timeout?"timeout of "+A.timeout+"ms exceeded":"timeout exceeded";const i=A.transitional||k4;A.timeoutErrorMessage&&(h=A.timeoutErrorMessage),v(new Go(h,i.clarifyTimeoutError?Go.ETIMEDOUT:Go.ECONNABORTED,A,t)),t=null},Mh.isStandardBrowserEnv){const l=(A.withCredentials||Ok(f))&&A.xsrfCookieName&&Rk.read(A.xsrfCookieName);l&&r.set(A.xsrfHeaderName,l)}S===void 0&&r.setContentType(null),"setRequestHeader"in t&&fa.forEach(r.toJSON(),function(h,i){t.setRequestHeader(i,h)}),fa.isUndefined(A.withCredentials)||(t.withCredentials=!!A.withCredentials),a&&a!=="json"&&(t.responseType=A.responseType),typeof A.onDownloadProgress=="function"&&t.addEventListener("progress",s3(A.onDownloadProgress,!0)),typeof A.onUploadProgress=="function"&&t.upload&&t.upload.addEventListener("progress",s3(A.onUploadProgress)),(A.cancelToken||A.signal)&&(u=l=>{!t||(v(!l||l.type?new Fm(null,A,t):l),t.abort(),t=null)},A.cancelToken&&A.cancelToken.subscribe(u),A.signal&&(A.signal.aborted?u():A.signal.addEventListener("abort",u)));const o=Fk(f);if(o&&Mh.protocols.indexOf(o)===-1){v(new Go("Unsupported protocol "+o+":",Go.ERR_BAD_REQUEST,A));return}t.send(S||null)})},Gg={http:Pk,xhr:Uk};fa.forEach(Gg,(A,R)=>{if(A){try{Object.defineProperty(A,"name",{value:R})}catch{}Object.defineProperty(A,"adapterName",{value:R})}});const Vk={getAdapter:A=>{A=fa.isArray(A)?A:[A];const{length:R}=A;let e,v;for(let S=0;S<R&&(e=A[S],!(v=fa.isString(e)?Gg[e.toLowerCase()]:e));S++);if(!v)throw v===!1?new Go(`Adapter ${e} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(fa.hasOwnProp(Gg,e)?`Adapter '${e}' is not available in the build`:`Unknown adapter '${e}'`);if(!fa.isFunction(v))throw new TypeError("adapter is not a function");return v},adapters:Gg};function Gy(A){if(A.cancelToken&&A.cancelToken.throwIfRequested(),A.signal&&A.signal.aborted)throw new Fm(null,A)}function l3(A){return Gy(A),A.headers=ap.from(A.headers),A.data=jy.call(A,A.transformRequest),["post","put","patch"].indexOf(A.method)!==-1&&A.headers.setContentType("application/x-www-form-urlencoded",!1),Vk.getAdapter(A.adapter||T2.adapter)(A).then(function(v){return Gy(A),v.data=jy.call(A,A.transformResponse,v),v.headers=ap.from(v.headers),v},function(v){return E4(v)||(Gy(A),v&&v.response&&(v.response.data=jy.call(A,A.transformResponse,v.response),v.response.headers=ap.from(v.response.headers))),Promise.reject(v)})}const u3=A=>A instanceof ap?A.toJSON():A;function h0(A,R){R=R||{};const e={};function v(t,f,n){return fa.isPlainObject(t)&&fa.isPlainObject(f)?fa.merge.call({caseless:n},t,f):fa.isPlainObject(f)?fa.merge({},f):fa.isArray(f)?f.slice():f}function S(t,f,n){if(fa.isUndefined(f)){if(!fa.isUndefined(t))return v(void 0,t,n)}else return v(t,f,n)}function r(t,f){if(!fa.isUndefined(f))return v(void 0,f)}function a(t,f){if(fa.isUndefined(f)){if(!fa.isUndefined(t))return v(void 0,t)}else return v(void 0,f)}function u(t,f,n){if(n in R)return v(t,f);if(n in A)return v(void 0,t)}const c={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(t,f)=>S(u3(t),u3(f),!0)};return fa.forEach(Object.keys(A).concat(Object.keys(R)),function(f){const n=c[f]||S,o=n(A[f],R[f],f);fa.isUndefined(o)&&n!==u||(e[f]=o)}),e}const L4="1.2.1",A2={};["object","boolean","number","function","string","symbol"].forEach((A,R)=>{A2[A]=function(v){return typeof v===A||"a"+(R<1?"n ":" ")+A}});const c3={};A2.transitional=function(R,e,v){function S(r,a){return"[Axios v"+L4+"] Transitional option '"+r+"'"+a+(v?". "+v:"")}return(r,a,u)=>{if(R===!1)throw new Go(S(a," has been removed"+(e?" in "+e:"")),Go.ERR_DEPRECATED);return e&&!c3[a]&&(c3[a]=!0,console.warn(S(a," has been deprecated since v"+e+" and will be removed in the near future"))),R?R(r,a,u):!0}};function Hk(A,R,e){if(typeof A!="object")throw new Go("options must be an object",Go.ERR_BAD_OPTION_VALUE);const v=Object.keys(A);let S=v.length;for(;S-- >0;){const r=v[S],a=R[r];if(a){const u=A[r],c=u===void 0||a(u,r,A);if(c!==!0)throw new Go("option "+r+" must be "+c,Go.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Go("Unknown option "+r,Go.ERR_BAD_OPTION)}}const sb={assertOptions:Hk,validators:A2},Op=sb.validators;class g1{constructor(R){this.defaults=R,this.interceptors={request:new a3,response:new a3}}request(R,e){typeof R=="string"?(e=e||{},e.url=R):e=R||{},e=h0(this.defaults,e);const{transitional:v,paramsSerializer:S,headers:r}=e;v!==void 0&&sb.assertOptions(v,{silentJSONParsing:Op.transitional(Op.boolean),forcedJSONParsing:Op.transitional(Op.boolean),clarifyTimeoutError:Op.transitional(Op.boolean)},!1),S!==void 0&&sb.assertOptions(S,{encode:Op.function,serialize:Op.function},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let a;a=r&&fa.merge(r.common,r[e.method]),a&&fa.forEach(["delete","get","head","post","put","patch","common"],h=>{delete r[h]}),e.headers=ap.concat(a,r);const u=[];let c=!0;this.interceptors.request.forEach(function(i){typeof i.runWhen=="function"&&i.runWhen(e)===!1||(c=c&&i.synchronous,u.unshift(i.fulfilled,i.rejected))});const t=[];this.interceptors.response.forEach(function(i){t.push(i.fulfilled,i.rejected)});let f,n=0,o;if(!c){const h=[l3.bind(this),void 0];for(h.unshift.apply(h,u),h.push.apply(h,t),o=h.length,f=Promise.resolve(e);n<o;)f=f.then(h[n++],h[n++]);return f}o=u.length;let l=e;for(n=0;n<o;){const h=u[n++],i=u[n++];try{l=h(l)}catch(s){i.call(this,s);break}}try{f=l3.call(this,l)}catch(h){return Promise.reject(h)}for(n=0,o=t.length;n<o;)f=f.then(t[n++],t[n++]);return f}getUri(R){R=h0(this.defaults,R);const e=C4(R.baseURL,R.url);return M4(e,R.params,R.paramsSerializer)}}fa.forEach(["delete","get","head","options"],function(R){g1.prototype[R]=function(e,v){return this.request(h0(v||{},{method:R,url:e,data:(v||{}).data}))}});fa.forEach(["post","put","patch"],function(R){function e(v){return function(r,a,u){return this.request(h0(u||{},{method:R,headers:v?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}g1.prototype[R]=e(),g1.prototype[R+"Form"]=e(!0)});const Wg=g1;class M2{constructor(R){if(typeof R!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const v=this;this.promise.then(S=>{if(!v._listeners)return;let r=v._listeners.length;for(;r-- >0;)v._listeners[r](S);v._listeners=null}),this.promise.then=S=>{let r;const a=new Promise(u=>{v.subscribe(u),r=u}).then(S);return a.cancel=function(){v.unsubscribe(r)},a},R(function(r,a,u){v.reason||(v.reason=new Fm(r,a,u),e(v.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(R){if(this.reason){R(this.reason);return}this._listeners?this._listeners.push(R):this._listeners=[R]}unsubscribe(R){if(!this._listeners)return;const e=this._listeners.indexOf(R);e!==-1&&this._listeners.splice(e,1)}static source(){let R;return{token:new M2(function(S){R=S}),cancel:R}}}const jk=M2;function Gk(A){return function(e){return A.apply(null,e)}}function Wk(A){return fa.isObject(A)&&A.isAxiosError===!0}function P4(A){const R=new Wg(A),e=p4(Wg.prototype.request,R);return fa.extend(e,Wg.prototype,R,{allOwnKeys:!0}),fa.extend(e,R,null,{allOwnKeys:!0}),e.create=function(S){return P4(h0(A,S))},e}const _u=P4(T2);_u.Axios=Wg;_u.CanceledError=Fm;_u.CancelToken=jk;_u.isCancel=E4;_u.VERSION=L4;_u.toFormData=B1;_u.AxiosError=Go;_u.Cancel=_u.CanceledError;_u.all=function(R){return Promise.all(R)};_u.spread=Gk;_u.isAxiosError=Wk;_u.mergeConfig=h0;_u.AxiosHeaders=ap;_u.formToJSON=A=>S4(fa.isHTMLForm(A)?new FormData(A):A);_u.default=_u;const Yk=_u;var lb={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(A,R){(function(){var e,v="4.17.21",S=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",t=500,f="__lodash_placeholder__",n=1,o=2,l=4,h=1,i=2,s=1,p=2,d=4,g=8,b=16,m=32,x=64,w=128,y=256,T=512,M=30,P="...",L=800,I=16,E=1,k=2,C=3,D=1/0,F=9007199254740991,N=17976931348623157e292,G=0/0,U=4294967295,X=U-1,z=U>>>1,B=[["ary",w],["bind",s],["bindKey",p],["curry",g],["curryRight",b],["flip",T],["partial",m],["partialRight",x],["rearg",y]],j="[object Arguments]",V="[object Array]",K="[object AsyncFunction]",te="[object Boolean]",$="[object Date]",ie="[object DOMException]",se="[object Error]",Q="[object Function]",H="[object GeneratorFunction]",oe="[object Map]",re="[object Number]",ee="[object Null]",ae="[object Object]",fe="[object Promise]",de="[object Proxy]",pe="[object RegExp]",W="[object Set]",ue="[object String]",me="[object Symbol]",be="[object Undefined]",Me="[object WeakMap]",Pe="[object WeakSet]",Ge="[object ArrayBuffer]",ze="[object DataView]",Qe="[object Float32Array]",tt="[object Float64Array]",Ce="[object Int8Array]",Ae="[object Int16Array]",Be="[object Int32Array]",qe="[object Uint8Array]",Tt="[object Uint8ClampedArray]",At="[object Uint16Array]",Ne="[object Uint32Array]",ct=/\b__p \+= '';/g,Mt=/\b(__p \+=) '' \+/g,Wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qt=/&(?:amp|lt|gt|quot|#39);/g,zt=/[&<>"']/g,$t=RegExp(qt.source),rr=RegExp(zt.source),Lt=/<%-([\s\S]+?)%>/g,Ct=/<%([\s\S]+?)%>/g,dt=/<%=([\s\S]+?)%>/g,lt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Te=/^\w*$/,Le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ue=/[\\^$.*+?()[\]{}|]/g,et=RegExp(Ue.source),ke=/^\s+/,Ie=/\s/,He=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ye=/\{\n\/\* \[wrapped with (.+)\] \*/,ft=/,? & /,it=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,je=/[()=,{}\[\]\/\s]/,ot=/\\(\\)?/g,Je=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,st=/\w*$/,It=/^[-+]0x[0-9a-f]+$/i,Nt=/^0b[01]+$/i,nr=/^\[object .+?Constructor\]$/,We=/^0o[0-7]+$/i,Fe=/^(?:0|[1-9]\d*)$/,bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,kt=/($^)/,_t=/['\n\r\u2028\u2029\\]/g,Rt="\\ud800-\\udfff",Dt="\\u0300-\\u036f",Ut="\\ufe20-\\ufe2f",Bt="\\u20d0-\\u20ff",tr=Dt+Ut+Bt,er="\\u2700-\\u27bf",Zt="a-z\\xdf-\\xf6\\xf8-\\xff",_r="\\xac\\xb1\\xd7\\xf7",Gr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Or="\\u2000-\\u206f",Fr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mn="A-Z\\xc0-\\xd6\\xd8-\\xde",Wn="\\ufe0e\\ufe0f",Tn=_r+Gr+Or+Fr,Nn="['\u2019]",jn="["+Rt+"]",Nr="["+Tn+"]",Pr="["+tr+"]",Ln="\\d+",pn="["+er+"]",xn="["+Zt+"]",en="[^"+Rt+Tn+Ln+er+Zt+Mn+"]",_n="\\ud83c[\\udffb-\\udfff]",kn="(?:"+Pr+"|"+_n+")",ln="[^"+Rt+"]",vt="(?:\\ud83c[\\udde6-\\uddff]){2}",Gt="[\\ud800-\\udbff][\\udc00-\\udfff]",fr="["+Mn+"]",Cr="\\u200d",Wr="(?:"+xn+"|"+en+")",Vr="(?:"+fr+"|"+en+")",Qr="(?:"+Nn+"(?:d|ll|m|re|s|t|ve))?",Hr="(?:"+Nn+"(?:D|LL|M|RE|S|T|VE))?",En=kn+"?",ta="["+Wn+"]?",ea="(?:"+Cr+"(?:"+[ln,vt,Gt].join("|")+")"+ta+En+")*",ba="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Wa="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",qa=ta+En+ea,dr="(?:"+[pn,vt,Gt].join("|")+")"+qa,nn="(?:"+[ln+Pr+"?",Pr,vt,Gt,jn].join("|")+")",Jr=RegExp(Nn,"g"),Pn=RegExp(Pr,"g"),Gn=RegExp(_n+"(?="+_n+")|"+nn+qa,"g"),ka=RegExp([fr+"?"+xn+"+"+Qr+"(?="+[Nr,fr,"$"].join("|")+")",Vr+"+"+Hr+"(?="+[Nr,fr+Wr,"$"].join("|")+")",fr+"?"+Wr+"+"+Qr,fr+"+"+Hr,Wa,ba,Ln,dr].join("|"),"g"),ca=RegExp("["+Cr+Rt+tr+Wn+"]"),Ta=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Aa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ya=-1,Xt={};Xt[Qe]=Xt[tt]=Xt[Ce]=Xt[Ae]=Xt[Be]=Xt[qe]=Xt[Tt]=Xt[At]=Xt[Ne]=!0,Xt[j]=Xt[V]=Xt[Ge]=Xt[te]=Xt[ze]=Xt[$]=Xt[se]=Xt[Q]=Xt[oe]=Xt[re]=Xt[ae]=Xt[pe]=Xt[W]=Xt[ue]=Xt[Me]=!1;var yr={};yr[j]=yr[V]=yr[Ge]=yr[ze]=yr[te]=yr[$]=yr[Qe]=yr[tt]=yr[Ce]=yr[Ae]=yr[Be]=yr[oe]=yr[re]=yr[ae]=yr[pe]=yr[W]=yr[ue]=yr[me]=yr[qe]=yr[Tt]=yr[At]=yr[Ne]=!0,yr[se]=yr[Q]=yr[Me]=!1;var Yr={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},un={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},rn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},hn=parseFloat,tn=parseInt,wr=typeof Hs=="object"&&Hs&&Hs.Object===Object&&Hs,zr=typeof self=="object"&&self&&self.Object===Object&&self,Tr=wr||zr||Function("return this")(),Fn=R&&!R.nodeType&&R,Bn=Fn&&!0&&A&&!A.nodeType&&A,sa=Bn&&Bn.exports===Fn,Pa=sa&&wr.process,ia=function(){try{var ht=Bn&&Bn.require&&Bn.require("util").types;return ht||Pa&&Pa.binding&&Pa.binding("util")}catch{}}(),ri=ia&&ia.isArrayBuffer,Ai=ia&&ia.isDate,Bi=ia&&ia.isMap,Qa=ia&&ia.isRegExp,yi=ia&&ia.isSet,As=ia&&ia.isTypedArray;function qo(ht,Pt,Et){switch(Et.length){case 0:return ht.call(Pt);case 1:return ht.call(Pt,Et[0]);case 2:return ht.call(Pt,Et[0],Et[1]);case 3:return ht.call(Pt,Et[0],Et[1],Et[2])}return ht.apply(Pt,Et)}function Tu(ht,Pt,Et,Jt){for(var ur=-1,ar=ht==null?0:ht.length;++ur<ar;){var xr=ht[ur];Pt(Jt,xr,Et(xr),ht)}return Jt}function Ms(ht,Pt){for(var Et=-1,Jt=ht==null?0:ht.length;++Et<Jt&&Pt(ht[Et],Et,ht)!==!1;);return ht}function Zu(ht,Pt){for(var Et=ht==null?0:ht.length;Et--&&Pt(ht[Et],Et,ht)!==!1;);return ht}function Au(ht,Pt){for(var Et=-1,Jt=ht==null?0:ht.length;++Et<Jt;)if(!Pt(ht[Et],Et,ht))return!1;return!0}function su(ht,Pt){for(var Et=-1,Jt=ht==null?0:ht.length,ur=0,ar=[];++Et<Jt;){var xr=ht[Et];Pt(xr,Et,ht)&&(ar[ur++]=xr)}return ar}function Sc(ht,Pt){var Et=ht==null?0:ht.length;return!!Et&&pl(ht,Pt,0)>-1}function zu(ht,Pt,Et){for(var Jt=-1,ur=ht==null?0:ht.length;++Jt<ur;)if(Et(Pt,ht[Jt]))return!0;return!1}function Po(ht,Pt){for(var Et=-1,Jt=ht==null?0:ht.length,ur=Array(Jt);++Et<Jt;)ur[Et]=Pt(ht[Et],Et,ht);return ur}function al(ht,Pt){for(var Et=-1,Jt=Pt.length,ur=ht.length;++Et<Jt;)ht[ur+Et]=Pt[Et];return ht}function go(ht,Pt,Et,Jt){var ur=-1,ar=ht==null?0:ht.length;for(Jt&&ar&&(Et=ht[++ur]);++ur<ar;)Et=Pt(Et,ht[ur],ur,ht);return Et}function ah(ht,Pt,Et,Jt){var ur=ht==null?0:ht.length;for(Jt&&ur&&(Et=ht[--ur]);ur--;)Et=Pt(Et,ht[ur],ur,ht);return Et}function lu(ht,Pt){for(var Et=-1,Jt=ht==null?0:ht.length;++Et<Jt;)if(Pt(ht[Et],Et,ht))return!0;return!1}var Ef=Zl("length");function uu(ht){return ht.split("")}function Xl(ht){return ht.match(it)||[]}function Mu(ht,Pt,Et){var Jt;return Et(ht,function(ur,ar,xr){if(Pt(ur,ar,xr))return Jt=ar,!1}),Jt}function ku(ht,Pt,Et,Jt){for(var ur=ht.length,ar=Et+(Jt?1:-1);Jt?ar--:++ar<ur;)if(Pt(ht[ar],ar,ht))return ar;return-1}function pl(ht,Pt,Et){return Pt===Pt?Cf(ht,Pt,Et):ku(ht,Ou,Et)}function il(ht,Pt,Et,Jt){for(var ur=Et-1,ar=ht.length;++ur<ar;)if(Jt(ht[ur],Pt))return ur;return-1}function Ou(ht){return ht!==ht}function Su(ht,Pt){var Et=ht==null?0:ht.length;return Et?$i(ht,Pt)/Et:G}function Zl(ht){return function(Pt){return Pt==null?e:Pt[ht]}}function dl(ht){return function(Pt){return ht==null?e:ht[Pt]}}function lc(ht,Pt,Et,Jt,ur){return ur(ht,function(ar,xr,Ar){Et=Jt?(Jt=!1,ar):Pt(Et,ar,xr,Ar)}),Et}function Ku(ht,Pt){var Et=ht.length;for(ht.sort(Pt);Et--;)ht[Et]=ht[Et].value;return ht}function $i(ht,Pt){for(var Et,Jt=-1,ur=ht.length;++Jt<ur;){var ar=Pt(ht[Jt]);ar!==e&&(Et=Et===e?ar:Et+ar)}return Et}function Gs(ht,Pt){for(var Et=-1,Jt=Array(ht);++Et<ht;)Jt[Et]=Pt(Et);return Jt}function $c(ht,Pt){return Po(Pt,function(Et){return[Et,ht[Et]]})}function cu(ht){return ht&&ht.slice(0,Qc(ht)+1).replace(ke,"")}function ks(ht){return function(Pt){return ht(Pt)}}function fu(ht,Pt){return Po(Pt,function(Et){return ht[Et]})}function Ml(ht,Pt){return ht.has(Pt)}function vl(ht,Pt){for(var Et=-1,Jt=ht.length;++Et<Jt&&pl(Pt,ht[Et],0)>-1;);return Et}function kl(ht,Pt){for(var Et=ht.length;Et--&&pl(Pt,ht[Et],0)>-1;);return Et}function ol(ht,Pt){for(var Et=ht.length,Jt=0;Et--;)ht[Et]===Pt&&++Jt;return Jt}var ml=dl(Yr),gs=dl(un);function Kl(ht){return"\\"+rn[ht]}function hu(ht,Pt){return ht==null?e:ht[Pt]}function es(ht){return ca.test(ht)}function sl(ht){return Ta.test(ht)}function Yo(ht){for(var Pt,Et=[];!(Pt=ht.next()).done;)Et.push(Pt.value);return Et}function Ec(ht){var Pt=-1,Et=Array(ht.size);return ht.forEach(function(Jt,ur){Et[++Pt]=[ur,Jt]}),Et}function Cc(ht,Pt){return function(Et){return ht(Pt(Et))}}function ll(ht,Pt){for(var Et=-1,Jt=ht.length,ur=0,ar=[];++Et<Jt;){var xr=ht[Et];(xr===Pt||xr===f)&&(ht[Et]=f,ar[ur++]=Et)}return ar}function pu(ht){var Pt=-1,Et=Array(ht.size);return ht.forEach(function(Jt){Et[++Pt]=Jt}),Et}function Uo(ht){var Pt=-1,Et=Array(ht.size);return ht.forEach(function(Jt){Et[++Pt]=[Jt,Jt]}),Et}function Cf(ht,Pt,Et){for(var Jt=Et-1,ur=ht.length;++Jt<ur;)if(ht[Jt]===Pt)return Jt;return-1}function uc(ht,Pt,Et){for(var Jt=Et+1;Jt--;)if(ht[Jt]===Pt)return Jt;return Jt}function Is(ht){return es(ht)?ih(ht):Ef(ht)}function ul(ht){return es(ht)?nt(ht):uu(ht)}function Qc(ht){for(var Pt=ht.length;Pt--&&Ie.test(ht.charAt(Pt)););return Pt}var Fu=dl(qr);function ih(ht){for(var Pt=Gn.lastIndex=0;Gn.test(ht);)++Pt;return Pt}function nt(ht){return ht.match(Gn)||[]}function $e(ht){return ht.match(ka)||[]}var gt=function ht(Pt){Pt=Pt==null?Tr:Ft.defaults(Tr.Object(),Pt,Ft.pick(Tr,Aa));var Et=Pt.Array,Jt=Pt.Date,ur=Pt.Error,ar=Pt.Function,xr=Pt.Math,Ar=Pt.Object,mn=Pt.RegExp,Zr=Pt.String,bn=Pt.TypeError,Qn=Et.prototype,Cn=ar.prototype,Hn=Ar.prototype,ra=Pt["__core-js_shared__"],qn=Cn.toString,Un=Hn.hasOwnProperty,Fa=0,ai=function(){var le=/[^.]+$/.exec(ra&&ra.keys&&ra.keys.IE_PROTO||"");return le?"Symbol(src)_1."+le:""}(),_a=Hn.toString,Na=qn.call(Ar),wi=Tr._,ya=mn("^"+qn.call(Un).replace(Ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),va=sa?Pt.Buffer:e,Ia=Pt.Symbol,ui=Pt.Uint8Array,ki=va?va.allocUnsafe:e,vi=Cc(Ar.getPrototypeOf,Ar),Ci=Ar.create,Xn=Hn.propertyIsEnumerable,oi=Qn.splice,Ti=Ia?Ia.isConcatSpreadable:e,Sa=Ia?Ia.iterator:e,_o=Ia?Ia.toStringTag:e,Zi=function(){try{var le=Oc(Ar,"defineProperty");return le({},"",{}),le}catch{}}(),qi=Pt.clearTimeout!==Tr.clearTimeout&&Pt.clearTimeout,zs=Jt&&Jt.now!==Tr.Date.now&&Jt.now,Gi=Pt.setTimeout!==Tr.setTimeout&&Pt.setTimeout,Ni=xr.ceil,yo=xr.floor,ts=Ar.getOwnPropertySymbols,ls=va?va.isBuffer:e,Ss=Pt.isFinite,Ws=Qn.join,so=Cc(Ar.keys,Ar),Xa=xr.max,hi=xr.min,Oo=Jt.now,lo=Pt.parseInt,Eo=xr.random,Ki=Qn.reverse,si=Oc(Pt,"DataView"),eo=Oc(Pt,"Map"),xo=Oc(Pt,"Promise"),Oa=Oc(Pt,"Set"),Da=Oc(Pt,"WeakMap"),Za=Oc(Ar,"create"),aa=Da&&new Da,Ua={},mi=hf(si),pi=hf(eo),wo=hf(xo),Xo=hf(Oa),ji=hf(Da),Ui=Ia?Ia.prototype:e,ps=Ui?Ui.valueOf:e,ds=Ui?Ui.toString:e;function or(le){if(Ts(le)&&!Fi(le)&&!(le instanceof Si)){if(le instanceof zi)return le;if(Un.call(le,"__wrapped__"))return Yh(le)}return new zi(le)}var To=function(){function le(){}return function(ge){if(!ss(ge))return{};if(Ci)return Ci(ge);le.prototype=ge;var Ve=new le;return le.prototype=e,Ve}}();function co(){}function zi(le,ge){this.__wrapped__=le,this.__actions__=[],this.__chain__=!!ge,this.__index__=0,this.__values__=e}or.templateSettings={escape:Lt,evaluate:Ct,interpolate:dt,variable:"",imports:{_:or}},or.prototype=co.prototype,or.prototype.constructor=or,zi.prototype=To(co.prototype),zi.prototype.constructor=zi;function Si(le){this.__wrapped__=le,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function Es(){var le=new Si(this.__wrapped__);return le.__actions__=Bl(this.__actions__),le.__dir__=this.__dir__,le.__filtered__=this.__filtered__,le.__iteratees__=Bl(this.__iteratees__),le.__takeCount__=this.__takeCount__,le.__views__=Bl(this.__views__),le}function yl(){if(this.__filtered__){var le=new Si(this);le.__dir__=-1,le.__filtered__=!0}else le=this.clone(),le.__dir__*=-1;return le}function ys(){var le=this.__wrapped__.value(),ge=this.__dir__,Ve=Fi(le),xt=ge<0,Kt=Ve?le.length:0,mr=Uu(0,Kt,this.__views__),Xr=mr.start,an=mr.end,wn=an-Xr,da=xt?an:Xr-1,ga=this.__iteratees__,Ma=ga.length,$a=0,Mi=hi(wn,this.__takeCount__);if(!Ve||!xt&&Kt==wn&&Mi==wn)return lh(le,this.__actions__);var Vi=[];e:for(;wn--&&$a<Mi;){da+=ge;for(var mo=-1,Hi=le[da];++mo<Ma;){var So=ga[mo],zo=So.iteratee,Vc=So.type,nc=zo(Hi);if(Vc==k)Hi=nc;else if(!nc){if(Vc==E)continue e;break e}}Vi[$a++]=Hi}return Vi}Si.prototype=To(co.prototype),Si.prototype.constructor=Si;function rs(le){var ge=-1,Ve=le==null?0:le.length;for(this.clear();++ge<Ve;){var xt=le[ge];this.set(xt[0],xt[1])}}function Ys(){this.__data__=Za?Za(null):{},this.size=0}function Cs(le){var ge=this.has(le)&&delete this.__data__[le];return this.size-=ge?1:0,ge}function ns(le){var ge=this.__data__;if(Za){var Ve=ge[le];return Ve===c?e:Ve}return Un.call(ge,le)?ge[le]:e}function Sl(le){var ge=this.__data__;return Za?ge[le]!==e:Un.call(ge,le)}function El(le,ge){var Ve=this.__data__;return this.size+=this.has(le)?0:1,Ve[le]=Za&&ge===e?c:ge,this}rs.prototype.clear=Ys,rs.prototype.delete=Cs,rs.prototype.get=ns,rs.prototype.has=Sl,rs.prototype.set=El;function to(le){var ge=-1,Ve=le==null?0:le.length;for(this.clear();++ge<Ve;){var xt=le[ge];this.set(xt[0],xt[1])}}function xl(){this.__data__=[],this.size=0}function Eu(le){var ge=this.__data__,Ve=In(ge,le);if(Ve<0)return!1;var xt=ge.length-1;return Ve==xt?ge.pop():oi.call(ge,Ve,1),--this.size,!0}function fo(le){var ge=this.__data__,Ve=In(ge,le);return Ve<0?e:ge[Ve][1]}function Xi(le){return In(this.__data__,le)>-1}function Do(le,ge){var Ve=this.__data__,xt=In(Ve,le);return xt<0?(++this.size,Ve.push([le,ge])):Ve[xt][1]=ge,this}to.prototype.clear=xl,to.prototype.delete=Eu,to.prototype.get=fo,to.prototype.has=Xi,to.prototype.set=Do;function Cl(le){var ge=-1,Ve=le==null?0:le.length;for(this.clear();++ge<Ve;){var xt=le[ge];this.set(xt[0],xt[1])}}function J(){this.size=0,this.__data__={hash:new rs,map:new(eo||to),string:new rs}}function ne(le){var ge=zc(this,le).delete(le);return this.size-=ge?1:0,ge}function q(le){return zc(this,le).get(le)}function ve(le){return zc(this,le).has(le)}function Se(le,ge){var Ve=zc(this,le),xt=Ve.size;return Ve.set(le,ge),this.size+=Ve.size==xt?0:1,this}Cl.prototype.clear=J,Cl.prototype.delete=ne,Cl.prototype.get=q,Cl.prototype.has=ve,Cl.prototype.set=Se;function Oe(le){var ge=-1,Ve=le==null?0:le.length;for(this.__data__=new Cl;++ge<Ve;)this.add(le[ge])}function Xe(le){return this.__data__.set(le,c),this}function ut(le){return this.__data__.has(le)}Oe.prototype.add=Oe.prototype.push=Xe,Oe.prototype.has=ut;function yt(le){var ge=this.__data__=new to(le);this.size=ge.size}function jt(){this.__data__=new to,this.size=0}function sr(le){var ge=this.__data__,Ve=ge.delete(le);return this.size=ge.size,Ve}function pr(le){return this.__data__.get(le)}function br(le){return this.__data__.has(le)}function Lr(le,ge){var Ve=this.__data__;if(Ve instanceof to){var xt=Ve.__data__;if(!eo||xt.length<S-1)return xt.push([le,ge]),this.size=++Ve.size,this;Ve=this.__data__=new Cl(xt)}return Ve.set(le,ge),this.size=Ve.size,this}yt.prototype.clear=jt,yt.prototype.delete=sr,yt.prototype.get=pr,yt.prototype.has=br,yt.prototype.set=Lr;function Dr(le,ge){var Ve=Fi(le),xt=!Ve&&Ho(le),Kt=!Ve&&!xt&&yu(le),mr=!Ve&&!xt&&!Kt&&Bc(le),Xr=Ve||xt||Kt||mr,an=Xr?Gs(le.length,Zr):[],wn=an.length;for(var da in le)(ge||Un.call(le,da))&&!(Xr&&(da=="length"||Kt&&(da=="offset"||da=="parent")||mr&&(da=="buffer"||da=="byteLength"||da=="byteOffset")||Fc(da,wn)))&&an.push(da);return an}function jr(le){var ge=le.length;return ge?le[Dh(0,ge-1)]:e}function Sr(le,ge){return yh(Bl(le),wa(ge,0,le.length))}function Ur(le){return yh(Bl(le))}function $r(le,ge,Ve){(Ve!==e&&!ko(le[ge],Ve)||Ve===e&&!(ge in le))&&ha(le,ge,Ve)}function cn(le,ge,Ve){var xt=le[ge];(!(Un.call(le,ge)&&ko(xt,Ve))||Ve===e&&!(ge in le))&&ha(le,ge,Ve)}function In(le,ge){for(var Ve=le.length;Ve--;)if(ko(le[Ve][0],ge))return Ve;return-1}function An(le,ge,Ve,xt){return gi(le,function(Kt,mr,Xr){ge(xt,Kt,Ve(Kt),Xr)}),xt}function Dn(le,ge){return le&&Dl(ge,Us(ge),le)}function Jn(le,ge){return le&&Dl(ge,zl(ge),le)}function ha(le,ge,Ve){ge=="__proto__"&&Zi?Zi(le,ge,{configurable:!0,enumerable:!0,value:Ve,writable:!0}):le[ge]=Ve}function la(le,ge){for(var Ve=-1,xt=ge.length,Kt=Et(xt),mr=le==null;++Ve<xt;)Kt[Ve]=mr?e:Pv(le,ge[Ve]);return Kt}function wa(le,ge,Ve){return le===le&&(Ve!==e&&(le=le<=Ve?le:Ve),ge!==e&&(le=le>=ge?le:ge)),le}function Ea(le,ge,Ve,xt,Kt,mr){var Xr,an=ge&n,wn=ge&o,da=ge&l;if(Ve&&(Xr=Kt?Ve(le,xt,Kt,mr):Ve(le)),Xr!==e)return Xr;if(!ss(le))return le;var ga=Fi(le);if(ga){if(Xr=sf(le),!an)return Bl(le,Xr)}else{var Ma=Ul(le),$a=Ma==Q||Ma==H;if(yu(le))return cd(le,an);if(Ma==ae||Ma==j||$a&&!Kt){if(Xr=wn||$a?{}:Vf(le),!an)return wn?ch(le,Jn(Xr,le)):ov(le,Dn(Xr,le))}else{if(!yr[Ma])return Kt?le:{};Xr=lf(le,Ma,an)}}mr||(mr=new yt);var Mi=mr.get(le);if(Mi)return Mi;mr.set(le,Xr),Dp(le)?le.forEach(function(Hi){Xr.add(Ea(Hi,ge,Ve,Hi,le,mr))}):wd(le)&&le.forEach(function(Hi,So){Xr.set(So,Ea(Hi,ge,Ve,So,le,mr))});var Vi=da?wn?bp:Vh:wn?zl:Us,mo=ga?e:Vi(le);return Ms(mo||le,function(Hi,So){mo&&(So=Hi,Hi=le[So]),cn(Xr,So,Ea(Hi,ge,Ve,So,le,mr))}),Xr}function ii(le){var ge=Us(le);return function(Ve){return ti(Ve,le,ge)}}function ti(le,ge,Ve){var xt=Ve.length;if(le==null)return!xt;for(le=Ar(le);xt--;){var Kt=Ve[xt],mr=ge[Kt],Xr=le[Kt];if(Xr===e&&!(Kt in le)||!mr(Xr))return!1}return!0}function Oi(le,ge,Ve){if(typeof le!="function")throw new bn(a);return cf(function(){le.apply(e,Ve)},ge)}function Va(le,ge,Ve,xt){var Kt=-1,mr=Sc,Xr=!0,an=le.length,wn=[],da=ge.length;if(!an)return wn;Ve&&(ge=Po(ge,ks(Ve))),xt?(mr=zu,Xr=!1):ge.length>=S&&(mr=Ml,Xr=!1,ge=new Oe(ge));e:for(;++Kt<an;){var ga=le[Kt],Ma=Ve==null?ga:Ve(ga);if(ga=xt||ga!==0?ga:0,Xr&&Ma===Ma){for(var $a=da;$a--;)if(ge[$a]===Ma)continue e;wn.push(ga)}else mr(ge,Ma,xt)||wn.push(ga)}return wn}var gi=sv(bo),Ri=sv(Ao,!0);function ci(le,ge){var Ve=!0;return gi(le,function(xt,Kt,mr){return Ve=!!ge(xt,Kt,mr),Ve}),Ve}function li(le,ge,Ve){for(var xt=-1,Kt=le.length;++xt<Kt;){var mr=le[xt],Xr=ge(mr);if(Xr!=null&&(an===e?Xr===Xr&&!nu(Xr):Ve(Xr,an)))var an=Xr,wn=mr}return wn}function Li(le,ge,Ve,xt){var Kt=le.length;for(Ve=fi(Ve),Ve<0&&(Ve=-Ve>Kt?0:Kt+Ve),xt=xt===e||xt>Kt?Kt:fi(xt),xt<0&&(xt+=Kt),xt=Ve>xt?0:yc(xt);Ve<xt;)le[Ve++]=ge;return le}function ni(le,ge){var Ve=[];return gi(le,function(xt,Kt,mr){ge(xt,Kt,mr)&&Ve.push(xt)}),Ve}function Ha(le,ge,Ve,xt,Kt){var mr=-1,Xr=le.length;for(Ve||(Ve=A0),Kt||(Kt=[]);++mr<Xr;){var an=le[mr];ge>0&&Ve(an)?ge>1?Ha(an,ge-1,Ve,xt,Kt):al(Kt,an):xt||(Kt[Kt.length]=an)}return Kt}var as=Oh(),Fo=Oh(!0);function bo(le,ge){return le&&as(le,ge,Us)}function Ao(le,ge){return le&&Fo(le,ge,Us)}function Qo(le,ge){return su(ge,function(Ve){return tc(le[Ve])})}function Mo(le,ge){ge=vc(ge,le);for(var Ve=0,xt=ge.length;le!=null&&Ve<xt;)le=le[qu(ge[Ve++])];return Ve&&Ve==xt?le:e}function du(le,ge,Ve){var xt=ge(le);return Fi(le)?xt:al(xt,Ve(le))}function xs(le){return le==null?le===e?be:ee:_o&&_o in Ar(le)?dv(le):gd(le)}function Jl(le,ge){return le>ge}function bl(le,ge){return le!=null&&Un.call(le,ge)}function $l(le,ge){return le!=null&&ge in Ar(le)}function Cu(le,ge,Ve){return le>=hi(ge,Ve)&&le<Xa(ge,Ve)}function cc(le,ge,Ve){for(var xt=Ve?zu:Sc,Kt=le[0].length,mr=le.length,Xr=mr,an=Et(mr),wn=1/0,da=[];Xr--;){var ga=le[Xr];Xr&&ge&&(ga=Po(ga,ks(ge))),wn=hi(ga.length,wn),an[Xr]=!Ve&&(ge||Kt>=120&&ga.length>=120)?new Oe(Xr&&ga):e}ga=le[0];var Ma=-1,$a=an[0];e:for(;++Ma<Kt&&da.length<wn;){var Mi=ga[Ma],Vi=ge?ge(Mi):Mi;if(Mi=Ve||Mi!==0?Mi:0,!($a?Ml($a,Vi):xt(da,Vi,Ve))){for(Xr=mr;--Xr;){var mo=an[Xr];if(!(mo?Ml(mo,Vi):xt(le[Xr],Vi,Ve)))continue e}$a&&$a.push(Vi),da.push(Mi)}}return da}function fc(le,ge,Ve,xt){return bo(le,function(Kt,mr,Xr){ge(xt,Ve(Kt),mr,Xr)}),xt}function Ll(le,ge,Ve){ge=vc(ge,le),le=ws(le,ge);var xt=le==null?le:le[qu(wt(ge))];return xt==null?e:qo(xt,le,Ve)}function Lu(le){return Ts(le)&&xs(le)==j}function Lf(le){return Ts(le)&&xs(le)==Ge}function hc(le){return Ts(le)&&xs(le)==$}function Ql(le,ge,Ve,xt,Kt){return le===ge?!0:le==null||ge==null||!Ts(le)&&!Ts(ge)?le!==le&&ge!==ge:bs(le,ge,Ve,xt,Ql,Kt)}function bs(le,ge,Ve,xt,Kt,mr){var Xr=Fi(le),an=Fi(ge),wn=Xr?V:Ul(le),da=an?V:Ul(ge);wn=wn==j?ae:wn,da=da==j?ae:da;var ga=wn==ae,Ma=da==ae,$a=wn==da;if($a&&yu(le)){if(!yu(ge))return!1;Xr=!0,ga=!1}if($a&&!ga)return mr||(mr=new yt),Xr||Bc(le)?ph(le,ge,Ve,xt,Kt,mr):pv(le,ge,wn,Ve,xt,Kt,mr);if(!(Ve&h)){var Mi=ga&&Un.call(le,"__wrapped__"),Vi=Ma&&Un.call(ge,"__wrapped__");if(Mi||Vi){var mo=Mi?le.value():le,Hi=Vi?ge.value():ge;return mr||(mr=new yt),Kt(mo,Hi,Ve,xt,mr)}}return $a?(mr||(mr=new yt),dd(le,ge,Ve,xt,Kt,mr)):!1}function qc(le){return Ts(le)&&Ul(le)==oe}function ef(le,ge,Ve,xt){var Kt=Ve.length,mr=Kt,Xr=!xt;if(le==null)return!mr;for(le=Ar(le);Kt--;){var an=Ve[Kt];if(Xr&&an[2]?an[1]!==le[an[0]]:!(an[0]in le))return!1}for(;++Kt<mr;){an=Ve[Kt];var wn=an[0],da=le[wn],ga=an[1];if(Xr&&an[2]){if(da===e&&!(wn in le))return!1}else{var Ma=new yt;if(xt)var $a=xt(da,ga,wn,le,ge,Ma);if(!($a===e?Ql(ga,da,h|i,xt,Ma):$a))return!1}}return!0}function vs(le){if(!ss(le)||jh(le))return!1;var ge=tc(le)?ya:nr;return ge.test(hf(le))}function pc(le){return Ts(le)&&xs(le)==pe}function is(le){return Ts(le)&&Ul(le)==W}function Nl(le){return Ts(le)&&Nc(le.length)&&!!Xt[xs(le)]}function Pl(le){return typeof le=="function"?le:le==null?bc:typeof le=="object"?Fi(le)?Ph(le[0],le[1]):Lc(le):G2(le)}function Ju(le){if(!mc(le))return so(le);var ge=[];for(var Ve in Ar(le))Un.call(le,Ve)&&Ve!="constructor"&&ge.push(Ve);return ge}function od(le){if(!ss(le))return Gh(le);var ge=mc(le),Ve=[];for(var xt in le)xt=="constructor"&&(ge||!Un.call(le,xt))||Ve.push(xt);return Ve}function Pf(le,ge){return le<ge}function Lh(le,ge){var Ve=-1,xt=Il(le)?Et(le.length):[];return gi(le,function(Kt,mr,Xr){xt[++Ve]=ge(Kt,mr,Xr)}),xt}function Lc(le){var ge=Uf(le);return ge.length==1&&ge[0][2]?dh(ge[0][0],ge[0][1]):function(Ve){return Ve===le||ef(Ve,le,ge)}}function Ph(le,ge){return Hh(le)&&Zs(ge)?dh(qu(le),ge):function(Ve){var xt=Pv(Ve,le);return xt===e&&xt===ge?L0(Ve,le):Ql(ge,xt,h|i)}}function ql(le,ge,Ve,xt,Kt){le!==ge&&as(ge,function(mr,Xr){if(Kt||(Kt=new yt),ss(mr))eu(le,ge,Xr,Ve,ql,xt,Kt);else{var an=xt?xt(Qu(le,Xr),mr,Xr+"",le,ge,Kt):e;an===e&&(an=mr),$r(le,Xr,an)}},zl)}function eu(le,ge,Ve,xt,Kt,mr,Xr){var an=Qu(le,Ve),wn=Qu(ge,Ve),da=Xr.get(wn);if(da){$r(le,Ve,da);return}var ga=mr?mr(an,wn,Ve+"",le,ge,Xr):e,Ma=ga===e;if(Ma){var $a=Fi(wn),Mi=!$a&&yu(wn),Vi=!$a&&!Mi&&Bc(wn);ga=wn,$a||Mi||Vi?Fi(an)?ga=an:cs(an)?ga=Bl(an):Mi?(Ma=!1,ga=cd(wn,!0)):Vi?(Ma=!1,ga=Nu(wn,!0)):ga=[]:vf(wn)||Ho(wn)?(ga=an,Ho(an)?ga=Zf(an):(!ss(an)||tc(an))&&(ga=Vf(wn))):Ma=!1}Ma&&(Xr.set(wn,ga),Kt(ga,wn,xt,mr,Xr),Xr.delete(wn)),$r(le,Ve,ga)}function os(le,ge){var Ve=le.length;if(!!Ve)return ge+=ge<0?Ve:0,Fc(ge,Ve)?le[ge]:e}function qd(le,ge,Ve){ge.length?ge=Po(ge,function(mr){return Fi(mr)?function(Xr){return Mo(Xr,mr.length===1?mr[0]:mr)}:mr}):ge=[bc];var xt=-1;ge=Po(ge,ks(_i()));var Kt=Lh(le,function(mr,Xr,an){var wn=Po(ge,function(da){return da(mr)});return{criteria:wn,index:++xt,value:mr}});return Ku(Kt,function(mr,Xr){return av(mr,Xr,Ve)})}function ev(le,ge){return tv(le,ge,function(Ve,xt){return L0(le,xt)})}function tv(le,ge,Ve){for(var xt=-1,Kt=ge.length,mr={};++xt<Kt;){var Xr=ge[xt],an=Mo(le,Xr);Ve(an,Xr)&&Rh(mr,vc(Xr,le),an)}return mr}function x0(le){return function(ge){return Mo(ge,le)}}function hp(le,ge,Ve,xt){var Kt=xt?il:pl,mr=-1,Xr=ge.length,an=le;for(le===ge&&(ge=Bl(ge)),Ve&&(an=Po(le,ks(Ve)));++mr<Xr;)for(var wn=0,da=ge[mr],ga=Ve?Ve(da):da;(wn=Kt(an,ga,wn,xt))>-1;)an!==le&&oi.call(an,wn,1),oi.call(le,wn,1);return le}function sd(le,ge){for(var Ve=le?ge.length:0,xt=Ve-1;Ve--;){var Kt=ge[Ve];if(Ve==xt||Kt!==mr){var mr=Kt;Fc(Kt)?oi.call(le,Kt,1):sh(le,Kt)}}return le}function Dh(le,ge){return le+yo(Eo()*(ge-le+1))}function b0(le,ge,Ve,xt){for(var Kt=-1,mr=Xa(Ni((ge-le)/(Ve||1)),0),Xr=Et(mr);mr--;)Xr[xt?mr:++Kt]=le,le+=Ve;return Xr}function oh(le,ge){var Ve="";if(!le||ge<1||ge>F)return Ve;do ge%2&&(Ve+=le),ge=yo(ge/2),ge&&(le+=le);while(ge);return Ve}function Qi(le,ge){return ff(vh(le,ge,bc),le+"")}function dc(le){return jr(xf(le))}function Df(le,ge){var Ve=xf(le);return yh(Ve,wa(ge,0,Ve.length))}function Rh(le,ge,Ve,xt){if(!ss(le))return le;ge=vc(ge,le);for(var Kt=-1,mr=ge.length,Xr=mr-1,an=le;an!=null&&++Kt<mr;){var wn=qu(ge[Kt]),da=Ve;if(wn==="__proto__"||wn==="constructor"||wn==="prototype")return le;if(Kt!=Xr){var ga=an[wn];da=xt?xt(ga,wn,an):e,da===e&&(da=ss(ga)?ga:Fc(ge[Kt+1])?[]:{})}cn(an,wn,da),an=an[wn]}return le}var rv=aa?function(le,ge){return aa.set(le,ge),le}:bc,_0=Zi?function(le,ge){return Zi(le,"toString",{configurable:!0,enumerable:!1,value:fy(ge),writable:!0})}:bc;function w0(le){return yh(xf(le))}function Pu(le,ge,Ve){var xt=-1,Kt=le.length;ge<0&&(ge=-ge>Kt?0:Kt+ge),Ve=Ve>Kt?Kt:Ve,Ve<0&&(Ve+=Kt),Kt=ge>Ve?0:Ve-ge>>>0,ge>>>=0;for(var mr=Et(Kt);++xt<Kt;)mr[xt]=le[xt+ge];return mr}function T0(le,ge){var Ve;return gi(le,function(xt,Kt,mr){return Ve=ge(xt,Kt,mr),!Ve}),!!Ve}function pp(le,ge,Ve){var xt=0,Kt=le==null?xt:le.length;if(typeof ge=="number"&&ge===ge&&Kt<=z){for(;xt<Kt;){var mr=xt+Kt>>>1,Xr=le[mr];Xr!==null&&!nu(Xr)&&(Ve?Xr<=ge:Xr<ge)?xt=mr+1:Kt=mr}return Kt}return Rf(le,ge,bc,Ve)}function Rf(le,ge,Ve,xt){var Kt=0,mr=le==null?0:le.length;if(mr===0)return 0;ge=Ve(ge);for(var Xr=ge!==ge,an=ge===null,wn=nu(ge),da=ge===e;Kt<mr;){var ga=yo((Kt+mr)/2),Ma=Ve(le[ga]),$a=Ma!==e,Mi=Ma===null,Vi=Ma===Ma,mo=nu(Ma);if(Xr)var Hi=xt||Vi;else da?Hi=Vi&&(xt||$a):an?Hi=Vi&&$a&&(xt||!Mi):wn?Hi=Vi&&$a&&!Mi&&(xt||!mo):Mi||mo?Hi=!1:Hi=xt?Ma<=ge:Ma<ge;Hi?Kt=ga+1:mr=ga}return hi(mr,X)}function ld(le,ge){for(var Ve=-1,xt=le.length,Kt=0,mr=[];++Ve<xt;){var Xr=le[Ve],an=ge?ge(Xr):Xr;if(!Ve||!ko(an,wn)){var wn=an;mr[Kt++]=Xr===0?0:Xr}}return mr}function tf(le){return typeof le=="number"?le:nu(le)?G:+le}function vu(le){if(typeof le=="string")return le;if(Fi(le))return Po(le,vu)+"";if(nu(le))return ds?ds.call(le):"";var ge=le+"";return ge=="0"&&1/le==-D?"-0":ge}function No(le,ge,Ve){var xt=-1,Kt=Sc,mr=le.length,Xr=!0,an=[],wn=an;if(Ve)Xr=!1,Kt=zu;else if(mr>=S){var da=ge?null:cv(le);if(da)return pu(da);Xr=!1,Kt=Ml,wn=new Oe}else wn=ge?[]:an;e:for(;++xt<mr;){var ga=le[xt],Ma=ge?ge(ga):ga;if(ga=Ve||ga!==0?ga:0,Xr&&Ma===Ma){for(var $a=wn.length;$a--;)if(wn[$a]===Ma)continue e;ge&&wn.push(Ma),an.push(ga)}else Kt(wn,Ma,Ve)||(wn!==an&&wn.push(Ma),an.push(ga))}return an}function sh(le,ge){return ge=vc(ge,le),le=ws(le,ge),le==null||delete le[qu(wt(ge))]}function dp(le,ge,Ve,xt){return Rh(le,ge,Ve(Mo(le,ge)),xt)}function rf(le,ge,Ve,xt){for(var Kt=le.length,mr=xt?Kt:-1;(xt?mr--:++mr<Kt)&&ge(le[mr],mr,le););return Ve?Pu(le,xt?0:mr,xt?mr+1:Kt):Pu(le,xt?mr+1:0,xt?Kt:mr)}function lh(le,ge){var Ve=le;return Ve instanceof Si&&(Ve=Ve.value()),go(ge,function(xt,Kt){return Kt.func.apply(Kt.thisArg,al([xt],Kt.args))},Ve)}function Pc(le,ge,Ve){var xt=le.length;if(xt<2)return xt?No(le[0]):[];for(var Kt=-1,mr=Et(xt);++Kt<xt;)for(var Xr=le[Kt],an=-1;++an<xt;)an!=Kt&&(mr[Kt]=Va(mr[Kt]||Xr,le[an],ge,Ve));return No(Ha(mr,1),ge,Ve)}function Ih(le,ge,Ve){for(var xt=-1,Kt=le.length,mr=ge.length,Xr={};++xt<Kt;){var an=xt<mr?ge[xt]:e;Ve(Xr,le[xt],an)}return Xr}function vp(le){return cs(le)?le:[]}function If(le){return typeof le=="function"?le:bc}function vc(le,ge){return Fi(le)?le:Hh(le,ge)?[le]:yv(jo(le))}var ud=Qi;function nf(le,ge,Ve){var xt=le.length;return Ve=Ve===e?xt:Ve,!ge&&Ve>=xt?le:Pu(le,ge,Ve)}var zf=qi||function(le){return Tr.clearTimeout(le)};function cd(le,ge){if(ge)return le.slice();var Ve=le.length,xt=ki?ki(Ve):new le.constructor(Ve);return le.copy(xt),xt}function Of(le){var ge=new le.constructor(le.byteLength);return new ui(ge).set(new ui(le)),ge}function nv(le,ge){var Ve=ge?Of(le.buffer):le.buffer;return new le.constructor(Ve,le.byteOffset,le.byteLength)}function af(le){var ge=new le.constructor(le.source,st.exec(le));return ge.lastIndex=le.lastIndex,ge}function uh(le){return ps?Ar(ps.call(le)):{}}function Nu(le,ge){var Ve=ge?Of(le.buffer):le.buffer;return new le.constructor(Ve,le.byteOffset,le.length)}function zh(le,ge){if(le!==ge){var Ve=le!==e,xt=le===null,Kt=le===le,mr=nu(le),Xr=ge!==e,an=ge===null,wn=ge===ge,da=nu(ge);if(!an&&!da&&!mr&&le>ge||mr&&Xr&&wn&&!an&&!da||xt&&Xr&&wn||!Ve&&wn||!Kt)return 1;if(!xt&&!mr&&!da&&le<ge||da&&Ve&&Kt&&!xt&&!mr||an&&Ve&&Kt||!Xr&&Kt||!wn)return-1}return 0}function av(le,ge,Ve){for(var xt=-1,Kt=le.criteria,mr=ge.criteria,Xr=Kt.length,an=Ve.length;++xt<Xr;){var wn=zh(Kt[xt],mr[xt]);if(wn){if(xt>=an)return wn;var da=Ve[xt];return wn*(da=="desc"?-1:1)}}return le.index-ge.index}function iv(le,ge,Ve,xt){for(var Kt=-1,mr=le.length,Xr=Ve.length,an=-1,wn=ge.length,da=Xa(mr-Xr,0),ga=Et(wn+da),Ma=!xt;++an<wn;)ga[an]=ge[an];for(;++Kt<Xr;)(Ma||Kt<mr)&&(ga[Ve[Kt]]=le[Kt]);for(;da--;)ga[an++]=le[Kt++];return ga}function fd(le,ge,Ve,xt){for(var Kt=-1,mr=le.length,Xr=-1,an=Ve.length,wn=-1,da=ge.length,ga=Xa(mr-an,0),Ma=Et(ga+da),$a=!xt;++Kt<ga;)Ma[Kt]=le[Kt];for(var Mi=Kt;++wn<da;)Ma[Mi+wn]=ge[wn];for(;++Xr<an;)($a||Kt<mr)&&(Ma[Mi+Ve[Xr]]=le[Kt++]);return Ma}function Bl(le,ge){var Ve=-1,xt=le.length;for(ge||(ge=Et(xt));++Ve<xt;)ge[Ve]=le[Ve];return ge}function Dl(le,ge,Ve,xt){var Kt=!Ve;Ve||(Ve={});for(var mr=-1,Xr=ge.length;++mr<Xr;){var an=ge[mr],wn=xt?xt(Ve[an],le[an],an,Ve,le):e;wn===e&&(wn=le[an]),Kt?ha(Ve,an,wn):cn(Ve,an,wn)}return Ve}function ov(le,ge){return Dl(le,vd(le),ge)}function ch(le,ge){return Dl(le,vv(le),ge)}function Ff(le,ge){return function(Ve,xt){var Kt=Fi(Ve)?Tu:An,mr=ge?ge():{};return Kt(Ve,le,_i(xt,2),mr)}}function Dc(le){return Qi(function(ge,Ve){var xt=-1,Kt=Ve.length,mr=Kt>1?Ve[Kt-1]:e,Xr=Kt>2?Ve[2]:e;for(mr=le.length>3&&typeof mr=="function"?(Kt--,mr):e,Xr&&Vl(Ve[0],Ve[1],Xr)&&(mr=Kt<3?e:mr,Kt=1),ge=Ar(ge);++xt<Kt;){var an=Ve[xt];an&&le(ge,an,xt,mr)}return ge})}function sv(le,ge){return function(Ve,xt){if(Ve==null)return Ve;if(!Il(Ve))return le(Ve,xt);for(var Kt=Ve.length,mr=ge?Kt:-1,Xr=Ar(Ve);(ge?mr--:++mr<Kt)&&xt(Xr[mr],mr,Xr)!==!1;);return Ve}}function Oh(le){return function(ge,Ve,xt){for(var Kt=-1,mr=Ar(ge),Xr=xt(ge),an=Xr.length;an--;){var wn=Xr[le?an:++Kt];if(Ve(mr[wn],wn,mr)===!1)break}return ge}}function fh(le,ge,Ve){var xt=ge&s,Kt=Ic(le);function mr(){var Xr=this&&this!==Tr&&this instanceof mr?Kt:le;return Xr.apply(xt?Ve:this,arguments)}return mr}function hd(le){return function(ge){ge=jo(ge);var Ve=es(ge)?ul(ge):e,xt=Ve?Ve[0]:ge.charAt(0),Kt=Ve?nf(Ve,1).join(""):ge.slice(1);return xt[le]()+Kt}}function Rc(le){return function(ge){return go(H2(og(ge).replace(Jr,"")),le,"")}}function Ic(le){return function(){var ge=arguments;switch(ge.length){case 0:return new le;case 1:return new le(ge[0]);case 2:return new le(ge[0],ge[1]);case 3:return new le(ge[0],ge[1],ge[2]);case 4:return new le(ge[0],ge[1],ge[2],ge[3]);case 5:return new le(ge[0],ge[1],ge[2],ge[3],ge[4]);case 6:return new le(ge[0],ge[1],ge[2],ge[3],ge[4],ge[5]);case 7:return new le(ge[0],ge[1],ge[2],ge[3],ge[4],ge[5],ge[6])}var Ve=To(le.prototype),xt=le.apply(Ve,ge);return ss(xt)?xt:Ve}}function Bu(le,ge,Ve){var xt=Ic(le);function Kt(){for(var mr=arguments.length,Xr=Et(mr),an=mr,wn=Bf(Kt);an--;)Xr[an]=arguments[an];var da=mr<3&&Xr[0]!==wn&&Xr[mr-1]!==wn?[]:ll(Xr,wn);if(mr-=da.length,mr<Ve)return uv(le,ge,mp,Kt.placeholder,e,Xr,da,e,e,Ve-mr);var ga=this&&this!==Tr&&this instanceof Kt?xt:le;return qo(ga,this,Xr)}return Kt}function Fh(le){return function(ge,Ve,xt){var Kt=Ar(ge);if(!Il(ge)){var mr=_i(Ve,3);ge=Us(ge),Ve=function(an){return mr(Kt[an],an,Kt)}}var Xr=le(ge,Ve,xt);return Xr>-1?Kt[mr?ge[Xr]:Xr]:e}}function pd(le){return _s(function(ge){var Ve=ge.length,xt=Ve,Kt=zi.prototype.thru;for(le&&ge.reverse();xt--;){var mr=ge[xt];if(typeof mr!="function")throw new bn(a);if(Kt&&!Xr&&po(mr)=="wrapper")var Xr=new zi([],!0)}for(xt=Xr?xt:Ve;++xt<Ve;){mr=ge[xt];var an=po(mr),wn=an=="wrapper"?of(mr):e;wn&&uf(wn[0])&&wn[1]==(w|g|m|y)&&!wn[4].length&&wn[9]==1?Xr=Xr[po(wn[0])].apply(Xr,wn[3]):Xr=mr.length==1&&uf(mr)?Xr[an]():Xr.thru(mr)}return function(){var da=arguments,ga=da[0];if(Xr&&da.length==1&&Fi(ga))return Xr.plant(ga).value();for(var Ma=0,$a=Ve?ge[Ma].apply(this,da):ga;++Ma<Ve;)$a=ge[Ma].call(this,$a);return $a}})}function mp(le,ge,Ve,xt,Kt,mr,Xr,an,wn,da){var ga=ge&w,Ma=ge&s,$a=ge&p,Mi=ge&(g|b),Vi=ge&T,mo=$a?e:Ic(le);function Hi(){for(var So=arguments.length,zo=Et(So),Vc=So;Vc--;)zo[Vc]=arguments[Vc];if(Mi)var nc=Bf(Hi),Hc=ol(zo,nc);if(xt&&(zo=iv(zo,xt,Kt,Mi)),mr&&(zo=fd(zo,mr,Xr,Mi)),So-=Hc,Mi&&So<da){var Ol=ll(zo,nc);return uv(le,ge,mp,Hi.placeholder,Ve,zo,Ol,an,wn,da-So)}var Kf=Ma?Ve:this,Jh=$a?Kf[le]:le;return So=zo.length,an?zo=wp(zo,an):Vi&&So>1&&zo.reverse(),ga&&wn<So&&(zo.length=wn),this&&this!==Tr&&this instanceof Hi&&(Jh=mo||Ic(Jh)),Jh.apply(Kf,zo)}return Hi}function hh(le,ge){return function(Ve,xt){return fc(Ve,le,ge(xt),{})}}function Nh(le,ge){return function(Ve,xt){var Kt;if(Ve===e&&xt===e)return ge;if(Ve!==e&&(Kt=Ve),xt!==e){if(Kt===e)return xt;typeof Ve=="string"||typeof xt=="string"?(Ve=vu(Ve),xt=vu(xt)):(Ve=tf(Ve),xt=tf(xt)),Kt=le(Ve,xt)}return Kt}}function gp(le){return _s(function(ge){return ge=Po(ge,ks(_i())),Qi(function(Ve){var xt=this;return le(ge,function(Kt){return qo(Kt,xt,Ve)})})})}function Bh(le,ge){ge=ge===e?" ":vu(ge);var Ve=ge.length;if(Ve<2)return Ve?oh(ge,le):ge;var xt=oh(ge,Ni(le/Is(ge)));return es(ge)?nf(ul(xt),0,le).join(""):xt.slice(0,le)}function lv(le,ge,Ve,xt){var Kt=ge&s,mr=Ic(le);function Xr(){for(var an=-1,wn=arguments.length,da=-1,ga=xt.length,Ma=Et(ga+wn),$a=this&&this!==Tr&&this instanceof Xr?mr:le;++da<ga;)Ma[da]=xt[da];for(;wn--;)Ma[da++]=arguments[++an];return qo($a,Kt?Ve:this,Ma)}return Xr}function yp(le){return function(ge,Ve,xt){return xt&&typeof xt!="number"&&Vl(ge,Ve,xt)&&(Ve=xt=e),ge=rc(ge),Ve===e?(Ve=ge,ge=0):Ve=rc(Ve),xt=xt===e?ge<Ve?1:-1:rc(xt),b0(ge,Ve,xt,le)}}function Xs(le){return function(ge,Ve){return typeof ge=="string"&&typeof Ve=="string"||(ge=xc(ge),Ve=xc(Ve)),le(ge,Ve)}}function uv(le,ge,Ve,xt,Kt,mr,Xr,an,wn,da){var ga=ge&g,Ma=ga?Xr:e,$a=ga?e:Xr,Mi=ga?mr:e,Vi=ga?e:mr;ge|=ga?m:x,ge&=~(ga?x:m),ge&d||(ge&=~(s|p));var mo=[le,ge,Kt,Mi,Ma,Vi,$a,an,wn,da],Hi=Ve.apply(e,mo);return uf(le)&&Wh(Hi,mo),Hi.placeholder=xt,mh(Hi,le,ge)}function Nf(le){var ge=xr[le];return function(Ve,xt){if(Ve=xc(Ve),xt=xt==null?0:hi(fi(xt),292),xt&&Ss(Ve)){var Kt=(jo(Ve)+"e").split("e"),mr=ge(Kt[0]+"e"+(+Kt[1]+xt));return Kt=(jo(mr)+"e").split("e"),+(Kt[0]+"e"+(+Kt[1]-xt))}return ge(Ve)}}var cv=Oa&&1/pu(new Oa([,-0]))[1]==D?function(le){return new Oa(le)}:dy;function fv(le){return function(ge){var Ve=Ul(ge);return Ve==oe?Ec(ge):Ve==W?Uo(ge):$c(ge,le(ge))}}function $u(le,ge,Ve,xt,Kt,mr,Xr,an){var wn=ge&p;if(!wn&&typeof le!="function")throw new bn(a);var da=xt?xt.length:0;if(da||(ge&=~(m|x),xt=Kt=e),Xr=Xr===e?Xr:Xa(fi(Xr),0),an=an===e?an:fi(an),da-=Kt?Kt.length:0,ge&x){var ga=xt,Ma=Kt;xt=Kt=e}var $a=wn?e:of(le),Mi=[le,ge,Ve,xt,Kt,ga,Ma,mr,Xr,an];if($a&&Hl(Mi,$a),le=Mi[0],ge=Mi[1],Ve=Mi[2],xt=Mi[3],Kt=Mi[4],an=Mi[9]=Mi[9]===e?wn?0:le.length:Xa(Mi[9]-da,0),!an&&ge&(g|b)&&(ge&=~(g|b)),!ge||ge==s)var Vi=fh(le,ge,Ve);else ge==g||ge==b?Vi=Bu(le,ge,an):(ge==m||ge==(s|m))&&!Kt.length?Vi=lv(le,ge,Ve,xt):Vi=mp.apply(e,Mi);var mo=$a?rv:Wh;return mh(mo(Vi,Mi),le,ge)}function Uh(le,ge,Ve,xt){return le===e||ko(le,Hn[Ve])&&!Un.call(xt,Ve)?ge:le}function hv(le,ge,Ve,xt,Kt,mr){return ss(le)&&ss(ge)&&(mr.set(ge,le),ql(le,ge,e,hv,mr),mr.delete(ge)),le}function xp(le){return vf(le)?e:le}function ph(le,ge,Ve,xt,Kt,mr){var Xr=Ve&h,an=le.length,wn=ge.length;if(an!=wn&&!(Xr&&wn>an))return!1;var da=mr.get(le),ga=mr.get(ge);if(da&&ga)return da==ge&&ga==le;var Ma=-1,$a=!0,Mi=Ve&i?new Oe:e;for(mr.set(le,ge),mr.set(ge,le);++Ma<an;){var Vi=le[Ma],mo=ge[Ma];if(xt)var Hi=Xr?xt(mo,Vi,Ma,ge,le,mr):xt(Vi,mo,Ma,le,ge,mr);if(Hi!==e){if(Hi)continue;$a=!1;break}if(Mi){if(!lu(ge,function(So,zo){if(!Ml(Mi,zo)&&(Vi===So||Kt(Vi,So,Ve,xt,mr)))return Mi.push(zo)})){$a=!1;break}}else if(!(Vi===mo||Kt(Vi,mo,Ve,xt,mr))){$a=!1;break}}return mr.delete(le),mr.delete(ge),$a}function pv(le,ge,Ve,xt,Kt,mr,Xr){switch(Ve){case ze:if(le.byteLength!=ge.byteLength||le.byteOffset!=ge.byteOffset)return!1;le=le.buffer,ge=ge.buffer;case Ge:return!(le.byteLength!=ge.byteLength||!mr(new ui(le),new ui(ge)));case te:case $:case re:return ko(+le,+ge);case se:return le.name==ge.name&&le.message==ge.message;case pe:case ue:return le==ge+"";case oe:var an=Ec;case W:var wn=xt&h;if(an||(an=pu),le.size!=ge.size&&!wn)return!1;var da=Xr.get(le);if(da)return da==ge;xt|=i,Xr.set(le,ge);var ga=ph(an(le),an(ge),xt,Kt,mr,Xr);return Xr.delete(le),ga;case me:if(ps)return ps.call(le)==ps.call(ge)}return!1}function dd(le,ge,Ve,xt,Kt,mr){var Xr=Ve&h,an=Vh(le),wn=an.length,da=Vh(ge),ga=da.length;if(wn!=ga&&!Xr)return!1;for(var Ma=wn;Ma--;){var $a=an[Ma];if(!(Xr?$a in ge:Un.call(ge,$a)))return!1}var Mi=mr.get(le),Vi=mr.get(ge);if(Mi&&Vi)return Mi==ge&&Vi==le;var mo=!0;mr.set(le,ge),mr.set(ge,le);for(var Hi=Xr;++Ma<wn;){$a=an[Ma];var So=le[$a],zo=ge[$a];if(xt)var Vc=Xr?xt(zo,So,$a,ge,le,mr):xt(So,zo,$a,le,ge,mr);if(!(Vc===e?So===zo||Kt(So,zo,Ve,xt,mr):Vc)){mo=!1;break}Hi||(Hi=$a=="constructor")}if(mo&&!Hi){var nc=le.constructor,Hc=ge.constructor;nc!=Hc&&"constructor"in le&&"constructor"in ge&&!(typeof nc=="function"&&nc instanceof nc&&typeof Hc=="function"&&Hc instanceof Hc)&&(mo=!1)}return mr.delete(le),mr.delete(ge),mo}function _s(le){return ff(vh(le,e,Gf),le+"")}function Vh(le){return du(le,Us,vd)}function bp(le){return du(le,zl,vv)}var of=aa?function(le){return aa.get(le)}:dy;function po(le){for(var ge=le.name+"",Ve=Ua[ge],xt=Un.call(Ua,ge)?Ve.length:0;xt--;){var Kt=Ve[xt],mr=Kt.func;if(mr==null||mr==le)return Kt.name}return ge}function Bf(le){var ge=Un.call(or,"placeholder")?or:le;return ge.placeholder}function _i(){var le=or.iteratee||hy;return le=le===hy?Pl:le,arguments.length?le(arguments[0],arguments[1]):le}function zc(le,ge){var Ve=le.__data__;return _p(ge)?Ve[typeof ge=="string"?"string":"hash"]:Ve.map}function Uf(le){for(var ge=Us(le),Ve=ge.length;Ve--;){var xt=ge[Ve],Kt=le[xt];ge[Ve]=[xt,Kt,Zs(Kt)]}return ge}function Oc(le,ge){var Ve=hu(le,ge);return vs(Ve)?Ve:e}function dv(le){var ge=Un.call(le,_o),Ve=le[_o];try{le[_o]=e;var xt=!0}catch{}var Kt=_a.call(le);return xt&&(ge?le[_o]=Ve:delete le[_o]),Kt}var vd=ts?function(le){return le==null?[]:(le=Ar(le),su(ts(le),function(ge){return Xn.call(le,ge)}))}:vy,vv=ts?function(le){for(var ge=[];le;)al(ge,vd(le)),le=vi(le);return ge}:vy,Ul=xs;(si&&Ul(new si(new ArrayBuffer(1)))!=ze||eo&&Ul(new eo)!=oe||xo&&Ul(xo.resolve())!=fe||Oa&&Ul(new Oa)!=W||Da&&Ul(new Da)!=Me)&&(Ul=function(le){var ge=xs(le),Ve=ge==ae?le.constructor:e,xt=Ve?hf(Ve):"";if(xt)switch(xt){case mi:return ze;case pi:return oe;case wo:return fe;case Xo:return W;case ji:return Me}return ge});function Uu(le,ge,Ve){for(var xt=-1,Kt=Ve.length;++xt<Kt;){var mr=Ve[xt],Xr=mr.size;switch(mr.type){case"drop":le+=Xr;break;case"dropRight":ge-=Xr;break;case"take":ge=hi(ge,le+Xr);break;case"takeRight":le=Xa(le,ge-Xr);break}}return{start:le,end:ge}}function mv(le){var ge=le.match(Ye);return ge?ge[1].split(ft):[]}function md(le,ge,Ve){ge=vc(ge,le);for(var xt=-1,Kt=ge.length,mr=!1;++xt<Kt;){var Xr=qu(ge[xt]);if(!(mr=le!=null&&Ve(le,Xr)))break;le=le[Xr]}return mr||++xt!=Kt?mr:(Kt=le==null?0:le.length,!!Kt&&Nc(Kt)&&Fc(Xr,Kt)&&(Fi(le)||Ho(le)))}function sf(le){var ge=le.length,Ve=new le.constructor(ge);return ge&&typeof le[0]=="string"&&Un.call(le,"index")&&(Ve.index=le.index,Ve.input=le.input),Ve}function Vf(le){return typeof le.constructor=="function"&&!mc(le)?To(vi(le)):{}}function lf(le,ge,Ve){var xt=le.constructor;switch(ge){case Ge:return Of(le);case te:case $:return new xt(+le);case ze:return nv(le,Ve);case Qe:case tt:case Ce:case Ae:case Be:case qe:case Tt:case At:case Ne:return Nu(le,Ve);case oe:return new xt;case re:case ue:return new xt(le);case pe:return af(le);case W:return new xt;case me:return uh(le)}}function gv(le,ge){var Ve=ge.length;if(!Ve)return le;var xt=Ve-1;return ge[xt]=(Ve>1?"& ":"")+ge[xt],ge=ge.join(Ve>2?", ":" "),le.replace(He,`{
/* [wrapped with `+ge+`] */
`)}function A0(le){return Fi(le)||Ho(le)||!!(Ti&&le&&le[Ti])}function Fc(le,ge){var Ve=typeof le;return ge=ge==null?F:ge,!!ge&&(Ve=="number"||Ve!="symbol"&&Fe.test(le))&&le>-1&&le%1==0&&le<ge}function Vl(le,ge,Ve){if(!ss(Ve))return!1;var xt=typeof ge;return(xt=="number"?Il(Ve)&&Fc(ge,Ve.length):xt=="string"&&ge in Ve)?ko(Ve[ge],le):!1}function Hh(le,ge){if(Fi(le))return!1;var Ve=typeof le;return Ve=="number"||Ve=="symbol"||Ve=="boolean"||le==null||nu(le)?!0:Te.test(le)||!lt.test(le)||ge!=null&&le in Ar(ge)}function _p(le){var ge=typeof le;return ge=="string"||ge=="number"||ge=="symbol"||ge=="boolean"?le!=="__proto__":le===null}function uf(le){var ge=po(le),Ve=or[ge];if(typeof Ve!="function"||!(ge in Si.prototype))return!1;if(le===Ve)return!0;var xt=of(Ve);return!!xt&&le===xt[0]}function jh(le){return!!ai&&ai in le}var mu=ra?tc:my;function mc(le){var ge=le&&le.constructor,Ve=typeof ge=="function"&&ge.prototype||Hn;return le===Ve}function Zs(le){return le===le&&!ss(le)}function dh(le,ge){return function(Ve){return Ve==null?!1:Ve[le]===ge&&(ge!==e||le in Ar(Ve))}}function Hf(le){var ge=us(le,function(xt){return Ve.size===t&&Ve.clear(),xt}),Ve=ge.cache;return ge}function Hl(le,ge){var Ve=le[1],xt=ge[1],Kt=Ve|xt,mr=Kt<(s|p|w),Xr=xt==w&&Ve==g||xt==w&&Ve==y&&le[7].length<=ge[8]||xt==(w|y)&&ge[7].length<=ge[8]&&Ve==g;if(!(mr||Xr))return le;xt&s&&(le[2]=ge[2],Kt|=Ve&s?0:d);var an=ge[3];if(an){var wn=le[3];le[3]=wn?iv(wn,an,ge[4]):an,le[4]=wn?ll(le[3],f):ge[4]}return an=ge[5],an&&(wn=le[5],le[5]=wn?fd(wn,an,ge[6]):an,le[6]=wn?ll(le[5],f):ge[6]),an=ge[7],an&&(le[7]=an),xt&w&&(le[8]=le[8]==null?ge[8]:hi(le[8],ge[8])),le[9]==null&&(le[9]=ge[9]),le[0]=ge[0],le[1]=Kt,le}function Gh(le){var ge=[];if(le!=null)for(var Ve in Ar(le))ge.push(Ve);return ge}function gd(le){return _a.call(le)}function vh(le,ge,Ve){return ge=Xa(ge===e?le.length-1:ge,0),function(){for(var xt=arguments,Kt=-1,mr=Xa(xt.length-ge,0),Xr=Et(mr);++Kt<mr;)Xr[Kt]=xt[ge+Kt];Kt=-1;for(var an=Et(ge+1);++Kt<ge;)an[Kt]=xt[Kt];return an[ge]=Ve(Xr),qo(le,this,an)}}function ws(le,ge){return ge.length<2?le:Mo(le,Pu(ge,0,-1))}function wp(le,ge){for(var Ve=le.length,xt=hi(ge.length,Ve),Kt=Bl(le);xt--;){var mr=ge[xt];le[xt]=Fc(mr,Ve)?Kt[mr]:e}return le}function Qu(le,ge){if(!(ge==="constructor"&&typeof le[ge]=="function")&&ge!="__proto__")return le[ge]}var Wh=gh(rv),cf=Gi||function(le,ge){return Tr.setTimeout(le,ge)},ff=gh(_0);function mh(le,ge,Ve){var xt=ge+"";return ff(le,gv(xt,xv(mv(xt),Ve)))}function gh(le){var ge=0,Ve=0;return function(){var xt=Oo(),Kt=I-(xt-Ve);if(Ve=xt,Kt>0){if(++ge>=L)return arguments[0]}else ge=0;return le.apply(e,arguments)}}function yh(le,ge){var Ve=-1,xt=le.length,Kt=xt-1;for(ge=ge===e?xt:ge;++Ve<ge;){var mr=Dh(Ve,Kt),Xr=le[mr];le[mr]=le[Ve],le[Ve]=Xr}return le.length=ge,le}var yv=Hf(function(le){var ge=[];return le.charCodeAt(0)===46&&ge.push(""),le.replace(Le,function(Ve,xt,Kt,mr){ge.push(Kt?mr.replace(ot,"$1"):xt||Ve)}),ge});function qu(le){if(typeof le=="string"||nu(le))return le;var ge=le+"";return ge=="0"&&1/le==-D?"-0":ge}function hf(le){if(le!=null){try{return qn.call(le)}catch{}try{return le+""}catch{}}return""}function xv(le,ge){return Ms(B,function(Ve){var xt="_."+Ve[0];ge&Ve[1]&&!Sc(le,xt)&&le.push(xt)}),le.sort()}function Yh(le){if(le instanceof Si)return le.clone();var ge=new zi(le.__wrapped__,le.__chain__);return ge.__actions__=Bl(le.__actions__),ge.__index__=le.__index__,ge.__values__=le.__values__,ge}function yd(le,ge,Ve){(Ve?Vl(le,ge,Ve):ge===e)?ge=1:ge=Xa(fi(ge),0);var xt=le==null?0:le.length;if(!xt||ge<1)return[];for(var Kt=0,mr=0,Xr=Et(Ni(xt/ge));Kt<xt;)Xr[mr++]=Pu(le,Kt,Kt+=ge);return Xr}function bv(le){for(var ge=-1,Ve=le==null?0:le.length,xt=0,Kt=[];++ge<Ve;){var mr=le[ge];mr&&(Kt[xt++]=mr)}return Kt}function xd(){var le=arguments.length;if(!le)return[];for(var ge=Et(le-1),Ve=arguments[0],xt=le;xt--;)ge[xt-1]=arguments[xt];return al(Fi(Ve)?Bl(Ve):[Ve],Ha(ge,1))}var Tp=Qi(function(le,ge){return cs(le)?Va(le,Ha(ge,1,cs,!0)):[]}),xh=Qi(function(le,ge){var Ve=wt(ge);return cs(Ve)&&(Ve=e),cs(le)?Va(le,Ha(ge,1,cs,!0),_i(Ve,2)):[]}),pf=Qi(function(le,ge){var Ve=wt(ge);return cs(Ve)&&(Ve=e),cs(le)?Va(le,Ha(ge,1,cs,!0),e,Ve):[]});function jf(le,ge,Ve){var xt=le==null?0:le.length;return xt?(ge=Ve||ge===e?1:fi(ge),Pu(le,ge<0?0:ge,xt)):[]}function bh(le,ge,Ve){var xt=le==null?0:le.length;return xt?(ge=Ve||ge===e?1:fi(ge),ge=xt-ge,Pu(le,0,ge<0?0:ge)):[]}function Ap(le,ge){return le&&le.length?rf(le,_i(ge,3),!0,!0):[]}function _h(le,ge){return le&&le.length?rf(le,_i(ge,3),!0):[]}function _v(le,ge,Ve,xt){var Kt=le==null?0:le.length;return Kt?(Ve&&typeof Ve!="number"&&Vl(le,ge,Ve)&&(Ve=0,xt=Kt),Li(le,ge,Ve,xt)):[]}function wv(le,ge,Ve){var xt=le==null?0:le.length;if(!xt)return-1;var Kt=Ve==null?0:fi(Ve);return Kt<0&&(Kt=Xa(xt+Kt,0)),ku(le,_i(ge,3),Kt)}function Tv(le,ge,Ve){var xt=le==null?0:le.length;if(!xt)return-1;var Kt=xt-1;return Ve!==e&&(Kt=fi(Ve),Kt=Ve<0?Xa(xt+Kt,0):hi(Kt,xt-1)),ku(le,_i(ge,3),Kt,!0)}function Gf(le){var ge=le==null?0:le.length;return ge?Ha(le,1):[]}function Y(le){var ge=le==null?0:le.length;return ge?Ha(le,D):[]}function he(le,ge){var Ve=le==null?0:le.length;return Ve?(ge=ge===e?1:fi(ge),Ha(le,ge)):[]}function ye(le){for(var ge=-1,Ve=le==null?0:le.length,xt={};++ge<Ve;){var Kt=le[ge];xt[Kt[0]]=Kt[1]}return xt}function _e(le){return le&&le.length?le[0]:e}function Ee(le,ge,Ve){var xt=le==null?0:le.length;if(!xt)return-1;var Kt=Ve==null?0:fi(Ve);return Kt<0&&(Kt=Xa(xt+Kt,0)),pl(le,ge,Kt)}function Re(le){var ge=le==null?0:le.length;return ge?Pu(le,0,-1):[]}var rt=Qi(function(le){var ge=Po(le,vp);return ge.length&&ge[0]===le[0]?cc(ge):[]}),Ke=Qi(function(le){var ge=wt(le),Ve=Po(le,vp);return ge===wt(Ve)?ge=e:Ve.pop(),Ve.length&&Ve[0]===le[0]?cc(Ve,_i(ge,2)):[]}),at=Qi(function(le){var ge=wt(le),Ve=Po(le,vp);return ge=typeof ge=="function"?ge:e,ge&&Ve.pop(),Ve.length&&Ve[0]===le[0]?cc(Ve,e,ge):[]});function mt(le,ge){return le==null?"":Ws.call(le,ge)}function wt(le){var ge=le==null?0:le.length;return ge?le[ge-1]:e}function Vt(le,ge,Ve){var xt=le==null?0:le.length;if(!xt)return-1;var Kt=xt;return Ve!==e&&(Kt=fi(Ve),Kt=Kt<0?Xa(xt+Kt,0):hi(Kt,xt-1)),ge===ge?uc(le,ge,Kt):ku(le,Ou,Kt,!0)}function Yt(le,ge){return le&&le.length?os(le,fi(ge)):e}var cr=Qi(Rr);function Rr(le,ge){return le&&le.length&&ge&&ge.length?hp(le,ge):le}function ir(le,ge,Ve){return le&&le.length&&ge&&ge.length?hp(le,ge,_i(Ve,2)):le}function hr(le,ge,Ve){return le&&le.length&&ge&&ge.length?hp(le,ge,e,Ve):le}var vr=_s(function(le,ge){var Ve=le==null?0:le.length,xt=la(le,ge);return sd(le,Po(ge,function(Kt){return Fc(Kt,Ve)?+Kt:Kt}).sort(zh)),xt});function Ir(le,ge){var Ve=[];if(!(le&&le.length))return Ve;var xt=-1,Kt=[],mr=le.length;for(ge=_i(ge,3);++xt<mr;){var Xr=le[xt];ge(Xr,xt,le)&&(Ve.push(Xr),Kt.push(xt))}return sd(le,Kt),Ve}function gr(le){return le==null?le:Ki.call(le)}function kr(le,ge,Ve){var xt=le==null?0:le.length;return xt?(Ve&&typeof Ve!="number"&&Vl(le,ge,Ve)?(ge=0,Ve=xt):(ge=ge==null?0:fi(ge),Ve=Ve===e?xt:fi(Ve)),Pu(le,ge,Ve)):[]}function gn(le,ge){return pp(le,ge)}function dn(le,ge,Ve){return Rf(le,ge,_i(Ve,2))}function fn(le,ge){var Ve=le==null?0:le.length;if(Ve){var xt=pp(le,ge);if(xt<Ve&&ko(le[xt],ge))return xt}return-1}function on(le,ge){return pp(le,ge,!0)}function Yn(le,ge,Ve){return Rf(le,ge,_i(Ve,2),!0)}function $n(le,ge){var Ve=le==null?0:le.length;if(Ve){var xt=pp(le,ge,!0)-1;if(ko(le[xt],ge))return xt}return-1}function Ca(le){return le&&le.length?ld(le):[]}function pa(le,ge){return le&&le.length?ld(le,_i(ge,2)):[]}function ma(le){var ge=le==null?0:le.length;return ge?Pu(le,1,ge):[]}function Sn(le,ge,Ve){return le&&le.length?(ge=Ve||ge===e?1:fi(ge),Pu(le,0,ge<0?0:ge)):[]}function Kn(le,ge,Ve){var xt=le==null?0:le.length;return xt?(ge=Ve||ge===e?1:fi(ge),ge=xt-ge,Pu(le,ge<0?0:ge,xt)):[]}function ua(le,ge){return le&&le.length?rf(le,_i(ge,3),!1,!0):[]}function yn(le,ge){return le&&le.length?rf(le,_i(ge,3)):[]}var Vn=Qi(function(le){return No(Ha(le,1,cs,!0))}),ja=Qi(function(le){var ge=wt(le);return cs(ge)&&(ge=e),No(Ha(le,1,cs,!0),_i(ge,2))}),xi=Qi(function(le){var ge=wt(le);return ge=typeof ge=="function"?ge:e,No(Ha(le,1,cs,!0),e,ge)});function Pi(le){return le&&le.length?No(le):[]}function vo(le,ge){return le&&le.length?No(le,_i(ge,2)):[]}function Ro(le,ge){return ge=typeof ge=="function"?ge:e,le&&le.length?No(le,e,ge):[]}function Ks(le){if(!(le&&le.length))return[];var ge=0;return le=su(le,function(Ve){if(cs(Ve))return ge=Xa(Ve.length,ge),!0}),Gs(ge,function(Ve){return Po(le,Zl(Ve))})}function Ls(le,ge){if(!(le&&le.length))return[];var Ve=Ks(le);return ge==null?Ve:Po(Ve,function(xt){return qo(ge,e,xt)})}var Ps=Qi(function(le,ge){return cs(le)?Va(le,ge):[]}),tu=Qi(function(le){return Pc(su(le,cs))}),ro=Qi(function(le){var ge=wt(le);return cs(ge)&&(ge=e),Pc(su(le,cs),_i(ge,2))}),_l=Qi(function(le){var ge=wt(le);return ge=typeof ge=="function"?ge:e,Pc(su(le,cs),e,ge)}),ru=Qi(Ks);function Mp(le,ge){return Ih(le||[],ge||[],cn)}function gu(le,ge){return Ih(le||[],ge||[],Rh)}var Js=Qi(function(le){var ge=le.length,Ve=ge>1?le[ge-1]:e;return Ve=typeof Ve=="function"?(le.pop(),Ve):e,Ls(le,Ve)});function wl(le){var ge=or(le);return ge.__chain__=!0,ge}function Tl(le,ge){return ge(le),le}function jl(le,ge){return ge(le)}var Wf=_s(function(le){var ge=le.length,Ve=ge?le[0]:0,xt=this.__wrapped__,Kt=function(mr){return la(mr,le)};return ge>1||this.__actions__.length||!(xt instanceof Si)||!Fc(Ve)?this.thru(Kt):(xt=xt.slice(Ve,+Ve+(ge?1:0)),xt.__actions__.push({func:jl,args:[Kt],thisArg:e}),new zi(xt,this.__chain__).thru(function(mr){return ge&&!mr.length&&mr.push(e),mr}))});function Yf(){return wl(this)}function Zo(){return new zi(this.value(),this.__chain__)}function ec(){this.__values__===e&&(this.__values__=Hm(this.value()));var le=this.__index__>=this.__values__.length,ge=le?e:this.__values__[this.__index__++];return{done:le,value:ge}}function bd(){return this}function _(le){for(var ge,Ve=this;Ve instanceof co;){var xt=Yh(Ve);xt.__index__=0,xt.__values__=e,ge?Kt.__wrapped__=xt:ge=xt;var Kt=xt;Ve=Ve.__wrapped__}return Kt.__wrapped__=le,ge}function O(){var le=this.__wrapped__;if(le instanceof Si){var ge=le;return this.__actions__.length&&(ge=new Si(this)),ge=ge.reverse(),ge.__actions__.push({func:jl,args:[gr],thisArg:e}),new zi(ge,this.__chain__)}return this.thru(gr)}function Z(){return lh(this.__wrapped__,this.__actions__)}var ce=Ff(function(le,ge,Ve){Un.call(le,Ve)?++le[Ve]:ha(le,Ve,1)});function xe(le,ge,Ve){var xt=Fi(le)?Au:ci;return Ve&&Vl(le,ge,Ve)&&(ge=e),xt(le,_i(ge,3))}function we(le,ge){var Ve=Fi(le)?su:ni;return Ve(le,_i(ge,3))}var De=Fh(wv),Ze=Fh(Tv);function pt(le,ge){return Ha(Br(le,ge),1)}function St(le,ge){return Ha(Br(le,ge),D)}function Ot(le,ge,Ve){return Ve=Ve===e?1:fi(Ve),Ha(Br(le,ge),Ve)}function Ht(le,ge){var Ve=Fi(le)?Ms:gi;return Ve(le,_i(ge,3))}function Qt(le,ge){var Ve=Fi(le)?Zu:Ri;return Ve(le,_i(ge,3))}var lr=Ff(function(le,ge,Ve){Un.call(le,Ve)?le[Ve].push(ge):ha(le,Ve,[ge])});function Mr(le,ge,Ve,xt){le=Il(le)?le:xf(le),Ve=Ve&&!xt?fi(Ve):0;var Kt=le.length;return Ve<0&&(Ve=Xa(Kt+Ve,0)),mf(le)?Ve<=Kt&&le.indexOf(ge,Ve)>-1:!!Kt&&pl(le,ge,Ve)>-1}var Er=Qi(function(le,ge,Ve){var xt=-1,Kt=typeof ge=="function",mr=Il(le)?Et(le.length):[];return gi(le,function(Xr){mr[++xt]=Kt?qo(ge,Xr,Ve):Ll(Xr,ge,Ve)}),mr}),Kr=Ff(function(le,ge,Ve){ha(le,Ve,ge)});function Br(le,ge){var Ve=Fi(le)?Po:Lh;return Ve(le,_i(ge,3))}function sn(le,ge,Ve,xt){return le==null?[]:(Fi(ge)||(ge=ge==null?[]:[ge]),Ve=xt?e:Ve,Fi(Ve)||(Ve=Ve==null?[]:[Ve]),qd(le,ge,Ve))}var vn=Ff(function(le,ge,Ve){le[Ve?0:1].push(ge)},function(){return[[],[]]});function Rn(le,ge,Ve){var xt=Fi(le)?go:lc,Kt=arguments.length<3;return xt(le,_i(ge,4),Ve,Kt,gi)}function zn(le,ge,Ve){var xt=Fi(le)?ah:lc,Kt=arguments.length<3;return xt(le,_i(ge,4),Ve,Kt,Ri)}function Zn(le,ge){var Ve=Fi(le)?su:ni;return Ve(le,Io(_i(ge,3)))}function xa(le){var ge=Fi(le)?jr:dc;return ge(le)}function La(le,ge,Ve){(Ve?Vl(le,ge,Ve):ge===e)?ge=1:ge=fi(ge);var xt=Fi(le)?Sr:Df;return xt(le,ge)}function Ka(le){var ge=Fi(le)?Ur:w0;return ge(le)}function Ba(le){if(le==null)return 0;if(Il(le))return mf(le)?Is(le):le.length;var ge=Ul(le);return ge==oe||ge==W?le.size:Ju(le).length}function ei(le,ge,Ve){var xt=Fi(le)?lu:T0;return Ve&&Vl(le,ge,Ve)&&(ge=e),xt(le,_i(ge,3))}var za=Qi(function(le,ge){if(le==null)return[];var Ve=ge.length;return Ve>1&&Vl(le,ge[0],ge[1])?ge=[]:Ve>2&&Vl(ge[0],ge[1],ge[2])&&(ge=[ge[0]]),qd(le,Ha(ge,1),[])}),Ii=zs||function(){return Tr.Date.now()};function bi(le,ge){if(typeof ge!="function")throw new bn(a);return le=fi(le),function(){if(--le<1)return ge.apply(this,arguments)}}function Ga(le,ge,Ve){return ge=Ve?e:ge,ge=le&&ge==null?le.length:ge,$u(le,w,e,e,e,e,ge)}function Wi(le,ge){var Ve;if(typeof ge!="function")throw new bn(a);return le=fi(le),function(){return--le>0&&(Ve=ge.apply(this,arguments)),le<=1&&(ge=e),Ve}}var Ei=Qi(function(le,ge,Ve){var xt=s;if(Ve.length){var Kt=ll(Ve,Bf(Ei));xt|=m}return $u(le,xt,ge,Ve,Kt)}),no=Qi(function(le,ge,Ve){var xt=s|p;if(Ve.length){var Kt=ll(Ve,Bf(no));xt|=m}return $u(ge,xt,le,Ve,Kt)});function Ja(le,ge,Ve){ge=Ve?e:ge;var xt=$u(le,g,e,e,e,e,e,ge);return xt.placeholder=Ja.placeholder,xt}function ho(le,ge,Ve){ge=Ve?e:ge;var xt=$u(le,b,e,e,e,e,e,ge);return xt.placeholder=ho.placeholder,xt}function Vo(le,ge,Ve){var xt,Kt,mr,Xr,an,wn,da=0,ga=!1,Ma=!1,$a=!0;if(typeof le!="function")throw new bn(a);ge=xc(ge)||0,ss(Ve)&&(ga=!!Ve.leading,Ma="maxWait"in Ve,mr=Ma?Xa(xc(Ve.maxWait)||0,ge):mr,$a="trailing"in Ve?!!Ve.trailing:$a);function Mi(Ol){var Kf=xt,Jh=Kt;return xt=Kt=e,da=Ol,Xr=le.apply(Jh,Kf),Xr}function Vi(Ol){return da=Ol,an=cf(So,ge),ga?Mi(Ol):Xr}function mo(Ol){var Kf=Ol-wn,Jh=Ol-da,W2=ge-Kf;return Ma?hi(W2,mr-Jh):W2}function Hi(Ol){var Kf=Ol-wn,Jh=Ol-da;return wn===e||Kf>=ge||Kf<0||Ma&&Jh>=mr}function So(){var Ol=Ii();if(Hi(Ol))return zo(Ol);an=cf(So,mo(Ol))}function zo(Ol){return an=e,$a&&xt?Mi(Ol):(xt=Kt=e,Xr)}function Vc(){an!==e&&zf(an),da=0,xt=wn=Kt=an=e}function nc(){return an===e?Xr:zo(Ii())}function Hc(){var Ol=Ii(),Kf=Hi(Ol);if(xt=arguments,Kt=this,wn=Ol,Kf){if(an===e)return Vi(wn);if(Ma)return zf(an),an=cf(So,ge),Mi(wn)}return an===e&&(an=cf(So,ge)),Xr}return Hc.cancel=Vc,Hc.flush=nc,Hc}var $s=Qi(function(le,ge){return Oi(le,1,ge)}),Qs=Qi(function(le,ge,Ve){return Oi(le,xc(ge)||0,Ve)});function Ko(le){return $u(le,T)}function us(le,ge){if(typeof le!="function"||ge!=null&&typeof ge!="function")throw new bn(a);var Ve=function(){var xt=arguments,Kt=ge?ge.apply(this,xt):xt[0],mr=Ve.cache;if(mr.has(Kt))return mr.get(Kt);var Xr=le.apply(this,xt);return Ve.cache=mr.set(Kt,Xr)||mr,Xr};return Ve.cache=new(us.Cache||Cl),Ve}us.Cache=Cl;function Io(le){if(typeof le!="function")throw new bn(a);return function(){var ge=arguments;switch(ge.length){case 0:return!le.call(this);case 1:return!le.call(this,ge[0]);case 2:return!le.call(this,ge[0],ge[1]);case 3:return!le.call(this,ge[0],ge[1],ge[2])}return!le.apply(this,ge)}}function Os(le){return Wi(2,le)}var Gl=ud(function(le,ge){ge=ge.length==1&&Fi(ge[0])?Po(ge[0],ks(_i())):Po(Ha(ge,1),ks(_i()));var Ve=ge.length;return Qi(function(xt){for(var Kt=-1,mr=hi(xt.length,Ve);++Kt<mr;)xt[Kt]=ge[Kt].call(this,xt[Kt]);return qo(le,this,xt)})}),Fs=Qi(function(le,ge){var Ve=ll(ge,Bf(Fs));return $u(le,m,e,ge,Ve)}),Wl=Qi(function(le,ge){var Ve=ll(ge,Bf(Wl));return $u(le,x,e,ge,Ve)}),Ns=_s(function(le,ge){return $u(le,y,e,e,e,ge)});function Bs(le,ge){if(typeof le!="function")throw new bn(a);return ge=ge===e?ge:fi(ge),Qi(le,ge)}function Ji(le,ge){if(typeof le!="function")throw new bn(a);return ge=ge==null?0:Xa(fi(ge),0),Qi(function(Ve){var xt=Ve[ge],Kt=nf(Ve,0,ge);return xt&&al(Kt,xt),qo(le,this,Kt)})}function Co(le,ge,Ve){var xt=!0,Kt=!0;if(typeof le!="function")throw new bn(a);return ss(Ve)&&(xt="leading"in Ve?!!Ve.leading:xt,Kt="trailing"in Ve?!!Ve.trailing:Kt),Vo(le,ge,{leading:xt,maxWait:ge,trailing:Kt})}function Jo(le){return Ga(le,1)}function ao(le,ge){return Fs(If(ge),le)}function Ds(){if(!arguments.length)return[];var le=arguments[0];return Fi(le)?le:[le]}function Rl(le){return Ea(le,l)}function qs(le,ge){return ge=typeof ge=="function"?ge:e,Ea(le,l,ge)}function ms(le){return Ea(le,n|l)}function el(le,ge){return ge=typeof ge=="function"?ge:e,Ea(le,n|l,ge)}function $o(le,ge){return ge==null||ti(le,ge,Us(ge))}function ko(le,ge){return le===ge||le!==le&&ge!==ge}var Vu=Xs(Jl),df=Xs(function(le,ge){return le>=ge}),Ho=Lu(function(){return arguments}())?Lu:function(le){return Ts(le)&&Un.call(le,"callee")&&!Xn.call(le,"callee")},Fi=Et.isArray,gc=ri?ks(ri):Lf;function Il(le){return le!=null&&Nc(le.length)&&!tc(le)}function cs(le){return Ts(le)&&Il(le)}function kp(le){return le===!0||le===!1||Ts(le)&&xs(le)==te}var yu=ls||my,Sp=Ai?ks(Ai):hc;function Av(le){return Ts(le)&&le.nodeType===1&&!vf(le)}function Ep(le){if(le==null)return!0;if(Il(le)&&(Fi(le)||typeof le=="string"||typeof le.splice=="function"||yu(le)||Bc(le)||Ho(le)))return!le.length;var ge=Ul(le);if(ge==oe||ge==W)return!le.size;if(mc(le))return!Ju(le).length;for(var Ve in le)if(Un.call(le,Ve))return!1;return!0}function _d(le,ge){return Ql(le,ge)}function Mv(le,ge,Ve){Ve=typeof Ve=="function"?Ve:e;var xt=Ve?Ve(le,ge):e;return xt===e?Ql(le,ge,e,Ve):!!xt}function Cp(le){if(!Ts(le))return!1;var ge=xs(le);return ge==se||ge==ie||typeof le.message=="string"&&typeof le.name=="string"&&!vf(le)}function Xf(le){return typeof le=="number"&&Ss(le)}function tc(le){if(!ss(le))return!1;var ge=xs(le);return ge==Q||ge==H||ge==K||ge==de}function Xh(le){return typeof le=="number"&&le==fi(le)}function Nc(le){return typeof le=="number"&&le>-1&&le%1==0&&le<=F}function ss(le){var ge=typeof le;return le!=null&&(ge=="object"||ge=="function")}function Ts(le){return le!=null&&typeof le=="object"}var wd=Bi?ks(Bi):qc;function Td(le,ge){return le===ge||ef(le,ge,Uf(ge))}function Ad(le,ge,Ve){return Ve=typeof Ve=="function"?Ve:e,ef(le,ge,Uf(ge),Ve)}function kv(le){return Ed(le)&&le!=+le}function Md(le){if(mu(le))throw new ur(r);return vs(le)}function kd(le){return le===null}function Sd(le){return le==null}function Ed(le){return typeof le=="number"||Ts(le)&&xs(le)==re}function vf(le){if(!Ts(le)||xs(le)!=ae)return!1;var ge=vi(le);if(ge===null)return!0;var Ve=Un.call(ge,"constructor")&&ge.constructor;return typeof Ve=="function"&&Ve instanceof Ve&&qn.call(Ve)==Na}var Lp=Qa?ks(Qa):pc;function Pp(le){return Xh(le)&&le>=-F&&le<=F}var Dp=yi?ks(yi):is;function mf(le){return typeof le=="string"||!Fi(le)&&Ts(le)&&xs(le)==ue}function nu(le){return typeof le=="symbol"||Ts(le)&&xs(le)==me}var Bc=As?ks(As):Nl;function M0(le){return le===e}function Um(le){return Ts(le)&&Ul(le)==Me}function k0(le){return Ts(le)&&xs(le)==Pe}var Vm=Xs(Pf),S0=Xs(function(le,ge){return le<=ge});function Hm(le){if(!le)return[];if(Il(le))return mf(le)?ul(le):Bl(le);if(Sa&&le[Sa])return Yo(le[Sa]());var ge=Ul(le),Ve=ge==oe?Ec:ge==W?pu:xf;return Ve(le)}function rc(le){if(!le)return le===0?le:0;if(le=xc(le),le===D||le===-D){var ge=le<0?-1:1;return ge*N}return le===le?le:0}function fi(le){var ge=rc(le),Ve=ge%1;return ge===ge?Ve?ge-Ve:ge:0}function yc(le){return le?wa(fi(le),0,U):0}function xc(le){if(typeof le=="number")return le;if(nu(le))return G;if(ss(le)){var ge=typeof le.valueOf=="function"?le.valueOf():le;le=ss(ge)?ge+"":ge}if(typeof le!="string")return le===0?le:+le;le=cu(le);var Ve=Nt.test(le);return Ve||We.test(le)?tn(le.slice(2),Ve?2:8):It.test(le)?G:+le}function Zf(le){return Dl(le,zl(le))}function E0(le){return le?wa(fi(le),-F,F):le===0?le:0}function jo(le){return le==null?"":vu(le)}var Sv=Dc(function(le,ge){if(mc(ge)||Il(ge)){Dl(ge,Us(ge),le);return}for(var Ve in ge)Un.call(ge,Ve)&&cn(le,Ve,ge[Ve])}),Uc=Dc(function(le,ge){Dl(ge,zl(ge),le)}),Zh=Dc(function(le,ge,Ve,xt){Dl(ge,zl(ge),le,xt)}),Cd=Dc(function(le,ge,Ve,xt){Dl(ge,Us(ge),le,xt)}),Ev=_s(la);function Cv(le,ge){var Ve=To(le);return ge==null?Ve:Dn(Ve,ge)}var C0=Qi(function(le,ge){le=Ar(le);var Ve=-1,xt=ge.length,Kt=xt>2?ge[2]:e;for(Kt&&Vl(ge[0],ge[1],Kt)&&(xt=1);++Ve<xt;)for(var mr=ge[Ve],Xr=zl(mr),an=-1,wn=Xr.length;++an<wn;){var da=Xr[an],ga=le[da];(ga===e||ko(ga,Hn[da])&&!Un.call(le,da))&&(le[da]=mr[da])}return le}),jm=Qi(function(le){return le.push(e,hv),qo(P0,e,le)});function Ld(le,ge){return Mu(le,_i(ge,3),bo)}function Gm(le,ge){return Mu(le,_i(ge,3),Ao)}function Wm(le,ge){return le==null?le:as(le,_i(ge,3),zl)}function Ym(le,ge){return le==null?le:Fo(le,_i(ge,3),zl)}function Xm(le,ge){return le&&bo(le,_i(ge,3))}function Zm(le,ge){return le&&Ao(le,_i(ge,3))}function Hu(le){return le==null?[]:Qo(le,Us(le))}function Lv(le){return le==null?[]:Qo(le,zl(le))}function Pv(le,ge,Ve){var xt=le==null?e:Mo(le,ge);return xt===e?Ve:xt}function gf(le,ge){return le!=null&&md(le,ge,bl)}function L0(le,ge){return le!=null&&md(le,ge,$l)}var Km=hh(function(le,ge,Ve){ge!=null&&typeof ge.toString!="function"&&(ge=_a.call(ge)),le[ge]=Ve},fy(bc)),Kh=hh(function(le,ge,Ve){ge!=null&&typeof ge.toString!="function"&&(ge=_a.call(ge)),Un.call(le,ge)?le[ge].push(Ve):le[ge]=[Ve]},_i),Rp=Qi(Ll);function Us(le){return Il(le)?Dr(le):Ju(le)}function zl(le){return Il(le)?Dr(le,!0):od(le)}function Ip(le,ge){var Ve={};return ge=_i(ge,3),bo(le,function(xt,Kt,mr){ha(Ve,ge(xt,Kt,mr),xt)}),Ve}function Jm(le,ge){var Ve={};return ge=_i(ge,3),bo(le,function(xt,Kt,mr){ha(Ve,Kt,ge(xt,Kt,mr))}),Ve}var $m=Dc(function(le,ge,Ve){ql(le,ge,Ve)}),P0=Dc(function(le,ge,Ve,xt){ql(le,ge,Ve,xt)}),Qm=_s(function(le,ge){var Ve={};if(le==null)return Ve;var xt=!1;ge=Po(ge,function(mr){return mr=vc(mr,le),xt||(xt=mr.length>1),mr}),Dl(le,bp(le),Ve),xt&&(Ve=Ea(Ve,n|o|l,xp));for(var Kt=ge.length;Kt--;)sh(Ve,ge[Kt]);return Ve});function D0(le,ge){return yf(le,Io(_i(ge)))}var R0=_s(function(le,ge){return le==null?{}:ev(le,ge)});function yf(le,ge){if(le==null)return{};var Ve=Po(bp(le),function(xt){return[xt]});return ge=_i(ge),tv(le,Ve,function(xt,Kt){return ge(xt,Kt[0])})}function qm(le,ge,Ve){ge=vc(ge,le);var xt=-1,Kt=ge.length;for(Kt||(Kt=1,le=e);++xt<Kt;){var mr=le==null?e:le[qu(ge[xt])];mr===e&&(xt=Kt,mr=Ve),le=tc(mr)?mr.call(le):mr}return le}function I0(le,ge,Ve){return le==null?le:Rh(le,ge,Ve)}function z0(le,ge,Ve,xt){return xt=typeof xt=="function"?xt:e,le==null?le:Rh(le,ge,Ve,xt)}var O0=fv(Us),Dv=fv(zl);function eg(le,ge,Ve){var xt=Fi(le),Kt=xt||yu(le)||Bc(le);if(ge=_i(ge,4),Ve==null){var mr=le&&le.constructor;Kt?Ve=xt?new mr:[]:ss(le)?Ve=tc(mr)?To(vi(le)):{}:Ve={}}return(Kt?Ms:bo)(le,function(Xr,an,wn){return ge(Ve,Xr,an,wn)}),Ve}function tg(le,ge){return le==null?!0:sh(le,ge)}function F0(le,ge,Ve){return le==null?le:dp(le,ge,If(Ve))}function rg(le,ge,Ve,xt){return xt=typeof xt=="function"?xt:e,le==null?le:dp(le,ge,If(Ve),xt)}function xf(le){return le==null?[]:fu(le,Us(le))}function ng(le){return le==null?[]:fu(le,zl(le))}function Rv(le,ge,Ve){return Ve===e&&(Ve=ge,ge=e),Ve!==e&&(Ve=xc(Ve),Ve=Ve===Ve?Ve:0),ge!==e&&(ge=xc(ge),ge=ge===ge?ge:0),wa(xc(le),ge,Ve)}function ny(le,ge,Ve){return ge=rc(ge),Ve===e?(Ve=ge,ge=0):Ve=rc(Ve),le=xc(le),Cu(le,ge,Ve)}function ag(le,ge,Ve){if(Ve&&typeof Ve!="boolean"&&Vl(le,ge,Ve)&&(ge=Ve=e),Ve===e&&(typeof ge=="boolean"?(Ve=ge,ge=e):typeof le=="boolean"&&(Ve=le,le=e)),le===e&&ge===e?(le=0,ge=1):(le=rc(le),ge===e?(ge=le,le=0):ge=rc(ge)),le>ge){var xt=le;le=ge,ge=xt}if(Ve||le%1||ge%1){var Kt=Eo();return hi(le+Kt*(ge-le+hn("1e-"+((Kt+"").length-1))),ge)}return Dh(le,ge)}var ay=Rc(function(le,ge,Ve){return ge=ge.toLowerCase(),le+(Ve?ig(ge):ge)});function ig(le){return cy(jo(le).toLowerCase())}function og(le){return le=jo(le),le&&le.replace(bt,ml).replace(Pn,"")}function iy(le,ge,Ve){le=jo(le),ge=vu(ge);var xt=le.length;Ve=Ve===e?xt:wa(fi(Ve),0,xt);var Kt=Ve;return Ve-=ge.length,Ve>=0&&le.slice(Ve,Kt)==ge}function oy(le){return le=jo(le),le&&rr.test(le)?le.replace(zt,gs):le}function sy(le){return le=jo(le),le&&et.test(le)?le.replace(Ue,"\\$&"):le}var ly=Rc(function(le,ge,Ve){return le+(Ve?"-":"")+ge.toLowerCase()}),uy=Rc(function(le,ge,Ve){return le+(Ve?" ":"")+ge.toLowerCase()}),bf=hd("toLowerCase");function Iv(le,ge,Ve){le=jo(le),ge=fi(ge);var xt=ge?Is(le):0;if(!ge||xt>=ge)return le;var Kt=(ge-xt)/2;return Bh(yo(Kt),Ve)+le+Bh(Ni(Kt),Ve)}function sg(le,ge,Ve){le=jo(le),ge=fi(ge);var xt=ge?Is(le):0;return ge&&xt<ge?le+Bh(ge-xt,Ve):le}function Pd(le,ge,Ve){le=jo(le),ge=fi(ge);var xt=ge?Is(le):0;return ge&&xt<ge?Bh(ge-xt,Ve)+le:le}function lg(le,ge,Ve){return Ve||ge==null?ge=0:ge&&(ge=+ge),lo(jo(le).replace(ke,""),ge||0)}function mT(le,ge,Ve){return(Ve?Vl(le,ge,Ve):ge===e)?ge=1:ge=fi(ge),oh(jo(le),ge)}function gT(){var le=arguments,ge=jo(le[0]);return le.length<3?ge:ge.replace(le[1],le[2])}var yT=Rc(function(le,ge,Ve){return le+(Ve?"_":"")+ge.toLowerCase()});function xT(le,ge,Ve){return Ve&&typeof Ve!="number"&&Vl(le,ge,Ve)&&(ge=Ve=e),Ve=Ve===e?U:Ve>>>0,Ve?(le=jo(le),le&&(typeof ge=="string"||ge!=null&&!Lp(ge))&&(ge=vu(ge),!ge&&es(le))?nf(ul(le),0,Ve):le.split(ge,Ve)):[]}var bT=Rc(function(le,ge,Ve){return le+(Ve?" ":"")+cy(ge)});function _T(le,ge,Ve){return le=jo(le),Ve=Ve==null?0:wa(fi(Ve),0,le.length),ge=vu(ge),le.slice(Ve,Ve+ge.length)==ge}function wT(le,ge,Ve){var xt=or.templateSettings;Ve&&Vl(le,ge,Ve)&&(ge=e),le=jo(le),ge=Zh({},ge,xt,Uh);var Kt=Zh({},ge.imports,xt.imports,Uh),mr=Us(Kt),Xr=fu(Kt,mr),an,wn,da=0,ga=ge.interpolate||kt,Ma="__p += '",$a=mn((ge.escape||kt).source+"|"+ga.source+"|"+(ga===dt?Je:kt).source+"|"+(ge.evaluate||kt).source+"|$","g"),Mi="//# sourceURL="+(Un.call(ge,"sourceURL")?(ge.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ya+"]")+`
`;le.replace($a,function(Hi,So,zo,Vc,nc,Hc){return zo||(zo=Vc),Ma+=le.slice(da,Hc).replace(_t,Kl),So&&(an=!0,Ma+=`' +
__e(`+So+`) +
'`),nc&&(wn=!0,Ma+=`';
`+nc+`;
__p += '`),zo&&(Ma+=`' +
((__t = (`+zo+`)) == null ? '' : __t) +
'`),da=Hc+Hi.length,Hi}),Ma+=`';
`;var Vi=Un.call(ge,"variable")&&ge.variable;if(!Vi)Ma=`with (obj) {
`+Ma+`
}
`;else if(je.test(Vi))throw new ur(u);Ma=(wn?Ma.replace(ct,""):Ma).replace(Mt,"$1").replace(Wt,"$1;"),Ma="function("+(Vi||"obj")+`) {
`+(Vi?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(an?", __e = _.escape":"")+(wn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ma+`return __p
}`;var mo=j2(function(){return ar(mr,Mi+"return "+Ma).apply(e,Xr)});if(mo.source=Ma,Cp(mo))throw mo;return mo}function TT(le){return jo(le).toLowerCase()}function AT(le){return jo(le).toUpperCase()}function MT(le,ge,Ve){if(le=jo(le),le&&(Ve||ge===e))return cu(le);if(!le||!(ge=vu(ge)))return le;var xt=ul(le),Kt=ul(ge),mr=vl(xt,Kt),Xr=kl(xt,Kt)+1;return nf(xt,mr,Xr).join("")}function kT(le,ge,Ve){if(le=jo(le),le&&(Ve||ge===e))return le.slice(0,Qc(le)+1);if(!le||!(ge=vu(ge)))return le;var xt=ul(le),Kt=kl(xt,ul(ge))+1;return nf(xt,0,Kt).join("")}function ST(le,ge,Ve){if(le=jo(le),le&&(Ve||ge===e))return le.replace(ke,"");if(!le||!(ge=vu(ge)))return le;var xt=ul(le),Kt=vl(xt,ul(ge));return nf(xt,Kt).join("")}function ET(le,ge){var Ve=M,xt=P;if(ss(ge)){var Kt="separator"in ge?ge.separator:Kt;Ve="length"in ge?fi(ge.length):Ve,xt="omission"in ge?vu(ge.omission):xt}le=jo(le);var mr=le.length;if(es(le)){var Xr=ul(le);mr=Xr.length}if(Ve>=mr)return le;var an=Ve-Is(xt);if(an<1)return xt;var wn=Xr?nf(Xr,0,an).join(""):le.slice(0,an);if(Kt===e)return wn+xt;if(Xr&&(an+=wn.length-an),Lp(Kt)){if(le.slice(an).search(Kt)){var da,ga=wn;for(Kt.global||(Kt=mn(Kt.source,jo(st.exec(Kt))+"g")),Kt.lastIndex=0;da=Kt.exec(ga);)var Ma=da.index;wn=wn.slice(0,Ma===e?an:Ma)}}else if(le.indexOf(vu(Kt),an)!=an){var $a=wn.lastIndexOf(Kt);$a>-1&&(wn=wn.slice(0,$a))}return wn+xt}function CT(le){return le=jo(le),le&&$t.test(le)?le.replace(qt,Fu):le}var LT=Rc(function(le,ge,Ve){return le+(Ve?" ":"")+ge.toUpperCase()}),cy=hd("toUpperCase");function H2(le,ge,Ve){return le=jo(le),ge=Ve?e:ge,ge===e?sl(le)?$e(le):Xl(le):le.match(ge)||[]}var j2=Qi(function(le,ge){try{return qo(le,e,ge)}catch(Ve){return Cp(Ve)?Ve:new ur(Ve)}}),PT=_s(function(le,ge){return Ms(ge,function(Ve){Ve=qu(Ve),ha(le,Ve,Ei(le[Ve],le))}),le});function DT(le){var ge=le==null?0:le.length,Ve=_i();return le=ge?Po(le,function(xt){if(typeof xt[1]!="function")throw new bn(a);return[Ve(xt[0]),xt[1]]}):[],Qi(function(xt){for(var Kt=-1;++Kt<ge;){var mr=le[Kt];if(qo(mr[0],this,xt))return qo(mr[1],this,xt)}})}function RT(le){return ii(Ea(le,n))}function fy(le){return function(){return le}}function IT(le,ge){return le==null||le!==le?ge:le}var zT=pd(),OT=pd(!0);function bc(le){return le}function hy(le){return Pl(typeof le=="function"?le:Ea(le,n))}function FT(le){return Lc(Ea(le,n))}function NT(le,ge){return Ph(le,Ea(ge,n))}var BT=Qi(function(le,ge){return function(Ve){return Ll(Ve,le,ge)}}),UT=Qi(function(le,ge){return function(Ve){return Ll(le,Ve,ge)}});function py(le,ge,Ve){var xt=Us(ge),Kt=Qo(ge,xt);Ve==null&&!(ss(ge)&&(Kt.length||!xt.length))&&(Ve=ge,ge=le,le=this,Kt=Qo(ge,Us(ge)));var mr=!(ss(Ve)&&"chain"in Ve)||!!Ve.chain,Xr=tc(le);return Ms(Kt,function(an){var wn=ge[an];le[an]=wn,Xr&&(le.prototype[an]=function(){var da=this.__chain__;if(mr||da){var ga=le(this.__wrapped__),Ma=ga.__actions__=Bl(this.__actions__);return Ma.push({func:wn,args:arguments,thisArg:le}),ga.__chain__=da,ga}return wn.apply(le,al([this.value()],arguments))})}),le}function VT(){return Tr._===this&&(Tr._=wi),this}function dy(){}function HT(le){return le=fi(le),Qi(function(ge){return os(ge,le)})}var jT=gp(Po),GT=gp(Au),WT=gp(lu);function G2(le){return Hh(le)?Zl(qu(le)):x0(le)}function YT(le){return function(ge){return le==null?e:Mo(le,ge)}}var XT=yp(),ZT=yp(!0);function vy(){return[]}function my(){return!1}function KT(){return{}}function JT(){return""}function $T(){return!0}function QT(le,ge){if(le=fi(le),le<1||le>F)return[];var Ve=U,xt=hi(le,U);ge=_i(ge),le-=U;for(var Kt=Gs(xt,ge);++Ve<le;)ge(Ve);return Kt}function qT(le){return Fi(le)?Po(le,qu):nu(le)?[le]:Bl(yv(jo(le)))}function e6(le){var ge=++Fa;return jo(le)+ge}var t6=Nh(function(le,ge){return le+ge},0),r6=Nf("ceil"),n6=Nh(function(le,ge){return le/ge},1),a6=Nf("floor");function i6(le){return le&&le.length?li(le,bc,Jl):e}function o6(le,ge){return le&&le.length?li(le,_i(ge,2),Jl):e}function s6(le){return Su(le,bc)}function l6(le,ge){return Su(le,_i(ge,2))}function u6(le){return le&&le.length?li(le,bc,Pf):e}function c6(le,ge){return le&&le.length?li(le,_i(ge,2),Pf):e}var f6=Nh(function(le,ge){return le*ge},1),h6=Nf("round"),p6=Nh(function(le,ge){return le-ge},0);function d6(le){return le&&le.length?$i(le,bc):0}function v6(le,ge){return le&&le.length?$i(le,_i(ge,2)):0}return or.after=bi,or.ary=Ga,or.assign=Sv,or.assignIn=Uc,or.assignInWith=Zh,or.assignWith=Cd,or.at=Ev,or.before=Wi,or.bind=Ei,or.bindAll=PT,or.bindKey=no,or.castArray=Ds,or.chain=wl,or.chunk=yd,or.compact=bv,or.concat=xd,or.cond=DT,or.conforms=RT,or.constant=fy,or.countBy=ce,or.create=Cv,or.curry=Ja,or.curryRight=ho,or.debounce=Vo,or.defaults=C0,or.defaultsDeep=jm,or.defer=$s,or.delay=Qs,or.difference=Tp,or.differenceBy=xh,or.differenceWith=pf,or.drop=jf,or.dropRight=bh,or.dropRightWhile=Ap,or.dropWhile=_h,or.fill=_v,or.filter=we,or.flatMap=pt,or.flatMapDeep=St,or.flatMapDepth=Ot,or.flatten=Gf,or.flattenDeep=Y,or.flattenDepth=he,or.flip=Ko,or.flow=zT,or.flowRight=OT,or.fromPairs=ye,or.functions=Hu,or.functionsIn=Lv,or.groupBy=lr,or.initial=Re,or.intersection=rt,or.intersectionBy=Ke,or.intersectionWith=at,or.invert=Km,or.invertBy=Kh,or.invokeMap=Er,or.iteratee=hy,or.keyBy=Kr,or.keys=Us,or.keysIn=zl,or.map=Br,or.mapKeys=Ip,or.mapValues=Jm,or.matches=FT,or.matchesProperty=NT,or.memoize=us,or.merge=$m,or.mergeWith=P0,or.method=BT,or.methodOf=UT,or.mixin=py,or.negate=Io,or.nthArg=HT,or.omit=Qm,or.omitBy=D0,or.once=Os,or.orderBy=sn,or.over=jT,or.overArgs=Gl,or.overEvery=GT,or.overSome=WT,or.partial=Fs,or.partialRight=Wl,or.partition=vn,or.pick=R0,or.pickBy=yf,or.property=G2,or.propertyOf=YT,or.pull=cr,or.pullAll=Rr,or.pullAllBy=ir,or.pullAllWith=hr,or.pullAt=vr,or.range=XT,or.rangeRight=ZT,or.rearg=Ns,or.reject=Zn,or.remove=Ir,or.rest=Bs,or.reverse=gr,or.sampleSize=La,or.set=I0,or.setWith=z0,or.shuffle=Ka,or.slice=kr,or.sortBy=za,or.sortedUniq=Ca,or.sortedUniqBy=pa,or.split=xT,or.spread=Ji,or.tail=ma,or.take=Sn,or.takeRight=Kn,or.takeRightWhile=ua,or.takeWhile=yn,or.tap=Tl,or.throttle=Co,or.thru=jl,or.toArray=Hm,or.toPairs=O0,or.toPairsIn=Dv,or.toPath=qT,or.toPlainObject=Zf,or.transform=eg,or.unary=Jo,or.union=Vn,or.unionBy=ja,or.unionWith=xi,or.uniq=Pi,or.uniqBy=vo,or.uniqWith=Ro,or.unset=tg,or.unzip=Ks,or.unzipWith=Ls,or.update=F0,or.updateWith=rg,or.values=xf,or.valuesIn=ng,or.without=Ps,or.words=H2,or.wrap=ao,or.xor=tu,or.xorBy=ro,or.xorWith=_l,or.zip=ru,or.zipObject=Mp,or.zipObjectDeep=gu,or.zipWith=Js,or.entries=O0,or.entriesIn=Dv,or.extend=Uc,or.extendWith=Zh,py(or,or),or.add=t6,or.attempt=j2,or.camelCase=ay,or.capitalize=ig,or.ceil=r6,or.clamp=Rv,or.clone=Rl,or.cloneDeep=ms,or.cloneDeepWith=el,or.cloneWith=qs,or.conformsTo=$o,or.deburr=og,or.defaultTo=IT,or.divide=n6,or.endsWith=iy,or.eq=ko,or.escape=oy,or.escapeRegExp=sy,or.every=xe,or.find=De,or.findIndex=wv,or.findKey=Ld,or.findLast=Ze,or.findLastIndex=Tv,or.findLastKey=Gm,or.floor=a6,or.forEach=Ht,or.forEachRight=Qt,or.forIn=Wm,or.forInRight=Ym,or.forOwn=Xm,or.forOwnRight=Zm,or.get=Pv,or.gt=Vu,or.gte=df,or.has=gf,or.hasIn=L0,or.head=_e,or.identity=bc,or.includes=Mr,or.indexOf=Ee,or.inRange=ny,or.invoke=Rp,or.isArguments=Ho,or.isArray=Fi,or.isArrayBuffer=gc,or.isArrayLike=Il,or.isArrayLikeObject=cs,or.isBoolean=kp,or.isBuffer=yu,or.isDate=Sp,or.isElement=Av,or.isEmpty=Ep,or.isEqual=_d,or.isEqualWith=Mv,or.isError=Cp,or.isFinite=Xf,or.isFunction=tc,or.isInteger=Xh,or.isLength=Nc,or.isMap=wd,or.isMatch=Td,or.isMatchWith=Ad,or.isNaN=kv,or.isNative=Md,or.isNil=Sd,or.isNull=kd,or.isNumber=Ed,or.isObject=ss,or.isObjectLike=Ts,or.isPlainObject=vf,or.isRegExp=Lp,or.isSafeInteger=Pp,or.isSet=Dp,or.isString=mf,or.isSymbol=nu,or.isTypedArray=Bc,or.isUndefined=M0,or.isWeakMap=Um,or.isWeakSet=k0,or.join=mt,or.kebabCase=ly,or.last=wt,or.lastIndexOf=Vt,or.lowerCase=uy,or.lowerFirst=bf,or.lt=Vm,or.lte=S0,or.max=i6,or.maxBy=o6,or.mean=s6,or.meanBy=l6,or.min=u6,or.minBy=c6,or.stubArray=vy,or.stubFalse=my,or.stubObject=KT,or.stubString=JT,or.stubTrue=$T,or.multiply=f6,or.nth=Yt,or.noConflict=VT,or.noop=dy,or.now=Ii,or.pad=Iv,or.padEnd=sg,or.padStart=Pd,or.parseInt=lg,or.random=ag,or.reduce=Rn,or.reduceRight=zn,or.repeat=mT,or.replace=gT,or.result=qm,or.round=h6,or.runInContext=ht,or.sample=xa,or.size=Ba,or.snakeCase=yT,or.some=ei,or.sortedIndex=gn,or.sortedIndexBy=dn,or.sortedIndexOf=fn,or.sortedLastIndex=on,or.sortedLastIndexBy=Yn,or.sortedLastIndexOf=$n,or.startCase=bT,or.startsWith=_T,or.subtract=p6,or.sum=d6,or.sumBy=v6,or.template=wT,or.times=QT,or.toFinite=rc,or.toInteger=fi,or.toLength=yc,or.toLower=TT,or.toNumber=xc,or.toSafeInteger=E0,or.toString=jo,or.toUpper=AT,or.trim=MT,or.trimEnd=kT,or.trimStart=ST,or.truncate=ET,or.unescape=CT,or.uniqueId=e6,or.upperCase=LT,or.upperFirst=cy,or.each=Ht,or.eachRight=Qt,or.first=_e,py(or,function(){var le={};return bo(or,function(ge,Ve){Un.call(or.prototype,Ve)||(le[Ve]=ge)}),le}(),{chain:!1}),or.VERSION=v,Ms(["bind","bindKey","curry","curryRight","partial","partialRight"],function(le){or[le].placeholder=or}),Ms(["drop","take"],function(le,ge){Si.prototype[le]=function(Ve){Ve=Ve===e?1:Xa(fi(Ve),0);var xt=this.__filtered__&&!ge?new Si(this):this.clone();return xt.__filtered__?xt.__takeCount__=hi(Ve,xt.__takeCount__):xt.__views__.push({size:hi(Ve,U),type:le+(xt.__dir__<0?"Right":"")}),xt},Si.prototype[le+"Right"]=function(Ve){return this.reverse()[le](Ve).reverse()}}),Ms(["filter","map","takeWhile"],function(le,ge){var Ve=ge+1,xt=Ve==E||Ve==C;Si.prototype[le]=function(Kt){var mr=this.clone();return mr.__iteratees__.push({iteratee:_i(Kt,3),type:Ve}),mr.__filtered__=mr.__filtered__||xt,mr}}),Ms(["head","last"],function(le,ge){var Ve="take"+(ge?"Right":"");Si.prototype[le]=function(){return this[Ve](1).value()[0]}}),Ms(["initial","tail"],function(le,ge){var Ve="drop"+(ge?"":"Right");Si.prototype[le]=function(){return this.__filtered__?new Si(this):this[Ve](1)}}),Si.prototype.compact=function(){return this.filter(bc)},Si.prototype.find=function(le){return this.filter(le).head()},Si.prototype.findLast=function(le){return this.reverse().find(le)},Si.prototype.invokeMap=Qi(function(le,ge){return typeof le=="function"?new Si(this):this.map(function(Ve){return Ll(Ve,le,ge)})}),Si.prototype.reject=function(le){return this.filter(Io(_i(le)))},Si.prototype.slice=function(le,ge){le=fi(le);var Ve=this;return Ve.__filtered__&&(le>0||ge<0)?new Si(Ve):(le<0?Ve=Ve.takeRight(-le):le&&(Ve=Ve.drop(le)),ge!==e&&(ge=fi(ge),Ve=ge<0?Ve.dropRight(-ge):Ve.take(ge-le)),Ve)},Si.prototype.takeRightWhile=function(le){return this.reverse().takeWhile(le).reverse()},Si.prototype.toArray=function(){return this.take(U)},bo(Si.prototype,function(le,ge){var Ve=/^(?:filter|find|map|reject)|While$/.test(ge),xt=/^(?:head|last)$/.test(ge),Kt=or[xt?"take"+(ge=="last"?"Right":""):ge],mr=xt||/^find/.test(ge);!Kt||(or.prototype[ge]=function(){var Xr=this.__wrapped__,an=xt?[1]:arguments,wn=Xr instanceof Si,da=an[0],ga=wn||Fi(Xr),Ma=function(So){var zo=Kt.apply(or,al([So],an));return xt&&$a?zo[0]:zo};ga&&Ve&&typeof da=="function"&&da.length!=1&&(wn=ga=!1);var $a=this.__chain__,Mi=!!this.__actions__.length,Vi=mr&&!$a,mo=wn&&!Mi;if(!mr&&ga){Xr=mo?Xr:new Si(this);var Hi=le.apply(Xr,an);return Hi.__actions__.push({func:jl,args:[Ma],thisArg:e}),new zi(Hi,$a)}return Vi&&mo?le.apply(this,an):(Hi=this.thru(Ma),Vi?xt?Hi.value()[0]:Hi.value():Hi)})}),Ms(["pop","push","shift","sort","splice","unshift"],function(le){var ge=Qn[le],Ve=/^(?:push|sort|unshift)$/.test(le)?"tap":"thru",xt=/^(?:pop|shift)$/.test(le);or.prototype[le]=function(){var Kt=arguments;if(xt&&!this.__chain__){var mr=this.value();return ge.apply(Fi(mr)?mr:[],Kt)}return this[Ve](function(Xr){return ge.apply(Fi(Xr)?Xr:[],Kt)})}}),bo(Si.prototype,function(le,ge){var Ve=or[ge];if(Ve){var xt=Ve.name+"";Un.call(Ua,xt)||(Ua[xt]=[]),Ua[xt].push({name:ge,func:Ve})}}),Ua[mp(e,p).name]=[{name:"wrapper",func:e}],Si.prototype.clone=Es,Si.prototype.reverse=yl,Si.prototype.value=ys,or.prototype.at=Wf,or.prototype.chain=Yf,or.prototype.commit=Zo,or.prototype.next=ec,or.prototype.plant=_,or.prototype.reverse=O,or.prototype.toJSON=or.prototype.valueOf=or.prototype.value=Z,or.prototype.first=or.prototype.head,Sa&&(or.prototype[Sa]=bd),or},Ft=gt();Bn?((Bn.exports=Ft)._=Ft,Fn._=Ft):Tr._=Ft}).call(Hs)})(lb,lb.exports);var D4={},R4={},I4={exports:{}},Xk="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Zk=Xk,Kk=Zk;function z4(){}function O4(){}O4.resetWarningCache=z4;var Jk=function(){function A(v,S,r,a,u,c){if(c!==Kk){var t=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw t.name="Invariant Violation",t}}A.isRequired=A;function R(){return A}var e={array:A,bigint:A,bool:A,func:A,number:A,object:A,string:A,symbol:A,any:A,arrayOf:R,element:A,elementType:A,instanceOf:R,node:A,objectOf:R,oneOf:R,oneOfType:R,shape:R,exact:R,checkPropTypes:O4,resetWarningCache:z4};return e.PropTypes=e,e};I4.exports=Jk();(function(A){function R(m){return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},R(m)}Object.defineProperty(A,"__esModule",{value:!0}),A.default=b;var e=a(na.exports),v=S(I4.exports);function S(m){return m&&m.__esModule?m:{default:m}}function r(m){if(typeof WeakMap!="function")return null;var x=new WeakMap,w=new WeakMap;return(r=function(T){return T?w:x})(m)}function a(m,x){if(!x&&m&&m.__esModule)return m;if(m===null||R(m)!=="object"&&typeof m!="function")return{default:m};var w=r(x);if(w&&w.has(m))return w.get(m);var y={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in m)if(M!=="default"&&Object.prototype.hasOwnProperty.call(m,M)){var P=T?Object.getOwnPropertyDescriptor(m,M):null;P&&(P.get||P.set)?Object.defineProperty(y,M,P):y[M]=m[M]}return y.default=m,w&&w.set(m,y),y}function u(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")}function c(m,x){for(var w=0;w<x.length;w++){var y=x[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}function t(m,x,w){return x&&c(m.prototype,x),w&&c(m,w),Object.defineProperty(m,"prototype",{writable:!1}),m}function f(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(x&&x.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),x&&n(m,x)}function n(m,x){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,T){return y.__proto__=T,y},n(m,x)}function o(m){var x=i();return function(){var y=s(m),T;if(x){var M=s(this).constructor;T=Reflect.construct(y,arguments,M)}else T=y.apply(this,arguments);return l(this,T)}}function l(m,x){if(x&&(R(x)==="object"||typeof x=="function"))return x;if(x!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h(m)}function h(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function i(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function s(m){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},s(m)}var p=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","BeforeHover","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Relayouting","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","SunburstClick","Transitioning","TransitionInterrupted","Unhover","WebGlContextLost"],d=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_relayouting","plotly_doubleclick","plotly_animated","plotly_sunburstclick"],g=typeof window<"u";function b(m){var x=function(w){f(T,w);var y=o(T);function T(M){var P;return u(this,T),P=y.call(this,M),P.p=Promise.resolve(),P.resizeHandler=null,P.handlers={},P.syncWindowResize=P.syncWindowResize.bind(h(P)),P.syncEventHandlers=P.syncEventHandlers.bind(h(P)),P.attachUpdateEvents=P.attachUpdateEvents.bind(h(P)),P.getRef=P.getRef.bind(h(P)),P.handleUpdate=P.handleUpdate.bind(h(P)),P.figureCallback=P.figureCallback.bind(h(P)),P.updatePlotly=P.updatePlotly.bind(h(P)),P}return t(T,[{key:"updatePlotly",value:function(P,L,I){var E=this;this.p=this.p.then(function(){if(!E.unmounting){if(!E.el)throw new Error("Missing element reference");return m.react(E.el,{data:E.props.data,layout:E.props.layout,config:E.props.config,frames:E.props.frames})}}).then(function(){E.unmounting||(E.syncWindowResize(P),E.syncEventHandlers(),E.figureCallback(L),I&&E.attachUpdateEvents())}).catch(function(k){E.props.onError&&E.props.onError(k)})}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(P){this.unmounting=!1;var L=P.frames&&P.frames.length?P.frames.length:0,I=this.props.frames&&this.props.frames.length?this.props.frames.length:0,E=!(P.layout===this.props.layout&&P.data===this.props.data&&P.config===this.props.config&&I===L),k=P.revision!==void 0,C=P.revision!==this.props.revision;!E&&(!k||k&&!C)||this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&g&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),m.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var P=this;!this.el||!this.el.removeListener||d.forEach(function(L){P.el.on(L,P.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var P=this;!this.el||!this.el.removeListener||d.forEach(function(L){P.el.removeListener(L,P.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(P){if(typeof P=="function"){var L=this.el,I=L.data,E=L.layout,k=this.el._transitionData?this.el._transitionData._frames:null,C={data:I,layout:E,frames:k};P(C,this.el)}}},{key:"syncWindowResize",value:function(P){var L=this;!g||(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return m.Plots.resize(L.el)},window.addEventListener("resize",this.resizeHandler),P&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(P){this.el=P,this.props.debug&&g&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var P=this;p.forEach(function(L){var I=P.props["on"+L],E=P.handlers[L],k=Boolean(E);I&&!k?P.addEventHandler(L,I):!I&&k?P.removeEventHandler(L):I&&k&&I!==E&&(P.removeEventHandler(L),P.addEventHandler(L,I))})}},{key:"addEventHandler",value:function(P,L){this.handlers[P]=L,this.el.on(this.getPlotlyEventName(P),this.handlers[P])}},{key:"removeEventHandler",value:function(P){this.el.removeListener(this.getPlotlyEventName(P),this.handlers[P]),delete this.handlers[P]}},{key:"getPlotlyEventName",value:function(P){return"plotly_"+P.toLowerCase()}},{key:"render",value:function(){return e.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),T}(e.Component);return x.propTypes={data:v.default.arrayOf(v.default.object),config:v.default.object,layout:v.default.object,frames:v.default.arrayOf(v.default.object),revision:v.default.number,onInitialized:v.default.func,onPurge:v.default.func,onError:v.default.func,onUpdate:v.default.func,debug:v.default.bool,style:v.default.object,className:v.default.string,useResizeHandler:v.default.bool,divId:v.default.string},p.forEach(function(w){x.propTypes["on"+w]=v.default.func}),x.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},x}})(R4);function kg(A){throw new Error('Could not dynamically require "'+A+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var F4={exports:{}};(function(A,R){(function(e){A.exports=e()})(function(){return function(){function e(v,S,r){function a(t,f){if(!S[t]){if(!v[t]){var n=typeof kg=="function"&&kg;if(!f&&n)return n(t,!0);if(u)return u(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var l=S[t]={exports:{}};v[t][0].call(l.exports,function(h){var i=v[t][1][h];return a(i||h)},l,l.exports,e,v,S,r)}return S[t].exports}for(var u=typeof kg=="function"&&kg,c=0;c<r.length;c++)a(r[c]);return a}return e}()({1:[function(e,v,S){var r=e("../src/lib"),a={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans', verdana, arial, sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var u in a){var c=u.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");r.addStyleRule(c,a[u])}},{"../src/lib":778}],2:[function(e,v,S){v.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":1365}],3:[function(e,v,S){v.exports=e("../src/traces/bar")},{"../src/traces/bar":929}],4:[function(e,v,S){v.exports=e("../src/traces/barpolar")},{"../src/traces/barpolar":942}],5:[function(e,v,S){v.exports=e("../src/traces/box")},{"../src/traces/box":952}],6:[function(e,v,S){v.exports=e("../src/components/calendars")},{"../src/components/calendars":641}],7:[function(e,v,S){v.exports=e("../src/traces/candlestick")},{"../src/traces/candlestick":961}],8:[function(e,v,S){v.exports=e("../src/traces/carpet")},{"../src/traces/carpet":980}],9:[function(e,v,S){v.exports=e("../src/traces/choropleth")},{"../src/traces/choropleth":994}],10:[function(e,v,S){v.exports=e("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":1001}],11:[function(e,v,S){v.exports=e("../src/traces/cone")},{"../src/traces/cone":1007}],12:[function(e,v,S){v.exports=e("../src/traces/contour")},{"../src/traces/contour":1022}],13:[function(e,v,S){v.exports=e("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":1033}],14:[function(e,v,S){v.exports=e("../src/core")},{"../src/core":755}],15:[function(e,v,S){v.exports=e("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":1041}],16:[function(e,v,S){v.exports=e("../src/transforms/filter")},{"../src/transforms/filter":1366}],17:[function(e,v,S){v.exports=e("../src/traces/funnel")},{"../src/traces/funnel":1051}],18:[function(e,v,S){v.exports=e("../src/traces/funnelarea")},{"../src/traces/funnelarea":1060}],19:[function(e,v,S){v.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":1367}],20:[function(e,v,S){v.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":1073}],21:[function(e,v,S){v.exports=e("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":1083}],22:[function(e,v,S){v.exports=e("../src/traces/histogram")},{"../src/traces/histogram":1095}],23:[function(e,v,S){v.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":1101}],24:[function(e,v,S){v.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1105}],25:[function(e,v,S){v.exports=e("../src/traces/image")},{"../src/traces/image":1113}],26:[function(e,v,S){var r=e("./core");r.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./contour"),e("./scatterternary"),e("./violin"),e("./funnel"),e("./waterfall"),e("./image"),e("./pie"),e("./sunburst"),e("./treemap"),e("./funnelarea"),e("./scatter3d"),e("./surface"),e("./isosurface"),e("./volume"),e("./mesh3d"),e("./cone"),e("./streamtube"),e("./scattergeo"),e("./choropleth"),e("./scattergl"),e("./splom"),e("./pointcloud"),e("./heatmapgl"),e("./parcoords"),e("./parcats"),e("./scattermapbox"),e("./choroplethmapbox"),e("./densitymapbox"),e("./sankey"),e("./indicator"),e("./table"),e("./carpet"),e("./scattercarpet"),e("./contourcarpet"),e("./ohlc"),e("./candlestick"),e("./scatterpolar"),e("./scatterpolargl"),e("./barpolar")]),r.register([e("./aggregate"),e("./filter"),e("./groupby"),e("./sort")]),r.register([e("./calendars")]),v.exports=r},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./image":25,"./indicator":27,"./isosurface":28,"./mesh3d":29,"./ohlc":30,"./parcats":31,"./parcoords":32,"./pie":33,"./pointcloud":34,"./sankey":35,"./scatter3d":36,"./scattercarpet":37,"./scattergeo":38,"./scattergl":39,"./scattermapbox":40,"./scatterpolar":41,"./scatterpolargl":42,"./scatterternary":43,"./sort":44,"./splom":45,"./streamtube":46,"./sunburst":47,"./surface":48,"./table":49,"./treemap":50,"./violin":51,"./volume":52,"./waterfall":53}],27:[function(e,v,S){v.exports=e("../src/traces/indicator")},{"../src/traces/indicator":1121}],28:[function(e,v,S){v.exports=e("../src/traces/isosurface")},{"../src/traces/isosurface":1127}],29:[function(e,v,S){v.exports=e("../src/traces/mesh3d")},{"../src/traces/mesh3d":1132}],30:[function(e,v,S){v.exports=e("../src/traces/ohlc")},{"../src/traces/ohlc":1137}],31:[function(e,v,S){v.exports=e("../src/traces/parcats")},{"../src/traces/parcats":1146}],32:[function(e,v,S){v.exports=e("../src/traces/parcoords")},{"../src/traces/parcoords":1156}],33:[function(e,v,S){v.exports=e("../src/traces/pie")},{"../src/traces/pie":1167}],34:[function(e,v,S){v.exports=e("../src/traces/pointcloud")},{"../src/traces/pointcloud":1176}],35:[function(e,v,S){v.exports=e("../src/traces/sankey")},{"../src/traces/sankey":1182}],36:[function(e,v,S){v.exports=e("../src/traces/scatter3d")},{"../src/traces/scatter3d":1220}],37:[function(e,v,S){v.exports=e("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1227}],38:[function(e,v,S){v.exports=e("../src/traces/scattergeo")},{"../src/traces/scattergeo":1235}],39:[function(e,v,S){v.exports=e("../src/traces/scattergl")},{"../src/traces/scattergl":1248}],40:[function(e,v,S){v.exports=e("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1258}],41:[function(e,v,S){v.exports=e("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1266}],42:[function(e,v,S){v.exports=e("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1273}],43:[function(e,v,S){v.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":1281}],44:[function(e,v,S){v.exports=e("../src/transforms/sort")},{"../src/transforms/sort":1369}],45:[function(e,v,S){v.exports=e("../src/traces/splom")},{"../src/traces/splom":1290}],46:[function(e,v,S){v.exports=e("../src/traces/streamtube")},{"../src/traces/streamtube":1298}],47:[function(e,v,S){v.exports=e("../src/traces/sunburst")},{"../src/traces/sunburst":1306}],48:[function(e,v,S){v.exports=e("../src/traces/surface")},{"../src/traces/surface":1315}],49:[function(e,v,S){v.exports=e("../src/traces/table")},{"../src/traces/table":1323}],50:[function(e,v,S){v.exports=e("../src/traces/treemap")},{"../src/traces/treemap":1332}],51:[function(e,v,S){v.exports=e("../src/traces/violin")},{"../src/traces/violin":1344}],52:[function(e,v,S){v.exports=e("../src/traces/volume")},{"../src/traces/volume":1352}],53:[function(e,v,S){v.exports=e("../src/traces/waterfall")},{"../src/traces/waterfall":1360}],54:[function(e,v,S){v.exports=n;var r=e("turntable-camera-controller"),a=e("orbit-camera-controller"),u=e("matrix-camera-controller");function c(o,l){this._controllerNames=Object.keys(o),this._controllerList=this._controllerNames.map(function(h){return o[h]}),this._mode=l,this._active=o[l],this._active||(this._mode="turntable",this._active=o.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var t=c.prototype,f=[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]];f.forEach(function(o){for(var l=o[0],h=[],i=0;i<o[1];++i)h.push("a"+i);var s="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+o[0]+"("+h.join()+")}";t[l]=Function.apply(null,h.concat(s))}),t.recalcMatrix=function(o){this._active.recalcMatrix(o)},t.getDistance=function(o){return this._active.getDistance(o)},t.getDistanceLimits=function(o){return this._active.getDistanceLimits(o)},t.lastT=function(){return this._active.lastT()},t.setMode=function(o){if(o!==this._mode){var l=this._controllerNames.indexOf(o);if(!(l<0)){var h=this._active,i=this._controllerList[l],s=Math.max(h.lastT(),i.lastT());h.recalcMatrix(s),i.setMatrix(s,h.computedMatrix),this._active=i,this._mode=o,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},t.getMode=function(){return this._mode};function n(o){o=o||{};var l=o.eye||[0,0,1],h=o.center||[0,0,0],i=o.up||[0,1,0],s=o.distanceLimits||[0,1/0],p=o.mode||"turntable",d=r(),g=a(),b=u();return d.setDistanceLimits(s[0],s[1]),d.lookAt(0,l,h,i),g.setDistanceLimits(s[0],s[1]),g.lookAt(0,l,h,i),b.setDistanceLimits(s[0],s[1]),b.lookAt(0,l,h,i),new c({turntable:d,orbit:g,matrix:b},p)}},{"matrix-camera-controller":480,"orbit-camera-controller":501,"turntable-camera-controller":581}],55:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?a(S,e("d3-array"),e("d3-collection"),e("d3-shape"),e("elementary-circuits-directed-graph")):a(r.d3=r.d3||{},r.d3,r.d3,r.d3,null)})(this,function(r,a,u,c,t){t=t&&t.hasOwnProperty("default")?t.default:t;function f(be){return be.target.depth}function n(be){return be.depth}function o(be,Me){return Me-1-be.height}function l(be,Me){return be.sourceLinks.length?be.depth:Me-1}function h(be){return be.targetLinks.length?be.depth:be.sourceLinks.length?a.min(be.sourceLinks,f)-1:0}function i(be){return function(){return be}}var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(be){return typeof be}:function(be){return be&&typeof Symbol=="function"&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be};function p(be,Me){return g(be.source,Me.source)||be.index-Me.index}function d(be,Me){return g(be.target,Me.target)||be.index-Me.index}function g(be,Me){return be.partOfCycle===Me.partOfCycle?be.y0-Me.y0:be.circularLinkType==="top"||Me.circularLinkType==="bottom"?-1:1}function b(be){return be.value}function m(be){return(be.y0+be.y1)/2}function x(be){return m(be.source)}function w(be){return m(be.target)}function y(be){return be.index}function T(be){return be.nodes}function M(be){return be.links}function P(be,Me){var Pe=be.get(Me);if(!Pe)throw new Error("missing: "+Me);return Pe}function L(be,Me){return Me(be)}var I=25,E=10,k=.3;function C(){var be=0,Me=0,Pe=1,Ge=1,ze=24,Qe,tt=y,Ce=l,Ae=T,Be=M,qe=32,Tt=2,At,Ne=null;function ct(){var Ct={nodes:Ae.apply(null,arguments),links:Be.apply(null,arguments)};Mt(Ct),D(Ct,tt,Ne),Wt(Ct),$t(Ct),F(Ct,tt),rr(Ct,qe,tt),Lt(Ct);for(var dt=4,lt=0;lt<dt;lt++)fe(Ct,Ge,tt),de(Ct,Ge,tt),re(Ct,Me,Ge,tt),fe(Ct,Ge,tt),de(Ct,Ge,tt);return me(Ct,Me,Ge),B(Ct,Tt,Ge,tt),Ct}ct.nodeId=function(Ct){return arguments.length?(tt=typeof Ct=="function"?Ct:i(Ct),ct):tt},ct.nodeAlign=function(Ct){return arguments.length?(Ce=typeof Ct=="function"?Ct:i(Ct),ct):Ce},ct.nodeWidth=function(Ct){return arguments.length?(ze=+Ct,ct):ze},ct.nodePadding=function(Ct){return arguments.length?(Qe=+Ct,ct):Qe},ct.nodes=function(Ct){return arguments.length?(Ae=typeof Ct=="function"?Ct:i(Ct),ct):Ae},ct.links=function(Ct){return arguments.length?(Be=typeof Ct=="function"?Ct:i(Ct),ct):Be},ct.size=function(Ct){return arguments.length?(be=Me=0,Pe=+Ct[0],Ge=+Ct[1],ct):[Pe-be,Ge-Me]},ct.extent=function(Ct){return arguments.length?(be=+Ct[0][0],Pe=+Ct[1][0],Me=+Ct[0][1],Ge=+Ct[1][1],ct):[[be,Me],[Pe,Ge]]},ct.iterations=function(Ct){return arguments.length?(qe=+Ct,ct):qe},ct.circularLinkGap=function(Ct){return arguments.length?(Tt=+Ct,ct):Tt},ct.nodePaddingRatio=function(Ct){return arguments.length?(At=+Ct,ct):At},ct.sortNodes=function(Ct){return arguments.length?(Ne=Ct,ct):Ne},ct.update=function(Ct){return F(Ct,tt),Lt(Ct),Ct.links.forEach(function(dt){dt.circular&&(dt.circularLinkType=dt.y0+dt.y1<Ge?"top":"bottom",dt.source.circularLinkType=dt.circularLinkType,dt.target.circularLinkType=dt.circularLinkType)}),fe(Ct,Ge,tt,!1),de(Ct,Ge,tt),B(Ct,Tt,Ge,tt),Ct};function Mt(Ct){Ct.nodes.forEach(function(lt,Te){lt.index=Te,lt.sourceLinks=[],lt.targetLinks=[]});var dt=u.map(Ct.nodes,tt);return Ct.links.forEach(function(lt,Te){lt.index=Te;var Le=lt.source,Ue=lt.target;(typeof Le>"u"?"undefined":s(Le))!=="object"&&(Le=lt.source=P(dt,Le)),(typeof Ue>"u"?"undefined":s(Ue))!=="object"&&(Ue=lt.target=P(dt,Ue)),Le.sourceLinks.push(lt),Ue.targetLinks.push(lt)}),Ct}function Wt(Ct){Ct.nodes.forEach(function(dt){dt.partOfCycle=!1,dt.value=Math.max(a.sum(dt.sourceLinks,b),a.sum(dt.targetLinks,b)),dt.sourceLinks.forEach(function(lt){lt.circular&&(dt.partOfCycle=!0,dt.circularLinkType=lt.circularLinkType)}),dt.targetLinks.forEach(function(lt){lt.circular&&(dt.partOfCycle=!0,dt.circularLinkType=lt.circularLinkType)})})}function qt(Ct){var dt=0,lt=0,Te=0,Le=0,Ue=a.max(Ct.nodes,function(et){return et.column});return Ct.links.forEach(function(et){et.circular&&(et.circularLinkType=="top"?dt=dt+et.width:lt=lt+et.width,et.target.column==0&&(Le=Le+et.width),et.source.column==Ue&&(Te=Te+et.width))}),dt=dt>0?dt+I+E:dt,lt=lt>0?lt+I+E:lt,Te=Te>0?Te+I+E:Te,Le=Le>0?Le+I+E:Le,{top:dt,bottom:lt,left:Le,right:Te}}function zt(Ct,dt){var lt=a.max(Ct.nodes,function(He){return He.column}),Te=Pe-be,Le=Ge-Me,Ue=Te+dt.right+dt.left,et=Le+dt.top+dt.bottom,ke=Te/Ue,Ie=Le/et;return be=be*ke+dt.left,Pe=dt.right==0?Pe:Pe*ke,Me=Me*Ie+dt.top,Ge=Ge*Ie,Ct.nodes.forEach(function(He){He.x0=be+He.column*((Pe-be-ze)/lt),He.x1=He.x0+ze}),Ie}function $t(Ct){var dt,lt,Te;for(dt=Ct.nodes,lt=[],Te=0;dt.length;++Te,dt=lt,lt=[])dt.forEach(function(Le){Le.depth=Te,Le.sourceLinks.forEach(function(Ue){lt.indexOf(Ue.target)<0&&!Ue.circular&&lt.push(Ue.target)})});for(dt=Ct.nodes,lt=[],Te=0;dt.length;++Te,dt=lt,lt=[])dt.forEach(function(Le){Le.height=Te,Le.targetLinks.forEach(function(Ue){lt.indexOf(Ue.source)<0&&!Ue.circular&&lt.push(Ue.source)})});Ct.nodes.forEach(function(Le){Le.column=Math.floor(Ce.call(null,Le,Te))})}function rr(Ct,dt,lt){var Te=u.nest().key(function(He){return He.column}).sortKeys(a.ascending).entries(Ct.nodes).map(function(He){return He.values});et(lt),Ie();for(var Le=1,Ue=dt;Ue>0;--Ue)ke(Le*=.99,lt),Ie();function et(He){if(At){var Ye=1/0;Te.forEach(function(ot){var Je=Ge*At/(ot.length+1);Ye=Je<Ye?Je:Ye}),Qe=Ye}var ft=a.min(Te,function(ot){return(Ge-Me-(ot.length-1)*Qe)/a.sum(ot,b)});ft=ft*k,Ct.links.forEach(function(ot){ot.width=ot.value*ft});var it=qt(Ct),je=zt(Ct,it);ft=ft*je,Ct.links.forEach(function(ot){ot.width=ot.value*ft}),Te.forEach(function(ot){var Je=ot.length;ot.forEach(function(st,It){st.depth==Te.length-1&&Je==1||st.depth==0&&Je==1?(st.y0=Ge/2-st.value*ft,st.y1=st.y0+st.value*ft):st.partOfCycle?U(st,He)==0?(st.y0=Ge/2+It,st.y1=st.y0+st.value*ft):st.circularLinkType=="top"?(st.y0=Me+It,st.y1=st.y0+st.value*ft):(st.y0=Ge-st.value*ft-It,st.y1=st.y0+st.value*ft):it.top==0||it.bottom==0?(st.y0=(Ge-Me)/Je*It,st.y1=st.y0+st.value*ft):(st.y0=(Ge-Me)/2-Je/2+It,st.y1=st.y0+st.value*ft)})})}function ke(He,Ye){var ft=Te.length;Te.forEach(function(it){var je=it.length,ot=it[0].depth;it.forEach(function(Je){var st;if((Je.sourceLinks.length||Je.targetLinks.length)&&!(Je.partOfCycle&&U(Je,Ye)>0))if(ot==0&&je==1)st=Je.y1-Je.y0,Je.y0=Ge/2-st/2,Je.y1=Ge/2+st/2;else if(ot==ft-1&&je==1)st=Je.y1-Je.y0,Je.y0=Ge/2-st/2,Je.y1=Ge/2+st/2;else{var It=0,Nt=a.mean(Je.sourceLinks,w),nr=a.mean(Je.targetLinks,x);Nt&&nr?It=(Nt+nr)/2:It=Nt||nr;var We=(It-m(Je))*He;Je.y0+=We,Je.y1+=We}})})}function Ie(){Te.forEach(function(He){var Ye,ft,it=Me,je=He.length,ot;for(He.sort(g),ot=0;ot<je;++ot)Ye=He[ot],ft=it-Ye.y0,ft>0&&(Ye.y0+=ft,Ye.y1+=ft),it=Ye.y1+Qe;if(ft=it-Qe-Ge,ft>0)for(it=Ye.y0-=ft,Ye.y1-=ft,ot=je-2;ot>=0;--ot)Ye=He[ot],ft=Ye.y1+Qe-it,ft>0&&(Ye.y0-=ft,Ye.y1-=ft),it=Ye.y0})}}function Lt(Ct){Ct.nodes.forEach(function(dt){dt.sourceLinks.sort(d),dt.targetLinks.sort(p)}),Ct.nodes.forEach(function(dt){var lt=dt.y0,Te=lt,Le=dt.y1,Ue=Le;dt.sourceLinks.forEach(function(et){et.circular?(et.y0=Le-et.width/2,Le=Le-et.width):(et.y0=lt+et.width/2,lt+=et.width)}),dt.targetLinks.forEach(function(et){et.circular?(et.y1=Ue-et.width/2,Ue=Ue-et.width):(et.y1=Te+et.width/2,Te+=et.width)})})}return ct}function D(be,Me,Pe){var Ge=0;if(Pe===null){for(var ze=[],Qe=0;Qe<be.links.length;Qe++){var tt=be.links[Qe],Ce=tt.source.index,Ae=tt.target.index;ze[Ce]||(ze[Ce]=[]),ze[Ae]||(ze[Ae]=[]),ze[Ce].indexOf(Ae)===-1&&ze[Ce].push(Ae)}var Be=t(ze);Be.sort(function(Ne,ct){return Ne.length-ct.length});var qe={};for(Qe=0;Qe<Be.length;Qe++){var Tt=Be[Qe],At=Tt.slice(-2);qe[At[0]]||(qe[At[0]]={}),qe[At[0]][At[1]]=!0}be.links.forEach(function(Ne){var ct=Ne.target.index,Mt=Ne.source.index;ct===Mt||qe[Mt]&&qe[Mt][ct]?(Ne.circular=!0,Ne.circularLinkID=Ge,Ge=Ge+1):Ne.circular=!1})}else be.links.forEach(function(Ne){Ne.source[Pe]<Ne.target[Pe]?Ne.circular=!1:(Ne.circular=!0,Ne.circularLinkID=Ge,Ge=Ge+1)})}function F(be,Me){var Pe=0,Ge=0;be.links.forEach(function(ze){ze.circular&&(ze.source.circularLinkType||ze.target.circularLinkType?ze.circularLinkType=ze.source.circularLinkType?ze.source.circularLinkType:ze.target.circularLinkType:ze.circularLinkType=Pe<Ge?"top":"bottom",ze.circularLinkType=="top"?Pe=Pe+1:Ge=Ge+1,be.nodes.forEach(function(Qe){(L(Qe,Me)==L(ze.source,Me)||L(Qe,Me)==L(ze.target,Me))&&(Qe.circularLinkType=ze.circularLinkType)}))}),be.links.forEach(function(ze){ze.circular&&(ze.source.circularLinkType==ze.target.circularLinkType&&(ze.circularLinkType=ze.source.circularLinkType),ue(ze,Me)&&(ze.circularLinkType=ze.source.circularLinkType))})}function N(be){var Me=Math.abs(be.y1-be.y0),Pe=Math.abs(be.target.x0-be.source.x1);return Math.atan(Pe/Me)}function G(be,Me){return be.source.column<Me.target.column?!1:!(be.target.column>Me.source.column)}function U(be,Me){var Pe=0;be.sourceLinks.forEach(function(ze){Pe=ze.circular&&!ue(ze,Me)?Pe+1:Pe});var Ge=0;return be.targetLinks.forEach(function(ze){Ge=ze.circular&&!ue(ze,Me)?Ge+1:Ge}),Pe+Ge}function X(be){var Me=be.source.sourceLinks,Pe=0;Me.forEach(function(Qe){Pe=Qe.circular?Pe+1:Pe});var Ge=be.target.targetLinks,ze=0;return Ge.forEach(function(Qe){ze=Qe.circular?ze+1:ze}),!(Pe>1||ze>1)}function z(be,Me,Pe){return be.sort(V),be.forEach(function(Ge,ze){var Qe=0;if(ue(Ge,Pe)&&X(Ge))Ge.circularPathData.verticalBuffer=Qe+Ge.width/2;else{var tt=0;for(tt;tt<ze;tt++)if(G(be[ze],be[tt])){var Ce=be[tt].circularPathData.verticalBuffer+be[tt].width/2+Me;Qe=Ce>Qe?Ce:Qe}Ge.circularPathData.verticalBuffer=Qe+Ge.width/2}}),be}function B(be,Me,Pe,Ge){var ze=5,Qe=a.min(be.links,function(Ae){return Ae.source.y0});be.links.forEach(function(Ae){Ae.circular&&(Ae.circularPathData={})});var tt=be.links.filter(function(Ae){return Ae.circularLinkType=="top"});z(tt,Me,Ge);var Ce=be.links.filter(function(Ae){return Ae.circularLinkType=="bottom"});z(Ce,Me,Ge),be.links.forEach(function(Ae){if(Ae.circular){if(Ae.circularPathData.arcRadius=Ae.width+E,Ae.circularPathData.leftNodeBuffer=ze,Ae.circularPathData.rightNodeBuffer=ze,Ae.circularPathData.sourceWidth=Ae.source.x1-Ae.source.x0,Ae.circularPathData.sourceX=Ae.source.x0+Ae.circularPathData.sourceWidth,Ae.circularPathData.targetX=Ae.target.x0,Ae.circularPathData.sourceY=Ae.y0,Ae.circularPathData.targetY=Ae.y1,ue(Ae,Ge)&&X(Ae))Ae.circularPathData.leftSmallArcRadius=E+Ae.width/2,Ae.circularPathData.leftLargeArcRadius=E+Ae.width/2,Ae.circularPathData.rightSmallArcRadius=E+Ae.width/2,Ae.circularPathData.rightLargeArcRadius=E+Ae.width/2,Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Ae.source.y1+I+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=Ae.source.y0-I-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius);else{var Be=Ae.source.column,qe=Ae.circularLinkType,Tt=be.links.filter(function(ct){return ct.source.column==Be&&ct.circularLinkType==qe});Ae.circularLinkType=="bottom"?Tt.sort(te):Tt.sort(K);var At=0;Tt.forEach(function(ct,Mt){ct.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.leftSmallArcRadius=E+Ae.width/2+At,Ae.circularPathData.leftLargeArcRadius=E+Ae.width/2+Mt*Me+At),At=At+ct.width}),Be=Ae.target.column,Tt=be.links.filter(function(ct){return ct.target.column==Be&&ct.circularLinkType==qe}),Ae.circularLinkType=="bottom"?Tt.sort(ie):Tt.sort($),At=0,Tt.forEach(function(ct,Mt){ct.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.rightSmallArcRadius=E+Ae.width/2+At,Ae.circularPathData.rightLargeArcRadius=E+Ae.width/2+Mt*Me+At),At=At+ct.width}),Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Math.max(Pe,Ae.source.y1,Ae.target.y1)+I+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=Qe-I-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius)}Ae.circularPathData.leftInnerExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightInnerExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightNodeBuffer,Ae.circularPathData.leftFullExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftLargeArcRadius+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightFullExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightLargeArcRadius-Ae.circularPathData.rightNodeBuffer}if(Ae.circular)Ae.path=j(Ae);else{var Ne=c.linkHorizontal().source(function(ct){var Mt=ct.source.x0+(ct.source.x1-ct.source.x0),Wt=ct.y0;return[Mt,Wt]}).target(function(ct){var Mt=ct.target.x0,Wt=ct.y1;return[Mt,Wt]});Ae.path=Ne(Ae)}})}function j(be){var Me="";return be.circularLinkType=="top"?Me="M"+be.circularPathData.sourceX+" "+be.circularPathData.sourceY+" L"+be.circularPathData.leftInnerExtent+" "+be.circularPathData.sourceY+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftSmallArcRadius+" 0 0 0 "+be.circularPathData.leftFullExtent+" "+(be.circularPathData.sourceY-be.circularPathData.leftSmallArcRadius)+" L"+be.circularPathData.leftFullExtent+" "+be.circularPathData.verticalLeftInnerExtent+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftLargeArcRadius+" 0 0 0 "+be.circularPathData.leftInnerExtent+" "+be.circularPathData.verticalFullExtent+" L"+be.circularPathData.rightInnerExtent+" "+be.circularPathData.verticalFullExtent+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightLargeArcRadius+" 0 0 0 "+be.circularPathData.rightFullExtent+" "+be.circularPathData.verticalRightInnerExtent+" L"+be.circularPathData.rightFullExtent+" "+(be.circularPathData.targetY-be.circularPathData.rightSmallArcRadius)+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightSmallArcRadius+" 0 0 0 "+be.circularPathData.rightInnerExtent+" "+be.circularPathData.targetY+" L"+be.circularPathData.targetX+" "+be.circularPathData.targetY:Me="M"+be.circularPathData.sourceX+" "+be.circularPathData.sourceY+" L"+be.circularPathData.leftInnerExtent+" "+be.circularPathData.sourceY+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftSmallArcRadius+" 0 0 1 "+be.circularPathData.leftFullExtent+" "+(be.circularPathData.sourceY+be.circularPathData.leftSmallArcRadius)+" L"+be.circularPathData.leftFullExtent+" "+be.circularPathData.verticalLeftInnerExtent+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftLargeArcRadius+" 0 0 1 "+be.circularPathData.leftInnerExtent+" "+be.circularPathData.verticalFullExtent+" L"+be.circularPathData.rightInnerExtent+" "+be.circularPathData.verticalFullExtent+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightLargeArcRadius+" 0 0 1 "+be.circularPathData.rightFullExtent+" "+be.circularPathData.verticalRightInnerExtent+" L"+be.circularPathData.rightFullExtent+" "+(be.circularPathData.targetY+be.circularPathData.rightSmallArcRadius)+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightSmallArcRadius+" 0 0 1 "+be.circularPathData.rightInnerExtent+" "+be.circularPathData.targetY+" L"+be.circularPathData.targetX+" "+be.circularPathData.targetY,Me}function V(be,Me){return se(be)==se(Me)?be.circularLinkType=="bottom"?te(be,Me):K(be,Me):se(Me)-se(be)}function K(be,Me){return be.y0-Me.y0}function te(be,Me){return Me.y0-be.y0}function $(be,Me){return be.y1-Me.y1}function ie(be,Me){return Me.y1-be.y1}function se(be){return be.target.column-be.source.column}function Q(be){return be.target.x0-be.source.x1}function H(be,Me){var Pe=N(be),Ge=Q(Me)/Math.tan(Pe),ze=W(be)=="up"?be.y1+Ge:be.y1-Ge;return ze}function oe(be,Me){var Pe=N(be),Ge=Q(Me)/Math.tan(Pe),ze=W(be)=="up"?be.y1-Ge:be.y1+Ge;return ze}function re(be,Me,Pe,Ge){be.links.forEach(function(ze){if(!ze.circular&&ze.target.column-ze.source.column>1){var Qe=ze.source.column+1,tt=ze.target.column-1,Ce=1,Ae=tt-Qe+1;for(Ce=1;Qe<=tt;Qe++,Ce++)be.nodes.forEach(function(Be){if(Be.column==Qe){var qe=Ce/(Ae+1),Tt=Math.pow(1-qe,3),At=3*qe*Math.pow(1-qe,2),Ne=3*Math.pow(qe,2)*(1-qe),ct=Math.pow(qe,3),Mt=Tt*ze.y0+At*ze.y0+Ne*ze.y1+ct*ze.y1,Wt=Mt-ze.width/2,qt=Mt+ze.width/2,zt;Wt>Be.y0&&Wt<Be.y1?(zt=Be.y1-Wt+10,zt=Be.circularLinkType=="bottom"?zt:-zt,Be=ae(Be,zt,Me,Pe),be.nodes.forEach(function($t){L($t,Ge)==L(Be,Ge)||$t.column!=Be.column||ee(Be,$t)&&ae($t,zt,Me,Pe)})):qt>Be.y0&&qt<Be.y1?(zt=qt-Be.y0+10,Be=ae(Be,zt,Me,Pe),be.nodes.forEach(function($t){L($t,Ge)==L(Be,Ge)||$t.column!=Be.column||$t.y0<Be.y1&&$t.y1>Be.y1&&ae($t,zt,Me,Pe)})):Wt<Be.y0&&qt>Be.y1&&(zt=qt-Be.y0+10,Be=ae(Be,zt,Me,Pe),be.nodes.forEach(function($t){L($t,Ge)==L(Be,Ge)||$t.column!=Be.column||$t.y0<Be.y1&&$t.y1>Be.y1&&ae($t,zt,Me,Pe)}))}})}})}function ee(be,Me){return be.y0>Me.y0&&be.y0<Me.y1||be.y1>Me.y0&&be.y1<Me.y1?!0:be.y0<Me.y0&&be.y1>Me.y1}function ae(be,Me,Pe,Ge){return be.y0+Me>=Pe&&be.y1+Me<=Ge&&(be.y0=be.y0+Me,be.y1=be.y1+Me,be.targetLinks.forEach(function(ze){ze.y1=ze.y1+Me}),be.sourceLinks.forEach(function(ze){ze.y0=ze.y0+Me})),be}function fe(be,Me,Pe,Ge){be.nodes.forEach(function(ze){Ge&&ze.y+(ze.y1-ze.y0)>Me&&(ze.y=ze.y-(ze.y+(ze.y1-ze.y0)-Me));var Qe=be.links.filter(function(Ae){return L(Ae.source,Pe)==L(ze,Pe)}),tt=Qe.length;tt>1&&Qe.sort(function(Ae,Be){if(!Ae.circular&&!Be.circular){if(Ae.target.column==Be.target.column)return Ae.y1-Be.y1;if(pe(Ae,Be)){if(Ae.target.column>Be.target.column){var qe=oe(Be,Ae);return Ae.y1-qe}if(Be.target.column>Ae.target.column){var Tt=oe(Ae,Be);return Tt-Be.y1}}else return Ae.y1-Be.y1}if(Ae.circular&&!Be.circular)return Ae.circularLinkType=="top"?-1:1;if(Be.circular&&!Ae.circular)return Be.circularLinkType=="top"?1:-1;if(Ae.circular&&Be.circular)return Ae.circularLinkType===Be.circularLinkType&&Ae.circularLinkType=="top"?Ae.target.column===Be.target.column?Ae.target.y1-Be.target.y1:Be.target.column-Ae.target.column:Ae.circularLinkType===Be.circularLinkType&&Ae.circularLinkType=="bottom"?Ae.target.column===Be.target.column?Be.target.y1-Ae.target.y1:Ae.target.column-Be.target.column:Ae.circularLinkType=="top"?-1:1});var Ce=ze.y0;Qe.forEach(function(Ae){Ae.y0=Ce+Ae.width/2,Ce=Ce+Ae.width}),Qe.forEach(function(Ae,Be){if(Ae.circularLinkType=="bottom"){var qe=Be+1,Tt=0;for(qe;qe<tt;qe++)Tt=Tt+Qe[qe].width;Ae.y0=ze.y1-Tt-Ae.width/2}})})}function de(be,Me,Pe){be.nodes.forEach(function(Ge){var ze=be.links.filter(function(Ce){return L(Ce.target,Pe)==L(Ge,Pe)}),Qe=ze.length;Qe>1&&ze.sort(function(Ce,Ae){if(!Ce.circular&&!Ae.circular){if(Ce.source.column==Ae.source.column)return Ce.y0-Ae.y0;if(pe(Ce,Ae)){if(Ae.source.column<Ce.source.column){var Be=H(Ae,Ce);return Ce.y0-Be}if(Ce.source.column<Ae.source.column){var qe=H(Ce,Ae);return qe-Ae.y0}}else return Ce.y0-Ae.y0}if(Ce.circular&&!Ae.circular)return Ce.circularLinkType=="top"?-1:1;if(Ae.circular&&!Ce.circular)return Ae.circularLinkType=="top"?1:-1;if(Ce.circular&&Ae.circular)return Ce.circularLinkType===Ae.circularLinkType&&Ce.circularLinkType=="top"?Ce.source.column===Ae.source.column?Ce.source.y1-Ae.source.y1:Ce.source.column-Ae.source.column:Ce.circularLinkType===Ae.circularLinkType&&Ce.circularLinkType=="bottom"?Ce.source.column===Ae.source.column?Ce.source.y1-Ae.source.y1:Ae.source.column-Ce.source.column:Ce.circularLinkType=="top"?-1:1});var tt=Ge.y0;ze.forEach(function(Ce){Ce.y1=tt+Ce.width/2,tt=tt+Ce.width}),ze.forEach(function(Ce,Ae){if(Ce.circularLinkType=="bottom"){var Be=Ae+1,qe=0;for(Be;Be<Qe;Be++)qe=qe+ze[Be].width;Ce.y1=Ge.y1-qe-Ce.width/2}})})}function pe(be,Me){return W(be)==W(Me)}function W(be){return be.y0-be.y1>0?"up":"down"}function ue(be,Me){return L(be.source,Me)==L(be.target,Me)}function me(be,Me,Pe){var Ge=be.nodes,ze=be.links,Qe=!1,tt=!1;if(ze.forEach(function(At){At.circularLinkType=="top"?Qe=!0:At.circularLinkType=="bottom"&&(tt=!0)}),Qe==!1||tt==!1){var Ce=a.min(Ge,function(At){return At.y0}),Ae=a.max(Ge,function(At){return At.y1}),Be=Ae-Ce,qe=Pe-Me,Tt=qe/Be;Ge.forEach(function(At){var Ne=(At.y1-At.y0)*Tt;At.y0=(At.y0-Ce)*Tt,At.y1=At.y0+Ne}),ze.forEach(function(At){At.y0=(At.y0-Ce)*Tt,At.y1=(At.y1-Ce)*Tt,At.width=At.width*Tt})}}r.sankeyCircular=C,r.sankeyCenter=h,r.sankeyLeft=n,r.sankeyRight=o,r.sankeyJustify=l,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165,"elementary-circuits-directed-graph":179}],56:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?a(S,e("d3-array"),e("d3-collection"),e("d3-shape")):a(r.d3=r.d3||{},r.d3,r.d3,r.d3)})(this,function(r,a,u,c){function t(E){return E.target.depth}function f(E){return E.depth}function n(E,k){return k-1-E.height}function o(E,k){return E.sourceLinks.length?E.depth:k-1}function l(E){return E.targetLinks.length?E.depth:E.sourceLinks.length?a.min(E.sourceLinks,t)-1:0}function h(E){return function(){return E}}function i(E,k){return p(E.source,k.source)||E.index-k.index}function s(E,k){return p(E.target,k.target)||E.index-k.index}function p(E,k){return E.y0-k.y0}function d(E){return E.value}function g(E){return(E.y0+E.y1)/2}function b(E){return g(E.source)*E.value}function m(E){return g(E.target)*E.value}function x(E){return E.index}function w(E){return E.nodes}function y(E){return E.links}function T(E,k){var C=E.get(k);if(!C)throw new Error("missing: "+k);return C}var M=function(){var E=0,k=0,C=1,D=1,F=24,N=8,G=x,U=o,X=w,z=y,B=32,j=2/3;function V(){var Q={nodes:X.apply(null,arguments),links:z.apply(null,arguments)};return K(Q),te(Q),$(Q),ie(Q),se(Q),Q}V.update=function(Q){return se(Q),Q},V.nodeId=function(Q){return arguments.length?(G=typeof Q=="function"?Q:h(Q),V):G},V.nodeAlign=function(Q){return arguments.length?(U=typeof Q=="function"?Q:h(Q),V):U},V.nodeWidth=function(Q){return arguments.length?(F=+Q,V):F},V.nodePadding=function(Q){return arguments.length?(N=+Q,V):N},V.nodes=function(Q){return arguments.length?(X=typeof Q=="function"?Q:h(Q),V):X},V.links=function(Q){return arguments.length?(z=typeof Q=="function"?Q:h(Q),V):z},V.size=function(Q){return arguments.length?(E=k=0,C=+Q[0],D=+Q[1],V):[C-E,D-k]},V.extent=function(Q){return arguments.length?(E=+Q[0][0],C=+Q[1][0],k=+Q[0][1],D=+Q[1][1],V):[[E,k],[C,D]]},V.iterations=function(Q){return arguments.length?(B=+Q,V):B};function K(Q){Q.nodes.forEach(function(oe,re){oe.index=re,oe.sourceLinks=[],oe.targetLinks=[]});var H=u.map(Q.nodes,G);Q.links.forEach(function(oe,re){oe.index=re;var ee=oe.source,ae=oe.target;typeof ee!="object"&&(ee=oe.source=T(H,ee)),typeof ae!="object"&&(ae=oe.target=T(H,ae)),ee.sourceLinks.push(oe),ae.targetLinks.push(oe)})}function te(Q){Q.nodes.forEach(function(H){H.value=Math.max(a.sum(H.sourceLinks,d),a.sum(H.targetLinks,d))})}function $(Q){var H,oe,re;for(H=Q.nodes,oe=[],re=0;H.length;++re,H=oe,oe=[])H.forEach(function(ae){ae.depth=re,ae.sourceLinks.forEach(function(fe){oe.indexOf(fe.target)<0&&oe.push(fe.target)})});for(H=Q.nodes,oe=[],re=0;H.length;++re,H=oe,oe=[])H.forEach(function(ae){ae.height=re,ae.targetLinks.forEach(function(fe){oe.indexOf(fe.source)<0&&oe.push(fe.source)})});var ee=(C-E-F)/(re-1);Q.nodes.forEach(function(ae){ae.x1=(ae.x0=E+Math.max(0,Math.min(re-1,Math.floor(U.call(null,ae,re))))*ee)+F})}function ie(Q){var H=u.nest().key(function(pe){return pe.x0}).sortKeys(a.ascending).entries(Q.nodes).map(function(pe){return pe.values});ee(),de();for(var oe=1,re=B;re>0;--re)fe(oe*=.99),de(),ae(oe),de();function ee(){var pe=a.max(H,function(me){return me.length}),W=j*(D-k)/(pe-1);N>W&&(N=W);var ue=a.min(H,function(me){return(D-k-(me.length-1)*N)/a.sum(me,d)});H.forEach(function(me){me.forEach(function(be,Me){be.y1=(be.y0=Me)+be.value*ue})}),Q.links.forEach(function(me){me.width=me.value*ue})}function ae(pe){H.forEach(function(W){W.forEach(function(ue){if(ue.targetLinks.length){var me=(a.sum(ue.targetLinks,b)/a.sum(ue.targetLinks,d)-g(ue))*pe;ue.y0+=me,ue.y1+=me}})})}function fe(pe){H.slice().reverse().forEach(function(W){W.forEach(function(ue){if(ue.sourceLinks.length){var me=(a.sum(ue.sourceLinks,m)/a.sum(ue.sourceLinks,d)-g(ue))*pe;ue.y0+=me,ue.y1+=me}})})}function de(){H.forEach(function(pe){var W,ue,me=k,be=pe.length,Me;for(pe.sort(p),Me=0;Me<be;++Me)W=pe[Me],ue=me-W.y0,ue>0&&(W.y0+=ue,W.y1+=ue),me=W.y1+N;if(ue=me-N-D,ue>0)for(me=W.y0-=ue,W.y1-=ue,Me=be-2;Me>=0;--Me)W=pe[Me],ue=W.y1+N-me,ue>0&&(W.y0-=ue,W.y1-=ue),me=W.y0})}}function se(Q){Q.nodes.forEach(function(H){H.sourceLinks.sort(s),H.targetLinks.sort(i)}),Q.nodes.forEach(function(H){var oe=H.y0,re=oe;H.sourceLinks.forEach(function(ee){ee.y0=oe+ee.width/2,oe+=ee.width}),H.targetLinks.forEach(function(ee){ee.y1=re+ee.width/2,re+=ee.width})})}return V};function P(E){return[E.source.x1,E.y0]}function L(E){return[E.target.x0,E.y1]}var I=function(){return c.linkHorizontal().source(P).target(L)};r.sankey=M,r.sankeyCenter=l,r.sankeyLeft=f,r.sankeyRight=n,r.sankeyJustify=o,r.sankeyLinkHorizontal=I,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165}],57:[function(e,v,S){v.exports=e("./quad")},{"./quad":58}],58:[function(e,v,S){var r=e("binary-search-bounds"),a=e("clamp"),u=e("parse-rect"),c=e("array-bounds"),t=e("pick-by-alias"),f=e("defined"),n=e("flatten-vertex-data"),o=e("is-obj"),l=e("dtype"),h=e("math-log2"),i=1073741824;v.exports=function(d,g){g||(g={}),d=n(d,"float64"),g=t(g,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var b=f(g.maxDepth,255),m=f(g.bounds,c(d,2));m[0]===m[2]&&m[2]++,m[1]===m[3]&&m[3]++;var x=s(d,m),w=d.length>>>1,y;g.dtype||(g.dtype="array"),typeof g.dtype=="string"?y=new(l(g.dtype))(w):g.dtype&&(y=g.dtype,Array.isArray(y)&&(y.length=w));for(var T=0;T<w;++T)y[T]=T;var M=[],P=[],L=[],I=[];G(0,0,1,y,0,1);for(var E=0,k=0;k<M.length;k++){var C=M[k];if(y.set)y.set(C,E);else for(var D=0,F=C.length;D<F;D++)y[D+E]=C[D];var N=E+M[k].length;I[k]=[E,N],E=N}return y.range=U,y;function G(B,j,V,K,te,$){if(!K.length)return null;var ie=M[te]||(M[te]=[]),se=L[te]||(L[te]=[]),Q=P[te]||(P[te]=[]),H=ie.length;if(te++,te>b||$>i){for(var oe=0;oe<K.length;oe++)ie.push(K[oe]),se.push($),Q.push(null,null,null,null);return H}if(ie.push(K[0]),se.push($),K.length<=1)return Q.push(null,null,null,null),H;for(var re=V*.5,ee=B+re,ae=j+re,fe=[],de=[],pe=[],W=[],ue=1,me=K.length;ue<me;ue++){var be=K[ue],Me=x[be*2],Pe=x[be*2+1];Me<ee?Pe<ae?fe.push(be):de.push(be):Pe<ae?pe.push(be):W.push(be)}return $<<=2,Q.push(G(B,j,re,fe,te,$),G(B,ae,re,de,te,$+1),G(ee,j,re,pe,te,$+2),G(ee,ae,re,W,te,$+3)),H}function U(){for(var B=[],j=arguments.length;j--;)B[j]=arguments[j];var V;if(o(B[B.length-1])){var K=B.pop();!B.length&&(K.x!=null||K.l!=null||K.left!=null)&&(B=[K],V={}),V=t(K,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else V={};B.length||(B=m);var te=u.apply(void 0,B),$=[Math.min(te.x,te.x+te.width),Math.min(te.y,te.y+te.height),Math.max(te.x,te.x+te.width),Math.max(te.y,te.y+te.height)],ie=$[0],se=$[1],Q=$[2],H=$[3],oe=s([ie,se,Q,H],m),re=oe[0],ee=oe[1],ae=oe[2],fe=oe[3],de=f(V.level,M.length);if(V.d!=null){var pe;typeof V.d=="number"?pe=[V.d,V.d]:V.d.length&&(pe=V.d),de=Math.min(Math.max(Math.ceil(-h(Math.abs(pe[0])/(m[2]-m[0]))),Math.ceil(-h(Math.abs(pe[1])/(m[3]-m[1])))),de)}if(de=Math.min(de,M.length),V.lod)return X(re,ee,ae,fe,de);var W=[];ue(0,0,1,0,0,1);function ue(be,Me,Pe,Ge,ze,Qe){if(!(ze===null||Qe===null)){var tt=be+Pe,Ce=Me+Pe;if(!(re>tt||ee>Ce||ae<be||fe<Me)&&!(Ge>=de)&&ze!==Qe){var Ae=M[Ge];Qe===void 0&&(Qe=Ae.length);for(var Be=ze;Be<Qe;Be++){var qe=Ae[Be],Tt=d[qe*2],At=d[qe*2+1];Tt>=ie&&Tt<=Q&&At>=se&&At<=H&&W.push(qe)}var Ne=P[Ge],ct=Ne[ze*4+0],Mt=Ne[ze*4+1],Wt=Ne[ze*4+2],qt=Ne[ze*4+3],zt=me(Ne,ze+1),$t=Pe*.5,rr=Ge+1;ue(be,Me,$t,rr,ct,Mt||Wt||qt||zt),ue(be,Me+$t,$t,rr,Mt,Wt||qt||zt),ue(be+$t,Me,$t,rr,Wt,qt||zt),ue(be+$t,Me+$t,$t,rr,qt,zt)}}}function me(be,Me){for(var Pe=null,Ge=0;Pe===null;)if(Pe=be[Me*4+Ge],Ge++,Ge>be.length)return null;return Pe}return W}function X(B,j,V,K,te){for(var $=[],ie=0;ie<te;ie++){var se=L[ie],Q=I[ie][0],H=z(B,j,ie),oe=z(V,K,ie),re=r.ge(se,H),ee=r.gt(se,oe,re,se.length-1);$[ie]=[re+Q,ee+Q]}return $}function z(B,j,V){for(var K=1,te=.5,$=.5,ie=.5,se=0;se<V;se++)K<<=2,K+=B<te?j<$?0:1:j<$?2:3,ie*=.5,te+=B<te?-ie:ie,$+=j<$?-ie:ie;return K}};function s(p,d){for(var g=d[0],b=d[1],m=d[2],x=d[3],w=1/(m-g),y=1/(x-b),T=new Array(p.length),M=0,P=p.length/2;M<P;M++)T[2*M]=a((p[2*M]-g)*w,0,1),T[2*M+1]=a((p[2*M+1]-b)*y,0,1);return T}},{"array-bounds":70,"binary-search-bounds":96,clamp:120,defined:170,dtype:175,"flatten-vertex-data":244,"is-obj":468,"math-log2":479,"parse-rect":504,"pick-by-alias":511}],59:[function(e,v,S){Object.defineProperty(S,"__esModule",{value:!0});var r=e("@turf/meta"),a=6378137;function u(o){return r.geomReduce(o,function(l,h){return l+c(h)},0)}S.default=u;function c(o){var l=0,h;switch(o.type){case"Polygon":return t(o.coordinates);case"MultiPolygon":for(h=0;h<o.coordinates.length;h++)l+=t(o.coordinates[h]);return l;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function t(o){var l=0;if(o&&o.length>0){l+=Math.abs(f(o[0]));for(var h=1;h<o.length;h++)l-=Math.abs(f(o[h]))}return l}function f(o){var l,h,i,s,p,d,g,b=0,m=o.length;if(m>2){for(g=0;g<m;g++)g===m-2?(s=m-2,p=m-1,d=0):g===m-1?(s=m-1,p=0,d=1):(s=g,p=g+1,d=g+2),l=o[s],h=o[p],i=o[d],b+=(n(i[0])-n(l[0]))*Math.sin(n(h[1]));b=b*a*a/2}return b}function n(o){return o*Math.PI/180}},{"@turf/meta":63}],60:[function(e,v,S){Object.defineProperty(S,"__esModule",{value:!0});var r=e("@turf/meta");function a(u){var c=[1/0,1/0,-1/0,-1/0];return r.coordEach(u,function(t){c[0]>t[0]&&(c[0]=t[0]),c[1]>t[1]&&(c[1]=t[1]),c[2]<t[0]&&(c[2]=t[0]),c[3]<t[1]&&(c[3]=t[1])}),c}S.default=a},{"@turf/meta":63}],61:[function(e,v,S){Object.defineProperty(S,"__esModule",{value:!0});var r=e("@turf/meta"),a=e("@turf/helpers");function u(c,t){t===void 0&&(t={});var f=0,n=0,o=0;return r.coordEach(c,function(l){f+=l[0],n+=l[1],o++}),a.point([f/o,n/o],t.properties)}S.default=u},{"@turf/helpers":62,"@turf/meta":63}],62:[function(e,v,S){Object.defineProperty(S,"__esModule",{value:!0}),S.earthRadius=63710088e-1,S.factors={centimeters:S.earthRadius*100,centimetres:S.earthRadius*100,degrees:S.earthRadius/111325,feet:S.earthRadius*3.28084,inches:S.earthRadius*39.37,kilometers:S.earthRadius/1e3,kilometres:S.earthRadius/1e3,meters:S.earthRadius,metres:S.earthRadius,miles:S.earthRadius/1609.344,millimeters:S.earthRadius*1e3,millimetres:S.earthRadius*1e3,nauticalmiles:S.earthRadius/1852,radians:1,yards:S.earthRadius/1.0936},S.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/S.earthRadius,yards:1/1.0936},S.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(X,z,B){B===void 0&&(B={});var j={type:"Feature"};return(B.id===0||B.id)&&(j.id=B.id),B.bbox&&(j.bbox=B.bbox),j.properties=z||{},j.geometry=X,j}S.feature=r;function a(X,z,B){switch(X){case"Point":return u(z).geometry;case"LineString":return n(z).geometry;case"Polygon":return t(z).geometry;case"MultiPoint":return i(z).geometry;case"MultiLineString":return h(z).geometry;case"MultiPolygon":return s(z).geometry;default:throw new Error(X+" is invalid")}}S.geometry=a;function u(X,z,B){B===void 0&&(B={});var j={type:"Point",coordinates:X};return r(j,z,B)}S.point=u;function c(X,z,B){return B===void 0&&(B={}),l(X.map(function(j){return u(j,z)}),B)}S.points=c;function t(X,z,B){B===void 0&&(B={});for(var j=0,V=X;j<V.length;j++){var K=V[j];if(K.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var te=0;te<K[K.length-1].length;te++)if(K[K.length-1][te]!==K[0][te])throw new Error("First and last Position are not equivalent.")}var $={type:"Polygon",coordinates:X};return r($,z,B)}S.polygon=t;function f(X,z,B){return B===void 0&&(B={}),l(X.map(function(j){return t(j,z)}),B)}S.polygons=f;function n(X,z,B){if(B===void 0&&(B={}),X.length<2)throw new Error("coordinates must be an array of two or more positions");var j={type:"LineString",coordinates:X};return r(j,z,B)}S.lineString=n;function o(X,z,B){return B===void 0&&(B={}),l(X.map(function(j){return n(j,z)}),B)}S.lineStrings=o;function l(X,z){z===void 0&&(z={});var B={type:"FeatureCollection"};return z.id&&(B.id=z.id),z.bbox&&(B.bbox=z.bbox),B.features=X,B}S.featureCollection=l;function h(X,z,B){B===void 0&&(B={});var j={type:"MultiLineString",coordinates:X};return r(j,z,B)}S.multiLineString=h;function i(X,z,B){B===void 0&&(B={});var j={type:"MultiPoint",coordinates:X};return r(j,z,B)}S.multiPoint=i;function s(X,z,B){B===void 0&&(B={});var j={type:"MultiPolygon",coordinates:X};return r(j,z,B)}S.multiPolygon=s;function p(X,z,B){B===void 0&&(B={});var j={type:"GeometryCollection",geometries:X};return r(j,z,B)}S.geometryCollection=p;function d(X,z){if(z===void 0&&(z=0),z&&!(z>=0))throw new Error("precision must be a positive number");var B=Math.pow(10,z||0);return Math.round(X*B)/B}S.round=d;function g(X,z){z===void 0&&(z="kilometers");var B=S.factors[z];if(!B)throw new Error(z+" units is invalid");return X*B}S.radiansToLength=g;function b(X,z){z===void 0&&(z="kilometers");var B=S.factors[z];if(!B)throw new Error(z+" units is invalid");return X/B}S.lengthToRadians=b;function m(X,z){return w(b(X,z))}S.lengthToDegrees=m;function x(X){var z=X%360;return z<0&&(z+=360),z}S.bearingToAzimuth=x;function w(X){var z=X%(2*Math.PI);return z*180/Math.PI}S.radiansToDegrees=w;function y(X){var z=X%360;return z*Math.PI/180}S.degreesToRadians=y;function T(X,z,B){if(z===void 0&&(z="kilometers"),B===void 0&&(B="kilometers"),!(X>=0))throw new Error("length must be a positive number");return g(b(X,z),B)}S.convertLength=T;function M(X,z,B){if(z===void 0&&(z="meters"),B===void 0&&(B="kilometers"),!(X>=0))throw new Error("area must be a positive number");var j=S.areaFactors[z];if(!j)throw new Error("invalid original units");var V=S.areaFactors[B];if(!V)throw new Error("invalid final units");return X/j*V}S.convertArea=M;function P(X){return!isNaN(X)&&X!==null&&!Array.isArray(X)&&!/^\s*$/.test(X)}S.isNumber=P;function L(X){return!!X&&X.constructor===Object}S.isObject=L;function I(X){if(!X)throw new Error("bbox is required");if(!Array.isArray(X))throw new Error("bbox must be an Array");if(X.length!==4&&X.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");X.forEach(function(z){if(!P(z))throw new Error("bbox must only contain numbers")})}S.validateBBox=I;function E(X){if(!X)throw new Error("id is required");if(["string","number"].indexOf(typeof X)===-1)throw new Error("id must be a number or a string")}S.validateId=E;function k(){throw new Error("method has been renamed to `radiansToDegrees`")}S.radians2degrees=k;function C(){throw new Error("method has been renamed to `degreesToRadians`")}S.degrees2radians=C;function D(){throw new Error("method has been renamed to `lengthToDegrees`")}S.distanceToDegrees=D;function F(){throw new Error("method has been renamed to `lengthToRadians`")}S.distanceToRadians=F;function N(){throw new Error("method has been renamed to `radiansToLength`")}S.radiansToDistance=N;function G(){throw new Error("method has been renamed to `bearingToAzimuth`")}S.bearingToAngle=G;function U(){throw new Error("method has been renamed to `convertLength`")}S.convertDistance=U},{}],63:[function(e,v,S){Object.defineProperty(S,"__esModule",{value:!0});var r=e("@turf/helpers");function a(w,y,T){if(w!==null)for(var M,P,L,I,E,k,C,D=0,F=0,N,G=w.type,U=G==="FeatureCollection",X=G==="Feature",z=U?w.features.length:1,B=0;B<z;B++){C=U?w.features[B].geometry:X?w.geometry:w,N=C?C.type==="GeometryCollection":!1,E=N?C.geometries.length:1;for(var j=0;j<E;j++){var V=0,K=0;if(I=N?C.geometries[j]:C,I!==null){k=I.coordinates;var te=I.type;switch(D=T&&(te==="Polygon"||te==="MultiPolygon")?1:0,te){case null:break;case"Point":if(y(k,F,B,V,K)===!1)return!1;F++,V++;break;case"LineString":case"MultiPoint":for(M=0;M<k.length;M++){if(y(k[M],F,B,V,K)===!1)return!1;F++,te==="MultiPoint"&&V++}te==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(M=0;M<k.length;M++){for(P=0;P<k[M].length-D;P++){if(y(k[M][P],F,B,V,K)===!1)return!1;F++}te==="MultiLineString"&&V++,te==="Polygon"&&K++}te==="Polygon"&&V++;break;case"MultiPolygon":for(M=0;M<k.length;M++){for(K=0,P=0;P<k[M].length;P++){for(L=0;L<k[M][P].length-D;L++){if(y(k[M][P][L],F,B,V,K)===!1)return!1;F++}K++}V++}break;case"GeometryCollection":for(M=0;M<I.geometries.length;M++)if(a(I.geometries[M],y,T)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(w,y,T,M){var P=T;return a(w,function(L,I,E,k,C){I===0&&T===void 0?P=L:P=y(P,L,I,E,k,C)},M),P}function c(w,y){var T;switch(w.type){case"FeatureCollection":for(T=0;T<w.features.length&&y(w.features[T].properties,T)!==!1;T++);break;case"Feature":y(w.properties,0);break}}function t(w,y,T){var M=T;return c(w,function(P,L){L===0&&T===void 0?M=P:M=y(M,P,L)}),M}function f(w,y){if(w.type==="Feature")y(w,0);else if(w.type==="FeatureCollection")for(var T=0;T<w.features.length&&y(w.features[T],T)!==!1;T++);}function n(w,y,T){var M=T;return f(w,function(P,L){L===0&&T===void 0?M=P:M=y(M,P,L)}),M}function o(w){var y=[];return a(w,function(T){y.push(T)}),y}function l(w,y){var T,M,P,L,I,E,k,C,D,F,N=0,G=w.type==="FeatureCollection",U=w.type==="Feature",X=G?w.features.length:1;for(T=0;T<X;T++){for(E=G?w.features[T].geometry:U?w.geometry:w,C=G?w.features[T].properties:U?w.properties:{},D=G?w.features[T].bbox:U?w.bbox:void 0,F=G?w.features[T].id:U?w.id:void 0,k=E?E.type==="GeometryCollection":!1,I=k?E.geometries.length:1,P=0;P<I;P++){if(L=k?E.geometries[P]:E,L===null){if(y(null,N,C,D,F)===!1)return!1;continue}switch(L.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(y(L,N,C,D,F)===!1)return!1;break}case"GeometryCollection":{for(M=0;M<L.geometries.length;M++)if(y(L.geometries[M],N,C,D,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}N++}}function h(w,y,T){var M=T;return l(w,function(P,L,I,E,k){L===0&&T===void 0?M=P:M=y(M,P,L,I,E,k)}),M}function i(w,y){l(w,function(T,M,P,L,I){var E=T===null?null:T.type;switch(E){case null:case"Point":case"LineString":case"Polygon":return y(r.feature(T,P,{bbox:L,id:I}),M,0)===!1?!1:void 0}var k;switch(E){case"MultiPoint":k="Point";break;case"MultiLineString":k="LineString";break;case"MultiPolygon":k="Polygon";break}for(var C=0;C<T.coordinates.length;C++){var D=T.coordinates[C],F={type:k,coordinates:D};if(y(r.feature(F,P),M,C)===!1)return!1}})}function s(w,y,T){var M=T;return i(w,function(P,L,I){L===0&&I===0&&T===void 0?M=P:M=y(M,P,L,I)}),M}function p(w,y){i(w,function(T,M,P){var L=0;if(!!T.geometry){var I=T.geometry.type;if(!(I==="Point"||I==="MultiPoint")){var E,k=0,C=0,D=0;if(a(T,function(F,N,G,U,X){if(E===void 0||M>k||U>C||X>D){E=F,k=M,C=U,D=X,L=0;return}var z=r.lineString([E,F],T.properties);if(y(z,M,P,X,L)===!1)return!1;L++,E=F})===!1)return!1}}})}function d(w,y,T){var M=T,P=!1;return p(w,function(L,I,E,k,C){P===!1&&T===void 0?M=L:M=y(M,L,I,E,k,C),P=!0}),M}function g(w,y){if(!w)throw new Error("geojson is required");i(w,function(T,M,P){if(T.geometry!==null){var L=T.geometry.type,I=T.geometry.coordinates;switch(L){case"LineString":if(y(T,M,P,0,0)===!1)return!1;break;case"Polygon":for(var E=0;E<I.length;E++)if(y(r.lineString(I[E],T.properties),M,P,E)===!1)return!1;break}}})}function b(w,y,T){var M=T;return g(w,function(P,L,I,E){L===0&&T===void 0?M=P:M=y(M,P,L,I,E)}),M}function m(w,y){if(y=y||{},!r.isObject(y))throw new Error("options is invalid");var T=y.featureIndex||0,M=y.multiFeatureIndex||0,P=y.geometryIndex||0,L=y.segmentIndex||0,I=y.properties,E;switch(w.type){case"FeatureCollection":T<0&&(T=w.features.length+T),I=I||w.features[T].properties,E=w.features[T].geometry;break;case"Feature":I=I||w.properties,E=w.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":E=w;break;default:throw new Error("geojson is invalid")}if(E===null)return null;var k=E.coordinates;switch(E.type){case"Point":case"MultiPoint":return null;case"LineString":return L<0&&(L=k.length+L-1),r.lineString([k[L],k[L+1]],I,y);case"Polygon":return P<0&&(P=k.length+P),L<0&&(L=k[P].length+L-1),r.lineString([k[P][L],k[P][L+1]],I,y);case"MultiLineString":return M<0&&(M=k.length+M),L<0&&(L=k[M].length+L-1),r.lineString([k[M][L],k[M][L+1]],I,y);case"MultiPolygon":return M<0&&(M=k.length+M),P<0&&(P=k[M].length+P),L<0&&(L=k[M][P].length-L-1),r.lineString([k[M][P][L],k[M][P][L+1]],I,y)}throw new Error("geojson is invalid")}function x(w,y){if(y=y||{},!r.isObject(y))throw new Error("options is invalid");var T=y.featureIndex||0,M=y.multiFeatureIndex||0,P=y.geometryIndex||0,L=y.coordIndex||0,I=y.properties,E;switch(w.type){case"FeatureCollection":T<0&&(T=w.features.length+T),I=I||w.features[T].properties,E=w.features[T].geometry;break;case"Feature":I=I||w.properties,E=w.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":E=w;break;default:throw new Error("geojson is invalid")}if(E===null)return null;var k=E.coordinates;switch(E.type){case"Point":return r.point(k,I,y);case"MultiPoint":return M<0&&(M=k.length+M),r.point(k[M],I,y);case"LineString":return L<0&&(L=k.length+L),r.point(k[L],I,y);case"Polygon":return P<0&&(P=k.length+P),L<0&&(L=k[P].length+L),r.point(k[P][L],I,y);case"MultiLineString":return M<0&&(M=k.length+M),L<0&&(L=k[M].length+L),r.point(k[M][L],I,y);case"MultiPolygon":return M<0&&(M=k.length+M),P<0&&(P=k[M].length+P),L<0&&(L=k[M][P].length-L),r.point(k[M][P][L],I,y)}throw new Error("geojson is invalid")}S.coordEach=a,S.coordReduce=u,S.propEach=c,S.propReduce=t,S.featureEach=f,S.featureReduce=n,S.coordAll=o,S.geomEach=l,S.geomReduce=h,S.flattenEach=i,S.flattenReduce=s,S.segmentEach=p,S.segmentReduce=d,S.lineEach=g,S.lineReduce=b,S.findSegment=m,S.findPoint=x},{"@turf/helpers":62}],64:[function(e,v,S){var r=typeof WeakMap>"u"?e("weak-map"):WeakMap,a=e("gl-buffer"),u=e("gl-vao"),c=new r;function t(f){var n=c.get(f),o=n&&(n._triangleBuffer.handle||n._triangleBuffer.buffer);if(!o||!f.isBuffer(o)){var l=a(f,new Float32Array([-1,-1,-1,4,4,-1]));n=u(f,[{buffer:l,type:f.FLOAT,size:2}]),n._triangleBuffer=l,c.set(f,n)}n.bind(),f.drawArrays(f.TRIANGLES,0,3),n.unbind()}v.exports=t},{"gl-buffer":259,"gl-vao":358,"weak-map":602}],65:[function(e,v,S){v.exports=r;function r(a){var u=0,c=0,t=0,f=0;return a.map(function(n){n=n.slice();var o=n[0],l=o.toUpperCase();if(o!=l)switch(n[0]=l,o){case"a":n[6]+=t,n[7]+=f;break;case"v":n[1]+=f;break;case"h":n[1]+=t;break;default:for(var h=1;h<n.length;)n[h++]+=t,n[h++]+=f}switch(l){case"Z":t=u,f=c;break;case"H":t=n[1];break;case"V":f=n[1];break;case"M":t=u=n[1],f=c=n[2];break;default:t=n[n.length-2],f=n[n.length-1]}return n})}},{}],66:[function(e,v,S){var r=e("pad-left");v.exports=a;function a(u,c,t){c=typeof c=="number"?c:1,t=t||": ";var f=u.split(/\r?\n/),n=String(f.length+c-1).length;return f.map(function(o,l){var h=l+c,i=String(h).length,s=r(h,n-i);return s+t+o}).join(`
`)}},{"pad-left":502}],67:[function(e,v,S){v.exports=u;var r=e("robust-orientation");function a(c,t){for(var f=new Array(t+1),n=0;n<c.length;++n)f[n]=c[n];for(var n=0;n<=c.length;++n){for(var o=c.length;o<=t;++o){for(var l=new Array(t),h=0;h<t;++h)l[h]=Math.pow(o+1-n,h);f[o]=l}var i=r.apply(void 0,f);if(i)return!0}return!1}function u(c){var t=c.length;if(t===0)return[];if(t===1)return[0];for(var f=c[0].length,n=[c[0]],o=[0],l=1;l<t;++l){if(n.push(c[l]),!a(n,f)){n.pop();continue}if(o.push(l),o.length===f+1)return o}return o}},{"robust-orientation":548}],68:[function(e,v,S){v.exports=u;var r=e("delaunay-triangulate"),a=e("circumradius");function u(c,t){return r(t).filter(function(f){for(var n=new Array(f.length),o=0;o<f.length;++o)n[o]=t[f[o]];return a(n)*c<1})}},{circumradius:119,"delaunay-triangulate":171}],69:[function(e,v,S){v.exports=u;var r=e("alpha-complex"),a=e("simplicial-complex-boundary");function u(c,t){return a(r(c,t))}},{"alpha-complex":68,"simplicial-complex-boundary":555}],70:[function(e,v,S){v.exports=r;function r(a,u){if(!a||a.length==null)throw Error("Argument should be an array");u==null?u=1:u=Math.floor(u);for(var c=Array(u*2),t=0;t<u;t++){for(var f=-1/0,n=1/0,o=t,l=a.length;o<l;o+=u)a[o]>f&&(f=a[o]),a[o]<n&&(n=a[o]);c[t]=n,c[u+t]=f}return c}},{}],71:[function(e,v,S){var r=e("array-bounds");v.exports=a;function a(u,c,t){if(!u||u.length==null)throw Error("Argument should be an array");c==null&&(c=1),t==null&&(t=r(u,c));for(var f=0;f<c;f++){var n=t[c+f],o=t[f],l=f,h=u.length;if(n===1/0&&o===-1/0)for(l=f;l<h;l+=c)u[l]=u[l]===n?1:u[l]===o?0:.5;else if(n===1/0)for(l=f;l<h;l+=c)u[l]=u[l]===n?1:0;else if(o===-1/0)for(l=f;l<h;l+=c)u[l]=u[l]===o?0:1;else{var i=n-o;for(l=f;l<h;l+=c)isNaN(u[l])||(u[l]=i===0?.5:(u[l]-o)/i)}}return u}},{"array-bounds":70}],72:[function(e,v,S){v.exports=function(a,u){var c=typeof a=="number",t=typeof u=="number";c&&!t?(u=a,a=0):!c&&!t&&(a=0,u=0),a=a|0,u=u|0;var f=u-a;if(f<0)throw new Error("array length must be positive");for(var n=new Array(f),o=0,l=a;o<f;o++,l++)n[o]=l;return n}},{}],73:[function(e,v,S){(function(r){(function(){var a=e("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function u(C,D){if(C===D)return 0;for(var F=C.length,N=D.length,G=0,U=Math.min(F,N);G<U;++G)if(C[G]!==D[G]){F=C[G],N=D[G];break}return F<N?-1:N<F?1:0}function c(C){return r.Buffer&&typeof r.Buffer.isBuffer=="function"?r.Buffer.isBuffer(C):!!(C!=null&&C._isBuffer)}var t=e("util/"),f=Object.prototype.hasOwnProperty,n=Array.prototype.slice,o=function(){return function(){}.name==="foo"}();function l(C){return Object.prototype.toString.call(C)}function h(C){return c(C)||typeof r.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(C):C?!!(C instanceof DataView||C.buffer&&C.buffer instanceof ArrayBuffer):!1}var i=v.exports=x,s=/\s*function\s+([^\(\s]*)\s*/;function p(C){if(!!t.isFunction(C)){if(o)return C.name;var D=C.toString(),F=D.match(s);return F&&F[1]}}i.AssertionError=function(D){this.name="AssertionError",this.actual=D.actual,this.expected=D.expected,this.operator=D.operator,D.message?(this.message=D.message,this.generatedMessage=!1):(this.message=b(this),this.generatedMessage=!0);var F=D.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,F);else{var N=new Error;if(N.stack){var G=N.stack,U=p(F),X=G.indexOf(`
`+U);if(X>=0){var z=G.indexOf(`
`,X+1);G=G.substring(z+1)}this.stack=G}}},t.inherits(i.AssertionError,Error);function d(C,D){return typeof C=="string"?C.length<D?C:C.slice(0,D):C}function g(C){if(o||!t.isFunction(C))return t.inspect(C);var D=p(C),F=D?": "+D:"";return"[Function"+F+"]"}function b(C){return d(g(C.actual),128)+" "+C.operator+" "+d(g(C.expected),128)}function m(C,D,F,N,G){throw new i.AssertionError({message:F,actual:C,expected:D,operator:N,stackStartFunction:G})}i.fail=m;function x(C,D){C||m(C,!0,D,"==",i.ok)}i.ok=x,i.equal=function(D,F,N){D!=F&&m(D,F,N,"==",i.equal)},i.notEqual=function(D,F,N){D==F&&m(D,F,N,"!=",i.notEqual)},i.deepEqual=function(D,F,N){w(D,F,!1)||m(D,F,N,"deepEqual",i.deepEqual)},i.deepStrictEqual=function(D,F,N){w(D,F,!0)||m(D,F,N,"deepStrictEqual",i.deepStrictEqual)};function w(C,D,F,N){if(C===D)return!0;if(c(C)&&c(D))return u(C,D)===0;if(t.isDate(C)&&t.isDate(D))return C.getTime()===D.getTime();if(t.isRegExp(C)&&t.isRegExp(D))return C.source===D.source&&C.global===D.global&&C.multiline===D.multiline&&C.lastIndex===D.lastIndex&&C.ignoreCase===D.ignoreCase;if((C===null||typeof C!="object")&&(D===null||typeof D!="object"))return F?C===D:C==D;if(h(C)&&h(D)&&l(C)===l(D)&&!(C instanceof Float32Array||C instanceof Float64Array))return u(new Uint8Array(C.buffer),new Uint8Array(D.buffer))===0;if(c(C)!==c(D))return!1;N=N||{actual:[],expected:[]};var G=N.actual.indexOf(C);return G!==-1&&G===N.expected.indexOf(D)?!0:(N.actual.push(C),N.expected.push(D),T(C,D,F,N))}function y(C){return Object.prototype.toString.call(C)=="[object Arguments]"}function T(C,D,F,N){if(C==null||D===null||D===void 0)return!1;if(t.isPrimitive(C)||t.isPrimitive(D))return C===D;if(F&&Object.getPrototypeOf(C)!==Object.getPrototypeOf(D))return!1;var G=y(C),U=y(D);if(G&&!U||!G&&U)return!1;if(G)return C=n.call(C),D=n.call(D),w(C,D,F);var X=k(C),z=k(D),B,j;if(X.length!==z.length)return!1;for(X.sort(),z.sort(),j=X.length-1;j>=0;j--)if(X[j]!==z[j])return!1;for(j=X.length-1;j>=0;j--)if(B=X[j],!w(C[B],D[B],F,N))return!1;return!0}i.notDeepEqual=function(D,F,N){w(D,F,!1)&&m(D,F,N,"notDeepEqual",i.notDeepEqual)},i.notDeepStrictEqual=M;function M(C,D,F){w(C,D,!0)&&m(C,D,F,"notDeepStrictEqual",M)}i.strictEqual=function(D,F,N){D!==F&&m(D,F,N,"===",i.strictEqual)},i.notStrictEqual=function(D,F,N){D===F&&m(D,F,N,"!==",i.notStrictEqual)};function P(C,D){if(!C||!D)return!1;if(Object.prototype.toString.call(D)=="[object RegExp]")return D.test(C);try{if(C instanceof D)return!0}catch{}return Error.isPrototypeOf(D)?!1:D.call({},C)===!0}function L(C){var D;try{C()}catch(F){D=F}return D}function I(C,D,F,N){var G;if(typeof D!="function")throw new TypeError('"block" argument must be a function');typeof F=="string"&&(N=F,F=null),G=L(D),N=(F&&F.name?" ("+F.name+").":".")+(N?" "+N:"."),C&&!G&&m(G,F,"Missing expected exception"+N);var U=typeof N=="string",X=!C&&t.isError(G),z=!C&&G&&!F;if((X&&U&&P(G,F)||z)&&m(G,F,"Got unwanted exception"+N),C&&G&&F&&!P(G,F)||!C&&G)throw G}i.throws=function(C,D,F){I(!0,C,D,F)},i.doesNotThrow=function(C,D,F){I(!1,C,D,F)},i.ifError=function(C){if(C)throw C};function E(C,D){C||m(C,!0,D,"==",E)}i.strict=a(E,i,{equal:i.strictEqual,deepEqual:i.deepStrictEqual,notEqual:i.notStrictEqual,notDeepEqual:i.notDeepStrictEqual}),i.strict.strict=i.strict;var k=Object.keys||function(C){var D=[];for(var F in C)f.call(C,F)&&D.push(F);return D}}).call(this)}).call(this,typeof Hs<"u"?Hs:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":499,"util/":76}],74:[function(e,v,S){typeof Object.create=="function"?v.exports=function(a,u){a.super_=u,a.prototype=Object.create(u.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:v.exports=function(a,u){a.super_=u;var c=function(){};c.prototype=u.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],75:[function(e,v,S){v.exports=function(a){return a&&typeof a=="object"&&typeof a.copy=="function"&&typeof a.fill=="function"&&typeof a.readUInt8=="function"}},{}],76:[function(e,v,S){(function(r,a){(function(){var u=/%[sdj%]/g;S.format=function(z){if(!T(z)){for(var B=[],j=0;j<arguments.length;j++)B.push(f(arguments[j]));return B.join(" ")}for(var j=1,V=arguments,K=V.length,te=String(z).replace(u,function(ie){if(ie==="%%")return"%";if(j>=K)return ie;switch(ie){case"%s":return String(V[j++]);case"%d":return Number(V[j++]);case"%j":try{return JSON.stringify(V[j++])}catch{return"[Circular]"}default:return ie}}),$=V[j];j<K;$=V[++j])x($)||!I($)?te+=" "+$:te+=" "+f($);return te},S.deprecate=function(z,B){if(P(a.process))return function(){return S.deprecate(z,B).apply(this,arguments)};if(r.noDeprecation===!0)return z;var j=!1;function V(){if(!j){if(r.throwDeprecation)throw new Error(B);r.traceDeprecation?console.trace(B):console.error(B),j=!0}return z.apply(this,arguments)}return V};var c={},t;S.debuglog=function(z){if(P(t)&&(t=r.env.NODE_DEBUG||""),z=z.toUpperCase(),!c[z])if(new RegExp("\\b"+z+"\\b","i").test(t)){var B=r.pid;c[z]=function(){var j=S.format.apply(S,arguments);console.error("%s %d: %s",z,B,j)}}else c[z]=function(){};return c[z]};function f(z,B){var j={seen:[],stylize:o};return arguments.length>=3&&(j.depth=arguments[2]),arguments.length>=4&&(j.colors=arguments[3]),m(B)?j.showHidden=B:B&&S._extend(j,B),P(j.showHidden)&&(j.showHidden=!1),P(j.depth)&&(j.depth=2),P(j.colors)&&(j.colors=!1),P(j.customInspect)&&(j.customInspect=!0),j.colors&&(j.stylize=n),h(j,z,j.depth)}S.inspect=f,f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function n(z,B){var j=f.styles[B];return j?"\x1B["+f.colors[j][0]+"m"+z+"\x1B["+f.colors[j][1]+"m":z}function o(z,B){return z}function l(z){var B={};return z.forEach(function(j,V){B[j]=!0}),B}function h(z,B,j){if(z.customInspect&&B&&C(B.inspect)&&B.inspect!==S.inspect&&!(B.constructor&&B.constructor.prototype===B)){var V=B.inspect(j,z);return T(V)||(V=h(z,V,j)),V}var K=i(z,B);if(K)return K;var te=Object.keys(B),$=l(te);if(z.showHidden&&(te=Object.getOwnPropertyNames(B)),k(B)&&(te.indexOf("message")>=0||te.indexOf("description")>=0))return s(B);if(te.length===0){if(C(B)){var ie=B.name?": "+B.name:"";return z.stylize("[Function"+ie+"]","special")}if(L(B))return z.stylize(RegExp.prototype.toString.call(B),"regexp");if(E(B))return z.stylize(Date.prototype.toString.call(B),"date");if(k(B))return s(B)}var se="",Q=!1,H=["{","}"];if(b(B)&&(Q=!0,H=["[","]"]),C(B)){var oe=B.name?": "+B.name:"";se=" [Function"+oe+"]"}if(L(B)&&(se=" "+RegExp.prototype.toString.call(B)),E(B)&&(se=" "+Date.prototype.toUTCString.call(B)),k(B)&&(se=" "+s(B)),te.length===0&&(!Q||B.length==0))return H[0]+se+H[1];if(j<0)return L(B)?z.stylize(RegExp.prototype.toString.call(B),"regexp"):z.stylize("[Object]","special");z.seen.push(B);var re;return Q?re=p(z,B,j,$,te):re=te.map(function(ee){return d(z,B,j,$,ee,Q)}),z.seen.pop(),g(re,se,H)}function i(z,B){if(P(B))return z.stylize("undefined","undefined");if(T(B)){var j="'"+JSON.stringify(B).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(j,"string")}if(y(B))return z.stylize(""+B,"number");if(m(B))return z.stylize(""+B,"boolean");if(x(B))return z.stylize("null","null")}function s(z){return"["+Error.prototype.toString.call(z)+"]"}function p(z,B,j,V,K){for(var te=[],$=0,ie=B.length;$<ie;++$)X(B,String($))?te.push(d(z,B,j,V,String($),!0)):te.push("");return K.forEach(function(se){se.match(/^\d+$/)||te.push(d(z,B,j,V,se,!0))}),te}function d(z,B,j,V,K,te){var $,ie,se;if(se=Object.getOwnPropertyDescriptor(B,K)||{value:B[K]},se.get?se.set?ie=z.stylize("[Getter/Setter]","special"):ie=z.stylize("[Getter]","special"):se.set&&(ie=z.stylize("[Setter]","special")),X(V,K)||($="["+K+"]"),ie||(z.seen.indexOf(se.value)<0?(x(j)?ie=h(z,se.value,null):ie=h(z,se.value,j-1),ie.indexOf(`
`)>-1&&(te?ie=ie.split(`
`).map(function(Q){return"  "+Q}).join(`
`).substr(2):ie=`
`+ie.split(`
`).map(function(Q){return"   "+Q}).join(`
`))):ie=z.stylize("[Circular]","special")),P($)){if(te&&K.match(/^\d+$/))return ie;$=JSON.stringify(""+K),$.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?($=$.substr(1,$.length-2),$=z.stylize($,"name")):($=$.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),$=z.stylize($,"string"))}return $+": "+ie}function g(z,B,j){var V=z.reduce(function(K,te){return te.indexOf(`
`)>=0,K+te.replace(/\u001b\[\d\d?m/g,"").length+1},0);return V>60?j[0]+(B===""?"":B+`
 `)+" "+z.join(`,
  `)+" "+j[1]:j[0]+B+" "+z.join(", ")+" "+j[1]}function b(z){return Array.isArray(z)}S.isArray=b;function m(z){return typeof z=="boolean"}S.isBoolean=m;function x(z){return z===null}S.isNull=x;function w(z){return z==null}S.isNullOrUndefined=w;function y(z){return typeof z=="number"}S.isNumber=y;function T(z){return typeof z=="string"}S.isString=T;function M(z){return typeof z=="symbol"}S.isSymbol=M;function P(z){return z===void 0}S.isUndefined=P;function L(z){return I(z)&&F(z)==="[object RegExp]"}S.isRegExp=L;function I(z){return typeof z=="object"&&z!==null}S.isObject=I;function E(z){return I(z)&&F(z)==="[object Date]"}S.isDate=E;function k(z){return I(z)&&(F(z)==="[object Error]"||z instanceof Error)}S.isError=k;function C(z){return typeof z=="function"}S.isFunction=C;function D(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}S.isPrimitive=D,S.isBuffer=e("./support/isBuffer");function F(z){return Object.prototype.toString.call(z)}function N(z){return z<10?"0"+z.toString(10):z.toString(10)}var G=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function U(){var z=new Date,B=[N(z.getHours()),N(z.getMinutes()),N(z.getSeconds())].join(":");return[z.getDate(),G[z.getMonth()],B].join(" ")}S.log=function(){console.log("%s - %s",U(),S.format.apply(S,arguments))},S.inherits=e("inherits"),S._extend=function(z,B){if(!B||!I(B))return z;for(var j=Object.keys(B),V=j.length;V--;)z[j[V]]=B[j[V]];return z};function X(z,B){return Object.prototype.hasOwnProperty.call(z,B)}}).call(this)}).call(this,e("_process"),typeof Hs<"u"?Hs:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":75,_process:526,inherits:74}],77:[function(e,v,S){v.exports=function(a){return atob(a)}},{}],78:[function(e,v,S){v.exports=u;var r=e("robust-linear-solve");function a(c){for(var t=0,f=0;f<c.length;++f)t+=c[f];return t}function u(c,t){for(var f=t.length,n=new Array(f+1),o=0;o<f;++o){for(var l=new Array(f+1),h=0;h<=f;++h)l[h]=c[h][o];n[o]=l}n[f]=new Array(f+1);for(var o=0;o<=f;++o)n[f][o]=1;for(var i=new Array(f+1),o=0;o<f;++o)i[o]=t[o];i[f]=1;var s=r(n,i),p=a(s[f+1]);p===0&&(p=1);for(var d=new Array(f+1),o=0;o<=f;++o)d[o]=a(s[o])/p;return d}},{"robust-linear-solve":547}],79:[function(e,v,S){S.byteLength=o,S.toByteArray=h,S.fromByteArray=p;for(var r=[],a=[],u=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,f=c.length;t<f;++t)r[t]=c[t],a[c.charCodeAt(t)]=t;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function n(d){var g=d.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=d.indexOf("=");b===-1&&(b=g);var m=b===g?0:4-b%4;return[b,m]}function o(d){var g=n(d),b=g[0],m=g[1];return(b+m)*3/4-m}function l(d,g,b){return(g+b)*3/4-b}function h(d){var g,b=n(d),m=b[0],x=b[1],w=new u(l(d,m,x)),y=0,T=x>0?m-4:m,M;for(M=0;M<T;M+=4)g=a[d.charCodeAt(M)]<<18|a[d.charCodeAt(M+1)]<<12|a[d.charCodeAt(M+2)]<<6|a[d.charCodeAt(M+3)],w[y++]=g>>16&255,w[y++]=g>>8&255,w[y++]=g&255;return x===2&&(g=a[d.charCodeAt(M)]<<2|a[d.charCodeAt(M+1)]>>4,w[y++]=g&255),x===1&&(g=a[d.charCodeAt(M)]<<10|a[d.charCodeAt(M+1)]<<4|a[d.charCodeAt(M+2)]>>2,w[y++]=g>>8&255,w[y++]=g&255),w}function i(d){return r[d>>18&63]+r[d>>12&63]+r[d>>6&63]+r[d&63]}function s(d,g,b){for(var m,x=[],w=g;w<b;w+=3)m=(d[w]<<16&16711680)+(d[w+1]<<8&65280)+(d[w+2]&255),x.push(i(m));return x.join("")}function p(d){for(var g,b=d.length,m=b%3,x=[],w=16383,y=0,T=b-m;y<T;y+=w)x.push(s(d,y,y+w>T?T:y+w));return m===1?(g=d[b-1],x.push(r[g>>2]+r[g<<4&63]+"==")):m===2&&(g=(d[b-2]<<8)+d[b-1],x.push(r[g>>10]+r[g>>4&63]+r[g<<2&63]+"=")),x.join("")}},{}],80:[function(e,v,S){var r=e("./lib/rationalize");v.exports=a;function a(u,c){return r(u[0].mul(c[1]).add(c[0].mul(u[1])),u[1].mul(c[1]))}},{"./lib/rationalize":90}],81:[function(e,v,S){v.exports=r;function r(a,u){return a[0].mul(u[1]).cmp(u[0].mul(a[1]))}},{}],82:[function(e,v,S){var r=e("./lib/rationalize");v.exports=a;function a(u,c){return r(u[0].mul(c[1]),u[1].mul(c[0]))}},{"./lib/rationalize":90}],83:[function(e,v,S){var r=e("./is-rat"),a=e("./lib/is-bn"),u=e("./lib/num-to-bn"),c=e("./lib/str-to-bn"),t=e("./lib/rationalize"),f=e("./div");v.exports=n;function n(o,l){if(r(o))return l?f(o,n(l)):[o[0].clone(),o[1].clone()];var h=0,i,s;if(a(o))i=o.clone();else if(typeof o=="string")i=c(o);else{if(o===0)return[u(0),u(1)];if(o===Math.floor(o))i=u(o);else{for(;o!==Math.floor(o);)o=o*Math.pow(2,256),h-=256;i=u(o)}}if(r(l))i.mul(l[1]),s=l[0].clone();else if(a(l))s=l.clone();else if(typeof l=="string")s=c(l);else if(!l)s=u(1);else if(l===Math.floor(l))s=u(l);else{for(;l!==Math.floor(l);)l=l*Math.pow(2,256),h+=256;s=u(l)}return h>0?i=i.ushln(h):h<0&&(s=s.ushln(-h)),t(i,s)}},{"./div":82,"./is-rat":84,"./lib/is-bn":88,"./lib/num-to-bn":89,"./lib/rationalize":90,"./lib/str-to-bn":91}],84:[function(e,v,S){var r=e("./lib/is-bn");v.exports=a;function a(u){return Array.isArray(u)&&u.length===2&&r(u[0])&&r(u[1])}},{"./lib/is-bn":88}],85:[function(e,v,S){var r=e("bn.js");v.exports=a;function a(u){return u.cmp(new r(0))}},{"bn.js":99}],86:[function(e,v,S){var r=e("./bn-sign");v.exports=a;function a(u){var c=u.length,t=u.words,f=0;if(c===1)f=t[0];else if(c===2)f=t[0]+t[1]*67108864;else for(var n=0;n<c;n++){var o=t[n];f+=o*Math.pow(67108864,n)}return r(u)*f}},{"./bn-sign":85}],87:[function(e,v,S){var r=e("double-bits"),a=e("bit-twiddle").countTrailingZeros;v.exports=u;function u(c){var t=a(r.lo(c));if(t<32)return t;var f=a(r.hi(c));return f>20?52:f+32}},{"bit-twiddle":97,"double-bits":173}],88:[function(e,v,S){e("bn.js"),v.exports=r;function r(a){return a&&typeof a=="object"&&Boolean(a.words)}},{"bn.js":99}],89:[function(e,v,S){var r=e("bn.js"),a=e("double-bits");v.exports=u;function u(c){var t=a.exponent(c);return t<52?new r(c):new r(c*Math.pow(2,52-t)).ushln(t-52)}},{"bn.js":99,"double-bits":173}],90:[function(e,v,S){var r=e("./num-to-bn"),a=e("./bn-sign");v.exports=u;function u(c,t){var f=a(c),n=a(t);if(f===0)return[r(0),r(1)];if(n===0)return[r(0),r(0)];n<0&&(c=c.neg(),t=t.neg());var o=c.gcd(t);return o.cmpn(1)?[c.div(o),t.div(o)]:[c,t]}},{"./bn-sign":85,"./num-to-bn":89}],91:[function(e,v,S){var r=e("bn.js");v.exports=a;function a(u){return new r(u)}},{"bn.js":99}],92:[function(e,v,S){var r=e("./lib/rationalize");v.exports=a;function a(u,c){return r(u[0].mul(c[0]),u[1].mul(c[1]))}},{"./lib/rationalize":90}],93:[function(e,v,S){var r=e("./lib/bn-sign");v.exports=a;function a(u){return r(u[0])*r(u[1])}},{"./lib/bn-sign":85}],94:[function(e,v,S){var r=e("./lib/rationalize");v.exports=a;function a(u,c){return r(u[0].mul(c[1]).sub(u[1].mul(c[0])),u[1].mul(c[1]))}},{"./lib/rationalize":90}],95:[function(e,v,S){var r=e("./lib/bn-to-num"),a=e("./lib/ctz");v.exports=u;function u(c){var t=c[0],f=c[1];if(t.cmpn(0)===0)return 0;var n=t.abs().divmod(f.abs()),o=n.div,l=r(o),h=n.mod,i=t.negative!==f.negative?-1:1;if(h.cmpn(0)===0)return i*l;if(l){var s=a(l)+4,p=r(h.ushln(s).divRound(f));return i*(l+p*Math.pow(2,-s))}else{var d=f.bitLength()-h.bitLength()+53,p=r(h.ushln(d).divRound(f));return d<1023?i*p*Math.pow(2,-d):(p*=Math.pow(2,-1023),i*p*Math.pow(2,1023-d))}}},{"./lib/bn-to-num":86,"./lib/ctz":87}],96:[function(e,v,S){function r(u,c,t,f,n){var o=["function ",u,"(a,l,h,",f.join(","),"){",n?"":"var i=",t?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return n?c.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",c,"){i=m;"),t?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),n?o.push("return -1};"):o.push("return i};"),o.join("")}function a(u,c,t,f){var n=new Function([r("A","x"+u+"y",c,["y"],f),r("P","c(x,y)"+u+"0",c,["y","c"],f),"function dispatchBsearch",t,"(a,y,c,l,h){	if(typeof(c)==='function'){	return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)	}else{	return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)	}}	return dispatchBsearch",t].join(""));return n()}v.exports={ge:a(">=",!1,"GE"),gt:a(">",!1,"GT"),lt:a("<",!0,"LT"),le:a("<=",!0,"LE"),eq:a("-",!0,"EQ",!0)}},{}],97:[function(e,v,S){var r=32;S.INT_BITS=r,S.INT_MAX=2147483647,S.INT_MIN=-1<<r-1,S.sign=function(c){return(c>0)-(c<0)},S.abs=function(c){var t=c>>r-1;return(c^t)-t},S.min=function(c,t){return t^(c^t)&-(c<t)},S.max=function(c,t){return c^(c^t)&-(c<t)},S.isPow2=function(c){return!(c&c-1)&&!!c},S.log2=function(c){var t,f;return t=(c>65535)<<4,c>>>=t,f=(c>255)<<3,c>>>=f,t|=f,f=(c>15)<<2,c>>>=f,t|=f,f=(c>3)<<1,c>>>=f,t|=f,t|c>>1},S.log10=function(c){return c>=1e9?9:c>=1e8?8:c>=1e7?7:c>=1e6?6:c>=1e5?5:c>=1e4?4:c>=1e3?3:c>=100?2:c>=10?1:0},S.popCount=function(c){return c=c-(c>>>1&1431655765),c=(c&858993459)+(c>>>2&858993459),(c+(c>>>4)&252645135)*16843009>>>24};function a(c){var t=32;return c&=-c,c&&t--,c&65535&&(t-=16),c&16711935&&(t-=8),c&252645135&&(t-=4),c&858993459&&(t-=2),c&1431655765&&(t-=1),t}S.countTrailingZeros=a,S.nextPow2=function(c){return c+=c===0,--c,c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c+1},S.prevPow2=function(c){return c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c-(c>>>1)},S.parity=function(c){return c^=c>>>16,c^=c>>>8,c^=c>>>4,c&=15,27030>>>c&1};var u=new Array(256);(function(c){for(var t=0;t<256;++t){var f=t,n=t,o=7;for(f>>>=1;f;f>>>=1)n<<=1,n|=f&1,--o;c[t]=n<<o&255}})(u),S.reverse=function(c){return u[c&255]<<24|u[c>>>8&255]<<16|u[c>>>16&255]<<8|u[c>>>24&255]},S.interleave2=function(c,t){return c&=65535,c=(c|c<<8)&16711935,c=(c|c<<4)&252645135,c=(c|c<<2)&858993459,c=(c|c<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,c|t<<1},S.deinterleave2=function(c,t){return c=c>>>t&1431655765,c=(c|c>>>1)&858993459,c=(c|c>>>2)&252645135,c=(c|c>>>4)&16711935,c=(c|c>>>16)&65535,c<<16>>16},S.interleave3=function(c,t,f){return c&=1023,c=(c|c<<16)&4278190335,c=(c|c<<8)&251719695,c=(c|c<<4)&3272356035,c=(c|c<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,c|=t<<1,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,c|f<<2},S.deinterleave3=function(c,t){return c=c>>>t&1227133513,c=(c|c>>>2)&3272356035,c=(c|c>>>4)&251719695,c=(c|c>>>8)&4278190335,c=(c|c>>>16)&1023,c<<22>>22},S.nextCombination=function(c){var t=c|c-1;return t+1|(~t&-~t)-1>>>a(c)+1}},{}],98:[function(e,v,S){var r=e("clamp");v.exports=u;var a=1e20;function u(f,n){n||(n={});var o=n.cutoff==null?.25:n.cutoff,l=n.radius==null?8:n.radius,h=n.channel||0,i,s,p,d,g,b,m,x,w,y,T;if(ArrayBuffer.isView(f)||Array.isArray(f)){if(!n.width||!n.height)throw Error("For raw data width and height should be provided by options");i=n.width,s=n.height,d=f,n.stride?b=n.stride:b=Math.floor(f.length/i/s)}else window.HTMLCanvasElement&&f instanceof window.HTMLCanvasElement?(x=f,m=x.getContext("2d"),i=x.width,s=x.height,w=m.getImageData(0,0,i,s),d=w.data,b=4):window.CanvasRenderingContext2D&&f instanceof window.CanvasRenderingContext2D?(x=f.canvas,m=f,i=x.width,s=x.height,w=m.getImageData(0,0,i,s),d=w.data,b=4):window.ImageData&&f instanceof window.ImageData&&(w=f,i=f.width,s=f.height,d=w.data,b=4);if(p=Math.max(i,s),window.Uint8ClampedArray&&d instanceof window.Uint8ClampedArray||window.Uint8Array&&d instanceof window.Uint8Array)for(g=d,d=Array(i*s),y=0,T=g.length;y<T;y++)d[y]=g[y*b+h]/255;else if(b!==1)throw Error("Raw data can have only 1 value per pixel");var M=Array(i*s),P=Array(i*s),L=Array(p),I=Array(p),E=Array(p+1),k=Array(p);for(y=0,T=i*s;y<T;y++){var C=d[y];M[y]=C===1?0:C===0?a:Math.pow(Math.max(0,.5-C),2),P[y]=C===1?a:C===0?0:Math.pow(Math.max(0,C-.5),2)}c(M,i,s,L,I,k,E),c(P,i,s,L,I,k,E);var D=window.Float32Array?new Float32Array(i*s):new Array(i*s);for(y=0,T=i*s;y<T;y++)D[y]=r(1-((M[y]-P[y])/l+o),0,1);return D}function c(f,n,o,l,h,i,s){for(var p=0;p<n;p++){for(var d=0;d<o;d++)l[d]=f[d*n+p];for(t(l,h,i,s,o),d=0;d<o;d++)f[d*n+p]=h[d]}for(d=0;d<o;d++){for(p=0;p<n;p++)l[p]=f[d*n+p];for(t(l,h,i,s,n),p=0;p<n;p++)f[d*n+p]=Math.sqrt(h[p])}}function t(f,n,o,l,h){o[0]=0,l[0]=-a,l[1]=+a;for(var i=1,s=0;i<h;i++){for(var p=(f[i]+i*i-(f[o[s]]+o[s]*o[s]))/(2*i-2*o[s]);p<=l[s];)s--,p=(f[i]+i*i-(f[o[s]]+o[s]*o[s]))/(2*i-2*o[s]);s++,o[s]=i,l[s]=p,l[s+1]=+a}for(i=0,s=0;i<h;i++){for(;l[s+1]<i;)s++;n[i]=(i-o[s])*(i-o[s])+f[o[s]]}}},{clamp:120}],99:[function(e,v,S){(function(r,a){function u(E,k){if(!E)throw new Error(k||"Assertion failed")}function c(E,k){E.super_=k;var C=function(){};C.prototype=k.prototype,E.prototype=new C,E.prototype.constructor=E}function t(E,k,C){if(t.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((k==="le"||k==="be")&&(C=k,k=10),this._init(E||0,k||10,C||"be"))}typeof r=="object"?r.exports=t:a.BN=t,t.BN=t,t.wordSize=26;var f;try{f=e("buffer").Buffer}catch{}t.isBN=function(k){return k instanceof t?!0:k!==null&&typeof k=="object"&&k.constructor.wordSize===t.wordSize&&Array.isArray(k.words)},t.max=function(k,C){return k.cmp(C)>0?k:C},t.min=function(k,C){return k.cmp(C)<0?k:C},t.prototype._init=function(k,C,D){if(typeof k=="number")return this._initNumber(k,C,D);if(typeof k=="object")return this._initArray(k,C,D);C==="hex"&&(C=16),u(C===(C|0)&&C>=2&&C<=36),k=k.toString().replace(/\s+/g,"");var F=0;k[0]==="-"&&F++,C===16?this._parseHex(k,F):this._parseBase(k,C,F),k[0]==="-"&&(this.negative=1),this.strip(),D==="le"&&this._initArray(this.toArray(),C,D)},t.prototype._initNumber=function(k,C,D){k<0&&(this.negative=1,k=-k),k<67108864?(this.words=[k&67108863],this.length=1):k<4503599627370496?(this.words=[k&67108863,k/67108864&67108863],this.length=2):(u(k<9007199254740992),this.words=[k&67108863,k/67108864&67108863,1],this.length=3),D==="le"&&this._initArray(this.toArray(),C,D)},t.prototype._initArray=function(k,C,D){if(u(typeof k.length=="number"),k.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(k.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var N,G,U=0;if(D==="be")for(F=k.length-1,N=0;F>=0;F-=3)G=k[F]|k[F-1]<<8|k[F-2]<<16,this.words[N]|=G<<U&67108863,this.words[N+1]=G>>>26-U&67108863,U+=24,U>=26&&(U-=26,N++);else if(D==="le")for(F=0,N=0;F<k.length;F+=3)G=k[F]|k[F+1]<<8|k[F+2]<<16,this.words[N]|=G<<U&67108863,this.words[N+1]=G>>>26-U&67108863,U+=24,U>=26&&(U-=26,N++);return this.strip()};function n(E,k,C){for(var D=0,F=Math.min(E.length,C),N=k;N<F;N++){var G=E.charCodeAt(N)-48;D<<=4,G>=49&&G<=54?D|=G-49+10:G>=17&&G<=22?D|=G-17+10:D|=G&15}return D}t.prototype._parseHex=function(k,C){this.length=Math.ceil((k.length-C)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var F,N,G=0;for(D=k.length-6,F=0;D>=C;D-=6)N=n(k,D,D+6),this.words[F]|=N<<G&67108863,this.words[F+1]|=N>>>26-G&4194303,G+=24,G>=26&&(G-=26,F++);D+6!==C&&(N=n(k,C,D+6),this.words[F]|=N<<G&67108863,this.words[F+1]|=N>>>26-G&4194303),this.strip()};function o(E,k,C,D){for(var F=0,N=Math.min(E.length,C),G=k;G<N;G++){var U=E.charCodeAt(G)-48;F*=D,U>=49?F+=U-49+10:U>=17?F+=U-17+10:F+=U}return F}t.prototype._parseBase=function(k,C,D){this.words=[0],this.length=1;for(var F=0,N=1;N<=67108863;N*=C)F++;F--,N=N/C|0;for(var G=k.length-D,U=G%F,X=Math.min(G,G-U)+D,z=0,B=D;B<X;B+=F)z=o(k,B,B+F,C),this.imuln(N),this.words[0]+z<67108864?this.words[0]+=z:this._iaddn(z);if(U!==0){var j=1;for(z=o(k,B,k.length,C),B=0;B<U;B++)j*=C;this.imuln(j),this.words[0]+z<67108864?this.words[0]+=z:this._iaddn(z)}},t.prototype.copy=function(k){k.words=new Array(this.length);for(var C=0;C<this.length;C++)k.words[C]=this.words[C];k.length=this.length,k.negative=this.negative,k.red=this.red},t.prototype.clone=function(){var k=new t(null);return this.copy(k),k},t.prototype._expand=function(k){for(;this.length<k;)this.words[this.length++]=0;return this},t.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},t.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],i=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];t.prototype.toString=function(k,C){k=k||10,C=C|0||1;var D;if(k===16||k==="hex"){D="";for(var F=0,N=0,G=0;G<this.length;G++){var U=this.words[G],X=((U<<F|N)&16777215).toString(16);N=U>>>24-F&16777215,N!==0||G!==this.length-1?D=l[6-X.length]+X+D:D=X+D,F+=2,F>=26&&(F-=26,G--)}for(N!==0&&(D=N.toString(16)+D);D.length%C!==0;)D="0"+D;return this.negative!==0&&(D="-"+D),D}if(k===(k|0)&&k>=2&&k<=36){var z=h[k],B=i[k];D="";var j=this.clone();for(j.negative=0;!j.isZero();){var V=j.modn(B).toString(k);j=j.idivn(B),j.isZero()?D=V+D:D=l[z-V.length]+V+D}for(this.isZero()&&(D="0"+D);D.length%C!==0;)D="0"+D;return this.negative!==0&&(D="-"+D),D}u(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var k=this.words[0];return this.length===2?k+=this.words[1]*67108864:this.length===3&&this.words[2]===1?k+=4503599627370496+this.words[1]*67108864:this.length>2&&u(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-k:k},t.prototype.toJSON=function(){return this.toString(16)},t.prototype.toBuffer=function(k,C){return u(typeof f<"u"),this.toArrayLike(f,k,C)},t.prototype.toArray=function(k,C){return this.toArrayLike(Array,k,C)},t.prototype.toArrayLike=function(k,C,D){var F=this.byteLength(),N=D||Math.max(1,F);u(F<=N,"byte array longer than desired length"),u(N>0,"Requested array length <= 0"),this.strip();var G=C==="le",U=new k(N),X,z,B=this.clone();if(G){for(z=0;!B.isZero();z++)X=B.andln(255),B.iushrn(8),U[z]=X;for(;z<N;z++)U[z]=0}else{for(z=0;z<N-F;z++)U[z]=0;for(z=0;!B.isZero();z++)X=B.andln(255),B.iushrn(8),U[N-z-1]=X}return U},Math.clz32?t.prototype._countBits=function(k){return 32-Math.clz32(k)}:t.prototype._countBits=function(k){var C=k,D=0;return C>=4096&&(D+=13,C>>>=13),C>=64&&(D+=7,C>>>=7),C>=8&&(D+=4,C>>>=4),C>=2&&(D+=2,C>>>=2),D+C},t.prototype._zeroBits=function(k){if(k===0)return 26;var C=k,D=0;return(C&8191)===0&&(D+=13,C>>>=13),(C&127)===0&&(D+=7,C>>>=7),(C&15)===0&&(D+=4,C>>>=4),(C&3)===0&&(D+=2,C>>>=2),(C&1)===0&&D++,D},t.prototype.bitLength=function(){var k=this.words[this.length-1],C=this._countBits(k);return(this.length-1)*26+C};function s(E){for(var k=new Array(E.bitLength()),C=0;C<k.length;C++){var D=C/26|0,F=C%26;k[C]=(E.words[D]&1<<F)>>>F}return k}t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var k=0,C=0;C<this.length;C++){var D=this._zeroBits(this.words[C]);if(k+=D,D!==26)break}return k},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(k){return this.negative!==0?this.abs().inotn(k).iaddn(1):this.clone()},t.prototype.fromTwos=function(k){return this.testn(k-1)?this.notn(k).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return this.negative!==0},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(k){for(;this.length<k.length;)this.words[this.length++]=0;for(var C=0;C<k.length;C++)this.words[C]=this.words[C]|k.words[C];return this.strip()},t.prototype.ior=function(k){return u((this.negative|k.negative)===0),this.iuor(k)},t.prototype.or=function(k){return this.length>k.length?this.clone().ior(k):k.clone().ior(this)},t.prototype.uor=function(k){return this.length>k.length?this.clone().iuor(k):k.clone().iuor(this)},t.prototype.iuand=function(k){var C;this.length>k.length?C=k:C=this;for(var D=0;D<C.length;D++)this.words[D]=this.words[D]&k.words[D];return this.length=C.length,this.strip()},t.prototype.iand=function(k){return u((this.negative|k.negative)===0),this.iuand(k)},t.prototype.and=function(k){return this.length>k.length?this.clone().iand(k):k.clone().iand(this)},t.prototype.uand=function(k){return this.length>k.length?this.clone().iuand(k):k.clone().iuand(this)},t.prototype.iuxor=function(k){var C,D;this.length>k.length?(C=this,D=k):(C=k,D=this);for(var F=0;F<D.length;F++)this.words[F]=C.words[F]^D.words[F];if(this!==C)for(;F<C.length;F++)this.words[F]=C.words[F];return this.length=C.length,this.strip()},t.prototype.ixor=function(k){return u((this.negative|k.negative)===0),this.iuxor(k)},t.prototype.xor=function(k){return this.length>k.length?this.clone().ixor(k):k.clone().ixor(this)},t.prototype.uxor=function(k){return this.length>k.length?this.clone().iuxor(k):k.clone().iuxor(this)},t.prototype.inotn=function(k){u(typeof k=="number"&&k>=0);var C=Math.ceil(k/26)|0,D=k%26;this._expand(C),D>0&&C--;for(var F=0;F<C;F++)this.words[F]=~this.words[F]&67108863;return D>0&&(this.words[F]=~this.words[F]&67108863>>26-D),this.strip()},t.prototype.notn=function(k){return this.clone().inotn(k)},t.prototype.setn=function(k,C){u(typeof k=="number"&&k>=0);var D=k/26|0,F=k%26;return this._expand(D+1),C?this.words[D]=this.words[D]|1<<F:this.words[D]=this.words[D]&~(1<<F),this.strip()},t.prototype.iadd=function(k){var C;if(this.negative!==0&&k.negative===0)return this.negative=0,C=this.isub(k),this.negative^=1,this._normSign();if(this.negative===0&&k.negative!==0)return k.negative=0,C=this.isub(k),k.negative=1,C._normSign();var D,F;this.length>k.length?(D=this,F=k):(D=k,F=this);for(var N=0,G=0;G<F.length;G++)C=(D.words[G]|0)+(F.words[G]|0)+N,this.words[G]=C&67108863,N=C>>>26;for(;N!==0&&G<D.length;G++)C=(D.words[G]|0)+N,this.words[G]=C&67108863,N=C>>>26;if(this.length=D.length,N!==0)this.words[this.length]=N,this.length++;else if(D!==this)for(;G<D.length;G++)this.words[G]=D.words[G];return this},t.prototype.add=function(k){var C;return k.negative!==0&&this.negative===0?(k.negative=0,C=this.sub(k),k.negative^=1,C):k.negative===0&&this.negative!==0?(this.negative=0,C=k.sub(this),this.negative=1,C):this.length>k.length?this.clone().iadd(k):k.clone().iadd(this)},t.prototype.isub=function(k){if(k.negative!==0){k.negative=0;var C=this.iadd(k);return k.negative=1,C._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(k),this.negative=1,this._normSign();var D=this.cmp(k);if(D===0)return this.negative=0,this.length=1,this.words[0]=0,this;var F,N;D>0?(F=this,N=k):(F=k,N=this);for(var G=0,U=0;U<N.length;U++)C=(F.words[U]|0)-(N.words[U]|0)+G,G=C>>26,this.words[U]=C&67108863;for(;G!==0&&U<F.length;U++)C=(F.words[U]|0)+G,G=C>>26,this.words[U]=C&67108863;if(G===0&&U<F.length&&F!==this)for(;U<F.length;U++)this.words[U]=F.words[U];return this.length=Math.max(this.length,U),F!==this&&(this.negative=1),this.strip()},t.prototype.sub=function(k){return this.clone().isub(k)};function p(E,k,C){C.negative=k.negative^E.negative;var D=E.length+k.length|0;C.length=D,D=D-1|0;var F=E.words[0]|0,N=k.words[0]|0,G=F*N,U=G&67108863,X=G/67108864|0;C.words[0]=U;for(var z=1;z<D;z++){for(var B=X>>>26,j=X&67108863,V=Math.min(z,k.length-1),K=Math.max(0,z-E.length+1);K<=V;K++){var te=z-K|0;F=E.words[te]|0,N=k.words[K]|0,G=F*N+j,B+=G/67108864|0,j=G&67108863}C.words[z]=j|0,X=B|0}return X!==0?C.words[z]=X|0:C.length--,C.strip()}var d=function(k,C,D){var F=k.words,N=C.words,G=D.words,U=0,X,z,B,j=F[0]|0,V=j&8191,K=j>>>13,te=F[1]|0,$=te&8191,ie=te>>>13,se=F[2]|0,Q=se&8191,H=se>>>13,oe=F[3]|0,re=oe&8191,ee=oe>>>13,ae=F[4]|0,fe=ae&8191,de=ae>>>13,pe=F[5]|0,W=pe&8191,ue=pe>>>13,me=F[6]|0,be=me&8191,Me=me>>>13,Pe=F[7]|0,Ge=Pe&8191,ze=Pe>>>13,Qe=F[8]|0,tt=Qe&8191,Ce=Qe>>>13,Ae=F[9]|0,Be=Ae&8191,qe=Ae>>>13,Tt=N[0]|0,At=Tt&8191,Ne=Tt>>>13,ct=N[1]|0,Mt=ct&8191,Wt=ct>>>13,qt=N[2]|0,zt=qt&8191,$t=qt>>>13,rr=N[3]|0,Lt=rr&8191,Ct=rr>>>13,dt=N[4]|0,lt=dt&8191,Te=dt>>>13,Le=N[5]|0,Ue=Le&8191,et=Le>>>13,ke=N[6]|0,Ie=ke&8191,He=ke>>>13,Ye=N[7]|0,ft=Ye&8191,it=Ye>>>13,je=N[8]|0,ot=je&8191,Je=je>>>13,st=N[9]|0,It=st&8191,Nt=st>>>13;D.negative=k.negative^C.negative,D.length=19,X=Math.imul(V,At),z=Math.imul(V,Ne),z=z+Math.imul(K,At)|0,B=Math.imul(K,Ne);var nr=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(nr>>>26)|0,nr&=67108863,X=Math.imul($,At),z=Math.imul($,Ne),z=z+Math.imul(ie,At)|0,B=Math.imul(ie,Ne),X=X+Math.imul(V,Mt)|0,z=z+Math.imul(V,Wt)|0,z=z+Math.imul(K,Mt)|0,B=B+Math.imul(K,Wt)|0;var We=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(We>>>26)|0,We&=67108863,X=Math.imul(Q,At),z=Math.imul(Q,Ne),z=z+Math.imul(H,At)|0,B=Math.imul(H,Ne),X=X+Math.imul($,Mt)|0,z=z+Math.imul($,Wt)|0,z=z+Math.imul(ie,Mt)|0,B=B+Math.imul(ie,Wt)|0,X=X+Math.imul(V,zt)|0,z=z+Math.imul(V,$t)|0,z=z+Math.imul(K,zt)|0,B=B+Math.imul(K,$t)|0;var Fe=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,X=Math.imul(re,At),z=Math.imul(re,Ne),z=z+Math.imul(ee,At)|0,B=Math.imul(ee,Ne),X=X+Math.imul(Q,Mt)|0,z=z+Math.imul(Q,Wt)|0,z=z+Math.imul(H,Mt)|0,B=B+Math.imul(H,Wt)|0,X=X+Math.imul($,zt)|0,z=z+Math.imul($,$t)|0,z=z+Math.imul(ie,zt)|0,B=B+Math.imul(ie,$t)|0,X=X+Math.imul(V,Lt)|0,z=z+Math.imul(V,Ct)|0,z=z+Math.imul(K,Lt)|0,B=B+Math.imul(K,Ct)|0;var bt=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(bt>>>26)|0,bt&=67108863,X=Math.imul(fe,At),z=Math.imul(fe,Ne),z=z+Math.imul(de,At)|0,B=Math.imul(de,Ne),X=X+Math.imul(re,Mt)|0,z=z+Math.imul(re,Wt)|0,z=z+Math.imul(ee,Mt)|0,B=B+Math.imul(ee,Wt)|0,X=X+Math.imul(Q,zt)|0,z=z+Math.imul(Q,$t)|0,z=z+Math.imul(H,zt)|0,B=B+Math.imul(H,$t)|0,X=X+Math.imul($,Lt)|0,z=z+Math.imul($,Ct)|0,z=z+Math.imul(ie,Lt)|0,B=B+Math.imul(ie,Ct)|0,X=X+Math.imul(V,lt)|0,z=z+Math.imul(V,Te)|0,z=z+Math.imul(K,lt)|0,B=B+Math.imul(K,Te)|0;var kt=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(kt>>>26)|0,kt&=67108863,X=Math.imul(W,At),z=Math.imul(W,Ne),z=z+Math.imul(ue,At)|0,B=Math.imul(ue,Ne),X=X+Math.imul(fe,Mt)|0,z=z+Math.imul(fe,Wt)|0,z=z+Math.imul(de,Mt)|0,B=B+Math.imul(de,Wt)|0,X=X+Math.imul(re,zt)|0,z=z+Math.imul(re,$t)|0,z=z+Math.imul(ee,zt)|0,B=B+Math.imul(ee,$t)|0,X=X+Math.imul(Q,Lt)|0,z=z+Math.imul(Q,Ct)|0,z=z+Math.imul(H,Lt)|0,B=B+Math.imul(H,Ct)|0,X=X+Math.imul($,lt)|0,z=z+Math.imul($,Te)|0,z=z+Math.imul(ie,lt)|0,B=B+Math.imul(ie,Te)|0,X=X+Math.imul(V,Ue)|0,z=z+Math.imul(V,et)|0,z=z+Math.imul(K,Ue)|0,B=B+Math.imul(K,et)|0;var _t=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(_t>>>26)|0,_t&=67108863,X=Math.imul(be,At),z=Math.imul(be,Ne),z=z+Math.imul(Me,At)|0,B=Math.imul(Me,Ne),X=X+Math.imul(W,Mt)|0,z=z+Math.imul(W,Wt)|0,z=z+Math.imul(ue,Mt)|0,B=B+Math.imul(ue,Wt)|0,X=X+Math.imul(fe,zt)|0,z=z+Math.imul(fe,$t)|0,z=z+Math.imul(de,zt)|0,B=B+Math.imul(de,$t)|0,X=X+Math.imul(re,Lt)|0,z=z+Math.imul(re,Ct)|0,z=z+Math.imul(ee,Lt)|0,B=B+Math.imul(ee,Ct)|0,X=X+Math.imul(Q,lt)|0,z=z+Math.imul(Q,Te)|0,z=z+Math.imul(H,lt)|0,B=B+Math.imul(H,Te)|0,X=X+Math.imul($,Ue)|0,z=z+Math.imul($,et)|0,z=z+Math.imul(ie,Ue)|0,B=B+Math.imul(ie,et)|0,X=X+Math.imul(V,Ie)|0,z=z+Math.imul(V,He)|0,z=z+Math.imul(K,Ie)|0,B=B+Math.imul(K,He)|0;var Rt=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,X=Math.imul(Ge,At),z=Math.imul(Ge,Ne),z=z+Math.imul(ze,At)|0,B=Math.imul(ze,Ne),X=X+Math.imul(be,Mt)|0,z=z+Math.imul(be,Wt)|0,z=z+Math.imul(Me,Mt)|0,B=B+Math.imul(Me,Wt)|0,X=X+Math.imul(W,zt)|0,z=z+Math.imul(W,$t)|0,z=z+Math.imul(ue,zt)|0,B=B+Math.imul(ue,$t)|0,X=X+Math.imul(fe,Lt)|0,z=z+Math.imul(fe,Ct)|0,z=z+Math.imul(de,Lt)|0,B=B+Math.imul(de,Ct)|0,X=X+Math.imul(re,lt)|0,z=z+Math.imul(re,Te)|0,z=z+Math.imul(ee,lt)|0,B=B+Math.imul(ee,Te)|0,X=X+Math.imul(Q,Ue)|0,z=z+Math.imul(Q,et)|0,z=z+Math.imul(H,Ue)|0,B=B+Math.imul(H,et)|0,X=X+Math.imul($,Ie)|0,z=z+Math.imul($,He)|0,z=z+Math.imul(ie,Ie)|0,B=B+Math.imul(ie,He)|0,X=X+Math.imul(V,ft)|0,z=z+Math.imul(V,it)|0,z=z+Math.imul(K,ft)|0,B=B+Math.imul(K,it)|0;var Dt=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,X=Math.imul(tt,At),z=Math.imul(tt,Ne),z=z+Math.imul(Ce,At)|0,B=Math.imul(Ce,Ne),X=X+Math.imul(Ge,Mt)|0,z=z+Math.imul(Ge,Wt)|0,z=z+Math.imul(ze,Mt)|0,B=B+Math.imul(ze,Wt)|0,X=X+Math.imul(be,zt)|0,z=z+Math.imul(be,$t)|0,z=z+Math.imul(Me,zt)|0,B=B+Math.imul(Me,$t)|0,X=X+Math.imul(W,Lt)|0,z=z+Math.imul(W,Ct)|0,z=z+Math.imul(ue,Lt)|0,B=B+Math.imul(ue,Ct)|0,X=X+Math.imul(fe,lt)|0,z=z+Math.imul(fe,Te)|0,z=z+Math.imul(de,lt)|0,B=B+Math.imul(de,Te)|0,X=X+Math.imul(re,Ue)|0,z=z+Math.imul(re,et)|0,z=z+Math.imul(ee,Ue)|0,B=B+Math.imul(ee,et)|0,X=X+Math.imul(Q,Ie)|0,z=z+Math.imul(Q,He)|0,z=z+Math.imul(H,Ie)|0,B=B+Math.imul(H,He)|0,X=X+Math.imul($,ft)|0,z=z+Math.imul($,it)|0,z=z+Math.imul(ie,ft)|0,B=B+Math.imul(ie,it)|0,X=X+Math.imul(V,ot)|0,z=z+Math.imul(V,Je)|0,z=z+Math.imul(K,ot)|0,B=B+Math.imul(K,Je)|0;var Ut=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,X=Math.imul(Be,At),z=Math.imul(Be,Ne),z=z+Math.imul(qe,At)|0,B=Math.imul(qe,Ne),X=X+Math.imul(tt,Mt)|0,z=z+Math.imul(tt,Wt)|0,z=z+Math.imul(Ce,Mt)|0,B=B+Math.imul(Ce,Wt)|0,X=X+Math.imul(Ge,zt)|0,z=z+Math.imul(Ge,$t)|0,z=z+Math.imul(ze,zt)|0,B=B+Math.imul(ze,$t)|0,X=X+Math.imul(be,Lt)|0,z=z+Math.imul(be,Ct)|0,z=z+Math.imul(Me,Lt)|0,B=B+Math.imul(Me,Ct)|0,X=X+Math.imul(W,lt)|0,z=z+Math.imul(W,Te)|0,z=z+Math.imul(ue,lt)|0,B=B+Math.imul(ue,Te)|0,X=X+Math.imul(fe,Ue)|0,z=z+Math.imul(fe,et)|0,z=z+Math.imul(de,Ue)|0,B=B+Math.imul(de,et)|0,X=X+Math.imul(re,Ie)|0,z=z+Math.imul(re,He)|0,z=z+Math.imul(ee,Ie)|0,B=B+Math.imul(ee,He)|0,X=X+Math.imul(Q,ft)|0,z=z+Math.imul(Q,it)|0,z=z+Math.imul(H,ft)|0,B=B+Math.imul(H,it)|0,X=X+Math.imul($,ot)|0,z=z+Math.imul($,Je)|0,z=z+Math.imul(ie,ot)|0,B=B+Math.imul(ie,Je)|0,X=X+Math.imul(V,It)|0,z=z+Math.imul(V,Nt)|0,z=z+Math.imul(K,It)|0,B=B+Math.imul(K,Nt)|0;var Bt=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,X=Math.imul(Be,Mt),z=Math.imul(Be,Wt),z=z+Math.imul(qe,Mt)|0,B=Math.imul(qe,Wt),X=X+Math.imul(tt,zt)|0,z=z+Math.imul(tt,$t)|0,z=z+Math.imul(Ce,zt)|0,B=B+Math.imul(Ce,$t)|0,X=X+Math.imul(Ge,Lt)|0,z=z+Math.imul(Ge,Ct)|0,z=z+Math.imul(ze,Lt)|0,B=B+Math.imul(ze,Ct)|0,X=X+Math.imul(be,lt)|0,z=z+Math.imul(be,Te)|0,z=z+Math.imul(Me,lt)|0,B=B+Math.imul(Me,Te)|0,X=X+Math.imul(W,Ue)|0,z=z+Math.imul(W,et)|0,z=z+Math.imul(ue,Ue)|0,B=B+Math.imul(ue,et)|0,X=X+Math.imul(fe,Ie)|0,z=z+Math.imul(fe,He)|0,z=z+Math.imul(de,Ie)|0,B=B+Math.imul(de,He)|0,X=X+Math.imul(re,ft)|0,z=z+Math.imul(re,it)|0,z=z+Math.imul(ee,ft)|0,B=B+Math.imul(ee,it)|0,X=X+Math.imul(Q,ot)|0,z=z+Math.imul(Q,Je)|0,z=z+Math.imul(H,ot)|0,B=B+Math.imul(H,Je)|0,X=X+Math.imul($,It)|0,z=z+Math.imul($,Nt)|0,z=z+Math.imul(ie,It)|0,B=B+Math.imul(ie,Nt)|0;var tr=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(tr>>>26)|0,tr&=67108863,X=Math.imul(Be,zt),z=Math.imul(Be,$t),z=z+Math.imul(qe,zt)|0,B=Math.imul(qe,$t),X=X+Math.imul(tt,Lt)|0,z=z+Math.imul(tt,Ct)|0,z=z+Math.imul(Ce,Lt)|0,B=B+Math.imul(Ce,Ct)|0,X=X+Math.imul(Ge,lt)|0,z=z+Math.imul(Ge,Te)|0,z=z+Math.imul(ze,lt)|0,B=B+Math.imul(ze,Te)|0,X=X+Math.imul(be,Ue)|0,z=z+Math.imul(be,et)|0,z=z+Math.imul(Me,Ue)|0,B=B+Math.imul(Me,et)|0,X=X+Math.imul(W,Ie)|0,z=z+Math.imul(W,He)|0,z=z+Math.imul(ue,Ie)|0,B=B+Math.imul(ue,He)|0,X=X+Math.imul(fe,ft)|0,z=z+Math.imul(fe,it)|0,z=z+Math.imul(de,ft)|0,B=B+Math.imul(de,it)|0,X=X+Math.imul(re,ot)|0,z=z+Math.imul(re,Je)|0,z=z+Math.imul(ee,ot)|0,B=B+Math.imul(ee,Je)|0,X=X+Math.imul(Q,It)|0,z=z+Math.imul(Q,Nt)|0,z=z+Math.imul(H,It)|0,B=B+Math.imul(H,Nt)|0;var er=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(er>>>26)|0,er&=67108863,X=Math.imul(Be,Lt),z=Math.imul(Be,Ct),z=z+Math.imul(qe,Lt)|0,B=Math.imul(qe,Ct),X=X+Math.imul(tt,lt)|0,z=z+Math.imul(tt,Te)|0,z=z+Math.imul(Ce,lt)|0,B=B+Math.imul(Ce,Te)|0,X=X+Math.imul(Ge,Ue)|0,z=z+Math.imul(Ge,et)|0,z=z+Math.imul(ze,Ue)|0,B=B+Math.imul(ze,et)|0,X=X+Math.imul(be,Ie)|0,z=z+Math.imul(be,He)|0,z=z+Math.imul(Me,Ie)|0,B=B+Math.imul(Me,He)|0,X=X+Math.imul(W,ft)|0,z=z+Math.imul(W,it)|0,z=z+Math.imul(ue,ft)|0,B=B+Math.imul(ue,it)|0,X=X+Math.imul(fe,ot)|0,z=z+Math.imul(fe,Je)|0,z=z+Math.imul(de,ot)|0,B=B+Math.imul(de,Je)|0,X=X+Math.imul(re,It)|0,z=z+Math.imul(re,Nt)|0,z=z+Math.imul(ee,It)|0,B=B+Math.imul(ee,Nt)|0;var Zt=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,X=Math.imul(Be,lt),z=Math.imul(Be,Te),z=z+Math.imul(qe,lt)|0,B=Math.imul(qe,Te),X=X+Math.imul(tt,Ue)|0,z=z+Math.imul(tt,et)|0,z=z+Math.imul(Ce,Ue)|0,B=B+Math.imul(Ce,et)|0,X=X+Math.imul(Ge,Ie)|0,z=z+Math.imul(Ge,He)|0,z=z+Math.imul(ze,Ie)|0,B=B+Math.imul(ze,He)|0,X=X+Math.imul(be,ft)|0,z=z+Math.imul(be,it)|0,z=z+Math.imul(Me,ft)|0,B=B+Math.imul(Me,it)|0,X=X+Math.imul(W,ot)|0,z=z+Math.imul(W,Je)|0,z=z+Math.imul(ue,ot)|0,B=B+Math.imul(ue,Je)|0,X=X+Math.imul(fe,It)|0,z=z+Math.imul(fe,Nt)|0,z=z+Math.imul(de,It)|0,B=B+Math.imul(de,Nt)|0;var _r=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(_r>>>26)|0,_r&=67108863,X=Math.imul(Be,Ue),z=Math.imul(Be,et),z=z+Math.imul(qe,Ue)|0,B=Math.imul(qe,et),X=X+Math.imul(tt,Ie)|0,z=z+Math.imul(tt,He)|0,z=z+Math.imul(Ce,Ie)|0,B=B+Math.imul(Ce,He)|0,X=X+Math.imul(Ge,ft)|0,z=z+Math.imul(Ge,it)|0,z=z+Math.imul(ze,ft)|0,B=B+Math.imul(ze,it)|0,X=X+Math.imul(be,ot)|0,z=z+Math.imul(be,Je)|0,z=z+Math.imul(Me,ot)|0,B=B+Math.imul(Me,Je)|0,X=X+Math.imul(W,It)|0,z=z+Math.imul(W,Nt)|0,z=z+Math.imul(ue,It)|0,B=B+Math.imul(ue,Nt)|0;var Gr=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,X=Math.imul(Be,Ie),z=Math.imul(Be,He),z=z+Math.imul(qe,Ie)|0,B=Math.imul(qe,He),X=X+Math.imul(tt,ft)|0,z=z+Math.imul(tt,it)|0,z=z+Math.imul(Ce,ft)|0,B=B+Math.imul(Ce,it)|0,X=X+Math.imul(Ge,ot)|0,z=z+Math.imul(Ge,Je)|0,z=z+Math.imul(ze,ot)|0,B=B+Math.imul(ze,Je)|0,X=X+Math.imul(be,It)|0,z=z+Math.imul(be,Nt)|0,z=z+Math.imul(Me,It)|0,B=B+Math.imul(Me,Nt)|0;var Or=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Or>>>26)|0,Or&=67108863,X=Math.imul(Be,ft),z=Math.imul(Be,it),z=z+Math.imul(qe,ft)|0,B=Math.imul(qe,it),X=X+Math.imul(tt,ot)|0,z=z+Math.imul(tt,Je)|0,z=z+Math.imul(Ce,ot)|0,B=B+Math.imul(Ce,Je)|0,X=X+Math.imul(Ge,It)|0,z=z+Math.imul(Ge,Nt)|0,z=z+Math.imul(ze,It)|0,B=B+Math.imul(ze,Nt)|0;var Fr=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,X=Math.imul(Be,ot),z=Math.imul(Be,Je),z=z+Math.imul(qe,ot)|0,B=Math.imul(qe,Je),X=X+Math.imul(tt,It)|0,z=z+Math.imul(tt,Nt)|0,z=z+Math.imul(Ce,It)|0,B=B+Math.imul(Ce,Nt)|0;var Mn=(U+X|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,X=Math.imul(Be,It),z=Math.imul(Be,Nt),z=z+Math.imul(qe,It)|0,B=Math.imul(qe,Nt);var Wn=(U+X|0)+((z&8191)<<13)|0;return U=(B+(z>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,G[0]=nr,G[1]=We,G[2]=Fe,G[3]=bt,G[4]=kt,G[5]=_t,G[6]=Rt,G[7]=Dt,G[8]=Ut,G[9]=Bt,G[10]=tr,G[11]=er,G[12]=Zt,G[13]=_r,G[14]=Gr,G[15]=Or,G[16]=Fr,G[17]=Mn,G[18]=Wn,U!==0&&(G[19]=U,D.length++),D};Math.imul||(d=p);function g(E,k,C){C.negative=k.negative^E.negative,C.length=E.length+k.length;for(var D=0,F=0,N=0;N<C.length-1;N++){var G=F;F=0;for(var U=D&67108863,X=Math.min(N,k.length-1),z=Math.max(0,N-E.length+1);z<=X;z++){var B=N-z,j=E.words[B]|0,V=k.words[z]|0,K=j*V,te=K&67108863;G=G+(K/67108864|0)|0,te=te+U|0,U=te&67108863,G=G+(te>>>26)|0,F+=G>>>26,G&=67108863}C.words[N]=U,D=G,G=F}return D!==0?C.words[N]=D:C.length--,C.strip()}function b(E,k,C){var D=new m;return D.mulp(E,k,C)}t.prototype.mulTo=function(k,C){var D,F=this.length+k.length;return this.length===10&&k.length===10?D=d(this,k,C):F<63?D=p(this,k,C):F<1024?D=g(this,k,C):D=b(this,k,C),D};function m(E,k){this.x=E,this.y=k}m.prototype.makeRBT=function(k){for(var C=new Array(k),D=t.prototype._countBits(k)-1,F=0;F<k;F++)C[F]=this.revBin(F,D,k);return C},m.prototype.revBin=function(k,C,D){if(k===0||k===D-1)return k;for(var F=0,N=0;N<C;N++)F|=(k&1)<<C-N-1,k>>=1;return F},m.prototype.permute=function(k,C,D,F,N,G){for(var U=0;U<G;U++)F[U]=C[k[U]],N[U]=D[k[U]]},m.prototype.transform=function(k,C,D,F,N,G){this.permute(G,k,C,D,F,N);for(var U=1;U<N;U<<=1)for(var X=U<<1,z=Math.cos(2*Math.PI/X),B=Math.sin(2*Math.PI/X),j=0;j<N;j+=X)for(var V=z,K=B,te=0;te<U;te++){var $=D[j+te],ie=F[j+te],se=D[j+te+U],Q=F[j+te+U],H=V*se-K*Q;Q=V*Q+K*se,se=H,D[j+te]=$+se,F[j+te]=ie+Q,D[j+te+U]=$-se,F[j+te+U]=ie-Q,te!==X&&(H=z*V-B*K,K=z*K+B*V,V=H)}},m.prototype.guessLen13b=function(k,C){var D=Math.max(C,k)|1,F=D&1,N=0;for(D=D/2|0;D;D=D>>>1)N++;return 1<<N+1+F},m.prototype.conjugate=function(k,C,D){if(!(D<=1))for(var F=0;F<D/2;F++){var N=k[F];k[F]=k[D-F-1],k[D-F-1]=N,N=C[F],C[F]=-C[D-F-1],C[D-F-1]=-N}},m.prototype.normalize13b=function(k,C){for(var D=0,F=0;F<C/2;F++){var N=Math.round(k[2*F+1]/C)*8192+Math.round(k[2*F]/C)+D;k[F]=N&67108863,N<67108864?D=0:D=N/67108864|0}return k},m.prototype.convert13b=function(k,C,D,F){for(var N=0,G=0;G<C;G++)N=N+(k[G]|0),D[2*G]=N&8191,N=N>>>13,D[2*G+1]=N&8191,N=N>>>13;for(G=2*C;G<F;++G)D[G]=0;u(N===0),u((N&-8192)===0)},m.prototype.stub=function(k){for(var C=new Array(k),D=0;D<k;D++)C[D]=0;return C},m.prototype.mulp=function(k,C,D){var F=2*this.guessLen13b(k.length,C.length),N=this.makeRBT(F),G=this.stub(F),U=new Array(F),X=new Array(F),z=new Array(F),B=new Array(F),j=new Array(F),V=new Array(F),K=D.words;K.length=F,this.convert13b(k.words,k.length,U,F),this.convert13b(C.words,C.length,B,F),this.transform(U,G,X,z,F,N),this.transform(B,G,j,V,F,N);for(var te=0;te<F;te++){var $=X[te]*j[te]-z[te]*V[te];z[te]=X[te]*V[te]+z[te]*j[te],X[te]=$}return this.conjugate(X,z,F),this.transform(X,z,K,G,F,N),this.conjugate(K,G,F),this.normalize13b(K,F),D.negative=k.negative^C.negative,D.length=k.length+C.length,D.strip()},t.prototype.mul=function(k){var C=new t(null);return C.words=new Array(this.length+k.length),this.mulTo(k,C)},t.prototype.mulf=function(k){var C=new t(null);return C.words=new Array(this.length+k.length),b(this,k,C)},t.prototype.imul=function(k){return this.clone().mulTo(k,this)},t.prototype.imuln=function(k){u(typeof k=="number"),u(k<67108864);for(var C=0,D=0;D<this.length;D++){var F=(this.words[D]|0)*k,N=(F&67108863)+(C&67108863);C>>=26,C+=F/67108864|0,C+=N>>>26,this.words[D]=N&67108863}return C!==0&&(this.words[D]=C,this.length++),this},t.prototype.muln=function(k){return this.clone().imuln(k)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(k){var C=s(k);if(C.length===0)return new t(1);for(var D=this,F=0;F<C.length&&C[F]===0;F++,D=D.sqr());if(++F<C.length)for(var N=D.sqr();F<C.length;F++,N=N.sqr())C[F]!==0&&(D=D.mul(N));return D},t.prototype.iushln=function(k){u(typeof k=="number"&&k>=0);var C=k%26,D=(k-C)/26,F=67108863>>>26-C<<26-C,N;if(C!==0){var G=0;for(N=0;N<this.length;N++){var U=this.words[N]&F,X=(this.words[N]|0)-U<<C;this.words[N]=X|G,G=U>>>26-C}G&&(this.words[N]=G,this.length++)}if(D!==0){for(N=this.length-1;N>=0;N--)this.words[N+D]=this.words[N];for(N=0;N<D;N++)this.words[N]=0;this.length+=D}return this.strip()},t.prototype.ishln=function(k){return u(this.negative===0),this.iushln(k)},t.prototype.iushrn=function(k,C,D){u(typeof k=="number"&&k>=0);var F;C?F=(C-C%26)/26:F=0;var N=k%26,G=Math.min((k-N)/26,this.length),U=67108863^67108863>>>N<<N,X=D;if(F-=G,F=Math.max(0,F),X){for(var z=0;z<G;z++)X.words[z]=this.words[z];X.length=G}if(G!==0)if(this.length>G)for(this.length-=G,z=0;z<this.length;z++)this.words[z]=this.words[z+G];else this.words[0]=0,this.length=1;var B=0;for(z=this.length-1;z>=0&&(B!==0||z>=F);z--){var j=this.words[z]|0;this.words[z]=B<<26-N|j>>>N,B=j&U}return X&&B!==0&&(X.words[X.length++]=B),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},t.prototype.ishrn=function(k,C,D){return u(this.negative===0),this.iushrn(k,C,D)},t.prototype.shln=function(k){return this.clone().ishln(k)},t.prototype.ushln=function(k){return this.clone().iushln(k)},t.prototype.shrn=function(k){return this.clone().ishrn(k)},t.prototype.ushrn=function(k){return this.clone().iushrn(k)},t.prototype.testn=function(k){u(typeof k=="number"&&k>=0);var C=k%26,D=(k-C)/26,F=1<<C;if(this.length<=D)return!1;var N=this.words[D];return!!(N&F)},t.prototype.imaskn=function(k){u(typeof k=="number"&&k>=0);var C=k%26,D=(k-C)/26;if(u(this.negative===0,"imaskn works only with positive numbers"),this.length<=D)return this;if(C!==0&&D++,this.length=Math.min(D,this.length),C!==0){var F=67108863^67108863>>>C<<C;this.words[this.length-1]&=F}return this.strip()},t.prototype.maskn=function(k){return this.clone().imaskn(k)},t.prototype.iaddn=function(k){return u(typeof k=="number"),u(k<67108864),k<0?this.isubn(-k):this.negative!==0?this.length===1&&(this.words[0]|0)<k?(this.words[0]=k-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(k),this.negative=1,this):this._iaddn(k)},t.prototype._iaddn=function(k){this.words[0]+=k;for(var C=0;C<this.length&&this.words[C]>=67108864;C++)this.words[C]-=67108864,C===this.length-1?this.words[C+1]=1:this.words[C+1]++;return this.length=Math.max(this.length,C+1),this},t.prototype.isubn=function(k){if(u(typeof k=="number"),u(k<67108864),k<0)return this.iaddn(-k);if(this.negative!==0)return this.negative=0,this.iaddn(k),this.negative=1,this;if(this.words[0]-=k,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var C=0;C<this.length&&this.words[C]<0;C++)this.words[C]+=67108864,this.words[C+1]-=1;return this.strip()},t.prototype.addn=function(k){return this.clone().iaddn(k)},t.prototype.subn=function(k){return this.clone().isubn(k)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(k,C,D){var F=k.length+D,N;this._expand(F);var G,U=0;for(N=0;N<k.length;N++){G=(this.words[N+D]|0)+U;var X=(k.words[N]|0)*C;G-=X&67108863,U=(G>>26)-(X/67108864|0),this.words[N+D]=G&67108863}for(;N<this.length-D;N++)G=(this.words[N+D]|0)+U,U=G>>26,this.words[N+D]=G&67108863;if(U===0)return this.strip();for(u(U===-1),U=0,N=0;N<this.length;N++)G=-(this.words[N]|0)+U,U=G>>26,this.words[N]=G&67108863;return this.negative=1,this.strip()},t.prototype._wordDiv=function(k,C){var D=this.length-k.length,F=this.clone(),N=k,G=N.words[N.length-1]|0,U=this._countBits(G);D=26-U,D!==0&&(N=N.ushln(D),F.iushln(D),G=N.words[N.length-1]|0);var X=F.length-N.length,z;if(C!=="mod"){z=new t(null),z.length=X+1,z.words=new Array(z.length);for(var B=0;B<z.length;B++)z.words[B]=0}var j=F.clone()._ishlnsubmul(N,1,X);j.negative===0&&(F=j,z&&(z.words[X]=1));for(var V=X-1;V>=0;V--){var K=(F.words[N.length+V]|0)*67108864+(F.words[N.length+V-1]|0);for(K=Math.min(K/G|0,67108863),F._ishlnsubmul(N,K,V);F.negative!==0;)K--,F.negative=0,F._ishlnsubmul(N,1,V),F.isZero()||(F.negative^=1);z&&(z.words[V]=K)}return z&&z.strip(),F.strip(),C!=="div"&&D!==0&&F.iushrn(D),{div:z||null,mod:F}},t.prototype.divmod=function(k,C,D){if(u(!k.isZero()),this.isZero())return{div:new t(0),mod:new t(0)};var F,N,G;return this.negative!==0&&k.negative===0?(G=this.neg().divmod(k,C),C!=="mod"&&(F=G.div.neg()),C!=="div"&&(N=G.mod.neg(),D&&N.negative!==0&&N.iadd(k)),{div:F,mod:N}):this.negative===0&&k.negative!==0?(G=this.divmod(k.neg(),C),C!=="mod"&&(F=G.div.neg()),{div:F,mod:G.mod}):(this.negative&k.negative)!==0?(G=this.neg().divmod(k.neg(),C),C!=="div"&&(N=G.mod.neg(),D&&N.negative!==0&&N.isub(k)),{div:G.div,mod:N}):k.length>this.length||this.cmp(k)<0?{div:new t(0),mod:this}:k.length===1?C==="div"?{div:this.divn(k.words[0]),mod:null}:C==="mod"?{div:null,mod:new t(this.modn(k.words[0]))}:{div:this.divn(k.words[0]),mod:new t(this.modn(k.words[0]))}:this._wordDiv(k,C)},t.prototype.div=function(k){return this.divmod(k,"div",!1).div},t.prototype.mod=function(k){return this.divmod(k,"mod",!1).mod},t.prototype.umod=function(k){return this.divmod(k,"mod",!0).mod},t.prototype.divRound=function(k){var C=this.divmod(k);if(C.mod.isZero())return C.div;var D=C.div.negative!==0?C.mod.isub(k):C.mod,F=k.ushrn(1),N=k.andln(1),G=D.cmp(F);return G<0||N===1&&G===0?C.div:C.div.negative!==0?C.div.isubn(1):C.div.iaddn(1)},t.prototype.modn=function(k){u(k<=67108863);for(var C=(1<<26)%k,D=0,F=this.length-1;F>=0;F--)D=(C*D+(this.words[F]|0))%k;return D},t.prototype.idivn=function(k){u(k<=67108863);for(var C=0,D=this.length-1;D>=0;D--){var F=(this.words[D]|0)+C*67108864;this.words[D]=F/k|0,C=F%k}return this.strip()},t.prototype.divn=function(k){return this.clone().idivn(k)},t.prototype.egcd=function(k){u(k.negative===0),u(!k.isZero());var C=this,D=k.clone();C.negative!==0?C=C.umod(k):C=C.clone();for(var F=new t(1),N=new t(0),G=new t(0),U=new t(1),X=0;C.isEven()&&D.isEven();)C.iushrn(1),D.iushrn(1),++X;for(var z=D.clone(),B=C.clone();!C.isZero();){for(var j=0,V=1;(C.words[0]&V)===0&&j<26;++j,V<<=1);if(j>0)for(C.iushrn(j);j-- >0;)(F.isOdd()||N.isOdd())&&(F.iadd(z),N.isub(B)),F.iushrn(1),N.iushrn(1);for(var K=0,te=1;(D.words[0]&te)===0&&K<26;++K,te<<=1);if(K>0)for(D.iushrn(K);K-- >0;)(G.isOdd()||U.isOdd())&&(G.iadd(z),U.isub(B)),G.iushrn(1),U.iushrn(1);C.cmp(D)>=0?(C.isub(D),F.isub(G),N.isub(U)):(D.isub(C),G.isub(F),U.isub(N))}return{a:G,b:U,gcd:D.iushln(X)}},t.prototype._invmp=function(k){u(k.negative===0),u(!k.isZero());var C=this,D=k.clone();C.negative!==0?C=C.umod(k):C=C.clone();for(var F=new t(1),N=new t(0),G=D.clone();C.cmpn(1)>0&&D.cmpn(1)>0;){for(var U=0,X=1;(C.words[0]&X)===0&&U<26;++U,X<<=1);if(U>0)for(C.iushrn(U);U-- >0;)F.isOdd()&&F.iadd(G),F.iushrn(1);for(var z=0,B=1;(D.words[0]&B)===0&&z<26;++z,B<<=1);if(z>0)for(D.iushrn(z);z-- >0;)N.isOdd()&&N.iadd(G),N.iushrn(1);C.cmp(D)>=0?(C.isub(D),F.isub(N)):(D.isub(C),N.isub(F))}var j;return C.cmpn(1)===0?j=F:j=N,j.cmpn(0)<0&&j.iadd(k),j},t.prototype.gcd=function(k){if(this.isZero())return k.abs();if(k.isZero())return this.abs();var C=this.clone(),D=k.clone();C.negative=0,D.negative=0;for(var F=0;C.isEven()&&D.isEven();F++)C.iushrn(1),D.iushrn(1);do{for(;C.isEven();)C.iushrn(1);for(;D.isEven();)D.iushrn(1);var N=C.cmp(D);if(N<0){var G=C;C=D,D=G}else if(N===0||D.cmpn(1)===0)break;C.isub(D)}while(!0);return D.iushln(F)},t.prototype.invm=function(k){return this.egcd(k).a.umod(k)},t.prototype.isEven=function(){return(this.words[0]&1)===0},t.prototype.isOdd=function(){return(this.words[0]&1)===1},t.prototype.andln=function(k){return this.words[0]&k},t.prototype.bincn=function(k){u(typeof k=="number");var C=k%26,D=(k-C)/26,F=1<<C;if(this.length<=D)return this._expand(D+1),this.words[D]|=F,this;for(var N=F,G=D;N!==0&&G<this.length;G++){var U=this.words[G]|0;U+=N,N=U>>>26,U&=67108863,this.words[G]=U}return N!==0&&(this.words[G]=N,this.length++),this},t.prototype.isZero=function(){return this.length===1&&this.words[0]===0},t.prototype.cmpn=function(k){var C=k<0;if(this.negative!==0&&!C)return-1;if(this.negative===0&&C)return 1;this.strip();var D;if(this.length>1)D=1;else{C&&(k=-k),u(k<=67108863,"Number is too big");var F=this.words[0]|0;D=F===k?0:F<k?-1:1}return this.negative!==0?-D|0:D},t.prototype.cmp=function(k){if(this.negative!==0&&k.negative===0)return-1;if(this.negative===0&&k.negative!==0)return 1;var C=this.ucmp(k);return this.negative!==0?-C|0:C},t.prototype.ucmp=function(k){if(this.length>k.length)return 1;if(this.length<k.length)return-1;for(var C=0,D=this.length-1;D>=0;D--){var F=this.words[D]|0,N=k.words[D]|0;if(F!==N){F<N?C=-1:F>N&&(C=1);break}}return C},t.prototype.gtn=function(k){return this.cmpn(k)===1},t.prototype.gt=function(k){return this.cmp(k)===1},t.prototype.gten=function(k){return this.cmpn(k)>=0},t.prototype.gte=function(k){return this.cmp(k)>=0},t.prototype.ltn=function(k){return this.cmpn(k)===-1},t.prototype.lt=function(k){return this.cmp(k)===-1},t.prototype.lten=function(k){return this.cmpn(k)<=0},t.prototype.lte=function(k){return this.cmp(k)<=0},t.prototype.eqn=function(k){return this.cmpn(k)===0},t.prototype.eq=function(k){return this.cmp(k)===0},t.red=function(k){return new L(k)},t.prototype.toRed=function(k){return u(!this.red,"Already a number in reduction context"),u(this.negative===0,"red works only with positives"),k.convertTo(this)._forceRed(k)},t.prototype.fromRed=function(){return u(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(k){return this.red=k,this},t.prototype.forceRed=function(k){return u(!this.red,"Already a number in reduction context"),this._forceRed(k)},t.prototype.redAdd=function(k){return u(this.red,"redAdd works only with red numbers"),this.red.add(this,k)},t.prototype.redIAdd=function(k){return u(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,k)},t.prototype.redSub=function(k){return u(this.red,"redSub works only with red numbers"),this.red.sub(this,k)},t.prototype.redISub=function(k){return u(this.red,"redISub works only with red numbers"),this.red.isub(this,k)},t.prototype.redShl=function(k){return u(this.red,"redShl works only with red numbers"),this.red.shl(this,k)},t.prototype.redMul=function(k){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,k),this.red.mul(this,k)},t.prototype.redIMul=function(k){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,k),this.red.imul(this,k)},t.prototype.redSqr=function(){return u(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return u(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return u(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return u(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return u(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(k){return u(this.red&&!k.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,k)};var x={k256:null,p224:null,p192:null,p25519:null};function w(E,k){this.name=E,this.p=new t(k,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}w.prototype._tmp=function(){var k=new t(null);return k.words=new Array(Math.ceil(this.n/13)),k},w.prototype.ireduce=function(k){var C=k,D;do this.split(C,this.tmp),C=this.imulK(C),C=C.iadd(this.tmp),D=C.bitLength();while(D>this.n);var F=D<this.n?-1:C.ucmp(this.p);return F===0?(C.words[0]=0,C.length=1):F>0?C.isub(this.p):C.strip(),C},w.prototype.split=function(k,C){k.iushrn(this.n,0,C)},w.prototype.imulK=function(k){return k.imul(this.k)};function y(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(y,w),y.prototype.split=function(k,C){for(var D=4194303,F=Math.min(k.length,9),N=0;N<F;N++)C.words[N]=k.words[N];if(C.length=F,k.length<=9){k.words[0]=0,k.length=1;return}var G=k.words[9];for(C.words[C.length++]=G&D,N=10;N<k.length;N++){var U=k.words[N]|0;k.words[N-10]=(U&D)<<4|G>>>22,G=U}G>>>=22,k.words[N-10]=G,G===0&&k.length>10?k.length-=10:k.length-=9},y.prototype.imulK=function(k){k.words[k.length]=0,k.words[k.length+1]=0,k.length+=2;for(var C=0,D=0;D<k.length;D++){var F=k.words[D]|0;C+=F*977,k.words[D]=C&67108863,C=F*64+(C/67108864|0)}return k.words[k.length-1]===0&&(k.length--,k.words[k.length-1]===0&&k.length--),k};function T(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(T,w);function M(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(M,w);function P(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(P,w),P.prototype.imulK=function(k){for(var C=0,D=0;D<k.length;D++){var F=(k.words[D]|0)*19+C,N=F&67108863;F>>>=26,k.words[D]=N,C=F}return C!==0&&(k.words[k.length++]=C),k},t._prime=function(k){if(x[k])return x[k];var C;if(k==="k256")C=new y;else if(k==="p224")C=new T;else if(k==="p192")C=new M;else if(k==="p25519")C=new P;else throw new Error("Unknown prime "+k);return x[k]=C,C};function L(E){if(typeof E=="string"){var k=t._prime(E);this.m=k.p,this.prime=k}else u(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}L.prototype._verify1=function(k){u(k.negative===0,"red works only with positives"),u(k.red,"red works only with red numbers")},L.prototype._verify2=function(k,C){u((k.negative|C.negative)===0,"red works only with positives"),u(k.red&&k.red===C.red,"red works only with red numbers")},L.prototype.imod=function(k){return this.prime?this.prime.ireduce(k)._forceRed(this):k.umod(this.m)._forceRed(this)},L.prototype.neg=function(k){return k.isZero()?k.clone():this.m.sub(k)._forceRed(this)},L.prototype.add=function(k,C){this._verify2(k,C);var D=k.add(C);return D.cmp(this.m)>=0&&D.isub(this.m),D._forceRed(this)},L.prototype.iadd=function(k,C){this._verify2(k,C);var D=k.iadd(C);return D.cmp(this.m)>=0&&D.isub(this.m),D},L.prototype.sub=function(k,C){this._verify2(k,C);var D=k.sub(C);return D.cmpn(0)<0&&D.iadd(this.m),D._forceRed(this)},L.prototype.isub=function(k,C){this._verify2(k,C);var D=k.isub(C);return D.cmpn(0)<0&&D.iadd(this.m),D},L.prototype.shl=function(k,C){return this._verify1(k),this.imod(k.ushln(C))},L.prototype.imul=function(k,C){return this._verify2(k,C),this.imod(k.imul(C))},L.prototype.mul=function(k,C){return this._verify2(k,C),this.imod(k.mul(C))},L.prototype.isqr=function(k){return this.imul(k,k.clone())},L.prototype.sqr=function(k){return this.mul(k,k)},L.prototype.sqrt=function(k){if(k.isZero())return k.clone();var C=this.m.andln(3);if(u(C%2===1),C===3){var D=this.m.add(new t(1)).iushrn(2);return this.pow(k,D)}for(var F=this.m.subn(1),N=0;!F.isZero()&&F.andln(1)===0;)N++,F.iushrn(1);u(!F.isZero());var G=new t(1).toRed(this),U=G.redNeg(),X=this.m.subn(1).iushrn(1),z=this.m.bitLength();for(z=new t(2*z*z).toRed(this);this.pow(z,X).cmp(U)!==0;)z.redIAdd(U);for(var B=this.pow(z,F),j=this.pow(k,F.addn(1).iushrn(1)),V=this.pow(k,F),K=N;V.cmp(G)!==0;){for(var te=V,$=0;te.cmp(G)!==0;$++)te=te.redSqr();u($<K);var ie=this.pow(B,new t(1).iushln(K-$-1));j=j.redMul(ie),B=ie.redSqr(),V=V.redMul(B),K=$}return j},L.prototype.invm=function(k){var C=k._invmp(this.m);return C.negative!==0?(C.negative=0,this.imod(C).redNeg()):this.imod(C)},L.prototype.pow=function(k,C){if(C.isZero())return new t(1).toRed(this);if(C.cmpn(1)===0)return k.clone();var D=4,F=new Array(1<<D);F[0]=new t(1).toRed(this),F[1]=k;for(var N=2;N<F.length;N++)F[N]=this.mul(F[N-1],k);var G=F[0],U=0,X=0,z=C.bitLength()%26;for(z===0&&(z=26),N=C.length-1;N>=0;N--){for(var B=C.words[N],j=z-1;j>=0;j--){var V=B>>j&1;if(G!==F[0]&&(G=this.sqr(G)),V===0&&U===0){X=0;continue}U<<=1,U|=V,X++,!(X!==D&&(N!==0||j!==0))&&(G=this.mul(G,F[U]),X=0,U=0)}z=26}return G},L.prototype.convertTo=function(k){var C=k.umod(this.m);return C===k?C.clone():C},L.prototype.convertFrom=function(k){var C=k.clone();return C.red=null,C},t.mont=function(k){return new I(k)};function I(E){L.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(I,L),I.prototype.convertTo=function(k){return this.imod(k.ushln(this.shift))},I.prototype.convertFrom=function(k){var C=this.imod(k.mul(this.rinv));return C.red=null,C},I.prototype.imul=function(k,C){if(k.isZero()||C.isZero())return k.words[0]=0,k.length=1,k;var D=k.imul(C),F=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=D.isub(F).iushrn(this.shift),G=N;return N.cmp(this.m)>=0?G=N.isub(this.m):N.cmpn(0)<0&&(G=N.iadd(this.m)),G._forceRed(this)},I.prototype.mul=function(k,C){if(k.isZero()||C.isZero())return new t(0)._forceRed(this);var D=k.mul(C),F=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=D.isub(F).iushrn(this.shift),G=N;return N.cmp(this.m)>=0?G=N.isub(this.m):N.cmpn(0)<0&&(G=N.iadd(this.m)),G._forceRed(this)},I.prototype.invm=function(k){var C=this.imod(k._invmp(this.m).mul(this.r2));return C._forceRed(this)}})(typeof v>"u"||v,this)},{buffer:108}],100:[function(e,v,S){v.exports=r;function r(a){var u,c,t,f=a.length,n=0;for(u=0;u<f;++u)n+=a[u].length;var o=new Array(n),l=0;for(u=0;u<f;++u){var h=a[u],i=h.length;for(c=0;c<i;++c){var s=o[l++]=new Array(i-1),p=0;for(t=0;t<i;++t)t!==c&&(s[p++]=h[t]);if(c&1){var d=s[1];s[1]=s[0],s[0]=d}}}return o}},{}],101:[function(e,v,S){v.exports=i;var r=e("typedarray-pool"),a=e("./lib/sweep"),u=e("./lib/intersect");function c(s,p){for(var d=0;d<s;++d)if(!(p[d]<=p[d+s]))return!0;return!1}function t(s,p,d,g){for(var b=0,m=0,x=0,w=s.length;x<w;++x){var y=s[x];if(!c(p,y)){for(var T=0;T<2*p;++T)d[b++]=y[T];g[m++]=x}}return m}function f(s,p,d,g){var b=s.length,m=p.length;if(!(b<=0||m<=0)){var x=s[0].length>>>1;if(!(x<=0)){var w,y=r.mallocDouble(2*x*b),T=r.mallocInt32(b);if(b=t(s,x,y,T),b>0){if(x===1&&g)a.init(b),w=a.sweepComplete(x,d,0,b,y,T,0,b,y,T);else{var M=r.mallocDouble(2*x*m),P=r.mallocInt32(m);m=t(p,x,M,P),m>0&&(a.init(b+m),x===1?w=a.sweepBipartite(x,d,0,b,y,T,0,m,M,P):w=u(x,d,g,b,y,T,m,M,P),r.free(M),r.free(P))}r.free(y),r.free(T)}return w}}}var n;function o(s,p){n.push([s,p])}function l(s){return n=[],f(s,s,o,!0),n}function h(s,p){return n=[],f(s,p,o,!1),n}function i(s,p,d){switch(arguments.length){case 1:return l(s);case 2:return typeof p=="function"?f(s,s,p,!0):h(s,p);case 3:return f(s,p,d,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":103,"./lib/sweep":107,"typedarray-pool":595}],102:[function(e,v,S){var r="d",a="ax",u="vv",c="fp",t="es",f="rs",n="re",o="rb",l="ri",h="rp",i="bs",s="be",p="bb",d="bi",g="bp",b="rv",m="Q",x=[r,a,u,f,n,o,l,i,s,p,d];function w(T,M,P){var L="bruteForce"+(T?"Red":"Blue")+(M?"Flip":"")+(P?"Full":""),I=["function ",L,"(",x.join(),"){","var ",t,"=2*",r,";"],E="for(var i="+f+","+h+"="+t+"*"+f+";i<"+n+";++i,"+h+"+="+t+"){var x0="+o+"["+a+"+"+h+"],x1="+o+"["+a+"+"+h+"+"+r+"],xi="+l+"[i];",k="for(var j="+i+","+g+"="+t+"*"+i+";j<"+s+";++j,"+g+"+="+t+"){var y0="+p+"["+a+"+"+g+"],"+(P?"y1="+p+"["+a+"+"+g+"+"+r+"],":"")+"yi="+d+"[j];";return T?I.push(E,m,":",k):I.push(k,m,":",E),P?I.push("if(y1<x0||x1<y0)continue;"):M?I.push("if(y0<=x0||x1<y0)continue;"):I.push("if(y0<x0||x1<y0)continue;"),I.push("for(var k="+a+"+1;k<"+r+";++k){var r0="+o+"[k+"+h+"],r1="+o+"[k+"+r+"+"+h+"],b0="+p+"[k+"+g+"],b1="+p+"[k+"+r+"+"+g+"];if(r1<b0||b1<r0)continue "+m+";}var "+b+"="+u+"("),M?I.push("yi,xi"):I.push("xi,yi"),I.push(");if("+b+"!==void 0)return "+b+";}}}"),{name:L,code:I.join("")}}function y(T){var M="bruteForce"+(T?"Full":"Partial"),P=[],L=x.slice();T||L.splice(3,0,c);var I=["function "+M+"("+L.join()+"){"];function E(D,F){var N=w(D,F,T);P.push(N.code),I.push("return "+N.name+"("+x.join()+");")}I.push("if("+n+"-"+f+">"+s+"-"+i+"){"),T?(E(!0,!1),I.push("}else{"),E(!1,!1)):(I.push("if("+c+"){"),E(!0,!0),I.push("}else{"),E(!0,!1),I.push("}}else{if("+c+"){"),E(!1,!0),I.push("}else{"),E(!1,!1),I.push("}")),I.push("}}return "+M);var k=P.join("")+I.join(""),C=new Function(k);return C()}S.partial=y(!1),S.full=y(!0)},{}],103:[function(e,v,S){v.exports=k;var r=e("typedarray-pool"),a=e("bit-twiddle"),u=e("./brute"),c=u.partial,t=u.full,f=e("./sweep"),n=e("./median"),o=e("./partition"),l=128,h=1<<22,i=1<<22,s=o("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),p=o("lo===p0",["p0"]),d=o("lo<p0",["p0"]),g=o("hi<=p0",["p0"]),b=o("lo<=p0&&p0<=hi",["p0"]),m=o("lo<p0&&p0<=hi",["p0"]),x=6,w=2,y=1024,T=r.mallocInt32(y),M=r.mallocDouble(y);function P(C,D){var F=8*a.log2(D+1)*(C+1)|0,N=a.nextPow2(x*F);T.length<N&&(r.free(T),T=r.mallocInt32(N));var G=a.nextPow2(w*F);M.length<G&&(r.free(M),M=r.mallocDouble(G))}function L(C,D,F,N,G,U,X,z,B){var j=x*C;T[j]=D,T[j+1]=F,T[j+2]=N,T[j+3]=G,T[j+4]=U,T[j+5]=X;var V=w*C;M[V]=z,M[V+1]=B}function I(C,D,F,N,G,U,X,z,B,j,V){var K=2*C,te=B*K,$=j[te+D];e:for(var ie=G,se=G*K;ie<U;++ie,se+=K){var Q=X[se+D],H=X[se+D+C];if(!($<Q||H<$)&&!(N&&$===Q)){for(var oe=z[ie],re=D+1;re<C;++re){var Q=X[se+re],H=X[se+re+C],ee=j[te+re],ae=j[te+re+C];if(H<ee||ae<Q)continue e}var fe;if(N?fe=F(V,oe):fe=F(oe,V),fe!==void 0)return fe}}}function E(C,D,F,N,G,U,X,z,B,j){var V=2*C,K=z*V,te=B[K+D];e:for(var $=N,ie=N*V;$<G;++$,ie+=V){var se=X[$];if(se!==j){var Q=U[ie+D],H=U[ie+D+C];if(!(te<Q||H<te)){for(var oe=D+1;oe<C;++oe){var Q=U[ie+oe],H=U[ie+oe+C],re=B[K+oe],ee=B[K+oe+C];if(H<re||ee<Q)continue e}var ae=F(se,j);if(ae!==void 0)return ae}}}}function k(C,D,F,N,G,U,X,z,B){P(C,N+X);var j=0,V=2*C,K;for(L(j++,0,0,N,0,X,F?16:0,-1/0,1/0),F||L(j++,0,0,X,0,N,1,-1/0,1/0);j>0;){j-=1;var te=j*x,$=T[te],ie=T[te+1],se=T[te+2],Q=T[te+3],H=T[te+4],oe=T[te+5],re=j*w,ee=M[re],ae=M[re+1],fe=oe&1,de=!!(oe&16),pe=G,W=U,ue=z,me=B;if(fe&&(pe=z,W=B,ue=G,me=U),!(oe&2&&(se=d(C,$,ie,se,pe,W,ae),ie>=se))&&!(oe&4&&(ie=g(C,$,ie,se,pe,W,ee),ie>=se))){var be=se-ie,Me=H-Q;if(de){if(C*be*(be+Me)<i){if(K=f.scanComplete(C,$,D,ie,se,pe,W,Q,H,ue,me),K!==void 0)return K;continue}}else if(C*Math.min(be,Me)<l){if(K=c(C,$,D,fe,ie,se,pe,W,Q,H,ue,me),K!==void 0)return K;continue}else if(C*be*Me<h){if(K=f.scanBipartite(C,$,D,fe,ie,se,pe,W,Q,H,ue,me),K!==void 0)return K;continue}var Pe=s(C,$,ie,se,pe,W,ee,ae);if(ie<Pe)if(C*(Pe-ie)<l){if(K=t(C,$+1,D,ie,Pe,pe,W,Q,H,ue,me),K!==void 0)return K}else if($===C-2){if(fe?K=f.sweepBipartite(C,D,Q,H,ue,me,ie,Pe,pe,W):K=f.sweepBipartite(C,D,ie,Pe,pe,W,Q,H,ue,me),K!==void 0)return K}else L(j++,$+1,ie,Pe,Q,H,fe,-1/0,1/0),L(j++,$+1,Q,H,ie,Pe,fe^1,-1/0,1/0);if(Pe<se){var Ge=n(C,$,Q,H,ue,me),ze=ue[V*Ge+$],Qe=p(C,$,Ge,H,ue,me,ze);if(Qe<H&&L(j++,$,Pe,se,Qe,H,(fe|4)+(de?16:0),ze,ae),Q<Ge&&L(j++,$,Pe,se,Q,Ge,(fe|2)+(de?16:0),ee,ze),Ge+1===Qe){if(de?K=E(C,$,D,Pe,se,pe,W,Ge,ue,me[Ge]):K=I(C,$,D,fe,Pe,se,pe,W,Ge,ue,me[Ge]),K!==void 0)return K}else if(Ge<Qe){var tt;if(de){if(tt=b(C,$,Pe,se,pe,W,ze),Pe<tt){var Ce=p(C,$,Pe,tt,pe,W,ze);if($===C-2){if(Pe<Ce&&(K=f.sweepComplete(C,D,Pe,Ce,pe,W,Ge,Qe,ue,me),K!==void 0)||Ce<tt&&(K=f.sweepBipartite(C,D,Ce,tt,pe,W,Ge,Qe,ue,me),K!==void 0))return K}else Pe<Ce&&L(j++,$+1,Pe,Ce,Ge,Qe,16,-1/0,1/0),Ce<tt&&(L(j++,$+1,Ce,tt,Ge,Qe,0,-1/0,1/0),L(j++,$+1,Ge,Qe,Ce,tt,1,-1/0,1/0))}}else fe?tt=m(C,$,Pe,se,pe,W,ze):tt=b(C,$,Pe,se,pe,W,ze),Pe<tt&&($===C-2?fe?K=f.sweepBipartite(C,D,Ge,Qe,ue,me,Pe,tt,pe,W):K=f.sweepBipartite(C,D,Pe,tt,pe,W,Ge,Qe,ue,me):(L(j++,$+1,Pe,tt,Ge,Qe,fe,-1/0,1/0),L(j++,$+1,Ge,Qe,Pe,tt,fe^1,-1/0,1/0)))}}}}}},{"./brute":102,"./median":104,"./partition":105,"./sweep":107,"bit-twiddle":97,"typedarray-pool":595}],104:[function(e,v,S){v.exports=t;var r=e("./partition"),a=r("lo<p0",["p0"]),u=8;function c(f,n,o,l,h,i){for(var s=2*f,p=s*(o+1)+n,d=o+1;d<l;++d,p+=s)for(var g=h[p],b=d,m=s*(d-1);b>o&&h[m+n]>g;--b,m-=s){for(var x=m,w=m+s,y=0;y<s;++y,++x,++w){var T=h[x];h[x]=h[w],h[w]=T}var M=i[b];i[b]=i[b-1],i[b-1]=M}}function t(f,n,o,l,h,i){if(l<=o+1)return o;for(var s=o,p=l,d=l+o>>>1,g=2*f,b=d,m=h[g*d+n];s<p;){if(p-s<u){c(f,n,s,p,h,i),m=h[g*d+n];break}var x=p-s,w=Math.random()*x+s|0,y=h[g*w+n],T=Math.random()*x+s|0,M=h[g*T+n],P=Math.random()*x+s|0,L=h[g*P+n];y<=M?L>=M?(b=T,m=M):y>=L?(b=w,m=y):(b=P,m=L):M>=L?(b=T,m=M):L>=y?(b=w,m=y):(b=P,m=L);for(var k=g*(p-1),C=g*b,I=0;I<g;++I,++k,++C){var E=h[k];h[k]=h[C],h[C]=E}var D=i[p-1];i[p-1]=i[b],i[b]=D,b=a(f,n,s,p-1,h,i,m);for(var k=g*(p-1),C=g*b,I=0;I<g;++I,++k,++C){var E=h[k];h[k]=h[C],h[C]=E}var D=i[p-1];if(i[p-1]=i[b],i[b]=D,d<b){for(p=b-1;s<p&&h[g*(p-1)+n]===m;)p-=1;p+=1}else if(b<d)for(s=b+1;s<p&&h[g*s+n]===m;)s+=1;else break}return a(f,n,o,d,h,i,h[g*d+n])}},{"./partition":105}],105:[function(e,v,S){v.exports=a;var r="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m";function a(u,c){var t="abcdef".split("").concat(c),f=[];return u.indexOf("lo")>=0&&f.push("lo=e[k+n]"),u.indexOf("hi")>=0&&f.push("hi=e[k+o]"),t.push(r.replace("_",f.join()).replace("$",u)),Function.apply(void 0,t)}},{}],106:[function(e,v,S){v.exports=a;var r=32;function a(i,s){s<=4*r?u(0,s-1,i):h(0,s-1,i)}function u(i,s,p){for(var d=2*(i+1),g=i+1;g<=s;++g){for(var b=p[d++],m=p[d++],x=g,w=d-2;x-- >i;){var y=p[w-2],T=p[w-1];if(y<b)break;if(y===b&&T<m)break;p[w]=y,p[w+1]=T,w-=2}p[w]=b,p[w+1]=m}}function c(i,s,p){i*=2,s*=2;var d=p[i],g=p[i+1];p[i]=p[s],p[i+1]=p[s+1],p[s]=d,p[s+1]=g}function t(i,s,p){i*=2,s*=2,p[i]=p[s],p[i+1]=p[s+1]}function f(i,s,p,d){i*=2,s*=2,p*=2;var g=d[i],b=d[i+1];d[i]=d[s],d[i+1]=d[s+1],d[s]=d[p],d[s+1]=d[p+1],d[p]=g,d[p+1]=b}function n(i,s,p,d,g){i*=2,s*=2,g[i]=g[s],g[s]=p,g[i+1]=g[s+1],g[s+1]=d}function o(i,s,p){i*=2,s*=2;var d=p[i],g=p[s];return d<g?!1:d===g?p[i+1]>p[s+1]:!0}function l(i,s,p,d){i*=2;var g=d[i];return g<s?!0:g===s?d[i+1]<p:!1}function h(i,s,p){var d=(s-i+1)/6|0,g=i+d,b=s-d,m=i+s>>1,x=m-d,w=m+d,y=g,T=x,M=m,P=w,L=b,I=i+1,E=s-1,k=0;o(y,T,p)&&(k=y,y=T,T=k),o(P,L,p)&&(k=P,P=L,L=k),o(y,M,p)&&(k=y,y=M,M=k),o(T,M,p)&&(k=T,T=M,M=k),o(y,P,p)&&(k=y,y=P,P=k),o(M,P,p)&&(k=M,M=P,P=k),o(T,L,p)&&(k=T,T=L,L=k),o(T,M,p)&&(k=T,T=M,M=k),o(P,L,p)&&(k=P,P=L,L=k);for(var C=p[2*T],D=p[2*T+1],F=p[2*P],N=p[2*P+1],G=2*y,U=2*M,X=2*L,z=2*g,B=2*m,j=2*b,V=0;V<2;++V){var K=p[G+V],te=p[U+V],$=p[X+V];p[z+V]=K,p[B+V]=te,p[j+V]=$}t(x,i,p),t(w,s,p);for(var ie=I;ie<=E;++ie)if(l(ie,C,D,p))ie!==I&&c(ie,I,p),++I;else if(!l(ie,F,N,p))for(;;)if(l(E,F,N,p)){l(E,C,D,p)?(f(ie,I,E,p),++I,--E):(c(ie,E,p),--E);break}else{if(--E<ie)break;continue}n(i,I-1,C,D,p),n(s,E+1,F,N,p),I-2-i<=r?u(i,I-2,p):h(i,I-2,p),s-(E+2)<=r?u(E+2,s,p):h(E+2,s,p),E-I<=r?u(I,E,p):h(I,E,p)}},{}],107:[function(e,v,S){v.exports={init:p,sweepBipartite:b,sweepComplete:m,scanBipartite:x,scanComplete:w};var r=e("typedarray-pool"),a=e("bit-twiddle"),u=e("./sort"),c=1<<28,t=1024,f=r.mallocInt32(t),n=r.mallocInt32(t),o=r.mallocInt32(t),l=r.mallocInt32(t),h=r.mallocInt32(t),i=r.mallocInt32(t),s=r.mallocDouble(t*8);function p(y){var T=a.nextPow2(y);f.length<T&&(r.free(f),f=r.mallocInt32(T)),n.length<T&&(r.free(n),n=r.mallocInt32(T)),o.length<T&&(r.free(o),o=r.mallocInt32(T)),l.length<T&&(r.free(l),l=r.mallocInt32(T)),h.length<T&&(r.free(h),h=r.mallocInt32(T)),i.length<T&&(r.free(i),i=r.mallocInt32(T));var M=8*T;s.length<M&&(r.free(s),s=r.mallocDouble(M))}function d(y,T,M,P){var L=T[P],I=y[M-1];y[L]=I,T[I]=L}function g(y,T,M,P){y[M]=P,T[P]=M}function b(y,T,M,P,L,I,E,k,C,D){for(var F=0,N=2*y,G=y-1,U=N-1,X=M;X<P;++X){var z=I[X],B=N*X;s[F++]=L[B+G],s[F++]=-(z+1),s[F++]=L[B+U],s[F++]=z}for(var X=E;X<k;++X){var z=D[X]+c,j=N*X;s[F++]=C[j+G],s[F++]=-z,s[F++]=C[j+U],s[F++]=z}var V=F>>>1;u(s,V);for(var K=0,te=0,X=0;X<V;++X){var $=s[2*X+1]|0;if($>=c)$=$-c|0,d(o,l,te--,$);else if($>=0)d(f,n,K--,$);else if($<=-c){$=-$-c|0;for(var ie=0;ie<K;++ie){var se=T(f[ie],$);if(se!==void 0)return se}g(o,l,te++,$)}else{$=-$-1|0;for(var ie=0;ie<te;++ie){var se=T($,o[ie]);if(se!==void 0)return se}g(f,n,K++,$)}}}function m(y,T,M,P,L,I,E,k,C,D){for(var F=0,N=2*y,G=y-1,U=N-1,X=M;X<P;++X){var z=I[X]+1<<1,B=N*X;s[F++]=L[B+G],s[F++]=-z,s[F++]=L[B+U],s[F++]=z}for(var X=E;X<k;++X){var z=D[X]+1<<1,j=N*X;s[F++]=C[j+G],s[F++]=-z|1,s[F++]=C[j+U],s[F++]=z|1}var V=F>>>1;u(s,V);for(var K=0,te=0,$=0,X=0;X<V;++X){var ie=s[2*X+1]|0,se=ie&1;if(X<V-1&&ie>>1===s[2*X+3]>>1&&(se=2,X+=1),ie<0){for(var Q=-(ie>>1)-1,H=0;H<$;++H){var oe=T(h[H],Q);if(oe!==void 0)return oe}if(se!==0)for(var H=0;H<K;++H){var oe=T(f[H],Q);if(oe!==void 0)return oe}if(se!==1)for(var H=0;H<te;++H){var oe=T(o[H],Q);if(oe!==void 0)return oe}se===0?g(f,n,K++,Q):se===1?g(o,l,te++,Q):se===2&&g(h,i,$++,Q)}else{var Q=(ie>>1)-1;se===0?d(f,n,K--,Q):se===1?d(o,l,te--,Q):se===2&&d(h,i,$--,Q)}}}function x(y,T,M,P,L,I,E,k,C,D,F,N){var G=0,U=2*y,X=T,z=T+y,B=1,j=1;P?j=c:B=c;for(var V=L;V<I;++V){var K=V+B,te=U*V;s[G++]=E[te+X],s[G++]=-K,s[G++]=E[te+z],s[G++]=K}for(var V=C;V<D;++V){var K=V+j,$=U*V;s[G++]=F[$+X],s[G++]=-K}var ie=G>>>1;u(s,ie);for(var se=0,V=0;V<ie;++V){var Q=s[2*V+1]|0;if(Q<0){var K=-Q,H=!1;if(K>=c?(H=!P,K-=c):(H=!!P,K-=1),H)g(f,n,se++,K);else{var oe=N[K],re=U*K,ee=F[re+T+1],ae=F[re+T+1+y];e:for(var fe=0;fe<se;++fe){var de=f[fe],pe=U*de;if(!(ae<E[pe+T+1]||E[pe+T+1+y]<ee)){for(var W=T+2;W<y;++W)if(F[re+W+y]<E[pe+W]||E[pe+W+y]<F[re+W])continue e;var ue=k[de],me;if(P?me=M(oe,ue):me=M(ue,oe),me!==void 0)return me}}}}else d(f,n,se--,Q-B)}}function w(y,T,M,P,L,I,E,k,C,D,F){for(var N=0,G=2*y,U=T,X=T+y,z=P;z<L;++z){var B=z+c,j=G*z;s[N++]=I[j+U],s[N++]=-B,s[N++]=I[j+X],s[N++]=B}for(var z=k;z<C;++z){var B=z+1,V=G*z;s[N++]=D[V+U],s[N++]=-B}var K=N>>>1;u(s,K);for(var te=0,z=0;z<K;++z){var $=s[2*z+1]|0;if($<0){var B=-$;if(B>=c)f[te++]=B-c;else{B-=1;var ie=F[B],se=G*B,Q=D[se+T+1],H=D[se+T+1+y];e:for(var oe=0;oe<te;++oe){var re=f[oe],ee=E[re];if(ee===ie)break;var ae=G*re;if(!(H<I[ae+T+1]||I[ae+T+1+y]<Q)){for(var fe=T+2;fe<y;++fe)if(D[se+fe+y]<I[ae+fe]||I[ae+fe+y]<D[se+fe])continue e;var de=M(ee,ie);if(de!==void 0)return de}}}}else{for(var B=$-c,oe=te-1;oe>=0;--oe)if(f[oe]===B){for(var fe=oe+1;fe<te;++fe)f[fe-1]=f[fe];break}--te}}}},{"./sort":106,"bit-twiddle":97,"typedarray-pool":595}],108:[function(e,v,S){},{}],109:[function(e,v,S){arguments[4][108][0].apply(S,arguments)},{dup:108}],110:[function(e,v,S){var r=typeof Reflect=="object"?Reflect:null,a=r&&typeof r.apply=="function"?r.apply:function(y,T,M){return Function.prototype.apply.call(y,T,M)},u;r&&typeof r.ownKeys=="function"?u=r.ownKeys:Object.getOwnPropertySymbols?u=function(y){return Object.getOwnPropertyNames(y).concat(Object.getOwnPropertySymbols(y))}:u=function(y){return Object.getOwnPropertyNames(y)};function c(w){console&&console.warn&&console.warn(w)}var t=Number.isNaN||function(y){return y!==y};function f(){f.init.call(this)}v.exports=f,v.exports.once=x,f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var n=10;function o(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(w){if(typeof w!="number"||w<0||t(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");n=w}}),f.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(y){if(typeof y!="number"||y<0||t(y))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+y+".");return this._maxListeners=y,this};function l(w){return w._maxListeners===void 0?f.defaultMaxListeners:w._maxListeners}f.prototype.getMaxListeners=function(){return l(this)},f.prototype.emit=function(y){for(var T=[],M=1;M<arguments.length;M++)T.push(arguments[M]);var P=y==="error",L=this._events;if(L!==void 0)P=P&&L.error===void 0;else if(!P)return!1;if(P){var I;if(T.length>0&&(I=T[0]),I instanceof Error)throw I;var E=new Error("Unhandled error."+(I?" ("+I.message+")":""));throw E.context=I,E}var k=L[y];if(k===void 0)return!1;if(typeof k=="function")a(k,this,T);else for(var C=k.length,D=g(k,C),M=0;M<C;++M)a(D[M],this,T);return!0};function h(w,y,T,M){var P,L,I;if(o(T),L=w._events,L===void 0?(L=w._events=Object.create(null),w._eventsCount=0):(L.newListener!==void 0&&(w.emit("newListener",y,T.listener?T.listener:T),L=w._events),I=L[y]),I===void 0)I=L[y]=T,++w._eventsCount;else if(typeof I=="function"?I=L[y]=M?[T,I]:[I,T]:M?I.unshift(T):I.push(T),P=l(w),P>0&&I.length>P&&!I.warned){I.warned=!0;var E=new Error("Possible EventEmitter memory leak detected. "+I.length+" "+String(y)+" listeners added. Use emitter.setMaxListeners() to increase limit");E.name="MaxListenersExceededWarning",E.emitter=w,E.type=y,E.count=I.length,c(E)}return w}f.prototype.addListener=function(y,T){return h(this,y,T,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(y,T){return h(this,y,T,!0)};function i(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(w,y,T){var M={fired:!1,wrapFn:void 0,target:w,type:y,listener:T},P=i.bind(M);return P.listener=T,M.wrapFn=P,P}f.prototype.once=function(y,T){return o(T),this.on(y,s(this,y,T)),this},f.prototype.prependOnceListener=function(y,T){return o(T),this.prependListener(y,s(this,y,T)),this},f.prototype.removeListener=function(y,T){var M,P,L,I,E;if(o(T),P=this._events,P===void 0)return this;if(M=P[y],M===void 0)return this;if(M===T||M.listener===T)--this._eventsCount===0?this._events=Object.create(null):(delete P[y],P.removeListener&&this.emit("removeListener",y,M.listener||T));else if(typeof M!="function"){for(L=-1,I=M.length-1;I>=0;I--)if(M[I]===T||M[I].listener===T){E=M[I].listener,L=I;break}if(L<0)return this;L===0?M.shift():b(M,L),M.length===1&&(P[y]=M[0]),P.removeListener!==void 0&&this.emit("removeListener",y,E||T)}return this},f.prototype.off=f.prototype.removeListener,f.prototype.removeAllListeners=function(y){var T,M,P;if(M=this._events,M===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[y]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete M[y]),this;if(arguments.length===0){var L=Object.keys(M),I;for(P=0;P<L.length;++P)I=L[P],I!=="removeListener"&&this.removeAllListeners(I);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(T=M[y],typeof T=="function")this.removeListener(y,T);else if(T!==void 0)for(P=T.length-1;P>=0;P--)this.removeListener(y,T[P]);return this};function p(w,y,T){var M=w._events;if(M===void 0)return[];var P=M[y];return P===void 0?[]:typeof P=="function"?T?[P.listener||P]:[P]:T?m(P):g(P,P.length)}f.prototype.listeners=function(y){return p(this,y,!0)},f.prototype.rawListeners=function(y){return p(this,y,!1)},f.listenerCount=function(w,y){return typeof w.listenerCount=="function"?w.listenerCount(y):d.call(w,y)},f.prototype.listenerCount=d;function d(w){var y=this._events;if(y!==void 0){var T=y[w];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}f.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function g(w,y){for(var T=new Array(y),M=0;M<y;++M)T[M]=w[M];return T}function b(w,y){for(;y+1<w.length;y++)w[y]=w[y+1];w.pop()}function m(w){for(var y=new Array(w.length),T=0;T<y.length;++T)y[T]=w[T].listener||w[T];return y}function x(w,y){return new Promise(function(T,M){function P(){L!==void 0&&w.removeListener("error",L),T([].slice.call(arguments))}var L;y!=="error"&&(L=function(E){w.removeListener(y,P),M(E)},w.once("error",L)),w.once(y,P)})}},{}],111:[function(e,v,S){(function(r){(function(){var a=e("base64-js"),u=e("ieee754");S.Buffer=n,S.SlowBuffer=m,S.INSPECT_MAX_BYTES=50;var c=2147483647;S.kMaxLength=c,n.TYPED_ARRAY_SUPPORT=t(),!n.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function t(){try{var pe=new Uint8Array(1);return pe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},pe.foo()===42}catch{return!1}}Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(!!n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(!!n.isBuffer(this))return this.byteOffset}});function f(pe){if(pe>c)throw new RangeError('The value "'+pe+'" is invalid for option "size"');var W=new Uint8Array(pe);return W.__proto__=n.prototype,W}function n(pe,W,ue){if(typeof pe=="number"){if(typeof W=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return i(pe)}return o(pe,W,ue)}typeof Symbol<"u"&&Symbol.species!=null&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192;function o(pe,W,ue){if(typeof pe=="string")return s(pe,W);if(ArrayBuffer.isView(pe))return p(pe);if(pe==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe);if(fe(pe,ArrayBuffer)||pe&&fe(pe.buffer,ArrayBuffer))return d(pe,W,ue);if(typeof pe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var me=pe.valueOf&&pe.valueOf();if(me!=null&&me!==pe)return n.from(me,W,ue);var be=g(pe);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof pe[Symbol.toPrimitive]=="function")return n.from(pe[Symbol.toPrimitive]("string"),W,ue);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe)}n.from=function(pe,W,ue){return o(pe,W,ue)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array;function l(pe){if(typeof pe!="number")throw new TypeError('"size" argument must be of type number');if(pe<0)throw new RangeError('The value "'+pe+'" is invalid for option "size"')}function h(pe,W,ue){return l(pe),pe<=0?f(pe):W!==void 0?typeof ue=="string"?f(pe).fill(W,ue):f(pe).fill(W):f(pe)}n.alloc=function(pe,W,ue){return h(pe,W,ue)};function i(pe){return l(pe),f(pe<0?0:b(pe)|0)}n.allocUnsafe=function(pe){return i(pe)},n.allocUnsafeSlow=function(pe){return i(pe)};function s(pe,W){if((typeof W!="string"||W==="")&&(W="utf8"),!n.isEncoding(W))throw new TypeError("Unknown encoding: "+W);var ue=x(pe,W)|0,me=f(ue),be=me.write(pe,W);return be!==ue&&(me=me.slice(0,be)),me}function p(pe){for(var W=pe.length<0?0:b(pe.length)|0,ue=f(W),me=0;me<W;me+=1)ue[me]=pe[me]&255;return ue}function d(pe,W,ue){if(W<0||pe.byteLength<W)throw new RangeError('"offset" is outside of buffer bounds');if(pe.byteLength<W+(ue||0))throw new RangeError('"length" is outside of buffer bounds');var me;return W===void 0&&ue===void 0?me=new Uint8Array(pe):ue===void 0?me=new Uint8Array(pe,W):me=new Uint8Array(pe,W,ue),me.__proto__=n.prototype,me}function g(pe){if(n.isBuffer(pe)){var W=b(pe.length)|0,ue=f(W);return ue.length===0||pe.copy(ue,0,0,W),ue}if(pe.length!==void 0)return typeof pe.length!="number"||de(pe.length)?f(0):p(pe);if(pe.type==="Buffer"&&Array.isArray(pe.data))return p(pe.data)}function b(pe){if(pe>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return pe|0}function m(pe){return+pe!=pe&&(pe=0),n.alloc(+pe)}n.isBuffer=function(W){return W!=null&&W._isBuffer===!0&&W!==n.prototype},n.compare=function(W,ue){if(fe(W,Uint8Array)&&(W=n.from(W,W.offset,W.byteLength)),fe(ue,Uint8Array)&&(ue=n.from(ue,ue.offset,ue.byteLength)),!n.isBuffer(W)||!n.isBuffer(ue))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(W===ue)return 0;for(var me=W.length,be=ue.length,Me=0,Pe=Math.min(me,be);Me<Pe;++Me)if(W[Me]!==ue[Me]){me=W[Me],be=ue[Me];break}return me<be?-1:be<me?1:0},n.isEncoding=function(W){switch(String(W).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(W,ue){if(!Array.isArray(W))throw new TypeError('"list" argument must be an Array of Buffers');if(W.length===0)return n.alloc(0);var me;if(ue===void 0)for(ue=0,me=0;me<W.length;++me)ue+=W[me].length;var be=n.allocUnsafe(ue),Me=0;for(me=0;me<W.length;++me){var Pe=W[me];if(fe(Pe,Uint8Array)&&(Pe=n.from(Pe)),!n.isBuffer(Pe))throw new TypeError('"list" argument must be an Array of Buffers');Pe.copy(be,Me),Me+=Pe.length}return be};function x(pe,W){if(n.isBuffer(pe))return pe.length;if(ArrayBuffer.isView(pe)||fe(pe,ArrayBuffer))return pe.byteLength;if(typeof pe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof pe);var ue=pe.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&ue===0)return 0;for(var be=!1;;)switch(W){case"ascii":case"latin1":case"binary":return ue;case"utf8":case"utf-8":return H(pe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue*2;case"hex":return ue>>>1;case"base64":return ee(pe).length;default:if(be)return me?-1:H(pe).length;W=(""+W).toLowerCase(),be=!0}}n.byteLength=x;function w(pe,W,ue){var me=!1;if((W===void 0||W<0)&&(W=0),W>this.length||((ue===void 0||ue>this.length)&&(ue=this.length),ue<=0)||(ue>>>=0,W>>>=0,ue<=W))return"";for(pe||(pe="utf8");;)switch(pe){case"hex":return z(this,W,ue);case"utf8":case"utf-8":return F(this,W,ue);case"ascii":return U(this,W,ue);case"latin1":case"binary":return X(this,W,ue);case"base64":return D(this,W,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,W,ue);default:if(me)throw new TypeError("Unknown encoding: "+pe);pe=(pe+"").toLowerCase(),me=!0}}n.prototype._isBuffer=!0;function y(pe,W,ue){var me=pe[W];pe[W]=pe[ue],pe[ue]=me}n.prototype.swap16=function(){var W=this.length;if(W%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ue=0;ue<W;ue+=2)y(this,ue,ue+1);return this},n.prototype.swap32=function(){var W=this.length;if(W%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ue=0;ue<W;ue+=4)y(this,ue,ue+3),y(this,ue+1,ue+2);return this},n.prototype.swap64=function(){var W=this.length;if(W%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ue=0;ue<W;ue+=8)y(this,ue,ue+7),y(this,ue+1,ue+6),y(this,ue+2,ue+5),y(this,ue+3,ue+4);return this},n.prototype.toString=function(){var W=this.length;return W===0?"":arguments.length===0?F(this,0,W):w.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(W){if(!n.isBuffer(W))throw new TypeError("Argument must be a Buffer");return this===W?!0:n.compare(this,W)===0},n.prototype.inspect=function(){var W="",ue=S.INSPECT_MAX_BYTES;return W=this.toString("hex",0,ue).replace(/(.{2})/g,"$1 ").trim(),this.length>ue&&(W+=" ... "),"<Buffer "+W+">"},n.prototype.compare=function(W,ue,me,be,Me){if(fe(W,Uint8Array)&&(W=n.from(W,W.offset,W.byteLength)),!n.isBuffer(W))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof W);if(ue===void 0&&(ue=0),me===void 0&&(me=W?W.length:0),be===void 0&&(be=0),Me===void 0&&(Me=this.length),ue<0||me>W.length||be<0||Me>this.length)throw new RangeError("out of range index");if(be>=Me&&ue>=me)return 0;if(be>=Me)return-1;if(ue>=me)return 1;if(ue>>>=0,me>>>=0,be>>>=0,Me>>>=0,this===W)return 0;for(var Pe=Me-be,Ge=me-ue,ze=Math.min(Pe,Ge),Qe=this.slice(be,Me),tt=W.slice(ue,me),Ce=0;Ce<ze;++Ce)if(Qe[Ce]!==tt[Ce]){Pe=Qe[Ce],Ge=tt[Ce];break}return Pe<Ge?-1:Ge<Pe?1:0};function T(pe,W,ue,me,be){if(pe.length===0)return-1;if(typeof ue=="string"?(me=ue,ue=0):ue>2147483647?ue=2147483647:ue<-2147483648&&(ue=-2147483648),ue=+ue,de(ue)&&(ue=be?0:pe.length-1),ue<0&&(ue=pe.length+ue),ue>=pe.length){if(be)return-1;ue=pe.length-1}else if(ue<0)if(be)ue=0;else return-1;if(typeof W=="string"&&(W=n.from(W,me)),n.isBuffer(W))return W.length===0?-1:M(pe,W,ue,me,be);if(typeof W=="number")return W=W&255,typeof Uint8Array.prototype.indexOf=="function"?be?Uint8Array.prototype.indexOf.call(pe,W,ue):Uint8Array.prototype.lastIndexOf.call(pe,W,ue):M(pe,[W],ue,me,be);throw new TypeError("val must be string, number or Buffer")}function M(pe,W,ue,me,be){var Me=1,Pe=pe.length,Ge=W.length;if(me!==void 0&&(me=String(me).toLowerCase(),me==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(pe.length<2||W.length<2)return-1;Me=2,Pe/=2,Ge/=2,ue/=2}function ze(Be,qe){return Me===1?Be[qe]:Be.readUInt16BE(qe*Me)}var Qe;if(be){var tt=-1;for(Qe=ue;Qe<Pe;Qe++)if(ze(pe,Qe)===ze(W,tt===-1?0:Qe-tt)){if(tt===-1&&(tt=Qe),Qe-tt+1===Ge)return tt*Me}else tt!==-1&&(Qe-=Qe-tt),tt=-1}else for(ue+Ge>Pe&&(ue=Pe-Ge),Qe=ue;Qe>=0;Qe--){for(var Ce=!0,Ae=0;Ae<Ge;Ae++)if(ze(pe,Qe+Ae)!==ze(W,Ae)){Ce=!1;break}if(Ce)return Qe}return-1}n.prototype.includes=function(W,ue,me){return this.indexOf(W,ue,me)!==-1},n.prototype.indexOf=function(W,ue,me){return T(this,W,ue,me,!0)},n.prototype.lastIndexOf=function(W,ue,me){return T(this,W,ue,me,!1)};function P(pe,W,ue,me){ue=Number(ue)||0;var be=pe.length-ue;me?(me=Number(me),me>be&&(me=be)):me=be;var Me=W.length;me>Me/2&&(me=Me/2);for(var Pe=0;Pe<me;++Pe){var Ge=parseInt(W.substr(Pe*2,2),16);if(de(Ge))return Pe;pe[ue+Pe]=Ge}return Pe}function L(pe,W,ue,me){return ae(H(W,pe.length-ue),pe,ue,me)}function I(pe,W,ue,me){return ae(oe(W),pe,ue,me)}function E(pe,W,ue,me){return I(pe,W,ue,me)}function k(pe,W,ue,me){return ae(ee(W),pe,ue,me)}function C(pe,W,ue,me){return ae(re(W,pe.length-ue),pe,ue,me)}n.prototype.write=function(W,ue,me,be){if(ue===void 0)be="utf8",me=this.length,ue=0;else if(me===void 0&&typeof ue=="string")be=ue,me=this.length,ue=0;else if(isFinite(ue))ue=ue>>>0,isFinite(me)?(me=me>>>0,be===void 0&&(be="utf8")):(be=me,me=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Me=this.length-ue;if((me===void 0||me>Me)&&(me=Me),W.length>0&&(me<0||ue<0)||ue>this.length)throw new RangeError("Attempt to write outside buffer bounds");be||(be="utf8");for(var Pe=!1;;)switch(be){case"hex":return P(this,W,ue,me);case"utf8":case"utf-8":return L(this,W,ue,me);case"ascii":return I(this,W,ue,me);case"latin1":case"binary":return E(this,W,ue,me);case"base64":return k(this,W,ue,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,W,ue,me);default:if(Pe)throw new TypeError("Unknown encoding: "+be);be=(""+be).toLowerCase(),Pe=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(pe,W,ue){return W===0&&ue===pe.length?a.fromByteArray(pe):a.fromByteArray(pe.slice(W,ue))}function F(pe,W,ue){ue=Math.min(pe.length,ue);for(var me=[],be=W;be<ue;){var Me=pe[be],Pe=null,Ge=Me>239?4:Me>223?3:Me>191?2:1;if(be+Ge<=ue){var ze,Qe,tt,Ce;switch(Ge){case 1:Me<128&&(Pe=Me);break;case 2:ze=pe[be+1],(ze&192)===128&&(Ce=(Me&31)<<6|ze&63,Ce>127&&(Pe=Ce));break;case 3:ze=pe[be+1],Qe=pe[be+2],(ze&192)===128&&(Qe&192)===128&&(Ce=(Me&15)<<12|(ze&63)<<6|Qe&63,Ce>2047&&(Ce<55296||Ce>57343)&&(Pe=Ce));break;case 4:ze=pe[be+1],Qe=pe[be+2],tt=pe[be+3],(ze&192)===128&&(Qe&192)===128&&(tt&192)===128&&(Ce=(Me&15)<<18|(ze&63)<<12|(Qe&63)<<6|tt&63,Ce>65535&&Ce<1114112&&(Pe=Ce))}}Pe===null?(Pe=65533,Ge=1):Pe>65535&&(Pe-=65536,me.push(Pe>>>10&1023|55296),Pe=56320|Pe&1023),me.push(Pe),be+=Ge}return G(me)}var N=4096;function G(pe){var W=pe.length;if(W<=N)return String.fromCharCode.apply(String,pe);for(var ue="",me=0;me<W;)ue+=String.fromCharCode.apply(String,pe.slice(me,me+=N));return ue}function U(pe,W,ue){var me="";ue=Math.min(pe.length,ue);for(var be=W;be<ue;++be)me+=String.fromCharCode(pe[be]&127);return me}function X(pe,W,ue){var me="";ue=Math.min(pe.length,ue);for(var be=W;be<ue;++be)me+=String.fromCharCode(pe[be]);return me}function z(pe,W,ue){var me=pe.length;(!W||W<0)&&(W=0),(!ue||ue<0||ue>me)&&(ue=me);for(var be="",Me=W;Me<ue;++Me)be+=Q(pe[Me]);return be}function B(pe,W,ue){for(var me=pe.slice(W,ue),be="",Me=0;Me<me.length;Me+=2)be+=String.fromCharCode(me[Me]+me[Me+1]*256);return be}n.prototype.slice=function(W,ue){var me=this.length;W=~~W,ue=ue===void 0?me:~~ue,W<0?(W+=me,W<0&&(W=0)):W>me&&(W=me),ue<0?(ue+=me,ue<0&&(ue=0)):ue>me&&(ue=me),ue<W&&(ue=W);var be=this.subarray(W,ue);return be.__proto__=n.prototype,be};function j(pe,W,ue){if(pe%1!==0||pe<0)throw new RangeError("offset is not uint");if(pe+W>ue)throw new RangeError("Trying to access beyond buffer length")}n.prototype.readUIntLE=function(W,ue,me){W=W>>>0,ue=ue>>>0,me||j(W,ue,this.length);for(var be=this[W],Me=1,Pe=0;++Pe<ue&&(Me*=256);)be+=this[W+Pe]*Me;return be},n.prototype.readUIntBE=function(W,ue,me){W=W>>>0,ue=ue>>>0,me||j(W,ue,this.length);for(var be=this[W+--ue],Me=1;ue>0&&(Me*=256);)be+=this[W+--ue]*Me;return be},n.prototype.readUInt8=function(W,ue){return W=W>>>0,ue||j(W,1,this.length),this[W]},n.prototype.readUInt16LE=function(W,ue){return W=W>>>0,ue||j(W,2,this.length),this[W]|this[W+1]<<8},n.prototype.readUInt16BE=function(W,ue){return W=W>>>0,ue||j(W,2,this.length),this[W]<<8|this[W+1]},n.prototype.readUInt32LE=function(W,ue){return W=W>>>0,ue||j(W,4,this.length),(this[W]|this[W+1]<<8|this[W+2]<<16)+this[W+3]*16777216},n.prototype.readUInt32BE=function(W,ue){return W=W>>>0,ue||j(W,4,this.length),this[W]*16777216+(this[W+1]<<16|this[W+2]<<8|this[W+3])},n.prototype.readIntLE=function(W,ue,me){W=W>>>0,ue=ue>>>0,me||j(W,ue,this.length);for(var be=this[W],Me=1,Pe=0;++Pe<ue&&(Me*=256);)be+=this[W+Pe]*Me;return Me*=128,be>=Me&&(be-=Math.pow(2,8*ue)),be},n.prototype.readIntBE=function(W,ue,me){W=W>>>0,ue=ue>>>0,me||j(W,ue,this.length);for(var be=ue,Me=1,Pe=this[W+--be];be>0&&(Me*=256);)Pe+=this[W+--be]*Me;return Me*=128,Pe>=Me&&(Pe-=Math.pow(2,8*ue)),Pe},n.prototype.readInt8=function(W,ue){return W=W>>>0,ue||j(W,1,this.length),this[W]&128?(255-this[W]+1)*-1:this[W]},n.prototype.readInt16LE=function(W,ue){W=W>>>0,ue||j(W,2,this.length);var me=this[W]|this[W+1]<<8;return me&32768?me|4294901760:me},n.prototype.readInt16BE=function(W,ue){W=W>>>0,ue||j(W,2,this.length);var me=this[W+1]|this[W]<<8;return me&32768?me|4294901760:me},n.prototype.readInt32LE=function(W,ue){return W=W>>>0,ue||j(W,4,this.length),this[W]|this[W+1]<<8|this[W+2]<<16|this[W+3]<<24},n.prototype.readInt32BE=function(W,ue){return W=W>>>0,ue||j(W,4,this.length),this[W]<<24|this[W+1]<<16|this[W+2]<<8|this[W+3]},n.prototype.readFloatLE=function(W,ue){return W=W>>>0,ue||j(W,4,this.length),u.read(this,W,!0,23,4)},n.prototype.readFloatBE=function(W,ue){return W=W>>>0,ue||j(W,4,this.length),u.read(this,W,!1,23,4)},n.prototype.readDoubleLE=function(W,ue){return W=W>>>0,ue||j(W,8,this.length),u.read(this,W,!0,52,8)},n.prototype.readDoubleBE=function(W,ue){return W=W>>>0,ue||j(W,8,this.length),u.read(this,W,!1,52,8)};function V(pe,W,ue,me,be,Me){if(!n.isBuffer(pe))throw new TypeError('"buffer" argument must be a Buffer instance');if(W>be||W<Me)throw new RangeError('"value" argument is out of bounds');if(ue+me>pe.length)throw new RangeError("Index out of range")}n.prototype.writeUIntLE=function(W,ue,me,be){if(W=+W,ue=ue>>>0,me=me>>>0,!be){var Me=Math.pow(2,8*me)-1;V(this,W,ue,me,Me,0)}var Pe=1,Ge=0;for(this[ue]=W&255;++Ge<me&&(Pe*=256);)this[ue+Ge]=W/Pe&255;return ue+me},n.prototype.writeUIntBE=function(W,ue,me,be){if(W=+W,ue=ue>>>0,me=me>>>0,!be){var Me=Math.pow(2,8*me)-1;V(this,W,ue,me,Me,0)}var Pe=me-1,Ge=1;for(this[ue+Pe]=W&255;--Pe>=0&&(Ge*=256);)this[ue+Pe]=W/Ge&255;return ue+me},n.prototype.writeUInt8=function(W,ue,me){return W=+W,ue=ue>>>0,me||V(this,W,ue,1,255,0),this[ue]=W&255,ue+1},n.prototype.writeUInt16LE=function(W,ue,me){return W=+W,ue=ue>>>0,me||V(this,W,ue,2,65535,0),this[ue]=W&255,this[ue+1]=W>>>8,ue+2},n.prototype.writeUInt16BE=function(W,ue,me){return W=+W,ue=ue>>>0,me||V(this,W,ue,2,65535,0),this[ue]=W>>>8,this[ue+1]=W&255,ue+2},n.prototype.writeUInt32LE=function(W,ue,me){return W=+W,ue=ue>>>0,me||V(this,W,ue,4,4294967295,0),this[ue+3]=W>>>24,this[ue+2]=W>>>16,this[ue+1]=W>>>8,this[ue]=W&255,ue+4},n.prototype.writeUInt32BE=function(W,ue,me){return W=+W,ue=ue>>>0,me||V(this,W,ue,4,4294967295,0),this[ue]=W>>>24,this[ue+1]=W>>>16,this[ue+2]=W>>>8,this[ue+3]=W&255,ue+4},n.prototype.writeIntLE=function(W,ue,me,be){if(W=+W,ue=ue>>>0,!be){var Me=Math.pow(2,8*me-1);V(this,W,ue,me,Me-1,-Me)}var Pe=0,Ge=1,ze=0;for(this[ue]=W&255;++Pe<me&&(Ge*=256);)W<0&&ze===0&&this[ue+Pe-1]!==0&&(ze=1),this[ue+Pe]=(W/Ge>>0)-ze&255;return ue+me},n.prototype.writeIntBE=function(W,ue,me,be){if(W=+W,ue=ue>>>0,!be){var Me=Math.pow(2,8*me-1);V(this,W,ue,me,Me-1,-Me)}var Pe=me-1,Ge=1,ze=0;for(this[ue+Pe]=W&255;--Pe>=0&&(Ge*=256);)W<0&&ze===0&&this[ue+Pe+1]!==0&&(ze=1),this[ue+Pe]=(W/Ge>>0)-ze&255;return ue+me},n.prototype.writeInt8=function(W,ue,me){return W=+W,ue=ue>>>0,me||V(this,W,ue,1,127,-128),W<0&&(W=255+W+1),this[ue]=W&255,ue+1},n.prototype.writeInt16LE=function(W,ue,me){return W=+W,ue=ue>>>0,me||V(this,W,ue,2,32767,-32768),this[ue]=W&255,this[ue+1]=W>>>8,ue+2},n.prototype.writeInt16BE=function(W,ue,me){return W=+W,ue=ue>>>0,me||V(this,W,ue,2,32767,-32768),this[ue]=W>>>8,this[ue+1]=W&255,ue+2},n.prototype.writeInt32LE=function(W,ue,me){return W=+W,ue=ue>>>0,me||V(this,W,ue,4,2147483647,-2147483648),this[ue]=W&255,this[ue+1]=W>>>8,this[ue+2]=W>>>16,this[ue+3]=W>>>24,ue+4},n.prototype.writeInt32BE=function(W,ue,me){return W=+W,ue=ue>>>0,me||V(this,W,ue,4,2147483647,-2147483648),W<0&&(W=4294967295+W+1),this[ue]=W>>>24,this[ue+1]=W>>>16,this[ue+2]=W>>>8,this[ue+3]=W&255,ue+4};function K(pe,W,ue,me,be,Me){if(ue+me>pe.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("Index out of range")}function te(pe,W,ue,me,be){return W=+W,ue=ue>>>0,be||K(pe,W,ue,4),u.write(pe,W,ue,me,23,4),ue+4}n.prototype.writeFloatLE=function(W,ue,me){return te(this,W,ue,!0,me)},n.prototype.writeFloatBE=function(W,ue,me){return te(this,W,ue,!1,me)};function $(pe,W,ue,me,be){return W=+W,ue=ue>>>0,be||K(pe,W,ue,8),u.write(pe,W,ue,me,52,8),ue+8}n.prototype.writeDoubleLE=function(W,ue,me){return $(this,W,ue,!0,me)},n.prototype.writeDoubleBE=function(W,ue,me){return $(this,W,ue,!1,me)},n.prototype.copy=function(W,ue,me,be){if(!n.isBuffer(W))throw new TypeError("argument should be a Buffer");if(me||(me=0),!be&&be!==0&&(be=this.length),ue>=W.length&&(ue=W.length),ue||(ue=0),be>0&&be<me&&(be=me),be===me||W.length===0||this.length===0)return 0;if(ue<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("sourceEnd out of bounds");be>this.length&&(be=this.length),W.length-ue<be-me&&(be=W.length-ue+me);var Me=be-me;if(this===W&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ue,me,be);else if(this===W&&me<ue&&ue<be)for(var Pe=Me-1;Pe>=0;--Pe)W[Pe+ue]=this[Pe+me];else Uint8Array.prototype.set.call(W,this.subarray(me,be),ue);return Me},n.prototype.fill=function(W,ue,me,be){if(typeof W=="string"){if(typeof ue=="string"?(be=ue,ue=0,me=this.length):typeof me=="string"&&(be=me,me=this.length),be!==void 0&&typeof be!="string")throw new TypeError("encoding must be a string");if(typeof be=="string"&&!n.isEncoding(be))throw new TypeError("Unknown encoding: "+be);if(W.length===1){var Me=W.charCodeAt(0);(be==="utf8"&&Me<128||be==="latin1")&&(W=Me)}}else typeof W=="number"&&(W=W&255);if(ue<0||this.length<ue||this.length<me)throw new RangeError("Out of range index");if(me<=ue)return this;ue=ue>>>0,me=me===void 0?this.length:me>>>0,W||(W=0);var Pe;if(typeof W=="number")for(Pe=ue;Pe<me;++Pe)this[Pe]=W;else{var Ge=n.isBuffer(W)?W:n.from(W,be),ze=Ge.length;if(ze===0)throw new TypeError('The value "'+W+'" is invalid for argument "value"');for(Pe=0;Pe<me-ue;++Pe)this[Pe+ue]=Ge[Pe%ze]}return this};var ie=/[^+/0-9A-Za-z-_]/g;function se(pe){if(pe=pe.split("=")[0],pe=pe.trim().replace(ie,""),pe.length<2)return"";for(;pe.length%4!==0;)pe=pe+"=";return pe}function Q(pe){return pe<16?"0"+pe.toString(16):pe.toString(16)}function H(pe,W){W=W||1/0;for(var ue,me=pe.length,be=null,Me=[],Pe=0;Pe<me;++Pe){if(ue=pe.charCodeAt(Pe),ue>55295&&ue<57344){if(!be){if(ue>56319){(W-=3)>-1&&Me.push(239,191,189);continue}else if(Pe+1===me){(W-=3)>-1&&Me.push(239,191,189);continue}be=ue;continue}if(ue<56320){(W-=3)>-1&&Me.push(239,191,189),be=ue;continue}ue=(be-55296<<10|ue-56320)+65536}else be&&(W-=3)>-1&&Me.push(239,191,189);if(be=null,ue<128){if((W-=1)<0)break;Me.push(ue)}else if(ue<2048){if((W-=2)<0)break;Me.push(ue>>6|192,ue&63|128)}else if(ue<65536){if((W-=3)<0)break;Me.push(ue>>12|224,ue>>6&63|128,ue&63|128)}else if(ue<1114112){if((W-=4)<0)break;Me.push(ue>>18|240,ue>>12&63|128,ue>>6&63|128,ue&63|128)}else throw new Error("Invalid code point")}return Me}function oe(pe){for(var W=[],ue=0;ue<pe.length;++ue)W.push(pe.charCodeAt(ue)&255);return W}function re(pe,W){for(var ue,me,be,Me=[],Pe=0;Pe<pe.length&&!((W-=2)<0);++Pe)ue=pe.charCodeAt(Pe),me=ue>>8,be=ue%256,Me.push(be),Me.push(me);return Me}function ee(pe){return a.toByteArray(se(pe))}function ae(pe,W,ue,me){for(var be=0;be<me&&!(be+ue>=W.length||be>=pe.length);++be)W[be+ue]=pe[be];return be}function fe(pe,W){return pe instanceof W||pe!=null&&pe.constructor!=null&&pe.constructor.name!=null&&pe.constructor.name===W.name}function de(pe){return pe!==pe}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":79,buffer:111,ieee754:442}],112:[function(e,v,S){var r=e("./lib/monotone"),a=e("./lib/triangulation"),u=e("./lib/delaunay"),c=e("./lib/filter");v.exports=l;function t(h){return[Math.min(h[0],h[1]),Math.max(h[0],h[1])]}function f(h,i){return h[0]-i[0]||h[1]-i[1]}function n(h){return h.map(t).sort(f)}function o(h,i,s){return i in h?h[i]:s}function l(h,i,s){Array.isArray(i)?(s=s||{},i=i||[]):(s=i||{},i=[]);var p=!!o(s,"delaunay",!0),d=!!o(s,"interior",!0),g=!!o(s,"exterior",!0),b=!!o(s,"infinity",!1);if(!d&&!g||h.length===0)return[];var m=r(h,i);if(p||d!==g||b){for(var x=a(h.length,n(i)),w=0;w<m.length;++w){var y=m[w];x.addTriangle(y[0],y[1],y[2])}return p&&u(h,x),g?d?b?c(x,0,b):x.cells():c(x,1,b):c(x,-1)}else return m}},{"./lib/delaunay":113,"./lib/filter":114,"./lib/monotone":115,"./lib/triangulation":116}],113:[function(e,v,S){var r=e("robust-in-sphere")[4];e("binary-search-bounds"),v.exports=u;function a(c,t,f,n,o,l){var h=t.opposite(n,o);if(!(h<0)){if(o<n){var i=n;n=o,o=i,i=l,l=h,h=i}t.isConstraint(n,o)||r(c[n],c[o],c[l],c[h])<0&&f.push(n,o)}}function u(c,t){for(var f=[],n=c.length,o=t.stars,l=0;l<n;++l)for(var h=o[l],i=1;i<h.length;i+=2){var s=h[i];if(!(s<l)&&!t.isConstraint(l,s)){for(var p=h[i-1],d=-1,g=1;g<h.length;g+=2)if(h[g-1]===s){d=h[g];break}d<0||r(c[l],c[s],c[p],c[d])<0&&f.push(l,s)}}for(;f.length>0;){for(var s=f.pop(),l=f.pop(),p=-1,d=-1,h=o[l],b=1;b<h.length;b+=2){var m=h[b-1],x=h[b];m===s?d=x:x===s&&(p=m)}p<0||d<0||r(c[l],c[s],c[p],c[d])>=0||(t.flip(l,s),a(c,t,f,p,l,d),a(c,t,f,l,d,p),a(c,t,f,d,s,p),a(c,t,f,s,p,d))}}},{"binary-search-bounds":96,"robust-in-sphere":546}],114:[function(e,v,S){var r=e("binary-search-bounds");v.exports=n;function a(o,l,h,i,s,p,d){this.cells=o,this.neighbor=l,this.flags=i,this.constraint=h,this.active=s,this.next=p,this.boundary=d}var u=a.prototype;function c(o,l){return o[0]-l[0]||o[1]-l[1]||o[2]-l[2]}u.locate=function(){var o=[0,0,0];return function(l,h,i){var s=l,p=h,d=i;return h<i?h<l&&(s=h,p=i,d=l):i<l&&(s=i,p=l,d=h),s<0?-1:(o[0]=s,o[1]=p,o[2]=d,r.eq(this.cells,o,c))}}();function t(o,l){for(var h=o.cells(),i=h.length,s=0;s<i;++s){var p=h[s],d=p[0],g=p[1],b=p[2];g<b?g<d&&(p[0]=g,p[1]=b,p[2]=d):b<d&&(p[0]=b,p[1]=d,p[2]=g)}h.sort(c);for(var m=new Array(i),s=0;s<m.length;++s)m[s]=0;var x=[],w=[],y=new Array(3*i),T=new Array(3*i),M=null;l&&(M=[]);for(var P=new a(h,y,T,m,x,w,M),s=0;s<i;++s)for(var p=h[s],L=0;L<3;++L){var d=p[L],g=p[(L+1)%3],I=y[3*s+L]=P.locate(g,d,o.opposite(g,d)),E=T[3*s+L]=o.isConstraint(d,g);I<0&&(E?w.push(s):(x.push(s),m[s]=1),l&&M.push([g,d,-1]))}return P}function f(o,l,h){for(var i=0,s=0;s<o.length;++s)l[s]===h&&(o[i++]=o[s]);return o.length=i,o}function n(o,l,h){var i=t(o,h);if(l===0)return h?i.cells.concat(i.boundary):i.cells;for(var s=1,p=i.active,d=i.next,g=i.flags,b=i.cells,m=i.constraint,x=i.neighbor;p.length>0||d.length>0;){for(;p.length>0;){var w=p.pop();if(g[w]!==-s){g[w]=s,b[w];for(var y=0;y<3;++y){var T=x[3*w+y];T>=0&&g[T]===0&&(m[3*w+y]?d.push(T):(p.push(T),g[T]=s))}}}var M=d;d=p,p=M,d.length=0,s=-s}var P=f(b,g,l);return h?P.concat(i.boundary):P}},{"binary-search-bounds":96}],115:[function(e,v,S){var r=e("binary-search-bounds"),a=e("robust-orientation")[3],u=0,c=1,t=2;v.exports=d;function f(g,b,m,x,w){this.a=g,this.b=b,this.idx=m,this.lowerIds=x,this.upperIds=w}function n(g,b,m,x){this.a=g,this.b=b,this.type=m,this.idx=x}function o(g,b){var m=g.a[0]-b.a[0]||g.a[1]-b.a[1]||g.type-b.type;return m||g.type!==u&&(m=a(g.a,g.b,b.b),m)?m:g.idx-b.idx}function l(g,b){return a(g.a,g.b,b)}function h(g,b,m,x,w){for(var y=r.lt(b,x,l),T=r.gt(b,x,l),M=y;M<T;++M){for(var P=b[M],L=P.lowerIds,E=L.length;E>1&&a(m[L[E-2]],m[L[E-1]],x)>0;)g.push([L[E-1],L[E-2],w]),E-=1;L.length=E,L.push(w);for(var I=P.upperIds,E=I.length;E>1&&a(m[I[E-2]],m[I[E-1]],x)<0;)g.push([I[E-2],I[E-1],w]),E-=1;I.length=E,I.push(w)}}function i(g,b){var m;return g.a[0]<b.a[0]?m=a(g.a,g.b,b.a):m=a(b.b,b.a,g.a),m||(b.b[0]<g.b[0]?m=a(g.a,g.b,b.b):m=a(b.b,b.a,g.b),m||g.idx-b.idx)}function s(g,b,m){var x=r.le(g,m,i),w=g[x],y=w.upperIds,T=y[y.length-1];w.upperIds=[T],g.splice(x+1,0,new f(m.a,m.b,m.idx,[T],y))}function p(g,b,m){var x=m.a;m.a=m.b,m.b=x;var w=r.eq(g,m,i),y=g[w],T=g[w-1];T.upperIds=y.upperIds,g.splice(w,1)}function d(g,b){for(var m=g.length,x=b.length,w=[],y=0;y<m;++y)w.push(new n(g[y],null,u,y));for(var y=0;y<x;++y){var T=b[y],M=g[T[0]],P=g[T[1]];M[0]<P[0]?w.push(new n(M,P,t,y),new n(P,M,c,y)):M[0]>P[0]&&w.push(new n(P,M,t,y),new n(M,P,c,y))}w.sort(o);for(var L=w[0].a[0]-(1+Math.abs(w[0].a[0]))*Math.pow(2,-52),I=[new f([L,1],[L,0],-1,[],[])],E=[],y=0,k=w.length;y<k;++y){var C=w[y],D=C.type;D===u?h(E,I,g,C.a,C.idx):D===t?s(I,g,C):p(I,g,C)}return E}},{"binary-search-bounds":96,"robust-orientation":548}],116:[function(e,v,S){var r=e("binary-search-bounds");v.exports=t;function a(f,n){this.stars=f,this.edges=n}var u=a.prototype;function c(f,n,o){for(var l=1,h=f.length;l<h;l+=2)if(f[l-1]===n&&f[l]===o){f[l-1]=f[h-2],f[l]=f[h-1],f.length=h-2;return}}u.isConstraint=function(){var f=[0,0];function n(o,l){return o[0]-l[0]||o[1]-l[1]}return function(o,l){return f[0]=Math.min(o,l),f[1]=Math.max(o,l),r.eq(this.edges,f,n)>=0}}(),u.removeTriangle=function(f,n,o){var l=this.stars;c(l[f],n,o),c(l[n],o,f),c(l[o],f,n)},u.addTriangle=function(f,n,o){var l=this.stars;l[f].push(n,o),l[n].push(o,f),l[o].push(f,n)},u.opposite=function(f,n){for(var o=this.stars[n],l=1,h=o.length;l<h;l+=2)if(o[l]===f)return o[l-1];return-1},u.flip=function(f,n){var o=this.opposite(f,n),l=this.opposite(n,f);this.removeTriangle(f,n,o),this.removeTriangle(n,f,l),this.addTriangle(f,l,o),this.addTriangle(n,o,l)},u.edges=function(){for(var f=this.stars,n=[],o=0,l=f.length;o<l;++o)for(var h=f[o],i=0,s=h.length;i<s;i+=2)n.push([h[i],h[i+1]]);return n},u.cells=function(){for(var f=this.stars,n=[],o=0,l=f.length;o<l;++o)for(var h=f[o],i=0,s=h.length;i<s;i+=2){var p=h[i],d=h[i+1];o<Math.min(p,d)&&n.push([o,p,d])}return n};function t(f,n){for(var o=new Array(f),l=0;l<f;++l)o[l]=[];return new a(o,n)}},{"binary-search-bounds":96}],117:[function(e,v,S){v.exports=r;function r(a){for(var u=1,c=1;c<a.length;++c)for(var t=0;t<c;++t)if(a[c]<a[t])u=-u;else if(a[t]===a[c])return 0;return u}},{}],118:[function(e,v,S){var r=e("dup"),a=e("robust-linear-solve");function u(f,n){for(var o=0,l=f.length,h=0;h<l;++h)o+=f[h]*n[h];return o}function c(f){var n=f.length;if(n===0)return[];f[0].length;var o=r([f.length+1,f.length+1],1),l=r([f.length+1],1);o[n][n]=0;for(var h=0;h<n;++h){for(var i=0;i<=h;++i)o[i][h]=o[h][i]=2*u(f[h],f[i]);l[h]=u(f[h],f[h])}for(var s=a(o,l),p=0,d=s[n+1],h=0;h<d.length;++h)p+=d[h];for(var g=new Array(n),h=0;h<n;++h){for(var d=s[h],b=0,i=0;i<d.length;++i)b+=d[i];g[h]=b/p}return g}function t(f){if(f.length===0)return[];for(var n=f[0].length,o=r([n]),l=c(f),h=0;h<f.length;++h)for(var i=0;i<n;++i)o[i]+=f[h][i]*l[h];return o}t.barycenetric=c,v.exports=t},{dup:176,"robust-linear-solve":547}],119:[function(e,v,S){v.exports=a;var r=e("circumcenter");function a(u){for(var c=r(u),t=0,f=0;f<u.length;++f)for(var n=u[f],o=0;o<c.length;++o)t+=Math.pow(n[o]-c[o],2);return Math.sqrt(t/u.length)}},{circumcenter:118}],120:[function(e,v,S){v.exports=r;function r(a,u,c){return u<c?a<u?u:a>c?c:a:a<c?c:a>u?u:a}},{}],121:[function(e,v,S){v.exports=M;var r=e("union-find"),a=e("box-intersect"),u=e("robust-segment-intersect"),c=e("big-rat"),t=e("big-rat/cmp"),f=e("big-rat/to-float"),n=e("rat-vec"),o=e("nextafter"),l=e("./lib/rat-seg-intersect");function h(P){var L=f(P);return[o(L,-1/0),o(L,1/0)]}function i(P,L){for(var I=new Array(L.length),E=0;E<L.length;++E){var k=L[E],C=P[k[0]],D=P[k[1]];I[E]=[o(Math.min(C[0],D[0]),-1/0),o(Math.min(C[1],D[1]),-1/0),o(Math.max(C[0],D[0]),1/0),o(Math.max(C[1],D[1]),1/0)]}return I}function s(P){for(var L=new Array(P.length),I=0;I<P.length;++I){var E=P[I];L[I]=[o(E[0],-1/0),o(E[1],-1/0),o(E[0],1/0),o(E[1],1/0)]}return L}function p(P,L,I){var E=[];return a(I,function(k,C){var D=L[k],F=L[C];if(!(D[0]===F[0]||D[0]===F[1]||D[1]===F[0]||D[1]===F[1])){var N=P[D[0]],G=P[D[1]],U=P[F[0]],X=P[F[1]];u(N,G,U,X)&&E.push([k,C])}}),E}function d(P,L,I,E){var k=[];return a(I,E,function(C,D){var F=L[C];if(!(F[0]===D||F[1]===D)){var N=P[D],G=P[F[0]],U=P[F[1]];u(G,U,N,N)&&k.push([C,D])}}),k}function g(P,L,I,E,k){var C,D,F=P.map(function(re){return[c(re[0]),c(re[1])]});for(C=0;C<I.length;++C){var N=I[C];D=N[0];var G=N[1],U=L[D],X=L[G],z=l(n(P[U[0]]),n(P[U[1]]),n(P[X[0]]),n(P[X[1]]));if(!!z){var B=P.length;P.push([f(z[0]),f(z[1])]),F.push(z),E.push([D,B],[G,B])}}for(E.sort(function(re,ee){if(re[0]!==ee[0])return re[0]-ee[0];var ae=F[re[1]],fe=F[ee[1]];return t(ae[0],fe[0])||t(ae[1],fe[1])}),C=E.length-1;C>=0;--C){var j=E[C];D=j[0];var V=L[D],K=V[0],te=V[1],$=P[K],ie=P[te];if(($[0]-ie[0]||$[1]-ie[1])<0){var se=K;K=te,te=se}V[0]=K;var Q=V[1]=j[1],H;for(k&&(H=V[2]);C>0&&E[C-1][0]===D;){var j=E[--C],oe=j[1];k?L.push([Q,oe,H]):L.push([Q,oe]),Q=oe}k?L.push([Q,te,H]):L.push([Q,te])}return F}function b(P,L,I){for(var E=L.length,k=new r(E),C=[],D=0;D<L.length;++D){var F=L[D],N=h(F[0]),G=h(F[1]);C.push([o(N[0],-1/0),o(G[0],-1/0),o(N[1],1/0),o(G[1],1/0)])}a(C,function(j,V){k.link(j,V)});for(var U=!0,X=new Array(E),D=0;D<E;++D){var z=k.find(D);z!==D&&(U=!1,P[z]=[Math.min(P[D][0],P[z][0]),Math.min(P[D][1],P[z][1])])}if(U)return null;for(var B=0,D=0;D<E;++D){var z=k.find(D);z===D?(X[D]=B,P[B++]=P[D]):X[D]=-1}P.length=B;for(var D=0;D<E;++D)X[D]<0&&(X[D]=X[k.find(D)]);return X}function m(P,L){return P[0]-L[0]||P[1]-L[1]}function x(P,L){var I=P[0]-L[0]||P[1]-L[1];return I||(P[2]<L[2]?-1:P[2]>L[2]?1:0)}function w(P,L,I){if(P.length!==0){if(L)for(var E=0;E<P.length;++E){var k=P[E],C=L[k[0]],D=L[k[1]];k[0]=Math.min(C,D),k[1]=Math.max(C,D)}else for(var E=0;E<P.length;++E){var k=P[E],C=k[0],D=k[1];k[0]=Math.min(C,D),k[1]=Math.max(C,D)}I?P.sort(x):P.sort(m);for(var F=1,E=1;E<P.length;++E){var N=P[E-1],G=P[E];G[0]===N[0]&&G[1]===N[1]&&(!I||G[2]===N[2])||(P[F++]=G)}P.length=F}}function y(P,L,I){var E=b(P,[],s(P));return w(L,E,I),!!E}function T(P,L,I){var E=i(P,L),k=p(P,L,E),C=s(P),D=d(P,L,E,C),F=g(P,L,k,D,I),N=b(P,F);return w(L,N,I),N?!0:k.length>0||D.length>0}function M(P,L,I){var E;if(I){E=L;for(var k=new Array(L.length),C=0;C<L.length;++C){var D=L[C];k[C]=[D[0],D[1],I[C]]}L=k}for(var F=y(P,L,!!I);T(P,L,!!I);)F=!0;if(!!I&&F){E.length=0,I.length=0;for(var C=0;C<L.length;++C){var D=L[C];E.push([D[0],D[1]]),I.push(D[2])}}return F}},{"./lib/rat-seg-intersect":122,"big-rat":83,"big-rat/cmp":81,"big-rat/to-float":95,"box-intersect":101,nextafter:496,"rat-vec":530,"robust-segment-intersect":551,"union-find":596}],122:[function(e,v,S){v.exports=l;var r=e("big-rat/mul"),a=e("big-rat/div"),u=e("big-rat/sub"),c=e("big-rat/sign"),t=e("rat-vec/sub"),f=e("rat-vec/add"),n=e("rat-vec/muls");function o(h,i){return u(r(h[0],i[1]),r(h[1],i[0]))}function l(h,i,s,p){var d=t(i,h),g=t(p,s),b=o(d,g);if(c(b)===0)return null;var m=t(h,s),x=o(g,m),w=a(x,b),y=n(d,w),T=f(h,y);return T}},{"big-rat/div":82,"big-rat/mul":92,"big-rat/sign":93,"big-rat/sub":94,"rat-vec/add":529,"rat-vec/muls":531,"rat-vec/sub":532}],123:[function(e,v,S){var r=e("clamp");v.exports=a,v.exports.to=a,v.exports.from=u;function a(c,t){t==null&&(t=!0);var f=c[0],n=c[1],o=c[2],l=c[3];l==null&&(l=t?1:255),t&&(f*=255,n*=255,o*=255,l*=255),f=r(f,0,255)&255,n=r(n,0,255)&255,o=r(o,0,255)&255,l=r(l,0,255)&255;var h=f*16777216+(n<<16)+(o<<8)+l;return h}function u(c,t){c=+c;var f=c>>>24,n=(c&16711680)>>>16,o=(c&65280)>>>8,l=c&255;return t===!1?[f,n,o,l]:[f/255,n/255,o/255,l/255]}},{clamp:120}],124:[function(e,v,S){v.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],125:[function(e,v,S){var r=e("color-rgba"),a=e("clamp"),u=e("dtype");v.exports=function(f,n){(n==="float"||!n)&&(n="array"),n==="uint"&&(n="uint8"),n==="uint_clamped"&&(n="uint8_clamped");var o=u(n),l=new o(4),h=n!=="uint8"&&n!=="uint8_clamped";return(!f.length||typeof f=="string")&&(f=r(f),f[0]/=255,f[1]/=255,f[2]/=255),c(f)?(l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3]!=null?f[3]:255,h&&(l[0]/=255,l[1]/=255,l[2]/=255,l[3]/=255),l):(h?(l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3]!=null?f[3]:1):(l[0]=a(Math.floor(f[0]*255),0,255),l[1]=a(Math.floor(f[1]*255),0,255),l[2]=a(Math.floor(f[2]*255),0,255),l[3]=f[3]==null?255:a(Math.floor(f[3]*255),0,255)),l)};function c(t){return!!(t instanceof Uint8Array||t instanceof Uint8ClampedArray||Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}},{clamp:120,"color-rgba":127,dtype:175}],126:[function(e,v,S){(function(r){(function(){var a=e("color-name"),u=e("is-plain-obj"),c=e("defined");v.exports=f;var t={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function f(n){var o,l=[],h=1,i;if(typeof n=="string")if(a[n])l=a[n].slice(),i="rgb";else if(n==="transparent")h=0,i="rgb",l=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var s=n.slice(1),p=s.length,d=p<=4;h=1,d?(l=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],p===4&&(h=parseInt(s[3]+s[3],16)/255)):(l=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],p===8&&(h=parseInt(s[6]+s[7],16)/255)),l[0]||(l[0]=0),l[1]||(l[1]=0),l[2]||(l[2]=0),i="rgb"}else if(o=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var g=o[1],b=g==="rgb",s=g.replace(/a$/,"");i=s;var p=s==="cmyk"?4:s==="gray"?1:3;l=o[2].trim().split(/\s*,\s*/).map(function(y,T){if(/%$/.test(y))return T===p?parseFloat(y)/100:s==="rgb"?parseFloat(y)*255/100:parseFloat(y);if(s[T]==="h"){if(/deg$/.test(y))return parseFloat(y);if(t[y]!==void 0)return t[y]}return parseFloat(y)}),g===s&&l.push(1),h=b||l[p]===void 0?1:l[p],l=l.slice(0,p)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(l=n.match(/([0-9]+)/g).map(function(x){return parseFloat(x)}),i=n.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(n))i="rgb",l=[n>>>16,(n&65280)>>>8,n&255];else if(u(n)){var m=c(n.r,n.red,n.R,null);m!==null?(i="rgb",l=[m,c(n.g,n.green,n.G),c(n.b,n.blue,n.B)]):(i="hsl",l=[c(n.h,n.hue,n.H),c(n.s,n.saturation,n.S),c(n.l,n.lightness,n.L,n.b,n.brightness)]),h=c(n.a,n.alpha,n.opacity,1),n.opacity!=null&&(h/=100)}else(Array.isArray(n)||r.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(n))&&(l=[n[0],n[1],n[2]],i="rgb",h=n.length===4?n[3]:1);return{space:i,values:l,alpha:h}}}).call(this)}).call(this,typeof Hs<"u"?Hs:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":124,defined:170,"is-plain-obj":469}],127:[function(e,v,S){var r=e("color-parse"),a=e("color-space/hsl"),u=e("clamp");v.exports=function(t){var f,n=r(t);return n.space?(f=Array(3),f[0]=u(n.values[0],0,255),f[1]=u(n.values[1],0,255),f[2]=u(n.values[2],0,255),n.space[0]==="h"&&(f=a.rgb(f)),f.push(u(n.alpha,0,1)),f):[]}},{clamp:120,"color-parse":126,"color-space/hsl":128}],128:[function(e,v,S){var r=e("./rgb");v.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(a){var u=a[0]/360,c=a[1]/100,t=a[2]/100,f,n,o,l,h;if(c===0)return h=t*255,[h,h,h];t<.5?n=t*(1+c):n=t+c-t*c,f=2*t-n,l=[0,0,0];for(var i=0;i<3;i++)o=u+1/3*-(i-1),o<0?o++:o>1&&o--,6*o<1?h=f+(n-f)*6*o:2*o<1?h=n:3*o<2?h=f+(n-f)*(2/3-o)*6:h=f,l[i]=h*255;return l}},r.hsl=function(a){var u=a[0]/255,c=a[1]/255,t=a[2]/255,f=Math.min(u,c,t),n=Math.max(u,c,t),o=n-f,l,h,i;return n===f?l=0:u===n?l=(c-t)/o:c===n?l=2+(t-u)/o:t===n&&(l=4+(u-c)/o),l=Math.min(l*60,360),l<0&&(l+=360),i=(f+n)/2,n===f?h=0:i<=.5?h=o/(n+f):h=o/(2-n-f),[l,h*100,i*100]}},{"./rgb":129}],129:[function(e,v,S){v.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],130:[function(e,v,S){v.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],131:[function(e,v,S){var r=e("./colorScale"),a=e("lerp");v.exports=u;function u(n){var o,l,h,i,s,p,d,g,w,b,m;if(n||(n={}),g=(n.nshades||72)-1,d=n.format||"hex",p=n.colormap,p||(p="jet"),typeof p=="string"){if(p=p.toLowerCase(),!r[p])throw Error(p+" not a supported colorscale");s=r[p]}else if(Array.isArray(p))s=p.slice();else throw Error("unsupported colormap option",p);if(s.length>g+1)throw new Error(p+" map requires nshades to be at least size "+s.length);Array.isArray(n.alpha)?n.alpha.length!==2?b=[1,1]:b=n.alpha.slice():typeof n.alpha=="number"?b=[n.alpha,n.alpha]:b=[1,1],o=s.map(function(M){return Math.round(M.index*g)}),b[0]=Math.min(Math.max(b[0],0),1),b[1]=Math.min(Math.max(b[1],0),1);var x=s.map(function(M,P){var L=s[P].index,I=s[P].rgb.slice();return I.length===4&&I[3]>=0&&I[3]<=1||(I[3]=b[0]+(b[1]-b[0])*L),I}),w=[];for(m=0;m<o.length-1;++m){i=o[m+1]-o[m],l=x[m],h=x[m+1];for(var y=0;y<i;y++){var T=y/i;w.push([Math.round(a(l[0],h[0],T)),Math.round(a(l[1],h[1],T)),Math.round(a(l[2],h[2],T)),a(l[3],h[3],T)])}}return w.push(s[s.length-1].rgb.concat(b[1])),d==="hex"?w=w.map(t):d==="rgbaString"?w=w.map(f):d==="float"&&(w=w.map(c)),w}function c(n){return[n[0]/255,n[1]/255,n[2]/255,n[3]]}function t(n){for(var o,l="#",h=0;h<3;++h)o=n[h],o=o.toString(16),l+=("00"+o).substr(o.length);return l}function f(n){return"rgba("+n.join(",")+")"}},{"./colorScale":130,lerp:472}],132:[function(e,v,S){v.exports=n;var r=e("robust-orientation"),a=e("signum"),u=e("two-sum"),c=e("robust-product"),t=e("robust-sum");function f(o,l,h){var i=u(o[0],-l[0]),s=u(o[1],-l[1]),p=u(h[0],-l[0]),d=u(h[1],-l[1]),g=t(c(i,p),c(s,d));return g[g.length-1]>=0}function n(o,l,h,i){var s=r(l,h,i);if(s===0){var p=a(r(o,l,h)),d=a(r(o,l,i));if(p===d){if(p===0){var g=f(o,l,h),b=f(o,l,i);return g===b?0:g?1:-1}return 0}else{if(d===0)return p>0||f(o,l,i)?-1:1;if(p===0)return d>0||f(o,l,h)?1:-1}return a(d-p)}var m=r(o,l,h);if(m>0)return s>0&&r(o,l,i)>0?1:-1;if(m<0)return s>0||r(o,l,i)>0?1:-1;var x=r(o,l,i);return x>0||f(o,l,h)?1:-1}},{"robust-orientation":548,"robust-product":549,"robust-sum":553,signum:554,"two-sum":583}],133:[function(e,v,S){v.exports=u;var r=Math.min;function a(c,t){return c-t}function u(c,t){var f=c.length,n=c.length-t.length;if(n)return n;switch(f){case 0:return 0;case 1:return c[0]-t[0];case 2:return c[0]+c[1]-t[0]-t[1]||r(c[0],c[1])-r(t[0],t[1]);case 3:var o=c[0]+c[1],l=t[0]+t[1];if(n=o+c[2]-(l+t[2]),n)return n;var h=r(c[0],c[1]),i=r(t[0],t[1]);return r(h,c[2])-r(i,t[2])||r(h+c[2],o)-r(i+t[2],l);case 4:var s=c[0],p=c[1],d=c[2],g=c[3],b=t[0],m=t[1],x=t[2],w=t[3];return s+p+d+g-(b+m+x+w)||r(s,p,d,g)-r(b,m,x,w,b)||r(s+p,s+d,s+g,p+d,p+g,d+g)-r(b+m,b+x,b+w,m+x,m+w,x+w)||r(s+p+d,s+p+g,s+d+g,p+d+g)-r(b+m+x,b+m+w,b+x+w,m+x+w);default:for(var y=c.slice().sort(a),T=t.slice().sort(a),M=0;M<f;++M)if(n=y[M]-T[M],n)return n;return 0}}},{}],134:[function(e,v,S){var r=e("compare-cell"),a=e("cell-orientation");v.exports=u;function u(c,t){return r(c,t)||a(c)-a(t)}},{"cell-orientation":117,"compare-cell":133}],135:[function(e,v,S){var r=e("./lib/ch1d"),a=e("./lib/ch2d"),u=e("./lib/chnd");v.exports=c;function c(t){var f=t.length;if(f===0)return[];if(f===1)return[[0]];var n=t[0].length;return n===0?[]:n===1?r(t):n===2?a(t):u(t,n)}},{"./lib/ch1d":136,"./lib/ch2d":137,"./lib/chnd":138}],136:[function(e,v,S){v.exports=r;function r(a){for(var u=0,c=0,t=1;t<a.length;++t)a[t][0]<a[u][0]&&(u=t),a[t][0]>a[c][0]&&(c=t);return u<c?[[u],[c]]:u>c?[[c],[u]]:[[u]]}},{}],137:[function(e,v,S){v.exports=a;var r=e("monotone-convex-hull-2d");function a(u){var c=r(u),t=c.length;if(t<=2)return[];for(var f=new Array(t),n=c[t-1],o=0;o<t;++o){var l=c[o];f[o]=[n,l],n=l}return f}},{"monotone-convex-hull-2d":482}],138:[function(e,v,S){v.exports=t;var r=e("incremental-convex-hull"),a=e("affine-hull");function u(f,n){for(var o=f.length,l=new Array(o),h=0;h<n.length;++h)l[h]=f[n[h]];for(var i=n.length,h=0;h<o;++h)n.indexOf(h)<0&&(l[i++]=f[h]);return l}function c(f,n){for(var o=f.length,l=n.length,h=0;h<o;++h)for(var i=f[h],s=0;s<i.length;++s){var p=i[s];if(p<l)i[s]=n[p];else{p=p-l;for(var d=0;d<l;++d)p>=n[d]&&(p+=1);i[s]=p}}return f}function t(f,n){try{return r(f,!0)}catch{var o=a(f);if(o.length<=n)return[];var l=u(f,o),h=r(l,!0);return c(h,o)}}},{"affine-hull":67,"incremental-convex-hull":459}],139:[function(e,v,S){v.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],140:[function(e,v,S){v.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],141:[function(e,v,S){v.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],142:[function(e,v,S){v.exports=["normal","italic","oblique"]},{}],143:[function(e,v,S){v.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],144:[function(e,v,S){v.exports={parse:e("./parse"),stringify:e("./stringify")}},{"./parse":146,"./stringify":147}],145:[function(e,v,S){var r=e("css-font-size-keywords");v.exports={isSize:function(u){return/^[\d\.]/.test(u)||u.indexOf("/")!==-1||r.indexOf(u)!==-1}}},{"css-font-size-keywords":140}],146:[function(e,v,S){var r=e("unquote"),a=e("css-global-keywords"),u=e("css-system-font-keywords"),c=e("css-font-weight-keywords"),t=e("css-font-style-keywords"),f=e("css-font-stretch-keywords"),n=e("string-split-by"),o=e("./lib/util").isSize;v.exports=h;var l=h.cache={};function h(s){if(typeof s!="string")throw new Error("Font argument must be a string.");if(l[s])return l[s];if(s==="")throw new Error("Cannot parse an empty string.");if(u.indexOf(s)!==-1)return l[s]={system:s};for(var p={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=n(s,/\s+/),g;g=d.shift();){if(a.indexOf(g)!==-1)return["style","variant","weight","stretch"].forEach(function(m){p[m]=g}),l[s]=p;if(t.indexOf(g)!==-1){p.style=g;continue}if(g==="normal"||g==="small-caps"){p.variant=g;continue}if(f.indexOf(g)!==-1){p.stretch=g;continue}if(c.indexOf(g)!==-1){p.weight=g;continue}if(o(g)){var b=n(g,"/");if(p.size=b[0],b[1]!=null?p.lineHeight=i(b[1]):d[0]==="/"&&(d.shift(),p.lineHeight=i(d.shift())),!d.length)throw new Error("Missing required font-family.");return p.family=n(d.join(" "),/\s*,\s*/).map(r),l[s]=p}throw new Error("Unknown or unsupported font token: "+g)}throw new Error("Missing required font-size.")}function i(s){var p=parseFloat(s);return p.toString()===s?p:s}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,"string-split-by":568,unquote:598}],147:[function(e,v,S){var r=e("pick-by-alias"),a=e("./lib/util").isSize,u=s(e("css-global-keywords")),c=s(e("css-system-font-keywords")),t=s(e("css-font-weight-keywords")),f=s(e("css-font-style-keywords")),n=s(e("css-font-stretch-keywords")),o={normal:1,"small-caps":1},l={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},h={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};v.exports=function(d){if(d=r(d,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),d.system)return d.system&&i(d.system,c),d.system;if(i(d.style,f),i(d.variant,o),i(d.weight,t),i(d.stretch,n),d.size==null&&(d.size=h.size),typeof d.size=="number"&&(d.size+="px"),!a)throw Error("Bad size value `"+d.size+"`");d.family||(d.family=h.family),Array.isArray(d.family)&&(d.family.length||(d.family=[h.family]),d.family=d.family.map(function(b){return l[b]?b:'"'+b+'"'}).join(", "));var g=[];return g.push(d.style),d.variant!==d.style&&g.push(d.variant),d.weight!==d.variant&&d.weight!==d.style&&g.push(d.weight),d.stretch!==d.weight&&d.stretch!==d.variant&&d.stretch!==d.style&&g.push(d.stretch),g.push(d.size+(d.lineHeight==null||d.lineHeight==="normal"||d.lineHeight+""=="1"?"":"/"+d.lineHeight)),g.push(d.family),g.filter(Boolean).join(" ")};function i(p,d){if(p&&!d[p]&&!u[p])throw Error("Unknown keyword `"+p+"`");return p}function s(p){for(var d={},g=0;g<p.length;g++)d[p[g]]=1;return d}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,"pick-by-alias":511}],148:[function(e,v,S){v.exports=["inherit","initial","unset"]},{}],149:[function(e,v,S){v.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],150:[function(e,v,S){function r(u,c,t,f,n,o){var l=6*n*n-6*n,h=3*n*n-4*n+1,i=-6*n*n+6*n,s=3*n*n-2*n;if(u.length){o||(o=new Array(u.length));for(var p=u.length-1;p>=0;--p)o[p]=l*u[p]+h*c[p]+i*t[p]+s*f[p];return o}return l*u+h*c+i*t[p]+s*f}function a(u,c,t,f,n,o){var l=n-1,h=n*n,i=l*l,s=(1+2*n)*i,p=n*i,d=h*(3-2*n),g=h*l;if(u.length){o||(o=new Array(u.length));for(var b=u.length-1;b>=0;--b)o[b]=s*u[b]+p*c[b]+d*t[b]+g*f[b];return o}return s*u+p*c+d*t+g*f}v.exports=a,v.exports.derivative=r},{}],151:[function(e,v,S){var r=e("./lib/thunk.js");function a(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function u(c){var t=new a;t.pre=c.pre,t.body=c.body,t.post=c.post;var f=c.args.slice(0);t.argTypes=f;for(var n=0;n<f.length;++n){var o=f[n];if(o==="array"||typeof o=="object"&&o.blockIndices){if(t.argTypes[n]="array",t.arrayArgs.push(n),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+n),n<t.pre.args.length&&t.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<t.post.args.length&&t.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(o==="scalar")t.scalarArgs.push(n),t.shimArgs.push("scalar"+n);else if(o==="index"){if(t.indexArgs.push(n),n<t.pre.args.length&&t.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<t.post.args.length&&t.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(o==="shape"){if(t.shapeArgs.push(n),n<t.pre.args.length&&t.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<t.post.args.length&&t.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof o=="object"&&o.offset)t.argTypes[n]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+f[n])}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>f.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>f.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>f.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!c.printCode||!!c.debug,t.funcName=c.funcName||"cwise",t.blockSize=c.blockSize||64,r(t)}v.exports=u},{"./lib/thunk.js":153}],152:[function(e,v,S){var r=e("uniq");function a(o,l,h){var i=o.length,s=l.arrayArgs.length,p=l.indexArgs.length>0,d=[],g=[],b=0,m=0,x,w;for(x=0;x<i;++x)g.push(["i",x,"=0"].join(""));for(w=0;w<s;++w)for(x=0;x<i;++x)m=b,b=o[x],x===0?g.push(["d",w,"s",x,"=t",w,"p",b].join("")):g.push(["d",w,"s",x,"=(t",w,"p",b,"-s",m,"*t",w,"p",m,")"].join(""));for(g.length>0&&d.push("var "+g.join(",")),x=i-1;x>=0;--x)b=o[x],d.push(["for(i",x,"=0;i",x,"<s",b,";++i",x,"){"].join(""));for(d.push(h),x=0;x<i;++x){for(m=b,b=o[x],w=0;w<s;++w)d.push(["p",w,"+=d",w,"s",x].join(""));p&&(x>0&&d.push(["index[",m,"]-=s",m].join("")),d.push(["++index[",b,"]"].join(""))),d.push("}")}return d.join(`
`)}function u(o,l,h,i){for(var s=l.length,p=h.arrayArgs.length,d=h.blockSize,g=h.indexArgs.length>0,b=[],m=0;m<p;++m)b.push(["var offset",m,"=p",m].join(""));for(var m=o;m<s;++m)b.push(["for(var j"+m+"=SS[",l[m],"]|0;j",m,">0;){"].join("")),b.push(["if(j",m,"<",d,"){"].join("")),b.push(["s",l[m],"=j",m].join("")),b.push(["j",m,"=0"].join("")),b.push(["}else{s",l[m],"=",d].join("")),b.push(["j",m,"-=",d,"}"].join("")),g&&b.push(["index[",l[m],"]=j",m].join(""));for(var m=0;m<p;++m){for(var x=["offset"+m],w=o;w<s;++w)x.push(["j",w,"*t",m,"p",l[w]].join(""));b.push(["p",m,"=(",x.join("+"),")"].join(""))}b.push(a(l,h,i));for(var m=o;m<s;++m)b.push("}");return b.join(`
`)}function c(o){for(var l=0,h=o[0].length;l<h;){for(var i=1;i<o.length;++i)if(o[i][l]!==o[0][l])return l;++l}return l}function t(o,l,h){for(var i=o.body,s=[],p=[],d=0;d<o.args.length;++d){var g=o.args[d];if(!(g.count<=0)){var b=new RegExp(g.name,"g"),m="",x=l.arrayArgs.indexOf(d);switch(l.argTypes[d]){case"offset":var w=l.offsetArgIndex.indexOf(d),y=l.offsetArgs[w];x=y.array,m="+q"+w;case"array":m="p"+x+m;var T="l"+d,M="a"+x;if(l.arrayBlockIndices[x]===0)g.count===1?h[x]==="generic"?g.lvalue?(s.push(["var ",T,"=",M,".get(",m,")"].join("")),i=i.replace(b,T),p.push([M,".set(",m,",",T,")"].join(""))):i=i.replace(b,[M,".get(",m,")"].join("")):i=i.replace(b,[M,"[",m,"]"].join("")):h[x]==="generic"?(s.push(["var ",T,"=",M,".get(",m,")"].join("")),i=i.replace(b,T),g.lvalue&&p.push([M,".set(",m,",",T,")"].join(""))):(s.push(["var ",T,"=",M,"[",m,"]"].join("")),i=i.replace(b,T),g.lvalue&&p.push([M,"[",m,"]=",T].join("")));else{for(var P=[g.name],L=[m],I=0;I<Math.abs(l.arrayBlockIndices[x]);I++)P.push("\\s*\\[([^\\]]+)\\]"),L.push("$"+(I+1)+"*t"+x+"b"+I);if(b=new RegExp(P.join(""),"g"),m=L.join("+"),h[x]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");i=i.replace(b,[M,"[",m,"]"].join(""))}break;case"scalar":i=i.replace(b,"Y"+l.scalarArgs.indexOf(d));break;case"index":i=i.replace(b,"index");break;case"shape":i=i.replace(b,"shape");break}}}return[s.join(`
`),i,p.join(`
`)].join(`
`).trim()}function f(o){for(var l=new Array(o.length),h=!0,i=0;i<o.length;++i){var s=o[i],p=s.match(/\d+/);p?p=p[0]:p="",s.charAt(0)===0?l[i]="u"+s.charAt(1)+p:l[i]=s.charAt(0)+p,i>0&&(h=h&&l[i]===l[i-1])}return h?l[0]:l.join("")}function n(o,l){for(var h=l[1].length-Math.abs(o.arrayBlockIndices[0])|0,i=new Array(o.arrayArgs.length),s=new Array(o.arrayArgs.length),p=0;p<o.arrayArgs.length;++p)s[p]=l[2*p],i[p]=l[2*p+1];for(var d=[],g=[],b=[],m=[],x=[],p=0;p<o.arrayArgs.length;++p){o.arrayBlockIndices[p]<0?(b.push(0),m.push(h),d.push(h),g.push(h+o.arrayBlockIndices[p])):(b.push(o.arrayBlockIndices[p]),m.push(o.arrayBlockIndices[p]+h),d.push(0),g.push(o.arrayBlockIndices[p]));for(var w=[],y=0;y<i[p].length;y++)b[p]<=i[p][y]&&i[p][y]<m[p]&&w.push(i[p][y]-b[p]);x.push(w)}for(var T=["SS"],M=["'use strict'"],P=[],y=0;y<h;++y)P.push(["s",y,"=SS[",y,"]"].join(""));for(var p=0;p<o.arrayArgs.length;++p){T.push("a"+p),T.push("t"+p),T.push("p"+p);for(var y=0;y<h;++y)P.push(["t",p,"p",y,"=t",p,"[",b[p]+y,"]"].join(""));for(var y=0;y<Math.abs(o.arrayBlockIndices[p]);++y)P.push(["t",p,"b",y,"=t",p,"[",d[p]+y,"]"].join(""))}for(var p=0;p<o.scalarArgs.length;++p)T.push("Y"+p);if(o.shapeArgs.length>0&&P.push("shape=SS.slice(0)"),o.indexArgs.length>0){for(var L=new Array(h),p=0;p<h;++p)L[p]="0";P.push(["index=[",L.join(","),"]"].join(""))}for(var p=0;p<o.offsetArgs.length;++p){for(var I=o.offsetArgs[p],E=[],y=0;y<I.offset.length;++y)I.offset[y]!==0&&(I.offset[y]===1?E.push(["t",I.array,"p",y].join("")):E.push([I.offset[y],"*t",I.array,"p",y].join("")));E.length===0?P.push("q"+p+"=0"):P.push(["q",p,"=",E.join("+")].join(""))}var k=r([].concat(o.pre.thisVars).concat(o.body.thisVars).concat(o.post.thisVars));P=P.concat(k),P.length>0&&M.push("var "+P.join(","));for(var p=0;p<o.arrayArgs.length;++p)M.push("p"+p+"|=0");o.pre.body.length>3&&M.push(t(o.pre,o,s));var C=t(o.body,o,s),D=c(x);D<h?M.push(u(D,x[0],o,C)):M.push(a(x[0],o,C)),o.post.body.length>3&&M.push(t(o.post,o,s)),o.debug&&console.log("-----Generated cwise routine for ",l,`:
`+M.join(`
`)+`
----------`);var F=[o.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",D,f(s)].join(""),N=new Function(["function ",F,"(",T.join(","),"){",M.join(`
`),"} return ",F].join(""));return N()}v.exports=n},{uniq:597}],153:[function(e,v,S){var r=e("./compile.js");function a(u){var c=["'use strict'","var CACHED={}"],t=[],f=u.funcName+"_cwise_thunk";c.push(["return function ",f,"(",u.shimArgs.join(","),"){"].join(""));for(var n=[],o=[],l=[["array",u.arrayArgs[0],".shape.slice(",Math.max(0,u.arrayBlockIndices[0]),u.arrayBlockIndices[0]<0?","+u.arrayBlockIndices[0]+")":")"].join("")],h=[],i=[],s=0;s<u.arrayArgs.length;++s){var p=u.arrayArgs[s];t.push(["t",p,"=array",p,".dtype,","r",p,"=array",p,".order"].join("")),n.push("t"+p),n.push("r"+p),o.push("t"+p),o.push("r"+p+".join()"),l.push("array"+p+".data"),l.push("array"+p+".stride"),l.push("array"+p+".offset|0"),s>0&&(h.push("array"+u.arrayArgs[0]+".shape.length===array"+p+".shape.length+"+(Math.abs(u.arrayBlockIndices[0])-Math.abs(u.arrayBlockIndices[s]))),i.push("array"+u.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,u.arrayBlockIndices[0])+"]===array"+p+".shape[shapeIndex+"+Math.max(0,u.arrayBlockIndices[s])+"]"))}u.arrayArgs.length>1&&(c.push("if (!("+h.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),c.push("for(var shapeIndex=array"+u.arrayArgs[0]+".shape.length-"+Math.abs(u.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),c.push("if (!("+i.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),c.push("}"));for(var s=0;s<u.scalarArgs.length;++s)l.push("scalar"+u.scalarArgs[s]);t.push(["type=[",o.join(","),"].join()"].join("")),t.push("proc=CACHED[type]"),c.push("var "+t.join(",")),c.push(["if(!proc){","CACHED[type]=proc=compile([",n.join(","),"])}","return proc(",l.join(","),")}"].join("")),u.debug&&console.log(`-----Generated thunk:
`+c.join(`
`)+`
----------`);var d=new Function("compile",c.join(`
`));return d(r.bind(void 0,u))}v.exports=a},{"./compile.js":152}],154:[function(e,v,S){var r=e("type/value/is"),a=e("type/value/ensure"),u=e("type/plain-function/ensure"),c=e("es5-ext/object/copy"),t=e("es5-ext/object/normalize-options"),f=e("es5-ext/object/map"),n=Function.prototype.bind,o=Object.defineProperty,l=Object.prototype.hasOwnProperty,h;h=function(i,s,p){var d=a(s)&&u(s.value),g;return g=c(s),delete g.writable,delete g.value,g.get=function(){return!p.overwriteDefinition&&l.call(this,i)?d:(s.value=n.call(d,p.resolveContext?p.resolveContext(this):this),o(this,i,s),this[i])},g},v.exports=function(i){var s=t(arguments[1]);return r(s.resolveContext)&&u(s.resolveContext),f(i,function(p,d){return h(d,p,s)})}},{"es5-ext/object/copy":196,"es5-ext/object/map":204,"es5-ext/object/normalize-options":205,"type/plain-function/ensure":589,"type/value/ensure":593,"type/value/is":594}],155:[function(e,v,S){var r=e("type/value/is"),a=e("type/plain-function/is"),u=e("es5-ext/object/assign"),c=e("es5-ext/object/normalize-options"),t=e("es5-ext/string/#/contains"),f=v.exports=function(n,o){var l,h,i,s,p;return arguments.length<2||typeof n!="string"?(s=o,o=n,n=null):s=arguments[2],r(n)?(l=t.call(n,"c"),h=t.call(n,"e"),i=t.call(n,"w")):(l=i=!0,h=!1),p={value:o,configurable:l,enumerable:h,writable:i},s?u(c(s),p):p};f.gs=function(n,o,l){var h,i,s,p;return typeof n!="string"?(s=l,l=o,o=n,n=null):s=arguments[3],r(o)?a(o)?r(l)?a(l)||(s=l,l=void 0):l=void 0:(s=o,o=l=void 0):o=void 0,r(n)?(h=t.call(n,"c"),i=t.call(n,"e")):(h=!0,i=!1),p={get:o,set:l,configurable:h,enumerable:i},s?u(c(s),p):p}},{"es5-ext/object/assign":193,"es5-ext/object/normalize-options":205,"es5-ext/string/#/contains":212,"type/plain-function/is":590,"type/value/is":594}],156:[function(e,v,S){(function(r,a){a(typeof S=="object"&&typeof v<"u"?S:r.d3=r.d3||{})})(this,function(r){function a(H,oe){return H<oe?-1:H>oe?1:H>=oe?0:NaN}function u(H){return H.length===1&&(H=c(H)),{left:function(oe,re,ee,ae){for(ee==null&&(ee=0),ae==null&&(ae=oe.length);ee<ae;){var fe=ee+ae>>>1;H(oe[fe],re)<0?ee=fe+1:ae=fe}return ee},right:function(oe,re,ee,ae){for(ee==null&&(ee=0),ae==null&&(ae=oe.length);ee<ae;){var fe=ee+ae>>>1;H(oe[fe],re)>0?ae=fe:ee=fe+1}return ee}}}function c(H){return function(oe,re){return a(H(oe),re)}}var t=u(a),f=t.right,n=t.left;function o(H,oe){oe==null&&(oe=l);for(var re=0,ee=H.length-1,ae=H[0],fe=new Array(ee<0?0:ee);re<ee;)fe[re]=oe(ae,ae=H[++re]);return fe}function l(H,oe){return[H,oe]}function h(H,oe,re){var ee=H.length,ae=oe.length,fe=new Array(ee*ae),de,pe,W,ue;for(re==null&&(re=l),de=W=0;de<ee;++de)for(ue=H[de],pe=0;pe<ae;++pe,++W)fe[W]=re(ue,oe[pe]);return fe}function i(H,oe){return oe<H?-1:oe>H?1:oe>=H?0:NaN}function s(H){return H===null?NaN:+H}function p(H,oe){var re=H.length,ee=0,ae=-1,fe=0,de,pe,W=0;if(oe==null)for(;++ae<re;)isNaN(de=s(H[ae]))||(pe=de-fe,fe+=pe/++ee,W+=pe*(de-fe));else for(;++ae<re;)isNaN(de=s(oe(H[ae],ae,H)))||(pe=de-fe,fe+=pe/++ee,W+=pe*(de-fe));if(ee>1)return W/(ee-1)}function d(H,oe){var re=p(H,oe);return re&&Math.sqrt(re)}function g(H,oe){var re=H.length,ee=-1,ae,fe,de;if(oe==null){for(;++ee<re;)if((ae=H[ee])!=null&&ae>=ae)for(fe=de=ae;++ee<re;)(ae=H[ee])!=null&&(fe>ae&&(fe=ae),de<ae&&(de=ae))}else for(;++ee<re;)if((ae=oe(H[ee],ee,H))!=null&&ae>=ae)for(fe=de=ae;++ee<re;)(ae=oe(H[ee],ee,H))!=null&&(fe>ae&&(fe=ae),de<ae&&(de=ae));return[fe,de]}var b=Array.prototype,m=b.slice,x=b.map;function w(H){return function(){return H}}function y(H){return H}function T(H,oe,re){H=+H,oe=+oe,re=(ae=arguments.length)<2?(oe=H,H=0,1):ae<3?1:+re;for(var ee=-1,ae=Math.max(0,Math.ceil((oe-H)/re))|0,fe=new Array(ae);++ee<ae;)fe[ee]=H+ee*re;return fe}var M=Math.sqrt(50),P=Math.sqrt(10),L=Math.sqrt(2);function I(H,oe,re){var ee,ae=-1,fe,de,pe;if(oe=+oe,H=+H,re=+re,H===oe&&re>0)return[H];if((ee=oe<H)&&(fe=H,H=oe,oe=fe),(pe=E(H,oe,re))===0||!isFinite(pe))return[];if(pe>0)for(H=Math.ceil(H/pe),oe=Math.floor(oe/pe),de=new Array(fe=Math.ceil(oe-H+1));++ae<fe;)de[ae]=(H+ae)*pe;else for(H=Math.floor(H*pe),oe=Math.ceil(oe*pe),de=new Array(fe=Math.ceil(H-oe+1));++ae<fe;)de[ae]=(H-ae)/pe;return ee&&de.reverse(),de}function E(H,oe,re){var ee=(oe-H)/Math.max(0,re),ae=Math.floor(Math.log(ee)/Math.LN10),fe=ee/Math.pow(10,ae);return ae>=0?(fe>=M?10:fe>=P?5:fe>=L?2:1)*Math.pow(10,ae):-Math.pow(10,-ae)/(fe>=M?10:fe>=P?5:fe>=L?2:1)}function k(H,oe,re){var ee=Math.abs(oe-H)/Math.max(0,re),ae=Math.pow(10,Math.floor(Math.log(ee)/Math.LN10)),fe=ee/ae;return fe>=M?ae*=10:fe>=P?ae*=5:fe>=L&&(ae*=2),oe<H?-ae:ae}function C(H){return Math.ceil(Math.log(H.length)/Math.LN2)+1}function D(){var H=y,oe=g,re=C;function ee(ae){var fe,de=ae.length,pe,W=new Array(de);for(fe=0;fe<de;++fe)W[fe]=H(ae[fe],fe,ae);var ue=oe(W),me=ue[0],be=ue[1],Me=re(W,me,be);Array.isArray(Me)||(Me=k(me,be,Me),Me=T(Math.ceil(me/Me)*Me,be,Me));for(var Pe=Me.length;Me[0]<=me;)Me.shift(),--Pe;for(;Me[Pe-1]>be;)Me.pop(),--Pe;var Ge=new Array(Pe+1),ze;for(fe=0;fe<=Pe;++fe)ze=Ge[fe]=[],ze.x0=fe>0?Me[fe-1]:me,ze.x1=fe<Pe?Me[fe]:be;for(fe=0;fe<de;++fe)pe=W[fe],me<=pe&&pe<=be&&Ge[f(Me,pe,0,Pe)].push(ae[fe]);return Ge}return ee.value=function(ae){return arguments.length?(H=typeof ae=="function"?ae:w(ae),ee):H},ee.domain=function(ae){return arguments.length?(oe=typeof ae=="function"?ae:w([ae[0],ae[1]]),ee):oe},ee.thresholds=function(ae){return arguments.length?(re=typeof ae=="function"?ae:Array.isArray(ae)?w(m.call(ae)):w(ae),ee):re},ee}function F(H,oe,re){if(re==null&&(re=s),!!(ee=H.length)){if((oe=+oe)<=0||ee<2)return+re(H[0],0,H);if(oe>=1)return+re(H[ee-1],ee-1,H);var ee,ae=(ee-1)*oe,fe=Math.floor(ae),de=+re(H[fe],fe,H),pe=+re(H[fe+1],fe+1,H);return de+(pe-de)*(ae-fe)}}function N(H,oe,re){return H=x.call(H,s).sort(a),Math.ceil((re-oe)/(2*(F(H,.75)-F(H,.25))*Math.pow(H.length,-1/3)))}function G(H,oe,re){return Math.ceil((re-oe)/(3.5*d(H)*Math.pow(H.length,-1/3)))}function U(H,oe){var re=H.length,ee=-1,ae,fe;if(oe==null){for(;++ee<re;)if((ae=H[ee])!=null&&ae>=ae)for(fe=ae;++ee<re;)(ae=H[ee])!=null&&ae>fe&&(fe=ae)}else for(;++ee<re;)if((ae=oe(H[ee],ee,H))!=null&&ae>=ae)for(fe=ae;++ee<re;)(ae=oe(H[ee],ee,H))!=null&&ae>fe&&(fe=ae);return fe}function X(H,oe){var re=H.length,ee=re,ae=-1,fe,de=0;if(oe==null)for(;++ae<re;)isNaN(fe=s(H[ae]))?--ee:de+=fe;else for(;++ae<re;)isNaN(fe=s(oe(H[ae],ae,H)))?--ee:de+=fe;if(ee)return de/ee}function z(H,oe){var re=H.length,ee=-1,ae,fe=[];if(oe==null)for(;++ee<re;)isNaN(ae=s(H[ee]))||fe.push(ae);else for(;++ee<re;)isNaN(ae=s(oe(H[ee],ee,H)))||fe.push(ae);return F(fe.sort(a),.5)}function B(H){for(var oe=H.length,re,ee=-1,ae=0,fe,de;++ee<oe;)ae+=H[ee].length;for(fe=new Array(ae);--oe>=0;)for(de=H[oe],re=de.length;--re>=0;)fe[--ae]=de[re];return fe}function j(H,oe){var re=H.length,ee=-1,ae,fe;if(oe==null){for(;++ee<re;)if((ae=H[ee])!=null&&ae>=ae)for(fe=ae;++ee<re;)(ae=H[ee])!=null&&fe>ae&&(fe=ae)}else for(;++ee<re;)if((ae=oe(H[ee],ee,H))!=null&&ae>=ae)for(fe=ae;++ee<re;)(ae=oe(H[ee],ee,H))!=null&&fe>ae&&(fe=ae);return fe}function V(H,oe){for(var re=oe.length,ee=new Array(re);re--;)ee[re]=H[oe[re]];return ee}function K(H,oe){if(!!(re=H.length)){var re,ee=0,ae=0,fe,de=H[ae];for(oe==null&&(oe=a);++ee<re;)(oe(fe=H[ee],de)<0||oe(de,de)!==0)&&(de=fe,ae=ee);if(oe(de,de)===0)return ae}}function te(H,oe,re){for(var ee=(re==null?H.length:re)-(oe=oe==null?0:+oe),ae,fe;ee;)fe=Math.random()*ee--|0,ae=H[ee+oe],H[ee+oe]=H[fe+oe],H[fe+oe]=ae;return H}function $(H,oe){var re=H.length,ee=-1,ae,fe=0;if(oe==null)for(;++ee<re;)(ae=+H[ee])&&(fe+=ae);else for(;++ee<re;)(ae=+oe(H[ee],ee,H))&&(fe+=ae);return fe}function ie(H){if(!(fe=H.length))return[];for(var oe=-1,re=j(H,se),ee=new Array(re);++oe<re;)for(var ae=-1,fe,de=ee[oe]=new Array(fe);++ae<fe;)de[ae]=H[ae][oe];return ee}function se(H){return H.length}function Q(){return ie(arguments)}r.bisect=f,r.bisectRight=f,r.bisectLeft=n,r.ascending=a,r.bisector=u,r.cross=h,r.descending=i,r.deviation=d,r.extent=g,r.histogram=D,r.thresholdFreedmanDiaconis=N,r.thresholdScott=G,r.thresholdSturges=C,r.max=U,r.mean=X,r.median=z,r.merge=B,r.min=j,r.pairs=o,r.permute=V,r.quantile=F,r.range=T,r.scan=K,r.shuffle=te,r.sum=$,r.ticks=I,r.tickIncrement=E,r.tickStep=k,r.transpose=ie,r.variance=p,r.zip=Q,Object.defineProperty(r,"__esModule",{value:!0})})},{}],157:[function(e,v,S){(function(r,a){a(typeof S=="object"&&typeof v<"u"?S:r.d3=r.d3||{})})(this,function(r){var a="$";function u(){}u.prototype=c.prototype={constructor:u,has:function(b){return a+b in this},get:function(b){return this[a+b]},set:function(b,m){return this[a+b]=m,this},remove:function(b){var m=a+b;return m in this&&delete this[m]},clear:function(){for(var b in this)b[0]===a&&delete this[b]},keys:function(){var b=[];for(var m in this)m[0]===a&&b.push(m.slice(1));return b},values:function(){var b=[];for(var m in this)m[0]===a&&b.push(this[m]);return b},entries:function(){var b=[];for(var m in this)m[0]===a&&b.push({key:m.slice(1),value:this[m]});return b},size:function(){var b=0;for(var m in this)m[0]===a&&++b;return b},empty:function(){for(var b in this)if(b[0]===a)return!1;return!0},each:function(b){for(var m in this)m[0]===a&&b(this[m],m.slice(1),this)}};function c(b,m){var x=new u;if(b instanceof u)b.each(function(P,L){x.set(L,P)});else if(Array.isArray(b)){var w=-1,y=b.length,T;if(m==null)for(;++w<y;)x.set(w,b[w]);else for(;++w<y;)x.set(m(T=b[w],w,b),T)}else if(b)for(var M in b)x.set(M,b[M]);return x}function t(){var b=[],m=[],x,w,y;function T(P,L,I,E){if(L>=b.length)return x!=null&&P.sort(x),w!=null?w(P):P;for(var k=-1,C=P.length,D=b[L++],F,N,G=c(),U,X=I();++k<C;)(U=G.get(F=D(N=P[k])+""))?U.push(N):G.set(F,[N]);return G.each(function(z,B){E(X,B,T(z,L,I,E))}),X}function M(P,L){if(++L>b.length)return P;var I,E=m[L-1];return w!=null&&L>=b.length?I=P.entries():(I=[],P.each(function(k,C){I.push({key:C,values:M(k,L)})})),E!=null?I.sort(function(k,C){return E(k.key,C.key)}):I}return y={object:function(P){return T(P,0,f,n)},map:function(P){return T(P,0,o,l)},entries:function(P){return M(T(P,0,o,l),0)},key:function(P){return b.push(P),y},sortKeys:function(P){return m[b.length-1]=P,y},sortValues:function(P){return x=P,y},rollup:function(P){return w=P,y}}}function f(){return{}}function n(b,m,x){b[m]=x}function o(){return c()}function l(b,m,x){b.set(m,x)}function h(){}var i=c.prototype;h.prototype=s.prototype={constructor:h,has:i.has,add:function(b){return b+="",this[a+b]=b,this},remove:i.remove,clear:i.clear,values:i.keys,size:i.size,empty:i.empty,each:i.each};function s(b,m){var x=new h;if(b instanceof h)b.each(function(T){x.add(T)});else if(b){var w=-1,y=b.length;if(m==null)for(;++w<y;)x.add(b[w]);else for(;++w<y;)x.add(m(b[w],w,b))}return x}function p(b){var m=[];for(var x in b)m.push(x);return m}function d(b){var m=[];for(var x in b)m.push(b[x]);return m}function g(b){var m=[];for(var x in b)m.push({key:x,value:b[x]});return m}r.nest=t,r.set=s,r.map=c,r.keys=p,r.values=d,r.entries=g,Object.defineProperty(r,"__esModule",{value:!0})})},{}],158:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?a(S):(r=r||self,a(r.d3=r.d3||{}))})(this,function(r){function a(Ne,ct,Mt){Ne.prototype=ct.prototype=Mt,Mt.constructor=Ne}function u(Ne,ct){var Mt=Object.create(Ne.prototype);for(var Wt in ct)Mt[Wt]=ct[Wt];return Mt}function c(){}var t=.7,f=1/t,n="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3,8})$/,i=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),s=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),p=new RegExp("^rgba\\("+[n,n,n,o]+"\\)$"),d=new RegExp("^rgba\\("+[l,l,l,o]+"\\)$"),g=new RegExp("^hsl\\("+[o,l,l]+"\\)$"),b=new RegExp("^hsla\\("+[o,l,l,o]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};a(c,T,{copy:function(Ne){return Object.assign(new this.constructor,this,Ne)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHsl:w,formatRgb:y,toString:y});function x(){return this.rgb().formatHex()}function w(){return N(this).formatHsl()}function y(){return this.rgb().formatRgb()}function T(Ne){var ct,Mt;return Ne=(Ne+"").trim().toLowerCase(),(ct=h.exec(Ne))?(Mt=ct[1].length,ct=parseInt(ct[1],16),Mt===6?M(ct):Mt===3?new E(ct>>8&15|ct>>4&240,ct>>4&15|ct&240,(ct&15)<<4|ct&15,1):Mt===8?P(ct>>24&255,ct>>16&255,ct>>8&255,(ct&255)/255):Mt===4?P(ct>>12&15|ct>>8&240,ct>>8&15|ct>>4&240,ct>>4&15|ct&240,((ct&15)<<4|ct&15)/255):null):(ct=i.exec(Ne))?new E(ct[1],ct[2],ct[3],1):(ct=s.exec(Ne))?new E(ct[1]*255/100,ct[2]*255/100,ct[3]*255/100,1):(ct=p.exec(Ne))?P(ct[1],ct[2],ct[3],ct[4]):(ct=d.exec(Ne))?P(ct[1]*255/100,ct[2]*255/100,ct[3]*255/100,ct[4]):(ct=g.exec(Ne))?F(ct[1],ct[2]/100,ct[3]/100,1):(ct=b.exec(Ne))?F(ct[1],ct[2]/100,ct[3]/100,ct[4]):m.hasOwnProperty(Ne)?M(m[Ne]):Ne==="transparent"?new E(NaN,NaN,NaN,0):null}function M(Ne){return new E(Ne>>16&255,Ne>>8&255,Ne&255,1)}function P(Ne,ct,Mt,Wt){return Wt<=0&&(Ne=ct=Mt=NaN),new E(Ne,ct,Mt,Wt)}function L(Ne){return Ne instanceof c||(Ne=T(Ne)),Ne?(Ne=Ne.rgb(),new E(Ne.r,Ne.g,Ne.b,Ne.opacity)):new E}function I(Ne,ct,Mt,Wt){return arguments.length===1?L(Ne):new E(Ne,ct,Mt,Wt==null?1:Wt)}function E(Ne,ct,Mt,Wt){this.r=+Ne,this.g=+ct,this.b=+Mt,this.opacity=+Wt}a(E,I,u(c,{brighter:function(Ne){return Ne=Ne==null?f:Math.pow(f,Ne),new E(this.r*Ne,this.g*Ne,this.b*Ne,this.opacity)},darker:function(Ne){return Ne=Ne==null?t:Math.pow(t,Ne),new E(this.r*Ne,this.g*Ne,this.b*Ne,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k,formatHex:k,formatRgb:C,toString:C}));function k(){return"#"+D(this.r)+D(this.g)+D(this.b)}function C(){var Ne=this.opacity;return Ne=isNaN(Ne)?1:Math.max(0,Math.min(1,Ne)),(Ne===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Ne===1?")":", "+Ne+")")}function D(Ne){return Ne=Math.max(0,Math.min(255,Math.round(Ne)||0)),(Ne<16?"0":"")+Ne.toString(16)}function F(Ne,ct,Mt,Wt){return Wt<=0?Ne=ct=Mt=NaN:Mt<=0||Mt>=1?Ne=ct=NaN:ct<=0&&(Ne=NaN),new U(Ne,ct,Mt,Wt)}function N(Ne){if(Ne instanceof U)return new U(Ne.h,Ne.s,Ne.l,Ne.opacity);if(Ne instanceof c||(Ne=T(Ne)),!Ne)return new U;if(Ne instanceof U)return Ne;Ne=Ne.rgb();var ct=Ne.r/255,Mt=Ne.g/255,Wt=Ne.b/255,qt=Math.min(ct,Mt,Wt),zt=Math.max(ct,Mt,Wt),$t=NaN,rr=zt-qt,Lt=(zt+qt)/2;return rr?(ct===zt?$t=(Mt-Wt)/rr+(Mt<Wt)*6:Mt===zt?$t=(Wt-ct)/rr+2:$t=(ct-Mt)/rr+4,rr/=Lt<.5?zt+qt:2-zt-qt,$t*=60):rr=Lt>0&&Lt<1?0:$t,new U($t,rr,Lt,Ne.opacity)}function G(Ne,ct,Mt,Wt){return arguments.length===1?N(Ne):new U(Ne,ct,Mt,Wt==null?1:Wt)}function U(Ne,ct,Mt,Wt){this.h=+Ne,this.s=+ct,this.l=+Mt,this.opacity=+Wt}a(U,G,u(c,{brighter:function(Ne){return Ne=Ne==null?f:Math.pow(f,Ne),new U(this.h,this.s,this.l*Ne,this.opacity)},darker:function(Ne){return Ne=Ne==null?t:Math.pow(t,Ne),new U(this.h,this.s,this.l*Ne,this.opacity)},rgb:function(){var Ne=this.h%360+(this.h<0)*360,ct=isNaN(Ne)||isNaN(this.s)?0:this.s,Mt=this.l,Wt=Mt+(Mt<.5?Mt:1-Mt)*ct,qt=2*Mt-Wt;return new E(X(Ne>=240?Ne-240:Ne+120,qt,Wt),X(Ne,qt,Wt),X(Ne<120?Ne+240:Ne-120,qt,Wt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Ne=this.opacity;return Ne=isNaN(Ne)?1:Math.max(0,Math.min(1,Ne)),(Ne===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Ne===1?")":", "+Ne+")")}}));function X(Ne,ct,Mt){return(Ne<60?ct+(Mt-ct)*Ne/60:Ne<180?Mt:Ne<240?ct+(Mt-ct)*(240-Ne)/60:ct)*255}var z=Math.PI/180,B=180/Math.PI,j=18,V=.96422,K=1,te=.82521,$=4/29,ie=6/29,se=3*ie*ie,Q=ie*ie*ie;function H(Ne){if(Ne instanceof ee)return new ee(Ne.l,Ne.a,Ne.b,Ne.opacity);if(Ne instanceof be)return Me(Ne);Ne instanceof E||(Ne=L(Ne));var ct=pe(Ne.r),Mt=pe(Ne.g),Wt=pe(Ne.b),qt=ae((.2225045*ct+.7168786*Mt+.0606169*Wt)/K),zt,$t;return ct===Mt&&Mt===Wt?zt=$t=qt:(zt=ae((.4360747*ct+.3850649*Mt+.1430804*Wt)/V),$t=ae((.0139322*ct+.0971045*Mt+.7141733*Wt)/te)),new ee(116*qt-16,500*(zt-qt),200*(qt-$t),Ne.opacity)}function oe(Ne,ct){return new ee(Ne,0,0,ct==null?1:ct)}function re(Ne,ct,Mt,Wt){return arguments.length===1?H(Ne):new ee(Ne,ct,Mt,Wt==null?1:Wt)}function ee(Ne,ct,Mt,Wt){this.l=+Ne,this.a=+ct,this.b=+Mt,this.opacity=+Wt}a(ee,re,u(c,{brighter:function(Ne){return new ee(this.l+j*(Ne==null?1:Ne),this.a,this.b,this.opacity)},darker:function(Ne){return new ee(this.l-j*(Ne==null?1:Ne),this.a,this.b,this.opacity)},rgb:function(){var Ne=(this.l+16)/116,ct=isNaN(this.a)?Ne:Ne+this.a/500,Mt=isNaN(this.b)?Ne:Ne-this.b/200;return ct=V*fe(ct),Ne=K*fe(Ne),Mt=te*fe(Mt),new E(de(3.1338561*ct-1.6168667*Ne-.4906146*Mt),de(-.9787684*ct+1.9161415*Ne+.033454*Mt),de(.0719453*ct-.2289914*Ne+1.4052427*Mt),this.opacity)}}));function ae(Ne){return Ne>Q?Math.pow(Ne,1/3):Ne/se+$}function fe(Ne){return Ne>ie?Ne*Ne*Ne:se*(Ne-$)}function de(Ne){return 255*(Ne<=.0031308?12.92*Ne:1.055*Math.pow(Ne,1/2.4)-.055)}function pe(Ne){return(Ne/=255)<=.04045?Ne/12.92:Math.pow((Ne+.055)/1.055,2.4)}function W(Ne){if(Ne instanceof be)return new be(Ne.h,Ne.c,Ne.l,Ne.opacity);if(Ne instanceof ee||(Ne=H(Ne)),Ne.a===0&&Ne.b===0)return new be(NaN,0<Ne.l&&Ne.l<100?0:NaN,Ne.l,Ne.opacity);var ct=Math.atan2(Ne.b,Ne.a)*B;return new be(ct<0?ct+360:ct,Math.sqrt(Ne.a*Ne.a+Ne.b*Ne.b),Ne.l,Ne.opacity)}function ue(Ne,ct,Mt,Wt){return arguments.length===1?W(Ne):new be(Mt,ct,Ne,Wt==null?1:Wt)}function me(Ne,ct,Mt,Wt){return arguments.length===1?W(Ne):new be(Ne,ct,Mt,Wt==null?1:Wt)}function be(Ne,ct,Mt,Wt){this.h=+Ne,this.c=+ct,this.l=+Mt,this.opacity=+Wt}function Me(Ne){if(isNaN(Ne.h))return new ee(Ne.l,0,0,Ne.opacity);var ct=Ne.h*z;return new ee(Ne.l,Math.cos(ct)*Ne.c,Math.sin(ct)*Ne.c,Ne.opacity)}a(be,me,u(c,{brighter:function(Ne){return new be(this.h,this.c,this.l+j*(Ne==null?1:Ne),this.opacity)},darker:function(Ne){return new be(this.h,this.c,this.l-j*(Ne==null?1:Ne),this.opacity)},rgb:function(){return Me(this).rgb()}}));var Pe=-.14861,Ge=1.78277,ze=-.29227,Qe=-.90649,tt=1.97294,Ce=tt*Qe,Ae=tt*Ge,Be=Ge*ze-Qe*Pe;function qe(Ne){if(Ne instanceof At)return new At(Ne.h,Ne.s,Ne.l,Ne.opacity);Ne instanceof E||(Ne=L(Ne));var ct=Ne.r/255,Mt=Ne.g/255,Wt=Ne.b/255,qt=(Be*Wt+Ce*ct-Ae*Mt)/(Be+Ce-Ae),zt=Wt-qt,$t=(tt*(Mt-qt)-ze*zt)/Qe,rr=Math.sqrt($t*$t+zt*zt)/(tt*qt*(1-qt)),Lt=rr?Math.atan2($t,zt)*B-120:NaN;return new At(Lt<0?Lt+360:Lt,rr,qt,Ne.opacity)}function Tt(Ne,ct,Mt,Wt){return arguments.length===1?qe(Ne):new At(Ne,ct,Mt,Wt==null?1:Wt)}function At(Ne,ct,Mt,Wt){this.h=+Ne,this.s=+ct,this.l=+Mt,this.opacity=+Wt}a(At,Tt,u(c,{brighter:function(Ne){return Ne=Ne==null?f:Math.pow(f,Ne),new At(this.h,this.s,this.l*Ne,this.opacity)},darker:function(Ne){return Ne=Ne==null?t:Math.pow(t,Ne),new At(this.h,this.s,this.l*Ne,this.opacity)},rgb:function(){var Ne=isNaN(this.h)?0:(this.h+120)*z,ct=+this.l,Mt=isNaN(this.s)?0:this.s*ct*(1-ct),Wt=Math.cos(Ne),qt=Math.sin(Ne);return new E(255*(ct+Mt*(Pe*Wt+Ge*qt)),255*(ct+Mt*(ze*Wt+Qe*qt)),255*(ct+Mt*(tt*Wt)),this.opacity)}})),r.color=T,r.cubehelix=Tt,r.gray=oe,r.hcl=me,r.hsl=G,r.lab=re,r.lch=ue,r.rgb=I,Object.defineProperty(r,"__esModule",{value:!0})})},{}],159:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?a(S):(r=r||self,a(r.d3=r.d3||{}))})(this,function(r){var a={value:function(){}};function u(){for(var o=0,l=arguments.length,h={},i;o<l;++o){if(!(i=arguments[o]+"")||i in h||/[\s.]/.test(i))throw new Error("illegal type: "+i);h[i]=[]}return new c(h)}function c(o){this._=o}function t(o,l){return o.trim().split(/^|\s+/).map(function(h){var i="",s=h.indexOf(".");if(s>=0&&(i=h.slice(s+1),h=h.slice(0,s)),h&&!l.hasOwnProperty(h))throw new Error("unknown type: "+h);return{type:h,name:i}})}c.prototype=u.prototype={constructor:c,on:function(o,l){var h=this._,i=t(o+"",h),s,p=-1,d=i.length;if(arguments.length<2){for(;++p<d;)if((s=(o=i[p]).type)&&(s=f(h[s],o.name)))return s;return}if(l!=null&&typeof l!="function")throw new Error("invalid callback: "+l);for(;++p<d;)if(s=(o=i[p]).type)h[s]=n(h[s],o.name,l);else if(l==null)for(s in h)h[s]=n(h[s],o.name,null);return this},copy:function(){var o={},l=this._;for(var h in l)o[h]=l[h].slice();return new c(o)},call:function(o,l){if((s=arguments.length-2)>0)for(var h=new Array(s),i=0,s,p;i<s;++i)h[i]=arguments[i+2];if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(p=this._[o],i=0,s=p.length;i<s;++i)p[i].value.apply(l,h)},apply:function(o,l,h){if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(var i=this._[o],s=0,p=i.length;s<p;++s)i[s].value.apply(l,h)}};function f(o,l){for(var h=0,i=o.length,s;h<i;++h)if((s=o[h]).name===l)return s.value}function n(o,l,h){for(var i=0,s=o.length;i<s;++i)if(o[i].name===l){o[i]=a,o=o.slice(0,i).concat(o.slice(i+1));break}return h!=null&&o.push({name:l,value:h}),o}r.dispatch=u,Object.defineProperty(r,"__esModule",{value:!0})})},{}],160:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?a(S,e("d3-quadtree"),e("d3-collection"),e("d3-dispatch"),e("d3-timer")):a(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3)})(this,function(r,a,u,c,t){function f(L,I){var E;L==null&&(L=0),I==null&&(I=0);function k(){var C,D=E.length,F,N=0,G=0;for(C=0;C<D;++C)F=E[C],N+=F.x,G+=F.y;for(N=N/D-L,G=G/D-I,C=0;C<D;++C)F=E[C],F.x-=N,F.y-=G}return k.initialize=function(C){E=C},k.x=function(C){return arguments.length?(L=+C,k):L},k.y=function(C){return arguments.length?(I=+C,k):I},k}function n(L){return function(){return L}}function o(){return(Math.random()-.5)*1e-6}function l(L){return L.x+L.vx}function h(L){return L.y+L.vy}function i(L){var I,E,k=1,C=1;typeof L!="function"&&(L=n(L==null?1:+L));function D(){for(var G,U=I.length,X,z,B,j,V,K,te=0;te<C;++te)for(X=a.quadtree(I,l,h).visitAfter(F),G=0;G<U;++G)z=I[G],V=E[z.index],K=V*V,B=z.x+z.vx,j=z.y+z.vy,X.visit($);function $(ie,se,Q,H,oe){var re=ie.data,ee=ie.r,ae=V+ee;if(re){if(re.index>z.index){var fe=B-re.x-re.vx,de=j-re.y-re.vy,pe=fe*fe+de*de;pe<ae*ae&&(fe===0&&(fe=o(),pe+=fe*fe),de===0&&(de=o(),pe+=de*de),pe=(ae-(pe=Math.sqrt(pe)))/pe*k,z.vx+=(fe*=pe)*(ae=(ee*=ee)/(K+ee)),z.vy+=(de*=pe)*ae,re.vx-=fe*(ae=1-ae),re.vy-=de*ae)}return}return se>B+ae||H<B-ae||Q>j+ae||oe<j-ae}}function F(G){if(G.data)return G.r=E[G.data.index];for(var U=G.r=0;U<4;++U)G[U]&&G[U].r>G.r&&(G.r=G[U].r)}function N(){if(!!I){var G,U=I.length,X;for(E=new Array(U),G=0;G<U;++G)X=I[G],E[X.index]=+L(X,G,I)}}return D.initialize=function(G){I=G,N()},D.iterations=function(G){return arguments.length?(C=+G,D):C},D.strength=function(G){return arguments.length?(k=+G,D):k},D.radius=function(G){return arguments.length?(L=typeof G=="function"?G:n(+G),N(),D):L},D}function s(L){return L.index}function p(L,I){var E=L.get(I);if(!E)throw new Error("missing: "+I);return E}function d(L){var I=s,E=X,k,C=n(30),D,F,N,G,U=1;L==null&&(L=[]);function X(K){return 1/Math.min(N[K.source.index],N[K.target.index])}function z(K){for(var te=0,$=L.length;te<U;++te)for(var ie=0,se,Q,H,oe,re,ee,ae;ie<$;++ie)se=L[ie],Q=se.source,H=se.target,oe=H.x+H.vx-Q.x-Q.vx||o(),re=H.y+H.vy-Q.y-Q.vy||o(),ee=Math.sqrt(oe*oe+re*re),ee=(ee-D[ie])/ee*K*k[ie],oe*=ee,re*=ee,H.vx-=oe*(ae=G[ie]),H.vy-=re*ae,Q.vx+=oe*(ae=1-ae),Q.vy+=re*ae}function B(){if(!!F){var K,te=F.length,$=L.length,ie=u.map(F,I),se;for(K=0,N=new Array(te);K<$;++K)se=L[K],se.index=K,typeof se.source!="object"&&(se.source=p(ie,se.source)),typeof se.target!="object"&&(se.target=p(ie,se.target)),N[se.source.index]=(N[se.source.index]||0)+1,N[se.target.index]=(N[se.target.index]||0)+1;for(K=0,G=new Array($);K<$;++K)se=L[K],G[K]=N[se.source.index]/(N[se.source.index]+N[se.target.index]);k=new Array($),j(),D=new Array($),V()}}function j(){if(!!F)for(var K=0,te=L.length;K<te;++K)k[K]=+E(L[K],K,L)}function V(){if(!!F)for(var K=0,te=L.length;K<te;++K)D[K]=+C(L[K],K,L)}return z.initialize=function(K){F=K,B()},z.links=function(K){return arguments.length?(L=K,B(),z):L},z.id=function(K){return arguments.length?(I=K,z):I},z.iterations=function(K){return arguments.length?(U=+K,z):U},z.strength=function(K){return arguments.length?(E=typeof K=="function"?K:n(+K),j(),z):E},z.distance=function(K){return arguments.length?(C=typeof K=="function"?K:n(+K),V(),z):C},z}function g(L){return L.x}function b(L){return L.y}var m=10,x=Math.PI*(3-Math.sqrt(5));function w(L){var I,E=1,k=.001,C=1-Math.pow(k,1/300),D=0,F=.6,N=u.map(),G=t.timer(X),U=c.dispatch("tick","end");L==null&&(L=[]);function X(){z(),U.call("tick",I),E<k&&(G.stop(),U.call("end",I))}function z(V){var K,te=L.length,$;V===void 0&&(V=1);for(var ie=0;ie<V;++ie)for(E+=(D-E)*C,N.each(function(se){se(E)}),K=0;K<te;++K)$=L[K],$.fx==null?$.x+=$.vx*=F:($.x=$.fx,$.vx=0),$.fy==null?$.y+=$.vy*=F:($.y=$.fy,$.vy=0);return I}function B(){for(var V=0,K=L.length,te;V<K;++V){if(te=L[V],te.index=V,te.fx!=null&&(te.x=te.fx),te.fy!=null&&(te.y=te.fy),isNaN(te.x)||isNaN(te.y)){var $=m*Math.sqrt(V),ie=V*x;te.x=$*Math.cos(ie),te.y=$*Math.sin(ie)}(isNaN(te.vx)||isNaN(te.vy))&&(te.vx=te.vy=0)}}function j(V){return V.initialize&&V.initialize(L),V}return B(),I={tick:z,restart:function(){return G.restart(X),I},stop:function(){return G.stop(),I},nodes:function(V){return arguments.length?(L=V,B(),N.each(j),I):L},alpha:function(V){return arguments.length?(E=+V,I):E},alphaMin:function(V){return arguments.length?(k=+V,I):k},alphaDecay:function(V){return arguments.length?(C=+V,I):+C},alphaTarget:function(V){return arguments.length?(D=+V,I):D},velocityDecay:function(V){return arguments.length?(F=1-V,I):1-F},force:function(V,K){return arguments.length>1?(K==null?N.remove(V):N.set(V,j(K)),I):N.get(V)},find:function(V,K,te){var $=0,ie=L.length,se,Q,H,oe,re;for(te==null?te=1/0:te*=te,$=0;$<ie;++$)oe=L[$],se=V-oe.x,Q=K-oe.y,H=se*se+Q*Q,H<te&&(re=oe,te=H);return re},on:function(V,K){return arguments.length>1?(U.on(V,K),I):U.on(V)}}}function y(){var L,I,E,k=n(-30),C,D=1,F=1/0,N=.81;function G(B){var j,V=L.length,K=a.quadtree(L,g,b).visitAfter(X);for(E=B,j=0;j<V;++j)I=L[j],K.visit(z)}function U(){if(!!L){var B,j=L.length,V;for(C=new Array(j),B=0;B<j;++B)V=L[B],C[V.index]=+k(V,B,L)}}function X(B){var j=0,V,K,te=0,$,ie,se;if(B.length){for($=ie=se=0;se<4;++se)(V=B[se])&&(K=Math.abs(V.value))&&(j+=V.value,te+=K,$+=K*V.x,ie+=K*V.y);B.x=$/te,B.y=ie/te}else{V=B,V.x=V.data.x,V.y=V.data.y;do j+=C[V.data.index];while(V=V.next)}B.value=j}function z(B,j,V,K){if(!B.value)return!0;var te=B.x-I.x,$=B.y-I.y,ie=K-j,se=te*te+$*$;if(ie*ie/N<se)return se<F&&(te===0&&(te=o(),se+=te*te),$===0&&($=o(),se+=$*$),se<D&&(se=Math.sqrt(D*se)),I.vx+=te*B.value*E/se,I.vy+=$*B.value*E/se),!0;if(B.length||se>=F)return;(B.data!==I||B.next)&&(te===0&&(te=o(),se+=te*te),$===0&&($=o(),se+=$*$),se<D&&(se=Math.sqrt(D*se)));do B.data!==I&&(ie=C[B.data.index]*E/se,I.vx+=te*ie,I.vy+=$*ie);while(B=B.next)}return G.initialize=function(B){L=B,U()},G.strength=function(B){return arguments.length?(k=typeof B=="function"?B:n(+B),U(),G):k},G.distanceMin=function(B){return arguments.length?(D=B*B,G):Math.sqrt(D)},G.distanceMax=function(B){return arguments.length?(F=B*B,G):Math.sqrt(F)},G.theta=function(B){return arguments.length?(N=B*B,G):Math.sqrt(N)},G}function T(L,I,E){var k,C=n(.1),D,F;typeof L!="function"&&(L=n(+L)),I==null&&(I=0),E==null&&(E=0);function N(U){for(var X=0,z=k.length;X<z;++X){var B=k[X],j=B.x-I||1e-6,V=B.y-E||1e-6,K=Math.sqrt(j*j+V*V),te=(F[X]-K)*D[X]*U/K;B.vx+=j*te,B.vy+=V*te}}function G(){if(!!k){var U,X=k.length;for(D=new Array(X),F=new Array(X),U=0;U<X;++U)F[U]=+L(k[U],U,k),D[U]=isNaN(F[U])?0:+C(k[U],U,k)}}return N.initialize=function(U){k=U,G()},N.strength=function(U){return arguments.length?(C=typeof U=="function"?U:n(+U),G(),N):C},N.radius=function(U){return arguments.length?(L=typeof U=="function"?U:n(+U),G(),N):L},N.x=function(U){return arguments.length?(I=+U,N):I},N.y=function(U){return arguments.length?(E=+U,N):E},N}function M(L){var I=n(.1),E,k,C;typeof L!="function"&&(L=n(L==null?0:+L));function D(N){for(var G=0,U=E.length,X;G<U;++G)X=E[G],X.vx+=(C[G]-X.x)*k[G]*N}function F(){if(!!E){var N,G=E.length;for(k=new Array(G),C=new Array(G),N=0;N<G;++N)k[N]=isNaN(C[N]=+L(E[N],N,E))?0:+I(E[N],N,E)}}return D.initialize=function(N){E=N,F()},D.strength=function(N){return arguments.length?(I=typeof N=="function"?N:n(+N),F(),D):I},D.x=function(N){return arguments.length?(L=typeof N=="function"?N:n(+N),F(),D):L},D}function P(L){var I=n(.1),E,k,C;typeof L!="function"&&(L=n(L==null?0:+L));function D(N){for(var G=0,U=E.length,X;G<U;++G)X=E[G],X.vy+=(C[G]-X.y)*k[G]*N}function F(){if(!!E){var N,G=E.length;for(k=new Array(G),C=new Array(G),N=0;N<G;++N)k[N]=isNaN(C[N]=+L(E[N],N,E))?0:+I(E[N],N,E)}}return D.initialize=function(N){E=N,F()},D.strength=function(N){return arguments.length?(I=typeof N=="function"?N:n(+N),F(),D):I},D.y=function(N){return arguments.length?(L=typeof N=="function"?N:n(+N),F(),D):L},D}r.forceCenter=f,r.forceCollide=i,r.forceLink=d,r.forceManyBody=y,r.forceRadial=T,r.forceSimulation=w,r.forceX=M,r.forceY=P,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-collection":157,"d3-dispatch":159,"d3-quadtree":164,"d3-timer":168}],161:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?a(S):(r=r||self,a(r.d3=r.d3||{}))})(this,function(r){function a(Te,Le){return Te.parent===Le.parent?1:2}function u(Te){return Te.reduce(c,0)/Te.length}function c(Te,Le){return Te+Le.x}function t(Te){return 1+Te.reduce(f,0)}function f(Te,Le){return Math.max(Te,Le.y)}function n(Te){for(var Le;Le=Te.children;)Te=Le[0];return Te}function o(Te){for(var Le;Le=Te.children;)Te=Le[Le.length-1];return Te}function l(){var Te=a,Le=1,Ue=1,et=!1;function ke(Ie){var He,Ye=0;Ie.eachAfter(function(Je){var st=Je.children;st?(Je.x=u(st),Je.y=t(st)):(Je.x=He?Ye+=Te(Je,He):0,Je.y=0,He=Je)});var ft=n(Ie),it=o(Ie),je=ft.x-Te(ft,it)/2,ot=it.x+Te(it,ft)/2;return Ie.eachAfter(et?function(Je){Je.x=(Je.x-Ie.x)*Le,Je.y=(Ie.y-Je.y)*Ue}:function(Je){Je.x=(Je.x-je)/(ot-je)*Le,Je.y=(1-(Ie.y?Je.y/Ie.y:1))*Ue})}return ke.separation=function(Ie){return arguments.length?(Te=Ie,ke):Te},ke.size=function(Ie){return arguments.length?(et=!1,Le=+Ie[0],Ue=+Ie[1],ke):et?null:[Le,Ue]},ke.nodeSize=function(Ie){return arguments.length?(et=!0,Le=+Ie[0],Ue=+Ie[1],ke):et?[Le,Ue]:null},ke}function h(Te){var Le=0,Ue=Te.children,et=Ue&&Ue.length;if(!et)Le=1;else for(;--et>=0;)Le+=Ue[et].value;Te.value=Le}function i(){return this.eachAfter(h)}function s(Te){var Le=this,Ue,et=[Le],ke,Ie,He;do for(Ue=et.reverse(),et=[];Le=Ue.pop();)if(Te(Le),ke=Le.children,ke)for(Ie=0,He=ke.length;Ie<He;++Ie)et.push(ke[Ie]);while(et.length);return this}function p(Te){for(var Le=this,Ue=[Le],et,ke;Le=Ue.pop();)if(Te(Le),et=Le.children,et)for(ke=et.length-1;ke>=0;--ke)Ue.push(et[ke]);return this}function d(Te){for(var Le=this,Ue=[Le],et=[],ke,Ie,He;Le=Ue.pop();)if(et.push(Le),ke=Le.children,ke)for(Ie=0,He=ke.length;Ie<He;++Ie)Ue.push(ke[Ie]);for(;Le=et.pop();)Te(Le);return this}function g(Te){return this.eachAfter(function(Le){for(var Ue=+Te(Le.data)||0,et=Le.children,ke=et&&et.length;--ke>=0;)Ue+=et[ke].value;Le.value=Ue})}function b(Te){return this.eachBefore(function(Le){Le.children&&Le.children.sort(Te)})}function m(Te){for(var Le=this,Ue=x(Le,Te),et=[Le];Le!==Ue;)Le=Le.parent,et.push(Le);for(var ke=et.length;Te!==Ue;)et.splice(ke,0,Te),Te=Te.parent;return et}function x(Te,Le){if(Te===Le)return Te;var Ue=Te.ancestors(),et=Le.ancestors(),ke=null;for(Te=Ue.pop(),Le=et.pop();Te===Le;)ke=Te,Te=Ue.pop(),Le=et.pop();return ke}function w(){for(var Te=this,Le=[Te];Te=Te.parent;)Le.push(Te);return Le}function y(){var Te=[];return this.each(function(Le){Te.push(Le)}),Te}function T(){var Te=[];return this.eachBefore(function(Le){Le.children||Te.push(Le)}),Te}function M(){var Te=this,Le=[];return Te.each(function(Ue){Ue!==Te&&Le.push({source:Ue.parent,target:Ue})}),Le}function P(Te,Le){var Ue=new C(Te),et=+Te.value&&(Ue.value=Te.value),ke,Ie=[Ue],He,Ye,ft,it;for(Le==null&&(Le=I);ke=Ie.pop();)if(et&&(ke.value=+ke.data.value),(Ye=Le(ke.data))&&(it=Ye.length))for(ke.children=new Array(it),ft=it-1;ft>=0;--ft)Ie.push(He=ke.children[ft]=new C(Ye[ft])),He.parent=ke,He.depth=ke.depth+1;return Ue.eachBefore(k)}function L(){return P(this).eachBefore(E)}function I(Te){return Te.children}function E(Te){Te.data=Te.data.data}function k(Te){var Le=0;do Te.height=Le;while((Te=Te.parent)&&Te.height<++Le)}function C(Te){this.data=Te,this.depth=this.height=0,this.parent=null}C.prototype=P.prototype={constructor:C,count:i,each:s,eachAfter:d,eachBefore:p,sum:g,sort:b,path:m,ancestors:w,descendants:y,leaves:T,links:M,copy:L};var D=Array.prototype.slice;function F(Te){for(var Le=Te.length,Ue,et;Le;)et=Math.random()*Le--|0,Ue=Te[Le],Te[Le]=Te[et],Te[et]=Ue;return Te}function N(Te){for(var Le=0,Ue=(Te=F(D.call(Te))).length,et=[],ke,Ie;Le<Ue;)ke=Te[Le],Ie&&X(Ie,ke)?++Le:(Ie=B(et=G(et,ke)),Le=0);return Ie}function G(Te,Le){var Ue,et;if(z(Le,Te))return[Le];for(Ue=0;Ue<Te.length;++Ue)if(U(Le,Te[Ue])&&z(V(Te[Ue],Le),Te))return[Te[Ue],Le];for(Ue=0;Ue<Te.length-1;++Ue)for(et=Ue+1;et<Te.length;++et)if(U(V(Te[Ue],Te[et]),Le)&&U(V(Te[Ue],Le),Te[et])&&U(V(Te[et],Le),Te[Ue])&&z(K(Te[Ue],Te[et],Le),Te))return[Te[Ue],Te[et],Le];throw new Error}function U(Te,Le){var Ue=Te.r-Le.r,et=Le.x-Te.x,ke=Le.y-Te.y;return Ue<0||Ue*Ue<et*et+ke*ke}function X(Te,Le){var Ue=Te.r-Le.r+1e-6,et=Le.x-Te.x,ke=Le.y-Te.y;return Ue>0&&Ue*Ue>et*et+ke*ke}function z(Te,Le){for(var Ue=0;Ue<Le.length;++Ue)if(!X(Te,Le[Ue]))return!1;return!0}function B(Te){switch(Te.length){case 1:return j(Te[0]);case 2:return V(Te[0],Te[1]);case 3:return K(Te[0],Te[1],Te[2])}}function j(Te){return{x:Te.x,y:Te.y,r:Te.r}}function V(Te,Le){var Ue=Te.x,et=Te.y,ke=Te.r,Ie=Le.x,He=Le.y,Ye=Le.r,ft=Ie-Ue,it=He-et,je=Ye-ke,ot=Math.sqrt(ft*ft+it*it);return{x:(Ue+Ie+ft/ot*je)/2,y:(et+He+it/ot*je)/2,r:(ot+ke+Ye)/2}}function K(Te,Le,Ue){var et=Te.x,ke=Te.y,Ie=Te.r,He=Le.x,Ye=Le.y,ft=Le.r,it=Ue.x,je=Ue.y,ot=Ue.r,Je=et-He,st=et-it,It=ke-Ye,Nt=ke-je,nr=ft-Ie,We=ot-Ie,Fe=et*et+ke*ke-Ie*Ie,bt=Fe-He*He-Ye*Ye+ft*ft,kt=Fe-it*it-je*je+ot*ot,_t=st*It-Je*Nt,Rt=(It*kt-Nt*bt)/(_t*2)-et,Dt=(Nt*nr-It*We)/_t,Ut=(st*bt-Je*kt)/(_t*2)-ke,Bt=(Je*We-st*nr)/_t,tr=Dt*Dt+Bt*Bt-1,er=2*(Ie+Rt*Dt+Ut*Bt),Zt=Rt*Rt+Ut*Ut-Ie*Ie,_r=-(tr?(er+Math.sqrt(er*er-4*tr*Zt))/(2*tr):Zt/er);return{x:et+Rt+Dt*_r,y:ke+Ut+Bt*_r,r:_r}}function te(Te,Le,Ue){var et=Te.x-Le.x,ke,Ie,He=Te.y-Le.y,Ye,ft,it=et*et+He*He;it?(Ie=Le.r+Ue.r,Ie*=Ie,ft=Te.r+Ue.r,ft*=ft,Ie>ft?(ke=(it+ft-Ie)/(2*it),Ye=Math.sqrt(Math.max(0,ft/it-ke*ke)),Ue.x=Te.x-ke*et-Ye*He,Ue.y=Te.y-ke*He+Ye*et):(ke=(it+Ie-ft)/(2*it),Ye=Math.sqrt(Math.max(0,Ie/it-ke*ke)),Ue.x=Le.x+ke*et-Ye*He,Ue.y=Le.y+ke*He+Ye*et)):(Ue.x=Le.x+Ue.r,Ue.y=Le.y)}function $(Te,Le){var Ue=Te.r+Le.r-1e-6,et=Le.x-Te.x,ke=Le.y-Te.y;return Ue>0&&Ue*Ue>et*et+ke*ke}function ie(Te){var Le=Te._,Ue=Te.next._,et=Le.r+Ue.r,ke=(Le.x*Ue.r+Ue.x*Le.r)/et,Ie=(Le.y*Ue.r+Ue.y*Le.r)/et;return ke*ke+Ie*Ie}function se(Te){this._=Te,this.next=null,this.previous=null}function Q(Te){if(!(ke=Te.length))return 0;var Le,Ue,et,ke,Ie,He,Ye,ft,it,je,ot;if(Le=Te[0],Le.x=0,Le.y=0,!(ke>1))return Le.r;if(Ue=Te[1],Le.x=-Ue.r,Ue.x=Le.r,Ue.y=0,!(ke>2))return Le.r+Ue.r;te(Ue,Le,et=Te[2]),Le=new se(Le),Ue=new se(Ue),et=new se(et),Le.next=et.previous=Ue,Ue.next=Le.previous=et,et.next=Ue.previous=Le;e:for(Ye=3;Ye<ke;++Ye){te(Le._,Ue._,et=Te[Ye]),et=new se(et),ft=Ue.next,it=Le.previous,je=Ue._.r,ot=Le._.r;do if(je<=ot){if($(ft._,et._)){Ue=ft,Le.next=Ue,Ue.previous=Le,--Ye;continue e}je+=ft._.r,ft=ft.next}else{if($(it._,et._)){Le=it,Le.next=Ue,Ue.previous=Le,--Ye;continue e}ot+=it._.r,it=it.previous}while(ft!==it.next);for(et.previous=Le,et.next=Ue,Le.next=Ue.previous=Ue=et,Ie=ie(Le);(et=et.next)!==Ue;)(He=ie(et))<Ie&&(Le=et,Ie=He);Ue=Le.next}for(Le=[Ue._],et=Ue;(et=et.next)!==Ue;)Le.push(et._);for(et=N(Le),Ye=0;Ye<ke;++Ye)Le=Te[Ye],Le.x-=et.x,Le.y-=et.y;return et.r}function H(Te){return Q(Te),Te}function oe(Te){return Te==null?null:re(Te)}function re(Te){if(typeof Te!="function")throw new Error;return Te}function ee(){return 0}function ae(Te){return function(){return Te}}function fe(Te){return Math.sqrt(Te.value)}function de(){var Te=null,Le=1,Ue=1,et=ee;function ke(Ie){return Ie.x=Le/2,Ie.y=Ue/2,Te?Ie.eachBefore(pe(Te)).eachAfter(W(et,.5)).eachBefore(ue(1)):Ie.eachBefore(pe(fe)).eachAfter(W(ee,1)).eachAfter(W(et,Ie.r/Math.min(Le,Ue))).eachBefore(ue(Math.min(Le,Ue)/(2*Ie.r))),Ie}return ke.radius=function(Ie){return arguments.length?(Te=oe(Ie),ke):Te},ke.size=function(Ie){return arguments.length?(Le=+Ie[0],Ue=+Ie[1],ke):[Le,Ue]},ke.padding=function(Ie){return arguments.length?(et=typeof Ie=="function"?Ie:ae(+Ie),ke):et},ke}function pe(Te){return function(Le){Le.children||(Le.r=Math.max(0,+Te(Le)||0))}}function W(Te,Le){return function(Ue){if(et=Ue.children){var et,ke,Ie=et.length,He=Te(Ue)*Le||0,Ye;if(He)for(ke=0;ke<Ie;++ke)et[ke].r+=He;if(Ye=Q(et),He)for(ke=0;ke<Ie;++ke)et[ke].r-=He;Ue.r=Ye+He}}}function ue(Te){return function(Le){var Ue=Le.parent;Le.r*=Te,Ue&&(Le.x=Ue.x+Te*Le.x,Le.y=Ue.y+Te*Le.y)}}function me(Te){Te.x0=Math.round(Te.x0),Te.y0=Math.round(Te.y0),Te.x1=Math.round(Te.x1),Te.y1=Math.round(Te.y1)}function be(Te,Le,Ue,et,ke){for(var Ie=Te.children,He,Ye=-1,ft=Ie.length,it=Te.value&&(et-Le)/Te.value;++Ye<ft;)He=Ie[Ye],He.y0=Ue,He.y1=ke,He.x0=Le,He.x1=Le+=He.value*it}function Me(){var Te=1,Le=1,Ue=0,et=!1;function ke(He){var Ye=He.height+1;return He.x0=He.y0=Ue,He.x1=Te,He.y1=Le/Ye,He.eachBefore(Ie(Le,Ye)),et&&He.eachBefore(me),He}function Ie(He,Ye){return function(ft){ft.children&&be(ft,ft.x0,He*(ft.depth+1)/Ye,ft.x1,He*(ft.depth+2)/Ye);var it=ft.x0,je=ft.y0,ot=ft.x1-Ue,Je=ft.y1-Ue;ot<it&&(it=ot=(it+ot)/2),Je<je&&(je=Je=(je+Je)/2),ft.x0=it,ft.y0=je,ft.x1=ot,ft.y1=Je}}return ke.round=function(He){return arguments.length?(et=!!He,ke):et},ke.size=function(He){return arguments.length?(Te=+He[0],Le=+He[1],ke):[Te,Le]},ke.padding=function(He){return arguments.length?(Ue=+He,ke):Ue},ke}var Pe="$",Ge={depth:-1},ze={};function Qe(Te){return Te.id}function tt(Te){return Te.parentId}function Ce(){var Te=Qe,Le=tt;function Ue(et){var ke,Ie,He=et.length,Ye,ft,it,je=new Array(He),ot,Je,st={};for(Ie=0;Ie<He;++Ie)ke=et[Ie],it=je[Ie]=new C(ke),(ot=Te(ke,Ie,et))!=null&&(ot+="")&&(Je=Pe+(it.id=ot),st[Je]=Je in st?ze:it);for(Ie=0;Ie<He;++Ie)if(it=je[Ie],ot=Le(et[Ie],Ie,et),ot==null||!(ot+="")){if(Ye)throw new Error("multiple roots");Ye=it}else{if(ft=st[Pe+ot],!ft)throw new Error("missing: "+ot);if(ft===ze)throw new Error("ambiguous: "+ot);ft.children?ft.children.push(it):ft.children=[it],it.parent=ft}if(!Ye)throw new Error("no root");if(Ye.parent=Ge,Ye.eachBefore(function(It){It.depth=It.parent.depth+1,--He}).eachBefore(k),Ye.parent=null,He>0)throw new Error("cycle");return Ye}return Ue.id=function(et){return arguments.length?(Te=re(et),Ue):Te},Ue.parentId=function(et){return arguments.length?(Le=re(et),Ue):Le},Ue}function Ae(Te,Le){return Te.parent===Le.parent?1:2}function Be(Te){var Le=Te.children;return Le?Le[0]:Te.t}function qe(Te){var Le=Te.children;return Le?Le[Le.length-1]:Te.t}function Tt(Te,Le,Ue){var et=Ue/(Le.i-Te.i);Le.c-=et,Le.s+=Ue,Te.c+=et,Le.z+=Ue,Le.m+=Ue}function At(Te){for(var Le=0,Ue=0,et=Te.children,ke=et.length,Ie;--ke>=0;)Ie=et[ke],Ie.z+=Le,Ie.m+=Le,Le+=Ie.s+(Ue+=Ie.c)}function Ne(Te,Le,Ue){return Te.a.parent===Le.parent?Te.a:Ue}function ct(Te,Le){this._=Te,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Le}ct.prototype=Object.create(C.prototype);function Mt(Te){for(var Le=new ct(Te,0),Ue,et=[Le],ke,Ie,He,Ye;Ue=et.pop();)if(Ie=Ue._.children)for(Ue.children=new Array(Ye=Ie.length),He=Ye-1;He>=0;--He)et.push(ke=Ue.children[He]=new ct(Ie[He],He)),ke.parent=Ue;return(Le.parent=new ct(null,0)).children=[Le],Le}function Wt(){var Te=Ae,Le=1,Ue=1,et=null;function ke(it){var je=Mt(it);if(je.eachAfter(Ie),je.parent.m=-je.z,je.eachBefore(He),et)it.eachBefore(ft);else{var ot=it,Je=it,st=it;it.eachBefore(function(Fe){Fe.x<ot.x&&(ot=Fe),Fe.x>Je.x&&(Je=Fe),Fe.depth>st.depth&&(st=Fe)});var It=ot===Je?1:Te(ot,Je)/2,Nt=It-ot.x,nr=Le/(Je.x+It+Nt),We=Ue/(st.depth||1);it.eachBefore(function(Fe){Fe.x=(Fe.x+Nt)*nr,Fe.y=Fe.depth*We})}return it}function Ie(it){var je=it.children,ot=it.parent.children,Je=it.i?ot[it.i-1]:null;if(je){At(it);var st=(je[0].z+je[je.length-1].z)/2;Je?(it.z=Je.z+Te(it._,Je._),it.m=it.z-st):it.z=st}else Je&&(it.z=Je.z+Te(it._,Je._));it.parent.A=Ye(it,Je,it.parent.A||ot[0])}function He(it){it._.x=it.z+it.parent.m,it.m+=it.parent.m}function Ye(it,je,ot){if(je){for(var Je=it,st=it,It=je,Nt=Je.parent.children[0],nr=Je.m,We=st.m,Fe=It.m,bt=Nt.m,kt;It=qe(It),Je=Be(Je),It&&Je;)Nt=Be(Nt),st=qe(st),st.a=it,kt=It.z+Fe-Je.z-nr+Te(It._,Je._),kt>0&&(Tt(Ne(It,it,ot),it,kt),nr+=kt,We+=kt),Fe+=It.m,nr+=Je.m,bt+=Nt.m,We+=st.m;It&&!qe(st)&&(st.t=It,st.m+=Fe-We),Je&&!Be(Nt)&&(Nt.t=Je,Nt.m+=nr-bt,ot=it)}return ot}function ft(it){it.x*=Le,it.y=it.depth*Ue}return ke.separation=function(it){return arguments.length?(Te=it,ke):Te},ke.size=function(it){return arguments.length?(et=!1,Le=+it[0],Ue=+it[1],ke):et?null:[Le,Ue]},ke.nodeSize=function(it){return arguments.length?(et=!0,Le=+it[0],Ue=+it[1],ke):et?[Le,Ue]:null},ke}function qt(Te,Le,Ue,et,ke){for(var Ie=Te.children,He,Ye=-1,ft=Ie.length,it=Te.value&&(ke-Ue)/Te.value;++Ye<ft;)He=Ie[Ye],He.x0=Le,He.x1=et,He.y0=Ue,He.y1=Ue+=He.value*it}var zt=(1+Math.sqrt(5))/2;function $t(Te,Le,Ue,et,ke,Ie){for(var He=[],Ye=Le.children,ft,it,je=0,ot=0,Je=Ye.length,st,It,Nt=Le.value,nr,We,Fe,bt,kt,_t,Rt;je<Je;){st=ke-Ue,It=Ie-et;do nr=Ye[ot++].value;while(!nr&&ot<Je);for(We=Fe=nr,_t=Math.max(It/st,st/It)/(Nt*Te),Rt=nr*nr*_t,kt=Math.max(Fe/Rt,Rt/We);ot<Je;++ot){if(nr+=it=Ye[ot].value,it<We&&(We=it),it>Fe&&(Fe=it),Rt=nr*nr*_t,bt=Math.max(Fe/Rt,Rt/We),bt>kt){nr-=it;break}kt=bt}He.push(ft={value:nr,dice:st<It,children:Ye.slice(je,ot)}),ft.dice?be(ft,Ue,et,ke,Nt?et+=It*nr/Nt:Ie):qt(ft,Ue,et,Nt?Ue+=st*nr/Nt:ke,Ie),Nt-=nr,je=ot}return He}var rr=function Te(Le){function Ue(et,ke,Ie,He,Ye){$t(Le,et,ke,Ie,He,Ye)}return Ue.ratio=function(et){return Te((et=+et)>1?et:1)},Ue}(zt);function Lt(){var Te=rr,Le=!1,Ue=1,et=1,ke=[0],Ie=ee,He=ee,Ye=ee,ft=ee,it=ee;function je(Je){return Je.x0=Je.y0=0,Je.x1=Ue,Je.y1=et,Je.eachBefore(ot),ke=[0],Le&&Je.eachBefore(me),Je}function ot(Je){var st=ke[Je.depth],It=Je.x0+st,Nt=Je.y0+st,nr=Je.x1-st,We=Je.y1-st;nr<It&&(It=nr=(It+nr)/2),We<Nt&&(Nt=We=(Nt+We)/2),Je.x0=It,Je.y0=Nt,Je.x1=nr,Je.y1=We,Je.children&&(st=ke[Je.depth+1]=Ie(Je)/2,It+=it(Je)-st,Nt+=He(Je)-st,nr-=Ye(Je)-st,We-=ft(Je)-st,nr<It&&(It=nr=(It+nr)/2),We<Nt&&(Nt=We=(Nt+We)/2),Te(Je,It,Nt,nr,We))}return je.round=function(Je){return arguments.length?(Le=!!Je,je):Le},je.size=function(Je){return arguments.length?(Ue=+Je[0],et=+Je[1],je):[Ue,et]},je.tile=function(Je){return arguments.length?(Te=re(Je),je):Te},je.padding=function(Je){return arguments.length?je.paddingInner(Je).paddingOuter(Je):je.paddingInner()},je.paddingInner=function(Je){return arguments.length?(Ie=typeof Je=="function"?Je:ae(+Je),je):Ie},je.paddingOuter=function(Je){return arguments.length?je.paddingTop(Je).paddingRight(Je).paddingBottom(Je).paddingLeft(Je):je.paddingTop()},je.paddingTop=function(Je){return arguments.length?(He=typeof Je=="function"?Je:ae(+Je),je):He},je.paddingRight=function(Je){return arguments.length?(Ye=typeof Je=="function"?Je:ae(+Je),je):Ye},je.paddingBottom=function(Je){return arguments.length?(ft=typeof Je=="function"?Je:ae(+Je),je):ft},je.paddingLeft=function(Je){return arguments.length?(it=typeof Je=="function"?Je:ae(+Je),je):it},je}function Ct(Te,Le,Ue,et,ke){var Ie=Te.children,He,Ye=Ie.length,ft,it=new Array(Ye+1);for(it[0]=ft=He=0;He<Ye;++He)it[He+1]=ft+=Ie[He].value;je(0,Ye,Te.value,Le,Ue,et,ke);function je(ot,Je,st,It,Nt,nr,We){if(ot>=Je-1){var Fe=Ie[ot];Fe.x0=It,Fe.y0=Nt,Fe.x1=nr,Fe.y1=We;return}for(var bt=it[ot],kt=st/2+bt,_t=ot+1,Rt=Je-1;_t<Rt;){var Dt=_t+Rt>>>1;it[Dt]<kt?_t=Dt+1:Rt=Dt}kt-it[_t-1]<it[_t]-kt&&ot+1<_t&&--_t;var Ut=it[_t]-bt,Bt=st-Ut;if(nr-It>We-Nt){var tr=(It*Bt+nr*Ut)/st;je(ot,_t,Ut,It,Nt,tr,We),je(_t,Je,Bt,tr,Nt,nr,We)}else{var er=(Nt*Bt+We*Ut)/st;je(ot,_t,Ut,It,Nt,nr,er),je(_t,Je,Bt,It,er,nr,We)}}}function dt(Te,Le,Ue,et,ke){(Te.depth&1?qt:be)(Te,Le,Ue,et,ke)}var lt=function Te(Le){function Ue(et,ke,Ie,He,Ye){if((ft=et._squarify)&&ft.ratio===Le)for(var ft,it,je,ot,Je=-1,st,It=ft.length,Nt=et.value;++Je<It;){for(it=ft[Je],je=it.children,ot=it.value=0,st=je.length;ot<st;++ot)it.value+=je[ot].value;it.dice?be(it,ke,Ie,He,Ie+=(Ye-Ie)*it.value/Nt):qt(it,ke,Ie,ke+=(He-ke)*it.value/Nt,Ye),Nt-=it.value}else et._squarify=ft=$t(Le,et,ke,Ie,He,Ye),ft.ratio=Le}return Ue.ratio=function(et){return Te((et=+et)>1?et:1)},Ue}(zt);r.cluster=l,r.hierarchy=P,r.pack=de,r.packEnclose=N,r.packSiblings=H,r.partition=Me,r.stratify=Ce,r.tree=Wt,r.treemap=Lt,r.treemapBinary=Ct,r.treemapDice=be,r.treemapResquarify=lt,r.treemapSlice=qt,r.treemapSliceDice=dt,r.treemapSquarify=rr,Object.defineProperty(r,"__esModule",{value:!0})})},{}],162:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?a(S,e("d3-color")):(r=r||self,a(r.d3=r.d3||{},r.d3))})(this,function(r,a){function u(Ae,Be,qe,Tt,At){var Ne=Ae*Ae,ct=Ne*Ae;return((1-3*Ae+3*Ne-ct)*Be+(4-6*Ne+3*ct)*qe+(1+3*Ae+3*Ne-3*ct)*Tt+ct*At)/6}function c(Ae){var Be=Ae.length-1;return function(qe){var Tt=qe<=0?qe=0:qe>=1?(qe=1,Be-1):Math.floor(qe*Be),At=Ae[Tt],Ne=Ae[Tt+1],ct=Tt>0?Ae[Tt-1]:2*At-Ne,Mt=Tt<Be-1?Ae[Tt+2]:2*Ne-At;return u((qe-Tt/Be)*Be,ct,At,Ne,Mt)}}function t(Ae){var Be=Ae.length;return function(qe){var Tt=Math.floor(((qe%=1)<0?++qe:qe)*Be),At=Ae[(Tt+Be-1)%Be],Ne=Ae[Tt%Be],ct=Ae[(Tt+1)%Be],Mt=Ae[(Tt+2)%Be];return u((qe-Tt/Be)*Be,At,Ne,ct,Mt)}}function f(Ae){return function(){return Ae}}function n(Ae,Be){return function(qe){return Ae+qe*Be}}function o(Ae,Be,qe){return Ae=Math.pow(Ae,qe),Be=Math.pow(Be,qe)-Ae,qe=1/qe,function(Tt){return Math.pow(Ae+Tt*Be,qe)}}function l(Ae,Be){var qe=Be-Ae;return qe?n(Ae,qe>180||qe<-180?qe-360*Math.round(qe/360):qe):f(isNaN(Ae)?Be:Ae)}function h(Ae){return(Ae=+Ae)==1?i:function(Be,qe){return qe-Be?o(Be,qe,Ae):f(isNaN(Be)?qe:Be)}}function i(Ae,Be){var qe=Be-Ae;return qe?n(Ae,qe):f(isNaN(Ae)?Be:Ae)}var s=function Ae(Be){var qe=h(Be);function Tt(At,Ne){var ct=qe((At=a.rgb(At)).r,(Ne=a.rgb(Ne)).r),Mt=qe(At.g,Ne.g),Wt=qe(At.b,Ne.b),qt=i(At.opacity,Ne.opacity);return function(zt){return At.r=ct(zt),At.g=Mt(zt),At.b=Wt(zt),At.opacity=qt(zt),At+""}}return Tt.gamma=Ae,Tt}(1);function p(Ae){return function(Be){var qe=Be.length,Tt=new Array(qe),At=new Array(qe),Ne=new Array(qe),ct,Mt;for(ct=0;ct<qe;++ct)Mt=a.rgb(Be[ct]),Tt[ct]=Mt.r||0,At[ct]=Mt.g||0,Ne[ct]=Mt.b||0;return Tt=Ae(Tt),At=Ae(At),Ne=Ae(Ne),Mt.opacity=1,function(Wt){return Mt.r=Tt(Wt),Mt.g=At(Wt),Mt.b=Ne(Wt),Mt+""}}}var d=p(c),g=p(t);function b(Ae,Be){Be||(Be=[]);var qe=Ae?Math.min(Be.length,Ae.length):0,Tt=Be.slice(),At;return function(Ne){for(At=0;At<qe;++At)Tt[At]=Ae[At]*(1-Ne)+Be[At]*Ne;return Tt}}function m(Ae){return ArrayBuffer.isView(Ae)&&!(Ae instanceof DataView)}function x(Ae,Be){return(m(Be)?b:w)(Ae,Be)}function w(Ae,Be){var qe=Be?Be.length:0,Tt=Ae?Math.min(qe,Ae.length):0,At=new Array(Tt),Ne=new Array(qe),ct;for(ct=0;ct<Tt;++ct)At[ct]=C(Ae[ct],Be[ct]);for(;ct<qe;++ct)Ne[ct]=Be[ct];return function(Mt){for(ct=0;ct<Tt;++ct)Ne[ct]=At[ct](Mt);return Ne}}function y(Ae,Be){var qe=new Date;return Ae=+Ae,Be=+Be,function(Tt){return qe.setTime(Ae*(1-Tt)+Be*Tt),qe}}function T(Ae,Be){return Ae=+Ae,Be=+Be,function(qe){return Ae*(1-qe)+Be*qe}}function M(Ae,Be){var qe={},Tt={},At;(Ae===null||typeof Ae!="object")&&(Ae={}),(Be===null||typeof Be!="object")&&(Be={});for(At in Be)At in Ae?qe[At]=C(Ae[At],Be[At]):Tt[At]=Be[At];return function(Ne){for(At in qe)Tt[At]=qe[At](Ne);return Tt}}var P=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,L=new RegExp(P.source,"g");function I(Ae){return function(){return Ae}}function E(Ae){return function(Be){return Ae(Be)+""}}function k(Ae,Be){var qe=P.lastIndex=L.lastIndex=0,Tt,At,Ne,ct=-1,Mt=[],Wt=[];for(Ae=Ae+"",Be=Be+"";(Tt=P.exec(Ae))&&(At=L.exec(Be));)(Ne=At.index)>qe&&(Ne=Be.slice(qe,Ne),Mt[ct]?Mt[ct]+=Ne:Mt[++ct]=Ne),(Tt=Tt[0])===(At=At[0])?Mt[ct]?Mt[ct]+=At:Mt[++ct]=At:(Mt[++ct]=null,Wt.push({i:ct,x:T(Tt,At)})),qe=L.lastIndex;return qe<Be.length&&(Ne=Be.slice(qe),Mt[ct]?Mt[ct]+=Ne:Mt[++ct]=Ne),Mt.length<2?Wt[0]?E(Wt[0].x):I(Be):(Be=Wt.length,function(qt){for(var zt=0,$t;zt<Be;++zt)Mt[($t=Wt[zt]).i]=$t.x(qt);return Mt.join("")})}function C(Ae,Be){var qe=typeof Be,Tt;return Be==null||qe==="boolean"?f(Be):(qe==="number"?T:qe==="string"?(Tt=a.color(Be))?(Be=Tt,s):k:Be instanceof a.color?s:Be instanceof Date?y:m(Be)?b:Array.isArray(Be)?w:typeof Be.valueOf!="function"&&typeof Be.toString!="function"||isNaN(Be)?M:T)(Ae,Be)}function D(Ae){var Be=Ae.length;return function(qe){return Ae[Math.max(0,Math.min(Be-1,Math.floor(qe*Be)))]}}function F(Ae,Be){var qe=l(+Ae,+Be);return function(Tt){var At=qe(Tt);return At-360*Math.floor(At/360)}}function N(Ae,Be){return Ae=+Ae,Be=+Be,function(qe){return Math.round(Ae*(1-qe)+Be*qe)}}var G=180/Math.PI,U={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function X(Ae,Be,qe,Tt,At,Ne){var ct,Mt,Wt;return(ct=Math.sqrt(Ae*Ae+Be*Be))&&(Ae/=ct,Be/=ct),(Wt=Ae*qe+Be*Tt)&&(qe-=Ae*Wt,Tt-=Be*Wt),(Mt=Math.sqrt(qe*qe+Tt*Tt))&&(qe/=Mt,Tt/=Mt,Wt/=Mt),Ae*Tt<Be*qe&&(Ae=-Ae,Be=-Be,Wt=-Wt,ct=-ct),{translateX:At,translateY:Ne,rotate:Math.atan2(Be,Ae)*G,skewX:Math.atan(Wt)*G,scaleX:ct,scaleY:Mt}}var z,B,j,V;function K(Ae){return Ae==="none"?U:(z||(z=document.createElement("DIV"),B=document.documentElement,j=document.defaultView),z.style.transform=Ae,Ae=j.getComputedStyle(B.appendChild(z),null).getPropertyValue("transform"),B.removeChild(z),Ae=Ae.slice(7,-1).split(","),X(+Ae[0],+Ae[1],+Ae[2],+Ae[3],+Ae[4],+Ae[5]))}function te(Ae){return Ae==null||(V||(V=document.createElementNS("http://www.w3.org/2000/svg","g")),V.setAttribute("transform",Ae),!(Ae=V.transform.baseVal.consolidate()))?U:(Ae=Ae.matrix,X(Ae.a,Ae.b,Ae.c,Ae.d,Ae.e,Ae.f))}function $(Ae,Be,qe,Tt){function At(qt){return qt.length?qt.pop()+" ":""}function Ne(qt,zt,$t,rr,Lt,Ct){if(qt!==$t||zt!==rr){var dt=Lt.push("translate(",null,Be,null,qe);Ct.push({i:dt-4,x:T(qt,$t)},{i:dt-2,x:T(zt,rr)})}else($t||rr)&&Lt.push("translate("+$t+Be+rr+qe)}function ct(qt,zt,$t,rr){qt!==zt?(qt-zt>180?zt+=360:zt-qt>180&&(qt+=360),rr.push({i:$t.push(At($t)+"rotate(",null,Tt)-2,x:T(qt,zt)})):zt&&$t.push(At($t)+"rotate("+zt+Tt)}function Mt(qt,zt,$t,rr){qt!==zt?rr.push({i:$t.push(At($t)+"skewX(",null,Tt)-2,x:T(qt,zt)}):zt&&$t.push(At($t)+"skewX("+zt+Tt)}function Wt(qt,zt,$t,rr,Lt,Ct){if(qt!==$t||zt!==rr){var dt=Lt.push(At(Lt)+"scale(",null,",",null,")");Ct.push({i:dt-4,x:T(qt,$t)},{i:dt-2,x:T(zt,rr)})}else($t!==1||rr!==1)&&Lt.push(At(Lt)+"scale("+$t+","+rr+")")}return function(qt,zt){var $t=[],rr=[];return qt=Ae(qt),zt=Ae(zt),Ne(qt.translateX,qt.translateY,zt.translateX,zt.translateY,$t,rr),ct(qt.rotate,zt.rotate,$t,rr),Mt(qt.skewX,zt.skewX,$t,rr),Wt(qt.scaleX,qt.scaleY,zt.scaleX,zt.scaleY,$t,rr),qt=zt=null,function(Lt){for(var Ct=-1,dt=rr.length,lt;++Ct<dt;)$t[(lt=rr[Ct]).i]=lt.x(Lt);return $t.join("")}}}var ie=$(K,"px, ","px)","deg)"),se=$(te,", ",")",")"),Q=Math.SQRT2,H=2,oe=4,re=1e-12;function ee(Ae){return((Ae=Math.exp(Ae))+1/Ae)/2}function ae(Ae){return((Ae=Math.exp(Ae))-1/Ae)/2}function fe(Ae){return((Ae=Math.exp(2*Ae))-1)/(Ae+1)}function de(Ae,Be){var qe=Ae[0],Tt=Ae[1],At=Ae[2],Ne=Be[0],ct=Be[1],Mt=Be[2],Wt=Ne-qe,qt=ct-Tt,zt=Wt*Wt+qt*qt,$t,rr;if(zt<re)rr=Math.log(Mt/At)/Q,$t=function(Le){return[qe+Le*Wt,Tt+Le*qt,At*Math.exp(Q*Le*rr)]};else{var Lt=Math.sqrt(zt),Ct=(Mt*Mt-At*At+oe*zt)/(2*At*H*Lt),dt=(Mt*Mt-At*At-oe*zt)/(2*Mt*H*Lt),lt=Math.log(Math.sqrt(Ct*Ct+1)-Ct),Te=Math.log(Math.sqrt(dt*dt+1)-dt);rr=(Te-lt)/Q,$t=function(Le){var Ue=Le*rr,et=ee(lt),ke=At/(H*Lt)*(et*fe(Q*Ue+lt)-ae(lt));return[qe+ke*Wt,Tt+ke*qt,At*et/ee(Q*Ue+lt)]}}return $t.duration=rr*1e3,$t}function pe(Ae){return function(Be,qe){var Tt=Ae((Be=a.hsl(Be)).h,(qe=a.hsl(qe)).h),At=i(Be.s,qe.s),Ne=i(Be.l,qe.l),ct=i(Be.opacity,qe.opacity);return function(Mt){return Be.h=Tt(Mt),Be.s=At(Mt),Be.l=Ne(Mt),Be.opacity=ct(Mt),Be+""}}}var W=pe(l),ue=pe(i);function me(Ae,Be){var qe=i((Ae=a.lab(Ae)).l,(Be=a.lab(Be)).l),Tt=i(Ae.a,Be.a),At=i(Ae.b,Be.b),Ne=i(Ae.opacity,Be.opacity);return function(ct){return Ae.l=qe(ct),Ae.a=Tt(ct),Ae.b=At(ct),Ae.opacity=Ne(ct),Ae+""}}function be(Ae){return function(Be,qe){var Tt=Ae((Be=a.hcl(Be)).h,(qe=a.hcl(qe)).h),At=i(Be.c,qe.c),Ne=i(Be.l,qe.l),ct=i(Be.opacity,qe.opacity);return function(Mt){return Be.h=Tt(Mt),Be.c=At(Mt),Be.l=Ne(Mt),Be.opacity=ct(Mt),Be+""}}}var Me=be(l),Pe=be(i);function Ge(Ae){return function Be(qe){qe=+qe;function Tt(At,Ne){var ct=Ae((At=a.cubehelix(At)).h,(Ne=a.cubehelix(Ne)).h),Mt=i(At.s,Ne.s),Wt=i(At.l,Ne.l),qt=i(At.opacity,Ne.opacity);return function(zt){return At.h=ct(zt),At.s=Mt(zt),At.l=Wt(Math.pow(zt,qe)),At.opacity=qt(zt),At+""}}return Tt.gamma=Be,Tt}(1)}var ze=Ge(l),Qe=Ge(i);function tt(Ae,Be){for(var qe=0,Tt=Be.length-1,At=Be[0],Ne=new Array(Tt<0?0:Tt);qe<Tt;)Ne[qe]=Ae(At,At=Be[++qe]);return function(ct){var Mt=Math.max(0,Math.min(Tt-1,Math.floor(ct*=Tt)));return Ne[Mt](ct-Mt)}}function Ce(Ae,Be){for(var qe=new Array(Be),Tt=0;Tt<Be;++Tt)qe[Tt]=Ae(Tt/(Be-1));return qe}r.interpolate=C,r.interpolateArray=x,r.interpolateBasis=c,r.interpolateBasisClosed=t,r.interpolateCubehelix=ze,r.interpolateCubehelixLong=Qe,r.interpolateDate=y,r.interpolateDiscrete=D,r.interpolateHcl=Me,r.interpolateHclLong=Pe,r.interpolateHsl=W,r.interpolateHslLong=ue,r.interpolateHue=F,r.interpolateLab=me,r.interpolateNumber=T,r.interpolateNumberArray=b,r.interpolateObject=M,r.interpolateRgb=s,r.interpolateRgbBasis=d,r.interpolateRgbBasisClosed=g,r.interpolateRound=N,r.interpolateString=k,r.interpolateTransformCss=ie,r.interpolateTransformSvg=se,r.interpolateZoom=de,r.piecewise=tt,r.quantize=Ce,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-color":158}],163:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?a(S):(r=r||self,a(r.d3=r.d3||{}))})(this,function(r){var a=Math.PI,u=2*a,c=1e-6,t=u-c;function f(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new f}f.prototype=n.prototype={constructor:f,moveTo:function(o,l){this._+="M"+(this._x0=this._x1=+o)+","+(this._y0=this._y1=+l)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(o,l){this._+="L"+(this._x1=+o)+","+(this._y1=+l)},quadraticCurveTo:function(o,l,h,i){this._+="Q"+ +o+","+ +l+","+(this._x1=+h)+","+(this._y1=+i)},bezierCurveTo:function(o,l,h,i,s,p){this._+="C"+ +o+","+ +l+","+ +h+","+ +i+","+(this._x1=+s)+","+(this._y1=+p)},arcTo:function(o,l,h,i,s){o=+o,l=+l,h=+h,i=+i,s=+s;var p=this._x1,d=this._y1,g=h-o,b=i-l,m=p-o,x=d-l,w=m*m+x*x;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=o)+","+(this._y1=l);else if(w>c)if(!(Math.abs(x*g-b*m)>c)||!s)this._+="L"+(this._x1=o)+","+(this._y1=l);else{var y=h-p,T=i-d,M=g*g+b*b,P=y*y+T*T,L=Math.sqrt(M),I=Math.sqrt(w),E=s*Math.tan((a-Math.acos((M+w-P)/(2*L*I)))/2),k=E/I,C=E/L;Math.abs(k-1)>c&&(this._+="L"+(o+k*m)+","+(l+k*x)),this._+="A"+s+","+s+",0,0,"+ +(x*y>m*T)+","+(this._x1=o+C*g)+","+(this._y1=l+C*b)}},arc:function(o,l,h,i,s,p){o=+o,l=+l,h=+h,p=!!p;var d=h*Math.cos(i),g=h*Math.sin(i),b=o+d,m=l+g,x=1^p,w=p?i-s:s-i;if(h<0)throw new Error("negative radius: "+h);this._x1===null?this._+="M"+b+","+m:(Math.abs(this._x1-b)>c||Math.abs(this._y1-m)>c)&&(this._+="L"+b+","+m),h&&(w<0&&(w=w%u+u),w>t?this._+="A"+h+","+h+",0,1,"+x+","+(o-d)+","+(l-g)+"A"+h+","+h+",0,1,"+x+","+(this._x1=b)+","+(this._y1=m):w>c&&(this._+="A"+h+","+h+",0,"+ +(w>=a)+","+x+","+(this._x1=o+h*Math.cos(s))+","+(this._y1=l+h*Math.sin(s))))},rect:function(o,l,h,i){this._+="M"+(this._x0=this._x1=+o)+","+(this._y0=this._y1=+l)+"h"+ +h+"v"+ +i+"h"+-h+"Z"},toString:function(){return this._}},r.path=n,Object.defineProperty(r,"__esModule",{value:!0})})},{}],164:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?a(S):(r=r||self,a(r.d3=r.d3||{}))})(this,function(r){function a(L){var I=+this._x.call(null,L),E=+this._y.call(null,L);return u(this.cover(I,E),I,E,L)}function u(L,I,E,k){if(isNaN(I)||isNaN(E))return L;var C,D=L._root,F={data:k},N=L._x0,G=L._y0,U=L._x1,X=L._y1,z,B,j,V,K,te,$,ie;if(!D)return L._root=F,L;for(;D.length;)if((K=I>=(z=(N+U)/2))?N=z:U=z,(te=E>=(B=(G+X)/2))?G=B:X=B,C=D,!(D=D[$=te<<1|K]))return C[$]=F,L;if(j=+L._x.call(null,D.data),V=+L._y.call(null,D.data),I===j&&E===V)return F.next=D,C?C[$]=F:L._root=F,L;do C=C?C[$]=new Array(4):L._root=new Array(4),(K=I>=(z=(N+U)/2))?N=z:U=z,(te=E>=(B=(G+X)/2))?G=B:X=B;while(($=te<<1|K)===(ie=(V>=B)<<1|j>=z));return C[ie]=D,C[$]=F,L}function c(L){var I,E,k=L.length,C,D,F=new Array(k),N=new Array(k),G=1/0,U=1/0,X=-1/0,z=-1/0;for(E=0;E<k;++E)isNaN(C=+this._x.call(null,I=L[E]))||isNaN(D=+this._y.call(null,I))||(F[E]=C,N[E]=D,C<G&&(G=C),C>X&&(X=C),D<U&&(U=D),D>z&&(z=D));if(G>X||U>z)return this;for(this.cover(G,U).cover(X,z),E=0;E<k;++E)u(this,F[E],N[E],L[E]);return this}function t(L,I){if(isNaN(L=+L)||isNaN(I=+I))return this;var E=this._x0,k=this._y0,C=this._x1,D=this._y1;if(isNaN(E))C=(E=Math.floor(L))+1,D=(k=Math.floor(I))+1;else{for(var F=C-E,N=this._root,G,U;E>L||L>=C||k>I||I>=D;)switch(U=(I<k)<<1|L<E,G=new Array(4),G[U]=N,N=G,F*=2,U){case 0:C=E+F,D=k+F;break;case 1:E=C-F,D=k+F;break;case 2:C=E+F,k=D-F;break;case 3:E=C-F,k=D-F;break}this._root&&this._root.length&&(this._root=N)}return this._x0=E,this._y0=k,this._x1=C,this._y1=D,this}function f(){var L=[];return this.visit(function(I){if(!I.length)do L.push(I.data);while(I=I.next)}),L}function n(L){return arguments.length?this.cover(+L[0][0],+L[0][1]).cover(+L[1][0],+L[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function o(L,I,E,k,C){this.node=L,this.x0=I,this.y0=E,this.x1=k,this.y1=C}function l(L,I,E){var k,C=this._x0,D=this._y0,F,N,G,U,X=this._x1,z=this._y1,B=[],j=this._root,V,K;for(j&&B.push(new o(j,C,D,X,z)),E==null?E=1/0:(C=L-E,D=I-E,X=L+E,z=I+E,E*=E);V=B.pop();)if(!(!(j=V.node)||(F=V.x0)>X||(N=V.y0)>z||(G=V.x1)<C||(U=V.y1)<D))if(j.length){var te=(F+G)/2,$=(N+U)/2;B.push(new o(j[3],te,$,G,U),new o(j[2],F,$,te,U),new o(j[1],te,N,G,$),new o(j[0],F,N,te,$)),(K=(I>=$)<<1|L>=te)&&(V=B[B.length-1],B[B.length-1]=B[B.length-1-K],B[B.length-1-K]=V)}else{var ie=L-+this._x.call(null,j.data),se=I-+this._y.call(null,j.data),Q=ie*ie+se*se;if(Q<E){var H=Math.sqrt(E=Q);C=L-H,D=I-H,X=L+H,z=I+H,k=j.data}}return k}function h(L){if(isNaN(X=+this._x.call(null,L))||isNaN(z=+this._y.call(null,L)))return this;var I,E=this._root,k,C,D,F=this._x0,N=this._y0,G=this._x1,U=this._y1,X,z,B,j,V,K,te,$;if(!E)return this;if(E.length)for(;;){if((V=X>=(B=(F+G)/2))?F=B:G=B,(K=z>=(j=(N+U)/2))?N=j:U=j,I=E,!(E=E[te=K<<1|V]))return this;if(!E.length)break;(I[te+1&3]||I[te+2&3]||I[te+3&3])&&(k=I,$=te)}for(;E.data!==L;)if(C=E,!(E=E.next))return this;return(D=E.next)&&delete E.next,C?(D?C.next=D:delete C.next,this):I?(D?I[te]=D:delete I[te],(E=I[0]||I[1]||I[2]||I[3])&&E===(I[3]||I[2]||I[1]||I[0])&&!E.length&&(k?k[$]=E:this._root=E),this):(this._root=D,this)}function i(L){for(var I=0,E=L.length;I<E;++I)this.remove(L[I]);return this}function s(){return this._root}function p(){var L=0;return this.visit(function(I){if(!I.length)do++L;while(I=I.next)}),L}function d(L){var I=[],E,k=this._root,C,D,F,N,G;for(k&&I.push(new o(k,this._x0,this._y0,this._x1,this._y1));E=I.pop();)if(!L(k=E.node,D=E.x0,F=E.y0,N=E.x1,G=E.y1)&&k.length){var U=(D+N)/2,X=(F+G)/2;(C=k[3])&&I.push(new o(C,U,X,N,G)),(C=k[2])&&I.push(new o(C,D,X,U,G)),(C=k[1])&&I.push(new o(C,U,F,N,X)),(C=k[0])&&I.push(new o(C,D,F,U,X))}return this}function g(L){var I=[],E=[],k;for(this._root&&I.push(new o(this._root,this._x0,this._y0,this._x1,this._y1));k=I.pop();){var C=k.node;if(C.length){var D,F=k.x0,N=k.y0,G=k.x1,U=k.y1,X=(F+G)/2,z=(N+U)/2;(D=C[0])&&I.push(new o(D,F,N,X,z)),(D=C[1])&&I.push(new o(D,X,N,G,z)),(D=C[2])&&I.push(new o(D,F,z,X,U)),(D=C[3])&&I.push(new o(D,X,z,G,U))}E.push(k)}for(;k=E.pop();)L(k.node,k.x0,k.y0,k.x1,k.y1);return this}function b(L){return L[0]}function m(L){return arguments.length?(this._x=L,this):this._x}function x(L){return L[1]}function w(L){return arguments.length?(this._y=L,this):this._y}function y(L,I,E){var k=new T(I==null?b:I,E==null?x:E,NaN,NaN,NaN,NaN);return L==null?k:k.addAll(L)}function T(L,I,E,k,C,D){this._x=L,this._y=I,this._x0=E,this._y0=k,this._x1=C,this._y1=D,this._root=void 0}function M(L){for(var I={data:L.data},E=I;L=L.next;)E=E.next={data:L.data};return I}var P=y.prototype=T.prototype;P.copy=function(){var L=new T(this._x,this._y,this._x0,this._y0,this._x1,this._y1),I=this._root,E,k;if(!I)return L;if(!I.length)return L._root=M(I),L;for(E=[{source:I,target:L._root=new Array(4)}];I=E.pop();)for(var C=0;C<4;++C)(k=I.source[C])&&(k.length?E.push({source:k,target:I.target[C]=new Array(4)}):I.target[C]=M(k));return L},P.add=a,P.addAll=c,P.cover=t,P.data=f,P.extent=n,P.find=l,P.remove=h,P.removeAll=i,P.root=s,P.size=p,P.visit=d,P.visitAfter=g,P.x=m,P.y=w,r.quadtree=y,Object.defineProperty(r,"__esModule",{value:!0})})},{}],165:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?a(S,e("d3-path")):(r=r||self,a(r.d3=r.d3||{},r.d3))})(this,function(r,a){function u(vt){return function(){return vt}}var c=Math.abs,t=Math.atan2,f=Math.cos,n=Math.max,o=Math.min,l=Math.sin,h=Math.sqrt,i=1e-12,s=Math.PI,p=s/2,d=2*s;function g(vt){return vt>1?0:vt<-1?s:Math.acos(vt)}function b(vt){return vt>=1?p:vt<=-1?-p:Math.asin(vt)}function m(vt){return vt.innerRadius}function x(vt){return vt.outerRadius}function w(vt){return vt.startAngle}function y(vt){return vt.endAngle}function T(vt){return vt&&vt.padAngle}function M(vt,Gt,fr,Cr,Wr,Vr,Qr,Hr){var En=fr-vt,ta=Cr-Gt,ea=Qr-Wr,ba=Hr-Vr,Wa=ba*En-ea*ta;if(!(Wa*Wa<i))return Wa=(ea*(Gt-Vr)-ba*(vt-Wr))/Wa,[vt+Wa*En,Gt+Wa*ta]}function P(vt,Gt,fr,Cr,Wr,Vr,Qr){var Hr=vt-fr,En=Gt-Cr,ta=(Qr?Vr:-Vr)/h(Hr*Hr+En*En),ea=ta*En,ba=-ta*Hr,Wa=vt+ea,qa=Gt+ba,dr=fr+ea,nn=Cr+ba,Jr=(Wa+dr)/2,Pn=(qa+nn)/2,Gn=dr-Wa,ka=nn-qa,ca=Gn*Gn+ka*ka,Ta=Wr-Vr,Aa=Wa*nn-dr*qa,Ya=(ka<0?-1:1)*h(n(0,Ta*Ta*ca-Aa*Aa)),Xt=(Aa*ka-Gn*Ya)/ca,yr=(-Aa*Gn-ka*Ya)/ca,Yr=(Aa*ka+Gn*Ya)/ca,un=(-Aa*Gn+ka*Ya)/ca,qr=Xt-Jr,rn=yr-Pn,hn=Yr-Jr,tn=un-Pn;return qr*qr+rn*rn>hn*hn+tn*tn&&(Xt=Yr,yr=un),{cx:Xt,cy:yr,x01:-ea,y01:-ba,x11:Xt*(Wr/Ta-1),y11:yr*(Wr/Ta-1)}}function L(){var vt=m,Gt=x,fr=u(0),Cr=null,Wr=w,Vr=y,Qr=T,Hr=null;function En(){var ta,ea,ba=+vt.apply(this,arguments),Wa=+Gt.apply(this,arguments),qa=Wr.apply(this,arguments)-p,dr=Vr.apply(this,arguments)-p,nn=c(dr-qa),Jr=dr>qa;if(Hr||(Hr=ta=a.path()),Wa<ba&&(ea=Wa,Wa=ba,ba=ea),!(Wa>i))Hr.moveTo(0,0);else if(nn>d-i)Hr.moveTo(Wa*f(qa),Wa*l(qa)),Hr.arc(0,0,Wa,qa,dr,!Jr),ba>i&&(Hr.moveTo(ba*f(dr),ba*l(dr)),Hr.arc(0,0,ba,dr,qa,Jr));else{var Pn=qa,Gn=dr,ka=qa,ca=dr,Ta=nn,Aa=nn,Ya=Qr.apply(this,arguments)/2,Xt=Ya>i&&(Cr?+Cr.apply(this,arguments):h(ba*ba+Wa*Wa)),yr=o(c(Wa-ba)/2,+fr.apply(this,arguments)),Yr=yr,un=yr,qr,rn;if(Xt>i){var hn=b(Xt/ba*l(Ya)),tn=b(Xt/Wa*l(Ya));(Ta-=hn*2)>i?(hn*=Jr?1:-1,ka+=hn,ca-=hn):(Ta=0,ka=ca=(qa+dr)/2),(Aa-=tn*2)>i?(tn*=Jr?1:-1,Pn+=tn,Gn-=tn):(Aa=0,Pn=Gn=(qa+dr)/2)}var wr=Wa*f(Pn),zr=Wa*l(Pn),Tr=ba*f(ca),Fn=ba*l(ca);if(yr>i){var Bn=Wa*f(Gn),sa=Wa*l(Gn),Pa=ba*f(ka),ia=ba*l(ka),ri;if(nn<s&&(ri=M(wr,zr,Pa,ia,Bn,sa,Tr,Fn))){var Ai=wr-ri[0],Bi=zr-ri[1],Qa=Bn-ri[0],yi=sa-ri[1],As=1/l(g((Ai*Qa+Bi*yi)/(h(Ai*Ai+Bi*Bi)*h(Qa*Qa+yi*yi)))/2),qo=h(ri[0]*ri[0]+ri[1]*ri[1]);Yr=o(yr,(ba-qo)/(As-1)),un=o(yr,(Wa-qo)/(As+1))}}Aa>i?un>i?(qr=P(Pa,ia,wr,zr,Wa,un,Jr),rn=P(Bn,sa,Tr,Fn,Wa,un,Jr),Hr.moveTo(qr.cx+qr.x01,qr.cy+qr.y01),un<yr?Hr.arc(qr.cx,qr.cy,un,t(qr.y01,qr.x01),t(rn.y01,rn.x01),!Jr):(Hr.arc(qr.cx,qr.cy,un,t(qr.y01,qr.x01),t(qr.y11,qr.x11),!Jr),Hr.arc(0,0,Wa,t(qr.cy+qr.y11,qr.cx+qr.x11),t(rn.cy+rn.y11,rn.cx+rn.x11),!Jr),Hr.arc(rn.cx,rn.cy,un,t(rn.y11,rn.x11),t(rn.y01,rn.x01),!Jr))):(Hr.moveTo(wr,zr),Hr.arc(0,0,Wa,Pn,Gn,!Jr)):Hr.moveTo(wr,zr),!(ba>i)||!(Ta>i)?Hr.lineTo(Tr,Fn):Yr>i?(qr=P(Tr,Fn,Bn,sa,ba,-Yr,Jr),rn=P(wr,zr,Pa,ia,ba,-Yr,Jr),Hr.lineTo(qr.cx+qr.x01,qr.cy+qr.y01),Yr<yr?Hr.arc(qr.cx,qr.cy,Yr,t(qr.y01,qr.x01),t(rn.y01,rn.x01),!Jr):(Hr.arc(qr.cx,qr.cy,Yr,t(qr.y01,qr.x01),t(qr.y11,qr.x11),!Jr),Hr.arc(0,0,ba,t(qr.cy+qr.y11,qr.cx+qr.x11),t(rn.cy+rn.y11,rn.cx+rn.x11),Jr),Hr.arc(rn.cx,rn.cy,Yr,t(rn.y11,rn.x11),t(rn.y01,rn.x01),!Jr))):Hr.arc(0,0,ba,ca,ka,Jr)}if(Hr.closePath(),ta)return Hr=null,ta+""||null}return En.centroid=function(){var ta=(+vt.apply(this,arguments)+ +Gt.apply(this,arguments))/2,ea=(+Wr.apply(this,arguments)+ +Vr.apply(this,arguments))/2-s/2;return[f(ea)*ta,l(ea)*ta]},En.innerRadius=function(ta){return arguments.length?(vt=typeof ta=="function"?ta:u(+ta),En):vt},En.outerRadius=function(ta){return arguments.length?(Gt=typeof ta=="function"?ta:u(+ta),En):Gt},En.cornerRadius=function(ta){return arguments.length?(fr=typeof ta=="function"?ta:u(+ta),En):fr},En.padRadius=function(ta){return arguments.length?(Cr=ta==null?null:typeof ta=="function"?ta:u(+ta),En):Cr},En.startAngle=function(ta){return arguments.length?(Wr=typeof ta=="function"?ta:u(+ta),En):Wr},En.endAngle=function(ta){return arguments.length?(Vr=typeof ta=="function"?ta:u(+ta),En):Vr},En.padAngle=function(ta){return arguments.length?(Qr=typeof ta=="function"?ta:u(+ta),En):Qr},En.context=function(ta){return arguments.length?(Hr=ta==null?null:ta,En):Hr},En}function I(vt){this._context=vt}I.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1,this._line?this._context.lineTo(vt,Gt):this._context.moveTo(vt,Gt);break;case 1:this._point=2;default:this._context.lineTo(vt,Gt);break}}};function E(vt){return new I(vt)}function k(vt){return vt[0]}function C(vt){return vt[1]}function D(){var vt=k,Gt=C,fr=u(!0),Cr=null,Wr=E,Vr=null;function Qr(Hr){var En,ta=Hr.length,ea,ba=!1,Wa;for(Cr==null&&(Vr=Wr(Wa=a.path())),En=0;En<=ta;++En)!(En<ta&&fr(ea=Hr[En],En,Hr))===ba&&((ba=!ba)?Vr.lineStart():Vr.lineEnd()),ba&&Vr.point(+vt(ea,En,Hr),+Gt(ea,En,Hr));if(Wa)return Vr=null,Wa+""||null}return Qr.x=function(Hr){return arguments.length?(vt=typeof Hr=="function"?Hr:u(+Hr),Qr):vt},Qr.y=function(Hr){return arguments.length?(Gt=typeof Hr=="function"?Hr:u(+Hr),Qr):Gt},Qr.defined=function(Hr){return arguments.length?(fr=typeof Hr=="function"?Hr:u(!!Hr),Qr):fr},Qr.curve=function(Hr){return arguments.length?(Wr=Hr,Cr!=null&&(Vr=Wr(Cr)),Qr):Wr},Qr.context=function(Hr){return arguments.length?(Hr==null?Cr=Vr=null:Vr=Wr(Cr=Hr),Qr):Cr},Qr}function F(){var vt=k,Gt=null,fr=u(0),Cr=C,Wr=u(!0),Vr=null,Qr=E,Hr=null;function En(ea){var ba,Wa,qa,dr=ea.length,nn,Jr=!1,Pn,Gn=new Array(dr),ka=new Array(dr);for(Vr==null&&(Hr=Qr(Pn=a.path())),ba=0;ba<=dr;++ba){if(!(ba<dr&&Wr(nn=ea[ba],ba,ea))===Jr)if(Jr=!Jr)Wa=ba,Hr.areaStart(),Hr.lineStart();else{for(Hr.lineEnd(),Hr.lineStart(),qa=ba-1;qa>=Wa;--qa)Hr.point(Gn[qa],ka[qa]);Hr.lineEnd(),Hr.areaEnd()}Jr&&(Gn[ba]=+vt(nn,ba,ea),ka[ba]=+fr(nn,ba,ea),Hr.point(Gt?+Gt(nn,ba,ea):Gn[ba],Cr?+Cr(nn,ba,ea):ka[ba]))}if(Pn)return Hr=null,Pn+""||null}function ta(){return D().defined(Wr).curve(Qr).context(Vr)}return En.x=function(ea){return arguments.length?(vt=typeof ea=="function"?ea:u(+ea),Gt=null,En):vt},En.x0=function(ea){return arguments.length?(vt=typeof ea=="function"?ea:u(+ea),En):vt},En.x1=function(ea){return arguments.length?(Gt=ea==null?null:typeof ea=="function"?ea:u(+ea),En):Gt},En.y=function(ea){return arguments.length?(fr=typeof ea=="function"?ea:u(+ea),Cr=null,En):fr},En.y0=function(ea){return arguments.length?(fr=typeof ea=="function"?ea:u(+ea),En):fr},En.y1=function(ea){return arguments.length?(Cr=ea==null?null:typeof ea=="function"?ea:u(+ea),En):Cr},En.lineX0=En.lineY0=function(){return ta().x(vt).y(fr)},En.lineY1=function(){return ta().x(vt).y(Cr)},En.lineX1=function(){return ta().x(Gt).y(fr)},En.defined=function(ea){return arguments.length?(Wr=typeof ea=="function"?ea:u(!!ea),En):Wr},En.curve=function(ea){return arguments.length?(Qr=ea,Vr!=null&&(Hr=Qr(Vr)),En):Qr},En.context=function(ea){return arguments.length?(ea==null?Vr=Hr=null:Hr=Qr(Vr=ea),En):Vr},En}function N(vt,Gt){return Gt<vt?-1:Gt>vt?1:Gt>=vt?0:NaN}function G(vt){return vt}function U(){var vt=G,Gt=N,fr=null,Cr=u(0),Wr=u(d),Vr=u(0);function Qr(Hr){var En,ta=Hr.length,ea,ba,Wa=0,qa=new Array(ta),dr=new Array(ta),nn=+Cr.apply(this,arguments),Jr=Math.min(d,Math.max(-d,Wr.apply(this,arguments)-nn)),Pn,Gn=Math.min(Math.abs(Jr)/ta,Vr.apply(this,arguments)),ka=Gn*(Jr<0?-1:1),ca;for(En=0;En<ta;++En)(ca=dr[qa[En]=En]=+vt(Hr[En],En,Hr))>0&&(Wa+=ca);for(Gt!=null?qa.sort(function(Ta,Aa){return Gt(dr[Ta],dr[Aa])}):fr!=null&&qa.sort(function(Ta,Aa){return fr(Hr[Ta],Hr[Aa])}),En=0,ba=Wa?(Jr-ta*ka)/Wa:0;En<ta;++En,nn=Pn)ea=qa[En],ca=dr[ea],Pn=nn+(ca>0?ca*ba:0)+ka,dr[ea]={data:Hr[ea],index:En,value:ca,startAngle:nn,endAngle:Pn,padAngle:Gn};return dr}return Qr.value=function(Hr){return arguments.length?(vt=typeof Hr=="function"?Hr:u(+Hr),Qr):vt},Qr.sortValues=function(Hr){return arguments.length?(Gt=Hr,fr=null,Qr):Gt},Qr.sort=function(Hr){return arguments.length?(fr=Hr,Gt=null,Qr):fr},Qr.startAngle=function(Hr){return arguments.length?(Cr=typeof Hr=="function"?Hr:u(+Hr),Qr):Cr},Qr.endAngle=function(Hr){return arguments.length?(Wr=typeof Hr=="function"?Hr:u(+Hr),Qr):Wr},Qr.padAngle=function(Hr){return arguments.length?(Vr=typeof Hr=="function"?Hr:u(+Hr),Qr):Vr},Qr}var X=B(E);function z(vt){this._curve=vt}z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(vt,Gt){this._curve.point(Gt*Math.sin(vt),Gt*-Math.cos(vt))}};function B(vt){function Gt(fr){return new z(vt(fr))}return Gt._curve=vt,Gt}function j(vt){var Gt=vt.curve;return vt.angle=vt.x,delete vt.x,vt.radius=vt.y,delete vt.y,vt.curve=function(fr){return arguments.length?Gt(B(fr)):Gt()._curve},vt}function V(){return j(D().curve(X))}function K(){var vt=F().curve(X),Gt=vt.curve,fr=vt.lineX0,Cr=vt.lineX1,Wr=vt.lineY0,Vr=vt.lineY1;return vt.angle=vt.x,delete vt.x,vt.startAngle=vt.x0,delete vt.x0,vt.endAngle=vt.x1,delete vt.x1,vt.radius=vt.y,delete vt.y,vt.innerRadius=vt.y0,delete vt.y0,vt.outerRadius=vt.y1,delete vt.y1,vt.lineStartAngle=function(){return j(fr())},delete vt.lineX0,vt.lineEndAngle=function(){return j(Cr())},delete vt.lineX1,vt.lineInnerRadius=function(){return j(Wr())},delete vt.lineY0,vt.lineOuterRadius=function(){return j(Vr())},delete vt.lineY1,vt.curve=function(Qr){return arguments.length?Gt(B(Qr)):Gt()._curve},vt}function te(vt,Gt){return[(Gt=+Gt)*Math.cos(vt-=Math.PI/2),Gt*Math.sin(vt)]}var $=Array.prototype.slice;function ie(vt){return vt.source}function se(vt){return vt.target}function Q(vt){var Gt=ie,fr=se,Cr=k,Wr=C,Vr=null;function Qr(){var Hr,En=$.call(arguments),ta=Gt.apply(this,En),ea=fr.apply(this,En);if(Vr||(Vr=Hr=a.path()),vt(Vr,+Cr.apply(this,(En[0]=ta,En)),+Wr.apply(this,En),+Cr.apply(this,(En[0]=ea,En)),+Wr.apply(this,En)),Hr)return Vr=null,Hr+""||null}return Qr.source=function(Hr){return arguments.length?(Gt=Hr,Qr):Gt},Qr.target=function(Hr){return arguments.length?(fr=Hr,Qr):fr},Qr.x=function(Hr){return arguments.length?(Cr=typeof Hr=="function"?Hr:u(+Hr),Qr):Cr},Qr.y=function(Hr){return arguments.length?(Wr=typeof Hr=="function"?Hr:u(+Hr),Qr):Wr},Qr.context=function(Hr){return arguments.length?(Vr=Hr==null?null:Hr,Qr):Vr},Qr}function H(vt,Gt,fr,Cr,Wr){vt.moveTo(Gt,fr),vt.bezierCurveTo(Gt=(Gt+Cr)/2,fr,Gt,Wr,Cr,Wr)}function oe(vt,Gt,fr,Cr,Wr){vt.moveTo(Gt,fr),vt.bezierCurveTo(Gt,fr=(fr+Wr)/2,Cr,fr,Cr,Wr)}function re(vt,Gt,fr,Cr,Wr){var Vr=te(Gt,fr),Qr=te(Gt,fr=(fr+Wr)/2),Hr=te(Cr,fr),En=te(Cr,Wr);vt.moveTo(Vr[0],Vr[1]),vt.bezierCurveTo(Qr[0],Qr[1],Hr[0],Hr[1],En[0],En[1])}function ee(){return Q(H)}function ae(){return Q(oe)}function fe(){var vt=Q(re);return vt.angle=vt.x,delete vt.x,vt.radius=vt.y,delete vt.y,vt}var de={draw:function(vt,Gt){var fr=Math.sqrt(Gt/s);vt.moveTo(fr,0),vt.arc(0,0,fr,0,d)}},pe={draw:function(vt,Gt){var fr=Math.sqrt(Gt/5)/2;vt.moveTo(-3*fr,-fr),vt.lineTo(-fr,-fr),vt.lineTo(-fr,-3*fr),vt.lineTo(fr,-3*fr),vt.lineTo(fr,-fr),vt.lineTo(3*fr,-fr),vt.lineTo(3*fr,fr),vt.lineTo(fr,fr),vt.lineTo(fr,3*fr),vt.lineTo(-fr,3*fr),vt.lineTo(-fr,fr),vt.lineTo(-3*fr,fr),vt.closePath()}},W=Math.sqrt(1/3),ue=W*2,me={draw:function(vt,Gt){var fr=Math.sqrt(Gt/ue),Cr=fr*W;vt.moveTo(0,-fr),vt.lineTo(Cr,0),vt.lineTo(0,fr),vt.lineTo(-Cr,0),vt.closePath()}},be=.8908130915292852,Me=Math.sin(s/10)/Math.sin(7*s/10),Pe=Math.sin(d/10)*Me,Ge=-Math.cos(d/10)*Me,ze={draw:function(vt,Gt){var fr=Math.sqrt(Gt*be),Cr=Pe*fr,Wr=Ge*fr;vt.moveTo(0,-fr),vt.lineTo(Cr,Wr);for(var Vr=1;Vr<5;++Vr){var Qr=d*Vr/5,Hr=Math.cos(Qr),En=Math.sin(Qr);vt.lineTo(En*fr,-Hr*fr),vt.lineTo(Hr*Cr-En*Wr,En*Cr+Hr*Wr)}vt.closePath()}},Qe={draw:function(vt,Gt){var fr=Math.sqrt(Gt),Cr=-fr/2;vt.rect(Cr,Cr,fr,fr)}},tt=Math.sqrt(3),Ce={draw:function(vt,Gt){var fr=-Math.sqrt(Gt/(tt*3));vt.moveTo(0,fr*2),vt.lineTo(-tt*fr,-fr),vt.lineTo(tt*fr,-fr),vt.closePath()}},Ae=-.5,Be=Math.sqrt(3)/2,qe=1/Math.sqrt(12),Tt=(qe/2+1)*3,At={draw:function(vt,Gt){var fr=Math.sqrt(Gt/Tt),Cr=fr/2,Wr=fr*qe,Vr=Cr,Qr=fr*qe+fr,Hr=-Vr,En=Qr;vt.moveTo(Cr,Wr),vt.lineTo(Vr,Qr),vt.lineTo(Hr,En),vt.lineTo(Ae*Cr-Be*Wr,Be*Cr+Ae*Wr),vt.lineTo(Ae*Vr-Be*Qr,Be*Vr+Ae*Qr),vt.lineTo(Ae*Hr-Be*En,Be*Hr+Ae*En),vt.lineTo(Ae*Cr+Be*Wr,Ae*Wr-Be*Cr),vt.lineTo(Ae*Vr+Be*Qr,Ae*Qr-Be*Vr),vt.lineTo(Ae*Hr+Be*En,Ae*En-Be*Hr),vt.closePath()}},Ne=[de,pe,me,Qe,ze,Ce,At];function ct(){var vt=u(de),Gt=u(64),fr=null;function Cr(){var Wr;if(fr||(fr=Wr=a.path()),vt.apply(this,arguments).draw(fr,+Gt.apply(this,arguments)),Wr)return fr=null,Wr+""||null}return Cr.type=function(Wr){return arguments.length?(vt=typeof Wr=="function"?Wr:u(Wr),Cr):vt},Cr.size=function(Wr){return arguments.length?(Gt=typeof Wr=="function"?Wr:u(+Wr),Cr):Gt},Cr.context=function(Wr){return arguments.length?(fr=Wr==null?null:Wr,Cr):fr},Cr}function Mt(){}function Wt(vt,Gt,fr){vt._context.bezierCurveTo((2*vt._x0+vt._x1)/3,(2*vt._y0+vt._y1)/3,(vt._x0+2*vt._x1)/3,(vt._y0+2*vt._y1)/3,(vt._x0+4*vt._x1+Gt)/6,(vt._y0+4*vt._y1+fr)/6)}function qt(vt){this._context=vt}qt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Wt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1,this._line?this._context.lineTo(vt,Gt):this._context.moveTo(vt,Gt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Wt(this,vt,Gt);break}this._x0=this._x1,this._x1=vt,this._y0=this._y1,this._y1=Gt}};function zt(vt){return new qt(vt)}function $t(vt){this._context=vt}$t.prototype={areaStart:Mt,areaEnd:Mt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1,this._x2=vt,this._y2=Gt;break;case 1:this._point=2,this._x3=vt,this._y3=Gt;break;case 2:this._point=3,this._x4=vt,this._y4=Gt,this._context.moveTo((this._x0+4*this._x1+vt)/6,(this._y0+4*this._y1+Gt)/6);break;default:Wt(this,vt,Gt);break}this._x0=this._x1,this._x1=vt,this._y0=this._y1,this._y1=Gt}};function rr(vt){return new $t(vt)}function Lt(vt){this._context=vt}Lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var fr=(this._x0+4*this._x1+vt)/6,Cr=(this._y0+4*this._y1+Gt)/6;this._line?this._context.lineTo(fr,Cr):this._context.moveTo(fr,Cr);break;case 3:this._point=4;default:Wt(this,vt,Gt);break}this._x0=this._x1,this._x1=vt,this._y0=this._y1,this._y1=Gt}};function Ct(vt){return new Lt(vt)}function dt(vt,Gt){this._basis=new qt(vt),this._beta=Gt}dt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var vt=this._x,Gt=this._y,fr=vt.length-1;if(fr>0)for(var Cr=vt[0],Wr=Gt[0],Vr=vt[fr]-Cr,Qr=Gt[fr]-Wr,Hr=-1,En;++Hr<=fr;)En=Hr/fr,this._basis.point(this._beta*vt[Hr]+(1-this._beta)*(Cr+En*Vr),this._beta*Gt[Hr]+(1-this._beta)*(Wr+En*Qr));this._x=this._y=null,this._basis.lineEnd()},point:function(vt,Gt){this._x.push(+vt),this._y.push(+Gt)}};var lt=function vt(Gt){function fr(Cr){return Gt===1?new qt(Cr):new dt(Cr,Gt)}return fr.beta=function(Cr){return vt(+Cr)},fr}(.85);function Te(vt,Gt,fr){vt._context.bezierCurveTo(vt._x1+vt._k*(vt._x2-vt._x0),vt._y1+vt._k*(vt._y2-vt._y0),vt._x2+vt._k*(vt._x1-Gt),vt._y2+vt._k*(vt._y1-fr),vt._x2,vt._y2)}function Le(vt,Gt){this._context=vt,this._k=(1-Gt)/6}Le.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Te(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1,this._line?this._context.lineTo(vt,Gt):this._context.moveTo(vt,Gt);break;case 1:this._point=2,this._x1=vt,this._y1=Gt;break;case 2:this._point=3;default:Te(this,vt,Gt);break}this._x0=this._x1,this._x1=this._x2,this._x2=vt,this._y0=this._y1,this._y1=this._y2,this._y2=Gt}};var Ue=function vt(Gt){function fr(Cr){return new Le(Cr,Gt)}return fr.tension=function(Cr){return vt(+Cr)},fr}(0);function et(vt,Gt){this._context=vt,this._k=(1-Gt)/6}et.prototype={areaStart:Mt,areaEnd:Mt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1,this._x3=vt,this._y3=Gt;break;case 1:this._point=2,this._context.moveTo(this._x4=vt,this._y4=Gt);break;case 2:this._point=3,this._x5=vt,this._y5=Gt;break;default:Te(this,vt,Gt);break}this._x0=this._x1,this._x1=this._x2,this._x2=vt,this._y0=this._y1,this._y1=this._y2,this._y2=Gt}};var ke=function vt(Gt){function fr(Cr){return new et(Cr,Gt)}return fr.tension=function(Cr){return vt(+Cr)},fr}(0);function Ie(vt,Gt){this._context=vt,this._k=(1-Gt)/6}Ie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Te(this,vt,Gt);break}this._x0=this._x1,this._x1=this._x2,this._x2=vt,this._y0=this._y1,this._y1=this._y2,this._y2=Gt}};var He=function vt(Gt){function fr(Cr){return new Ie(Cr,Gt)}return fr.tension=function(Cr){return vt(+Cr)},fr}(0);function Ye(vt,Gt,fr){var Cr=vt._x1,Wr=vt._y1,Vr=vt._x2,Qr=vt._y2;if(vt._l01_a>i){var Hr=2*vt._l01_2a+3*vt._l01_a*vt._l12_a+vt._l12_2a,En=3*vt._l01_a*(vt._l01_a+vt._l12_a);Cr=(Cr*Hr-vt._x0*vt._l12_2a+vt._x2*vt._l01_2a)/En,Wr=(Wr*Hr-vt._y0*vt._l12_2a+vt._y2*vt._l01_2a)/En}if(vt._l23_a>i){var ta=2*vt._l23_2a+3*vt._l23_a*vt._l12_a+vt._l12_2a,ea=3*vt._l23_a*(vt._l23_a+vt._l12_a);Vr=(Vr*ta+vt._x1*vt._l23_2a-Gt*vt._l12_2a)/ea,Qr=(Qr*ta+vt._y1*vt._l23_2a-fr*vt._l12_2a)/ea}vt._context.bezierCurveTo(Cr,Wr,Vr,Qr,vt._x2,vt._y2)}function ft(vt,Gt){this._context=vt,this._alpha=Gt}ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){if(vt=+vt,Gt=+Gt,this._point){var fr=this._x2-vt,Cr=this._y2-Gt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(fr*fr+Cr*Cr,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(vt,Gt):this._context.moveTo(vt,Gt);break;case 1:this._point=2;break;case 2:this._point=3;default:Ye(this,vt,Gt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=vt,this._y0=this._y1,this._y1=this._y2,this._y2=Gt}};var it=function vt(Gt){function fr(Cr){return Gt?new ft(Cr,Gt):new Le(Cr,0)}return fr.alpha=function(Cr){return vt(+Cr)},fr}(.5);function je(vt,Gt){this._context=vt,this._alpha=Gt}je.prototype={areaStart:Mt,areaEnd:Mt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(vt,Gt){if(vt=+vt,Gt=+Gt,this._point){var fr=this._x2-vt,Cr=this._y2-Gt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(fr*fr+Cr*Cr,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=vt,this._y3=Gt;break;case 1:this._point=2,this._context.moveTo(this._x4=vt,this._y4=Gt);break;case 2:this._point=3,this._x5=vt,this._y5=Gt;break;default:Ye(this,vt,Gt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=vt,this._y0=this._y1,this._y1=this._y2,this._y2=Gt}};var ot=function vt(Gt){function fr(Cr){return Gt?new je(Cr,Gt):new et(Cr,0)}return fr.alpha=function(Cr){return vt(+Cr)},fr}(.5);function Je(vt,Gt){this._context=vt,this._alpha=Gt}Je.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){if(vt=+vt,Gt=+Gt,this._point){var fr=this._x2-vt,Cr=this._y2-Gt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(fr*fr+Cr*Cr,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ye(this,vt,Gt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=vt,this._y0=this._y1,this._y1=this._y2,this._y2=Gt}};var st=function vt(Gt){function fr(Cr){return Gt?new Je(Cr,Gt):new Ie(Cr,0)}return fr.alpha=function(Cr){return vt(+Cr)},fr}(.5);function It(vt){this._context=vt}It.prototype={areaStart:Mt,areaEnd:Mt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(vt,Gt){vt=+vt,Gt=+Gt,this._point?this._context.lineTo(vt,Gt):(this._point=1,this._context.moveTo(vt,Gt))}};function Nt(vt){return new It(vt)}function nr(vt){return vt<0?-1:1}function We(vt,Gt,fr){var Cr=vt._x1-vt._x0,Wr=Gt-vt._x1,Vr=(vt._y1-vt._y0)/(Cr||Wr<0&&-0),Qr=(fr-vt._y1)/(Wr||Cr<0&&-0),Hr=(Vr*Wr+Qr*Cr)/(Cr+Wr);return(nr(Vr)+nr(Qr))*Math.min(Math.abs(Vr),Math.abs(Qr),.5*Math.abs(Hr))||0}function Fe(vt,Gt){var fr=vt._x1-vt._x0;return fr?(3*(vt._y1-vt._y0)/fr-Gt)/2:Gt}function bt(vt,Gt,fr){var Cr=vt._x0,Wr=vt._y0,Vr=vt._x1,Qr=vt._y1,Hr=(Vr-Cr)/3;vt._context.bezierCurveTo(Cr+Hr,Wr+Hr*Gt,Vr-Hr,Qr-Hr*fr,Vr,Qr)}function kt(vt){this._context=vt}kt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bt(this,this._t0,Fe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(vt,Gt){var fr=NaN;if(vt=+vt,Gt=+Gt,!(vt===this._x1&&Gt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(vt,Gt):this._context.moveTo(vt,Gt);break;case 1:this._point=2;break;case 2:this._point=3,bt(this,Fe(this,fr=We(this,vt,Gt)),fr);break;default:bt(this,this._t0,fr=We(this,vt,Gt));break}this._x0=this._x1,this._x1=vt,this._y0=this._y1,this._y1=Gt,this._t0=fr}}};function _t(vt){this._context=new Rt(vt)}(_t.prototype=Object.create(kt.prototype)).point=function(vt,Gt){kt.prototype.point.call(this,Gt,vt)};function Rt(vt){this._context=vt}Rt.prototype={moveTo:function(vt,Gt){this._context.moveTo(Gt,vt)},closePath:function(){this._context.closePath()},lineTo:function(vt,Gt){this._context.lineTo(Gt,vt)},bezierCurveTo:function(vt,Gt,fr,Cr,Wr,Vr){this._context.bezierCurveTo(Gt,vt,Cr,fr,Vr,Wr)}};function Dt(vt){return new kt(vt)}function Ut(vt){return new _t(vt)}function Bt(vt){this._context=vt}Bt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var vt=this._x,Gt=this._y,fr=vt.length;if(fr)if(this._line?this._context.lineTo(vt[0],Gt[0]):this._context.moveTo(vt[0],Gt[0]),fr===2)this._context.lineTo(vt[1],Gt[1]);else for(var Cr=tr(vt),Wr=tr(Gt),Vr=0,Qr=1;Qr<fr;++Vr,++Qr)this._context.bezierCurveTo(Cr[0][Vr],Wr[0][Vr],Cr[1][Vr],Wr[1][Vr],vt[Qr],Gt[Qr]);(this._line||this._line!==0&&fr===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(vt,Gt){this._x.push(+vt),this._y.push(+Gt)}};function tr(vt){var Gt,fr=vt.length-1,Cr,Wr=new Array(fr),Vr=new Array(fr),Qr=new Array(fr);for(Wr[0]=0,Vr[0]=2,Qr[0]=vt[0]+2*vt[1],Gt=1;Gt<fr-1;++Gt)Wr[Gt]=1,Vr[Gt]=4,Qr[Gt]=4*vt[Gt]+2*vt[Gt+1];for(Wr[fr-1]=2,Vr[fr-1]=7,Qr[fr-1]=8*vt[fr-1]+vt[fr],Gt=1;Gt<fr;++Gt)Cr=Wr[Gt]/Vr[Gt-1],Vr[Gt]-=Cr,Qr[Gt]-=Cr*Qr[Gt-1];for(Wr[fr-1]=Qr[fr-1]/Vr[fr-1],Gt=fr-2;Gt>=0;--Gt)Wr[Gt]=(Qr[Gt]-Wr[Gt+1])/Vr[Gt];for(Vr[fr-1]=(vt[fr]+Wr[fr-1])/2,Gt=0;Gt<fr-1;++Gt)Vr[Gt]=2*vt[Gt+1]-Wr[Gt+1];return[Wr,Vr]}function er(vt){return new Bt(vt)}function Zt(vt,Gt){this._context=vt,this._t=Gt}Zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(vt,Gt){switch(vt=+vt,Gt=+Gt,this._point){case 0:this._point=1,this._line?this._context.lineTo(vt,Gt):this._context.moveTo(vt,Gt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Gt),this._context.lineTo(vt,Gt);else{var fr=this._x*(1-this._t)+vt*this._t;this._context.lineTo(fr,this._y),this._context.lineTo(fr,Gt)}break}}this._x=vt,this._y=Gt}};function _r(vt){return new Zt(vt,.5)}function Gr(vt){return new Zt(vt,0)}function Or(vt){return new Zt(vt,1)}function Fr(vt,Gt){if((Qr=vt.length)>1)for(var fr=1,Cr,Wr,Vr=vt[Gt[0]],Qr,Hr=Vr.length;fr<Qr;++fr)for(Wr=Vr,Vr=vt[Gt[fr]],Cr=0;Cr<Hr;++Cr)Vr[Cr][1]+=Vr[Cr][0]=isNaN(Wr[Cr][1])?Wr[Cr][0]:Wr[Cr][1]}function Mn(vt){for(var Gt=vt.length,fr=new Array(Gt);--Gt>=0;)fr[Gt]=Gt;return fr}function Wn(vt,Gt){return vt[Gt]}function Tn(){var vt=u([]),Gt=Mn,fr=Fr,Cr=Wn;function Wr(Vr){var Qr=vt.apply(this,arguments),Hr,En=Vr.length,ta=Qr.length,ea=new Array(ta),ba;for(Hr=0;Hr<ta;++Hr){for(var Wa=Qr[Hr],qa=ea[Hr]=new Array(En),dr=0,nn;dr<En;++dr)qa[dr]=nn=[0,+Cr(Vr[dr],Wa,dr,Vr)],nn.data=Vr[dr];qa.key=Wa}for(Hr=0,ba=Gt(ea);Hr<ta;++Hr)ea[ba[Hr]].index=Hr;return fr(ea,ba),ea}return Wr.keys=function(Vr){return arguments.length?(vt=typeof Vr=="function"?Vr:u($.call(Vr)),Wr):vt},Wr.value=function(Vr){return arguments.length?(Cr=typeof Vr=="function"?Vr:u(+Vr),Wr):Cr},Wr.order=function(Vr){return arguments.length?(Gt=Vr==null?Mn:typeof Vr=="function"?Vr:u($.call(Vr)),Wr):Gt},Wr.offset=function(Vr){return arguments.length?(fr=Vr==null?Fr:Vr,Wr):fr},Wr}function Nn(vt,Gt){if((Cr=vt.length)>0){for(var fr,Cr,Wr=0,Vr=vt[0].length,Qr;Wr<Vr;++Wr){for(Qr=fr=0;fr<Cr;++fr)Qr+=vt[fr][Wr][1]||0;if(Qr)for(fr=0;fr<Cr;++fr)vt[fr][Wr][1]/=Qr}Fr(vt,Gt)}}function jn(vt,Gt){if((En=vt.length)>0)for(var fr,Cr=0,Wr,Vr,Qr,Hr,En,ta=vt[Gt[0]].length;Cr<ta;++Cr)for(Qr=Hr=0,fr=0;fr<En;++fr)(Vr=(Wr=vt[Gt[fr]][Cr])[1]-Wr[0])>0?(Wr[0]=Qr,Wr[1]=Qr+=Vr):Vr<0?(Wr[1]=Hr,Wr[0]=Hr+=Vr):(Wr[0]=0,Wr[1]=Vr)}function Nr(vt,Gt){if((Wr=vt.length)>0){for(var fr=0,Cr=vt[Gt[0]],Wr,Vr=Cr.length;fr<Vr;++fr){for(var Qr=0,Hr=0;Qr<Wr;++Qr)Hr+=vt[Qr][fr][1]||0;Cr[fr][1]+=Cr[fr][0]=-Hr/2}Fr(vt,Gt)}}function Pr(vt,Gt){if(!(!((Qr=vt.length)>0)||!((Vr=(Wr=vt[Gt[0]]).length)>0))){for(var fr=0,Cr=1,Wr,Vr,Qr;Cr<Vr;++Cr){for(var Hr=0,En=0,ta=0;Hr<Qr;++Hr){for(var ea=vt[Gt[Hr]],ba=ea[Cr][1]||0,Wa=ea[Cr-1][1]||0,qa=(ba-Wa)/2,dr=0;dr<Hr;++dr){var nn=vt[Gt[dr]],Jr=nn[Cr][1]||0,Pn=nn[Cr-1][1]||0;qa+=Jr-Pn}En+=ba,ta+=qa*ba}Wr[Cr-1][1]+=Wr[Cr-1][0]=fr,En&&(fr-=ta/En)}Wr[Cr-1][1]+=Wr[Cr-1][0]=fr,Fr(vt,Gt)}}function Ln(vt){var Gt=vt.map(pn);return Mn(vt).sort(function(fr,Cr){return Gt[fr]-Gt[Cr]})}function pn(vt){for(var Gt=-1,fr=0,Cr=vt.length,Wr,Vr=-1/0;++Gt<Cr;)(Wr=+vt[Gt][1])>Vr&&(Vr=Wr,fr=Gt);return fr}function xn(vt){var Gt=vt.map(en);return Mn(vt).sort(function(fr,Cr){return Gt[fr]-Gt[Cr]})}function en(vt){for(var Gt=0,fr=-1,Cr=vt.length,Wr;++fr<Cr;)(Wr=+vt[fr][1])&&(Gt+=Wr);return Gt}function _n(vt){return xn(vt).reverse()}function kn(vt){var Gt=vt.length,fr,Cr,Wr=vt.map(en),Vr=Ln(vt),Qr=0,Hr=0,En=[],ta=[];for(fr=0;fr<Gt;++fr)Cr=Vr[fr],Qr<Hr?(Qr+=Wr[Cr],En.push(Cr)):(Hr+=Wr[Cr],ta.push(Cr));return ta.reverse().concat(En)}function ln(vt){return Mn(vt).reverse()}r.arc=L,r.area=F,r.areaRadial=K,r.curveBasis=zt,r.curveBasisClosed=rr,r.curveBasisOpen=Ct,r.curveBundle=lt,r.curveCardinal=Ue,r.curveCardinalClosed=ke,r.curveCardinalOpen=He,r.curveCatmullRom=it,r.curveCatmullRomClosed=ot,r.curveCatmullRomOpen=st,r.curveLinear=E,r.curveLinearClosed=Nt,r.curveMonotoneX=Dt,r.curveMonotoneY=Ut,r.curveNatural=er,r.curveStep=_r,r.curveStepAfter=Or,r.curveStepBefore=Gr,r.line=D,r.lineRadial=V,r.linkHorizontal=ee,r.linkRadial=fe,r.linkVertical=ae,r.pie=U,r.pointRadial=te,r.radialArea=K,r.radialLine=V,r.stack=Tn,r.stackOffsetDiverging=jn,r.stackOffsetExpand=Nn,r.stackOffsetNone=Fr,r.stackOffsetSilhouette=Nr,r.stackOffsetWiggle=Pr,r.stackOrderAppearance=Ln,r.stackOrderAscending=xn,r.stackOrderDescending=_n,r.stackOrderInsideOut=kn,r.stackOrderNone=Mn,r.stackOrderReverse=ln,r.symbol=ct,r.symbolCircle=de,r.symbolCross=pe,r.symbolDiamond=me,r.symbolSquare=Qe,r.symbolStar=ze,r.symbolTriangle=Ce,r.symbolWye=At,r.symbols=Ne,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-path":163}],166:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?a(S,e("d3-time")):(r=r||self,a(r.d3=r.d3||{},r.d3))})(this,function(r,a){function u(dt){if(0<=dt.y&&dt.y<100){var lt=new Date(-1,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L);return lt.setFullYear(dt.y),lt}return new Date(dt.y,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L)}function c(dt){if(0<=dt.y&&dt.y<100){var lt=new Date(Date.UTC(-1,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L));return lt.setUTCFullYear(dt.y),lt}return new Date(Date.UTC(dt.y,dt.m,dt.d,dt.H,dt.M,dt.S,dt.L))}function t(dt,lt,Te){return{y:dt,m:lt,d:Te,H:0,M:0,S:0,L:0}}function f(dt){var lt=dt.dateTime,Te=dt.date,Le=dt.time,Ue=dt.periods,et=dt.days,ke=dt.shortDays,Ie=dt.months,He=dt.shortMonths,Ye=p(Ue),ft=d(Ue),it=p(et),je=d(et),ot=p(ke),Je=d(ke),st=p(Ie),It=d(Ie),Nt=p(He),nr=d(He),We={a:Or,A:Fr,b:Mn,B:Wn,c:null,d:z,e:z,f:te,H:B,I:j,j:V,L:K,m:$,M:ie,p:Tn,q:Nn,Q:ct,s:Mt,S:se,u:Q,U:H,V:oe,w:re,W:ee,x:null,X:null,y:ae,Y:fe,Z:de,"%":Ne},Fe={a:jn,A:Nr,b:Pr,B:Ln,c:null,d:pe,e:pe,f:Me,H:W,I:ue,j:me,L:be,m:Pe,M:Ge,p:pn,q:xn,Q:ct,s:Mt,S:ze,u:Qe,U:tt,V:Ce,w:Ae,W:Be,x:null,X:null,y:qe,Y:Tt,Z:At,"%":Ne},bt={a:Ut,A:Bt,b:tr,B:er,c:Zt,d:I,e:I,f:N,H:k,I:k,j:E,L:F,m:L,M:C,p:Dt,q:P,Q:U,s:X,S:D,u:b,U:m,V:x,w:g,W:w,x:_r,X:Gr,y:T,Y:y,Z:M,"%":G};We.x=kt(Te,We),We.X=kt(Le,We),We.c=kt(lt,We),Fe.x=kt(Te,Fe),Fe.X=kt(Le,Fe),Fe.c=kt(lt,Fe);function kt(en,_n){return function(kn){var ln=[],vt=-1,Gt=0,fr=en.length,Cr,Wr,Vr;for(kn instanceof Date||(kn=new Date(+kn));++vt<fr;)en.charCodeAt(vt)===37&&(ln.push(en.slice(Gt,vt)),(Wr=n[Cr=en.charAt(++vt)])!=null?Cr=en.charAt(++vt):Wr=Cr==="e"?" ":"0",(Vr=_n[Cr])&&(Cr=Vr(kn,Wr)),ln.push(Cr),Gt=vt+1);return ln.push(en.slice(Gt,vt)),ln.join("")}}function _t(en,_n){return function(kn){var ln=t(1900,void 0,1),vt=Rt(ln,en,kn+="",0),Gt,fr;if(vt!=kn.length)return null;if("Q"in ln)return new Date(ln.Q);if("s"in ln)return new Date(ln.s*1e3+("L"in ln?ln.L:0));if(_n&&!("Z"in ln)&&(ln.Z=0),"p"in ln&&(ln.H=ln.H%12+ln.p*12),ln.m===void 0&&(ln.m="q"in ln?ln.q:0),"V"in ln){if(ln.V<1||ln.V>53)return null;"w"in ln||(ln.w=1),"Z"in ln?(Gt=c(t(ln.y,0,1)),fr=Gt.getUTCDay(),Gt=fr>4||fr===0?a.utcMonday.ceil(Gt):a.utcMonday(Gt),Gt=a.utcDay.offset(Gt,(ln.V-1)*7),ln.y=Gt.getUTCFullYear(),ln.m=Gt.getUTCMonth(),ln.d=Gt.getUTCDate()+(ln.w+6)%7):(Gt=u(t(ln.y,0,1)),fr=Gt.getDay(),Gt=fr>4||fr===0?a.timeMonday.ceil(Gt):a.timeMonday(Gt),Gt=a.timeDay.offset(Gt,(ln.V-1)*7),ln.y=Gt.getFullYear(),ln.m=Gt.getMonth(),ln.d=Gt.getDate()+(ln.w+6)%7)}else("W"in ln||"U"in ln)&&("w"in ln||(ln.w="u"in ln?ln.u%7:"W"in ln?1:0),fr="Z"in ln?c(t(ln.y,0,1)).getUTCDay():u(t(ln.y,0,1)).getDay(),ln.m=0,ln.d="W"in ln?(ln.w+6)%7+ln.W*7-(fr+5)%7:ln.w+ln.U*7-(fr+6)%7);return"Z"in ln?(ln.H+=ln.Z/100|0,ln.M+=ln.Z%100,c(ln)):u(ln)}}function Rt(en,_n,kn,ln){for(var vt=0,Gt=_n.length,fr=kn.length,Cr,Wr;vt<Gt;){if(ln>=fr)return-1;if(Cr=_n.charCodeAt(vt++),Cr===37){if(Cr=_n.charAt(vt++),Wr=bt[Cr in n?_n.charAt(vt++):Cr],!Wr||(ln=Wr(en,kn,ln))<0)return-1}else if(Cr!=kn.charCodeAt(ln++))return-1}return ln}function Dt(en,_n,kn){var ln=Ye.exec(_n.slice(kn));return ln?(en.p=ft[ln[0].toLowerCase()],kn+ln[0].length):-1}function Ut(en,_n,kn){var ln=ot.exec(_n.slice(kn));return ln?(en.w=Je[ln[0].toLowerCase()],kn+ln[0].length):-1}function Bt(en,_n,kn){var ln=it.exec(_n.slice(kn));return ln?(en.w=je[ln[0].toLowerCase()],kn+ln[0].length):-1}function tr(en,_n,kn){var ln=Nt.exec(_n.slice(kn));return ln?(en.m=nr[ln[0].toLowerCase()],kn+ln[0].length):-1}function er(en,_n,kn){var ln=st.exec(_n.slice(kn));return ln?(en.m=It[ln[0].toLowerCase()],kn+ln[0].length):-1}function Zt(en,_n,kn){return Rt(en,lt,_n,kn)}function _r(en,_n,kn){return Rt(en,Te,_n,kn)}function Gr(en,_n,kn){return Rt(en,Le,_n,kn)}function Or(en){return ke[en.getDay()]}function Fr(en){return et[en.getDay()]}function Mn(en){return He[en.getMonth()]}function Wn(en){return Ie[en.getMonth()]}function Tn(en){return Ue[+(en.getHours()>=12)]}function Nn(en){return 1+~~(en.getMonth()/3)}function jn(en){return ke[en.getUTCDay()]}function Nr(en){return et[en.getUTCDay()]}function Pr(en){return He[en.getUTCMonth()]}function Ln(en){return Ie[en.getUTCMonth()]}function pn(en){return Ue[+(en.getUTCHours()>=12)]}function xn(en){return 1+~~(en.getUTCMonth()/3)}return{format:function(en){var _n=kt(en+="",We);return _n.toString=function(){return en},_n},parse:function(en){var _n=_t(en+="",!1);return _n.toString=function(){return en},_n},utcFormat:function(en){var _n=kt(en+="",Fe);return _n.toString=function(){return en},_n},utcParse:function(en){var _n=_t(en+="",!0);return _n.toString=function(){return en},_n}}}var n={"-":"",_:" ",0:"0"},o=/^\s*\d+/,l=/^%/,h=/[\\^$*+?|[\]().{}]/g;function i(dt,lt,Te){var Le=dt<0?"-":"",Ue=(Le?-dt:dt)+"",et=Ue.length;return Le+(et<Te?new Array(Te-et+1).join(lt)+Ue:Ue)}function s(dt){return dt.replace(h,"\\$&")}function p(dt){return new RegExp("^(?:"+dt.map(s).join("|")+")","i")}function d(dt){for(var lt={},Te=-1,Le=dt.length;++Te<Le;)lt[dt[Te].toLowerCase()]=Te;return lt}function g(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+1));return Le?(dt.w=+Le[0],Te+Le[0].length):-1}function b(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+1));return Le?(dt.u=+Le[0],Te+Le[0].length):-1}function m(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.U=+Le[0],Te+Le[0].length):-1}function x(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.V=+Le[0],Te+Le[0].length):-1}function w(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.W=+Le[0],Te+Le[0].length):-1}function y(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+4));return Le?(dt.y=+Le[0],Te+Le[0].length):-1}function T(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.y=+Le[0]+(+Le[0]>68?1900:2e3),Te+Le[0].length):-1}function M(dt,lt,Te){var Le=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(lt.slice(Te,Te+6));return Le?(dt.Z=Le[1]?0:-(Le[2]+(Le[3]||"00")),Te+Le[0].length):-1}function P(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+1));return Le?(dt.q=Le[0]*3-3,Te+Le[0].length):-1}function L(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.m=Le[0]-1,Te+Le[0].length):-1}function I(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.d=+Le[0],Te+Le[0].length):-1}function E(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+3));return Le?(dt.m=0,dt.d=+Le[0],Te+Le[0].length):-1}function k(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.H=+Le[0],Te+Le[0].length):-1}function C(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.M=+Le[0],Te+Le[0].length):-1}function D(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+2));return Le?(dt.S=+Le[0],Te+Le[0].length):-1}function F(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+3));return Le?(dt.L=+Le[0],Te+Le[0].length):-1}function N(dt,lt,Te){var Le=o.exec(lt.slice(Te,Te+6));return Le?(dt.L=Math.floor(Le[0]/1e3),Te+Le[0].length):-1}function G(dt,lt,Te){var Le=l.exec(lt.slice(Te,Te+1));return Le?Te+Le[0].length:-1}function U(dt,lt,Te){var Le=o.exec(lt.slice(Te));return Le?(dt.Q=+Le[0],Te+Le[0].length):-1}function X(dt,lt,Te){var Le=o.exec(lt.slice(Te));return Le?(dt.s=+Le[0],Te+Le[0].length):-1}function z(dt,lt){return i(dt.getDate(),lt,2)}function B(dt,lt){return i(dt.getHours(),lt,2)}function j(dt,lt){return i(dt.getHours()%12||12,lt,2)}function V(dt,lt){return i(1+a.timeDay.count(a.timeYear(dt),dt),lt,3)}function K(dt,lt){return i(dt.getMilliseconds(),lt,3)}function te(dt,lt){return K(dt,lt)+"000"}function $(dt,lt){return i(dt.getMonth()+1,lt,2)}function ie(dt,lt){return i(dt.getMinutes(),lt,2)}function se(dt,lt){return i(dt.getSeconds(),lt,2)}function Q(dt){var lt=dt.getDay();return lt===0?7:lt}function H(dt,lt){return i(a.timeSunday.count(a.timeYear(dt)-1,dt),lt,2)}function oe(dt,lt){var Te=dt.getDay();return dt=Te>=4||Te===0?a.timeThursday(dt):a.timeThursday.ceil(dt),i(a.timeThursday.count(a.timeYear(dt),dt)+(a.timeYear(dt).getDay()===4),lt,2)}function re(dt){return dt.getDay()}function ee(dt,lt){return i(a.timeMonday.count(a.timeYear(dt)-1,dt),lt,2)}function ae(dt,lt){return i(dt.getFullYear()%100,lt,2)}function fe(dt,lt){return i(dt.getFullYear()%1e4,lt,4)}function de(dt){var lt=dt.getTimezoneOffset();return(lt>0?"-":(lt*=-1,"+"))+i(lt/60|0,"0",2)+i(lt%60,"0",2)}function pe(dt,lt){return i(dt.getUTCDate(),lt,2)}function W(dt,lt){return i(dt.getUTCHours(),lt,2)}function ue(dt,lt){return i(dt.getUTCHours()%12||12,lt,2)}function me(dt,lt){return i(1+a.utcDay.count(a.utcYear(dt),dt),lt,3)}function be(dt,lt){return i(dt.getUTCMilliseconds(),lt,3)}function Me(dt,lt){return be(dt,lt)+"000"}function Pe(dt,lt){return i(dt.getUTCMonth()+1,lt,2)}function Ge(dt,lt){return i(dt.getUTCMinutes(),lt,2)}function ze(dt,lt){return i(dt.getUTCSeconds(),lt,2)}function Qe(dt){var lt=dt.getUTCDay();return lt===0?7:lt}function tt(dt,lt){return i(a.utcSunday.count(a.utcYear(dt)-1,dt),lt,2)}function Ce(dt,lt){var Te=dt.getUTCDay();return dt=Te>=4||Te===0?a.utcThursday(dt):a.utcThursday.ceil(dt),i(a.utcThursday.count(a.utcYear(dt),dt)+(a.utcYear(dt).getUTCDay()===4),lt,2)}function Ae(dt){return dt.getUTCDay()}function Be(dt,lt){return i(a.utcMonday.count(a.utcYear(dt)-1,dt),lt,2)}function qe(dt,lt){return i(dt.getUTCFullYear()%100,lt,2)}function Tt(dt,lt){return i(dt.getUTCFullYear()%1e4,lt,4)}function At(){return"+0000"}function Ne(){return"%"}function ct(dt){return+dt}function Mt(dt){return Math.floor(+dt/1e3)}var Wt;qt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function qt(dt){return Wt=f(dt),r.timeFormat=Wt.format,r.timeParse=Wt.parse,r.utcFormat=Wt.utcFormat,r.utcParse=Wt.utcParse,Wt}var zt="%Y-%m-%dT%H:%M:%S.%LZ";function $t(dt){return dt.toISOString()}var rr=Date.prototype.toISOString?$t:r.utcFormat(zt);function Lt(dt){var lt=new Date(dt);return isNaN(lt)?null:lt}var Ct=+new Date("2000-01-01T00:00:00.000Z")?Lt:r.utcParse(zt);r.isoFormat=rr,r.isoParse=Ct,r.timeFormatDefaultLocale=qt,r.timeFormatLocale=f,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-time":167}],167:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?a(S):(r=r||self,a(r.d3=r.d3||{}))})(this,function(r){var a=new Date,u=new Date;function c(Ae,Be,qe,Tt){function At(Ne){return Ae(Ne=arguments.length===0?new Date:new Date(+Ne)),Ne}return At.floor=function(Ne){return Ae(Ne=new Date(+Ne)),Ne},At.ceil=function(Ne){return Ae(Ne=new Date(Ne-1)),Be(Ne,1),Ae(Ne),Ne},At.round=function(Ne){var ct=At(Ne),Mt=At.ceil(Ne);return Ne-ct<Mt-Ne?ct:Mt},At.offset=function(Ne,ct){return Be(Ne=new Date(+Ne),ct==null?1:Math.floor(ct)),Ne},At.range=function(Ne,ct,Mt){var Wt=[],qt;if(Ne=At.ceil(Ne),Mt=Mt==null?1:Math.floor(Mt),!(Ne<ct)||!(Mt>0))return Wt;do Wt.push(qt=new Date(+Ne)),Be(Ne,Mt),Ae(Ne);while(qt<Ne&&Ne<ct);return Wt},At.filter=function(Ne){return c(function(ct){if(ct>=ct)for(;Ae(ct),!Ne(ct);)ct.setTime(ct-1)},function(ct,Mt){if(ct>=ct)if(Mt<0)for(;++Mt<=0;)for(;Be(ct,-1),!Ne(ct););else for(;--Mt>=0;)for(;Be(ct,1),!Ne(ct););})},qe&&(At.count=function(Ne,ct){return a.setTime(+Ne),u.setTime(+ct),Ae(a),Ae(u),Math.floor(qe(a,u))},At.every=function(Ne){return Ne=Math.floor(Ne),!isFinite(Ne)||!(Ne>0)?null:Ne>1?At.filter(Tt?function(ct){return Tt(ct)%Ne===0}:function(ct){return At.count(0,ct)%Ne===0}):At}),At}var t=c(function(){},function(Ae,Be){Ae.setTime(+Ae+Be)},function(Ae,Be){return Be-Ae});t.every=function(Ae){return Ae=Math.floor(Ae),!isFinite(Ae)||!(Ae>0)?null:Ae>1?c(function(Be){Be.setTime(Math.floor(Be/Ae)*Ae)},function(Be,qe){Be.setTime(+Be+qe*Ae)},function(Be,qe){return(qe-Be)/Ae}):t};var f=t.range,n=1e3,o=6e4,l=36e5,h=864e5,i=6048e5,s=c(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds())},function(Ae,Be){Ae.setTime(+Ae+Be*n)},function(Ae,Be){return(Be-Ae)/n},function(Ae){return Ae.getUTCSeconds()}),p=s.range,d=c(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-Ae.getSeconds()*n)},function(Ae,Be){Ae.setTime(+Ae+Be*o)},function(Ae,Be){return(Be-Ae)/o},function(Ae){return Ae.getMinutes()}),g=d.range,b=c(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-Ae.getSeconds()*n-Ae.getMinutes()*o)},function(Ae,Be){Ae.setTime(+Ae+Be*l)},function(Ae,Be){return(Be-Ae)/l},function(Ae){return Ae.getHours()}),m=b.range,x=c(function(Ae){Ae.setHours(0,0,0,0)},function(Ae,Be){Ae.setDate(Ae.getDate()+Be)},function(Ae,Be){return(Be-Ae-(Be.getTimezoneOffset()-Ae.getTimezoneOffset())*o)/h},function(Ae){return Ae.getDate()-1}),w=x.range;function y(Ae){return c(function(Be){Be.setDate(Be.getDate()-(Be.getDay()+7-Ae)%7),Be.setHours(0,0,0,0)},function(Be,qe){Be.setDate(Be.getDate()+qe*7)},function(Be,qe){return(qe-Be-(qe.getTimezoneOffset()-Be.getTimezoneOffset())*o)/i})}var T=y(0),M=y(1),P=y(2),L=y(3),I=y(4),E=y(5),k=y(6),C=T.range,D=M.range,F=P.range,N=L.range,G=I.range,U=E.range,X=k.range,z=c(function(Ae){Ae.setDate(1),Ae.setHours(0,0,0,0)},function(Ae,Be){Ae.setMonth(Ae.getMonth()+Be)},function(Ae,Be){return Be.getMonth()-Ae.getMonth()+(Be.getFullYear()-Ae.getFullYear())*12},function(Ae){return Ae.getMonth()}),B=z.range,j=c(function(Ae){Ae.setMonth(0,1),Ae.setHours(0,0,0,0)},function(Ae,Be){Ae.setFullYear(Ae.getFullYear()+Be)},function(Ae,Be){return Be.getFullYear()-Ae.getFullYear()},function(Ae){return Ae.getFullYear()});j.every=function(Ae){return!isFinite(Ae=Math.floor(Ae))||!(Ae>0)?null:c(function(Be){Be.setFullYear(Math.floor(Be.getFullYear()/Ae)*Ae),Be.setMonth(0,1),Be.setHours(0,0,0,0)},function(Be,qe){Be.setFullYear(Be.getFullYear()+qe*Ae)})};var V=j.range,K=c(function(Ae){Ae.setUTCSeconds(0,0)},function(Ae,Be){Ae.setTime(+Ae+Be*o)},function(Ae,Be){return(Be-Ae)/o},function(Ae){return Ae.getUTCMinutes()}),te=K.range,$=c(function(Ae){Ae.setUTCMinutes(0,0,0)},function(Ae,Be){Ae.setTime(+Ae+Be*l)},function(Ae,Be){return(Be-Ae)/l},function(Ae){return Ae.getUTCHours()}),ie=$.range,se=c(function(Ae){Ae.setUTCHours(0,0,0,0)},function(Ae,Be){Ae.setUTCDate(Ae.getUTCDate()+Be)},function(Ae,Be){return(Be-Ae)/h},function(Ae){return Ae.getUTCDate()-1}),Q=se.range;function H(Ae){return c(function(Be){Be.setUTCDate(Be.getUTCDate()-(Be.getUTCDay()+7-Ae)%7),Be.setUTCHours(0,0,0,0)},function(Be,qe){Be.setUTCDate(Be.getUTCDate()+qe*7)},function(Be,qe){return(qe-Be)/i})}var oe=H(0),re=H(1),ee=H(2),ae=H(3),fe=H(4),de=H(5),pe=H(6),W=oe.range,ue=re.range,me=ee.range,be=ae.range,Me=fe.range,Pe=de.range,Ge=pe.range,ze=c(function(Ae){Ae.setUTCDate(1),Ae.setUTCHours(0,0,0,0)},function(Ae,Be){Ae.setUTCMonth(Ae.getUTCMonth()+Be)},function(Ae,Be){return Be.getUTCMonth()-Ae.getUTCMonth()+(Be.getUTCFullYear()-Ae.getUTCFullYear())*12},function(Ae){return Ae.getUTCMonth()}),Qe=ze.range,tt=c(function(Ae){Ae.setUTCMonth(0,1),Ae.setUTCHours(0,0,0,0)},function(Ae,Be){Ae.setUTCFullYear(Ae.getUTCFullYear()+Be)},function(Ae,Be){return Be.getUTCFullYear()-Ae.getUTCFullYear()},function(Ae){return Ae.getUTCFullYear()});tt.every=function(Ae){return!isFinite(Ae=Math.floor(Ae))||!(Ae>0)?null:c(function(Be){Be.setUTCFullYear(Math.floor(Be.getUTCFullYear()/Ae)*Ae),Be.setUTCMonth(0,1),Be.setUTCHours(0,0,0,0)},function(Be,qe){Be.setUTCFullYear(Be.getUTCFullYear()+qe*Ae)})};var Ce=tt.range;r.timeDay=x,r.timeDays=w,r.timeFriday=E,r.timeFridays=U,r.timeHour=b,r.timeHours=m,r.timeInterval=c,r.timeMillisecond=t,r.timeMilliseconds=f,r.timeMinute=d,r.timeMinutes=g,r.timeMonday=M,r.timeMondays=D,r.timeMonth=z,r.timeMonths=B,r.timeSaturday=k,r.timeSaturdays=X,r.timeSecond=s,r.timeSeconds=p,r.timeSunday=T,r.timeSundays=C,r.timeThursday=I,r.timeThursdays=G,r.timeTuesday=P,r.timeTuesdays=F,r.timeWednesday=L,r.timeWednesdays=N,r.timeWeek=T,r.timeWeeks=C,r.timeYear=j,r.timeYears=V,r.utcDay=se,r.utcDays=Q,r.utcFriday=de,r.utcFridays=Pe,r.utcHour=$,r.utcHours=ie,r.utcMillisecond=t,r.utcMilliseconds=f,r.utcMinute=K,r.utcMinutes=te,r.utcMonday=re,r.utcMondays=ue,r.utcMonth=ze,r.utcMonths=Qe,r.utcSaturday=pe,r.utcSaturdays=Ge,r.utcSecond=s,r.utcSeconds=p,r.utcSunday=oe,r.utcSundays=W,r.utcThursday=fe,r.utcThursdays=Me,r.utcTuesday=ee,r.utcTuesdays=me,r.utcWednesday=ae,r.utcWednesdays=be,r.utcWeek=oe,r.utcWeeks=W,r.utcYear=tt,r.utcYears=Ce,Object.defineProperty(r,"__esModule",{value:!0})})},{}],168:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?a(S):(r=r||self,a(r.d3=r.d3||{}))})(this,function(r){var a=0,u=0,c=0,t=1e3,f,n,o=0,l=0,h=0,i=typeof performance=="object"&&performance.now?performance:Date,s=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(L){setTimeout(L,17)};function p(){return l||(s(d),l=i.now()+h)}function d(){l=0}function g(){this._call=this._time=this._next=null}g.prototype=b.prototype={constructor:g,restart:function(L,I,E){if(typeof L!="function")throw new TypeError("callback is not a function");E=(E==null?p():+E)+(I==null?0:+I),!this._next&&n!==this&&(n?n._next=this:f=this,n=this),this._call=L,this._time=E,T()},stop:function(){this._call&&(this._call=null,this._time=1/0,T())}};function b(L,I,E){var k=new g;return k.restart(L,I,E),k}function m(){p(),++a;for(var L=f,I;L;)(I=l-L._time)>=0&&L._call.call(null,I),L=L._next;--a}function x(){l=(o=i.now())+h,a=u=0;try{m()}finally{a=0,y(),l=0}}function w(){var L=i.now(),I=L-o;I>t&&(h-=I,o=L)}function y(){for(var L,I=f,E,k=1/0;I;)I._call?(k>I._time&&(k=I._time),L=I,I=I._next):(E=I._next,I._next=null,I=L?L._next=E:f=E);n=L,T(k)}function T(L){if(!a){u&&(u=clearTimeout(u));var I=L-l;I>24?(L<1/0&&(u=setTimeout(x,L-i.now()-h)),c&&(c=clearInterval(c))):(c||(o=i.now(),c=setInterval(w,t)),a=1,s(x))}}function M(L,I,E){var k=new g;return I=I==null?0:+I,k.restart(function(C){k.stop(),L(C+I)},I,E),k}function P(L,I,E){var k=new g,C=I;return I==null?(k.restart(L,I,E),k):(I=+I,E=E==null?p():+E,k.restart(function D(F){F+=C,k.restart(D,C+=I,E),L(F)},I,E),k)}r.interval=P,r.now=p,r.timeout=M,r.timer=b,r.timerFlush=m,Object.defineProperty(r,"__esModule",{value:!0})})},{}],169:[function(e,v,S){(function(){var r={version:"3.5.17"},a=[].slice,u=function(Y){return a.call(Y)},c=this.document;function t(Y){return Y&&(Y.ownerDocument||Y.document||Y).documentElement}function f(Y){return Y&&(Y.ownerDocument&&Y.ownerDocument.defaultView||Y.document&&Y||Y.defaultView)}if(c)try{u(c.documentElement.childNodes)[0].nodeType}catch{u=function(he){for(var ye=he.length,_e=new Array(ye);ye--;)_e[ye]=he[ye];return _e}}if(Date.now||(Date.now=function(){return+new Date}),c)try{c.createElement("DIV").style.setProperty("opacity",0,"")}catch{var n=this.Element.prototype,o=n.setAttribute,l=n.setAttributeNS,h=this.CSSStyleDeclaration.prototype,i=h.setProperty;n.setAttribute=function(he,ye){o.call(this,he,ye+"")},n.setAttributeNS=function(he,ye,_e){l.call(this,he,ye,_e+"")},h.setProperty=function(he,ye,_e){i.call(this,he,ye+"",_e)}}r.ascending=s;function s(Y,he){return Y<he?-1:Y>he?1:Y>=he?0:NaN}r.descending=function(Y,he){return he<Y?-1:he>Y?1:he>=Y?0:NaN},r.min=function(Y,he){var ye=-1,_e=Y.length,Ee,Re;if(arguments.length===1){for(;++ye<_e;)if((Re=Y[ye])!=null&&Re>=Re){Ee=Re;break}for(;++ye<_e;)(Re=Y[ye])!=null&&Ee>Re&&(Ee=Re)}else{for(;++ye<_e;)if((Re=he.call(Y,Y[ye],ye))!=null&&Re>=Re){Ee=Re;break}for(;++ye<_e;)(Re=he.call(Y,Y[ye],ye))!=null&&Ee>Re&&(Ee=Re)}return Ee},r.max=function(Y,he){var ye=-1,_e=Y.length,Ee,Re;if(arguments.length===1){for(;++ye<_e;)if((Re=Y[ye])!=null&&Re>=Re){Ee=Re;break}for(;++ye<_e;)(Re=Y[ye])!=null&&Re>Ee&&(Ee=Re)}else{for(;++ye<_e;)if((Re=he.call(Y,Y[ye],ye))!=null&&Re>=Re){Ee=Re;break}for(;++ye<_e;)(Re=he.call(Y,Y[ye],ye))!=null&&Re>Ee&&(Ee=Re)}return Ee},r.extent=function(Y,he){var ye=-1,_e=Y.length,Ee,Re,rt;if(arguments.length===1){for(;++ye<_e;)if((Re=Y[ye])!=null&&Re>=Re){Ee=rt=Re;break}for(;++ye<_e;)(Re=Y[ye])!=null&&(Ee>Re&&(Ee=Re),rt<Re&&(rt=Re))}else{for(;++ye<_e;)if((Re=he.call(Y,Y[ye],ye))!=null&&Re>=Re){Ee=rt=Re;break}for(;++ye<_e;)(Re=he.call(Y,Y[ye],ye))!=null&&(Ee>Re&&(Ee=Re),rt<Re&&(rt=Re))}return[Ee,rt]};function p(Y){return Y===null?NaN:+Y}function d(Y){return!isNaN(Y)}r.sum=function(Y,he){var ye=0,_e=Y.length,Ee,Re=-1;if(arguments.length===1)for(;++Re<_e;)d(Ee=+Y[Re])&&(ye+=Ee);else for(;++Re<_e;)d(Ee=+he.call(Y,Y[Re],Re))&&(ye+=Ee);return ye},r.mean=function(Y,he){var ye=0,_e=Y.length,Ee,Re=-1,rt=_e;if(arguments.length===1)for(;++Re<_e;)d(Ee=p(Y[Re]))?ye+=Ee:--rt;else for(;++Re<_e;)d(Ee=p(he.call(Y,Y[Re],Re)))?ye+=Ee:--rt;if(rt)return ye/rt},r.quantile=function(Y,he){var ye=(Y.length-1)*he+1,_e=Math.floor(ye),Ee=+Y[_e-1],Re=ye-_e;return Re?Ee+Re*(Y[_e]-Ee):Ee},r.median=function(Y,he){var ye=[],_e=Y.length,Ee,Re=-1;if(arguments.length===1)for(;++Re<_e;)d(Ee=p(Y[Re]))&&ye.push(Ee);else for(;++Re<_e;)d(Ee=p(he.call(Y,Y[Re],Re)))&&ye.push(Ee);if(ye.length)return r.quantile(ye.sort(s),.5)},r.variance=function(Y,he){var ye=Y.length,_e=0,Ee,Re,rt=0,Ke=-1,at=0;if(arguments.length===1)for(;++Ke<ye;)d(Ee=p(Y[Ke]))&&(Re=Ee-_e,_e+=Re/++at,rt+=Re*(Ee-_e));else for(;++Ke<ye;)d(Ee=p(he.call(Y,Y[Ke],Ke)))&&(Re=Ee-_e,_e+=Re/++at,rt+=Re*(Ee-_e));if(at>1)return rt/(at-1)},r.deviation=function(){var Y=r.variance.apply(this,arguments);return Y&&Math.sqrt(Y)};function g(Y){return{left:function(he,ye,_e,Ee){for(arguments.length<3&&(_e=0),arguments.length<4&&(Ee=he.length);_e<Ee;){var Re=_e+Ee>>>1;Y(he[Re],ye)<0?_e=Re+1:Ee=Re}return _e},right:function(he,ye,_e,Ee){for(arguments.length<3&&(_e=0),arguments.length<4&&(Ee=he.length);_e<Ee;){var Re=_e+Ee>>>1;Y(he[Re],ye)>0?Ee=Re:_e=Re+1}return _e}}}var b=g(s);r.bisectLeft=b.left,r.bisect=r.bisectRight=b.right,r.bisector=function(Y){return g(Y.length===1?function(he,ye){return s(Y(he),ye)}:Y)},r.shuffle=function(Y,he,ye){(_e=arguments.length)<3&&(ye=Y.length,_e<2&&(he=0));for(var _e=ye-he,Ee,Re;_e;)Re=Math.random()*_e--|0,Ee=Y[_e+he],Y[_e+he]=Y[Re+he],Y[Re+he]=Ee;return Y},r.permute=function(Y,he){for(var ye=he.length,_e=new Array(ye);ye--;)_e[ye]=Y[he[ye]];return _e},r.pairs=function(Y){for(var he=0,ye=Y.length-1,_e=Y[0],Ee=new Array(ye<0?0:ye);he<ye;)Ee[he]=[_e,_e=Y[++he]];return Ee},r.transpose=function(Y){if(!(Re=Y.length))return[];for(var he=-1,ye=r.min(Y,m),_e=new Array(ye);++he<ye;)for(var Ee=-1,Re,rt=_e[he]=new Array(Re);++Ee<Re;)rt[Ee]=Y[Ee][he];return _e};function m(Y){return Y.length}r.zip=function(){return r.transpose(arguments)},r.keys=function(Y){var he=[];for(var ye in Y)he.push(ye);return he},r.values=function(Y){var he=[];for(var ye in Y)he.push(Y[ye]);return he},r.entries=function(Y){var he=[];for(var ye in Y)he.push({key:ye,value:Y[ye]});return he},r.merge=function(Y){for(var he=Y.length,ye,_e=-1,Ee=0,Re,rt;++_e<he;)Ee+=Y[_e].length;for(Re=new Array(Ee);--he>=0;)for(rt=Y[he],ye=rt.length;--ye>=0;)Re[--Ee]=rt[ye];return Re};var x=Math.abs;r.range=function(Y,he,ye){if(arguments.length<3&&(ye=1,arguments.length<2&&(he=Y,Y=0)),(he-Y)/ye===1/0)throw new Error("infinite range");var _e=[],Ee=w(x(ye)),Re=-1,rt;if(Y*=Ee,he*=Ee,ye*=Ee,ye<0)for(;(rt=Y+ye*++Re)>he;)_e.push(rt/Ee);else for(;(rt=Y+ye*++Re)<he;)_e.push(rt/Ee);return _e};function w(Y){for(var he=1;Y*he%1;)he*=10;return he}function y(Y,he){for(var ye in he)Object.defineProperty(Y.prototype,ye,{value:he[ye],enumerable:!1})}r.map=function(Y,he){var ye=new T;if(Y instanceof T)Y.forEach(function(Ke,at){ye.set(Ke,at)});else if(Array.isArray(Y)){var _e=-1,Ee=Y.length,Re;if(arguments.length===1)for(;++_e<Ee;)ye.set(_e,Y[_e]);else for(;++_e<Ee;)ye.set(he.call(Y,Re=Y[_e],_e),Re)}else for(var rt in Y)ye.set(rt,Y[rt]);return ye};function T(){this._=Object.create(null)}var M="__proto__",P="\0";y(T,{has:E,get:function(Y){return this._[L(Y)]},set:function(Y,he){return this._[L(Y)]=he},remove:k,keys:C,values:function(){var Y=[];for(var he in this._)Y.push(this._[he]);return Y},entries:function(){var Y=[];for(var he in this._)Y.push({key:I(he),value:this._[he]});return Y},size:D,empty:F,forEach:function(Y){for(var he in this._)Y.call(this,I(he),this._[he])}});function L(Y){return(Y+="")===M||Y[0]===P?P+Y:Y}function I(Y){return(Y+="")[0]===P?Y.slice(1):Y}function E(Y){return L(Y)in this._}function k(Y){return(Y=L(Y))in this._&&delete this._[Y]}function C(){var Y=[];for(var he in this._)Y.push(I(he));return Y}function D(){var Y=0;for(var he in this._)++Y;return Y}function F(){for(var Y in this._)return!1;return!0}r.nest=function(){var Y={},he=[],ye=[],_e,Ee;function Re(Ke,at,mt){if(mt>=he.length)return Ee?Ee.call(Y,at):_e?at.sort(_e):at;for(var wt=-1,Vt=at.length,Yt=he[mt++],cr,Rr,ir,hr=new T,vr;++wt<Vt;)(vr=hr.get(cr=Yt(Rr=at[wt])))?vr.push(Rr):hr.set(cr,[Rr]);return Ke?(Rr=Ke(),ir=function(Ir,gr){Rr.set(Ir,Re(Ke,gr,mt))}):(Rr={},ir=function(Ir,gr){Rr[Ir]=Re(Ke,gr,mt)}),hr.forEach(ir),Rr}function rt(Ke,at){if(at>=he.length)return Ke;var mt=[],wt=ye[at++];return Ke.forEach(function(Vt,Yt){mt.push({key:Vt,values:rt(Yt,at)})}),wt?mt.sort(function(Vt,Yt){return wt(Vt.key,Yt.key)}):mt}return Y.map=function(Ke,at){return Re(at,Ke,0)},Y.entries=function(Ke){return rt(Re(r.map,Ke,0),0)},Y.key=function(Ke){return he.push(Ke),Y},Y.sortKeys=function(Ke){return ye[he.length-1]=Ke,Y},Y.sortValues=function(Ke){return _e=Ke,Y},Y.rollup=function(Ke){return Ee=Ke,Y},Y},r.set=function(Y){var he=new N;if(Y)for(var ye=0,_e=Y.length;ye<_e;++ye)he.add(Y[ye]);return he};function N(){this._=Object.create(null)}y(N,{has:E,add:function(Y){return this._[L(Y+="")]=!0,Y},remove:k,values:C,size:D,empty:F,forEach:function(Y){for(var he in this._)Y.call(this,I(he))}}),r.behavior={};function G(Y){return Y}r.rebind=function(Y,he){for(var ye=1,_e=arguments.length,Ee;++ye<_e;)Y[Ee=arguments[ye]]=U(Y,he,he[Ee]);return Y};function U(Y,he,ye){return function(){var _e=ye.apply(he,arguments);return _e===he?Y:_e}}function X(Y,he){if(he in Y)return he;he=he.charAt(0).toUpperCase()+he.slice(1);for(var ye=0,_e=z.length;ye<_e;++ye){var Ee=z[ye]+he;if(Ee in Y)return Ee}}var z=["webkit","ms","moz","Moz","o","O"];function B(){}r.dispatch=function(){for(var Y=new j,he=-1,ye=arguments.length;++he<ye;)Y[arguments[he]]=V(Y);return Y};function j(){}j.prototype.on=function(Y,he){var ye=Y.indexOf("."),_e="";if(ye>=0&&(_e=Y.slice(ye+1),Y=Y.slice(0,ye)),Y)return arguments.length<2?this[Y].on(_e):this[Y].on(_e,he);if(arguments.length===2){if(he==null)for(Y in this)this.hasOwnProperty(Y)&&this[Y].on(_e,null);return this}};function V(Y){var he=[],ye=new T;function _e(){for(var Ee=he,Re=-1,rt=Ee.length,Ke;++Re<rt;)(Ke=Ee[Re].on)&&Ke.apply(this,arguments);return Y}return _e.on=function(Ee,Re){var rt=ye.get(Ee),Ke;return arguments.length<2?rt&&rt.on:(rt&&(rt.on=null,he=he.slice(0,Ke=he.indexOf(rt)).concat(he.slice(Ke+1)),ye.remove(Ee)),Re&&he.push(ye.set(Ee,{on:Re})),Y)},_e}r.event=null;function K(){r.event.preventDefault()}function te(){for(var Y=r.event,he;he=Y.sourceEvent;)Y=he;return Y}function $(Y){for(var he=new j,ye=0,_e=arguments.length;++ye<_e;)he[arguments[ye]]=V(he);return he.of=function(Ee,Re){return function(rt){try{var Ke=rt.sourceEvent=r.event;rt.target=Y,r.event=rt,he[rt.type].apply(Ee,Re)}finally{r.event=Ke}}},he}r.requote=function(Y){return Y.replace(ie,"\\$&")};var ie=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,se={}.__proto__?function(Y,he){Y.__proto__=he}:function(Y,he){for(var ye in he)Y[ye]=he[ye]};function Q(Y){return se(Y,ee),Y}var H=function(Y,he){return he.querySelector(Y)},oe=function(Y,he){return he.querySelectorAll(Y)},re=function(Y,he){var ye=Y.matches||Y[X(Y,"matchesSelector")];return re=function(_e,Ee){return ye.call(_e,Ee)},re(Y,he)};typeof Sizzle=="function"&&(H=function(Y,he){return Sizzle(Y,he)[0]||null},oe=Sizzle,re=Sizzle.matchesSelector),r.selection=function(){return r.select(c.documentElement)};var ee=r.selection.prototype=[];ee.select=function(Y){var he=[],ye,_e,Ee,Re;Y=ae(Y);for(var rt=-1,Ke=this.length;++rt<Ke;){he.push(ye=[]),ye.parentNode=(Ee=this[rt]).parentNode;for(var at=-1,mt=Ee.length;++at<mt;)(Re=Ee[at])?(ye.push(_e=Y.call(Re,Re.__data__,at,rt)),_e&&"__data__"in Re&&(_e.__data__=Re.__data__)):ye.push(null)}return Q(he)};function ae(Y){return typeof Y=="function"?Y:function(){return H(Y,this)}}ee.selectAll=function(Y){var he=[],ye,_e;Y=fe(Y);for(var Ee=-1,Re=this.length;++Ee<Re;)for(var rt=this[Ee],Ke=-1,at=rt.length;++Ke<at;)(_e=rt[Ke])&&(he.push(ye=u(Y.call(_e,_e.__data__,Ke,Ee))),ye.parentNode=_e);return Q(he)};function fe(Y){return typeof Y=="function"?Y:function(){return oe(Y,this)}}var de="http://www.w3.org/1999/xhtml",pe={svg:"http://www.w3.org/2000/svg",xhtml:de,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};r.ns={prefix:pe,qualify:function(Y){var he=Y.indexOf(":"),ye=Y;return he>=0&&(ye=Y.slice(0,he))!=="xmlns"&&(Y=Y.slice(he+1)),pe.hasOwnProperty(ye)?{space:pe[ye],local:Y}:Y}},ee.attr=function(Y,he){if(arguments.length<2){if(typeof Y=="string"){var ye=this.node();return Y=r.ns.qualify(Y),Y.local?ye.getAttributeNS(Y.space,Y.local):ye.getAttribute(Y)}for(he in Y)this.each(W(he,Y[he]));return this}return this.each(W(Y,he))};function W(Y,he){Y=r.ns.qualify(Y);function ye(){this.removeAttribute(Y)}function _e(){this.removeAttributeNS(Y.space,Y.local)}function Ee(){this.setAttribute(Y,he)}function Re(){this.setAttributeNS(Y.space,Y.local,he)}function rt(){var at=he.apply(this,arguments);at==null?this.removeAttribute(Y):this.setAttribute(Y,at)}function Ke(){var at=he.apply(this,arguments);at==null?this.removeAttributeNS(Y.space,Y.local):this.setAttributeNS(Y.space,Y.local,at)}return he==null?Y.local?_e:ye:typeof he=="function"?Y.local?Ke:rt:Y.local?Re:Ee}function ue(Y){return Y.trim().replace(/\s+/g," ")}ee.classed=function(Y,he){if(arguments.length<2){if(typeof Y=="string"){var ye=this.node(),_e=(Y=be(Y)).length,Ee=-1;if(he=ye.classList){for(;++Ee<_e;)if(!he.contains(Y[Ee]))return!1}else for(he=ye.getAttribute("class");++Ee<_e;)if(!me(Y[Ee]).test(he))return!1;return!0}for(he in Y)this.each(Me(he,Y[he]));return this}return this.each(Me(Y,he))};function me(Y){return new RegExp("(?:^|\\s+)"+r.requote(Y)+"(?:\\s+|$)","g")}function be(Y){return(Y+"").trim().split(/^|\s+/)}function Me(Y,he){Y=be(Y).map(Pe);var ye=Y.length;function _e(){for(var Re=-1;++Re<ye;)Y[Re](this,he)}function Ee(){for(var Re=-1,rt=he.apply(this,arguments);++Re<ye;)Y[Re](this,rt)}return typeof he=="function"?Ee:_e}function Pe(Y){var he=me(Y);return function(ye,_e){if(Ee=ye.classList)return _e?Ee.add(Y):Ee.remove(Y);var Ee=ye.getAttribute("class")||"";_e?(he.lastIndex=0,he.test(Ee)||ye.setAttribute("class",ue(Ee+" "+Y))):ye.setAttribute("class",ue(Ee.replace(he," ")))}}ee.style=function(Y,he,ye){var _e=arguments.length;if(_e<3){if(typeof Y!="string"){_e<2&&(he="");for(ye in Y)this.each(Ge(ye,Y[ye],he));return this}if(_e<2){var Ee=this.node();return f(Ee).getComputedStyle(Ee,null).getPropertyValue(Y)}ye=""}return this.each(Ge(Y,he,ye))};function Ge(Y,he,ye){function _e(){this.style.removeProperty(Y)}function Ee(){this.style.setProperty(Y,he,ye)}function Re(){var rt=he.apply(this,arguments);rt==null?this.style.removeProperty(Y):this.style.setProperty(Y,rt,ye)}return he==null?_e:typeof he=="function"?Re:Ee}ee.property=function(Y,he){if(arguments.length<2){if(typeof Y=="string")return this.node()[Y];for(he in Y)this.each(ze(he,Y[he]));return this}return this.each(ze(Y,he))};function ze(Y,he){function ye(){delete this[Y]}function _e(){this[Y]=he}function Ee(){var Re=he.apply(this,arguments);Re==null?delete this[Y]:this[Y]=Re}return he==null?ye:typeof he=="function"?Ee:_e}ee.text=function(Y){return arguments.length?this.each(typeof Y=="function"?function(){var he=Y.apply(this,arguments);this.textContent=he==null?"":he}:Y==null?function(){this.textContent=""}:function(){this.textContent=Y}):this.node().textContent},ee.html=function(Y){return arguments.length?this.each(typeof Y=="function"?function(){var he=Y.apply(this,arguments);this.innerHTML=he==null?"":he}:Y==null?function(){this.innerHTML=""}:function(){this.innerHTML=Y}):this.node().innerHTML},ee.append=function(Y){return Y=Qe(Y),this.select(function(){return this.appendChild(Y.apply(this,arguments))})};function Qe(Y){function he(){var _e=this.ownerDocument,Ee=this.namespaceURI;return Ee===de&&_e.documentElement.namespaceURI===de?_e.createElement(Y):_e.createElementNS(Ee,Y)}function ye(){return this.ownerDocument.createElementNS(Y.space,Y.local)}return typeof Y=="function"?Y:(Y=r.ns.qualify(Y)).local?ye:he}ee.insert=function(Y,he){return Y=Qe(Y),he=ae(he),this.select(function(){return this.insertBefore(Y.apply(this,arguments),he.apply(this,arguments)||null)})},ee.remove=function(){return this.each(tt)};function tt(){var Y=this.parentNode;Y&&Y.removeChild(this)}ee.data=function(Y,he){var ye=-1,_e=this.length,Ee,Re;if(!arguments.length){for(Y=new Array(_e=(Ee=this[0]).length);++ye<_e;)(Re=Ee[ye])&&(Y[ye]=Re.__data__);return Y}function rt(wt,Vt){var Yt,cr=wt.length,Rr=Vt.length,ir=Math.min(cr,Rr),hr=new Array(Rr),vr=new Array(Rr),Ir=new Array(cr),gr,kr;if(he){var gn=new T,dn=new Array(cr),fn;for(Yt=-1;++Yt<cr;)(gr=wt[Yt])&&(gn.has(fn=he.call(gr,gr.__data__,Yt))?Ir[Yt]=gr:gn.set(fn,gr),dn[Yt]=fn);for(Yt=-1;++Yt<Rr;)(gr=gn.get(fn=he.call(Vt,kr=Vt[Yt],Yt)))?gr!==!0&&(hr[Yt]=gr,gr.__data__=kr):vr[Yt]=Ce(kr),gn.set(fn,!0);for(Yt=-1;++Yt<cr;)Yt in dn&&gn.get(dn[Yt])!==!0&&(Ir[Yt]=wt[Yt])}else{for(Yt=-1;++Yt<ir;)gr=wt[Yt],kr=Vt[Yt],gr?(gr.__data__=kr,hr[Yt]=gr):vr[Yt]=Ce(kr);for(;Yt<Rr;++Yt)vr[Yt]=Ce(Vt[Yt]);for(;Yt<cr;++Yt)Ir[Yt]=wt[Yt]}vr.update=hr,vr.parentNode=hr.parentNode=Ir.parentNode=wt.parentNode,Ke.push(vr),at.push(hr),mt.push(Ir)}var Ke=Tt([]),at=Q([]),mt=Q([]);if(typeof Y=="function")for(;++ye<_e;)rt(Ee=this[ye],Y.call(Ee,Ee.parentNode.__data__,ye));else for(;++ye<_e;)rt(Ee=this[ye],Y);return at.enter=function(){return Ke},at.exit=function(){return mt},at};function Ce(Y){return{__data__:Y}}ee.datum=function(Y){return arguments.length?this.property("__data__",Y):this.property("__data__")},ee.filter=function(Y){var he=[],ye,_e,Ee;typeof Y!="function"&&(Y=Ae(Y));for(var Re=0,rt=this.length;Re<rt;Re++){he.push(ye=[]),ye.parentNode=(_e=this[Re]).parentNode;for(var Ke=0,at=_e.length;Ke<at;Ke++)(Ee=_e[Ke])&&Y.call(Ee,Ee.__data__,Ke,Re)&&ye.push(Ee)}return Q(he)};function Ae(Y){return function(){return re(this,Y)}}ee.order=function(){for(var Y=-1,he=this.length;++Y<he;)for(var ye=this[Y],_e=ye.length-1,Ee=ye[_e],Re;--_e>=0;)(Re=ye[_e])&&(Ee&&Ee!==Re.nextSibling&&Ee.parentNode.insertBefore(Re,Ee),Ee=Re);return this},ee.sort=function(Y){Y=Be.apply(this,arguments);for(var he=-1,ye=this.length;++he<ye;)this[he].sort(Y);return this.order()};function Be(Y){return arguments.length||(Y=s),function(he,ye){return he&&ye?Y(he.__data__,ye.__data__):!he-!ye}}ee.each=function(Y){return qe(this,function(he,ye,_e){Y.call(he,he.__data__,ye,_e)})};function qe(Y,he){for(var ye=0,_e=Y.length;ye<_e;ye++)for(var Ee=Y[ye],Re=0,rt=Ee.length,Ke;Re<rt;Re++)(Ke=Ee[Re])&&he(Ke,Re,ye);return Y}ee.call=function(Y){var he=u(arguments);return Y.apply(he[0]=this,he),this},ee.empty=function(){return!this.node()},ee.node=function(){for(var Y=0,he=this.length;Y<he;Y++)for(var ye=this[Y],_e=0,Ee=ye.length;_e<Ee;_e++){var Re=ye[_e];if(Re)return Re}return null},ee.size=function(){var Y=0;return qe(this,function(){++Y}),Y};function Tt(Y){return se(Y,At),Y}var At=[];r.selection.enter=Tt,r.selection.enter.prototype=At,At.append=ee.append,At.empty=ee.empty,At.node=ee.node,At.call=ee.call,At.size=ee.size,At.select=function(Y){for(var he=[],ye,_e,Ee,Re,rt,Ke=-1,at=this.length;++Ke<at;){Ee=(Re=this[Ke]).update,he.push(ye=[]),ye.parentNode=Re.parentNode;for(var mt=-1,wt=Re.length;++mt<wt;)(rt=Re[mt])?(ye.push(Ee[mt]=_e=Y.call(Re.parentNode,rt.__data__,mt,Ke)),_e.__data__=rt.__data__):ye.push(null)}return Q(he)},At.insert=function(Y,he){return arguments.length<2&&(he=Ne(this)),ee.insert.call(this,Y,he)};function Ne(Y){var he,ye;return function(_e,Ee,Re){var rt=Y[Re].update,Ke=rt.length,at;for(Re!=ye&&(ye=Re,he=0),Ee>=he&&(he=Ee+1);!(at=rt[he])&&++he<Ke;);return at}}r.select=function(Y){var he;return typeof Y=="string"?(he=[H(Y,c)],he.parentNode=c.documentElement):(he=[Y],he.parentNode=t(Y)),Q([he])},r.selectAll=function(Y){var he;return typeof Y=="string"?(he=u(oe(Y,c)),he.parentNode=c.documentElement):(he=u(Y),he.parentNode=null),Q([he])},ee.on=function(Y,he,ye){var _e=arguments.length;if(_e<3){if(typeof Y!="string"){_e<2&&(he=!1);for(ye in Y)this.each(ct(ye,Y[ye],he));return this}if(_e<2)return(_e=this.node()["__on"+Y])&&_e._;ye=!1}return this.each(ct(Y,he,ye))};function ct(Y,he,ye){var _e="__on"+Y,Ee=Y.indexOf("."),Re=Wt;Ee>0&&(Y=Y.slice(0,Ee));var rt=Mt.get(Y);rt&&(Y=rt,Re=qt);function Ke(){var wt=this[_e];wt&&(this.removeEventListener(Y,wt,wt.$),delete this[_e])}function at(){var wt=Re(he,u(arguments));Ke.call(this),this.addEventListener(Y,this[_e]=wt,wt.$=ye),wt._=he}function mt(){var wt=new RegExp("^__on([^.]+)"+r.requote(Y)+"$"),Vt;for(var Yt in this)if(Vt=Yt.match(wt)){var cr=this[Yt];this.removeEventListener(Vt[1],cr,cr.$),delete this[Yt]}}return Ee?he?at:Ke:he?B:mt}var Mt=r.map({mouseenter:"mouseover",mouseleave:"mouseout"});c&&Mt.forEach(function(Y){"on"+Y in c&&Mt.remove(Y)});function Wt(Y,he){return function(ye){var _e=r.event;r.event=ye,he[0]=this.__data__;try{Y.apply(this,he)}finally{r.event=_e}}}function qt(Y,he){var ye=Wt(Y,he);return function(_e){var Ee=this,Re=_e.relatedTarget;(!Re||Re!==Ee&&!(Re.compareDocumentPosition(Ee)&8))&&ye.call(Ee,_e)}}var zt,$t=0;function rr(Y){var he=".dragsuppress-"+ ++$t,ye="click"+he,_e=r.select(f(Y)).on("touchmove"+he,K).on("dragstart"+he,K).on("selectstart"+he,K);if(zt==null&&(zt="onselectstart"in Y?!1:X(Y.style,"userSelect")),zt){var Ee=t(Y).style,Re=Ee[zt];Ee[zt]="none"}return function(rt){if(_e.on(he,null),zt&&(Ee[zt]=Re),rt){var Ke=function(){_e.on(ye,null)};_e.on(ye,function(){K(),Ke()},!0),setTimeout(Ke,0)}}}r.mouse=function(Y){return Ct(Y,te())};var Lt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ct(Y,he){he.changedTouches&&(he=he.changedTouches[0]);var ye=Y.ownerSVGElement||Y;if(ye.createSVGPoint){var _e=ye.createSVGPoint();if(Lt<0){var Ee=f(Y);if(Ee.scrollX||Ee.scrollY){ye=r.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Re=ye[0][0].getScreenCTM();Lt=!(Re.f||Re.e),ye.remove()}}return Lt?(_e.x=he.pageX,_e.y=he.pageY):(_e.x=he.clientX,_e.y=he.clientY),_e=_e.matrixTransform(Y.getScreenCTM().inverse()),[_e.x,_e.y]}var rt=Y.getBoundingClientRect();return[he.clientX-rt.left-Y.clientLeft,he.clientY-rt.top-Y.clientTop]}r.touch=function(Y,he,ye){if(arguments.length<3&&(ye=he,he=te().changedTouches),he){for(var _e=0,Ee=he.length,Re;_e<Ee;++_e)if((Re=he[_e]).identifier===ye)return Ct(Y,Re)}},r.behavior.drag=function(){var Y=$(Ee,"drag","dragstart","dragend"),he=null,ye=Re(B,r.mouse,f,"mousemove","mouseup"),_e=Re(dt,r.touch,G,"touchmove","touchend");function Ee(){this.on("mousedown.drag",ye).on("touchstart.drag",_e)}function Re(rt,Ke,at,mt,wt){return function(){var Vt=this,Yt=r.event.target.correspondingElement||r.event.target,cr=Vt.parentNode,Rr=Y.of(Vt,arguments),ir=0,hr=rt(),vr=".drag"+(hr==null?"":"-"+hr),Ir,gr=r.select(at(Yt)).on(mt+vr,dn).on(wt+vr,fn),kr=rr(Yt),gn=Ke(cr,hr);he?(Ir=he.apply(Vt,arguments),Ir=[Ir.x-gn[0],Ir.y-gn[1]]):Ir=[0,0],Rr({type:"dragstart"});function dn(){var on=Ke(cr,hr),Yn,$n;!on||(Yn=on[0]-gn[0],$n=on[1]-gn[1],ir|=Yn|$n,gn=on,Rr({type:"drag",x:on[0]+Ir[0],y:on[1]+Ir[1],dx:Yn,dy:$n}))}function fn(){!Ke(cr,hr)||(gr.on(mt+vr,null).on(wt+vr,null),kr(ir),Rr({type:"dragend"}))}}}return Ee.origin=function(rt){return arguments.length?(he=rt,Ee):he},r.rebind(Ee,Y,"on")};function dt(){return r.event.changedTouches[0].identifier}r.touches=function(Y,he){return arguments.length<2&&(he=te().touches),he?u(he).map(function(ye){var _e=Ct(Y,ye);return _e.identifier=ye.identifier,_e}):[]};var lt=1e-6,Te=lt*lt,Le=Math.PI,Ue=2*Le,et=Ue-lt,ke=Le/2,Ie=Le/180,He=180/Le;function Ye(Y){return Y>0?1:Y<0?-1:0}function ft(Y,he,ye){return(he[0]-Y[0])*(ye[1]-Y[1])-(he[1]-Y[1])*(ye[0]-Y[0])}function it(Y){return Y>1?0:Y<-1?Le:Math.acos(Y)}function je(Y){return Y>1?ke:Y<-1?-ke:Math.asin(Y)}function ot(Y){return((Y=Math.exp(Y))-1/Y)/2}function Je(Y){return((Y=Math.exp(Y))+1/Y)/2}function st(Y){return((Y=Math.exp(2*Y))-1)/(Y+1)}function It(Y){return(Y=Math.sin(Y/2))*Y}var Nt=Math.SQRT2,nr=2,We=4;r.interpolateZoom=function(Y,he){var ye=Y[0],_e=Y[1],Ee=Y[2],Re=he[0],rt=he[1],Ke=he[2],at=Re-ye,mt=rt-_e,wt=at*at+mt*mt,Vt,Yt;if(wt<Te)Yt=Math.log(Ke/Ee)/Nt,Vt=function(Ir){return[ye+Ir*at,_e+Ir*mt,Ee*Math.exp(Nt*Ir*Yt)]};else{var cr=Math.sqrt(wt),Rr=(Ke*Ke-Ee*Ee+We*wt)/(2*Ee*nr*cr),ir=(Ke*Ke-Ee*Ee-We*wt)/(2*Ke*nr*cr),hr=Math.log(Math.sqrt(Rr*Rr+1)-Rr),vr=Math.log(Math.sqrt(ir*ir+1)-ir);Yt=(vr-hr)/Nt,Vt=function(Ir){var gr=Ir*Yt,kr=Je(hr),gn=Ee/(nr*cr)*(kr*st(Nt*gr+hr)-ot(hr));return[ye+gn*at,_e+gn*mt,Ee*kr/Je(Nt*gr+hr)]}}return Vt.duration=Yt*1e3,Vt},r.behavior.zoom=function(){var Y={x:0,y:0,k:1},he,ye,_e,Ee=[960,500],Re=Fe,rt=250,Ke=0,at="mousedown.zoom",mt="mousemove.zoom",wt="mouseup.zoom",Vt,Yt="touchstart.zoom",cr,Rr=$(gr,"zoomstart","zoom","zoomend"),ir,hr,vr,Ir;kt||(kt="onwheel"in c?(bt=function(){return-r.event.deltaY*(r.event.deltaMode?120:1)},"wheel"):"onmousewheel"in c?(bt=function(){return r.event.wheelDelta},"mousewheel"):(bt=function(){return-r.event.detail},"MozMousePixelScroll"));function gr(yn){yn.on(at,ma).on(kt+".zoom",Kn).on("dblclick.zoom",ua).on(Yt,Sn)}gr.event=function(yn){yn.each(function(){var Vn=Rr.of(this,arguments),ja=Y;Qu?r.select(this).transition().each("start.zoom",function(){Y=this.__chart__||{x:0,y:0,k:1},$n(Vn)}).tween("zoom:zoom",function(){var xi=Ee[0],Pi=Ee[1],vo=ye?ye[0]:xi/2,Ro=ye?ye[1]:Pi/2,Ks=r.interpolateZoom([(vo-Y.x)/Y.k,(Ro-Y.y)/Y.k,xi/Y.k],[(vo-ja.x)/ja.k,(Ro-ja.y)/ja.k,xi/ja.k]);return function(Ls){var Ps=Ks(Ls),tu=xi/Ps[2];this.__chart__=Y={x:vo-Ps[0]*tu,y:Ro-Ps[1]*tu,k:tu},Ca(Vn)}}).each("interrupt.zoom",function(){pa(Vn)}).each("end.zoom",function(){pa(Vn)}):(this.__chart__=Y,$n(Vn),Ca(Vn),pa(Vn))})},gr.translate=function(yn){return arguments.length?(Y={x:+yn[0],y:+yn[1],k:Y.k},Yn(),gr):[Y.x,Y.y]},gr.scale=function(yn){return arguments.length?(Y={x:Y.x,y:Y.y,k:null},dn(+yn),Yn(),gr):Y.k},gr.scaleExtent=function(yn){return arguments.length?(Re=yn==null?Fe:[+yn[0],+yn[1]],gr):Re},gr.center=function(yn){return arguments.length?(_e=yn&&[+yn[0],+yn[1]],gr):_e},gr.size=function(yn){return arguments.length?(Ee=yn&&[+yn[0],+yn[1]],gr):Ee},gr.duration=function(yn){return arguments.length?(rt=+yn,gr):rt},gr.x=function(yn){return arguments.length?(hr=yn,ir=yn.copy(),Y={x:0,y:0,k:1},gr):hr},gr.y=function(yn){return arguments.length?(Ir=yn,vr=yn.copy(),Y={x:0,y:0,k:1},gr):Ir};function kr(yn){return[(yn[0]-Y.x)/Y.k,(yn[1]-Y.y)/Y.k]}function gn(yn){return[yn[0]*Y.k+Y.x,yn[1]*Y.k+Y.y]}function dn(yn){Y.k=Math.max(Re[0],Math.min(Re[1],yn))}function fn(yn,Vn){Vn=gn(Vn),Y.x+=yn[0]-Vn[0],Y.y+=yn[1]-Vn[1]}function on(yn,Vn,ja,xi){yn.__chart__={x:Y.x,y:Y.y,k:Y.k},dn(Math.pow(2,xi)),fn(ye=Vn,ja),yn=r.select(yn),rt>0&&(yn=yn.transition().duration(rt)),yn.call(gr.event)}function Yn(){hr&&hr.domain(ir.range().map(function(yn){return(yn-Y.x)/Y.k}).map(ir.invert)),Ir&&Ir.domain(vr.range().map(function(yn){return(yn-Y.y)/Y.k}).map(vr.invert))}function $n(yn){Ke++||yn({type:"zoomstart"})}function Ca(yn){Yn(),yn({type:"zoom",scale:Y.k,translate:[Y.x,Y.y]})}function pa(yn){--Ke||(yn({type:"zoomend"}),ye=null)}function ma(){var yn=this,Vn=Rr.of(yn,arguments),ja=0,xi=r.select(f(yn)).on(mt,Ro).on(wt,Ks),Pi=kr(r.mouse(yn)),vo=rr(yn);Gh.call(yn),$n(Vn);function Ro(){ja=1,fn(r.mouse(yn),Pi),Ca(Vn)}function Ks(){xi.on(mt,null).on(wt,null),vo(ja),pa(Vn)}}function Sn(){var yn=this,Vn=Rr.of(yn,arguments),ja={},xi=0,Pi,vo=".zoom-"+r.event.changedTouches[0].identifier,Ro="touchmove"+vo,Ks="touchend"+vo,Ls=[],Ps=r.select(yn),tu=rr(yn);_l(),$n(Vn),Ps.on(at,null).on(Yt,_l);function ro(){var gu=r.touches(yn);return Pi=Y.k,gu.forEach(function(Js){Js.identifier in ja&&(ja[Js.identifier]=kr(Js))}),gu}function _l(){var gu=r.event.target;r.select(gu).on(Ro,ru).on(Ks,Mp),Ls.push(gu);for(var Js=r.event.changedTouches,wl=0,Tl=Js.length;wl<Tl;++wl)ja[Js[wl].identifier]=null;var jl=ro(),Wf=Date.now();if(jl.length===1){if(Wf-cr<500){var Yf=jl[0];on(yn,Yf,ja[Yf.identifier],Math.floor(Math.log(Y.k)/Math.LN2)+1),K()}cr=Wf}else if(jl.length>1){var Yf=jl[0],Zo=jl[1],ec=Yf[0]-Zo[0],bd=Yf[1]-Zo[1];xi=ec*ec+bd*bd}}function ru(){var gu=r.touches(yn),Js,wl,Tl,jl;Gh.call(yn);for(var Wf=0,Yf=gu.length;Wf<Yf;++Wf,jl=null)if(Tl=gu[Wf],jl=ja[Tl.identifier]){if(wl)break;Js=Tl,wl=jl}if(jl){var Zo=(Zo=Tl[0]-Js[0])*Zo+(Zo=Tl[1]-Js[1])*Zo,ec=xi&&Math.sqrt(Zo/xi);Js=[(Js[0]+Tl[0])/2,(Js[1]+Tl[1])/2],wl=[(wl[0]+jl[0])/2,(wl[1]+jl[1])/2],dn(ec*Pi)}cr=null,fn(Js,wl),Ca(Vn)}function Mp(){if(r.event.touches.length){for(var gu=r.event.changedTouches,Js=0,wl=gu.length;Js<wl;++Js)delete ja[gu[Js].identifier];for(var Tl in ja)return void ro()}r.selectAll(Ls).on(vo,null),Ps.on(at,ma).on(Yt,Sn),tu(),pa(Vn)}}function Kn(){var yn=Rr.of(this,arguments);Vt?clearTimeout(Vt):(Gh.call(this),he=kr(ye=_e||r.mouse(this)),$n(yn)),Vt=setTimeout(function(){Vt=null,pa(yn)},50),K(),dn(Math.pow(2,bt()*.002)*Y.k),fn(ye,he),Ca(yn)}function ua(){var yn=r.mouse(this),Vn=Math.log(Y.k)/Math.LN2;on(this,yn,kr(yn),r.event.shiftKey?Math.ceil(Vn)-1:Math.floor(Vn)+1)}return r.rebind(gr,Rr,"on")};var Fe=[0,1/0],bt,kt;r.color=_t;function _t(){}_t.prototype.toString=function(){return this.rgb()+""},r.hsl=Rt;function Rt(Y,he,ye){return this instanceof Rt?(this.h=+Y,this.s=+he,void(this.l=+ye)):arguments.length<2?Y instanceof Rt?new Rt(Y.h,Y.s,Y.l):_n(""+Y,kn,Rt):new Rt(Y,he,ye)}var Dt=Rt.prototype=new _t;Dt.brighter=function(Y){return Y=Math.pow(.7,arguments.length?Y:1),new Rt(this.h,this.s,this.l/Y)},Dt.darker=function(Y){return Y=Math.pow(.7,arguments.length?Y:1),new Rt(this.h,this.s,Y*this.l)},Dt.rgb=function(){return Ut(this.h,this.s,this.l)};function Ut(Y,he,ye){var _e,Ee;Y=isNaN(Y)?0:(Y%=360)<0?Y+360:Y,he=isNaN(he)||he<0?0:he>1?1:he,ye=ye<0?0:ye>1?1:ye,Ee=ye<=.5?ye*(1+he):ye+he-ye*he,_e=2*ye-Ee;function Re(Ke){return Ke>360?Ke-=360:Ke<0&&(Ke+=360),Ke<60?_e+(Ee-_e)*Ke/60:Ke<180?Ee:Ke<240?_e+(Ee-_e)*(240-Ke)/60:_e}function rt(Ke){return Math.round(Re(Ke)*255)}return new Pr(rt(Y+120),rt(Y),rt(Y-120))}r.hcl=Bt;function Bt(Y,he,ye){return this instanceof Bt?(this.h=+Y,this.c=+he,void(this.l=+ye)):arguments.length<2?Y instanceof Bt?new Bt(Y.h,Y.c,Y.l):Y instanceof Zt?Tn(Y.l,Y.a,Y.b):Tn((Y=ln((Y=r.rgb(Y)).r,Y.g,Y.b)).l,Y.a,Y.b):new Bt(Y,he,ye)}var tr=Bt.prototype=new _t;tr.brighter=function(Y){return new Bt(this.h,this.c,Math.min(100,this.l+_r*(arguments.length?Y:1)))},tr.darker=function(Y){return new Bt(this.h,this.c,Math.max(0,this.l-_r*(arguments.length?Y:1)))},tr.rgb=function(){return er(this.h,this.c,this.l).rgb()};function er(Y,he,ye){return isNaN(Y)&&(Y=0),isNaN(he)&&(he=0),new Zt(ye,Math.cos(Y*=Ie)*he,Math.sin(Y)*he)}r.lab=Zt;function Zt(Y,he,ye){return this instanceof Zt?(this.l=+Y,this.a=+he,void(this.b=+ye)):arguments.length<2?Y instanceof Zt?new Zt(Y.l,Y.a,Y.b):Y instanceof Bt?er(Y.h,Y.c,Y.l):ln((Y=Pr(Y)).r,Y.g,Y.b):new Zt(Y,he,ye)}var _r=18,Gr=.95047,Or=1,Fr=1.08883,Mn=Zt.prototype=new _t;Mn.brighter=function(Y){return new Zt(Math.min(100,this.l+_r*(arguments.length?Y:1)),this.a,this.b)},Mn.darker=function(Y){return new Zt(Math.max(0,this.l-_r*(arguments.length?Y:1)),this.a,this.b)},Mn.rgb=function(){return Wn(this.l,this.a,this.b)};function Wn(Y,he,ye){var _e=(Y+16)/116,Ee=_e+he/500,Re=_e-ye/200;return Ee=Nn(Ee)*Gr,_e=Nn(_e)*Or,Re=Nn(Re)*Fr,new Pr(Nr(3.2404542*Ee-1.5371385*_e-.4985314*Re),Nr(-.969266*Ee+1.8760108*_e+.041556*Re),Nr(.0556434*Ee-.2040259*_e+1.0572252*Re))}function Tn(Y,he,ye){return Y>0?new Bt(Math.atan2(ye,he)*He,Math.sqrt(he*he+ye*ye),Y):new Bt(NaN,NaN,Y)}function Nn(Y){return Y>.206893034?Y*Y*Y:(Y-4/29)/7.787037}function jn(Y){return Y>.008856?Math.pow(Y,1/3):7.787037*Y+4/29}function Nr(Y){return Math.round(255*(Y<=.00304?12.92*Y:1.055*Math.pow(Y,1/2.4)-.055))}r.rgb=Pr;function Pr(Y,he,ye){return this instanceof Pr?(this.r=~~Y,this.g=~~he,void(this.b=~~ye)):arguments.length<2?Y instanceof Pr?new Pr(Y.r,Y.g,Y.b):_n(""+Y,Pr,Ut):new Pr(Y,he,ye)}function Ln(Y){return new Pr(Y>>16,Y>>8&255,Y&255)}function pn(Y){return Ln(Y)+""}var xn=Pr.prototype=new _t;xn.brighter=function(Y){Y=Math.pow(.7,arguments.length?Y:1);var he=this.r,ye=this.g,_e=this.b,Ee=30;return!he&&!ye&&!_e?new Pr(Ee,Ee,Ee):(he&&he<Ee&&(he=Ee),ye&&ye<Ee&&(ye=Ee),_e&&_e<Ee&&(_e=Ee),new Pr(Math.min(255,he/Y),Math.min(255,ye/Y),Math.min(255,_e/Y)))},xn.darker=function(Y){return Y=Math.pow(.7,arguments.length?Y:1),new Pr(Y*this.r,Y*this.g,Y*this.b)},xn.hsl=function(){return kn(this.r,this.g,this.b)},xn.toString=function(){return"#"+en(this.r)+en(this.g)+en(this.b)};function en(Y){return Y<16?"0"+Math.max(0,Y).toString(16):Math.min(255,Y).toString(16)}function _n(Y,he,ye){var _e=0,Ee=0,Re=0,rt,Ke,at;if(rt=/([a-z]+)\((.*)\)/.exec(Y=Y.toLowerCase()),rt)switch(Ke=rt[2].split(","),rt[1]){case"hsl":return ye(parseFloat(Ke[0]),parseFloat(Ke[1])/100,parseFloat(Ke[2])/100);case"rgb":return he(Gt(Ke[0]),Gt(Ke[1]),Gt(Ke[2]))}return(at=fr.get(Y))?he(at.r,at.g,at.b):(Y!=null&&Y.charAt(0)==="#"&&!isNaN(at=parseInt(Y.slice(1),16))&&(Y.length===4?(_e=(at&3840)>>4,_e=_e>>4|_e,Ee=at&240,Ee=Ee>>4|Ee,Re=at&15,Re=Re<<4|Re):Y.length===7&&(_e=(at&16711680)>>16,Ee=(at&65280)>>8,Re=at&255)),he(_e,Ee,Re))}function kn(Y,he,ye){var _e=Math.min(Y/=255,he/=255,ye/=255),Ee=Math.max(Y,he,ye),Re=Ee-_e,rt,Ke,at=(Ee+_e)/2;return Re?(Ke=at<.5?Re/(Ee+_e):Re/(2-Ee-_e),Y==Ee?rt=(he-ye)/Re+(he<ye?6:0):he==Ee?rt=(ye-Y)/Re+2:rt=(Y-he)/Re+4,rt*=60):(rt=NaN,Ke=at>0&&at<1?0:rt),new Rt(rt,Ke,at)}function ln(Y,he,ye){Y=vt(Y),he=vt(he),ye=vt(ye);var _e=jn((.4124564*Y+.3575761*he+.1804375*ye)/Gr),Ee=jn((.2126729*Y+.7151522*he+.072175*ye)/Or),Re=jn((.0193339*Y+.119192*he+.9503041*ye)/Fr);return Zt(116*Ee-16,500*(_e-Ee),200*(Ee-Re))}function vt(Y){return(Y/=255)<=.04045?Y/12.92:Math.pow((Y+.055)/1.055,2.4)}function Gt(Y){var he=parseFloat(Y);return Y.charAt(Y.length-1)==="%"?Math.round(he*2.55):he}var fr=r.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});fr.forEach(function(Y,he){fr.set(Y,Ln(he))});function Cr(Y){return typeof Y=="function"?Y:function(){return Y}}r.functor=Cr,r.xhr=Wr(G);function Wr(Y){return function(he,ye,_e){return arguments.length===2&&typeof ye=="function"&&(_e=ye,ye=null),Vr(he,ye,Y,_e)}}function Vr(Y,he,ye,_e){var Ee={},Re=r.dispatch("beforesend","progress","load","error"),rt={},Ke=new XMLHttpRequest,at=null;this.XDomainRequest&&!("withCredentials"in Ke)&&/^(http(s)?:)?\/\//.test(Y)&&(Ke=new XDomainRequest),"onload"in Ke?Ke.onload=Ke.onerror=mt:Ke.onreadystatechange=function(){Ke.readyState>3&&mt()};function mt(){var wt=Ke.status,Vt;if(!wt&&Hr(Ke)||wt>=200&&wt<300||wt===304){try{Vt=ye.call(Ee,Ke)}catch(Yt){Re.error.call(Ee,Yt);return}Re.load.call(Ee,Vt)}else Re.error.call(Ee,Ke)}return Ke.onprogress=function(wt){var Vt=r.event;r.event=wt;try{Re.progress.call(Ee,Ke)}finally{r.event=Vt}},Ee.header=function(wt,Vt){return wt=(wt+"").toLowerCase(),arguments.length<2?rt[wt]:(Vt==null?delete rt[wt]:rt[wt]=Vt+"",Ee)},Ee.mimeType=function(wt){return arguments.length?(he=wt==null?null:wt+"",Ee):he},Ee.responseType=function(wt){return arguments.length?(at=wt,Ee):at},Ee.response=function(wt){return ye=wt,Ee},["get","post"].forEach(function(wt){Ee[wt]=function(){return Ee.send.apply(Ee,[wt].concat(u(arguments)))}}),Ee.send=function(wt,Vt,Yt){if(arguments.length===2&&typeof Vt=="function"&&(Yt=Vt,Vt=null),Ke.open(wt,Y,!0),he!=null&&!("accept"in rt)&&(rt.accept=he+",*/*"),Ke.setRequestHeader)for(var cr in rt)Ke.setRequestHeader(cr,rt[cr]);return he!=null&&Ke.overrideMimeType&&Ke.overrideMimeType(he),at!=null&&(Ke.responseType=at),Yt!=null&&Ee.on("error",Yt).on("load",function(Rr){Yt(null,Rr)}),Re.beforesend.call(Ee,Ke),Ke.send(Vt==null?null:Vt),Ee},Ee.abort=function(){return Ke.abort(),Ee},r.rebind(Ee,Re,"on"),_e==null?Ee:Ee.get(Qr(_e))}function Qr(Y){return Y.length===1?function(he,ye){Y(he==null?ye:null)}:Y}function Hr(Y){var he=Y.responseType;return he&&he!=="text"?Y.response:Y.responseText}r.dsv=function(Y,he){var ye=new RegExp('["'+Y+`
]`),_e=Y.charCodeAt(0);function Ee(mt,wt,Vt){arguments.length<3&&(Vt=wt,wt=null);var Yt=Vr(mt,he,wt==null?Re:rt(wt),Vt);return Yt.row=function(cr){return arguments.length?Yt.response((wt=cr)==null?Re:rt(cr)):wt},Yt}function Re(mt){return Ee.parse(mt.responseText)}function rt(mt){return function(wt){return Ee.parse(wt.responseText,mt)}}Ee.parse=function(mt,wt){var Vt;return Ee.parseRows(mt,function(Yt,cr){if(Vt)return Vt(Yt,cr-1);var Rr=new Function("d","return {"+Yt.map(function(ir,hr){return JSON.stringify(ir)+": d["+hr+"]"}).join(",")+"}");Vt=wt?function(ir,hr){return wt(Rr(ir),hr)}:Rr})},Ee.parseRows=function(mt,wt){var Vt={},Yt={},cr=[],Rr=mt.length,ir=0,hr=0,vr,Ir;function gr(){if(ir>=Rr)return Yt;if(Ir)return Ir=!1,Vt;var gn=ir;if(mt.charCodeAt(gn)===34){for(var dn=gn;dn++<Rr;)if(mt.charCodeAt(dn)===34){if(mt.charCodeAt(dn+1)!==34)break;++dn}ir=dn+2;var fn=mt.charCodeAt(dn+1);return fn===13?(Ir=!0,mt.charCodeAt(dn+2)===10&&++ir):fn===10&&(Ir=!0),mt.slice(gn+1,dn).replace(/""/g,'"')}for(;ir<Rr;){var fn=mt.charCodeAt(ir++),on=1;if(fn===10)Ir=!0;else if(fn===13)Ir=!0,mt.charCodeAt(ir)===10&&(++ir,++on);else if(fn!==_e)continue;return mt.slice(gn,ir-on)}return mt.slice(gn)}for(;(vr=gr())!==Yt;){for(var kr=[];vr!==Vt&&vr!==Yt;)kr.push(vr),vr=gr();wt&&(kr=wt(kr,hr++))==null||cr.push(kr)}return cr},Ee.format=function(mt){if(Array.isArray(mt[0]))return Ee.formatRows(mt);var wt=new N,Vt=[];return mt.forEach(function(Yt){for(var cr in Yt)wt.has(cr)||Vt.push(wt.add(cr))}),[Vt.map(at).join(Y)].concat(mt.map(function(Yt){return Vt.map(function(cr){return at(Yt[cr])}).join(Y)})).join(`
`)},Ee.formatRows=function(mt){return mt.map(Ke).join(`
`)};function Ke(mt){return mt.map(at).join(Y)}function at(mt){return ye.test(mt)?'"'+mt.replace(/\"/g,'""')+'"':mt}return Ee},r.csv=r.dsv(",","text/csv"),r.tsv=r.dsv("	","text/tab-separated-values");var En,ta,ea,ba,Wa=this[X(this,"requestAnimationFrame")]||function(Y){setTimeout(Y,17)};r.timer=function(){qa.apply(this,arguments)};function qa(Y,he,ye){var _e=arguments.length;_e<2&&(he=0),_e<3&&(ye=Date.now());var Ee=ye+he,Re={c:Y,t:Ee,n:null};return ta?ta.n=Re:En=Re,ta=Re,ea||(ba=clearTimeout(ba),ea=1,Wa(dr)),Re}function dr(){var Y=nn(),he=Jr()-Y;he>24?(isFinite(he)&&(clearTimeout(ba),ba=setTimeout(dr,he)),ea=0):(ea=1,Wa(dr))}r.timer.flush=function(){nn(),Jr()};function nn(){for(var Y=Date.now(),he=En;he;)Y>=he.t&&he.c(Y-he.t)&&(he.c=null),he=he.n;return Y}function Jr(){for(var Y,he=En,ye=1/0;he;)he.c?(he.t<ye&&(ye=he.t),he=(Y=he).n):he=Y?Y.n=he.n:En=he.n;return ta=Y,ye}function Pn(Y,he){return he-(Y?Math.ceil(Math.log(Y)/Math.LN10):1)}r.round=function(Y,he){return he?Math.round(Y*(he=Math.pow(10,he)))/he:Math.round(Y)};var Gn=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"].map(ka);r.formatPrefix=function(Y,he){var ye=0;return(Y=+Y)&&(Y<0&&(Y*=-1),he&&(Y=r.round(Y,Pn(Y,he))),ye=1+Math.floor(1e-12+Math.log(Y)/Math.LN10),ye=Math.max(-24,Math.min(24,Math.floor((ye-1)/3)*3))),Gn[8+ye/3]};function ka(Y,he){var ye=Math.pow(10,x(8-he)*3);return{scale:he>8?function(_e){return _e/ye}:function(_e){return _e*ye},symbol:Y}}function ca(Y){var he=Y.decimal,ye=Y.thousands,_e=Y.grouping,Ee=Y.currency,Re=_e&&ye?function(rt,Ke){for(var at=rt.length,mt=[],wt=0,Vt=_e[0],Yt=0;at>0&&Vt>0&&(Yt+Vt+1>Ke&&(Vt=Math.max(1,Ke-Yt)),mt.push(rt.substring(at-=Vt,at+Vt)),!((Yt+=Vt+1)>Ke));)Vt=_e[wt=(wt+1)%_e.length];return mt.reverse().join(ye)}:G;return function(rt){var Ke=Ta.exec(rt),at=Ke[1]||" ",mt=Ke[2]||">",wt=Ke[3]||"-",Vt=Ke[4]||"",Yt=Ke[5],cr=+Ke[6],Rr=Ke[7],ir=Ke[8],hr=Ke[9],vr=1,Ir="",gr="",kr=!1,gn=!0;switch(ir&&(ir=+ir.substring(1)),(Yt||at==="0"&&mt==="=")&&(Yt=at="0",mt="="),hr){case"n":Rr=!0,hr="g";break;case"%":vr=100,gr="%",hr="f";break;case"p":vr=100,gr="%",hr="r";break;case"b":case"o":case"x":case"X":Vt==="#"&&(Ir="0"+hr.toLowerCase());case"c":gn=!1;case"d":kr=!0,ir=0;break;case"s":vr=-1,hr="r";break}Vt==="$"&&(Ir=Ee[0],gr=Ee[1]),hr=="r"&&!ir&&(hr="g"),ir!=null&&(hr=="g"?ir=Math.max(1,Math.min(21,ir)):(hr=="e"||hr=="f")&&(ir=Math.max(0,Math.min(20,ir)))),hr=Aa.get(hr)||Ya;var dn=Yt&&Rr;return function(fn){var on=gr;if(kr&&fn%1)return"";var Yn=fn<0||fn===0&&1/fn<0?(fn=-fn,"-"):wt==="-"?"":wt;if(vr<0){var $n=r.formatPrefix(fn,ir);fn=$n.scale(fn),on=$n.symbol+gr}else fn*=vr;fn=hr(fn,ir);var Ca=fn.lastIndexOf("."),pa,ma;if(Ca<0){var Sn=gn?fn.lastIndexOf("e"):-1;Sn<0?(pa=fn,ma=""):(pa=fn.substring(0,Sn),ma=fn.substring(Sn))}else pa=fn.substring(0,Ca),ma=he+fn.substring(Ca+1);!Yt&&Rr&&(pa=Re(pa,1/0));var Kn=Ir.length+pa.length+ma.length+(dn?0:Yn.length),ua=Kn<cr?new Array(Kn=cr-Kn+1).join(at):"";return dn&&(pa=Re(ua+pa,ua.length?cr-ma.length:1/0)),Yn+=Ir,fn=pa+ma,(mt==="<"?Yn+fn+ua:mt===">"?ua+Yn+fn:mt==="^"?ua.substring(0,Kn>>=1)+Yn+fn+ua.substring(Kn):Yn+(dn?fn:ua+fn))+on}}}var Ta=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Aa=r.map({b:function(Y){return Y.toString(2)},c:function(Y){return String.fromCharCode(Y)},o:function(Y){return Y.toString(8)},x:function(Y){return Y.toString(16)},X:function(Y){return Y.toString(16).toUpperCase()},g:function(Y,he){return Y.toPrecision(he)},e:function(Y,he){return Y.toExponential(he)},f:function(Y,he){return Y.toFixed(he)},r:function(Y,he){return(Y=r.round(Y,Pn(Y,he))).toFixed(Math.max(0,Math.min(20,Pn(Y*(1+1e-15),he))))}});function Ya(Y){return Y+""}var Xt=r.time={},yr=Date;function Yr(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Yr.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){un.setUTCDate.apply(this._,arguments)},setDay:function(){un.setUTCDay.apply(this._,arguments)},setFullYear:function(){un.setUTCFullYear.apply(this._,arguments)},setHours:function(){un.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){un.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){un.setUTCMinutes.apply(this._,arguments)},setMonth:function(){un.setUTCMonth.apply(this._,arguments)},setSeconds:function(){un.setUTCSeconds.apply(this._,arguments)},setTime:function(){un.setTime.apply(this._,arguments)}};var un=Date.prototype;function qr(Y,he,ye){function _e(mt){var wt=Y(mt),Vt=Re(wt,1);return mt-wt<Vt-mt?wt:Vt}function Ee(mt){return he(mt=Y(new yr(mt-1)),1),mt}function Re(mt,wt){return he(mt=new yr(+mt),wt),mt}function rt(mt,wt,Vt){var Yt=Ee(mt),cr=[];if(Vt>1)for(;Yt<wt;)ye(Yt)%Vt||cr.push(new Date(+Yt)),he(Yt,1);else for(;Yt<wt;)cr.push(new Date(+Yt)),he(Yt,1);return cr}function Ke(mt,wt,Vt){try{yr=Yr;var Yt=new Yr;return Yt._=mt,rt(Yt,wt,Vt)}finally{yr=Date}}Y.floor=Y,Y.round=_e,Y.ceil=Ee,Y.offset=Re,Y.range=rt;var at=Y.utc=rn(Y);return at.floor=at,at.round=rn(_e),at.ceil=rn(Ee),at.offset=rn(Re),at.range=Ke,Y}function rn(Y){return function(he,ye){try{yr=Yr;var _e=new Yr;return _e._=he,Y(_e,ye)._}finally{yr=Date}}}Xt.year=qr(function(Y){return Y=Xt.day(Y),Y.setMonth(0,1),Y},function(Y,he){Y.setFullYear(Y.getFullYear()+he)},function(Y){return Y.getFullYear()}),Xt.years=Xt.year.range,Xt.years.utc=Xt.year.utc.range,Xt.day=qr(function(Y){var he=new yr(2e3,0);return he.setFullYear(Y.getFullYear(),Y.getMonth(),Y.getDate()),he},function(Y,he){Y.setDate(Y.getDate()+he)},function(Y){return Y.getDate()-1}),Xt.days=Xt.day.range,Xt.days.utc=Xt.day.utc.range,Xt.dayOfYear=function(Y){var he=Xt.year(Y);return Math.floor((Y-he-(Y.getTimezoneOffset()-he.getTimezoneOffset())*6e4)/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(Y,he){he=7-he;var ye=Xt[Y]=qr(function(_e){return(_e=Xt.day(_e)).setDate(_e.getDate()-(_e.getDay()+he)%7),_e},function(_e,Ee){_e.setDate(_e.getDate()+Math.floor(Ee)*7)},function(_e){var Ee=Xt.year(_e).getDay();return Math.floor((Xt.dayOfYear(_e)+(Ee+he)%7)/7)-(Ee!==he)});Xt[Y+"s"]=ye.range,Xt[Y+"s"].utc=ye.utc.range,Xt[Y+"OfYear"]=function(_e){var Ee=Xt.year(_e).getDay();return Math.floor((Xt.dayOfYear(_e)+(Ee+he)%7)/7)}}),Xt.week=Xt.sunday,Xt.weeks=Xt.sunday.range,Xt.weeks.utc=Xt.sunday.utc.range,Xt.weekOfYear=Xt.sundayOfYear;function hn(Y){var he=Y.dateTime,ye=Y.date,_e=Y.time,Ee=Y.periods,Re=Y.days,rt=Y.shortDays,Ke=Y.months,at=Y.shortMonths;function mt(Sn){var Kn=Sn.length;function ua(yn){for(var Vn=[],ja=-1,xi=0,Pi,vo,Ro;++ja<Kn;)Sn.charCodeAt(ja)===37&&(Vn.push(Sn.slice(xi,ja)),(vo=tn[Pi=Sn.charAt(++ja)])!=null&&(Pi=Sn.charAt(++ja)),(Ro=kr[Pi])&&(Pi=Ro(yn,vo==null?Pi==="e"?" ":"0":vo)),Vn.push(Pi),xi=ja+1);return Vn.push(Sn.slice(xi,ja)),Vn.join("")}return ua.parse=function(yn){var Vn={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},ja=wt(Vn,Sn,yn,0);if(ja!=yn.length)return null;"p"in Vn&&(Vn.H=Vn.H%12+Vn.p*12);var xi=Vn.Z!=null&&yr!==Yr,Pi=new(xi?Yr:yr);return"j"in Vn?Pi.setFullYear(Vn.y,0,Vn.j):"W"in Vn||"U"in Vn?("w"in Vn||(Vn.w="W"in Vn?1:0),Pi.setFullYear(Vn.y,0,1),Pi.setFullYear(Vn.y,0,"W"in Vn?(Vn.w+6)%7+Vn.W*7-(Pi.getDay()+5)%7:Vn.w+Vn.U*7-(Pi.getDay()+6)%7)):Pi.setFullYear(Vn.y,Vn.m,Vn.d),Pi.setHours(Vn.H+(Vn.Z/100|0),Vn.M+Vn.Z%100,Vn.S,Vn.L),xi?Pi._:Pi},ua.toString=function(){return Sn},ua}function wt(Sn,Kn,ua,yn){for(var Vn,ja,xi,Pi=0,vo=Kn.length,Ro=ua.length;Pi<vo;){if(yn>=Ro)return-1;if(Vn=Kn.charCodeAt(Pi++),Vn===37){if(xi=Kn.charAt(Pi++),ja=gn[xi in tn?Kn.charAt(Pi++):xi],!ja||(yn=ja(Sn,ua,yn))<0)return-1}else if(Vn!=ua.charCodeAt(yn++))return-1}return yn}mt.utc=function(Sn){var Kn=mt(Sn);function ua(yn){try{yr=Yr;var Vn=new yr;return Vn._=yn,Kn(Vn)}finally{yr=Date}}return ua.parse=function(yn){try{yr=Yr;var Vn=Kn.parse(yn);return Vn&&Vn._}finally{yr=Date}},ua.toString=Kn.toString,ua},mt.multi=mt.utc.multi=zu;var Vt=r.map(),Yt=Fn(Re),cr=Bn(Re),Rr=Fn(rt),ir=Bn(rt),hr=Fn(Ke),vr=Bn(Ke),Ir=Fn(at),gr=Bn(at);Ee.forEach(function(Sn,Kn){Vt.set(Sn.toLowerCase(),Kn)});var kr={a:function(Sn){return rt[Sn.getDay()]},A:function(Sn){return Re[Sn.getDay()]},b:function(Sn){return at[Sn.getMonth()]},B:function(Sn){return Ke[Sn.getMonth()]},c:mt(he),d:function(Sn,Kn){return Tr(Sn.getDate(),Kn,2)},e:function(Sn,Kn){return Tr(Sn.getDate(),Kn,2)},H:function(Sn,Kn){return Tr(Sn.getHours(),Kn,2)},I:function(Sn,Kn){return Tr(Sn.getHours()%12||12,Kn,2)},j:function(Sn,Kn){return Tr(1+Xt.dayOfYear(Sn),Kn,3)},L:function(Sn,Kn){return Tr(Sn.getMilliseconds(),Kn,3)},m:function(Sn,Kn){return Tr(Sn.getMonth()+1,Kn,2)},M:function(Sn,Kn){return Tr(Sn.getMinutes(),Kn,2)},p:function(Sn){return Ee[+(Sn.getHours()>=12)]},S:function(Sn,Kn){return Tr(Sn.getSeconds(),Kn,2)},U:function(Sn,Kn){return Tr(Xt.sundayOfYear(Sn),Kn,2)},w:function(Sn){return Sn.getDay()},W:function(Sn,Kn){return Tr(Xt.mondayOfYear(Sn),Kn,2)},x:mt(ye),X:mt(_e),y:function(Sn,Kn){return Tr(Sn.getFullYear()%100,Kn,2)},Y:function(Sn,Kn){return Tr(Sn.getFullYear()%1e4,Kn,4)},Z:su,"%":function(){return"%"}},gn={a:dn,A:fn,b:on,B:Yn,c:$n,d:As,e:As,H:Tu,I:Tu,j:qo,L:Au,m:yi,M:Ms,p:ma,S:Zu,U:Pa,w:sa,W:ia,x:Ca,X:pa,y:Ai,Y:ri,Z:Bi,"%":Sc};function dn(Sn,Kn,ua){Rr.lastIndex=0;var yn=Rr.exec(Kn.slice(ua));return yn?(Sn.w=ir.get(yn[0].toLowerCase()),ua+yn[0].length):-1}function fn(Sn,Kn,ua){Yt.lastIndex=0;var yn=Yt.exec(Kn.slice(ua));return yn?(Sn.w=cr.get(yn[0].toLowerCase()),ua+yn[0].length):-1}function on(Sn,Kn,ua){Ir.lastIndex=0;var yn=Ir.exec(Kn.slice(ua));return yn?(Sn.m=gr.get(yn[0].toLowerCase()),ua+yn[0].length):-1}function Yn(Sn,Kn,ua){hr.lastIndex=0;var yn=hr.exec(Kn.slice(ua));return yn?(Sn.m=vr.get(yn[0].toLowerCase()),ua+yn[0].length):-1}function $n(Sn,Kn,ua){return wt(Sn,kr.c.toString(),Kn,ua)}function Ca(Sn,Kn,ua){return wt(Sn,kr.x.toString(),Kn,ua)}function pa(Sn,Kn,ua){return wt(Sn,kr.X.toString(),Kn,ua)}function ma(Sn,Kn,ua){var yn=Vt.get(Kn.slice(ua,ua+=2).toLowerCase());return yn==null?-1:(Sn.p=yn,ua)}return mt}var tn={"-":"",_:" ",0:"0"},wr=/^\s*\d+/,zr=/^%/;function Tr(Y,he,ye){var _e=Y<0?"-":"",Ee=(_e?-Y:Y)+"",Re=Ee.length;return _e+(Re<ye?new Array(ye-Re+1).join(he)+Ee:Ee)}function Fn(Y){return new RegExp("^(?:"+Y.map(r.requote).join("|")+")","i")}function Bn(Y){for(var he=new T,ye=-1,_e=Y.length;++ye<_e;)he.set(Y[ye].toLowerCase(),ye);return he}function sa(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+1));return _e?(Y.w=+_e[0],ye+_e[0].length):-1}function Pa(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye));return _e?(Y.U=+_e[0],ye+_e[0].length):-1}function ia(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye));return _e?(Y.W=+_e[0],ye+_e[0].length):-1}function ri(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+4));return _e?(Y.y=+_e[0],ye+_e[0].length):-1}function Ai(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+2));return _e?(Y.y=Qa(+_e[0]),ye+_e[0].length):-1}function Bi(Y,he,ye){return/^[+-]\d{4}$/.test(he=he.slice(ye,ye+5))?(Y.Z=-he,ye+5):-1}function Qa(Y){return Y+(Y>68?1900:2e3)}function yi(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+2));return _e?(Y.m=_e[0]-1,ye+_e[0].length):-1}function As(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+2));return _e?(Y.d=+_e[0],ye+_e[0].length):-1}function qo(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+3));return _e?(Y.j=+_e[0],ye+_e[0].length):-1}function Tu(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+2));return _e?(Y.H=+_e[0],ye+_e[0].length):-1}function Ms(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+2));return _e?(Y.M=+_e[0],ye+_e[0].length):-1}function Zu(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+2));return _e?(Y.S=+_e[0],ye+_e[0].length):-1}function Au(Y,he,ye){wr.lastIndex=0;var _e=wr.exec(he.slice(ye,ye+3));return _e?(Y.L=+_e[0],ye+_e[0].length):-1}function su(Y){var he=Y.getTimezoneOffset(),ye=he>0?"-":"+",_e=x(he)/60|0,Ee=x(he)%60;return ye+Tr(_e,"0",2)+Tr(Ee,"0",2)}function Sc(Y,he,ye){zr.lastIndex=0;var _e=zr.exec(he.slice(ye,ye+1));return _e?ye+_e[0].length:-1}function zu(Y){for(var he=Y.length,ye=-1;++ye<he;)Y[ye][0]=this(Y[ye][0]);return function(_e){for(var Ee=0,Re=Y[Ee];!Re[1](_e);)Re=Y[++Ee];return Re[0](_e)}}r.locale=function(Y){return{numberFormat:ca(Y),timeFormat:hn(Y)}};var Po=r.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});r.format=Po.numberFormat,r.geo={};function al(){}al.prototype={s:0,t:0,add:function(Y){ah(Y,this.t,go),ah(go.s,this.s,this),this.s?this.t+=go.t:this.s=go.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var go=new al;function ah(Y,he,ye){var _e=ye.s=Y+he,Ee=_e-Y,Re=_e-Ee;ye.t=Y-Re+(he-Ee)}r.geo.stream=function(Y,he){Y&&Ef.hasOwnProperty(Y.type)?Ef[Y.type](Y,he):lu(Y,he)};function lu(Y,he){Y&&uu.hasOwnProperty(Y.type)&&uu[Y.type](Y,he)}var Ef={Feature:function(Y,he){lu(Y.geometry,he)},FeatureCollection:function(Y,he){for(var ye=Y.features,_e=-1,Ee=ye.length;++_e<Ee;)lu(ye[_e].geometry,he)}},uu={Sphere:function(Y,he){he.sphere()},Point:function(Y,he){Y=Y.coordinates,he.point(Y[0],Y[1],Y[2])},MultiPoint:function(Y,he){for(var ye=Y.coordinates,_e=-1,Ee=ye.length;++_e<Ee;)Y=ye[_e],he.point(Y[0],Y[1],Y[2])},LineString:function(Y,he){Xl(Y.coordinates,he,0)},MultiLineString:function(Y,he){for(var ye=Y.coordinates,_e=-1,Ee=ye.length;++_e<Ee;)Xl(ye[_e],he,0)},Polygon:function(Y,he){Mu(Y.coordinates,he)},MultiPolygon:function(Y,he){for(var ye=Y.coordinates,_e=-1,Ee=ye.length;++_e<Ee;)Mu(ye[_e],he)},GeometryCollection:function(Y,he){for(var ye=Y.geometries,_e=-1,Ee=ye.length;++_e<Ee;)lu(ye[_e],he)}};function Xl(Y,he,ye){var _e=-1,Ee=Y.length-ye,Re;for(he.lineStart();++_e<Ee;)Re=Y[_e],he.point(Re[0],Re[1],Re[2]);he.lineEnd()}function Mu(Y,he){var ye=-1,_e=Y.length;for(he.polygonStart();++ye<_e;)Xl(Y[ye],he,1);he.polygonEnd()}r.geo.area=function(Y){return ku=0,r.geo.stream(Y,il),ku};var ku,pl=new al,il={sphere:function(){ku+=4*Le},point:B,lineStart:B,lineEnd:B,polygonStart:function(){pl.reset(),il.lineStart=Ou},polygonEnd:function(){var Y=2*pl;ku+=Y<0?4*Le+Y:Y,il.lineStart=il.lineEnd=il.point=B}};function Ou(){var Y,he,ye,_e,Ee;il.point=function(rt,Ke){il.point=Re,ye=(Y=rt)*Ie,_e=Math.cos(Ke=(he=Ke)*Ie/2+Le/4),Ee=Math.sin(Ke)};function Re(rt,Ke){rt*=Ie,Ke=Ke*Ie/2+Le/4;var at=rt-ye,mt=at>=0?1:-1,wt=mt*at,Vt=Math.cos(Ke),Yt=Math.sin(Ke),cr=Ee*Yt,Rr=_e*Vt+cr*Math.cos(wt),ir=cr*mt*Math.sin(wt);pl.add(Math.atan2(ir,Rr)),ye=rt,_e=Vt,Ee=Yt}il.lineEnd=function(){Re(Y,he)}}function Su(Y){var he=Y[0],ye=Y[1],_e=Math.cos(ye);return[_e*Math.cos(he),_e*Math.sin(he),Math.sin(ye)]}function Zl(Y,he){return Y[0]*he[0]+Y[1]*he[1]+Y[2]*he[2]}function dl(Y,he){return[Y[1]*he[2]-Y[2]*he[1],Y[2]*he[0]-Y[0]*he[2],Y[0]*he[1]-Y[1]*he[0]]}function lc(Y,he){Y[0]+=he[0],Y[1]+=he[1],Y[2]+=he[2]}function Ku(Y,he){return[Y[0]*he,Y[1]*he,Y[2]*he]}function $i(Y){var he=Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]+Y[2]*Y[2]);Y[0]/=he,Y[1]/=he,Y[2]/=he}function Gs(Y){return[Math.atan2(Y[1],Y[0]),je(Y[2])]}function $c(Y,he){return x(Y[0]-he[0])<lt&&x(Y[1]-he[1])<lt}r.geo.bounds=function(){var Y,he,ye,_e,Ee,Re,rt,Ke,at,mt,wt,Vt={point:Yt,lineStart:Rr,lineEnd:ir,polygonStart:function(){Vt.point=hr,Vt.lineStart=vr,Vt.lineEnd=Ir,at=0,il.polygonStart()},polygonEnd:function(){il.polygonEnd(),Vt.point=Yt,Vt.lineStart=Rr,Vt.lineEnd=ir,pl<0?(Y=-(ye=180),he=-(_e=90)):at>lt?_e=90:at<-lt&&(he=-90),wt[0]=Y,wt[1]=ye}};function Yt(dn,fn){mt.push(wt=[Y=dn,ye=dn]),fn<he&&(he=fn),fn>_e&&(_e=fn)}function cr(dn,fn){var on=Su([dn*Ie,fn*Ie]);if(Ke){var Yn=dl(Ke,on),$n=[Yn[1],-Yn[0],0],Ca=dl($n,Yn);$i(Ca),Ca=Gs(Ca);var pa=dn-Ee,ma=pa>0?1:-1,Sn=Ca[0]*He*ma,Kn=x(pa)>180;if(Kn^(ma*Ee<Sn&&Sn<ma*dn)){var ua=Ca[1]*He;ua>_e&&(_e=ua)}else if(Sn=(Sn+360)%360-180,Kn^(ma*Ee<Sn&&Sn<ma*dn)){var ua=-Ca[1]*He;ua<he&&(he=ua)}else fn<he&&(he=fn),fn>_e&&(_e=fn);Kn?dn<Ee?gr(Y,dn)>gr(Y,ye)&&(ye=dn):gr(dn,ye)>gr(Y,ye)&&(Y=dn):ye>=Y?(dn<Y&&(Y=dn),dn>ye&&(ye=dn)):dn>Ee?gr(Y,dn)>gr(Y,ye)&&(ye=dn):gr(dn,ye)>gr(Y,ye)&&(Y=dn)}else Yt(dn,fn);Ke=on,Ee=dn}function Rr(){Vt.point=cr}function ir(){wt[0]=Y,wt[1]=ye,Vt.point=Yt,Ke=null}function hr(dn,fn){if(Ke){var on=dn-Ee;at+=x(on)>180?on+(on>0?360:-360):on}else Re=dn,rt=fn;il.point(dn,fn),cr(dn,fn)}function vr(){il.lineStart()}function Ir(){hr(Re,rt),il.lineEnd(),x(at)>lt&&(Y=-(ye=180)),wt[0]=Y,wt[1]=ye,Ke=null}function gr(dn,fn){return(fn-=dn)<0?fn+360:fn}function kr(dn,fn){return dn[0]-fn[0]}function gn(dn,fn){return fn[0]<=fn[1]?fn[0]<=dn&&dn<=fn[1]:dn<fn[0]||fn[1]<dn}return function(dn){_e=ye=-(Y=he=1/0),mt=[],r.geo.stream(dn,Vt);var fn=mt.length;if(fn){mt.sort(kr);for(var on=1,Yn=mt[0],$n,Ca=[Yn];on<fn;++on)$n=mt[on],gn($n[0],Yn)||gn($n[1],Yn)?(gr(Yn[0],$n[1])>gr(Yn[0],Yn[1])&&(Yn[1]=$n[1]),gr($n[0],Yn[1])>gr(Yn[0],Yn[1])&&(Yn[0]=$n[0])):Ca.push(Yn=$n);for(var pa=-1/0,ma,fn=Ca.length-1,on=0,Yn=Ca[fn],$n;on<=fn;Yn=$n,++on)$n=Ca[on],(ma=gr(Yn[1],$n[0]))>pa&&(pa=ma,Y=$n[0],ye=Yn[1])}return mt=wt=null,Y===1/0||he===1/0?[[NaN,NaN],[NaN,NaN]]:[[Y,he],[ye,_e]]}}(),r.geo.centroid=function(Y){cu=ks=fu=Ml=vl=kl=ol=ml=gs=Kl=hu=0,r.geo.stream(Y,es);var he=gs,ye=Kl,_e=hu,Ee=he*he+ye*ye+_e*_e;return Ee<Te&&(he=kl,ye=ol,_e=ml,ks<lt&&(he=fu,ye=Ml,_e=vl),Ee=he*he+ye*ye+_e*_e,Ee<Te)?[NaN,NaN]:[Math.atan2(ye,he)*He,je(_e/Math.sqrt(Ee))*He]};var cu,ks,fu,Ml,vl,kl,ol,ml,gs,Kl,hu,es={sphere:B,point:sl,lineStart:Ec,lineEnd:Cc,polygonStart:function(){es.lineStart=ll},polygonEnd:function(){es.lineStart=Ec}};function sl(Y,he){Y*=Ie;var ye=Math.cos(he*=Ie);Yo(ye*Math.cos(Y),ye*Math.sin(Y),Math.sin(he))}function Yo(Y,he,ye){++cu,fu+=(Y-fu)/cu,Ml+=(he-Ml)/cu,vl+=(ye-vl)/cu}function Ec(){var Y,he,ye;es.point=function(Ee,Re){Ee*=Ie;var rt=Math.cos(Re*=Ie);Y=rt*Math.cos(Ee),he=rt*Math.sin(Ee),ye=Math.sin(Re),es.point=_e,Yo(Y,he,ye)};function _e(Ee,Re){Ee*=Ie;var rt=Math.cos(Re*=Ie),Ke=rt*Math.cos(Ee),at=rt*Math.sin(Ee),mt=Math.sin(Re),wt=Math.atan2(Math.sqrt((wt=he*mt-ye*at)*wt+(wt=ye*Ke-Y*mt)*wt+(wt=Y*at-he*Ke)*wt),Y*Ke+he*at+ye*mt);ks+=wt,kl+=wt*(Y+(Y=Ke)),ol+=wt*(he+(he=at)),ml+=wt*(ye+(ye=mt)),Yo(Y,he,ye)}}function Cc(){es.point=sl}function ll(){var Y,he,ye,_e,Ee;es.point=function(rt,Ke){Y=rt,he=Ke,es.point=Re,rt*=Ie;var at=Math.cos(Ke*=Ie);ye=at*Math.cos(rt),_e=at*Math.sin(rt),Ee=Math.sin(Ke),Yo(ye,_e,Ee)},es.lineEnd=function(){Re(Y,he),es.lineEnd=Cc,es.point=sl};function Re(rt,Ke){rt*=Ie;var at=Math.cos(Ke*=Ie),mt=at*Math.cos(rt),wt=at*Math.sin(rt),Vt=Math.sin(Ke),Yt=_e*Vt-Ee*wt,cr=Ee*mt-ye*Vt,Rr=ye*wt-_e*mt,ir=Math.sqrt(Yt*Yt+cr*cr+Rr*Rr),hr=ye*mt+_e*wt+Ee*Vt,vr=ir&&-it(hr)/ir,Ir=Math.atan2(ir,hr);gs+=vr*Yt,Kl+=vr*cr,hu+=vr*Rr,ks+=Ir,kl+=Ir*(ye+(ye=mt)),ol+=Ir*(_e+(_e=wt)),ml+=Ir*(Ee+(Ee=Vt)),Yo(ye,_e,Ee)}}function pu(Y,he){function ye(_e,Ee){return _e=Y(_e,Ee),he(_e[0],_e[1])}return Y.invert&&he.invert&&(ye.invert=function(_e,Ee){return _e=he.invert(_e,Ee),_e&&Y.invert(_e[0],_e[1])}),ye}function Uo(){return!0}function Cf(Y,he,ye,_e,Ee){var Re=[],rt=[];if(Y.forEach(function(ir){if(!((hr=ir.length-1)<=0)){var hr,vr=ir[0],Ir=ir[hr];if($c(vr,Ir)){Ee.lineStart();for(var gr=0;gr<hr;++gr)Ee.point((vr=ir[gr])[0],vr[1]);Ee.lineEnd();return}var kr=new Is(vr,ir,null,!0),gn=new Is(vr,null,kr,!1);kr.o=gn,Re.push(kr),rt.push(gn),kr=new Is(Ir,ir,null,!1),gn=new Is(Ir,null,kr,!0),kr.o=gn,Re.push(kr),rt.push(gn)}}),rt.sort(he),uc(Re),uc(rt),!!Re.length){for(var Ke=0,at=ye,mt=rt.length;Ke<mt;++Ke)rt[Ke].e=at=!at;for(var wt=Re[0],Vt,Yt;;){for(var cr=wt,Rr=!0;cr.v;)if((cr=cr.n)===wt)return;Vt=cr.z,Ee.lineStart();do{if(cr.v=cr.o.v=!0,cr.e){if(Rr)for(var Ke=0,mt=Vt.length;Ke<mt;++Ke)Ee.point((Yt=Vt[Ke])[0],Yt[1]);else _e(cr.x,cr.n.x,1,Ee);cr=cr.n}else{if(Rr){Vt=cr.p.z;for(var Ke=Vt.length-1;Ke>=0;--Ke)Ee.point((Yt=Vt[Ke])[0],Yt[1])}else _e(cr.x,cr.p.x,-1,Ee);cr=cr.p}cr=cr.o,Vt=cr.z,Rr=!Rr}while(!cr.v);Ee.lineEnd()}}}function uc(Y){if(!!(he=Y.length)){for(var he,ye=0,_e=Y[0],Ee;++ye<he;)_e.n=Ee=Y[ye],Ee.p=_e,_e=Ee;_e.n=Ee=Y[0],Ee.p=_e}}function Is(Y,he,ye,_e){this.x=Y,this.z=he,this.o=ye,this.e=_e,this.v=!1,this.n=this.p=null}function ul(Y,he,ye,_e){return function(Ee,Re){var rt=he(Re),Ke=Ee.invert(_e[0],_e[1]),at={point:mt,lineStart:Vt,lineEnd:Yt,polygonStart:function(){at.point=gr,at.lineStart=kr,at.lineEnd=gn,cr=[],vr=[]},polygonEnd:function(){at.point=mt,at.lineStart=Vt,at.lineEnd=Yt,cr=r.merge(cr);var dn=ht(Ke,vr);cr.length?(hr||(Re.polygonStart(),hr=!0),Cf(cr,ih,dn,ye,Re)):dn&&(hr||(Re.polygonStart(),hr=!0),Re.lineStart(),ye(null,null,1,Re),Re.lineEnd()),hr&&(Re.polygonEnd(),hr=!1),cr=vr=null},sphere:function(){Re.polygonStart(),Re.lineStart(),ye(null,null,1,Re),Re.lineEnd(),Re.polygonEnd()}};function mt(dn,fn){var on=Ee(dn,fn);Y(dn=on[0],fn=on[1])&&Re.point(dn,fn)}function wt(dn,fn){var on=Ee(dn,fn);rt.point(on[0],on[1])}function Vt(){at.point=wt,rt.lineStart()}function Yt(){at.point=mt,rt.lineEnd()}var cr,Rr=Fu(),ir=he(Rr),hr=!1,vr,Ir;function gr(dn,fn){Ir.push([dn,fn]);var on=Ee(dn,fn);ir.point(on[0],on[1])}function kr(){ir.lineStart(),Ir=[]}function gn(){gr(Ir[0][0],Ir[0][1]),ir.lineEnd();var dn=ir.clean(),fn=Rr.buffer(),on,Yn=fn.length;if(Ir.pop(),vr.push(Ir),Ir=null,!!Yn){if(dn&1){on=fn[0];var Yn=on.length-1,$n=-1,Ca;if(Yn>0){for(hr||(Re.polygonStart(),hr=!0),Re.lineStart();++$n<Yn;)Re.point((Ca=on[$n])[0],Ca[1]);Re.lineEnd()}return}Yn>1&&dn&2&&fn.push(fn.pop().concat(fn.shift())),cr.push(fn.filter(Qc))}}return at}}function Qc(Y){return Y.length>1}function Fu(){var Y=[],he;return{lineStart:function(){Y.push(he=[])},point:function(ye,_e){he.push([ye,_e])},lineEnd:B,buffer:function(){var ye=Y;return Y=[],he=null,ye},rejoin:function(){Y.length>1&&Y.push(Y.pop().concat(Y.shift()))}}}function ih(Y,he){return((Y=Y.x)[0]<0?Y[1]-ke-lt:ke-Y[1])-((he=he.x)[0]<0?he[1]-ke-lt:ke-he[1])}var nt=ul(Uo,$e,Ft,[-Le,-Le/2]);function $e(Y){var he=NaN,ye=NaN,_e=NaN,Ee;return{lineStart:function(){Y.lineStart(),Ee=1},point:function(Re,rt){var Ke=Re>0?Le:-Le,at=x(Re-he);x(at-Le)<lt?(Y.point(he,ye=(ye+rt)/2>0?ke:-ke),Y.point(_e,ye),Y.lineEnd(),Y.lineStart(),Y.point(Ke,ye),Y.point(Re,ye),Ee=0):_e!==Ke&&at>=Le&&(x(he-_e)<lt&&(he-=_e*lt),x(Re-Ke)<lt&&(Re-=Ke*lt),ye=gt(he,ye,Re,rt),Y.point(_e,ye),Y.lineEnd(),Y.lineStart(),Y.point(Ke,ye),Ee=0),Y.point(he=Re,ye=rt),_e=Ke},lineEnd:function(){Y.lineEnd(),he=ye=NaN},clean:function(){return 2-Ee}}}function gt(Y,he,ye,_e){var Ee,Re,rt=Math.sin(Y-ye);return x(rt)>lt?Math.atan((Math.sin(he)*(Re=Math.cos(_e))*Math.sin(ye)-Math.sin(_e)*(Ee=Math.cos(he))*Math.sin(Y))/(Ee*Re*rt)):(he+_e)/2}function Ft(Y,he,ye,_e){var Ee;if(Y==null)Ee=ye*ke,_e.point(-Le,Ee),_e.point(0,Ee),_e.point(Le,Ee),_e.point(Le,0),_e.point(Le,-Ee),_e.point(0,-Ee),_e.point(-Le,-Ee),_e.point(-Le,0),_e.point(-Le,Ee);else if(x(Y[0]-he[0])>lt){var Re=Y[0]<he[0]?Le:-Le;Ee=ye*Re/2,_e.point(-Re,Ee),_e.point(0,Ee),_e.point(Re,Ee)}else _e.point(he[0],he[1])}function ht(Y,he){var ye=Y[0],_e=Y[1],Ee=[Math.sin(ye),-Math.cos(ye),0],Re=0,rt=0;pl.reset();for(var Ke=0,at=he.length;Ke<at;++Ke){var mt=he[Ke],wt=mt.length;if(!!wt)for(var Vt=mt[0],Yt=Vt[0],cr=Vt[1]/2+Le/4,Rr=Math.sin(cr),ir=Math.cos(cr),hr=1;;){hr===wt&&(hr=0),Y=mt[hr];var vr=Y[0],Ir=Y[1]/2+Le/4,gr=Math.sin(Ir),kr=Math.cos(Ir),gn=vr-Yt,dn=gn>=0?1:-1,fn=dn*gn,on=fn>Le,Yn=Rr*gr;if(pl.add(Math.atan2(Yn*dn*Math.sin(fn),ir*kr+Yn*Math.cos(fn))),Re+=on?gn+dn*Ue:gn,on^Yt>=ye^vr>=ye){var $n=dl(Su(Vt),Su(Y));$i($n);var Ca=dl(Ee,$n);$i(Ca);var pa=(on^gn>=0?-1:1)*je(Ca[2]);(_e>pa||_e===pa&&($n[0]||$n[1]))&&(rt+=on^gn>=0?1:-1)}if(!hr++)break;Yt=vr,Rr=gr,ir=kr,Vt=Y}}return(Re<-lt||Re<lt&&pl<-lt)^rt&1}function Pt(Y){var he=Math.cos(Y),ye=he>0,_e=x(he)>lt,Ee=Ni(Y,6*Ie);return ul(Re,rt,Ee,ye?[0,-Y]:[-Le,Y-Le]);function Re(mt,wt){return Math.cos(mt)*Math.cos(wt)>he}function rt(mt){var wt,Vt,Yt,cr,Rr;return{lineStart:function(){cr=Yt=!1,Rr=1},point:function(ir,hr){var vr=[ir,hr],Ir,gr=Re(ir,hr),kr=ye?gr?0:at(ir,hr):gr?at(ir+(ir<0?Le:-Le),hr):0;if(!wt&&(cr=Yt=gr)&&mt.lineStart(),gr!==Yt&&(Ir=Ke(wt,vr),($c(wt,Ir)||$c(vr,Ir))&&(vr[0]+=lt,vr[1]+=lt,gr=Re(vr[0],vr[1]))),gr!==Yt)Rr=0,gr?(mt.lineStart(),Ir=Ke(vr,wt),mt.point(Ir[0],Ir[1])):(Ir=Ke(wt,vr),mt.point(Ir[0],Ir[1]),mt.lineEnd()),wt=Ir;else if(_e&&wt&&ye^gr){var gn;!(kr&Vt)&&(gn=Ke(vr,wt,!0))&&(Rr=0,ye?(mt.lineStart(),mt.point(gn[0][0],gn[0][1]),mt.point(gn[1][0],gn[1][1]),mt.lineEnd()):(mt.point(gn[1][0],gn[1][1]),mt.lineEnd(),mt.lineStart(),mt.point(gn[0][0],gn[0][1])))}gr&&(!wt||!$c(wt,vr))&&mt.point(vr[0],vr[1]),wt=vr,Yt=gr,Vt=kr},lineEnd:function(){Yt&&mt.lineEnd(),wt=null},clean:function(){return Rr|(cr&&Yt)<<1}}}function Ke(mt,wt,Vt){var Yt=Su(mt),cr=Su(wt),Rr=[1,0,0],ir=dl(Yt,cr),hr=Zl(ir,ir),vr=ir[0],Ir=hr-vr*vr;if(!Ir)return!Vt&&mt;var gr=he*hr/Ir,kr=-he*vr/Ir,gn=dl(Rr,ir),dn=Ku(Rr,gr),fn=Ku(ir,kr);lc(dn,fn);var on=gn,Yn=Zl(dn,on),$n=Zl(on,on),Ca=Yn*Yn-$n*(Zl(dn,dn)-1);if(!(Ca<0)){var pa=Math.sqrt(Ca),ma=Ku(on,(-Yn-pa)/$n);if(lc(ma,dn),ma=Gs(ma),!Vt)return ma;var Sn=mt[0],Kn=wt[0],ua=mt[1],yn=wt[1],Vn;Kn<Sn&&(Vn=Sn,Sn=Kn,Kn=Vn);var ja=Kn-Sn,xi=x(ja-Le)<lt,Pi=xi||ja<lt;if(!xi&&yn<ua&&(Vn=ua,ua=yn,yn=Vn),Pi?xi?ua+yn>0^ma[1]<(x(ma[0]-Sn)<lt?ua:yn):ua<=ma[1]&&ma[1]<=yn:ja>Le^(Sn<=ma[0]&&ma[0]<=Kn)){var vo=Ku(on,(-Yn+pa)/$n);return lc(vo,dn),[ma,Gs(vo)]}}}function at(mt,wt){var Vt=ye?Y:Le-Y,Yt=0;return mt<-Vt?Yt|=1:mt>Vt&&(Yt|=2),wt<-Vt?Yt|=4:wt>Vt&&(Yt|=8),Yt}}function Et(Y,he,ye,_e){return function(Ee){var Re=Ee.a,rt=Ee.b,Ke=Re.x,at=Re.y,mt=rt.x,wt=rt.y,Vt=0,Yt=1,cr=mt-Ke,Rr=wt-at,ir;if(ir=Y-Ke,!(!cr&&ir>0)){if(ir/=cr,cr<0){if(ir<Vt)return;ir<Yt&&(Yt=ir)}else if(cr>0){if(ir>Yt)return;ir>Vt&&(Vt=ir)}if(ir=ye-Ke,!(!cr&&ir<0)){if(ir/=cr,cr<0){if(ir>Yt)return;ir>Vt&&(Vt=ir)}else if(cr>0){if(ir<Vt)return;ir<Yt&&(Yt=ir)}if(ir=he-at,!(!Rr&&ir>0)){if(ir/=Rr,Rr<0){if(ir<Vt)return;ir<Yt&&(Yt=ir)}else if(Rr>0){if(ir>Yt)return;ir>Vt&&(Vt=ir)}if(ir=_e-at,!(!Rr&&ir<0)){if(ir/=Rr,Rr<0){if(ir>Yt)return;ir>Vt&&(Vt=ir)}else if(Rr>0){if(ir<Vt)return;ir<Yt&&(Yt=ir)}return Vt>0&&(Ee.a={x:Ke+Vt*cr,y:at+Vt*Rr}),Yt<1&&(Ee.b={x:Ke+Yt*cr,y:at+Yt*Rr}),Ee}}}}}}var Jt=1e9;r.geo.clipExtent=function(){var Y,he,ye,_e,Ee,Re,rt={stream:function(Ke){return Ee&&(Ee.valid=!1),Ee=Re(Ke),Ee.valid=!0,Ee},extent:function(Ke){return arguments.length?(Re=ur(Y=+Ke[0][0],he=+Ke[0][1],ye=+Ke[1][0],_e=+Ke[1][1]),Ee&&(Ee.valid=!1,Ee=null),rt):[[Y,he],[ye,_e]]}};return rt.extent([[0,0],[960,500]])};function ur(Y,he,ye,_e){return function(Ke){var at=Ke,mt=Fu(),wt=Et(Y,he,ye,_e),Vt,Yt,cr,Rr={point:Ir,lineStart:Ca,lineEnd:pa,polygonStart:function(){Ke=mt,Vt=[],Yt=[],$n=!0},polygonEnd:function(){Ke=at,Vt=r.merge(Vt);var Sn=ir([Y,_e]),Kn=$n&&Sn,ua=Vt.length;(Kn||ua)&&(Ke.polygonStart(),Kn&&(Ke.lineStart(),hr(null,null,1,Ke),Ke.lineEnd()),ua&&Cf(Vt,Re,Sn,hr,Ke),Ke.polygonEnd()),Vt=Yt=cr=null}};function ir(Sn){for(var Kn=0,ua=Yt.length,yn=Sn[1],Vn=0;Vn<ua;++Vn)for(var ja=1,xi=Yt[Vn],Pi=xi.length,vo=xi[0],Ro;ja<Pi;++ja)Ro=xi[ja],vo[1]<=yn?Ro[1]>yn&&ft(vo,Ro,Sn)>0&&++Kn:Ro[1]<=yn&&ft(vo,Ro,Sn)<0&&--Kn,vo=Ro;return Kn!==0}function hr(Sn,Kn,ua,yn){var Vn=0,ja=0;if(Sn==null||(Vn=Ee(Sn,ua))!==(ja=Ee(Kn,ua))||rt(Sn,Kn)<0^ua>0)do yn.point(Vn===0||Vn===3?Y:ye,Vn>1?_e:he);while((Vn=(Vn+ua+4)%4)!==ja);else yn.point(Kn[0],Kn[1])}function vr(Sn,Kn){return Y<=Sn&&Sn<=ye&&he<=Kn&&Kn<=_e}function Ir(Sn,Kn){vr(Sn,Kn)&&Ke.point(Sn,Kn)}var gr,kr,gn,dn,fn,on,Yn,$n;function Ca(){Rr.point=ma,Yt&&Yt.push(cr=[]),Yn=!0,on=!1,dn=fn=NaN}function pa(){Vt&&(ma(gr,kr),gn&&on&&mt.rejoin(),Vt.push(mt.buffer())),Rr.point=Ir,on&&Ke.lineEnd()}function ma(Sn,Kn){Sn=Math.max(-Jt,Math.min(Jt,Sn)),Kn=Math.max(-Jt,Math.min(Jt,Kn));var ua=vr(Sn,Kn);if(Yt&&cr.push([Sn,Kn]),Yn)gr=Sn,kr=Kn,gn=ua,Yn=!1,ua&&(Ke.lineStart(),Ke.point(Sn,Kn));else if(ua&&on)Ke.point(Sn,Kn);else{var yn={a:{x:dn,y:fn},b:{x:Sn,y:Kn}};wt(yn)?(on||(Ke.lineStart(),Ke.point(yn.a.x,yn.a.y)),Ke.point(yn.b.x,yn.b.y),ua||Ke.lineEnd(),$n=!1):ua&&(Ke.lineStart(),Ke.point(Sn,Kn),$n=!1)}dn=Sn,fn=Kn,on=ua}return Rr};function Ee(Ke,at){return x(Ke[0]-Y)<lt?at>0?0:3:x(Ke[0]-ye)<lt?at>0?2:1:x(Ke[1]-he)<lt?at>0?1:0:at>0?3:2}function Re(Ke,at){return rt(Ke.x,at.x)}function rt(Ke,at){var mt=Ee(Ke,1),wt=Ee(at,1);return mt!==wt?mt-wt:mt===0?at[1]-Ke[1]:mt===1?Ke[0]-at[0]:mt===2?Ke[1]-at[1]:at[0]-Ke[0]}}function ar(Y){var he=0,ye=Le/3,_e=oi(Y),Ee=_e(he,ye);return Ee.parallels=function(Re){return arguments.length?_e(he=Re[0]*Le/180,ye=Re[1]*Le/180):[he/Le*180,ye/Le*180]},Ee}function xr(Y,he){var ye=Math.sin(Y),_e=(ye+Math.sin(he))/2,Ee=1+ye*(2*_e-ye),Re=Math.sqrt(Ee)/_e;function rt(Ke,at){var mt=Math.sqrt(Ee-2*_e*Math.sin(at))/_e;return[mt*Math.sin(Ke*=_e),Re-mt*Math.cos(Ke)]}return rt.invert=function(Ke,at){var mt=Re-at;return[Math.atan2(Ke,mt)/_e,je((Ee-(Ke*Ke+mt*mt)*_e*_e)/(2*_e))]},rt}(r.geo.conicEqualArea=function(){return ar(xr)}).raw=xr,r.geo.albers=function(){return r.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},r.geo.albersUsa=function(){var Y=r.geo.albers(),he=r.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),ye=r.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),_e,Ee={point:function(mt,wt){_e=[mt,wt]}},Re,rt,Ke;function at(mt){var wt=mt[0],Vt=mt[1];return _e=null,Re(wt,Vt),_e||(rt(wt,Vt),_e)||Ke(wt,Vt),_e}return at.invert=function(mt){var wt=Y.scale(),Vt=Y.translate(),Yt=(mt[0]-Vt[0])/wt,cr=(mt[1]-Vt[1])/wt;return(cr>=.12&&cr<.234&&Yt>=-.425&&Yt<-.214?he:cr>=.166&&cr<.234&&Yt>=-.214&&Yt<-.115?ye:Y).invert(mt)},at.stream=function(mt){var wt=Y.stream(mt),Vt=he.stream(mt),Yt=ye.stream(mt);return{point:function(cr,Rr){wt.point(cr,Rr),Vt.point(cr,Rr),Yt.point(cr,Rr)},sphere:function(){wt.sphere(),Vt.sphere(),Yt.sphere()},lineStart:function(){wt.lineStart(),Vt.lineStart(),Yt.lineStart()},lineEnd:function(){wt.lineEnd(),Vt.lineEnd(),Yt.lineEnd()},polygonStart:function(){wt.polygonStart(),Vt.polygonStart(),Yt.polygonStart()},polygonEnd:function(){wt.polygonEnd(),Vt.polygonEnd(),Yt.polygonEnd()}}},at.precision=function(mt){return arguments.length?(Y.precision(mt),he.precision(mt),ye.precision(mt),at):Y.precision()},at.scale=function(mt){return arguments.length?(Y.scale(mt),he.scale(mt*.35),ye.scale(mt),at.translate(Y.translate())):Y.scale()},at.translate=function(mt){if(!arguments.length)return Y.translate();var wt=Y.scale(),Vt=+mt[0],Yt=+mt[1];return Re=Y.translate(mt).clipExtent([[Vt-.455*wt,Yt-.238*wt],[Vt+.455*wt,Yt+.238*wt]]).stream(Ee).point,rt=he.translate([Vt-.307*wt,Yt+.201*wt]).clipExtent([[Vt-.425*wt+lt,Yt+.12*wt+lt],[Vt-.214*wt-lt,Yt+.234*wt-lt]]).stream(Ee).point,Ke=ye.translate([Vt-.205*wt,Yt+.212*wt]).clipExtent([[Vt-.214*wt+lt,Yt+.166*wt+lt],[Vt-.115*wt-lt,Yt+.234*wt-lt]]).stream(Ee).point,at},at.scale(1070)};var Ar,mn,Zr={point:B,lineStart:B,lineEnd:B,polygonStart:function(){mn=0,Zr.lineStart=bn},polygonEnd:function(){Zr.lineStart=Zr.lineEnd=Zr.point=B,Ar+=x(mn/2)}};function bn(){var Y,he,ye,_e;Zr.point=function(Re,rt){Zr.point=Ee,Y=ye=Re,he=_e=rt};function Ee(Re,rt){mn+=_e*Re-ye*rt,ye=Re,_e=rt}Zr.lineEnd=function(){Ee(Y,he)}}var Qn,Cn,Hn,ra,qn={point:Un,lineStart:B,lineEnd:B,polygonStart:B,polygonEnd:B};function Un(Y,he){Y<Qn&&(Qn=Y),Y>Hn&&(Hn=Y),he<Cn&&(Cn=he),he>ra&&(ra=he)}function Fa(){var Y=ai(4.5),he=[],ye={point:_e,lineStart:function(){ye.point=Ee},lineEnd:rt,polygonStart:function(){ye.lineEnd=Ke},polygonEnd:function(){ye.lineEnd=rt,ye.point=_e},pointRadius:function(at){return Y=ai(at),ye},result:function(){if(he.length){var at=he.join("");return he=[],at}}};function _e(at,mt){he.push("M",at,",",mt,Y)}function Ee(at,mt){he.push("M",at,",",mt),ye.point=Re}function Re(at,mt){he.push("L",at,",",mt)}function rt(){ye.point=_e}function Ke(){he.push("Z")}return ye}function ai(Y){return"m0,"+Y+"a"+Y+","+Y+" 0 1,1 0,"+-2*Y+"a"+Y+","+Y+" 0 1,1 0,"+2*Y+"z"}var _a={point:Na,lineStart:wi,lineEnd:ya,polygonStart:function(){_a.lineStart=va},polygonEnd:function(){_a.point=Na,_a.lineStart=wi,_a.lineEnd=ya}};function Na(Y,he){fu+=Y,Ml+=he,++vl}function wi(){var Y,he;_a.point=function(_e,Ee){_a.point=ye,Na(Y=_e,he=Ee)};function ye(_e,Ee){var Re=_e-Y,rt=Ee-he,Ke=Math.sqrt(Re*Re+rt*rt);kl+=Ke*(Y+_e)/2,ol+=Ke*(he+Ee)/2,ml+=Ke,Na(Y=_e,he=Ee)}}function ya(){_a.point=Na}function va(){var Y,he,ye,_e;_a.point=function(Re,rt){_a.point=Ee,Na(Y=ye=Re,he=_e=rt)};function Ee(Re,rt){var Ke=Re-ye,at=rt-_e,mt=Math.sqrt(Ke*Ke+at*at);kl+=mt*(ye+Re)/2,ol+=mt*(_e+rt)/2,ml+=mt,mt=_e*Re-ye*rt,gs+=mt*(ye+Re),Kl+=mt*(_e+rt),hu+=mt*3,Na(ye=Re,_e=rt)}_a.lineEnd=function(){Ee(Y,he)}}function Ia(Y){var he=4.5,ye={point:_e,lineStart:function(){ye.point=Ee},lineEnd:rt,polygonStart:function(){ye.lineEnd=Ke},polygonEnd:function(){ye.lineEnd=rt,ye.point=_e},pointRadius:function(at){return he=at,ye},result:B};function _e(at,mt){Y.moveTo(at+he,mt),Y.arc(at,mt,he,0,Ue)}function Ee(at,mt){Y.moveTo(at,mt),ye.point=Re}function Re(at,mt){Y.lineTo(at,mt)}function rt(){ye.point=_e}function Ke(){Y.closePath()}return ye}function ui(Y){var he=.5,ye=Math.cos(30*Ie),_e=16;function Ee(at){return(_e?rt:Re)(at)}function Re(at){return Ci(at,function(mt,wt){mt=Y(mt,wt),at.point(mt[0],mt[1])})}function rt(at){var mt,wt,Vt,Yt,cr,Rr,ir,hr,vr,Ir,gr,kr,gn={point:dn,lineStart:fn,lineEnd:Yn,polygonStart:function(){at.polygonStart(),gn.lineStart=$n},polygonEnd:function(){at.polygonEnd(),gn.lineStart=fn}};function dn(ma,Sn){ma=Y(ma,Sn),at.point(ma[0],ma[1])}function fn(){hr=NaN,gn.point=on,at.lineStart()}function on(ma,Sn){var Kn=Su([ma,Sn]),ua=Y(ma,Sn);Ke(hr,vr,ir,Ir,gr,kr,hr=ua[0],vr=ua[1],ir=ma,Ir=Kn[0],gr=Kn[1],kr=Kn[2],_e,at),at.point(hr,vr)}function Yn(){gn.point=dn,at.lineEnd()}function $n(){fn(),gn.point=Ca,gn.lineEnd=pa}function Ca(ma,Sn){on(mt=ma,Sn),wt=hr,Vt=vr,Yt=Ir,cr=gr,Rr=kr,gn.point=on}function pa(){Ke(hr,vr,ir,Ir,gr,kr,wt,Vt,mt,Yt,cr,Rr,_e,at),gn.lineEnd=Yn,Yn()}return gn}function Ke(at,mt,wt,Vt,Yt,cr,Rr,ir,hr,vr,Ir,gr,kr,gn){var dn=Rr-at,fn=ir-mt,on=dn*dn+fn*fn;if(on>4*he&&kr--){var Yn=Vt+vr,$n=Yt+Ir,Ca=cr+gr,pa=Math.sqrt(Yn*Yn+$n*$n+Ca*Ca),ma=Math.asin(Ca/=pa),Sn=x(x(Ca)-1)<lt||x(wt-hr)<lt?(wt+hr)/2:Math.atan2($n,Yn),Kn=Y(Sn,ma),ua=Kn[0],yn=Kn[1],Vn=ua-at,ja=yn-mt,xi=fn*Vn-dn*ja;(xi*xi/on>he||x((dn*Vn+fn*ja)/on-.5)>.3||Vt*vr+Yt*Ir+cr*gr<ye)&&(Ke(at,mt,wt,Vt,Yt,cr,ua,yn,Sn,Yn/=pa,$n/=pa,Ca,kr,gn),gn.point(ua,yn),Ke(ua,yn,Sn,Yn,$n,Ca,Rr,ir,hr,vr,Ir,gr,kr,gn))}}return Ee.precision=function(at){return arguments.length?(_e=(he=at*at)>0&&16,Ee):Math.sqrt(he)},Ee}r.geo.path=function(){var Y=4.5,he,ye,_e,Ee,Re;function rt(at){return at&&(typeof Y=="function"&&Ee.pointRadius(+Y.apply(this,arguments)),(!Re||!Re.valid)&&(Re=_e(Ee)),r.geo.stream(at,Re)),Ee.result()}rt.area=function(at){return Ar=0,r.geo.stream(at,_e(Zr)),Ar},rt.centroid=function(at){return fu=Ml=vl=kl=ol=ml=gs=Kl=hu=0,r.geo.stream(at,_e(_a)),hu?[gs/hu,Kl/hu]:ml?[kl/ml,ol/ml]:vl?[fu/vl,Ml/vl]:[NaN,NaN]},rt.bounds=function(at){return Hn=ra=-(Qn=Cn=1/0),r.geo.stream(at,_e(qn)),[[Qn,Cn],[Hn,ra]]},rt.projection=function(at){return arguments.length?(_e=(he=at)?at.stream||ki(at):G,Ke()):he},rt.context=function(at){return arguments.length?(Ee=(ye=at)==null?new Fa:new Ia(at),typeof Y!="function"&&Ee.pointRadius(Y),Ke()):ye},rt.pointRadius=function(at){return arguments.length?(Y=typeof at=="function"?at:(Ee.pointRadius(+at),+at),rt):Y};function Ke(){return Re=null,rt}return rt.projection(r.geo.albersUsa()).context(null)};function ki(Y){var he=ui(function(ye,_e){return Y([ye*He,_e*He])});return function(ye){return Ti(he(ye))}}r.geo.transform=function(Y){return{stream:function(he){var ye=new vi(he);for(var _e in Y)ye[_e]=Y[_e];return ye}}};function vi(Y){this.stream=Y}vi.prototype={point:function(Y,he){this.stream.point(Y,he)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ci(Y,he){return{point:he,sphere:function(){Y.sphere()},lineStart:function(){Y.lineStart()},lineEnd:function(){Y.lineEnd()},polygonStart:function(){Y.polygonStart()},polygonEnd:function(){Y.polygonEnd()}}}r.geo.projection=Xn,r.geo.projectionMutator=oi;function Xn(Y){return oi(function(){return Y})()}function oi(Y){var he,ye,_e,Ee=ui(function(on,Yn){return on=he(on,Yn),[on[0]*Re+cr,Rr-on[1]*Re]}),Re=150,rt=480,Ke=250,at=0,mt=0,wt=0,Vt=0,Yt=0,cr,Rr,ir=nt,hr=G,vr=null,Ir=null,gr;function kr(on){return on=_e(on[0]*Ie,on[1]*Ie),[on[0]*Re+cr,Rr-on[1]*Re]}function gn(on){return on=_e.invert((on[0]-cr)/Re,(Rr-on[1])/Re),on&&[on[0]*He,on[1]*He]}kr.stream=function(on){return gr&&(gr.valid=!1),gr=Ti(ir(ye,Ee(hr(on)))),gr.valid=!0,gr},kr.clipAngle=function(on){return arguments.length?(ir=on==null?(vr=on,nt):Pt((vr=+on)*Ie),fn()):vr},kr.clipExtent=function(on){return arguments.length?(Ir=on,hr=on?ur(on[0][0],on[0][1],on[1][0],on[1][1]):G,fn()):Ir},kr.scale=function(on){return arguments.length?(Re=+on,dn()):Re},kr.translate=function(on){return arguments.length?(rt=+on[0],Ke=+on[1],dn()):[rt,Ke]},kr.center=function(on){return arguments.length?(at=on[0]%360*Ie,mt=on[1]%360*Ie,dn()):[at*He,mt*He]},kr.rotate=function(on){return arguments.length?(wt=on[0]%360*Ie,Vt=on[1]%360*Ie,Yt=on.length>2?on[2]%360*Ie:0,dn()):[wt*He,Vt*He,Yt*He]},r.rebind(kr,Ee,"precision");function dn(){_e=pu(ye=Zi(wt,Vt,Yt),he);var on=he(at,mt);return cr=rt-on[0]*Re,Rr=Ke+on[1]*Re,fn()}function fn(){return gr&&(gr.valid=!1,gr=null),kr}return function(){return he=Y.apply(this,arguments),kr.invert=he.invert&&gn,dn()}}function Ti(Y){return Ci(Y,function(he,ye){Y.point(he*Ie,ye*Ie)})}function Sa(Y,he){return[Y,he]}(r.geo.equirectangular=function(){return Xn(Sa)}).raw=Sa.invert=Sa,r.geo.rotation=function(Y){Y=Zi(Y[0]%360*Ie,Y[1]*Ie,Y.length>2?Y[2]*Ie:0);function he(ye){return ye=Y(ye[0]*Ie,ye[1]*Ie),ye[0]*=He,ye[1]*=He,ye}return he.invert=function(ye){return ye=Y.invert(ye[0]*Ie,ye[1]*Ie),ye[0]*=He,ye[1]*=He,ye},he};function _o(Y,he){return[Y>Le?Y-Ue:Y<-Le?Y+Ue:Y,he]}_o.invert=Sa;function Zi(Y,he,ye){return Y?he||ye?pu(zs(Y),Gi(he,ye)):zs(Y):he||ye?Gi(he,ye):_o}function qi(Y){return function(he,ye){return he+=Y,[he>Le?he-Ue:he<-Le?he+Ue:he,ye]}}function zs(Y){var he=qi(Y);return he.invert=qi(-Y),he}function Gi(Y,he){var ye=Math.cos(Y),_e=Math.sin(Y),Ee=Math.cos(he),Re=Math.sin(he);function rt(Ke,at){var mt=Math.cos(at),wt=Math.cos(Ke)*mt,Vt=Math.sin(Ke)*mt,Yt=Math.sin(at),cr=Yt*ye+wt*_e;return[Math.atan2(Vt*Ee-cr*Re,wt*ye-Yt*_e),je(cr*Ee+Vt*Re)]}return rt.invert=function(Ke,at){var mt=Math.cos(at),wt=Math.cos(Ke)*mt,Vt=Math.sin(Ke)*mt,Yt=Math.sin(at),cr=Yt*Ee-Vt*Re;return[Math.atan2(Vt*Ee+Yt*Re,wt*ye+cr*_e),je(cr*ye-wt*_e)]},rt}r.geo.circle=function(){var Y=[0,0],he,ye=6,_e;function Ee(){var Re=typeof Y=="function"?Y.apply(this,arguments):Y,rt=Zi(-Re[0]*Ie,-Re[1]*Ie,0).invert,Ke=[];return _e(null,null,1,{point:function(at,mt){Ke.push(at=rt(at,mt)),at[0]*=He,at[1]*=He}}),{type:"Polygon",coordinates:[Ke]}}return Ee.origin=function(Re){return arguments.length?(Y=Re,Ee):Y},Ee.angle=function(Re){return arguments.length?(_e=Ni((he=+Re)*Ie,ye*Ie),Ee):he},Ee.precision=function(Re){return arguments.length?(_e=Ni(he*Ie,(ye=+Re)*Ie),Ee):ye},Ee.angle(90)};function Ni(Y,he){var ye=Math.cos(Y),_e=Math.sin(Y);return function(Ee,Re,rt,Ke){var at=rt*he;Ee!=null?(Ee=yo(ye,Ee),Re=yo(ye,Re),(rt>0?Ee<Re:Ee>Re)&&(Ee+=rt*Ue)):(Ee=Y+rt*Ue,Re=Y-.5*at);for(var mt,wt=Ee;rt>0?wt>Re:wt<Re;wt-=at)Ke.point((mt=Gs([ye,-_e*Math.cos(wt),-_e*Math.sin(wt)]))[0],mt[1])}}function yo(Y,he){var ye=Su(he);ye[0]-=Y,$i(ye);var _e=it(-ye[1]);return((-ye[2]<0?-_e:_e)+2*Math.PI-lt)%(2*Math.PI)}r.geo.distance=function(Y,he){var ye=(he[0]-Y[0])*Ie,_e=Y[1]*Ie,Ee=he[1]*Ie,Re=Math.sin(ye),rt=Math.cos(ye),Ke=Math.sin(_e),at=Math.cos(_e),mt=Math.sin(Ee),wt=Math.cos(Ee),Vt;return Math.atan2(Math.sqrt((Vt=wt*Re)*Vt+(Vt=at*mt-Ke*wt*rt)*Vt),Ke*mt+at*wt*rt)},r.geo.graticule=function(){var Y,he,ye,_e,Ee,Re,rt,Ke,at=10,mt=at,wt=90,Vt=360,Yt,cr,Rr,ir,hr=2.5;function vr(){return{type:"MultiLineString",coordinates:Ir()}}function Ir(){return r.range(Math.ceil(_e/wt)*wt,ye,wt).map(Rr).concat(r.range(Math.ceil(Ke/Vt)*Vt,rt,Vt).map(ir)).concat(r.range(Math.ceil(he/at)*at,Y,at).filter(function(gr){return x(gr%wt)>lt}).map(Yt)).concat(r.range(Math.ceil(Re/mt)*mt,Ee,mt).filter(function(gr){return x(gr%Vt)>lt}).map(cr))}return vr.lines=function(){return Ir().map(function(gr){return{type:"LineString",coordinates:gr}})},vr.outline=function(){return{type:"Polygon",coordinates:[Rr(_e).concat(ir(rt).slice(1),Rr(ye).reverse().slice(1),ir(Ke).reverse().slice(1))]}},vr.extent=function(gr){return arguments.length?vr.majorExtent(gr).minorExtent(gr):vr.minorExtent()},vr.majorExtent=function(gr){return arguments.length?(_e=+gr[0][0],ye=+gr[1][0],Ke=+gr[0][1],rt=+gr[1][1],_e>ye&&(gr=_e,_e=ye,ye=gr),Ke>rt&&(gr=Ke,Ke=rt,rt=gr),vr.precision(hr)):[[_e,Ke],[ye,rt]]},vr.minorExtent=function(gr){return arguments.length?(he=+gr[0][0],Y=+gr[1][0],Re=+gr[0][1],Ee=+gr[1][1],he>Y&&(gr=he,he=Y,Y=gr),Re>Ee&&(gr=Re,Re=Ee,Ee=gr),vr.precision(hr)):[[he,Re],[Y,Ee]]},vr.step=function(gr){return arguments.length?vr.majorStep(gr).minorStep(gr):vr.minorStep()},vr.majorStep=function(gr){return arguments.length?(wt=+gr[0],Vt=+gr[1],vr):[wt,Vt]},vr.minorStep=function(gr){return arguments.length?(at=+gr[0],mt=+gr[1],vr):[at,mt]},vr.precision=function(gr){return arguments.length?(hr=+gr,Yt=ts(Re,Ee,90),cr=ls(he,Y,hr),Rr=ts(Ke,rt,90),ir=ls(_e,ye,hr),vr):hr},vr.majorExtent([[-180,-90+lt],[180,90-lt]]).minorExtent([[-180,-80-lt],[180,80+lt]])};function ts(Y,he,ye){var _e=r.range(Y,he-lt,ye).concat(he);return function(Ee){return _e.map(function(Re){return[Ee,Re]})}}function ls(Y,he,ye){var _e=r.range(Y,he-lt,ye).concat(he);return function(Ee){return _e.map(function(Re){return[Re,Ee]})}}function Ss(Y){return Y.source}function Ws(Y){return Y.target}r.geo.greatArc=function(){var Y=Ss,he,ye=Ws,_e;function Ee(){return{type:"LineString",coordinates:[he||Y.apply(this,arguments),_e||ye.apply(this,arguments)]}}return Ee.distance=function(){return r.geo.distance(he||Y.apply(this,arguments),_e||ye.apply(this,arguments))},Ee.source=function(Re){return arguments.length?(Y=Re,he=typeof Re=="function"?null:Re,Ee):Y},Ee.target=function(Re){return arguments.length?(ye=Re,_e=typeof Re=="function"?null:Re,Ee):ye},Ee.precision=function(){return arguments.length?Ee:0},Ee},r.geo.interpolate=function(Y,he){return so(Y[0]*Ie,Y[1]*Ie,he[0]*Ie,he[1]*Ie)};function so(Y,he,ye,_e){var Ee=Math.cos(he),Re=Math.sin(he),rt=Math.cos(_e),Ke=Math.sin(_e),at=Ee*Math.cos(Y),mt=Ee*Math.sin(Y),wt=rt*Math.cos(ye),Vt=rt*Math.sin(ye),Yt=2*Math.asin(Math.sqrt(It(_e-he)+Ee*rt*It(ye-Y))),cr=1/Math.sin(Yt),Rr=Yt?function(ir){var hr=Math.sin(ir*=Yt)*cr,vr=Math.sin(Yt-ir)*cr,Ir=vr*at+hr*wt,gr=vr*mt+hr*Vt,kr=vr*Re+hr*Ke;return[Math.atan2(gr,Ir)*He,Math.atan2(kr,Math.sqrt(Ir*Ir+gr*gr))*He]}:function(){return[Y*He,he*He]};return Rr.distance=Yt,Rr}r.geo.length=function(Y){return Xa=0,r.geo.stream(Y,hi),Xa};var Xa,hi={sphere:B,point:B,lineStart:Oo,lineEnd:B,polygonStart:B,polygonEnd:B};function Oo(){var Y,he,ye;hi.point=function(Ee,Re){Y=Ee*Ie,he=Math.sin(Re*=Ie),ye=Math.cos(Re),hi.point=_e},hi.lineEnd=function(){hi.point=hi.lineEnd=B};function _e(Ee,Re){var rt=Math.sin(Re*=Ie),Ke=Math.cos(Re),at=x((Ee*=Ie)-Y),mt=Math.cos(at);Xa+=Math.atan2(Math.sqrt((at=Ke*Math.sin(at))*at+(at=ye*rt-he*Ke*mt)*at),he*rt+ye*Ke*mt),Y=Ee,he=rt,ye=Ke}}function lo(Y,he){function ye(_e,Ee){var Re=Math.cos(_e),rt=Math.cos(Ee),Ke=Y(Re*rt);return[Ke*rt*Math.sin(_e),Ke*Math.sin(Ee)]}return ye.invert=function(_e,Ee){var Re=Math.sqrt(_e*_e+Ee*Ee),rt=he(Re),Ke=Math.sin(rt),at=Math.cos(rt);return[Math.atan2(_e*Ke,Re*at),Math.asin(Re&&Ee*Ke/Re)]},ye}var Eo=lo(function(Y){return Math.sqrt(2/(1+Y))},function(Y){return 2*Math.asin(Y/2)});(r.geo.azimuthalEqualArea=function(){return Xn(Eo)}).raw=Eo;var Ki=lo(function(Y){var he=Math.acos(Y);return he&&he/Math.sin(he)},G);(r.geo.azimuthalEquidistant=function(){return Xn(Ki)}).raw=Ki;function si(Y,he){var ye=Math.cos(Y),_e=function(Ke){return Math.tan(Le/4+Ke/2)},Ee=Y===he?Math.sin(Y):Math.log(ye/Math.cos(he))/Math.log(_e(he)/_e(Y)),Re=ye*Math.pow(_e(Y),Ee)/Ee;if(!Ee)return Oa;function rt(Ke,at){Re>0?at<-ke+lt&&(at=-ke+lt):at>ke-lt&&(at=ke-lt);var mt=Re/Math.pow(_e(at),Ee);return[mt*Math.sin(Ee*Ke),Re-mt*Math.cos(Ee*Ke)]}return rt.invert=function(Ke,at){var mt=Re-at,wt=Ye(Ee)*Math.sqrt(Ke*Ke+mt*mt);return[Math.atan2(Ke,mt)/Ee,2*Math.atan(Math.pow(Re/wt,1/Ee))-ke]},rt}(r.geo.conicConformal=function(){return ar(si)}).raw=si;function eo(Y,he){var ye=Math.cos(Y),_e=Y===he?Math.sin(Y):(ye-Math.cos(he))/(he-Y),Ee=ye/_e+Y;if(x(_e)<lt)return Sa;function Re(rt,Ke){var at=Ee-Ke;return[at*Math.sin(_e*rt),Ee-at*Math.cos(_e*rt)]}return Re.invert=function(rt,Ke){var at=Ee-Ke;return[Math.atan2(rt,at)/_e,Ee-Ye(_e)*Math.sqrt(rt*rt+at*at)]},Re}(r.geo.conicEquidistant=function(){return ar(eo)}).raw=eo;var xo=lo(function(Y){return 1/Y},Math.atan);(r.geo.gnomonic=function(){return Xn(xo)}).raw=xo;function Oa(Y,he){return[Y,Math.log(Math.tan(Le/4+he/2))]}Oa.invert=function(Y,he){return[Y,2*Math.atan(Math.exp(he))-ke]};function Da(Y){var he=Xn(Y),ye=he.scale,_e=he.translate,Ee=he.clipExtent,Re;return he.scale=function(){var rt=ye.apply(he,arguments);return rt===he?Re?he.clipExtent(null):he:rt},he.translate=function(){var rt=_e.apply(he,arguments);return rt===he?Re?he.clipExtent(null):he:rt},he.clipExtent=function(rt){var Ke=Ee.apply(he,arguments);if(Ke===he){if(Re=rt==null){var at=Le*ye(),mt=_e();Ee([[mt[0]-at,mt[1]-at],[mt[0]+at,mt[1]+at]])}}else Re&&(Ke=null);return Ke},he.clipExtent(null)}(r.geo.mercator=function(){return Da(Oa)}).raw=Oa;var Za=lo(function(){return 1},Math.asin);(r.geo.orthographic=function(){return Xn(Za)}).raw=Za;var aa=lo(function(Y){return 1/(1+Y)},function(Y){return 2*Math.atan(Y)});(r.geo.stereographic=function(){return Xn(aa)}).raw=aa;function Ua(Y,he){return[Math.log(Math.tan(Le/4+he/2)),-Y]}Ua.invert=function(Y,he){return[-he,2*Math.atan(Math.exp(Y))-ke]},(r.geo.transverseMercator=function(){var Y=Da(Ua),he=Y.center,ye=Y.rotate;return Y.center=function(_e){return _e?he([-_e[1],_e[0]]):(_e=he(),[_e[1],-_e[0]])},Y.rotate=function(_e){return _e?ye([_e[0],_e[1],_e.length>2?_e[2]+90:90]):(_e=ye(),[_e[0],_e[1],_e[2]-90])},ye([0,0,90])}).raw=Ua,r.geom={};function mi(Y){return Y[0]}function pi(Y){return Y[1]}r.geom.hull=function(Y){var he=mi,ye=pi;if(arguments.length)return _e(Y);function _e(Ee){if(Ee.length<3)return[];var Re=Cr(he),rt=Cr(ye),Ke,at=Ee.length,mt=[],wt=[];for(Ke=0;Ke<at;Ke++)mt.push([+Re.call(this,Ee[Ke],Ke),+rt.call(this,Ee[Ke],Ke),Ke]);for(mt.sort(Xo),Ke=0;Ke<at;Ke++)wt.push([mt[Ke][0],-mt[Ke][1]]);var Vt=wo(mt),Yt=wo(wt),cr=Yt[0]===Vt[0],Rr=Yt[Yt.length-1]===Vt[Vt.length-1],ir=[];for(Ke=Vt.length-1;Ke>=0;--Ke)ir.push(Ee[mt[Vt[Ke]][2]]);for(Ke=+cr;Ke<Yt.length-Rr;++Ke)ir.push(Ee[mt[Yt[Ke]][2]]);return ir}return _e.x=function(Ee){return arguments.length?(he=Ee,_e):he},_e.y=function(Ee){return arguments.length?(ye=Ee,_e):ye},_e};function wo(Y){for(var he=Y.length,ye=[0,1],_e=2,Ee=2;Ee<he;Ee++){for(;_e>1&&ft(Y[ye[_e-2]],Y[ye[_e-1]],Y[Ee])<=0;)--_e;ye[_e++]=Ee}return ye.slice(0,_e)}function Xo(Y,he){return Y[0]-he[0]||Y[1]-he[1]}r.geom.polygon=function(Y){return se(Y,ji),Y};var ji=r.geom.polygon.prototype=[];ji.area=function(){for(var Y=-1,he=this.length,ye,_e=this[he-1],Ee=0;++Y<he;)ye=_e,_e=this[Y],Ee+=ye[1]*_e[0]-ye[0]*_e[1];return Ee*.5},ji.centroid=function(Y){var he=-1,ye=this.length,_e=0,Ee=0,Re,rt=this[ye-1],Ke;for(arguments.length||(Y=-1/(6*this.area()));++he<ye;)Re=rt,rt=this[he],Ke=Re[0]*rt[1]-rt[0]*Re[1],_e+=(Re[0]+rt[0])*Ke,Ee+=(Re[1]+rt[1])*Ke;return[_e*Y,Ee*Y]},ji.clip=function(Y){for(var he,ye=ds(Y),_e=-1,Ee=this.length-ds(this),Re,rt,Ke=this[Ee-1],at,mt,wt;++_e<Ee;){for(he=Y.slice(),Y.length=0,at=this[_e],mt=he[(rt=he.length-ye)-1],Re=-1;++Re<rt;)wt=he[Re],Ui(wt,Ke,at)?(Ui(mt,Ke,at)||Y.push(ps(mt,wt,Ke,at)),Y.push(wt)):Ui(mt,Ke,at)&&Y.push(ps(mt,wt,Ke,at)),mt=wt;ye&&Y.push(Y[0]),Ke=at}return Y};function Ui(Y,he,ye){return(ye[0]-he[0])*(Y[1]-he[1])<(ye[1]-he[1])*(Y[0]-he[0])}function ps(Y,he,ye,_e){var Ee=Y[0],Re=ye[0],rt=he[0]-Ee,Ke=_e[0]-Re,at=Y[1],mt=ye[1],wt=he[1]-at,Vt=_e[1]-mt,Yt=(Ke*(at-mt)-Vt*(Ee-Re))/(Vt*rt-Ke*wt);return[Ee+Yt*rt,at+Yt*wt]}function ds(Y){var he=Y[0],ye=Y[Y.length-1];return!(he[0]-ye[0]||he[1]-ye[1])}var or,To,co,zi=[],Si,Es,yl=[];function ys(){ut(this),this.edge=this.site=this.circle=null}function rs(Y){var he=zi.pop()||new ys;return he.site=Y,he}function Ys(Y){Do(Y),co.remove(Y),zi.push(Y),ut(Y)}function Cs(Y){var he=Y.circle,ye=he.x,_e=he.cy,Ee={x:ye,y:_e},Re=Y.P,rt=Y.N,Ke=[Y];Ys(Y);for(var at=Re;at.circle&&x(ye-at.circle.x)<lt&&x(_e-at.circle.cy)<lt;)Re=at.P,Ke.unshift(at),Ys(at),at=Re;Ke.unshift(at),Do(at);for(var mt=rt;mt.circle&&x(ye-mt.circle.x)<lt&&x(_e-mt.circle.cy)<lt;)rt=mt.N,Ke.push(mt),Ys(mt),mt=rt;Ke.push(mt),Do(mt);var wt=Ke.length,Vt;for(Vt=1;Vt<wt;++Vt)mt=Ke[Vt],at=Ke[Vt-1],Se(mt.edge,at.site,mt.site,Ee);at=Ke[0],mt=Ke[wt-1],mt.edge=q(at.site,mt.site,null,Ee),Xi(at),Xi(mt)}function ns(Y){for(var he=Y.x,ye=Y.y,_e,Ee,Re,rt,Ke=co._;Ke;)if(Re=Sl(Ke,ye)-he,Re>lt)Ke=Ke.L;else if(rt=he-El(Ke,ye),rt>lt){if(!Ke.R){_e=Ke;break}Ke=Ke.R}else{Re>-lt?(_e=Ke.P,Ee=Ke):rt>-lt?(_e=Ke,Ee=Ke.N):_e=Ee=Ke;break}var at=rs(Y);if(co.insert(_e,at),!(!_e&&!Ee)){if(_e===Ee){Do(_e),Ee=rs(_e.site),co.insert(at,Ee),at.edge=Ee.edge=q(_e.site,at.site),Xi(_e),Xi(Ee);return}if(!Ee){at.edge=q(_e.site,at.site);return}Do(_e),Do(Ee);var mt=_e.site,wt=mt.x,Vt=mt.y,Yt=Y.x-wt,cr=Y.y-Vt,Rr=Ee.site,ir=Rr.x-wt,hr=Rr.y-Vt,vr=2*(Yt*hr-cr*ir),Ir=Yt*Yt+cr*cr,gr=ir*ir+hr*hr,kr={x:(hr*Ir-cr*gr)/vr+wt,y:(Yt*gr-ir*Ir)/vr+Vt};Se(Ee.edge,mt,Rr,kr),at.edge=q(mt,Y,null,kr),Ee.edge=q(Y,Rr,null,kr),Xi(_e),Xi(Ee)}}function Sl(Y,he){var ye=Y.site,_e=ye.x,Ee=ye.y,Re=Ee-he;if(!Re)return _e;var rt=Y.P;if(!rt)return-1/0;ye=rt.site;var Ke=ye.x,at=ye.y,mt=at-he;if(!mt)return Ke;var wt=Ke-_e,Vt=1/Re-1/mt,Yt=wt/mt;return Vt?(-Yt+Math.sqrt(Yt*Yt-2*Vt*(wt*wt/(-2*mt)-at+mt/2+Ee-Re/2)))/Vt+_e:(_e+Ke)/2}function El(Y,he){var ye=Y.N;if(ye)return Sl(ye,he);var _e=Y.site;return _e.y===he?_e.x:1/0}function to(Y){this.site=Y,this.edges=[]}to.prototype.prepare=function(){for(var Y=this.edges,he=Y.length,ye;he--;)ye=Y[he].edge,(!ye.b||!ye.a)&&Y.splice(he,1);return Y.sort(Eu),Y.length};function xl(Y){for(var he=Y[0][0],ye=Y[1][0],_e=Y[0][1],Ee=Y[1][1],Re,rt,Ke,at,mt=To,wt=mt.length,Vt,Yt,cr,Rr,ir,hr;wt--;)if(Vt=mt[wt],!(!Vt||!Vt.prepare()))for(cr=Vt.edges,Rr=cr.length,Yt=0;Yt<Rr;)hr=cr[Yt].end(),Ke=hr.x,at=hr.y,ir=cr[++Yt%Rr].start(),Re=ir.x,rt=ir.y,(x(Ke-Re)>lt||x(at-rt)>lt)&&(cr.splice(Yt,0,new Oe(ve(Vt.site,hr,x(Ke-he)<lt&&Ee-at>lt?{x:he,y:x(Re-he)<lt?rt:Ee}:x(at-Ee)<lt&&ye-Ke>lt?{x:x(rt-Ee)<lt?Re:ye,y:Ee}:x(Ke-ye)<lt&&at-_e>lt?{x:ye,y:x(Re-ye)<lt?rt:_e}:x(at-_e)<lt&&Ke-he>lt?{x:x(rt-_e)<lt?Re:he,y:_e}:null),Vt.site,null)),++Rr)}function Eu(Y,he){return he.angle-Y.angle}function fo(){ut(this),this.x=this.y=this.arc=this.site=this.cy=null}function Xi(Y){var he=Y.P,ye=Y.N;if(!(!he||!ye)){var _e=he.site,Ee=Y.site,Re=ye.site;if(_e!==Re){var rt=Ee.x,Ke=Ee.y,at=_e.x-rt,mt=_e.y-Ke,wt=Re.x-rt,hr=Re.y-Ke,Vt=2*(at*hr-mt*wt);if(!(Vt>=-Te)){var Yt=at*at+mt*mt,cr=wt*wt+hr*hr,Rr=(hr*Yt-mt*cr)/Vt,ir=(at*cr-wt*Yt)/Vt,hr=ir+Ke,vr=yl.pop()||new fo;vr.arc=Y,vr.site=Ee,vr.x=Rr+rt,vr.y=hr+Math.sqrt(Rr*Rr+ir*ir),vr.cy=hr,Y.circle=vr;for(var Ir=null,gr=Es._;gr;)if(vr.y<gr.y||vr.y===gr.y&&vr.x<=gr.x)if(gr.L)gr=gr.L;else{Ir=gr.P;break}else if(gr.R)gr=gr.R;else{Ir=gr;break}Es.insert(Ir,vr),Ir||(Si=vr)}}}}function Do(Y){var he=Y.circle;he&&(he.P||(Si=he.N),Es.remove(he),yl.push(he),ut(he),Y.circle=null)}function Cl(Y){for(var he=or,ye=Et(Y[0][0],Y[0][1],Y[1][0],Y[1][1]),_e=he.length,Ee;_e--;)Ee=he[_e],(!J(Ee,Y)||!ye(Ee)||x(Ee.a.x-Ee.b.x)<lt&&x(Ee.a.y-Ee.b.y)<lt)&&(Ee.a=Ee.b=null,he.splice(_e,1))}function J(Y,he){var ye=Y.b;if(ye)return!0;var _e=Y.a,Ee=he[0][0],Re=he[1][0],rt=he[0][1],Ke=he[1][1],at=Y.l,mt=Y.r,wt=at.x,Vt=at.y,Yt=mt.x,cr=mt.y,Rr=(wt+Yt)/2,ir=(Vt+cr)/2,hr,vr;if(cr===Vt){if(Rr<Ee||Rr>=Re)return;if(wt>Yt){if(!_e)_e={x:Rr,y:rt};else if(_e.y>=Ke)return;ye={x:Rr,y:Ke}}else{if(!_e)_e={x:Rr,y:Ke};else if(_e.y<rt)return;ye={x:Rr,y:rt}}}else if(hr=(wt-Yt)/(cr-Vt),vr=ir-hr*Rr,hr<-1||hr>1)if(wt>Yt){if(!_e)_e={x:(rt-vr)/hr,y:rt};else if(_e.y>=Ke)return;ye={x:(Ke-vr)/hr,y:Ke}}else{if(!_e)_e={x:(Ke-vr)/hr,y:Ke};else if(_e.y<rt)return;ye={x:(rt-vr)/hr,y:rt}}else if(Vt<cr){if(!_e)_e={x:Ee,y:hr*Ee+vr};else if(_e.x>=Re)return;ye={x:Re,y:hr*Re+vr}}else{if(!_e)_e={x:Re,y:hr*Re+vr};else if(_e.x<Ee)return;ye={x:Ee,y:hr*Ee+vr}}return Y.a=_e,Y.b=ye,!0}function ne(Y,he){this.l=Y,this.r=he,this.a=this.b=null}function q(Y,he,ye,_e){var Ee=new ne(Y,he);return or.push(Ee),ye&&Se(Ee,Y,he,ye),_e&&Se(Ee,he,Y,_e),To[Y.i].edges.push(new Oe(Ee,Y,he)),To[he.i].edges.push(new Oe(Ee,he,Y)),Ee}function ve(Y,he,ye){var _e=new ne(Y,null);return _e.a=he,_e.b=ye,or.push(_e),_e}function Se(Y,he,ye,_e){!Y.a&&!Y.b?(Y.a=_e,Y.l=he,Y.r=ye):Y.l===ye?Y.b=_e:Y.a=_e}function Oe(Y,he,ye){var _e=Y.a,Ee=Y.b;this.edge=Y,this.site=he,this.angle=ye?Math.atan2(ye.y-he.y,ye.x-he.x):Y.l===he?Math.atan2(Ee.x-_e.x,_e.y-Ee.y):Math.atan2(_e.x-Ee.x,Ee.y-_e.y)}Oe.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Xe(){this._=null}function ut(Y){Y.U=Y.C=Y.L=Y.R=Y.P=Y.N=null}Xe.prototype={insert:function(Y,he){var ye,_e,Ee;if(Y){if(he.P=Y,he.N=Y.N,Y.N&&(Y.N.P=he),Y.N=he,Y.R){for(Y=Y.R;Y.L;)Y=Y.L;Y.L=he}else Y.R=he;ye=Y}else this._?(Y=sr(this._),he.P=null,he.N=Y,Y.P=Y.L=he,ye=Y):(he.P=he.N=null,this._=he,ye=null);for(he.L=he.R=null,he.U=ye,he.C=!0,Y=he;ye&&ye.C;)_e=ye.U,ye===_e.L?(Ee=_e.R,Ee&&Ee.C?(ye.C=Ee.C=!1,_e.C=!0,Y=_e):(Y===ye.R&&(yt(this,ye),Y=ye,ye=Y.U),ye.C=!1,_e.C=!0,jt(this,_e))):(Ee=_e.L,Ee&&Ee.C?(ye.C=Ee.C=!1,_e.C=!0,Y=_e):(Y===ye.L&&(jt(this,ye),Y=ye,ye=Y.U),ye.C=!1,_e.C=!0,yt(this,_e))),ye=Y.U;this._.C=!1},remove:function(Y){Y.N&&(Y.N.P=Y.P),Y.P&&(Y.P.N=Y.N),Y.N=Y.P=null;var he=Y.U,ye,_e=Y.L,Ee=Y.R,Re,rt;if(_e?Ee?Re=sr(Ee):Re=_e:Re=Ee,he?he.L===Y?he.L=Re:he.R=Re:this._=Re,_e&&Ee?(rt=Re.C,Re.C=Y.C,Re.L=_e,_e.U=Re,Re!==Ee?(he=Re.U,Re.U=Y.U,Y=Re.R,he.L=Y,Re.R=Ee,Ee.U=Re):(Re.U=he,he=Re,Y=Re.R)):(rt=Y.C,Y=Re),Y&&(Y.U=he),!rt){if(Y&&Y.C){Y.C=!1;return}do{if(Y===this._)break;if(Y===he.L){if(ye=he.R,ye.C&&(ye.C=!1,he.C=!0,yt(this,he),ye=he.R),ye.L&&ye.L.C||ye.R&&ye.R.C){(!ye.R||!ye.R.C)&&(ye.L.C=!1,ye.C=!0,jt(this,ye),ye=he.R),ye.C=he.C,he.C=ye.R.C=!1,yt(this,he),Y=this._;break}}else if(ye=he.L,ye.C&&(ye.C=!1,he.C=!0,jt(this,he),ye=he.L),ye.L&&ye.L.C||ye.R&&ye.R.C){(!ye.L||!ye.L.C)&&(ye.R.C=!1,ye.C=!0,yt(this,ye),ye=he.L),ye.C=he.C,he.C=ye.L.C=!1,jt(this,he),Y=this._;break}ye.C=!0,Y=he,he=he.U}while(!Y.C);Y&&(Y.C=!1)}}};function yt(Y,he){var ye=he,_e=he.R,Ee=ye.U;Ee?Ee.L===ye?Ee.L=_e:Ee.R=_e:Y._=_e,_e.U=Ee,ye.U=_e,ye.R=_e.L,ye.R&&(ye.R.U=ye),_e.L=ye}function jt(Y,he){var ye=he,_e=he.L,Ee=ye.U;Ee?Ee.L===ye?Ee.L=_e:Ee.R=_e:Y._=_e,_e.U=Ee,ye.U=_e,ye.L=_e.R,ye.L&&(ye.L.U=ye),_e.R=ye}function sr(Y){for(;Y.L;)Y=Y.L;return Y}function pr(Y,he){var ye=Y.sort(br).pop(),_e,Ee,Re;for(or=[],To=new Array(Y.length),co=new Xe,Es=new Xe;;)if(Re=Si,ye&&(!Re||ye.y<Re.y||ye.y===Re.y&&ye.x<Re.x))(ye.x!==_e||ye.y!==Ee)&&(To[ye.i]=new to(ye),ns(ye),_e=ye.x,Ee=ye.y),ye=Y.pop();else if(Re)Cs(Re.arc);else break;he&&(Cl(he),xl(he));var rt={cells:To,edges:or};return co=Es=or=To=null,rt}function br(Y,he){return he.y-Y.y||he.x-Y.x}r.geom.voronoi=function(Y){var he=mi,ye=pi,_e=he,Ee=ye,Re=Lr;if(Y)return rt(Y);function rt(at){var mt=new Array(at.length),wt=Re[0][0],Vt=Re[0][1],Yt=Re[1][0],cr=Re[1][1];return pr(Ke(at),Re).cells.forEach(function(Rr,ir){var hr=Rr.edges,vr=Rr.site,Ir=mt[ir]=hr.length?hr.map(function(gr){var kr=gr.start();return[kr.x,kr.y]}):vr.x>=wt&&vr.x<=Yt&&vr.y>=Vt&&vr.y<=cr?[[wt,cr],[Yt,cr],[Yt,Vt],[wt,Vt]]:[];Ir.point=at[ir]}),mt}function Ke(at){return at.map(function(mt,wt){return{x:Math.round(_e(mt,wt)/lt)*lt,y:Math.round(Ee(mt,wt)/lt)*lt,i:wt}})}return rt.links=function(at){return pr(Ke(at)).edges.filter(function(mt){return mt.l&&mt.r}).map(function(mt){return{source:at[mt.l.i],target:at[mt.r.i]}})},rt.triangles=function(at){var mt=[];return pr(Ke(at)).cells.forEach(function(wt,Vt){for(var Yt=wt.site,cr=wt.edges.sort(Eu),Rr=-1,ir=cr.length,hr,vr=cr[ir-1].edge,Ir=vr.l===Yt?vr.r:vr.l;++Rr<ir;)hr=Ir,vr=cr[Rr].edge,Ir=vr.l===Yt?vr.r:vr.l,Vt<hr.i&&Vt<Ir.i&&Dr(Yt,hr,Ir)<0&&mt.push([at[Vt],at[hr.i],at[Ir.i]])}),mt},rt.x=function(at){return arguments.length?(_e=Cr(he=at),rt):he},rt.y=function(at){return arguments.length?(Ee=Cr(ye=at),rt):ye},rt.clipExtent=function(at){return arguments.length?(Re=at==null?Lr:at,rt):Re===Lr?null:Re},rt.size=function(at){return arguments.length?rt.clipExtent(at&&[[0,0],at]):Re===Lr?null:Re&&Re[1]},rt};var Lr=[[-1e6,-1e6],[1e6,1e6]];function Dr(Y,he,ye){return(Y.x-ye.x)*(he.y-Y.y)-(Y.x-he.x)*(ye.y-Y.y)}r.geom.delaunay=function(Y){return r.geom.voronoi().triangles(Y)},r.geom.quadtree=function(Y,he,ye,_e,Ee){var Re=mi,rt=pi,Ke;if(Ke=arguments.length)return Re=jr,rt=Sr,Ke===3&&(Ee=ye,_e=he,ye=he=0),at(Y);function at(mt){var wt,Vt=Cr(Re),Yt=Cr(rt),cr,Rr,ir,hr,vr,Ir,gr,kr;if(he!=null)vr=he,Ir=ye,gr=_e,kr=Ee;else if(gr=kr=-(vr=Ir=1/0),cr=[],Rr=[],hr=mt.length,Ke)for(ir=0;ir<hr;++ir)wt=mt[ir],wt.x<vr&&(vr=wt.x),wt.y<Ir&&(Ir=wt.y),wt.x>gr&&(gr=wt.x),wt.y>kr&&(kr=wt.y),cr.push(wt.x),Rr.push(wt.y);else for(ir=0;ir<hr;++ir){var gn=+Vt(wt=mt[ir],ir),dn=+Yt(wt,ir);gn<vr&&(vr=gn),dn<Ir&&(Ir=dn),gn>gr&&(gr=gn),dn>kr&&(kr=dn),cr.push(gn),Rr.push(dn)}var fn=gr-vr,on=kr-Ir;fn>on?kr=Ir+fn:gr=vr+on;function Yn(pa,ma,Sn,Kn,ua,yn,Vn,ja){if(!(isNaN(Sn)||isNaN(Kn)))if(pa.leaf){var xi=pa.x,Pi=pa.y;if(xi!=null)if(x(xi-Sn)+x(Pi-Kn)<.01)$n(pa,ma,Sn,Kn,ua,yn,Vn,ja);else{var vo=pa.point;pa.x=pa.y=pa.point=null,$n(pa,vo,xi,Pi,ua,yn,Vn,ja),$n(pa,ma,Sn,Kn,ua,yn,Vn,ja)}else pa.x=Sn,pa.y=Kn,pa.point=ma}else $n(pa,ma,Sn,Kn,ua,yn,Vn,ja)}function $n(pa,ma,Sn,Kn,ua,yn,Vn,ja){var xi=(ua+Vn)*.5,Pi=(yn+ja)*.5,vo=Sn>=xi,Ro=Kn>=Pi,Ks=Ro<<1|vo;pa.leaf=!1,pa=pa.nodes[Ks]||(pa.nodes[Ks]=Ur()),vo?ua=xi:Vn=xi,Ro?yn=Pi:ja=Pi,Yn(pa,ma,Sn,Kn,ua,yn,Vn,ja)}var Ca=Ur();if(Ca.add=function(pa){Yn(Ca,pa,+Vt(pa,++ir),+Yt(pa,ir),vr,Ir,gr,kr)},Ca.visit=function(pa){$r(pa,Ca,vr,Ir,gr,kr)},Ca.find=function(pa){return cn(Ca,pa[0],pa[1],vr,Ir,gr,kr)},ir=-1,he==null){for(;++ir<hr;)Yn(Ca,mt[ir],cr[ir],Rr[ir],vr,Ir,gr,kr);--ir}else mt.forEach(Ca.add);return cr=Rr=mt=wt=null,Ca}return at.x=function(mt){return arguments.length?(Re=mt,at):Re},at.y=function(mt){return arguments.length?(rt=mt,at):rt},at.extent=function(mt){return arguments.length?(mt==null?he=ye=_e=Ee=null:(he=+mt[0][0],ye=+mt[0][1],_e=+mt[1][0],Ee=+mt[1][1]),at):he==null?null:[[he,ye],[_e,Ee]]},at.size=function(mt){return arguments.length?(mt==null?he=ye=_e=Ee=null:(he=ye=0,_e=+mt[0],Ee=+mt[1]),at):he==null?null:[_e-he,Ee-ye]},at};function jr(Y){return Y.x}function Sr(Y){return Y.y}function Ur(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function $r(Y,he,ye,_e,Ee,Re){if(!Y(he,ye,_e,Ee,Re)){var rt=(ye+Ee)*.5,Ke=(_e+Re)*.5,at=he.nodes;at[0]&&$r(Y,at[0],ye,_e,rt,Ke),at[1]&&$r(Y,at[1],rt,_e,Ee,Ke),at[2]&&$r(Y,at[2],ye,Ke,rt,Re),at[3]&&$r(Y,at[3],rt,Ke,Ee,Re)}}function cn(Y,he,ye,_e,Ee,Re,rt){var Ke=1/0,at;return function mt(wt,Vt,Yt,cr,Rr){if(!(Vt>Re||Yt>rt||cr<_e||Rr<Ee)){if(ir=wt.point){var ir,hr=he-wt.x,vr=ye-wt.y,Ir=hr*hr+vr*vr;if(Ir<Ke){var gr=Math.sqrt(Ke=Ir);_e=he-gr,Ee=ye-gr,Re=he+gr,rt=ye+gr,at=ir}}for(var kr=wt.nodes,gn=(Vt+cr)*.5,dn=(Yt+Rr)*.5,fn=he>=gn,on=ye>=dn,Yn=on<<1|fn,$n=Yn+4;Yn<$n;++Yn)if(wt=kr[Yn&3])switch(Yn&3){case 0:mt(wt,Vt,Yt,gn,dn);break;case 1:mt(wt,gn,Yt,cr,dn);break;case 2:mt(wt,Vt,dn,gn,Rr);break;case 3:mt(wt,gn,dn,cr,Rr);break}}}(Y,_e,Ee,Re,rt),at}r.interpolateRgb=In;function In(Y,he){Y=r.rgb(Y),he=r.rgb(he);var ye=Y.r,_e=Y.g,Ee=Y.b,Re=he.r-ye,rt=he.g-_e,Ke=he.b-Ee;return function(at){return"#"+en(Math.round(ye+Re*at))+en(Math.round(_e+rt*at))+en(Math.round(Ee+Ke*at))}}r.interpolateObject=An;function An(Y,he){var ye={},_e={},Ee;for(Ee in Y)Ee in he?ye[Ee]=wa(Y[Ee],he[Ee]):_e[Ee]=Y[Ee];for(Ee in he)Ee in Y||(_e[Ee]=he[Ee]);return function(Re){for(Ee in ye)_e[Ee]=ye[Ee](Re);return _e}}r.interpolateNumber=Dn;function Dn(Y,he){return Y=+Y,he=+he,function(ye){return Y*(1-ye)+he*ye}}r.interpolateString=Jn;function Jn(Y,he){var ye=ha.lastIndex=la.lastIndex=0,_e,Ee,Re,rt=-1,Ke=[],at=[];for(Y=Y+"",he=he+"";(_e=ha.exec(Y))&&(Ee=la.exec(he));)(Re=Ee.index)>ye&&(Re=he.slice(ye,Re),Ke[rt]?Ke[rt]+=Re:Ke[++rt]=Re),(_e=_e[0])===(Ee=Ee[0])?Ke[rt]?Ke[rt]+=Ee:Ke[++rt]=Ee:(Ke[++rt]=null,at.push({i:rt,x:Dn(_e,Ee)})),ye=la.lastIndex;return ye<he.length&&(Re=he.slice(ye),Ke[rt]?Ke[rt]+=Re:Ke[++rt]=Re),Ke.length<2?at[0]?(he=at[0].x,function(mt){return he(mt)+""}):function(){return he}:(he=at.length,function(mt){for(var wt=0,Vt;wt<he;++wt)Ke[(Vt=at[wt]).i]=Vt.x(mt);return Ke.join("")})}var ha=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,la=new RegExp(ha.source,"g");r.interpolate=wa;function wa(Y,he){for(var ye=r.interpolators.length,_e;--ye>=0&&!(_e=r.interpolators[ye](Y,he)););return _e}r.interpolators=[function(Y,he){var ye=typeof he;return(ye==="string"?fr.has(he.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(he)?In:Jn:he instanceof _t?In:Array.isArray(he)?Ea:ye==="object"&&isNaN(he)?An:Dn)(Y,he)}],r.interpolateArray=Ea;function Ea(Y,he){var ye=[],_e=[],Ee=Y.length,Re=he.length,rt=Math.min(Y.length,he.length),Ke;for(Ke=0;Ke<rt;++Ke)ye.push(wa(Y[Ke],he[Ke]));for(;Ke<Ee;++Ke)_e[Ke]=Y[Ke];for(;Ke<Re;++Ke)_e[Ke]=he[Ke];return function(at){for(Ke=0;Ke<rt;++Ke)_e[Ke]=ye[Ke](at);return _e}}var ii=function(){return G},ti=r.map({linear:ii,poly:ni,quad:function(){return ci},cubic:function(){return li},sin:function(){return Ha},exp:function(){return as},circle:function(){return Fo},elastic:bo,back:Ao,bounce:function(){return Qo}}),Oi=r.map({in:G,out:gi,"in-out":Ri,"out-in":function(Y){return Ri(gi(Y))}});r.ease=function(Y){var he=Y.indexOf("-"),ye=he>=0?Y.slice(0,he):Y,_e=he>=0?Y.slice(he+1):"in";return ye=ti.get(ye)||ii,_e=Oi.get(_e)||G,Va(_e(ye.apply(null,a.call(arguments,1))))};function Va(Y){return function(he){return he<=0?0:he>=1?1:Y(he)}}function gi(Y){return function(he){return 1-Y(1-he)}}function Ri(Y){return function(he){return .5*(he<.5?Y(2*he):2-Y(2-2*he))}}function ci(Y){return Y*Y}function li(Y){return Y*Y*Y}function Li(Y){if(Y<=0)return 0;if(Y>=1)return 1;var he=Y*Y,ye=he*Y;return 4*(Y<.5?ye:3*(Y-he)+ye-.75)}function ni(Y){return function(he){return Math.pow(he,Y)}}function Ha(Y){return 1-Math.cos(Y*ke)}function as(Y){return Math.pow(2,10*(Y-1))}function Fo(Y){return 1-Math.sqrt(1-Y*Y)}function bo(Y,he){var ye;return arguments.length<2&&(he=.45),arguments.length?ye=he/Ue*Math.asin(1/Y):(Y=1,ye=he/4),function(_e){return 1+Y*Math.pow(2,-10*_e)*Math.sin((_e-ye)*Ue/he)}}function Ao(Y){return Y||(Y=1.70158),function(he){return he*he*((Y+1)*he-Y)}}function Qo(Y){return Y<1/2.75?7.5625*Y*Y:Y<2/2.75?7.5625*(Y-=1.5/2.75)*Y+.75:Y<2.5/2.75?7.5625*(Y-=2.25/2.75)*Y+.9375:7.5625*(Y-=2.625/2.75)*Y+.984375}r.interpolateHcl=Mo;function Mo(Y,he){Y=r.hcl(Y),he=r.hcl(he);var ye=Y.h,_e=Y.c,Ee=Y.l,Re=he.h-ye,rt=he.c-_e,Ke=he.l-Ee;return isNaN(rt)&&(rt=0,_e=isNaN(_e)?he.c:_e),isNaN(Re)?(Re=0,ye=isNaN(ye)?he.h:ye):Re>180?Re-=360:Re<-180&&(Re+=360),function(at){return er(ye+Re*at,_e+rt*at,Ee+Ke*at)+""}}r.interpolateHsl=du;function du(Y,he){Y=r.hsl(Y),he=r.hsl(he);var ye=Y.h,_e=Y.s,Ee=Y.l,Re=he.h-ye,rt=he.s-_e,Ke=he.l-Ee;return isNaN(rt)&&(rt=0,_e=isNaN(_e)?he.s:_e),isNaN(Re)?(Re=0,ye=isNaN(ye)?he.h:ye):Re>180?Re-=360:Re<-180&&(Re+=360),function(at){return Ut(ye+Re*at,_e+rt*at,Ee+Ke*at)+""}}r.interpolateLab=xs;function xs(Y,he){Y=r.lab(Y),he=r.lab(he);var ye=Y.l,_e=Y.a,Ee=Y.b,Re=he.l-ye,rt=he.a-_e,Ke=he.b-Ee;return function(at){return Wn(ye+Re*at,_e+rt*at,Ee+Ke*at)+""}}r.interpolateRound=Jl;function Jl(Y,he){return he-=Y,function(ye){return Math.round(Y+he*ye)}}r.transform=function(Y){var he=c.createElementNS(r.ns.prefix.svg,"g");return(r.transform=function(ye){if(ye!=null){he.setAttribute("transform",ye);var _e=he.transform.baseVal.consolidate()}return new bl(_e?_e.matrix:fc)})(Y)};function bl(Y){var he=[Y.a,Y.b],ye=[Y.c,Y.d],_e=Cu(he),Ee=$l(he,ye),Re=Cu(cc(ye,he,-Ee))||0;he[0]*ye[1]<ye[0]*he[1]&&(he[0]*=-1,he[1]*=-1,_e*=-1,Ee*=-1),this.rotate=(_e?Math.atan2(he[1],he[0]):Math.atan2(-ye[0],ye[1]))*He,this.translate=[Y.e,Y.f],this.scale=[_e,Re],this.skew=Re?Math.atan2(Ee,Re)*He:0}bl.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function $l(Y,he){return Y[0]*he[0]+Y[1]*he[1]}function Cu(Y){var he=Math.sqrt($l(Y,Y));return he&&(Y[0]/=he,Y[1]/=he),he}function cc(Y,he,ye){return Y[0]+=ye*he[0],Y[1]+=ye*he[1],Y}var fc={a:1,b:0,c:0,d:1,e:0,f:0};r.interpolateTransform=bs;function Ll(Y){return Y.length?Y.pop()+",":""}function Lu(Y,he,ye,_e){if(Y[0]!==he[0]||Y[1]!==he[1]){var Ee=ye.push("translate(",null,",",null,")");_e.push({i:Ee-4,x:Dn(Y[0],he[0])},{i:Ee-2,x:Dn(Y[1],he[1])})}else(he[0]||he[1])&&ye.push("translate("+he+")")}function Lf(Y,he,ye,_e){Y!==he?(Y-he>180?he+=360:he-Y>180&&(Y+=360),_e.push({i:ye.push(Ll(ye)+"rotate(",null,")")-2,x:Dn(Y,he)})):he&&ye.push(Ll(ye)+"rotate("+he+")")}function hc(Y,he,ye,_e){Y!==he?_e.push({i:ye.push(Ll(ye)+"skewX(",null,")")-2,x:Dn(Y,he)}):he&&ye.push(Ll(ye)+"skewX("+he+")")}function Ql(Y,he,ye,_e){if(Y[0]!==he[0]||Y[1]!==he[1]){var Ee=ye.push(Ll(ye)+"scale(",null,",",null,")");_e.push({i:Ee-4,x:Dn(Y[0],he[0])},{i:Ee-2,x:Dn(Y[1],he[1])})}else(he[0]!==1||he[1]!==1)&&ye.push(Ll(ye)+"scale("+he+")")}function bs(Y,he){var ye=[],_e=[];return Y=r.transform(Y),he=r.transform(he),Lu(Y.translate,he.translate,ye,_e),Lf(Y.rotate,he.rotate,ye,_e),hc(Y.skew,he.skew,ye,_e),Ql(Y.scale,he.scale,ye,_e),Y=he=null,function(Ee){for(var Re=-1,rt=_e.length,Ke;++Re<rt;)ye[(Ke=_e[Re]).i]=Ke.x(Ee);return ye.join("")}}function qc(Y,he){return he=(he-=Y=+Y)||1/he,function(ye){return(ye-Y)/he}}function ef(Y,he){return he=(he-=Y=+Y)||1/he,function(ye){return Math.max(0,Math.min(1,(ye-Y)/he))}}r.layout={},r.layout.bundle=function(){return function(Y){for(var he=[],ye=-1,_e=Y.length;++ye<_e;)he.push(vs(Y[ye]));return he}};function vs(Y){for(var he=Y.source,ye=Y.target,_e=is(he,ye),Ee=[he];he!==_e;)he=he.parent,Ee.push(he);for(var Re=Ee.length;ye!==_e;)Ee.splice(Re,0,ye),ye=ye.parent;return Ee}function pc(Y){for(var he=[],ye=Y.parent;ye!=null;)he.push(Y),Y=ye,ye=ye.parent;return he.push(Y),he}function is(Y,he){if(Y===he)return Y;for(var ye=pc(Y),_e=pc(he),Ee=ye.pop(),Re=_e.pop(),rt=null;Ee===Re;)rt=Ee,Ee=ye.pop(),Re=_e.pop();return rt}r.layout.chord=function(){var Y={},he,ye,_e,Ee,Re=0,rt,Ke,at;function mt(){var Vt={},Yt=[],cr=r.range(Ee),Rr=[],ir,hr,vr,Ir,gr;for(he=[],ye=[],ir=0,Ir=-1;++Ir<Ee;){for(hr=0,gr=-1;++gr<Ee;)hr+=_e[Ir][gr];Yt.push(hr),Rr.push(r.range(Ee)),ir+=hr}for(rt&&cr.sort(function(Ca,pa){return rt(Yt[Ca],Yt[pa])}),Ke&&Rr.forEach(function(Ca,pa){Ca.sort(function(ma,Sn){return Ke(_e[pa][ma],_e[pa][Sn])})}),ir=(Ue-Re*Ee)/ir,hr=0,Ir=-1;++Ir<Ee;){for(vr=hr,gr=-1;++gr<Ee;){var kr=cr[Ir],gn=Rr[kr][gr],dn=_e[kr][gn],fn=hr,on=hr+=dn*ir;Vt[kr+"-"+gn]={index:kr,subindex:gn,startAngle:fn,endAngle:on,value:dn}}ye[kr]={index:kr,startAngle:vr,endAngle:hr,value:Yt[kr]},hr+=Re}for(Ir=-1;++Ir<Ee;)for(gr=Ir-1;++gr<Ee;){var Yn=Vt[Ir+"-"+gr],$n=Vt[gr+"-"+Ir];(Yn.value||$n.value)&&he.push(Yn.value<$n.value?{source:$n,target:Yn}:{source:Yn,target:$n})}at&&wt()}function wt(){he.sort(function(Vt,Yt){return at((Vt.source.value+Vt.target.value)/2,(Yt.source.value+Yt.target.value)/2)})}return Y.matrix=function(Vt){return arguments.length?(Ee=(_e=Vt)&&_e.length,he=ye=null,Y):_e},Y.padding=function(Vt){return arguments.length?(Re=Vt,he=ye=null,Y):Re},Y.sortGroups=function(Vt){return arguments.length?(rt=Vt,he=ye=null,Y):rt},Y.sortSubgroups=function(Vt){return arguments.length?(Ke=Vt,he=null,Y):Ke},Y.sortChords=function(Vt){return arguments.length?(at=Vt,he&&wt(),Y):at},Y.chords=function(){return he||mt(),he},Y.groups=function(){return ye||mt(),ye},Y},r.layout.force=function(){var Y={},he=r.dispatch("start","tick","end"),ye,_e=[1,1],Ee,Re,rt=.9,Ke=Lh,at=Lc,mt=-30,wt=Ph,Vt=.1,Yt=.64,cr=[],Rr=[],ir,hr,vr;function Ir(kr){return function(gn,dn,fn,on){if(gn.point!==kr){var Yn=gn.cx-kr.x,$n=gn.cy-kr.y,Ca=on-dn,pa=Yn*Yn+$n*$n;if(Ca*Ca/Yt<pa){if(pa<wt){var ma=gn.charge/pa;kr.px-=Yn*ma,kr.py-=$n*ma}return!0}if(gn.point&&pa&&pa<wt){var ma=gn.pointCharge/pa;kr.px-=Yn*ma,kr.py-=$n*ma}}return!gn.charge}}Y.tick=function(){if((Re*=.99)<.005)return ye=null,he.end({type:"end",alpha:Re=0}),!0;var kr=cr.length,gn=Rr.length,dn,fn,on,Yn,$n,Ca,pa,ma,Sn;for(fn=0;fn<gn;++fn)on=Rr[fn],Yn=on.source,$n=on.target,ma=$n.x-Yn.x,Sn=$n.y-Yn.y,(Ca=ma*ma+Sn*Sn)&&(Ca=Re*hr[fn]*((Ca=Math.sqrt(Ca))-ir[fn])/Ca,ma*=Ca,Sn*=Ca,$n.x-=ma*(pa=Yn.weight+$n.weight?Yn.weight/(Yn.weight+$n.weight):.5),$n.y-=Sn*pa,Yn.x+=ma*(pa=1-pa),Yn.y+=Sn*pa);if((pa=Re*Vt)&&(ma=_e[0]/2,Sn=_e[1]/2,fn=-1,pa))for(;++fn<kr;)on=cr[fn],on.x+=(ma-on.x)*pa,on.y+=(Sn-on.y)*pa;if(mt)for(Pf(dn=r.geom.quadtree(cr),Re,vr),fn=-1;++fn<kr;)(on=cr[fn]).fixed||dn.visit(Ir(on));for(fn=-1;++fn<kr;)on=cr[fn],on.fixed?(on.x=on.px,on.y=on.py):(on.x-=(on.px-(on.px=on.x))*rt,on.y-=(on.py-(on.py=on.y))*rt);he.tick({type:"tick",alpha:Re})},Y.nodes=function(kr){return arguments.length?(cr=kr,Y):cr},Y.links=function(kr){return arguments.length?(Rr=kr,Y):Rr},Y.size=function(kr){return arguments.length?(_e=kr,Y):_e},Y.linkDistance=function(kr){return arguments.length?(Ke=typeof kr=="function"?kr:+kr,Y):Ke},Y.distance=Y.linkDistance,Y.linkStrength=function(kr){return arguments.length?(at=typeof kr=="function"?kr:+kr,Y):at},Y.friction=function(kr){return arguments.length?(rt=+kr,Y):rt},Y.charge=function(kr){return arguments.length?(mt=typeof kr=="function"?kr:+kr,Y):mt},Y.chargeDistance=function(kr){return arguments.length?(wt=kr*kr,Y):Math.sqrt(wt)},Y.gravity=function(kr){return arguments.length?(Vt=+kr,Y):Vt},Y.theta=function(kr){return arguments.length?(Yt=kr*kr,Y):Math.sqrt(Yt)},Y.alpha=function(kr){return arguments.length?(kr=+kr,Re?kr>0?Re=kr:(ye.c=null,ye.t=NaN,ye=null,he.end({type:"end",alpha:Re=0})):kr>0&&(he.start({type:"start",alpha:Re=kr}),ye=qa(Y.tick)),Y):Re},Y.start=function(){var kr,gn=cr.length,dn=Rr.length,fn=_e[0],on=_e[1],Yn,$n;for(kr=0;kr<gn;++kr)($n=cr[kr]).index=kr,$n.weight=0;for(kr=0;kr<dn;++kr)$n=Rr[kr],typeof $n.source=="number"&&($n.source=cr[$n.source]),typeof $n.target=="number"&&($n.target=cr[$n.target]),++$n.source.weight,++$n.target.weight;for(kr=0;kr<gn;++kr)$n=cr[kr],isNaN($n.x)&&($n.x=Ca("x",fn)),isNaN($n.y)&&($n.y=Ca("y",on)),isNaN($n.px)&&($n.px=$n.x),isNaN($n.py)&&($n.py=$n.y);if(ir=[],typeof Ke=="function")for(kr=0;kr<dn;++kr)ir[kr]=+Ke.call(this,Rr[kr],kr);else for(kr=0;kr<dn;++kr)ir[kr]=Ke;if(hr=[],typeof at=="function")for(kr=0;kr<dn;++kr)hr[kr]=+at.call(this,Rr[kr],kr);else for(kr=0;kr<dn;++kr)hr[kr]=at;if(vr=[],typeof mt=="function")for(kr=0;kr<gn;++kr)vr[kr]=+mt.call(this,cr[kr],kr);else for(kr=0;kr<gn;++kr)vr[kr]=mt;function Ca(pa,ma){if(!Yn){for(Yn=new Array(gn),ua=0;ua<gn;++ua)Yn[ua]=[];for(ua=0;ua<dn;++ua){var Sn=Rr[ua];Yn[Sn.source.index].push(Sn.target),Yn[Sn.target.index].push(Sn.source)}}for(var Kn=Yn[kr],ua=-1,yn=Kn.length,Vn;++ua<yn;)if(!isNaN(Vn=Kn[ua][pa]))return Vn;return Math.random()*ma}return Y.resume()},Y.resume=function(){return Y.alpha(.1)},Y.stop=function(){return Y.alpha(0)},Y.drag=function(){if(Ee||(Ee=r.behavior.drag().origin(G).on("dragstart.force",Nl).on("drag.force",gr).on("dragend.force",Pl)),!arguments.length)return Ee;this.on("mouseover.force",Ju).on("mouseout.force",od).call(Ee)};function gr(kr){kr.px=r.event.x,kr.py=r.event.y,Y.resume()}return r.rebind(Y,he,"on")};function Nl(Y){Y.fixed|=2}function Pl(Y){Y.fixed&=-7}function Ju(Y){Y.fixed|=4,Y.px=Y.x,Y.py=Y.y}function od(Y){Y.fixed&=-5}function Pf(Y,he,ye){var _e=0,Ee=0;if(Y.charge=0,!Y.leaf)for(var Re=Y.nodes,rt=Re.length,Ke=-1,at;++Ke<rt;)at=Re[Ke],at!=null&&(Pf(at,he,ye),Y.charge+=at.charge,_e+=at.charge*at.cx,Ee+=at.charge*at.cy);if(Y.point){Y.leaf||(Y.point.x+=Math.random()-.5,Y.point.y+=Math.random()-.5);var mt=he*ye[Y.point.index];Y.charge+=Y.pointCharge=mt,_e+=mt*Y.point.x,Ee+=mt*Y.point.y}Y.cx=_e/Y.charge,Y.cy=Ee/Y.charge}var Lh=20,Lc=1,Ph=1/0;r.layout.hierarchy=function(){var Y=tv,he=qd,ye=ev;function _e(Ee){var Re=[Ee],rt=[],Ke;for(Ee.depth=0;(Ke=Re.pop())!=null;)if(rt.push(Ke),(mt=he.call(_e,Ke,Ke.depth))&&(at=mt.length)){for(var at,mt,wt;--at>=0;)Re.push(wt=mt[at]),wt.parent=Ke,wt.depth=Ke.depth+1;ye&&(Ke.value=0),Ke.children=mt}else ye&&(Ke.value=+ye.call(_e,Ke,Ke.depth)||0),delete Ke.children;return os(Ee,function(Vt){var Yt,cr;Y&&(Yt=Vt.children)&&Yt.sort(Y),ye&&(cr=Vt.parent)&&(cr.value+=Vt.value)}),rt}return _e.sort=function(Ee){return arguments.length?(Y=Ee,_e):Y},_e.children=function(Ee){return arguments.length?(he=Ee,_e):he},_e.value=function(Ee){return arguments.length?(ye=Ee,_e):ye},_e.revalue=function(Ee){return ye&&(eu(Ee,function(Re){Re.children&&(Re.value=0)}),os(Ee,function(Re){var rt;Re.children||(Re.value=+ye.call(_e,Re,Re.depth)||0),(rt=Re.parent)&&(rt.value+=Re.value)})),Ee},_e};function ql(Y,he){return r.rebind(Y,he,"sort","children","value"),Y.nodes=Y,Y.links=x0,Y}function eu(Y,he){for(var ye=[Y];(Y=ye.pop())!=null;)if(he(Y),(Ee=Y.children)&&(_e=Ee.length))for(var _e,Ee;--_e>=0;)ye.push(Ee[_e])}function os(Y,he){for(var ye=[Y],_e=[];(Y=ye.pop())!=null;)if(_e.push(Y),(rt=Y.children)&&(Re=rt.length))for(var Ee=-1,Re,rt;++Ee<Re;)ye.push(rt[Ee]);for(;(Y=_e.pop())!=null;)he(Y)}function qd(Y){return Y.children}function ev(Y){return Y.value}function tv(Y,he){return he.value-Y.value}function x0(Y){return r.merge(Y.map(function(he){return(he.children||[]).map(function(ye){return{source:he,target:ye}})}))}r.layout.partition=function(){var Y=r.layout.hierarchy(),he=[1,1];function ye(Re,rt,Ke,at){var mt=Re.children;if(Re.x=rt,Re.y=Re.depth*at,Re.dx=Ke,Re.dy=at,mt&&(Vt=mt.length)){var wt=-1,Vt,Yt,cr;for(Ke=Re.value?Ke/Re.value:0;++wt<Vt;)ye(Yt=mt[wt],rt,cr=Yt.value*Ke,at),rt+=cr}}function _e(Re){var rt=Re.children,Ke=0;if(rt&&(mt=rt.length))for(var at=-1,mt;++at<mt;)Ke=Math.max(Ke,_e(rt[at]));return 1+Ke}function Ee(Re,rt){var Ke=Y.call(this,Re,rt);return ye(Ke[0],0,he[0],he[1]/_e(Ke[0])),Ke}return Ee.size=function(Re){return arguments.length?(he=Re,Ee):he},ql(Ee,Y)},r.layout.pie=function(){var Y=Number,he=hp,ye=0,_e=Ue,Ee=0;function Re(rt){var Ke=rt.length,at=rt.map(function(Ir,gr){return+Y.call(Re,Ir,gr)}),mt=+(typeof ye=="function"?ye.apply(this,arguments):ye),wt=(typeof _e=="function"?_e.apply(this,arguments):_e)-mt,Vt=Math.min(Math.abs(wt)/Ke,+(typeof Ee=="function"?Ee.apply(this,arguments):Ee)),Yt=Vt*(wt<0?-1:1),cr=r.sum(at),Rr=cr?(wt-Ke*Yt)/cr:0,ir=r.range(Ke),hr=[],vr;return he!=null&&ir.sort(he===hp?function(Ir,gr){return at[gr]-at[Ir]}:function(Ir,gr){return he(rt[Ir],rt[gr])}),ir.forEach(function(Ir){hr[Ir]={data:rt[Ir],value:vr=at[Ir],startAngle:mt,endAngle:mt+=vr*Rr+Yt,padAngle:Vt}}),hr}return Re.value=function(rt){return arguments.length?(Y=rt,Re):Y},Re.sort=function(rt){return arguments.length?(he=rt,Re):he},Re.startAngle=function(rt){return arguments.length?(ye=rt,Re):ye},Re.endAngle=function(rt){return arguments.length?(_e=rt,Re):_e},Re.padAngle=function(rt){return arguments.length?(Ee=rt,Re):Ee},Re};var hp={};r.layout.stack=function(){var Y=G,he=dc,ye=Df,_e=b0,Ee=sd,Re=Dh;function rt(Ke,at){if(!(Rr=Ke.length))return Ke;var mt=Ke.map(function(Ir,gr){return Y.call(rt,Ir,gr)}),wt=mt.map(function(Ir){return Ir.map(function(gr,kr){return[Ee.call(rt,gr,kr),Re.call(rt,gr,kr)]})}),Vt=he.call(rt,wt,at);mt=r.permute(mt,Vt),wt=r.permute(wt,Vt);var Yt=ye.call(rt,wt,at),cr=mt[0].length,Rr,ir,hr,vr;for(hr=0;hr<cr;++hr)for(_e.call(rt,mt[0][hr],vr=Yt[hr],wt[0][hr][1]),ir=1;ir<Rr;++ir)_e.call(rt,mt[ir][hr],vr+=wt[ir-1][hr][1],wt[ir][hr][1]);return Ke}return rt.values=function(Ke){return arguments.length?(Y=Ke,rt):Y},rt.order=function(Ke){return arguments.length?(he=typeof Ke=="function"?Ke:oh.get(Ke)||dc,rt):he},rt.offset=function(Ke){return arguments.length?(ye=typeof Ke=="function"?Ke:Qi.get(Ke)||Df,rt):ye},rt.x=function(Ke){return arguments.length?(Ee=Ke,rt):Ee},rt.y=function(Ke){return arguments.length?(Re=Ke,rt):Re},rt.out=function(Ke){return arguments.length?(_e=Ke,rt):_e},rt};function sd(Y){return Y.x}function Dh(Y){return Y.y}function b0(Y,he,ye){Y.y0=he,Y.y=ye}var oh=r.map({"inside-out":function(Y){var he=Y.length,ye,_e,Ee=Y.map(Rh),Re=Y.map(rv),rt=r.range(he).sort(function(Vt,Yt){return Ee[Vt]-Ee[Yt]}),Ke=0,at=0,mt=[],wt=[];for(ye=0;ye<he;++ye)_e=rt[ye],Ke<at?(Ke+=Re[_e],mt.push(_e)):(at+=Re[_e],wt.push(_e));return wt.reverse().concat(mt)},reverse:function(Y){return r.range(Y.length).reverse()},default:dc}),Qi=r.map({silhouette:function(Y){var he=Y.length,ye=Y[0].length,_e=[],Ee=0,Re,rt,Ke,at=[];for(rt=0;rt<ye;++rt){for(Re=0,Ke=0;Re<he;Re++)Ke+=Y[Re][rt][1];Ke>Ee&&(Ee=Ke),_e.push(Ke)}for(rt=0;rt<ye;++rt)at[rt]=(Ee-_e[rt])/2;return at},wiggle:function(Y){var he=Y.length,ye=Y[0],_e=ye.length,Ee,Re,rt,Ke,at,mt,wt,Vt,Yt,cr=[];for(cr[0]=Vt=Yt=0,Re=1;Re<_e;++Re){for(Ee=0,Ke=0;Ee<he;++Ee)Ke+=Y[Ee][Re][1];for(Ee=0,at=0,wt=ye[Re][0]-ye[Re-1][0];Ee<he;++Ee){for(rt=0,mt=(Y[Ee][Re][1]-Y[Ee][Re-1][1])/(2*wt);rt<Ee;++rt)mt+=(Y[rt][Re][1]-Y[rt][Re-1][1])/wt;at+=mt*Y[Ee][Re][1]}cr[Re]=Vt-=Ke?at/Ke*wt:0,Vt<Yt&&(Yt=Vt)}for(Re=0;Re<_e;++Re)cr[Re]-=Yt;return cr},expand:function(Y){var he=Y.length,ye=Y[0].length,_e=1/he,Ee,Re,rt,Ke=[];for(Re=0;Re<ye;++Re){for(Ee=0,rt=0;Ee<he;Ee++)rt+=Y[Ee][Re][1];if(rt)for(Ee=0;Ee<he;Ee++)Y[Ee][Re][1]/=rt;else for(Ee=0;Ee<he;Ee++)Y[Ee][Re][1]=_e}for(Re=0;Re<ye;++Re)Ke[Re]=0;return Ke},zero:Df});function dc(Y){return r.range(Y.length)}function Df(Y){for(var he=-1,ye=Y[0].length,_e=[];++he<ye;)_e[he]=0;return _e}function Rh(Y){for(var he=1,ye=0,_e=Y[0][1],Ee,Re=Y.length;he<Re;++he)(Ee=Y[he][1])>_e&&(ye=he,_e=Ee);return ye}function rv(Y){return Y.reduce(_0,0)}function _0(Y,he){return Y+he[1]}r.layout.histogram=function(){var Y=!0,he=Number,ye=T0,_e=w0;function Ee(Re,Yt){for(var Ke=[],at=Re.map(he,this),mt=ye.call(this,at,Yt),wt=_e.call(this,mt,at,Yt),Vt,Yt=-1,cr=at.length,Rr=wt.length-1,ir=Y?1:1/cr,hr;++Yt<Rr;)Vt=Ke[Yt]=[],Vt.dx=wt[Yt+1]-(Vt.x=wt[Yt]),Vt.y=0;if(Rr>0)for(Yt=-1;++Yt<cr;)hr=at[Yt],hr>=mt[0]&&hr<=mt[1]&&(Vt=Ke[r.bisect(wt,hr,1,Rr)-1],Vt.y+=ir,Vt.push(Re[Yt]));return Ke}return Ee.value=function(Re){return arguments.length?(he=Re,Ee):he},Ee.range=function(Re){return arguments.length?(ye=Cr(Re),Ee):ye},Ee.bins=function(Re){return arguments.length?(_e=typeof Re=="number"?function(rt){return Pu(rt,Re)}:Cr(Re),Ee):_e},Ee.frequency=function(Re){return arguments.length?(Y=!!Re,Ee):Y},Ee};function w0(Y,he){return Pu(Y,Math.ceil(Math.log(he.length)/Math.LN2+1))}function Pu(Y,he){for(var ye=-1,_e=+Y[0],Ee=(Y[1]-_e)/he,Re=[];++ye<=he;)Re[ye]=Ee*ye+_e;return Re}function T0(Y){return[r.min(Y),r.max(Y)]}r.layout.pack=function(){var Y=r.layout.hierarchy().sort(pp),he=0,ye=[1,1],_e;function Ee(Re,rt){var Ke=Y.call(this,Re,rt),at=Ke[0],mt=ye[0],wt=ye[1],Vt=_e==null?Math.sqrt:typeof _e=="function"?_e:function(){return _e};if(at.x=at.y=0,os(at,function(cr){cr.r=+Vt(cr.value)}),os(at,vu),he){var Yt=he*(_e?1:Math.max(2*at.r/mt,2*at.r/wt))/2;os(at,function(cr){cr.r+=Yt}),os(at,vu),os(at,function(cr){cr.r-=Yt})}return dp(at,mt/2,wt/2,_e?1:1/Math.max(2*at.r/mt,2*at.r/wt)),Ke}return Ee.size=function(Re){return arguments.length?(ye=Re,Ee):ye},Ee.radius=function(Re){return arguments.length?(_e=Re==null||typeof Re=="function"?Re:+Re,Ee):_e},Ee.padding=function(Re){return arguments.length?(he=+Re,Ee):he},ql(Ee,Y)};function pp(Y,he){return Y.value-he.value}function Rf(Y,he){var ye=Y._pack_next;Y._pack_next=he,he._pack_prev=Y,he._pack_next=ye,ye._pack_prev=he}function ld(Y,he){Y._pack_next=he,he._pack_prev=Y}function tf(Y,he){var ye=he.x-Y.x,_e=he.y-Y.y,Ee=Y.r+he.r;return .999*Ee*Ee>ye*ye+_e*_e}function vu(Y){if(!(he=Y.children)||!(Yt=he.length))return;var he,ye=1/0,_e=-1/0,Ee=1/0,Re=-1/0,rt,Ke,at,mt,wt,Vt,Yt;function cr(kr){ye=Math.min(kr.x-kr.r,ye),_e=Math.max(kr.x+kr.r,_e),Ee=Math.min(kr.y-kr.r,Ee),Re=Math.max(kr.y+kr.r,Re)}if(he.forEach(No),rt=he[0],rt.x=-rt.r,rt.y=0,cr(rt),Yt>1&&(Ke=he[1],Ke.x=Ke.r,Ke.y=0,cr(Ke),Yt>2))for(at=he[2],rf(rt,Ke,at),cr(at),Rf(rt,at),rt._pack_prev=at,Rf(at,Ke),Ke=rt._pack_next,mt=3;mt<Yt;mt++){rf(rt,Ke,at=he[mt]);var Rr=0,ir=1,hr=1;for(wt=Ke._pack_next;wt!==Ke;wt=wt._pack_next,ir++)if(tf(wt,at)){Rr=1;break}if(Rr==1)for(Vt=rt._pack_prev;Vt!==wt._pack_prev&&!tf(Vt,at);Vt=Vt._pack_prev,hr++);Rr?(ir<hr||ir==hr&&Ke.r<rt.r?ld(rt,Ke=wt):ld(rt=Vt,Ke),mt--):(Rf(rt,at),Ke=at,cr(at))}var vr=(ye+_e)/2,Ir=(Ee+Re)/2,gr=0;for(mt=0;mt<Yt;mt++)at=he[mt],at.x-=vr,at.y-=Ir,gr=Math.max(gr,at.r+Math.sqrt(at.x*at.x+at.y*at.y));Y.r=gr,he.forEach(sh)}function No(Y){Y._pack_next=Y._pack_prev=Y}function sh(Y){delete Y._pack_next,delete Y._pack_prev}function dp(Y,he,ye,_e){var Ee=Y.children;if(Y.x=he+=_e*Y.x,Y.y=ye+=_e*Y.y,Y.r*=_e,Ee)for(var Re=-1,rt=Ee.length;++Re<rt;)dp(Ee[Re],he,ye,_e)}function rf(Y,he,ye){var _e=Y.r+ye.r,Ee=he.x-Y.x,Re=he.y-Y.y;if(_e&&(Ee||Re)){var rt=he.r+ye.r,Ke=Ee*Ee+Re*Re;rt*=rt,_e*=_e;var at=.5+(_e-rt)/(2*Ke),mt=Math.sqrt(Math.max(0,2*rt*(_e+Ke)-(_e-=Ke)*_e-rt*rt))/(2*Ke);ye.x=Y.x+at*Ee+mt*Re,ye.y=Y.y+at*Re-mt*Ee}else ye.x=Y.x+_e,ye.y=Y.y}r.layout.tree=function(){var Y=r.layout.hierarchy().sort(null).value(null),he=lh,ye=[1,1],_e=null;function Ee(wt,Vt){var Yt=Y.call(this,wt,Vt),cr=Yt[0],Rr=Re(cr);if(os(Rr,rt),Rr.parent.m=-Rr.z,eu(Rr,Ke),_e)eu(cr,mt);else{var ir=cr,hr=cr,vr=cr;eu(cr,function(gn){gn.x<ir.x&&(ir=gn),gn.x>hr.x&&(hr=gn),gn.depth>vr.depth&&(vr=gn)});var Ir=he(ir,hr)/2-ir.x,gr=ye[0]/(hr.x+he(hr,ir)/2+Ir),kr=ye[1]/(vr.depth||1);eu(cr,function(gn){gn.x=(gn.x+Ir)*gr,gn.y=gn.depth*kr})}return Yt}function Re(wt){for(var Vt={A:null,children:[wt]},Yt=[Vt],cr;(cr=Yt.pop())!=null;)for(var Rr=cr.children,ir,hr=0,vr=Rr.length;hr<vr;++hr)Yt.push((Rr[hr]=ir={_:Rr[hr],parent:cr,children:(ir=Rr[hr].children)&&ir.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:hr}).a=ir);return Vt.children[0]}function rt(wt){var Vt=wt.children,Yt=wt.parent.children,cr=wt.i?Yt[wt.i-1]:null;if(Vt.length){If(wt);var Rr=(Vt[0].z+Vt[Vt.length-1].z)/2;cr?(wt.z=cr.z+he(wt._,cr._),wt.m=wt.z-Rr):wt.z=Rr}else cr&&(wt.z=cr.z+he(wt._,cr._));wt.parent.A=at(wt,cr,wt.parent.A||Yt[0])}function Ke(wt){wt._.x=wt.z+wt.parent.m,wt.m+=wt.parent.m}function at(wt,Vt,Yt){if(Vt){for(var cr=wt,Rr=wt,ir=Vt,hr=cr.parent.children[0],vr=cr.m,Ir=Rr.m,gr=ir.m,kr=hr.m,gn;ir=Ih(ir),cr=Pc(cr),ir&&cr;)hr=Pc(hr),Rr=Ih(Rr),Rr.a=wt,gn=ir.z+gr-cr.z-vr+he(ir._,cr._),gn>0&&(vp(vc(ir,wt,Yt),wt,gn),vr+=gn,Ir+=gn),gr+=ir.m,vr+=cr.m,kr+=hr.m,Ir+=Rr.m;ir&&!Ih(Rr)&&(Rr.t=ir,Rr.m+=gr-Ir),cr&&!Pc(hr)&&(hr.t=cr,hr.m+=vr-kr,Yt=wt)}return Yt}function mt(wt){wt.x*=ye[0],wt.y=wt.depth*ye[1]}return Ee.separation=function(wt){return arguments.length?(he=wt,Ee):he},Ee.size=function(wt){return arguments.length?(_e=(ye=wt)==null?mt:null,Ee):_e?null:ye},Ee.nodeSize=function(wt){return arguments.length?(_e=(ye=wt)==null?null:mt,Ee):_e?ye:null},ql(Ee,Y)};function lh(Y,he){return Y.parent==he.parent?1:2}function Pc(Y){var he=Y.children;return he.length?he[0]:Y.t}function Ih(Y){var he=Y.children,ye;return(ye=he.length)?he[ye-1]:Y.t}function vp(Y,he,ye){var _e=ye/(he.i-Y.i);he.c-=_e,he.s+=ye,Y.c+=_e,he.z+=ye,he.m+=ye}function If(Y){for(var he=0,ye=0,_e=Y.children,Ee=_e.length,Re;--Ee>=0;)Re=_e[Ee],Re.z+=he,Re.m+=he,he+=Re.s+(ye+=Re.c)}function vc(Y,he,ye){return Y.a.parent===he.parent?Y.a:ye}r.layout.cluster=function(){var Y=r.layout.hierarchy().sort(null).value(null),he=lh,ye=[1,1],_e=!1;function Ee(Re,rt){var Ke=Y.call(this,Re,rt),at=Ke[0],mt,wt=0;os(at,function(ir){var hr=ir.children;hr&&hr.length?(ir.x=nf(hr),ir.y=ud(hr)):(ir.x=mt?wt+=he(ir,mt):0,ir.y=0,mt=ir)});var Vt=zf(at),Yt=cd(at),cr=Vt.x-he(Vt,Yt)/2,Rr=Yt.x+he(Yt,Vt)/2;return os(at,_e?function(ir){ir.x=(ir.x-at.x)*ye[0],ir.y=(at.y-ir.y)*ye[1]}:function(ir){ir.x=(ir.x-cr)/(Rr-cr)*ye[0],ir.y=(1-(at.y?ir.y/at.y:1))*ye[1]}),Ke}return Ee.separation=function(Re){return arguments.length?(he=Re,Ee):he},Ee.size=function(Re){return arguments.length?(_e=(ye=Re)==null,Ee):_e?null:ye},Ee.nodeSize=function(Re){return arguments.length?(_e=(ye=Re)!=null,Ee):_e?ye:null},ql(Ee,Y)};function ud(Y){return 1+r.max(Y,function(he){return he.y})}function nf(Y){return Y.reduce(function(he,ye){return he+ye.x},0)/Y.length}function zf(Y){var he=Y.children;return he&&he.length?zf(he[0]):Y}function cd(Y){var he=Y.children,ye;return he&&(ye=he.length)?cd(he[ye-1]):Y}r.layout.treemap=function(){var Y=r.layout.hierarchy(),he=Math.round,ye=[1,1],_e=null,Ee=Of,Re=!1,rt,Ke="squarify",at=.5*(1+Math.sqrt(5));function mt(ir,hr){for(var vr=-1,Ir=ir.length,gr,kr;++vr<Ir;)kr=(gr=ir[vr]).value*(hr<0?0:hr),gr.area=isNaN(kr)||kr<=0?0:kr}function wt(ir){var hr=ir.children;if(hr&&hr.length){var vr=Ee(ir),Ir=[],gr=hr.slice(),kr,gn=1/0,dn,fn=Ke==="slice"?vr.dx:Ke==="dice"?vr.dy:Ke==="slice-dice"?ir.depth&1?vr.dy:vr.dx:Math.min(vr.dx,vr.dy),on;for(mt(gr,vr.dx*vr.dy/ir.value),Ir.area=0;(on=gr.length)>0;)Ir.push(kr=gr[on-1]),Ir.area+=kr.area,Ke!=="squarify"||(dn=Yt(Ir,fn))<=gn?(gr.pop(),gn=dn):(Ir.area-=Ir.pop().area,cr(Ir,fn,vr,!1),fn=Math.min(vr.dx,vr.dy),Ir.length=Ir.area=0,gn=1/0);Ir.length&&(cr(Ir,fn,vr,!0),Ir.length=Ir.area=0),hr.forEach(wt)}}function Vt(ir){var hr=ir.children;if(hr&&hr.length){var vr=Ee(ir),Ir=hr.slice(),gr,kr=[];for(mt(Ir,vr.dx*vr.dy/ir.value),kr.area=0;gr=Ir.pop();)kr.push(gr),kr.area+=gr.area,gr.z!=null&&(cr(kr,gr.z?vr.dx:vr.dy,vr,!Ir.length),kr.length=kr.area=0);hr.forEach(Vt)}}function Yt(ir,hr){for(var vr=ir.area,Ir,gr=0,kr=1/0,gn=-1,dn=ir.length;++gn<dn;)!(Ir=ir[gn].area)||(Ir<kr&&(kr=Ir),Ir>gr&&(gr=Ir));return vr*=vr,hr*=hr,vr?Math.max(hr*gr*at/vr,vr/(hr*kr*at)):1/0}function cr(ir,hr,vr,Ir){var gr=-1,kr=ir.length,gn=vr.x,dn=vr.y,fn=hr?he(ir.area/hr):0,on;if(hr==vr.dx){for((Ir||fn>vr.dy)&&(fn=vr.dy);++gr<kr;)on=ir[gr],on.x=gn,on.y=dn,on.dy=fn,gn+=on.dx=Math.min(vr.x+vr.dx-gn,fn?he(on.area/fn):0);on.z=!0,on.dx+=vr.x+vr.dx-gn,vr.y+=fn,vr.dy-=fn}else{for((Ir||fn>vr.dx)&&(fn=vr.dx);++gr<kr;)on=ir[gr],on.x=gn,on.y=dn,on.dx=fn,dn+=on.dy=Math.min(vr.y+vr.dy-dn,fn?he(on.area/fn):0);on.z=!1,on.dy+=vr.y+vr.dy-dn,vr.x+=fn,vr.dx-=fn}}function Rr(ir){var hr=rt||Y(ir),vr=hr[0];return vr.x=vr.y=0,vr.value?(vr.dx=ye[0],vr.dy=ye[1]):vr.dx=vr.dy=0,rt&&Y.revalue(vr),mt([vr],vr.dx*vr.dy/vr.value),(rt?Vt:wt)(vr),Re&&(rt=hr),hr}return Rr.size=function(ir){return arguments.length?(ye=ir,Rr):ye},Rr.padding=function(ir){if(!arguments.length)return _e;function hr(gr){var kr=ir.call(Rr,gr,gr.depth);return kr==null?Of(gr):nv(gr,typeof kr=="number"?[kr,kr,kr,kr]:kr)}function vr(gr){return nv(gr,ir)}var Ir;return Ee=(_e=ir)==null?Of:(Ir=typeof ir)=="function"?hr:(Ir==="number"&&(ir=[ir,ir,ir,ir]),vr),Rr},Rr.round=function(ir){return arguments.length?(he=ir?Math.round:Number,Rr):he!=Number},Rr.sticky=function(ir){return arguments.length?(Re=ir,rt=null,Rr):Re},Rr.ratio=function(ir){return arguments.length?(at=ir,Rr):at},Rr.mode=function(ir){return arguments.length?(Ke=ir+"",Rr):Ke},ql(Rr,Y)};function Of(Y){return{x:Y.x,y:Y.y,dx:Y.dx,dy:Y.dy}}function nv(Y,he){var ye=Y.x+he[3],_e=Y.y+he[0],Ee=Y.dx-he[1]-he[3],Re=Y.dy-he[0]-he[2];return Ee<0&&(ye+=Ee/2,Ee=0),Re<0&&(_e+=Re/2,Re=0),{x:ye,y:_e,dx:Ee,dy:Re}}r.random={normal:function(Y,he){var ye=arguments.length;return ye<2&&(he=1),ye<1&&(Y=0),function(){var _e,Ee,Re;do _e=Math.random()*2-1,Ee=Math.random()*2-1,Re=_e*_e+Ee*Ee;while(!Re||Re>1);return Y+he*_e*Math.sqrt(-2*Math.log(Re)/Re)}},logNormal:function(){var Y=r.random.normal.apply(r,arguments);return function(){return Math.exp(Y())}},bates:function(Y){var he=r.random.irwinHall(Y);return function(){return he()/Y}},irwinHall:function(Y){return function(){for(var he=0,ye=0;ye<Y;ye++)he+=Math.random();return he}}},r.scale={};function af(Y){var he=Y[0],ye=Y[Y.length-1];return he<ye?[he,ye]:[ye,he]}function uh(Y){return Y.rangeExtent?Y.rangeExtent():af(Y.range())}function Nu(Y,he,ye,_e){var Ee=ye(Y[0],Y[1]),Re=_e(he[0],he[1]);return function(rt){return Re(Ee(rt))}}function zh(Y,he){var ye=0,_e=Y.length-1,Ee=Y[ye],Re=Y[_e],rt;return Re<Ee&&(rt=ye,ye=_e,_e=rt,rt=Ee,Ee=Re,Re=rt),Y[ye]=he.floor(Ee),Y[_e]=he.ceil(Re),Y}function av(Y){return Y?{floor:function(he){return Math.floor(he/Y)*Y},ceil:function(he){return Math.ceil(he/Y)*Y}}:iv}var iv={floor:G,ceil:G};function fd(Y,he,ye,_e){var Ee=[],Re=[],rt=0,Ke=Math.min(Y.length,he.length)-1;for(Y[Ke]<Y[0]&&(Y=Y.slice().reverse(),he=he.slice().reverse());++rt<=Ke;)Ee.push(ye(Y[rt-1],Y[rt])),Re.push(_e(he[rt-1],he[rt]));return function(at){var mt=r.bisect(Y,at,1,Ke)-1;return Re[mt](Ee[mt](at))}}r.scale.linear=function(){return Bl([0,1],[0,1],wa,!1)};function Bl(Y,he,ye,_e){var Ee,Re;function rt(){var at=Math.min(Y.length,he.length)>2?fd:Nu,mt=_e?ef:qc;return Ee=at(Y,he,mt,ye),Re=at(he,Y,mt,wa),Ke}function Ke(at){return Ee(at)}return Ke.invert=function(at){return Re(at)},Ke.domain=function(at){return arguments.length?(Y=at.map(Number),rt()):Y},Ke.range=function(at){return arguments.length?(he=at,rt()):he},Ke.rangeRound=function(at){return Ke.range(at).interpolate(Jl)},Ke.clamp=function(at){return arguments.length?(_e=at,rt()):_e},Ke.interpolate=function(at){return arguments.length?(ye=at,rt()):ye},Ke.ticks=function(at){return Ff(Y,at)},Ke.tickFormat=function(at,mt){return Dc(Y,at,mt)},Ke.nice=function(at){return ov(Y,at),rt()},Ke.copy=function(){return Bl(Y,he,ye,_e)},rt()}function Dl(Y,he){return r.rebind(Y,he,"range","rangeRound","interpolate","clamp")}function ov(Y,he){return zh(Y,av(ch(Y,he)[2])),zh(Y,av(ch(Y,he)[2])),Y}function ch(Y,he){he==null&&(he=10);var ye=af(Y),_e=ye[1]-ye[0],Ee=Math.pow(10,Math.floor(Math.log(_e/he)/Math.LN10)),Re=he/_e*Ee;return Re<=.15?Ee*=10:Re<=.35?Ee*=5:Re<=.75&&(Ee*=2),ye[0]=Math.ceil(ye[0]/Ee)*Ee,ye[1]=Math.floor(ye[1]/Ee)*Ee+Ee*.5,ye[2]=Ee,ye}function Ff(Y,he){return r.range.apply(r,ch(Y,he))}function Dc(Y,he,ye){var _e=ch(Y,he);if(ye){var Ee=Ta.exec(ye);if(Ee.shift(),Ee[8]==="s"){var Re=r.formatPrefix(Math.max(x(_e[0]),x(_e[1])));return Ee[7]||(Ee[7]="."+Oh(Re.scale(_e[2]))),Ee[8]="f",ye=r.format(Ee.join("")),function(rt){return ye(Re.scale(rt))+Re.symbol}}Ee[7]||(Ee[7]="."+fh(Ee[8],_e)),ye=Ee.join("")}else ye=",."+Oh(_e[2])+"f";return r.format(ye)}var sv={s:1,g:1,p:1,r:1,e:1};function Oh(Y){return-Math.floor(Math.log(Y)/Math.LN10+.01)}function fh(Y,he){var ye=Oh(he[2]);return Y in sv?Math.abs(ye-Oh(Math.max(x(he[0]),x(he[1]))))+ +(Y!=="e"):ye-(Y==="%")*2}r.scale.log=function(){return hd(r.scale.linear().domain([0,1]),10,!0,[1,10])};function hd(Y,he,ye,_e){function Ee(Ke){return(ye?Math.log(Ke<0?0:Ke):-Math.log(Ke>0?0:-Ke))/Math.log(he)}function Re(Ke){return ye?Math.pow(he,Ke):-Math.pow(he,-Ke)}function rt(Ke){return Y(Ee(Ke))}return rt.invert=function(Ke){return Re(Y.invert(Ke))},rt.domain=function(Ke){return arguments.length?(ye=Ke[0]>=0,Y.domain((_e=Ke.map(Number)).map(Ee)),rt):_e},rt.base=function(Ke){return arguments.length?(he=+Ke,Y.domain(_e.map(Ee)),rt):he},rt.nice=function(){var Ke=zh(_e.map(Ee),ye?Math:Ic);return Y.domain(Ke),_e=Ke.map(Re),rt},rt.ticks=function(){var Ke=af(_e),at=[],mt=Ke[0],wt=Ke[1],Vt=Math.floor(Ee(mt)),Yt=Math.ceil(Ee(wt)),cr=he%1?2:he;if(isFinite(Yt-Vt)){if(ye){for(;Vt<Yt;Vt++)for(var Rr=1;Rr<cr;Rr++)at.push(Re(Vt)*Rr);at.push(Re(Vt))}else for(at.push(Re(Vt));Vt++<Yt;)for(var Rr=cr-1;Rr>0;Rr--)at.push(Re(Vt)*Rr);for(Vt=0;at[Vt]<mt;Vt++);for(Yt=at.length;at[Yt-1]>wt;Yt--);at=at.slice(Vt,Yt)}return at},rt.tickFormat=function(Ke,at){if(!arguments.length)return Rc;arguments.length<2?at=Rc:typeof at!="function"&&(at=r.format(at));var mt=Math.max(1,he*Ke/rt.ticks().length);return function(wt){var Vt=wt/Re(Math.round(Ee(wt)));return Vt*he<he-.5&&(Vt*=he),Vt<=mt?at(wt):""}},rt.copy=function(){return hd(Y.copy(),he,ye,_e)},Dl(rt,Y)}var Rc=r.format(".0e"),Ic={floor:function(Y){return-Math.ceil(-Y)},ceil:function(Y){return-Math.floor(-Y)}};r.scale.pow=function(){return Bu(r.scale.linear(),1,[0,1])};function Bu(Y,he,ye){var _e=Fh(he),Ee=Fh(1/he);function Re(rt){return Y(_e(rt))}return Re.invert=function(rt){return Ee(Y.invert(rt))},Re.domain=function(rt){return arguments.length?(Y.domain((ye=rt.map(Number)).map(_e)),Re):ye},Re.ticks=function(rt){return Ff(ye,rt)},Re.tickFormat=function(rt,Ke){return Dc(ye,rt,Ke)},Re.nice=function(rt){return Re.domain(ov(ye,rt))},Re.exponent=function(rt){return arguments.length?(_e=Fh(he=rt),Ee=Fh(1/he),Y.domain(ye.map(_e)),Re):he},Re.copy=function(){return Bu(Y.copy(),he,ye)},Dl(Re,Y)}function Fh(Y){return function(he){return he<0?-Math.pow(-he,Y):Math.pow(he,Y)}}r.scale.sqrt=function(){return r.scale.pow().exponent(.5)},r.scale.ordinal=function(){return pd([],{t:"range",a:[[]]})};function pd(Y,he){var ye,_e,Ee;function Re(Ke){return _e[((ye.get(Ke)||(he.t==="range"?ye.set(Ke,Y.push(Ke)):NaN))-1)%_e.length]}function rt(Ke,at){return r.range(Y.length).map(function(mt){return Ke+at*mt})}return Re.domain=function(Ke){if(!arguments.length)return Y;Y=[],ye=new T;for(var at=-1,mt=Ke.length,wt;++at<mt;)ye.has(wt=Ke[at])||ye.set(wt,Y.push(wt));return Re[he.t].apply(Re,he.a)},Re.range=function(Ke){return arguments.length?(_e=Ke,Ee=0,he={t:"range",a:arguments},Re):_e},Re.rangePoints=function(Ke,at){arguments.length<2&&(at=0);var mt=Ke[0],wt=Ke[1],Vt=Y.length<2?(mt=(mt+wt)/2,0):(wt-mt)/(Y.length-1+at);return _e=rt(mt+Vt*at/2,Vt),Ee=0,he={t:"rangePoints",a:arguments},Re},Re.rangeRoundPoints=function(Ke,at){arguments.length<2&&(at=0);var mt=Ke[0],wt=Ke[1],Vt=Y.length<2?(mt=wt=Math.round((mt+wt)/2),0):(wt-mt)/(Y.length-1+at)|0;return _e=rt(mt+Math.round(Vt*at/2+(wt-mt-(Y.length-1+at)*Vt)/2),Vt),Ee=0,he={t:"rangeRoundPoints",a:arguments},Re},Re.rangeBands=function(Ke,at,mt){arguments.length<2&&(at=0),arguments.length<3&&(mt=at);var wt=Ke[1]<Ke[0],Vt=Ke[wt-0],Yt=Ke[1-wt],cr=(Yt-Vt)/(Y.length-at+2*mt);return _e=rt(Vt+cr*mt,cr),wt&&_e.reverse(),Ee=cr*(1-at),he={t:"rangeBands",a:arguments},Re},Re.rangeRoundBands=function(Ke,at,mt){arguments.length<2&&(at=0),arguments.length<3&&(mt=at);var wt=Ke[1]<Ke[0],Vt=Ke[wt-0],Yt=Ke[1-wt],cr=Math.floor((Yt-Vt)/(Y.length-at+2*mt));return _e=rt(Vt+Math.round((Yt-Vt-(Y.length-at)*cr)/2),cr),wt&&_e.reverse(),Ee=Math.round(cr*(1-at)),he={t:"rangeRoundBands",a:arguments},Re},Re.rangeBand=function(){return Ee},Re.rangeExtent=function(){return af(he.a[0])},Re.copy=function(){return pd(Y,he)},Re.domain(Y)}r.scale.category10=function(){return r.scale.ordinal().range(mp)},r.scale.category20=function(){return r.scale.ordinal().range(hh)},r.scale.category20b=function(){return r.scale.ordinal().range(Nh)},r.scale.category20c=function(){return r.scale.ordinal().range(gp)};var mp=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(pn),hh=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(pn),Nh=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(pn),gp=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(pn);r.scale.quantile=function(){return Bh([],[])};function Bh(Y,he){var ye;function _e(){var Re=0,rt=he.length;for(ye=[];++Re<rt;)ye[Re-1]=r.quantile(Y,Re/rt);return Ee}function Ee(Re){if(!isNaN(Re=+Re))return he[r.bisect(ye,Re)]}return Ee.domain=function(Re){return arguments.length?(Y=Re.map(p).filter(d).sort(s),_e()):Y},Ee.range=function(Re){return arguments.length?(he=Re,_e()):he},Ee.quantiles=function(){return ye},Ee.invertExtent=function(Re){return Re=he.indexOf(Re),Re<0?[NaN,NaN]:[Re>0?ye[Re-1]:Y[0],Re<ye.length?ye[Re]:Y[Y.length-1]]},Ee.copy=function(){return Bh(Y,he)},_e()}r.scale.quantize=function(){return lv(0,1,[0,1])};function lv(Y,he,ye){var _e,Ee;function Re(Ke){return ye[Math.max(0,Math.min(Ee,Math.floor(_e*(Ke-Y))))]}function rt(){return _e=ye.length/(he-Y),Ee=ye.length-1,Re}return Re.domain=function(Ke){return arguments.length?(Y=+Ke[0],he=+Ke[Ke.length-1],rt()):[Y,he]},Re.range=function(Ke){return arguments.length?(ye=Ke,rt()):ye},Re.invertExtent=function(Ke){return Ke=ye.indexOf(Ke),Ke=Ke<0?NaN:Ke/_e+Y,[Ke,Ke+1/_e]},Re.copy=function(){return lv(Y,he,ye)},rt()}r.scale.threshold=function(){return yp([.5],[0,1])};function yp(Y,he){function ye(_e){if(_e<=_e)return he[r.bisect(Y,_e)]}return ye.domain=function(_e){return arguments.length?(Y=_e,ye):Y},ye.range=function(_e){return arguments.length?(he=_e,ye):he},ye.invertExtent=function(_e){return _e=he.indexOf(_e),[Y[_e-1],Y[_e]]},ye.copy=function(){return yp(Y,he)},ye}r.scale.identity=function(){return Xs([0,1])};function Xs(Y){function he(ye){return+ye}return he.invert=he,he.domain=he.range=function(ye){return arguments.length?(Y=ye.map(he),he):Y},he.ticks=function(ye){return Ff(Y,ye)},he.tickFormat=function(ye,_e){return Dc(Y,ye,_e)},he.copy=function(){return Xs(Y)},he}r.svg={};function uv(){return 0}r.svg.arc=function(){var Y=cv,he=fv,ye=uv,_e=Nf,Ee=$u,Re=Uh,rt=hv;function Ke(){var mt=Math.max(0,+Y.apply(this,arguments)),wt=Math.max(0,+he.apply(this,arguments)),Vt=Ee.apply(this,arguments)-ke,Yt=Re.apply(this,arguments)-ke,cr=Math.abs(Yt-Vt),Rr=Vt>Yt?0:1;if(wt<mt&&(ir=wt,wt=mt,mt=ir),cr>=et)return at(wt,Rr)+(mt?at(mt,1-Rr):"")+"Z";var ir,hr,vr,Ir,gr=0,kr=0,gn,dn,fn,on,Yn,$n,Ca,pa,ma=[];if((Ir=(+rt.apply(this,arguments)||0)/2)&&(vr=_e===Nf?Math.sqrt(mt*mt+wt*wt):+_e.apply(this,arguments),Rr||(kr*=-1),wt&&(kr=je(vr/wt*Math.sin(Ir))),mt&&(gr=je(vr/mt*Math.sin(Ir)))),wt){gn=wt*Math.cos(Vt+kr),dn=wt*Math.sin(Vt+kr),fn=wt*Math.cos(Yt-kr),on=wt*Math.sin(Yt-kr);var Sn=Math.abs(Yt-Vt-2*kr)<=Le?0:1;if(kr&&xp(gn,dn,fn,on)===Rr^Sn){var Kn=(Vt+Yt)/2;gn=wt*Math.cos(Kn),dn=wt*Math.sin(Kn),fn=on=null}}else gn=dn=0;if(mt){Yn=mt*Math.cos(Yt-gr),$n=mt*Math.sin(Yt-gr),Ca=mt*Math.cos(Vt+gr),pa=mt*Math.sin(Vt+gr);var ua=Math.abs(Vt-Yt+2*gr)<=Le?0:1;if(gr&&xp(Yn,$n,Ca,pa)===1-Rr^ua){var yn=(Vt+Yt)/2;Yn=mt*Math.cos(yn),$n=mt*Math.sin(yn),Ca=pa=null}}else Yn=$n=0;if(cr>lt&&(ir=Math.min(Math.abs(wt-mt)/2,+ye.apply(this,arguments)))>.001){hr=mt<wt^Rr?0:1;var Vn=ir,ja=ir;if(cr<Le){var xi=Ca==null?[Yn,$n]:fn==null?[gn,dn]:ps([gn,dn],[Ca,pa],[fn,on],[Yn,$n]),Pi=gn-xi[0],vo=dn-xi[1],Ro=fn-xi[0],Ks=on-xi[1],Ls=1/Math.sin(Math.acos((Pi*Ro+vo*Ks)/(Math.sqrt(Pi*Pi+vo*vo)*Math.sqrt(Ro*Ro+Ks*Ks)))/2),Ps=Math.sqrt(xi[0]*xi[0]+xi[1]*xi[1]);ja=Math.min(ir,(mt-Ps)/(Ls-1)),Vn=Math.min(ir,(wt-Ps)/(Ls+1))}if(fn!=null){var tu=ph(Ca==null?[Yn,$n]:[Ca,pa],[gn,dn],wt,Vn,Rr),ro=ph([fn,on],[Yn,$n],wt,Vn,Rr);ir===Vn?ma.push("M",tu[0],"A",Vn,",",Vn," 0 0,",hr," ",tu[1],"A",wt,",",wt," 0 ",1-Rr^xp(tu[1][0],tu[1][1],ro[1][0],ro[1][1]),",",Rr," ",ro[1],"A",Vn,",",Vn," 0 0,",hr," ",ro[0]):ma.push("M",tu[0],"A",Vn,",",Vn," 0 1,",hr," ",ro[0])}else ma.push("M",gn,",",dn);if(Ca!=null){var _l=ph([gn,dn],[Ca,pa],mt,-ja,Rr),ru=ph([Yn,$n],fn==null?[gn,dn]:[fn,on],mt,-ja,Rr);ir===ja?ma.push("L",ru[0],"A",ja,",",ja," 0 0,",hr," ",ru[1],"A",mt,",",mt," 0 ",Rr^xp(ru[1][0],ru[1][1],_l[1][0],_l[1][1]),",",1-Rr," ",_l[1],"A",ja,",",ja," 0 0,",hr," ",_l[0]):ma.push("L",ru[0],"A",ja,",",ja," 0 0,",hr," ",_l[0])}else ma.push("L",Yn,",",$n)}else ma.push("M",gn,",",dn),fn!=null&&ma.push("A",wt,",",wt," 0 ",Sn,",",Rr," ",fn,",",on),ma.push("L",Yn,",",$n),Ca!=null&&ma.push("A",mt,",",mt," 0 ",ua,",",1-Rr," ",Ca,",",pa);return ma.push("Z"),ma.join("")}function at(mt,wt){return"M0,"+mt+"A"+mt+","+mt+" 0 1,"+wt+" 0,"+-mt+"A"+mt+","+mt+" 0 1,"+wt+" 0,"+mt}return Ke.innerRadius=function(mt){return arguments.length?(Y=Cr(mt),Ke):Y},Ke.outerRadius=function(mt){return arguments.length?(he=Cr(mt),Ke):he},Ke.cornerRadius=function(mt){return arguments.length?(ye=Cr(mt),Ke):ye},Ke.padRadius=function(mt){return arguments.length?(_e=mt==Nf?Nf:Cr(mt),Ke):_e},Ke.startAngle=function(mt){return arguments.length?(Ee=Cr(mt),Ke):Ee},Ke.endAngle=function(mt){return arguments.length?(Re=Cr(mt),Ke):Re},Ke.padAngle=function(mt){return arguments.length?(rt=Cr(mt),Ke):rt},Ke.centroid=function(){var mt=(+Y.apply(this,arguments)+ +he.apply(this,arguments))/2,wt=(+Ee.apply(this,arguments)+ +Re.apply(this,arguments))/2-ke;return[Math.cos(wt)*mt,Math.sin(wt)*mt]},Ke};var Nf="auto";function cv(Y){return Y.innerRadius}function fv(Y){return Y.outerRadius}function $u(Y){return Y.startAngle}function Uh(Y){return Y.endAngle}function hv(Y){return Y&&Y.padAngle}function xp(Y,he,ye,_e){return(Y-ye)*he-(he-_e)*Y>0?0:1}function ph(Y,he,ye,_e,Ee){var Re=Y[0]-he[0],rt=Y[1]-he[1],Ke=(Ee?_e:-_e)/Math.sqrt(Re*Re+rt*rt),at=Ke*rt,mt=-Ke*Re,wt=Y[0]+at,Vt=Y[1]+mt,Yt=he[0]+at,cr=he[1]+mt,Rr=(wt+Yt)/2,ir=(Vt+cr)/2,hr=Yt-wt,vr=cr-Vt,Ir=hr*hr+vr*vr,gr=ye-_e,kr=wt*cr-Yt*Vt,gn=(vr<0?-1:1)*Math.sqrt(Math.max(0,gr*gr*Ir-kr*kr)),dn=(kr*vr-hr*gn)/Ir,fn=(-kr*hr-vr*gn)/Ir,on=(kr*vr+hr*gn)/Ir,Yn=(-kr*hr+vr*gn)/Ir,$n=dn-Rr,Ca=fn-ir,pa=on-Rr,ma=Yn-ir;return $n*$n+Ca*Ca>pa*pa+ma*ma&&(dn=on,fn=Yn),[[dn-at,fn-mt],[dn*ye/gr,fn*ye/gr]]}function pv(Y){var he=mi,ye=pi,_e=Uo,Ee=_s,Re=Ee.key,rt=.7;function Ke(at){var mt=[],wt=[],Vt=-1,Yt=at.length,cr,Rr=Cr(he),ir=Cr(ye);function hr(){mt.push("M",Ee(Y(wt),rt))}for(;++Vt<Yt;)_e.call(this,cr=at[Vt],Vt)?wt.push([+Rr.call(this,cr,Vt),+ir.call(this,cr,Vt)]):wt.length&&(hr(),wt=[]);return wt.length&&hr(),mt.length?mt.join(""):null}return Ke.x=function(at){return arguments.length?(he=at,Ke):he},Ke.y=function(at){return arguments.length?(ye=at,Ke):ye},Ke.defined=function(at){return arguments.length?(_e=at,Ke):_e},Ke.interpolate=function(at){return arguments.length?(typeof at=="function"?Re=Ee=at:Re=(Ee=dd.get(at)||_s).key,Ke):Re},Ke.tension=function(at){return arguments.length?(rt=at,Ke):rt},Ke}r.svg.line=function(){return pv(G)};var dd=r.map({linear:_s,"linear-closed":Vh,step:bp,"step-before":of,"step-after":po,basis:dv,"basis-open":vd,"basis-closed":vv,bundle:Ul,cardinal:zc,"cardinal-open":Bf,"cardinal-closed":_i,monotone:Fc});dd.forEach(function(Y,he){he.key=Y,he.closed=/-closed$/.test(Y)});function _s(Y){return Y.length>1?Y.join("L"):Y+"Z"}function Vh(Y){return Y.join("L")+"Z"}function bp(Y){for(var he=0,ye=Y.length,_e=Y[0],Ee=[_e[0],",",_e[1]];++he<ye;)Ee.push("H",(_e[0]+(_e=Y[he])[0])/2,"V",_e[1]);return ye>1&&Ee.push("H",_e[0]),Ee.join("")}function of(Y){for(var he=0,ye=Y.length,_e=Y[0],Ee=[_e[0],",",_e[1]];++he<ye;)Ee.push("V",(_e=Y[he])[1],"H",_e[0]);return Ee.join("")}function po(Y){for(var he=0,ye=Y.length,_e=Y[0],Ee=[_e[0],",",_e[1]];++he<ye;)Ee.push("H",(_e=Y[he])[0],"V",_e[1]);return Ee.join("")}function Bf(Y,he){return Y.length<4?_s(Y):Y[1]+Uf(Y.slice(1,-1),Oc(Y,he))}function _i(Y,he){return Y.length<3?Vh(Y):Y[0]+Uf((Y.push(Y[0]),Y),Oc([Y[Y.length-2]].concat(Y,[Y[1]]),he))}function zc(Y,he){return Y.length<3?_s(Y):Y[0]+Uf(Y,Oc(Y,he))}function Uf(Y,he){if(he.length<1||Y.length!=he.length&&Y.length!=he.length+2)return _s(Y);var ye=Y.length!=he.length,_e="",Ee=Y[0],Re=Y[1],rt=he[0],Ke=rt,at=1;if(ye&&(_e+="Q"+(Re[0]-rt[0]*2/3)+","+(Re[1]-rt[1]*2/3)+","+Re[0]+","+Re[1],Ee=Y[1],at=2),he.length>1){Ke=he[1],Re=Y[at],at++,_e+="C"+(Ee[0]+rt[0])+","+(Ee[1]+rt[1])+","+(Re[0]-Ke[0])+","+(Re[1]-Ke[1])+","+Re[0]+","+Re[1];for(var mt=2;mt<he.length;mt++,at++)Re=Y[at],Ke=he[mt],_e+="S"+(Re[0]-Ke[0])+","+(Re[1]-Ke[1])+","+Re[0]+","+Re[1]}if(ye){var wt=Y[at];_e+="Q"+(Re[0]+Ke[0]*2/3)+","+(Re[1]+Ke[1]*2/3)+","+wt[0]+","+wt[1]}return _e}function Oc(Y,he){for(var ye=[],_e=(1-he)/2,Ee,Re=Y[0],rt=Y[1],Ke=1,at=Y.length;++Ke<at;)Ee=Re,Re=rt,rt=Y[Ke],ye.push([_e*(rt[0]-Ee[0]),_e*(rt[1]-Ee[1])]);return ye}function dv(Y){if(Y.length<3)return _s(Y);var he=1,ye=Y.length,_e=Y[0],Ee=_e[0],Re=_e[1],rt=[Ee,Ee,Ee,(_e=Y[1])[0]],Ke=[Re,Re,Re,_e[1]],at=[Ee,",",Re,"L",Uu(sf,rt),",",Uu(sf,Ke)];for(Y.push(Y[ye-1]);++he<=ye;)_e=Y[he],rt.shift(),rt.push(_e[0]),Ke.shift(),Ke.push(_e[1]),Vf(at,rt,Ke);return Y.pop(),at.push("L",_e),at.join("")}function vd(Y){if(Y.length<4)return _s(Y);for(var he=[],ye=-1,_e=Y.length,Ee,Re=[0],rt=[0];++ye<3;)Ee=Y[ye],Re.push(Ee[0]),rt.push(Ee[1]);for(he.push(Uu(sf,Re)+","+Uu(sf,rt)),--ye;++ye<_e;)Ee=Y[ye],Re.shift(),Re.push(Ee[0]),rt.shift(),rt.push(Ee[1]),Vf(he,Re,rt);return he.join("")}function vv(Y){for(var he,ye=-1,_e=Y.length,Ee=_e+4,Re,rt=[],Ke=[];++ye<4;)Re=Y[ye%_e],rt.push(Re[0]),Ke.push(Re[1]);for(he=[Uu(sf,rt),",",Uu(sf,Ke)],--ye;++ye<Ee;)Re=Y[ye%_e],rt.shift(),rt.push(Re[0]),Ke.shift(),Ke.push(Re[1]),Vf(he,rt,Ke);return he.join("")}function Ul(Y,he){var ye=Y.length-1;if(ye)for(var _e=Y[0][0],Ee=Y[0][1],Re=Y[ye][0]-_e,rt=Y[ye][1]-Ee,Ke=-1,at,mt;++Ke<=ye;)at=Y[Ke],mt=Ke/ye,at[0]=he*at[0]+(1-he)*(_e+mt*Re),at[1]=he*at[1]+(1-he)*(Ee+mt*rt);return dv(Y)}function Uu(Y,he){return Y[0]*he[0]+Y[1]*he[1]+Y[2]*he[2]+Y[3]*he[3]}var mv=[0,2/3,1/3,0],md=[0,1/3,2/3,0],sf=[0,1/6,2/3,1/6];function Vf(Y,he,ye){Y.push("C",Uu(mv,he),",",Uu(mv,ye),",",Uu(md,he),",",Uu(md,ye),",",Uu(sf,he),",",Uu(sf,ye))}function lf(Y,he){return(he[1]-Y[1])/(he[0]-Y[0])}function gv(Y){for(var he=0,ye=Y.length-1,_e=[],Ee=Y[0],Re=Y[1],rt=_e[0]=lf(Ee,Re);++he<ye;)_e[he]=(rt+(rt=lf(Ee=Re,Re=Y[he+1])))/2;return _e[he]=rt,_e}function A0(Y){for(var he=[],ye,_e,Ee,Re,rt=gv(Y),Ke=-1,at=Y.length-1;++Ke<at;)ye=lf(Y[Ke],Y[Ke+1]),x(ye)<lt?rt[Ke]=rt[Ke+1]=0:(_e=rt[Ke]/ye,Ee=rt[Ke+1]/ye,Re=_e*_e+Ee*Ee,Re>9&&(Re=ye*3/Math.sqrt(Re),rt[Ke]=Re*_e,rt[Ke+1]=Re*Ee));for(Ke=-1;++Ke<=at;)Re=(Y[Math.min(at,Ke+1)][0]-Y[Math.max(0,Ke-1)][0])/(6*(1+rt[Ke]*rt[Ke])),he.push([Re||0,rt[Ke]*Re||0]);return he}function Fc(Y){return Y.length<3?_s(Y):Y[0]+Uf(Y,A0(Y))}r.svg.line.radial=function(){var Y=pv(Vl);return Y.radius=Y.x,delete Y.x,Y.angle=Y.y,delete Y.y,Y};function Vl(Y){for(var he,ye=-1,_e=Y.length,Ee,Re;++ye<_e;)he=Y[ye],Ee=he[0],Re=he[1]-ke,he[0]=Ee*Math.cos(Re),he[1]=Ee*Math.sin(Re);return Y}function Hh(Y){var he=mi,ye=mi,_e=0,Ee=pi,Re=Uo,rt=_s,Ke=rt.key,at=rt,mt="L",wt=.7;function Vt(Yt){var cr=[],Rr=[],ir=[],hr=-1,vr=Yt.length,Ir,gr=Cr(he),kr=Cr(_e),gn=he===ye?function(){return fn}:Cr(ye),dn=_e===Ee?function(){return on}:Cr(Ee),fn,on;function Yn(){cr.push("M",rt(Y(ir),wt),mt,at(Y(Rr.reverse()),wt),"Z")}for(;++hr<vr;)Re.call(this,Ir=Yt[hr],hr)?(Rr.push([fn=+gr.call(this,Ir,hr),on=+kr.call(this,Ir,hr)]),ir.push([+gn.call(this,Ir,hr),+dn.call(this,Ir,hr)])):Rr.length&&(Yn(),Rr=[],ir=[]);return Rr.length&&Yn(),cr.length?cr.join(""):null}return Vt.x=function(Yt){return arguments.length?(he=ye=Yt,Vt):ye},Vt.x0=function(Yt){return arguments.length?(he=Yt,Vt):he},Vt.x1=function(Yt){return arguments.length?(ye=Yt,Vt):ye},Vt.y=function(Yt){return arguments.length?(_e=Ee=Yt,Vt):Ee},Vt.y0=function(Yt){return arguments.length?(_e=Yt,Vt):_e},Vt.y1=function(Yt){return arguments.length?(Ee=Yt,Vt):Ee},Vt.defined=function(Yt){return arguments.length?(Re=Yt,Vt):Re},Vt.interpolate=function(Yt){return arguments.length?(typeof Yt=="function"?Ke=rt=Yt:Ke=(rt=dd.get(Yt)||_s).key,at=rt.reverse||rt,mt=rt.closed?"M":"L",Vt):Ke},Vt.tension=function(Yt){return arguments.length?(wt=Yt,Vt):wt},Vt}of.reverse=po,po.reverse=of,r.svg.area=function(){return Hh(G)},r.svg.area.radial=function(){var Y=Hh(Vl);return Y.radius=Y.x,delete Y.x,Y.innerRadius=Y.x0,delete Y.x0,Y.outerRadius=Y.x1,delete Y.x1,Y.angle=Y.y,delete Y.y,Y.startAngle=Y.y0,delete Y.y0,Y.endAngle=Y.y1,delete Y.y1,Y},r.svg.chord=function(){var Y=Ss,he=Ws,ye=_p,_e=$u,Ee=Uh;function Re(wt,Vt){var Yt=rt(this,Y,wt,Vt),cr=rt(this,he,wt,Vt);return"M"+Yt.p0+at(Yt.r,Yt.p1,Yt.a1-Yt.a0)+(Ke(Yt,cr)?mt(Yt.r,Yt.p1,Yt.r,Yt.p0):mt(Yt.r,Yt.p1,cr.r,cr.p0)+at(cr.r,cr.p1,cr.a1-cr.a0)+mt(cr.r,cr.p1,Yt.r,Yt.p0))+"Z"}function rt(wt,Vt,Yt,cr){var Rr=Vt.call(wt,Yt,cr),ir=ye.call(wt,Rr,cr),hr=_e.call(wt,Rr,cr)-ke,vr=Ee.call(wt,Rr,cr)-ke;return{r:ir,a0:hr,a1:vr,p0:[ir*Math.cos(hr),ir*Math.sin(hr)],p1:[ir*Math.cos(vr),ir*Math.sin(vr)]}}function Ke(wt,Vt){return wt.a0==Vt.a0&&wt.a1==Vt.a1}function at(wt,Vt,Yt){return"A"+wt+","+wt+" 0 "+ +(Yt>Le)+",1 "+Vt}function mt(wt,Vt,Yt,cr){return"Q 0,0 "+cr}return Re.radius=function(wt){return arguments.length?(ye=Cr(wt),Re):ye},Re.source=function(wt){return arguments.length?(Y=Cr(wt),Re):Y},Re.target=function(wt){return arguments.length?(he=Cr(wt),Re):he},Re.startAngle=function(wt){return arguments.length?(_e=Cr(wt),Re):_e},Re.endAngle=function(wt){return arguments.length?(Ee=Cr(wt),Re):Ee},Re};function _p(Y){return Y.radius}r.svg.diagonal=function(){var Y=Ss,he=Ws,ye=uf;function _e(Ee,Re){var rt=Y.call(this,Ee,Re),Ke=he.call(this,Ee,Re),at=(rt.y+Ke.y)/2,mt=[rt,{x:rt.x,y:at},{x:Ke.x,y:at},Ke];return mt=mt.map(ye),"M"+mt[0]+"C"+mt[1]+" "+mt[2]+" "+mt[3]}return _e.source=function(Ee){return arguments.length?(Y=Cr(Ee),_e):Y},_e.target=function(Ee){return arguments.length?(he=Cr(Ee),_e):he},_e.projection=function(Ee){return arguments.length?(ye=Ee,_e):ye},_e};function uf(Y){return[Y.x,Y.y]}r.svg.diagonal.radial=function(){var Y=r.svg.diagonal(),he=uf,ye=Y.projection;return Y.projection=function(_e){return arguments.length?ye(jh(he=_e)):he},Y};function jh(Y){return function(){var he=Y.apply(this,arguments),ye=he[0],_e=he[1]-ke;return[ye*Math.cos(_e),ye*Math.sin(_e)]}}r.svg.symbol=function(){var Y=mc,he=mu;function ye(_e,Ee){return(dh.get(Y.call(this,_e,Ee))||Zs)(he.call(this,_e,Ee))}return ye.type=function(_e){return arguments.length?(Y=Cr(_e),ye):Y},ye.size=function(_e){return arguments.length?(he=Cr(_e),ye):he},ye};function mu(){return 64}function mc(){return"circle"}function Zs(Y){var he=Math.sqrt(Y/Le);return"M0,"+he+"A"+he+","+he+" 0 1,1 0,"+-he+"A"+he+","+he+" 0 1,1 0,"+he+"Z"}var dh=r.map({circle:Zs,cross:function(Y){var he=Math.sqrt(Y/5)/2;return"M"+-3*he+","+-he+"H"+-he+"V"+-3*he+"H"+he+"V"+-he+"H"+3*he+"V"+he+"H"+he+"V"+3*he+"H"+-he+"V"+he+"H"+-3*he+"Z"},diamond:function(Y){var he=Math.sqrt(Y/(2*Hl)),ye=he*Hl;return"M0,"+-he+"L"+ye+",0 0,"+he+" "+-ye+",0Z"},square:function(Y){var he=Math.sqrt(Y)/2;return"M"+-he+","+-he+"L"+he+","+-he+" "+he+","+he+" "+-he+","+he+"Z"},"triangle-down":function(Y){var he=Math.sqrt(Y/Hf),ye=he*Hf/2;return"M0,"+ye+"L"+he+","+-ye+" "+-he+","+-ye+"Z"},"triangle-up":function(Y){var he=Math.sqrt(Y/Hf),ye=he*Hf/2;return"M0,"+-ye+"L"+he+","+ye+" "+-he+","+ye+"Z"}});r.svg.symbolTypes=dh.keys();var Hf=Math.sqrt(3),Hl=Math.tan(30*Ie);ee.transition=function(Y){for(var he=Qu||++wp,ye=mh(Y),_e=[],Ee,Re,rt=Wh||{time:Date.now(),ease:Li,delay:0,duration:250},Ke=-1,at=this.length;++Ke<at;){_e.push(Ee=[]);for(var mt=this[Ke],wt=-1,Vt=mt.length;++wt<Vt;)(Re=mt[wt])&&gh(Re,wt,ye,he,rt),Ee.push(Re)}return vh(_e,ye,he)},ee.interrupt=function(Y){return this.each(Y==null?Gh:gd(mh(Y)))};var Gh=gd(mh());function gd(Y){return function(){var he,ye,_e;(he=this[Y])&&(_e=he[ye=he.active])&&(_e.timer.c=null,_e.timer.t=NaN,--he.count?delete he[ye]:delete this[Y],he.active+=.5,_e.event&&_e.event.interrupt.call(this,this.__data__,_e.index))}}function vh(Y,he,ye){return se(Y,ws),Y.namespace=he,Y.id=ye,Y}var ws=[],wp=0,Qu,Wh;ws.call=ee.call,ws.empty=ee.empty,ws.node=ee.node,ws.size=ee.size,r.transition=function(Y,he){return Y&&Y.transition?Qu?Y.transition(he):Y:r.selection().transition(Y)},r.transition.prototype=ws,ws.select=function(Y){var he=this.id,ye=this.namespace,_e=[],Ee,Re,rt;Y=ae(Y);for(var Ke=-1,at=this.length;++Ke<at;){_e.push(Ee=[]);for(var mt=this[Ke],wt=-1,Vt=mt.length;++wt<Vt;)(rt=mt[wt])&&(Re=Y.call(rt,rt.__data__,wt,Ke))?("__data__"in rt&&(Re.__data__=rt.__data__),gh(Re,wt,ye,he,rt[ye][he]),Ee.push(Re)):Ee.push(null)}return vh(_e,ye,he)},ws.selectAll=function(Y){var he=this.id,ye=this.namespace,_e=[],Ee,Re,rt,Ke,at;Y=fe(Y);for(var mt=-1,wt=this.length;++mt<wt;)for(var Vt=this[mt],Yt=-1,cr=Vt.length;++Yt<cr;)if(rt=Vt[Yt]){at=rt[ye][he],Re=Y.call(rt,rt.__data__,Yt,mt),_e.push(Ee=[]);for(var Rr=-1,ir=Re.length;++Rr<ir;)(Ke=Re[Rr])&&gh(Ke,Rr,ye,he,at),Ee.push(Ke)}return vh(_e,ye,he)},ws.filter=function(Y){var he=[],ye,_e,Ee;typeof Y!="function"&&(Y=Ae(Y));for(var Re=0,rt=this.length;Re<rt;Re++){he.push(ye=[]);for(var _e=this[Re],Ke=0,at=_e.length;Ke<at;Ke++)(Ee=_e[Ke])&&Y.call(Ee,Ee.__data__,Ke,Re)&&ye.push(Ee)}return vh(he,this.namespace,this.id)},ws.tween=function(Y,he){var ye=this.id,_e=this.namespace;return arguments.length<2?this.node()[_e][ye].tween.get(Y):qe(this,he==null?function(Ee){Ee[_e][ye].tween.remove(Y)}:function(Ee){Ee[_e][ye].tween.set(Y,he)})};function cf(Y,he,ye,_e){var Ee=Y.id,Re=Y.namespace;return qe(Y,typeof ye=="function"?function(rt,Ke,at){rt[Re][Ee].tween.set(he,_e(ye.call(rt,rt.__data__,Ke,at)))}:(ye=_e(ye),function(rt){rt[Re][Ee].tween.set(he,ye)}))}ws.attr=function(Y,he){if(arguments.length<2){for(he in Y)this.attr(he,Y[he]);return this}var ye=Y=="transform"?bs:wa,_e=r.ns.qualify(Y);function Ee(){this.removeAttribute(_e)}function Re(){this.removeAttributeNS(_e.space,_e.local)}function rt(at){return at==null?Ee:(at+="",function(){var mt=this.getAttribute(_e),wt;return mt!==at&&(wt=ye(mt,at),function(Vt){this.setAttribute(_e,wt(Vt))})})}function Ke(at){return at==null?Re:(at+="",function(){var mt=this.getAttributeNS(_e.space,_e.local),wt;return mt!==at&&(wt=ye(mt,at),function(Vt){this.setAttributeNS(_e.space,_e.local,wt(Vt))})})}return cf(this,"attr."+Y,he,_e.local?Ke:rt)},ws.attrTween=function(Y,he){var ye=r.ns.qualify(Y);function _e(Re,rt){var Ke=he.call(this,Re,rt,this.getAttribute(ye));return Ke&&function(at){this.setAttribute(ye,Ke(at))}}function Ee(Re,rt){var Ke=he.call(this,Re,rt,this.getAttributeNS(ye.space,ye.local));return Ke&&function(at){this.setAttributeNS(ye.space,ye.local,Ke(at))}}return this.tween("attr."+Y,ye.local?Ee:_e)},ws.style=function(Y,he,ye){var _e=arguments.length;if(_e<3){if(typeof Y!="string"){_e<2&&(he="");for(ye in Y)this.style(ye,Y[ye],he);return this}ye=""}function Ee(){this.style.removeProperty(Y)}function Re(rt){return rt==null?Ee:(rt+="",function(){var Ke=f(this).getComputedStyle(this,null).getPropertyValue(Y),at;return Ke!==rt&&(at=wa(Ke,rt),function(mt){this.style.setProperty(Y,at(mt),ye)})})}return cf(this,"style."+Y,he,Re)},ws.styleTween=function(Y,he,ye){arguments.length<3&&(ye="");function _e(Ee,Re){var rt=he.call(this,Ee,Re,f(this).getComputedStyle(this,null).getPropertyValue(Y));return rt&&function(Ke){this.style.setProperty(Y,rt(Ke),ye)}}return this.tween("style."+Y,_e)},ws.text=function(Y){return cf(this,"text",Y,ff)};function ff(Y){return Y==null&&(Y=""),function(){this.textContent=Y}}ws.remove=function(){var Y=this.namespace;return this.each("end.transition",function(){var he;this[Y].count<2&&(he=this.parentNode)&&he.removeChild(this)})},ws.ease=function(Y){var he=this.id,ye=this.namespace;return arguments.length<1?this.node()[ye][he].ease:(typeof Y!="function"&&(Y=r.ease.apply(r,arguments)),qe(this,function(_e){_e[ye][he].ease=Y}))},ws.delay=function(Y){var he=this.id,ye=this.namespace;return arguments.length<1?this.node()[ye][he].delay:qe(this,typeof Y=="function"?function(_e,Ee,Re){_e[ye][he].delay=+Y.call(_e,_e.__data__,Ee,Re)}:(Y=+Y,function(_e){_e[ye][he].delay=Y}))},ws.duration=function(Y){var he=this.id,ye=this.namespace;return arguments.length<1?this.node()[ye][he].duration:qe(this,typeof Y=="function"?function(_e,Ee,Re){_e[ye][he].duration=Math.max(1,Y.call(_e,_e.__data__,Ee,Re))}:(Y=Math.max(1,Y),function(_e){_e[ye][he].duration=Y}))},ws.each=function(Y,he){var ye=this.id,_e=this.namespace;if(arguments.length<2){var Ee=Wh,Re=Qu;try{Qu=ye,qe(this,function(rt,Ke,at){Wh=rt[_e][ye],Y.call(rt,rt.__data__,Ke,at)})}finally{Wh=Ee,Qu=Re}}else qe(this,function(rt){var Ke=rt[_e][ye];(Ke.event||(Ke.event=r.dispatch("start","end","interrupt"))).on(Y,he)});return this},ws.transition=function(){for(var Y=this.id,he=++wp,ye=this.namespace,_e=[],Ee,Re,rt,Ke,at=0,mt=this.length;at<mt;at++){_e.push(Ee=[]);for(var Re=this[at],wt=0,Vt=Re.length;wt<Vt;wt++)(rt=Re[wt])&&(Ke=rt[ye][Y],gh(rt,wt,ye,he,{time:Ke.time,ease:Ke.ease,delay:Ke.delay+Ke.duration,duration:Ke.duration})),Ee.push(rt)}return vh(_e,ye,he)};function mh(Y){return Y==null?"__transition__":"__transition_"+Y+"__"}function gh(Y,he,ye,_e,Ee){var Re=Y[ye]||(Y[ye]={active:0,count:0}),rt=Re[_e],Ke,at,mt,wt,Vt;function Yt(ir){var hr=rt.delay;if(at.t=hr+Ke,hr<=ir)return cr(ir-hr);at.c=cr}function cr(ir){var hr=Re.active,vr=Re[hr];vr&&(vr.timer.c=null,vr.timer.t=NaN,--Re.count,delete Re[hr],vr.event&&vr.event.interrupt.call(Y,Y.__data__,vr.index));for(var Ir in Re)if(+Ir<_e){var gr=Re[Ir];gr.timer.c=null,gr.timer.t=NaN,--Re.count,delete Re[Ir]}at.c=Rr,qa(function(){return at.c&&Rr(ir||1)&&(at.c=null,at.t=NaN),1},0,Ke),Re.active=_e,rt.event&&rt.event.start.call(Y,Y.__data__,he),Vt=[],rt.tween.forEach(function(kr,gn){(gn=gn.call(Y,Y.__data__,he))&&Vt.push(gn)}),wt=rt.ease,mt=rt.duration}function Rr(ir){for(var hr=ir/mt,vr=wt(hr),Ir=Vt.length;Ir>0;)Vt[--Ir].call(Y,vr);if(hr>=1)return rt.event&&rt.event.end.call(Y,Y.__data__,he),--Re.count?delete Re[_e]:delete Y[ye],1}rt||(Ke=Ee.time,at=qa(Yt,0,Ke),rt=Re[_e]={tween:new T,time:Ke,timer:at,delay:Ee.delay,duration:Ee.duration,ease:Ee.ease,index:he},Ee=null,++Re.count)}r.svg.axis=function(){var Y=r.scale.linear(),he=yh,ye=6,_e=6,Ee=3,Re=[10],rt=null,Ke;function at(mt){mt.each(function(){var wt=r.select(this),Vt=this.__chart__||Y,Yt=this.__chart__=Y.copy(),cr=rt==null?Yt.ticks?Yt.ticks.apply(Yt,Re):Yt.domain():rt,Rr=Ke==null?Yt.tickFormat?Yt.tickFormat.apply(Yt,Re):G:Ke,ir=wt.selectAll(".tick").data(cr,Yt),hr=ir.enter().insert("g",".domain").attr("class","tick").style("opacity",lt),vr=r.transition(ir.exit()).style("opacity",lt).remove(),Ir=r.transition(ir.order()).style("opacity",1),gr=Math.max(ye,0)+Ee,kr,gn=uh(Yt),dn=wt.selectAll(".domain").data([0]),fn=(dn.enter().append("path").attr("class","domain"),r.transition(dn));hr.append("line"),hr.append("text");var on=hr.select("line"),Yn=Ir.select("line"),$n=ir.select("text").text(Rr),Ca=hr.select("text"),pa=Ir.select("text"),ma=he==="top"||he==="left"?-1:1,Sn,Kn,ua,yn;if(he==="bottom"||he==="top"?(kr=qu,Sn="x",ua="y",Kn="x2",yn="y2",$n.attr("dy",ma<0?"0em":".71em").style("text-anchor","middle"),fn.attr("d","M"+gn[0]+","+ma*_e+"V0H"+gn[1]+"V"+ma*_e)):(kr=hf,Sn="y",ua="x",Kn="y2",yn="x2",$n.attr("dy",".32em").style("text-anchor",ma<0?"end":"start"),fn.attr("d","M"+ma*_e+","+gn[0]+"H0V"+gn[1]+"H"+ma*_e)),on.attr(yn,ma*ye),Ca.attr(ua,ma*gr),Yn.attr(Kn,0).attr(yn,ma*ye),pa.attr(Sn,0).attr(ua,ma*gr),Yt.rangeBand){var Vn=Yt,ja=Vn.rangeBand()/2;Vt=Yt=function(xi){return Vn(xi)+ja}}else Vt.rangeBand?Vt=Yt:vr.call(kr,Yt,Vt);hr.call(kr,Vt,Yt),Ir.call(kr,Yt,Yt)})}return at.scale=function(mt){return arguments.length?(Y=mt,at):Y},at.orient=function(mt){return arguments.length?(he=mt in yv?mt+"":yh,at):he},at.ticks=function(){return arguments.length?(Re=u(arguments),at):Re},at.tickValues=function(mt){return arguments.length?(rt=mt,at):rt},at.tickFormat=function(mt){return arguments.length?(Ke=mt,at):Ke},at.tickSize=function(mt){var wt=arguments.length;return wt?(ye=+mt,_e=+arguments[wt-1],at):ye},at.innerTickSize=function(mt){return arguments.length?(ye=+mt,at):ye},at.outerTickSize=function(mt){return arguments.length?(_e=+mt,at):_e},at.tickPadding=function(mt){return arguments.length?(Ee=+mt,at):Ee},at.tickSubdivide=function(){return arguments.length&&at},at};var yh="bottom",yv={top:1,right:1,bottom:1,left:1};function qu(Y,he,ye){Y.attr("transform",function(_e){var Ee=he(_e);return"translate("+(isFinite(Ee)?Ee:ye(_e))+",0)"})}function hf(Y,he,ye){Y.attr("transform",function(_e){var Ee=he(_e);return"translate(0,"+(isFinite(Ee)?Ee:ye(_e))+")"})}r.svg.brush=function(){var Y=$(wt,"brushstart","brush","brushend"),he=null,ye=null,_e=[0,0],Ee=[0,0],Re,rt,Ke=!0,at=!0,mt=Yh[0];function wt(ir){ir.each(function(){var hr=r.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Rr).on("touchstart.brush",Rr),vr=hr.selectAll(".background").data([0]);vr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),hr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Ir=hr.selectAll(".resize").data(mt,G);Ir.exit().remove(),Ir.enter().append("g").attr("class",function(dn){return"resize "+dn}).style("cursor",function(dn){return xv[dn]}).append("rect").attr("x",function(dn){return/[ew]$/.test(dn)?-3:null}).attr("y",function(dn){return/^[ns]/.test(dn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Ir.style("display",wt.empty()?"none":null);var gr=r.transition(hr),kr=r.transition(vr),gn;he&&(gn=uh(he),kr.attr("x",gn[0]).attr("width",gn[1]-gn[0]),Yt(gr)),ye&&(gn=uh(ye),kr.attr("y",gn[0]).attr("height",gn[1]-gn[0]),cr(gr)),Vt(gr)})}wt.event=function(ir){ir.each(function(){var hr=Y.of(this,arguments),vr={x:_e,y:Ee,i:Re,j:rt},Ir=this.__chart__||vr;this.__chart__=vr,Qu?r.select(this).transition().each("start.brush",function(){Re=Ir.i,rt=Ir.j,_e=Ir.x,Ee=Ir.y,hr({type:"brushstart"})}).tween("brush:brush",function(){var gr=Ea(_e,vr.x),kr=Ea(Ee,vr.y);return Re=rt=null,function(gn){_e=vr.x=gr(gn),Ee=vr.y=kr(gn),hr({type:"brush",mode:"resize"})}}).each("end.brush",function(){Re=vr.i,rt=vr.j,hr({type:"brush",mode:"resize"}),hr({type:"brushend"})}):(hr({type:"brushstart"}),hr({type:"brush",mode:"resize"}),hr({type:"brushend"}))})};function Vt(ir){ir.selectAll(".resize").attr("transform",function(hr){return"translate("+_e[+/e$/.test(hr)]+","+Ee[+/^s/.test(hr)]+")"})}function Yt(ir){ir.select(".extent").attr("x",_e[0]),ir.selectAll(".extent,.n>rect,.s>rect").attr("width",_e[1]-_e[0])}function cr(ir){ir.select(".extent").attr("y",Ee[0]),ir.selectAll(".extent,.e>rect,.w>rect").attr("height",Ee[1]-Ee[0])}function Rr(){var ir=this,hr=r.select(r.event.target),vr=Y.of(ir,arguments),Ir=r.select(ir),gr=hr.datum(),kr=!/^(n|s)$/.test(gr)&&he,gn=!/^(e|w)$/.test(gr)&&ye,dn=hr.classed("extent"),fn=rr(ir),on,Yn=r.mouse(ir),$n,Ca=r.select(f(ir)).on("keydown.brush",Sn).on("keyup.brush",Kn);if(r.event.changedTouches?Ca.on("touchmove.brush",ua).on("touchend.brush",Vn):Ca.on("mousemove.brush",ua).on("mouseup.brush",Vn),Ir.interrupt().selectAll("*").interrupt(),dn)Yn[0]=_e[0]-Yn[0],Yn[1]=Ee[0]-Yn[1];else if(gr){var pa=+/w$/.test(gr),ma=+/^n/.test(gr);$n=[_e[1-pa]-Yn[0],Ee[1-ma]-Yn[1]],Yn[0]=_e[pa],Yn[1]=Ee[ma]}else r.event.altKey&&(on=Yn.slice());Ir.style("pointer-events","none").selectAll(".resize").style("display",null),r.select("body").style("cursor",hr.style("cursor")),vr({type:"brushstart"}),ua();function Sn(){r.event.keyCode==32&&(dn||(on=null,Yn[0]-=_e[1],Yn[1]-=Ee[1],dn=2),K())}function Kn(){r.event.keyCode==32&&dn==2&&(Yn[0]+=_e[1],Yn[1]+=Ee[1],dn=0,K())}function ua(){var ja=r.mouse(ir),xi=!1;$n&&(ja[0]+=$n[0],ja[1]+=$n[1]),dn||(r.event.altKey?(on||(on=[(_e[0]+_e[1])/2,(Ee[0]+Ee[1])/2]),Yn[0]=_e[+(ja[0]<on[0])],Yn[1]=Ee[+(ja[1]<on[1])]):on=null),kr&&yn(ja,he,0)&&(Yt(Ir),xi=!0),gn&&yn(ja,ye,1)&&(cr(Ir),xi=!0),xi&&(Vt(Ir),vr({type:"brush",mode:dn?"move":"resize"}))}function yn(ja,xi,Pi){var vo=uh(xi),Ro=vo[0],Ks=vo[1],Ls=Yn[Pi],Ps=Pi?Ee:_e,tu=Ps[1]-Ps[0],ro,_l;if(dn&&(Ro-=Ls,Ks-=tu+Ls),ro=(Pi?at:Ke)?Math.max(Ro,Math.min(Ks,ja[Pi])):ja[Pi],dn?_l=(ro+=Ls)+tu:(on&&(Ls=Math.max(Ro,Math.min(Ks,2*on[Pi]-ro))),Ls<ro?(_l=ro,ro=Ls):_l=Ls),Ps[0]!=ro||Ps[1]!=_l)return Pi?rt=null:Re=null,Ps[0]=ro,Ps[1]=_l,!0}function Vn(){ua(),Ir.style("pointer-events","all").selectAll(".resize").style("display",wt.empty()?"none":null),r.select("body").style("cursor",null),Ca.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),fn(),vr({type:"brushend"})}}return wt.x=function(ir){return arguments.length?(he=ir,mt=Yh[!he<<1|!ye],wt):he},wt.y=function(ir){return arguments.length?(ye=ir,mt=Yh[!he<<1|!ye],wt):ye},wt.clamp=function(ir){return arguments.length?(he&&ye?(Ke=!!ir[0],at=!!ir[1]):he?Ke=!!ir:ye&&(at=!!ir),wt):he&&ye?[Ke,at]:he?Ke:ye?at:null},wt.extent=function(ir){var hr,vr,Ir,gr,kr;return arguments.length?(he&&(hr=ir[0],vr=ir[1],ye&&(hr=hr[0],vr=vr[0]),Re=[hr,vr],he.invert&&(hr=he(hr),vr=he(vr)),vr<hr&&(kr=hr,hr=vr,vr=kr),(hr!=_e[0]||vr!=_e[1])&&(_e=[hr,vr])),ye&&(Ir=ir[0],gr=ir[1],he&&(Ir=Ir[1],gr=gr[1]),rt=[Ir,gr],ye.invert&&(Ir=ye(Ir),gr=ye(gr)),gr<Ir&&(kr=Ir,Ir=gr,gr=kr),(Ir!=Ee[0]||gr!=Ee[1])&&(Ee=[Ir,gr])),wt):(he&&(Re?(hr=Re[0],vr=Re[1]):(hr=_e[0],vr=_e[1],he.invert&&(hr=he.invert(hr),vr=he.invert(vr)),vr<hr&&(kr=hr,hr=vr,vr=kr))),ye&&(rt?(Ir=rt[0],gr=rt[1]):(Ir=Ee[0],gr=Ee[1],ye.invert&&(Ir=ye.invert(Ir),gr=ye.invert(gr)),gr<Ir&&(kr=Ir,Ir=gr,gr=kr))),he&&ye?[[hr,Ir],[vr,gr]]:he?[hr,vr]:ye&&[Ir,gr])},wt.clear=function(){return wt.empty()||(_e=[0,0],Ee=[0,0],Re=rt=null),wt},wt.empty=function(){return!!he&&_e[0]==_e[1]||!!ye&&Ee[0]==Ee[1]},r.rebind(wt,Y,"on")};var xv={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Yh=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],yd=Xt.format=Po.timeFormat,bv=yd.utc,xd=bv("%Y-%m-%dT%H:%M:%S.%LZ");yd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Tp:xd;function Tp(Y){return Y.toISOString()}Tp.parse=function(Y){var he=new Date(Y);return isNaN(he)?null:he},Tp.toString=xd.toString,Xt.second=qr(function(Y){return new yr(Math.floor(Y/1e3)*1e3)},function(Y,he){Y.setTime(Y.getTime()+Math.floor(he)*1e3)},function(Y){return Y.getSeconds()}),Xt.seconds=Xt.second.range,Xt.seconds.utc=Xt.second.utc.range,Xt.minute=qr(function(Y){return new yr(Math.floor(Y/6e4)*6e4)},function(Y,he){Y.setTime(Y.getTime()+Math.floor(he)*6e4)},function(Y){return Y.getMinutes()}),Xt.minutes=Xt.minute.range,Xt.minutes.utc=Xt.minute.utc.range,Xt.hour=qr(function(Y){var he=Y.getTimezoneOffset()/60;return new yr((Math.floor(Y/36e5-he)+he)*36e5)},function(Y,he){Y.setTime(Y.getTime()+Math.floor(he)*36e5)},function(Y){return Y.getHours()}),Xt.hours=Xt.hour.range,Xt.hours.utc=Xt.hour.utc.range,Xt.month=qr(function(Y){return Y=Xt.day(Y),Y.setDate(1),Y},function(Y,he){Y.setMonth(Y.getMonth()+he)},function(Y){return Y.getMonth()}),Xt.months=Xt.month.range,Xt.months.utc=Xt.month.utc.range;function xh(Y,he,ye){function _e(Re){return Y(Re)}_e.invert=function(Re){return pf(Y.invert(Re))},_e.domain=function(Re){return arguments.length?(Y.domain(Re),_e):Y.domain().map(pf)};function Ee(Re,rt){var Ke=Re[1]-Re[0],at=Ke/rt,mt=r.bisect(jf,at);return mt==jf.length?[he.year,ch(Re.map(function(wt){return wt/31536e6}),rt)[2]]:mt?he[at/jf[mt-1]<jf[mt]/at?mt-1:mt]:[_h,ch(Re,rt)[2]]}return _e.nice=function(Re,rt){var Ke=_e.domain(),at=af(Ke),mt=Re==null?Ee(at,10):typeof Re=="number"&&Ee(at,Re);mt&&(Re=mt[0],rt=mt[1]);function wt(Vt){return!isNaN(Vt)&&!Re.range(Vt,pf(+Vt+1),rt).length}return _e.domain(zh(Ke,rt>1?{floor:function(Vt){for(;wt(Vt=Re.floor(Vt));)Vt=pf(Vt-1);return Vt},ceil:function(Vt){for(;wt(Vt=Re.ceil(Vt));)Vt=pf(+Vt+1);return Vt}}:Re))},_e.ticks=function(Re,rt){var Ke=af(_e.domain()),at=Re==null?Ee(Ke,10):typeof Re=="number"?Ee(Ke,Re):!Re.range&&[{range:Re},rt];return at&&(Re=at[0],rt=at[1]),Re.range(Ke[0],pf(+Ke[1]+1),rt<1?1:rt)},_e.tickFormat=function(){return ye},_e.copy=function(){return xh(Y.copy(),he,ye)},Dl(_e,Y)}function pf(Y){return new Date(Y)}var jf=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],bh=[[Xt.second,1],[Xt.second,5],[Xt.second,15],[Xt.second,30],[Xt.minute,1],[Xt.minute,5],[Xt.minute,15],[Xt.minute,30],[Xt.hour,1],[Xt.hour,3],[Xt.hour,6],[Xt.hour,12],[Xt.day,1],[Xt.day,2],[Xt.week,1],[Xt.month,1],[Xt.month,3],[Xt.year,1]],Ap=yd.multi([[".%L",function(Y){return Y.getMilliseconds()}],[":%S",function(Y){return Y.getSeconds()}],["%I:%M",function(Y){return Y.getMinutes()}],["%I %p",function(Y){return Y.getHours()}],["%a %d",function(Y){return Y.getDay()&&Y.getDate()!=1}],["%b %d",function(Y){return Y.getDate()!=1}],["%B",function(Y){return Y.getMonth()}],["%Y",Uo]]),_h={range:function(Y,he,ye){return r.range(Math.ceil(Y/ye)*ye,+he,ye).map(pf)},floor:G,ceil:G};bh.year=Xt.year,Xt.scale=function(){return xh(r.scale.linear(),bh,Ap)};var _v=bh.map(function(Y){return[Y[0].utc,Y[1]]}),wv=bv.multi([[".%L",function(Y){return Y.getUTCMilliseconds()}],[":%S",function(Y){return Y.getUTCSeconds()}],["%I:%M",function(Y){return Y.getUTCMinutes()}],["%I %p",function(Y){return Y.getUTCHours()}],["%a %d",function(Y){return Y.getUTCDay()&&Y.getUTCDate()!=1}],["%b %d",function(Y){return Y.getUTCDate()!=1}],["%B",function(Y){return Y.getUTCMonth()}],["%Y",Uo]]);_v.year=Xt.year.utc,Xt.scale.utc=function(){return xh(r.scale.linear(),_v,wv)},r.text=Wr(function(Y){return Y.responseText}),r.json=function(Y,he){return Vr(Y,"application/json",Tv,he)};function Tv(Y){return JSON.parse(Y.responseText)}r.html=function(Y,he){return Vr(Y,"text/html",Gf,he)};function Gf(Y){var he=c.createRange();return he.selectNode(c.body),he.createContextualFragment(Y.responseText)}r.xml=Wr(function(Y){return Y.responseXML}),typeof v=="object"&&v.exports?v.exports=r:this.d3=r}).apply(self)},{}],170:[function(e,v,S){v.exports=function(){for(var r=0;r<arguments.length;r++)if(arguments[r]!==void 0)return arguments[r]}},{}],171:[function(e,v,S){var r=e("incremental-convex-hull"),a=e("uniq");v.exports=f;function u(n,o){this.point=n,this.index=o}function c(n,o){for(var l=n.point,h=o.point,i=l.length,s=0;s<i;++s){var p=h[s]-l[s];if(p)return p}return 0}function t(n,o,l){if(n===1)return l?[[-1,0]]:[];var h=o.map(function(g,b){return[g[0],b]});h.sort(function(g,b){return g[0]-b[0]});for(var i=new Array(n-1),s=1;s<n;++s){var p=h[s-1],d=h[s];i[s-1]=[p[1],d[1]]}return l&&i.push([-1,i[0][1]],[i[n-1][1],-1]),i}function f(n,o){var l=n.length;if(l===0)return[];var h=n[0].length;if(h<1)return[];if(h===1)return t(l,n,o);for(var i=new Array(l),s=1,p=0;p<l;++p){for(var d=n[p],g=new Array(h+1),b=0,m=0;m<h;++m){var x=d[m];g[m]=x,b+=x*x}g[h]=b,i[p]=new u(g,p),s=Math.max(b,s)}a(i,c),l=i.length;for(var w=new Array(l+h+1),y=new Array(l+h+1),T=(h+1)*(h+1)*s,M=new Array(h+1),p=0;p<=h;++p)M[p]=0;M[h]=T,w[0]=M.slice(),y[0]=-1;for(var p=0;p<=h;++p){var g=M.slice();g[p]=1,w[p+1]=g,y[p+1]=-1}for(var p=0;p<l;++p){var P=i[p];w[p+h+1]=P.point,y[p+h+1]=P.index}var L=r(w,!1);if(o?L=L.filter(function(I){for(var E=0,k=0;k<=h;++k){var C=y[I[k]];if(C<0&&++E>=2)return!1;I[k]=C}return!0}):L=L.filter(function(I){for(var E=0;E<=h;++E){var k=y[I[E]];if(k<0)return!1;I[E]=k}return!0}),h&1)for(var p=0;p<L.length;++p){var P=L[p],g=P[0];P[0]=P[1],P[1]=g}return L}},{"incremental-convex-hull":459,uniq:597}],172:[function(e,v,S){v.exports=c;var r=c.canvas=document.createElement("canvas"),a=r.getContext("2d"),u=t([32,126]);c.createPairs=t,c.ascii=u;function c(f,n){Array.isArray(f)&&(f=f.join(", "));var o={},l,h=16,i=.05;n&&(n.length===2&&typeof n[0]=="number"?l=t(n):Array.isArray(n)?l=n:(n.o?l=t(n.o):n.pairs&&(l=n.pairs),n.fontSize&&(h=n.fontSize),n.threshold!=null&&(i=n.threshold))),l||(l=u),a.font=h+"px "+f;for(var s=0;s<l.length;s++){var p=l[s],d=a.measureText(p[0]).width+a.measureText(p[1]).width,g=a.measureText(p).width;if(Math.abs(d-g)>h*i){var b=(g-d)/h;o[p]=b*1e3}}return o}function t(f){for(var n=[],o=f[0];o<=f[1];o++)for(var l=String.fromCharCode(o),h=f[0];h<f[1];h++){var i=String.fromCharCode(h),s=l+i;n.push(s)}return n}},{}],173:[function(e,v,S){(function(r){(function(){var a=!1;if(typeof Float64Array<"u"){var u=new Float64Array(1),c=new Uint32Array(u.buffer);if(u[0]=1,a=!0,c[1]===1072693248){let g=function(x,w){return c[0]=x,c[1]=w,u[0]},b=function(x){return u[0]=x,c[0]},m=function(x){return u[0]=x,c[1]};var f=g,n=b,o=m;v.exports=function(w){return u[0]=w,[c[0],c[1]]},v.exports.pack=g,v.exports.lo=b,v.exports.hi=m}else if(c[0]===1072693248){let g=function(x,w){return c[1]=x,c[0]=w,u[0]},b=function(x){return u[0]=x,c[1]},m=function(x){return u[0]=x,c[0]};var l=g,h=b,i=m;v.exports=function(w){return u[0]=w,[c[1],c[0]]},v.exports.pack=g,v.exports.lo=b,v.exports.hi=m}else a=!1}if(!a){let g=function(x,w){return t.writeUInt32LE(x,0,!0),t.writeUInt32LE(w,4,!0),t.readDoubleLE(0,!0)},b=function(x){return t.writeDoubleLE(x,0,!0),t.readUInt32LE(0,!0)},m=function(x){return t.writeDoubleLE(x,0,!0),t.readUInt32LE(4,!0)};var s=g,p=b,d=m,t=new r(8);v.exports=function(w){return t.writeDoubleLE(w,0,!0),[t.readUInt32LE(0,!0),t.readUInt32LE(4,!0)]},v.exports.pack=g,v.exports.lo=b,v.exports.hi=m}v.exports.sign=function(g){return v.exports.hi(g)>>>31},v.exports.exponent=function(g){var b=v.exports.hi(g);return(b<<1>>>21)-1023},v.exports.fraction=function(g){var b=v.exports.lo(g),m=v.exports.hi(g),x=m&(1<<20)-1;return m&2146435072&&(x+=1<<20),[b,x]},v.exports.denormalized=function(g){var b=v.exports.hi(g);return!(b&2146435072)}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:111}],174:[function(e,v,S){var r=e("abs-svg-path"),a=e("normalize-svg-path"),u={M:"moveTo",C:"bezierCurveTo"};v.exports=function(c,t){c.beginPath(),a(r(t)).forEach(function(f){var n=f[0],o=f.slice(1);c[u[n]].apply(c,o)}),c.closePath()}},{"abs-svg-path":65,"normalize-svg-path":497}],175:[function(e,v,S){v.exports=function(r){switch(r){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],176:[function(e,v,S){function r(c,t,f){var n=c[f]|0;if(n<=0)return[];var o=new Array(n),l;if(f===c.length-1)for(l=0;l<n;++l)o[l]=t;else for(l=0;l<n;++l)o[l]=r(c,t,f+1);return o}function a(c,t){var f,n;for(f=new Array(c),n=0;n<c;++n)f[n]=t;return f}function u(c,t){switch(typeof t>"u"&&(t=0),typeof c){case"number":if(c>0)return a(c|0,t);break;case"object":if(typeof c.length=="number")return r(c,t,0);break}return[]}v.exports=u},{}],177:[function(e,v,S){v.exports=r,v.exports.default=r;function r(U,X,z){z=z||2;var B=X&&X.length,j=B?X[0]*z:U.length,V=a(U,0,j,z,!0),K=[];if(!V||V.next===V.prev)return K;var te,$,ie,se,Q,H,oe;if(B&&(V=l(U,X,V,z)),U.length>80*z){te=ie=U[0],$=se=U[1];for(var re=z;re<j;re+=z)Q=U[re],H=U[re+1],Q<te&&(te=Q),H<$&&($=H),Q>ie&&(ie=Q),H>se&&(se=H);oe=Math.max(ie-te,se-$),oe=oe!==0?1/oe:0}return c(V,K,z,te,$,oe),K}function a(U,X,z,B,j){var V,K;if(j===G(U,X,z,B)>0)for(V=X;V<z;V+=B)K=D(V,U[V],U[V+1],K);else for(V=z-B;V>=X;V-=B)K=D(V,U[V],U[V+1],K);return K&&T(K,K.next)&&(F(K),K=K.next),K}function u(U,X){if(!U)return U;X||(X=U);var z=U,B;do if(B=!1,!z.steiner&&(T(z,z.next)||y(z.prev,z,z.next)===0)){if(F(z),z=X=z.prev,z===z.next)break;B=!0}else z=z.next;while(B||z!==X);return X}function c(U,X,z,B,j,V,K){if(!!U){!K&&V&&d(U,B,j,V);for(var te=U,$,ie;U.prev!==U.next;){if($=U.prev,ie=U.next,V?f(U,B,j,V):t(U)){X.push($.i/z),X.push(U.i/z),X.push(ie.i/z),F(U),U=ie.next,te=ie.next;continue}if(U=ie,U===te){K?K===1?(U=n(u(U),X,z),c(U,X,z,B,j,V,2)):K===2&&o(U,X,z,B,j,V):c(u(U),X,z,B,j,V,1);break}}}}function t(U){var X=U.prev,z=U,B=U.next;if(y(X,z,B)>=0)return!1;for(var j=U.next.next;j!==U.prev;){if(x(X.x,X.y,z.x,z.y,B.x,B.y,j.x,j.y)&&y(j.prev,j,j.next)>=0)return!1;j=j.next}return!0}function f(U,X,z,B){var j=U.prev,V=U,K=U.next;if(y(j,V,K)>=0)return!1;for(var te=j.x<V.x?j.x<K.x?j.x:K.x:V.x<K.x?V.x:K.x,$=j.y<V.y?j.y<K.y?j.y:K.y:V.y<K.y?V.y:K.y,ie=j.x>V.x?j.x>K.x?j.x:K.x:V.x>K.x?V.x:K.x,se=j.y>V.y?j.y>K.y?j.y:K.y:V.y>K.y?V.y:K.y,Q=b(te,$,X,z,B),H=b(ie,se,X,z,B),oe=U.prevZ,re=U.nextZ;oe&&oe.z>=Q&&re&&re.z<=H;){if(oe!==U.prev&&oe!==U.next&&x(j.x,j.y,V.x,V.y,K.x,K.y,oe.x,oe.y)&&y(oe.prev,oe,oe.next)>=0||(oe=oe.prevZ,re!==U.prev&&re!==U.next&&x(j.x,j.y,V.x,V.y,K.x,K.y,re.x,re.y)&&y(re.prev,re,re.next)>=0))return!1;re=re.nextZ}for(;oe&&oe.z>=Q;){if(oe!==U.prev&&oe!==U.next&&x(j.x,j.y,V.x,V.y,K.x,K.y,oe.x,oe.y)&&y(oe.prev,oe,oe.next)>=0)return!1;oe=oe.prevZ}for(;re&&re.z<=H;){if(re!==U.prev&&re!==U.next&&x(j.x,j.y,V.x,V.y,K.x,K.y,re.x,re.y)&&y(re.prev,re,re.next)>=0)return!1;re=re.nextZ}return!0}function n(U,X,z){var B=U;do{var j=B.prev,V=B.next.next;!T(j,V)&&M(j,B,B.next,V)&&E(j,V)&&E(V,j)&&(X.push(j.i/z),X.push(B.i/z),X.push(V.i/z),F(B),F(B.next),B=U=V),B=B.next}while(B!==U);return u(B)}function o(U,X,z,B,j,V){var K=U;do{for(var te=K.next.next;te!==K.prev;){if(K.i!==te.i&&w(K,te)){var $=C(K,te);K=u(K,K.next),$=u($,$.next),c(K,X,z,B,j,V),c($,X,z,B,j,V);return}te=te.next}K=K.next}while(K!==U)}function l(U,X,z,B){var j=[],V,K,te,$,ie;for(V=0,K=X.length;V<K;V++)te=X[V]*B,$=V<K-1?X[V+1]*B:U.length,ie=a(U,te,$,B,!1),ie===ie.next&&(ie.steiner=!0),j.push(m(ie));for(j.sort(h),V=0;V<j.length;V++)i(j[V],z),z=u(z,z.next);return z}function h(U,X){return U.x-X.x}function i(U,X){if(X=s(U,X),X){var z=C(X,U);u(X,X.next),u(z,z.next)}}function s(U,X){var z=X,B=U.x,j=U.y,V=-1/0,K;do{if(j<=z.y&&j>=z.next.y&&z.next.y!==z.y){var te=z.x+(j-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(te<=B&&te>V){if(V=te,te===B){if(j===z.y)return z;if(j===z.next.y)return z.next}K=z.x<z.next.x?z:z.next}}z=z.next}while(z!==X);if(!K)return null;if(B===V)return K;var $=K,ie=K.x,se=K.y,Q=1/0,H;z=K;do B>=z.x&&z.x>=ie&&B!==z.x&&x(j<se?B:V,j,ie,se,j<se?V:B,j,z.x,z.y)&&(H=Math.abs(j-z.y)/(B-z.x),E(z,U)&&(H<Q||H===Q&&(z.x>K.x||z.x===K.x&&p(K,z)))&&(K=z,Q=H)),z=z.next;while(z!==$);return K}function p(U,X){return y(U.prev,U,X.prev)<0&&y(X.next,U,U.next)<0}function d(U,X,z,B){var j=U;do j.z===null&&(j.z=b(j.x,j.y,X,z,B)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==U);j.prevZ.nextZ=null,j.prevZ=null,g(j)}function g(U){var X,z,B,j,V,K,te,$,ie=1;do{for(z=U,U=null,V=null,K=0;z;){for(K++,B=z,te=0,X=0;X<ie&&(te++,B=B.nextZ,!!B);X++);for($=ie;te>0||$>0&&B;)te!==0&&($===0||!B||z.z<=B.z)?(j=z,z=z.nextZ,te--):(j=B,B=B.nextZ,$--),V?V.nextZ=j:U=j,j.prevZ=V,V=j;z=B}V.nextZ=null,ie*=2}while(K>1);return U}function b(U,X,z,B,j){return U=32767*(U-z)*j,X=32767*(X-B)*j,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,X=(X|X<<8)&16711935,X=(X|X<<4)&252645135,X=(X|X<<2)&858993459,X=(X|X<<1)&1431655765,U|X<<1}function m(U){var X=U,z=U;do(X.x<z.x||X.x===z.x&&X.y<z.y)&&(z=X),X=X.next;while(X!==U);return z}function x(U,X,z,B,j,V,K,te){return(j-K)*(X-te)-(U-K)*(V-te)>=0&&(U-K)*(B-te)-(z-K)*(X-te)>=0&&(z-K)*(V-te)-(j-K)*(B-te)>=0}function w(U,X){return U.next.i!==X.i&&U.prev.i!==X.i&&!I(U,X)&&(E(U,X)&&E(X,U)&&k(U,X)&&(y(U.prev,U,X.prev)||y(U,X.prev,X))||T(U,X)&&y(U.prev,U,U.next)>0&&y(X.prev,X,X.next)>0)}function y(U,X,z){return(X.y-U.y)*(z.x-X.x)-(X.x-U.x)*(z.y-X.y)}function T(U,X){return U.x===X.x&&U.y===X.y}function M(U,X,z,B){var j=L(y(U,X,z)),V=L(y(U,X,B)),K=L(y(z,B,U)),te=L(y(z,B,X));return!!(j!==V&&K!==te||j===0&&P(U,z,X)||V===0&&P(U,B,X)||K===0&&P(z,U,B)||te===0&&P(z,X,B))}function P(U,X,z){return X.x<=Math.max(U.x,z.x)&&X.x>=Math.min(U.x,z.x)&&X.y<=Math.max(U.y,z.y)&&X.y>=Math.min(U.y,z.y)}function L(U){return U>0?1:U<0?-1:0}function I(U,X){var z=U;do{if(z.i!==U.i&&z.next.i!==U.i&&z.i!==X.i&&z.next.i!==X.i&&M(z,z.next,U,X))return!0;z=z.next}while(z!==U);return!1}function E(U,X){return y(U.prev,U,U.next)<0?y(U,X,U.next)>=0&&y(U,U.prev,X)>=0:y(U,X,U.prev)<0||y(U,U.next,X)<0}function k(U,X){var z=U,B=!1,j=(U.x+X.x)/2,V=(U.y+X.y)/2;do z.y>V!=z.next.y>V&&z.next.y!==z.y&&j<(z.next.x-z.x)*(V-z.y)/(z.next.y-z.y)+z.x&&(B=!B),z=z.next;while(z!==U);return B}function C(U,X){var z=new N(U.i,U.x,U.y),B=new N(X.i,X.x,X.y),j=U.next,V=X.prev;return U.next=X,X.prev=U,z.next=j,j.prev=z,B.next=z,z.prev=B,V.next=B,B.prev=V,B}function D(U,X,z,B){var j=new N(U,X,z);return B?(j.next=B.next,j.prev=B,B.next.prev=j,B.next=j):(j.prev=j,j.next=j),j}function F(U){U.next.prev=U.prev,U.prev.next=U.next,U.prevZ&&(U.prevZ.nextZ=U.nextZ),U.nextZ&&(U.nextZ.prevZ=U.prevZ)}function N(U,X,z){this.i=U,this.x=X,this.y=z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}r.deviation=function(U,X,z,B){var j=X&&X.length,V=j?X[0]*z:U.length,K=Math.abs(G(U,0,V,z));if(j)for(var te=0,$=X.length;te<$;te++){var ie=X[te]*z,se=te<$-1?X[te+1]*z:U.length;K-=Math.abs(G(U,ie,se,z))}var Q=0;for(te=0;te<B.length;te+=3){var H=B[te]*z,oe=B[te+1]*z,re=B[te+2]*z;Q+=Math.abs((U[H]-U[re])*(U[oe+1]-U[H+1])-(U[H]-U[oe])*(U[re+1]-U[H+1]))}return K===0&&Q===0?0:Math.abs((Q-K)/K)};function G(U,X,z,B){for(var j=0,V=X,K=z-B;V<z;V+=B)j+=(U[K]-U[V])*(U[V+1]+U[K+1]),K=V;return j}r.flatten=function(U){for(var X=U[0][0].length,z={vertices:[],holes:[],dimensions:X},B=0,j=0;j<U.length;j++){for(var V=0;V<U[j].length;V++)for(var K=0;K<X;K++)z.vertices.push(U[j][V][K]);j>0&&(B+=U[j-1].length,z.holes.push(B))}return z}},{}],178:[function(e,v,S){v.exports=a;var r=e("uniq");function a(u,c){var t=u.length;if(typeof c!="number"){c=0;for(var f=0;f<t;++f){var n=u[f];c=Math.max(c,n[0],n[1])}c=(c|0)+1}c=c|0;for(var o=new Array(c),f=0;f<c;++f)o[f]=[];for(var f=0;f<t;++f){var n=u[f];o[n[0]].push(n[1]),o[n[1]].push(n[0])}for(var l=0;l<c;++l)r(o[l],function(h,i){return h-i});return o}},{uniq:597}],179:[function(e,v,S){var r=e("strongly-connected-components");v.exports=function(u,c){var t=[],f=[],n=[],o={},l=[],h;function i(T){n[T]=!1,o.hasOwnProperty(T)&&Object.keys(o[T]).forEach(function(M){delete o[T][M],n[M]&&i(M)})}function s(T){var M=!1;f.push(T),n[T]=!0;var P,L;for(P=0;P<l[T].length;P++)L=l[T][P],L===h?(p(h,f),M=!0):n[L]||(M=s(L));if(M)i(T);else for(P=0;P<l[T].length;P++){L=l[T][P];var I=o[L];I||(I={},o[L]=I),I[L]=!0}return f.pop(),M}function p(T,M){var P=[].concat(M).concat(T);c?c(s):t.push(P)}function d(T){for(var M=0;M<u.length;M++)M<T&&(u[M]=[]),u[M]=u[M].filter(function(P){return P>=T})}function g(T){d(T);for(var M=u,P=r(M),L=P.components.filter(function(N){return N.length>1}),I=1/0,E,k=0;k<L.length;k++)for(var C=0;C<L[k].length;C++)L[k][C]<I&&(I=L[k][C],E=k);var D=L[E];if(!D)return!1;var F=u.map(function(N,G){return D.indexOf(G)===-1?[]:N.filter(function(U){return D.indexOf(U)!==-1})});return{leastVertex:I,adjList:F}}h=0;for(var b=u.length;h<b;){var m=g(h);if(h=m.leastVertex,l=m.adjList,l){for(var x=0;x<l.length;x++)for(var w=0;w<l[x].length;w++){var y=l[x][w];n[+y]=!1,o[y]={}}s(h),h=h+1}else h=b}if(!c)return t}},{"strongly-connected-components":569}],180:[function(e,v,S){var r=e("../../object/valid-value");v.exports=function(){return r(this).length=0,this}},{"../../object/valid-value":211}],181:[function(e,v,S){v.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":182,"./shim":183}],182:[function(e,v,S){v.exports=function(){var r=Array.from,a,u;return typeof r!="function"?!1:(a=["raz","dwa"],u=r(a),Boolean(u&&u!==a&&u[1]==="dwa"))}},{}],183:[function(e,v,S){var r=e("es6-symbol").iterator,a=e("../../function/is-arguments"),u=e("../../function/is-function"),c=e("../../number/to-pos-integer"),t=e("../../object/valid-callable"),f=e("../../object/valid-value"),n=e("../../object/is-value"),o=e("../../string/is-string"),l=Array.isArray,h=Function.prototype.call,i={configurable:!0,enumerable:!0,writable:!0,value:null},s=Object.defineProperty;v.exports=function(p){var d=arguments[1],g=arguments[2],b,m,x,w,y,T,M,P,L,I;if(p=Object(f(p)),n(d)&&t(d),!this||this===Array||!u(this)){if(!d){if(a(p))return y=p.length,y!==1?Array.apply(null,p):(w=new Array(1),w[0]=p[0],w);if(l(p)){for(w=new Array(y=p.length),m=0;m<y;++m)w[m]=p[m];return w}}w=[]}else b=this;if(!l(p)){if((L=p[r])!==void 0){for(M=t(L).call(p),b&&(w=new b),P=M.next(),m=0;!P.done;)I=d?h.call(d,g,P.value,m):P.value,b?(i.value=I,s(w,m,i)):w[m]=I,P=M.next(),++m;y=m}else if(o(p)){for(y=p.length,b&&(w=new b),m=0,x=0;m<y;++m)I=p[m],m+1<y&&(T=I.charCodeAt(0),T>=55296&&T<=56319&&(I+=p[++m])),I=d?h.call(d,g,I,x):I,b?(i.value=I,s(w,x,i)):w[x]=I,++x;y=x}}if(y===void 0)for(y=c(p.length),b&&(w=new b(y)),m=0;m<y;++m)I=d?h.call(d,g,p[m],m):p[m],b?(i.value=I,s(w,m,i)):w[m]=I;return b&&(i.value=null,w.length=y),w}},{"../../function/is-arguments":184,"../../function/is-function":185,"../../number/to-pos-integer":191,"../../object/is-value":200,"../../object/valid-callable":209,"../../object/valid-value":211,"../../string/is-string":215,"es6-symbol":225}],184:[function(e,v,S){var r=Object.prototype.toString,a=r.call(function(){return arguments}());v.exports=function(u){return r.call(u)===a}},{}],185:[function(e,v,S){var r=Object.prototype.toString,a=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);v.exports=function(u){return typeof u=="function"&&a(r.call(u))}},{}],186:[function(e,v,S){v.exports=function(){}},{}],187:[function(e,v,S){v.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":188,"./shim":189}],188:[function(e,v,S){v.exports=function(){var r=Math.sign;return typeof r!="function"?!1:r(10)===1&&r(-20)===-1}},{}],189:[function(e,v,S){v.exports=function(r){return r=Number(r),isNaN(r)||r===0?r:r>0?1:-1}},{}],190:[function(e,v,S){var r=e("../math/sign"),a=Math.abs,u=Math.floor;v.exports=function(c){return isNaN(c)?0:(c=Number(c),c===0||!isFinite(c)?c:r(c)*u(a(c)))}},{"../math/sign":187}],191:[function(e,v,S){var r=e("./to-integer"),a=Math.max;v.exports=function(u){return a(0,r(u))}},{"./to-integer":190}],192:[function(e,v,S){var r=e("./valid-callable"),a=e("./valid-value"),u=Function.prototype.bind,c=Function.prototype.call,t=Object.keys,f=Object.prototype.propertyIsEnumerable;v.exports=function(n,o){return function(l,h){var i,s=arguments[2],p=arguments[3];return l=Object(a(l)),r(h),i=t(l),p&&i.sort(typeof p=="function"?u.call(p,l):void 0),typeof n!="function"&&(n=i[n]),c.call(n,i,function(d,g){return f.call(l,d)?c.call(h,s,l[d],d,l,g):o})}}},{"./valid-callable":209,"./valid-value":211}],193:[function(e,v,S){v.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":194,"./shim":195}],194:[function(e,v,S){v.exports=function(){var r=Object.assign,a;return typeof r!="function"?!1:(a={foo:"raz"},r(a,{bar:"dwa"},{trzy:"trzy"}),a.foo+a.bar+a.trzy==="razdwatrzy")}},{}],195:[function(e,v,S){var r=e("../keys"),a=e("../valid-value"),u=Math.max;v.exports=function(c,t){var f,n,o=u(arguments.length,2),l;for(c=Object(a(c)),l=function(h){try{c[h]=t[h]}catch(i){f||(f=i)}},n=1;n<o;++n)t=arguments[n],r(t).forEach(l);if(f!==void 0)throw f;return c}},{"../keys":201,"../valid-value":211}],196:[function(e,v,S){var r=e("../array/from"),a=e("./assign"),u=e("./valid-value");v.exports=function(c){var t=Object(u(c)),f=arguments[1],n=Object(arguments[2]);if(t!==c&&!f)return t;var o={};return f?r(f,function(l){(n.ensure||l in c)&&(o[l]=c[l])}):a(o,c),o}},{"../array/from":181,"./assign":193,"./valid-value":211}],197:[function(e,v,S){var r=Object.create,a;e("./set-prototype-of/is-implemented")()||(a=e("./set-prototype-of/shim")),v.exports=function(){var u,c,t;return!a||a.level!==1?r:(u={},c={},t={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(f){if(f==="__proto__"){c[f]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}c[f]=t}),Object.defineProperties(u,c),Object.defineProperty(a,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:u}),function(f,n){return r(f===null?u:f,n)})}()},{"./set-prototype-of/is-implemented":207,"./set-prototype-of/shim":208}],198:[function(e,v,S){v.exports=e("./_iterate")("forEach")},{"./_iterate":192}],199:[function(e,v,S){var r=e("./is-value"),a={function:!0,object:!0};v.exports=function(u){return r(u)&&a[typeof u]||!1}},{"./is-value":200}],200:[function(e,v,S){var r=e("../function/noop")();v.exports=function(a){return a!==r&&a!==null}},{"../function/noop":186}],201:[function(e,v,S){v.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":202,"./shim":203}],202:[function(e,v,S){v.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],203:[function(e,v,S){var r=e("../is-value"),a=Object.keys;v.exports=function(u){return a(r(u)?Object(u):u)}},{"../is-value":200}],204:[function(e,v,S){var r=e("./valid-callable"),a=e("./for-each"),u=Function.prototype.call;v.exports=function(c,t){var f={},n=arguments[2];return r(t),a(c,function(o,l,h,i){f[l]=u.call(t,n,o,l,h,i)}),f}},{"./for-each":198,"./valid-callable":209}],205:[function(e,v,S){var r=e("./is-value"),a=Array.prototype.forEach,u=Object.create,c=function(t,f){var n;for(n in t)f[n]=t[n]};v.exports=function(t){var f=u(null);return a.call(arguments,function(n){!r(n)||c(Object(n),f)}),f}},{"./is-value":200}],206:[function(e,v,S){v.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":207,"./shim":208}],207:[function(e,v,S){var r=Object.create,a=Object.getPrototypeOf,u={};v.exports=function(){var c=Object.setPrototypeOf,t=arguments[0]||r;return typeof c!="function"?!1:a(c(t(null),u))===u}},{}],208:[function(e,v,S){var r=e("../is-object"),a=e("../valid-value"),u=Object.prototype.isPrototypeOf,c=Object.defineProperty,t={configurable:!0,enumerable:!1,writable:!0,value:void 0},f;f=function(n,o){if(a(n),o===null||r(o))return n;throw new TypeError("Prototype must be null or an object")},v.exports=function(n){var o,l;return n?(n.level===2?n.set?(l=n.set,o=function(h,i){return l.call(f(h,i),i),h}):o=function(h,i){return f(h,i).__proto__=i,h}:o=function h(i,s){var p;return f(i,s),p=u.call(h.nullPolyfill,i),p&&delete h.nullPolyfill.__proto__,s===null&&(s=h.nullPolyfill),i.__proto__=s,p&&c(h.nullPolyfill,"__proto__",t),i},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:n.level})):null}(function(){var n=Object.create(null),o={},l,h=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(h){try{l=h.set,l.call(n,o)}catch{}if(Object.getPrototypeOf(n)===o)return{set:l,level:2}}return n.__proto__=o,Object.getPrototypeOf(n)===o?{level:2}:(n={},n.__proto__=o,Object.getPrototypeOf(n)===o?{level:1}:!1)}()),e("../create")},{"../create":197,"../is-object":199,"../valid-value":211}],209:[function(e,v,S){v.exports=function(r){if(typeof r!="function")throw new TypeError(r+" is not a function");return r}},{}],210:[function(e,v,S){var r=e("./is-object");v.exports=function(a){if(!r(a))throw new TypeError(a+" is not an Object");return a}},{"./is-object":199}],211:[function(e,v,S){var r=e("./is-value");v.exports=function(a){if(!r(a))throw new TypeError("Cannot use null or undefined");return a}},{"./is-value":200}],212:[function(e,v,S){v.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":213,"./shim":214}],213:[function(e,v,S){var r="razdwatrzy";v.exports=function(){return typeof r.contains!="function"?!1:r.contains("dwa")===!0&&r.contains("foo")===!1}},{}],214:[function(e,v,S){var r=String.prototype.indexOf;v.exports=function(a){return r.call(this,a,arguments[1])>-1}},{}],215:[function(e,v,S){var r=Object.prototype.toString,a=r.call("");v.exports=function(u){return typeof u=="string"||u&&typeof u=="object"&&(u instanceof String||r.call(u)===a)||!1}},{}],216:[function(e,v,S){var r=Object.create(null),a=Math.random;v.exports=function(){var u;do u=a().toString(36).slice(2);while(r[u]);return u}},{}],217:[function(e,v,S){var r=e("es5-ext/object/set-prototype-of"),a=e("es5-ext/string/#/contains"),u=e("d"),c=e("es6-symbol"),t=e("./"),f=Object.defineProperty,n;n=v.exports=function(o,l){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");t.call(this,o),l?a.call(l,"key+value")?l="key+value":a.call(l,"key")?l="key":l="value":l="value",f(this,"__kind__",u("",l))},r&&r(n,t),delete n.prototype.constructor,n.prototype=Object.create(t.prototype,{_resolve:u(function(o){return this.__kind__==="value"?this.__list__[o]:this.__kind__==="key+value"?[o,this.__list__[o]]:o})}),f(n.prototype,c.toStringTag,u("c","Array Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,"es5-ext/string/#/contains":212,"es6-symbol":225}],218:[function(e,v,S){var r=e("es5-ext/function/is-arguments"),a=e("es5-ext/object/valid-callable"),u=e("es5-ext/string/is-string"),c=e("./get"),t=Array.isArray,f=Function.prototype.call,n=Array.prototype.some;v.exports=function(o,l){var h,i=arguments[2],s,p,d,g,b,m,x;if(t(o)||r(o)?h="array":u(o)?h="string":o=c(o),a(l),p=function(){d=!0},h==="array"){n.call(o,function(w){return f.call(l,i,w,p),d});return}if(h==="string"){for(b=o.length,g=0;g<b&&(m=o[g],g+1<b&&(x=m.charCodeAt(0),x>=55296&&x<=56319&&(m+=o[++g])),f.call(l,i,m,p),!d);++g);return}for(s=o.next();!s.done;){if(f.call(l,i,s.value,p),d)return;s=o.next()}}},{"./get":219,"es5-ext/function/is-arguments":184,"es5-ext/object/valid-callable":209,"es5-ext/string/is-string":215}],219:[function(e,v,S){var r=e("es5-ext/function/is-arguments"),a=e("es5-ext/string/is-string"),u=e("./array"),c=e("./string"),t=e("./valid-iterable"),f=e("es6-symbol").iterator;v.exports=function(n){return typeof t(n)[f]=="function"?n[f]():r(n)?new u(n):a(n)?new c(n):new u(n)}},{"./array":217,"./string":222,"./valid-iterable":223,"es5-ext/function/is-arguments":184,"es5-ext/string/is-string":215,"es6-symbol":225}],220:[function(e,v,S){var r=e("es5-ext/array/#/clear"),a=e("es5-ext/object/assign"),u=e("es5-ext/object/valid-callable"),c=e("es5-ext/object/valid-value"),t=e("d"),f=e("d/auto-bind"),n=e("es6-symbol"),o=Object.defineProperty,l=Object.defineProperties,h;v.exports=h=function(i,s){if(!(this instanceof h))throw new TypeError("Constructor requires 'new'");l(this,{__list__:t("w",c(i)),__context__:t("w",s),__nextIndex__:t("w",0)}),s&&(u(s.on),s.on("_add",this._onAdd),s.on("_delete",this._onDelete),s.on("_clear",this._onClear))},delete h.prototype.constructor,l(h.prototype,a({_next:t(function(){var i;if(!!this.__list__){if(this.__redo__&&(i=this.__redo__.shift(),i!==void 0))return i;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:t(function(){return this._createResult(this._next())}),_createResult:t(function(i){return i===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(i)}}),_resolve:t(function(i){return this.__list__[i]}),_unBind:t(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:t(function(){return"[object "+(this[n.toStringTag]||"Object")+"]"})},f({_onAdd:t(function(i){if(!(i>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){o(this,"__redo__",t("c",[i]));return}this.__redo__.forEach(function(s,p){s>=i&&(this.__redo__[p]=++s)},this),this.__redo__.push(i)}}),_onDelete:t(function(i){var s;i>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(s=this.__redo__.indexOf(i),s!==-1&&this.__redo__.splice(s,1),this.__redo__.forEach(function(p,d){p>i&&(this.__redo__[d]=--p)},this)))}),_onClear:t(function(){this.__redo__&&r.call(this.__redo__),this.__nextIndex__=0})}))),o(h.prototype,n.iterator,t(function(){return this}))},{d:155,"d/auto-bind":154,"es5-ext/array/#/clear":180,"es5-ext/object/assign":193,"es5-ext/object/valid-callable":209,"es5-ext/object/valid-value":211,"es6-symbol":225}],221:[function(e,v,S){var r=e("es5-ext/function/is-arguments"),a=e("es5-ext/object/is-value"),u=e("es5-ext/string/is-string"),c=e("es6-symbol").iterator,t=Array.isArray;v.exports=function(f){return a(f)?t(f)||u(f)||r(f)?!0:typeof f[c]=="function":!1}},{"es5-ext/function/is-arguments":184,"es5-ext/object/is-value":200,"es5-ext/string/is-string":215,"es6-symbol":225}],222:[function(e,v,S){var r=e("es5-ext/object/set-prototype-of"),a=e("d"),u=e("es6-symbol"),c=e("./"),t=Object.defineProperty,f;f=v.exports=function(n){if(!(this instanceof f))throw new TypeError("Constructor requires 'new'");n=String(n),c.call(this,n),t(this,"__length__",a("",n.length))},r&&r(f,c),delete f.prototype.constructor,f.prototype=Object.create(c.prototype,{_next:a(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:a(function(n){var o=this.__list__[n],l;return this.__nextIndex__===this.__length__?o:(l=o.charCodeAt(0),l>=55296&&l<=56319?o+this.__list__[this.__nextIndex__++]:o)})}),t(f.prototype,u.toStringTag,a("c","String Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,"es6-symbol":225}],223:[function(e,v,S){var r=e("./is-iterable");v.exports=function(a){if(!r(a))throw new TypeError(a+" is not iterable");return a}},{"./is-iterable":221}],224:[function(e,v,S){(function(r,a){(function(){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(u,c){typeof S=="object"&&typeof v<"u"?v.exports=c():u.ES6Promise=c()})(this,function(){function u(ze){var Qe=typeof ze;return ze!==null&&(Qe==="object"||Qe==="function")}function c(ze){return typeof ze=="function"}var t=void 0;Array.isArray?t=Array.isArray:t=function(ze){return Object.prototype.toString.call(ze)==="[object Array]"};var f=t,n=0,o=void 0,l=void 0,h=function(Qe,tt){P[n]=Qe,P[n+1]=tt,n+=2,n===2&&(l?l(L):E())};function i(ze){l=ze}function s(ze){h=ze}var p=typeof window<"u"?window:void 0,d=p||{},g=d.MutationObserver||d.WebKitMutationObserver,b=typeof self>"u"&&typeof r<"u"&&{}.toString.call(r)==="[object process]",m=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function x(){return function(){return r.nextTick(L)}}function w(){return typeof o<"u"?function(){o(L)}:M()}function y(){var ze=0,Qe=new g(L),tt=document.createTextNode("");return Qe.observe(tt,{characterData:!0}),function(){tt.data=ze=++ze%2}}function T(){var ze=new MessageChannel;return ze.port1.onmessage=L,function(){return ze.port2.postMessage(0)}}function M(){var ze=setTimeout;return function(){return ze(L,1)}}var P=new Array(1e3);function L(){for(var ze=0;ze<n;ze+=2){var Qe=P[ze],tt=P[ze+1];Qe(tt),P[ze]=void 0,P[ze+1]=void 0}n=0}function I(){try{var ze=Function("return this")().require("vertx");return o=ze.runOnLoop||ze.runOnContext,w()}catch{return M()}}var E=void 0;b?E=x():g?E=y():m?E=T():p===void 0&&typeof e=="function"?E=I():E=M();function k(ze,Qe){var tt=this,Ce=new this.constructor(F);Ce[D]===void 0&&fe(Ce);var Ae=tt._state;if(Ae){var Be=arguments[Ae-1];h(function(){return oe(Ae,Ce,Be,tt._result)})}else Q(tt,Ce,ze,Qe);return Ce}function C(ze){var Qe=this;if(ze&&typeof ze=="object"&&ze.constructor===Qe)return ze;var tt=new Qe(F);return te(tt,ze),tt}var D=Math.random().toString(36).substring(2);function F(){}var N=void 0,G=1,U=2;function X(){return new TypeError("You cannot resolve a promise with itself")}function z(){return new TypeError("A promises callback cannot return that same promise.")}function B(ze,Qe,tt,Ce){try{ze.call(Qe,tt,Ce)}catch(Ae){return Ae}}function j(ze,Qe,tt){h(function(Ce){var Ae=!1,Be=B(tt,Qe,function(qe){Ae||(Ae=!0,Qe!==qe?te(Ce,qe):ie(Ce,qe))},function(qe){Ae||(Ae=!0,se(Ce,qe))},"Settle: "+(Ce._label||" unknown promise"));!Ae&&Be&&(Ae=!0,se(Ce,Be))},ze)}function V(ze,Qe){Qe._state===G?ie(ze,Qe._result):Qe._state===U?se(ze,Qe._result):Q(Qe,void 0,function(tt){return te(ze,tt)},function(tt){return se(ze,tt)})}function K(ze,Qe,tt){Qe.constructor===ze.constructor&&tt===k&&Qe.constructor.resolve===C?V(ze,Qe):tt===void 0?ie(ze,Qe):c(tt)?j(ze,Qe,tt):ie(ze,Qe)}function te(ze,Qe){if(ze===Qe)se(ze,X());else if(u(Qe)){var tt=void 0;try{tt=Qe.then}catch(Ce){se(ze,Ce);return}K(ze,Qe,tt)}else ie(ze,Qe)}function $(ze){ze._onerror&&ze._onerror(ze._result),H(ze)}function ie(ze,Qe){ze._state===N&&(ze._result=Qe,ze._state=G,ze._subscribers.length!==0&&h(H,ze))}function se(ze,Qe){ze._state===N&&(ze._state=U,ze._result=Qe,h($,ze))}function Q(ze,Qe,tt,Ce){var Ae=ze._subscribers,Be=Ae.length;ze._onerror=null,Ae[Be]=Qe,Ae[Be+G]=tt,Ae[Be+U]=Ce,Be===0&&ze._state&&h(H,ze)}function H(ze){var Qe=ze._subscribers,tt=ze._state;if(Qe.length!==0){for(var Ce=void 0,Ae=void 0,Be=ze._result,qe=0;qe<Qe.length;qe+=3)Ce=Qe[qe],Ae=Qe[qe+tt],Ce?oe(tt,Ce,Ae,Be):Ae(Be);ze._subscribers.length=0}}function oe(ze,Qe,tt,Ce){var Ae=c(tt),Be=void 0,qe=void 0,Tt=!0;if(Ae){try{Be=tt(Ce)}catch(At){Tt=!1,qe=At}if(Qe===Be){se(Qe,z());return}}else Be=Ce;Qe._state!==N||(Ae&&Tt?te(Qe,Be):Tt===!1?se(Qe,qe):ze===G?ie(Qe,Be):ze===U&&se(Qe,Be))}function re(ze,Qe){try{Qe(function(Ce){te(ze,Ce)},function(Ce){se(ze,Ce)})}catch(tt){se(ze,tt)}}var ee=0;function ae(){return ee++}function fe(ze){ze[D]=ee++,ze._state=void 0,ze._result=void 0,ze._subscribers=[]}function de(){return new Error("Array Methods must be provided an Array")}var pe=function(){function ze(Qe,tt){this._instanceConstructor=Qe,this.promise=new Qe(F),this.promise[D]||fe(this.promise),f(tt)?(this.length=tt.length,this._remaining=tt.length,this._result=new Array(this.length),this.length===0?ie(this.promise,this._result):(this.length=this.length||0,this._enumerate(tt),this._remaining===0&&ie(this.promise,this._result))):se(this.promise,de())}return ze.prototype._enumerate=function(tt){for(var Ce=0;this._state===N&&Ce<tt.length;Ce++)this._eachEntry(tt[Ce],Ce)},ze.prototype._eachEntry=function(tt,Ce){var Ae=this._instanceConstructor,Be=Ae.resolve;if(Be===C){var qe=void 0,Tt=void 0,At=!1;try{qe=tt.then}catch(ct){At=!0,Tt=ct}if(qe===k&&tt._state!==N)this._settledAt(tt._state,Ce,tt._result);else if(typeof qe!="function")this._remaining--,this._result[Ce]=tt;else if(Ae===Pe){var Ne=new Ae(F);At?se(Ne,Tt):K(Ne,tt,qe),this._willSettleAt(Ne,Ce)}else this._willSettleAt(new Ae(function(ct){return ct(tt)}),Ce)}else this._willSettleAt(Be(tt),Ce)},ze.prototype._settledAt=function(tt,Ce,Ae){var Be=this.promise;Be._state===N&&(this._remaining--,tt===U?se(Be,Ae):this._result[Ce]=Ae),this._remaining===0&&ie(Be,this._result)},ze.prototype._willSettleAt=function(tt,Ce){var Ae=this;Q(tt,void 0,function(Be){return Ae._settledAt(G,Ce,Be)},function(Be){return Ae._settledAt(U,Ce,Be)})},ze}();function W(ze){return new pe(this,ze).promise}function ue(ze){var Qe=this;return f(ze)?new Qe(function(tt,Ce){for(var Ae=ze.length,Be=0;Be<Ae;Be++)Qe.resolve(ze[Be]).then(tt,Ce)}):new Qe(function(tt,Ce){return Ce(new TypeError("You must pass an array to race."))})}function me(ze){var Qe=this,tt=new Qe(F);return se(tt,ze),tt}function be(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Me(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Pe=function(){function ze(Qe){this[D]=ae(),this._result=this._state=void 0,this._subscribers=[],F!==Qe&&(typeof Qe!="function"&&be(),this instanceof ze?re(this,Qe):Me())}return ze.prototype.catch=function(tt){return this.then(null,tt)},ze.prototype.finally=function(tt){var Ce=this,Ae=Ce.constructor;return c(tt)?Ce.then(function(Be){return Ae.resolve(tt()).then(function(){return Be})},function(Be){return Ae.resolve(tt()).then(function(){throw Be})}):Ce.then(tt,tt)},ze}();Pe.prototype.then=k,Pe.all=W,Pe.race=ue,Pe.resolve=C,Pe.reject=me,Pe._setScheduler=i,Pe._setAsap=s,Pe._asap=h;function Ge(){var ze=void 0;if(typeof a<"u")ze=a;else if(typeof self<"u")ze=self;else try{ze=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Qe=ze.Promise;if(Qe){var tt=null;try{tt=Object.prototype.toString.call(Qe.resolve())}catch{}if(tt==="[object Promise]"&&!Qe.cast)return}ze.Promise=Pe}return Pe.polyfill=Ge,Pe.Promise=Pe,Pe})}).call(this)}).call(this,e("_process"),typeof Hs<"u"?Hs:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:526}],225:[function(e,v,S){v.exports=e("./is-implemented")()?e("ext/global-this").Symbol:e("./polyfill")},{"./is-implemented":226,"./polyfill":231,"ext/global-this":238}],226:[function(e,v,S){var r=e("ext/global-this"),a={object:!0,symbol:!0};v.exports=function(){var u=r.Symbol,c;if(typeof u!="function")return!1;c=u("test symbol");try{String(c)}catch{return!1}return!(!a[typeof u.iterator]||!a[typeof u.toPrimitive]||!a[typeof u.toStringTag])}},{"ext/global-this":238}],227:[function(e,v,S){v.exports=function(r){return r?typeof r=="symbol"?!0:!r.constructor||r.constructor.name!=="Symbol"?!1:r[r.constructor.toStringTag]==="Symbol":!1}},{}],228:[function(e,v,S){var r=e("d"),a=Object.create,u=Object.defineProperty,c=Object.prototype,t=a(null);v.exports=function(f){for(var n=0,o,l;t[f+(n||"")];)++n;return f+=n||"",t[f]=!0,o="@@"+f,u(c,o,r.gs(null,function(h){l||(l=!0,u(this,o,r(h)),l=!1)})),o}},{d:155}],229:[function(e,v,S){var r=e("d"),a=e("ext/global-this").Symbol;v.exports=function(u){return Object.defineProperties(u,{hasInstance:r("",a&&a.hasInstance||u("hasInstance")),isConcatSpreadable:r("",a&&a.isConcatSpreadable||u("isConcatSpreadable")),iterator:r("",a&&a.iterator||u("iterator")),match:r("",a&&a.match||u("match")),replace:r("",a&&a.replace||u("replace")),search:r("",a&&a.search||u("search")),species:r("",a&&a.species||u("species")),split:r("",a&&a.split||u("split")),toPrimitive:r("",a&&a.toPrimitive||u("toPrimitive")),toStringTag:r("",a&&a.toStringTag||u("toStringTag")),unscopables:r("",a&&a.unscopables||u("unscopables"))})}},{d:155,"ext/global-this":238}],230:[function(e,v,S){var r=e("d"),a=e("../../../validate-symbol"),u=Object.create(null);v.exports=function(c){return Object.defineProperties(c,{for:r(function(t){return u[t]?u[t]:u[t]=c(String(t))}),keyFor:r(function(t){var f;a(t);for(f in u)if(u[f]===t)return f})})}},{"../../../validate-symbol":232,d:155}],231:[function(e,v,S){var r=e("d"),a=e("./validate-symbol"),u=e("ext/global-this").Symbol,c=e("./lib/private/generate-name"),t=e("./lib/private/setup/standard-symbols"),f=e("./lib/private/setup/symbol-registry"),n=Object.create,o=Object.defineProperties,l=Object.defineProperty,h,i,s;if(typeof u=="function")try{String(u()),s=!0}catch{}else u=null;i=function(d){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return h(d)},v.exports=h=function p(d){var g;if(this instanceof p)throw new TypeError("Symbol is not a constructor");return s?u(d):(g=n(i.prototype),d=d===void 0?"":String(d),o(g,{__description__:r("",d),__name__:r("",c(d))}))},t(h),f(h),o(i.prototype,{constructor:r(h),toString:r("",function(){return this.__name__})}),o(h.prototype,{toString:r(function(){return"Symbol ("+a(this).__description__+")"}),valueOf:r(function(){return a(this)})}),l(h.prototype,h.toPrimitive,r("",function(){var p=a(this);return typeof p=="symbol"?p:p.toString()})),l(h.prototype,h.toStringTag,r("c","Symbol")),l(i.prototype,h.toStringTag,r("c",h.prototype[h.toStringTag])),l(i.prototype,h.toPrimitive,r("c",h.prototype[h.toPrimitive]))},{"./lib/private/generate-name":228,"./lib/private/setup/standard-symbols":229,"./lib/private/setup/symbol-registry":230,"./validate-symbol":232,d:155,"ext/global-this":238}],232:[function(e,v,S){var r=e("./is-symbol");v.exports=function(a){if(!r(a))throw new TypeError(a+" is not a symbol");return a}},{"./is-symbol":227}],233:[function(e,v,S){v.exports=e("./is-implemented")()?WeakMap:e("./polyfill")},{"./is-implemented":234,"./polyfill":236}],234:[function(e,v,S){v.exports=function(){var r,a;if(typeof WeakMap!="function")return!1;try{r=new WeakMap([[a={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(r)!=="[object WeakMap]"||typeof r.set!="function"||r.set({},1)!==r||typeof r.delete!="function"||typeof r.has!="function"||r.get(a)!=="one")}},{}],235:[function(e,v,S){v.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],236:[function(e,v,S){var r=e("es5-ext/object/is-value"),a=e("es5-ext/object/set-prototype-of"),u=e("es5-ext/object/valid-object"),c=e("es5-ext/object/valid-value"),t=e("es5-ext/string/random-uniq"),f=e("d"),n=e("es6-iterator/get"),o=e("es6-iterator/for-of"),l=e("es6-symbol").toStringTag,h=e("./is-native-implemented"),i=Array.isArray,s=Object.defineProperty,p=Object.prototype.hasOwnProperty,d=Object.getPrototypeOf,g;v.exports=g=function(){var b=arguments[0],m;if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");return m=h&&a&&WeakMap!==g?a(new WeakMap,d(this)):this,r(b)&&(i(b)||(b=n(b))),s(m,"__weakMapData__",f("c","$weakMap$"+t())),b&&o(b,function(x){c(x),m.set(x[0],x[1])}),m},h&&(a&&a(g,WeakMap),g.prototype=Object.create(WeakMap.prototype,{constructor:f(g)})),Object.defineProperties(g.prototype,{delete:f(function(b){return p.call(u(b),this.__weakMapData__)?(delete b[this.__weakMapData__],!0):!1}),get:f(function(b){if(!!p.call(u(b),this.__weakMapData__))return b[this.__weakMapData__]}),has:f(function(b){return p.call(u(b),this.__weakMapData__)}),set:f(function(b,m){return s(u(b),this.__weakMapData__,f("c",m)),this}),toString:f(function(){return"[object WeakMap]"})}),s(g.prototype,l,f("c","WeakMap"))},{"./is-native-implemented":235,d:155,"es5-ext/object/is-value":200,"es5-ext/object/set-prototype-of":206,"es5-ext/object/valid-object":210,"es5-ext/object/valid-value":211,"es5-ext/string/random-uniq":216,"es6-iterator/for-of":218,"es6-iterator/get":219,"es6-symbol":225}],237:[function(e,v,S){var r=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};v.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},{}],238:[function(e,v,S){v.exports=e("./is-implemented")()?globalThis:e("./implementation")},{"./implementation":237,"./is-implemented":239}],239:[function(e,v,S){v.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],240:[function(e,v,S){v.exports=r;function r(a,u,c){var t=u||0,f=c||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[t*a[12]+a[8],t*a[13]+a[9],t*a[14]+a[10],t*a[15]+a[11]],[f*a[12]-a[8],f*a[13]-a[9],f*a[14]-a[10],f*a[15]-a[11]]]}},{}],241:[function(e,v,S){var r=e("is-string-blank");v.exports=function(a){var u=typeof a;if(u==="string"){var c=a;if(a=+a,a===0&&r(c))return!1}else if(u!=="number")return!1;return a-a<1}},{"is-string-blank":470}],242:[function(e,v,S){v.exports=n;var r=e("cubic-hermite"),a=e("binary-search-bounds");function u(o,l,h){return Math.min(l,Math.max(o,h))}function c(o,l,h){this.dimension=o.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var i=0;i<this.dimension;++i)this.bounds[0][i]=-1/0,this.bounds[1][i]=1/0;this._state=o.slice().reverse(),this._velocity=l.slice().reverse(),this._time=[h],this._scratch=[o.slice(),o.slice(),o.slice(),o.slice(),o.slice()]}var t=c.prototype;t.flush=function(o){var l=a.gt(this._time,o)-1;l<=0||(this._time.splice(0,l),this._state.splice(0,l*this.dimension),this._velocity.splice(0,l*this.dimension))},t.curve=function(o){var l=this._time,h=l.length,i=a.le(l,o),s=this._scratch[0],p=this._state,d=this._velocity,g=this.dimension,b=this.bounds;if(i<0)for(var m=g-1,x=0;x<g;++x,--m)s[x]=p[m];else if(i>=h-1)for(var m=p.length-1,w=o-l[h-1],x=0;x<g;++x,--m)s[x]=p[m]+w*d[m];else{for(var m=g*(i+1)-1,y=l[i],T=l[i+1],M=T-y||1,P=this._scratch[1],L=this._scratch[2],I=this._scratch[3],E=this._scratch[4],k=!0,x=0;x<g;++x,--m)P[x]=p[m],I[x]=d[m]*M,L[x]=p[m+g],E[x]=d[m+g]*M,k=k&&P[x]===L[x]&&I[x]===E[x]&&I[x]===0;if(k)for(var x=0;x<g;++x)s[x]=P[x];else r(P,I,L,E,(o-y)/M,s)}for(var C=b[0],D=b[1],x=0;x<g;++x)s[x]=u(C[x],D[x],s[x]);return s},t.dcurve=function(o){var l=this._time,h=l.length,i=a.le(l,o),s=this._scratch[0],p=this._state,d=this._velocity,g=this.dimension;if(i>=h-1){var b=p.length-1;o-l[h-1];for(var m=0;m<g;++m,--b)s[m]=d[b]}else{for(var b=g*(i+1)-1,x=l[i],w=l[i+1],y=w-x||1,T=this._scratch[1],M=this._scratch[2],P=this._scratch[3],L=this._scratch[4],I=!0,m=0;m<g;++m,--b)T[m]=p[b],P[m]=d[b]*y,M[m]=p[b+g],L[m]=d[b+g]*y,I=I&&T[m]===M[m]&&P[m]===L[m]&&P[m]===0;if(I)for(var m=0;m<g;++m)s[m]=0;else{r.derivative(T,P,M,L,(o-x)/y,s);for(var m=0;m<g;++m)s[m]/=y}}return s},t.lastT=function(){var o=this._time;return o[o.length-1]},t.stable=function(){for(var o=this._velocity,l=o.length,h=this.dimension-1;h>=0;--h)if(o[--l])return!1;return!0},t.jump=function(o){var l=this.lastT(),h=this.dimension;if(!(o<l||arguments.length!==h+1)){var i=this._state,s=this._velocity,p=i.length-this.dimension,d=this.bounds,g=d[0],b=d[1];this._time.push(l,o);for(var m=0;m<2;++m)for(var x=0;x<h;++x)i.push(i[p++]),s.push(0);this._time.push(o);for(var x=h;x>0;--x)i.push(u(g[x-1],b[x-1],arguments[x])),s.push(0)}},t.push=function(o){var l=this.lastT(),h=this.dimension;if(!(o<l||arguments.length!==h+1)){var i=this._state,s=this._velocity,p=i.length-this.dimension,d=o-l,g=this.bounds,b=g[0],m=g[1],x=d>1e-6?1/d:0;this._time.push(o);for(var w=h;w>0;--w){var y=u(b[w-1],m[w-1],arguments[w]);i.push(y),s.push((y-i[p++])*x)}}},t.set=function(o){var l=this.dimension;if(!(o<this.lastT()||arguments.length!==l+1)){var h=this._state,i=this._velocity,s=this.bounds,p=s[0],d=s[1];this._time.push(o);for(var g=l;g>0;--g)h.push(u(p[g-1],d[g-1],arguments[g])),i.push(0)}},t.move=function(o){var l=this.lastT(),h=this.dimension;if(!(o<=l||arguments.length!==h+1)){var i=this._state,s=this._velocity,p=i.length-this.dimension,d=this.bounds,g=d[0],b=d[1],m=o-l,x=m>1e-6?1/m:0;this._time.push(o);for(var w=h;w>0;--w){var y=arguments[w];i.push(u(g[w-1],b[w-1],i[p++]+y)),s.push(y*x)}}},t.idle=function(o){var l=this.lastT();if(!(o<l)){var h=this.dimension,i=this._state,s=this._velocity,p=i.length-h,d=this.bounds,g=d[0],b=d[1],m=o-l;this._time.push(o);for(var x=h-1;x>=0;--x)i.push(u(g[x],b[x],i[p]+m*s[p])),s.push(0),p+=1}};function f(o){for(var l=new Array(o),h=0;h<o;++h)l[h]=0;return l}function n(o,l,h){switch(arguments.length){case 0:return new c([0],[0],0);case 1:if(typeof o=="number"){var i=f(o);return new c(i,i,0)}else return new c(o,f(o.length),0);case 2:if(typeof l=="number"){var i=f(o.length);return new c(o,i,+l)}else h=0;case 3:if(o.length!==l.length)throw new Error("state and velocity lengths must match");return new c(o,l,h)}}},{"binary-search-bounds":243,"cubic-hermite":150}],243:[function(e,v,S){function r(u,c,t,f,n,o){var l=["function ",u,"(a,l,h,",f.join(","),"){",o?"":"var i=",t?"l-1":"h+1",";while(l<=h){	var m=(l+h)>>>1,x=a",n?".get(m)":"[m]"];return o?c.indexOf("c")<0?l.push(";if(x===y){return m}else if(x<=y){"):l.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):l.push(";if(",c,"){i=m;"),t?l.push("l=m+1}else{h=m-1}"):l.push("h=m-1}else{l=m+1}"),l.push("}"),o?l.push("return -1};"):l.push("return i};"),l.join("")}function a(u,c,t,f){var n=new Function([r("A","x"+u+"y",c,["y"],!1,f),r("B","x"+u+"y",c,["y"],!0,f),r("P","c(x,y)"+u+"0",c,["y","c"],!1,f),r("Q","c(x,y)"+u+"0",c,["y","c"],!0,f),"function dispatchBsearch",t,"(a,y,c,l,h){	if(a.shape){	if(typeof(c)==='function'){	return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)	}else{	return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)	}}else{	if(typeof(c)==='function'){	return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)	}else{	return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)	}}}	return dispatchBsearch",t].join(""));return n()}v.exports={ge:a(">=",!1,"GE"),gt:a(">",!1,"GT"),lt:a("<",!0,"LT"),le:a("<=",!0,"LE"),eq:a("-",!0,"EQ",!0)}},{}],244:[function(e,v,S){var r=e("dtype");v.exports=a;function a(u,c,t){if(!u)throw new TypeError("must specify data as first parameter");if(t=+(t||0)|0,Array.isArray(u)&&u[0]&&typeof u[0][0]=="number"){var f=u[0].length,n=u.length*f,o,l,h,i;(!c||typeof c=="string")&&(c=new(r(c||"float32"))(n+t));var s=c.length-t;if(n!==s)throw new Error("source length "+n+" ("+f+"x"+u.length+") does not match destination length "+s);for(o=0,h=t;o<u.length;o++)for(l=0;l<f;l++)c[h++]=u[o][l]===null?NaN:u[o][l]}else if(!c||typeof c=="string"){var p=r(c||"float32");if(Array.isArray(u)||c==="array")for(c=new p(u.length+t),o=0,h=t,i=c.length;h<i;h++,o++)c[h]=u[o]===null?NaN:u[o];else t===0?c=new p(u):(c=new p(u.length+t),c.set(u,t))}else c.set(u,t);return c}},{dtype:175}],245:[function(e,v,S){var r=e("css-font/stringify"),a=[32,126];v.exports=u;function u(c){c=c||{};var t=c.shape?c.shape:c.canvas?[c.canvas.width,c.canvas.height]:[512,512],f=c.canvas||document.createElement("canvas"),n=c.font,o=typeof c.step=="number"?[c.step,c.step]:c.step||[32,32],l=c.chars||a;if(n&&typeof n!="string"&&(n=r(n)),!Array.isArray(l))l=String(l).split("");else if(l.length===2&&typeof l[0]=="number"&&typeof l[1]=="number"){for(var h=[],i=l[0],s=0;i<=l[1];i++)h[s++]=String.fromCharCode(i);l=h}t=t.slice(),f.width=t[0],f.height=t[1];var p=f.getContext("2d");p.fillStyle="#000",p.fillRect(0,0,f.width,f.height),p.font=n,p.textAlign="center",p.textBaseline="middle",p.fillStyle="#fff";for(var d=o[0]/2,g=o[1]/2,i=0;i<l.length;i++)p.fillText(l[i],d,g),(d+=o[0])>t[0]-o[0]/2&&(d=o[0]/2,g+=o[1]);return f}},{"css-font/stringify":147}],246:[function(e,v,S){v.exports=r,r.canvas=document.createElement("canvas"),r.cache={};function r(i,f){f||(f={}),(typeof i=="string"||Array.isArray(i))&&(f.family=i);var n=Array.isArray(f.family)?f.family.join(", "):f.family;if(!n)throw Error("`family` must be defined");var o=f.size||f.fontSize||f.em||48,l=f.weight||f.fontWeight||"",h=f.style||f.fontStyle||"",i=[h,l,o].join(" ")+"px "+n,s=f.origin||"top";if(r.cache[n]&&o<=r.cache[n].em)return a(r.cache[n],s);var p=f.canvas||r.canvas,d=p.getContext("2d"),g={upper:f.upper!==void 0?f.upper:"H",lower:f.lower!==void 0?f.lower:"x",descent:f.descent!==void 0?f.descent:"p",ascent:f.ascent!==void 0?f.ascent:"h",tittle:f.tittle!==void 0?f.tittle:"i",overshoot:f.overshoot!==void 0?f.overshoot:"O"},b=Math.ceil(o*1.5);p.height=b,p.width=b*.5,d.font=i;var m="H",x={top:0};d.clearRect(0,0,b,b),d.textBaseline="top",d.fillStyle="black",d.fillText(m,0,0);var w=u(d.getImageData(0,0,b,b));d.clearRect(0,0,b,b),d.textBaseline="bottom",d.fillText(m,0,b);var y=u(d.getImageData(0,0,b,b));x.lineHeight=x.bottom=b-y+w,d.clearRect(0,0,b,b),d.textBaseline="alphabetic",d.fillText(m,0,b);var T=u(d.getImageData(0,0,b,b)),M=b-T-1+w;x.baseline=x.alphabetic=M,d.clearRect(0,0,b,b),d.textBaseline="middle",d.fillText(m,0,b*.5);var P=u(d.getImageData(0,0,b,b));x.median=x.middle=b-P-1+w-b*.5,d.clearRect(0,0,b,b),d.textBaseline="hanging",d.fillText(m,0,b*.5);var L=u(d.getImageData(0,0,b,b));x.hanging=b-L-1+w-b*.5,d.clearRect(0,0,b,b),d.textBaseline="ideographic",d.fillText(m,0,b);var I=u(d.getImageData(0,0,b,b));if(x.ideographic=b-I-1+w,g.upper&&(d.clearRect(0,0,b,b),d.textBaseline="top",d.fillText(g.upper,0,0),x.upper=u(d.getImageData(0,0,b,b)),x.capHeight=x.baseline-x.upper),g.lower&&(d.clearRect(0,0,b,b),d.textBaseline="top",d.fillText(g.lower,0,0),x.lower=u(d.getImageData(0,0,b,b)),x.xHeight=x.baseline-x.lower),g.tittle&&(d.clearRect(0,0,b,b),d.textBaseline="top",d.fillText(g.tittle,0,0),x.tittle=u(d.getImageData(0,0,b,b))),g.ascent&&(d.clearRect(0,0,b,b),d.textBaseline="top",d.fillText(g.ascent,0,0),x.ascent=u(d.getImageData(0,0,b,b))),g.descent&&(d.clearRect(0,0,b,b),d.textBaseline="top",d.fillText(g.descent,0,0),x.descent=c(d.getImageData(0,0,b,b))),g.overshoot){d.clearRect(0,0,b,b),d.textBaseline="top",d.fillText(g.overshoot,0,0);var E=c(d.getImageData(0,0,b,b));x.overshoot=E-M}for(var k in x)x[k]/=o;return x.em=o,r.cache[n]=x,a(x,s)}function a(t,f){var n={};typeof f=="string"&&(f=t[f]);for(var o in t)o!=="em"&&(n[o]=t[o]-f);return n}function u(t){for(var f=t.height,n=t.data,o=3;o<n.length;o+=4)if(n[o]!==0)return Math.floor((o-3)*.25/f)}function c(t){for(var f=t.height,n=t.data,o=n.length-1;o>0;o-=4)if(n[o]!==0)return Math.floor((o-3)*.25/f)}},{}],247:[function(e,v,S){v.exports=m;var r=0,a=1;function u(x,w,y,T,M,P){this._color=x,this.key=w,this.value=y,this.left=T,this.right=M,this._count=P}function c(x){return new u(x._color,x.key,x.value,x.left,x.right,x._count)}function t(x,w){return new u(x,w.key,w.value,w.left,w.right,w._count)}function f(x){x._count=1+(x.left?x.left._count:0)+(x.right?x.right._count:0)}function n(x,w){this._compare=x,this.root=w}var o=n.prototype;Object.defineProperty(o,"keys",{get:function(){var x=[];return this.forEach(function(w,y){x.push(w)}),x}}),Object.defineProperty(o,"values",{get:function(){var x=[];return this.forEach(function(w,y){x.push(y)}),x}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(x,w){for(var y=this._compare,T=this.root,M=[],P=[];T;){var L=y(x,T.key);M.push(T),P.push(L),L<=0?T=T.left:T=T.right}M.push(new u(r,x,w,null,null,1));for(var I=M.length-2;I>=0;--I){var T=M[I];P[I]<=0?M[I]=new u(T._color,T.key,T.value,M[I+1],T.right,T._count+1):M[I]=new u(T._color,T.key,T.value,T.left,M[I+1],T._count+1)}for(var I=M.length-1;I>1;--I){var E=M[I-1],T=M[I];if(E._color===a||T._color===a)break;var k=M[I-2];if(k.left===E)if(E.left===T){var C=k.right;if(C&&C._color===r)E._color=a,k.right=t(a,C),k._color=r,I-=1;else{if(k._color=r,k.left=E.right,E._color=a,E.right=k,M[I-2]=E,M[I-1]=T,f(k),f(E),I>=3){var D=M[I-3];D.left===k?D.left=E:D.right=E}break}}else{var C=k.right;if(C&&C._color===r)E._color=a,k.right=t(a,C),k._color=r,I-=1;else{if(E.right=T.left,k._color=r,k.left=T.right,T._color=a,T.left=E,T.right=k,M[I-2]=T,M[I-1]=E,f(k),f(E),f(T),I>=3){var D=M[I-3];D.left===k?D.left=T:D.right=T}break}}else if(E.right===T){var C=k.left;if(C&&C._color===r)E._color=a,k.left=t(a,C),k._color=r,I-=1;else{if(k._color=r,k.right=E.left,E._color=a,E.left=k,M[I-2]=E,M[I-1]=T,f(k),f(E),I>=3){var D=M[I-3];D.right===k?D.right=E:D.left=E}break}}else{var C=k.left;if(C&&C._color===r)E._color=a,k.left=t(a,C),k._color=r,I-=1;else{if(E.left=T.right,k._color=r,k.right=T.left,T._color=a,T.right=E,T.left=k,M[I-2]=T,M[I-1]=E,f(k),f(E),f(T),I>=3){var D=M[I-3];D.right===k?D.right=T:D.left=T}break}}}return M[0]._color=a,new n(y,M[0])};function l(x,w){if(w.left){var y=l(x,w.left);if(y)return y}var y=x(w.key,w.value);if(y)return y;if(w.right)return l(x,w.right)}function h(x,w,y,T){var M=w(x,T.key);if(M<=0){if(T.left){var P=h(x,w,y,T.left);if(P)return P}var P=y(T.key,T.value);if(P)return P}if(T.right)return h(x,w,y,T.right)}function i(x,w,y,T,M){var P=y(x,M.key),L=y(w,M.key),I;if(P<=0&&(M.left&&(I=i(x,w,y,T,M.left),I)||L>0&&(I=T(M.key,M.value),I)))return I;if(L>0&&M.right)return i(x,w,y,T,M.right)}o.forEach=function(w,y,T){if(!!this.root)switch(arguments.length){case 1:return l(w,this.root);case 2:return h(y,this._compare,w,this.root);case 3:return this._compare(y,T)>=0?void 0:i(y,T,this._compare,w,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var x=[],w=this.root;w;)x.push(w),w=w.left;return new s(this,x)}}),Object.defineProperty(o,"end",{get:function(){for(var x=[],w=this.root;w;)x.push(w),w=w.right;return new s(this,x)}}),o.at=function(x){if(x<0)return new s(this,[]);for(var w=this.root,y=[];;){if(y.push(w),w.left){if(x<w.left._count){w=w.left;continue}x-=w.left._count}if(!x)return new s(this,y);if(x-=1,w.right){if(x>=w.right._count)break;w=w.right}else break}return new s(this,[])},o.ge=function(x){for(var w=this._compare,y=this.root,T=[],M=0;y;){var P=w(x,y.key);T.push(y),P<=0&&(M=T.length),P<=0?y=y.left:y=y.right}return T.length=M,new s(this,T)},o.gt=function(x){for(var w=this._compare,y=this.root,T=[],M=0;y;){var P=w(x,y.key);T.push(y),P<0&&(M=T.length),P<0?y=y.left:y=y.right}return T.length=M,new s(this,T)},o.lt=function(x){for(var w=this._compare,y=this.root,T=[],M=0;y;){var P=w(x,y.key);T.push(y),P>0&&(M=T.length),P<=0?y=y.left:y=y.right}return T.length=M,new s(this,T)},o.le=function(x){for(var w=this._compare,y=this.root,T=[],M=0;y;){var P=w(x,y.key);T.push(y),P>=0&&(M=T.length),P<0?y=y.left:y=y.right}return T.length=M,new s(this,T)},o.find=function(x){for(var w=this._compare,y=this.root,T=[];y;){var M=w(x,y.key);if(T.push(y),M===0)return new s(this,T);M<=0?y=y.left:y=y.right}return new s(this,[])},o.remove=function(x){var w=this.find(x);return w?w.remove():this},o.get=function(x){for(var w=this._compare,y=this.root;y;){var T=w(x,y.key);if(T===0)return y.value;T<=0?y=y.left:y=y.right}};function s(x,w){this.tree=x,this._stack=w}var p=s.prototype;Object.defineProperty(p,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(p,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),p.clone=function(){return new s(this.tree,this._stack.slice())};function d(x,w){x.key=w.key,x.value=w.value,x.left=w.left,x.right=w.right,x._color=w._color,x._count=w._count}function g(x){for(var w,y,T,M,P=x.length-1;P>=0;--P){if(w=x[P],P===0){w._color=a;return}if(y=x[P-1],y.left===w){if(T=y.right,T.right&&T.right._color===r){if(T=y.right=c(T),M=T.right=c(T.right),y.right=T.left,T.left=y,T.right=M,T._color=y._color,w._color=a,y._color=a,M._color=a,f(y),f(T),P>1){var L=x[P-2];L.left===y?L.left=T:L.right=T}x[P-1]=T;return}else if(T.left&&T.left._color===r){if(T=y.right=c(T),M=T.left=c(T.left),y.right=M.left,T.left=M.right,M.left=y,M.right=T,M._color=y._color,y._color=a,T._color=a,w._color=a,f(y),f(T),f(M),P>1){var L=x[P-2];L.left===y?L.left=M:L.right=M}x[P-1]=M;return}if(T._color===a)if(y._color===r){y._color=a,y.right=t(r,T);return}else{y.right=t(r,T);continue}else{if(T=c(T),y.right=T.left,T.left=y,T._color=y._color,y._color=r,f(y),f(T),P>1){var L=x[P-2];L.left===y?L.left=T:L.right=T}x[P-1]=T,x[P]=y,P+1<x.length?x[P+1]=w:x.push(w),P=P+2}}else{if(T=y.left,T.left&&T.left._color===r){if(T=y.left=c(T),M=T.left=c(T.left),y.left=T.right,T.right=y,T.left=M,T._color=y._color,w._color=a,y._color=a,M._color=a,f(y),f(T),P>1){var L=x[P-2];L.right===y?L.right=T:L.left=T}x[P-1]=T;return}else if(T.right&&T.right._color===r){if(T=y.left=c(T),M=T.right=c(T.right),y.left=M.right,T.right=M.left,M.right=y,M.left=T,M._color=y._color,y._color=a,T._color=a,w._color=a,f(y),f(T),f(M),P>1){var L=x[P-2];L.right===y?L.right=M:L.left=M}x[P-1]=M;return}if(T._color===a)if(y._color===r){y._color=a,y.left=t(r,T);return}else{y.left=t(r,T);continue}else{if(T=c(T),y.left=T.right,T.right=y,T._color=y._color,y._color=r,f(y),f(T),P>1){var L=x[P-2];L.right===y?L.right=T:L.left=T}x[P-1]=T,x[P]=y,P+1<x.length?x[P+1]=w:x.push(w),P=P+2}}}}p.remove=function(){var x=this._stack;if(x.length===0)return this.tree;var w=new Array(x.length),y=x[x.length-1];w[w.length-1]=new u(y._color,y.key,y.value,y.left,y.right,y._count);for(var T=x.length-2;T>=0;--T){var y=x[T];y.left===x[T+1]?w[T]=new u(y._color,y.key,y.value,w[T+1],y.right,y._count):w[T]=new u(y._color,y.key,y.value,y.left,w[T+1],y._count)}if(y=w[w.length-1],y.left&&y.right){var M=w.length;for(y=y.left;y.right;)w.push(y),y=y.right;var P=w[M-1];w.push(new u(y._color,P.key,P.value,y.left,y.right,y._count)),w[M-1].key=y.key,w[M-1].value=y.value;for(var T=w.length-2;T>=M;--T)y=w[T],w[T]=new u(y._color,y.key,y.value,y.left,w[T+1],y._count);w[M-1].left=w[M]}if(y=w[w.length-1],y._color===r){var L=w[w.length-2];L.left===y?L.left=null:L.right===y&&(L.right=null),w.pop();for(var T=0;T<w.length;++T)w[T]._count--;return new n(this.tree._compare,w[0])}else if(y.left||y.right){y.left?d(y,y.left):y.right&&d(y,y.right),y._color=a;for(var T=0;T<w.length-1;++T)w[T]._count--;return new n(this.tree._compare,w[0])}else{if(w.length===1)return new n(this.tree._compare,null);for(var T=0;T<w.length;++T)w[T]._count--;var I=w[w.length-2];g(w),I.left===y?I.left=null:I.right=null}return new n(this.tree._compare,w[0])},Object.defineProperty(p,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(p,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(p,"index",{get:function(){var x=0,w=this._stack;if(w.length===0){var y=this.tree.root;return y?y._count:0}else w[w.length-1].left&&(x=w[w.length-1].left._count);for(var T=w.length-2;T>=0;--T)w[T+1]===w[T].right&&(++x,w[T].left&&(x+=w[T].left._count));return x},enumerable:!0}),p.next=function(){var x=this._stack;if(x.length!==0){var w=x[x.length-1];if(w.right)for(w=w.right;w;)x.push(w),w=w.left;else for(x.pop();x.length>0&&x[x.length-1].right===w;)w=x[x.length-1],x.pop()}},Object.defineProperty(p,"hasNext",{get:function(){var x=this._stack;if(x.length===0)return!1;if(x[x.length-1].right)return!0;for(var w=x.length-1;w>0;--w)if(x[w-1].left===x[w])return!0;return!1}}),p.update=function(x){var w=this._stack;if(w.length===0)throw new Error("Can't update empty node!");var y=new Array(w.length),T=w[w.length-1];y[y.length-1]=new u(T._color,T.key,x,T.left,T.right,T._count);for(var M=w.length-2;M>=0;--M)T=w[M],T.left===w[M+1]?y[M]=new u(T._color,T.key,T.value,y[M+1],T.right,T._count):y[M]=new u(T._color,T.key,T.value,T.left,y[M+1],T._count);return new n(this.tree._compare,y[0])},p.prev=function(){var x=this._stack;if(x.length!==0){var w=x[x.length-1];if(w.left)for(w=w.left;w;)x.push(w),w=w.right;else for(x.pop();x.length>0&&x[x.length-1].left===w;)w=x[x.length-1],x.pop()}},Object.defineProperty(p,"hasPrev",{get:function(){var x=this._stack;if(x.length===0)return!1;if(x[x.length-1].left)return!0;for(var w=x.length-1;w>0;--w)if(x[w-1].right===x[w])return!0;return!1}});function b(x,w){return x<w?-1:x>w?1:0}function m(x){return new n(x||b,null)}},{}],248:[function(e,v,S){var r=7,a=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23],u=607/128,c=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function t(f){if(f<0)return Number("0/0");for(var n=c[0],o=c.length-1;o>0;--o)n+=c[o]/(f+o);var l=f+u+.5;return .5*Math.log(2*Math.PI)+(f+.5)*Math.log(l)-l+Math.log(n)-Math.log(f)}v.exports=function f(n){if(n<.5)return Math.PI/(Math.sin(Math.PI*n)*f(1-n));if(n>100)return Math.exp(t(n));n-=1;for(var o=a[0],l=1;l<r+2;l++)o+=a[l]/(n+l);var h=n+r+.5;return Math.sqrt(2*Math.PI)*Math.pow(h,n+.5)*Math.exp(-h)*o},v.exports.log=t},{}],249:[function(e,v,S){v.exports=r;function r(a,u){if(typeof a!="string")throw new TypeError("must specify type string");if(u=u||{},typeof document>"u"&&!u.canvas)return null;var c=u.canvas||document.createElement("canvas");typeof u.width=="number"&&(c.width=u.width),typeof u.height=="number"&&(c.height=u.height);var t=u,f;try{var n=[a];a.indexOf("webgl")===0&&n.push("experimental-"+a);for(var o=0;o<n.length;o++)if(f=c.getContext(n[o],t),f)return f}catch{f=null}return f||null}},{}],250:[function(e,v,S){v.exports=w;var r=e("./lib/text.js"),a=e("./lib/lines.js"),u=e("./lib/background.js"),c=e("./lib/cube.js"),t=e("./lib/ticks.js"),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function n(y,T){return y[0]=T[0],y[1]=T[1],y[2]=T[2],y}function o(y){this.gl=y,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=u(y)}var l=o.prototype;l.update=function(y){y=y||{};function T(U,X,z){if(z in y){var B=y[z],j=this[z],V;(U?Array.isArray(B)&&Array.isArray(B[0]):Array.isArray(B))?this[z]=V=[X(B[0]),X(B[1]),X(B[2])]:this[z]=V=[X(B),X(B),X(B)];for(var K=0;K<3;++K)if(V[K]!==j[K])return!0}return!1}var M=T.bind(this,!1,Number),P=T.bind(this,!1,Boolean),L=T.bind(this,!1,String),I=T.bind(this,!0,function(U){if(Array.isArray(U)){if(U.length===3)return[+U[0],+U[1],+U[2],1];if(U.length===4)return[+U[0],+U[1],+U[2],+U[3]]}return[0,0,0,1]}),E,k=!1,C=!1;if("bounds"in y)for(var D=y.bounds,F=0;F<2;++F)for(var N=0;N<3;++N)D[F][N]!==this.bounds[F][N]&&(C=!0),this.bounds[F][N]=D[F][N];if("ticks"in y){E=y.ticks,k=!0,this.autoTicks=!1;for(var F=0;F<3;++F)this.tickSpacing[F]=0}else M("tickSpacing")&&(this.autoTicks=!0,C=!0);if(this._firstInit&&("ticks"in y||"tickSpacing"in y||(this.autoTicks=!0),C=!0,k=!0,this._firstInit=!1),C&&this.autoTicks&&(E=t.create(this.bounds,this.tickSpacing),k=!0),k){for(var F=0;F<3;++F)E[F].sort(function(X,z){return X.x-z.x});t.equal(E,this.ticks)?k=!1:this.ticks=E}P("tickEnable"),L("tickFont")&&(k=!0),M("tickSize"),M("tickAngle"),M("tickPad"),I("tickColor");var G=L("labels");L("labelFont")&&(G=!0),P("labelEnable"),M("labelSize"),M("labelPad"),I("labelColor"),P("lineEnable"),P("lineMirror"),M("lineWidth"),I("lineColor"),P("lineTickEnable"),P("lineTickMirror"),M("lineTickLength"),M("lineTickWidth"),I("lineTickColor"),P("gridEnable"),M("gridWidth"),I("gridColor"),P("zeroEnable"),I("zeroLineColor"),M("zeroLineWidth"),P("backgroundEnable"),I("backgroundColor"),this._text?this._text&&(G||k)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=r(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&k&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};function h(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var i=[new h,new h,new h];function s(y,T,M,P,L){for(var I=y.primalOffset,E=y.primalMinor,k=y.mirrorOffset,C=y.mirrorMinor,D=P[T],F=0;F<3;++F)if(T!==F){var N=I,G=k,U=E,X=C;D&1<<F&&(N=k,G=I,U=C,X=E),N[F]=M[0][F],G[F]=M[1][F],L[F]>0?(U[F]=-1,X[F]=0):(U[F]=0,X[F]=1)}}var p=[0,0,0],d={model:f,view:f,projection:f,_ortho:!1};l.isOpaque=function(){return!0},l.isTransparent=function(){return!1},l.drawTransparent=function(y){};var g=0,b=[0,0,0],m=[0,0,0],x=[0,0,0];l.draw=function(y){y=y||d;for(var j=this.gl,T=y.model||f,M=y.view||f,P=y.projection||f,L=this.bounds,I=y._ortho||!1,E=c(T,M,P,L,I),k=E.cubeEdges,C=E.axis,D=M[12],F=M[13],N=M[14],G=M[15],U=I?2:1,X=U*this.pixelRatio*(P[3]*D+P[7]*F+P[11]*N+P[15]*G)/j.drawingBufferHeight,z=0;z<3;++z)this.lastCubeProps.cubeEdges[z]=k[z],this.lastCubeProps.axis[z]=C[z];for(var B=i,z=0;z<3;++z)s(i[z],z,this.bounds,k,C);for(var j=this.gl,V=p,z=0;z<3;++z)this.backgroundEnable[z]?V[z]=C[z]:V[z]=0;this._background.draw(T,M,P,L,V,this.backgroundColor),this._lines.bind(T,M,P,this);for(var z=0;z<3;++z){var K=[0,0,0];C[z]>0?K[z]=L[1][z]:K[z]=L[0][z];for(var te=0;te<2;++te){var $=(z+1+te)%3,ie=(z+1+(te^1))%3;this.gridEnable[$]&&this._lines.drawGrid($,ie,this.bounds,K,this.gridColor[$],this.gridWidth[$]*this.pixelRatio)}for(var te=0;te<2;++te){var $=(z+1+te)%3,ie=(z+1+(te^1))%3;this.zeroEnable[ie]&&Math.min(L[0][ie],L[1][ie])<=0&&Math.max(L[0][ie],L[1][ie])>=0&&this._lines.drawZero($,ie,this.bounds,K,this.zeroLineColor[ie],this.zeroLineWidth[ie]*this.pixelRatio)}}for(var z=0;z<3;++z){this.lineEnable[z]&&this._lines.drawAxisLine(z,this.bounds,B[z].primalOffset,this.lineColor[z],this.lineWidth[z]*this.pixelRatio),this.lineMirror[z]&&this._lines.drawAxisLine(z,this.bounds,B[z].mirrorOffset,this.lineColor[z],this.lineWidth[z]*this.pixelRatio);for(var se=n(b,B[z].primalMinor),Q=n(m,B[z].mirrorMinor),H=this.lineTickLength,te=0;te<3;++te){var oe=X/T[5*te];se[te]*=H[te]*oe,Q[te]*=H[te]*oe}this.lineTickEnable[z]&&this._lines.drawAxisTicks(z,B[z].primalOffset,se,this.lineTickColor[z],this.lineTickWidth[z]*this.pixelRatio),this.lineTickMirror[z]&&this._lines.drawAxisTicks(z,B[z].mirrorOffset,Q,this.lineTickColor[z],this.lineTickWidth[z]*this.pixelRatio)}this._lines.unbind(),this._text.bind(T,M,P,this.pixelRatio);var re,ee=.5,ae,fe;function de(Me){fe=[0,0,0],fe[Me]=1}function pe(Me,Pe,Ge){var ze=(Me+1)%3,Qe=(Me+2)%3,tt=Pe[ze],Ce=Pe[Qe],Ae=Ge[ze],Be=Ge[Qe];if(tt>0&&Be>0){de(ze);return}else if(tt>0&&Be<0){de(ze);return}else if(tt<0&&Be>0){de(ze);return}else if(tt<0&&Be<0){de(ze);return}else if(Ce>0&&Ae>0){de(Qe);return}else if(Ce>0&&Ae<0){de(Qe);return}else if(Ce<0&&Ae>0){de(Qe);return}else if(Ce<0&&Ae<0){de(Qe);return}}for(var z=0;z<3;++z){for(var W=B[z].primalMinor,ue=B[z].mirrorMinor,me=n(x,B[z].primalOffset),te=0;te<3;++te)this.lineTickEnable[z]&&(me[te]+=X*W[te]*Math.max(this.lineTickLength[te],0)/T[5*te]);var be=[0,0,0];if(be[z]=1,this.tickEnable[z]){this.tickAngle[z]===-3600?(this.tickAngle[z]=0,this.tickAlign[z]="auto"):this.tickAlign[z]=-1,ae=1,re=[this.tickAlign[z],ee,ae],re[0]==="auto"?re[0]=g:re[0]=parseInt(""+re[0]),fe=[0,0,0],pe(z,W,ue);for(var te=0;te<3;++te)me[te]+=X*W[te]*this.tickPad[te]/T[5*te];this._text.drawTicks(z,this.tickSize[z],this.tickAngle[z],me,this.tickColor[z],be,fe,re)}if(this.labelEnable[z]){ae=0,fe=[0,0,0],this.labels[z].length>4&&(de(z),ae=1),re=[this.labelAlign[z],ee,ae],re[0]==="auto"?re[0]=g:re[0]=parseInt(""+re[0]);for(var te=0;te<3;++te)me[te]+=X*W[te]*this.labelPad[te]/T[5*te];me[z]+=.5*(L[0][z]+L[1][z]),this._text.drawLabel(z,this.labelSize[z],this.labelAngle[z],me,this.labelColor[z],[0,0,0],fe,re)}}this._text.unbind()},l.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function w(y,T){var M=new o(y);return M.update(T),M}},{"./lib/background.js":251,"./lib/cube.js":252,"./lib/lines.js":253,"./lib/text.js":255,"./lib/ticks.js":256}],251:[function(e,v,S){v.exports=f;var r=e("gl-buffer"),a=e("gl-vao"),u=e("./shaders").bg;function c(n,o,l,h){this.gl=n,this.buffer=o,this.vao=l,this.shader=h}var t=c.prototype;t.draw=function(n,o,l,h,i,s){for(var p=!1,d=0;d<3;++d)p=p||i[d];if(!!p){var g=this.gl;g.enable(g.POLYGON_OFFSET_FILL),g.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:n,view:o,projection:l,bounds:h,enable:i,colors:s},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),g.disable(g.POLYGON_OFFSET_FILL)}},t.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function f(n){for(var o=[],l=[],h=0,i=0;i<3;++i)for(var s=(i+1)%3,p=(i+2)%3,d=[0,0,0],g=[0,0,0],b=-1;b<=1;b+=2){l.push(h,h+2,h+1,h+1,h+2,h+3),d[i]=b,g[i]=b;for(var m=-1;m<=1;m+=2){d[s]=m;for(var x=-1;x<=1;x+=2)d[p]=x,o.push(d[0],d[1],d[2],g[0],g[1],g[2]),h+=1}var w=s;s=p,p=w}var y=r(n,new Float32Array(o)),T=r(n,new Uint16Array(l),n.ELEMENT_ARRAY_BUFFER),M=a(n,[{buffer:y,type:n.FLOAT,size:3,offset:0,stride:24},{buffer:y,type:n.FLOAT,size:3,offset:12,stride:24}],T),P=u(n);return P.attributes.position.location=0,P.attributes.normal.location=1,new c(n,y,M,P)}},{"./shaders":254,"gl-buffer":259,"gl-vao":358}],252:[function(e,v,S){v.exports=b;var r=e("bit-twiddle"),a=e("gl-mat4/multiply"),u=e("split-polygon"),c=e("robust-orientation"),t=new Array(16),f=new Array(8),n=new Array(8),o=new Array(3),l=[0,0,0];(function(){for(var m=0;m<8;++m)f[m]=[1,1,1,1],n[m]=[1,1,1]})();function h(m,x,w){for(var y=0;y<4;++y){m[y]=w[12+y];for(var T=0;T<3;++T)m[y]+=x[T]*w[4*T+y]}}var i=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function s(m){for(var x=0;x<i.length;++x)if(m=u.positive(m,i[x]),m.length<3)return 0;for(var w=m[0],y=w[0]/w[3],T=w[1]/w[3],M=0,x=1;x+1<m.length;++x){var P=m[x],L=m[x+1],I=P[0]/P[3],E=P[1]/P[3],k=L[0]/L[3],C=L[1]/L[3],D=I-y,F=E-T,N=k-y,G=C-T;M+=Math.abs(D*G-F*N)}return M}var p=[1,1,1],d=[0,0,0],g={cubeEdges:p,axis:d};function b(m,x,w,y,T){a(t,x,m),a(t,w,t);for(var M=0,P=0;P<2;++P){o[2]=y[P][2];for(var L=0;L<2;++L){o[1]=y[L][1];for(var I=0;I<2;++I)o[0]=y[I][0],h(f[M],o,t),M+=1}}for(var E=-1,P=0;P<8;++P){for(var k=f[P][3],C=0;C<3;++C)n[P][C]=f[P][C]/k;T&&(n[P][2]*=-1),k<0&&(E<0||n[P][2]<n[E][2])&&(E=P)}if(E<0){E=0;for(var D=0;D<3;++D){for(var F=(D+2)%3,N=(D+1)%3,G=-1,U=-1,X=0;X<2;++X){var z=X<<D,B=z+(X<<F)+(1-X<<N),j=z+(1-X<<F)+(X<<N);c(n[z],n[B],n[j],l)<0||(X?G=1:U=1)}if(G<0||U<0){U>G&&(E|=1<<D);continue}for(var X=0;X<2;++X){var z=X<<D,B=z+(X<<F)+(1-X<<N),j=z+(1-X<<F)+(X<<N),V=s([f[z],f[B],f[j],f[z+(1<<F)+(1<<N)]]);X?G=V:U=V}if(U>G){E|=1<<D;continue}}}for(var K=7^E,te=-1,P=0;P<8;++P)P===E||P===K||(te<0||n[te][1]>n[P][1])&&(te=P);for(var $=-1,P=0;P<3;++P){var ie=te^1<<P;if(!(ie===E||ie===K)){$<0&&($=ie);var N=n[ie];N[0]<n[$][0]&&($=ie)}}for(var se=-1,P=0;P<3;++P){var ie=te^1<<P;if(!(ie===E||ie===K||ie===$)){se<0&&(se=ie);var N=n[ie];N[0]>n[se][0]&&(se=ie)}}var Q=p;Q[0]=Q[1]=Q[2]=0,Q[r.log2($^te)]=te&$,Q[r.log2(te^se)]=te&se;var H=se^7;H===E||H===K?(H=$^7,Q[r.log2(se^H)]=H&se):Q[r.log2($^H)]=H&$;for(var oe=d,re=E,D=0;D<3;++D)re&1<<D?oe[D]=-1:oe[D]=1;return g}},{"bit-twiddle":97,"gl-mat4/multiply":295,"robust-orientation":548,"split-polygon":566}],253:[function(e,v,S){v.exports=p;var r=e("gl-buffer"),a=e("gl-vao"),u=e("./shaders").line,c=[0,0,0],t=[0,0,0],f=[0,0,0],n=[0,0,0],o=[1,1];function l(d){return d[0]=d[1]=d[2]=0,d}function h(d,g){return d[0]=g[0],d[1]=g[1],d[2]=g[2],d}function i(d,g,b,m,x,w,y,T){this.gl=d,this.vertBuffer=g,this.vao=b,this.shader=m,this.tickCount=x,this.tickOffset=w,this.gridCount=y,this.gridOffset=T}var s=i.prototype;s.bind=function(d,g,b){this.shader.bind(),this.shader.uniforms.model=d,this.shader.uniforms.view=g,this.shader.uniforms.projection=b,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},s.unbind=function(){this.vao.unbind()},s.drawAxisLine=function(d,g,b,m,x){var w=l(t);this.shader.uniforms.majorAxis=t,w[d]=g[1][d]-g[0][d],this.shader.uniforms.minorAxis=w;var y=h(n,b);y[d]+=g[0][d],this.shader.uniforms.offset=y,this.shader.uniforms.lineWidth=x,this.shader.uniforms.color=m;var T=l(f);T[(d+2)%3]=1,this.shader.uniforms.screenAxis=T,this.vao.draw(this.gl.TRIANGLES,6);var T=l(f);T[(d+1)%3]=1,this.shader.uniforms.screenAxis=T,this.vao.draw(this.gl.TRIANGLES,6)},s.drawAxisTicks=function(d,g,b,m,x){if(!!this.tickCount[d]){var w=l(c);w[d]=1,this.shader.uniforms.majorAxis=w,this.shader.uniforms.offset=g,this.shader.uniforms.minorAxis=b,this.shader.uniforms.color=m,this.shader.uniforms.lineWidth=x;var y=l(f);y[d]=1,this.shader.uniforms.screenAxis=y,this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d])}},s.drawGrid=function(d,g,b,m,x,w){if(!!this.gridCount[d]){var y=l(t);y[g]=b[1][g]-b[0][g],this.shader.uniforms.minorAxis=y;var T=h(n,m);T[g]+=b[0][g],this.shader.uniforms.offset=T;var M=l(c);M[d]=1,this.shader.uniforms.majorAxis=M;var P=l(f);P[d]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=x,this.vao.draw(this.gl.TRIANGLES,this.gridCount[d],this.gridOffset[d])}},s.drawZero=function(d,g,b,m,x,w){var y=l(t);this.shader.uniforms.majorAxis=y,y[d]=b[1][d]-b[0][d],this.shader.uniforms.minorAxis=y;var T=h(n,m);T[d]+=b[0][d],this.shader.uniforms.offset=T;var M=l(f);M[g]=1,this.shader.uniforms.screenAxis=M,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=x,this.vao.draw(this.gl.TRIANGLES,6)},s.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function p(d,g,b){var m=[],x=[0,0,0],w=[0,0,0],y=[0,0,0],T=[0,0,0];m.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var M=0;M<3;++M){for(var I=m.length/3|0,P=0;P<b[M].length;++P){var L=+b[M][P].x;m.push(L,0,1,L,1,1,L,0,-1,L,0,-1,L,1,1,L,1,-1)}var k=m.length/3|0;x[M]=I,w[M]=k-I;for(var I=m.length/3|0,E=0;E<b[M].length;++E){var L=+b[M][E].x;m.push(L,0,1,L,1,1,L,0,-1,L,0,-1,L,1,1,L,1,-1)}var k=m.length/3|0;y[M]=I,T[M]=k-I}var C=r(d,new Float32Array(m)),D=a(d,[{buffer:C,type:d.FLOAT,size:3,stride:0,offset:0}]),F=u(d);return F.attributes.position.location=0,new i(d,C,D,F,w,x,T,y)}},{"./shaders":254,"gl-buffer":259,"gl-vao":358}],254:[function(e,v,S){var r=e("glslify"),a=e("gl-shader"),u=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);S.line=function(l){return a(l,u,c,null,[{name:"position",type:"vec3"}])};var t=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),f=r([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);S.text=function(l){return a(l,t,f,null,[{name:"position",type:"vec3"}])};var n=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),o=r([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);S.bg=function(l){return a(l,n,o,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":335,glslify:257}],255:[function(e,v,S){(function(r){(function(){v.exports=p;var a=e("gl-buffer"),u=e("gl-vao"),c=e("vectorize-text"),t=e("./shaders").text,f=window||r.global||{},n=f.__TEXT_CACHE||{};f.__TEXT_CACHE={};var o=3;function l(d,g,b,m){this.gl=d,this.shader=g,this.buffer=b,this.vao=m,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var h=l.prototype,i=[0,0];h.bind=function(d,g,b,m){this.vao.bind(),this.shader.bind();var x=this.shader.uniforms;x.model=d,x.view=g,x.projection=b,x.pixelScale=m,i[0]=this.gl.drawingBufferWidth,i[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=i},h.unbind=function(){this.vao.unbind()},h.update=function(d,g,b,m,x){var w=[];function y(D,F,N,G,U,X){var z=n[N];z||(z=n[N]={});var B=z[F];B||(B=z[F]=s(F,{triangles:!0,font:N,textAlign:"center",textBaseline:"middle",lineSpacing:U,styletags:X}));for(var j=(G||12)/12,V=B.positions,K=B.cells,te=0,$=K.length;te<$;++te)for(var ie=K[te],se=2;se>=0;--se){var Q=V[ie[se]];w.push(j*Q[0],-j*Q[1],D)}}for(var T=[0,0,0],M=[0,0,0],P=[0,0,0],L=[0,0,0],I=1.25,E={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},k=0;k<3;++k){P[k]=w.length/o|0,y(.5*(d[0][k]+d[1][k]),g[k],b[k],12,I,E),L[k]=(w.length/o|0)-P[k],T[k]=w.length/o|0;for(var C=0;C<m[k].length;++C)!m[k][C].text||y(m[k][C].x,m[k][C].text,m[k][C].font||x,m[k][C].fontSize||12,I,E);M[k]=(w.length/o|0)-T[k]}this.buffer.update(w),this.tickOffset=T,this.tickCount=M,this.labelOffset=P,this.labelCount=L},h.drawTicks=function(d,g,b,m,x,w,y,T){!this.tickCount[d]||(this.shader.uniforms.axis=w,this.shader.uniforms.color=x,this.shader.uniforms.angle=b,this.shader.uniforms.scale=g,this.shader.uniforms.offset=m,this.shader.uniforms.alignDir=y,this.shader.uniforms.alignOpt=T,this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d]))},h.drawLabel=function(d,g,b,m,x,w,y,T){!this.labelCount[d]||(this.shader.uniforms.axis=w,this.shader.uniforms.color=x,this.shader.uniforms.angle=b,this.shader.uniforms.scale=g,this.shader.uniforms.offset=m,this.shader.uniforms.alignDir=y,this.shader.uniforms.alignOpt=T,this.vao.draw(this.gl.TRIANGLES,this.labelCount[d],this.labelOffset[d]))},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function s(d,g){try{return c(d,g)}catch(b){return console.warn('error vectorizing text:"'+d+'" error:',b),{cells:[],positions:[]}}}function p(d,g,b,m,x,w){var y=a(d),T=u(d,[{buffer:y,size:3}]),M=t(d);M.attributes.position.location=0;var P=new l(d,M,y,T);return P.update(g,b,m,x,w),P}}).call(this)}).call(this,e("_process"))},{"./shaders":254,_process:526,"gl-buffer":259,"gl-vao":358,"vectorize-text":600}],256:[function(e,v,S){S.create=a,S.equal=u;function r(c,t){var f=c+"",n=f.indexOf("."),o=0;n>=0&&(o=f.length-n-1);var l=Math.pow(10,o),h=Math.round(c*t*l),i=h+"";if(i.indexOf("e")>=0)return i;var s=h/l,p=h%l;h<0?(s=-Math.ceil(s)|0,p=-p|0):(s=Math.floor(s)|0,p=p|0);var d=""+s;if(h<0&&(d="-"+d),o){for(var g=""+p;g.length<o;)g="0"+g;return d+"."+g}else return d}function a(c,t){for(var f=[],n=0;n<3;++n){var o=[];.5*(c[0][n]+c[1][n]);for(var l=0;l*t[n]<=c[1][n];++l)o.push({x:l*t[n],text:r(t[n],l)});for(var l=-1;l*t[n]>=c[0][n];--l)o.push({x:l*t[n],text:r(t[n],l)});f.push(o)}return f}function u(c,t){for(var f=0;f<3;++f){if(c[f].length!==t[f].length)return!1;for(var n=0;n<c[f].length;++n){var o=c[f][n],l=t[f][n];if(o.x!==l.x||o.text!==l.text||o.font!==l.font||o.fontColor!==l.fontColor||o.fontSize!==l.fontSize||o.dx!==l.dx||o.dy!==l.dy)return!1}}return!0}},{}],257:[function(e,v,S){v.exports=function(r){typeof r=="string"&&(r=[r]);for(var a=[].slice.call(arguments,1),u=[],c=0;c<r.length-1;c++)u.push(r[c],a[c]||"");return u.push(r[c]),u.join("")}},{}],258:[function(e,v,S){v.exports=g;var r=e("extract-frustum-planes"),a=e("split-polygon"),u=e("./lib/cube.js"),c=e("gl-mat4/multiply"),t=e("gl-mat4/transpose"),f=e("gl-vec4/transformMat4"),n=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=new Float32Array(16);function l(b,m,x){this.lo=b,this.hi=m,this.pixelsPerDataUnit=x}var h=[0,0,0,1],i=[0,0,0,1];function s(b,m,x,w,y){for(var T=0;T<3;++T){for(var M=h,P=i,L=0;L<3;++L)P[L]=M[L]=x[L];P[3]=M[3]=1,P[T]+=1,f(P,P,m),P[3]<0&&(b[T]=1/0),M[T]-=1,f(M,M,m),M[3]<0&&(b[T]=1/0);var I=(M[0]/M[3]-P[0]/P[3])*w,E=(M[1]/M[3]-P[1]/P[3])*y;b[T]=.25*Math.sqrt(I*I+E*E)}return b}var p=[new l(1/0,-1/0,1/0),new l(1/0,-1/0,1/0),new l(1/0,-1/0,1/0)],d=[0,0,0];function g(b,m,x,w,E){var T=m.model||n,M=m.view||n,P=m.projection||n,L=m._ortho||!1,I=b.bounds,E=E||u(T,M,P,I,L),k=E.axis;c(o,M,T),c(o,P,o);for(var C=p,D=0;D<3;++D)C[D].lo=1/0,C[D].hi=-1/0,C[D].pixelsPerDataUnit=1/0;var F=r(t(o,o));t(o,o);for(var N=0;N<3;++N){var G=(N+1)%3,U=(N+2)%3,X=d;e:for(var D=0;D<2;++D){var z=[];if(k[N]<0!=!!D){X[N]=I[D][N];for(var B=0;B<2;++B){X[G]=I[B^D][G];for(var j=0;j<2;++j)X[U]=I[j^B^D][U],z.push(X.slice())}for(var V=L?5:4,B=V;B===V;++B){if(z.length===0)continue e;z=a.positive(z,F[B])}for(var B=0;B<z.length;++B)for(var U=z[B],K=s(d,o,U,x,w),j=0;j<3;++j)C[j].lo=Math.min(C[j].lo,U[j]),C[j].hi=Math.max(C[j].hi,U[j]),j!==N&&(C[j].pixelsPerDataUnit=Math.min(C[j].pixelsPerDataUnit,Math.abs(K[j])))}}}return C}},{"./lib/cube.js":252,"extract-frustum-planes":240,"gl-mat4/multiply":295,"gl-mat4/transpose":306,"gl-vec4/transformMat4":429,"split-polygon":566}],259:[function(e,v,S){var r=e("typedarray-pool"),a=e("ndarray-ops"),u=e("ndarray"),c=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function t(i,s,p,d,g){this.gl=i,this.type=s,this.handle=p,this.length=d,this.usage=g}var f=t.prototype;f.bind=function(){this.gl.bindBuffer(this.type,this.handle)},f.unbind=function(){this.gl.bindBuffer(this.type,null)},f.dispose=function(){this.gl.deleteBuffer(this.handle)};function n(i,s,p,d,g,b){var m=g.length*g.BYTES_PER_ELEMENT;if(b<0)return i.bufferData(s,g,d),m;if(m+b>p)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return i.bufferSubData(s,b,g),p}function o(i,s){for(var p=r.malloc(i.length,s),d=i.length,g=0;g<d;++g)p[g]=i[g];return p}function l(i,s){for(var p=1,d=s.length-1;d>=0;--d){if(s[d]!==p)return!1;p*=i[d]}return!0}f.update=function(i,s){if(typeof s!="number"&&(s=-1),this.bind(),typeof i=="object"&&typeof i.shape<"u"){var p=i.dtype;if(c.indexOf(p)<0&&(p="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var d=gl.getExtension("OES_element_index_uint");d&&p!=="uint16"?p="uint32":p="uint16"}if(p===i.dtype&&l(i.shape,i.stride))i.offset===0&&i.data.length===i.shape[0]?this.length=n(this.gl,this.type,this.length,this.usage,i.data,s):this.length=n(this.gl,this.type,this.length,this.usage,i.data.subarray(i.offset,i.shape[0]),s);else{var g=r.malloc(i.size,p),b=u(g,i.shape);a.assign(b,i),s<0?this.length=n(this.gl,this.type,this.length,this.usage,g,s):this.length=n(this.gl,this.type,this.length,this.usage,g.subarray(0,i.size),s),r.free(g)}}else if(Array.isArray(i)){var m;this.type===this.gl.ELEMENT_ARRAY_BUFFER?m=o(i,"uint16"):m=o(i,"float32"),s<0?this.length=n(this.gl,this.type,this.length,this.usage,m,s):this.length=n(this.gl,this.type,this.length,this.usage,m.subarray(0,i.length),s),r.free(m)}else if(typeof i=="object"&&typeof i.length=="number")this.length=n(this.gl,this.type,this.length,this.usage,i,s);else if(typeof i=="number"||i===void 0){if(s>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");i=i|0,i<=0&&(i=1),this.gl.bufferData(this.type,i|0,this.usage),this.length=i}else throw new Error("gl-buffer: Invalid data type")};function h(i,s,p,d){if(p=p||i.ARRAY_BUFFER,d=d||i.DYNAMIC_DRAW,p!==i.ARRAY_BUFFER&&p!==i.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(d!==i.DYNAMIC_DRAW&&d!==i.STATIC_DRAW&&d!==i.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var g=i.createBuffer(),b=new t(i,p,g,0,d);return b.update(s),b}v.exports=h},{ndarray:495,"ndarray-ops":490,"typedarray-pool":595}],260:[function(e,v,S){var r=e("gl-vec3");v.exports=function(u,c){var t=u.positions,f=u.vectors,n={positions:[],vertexIntensity:[],vertexIntensityBounds:u.vertexIntensityBounds,vectors:[],cells:[],coneOffset:u.coneOffset,colormap:u.colormap};if(u.positions.length===0)return c&&(c[0]=[0,0,0],c[1]=[0,0,0]),n;for(var o=0,l=1/0,h=-1/0,i=1/0,s=-1/0,p=1/0,d=-1/0,g=null,b=null,m=[],x=1/0,w=!1,y=0;y<t.length;y++){var T=t[y];l=Math.min(T[0],l),h=Math.max(T[0],h),i=Math.min(T[1],i),s=Math.max(T[1],s),p=Math.min(T[2],p),d=Math.max(T[2],d);var M=f[y];if(r.length(M)>o&&(o=r.length(M)),y){var P=2*r.distance(g,T)/(r.length(b)+r.length(M));P?(x=Math.min(x,P),w=!1):w=!0}w||(g=T,b=M),m.push(M)}var L=[l,i,p],I=[h,s,d];c&&(c[0]=L,c[1]=I),o===0&&(o=1);var E=1/o;isFinite(x)||(x=1),n.vectorScale=x;var k=u.coneSize||.5;u.absoluteConeSize&&(k=u.absoluteConeSize*E),n.coneScale=k;for(var y=0,C=0;y<t.length;y++)for(var T=t[y],D=T[0],F=T[1],N=T[2],G=m[y],U=r.length(G)*E,X=0,z=8;X<z;X++){n.positions.push([D,F,N,C++]),n.positions.push([D,F,N,C++]),n.positions.push([D,F,N,C++]),n.positions.push([D,F,N,C++]),n.positions.push([D,F,N,C++]),n.positions.push([D,F,N,C++]),n.vectors.push(G),n.vectors.push(G),n.vectors.push(G),n.vectors.push(G),n.vectors.push(G),n.vectors.push(G),n.vertexIntensity.push(U,U,U),n.vertexIntensity.push(U,U,U);var B=n.positions.length;n.cells.push([B-6,B-5,B-4],[B-3,B-2,B-1])}return n};var a=e("./lib/shaders");v.exports.createMesh=e("./create_mesh"),v.exports.createConeMesh=function(u,c){return v.exports.createMesh(u,c,{shaders:a,traceType:"cone"})}},{"./create_mesh":261,"./lib/shaders":262,"gl-vec3":377}],261:[function(e,v,S){var r=e("gl-shader"),a=e("gl-buffer"),u=e("gl-vao"),c=e("gl-texture2d"),t=e("gl-mat4/multiply"),f=e("gl-mat4/invert"),n=e("ndarray"),o=e("colormap"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(m,x,w,y,T,M,P,L,I,E,k){this.gl=m,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=x,this.dirty=!0,this.triShader=w,this.pickShader=y,this.trianglePositions=T,this.triangleVectors=M,this.triangleColors=L,this.triangleUVs=I,this.triangleIds=P,this.triangleVAO=E,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=k,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=l,this._view=l,this._projection=l,this._resolution=[1,1]}var i=h.prototype;i.isOpaque=function(){return this.opacity>=1},i.isTransparent=function(){return this.opacity<1},i.pickSlots=1,i.setPickBase=function(m){this.pickId=m};function s(m){for(var x=o({colormap:m,nshades:256,format:"rgba"}),w=new Uint8Array(256*4),y=0;y<256;++y){for(var T=x[y],M=0;M<3;++M)w[4*y+M]=T[M];w[4*y+3]=T[3]*255}return n(w,[256,256,4],[4,0,1])}function p(m){for(var x=m.length,w=new Array(x),y=0;y<x;++y)w[y]=m[y][2];return w}i.update=function(m){m=m||{};var x=this.gl;this.dirty=!0,"lightPosition"in m&&(this.lightPosition=m.lightPosition),"opacity"in m&&(this.opacity=m.opacity),"ambient"in m&&(this.ambientLight=m.ambient),"diffuse"in m&&(this.diffuseLight=m.diffuse),"specular"in m&&(this.specularLight=m.specular),"roughness"in m&&(this.roughness=m.roughness),"fresnel"in m&&(this.fresnel=m.fresnel),m.tubeScale!==void 0&&(this.tubeScale=m.tubeScale),m.vectorScale!==void 0&&(this.vectorScale=m.vectorScale),m.coneScale!==void 0&&(this.coneScale=m.coneScale),m.coneOffset!==void 0&&(this.coneOffset=m.coneOffset),m.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=x.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=x.LINEAR,this.texture.setPixels(s(m.colormap)),this.texture.generateMipmap());var w=m.cells,y=m.positions,T=m.vectors;if(!y||!w||!T)return;var M=[],P=[],L=[],I=[],E=[];this.cells=w,this.positions=y,this.vectors=T;var k=m.meshColor||[1,1,1,1],C=m.vertexIntensity,D=1/0,F=-1/0;if(C)if(m.vertexIntensityBounds)D=+m.vertexIntensityBounds[0],F=+m.vertexIntensityBounds[1];else for(var N=0;N<C.length;++N){var G=C[N];D=Math.min(D,G),F=Math.max(F,G)}else for(var N=0;N<y.length;++N){var G=y[N][2];D=Math.min(D,G),F=Math.max(F,G)}C?this.intensity=C:this.intensity=p(y),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var N=0;N<y.length;++N)for(var U=y[N],X=0;X<3;++X)isNaN(U[X])||!isFinite(U[X])||(this.bounds[0][X]=Math.min(this.bounds[0][X],U[X]),this.bounds[1][X]=Math.max(this.bounds[1][X],U[X]));var z=0;e:for(var N=0;N<w.length;++N){var B=w[N];switch(B.length){case 3:for(var X=0;X<3;++X)for(var j=B[X],U=y[j],V=0;V<3;++V)if(isNaN(U[V])||!isFinite(U[V]))continue e;for(var X=0;X<3;++X){var j=B[2-X],U=y[j];M.push(U[0],U[1],U[2],U[3]);var K=T[j];P.push(K[0],K[1],K[2],K[3]||0);var te=k;te.length===3?L.push(te[0],te[1],te[2],1):L.push(te[0],te[1],te[2],te[3]);var $;C?$=[(C[j]-D)/(F-D),0]:$=[(U[2]-D)/(F-D),0],I.push($[0],$[1]),E.push(N)}z+=1;break}}this.triangleCount=z,this.trianglePositions.update(M),this.triangleVectors.update(P),this.triangleColors.update(L),this.triangleUVs.update(I),this.triangleIds.update(new Uint32Array(E))},i.drawTransparent=i.draw=function(m){m=m||{};for(var x=this.gl,w=m.model||l,y=m.view||l,T=m.projection||l,M=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],P=0;P<3;++P)M[0][P]=Math.max(M[0][P],this.clipBounds[0][P]),M[1][P]=Math.min(M[1][P],this.clipBounds[1][P]);var L={model:w,view:y,projection:T,inverseModel:l.slice(),clipBounds:M,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};L.inverseModel=f(L.inverseModel,L.model),x.disable(x.CULL_FACE),this.texture.bind(0);var I=new Array(16);t(I,L.view,L.model),t(I,L.projection,I),f(I,I);for(var P=0;P<3;++P)L.eyePosition[P]=I[12+P]/I[15];for(var E=I[15],P=0;P<3;++P)E+=this.lightPosition[P]*I[4*P+3];for(var P=0;P<3;++P){for(var k=I[12+P],C=0;C<3;++C)k+=I[4*C+P]*this.lightPosition[C];L.lightPosition[P]=k/E}if(this.triangleCount>0){var D=this.triShader;D.bind(),D.uniforms=L,this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},i.drawPick=function(m){m=m||{};for(var x=this.gl,w=m.model||l,y=m.view||l,T=m.projection||l,M=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],P=0;P<3;++P)M[0][P]=Math.max(M[0][P],this.clipBounds[0][P]),M[1][P]=Math.min(M[1][P],this.clipBounds[1][P]);this._model=[].slice.call(w),this._view=[].slice.call(y),this._projection=[].slice.call(T),this._resolution=[x.drawingBufferWidth,x.drawingBufferHeight];var L={model:w,view:y,projection:T,clipBounds:M,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},I=this.pickShader;I.bind(),I.uniforms=L,this.triangleCount>0&&(this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},i.pick=function(m){if(!m||m.id!==this.pickId)return null;var x=m.value[0]+256*m.value[1]+65536*m.value[2],w=this.cells[x],y=this.positions[w[1]].slice(0,3),T={position:y,dataCoordinate:y,index:Math.floor(w[1]/48)};return this.traceType==="cone"?T.index=Math.floor(w[1]/48):this.traceType==="streamtube"&&(T.intensity=this.intensity[w[1]],T.velocity=this.vectors[w[1]].slice(0,3),T.divergence=this.vectors[w[1]][3],T.index=x),T},i.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function d(m,x){var w=r(m,x.meshShader.vertex,x.meshShader.fragment,null,x.meshShader.attributes);return w.attributes.position.location=0,w.attributes.color.location=2,w.attributes.uv.location=3,w.attributes.vector.location=4,w}function g(m,x){var w=r(m,x.pickShader.vertex,x.pickShader.fragment,null,x.pickShader.attributes);return w.attributes.position.location=0,w.attributes.id.location=1,w.attributes.vector.location=4,w}function b(m,x,w){var y=w.shaders;arguments.length===1&&(x=m,m=x.gl);var T=d(m,y),M=g(m,y),P=c(m,n(new Uint8Array([255,255,255,255]),[1,1,4]));P.generateMipmap(),P.minFilter=m.LINEAR_MIPMAP_LINEAR,P.magFilter=m.LINEAR;var L=a(m),I=a(m),E=a(m),k=a(m),C=a(m),D=u(m,[{buffer:L,type:m.FLOAT,size:4},{buffer:C,type:m.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:E,type:m.FLOAT,size:4},{buffer:k,type:m.FLOAT,size:2},{buffer:I,type:m.FLOAT,size:4}]),F=new h(m,P,T,M,L,I,C,E,k,D,w.traceType||"cone");return F.update(x),F}v.exports=b},{colormap:131,"gl-buffer":259,"gl-mat4/invert":293,"gl-mat4/multiply":295,"gl-shader":335,"gl-texture2d":353,"gl-vao":358,ndarray:495}],262:[function(e,v,S){var r=e("glslify"),a=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),u=r([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),c=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),t=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);S.meshShader={vertex:a,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},S.pickShader={vertex:c,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:263}],263:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],264:[function(e,v,S){v.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],265:[function(e,v,S){var r=e("./1.0/numbers");v.exports=function(u){return r[u]}},{"./1.0/numbers":264}],266:[function(e,v,S){v.exports=h;var r=e("gl-buffer"),a=e("gl-vao"),u=e("./shaders/index"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(i,s,p,d){this.gl=i,this.shader=d,this.buffer=s,this.vao=p,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var f=t.prototype;f.isOpaque=function(){return!this.hasAlpha},f.isTransparent=function(){return this.hasAlpha},f.drawTransparent=f.draw=function(i){var s=this.gl,p=this.shader.uniforms;this.shader.bind();var d=p.view=i.view||c,g=p.projection=i.projection||c;p.model=i.model||c,p.clipBounds=this.clipBounds,p.opacity=this.opacity;var b=d[12],m=d[13],x=d[14],w=d[15],y=i._ortho||!1,T=y?2:1,M=T*this.pixelRatio*(g[3]*b+g[7]*m+g[11]*x+g[15]*w)/s.drawingBufferHeight;this.vao.bind();for(var P=0;P<3;++P)s.lineWidth(this.lineWidth[P]*this.pixelRatio),p.capSize=this.capSize[P]*M,this.lineCount[P]&&s.drawArrays(s.LINES,this.lineOffset[P],this.lineCount[P]);this.vao.unbind()};function n(i,s){for(var p=0;p<3;++p)i[0][p]=Math.min(i[0][p],s[p]),i[1][p]=Math.max(i[1][p],s[p])}var o=function(){for(var i=new Array(3),s=0;s<3;++s){for(var p=[],d=1;d<=2;++d)for(var g=-1;g<=1;g+=2){var b=(d+s)%3,m=[0,0,0];m[b]=g,p.push(m)}i[s]=p}return i}();function l(i,s,p,d){for(var g=o[d],b=0;b<g.length;++b){var m=g[b];i.push(s[0],s[1],s[2],p[0],p[1],p[2],p[3],m[0],m[1],m[2])}return g.length}f.update=function(i){i=i||{},"lineWidth"in i&&(this.lineWidth=i.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in i&&(this.capSize=i.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in i&&(this.opacity=+i.opacity,this.opacity<1&&(this.hasAlpha=!0));var s=i.color||[[0,0,0],[0,0,0],[0,0,0]],p=i.position,d=i.error;if(Array.isArray(s[0])||(s=[s,s,s]),p&&d){var g=[],b=p.length,m=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var x=0;x<3;++x){this.lineOffset[x]=m;e:for(var w=0;w<b;++w){for(var y=p[w],T=0;T<3;++T)if(isNaN(y[T])||!isFinite(y[T]))continue e;var M=d[w],P=s[x];if(Array.isArray(P[0])&&(P=s[w]),P.length===3?P=[P[0],P[1],P[2],1]:P.length===4&&(P=[P[0],P[1],P[2],P[3]],!this.hasAlpha&&P[3]<1&&(this.hasAlpha=!0)),!(isNaN(M[0][x])||isNaN(M[1][x]))){if(M[0][x]<0){var L=y.slice();L[x]+=M[0][x],g.push(y[0],y[1],y[2],P[0],P[1],P[2],P[3],0,0,0,L[0],L[1],L[2],P[0],P[1],P[2],P[3],0,0,0),n(this.bounds,L),m+=2+l(g,L,P,x)}if(M[1][x]>0){var L=y.slice();L[x]+=M[1][x],g.push(y[0],y[1],y[2],P[0],P[1],P[2],P[3],0,0,0,L[0],L[1],L[2],P[0],P[1],P[2],P[3],0,0,0),n(this.bounds,L),m+=2+l(g,L,P,x)}}}this.lineCount[x]=m-this.lineOffset[x]}this.buffer.update(g)}},f.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function h(i){var s=i.gl,p=r(s),d=a(s,[{buffer:p,type:s.FLOAT,size:3,offset:0,stride:40},{buffer:p,type:s.FLOAT,size:4,offset:12,stride:40},{buffer:p,type:s.FLOAT,size:3,offset:28,stride:40}]),g=u(s);g.attributes.position.location=0,g.attributes.color.location=1,g.attributes.offset.location=2;var b=new t(s,p,d,g);return b.update(i),b}},{"./shaders/index":268,"gl-buffer":259,"gl-vao":358}],267:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],268:[function(e,v,S){var r=e("glslify"),a=e("gl-shader"),u=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),c=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);v.exports=function(t){return a(t,u,c,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":335,glslify:267}],269:[function(e,v,S){var r=e("gl-texture2d");v.exports=m;var a=null,u,c,t,f;function n(x){var w=x.getParameter(x.FRAMEBUFFER_BINDING),y=x.getParameter(x.RENDERBUFFER_BINDING),T=x.getParameter(x.TEXTURE_BINDING_2D);return[w,y,T]}function o(x,w){x.bindFramebuffer(x.FRAMEBUFFER,w[0]),x.bindRenderbuffer(x.RENDERBUFFER,w[1]),x.bindTexture(x.TEXTURE_2D,w[2])}function l(x,w){var y=x.getParameter(w.MAX_COLOR_ATTACHMENTS_WEBGL);a=new Array(y+1);for(var T=0;T<=y;++T){for(var M=new Array(y),P=0;P<T;++P)M[P]=x.COLOR_ATTACHMENT0+P;for(var P=T;P<y;++P)M[P]=x.NONE;a[T]=M}}function h(x){switch(x){case u:throw new Error("gl-fbo: Framebuffer unsupported");case c:throw new Error("gl-fbo: Framebuffer incomplete attachment");case t:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case f:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function i(x,w,y,T,M,P){if(!T)return null;var L=r(x,w,y,M,T);return L.magFilter=x.NEAREST,L.minFilter=x.NEAREST,L.mipSamples=1,L.bind(),x.framebufferTexture2D(x.FRAMEBUFFER,P,x.TEXTURE_2D,L.handle,0),L}function s(x,w,y,T,M){var P=x.createRenderbuffer();return x.bindRenderbuffer(x.RENDERBUFFER,P),x.renderbufferStorage(x.RENDERBUFFER,T,w,y),x.framebufferRenderbuffer(x.FRAMEBUFFER,M,x.RENDERBUFFER,P),P}function p(x){var w=n(x.gl),y=x.gl,T=x.handle=y.createFramebuffer(),M=x._shape[0],P=x._shape[1],L=x.color.length,I=x._ext,E=x._useStencil,k=x._useDepth,C=x._colorType;y.bindFramebuffer(y.FRAMEBUFFER,T);for(var D=0;D<L;++D)x.color[D]=i(y,M,P,C,y.RGBA,y.COLOR_ATTACHMENT0+D);L===0?(x._color_rb=s(y,M,P,y.RGBA4,y.COLOR_ATTACHMENT0),I&&I.drawBuffersWEBGL(a[0])):L>1&&I.drawBuffersWEBGL(a[L]);var F=y.getExtension("WEBGL_depth_texture");F?E?x.depth=i(y,M,P,F.UNSIGNED_INT_24_8_WEBGL,y.DEPTH_STENCIL,y.DEPTH_STENCIL_ATTACHMENT):k&&(x.depth=i(y,M,P,y.UNSIGNED_SHORT,y.DEPTH_COMPONENT,y.DEPTH_ATTACHMENT)):k&&E?x._depth_rb=s(y,M,P,y.DEPTH_STENCIL,y.DEPTH_STENCIL_ATTACHMENT):k?x._depth_rb=s(y,M,P,y.DEPTH_COMPONENT16,y.DEPTH_ATTACHMENT):E&&(x._depth_rb=s(y,M,P,y.STENCIL_INDEX,y.STENCIL_ATTACHMENT));var N=y.checkFramebufferStatus(y.FRAMEBUFFER);if(N!==y.FRAMEBUFFER_COMPLETE){x._destroyed=!0,y.bindFramebuffer(y.FRAMEBUFFER,null),y.deleteFramebuffer(x.handle),x.handle=null,x.depth&&(x.depth.dispose(),x.depth=null),x._depth_rb&&(y.deleteRenderbuffer(x._depth_rb),x._depth_rb=null);for(var D=0;D<x.color.length;++D)x.color[D].dispose(),x.color[D]=null;x._color_rb&&(y.deleteRenderbuffer(x._color_rb),x._color_rb=null),o(y,w),h(N)}o(y,w)}function d(x,w,y,T,M,P,L,I){this.gl=x,this._shape=[w|0,y|0],this._destroyed=!1,this._ext=I,this.color=new Array(M);for(var E=0;E<M;++E)this.color[E]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=T,this._useDepth=P,this._useStencil=L;var k=this,C=[w|0,y|0];Object.defineProperties(C,{0:{get:function(){return k._shape[0]},set:function(D){return k.width=D}},1:{get:function(){return k._shape[1]},set:function(D){return k.height=D}}}),this._shapeVector=C,p(this)}var g=d.prototype;function b(x,w,y){if(x._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(x._shape[0]===w&&x._shape[1]===y)){var T=x.gl,M=T.getParameter(T.MAX_RENDERBUFFER_SIZE);if(w<0||w>M||y<0||y>M)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");x._shape[0]=w,x._shape[1]=y;for(var P=n(T),L=0;L<x.color.length;++L)x.color[L].shape=x._shape;x._color_rb&&(T.bindRenderbuffer(T.RENDERBUFFER,x._color_rb),T.renderbufferStorage(T.RENDERBUFFER,T.RGBA4,x._shape[0],x._shape[1])),x.depth&&(x.depth.shape=x._shape),x._depth_rb&&(T.bindRenderbuffer(T.RENDERBUFFER,x._depth_rb),x._useDepth&&x._useStencil?T.renderbufferStorage(T.RENDERBUFFER,T.DEPTH_STENCIL,x._shape[0],x._shape[1]):x._useDepth?T.renderbufferStorage(T.RENDERBUFFER,T.DEPTH_COMPONENT16,x._shape[0],x._shape[1]):x._useStencil&&T.renderbufferStorage(T.RENDERBUFFER,T.STENCIL_INDEX,x._shape[0],x._shape[1])),T.bindFramebuffer(T.FRAMEBUFFER,x.handle);var I=T.checkFramebufferStatus(T.FRAMEBUFFER);I!==T.FRAMEBUFFER_COMPLETE&&(x.dispose(),o(T,P),h(I)),o(T,P)}}Object.defineProperties(g,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(x){if(Array.isArray(x)||(x=[x|0,x|0]),x.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var w=x[0]|0,y=x[1]|0;return b(this,w,y),[w,y]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(x){return x=x|0,b(this,x,this._shape[1]),x},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(x){return x=x|0,b(this,this._shape[0],x),x},enumerable:!1}}),g.bind=function(){if(!this._destroyed){var x=this.gl;x.bindFramebuffer(x.FRAMEBUFFER,this.handle),x.viewport(0,0,this._shape[0],this._shape[1])}},g.dispose=function(){if(!this._destroyed){this._destroyed=!0;var x=this.gl;x.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(x.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var w=0;w<this.color.length;++w)this.color[w].dispose(),this.color[w]=null;this._color_rb&&(x.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function m(x,w,y,T){u||(u=x.FRAMEBUFFER_UNSUPPORTED,c=x.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,t=x.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,f=x.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var M=x.getExtension("WEBGL_draw_buffers");if(!a&&M&&l(x,M),Array.isArray(w)&&(T=y,y=w[1]|0,w=w[0]|0),typeof w!="number")throw new Error("gl-fbo: Missing shape parameter");var P=x.getParameter(x.MAX_RENDERBUFFER_SIZE);if(w<0||w>P||y<0||y>P)throw new Error("gl-fbo: Parameters are too large for FBO");T=T||{};var L=1;if("color"in T){if(L=Math.max(T.color|0,0),L<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(L>1)if(M){if(L>x.getParameter(M.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+L+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var I=x.UNSIGNED_BYTE,E=x.getExtension("OES_texture_float");if(T.float&&L>0){if(!E)throw new Error("gl-fbo: Context does not support floating point textures");I=x.FLOAT}else T.preferFloat&&L>0&&E&&(I=x.FLOAT);var k=!0;"depth"in T&&(k=!!T.depth);var C=!1;return"stencil"in T&&(C=!!T.stencil),new d(x,w,y,I,L,k,C,M)}},{"gl-texture2d":353}],270:[function(e,v,S){var r=e("sprintf-js").sprintf,a=e("gl-constants/lookup"),u=e("glsl-shader-name"),c=e("add-line-numbers");v.exports=t;function t(f,n,o){var l=u(n)||"of unknown name (see npm glsl-shader-name)",h="unknown type";o!==void 0&&(h=o===a.FRAGMENT_SHADER?"fragment":"vertex");for(var i=r(`Error compiling %s shader %s:
`,h,l),s=r("%s%s",i,f),p=f.split(`
`),d={},g=0;g<p.length;g++){var b=p[g];if(!(b===""||b==="\0")){var m=parseInt(b.split(":")[2]);if(isNaN(m))throw new Error(r("Could not parse error: %s",b));d[m]=b}}for(var x=c(n).split(`
`),g=0;g<x.length;g++)if(!(!d[g+3]&&!d[g+2]&&!d[g+1])){var w=x[g];if(i+=w+`
`,d[g+1]){var y=d[g+1];y=y.substr(y.split(":",3).join(":").length+1).trim(),i+=r(`^^^ %s

`,y)}}return{long:i.trim(),short:s.trim()}}},{"add-line-numbers":66,"gl-constants/lookup":265,"glsl-shader-name":431,"sprintf-js":567}],271:[function(e,v,S){v.exports=h;var r=e("binary-search-bounds"),a=e("iota-array"),u=e("typedarray-pool"),c=e("gl-shader"),t=e("gl-buffer"),f=e("./lib/shaders");function n(i,s,p,d,g,b,m){this.plot=i,this.shader=s,this.pickShader=p,this.positionBuffer=d,this.weightBuffer=g,this.colorBuffer=b,this.idBuffer=m,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var o=n.prototype,l=[0,0,1,0,0,1,1,0,1,1,0,1];o.draw=function(){var i=[1,0,0,0,1,0,0,0,1];return function(){var s=this.plot,p=this.shader,d=this.bounds,g=this.numVertices;if(!(g<=0)){var b=s.gl,m=s.dataBox,x=d[2]-d[0],w=d[3]-d[1],y=m[2]-m[0],T=m[3]-m[1];i[0]=2*x/y,i[4]=2*w/T,i[6]=2*(d[0]-m[0])/y-1,i[7]=2*(d[1]-m[1])/T-1,p.bind();var M=p.uniforms;M.viewTransform=i,M.shape=this.shape;var P=p.attributes;this.positionBuffer.bind(),P.position.pointer(),this.weightBuffer.bind(),P.weight.pointer(b.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),P.color.pointer(b.UNSIGNED_BYTE,!0),b.drawArrays(b.TRIANGLES,0,g)}}}(),o.drawPick=function(){var i=[1,0,0,0,1,0,0,0,1],s=[0,0,0,0];return function(p){var d=this.plot,g=this.pickShader,b=this.bounds,m=this.numVertices;if(!(m<=0)){var x=d.gl,w=d.dataBox,y=b[2]-b[0],T=b[3]-b[1],M=w[2]-w[0],P=w[3]-w[1];i[0]=2*y/M,i[4]=2*T/P,i[6]=2*(b[0]-w[0])/M-1,i[7]=2*(b[1]-w[1])/P-1;for(var L=0;L<4;++L)s[L]=p>>L*8&255;this.pickOffset=p,g.bind();var I=g.uniforms;I.viewTransform=i,I.pickOffset=s,I.shape=this.shape;var E=g.attributes;return this.positionBuffer.bind(),E.position.pointer(),this.weightBuffer.bind(),E.weight.pointer(x.UNSIGNED_BYTE,!1),this.idBuffer.bind(),E.pickId.pointer(x.UNSIGNED_BYTE,!1),x.drawArrays(x.TRIANGLES,0,m),p+this.shape[0]*this.shape[1]}}}(),o.pick=function(i,s,p){var d=this.pickOffset,g=this.shape[0]*this.shape[1];if(p<d||p>=d+g)return null;var b=p-d,m=this.xData,x=this.yData;return{object:this,pointId:b,dataCoord:[m[b%this.shape[0]],x[b/this.shape[0]|0]]}},o.update=function(i){i=i||{};var s=i.shape||[0,0],p=i.x||a(s[0]),d=i.y||a(s[1]),g=i.z||new Float32Array(s[0]*s[1]),b=i.zsmooth!==!1;this.xData=p,this.yData=d;var m=i.colorLevels||[0],x=i.colorValues||[0,0,0,1],w=m.length,y=this.bounds,T,M,P,L;b?(T=y[0]=p[0],M=y[1]=d[0],P=y[2]=p[p.length-1],L=y[3]=d[d.length-1]):(T=y[0]=p[0]+(p[1]-p[0])/2,M=y[1]=d[0]+(d[1]-d[0])/2,P=y[2]=p[p.length-1]+(p[p.length-1]-p[p.length-2])/2,L=y[3]=d[d.length-1]+(d[d.length-1]-d[d.length-2])/2);var I=1/(P-T),E=1/(L-M),k=s[0],C=s[1];this.shape=[k,C];var D=(b?(k-1)*(C-1):k*C)*(l.length>>>1);this.numVertices=D;for(var F=u.mallocUint8(D*4),N=u.mallocFloat32(D*2),G=u.mallocUint8(D*2),U=u.mallocUint32(D),X=0,z=b?k-1:k,B=b?C-1:C,j=0;j<B;++j){var V,K;b?(V=E*(d[j]-M),K=E*(d[j+1]-M)):(V=j<C-1?E*(d[j]-(d[j+1]-d[j])/2-M):E*(d[j]-(d[j]-d[j-1])/2-M),K=j<C-1?E*(d[j]+(d[j+1]-d[j])/2-M):E*(d[j]+(d[j]-d[j-1])/2-M));for(var te=0;te<z;++te){var $,ie;b?($=I*(p[te]-T),ie=I*(p[te+1]-T)):($=te<k-1?I*(p[te]-(p[te+1]-p[te])/2-T):I*(p[te]-(p[te]-p[te-1])/2-T),ie=te<k-1?I*(p[te]+(p[te+1]-p[te])/2-T):I*(p[te]+(p[te]-p[te-1])/2-T));for(var se=0;se<l.length;se+=2){var Q=l[se],H=l[se+1],oe=b?(j+H)*k+(te+Q):j*k+te,re=g[oe],ee=r.le(m,re),ae,fe,de,pe;if(ee<0)ae=x[0],fe=x[1],de=x[2],pe=x[3];else if(ee===w-1)ae=x[4*w-4],fe=x[4*w-3],de=x[4*w-2],pe=x[4*w-1];else{var W=(re-m[ee])/(m[ee+1]-m[ee]),ue=1-W,me=4*ee,be=4*(ee+1);ae=ue*x[me]+W*x[be],fe=ue*x[me+1]+W*x[be+1],de=ue*x[me+2]+W*x[be+2],pe=ue*x[me+3]+W*x[be+3]}F[4*X]=255*ae,F[4*X+1]=255*fe,F[4*X+2]=255*de,F[4*X+3]=255*pe,N[2*X]=$*.5+ie*.5,N[2*X+1]=V*.5+K*.5,G[2*X]=Q,G[2*X+1]=H,U[X]=j*k+te,X+=1}}}this.positionBuffer.update(N),this.weightBuffer.update(G),this.colorBuffer.update(F),this.idBuffer.update(U),u.free(N),u.free(F),u.free(G),u.free(U)},o.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function h(i,s){var p=i.gl,d=c(p,f.vertex,f.fragment),g=c(p,f.pickVertex,f.pickFragment),b=t(p),m=t(p),x=t(p),w=t(p),y=new n(i,d,g,b,m,x,w);return y.update(s),i.addObject(y),y}},{"./lib/shaders":272,"binary-search-bounds":96,"gl-buffer":259,"gl-shader":335,"iota-array":463,"typedarray-pool":595}],272:[function(e,v,S){var r=e("glslify");v.exports={fragment:r([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:r([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:273}],273:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],274:[function(e,v,S){var r=e("glslify"),a=e("gl-shader"),u=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),t=r([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),f=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];S.createShader=function(n){return a(n,u,c,null,f)},S.createPickShader=function(n){return a(n,u,t,null,f)}},{"gl-shader":335,glslify:276}],275:[function(e,v,S){v.exports=x;var r=e("gl-buffer"),a=e("gl-vao"),u=e("gl-texture2d"),c=new Uint8Array(4),t=new Float32Array(c.buffer);function f(w,y,T,M){return c[0]=M,c[1]=T,c[2]=y,c[3]=w,t[0]}var n=e("binary-search-bounds"),o=e("ndarray"),l=e("./lib/shaders"),h=l.createShader,i=l.createPickShader,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(w,y){for(var T=0,M=0;M<3;++M){var P=w[M]-y[M];T+=P*P}return Math.sqrt(T)}function d(w){for(var y=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],T=0;T<3;++T)y[0][T]=Math.max(w[0][T],y[0][T]),y[1][T]=Math.min(w[1][T],y[1][T]);return y}function g(w,y,T,M){this.arcLength=w,this.position=y,this.index=T,this.dataCoordinate=M}function b(w,y,T,M,P,L){this.gl=w,this.shader=y,this.pickShader=T,this.buffer=M,this.vao=P,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=L,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var m=b.prototype;m.isTransparent=function(){return this.hasAlpha},m.isOpaque=function(){return!this.hasAlpha},m.pickSlots=1,m.setPickBase=function(w){this.pickId=w},m.drawTransparent=m.draw=function(w){if(!!this.vertexCount){var y=this.gl,T=this.shader,M=this.vao;T.bind(),T.uniforms={model:w.model||s,view:w.view||s,projection:w.projection||s,clipBounds:d(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[y.drawingBufferWidth,y.drawingBufferHeight],pixelRatio:this.pixelRatio},M.bind(),M.draw(y.TRIANGLE_STRIP,this.vertexCount),M.unbind()}},m.drawPick=function(w){if(!!this.vertexCount){var y=this.gl,T=this.pickShader,M=this.vao;T.bind(),T.uniforms={model:w.model||s,view:w.view||s,projection:w.projection||s,pickId:this.pickId,clipBounds:d(this.clipBounds),screenShape:[y.drawingBufferWidth,y.drawingBufferHeight],pixelRatio:this.pixelRatio},M.bind(),M.draw(y.TRIANGLE_STRIP,this.vertexCount),M.unbind()}},m.update=function(w){var y,T;this.dirty=!0;var M=!!w.connectGaps;"dashScale"in w&&(this.dashScale=w.dashScale),this.hasAlpha=!1,"opacity"in w&&(this.opacity=+w.opacity,this.opacity<1&&(this.hasAlpha=!0));var P=[],L=[],I=[],E=0,k=0,C=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],D=w.position||w.positions;if(D){var F=w.color||w.colors||[0,0,0,1],N=w.lineWidth||1,G=!1;e:for(y=1;y<D.length;++y){var U=D[y-1],X=D[y];for(L.push(E),I.push(U.slice()),T=0;T<3;++T){if(isNaN(U[T])||isNaN(X[T])||!isFinite(U[T])||!isFinite(X[T])){if(!M&&P.length>0){for(var z=0;z<24;++z)P.push(P[P.length-12]);k+=2,G=!0}continue e}C[0][T]=Math.min(C[0][T],U[T],X[T]),C[1][T]=Math.max(C[1][T],U[T],X[T])}var B,j;Array.isArray(F[0])?(B=F.length>y-1?F[y-1]:F.length>0?F[F.length-1]:[0,0,0,1],j=F.length>y?F[y]:F.length>0?F[F.length-1]:[0,0,0,1]):B=j=F,B.length===3&&(B=[B[0],B[1],B[2],1]),j.length===3&&(j=[j[0],j[1],j[2],1]),!this.hasAlpha&&B[3]<1&&(this.hasAlpha=!0);var V;Array.isArray(N)?V=N.length>y-1?N[y-1]:N.length>0?N[N.length-1]:[0,0,0,1]:V=N;var K=E;if(E+=p(U,X),G){for(T=0;T<2;++T)P.push(U[0],U[1],U[2],X[0],X[1],X[2],K,V,B[0],B[1],B[2],B[3]);k+=2,G=!1}P.push(U[0],U[1],U[2],X[0],X[1],X[2],K,V,B[0],B[1],B[2],B[3],U[0],U[1],U[2],X[0],X[1],X[2],K,-V,B[0],B[1],B[2],B[3],X[0],X[1],X[2],U[0],U[1],U[2],E,-V,j[0],j[1],j[2],j[3],X[0],X[1],X[2],U[0],U[1],U[2],E,V,j[0],j[1],j[2],j[3]),k+=4}}if(this.buffer.update(P),L.push(E),I.push(D[D.length-1].slice()),this.bounds=C,this.vertexCount=k,this.points=I,this.arcLength=L,"dashes"in w){var te=w.dashes,$=te.slice();for($.unshift(0),y=1;y<$.length;++y)$[y]=$[y-1]+$[y];var ie=o(new Array(256*4),[256,1,4]);for(y=0;y<256;++y){for(T=0;T<4;++T)ie.set(y,0,T,0);n.le($,$[$.length-1]*y/255)&1?ie.set(y,0,0,0):ie.set(y,0,0,255)}this.texture.setPixels(ie)}},m.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},m.pick=function(w){if(!w||w.id!==this.pickId)return null;var y=f(w.value[0],w.value[1],w.value[2],0),T=n.le(this.arcLength,y);if(T<0)return null;if(T===this.arcLength.length-1)return new g(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),T);for(var M=this.points[T],P=this.points[Math.min(T+1,this.points.length-1)],L=(y-this.arcLength[T])/(this.arcLength[T+1]-this.arcLength[T]),I=1-L,E=[0,0,0],k=0;k<3;++k)E[k]=I*M[k]+L*P[k];var C=Math.min(L<.5?T:T+1,this.points.length-1);return new g(y,E,C,this.points[C])};function x(w){var y=w.gl||w.scene&&w.scene.gl,T=h(y);T.attributes.position.location=0,T.attributes.nextPosition.location=1,T.attributes.arcLength.location=2,T.attributes.lineWidth.location=3,T.attributes.color.location=4;var M=i(y);M.attributes.position.location=0,M.attributes.nextPosition.location=1,M.attributes.arcLength.location=2,M.attributes.lineWidth.location=3,M.attributes.color.location=4;for(var P=r(y),L=a(y,[{buffer:P,size:3,offset:0,stride:48},{buffer:P,size:3,offset:12,stride:48},{buffer:P,size:1,offset:24,stride:48},{buffer:P,size:1,offset:28,stride:48},{buffer:P,size:4,offset:32,stride:48}]),I=o(new Array(256*4),[256,1,4]),E=0;E<256*4;++E)I.data[E]=255;var k=u(y,I);k.wrap=y.REPEAT;var C=new b(y,T,M,P,L,k);return C.update(w),C}},{"./lib/shaders":274,"binary-search-bounds":96,"gl-buffer":259,"gl-texture2d":353,"gl-vao":358,ndarray:495}],276:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],277:[function(e,v,S){v.exports=r;function r(a,u){var c=u[0],t=u[1],f=u[2],n=u[3],o=u[4],l=u[5],h=u[6],i=u[7],s=u[8],p=u[9],d=u[10],g=u[11],b=u[12],m=u[13],x=u[14],w=u[15];return a[0]=l*(d*w-g*x)-p*(h*w-i*x)+m*(h*g-i*d),a[1]=-(t*(d*w-g*x)-p*(f*w-n*x)+m*(f*g-n*d)),a[2]=t*(h*w-i*x)-l*(f*w-n*x)+m*(f*i-n*h),a[3]=-(t*(h*g-i*d)-l*(f*g-n*d)+p*(f*i-n*h)),a[4]=-(o*(d*w-g*x)-s*(h*w-i*x)+b*(h*g-i*d)),a[5]=c*(d*w-g*x)-s*(f*w-n*x)+b*(f*g-n*d),a[6]=-(c*(h*w-i*x)-o*(f*w-n*x)+b*(f*i-n*h)),a[7]=c*(h*g-i*d)-o*(f*g-n*d)+s*(f*i-n*h),a[8]=o*(p*w-g*m)-s*(l*w-i*m)+b*(l*g-i*p),a[9]=-(c*(p*w-g*m)-s*(t*w-n*m)+b*(t*g-n*p)),a[10]=c*(l*w-i*m)-o*(t*w-n*m)+b*(t*i-n*l),a[11]=-(c*(l*g-i*p)-o*(t*g-n*p)+s*(t*i-n*l)),a[12]=-(o*(p*x-d*m)-s*(l*x-h*m)+b*(l*d-h*p)),a[13]=c*(p*x-d*m)-s*(t*x-f*m)+b*(t*d-f*p),a[14]=-(c*(l*x-h*m)-o*(t*x-f*m)+b*(t*h-f*l)),a[15]=c*(l*d-h*p)-o*(t*d-f*p)+s*(t*h-f*l),a}},{}],278:[function(e,v,S){v.exports=r;function r(a){var u=new Float32Array(16);return u[0]=a[0],u[1]=a[1],u[2]=a[2],u[3]=a[3],u[4]=a[4],u[5]=a[5],u[6]=a[6],u[7]=a[7],u[8]=a[8],u[9]=a[9],u[10]=a[10],u[11]=a[11],u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15],u}},{}],279:[function(e,v,S){v.exports=r;function r(a,u){return a[0]=u[0],a[1]=u[1],a[2]=u[2],a[3]=u[3],a[4]=u[4],a[5]=u[5],a[6]=u[6],a[7]=u[7],a[8]=u[8],a[9]=u[9],a[10]=u[10],a[11]=u[11],a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15],a}},{}],280:[function(e,v,S){v.exports=r;function r(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],281:[function(e,v,S){v.exports=r;function r(a){var u=a[0],c=a[1],t=a[2],f=a[3],n=a[4],o=a[5],l=a[6],h=a[7],i=a[8],s=a[9],p=a[10],d=a[11],g=a[12],b=a[13],m=a[14],x=a[15],w=u*o-c*n,y=u*l-t*n,T=u*h-f*n,M=c*l-t*o,P=c*h-f*o,L=t*h-f*l,I=i*b-s*g,E=i*m-p*g,k=i*x-d*g,C=s*m-p*b,D=s*x-d*b,F=p*x-d*m;return w*F-y*D+T*C+M*k-P*E+L*I}},{}],282:[function(e,v,S){v.exports=r;function r(a,u){var c=u[0],t=u[1],f=u[2],n=u[3],o=c+c,l=t+t,h=f+f,i=c*o,s=t*o,p=t*l,d=f*o,g=f*l,b=f*h,m=n*o,x=n*l,w=n*h;return a[0]=1-p-b,a[1]=s+w,a[2]=d-x,a[3]=0,a[4]=s-w,a[5]=1-i-b,a[6]=g+m,a[7]=0,a[8]=d+x,a[9]=g-m,a[10]=1-i-p,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],283:[function(e,v,S){v.exports=r;function r(a,u,c){var t,f,n,o=c[0],l=c[1],h=c[2],i=Math.sqrt(o*o+l*l+h*h);return Math.abs(i)<1e-6?null:(i=1/i,o*=i,l*=i,h*=i,t=Math.sin(u),f=Math.cos(u),n=1-f,a[0]=o*o*n+f,a[1]=l*o*n+h*t,a[2]=h*o*n-l*t,a[3]=0,a[4]=o*l*n-h*t,a[5]=l*l*n+f,a[6]=h*l*n+o*t,a[7]=0,a[8]=o*h*n+l*t,a[9]=l*h*n-o*t,a[10]=h*h*n+f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}},{}],284:[function(e,v,S){v.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2],o=u[3],l=t+t,h=f+f,i=n+n,s=t*l,p=t*h,d=t*i,g=f*h,b=f*i,m=n*i,x=o*l,w=o*h,y=o*i;return a[0]=1-(g+m),a[1]=p+y,a[2]=d-w,a[3]=0,a[4]=p-y,a[5]=1-(s+m),a[6]=b+x,a[7]=0,a[8]=d+w,a[9]=b-x,a[10]=1-(s+g),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a}},{}],285:[function(e,v,S){v.exports=r;function r(a,u){return a[0]=u[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=u[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],286:[function(e,v,S){v.exports=r;function r(a,u){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=u[0],a[13]=u[1],a[14]=u[2],a[15]=1,a}},{}],287:[function(e,v,S){v.exports=r;function r(a,u){var c=Math.sin(u),t=Math.cos(u);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=t,a[6]=c,a[7]=0,a[8]=0,a[9]=-c,a[10]=t,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],288:[function(e,v,S){v.exports=r;function r(a,u){var c=Math.sin(u),t=Math.cos(u);return a[0]=t,a[1]=0,a[2]=-c,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=c,a[9]=0,a[10]=t,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],289:[function(e,v,S){v.exports=r;function r(a,u){var c=Math.sin(u),t=Math.cos(u);return a[0]=t,a[1]=c,a[2]=0,a[3]=0,a[4]=-c,a[5]=t,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],290:[function(e,v,S){v.exports=r;function r(a,u,c,t,f,n,o){var l=1/(c-u),h=1/(f-t),i=1/(n-o);return a[0]=n*2*l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n*2*h,a[6]=0,a[7]=0,a[8]=(c+u)*l,a[9]=(f+t)*h,a[10]=(o+n)*i,a[11]=-1,a[12]=0,a[13]=0,a[14]=o*n*2*i,a[15]=0,a}},{}],291:[function(e,v,S){v.exports=r;function r(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],292:[function(e,v,S){v.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":277,"./clone":278,"./copy":279,"./create":280,"./determinant":281,"./fromQuat":282,"./fromRotation":283,"./fromRotationTranslation":284,"./fromScaling":285,"./fromTranslation":286,"./fromXRotation":287,"./fromYRotation":288,"./fromZRotation":289,"./frustum":290,"./identity":291,"./invert":293,"./lookAt":294,"./multiply":295,"./ortho":296,"./perspective":297,"./perspectiveFromFieldOfView":298,"./rotate":299,"./rotateX":300,"./rotateY":301,"./rotateZ":302,"./scale":303,"./str":304,"./translate":305,"./transpose":306}],293:[function(e,v,S){v.exports=r;function r(a,u){var c=u[0],t=u[1],f=u[2],n=u[3],o=u[4],l=u[5],h=u[6],i=u[7],s=u[8],p=u[9],d=u[10],g=u[11],b=u[12],m=u[13],x=u[14],w=u[15],y=c*l-t*o,T=c*h-f*o,M=c*i-n*o,P=t*h-f*l,L=t*i-n*l,I=f*i-n*h,E=s*m-p*b,k=s*x-d*b,C=s*w-g*b,D=p*x-d*m,F=p*w-g*m,N=d*w-g*x,G=y*N-T*F+M*D+P*C-L*k+I*E;return G?(G=1/G,a[0]=(l*N-h*F+i*D)*G,a[1]=(f*F-t*N-n*D)*G,a[2]=(m*I-x*L+w*P)*G,a[3]=(d*L-p*I-g*P)*G,a[4]=(h*C-o*N-i*k)*G,a[5]=(c*N-f*C+n*k)*G,a[6]=(x*M-b*I-w*T)*G,a[7]=(s*I-d*M+g*T)*G,a[8]=(o*F-l*C+i*E)*G,a[9]=(t*C-c*F-n*E)*G,a[10]=(b*L-m*M+w*y)*G,a[11]=(p*M-s*L-g*y)*G,a[12]=(l*k-o*D-h*E)*G,a[13]=(c*D-t*k+f*E)*G,a[14]=(m*T-b*P-x*y)*G,a[15]=(s*P-p*T+d*y)*G,a):null}},{}],294:[function(e,v,S){var r=e("./identity");v.exports=a;function a(u,c,t,f){var n,o,l,h,i,s,p,d,g,b,m=c[0],x=c[1],w=c[2],y=f[0],T=f[1],M=f[2],P=t[0],L=t[1],I=t[2];return Math.abs(m-P)<1e-6&&Math.abs(x-L)<1e-6&&Math.abs(w-I)<1e-6?r(u):(p=m-P,d=x-L,g=w-I,b=1/Math.sqrt(p*p+d*d+g*g),p*=b,d*=b,g*=b,n=T*g-M*d,o=M*p-y*g,l=y*d-T*p,b=Math.sqrt(n*n+o*o+l*l),b?(b=1/b,n*=b,o*=b,l*=b):(n=0,o=0,l=0),h=d*l-g*o,i=g*n-p*l,s=p*o-d*n,b=Math.sqrt(h*h+i*i+s*s),b?(b=1/b,h*=b,i*=b,s*=b):(h=0,i=0,s=0),u[0]=n,u[1]=h,u[2]=p,u[3]=0,u[4]=o,u[5]=i,u[6]=d,u[7]=0,u[8]=l,u[9]=s,u[10]=g,u[11]=0,u[12]=-(n*m+o*x+l*w),u[13]=-(h*m+i*x+s*w),u[14]=-(p*m+d*x+g*w),u[15]=1,u)}},{"./identity":291}],295:[function(e,v,S){v.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2],o=u[3],l=u[4],h=u[5],i=u[6],s=u[7],p=u[8],d=u[9],g=u[10],b=u[11],m=u[12],x=u[13],w=u[14],y=u[15],T=c[0],M=c[1],P=c[2],L=c[3];return a[0]=T*t+M*l+P*p+L*m,a[1]=T*f+M*h+P*d+L*x,a[2]=T*n+M*i+P*g+L*w,a[3]=T*o+M*s+P*b+L*y,T=c[4],M=c[5],P=c[6],L=c[7],a[4]=T*t+M*l+P*p+L*m,a[5]=T*f+M*h+P*d+L*x,a[6]=T*n+M*i+P*g+L*w,a[7]=T*o+M*s+P*b+L*y,T=c[8],M=c[9],P=c[10],L=c[11],a[8]=T*t+M*l+P*p+L*m,a[9]=T*f+M*h+P*d+L*x,a[10]=T*n+M*i+P*g+L*w,a[11]=T*o+M*s+P*b+L*y,T=c[12],M=c[13],P=c[14],L=c[15],a[12]=T*t+M*l+P*p+L*m,a[13]=T*f+M*h+P*d+L*x,a[14]=T*n+M*i+P*g+L*w,a[15]=T*o+M*s+P*b+L*y,a}},{}],296:[function(e,v,S){v.exports=r;function r(a,u,c,t,f,n,o){var l=1/(u-c),h=1/(t-f),i=1/(n-o);return a[0]=-2*l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*h,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*i,a[11]=0,a[12]=(u+c)*l,a[13]=(f+t)*h,a[14]=(o+n)*i,a[15]=1,a}},{}],297:[function(e,v,S){v.exports=r;function r(a,u,c,t,f){var n=1/Math.tan(u/2),o=1/(t-f);return a[0]=n/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(f+t)*o,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*f*t*o,a[15]=0,a}},{}],298:[function(e,v,S){v.exports=r;function r(a,u,c,t){var f=Math.tan(u.upDegrees*Math.PI/180),n=Math.tan(u.downDegrees*Math.PI/180),o=Math.tan(u.leftDegrees*Math.PI/180),l=Math.tan(u.rightDegrees*Math.PI/180),h=2/(o+l),i=2/(f+n);return a[0]=h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i,a[6]=0,a[7]=0,a[8]=-((o-l)*h*.5),a[9]=(f-n)*i*.5,a[10]=t/(c-t),a[11]=-1,a[12]=0,a[13]=0,a[14]=t*c/(c-t),a[15]=0,a}},{}],299:[function(e,v,S){v.exports=r;function r(a,u,c,t){var f=t[0],n=t[1],o=t[2],l=Math.sqrt(f*f+n*n+o*o),h,i,s,p,d,g,b,m,x,w,y,T,M,P,L,I,E,k,C,D,F,N,G,U;return Math.abs(l)<1e-6?null:(l=1/l,f*=l,n*=l,o*=l,h=Math.sin(c),i=Math.cos(c),s=1-i,p=u[0],d=u[1],g=u[2],b=u[3],m=u[4],x=u[5],w=u[6],y=u[7],T=u[8],M=u[9],P=u[10],L=u[11],I=f*f*s+i,E=n*f*s+o*h,k=o*f*s-n*h,C=f*n*s-o*h,D=n*n*s+i,F=o*n*s+f*h,N=f*o*s+n*h,G=n*o*s-f*h,U=o*o*s+i,a[0]=p*I+m*E+T*k,a[1]=d*I+x*E+M*k,a[2]=g*I+w*E+P*k,a[3]=b*I+y*E+L*k,a[4]=p*C+m*D+T*F,a[5]=d*C+x*D+M*F,a[6]=g*C+w*D+P*F,a[7]=b*C+y*D+L*F,a[8]=p*N+m*G+T*U,a[9]=d*N+x*G+M*U,a[10]=g*N+w*G+P*U,a[11]=b*N+y*G+L*U,u!==a&&(a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15]),a)}},{}],300:[function(e,v,S){v.exports=r;function r(a,u,c){var t=Math.sin(c),f=Math.cos(c),n=u[4],o=u[5],l=u[6],h=u[7],i=u[8],s=u[9],p=u[10],d=u[11];return u!==a&&(a[0]=u[0],a[1]=u[1],a[2]=u[2],a[3]=u[3],a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15]),a[4]=n*f+i*t,a[5]=o*f+s*t,a[6]=l*f+p*t,a[7]=h*f+d*t,a[8]=i*f-n*t,a[9]=s*f-o*t,a[10]=p*f-l*t,a[11]=d*f-h*t,a}},{}],301:[function(e,v,S){v.exports=r;function r(a,u,c){var t=Math.sin(c),f=Math.cos(c),n=u[0],o=u[1],l=u[2],h=u[3],i=u[8],s=u[9],p=u[10],d=u[11];return u!==a&&(a[4]=u[4],a[5]=u[5],a[6]=u[6],a[7]=u[7],a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15]),a[0]=n*f-i*t,a[1]=o*f-s*t,a[2]=l*f-p*t,a[3]=h*f-d*t,a[8]=n*t+i*f,a[9]=o*t+s*f,a[10]=l*t+p*f,a[11]=h*t+d*f,a}},{}],302:[function(e,v,S){v.exports=r;function r(a,u,c){var t=Math.sin(c),f=Math.cos(c),n=u[0],o=u[1],l=u[2],h=u[3],i=u[4],s=u[5],p=u[6],d=u[7];return u!==a&&(a[8]=u[8],a[9]=u[9],a[10]=u[10],a[11]=u[11],a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15]),a[0]=n*f+i*t,a[1]=o*f+s*t,a[2]=l*f+p*t,a[3]=h*f+d*t,a[4]=i*f-n*t,a[5]=s*f-o*t,a[6]=p*f-l*t,a[7]=d*f-h*t,a}},{}],303:[function(e,v,S){v.exports=r;function r(a,u,c){var t=c[0],f=c[1],n=c[2];return a[0]=u[0]*t,a[1]=u[1]*t,a[2]=u[2]*t,a[3]=u[3]*t,a[4]=u[4]*f,a[5]=u[5]*f,a[6]=u[6]*f,a[7]=u[7]*f,a[8]=u[8]*n,a[9]=u[9]*n,a[10]=u[10]*n,a[11]=u[11]*n,a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15],a}},{}],304:[function(e,v,S){v.exports=r;function r(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],305:[function(e,v,S){v.exports=r;function r(a,u,c){var t=c[0],f=c[1],n=c[2],o,l,h,i,s,p,d,g,b,m,x,w;return u===a?(a[12]=u[0]*t+u[4]*f+u[8]*n+u[12],a[13]=u[1]*t+u[5]*f+u[9]*n+u[13],a[14]=u[2]*t+u[6]*f+u[10]*n+u[14],a[15]=u[3]*t+u[7]*f+u[11]*n+u[15]):(o=u[0],l=u[1],h=u[2],i=u[3],s=u[4],p=u[5],d=u[6],g=u[7],b=u[8],m=u[9],x=u[10],w=u[11],a[0]=o,a[1]=l,a[2]=h,a[3]=i,a[4]=s,a[5]=p,a[6]=d,a[7]=g,a[8]=b,a[9]=m,a[10]=x,a[11]=w,a[12]=o*t+s*f+b*n+u[12],a[13]=l*t+p*f+m*n+u[13],a[14]=h*t+d*f+x*n+u[14],a[15]=i*t+g*f+w*n+u[15]),a}},{}],306:[function(e,v,S){v.exports=r;function r(a,u){if(a===u){var c=u[1],t=u[2],f=u[3],n=u[6],o=u[7],l=u[11];a[1]=u[4],a[2]=u[8],a[3]=u[12],a[4]=c,a[6]=u[9],a[7]=u[13],a[8]=t,a[9]=n,a[11]=u[14],a[12]=f,a[13]=o,a[14]=l}else a[0]=u[0],a[1]=u[4],a[2]=u[8],a[3]=u[12],a[4]=u[1],a[5]=u[5],a[6]=u[9],a[7]=u[13],a[8]=u[2],a[9]=u[6],a[10]=u[10],a[11]=u[14],a[12]=u[3],a[13]=u[7],a[14]=u[11],a[15]=u[15];return a}},{}],307:[function(e,v,S){var r=e("barycentric"),a=e("polytope-closest-point/lib/closest_point_2d.js");v.exports=n;function u(o,l){for(var h=[0,0,0,0],i=0;i<4;++i)for(var s=0;s<4;++s)h[s]+=o[4*i+s]*l[i];return h}function c(o,l,h,i,s){for(var p=u(i,u(h,u(l,[o[0],o[1],o[2],1]))),d=0;d<3;++d)p[d]/=p[3];return[.5*s[0]*(1+p[0]),.5*s[1]*(1-p[1])]}function t(o,l){if(o.length===2){for(var h=0,i=0,s=0;s<2;++s)h+=Math.pow(l[s]-o[0][s],2),i+=Math.pow(l[s]-o[1][s],2);return h=Math.sqrt(h),i=Math.sqrt(i),h+i<1e-6?[1,0]:[i/(h+i),h/(i+h)]}else if(o.length===3){var p=[0,0];return a(o[0],o[1],o[2],l,p),r(o,p)}return[]}function f(o,l){for(var h=[0,0,0],i=0;i<o.length;++i)for(var s=o[i],p=l[i],d=0;d<3;++d)h[d]+=p*s[d];return h}function n(o,l,h,i,s,p){if(o.length===1)return[0,o[0].slice()];for(var d=new Array(o.length),g=0;g<o.length;++g)d[g]=c(o[g],h,i,s,p);for(var b=0,m=1/0,g=0;g<d.length;++g){for(var x=0,w=0;w<2;++w)x+=Math.pow(d[g][w]-l[w],2);x<m&&(m=x,b=g)}for(var y=t(d,l),T=0,g=0;g<3;++g){if(y[g]<-.001||y[g]>1.0001)return null;T+=y[g]}return Math.abs(T-1)>.001?null:[b,f(o,y),y]}},{barycentric:78,"polytope-closest-point/lib/closest_point_2d.js":525}],308:[function(e,v,S){var r=e("glslify"),a=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),u=r([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),t=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),f=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),n=r([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),o=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),l=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),h=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),i=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),s=r([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);S.meshShader={vertex:a,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},S.wireShader={vertex:c,fragment:t,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},S.pointShader={vertex:f,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},S.pickShader={vertex:o,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},S.pointPickShader={vertex:h,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},S.contourShader={vertex:i,fragment:s,attributes:[{name:"position",type:"vec3"}]}},{glslify:310}],309:[function(e,v,S){var r=1e-6,a=1e-6,u=e("gl-shader"),c=e("gl-buffer"),t=e("gl-vao"),f=e("gl-texture2d"),n=e("normals"),o=e("gl-mat4/multiply"),l=e("gl-mat4/invert"),h=e("ndarray"),i=e("colormap"),s=e("simplicial-complex-contour"),p=e("typedarray-pool"),d=e("./lib/shaders"),g=e("./lib/closest-point"),b=d.meshShader,m=d.wireShader,x=d.pointShader,w=d.pickShader,y=d.pointPickShader,T=d.contourShader,M=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function P(z,B,j,V,K,te,$,ie,se,Q,H,oe,re,ee,ae,fe,de,pe,W,ue,me,be,Me,Pe,Ge,ze,Qe){this.gl=z,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=B,this.dirty=!0,this.triShader=j,this.lineShader=V,this.pointShader=K,this.pickShader=te,this.pointPickShader=$,this.contourShader=ie,this.trianglePositions=se,this.triangleColors=H,this.triangleNormals=re,this.triangleUVs=oe,this.triangleIds=Q,this.triangleVAO=ee,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ae,this.edgeColors=de,this.edgeUVs=pe,this.edgeIds=fe,this.edgeVAO=W,this.edgeCount=0,this.pointPositions=ue,this.pointColors=be,this.pointUVs=Me,this.pointSizes=Pe,this.pointIds=me,this.pointVAO=Ge,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=ze,this.contourVAO=Qe,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=M,this._view=M,this._projection=M,this._resolution=[1,1]}var L=P.prototype;L.isOpaque=function(){return!this.hasAlpha},L.isTransparent=function(){return this.hasAlpha},L.pickSlots=1,L.setPickBase=function(z){this.pickId=z};function I(z,B){if(!B||!B.length)return 1;for(var j=0;j<B.length;++j){if(B.length<2)return 1;if(B[j][0]===z)return B[j][1];if(B[j][0]>z&&j>0){var V=(B[j][0]-z)/(B[j][0]-B[j-1][0]);return B[j][1]*(1-V)+V*B[j-1][1]}}return 1}function E(z,B){for(var j=i({colormap:z,nshades:256,format:"rgba"}),V=new Uint8Array(256*4),K=0;K<256;++K){for(var te=j[K],$=0;$<3;++$)V[4*K+$]=te[$];B?V[4*K+3]=255*I(K/255,B):V[4*K+3]=255*te[3]}return h(V,[256,256,4],[4,0,1])}function k(z){for(var B=z.length,j=new Array(B),V=0;V<B;++V)j[V]=z[V][2];return j}L.highlight=function(z){if(!z||!this.contourEnable){this.contourCount=0;return}for(var B=s(this.cells,this.intensity,z.intensity),j=B.cells,V=B.vertexIds,K=B.vertexWeights,te=j.length,$=p.mallocFloat32(2*3*te),ie=0,se=0;se<te;++se)for(var Q=j[se],H=0;H<2;++H){var oe=Q[0];Q.length===2&&(oe=Q[H]);for(var re=V[oe][0],ee=V[oe][1],ae=K[oe],fe=1-ae,de=this.positions[re],pe=this.positions[ee],W=0;W<3;++W)$[ie++]=ae*de[W]+fe*pe[W]}this.contourCount=ie/3|0,this.contourPositions.update($.subarray(0,ie)),p.free($)},L.update=function(z){z=z||{};var B=this.gl;this.dirty=!0,"contourEnable"in z&&(this.contourEnable=z.contourEnable),"contourColor"in z&&(this.contourColor=z.contourColor),"lineWidth"in z&&(this.lineWidth=z.lineWidth),"lightPosition"in z&&(this.lightPosition=z.lightPosition),this.hasAlpha=!1,"opacity"in z&&(this.opacity=z.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in z&&(this.opacityscale=z.opacityscale,this.hasAlpha=!0),"ambient"in z&&(this.ambientLight=z.ambient),"diffuse"in z&&(this.diffuseLight=z.diffuse),"specular"in z&&(this.specularLight=z.specular),"roughness"in z&&(this.roughness=z.roughness),"fresnel"in z&&(this.fresnel=z.fresnel),z.texture?(this.texture.dispose(),this.texture=f(B,z.texture)):z.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=B.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=B.LINEAR,this.texture.setPixels(E(z.colormap,this.opacityscale)),this.texture.generateMipmap());var j=z.cells,V=z.positions;if(!V||!j)return;var K=[],te=[],$=[],ie=[],se=[],Q=[],H=[],oe=[],re=[],ee=[],ae=[],fe=[],de=[],pe=[];this.cells=j,this.positions=V;var W=z.vertexNormals,ue=z.cellNormals,me=z.vertexNormalsEpsilon===void 0?r:z.vertexNormalsEpsilon,be=z.faceNormalsEpsilon===void 0?a:z.faceNormalsEpsilon;z.useFacetNormals&&!ue&&(ue=n.faceNormals(j,V,be)),!ue&&!W&&(W=n.vertexNormals(j,V,me));var Me=z.vertexColors,Pe=z.cellColors,Ge=z.meshColor||[1,1,1,1],ze=z.vertexUVs,Qe=z.vertexIntensity,tt=z.cellUVs,Ce=z.cellIntensity,Ae=1/0,Be=-1/0;if(!ze&&!tt)if(Qe)if(z.vertexIntensityBounds)Ae=+z.vertexIntensityBounds[0],Be=+z.vertexIntensityBounds[1];else for(var qe=0;qe<Qe.length;++qe){var Tt=Qe[qe];Ae=Math.min(Ae,Tt),Be=Math.max(Be,Tt)}else if(Ce)if(z.cellIntensityBounds)Ae=+z.cellIntensityBounds[0],Be=+z.cellIntensityBounds[1];else for(var qe=0;qe<Ce.length;++qe){var Tt=Ce[qe];Ae=Math.min(Ae,Tt),Be=Math.max(Be,Tt)}else for(var qe=0;qe<V.length;++qe){var Tt=V[qe][2];Ae=Math.min(Ae,Tt),Be=Math.max(Be,Tt)}Qe?this.intensity=Qe:Ce?this.intensity=Ce:this.intensity=k(V),this.pickVertex=!(Ce||Pe);var At=z.pointSizes,Ne=z.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var qe=0;qe<V.length;++qe)for(var ct=V[qe],Mt=0;Mt<3;++Mt)isNaN(ct[Mt])||!isFinite(ct[Mt])||(this.bounds[0][Mt]=Math.min(this.bounds[0][Mt],ct[Mt]),this.bounds[1][Mt]=Math.max(this.bounds[1][Mt],ct[Mt]));var Wt=0,qt=0,zt=0;e:for(var qe=0;qe<j.length;++qe){var $t=j[qe];switch($t.length){case 1:for(var rr=$t[0],ct=V[rr],Mt=0;Mt<3;++Mt)if(isNaN(ct[Mt])||!isFinite(ct[Mt]))continue e;ee.push(ct[0],ct[1],ct[2]);var Lt;Me?Lt=Me[rr]:Pe?Lt=Pe[qe]:Lt=Ge,this.opacityscale&&Qe?te.push(Lt[0],Lt[1],Lt[2],this.opacity*I((Qe[rr]-Ae)/(Be-Ae),this.opacityscale)):Lt.length===3?ae.push(Lt[0],Lt[1],Lt[2],this.opacity):(ae.push(Lt[0],Lt[1],Lt[2],Lt[3]*this.opacity),Lt[3]<1&&(this.hasAlpha=!0));var Ct;ze?Ct=ze[rr]:Qe?Ct=[(Qe[rr]-Ae)/(Be-Ae),0]:tt?Ct=tt[qe]:Ce?Ct=[(Ce[qe]-Ae)/(Be-Ae),0]:Ct=[(ct[2]-Ae)/(Be-Ae),0],fe.push(Ct[0],Ct[1]),At?de.push(At[rr]):de.push(Ne),pe.push(qe),zt+=1;break;case 2:for(var Mt=0;Mt<2;++Mt)for(var rr=$t[Mt],ct=V[rr],dt=0;dt<3;++dt)if(isNaN(ct[dt])||!isFinite(ct[dt]))continue e;for(var Mt=0;Mt<2;++Mt){var rr=$t[Mt],ct=V[rr];Q.push(ct[0],ct[1],ct[2]);var Lt;Me?Lt=Me[rr]:Pe?Lt=Pe[qe]:Lt=Ge,this.opacityscale&&Qe?te.push(Lt[0],Lt[1],Lt[2],this.opacity*I((Qe[rr]-Ae)/(Be-Ae),this.opacityscale)):Lt.length===3?H.push(Lt[0],Lt[1],Lt[2],this.opacity):(H.push(Lt[0],Lt[1],Lt[2],Lt[3]*this.opacity),Lt[3]<1&&(this.hasAlpha=!0));var Ct;ze?Ct=ze[rr]:Qe?Ct=[(Qe[rr]-Ae)/(Be-Ae),0]:tt?Ct=tt[qe]:Ce?Ct=[(Ce[qe]-Ae)/(Be-Ae),0]:Ct=[(ct[2]-Ae)/(Be-Ae),0],oe.push(Ct[0],Ct[1]),re.push(qe)}qt+=1;break;case 3:for(var Mt=0;Mt<3;++Mt)for(var rr=$t[Mt],ct=V[rr],dt=0;dt<3;++dt)if(isNaN(ct[dt])||!isFinite(ct[dt]))continue e;for(var Mt=0;Mt<3;++Mt){var rr=$t[2-Mt],ct=V[rr];K.push(ct[0],ct[1],ct[2]);var Lt;Me?Lt=Me[rr]:Pe?Lt=Pe[qe]:Lt=Ge,Lt?this.opacityscale&&Qe?te.push(Lt[0],Lt[1],Lt[2],this.opacity*I((Qe[rr]-Ae)/(Be-Ae),this.opacityscale)):Lt.length===3?te.push(Lt[0],Lt[1],Lt[2],this.opacity):(te.push(Lt[0],Lt[1],Lt[2],Lt[3]*this.opacity),Lt[3]<1&&(this.hasAlpha=!0)):te.push(.5,.5,.5,1);var Ct;ze?Ct=ze[rr]:Qe?Ct=[(Qe[rr]-Ae)/(Be-Ae),0]:tt?Ct=tt[qe]:Ce?Ct=[(Ce[qe]-Ae)/(Be-Ae),0]:Ct=[(ct[2]-Ae)/(Be-Ae),0],ie.push(Ct[0],Ct[1]);var lt;W?lt=W[rr]:lt=ue[qe],$.push(lt[0],lt[1],lt[2]),se.push(qe)}Wt+=1;break}}this.pointCount=zt,this.edgeCount=qt,this.triangleCount=Wt,this.pointPositions.update(ee),this.pointColors.update(ae),this.pointUVs.update(fe),this.pointSizes.update(de),this.pointIds.update(new Uint32Array(pe)),this.edgePositions.update(Q),this.edgeColors.update(H),this.edgeUVs.update(oe),this.edgeIds.update(new Uint32Array(re)),this.trianglePositions.update(K),this.triangleColors.update(te),this.triangleUVs.update(ie),this.triangleNormals.update($),this.triangleIds.update(new Uint32Array(se))},L.drawTransparent=L.draw=function(z){z=z||{};for(var B=this.gl,j=z.model||M,V=z.view||M,K=z.projection||M,te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],$=0;$<3;++$)te[0][$]=Math.max(te[0][$],this.clipBounds[0][$]),te[1][$]=Math.min(te[1][$],this.clipBounds[1][$]);var ie={model:j,view:V,projection:K,inverseModel:M.slice(),clipBounds:te,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};ie.inverseModel=l(ie.inverseModel,ie.model),B.disable(B.CULL_FACE),this.texture.bind(0);var se=new Array(16);o(se,ie.view,ie.model),o(se,ie.projection,se),l(se,se);for(var $=0;$<3;++$)ie.eyePosition[$]=se[12+$]/se[15];for(var Q=se[15],$=0;$<3;++$)Q+=this.lightPosition[$]*se[4*$+3];for(var $=0;$<3;++$){for(var H=se[12+$],oe=0;oe<3;++oe)H+=se[4*oe+$]*this.lightPosition[oe];ie.lightPosition[$]=H/Q}if(this.triangleCount>0){var re=this.triShader;re.bind(),re.uniforms=ie,this.triangleVAO.bind(),B.drawArrays(B.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var re=this.lineShader;re.bind(),re.uniforms=ie,this.edgeVAO.bind(),B.lineWidth(this.lineWidth*this.pixelRatio),B.drawArrays(B.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var re=this.pointShader;re.bind(),re.uniforms=ie,this.pointVAO.bind(),B.drawArrays(B.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var re=this.contourShader;re.bind(),re.uniforms=ie,this.contourVAO.bind(),B.drawArrays(B.LINES,0,this.contourCount),this.contourVAO.unbind()}},L.drawPick=function(z){z=z||{};for(var B=this.gl,j=z.model||M,V=z.view||M,K=z.projection||M,te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],$=0;$<3;++$)te[0][$]=Math.max(te[0][$],this.clipBounds[0][$]),te[1][$]=Math.min(te[1][$],this.clipBounds[1][$]);this._model=[].slice.call(j),this._view=[].slice.call(V),this._projection=[].slice.call(K),this._resolution=[B.drawingBufferWidth,B.drawingBufferHeight];var ie={model:j,view:V,projection:K,clipBounds:te,pickId:this.pickId/255},se=this.pickShader;if(se.bind(),se.uniforms=ie,this.triangleCount>0&&(this.triangleVAO.bind(),B.drawArrays(B.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),B.lineWidth(this.lineWidth*this.pixelRatio),B.drawArrays(B.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var se=this.pointPickShader;se.bind(),se.uniforms=ie,this.pointVAO.bind(),B.drawArrays(B.POINTS,0,this.pointCount),this.pointVAO.unbind()}},L.pick=function(z){if(!z||z.id!==this.pickId)return null;for(var B=z.value[0]+256*z.value[1]+65536*z.value[2],j=this.cells[B],V=this.positions,K=new Array(j.length),te=0;te<j.length;++te)K[te]=V[j[te]];var $=z.coord[0],ie=z.coord[1];if(!this.pickVertex){var se=this.positions[j[0]],Q=this.positions[j[1]],H=this.positions[j[2]],oe=[(se[0]+Q[0]+H[0])/3,(se[1]+Q[1]+H[1])/3,(se[2]+Q[2]+H[2])/3];return{_cellCenter:!0,position:[$,ie],index:B,cell:j,cellId:B,intensity:this.intensity[B],dataCoordinate:oe}}var re=g(K,[$*this.pixelRatio,this._resolution[1]-ie*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!re)return null;for(var ee=re[2],ae=0,te=0;te<j.length;++te)ae+=ee[te]*this.intensity[j[te]];return{position:re[1],index:j[re[0]],cell:j,cellId:B,intensity:ae,dataCoordinate:this.positions[j[re[0]]]}},L.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function C(z){var B=u(z,b.vertex,b.fragment);return B.attributes.position.location=0,B.attributes.color.location=2,B.attributes.uv.location=3,B.attributes.normal.location=4,B}function D(z){var B=u(z,m.vertex,m.fragment);return B.attributes.position.location=0,B.attributes.color.location=2,B.attributes.uv.location=3,B}function F(z){var B=u(z,x.vertex,x.fragment);return B.attributes.position.location=0,B.attributes.color.location=2,B.attributes.uv.location=3,B.attributes.pointSize.location=4,B}function N(z){var B=u(z,w.vertex,w.fragment);return B.attributes.position.location=0,B.attributes.id.location=1,B}function G(z){var B=u(z,y.vertex,y.fragment);return B.attributes.position.location=0,B.attributes.id.location=1,B.attributes.pointSize.location=4,B}function U(z){var B=u(z,T.vertex,T.fragment);return B.attributes.position.location=0,B}function X(z,B){arguments.length===1&&(B=z,z=B.gl);var j=z.getExtension("OES_standard_derivatives")||z.getExtension("MOZ_OES_standard_derivatives")||z.getExtension("WEBKIT_OES_standard_derivatives");if(!j)throw new Error("derivatives not supported");var V=C(z),K=D(z),te=F(z),$=N(z),ie=G(z),se=U(z),Q=f(z,h(new Uint8Array([255,255,255,255]),[1,1,4]));Q.generateMipmap(),Q.minFilter=z.LINEAR_MIPMAP_LINEAR,Q.magFilter=z.LINEAR;var H=c(z),oe=c(z),re=c(z),ee=c(z),ae=c(z),fe=t(z,[{buffer:H,type:z.FLOAT,size:3},{buffer:ae,type:z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:oe,type:z.FLOAT,size:4},{buffer:re,type:z.FLOAT,size:2},{buffer:ee,type:z.FLOAT,size:3}]),de=c(z),pe=c(z),W=c(z),ue=c(z),me=t(z,[{buffer:de,type:z.FLOAT,size:3},{buffer:ue,type:z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:pe,type:z.FLOAT,size:4},{buffer:W,type:z.FLOAT,size:2}]),be=c(z),Me=c(z),Pe=c(z),Ge=c(z),ze=c(z),Qe=t(z,[{buffer:be,type:z.FLOAT,size:3},{buffer:ze,type:z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Me,type:z.FLOAT,size:4},{buffer:Pe,type:z.FLOAT,size:2},{buffer:Ge,type:z.FLOAT,size:1}]),tt=c(z),Ce=t(z,[{buffer:tt,type:z.FLOAT,size:3}]),Ae=new P(z,Q,V,K,te,$,ie,se,H,ae,oe,re,ee,fe,de,ue,pe,W,me,be,ze,Me,Pe,Ge,Qe,tt,Ce);return Ae.update(B),Ae}v.exports=X},{"./lib/closest-point":307,"./lib/shaders":308,colormap:131,"gl-buffer":259,"gl-mat4/invert":293,"gl-mat4/multiply":295,"gl-shader":335,"gl-texture2d":353,"gl-vao":358,ndarray:495,normals:498,"simplicial-complex-contour":556,"typedarray-pool":595}],310:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],311:[function(e,v,S){v.exports=f;var r=e("gl-buffer"),a=e("gl-shader"),u=e("./shaders");function c(n,o,l){this.plot=n,this.vbo=o,this.shader=l}var t=c.prototype;t.bind=function(){var n=this.shader;this.vbo.bind(),this.shader.bind(),n.attributes.coord.pointer(),n.uniforms.screenBox=this.plot.screenBox},t.drawBox=function(){var n=[0,0],o=[0,0];return function(l,h,i,s,p){var d=this.plot,g=this.shader,b=d.gl;n[0]=l,n[1]=h,o[0]=i,o[1]=s,g.uniforms.lo=n,g.uniforms.hi=o,g.uniforms.color=p,b.drawArrays(b.TRIANGLE_STRIP,0,4)}}(),t.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(n){var o=n.gl,l=r(o,[0,0,0,1,1,0,1,1]),h=a(o,u.boxVert,u.lineFrag);return new c(n,l,h)}},{"./shaders":314,"gl-buffer":259,"gl-shader":335}],312:[function(e,v,S){v.exports=o;var r=e("gl-buffer"),a=e("gl-shader"),u=e("binary-search-bounds"),c=e("./shaders");function t(l,h,i,s){this.plot=l,this.vbo=h,this.shader=i,this.tickShader=s,this.ticks=[[],[]]}function f(l,h){return l-h}var n=t.prototype;n.draw=function(){var l=[0,0],h=[0,0],i=[0,0];return function(){for(var s=this.plot,p=this.vbo,d=this.shader,g=this.ticks,b=s.gl,m=s._tickBounds,x=s.dataBox,w=s.viewBox,y=s.gridLineWidth,T=s.gridLineColor,M=s.gridLineEnable,P=s.pixelRatio,L=0;L<2;++L){var I=m[L],E=m[L+2],k=E-I,C=.5*(x[L+2]+x[L]),D=x[L+2]-x[L];h[L]=2*k/D,l[L]=2*(I-C)/D}d.bind(),p.bind(),d.attributes.dataCoord.pointer(),d.uniforms.dataShift=l,d.uniforms.dataScale=h;for(var F=0,L=0;L<2;++L){i[0]=i[1]=0,i[L]=1,d.uniforms.dataAxis=i,d.uniforms.lineWidth=y[L]/(w[L+2]-w[L])*P,d.uniforms.color=T[L];var N=g[L].length*6;M[L]&&N&&b.drawArrays(b.TRIANGLES,F,N),F+=N}}}(),n.drawTickMarks=function(){var l=[0,0],h=[0,0],i=[1,0],s=[0,1],p=[0,0],d=[0,0];return function(){for(var g=this.plot,b=this.vbo,m=this.tickShader,x=this.ticks,w=g.gl,y=g._tickBounds,T=g.dataBox,M=g.viewBox,P=g.pixelRatio,L=g.screenBox,I=L[2]-L[0],E=L[3]-L[1],k=M[2]-M[0],C=M[3]-M[1],D=0;D<2;++D){var F=y[D],N=y[D+2],G=N-F,U=.5*(T[D+2]+T[D]),X=T[D+2]-T[D];h[D]=2*G/X,l[D]=2*(F-U)/X}h[0]*=k/I,l[0]*=k/I,h[1]*=C/E,l[1]*=C/E,m.bind(),b.bind(),m.attributes.dataCoord.pointer();var z=m.uniforms;z.dataShift=l,z.dataScale=h;var B=g.tickMarkLength,j=g.tickMarkWidth,V=g.tickMarkColor,K=0,te=x[0].length*6,$=Math.min(u.ge(x[0],(T[0]-y[0])/(y[2]-y[0]),f),x[0].length),ie=Math.min(u.gt(x[0],(T[2]-y[0])/(y[2]-y[0]),f),x[0].length),se=K+6*$,Q=6*Math.max(0,ie-$),H=Math.min(u.ge(x[1],(T[1]-y[1])/(y[3]-y[1]),f),x[1].length),oe=Math.min(u.gt(x[1],(T[3]-y[1])/(y[3]-y[1]),f),x[1].length),re=te+6*H,ee=6*Math.max(0,oe-H);p[0]=2*(M[0]-B[1])/I-1,p[1]=(M[3]+M[1])/E-1,d[0]=B[1]*P/I,d[1]=j[1]*P/E,ee&&(z.color=V[1],z.tickScale=d,z.dataAxis=s,z.screenOffset=p,w.drawArrays(w.TRIANGLES,re,ee)),p[0]=(M[2]+M[0])/I-1,p[1]=2*(M[1]-B[0])/E-1,d[0]=j[0]*P/I,d[1]=B[0]*P/E,Q&&(z.color=V[0],z.tickScale=d,z.dataAxis=i,z.screenOffset=p,w.drawArrays(w.TRIANGLES,se,Q)),p[0]=2*(M[2]+B[3])/I-1,p[1]=(M[3]+M[1])/E-1,d[0]=B[3]*P/I,d[1]=j[3]*P/E,ee&&(z.color=V[3],z.tickScale=d,z.dataAxis=s,z.screenOffset=p,w.drawArrays(w.TRIANGLES,re,ee)),p[0]=(M[2]+M[0])/I-1,p[1]=2*(M[3]+B[2])/E-1,d[0]=j[2]*P/I,d[1]=B[2]*P/E,Q&&(z.color=V[2],z.tickScale=d,z.dataAxis=i,z.screenOffset=p,w.drawArrays(w.TRIANGLES,se,Q))}}(),n.update=function(){var l=[1,1,-1,-1,1,-1],h=[1,-1,1,1,-1,-1];return function(i){var s=i.ticks,p=i.bounds,d=new Float32Array(6*3*(s[0].length+s[1].length));this.plot.zeroLineEnable;for(var g=0,b=[[],[]],m=0;m<2;++m)for(var x=b[m],w=s[m],y=p[m],T=p[m+2],M=0;M<w.length;++M){var P=(w[M].x-y)/(T-y);x.push(P);for(var L=0;L<6;++L)d[g++]=P,d[g++]=l[L],d[g++]=h[L]}this.ticks=b,this.vbo.update(d)}}(),n.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function o(l){var h=l.gl,i=r(h),s=a(h,c.gridVert,c.gridFrag),p=a(h,c.tickVert,c.gridFrag),d=new t(l,i,s,p);return d}},{"./shaders":314,"binary-search-bounds":96,"gl-buffer":259,"gl-shader":335}],313:[function(e,v,S){v.exports=f;var r=e("gl-buffer"),a=e("gl-shader"),u=e("./shaders");function c(n,o,l){this.plot=n,this.vbo=o,this.shader=l}var t=c.prototype;t.bind=function(){var n=this.shader;this.vbo.bind(),this.shader.bind(),n.attributes.coord.pointer(),n.uniforms.screenBox=this.plot.screenBox},t.drawLine=function(){var n=[0,0],o=[0,0];return function(l,h,i,s,p,d){var g=this.plot,b=this.shader,m=g.gl;n[0]=l,n[1]=h,o[0]=i,o[1]=s,b.uniforms.start=n,b.uniforms.end=o,b.uniforms.width=p*g.pixelRatio,b.uniforms.color=d,m.drawArrays(m.TRIANGLE_STRIP,0,4)}}(),t.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(n){var o=n.gl,l=r(o,[-1,-1,-1,1,1,-1,1,1]),h=a(o,u.lineVert,u.lineFrag),i=new c(n,l,h);return i}},{"./shaders":314,"gl-buffer":259,"gl-shader":335}],314:[function(e,v,S){var r=e("glslify"),a=r([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);v.exports={lineVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:a,textVert:r([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:a,gridVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:a,boxVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:316}],315:[function(e,v,S){v.exports=o;var r=e("gl-buffer"),a=e("gl-shader"),u=e("text-cache"),c=e("binary-search-bounds"),t=e("./shaders");function f(l,h,i){this.plot=l,this.vbo=h,this.shader=i,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var n=f.prototype;n.drawTicks=function(){var l=[0,0],h=[0,0],i=[0,0];return function(s){var p=this.plot,d=this.shader,g=this.tickX[s],b=this.tickOffset[s],m=p.gl,x=p.viewBox,w=p.dataBox,y=p.screenBox,T=p.pixelRatio,M=p.tickEnable,P=p.tickPad,L=p.tickColor,I=p.tickAngle,E=p.labelEnable,k=p.labelPad,C=p.labelColor,D=p.labelAngle,F=this.labelOffset[s],N=this.labelCount[s],G=c.lt(g,w[s]),U=c.le(g,w[s+2]);l[0]=l[1]=0,l[s]=1,h[s]=(x[2+s]+x[s])/(y[2+s]-y[s])-1;var X=2/y[2+(s^1)]-y[s^1];h[s^1]=X*x[s^1]-1,M[s]&&(h[s^1]-=X*T*P[s],G<U&&b[U]>b[G]&&(d.uniforms.dataAxis=l,d.uniforms.screenOffset=h,d.uniforms.color=L[s],d.uniforms.angle=I[s],m.drawArrays(m.TRIANGLES,b[G],b[U]-b[G]))),E[s]&&N&&(h[s^1]-=X*T*k[s],d.uniforms.dataAxis=i,d.uniforms.screenOffset=h,d.uniforms.color=C[s],d.uniforms.angle=D[s],m.drawArrays(m.TRIANGLES,F,N)),h[s^1]=X*x[2+(s^1)]-1,M[s+2]&&(h[s^1]+=X*T*P[s+2],G<U&&b[U]>b[G]&&(d.uniforms.dataAxis=l,d.uniforms.screenOffset=h,d.uniforms.color=L[s+2],d.uniforms.angle=I[s+2],m.drawArrays(m.TRIANGLES,b[G],b[U]-b[G]))),E[s+2]&&N&&(h[s^1]+=X*T*k[s+2],d.uniforms.dataAxis=i,d.uniforms.screenOffset=h,d.uniforms.color=C[s+2],d.uniforms.angle=D[s+2],m.drawArrays(m.TRIANGLES,F,N))}}(),n.drawTitle=function(){var l=[0,0],h=[0,0];return function(){var i=this.plot,s=this.shader,p=i.gl,d=i.screenBox,g=i.titleCenter,b=i.titleAngle,m=i.titleColor,x=i.pixelRatio;if(!!this.titleCount){for(var w=0;w<2;++w)h[w]=2*(g[w]*x-d[w])/(d[2+w]-d[w])-1;s.bind(),s.uniforms.dataAxis=l,s.uniforms.screenOffset=h,s.uniforms.angle=b,s.uniforms.color=m,p.drawArrays(p.TRIANGLES,this.titleOffset,this.titleCount)}}}(),n.bind=function(){var l=[0,0],h=[0,0],i=[0,0];return function(){var s=this.plot,p=this.shader,d=s._tickBounds,g=s.dataBox,b=s.screenBox,m=s.viewBox;p.bind();for(var x=0;x<2;++x){var w=d[x],y=d[x+2],T=y-w,M=.5*(g[x+2]+g[x]),P=g[x+2]-g[x],L=m[x],I=m[x+2],E=I-L,k=b[x],C=b[x+2],D=C-k;h[x]=2*T/P*E/D,l[x]=2*(w-M)/P*E/D}i[1]=2*s.pixelRatio/(b[3]-b[1]),i[0]=i[1]*(b[3]-b[1])/(b[2]-b[0]),p.uniforms.dataScale=h,p.uniforms.dataShift=l,p.uniforms.textScale=i,this.vbo.bind(),p.attributes.textCoordinate.pointer()}}(),n.update=function(l){var h=[],i=l.ticks,s=l.bounds,p,d,g,b,m;for(m=0;m<2;++m){var x=[Math.floor(h.length/3)],w=[-1/0],y=i[m];for(p=0;p<y.length;++p){var T=y[p],M=T.x,P=T.text,L=T.font||"sans-serif";b=T.fontSize||12;for(var I=1/(s[m+2]-s[m]),E=s[m],k=P.split(`
`),C=0;C<k.length;C++)for(g=u(L,k[C]).data,d=0;d<g.length;d+=2)h.push(g[d]*b,-g[d+1]*b-C*b*1.2,(M-E)*I);x.push(Math.floor(h.length/3)),w.push(M)}this.tickOffset[m]=x,this.tickX[m]=w}for(m=0;m<2;++m){for(this.labelOffset[m]=Math.floor(h.length/3),g=u(l.labelFont[m],l.labels[m],{textAlign:"center"}).data,b=l.labelSize[m],p=0;p<g.length;p+=2)h.push(g[p]*b,-g[p+1]*b,0);this.labelCount[m]=Math.floor(h.length/3)-this.labelOffset[m]}for(this.titleOffset=Math.floor(h.length/3),g=u(l.titleFont,l.title).data,b=l.titleSize,p=0;p<g.length;p+=2)h.push(g[p]*b,-g[p+1]*b,0);this.titleCount=Math.floor(h.length/3)-this.titleOffset,this.vbo.update(h)},n.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function o(l){var h=l.gl,i=r(h),s=a(h,t.textVert,t.textFrag),p=new f(l,i,s);return p}},{"./shaders":314,"binary-search-bounds":96,"gl-buffer":259,"gl-shader":335,"text-cache":575}],316:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],317:[function(e,v,S){v.exports=h;var r=e("gl-select-static"),a=e("./lib/grid"),u=e("./lib/text"),c=e("./lib/line"),t=e("./lib/box");function f(i,s){this.gl=i,this.pickBuffer=s,this.screenBox=[0,0,i.drawingBufferWidth,i.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var n=f.prototype;n.setDirty=function(){this.dirty=this.pickDirty=!0},n.setOverlayDirty=function(){this.dirty=!0},n.nextDepthValue=function(){return this._depthCounter++/65536},n.draw=function(){return function(){var i=this.gl,s=this.screenBox,p=this.viewBox,d=this.dataBox,g=this.pixelRatio,b=this.grid,m=this.line,x=this.text,w=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,i.bindFramebuffer(i.FRAMEBUFFER,null),i.enable(i.SCISSOR_TEST),i.disable(i.DEPTH_TEST),i.depthFunc(i.LESS),i.depthMask(!1),i.enable(i.BLEND),i.blendEquation(i.FUNC_ADD,i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),this.borderColor){i.scissor(s[0],s[1],s[2]-s[0],s[3]-s[1]);var y=this.borderColor;i.clearColor(y[0]*y[3],y[1]*y[3],y[2]*y[3],y[3]),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}i.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]),i.viewport(p[0],p[1],p[2]-p[0],p[3]-p[1]);var T=this.backgroundColor;i.clearColor(T[0]*T[3],T[1]*T[3],T[2]*T[3],T[3]),i.clear(i.COLOR_BUFFER_BIT),b.draw();var M=this.zeroLineEnable,P=this.zeroLineColor,L=this.zeroLineWidth;if(M[0]||M[1]){m.bind();for(var I=0;I<2;++I)if(!(!M[I]||!(d[I]<=0&&d[I+2]>=0))){var E=s[I]-d[I]*(s[I+2]-s[I])/(d[I+2]-d[I]);I===0?m.drawLine(E,s[1],E,s[3],L[I],P[I]):m.drawLine(s[0],E,s[2],E,L[I],P[I])}}for(var I=0;I<w.length;++I)w[I].draw();i.viewport(s[0],s[1],s[2]-s[0],s[3]-s[1]),i.scissor(s[0],s[1],s[2]-s[0],s[3]-s[1]),this.grid.drawTickMarks(),m.bind();var k=this.borderLineEnable,C=this.borderLineWidth,D=this.borderLineColor;k[1]&&m.drawLine(p[0],p[1]-.5*C[1]*g,p[0],p[3]+.5*C[3]*g,C[1],D[1]),k[0]&&m.drawLine(p[0]-.5*C[0]*g,p[1],p[2]+.5*C[2]*g,p[1],C[0],D[0]),k[3]&&m.drawLine(p[2],p[1]-.5*C[1]*g,p[2],p[3]+.5*C[3]*g,C[3],D[3]),k[2]&&m.drawLine(p[0]-.5*C[0]*g,p[3],p[2]+.5*C[2]*g,p[3],C[2],D[2]),x.bind();for(var I=0;I<2;++I)x.drawTicks(I);this.titleEnable&&x.drawTitle();for(var F=this.overlays,I=0;I<F.length;++I)F[I].draw();i.disable(i.SCISSOR_TEST),i.disable(i.BLEND),i.depthMask(!0)}}}(),n.drawPick=function(){return function(){if(!this.static){var i=this.pickBuffer;this.gl,this._pickTimeout=null,i.begin();for(var s=1,p=this.objects,d=0;d<p.length;++d)s=p[d].drawPick(s);i.end()}}}(),n.pick=function(){return function(i,s){if(!this.static){var p=this.pixelRatio,d=this.pickPixelRatio,g=this.viewBox,b=Math.round((i-g[0]/p)*d)|0,m=Math.round((s-g[1]/p)*d)|0,x=this.pickBuffer.query(b,m,this.pickRadius);if(!x)return null;for(var w=x.id+(x.value[0]<<8)+(x.value[1]<<16)+(x.value[2]<<24),y=this.objects,T=0;T<y.length;++T){var M=y[T].pick(b,m,w);if(M)return M}return null}}}();function o(i){for(var s=i.slice(),p=0;p<s.length;++p)s[p]=s[p].slice();return s}function l(i,s){return i.x-s.x}n.setScreenBox=function(i){var s=this.screenBox,p=this.pixelRatio;s[0]=Math.round(i[0]*p)|0,s[1]=Math.round(i[1]*p)|0,s[2]=Math.round(i[2]*p)|0,s[3]=Math.round(i[3]*p)|0,this.setDirty()},n.setDataBox=function(i){var s=this.dataBox,p=s[0]!==i[0]||s[1]!==i[1]||s[2]!==i[2]||s[3]!==i[3];p&&(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],this.setDirty())},n.setViewBox=function(i){var s=this.pixelRatio,p=this.viewBox;p[0]=Math.round(i[0]*s)|0,p[1]=Math.round(i[1]*s)|0,p[2]=Math.round(i[2]*s)|0,p[3]=Math.round(i[3]*s)|0;var d=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((i[2]-i[0])*d)|0,Math.round((i[3]-i[1])*d)|0],this.setDirty()},n.update=function(i){i=i||{};var s=this.gl;this.pixelRatio=i.pixelRatio||1;var p=this.pixelRatio;this.pickPixelRatio=Math.max(p,1),this.setScreenBox(i.screenBox||[0,0,s.drawingBufferWidth/p,s.drawingBufferHeight/p]),this.screenBox,this.setViewBox(i.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/p,.125*(this.screenBox[3]-this.screenBox[1])/p,.875*(this.screenBox[2]-this.screenBox[0])/p,.875*(this.screenBox[3]-this.screenBox[1])/p]);var d=this.viewBox,g=(d[2]-d[0])/(d[3]-d[1]);this.setDataBox(i.dataBox||[-10,-10/g,10,10/g]),this.borderColor=i.borderColor!==!1?(i.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(i.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(i.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(i.gridLineWidth||[1,1]).slice(),this.gridLineColor=o(i.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(i.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(i.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=o(i.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(i.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(i.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=o(i.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(i.titleCenter||[.5*(d[0]+d[2])/p,(d[3]+120)/p]).slice(),this.titleEnable=!("titleEnable"in i)||!!i.titleEnable,this.titleAngle=i.titleAngle||0,this.titleColor=(i.titleColor||[0,0,0,1]).slice(),this.labelPad=(i.labelPad||[15,15,15,15]).slice(),this.labelAngle=(i.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(i.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=o(i.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(i.tickPad||[15,15,15,15]).slice(),this.tickAngle=(i.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(i.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=o(i.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(i.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(i.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=o(i.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var b=i.ticks||[[],[]],m=this._tickBounds;m[0]=m[1]=1/0,m[2]=m[3]=-1/0;for(var x=0;x<2;++x){var w=b[x].slice(0);w.length!==0&&(w.sort(l),m[x]=Math.min(m[x],w[0].x),m[x+2]=Math.max(m[x+2],w[w.length-1].x))}this.grid.update({bounds:m,ticks:b}),this.text.update({bounds:m,ticks:b,labels:i.labels||["x","y"],labelSize:i.labelSize||[12,12],labelFont:i.labelFont||["sans-serif","sans-serif"],title:i.title||"",titleSize:i.titleSize||18,titleFont:i.titleFont||"sans-serif"}),this.static=!!i.static,this.setDirty()},n.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var i=this.objects.length-1;i>=0;--i)this.objects[i].dispose();this.objects.length=0;for(var i=this.overlays.length-1;i>=0;--i)this.overlays[i].dispose();this.overlays.length=0,this.gl=null},n.addObject=function(i){this.objects.indexOf(i)<0&&(this.objects.push(i),this.setDirty())},n.removeObject=function(i){for(var s=this.objects,p=0;p<s.length;++p)if(s[p]===i){s.splice(p,1),this.setDirty();break}},n.addOverlay=function(i){this.overlays.indexOf(i)<0&&(this.overlays.push(i),this.setOverlayDirty())},n.removeOverlay=function(i){for(var s=this.overlays,p=0;p<s.length;++p)if(s[p]===i){s.splice(p,1),this.setOverlayDirty();break}};function h(i){var s=i.gl,p=r(s,[s.drawingBufferWidth,s.drawingBufferHeight]),d=new f(s,p);return d.grid=a(d),d.text=u(d),d.line=c(d),d.box=t(d),d.update(i),d}},{"./lib/box":311,"./lib/grid":312,"./lib/line":313,"./lib/text":315,"gl-select-static":334}],318:[function(e,v,S){v.exports=n;var r=e("right-now"),a=e("3d-view"),u=e("mouse-change"),c=e("mouse-wheel"),t=e("mouse-event-offset"),f=e("has-passive-events");function n(o,l){o=o||document.body,l=l||{};var h=[.01,1/0];"distanceLimits"in l&&(h[0]=l.distanceLimits[0],h[1]=l.distanceLimits[1]),"zoomMin"in l&&(h[0]=l.zoomMin),"zoomMax"in l&&(h[1]=l.zoomMax);var i=a({center:l.center||[0,0,0],up:l.up||[0,1,0],eye:l.eye||[0,0,10],mode:l.mode||"orbit",distanceLimits:h}),s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],p=0,d=o.clientWidth,g=o.clientHeight,b={keyBindingMode:"rotate",enableWheel:!0,view:i,element:o,delay:l.delay||16,rotateSpeed:l.rotateSpeed||1,zoomSpeed:l.zoomSpeed||1,translateSpeed:l.translateSpeed||1,flipX:!!l.flipX,flipY:!!l.flipY,modes:i.modes,_ortho:l._ortho||l.projection&&l.projection.type==="orthographic"||!1,tick:function(){var m=r(),x=this.delay,w=m-2*x;i.idle(m-x),i.recalcMatrix(w),i.flush(m-(100+x*2));for(var y=!0,T=i.computedMatrix,M=0;M<16;++M)y=y&&s[M]===T[M],s[M]=T[M];var P=o.clientWidth===d&&o.clientHeight===g;return d=o.clientWidth,g=o.clientHeight,y?!P:(p=Math.exp(i.computedRadius[0]),!0)},lookAt:function(m,x,w){i.lookAt(i.lastT(),m,x,w)},rotate:function(m,x,w){i.rotate(i.lastT(),m,x,w)},pan:function(m,x,w){i.pan(i.lastT(),m,x,w)},translate:function(m,x,w){i.translate(i.lastT(),m,x,w)}};return Object.defineProperties(b,{matrix:{get:function(){return i.computedMatrix},set:function(m){return i.setMatrix(i.lastT(),m),i.computedMatrix},enumerable:!0},mode:{get:function(){return i.getMode()},set:function(m){var x=i.computedUp.slice(),w=i.computedEye.slice(),y=i.computedCenter.slice();if(i.setMode(m),m==="turntable"){var T=r();i._active.lookAt(T,w,y,x),i._active.lookAt(T+500,w,y,[0,0,1]),i._active.flush(T)}return i.getMode()},enumerable:!0},center:{get:function(){return i.computedCenter},set:function(m){return i.lookAt(i.lastT(),null,m),i.computedCenter},enumerable:!0},eye:{get:function(){return i.computedEye},set:function(m){return i.lookAt(i.lastT(),m),i.computedEye},enumerable:!0},up:{get:function(){return i.computedUp},set:function(m){return i.lookAt(i.lastT(),null,null,m),i.computedUp},enumerable:!0},distance:{get:function(){return p},set:function(m){return i.setDistance(i.lastT(),m),m},enumerable:!0},distanceLimits:{get:function(){return i.getDistanceLimits(h)},set:function(m){return i.setDistanceLimits(m),m},enumerable:!0}}),o.addEventListener("contextmenu",function(m){return m.preventDefault(),!1}),b._lastX=-1,b._lastY=-1,b._lastMods={shift:!1,control:!1,alt:!1,meta:!1},b.enableMouseListeners=function(){b.mouseListener=u(o,m),o.addEventListener("touchstart",function(x){var w=t(x.changedTouches[0],o);m(0,w[0],w[1],b._lastMods),m(1,w[0],w[1],b._lastMods)},f?{passive:!0}:!1),o.addEventListener("touchmove",function(x){var w=t(x.changedTouches[0],o);m(1,w[0],w[1],b._lastMods),x.preventDefault()},f?{passive:!1}:!1),o.addEventListener("touchend",function(x){m(0,b._lastX,b._lastY,b._lastMods)},f?{passive:!0}:!1);function m(x,w,y,T){var M=b.keyBindingMode;if(M!==!1){var P=M==="rotate",L=M==="pan",I=M==="zoom",E=!!T.control,k=!!T.alt,C=!!T.shift,D=!!(x&1),F=!!(x&2),N=!!(x&4),G=1/o.clientHeight,U=G*(w-b._lastX),X=G*(y-b._lastY),z=b.flipX?1:-1,B=b.flipY?1:-1,j=Math.PI*b.rotateSpeed,V=r();if(b._lastX!==-1&&b._lastY!==-1&&((P&&D&&!E&&!k&&!C||D&&!E&&!k&&C)&&i.rotate(V,z*j*U,-B*j*X,0),(L&&D&&!E&&!k&&!C||F||D&&E&&!k&&!C)&&i.pan(V,-b.translateSpeed*U*p,b.translateSpeed*X*p,0),I&&D&&!E&&!k&&!C||N||D&&!E&&k&&!C)){var K=-b.zoomSpeed*X/window.innerHeight*(V-i.lastT())*100;i.pan(V,0,0,p*(Math.exp(K)-1))}return b._lastX=w,b._lastY=y,b._lastMods=T,!0}}b.wheelListener=c(o,function(x,w){if(b.keyBindingMode!==!1&&!!b.enableWheel){var y=b.flipX?1:-1,T=b.flipY?1:-1,M=r();if(Math.abs(x)>Math.abs(w))i.rotate(M,0,0,-x*y*Math.PI*b.rotateSpeed/window.innerWidth);else if(!b._ortho){var P=-b.zoomSpeed*T*w/window.innerHeight*(M-i.lastT())/20;i.pan(M,0,0,p*(Math.exp(P)-1))}}},!0)},b.enableMouseListeners(),b}},{"3d-view":54,"has-passive-events":441,"mouse-change":483,"mouse-event-offset":484,"mouse-wheel":486,"right-now":542}],319:[function(e,v,S){var r=e("glslify"),a=e("gl-shader"),u=r([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),c=r([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);v.exports=function(t){return a(t,u,c,null,[{name:"position",type:"vec2"}])}},{"gl-shader":335,glslify:320}],320:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],321:[function(e,v,S){var r=e("./camera.js"),a=e("gl-axes3d"),u=e("gl-axes3d/properties"),c=e("gl-spikes3d"),t=e("gl-select-static"),f=e("gl-fbo"),n=e("a-big-triangle"),o=e("mouse-change"),l=e("gl-mat4/perspective"),h=e("gl-mat4/ortho"),i=e("./lib/shader"),s=e("is-mobile")({tablet:!0,featureDetect:!0});v.exports={createScene:m,createCamera:r};function p(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function d(w,y){var T=null;try{T=w.getContext("webgl",y),T||(T=w.getContext("experimental-webgl",y))}catch{return null}return T}function g(w){var y=Math.round(Math.log(Math.abs(w))/Math.log(10));if(y<0){var T=Math.round(Math.pow(10,-y));return Math.ceil(w*T)/T}else if(y>0){var T=Math.round(Math.pow(10,y));return Math.ceil(w/T)*T}return Math.ceil(w)}function b(w){return typeof w=="boolean"?w:!0}function m(w){w=w||{},w.camera=w.camera||{};var y=w.canvas;if(!y)if(y=document.createElement("canvas"),w.container){var T=w.container;T.appendChild(y)}else document.body.appendChild(y);var M=w.gl;if(M||(w.glOptions&&(s=!!w.glOptions.preserveDrawingBuffer),M=d(y,w.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:s})),!M)throw new Error("webgl not supported");var P=w.bounds||[[-10,-10,-10],[10,10,10]],L=new p,I=f(M,M.drawingBufferWidth,M.drawingBufferHeight,{preferFloat:!s}),E=i(M),k=w.cameraObject&&w.cameraObject._ortho===!0||w.camera.projection&&w.camera.projection.type==="orthographic"||!1,C={eye:w.camera.eye||[2,0,0],center:w.camera.center||[0,0,0],up:w.camera.up||[0,1,0],zoomMin:w.camera.zoomMax||.1,zoomMax:w.camera.zoomMin||100,mode:w.camera.mode||"turntable",_ortho:k},D=w.axes||{},F=a(M,D);F.enable=!D.disable;var N=w.spikes||{},G=c(M,N),U=[],X=[],z=[],B=[],j=!0,$=!0,V=new Array(16),K=new Array(16),te={view:null,projection:V,model:K,_ortho:!1},$=!0,ie=[M.drawingBufferWidth,M.drawingBufferHeight],se=w.cameraObject||r(y,C),Q={gl:M,contextLost:!1,pixelRatio:w.pixelRatio||1,canvas:y,selection:L,camera:se,axes:F,axesPixels:null,spikes:G,bounds:P,objects:U,shape:ie,aspect:w.aspectRatio||[1,1,1],pickRadius:w.pickRadius||10,zNear:w.zNear||.01,zFar:w.zFar||1e3,fovy:w.fovy||Math.PI/4,clearColor:w.clearColor||[0,0,0,0],autoResize:b(w.autoResize),autoBounds:b(w.autoBounds),autoScale:!!w.autoScale,autoCenter:b(w.autoCenter),clipToBounds:b(w.clipToBounds),snapToData:!!w.snapToData,onselect:w.onselect||null,onrender:w.onrender||null,onclick:w.onclick||null,cameraParams:te,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ue){this.aspect[0]=ue.x,this.aspect[1]=ue.y,this.aspect[2]=ue.z,$=!0},setBounds:function(ue,me){this.bounds[0][ue]=me.min,this.bounds[1][ue]=me.max},setClearColor:function(ue){this.clearColor=ue},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},H=[M.drawingBufferWidth/Q.pixelRatio|0,M.drawingBufferHeight/Q.pixelRatio|0];function oe(){if(!Q._stopped&&!!Q.autoResize){var ue=y.parentNode,me=1,be=1;ue&&ue!==document.body?(me=ue.clientWidth,be=ue.clientHeight):(me=window.innerWidth,be=window.innerHeight);var Me=Math.ceil(me*Q.pixelRatio)|0,Pe=Math.ceil(be*Q.pixelRatio)|0;if(Me!==y.width||Pe!==y.height){y.width=Me,y.height=Pe;var Ge=y.style;Ge.position=Ge.position||"absolute",Ge.left="0px",Ge.top="0px",Ge.width=me+"px",Ge.height=be+"px",j=!0}}}Q.autoResize&&oe(),window.addEventListener("resize",oe);function re(){for(var ue=U.length,me=B.length,be=0;be<me;++be)z[be]=0;e:for(var be=0;be<ue;++be){var Me=U[be],Pe=Me.pickSlots;if(!Pe){X[be]=-1;continue}for(var Ge=0;Ge<me;++Ge)if(z[Ge]+Pe<255){X[be]=Ge,Me.setPickBase(z[Ge]+1),z[Ge]+=Pe;continue e}var ze=t(M,ie);X[be]=me,B.push(ze),z.push(Pe),Me.setPickBase(1),me+=1}for(;me>0&&z[me-1]===0;)z.pop(),B.pop().dispose()}Q.update=function(ue){Q._stopped||(j=!0,$=!0)},Q.add=function(ue){Q._stopped||(ue.axes=F,U.push(ue),X.push(-1),j=!0,$=!0,re())},Q.remove=function(ue){if(!Q._stopped){var me=U.indexOf(ue);me<0||(U.splice(me,1),X.pop(),j=!0,$=!0,re())}},Q.dispose=function(){if(!Q._stopped&&(Q._stopped=!0,window.removeEventListener("resize",oe),y.removeEventListener("webglcontextlost",ee),Q.mouseListener.enabled=!1,!Q.contextLost)){F.dispose(),G.dispose();for(var ue=0;ue<U.length;++ue)U[ue].dispose();I.dispose();for(var ue=0;ue<B.length;++ue)B[ue].dispose();E.dispose(),M=null,F=null,G=null,U=[]}},Q._mouseRotating=!1,Q._prevButtons=0,Q.enableMouseListeners=function(){Q.mouseListener=o(y,function(ue,me,be){if(!Q._stopped){var Me=B.length,Pe=U.length,Ge=L.object;L.distance=1/0,L.mouse[0]=me,L.mouse[1]=be,L.object=null,L.screen=null,L.dataCoordinate=L.dataPosition=null;var ze=!1;if(ue&&Q._prevButtons)Q._mouseRotating=!0;else{Q._mouseRotating&&($=!0),Q._mouseRotating=!1;for(var Qe=0;Qe<Me;++Qe){var tt=B[Qe].query(me,H[1]-be-1,Q.pickRadius);if(tt){if(tt.distance>L.distance)continue;for(var Ce=0;Ce<Pe;++Ce){var Ae=U[Ce];if(X[Ce]===Qe){var Be=Ae.pick(tt);Be&&(L.buttons=ue,L.screen=tt.coord,L.distance=tt.distance,L.object=Ae,L.index=Be.distance,L.dataPosition=Be.position,L.dataCoordinate=Be.dataCoordinate,L.data=Be,ze=!0)}}}}}Ge&&Ge!==L.object&&(Ge.highlight&&Ge.highlight(null),j=!0),L.object&&(L.object.highlight&&L.object.highlight(L.data),j=!0),ze=ze||L.object!==Ge,ze&&Q.onselect&&Q.onselect(L),ue&1&&!(Q._prevButtons&1)&&Q.onclick&&Q.onclick(L),Q._prevButtons=ue}})};function ee(){if(Q.contextLost)return!0;M.isContextLost()&&(Q.contextLost=!0,Q.mouseListener.enabled=!1,Q.selection.object=null,Q.oncontextloss&&Q.oncontextloss())}y.addEventListener("webglcontextlost",ee);function ae(){if(!ee()){M.colorMask(!0,!0,!0,!0),M.depthMask(!0),M.disable(M.BLEND),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL);for(var ue=U.length,me=B.length,be=0;be<me;++be){var Me=B[be];Me.shape=H,Me.begin();for(var Pe=0;Pe<ue;++Pe)if(X[Pe]===be){var Ge=U[Pe];Ge.drawPick&&(Ge.pixelRatio=1,Ge.drawPick(te))}Me.end()}}}var fe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],de=[fe[0].slice(),fe[1].slice()];function pe(){if(!ee()){oe();var ue=Q.camera.tick();te.view=Q.camera.matrix,j=j||ue,$=$||ue,F.pixelRatio=Q.pixelRatio,G.pixelRatio=Q.pixelRatio;var me=U.length,be=fe[0],Me=fe[1];be[0]=be[1]=be[2]=1/0,Me[0]=Me[1]=Me[2]=-1/0;for(var Pe=0;Pe<me;++Pe){var Ge=U[Pe];Ge.pixelRatio=Q.pixelRatio,Ge.axes=Q.axes,j=j||!!Ge.dirty,$=$||!!Ge.dirty;var ze=Ge.bounds;if(ze)for(var Qe=ze[0],tt=ze[1],Ce=0;Ce<3;++Ce)be[Ce]=Math.min(be[Ce],Qe[Ce]),Me[Ce]=Math.max(Me[Ce],tt[Ce])}var Ae=Q.bounds;if(Q.autoBounds)for(var Ce=0;Ce<3;++Ce){if(Me[Ce]<be[Ce])be[Ce]=-1,Me[Ce]=1;else{be[Ce]===Me[Ce]&&(be[Ce]-=1,Me[Ce]+=1);var Be=.05*(Me[Ce]-be[Ce]);be[Ce]=be[Ce]-Be,Me[Ce]=Me[Ce]+Be}Ae[0][Ce]=be[Ce],Ae[1][Ce]=Me[Ce]}for(var qe=!1,Ce=0;Ce<3;++Ce)qe=qe||de[0][Ce]!==Ae[0][Ce]||de[1][Ce]!==Ae[1][Ce],de[0][Ce]=Ae[0][Ce],de[1][Ce]=Ae[1][Ce];if($=$||qe,j=j||qe,!!j){if(qe){for(var Tt=[0,0,0],Pe=0;Pe<3;++Pe)Tt[Pe]=g((Ae[1][Pe]-Ae[0][Pe])/10);F.autoTicks?F.update({bounds:Ae,tickSpacing:Tt}):F.update({bounds:Ae})}var At=M.drawingBufferWidth,Ne=M.drawingBufferHeight;ie[0]=At,ie[1]=Ne,H[0]=Math.max(At/Q.pixelRatio,1)|0,H[1]=Math.max(Ne/Q.pixelRatio,1)|0,x(Q,k);for(var Pe=0;Pe<me;++Pe){var Ge=U[Pe];Ge.axesBounds=Ae,Q.clipToBounds&&(Ge.clipBounds=Ae)}L.object&&(Q.snapToData?G.position=L.dataCoordinate:G.position=L.dataPosition,G.bounds=Ae),$&&($=!1,ae()),Q.axesPixels=u(Q.axes,te,At,Ne),Q.onrender&&Q.onrender(),M.bindFramebuffer(M.FRAMEBUFFER,null),M.viewport(0,0,At,Ne),Q.clearRGBA(),M.depthMask(!0),M.colorMask(!0,!0,!0,!0),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.disable(M.BLEND),M.disable(M.CULL_FACE);var ct=!1;F.enable&&(ct=ct||F.isTransparent(),F.draw(te)),G.axes=F,L.object&&G.draw(te),M.disable(M.CULL_FACE);for(var Pe=0;Pe<me;++Pe){var Ge=U[Pe];Ge.axes=F,Ge.pixelRatio=Q.pixelRatio,Ge.isOpaque&&Ge.isOpaque()&&Ge.draw(te),Ge.isTransparent&&Ge.isTransparent()&&(ct=!0)}if(ct){I.shape=ie,I.bind(),M.clear(M.DEPTH_BUFFER_BIT),M.colorMask(!1,!1,!1,!1),M.depthMask(!0),M.depthFunc(M.LESS),F.enable&&F.isTransparent()&&F.drawTransparent(te);for(var Pe=0;Pe<me;++Pe){var Ge=U[Pe];Ge.isOpaque&&Ge.isOpaque()&&Ge.draw(te)}M.enable(M.BLEND),M.blendEquation(M.FUNC_ADD),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.colorMask(!0,!0,!0,!0),M.depthMask(!1),M.clearColor(0,0,0,0),M.clear(M.COLOR_BUFFER_BIT),F.isTransparent()&&F.drawTransparent(te);for(var Pe=0;Pe<me;++Pe){var Ge=U[Pe];Ge.isTransparent&&Ge.isTransparent()&&Ge.drawTransparent(te)}M.bindFramebuffer(M.FRAMEBUFFER,null),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.disable(M.DEPTH_TEST),E.bind(),I.color[0].bind(0),E.uniforms.accumBuffer=0,n(M),M.disable(M.BLEND)}j=!1;for(var Pe=0;Pe<me;++Pe)U[Pe].dirty=!1}}}function W(){Q._stopped||Q.contextLost||(pe(),requestAnimationFrame(W))}return Q.enableMouseListeners(),W(),Q.redraw=function(){Q._stopped||(j=!0,pe())},Q}function x(w,y){var T=w.bounds,M=w.cameraParams,P=M.projection,L=M.model,I=w.gl.drawingBufferWidth,E=w.gl.drawingBufferHeight,k=w.zNear,C=w.zFar,D=w.fovy,F=I/E;y?(h(P,-F,F,-1,1,k,C),M._ortho=!0):(l(P,D,F,k,C),M._ortho=!1);for(var N=0;N<16;++N)L[N]=0;L[15]=1;for(var G=0,N=0;N<3;++N)G=Math.max(G,T[1][N]-T[0][N]);for(var N=0;N<3;++N)w.autoScale?L[5*N]=w.aspect[N]/(T[1][N]-T[0][N]):L[5*N]=1/G,w.autoCenter&&(L[12+N]=-L[5*N]*.5*(T[0][N]+T[1][N]))}},{"./camera.js":318,"./lib/shader":319,"a-big-triangle":64,"gl-axes3d":250,"gl-axes3d/properties":258,"gl-fbo":269,"gl-mat4/ortho":296,"gl-mat4/perspective":297,"gl-select-static":334,"gl-spikes3d":345,"is-mobile":467,"mouse-change":483}],322:[function(e,v,S){var r=e("glslify");S.pointVertex=r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),S.pointFragment=r([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),S.pickVertex=r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),S.pickFragment=r([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:323}],323:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],324:[function(e,v,S){var r=e("gl-shader"),a=e("gl-buffer"),u=e("typedarray-pool"),c=e("./lib/shader");v.exports=o;function t(l,h,i,s,p){this.plot=l,this.offsetBuffer=h,this.pickBuffer=i,this.shader=s,this.pickShader=p,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var f=t.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(l){var h;l=l||{};function i(x,w){return x in l?l[x]:w}this.sizeMin=i("sizeMin",.5),this.sizeMax=i("sizeMax",20),this.color=i("color",[1,0,0,1]).slice(),this.areaRatio=i("areaRatio",1),this.borderColor=i("borderColor",[0,0,0,1]).slice(),this.blend=i("blend",!1);var s=l.positions.length>>>1,p=l.positions instanceof Float32Array,d=l.idToIndex instanceof Int32Array&&l.idToIndex.length>=s,g=l.positions,b=p?g:u.mallocFloat32(g.length),m=d?l.idToIndex:u.mallocInt32(s);if(p||b.set(g),!d)for(b.set(g),h=0;h<s;h++)m[h]=h;this.points=g,this.offsetBuffer.update(b),this.pickBuffer.update(m),p||u.free(b),d||u.free(m),this.pointCount=s,this.pickOffset=0};function n(l,h){var i=0,s=l.length>>>1,p;for(p=0;p<s;p++){var d=l[p*2],g=l[p*2+1];d>=h[0]&&d<=h[2]&&g>=h[1]&&g<=h[3]&&i++}return i}f.unifiedDraw=function(){var l=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0];return function(i){var s=i!==void 0,p=s?this.pickShader:this.shader,d=this.plot.gl,g=this.plot.dataBox;if(this.pointCount===0)return i;var b=g[2]-g[0],m=g[3]-g[1],x=n(this.points,g),w=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(x,.33333)));l[0]=2/b,l[4]=2/m,l[6]=-2*g[0]/b-1,l[7]=-2*g[1]/m-1,this.offsetBuffer.bind(),p.bind(),p.attributes.position.pointer(),p.uniforms.matrix=l,p.uniforms.color=this.color,p.uniforms.borderColor=this.borderColor,p.uniforms.pointCloud=w<5,p.uniforms.pointSize=w,p.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),s&&(h[0]=i&255,h[1]=i>>8&255,h[2]=i>>16&255,h[3]=i>>24&255,this.pickBuffer.bind(),p.attributes.pickId.pointer(d.UNSIGNED_BYTE),p.uniforms.pickOffset=h,this.pickOffset=i);var y=d.getParameter(d.BLEND),T=d.getParameter(d.DITHER);return y&&!this.blend&&d.disable(d.BLEND),T&&d.disable(d.DITHER),d.drawArrays(d.POINTS,0,this.pointCount),y&&!this.blend&&d.enable(d.BLEND),T&&d.enable(d.DITHER),i+this.pointCount}}(),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(l,h,i){var s=this.pickOffset,p=this.pointCount;if(i<s||i>=s+p)return null;var d=i-s,g=this.points;return{object:this,pointId:d,dataCoord:[g[2*d],g[2*d+1]]}};function o(l,h){var i=l.gl,s=a(i),p=a(i),d=r(i,c.pointVertex,c.pointFragment),g=r(i,c.pickVertex,c.pickFragment),b=new t(l,s,p,d,g);return b.update(h),l.addObject(b),b}},{"./lib/shader":322,"gl-buffer":259,"gl-shader":335,"typedarray-pool":595}],325:[function(e,v,S){v.exports=r;function r(a,u,c,t){var f=u[0],n=u[1],o=u[2],l=u[3],h=c[0],i=c[1],s=c[2],p=c[3],d,g,b,m,x;return g=f*h+n*i+o*s+l*p,g<0&&(g=-g,h=-h,i=-i,s=-s,p=-p),1-g>1e-6?(d=Math.acos(g),b=Math.sin(d),m=Math.sin((1-t)*d)/b,x=Math.sin(t*d)/b):(m=1-t,x=t),a[0]=m*f+x*h,a[1]=m*n+x*i,a[2]=m*o+x*s,a[3]=m*l+x*p,a}},{}],326:[function(e,v,S){v.exports=function(r){return!r&&r!==0?"":r.toString()}},{}],327:[function(e,v,S){var r=e("vectorize-text");v.exports=u;var a={};function u(c,t,f){var n=a[t];if(n||(n=a[t]={}),c in n)return n[c];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:t,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};o.triangles=!0;var l=r(c,o);o.triangles=!1;var h=r(c,o),i,s;if(f&&f!==1){for(i=0;i<l.positions.length;++i)for(s=0;s<l.positions[i].length;++s)l.positions[i][s]/=f;for(i=0;i<h.positions.length;++i)for(s=0;s<h.positions[i].length;++s)h.positions[i][s]/=f}var p=[[1/0,1/0],[-1/0,-1/0]],d=h.positions.length;for(i=0;i<d;++i){var g=h.positions[i];for(s=0;s<2;++s)p[0][s]=Math.min(p[0][s],g[s]),p[1][s]=Math.max(p[1][s],g[s])}return n[c]=[l,h,p]}},{"vectorize-text":600}],328:[function(e,v,S){var r=e("gl-shader"),a=e("glslify"),u=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),c=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),t=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),f=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),n=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),o=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],l={vertex:u,fragment:f,attributes:o},h={vertex:c,fragment:f,attributes:o},i={vertex:t,fragment:f,attributes:o},s={vertex:u,fragment:n,attributes:o},p={vertex:c,fragment:n,attributes:o},d={vertex:t,fragment:n,attributes:o};function g(b,m){var x=r(b,m),w=x.attributes;return w.position.location=0,w.color.location=1,w.glyph.location=2,w.id.location=3,x}S.createPerspective=function(b){return g(b,l)},S.createOrtho=function(b){return g(b,h)},S.createProject=function(b){return g(b,i)},S.createPickPerspective=function(b){return g(b,s)},S.createPickOrtho=function(b){return g(b,p)},S.createPickProject=function(b){return g(b,d)}},{"gl-shader":335,glslify:329}],329:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],330:[function(e,v,S){var r=e("is-string-blank"),a=e("gl-buffer"),u=e("gl-vao"),c=e("typedarray-pool"),t=e("gl-mat4/multiply"),f=e("./lib/shaders"),n=e("./lib/glyphs"),o=e("./lib/get-simple-string"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];v.exports=X;function h(z,B){var j=z[0],V=z[1],K=z[2],te=z[3];return z[0]=B[0]*j+B[4]*V+B[8]*K+B[12]*te,z[1]=B[1]*j+B[5]*V+B[9]*K+B[13]*te,z[2]=B[2]*j+B[6]*V+B[10]*K+B[14]*te,z[3]=B[3]*j+B[7]*V+B[11]*K+B[15]*te,z}function i(z,B,j,V){return h(V,V),h(V,V),h(V,V)}function s(z,B){this.index=z,this.dataCoordinate=this.position=B}function p(z){return z===!0||z>1?1:z}function d(z,B,j,V,K,te,$,ie,se,Q,H,oe){this.gl=z,this.pixelRatio=1,this.shader=B,this.orthoShader=j,this.projectShader=V,this.pointBuffer=K,this.colorBuffer=te,this.glyphBuffer=$,this.idBuffer=ie,this.vao=se,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=Q,this.pickOrthoShader=H,this.pickProjectShader=oe,this.points=[],this._selectResult=new s(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var g=d.prototype;g.pickSlots=1,g.setPickBase=function(z){this.pickId=z},g.isTransparent=function(){if(this.hasAlpha)return!0;for(var z=0;z<3;++z)if(this.axesProject[z]&&this.projectHasAlpha)return!0;return!1},g.isOpaque=function(){if(!this.hasAlpha)return!0;for(var z=0;z<3;++z)if(this.axesProject[z]&&!this.projectHasAlpha)return!0;return!1};var b=[0,0],m=[0,0,0],x=[0,0,0],w=[0,0,0,1],y=[0,0,0,1],T=l.slice(),M=[0,0,0],P=[[0,0,0],[0,0,0]];function L(z){return z[0]=z[1]=z[2]=0,z}function I(z,B){return z[0]=B[0],z[1]=B[1],z[2]=B[2],z[3]=1,z}function E(z,B,j,V){return z[0]=B[0],z[1]=B[1],z[2]=B[2],z[j]=V,z}function k(z){for(var B=P,j=0;j<2;++j)for(var V=0;V<3;++V)B[j][V]=Math.max(Math.min(z[j][V],1e8),-1e8);return B}function C(z,B,j,V){var K=B.axesProject,te=B.gl,$=z.uniforms,ie=j.model||l,se=j.view||l,Q=j.projection||l,H=B.axesBounds,oe=k(B.clipBounds),re;B.axes&&B.axes.lastCubeProps?re=B.axes.lastCubeProps.axis:re=[1,1,1],b[0]=2/te.drawingBufferWidth,b[1]=2/te.drawingBufferHeight,z.bind(),$.view=se,$.projection=Q,$.screenSize=b,$.highlightId=B.highlightId,$.highlightScale=B.highlightScale,$.clipBounds=oe,$.pickGroup=B.pickId/255,$.pixelRatio=V;for(var ee=0;ee<3;++ee)if(!!K[ee]){$.scale=B.projectScale[ee],$.opacity=B.projectOpacity[ee];for(var ae=T,fe=0;fe<16;++fe)ae[fe]=0;for(var fe=0;fe<4;++fe)ae[5*fe]=1;ae[5*ee]=0,re[ee]<0?ae[12+ee]=H[0][ee]:ae[12+ee]=H[1][ee],t(ae,ie,ae),$.model=ae;var de=(ee+1)%3,pe=(ee+2)%3,W=L(m),ue=L(x);W[de]=1,ue[pe]=1;var me=i(Q,se,ie,I(w,W)),be=i(Q,se,ie,I(y,ue));if(Math.abs(me[1])>Math.abs(be[1])){var Me=me;me=be,be=Me,Me=W,W=ue,ue=Me;var Pe=de;de=pe,pe=Pe}me[0]<0&&(W[de]=-1),be[1]>0&&(ue[pe]=-1);for(var Ge=0,ze=0,fe=0;fe<4;++fe)Ge+=Math.pow(ie[4*de+fe],2),ze+=Math.pow(ie[4*pe+fe],2);W[de]/=Math.sqrt(Ge),ue[pe]/=Math.sqrt(ze),$.axes[0]=W,$.axes[1]=ue,$.fragClipBounds[0]=E(M,oe[0],ee,-1e8),$.fragClipBounds[1]=E(M,oe[1],ee,1e8),B.vao.bind(),B.vao.draw(te.TRIANGLES,B.vertexCount),B.lineWidth>0&&(te.lineWidth(B.lineWidth*V),B.vao.draw(te.LINES,B.lineVertexCount,B.vertexCount)),B.vao.unbind()}}var D=[-1e8,-1e8,-1e8],F=[1e8,1e8,1e8],N=[D,F];function G(z,B,j,V,K,te,$){var ie=j.gl;if((te===j.projectHasAlpha||$)&&C(B,j,V,K),te===j.hasAlpha||$){z.bind();var se=z.uniforms;se.model=V.model||l,se.view=V.view||l,se.projection=V.projection||l,b[0]=2/ie.drawingBufferWidth,b[1]=2/ie.drawingBufferHeight,se.screenSize=b,se.highlightId=j.highlightId,se.highlightScale=j.highlightScale,se.fragClipBounds=N,se.clipBounds=j.axes.bounds,se.opacity=j.opacity,se.pickGroup=j.pickId/255,se.pixelRatio=K,j.vao.bind(),j.vao.draw(ie.TRIANGLES,j.vertexCount),j.lineWidth>0&&(ie.lineWidth(j.lineWidth*K),j.vao.draw(ie.LINES,j.lineVertexCount,j.vertexCount)),j.vao.unbind()}}g.draw=function(z){var B=this.useOrtho?this.orthoShader:this.shader;G(B,this.projectShader,this,z,this.pixelRatio,!1,!1)},g.drawTransparent=function(z){var B=this.useOrtho?this.orthoShader:this.shader;G(B,this.projectShader,this,z,this.pixelRatio,!0,!1)},g.drawPick=function(z){var B=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;G(B,this.pickProjectShader,this,z,1,!0,!0)},g.pick=function(z){if(!z||z.id!==this.pickId)return null;var B=z.value[2]+(z.value[1]<<8)+(z.value[0]<<16);if(B>=this.pointCount||B<0)return null;var j=this.points[B],V=this._selectResult;V.index=B;for(var K=0;K<3;++K)V.position[K]=V.dataCoordinate[K]=j[K];return V},g.highlight=function(z){if(!z)this.highlightId=[1,1,1,1];else{var B=z.index,j=B&255,V=B>>8&255,K=B>>16&255;this.highlightId=[j/255,V/255,K/255,0]}};function U(z,B,j,V){var K;Array.isArray(z)?B<z.length?K=z[B]:K=void 0:K=z,K=o(K);var te=!0;r(K)&&(K="\u25BC",te=!1);var $=n(K,j,V);return{mesh:$[0],lines:$[1],bounds:$[2],visible:te}}g.update=function(z){if(z=z||{},"perspective"in z&&(this.useOrtho=!z.perspective),"orthographic"in z&&(this.useOrtho=!!z.orthographic),"lineWidth"in z&&(this.lineWidth=z.lineWidth),"project"in z)if(Array.isArray(z.project))this.axesProject=z.project;else{var B=!!z.project;this.axesProject=[B,B,B]}if("projectScale"in z)if(Array.isArray(z.projectScale))this.projectScale=z.projectScale.slice();else{var j=+z.projectScale;this.projectScale=[j,j,j]}if(this.projectHasAlpha=!1,"projectOpacity"in z){if(Array.isArray(z.projectOpacity))this.projectOpacity=z.projectOpacity.slice();else{var j=+z.projectOpacity;this.projectOpacity=[j,j,j]}for(var V=0;V<3;++V)this.projectOpacity[V]=p(this.projectOpacity[V]),this.projectOpacity[V]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in z&&(this.opacity=p(z.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var K=z.position,te=z.font||"normal",$=z.alignment||[0,0],ie,se;if($.length===2)ie=$[0],se=$[1];else{ie=[],se=[];for(var V=0;V<$.length;++V)ie[V]=$[V][0],se[V]=$[V][1]}var Q=[1/0,1/0,1/0],H=[-1/0,-1/0,-1/0],oe=z.glyph,re=z.color,ee=z.size,ae=z.angle,fe=z.lineColor,de=-1,pe=0,W=0,ue=0;if(K.length){ue=K.length;e:for(var V=0;V<ue;++V){for(var me=K[V],be=0;be<3;++be)if(isNaN(me[be])||!isFinite(me[be]))continue e;var Me=U(oe,V,te,this.pixelRatio),Pe=Me.mesh,Ge=Me.lines,ze=Me.bounds;pe+=Pe.cells.length*3,W+=Ge.edges.length*2}}var Qe=pe+W,tt=c.mallocFloat(3*Qe),Ce=c.mallocFloat(4*Qe),Ae=c.mallocFloat(2*Qe),Be=c.mallocUint32(Qe);if(Qe>0){var qe=0,Tt=pe,At=[0,0,0,1],Ne=[0,0,0,1],ct=Array.isArray(re)&&Array.isArray(re[0]),Mt=Array.isArray(fe)&&Array.isArray(fe[0]);e:for(var V=0;V<ue;++V){de+=1;for(var me=K[V],be=0;be<3;++be){if(isNaN(me[be])||!isFinite(me[be]))continue e;H[be]=Math.max(H[be],me[be]),Q[be]=Math.min(Q[be],me[be])}var Me=U(oe,V,te,this.pixelRatio),Pe=Me.mesh,Ge=Me.lines,ze=Me.bounds,Wt=Me.visible;if(!Wt)At=[1,1,1,0];else if(Array.isArray(re)){var qt;if(ct?V<re.length?qt=re[V]:qt=[0,0,0,0]:qt=re,qt.length===3){for(var be=0;be<3;++be)At[be]=qt[be];At[3]=1}else if(qt.length===4){for(var be=0;be<4;++be)At[be]=qt[be];!this.hasAlpha&&qt[3]<1&&(this.hasAlpha=!0)}}else At[0]=At[1]=At[2]=0,At[3]=1;if(!Wt)Ne=[1,1,1,0];else if(Array.isArray(fe)){var qt;if(Mt?V<fe.length?qt=fe[V]:qt=[0,0,0,0]:qt=fe,qt.length===3){for(var be=0;be<3;++be)Ne[be]=qt[be];Ne[be]=1}else if(qt.length===4){for(var be=0;be<4;++be)Ne[be]=qt[be];!this.hasAlpha&&qt[3]<1&&(this.hasAlpha=!0)}}else Ne[0]=Ne[1]=Ne[2]=0,Ne[3]=1;var zt=.5;Wt?Array.isArray(ee)?V<ee.length?zt=+ee[V]:zt=12:ee?zt=+ee:this.useOrtho&&(zt=12):zt=0;var $t=0;Array.isArray(ae)?V<ae.length?$t=+ae[V]:$t=0:ae&&($t=+ae);for(var rr=Math.cos($t),Lt=Math.sin($t),me=K[V],be=0;be<3;++be)H[be]=Math.max(H[be],me[be]),Q[be]=Math.min(Q[be],me[be]);var Ct=ie,dt=se,Ct=0;Array.isArray(ie)?V<ie.length?Ct=ie[V]:Ct=0:ie&&(Ct=ie);var dt=0;Array.isArray(se)?V<se.length?dt=se[V]:dt=0:se&&(dt=se),Ct*=Ct>0?1-ze[0][0]:Ct<0?1+ze[1][0]:1,dt*=dt>0?1-ze[0][1]:dt<0?1+ze[1][1]:1;for(var lt=[Ct,dt],ke=Pe.cells||[],Ie=Pe.positions||[],be=0;be<ke.length;++be)for(var Te=ke[be],Le=0;Le<3;++Le){for(var Ue=0;Ue<3;++Ue)tt[3*qe+Ue]=me[Ue];for(var Ue=0;Ue<4;++Ue)Ce[4*qe+Ue]=At[Ue];Be[qe]=de;var et=Ie[Te[Le]];Ae[2*qe]=zt*(rr*et[0]-Lt*et[1]+lt[0]),Ae[2*qe+1]=zt*(Lt*et[0]+rr*et[1]+lt[1]),qe+=1}for(var ke=Ge.edges,Ie=Ge.positions,be=0;be<ke.length;++be)for(var Te=ke[be],Le=0;Le<2;++Le){for(var Ue=0;Ue<3;++Ue)tt[3*Tt+Ue]=me[Ue];for(var Ue=0;Ue<4;++Ue)Ce[4*Tt+Ue]=Ne[Ue];Be[Tt]=de;var et=Ie[Te[Le]];Ae[2*Tt]=zt*(rr*et[0]-Lt*et[1]+lt[0]),Ae[2*Tt+1]=zt*(Lt*et[0]+rr*et[1]+lt[1]),Tt+=1}}}this.bounds=[Q,H],this.points=K,this.pointCount=K.length,this.vertexCount=pe,this.lineVertexCount=W,this.pointBuffer.update(tt),this.colorBuffer.update(Ce),this.glyphBuffer.update(Ae),this.idBuffer.update(Be),c.free(tt),c.free(Ce),c.free(Ae),c.free(Be)},g.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function X(z){var B=z.gl,j=f.createPerspective(B),V=f.createOrtho(B),K=f.createProject(B),te=f.createPickPerspective(B),$=f.createPickOrtho(B),ie=f.createPickProject(B),se=a(B),Q=a(B),H=a(B),oe=a(B),re=u(B,[{buffer:se,size:3,type:B.FLOAT},{buffer:Q,size:4,type:B.FLOAT},{buffer:H,size:2,type:B.FLOAT},{buffer:oe,size:4,type:B.UNSIGNED_BYTE,normalized:!0}]),ee=new d(B,j,V,K,se,Q,H,oe,re,te,$,ie);return ee.update(z),ee}},{"./lib/get-simple-string":326,"./lib/glyphs":327,"./lib/shaders":328,"gl-buffer":259,"gl-mat4/multiply":295,"gl-vao":358,"is-string-blank":470,"typedarray-pool":595}],331:[function(e,v,S){var r=e("glslify");S.boxVertex=r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),S.boxFragment=r([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:332}],332:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],333:[function(e,v,S){var r=e("gl-shader"),a=e("gl-buffer"),u=e("./lib/shaders");v.exports=f;function c(n,o,l){this.plot=n,this.boxBuffer=o,this.boxShader=l,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var t=c.prototype;t.draw=function(){if(!!this.enabled){var n=this.plot,o=this.selectBox,l=this.borderWidth;this.innerFill;var h=this.innerColor;this.outerFill;var i=this.outerColor,s=this.borderColor,p=n.box,d=n.screenBox,g=n.dataBox,b=n.viewBox,m=n.pixelRatio,x=(o[0]-g[0])*(b[2]-b[0])/(g[2]-g[0])+b[0],w=(o[1]-g[1])*(b[3]-b[1])/(g[3]-g[1])+b[1],y=(o[2]-g[0])*(b[2]-b[0])/(g[2]-g[0])+b[0],T=(o[3]-g[1])*(b[3]-b[1])/(g[3]-g[1])+b[1];if(x=Math.max(x,b[0]),w=Math.max(w,b[1]),y=Math.min(y,b[2]),T=Math.min(T,b[3]),!(y<x||T<w)){p.bind();var M=d[2]-d[0],P=d[3]-d[1];if(this.outerFill&&(p.drawBox(0,0,M,w,i),p.drawBox(0,w,x,T,i),p.drawBox(0,T,M,P,i),p.drawBox(y,w,M,T,i)),this.innerFill&&p.drawBox(x,w,y,T,h),l>0){var L=l*m;p.drawBox(x-L,w-L,y+L,w+L,s),p.drawBox(x-L,T-L,y+L,T+L,s),p.drawBox(x-L,w-L,x+L,T+L,s),p.drawBox(y-L,w-L,y+L,T+L,s)}}}},t.update=function(n){n=n||{},this.innerFill=!!n.innerFill,this.outerFill=!!n.outerFill,this.innerColor=(n.innerColor||[0,0,0,.5]).slice(),this.outerColor=(n.outerColor||[0,0,0,.5]).slice(),this.borderColor=(n.borderColor||[0,0,0,1]).slice(),this.borderWidth=n.borderWidth||0,this.selectBox=(n.selectBox||this.selectBox).slice()},t.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function f(n,o){var l=n.gl,h=a(l,[0,0,0,1,1,0,1,1]),i=r(l,u.boxVertex,u.boxFragment),s=new c(n,h,i);return s.update(o),n.addOverlay(s),s}},{"./lib/shaders":331,"gl-buffer":259,"gl-shader":335}],334:[function(e,v,S){v.exports=l;var r=e("gl-fbo"),a=e("typedarray-pool"),u=e("ndarray"),c=e("bit-twiddle").nextPow2,t=function(h,i,s){for(var p=1e8,d=-1,g=-1,b=h.shape[0],m=h.shape[1],x=0;x<b;x++)for(var w=0;w<m;w++){var y=h.get(x,w,0),T=h.get(x,w,1),M=h.get(x,w,2),P=h.get(x,w,3);if(y<255||T<255||M<255||P<255){var L=i-x,I=s-w,E=L*L+I*I;E<p&&(p=E,d=x,g=w)}}return[d,g,p]};function f(h,i,s,p,d){this.coord=[h,i],this.id=s,this.value=p,this.distance=d}function n(h,i,s){this.gl=h,this.fbo=i,this.buffer=s,this._readTimeout=null;var p=this;this._readCallback=function(){!p.gl||(i.bind(),h.readPixels(0,0,i.shape[0],i.shape[1],h.RGBA,h.UNSIGNED_BYTE,p.buffer),p._readTimeout=null)}}var o=n.prototype;Object.defineProperty(o,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(h){if(!!this.gl){this.fbo.shape=h;var i=this.fbo.shape[0],s=this.fbo.shape[1];if(s*i*4>this.buffer.length){a.free(this.buffer);for(var p=this.buffer=a.mallocUint8(c(s*i*4)),d=0;d<s*i*4;++d)p[d]=255}return h}}}),o.begin=function(){var h=this.gl;this.shape,h&&(this.fbo.bind(),h.clearColor(1,1,1,1),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT))},o.end=function(){var h=this.gl;!h||(h.bindFramebuffer(h.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},o.query=function(h,i,s){if(!this.gl)return null;var p=this.fbo.shape.slice();h=h|0,i=i|0,typeof s!="number"&&(s=1);var d=Math.min(Math.max(h-s,0),p[0])|0,g=Math.min(Math.max(h+s,0),p[0])|0,b=Math.min(Math.max(i-s,0),p[1])|0,m=Math.min(Math.max(i+s,0),p[1])|0;if(g<=d||m<=b)return null;var x=[g-d,m-b],w=u(this.buffer,[x[0],x[1],4],[4,p[0]*4,1],4*(d+p[0]*b)),y=t(w.hi(x[0],x[1],1),s,s),T=y[0],M=y[1];if(T<0||Math.pow(this.radius,2)<y[2])return null;var P=w.get(T,M,0),L=w.get(T,M,1),I=w.get(T,M,2),E=w.get(T,M,3);return new f(T+d|0,M+b|0,P,[L,I,E],Math.sqrt(y[2]))},o.dispose=function(){!this.gl||(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function l(h,i){var s=i[0],p=i[1],d={},g=r(h,s,p,d),b=a.mallocUint8(s*p*4);return new n(h,g,b)}},{"bit-twiddle":97,"gl-fbo":269,ndarray:495,"typedarray-pool":595}],335:[function(e,v,S){var r=e("./lib/create-uniforms"),a=e("./lib/create-attributes"),u=e("./lib/reflect"),c=e("./lib/shader-cache"),t=e("./lib/runtime-reflect"),f=e("./lib/GLError");function n(i){this.gl=i,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var o=n.prototype;o.bind=function(){this.program||this._relink();var i,s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),p=this.gl.lastAttribCount;if(s>p)for(i=p;i<s;i++)this.gl.enableVertexAttribArray(i);else if(p>s)for(i=s;i<p;i++)this.gl.disableVertexAttribArray(i);this.gl.lastAttribCount=s,this.gl.useProgram(this.program)},o.dispose=function(){for(var i=this.gl.lastAttribCount,s=0;s<i;s++)this.gl.disableVertexAttribArray(s);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function l(i,s){return i.name<s.name?-1:1}o.update=function(i,s,p,d){if(!s||arguments.length===1){var g=i;i=g.vertex,s=g.fragment,p=g.uniforms,d=g.attributes}var b=this,m=b.gl,x=b._vref;b._vref=c.shader(m,m.VERTEX_SHADER,i),x&&x.dispose(),b.vertShader=b._vref.shader;var w=this._fref;if(b._fref=c.shader(m,m.FRAGMENT_SHADER,s),w&&w.dispose(),b.fragShader=b._fref.shader,!p||!d){var y=m.createProgram();if(m.attachShader(y,b.fragShader),m.attachShader(y,b.vertShader),m.linkProgram(y),!m.getProgramParameter(y,m.LINK_STATUS)){var T=m.getProgramInfoLog(y);throw new f(T,"Error linking program:"+T)}p=p||t.uniforms(m,y),d=d||t.attributes(m,y),m.deleteProgram(y)}d=d.slice(),d.sort(l);var M=[],P=[],L=[],I;for(I=0;I<d.length;++I){var E=d[I];if(E.type.indexOf("mat")>=0){for(var k=E.type.charAt(E.type.length-1)|0,C=new Array(k),D=0;D<k;++D)C[D]=L.length,P.push(E.name+"["+D+"]"),typeof E.location=="number"?L.push(E.location+D):Array.isArray(E.location)&&E.location.length===k&&typeof E.location[D]=="number"?L.push(E.location[D]|0):L.push(-1);M.push({name:E.name,type:E.type,locations:C})}else M.push({name:E.name,type:E.type,locations:[L.length]}),P.push(E.name),typeof E.location=="number"?L.push(E.location|0):L.push(-1)}var F=0;for(I=0;I<L.length;++I)if(L[I]<0){for(;L.indexOf(F)>=0;)F+=1;L[I]=F}var N=new Array(p.length);function G(){b.program=c.program(m,b._vref,b._fref,P,L);for(var U=0;U<p.length;++U)N[U]=m.getUniformLocation(b.program,p[U].name)}G(),b._relink=G,b.types={uniforms:u(p),attributes:u(d)},b.attributes=a(m,b,M,L),Object.defineProperty(b,"uniforms",r(m,b,p,N))};function h(i,s,p,d,g){var b=new n(i);return b.update(s,p,d,g),b}v.exports=h},{"./lib/GLError":336,"./lib/create-attributes":337,"./lib/create-uniforms":338,"./lib/reflect":339,"./lib/runtime-reflect":340,"./lib/shader-cache":341}],336:[function(e,v,S){function r(a,u,c){this.shortMessage=u||"",this.longMessage=c||"",this.rawError=a||"",this.message="gl-shader: "+(u||a||"")+(c?`
`+c:""),this.stack=new Error().stack}r.prototype=new Error,r.prototype.name="GLError",r.prototype.constructor=r,v.exports=r},{}],337:[function(e,v,S){v.exports=f;var r=e("./GLError");function a(n,o,l,h,i,s){this._gl=n,this._wrapper=o,this._index=l,this._locations=h,this._dimension=i,this._constFunc=s}var u=a.prototype;u.pointer=function(o,l,h,i){var s=this,p=s._gl,d=s._locations[s._index];p.vertexAttribPointer(d,s._dimension,o||p.FLOAT,!!l,h||0,i||0),p.enableVertexAttribArray(d)},u.set=function(n,o,l,h){return this._constFunc(this._locations[this._index],n,o,l,h)},Object.defineProperty(u,"location",{get:function(){return this._locations[this._index]},set:function(n){return n!==this._locations[this._index]&&(this._locations[this._index]=n|0,this._wrapper.program=null),n|0}});function c(n,o,l,h,i,s,p){for(var d=["gl","v"],g=[],b=0;b<i;++b)d.push("x"+b),g.push("x"+b);d.push("if(x0.length===void 0){return gl.vertexAttrib"+i+"f(v,"+g.join()+")}else{return gl.vertexAttrib"+i+"fv(v,x0)}");var m=Function.apply(null,d),x=new a(n,o,l,h,i,m);Object.defineProperty(s,p,{set:function(w){return n.disableVertexAttribArray(h[l]),m(n,h[l],w),w},get:function(){return x},enumerable:!0})}function t(n,o,l,h,i,s,p){for(var d=new Array(i),g=new Array(i),b=0;b<i;++b)c(n,o,l[b],h,i,d,b),g[b]=d[b];Object.defineProperty(d,"location",{set:function(w){if(Array.isArray(w))for(var y=0;y<i;++y)g[y].location=w[y];else for(var y=0;y<i;++y)g[y].location=w+y;return w},get:function(){for(var w=new Array(i),y=0;y<i;++y)w[y]=h[l[y]];return w},enumerable:!0}),d.pointer=function(w,y,T,M){w=w||n.FLOAT,y=!!y,T=T||i*i,M=M||0;for(var P=0;P<i;++P){var L=h[l[P]];n.vertexAttribPointer(L,i,w,y,T,M+P*i),n.enableVertexAttribArray(L)}};var m=new Array(i),x=n["vertexAttrib"+i+"fv"];Object.defineProperty(s,p,{set:function(w){for(var y=0;y<i;++y){var T=h[l[y]];if(n.disableVertexAttribArray(T),Array.isArray(w[0]))x.call(n,T,w[y]);else{for(var M=0;M<i;++M)m[M]=w[i*y+M];x.call(n,T,m)}}return w},get:function(){return d},enumerable:!0})}function f(n,o,l,h){for(var i={},s=0,p=l.length;s<p;++s){var d=l[s],g=d.name,b=d.type,m=d.locations;switch(b){case"bool":case"int":case"float":c(n,o,m[0],h,1,i,g);break;default:if(b.indexOf("vec")>=0){var x=b.charCodeAt(b.length-1)-48;if(x<2||x>4)throw new r("","Invalid data type for attribute "+g+": "+b);c(n,o,m[0],h,x,i,g)}else if(b.indexOf("mat")>=0){var x=b.charCodeAt(b.length-1)-48;if(x<2||x>4)throw new r("","Invalid data type for attribute "+g+": "+b);t(n,o,m,h,x,i,g)}else throw new r("","Unknown data type for attribute "+g+": "+b);break}}return i}},{"./GLError":336}],338:[function(e,v,S){var r=e("./reflect"),a=e("./GLError");v.exports=t;function u(f){var n=new Function("y","return function(){return y}");return n(f)}function c(f,n){for(var o=new Array(f),l=0;l<f;++l)o[l]=n;return o}function t(f,n,o,l){function h(x){var w=new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+x+"])}");return w(f,n,l)}function i(x,w,y){switch(y){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+w+"],obj"+x+")";case"float":return"gl.uniform1f(locations["+w+"],obj"+x+")";default:var T=y.indexOf("vec");if(0<=T&&T<=1&&y.length===4+T){var M=y.charCodeAt(y.length-1)-48;if(M<2||M>4)throw new a("","Invalid data type");switch(y.charAt(0)){case"b":case"i":return"gl.uniform"+M+"iv(locations["+w+"],obj"+x+")";case"v":return"gl.uniform"+M+"fv(locations["+w+"],obj"+x+")";default:throw new a("","Unrecognized data type for vector "+name+": "+y)}}else if(y.indexOf("mat")===0&&y.length===4){var M=y.charCodeAt(y.length-1)-48;if(M<2||M>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+y);return"gl.uniformMatrix"+M+"fv(locations["+w+"],false,obj"+x+")"}else throw new a("","Unknown uniform data type for "+name+": "+y);break}}function s(x,w){if(typeof w!="object")return[[x,w]];var y=[];for(var T in w){var M=w[T],P=x;parseInt(T)+""===T?P+="["+T+"]":P+="."+T,typeof M=="object"?y.push.apply(y,s(P,M)):y.push([P,M])}return y}function p(x){for(var w=["return function updateProperty(obj){"],y=s("",x),T=0;T<y.length;++T){var M=y[T],P=M[0],L=M[1];l[L]&&w.push(i(P,L,o[L].type))}w.push("return obj}");var I=new Function("gl","locations",w.join(`
`));return I(f,l)}function d(x){switch(x){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var w=x.indexOf("vec");if(0<=w&&w<=1&&x.length===4+w){var y=x.charCodeAt(x.length-1)-48;if(y<2||y>4)throw new a("","Invalid data type");return x.charAt(0)==="b"?c(y,!1):c(y,0)}else if(x.indexOf("mat")===0&&x.length===4){var y=x.charCodeAt(x.length-1)-48;if(y<2||y>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+x);return c(y*y,0)}else throw new a("","Unknown uniform data type for "+name+": "+x)}}function g(x,w,y){if(typeof y=="object"){var T=b(y);Object.defineProperty(x,w,{get:u(T),set:p(y),enumerable:!0,configurable:!1})}else l[y]?Object.defineProperty(x,w,{get:h(y),set:p(y),enumerable:!0,configurable:!1}):x[w]=d(o[y].type)}function b(x){var w;if(Array.isArray(x)){w=new Array(x.length);for(var y=0;y<x.length;++y)g(w,y,x[y])}else{w={};for(var T in x)g(w,T,x[T])}return w}var m=r(o,!0);return{get:u(b(m)),set:p(m),enumerable:!0,configurable:!0}}},{"./GLError":336,"./reflect":339}],339:[function(e,v,S){v.exports=r;function r(a,u){for(var c={},t=0;t<a.length;++t)for(var f=a[t].name,n=f.split("."),o=c,l=0;l<n.length;++l){var h=n[l].split("[");if(h.length>1){h[0]in o||(o[h[0]]=[]),o=o[h[0]];for(var i=1;i<h.length;++i){var s=parseInt(h[i]);i<h.length-1||l<n.length-1?(s in o||(i<h.length-1?o[s]=[]:o[s]={}),o=o[s]):u?o[s]=t:o[s]=a[t].type}}else l<n.length-1?(h[0]in o||(o[h[0]]={}),o=o[h[0]]):u?o[h[0]]=t:o[h[0]]=a[t].type}return c}},{}],340:[function(e,v,S){S.uniforms=c,S.attributes=t;var r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function u(f,n){if(!a){var o=Object.keys(r);a={};for(var l=0;l<o.length;++l){var h=o[l];a[f[h]]=r[h]}}return a[n]}function c(f,n){for(var o=f.getProgramParameter(n,f.ACTIVE_UNIFORMS),l=[],h=0;h<o;++h){var i=f.getActiveUniform(n,h);if(i){var s=u(f,i.type);if(i.size>1)for(var p=0;p<i.size;++p)l.push({name:i.name.replace("[0]","["+p+"]"),type:s});else l.push({name:i.name,type:s})}}return l}function t(f,n){for(var o=f.getProgramParameter(n,f.ACTIVE_ATTRIBUTES),l=[],h=0;h<o;++h){var i=f.getActiveAttrib(n,h);i&&l.push({name:i.name,type:u(f,i.type)})}return l}},{}],341:[function(e,v,S){S.shader=s,S.program=p;var r=e("./GLError"),a=e("gl-format-compiler-error"),u=typeof WeakMap>"u"?e("weakmap-shim"):WeakMap,c=new u,t=0;function f(d,g,b,m,x,w,y){this.id=d,this.src=g,this.type=b,this.shader=m,this.count=w,this.programs=[],this.cache=y}f.prototype.dispose=function(){if(--this.count===0){for(var d=this.cache,g=d.gl,b=this.programs,m=0,x=b.length;m<x;++m){var w=d.programs[b[m]];w&&(delete d.programs[m],g.deleteProgram(w))}g.deleteShader(this.shader),delete d.shaders[this.type===g.FRAGMENT_SHADER|0][this.src]}};function n(d){this.gl=d,this.shaders=[{},{}],this.programs={}}var o=n.prototype;function l(d,g,b){var m=d.createShader(g);if(d.shaderSource(m,b),d.compileShader(m),!d.getShaderParameter(m,d.COMPILE_STATUS)){var x=d.getShaderInfoLog(m);try{var w=a(x,b,g)}catch(y){throw console.warn("Failed to format compiler error: "+y),new r(x,`Error compiling shader:
`+x)}throw new r(x,w.short,w.long)}return m}o.getShaderReference=function(d,g){var b=this.gl,m=this.shaders[d===b.FRAGMENT_SHADER|0],x=m[g];if(!x||!b.isShader(x.shader)){var w=l(b,d,g);x=m[g]=new f(t++,g,d,w,[],1,this)}else x.count+=1;return x};function h(d,g,b,m,x){var w=d.createProgram();d.attachShader(w,g),d.attachShader(w,b);for(var y=0;y<m.length;++y)d.bindAttribLocation(w,x[y],m[y]);if(d.linkProgram(w),!d.getProgramParameter(w,d.LINK_STATUS)){var T=d.getProgramInfoLog(w);throw new r(T,"Error linking program: "+T)}return w}o.getProgram=function(d,g,b,m){var x=[d.id,g.id,b.join(":"),m.join(":")].join("@"),w=this.programs[x];return(!w||!this.gl.isProgram(w))&&(this.programs[x]=w=h(this.gl,d.shader,g.shader,b,m),d.programs.push(x),g.programs.push(x)),w};function i(d){var g=c.get(d);return g||(g=new n(d),c.set(d,g)),g}function s(d,g,b){return i(d).getShaderReference(g,b)}function p(d,g,b,m,x){return i(d).getProgram(g,b,m,x)}},{"./GLError":336,"gl-format-compiler-error":270,"weakmap-shim":605}],342:[function(e,v,S){v.exports=u;function r(c){this.plot=c,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var a=r.prototype;a.update=function(c){c=c||{},this.enable=(c.enable||[!0,!0,!1,!1]).slice(),this.width=(c.width||[1,1,1,1]).slice(),this.color=(c.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(t){return t.slice()}),this.center=(c.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},a.draw=function(){var c=this.enable,t=this.width,f=this.color,n=this.center,o=this.plot,l=o.line,h=o.dataBox,i=o.viewBox;if(l.bind(),h[0]<=n[0]&&n[0]<=h[2]&&h[1]<=n[1]&&n[1]<=h[3]){var s=i[0]+(n[0]-h[0])/(h[2]-h[0])*(i[2]-i[0]),p=i[1]+(n[1]-h[1])/(h[3]-h[1])*(i[3]-i[1]);c[0]&&l.drawLine(s,p,i[0],p,t[0],f[0]),c[1]&&l.drawLine(s,p,s,i[1],t[1],f[1]),c[2]&&l.drawLine(s,p,i[2],p,t[2],f[2]),c[3]&&l.drawLine(s,p,s,i[3],t[3],f[3])}},a.dispose=function(){this.plot.removeOverlay(this)};function u(c,t){var f=new r(c);return f.update(t),c.addOverlay(f),f}},{}],343:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],344:[function(e,v,S){var r=e("glslify"),a=e("gl-shader"),u=r([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),c=r([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);v.exports=function(t){return a(t,u,c,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":335,glslify:343}],345:[function(e,v,S){var r=e("gl-buffer"),a=e("gl-vao"),u=e("./shaders/index");v.exports=h;var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(i,s,p,d){this.gl=i,this.buffer=s,this.vao=p,this.shader=d,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var f=t.prototype,n=[0,0,0],o=[0,0,0],l=[0,0];f.isTransparent=function(){return!1},f.drawTransparent=function(i){},f.draw=function(i){var s=this.gl,p=this.vao,d=this.shader;p.bind(),d.bind();var g=i.model||c,b=i.view||c,m=i.projection||c,x;this.axes&&(x=this.axes.lastCubeProps.axis);for(var w=n,y=o,T=0;T<3;++T)x&&x[T]<0?(w[T]=this.bounds[0][T],y[T]=this.bounds[1][T]):(w[T]=this.bounds[1][T],y[T]=this.bounds[0][T]);l[0]=s.drawingBufferWidth,l[1]=s.drawingBufferHeight,d.uniforms.model=g,d.uniforms.view=b,d.uniforms.projection=m,d.uniforms.coordinates=[this.position,w,y],d.uniforms.colors=this.colors,d.uniforms.screenShape=l;for(var T=0;T<3;++T)d.uniforms.lineWidth=this.lineWidth[T]*this.pixelRatio,this.enabled[T]&&(p.draw(s.TRIANGLES,6,6*T),this.drawSides[T]&&p.draw(s.TRIANGLES,12,18+12*T));p.unbind()},f.update=function(i){!i||("bounds"in i&&(this.bounds=i.bounds),"position"in i&&(this.position=i.position),"lineWidth"in i&&(this.lineWidth=i.lineWidth),"colors"in i&&(this.colors=i.colors),"enabled"in i&&(this.enabled=i.enabled),"drawSides"in i&&(this.drawSides=i.drawSides))},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function h(i,s){var p=[];function d(w,y,T,M,P,L){var I=[w,y,T,0,0,0,1];I[M+3]=1,I[M]=P,p.push.apply(p,I),I[6]=-1,p.push.apply(p,I),I[M]=L,p.push.apply(p,I),p.push.apply(p,I),I[6]=1,p.push.apply(p,I),I[M]=P,p.push.apply(p,I)}d(0,0,0,0,0,1),d(0,0,0,1,0,1),d(0,0,0,2,0,1),d(1,0,0,1,-1,1),d(1,0,0,2,-1,1),d(0,1,0,0,-1,1),d(0,1,0,2,-1,1),d(0,0,1,0,-1,1),d(0,0,1,1,-1,1);var g=r(i,p),b=a(i,[{type:i.FLOAT,buffer:g,size:3,offset:0,stride:28},{type:i.FLOAT,buffer:g,size:3,offset:12,stride:28},{type:i.FLOAT,buffer:g,size:1,offset:24,stride:28}]),m=u(i);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.weight.location=2;var x=new t(i,g,b,m);return x.update(s),x}},{"./shaders/index":344,"gl-buffer":259,"gl-vao":358}],346:[function(e,v,S){var r=e("glslify"),a=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),u=r([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),c=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),t=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);S.meshShader={vertex:a,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},S.pickShader={vertex:c,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:347}],347:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],348:[function(e,v,S){var r=e("gl-vec3"),a=e("gl-vec4"),u=["xyz","xzy","yxz","yzx","zxy","zyx"],c=function(p,d,g,b){for(var m=p.points,x=p.velocities,w=p.divergences,y=[],T=[],M=[],P=[],L=[],I=[],E=0,k=0,C=a.create(),D=a.create(),F=8,N=0;N<m.length;N++){var G=m[N],U=x[N],X=w[N];d===0&&(X=g*.05),k=r.length(U)/b,C=a.create(),r.copy(C,U),C[3]=X;for(var z=0;z<F;z++)L[z]=[G[0],G[1],G[2],z];if(P.length>0)for(var z=0;z<F;z++){var B=(z+1)%F;y.push(P[z],L[z],L[B],L[B],P[B],P[z]),M.push(D,C,C,C,D,D),I.push(E,k,k,k,E,E);var j=y.length;T.push([j-6,j-5,j-4],[j-3,j-2,j-1])}var V=P;P=L,L=V;var K=D;D=C,C=K;var te=E;E=k,k=te}return{positions:y,cells:T,vectors:M,vertexIntensity:I}},t=function(p,d,g,b){for(var m=0,x=0;x<p.length;x++)for(var w=p[x].velocities,y=0;y<w.length;y++)m=Math.max(m,r.length(w[y]));for(var T=p.map(function(N){return c(N,g,b,m)}),M=[],P=[],L=[],I=[],x=0;x<T.length;x++){var E=T[x],k=M.length;M=M.concat(E.positions),L=L.concat(E.vectors),I=I.concat(E.vertexIntensity);for(var y=0;y<E.cells.length;y++){var C=E.cells[y],D=[];P.push(D);for(var F=0;F<C.length;F++)D.push(C[F]+k)}}return{positions:M,cells:P,vectors:L,vertexIntensity:I,colormap:d}},f=function(p,d){var g=p.length,b;for(b=0;b<g;b++){var m=p[b];if(m===d)return b;if(m>d)return b-1}return b},n=function(p,d,g){return p<d?d:p>g?g:p},o=function(p,d,g){var b=d.vectors,m=d.meshgrid,x=p[0],w=p[1],y=p[2],T=m[0].length,M=m[1].length,P=m[2].length,L=f(m[0],x),I=f(m[1],w),E=f(m[2],y),k=L+1,C=I+1,D=E+1;if(L=n(L,0,T-1),k=n(k,0,T-1),I=n(I,0,M-1),C=n(C,0,M-1),E=n(E,0,P-1),D=n(D,0,P-1),L<0||I<0||E<0||k>T-1||C>M-1||D>P-1)return r.create();var F=m[0][L],N=m[0][k],G=m[1][I],U=m[1][C],X=m[2][E],z=m[2][D],B=(x-F)/(N-F),j=(w-G)/(U-G),V=(y-X)/(z-X);isFinite(B)||(B=.5),isFinite(j)||(j=.5),isFinite(V)||(V=.5);var K,te,$,ie,se,Q;switch(g.reversedX&&(L=T-1-L,k=T-1-k),g.reversedY&&(I=M-1-I,C=M-1-C),g.reversedZ&&(E=P-1-E,D=P-1-D),g.filled){case 5:se=E,Q=D,$=I*P,ie=C*P,K=L*P*M,te=k*P*M;break;case 4:se=E,Q=D,K=L*P,te=k*P,$=I*P*T,ie=C*P*T;break;case 3:$=I,ie=C,se=E*M,Q=D*M,K=L*M*P,te=k*M*P;break;case 2:$=I,ie=C,K=L*M,te=k*M,se=E*M*T,Q=D*M*T;break;case 1:K=L,te=k,se=E*T,Q=D*T,$=I*T*P,ie=C*T*P;break;default:K=L,te=k,$=I*T,ie=C*T,se=E*T*M,Q=D*T*M;break}var H=b[K+$+se],oe=b[K+$+Q],re=b[K+ie+se],ee=b[K+ie+Q],ae=b[te+$+se],fe=b[te+$+Q],de=b[te+ie+se],pe=b[te+ie+Q],W=r.create(),ue=r.create(),me=r.create(),be=r.create();r.lerp(W,H,ae,B),r.lerp(ue,oe,fe,B),r.lerp(me,re,de,B),r.lerp(be,ee,pe,B);var Me=r.create(),Pe=r.create();r.lerp(Me,W,me,j),r.lerp(Pe,ue,be,j);var Ge=r.create();return r.lerp(Ge,Me,Pe,V),Ge},l=function(p){var d=1/0;p.sort(function(x,w){return x-w});for(var g=p.length,b=1;b<g;b++){var m=Math.abs(p[b]-p[b-1]);m<d&&(d=m)}return d},h=function(p){for(var d=[],g=[],b=[],m={},x={},w={},y=p.length,T=0;T<y;T++){var M=p[T],P=M[0],L=M[1],I=M[2];m[P]||(d.push(P),m[P]=!0),x[L]||(g.push(L),x[L]=!0),w[I]||(b.push(I),w[I]=!0)}var E=l(d),k=l(g),C=l(b),D=Math.min(E,k,C);return isFinite(D)?D:1};v.exports=function(p,d){var g=p.startingPositions,b=p.maxLength||1e3,m=p.tubeSize||1,x=p.absoluteTubeSize,w=p.gridFill||"+x+y+z",y={};w.indexOf("-x")!==-1&&(y.reversedX=!0),w.indexOf("-y")!==-1&&(y.reversedY=!0),w.indexOf("-z")!==-1&&(y.reversedZ=!0),y.filled=u.indexOf(w.replace(/-/g,"").replace(/\+/g,""));var T=p.getVelocity||function(fe){return o(fe,p,y)},M=p.getDivergence||function(fe,de){var pe=r.create(),W=1e-4;r.add(pe,fe,[W,0,0]);var ue=T(pe);r.subtract(ue,ue,de),r.scale(ue,ue,1/W),r.add(pe,fe,[0,W,0]);var me=T(pe);r.subtract(me,me,de),r.scale(me,me,1/W),r.add(pe,fe,[0,0,W]);var be=T(pe);return r.subtract(be,be,de),r.scale(be,be,1/W),r.add(pe,ue,me),r.add(pe,pe,be),pe},P=[],L=d[0][0],I=d[0][1],E=d[0][2],k=d[1][0],C=d[1][1],D=d[1][2],F=function(fe){var de=fe[0],pe=fe[1],W=fe[2];return!(de<L||de>k||pe<I||pe>C||W<E||W>D)},N=r.distance(d[0],d[1]),G=10*N/b,U=G*G,X=1,z=0,B=g.length;B>1&&(X=h(g));for(var j=0;j<B;j++){var V=r.create();r.copy(V,g[j]);var K=[V],te=[],$=T(V),ie=V;te.push($);var se=[],Q=M(V,$),H=r.length(Q);isFinite(H)&&H>z&&(z=H),se.push(H),P.push({points:K,velocities:te,divergences:se});for(var oe=0;oe<b*100&&K.length<b&&F(V);){oe++;var re=r.clone($),ee=r.squaredLength(re);if(ee===0)break;if(ee>U&&r.scale(re,re,G/Math.sqrt(ee)),r.add(re,re,V),$=T(re),r.squaredDistance(ie,re)-U>-1e-4*U){K.push(re),ie=re,te.push($);var Q=M(re,$),H=r.length(Q);isFinite(H)&&H>z&&(z=H),se.push(H)}V=re}}var ae=t(P,p.colormap,z,X);return x?ae.tubeScale=x:(z===0&&(z=1),ae.tubeScale=m*.5*X/z),ae};var i=e("./lib/shaders"),s=e("gl-cone3d").createMesh;v.exports.createTubeMesh=function(p,d){return s(p,d,{shaders:i,traceType:"streamtube"})}},{"./lib/shaders":346,"gl-cone3d":260,"gl-vec3":377,"gl-vec4":413}],349:[function(e,v,S){var r=e("gl-shader"),a=e("glslify"),u=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),c=a([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),t=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),f=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);S.createShader=function(n){var o=r(n,u,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},S.createPickShader=function(n){var o=r(n,u,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},S.createContourShader=function(n){var o=r(n,t,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o},S.createPickContourShader=function(n){var o=r(n,t,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o}},{"gl-shader":335,glslify:350}],350:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],351:[function(e,v,S){v.exports=te;var r=e("bit-twiddle"),a=e("gl-buffer"),u=e("gl-vao"),c=e("gl-texture2d"),t=e("typedarray-pool"),f=e("colormap"),n=e("ndarray-ops"),o=e("ndarray-pack"),l=e("ndarray"),h=e("surface-nets"),i=e("gl-mat4/multiply"),s=e("gl-mat4/invert"),p=e("binary-search-bounds"),d=e("ndarray-gradient"),g=e("./lib/shaders"),b=g.createShader,m=g.createContourShader,x=g.createPickShader,w=g.createPickContourShader,y=4*(4+3+3),T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],M=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],P=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var $=0;$<3;++$){var ie=P[$],se=($+1)%3,Q=($+2)%3;ie[se+0]=1,ie[Q+3]=1,ie[$+6]=1}})();function L($,ie,se,Q,H){this.position=$,this.index=ie,this.uv=se,this.level=Q,this.dataCoordinate=H}var I=256;function E($,ie,se,Q,H,oe,re,ee,ae,fe,de,pe,W,ue,me){this.gl=$,this.shape=ie,this.bounds=se,this.objectOffset=me,this.intensityBounds=[],this._shader=Q,this._pickShader=H,this._coordinateBuffer=oe,this._vao=re,this._colorMap=ee,this._contourShader=ae,this._contourPickShader=fe,this._contourBuffer=de,this._contourVAO=pe,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new L([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=W,this._dynamicVAO=ue,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[l(t.mallocFloat(1024),[0,0]),l(t.mallocFloat(1024),[0,0]),l(t.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var k=E.prototype;k.genColormap=function($,ie){var se=!1,Q=o([f({colormap:$,nshades:I,format:"rgba"}).map(function(H,oe){var re=ie?C(oe/255,ie):H[3];return re<1&&(se=!0),[H[0],H[1],H[2],255*re]})]);return n.divseq(Q,255),this.hasAlphaScale=se,Q},k.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},k.isOpaque=function(){return!this.isTransparent()},k.pickSlots=1,k.setPickBase=function($){this.pickId=$};function C($,ie){if(!ie||!ie.length)return 1;for(var se=0;se<ie.length;++se){if(ie.length<2)return 1;if(ie[se][0]===$)return ie[se][1];if(ie[se][0]>$&&se>0){var Q=(ie[se][0]-$)/(ie[se][0]-ie[se-1][0]);return ie[se][1]*(1-Q)+Q*ie[se-1][1]}}return 1}var D=[0,0,0],F={showSurface:!1,showContour:!1,projections:[T.slice(),T.slice(),T.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function N($,ie){var se,Q,H,oe=ie.axes&&ie.axes.lastCubeProps.axis||D,re=ie.showSurface,ee=ie.showContour;for(se=0;se<3;++se)for(re=re||ie.surfaceProject[se],Q=0;Q<3;++Q)ee=ee||ie.contourProject[se][Q];for(se=0;se<3;++se){var ae=F.projections[se];for(Q=0;Q<16;++Q)ae[Q]=0;for(Q=0;Q<4;++Q)ae[5*Q]=1;ae[5*se]=0,ae[12+se]=ie.axesBounds[+(oe[se]>0)][se],i(ae,$.model,ae);var fe=F.clipBounds[se];for(H=0;H<2;++H)for(Q=0;Q<3;++Q)fe[H][Q]=$.clipBounds[H][Q];fe[0][se]=-1e8,fe[1][se]=1e8}return F.showSurface=re,F.showContour=ee,F}var G={model:T,view:T,projection:T,inverseModel:T.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},U=T.slice(),X=[1,0,0,0,1,0,0,0,1];function z($,ie){$=$||{};var se=this.gl;se.disable(se.CULL_FACE),this._colorMap.bind(0);var Q=G;Q.model=$.model||T,Q.view=$.view||T,Q.projection=$.projection||T,Q.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],Q.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],Q.objectOffset=this.objectOffset,Q.contourColor=this.contourColor[0],Q.inverseModel=s(Q.inverseModel,Q.model);for(var H=0;H<2;++H)for(var oe=Q.clipBounds[H],re=0;re<3;++re)oe[re]=Math.min(Math.max(this.clipBounds[H][re],-1e8),1e8);Q.kambient=this.ambientLight,Q.kdiffuse=this.diffuseLight,Q.kspecular=this.specularLight,Q.roughness=this.roughness,Q.fresnel=this.fresnel,Q.opacity=this.opacity,Q.height=0,Q.permutation=X,Q.vertexColor=this.vertexColor;var ee=U;for(i(ee,Q.view,Q.model),i(ee,Q.projection,ee),s(ee,ee),H=0;H<3;++H)Q.eyePosition[H]=ee[12+H]/ee[15];var ae=ee[15];for(H=0;H<3;++H)ae+=this.lightPosition[H]*ee[4*H+3];for(H=0;H<3;++H){var fe=ee[12+H];for(re=0;re<3;++re)fe+=ee[4*re+H]*this.lightPosition[re];Q.lightPosition[H]=fe/ae}var de=N(Q,this);if(de.showSurface){for(this._shader.bind(),this._shader.uniforms=Q,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(se.TRIANGLES,this._vertexCount),H=0;H<3;++H)!this.surfaceProject[H]||!this.vertexCount||(this._shader.uniforms.model=de.projections[H],this._shader.uniforms.clipBounds=de.clipBounds[H],this._vao.draw(se.TRIANGLES,this._vertexCount));this._vao.unbind()}if(de.showContour){var pe=this._contourShader;Q.kambient=1,Q.kdiffuse=0,Q.kspecular=0,Q.opacity=1,pe.bind(),pe.uniforms=Q;var W=this._contourVAO;for(W.bind(),H=0;H<3;++H)for(pe.uniforms.permutation=P[H],se.lineWidth(this.contourWidth[H]*this.pixelRatio),re=0;re<this.contourLevels[H].length;++re)re===this.highlightLevel[H]?(pe.uniforms.contourColor=this.highlightColor[H],pe.uniforms.contourTint=this.highlightTint[H]):(re===0||re-1===this.highlightLevel[H])&&(pe.uniforms.contourColor=this.contourColor[H],pe.uniforms.contourTint=this.contourTint[H]),this._contourCounts[H][re]&&(pe.uniforms.height=this.contourLevels[H][re],W.draw(se.LINES,this._contourCounts[H][re],this._contourOffsets[H][re]));for(H=0;H<3;++H)for(pe.uniforms.model=de.projections[H],pe.uniforms.clipBounds=de.clipBounds[H],re=0;re<3;++re)if(!!this.contourProject[H][re]){pe.uniforms.permutation=P[re],se.lineWidth(this.contourWidth[re]*this.pixelRatio);for(var ue=0;ue<this.contourLevels[re].length;++ue)ue===this.highlightLevel[re]?(pe.uniforms.contourColor=this.highlightColor[re],pe.uniforms.contourTint=this.highlightTint[re]):(ue===0||ue-1===this.highlightLevel[re])&&(pe.uniforms.contourColor=this.contourColor[re],pe.uniforms.contourTint=this.contourTint[re]),this._contourCounts[re][ue]&&(pe.uniforms.height=this.contourLevels[re][ue],W.draw(se.LINES,this._contourCounts[re][ue],this._contourOffsets[re][ue]))}for(W.unbind(),W=this._dynamicVAO,W.bind(),H=0;H<3;++H)if(this._dynamicCounts[H]!==0)for(pe.uniforms.model=Q.model,pe.uniforms.clipBounds=Q.clipBounds,pe.uniforms.permutation=P[H],se.lineWidth(this.dynamicWidth[H]*this.pixelRatio),pe.uniforms.contourColor=this.dynamicColor[H],pe.uniforms.contourTint=this.dynamicTint[H],pe.uniforms.height=this.dynamicLevel[H],W.draw(se.LINES,this._dynamicCounts[H],this._dynamicOffsets[H]),re=0;re<3;++re)!this.contourProject[re][H]||(pe.uniforms.model=de.projections[re],pe.uniforms.clipBounds=de.clipBounds[re],W.draw(se.LINES,this._dynamicCounts[H],this._dynamicOffsets[H]));W.unbind()}}k.draw=function($){return z.call(this,$,!1)},k.drawTransparent=function($){return z.call(this,$,!0)};var B={model:T,view:T,projection:T,inverseModel:T,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};k.drawPick=function($){$=$||{};var ie=this.gl;ie.disable(ie.CULL_FACE);var se=B;se.model=$.model||T,se.view=$.view||T,se.projection=$.projection||T,se.shape=this._field[2].shape,se.pickId=this.pickId/255,se.lowerBound=this.bounds[0],se.upperBound=this.bounds[1],se.objectOffset=this.objectOffset,se.permutation=X;for(var Q=0;Q<2;++Q)for(var H=se.clipBounds[Q],oe=0;oe<3;++oe)H[oe]=Math.min(Math.max(this.clipBounds[Q][oe],-1e8),1e8);var re=N(se,this);if(re.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=se,this._vao.bind(),this._vao.draw(ie.TRIANGLES,this._vertexCount),Q=0;Q<3;++Q)!this.surfaceProject[Q]||(this._pickShader.uniforms.model=re.projections[Q],this._pickShader.uniforms.clipBounds=re.clipBounds[Q],this._vao.draw(ie.TRIANGLES,this._vertexCount));this._vao.unbind()}if(re.showContour){var ee=this._contourPickShader;ee.bind(),ee.uniforms=se;var ae=this._contourVAO;for(ae.bind(),oe=0;oe<3;++oe)for(ie.lineWidth(this.contourWidth[oe]*this.pixelRatio),ee.uniforms.permutation=P[oe],Q=0;Q<this.contourLevels[oe].length;++Q)this._contourCounts[oe][Q]&&(ee.uniforms.height=this.contourLevels[oe][Q],ae.draw(ie.LINES,this._contourCounts[oe][Q],this._contourOffsets[oe][Q]));for(Q=0;Q<3;++Q)for(ee.uniforms.model=re.projections[Q],ee.uniforms.clipBounds=re.clipBounds[Q],oe=0;oe<3;++oe)if(!!this.contourProject[Q][oe]){ee.uniforms.permutation=P[oe],ie.lineWidth(this.contourWidth[oe]*this.pixelRatio);for(var fe=0;fe<this.contourLevels[oe].length;++fe)this._contourCounts[oe][fe]&&(ee.uniforms.height=this.contourLevels[oe][fe],ae.draw(ie.LINES,this._contourCounts[oe][fe],this._contourOffsets[oe][fe]))}ae.unbind()}},k.pick=function($){if(!$||$.id!==this.pickId)return null;var ie=this._field[2].shape,se=this._pickResult,Q=ie[0]*($.value[0]+($.value[2]>>4)/16)/255,H=Math.floor(Q),oe=Q-H,re=ie[1]*($.value[1]+($.value[2]&15)/16)/255,ee=Math.floor(re),ae=re-ee;H+=1,ee+=1;var fe=se.position;fe[0]=fe[1]=fe[2]=0;for(var de=0;de<2;++de)for(var pe=de?oe:1-oe,W=0;W<2;++W)for(var ue=W?ae:1-ae,me=H+de,be=ee+W,Me=pe*ue,Pe=0;Pe<3;++Pe)fe[Pe]+=this._field[Pe].get(me,be)*Me;for(var Ge=this._pickResult.level,ze=0;ze<3;++ze)if(Ge[ze]=p.le(this.contourLevels[ze],fe[ze]),Ge[ze]<0)this.contourLevels[ze].length>0&&(Ge[ze]=0);else if(Ge[ze]<this.contourLevels[ze].length-1){var Qe=this.contourLevels[ze][Ge[ze]],tt=this.contourLevels[ze][Ge[ze]+1];Math.abs(Qe-fe[ze])>Math.abs(tt-fe[ze])&&(Ge[ze]+=1)}for(se.index[0]=oe<.5?H:H+1,se.index[1]=ae<.5?ee:ee+1,se.uv[0]=Q/ie[0],se.uv[1]=re/ie[1],Pe=0;Pe<3;++Pe)se.dataCoordinate[Pe]=this._field[Pe].get(se.index[0],se.index[1]);return se},k.padField=function($,ie){var se=ie.shape.slice(),Q=$.shape.slice();n.assign($.lo(1,1).hi(se[0],se[1]),ie),n.assign($.lo(1).hi(se[0],1),ie.hi(se[0],1)),n.assign($.lo(1,Q[1]-1).hi(se[0],1),ie.lo(0,se[1]-1).hi(se[0],1)),n.assign($.lo(0,1).hi(1,se[1]),ie.hi(1)),n.assign($.lo(Q[0]-1,1).hi(1,se[1]),ie.lo(se[0]-1)),$.set(0,0,ie.get(0,0)),$.set(0,Q[1]-1,ie.get(0,se[1]-1)),$.set(Q[0]-1,0,ie.get(se[0]-1,0)),$.set(Q[0]-1,Q[1]-1,ie.get(se[0]-1,se[1]-1))};function j($,ie){return Array.isArray($)?[ie($[0]),ie($[1]),ie($[2])]:[ie($),ie($),ie($)]}function V($){return Array.isArray($)?$.length===3?[$[0],$[1],$[2],1]:[$[0],$[1],$[2],$[3]]:[0,0,0,1]}function K($){if(Array.isArray($)){if(Array.isArray($))return[V($[0]),V($[1]),V($[2])];var ie=V($);return[ie.slice(),ie.slice(),ie.slice()]}}k.update=function($){$=$||{},this.objectOffset=$.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in $&&(this.contourWidth=j($.contourWidth,Number)),"showContour"in $&&(this.showContour=j($.showContour,Boolean)),"showSurface"in $&&(this.showSurface=!!$.showSurface),"contourTint"in $&&(this.contourTint=j($.contourTint,Boolean)),"contourColor"in $&&(this.contourColor=K($.contourColor)),"contourProject"in $&&(this.contourProject=j($.contourProject,function(er){return j(er,Boolean)})),"surfaceProject"in $&&(this.surfaceProject=$.surfaceProject),"dynamicColor"in $&&(this.dynamicColor=K($.dynamicColor)),"dynamicTint"in $&&(this.dynamicTint=j($.dynamicTint,Number)),"dynamicWidth"in $&&(this.dynamicWidth=j($.dynamicWidth,Number)),"opacity"in $&&(this.opacity=$.opacity),"opacityscale"in $&&(this.opacityscale=$.opacityscale),"colorBounds"in $&&(this.colorBounds=$.colorBounds),"vertexColor"in $&&(this.vertexColor=$.vertexColor?1:0),"colormap"in $&&this._colorMap.setPixels(this.genColormap($.colormap,this.opacityscale));var ie=$.field||$.coords&&$.coords[2]||null,se=!1;if(ie||(this._field[2].shape[0]||this._field[2].shape[2]?ie=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):ie=this._field[2].hi(0,0)),"field"in $||"coords"in $){var Q=(ie.shape[0]+2)*(ie.shape[1]+2);Q>this._field[2].data.length&&(t.freeFloat(this._field[2].data),this._field[2].data=t.mallocFloat(r.nextPow2(Q))),this._field[2]=l(this._field[2].data,[ie.shape[0]+2,ie.shape[1]+2]),this.padField(this._field[2],ie),this.shape=ie.shape.slice();for(var H=this.shape,oe=0;oe<2;++oe)this._field[2].size>this._field[oe].data.length&&(t.freeFloat(this._field[oe].data),this._field[oe].data=t.mallocFloat(this._field[2].size)),this._field[oe]=l(this._field[oe].data,[H[0]+2,H[1]+2]);if($.coords){var re=$.coords;if(!Array.isArray(re)||re.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(oe=0;oe<2;++oe){var ee=re[oe];for(W=0;W<2;++W)if(ee.shape[W]!==H[W])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[oe],ee)}}else if($.ticks){var ae=$.ticks;if(!Array.isArray(ae)||ae.length!==2)throw new Error("gl-surface: invalid ticks");for(oe=0;oe<2;++oe){var fe=ae[oe];if((Array.isArray(fe)||fe.length)&&(fe=l(fe)),fe.shape[0]!==H[oe])throw new Error("gl-surface: invalid tick length");var de=l(fe.data,H);de.stride[oe]=fe.stride[0],de.stride[oe^1]=0,this.padField(this._field[oe],de)}}else{for(oe=0;oe<2;++oe){var pe=[0,0];pe[oe]=1,this._field[oe]=l(this._field[oe].data,[H[0]+2,H[1]+2],pe,0)}this._field[0].set(0,0,0);for(var W=0;W<H[0];++W)this._field[0].set(W+1,0,W);for(this._field[0].set(H[0]+1,0,H[0]-1),this._field[1].set(0,0,0),W=0;W<H[1];++W)this._field[1].set(0,W+1,W);this._field[1].set(0,H[1]+1,H[1]-1)}var ue=this._field,me=l(t.mallocFloat(ue[2].size*3*2),[3,H[0]+2,H[1]+2,2]);for(oe=0;oe<3;++oe)d(me.pick(oe),ue[oe],"mirror");var be=l(t.mallocFloat(ue[2].size*3),[H[0]+2,H[1]+2,3]);for(oe=0;oe<H[0]+2;++oe)for(W=0;W<H[1]+2;++W){var Me=me.get(0,oe,W,0),Pe=me.get(0,oe,W,1),Ge=me.get(1,oe,W,0),ze=me.get(1,oe,W,1),Qe=me.get(2,oe,W,0),tt=me.get(2,oe,W,1),Ce=Ge*tt-ze*Qe,Ae=Qe*Pe-tt*Me,Be=Me*ze-Pe*Ge,qe=Math.sqrt(Ce*Ce+Ae*Ae+Be*Be);qe<1e-8?(qe=Math.max(Math.abs(Ce),Math.abs(Ae),Math.abs(Be)),qe<1e-8?(Be=1,Ae=Ce=0,qe=1):qe=1/qe):qe=1/Math.sqrt(qe),be.set(oe,W,0,Ce*qe),be.set(oe,W,1,Ae*qe),be.set(oe,W,2,Be*qe)}t.free(me.data);var Tt=[1/0,1/0,1/0],At=[-1/0,-1/0,-1/0],Ne=1/0,ct=-1/0,Mt=(H[0]-1)*(H[1]-1)*6,Wt=t.mallocFloat(r.nextPow2(10*Mt)),qt=0,zt=0;for(oe=0;oe<H[0]-1;++oe){e:for(W=0;W<H[1]-1;++W){for(var $t=0;$t<2;++$t)for(var rr=0;rr<2;++rr)for(var Lt=0;Lt<3;++Lt){var Ct=this._field[Lt].get(1+oe+$t,1+W+rr);if(isNaN(Ct)||!isFinite(Ct))continue e}for(Lt=0;Lt<6;++Lt){var dt=oe+M[Lt][0],lt=W+M[Lt][1],Te=this._field[0].get(dt+1,lt+1),Le=this._field[1].get(dt+1,lt+1);Ct=this._field[2].get(dt+1,lt+1),Ce=be.get(dt+1,lt+1,0),Ae=be.get(dt+1,lt+1,1),Be=be.get(dt+1,lt+1,2),$.intensity&&(Ue=$.intensity.get(dt,lt));var Ue=$.intensity?$.intensity.get(dt,lt):Ct+this.objectOffset[2];Wt[qt++]=dt,Wt[qt++]=lt,Wt[qt++]=Te,Wt[qt++]=Le,Wt[qt++]=Ct,Wt[qt++]=0,Wt[qt++]=Ue,Wt[qt++]=Ce,Wt[qt++]=Ae,Wt[qt++]=Be,Tt[0]=Math.min(Tt[0],Te+this.objectOffset[0]),Tt[1]=Math.min(Tt[1],Le+this.objectOffset[1]),Tt[2]=Math.min(Tt[2],Ct+this.objectOffset[2]),Ne=Math.min(Ne,Ue),At[0]=Math.max(At[0],Te+this.objectOffset[0]),At[1]=Math.max(At[1],Le+this.objectOffset[1]),At[2]=Math.max(At[2],Ct+this.objectOffset[2]),ct=Math.max(ct,Ue),zt+=1}}}for($.intensityBounds&&(Ne=+$.intensityBounds[0],ct=+$.intensityBounds[1]),oe=6;oe<qt;oe+=10)Wt[oe]=(Wt[oe]-Ne)/(ct-Ne);this._vertexCount=zt,this._coordinateBuffer.update(Wt.subarray(0,qt)),t.freeFloat(Wt),t.free(be.data),this.bounds=[Tt,At],this.intensity=$.intensity||this._field[2],(this.intensityBounds[0]!==Ne||this.intensityBounds[1]!==ct)&&(se=!0),this.intensityBounds=[Ne,ct]}if("levels"in $){var et=$.levels;for(Array.isArray(et[0])?et=et.slice():et=[[],[],et],oe=0;oe<3;++oe)et[oe]=et[oe].slice(),et[oe].sort(function(er,Zt){return er-Zt});for(oe=0;oe<3;++oe)for(W=0;W<et[oe].length;++W)et[oe][W]-=this.objectOffset[oe];e:for(oe=0;oe<3;++oe){if(et[oe].length!==this.contourLevels[oe].length){se=!0;break}for(W=0;W<et[oe].length;++W)if(et[oe][W]!==this.contourLevels[oe][W]){se=!0;break e}}this.contourLevels=et}if(se){ue=this._field,H=this.shape;for(var ke=[],Ie=0;Ie<3;++Ie){var He=this.contourLevels[Ie],Ye=[],ft=[],it=[0,0,0];for(oe=0;oe<He.length;++oe){var je=h(this._field[Ie],He[oe]);Ye.push(ke.length/5|0),zt=0;e:for(W=0;W<je.cells.length;++W){var ot=je.cells[W];for(Lt=0;Lt<2;++Lt){var Je=je.positions[ot[Lt]],st=Je[0],It=Math.floor(st)|0,Nt=st-It,nr=Je[1],We=Math.floor(nr)|0,Fe=nr-We,bt=!1;t:for(var kt=0;kt<3;++kt){it[kt]=0;var _t=(Ie+kt+1)%3;for($t=0;$t<2;++$t){var Rt=$t?Nt:1-Nt;for(dt=Math.min(Math.max(It+$t,0),H[0])|0,rr=0;rr<2;++rr){var Dt=rr?Fe:1-Fe;if(lt=Math.min(Math.max(We+rr,0),H[1])|0,kt<2?Ct=this._field[_t].get(dt,lt):Ct=(this.intensity.get(dt,lt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ct)||isNaN(Ct)){bt=!0;break t}var Ut=Rt*Dt;it[kt]+=Ut*Ct}}}if(!bt)ke.push(it[0],it[1],Je[0],Je[1],it[2]),zt+=1;else{if(Lt>0){for(var Bt=0;Bt<5;++Bt)ke.pop();zt-=1}continue e}}}ft.push(zt)}this._contourOffsets[Ie]=Ye,this._contourCounts[Ie]=ft}var tr=t.mallocFloat(ke.length);for(oe=0;oe<ke.length;++oe)tr[oe]=ke[oe];this._contourBuffer.update(tr),t.freeFloat(tr)}},k.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var $=0;$<3;++$)t.freeFloat(this._field[$].data)},k.highlight=function($){var ie;if(!$){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(ie=0;ie<3;++ie)this.enableHighlight[ie]?this.highlightLevel[ie]=$.level[ie]:this.highlightLevel[ie]=-1;var se;for(this.snapToData?se=$.dataCoordinate:se=$.position,ie=0;ie<3;++ie)se[ie]-=this.objectOffset[ie];if(!((!this.enableDynamic[0]||se[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||se[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||se[2]===this.dynamicLevel[2]))){for(var Q=0,H=this.shape,oe=t.mallocFloat(12*H[0]*H[1]),re=0;re<3;++re){if(!this.enableDynamic[re]){this.dynamicLevel[re]=NaN,this._dynamicCounts[re]=0;continue}this.dynamicLevel[re]=se[re];var ee=(re+1)%3,ae=(re+2)%3,fe=this._field[re],de=this._field[ee],pe=this._field[ae],W=h(fe,se[re]),ue=W.cells,me=W.positions;for(this._dynamicOffsets[re]=Q,ie=0;ie<ue.length;++ie)for(var be=ue[ie],Me=0;Me<2;++Me){var Pe=me[be[Me]],Ge=+Pe[0],ze=Ge|0,Qe=Math.min(ze+1,H[0])|0,tt=Ge-ze,Ce=1-tt,Ae=+Pe[1],Be=Ae|0,qe=Math.min(Be+1,H[1])|0,Tt=Ae-Be,At=1-Tt,Ne=Ce*At,ct=Ce*Tt,Mt=tt*At,Wt=tt*Tt,qt=Ne*de.get(ze,Be)+ct*de.get(ze,qe)+Mt*de.get(Qe,Be)+Wt*de.get(Qe,qe),zt=Ne*pe.get(ze,Be)+ct*pe.get(ze,qe)+Mt*pe.get(Qe,Be)+Wt*pe.get(Qe,qe);if(isNaN(qt)||isNaN(zt)){Me&&(Q-=1);break}oe[2*Q+0]=qt,oe[2*Q+1]=zt,Q+=1}this._dynamicCounts[re]=Q-this._dynamicOffsets[re]}this._dynamicBuffer.update(oe.subarray(0,2*Q)),t.freeFloat(oe)}};function te($){var ie=$.gl,se=b(ie),Q=x(ie),H=m(ie),oe=w(ie),re=a(ie),ee=u(ie,[{buffer:re,size:4,stride:y,offset:0},{buffer:re,size:3,stride:y,offset:16},{buffer:re,size:3,stride:y,offset:28}]),ae=a(ie),fe=u(ie,[{buffer:ae,size:4,stride:20,offset:0},{buffer:ae,size:1,stride:20,offset:16}]),de=a(ie),pe=u(ie,[{buffer:de,size:2,type:ie.FLOAT}]),W=c(ie,1,I,ie.RGBA,ie.UNSIGNED_BYTE);W.minFilter=ie.LINEAR,W.magFilter=ie.LINEAR;var ue=new E(ie,[0,0],[[0,0,0],[0,0,0]],se,Q,re,ee,W,H,oe,ae,fe,de,pe,[0,0,0]),me={levels:[[],[],[]]};for(var be in $)me[be]=$[be];return me.colormap=me.colormap||"jet",ue.update(me),ue}},{"./lib/shaders":349,"binary-search-bounds":96,"bit-twiddle":97,colormap:131,"gl-buffer":259,"gl-mat4/invert":293,"gl-mat4/multiply":295,"gl-texture2d":353,"gl-vao":358,ndarray:495,"ndarray-gradient":488,"ndarray-ops":490,"ndarray-pack":491,"surface-nets":570,"typedarray-pool":595}],352:[function(e,v,S){var r=e("css-font"),a=e("pick-by-alias"),u=e("regl"),c=e("gl-util/context"),t=e("es6-weak-map"),f=e("color-normalize"),n=e("font-atlas"),o=e("typedarray-pool"),l=e("parse-rect"),h=e("is-plain-obj"),i=e("parse-unit"),s=e("to-px"),p=e("detect-kerning"),d=e("object-assign"),g=e("font-measure"),b=e("flatten-vertex-data"),m=e("bit-twiddle"),x=m.nextPow2,w=new t,y=!1;if(document.body){var T=document.body.appendChild(document.createElement("div"));T.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(T).fontStretch&&(y=!0),document.body.removeChild(T)}var M=function(I){P(I)?(I={regl:I},this.gl=I.regl._gl):this.gl=c(I),this.shader=w.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=I.regl||u({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),w.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(h(I)?I:{})};M.prototype.createShader=function(){var I=this.regl,E=I({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:I.prop("count"),offset:I.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:I.this("sizeBuffer")},width:{offset:0,stride:8,buffer:I.this("sizeBuffer")},char:I.this("charBuffer"),position:I.this("position")},uniforms:{atlasSize:function(C,D){return[D.atlas.width,D.atlas.height]},atlasDim:function(C,D){return[D.atlas.cols,D.atlas.rows]},atlas:function(C,D){return D.atlas.texture},charStep:function(C,D){return D.atlas.step},em:function(C,D){return D.atlas.em},color:I.prop("color"),opacity:I.prop("opacity"),viewport:I.this("viewportArray"),scale:I.this("scale"),align:I.prop("align"),baseline:I.prop("baseline"),translate:I.this("translate"),positionOffset:I.prop("positionOffset")},primitive:"points",viewport:I.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				`+(M.normalViewport?"":"vec2 positionOffset = vec2(positionOffset.x,- positionOffset.y);")+`

				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ positionOffset))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				`+(M.normalViewport?"position.y = 1. - position.y;":"")+`

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform sampler2D atlas;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),k={};return{regl:I,draw:E,atlas:k}},M.prototype.update=function(I){var E=this;if(typeof I=="string")I={text:I};else if(!I)return;I=a(I,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),I.opacity!=null&&(Array.isArray(I.opacity)?this.opacity=I.opacity.map(function(Ae){return parseFloat(Ae)}):this.opacity=parseFloat(I.opacity)),I.viewport!=null&&(this.viewport=l(I.viewport),M.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),I.kerning!=null&&(this.kerning=I.kerning),I.offset!=null&&(typeof I.offset=="number"&&(I.offset=[I.offset,0]),this.positionOffset=b(I.offset)),I.direction&&(this.direction=I.direction),I.range&&(this.range=I.range,this.scale=[1/(I.range[2]-I.range[0]),1/(I.range[3]-I.range[1])],this.translate=[-I.range[0],-I.range[1]]),I.scale&&(this.scale=I.scale),I.translate&&(this.translate=I.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!I.font&&(I.font=M.baseFontSize+"px sans-serif");var k=!1,C=!1;if(I.font&&(Array.isArray(I.font)?I.font:[I.font]).forEach(function(Ae,Be){if(typeof Ae=="string")try{Ae=r.parse(Ae)}catch{Ae=r.parse(M.baseFontSize+"px "+Ae)}else Ae=r.parse(r.stringify(Ae));var qe=r.stringify({size:M.baseFontSize,family:Ae.family,stretch:y?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style}),Tt=i(Ae.size),At=Math.round(Tt[0]*s(Tt[1]));if(At!==E.fontSize[Be]&&(C=!0,E.fontSize[Be]=At),(!E.font[Be]||qe!=E.font[Be].baseString)&&(k=!0,E.font[Be]=M.fonts[qe],!E.font[Be])){var Ne=Ae.family.join(", "),ct=[Ae.style];Ae.style!=Ae.variant&&ct.push(Ae.variant),Ae.variant!=Ae.weight&&ct.push(Ae.weight),y&&Ae.weight!=Ae.stretch&&ct.push(Ae.stretch),E.font[Be]={baseString:qe,family:Ne,weight:Ae.weight,stretch:Ae.stretch,style:Ae.style,variant:Ae.variant,width:{},kerning:{},metrics:g(Ne,{origin:"top",fontSize:M.baseFontSize,fontStyle:ct.join(" ")})},M.fonts[qe]=E.font[Be]}}),(k||C)&&this.font.forEach(function(Ae,Be){var qe=r.stringify({size:E.fontSize[Be],family:Ae.family,stretch:y?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style});if(E.fontAtlas[Be]=E.shader.atlas[qe],!E.fontAtlas[Be]){var Tt=Ae.metrics;E.shader.atlas[qe]=E.fontAtlas[Be]={fontString:qe,step:Math.ceil(E.fontSize[Be]*Tt.bottom*.5)*2,em:E.fontSize[Be],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:E.regl.texture()}}I.text==null&&(I.text=E.text)}),typeof I.text=="string"&&I.position&&I.position.length>2){for(var D=Array(I.position.length*.5),F=0;F<D.length;F++)D[F]=I.text;I.text=D}var N;if(I.text!=null||k){if(this.textOffsets=[0],Array.isArray(I.text)){this.count=I.text[0].length,this.counts=[this.count];for(var G=1;G<I.text.length;G++)this.textOffsets[G]=this.textOffsets[G-1]+I.text[G-1].length,this.count+=I.text[G].length,this.counts.push(I.text[G].length);this.text=I.text.join("")}else this.text=I.text,this.count=this.text.length,this.counts=[this.count];N=[],this.font.forEach(function(Ae,Be){M.atlasContext.font=Ae.baseString;for(var qe=E.fontAtlas[Be],Tt=0;Tt<E.text.length;Tt++){var At=E.text.charAt(Tt);if(qe.ids[At]==null&&(qe.ids[At]=qe.chars.length,qe.chars.push(At),N.push(At)),Ae.width[At]==null&&(Ae.width[At]=M.atlasContext.measureText(At).width/M.baseFontSize,E.kerning)){var Ne=[];for(var ct in Ae.width)Ne.push(ct+At,At+ct);d(Ae.kerning,p(Ae.family,{pairs:Ne}))}}})}if(I.position)if(I.position.length>2){for(var U=!I.position[0].length,X=o.mallocFloat(this.count*2),z=0,B=0;z<this.counts.length;z++){var j=this.counts[z];if(U)for(var V=0;V<j;V++)X[B++]=I.position[z*2],X[B++]=I.position[z*2+1];else for(var K=0;K<j;K++)X[B++]=I.position[z][0],X[B++]=I.position[z][1]}this.position.call?this.position({type:"float",data:X}):this.position=this.regl.buffer({type:"float",data:X}),o.freeFloat(X)}else this.position.destroy&&this.position.destroy(),this.position={constant:I.position};if(I.text||k){var te=o.mallocUint8(this.count),$=o.mallocFloat(this.count*2);this.textWidth=[];for(var ie=0,se=0;ie<this.counts.length;ie++){for(var Q=this.counts[ie],H=this.font[ie]||this.font[0],oe=this.fontAtlas[ie]||this.fontAtlas[0],re=0;re<Q;re++){var ee=this.text.charAt(se),ae=this.text.charAt(se-1);if(te[se]=oe.ids[ee],$[se*2]=H.width[ee],re){var fe=$[se*2-2],de=$[se*2],pe=$[se*2-1],W=pe+fe*.5+de*.5;if(this.kerning){var ue=H.kerning[ae+ee];ue&&(W+=ue*.001)}$[se*2+1]=W}else $[se*2+1]=$[se*2]*.5;se++}this.textWidth.push($.length?$[se*2-2]*.5+$[se*2-1]:0)}I.align||(I.align=this.align),this.charBuffer({data:te,type:"uint8",usage:"stream"}),this.sizeBuffer({data:$,type:"float",usage:"stream"}),o.freeUint8(te),o.freeFloat($),N.length&&this.font.forEach(function(Ae,Be){var qe=E.fontAtlas[Be],Tt=qe.step,At=Math.floor(M.maxAtlasSize/Tt),Ne=Math.min(At,qe.chars.length),ct=Math.ceil(qe.chars.length/Ne),Mt=x(Ne*Tt),Wt=x(ct*Tt);qe.width=Mt,qe.height=Wt,qe.rows=ct,qe.cols=Ne,qe.em&&qe.texture({data:n({canvas:M.atlasCanvas,font:qe.fontString,chars:qe.chars,shape:[Mt,Wt],step:[Tt,Tt]})})})}if(I.align&&(this.align=I.align,this.alignOffset=this.textWidth.map(function(Ae,Be){var qe=Array.isArray(E.align)?E.align.length>1?E.align[Be]:E.align[0]:E.align;if(typeof qe=="number")return qe;switch(qe){case"right":case"end":return-Ae;case"center":case"centre":case"middle":return-Ae*.5}return 0})),this.baseline==null&&I.baseline==null&&(I.baseline=0),I.baseline!=null&&(this.baseline=I.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Ae,Be){var qe=(E.font[Be]||E.font[0]).metrics,Tt=0;return Tt+=qe.bottom*.5,typeof Ae=="number"?Tt+=Ae-qe.baseline:Tt+=-qe[Ae],M.normalViewport||(Tt*=-1),Tt})),I.color!=null)if(I.color||(I.color="transparent"),typeof I.color=="string"||!isNaN(I.color))this.color=f(I.color,"uint8");else{var me;if(typeof I.color[0]=="number"&&I.color.length>this.counts.length){var be=I.color.length;me=o.mallocUint8(be);for(var Me=(I.color.subarray||I.color.slice).bind(I.color),Pe=0;Pe<be;Pe+=4)me.set(f(Me(Pe,Pe+4),"uint8"),Pe)}else{var Ge=I.color.length;me=o.mallocUint8(Ge*4);for(var ze=0;ze<Ge;ze++)me.set(f(I.color[ze]||0,"uint8"),ze*4)}this.color=me}if(I.position||I.text||I.color||I.baseline||I.align||I.font||I.offset||I.opacity){var Qe=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(Qe){var tt=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(tt);for(var Ce=0;Ce<this.batch.length;Ce++)this.batch[Ce]={count:this.counts.length>1?this.counts[Ce]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Ce]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Ce*4,Ce*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Ce]:this.opacity,baseline:this.baselineOffset[Ce]!=null?this.baselineOffset[Ce]:this.baselineOffset[0],align:this.align?this.alignOffset[Ce]!=null?this.alignOffset[Ce]:this.alignOffset[0]:0,atlas:this.fontAtlas[Ce]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Ce*2,Ce*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},M.prototype.destroy=function(){},M.prototype.kerning=!0,M.prototype.position={constant:new Float32Array(2)},M.prototype.translate=null,M.prototype.scale=null,M.prototype.font=null,M.prototype.text="",M.prototype.positionOffset=[0,0],M.prototype.opacity=1,M.prototype.color=new Uint8Array([0,0,0,255]),M.prototype.alignOffset=[0,0],M.normalViewport=!1,M.maxAtlasSize=1024,M.atlasCanvas=document.createElement("canvas"),M.atlasContext=M.atlasCanvas.getContext("2d",{alpha:!1}),M.baseFontSize=64,M.fonts={};function P(L){return typeof L=="function"&&L._gl&&L.prop&&L.texture&&L.buffer}v.exports=M},{"bit-twiddle":97,"color-normalize":125,"css-font":144,"detect-kerning":172,"es6-weak-map":233,"flatten-vertex-data":244,"font-atlas":245,"font-measure":246,"gl-util/context":354,"is-plain-obj":469,"object-assign":499,"parse-rect":504,"parse-unit":506,"pick-by-alias":511,regl:540,"to-px":578,"typedarray-pool":595}],353:[function(e,v,S){var r=e("ndarray"),a=e("ndarray-ops"),u=e("typedarray-pool");v.exports=w;var c=null,t=null,f=null;function n(y){c=[y.LINEAR,y.NEAREST_MIPMAP_LINEAR,y.LINEAR_MIPMAP_NEAREST,y.LINEAR_MIPMAP_NEAREST],t=[y.NEAREST,y.LINEAR,y.NEAREST_MIPMAP_NEAREST,y.NEAREST_MIPMAP_LINEAR,y.LINEAR_MIPMAP_NEAREST,y.LINEAR_MIPMAP_LINEAR],f=[y.REPEAT,y.CLAMP_TO_EDGE,y.MIRRORED_REPEAT]}function o(y){return typeof HTMLCanvasElement<"u"&&y instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&y instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&y instanceof HTMLVideoElement||typeof ImageData<"u"&&y instanceof ImageData}var l=function(y,T){a.muls(y,T,255)};function h(y,T,M){var P=y.gl,L=P.getParameter(P.MAX_TEXTURE_SIZE);if(T<0||T>L||M<0||M>L)throw new Error("gl-texture2d: Invalid texture size");return y._shape=[T,M],y.bind(),P.texImage2D(P.TEXTURE_2D,0,y.format,T,M,0,y.format,y.type,null),y._mipLevels=[0],y}function i(y,T,M,P,L,I){this.gl=y,this.handle=T,this.format=L,this.type=I,this._shape=[M,P],this._mipLevels=[0],this._magFilter=y.NEAREST,this._minFilter=y.NEAREST,this._wrapS=y.CLAMP_TO_EDGE,this._wrapT=y.CLAMP_TO_EDGE,this._anisoSamples=1;var E=this,k=[this._wrapS,this._wrapT];Object.defineProperties(k,[{get:function(){return E._wrapS},set:function(D){return E.wrapS=D}},{get:function(){return E._wrapT},set:function(D){return E.wrapT=D}}]),this._wrapVector=k;var C=[this._shape[0],this._shape[1]];Object.defineProperties(C,[{get:function(){return E._shape[0]},set:function(D){return E.width=D}},{get:function(){return E._shape[1]},set:function(D){return E.height=D}}]),this._shapeVector=C}var s=i.prototype;Object.defineProperties(s,{minFilter:{get:function(){return this._minFilter},set:function(y){this.bind();var T=this.gl;if(this.type===T.FLOAT&&c.indexOf(y)>=0&&(T.getExtension("OES_texture_float_linear")||(y=T.NEAREST)),t.indexOf(y)<0)throw new Error("gl-texture2d: Unknown filter mode "+y);return T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,y),this._minFilter=y}},magFilter:{get:function(){return this._magFilter},set:function(y){this.bind();var T=this.gl;if(this.type===T.FLOAT&&c.indexOf(y)>=0&&(T.getExtension("OES_texture_float_linear")||(y=T.NEAREST)),t.indexOf(y)<0)throw new Error("gl-texture2d: Unknown filter mode "+y);return T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,y),this._magFilter=y}},mipSamples:{get:function(){return this._anisoSamples},set:function(y){var T=this._anisoSamples;if(this._anisoSamples=Math.max(y,1)|0,T!==this._anisoSamples){var M=this.gl.getExtension("EXT_texture_filter_anisotropic");M&&this.gl.texParameterf(this.gl.TEXTURE_2D,M.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(y){if(this.bind(),f.indexOf(y)<0)throw new Error("gl-texture2d: Unknown wrap mode "+y);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,y),this._wrapS=y}},wrapT:{get:function(){return this._wrapT},set:function(y){if(this.bind(),f.indexOf(y)<0)throw new Error("gl-texture2d: Unknown wrap mode "+y);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,y),this._wrapT=y}},wrap:{get:function(){return this._wrapVector},set:function(y){if(Array.isArray(y)||(y=[y,y]),y.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var T=0;T<2;++T)if(f.indexOf(y[T])<0)throw new Error("gl-texture2d: Unknown wrap mode "+y);this._wrapS=y[0],this._wrapT=y[1];var M=this.gl;return this.bind(),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,this._wrapS),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,this._wrapT),y}},shape:{get:function(){return this._shapeVector},set:function(y){if(!Array.isArray(y))y=[y|0,y|0];else if(y.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return h(this,y[0]|0,y[1]|0),[y[0]|0,y[1]|0]}},width:{get:function(){return this._shape[0]},set:function(y){return y=y|0,h(this,y,this._shape[1]),y}},height:{get:function(){return this._shape[1]},set:function(y){return y=y|0,h(this,this._shape[0],y),y}}}),s.bind=function(y){var T=this.gl;return y!==void 0&&T.activeTexture(T.TEXTURE0+(y|0)),T.bindTexture(T.TEXTURE_2D,this.handle),y!==void 0?y|0:T.getParameter(T.ACTIVE_TEXTURE)-T.TEXTURE0},s.dispose=function(){this.gl.deleteTexture(this.handle)},s.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var y=Math.min(this._shape[0],this._shape[1]),T=0;y>0;++T,y>>>=1)this._mipLevels.indexOf(T)<0&&this._mipLevels.push(T)},s.setPixels=function(y,T,M,P){var L=this.gl;this.bind(),Array.isArray(T)?(P=M,M=T[1]|0,T=T[0]|0):(T=T||0,M=M||0),P=P||0;var I=o(y)?y:y.raw;if(I){var E=this._mipLevels.indexOf(P)<0;E?(L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,this.type,I),this._mipLevels.push(P)):L.texSubImage2D(L.TEXTURE_2D,P,T,M,this.format,this.type,I)}else if(y.shape&&y.stride&&y.data){if(y.shape.length<2||T+y.shape[1]>this._shape[1]>>>P||M+y.shape[0]>this._shape[0]>>>P||T<0||M<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");d(L,T,M,P,this.format,this.type,this._mipLevels,y)}else throw new Error("gl-texture2d: Unsupported data type")};function p(y,T){return y.length===3?T[2]===1&&T[1]===y[0]*y[2]&&T[0]===y[2]:T[0]===1&&T[1]===y[0]}function d(y,T,M,P,L,I,E,k){var C=k.dtype,D=k.shape.slice();if(D.length<2||D.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var F=0,N=0,G=p(D,k.stride.slice());if(C==="float32"?F=y.FLOAT:C==="float64"?(F=y.FLOAT,G=!1,C="float32"):C==="uint8"?F=y.UNSIGNED_BYTE:(F=y.UNSIGNED_BYTE,G=!1,C="uint8"),D.length===2)N=y.LUMINANCE,D=[D[0],D[1],1],k=r(k.data,D,[k.stride[0],k.stride[1],1],k.offset);else if(D.length===3){if(D[2]===1)N=y.ALPHA;else if(D[2]===2)N=y.LUMINANCE_ALPHA;else if(D[2]===3)N=y.RGB;else if(D[2]===4)N=y.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");D[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((N===y.LUMINANCE||N===y.ALPHA)&&(L===y.LUMINANCE||L===y.ALPHA)&&(N=L),N!==L)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var U=k.size,X=E.indexOf(P)<0;if(X&&E.push(P),F===I&&G)k.offset===0&&k.data.length===U?X?y.texImage2D(y.TEXTURE_2D,P,L,D[0],D[1],0,L,I,k.data):y.texSubImage2D(y.TEXTURE_2D,P,T,M,D[0],D[1],L,I,k.data):X?y.texImage2D(y.TEXTURE_2D,P,L,D[0],D[1],0,L,I,k.data.subarray(k.offset,k.offset+U)):y.texSubImage2D(y.TEXTURE_2D,P,T,M,D[0],D[1],L,I,k.data.subarray(k.offset,k.offset+U));else{var z;I===y.FLOAT?z=u.mallocFloat32(U):z=u.mallocUint8(U);var B=r(z,D,[D[2],D[2]*D[0],1]);F===y.FLOAT&&I===y.UNSIGNED_BYTE?l(B,k):a.assign(B,k),X?y.texImage2D(y.TEXTURE_2D,P,L,D[0],D[1],0,L,I,z.subarray(0,U)):y.texSubImage2D(y.TEXTURE_2D,P,T,M,D[0],D[1],L,I,z.subarray(0,U)),I===y.FLOAT?u.freeFloat32(z):u.freeUint8(z)}}function g(y){var T=y.createTexture();return y.bindTexture(y.TEXTURE_2D,T),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),T}function b(y,T,M,P,L){var I=y.getParameter(y.MAX_TEXTURE_SIZE);if(T<0||T>I||M<0||M>I)throw new Error("gl-texture2d: Invalid texture shape");if(L===y.FLOAT&&!y.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var E=g(y);return y.texImage2D(y.TEXTURE_2D,0,P,T,M,0,P,L,null),new i(y,E,T,M,P,L)}function m(y,T,M,P,L,I){var E=g(y);return y.texImage2D(y.TEXTURE_2D,0,L,L,I,T),new i(y,E,M,P,L,I)}function x(y,T){var M=T.dtype,P=T.shape.slice(),L=y.getParameter(y.MAX_TEXTURE_SIZE);if(P[0]<0||P[0]>L||P[1]<0||P[1]>L)throw new Error("gl-texture2d: Invalid texture size");var I=p(P,T.stride.slice()),E=0;M==="float32"?E=y.FLOAT:M==="float64"?(E=y.FLOAT,I=!1,M="float32"):M==="uint8"?E=y.UNSIGNED_BYTE:(E=y.UNSIGNED_BYTE,I=!1,M="uint8");var k=0;if(P.length===2)k=y.LUMINANCE,P=[P[0],P[1],1],T=r(T.data,P,[T.stride[0],T.stride[1],1],T.offset);else if(P.length===3)if(P[2]===1)k=y.ALPHA;else if(P[2]===2)k=y.LUMINANCE_ALPHA;else if(P[2]===3)k=y.RGB;else if(P[2]===4)k=y.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");E===y.FLOAT&&!y.getExtension("OES_texture_float")&&(E=y.UNSIGNED_BYTE,I=!1);var C,D,F=T.size;if(I)T.offset===0&&T.data.length===F?C=T.data:C=T.data.subarray(T.offset,T.offset+F);else{var N=[P[2],P[2]*P[0],1];D=u.malloc(F,M);var G=r(D,P,N,0);(M==="float32"||M==="float64")&&E===y.UNSIGNED_BYTE?l(G,T):a.assign(G,T),C=D.subarray(0,F)}var U=g(y);return y.texImage2D(y.TEXTURE_2D,0,k,P[0],P[1],0,k,E,C),I||u.free(D),new i(y,U,P[0],P[1],k,E)}function w(y){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(c||n(y),typeof arguments[1]=="number")return b(y,arguments[1],arguments[2],arguments[3]||y.RGBA,arguments[4]||y.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return b(y,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||y.RGBA,arguments[3]||y.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var T=arguments[1],M=o(T)?T:T.raw;if(M)return m(y,M,T.width|0,T.height|0,arguments[2]||y.RGBA,arguments[3]||y.UNSIGNED_BYTE);if(T.shape&&T.data&&T.stride)return x(y,T)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:495,"ndarray-ops":490,"typedarray-pool":595}],354:[function(e,v,S){(function(r){(function(){var a=e("pick-by-alias");v.exports=function(l){if(l?typeof l=="string"&&(l={container:l}):l={},c(l)?l={container:l}:t(l)?l={container:l}:f(l)?l={gl:l}:l=a(l,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),l.pixelRatio||(l.pixelRatio=r.pixelRatio||1),l.gl)return l.gl;if(l.canvas&&(l.container=l.canvas.parentNode),l.container){if(typeof l.container=="string"){var h=document.querySelector(l.container);if(!h)throw Error("Element "+l.container+" is not found");l.container=h}c(l.container)?(l.canvas=l.container,l.container=l.canvas.parentNode):l.canvas||(l.canvas=n(),l.container.appendChild(l.canvas),u(l))}else if(!l.canvas)if(typeof document<"u")l.container=document.body||document.documentElement,l.canvas=n(),l.container.appendChild(l.canvas),u(l);else throw Error("Not DOM environment. Use headless-gl.");if(!l.gl)try{l.gl=l.canvas.getContext("webgl",l.attrs)}catch{try{l.gl=l.canvas.getContext("experimental-webgl",l.attrs)}catch{l.gl=l.canvas.getContext("webgl-experimental",l.attrs)}}return l.gl};function u(o){if(o.container)if(o.container==document.body)document.body.style.width||(o.canvas.width=o.width||o.pixelRatio*r.innerWidth),document.body.style.height||(o.canvas.height=o.height||o.pixelRatio*r.innerHeight);else{var l=o.container.getBoundingClientRect();o.canvas.width=o.width||l.right-l.left,o.canvas.height=o.height||l.bottom-l.top}}function c(o){return typeof o.getContext=="function"&&"width"in o&&"height"in o}function t(o){return typeof o.nodeName=="string"&&typeof o.appendChild=="function"&&typeof o.getBoundingClientRect=="function"}function f(o){return typeof o.drawArrays=="function"||typeof o.drawElements=="function"}function n(){var o=document.createElement("canvas");return o.style.position="absolute",o.style.top=0,o.style.left=0,o}}).call(this)}).call(this,typeof Hs<"u"?Hs:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":511}],355:[function(e,v,S){function r(a,u,c){u?u.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var t=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(c){if(c.length>t)throw new Error("gl-vao: Too many vertex attributes");for(var f=0;f<c.length;++f){var n=c[f];if(n.buffer){var o=n.buffer,l=n.size||4,h=n.type||a.FLOAT,i=!!n.normalized,s=n.stride||0,p=n.offset||0;o.bind(),a.enableVertexAttribArray(f),a.vertexAttribPointer(f,l,h,i,s,p)}else{if(typeof n=="number")a.vertexAttrib1f(f,n);else if(n.length===1)a.vertexAttrib1f(f,n[0]);else if(n.length===2)a.vertexAttrib2f(f,n[0],n[1]);else if(n.length===3)a.vertexAttrib3f(f,n[0],n[1],n[2]);else if(n.length===4)a.vertexAttrib4f(f,n[0],n[1],n[2],n[3]);else throw new Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(f)}}for(;f<t;++f)a.disableVertexAttribArray(f)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var f=0;f<t;++f)a.disableVertexAttribArray(f)}}v.exports=r},{}],356:[function(e,v,S){var r=e("./do-bind.js");function a(c){this.gl=c,this._elements=null,this._attributes=null,this._elementsType=c.UNSIGNED_SHORT}a.prototype.bind=function(){r(this.gl,this._elements,this._attributes)},a.prototype.update=function(c,t,f){this._elements=t,this._attributes=c,this._elementsType=f||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(c,t,f){f=f||0;var n=this.gl;this._elements?n.drawElements(c,t,this._elementsType,f):n.drawArrays(c,f,t)};function u(c){return new a(c)}v.exports=u},{"./do-bind.js":355}],357:[function(e,v,S){var r=e("./do-bind.js");function a(t,f,n,o,l,h){this.location=t,this.dimension=f,this.a=n,this.b=o,this.c=l,this.d=h}a.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function u(t,f,n){this.gl=t,this._ext=f,this.handle=n,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}u.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},u.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},u.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},u.prototype.update=function(t,f,n){if(this.bind(),r(this.gl,f,t),this.unbind(),this._attribs.length=0,t)for(var o=0;o<t.length;++o){var l=t[o];typeof l=="number"?this._attribs.push(new a(o,1,l)):Array.isArray(l)&&this._attribs.push(new a(o,l.length,l[0],l[1],l[2],l[3]))}this._useElements=!!f,this._elementsType=n||this.gl.UNSIGNED_SHORT},u.prototype.draw=function(t,f,n){n=n||0;var o=this.gl;this._useElements?o.drawElements(t,f,this._elementsType,n):o.drawArrays(t,n,f)};function c(t,f){return new u(t,f,f.createVertexArrayOES())}v.exports=c},{"./do-bind.js":355}],358:[function(e,v,S){var r=e("./lib/vao-native.js"),a=e("./lib/vao-emulated.js");function u(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}function c(t,f,n,o){var l=t.createVertexArray?new u(t):t.getExtension("OES_vertex_array_object"),h;return l?h=r(t,l):h=a(t),h.update(f,n,o),h}v.exports=c},{"./lib/vao-emulated.js":356,"./lib/vao-native.js":357}],359:[function(e,v,S){v.exports=r;function r(a,u,c){return a[0]=u[0]+c[0],a[1]=u[1]+c[1],a[2]=u[2]+c[2],a}},{}],360:[function(e,v,S){v.exports=c;var r=e("./fromValues"),a=e("./normalize"),u=e("./dot");function c(t,f){var n=r(t[0],t[1],t[2]),o=r(f[0],f[1],f[2]);a(n,n),a(o,o);var l=u(n,o);return l>1?0:Math.acos(l)}},{"./dot":370,"./fromValues":376,"./normalize":387}],361:[function(e,v,S){v.exports=r;function r(a,u){return a[0]=Math.ceil(u[0]),a[1]=Math.ceil(u[1]),a[2]=Math.ceil(u[2]),a}},{}],362:[function(e,v,S){v.exports=r;function r(a){var u=new Float32Array(3);return u[0]=a[0],u[1]=a[1],u[2]=a[2],u}},{}],363:[function(e,v,S){v.exports=r;function r(a,u){return a[0]=u[0],a[1]=u[1],a[2]=u[2],a}},{}],364:[function(e,v,S){v.exports=r;function r(){var a=new Float32Array(3);return a[0]=0,a[1]=0,a[2]=0,a}},{}],365:[function(e,v,S){v.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2],o=c[0],l=c[1],h=c[2];return a[0]=f*h-n*l,a[1]=n*o-t*h,a[2]=t*l-f*o,a}},{}],366:[function(e,v,S){v.exports=e("./distance")},{"./distance":367}],367:[function(e,v,S){v.exports=r;function r(a,u){var c=u[0]-a[0],t=u[1]-a[1],f=u[2]-a[2];return Math.sqrt(c*c+t*t+f*f)}},{}],368:[function(e,v,S){v.exports=e("./divide")},{"./divide":369}],369:[function(e,v,S){v.exports=r;function r(a,u,c){return a[0]=u[0]/c[0],a[1]=u[1]/c[1],a[2]=u[2]/c[2],a}},{}],370:[function(e,v,S){v.exports=r;function r(a,u){return a[0]*u[0]+a[1]*u[1]+a[2]*u[2]}},{}],371:[function(e,v,S){v.exports=1e-6},{}],372:[function(e,v,S){v.exports=a;var r=e("./epsilon");function a(u,c){var t=u[0],f=u[1],n=u[2],o=c[0],l=c[1],h=c[2];return Math.abs(t-o)<=r*Math.max(1,Math.abs(t),Math.abs(o))&&Math.abs(f-l)<=r*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(n-h)<=r*Math.max(1,Math.abs(n),Math.abs(h))}},{"./epsilon":371}],373:[function(e,v,S){v.exports=r;function r(a,u){return a[0]===u[0]&&a[1]===u[1]&&a[2]===u[2]}},{}],374:[function(e,v,S){v.exports=r;function r(a,u){return a[0]=Math.floor(u[0]),a[1]=Math.floor(u[1]),a[2]=Math.floor(u[2]),a}},{}],375:[function(e,v,S){v.exports=a;var r=e("./create")();function a(u,c,t,f,n,o){var l,h;for(c||(c=3),t||(t=0),f?h=Math.min(f*c+t,u.length):h=u.length,l=t;l<h;l+=c)r[0]=u[l],r[1]=u[l+1],r[2]=u[l+2],n(r,r,o),u[l]=r[0],u[l+1]=r[1],u[l+2]=r[2];return u}},{"./create":364}],376:[function(e,v,S){v.exports=r;function r(a,u,c){var t=new Float32Array(3);return t[0]=a,t[1]=u,t[2]=c,t}},{}],377:[function(e,v,S){v.exports={EPSILON:e("./epsilon"),create:e("./create"),clone:e("./clone"),angle:e("./angle"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),equals:e("./equals"),exactEquals:e("./exactEquals"),add:e("./add"),subtract:e("./subtract"),sub:e("./sub"),multiply:e("./multiply"),mul:e("./mul"),divide:e("./divide"),div:e("./div"),min:e("./min"),max:e("./max"),floor:e("./floor"),ceil:e("./ceil"),round:e("./round"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),dist:e("./dist"),squaredDistance:e("./squaredDistance"),sqrDist:e("./sqrDist"),length:e("./length"),len:e("./len"),squaredLength:e("./squaredLength"),sqrLen:e("./sqrLen"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),cross:e("./cross"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformMat3:e("./transformMat3"),transformQuat:e("./transformQuat"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),forEach:e("./forEach")}},{"./add":359,"./angle":360,"./ceil":361,"./clone":362,"./copy":363,"./create":364,"./cross":365,"./dist":366,"./distance":367,"./div":368,"./divide":369,"./dot":370,"./epsilon":371,"./equals":372,"./exactEquals":373,"./floor":374,"./forEach":375,"./fromValues":376,"./inverse":378,"./len":379,"./length":380,"./lerp":381,"./max":382,"./min":383,"./mul":384,"./multiply":385,"./negate":386,"./normalize":387,"./random":388,"./rotateX":389,"./rotateY":390,"./rotateZ":391,"./round":392,"./scale":393,"./scaleAndAdd":394,"./set":395,"./sqrDist":396,"./sqrLen":397,"./squaredDistance":398,"./squaredLength":399,"./sub":400,"./subtract":401,"./transformMat3":402,"./transformMat4":403,"./transformQuat":404}],378:[function(e,v,S){v.exports=r;function r(a,u){return a[0]=1/u[0],a[1]=1/u[1],a[2]=1/u[2],a}},{}],379:[function(e,v,S){v.exports=e("./length")},{"./length":380}],380:[function(e,v,S){v.exports=r;function r(a){var u=a[0],c=a[1],t=a[2];return Math.sqrt(u*u+c*c+t*t)}},{}],381:[function(e,v,S){v.exports=r;function r(a,u,c,t){var f=u[0],n=u[1],o=u[2];return a[0]=f+t*(c[0]-f),a[1]=n+t*(c[1]-n),a[2]=o+t*(c[2]-o),a}},{}],382:[function(e,v,S){v.exports=r;function r(a,u,c){return a[0]=Math.max(u[0],c[0]),a[1]=Math.max(u[1],c[1]),a[2]=Math.max(u[2],c[2]),a}},{}],383:[function(e,v,S){v.exports=r;function r(a,u,c){return a[0]=Math.min(u[0],c[0]),a[1]=Math.min(u[1],c[1]),a[2]=Math.min(u[2],c[2]),a}},{}],384:[function(e,v,S){v.exports=e("./multiply")},{"./multiply":385}],385:[function(e,v,S){v.exports=r;function r(a,u,c){return a[0]=u[0]*c[0],a[1]=u[1]*c[1],a[2]=u[2]*c[2],a}},{}],386:[function(e,v,S){v.exports=r;function r(a,u){return a[0]=-u[0],a[1]=-u[1],a[2]=-u[2],a}},{}],387:[function(e,v,S){v.exports=r;function r(a,u){var c=u[0],t=u[1],f=u[2],n=c*c+t*t+f*f;return n>0&&(n=1/Math.sqrt(n),a[0]=u[0]*n,a[1]=u[1]*n,a[2]=u[2]*n),a}},{}],388:[function(e,v,S){v.exports=r;function r(a,u){u=u||1;var c=Math.random()*2*Math.PI,t=Math.random()*2-1,f=Math.sqrt(1-t*t)*u;return a[0]=Math.cos(c)*f,a[1]=Math.sin(c)*f,a[2]=t*u,a}},{}],389:[function(e,v,S){v.exports=r;function r(a,u,c,t){var f=c[1],n=c[2],o=u[1]-f,l=u[2]-n,h=Math.sin(t),i=Math.cos(t);return a[0]=u[0],a[1]=f+o*i-l*h,a[2]=n+o*h+l*i,a}},{}],390:[function(e,v,S){v.exports=r;function r(a,u,c,t){var f=c[0],n=c[2],o=u[0]-f,l=u[2]-n,h=Math.sin(t),i=Math.cos(t);return a[0]=f+l*h+o*i,a[1]=u[1],a[2]=n+l*i-o*h,a}},{}],391:[function(e,v,S){v.exports=r;function r(a,u,c,t){var f=c[0],n=c[1],o=u[0]-f,l=u[1]-n,h=Math.sin(t),i=Math.cos(t);return a[0]=f+o*i-l*h,a[1]=n+o*h+l*i,a[2]=u[2],a}},{}],392:[function(e,v,S){v.exports=r;function r(a,u){return a[0]=Math.round(u[0]),a[1]=Math.round(u[1]),a[2]=Math.round(u[2]),a}},{}],393:[function(e,v,S){v.exports=r;function r(a,u,c){return a[0]=u[0]*c,a[1]=u[1]*c,a[2]=u[2]*c,a}},{}],394:[function(e,v,S){v.exports=r;function r(a,u,c,t){return a[0]=u[0]+c[0]*t,a[1]=u[1]+c[1]*t,a[2]=u[2]+c[2]*t,a}},{}],395:[function(e,v,S){v.exports=r;function r(a,u,c,t){return a[0]=u,a[1]=c,a[2]=t,a}},{}],396:[function(e,v,S){v.exports=e("./squaredDistance")},{"./squaredDistance":398}],397:[function(e,v,S){v.exports=e("./squaredLength")},{"./squaredLength":399}],398:[function(e,v,S){v.exports=r;function r(a,u){var c=u[0]-a[0],t=u[1]-a[1],f=u[2]-a[2];return c*c+t*t+f*f}},{}],399:[function(e,v,S){v.exports=r;function r(a){var u=a[0],c=a[1],t=a[2];return u*u+c*c+t*t}},{}],400:[function(e,v,S){v.exports=e("./subtract")},{"./subtract":401}],401:[function(e,v,S){v.exports=r;function r(a,u,c){return a[0]=u[0]-c[0],a[1]=u[1]-c[1],a[2]=u[2]-c[2],a}},{}],402:[function(e,v,S){v.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2];return a[0]=t*c[0]+f*c[3]+n*c[6],a[1]=t*c[1]+f*c[4]+n*c[7],a[2]=t*c[2]+f*c[5]+n*c[8],a}},{}],403:[function(e,v,S){v.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2],o=c[3]*t+c[7]*f+c[11]*n+c[15];return o=o||1,a[0]=(c[0]*t+c[4]*f+c[8]*n+c[12])/o,a[1]=(c[1]*t+c[5]*f+c[9]*n+c[13])/o,a[2]=(c[2]*t+c[6]*f+c[10]*n+c[14])/o,a}},{}],404:[function(e,v,S){v.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2],o=c[0],l=c[1],h=c[2],i=c[3],s=i*t+l*n-h*f,p=i*f+h*t-o*n,d=i*n+o*f-l*t,g=-o*t-l*f-h*n;return a[0]=s*i+g*-o+p*-h-d*-l,a[1]=p*i+g*-l+d*-o-s*-h,a[2]=d*i+g*-h+s*-l-p*-o,a}},{}],405:[function(e,v,S){v.exports=r;function r(a,u,c){return a[0]=u[0]+c[0],a[1]=u[1]+c[1],a[2]=u[2]+c[2],a[3]=u[3]+c[3],a}},{}],406:[function(e,v,S){v.exports=r;function r(a){var u=new Float32Array(4);return u[0]=a[0],u[1]=a[1],u[2]=a[2],u[3]=a[3],u}},{}],407:[function(e,v,S){v.exports=r;function r(a,u){return a[0]=u[0],a[1]=u[1],a[2]=u[2],a[3]=u[3],a}},{}],408:[function(e,v,S){v.exports=r;function r(){var a=new Float32Array(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a}},{}],409:[function(e,v,S){v.exports=r;function r(a,u){var c=u[0]-a[0],t=u[1]-a[1],f=u[2]-a[2],n=u[3]-a[3];return Math.sqrt(c*c+t*t+f*f+n*n)}},{}],410:[function(e,v,S){v.exports=r;function r(a,u,c){return a[0]=u[0]/c[0],a[1]=u[1]/c[1],a[2]=u[2]/c[2],a[3]=u[3]/c[3],a}},{}],411:[function(e,v,S){v.exports=r;function r(a,u){return a[0]*u[0]+a[1]*u[1]+a[2]*u[2]+a[3]*u[3]}},{}],412:[function(e,v,S){v.exports=r;function r(a,u,c,t){var f=new Float32Array(4);return f[0]=a,f[1]=u,f[2]=c,f[3]=t,f}},{}],413:[function(e,v,S){v.exports={create:e("./create"),clone:e("./clone"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformQuat:e("./transformQuat")}},{"./add":405,"./clone":406,"./copy":407,"./create":408,"./distance":409,"./divide":410,"./dot":411,"./fromValues":412,"./inverse":414,"./length":415,"./lerp":416,"./max":417,"./min":418,"./multiply":419,"./negate":420,"./normalize":421,"./random":422,"./scale":423,"./scaleAndAdd":424,"./set":425,"./squaredDistance":426,"./squaredLength":427,"./subtract":428,"./transformMat4":429,"./transformQuat":430}],414:[function(e,v,S){v.exports=r;function r(a,u){return a[0]=1/u[0],a[1]=1/u[1],a[2]=1/u[2],a[3]=1/u[3],a}},{}],415:[function(e,v,S){v.exports=r;function r(a){var u=a[0],c=a[1],t=a[2],f=a[3];return Math.sqrt(u*u+c*c+t*t+f*f)}},{}],416:[function(e,v,S){v.exports=r;function r(a,u,c,t){var f=u[0],n=u[1],o=u[2],l=u[3];return a[0]=f+t*(c[0]-f),a[1]=n+t*(c[1]-n),a[2]=o+t*(c[2]-o),a[3]=l+t*(c[3]-l),a}},{}],417:[function(e,v,S){v.exports=r;function r(a,u,c){return a[0]=Math.max(u[0],c[0]),a[1]=Math.max(u[1],c[1]),a[2]=Math.max(u[2],c[2]),a[3]=Math.max(u[3],c[3]),a}},{}],418:[function(e,v,S){v.exports=r;function r(a,u,c){return a[0]=Math.min(u[0],c[0]),a[1]=Math.min(u[1],c[1]),a[2]=Math.min(u[2],c[2]),a[3]=Math.min(u[3],c[3]),a}},{}],419:[function(e,v,S){v.exports=r;function r(a,u,c){return a[0]=u[0]*c[0],a[1]=u[1]*c[1],a[2]=u[2]*c[2],a[3]=u[3]*c[3],a}},{}],420:[function(e,v,S){v.exports=r;function r(a,u){return a[0]=-u[0],a[1]=-u[1],a[2]=-u[2],a[3]=-u[3],a}},{}],421:[function(e,v,S){v.exports=r;function r(a,u){var c=u[0],t=u[1],f=u[2],n=u[3],o=c*c+t*t+f*f+n*n;return o>0&&(o=1/Math.sqrt(o),a[0]=c*o,a[1]=t*o,a[2]=f*o,a[3]=n*o),a}},{}],422:[function(e,v,S){var r=e("./normalize"),a=e("./scale");v.exports=u;function u(c,t){return t=t||1,c[0]=Math.random(),c[1]=Math.random(),c[2]=Math.random(),c[3]=Math.random(),r(c,c),a(c,c,t),c}},{"./normalize":421,"./scale":423}],423:[function(e,v,S){v.exports=r;function r(a,u,c){return a[0]=u[0]*c,a[1]=u[1]*c,a[2]=u[2]*c,a[3]=u[3]*c,a}},{}],424:[function(e,v,S){v.exports=r;function r(a,u,c,t){return a[0]=u[0]+c[0]*t,a[1]=u[1]+c[1]*t,a[2]=u[2]+c[2]*t,a[3]=u[3]+c[3]*t,a}},{}],425:[function(e,v,S){v.exports=r;function r(a,u,c,t,f){return a[0]=u,a[1]=c,a[2]=t,a[3]=f,a}},{}],426:[function(e,v,S){v.exports=r;function r(a,u){var c=u[0]-a[0],t=u[1]-a[1],f=u[2]-a[2],n=u[3]-a[3];return c*c+t*t+f*f+n*n}},{}],427:[function(e,v,S){v.exports=r;function r(a){var u=a[0],c=a[1],t=a[2],f=a[3];return u*u+c*c+t*t+f*f}},{}],428:[function(e,v,S){v.exports=r;function r(a,u,c){return a[0]=u[0]-c[0],a[1]=u[1]-c[1],a[2]=u[2]-c[2],a[3]=u[3]-c[3],a}},{}],429:[function(e,v,S){v.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2],o=u[3];return a[0]=c[0]*t+c[4]*f+c[8]*n+c[12]*o,a[1]=c[1]*t+c[5]*f+c[9]*n+c[13]*o,a[2]=c[2]*t+c[6]*f+c[10]*n+c[14]*o,a[3]=c[3]*t+c[7]*f+c[11]*n+c[15]*o,a}},{}],430:[function(e,v,S){v.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2],o=c[0],l=c[1],h=c[2],i=c[3],s=i*t+l*n-h*f,p=i*f+h*t-o*n,d=i*n+o*f-l*t,g=-o*t-l*f-h*n;return a[0]=s*i+g*-o+p*-h-d*-l,a[1]=p*i+g*-l+d*-o-s*-h,a[2]=d*i+g*-h+s*-l-p*-o,a[3]=u[3],a}},{}],431:[function(e,v,S){var r=e("glsl-tokenizer"),a=e("atob-lite");v.exports=u;function u(c){for(var t=Array.isArray(c)?c:r(c),f=0;f<t.length;f++){var n=t[f];if(n.type==="preprocessor"){var o=n.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!o&&!!o[2]){var l=o[1],h=o[2];return(l?a(h):h).trim()}}}}},{"atob-lite":77,"glsl-tokenizer":438}],432:[function(e,v,S){v.exports=T;var r=e("./lib/literals"),a=e("./lib/operators"),u=e("./lib/builtins"),c=e("./lib/literals-300es"),t=e("./lib/builtins-300es"),f=999,n=9999,o=0,l=1,h=2,i=3,s=4,p=5,d=6,g=7,b=8,m=9,x=10,w=11,y=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function T(M){var P=0,L=0,I=f,E,k,C=[],D=[],F=1,N=0,G=0,U=!1,X=!1,z="",B;M=M||{};var j=u,V=r;M.version==="300 es"&&(j=t,V=c);for(var K={},te={},P=0;P<j.length;P++)K[j[P]]=!0;for(var P=0;P<V.length;P++)te[V[P]]=!0;return function(me){return D=[],me!==null?ie(me):se()};function $(me){me.length&&D.push({type:y[I],data:me,position:G,line:F,column:N})}function ie(me){P=0,me.toString&&(me=me.toString()),z+=me.replace(/\r\n/g,`
`),B=z.length;for(var be;E=z[P],P<B;){switch(be=P,I){case o:P=ee();break;case l:P=re();break;case h:P=oe();break;case i:P=ae();break;case s:P=pe();break;case w:P=de();break;case p:P=W();break;case n:P=ue();break;case m:P=H();break;case f:P=Q();break}if(be!==P)switch(z[be]){case`
`:N=0,++F;break;default:++N;break}}return L+=P,z=z.slice(P),D}function se(me){return C.length&&$(C.join("")),I=x,$("(eof)"),D}function Q(){return C=C.length?[]:C,k==="/"&&E==="*"?(G=L+P-1,I=o,k=E,P+1):k==="/"&&E==="/"?(G=L+P-1,I=l,k=E,P+1):E==="#"?(I=h,G=L+P,P):/\s/.test(E)?(I=m,G=L+P,P):(U=/\d/.test(E),X=/[^\w_]/.test(E),G=L+P,I=U?s:X?i:n,P)}function H(){return/[^\s]/g.test(E)?($(C.join("")),I=f,P):(C.push(E),k=E,P+1)}function oe(){return(E==="\r"||E===`
`)&&k!=="\\"?($(C.join("")),I=f,P):(C.push(E),k=E,P+1)}function re(){return oe()}function ee(){return E==="/"&&k==="*"?(C.push(E),$(C.join("")),I=f,P+1):(C.push(E),k=E,P+1)}function ae(){if(k==="."&&/\d/.test(E))return I=p,P;if(k==="/"&&E==="*")return I=o,P;if(k==="/"&&E==="/")return I=l,P;if(E==="."&&C.length){for(;fe(C););return I=p,P}if(E===";"||E===")"||E==="("){if(C.length)for(;fe(C););return $(E),I=f,P+1}var me=C.length===2&&E!=="=";if(/[\w_\d\s]/.test(E)||me){for(;fe(C););return I=f,P}return C.push(E),k=E,P+1}function fe(me){var be=0,Me,Pe;do{if(Me=a.indexOf(me.slice(0,me.length+be).join("")),Pe=a[Me],Me===-1){if(be--+me.length>0)continue;Pe=me.slice(0,1).join("")}return $(Pe),G+=Pe.length,C=C.slice(Pe.length),C.length}while(1)}function de(){return/[^a-fA-F0-9]/.test(E)?($(C.join("")),I=f,P):(C.push(E),k=E,P+1)}function pe(){return E==="."||/[eE]/.test(E)?(C.push(E),I=p,k=E,P+1):E==="x"&&C.length===1&&C[0]==="0"?(I=w,C.push(E),k=E,P+1):/[^\d]/.test(E)?($(C.join("")),I=f,P):(C.push(E),k=E,P+1)}function W(){return E==="f"&&(C.push(E),k=E,P+=1),/[eE]/.test(E)||(E==="-"||E==="+")&&/[eE]/.test(k)?(C.push(E),k=E,P+1):/[^\d]/.test(E)?($(C.join("")),I=f,P):(C.push(E),k=E,P+1)}function ue(){if(/[^\d\w_]/.test(E)){var me=C.join("");return te[me]?I=b:K[me]?I=g:I=d,$(C.join("")),I=f,P}return C.push(E),k=E,P+1}}},{"./lib/builtins":434,"./lib/builtins-300es":433,"./lib/literals":436,"./lib/literals-300es":435,"./lib/operators":437}],433:[function(e,v,S){var r=e("./builtins");r=r.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),v.exports=r.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":434}],434:[function(e,v,S){v.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],435:[function(e,v,S){var r=e("./literals");v.exports=r.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":436}],436:[function(e,v,S){v.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],437:[function(e,v,S){v.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],438:[function(e,v,S){var r=e("./index");v.exports=a;function a(u,c){var t=r(c),f=[];return f=f.concat(t(u)),f=f.concat(t(null)),f}},{"./index":432}],439:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],440:[function(e,v,S){(function(r){(function(){var a=e("is-browser"),u;typeof r.matchMedia=="function"?u=!r.matchMedia("(hover: none)").matches:u=a,v.exports=u}).call(this)}).call(this,typeof Hs<"u"?Hs:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":464}],441:[function(e,v,S){var r=e("is-browser");function a(){var u=!1;try{var c=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("test",null,c),window.removeEventListener("test",null,c)}catch{u=!1}return u}v.exports=r&&a()},{"is-browser":464}],442:[function(e,v,S){S.read=function(r,a,u,c,t){var f,n,o=t*8-c-1,l=(1<<o)-1,h=l>>1,i=-7,s=u?t-1:0,p=u?-1:1,d=r[a+s];for(s+=p,f=d&(1<<-i)-1,d>>=-i,i+=o;i>0;f=f*256+r[a+s],s+=p,i-=8);for(n=f&(1<<-i)-1,f>>=-i,i+=c;i>0;n=n*256+r[a+s],s+=p,i-=8);if(f===0)f=1-h;else{if(f===l)return n?NaN:(d?-1:1)*(1/0);n=n+Math.pow(2,c),f=f-h}return(d?-1:1)*n*Math.pow(2,f-c)},S.write=function(r,a,u,c,t,f){var n,o,l,h=f*8-t-1,i=(1<<h)-1,s=i>>1,p=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=c?0:f-1,g=c?1:-1,b=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(o=isNaN(a)?1:0,n=i):(n=Math.floor(Math.log(a)/Math.LN2),a*(l=Math.pow(2,-n))<1&&(n--,l*=2),n+s>=1?a+=p/l:a+=p*Math.pow(2,1-s),a*l>=2&&(n++,l/=2),n+s>=i?(o=0,n=i):n+s>=1?(o=(a*l-1)*Math.pow(2,t),n=n+s):(o=a*Math.pow(2,s-1)*Math.pow(2,t),n=0));t>=8;r[u+d]=o&255,d+=g,o/=256,t-=8);for(n=n<<t|o,h+=t;h>0;r[u+d]=n&255,d+=g,n/=256,h-=8);r[u+d-g]|=b*128}},{}],443:[function(e,v,S){var r=e("./types");v.exports=function(a,u){var c,t;for(c in r)if(t=r[c].detect(a,u),t)return c}},{"./types":446}],444:[function(e,v,S){(function(r){(function(){var a=e("fs"),u=e("path"),c=e("./types"),t=e("./detector"),f=512*1024;function n(h,i){var s=t(h,i);if(s in c){var p=c[s].calculate(h,i);if(p!==!1)return p.type=s,p}throw new TypeError("unsupported file type: "+s+" (file: "+i+")")}function o(h,i){a.open(h,"r",function(s,p){if(s)return i(s);a.fstat(p,function(d,g){if(d)return i(d);var b=g.size;if(b<=0)return i(new Error("File size is not greater than 0 \u2014\u2014 "+h));var m=Math.min(b,f),x=r.alloc(m);a.read(p,x,0,m,0,function(w){if(w)return i(w);a.close(p,function(y){i(y,x)})})})})}function l(h){var i=a.openSync(h,"r"),s=a.fstatSync(i).size,p=Math.min(s,f),d=r.alloc(p);return a.readSync(i,d,0,p,0),a.closeSync(i),d}v.exports=function(h,i){if(r.isBuffer(h))return n(h);if(typeof h!="string")throw new TypeError("invalid invocation");var s=u.resolve(h);if(typeof i=="function")o(s,function(d,g){if(d)return i(d);var b;try{b=n(g,s)}catch(m){d=m}i(d,b)});else{var p=l(s);return n(p,s)}},v.exports.types=Object.keys(c)}).call(this)}).call(this,e("buffer").Buffer)},{"./detector":443,"./types":446,buffer:111,fs:109,path:507}],445:[function(e,v,S){function r(a,u,c,t){c=c||0;var f=t?"BE":"LE",n=a["readUInt"+u+f];return n.call(a,c)}v.exports=r},{}],446:[function(e,v,S){var r={bmp:e("./types/bmp"),cur:e("./types/cur"),dds:e("./types/dds"),gif:e("./types/gif"),icns:e("./types/icns"),ico:e("./types/ico"),jpg:e("./types/jpg"),png:e("./types/png"),psd:e("./types/psd"),svg:e("./types/svg"),tiff:e("./types/tiff"),webp:e("./types/webp")};v.exports=r},{"./types/bmp":447,"./types/cur":448,"./types/dds":449,"./types/gif":450,"./types/icns":451,"./types/ico":452,"./types/jpg":453,"./types/png":454,"./types/psd":455,"./types/svg":456,"./types/tiff":457,"./types/webp":458}],447:[function(e,v,S){function r(u){return u.toString("ascii",0,2)==="BM"}function a(u){return{width:u.readUInt32LE(18),height:Math.abs(u.readInt32LE(22))}}v.exports={detect:r,calculate:a}},{}],448:[function(e,v,S){var r=2;function a(u){var c;return u.readUInt16LE(0)!==0?!1:(c=u.readUInt16LE(2),c===r)}v.exports={detect:a,calculate:e("./ico").calculate}},{"./ico":452}],449:[function(e,v,S){function r(u){return u.readUInt32LE(0)===542327876}function a(u){return{height:u.readUInt32LE(12),width:u.readUInt32LE(16)}}v.exports={detect:r,calculate:a}},{}],450:[function(e,v,S){var r=/^GIF8[79]a/;function a(c){var t=c.toString("ascii",0,6);return r.test(t)}function u(c){return{width:c.readUInt16LE(6),height:c.readUInt16LE(8)}}v.exports={detect:a,calculate:u}},{}],451:[function(e,v,S){var r=8,a=4,u=4;function c(l){return l.toString("ascii",0,4)==="icns"}var t={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function f(l,h){var i=h+u;return[l.toString("ascii",h,i),l.readUInt32BE(i)]}function n(l){var h=t[l];return{width:h,height:h,type:l}}function o(l){var h=l.length,i=r,s=l.readUInt32BE(a),p,d,g;if(p=f(l,i),d=n(p[0]),i+=p[1],i===s)return d;for(g={width:d.width,height:d.height,images:[d]};i<s&&i<h;)p=f(l,i),d=n(p[0]),i+=p[1],g.images.push(d);return g}v.exports={detect:c,calculate:o}},{}],452:[function(e,v,S){var r=1,a=2+2+2,u=1+1+1+1+2+2+4+4;function c(o){var l;return o.readUInt16LE(0)!==0?!1:(l=o.readUInt16LE(2),l===r)}function t(o,l){var h=o.readUInt8(l);return h===0?256:h}function f(o,l){var h=a+l*u;return{width:t(o,h),height:t(o,h+1)}}function n(o){var l=o.readUInt16LE(4),h=f(o,0),i;if(l===1)return h;for(h.images=[{width:h.width,height:h.height}],i=1;i<l;i+=1)h.images.push(f(o,i));return h}v.exports={detect:c,calculate:n}},{}],453:[function(e,v,S){var r=e("../readUInt");function a(b){var m=b.toString("hex",0,2);return m==="ffd8"}function u(b){var m=b.toString("hex",2,6);return m==="45786966"}function c(b,m){return{height:b.readUInt16BE(m),width:b.readUInt16BE(m+2)}}var t=2,f=6,n=2,o="4d4d",l="4949",h=12,i=2;function s(b,m){var x=b.slice(t,m),w=x.toString("hex",f,f+n),y=w===o,T=w===l;if(y||T)return p(x,y)}function p(b,m){for(var x=8,w=f+x,y=r(b,16,w,m),T,M,P=0;P<y;P++){if(T=w+i+P*h,M=T+h,T>b.length)return;var L=b.slice(T,M),I=r(L,16,0,m);if(I===274){var E=r(L,16,2,m);if(E!==3)return;var k=r(L,32,4,m);return k!==1?void 0:r(L,16,8,m)}}}function d(b,m){if(m>b.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(b[m]!==255)throw new TypeError("Invalid JPG, marker table corrupted")}function g(b){b=b.slice(4);for(var m,x,w;b.length;){if(x=b.readUInt16BE(0),u(b)&&(m=s(b,x)),d(b,x),w=b[x+1],w===192||w===193||w===194){var y=c(b,x+5);return m?{width:y.width,height:y.height,orientation:m}:y}b=b.slice(x+2)}throw new TypeError("Invalid JPG, no size found")}v.exports={detect:a,calculate:g}},{"../readUInt":445}],454:[function(e,v,S){var r=`PNG\r

`,a="IHDR",u="CgBI";function c(f){if(r===f.toString("ascii",1,8)){var n=f.toString("ascii",12,16);if(n===u&&(n=f.toString("ascii",28,32)),n!==a)throw new TypeError("invalid png");return!0}}function t(f){return f.toString("ascii",12,16)===u?{width:f.readUInt32BE(32),height:f.readUInt32BE(36)}:{width:f.readUInt32BE(16),height:f.readUInt32BE(20)}}v.exports={detect:c,calculate:t}},{}],455:[function(e,v,S){function r(u){return u.toString("ascii",0,4)==="8BPS"}function a(u){return{width:u.readUInt32BE(18),height:u.readUInt32BE(14)}}v.exports={detect:r,calculate:a}},{}],456:[function(e,v,S){var r=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/;function a(i){return r.test(i)}var u={root:r,width:/\swidth=(['"])([^%]+?)\1/,height:/\sheight=(['"])([^%]+?)\1/,viewbox:/\sviewBox=(['"])(.+?)\1/},c={cm:96/2.54,mm:96/2.54/10,m:96/2.54*100,pt:96/72,pc:96/72/12,em:16,ex:8};function t(i){var s=/([0-9.]+)([a-z]*)/.exec(i);if(!!s)return Math.round(parseFloat(s[1])*(c[s[2]]||1))}function f(i){var s=i.split(" ");return{width:t(s[2]),height:t(s[3])}}function n(i){var s=i.match(u.width),p=i.match(u.height),d=i.match(u.viewbox);return{width:s&&t(s[2]),height:p&&t(p[2]),viewbox:d&&f(d[2])}}function o(i){return{width:i.width,height:i.height}}function l(i){var s=i.viewbox.width/i.viewbox.height;return i.width?{width:i.width,height:Math.floor(i.width/s)}:i.height?{width:Math.floor(i.height*s),height:i.height}:{width:i.viewbox.width,height:i.viewbox.height}}function h(i){var s=i.toString("utf8").match(u.root);if(s){var p=n(s[0]);if(p.width&&p.height)return o(p);if(p.viewbox)return l(p)}throw new TypeError("invalid svg")}v.exports={detect:a,calculate:h}},{}],457:[function(e,v,S){(function(r){(function(){var a=e("fs"),u=e("../readUInt");function c(i){var s=i.toString("hex",0,4);return s==="49492a00"||s==="4d4d002a"}function t(i,s,p){var d=u(i,32,4,p),g=1024,b=a.statSync(s).size;d+g>b&&(g=b-d-10);var m=r.alloc(g),x=a.openSync(s,"r");a.readSync(x,m,0,g,d);var w=m.slice(2);return w}function f(i,s){var p=u(i,16,8,s),d=u(i,16,10,s);return(d<<16)+p}function n(i){if(i.length>24)return i.slice(12)}function o(i,s){for(var p={},d,g,b;i&&i.length&&(d=u(i,16,0,s),g=u(i,16,2,s),b=u(i,32,4,s),d!==0);)b===1&&(g===3||g===4)&&(p[d]=f(i,s)),i=n(i);return p}function l(i){var s=i.toString("ascii",0,2);if(s==="II")return"LE";if(s==="MM")return"BE"}function h(i,s){if(!s)throw new TypeError("Tiff doesn't support buffer");var p=l(i)==="BE",d=t(i,s,p),g=o(d,p),b=g[256],m=g[257];if(!b||!m)throw new TypeError("Invalid Tiff, missing tags");return{width:b,height:m}}v.exports={detect:c,calculate:h}}).call(this)}).call(this,e("buffer").Buffer)},{"../readUInt":445,buffer:111,fs:109}],458:[function(e,v,S){function r(f){var n=f.toString("ascii",0,4)==="RIFF",o=f.toString("ascii",8,12)==="WEBP",l=f.toString("ascii",12,15)==="VP8";return n&&o&&l}function a(f){var n=f.toString("ascii",12,16);if(f=f.slice(20,30),n==="VP8X"){var o=f[0],l=(o&192)===0,h=(o&1)===0;return l&&h?u(f):!1}if(n==="VP8 "&&f[0]!==47)return t(f);var i=f.toString("hex",3,6);return n==="VP8L"&&i!=="9d012a"?c(f):!1}function u(f){return{width:1+f.readUIntLE(4,3),height:1+f.readUIntLE(7,3)}}function c(f){return{width:1+((f[2]&63)<<8|f[1]),height:1+((f[4]&15)<<10|f[3]<<2|(f[2]&192)>>6)}}function t(f){return{width:f.readInt16LE(6)&16383,height:f.readInt16LE(8)&16383}}v.exports={detect:r,calculate:a}},{}],459:[function(e,v,S){v.exports=h;var r=e("robust-orientation"),a=e("simplicial-complex").compareCells;function u(i,s,p){this.vertices=i,this.adjacent=s,this.boundary=p,this.lastVisited=-1}u.prototype.flip=function(){var i=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=i;var s=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=s};function c(i,s,p){this.vertices=i,this.cell=s,this.index=p}function t(i,s){return a(i.vertices,s.vertices)}function f(i){for(var s=["function orient(){var tuple=this.tuple;return test("],p=0;p<=i;++p)p>0&&s.push(","),s.push("tuple[",p,"]");s.push(")}return orient");var d=new Function("test",s.join("")),g=r[i+1];return g||(g=r),d(g)}var n=[];function o(i,s,p){this.dimension=i,this.vertices=s,this.simplices=p,this.interior=p.filter(function(b){return!b.boundary}),this.tuple=new Array(i+1);for(var d=0;d<=i;++d)this.tuple[d]=this.vertices[d];var g=n[i];g||(g=n[i]=f(i)),this.orient=g}var l=o.prototype;l.handleBoundaryDegeneracy=function(i,s){var p=this.dimension,d=this.vertices.length-1,g=this.tuple,b=this.vertices,m=[i];for(i.lastVisited=-d;m.length>0;){i=m.pop(),i.vertices;for(var x=i.adjacent,w=0;w<=p;++w){var y=x[w];if(!(!y.boundary||y.lastVisited<=-d)){for(var T=y.vertices,M=0;M<=p;++M){var P=T[M];P<0?g[M]=s:g[M]=b[P]}var L=this.orient();if(L>0)return y;y.lastVisited=-d,L===0&&m.push(y)}}}return null},l.walk=function(i,s){var p=this.vertices.length-1,d=this.dimension,g=this.vertices,b=this.tuple,m=s?this.interior.length*Math.random()|0:this.interior.length-1,x=this.interior[m];e:for(;!x.boundary;){for(var w=x.vertices,y=x.adjacent,T=0;T<=d;++T)b[T]=g[w[T]];x.lastVisited=p;for(var T=0;T<=d;++T){var M=y[T];if(!(M.lastVisited>=p)){var P=b[T];b[T]=i;var L=this.orient();if(b[T]=P,L<0){x=M;continue e}else M.boundary?M.lastVisited=-p:M.lastVisited=p}}return}return x},l.addPeaks=function(i,s){var p=this.vertices.length-1,d=this.dimension,g=this.vertices,b=this.tuple,m=this.interior,x=this.simplices,w=[s];s.lastVisited=p,s.vertices[s.vertices.indexOf(-1)]=p,s.boundary=!1,m.push(s);for(var y=[];w.length>0;){var s=w.pop(),T=s.vertices,M=s.adjacent,P=T.indexOf(p);if(!(P<0)){for(var L=0;L<=d;++L)if(L!==P){var I=M[L];if(!(!I.boundary||I.lastVisited>=p)){var E=I.vertices;if(I.lastVisited!==-p){for(var k=0,C=0;C<=d;++C)E[C]<0?(k=C,b[C]=i):b[C]=g[E[C]];var D=this.orient();if(D>0){E[k]=p,I.boundary=!1,m.push(I),w.push(I),I.lastVisited=p;continue}else I.lastVisited=-p}var F=I.adjacent,N=T.slice(),G=M.slice(),U=new u(N,G,!0);x.push(U);var X=F.indexOf(s);if(!(X<0)){F[X]=U,G[P]=I,N[L]=-1,G[L]=s,M[L]=U,U.flip();for(var C=0;C<=d;++C){var z=N[C];if(!(z<0||z===p)){for(var B=new Array(d-1),j=0,V=0;V<=d;++V){var K=N[V];K<0||V===C||(B[j++]=K)}y.push(new c(B,U,C))}}}}}}}y.sort(t);for(var L=0;L+1<y.length;L+=2){var te=y[L],$=y[L+1],ie=te.index,se=$.index;ie<0||se<0||(te.cell.adjacent[te.index]=$.cell,$.cell.adjacent[$.index]=te.cell)}},l.insert=function(i,s){var p=this.vertices;p.push(i);var d=this.walk(i,s);if(!!d){for(var g=this.dimension,b=this.tuple,m=0;m<=g;++m){var x=d.vertices[m];x<0?b[m]=i:b[m]=p[x]}var w=this.orient(b);w<0||w===0&&(d=this.handleBoundaryDegeneracy(d,i),!d)||this.addPeaks(i,d)}},l.boundary=function(){for(var i=this.dimension,s=[],p=this.simplices,d=p.length,g=0;g<d;++g){var b=p[g];if(b.boundary){for(var m=new Array(i),x=b.vertices,w=0,y=0,T=0;T<=i;++T)x[T]>=0?m[w++]=x[T]:y=T&1;if(y===(i&1)){var M=m[0];m[0]=m[1],m[1]=M}s.push(m)}}return s};function h(i,s){var p=i.length;if(p===0)throw new Error("Must have at least d+1 points");var d=i[0].length;if(p<=d)throw new Error("Must input at least d+1 points");var g=i.slice(0,d+1),b=r.apply(void 0,g);if(b===0)throw new Error("Input not in general position");for(var m=new Array(d+1),x=0;x<=d;++x)m[x]=x;b<0&&(m[0]=1,m[1]=0);for(var w=new u(m,new Array(d+1),!1),y=w.adjacent,T=new Array(d+2),x=0;x<=d;++x){for(var M=m.slice(),P=0;P<=d;++P)P===x&&(M[P]=-1);var L=M[0];M[0]=M[1],M[1]=L;var I=new u(M,new Array(d+1),!0);y[x]=I,T[x]=I}T[d+1]=w;for(var x=0;x<=d;++x)for(var M=y[x].vertices,E=y[x].adjacent,P=0;P<=d;++P){var k=M[P];if(k<0){E[P]=w;continue}for(var C=0;C<=d;++C)y[C].vertices.indexOf(k)<0&&(E[P]=y[C])}for(var D=new o(d,g,T),F=!!s,x=d+1;x<p;++x)D.insert(i[x],F);return D.boundary()}},{"robust-orientation":548,"simplicial-complex":558}],460:[function(e,v,S){var r=e("binary-search-bounds"),a=0,u=1,c=2;v.exports=y;function t(T,M,P,L,I){this.mid=T,this.left=M,this.right=P,this.leftPoints=L,this.rightPoints=I,this.count=(M?M.count:0)+(P?P.count:0)+L.length}var f=t.prototype;function n(T,M){T.mid=M.mid,T.left=M.left,T.right=M.right,T.leftPoints=M.leftPoints,T.rightPoints=M.rightPoints,T.count=M.count}function o(T,M){var P=m(M);T.mid=P.mid,T.left=P.left,T.right=P.right,T.leftPoints=P.leftPoints,T.rightPoints=P.rightPoints,T.count=P.count}function l(T,M){var P=T.intervals([]);P.push(M),o(T,P)}function h(T,M){var P=T.intervals([]),L=P.indexOf(M);return L<0?a:(P.splice(L,1),o(T,P),u)}f.intervals=function(T){return T.push.apply(T,this.leftPoints),this.left&&this.left.intervals(T),this.right&&this.right.intervals(T),T},f.insert=function(T){var M=this.count-this.leftPoints.length;if(this.count+=1,T[1]<this.mid)this.left?4*(this.left.count+1)>3*(M+1)?l(this,T):this.left.insert(T):this.left=m([T]);else if(T[0]>this.mid)this.right?4*(this.right.count+1)>3*(M+1)?l(this,T):this.right.insert(T):this.right=m([T]);else{var P=r.ge(this.leftPoints,T,g),L=r.ge(this.rightPoints,T,b);this.leftPoints.splice(P,0,T),this.rightPoints.splice(L,0,T)}},f.remove=function(T){var M=this.count-this.leftPoints;if(T[1]<this.mid){if(!this.left)return a;var P=this.right?this.right.count:0;if(4*P>3*(M-1))return h(this,T);var L=this.left.remove(T);return L===c?(this.left=null,this.count-=1,u):(L===u&&(this.count-=1),L)}else if(T[0]>this.mid){if(!this.right)return a;var I=this.left?this.left.count:0;if(4*I>3*(M-1))return h(this,T);var L=this.right.remove(T);return L===c?(this.right=null,this.count-=1,u):(L===u&&(this.count-=1),L)}else{if(this.count===1)return this.leftPoints[0]===T?c:a;if(this.leftPoints.length===1&&this.leftPoints[0]===T){if(this.left&&this.right){for(var E=this,k=this.left;k.right;)E=k,k=k.right;if(E===this)k.right=this.right;else{var C=this.left,L=this.right;E.count-=k.count,E.right=k.left,k.left=C,k.right=L}n(this,k),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?n(this,this.left):n(this,this.right);return u}for(var C=r.ge(this.leftPoints,T,g);C<this.leftPoints.length&&this.leftPoints[C][0]===T[0];++C)if(this.leftPoints[C]===T){this.count-=1,this.leftPoints.splice(C,1);for(var L=r.ge(this.rightPoints,T,b);L<this.rightPoints.length&&this.rightPoints[L][1]===T[1];++L)if(this.rightPoints[L]===T)return this.rightPoints.splice(L,1),u}return a}};function i(T,M,P){for(var L=0;L<T.length&&T[L][0]<=M;++L){var I=P(T[L]);if(I)return I}}function s(T,M,P){for(var L=T.length-1;L>=0&&T[L][1]>=M;--L){var I=P(T[L]);if(I)return I}}function p(T,M){for(var P=0;P<T.length;++P){var L=M(T[P]);if(L)return L}}f.queryPoint=function(T,M){if(T<this.mid){if(this.left){var P=this.left.queryPoint(T,M);if(P)return P}return i(this.leftPoints,T,M)}else if(T>this.mid){if(this.right){var P=this.right.queryPoint(T,M);if(P)return P}return s(this.rightPoints,T,M)}else return p(this.leftPoints,M)},f.queryInterval=function(T,M,P){if(T<this.mid&&this.left){var L=this.left.queryInterval(T,M,P);if(L)return L}if(M>this.mid&&this.right){var L=this.right.queryInterval(T,M,P);if(L)return L}return M<this.mid?i(this.leftPoints,M,P):T>this.mid?s(this.rightPoints,T,P):p(this.leftPoints,P)};function d(T,M){return T-M}function g(T,M){var P=T[0]-M[0];return P||T[1]-M[1]}function b(T,M){var P=T[1]-M[1];return P||T[0]-M[0]}function m(T){if(T.length===0)return null;for(var M=[],P=0;P<T.length;++P)M.push(T[P][0],T[P][1]);M.sort(d);for(var L=M[M.length>>1],I=[],E=[],k=[],P=0;P<T.length;++P){var C=T[P];C[1]<L?I.push(C):L<C[0]?E.push(C):k.push(C)}var D=k,F=k.slice();return D.sort(g),F.sort(b),new t(L,m(I),m(E),D,F)}function x(T){this.root=T}var w=x.prototype;w.insert=function(T){this.root?this.root.insert(T):this.root=new t(T[0],null,null,[T],[T])},w.remove=function(T){if(this.root){var M=this.root.remove(T);return M===c&&(this.root=null),M!==a}return!1},w.queryPoint=function(T,M){if(this.root)return this.root.queryPoint(T,M)},w.queryInterval=function(T,M,P){if(T<=M&&this.root)return this.root.queryInterval(T,M,P)},Object.defineProperty(w,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(w,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function y(T){return!T||T.length===0?new x(null):new x(m(T))}},{"binary-search-bounds":461}],461:[function(e,v,S){arguments[4][243][0].apply(S,arguments)},{dup:243}],462:[function(e,v,S){function r(a,u){u=u||new Array(a.length);for(var c=0;c<a.length;++c)u[a[c]]=c;return u}v.exports=r},{}],463:[function(e,v,S){function r(a){for(var u=new Array(a),c=0;c<a;++c)u[c]=c;return u}v.exports=r},{}],464:[function(e,v,S){v.exports=!0},{}],465:[function(e,v,S){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */v.exports=function(u){return u!=null&&(r(u)||a(u)||!!u._isBuffer)};function r(u){return!!u.constructor&&typeof u.constructor.isBuffer=="function"&&u.constructor.isBuffer(u)}function a(u){return typeof u.readFloatLE=="function"&&typeof u.slice=="function"&&r(u.slice(0,0))}},{}],466:[function(e,v,S){v.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],467:[function(e,v,S){v.exports=u,v.exports.isMobile=u,v.exports.default=u;var r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function u(c){c||(c={});var t=c.ua;if(!t&&typeof navigator<"u"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;var f=c.tablet?a.test(t):r.test(t);return!f&&c.tablet&&c.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(f=!0),f}},{}],468:[function(e,v,S){v.exports=function(r){var a=typeof r;return r!==null&&(a==="object"||a==="function")}},{}],469:[function(e,v,S){var r=Object.prototype.toString;v.exports=function(a){var u;return r.call(a)==="[object Object]"&&(u=Object.getPrototypeOf(a),u===null||u===Object.getPrototypeOf({}))}},{}],470:[function(e,v,S){v.exports=function(r){for(var a=r.length,u,c=0;c<a;c++)if(u=r.charCodeAt(c),(u<9||u>13)&&u!==32&&u!==133&&u!==160&&u!==5760&&u!==6158&&(u<8192||u>8205)&&u!==8232&&u!==8233&&u!==8239&&u!==8287&&u!==8288&&u!==12288&&u!==65279)return!1;return!0}},{}],471:[function(e,v,S){v.exports=function(a){return typeof a!="string"?!1:(a=a.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(a)&&/[\dz]$/i.test(a)&&a.length>4))}},{}],472:[function(e,v,S){function r(a,u,c){return a*(1-c)+u*c}v.exports=r},{}],473:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?v.exports=a():(r=r||self,r.mapboxgl=a())})(this,function(){var r,a,u;function c(t,f){if(!r)r=f;else if(!a)a=f;else{var n="var sharedChunk = {}; ("+r+")(sharedChunk); ("+a+")(sharedChunk);",o={};r(o),u=f(o),u.workerUrl=window.URL.createObjectURL(new Blob([n],{type:"text/javascript"}))}}return c(["exports"],function(t){function f(_,O){return _(O={exports:{}},O.exports),O.exports}var n=o;function o(_,O,Z,ce){this.cx=3*_,this.bx=3*(Z-_)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*O,this.by=3*(ce-O)-this.cy,this.ay=1-this.cy-this.by,this.p1x=_,this.p1y=ce,this.p2x=Z,this.p2y=ce}o.prototype.sampleCurveX=function(_){return((this.ax*_+this.bx)*_+this.cx)*_},o.prototype.sampleCurveY=function(_){return((this.ay*_+this.by)*_+this.cy)*_},o.prototype.sampleCurveDerivativeX=function(_){return(3*this.ax*_+2*this.bx)*_+this.cx},o.prototype.solveCurveX=function(_,O){var Z,ce,xe,we,De;for(O===void 0&&(O=1e-6),xe=_,De=0;De<8;De++){if(we=this.sampleCurveX(xe)-_,Math.abs(we)<O)return xe;var Ze=this.sampleCurveDerivativeX(xe);if(Math.abs(Ze)<1e-6)break;xe-=we/Ze}if((xe=_)<(Z=0))return Z;if(xe>(ce=1))return ce;for(;Z<ce;){if(we=this.sampleCurveX(xe),Math.abs(we-_)<O)return xe;_>we?Z=xe:ce=xe,xe=.5*(ce-Z)+Z}return xe},o.prototype.solve=function(_,O){return this.sampleCurveY(this.solveCurveX(_,O))};var l=h;function h(_,O){this.x=_,this.y=O}function i(_,O,Z,ce){var xe=new n(_,O,Z,ce);return function(we){return xe.solve(we)}}h.prototype={clone:function(){return new h(this.x,this.y)},add:function(_){return this.clone()._add(_)},sub:function(_){return this.clone()._sub(_)},multByPoint:function(_){return this.clone()._multByPoint(_)},divByPoint:function(_){return this.clone()._divByPoint(_)},mult:function(_){return this.clone()._mult(_)},div:function(_){return this.clone()._div(_)},rotate:function(_){return this.clone()._rotate(_)},rotateAround:function(_,O){return this.clone()._rotateAround(_,O)},matMult:function(_){return this.clone()._matMult(_)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(_){return this.x===_.x&&this.y===_.y},dist:function(_){return Math.sqrt(this.distSqr(_))},distSqr:function(_){var O=_.x-this.x,Z=_.y-this.y;return O*O+Z*Z},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(_){return Math.atan2(this.y-_.y,this.x-_.x)},angleWith:function(_){return this.angleWithSep(_.x,_.y)},angleWithSep:function(_,O){return Math.atan2(this.x*O-this.y*_,this.x*_+this.y*O)},_matMult:function(_){var O=_[2]*this.x+_[3]*this.y;return this.x=_[0]*this.x+_[1]*this.y,this.y=O,this},_add:function(_){return this.x+=_.x,this.y+=_.y,this},_sub:function(_){return this.x-=_.x,this.y-=_.y,this},_mult:function(_){return this.x*=_,this.y*=_,this},_div:function(_){return this.x/=_,this.y/=_,this},_multByPoint:function(_){return this.x*=_.x,this.y*=_.y,this},_divByPoint:function(_){return this.x/=_.x,this.y/=_.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var _=this.y;return this.y=this.x,this.x=-_,this},_rotate:function(_){var O=Math.cos(_),Z=Math.sin(_),ce=Z*this.x+O*this.y;return this.x=O*this.x-Z*this.y,this.y=ce,this},_rotateAround:function(_,O){var Z=Math.cos(_),ce=Math.sin(_),xe=O.y+ce*(this.x-O.x)+Z*(this.y-O.y);return this.x=O.x+Z*(this.x-O.x)-ce*(this.y-O.y),this.y=xe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(_){return _ instanceof h?_:Array.isArray(_)?new h(_[0],_[1]):_};var s=i(.25,.1,.25,1);function p(_,O,Z){return Math.min(Z,Math.max(O,_))}function d(_,O,Z){var ce=Z-O,xe=((_-O)%ce+ce)%ce+O;return xe===O?Z:xe}function g(_){for(var O=[],Z=arguments.length-1;Z-- >0;)O[Z]=arguments[Z+1];for(var ce=0,xe=O;ce<xe.length;ce+=1){var we=xe[ce];for(var De in we)_[De]=we[De]}return _}var b=1;function m(){return b++}function x(){return function _(O){return O?(O^16*Math.random()>>O/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,_)}()}function w(_){return!!_&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(_)}function y(_,O){_.forEach(function(Z){O[Z]&&(O[Z]=O[Z].bind(O))})}function T(_,O){return _.indexOf(O,_.length-O.length)!==-1}function M(_,O,Z){var ce={};for(var xe in _)ce[xe]=O.call(Z||this,_[xe],xe,_);return ce}function P(_,O,Z){var ce={};for(var xe in _)O.call(Z||this,_[xe],xe,_)&&(ce[xe]=_[xe]);return ce}function L(_){return Array.isArray(_)?_.map(L):typeof _=="object"&&_?M(_,L):_}var I={};function E(_){I[_]||(typeof console<"u"&&console.warn(_),I[_]=!0)}function k(_,O,Z){return(Z.y-_.y)*(O.x-_.x)>(O.y-_.y)*(Z.x-_.x)}function C(_){for(var O=0,Z=0,ce=_.length,xe=ce-1,we=void 0,De=void 0;Z<ce;xe=Z++)O+=((De=_[xe]).x-(we=_[Z]).x)*(we.y+De.y);return O}function D(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function F(_){var O={};if(_.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ce,xe,we,De){var Ze=we||De;return O[xe]=!Ze||Ze.toLowerCase(),""}),O["max-age"]){var Z=parseInt(O["max-age"],10);isNaN(Z)?delete O["max-age"]:O["max-age"]=Z}return O}var N=null;function G(_){if(N==null){var O=_.navigator?_.navigator.userAgent:null;N=!!_.safari||!(!O||!(/\b(iPad|iPhone|iPod)\b/.test(O)||O.match("Safari")&&!O.match("Chrome")))}return N}function U(_){try{var O=self[_];return O.setItem("_mapbox_test_",1),O.removeItem("_mapbox_test_"),!0}catch{return!1}}var X,z,B,j,V=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),K=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,te=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,$={now:V,frame:function(_){var O=K(_);return{cancel:function(){return te(O)}}},getImageData:function(_,O){O===void 0&&(O=0);var Z=self.document.createElement("canvas"),ce=Z.getContext("2d");if(!ce)throw new Error("failed to create canvas 2d context");return Z.width=_.width,Z.height=_.height,ce.drawImage(_,0,0,_.width,_.height),ce.getImageData(-O,-O,_.width+2*O,_.height+2*O)},resolveURL:function(_){return X||(X=self.document.createElement("a")),X.href=_,X.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(z==null&&(z=self.matchMedia("(prefers-reduced-motion: reduce)")),z.matches)}},ie={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},se={supported:!1,testSupport:function(_){!Q&&j&&(H?oe(_):B=_)}},Q=!1,H=!1;function oe(_){var O=_.createTexture();_.bindTexture(_.TEXTURE_2D,O);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,j),_.isContextLost())return;se.supported=!0}catch{}_.deleteTexture(O),Q=!0}self.document&&((j=self.document.createElement("img")).onload=function(){B&&oe(B),B=null,H=!0},j.onerror=function(){Q=!0,B=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var re="01",ee=function(_,O){this._transformRequestFn=_,this._customAccessToken=O,this._createSkuToken()};function ae(_){return _.indexOf("mapbox:")===0}ee.prototype._createSkuToken=function(){var _=function(){for(var O="",Z=0;Z<10;Z++)O+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",re,O].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=_.token,this._skuTokenExpiresAt=_.tokenExpiresAt},ee.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ee.prototype.transformRequest=function(_,O){return this._transformRequestFn&&this._transformRequestFn(_,O)||{url:_}},ee.prototype.normalizeStyleURL=function(_,O){if(!ae(_))return _;var Z=W(_);return Z.path="/styles/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||O)},ee.prototype.normalizeGlyphsURL=function(_,O){if(!ae(_))return _;var Z=W(_);return Z.path="/fonts/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||O)},ee.prototype.normalizeSourceURL=function(_,O){if(!ae(_))return _;var Z=W(_);return Z.path="/v4/"+Z.authority+".json",Z.params.push("secure"),this._makeAPIURL(Z,this._customAccessToken||O)},ee.prototype.normalizeSpriteURL=function(_,O,Z,ce){var xe=W(_);return ae(_)?(xe.path="/styles/v1"+xe.path+"/sprite"+O+Z,this._makeAPIURL(xe,this._customAccessToken||ce)):(xe.path+=""+O+Z,ue(xe))},ee.prototype.normalizeTileURL=function(_,O){if(this._isSkuTokenExpired()&&this._createSkuToken(),_&&!ae(_))return _;var Z=W(_);Z.path=Z.path.replace(/(\.(png|jpg)\d*)(?=$)/,($.devicePixelRatio>=2||O===512?"@2x":"")+(se.supported?".webp":"$1")),Z.path=Z.path.replace(/^.+\/v4\//,"/"),Z.path="/v4"+Z.path;var ce=this._customAccessToken||function(xe){for(var we=0,De=xe;we<De.length;we+=1){var Ze=De[we].match(/^access_token=(.*)$/);if(Ze)return Ze[1]}return null}(Z.params)||ie.ACCESS_TOKEN;return ie.REQUIRE_ACCESS_TOKEN&&ce&&this._skuToken&&Z.params.push("sku="+this._skuToken),this._makeAPIURL(Z,ce)},ee.prototype.canonicalizeTileURL=function(_,O){var Z=W(_);if(!Z.path.match(/(^\/v4\/)/)||!Z.path.match(/\.[\w]+$/))return _;var ce="mapbox://tiles/";ce+=Z.path.replace("/v4/","");var xe=Z.params;return O&&(xe=xe.filter(function(we){return!we.match(/^access_token=/)})),xe.length&&(ce+="?"+xe.join("&")),ce},ee.prototype.canonicalizeTileset=function(_,O){for(var Z=!!O&&ae(O),ce=[],xe=0,we=_.tiles||[];xe<we.length;xe+=1){var De=we[xe];de(De)?ce.push(this.canonicalizeTileURL(De,Z)):ce.push(De)}return ce},ee.prototype._makeAPIURL=function(_,O){var Z="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ce=W(ie.API_URL);if(_.protocol=ce.protocol,_.authority=ce.authority,ce.path!=="/"&&(_.path=""+ce.path+_.path),!ie.REQUIRE_ACCESS_TOKEN)return ue(_);if(!(O=O||ie.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Z);if(O[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Z);return _.params=_.params.filter(function(xe){return xe.indexOf("access_token")===-1}),_.params.push("access_token="+O),ue(_)};var fe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function de(_){return fe.test(_)}var pe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function W(_){var O=_.match(pe);if(!O)throw new Error("Unable to parse URL object");return{protocol:O[1],authority:O[2],path:O[3]||"/",params:O[4]?O[4].split("&"):[]}}function ue(_){var O=_.params.length?"?"+_.params.join("&"):"";return _.protocol+"://"+_.authority+_.path+O}function me(_){if(!_)return null;var O=_.split(".");if(!O||O.length!==3)return null;try{return JSON.parse(decodeURIComponent(self.atob(O[1]).split("").map(function(Z){return"%"+("00"+Z.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var be=function(_){this.type=_,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};be.prototype.getStorageKey=function(_){var O,Z=me(ie.ACCESS_TOKEN);return O=Z&&Z.u?self.btoa(encodeURIComponent(Z.u).replace(/%([0-9A-F]{2})/g,function(ce,xe){return String.fromCharCode(Number("0x"+xe))})):ie.ACCESS_TOKEN||"",_?"mapbox.eventData."+_+":"+O:"mapbox.eventData:"+O},be.prototype.fetchEventData=function(){var _=U("localStorage"),O=this.getStorageKey(),Z=this.getStorageKey("uuid");if(_)try{var ce=self.localStorage.getItem(O);ce&&(this.eventData=JSON.parse(ce));var xe=self.localStorage.getItem(Z);xe&&(this.anonId=xe)}catch{E("Unable to read from LocalStorage")}},be.prototype.saveEventData=function(){var _=U("localStorage"),O=this.getStorageKey(),Z=this.getStorageKey("uuid");if(_)try{self.localStorage.setItem(Z,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(O,JSON.stringify(this.eventData))}catch{E("Unable to write to LocalStorage")}},be.prototype.processRequests=function(_){},be.prototype.postEvent=function(_,O,Z,ce){var xe=this;if(ie.EVENTS_URL){var we=W(ie.EVENTS_URL);we.params.push("access_token="+(ce||ie.ACCESS_TOKEN||""));var De={event:this.type,created:new Date(_).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:re,userId:this.anonId},Ze=O?g(De,O):De,pt={url:ue(we),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ze])};this.pendingRequest=Ct(pt,function(St){xe.pendingRequest=null,Z(St),xe.saveEventData(),xe.processRequests(ce)})}},be.prototype.queueRequest=function(_,O){this.queue.push(_),this.processRequests(O)};var Me,Pe,Ge=function(_){function O(){_.call(this,"map.load"),this.success={},this.skuToken=""}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.postMapLoadEvent=function(Z,ce,xe,we){this.skuToken=xe,(ie.EVENTS_URL&&we||ie.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(De){return ae(De)||de(De)}))&&this.queueRequest({id:ce,timestamp:Date.now()},we)},O.prototype.processRequests=function(Z){var ce=this;if(!this.pendingRequest&&this.queue.length!==0){var xe=this.queue.shift(),we=xe.id,De=xe.timestamp;we&&this.success[we]||(this.anonId||this.fetchEventData(),w(this.anonId)||(this.anonId=x()),this.postEvent(De,{skuToken:this.skuToken},function(Ze){Ze||we&&(ce.success[we]=!0)},Z))}},O}(be),ze=new(function(_){function O(Z){_.call(this,"appUserTurnstile"),this._customAccessToken=Z}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.postTurnstileEvent=function(Z,ce){ie.EVENTS_URL&&ie.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(xe){return ae(xe)||de(xe)})&&this.queueRequest(Date.now(),ce)},O.prototype.processRequests=function(Z){var ce=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var xe=me(ie.ACCESS_TOKEN),we=xe?xe.u:ie.ACCESS_TOKEN,De=we!==this.eventData.tokenU;w(this.anonId)||(this.anonId=x(),De=!0);var Ze=this.queue.shift();if(this.eventData.lastSuccess){var pt=new Date(this.eventData.lastSuccess),St=new Date(Ze),Ot=(Ze-this.eventData.lastSuccess)/864e5;De=De||Ot>=1||Ot<-1||pt.getDate()!==St.getDate()}else De=!0;if(!De)return this.processRequests();this.postEvent(Ze,{"enabled.telemetry":!1},function(Ht){Ht||(ce.eventData.lastSuccess=Ze,ce.eventData.tokenU=we)},Z)}},O}(be)),Qe=ze.postTurnstileEvent.bind(ze),tt=new Ge,Ce=tt.postMapLoadEvent.bind(tt),Ae=500,Be=50;function qe(){self.caches&&!Me&&(Me=self.caches.open("mapbox-tiles"))}function Tt(_){var O=_.indexOf("?");return O<0?_:_.slice(0,O)}var At,Ne=1/0;function ct(){return At==null&&(At=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),At}var Mt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Mt);var Wt=function(_){function O(Z,ce,xe){ce===401&&de(xe)&&(Z+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),_.call(this,Z),this.status=ce,this.url=xe,this.name=this.constructor.name,this.message=Z}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},O}(Error),qt=D()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},zt,$t,rr=function(_,O){if(!(/^file:/.test(Z=_.url)||/^file:/.test(qt())&&!/^\w+:/.test(Z))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(ce,xe){var we,De=new self.AbortController,Ze=new self.Request(ce.url,{method:ce.method||"GET",body:ce.body,credentials:ce.credentials,headers:ce.headers,referrer:qt(),signal:De.signal}),pt=!1,St=!1,Ot=(we=Ze.url).indexOf("sku=")>0&&de(we);ce.type==="json"&&Ze.headers.set("Accept","application/json");var Ht=function(lr,Mr,Er){if(!St){if(lr&&lr.message!=="SecurityError"&&E(lr),Mr&&Er)return Qt(Mr);var Kr=Date.now();self.fetch(Ze).then(function(Br){if(Br.ok){var sn=Ot?Br.clone():null;return Qt(Br,sn,Kr)}return xe(new Wt(Br.statusText,Br.status,ce.url))}).catch(function(Br){Br.code!==20&&xe(new Error(Br.message))})}},Qt=function(lr,Mr,Er){(ce.type==="arrayBuffer"?lr.arrayBuffer():ce.type==="json"?lr.json():lr.text()).then(function(Kr){St||(Mr&&Er&&function(Br,sn,vn){if(qe(),Me){var Rn={status:sn.status,statusText:sn.statusText,headers:new self.Headers};sn.headers.forEach(function(Zn,xa){return Rn.headers.set(xa,Zn)});var zn=F(sn.headers.get("Cache-Control")||"");zn["no-store"]||(zn["max-age"]&&Rn.headers.set("Expires",new Date(vn+1e3*zn["max-age"]).toUTCString()),new Date(Rn.headers.get("Expires")).getTime()-vn<42e4||function(Zn,xa){if(Pe===void 0)try{new Response(new ReadableStream),Pe=!0}catch{Pe=!1}Pe?xa(Zn.body):Zn.blob().then(xa)}(sn,function(Zn){var xa=new self.Response(Zn,Rn);qe(),Me&&Me.then(function(La){return La.put(Tt(Br.url),xa)}).catch(function(La){return E(La.message)})}))}}(Ze,Mr,Er),pt=!0,xe(null,Kr,lr.headers.get("Cache-Control"),lr.headers.get("Expires")))}).catch(function(Kr){St||xe(new Error(Kr.message))})};return Ot?function(lr,Mr){if(qe(),!Me)return Mr(null);var Er=Tt(lr.url);Me.then(function(Kr){Kr.match(Er).then(function(Br){var sn=function(vn){if(!vn)return!1;var Rn=new Date(vn.headers.get("Expires")||0),zn=F(vn.headers.get("Cache-Control")||"");return Rn>Date.now()&&!zn["no-cache"]}(Br);Kr.delete(Er),sn&&Kr.put(Er,Br.clone()),Mr(null,Br,sn)}).catch(Mr)}).catch(Mr)}(Ze,Ht):Ht(null,null),{cancel:function(){St=!0,pt||De.abort()}}}(_,O);if(D()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",_,O,void 0,!0)}var Z;return function(ce,xe){var we=new self.XMLHttpRequest;for(var De in we.open(ce.method||"GET",ce.url,!0),ce.type==="arrayBuffer"&&(we.responseType="arraybuffer"),ce.headers)we.setRequestHeader(De,ce.headers[De]);return ce.type==="json"&&(we.responseType="text",we.setRequestHeader("Accept","application/json")),we.withCredentials=ce.credentials==="include",we.onerror=function(){xe(new Error(we.statusText))},we.onload=function(){if((we.status>=200&&we.status<300||we.status===0)&&we.response!==null){var Ze=we.response;if(ce.type==="json")try{Ze=JSON.parse(we.response)}catch(pt){return xe(pt)}xe(null,Ze,we.getResponseHeader("Cache-Control"),we.getResponseHeader("Expires"))}else xe(new Wt(we.statusText,we.status,ce.url))},we.send(ce.body),{cancel:function(){return we.abort()}}}(_,O)},Lt=function(_,O){return rr(g(_,{type:"arrayBuffer"}),O)},Ct=function(_,O){return rr(g(_,{method:"POST"}),O)};zt=[],$t=0;var dt=function(_,O){if(se.supported&&(_.headers||(_.headers={}),_.headers.accept="image/webp,*/*"),$t>=ie.MAX_PARALLEL_IMAGE_REQUESTS){var Z={requestParameters:_,callback:O,cancelled:!1,cancel:function(){this.cancelled=!0}};return zt.push(Z),Z}$t++;var ce=!1,xe=function(){if(!ce)for(ce=!0,$t--;zt.length&&$t<ie.MAX_PARALLEL_IMAGE_REQUESTS;){var De=zt.shift();De.cancelled||(De.cancel=dt(De.requestParameters,De.callback).cancel)}},we=Lt(_,function(De,Ze,pt,St){xe(),De?O(De):Ze&&(ct()?function(Ot,Ht){var Qt=new self.Blob([new Uint8Array(Ot)],{type:"image/png"});self.createImageBitmap(Qt).then(function(lr){Ht(null,lr)}).catch(function(lr){Ht(new Error("Could not load image because of "+lr.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Ze,O):function(Ot,Ht,Qt,lr){var Mr=new self.Image,Er=self.URL;Mr.onload=function(){Ht(null,Mr),Er.revokeObjectURL(Mr.src)},Mr.onerror=function(){return Ht(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Kr=new self.Blob([new Uint8Array(Ot)],{type:"image/png"});Mr.cacheControl=Qt,Mr.expires=lr,Mr.src=Ot.byteLength?Er.createObjectURL(Kr):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ze,O,pt,St))});return{cancel:function(){we.cancel(),xe()}}};function lt(_,O,Z){Z[_]&&Z[_].indexOf(O)!==-1||(Z[_]=Z[_]||[],Z[_].push(O))}function Te(_,O,Z){if(Z&&Z[_]){var ce=Z[_].indexOf(O);ce!==-1&&Z[_].splice(ce,1)}}var Le=function(_,O){O===void 0&&(O={}),g(this,O),this.type=_},Ue=function(_){function O(Z,ce){ce===void 0&&(ce={}),_.call(this,"error",g({error:Z},ce))}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O}(Le),et=function(){};et.prototype.on=function(_,O){return this._listeners=this._listeners||{},lt(_,O,this._listeners),this},et.prototype.off=function(_,O){return Te(_,O,this._listeners),Te(_,O,this._oneTimeListeners),this},et.prototype.once=function(_,O){return this._oneTimeListeners=this._oneTimeListeners||{},lt(_,O,this._oneTimeListeners),this},et.prototype.fire=function(_,O){typeof _=="string"&&(_=new Le(_,O||{}));var Z=_.type;if(this.listens(Z)){_.target=this;for(var ce=0,xe=this._listeners&&this._listeners[Z]?this._listeners[Z].slice():[];ce<xe.length;ce+=1)xe[ce].call(this,_);for(var we=0,De=this._oneTimeListeners&&this._oneTimeListeners[Z]?this._oneTimeListeners[Z].slice():[];we<De.length;we+=1){var Ze=De[we];Te(Z,Ze,this._oneTimeListeners),Ze.call(this,_)}var pt=this._eventedParent;pt&&(g(_,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),pt.fire(_))}else _ instanceof Ue&&console.error(_.error);return this},et.prototype.listens=function(_){return this._listeners&&this._listeners[_]&&this._listeners[_].length>0||this._oneTimeListeners&&this._oneTimeListeners[_]&&this._oneTimeListeners[_].length>0||this._eventedParent&&this._eventedParent.listens(_)},et.prototype.setEventedParent=function(_,O){return this._eventedParent=_,this._eventedParentData=O,this};var ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ie=function(_,O,Z,ce){this.message=(_?_+": ":"")+Z,ce&&(this.identifier=ce),O!=null&&O.__line__&&(this.line=O.__line__)};function He(_){var O=_.value;return O?[new Ie(_.key,O,"constants have been deprecated as of v8")]:[]}function Ye(_){for(var O=[],Z=arguments.length-1;Z-- >0;)O[Z]=arguments[Z+1];for(var ce=0,xe=O;ce<xe.length;ce+=1){var we=xe[ce];for(var De in we)_[De]=we[De]}return _}function ft(_){return _ instanceof Number||_ instanceof String||_ instanceof Boolean?_.valueOf():_}function it(_){if(Array.isArray(_))return _.map(it);if(_ instanceof Object&&!(_ instanceof Number||_ instanceof String||_ instanceof Boolean)){var O={};for(var Z in _)O[Z]=it(_[Z]);return O}return ft(_)}var je=function(_){function O(Z,ce){_.call(this,ce),this.message=ce,this.key=Z}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O}(Error),ot=function(_,O){O===void 0&&(O=[]),this.parent=_,this.bindings={};for(var Z=0,ce=O;Z<ce.length;Z+=1){var xe=ce[Z];this.bindings[xe[0]]=xe[1]}};ot.prototype.concat=function(_){return new ot(this,_)},ot.prototype.get=function(_){if(this.bindings[_])return this.bindings[_];if(this.parent)return this.parent.get(_);throw new Error(_+" not found in scope.")},ot.prototype.has=function(_){return!!this.bindings[_]||!!this.parent&&this.parent.has(_)};var Je={kind:"null"},st={kind:"number"},It={kind:"string"},Nt={kind:"boolean"},nr={kind:"color"},We={kind:"object"},Fe={kind:"value"},bt={kind:"collator"},kt={kind:"formatted"},_t={kind:"resolvedImage"};function Rt(_,O){return{kind:"array",itemType:_,N:O}}function Dt(_){if(_.kind==="array"){var O=Dt(_.itemType);return typeof _.N=="number"?"array<"+O+", "+_.N+">":_.itemType.kind==="value"?"array":"array<"+O+">"}return _.kind}var Ut=[Je,st,It,Nt,nr,kt,We,Rt(Fe),_t];function Bt(_,O){if(O.kind==="error")return null;if(_.kind==="array"){if(O.kind==="array"&&(O.N===0&&O.itemType.kind==="value"||!Bt(_.itemType,O.itemType))&&(typeof _.N!="number"||_.N===O.N))return null}else{if(_.kind===O.kind)return null;if(_.kind==="value"){for(var Z=0,ce=Ut;Z<ce.length;Z+=1)if(!Bt(ce[Z],O))return null}}return"Expected "+Dt(_)+" but found "+Dt(O)+" instead."}function tr(_,O){return O.some(function(Z){return Z.kind===_.kind})}function er(_,O){return O.some(function(Z){return Z==="null"?_===null:Z==="array"?Array.isArray(_):Z==="object"?_&&!Array.isArray(_)&&typeof _=="object":Z===typeof _})}var Zt=f(function(_,O){var Z={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ce(Ze){return(Ze=Math.round(Ze))<0?0:Ze>255?255:Ze}function xe(Ze){return ce(Ze[Ze.length-1]==="%"?parseFloat(Ze)/100*255:parseInt(Ze))}function we(Ze){return(pt=Ze[Ze.length-1]==="%"?parseFloat(Ze)/100:parseFloat(Ze))<0?0:pt>1?1:pt;var pt}function De(Ze,pt,St){return St<0?St+=1:St>1&&(St-=1),6*St<1?Ze+(pt-Ze)*St*6:2*St<1?pt:3*St<2?Ze+(pt-Ze)*(2/3-St)*6:Ze}try{O.parseCSSColor=function(Ze){var pt,St=Ze.replace(/ /g,"").toLowerCase();if(St in Z)return Z[St].slice();if(St[0]==="#")return St.length===4?(pt=parseInt(St.substr(1),16))>=0&&pt<=4095?[(3840&pt)>>4|(3840&pt)>>8,240&pt|(240&pt)>>4,15&pt|(15&pt)<<4,1]:null:St.length===7&&(pt=parseInt(St.substr(1),16))>=0&&pt<=16777215?[(16711680&pt)>>16,(65280&pt)>>8,255&pt,1]:null;var Ot=St.indexOf("("),Ht=St.indexOf(")");if(Ot!==-1&&Ht+1===St.length){var Qt=St.substr(0,Ot),lr=St.substr(Ot+1,Ht-(Ot+1)).split(","),Mr=1;switch(Qt){case"rgba":if(lr.length!==4)return null;Mr=we(lr.pop());case"rgb":return lr.length!==3?null:[xe(lr[0]),xe(lr[1]),xe(lr[2]),Mr];case"hsla":if(lr.length!==4)return null;Mr=we(lr.pop());case"hsl":if(lr.length!==3)return null;var Er=(parseFloat(lr[0])%360+360)%360/360,Kr=we(lr[1]),Br=we(lr[2]),sn=Br<=.5?Br*(Kr+1):Br+Kr-Br*Kr,vn=2*Br-sn;return[ce(255*De(vn,sn,Er+1/3)),ce(255*De(vn,sn,Er)),ce(255*De(vn,sn,Er-1/3)),Mr];default:return null}}return null}}catch{}}).parseCSSColor,_r=function(_,O,Z,ce){ce===void 0&&(ce=1),this.r=_,this.g=O,this.b=Z,this.a=ce};_r.parse=function(_){if(_){if(_ instanceof _r)return _;if(typeof _=="string"){var O=Zt(_);if(O)return new _r(O[0]/255*O[3],O[1]/255*O[3],O[2]/255*O[3],O[3])}}},_r.prototype.toString=function(){var _=this.toArray(),O=_[1],Z=_[2],ce=_[3];return"rgba("+Math.round(_[0])+","+Math.round(O)+","+Math.round(Z)+","+ce+")"},_r.prototype.toArray=function(){var _=this.a;return _===0?[0,0,0,0]:[255*this.r/_,255*this.g/_,255*this.b/_,_]},_r.black=new _r(0,0,0,1),_r.white=new _r(1,1,1,1),_r.transparent=new _r(0,0,0,0),_r.red=new _r(1,0,0,1);var Gr=function(_,O,Z){this.sensitivity=_?O?"variant":"case":O?"accent":"base",this.locale=Z,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Gr.prototype.compare=function(_,O){return this.collator.compare(_,O)},Gr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Or=function(_,O,Z,ce,xe){this.text=_,this.image=O,this.scale=Z,this.fontStack=ce,this.textColor=xe},Fr=function(_){this.sections=_};Fr.fromString=function(_){return new Fr([new Or(_,null,null,null,null)])},Fr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(_){return _.text.length!==0||_.image&&_.image.name.length!==0})},Fr.factory=function(_){return _ instanceof Fr?_:Fr.fromString(_)},Fr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(_){return _.text}).join("")},Fr.prototype.serialize=function(){for(var _=["format"],O=0,Z=this.sections;O<Z.length;O+=1){var ce=Z[O];if(ce.image)_.push(["image",ce.image.name]);else{_.push(ce.text);var xe={};ce.fontStack&&(xe["text-font"]=["literal",ce.fontStack.split(",")]),ce.scale&&(xe["font-scale"]=ce.scale),ce.textColor&&(xe["text-color"]=["rgba"].concat(ce.textColor.toArray())),_.push(xe)}}return _};var Mn=function(_){this.name=_.name,this.available=_.available};function Wn(_,O,Z,ce){return typeof _=="number"&&_>=0&&_<=255&&typeof O=="number"&&O>=0&&O<=255&&typeof Z=="number"&&Z>=0&&Z<=255?ce===void 0||typeof ce=="number"&&ce>=0&&ce<=1?null:"Invalid rgba value ["+[_,O,Z,ce].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof ce=="number"?[_,O,Z,ce]:[_,O,Z]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Tn(_){if(_===null||typeof _=="string"||typeof _=="boolean"||typeof _=="number"||_ instanceof _r||_ instanceof Gr||_ instanceof Fr||_ instanceof Mn)return!0;if(Array.isArray(_)){for(var O=0,Z=_;O<Z.length;O+=1)if(!Tn(Z[O]))return!1;return!0}if(typeof _=="object"){for(var ce in _)if(!Tn(_[ce]))return!1;return!0}return!1}function Nn(_){if(_===null)return Je;if(typeof _=="string")return It;if(typeof _=="boolean")return Nt;if(typeof _=="number")return st;if(_ instanceof _r)return nr;if(_ instanceof Gr)return bt;if(_ instanceof Fr)return kt;if(_ instanceof Mn)return _t;if(Array.isArray(_)){for(var O,Z=_.length,ce=0,xe=_;ce<xe.length;ce+=1){var we=Nn(xe[ce]);if(O){if(O===we)continue;O=Fe;break}O=we}return Rt(O||Fe,Z)}return We}function jn(_){var O=typeof _;return _===null?"":O==="string"||O==="number"||O==="boolean"?String(_):_ instanceof _r||_ instanceof Fr||_ instanceof Mn?_.toString():JSON.stringify(_)}Mn.prototype.toString=function(){return this.name},Mn.fromString=function(_){return _?new Mn({name:_,available:!1}):null},Mn.prototype.serialize=function(){return["image",this.name]};var Nr=function(_,O){this.type=_,this.value=O};Nr.parse=function(_,O){if(_.length!==2)return O.error("'literal' expression requires exactly one argument, but found "+(_.length-1)+" instead.");if(!Tn(_[1]))return O.error("invalid value");var Z=_[1],ce=Nn(Z),xe=O.expectedType;return ce.kind!=="array"||ce.N!==0||!xe||xe.kind!=="array"||typeof xe.N=="number"&&xe.N!==0||(ce=xe),new Nr(ce,Z)},Nr.prototype.evaluate=function(){return this.value},Nr.prototype.eachChild=function(){},Nr.prototype.outputDefined=function(){return!0},Nr.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof _r?["rgba"].concat(this.value.toArray()):this.value instanceof Fr?this.value.serialize():this.value};var Pr=function(_){this.name="ExpressionEvaluationError",this.message=_};Pr.prototype.toJSON=function(){return this.message};var Ln={string:It,number:st,boolean:Nt,object:We},pn=function(_,O){this.type=_,this.args=O};pn.parse=function(_,O){if(_.length<2)return O.error("Expected at least one argument.");var Z,ce=1,xe=_[0];if(xe==="array"){var we,De;if(_.length>2){var Ze=_[1];if(typeof Ze!="string"||!(Ze in Ln)||Ze==="object")return O.error('The item type argument of "array" must be one of string, number, boolean',1);we=Ln[Ze],ce++}else we=Fe;if(_.length>3){if(_[2]!==null&&(typeof _[2]!="number"||_[2]<0||_[2]!==Math.floor(_[2])))return O.error('The length argument to "array" must be a positive integer literal',2);De=_[2],ce++}Z=Rt(we,De)}else Z=Ln[xe];for(var pt=[];ce<_.length;ce++){var St=O.parse(_[ce],ce,Fe);if(!St)return null;pt.push(St)}return new pn(Z,pt)},pn.prototype.evaluate=function(_){for(var O=0;O<this.args.length;O++){var Z=this.args[O].evaluate(_);if(!Bt(this.type,Nn(Z)))return Z;if(O===this.args.length-1)throw new Pr("Expected value to be of type "+Dt(this.type)+", but found "+Dt(Nn(Z))+" instead.")}return null},pn.prototype.eachChild=function(_){this.args.forEach(_)},pn.prototype.outputDefined=function(){return this.args.every(function(_){return _.outputDefined()})},pn.prototype.serialize=function(){var _=this.type,O=[_.kind];if(_.kind==="array"){var Z=_.itemType;if(Z.kind==="string"||Z.kind==="number"||Z.kind==="boolean"){O.push(Z.kind);var ce=_.N;(typeof ce=="number"||this.args.length>1)&&O.push(ce)}}return O.concat(this.args.map(function(xe){return xe.serialize()}))};var xn=function(_){this.type=kt,this.sections=_};xn.parse=function(_,O){if(_.length<2)return O.error("Expected at least one argument.");var Z=_[1];if(!Array.isArray(Z)&&typeof Z=="object")return O.error("First argument must be an image or text section.");for(var ce=[],xe=!1,we=1;we<=_.length-1;++we){var De=_[we];if(xe&&typeof De=="object"&&!Array.isArray(De)){xe=!1;var Ze=null;if(De["font-scale"]&&!(Ze=O.parse(De["font-scale"],1,st)))return null;var pt=null;if(De["text-font"]&&!(pt=O.parse(De["text-font"],1,Rt(It))))return null;var St=null;if(De["text-color"]&&!(St=O.parse(De["text-color"],1,nr)))return null;var Ot=ce[ce.length-1];Ot.scale=Ze,Ot.font=pt,Ot.textColor=St}else{var Ht=O.parse(_[we],1,Fe);if(!Ht)return null;var Qt=Ht.type.kind;if(Qt!=="string"&&Qt!=="value"&&Qt!=="null"&&Qt!=="resolvedImage")return O.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");xe=!0,ce.push({content:Ht,scale:null,font:null,textColor:null})}}return new xn(ce)},xn.prototype.evaluate=function(_){return new Fr(this.sections.map(function(O){var Z=O.content.evaluate(_);return Nn(Z)===_t?new Or("",Z,null,null,null):new Or(jn(Z),null,O.scale?O.scale.evaluate(_):null,O.font?O.font.evaluate(_).join(","):null,O.textColor?O.textColor.evaluate(_):null)}))},xn.prototype.eachChild=function(_){for(var O=0,Z=this.sections;O<Z.length;O+=1){var ce=Z[O];_(ce.content),ce.scale&&_(ce.scale),ce.font&&_(ce.font),ce.textColor&&_(ce.textColor)}},xn.prototype.outputDefined=function(){return!1},xn.prototype.serialize=function(){for(var _=["format"],O=0,Z=this.sections;O<Z.length;O+=1){var ce=Z[O];_.push(ce.content.serialize());var xe={};ce.scale&&(xe["font-scale"]=ce.scale.serialize()),ce.font&&(xe["text-font"]=ce.font.serialize()),ce.textColor&&(xe["text-color"]=ce.textColor.serialize()),_.push(xe)}return _};var en=function(_){this.type=_t,this.input=_};en.parse=function(_,O){if(_.length!==2)return O.error("Expected two arguments.");var Z=O.parse(_[1],1,It);return Z?new en(Z):O.error("No image name provided.")},en.prototype.evaluate=function(_){var O=this.input.evaluate(_),Z=Mn.fromString(O);return Z&&_.availableImages&&(Z.available=_.availableImages.indexOf(O)>-1),Z},en.prototype.eachChild=function(_){_(this.input)},en.prototype.outputDefined=function(){return!1},en.prototype.serialize=function(){return["image",this.input.serialize()]};var _n={"to-boolean":Nt,"to-color":nr,"to-number":st,"to-string":It},kn=function(_,O){this.type=_,this.args=O};kn.parse=function(_,O){if(_.length<2)return O.error("Expected at least one argument.");var Z=_[0];if((Z==="to-boolean"||Z==="to-string")&&_.length!==2)return O.error("Expected one argument.");for(var ce=_n[Z],xe=[],we=1;we<_.length;we++){var De=O.parse(_[we],we,Fe);if(!De)return null;xe.push(De)}return new kn(ce,xe)},kn.prototype.evaluate=function(_){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(_));if(this.type.kind==="color"){for(var O,Z,ce=0,xe=this.args;ce<xe.length;ce+=1){if(Z=null,(O=xe[ce].evaluate(_))instanceof _r)return O;if(typeof O=="string"){var we=_.parseColor(O);if(we)return we}else if(Array.isArray(O)&&!(Z=O.length<3||O.length>4?"Invalid rbga value "+JSON.stringify(O)+": expected an array containing either three or four numeric values.":Wn(O[0],O[1],O[2],O[3])))return new _r(O[0]/255,O[1]/255,O[2]/255,O[3])}throw new Pr(Z||"Could not parse color from value '"+(typeof O=="string"?O:String(JSON.stringify(O)))+"'")}if(this.type.kind==="number"){for(var De=null,Ze=0,pt=this.args;Ze<pt.length;Ze+=1){if((De=pt[Ze].evaluate(_))===null)return 0;var St=Number(De);if(!isNaN(St))return St}throw new Pr("Could not convert "+JSON.stringify(De)+" to number.")}return this.type.kind==="formatted"?Fr.fromString(jn(this.args[0].evaluate(_))):this.type.kind==="resolvedImage"?Mn.fromString(jn(this.args[0].evaluate(_))):jn(this.args[0].evaluate(_))},kn.prototype.eachChild=function(_){this.args.forEach(_)},kn.prototype.outputDefined=function(){return this.args.every(function(_){return _.outputDefined()})},kn.prototype.serialize=function(){if(this.type.kind==="formatted")return new xn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new en(this.args[0]).serialize();var _=["to-"+this.type.kind];return this.eachChild(function(O){_.push(O.serialize())}),_};var ln=["Unknown","Point","LineString","Polygon"],vt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};vt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},vt.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?ln[this.feature.type]:this.feature.type:null},vt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},vt.prototype.canonicalID=function(){return this.canonical},vt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},vt.prototype.parseColor=function(_){var O=this._parseColorCache[_];return O||(O=this._parseColorCache[_]=_r.parse(_)),O};var Gt=function(_,O,Z,ce){this.name=_,this.type=O,this._evaluate=Z,this.args=ce};Gt.prototype.evaluate=function(_){return this._evaluate(_,this.args)},Gt.prototype.eachChild=function(_){this.args.forEach(_)},Gt.prototype.outputDefined=function(){return!1},Gt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(_){return _.serialize()}))},Gt.parse=function(_,O){var Z,ce=_[0],xe=Gt.definitions[ce];if(!xe)return O.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0);for(var we=Array.isArray(xe)?xe[0]:xe.type,De=Array.isArray(xe)?[[xe[1],xe[2]]]:xe.overloads,Ze=De.filter(function(ei){var za=ei[0];return!Array.isArray(za)||za.length===_.length-1}),pt=null,St=0,Ot=Ze;St<Ot.length;St+=1){var Ht=Ot[St],Qt=Ht[0],lr=Ht[1];pt=new Ya(O.registry,O.path,null,O.scope);for(var Mr=[],Er=!1,Kr=1;Kr<_.length;Kr++){var Br=_[Kr],sn=Array.isArray(Qt)?Qt[Kr-1]:Qt.type,vn=pt.parse(Br,1+Mr.length,sn);if(!vn){Er=!0;break}Mr.push(vn)}if(!Er)if(Array.isArray(Qt)&&Qt.length!==Mr.length)pt.error("Expected "+Qt.length+" arguments, but found "+Mr.length+" instead.");else{for(var Rn=0;Rn<Mr.length;Rn++){var zn=Array.isArray(Qt)?Qt[Rn]:Qt.type,Zn=Mr[Rn];pt.concat(Rn+1).checkSubtype(zn,Zn.type)}if(pt.errors.length===0)return new Gt(ce,we,lr,Mr)}}if(Ze.length===1)(Z=O.errors).push.apply(Z,pt.errors);else{for(var xa=(Ze.length?Ze:De).map(function(ei){var za;return za=ei[0],Array.isArray(za)?"("+za.map(Dt).join(", ")+")":"("+Dt(za.type)+"...)"}).join(" | "),La=[],Ka=1;Ka<_.length;Ka++){var Ba=O.parse(_[Ka],1+La.length);if(!Ba)return null;La.push(Dt(Ba.type))}O.error("Expected arguments of type "+xa+", but found ("+La.join(", ")+") instead.")}return null},Gt.register=function(_,O){for(var Z in Gt.definitions=O,O)_[Z]=Gt};var fr=function(_,O,Z){this.type=bt,this.locale=Z,this.caseSensitive=_,this.diacriticSensitive=O};function Cr(_,O){_[0]=Math.min(_[0],O[0]),_[1]=Math.min(_[1],O[1]),_[2]=Math.max(_[2],O[0]),_[3]=Math.max(_[3],O[1])}function Wr(_,O){return!(_[0]<=O[0]||_[2]>=O[2]||_[1]<=O[1]||_[3]>=O[3])}function Vr(_,O){var Z=(180+_[0])/360,ce=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+_[1]*Math.PI/360)))/360,xe=Math.pow(2,O.z);return[Math.round(Z*xe*8192),Math.round(ce*xe*8192)]}function Qr(_,O,Z){return O[1]>_[1]!=Z[1]>_[1]&&_[0]<(Z[0]-O[0])*(_[1]-O[1])/(Z[1]-O[1])+O[0]}function Hr(_,O){for(var Z,ce,xe,we,De,Ze,pt,St=!1,Ot=0,Ht=O.length;Ot<Ht;Ot++)for(var Qt=O[Ot],lr=0,Mr=Qt.length;lr<Mr-1;lr++){if((we=(Z=_)[0]-(ce=Qt[lr])[0])*(pt=Z[1]-(xe=Qt[lr+1])[1])-(Ze=Z[0]-xe[0])*(De=Z[1]-ce[1])==0&&we*Ze<=0&&De*pt<=0)return!1;Qr(_,Qt[lr],Qt[lr+1])&&(St=!St)}return St}function En(_,O){for(var Z=0;Z<O.length;Z++)if(Hr(_,O[Z]))return!0;return!1}function ta(_,O,Z,ce){var xe=ce[0]-Z[0],we=ce[1]-Z[1],De=(_[0]-Z[0])*we-xe*(_[1]-Z[1]),Ze=(O[0]-Z[0])*we-xe*(O[1]-Z[1]);return De>0&&Ze<0||De<0&&Ze>0}function ea(_,O,Z){for(var ce=0,xe=Z;ce<xe.length;ce+=1)for(var we=xe[ce],De=0;De<we.length-1;++De)if((Ht=[(Ot=we[De+1])[0]-(St=we[De])[0],Ot[1]-St[1]])[0]*(Qt=[(pt=O)[0]-(Ze=_)[0],pt[1]-Ze[1]])[1]-Ht[1]*Qt[0]!=0&&ta(Ze,pt,St,Ot)&&ta(St,Ot,Ze,pt))return!0;var Ze,pt,St,Ot,Ht,Qt;return!1}function ba(_,O){for(var Z=0;Z<_.length;++Z)if(!Hr(_[Z],O))return!1;for(var ce=0;ce<_.length-1;++ce)if(ea(_[ce],_[ce+1],O))return!1;return!0}function Wa(_,O){for(var Z=0;Z<O.length;Z++)if(ba(_,O[Z]))return!0;return!1}function qa(_,O,Z){for(var ce=[],xe=0;xe<_.length;xe++){for(var we=[],De=0;De<_[xe].length;De++){var Ze=Vr(_[xe][De],Z);Cr(O,Ze),we.push(Ze)}ce.push(we)}return ce}function dr(_,O,Z){for(var ce=[],xe=0;xe<_.length;xe++){var we=qa(_[xe],O,Z);ce.push(we)}return ce}function nn(_,O,Z,ce){if(_[0]<Z[0]||_[0]>Z[2]){var xe=.5*ce,we=_[0]-Z[0]>xe?-ce:Z[0]-_[0]>xe?ce:0;we===0&&(we=_[0]-Z[2]>xe?-ce:Z[2]-_[0]>xe?ce:0),_[0]+=we}Cr(O,_)}function Jr(_,O,Z,ce){for(var xe=8192*Math.pow(2,ce.z),we=[8192*ce.x,8192*ce.y],De=[],Ze=0,pt=_;Ze<pt.length;Ze+=1)for(var St=0,Ot=pt[Ze];St<Ot.length;St+=1){var Ht=Ot[St],Qt=[Ht.x+we[0],Ht.y+we[1]];nn(Qt,O,Z,xe),De.push(Qt)}return De}function Pn(_,O,Z,ce){for(var xe,we=8192*Math.pow(2,ce.z),De=[8192*ce.x,8192*ce.y],Ze=[],pt=0,St=_;pt<St.length;pt+=1){for(var Ot=[],Ht=0,Qt=St[pt];Ht<Qt.length;Ht+=1){var lr=Qt[Ht],Mr=[lr.x+De[0],lr.y+De[1]];Cr(O,Mr),Ot.push(Mr)}Ze.push(Ot)}if(O[2]-O[0]<=we/2){(xe=O)[0]=xe[1]=1/0,xe[2]=xe[3]=-1/0;for(var Er=0,Kr=Ze;Er<Kr.length;Er+=1)for(var Br=0,sn=Kr[Er];Br<sn.length;Br+=1)nn(sn[Br],O,Z,we)}return Ze}fr.parse=function(_,O){if(_.length!==2)return O.error("Expected one argument.");var Z=_[1];if(typeof Z!="object"||Array.isArray(Z))return O.error("Collator options argument must be an object.");var ce=O.parse(Z["case-sensitive"]!==void 0&&Z["case-sensitive"],1,Nt);if(!ce)return null;var xe=O.parse(Z["diacritic-sensitive"]!==void 0&&Z["diacritic-sensitive"],1,Nt);if(!xe)return null;var we=null;return Z.locale&&!(we=O.parse(Z.locale,1,It))?null:new fr(ce,xe,we)},fr.prototype.evaluate=function(_){return new Gr(this.caseSensitive.evaluate(_),this.diacriticSensitive.evaluate(_),this.locale?this.locale.evaluate(_):null)},fr.prototype.eachChild=function(_){_(this.caseSensitive),_(this.diacriticSensitive),this.locale&&_(this.locale)},fr.prototype.outputDefined=function(){return!1},fr.prototype.serialize=function(){var _={};return _["case-sensitive"]=this.caseSensitive.serialize(),_["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(_.locale=this.locale.serialize()),["collator",_]};var Gn=function(_,O){this.type=Nt,this.geojson=_,this.geometries=O};function ka(_){if(_ instanceof Gt&&(_.name==="get"&&_.args.length===1||_.name==="feature-state"||_.name==="has"&&_.args.length===1||_.name==="properties"||_.name==="geometry-type"||_.name==="id"||/^filter-/.test(_.name))||_ instanceof Gn)return!1;var O=!0;return _.eachChild(function(Z){O&&!ka(Z)&&(O=!1)}),O}function ca(_){if(_ instanceof Gt&&_.name==="feature-state")return!1;var O=!0;return _.eachChild(function(Z){O&&!ca(Z)&&(O=!1)}),O}function Ta(_,O){if(_ instanceof Gt&&O.indexOf(_.name)>=0)return!1;var Z=!0;return _.eachChild(function(ce){Z&&!Ta(ce,O)&&(Z=!1)}),Z}Gn.parse=function(_,O){if(_.length!==2)return O.error("'within' expression requires exactly one argument, but found "+(_.length-1)+" instead.");if(Tn(_[1])){var Z=_[1];if(Z.type==="FeatureCollection")for(var ce=0;ce<Z.features.length;++ce){var xe=Z.features[ce].geometry.type;if(xe==="Polygon"||xe==="MultiPolygon")return new Gn(Z,Z.features[ce].geometry)}else if(Z.type==="Feature"){var we=Z.geometry.type;if(we==="Polygon"||we==="MultiPolygon")return new Gn(Z,Z.geometry)}else if(Z.type==="Polygon"||Z.type==="MultiPolygon")return new Gn(Z,Z)}return O.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Gn.prototype.evaluate=function(_){if(_.geometry()!=null&&_.canonicalID()!=null){if(_.geometryType()==="Point")return function(O,Z){var ce=[1/0,1/0,-1/0,-1/0],xe=[1/0,1/0,-1/0,-1/0],we=O.canonicalID();if(Z.type==="Polygon"){var De=qa(Z.coordinates,xe,we),Ze=Jr(O.geometry(),ce,xe,we);if(!Wr(ce,xe))return!1;for(var pt=0,St=Ze;pt<St.length;pt+=1)if(!Hr(St[pt],De))return!1}if(Z.type==="MultiPolygon"){var Ot=dr(Z.coordinates,xe,we),Ht=Jr(O.geometry(),ce,xe,we);if(!Wr(ce,xe))return!1;for(var Qt=0,lr=Ht;Qt<lr.length;Qt+=1)if(!En(lr[Qt],Ot))return!1}return!0}(_,this.geometries);if(_.geometryType()==="LineString")return function(O,Z){var ce=[1/0,1/0,-1/0,-1/0],xe=[1/0,1/0,-1/0,-1/0],we=O.canonicalID();if(Z.type==="Polygon"){var De=qa(Z.coordinates,xe,we),Ze=Pn(O.geometry(),ce,xe,we);if(!Wr(ce,xe))return!1;for(var pt=0,St=Ze;pt<St.length;pt+=1)if(!ba(St[pt],De))return!1}if(Z.type==="MultiPolygon"){var Ot=dr(Z.coordinates,xe,we),Ht=Pn(O.geometry(),ce,xe,we);if(!Wr(ce,xe))return!1;for(var Qt=0,lr=Ht;Qt<lr.length;Qt+=1)if(!Wa(lr[Qt],Ot))return!1}return!0}(_,this.geometries)}return!1},Gn.prototype.eachChild=function(){},Gn.prototype.outputDefined=function(){return!0},Gn.prototype.serialize=function(){return["within",this.geojson]};var Aa=function(_,O){this.type=O.type,this.name=_,this.boundExpression=O};Aa.parse=function(_,O){if(_.length!==2||typeof _[1]!="string")return O.error("'var' expression requires exactly one string literal argument.");var Z=_[1];return O.scope.has(Z)?new Aa(Z,O.scope.get(Z)):O.error('Unknown variable "'+Z+'". Make sure "'+Z+'" has been bound in an enclosing "let" expression before using it.',1)},Aa.prototype.evaluate=function(_){return this.boundExpression.evaluate(_)},Aa.prototype.eachChild=function(){},Aa.prototype.outputDefined=function(){return!1},Aa.prototype.serialize=function(){return["var",this.name]};var Ya=function(_,O,Z,ce,xe){O===void 0&&(O=[]),ce===void 0&&(ce=new ot),xe===void 0&&(xe=[]),this.registry=_,this.path=O,this.key=O.map(function(we){return"["+we+"]"}).join(""),this.scope=ce,this.errors=xe,this.expectedType=Z};function Xt(_,O){for(var Z,ce=_.length-1,xe=0,we=ce,De=0;xe<=we;)if((Z=_[De=Math.floor((xe+we)/2)])<=O){if(De===ce||O<_[De+1])return De;xe=De+1}else{if(!(Z>O))throw new Pr("Input is not a number.");we=De-1}return 0}Ya.prototype.parse=function(_,O,Z,ce,xe){return xe===void 0&&(xe={}),O?this.concat(O,Z,ce)._parse(_,xe):this._parse(_,xe)},Ya.prototype._parse=function(_,O){function Z(St,Ot,Ht){return Ht==="assert"?new pn(Ot,[St]):Ht==="coerce"?new kn(Ot,[St]):St}if(_!==null&&typeof _!="string"&&typeof _!="boolean"&&typeof _!="number"||(_=["literal",_]),Array.isArray(_)){if(_.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ce=_[0];if(typeof ce!="string")return this.error("Expression name must be a string, but found "+typeof ce+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var xe=this.registry[ce];if(xe){var we=xe.parse(_,this);if(!we)return null;if(this.expectedType){var De=this.expectedType,Ze=we.type;if(De.kind!=="string"&&De.kind!=="number"&&De.kind!=="boolean"&&De.kind!=="object"&&De.kind!=="array"||Ze.kind!=="value")if(De.kind!=="color"&&De.kind!=="formatted"&&De.kind!=="resolvedImage"||Ze.kind!=="value"&&Ze.kind!=="string"){if(this.checkSubtype(De,Ze))return null}else we=Z(we,De,O.typeAnnotation||"coerce");else we=Z(we,De,O.typeAnnotation||"assert")}if(!(we instanceof Nr)&&we.type.kind!=="resolvedImage"&&function St(Ot){if(Ot instanceof Aa)return St(Ot.boundExpression);if(Ot instanceof Gt&&Ot.name==="error"||Ot instanceof fr||Ot instanceof Gn)return!1;var Ht=Ot instanceof kn||Ot instanceof pn,Qt=!0;return Ot.eachChild(function(lr){Qt=Ht?Qt&&St(lr):Qt&&lr instanceof Nr}),!!Qt&&ka(Ot)&&Ta(Ot,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(we)){var pt=new vt;try{we=new Nr(we.type,we.evaluate(pt))}catch(St){return this.error(St.message),null}}return we}return this.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(_===void 0?"'undefined' value invalid. Use null instead.":typeof _=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof _+" instead.")},Ya.prototype.concat=function(_,O,Z){var ce=typeof _=="number"?this.path.concat(_):this.path,xe=Z?this.scope.concat(Z):this.scope;return new Ya(this.registry,ce,O||null,xe,this.errors)},Ya.prototype.error=function(_){for(var O=[],Z=arguments.length-1;Z-- >0;)O[Z]=arguments[Z+1];var ce=""+this.key+O.map(function(xe){return"["+xe+"]"}).join("");this.errors.push(new je(ce,_))},Ya.prototype.checkSubtype=function(_,O){var Z=Bt(_,O);return Z&&this.error(Z),Z};var yr=function(_,O,Z){this.type=_,this.input=O,this.labels=[],this.outputs=[];for(var ce=0,xe=Z;ce<xe.length;ce+=1){var we=xe[ce],De=we[1];this.labels.push(we[0]),this.outputs.push(De)}};function Yr(_,O,Z){return _*(1-Z)+O*Z}yr.parse=function(_,O){if(_.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(_.length-1)+".");if((_.length-1)%2!=0)return O.error("Expected an even number of arguments.");var Z=O.parse(_[1],1,st);if(!Z)return null;var ce=[],xe=null;O.expectedType&&O.expectedType.kind!=="value"&&(xe=O.expectedType);for(var we=1;we<_.length;we+=2){var De=we===1?-1/0:_[we],Ze=_[we+1],pt=we,St=we+1;if(typeof De!="number")return O.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',pt);if(ce.length&&ce[ce.length-1][0]>=De)return O.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',pt);var Ot=O.parse(Ze,St,xe);if(!Ot)return null;xe=xe||Ot.type,ce.push([De,Ot])}return new yr(xe,Z,ce)},yr.prototype.evaluate=function(_){var O=this.labels,Z=this.outputs;if(O.length===1)return Z[0].evaluate(_);var ce=this.input.evaluate(_);if(ce<=O[0])return Z[0].evaluate(_);var xe=O.length;return ce>=O[xe-1]?Z[xe-1].evaluate(_):Z[Xt(O,ce)].evaluate(_)},yr.prototype.eachChild=function(_){_(this.input);for(var O=0,Z=this.outputs;O<Z.length;O+=1)_(Z[O])},yr.prototype.outputDefined=function(){return this.outputs.every(function(_){return _.outputDefined()})},yr.prototype.serialize=function(){for(var _=["step",this.input.serialize()],O=0;O<this.labels.length;O++)O>0&&_.push(this.labels[O]),_.push(this.outputs[O].serialize());return _};var un=Object.freeze({__proto__:null,number:Yr,color:function(_,O,Z){return new _r(Yr(_.r,O.r,Z),Yr(_.g,O.g,Z),Yr(_.b,O.b,Z),Yr(_.a,O.a,Z))},array:function(_,O,Z){return _.map(function(ce,xe){return Yr(ce,O[xe],Z)})}}),qr=6/29*3*(6/29),rn=Math.PI/180,hn=180/Math.PI;function tn(_){return _>.008856451679035631?Math.pow(_,1/3):_/qr+4/29}function wr(_){return _>6/29?_*_*_:qr*(_-4/29)}function zr(_){return 255*(_<=.0031308?12.92*_:1.055*Math.pow(_,1/2.4)-.055)}function Tr(_){return(_/=255)<=.04045?_/12.92:Math.pow((_+.055)/1.055,2.4)}function Fn(_){var O=Tr(_.r),Z=Tr(_.g),ce=Tr(_.b),xe=tn((.4124564*O+.3575761*Z+.1804375*ce)/.95047),we=tn((.2126729*O+.7151522*Z+.072175*ce)/1);return{l:116*we-16,a:500*(xe-we),b:200*(we-tn((.0193339*O+.119192*Z+.9503041*ce)/1.08883)),alpha:_.a}}function Bn(_){var O=(_.l+16)/116,Z=isNaN(_.a)?O:O+_.a/500,ce=isNaN(_.b)?O:O-_.b/200;return O=1*wr(O),Z=.95047*wr(Z),ce=1.08883*wr(ce),new _r(zr(3.2404542*Z-1.5371385*O-.4985314*ce),zr(-.969266*Z+1.8760108*O+.041556*ce),zr(.0556434*Z-.2040259*O+1.0572252*ce),_.alpha)}function sa(_,O,Z){var ce=O-_;return _+Z*(ce>180||ce<-180?ce-360*Math.round(ce/360):ce)}var Pa={forward:Fn,reverse:Bn,interpolate:function(_,O,Z){return{l:Yr(_.l,O.l,Z),a:Yr(_.a,O.a,Z),b:Yr(_.b,O.b,Z),alpha:Yr(_.alpha,O.alpha,Z)}}},ia={forward:function(_){var O=Fn(_),Z=O.l,ce=O.a,xe=O.b,we=Math.atan2(xe,ce)*hn;return{h:we<0?we+360:we,c:Math.sqrt(ce*ce+xe*xe),l:Z,alpha:_.a}},reverse:function(_){var O=_.h*rn,Z=_.c;return Bn({l:_.l,a:Math.cos(O)*Z,b:Math.sin(O)*Z,alpha:_.alpha})},interpolate:function(_,O,Z){return{h:sa(_.h,O.h,Z),c:Yr(_.c,O.c,Z),l:Yr(_.l,O.l,Z),alpha:Yr(_.alpha,O.alpha,Z)}}},ri=Object.freeze({__proto__:null,lab:Pa,hcl:ia}),Ai=function(_,O,Z,ce,xe){this.type=_,this.operator=O,this.interpolation=Z,this.input=ce,this.labels=[],this.outputs=[];for(var we=0,De=xe;we<De.length;we+=1){var Ze=De[we],pt=Ze[1];this.labels.push(Ze[0]),this.outputs.push(pt)}};function Bi(_,O,Z,ce){var xe=ce-Z,we=_-Z;return xe===0?0:O===1?we/xe:(Math.pow(O,we)-1)/(Math.pow(O,xe)-1)}Ai.interpolationFactor=function(_,O,Z,ce){var xe=0;if(_.name==="exponential")xe=Bi(O,_.base,Z,ce);else if(_.name==="linear")xe=Bi(O,1,Z,ce);else if(_.name==="cubic-bezier"){var we=_.controlPoints;xe=new n(we[0],we[1],we[2],we[3]).solve(Bi(O,1,Z,ce))}return xe},Ai.parse=function(_,O){var Z=_[0],ce=_[1],xe=_[2],we=_.slice(3);if(!Array.isArray(ce)||ce.length===0)return O.error("Expected an interpolation type expression.",1);if(ce[0]==="linear")ce={name:"linear"};else if(ce[0]==="exponential"){var De=ce[1];if(typeof De!="number")return O.error("Exponential interpolation requires a numeric base.",1,1);ce={name:"exponential",base:De}}else{if(ce[0]!=="cubic-bezier")return O.error("Unknown interpolation type "+String(ce[0]),1,0);var Ze=ce.slice(1);if(Ze.length!==4||Ze.some(function(Kr){return typeof Kr!="number"||Kr<0||Kr>1}))return O.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ce={name:"cubic-bezier",controlPoints:Ze}}if(_.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(_.length-1)+".");if((_.length-1)%2!=0)return O.error("Expected an even number of arguments.");if(!(xe=O.parse(xe,2,st)))return null;var pt=[],St=null;Z==="interpolate-hcl"||Z==="interpolate-lab"?St=nr:O.expectedType&&O.expectedType.kind!=="value"&&(St=O.expectedType);for(var Ot=0;Ot<we.length;Ot+=2){var Ht=we[Ot],Qt=we[Ot+1],lr=Ot+3,Mr=Ot+4;if(typeof Ht!="number")return O.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',lr);if(pt.length&&pt[pt.length-1][0]>=Ht)return O.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',lr);var Er=O.parse(Qt,Mr,St);if(!Er)return null;St=St||Er.type,pt.push([Ht,Er])}return St.kind==="number"||St.kind==="color"||St.kind==="array"&&St.itemType.kind==="number"&&typeof St.N=="number"?new Ai(St,Z,ce,xe,pt):O.error("Type "+Dt(St)+" is not interpolatable.")},Ai.prototype.evaluate=function(_){var O=this.labels,Z=this.outputs;if(O.length===1)return Z[0].evaluate(_);var ce=this.input.evaluate(_);if(ce<=O[0])return Z[0].evaluate(_);var xe=O.length;if(ce>=O[xe-1])return Z[xe-1].evaluate(_);var we=Xt(O,ce),De=Ai.interpolationFactor(this.interpolation,ce,O[we],O[we+1]),Ze=Z[we].evaluate(_),pt=Z[we+1].evaluate(_);return this.operator==="interpolate"?un[this.type.kind.toLowerCase()](Ze,pt,De):this.operator==="interpolate-hcl"?ia.reverse(ia.interpolate(ia.forward(Ze),ia.forward(pt),De)):Pa.reverse(Pa.interpolate(Pa.forward(Ze),Pa.forward(pt),De))},Ai.prototype.eachChild=function(_){_(this.input);for(var O=0,Z=this.outputs;O<Z.length;O+=1)_(Z[O])},Ai.prototype.outputDefined=function(){return this.outputs.every(function(_){return _.outputDefined()})},Ai.prototype.serialize=function(){var _;_=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var O=[this.operator,_,this.input.serialize()],Z=0;Z<this.labels.length;Z++)O.push(this.labels[Z],this.outputs[Z].serialize());return O};var Qa=function(_,O){this.type=_,this.args=O};Qa.parse=function(_,O){if(_.length<2)return O.error("Expectected at least one argument.");var Z=null,ce=O.expectedType;ce&&ce.kind!=="value"&&(Z=ce);for(var xe=[],we=0,De=_.slice(1);we<De.length;we+=1){var Ze=O.parse(De[we],1+xe.length,Z,void 0,{typeAnnotation:"omit"});if(!Ze)return null;Z=Z||Ze.type,xe.push(Ze)}var pt=ce&&xe.some(function(St){return Bt(ce,St.type)});return new Qa(pt?Fe:Z,xe)},Qa.prototype.evaluate=function(_){for(var O,Z=null,ce=0,xe=0,we=this.args;xe<we.length&&(ce++,(Z=we[xe].evaluate(_))&&Z instanceof Mn&&!Z.available&&(O||(O=Z.name),Z=null,ce===this.args.length&&(Z=O)),Z===null);xe+=1);return Z},Qa.prototype.eachChild=function(_){this.args.forEach(_)},Qa.prototype.outputDefined=function(){return this.args.every(function(_){return _.outputDefined()})},Qa.prototype.serialize=function(){var _=["coalesce"];return this.eachChild(function(O){_.push(O.serialize())}),_};var yi=function(_,O){this.type=O.type,this.bindings=[].concat(_),this.result=O};yi.prototype.evaluate=function(_){return this.result.evaluate(_)},yi.prototype.eachChild=function(_){for(var O=0,Z=this.bindings;O<Z.length;O+=1)_(Z[O][1]);_(this.result)},yi.parse=function(_,O){if(_.length<4)return O.error("Expected at least 3 arguments, but found "+(_.length-1)+" instead.");for(var Z=[],ce=1;ce<_.length-1;ce+=2){var xe=_[ce];if(typeof xe!="string")return O.error("Expected string, but found "+typeof xe+" instead.",ce);if(/[^a-zA-Z0-9_]/.test(xe))return O.error("Variable names must contain only alphanumeric characters or '_'.",ce);var we=O.parse(_[ce+1],ce+1);if(!we)return null;Z.push([xe,we])}var De=O.parse(_[_.length-1],_.length-1,O.expectedType,Z);return De?new yi(Z,De):null},yi.prototype.outputDefined=function(){return this.result.outputDefined()},yi.prototype.serialize=function(){for(var _=["let"],O=0,Z=this.bindings;O<Z.length;O+=1){var ce=Z[O];_.push(ce[0],ce[1].serialize())}return _.push(this.result.serialize()),_};var As=function(_,O,Z){this.type=_,this.index=O,this.input=Z};As.parse=function(_,O){if(_.length!==3)return O.error("Expected 2 arguments, but found "+(_.length-1)+" instead.");var Z=O.parse(_[1],1,st),ce=O.parse(_[2],2,Rt(O.expectedType||Fe));return Z&&ce?new As(ce.type.itemType,Z,ce):null},As.prototype.evaluate=function(_){var O=this.index.evaluate(_),Z=this.input.evaluate(_);if(O<0)throw new Pr("Array index out of bounds: "+O+" < 0.");if(O>=Z.length)throw new Pr("Array index out of bounds: "+O+" > "+(Z.length-1)+".");if(O!==Math.floor(O))throw new Pr("Array index must be an integer, but found "+O+" instead.");return Z[O]},As.prototype.eachChild=function(_){_(this.index),_(this.input)},As.prototype.outputDefined=function(){return!1},As.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var qo=function(_,O){this.type=Nt,this.needle=_,this.haystack=O};qo.parse=function(_,O){if(_.length!==3)return O.error("Expected 2 arguments, but found "+(_.length-1)+" instead.");var Z=O.parse(_[1],1,Fe),ce=O.parse(_[2],2,Fe);return Z&&ce?tr(Z.type,[Nt,It,st,Je,Fe])?new qo(Z,ce):O.error("Expected first argument to be of type boolean, string, number or null, but found "+Dt(Z.type)+" instead"):null},qo.prototype.evaluate=function(_){var O=this.needle.evaluate(_),Z=this.haystack.evaluate(_);if(!Z)return!1;if(!er(O,["boolean","string","number","null"]))throw new Pr("Expected first argument to be of type boolean, string, number or null, but found "+Dt(Nn(O))+" instead.");if(!er(Z,["string","array"]))throw new Pr("Expected second argument to be of type array or string, but found "+Dt(Nn(Z))+" instead.");return Z.indexOf(O)>=0},qo.prototype.eachChild=function(_){_(this.needle),_(this.haystack)},qo.prototype.outputDefined=function(){return!0},qo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Tu=function(_,O,Z){this.type=st,this.needle=_,this.haystack=O,this.fromIndex=Z};Tu.parse=function(_,O){if(_.length<=2||_.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(_.length-1)+" instead.");var Z=O.parse(_[1],1,Fe),ce=O.parse(_[2],2,Fe);if(!Z||!ce)return null;if(!tr(Z.type,[Nt,It,st,Je,Fe]))return O.error("Expected first argument to be of type boolean, string, number or null, but found "+Dt(Z.type)+" instead");if(_.length===4){var xe=O.parse(_[3],3,st);return xe?new Tu(Z,ce,xe):null}return new Tu(Z,ce)},Tu.prototype.evaluate=function(_){var O=this.needle.evaluate(_),Z=this.haystack.evaluate(_);if(!er(O,["boolean","string","number","null"]))throw new Pr("Expected first argument to be of type boolean, string, number or null, but found "+Dt(Nn(O))+" instead.");if(!er(Z,["string","array"]))throw new Pr("Expected second argument to be of type array or string, but found "+Dt(Nn(Z))+" instead.");if(this.fromIndex){var ce=this.fromIndex.evaluate(_);return Z.indexOf(O,ce)}return Z.indexOf(O)},Tu.prototype.eachChild=function(_){_(this.needle),_(this.haystack),this.fromIndex&&_(this.fromIndex)},Tu.prototype.outputDefined=function(){return!1},Tu.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var _=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),_]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ms=function(_,O,Z,ce,xe,we){this.inputType=_,this.type=O,this.input=Z,this.cases=ce,this.outputs=xe,this.otherwise=we};Ms.parse=function(_,O){if(_.length<5)return O.error("Expected at least 4 arguments, but found only "+(_.length-1)+".");if(_.length%2!=1)return O.error("Expected an even number of arguments.");var Z,ce;O.expectedType&&O.expectedType.kind!=="value"&&(ce=O.expectedType);for(var xe={},we=[],De=2;De<_.length-1;De+=2){var Ze=_[De],pt=_[De+1];Array.isArray(Ze)||(Ze=[Ze]);var St=O.concat(De);if(Ze.length===0)return St.error("Expected at least one branch label.");for(var Ot=0,Ht=Ze;Ot<Ht.length;Ot+=1){var Qt=Ht[Ot];if(typeof Qt!="number"&&typeof Qt!="string")return St.error("Branch labels must be numbers or strings.");if(typeof Qt=="number"&&Math.abs(Qt)>Number.MAX_SAFE_INTEGER)return St.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Qt=="number"&&Math.floor(Qt)!==Qt)return St.error("Numeric branch labels must be integer values.");if(Z){if(St.checkSubtype(Z,Nn(Qt)))return null}else Z=Nn(Qt);if(xe[String(Qt)]!==void 0)return St.error("Branch labels must be unique.");xe[String(Qt)]=we.length}var lr=O.parse(pt,De,ce);if(!lr)return null;ce=ce||lr.type,we.push(lr)}var Mr=O.parse(_[1],1,Fe);if(!Mr)return null;var Er=O.parse(_[_.length-1],_.length-1,ce);return Er?Mr.type.kind!=="value"&&O.concat(1).checkSubtype(Z,Mr.type)?null:new Ms(Z,ce,Mr,xe,we,Er):null},Ms.prototype.evaluate=function(_){var O=this.input.evaluate(_);return(Nn(O)===this.inputType&&this.outputs[this.cases[O]]||this.otherwise).evaluate(_)},Ms.prototype.eachChild=function(_){_(this.input),this.outputs.forEach(_),_(this.otherwise)},Ms.prototype.outputDefined=function(){return this.outputs.every(function(_){return _.outputDefined()})&&this.otherwise.outputDefined()},Ms.prototype.serialize=function(){for(var _=this,O=["match",this.input.serialize()],Z=[],ce={},xe=0,we=Object.keys(this.cases).sort();xe<we.length;xe+=1){var De=we[xe];(Ht=ce[this.cases[De]])===void 0?(ce[this.cases[De]]=Z.length,Z.push([this.cases[De],[De]])):Z[Ht][1].push(De)}for(var Ze=function(lr){return _.inputType.kind==="number"?Number(lr):lr},pt=0,St=Z;pt<St.length;pt+=1){var Ot=St[pt],Ht=Ot[0],Qt=Ot[1];O.push(Qt.length===1?Ze(Qt[0]):Qt.map(Ze)),O.push(this.outputs[outputIndex$1].serialize())}return O.push(this.otherwise.serialize()),O};var Zu=function(_,O,Z){this.type=_,this.branches=O,this.otherwise=Z};Zu.parse=function(_,O){if(_.length<4)return O.error("Expected at least 3 arguments, but found only "+(_.length-1)+".");if(_.length%2!=0)return O.error("Expected an odd number of arguments.");var Z;O.expectedType&&O.expectedType.kind!=="value"&&(Z=O.expectedType);for(var ce=[],xe=1;xe<_.length-1;xe+=2){var we=O.parse(_[xe],xe,Nt);if(!we)return null;var De=O.parse(_[xe+1],xe+1,Z);if(!De)return null;ce.push([we,De]),Z=Z||De.type}var Ze=O.parse(_[_.length-1],_.length-1,Z);return Ze?new Zu(Z,ce,Ze):null},Zu.prototype.evaluate=function(_){for(var O=0,Z=this.branches;O<Z.length;O+=1){var ce=Z[O],xe=ce[1];if(ce[0].evaluate(_))return xe.evaluate(_)}return this.otherwise.evaluate(_)},Zu.prototype.eachChild=function(_){for(var O=0,Z=this.branches;O<Z.length;O+=1){var ce=Z[O],xe=ce[1];_(ce[0]),_(xe)}_(this.otherwise)},Zu.prototype.outputDefined=function(){return this.branches.every(function(_){return _[1].outputDefined()})&&this.otherwise.outputDefined()},Zu.prototype.serialize=function(){var _=["case"];return this.eachChild(function(O){_.push(O.serialize())}),_};var Au=function(_,O,Z,ce){this.type=_,this.input=O,this.beginIndex=Z,this.endIndex=ce};function su(_,O){return _==="=="||_==="!="?O.kind==="boolean"||O.kind==="string"||O.kind==="number"||O.kind==="null"||O.kind==="value":O.kind==="string"||O.kind==="number"||O.kind==="value"}function Sc(_,O,Z,ce){return ce.compare(O,Z)===0}function zu(_,O,Z){var ce=_!=="=="&&_!=="!=";return function(){function xe(we,De,Ze){this.type=Nt,this.lhs=we,this.rhs=De,this.collator=Ze,this.hasUntypedArgument=we.type.kind==="value"||De.type.kind==="value"}return xe.parse=function(we,De){if(we.length!==3&&we.length!==4)return De.error("Expected two or three arguments.");var Ze=we[0],pt=De.parse(we[1],1,Fe);if(!pt)return null;if(!su(Ze,pt.type))return De.concat(1).error('"'+Ze+`" comparisons are not supported for type '`+Dt(pt.type)+"'.");var St=De.parse(we[2],2,Fe);if(!St)return null;if(!su(Ze,St.type))return De.concat(2).error('"'+Ze+`" comparisons are not supported for type '`+Dt(St.type)+"'.");if(pt.type.kind!==St.type.kind&&pt.type.kind!=="value"&&St.type.kind!=="value")return De.error("Cannot compare types '"+Dt(pt.type)+"' and '"+Dt(St.type)+"'.");ce&&(pt.type.kind==="value"&&St.type.kind!=="value"?pt=new pn(St.type,[pt]):pt.type.kind!=="value"&&St.type.kind==="value"&&(St=new pn(pt.type,[St])));var Ot=null;if(we.length===4){if(pt.type.kind!=="string"&&St.type.kind!=="string"&&pt.type.kind!=="value"&&St.type.kind!=="value")return De.error("Cannot use collator to compare non-string types.");if(!(Ot=De.parse(we[3],3,bt)))return null}return new xe(pt,St,Ot)},xe.prototype.evaluate=function(we){var De=this.lhs.evaluate(we),Ze=this.rhs.evaluate(we);if(ce&&this.hasUntypedArgument){var pt=Nn(De),St=Nn(Ze);if(pt.kind!==St.kind||pt.kind!=="string"&&pt.kind!=="number")throw new Pr('Expected arguments for "'+_+'" to be (string, string) or (number, number), but found ('+pt.kind+", "+St.kind+") instead.")}if(this.collator&&!ce&&this.hasUntypedArgument){var Ot=Nn(De),Ht=Nn(Ze);if(Ot.kind!=="string"||Ht.kind!=="string")return O(we,De,Ze)}return this.collator?Z(we,De,Ze,this.collator.evaluate(we)):O(we,De,Ze)},xe.prototype.eachChild=function(we){we(this.lhs),we(this.rhs),this.collator&&we(this.collator)},xe.prototype.outputDefined=function(){return!0},xe.prototype.serialize=function(){var we=[_];return this.eachChild(function(De){we.push(De.serialize())}),we},xe}()}Au.parse=function(_,O){if(_.length<=2||_.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(_.length-1)+" instead.");var Z=O.parse(_[1],1,Fe),ce=O.parse(_[2],2,st);if(!Z||!ce)return null;if(!tr(Z.type,[Rt(Fe),It,Fe]))return O.error("Expected first argument to be of type array or string, but found "+Dt(Z.type)+" instead");if(_.length===4){var xe=O.parse(_[3],3,st);return xe?new Au(Z.type,Z,ce,xe):null}return new Au(Z.type,Z,ce)},Au.prototype.evaluate=function(_){var O=this.input.evaluate(_),Z=this.beginIndex.evaluate(_);if(!er(O,["string","array"]))throw new Pr("Expected first argument to be of type array or string, but found "+Dt(Nn(O))+" instead.");if(this.endIndex){var ce=this.endIndex.evaluate(_);return O.slice(Z,ce)}return O.slice(Z)},Au.prototype.eachChild=function(_){_(this.input),_(this.beginIndex),this.endIndex&&_(this.endIndex)},Au.prototype.outputDefined=function(){return!1},Au.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var _=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),_]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Po=zu("==",function(_,O,Z){return O===Z},Sc),al=zu("!=",function(_,O,Z){return O!==Z},function(_,O,Z,ce){return!Sc(0,O,Z,ce)}),go=zu("<",function(_,O,Z){return O<Z},function(_,O,Z,ce){return ce.compare(O,Z)<0}),ah=zu(">",function(_,O,Z){return O>Z},function(_,O,Z,ce){return ce.compare(O,Z)>0}),lu=zu("<=",function(_,O,Z){return O<=Z},function(_,O,Z,ce){return ce.compare(O,Z)<=0}),Ef=zu(">=",function(_,O,Z){return O>=Z},function(_,O,Z,ce){return ce.compare(O,Z)>=0}),uu=function(_,O,Z,ce,xe){this.type=It,this.number=_,this.locale=O,this.currency=Z,this.minFractionDigits=ce,this.maxFractionDigits=xe};uu.parse=function(_,O){if(_.length!==3)return O.error("Expected two arguments.");var Z=O.parse(_[1],1,st);if(!Z)return null;var ce=_[2];if(typeof ce!="object"||Array.isArray(ce))return O.error("NumberFormat options argument must be an object.");var xe=null;if(ce.locale&&!(xe=O.parse(ce.locale,1,It)))return null;var we=null;if(ce.currency&&!(we=O.parse(ce.currency,1,It)))return null;var De=null;if(ce["min-fraction-digits"]&&!(De=O.parse(ce["min-fraction-digits"],1,st)))return null;var Ze=null;return ce["max-fraction-digits"]&&!(Ze=O.parse(ce["max-fraction-digits"],1,st))?null:new uu(Z,xe,we,De,Ze)},uu.prototype.evaluate=function(_){return new Intl.NumberFormat(this.locale?this.locale.evaluate(_):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(_):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(_):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(_):void 0}).format(this.number.evaluate(_))},uu.prototype.eachChild=function(_){_(this.number),this.locale&&_(this.locale),this.currency&&_(this.currency),this.minFractionDigits&&_(this.minFractionDigits),this.maxFractionDigits&&_(this.maxFractionDigits)},uu.prototype.outputDefined=function(){return!1},uu.prototype.serialize=function(){var _={};return this.locale&&(_.locale=this.locale.serialize()),this.currency&&(_.currency=this.currency.serialize()),this.minFractionDigits&&(_["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(_["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),_]};var Xl=function(_){this.type=st,this.input=_};Xl.parse=function(_,O){if(_.length!==2)return O.error("Expected 1 argument, but found "+(_.length-1)+" instead.");var Z=O.parse(_[1],1);return Z?Z.type.kind!=="array"&&Z.type.kind!=="string"&&Z.type.kind!=="value"?O.error("Expected argument of type string or array, but found "+Dt(Z.type)+" instead."):new Xl(Z):null},Xl.prototype.evaluate=function(_){var O=this.input.evaluate(_);if(typeof O=="string"||Array.isArray(O))return O.length;throw new Pr("Expected value to be of type string or array, but found "+Dt(Nn(O))+" instead.")},Xl.prototype.eachChild=function(_){_(this.input)},Xl.prototype.outputDefined=function(){return!1},Xl.prototype.serialize=function(){var _=["length"];return this.eachChild(function(O){_.push(O.serialize())}),_};var Mu={"==":Po,"!=":al,">":ah,"<":go,">=":Ef,"<=":lu,array:pn,at:As,boolean:pn,case:Zu,coalesce:Qa,collator:fr,format:xn,image:en,in:qo,"index-of":Tu,interpolate:Ai,"interpolate-hcl":Ai,"interpolate-lab":Ai,length:Xl,let:yi,literal:Nr,match:Ms,number:pn,"number-format":uu,object:pn,slice:Au,step:yr,string:pn,"to-boolean":kn,"to-color":kn,"to-number":kn,"to-string":kn,var:Aa,within:Gn};function ku(_,O){var Z=O[0],ce=O[1],xe=O[2],we=O[3];Z=Z.evaluate(_),ce=ce.evaluate(_),xe=xe.evaluate(_);var De=we?we.evaluate(_):1,Ze=Wn(Z,ce,xe,De);if(Ze)throw new Pr(Ze);return new _r(Z/255*De,ce/255*De,xe/255*De,De)}function pl(_,O){return _ in O}function il(_,O){var Z=O[_];return Z===void 0?null:Z}function Ou(_){return{type:_}}function Su(_){return{result:"success",value:_}}function Zl(_){return{result:"error",value:_}}function dl(_){return _["property-type"]==="data-driven"||_["property-type"]==="cross-faded-data-driven"}function lc(_){return!!_.expression&&_.expression.parameters.indexOf("zoom")>-1}function Ku(_){return!!_.expression&&_.expression.interpolated}function $i(_){return _ instanceof Number?"number":_ instanceof String?"string":_ instanceof Boolean?"boolean":Array.isArray(_)?"array":_===null?"null":typeof _}function Gs(_){return typeof _=="object"&&_!==null&&!Array.isArray(_)}function $c(_){return _}function cu(_,O,Z){return _!==void 0?_:O!==void 0?O:Z!==void 0?Z:void 0}function ks(_,O,Z,ce,xe){return cu(typeof Z===xe?ce[Z]:void 0,_.default,O.default)}function fu(_,O,Z){if($i(Z)!=="number")return cu(_.default,O.default);var ce=_.stops.length;if(ce===1||Z<=_.stops[0][0])return _.stops[0][1];if(Z>=_.stops[ce-1][0])return _.stops[ce-1][1];var xe=Xt(_.stops.map(function(we){return we[0]}),Z);return _.stops[xe][1]}function Ml(_,O,Z){var ce=_.base!==void 0?_.base:1;if($i(Z)!=="number")return cu(_.default,O.default);var xe=_.stops.length;if(xe===1||Z<=_.stops[0][0])return _.stops[0][1];if(Z>=_.stops[xe-1][0])return _.stops[xe-1][1];var we=Xt(_.stops.map(function(Ht){return Ht[0]}),Z),De=function(Ht,Qt,lr,Mr){var Er=Mr-lr,Kr=Ht-lr;return Er===0?0:Qt===1?Kr/Er:(Math.pow(Qt,Kr)-1)/(Math.pow(Qt,Er)-1)}(Z,ce,_.stops[we][0],_.stops[we+1][0]),Ze=_.stops[we][1],pt=_.stops[we+1][1],St=un[O.type]||$c;if(_.colorSpace&&_.colorSpace!=="rgb"){var Ot=ri[_.colorSpace];St=function(Ht,Qt){return Ot.reverse(Ot.interpolate(Ot.forward(Ht),Ot.forward(Qt),De))}}return typeof Ze.evaluate=="function"?{evaluate:function(){for(var Ht=[],Qt=arguments.length;Qt--;)Ht[Qt]=arguments[Qt];var lr=Ze.evaluate.apply(void 0,Ht),Mr=pt.evaluate.apply(void 0,Ht);if(lr!==void 0&&Mr!==void 0)return St(lr,Mr,De)}}:St(Ze,pt,De)}function vl(_,O,Z){return O.type==="color"?Z=_r.parse(Z):O.type==="formatted"?Z=Fr.fromString(Z.toString()):O.type==="resolvedImage"?Z=Mn.fromString(Z.toString()):$i(Z)===O.type||O.type==="enum"&&O.values[Z]||(Z=void 0),cu(Z,_.default,O.default)}Gt.register(Mu,{error:[{kind:"error"},[It],function(_,O){throw new Pr(O[0].evaluate(_))}],typeof:[It,[Fe],function(_,O){return Dt(Nn(O[0].evaluate(_)))}],"to-rgba":[Rt(st,4),[nr],function(_,O){return O[0].evaluate(_).toArray()}],rgb:[nr,[st,st,st],ku],rgba:[nr,[st,st,st,st],ku],has:{type:Nt,overloads:[[[It],function(_,O){return pl(O[0].evaluate(_),_.properties())}],[[It,We],function(_,O){var Z=O[1];return pl(O[0].evaluate(_),Z.evaluate(_))}]]},get:{type:Fe,overloads:[[[It],function(_,O){return il(O[0].evaluate(_),_.properties())}],[[It,We],function(_,O){var Z=O[1];return il(O[0].evaluate(_),Z.evaluate(_))}]]},"feature-state":[Fe,[It],function(_,O){return il(O[0].evaluate(_),_.featureState||{})}],properties:[We,[],function(_){return _.properties()}],"geometry-type":[It,[],function(_){return _.geometryType()}],id:[Fe,[],function(_){return _.id()}],zoom:[st,[],function(_){return _.globals.zoom}],"heatmap-density":[st,[],function(_){return _.globals.heatmapDensity||0}],"line-progress":[st,[],function(_){return _.globals.lineProgress||0}],accumulated:[Fe,[],function(_){return _.globals.accumulated===void 0?null:_.globals.accumulated}],"+":[st,Ou(st),function(_,O){for(var Z=0,ce=0,xe=O;ce<xe.length;ce+=1)Z+=xe[ce].evaluate(_);return Z}],"*":[st,Ou(st),function(_,O){for(var Z=1,ce=0,xe=O;ce<xe.length;ce+=1)Z*=xe[ce].evaluate(_);return Z}],"-":{type:st,overloads:[[[st,st],function(_,O){var Z=O[1];return O[0].evaluate(_)-Z.evaluate(_)}],[[st],function(_,O){return-O[0].evaluate(_)}]]},"/":[st,[st,st],function(_,O){var Z=O[1];return O[0].evaluate(_)/Z.evaluate(_)}],"%":[st,[st,st],function(_,O){var Z=O[1];return O[0].evaluate(_)%Z.evaluate(_)}],ln2:[st,[],function(){return Math.LN2}],pi:[st,[],function(){return Math.PI}],e:[st,[],function(){return Math.E}],"^":[st,[st,st],function(_,O){var Z=O[1];return Math.pow(O[0].evaluate(_),Z.evaluate(_))}],sqrt:[st,[st],function(_,O){return Math.sqrt(O[0].evaluate(_))}],log10:[st,[st],function(_,O){return Math.log(O[0].evaluate(_))/Math.LN10}],ln:[st,[st],function(_,O){return Math.log(O[0].evaluate(_))}],log2:[st,[st],function(_,O){return Math.log(O[0].evaluate(_))/Math.LN2}],sin:[st,[st],function(_,O){return Math.sin(O[0].evaluate(_))}],cos:[st,[st],function(_,O){return Math.cos(O[0].evaluate(_))}],tan:[st,[st],function(_,O){return Math.tan(O[0].evaluate(_))}],asin:[st,[st],function(_,O){return Math.asin(O[0].evaluate(_))}],acos:[st,[st],function(_,O){return Math.acos(O[0].evaluate(_))}],atan:[st,[st],function(_,O){return Math.atan(O[0].evaluate(_))}],min:[st,Ou(st),function(_,O){return Math.min.apply(Math,O.map(function(Z){return Z.evaluate(_)}))}],max:[st,Ou(st),function(_,O){return Math.max.apply(Math,O.map(function(Z){return Z.evaluate(_)}))}],abs:[st,[st],function(_,O){return Math.abs(O[0].evaluate(_))}],round:[st,[st],function(_,O){var Z=O[0].evaluate(_);return Z<0?-Math.round(-Z):Math.round(Z)}],floor:[st,[st],function(_,O){return Math.floor(O[0].evaluate(_))}],ceil:[st,[st],function(_,O){return Math.ceil(O[0].evaluate(_))}],"filter-==":[Nt,[It,Fe],function(_,O){var Z=O[0],ce=O[1];return _.properties()[Z.value]===ce.value}],"filter-id-==":[Nt,[Fe],function(_,O){var Z=O[0];return _.id()===Z.value}],"filter-type-==":[Nt,[It],function(_,O){var Z=O[0];return _.geometryType()===Z.value}],"filter-<":[Nt,[It,Fe],function(_,O){var Z=O[0],ce=O[1],xe=_.properties()[Z.value],we=ce.value;return typeof xe==typeof we&&xe<we}],"filter-id-<":[Nt,[Fe],function(_,O){var Z=O[0],ce=_.id(),xe=Z.value;return typeof ce==typeof xe&&ce<xe}],"filter->":[Nt,[It,Fe],function(_,O){var Z=O[0],ce=O[1],xe=_.properties()[Z.value],we=ce.value;return typeof xe==typeof we&&xe>we}],"filter-id->":[Nt,[Fe],function(_,O){var Z=O[0],ce=_.id(),xe=Z.value;return typeof ce==typeof xe&&ce>xe}],"filter-<=":[Nt,[It,Fe],function(_,O){var Z=O[0],ce=O[1],xe=_.properties()[Z.value],we=ce.value;return typeof xe==typeof we&&xe<=we}],"filter-id-<=":[Nt,[Fe],function(_,O){var Z=O[0],ce=_.id(),xe=Z.value;return typeof ce==typeof xe&&ce<=xe}],"filter->=":[Nt,[It,Fe],function(_,O){var Z=O[0],ce=O[1],xe=_.properties()[Z.value],we=ce.value;return typeof xe==typeof we&&xe>=we}],"filter-id->=":[Nt,[Fe],function(_,O){var Z=O[0],ce=_.id(),xe=Z.value;return typeof ce==typeof xe&&ce>=xe}],"filter-has":[Nt,[Fe],function(_,O){return O[0].value in _.properties()}],"filter-has-id":[Nt,[],function(_){return _.id()!==null&&_.id()!==void 0}],"filter-type-in":[Nt,[Rt(It)],function(_,O){return O[0].value.indexOf(_.geometryType())>=0}],"filter-id-in":[Nt,[Rt(Fe)],function(_,O){return O[0].value.indexOf(_.id())>=0}],"filter-in-small":[Nt,[It,Rt(Fe)],function(_,O){var Z=O[0];return O[1].value.indexOf(_.properties()[Z.value])>=0}],"filter-in-large":[Nt,[It,Rt(Fe)],function(_,O){var Z=O[0],ce=O[1];return function(xe,we,De,Ze){for(;De<=Ze;){var pt=De+Ze>>1;if(we[pt]===xe)return!0;we[pt]>xe?Ze=pt-1:De=pt+1}return!1}(_.properties()[Z.value],ce.value,0,ce.value.length-1)}],all:{type:Nt,overloads:[[[Nt,Nt],function(_,O){var Z=O[1];return O[0].evaluate(_)&&Z.evaluate(_)}],[Ou(Nt),function(_,O){for(var Z=0,ce=O;Z<ce.length;Z+=1)if(!ce[Z].evaluate(_))return!1;return!0}]]},any:{type:Nt,overloads:[[[Nt,Nt],function(_,O){var Z=O[1];return O[0].evaluate(_)||Z.evaluate(_)}],[Ou(Nt),function(_,O){for(var Z=0,ce=O;Z<ce.length;Z+=1)if(ce[Z].evaluate(_))return!0;return!1}]]},"!":[Nt,[Nt],function(_,O){return!O[0].evaluate(_)}],"is-supported-script":[Nt,[It],function(_,O){var Z=_.globals&&_.globals.isSupportedScript;return!Z||Z(O[0].evaluate(_))}],upcase:[It,[It],function(_,O){return O[0].evaluate(_).toUpperCase()}],downcase:[It,[It],function(_,O){return O[0].evaluate(_).toLowerCase()}],concat:[It,Ou(Fe),function(_,O){return O.map(function(Z){return jn(Z.evaluate(_))}).join("")}],"resolved-locale":[It,[bt],function(_,O){return O[0].evaluate(_).resolvedLocale()}]});var kl=function(_,O){this.expression=_,this._warningHistory={},this._evaluator=new vt,this._defaultValue=O?function(Z){return Z.type==="color"&&Gs(Z.default)?new _r(0,0,0,0):Z.type==="color"?_r.parse(Z.default)||null:Z.default===void 0?null:Z.default}(O):null,this._enumValues=O&&O.type==="enum"?O.values:null};function ol(_){return Array.isArray(_)&&_.length>0&&typeof _[0]=="string"&&_[0]in Mu}function ml(_,O){var Z=new Ya(Mu,[],O?function(xe){var we={color:nr,string:It,number:st,enum:It,boolean:Nt,formatted:kt,resolvedImage:_t};return xe.type==="array"?Rt(we[xe.value]||Fe,xe.length):we[xe.type]}(O):void 0),ce=Z.parse(_,void 0,void 0,void 0,O&&O.type==="string"?{typeAnnotation:"coerce"}:void 0);return ce?Su(new kl(ce,O)):Zl(Z.errors)}kl.prototype.evaluateWithoutErrorHandling=function(_,O,Z,ce,xe,we){return this._evaluator.globals=_,this._evaluator.feature=O,this._evaluator.featureState=Z,this._evaluator.canonical=ce,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=we,this.expression.evaluate(this._evaluator)},kl.prototype.evaluate=function(_,O,Z,ce,xe,we){this._evaluator.globals=_,this._evaluator.feature=O||null,this._evaluator.featureState=Z||null,this._evaluator.canonical=ce,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=we||null;try{var De=this.expression.evaluate(this._evaluator);if(De==null||typeof De=="number"&&De!=De)return this._defaultValue;if(this._enumValues&&!(De in this._enumValues))throw new Pr("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ze){return JSON.stringify(Ze)}).join(", ")+", but found "+JSON.stringify(De)+" instead.");return De}catch(Ze){return this._warningHistory[Ze.message]||(this._warningHistory[Ze.message]=!0,typeof console<"u"&&console.warn(Ze.message)),this._defaultValue}};var gs=function(_,O){this.kind=_,this._styleExpression=O,this.isStateDependent=_!=="constant"&&!ca(O.expression)};gs.prototype.evaluateWithoutErrorHandling=function(_,O,Z,ce,xe,we){return this._styleExpression.evaluateWithoutErrorHandling(_,O,Z,ce,xe,we)},gs.prototype.evaluate=function(_,O,Z,ce,xe,we){return this._styleExpression.evaluate(_,O,Z,ce,xe,we)};var Kl=function(_,O,Z,ce){this.kind=_,this.zoomStops=Z,this._styleExpression=O,this.isStateDependent=_!=="camera"&&!ca(O.expression),this.interpolationType=ce};function hu(_,O){if((_=ml(_,O)).result==="error")return _;var Z=_.value.expression,ce=ka(Z);if(!ce&&!dl(O))return Zl([new je("","data expressions not supported")]);var xe=Ta(Z,["zoom"]);if(!xe&&!lc(O))return Zl([new je("","zoom expressions not supported")]);var we=function De(Ze){var pt=null;if(Ze instanceof yi)pt=De(Ze.result);else if(Ze instanceof Qa)for(var St=0,Ot=Ze.args;St<Ot.length&&!(pt=De(Ot[St]));St+=1);else(Ze instanceof yr||Ze instanceof Ai)&&Ze.input instanceof Gt&&Ze.input.name==="zoom"&&(pt=Ze);return pt instanceof je||Ze.eachChild(function(Ht){var Qt=De(Ht);Qt instanceof je?pt=Qt:!pt&&Qt?pt=new je("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):pt&&Qt&&pt!==Qt&&(pt=new je("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),pt}(Z);return we||xe?we instanceof je?Zl([we]):we instanceof Ai&&!Ku(O)?Zl([new je("",'"interpolate" expressions cannot be used with this property')]):Su(we?new Kl(ce?"camera":"composite",_.value,we.labels,we instanceof Ai?we.interpolation:void 0):new gs(ce?"constant":"source",_.value)):Zl([new je("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Kl.prototype.evaluateWithoutErrorHandling=function(_,O,Z,ce,xe,we){return this._styleExpression.evaluateWithoutErrorHandling(_,O,Z,ce,xe,we)},Kl.prototype.evaluate=function(_,O,Z,ce,xe,we){return this._styleExpression.evaluate(_,O,Z,ce,xe,we)},Kl.prototype.interpolationFactor=function(_,O,Z){return this.interpolationType?Ai.interpolationFactor(this.interpolationType,_,O,Z):0};var es=function(_,O){this._parameters=_,this._specification=O,Ye(this,function Z(ce,xe){var we,De,Ze,pt=xe.type==="color",St=ce.stops&&typeof ce.stops[0][0]=="object",Ot=St||!(St||ce.property!==void 0),Ht=ce.type||(Ku(xe)?"exponential":"interval");if(pt&&((ce=Ye({},ce)).stops&&(ce.stops=ce.stops.map(function(Ba){return[Ba[0],_r.parse(Ba[1])]})),ce.default=_r.parse(ce.default?ce.default:xe.default)),ce.colorSpace&&ce.colorSpace!=="rgb"&&!ri[ce.colorSpace])throw new Error("Unknown color space: "+ce.colorSpace);if(Ht==="exponential")we=Ml;else if(Ht==="interval")we=fu;else if(Ht==="categorical"){we=ks,De=Object.create(null);for(var Qt=0,lr=ce.stops;Qt<lr.length;Qt+=1){var Mr=lr[Qt];De[Mr[0]]=Mr[1]}Ze=typeof ce.stops[0][0]}else{if(Ht!=="identity")throw new Error('Unknown function type "'+Ht+'"');we=vl}if(St){for(var Er={},Kr=[],Br=0;Br<ce.stops.length;Br++){var sn=ce.stops[Br],vn=sn[0].zoom;Er[vn]===void 0&&(Er[vn]={zoom:vn,type:ce.type,property:ce.property,default:ce.default,stops:[]},Kr.push(vn)),Er[vn].stops.push([sn[0].value,sn[1]])}for(var Rn=[],zn=0,Zn=Kr;zn<Zn.length;zn+=1){var xa=Zn[zn];Rn.push([Er[xa].zoom,Z(Er[xa],xe)])}var La={name:"linear"};return{kind:"composite",interpolationType:La,interpolationFactor:Ai.interpolationFactor.bind(void 0,La),zoomStops:Rn.map(function(Ba){return Ba[0]}),evaluate:function(Ba,ei){var za=Ba.zoom;return Ml({stops:Rn,base:ce.base},xe,za).evaluate(za,ei)}}}if(Ot){var Ka=Ht==="exponential"?{name:"exponential",base:ce.base!==void 0?ce.base:1}:null;return{kind:"camera",interpolationType:Ka,interpolationFactor:Ai.interpolationFactor.bind(void 0,Ka),zoomStops:ce.stops.map(function(Ba){return Ba[0]}),evaluate:function(Ba){return we(ce,xe,Ba.zoom,De,Ze)}}}return{kind:"source",evaluate:function(Ba,ei){var za=ei&&ei.properties?ei.properties[ce.property]:void 0;return za===void 0?cu(ce.default,xe.default):we(ce,xe,za,De,Ze)}}}(this._parameters,this._specification))};function sl(_){var O=_.key,Z=_.value,ce=_.valueSpec||{},xe=_.objectElementValidators||{},we=_.style,De=_.styleSpec,Ze=[],pt=$i(Z);if(pt!=="object")return[new Ie(O,Z,"object expected, "+pt+" found")];for(var St in Z){var Ot=St.split(".")[0],Ht=ce[Ot]||ce["*"],Qt=void 0;if(xe[Ot])Qt=xe[Ot];else if(ce[Ot])Qt=Ar;else if(xe["*"])Qt=xe["*"];else{if(!ce["*"]){Ze.push(new Ie(O,Z[St],'unknown property "'+St+'"'));continue}Qt=Ar}Ze=Ze.concat(Qt({key:(O&&O+".")+St,value:Z[St],valueSpec:Ht,style:we,styleSpec:De,object:Z,objectKey:St},Z))}for(var lr in ce)xe[lr]||ce[lr].required&&ce[lr].default===void 0&&Z[lr]===void 0&&Ze.push(new Ie(O,Z,'missing required property "'+lr+'"'));return Ze}function Yo(_){var O=_.value,Z=_.valueSpec,ce=_.style,xe=_.styleSpec,we=_.key,De=_.arrayElementValidator||Ar;if($i(O)!=="array")return[new Ie(we,O,"array expected, "+$i(O)+" found")];if(Z.length&&O.length!==Z.length)return[new Ie(we,O,"array length "+Z.length+" expected, length "+O.length+" found")];if(Z["min-length"]&&O.length<Z["min-length"])return[new Ie(we,O,"array length at least "+Z["min-length"]+" expected, length "+O.length+" found")];var Ze={type:Z.value,values:Z.values};xe.$version<7&&(Ze.function=Z.function),$i(Z.value)==="object"&&(Ze=Z.value);for(var pt=[],St=0;St<O.length;St++)pt=pt.concat(De({array:O,arrayIndex:St,value:O[St],valueSpec:Ze,style:ce,styleSpec:xe,key:we+"["+St+"]"}));return pt}function Ec(_){var O=_.key,Z=_.value,ce=_.valueSpec,xe=$i(Z);return xe==="number"&&Z!=Z&&(xe="NaN"),xe!=="number"?[new Ie(O,Z,"number expected, "+xe+" found")]:"minimum"in ce&&Z<ce.minimum?[new Ie(O,Z,Z+" is less than the minimum value "+ce.minimum)]:"maximum"in ce&&Z>ce.maximum?[new Ie(O,Z,Z+" is greater than the maximum value "+ce.maximum)]:[]}function Cc(_){var O,Z,ce,xe=_.valueSpec,we=ft(_.value.type),De={},Ze=we!=="categorical"&&_.value.property===void 0,pt=!Ze,St=$i(_.value.stops)==="array"&&$i(_.value.stops[0])==="array"&&$i(_.value.stops[0][0])==="object",Ot=sl({key:_.key,value:_.value,valueSpec:_.styleSpec.function,style:_.style,styleSpec:_.styleSpec,objectElementValidators:{stops:function(lr){if(we==="identity")return[new Ie(lr.key,lr.value,'identity function may not have a "stops" property')];var Mr=[],Er=lr.value;return Mr=Mr.concat(Yo({key:lr.key,value:Er,valueSpec:lr.valueSpec,style:lr.style,styleSpec:lr.styleSpec,arrayElementValidator:Ht})),$i(Er)==="array"&&Er.length===0&&Mr.push(new Ie(lr.key,Er,"array must have at least one stop")),Mr},default:function(lr){return Ar({key:lr.key,value:lr.value,valueSpec:xe,style:lr.style,styleSpec:lr.styleSpec})}}});return we==="identity"&&Ze&&Ot.push(new Ie(_.key,_.value,'missing required property "property"')),we==="identity"||_.value.stops||Ot.push(new Ie(_.key,_.value,'missing required property "stops"')),we==="exponential"&&_.valueSpec.expression&&!Ku(_.valueSpec)&&Ot.push(new Ie(_.key,_.value,"exponential functions not supported")),_.styleSpec.$version>=8&&(pt&&!dl(_.valueSpec)?Ot.push(new Ie(_.key,_.value,"property functions not supported")):Ze&&!lc(_.valueSpec)&&Ot.push(new Ie(_.key,_.value,"zoom functions not supported"))),we!=="categorical"&&!St||_.value.property!==void 0||Ot.push(new Ie(_.key,_.value,'"property" property is required')),Ot;function Ht(lr){var Mr=[],Er=lr.value,Kr=lr.key;if($i(Er)!=="array")return[new Ie(Kr,Er,"array expected, "+$i(Er)+" found")];if(Er.length!==2)return[new Ie(Kr,Er,"array length 2 expected, length "+Er.length+" found")];if(St){if($i(Er[0])!=="object")return[new Ie(Kr,Er,"object expected, "+$i(Er[0])+" found")];if(Er[0].zoom===void 0)return[new Ie(Kr,Er,"object stop key must have zoom")];if(Er[0].value===void 0)return[new Ie(Kr,Er,"object stop key must have value")];if(ce&&ce>ft(Er[0].zoom))return[new Ie(Kr,Er[0].zoom,"stop zoom values must appear in ascending order")];ft(Er[0].zoom)!==ce&&(ce=ft(Er[0].zoom),Z=void 0,De={}),Mr=Mr.concat(sl({key:Kr+"[0]",value:Er[0],valueSpec:{zoom:{}},style:lr.style,styleSpec:lr.styleSpec,objectElementValidators:{zoom:Ec,value:Qt}}))}else Mr=Mr.concat(Qt({key:Kr+"[0]",value:Er[0],valueSpec:{},style:lr.style,styleSpec:lr.styleSpec},Er));return ol(it(Er[1]))?Mr.concat([new Ie(Kr+"[1]",Er[1],"expressions are not allowed in function stops.")]):Mr.concat(Ar({key:Kr+"[1]",value:Er[1],valueSpec:xe,style:lr.style,styleSpec:lr.styleSpec}))}function Qt(lr,Mr){var Er=$i(lr.value),Kr=ft(lr.value),Br=lr.value!==null?lr.value:Mr;if(O){if(Er!==O)return[new Ie(lr.key,Br,Er+" stop domain type must match previous stop domain type "+O)]}else O=Er;if(Er!=="number"&&Er!=="string"&&Er!=="boolean")return[new Ie(lr.key,Br,"stop domain value must be a number, string, or boolean")];if(Er!=="number"&&we!=="categorical"){var sn="number expected, "+Er+" found";return dl(xe)&&we===void 0&&(sn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ie(lr.key,Br,sn)]}return we!=="categorical"||Er!=="number"||isFinite(Kr)&&Math.floor(Kr)===Kr?we!=="categorical"&&Er==="number"&&Z!==void 0&&Kr<Z?[new Ie(lr.key,Br,"stop domain values must appear in ascending order")]:(Z=Kr,we==="categorical"&&Kr in De?[new Ie(lr.key,Br,"stop domain values must be unique")]:(De[Kr]=!0,[])):[new Ie(lr.key,Br,"integer expected, found "+Kr)]}}function ll(_){var O=(_.expressionContext==="property"?hu:ml)(it(_.value),_.valueSpec);if(O.result==="error")return O.value.map(function(ce){return new Ie(""+_.key+ce.key,_.value,ce.message)});var Z=O.value.expression||O.value._styleExpression.expression;if(_.expressionContext==="property"&&_.propertyKey==="text-font"&&!Z.outputDefined())return[new Ie(_.key,_.value,'Invalid data expression for "'+_.propertyKey+'". Output values must be contained as literals within the expression.')];if(_.expressionContext==="property"&&_.propertyType==="layout"&&!ca(Z))return[new Ie(_.key,_.value,'"feature-state" data expressions are not supported with layout properties.')];if(_.expressionContext==="filter"&&!ca(Z))return[new Ie(_.key,_.value,'"feature-state" data expressions are not supported with filters.')];if(_.expressionContext&&_.expressionContext.indexOf("cluster")===0){if(!Ta(Z,["zoom","feature-state"]))return[new Ie(_.key,_.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(_.expressionContext==="cluster-initial"&&!ka(Z))return[new Ie(_.key,_.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function pu(_){var O=_.key,Z=_.value,ce=_.valueSpec,xe=[];return Array.isArray(ce.values)?ce.values.indexOf(ft(Z))===-1&&xe.push(new Ie(O,Z,"expected one of ["+ce.values.join(", ")+"], "+JSON.stringify(Z)+" found")):Object.keys(ce.values).indexOf(ft(Z))===-1&&xe.push(new Ie(O,Z,"expected one of ["+Object.keys(ce.values).join(", ")+"], "+JSON.stringify(Z)+" found")),xe}function Uo(_){if(_===!0||_===!1)return!0;if(!Array.isArray(_)||_.length===0)return!1;switch(_[0]){case"has":return _.length>=2&&_[1]!=="$id"&&_[1]!=="$type";case"in":return _.length>=3&&(typeof _[1]!="string"||Array.isArray(_[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return _.length!==3||Array.isArray(_[1])||Array.isArray(_[2]);case"any":case"all":for(var O=0,Z=_.slice(1);O<Z.length;O+=1){var ce=Z[O];if(!Uo(ce)&&typeof ce!="boolean")return!1}return!0;default:return!0}}es.deserialize=function(_){return new es(_._parameters,_._specification)},es.serialize=function(_){return{_parameters:_._parameters,_specification:_._specification}};var Cf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function uc(_){if(_==null)return{filter:function(){return!0},needGeometry:!1};Uo(_)||(_=ul(_));var O=ml(_,Cf);if(O.result==="error")throw new Error(O.value.map(function(Z){return Z.key+": "+Z.message}).join(", "));return{filter:function(Z,ce,xe){return O.value.evaluate(Z,ce,{},xe)},needGeometry:function Z(ce){if(!Array.isArray(ce))return!1;if(ce[0]==="within")return!0;for(var xe=1;xe<ce.length;xe++)if(Z(ce[xe]))return!0;return!1}(_)}}function Is(_,O){return _<O?-1:_>O?1:0}function ul(_){if(!_)return!0;var O,Z=_[0];return _.length<=1?Z!=="any":Z==="=="?Qc(_[1],_[2],"=="):Z==="!="?nt(Qc(_[1],_[2],"==")):Z==="<"||Z===">"||Z==="<="||Z===">="?Qc(_[1],_[2],Z):Z==="any"?(O=_.slice(1),["any"].concat(O.map(ul))):Z==="all"?["all"].concat(_.slice(1).map(ul)):Z==="none"?["all"].concat(_.slice(1).map(ul).map(nt)):Z==="in"?Fu(_[1],_.slice(2)):Z==="!in"?nt(Fu(_[1],_.slice(2))):Z==="has"?ih(_[1]):Z==="!has"?nt(ih(_[1])):Z!=="within"||_}function Qc(_,O,Z){switch(_){case"$type":return["filter-type-"+Z,O];case"$id":return["filter-id-"+Z,O];default:return["filter-"+Z,_,O]}}function Fu(_,O){if(O.length===0)return!1;switch(_){case"$type":return["filter-type-in",["literal",O]];case"$id":return["filter-id-in",["literal",O]];default:return O.length>200&&!O.some(function(Z){return typeof Z!=typeof O[0]})?["filter-in-large",_,["literal",O.sort(Is)]]:["filter-in-small",_,["literal",O]]}}function ih(_){switch(_){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",_]}}function nt(_){return["!",_]}function $e(_){return Uo(it(_.value))?ll(Ye({},_,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function O(Z){var ce=Z.value,xe=Z.key;if($i(ce)!=="array")return[new Ie(xe,ce,"array expected, "+$i(ce)+" found")];var we,De=Z.styleSpec,Ze=[];if(ce.length<1)return[new Ie(xe,ce,"filter array must have at least 1 element")];switch(Ze=Ze.concat(pu({key:xe+"[0]",value:ce[0],valueSpec:De.filter_operator,style:Z.style,styleSpec:Z.styleSpec})),ft(ce[0])){case"<":case"<=":case">":case">=":ce.length>=2&&ft(ce[1])==="$type"&&Ze.push(new Ie(xe,ce,'"$type" cannot be use with operator "'+ce[0]+'"'));case"==":case"!=":ce.length!==3&&Ze.push(new Ie(xe,ce,'filter array for operator "'+ce[0]+'" must have 3 elements'));case"in":case"!in":ce.length>=2&&(we=$i(ce[1]))!=="string"&&Ze.push(new Ie(xe+"[1]",ce[1],"string expected, "+we+" found"));for(var pt=2;pt<ce.length;pt++)we=$i(ce[pt]),ft(ce[1])==="$type"?Ze=Ze.concat(pu({key:xe+"["+pt+"]",value:ce[pt],valueSpec:De.geometry_type,style:Z.style,styleSpec:Z.styleSpec})):we!=="string"&&we!=="number"&&we!=="boolean"&&Ze.push(new Ie(xe+"["+pt+"]",ce[pt],"string, number, or boolean expected, "+we+" found"));break;case"any":case"all":case"none":for(var St=1;St<ce.length;St++)Ze=Ze.concat(O({key:xe+"["+St+"]",value:ce[St],style:Z.style,styleSpec:Z.styleSpec}));break;case"has":case"!has":we=$i(ce[1]),ce.length!==2?Ze.push(new Ie(xe,ce,'filter array for "'+ce[0]+'" operator must have 2 elements')):we!=="string"&&Ze.push(new Ie(xe+"[1]",ce[1],"string expected, "+we+" found"));break;case"within":we=$i(ce[1]),ce.length!==2?Ze.push(new Ie(xe,ce,'filter array for "'+ce[0]+'" operator must have 2 elements')):we!=="object"&&Ze.push(new Ie(xe+"[1]",ce[1],"object expected, "+we+" found"))}return Ze}(_)}function gt(_,O){var Z=_.key,ce=_.style,xe=_.styleSpec,we=_.value,De=_.objectKey,Ze=xe[O+"_"+_.layerType];if(!Ze)return[];var pt=De.match(/^(.*)-transition$/);if(O==="paint"&&pt&&Ze[pt[1]]&&Ze[pt[1]].transition)return Ar({key:Z,value:we,valueSpec:xe.transition,style:ce,styleSpec:xe});var St,Ot=_.valueSpec||Ze[De];if(!Ot)return[new Ie(Z,we,'unknown property "'+De+'"')];if($i(we)==="string"&&dl(Ot)&&!Ot.tokens&&(St=/^{([^}]+)}$/.exec(we)))return[new Ie(Z,we,'"'+De+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(St[1])+" }`.")];var Ht=[];return _.layerType==="symbol"&&(De==="text-field"&&ce&&!ce.glyphs&&Ht.push(new Ie(Z,we,'use of "text-field" requires a style "glyphs" property')),De==="text-font"&&Gs(it(we))&&ft(we.type)==="identity"&&Ht.push(new Ie(Z,we,'"text-font" does not support identity functions'))),Ht.concat(Ar({key:_.key,value:we,valueSpec:Ot,style:ce,styleSpec:xe,expressionContext:"property",propertyType:O,propertyKey:De}))}function Ft(_){return gt(_,"paint")}function ht(_){return gt(_,"layout")}function Pt(_){var O=[],Z=_.value,ce=_.key,xe=_.style,we=_.styleSpec;Z.type||Z.ref||O.push(new Ie(ce,Z,'either "type" or "ref" is required'));var De,Ze=ft(Z.type),pt=ft(Z.ref);if(Z.id)for(var St=ft(Z.id),Ot=0;Ot<_.arrayIndex;Ot++){var Ht=xe.layers[Ot];ft(Ht.id)===St&&O.push(new Ie(ce,Z.id,'duplicate layer id "'+Z.id+'", previously used at line '+Ht.id.__line__))}if("ref"in Z)["type","source","source-layer","filter","layout"].forEach(function(Mr){Mr in Z&&O.push(new Ie(ce,Z[Mr],'"'+Mr+'" is prohibited for ref layers'))}),xe.layers.forEach(function(Mr){ft(Mr.id)===pt&&(De=Mr)}),De?De.ref?O.push(new Ie(ce,Z.ref,"ref cannot reference another ref layer")):Ze=ft(De.type):O.push(new Ie(ce,Z.ref,'ref layer "'+pt+'" not found'));else if(Ze!=="background")if(Z.source){var Qt=xe.sources&&xe.sources[Z.source],lr=Qt&&ft(Qt.type);Qt?lr==="vector"&&Ze==="raster"?O.push(new Ie(ce,Z.source,'layer "'+Z.id+'" requires a raster source')):lr==="raster"&&Ze!=="raster"?O.push(new Ie(ce,Z.source,'layer "'+Z.id+'" requires a vector source')):lr!=="vector"||Z["source-layer"]?lr==="raster-dem"&&Ze!=="hillshade"?O.push(new Ie(ce,Z.source,"raster-dem source can only be used with layer type 'hillshade'.")):Ze!=="line"||!Z.paint||!Z.paint["line-gradient"]||lr==="geojson"&&Qt.lineMetrics||O.push(new Ie(ce,Z,'layer "'+Z.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):O.push(new Ie(ce,Z,'layer "'+Z.id+'" must specify a "source-layer"')):O.push(new Ie(ce,Z.source,'source "'+Z.source+'" not found'))}else O.push(new Ie(ce,Z,'missing required property "source"'));return O=O.concat(sl({key:ce,value:Z,valueSpec:we.layer,style:_.style,styleSpec:_.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ar({key:ce+".type",value:Z.type,valueSpec:we.layer.type,style:_.style,styleSpec:_.styleSpec,object:Z,objectKey:"type"})},filter:$e,layout:function(Mr){return sl({layer:Z,key:Mr.key,value:Mr.value,style:Mr.style,styleSpec:Mr.styleSpec,objectElementValidators:{"*":function(Er){return ht(Ye({layerType:Ze},Er))}}})},paint:function(Mr){return sl({layer:Z,key:Mr.key,value:Mr.value,style:Mr.style,styleSpec:Mr.styleSpec,objectElementValidators:{"*":function(Er){return Ft(Ye({layerType:Ze},Er))}}})}}}))}function Et(_){var O=_.value,Z=_.key,ce=$i(O);return ce!=="string"?[new Ie(Z,O,"string expected, "+ce+" found")]:[]}var Jt={promoteId:function(_){var O=_.key,Z=_.value;if($i(Z)==="string")return Et({key:O,value:Z});var ce=[];for(var xe in Z)ce.push.apply(ce,Et({key:O+"."+xe,value:Z[xe]}));return ce}};function ur(_){var O=_.value,Z=_.key,ce=_.styleSpec,xe=_.style;if(!O.type)return[new Ie(Z,O,'"type" is required')];var we,De=ft(O.type);switch(De){case"vector":case"raster":case"raster-dem":return sl({key:Z,value:O,valueSpec:ce["source_"+De.replace("-","_")],style:_.style,styleSpec:ce,objectElementValidators:Jt});case"geojson":if(we=sl({key:Z,value:O,valueSpec:ce.source_geojson,style:xe,styleSpec:ce,objectElementValidators:Jt}),O.cluster)for(var Ze in O.clusterProperties){var pt=O.clusterProperties[Ze],St=pt[0],Ot=typeof St=="string"?[St,["accumulated"],["get",Ze]]:St;we.push.apply(we,ll({key:Z+"."+Ze+".map",value:pt[1],expressionContext:"cluster-map"})),we.push.apply(we,ll({key:Z+"."+Ze+".reduce",value:Ot,expressionContext:"cluster-reduce"}))}return we;case"video":return sl({key:Z,value:O,valueSpec:ce.source_video,style:xe,styleSpec:ce});case"image":return sl({key:Z,value:O,valueSpec:ce.source_image,style:xe,styleSpec:ce});case"canvas":return[new Ie(Z,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return pu({key:Z+".type",value:O.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:xe,styleSpec:ce})}}function ar(_){var O=_.value,Z=_.styleSpec,ce=Z.light,xe=_.style,we=[],De=$i(O);if(O===void 0)return we;if(De!=="object")return we.concat([new Ie("light",O,"object expected, "+De+" found")]);for(var Ze in O){var pt=Ze.match(/^(.*)-transition$/);we=we.concat(pt&&ce[pt[1]]&&ce[pt[1]].transition?Ar({key:Ze,value:O[Ze],valueSpec:Z.transition,style:xe,styleSpec:Z}):ce[Ze]?Ar({key:Ze,value:O[Ze],valueSpec:ce[Ze],style:xe,styleSpec:Z}):[new Ie(Ze,O[Ze],'unknown property "'+Ze+'"')])}return we}var xr={"*":function(){return[]},array:Yo,boolean:function(_){var O=_.value,Z=_.key,ce=$i(O);return ce!=="boolean"?[new Ie(Z,O,"boolean expected, "+ce+" found")]:[]},number:Ec,color:function(_){var O=_.key,Z=_.value,ce=$i(Z);return ce!=="string"?[new Ie(O,Z,"color expected, "+ce+" found")]:Zt(Z)===null?[new Ie(O,Z,'color expected, "'+Z+'" found')]:[]},constants:He,enum:pu,filter:$e,function:Cc,layer:Pt,object:sl,source:ur,light:ar,string:Et,formatted:function(_){return Et(_).length===0?[]:ll(_)},resolvedImage:function(_){return Et(_).length===0?[]:ll(_)}};function Ar(_){var O=_.value,Z=_.valueSpec,ce=_.styleSpec;return Z.expression&&Gs(ft(O))?Cc(_):Z.expression&&ol(it(O))?ll(_):Z.type&&xr[Z.type]?xr[Z.type](_):sl(Ye({},_,{valueSpec:Z.type?ce[Z.type]:Z}))}function mn(_){var O=_.value,Z=_.key,ce=Et(_);return ce.length||(O.indexOf("{fontstack}")===-1&&ce.push(new Ie(Z,O,'"glyphs" url must include a "{fontstack}" token')),O.indexOf("{range}")===-1&&ce.push(new Ie(Z,O,'"glyphs" url must include a "{range}" token'))),ce}function Zr(_,O){O===void 0&&(O=ke);var Z=[];return Z=Z.concat(Ar({key:"",value:_,valueSpec:O.$root,styleSpec:O,style:_,objectElementValidators:{glyphs:mn,"*":function(){return[]}}})),_.constants&&(Z=Z.concat(He({key:"constants",value:_.constants,style:_,styleSpec:O}))),bn(Z)}function bn(_){return[].concat(_).sort(function(O,Z){return O.line-Z.line})}function Qn(_){return function(){for(var O=[],Z=arguments.length;Z--;)O[Z]=arguments[Z];return bn(_.apply(this,O))}}Zr.source=Qn(ur),Zr.light=Qn(ar),Zr.layer=Qn(Pt),Zr.filter=Qn($e),Zr.paintProperty=Qn(Ft),Zr.layoutProperty=Qn(ht);var Cn=Zr,Hn=Cn.light,ra=Cn.paintProperty,qn=Cn.layoutProperty;function Un(_,O){var Z=!1;if(O&&O.length)for(var ce=0,xe=O;ce<xe.length;ce+=1)_.fire(new Ue(new Error(xe[ce].message))),Z=!0;return Z}var Fa=ai;function ai(_,O,Z){var ce=this.cells=[];if(_ instanceof ArrayBuffer){this.arrayBuffer=_;var xe=new Int32Array(this.arrayBuffer);_=xe[0],this.d=(O=xe[1])+2*(Z=xe[2]);for(var we=0;we<this.d*this.d;we++){var De=xe[3+we],Ze=xe[3+we+1];ce.push(De===Ze?null:xe.subarray(De,Ze))}var pt=xe[3+ce.length+1];this.keys=xe.subarray(xe[3+ce.length],pt),this.bboxes=xe.subarray(pt),this.insert=this._insertReadonly}else{this.d=O+2*Z;for(var St=0;St<this.d*this.d;St++)ce.push([]);this.keys=[],this.bboxes=[]}this.n=O,this.extent=_,this.padding=Z,this.scale=O/_,this.uid=0;var Ot=Z/O*_;this.min=-Ot,this.max=_+Ot}ai.prototype.insert=function(_,O,Z,ce,xe){this._forEachCell(O,Z,ce,xe,this._insertCell,this.uid++),this.keys.push(_),this.bboxes.push(O),this.bboxes.push(Z),this.bboxes.push(ce),this.bboxes.push(xe)},ai.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ai.prototype._insertCell=function(_,O,Z,ce,xe,we){this.cells[xe].push(we)},ai.prototype.query=function(_,O,Z,ce,xe){var we=this.min,De=this.max;if(_<=we&&O<=we&&De<=Z&&De<=ce&&!xe)return Array.prototype.slice.call(this.keys);var Ze=[];return this._forEachCell(_,O,Z,ce,this._queryCell,Ze,{},xe),Ze},ai.prototype._queryCell=function(_,O,Z,ce,xe,we,De,Ze){var pt=this.cells[xe];if(pt!==null)for(var St=this.keys,Ot=this.bboxes,Ht=0;Ht<pt.length;Ht++){var Qt=pt[Ht];if(De[Qt]===void 0){var lr=4*Qt;(Ze?Ze(Ot[lr+0],Ot[lr+1],Ot[lr+2],Ot[lr+3]):_<=Ot[lr+2]&&O<=Ot[lr+3]&&Z>=Ot[lr+0]&&ce>=Ot[lr+1])?(De[Qt]=!0,we.push(St[Qt])):De[Qt]=!1}}},ai.prototype._forEachCell=function(_,O,Z,ce,xe,we,De,Ze){for(var pt=this._convertToCellCoord(_),St=this._convertToCellCoord(O),Ot=this._convertToCellCoord(Z),Ht=this._convertToCellCoord(ce),Qt=pt;Qt<=Ot;Qt++)for(var lr=St;lr<=Ht;lr++){var Mr=this.d*lr+Qt;if((!Ze||Ze(this._convertFromCellCoord(Qt),this._convertFromCellCoord(lr),this._convertFromCellCoord(Qt+1),this._convertFromCellCoord(lr+1)))&&xe.call(this,_,O,Z,ce,Mr,we,De,Ze))return}},ai.prototype._convertFromCellCoord=function(_){return(_-this.padding)/this.scale},ai.prototype._convertToCellCoord=function(_){return Math.max(0,Math.min(this.d-1,Math.floor(_*this.scale)+this.padding))},ai.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var _=this.cells,O=3+this.cells.length+1+1,Z=0,ce=0;ce<this.cells.length;ce++)Z+=this.cells[ce].length;var xe=new Int32Array(O+Z+this.keys.length+this.bboxes.length);xe[0]=this.extent,xe[1]=this.n,xe[2]=this.padding;for(var we=O,De=0;De<_.length;De++){var Ze=_[De];xe[3+De]=we,xe.set(Ze,we),we+=Ze.length}return xe[3+_.length]=we,xe.set(this.keys,we),xe[3+_.length+1]=we+=this.keys.length,xe.set(this.bboxes,we),we+=this.bboxes.length,xe.buffer};var _a=self.ImageData,Na=self.ImageBitmap,wi={};function ya(_,O,Z){Z===void 0&&(Z={}),Object.defineProperty(O,"_classRegistryKey",{value:_,writeable:!1}),wi[_]={klass:O,omit:Z.omit||[],shallow:Z.shallow||[]}}for(var va in ya("Object",Object),Fa.serialize=function(_,O){var Z=_.toArrayBuffer();return O&&O.push(Z),{buffer:Z}},Fa.deserialize=function(_){return new Fa(_.buffer)},ya("Grid",Fa),ya("Color",_r),ya("Error",Error),ya("ResolvedImage",Mn),ya("StylePropertyFunction",es),ya("StyleExpression",kl,{omit:["_evaluator"]}),ya("ZoomDependentExpression",Kl),ya("ZoomConstantExpression",gs),ya("CompoundExpression",Gt,{omit:["_evaluate"]}),Mu)Mu[va]._classRegistryKey||ya("Expression_"+va,Mu[va]);function Ia(_){return _&&typeof ArrayBuffer<"u"&&(_ instanceof ArrayBuffer||_.constructor&&_.constructor.name==="ArrayBuffer")}function ui(_){return Na&&_ instanceof Na}function ki(_,O){if(_==null||typeof _=="boolean"||typeof _=="number"||typeof _=="string"||_ instanceof Boolean||_ instanceof Number||_ instanceof String||_ instanceof Date||_ instanceof RegExp)return _;if(Ia(_)||ui(_))return O&&O.push(_),_;if(ArrayBuffer.isView(_)){var Z=_;return O&&O.push(Z.buffer),Z}if(_ instanceof _a)return O&&O.push(_.data.buffer),_;if(Array.isArray(_)){for(var ce=[],xe=0,we=_;xe<we.length;xe+=1)ce.push(ki(we[xe],O));return ce}if(typeof _=="object"){var De=_.constructor,Ze=De._classRegistryKey;if(!Ze)throw new Error("can't serialize object of unregistered class");var pt=De.serialize?De.serialize(_,O):{};if(!De.serialize){for(var St in _)if(_.hasOwnProperty(St)&&!(wi[Ze].omit.indexOf(St)>=0)){var Ot=_[St];pt[St]=wi[Ze].shallow.indexOf(St)>=0?Ot:ki(Ot,O)}_ instanceof Error&&(pt.message=_.message)}if(pt.$name)throw new Error("$name property is reserved for worker serialization logic.");return Ze!=="Object"&&(pt.$name=Ze),pt}throw new Error("can't serialize object of type "+typeof _)}function vi(_){if(_==null||typeof _=="boolean"||typeof _=="number"||typeof _=="string"||_ instanceof Boolean||_ instanceof Number||_ instanceof String||_ instanceof Date||_ instanceof RegExp||Ia(_)||ui(_)||ArrayBuffer.isView(_)||_ instanceof _a)return _;if(Array.isArray(_))return _.map(vi);if(typeof _=="object"){var O=_.$name||"Object",Z=wi[O].klass;if(!Z)throw new Error("can't deserialize unregistered class "+O);if(Z.deserialize)return Z.deserialize(_);for(var ce=Object.create(Z.prototype),xe=0,we=Object.keys(_);xe<we.length;xe+=1){var De=we[xe];if(De!=="$name"){var Ze=_[De];ce[De]=wi[O].shallow.indexOf(De)>=0?Ze:vi(Ze)}}return ce}throw new Error("can't deserialize object of type "+typeof _)}var Ci=function(){this.first=!0};Ci.prototype.update=function(_,O){var Z=Math.floor(_);return this.first?(this.first=!1,this.lastIntegerZoom=Z,this.lastIntegerZoomTime=0,this.lastZoom=_,this.lastFloorZoom=Z,!0):(this.lastFloorZoom>Z?(this.lastIntegerZoom=Z+1,this.lastIntegerZoomTime=O):this.lastFloorZoom<Z&&(this.lastIntegerZoom=Z,this.lastIntegerZoomTime=O),_!==this.lastZoom&&(this.lastZoom=_,this.lastFloorZoom=Z,!0))};var Xn={"Latin-1 Supplement":function(_){return _>=128&&_<=255},Arabic:function(_){return _>=1536&&_<=1791},"Arabic Supplement":function(_){return _>=1872&&_<=1919},"Arabic Extended-A":function(_){return _>=2208&&_<=2303},"Hangul Jamo":function(_){return _>=4352&&_<=4607},"Unified Canadian Aboriginal Syllabics":function(_){return _>=5120&&_<=5759},Khmer:function(_){return _>=6016&&_<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(_){return _>=6320&&_<=6399},"General Punctuation":function(_){return _>=8192&&_<=8303},"Letterlike Symbols":function(_){return _>=8448&&_<=8527},"Number Forms":function(_){return _>=8528&&_<=8591},"Miscellaneous Technical":function(_){return _>=8960&&_<=9215},"Control Pictures":function(_){return _>=9216&&_<=9279},"Optical Character Recognition":function(_){return _>=9280&&_<=9311},"Enclosed Alphanumerics":function(_){return _>=9312&&_<=9471},"Geometric Shapes":function(_){return _>=9632&&_<=9727},"Miscellaneous Symbols":function(_){return _>=9728&&_<=9983},"Miscellaneous Symbols and Arrows":function(_){return _>=11008&&_<=11263},"CJK Radicals Supplement":function(_){return _>=11904&&_<=12031},"Kangxi Radicals":function(_){return _>=12032&&_<=12255},"Ideographic Description Characters":function(_){return _>=12272&&_<=12287},"CJK Symbols and Punctuation":function(_){return _>=12288&&_<=12351},Hiragana:function(_){return _>=12352&&_<=12447},Katakana:function(_){return _>=12448&&_<=12543},Bopomofo:function(_){return _>=12544&&_<=12591},"Hangul Compatibility Jamo":function(_){return _>=12592&&_<=12687},Kanbun:function(_){return _>=12688&&_<=12703},"Bopomofo Extended":function(_){return _>=12704&&_<=12735},"CJK Strokes":function(_){return _>=12736&&_<=12783},"Katakana Phonetic Extensions":function(_){return _>=12784&&_<=12799},"Enclosed CJK Letters and Months":function(_){return _>=12800&&_<=13055},"CJK Compatibility":function(_){return _>=13056&&_<=13311},"CJK Unified Ideographs Extension A":function(_){return _>=13312&&_<=19903},"Yijing Hexagram Symbols":function(_){return _>=19904&&_<=19967},"CJK Unified Ideographs":function(_){return _>=19968&&_<=40959},"Yi Syllables":function(_){return _>=40960&&_<=42127},"Yi Radicals":function(_){return _>=42128&&_<=42191},"Hangul Jamo Extended-A":function(_){return _>=43360&&_<=43391},"Hangul Syllables":function(_){return _>=44032&&_<=55215},"Hangul Jamo Extended-B":function(_){return _>=55216&&_<=55295},"Private Use Area":function(_){return _>=57344&&_<=63743},"CJK Compatibility Ideographs":function(_){return _>=63744&&_<=64255},"Arabic Presentation Forms-A":function(_){return _>=64336&&_<=65023},"Vertical Forms":function(_){return _>=65040&&_<=65055},"CJK Compatibility Forms":function(_){return _>=65072&&_<=65103},"Small Form Variants":function(_){return _>=65104&&_<=65135},"Arabic Presentation Forms-B":function(_){return _>=65136&&_<=65279},"Halfwidth and Fullwidth Forms":function(_){return _>=65280&&_<=65519}};function oi(_){for(var O=0,Z=_;O<Z.length;O+=1)if(Ti(Z[O].charCodeAt(0)))return!0;return!1}function Ti(_){return!(_!==746&&_!==747&&(_<4352||!(Xn["Bopomofo Extended"](_)||Xn.Bopomofo(_)||Xn["CJK Compatibility Forms"](_)&&!(_>=65097&&_<=65103)||Xn["CJK Compatibility Ideographs"](_)||Xn["CJK Compatibility"](_)||Xn["CJK Radicals Supplement"](_)||Xn["CJK Strokes"](_)||!(!Xn["CJK Symbols and Punctuation"](_)||_>=12296&&_<=12305||_>=12308&&_<=12319||_===12336)||Xn["CJK Unified Ideographs Extension A"](_)||Xn["CJK Unified Ideographs"](_)||Xn["Enclosed CJK Letters and Months"](_)||Xn["Hangul Compatibility Jamo"](_)||Xn["Hangul Jamo Extended-A"](_)||Xn["Hangul Jamo Extended-B"](_)||Xn["Hangul Jamo"](_)||Xn["Hangul Syllables"](_)||Xn.Hiragana(_)||Xn["Ideographic Description Characters"](_)||Xn.Kanbun(_)||Xn["Kangxi Radicals"](_)||Xn["Katakana Phonetic Extensions"](_)||Xn.Katakana(_)&&_!==12540||!(!Xn["Halfwidth and Fullwidth Forms"](_)||_===65288||_===65289||_===65293||_>=65306&&_<=65310||_===65339||_===65341||_===65343||_>=65371&&_<=65503||_===65507||_>=65512&&_<=65519)||!(!Xn["Small Form Variants"](_)||_>=65112&&_<=65118||_>=65123&&_<=65126)||Xn["Unified Canadian Aboriginal Syllabics"](_)||Xn["Unified Canadian Aboriginal Syllabics Extended"](_)||Xn["Vertical Forms"](_)||Xn["Yijing Hexagram Symbols"](_)||Xn["Yi Syllables"](_)||Xn["Yi Radicals"](_))))}function Sa(_){return!(Ti(_)||function(O){return!!(Xn["Latin-1 Supplement"](O)&&(O===167||O===169||O===174||O===177||O===188||O===189||O===190||O===215||O===247)||Xn["General Punctuation"](O)&&(O===8214||O===8224||O===8225||O===8240||O===8241||O===8251||O===8252||O===8258||O===8263||O===8264||O===8265||O===8273)||Xn["Letterlike Symbols"](O)||Xn["Number Forms"](O)||Xn["Miscellaneous Technical"](O)&&(O>=8960&&O<=8967||O>=8972&&O<=8991||O>=8996&&O<=9e3||O===9003||O>=9085&&O<=9114||O>=9150&&O<=9165||O===9167||O>=9169&&O<=9179||O>=9186&&O<=9215)||Xn["Control Pictures"](O)&&O!==9251||Xn["Optical Character Recognition"](O)||Xn["Enclosed Alphanumerics"](O)||Xn["Geometric Shapes"](O)||Xn["Miscellaneous Symbols"](O)&&!(O>=9754&&O<=9759)||Xn["Miscellaneous Symbols and Arrows"](O)&&(O>=11026&&O<=11055||O>=11088&&O<=11097||O>=11192&&O<=11243)||Xn["CJK Symbols and Punctuation"](O)||Xn.Katakana(O)||Xn["Private Use Area"](O)||Xn["CJK Compatibility Forms"](O)||Xn["Small Form Variants"](O)||Xn["Halfwidth and Fullwidth Forms"](O)||O===8734||O===8756||O===8757||O>=9984&&O<=10087||O>=10102&&O<=10131||O===65532||O===65533)}(_))}function _o(_){return _>=1424&&_<=2303||Xn["Arabic Presentation Forms-A"](_)||Xn["Arabic Presentation Forms-B"](_)}function Zi(_,O){return!(!O&&_o(_)||_>=2304&&_<=3583||_>=3840&&_<=4255||Xn.Khmer(_))}function qi(_){for(var O=0,Z=_;O<Z.length;O+=1)if(_o(Z[O].charCodeAt(0)))return!0;return!1}var zs=null,Gi="unavailable",Ni=null,yo=function(_){_&&typeof _=="string"&&_.indexOf("NetworkError")>-1&&(Gi="error"),zs&&zs(_)};function ts(){ls.fire(new Le("pluginStateChange",{pluginStatus:Gi,pluginURL:Ni}))}var ls=new et,Ss=function(){return Gi},Ws=function(){if(Gi!=="deferred"||!Ni)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Gi="loading",ts(),Ni&&Lt({url:Ni},function(_){_?yo(_):(Gi="loaded",ts())})},so={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Gi==="loaded"||so.applyArabicShaping!=null},isLoading:function(){return Gi==="loading"},setState:function(_){Gi=_.pluginStatus,Ni=_.pluginURL},isParsed:function(){return so.applyArabicShaping!=null&&so.processBidirectionalText!=null&&so.processStyledBidirectionalText!=null},getPluginURL:function(){return Ni}},Xa=function(_,O){this.zoom=_,O?(this.now=O.now,this.fadeDuration=O.fadeDuration,this.zoomHistory=O.zoomHistory,this.transition=O.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ci,this.transition={})};Xa.prototype.isSupportedScript=function(_){return function(O,Z){for(var ce=0,xe=O;ce<xe.length;ce+=1)if(!Zi(xe[ce].charCodeAt(0),Z))return!1;return!0}(_,so.isLoaded())},Xa.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Xa.prototype.getCrossfadeParameters=function(){var _=this.zoom,O=_-Math.floor(_),Z=this.crossFadingFactor();return _>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:O+(1-O)*Z}:{fromScale:.5,toScale:1,t:1-(1-Z)*O}};var hi=function(_,O){this.property=_,this.value=O,this.expression=function(Z,ce){if(Gs(Z))return new es(Z,ce);if(ol(Z)){var xe=hu(Z,ce);if(xe.result==="error")throw new Error(xe.value.map(function(De){return De.key+": "+De.message}).join(", "));return xe.value}var we=Z;return typeof Z=="string"&&ce.type==="color"&&(we=_r.parse(Z)),{kind:"constant",evaluate:function(){return we}}}(O===void 0?_.specification.default:O,_.specification)};hi.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},hi.prototype.possiblyEvaluate=function(_,O,Z){return this.property.possiblyEvaluate(this,_,O,Z)};var Oo=function(_){this.property=_,this.value=new hi(_,void 0)};Oo.prototype.transitioned=function(_,O){return new Eo(this.property,this.value,O,g({},_.transition,this.transition),_.now)},Oo.prototype.untransitioned=function(){return new Eo(this.property,this.value,null,{},0)};var lo=function(_){this._properties=_,this._values=Object.create(_.defaultTransitionablePropertyValues)};lo.prototype.getValue=function(_){return L(this._values[_].value.value)},lo.prototype.setValue=function(_,O){this._values.hasOwnProperty(_)||(this._values[_]=new Oo(this._values[_].property)),this._values[_].value=new hi(this._values[_].property,O===null?void 0:L(O))},lo.prototype.getTransition=function(_){return L(this._values[_].transition)},lo.prototype.setTransition=function(_,O){this._values.hasOwnProperty(_)||(this._values[_]=new Oo(this._values[_].property)),this._values[_].transition=L(O)||void 0},lo.prototype.serialize=function(){for(var _={},O=0,Z=Object.keys(this._values);O<Z.length;O+=1){var ce=Z[O],xe=this.getValue(ce);xe!==void 0&&(_[ce]=xe);var we=this.getTransition(ce);we!==void 0&&(_[ce+"-transition"]=we)}return _},lo.prototype.transitioned=function(_,O){for(var Z=new Ki(this._properties),ce=0,xe=Object.keys(this._values);ce<xe.length;ce+=1){var we=xe[ce];Z._values[we]=this._values[we].transitioned(_,O._values[we])}return Z},lo.prototype.untransitioned=function(){for(var _=new Ki(this._properties),O=0,Z=Object.keys(this._values);O<Z.length;O+=1){var ce=Z[O];_._values[ce]=this._values[ce].untransitioned()}return _};var Eo=function(_,O,Z,ce,xe){this.property=_,this.value=O,this.begin=xe+ce.delay||0,this.end=this.begin+ce.duration||0,_.specification.transition&&(ce.delay||ce.duration)&&(this.prior=Z)};Eo.prototype.possiblyEvaluate=function(_,O,Z){var ce=_.now||0,xe=this.value.possiblyEvaluate(_,O,Z),we=this.prior;if(we){if(ce>this.end)return this.prior=null,xe;if(this.value.isDataDriven())return this.prior=null,xe;if(ce<this.begin)return we.possiblyEvaluate(_,O,Z);var De=(ce-this.begin)/(this.end-this.begin);return this.property.interpolate(we.possiblyEvaluate(_,O,Z),xe,function(Ze){if(Ze<=0)return 0;if(Ze>=1)return 1;var pt=Ze*Ze,St=pt*Ze;return 4*(Ze<.5?St:3*(Ze-pt)+St-.75)}(De))}return xe};var Ki=function(_){this._properties=_,this._values=Object.create(_.defaultTransitioningPropertyValues)};Ki.prototype.possiblyEvaluate=function(_,O,Z){for(var ce=new xo(this._properties),xe=0,we=Object.keys(this._values);xe<we.length;xe+=1){var De=we[xe];ce._values[De]=this._values[De].possiblyEvaluate(_,O,Z)}return ce},Ki.prototype.hasTransition=function(){for(var _=0,O=Object.keys(this._values);_<O.length;_+=1)if(this._values[O[_]].prior)return!0;return!1};var si=function(_){this._properties=_,this._values=Object.create(_.defaultPropertyValues)};si.prototype.getValue=function(_){return L(this._values[_].value)},si.prototype.setValue=function(_,O){this._values[_]=new hi(this._values[_].property,O===null?void 0:L(O))},si.prototype.serialize=function(){for(var _={},O=0,Z=Object.keys(this._values);O<Z.length;O+=1){var ce=Z[O],xe=this.getValue(ce);xe!==void 0&&(_[ce]=xe)}return _},si.prototype.possiblyEvaluate=function(_,O,Z){for(var ce=new xo(this._properties),xe=0,we=Object.keys(this._values);xe<we.length;xe+=1){var De=we[xe];ce._values[De]=this._values[De].possiblyEvaluate(_,O,Z)}return ce};var eo=function(_,O,Z){this.property=_,this.value=O,this.parameters=Z};eo.prototype.isConstant=function(){return this.value.kind==="constant"},eo.prototype.constantOr=function(_){return this.value.kind==="constant"?this.value.value:_},eo.prototype.evaluate=function(_,O,Z,ce){return this.property.evaluate(this.value,this.parameters,_,O,Z,ce)};var xo=function(_){this._properties=_,this._values=Object.create(_.defaultPossiblyEvaluatedValues)};xo.prototype.get=function(_){return this._values[_]};var Oa=function(_){this.specification=_};Oa.prototype.possiblyEvaluate=function(_,O){return _.expression.evaluate(O)},Oa.prototype.interpolate=function(_,O,Z){var ce=un[this.specification.type];return ce?ce(_,O,Z):_};var Da=function(_,O){this.specification=_,this.overrides=O};Da.prototype.possiblyEvaluate=function(_,O,Z,ce){return new eo(this,_.expression.kind==="constant"||_.expression.kind==="camera"?{kind:"constant",value:_.expression.evaluate(O,null,{},Z,ce)}:_.expression,O)},Da.prototype.interpolate=function(_,O,Z){if(_.value.kind!=="constant"||O.value.kind!=="constant")return _;if(_.value.value===void 0||O.value.value===void 0)return new eo(this,{kind:"constant",value:void 0},_.parameters);var ce=un[this.specification.type];return ce?new eo(this,{kind:"constant",value:ce(_.value.value,O.value.value,Z)},_.parameters):_},Da.prototype.evaluate=function(_,O,Z,ce,xe,we){return _.kind==="constant"?_.value:_.evaluate(O,Z,ce,xe,we)};var Za=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.possiblyEvaluate=function(Z,ce,xe,we){if(Z.value===void 0)return new eo(this,{kind:"constant",value:void 0},ce);if(Z.expression.kind==="constant"){var De=Z.expression.evaluate(ce,null,{},xe,we),Ze=Z.property.specification.type==="resolvedImage"&&typeof De!="string"?De.name:De,pt=this._calculate(Ze,Ze,Ze,ce);return new eo(this,{kind:"constant",value:pt},ce)}if(Z.expression.kind==="camera"){var St=this._calculate(Z.expression.evaluate({zoom:ce.zoom-1}),Z.expression.evaluate({zoom:ce.zoom}),Z.expression.evaluate({zoom:ce.zoom+1}),ce);return new eo(this,{kind:"constant",value:St},ce)}return new eo(this,Z.expression,ce)},O.prototype.evaluate=function(Z,ce,xe,we,De,Ze){if(Z.kind==="source"){var pt=Z.evaluate(ce,xe,we,De,Ze);return this._calculate(pt,pt,pt,ce)}return Z.kind==="composite"?this._calculate(Z.evaluate({zoom:Math.floor(ce.zoom)-1},xe,we),Z.evaluate({zoom:Math.floor(ce.zoom)},xe,we),Z.evaluate({zoom:Math.floor(ce.zoom)+1},xe,we),ce):Z.value},O.prototype._calculate=function(Z,ce,xe,we){return we.zoom>we.zoomHistory.lastIntegerZoom?{from:Z,to:ce}:{from:xe,to:ce}},O.prototype.interpolate=function(Z){return Z},O}(Da),aa=function(_){this.specification=_};aa.prototype.possiblyEvaluate=function(_,O,Z,ce){if(_.value!==void 0){if(_.expression.kind==="constant"){var xe=_.expression.evaluate(O,null,{},Z,ce);return this._calculate(xe,xe,xe,O)}return this._calculate(_.expression.evaluate(new Xa(Math.floor(O.zoom-1),O)),_.expression.evaluate(new Xa(Math.floor(O.zoom),O)),_.expression.evaluate(new Xa(Math.floor(O.zoom+1),O)),O)}},aa.prototype._calculate=function(_,O,Z,ce){return ce.zoom>ce.zoomHistory.lastIntegerZoom?{from:_,to:O}:{from:Z,to:O}},aa.prototype.interpolate=function(_){return _};var Ua=function(_){this.specification=_};Ua.prototype.possiblyEvaluate=function(_,O,Z,ce){return!!_.expression.evaluate(O,null,{},Z,ce)},Ua.prototype.interpolate=function(){return!1};var mi=function(_){for(var O in this.properties=_,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],_){var Z=_[O];Z.specification.overridable&&this.overridableProperties.push(O);var ce=this.defaultPropertyValues[O]=new hi(Z,void 0),xe=this.defaultTransitionablePropertyValues[O]=new Oo(Z);this.defaultTransitioningPropertyValues[O]=xe.untransitioned(),this.defaultPossiblyEvaluatedValues[O]=ce.possiblyEvaluate({})}};ya("DataDrivenProperty",Da),ya("DataConstantProperty",Oa),ya("CrossFadedDataDrivenProperty",Za),ya("CrossFadedProperty",aa),ya("ColorRampProperty",Ua);var pi=function(_){function O(Z,ce){if(_.call(this),this.id=Z.id,this.type=Z.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},Z.type!=="custom"&&(this.metadata=(Z=Z).metadata,this.minzoom=Z.minzoom,this.maxzoom=Z.maxzoom,Z.type!=="background"&&(this.source=Z.source,this.sourceLayer=Z["source-layer"],this.filter=Z.filter),ce.layout&&(this._unevaluatedLayout=new si(ce.layout)),ce.paint)){for(var xe in this._transitionablePaint=new lo(ce.paint),Z.paint)this.setPaintProperty(xe,Z.paint[xe],{validate:!1});for(var we in Z.layout)this.setLayoutProperty(we,Z.layout[we],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new xo(ce.paint)}}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},O.prototype.getLayoutProperty=function(Z){return Z==="visibility"?this.visibility:this._unevaluatedLayout.getValue(Z)},O.prototype.setLayoutProperty=function(Z,ce,xe){xe===void 0&&(xe={}),ce!=null&&this._validate(qn,"layers."+this.id+".layout."+Z,Z,ce,xe)||(Z!=="visibility"?this._unevaluatedLayout.setValue(Z,ce):this.visibility=ce)},O.prototype.getPaintProperty=function(Z){return T(Z,"-transition")?this._transitionablePaint.getTransition(Z.slice(0,-11)):this._transitionablePaint.getValue(Z)},O.prototype.setPaintProperty=function(Z,ce,xe){if(xe===void 0&&(xe={}),ce!=null&&this._validate(ra,"layers."+this.id+".paint."+Z,Z,ce,xe))return!1;if(T(Z,"-transition"))return this._transitionablePaint.setTransition(Z.slice(0,-11),ce||void 0),!1;var we=this._transitionablePaint._values[Z],De=we.property.specification["property-type"]==="cross-faded-data-driven",Ze=we.value.isDataDriven(),pt=we.value;this._transitionablePaint.setValue(Z,ce),this._handleSpecialPaintPropertyUpdate(Z);var St=this._transitionablePaint._values[Z].value;return St.isDataDriven()||Ze||De||this._handleOverridablePaintPropertyUpdate(Z,pt,St)},O.prototype._handleSpecialPaintPropertyUpdate=function(Z){},O.prototype._handleOverridablePaintPropertyUpdate=function(Z,ce,xe){return!1},O.prototype.isHidden=function(Z){return!!(this.minzoom&&Z<this.minzoom)||!!(this.maxzoom&&Z>=this.maxzoom)||this.visibility==="none"},O.prototype.updateTransitions=function(Z){this._transitioningPaint=this._transitionablePaint.transitioned(Z,this._transitioningPaint)},O.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},O.prototype.recalculate=function(Z,ce){Z.getCrossfadeParameters&&(this._crossfadeParameters=Z.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Z,void 0,ce)),this.paint=this._transitioningPaint.possiblyEvaluate(Z,void 0,ce)},O.prototype.serialize=function(){var Z={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Z.layout=Z.layout||{},Z.layout.visibility=this.visibility),P(Z,function(ce,xe){return!(ce===void 0||xe==="layout"&&!Object.keys(ce).length||xe==="paint"&&!Object.keys(ce).length)})},O.prototype._validate=function(Z,ce,xe,we,De){return De===void 0&&(De={}),(!De||De.validate!==!1)&&Un(this,Z.call(Cn,{key:ce,layerType:this.type,objectKey:xe,value:we,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))},O.prototype.is3D=function(){return!1},O.prototype.isTileClipped=function(){return!1},O.prototype.hasOffscreenPass=function(){return!1},O.prototype.resize=function(){},O.prototype.isStateDependent=function(){for(var Z in this.paint._values){var ce=this.paint.get(Z);if(ce instanceof eo&&dl(ce.property.specification)&&(ce.value.kind==="source"||ce.value.kind==="composite")&&ce.value.isStateDependent)return!0}return!1},O}(et),wo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Xo=function(_,O){this._structArray=_,this._pos1=O*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ji=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Ui(_,O){O===void 0&&(O=1);var Z=0,ce=0;return{members:_.map(function(xe){var we=wo[xe.type].BYTES_PER_ELEMENT,De=Z=ps(Z,Math.max(O,we)),Ze=xe.components||1;return ce=Math.max(ce,we),Z+=we*Ze,{name:xe.name,type:xe.type,components:Ze,offset:De}}),size:ps(Z,Math.max(ce,O)),alignment:O}}function ps(_,O){return Math.ceil(_/O)*O}ji.serialize=function(_,O){return _._trim(),O&&(_.isTransferred=!0,O.push(_.arrayBuffer)),{length:_.length,arrayBuffer:_.arrayBuffer}},ji.deserialize=function(_){var O=Object.create(this.prototype);return O.arrayBuffer=_.arrayBuffer,O.length=_.length,O.capacity=_.arrayBuffer.byteLength/O.bytesPerElement,O._refreshViews(),O},ji.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ji.prototype.clear=function(){this.length=0},ji.prototype.resize=function(_){this.reserve(_),this.length=_},ji.prototype.reserve=function(_){if(_>this.capacity){this.capacity=Math.max(_,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var O=this.uint8;this._refreshViews(),O&&this.uint8.set(O)}},ji.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ds=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce){var xe=this.length;return this.resize(xe+1),this.emplace(xe,Z,ce)},O.prototype.emplace=function(Z,ce,xe){var we=2*Z;return this.int16[we+0]=ce,this.int16[we+1]=xe,Z},O}(ji);ds.prototype.bytesPerElement=4,ya("StructArrayLayout2i4",ds);var or=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we){var De=this.length;return this.resize(De+1),this.emplace(De,Z,ce,xe,we)},O.prototype.emplace=function(Z,ce,xe,we,De){var Ze=4*Z;return this.int16[Ze+0]=ce,this.int16[Ze+1]=xe,this.int16[Ze+2]=we,this.int16[Ze+3]=De,Z},O}(ji);or.prototype.bytesPerElement=8,ya("StructArrayLayout4i8",or);var To=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,De,Ze){var pt=this.length;return this.resize(pt+1),this.emplace(pt,Z,ce,xe,we,De,Ze)},O.prototype.emplace=function(Z,ce,xe,we,De,Ze,pt){var St=6*Z;return this.int16[St+0]=ce,this.int16[St+1]=xe,this.int16[St+2]=we,this.int16[St+3]=De,this.int16[St+4]=Ze,this.int16[St+5]=pt,Z},O}(ji);To.prototype.bytesPerElement=12,ya("StructArrayLayout2i4i12",To);var co=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,De,Ze){var pt=this.length;return this.resize(pt+1),this.emplace(pt,Z,ce,xe,we,De,Ze)},O.prototype.emplace=function(Z,ce,xe,we,De,Ze,pt){var St=4*Z,Ot=8*Z;return this.int16[St+0]=ce,this.int16[St+1]=xe,this.uint8[Ot+4]=we,this.uint8[Ot+5]=De,this.uint8[Ot+6]=Ze,this.uint8[Ot+7]=pt,Z},O}(ji);co.prototype.bytesPerElement=8,ya("StructArrayLayout2i4ub8",co);var zi=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,De,Ze,pt,St,Ot,Ht){var Qt=this.length;return this.resize(Qt+1),this.emplace(Qt,Z,ce,xe,we,De,Ze,pt,St,Ot,Ht)},O.prototype.emplace=function(Z,ce,xe,we,De,Ze,pt,St,Ot,Ht,Qt){var lr=9*Z,Mr=18*Z;return this.uint16[lr+0]=ce,this.uint16[lr+1]=xe,this.uint16[lr+2]=we,this.uint16[lr+3]=De,this.uint16[lr+4]=Ze,this.uint16[lr+5]=pt,this.uint16[lr+6]=St,this.uint16[lr+7]=Ot,this.uint8[Mr+16]=Ht,this.uint8[Mr+17]=Qt,Z},O}(ji);zi.prototype.bytesPerElement=18,ya("StructArrayLayout8ui2ub18",zi);var Si=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,De,Ze,pt,St,Ot,Ht,Qt,lr){var Mr=this.length;return this.resize(Mr+1),this.emplace(Mr,Z,ce,xe,we,De,Ze,pt,St,Ot,Ht,Qt,lr)},O.prototype.emplace=function(Z,ce,xe,we,De,Ze,pt,St,Ot,Ht,Qt,lr,Mr){var Er=12*Z;return this.int16[Er+0]=ce,this.int16[Er+1]=xe,this.int16[Er+2]=we,this.int16[Er+3]=De,this.uint16[Er+4]=Ze,this.uint16[Er+5]=pt,this.uint16[Er+6]=St,this.uint16[Er+7]=Ot,this.int16[Er+8]=Ht,this.int16[Er+9]=Qt,this.int16[Er+10]=lr,this.int16[Er+11]=Mr,Z},O}(ji);Si.prototype.bytesPerElement=24,ya("StructArrayLayout4i4ui4i24",Si);var Es=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe){var we=this.length;return this.resize(we+1),this.emplace(we,Z,ce,xe)},O.prototype.emplace=function(Z,ce,xe,we){var De=3*Z;return this.float32[De+0]=ce,this.float32[De+1]=xe,this.float32[De+2]=we,Z},O}(ji);Es.prototype.bytesPerElement=12,ya("StructArrayLayout3f12",Es);var yl=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z){var ce=this.length;return this.resize(ce+1),this.emplace(ce,Z)},O.prototype.emplace=function(Z,ce){return this.uint32[1*Z+0]=ce,Z},O}(ji);yl.prototype.bytesPerElement=4,ya("StructArrayLayout1ul4",yl);var ys=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,De,Ze,pt,St,Ot){var Ht=this.length;return this.resize(Ht+1),this.emplace(Ht,Z,ce,xe,we,De,Ze,pt,St,Ot)},O.prototype.emplace=function(Z,ce,xe,we,De,Ze,pt,St,Ot,Ht){var Qt=10*Z,lr=5*Z;return this.int16[Qt+0]=ce,this.int16[Qt+1]=xe,this.int16[Qt+2]=we,this.int16[Qt+3]=De,this.int16[Qt+4]=Ze,this.int16[Qt+5]=pt,this.uint32[lr+3]=St,this.uint16[Qt+8]=Ot,this.uint16[Qt+9]=Ht,Z},O}(ji);ys.prototype.bytesPerElement=20,ya("StructArrayLayout6i1ul2ui20",ys);var rs=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,De,Ze){var pt=this.length;return this.resize(pt+1),this.emplace(pt,Z,ce,xe,we,De,Ze)},O.prototype.emplace=function(Z,ce,xe,we,De,Ze,pt){var St=6*Z;return this.int16[St+0]=ce,this.int16[St+1]=xe,this.int16[St+2]=we,this.int16[St+3]=De,this.int16[St+4]=Ze,this.int16[St+5]=pt,Z},O}(ji);rs.prototype.bytesPerElement=12,ya("StructArrayLayout2i2i2i12",rs);var Ys=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,De){var Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,Z,ce,xe,we,De)},O.prototype.emplace=function(Z,ce,xe,we,De,Ze){var pt=4*Z,St=8*Z;return this.float32[pt+0]=ce,this.float32[pt+1]=xe,this.float32[pt+2]=we,this.int16[St+6]=De,this.int16[St+7]=Ze,Z},O}(ji);Ys.prototype.bytesPerElement=16,ya("StructArrayLayout2f1f2i16",Ys);var Cs=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we){var De=this.length;return this.resize(De+1),this.emplace(De,Z,ce,xe,we)},O.prototype.emplace=function(Z,ce,xe,we,De){var Ze=12*Z,pt=3*Z;return this.uint8[Ze+0]=ce,this.uint8[Ze+1]=xe,this.float32[pt+1]=we,this.float32[pt+2]=De,Z},O}(ji);Cs.prototype.bytesPerElement=12,ya("StructArrayLayout2ub2f12",Cs);var ns=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe){var we=this.length;return this.resize(we+1),this.emplace(we,Z,ce,xe)},O.prototype.emplace=function(Z,ce,xe,we){var De=3*Z;return this.uint16[De+0]=ce,this.uint16[De+1]=xe,this.uint16[De+2]=we,Z},O}(ji);ns.prototype.bytesPerElement=6,ya("StructArrayLayout3ui6",ns);var Sl=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,De,Ze,pt,St,Ot,Ht,Qt,lr,Mr,Er,Kr,Br,sn){var vn=this.length;return this.resize(vn+1),this.emplace(vn,Z,ce,xe,we,De,Ze,pt,St,Ot,Ht,Qt,lr,Mr,Er,Kr,Br,sn)},O.prototype.emplace=function(Z,ce,xe,we,De,Ze,pt,St,Ot,Ht,Qt,lr,Mr,Er,Kr,Br,sn,vn){var Rn=24*Z,zn=12*Z,Zn=48*Z;return this.int16[Rn+0]=ce,this.int16[Rn+1]=xe,this.uint16[Rn+2]=we,this.uint16[Rn+3]=De,this.uint32[zn+2]=Ze,this.uint32[zn+3]=pt,this.uint32[zn+4]=St,this.uint16[Rn+10]=Ot,this.uint16[Rn+11]=Ht,this.uint16[Rn+12]=Qt,this.float32[zn+7]=lr,this.float32[zn+8]=Mr,this.uint8[Zn+36]=Er,this.uint8[Zn+37]=Kr,this.uint8[Zn+38]=Br,this.uint32[zn+10]=sn,this.int16[Rn+22]=vn,Z},O}(ji);Sl.prototype.bytesPerElement=48,ya("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Sl);var El=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we,De,Ze,pt,St,Ot,Ht,Qt,lr,Mr,Er,Kr,Br,sn,vn,Rn,zn,Zn,xa,La,Ka,Ba,ei,za,Ii){var bi=this.length;return this.resize(bi+1),this.emplace(bi,Z,ce,xe,we,De,Ze,pt,St,Ot,Ht,Qt,lr,Mr,Er,Kr,Br,sn,vn,Rn,zn,Zn,xa,La,Ka,Ba,ei,za,Ii)},O.prototype.emplace=function(Z,ce,xe,we,De,Ze,pt,St,Ot,Ht,Qt,lr,Mr,Er,Kr,Br,sn,vn,Rn,zn,Zn,xa,La,Ka,Ba,ei,za,Ii,bi){var Ga=34*Z,Wi=17*Z;return this.int16[Ga+0]=ce,this.int16[Ga+1]=xe,this.int16[Ga+2]=we,this.int16[Ga+3]=De,this.int16[Ga+4]=Ze,this.int16[Ga+5]=pt,this.int16[Ga+6]=St,this.int16[Ga+7]=Ot,this.uint16[Ga+8]=Ht,this.uint16[Ga+9]=Qt,this.uint16[Ga+10]=lr,this.uint16[Ga+11]=Mr,this.uint16[Ga+12]=Er,this.uint16[Ga+13]=Kr,this.uint16[Ga+14]=Br,this.uint16[Ga+15]=sn,this.uint16[Ga+16]=vn,this.uint16[Ga+17]=Rn,this.uint16[Ga+18]=zn,this.uint16[Ga+19]=Zn,this.uint16[Ga+20]=xa,this.uint16[Ga+21]=La,this.uint16[Ga+22]=Ka,this.uint32[Wi+12]=Ba,this.float32[Wi+13]=ei,this.float32[Wi+14]=za,this.float32[Wi+15]=Ii,this.float32[Wi+16]=bi,Z},O}(ji);El.prototype.bytesPerElement=68,ya("StructArrayLayout8i15ui1ul4f68",El);var to=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z){var ce=this.length;return this.resize(ce+1),this.emplace(ce,Z)},O.prototype.emplace=function(Z,ce){return this.float32[1*Z+0]=ce,Z},O}(ji);to.prototype.bytesPerElement=4,ya("StructArrayLayout1f4",to);var xl=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe){var we=this.length;return this.resize(we+1),this.emplace(we,Z,ce,xe)},O.prototype.emplace=function(Z,ce,xe,we){var De=3*Z;return this.int16[De+0]=ce,this.int16[De+1]=xe,this.int16[De+2]=we,Z},O}(ji);xl.prototype.bytesPerElement=6,ya("StructArrayLayout3i6",xl);var Eu=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe){var we=this.length;return this.resize(we+1),this.emplace(we,Z,ce,xe)},O.prototype.emplace=function(Z,ce,xe,we){var De=4*Z;return this.uint32[2*Z+0]=ce,this.uint16[De+2]=xe,this.uint16[De+3]=we,Z},O}(ji);Eu.prototype.bytesPerElement=8,ya("StructArrayLayout1ul2ui8",Eu);var fo=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce){var xe=this.length;return this.resize(xe+1),this.emplace(xe,Z,ce)},O.prototype.emplace=function(Z,ce,xe){var we=2*Z;return this.uint16[we+0]=ce,this.uint16[we+1]=xe,Z},O}(ji);fo.prototype.bytesPerElement=4,ya("StructArrayLayout2ui4",fo);var Xi=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z){var ce=this.length;return this.resize(ce+1),this.emplace(ce,Z)},O.prototype.emplace=function(Z,ce){return this.uint16[1*Z+0]=ce,Z},O}(ji);Xi.prototype.bytesPerElement=2,ya("StructArrayLayout1ui2",Xi);var Do=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce){var xe=this.length;return this.resize(xe+1),this.emplace(xe,Z,ce)},O.prototype.emplace=function(Z,ce,xe){var we=2*Z;return this.float32[we+0]=ce,this.float32[we+1]=xe,Z},O}(ji);Do.prototype.bytesPerElement=8,ya("StructArrayLayout2f8",Do);var Cl=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ce,xe,we){var De=this.length;return this.resize(De+1),this.emplace(De,Z,ce,xe,we)},O.prototype.emplace=function(Z,ce,xe,we,De){var Ze=4*Z;return this.float32[Ze+0]=ce,this.float32[Ze+1]=xe,this.float32[Ze+2]=we,this.float32[Ze+3]=De,Z},O}(ji);Cl.prototype.bytesPerElement=16,ya("StructArrayLayout4f16",Cl);var J=function(_){function O(){_.apply(this,arguments)}_&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O;var Z={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Z.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Z.x1.get=function(){return this._structArray.int16[this._pos2+2]},Z.y1.get=function(){return this._structArray.int16[this._pos2+3]},Z.x2.get=function(){return this._structArray.int16[this._pos2+4]},Z.y2.get=function(){return this._structArray.int16[this._pos2+5]},Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.anchorPoint.get=function(){return new l(this.anchorPointX,this.anchorPointY)},Object.defineProperties(O.prototype,Z),O}(Xo);J.prototype.size=20;var ne=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.get=function(Z){return new J(this,Z)},O}(ys);ya("CollisionBoxArray",ne);var q=function(_){function O(){_.apply(this,arguments)}_&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Z.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Z.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Z.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Z.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Z.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Z.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Z.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Z.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Z.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Z.placedOrientation.set=function(ce){this._structArray.uint8[this._pos1+37]=ce},Z.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Z.hidden.set=function(ce){this._structArray.uint8[this._pos1+38]=ce},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Z.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+10]=ce},Z.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(O.prototype,Z),O}(Xo);q.prototype.size=48;var ve=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.get=function(Z){return new q(this,Z)},O}(Sl);ya("PlacedSymbolArray",ve);var Se=function(_){function O(){_.apply(this,arguments)}_&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Z.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Z.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Z.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Z.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Z.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Z.key.get=function(){return this._structArray.uint16[this._pos2+8]},Z.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Z.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Z.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Z.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Z.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Z.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Z.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Z.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Z.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Z.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Z.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Z.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Z.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Z.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+12]=ce},Z.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Z.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Z.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Z.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(O.prototype,Z),O}(Xo);Se.prototype.size=68;var Oe=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.get=function(Z){return new Se(this,Z)},O}(El);ya("SymbolInstanceArray",Oe);var Xe=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.getoffsetX=function(Z){return this.float32[1*Z+0]},O}(to);ya("GlyphOffsetArray",Xe);var ut=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.getx=function(Z){return this.int16[3*Z+0]},O.prototype.gety=function(Z){return this.int16[3*Z+1]},O.prototype.gettileUnitDistanceFromAnchor=function(Z){return this.int16[3*Z+2]},O}(xl);ya("SymbolLineVertexArray",ut);var yt=function(_){function O(){_.apply(this,arguments)}_&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O;var Z={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(O.prototype,Z),O}(Xo);yt.prototype.size=8;var jt=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.get=function(Z){return new yt(this,Z)},O}(Eu);ya("FeatureIndexArray",jt);var sr=Ui([{name:"a_pos",components:2,type:"Int16"}],4).members,pr=function(_){_===void 0&&(_=[]),this.segments=_};function br(_,O){return 256*(_=p(Math.floor(_),0,255))+p(Math.floor(O),0,255)}pr.prototype.prepareSegment=function(_,O,Z,ce){var xe=this.segments[this.segments.length-1];return _>pr.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+pr.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+_),(!xe||xe.vertexLength+_>pr.MAX_VERTEX_ARRAY_LENGTH||xe.sortKey!==ce)&&(xe={vertexOffset:O.length,primitiveOffset:Z.length,vertexLength:0,primitiveLength:0},ce!==void 0&&(xe.sortKey=ce),this.segments.push(xe)),xe},pr.prototype.get=function(){return this.segments},pr.prototype.destroy=function(){for(var _=0,O=this.segments;_<O.length;_+=1){var Z=O[_];for(var ce in Z.vaos)Z.vaos[ce].destroy()}},pr.simpleSegment=function(_,O,Z,ce){return new pr([{vertexOffset:_,primitiveOffset:O,vertexLength:Z,primitiveLength:ce,vaos:{},sortKey:0}])},pr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ya("SegmentVector",pr);var Lr=Ui([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),Dr=f(function(_){_.exports=function(O,Z){var ce,xe,we,De,Ze,pt,St,Ot;for(xe=O.length-(ce=3&O.length),we=Z,Ze=3432918353,pt=461845907,Ot=0;Ot<xe;)St=255&O.charCodeAt(Ot)|(255&O.charCodeAt(++Ot))<<8|(255&O.charCodeAt(++Ot))<<16|(255&O.charCodeAt(++Ot))<<24,++Ot,we=27492+(65535&(De=5*(65535&(we=(we^=St=(65535&(St=(St=(65535&St)*Ze+(((St>>>16)*Ze&65535)<<16)&4294967295)<<15|St>>>17))*pt+(((St>>>16)*pt&65535)<<16)&4294967295)<<13|we>>>19))+((5*(we>>>16)&65535)<<16)&4294967295))+((58964+(De>>>16)&65535)<<16);switch(St=0,ce){case 3:St^=(255&O.charCodeAt(Ot+2))<<16;case 2:St^=(255&O.charCodeAt(Ot+1))<<8;case 1:we^=St=(65535&(St=(St=(65535&(St^=255&O.charCodeAt(Ot)))*Ze+(((St>>>16)*Ze&65535)<<16)&4294967295)<<15|St>>>17))*pt+(((St>>>16)*pt&65535)<<16)&4294967295}return we^=O.length,we=2246822507*(65535&(we^=we>>>16))+((2246822507*(we>>>16)&65535)<<16)&4294967295,we=3266489909*(65535&(we^=we>>>13))+((3266489909*(we>>>16)&65535)<<16)&4294967295,(we^=we>>>16)>>>0}}),jr=f(function(_){_.exports=function(O,Z){for(var ce,xe=O.length,we=Z^xe,De=0;xe>=4;)ce=1540483477*(65535&(ce=255&O.charCodeAt(De)|(255&O.charCodeAt(++De))<<8|(255&O.charCodeAt(++De))<<16|(255&O.charCodeAt(++De))<<24))+((1540483477*(ce>>>16)&65535)<<16),we=1540483477*(65535&we)+((1540483477*(we>>>16)&65535)<<16)^(ce=1540483477*(65535&(ce^=ce>>>24))+((1540483477*(ce>>>16)&65535)<<16)),xe-=4,++De;switch(xe){case 3:we^=(255&O.charCodeAt(De+2))<<16;case 2:we^=(255&O.charCodeAt(De+1))<<8;case 1:we=1540483477*(65535&(we^=255&O.charCodeAt(De)))+((1540483477*(we>>>16)&65535)<<16)}return we=1540483477*(65535&(we^=we>>>13))+((1540483477*(we>>>16)&65535)<<16),(we^=we>>>15)>>>0}}),Sr=Dr,Ur=jr;Sr.murmur3=Dr,Sr.murmur2=Ur;var $r=function(){this.ids=[],this.positions=[],this.indexed=!1};$r.prototype.add=function(_,O,Z,ce){this.ids.push(In(_)),this.positions.push(O,Z,ce)},$r.prototype.getPositions=function(_){for(var O=In(_),Z=0,ce=this.ids.length-1;Z<ce;){var xe=Z+ce>>1;this.ids[xe]>=O?ce=xe:Z=xe+1}for(var we=[];this.ids[Z]===O;)we.push({index:this.positions[3*Z],start:this.positions[3*Z+1],end:this.positions[3*Z+2]}),Z++;return we},$r.serialize=function(_,O){var Z=new Float64Array(_.ids),ce=new Uint32Array(_.positions);return function xe(we,De,Ze,pt){for(;Ze<pt;){for(var St=we[Ze+pt>>1],Ot=Ze-1,Ht=pt+1;;){do Ot++;while(we[Ot]<St);do Ht--;while(we[Ht]>St);if(Ot>=Ht)break;An(we,Ot,Ht),An(De,3*Ot,3*Ht),An(De,3*Ot+1,3*Ht+1),An(De,3*Ot+2,3*Ht+2)}Ht-Ze<pt-Ht?(xe(we,De,Ze,Ht),Ze=Ht+1):(xe(we,De,Ht+1,pt),pt=Ht)}}(Z,ce,0,Z.length-1),O&&O.push(Z.buffer,ce.buffer),{ids:Z,positions:ce}},$r.deserialize=function(_){var O=new $r;return O.ids=_.ids,O.positions=_.positions,O.indexed=!0,O};var cn=Math.pow(2,53)-1;function In(_){var O=+_;return!isNaN(O)&&O<=cn?O:Sr(String(_))}function An(_,O,Z){var ce=_[O];_[O]=_[Z],_[Z]=ce}ya("FeaturePositionMap",$r);var Dn=function(_,O){this.gl=_.gl,this.location=O},Jn=function(_){function O(Z,ce){_.call(this,Z,ce),this.current=0}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1i(this.location,Z))},O}(Dn),ha=function(_){function O(Z,ce){_.call(this,Z,ce),this.current=0}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1f(this.location,Z))},O}(Dn),la=function(_){function O(Z,ce){_.call(this,Z,ce),this.current=[0,0]}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]||(this.current=Z,this.gl.uniform2f(this.location,Z[0],Z[1]))},O}(Dn),wa=function(_){function O(Z,ce){_.call(this,Z,ce),this.current=[0,0,0]}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]||(this.current=Z,this.gl.uniform3f(this.location,Z[0],Z[1],Z[2]))},O}(Dn),Ea=function(_){function O(Z,ce){_.call(this,Z,ce),this.current=[0,0,0,0]}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]&&Z[3]===this.current[3]||(this.current=Z,this.gl.uniform4f(this.location,Z[0],Z[1],Z[2],Z[3]))},O}(Dn),ii=function(_){function O(Z,ce){_.call(this,Z,ce),this.current=_r.transparent}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.set=function(Z){Z.r===this.current.r&&Z.g===this.current.g&&Z.b===this.current.b&&Z.a===this.current.a||(this.current=Z,this.gl.uniform4f(this.location,Z.r,Z.g,Z.b,Z.a))},O}(Dn),ti=new Float32Array(16),Oi=function(_){function O(Z,ce){_.call(this,Z,ce),this.current=ti}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.set=function(Z){if(Z[12]!==this.current[12]||Z[0]!==this.current[0])return this.current=Z,void this.gl.uniformMatrix4fv(this.location,!1,Z);for(var ce=1;ce<16;ce++)if(Z[ce]!==this.current[ce]){this.current=Z,this.gl.uniformMatrix4fv(this.location,!1,Z);break}},O}(Dn);function Va(_){return[br(255*_.r,255*_.g),br(255*_.b,255*_.a)]}var gi=function(_,O,Z){this.value=_,this.uniformNames=O.map(function(ce){return"u_"+ce}),this.type=Z};gi.prototype.setUniform=function(_,O,Z){_.set(Z.constantOr(this.value))},gi.prototype.getBinding=function(_,O,Z){return this.type==="color"?new ii(_,O):new ha(_,O)};var Ri=function(_,O){this.uniformNames=O.map(function(Z){return"u_"+Z}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ri.prototype.setConstantPatternPositions=function(_,O){this.pixelRatioFrom=O.pixelRatio,this.pixelRatioTo=_.pixelRatio,this.patternFrom=O.tlbr,this.patternTo=_.tlbr},Ri.prototype.setUniform=function(_,O,Z,ce){var xe=ce==="u_pattern_to"?this.patternTo:ce==="u_pattern_from"?this.patternFrom:ce==="u_pixel_ratio_to"?this.pixelRatioTo:ce==="u_pixel_ratio_from"?this.pixelRatioFrom:null;xe&&_.set(xe)},Ri.prototype.getBinding=function(_,O,Z){return Z.substr(0,9)==="u_pattern"?new Ea(_,O):new ha(_,O)};var ci=function(_,O,Z,ce){this.expression=_,this.type=Z,this.maxValue=0,this.paintVertexAttributes=O.map(function(xe){return{name:"a_"+xe,type:"Float32",components:Z==="color"?2:1,offset:0}}),this.paintVertexArray=new ce};ci.prototype.populatePaintArray=function(_,O,Z,ce,xe){var we=this.paintVertexArray.length,De=this.expression.evaluate(new Xa(0),O,{},ce,[],xe);this.paintVertexArray.resize(_),this._setPaintValue(we,_,De)},ci.prototype.updatePaintArray=function(_,O,Z,ce){var xe=this.expression.evaluate({zoom:0},Z,ce);this._setPaintValue(_,O,xe)},ci.prototype._setPaintValue=function(_,O,Z){if(this.type==="color")for(var ce=Va(Z),xe=_;xe<O;xe++)this.paintVertexArray.emplace(xe,ce[0],ce[1]);else{for(var we=_;we<O;we++)this.paintVertexArray.emplace(we,Z);this.maxValue=Math.max(this.maxValue,Math.abs(Z))}},ci.prototype.upload=function(_){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=_.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ci.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var li=function(_,O,Z,ce,xe,we){this.expression=_,this.uniformNames=O.map(function(De){return"u_"+De+"_t"}),this.type=Z,this.useIntegerZoom=ce,this.zoom=xe,this.maxValue=0,this.paintVertexAttributes=O.map(function(De){return{name:"a_"+De,type:"Float32",components:Z==="color"?4:2,offset:0}}),this.paintVertexArray=new we};li.prototype.populatePaintArray=function(_,O,Z,ce,xe){var we=this.expression.evaluate(new Xa(this.zoom),O,{},ce,[],xe),De=this.expression.evaluate(new Xa(this.zoom+1),O,{},ce,[],xe),Ze=this.paintVertexArray.length;this.paintVertexArray.resize(_),this._setPaintValue(Ze,_,we,De)},li.prototype.updatePaintArray=function(_,O,Z,ce){var xe=this.expression.evaluate({zoom:this.zoom},Z,ce),we=this.expression.evaluate({zoom:this.zoom+1},Z,ce);this._setPaintValue(_,O,xe,we)},li.prototype._setPaintValue=function(_,O,Z,ce){if(this.type==="color")for(var xe=Va(Z),we=Va(ce),De=_;De<O;De++)this.paintVertexArray.emplace(De,xe[0],xe[1],we[0],we[1]);else{for(var Ze=_;Ze<O;Ze++)this.paintVertexArray.emplace(Ze,Z,ce);this.maxValue=Math.max(this.maxValue,Math.abs(Z),Math.abs(ce))}},li.prototype.upload=function(_){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=_.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},li.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},li.prototype.setUniform=function(_,O){var Z=this.useIntegerZoom?Math.floor(O.zoom):O.zoom,ce=p(this.expression.interpolationFactor(Z,this.zoom,this.zoom+1),0,1);_.set(ce)},li.prototype.getBinding=function(_,O,Z){return new ha(_,O)};var Li=function(_,O,Z,ce,xe,we){this.expression=_,this.type=O,this.useIntegerZoom=Z,this.zoom=ce,this.layerId=we,this.zoomInPaintVertexArray=new xe,this.zoomOutPaintVertexArray=new xe};Li.prototype.populatePaintArray=function(_,O,Z){var ce=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(_),this.zoomOutPaintVertexArray.resize(_),this._setPaintValues(ce,_,O.patterns&&O.patterns[this.layerId],Z)},Li.prototype.updatePaintArray=function(_,O,Z,ce,xe){this._setPaintValues(_,O,Z.patterns&&Z.patterns[this.layerId],xe)},Li.prototype._setPaintValues=function(_,O,Z,ce){if(ce&&Z){var xe=ce[Z.min],we=ce[Z.mid],De=ce[Z.max];if(xe&&we&&De)for(var Ze=_;Ze<O;Ze++)this.zoomInPaintVertexArray.emplace(Ze,we.tl[0],we.tl[1],we.br[0],we.br[1],xe.tl[0],xe.tl[1],xe.br[0],xe.br[1],we.pixelRatio,xe.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ze,we.tl[0],we.tl[1],we.br[0],we.br[1],De.tl[0],De.tl[1],De.br[0],De.br[1],we.pixelRatio,De.pixelRatio)}},Li.prototype.upload=function(_){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=_.createVertexBuffer(this.zoomInPaintVertexArray,Lr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=_.createVertexBuffer(this.zoomOutPaintVertexArray,Lr.members,this.expression.isStateDependent))},Li.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ni=function(_,O,Z,ce){this.binders={},this.layoutAttributes=ce,this._buffers=[];var xe=[];for(var we in _.paint._values)if(Z(we)){var De=_.paint.get(we);if(De instanceof eo&&dl(De.property.specification)){var Ze=as(we,_.type),pt=De.value,St=De.property.specification.type,Ot=De.property.useIntegerZoom,Ht=De.property.specification["property-type"],Qt=Ht==="cross-faded"||Ht==="cross-faded-data-driven";if(pt.kind==="constant")this.binders[we]=Qt?new Ri(pt.value,Ze):new gi(pt.value,Ze,St),xe.push("/u_"+we);else if(pt.kind==="source"||Qt){var lr=Fo(we,St,"source");this.binders[we]=Qt?new Li(pt,St,Ot,O,lr,_.id):new ci(pt,Ze,St,lr),xe.push("/a_"+we)}else{var Mr=Fo(we,St,"composite");this.binders[we]=new li(pt,Ze,St,Ot,O,Mr),xe.push("/z_"+we)}}}this.cacheKey=xe.sort().join("")};ni.prototype.getMaxValue=function(_){var O=this.binders[_];return O instanceof ci||O instanceof li?O.maxValue:0},ni.prototype.populatePaintArrays=function(_,O,Z,ce,xe){for(var we in this.binders){var De=this.binders[we];(De instanceof ci||De instanceof li||De instanceof Li)&&De.populatePaintArray(_,O,Z,ce,xe)}},ni.prototype.setConstantPatternPositions=function(_,O){for(var Z in this.binders){var ce=this.binders[Z];ce instanceof Ri&&ce.setConstantPatternPositions(_,O)}},ni.prototype.updatePaintArrays=function(_,O,Z,ce,xe){var we=!1;for(var De in _)for(var Ze=0,pt=O.getPositions(De);Ze<pt.length;Ze+=1){var St=pt[Ze],Ot=Z.feature(St.index);for(var Ht in this.binders){var Qt=this.binders[Ht];if((Qt instanceof ci||Qt instanceof li||Qt instanceof Li)&&Qt.expression.isStateDependent===!0){var lr=ce.paint.get(Ht);Qt.expression=lr.value,Qt.updatePaintArray(St.start,St.end,Ot,_[De],xe),we=!0}}}return we},ni.prototype.defines=function(){var _=[];for(var O in this.binders){var Z=this.binders[O];(Z instanceof gi||Z instanceof Ri)&&_.push.apply(_,Z.uniformNames.map(function(ce){return"#define HAS_UNIFORM_"+ce}))}return _},ni.prototype.getPaintVertexBuffers=function(){return this._buffers},ni.prototype.getUniforms=function(_,O){var Z=[];for(var ce in this.binders){var xe=this.binders[ce];if(xe instanceof gi||xe instanceof Ri||xe instanceof li)for(var we=0,De=xe.uniformNames;we<De.length;we+=1){var Ze=De[we];if(O[Ze]){var pt=xe.getBinding(_,O[Ze],Ze);Z.push({name:Ze,property:ce,binding:pt})}}}return Z},ni.prototype.setUniforms=function(_,O,Z,ce){for(var xe=0,we=O;xe<we.length;xe+=1){var De=we[xe],Ze=De.name,pt=De.property;this.binders[pt].setUniform(De.binding,ce,Z.get(pt),Ze)}},ni.prototype.updatePaintBuffers=function(_){for(var O in this._buffers=[],this.binders){var Z=this.binders[O];if(_&&Z instanceof Li){var ce=_.fromScale===2?Z.zoomInPaintVertexBuffer:Z.zoomOutPaintVertexBuffer;ce&&this._buffers.push(ce)}else(Z instanceof ci||Z instanceof li)&&Z.paintVertexBuffer&&this._buffers.push(Z.paintVertexBuffer)}},ni.prototype.upload=function(_){for(var O in this.binders){var Z=this.binders[O];(Z instanceof ci||Z instanceof li||Z instanceof Li)&&Z.upload(_)}this.updatePaintBuffers()},ni.prototype.destroy=function(){for(var _ in this.binders){var O=this.binders[_];(O instanceof ci||O instanceof li||O instanceof Li)&&O.destroy()}};var Ha=function(_,O,Z,ce){ce===void 0&&(ce=function(){return!0}),this.programConfigurations={};for(var xe=0,we=O;xe<we.length;xe+=1){var De=we[xe];this.programConfigurations[De.id]=new ni(De,Z,ce,_)}this.needsUpload=!1,this._featureMap=new $r,this._bufferOffset=0};function as(_,O){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[_]||[_.replace(O+"-","").replace(/-/g,"_")]}function Fo(_,O,Z){var ce={color:{source:Do,composite:Cl},number:{source:to,composite:Do}},xe=function(we){return{"line-pattern":{source:zi,composite:zi},"fill-pattern":{source:zi,composite:zi},"fill-extrusion-pattern":{source:zi,composite:zi}}[we]}(_);return xe&&xe[Z]||ce[O][Z]}Ha.prototype.populatePaintArrays=function(_,O,Z,ce,xe,we){for(var De in this.programConfigurations)this.programConfigurations[De].populatePaintArrays(_,O,ce,xe,we);O.id!==void 0&&this._featureMap.add(O.id,Z,this._bufferOffset,_),this._bufferOffset=_,this.needsUpload=!0},Ha.prototype.updatePaintArrays=function(_,O,Z,ce){for(var xe=0,we=Z;xe<we.length;xe+=1){var De=we[xe];this.needsUpload=this.programConfigurations[De.id].updatePaintArrays(_,this._featureMap,O,De,ce)||this.needsUpload}},Ha.prototype.get=function(_){return this.programConfigurations[_]},Ha.prototype.upload=function(_){if(this.needsUpload){for(var O in this.programConfigurations)this.programConfigurations[O].upload(_);this.needsUpload=!1}},Ha.prototype.destroy=function(){for(var _ in this.programConfigurations)this.programConfigurations[_].destroy()},ya("ConstantBinder",gi),ya("CrossFadedConstantBinder",Ri),ya("SourceExpressionBinder",ci),ya("CrossFadedCompositeBinder",Li),ya("CompositeExpressionBinder",li),ya("ProgramConfiguration",ni,{omit:["_buffers"]}),ya("ProgramConfigurationSet",Ha);var bo={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1};function Ao(_){for(var O=8192/_.extent,Z=_.loadGeometry(),ce=0;ce<Z.length;ce++)for(var xe=Z[ce],we=0;we<xe.length;we++){var De=xe[we];De.x=Math.round(De.x*O),De.y=Math.round(De.y*O),(De.x<bo.min||De.x>bo.max||De.y<bo.min||De.y>bo.max)&&(E("Geometry exceeds allowed extent, reduce your vector tile buffer size"),De.x=p(De.x,bo.min,bo.max),De.y=p(De.y,bo.min,bo.max))}return Z}function Qo(_,O,Z,ce,xe){_.emplaceBack(2*O+(ce+1)/2,2*Z+(xe+1)/2)}var Mo=function(_){this.zoom=_.zoom,this.overscaling=_.overscaling,this.layers=_.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=_.index,this.hasPattern=!1,this.layoutVertexArray=new ds,this.indexArray=new ns,this.segments=new pr,this.programConfigurations=new Ha(sr,_.layers,_.zoom),this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function du(_,O){for(var Z=0;Z<_.length;Z++)if(Lu(O,_[Z]))return!0;for(var ce=0;ce<O.length;ce++)if(Lu(_,O[ce]))return!0;return!!$l(_,O)}function xs(_,O,Z){return!!Lu(_,O)||!!cc(O,_,Z)}function Jl(_,O){if(_.length===1)return Ll(O,_[0]);for(var Z=0;Z<O.length;Z++)for(var ce=O[Z],xe=0;xe<ce.length;xe++)if(Lu(_,ce[xe]))return!0;for(var we=0;we<_.length;we++)if(Ll(O,_[we]))return!0;for(var De=0;De<O.length;De++)if($l(_,O[De]))return!0;return!1}function bl(_,O,Z){if(_.length>1){if($l(_,O))return!0;for(var ce=0;ce<O.length;ce++)if(cc(O[ce],_,Z))return!0}for(var xe=0;xe<_.length;xe++)if(cc(_[xe],O,Z))return!0;return!1}function $l(_,O){if(_.length===0||O.length===0)return!1;for(var Z=0;Z<_.length-1;Z++)for(var ce=_[Z],xe=_[Z+1],we=0;we<O.length-1;we++)if(Cu(ce,xe,O[we],O[we+1]))return!0;return!1}function Cu(_,O,Z,ce){return k(_,Z,ce)!==k(O,Z,ce)&&k(_,O,Z)!==k(_,O,ce)}function cc(_,O,Z){var ce=Z*Z;if(O.length===1)return _.distSqr(O[0])<ce;for(var xe=1;xe<O.length;xe++)if(fc(_,O[xe-1],O[xe])<ce)return!0;return!1}function fc(_,O,Z){var ce=O.distSqr(Z);if(ce===0)return _.distSqr(O);var xe=((_.x-O.x)*(Z.x-O.x)+(_.y-O.y)*(Z.y-O.y))/ce;return _.distSqr(xe<0?O:xe>1?Z:Z.sub(O)._mult(xe)._add(O))}function Ll(_,O){for(var Z,ce,xe,we=!1,De=0;De<_.length;De++)for(var Ze=0,pt=(Z=_[De]).length-1;Ze<Z.length;pt=Ze++)(ce=Z[Ze]).y>O.y!=(xe=Z[pt]).y>O.y&&O.x<(xe.x-ce.x)*(O.y-ce.y)/(xe.y-ce.y)+ce.x&&(we=!we);return we}function Lu(_,O){for(var Z=!1,ce=0,xe=_.length-1;ce<_.length;xe=ce++){var we=_[ce],De=_[xe];we.y>O.y!=De.y>O.y&&O.x<(De.x-we.x)*(O.y-we.y)/(De.y-we.y)+we.x&&(Z=!Z)}return Z}function Lf(_,O,Z){var ce=Z[0],xe=Z[2];if(_.x<ce.x&&O.x<ce.x||_.x>xe.x&&O.x>xe.x||_.y<ce.y&&O.y<ce.y||_.y>xe.y&&O.y>xe.y)return!1;var we=k(_,O,Z[0]);return we!==k(_,O,Z[1])||we!==k(_,O,Z[2])||we!==k(_,O,Z[3])}function hc(_,O,Z){var ce=O.paint.get(_).value;return ce.kind==="constant"?ce.value:Z.programConfigurations.get(O.id).getMaxValue(_)}function Ql(_){return Math.sqrt(_[0]*_[0]+_[1]*_[1])}function bs(_,O,Z,ce,xe){if(!O[0]&&!O[1])return _;var we=l.convert(O)._mult(xe);Z==="viewport"&&we._rotate(-ce);for(var De=[],Ze=0;Ze<_.length;Ze++)De.push(_[Ze].sub(we));return De}Mo.prototype.populate=function(_,O,Z){var ce=this.layers[0],xe=[],we=null;ce.type==="circle"&&(we=ce.layout.get("circle-sort-key"));for(var De=0,Ze=_;De<Ze.length;De+=1){var pt=Ze[De],St=pt.feature,Ot=pt.id,Ht=pt.index,Qt=pt.sourceLayerIndex,lr=this.layers[0]._featureFilter.needGeometry,Mr={type:St.type,id:Ot,properties:St.properties,geometry:lr?Ao(St):[]};if(this.layers[0]._featureFilter.filter(new Xa(this.zoom),Mr,Z)){lr||(Mr.geometry=Ao(St));var Er=we?we.evaluate(Mr,{},Z):void 0;xe.push({id:Ot,properties:St.properties,type:St.type,sourceLayerIndex:Qt,index:Ht,geometry:Mr.geometry,patterns:{},sortKey:Er})}}we&&xe.sort(function(xa,La){return xa.sortKey-La.sortKey});for(var Kr=0,Br=xe;Kr<Br.length;Kr+=1){var sn=Br[Kr],vn=sn.geometry,Rn=sn.index,zn=sn.sourceLayerIndex,Zn=_[Rn].feature;this.addFeature(sn,vn,Rn,Z),O.featureIndex.insert(Zn,vn,Rn,zn,this.index)}},Mo.prototype.update=function(_,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_,O,this.stateDependentLayers,Z)},Mo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Mo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Mo.prototype.upload=function(_){this.uploaded||(this.layoutVertexBuffer=_.createVertexBuffer(this.layoutVertexArray,sr),this.indexBuffer=_.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(_),this.uploaded=!0},Mo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Mo.prototype.addFeature=function(_,O,Z,ce){for(var xe=0,we=O;xe<we.length;xe+=1)for(var De=0,Ze=we[xe];De<Ze.length;De+=1){var pt=Ze[De],St=pt.x,Ot=pt.y;if(!(St<0||St>=8192||Ot<0||Ot>=8192)){var Ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,_.sortKey),Qt=Ht.vertexLength;Qo(this.layoutVertexArray,St,Ot,-1,-1),Qo(this.layoutVertexArray,St,Ot,1,-1),Qo(this.layoutVertexArray,St,Ot,1,1),Qo(this.layoutVertexArray,St,Ot,-1,1),this.indexArray.emplaceBack(Qt,Qt+1,Qt+2),this.indexArray.emplaceBack(Qt,Qt+3,Qt+2),Ht.vertexLength+=4,Ht.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_,Z,{},ce)},ya("CircleBucket",Mo,{omit:["layers"]});var qc=new mi({"circle-sort-key":new Da(ke.layout_circle["circle-sort-key"])}),ef={paint:new mi({"circle-radius":new Da(ke.paint_circle["circle-radius"]),"circle-color":new Da(ke.paint_circle["circle-color"]),"circle-blur":new Da(ke.paint_circle["circle-blur"]),"circle-opacity":new Da(ke.paint_circle["circle-opacity"]),"circle-translate":new Oa(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new Oa(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Oa(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Oa(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Da(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Da(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Da(ke.paint_circle["circle-stroke-opacity"])}),layout:qc},vs=typeof Float32Array<"u"?Float32Array:Array;function pc(_){return _[0]=1,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=1,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[10]=1,_[11]=0,_[12]=0,_[13]=0,_[14]=0,_[15]=1,_}function is(_,O,Z){var ce=O[0],xe=O[1],we=O[2],De=O[3],Ze=O[4],pt=O[5],St=O[6],Ot=O[7],Ht=O[8],Qt=O[9],lr=O[10],Mr=O[11],Er=O[12],Kr=O[13],Br=O[14],sn=O[15],vn=Z[0],Rn=Z[1],zn=Z[2],Zn=Z[3];return _[0]=vn*ce+Rn*Ze+zn*Ht+Zn*Er,_[1]=vn*xe+Rn*pt+zn*Qt+Zn*Kr,_[2]=vn*we+Rn*St+zn*lr+Zn*Br,_[3]=vn*De+Rn*Ot+zn*Mr+Zn*sn,_[4]=(vn=Z[4])*ce+(Rn=Z[5])*Ze+(zn=Z[6])*Ht+(Zn=Z[7])*Er,_[5]=vn*xe+Rn*pt+zn*Qt+Zn*Kr,_[6]=vn*we+Rn*St+zn*lr+Zn*Br,_[7]=vn*De+Rn*Ot+zn*Mr+Zn*sn,_[8]=(vn=Z[8])*ce+(Rn=Z[9])*Ze+(zn=Z[10])*Ht+(Zn=Z[11])*Er,_[9]=vn*xe+Rn*pt+zn*Qt+Zn*Kr,_[10]=vn*we+Rn*St+zn*lr+Zn*Br,_[11]=vn*De+Rn*Ot+zn*Mr+Zn*sn,_[12]=(vn=Z[12])*ce+(Rn=Z[13])*Ze+(zn=Z[14])*Ht+(Zn=Z[15])*Er,_[13]=vn*xe+Rn*pt+zn*Qt+Zn*Kr,_[14]=vn*we+Rn*St+zn*lr+Zn*Br,_[15]=vn*De+Rn*Ot+zn*Mr+Zn*sn,_}Math.hypot||(Math.hypot=function(){for(var _=arguments,O=0,Z=arguments.length;Z--;)O+=_[Z]*_[Z];return Math.sqrt(O)});var Nl,Pl=is;function Ju(_,O,Z){var ce=O[0],xe=O[1],we=O[2],De=O[3];return _[0]=Z[0]*ce+Z[4]*xe+Z[8]*we+Z[12]*De,_[1]=Z[1]*ce+Z[5]*xe+Z[9]*we+Z[13]*De,_[2]=Z[2]*ce+Z[6]*xe+Z[10]*we+Z[14]*De,_[3]=Z[3]*ce+Z[7]*xe+Z[11]*we+Z[15]*De,_}Nl=new vs(3),vs!=Float32Array&&(Nl[0]=0,Nl[1]=0,Nl[2]=0),function(){var _=new vs(4);vs!=Float32Array&&(_[0]=0,_[1]=0,_[2]=0,_[3]=0)}();var od=(function(){var _=new vs(2);vs!=Float32Array&&(_[0]=0,_[1]=0)}(),function(_){function O(Z){_.call(this,Z,ef)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.createBucket=function(Z){return new Mo(Z)},O.prototype.queryRadius=function(Z){var ce=Z;return hc("circle-radius",this,ce)+hc("circle-stroke-width",this,ce)+Ql(this.paint.get("circle-translate"))},O.prototype.queryIntersectsFeature=function(Z,ce,xe,we,De,Ze,pt,St){for(var Ot=bs(Z,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ze.angle,pt),Ht=this.paint.get("circle-radius").evaluate(ce,xe)+this.paint.get("circle-stroke-width").evaluate(ce,xe),Qt=this.paint.get("circle-pitch-alignment")==="map",lr=Qt?Ot:function(xa,La){return xa.map(function(Ka){return Pf(Ka,La)})}(Ot,St),Mr=Qt?Ht*pt:Ht,Er=0,Kr=we;Er<Kr.length;Er+=1)for(var Br=0,sn=Kr[Er];Br<sn.length;Br+=1){var vn=sn[Br],Rn=Qt?vn:Pf(vn,St),zn=Mr,Zn=Ju([],[vn.x,vn.y,0,1],St);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?zn*=Zn[3]/Ze.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(zn*=Ze.cameraToCenterDistance/Zn[3]),xs(lr,Rn,zn))return!0}return!1},O}(pi));function Pf(_,O){var Z=Ju([],[_.x,_.y,0,1],O);return new l(Z[0]/Z[3],Z[1]/Z[3])}var Lh=function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O}(Mo);function Lc(_,O,Z,ce){var xe=O.width,we=O.height;if(ce){if(ce instanceof Uint8ClampedArray)ce=new Uint8Array(ce.buffer);else if(ce.length!==xe*we*Z)throw new RangeError("mismatched image size")}else ce=new Uint8Array(xe*we*Z);return _.width=xe,_.height=we,_.data=ce,_}function Ph(_,O,Z){var ce=O.width,xe=O.height;if(ce!==_.width||xe!==_.height){var we=Lc({},{width:ce,height:xe},Z);ql(_,we,{x:0,y:0},{x:0,y:0},{width:Math.min(_.width,ce),height:Math.min(_.height,xe)},Z),_.width=ce,_.height=xe,_.data=we.data}}function ql(_,O,Z,ce,xe,we){if(xe.width===0||xe.height===0)return O;if(xe.width>_.width||xe.height>_.height||Z.x>_.width-xe.width||Z.y>_.height-xe.height)throw new RangeError("out of range source coordinates for image copy");if(xe.width>O.width||xe.height>O.height||ce.x>O.width-xe.width||ce.y>O.height-xe.height)throw new RangeError("out of range destination coordinates for image copy");for(var De=_.data,Ze=O.data,pt=0;pt<xe.height;pt++)for(var St=((Z.y+pt)*_.width+Z.x)*we,Ot=((ce.y+pt)*O.width+ce.x)*we,Ht=0;Ht<xe.width*we;Ht++)Ze[Ot+Ht]=De[St+Ht];return O}ya("HeatmapBucket",Lh,{omit:["layers"]});var eu=function(_,O){Lc(this,_,1,O)};eu.prototype.resize=function(_){Ph(this,_,1)},eu.prototype.clone=function(){return new eu({width:this.width,height:this.height},new Uint8Array(this.data))},eu.copy=function(_,O,Z,ce,xe){ql(_,O,Z,ce,xe,1)};var os=function(_,O){Lc(this,_,4,O)};os.prototype.resize=function(_){Ph(this,_,4)},os.prototype.replace=function(_,O){O?this.data.set(_):this.data=_ instanceof Uint8ClampedArray?new Uint8Array(_.buffer):_},os.prototype.clone=function(){return new os({width:this.width,height:this.height},new Uint8Array(this.data))},os.copy=function(_,O,Z,ce,xe){ql(_,O,Z,ce,xe,4)},ya("AlphaImage",eu),ya("RGBAImage",os);var qd={paint:new mi({"heatmap-radius":new Da(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Da(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Oa(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ua(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Oa(ke.paint_heatmap["heatmap-opacity"])})};function ev(_,O){for(var Z=new Uint8Array(1024),ce={},xe=0,we=0;xe<256;xe++,we+=4){ce[O]=xe/255;var De=_.evaluate(ce);Z[we+0]=Math.floor(255*De.r/De.a),Z[we+1]=Math.floor(255*De.g/De.a),Z[we+2]=Math.floor(255*De.b/De.a),Z[we+3]=Math.floor(255*De.a)}return new os({width:256,height:1},Z)}var tv=function(_){function O(Z){_.call(this,Z,qd),this._updateColorRamp()}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.createBucket=function(Z){return new Lh(Z)},O.prototype._handleSpecialPaintPropertyUpdate=function(Z){Z==="heatmap-color"&&this._updateColorRamp()},O.prototype._updateColorRamp=function(){this.colorRamp=ev(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},O.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},O}(pi),x0={paint:new mi({"hillshade-illumination-direction":new Oa(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Oa(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Oa(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Oa(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Oa(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Oa(ke.paint_hillshade["hillshade-accent-color"])})},hp=function(_){function O(Z){_.call(this,Z,x0)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},O}(pi),sd=Ui([{name:"a_pos",components:2,type:"Int16"}],4).members,Dh=oh,b0=oh;function oh(_,O,Z){Z=Z||2;var ce,xe,we,De,Ze,pt,St,Ot=O&&O.length,Ht=Ot?O[0]*Z:_.length,Qt=Qi(_,0,Ht,Z,!0),lr=[];if(!Qt||Qt.next===Qt.prev)return lr;if(Ot&&(Qt=function(Er,Kr,Br,sn){var vn,Rn,zn,Zn=[];for(vn=0,Rn=Kr.length;vn<Rn;vn++)(zn=Qi(Er,Kr[vn]*sn,vn<Rn-1?Kr[vn+1]*sn:Er.length,sn,!1))===zn.next&&(zn.steiner=!0),Zn.push(ld(zn));for(Zn.sort(Pu),vn=0;vn<Zn.length;vn++)T0(Zn[vn],Br),Br=dc(Br,Br.next);return Br}(_,O,Qt,Z)),_.length>80*Z){ce=we=_[0],xe=De=_[1];for(var Mr=Z;Mr<Ht;Mr+=Z)(Ze=_[Mr])<ce&&(ce=Ze),(pt=_[Mr+1])<xe&&(xe=pt),Ze>we&&(we=Ze),pt>De&&(De=pt);St=(St=Math.max(we-ce,De-xe))!==0?1/St:0}return Df(Qt,lr,Z,ce,xe,St),lr}function Qi(_,O,Z,ce,xe){var we,De;if(xe===ud(_,O,Z,ce)>0)for(we=O;we<Z;we+=ce)De=vp(we,_[we],_[we+1],De);else for(we=Z-ce;we>=O;we-=ce)De=vp(we,_[we],_[we+1],De);return De&&sh(De,De.next)&&(If(De),De=De.next),De}function dc(_,O){if(!_)return _;O||(O=_);var Z,ce=_;do if(Z=!1,ce.steiner||!sh(ce,ce.next)&&No(ce.prev,ce,ce.next)!==0)ce=ce.next;else{if(If(ce),(ce=O=ce.prev)===ce.next)break;Z=!0}while(Z||ce!==O);return O}function Df(_,O,Z,ce,xe,we,De){if(_){!De&&we&&function(Ot,Ht,Qt,lr){var Mr=Ot;do Mr.z===null&&(Mr.z=Rf(Mr.x,Mr.y,Ht,Qt,lr)),Mr.prevZ=Mr.prev,Mr.nextZ=Mr.next,Mr=Mr.next;while(Mr!==Ot);Mr.prevZ.nextZ=null,Mr.prevZ=null,function(Er){var Kr,Br,sn,vn,Rn,zn,Zn,xa,La=1;do{for(Br=Er,Er=null,Rn=null,zn=0;Br;){for(zn++,sn=Br,Zn=0,Kr=0;Kr<La&&(Zn++,sn=sn.nextZ);Kr++);for(xa=La;Zn>0||xa>0&&sn;)Zn!==0&&(xa===0||!sn||Br.z<=sn.z)?(vn=Br,Br=Br.nextZ,Zn--):(vn=sn,sn=sn.nextZ,xa--),Rn?Rn.nextZ=vn:Er=vn,vn.prevZ=Rn,Rn=vn;Br=sn}Rn.nextZ=null,La*=2}while(zn>1)}(Mr)}(_,ce,xe,we);for(var Ze,pt,St=_;_.prev!==_.next;)if(Ze=_.prev,pt=_.next,we?rv(_,ce,xe,we):Rh(_))O.push(Ze.i/Z),O.push(_.i/Z),O.push(pt.i/Z),If(_),_=pt.next,St=pt.next;else if((_=pt)===St){De?De===1?Df(_=_0(dc(_),O,Z),O,Z,ce,xe,we,2):De===2&&w0(_,O,Z,ce,xe,we):Df(dc(_),O,Z,ce,xe,we,1);break}}}function Rh(_){var O=_.prev,Z=_,ce=_.next;if(No(O,Z,ce)>=0)return!1;for(var xe=_.next.next;xe!==_.prev;){if(tf(O.x,O.y,Z.x,Z.y,ce.x,ce.y,xe.x,xe.y)&&No(xe.prev,xe,xe.next)>=0)return!1;xe=xe.next}return!0}function rv(_,O,Z,ce){var xe=_.prev,we=_,De=_.next;if(No(xe,we,De)>=0)return!1;for(var Ze=xe.x>we.x?xe.x>De.x?xe.x:De.x:we.x>De.x?we.x:De.x,pt=xe.y>we.y?xe.y>De.y?xe.y:De.y:we.y>De.y?we.y:De.y,St=Rf(xe.x<we.x?xe.x<De.x?xe.x:De.x:we.x<De.x?we.x:De.x,xe.y<we.y?xe.y<De.y?xe.y:De.y:we.y<De.y?we.y:De.y,O,Z,ce),Ot=Rf(Ze,pt,O,Z,ce),Ht=_.prevZ,Qt=_.nextZ;Ht&&Ht.z>=St&&Qt&&Qt.z<=Ot;){if(Ht!==_.prev&&Ht!==_.next&&tf(xe.x,xe.y,we.x,we.y,De.x,De.y,Ht.x,Ht.y)&&No(Ht.prev,Ht,Ht.next)>=0||(Ht=Ht.prevZ,Qt!==_.prev&&Qt!==_.next&&tf(xe.x,xe.y,we.x,we.y,De.x,De.y,Qt.x,Qt.y)&&No(Qt.prev,Qt,Qt.next)>=0))return!1;Qt=Qt.nextZ}for(;Ht&&Ht.z>=St;){if(Ht!==_.prev&&Ht!==_.next&&tf(xe.x,xe.y,we.x,we.y,De.x,De.y,Ht.x,Ht.y)&&No(Ht.prev,Ht,Ht.next)>=0)return!1;Ht=Ht.prevZ}for(;Qt&&Qt.z<=Ot;){if(Qt!==_.prev&&Qt!==_.next&&tf(xe.x,xe.y,we.x,we.y,De.x,De.y,Qt.x,Qt.y)&&No(Qt.prev,Qt,Qt.next)>=0)return!1;Qt=Qt.nextZ}return!0}function _0(_,O,Z){var ce=_;do{var xe=ce.prev,we=ce.next.next;!sh(xe,we)&&dp(xe,ce,ce.next,we)&&Pc(xe,we)&&Pc(we,xe)&&(O.push(xe.i/Z),O.push(ce.i/Z),O.push(we.i/Z),If(ce),If(ce.next),ce=_=we),ce=ce.next}while(ce!==_);return dc(ce)}function w0(_,O,Z,ce,xe,we){var De=_;do{for(var Ze=De.next.next;Ze!==De.prev;){if(De.i!==Ze.i&&vu(De,Ze)){var pt=Ih(De,Ze);return De=dc(De,De.next),pt=dc(pt,pt.next),Df(De,O,Z,ce,xe,we),void Df(pt,O,Z,ce,xe,we)}Ze=Ze.next}De=De.next}while(De!==_)}function Pu(_,O){return _.x-O.x}function T0(_,O){if(O=function(ce,xe){var we,De=xe,Ze=ce.x,pt=ce.y,St=-1/0;do{if(pt<=De.y&&pt>=De.next.y&&De.next.y!==De.y){var Ot=De.x+(pt-De.y)*(De.next.x-De.x)/(De.next.y-De.y);if(Ot<=Ze&&Ot>St){if(St=Ot,Ot===Ze){if(pt===De.y)return De;if(pt===De.next.y)return De.next}we=De.x<De.next.x?De:De.next}}De=De.next}while(De!==xe);if(!we)return null;if(Ze===St)return we;var Ht,Qt=we,lr=we.x,Mr=we.y,Er=1/0;De=we;do Ze>=De.x&&De.x>=lr&&Ze!==De.x&&tf(pt<Mr?Ze:St,pt,lr,Mr,pt<Mr?St:Ze,pt,De.x,De.y)&&(Ht=Math.abs(pt-De.y)/(Ze-De.x),Pc(De,ce)&&(Ht<Er||Ht===Er&&(De.x>we.x||De.x===we.x&&pp(we,De)))&&(we=De,Er=Ht)),De=De.next;while(De!==Qt);return we}(_,O)){var Z=Ih(O,_);dc(O,O.next),dc(Z,Z.next)}}function pp(_,O){return No(_.prev,_,O.prev)<0&&No(O.next,_,_.next)<0}function Rf(_,O,Z,ce,xe){return(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_=32767*(_-Z)*xe)|_<<8))|_<<4))|_<<2))|_<<1))|(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-ce)*xe)|O<<8))|O<<4))|O<<2))|O<<1))<<1}function ld(_){var O=_,Z=_;do(O.x<Z.x||O.x===Z.x&&O.y<Z.y)&&(Z=O),O=O.next;while(O!==_);return Z}function tf(_,O,Z,ce,xe,we,De,Ze){return(xe-De)*(O-Ze)-(_-De)*(we-Ze)>=0&&(_-De)*(ce-Ze)-(Z-De)*(O-Ze)>=0&&(Z-De)*(we-Ze)-(xe-De)*(ce-Ze)>=0}function vu(_,O){return _.next.i!==O.i&&_.prev.i!==O.i&&!function(Z,ce){var xe=Z;do{if(xe.i!==Z.i&&xe.next.i!==Z.i&&xe.i!==ce.i&&xe.next.i!==ce.i&&dp(xe,xe.next,Z,ce))return!0;xe=xe.next}while(xe!==Z);return!1}(_,O)&&(Pc(_,O)&&Pc(O,_)&&function(Z,ce){var xe=Z,we=!1,De=(Z.x+ce.x)/2,Ze=(Z.y+ce.y)/2;do xe.y>Ze!=xe.next.y>Ze&&xe.next.y!==xe.y&&De<(xe.next.x-xe.x)*(Ze-xe.y)/(xe.next.y-xe.y)+xe.x&&(we=!we),xe=xe.next;while(xe!==Z);return we}(_,O)&&(No(_.prev,_,O.prev)||No(_,O.prev,O))||sh(_,O)&&No(_.prev,_,_.next)>0&&No(O.prev,O,O.next)>0)}function No(_,O,Z){return(O.y-_.y)*(Z.x-O.x)-(O.x-_.x)*(Z.y-O.y)}function sh(_,O){return _.x===O.x&&_.y===O.y}function dp(_,O,Z,ce){var xe=lh(No(_,O,Z)),we=lh(No(_,O,ce)),De=lh(No(Z,ce,_)),Ze=lh(No(Z,ce,O));return xe!==we&&De!==Ze||!(xe!==0||!rf(_,Z,O))||!(we!==0||!rf(_,ce,O))||!(De!==0||!rf(Z,_,ce))||!(Ze!==0||!rf(Z,O,ce))}function rf(_,O,Z){return O.x<=Math.max(_.x,Z.x)&&O.x>=Math.min(_.x,Z.x)&&O.y<=Math.max(_.y,Z.y)&&O.y>=Math.min(_.y,Z.y)}function lh(_){return _>0?1:_<0?-1:0}function Pc(_,O){return No(_.prev,_,_.next)<0?No(_,O,_.next)>=0&&No(_,_.prev,O)>=0:No(_,O,_.prev)<0||No(_,_.next,O)<0}function Ih(_,O){var Z=new vc(_.i,_.x,_.y),ce=new vc(O.i,O.x,O.y),xe=_.next,we=O.prev;return _.next=O,O.prev=_,Z.next=xe,xe.prev=Z,ce.next=Z,Z.prev=ce,we.next=ce,ce.prev=we,ce}function vp(_,O,Z,ce){var xe=new vc(_,O,Z);return ce?(xe.next=ce.next,xe.prev=ce,ce.next.prev=xe,ce.next=xe):(xe.prev=xe,xe.next=xe),xe}function If(_){_.next.prev=_.prev,_.prev.next=_.next,_.prevZ&&(_.prevZ.nextZ=_.nextZ),_.nextZ&&(_.nextZ.prevZ=_.prevZ)}function vc(_,O,Z){this.i=_,this.x=O,this.y=Z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ud(_,O,Z,ce){for(var xe=0,we=O,De=Z-ce;we<Z;we+=ce)xe+=(_[De]-_[we])*(_[we+1]+_[De+1]),De=we;return xe}function nf(_,O,Z,ce,xe){(function we(De,Ze,pt,St,Ot){for(;St>pt;){if(St-pt>600){var Ht=St-pt+1,Qt=Ze-pt+1,lr=Math.log(Ht),Mr=.5*Math.exp(2*lr/3),Er=.5*Math.sqrt(lr*Mr*(Ht-Mr)/Ht)*(Qt-Ht/2<0?-1:1);we(De,Ze,Math.max(pt,Math.floor(Ze-Qt*Mr/Ht+Er)),Math.min(St,Math.floor(Ze+(Ht-Qt)*Mr/Ht+Er)),Ot)}var Kr=De[Ze],Br=pt,sn=St;for(zf(De,pt,Ze),Ot(De[St],Kr)>0&&zf(De,pt,St);Br<sn;){for(zf(De,Br,sn),Br++,sn--;Ot(De[Br],Kr)<0;)Br++;for(;Ot(De[sn],Kr)>0;)sn--}Ot(De[pt],Kr)===0?zf(De,pt,sn):zf(De,++sn,St),sn<=Ze&&(pt=sn+1),Ze<=sn&&(St=sn-1)}})(_,O,Z||0,ce||_.length-1,xe||cd)}function zf(_,O,Z){var ce=_[O];_[O]=_[Z],_[Z]=ce}function cd(_,O){return _<O?-1:_>O?1:0}function Of(_,O){var Z=_.length;if(Z<=1)return[_];for(var ce,xe,we=[],De=0;De<Z;De++){var Ze=C(_[De]);Ze!==0&&(_[De].area=Math.abs(Ze),xe===void 0&&(xe=Ze<0),xe===Ze<0?(ce&&we.push(ce),ce=[_[De]]):ce.push(_[De]))}if(ce&&we.push(ce),O>1)for(var pt=0;pt<we.length;pt++)we[pt].length<=O||(nf(we[pt],O,1,we[pt].length-1,nv),we[pt]=we[pt].slice(0,O));return we}function nv(_,O){return O.area-_.area}function af(_,O,Z){for(var ce=Z.patternDependencies,xe=!1,we=0,De=O;we<De.length;we+=1){var Ze=De[we].paint.get(_+"-pattern");Ze.isConstant()||(xe=!0);var pt=Ze.constantOr(null);pt&&(xe=!0,ce[pt.to]=!0,ce[pt.from]=!0)}return xe}function uh(_,O,Z,ce,xe){for(var we=xe.patternDependencies,De=0,Ze=O;De<Ze.length;De+=1){var pt=Ze[De],St=pt.paint.get(_+"-pattern").value;if(St.kind!=="constant"){var Ot=St.evaluate({zoom:ce-1},Z,{},xe.availableImages),Ht=St.evaluate({zoom:ce},Z,{},xe.availableImages),Qt=St.evaluate({zoom:ce+1},Z,{},xe.availableImages);Ht=Ht&&Ht.name?Ht.name:Ht,Qt=Qt&&Qt.name?Qt.name:Qt,we[Ot=Ot&&Ot.name?Ot.name:Ot]=!0,we[Ht]=!0,we[Qt]=!0,Z.patterns[pt.id]={min:Ot,mid:Ht,max:Qt}}}return Z}oh.deviation=function(_,O,Z,ce){var xe=O&&O.length,we=Math.abs(ud(_,0,xe?O[0]*Z:_.length,Z));if(xe)for(var De=0,Ze=O.length;De<Ze;De++)we-=Math.abs(ud(_,O[De]*Z,De<Ze-1?O[De+1]*Z:_.length,Z));var pt=0;for(De=0;De<ce.length;De+=3){var St=ce[De]*Z,Ot=ce[De+1]*Z,Ht=ce[De+2]*Z;pt+=Math.abs((_[St]-_[Ht])*(_[Ot+1]-_[St+1])-(_[St]-_[Ot])*(_[Ht+1]-_[St+1]))}return we===0&&pt===0?0:Math.abs((pt-we)/we)},oh.flatten=function(_){for(var O=_[0][0].length,Z={vertices:[],holes:[],dimensions:O},ce=0,xe=0;xe<_.length;xe++){for(var we=0;we<_[xe].length;we++)for(var De=0;De<O;De++)Z.vertices.push(_[xe][we][De]);xe>0&&Z.holes.push(ce+=_[xe-1].length)}return Z},Dh.default=b0;var Nu=function(_){this.zoom=_.zoom,this.overscaling=_.overscaling,this.layers=_.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=_.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ds,this.indexArray=new ns,this.indexArray2=new fo,this.programConfigurations=new Ha(sd,_.layers,_.zoom),this.segments=new pr,this.segments2=new pr,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};Nu.prototype.populate=function(_,O,Z){this.hasPattern=af("fill",this.layers,O);for(var ce=this.layers[0].layout.get("fill-sort-key"),xe=[],we=0,De=_;we<De.length;we+=1){var Ze=De[we],pt=Ze.feature,St=Ze.id,Ot=Ze.index,Ht=Ze.sourceLayerIndex,Qt=this.layers[0]._featureFilter.needGeometry,lr={type:pt.type,id:St,properties:pt.properties,geometry:Qt?Ao(pt):[]};if(this.layers[0]._featureFilter.filter(new Xa(this.zoom),lr,Z)){Qt||(lr.geometry=Ao(pt));var Mr=ce?ce.evaluate(lr,{},Z,O.availableImages):void 0;xe.push({id:St,properties:pt.properties,type:pt.type,sourceLayerIndex:Ht,index:Ot,geometry:lr.geometry,patterns:{},sortKey:Mr})}}ce&&xe.sort(function(Zn,xa){return Zn.sortKey-xa.sortKey});for(var Er=0,Kr=xe;Er<Kr.length;Er+=1){var Br=Kr[Er],sn=Br.geometry,vn=Br.index,Rn=Br.sourceLayerIndex;if(this.hasPattern){var zn=uh("fill",this.layers,Br,this.zoom,O);this.patternFeatures.push(zn)}else this.addFeature(Br,sn,vn,Z,{});O.featureIndex.insert(_[vn].feature,sn,vn,Rn,this.index)}},Nu.prototype.update=function(_,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_,O,this.stateDependentLayers,Z)},Nu.prototype.addFeatures=function(_,O,Z){for(var ce=0,xe=this.patternFeatures;ce<xe.length;ce+=1){var we=xe[ce];this.addFeature(we,we.geometry,we.index,O,Z)}},Nu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Nu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Nu.prototype.upload=function(_){this.uploaded||(this.layoutVertexBuffer=_.createVertexBuffer(this.layoutVertexArray,sd),this.indexBuffer=_.createIndexBuffer(this.indexArray),this.indexBuffer2=_.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(_),this.uploaded=!0},Nu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Nu.prototype.addFeature=function(_,O,Z,ce,xe){for(var we=0,De=Of(O,500);we<De.length;we+=1){for(var Ze=De[we],pt=0,St=0,Ot=Ze;St<Ot.length;St+=1)pt+=Ot[St].length;for(var Ht=this.segments.prepareSegment(pt,this.layoutVertexArray,this.indexArray),Qt=Ht.vertexLength,lr=[],Mr=[],Er=0,Kr=Ze;Er<Kr.length;Er+=1){var Br=Kr[Er];if(Br.length!==0){Br!==Ze[0]&&Mr.push(lr.length/2);var sn=this.segments2.prepareSegment(Br.length,this.layoutVertexArray,this.indexArray2),vn=sn.vertexLength;this.layoutVertexArray.emplaceBack(Br[0].x,Br[0].y),this.indexArray2.emplaceBack(vn+Br.length-1,vn),lr.push(Br[0].x),lr.push(Br[0].y);for(var Rn=1;Rn<Br.length;Rn++)this.layoutVertexArray.emplaceBack(Br[Rn].x,Br[Rn].y),this.indexArray2.emplaceBack(vn+Rn-1,vn+Rn),lr.push(Br[Rn].x),lr.push(Br[Rn].y);sn.vertexLength+=Br.length,sn.primitiveLength+=Br.length}}for(var zn=Dh(lr,Mr),Zn=0;Zn<zn.length;Zn+=3)this.indexArray.emplaceBack(Qt+zn[Zn],Qt+zn[Zn+1],Qt+zn[Zn+2]);Ht.vertexLength+=pt,Ht.primitiveLength+=zn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_,Z,xe,ce)},ya("FillBucket",Nu,{omit:["layers","patternFeatures"]});var zh=new mi({"fill-sort-key":new Da(ke.layout_fill["fill-sort-key"])}),av={paint:new mi({"fill-antialias":new Oa(ke.paint_fill["fill-antialias"]),"fill-opacity":new Da(ke.paint_fill["fill-opacity"]),"fill-color":new Da(ke.paint_fill["fill-color"]),"fill-outline-color":new Da(ke.paint_fill["fill-outline-color"]),"fill-translate":new Oa(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new Oa(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new Za(ke.paint_fill["fill-pattern"])}),layout:zh},iv=function(_){function O(Z){_.call(this,Z,av)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.recalculate=function(Z,ce){_.prototype.recalculate.call(this,Z,ce);var xe=this.paint._values["fill-outline-color"];xe.value.kind==="constant"&&xe.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},O.prototype.createBucket=function(Z){return new Nu(Z)},O.prototype.queryRadius=function(){return Ql(this.paint.get("fill-translate"))},O.prototype.queryIntersectsFeature=function(Z,ce,xe,we,De,Ze,pt){return Jl(bs(Z,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ze.angle,pt),we)},O.prototype.isTileClipped=function(){return!0},O}(pi),fd=Ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Bl=Dl;function Dl(_,O,Z,ce,xe){this.properties={},this.extent=Z,this.type=0,this._pbf=_,this._geometry=-1,this._keys=ce,this._values=xe,_.readFields(ov,this,O)}function ov(_,O,Z){_==1?O.id=Z.readVarint():_==2?function(ce,xe){for(var we=ce.readVarint()+ce.pos;ce.pos<we;){var De=xe._keys[ce.readVarint()],Ze=xe._values[ce.readVarint()];xe.properties[De]=Ze}}(Z,O):_==3?O.type=Z.readVarint():_==4&&(O._geometry=Z.pos)}function ch(_){for(var O,Z,ce=0,xe=0,we=_.length,De=we-1;xe<we;De=xe++)ce+=((Z=_[De]).x-(O=_[xe]).x)*(O.y+Z.y);return ce}Dl.types=["Unknown","Point","LineString","Polygon"],Dl.prototype.loadGeometry=function(){var _=this._pbf;_.pos=this._geometry;for(var O,Z=_.readVarint()+_.pos,ce=1,xe=0,we=0,De=0,Ze=[];_.pos<Z;){if(xe<=0){var pt=_.readVarint();ce=7&pt,xe=pt>>3}if(xe--,ce===1||ce===2)we+=_.readSVarint(),De+=_.readSVarint(),ce===1&&(O&&Ze.push(O),O=[]),O.push(new l(we,De));else{if(ce!==7)throw new Error("unknown command "+ce);O&&O.push(O[0].clone())}}return O&&Ze.push(O),Ze},Dl.prototype.bbox=function(){var _=this._pbf;_.pos=this._geometry;for(var O=_.readVarint()+_.pos,Z=1,ce=0,xe=0,we=0,De=1/0,Ze=-1/0,pt=1/0,St=-1/0;_.pos<O;){if(ce<=0){var Ot=_.readVarint();Z=7&Ot,ce=Ot>>3}if(ce--,Z===1||Z===2)(xe+=_.readSVarint())<De&&(De=xe),xe>Ze&&(Ze=xe),(we+=_.readSVarint())<pt&&(pt=we),we>St&&(St=we);else if(Z!==7)throw new Error("unknown command "+Z)}return[De,pt,Ze,St]},Dl.prototype.toGeoJSON=function(_,O,Z){var ce,xe,we=this.extent*Math.pow(2,Z),De=this.extent*_,Ze=this.extent*O,pt=this.loadGeometry(),St=Dl.types[this.type];function Ot(lr){for(var Mr=0;Mr<lr.length;Mr++){var Er=lr[Mr];lr[Mr]=[360*(Er.x+De)/we-180,360/Math.PI*Math.atan(Math.exp((180-360*(Er.y+Ze)/we)*Math.PI/180))-90]}}switch(this.type){case 1:var Ht=[];for(ce=0;ce<pt.length;ce++)Ht[ce]=pt[ce][0];Ot(pt=Ht);break;case 2:for(ce=0;ce<pt.length;ce++)Ot(pt[ce]);break;case 3:for(pt=function(lr){var Mr=lr.length;if(Mr<=1)return[lr];for(var Er,Kr,Br=[],sn=0;sn<Mr;sn++){var vn=ch(lr[sn]);vn!==0&&(Kr===void 0&&(Kr=vn<0),Kr===vn<0?(Er&&Br.push(Er),Er=[lr[sn]]):Er.push(lr[sn]))}return Er&&Br.push(Er),Br}(pt),ce=0;ce<pt.length;ce++)for(xe=0;xe<pt[ce].length;xe++)Ot(pt[ce][xe])}pt.length===1?pt=pt[0]:St="Multi"+St;var Qt={type:"Feature",geometry:{type:St,coordinates:pt},properties:this.properties};return"id"in this&&(Qt.id=this.id),Qt};var Ff=Dc;function Dc(_,O){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=_,this._keys=[],this._values=[],this._features=[],_.readFields(sv,this,O),this.length=this._features.length}function sv(_,O,Z){_===15?O.version=Z.readVarint():_===1?O.name=Z.readString():_===5?O.extent=Z.readVarint():_===2?O._features.push(Z.pos):_===3?O._keys.push(Z.readString()):_===4&&O._values.push(function(ce){for(var xe=null,we=ce.readVarint()+ce.pos;ce.pos<we;){var De=ce.readVarint()>>3;xe=De===1?ce.readString():De===2?ce.readFloat():De===3?ce.readDouble():De===4?ce.readVarint64():De===5?ce.readVarint():De===6?ce.readSVarint():De===7?ce.readBoolean():null}return xe}(Z))}function Oh(_,O,Z){if(_===3){var ce=new Ff(Z,Z.readVarint()+Z.pos);ce.length&&(O[ce.name]=ce)}}Dc.prototype.feature=function(_){if(_<0||_>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[_];var O=this._pbf.readVarint()+this._pbf.pos;return new Bl(this._pbf,O,this.extent,this._keys,this._values)};var fh={VectorTile:function(_,O){this.layers=_.readFields(Oh,{},O)},VectorTileFeature:Bl,VectorTileLayer:Ff},hd=fh.VectorTileFeature.types,Rc=Math.pow(2,13);function Ic(_,O,Z,ce,xe,we,De,Ze){_.emplaceBack(O,Z,2*Math.floor(ce*Rc)+De,xe*Rc*2,we*Rc*2,Math.round(Ze))}var Bu=function(_){this.zoom=_.zoom,this.overscaling=_.overscaling,this.layers=_.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=_.index,this.hasPattern=!1,this.layoutVertexArray=new To,this.indexArray=new ns,this.programConfigurations=new Ha(fd,_.layers,_.zoom),this.segments=new pr,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function Fh(_,O){return _.x===O.x&&(_.x<0||_.x>8192)||_.y===O.y&&(_.y<0||_.y>8192)}Bu.prototype.populate=function(_,O,Z){this.features=[],this.hasPattern=af("fill-extrusion",this.layers,O);for(var ce=0,xe=_;ce<xe.length;ce+=1){var we=xe[ce],De=we.feature,Ze=we.id,pt=we.index,St=we.sourceLayerIndex,Ot=this.layers[0]._featureFilter.needGeometry,Ht={type:De.type,id:Ze,properties:De.properties,geometry:Ot?Ao(De):[]};if(this.layers[0]._featureFilter.filter(new Xa(this.zoom),Ht,Z)){var Qt={id:Ze,sourceLayerIndex:St,index:pt,geometry:Ot?Ht.geometry:Ao(De),properties:De.properties,type:De.type,patterns:{}};De.id!==void 0&&(Qt.id=De.id),this.hasPattern?this.features.push(uh("fill-extrusion",this.layers,Qt,this.zoom,O)):this.addFeature(Qt,Qt.geometry,pt,Z,{}),O.featureIndex.insert(De,Qt.geometry,pt,St,this.index,!0)}}},Bu.prototype.addFeatures=function(_,O,Z){for(var ce=0,xe=this.features;ce<xe.length;ce+=1){var we=xe[ce];this.addFeature(we,we.geometry,we.index,O,Z)}},Bu.prototype.update=function(_,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_,O,this.stateDependentLayers,Z)},Bu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Bu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Bu.prototype.upload=function(_){this.uploaded||(this.layoutVertexBuffer=_.createVertexBuffer(this.layoutVertexArray,fd),this.indexBuffer=_.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(_),this.uploaded=!0},Bu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Bu.prototype.addFeature=function(_,O,Z,ce,xe){for(var we=0,De=Of(O,500);we<De.length;we+=1){for(var Ze=De[we],pt=0,St=0,Ot=Ze;St<Ot.length;St+=1)pt+=Ot[St].length;for(var Ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Qt=0,lr=Ze;Qt<lr.length;Qt+=1){var Mr=lr[Qt];if(Mr.length!==0&&!((Wi=Mr).every(function(Ei){return Ei.x<0})||Wi.every(function(Ei){return Ei.x>8192})||Wi.every(function(Ei){return Ei.y<0})||Wi.every(function(Ei){return Ei.y>8192})))for(var Er=0,Kr=0;Kr<Mr.length;Kr++){var Br=Mr[Kr];if(Kr>=1){var sn=Mr[Kr-1];if(!Fh(Br,sn)){Ht.vertexLength+4>pr.MAX_VERTEX_ARRAY_LENGTH&&(Ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var vn=Br.sub(sn)._perp()._unit(),Rn=sn.dist(Br);Er+Rn>32768&&(Er=0),Ic(this.layoutVertexArray,Br.x,Br.y,vn.x,vn.y,0,0,Er),Ic(this.layoutVertexArray,Br.x,Br.y,vn.x,vn.y,0,1,Er),Ic(this.layoutVertexArray,sn.x,sn.y,vn.x,vn.y,0,0,Er+=Rn),Ic(this.layoutVertexArray,sn.x,sn.y,vn.x,vn.y,0,1,Er);var zn=Ht.vertexLength;this.indexArray.emplaceBack(zn,zn+2,zn+1),this.indexArray.emplaceBack(zn+1,zn+2,zn+3),Ht.vertexLength+=4,Ht.primitiveLength+=2}}}}if(Ht.vertexLength+pt>pr.MAX_VERTEX_ARRAY_LENGTH&&(Ht=this.segments.prepareSegment(pt,this.layoutVertexArray,this.indexArray)),hd[_.type]==="Polygon"){for(var Zn=[],xa=[],La=Ht.vertexLength,Ka=0,Ba=Ze;Ka<Ba.length;Ka+=1){var ei=Ba[Ka];if(ei.length!==0){ei!==Ze[0]&&xa.push(Zn.length/2);for(var za=0;za<ei.length;za++){var Ii=ei[za];Ic(this.layoutVertexArray,Ii.x,Ii.y,0,0,1,1,0),Zn.push(Ii.x),Zn.push(Ii.y)}}}for(var bi=Dh(Zn,xa),Ga=0;Ga<bi.length;Ga+=3)this.indexArray.emplaceBack(La+bi[Ga],La+bi[Ga+2],La+bi[Ga+1]);Ht.primitiveLength+=bi.length/3,Ht.vertexLength+=pt}}var Wi;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_,Z,xe,ce)},ya("FillExtrusionBucket",Bu,{omit:["layers","features"]});var pd={paint:new mi({"fill-extrusion-opacity":new Oa(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Da(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Oa(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Oa(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Za(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Da(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Da(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Oa(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},mp=function(_){function O(Z){_.call(this,Z,pd)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.createBucket=function(Z){return new Bu(Z)},O.prototype.queryRadius=function(){return Ql(this.paint.get("fill-extrusion-translate"))},O.prototype.is3D=function(){return!0},O.prototype.queryIntersectsFeature=function(Z,ce,xe,we,De,Ze,pt,St){var Ot=bs(Z,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ze.angle,pt),Ht=this.paint.get("fill-extrusion-height").evaluate(ce,xe),Qt=this.paint.get("fill-extrusion-base").evaluate(ce,xe),lr=function(Er,Kr,Br,sn){for(var vn=[],Rn=0,zn=Er;Rn<zn.length;Rn+=1){var Zn=zn[Rn],xa=[Zn.x,Zn.y,0,1];Ju(xa,xa,Kr),vn.push(new l(xa[0]/xa[3],xa[1]/xa[3]))}return vn}(Ot,St),Mr=function(Er,Kr,Br,sn){for(var vn=[],Rn=[],zn=sn[8]*Kr,Zn=sn[9]*Kr,xa=sn[10]*Kr,La=sn[11]*Kr,Ka=sn[8]*Br,Ba=sn[9]*Br,ei=sn[10]*Br,za=sn[11]*Br,Ii=0,bi=Er;Ii<bi.length;Ii+=1){for(var Ga=[],Wi=[],Ei=0,no=bi[Ii];Ei<no.length;Ei+=1){var Ja=no[Ei],ho=Ja.x,Vo=Ja.y,$s=sn[0]*ho+sn[4]*Vo+sn[12],Qs=sn[1]*ho+sn[5]*Vo+sn[13],Ko=sn[2]*ho+sn[6]*Vo+sn[14],us=sn[3]*ho+sn[7]*Vo+sn[15],Io=Ko+xa,Os=us+La,Gl=$s+Ka,Fs=Qs+Ba,Wl=Ko+ei,Ns=us+za,Bs=new l(($s+zn)/Os,(Qs+Zn)/Os);Bs.z=Io/Os,Ga.push(Bs);var Ji=new l(Gl/Ns,Fs/Ns);Ji.z=Wl/Ns,Wi.push(Ji)}vn.push(Ga),Rn.push(Wi)}return[vn,Rn]}(we,Qt,Ht,St);return function(Er,Kr,Br){var sn=1/0;Jl(Br,Kr)&&(sn=Nh(Br,Kr[0]));for(var vn=0;vn<Kr.length;vn++)for(var Rn=Kr[vn],zn=Er[vn],Zn=0;Zn<Rn.length-1;Zn++){var xa=Rn[Zn],La=[xa,Rn[Zn+1],zn[Zn+1],zn[Zn],xa];du(Br,La)&&(sn=Math.min(sn,Nh(Br,La)))}return sn!==1/0&&sn}(Mr[0],Mr[1],lr)},O}(pi);function hh(_,O){return _.x*O.x+_.y*O.y}function Nh(_,O){if(_.length===1){for(var Z,ce=0,xe=O[ce++];!Z||xe.equals(Z);)if(!(Z=O[ce++]))return 1/0;for(;ce<O.length;ce++){var we=O[ce],De=_[0],Ze=Z.sub(xe),pt=we.sub(xe),St=De.sub(xe),Ot=hh(Ze,Ze),Ht=hh(Ze,pt),Qt=hh(pt,pt),lr=hh(St,Ze),Mr=hh(St,pt),Er=Ot*Qt-Ht*Ht,Kr=(Qt*lr-Ht*Mr)/Er,Br=(Ot*Mr-Ht*lr)/Er,sn=xe.z*(1-Kr-Br)+Z.z*Kr+we.z*Br;if(isFinite(sn))return sn}return 1/0}for(var vn=1/0,Rn=0,zn=O;Rn<zn.length;Rn+=1)vn=Math.min(vn,zn[Rn].z);return vn}var gp=Ui([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Bh=fh.VectorTileFeature.types,lv=Math.cos(Math.PI/180*37.5),yp=Math.pow(2,14)/.5,Xs=function(_){this.zoom=_.zoom,this.overscaling=_.overscaling,this.layers=_.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=_.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new co,this.indexArray=new ns,this.programConfigurations=new Ha(gp,_.layers,_.zoom),this.segments=new pr,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};Xs.prototype.populate=function(_,O,Z){this.hasPattern=af("line",this.layers,O);for(var ce=this.layers[0].layout.get("line-sort-key"),xe=[],we=0,De=_;we<De.length;we+=1){var Ze=De[we],pt=Ze.feature,St=Ze.id,Ot=Ze.index,Ht=Ze.sourceLayerIndex,Qt=this.layers[0]._featureFilter.needGeometry,lr={type:pt.type,id:St,properties:pt.properties,geometry:Qt?Ao(pt):[]};if(this.layers[0]._featureFilter.filter(new Xa(this.zoom),lr,Z)){Qt||(lr.geometry=Ao(pt));var Mr=ce?ce.evaluate(lr,{},Z):void 0;xe.push({id:St,properties:pt.properties,type:pt.type,sourceLayerIndex:Ht,index:Ot,geometry:lr.geometry,patterns:{},sortKey:Mr})}}ce&&xe.sort(function(Zn,xa){return Zn.sortKey-xa.sortKey});for(var Er=0,Kr=xe;Er<Kr.length;Er+=1){var Br=Kr[Er],sn=Br.geometry,vn=Br.index,Rn=Br.sourceLayerIndex;if(this.hasPattern){var zn=uh("line",this.layers,Br,this.zoom,O);this.patternFeatures.push(zn)}else this.addFeature(Br,sn,vn,Z,{});O.featureIndex.insert(_[vn].feature,sn,vn,Rn,this.index)}},Xs.prototype.update=function(_,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_,O,this.stateDependentLayers,Z)},Xs.prototype.addFeatures=function(_,O,Z){for(var ce=0,xe=this.patternFeatures;ce<xe.length;ce+=1){var we=xe[ce];this.addFeature(we,we.geometry,we.index,O,Z)}},Xs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Xs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xs.prototype.upload=function(_){this.uploaded||(this.layoutVertexBuffer=_.createVertexBuffer(this.layoutVertexArray,gp),this.indexBuffer=_.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(_),this.uploaded=!0},Xs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xs.prototype.addFeature=function(_,O,Z,ce,xe){for(var we=this.layers[0].layout,De=we.get("line-join").evaluate(_,{}),Ze=we.get("line-cap"),pt=we.get("line-miter-limit"),St=we.get("line-round-limit"),Ot=0,Ht=O;Ot<Ht.length;Ot+=1)this.addLine(Ht[Ot],_,De,Ze,pt,St);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_,Z,xe,ce)},Xs.prototype.addLine=function(_,O,Z,ce,xe,we){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,O.properties&&O.properties.hasOwnProperty("mapbox_clip_start")&&O.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+O.properties.mapbox_clip_start,this.clipEnd=+O.properties.mapbox_clip_end;for(var De=0;De<_.length-1;De++)this.totalDistance+=_[De].dist(_[De+1]);this.updateScaledDistance()}for(var Ze=Bh[O.type]==="Polygon",pt=_.length;pt>=2&&_[pt-1].equals(_[pt-2]);)pt--;for(var St=0;St<pt-1&&_[St].equals(_[St+1]);)St++;if(!(pt<(Ze?3:2))){Z==="bevel"&&(xe=1.05);var Ot,Ht=this.overscaling<=16?122880/(512*this.overscaling):0,Qt=this.segments.prepareSegment(10*pt,this.layoutVertexArray,this.indexArray),lr=void 0,Mr=void 0,Er=void 0,Kr=void 0;this.e1=this.e2=-1,Ze&&(Kr=_[St].sub(Ot=_[pt-2])._unit()._perp());for(var Br=St;Br<pt;Br++)if(!(Mr=Br===pt-1?Ze?_[St+1]:void 0:_[Br+1])||!_[Br].equals(Mr)){Kr&&(Er=Kr),Ot&&(lr=Ot),Ot=_[Br],Kr=Mr?Mr.sub(Ot)._unit()._perp():Er;var sn=(Er=Er||Kr).add(Kr);sn.x===0&&sn.y===0||sn._unit();var vn=Er.x*Kr.x+Er.y*Kr.y,Rn=sn.x*Kr.x+sn.y*Kr.y,zn=Rn!==0?1/Rn:1/0,Zn=2*Math.sqrt(2-2*Rn),xa=Rn<lv&&lr&&Mr,La=Er.x*Kr.y-Er.y*Kr.x>0;if(xa&&Br>St){var Ka=Ot.dist(lr);if(Ka>2*Ht){var Ba=Ot.sub(Ot.sub(lr)._mult(Ht/Ka)._round());this.updateDistance(lr,Ba),this.addCurrentVertex(Ba,Er,0,0,Qt),lr=Ba}}var ei=lr&&Mr,za=ei?Z:Ze?"butt":ce;if(ei&&za==="round"&&(zn<we?za="miter":zn<=2&&(za="fakeround")),za==="miter"&&zn>xe&&(za="bevel"),za==="bevel"&&(zn>2&&(za="flipbevel"),zn<xe&&(za="miter")),lr&&this.updateDistance(lr,Ot),za==="miter")sn._mult(zn),this.addCurrentVertex(Ot,sn,0,0,Qt);else if(za==="flipbevel"){if(zn>100)sn=Kr.mult(-1);else{var Ii=zn*Er.add(Kr).mag()/Er.sub(Kr).mag();sn._perp()._mult(Ii*(La?-1:1))}this.addCurrentVertex(Ot,sn,0,0,Qt),this.addCurrentVertex(Ot,sn.mult(-1),0,0,Qt)}else if(za==="bevel"||za==="fakeround"){var bi=-Math.sqrt(zn*zn-1),Ga=La?bi:0,Wi=La?0:bi;if(lr&&this.addCurrentVertex(Ot,Er,Ga,Wi,Qt),za==="fakeround")for(var Ei=Math.round(180*Zn/Math.PI/20),no=1;no<Ei;no++){var Ja=no/Ei;if(Ja!==.5){var ho=Ja-.5;Ja+=Ja*ho*(Ja-1)*((1.0904+vn*(vn*(3.55645-1.43519*vn)-3.2452))*ho*ho+(.848013+vn*(.215638*vn-1.06021)))}var Vo=Kr.sub(Er)._mult(Ja)._add(Er)._unit()._mult(La?-1:1);this.addHalfVertex(Ot,Vo.x,Vo.y,!1,La,0,Qt)}Mr&&this.addCurrentVertex(Ot,Kr,-Ga,-Wi,Qt)}else if(za==="butt")this.addCurrentVertex(Ot,sn,0,0,Qt);else if(za==="square"){var $s=lr?1:-1;this.addCurrentVertex(Ot,sn,$s,$s,Qt)}else za==="round"&&(lr&&(this.addCurrentVertex(Ot,Er,0,0,Qt),this.addCurrentVertex(Ot,Er,1,1,Qt,!0)),Mr&&(this.addCurrentVertex(Ot,Kr,-1,-1,Qt,!0),this.addCurrentVertex(Ot,Kr,0,0,Qt)));if(xa&&Br<pt-1){var Qs=Ot.dist(Mr);if(Qs>2*Ht){var Ko=Ot.add(Mr.sub(Ot)._mult(Ht/Qs)._round());this.updateDistance(Ot,Ko),this.addCurrentVertex(Ko,Kr,0,0,Qt),Ot=Ko}}}}},Xs.prototype.addCurrentVertex=function(_,O,Z,ce,xe,we){we===void 0&&(we=!1);var De=O.y*ce-O.x,Ze=-O.y-O.x*ce;this.addHalfVertex(_,O.x+O.y*Z,O.y-O.x*Z,we,!1,Z,xe),this.addHalfVertex(_,De,Ze,we,!0,-ce,xe),this.distance>yp/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(_,O,Z,ce,xe,we))},Xs.prototype.addHalfVertex=function(_,O,Z,ce,xe,we,De){var Ze=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((_.x<<1)+(ce?1:0),(_.y<<1)+(xe?1:0),Math.round(63*O)+128,Math.round(63*Z)+128,1+(we===0?0:we<0?-1:1)|(63&Ze)<<2,Ze>>6);var pt=De.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,pt),De.primitiveLength++),xe?this.e2=pt:this.e1=pt},Xs.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(yp-1):this.distance},Xs.prototype.updateDistance=function(_,O){this.distance+=_.dist(O),this.updateScaledDistance()},ya("LineBucket",Xs,{omit:["layers","patternFeatures"]});var uv=new mi({"line-cap":new Oa(ke.layout_line["line-cap"]),"line-join":new Da(ke.layout_line["line-join"]),"line-miter-limit":new Oa(ke.layout_line["line-miter-limit"]),"line-round-limit":new Oa(ke.layout_line["line-round-limit"]),"line-sort-key":new Da(ke.layout_line["line-sort-key"])}),Nf={paint:new mi({"line-opacity":new Da(ke.paint_line["line-opacity"]),"line-color":new Da(ke.paint_line["line-color"]),"line-translate":new Oa(ke.paint_line["line-translate"]),"line-translate-anchor":new Oa(ke.paint_line["line-translate-anchor"]),"line-width":new Da(ke.paint_line["line-width"]),"line-gap-width":new Da(ke.paint_line["line-gap-width"]),"line-offset":new Da(ke.paint_line["line-offset"]),"line-blur":new Da(ke.paint_line["line-blur"]),"line-dasharray":new aa(ke.paint_line["line-dasharray"]),"line-pattern":new Za(ke.paint_line["line-pattern"]),"line-gradient":new Ua(ke.paint_line["line-gradient"])}),layout:uv},cv=new(function(_){function O(){_.apply(this,arguments)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.possiblyEvaluate=function(Z,ce){return ce=new Xa(Math.floor(ce.zoom),{now:ce.now,fadeDuration:ce.fadeDuration,zoomHistory:ce.zoomHistory,transition:ce.transition}),_.prototype.possiblyEvaluate.call(this,Z,ce)},O.prototype.evaluate=function(Z,ce,xe,we){return ce=g({},ce,{zoom:Math.floor(ce.zoom)}),_.prototype.evaluate.call(this,Z,ce,xe,we)},O}(Da))(Nf.paint.properties["line-width"].specification);cv.useIntegerZoom=!0;var fv=function(_){function O(Z){_.call(this,Z,Nf)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype._handleSpecialPaintPropertyUpdate=function(Z){Z==="line-gradient"&&this._updateGradient()},O.prototype._updateGradient=function(){this.gradient=ev(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},O.prototype.recalculate=function(Z,ce){_.prototype.recalculate.call(this,Z,ce),this.paint._values["line-floorwidth"]=cv.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Z)},O.prototype.createBucket=function(Z){return new Xs(Z)},O.prototype.queryRadius=function(Z){var ce=Z,xe=$u(hc("line-width",this,ce),hc("line-gap-width",this,ce)),we=hc("line-offset",this,ce);return xe/2+Math.abs(we)+Ql(this.paint.get("line-translate"))},O.prototype.queryIntersectsFeature=function(Z,ce,xe,we,De,Ze,pt){var St=bs(Z,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ze.angle,pt),Ot=pt/2*$u(this.paint.get("line-width").evaluate(ce,xe),this.paint.get("line-gap-width").evaluate(ce,xe)),Ht=this.paint.get("line-offset").evaluate(ce,xe);return Ht&&(we=function(Qt,lr){for(var Mr=[],Er=new l(0,0),Kr=0;Kr<Qt.length;Kr++){for(var Br=Qt[Kr],sn=[],vn=0;vn<Br.length;vn++){var Rn=Br[vn],zn=Br[vn+1],Zn=vn===0?Er:Rn.sub(Br[vn-1])._unit()._perp(),xa=vn===Br.length-1?Er:zn.sub(Rn)._unit()._perp(),La=Zn._add(xa)._unit();La._mult(1/(La.x*xa.x+La.y*xa.y)),sn.push(La._mult(lr)._add(Rn))}Mr.push(sn)}return Mr}(we,Ht*pt)),function(Qt,lr,Mr){for(var Er=0;Er<lr.length;Er++){var Kr=lr[Er];if(Qt.length>=3){for(var Br=0;Br<Kr.length;Br++)if(Lu(Qt,Kr[Br]))return!0}if(bl(Qt,Kr,Mr))return!0}return!1}(St,we,Ot)},O.prototype.isTileClipped=function(){return!0},O}(pi);function $u(_,O){return O>0?O+2*_:_}var Uh=Ui([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),hv=Ui([{name:"a_projected_pos",components:3,type:"Float32"}],4),xp=(Ui([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ui([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),ph=(Ui([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),pv=Ui([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function dd(_,O,Z){return _.sections.forEach(function(ce){ce.text=function(xe,we,De){var Ze=we.layout.get("text-transform").evaluate(De,{});return Ze==="uppercase"?xe=xe.toLocaleUpperCase():Ze==="lowercase"&&(xe=xe.toLocaleLowerCase()),so.applyArabicShaping&&(xe=so.applyArabicShaping(xe)),xe}(ce.text,O,Z)}),_}Ui([{name:"triangle",components:3,type:"Uint16"}]),Ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ui([{type:"Float32",name:"offsetX"}]),Ui([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var _s={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Vh=function(_,O,Z,ce,xe){var we,De,Ze=8*xe-ce-1,pt=(1<<Ze)-1,St=pt>>1,Ot=-7,Ht=Z?xe-1:0,Qt=Z?-1:1,lr=_[O+Ht];for(Ht+=Qt,we=lr&(1<<-Ot)-1,lr>>=-Ot,Ot+=Ze;Ot>0;we=256*we+_[O+Ht],Ht+=Qt,Ot-=8);for(De=we&(1<<-Ot)-1,we>>=-Ot,Ot+=ce;Ot>0;De=256*De+_[O+Ht],Ht+=Qt,Ot-=8);if(we===0)we=1-St;else{if(we===pt)return De?NaN:1/0*(lr?-1:1);De+=Math.pow(2,ce),we-=St}return(lr?-1:1)*De*Math.pow(2,we-ce)},bp=function(_,O,Z,ce,xe,we){var De,Ze,pt,St=8*we-xe-1,Ot=(1<<St)-1,Ht=Ot>>1,Qt=xe===23?Math.pow(2,-24)-Math.pow(2,-77):0,lr=ce?0:we-1,Mr=ce?1:-1,Er=O<0||O===0&&1/O<0?1:0;for(O=Math.abs(O),isNaN(O)||O===1/0?(Ze=isNaN(O)?1:0,De=Ot):(De=Math.floor(Math.log(O)/Math.LN2),O*(pt=Math.pow(2,-De))<1&&(De--,pt*=2),(O+=De+Ht>=1?Qt/pt:Qt*Math.pow(2,1-Ht))*pt>=2&&(De++,pt/=2),De+Ht>=Ot?(Ze=0,De=Ot):De+Ht>=1?(Ze=(O*pt-1)*Math.pow(2,xe),De+=Ht):(Ze=O*Math.pow(2,Ht-1)*Math.pow(2,xe),De=0));xe>=8;_[Z+lr]=255&Ze,lr+=Mr,Ze/=256,xe-=8);for(De=De<<xe|Ze,St+=xe;St>0;_[Z+lr]=255&De,lr+=Mr,De/=256,St-=8);_[Z+lr-Mr]|=128*Er},of=po;function po(_){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(_)?_:new Uint8Array(_||0),this.pos=0,this.type=0,this.length=this.buf.length}po.Varint=0,po.Fixed64=1,po.Bytes=2,po.Fixed32=5;var Bf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function _i(_){return _.type===po.Bytes?_.readVarint()+_.pos:_.pos+1}function zc(_,O,Z){return Z?4294967296*O+(_>>>0):4294967296*(O>>>0)+(_>>>0)}function Uf(_,O,Z){var ce=O<=16383?1:O<=2097151?2:O<=268435455?3:Math.floor(Math.log(O)/(7*Math.LN2));Z.realloc(ce);for(var xe=Z.pos-1;xe>=_;xe--)Z.buf[xe+ce]=Z.buf[xe]}function Oc(_,O){for(var Z=0;Z<_.length;Z++)O.writeVarint(_[Z])}function dv(_,O){for(var Z=0;Z<_.length;Z++)O.writeSVarint(_[Z])}function vd(_,O){for(var Z=0;Z<_.length;Z++)O.writeFloat(_[Z])}function vv(_,O){for(var Z=0;Z<_.length;Z++)O.writeDouble(_[Z])}function Ul(_,O){for(var Z=0;Z<_.length;Z++)O.writeBoolean(_[Z])}function Uu(_,O){for(var Z=0;Z<_.length;Z++)O.writeFixed32(_[Z])}function mv(_,O){for(var Z=0;Z<_.length;Z++)O.writeSFixed32(_[Z])}function md(_,O){for(var Z=0;Z<_.length;Z++)O.writeFixed64(_[Z])}function sf(_,O){for(var Z=0;Z<_.length;Z++)O.writeSFixed64(_[Z])}function Vf(_,O){return(_[O]|_[O+1]<<8|_[O+2]<<16)+16777216*_[O+3]}function lf(_,O,Z){_[Z]=O,_[Z+1]=O>>>8,_[Z+2]=O>>>16,_[Z+3]=O>>>24}function gv(_,O){return(_[O]|_[O+1]<<8|_[O+2]<<16)+(_[O+3]<<24)}function A0(_,O,Z){_===1&&Z.readMessage(Fc,O)}function Fc(_,O,Z){if(_===3){var ce=Z.readMessage(Vl,{}),xe=ce.width,we=ce.height,De=ce.left,Ze=ce.top,pt=ce.advance;O.push({id:ce.id,bitmap:new eu({width:xe+6,height:we+6},ce.bitmap),metrics:{width:xe,height:we,left:De,top:Ze,advance:pt}})}}function Vl(_,O,Z){_===1?O.id=Z.readVarint():_===2?O.bitmap=Z.readBytes():_===3?O.width=Z.readVarint():_===4?O.height=Z.readVarint():_===5?O.left=Z.readSVarint():_===6?O.top=Z.readSVarint():_===7&&(O.advance=Z.readVarint())}function Hh(_){for(var O=0,Z=0,ce=0,xe=_;ce<xe.length;ce+=1){var we=xe[ce];O+=we.w*we.h,Z=Math.max(Z,we.w)}_.sort(function(Er,Kr){return Kr.h-Er.h});for(var De=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(O/.95)),Z),h:1/0}],Ze=0,pt=0,St=0,Ot=_;St<Ot.length;St+=1)for(var Ht=Ot[St],Qt=De.length-1;Qt>=0;Qt--){var lr=De[Qt];if(!(Ht.w>lr.w||Ht.h>lr.h)){if(Ht.x=lr.x,Ht.y=lr.y,pt=Math.max(pt,Ht.y+Ht.h),Ze=Math.max(Ze,Ht.x+Ht.w),Ht.w===lr.w&&Ht.h===lr.h){var Mr=De.pop();Qt<De.length&&(De[Qt]=Mr)}else Ht.h===lr.h?(lr.x+=Ht.w,lr.w-=Ht.w):Ht.w===lr.w?(lr.y+=Ht.h,lr.h-=Ht.h):(De.push({x:lr.x+Ht.w,y:lr.y,w:lr.w-Ht.w,h:Ht.h}),lr.y+=Ht.h,lr.h-=Ht.h);break}}return{w:Ze,h:pt,fill:O/(Ze*pt)||0}}po.prototype={destroy:function(){this.buf=null},readFields:function(_,O,Z){for(Z=Z||this.length;this.pos<Z;){var ce=this.readVarint(),xe=ce>>3,we=this.pos;this.type=7&ce,_(xe,O,this),this.pos===we&&this.skip(ce)}return O},readMessage:function(_,O){return this.readFields(_,O,this.readVarint()+this.pos)},readFixed32:function(){var _=Vf(this.buf,this.pos);return this.pos+=4,_},readSFixed32:function(){var _=gv(this.buf,this.pos);return this.pos+=4,_},readFixed64:function(){var _=Vf(this.buf,this.pos)+4294967296*Vf(this.buf,this.pos+4);return this.pos+=8,_},readSFixed64:function(){var _=Vf(this.buf,this.pos)+4294967296*gv(this.buf,this.pos+4);return this.pos+=8,_},readFloat:function(){var _=Vh(this.buf,this.pos,!0,23,4);return this.pos+=4,_},readDouble:function(){var _=Vh(this.buf,this.pos,!0,52,8);return this.pos+=8,_},readVarint:function(_){var O,Z,ce=this.buf;return O=127&(Z=ce[this.pos++]),Z<128?O:(O|=(127&(Z=ce[this.pos++]))<<7,Z<128?O:(O|=(127&(Z=ce[this.pos++]))<<14,Z<128?O:(O|=(127&(Z=ce[this.pos++]))<<21,Z<128?O:function(xe,we,De){var Ze,pt,St=De.buf;if(Ze=(112&(pt=St[De.pos++]))>>4,pt<128||(Ze|=(127&(pt=St[De.pos++]))<<3,pt<128)||(Ze|=(127&(pt=St[De.pos++]))<<10,pt<128)||(Ze|=(127&(pt=St[De.pos++]))<<17,pt<128)||(Ze|=(127&(pt=St[De.pos++]))<<24,pt<128)||(Ze|=(1&(pt=St[De.pos++]))<<31,pt<128))return zc(xe,Ze,we);throw new Error("Expected varint not more than 10 bytes")}(O|=(15&(Z=ce[this.pos]))<<28,_,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var _=this.readVarint();return _%2==1?(_+1)/-2:_/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var _=this.readVarint()+this.pos,O=this.pos;return this.pos=_,_-O>=12&&Bf?function(Z,ce,xe){return Bf.decode(Z.subarray(ce,xe))}(this.buf,O,_):function(Z,ce,xe){for(var we="",De=ce;De<xe;){var Ze,pt,St,Ot=Z[De],Ht=null,Qt=Ot>239?4:Ot>223?3:Ot>191?2:1;if(De+Qt>xe)break;Qt===1?Ot<128&&(Ht=Ot):Qt===2?(192&(Ze=Z[De+1]))==128&&(Ht=(31&Ot)<<6|63&Ze)<=127&&(Ht=null):Qt===3?(pt=Z[De+2],(192&(Ze=Z[De+1]))==128&&(192&pt)==128&&((Ht=(15&Ot)<<12|(63&Ze)<<6|63&pt)<=2047||Ht>=55296&&Ht<=57343)&&(Ht=null)):Qt===4&&(pt=Z[De+2],St=Z[De+3],(192&(Ze=Z[De+1]))==128&&(192&pt)==128&&(192&St)==128&&((Ht=(15&Ot)<<18|(63&Ze)<<12|(63&pt)<<6|63&St)<=65535||Ht>=1114112)&&(Ht=null)),Ht===null?(Ht=65533,Qt=1):Ht>65535&&(Ht-=65536,we+=String.fromCharCode(Ht>>>10&1023|55296),Ht=56320|1023&Ht),we+=String.fromCharCode(Ht),De+=Qt}return we}(this.buf,O,_)},readBytes:function(){var _=this.readVarint()+this.pos,O=this.buf.subarray(this.pos,_);return this.pos=_,O},readPackedVarint:function(_,O){if(this.type!==po.Bytes)return _.push(this.readVarint(O));var Z=_i(this);for(_=_||[];this.pos<Z;)_.push(this.readVarint(O));return _},readPackedSVarint:function(_){if(this.type!==po.Bytes)return _.push(this.readSVarint());var O=_i(this);for(_=_||[];this.pos<O;)_.push(this.readSVarint());return _},readPackedBoolean:function(_){if(this.type!==po.Bytes)return _.push(this.readBoolean());var O=_i(this);for(_=_||[];this.pos<O;)_.push(this.readBoolean());return _},readPackedFloat:function(_){if(this.type!==po.Bytes)return _.push(this.readFloat());var O=_i(this);for(_=_||[];this.pos<O;)_.push(this.readFloat());return _},readPackedDouble:function(_){if(this.type!==po.Bytes)return _.push(this.readDouble());var O=_i(this);for(_=_||[];this.pos<O;)_.push(this.readDouble());return _},readPackedFixed32:function(_){if(this.type!==po.Bytes)return _.push(this.readFixed32());var O=_i(this);for(_=_||[];this.pos<O;)_.push(this.readFixed32());return _},readPackedSFixed32:function(_){if(this.type!==po.Bytes)return _.push(this.readSFixed32());var O=_i(this);for(_=_||[];this.pos<O;)_.push(this.readSFixed32());return _},readPackedFixed64:function(_){if(this.type!==po.Bytes)return _.push(this.readFixed64());var O=_i(this);for(_=_||[];this.pos<O;)_.push(this.readFixed64());return _},readPackedSFixed64:function(_){if(this.type!==po.Bytes)return _.push(this.readSFixed64());var O=_i(this);for(_=_||[];this.pos<O;)_.push(this.readSFixed64());return _},skip:function(_){var O=7&_;if(O===po.Varint)for(;this.buf[this.pos++]>127;);else if(O===po.Bytes)this.pos=this.readVarint()+this.pos;else if(O===po.Fixed32)this.pos+=4;else{if(O!==po.Fixed64)throw new Error("Unimplemented type: "+O);this.pos+=8}},writeTag:function(_,O){this.writeVarint(_<<3|O)},realloc:function(_){for(var O=this.length||16;O<this.pos+_;)O*=2;if(O!==this.length){var Z=new Uint8Array(O);Z.set(this.buf),this.buf=Z,this.length=O}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(_){this.realloc(4),lf(this.buf,_,this.pos),this.pos+=4},writeSFixed32:function(_){this.realloc(4),lf(this.buf,_,this.pos),this.pos+=4},writeFixed64:function(_){this.realloc(8),lf(this.buf,-1&_,this.pos),lf(this.buf,Math.floor(_*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(_){this.realloc(8),lf(this.buf,-1&_,this.pos),lf(this.buf,Math.floor(_*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(_){(_=+_||0)>268435455||_<0?function(O,Z){var ce,xe;if(O>=0?(ce=O%4294967296|0,xe=O/4294967296|0):(xe=~(-O/4294967296),4294967295^(ce=~(-O%4294967296))?ce=ce+1|0:(ce=0,xe=xe+1|0)),O>=18446744073709552e3||O<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Z.realloc(10),function(we,De,Ze){Ze.buf[Ze.pos++]=127&we|128,we>>>=7,Ze.buf[Ze.pos++]=127&we|128,we>>>=7,Ze.buf[Ze.pos++]=127&we|128,we>>>=7,Ze.buf[Ze.pos++]=127&we|128,Ze.buf[Ze.pos]=127&(we>>>=7)}(ce,0,Z),function(we,De){var Ze=(7&we)<<4;De.buf[De.pos++]|=Ze|((we>>>=3)?128:0),we&&(De.buf[De.pos++]=127&we|((we>>>=7)?128:0),we&&(De.buf[De.pos++]=127&we|((we>>>=7)?128:0),we&&(De.buf[De.pos++]=127&we|((we>>>=7)?128:0),we&&(De.buf[De.pos++]=127&we|((we>>>=7)?128:0),we&&(De.buf[De.pos++]=127&we)))))}(xe,Z)}(_,this):(this.realloc(4),this.buf[this.pos++]=127&_|(_>127?128:0),_<=127||(this.buf[this.pos++]=127&(_>>>=7)|(_>127?128:0),_<=127||(this.buf[this.pos++]=127&(_>>>=7)|(_>127?128:0),_<=127||(this.buf[this.pos++]=_>>>7&127))))},writeSVarint:function(_){this.writeVarint(_<0?2*-_-1:2*_)},writeBoolean:function(_){this.writeVarint(Boolean(_))},writeString:function(_){_=String(_),this.realloc(4*_.length),this.pos++;var O=this.pos;this.pos=function(ce,xe,we){for(var De,Ze,pt=0;pt<xe.length;pt++){if((De=xe.charCodeAt(pt))>55295&&De<57344){if(!Ze){De>56319||pt+1===xe.length?(ce[we++]=239,ce[we++]=191,ce[we++]=189):Ze=De;continue}if(De<56320){ce[we++]=239,ce[we++]=191,ce[we++]=189,Ze=De;continue}De=Ze-55296<<10|De-56320|65536,Ze=null}else Ze&&(ce[we++]=239,ce[we++]=191,ce[we++]=189,Ze=null);De<128?ce[we++]=De:(De<2048?ce[we++]=De>>6|192:(De<65536?ce[we++]=De>>12|224:(ce[we++]=De>>18|240,ce[we++]=De>>12&63|128),ce[we++]=De>>6&63|128),ce[we++]=63&De|128)}return we}(this.buf,_,this.pos);var Z=this.pos-O;Z>=128&&Uf(O,Z,this),this.pos=O-1,this.writeVarint(Z),this.pos+=Z},writeFloat:function(_){this.realloc(4),bp(this.buf,_,this.pos,!0,23,4),this.pos+=4},writeDouble:function(_){this.realloc(8),bp(this.buf,_,this.pos,!0,52,8),this.pos+=8},writeBytes:function(_){var O=_.length;this.writeVarint(O),this.realloc(O);for(var Z=0;Z<O;Z++)this.buf[this.pos++]=_[Z]},writeRawMessage:function(_,O){this.pos++;var Z=this.pos;_(O,this);var ce=this.pos-Z;ce>=128&&Uf(Z,ce,this),this.pos=Z-1,this.writeVarint(ce),this.pos+=ce},writeMessage:function(_,O,Z){this.writeTag(_,po.Bytes),this.writeRawMessage(O,Z)},writePackedVarint:function(_,O){O.length&&this.writeMessage(_,Oc,O)},writePackedSVarint:function(_,O){O.length&&this.writeMessage(_,dv,O)},writePackedBoolean:function(_,O){O.length&&this.writeMessage(_,Ul,O)},writePackedFloat:function(_,O){O.length&&this.writeMessage(_,vd,O)},writePackedDouble:function(_,O){O.length&&this.writeMessage(_,vv,O)},writePackedFixed32:function(_,O){O.length&&this.writeMessage(_,Uu,O)},writePackedSFixed32:function(_,O){O.length&&this.writeMessage(_,mv,O)},writePackedFixed64:function(_,O){O.length&&this.writeMessage(_,md,O)},writePackedSFixed64:function(_,O){O.length&&this.writeMessage(_,sf,O)},writeBytesField:function(_,O){this.writeTag(_,po.Bytes),this.writeBytes(O)},writeFixed32Field:function(_,O){this.writeTag(_,po.Fixed32),this.writeFixed32(O)},writeSFixed32Field:function(_,O){this.writeTag(_,po.Fixed32),this.writeSFixed32(O)},writeFixed64Field:function(_,O){this.writeTag(_,po.Fixed64),this.writeFixed64(O)},writeSFixed64Field:function(_,O){this.writeTag(_,po.Fixed64),this.writeSFixed64(O)},writeVarintField:function(_,O){this.writeTag(_,po.Varint),this.writeVarint(O)},writeSVarintField:function(_,O){this.writeTag(_,po.Varint),this.writeSVarint(O)},writeStringField:function(_,O){this.writeTag(_,po.Bytes),this.writeString(O)},writeFloatField:function(_,O){this.writeTag(_,po.Fixed32),this.writeFloat(O)},writeDoubleField:function(_,O){this.writeTag(_,po.Fixed64),this.writeDouble(O)},writeBooleanField:function(_,O){this.writeVarintField(_,Boolean(O))}};var _p=function(_,O){var Z=O.pixelRatio,ce=O.version,xe=O.stretchX,we=O.stretchY,De=O.content;this.paddedRect=_,this.pixelRatio=Z,this.stretchX=xe,this.stretchY=we,this.content=De,this.version=ce},uf={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};uf.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},uf.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},uf.tlbr.get=function(){return this.tl.concat(this.br)},uf.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(_p.prototype,uf);var jh=function(_,O){var Z={},ce={};this.haveRenderCallbacks=[];var xe=[];this.addImages(_,Z,xe),this.addImages(O,ce,xe);var we=Hh(xe),De=new os({width:we.w||1,height:we.h||1});for(var Ze in _){var pt=_[Ze],St=Z[Ze].paddedRect;os.copy(pt.data,De,{x:0,y:0},{x:St.x+1,y:St.y+1},pt.data)}for(var Ot in O){var Ht=O[Ot],Qt=ce[Ot].paddedRect,lr=Qt.x+1,Mr=Qt.y+1,Er=Ht.data.width,Kr=Ht.data.height;os.copy(Ht.data,De,{x:0,y:0},{x:lr,y:Mr},Ht.data),os.copy(Ht.data,De,{x:0,y:Kr-1},{x:lr,y:Mr-1},{width:Er,height:1}),os.copy(Ht.data,De,{x:0,y:0},{x:lr,y:Mr+Kr},{width:Er,height:1}),os.copy(Ht.data,De,{x:Er-1,y:0},{x:lr-1,y:Mr},{width:1,height:Kr}),os.copy(Ht.data,De,{x:0,y:0},{x:lr+Er,y:Mr},{width:1,height:Kr})}this.image=De,this.iconPositions=Z,this.patternPositions=ce};jh.prototype.addImages=function(_,O,Z){for(var ce in _){var xe=_[ce],we={x:0,y:0,w:xe.data.width+2,h:xe.data.height+2};Z.push(we),O[ce]=new _p(we,xe),xe.hasRenderCallback&&this.haveRenderCallbacks.push(ce)}},jh.prototype.patchUpdatedImages=function(_,O){for(var Z in _.dispatchRenderCallbacks(this.haveRenderCallbacks),_.updatedImages)this.patchUpdatedImage(this.iconPositions[Z],_.getImage(Z),O),this.patchUpdatedImage(this.patternPositions[Z],_.getImage(Z),O)},jh.prototype.patchUpdatedImage=function(_,O,Z){if(_&&O&&_.version!==O.version){_.version=O.version;var ce=_.tl;Z.update(O.data,void 0,{x:ce[0],y:ce[1]})}},ya("ImagePosition",_p),ya("ImageAtlas",jh);var mu={horizontal:1,vertical:2,horizontalOnly:3},mc=function(){this.scale=1,this.fontStack="",this.imageName=null};mc.forText=function(_,O){var Z=new mc;return Z.scale=_||1,Z.fontStack=O,Z},mc.forImage=function(_){var O=new mc;return O.imageName=_,O};var Zs=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function dh(_,O,Z,ce,xe,we,De,Ze,pt,St,Ot,Ht,Qt,lr,Mr,Er){var Kr,Br=Zs.fromFeature(_,xe);Ht===mu.vertical&&Br.verticalizePunctuation();var sn=so.processBidirectionalText,vn=so.processStyledBidirectionalText;if(sn&&Br.sections.length===1){Kr=[];for(var Rn=0,zn=sn(Br.toString(),wp(Br,St,we,O,ce,lr,Mr));Rn<zn.length;Rn+=1){var Zn=zn[Rn],xa=new Zs;xa.text=Zn,xa.sections=Br.sections;for(var La=0;La<Zn.length;La++)xa.sectionIndex.push(0);Kr.push(xa)}}else if(vn){Kr=[];for(var Ka=0,Ba=vn(Br.text,Br.sectionIndex,wp(Br,St,we,O,ce,lr,Mr));Ka<Ba.length;Ka+=1){var ei=Ba[Ka],za=new Zs;za.text=ei[0],za.sectionIndex=ei[1],za.sections=Br.sections,Kr.push(za)}}else Kr=function(Ga,Wi){for(var Ei=[],no=Ga.text,Ja=0,ho=0,Vo=Wi;ho<Vo.length;ho+=1){var $s=Vo[ho];Ei.push(Ga.substring(Ja,$s)),Ja=$s}return Ja<no.length&&Ei.push(Ga.substring(Ja,no.length)),Ei}(Br,wp(Br,St,we,O,ce,lr,Mr));var Ii=[],bi={positionedLines:Ii,text:Br.toString(),top:Ot[1],bottom:Ot[1],left:Ot[0],right:Ot[0],writingMode:Ht,iconsInText:!1,verticalizable:!1};return function(Ga,Wi,Ei,no,Ja,ho,Vo,$s,Qs,Ko,us,Io){for(var Os=0,Gl=-17,Fs=0,Wl=0,Ns=$s==="right"?1:$s==="left"?0:.5,Bs=0,Ji=0,Co=Ja;Ji<Co.length;Ji+=1){var Jo=Co[Ji];Jo.trim();var ao=Jo.getMaxScale(),Ds=24*(ao-1),Rl={positionedGlyphs:[],lineOffset:0};Ga.positionedLines[Bs]=Rl;var qs=Rl.positionedGlyphs,ms=0;if(Jo.length()){for(var el=0;el<Jo.length();el++){var $o=Jo.getSection(el),ko=Jo.getSectionIndex(el),Vu=Jo.getCharCode(el),df=0,Ho=null,Fi=null,gc=null,Il=24,cs=!(Qs===mu.horizontal||!us&&!Ti(Vu)||us&&(Hf[Vu]||(Xf=Vu,Xn.Arabic(Xf)||Xn["Arabic Supplement"](Xf)||Xn["Arabic Extended-A"](Xf)||Xn["Arabic Presentation Forms-A"](Xf)||Xn["Arabic Presentation Forms-B"](Xf))));if($o.imageName){var kp=no[$o.imageName];if(!kp)continue;gc=$o.imageName,Ga.iconsInText=Ga.iconsInText||!0,Fi=kp.paddedRect;var yu=kp.displaySize;$o.scale=24*$o.scale/Io,df=Ds+(24-yu[1]*$o.scale),Il=(Ho={width:yu[0],height:yu[1],left:1,top:-3,advance:cs?yu[1]:yu[0]}).advance;var Sp=cs?yu[0]*$o.scale-24*ao:yu[1]*$o.scale-24*ao;Sp>0&&Sp>ms&&(ms=Sp)}else{var Av=Ei[$o.fontStack],Ep=Av&&Av[Vu];if(Ep&&Ep.rect)Fi=Ep.rect,Ho=Ep.metrics;else{var _d=Wi[$o.fontStack],Mv=_d&&_d[Vu];if(!Mv)continue;Ho=Mv.metrics}df=24*(ao-$o.scale)}cs?(Ga.verticalizable=!0,qs.push({glyph:Vu,imageName:gc,x:Os,y:Gl+df,vertical:cs,scale:$o.scale,fontStack:$o.fontStack,sectionIndex:ko,metrics:Ho,rect:Fi}),Os+=Il*$o.scale+Ko):(qs.push({glyph:Vu,imageName:gc,x:Os,y:Gl+df,vertical:cs,scale:$o.scale,fontStack:$o.fontStack,sectionIndex:ko,metrics:Ho,rect:Fi}),Os+=Ho.advance*$o.scale+Ko)}qs.length!==0&&(Fs=Math.max(Os-Ko,Fs),Wh(qs,0,qs.length-1,Ns,ms)),Os=0;var Cp=ho*ao+ms;Rl.lineOffset=Math.max(ms,Ds),Gl+=Cp,Wl=Math.max(Cp,Wl),++Bs}else Gl+=ho,++Bs}var Xf,tc=Gl- -17,Xh=Qu(Vo),Nc=Xh.horizontalAlign,ss=Xh.verticalAlign;(function(Ts,wd,Td,Ad,kv,Md,kd,Sd,Ed){var vf,Lp=(wd-Td)*kv;vf=Md!==kd?-Sd*Ad- -17:(-Ad*Ed+.5)*kd;for(var Pp=0,Dp=Ts;Pp<Dp.length;Pp+=1)for(var mf=0,nu=Dp[Pp].positionedGlyphs;mf<nu.length;mf+=1){var Bc=nu[mf];Bc.x+=Lp,Bc.y+=vf}})(Ga.positionedLines,Ns,Nc,ss,Fs,Wl,ho,tc,Ja.length),Ga.top+=-ss*tc,Ga.bottom=Ga.top+tc,Ga.left+=-Nc*Fs,Ga.right=Ga.left+Fs}(bi,O,Z,ce,Kr,De,Ze,pt,Ht,St,Qt,Er),!function(Ga){for(var Wi=0,Ei=Ga;Wi<Ei.length;Wi+=1)if(Ei[Wi].positionedGlyphs.length!==0)return!1;return!0}(Ii)&&bi}Zs.fromFeature=function(_,O){for(var Z=new Zs,ce=0;ce<_.sections.length;ce++){var xe=_.sections[ce];xe.image?Z.addImageSection(xe):Z.addTextSection(xe,O)}return Z},Zs.prototype.length=function(){return this.text.length},Zs.prototype.getSection=function(_){return this.sections[this.sectionIndex[_]]},Zs.prototype.getSectionIndex=function(_){return this.sectionIndex[_]},Zs.prototype.getCharCode=function(_){return this.text.charCodeAt(_)},Zs.prototype.verticalizePunctuation=function(){this.text=function(_){for(var O="",Z=0;Z<_.length;Z++){var ce=_.charCodeAt(Z+1)||null,xe=_.charCodeAt(Z-1)||null;O+=ce&&Sa(ce)&&!_s[_[Z+1]]||xe&&Sa(xe)&&!_s[_[Z-1]]||!_s[_[Z]]?_[Z]:_s[_[Z]]}return O}(this.text)},Zs.prototype.trim=function(){for(var _=0,O=0;O<this.text.length&&Hf[this.text.charCodeAt(O)];O++)_++;for(var Z=this.text.length,ce=this.text.length-1;ce>=0&&ce>=_&&Hf[this.text.charCodeAt(ce)];ce--)Z--;this.text=this.text.substring(_,Z),this.sectionIndex=this.sectionIndex.slice(_,Z)},Zs.prototype.substring=function(_,O){var Z=new Zs;return Z.text=this.text.substring(_,O),Z.sectionIndex=this.sectionIndex.slice(_,O),Z.sections=this.sections,Z},Zs.prototype.toString=function(){return this.text},Zs.prototype.getMaxScale=function(){var _=this;return this.sectionIndex.reduce(function(O,Z){return Math.max(O,_.sections[Z].scale)},0)},Zs.prototype.addTextSection=function(_,O){this.text+=_.text,this.sections.push(mc.forText(_.scale,_.fontStack||O));for(var Z=this.sections.length-1,ce=0;ce<_.text.length;++ce)this.sectionIndex.push(Z)},Zs.prototype.addImageSection=function(_){var O=_.image?_.image.name:"";if(O.length!==0){var Z=this.getNextImageSectionCharCode();Z?(this.text+=String.fromCharCode(Z),this.sections.push(mc.forImage(O)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}else E("Can't add FormattedSection with an empty image.")},Zs.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Hf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Hl={};function Gh(_,O,Z,ce,xe,we){if(O.imageName){var De=ce[O.imageName];return De?De.displaySize[0]*O.scale*24/we+xe:0}var Ze=Z[O.fontStack],pt=Ze&&Ze[_];return pt?pt.metrics.advance*O.scale+xe:0}function gd(_,O,Z,ce){var xe=Math.pow(_-O,2);return ce?_<O?xe/2:2*xe:xe+Math.abs(Z)*Z}function vh(_,O,Z){var ce=0;return _===10&&(ce-=1e4),Z&&(ce+=150),_!==40&&_!==65288||(ce+=50),O!==41&&O!==65289||(ce+=50),ce}function ws(_,O,Z,ce,xe,we){for(var De=null,Ze=gd(O,Z,xe,we),pt=0,St=ce;pt<St.length;pt+=1){var Ot=St[pt],Ht=gd(O-Ot.x,Z,xe,we)+Ot.badness;Ht<=Ze&&(De=Ot,Ze=Ht)}return{index:_,x:O,priorBreak:De,badness:Ze}}function wp(_,O,Z,ce,xe,we,De){if(we!=="point")return[];if(!_)return[];for(var Ze,pt=[],St=function(Kr,Br,sn,vn,Rn,zn){for(var Zn=0,xa=0;xa<Kr.length();xa++){var La=Kr.getSection(xa);Zn+=Gh(Kr.getCharCode(xa),La,vn,Rn,Br,zn)}return Zn/Math.max(1,Math.ceil(Zn/sn))}(_,O,Z,ce,xe,De),Ot=_.text.indexOf("\u200B")>=0,Ht=0,Qt=0;Qt<_.length();Qt++){var lr=_.getSection(Qt),Mr=_.getCharCode(Qt);if(Hf[Mr]||(Ht+=Gh(Mr,lr,ce,xe,O,De)),Qt<_.length()-1){var Er=!((Ze=Mr)<11904||!(Xn["Bopomofo Extended"](Ze)||Xn.Bopomofo(Ze)||Xn["CJK Compatibility Forms"](Ze)||Xn["CJK Compatibility Ideographs"](Ze)||Xn["CJK Compatibility"](Ze)||Xn["CJK Radicals Supplement"](Ze)||Xn["CJK Strokes"](Ze)||Xn["CJK Symbols and Punctuation"](Ze)||Xn["CJK Unified Ideographs Extension A"](Ze)||Xn["CJK Unified Ideographs"](Ze)||Xn["Enclosed CJK Letters and Months"](Ze)||Xn["Halfwidth and Fullwidth Forms"](Ze)||Xn.Hiragana(Ze)||Xn["Ideographic Description Characters"](Ze)||Xn["Kangxi Radicals"](Ze)||Xn["Katakana Phonetic Extensions"](Ze)||Xn.Katakana(Ze)||Xn["Vertical Forms"](Ze)||Xn["Yi Radicals"](Ze)||Xn["Yi Syllables"](Ze)));(Hl[Mr]||Er||lr.imageName)&&pt.push(ws(Qt+1,Ht,St,pt,vh(Mr,_.getCharCode(Qt+1),Er&&Ot),!1))}}return function Kr(Br){return Br?Kr(Br.priorBreak).concat(Br.index):[]}(ws(_.length(),Ht,St,pt,0,!0))}function Qu(_){var O=.5,Z=.5;switch(_){case"right":case"top-right":case"bottom-right":O=1;break;case"left":case"top-left":case"bottom-left":O=0}switch(_){case"bottom":case"bottom-right":case"bottom-left":Z=1;break;case"top":case"top-right":case"top-left":Z=0}return{horizontalAlign:O,verticalAlign:Z}}function Wh(_,O,Z,ce,xe){if(ce||xe)for(var we=_[Z],De=(_[Z].x+we.metrics.advance*we.scale)*ce,Ze=O;Ze<=Z;Ze++)_[Ze].x-=De,_[Ze].y+=xe}function cf(_,O,Z,ce,xe,we){var De,Ze=_.image;if(Ze.content){var pt=Ze.content,St=Ze.pixelRatio||1;De=[pt[0]/St,pt[1]/St,Ze.displaySize[0]-pt[2]/St,Ze.displaySize[1]-pt[3]/St]}var Ot,Ht,Qt,lr,Mr=O.left*we,Er=O.right*we;Z==="width"||Z==="both"?(lr=xe[0]+Mr-ce[3],Ht=xe[0]+Er+ce[1]):Ht=(lr=xe[0]+(Mr+Er-Ze.displaySize[0])/2)+Ze.displaySize[0];var Kr=O.top*we,Br=O.bottom*we;return Z==="height"||Z==="both"?(Ot=xe[1]+Kr-ce[0],Qt=xe[1]+Br+ce[2]):Qt=(Ot=xe[1]+(Kr+Br-Ze.displaySize[1])/2)+Ze.displaySize[1],{image:Ze,top:Ot,right:Ht,bottom:Qt,left:lr,collisionPadding:De}}Hl[10]=!0,Hl[32]=!0,Hl[38]=!0,Hl[40]=!0,Hl[41]=!0,Hl[43]=!0,Hl[45]=!0,Hl[47]=!0,Hl[173]=!0,Hl[183]=!0,Hl[8203]=!0,Hl[8208]=!0,Hl[8211]=!0,Hl[8231]=!0;var ff=function(_){function O(Z,ce,xe,we){_.call(this,Z,ce),this.angle=xe,we!==void 0&&(this.segment=we)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.clone=function(){return new O(this.x,this.y,this.angle,this.segment)},O}(l);function mh(_,O){var Z=O.expression;if(Z.kind==="constant")return{kind:"constant",layoutSize:Z.evaluate(new Xa(_+1))};if(Z.kind==="source")return{kind:"source"};for(var ce=Z.zoomStops,xe=Z.interpolationType,we=0;we<ce.length&&ce[we]<=_;)we++;for(var De=we=Math.max(0,we-1);De<ce.length&&ce[De]<_+1;)De++;De=Math.min(ce.length-1,De);var Ze=ce[we],pt=ce[De];return Z.kind==="composite"?{kind:"composite",minZoom:Ze,maxZoom:pt,interpolationType:xe}:{kind:"camera",minZoom:Ze,maxZoom:pt,minSize:Z.evaluate(new Xa(Ze)),maxSize:Z.evaluate(new Xa(pt)),interpolationType:xe}}function gh(_,O,Z){var ce=O.uSize,xe=Z.lowerSize;return _.kind==="source"?xe/128:_.kind==="composite"?Yr(xe/128,Z.upperSize/128,O.uSizeT):ce}function yh(_,O){var Z=0,ce=0;if(_.kind==="constant")ce=_.layoutSize;else if(_.kind!=="source"){var xe=_.interpolationType,we=xe?p(Ai.interpolationFactor(xe,O,_.minZoom,_.maxZoom),0,1):0;_.kind==="camera"?ce=Yr(_.minSize,_.maxSize,we):Z=we}return{uSizeT:Z,uSize:ce}}ya("Anchor",ff);var yv=Object.freeze({__proto__:null,getSizeData:mh,evaluateSizeForFeature:gh,evaluateSizeForZoom:yh,SIZE_PACK_FACTOR:128});function qu(_,O,Z,ce,xe){if(O.segment===void 0)return!0;for(var we=O,De=O.segment+1,Ze=0;Ze>-Z/2;){if(--De<0)return!1;Ze-=_[De].dist(we),we=_[De]}Ze+=_[De].dist(_[De+1]),De++;for(var pt=[],St=0;Ze<Z/2;){var Ot=_[De],Ht=_[De+1];if(!Ht)return!1;var Qt=_[De-1].angleTo(Ot)-Ot.angleTo(Ht);for(Qt=Math.abs((Qt+3*Math.PI)%(2*Math.PI)-Math.PI),pt.push({distance:Ze,angleDelta:Qt}),St+=Qt;Ze-pt[0].distance>ce;)St-=pt.shift().angleDelta;if(St>xe)return!1;De++,Ze+=Ot.dist(Ht)}return!0}function hf(_){for(var O=0,Z=0;Z<_.length-1;Z++)O+=_[Z].dist(_[Z+1]);return O}function xv(_,O,Z){return _?.6*O*Z:0}function Yh(_,O){return Math.max(_?_.right-_.left:0,O?O.right-O.left:0)}function yd(_,O,Z,ce,xe,we){for(var De=xv(Z,xe,we),Ze=Yh(Z,ce)*we,pt=0,St=hf(_)/2,Ot=0;Ot<_.length-1;Ot++){var Ht=_[Ot],Qt=_[Ot+1],lr=Ht.dist(Qt);if(pt+lr>St){var Mr=(St-pt)/lr,Er=Yr(Ht.x,Qt.x,Mr),Kr=Yr(Ht.y,Qt.y,Mr),Br=new ff(Er,Kr,Qt.angleTo(Ht),Ot);return Br._round(),!De||qu(_,Br,Ze,De,O)?Br:void 0}pt+=lr}}function bv(_,O,Z,ce,xe,we,De,Ze,pt){var St=xv(ce,we,De),Ot=Yh(ce,xe),Ht=Ot*De,Qt=_[0].x===0||_[0].x===pt||_[0].y===0||_[0].y===pt;return O-Ht<O/4&&(O=Ht+O/4),function lr(Mr,Er,Kr,Br,sn,vn,Rn,zn,Zn){for(var xa=vn/2,La=hf(Mr),Ka=0,Ba=Er-Kr,ei=[],za=0;za<Mr.length-1;za++){for(var Ii=Mr[za],bi=Mr[za+1],Ga=Ii.dist(bi),Wi=bi.angleTo(Ii);Ba+Kr<Ka+Ga;){var Ei=((Ba+=Kr)-Ka)/Ga,no=Yr(Ii.x,bi.x,Ei),Ja=Yr(Ii.y,bi.y,Ei);if(no>=0&&no<Zn&&Ja>=0&&Ja<Zn&&Ba-xa>=0&&Ba+xa<=La){var ho=new ff(no,Ja,Wi,za);ho._round(),Br&&!qu(Mr,ho,vn,Br,sn)||ei.push(ho)}}Ka+=Ga}return zn||ei.length||Rn||(ei=lr(Mr,Ka/2,Kr,Br,sn,vn,Rn,!0,Zn)),ei}(_,Qt?O/2*Ze%O:(Ot/2+2*we)*De*Ze%O,O,St,Z,Ht,Qt,!1,pt)}function xd(_,O,Z,ce,xe){for(var we=[],De=0;De<_.length;De++)for(var Ze=_[De],pt=void 0,St=0;St<Ze.length-1;St++){var Ot=Ze[St],Ht=Ze[St+1];Ot.x<O&&Ht.x<O||(Ot.x<O?Ot=new l(O,Ot.y+(O-Ot.x)/(Ht.x-Ot.x)*(Ht.y-Ot.y))._round():Ht.x<O&&(Ht=new l(O,Ot.y+(O-Ot.x)/(Ht.x-Ot.x)*(Ht.y-Ot.y))._round()),Ot.y<Z&&Ht.y<Z||(Ot.y<Z?Ot=new l(Ot.x+(Z-Ot.y)/(Ht.y-Ot.y)*(Ht.x-Ot.x),Z)._round():Ht.y<Z&&(Ht=new l(Ot.x+(Z-Ot.y)/(Ht.y-Ot.y)*(Ht.x-Ot.x),Z)._round()),Ot.x>=ce&&Ht.x>=ce||(Ot.x>=ce?Ot=new l(ce,Ot.y+(ce-Ot.x)/(Ht.x-Ot.x)*(Ht.y-Ot.y))._round():Ht.x>=ce&&(Ht=new l(ce,Ot.y+(ce-Ot.x)/(Ht.x-Ot.x)*(Ht.y-Ot.y))._round()),Ot.y>=xe&&Ht.y>=xe||(Ot.y>=xe?Ot=new l(Ot.x+(xe-Ot.y)/(Ht.y-Ot.y)*(Ht.x-Ot.x),xe)._round():Ht.y>=xe&&(Ht=new l(Ot.x+(xe-Ot.y)/(Ht.y-Ot.y)*(Ht.x-Ot.x),xe)._round()),pt&&Ot.equals(pt[pt.length-1])||we.push(pt=[Ot]),pt.push(Ht)))))}return we}function Tp(_,O,Z,ce){var xe=[],we=_.image,De=we.pixelRatio,Ze=we.paddedRect.w-2,pt=we.paddedRect.h-2,St=_.right-_.left,Ot=_.bottom-_.top,Ht=we.stretchX||[[0,Ze]],Qt=we.stretchY||[[0,pt]],lr=function(no,Ja){return no+Ja[1]-Ja[0]},Mr=Ht.reduce(lr,0),Er=Qt.reduce(lr,0),Kr=Ze-Mr,Br=pt-Er,sn=0,vn=Mr,Rn=0,zn=Er,Zn=0,xa=Kr,La=0,Ka=Br;if(we.content&&ce){var Ba=we.content;sn=xh(Ht,0,Ba[0]),Rn=xh(Qt,0,Ba[1]),vn=xh(Ht,Ba[0],Ba[2]),zn=xh(Qt,Ba[1],Ba[3]),Zn=Ba[0]-sn,La=Ba[1]-Rn,xa=Ba[2]-Ba[0]-vn,Ka=Ba[3]-Ba[1]-zn}var ei=function(no,Ja,ho,Vo){var $s=jf(no.stretch-sn,vn,St,_.left),Qs=bh(no.fixed-Zn,xa,no.stretch,Mr),Ko=jf(Ja.stretch-Rn,zn,Ot,_.top),us=bh(Ja.fixed-La,Ka,Ja.stretch,Er),Io=jf(ho.stretch-sn,vn,St,_.left),Os=bh(ho.fixed-Zn,xa,ho.stretch,Mr),Gl=jf(Vo.stretch-Rn,zn,Ot,_.top),Fs=bh(Vo.fixed-La,Ka,Vo.stretch,Er),Wl=new l($s,Ko),Ns=new l(Io,Ko),Bs=new l(Io,Gl),Ji=new l($s,Gl),Co=new l(Qs/De,us/De),Jo=new l(Os/De,Fs/De),ao=O*Math.PI/180;if(ao){var Ds=Math.sin(ao),Rl=Math.cos(ao),qs=[Rl,-Ds,Ds,Rl];Wl._matMult(qs),Ns._matMult(qs),Ji._matMult(qs),Bs._matMult(qs)}var ms=no.stretch+no.fixed,el=Ja.stretch+Ja.fixed;return{tl:Wl,tr:Ns,bl:Ji,br:Bs,tex:{x:we.paddedRect.x+1+ms,y:we.paddedRect.y+1+el,w:ho.stretch+ho.fixed-ms,h:Vo.stretch+Vo.fixed-el},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Co,pixelOffsetBR:Jo,minFontScaleX:xa/De/St,minFontScaleY:Ka/De/Ot,isSDF:Z}};if(ce&&(we.stretchX||we.stretchY))for(var za=pf(Ht,Kr,Mr),Ii=pf(Qt,Br,Er),bi=0;bi<za.length-1;bi++)for(var Ga=za[bi],Wi=za[bi+1],Ei=0;Ei<Ii.length-1;Ei++)xe.push(ei(Ga,Ii[Ei],Wi,Ii[Ei+1]));else xe.push(ei({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ze+1},{fixed:0,stretch:pt+1}));return xe}function xh(_,O,Z){for(var ce=0,xe=0,we=_;xe<we.length;xe+=1){var De=we[xe];ce+=Math.max(O,Math.min(Z,De[1]))-Math.max(O,Math.min(Z,De[0]))}return ce}function pf(_,O,Z){for(var ce=[{fixed:-1,stretch:0}],xe=0,we=_;xe<we.length;xe+=1){var De=we[xe],Ze=De[0],pt=De[1],St=ce[ce.length-1];ce.push({fixed:Ze-St.stretch,stretch:St.stretch}),ce.push({fixed:Ze-St.stretch,stretch:St.stretch+(pt-Ze)})}return ce.push({fixed:O+1,stretch:Z}),ce}function jf(_,O,Z,ce){return _/O*Z+ce}function bh(_,O,Z,ce){return _-O*Z/ce}var Ap=function(_,O,Z,ce,xe,we,De,Ze,pt,St){if(this.boxStartIndex=_.length,pt){var Ot=we.top,Ht=we.bottom,Qt=we.collisionPadding;Qt&&(Ot-=Qt[1],Ht+=Qt[3]);var lr=Ht-Ot;lr>0&&(lr=Math.max(10,lr),this.circleDiameter=lr)}else{var Mr=we.top*De-Ze,Er=we.bottom*De+Ze,Kr=we.left*De-Ze,Br=we.right*De+Ze,sn=we.collisionPadding;if(sn&&(Kr-=sn[0]*De,Mr-=sn[1]*De,Br+=sn[2]*De,Er+=sn[3]*De),St){var vn=new l(Kr,Mr),Rn=new l(Br,Mr),zn=new l(Kr,Er),Zn=new l(Br,Er),xa=St*Math.PI/180;vn._rotate(xa),Rn._rotate(xa),zn._rotate(xa),Zn._rotate(xa),Kr=Math.min(vn.x,Rn.x,zn.x,Zn.x),Br=Math.max(vn.x,Rn.x,zn.x,Zn.x),Mr=Math.min(vn.y,Rn.y,zn.y,Zn.y),Er=Math.max(vn.y,Rn.y,zn.y,Zn.y)}_.emplaceBack(O.x,O.y,Kr,Mr,Br,Er,Z,ce,xe)}this.boxEndIndex=_.length},_h=function(_,O){if(_===void 0&&(_=[]),O===void 0&&(O=_v),this.data=_,this.length=this.data.length,this.compare=O,this.length>0)for(var Z=(this.length>>1)-1;Z>=0;Z--)this._down(Z)};function _v(_,O){return _<O?-1:_>O?1:0}function wv(_,O,Z){O===void 0&&(O=1),Z===void 0&&(Z=!1);for(var ce=1/0,xe=1/0,we=-1/0,De=-1/0,Ze=_[0],pt=0;pt<Ze.length;pt++){var St=Ze[pt];(!pt||St.x<ce)&&(ce=St.x),(!pt||St.y<xe)&&(xe=St.y),(!pt||St.x>we)&&(we=St.x),(!pt||St.y>De)&&(De=St.y)}var Ot=Math.min(we-ce,De-xe),Ht=Ot/2,Qt=new _h([],Tv);if(Ot===0)return new l(ce,xe);for(var lr=ce;lr<we;lr+=Ot)for(var Mr=xe;Mr<De;Mr+=Ot)Qt.push(new Gf(lr+Ht,Mr+Ht,Ht,_));for(var Er=function(sn){for(var vn=0,Rn=0,zn=0,Zn=sn[0],xa=0,La=Zn.length,Ka=La-1;xa<La;Ka=xa++){var Ba=Zn[xa],ei=Zn[Ka],za=Ba.x*ei.y-ei.x*Ba.y;Rn+=(Ba.x+ei.x)*za,zn+=(Ba.y+ei.y)*za,vn+=3*za}return new Gf(Rn/vn,zn/vn,0,sn)}(_),Kr=Qt.length;Qt.length;){var Br=Qt.pop();(Br.d>Er.d||!Er.d)&&(Er=Br,Z&&console.log("found best %d after %d probes",Math.round(1e4*Br.d)/1e4,Kr)),Br.max-Er.d<=O||(Qt.push(new Gf(Br.p.x-(Ht=Br.h/2),Br.p.y-Ht,Ht,_)),Qt.push(new Gf(Br.p.x+Ht,Br.p.y-Ht,Ht,_)),Qt.push(new Gf(Br.p.x-Ht,Br.p.y+Ht,Ht,_)),Qt.push(new Gf(Br.p.x+Ht,Br.p.y+Ht,Ht,_)),Kr+=4)}return Z&&(console.log("num probes: "+Kr),console.log("best distance: "+Er.d)),Er.p}function Tv(_,O){return O.max-_.max}function Gf(_,O,Z,ce){this.p=new l(_,O),this.h=Z,this.d=function(xe,we){for(var De=!1,Ze=1/0,pt=0;pt<we.length;pt++)for(var St=we[pt],Ot=0,Ht=St.length,Qt=Ht-1;Ot<Ht;Qt=Ot++){var lr=St[Ot],Mr=St[Qt];lr.y>xe.y!=Mr.y>xe.y&&xe.x<(Mr.x-lr.x)*(xe.y-lr.y)/(Mr.y-lr.y)+lr.x&&(De=!De),Ze=Math.min(Ze,fc(xe,lr,Mr))}return(De?1:-1)*Math.sqrt(Ze)}(this.p,ce),this.max=this.d+this.h*Math.SQRT2}_h.prototype.push=function(_){this.data.push(_),this.length++,this._up(this.length-1)},_h.prototype.pop=function(){if(this.length!==0){var _=this.data[0],O=this.data.pop();return this.length--,this.length>0&&(this.data[0]=O,this._down(0)),_}},_h.prototype.peek=function(){return this.data[0]},_h.prototype._up=function(_){for(var O=this.data,Z=this.compare,ce=O[_];_>0;){var xe=_-1>>1,we=O[xe];if(Z(ce,we)>=0)break;O[_]=we,_=xe}O[_]=ce},_h.prototype._down=function(_){for(var O=this.data,Z=this.compare,ce=this.length>>1,xe=O[_];_<ce;){var we=1+(_<<1),De=O[we],Ze=we+1;if(Ze<this.length&&Z(O[Ze],De)<0&&(we=Ze,De=O[Ze]),Z(De,xe)>=0)break;O[_]=De,_=we}O[_]=xe};var Y=Number.POSITIVE_INFINITY;function he(_,O){return O[1]!==Y?function(Z,ce,xe){var we=0,De=0;switch(ce=Math.abs(ce),xe=Math.abs(xe),Z){case"top-right":case"top-left":case"top":De=xe-7;break;case"bottom-right":case"bottom-left":case"bottom":De=7-xe}switch(Z){case"top-right":case"bottom-right":case"right":we=-ce;break;case"top-left":case"bottom-left":case"left":we=ce}return[we,De]}(_,O[0],O[1]):function(Z,ce){var xe=0,we=0;ce<0&&(ce=0);var De=ce/Math.sqrt(2);switch(Z){case"top-right":case"top-left":we=De-7;break;case"bottom-right":case"bottom-left":we=7-De;break;case"bottom":we=7-ce;break;case"top":we=ce-7}switch(Z){case"top-right":case"bottom-right":xe=-De;break;case"top-left":case"bottom-left":xe=De;break;case"left":xe=ce;break;case"right":xe=-ce}return[xe,we]}(_,O[0])}function ye(_){switch(_){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _e(_,O,Z,ce,xe,we,De,Ze,pt,St,Ot,Ht,Qt,lr,Mr){var Er=function(Rn,zn,Zn,xa,La,Ka,Ba,ei){for(var za=xa.layout.get("text-rotate").evaluate(Ka,{})*Math.PI/180,Ii=[],bi=0,Ga=zn.positionedLines;bi<Ga.length;bi+=1)for(var Wi=Ga[bi],Ei=0,no=Wi.positionedGlyphs;Ei<no.length;Ei+=1){var Ja=no[Ei];if(Ja.rect){var ho=Ja.rect||{},Vo=4,$s=!0,Qs=1,Ko=0,us=(La||ei)&&Ja.vertical,Io=Ja.metrics.advance*Ja.scale/2;if(ei&&zn.verticalizable&&(Ko=Wi.lineOffset/2-(Ja.imageName?-(24-Ja.metrics.width*Ja.scale)/2:24*(Ja.scale-1))),Ja.imageName){var Os=Ba[Ja.imageName];$s=Os.sdf,Vo=1/(Qs=Os.pixelRatio)}var Gl=La?[Ja.x+Io,Ja.y]:[0,0],Fs=La?[0,0]:[Ja.x+Io+Zn[0],Ja.y+Zn[1]-Ko],Wl=[0,0];us&&(Wl=Fs,Fs=[0,0]);var Ns=(Ja.metrics.left-Vo)*Ja.scale-Io+Fs[0],Bs=(-Ja.metrics.top-Vo)*Ja.scale+Fs[1],Ji=Ns+ho.w*Ja.scale/Qs,Co=Bs+ho.h*Ja.scale/Qs,Jo=new l(Ns,Bs),ao=new l(Ji,Bs),Ds=new l(Ns,Co),Rl=new l(Ji,Co);if(us){var qs=new l(-Io,Io- -17),ms=-Math.PI/2,el=12-Io,$o=new l(22-el,-(Ja.imageName?el:0)),ko=new(Function.prototype.bind.apply(l,[null].concat(Wl)));Jo._rotateAround(ms,qs)._add($o)._add(ko),ao._rotateAround(ms,qs)._add($o)._add(ko),Ds._rotateAround(ms,qs)._add($o)._add(ko),Rl._rotateAround(ms,qs)._add($o)._add(ko)}if(za){var Vu=Math.sin(za),df=Math.cos(za),Ho=[df,-Vu,Vu,df];Jo._matMult(Ho),ao._matMult(Ho),Ds._matMult(Ho),Rl._matMult(Ho)}var Fi=new l(0,0),gc=new l(0,0);Ii.push({tl:Jo,tr:ao,bl:Ds,br:Rl,tex:ho,writingMode:zn.writingMode,glyphOffset:Gl,sectionIndex:Ja.sectionIndex,isSDF:$s,pixelOffsetTL:Fi,pixelOffsetBR:gc,minFontScaleX:0,minFontScaleY:0})}}return Ii}(0,Z,Ze,xe,we,De,ce,_.allowVerticalPlacement),Kr=_.textSizeData,Br=null;Kr.kind==="source"?(Br=[128*xe.layout.get("text-size").evaluate(De,{})])[0]>32640&&E(_.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Kr.kind==="composite"&&((Br=[128*lr.compositeTextSizes[0].evaluate(De,{},Mr),128*lr.compositeTextSizes[1].evaluate(De,{},Mr)])[0]>32640||Br[1]>32640)&&E(_.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),_.addSymbols(_.text,Er,Br,Ze,we,De,St,O,pt.lineStartIndex,pt.lineLength,Qt,Mr);for(var sn=0,vn=Ot;sn<vn.length;sn+=1)Ht[vn[sn]]=_.text.placedSymbolArray.length-1;return 4*Er.length}function Ee(_){for(var O in _)return _[O];return null}function Re(_,O,Z,ce){var xe=_.compareText;if(O in xe){for(var we=xe[O],De=we.length-1;De>=0;De--)if(ce.dist(we[De])<Z)return!0}else xe[O]=[];return xe[O].push(ce),!1}var rt=fh.VectorTileFeature.types,Ke=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function at(_,O,Z,ce,xe,we,De,Ze,pt,St,Ot,Ht,Qt){var lr=Ze?Math.min(32640,Math.round(Ze[0])):0,Mr=Ze?Math.min(32640,Math.round(Ze[1])):0;_.emplaceBack(O,Z,Math.round(32*ce),Math.round(32*xe),we,De,(lr<<1)+(pt?1:0),Mr,16*St,16*Ot,256*Ht,256*Qt)}function mt(_,O,Z){_.emplaceBack(O.x,O.y,Z),_.emplaceBack(O.x,O.y,Z),_.emplaceBack(O.x,O.y,Z),_.emplaceBack(O.x,O.y,Z)}function wt(_){for(var O=0,Z=_.sections;O<Z.length;O+=1)if(qi(Z[O].text))return!0;return!1}var Vt=function(_){this.layoutVertexArray=new Si,this.indexArray=new ns,this.programConfigurations=_,this.segments=new pr,this.dynamicLayoutVertexArray=new Es,this.opacityVertexArray=new yl,this.placedSymbolArray=new ve};Vt.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Vt.prototype.upload=function(_,O,Z,ce){this.isEmpty()||(Z&&(this.layoutVertexBuffer=_.createVertexBuffer(this.layoutVertexArray,Uh.members),this.indexBuffer=_.createIndexBuffer(this.indexArray,O),this.dynamicLayoutVertexBuffer=_.createVertexBuffer(this.dynamicLayoutVertexArray,hv.members,!0),this.opacityVertexBuffer=_.createVertexBuffer(this.opacityVertexArray,Ke,!0),this.opacityVertexBuffer.itemSize=1),(Z||ce)&&this.programConfigurations.upload(_))},Vt.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ya("SymbolBuffers",Vt);var Yt=function(_,O,Z){this.layoutVertexArray=new _,this.layoutAttributes=O,this.indexArray=new Z,this.segments=new pr,this.collisionVertexArray=new Cs};Yt.prototype.upload=function(_){this.layoutVertexBuffer=_.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=_.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=_.createVertexBuffer(this.collisionVertexArray,xp.members,!0)},Yt.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ya("CollisionBuffers",Yt);var cr=function(_){this.collisionBoxArray=_.collisionBoxArray,this.zoom=_.zoom,this.overscaling=_.overscaling,this.layers=_.layers,this.layerIds=this.layers.map(function(we){return we.id}),this.index=_.index,this.pixelRatio=_.pixelRatio,this.sourceLayerIndex=_.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=pc([]),this.placementViewportMatrix=pc([]);var O=this.layers[0]._unevaluatedLayout._values;this.textSizeData=mh(this.zoom,O["text-size"]),this.iconSizeData=mh(this.zoom,O["icon-size"]);var Z=this.layers[0].layout,ce=Z.get("symbol-sort-key"),xe=Z.get("symbol-z-order");this.sortFeaturesByKey=xe!=="viewport-y"&&ce.constantOr(1)!==void 0,this.sortFeaturesByY=(xe==="viewport-y"||xe==="auto"&&!this.sortFeaturesByKey)&&(Z.get("text-allow-overlap")||Z.get("icon-allow-overlap")||Z.get("text-ignore-placement")||Z.get("icon-ignore-placement")),Z.get("symbol-placement")==="point"&&(this.writingModes=Z.get("text-writing-mode").map(function(we){return mu[we]})),this.stateDependentLayerIds=this.layers.filter(function(we){return we.isStateDependent()}).map(function(we){return we.id}),this.sourceID=_.sourceID};cr.prototype.createArrays=function(){this.text=new Vt(new Ha(Uh.members,this.layers,this.zoom,function(_){return/^text/.test(_)})),this.icon=new Vt(new Ha(Uh.members,this.layers,this.zoom,function(_){return/^icon/.test(_)})),this.glyphOffsetArray=new Xe,this.lineVertexArray=new ut,this.symbolInstances=new Oe},cr.prototype.calculateGlyphDependencies=function(_,O,Z,ce,xe){for(var we=0;we<_.length;we++)if(O[_.charCodeAt(we)]=!0,(Z||ce)&&xe){var De=_s[_.charAt(we)];De&&(O[De.charCodeAt(0)]=!0)}},cr.prototype.populate=function(_,O,Z){var ce=this.layers[0],xe=ce.layout,we=xe.get("text-font"),De=xe.get("text-field"),Ze=xe.get("icon-image"),pt=(De.value.kind!=="constant"||De.value.value instanceof Fr&&!De.value.value.isEmpty()||De.value.value.toString().length>0)&&(we.value.kind!=="constant"||we.value.value.length>0),St=Ze.value.kind!=="constant"||!!Ze.value.value||Object.keys(Ze.parameters).length>0,Ot=xe.get("symbol-sort-key");if(this.features=[],pt||St){for(var Ht=O.iconDependencies,Qt=O.glyphDependencies,lr=O.availableImages,Mr=new Xa(this.zoom),Er=0,Kr=_;Er<Kr.length;Er+=1){var Br=Kr[Er],sn=Br.feature,vn=Br.id,Rn=Br.index,zn=Br.sourceLayerIndex,Zn=ce._featureFilter.needGeometry,xa={type:sn.type,id:vn,properties:sn.properties,geometry:Zn?Ao(sn):[]};if(ce._featureFilter.filter(Mr,xa,Z)){Zn||(xa.geometry=Ao(sn));var La=void 0;if(pt){var Ka=ce.getValueAndResolveTokens("text-field",xa,Z,lr),Ba=Fr.factory(Ka);wt(Ba)&&(this.hasRTLText=!0),(!this.hasRTLText||Ss()==="unavailable"||this.hasRTLText&&so.isParsed())&&(La=dd(Ba,ce,xa))}var ei=void 0;if(St){var za=ce.getValueAndResolveTokens("icon-image",xa,Z,lr);ei=za instanceof Mn?za:Mn.fromString(za)}if(La||ei){var Ii=this.sortFeaturesByKey?Ot.evaluate(xa,{},Z):void 0,bi={id:vn,text:La,icon:ei,index:Rn,sourceLayerIndex:zn,geometry:Ao(sn),properties:sn.properties,type:rt[sn.type],sortKey:Ii};if(this.features.push(bi),ei&&(Ht[ei.name]=!0),La){var Ga=we.evaluate(xa,{},Z).join(","),Wi=xe.get("text-rotation-alignment")==="map"&&xe.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(mu.vertical)>=0;for(var Ei=0,no=La.sections;Ei<no.length;Ei+=1){var Ja=no[Ei];if(Ja.image)Ht[Ja.image.name]=!0;else{var ho=oi(La.toString()),Vo=Ja.fontStack||Ga,$s=Qt[Vo]=Qt[Vo]||{};this.calculateGlyphDependencies(Ja.text,$s,Wi,this.allowVerticalPlacement,ho)}}}}}}xe.get("symbol-placement")==="line"&&(this.features=function(Qs){var Ko={},us={},Io=[],Os=0;function Gl(ms){Io.push(Qs[ms]),Os++}function Fs(ms,el,$o){var ko=us[ms];return delete us[ms],us[el]=ko,Io[ko].geometry[0].pop(),Io[ko].geometry[0]=Io[ko].geometry[0].concat($o[0]),ko}function Wl(ms,el,$o){var ko=Ko[el];return delete Ko[el],Ko[ms]=ko,Io[ko].geometry[0].shift(),Io[ko].geometry[0]=$o[0].concat(Io[ko].geometry[0]),ko}function Ns(ms,el,$o){var ko=$o?el[0][el[0].length-1]:el[0][0];return ms+":"+ko.x+":"+ko.y}for(var Bs=0;Bs<Qs.length;Bs++){var Ji=Qs[Bs],Co=Ji.geometry,Jo=Ji.text?Ji.text.toString():null;if(Jo){var ao=Ns(Jo,Co),Ds=Ns(Jo,Co,!0);if(ao in us&&Ds in Ko&&us[ao]!==Ko[Ds]){var Rl=Wl(ao,Ds,Co),qs=Fs(ao,Ds,Io[Rl].geometry);delete Ko[ao],delete us[Ds],us[Ns(Jo,Io[qs].geometry,!0)]=qs,Io[Rl].geometry=null}else ao in us?Fs(ao,Ds,Co):Ds in Ko?Wl(ao,Ds,Co):(Gl(Bs),Ko[ao]=Os-1,us[Ds]=Os-1)}else Gl(Bs)}return Io.filter(function(ms){return ms.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Qs,Ko){return Qs.sortKey-Ko.sortKey})}},cr.prototype.update=function(_,O,Z){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(_,O,this.layers,Z),this.icon.programConfigurations.updatePaintArrays(_,O,this.layers,Z))},cr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},cr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},cr.prototype.upload=function(_){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(_),this.iconCollisionBox.upload(_)),this.text.upload(_,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(_,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},cr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},cr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},cr.prototype.addToLineVertexArray=function(_,O){var Z=this.lineVertexArray.length;if(_.segment!==void 0){for(var ce=_.dist(O[_.segment+1]),xe=_.dist(O[_.segment]),we={},De=_.segment+1;De<O.length;De++)we[De]={x:O[De].x,y:O[De].y,tileUnitDistanceFromAnchor:ce},De<O.length-1&&(ce+=O[De+1].dist(O[De]));for(var Ze=_.segment||0;Ze>=0;Ze--)we[Ze]={x:O[Ze].x,y:O[Ze].y,tileUnitDistanceFromAnchor:xe},Ze>0&&(xe+=O[Ze-1].dist(O[Ze]));for(var pt=0;pt<O.length;pt++){var St=we[pt];this.lineVertexArray.emplaceBack(St.x,St.y,St.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Z,lineLength:this.lineVertexArray.length-Z}},cr.prototype.addSymbols=function(_,O,Z,ce,xe,we,De,Ze,pt,St,Ot,Ht){for(var Qt=_.indexArray,lr=_.layoutVertexArray,Mr=_.segments.prepareSegment(4*O.length,lr,Qt,we.sortKey),Er=this.glyphOffsetArray.length,Kr=Mr.vertexLength,Br=this.allowVerticalPlacement&&De===mu.vertical?Math.PI/2:0,sn=we.text&&we.text.sections,vn=0;vn<O.length;vn++){var Rn=O[vn],zn=Rn.tl,Zn=Rn.tr,xa=Rn.bl,La=Rn.br,Ka=Rn.tex,Ba=Rn.pixelOffsetTL,ei=Rn.pixelOffsetBR,za=Rn.minFontScaleX,Ii=Rn.minFontScaleY,bi=Rn.glyphOffset,Ga=Rn.isSDF,Wi=Rn.sectionIndex,Ei=Mr.vertexLength,no=bi[1];at(lr,Ze.x,Ze.y,zn.x,no+zn.y,Ka.x,Ka.y,Z,Ga,Ba.x,Ba.y,za,Ii),at(lr,Ze.x,Ze.y,Zn.x,no+Zn.y,Ka.x+Ka.w,Ka.y,Z,Ga,ei.x,Ba.y,za,Ii),at(lr,Ze.x,Ze.y,xa.x,no+xa.y,Ka.x,Ka.y+Ka.h,Z,Ga,Ba.x,ei.y,za,Ii),at(lr,Ze.x,Ze.y,La.x,no+La.y,Ka.x+Ka.w,Ka.y+Ka.h,Z,Ga,ei.x,ei.y,za,Ii),mt(_.dynamicLayoutVertexArray,Ze,Br),Qt.emplaceBack(Ei,Ei+1,Ei+2),Qt.emplaceBack(Ei+1,Ei+2,Ei+3),Mr.vertexLength+=4,Mr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bi[0]),vn!==O.length-1&&Wi===O[vn+1].sectionIndex||_.programConfigurations.populatePaintArrays(lr.length,we,we.index,{},Ht,sn&&sn[Wi])}_.placedSymbolArray.emplaceBack(Ze.x,Ze.y,Er,this.glyphOffsetArray.length-Er,Kr,pt,St,Ze.segment,Z?Z[0]:0,Z?Z[1]:0,ce[0],ce[1],De,0,!1,0,Ot)},cr.prototype._addCollisionDebugVertex=function(_,O,Z,ce,xe,we){return O.emplaceBack(0,0),_.emplaceBack(Z.x,Z.y,ce,xe,Math.round(we.x),Math.round(we.y))},cr.prototype.addCollisionDebugVertices=function(_,O,Z,ce,xe,we,De){var Ze=xe.segments.prepareSegment(4,xe.layoutVertexArray,xe.indexArray),pt=Ze.vertexLength,St=xe.layoutVertexArray,Ot=xe.collisionVertexArray,Ht=De.anchorX,Qt=De.anchorY;this._addCollisionDebugVertex(St,Ot,we,Ht,Qt,new l(_,O)),this._addCollisionDebugVertex(St,Ot,we,Ht,Qt,new l(Z,O)),this._addCollisionDebugVertex(St,Ot,we,Ht,Qt,new l(Z,ce)),this._addCollisionDebugVertex(St,Ot,we,Ht,Qt,new l(_,ce)),Ze.vertexLength+=4;var lr=xe.indexArray;lr.emplaceBack(pt,pt+1),lr.emplaceBack(pt+1,pt+2),lr.emplaceBack(pt+2,pt+3),lr.emplaceBack(pt+3,pt),Ze.primitiveLength+=4},cr.prototype.addDebugCollisionBoxes=function(_,O,Z,ce){for(var xe=_;xe<O;xe++){var we=this.collisionBoxArray.get(xe);this.addCollisionDebugVertices(we.x1,we.y1,we.x2,we.y2,ce?this.textCollisionBox:this.iconCollisionBox,we.anchorPoint,Z)}},cr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Yt(rs,ph.members,fo),this.iconCollisionBox=new Yt(rs,ph.members,fo);for(var _=0;_<this.symbolInstances.length;_++){var O=this.symbolInstances.get(_);this.addDebugCollisionBoxes(O.textBoxStartIndex,O.textBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.iconBoxStartIndex,O.iconBoxEndIndex,O,!1),this.addDebugCollisionBoxes(O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,!1)}},cr.prototype._deserializeCollisionBoxesForSymbol=function(_,O,Z,ce,xe,we,De,Ze,pt){for(var St={},Ot=O;Ot<Z;Ot++){var Ht=_.get(Ot);St.textBox={x1:Ht.x1,y1:Ht.y1,x2:Ht.x2,y2:Ht.y2,anchorPointX:Ht.anchorPointX,anchorPointY:Ht.anchorPointY},St.textFeatureIndex=Ht.featureIndex;break}for(var Qt=ce;Qt<xe;Qt++){var lr=_.get(Qt);St.verticalTextBox={x1:lr.x1,y1:lr.y1,x2:lr.x2,y2:lr.y2,anchorPointX:lr.anchorPointX,anchorPointY:lr.anchorPointY},St.verticalTextFeatureIndex=lr.featureIndex;break}for(var Mr=we;Mr<De;Mr++){var Er=_.get(Mr);St.iconBox={x1:Er.x1,y1:Er.y1,x2:Er.x2,y2:Er.y2,anchorPointX:Er.anchorPointX,anchorPointY:Er.anchorPointY},St.iconFeatureIndex=Er.featureIndex;break}for(var Kr=Ze;Kr<pt;Kr++){var Br=_.get(Kr);St.verticalIconBox={x1:Br.x1,y1:Br.y1,x2:Br.x2,y2:Br.y2,anchorPointX:Br.anchorPointX,anchorPointY:Br.anchorPointY},St.verticalIconFeatureIndex=Br.featureIndex;break}return St},cr.prototype.deserializeCollisionBoxes=function(_){this.collisionArrays=[];for(var O=0;O<this.symbolInstances.length;O++){var Z=this.symbolInstances.get(O);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(_,Z.textBoxStartIndex,Z.textBoxEndIndex,Z.verticalTextBoxStartIndex,Z.verticalTextBoxEndIndex,Z.iconBoxStartIndex,Z.iconBoxEndIndex,Z.verticalIconBoxStartIndex,Z.verticalIconBoxEndIndex))}},cr.prototype.hasTextData=function(){return this.text.segments.get().length>0},cr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},cr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},cr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},cr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},cr.prototype.addIndicesForPlacedSymbol=function(_,O){for(var Z=_.placedSymbolArray.get(O),ce=Z.vertexStartIndex+4*Z.numGlyphs,xe=Z.vertexStartIndex;xe<ce;xe+=4)_.indexArray.emplaceBack(xe,xe+1,xe+2),_.indexArray.emplaceBack(xe+1,xe+2,xe+3)},cr.prototype.getSortedSymbolIndexes=function(_){if(this.sortedAngle===_&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var O=Math.sin(_),Z=Math.cos(_),ce=[],xe=[],we=[],De=0;De<this.symbolInstances.length;++De){we.push(De);var Ze=this.symbolInstances.get(De);ce.push(0|Math.round(O*Ze.anchorX+Z*Ze.anchorY)),xe.push(Ze.featureIndex)}return we.sort(function(pt,St){return ce[pt]-ce[St]||xe[St]-xe[pt]}),we},cr.prototype.addToSortKeyRanges=function(_,O){var Z=this.sortKeyRanges[this.sortKeyRanges.length-1];Z&&Z.sortKey===O?Z.symbolInstanceEnd=_+1:this.sortKeyRanges.push({sortKey:O,symbolInstanceStart:_,symbolInstanceEnd:_+1})},cr.prototype.sortFeatures=function(_){var O=this;if(this.sortFeaturesByY&&this.sortedAngle!==_&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(_),this.sortedAngle=_,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Z=0,ce=this.symbolInstanceIndexes;Z<ce.length;Z+=1){var xe=this.symbolInstances.get(ce[Z]);this.featureSortOrder.push(xe.featureIndex),[xe.rightJustifiedTextSymbolIndex,xe.centerJustifiedTextSymbolIndex,xe.leftJustifiedTextSymbolIndex].forEach(function(we,De,Ze){we>=0&&Ze.indexOf(we)===De&&O.addIndicesForPlacedSymbol(O.text,we)}),xe.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,xe.verticalPlacedTextSymbolIndex),xe.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,xe.placedIconSymbolIndex),xe.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,xe.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ya("SymbolBucket",cr,{omit:["layers","collisionBoxArray","features","compareText"]}),cr.MAX_GLYPHS=65535,cr.addDynamicAttributes=mt;var Rr=new mi({"symbol-placement":new Oa(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new Oa(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Oa(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Da(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Oa(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Oa(ke.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Oa(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new Oa(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Oa(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new Da(ke.layout_symbol["icon-size"]),"icon-text-fit":new Oa(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Oa(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new Da(ke.layout_symbol["icon-image"]),"icon-rotate":new Da(ke.layout_symbol["icon-rotate"]),"icon-padding":new Oa(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new Oa(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new Da(ke.layout_symbol["icon-offset"]),"icon-anchor":new Da(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Oa(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Oa(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Oa(ke.layout_symbol["text-rotation-alignment"]),"text-field":new Da(ke.layout_symbol["text-field"]),"text-font":new Da(ke.layout_symbol["text-font"]),"text-size":new Da(ke.layout_symbol["text-size"]),"text-max-width":new Da(ke.layout_symbol["text-max-width"]),"text-line-height":new Oa(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new Da(ke.layout_symbol["text-letter-spacing"]),"text-justify":new Da(ke.layout_symbol["text-justify"]),"text-radial-offset":new Da(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Oa(ke.layout_symbol["text-variable-anchor"]),"text-anchor":new Da(ke.layout_symbol["text-anchor"]),"text-max-angle":new Oa(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new Oa(ke.layout_symbol["text-writing-mode"]),"text-rotate":new Da(ke.layout_symbol["text-rotate"]),"text-padding":new Oa(ke.layout_symbol["text-padding"]),"text-keep-upright":new Oa(ke.layout_symbol["text-keep-upright"]),"text-transform":new Da(ke.layout_symbol["text-transform"]),"text-offset":new Da(ke.layout_symbol["text-offset"]),"text-allow-overlap":new Oa(ke.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Oa(ke.layout_symbol["text-ignore-placement"]),"text-optional":new Oa(ke.layout_symbol["text-optional"])}),ir={paint:new mi({"icon-opacity":new Da(ke.paint_symbol["icon-opacity"]),"icon-color":new Da(ke.paint_symbol["icon-color"]),"icon-halo-color":new Da(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new Da(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Da(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new Oa(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new Oa(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new Da(ke.paint_symbol["text-opacity"]),"text-color":new Da(ke.paint_symbol["text-color"],{runtimeType:nr,getOverride:function(_){return _.textColor},hasOverride:function(_){return!!_.textColor}}),"text-halo-color":new Da(ke.paint_symbol["text-halo-color"]),"text-halo-width":new Da(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new Da(ke.paint_symbol["text-halo-blur"]),"text-translate":new Oa(ke.paint_symbol["text-translate"]),"text-translate-anchor":new Oa(ke.paint_symbol["text-translate-anchor"])}),layout:Rr},hr=function(_){this.type=_.property.overrides?_.property.overrides.runtimeType:Je,this.defaultValue=_};hr.prototype.evaluate=function(_){if(_.formattedSection){var O=this.defaultValue.property.overrides;if(O&&O.hasOverride(_.formattedSection))return O.getOverride(_.formattedSection)}return _.feature&&_.featureState?this.defaultValue.evaluate(_.feature,_.featureState):this.defaultValue.property.specification.default},hr.prototype.eachChild=function(_){this.defaultValue.isConstant()||_(this.defaultValue.value._styleExpression.expression)},hr.prototype.outputDefined=function(){return!1},hr.prototype.serialize=function(){return null},ya("FormatSectionOverride",hr,{omit:["defaultValue"]});var vr=function(_){function O(Z){_.call(this,Z,ir)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.recalculate=function(Z,ce){if(_.prototype.recalculate.call(this,Z,ce),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var xe=this.layout.get("text-writing-mode");if(xe){for(var we=[],De=0,Ze=xe;De<Ze.length;De+=1){var pt=Ze[De];we.indexOf(pt)<0&&we.push(pt)}this.layout._values["text-writing-mode"]=we}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},O.prototype.getValueAndResolveTokens=function(Z,ce,xe,we){var De=this.layout.get(Z).evaluate(ce,{},xe,we),Ze=this._unevaluatedLayout._values[Z];return Ze.isDataDriven()||ol(Ze.value)||!De?De:function(pt,St){return St.replace(/{([^{}]+)}/g,function(Ot,Ht){return Ht in pt?String(pt[Ht]):""})}(ce.properties,De)},O.prototype.createBucket=function(Z){return new cr(Z)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype._setPaintOverrides=function(){for(var Z=0,ce=ir.paint.overridableProperties;Z<ce.length;Z+=1){var xe=ce[Z];if(O.hasPaintOverride(this.layout,xe)){var we,De=this.paint.get(xe),Ze=new hr(De),pt=new kl(Ze,De.property.specification);we=De.value.kind==="constant"||De.value.kind==="source"?new gs("source",pt):new Kl("composite",pt,De.value.zoomStops,De.value._interpolationType),this.paint._values[xe]=new eo(De.property,we,De.parameters)}}},O.prototype._handleOverridablePaintPropertyUpdate=function(Z,ce,xe){return!(!this.layout||ce.isDataDriven()||xe.isDataDriven())&&O.hasPaintOverride(this.layout,Z)},O.hasPaintOverride=function(Z,ce){var xe=Z.get("text-field"),we=ir.paint.properties[ce],De=!1,Ze=function(Ot){for(var Ht=0,Qt=Ot;Ht<Qt.length;Ht+=1)if(we.overrides&&we.overrides.hasOverride(Qt[Ht]))return void(De=!0)};if(xe.value.kind==="constant"&&xe.value.value instanceof Fr)Ze(xe.value.value.sections);else if(xe.value.kind==="source"){var pt=function(Ot){De||(Ot instanceof Nr&&Nn(Ot.value)===kt?Ze(Ot.value.sections):Ot instanceof xn?Ze(Ot.sections):Ot.eachChild(pt))},St=xe.value;St._styleExpression&&pt(St._styleExpression.expression)}return De},O}(pi),Ir={paint:new mi({"background-color":new Oa(ke.paint_background["background-color"]),"background-pattern":new aa(ke.paint_background["background-pattern"]),"background-opacity":new Oa(ke.paint_background["background-opacity"])})},gr=function(_){function O(Z){_.call(this,Z,Ir)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O}(pi),kr={paint:new mi({"raster-opacity":new Oa(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new Oa(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Oa(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Oa(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new Oa(ke.paint_raster["raster-saturation"]),"raster-contrast":new Oa(ke.paint_raster["raster-contrast"]),"raster-resampling":new Oa(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new Oa(ke.paint_raster["raster-fade-duration"])})},gn=function(_){function O(Z){_.call(this,Z,kr)}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O}(pi),dn=function(_){function O(Z){_.call(this,Z,{}),this.implementation=Z}return _&&(O.__proto__=_),(O.prototype=Object.create(_&&_.prototype)).constructor=O,O.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},O.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},O.prototype.recalculate=function(){},O.prototype.updateTransitions=function(){},O.prototype.hasTransition=function(){},O.prototype.serialize=function(){},O.prototype.onAdd=function(Z){this.implementation.onAdd&&this.implementation.onAdd(Z,Z.painter.context.gl)},O.prototype.onRemove=function(Z){this.implementation.onRemove&&this.implementation.onRemove(Z,Z.painter.context.gl)},O}(pi),fn={circle:od,heatmap:tv,hillshade:hp,fill:iv,"fill-extrusion":mp,line:fv,symbol:vr,background:gr,raster:gn},on=self.HTMLImageElement,Yn=self.HTMLCanvasElement,$n=self.HTMLVideoElement,Ca=self.ImageData,pa=self.ImageBitmap,ma=function(_,O,Z,ce){this.context=_,this.format=Z,this.texture=_.gl.createTexture(),this.update(O,ce)};ma.prototype.update=function(_,O,Z){var ce=_.width,xe=_.height,we=!(this.size&&this.size[0]===ce&&this.size[1]===xe||Z),De=this.context,Ze=De.gl;if(this.useMipmap=Boolean(O&&O.useMipmap),Ze.bindTexture(Ze.TEXTURE_2D,this.texture),De.pixelStoreUnpackFlipY.set(!1),De.pixelStoreUnpack.set(1),De.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ze.RGBA&&(!O||O.premultiply!==!1)),we)this.size=[ce,xe],_ instanceof on||_ instanceof Yn||_ instanceof $n||_ instanceof Ca||pa&&_ instanceof pa?Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,this.format,Ze.UNSIGNED_BYTE,_):Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,ce,xe,0,this.format,Ze.UNSIGNED_BYTE,_.data);else{var pt=Z||{x:0,y:0},St=pt.x,Ot=pt.y;_ instanceof on||_ instanceof Yn||_ instanceof $n||_ instanceof Ca||pa&&_ instanceof pa?Ze.texSubImage2D(Ze.TEXTURE_2D,0,St,Ot,Ze.RGBA,Ze.UNSIGNED_BYTE,_):Ze.texSubImage2D(Ze.TEXTURE_2D,0,St,Ot,ce,xe,Ze.RGBA,Ze.UNSIGNED_BYTE,_.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ze.generateMipmap(Ze.TEXTURE_2D)},ma.prototype.bind=function(_,O,Z){var ce=this.context.gl;ce.bindTexture(ce.TEXTURE_2D,this.texture),Z!==ce.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Z=ce.LINEAR),_!==this.filter&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,_),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,Z||_),this.filter=_),O!==this.wrap&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,O),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,O),this.wrap=O)},ma.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},ma.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Sn=function(_){var O=this;this._callback=_,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){O._triggered=!1,O._callback()})};Sn.prototype.trigger=function(){var _=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){_._triggered=!1,_._callback()},0))},Sn.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Kn=function(_,O,Z){this.target=_,this.parent=O,this.mapId=Z,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},y(["receive","process"],this),this.invoker=new Sn(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=D()?_:self};function ua(_,O,Z){var ce=2*Math.PI*6378137/256/Math.pow(2,Z);return[_*ce-2*Math.PI*6378137/2,O*ce-2*Math.PI*6378137/2]}Kn.prototype.send=function(_,O,Z,ce,xe){var we=this;xe===void 0&&(xe=!1);var De=Math.round(1e18*Math.random()).toString(36).substring(0,10);Z&&(this.callbacks[De]=Z);var Ze=G(this.globalScope)?void 0:[];return this.target.postMessage({id:De,type:_,hasCallback:!!Z,targetMapId:ce,mustQueue:xe,sourceMapId:this.mapId,data:ki(O,Ze)},Ze),{cancel:function(){Z&&delete we.callbacks[De],we.target.postMessage({id:De,type:"<cancel>",targetMapId:ce,sourceMapId:we.mapId})}}},Kn.prototype.receive=function(_){var O=_.data,Z=O.id;if(Z&&(!O.targetMapId||this.mapId===O.targetMapId))if(O.type==="<cancel>"){delete this.tasks[Z];var ce=this.cancelCallbacks[Z];delete this.cancelCallbacks[Z],ce&&ce()}else D()||O.mustQueue?(this.tasks[Z]=O,this.taskQueue.push(Z),this.invoker.trigger()):this.processTask(Z,O)},Kn.prototype.process=function(){if(this.taskQueue.length){var _=this.taskQueue.shift(),O=this.tasks[_];delete this.tasks[_],this.taskQueue.length&&this.invoker.trigger(),O&&this.processTask(_,O)}},Kn.prototype.processTask=function(_,O){var Z=this;if(O.type==="<response>"){var ce=this.callbacks[_];delete this.callbacks[_],ce&&(O.error?ce(vi(O.error)):ce(null,vi(O.data)))}else{var xe=!1,we=G(this.globalScope)?void 0:[],De=O.hasCallback?function(Ot,Ht){xe=!0,delete Z.cancelCallbacks[_],Z.target.postMessage({id:_,type:"<response>",sourceMapId:Z.mapId,error:Ot?ki(Ot):null,data:ki(Ht,we)},we)}:function(Ot){xe=!0},Ze=null,pt=vi(O.data);if(this.parent[O.type])Ze=this.parent[O.type](O.sourceMapId,pt,De);else if(this.parent.getWorkerSource){var St=O.type.split(".");Ze=this.parent.getWorkerSource(O.sourceMapId,St[0],pt.source)[St[1]](pt,De)}else De(new Error("Could not find function "+O.type));!xe&&Ze&&Ze.cancel&&(this.cancelCallbacks[_]=Ze.cancel)}},Kn.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var yn=function(_,O){_&&(O?this.setSouthWest(_).setNorthEast(O):_.length===4?this.setSouthWest([_[0],_[1]]).setNorthEast([_[2],_[3]]):this.setSouthWest(_[0]).setNorthEast(_[1]))};yn.prototype.setNorthEast=function(_){return this._ne=_ instanceof Vn?new Vn(_.lng,_.lat):Vn.convert(_),this},yn.prototype.setSouthWest=function(_){return this._sw=_ instanceof Vn?new Vn(_.lng,_.lat):Vn.convert(_),this},yn.prototype.extend=function(_){var O,Z,ce=this._sw,xe=this._ne;if(_ instanceof Vn)O=_,Z=_;else{if(!(_ instanceof yn))return Array.isArray(_)?_.length===4||_.every(Array.isArray)?this.extend(yn.convert(_)):this.extend(Vn.convert(_)):this;if(Z=_._ne,!(O=_._sw)||!Z)return this}return ce||xe?(ce.lng=Math.min(O.lng,ce.lng),ce.lat=Math.min(O.lat,ce.lat),xe.lng=Math.max(Z.lng,xe.lng),xe.lat=Math.max(Z.lat,xe.lat)):(this._sw=new Vn(O.lng,O.lat),this._ne=new Vn(Z.lng,Z.lat)),this},yn.prototype.getCenter=function(){return new Vn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},yn.prototype.getSouthWest=function(){return this._sw},yn.prototype.getNorthEast=function(){return this._ne},yn.prototype.getNorthWest=function(){return new Vn(this.getWest(),this.getNorth())},yn.prototype.getSouthEast=function(){return new Vn(this.getEast(),this.getSouth())},yn.prototype.getWest=function(){return this._sw.lng},yn.prototype.getSouth=function(){return this._sw.lat},yn.prototype.getEast=function(){return this._ne.lng},yn.prototype.getNorth=function(){return this._ne.lat},yn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},yn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},yn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},yn.prototype.contains=function(_){var O=Vn.convert(_),Z=O.lng,ce=O.lat,xe=this._sw.lng<=Z&&Z<=this._ne.lng;return this._sw.lng>this._ne.lng&&(xe=this._sw.lng>=Z&&Z>=this._ne.lng),this._sw.lat<=ce&&ce<=this._ne.lat&&xe},yn.convert=function(_){return!_||_ instanceof yn?_:new yn(_)};var Vn=function(_,O){if(isNaN(_)||isNaN(O))throw new Error("Invalid LngLat object: ("+_+", "+O+")");if(this.lng=+_,this.lat=+O,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Vn.prototype.wrap=function(){return new Vn(d(this.lng,-180,180),this.lat)},Vn.prototype.toArray=function(){return[this.lng,this.lat]},Vn.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Vn.prototype.distanceTo=function(_){var O=Math.PI/180,Z=this.lat*O,ce=_.lat*O,xe=Math.sin(Z)*Math.sin(ce)+Math.cos(Z)*Math.cos(ce)*Math.cos((_.lng-this.lng)*O);return 63710088e-1*Math.acos(Math.min(xe,1))},Vn.prototype.toBounds=function(_){_===void 0&&(_=0);var O=360*_/40075017,Z=O/Math.cos(Math.PI/180*this.lat);return new yn(new Vn(this.lng-Z,this.lat-O),new Vn(this.lng+Z,this.lat+O))},Vn.convert=function(_){if(_ instanceof Vn)return _;if(Array.isArray(_)&&(_.length===2||_.length===3))return new Vn(Number(_[0]),Number(_[1]));if(!Array.isArray(_)&&typeof _=="object"&&_!==null)return new Vn(Number("lng"in _?_.lng:_.lon),Number(_.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var ja=2*Math.PI*63710088e-1;function xi(_){return ja*Math.cos(_*Math.PI/180)}function Pi(_){return(180+_)/360}function vo(_){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+_*Math.PI/360)))/360}function Ro(_,O){return _/xi(O)}function Ks(_){return 360/Math.PI*Math.atan(Math.exp((180-360*_)*Math.PI/180))-90}var Ls=function(_,O,Z){Z===void 0&&(Z=0),this.x=+_,this.y=+O,this.z=+Z};Ls.fromLngLat=function(_,O){O===void 0&&(O=0);var Z=Vn.convert(_);return new Ls(Pi(Z.lng),vo(Z.lat),Ro(O,Z.lat))},Ls.prototype.toLngLat=function(){return new Vn(360*this.x-180,Ks(this.y))},Ls.prototype.toAltitude=function(){return this.z*xi(Ks(this.y))},Ls.prototype.meterInMercatorCoordinateUnits=function(){return 1/ja*(_=Ks(this.y),1/Math.cos(_*Math.PI/180));var _};var Ps=function(_,O,Z){this.z=_,this.x=O,this.y=Z,this.key=_l(0,_,_,O,Z)};Ps.prototype.equals=function(_){return this.z===_.z&&this.x===_.x&&this.y===_.y},Ps.prototype.url=function(_,O){var Z,ce,xe,we,De,Ze=(ce=this.y,xe=this.z,we=ua(256*(Z=this.x),256*(ce=Math.pow(2,xe)-ce-1),xe),De=ua(256*(Z+1),256*(ce+1),xe),we[0]+","+we[1]+","+De[0]+","+De[1]),pt=function(St,Ot,Ht){for(var Qt,lr="",Mr=St;Mr>0;Mr--)lr+=(Ot&(Qt=1<<Mr-1)?1:0)+(Ht&Qt?2:0);return lr}(this.z,this.x,this.y);return _[(this.x+this.y)%_.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(O==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",pt).replace("{bbox-epsg-3857}",Ze)},Ps.prototype.getTilePoint=function(_){var O=Math.pow(2,this.z);return new l(8192*(_.x*O-this.x),8192*(_.y*O-this.y))},Ps.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var tu=function(_,O){this.wrap=_,this.canonical=O,this.key=_l(_,O.z,O.z,O.x,O.y)},ro=function(_,O,Z,ce,xe){this.overscaledZ=_,this.wrap=O,this.canonical=new Ps(Z,+ce,+xe),this.key=_l(O,_,Z,ce,xe)};function _l(_,O,Z,ce,xe){(_*=2)<0&&(_=-1*_-1);var we=1<<Z;return(we*we*_+we*xe+ce).toString(36)+Z.toString(36)+O.toString(36)}ro.prototype.equals=function(_){return this.overscaledZ===_.overscaledZ&&this.wrap===_.wrap&&this.canonical.equals(_.canonical)},ro.prototype.scaledTo=function(_){var O=this.canonical.z-_;return _>this.canonical.z?new ro(_,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ro(_,this.wrap,_,this.canonical.x>>O,this.canonical.y>>O)},ro.prototype.calculateScaledKey=function(_,O){var Z=this.canonical.z-_;return _>this.canonical.z?_l(this.wrap*+O,_,this.canonical.z,this.canonical.x,this.canonical.y):_l(this.wrap*+O,_,_,this.canonical.x>>Z,this.canonical.y>>Z)},ro.prototype.isChildOf=function(_){if(_.wrap!==this.wrap)return!1;var O=this.canonical.z-_.canonical.z;return _.overscaledZ===0||_.overscaledZ<this.overscaledZ&&_.canonical.x===this.canonical.x>>O&&_.canonical.y===this.canonical.y>>O},ro.prototype.children=function(_){if(this.overscaledZ>=_)return[new ro(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var O=this.canonical.z+1,Z=2*this.canonical.x,ce=2*this.canonical.y;return[new ro(O,this.wrap,O,Z,ce),new ro(O,this.wrap,O,Z+1,ce),new ro(O,this.wrap,O,Z,ce+1),new ro(O,this.wrap,O,Z+1,ce+1)]},ro.prototype.isLessThan=function(_){return this.wrap<_.wrap||!(this.wrap>_.wrap)&&(this.overscaledZ<_.overscaledZ||!(this.overscaledZ>_.overscaledZ)&&(this.canonical.x<_.canonical.x||!(this.canonical.x>_.canonical.x)&&this.canonical.y<_.canonical.y))},ro.prototype.wrapped=function(){return new ro(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ro.prototype.unwrapTo=function(_){return new ro(this.overscaledZ,_,this.canonical.z,this.canonical.x,this.canonical.y)},ro.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ro.prototype.toUnwrapped=function(){return new tu(this.wrap,this.canonical)},ro.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ro.prototype.getTilePoint=function(_){return this.canonical.getTilePoint(new Ls(_.x-this.wrap,_.y))},ya("CanonicalTileID",Ps),ya("OverscaledTileID",ro,{omit:["posMatrix"]});var ru=function(_,O,Z){if(this.uid=_,O.height!==O.width)throw new RangeError("DEM tiles must be square");if(Z&&Z!=="mapbox"&&Z!=="terrarium")return E('"'+Z+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=O.height;var ce=this.dim=O.height-2;this.data=new Uint32Array(O.data.buffer),this.encoding=Z||"mapbox";for(var xe=0;xe<ce;xe++)this.data[this._idx(-1,xe)]=this.data[this._idx(0,xe)],this.data[this._idx(ce,xe)]=this.data[this._idx(ce-1,xe)],this.data[this._idx(xe,-1)]=this.data[this._idx(xe,0)],this.data[this._idx(xe,ce)]=this.data[this._idx(xe,ce-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ce,-1)]=this.data[this._idx(ce-1,0)],this.data[this._idx(-1,ce)]=this.data[this._idx(0,ce-1)],this.data[this._idx(ce,ce)]=this.data[this._idx(ce-1,ce-1)]};ru.prototype.get=function(_,O){var Z=new Uint8Array(this.data.buffer),ce=4*this._idx(_,O);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(Z[ce],Z[ce+1],Z[ce+2])},ru.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},ru.prototype._idx=function(_,O){if(_<-1||_>=this.dim+1||O<-1||O>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(O+1)*this.stride+(_+1)},ru.prototype._unpackMapbox=function(_,O,Z){return(256*_*256+256*O+Z)/10-1e4},ru.prototype._unpackTerrarium=function(_,O,Z){return 256*_+O+Z/256-32768},ru.prototype.getPixels=function(){return new os({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},ru.prototype.backfillBorder=function(_,O,Z){if(this.dim!==_.dim)throw new Error("dem dimension mismatch");var ce=O*this.dim,xe=O*this.dim+this.dim,we=Z*this.dim,De=Z*this.dim+this.dim;switch(O){case-1:ce=xe-1;break;case 1:xe=ce+1}switch(Z){case-1:we=De-1;break;case 1:De=we+1}for(var Ze=-O*this.dim,pt=-Z*this.dim,St=we;St<De;St++)for(var Ot=ce;Ot<xe;Ot++)this.data[this._idx(Ot,St)]=_.data[this._idx(Ot+Ze,St+pt)]},ya("DEMData",ru);var Mp=function(_){this._stringToNumber={},this._numberToString=[];for(var O=0;O<_.length;O++){var Z=_[O];this._stringToNumber[Z]=O,this._numberToString[O]=Z}};Mp.prototype.encode=function(_){return this._stringToNumber[_]},Mp.prototype.decode=function(_){return this._numberToString[_]};var gu=function(_,O,Z,ce,xe){this.type="Feature",this._vectorTileFeature=_,_._z=O,_._x=Z,_._y=ce,this.properties=_.properties,this.id=xe},Js={geometry:{configurable:!0}};Js.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Js.geometry.set=function(_){this._geometry=_},gu.prototype.toJSON=function(){var _={geometry:this.geometry};for(var O in this)O!=="_geometry"&&O!=="_vectorTileFeature"&&(_[O]=this[O]);return _},Object.defineProperties(gu.prototype,Js);var wl=function(){this.state={},this.stateChanges={},this.deletedStates={}};wl.prototype.updateState=function(_,O,Z){var ce=String(O);if(this.stateChanges[_]=this.stateChanges[_]||{},this.stateChanges[_][ce]=this.stateChanges[_][ce]||{},g(this.stateChanges[_][ce],Z),this.deletedStates[_]===null)for(var xe in this.deletedStates[_]={},this.state[_])xe!==ce&&(this.deletedStates[_][xe]=null);else if(this.deletedStates[_]&&this.deletedStates[_][ce]===null)for(var we in this.deletedStates[_][ce]={},this.state[_][ce])Z[we]||(this.deletedStates[_][ce][we]=null);else for(var De in Z)this.deletedStates[_]&&this.deletedStates[_][ce]&&this.deletedStates[_][ce][De]===null&&delete this.deletedStates[_][ce][De]},wl.prototype.removeFeatureState=function(_,O,Z){if(this.deletedStates[_]!==null){var ce=String(O);if(this.deletedStates[_]=this.deletedStates[_]||{},Z&&O!==void 0)this.deletedStates[_][ce]!==null&&(this.deletedStates[_][ce]=this.deletedStates[_][ce]||{},this.deletedStates[_][ce][Z]=null);else if(O!==void 0)if(this.stateChanges[_]&&this.stateChanges[_][ce])for(Z in this.deletedStates[_][ce]={},this.stateChanges[_][ce])this.deletedStates[_][ce][Z]=null;else this.deletedStates[_][ce]=null;else this.deletedStates[_]=null}},wl.prototype.getState=function(_,O){var Z=String(O),ce=g({},(this.state[_]||{})[Z],(this.stateChanges[_]||{})[Z]);if(this.deletedStates[_]===null)return{};if(this.deletedStates[_]){var xe=this.deletedStates[_][O];if(xe===null)return{};for(var we in xe)delete ce[we]}return ce},wl.prototype.initializeTileState=function(_,O){_.setFeatureState(this.state,O)},wl.prototype.coalesceChanges=function(_,O){var Z={};for(var ce in this.stateChanges){this.state[ce]=this.state[ce]||{};var xe={};for(var we in this.stateChanges[ce])this.state[ce][we]||(this.state[ce][we]={}),g(this.state[ce][we],this.stateChanges[ce][we]),xe[we]=this.state[ce][we];Z[ce]=xe}for(var De in this.deletedStates){this.state[De]=this.state[De]||{};var Ze={};if(this.deletedStates[De]===null)for(var pt in this.state[De])Ze[pt]={},this.state[De][pt]={};else for(var St in this.deletedStates[De]){if(this.deletedStates[De][St]===null)this.state[De][St]={};else for(var Ot=0,Ht=Object.keys(this.deletedStates[De][St]);Ot<Ht.length;Ot+=1)delete this.state[De][St][Ht[Ot]];Ze[St]=this.state[De][St]}Z[De]=Z[De]||{},g(Z[De],Ze)}if(this.stateChanges={},this.deletedStates={},Object.keys(Z).length!==0)for(var Qt in _)_[Qt].setFeatureState(Z,O)};var Tl=function(_,O){this.tileID=_,this.x=_.canonical.x,this.y=_.canonical.y,this.z=_.canonical.z,this.grid=new Fa(8192,16,0),this.grid3D=new Fa(8192,16,0),this.featureIndexArray=new jt,this.promoteId=O};function jl(_,O,Z,ce,xe){return M(_,function(we,De){var Ze=O instanceof xo?O.get(De):null;return Ze&&Ze.evaluate?Ze.evaluate(Z,ce,xe):Ze})}function Wf(_){for(var O=1/0,Z=1/0,ce=-1/0,xe=-1/0,we=0,De=_;we<De.length;we+=1){var Ze=De[we];O=Math.min(O,Ze.x),Z=Math.min(Z,Ze.y),ce=Math.max(ce,Ze.x),xe=Math.max(xe,Ze.y)}return{minX:O,minY:Z,maxX:ce,maxY:xe}}function Yf(_,O){return O-_}Tl.prototype.insert=function(_,O,Z,ce,xe,we){var De=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Z,ce,xe);for(var Ze=we?this.grid3D:this.grid,pt=0;pt<O.length;pt++){for(var St=O[pt],Ot=[1/0,1/0,-1/0,-1/0],Ht=0;Ht<St.length;Ht++){var Qt=St[Ht];Ot[0]=Math.min(Ot[0],Qt.x),Ot[1]=Math.min(Ot[1],Qt.y),Ot[2]=Math.max(Ot[2],Qt.x),Ot[3]=Math.max(Ot[3],Qt.y)}Ot[0]<8192&&Ot[1]<8192&&Ot[2]>=0&&Ot[3]>=0&&Ze.insert(De,Ot[0],Ot[1],Ot[2],Ot[3])}},Tl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new fh.VectorTile(new of(this.rawTileData)).layers,this.sourceLayerCoder=new Mp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Tl.prototype.query=function(_,O,Z,ce){var xe=this;this.loadVTLayers();for(var we=_.params||{},De=8192/_.tileSize/_.scale,Ze=uc(we.filter),pt=_.queryGeometry,St=_.queryPadding*De,Ot=Wf(pt),Ht=this.grid.query(Ot.minX-St,Ot.minY-St,Ot.maxX+St,Ot.maxY+St),Qt=Wf(_.cameraQueryGeometry),lr=this.grid3D.query(Qt.minX-St,Qt.minY-St,Qt.maxX+St,Qt.maxY+St,function(Rn,zn,Zn,xa){return function(La,Ka,Ba,ei,za){for(var Ii=0,bi=La;Ii<bi.length;Ii+=1){var Ga=bi[Ii];if(Ka<=Ga.x&&Ba<=Ga.y&&ei>=Ga.x&&za>=Ga.y)return!0}var Wi=[new l(Ka,Ba),new l(Ka,za),new l(ei,za),new l(ei,Ba)];if(La.length>2){for(var Ei=0,no=Wi;Ei<no.length;Ei+=1)if(Lu(La,no[Ei]))return!0}for(var Ja=0;Ja<La.length-1;Ja++)if(Lf(La[Ja],La[Ja+1],Wi))return!0;return!1}(_.cameraQueryGeometry,Rn-St,zn-St,Zn+St,xa+St)}),Mr=0,Er=lr;Mr<Er.length;Mr+=1)Ht.push(Er[Mr]);Ht.sort(Yf);for(var Kr,Br={},sn=function(Rn){var zn=Ht[Rn];if(zn!==Kr){Kr=zn;var Zn=xe.featureIndexArray.get(zn),xa=null;xe.loadMatchingFeature(Br,Zn.bucketIndex,Zn.sourceLayerIndex,Zn.featureIndex,Ze,we.layers,we.availableImages,O,Z,ce,function(La,Ka,Ba){return xa||(xa=Ao(La)),Ka.queryIntersectsFeature(pt,La,Ba,xa,xe.z,_.transform,De,_.pixelPosMatrix)})}},vn=0;vn<Ht.length;vn++)sn(vn);return Br},Tl.prototype.loadMatchingFeature=function(_,O,Z,ce,xe,we,De,Ze,pt,St,Ot){var Ht=this.bucketLayerIDs[O];if(!we||function(xa,La){for(var Ka=0;Ka<xa.length;Ka++)if(La.indexOf(xa[Ka])>=0)return!0;return!1}(we,Ht)){var Qt=this.sourceLayerCoder.decode(Z),lr=this.vtLayers[Qt].feature(ce);if(xe.filter(new Xa(this.tileID.overscaledZ),lr))for(var Mr=this.getId(lr,Qt),Er=0;Er<Ht.length;Er++){var Kr=Ht[Er];if(!(we&&we.indexOf(Kr)<0)){var Br=Ze[Kr];if(Br){var sn={};Mr!==void 0&&St&&(sn=St.getState(Br.sourceLayer||"_geojsonTileLayer",Mr));var vn=pt[Kr];vn.paint=jl(vn.paint,Br.paint,lr,sn,De),vn.layout=jl(vn.layout,Br.layout,lr,sn,De);var Rn=!Ot||Ot(lr,Br,sn);if(Rn){var zn=new gu(lr,this.z,this.x,this.y,Mr);zn.layer=vn;var Zn=_[Kr];Zn===void 0&&(Zn=_[Kr]=[]),Zn.push({featureIndex:ce,feature:zn,intersectionZ:Rn})}}}}}},Tl.prototype.lookupSymbolFeatures=function(_,O,Z,ce,xe,we,De,Ze){var pt={};this.loadVTLayers();for(var St=uc(xe),Ot=0,Ht=_;Ot<Ht.length;Ot+=1)this.loadMatchingFeature(pt,Z,ce,Ht[Ot],St,we,De,Ze,O);return pt},Tl.prototype.hasLayer=function(_){for(var O=0,Z=this.bucketLayerIDs;O<Z.length;O+=1)for(var ce=0,xe=Z[O];ce<xe.length;ce+=1)if(_===xe[ce])return!0;return!1},Tl.prototype.getId=function(_,O){var Z=_.id;return this.promoteId&&typeof(Z=_.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[O]])=="boolean"&&(Z=Number(Z)),Z},ya("FeatureIndex",Tl,{omit:["rawTileData","sourceLayerCoder"]});var Zo=function(_,O){this.tileID=_,this.uid=m(),this.uses=0,this.tileSize=O,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Zo.prototype.registerFadeDuration=function(_){var O=_+this.timeAdded;O<$.now()||this.fadeEndTime&&O<this.fadeEndTime||(this.fadeEndTime=O)},Zo.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Zo.prototype.loadVectorData=function(_,O,Z){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",_){for(var ce in _.featureIndex&&(this.latestFeatureIndex=_.featureIndex,_.rawTileData?(this.latestRawTileData=_.rawTileData,this.latestFeatureIndex.rawTileData=_.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=_.collisionBoxArray,this.buckets=function(St,Ot){var Ht={};if(!Ot)return Ht;for(var Qt=function(){var Er=Mr[lr],Kr=Er.layerIds.map(function(vn){return Ot.getLayer(vn)}).filter(Boolean);if(Kr.length!==0){Er.layers=Kr,Er.stateDependentLayerIds&&(Er.stateDependentLayers=Er.stateDependentLayerIds.map(function(vn){return Kr.filter(function(Rn){return Rn.id===vn})[0]}));for(var Br=0,sn=Kr;Br<sn.length;Br+=1)Ht[sn[Br].id]=Er}},lr=0,Mr=St;lr<Mr.length;lr+=1)Qt();return Ht}(_.buckets,O.style),this.hasSymbolBuckets=!1,this.buckets){var xe=this.buckets[ce];if(xe instanceof cr){if(this.hasSymbolBuckets=!0,!Z)break;xe.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var we in this.buckets){var De=this.buckets[we];if(De instanceof cr&&De.hasRTLText){this.hasRTLText=!0,so.isLoading()||so.isLoaded()||Ss()!=="deferred"||Ws();break}}for(var Ze in this.queryPadding=0,this.buckets){var pt=this.buckets[Ze];this.queryPadding=Math.max(this.queryPadding,O.style.getLayer(Ze).queryRadius(pt))}_.imageAtlas&&(this.imageAtlas=_.imageAtlas),_.glyphAtlasImage&&(this.glyphAtlasImage=_.glyphAtlasImage)}else this.collisionBoxArray=new ne},Zo.prototype.unloadVectorData=function(){for(var _ in this.buckets)this.buckets[_].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Zo.prototype.getBucket=function(_){return this.buckets[_.id]},Zo.prototype.upload=function(_){for(var O in this.buckets){var Z=this.buckets[O];Z.uploadPending()&&Z.upload(_)}var ce=_.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ma(_,this.imageAtlas.image,ce.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ma(_,this.glyphAtlasImage,ce.ALPHA),this.glyphAtlasImage=null)},Zo.prototype.prepare=function(_){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(_,this.imageAtlasTexture)},Zo.prototype.queryRenderedFeatures=function(_,O,Z,ce,xe,we,De,Ze,pt,St){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ce,cameraQueryGeometry:xe,scale:we,tileSize:this.tileSize,pixelPosMatrix:St,transform:Ze,params:De,queryPadding:this.queryPadding*pt},_,O,Z):{}},Zo.prototype.querySourceFeatures=function(_,O){var Z=this.latestFeatureIndex;if(Z&&Z.rawTileData){var ce=Z.loadVTLayers(),xe=O?O.sourceLayer:"",we=ce._geojsonTileLayer||ce[xe];if(we)for(var De=uc(O&&O.filter),Ze=this.tileID.canonical,pt=Ze.z,St=Ze.x,Ot=Ze.y,Ht={z:pt,x:St,y:Ot},Qt=0;Qt<we.length;Qt++){var lr=we.feature(Qt);if(De.filter(new Xa(this.tileID.overscaledZ),lr)){var Mr=Z.getId(lr,xe),Er=new gu(lr,pt,St,Ot,Mr);Er.tile=Ht,_.push(Er)}}}},Zo.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Zo.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Zo.prototype.setExpiryData=function(_){var O=this.expirationTime;if(_.cacheControl){var Z=F(_.cacheControl);Z["max-age"]&&(this.expirationTime=Date.now()+1e3*Z["max-age"])}else _.expires&&(this.expirationTime=new Date(_.expires).getTime());if(this.expirationTime){var ce=Date.now(),xe=!1;if(this.expirationTime>ce)xe=!1;else if(O)if(this.expirationTime<O)xe=!0;else{var we=this.expirationTime-O;we?this.expirationTime=ce+Math.max(we,3e4):xe=!0}else xe=!0;xe?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Zo.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Zo.prototype.setFeatureState=function(_,O){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(_).length!==0){var Z=this.latestFeatureIndex.loadVTLayers();for(var ce in this.buckets)if(O.style.hasLayer(ce)){var xe=this.buckets[ce],we=xe.layers[0].sourceLayer||"_geojsonTileLayer",De=Z[we],Ze=_[we];if(De&&Ze&&Object.keys(Ze).length!==0){xe.update(Ze,De,this.imageAtlas&&this.imageAtlas.patternPositions||{});var pt=O&&O.style&&O.style.getLayer(ce);pt&&(this.queryPadding=Math.max(this.queryPadding,pt.queryRadius(xe)))}}}},Zo.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Zo.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<$.now()},Zo.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Zo.prototype.setHoldDuration=function(_){this.symbolFadeHoldUntil=$.now()+_},Zo.prototype.setDependencies=function(_,O){for(var Z={},ce=0,xe=O;ce<xe.length;ce+=1)Z[xe[ce]]=!0;this.dependencies[_]=Z},Zo.prototype.hasDependency=function(_,O){for(var Z=0,ce=_;Z<ce.length;Z+=1){var xe=this.dependencies[ce[Z]];if(xe){for(var we=0,De=O;we<De.length;we+=1)if(xe[De[we]])return!0}}return!1};var ec=self.performance,bd=function(_){this._marks={start:[_.url,"start"].join("#"),end:[_.url,"end"].join("#"),measure:_.url.toString()},ec.mark(this._marks.start)};bd.prototype.finish=function(){ec.mark(this._marks.end);var _=ec.getEntriesByName(this._marks.measure);return _.length===0&&(ec.measure(this._marks.measure,this._marks.start,this._marks.end),_=ec.getEntriesByName(this._marks.measure),ec.clearMarks(this._marks.start),ec.clearMarks(this._marks.end),ec.clearMeasures(this._marks.measure)),_},t.Actor=Kn,t.AlphaImage=eu,t.CanonicalTileID=Ps,t.CollisionBoxArray=ne,t.Color=_r,t.DEMData=ru,t.DataConstantProperty=Oa,t.DictionaryCoder=Mp,t.EXTENT=8192,t.ErrorEvent=Ue,t.EvaluationParameters=Xa,t.Event=Le,t.Evented=et,t.FeatureIndex=Tl,t.FillBucket=Nu,t.FillExtrusionBucket=Bu,t.ImageAtlas=jh,t.ImagePosition=_p,t.LineBucket=Xs,t.LngLat=Vn,t.LngLatBounds=yn,t.MercatorCoordinate=Ls,t.ONE_EM=24,t.OverscaledTileID=ro,t.Point=l,t.Point$1=l,t.Properties=mi,t.Protobuf=of,t.RGBAImage=os,t.RequestManager=ee,t.RequestPerformance=bd,t.ResourceType=Mt,t.SegmentVector=pr,t.SourceFeatureState=wl,t.StructArrayLayout1ui2=Xi,t.StructArrayLayout2f1f2i16=Ys,t.StructArrayLayout2i4=ds,t.StructArrayLayout3ui6=ns,t.StructArrayLayout4i8=or,t.SymbolBucket=cr,t.Texture=ma,t.Tile=Zo,t.Transitionable=lo,t.Uniform1f=ha,t.Uniform1i=Jn,t.Uniform2f=la,t.Uniform3f=wa,t.Uniform4f=Ea,t.UniformColor=ii,t.UniformMatrix4f=Oi,t.UnwrappedTileID=tu,t.ValidationError=Ie,t.WritingMode=mu,t.ZoomHistory=Ci,t.add=function(_,O,Z){return _[0]=O[0]+Z[0],_[1]=O[1]+Z[1],_[2]=O[2]+Z[2],_},t.addDynamicAttributes=mt,t.asyncAll=function(_,O,Z){if(!_.length)return Z(null,[]);var ce=_.length,xe=new Array(_.length),we=null;_.forEach(function(De,Ze){O(De,function(pt,St){pt&&(we=pt),xe[Ze]=St,--ce==0&&Z(we,xe)})})},t.bezier=i,t.bindAll=y,t.browser=$,t.cacheEntryPossiblyAdded=function(_){++Ne>Be&&(_.getActor().send("enforceCacheSizeLimit",Ae),Ne=0)},t.clamp=p,t.clearTileCache=function(_){var O=self.caches.delete("mapbox-tiles");_&&O.catch(_).then(function(){return _()})},t.clipLine=xd,t.clone=function(_){var O=new vs(16);return O[0]=_[0],O[1]=_[1],O[2]=_[2],O[3]=_[3],O[4]=_[4],O[5]=_[5],O[6]=_[6],O[7]=_[7],O[8]=_[8],O[9]=_[9],O[10]=_[10],O[11]=_[11],O[12]=_[12],O[13]=_[13],O[14]=_[14],O[15]=_[15],O},t.clone$1=L,t.clone$2=function(_){var O=new vs(3);return O[0]=_[0],O[1]=_[1],O[2]=_[2],O},t.collisionCircleLayout=pv,t.config=ie,t.create=function(){var _=new vs(16);return vs!=Float32Array&&(_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[11]=0,_[12]=0,_[13]=0,_[14]=0),_[0]=1,_[5]=1,_[10]=1,_[15]=1,_},t.create$1=function(){var _=new vs(9);return vs!=Float32Array&&(_[1]=0,_[2]=0,_[3]=0,_[5]=0,_[6]=0,_[7]=0),_[0]=1,_[4]=1,_[8]=1,_},t.create$2=function(){var _=new vs(4);return vs!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_},t.createCommonjsModule=f,t.createExpression=ml,t.createLayout=Ui,t.createStyleLayer=function(_){return _.type==="custom"?new dn(_):new fn[_.type](_)},t.cross=function(_,O,Z){var ce=O[0],xe=O[1],we=O[2],De=Z[0],Ze=Z[1],pt=Z[2];return _[0]=xe*pt-we*Ze,_[1]=we*De-ce*pt,_[2]=ce*Ze-xe*De,_},t.deepEqual=function _(O,Z){if(Array.isArray(O)){if(!Array.isArray(Z)||O.length!==Z.length)return!1;for(var ce=0;ce<O.length;ce++)if(!_(O[ce],Z[ce]))return!1;return!0}if(typeof O=="object"&&O!==null&&Z!==null){if(typeof Z!="object"||Object.keys(O).length!==Object.keys(Z).length)return!1;for(var xe in O)if(!_(O[xe],Z[xe]))return!1;return!0}return O===Z},t.dot=function(_,O){return _[0]*O[0]+_[1]*O[1]+_[2]*O[2]},t.dot$1=function(_,O){return _[0]*O[0]+_[1]*O[1]+_[2]*O[2]+_[3]*O[3]},t.ease=s,t.emitValidationErrors=Un,t.endsWith=T,t.enforceCacheSizeLimit=function(_){qe(),Me&&Me.then(function(O){O.keys().then(function(Z){for(var ce=0;ce<Z.length-_;ce++)O.delete(Z[ce])})})},t.evaluateSizeForFeature=gh,t.evaluateSizeForZoom=yh,t.evaluateVariableOffset=he,t.evented=ls,t.extend=g,t.featureFilter=uc,t.filterObject=P,t.fromRotation=function(_,O){var Z=Math.sin(O),ce=Math.cos(O);return _[0]=ce,_[1]=Z,_[2]=0,_[3]=-Z,_[4]=ce,_[5]=0,_[6]=0,_[7]=0,_[8]=1,_},t.getAnchorAlignment=Qu,t.getAnchorJustification=ye,t.getArrayBuffer=Lt,t.getImage=dt,t.getJSON=function(_,O){return rr(g(_,{type:"json"}),O)},t.getRTLTextPluginStatus=Ss,t.getReferrer=qt,t.getVideo=function(_,O){var Z,ce,xe=self.document.createElement("video");xe.muted=!0,xe.onloadstart=function(){O(null,xe)};for(var we=0;we<_.length;we++){var De=self.document.createElement("source");Z=_[we],ce=void 0,(ce=self.document.createElement("a")).href=Z,(ce.protocol!==self.document.location.protocol||ce.host!==self.document.location.host)&&(xe.crossOrigin="Anonymous"),De.src=_[we],xe.appendChild(De)}return{cancel:function(){}}},t.identity=pc,t.invert=function(_,O){var Z=O[0],ce=O[1],xe=O[2],we=O[3],De=O[4],Ze=O[5],pt=O[6],St=O[7],Ot=O[8],Ht=O[9],Qt=O[10],lr=O[11],Mr=O[12],Er=O[13],Kr=O[14],Br=O[15],sn=Z*Ze-ce*De,vn=Z*pt-xe*De,Rn=Z*St-we*De,zn=ce*pt-xe*Ze,Zn=ce*St-we*Ze,xa=xe*St-we*pt,La=Ot*Er-Ht*Mr,Ka=Ot*Kr-Qt*Mr,Ba=Ot*Br-lr*Mr,ei=Ht*Kr-Qt*Er,za=Ht*Br-lr*Er,Ii=Qt*Br-lr*Kr,bi=sn*Ii-vn*za+Rn*ei+zn*Ba-Zn*Ka+xa*La;return bi?(_[0]=(Ze*Ii-pt*za+St*ei)*(bi=1/bi),_[1]=(xe*za-ce*Ii-we*ei)*bi,_[2]=(Er*xa-Kr*Zn+Br*zn)*bi,_[3]=(Qt*Zn-Ht*xa-lr*zn)*bi,_[4]=(pt*Ba-De*Ii-St*Ka)*bi,_[5]=(Z*Ii-xe*Ba+we*Ka)*bi,_[6]=(Kr*Rn-Mr*xa-Br*vn)*bi,_[7]=(Ot*xa-Qt*Rn+lr*vn)*bi,_[8]=(De*za-Ze*Ba+St*La)*bi,_[9]=(ce*Ba-Z*za-we*La)*bi,_[10]=(Mr*Zn-Er*Rn+Br*sn)*bi,_[11]=(Ht*Rn-Ot*Zn-lr*sn)*bi,_[12]=(Ze*Ka-De*ei-pt*La)*bi,_[13]=(Z*ei-ce*Ka+xe*La)*bi,_[14]=(Er*vn-Mr*zn-Kr*sn)*bi,_[15]=(Ot*zn-Ht*vn+Qt*sn)*bi,_):null},t.isChar=Xn,t.isMapboxURL=ae,t.keysDifference=function(_,O){var Z=[];for(var ce in _)ce in O||Z.push(ce);return Z},t.makeRequest=rr,t.mapObject=M,t.mercatorXfromLng=Pi,t.mercatorYfromLat=vo,t.mercatorZfromAltitude=Ro,t.mul=Pl,t.multiply=is,t.mvt=fh,t.normalize=function(_,O){var Z=O[0],ce=O[1],xe=O[2],we=Z*Z+ce*ce+xe*xe;return we>0&&(we=1/Math.sqrt(we)),_[0]=O[0]*we,_[1]=O[1]*we,_[2]=O[2]*we,_},t.number=Yr,t.offscreenCanvasSupported=ct,t.ortho=function(_,O,Z,ce,xe,we,De){var Ze=1/(O-Z),pt=1/(ce-xe),St=1/(we-De);return _[0]=-2*Ze,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=-2*pt,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[10]=2*St,_[11]=0,_[12]=(O+Z)*Ze,_[13]=(xe+ce)*pt,_[14]=(De+we)*St,_[15]=1,_},t.parseGlyphPBF=function(_){return new of(_).readFields(A0,[])},t.pbf=of,t.performSymbolLayout=function(_,O,Z,ce,xe,we,De){_.createArrays(),_.tilePixelRatio=8192/(512*_.overscaling),_.compareText={},_.iconsNeedLinear=!1;var Ze=_.layers[0].layout,pt=_.layers[0]._unevaluatedLayout._values,St={};if(_.textSizeData.kind==="composite"){var Ot=_.textSizeData,Ht=Ot.maxZoom;St.compositeTextSizes=[pt["text-size"].possiblyEvaluate(new Xa(Ot.minZoom),De),pt["text-size"].possiblyEvaluate(new Xa(Ht),De)]}if(_.iconSizeData.kind==="composite"){var Qt=_.iconSizeData,lr=Qt.maxZoom;St.compositeIconSizes=[pt["icon-size"].possiblyEvaluate(new Xa(Qt.minZoom),De),pt["icon-size"].possiblyEvaluate(new Xa(lr),De)]}St.layoutTextSize=pt["text-size"].possiblyEvaluate(new Xa(_.zoom+1),De),St.layoutIconSize=pt["icon-size"].possiblyEvaluate(new Xa(_.zoom+1),De),St.textMaxSize=pt["text-size"].possiblyEvaluate(new Xa(18));for(var Mr=24*Ze.get("text-line-height"),Er=Ze.get("text-rotation-alignment")==="map"&&Ze.get("symbol-placement")!=="point",Kr=Ze.get("text-keep-upright"),Br=Ze.get("text-size"),sn=function(){var zn=Rn[vn],Zn=Ze.get("text-font").evaluate(zn,{},De).join(","),xa=Br.evaluate(zn,{},De),La=St.layoutTextSize.evaluate(zn,{},De),Ka=St.layoutIconSize.evaluate(zn,{},De),Ba={horizontal:{},vertical:void 0},ei=zn.text,za=[0,0];if(ei){var Ii=ei.toString(),bi=24*Ze.get("text-letter-spacing").evaluate(zn,{},De),Ga=function(Ji){for(var Co=0,Jo=Ji;Co<Jo.length;Co+=1)if(ao=Jo[Co].charCodeAt(0),Xn.Arabic(ao)||Xn["Arabic Supplement"](ao)||Xn["Arabic Extended-A"](ao)||Xn["Arabic Presentation Forms-A"](ao)||Xn["Arabic Presentation Forms-B"](ao))return!1;var ao;return!0}(Ii)?bi:0,Wi=Ze.get("text-anchor").evaluate(zn,{},De),Ei=Ze.get("text-variable-anchor");if(!Ei){var no=Ze.get("text-radial-offset").evaluate(zn,{},De);za=no?he(Wi,[24*no,Y]):Ze.get("text-offset").evaluate(zn,{},De).map(function(Ji){return 24*Ji})}var Ja=Er?"center":Ze.get("text-justify").evaluate(zn,{},De),ho=Ze.get("symbol-placement"),Vo=ho==="point"?24*Ze.get("text-max-width").evaluate(zn,{},De):0,$s=function(){_.allowVerticalPlacement&&oi(Ii)&&(Ba.vertical=dh(ei,O,Z,xe,Zn,Vo,Mr,Wi,"left",Ga,za,mu.vertical,!0,ho,La,xa))};if(!Er&&Ei){for(var Qs=Ja==="auto"?Ei.map(function(Ji){return ye(Ji)}):[Ja],Ko=!1,us=0;us<Qs.length;us++){var Io=Qs[us];if(!Ba.horizontal[Io])if(Ko)Ba.horizontal[Io]=Ba.horizontal[0];else{var Os=dh(ei,O,Z,xe,Zn,Vo,Mr,"center",Io,Ga,za,mu.horizontal,!1,ho,La,xa);Os&&(Ba.horizontal[Io]=Os,Ko=Os.positionedLines.length===1)}}$s()}else{Ja==="auto"&&(Ja=ye(Wi));var Gl=dh(ei,O,Z,xe,Zn,Vo,Mr,Wi,Ja,Ga,za,mu.horizontal,!1,ho,La,xa);Gl&&(Ba.horizontal[Ja]=Gl),$s(),oi(Ii)&&Er&&Kr&&(Ba.vertical=dh(ei,O,Z,xe,Zn,Vo,Mr,Wi,Ja,Ga,za,mu.vertical,!1,ho,La,xa))}}var Fs=void 0,Wl=!1;if(zn.icon&&zn.icon.name){var Ns=ce[zn.icon.name];Ns&&(Fs=function(Ji,Co,Jo){var ao=Qu(Jo),Ds=Co[0]-Ji.displaySize[0]*ao.horizontalAlign,Rl=Co[1]-Ji.displaySize[1]*ao.verticalAlign;return{image:Ji,top:Rl,bottom:Rl+Ji.displaySize[1],left:Ds,right:Ds+Ji.displaySize[0]}}(xe[zn.icon.name],Ze.get("icon-offset").evaluate(zn,{},De),Ze.get("icon-anchor").evaluate(zn,{},De)),Wl=Ns.sdf,_.sdfIcons===void 0?_.sdfIcons=Ns.sdf:_.sdfIcons!==Ns.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ns.pixelRatio!==_.pixelRatio||Ze.get("icon-rotate").constantOr(1)!==0)&&(_.iconsNeedLinear=!0))}var Bs=Ee(Ba.horizontal)||Ba.vertical;_.iconsInText=!!Bs&&Bs.iconsInText,(Bs||Fs)&&function(Ji,Co,Jo,ao,Ds,Rl,qs,ms,el,$o,ko){var Vu=Rl.textMaxSize.evaluate(Co,{});Vu===void 0&&(Vu=qs);var df,Ho=Ji.layers[0].layout,Fi=Ho.get("icon-offset").evaluate(Co,{},ko),gc=Ee(Jo.horizontal),Il=qs/24,cs=Ji.tilePixelRatio*Il,kp=Ji.tilePixelRatio*Vu/24,yu=Ji.tilePixelRatio*ms,Sp=Ji.tilePixelRatio*Ho.get("symbol-spacing"),Av=Ho.get("text-padding")*Ji.tilePixelRatio,Ep=Ho.get("icon-padding")*Ji.tilePixelRatio,_d=Ho.get("text-max-angle")/180*Math.PI,Mv=Ho.get("text-rotation-alignment")==="map"&&Ho.get("symbol-placement")!=="point",Cp=Ho.get("icon-rotation-alignment")==="map"&&Ho.get("symbol-placement")!=="point",Xf=Ho.get("symbol-placement"),tc=Sp/2,Xh=Ho.get("icon-text-fit");ao&&Xh!=="none"&&(Ji.allowVerticalPlacement&&Jo.vertical&&(df=cf(ao,Jo.vertical,Xh,Ho.get("icon-text-fit-padding"),Fi,Il)),gc&&(ao=cf(ao,gc,Xh,Ho.get("icon-text-fit-padding"),Fi,Il)));var Nc=function(Hm,rc){rc.x<0||rc.x>=8192||rc.y<0||rc.y>=8192||function(fi,yc,xc,Zf,E0,jo,Sv,Uc,Zh,Cd,Ev,Cv,C0,jm,Ld,Gm,Wm,Ym,Xm,Zm,Hu,Lv,Pv,gf,L0){var Km,Kh,Rp,Us,zl,Ip=fi.addToLineVertexArray(yc,xc),Jm=0,$m=0,P0=0,Qm=0,D0=-1,R0=-1,yf={},qm=Sr(""),I0=0,z0=0;if(Uc._unevaluatedLayout.getValue("text-radial-offset")===void 0?(I0=(Km=Uc.layout.get("text-offset").evaluate(Hu,{},gf).map(function(Pd){return 24*Pd}))[0],z0=Km[1]):(I0=24*Uc.layout.get("text-radial-offset").evaluate(Hu,{},gf),z0=Y),fi.allowVerticalPlacement&&Zf.vertical){var O0=Uc.layout.get("text-rotate").evaluate(Hu,{},gf)+90;Us=new Ap(Zh,yc,Cd,Ev,Cv,Zf.vertical,C0,jm,Ld,O0),Sv&&(zl=new Ap(Zh,yc,Cd,Ev,Cv,Sv,Wm,Ym,Ld,O0))}if(E0){var Dv=Uc.layout.get("icon-rotate").evaluate(Hu,{}),eg=Uc.layout.get("icon-text-fit")!=="none",tg=Tp(E0,Dv,Pv,eg),F0=Sv?Tp(Sv,Dv,Pv,eg):void 0;Rp=new Ap(Zh,yc,Cd,Ev,Cv,E0,Wm,Ym,!1,Dv),Jm=4*tg.length;var rg=fi.iconSizeData,xf=null;rg.kind==="source"?(xf=[128*Uc.layout.get("icon-size").evaluate(Hu,{})])[0]>32640&&E(fi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):rg.kind==="composite"&&((xf=[128*Lv.compositeIconSizes[0].evaluate(Hu,{},gf),128*Lv.compositeIconSizes[1].evaluate(Hu,{},gf)])[0]>32640||xf[1]>32640)&&E(fi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),fi.addSymbols(fi.icon,tg,xf,Zm,Xm,Hu,!1,yc,Ip.lineStartIndex,Ip.lineLength,-1,gf),D0=fi.icon.placedSymbolArray.length-1,F0&&($m=4*F0.length,fi.addSymbols(fi.icon,F0,xf,Zm,Xm,Hu,mu.vertical,yc,Ip.lineStartIndex,Ip.lineLength,-1,gf),R0=fi.icon.placedSymbolArray.length-1)}for(var ng in Zf.horizontal){var Rv=Zf.horizontal[ng];if(!Kh){qm=Sr(Rv.text);var ny=Uc.layout.get("text-rotate").evaluate(Hu,{},gf);Kh=new Ap(Zh,yc,Cd,Ev,Cv,Rv,C0,jm,Ld,ny)}var ag=Rv.positionedLines.length===1;if(P0+=_e(fi,yc,Rv,jo,Uc,Ld,Hu,Gm,Ip,Zf.vertical?mu.horizontal:mu.horizontalOnly,ag?Object.keys(Zf.horizontal):[ng],yf,D0,Lv,gf),ag)break}Zf.vertical&&(Qm+=_e(fi,yc,Zf.vertical,jo,Uc,Ld,Hu,Gm,Ip,mu.vertical,["vertical"],yf,R0,Lv,gf));var ay=Kh?Kh.boxStartIndex:fi.collisionBoxArray.length,ig=Kh?Kh.boxEndIndex:fi.collisionBoxArray.length,og=Us?Us.boxStartIndex:fi.collisionBoxArray.length,iy=Us?Us.boxEndIndex:fi.collisionBoxArray.length,oy=Rp?Rp.boxStartIndex:fi.collisionBoxArray.length,sy=Rp?Rp.boxEndIndex:fi.collisionBoxArray.length,ly=zl?zl.boxStartIndex:fi.collisionBoxArray.length,uy=zl?zl.boxEndIndex:fi.collisionBoxArray.length,bf=-1,Iv=function(Pd,lg){return Pd&&Pd.circleDiameter?Math.max(Pd.circleDiameter,lg):lg};bf=Iv(Kh,bf),bf=Iv(Us,bf),bf=Iv(Rp,bf);var sg=(bf=Iv(zl,bf))>-1?1:0;sg&&(bf*=L0/24),fi.glyphOffsetArray.length>=cr.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Hu.sortKey!==void 0&&fi.addToSortKeyRanges(fi.symbolInstances.length,Hu.sortKey),fi.symbolInstances.emplaceBack(yc.x,yc.y,yf.right>=0?yf.right:-1,yf.center>=0?yf.center:-1,yf.left>=0?yf.left:-1,yf.vertical||-1,D0,R0,qm,ay,ig,og,iy,oy,sy,ly,uy,Cd,P0,Qm,Jm,$m,sg,0,C0,I0,z0,bf)}(Ji,rc,Hm,Jo,ao,Ds,df,Ji.layers[0],Ji.collisionBoxArray,Co.index,Co.sourceLayerIndex,Ji.index,cs,Av,Mv,el,yu,Ep,Cp,Fi,Co,Rl,$o,ko,qs)};if(Xf==="line")for(var ss=0,Ts=xd(Co.geometry,0,0,8192,8192);ss<Ts.length;ss+=1)for(var wd=Ts[ss],Td=0,Ad=bv(wd,Sp,_d,Jo.vertical||gc,ao,24,kp,Ji.overscaling,8192);Td<Ad.length;Td+=1){var kv=Ad[Td];gc&&Re(Ji,gc.text,tc,kv)||Nc(wd,kv)}else if(Xf==="line-center")for(var Md=0,kd=Co.geometry;Md<kd.length;Md+=1){var Sd=kd[Md];if(Sd.length>1){var Ed=yd(Sd,_d,Jo.vertical||gc,ao,24,kp);Ed&&Nc(Sd,Ed)}}else if(Co.type==="Polygon")for(var vf=0,Lp=Of(Co.geometry,0);vf<Lp.length;vf+=1){var Pp=Lp[vf],Dp=wv(Pp,16);Nc(Pp[0],new ff(Dp.x,Dp.y,0))}else if(Co.type==="LineString")for(var mf=0,nu=Co.geometry;mf<nu.length;mf+=1){var Bc=nu[mf];Nc(Bc,new ff(Bc[0].x,Bc[0].y,0))}else if(Co.type==="Point")for(var M0=0,Um=Co.geometry;M0<Um.length;M0+=1)for(var k0=0,Vm=Um[M0];k0<Vm.length;k0+=1){var S0=Vm[k0];Nc([S0],new ff(S0.x,S0.y,0))}}(_,zn,Ba,Fs,ce,St,La,Ka,za,Wl,De)},vn=0,Rn=_.features;vn<Rn.length;vn+=1)sn();we&&_.generateCollisionDebugBuffers()},t.perspective=function(_,O,Z,ce,xe){var we,De=1/Math.tan(O/2);return _[0]=De/Z,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=De,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[11]=-1,_[12]=0,_[13]=0,_[15]=0,xe!=null&&xe!==1/0?(_[10]=(xe+ce)*(we=1/(ce-xe)),_[14]=2*xe*ce*we):(_[10]=-1,_[14]=-2*ce),_},t.pick=function(_,O){for(var Z={},ce=0;ce<O.length;ce++){var xe=O[ce];xe in _&&(Z[xe]=_[xe])}return Z},t.plugin=so,t.polygonIntersectsPolygon=du,t.postMapLoadEvent=Ce,t.postTurnstileEvent=Qe,t.potpack=Hh,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=ya,t.registerForPluginStateChange=function(_){return _({pluginStatus:Gi,pluginURL:Ni}),ls.on("pluginStateChange",_),_},t.rotate=function(_,O,Z){var ce=O[0],xe=O[1],we=O[2],De=O[3],Ze=Math.sin(Z),pt=Math.cos(Z);return _[0]=ce*pt+we*Ze,_[1]=xe*pt+De*Ze,_[2]=ce*-Ze+we*pt,_[3]=xe*-Ze+De*pt,_},t.rotateX=function(_,O,Z){var ce=Math.sin(Z),xe=Math.cos(Z),we=O[4],De=O[5],Ze=O[6],pt=O[7],St=O[8],Ot=O[9],Ht=O[10],Qt=O[11];return O!==_&&(_[0]=O[0],_[1]=O[1],_[2]=O[2],_[3]=O[3],_[12]=O[12],_[13]=O[13],_[14]=O[14],_[15]=O[15]),_[4]=we*xe+St*ce,_[5]=De*xe+Ot*ce,_[6]=Ze*xe+Ht*ce,_[7]=pt*xe+Qt*ce,_[8]=St*xe-we*ce,_[9]=Ot*xe-De*ce,_[10]=Ht*xe-Ze*ce,_[11]=Qt*xe-pt*ce,_},t.rotateZ=function(_,O,Z){var ce=Math.sin(Z),xe=Math.cos(Z),we=O[0],De=O[1],Ze=O[2],pt=O[3],St=O[4],Ot=O[5],Ht=O[6],Qt=O[7];return O!==_&&(_[8]=O[8],_[9]=O[9],_[10]=O[10],_[11]=O[11],_[12]=O[12],_[13]=O[13],_[14]=O[14],_[15]=O[15]),_[0]=we*xe+St*ce,_[1]=De*xe+Ot*ce,_[2]=Ze*xe+Ht*ce,_[3]=pt*xe+Qt*ce,_[4]=St*xe-we*ce,_[5]=Ot*xe-De*ce,_[6]=Ht*xe-Ze*ce,_[7]=Qt*xe-pt*ce,_},t.scale=function(_,O,Z){var ce=Z[0],xe=Z[1],we=Z[2];return _[0]=O[0]*ce,_[1]=O[1]*ce,_[2]=O[2]*ce,_[3]=O[3]*ce,_[4]=O[4]*xe,_[5]=O[5]*xe,_[6]=O[6]*xe,_[7]=O[7]*xe,_[8]=O[8]*we,_[9]=O[9]*we,_[10]=O[10]*we,_[11]=O[11]*we,_[12]=O[12],_[13]=O[13],_[14]=O[14],_[15]=O[15],_},t.scale$1=function(_,O,Z){return _[0]=O[0]*Z,_[1]=O[1]*Z,_[2]=O[2]*Z,_[3]=O[3]*Z,_},t.scale$2=function(_,O,Z){return _[0]=O[0]*Z,_[1]=O[1]*Z,_[2]=O[2]*Z,_},t.setCacheLimits=function(_,O){Ae=_,Be=O},t.setRTLTextPlugin=function(_,O,Z){if(Z===void 0&&(Z=!1),Gi==="deferred"||Gi==="loading"||Gi==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ni=$.resolveURL(_),Gi="deferred",zs=O,ts(),Z||Ws()},t.sphericalToCartesian=function(_){var O=_[0],Z=_[1],ce=_[2];return Z+=90,Z*=Math.PI/180,ce*=Math.PI/180,{x:O*Math.cos(Z)*Math.sin(ce),y:O*Math.sin(Z)*Math.sin(ce),z:O*Math.cos(ce)}},t.sqrLen=function(_){var O=_[0],Z=_[1];return O*O+Z*Z},t.styleSpec=ke,t.sub=function(_,O,Z){return _[0]=O[0]-Z[0],_[1]=O[1]-Z[1],_[2]=O[2]-Z[2],_},t.symbolSize=yv,t.transformMat3=function(_,O,Z){var ce=O[0],xe=O[1],we=O[2];return _[0]=ce*Z[0]+xe*Z[3]+we*Z[6],_[1]=ce*Z[1]+xe*Z[4]+we*Z[7],_[2]=ce*Z[2]+xe*Z[5]+we*Z[8],_},t.transformMat4=Ju,t.translate=function(_,O,Z){var ce,xe,we,De,Ze,pt,St,Ot,Ht,Qt,lr,Mr,Er=Z[0],Kr=Z[1],Br=Z[2];return O===_?(_[12]=O[0]*Er+O[4]*Kr+O[8]*Br+O[12],_[13]=O[1]*Er+O[5]*Kr+O[9]*Br+O[13],_[14]=O[2]*Er+O[6]*Kr+O[10]*Br+O[14],_[15]=O[3]*Er+O[7]*Kr+O[11]*Br+O[15]):(xe=O[1],we=O[2],De=O[3],Ze=O[4],pt=O[5],St=O[6],Ot=O[7],Ht=O[8],Qt=O[9],lr=O[10],Mr=O[11],_[0]=ce=O[0],_[1]=xe,_[2]=we,_[3]=De,_[4]=Ze,_[5]=pt,_[6]=St,_[7]=Ot,_[8]=Ht,_[9]=Qt,_[10]=lr,_[11]=Mr,_[12]=ce*Er+Ze*Kr+Ht*Br+O[12],_[13]=xe*Er+pt*Kr+Qt*Br+O[13],_[14]=we*Er+St*Kr+lr*Br+O[14],_[15]=De*Er+Ot*Kr+Mr*Br+O[15]),_},t.triggerPluginCompletionEvent=yo,t.uniqueId=m,t.validateCustomStyleLayer=function(_){var O=[],Z=_.id;return Z===void 0&&O.push({message:"layers."+Z+': missing required property "id"'}),_.render===void 0&&O.push({message:"layers."+Z+': missing required method "render"'}),_.renderingMode&&_.renderingMode!=="2d"&&_.renderingMode!=="3d"&&O.push({message:"layers."+Z+': property "renderingMode" must be either "2d" or "3d"'}),O},t.validateLight=Hn,t.validateStyle=Cn,t.values=function(_){var O=[];for(var Z in _)O.push(_[Z]);return O},t.vectorTile=fh,t.version="1.10.1",t.warnOnce=E,t.webpSupported=se,t.window=self,t.wrap=d}),c(["./shared"],function(t){function f(Te){var Le=typeof Te;if(Le==="number"||Le==="boolean"||Le==="string"||Te==null)return JSON.stringify(Te);if(Array.isArray(Te)){for(var Ue="[",et=0,ke=Te;et<ke.length;et+=1)Ue+=f(ke[et])+",";return Ue+"]"}for(var Ie=Object.keys(Te).sort(),He="{",Ye=0;Ye<Ie.length;Ye++)He+=JSON.stringify(Ie[Ye])+":"+f(Te[Ie[Ye]])+",";return He+"}"}function n(Te){for(var Le="",Ue=0,et=t.refProperties;Ue<et.length;Ue+=1)Le+="/"+f(Te[et[Ue]]);return Le}var o=function(Te){this.keyCache={},Te&&this.replace(Te)};o.prototype.replace=function(Te){this._layerConfigs={},this._layers={},this.update(Te,[])},o.prototype.update=function(Te,Le){for(var Ue=this,et=0,ke=Te;et<ke.length;et+=1){var Ie=ke[et];this._layerConfigs[Ie.id]=Ie;var He=this._layers[Ie.id]=t.createStyleLayer(Ie);He._featureFilter=t.featureFilter(He.filter),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id]}for(var Ye=0,ft=Le;Ye<ft.length;Ye+=1){var it=ft[Ye];delete this.keyCache[it],delete this._layerConfigs[it],delete this._layers[it]}this.familiesBySource={};for(var je=0,ot=function(Fe,bt){for(var kt={},_t=0;_t<Fe.length;_t++){var Rt=bt&&bt[Fe[_t].id]||n(Fe[_t]);bt&&(bt[Fe[_t].id]=Rt);var Dt=kt[Rt];Dt||(Dt=kt[Rt]=[]),Dt.push(Fe[_t])}var Ut=[];for(var Bt in kt)Ut.push(kt[Bt]);return Ut}(t.values(this._layerConfigs),this.keyCache);je<ot.length;je+=1){var Je=ot[je].map(function(Fe){return Ue._layers[Fe.id]}),st=Je[0];if(st.visibility!=="none"){var It=st.source||"",Nt=this.familiesBySource[It];Nt||(Nt=this.familiesBySource[It]={});var nr=st.sourceLayer||"_geojsonTileLayer",We=Nt[nr];We||(We=Nt[nr]=[]),We.push(Je)}}};var l=function(Te){var Le={},Ue=[];for(var et in Te){var ke=Te[et],Ie=Le[et]={};for(var He in ke){var Ye=ke[+He];if(Ye&&Ye.bitmap.width!==0&&Ye.bitmap.height!==0){var ft={x:0,y:0,w:Ye.bitmap.width+2,h:Ye.bitmap.height+2};Ue.push(ft),Ie[He]={rect:ft,metrics:Ye.metrics}}}}var it=t.potpack(Ue),je=new t.AlphaImage({width:it.w||1,height:it.h||1});for(var ot in Te){var Je=Te[ot];for(var st in Je){var It=Je[+st];if(It&&It.bitmap.width!==0&&It.bitmap.height!==0){var Nt=Le[ot][st].rect;t.AlphaImage.copy(It.bitmap,je,{x:0,y:0},{x:Nt.x+1,y:Nt.y+1},It.bitmap)}}}this.image=je,this.positions=Le};t.register("GlyphAtlas",l);var h=function(Te){this.tileID=new t.OverscaledTileID(Te.tileID.overscaledZ,Te.tileID.wrap,Te.tileID.canonical.z,Te.tileID.canonical.x,Te.tileID.canonical.y),this.uid=Te.uid,this.zoom=Te.zoom,this.pixelRatio=Te.pixelRatio,this.tileSize=Te.tileSize,this.source=Te.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Te.showCollisionBoxes,this.collectResourceTiming=!!Te.collectResourceTiming,this.returnDependencies=!!Te.returnDependencies,this.promoteId=Te.promoteId};function i(Te,Le,Ue){for(var et=new t.EvaluationParameters(Le),ke=0,Ie=Te;ke<Ie.length;ke+=1)Ie[ke].recalculate(et,Ue)}function s(Te,Le){var Ue=t.getArrayBuffer(Te.request,function(et,ke,Ie,He){et?Le(et):ke&&Le(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(ke)),rawData:ke,cacheControl:Ie,expires:He})});return function(){Ue.cancel(),Le()}}h.prototype.parse=function(Te,Le,Ue,et,ke){var Ie=this;this.status="parsing",this.data=Te,this.collisionBoxArray=new t.CollisionBoxArray;var He=new t.DictionaryCoder(Object.keys(Te.layers).sort()),Ye=new t.FeatureIndex(this.tileID,this.promoteId);Ye.bucketLayerIDs=[];var ft,it,je,ot,Je={},st={featureIndex:Ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ue},It=Le.familiesBySource[this.source];for(var Nt in It){var nr=Te.layers[Nt];if(nr){nr.version===1&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+Nt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var We=He.encode(Nt),Fe=[],bt=0;bt<nr.length;bt++){var kt=nr.feature(bt),_t=Ye.getId(kt,Nt);Fe.push({feature:kt,id:_t,index:bt,sourceLayerIndex:We})}for(var Rt=0,Dt=It[Nt];Rt<Dt.length;Rt+=1){var Ut=Dt[Rt],Bt=Ut[0];Bt.minzoom&&this.zoom<Math.floor(Bt.minzoom)||Bt.maxzoom&&this.zoom>=Bt.maxzoom||Bt.visibility!=="none"&&(i(Ut,this.zoom,Ue),(Je[Bt.id]=Bt.createBucket({index:Ye.bucketLayerIDs.length,layers:Ut,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:We,sourceID:this.source})).populate(Fe,st,this.tileID.canonical),Ye.bucketLayerIDs.push(Ut.map(function(Gr){return Gr.id})))}}}var tr=t.mapObject(st.glyphDependencies,function(Gr){return Object.keys(Gr).map(Number)});Object.keys(tr).length?et.send("getGlyphs",{uid:this.uid,stacks:tr},function(Gr,Or){ft||(ft=Gr,it=Or,_r.call(Ie))}):it={};var er=Object.keys(st.iconDependencies);er.length?et.send("getImages",{icons:er,source:this.source,tileID:this.tileID,type:"icons"},function(Gr,Or){ft||(ft=Gr,je=Or,_r.call(Ie))}):je={};var Zt=Object.keys(st.patternDependencies);function _r(){if(ft)return ke(ft);if(it&&je&&ot){var Gr=new l(it),Or=new t.ImageAtlas(je,ot);for(var Fr in Je){var Mn=Je[Fr];Mn instanceof t.SymbolBucket?(i(Mn.layers,this.zoom,Ue),t.performSymbolLayout(Mn,it,Gr.positions,je,Or.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Mn.hasPattern&&(Mn instanceof t.LineBucket||Mn instanceof t.FillBucket||Mn instanceof t.FillExtrusionBucket)&&(i(Mn.layers,this.zoom,Ue),Mn.addFeatures(st,this.tileID.canonical,Or.patternPositions))}this.status="done",ke(null,{buckets:t.values(Je).filter(function(Wn){return!Wn.isEmpty()}),featureIndex:Ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Gr.image,imageAtlas:Or,glyphMap:this.returnDependencies?it:null,iconMap:this.returnDependencies?je:null,glyphPositions:this.returnDependencies?Gr.positions:null})}}Zt.length?et.send("getImages",{icons:Zt,source:this.source,tileID:this.tileID,type:"patterns"},function(Gr,Or){ft||(ft=Gr,ot=Or,_r.call(Ie))}):ot={},_r.call(this)};var p=function(Te,Le,Ue,et){this.actor=Te,this.layerIndex=Le,this.availableImages=Ue,this.loadVectorData=et||s,this.loading={},this.loaded={}};p.prototype.loadTile=function(Te,Le){var Ue=this,et=Te.uid;this.loading||(this.loading={});var ke=!!(Te&&Te.request&&Te.request.collectResourceTiming)&&new t.RequestPerformance(Te.request),Ie=this.loading[et]=new h(Te);Ie.abort=this.loadVectorData(Te,function(He,Ye){if(delete Ue.loading[et],He||!Ye)return Ie.status="done",Ue.loaded[et]=Ie,Le(He);var ft=Ye.rawData,it={};Ye.expires&&(it.expires=Ye.expires),Ye.cacheControl&&(it.cacheControl=Ye.cacheControl);var je={};if(ke){var ot=ke.finish();ot&&(je.resourceTiming=JSON.parse(JSON.stringify(ot)))}Ie.vectorTile=Ye.vectorTile,Ie.parse(Ye.vectorTile,Ue.layerIndex,Ue.availableImages,Ue.actor,function(Je,st){if(Je||!st)return Le(Je);Le(null,t.extend({rawTileData:ft.slice(0)},st,it,je))}),Ue.loaded=Ue.loaded||{},Ue.loaded[et]=Ie})},p.prototype.reloadTile=function(Te,Le){var Ue=this,et=this.loaded,ke=Te.uid,Ie=this;if(et&&et[ke]){var He=et[ke];He.showCollisionBoxes=Te.showCollisionBoxes;var Ye=function(ft,it){var je=He.reloadCallback;je&&(delete He.reloadCallback,He.parse(He.vectorTile,Ie.layerIndex,Ue.availableImages,Ie.actor,je)),Le(ft,it)};He.status==="parsing"?He.reloadCallback=Ye:He.status==="done"&&(He.vectorTile?He.parse(He.vectorTile,this.layerIndex,this.availableImages,this.actor,Ye):Ye())}},p.prototype.abortTile=function(Te,Le){var Ue=this.loading,et=Te.uid;Ue&&Ue[et]&&Ue[et].abort&&(Ue[et].abort(),delete Ue[et]),Le()},p.prototype.removeTile=function(Te,Le){var Ue=this.loaded,et=Te.uid;Ue&&Ue[et]&&delete Ue[et],Le()};var d=t.window.ImageBitmap,g=function(){this.loaded={}};function b(Te,Le){if(Te.length!==0){m(Te[0],Le);for(var Ue=1;Ue<Te.length;Ue++)m(Te[Ue],!Le)}}function m(Te,Le){for(var Ue=0,et=0,ke=Te.length,Ie=ke-1;et<ke;Ie=et++)Ue+=(Te[et][0]-Te[Ie][0])*(Te[Ie][1]+Te[et][1]);Ue>=0!=!!Le&&Te.reverse()}g.prototype.loadTile=function(Te,Le){var Ue=Te.uid,et=Te.encoding,ke=Te.rawImageData,Ie=d&&ke instanceof d?this.getImageData(ke):ke,He=new t.DEMData(Ue,Ie,et);this.loaded=this.loaded||{},this.loaded[Ue]=He,Le(null,He)},g.prototype.getImageData=function(Te){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Te.width,Te.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Te.width,this.offscreenCanvas.height=Te.height,this.offscreenCanvasContext.drawImage(Te,0,0,Te.width,Te.height);var Le=this.offscreenCanvasContext.getImageData(-1,-1,Te.width+2,Te.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:Le.width,height:Le.height},Le.data)},g.prototype.removeTile=function(Te){var Le=this.loaded,Ue=Te.uid;Le&&Le[Ue]&&delete Le[Ue]};var x=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,w=function(Te){this._feature=Te,this.extent=t.EXTENT,this.type=Te.type,this.properties=Te.tags,"id"in Te&&!isNaN(Te.id)&&(this.id=parseInt(Te.id,10))};w.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Te=[],Le=0,Ue=this._feature.geometry;Le<Ue.length;Le+=1){var et=Ue[Le];Te.push([new t.Point$1(et[0],et[1])])}return Te}for(var ke=[],Ie=0,He=this._feature.geometry;Ie<He.length;Ie+=1){for(var Ye=[],ft=0,it=He[Ie];ft<it.length;ft+=1){var je=it[ft];Ye.push(new t.Point$1(je[0],je[1]))}ke.push(Ye)}return ke},w.prototype.toGeoJSON=function(Te,Le,Ue){return x.call(this,Te,Le,Ue)};var y=function(Te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=Te.length,this._features=Te};y.prototype.feature=function(Te){return new w(this._features[Te])};var T=t.vectorTile.VectorTileFeature,M=P;function P(Te,Le){this.options=Le||{},this.features=Te,this.length=Te.length}function L(Te,Le){this.id=typeof Te.id=="number"?Te.id:void 0,this.type=Te.type,this.rawGeometry=Te.type===1?[Te.geometry]:Te.geometry,this.properties=Te.tags,this.extent=Le||4096}P.prototype.feature=function(Te){return new L(this.features[Te],this.options.extent)},L.prototype.loadGeometry=function(){var Te=this.rawGeometry;this.geometry=[];for(var Le=0;Le<Te.length;Le++){for(var Ue=Te[Le],et=[],ke=0;ke<Ue.length;ke++)et.push(new t.Point$1(Ue[ke][0],Ue[ke][1]));this.geometry.push(et)}return this.geometry},L.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Te=this.geometry,Le=1/0,Ue=-1/0,et=1/0,ke=-1/0,Ie=0;Ie<Te.length;Ie++)for(var He=Te[Ie],Ye=0;Ye<He.length;Ye++){var ft=He[Ye];Le=Math.min(Le,ft.x),Ue=Math.max(Ue,ft.x),et=Math.min(et,ft.y),ke=Math.max(ke,ft.y)}return[Le,et,Ue,ke]},L.prototype.toGeoJSON=T.prototype.toGeoJSON;var I=k,E=M;function k(Te){var Le=new t.pbf;return function(Ue,et){for(var ke in Ue.layers)et.writeMessage(3,C,Ue.layers[ke])}(Te,Le),Le.finish()}function C(Te,Le){var Ue;Le.writeVarintField(15,Te.version||1),Le.writeStringField(1,Te.name||""),Le.writeVarintField(5,Te.extent||4096);var et={keys:[],values:[],keycache:{},valuecache:{}};for(Ue=0;Ue<Te.length;Ue++)et.feature=Te.feature(Ue),Le.writeMessage(2,D,et);var ke=et.keys;for(Ue=0;Ue<ke.length;Ue++)Le.writeStringField(3,ke[Ue]);var Ie=et.values;for(Ue=0;Ue<Ie.length;Ue++)Le.writeMessage(4,X,Ie[Ue])}function D(Te,Le){var Ue=Te.feature;Ue.id!==void 0&&Le.writeVarintField(1,Ue.id),Le.writeMessage(2,F,Te),Le.writeVarintField(3,Ue.type),Le.writeMessage(4,U,Ue)}function F(Te,Le){var Ue=Te.feature,et=Te.keys,ke=Te.values,Ie=Te.keycache,He=Te.valuecache;for(var Ye in Ue.properties){var ft=Ie[Ye];ft===void 0&&(et.push(Ye),Ie[Ye]=ft=et.length-1),Le.writeVarint(ft);var it=Ue.properties[Ye],je=typeof it;je!=="string"&&je!=="boolean"&&je!=="number"&&(it=JSON.stringify(it));var ot=je+":"+it,Je=He[ot];Je===void 0&&(ke.push(it),He[ot]=Je=ke.length-1),Le.writeVarint(Je)}}function N(Te,Le){return(Le<<3)+(7&Te)}function G(Te){return Te<<1^Te>>31}function U(Te,Le){for(var Ue=Te.loadGeometry(),et=Te.type,ke=0,Ie=0,He=Ue.length,Ye=0;Ye<He;Ye++){var ft=Ue[Ye],it=1;et===1&&(it=ft.length),Le.writeVarint(N(1,it));for(var je=et===3?ft.length-1:ft.length,ot=0;ot<je;ot++){ot===1&&et!==1&&Le.writeVarint(N(2,je-1));var Je=ft[ot].x-ke,st=ft[ot].y-Ie;Le.writeVarint(G(Je)),Le.writeVarint(G(st)),ke+=Je,Ie+=st}et===3&&Le.writeVarint(N(7,1))}}function X(Te,Le){var Ue=typeof Te;Ue==="string"?Le.writeStringField(1,Te):Ue==="boolean"?Le.writeBooleanField(7,Te):Ue==="number"&&(Te%1!=0?Le.writeDoubleField(3,Te):Te<0?Le.writeSVarintField(6,Te):Le.writeVarintField(5,Te))}function z(Te,Le,Ue,et){B(Te,Ue,et),B(Le,2*Ue,2*et),B(Le,2*Ue+1,2*et+1)}function B(Te,Le,Ue){var et=Te[Le];Te[Le]=Te[Ue],Te[Ue]=et}function j(Te,Le,Ue,et){var ke=Te-Ue,Ie=Le-et;return ke*ke+Ie*Ie}I.fromVectorTileJs=k,I.fromGeojsonVt=function(Te,Le){Le=Le||{};var Ue={};for(var et in Te)Ue[et]=new M(Te[et].features,Le),Ue[et].name=et,Ue[et].version=Le.version,Ue[et].extent=Le.extent;return k({layers:Ue})},I.GeoJSONWrapper=E;var V=function(Te){return Te[0]},K=function(Te){return Te[1]},te=function(Te,Le,Ue,et,ke){Le===void 0&&(Le=V),Ue===void 0&&(Ue=K),et===void 0&&(et=64),ke===void 0&&(ke=Float64Array),this.nodeSize=et,this.points=Te;for(var Ie=Te.length<65536?Uint16Array:Uint32Array,He=this.ids=new Ie(Te.length),Ye=this.coords=new ke(2*Te.length),ft=0;ft<Te.length;ft++)He[ft]=ft,Ye[2*ft]=Le(Te[ft]),Ye[2*ft+1]=Ue(Te[ft]);(function it(je,ot,Je,st,It,Nt){if(!(It-st<=Je)){var nr=st+It>>1;(function We(Fe,bt,kt,_t,Rt,Dt){for(;Rt>_t;){if(Rt-_t>600){var Ut=Rt-_t+1,Bt=kt-_t+1,tr=Math.log(Ut),er=.5*Math.exp(2*tr/3),Zt=.5*Math.sqrt(tr*er*(Ut-er)/Ut)*(Bt-Ut/2<0?-1:1);We(Fe,bt,kt,Math.max(_t,Math.floor(kt-Bt*er/Ut+Zt)),Math.min(Rt,Math.floor(kt+(Ut-Bt)*er/Ut+Zt)),Dt)}var _r=bt[2*kt+Dt],Gr=_t,Or=Rt;for(z(Fe,bt,_t,kt),bt[2*Rt+Dt]>_r&&z(Fe,bt,_t,Rt);Gr<Or;){for(z(Fe,bt,Gr,Or),Gr++,Or--;bt[2*Gr+Dt]<_r;)Gr++;for(;bt[2*Or+Dt]>_r;)Or--}bt[2*_t+Dt]===_r?z(Fe,bt,_t,Or):z(Fe,bt,++Or,Rt),Or<=kt&&(_t=Or+1),kt<=Or&&(Rt=Or-1)}})(je,ot,nr,st,It,Nt%2),it(je,ot,Je,st,nr-1,Nt+1),it(je,ot,Je,nr+1,It,Nt+1)}})(He,Ye,et,0,He.length-1,0)};te.prototype.range=function(Te,Le,Ue,et){return function(ke,Ie,He,Ye,ft,it,je){for(var ot,Je,st=[0,ke.length-1,0],It=[];st.length;){var Nt=st.pop(),nr=st.pop(),We=st.pop();if(nr-We<=je)for(var Fe=We;Fe<=nr;Fe++)Je=Ie[2*Fe+1],(ot=Ie[2*Fe])>=He&&ot<=ft&&Je>=Ye&&Je<=it&&It.push(ke[Fe]);else{var bt=Math.floor((We+nr)/2);Je=Ie[2*bt+1],(ot=Ie[2*bt])>=He&&ot<=ft&&Je>=Ye&&Je<=it&&It.push(ke[bt]);var kt=(Nt+1)%2;(Nt===0?He<=ot:Ye<=Je)&&(st.push(We),st.push(bt-1),st.push(kt)),(Nt===0?ft>=ot:it>=Je)&&(st.push(bt+1),st.push(nr),st.push(kt))}}return It}(this.ids,this.coords,Te,Le,Ue,et,this.nodeSize)},te.prototype.within=function(Te,Le,Ue){return function(et,ke,Ie,He,Ye,ft){for(var it=[0,et.length-1,0],je=[],ot=Ye*Ye;it.length;){var Je=it.pop(),st=it.pop(),It=it.pop();if(st-It<=ft)for(var Nt=It;Nt<=st;Nt++)j(ke[2*Nt],ke[2*Nt+1],Ie,He)<=ot&&je.push(et[Nt]);else{var nr=Math.floor((It+st)/2),We=ke[2*nr],Fe=ke[2*nr+1];j(We,Fe,Ie,He)<=ot&&je.push(et[nr]);var bt=(Je+1)%2;(Je===0?Ie-Ye<=We:He-Ye<=Fe)&&(it.push(It),it.push(nr-1),it.push(bt)),(Je===0?Ie+Ye>=We:He+Ye>=Fe)&&(it.push(nr+1),it.push(st),it.push(bt))}}return je}(this.ids,this.coords,Te,Le,Ue,this.nodeSize)};var $={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Te){return Te}},ie=function(Te){this.options=ae(Object.create($),Te),this.trees=new Array(this.options.maxZoom+1)};function se(Te,Le,Ue,et,ke){return{x:Te,y:Le,zoom:1/0,id:Ue,parentId:-1,numPoints:et,properties:ke}}function Q(Te,Le){var Ue=Te.geometry.coordinates,et=Ue[1];return{x:re(Ue[0]),y:ee(et),zoom:1/0,index:Le,parentId:-1}}function H(Te){return{type:"Feature",id:Te.id,properties:oe(Te),geometry:{type:"Point",coordinates:[(et=Te.x,360*(et-.5)),(Le=Te.y,Ue=(180-360*Le)*Math.PI/180,360*Math.atan(Math.exp(Ue))/Math.PI-90)]}};var Le,Ue,et}function oe(Te){var Le=Te.numPoints,Ue=Le>=1e4?Math.round(Le/1e3)+"k":Le>=1e3?Math.round(Le/100)/10+"k":Le;return ae(ae({},Te.properties),{cluster:!0,cluster_id:Te.id,point_count:Le,point_count_abbreviated:Ue})}function re(Te){return Te/360+.5}function ee(Te){var Le=Math.sin(Te*Math.PI/180),Ue=.5-.25*Math.log((1+Le)/(1-Le))/Math.PI;return Ue<0?0:Ue>1?1:Ue}function ae(Te,Le){for(var Ue in Le)Te[Ue]=Le[Ue];return Te}function fe(Te){return Te.x}function de(Te){return Te.y}function pe(Te,Le,Ue,et,ke,Ie){var He=ke-Ue,Ye=Ie-et;if(He!==0||Ye!==0){var ft=((Te-Ue)*He+(Le-et)*Ye)/(He*He+Ye*Ye);ft>1?(Ue=ke,et=Ie):ft>0&&(Ue+=He*ft,et+=Ye*ft)}return(He=Te-Ue)*He+(Ye=Le-et)*Ye}function W(Te,Le,Ue,et){var ke={id:Te===void 0?null:Te,type:Le,geometry:Ue,tags:et,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ie){var He=Ie.geometry,Ye=Ie.type;if(Ye==="Point"||Ye==="MultiPoint"||Ye==="LineString")ue(Ie,He);else if(Ye==="Polygon"||Ye==="MultiLineString")for(var ft=0;ft<He.length;ft++)ue(Ie,He[ft]);else if(Ye==="MultiPolygon")for(ft=0;ft<He.length;ft++)for(var it=0;it<He[ft].length;it++)ue(Ie,He[ft][it])}(ke),ke}function ue(Te,Le){for(var Ue=0;Ue<Le.length;Ue+=3)Te.minX=Math.min(Te.minX,Le[Ue]),Te.minY=Math.min(Te.minY,Le[Ue+1]),Te.maxX=Math.max(Te.maxX,Le[Ue]),Te.maxY=Math.max(Te.maxY,Le[Ue+1])}function me(Te,Le,Ue,et){if(Le.geometry){var ke=Le.geometry.coordinates,Ie=Le.geometry.type,He=Math.pow(Ue.tolerance/((1<<Ue.maxZoom)*Ue.extent),2),Ye=[],ft=Le.id;if(Ue.promoteId?ft=Le.properties[Ue.promoteId]:Ue.generateId&&(ft=et||0),Ie==="Point")be(ke,Ye);else if(Ie==="MultiPoint")for(var it=0;it<ke.length;it++)be(ke[it],Ye);else if(Ie==="LineString")Me(ke,Ye,He,!1);else if(Ie==="MultiLineString"){if(Ue.lineMetrics){for(it=0;it<ke.length;it++)Me(ke[it],Ye=[],He,!1),Te.push(W(ft,"LineString",Ye,Le.properties));return}Pe(ke,Ye,He,!1)}else if(Ie==="Polygon")Pe(ke,Ye,He,!0);else{if(Ie!=="MultiPolygon"){if(Ie==="GeometryCollection"){for(it=0;it<Le.geometry.geometries.length;it++)me(Te,{id:ft,geometry:Le.geometry.geometries[it],properties:Le.properties},Ue,et);return}throw new Error("Input data is not a valid GeoJSON object.")}for(it=0;it<ke.length;it++){var je=[];Pe(ke[it],je,He,!0),Ye.push(je)}}Te.push(W(ft,Ie,Ye,Le.properties))}}function be(Te,Le){Le.push(Ge(Te[0])),Le.push(ze(Te[1])),Le.push(0)}function Me(Te,Le,Ue,et){for(var ke,Ie,He=0,Ye=0;Ye<Te.length;Ye++){var ft=Ge(Te[Ye][0]),it=ze(Te[Ye][1]);Le.push(ft),Le.push(it),Le.push(0),Ye>0&&(He+=et?(ke*it-ft*Ie)/2:Math.sqrt(Math.pow(ft-ke,2)+Math.pow(it-Ie,2))),ke=ft,Ie=it}var je=Le.length-3;Le[2]=1,function ot(Je,st,It,Nt){for(var nr,We=Nt,Fe=It-st>>1,bt=It-st,kt=Je[st],_t=Je[st+1],Rt=Je[It],Dt=Je[It+1],Ut=st+3;Ut<It;Ut+=3){var Bt=pe(Je[Ut],Je[Ut+1],kt,_t,Rt,Dt);if(Bt>We)nr=Ut,We=Bt;else if(Bt===We){var tr=Math.abs(Ut-Fe);tr<bt&&(nr=Ut,bt=tr)}}We>Nt&&(nr-st>3&&ot(Je,st,nr,Nt),Je[nr+2]=We,It-nr>3&&ot(Je,nr,It,Nt))}(Le,0,je,Ue),Le[je+2]=1,Le.size=Math.abs(He),Le.start=0,Le.end=Le.size}function Pe(Te,Le,Ue,et){for(var ke=0;ke<Te.length;ke++){var Ie=[];Me(Te[ke],Ie,Ue,et),Le.push(Ie)}}function Ge(Te){return Te/360+.5}function ze(Te){var Le=Math.sin(Te*Math.PI/180),Ue=.5-.25*Math.log((1+Le)/(1-Le))/Math.PI;return Ue<0?0:Ue>1?1:Ue}function Qe(Te,Le,Ue,et,ke,Ie,He,Ye){if(et/=Le,Ie>=(Ue/=Le)&&He<et)return Te;if(He<Ue||Ie>=et)return null;for(var ft=[],it=0;it<Te.length;it++){var je=Te[it],ot=je.geometry,Je=je.type,st=ke===0?je.minX:je.minY,It=ke===0?je.maxX:je.maxY;if(st>=Ue&&It<et)ft.push(je);else if(!(It<Ue||st>=et)){var Nt=[];if(Je==="Point"||Je==="MultiPoint")tt(ot,Nt,Ue,et,ke);else if(Je==="LineString")Ce(ot,Nt,Ue,et,ke,!1,Ye.lineMetrics);else if(Je==="MultiLineString")Be(ot,Nt,Ue,et,ke,!1);else if(Je==="Polygon")Be(ot,Nt,Ue,et,ke,!0);else if(Je==="MultiPolygon")for(var nr=0;nr<ot.length;nr++){var We=[];Be(ot[nr],We,Ue,et,ke,!0),We.length&&Nt.push(We)}if(Nt.length){if(Ye.lineMetrics&&Je==="LineString"){for(nr=0;nr<Nt.length;nr++)ft.push(W(je.id,Je,Nt[nr],je.tags));continue}Je!=="LineString"&&Je!=="MultiLineString"||(Nt.length===1?(Je="LineString",Nt=Nt[0]):Je="MultiLineString"),Je!=="Point"&&Je!=="MultiPoint"||(Je=Nt.length===3?"Point":"MultiPoint"),ft.push(W(je.id,Je,Nt,je.tags))}}}return ft.length?ft:null}function tt(Te,Le,Ue,et,ke){for(var Ie=0;Ie<Te.length;Ie+=3){var He=Te[Ie+ke];He>=Ue&&He<=et&&(Le.push(Te[Ie]),Le.push(Te[Ie+1]),Le.push(Te[Ie+2]))}}function Ce(Te,Le,Ue,et,ke,Ie,He){for(var Ye,ft,it=Ae(Te),je=ke===0?Tt:At,ot=Te.start,Je=0;Je<Te.length-3;Je+=3){var st=Te[Je],It=Te[Je+1],Nt=Te[Je+2],nr=Te[Je+3],We=Te[Je+4],Fe=ke===0?st:It,bt=ke===0?nr:We,kt=!1;He&&(Ye=Math.sqrt(Math.pow(st-nr,2)+Math.pow(It-We,2))),Fe<Ue?bt>Ue&&(ft=je(it,st,It,nr,We,Ue),He&&(it.start=ot+Ye*ft)):Fe>et?bt<et&&(ft=je(it,st,It,nr,We,et),He&&(it.start=ot+Ye*ft)):qe(it,st,It,Nt),bt<Ue&&Fe>=Ue&&(ft=je(it,st,It,nr,We,Ue),kt=!0),bt>et&&Fe<=et&&(ft=je(it,st,It,nr,We,et),kt=!0),!Ie&&kt&&(He&&(it.end=ot+Ye*ft),Le.push(it),it=Ae(Te)),He&&(ot+=Ye)}var _t=Te.length-3;st=Te[_t],It=Te[_t+1],Nt=Te[_t+2],(Fe=ke===0?st:It)>=Ue&&Fe<=et&&qe(it,st,It,Nt),_t=it.length-3,Ie&&_t>=3&&(it[_t]!==it[0]||it[_t+1]!==it[1])&&qe(it,it[0],it[1],it[2]),it.length&&Le.push(it)}function Ae(Te){var Le=[];return Le.size=Te.size,Le.start=Te.start,Le.end=Te.end,Le}function Be(Te,Le,Ue,et,ke,Ie){for(var He=0;He<Te.length;He++)Ce(Te[He],Le,Ue,et,ke,Ie,!1)}function qe(Te,Le,Ue,et){Te.push(Le),Te.push(Ue),Te.push(et)}function Tt(Te,Le,Ue,et,ke,Ie){var He=(Ie-Le)/(et-Le);return Te.push(Ie),Te.push(Ue+(ke-Ue)*He),Te.push(1),He}function At(Te,Le,Ue,et,ke,Ie){var He=(Ie-Ue)/(ke-Ue);return Te.push(Le+(et-Le)*He),Te.push(Ie),Te.push(1),He}function Ne(Te,Le){for(var Ue=[],et=0;et<Te.length;et++){var ke,Ie=Te[et],He=Ie.type;if(He==="Point"||He==="MultiPoint"||He==="LineString")ke=ct(Ie.geometry,Le);else if(He==="MultiLineString"||He==="Polygon"){ke=[];for(var Ye=0;Ye<Ie.geometry.length;Ye++)ke.push(ct(Ie.geometry[Ye],Le))}else if(He==="MultiPolygon")for(ke=[],Ye=0;Ye<Ie.geometry.length;Ye++){for(var ft=[],it=0;it<Ie.geometry[Ye].length;it++)ft.push(ct(Ie.geometry[Ye][it],Le));ke.push(ft)}Ue.push(W(Ie.id,He,ke,Ie.tags))}return Ue}function ct(Te,Le){var Ue=[];Ue.size=Te.size,Te.start!==void 0&&(Ue.start=Te.start,Ue.end=Te.end);for(var et=0;et<Te.length;et+=3)Ue.push(Te[et]+Le,Te[et+1],Te[et+2]);return Ue}function Mt(Te,Le){if(Te.transformed)return Te;var Ue,et,ke,Ie=1<<Te.z,He=Te.x,Ye=Te.y;for(Ue=0;Ue<Te.features.length;Ue++){var ft=Te.features[Ue],it=ft.geometry,je=ft.type;if(ft.geometry=[],je===1)for(et=0;et<it.length;et+=2)ft.geometry.push(Wt(it[et],it[et+1],Le,Ie,He,Ye));else for(et=0;et<it.length;et++){var ot=[];for(ke=0;ke<it[et].length;ke+=2)ot.push(Wt(it[et][ke],it[et][ke+1],Le,Ie,He,Ye));ft.geometry.push(ot)}}return Te.transformed=!0,Te}function Wt(Te,Le,Ue,et,ke,Ie){return[Math.round(Ue*(Te*et-ke)),Math.round(Ue*(Le*et-Ie))]}function qt(Te,Le,Ue,et,ke){for(var Ie=Le===ke.maxZoom?0:ke.tolerance/((1<<Le)*ke.extent),He={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ue,y:et,z:Le,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ye=0;Ye<Te.length;Ye++){He.numFeatures++,zt(He,Te[Ye],Ie,ke);var ft=Te[Ye].minX,it=Te[Ye].minY,je=Te[Ye].maxX,ot=Te[Ye].maxY;ft<He.minX&&(He.minX=ft),it<He.minY&&(He.minY=it),je>He.maxX&&(He.maxX=je),ot>He.maxY&&(He.maxY=ot)}return He}function zt(Te,Le,Ue,et){var ke=Le.geometry,Ie=Le.type,He=[];if(Ie==="Point"||Ie==="MultiPoint")for(var Ye=0;Ye<ke.length;Ye+=3)He.push(ke[Ye]),He.push(ke[Ye+1]),Te.numPoints++,Te.numSimplified++;else if(Ie==="LineString")$t(He,ke,Te,Ue,!1,!1);else if(Ie==="MultiLineString"||Ie==="Polygon")for(Ye=0;Ye<ke.length;Ye++)$t(He,ke[Ye],Te,Ue,Ie==="Polygon",Ye===0);else if(Ie==="MultiPolygon")for(var ft=0;ft<ke.length;ft++){var it=ke[ft];for(Ye=0;Ye<it.length;Ye++)$t(He,it[Ye],Te,Ue,!0,Ye===0)}if(He.length){var je=Le.tags||null;if(Ie==="LineString"&&et.lineMetrics){for(var ot in je={},Le.tags)je[ot]=Le.tags[ot];je.mapbox_clip_start=ke.start/ke.size,je.mapbox_clip_end=ke.end/ke.size}var Je={geometry:He,type:Ie==="Polygon"||Ie==="MultiPolygon"?3:Ie==="LineString"||Ie==="MultiLineString"?2:1,tags:je};Le.id!==null&&(Je.id=Le.id),Te.features.push(Je)}}function $t(Te,Le,Ue,et,ke,Ie){var He=et*et;if(et>0&&Le.size<(ke?He:et))Ue.numPoints+=Le.length/3;else{for(var Ye=[],ft=0;ft<Le.length;ft+=3)(et===0||Le[ft+2]>He)&&(Ue.numSimplified++,Ye.push(Le[ft]),Ye.push(Le[ft+1])),Ue.numPoints++;ke&&function(it,je){for(var ot=0,Je=0,st=it.length,It=st-2;Je<st;It=Je,Je+=2)ot+=(it[Je]-it[It])*(it[Je+1]+it[It+1]);if(ot>0===je)for(Je=0,st=it.length;Je<st/2;Je+=2){var Nt=it[Je],nr=it[Je+1];it[Je]=it[st-2-Je],it[Je+1]=it[st-1-Je],it[st-2-Je]=Nt,it[st-1-Je]=nr}}(Ye,Ie),Te.push(Ye)}}function rr(Te,Le){var Ue=(Le=this.options=function(ke,Ie){for(var He in Ie)ke[He]=Ie[He];return ke}(Object.create(this.options),Le)).debug;if(Ue&&console.time("preprocess data"),Le.maxZoom<0||Le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Le.promoteId&&Le.generateId)throw new Error("promoteId and generateId cannot be used together.");var et=function(ke,Ie){var He=[];if(ke.type==="FeatureCollection")for(var Ye=0;Ye<ke.features.length;Ye++)me(He,ke.features[Ye],Ie,Ye);else me(He,ke.type==="Feature"?ke:{geometry:ke},Ie);return He}(Te,Le);this.tiles={},this.tileCoords=[],Ue&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Le.indexMaxZoom,Le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(et=function(ke,Ie){var He=Ie.buffer/Ie.extent,Ye=ke,ft=Qe(ke,1,-1-He,He,0,-1,2,Ie),it=Qe(ke,1,1-He,2+He,0,-1,2,Ie);return(ft||it)&&(Ye=Qe(ke,1,-He,1+He,0,-1,2,Ie)||[],ft&&(Ye=Ne(ft,1).concat(Ye)),it&&(Ye=Ye.concat(Ne(it,-1)))),Ye}(et,Le)).length&&this.splitTile(et,0,0,0),Ue&&(et.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Lt(Te,Le,Ue){return 32*((1<<Te)*Ue+Le)+Te}function Ct(Te,Le){var Ue=Te.tileID.canonical;if(!this._geoJSONIndex)return Le(null,null);var et=this._geoJSONIndex.getTile(Ue.z,Ue.x,Ue.y);if(!et)return Le(null,null);var ke=new y(et.features),Ie=I(ke);Ie.byteOffset===0&&Ie.byteLength===Ie.buffer.byteLength||(Ie=new Uint8Array(Ie)),Le(null,{vectorTile:ke,rawData:Ie.buffer})}ie.prototype.load=function(Te){var Le=this.options,Ue=Le.log,et=Le.minZoom,ke=Le.maxZoom,Ie=Le.nodeSize;Ue&&console.time("total time");var He="prepare "+Te.length+" points";Ue&&console.time(He),this.points=Te;for(var Ye=[],ft=0;ft<Te.length;ft++)Te[ft].geometry&&Ye.push(Q(Te[ft],ft));this.trees[ke+1]=new te(Ye,fe,de,Ie,Float32Array),Ue&&console.timeEnd(He);for(var it=ke;it>=et;it--){var je=+Date.now();Ye=this._cluster(Ye,it),this.trees[it]=new te(Ye,fe,de,Ie,Float32Array),Ue&&console.log("z%d: %d clusters in %dms",it,Ye.length,+Date.now()-je)}return Ue&&console.timeEnd("total time"),this},ie.prototype.getClusters=function(Te,Le){var Ue=((Te[0]+180)%360+360)%360-180,et=Math.max(-90,Math.min(90,Te[1])),ke=Te[2]===180?180:((Te[2]+180)%360+360)%360-180,Ie=Math.max(-90,Math.min(90,Te[3]));if(Te[2]-Te[0]>=360)Ue=-180,ke=180;else if(Ue>ke){var He=this.getClusters([Ue,et,180,Ie],Le),Ye=this.getClusters([-180,et,ke,Ie],Le);return He.concat(Ye)}for(var ft=this.trees[this._limitZoom(Le)],it=[],je=0,ot=ft.range(re(Ue),ee(Ie),re(ke),ee(et));je<ot.length;je+=1){var Je=ft.points[ot[je]];it.push(Je.numPoints?H(Je):this.points[Je.index])}return it},ie.prototype.getChildren=function(Te){var Le=this._getOriginId(Te),Ue=this._getOriginZoom(Te),et="No cluster with the specified id.",ke=this.trees[Ue];if(!ke)throw new Error(et);var Ie=ke.points[Le];if(!Ie)throw new Error(et);for(var He=this.options.radius/(this.options.extent*Math.pow(2,Ue-1)),Ye=[],ft=0,it=ke.within(Ie.x,Ie.y,He);ft<it.length;ft+=1){var je=ke.points[it[ft]];je.parentId===Te&&Ye.push(je.numPoints?H(je):this.points[je.index])}if(Ye.length===0)throw new Error(et);return Ye},ie.prototype.getLeaves=function(Te,Le,Ue){var et=[];return this._appendLeaves(et,Te,Le=Le||10,Ue=Ue||0,0),et},ie.prototype.getTile=function(Te,Le,Ue){var et=this.trees[this._limitZoom(Te)],ke=Math.pow(2,Te),Ie=this.options,He=Ie.radius/Ie.extent,Ye=(Ue-He)/ke,ft=(Ue+1+He)/ke,it={features:[]};return this._addTileFeatures(et.range((Le-He)/ke,Ye,(Le+1+He)/ke,ft),et.points,Le,Ue,ke,it),Le===0&&this._addTileFeatures(et.range(1-He/ke,Ye,1,ft),et.points,ke,Ue,ke,it),Le===ke-1&&this._addTileFeatures(et.range(0,Ye,He/ke,ft),et.points,-1,Ue,ke,it),it.features.length?it:null},ie.prototype.getClusterExpansionZoom=function(Te){for(var Le=this._getOriginZoom(Te)-1;Le<=this.options.maxZoom;){var Ue=this.getChildren(Te);if(Le++,Ue.length!==1)break;Te=Ue[0].properties.cluster_id}return Le},ie.prototype._appendLeaves=function(Te,Le,Ue,et,ke){for(var Ie=0,He=this.getChildren(Le);Ie<He.length;Ie+=1){var Ye=He[Ie],ft=Ye.properties;if(ft&&ft.cluster?ke+ft.point_count<=et?ke+=ft.point_count:ke=this._appendLeaves(Te,ft.cluster_id,Ue,et,ke):ke<et?ke++:Te.push(Ye),Te.length===Ue)break}return ke},ie.prototype._addTileFeatures=function(Te,Le,Ue,et,ke,Ie){for(var He=0,Ye=Te;He<Ye.length;He+=1){var ft=Le[Ye[He]],it=ft.numPoints,je={type:1,geometry:[[Math.round(this.options.extent*(ft.x*ke-Ue)),Math.round(this.options.extent*(ft.y*ke-et))]],tags:it?oe(ft):this.points[ft.index].properties},ot=void 0;it?ot=ft.id:this.options.generateId?ot=ft.index:this.points[ft.index].id&&(ot=this.points[ft.index].id),ot!==void 0&&(je.id=ot),Ie.features.push(je)}},ie.prototype._limitZoom=function(Te){return Math.max(this.options.minZoom,Math.min(Te,this.options.maxZoom+1))},ie.prototype._cluster=function(Te,Le){for(var Ue=[],et=this.options,ke=et.reduce,Ie=et.radius/(et.extent*Math.pow(2,Le)),He=0;He<Te.length;He++){var Ye=Te[He];if(!(Ye.zoom<=Le)){Ye.zoom=Le;for(var ft=this.trees[Le+1],it=ft.within(Ye.x,Ye.y,Ie),je=Ye.numPoints||1,ot=Ye.x*je,Je=Ye.y*je,st=ke&&je>1?this._map(Ye,!0):null,It=(He<<5)+(Le+1)+this.points.length,Nt=0,nr=it;Nt<nr.length;Nt+=1){var We=ft.points[nr[Nt]];if(!(We.zoom<=Le)){We.zoom=Le;var Fe=We.numPoints||1;ot+=We.x*Fe,Je+=We.y*Fe,je+=Fe,We.parentId=It,ke&&(st||(st=this._map(Ye,!0)),ke(st,this._map(We)))}}je===1?Ue.push(Ye):(Ye.parentId=It,Ue.push(se(ot/je,Je/je,It,je,st)))}}return Ue},ie.prototype._getOriginId=function(Te){return Te-this.points.length>>5},ie.prototype._getOriginZoom=function(Te){return(Te-this.points.length)%32},ie.prototype._map=function(Te,Le){if(Te.numPoints)return Le?ae({},Te.properties):Te.properties;var Ue=this.points[Te.index].properties,et=this.options.map(Ue);return Le&&et===Ue?ae({},et):et},rr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},rr.prototype.splitTile=function(Te,Le,Ue,et,ke,Ie,He){for(var Ye=[Te,Le,Ue,et],ft=this.options,it=ft.debug;Ye.length;){et=Ye.pop(),Ue=Ye.pop(),Le=Ye.pop(),Te=Ye.pop();var je=1<<Le,ot=Lt(Le,Ue,et),Je=this.tiles[ot];if(!Je&&(it>1&&console.time("creation"),Je=this.tiles[ot]=qt(Te,Le,Ue,et,ft),this.tileCoords.push({z:Le,x:Ue,y:et}),it)){it>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Le,Ue,et,Je.numFeatures,Je.numPoints,Je.numSimplified),console.timeEnd("creation"));var st="z"+Le;this.stats[st]=(this.stats[st]||0)+1,this.total++}if(Je.source=Te,ke){if(Le===ft.maxZoom||Le===ke)continue;var It=1<<ke-Le;if(Ue!==Math.floor(Ie/It)||et!==Math.floor(He/It))continue}else if(Le===ft.indexMaxZoom||Je.numPoints<=ft.indexMaxPoints)continue;if(Je.source=null,Te.length!==0){it>1&&console.time("clipping");var Nt,nr,We,Fe,bt,kt,_t=.5*ft.buffer/ft.extent,Rt=.5-_t,Dt=.5+_t,Ut=1+_t;Nt=nr=We=Fe=null,bt=Qe(Te,je,Ue-_t,Ue+Dt,0,Je.minX,Je.maxX,ft),kt=Qe(Te,je,Ue+Rt,Ue+Ut,0,Je.minX,Je.maxX,ft),Te=null,bt&&(Nt=Qe(bt,je,et-_t,et+Dt,1,Je.minY,Je.maxY,ft),nr=Qe(bt,je,et+Rt,et+Ut,1,Je.minY,Je.maxY,ft),bt=null),kt&&(We=Qe(kt,je,et-_t,et+Dt,1,Je.minY,Je.maxY,ft),Fe=Qe(kt,je,et+Rt,et+Ut,1,Je.minY,Je.maxY,ft),kt=null),it>1&&console.timeEnd("clipping"),Ye.push(Nt||[],Le+1,2*Ue,2*et),Ye.push(nr||[],Le+1,2*Ue,2*et+1),Ye.push(We||[],Le+1,2*Ue+1,2*et),Ye.push(Fe||[],Le+1,2*Ue+1,2*et+1)}}},rr.prototype.getTile=function(Te,Le,Ue){var et=this.options,ke=et.extent,Ie=et.debug;if(Te<0||Te>24)return null;var He=1<<Te,Ye=Lt(Te,Le=(Le%He+He)%He,Ue);if(this.tiles[Ye])return Mt(this.tiles[Ye],ke);Ie>1&&console.log("drilling down to z%d-%d-%d",Te,Le,Ue);for(var ft,it=Te,je=Le,ot=Ue;!ft&&it>0;)it--,je=Math.floor(je/2),ot=Math.floor(ot/2),ft=this.tiles[Lt(it,je,ot)];return ft&&ft.source?(Ie>1&&console.log("found parent tile z%d-%d-%d",it,je,ot),Ie>1&&console.time("drilling down"),this.splitTile(ft.source,it,je,ot,Te,Le,Ue),Ie>1&&console.timeEnd("drilling down"),this.tiles[Ye]?Mt(this.tiles[Ye],ke):null):null};var dt=function(Te){function Le(Ue,et,ke,Ie){Te.call(this,Ue,et,ke,Ct),Ie&&(this.loadGeoJSON=Ie)}return Te&&(Le.__proto__=Te),(Le.prototype=Object.create(Te&&Te.prototype)).constructor=Le,Le.prototype.loadData=function(Ue,et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=et,this._pendingLoadDataParams=Ue,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Le.prototype._loadData=function(){var Ue=this;if(this._pendingCallback&&this._pendingLoadDataParams){var et=this._pendingCallback,ke=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Ie=!!(ke&&ke.request&&ke.request.collectResourceTiming)&&new t.RequestPerformance(ke.request);this.loadGeoJSON(ke,function(He,Ye){if(He||!Ye)return et(He);if(typeof Ye!="object")return et(new Error("Input data given to '"+ke.source+"' is not a valid GeoJSON object."));(function je(ot,Je){var st,It=ot&&ot.type;if(It==="FeatureCollection")for(st=0;st<ot.features.length;st++)je(ot.features[st],Je);else if(It==="GeometryCollection")for(st=0;st<ot.geometries.length;st++)je(ot.geometries[st],Je);else if(It==="Feature")je(ot.geometry,Je);else if(It==="Polygon")b(ot.coordinates,Je);else if(It==="MultiPolygon")for(st=0;st<ot.coordinates.length;st++)b(ot.coordinates[st],Je);return ot})(Ye,!0);try{Ue._geoJSONIndex=ke.cluster?new ie(function(je){var ot=je.superclusterOptions,Je=je.clusterProperties;if(!Je||!ot)return ot;for(var st={},It={},Nt={accumulated:null,zoom:0},nr={properties:null},We=Object.keys(Je),Fe=0,bt=We;Fe<bt.length;Fe+=1){var kt=bt[Fe],_t=Je[kt],Rt=_t[0],Dt=t.createExpression(_t[1]),Ut=t.createExpression(typeof Rt=="string"?[Rt,["accumulated"],["get",kt]]:Rt);st[kt]=Dt.value,It[kt]=Ut.value}return ot.map=function(Bt){nr.properties=Bt;for(var tr={},er=0,Zt=We;er<Zt.length;er+=1){var _r=Zt[er];tr[_r]=st[_r].evaluate(Nt,nr)}return tr},ot.reduce=function(Bt,tr){nr.properties=tr;for(var er=0,Zt=We;er<Zt.length;er+=1){var _r=Zt[er];Nt.accumulated=Bt[_r],Bt[_r]=It[_r].evaluate(Nt,nr)}},ot}(ke)).load(Ye.features):function(je,ot){return new rr(je,ot)}(Ye,ke.geojsonVtOptions)}catch(je){return et(je)}Ue.loaded={};var ft={};if(Ie){var it=Ie.finish();it&&(ft.resourceTiming={},ft.resourceTiming[ke.source]=JSON.parse(JSON.stringify(it)))}et(null,ft)})}},Le.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Le.prototype.reloadTile=function(Ue,et){var ke=this.loaded;return ke&&ke[Ue.uid]?Te.prototype.reloadTile.call(this,Ue,et):this.loadTile(Ue,et)},Le.prototype.loadGeoJSON=function(Ue,et){if(Ue.request)t.getJSON(Ue.request,et);else{if(typeof Ue.data!="string")return et(new Error("Input data given to '"+Ue.source+"' is not a valid GeoJSON object."));try{return et(null,JSON.parse(Ue.data))}catch{return et(new Error("Input data given to '"+Ue.source+"' is not a valid GeoJSON object."))}}},Le.prototype.removeSource=function(Ue,et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),et()},Le.prototype.getClusterExpansionZoom=function(Ue,et){try{et(null,this._geoJSONIndex.getClusterExpansionZoom(Ue.clusterId))}catch(ke){et(ke)}},Le.prototype.getClusterChildren=function(Ue,et){try{et(null,this._geoJSONIndex.getChildren(Ue.clusterId))}catch(ke){et(ke)}},Le.prototype.getClusterLeaves=function(Ue,et){try{et(null,this._geoJSONIndex.getLeaves(Ue.clusterId,Ue.limit,Ue.offset))}catch(ke){et(ke)}},Le}(p),lt=function(Te){var Le=this;this.self=Te,this.actor=new t.Actor(Te,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:p,geojson:dt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ue,et){if(Le.workerSourceTypes[Ue])throw new Error('Worker source with name "'+Ue+'" already registered.');Le.workerSourceTypes[Ue]=et},this.self.registerRTLTextPlugin=function(Ue){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=Ue.applyArabicShaping,t.plugin.processBidirectionalText=Ue.processBidirectionalText,t.plugin.processStyledBidirectionalText=Ue.processStyledBidirectionalText}};return lt.prototype.setReferrer=function(Te,Le){this.referrer=Le},lt.prototype.setImages=function(Te,Le,Ue){for(var et in this.availableImages[Te]=Le,this.workerSources[Te]){var ke=this.workerSources[Te][et];for(var Ie in ke)ke[Ie].availableImages=Le}Ue()},lt.prototype.setLayers=function(Te,Le,Ue){this.getLayerIndex(Te).replace(Le),Ue()},lt.prototype.updateLayers=function(Te,Le,Ue){this.getLayerIndex(Te).update(Le.layers,Le.removedIds),Ue()},lt.prototype.loadTile=function(Te,Le,Ue){this.getWorkerSource(Te,Le.type,Le.source).loadTile(Le,Ue)},lt.prototype.loadDEMTile=function(Te,Le,Ue){this.getDEMWorkerSource(Te,Le.source).loadTile(Le,Ue)},lt.prototype.reloadTile=function(Te,Le,Ue){this.getWorkerSource(Te,Le.type,Le.source).reloadTile(Le,Ue)},lt.prototype.abortTile=function(Te,Le,Ue){this.getWorkerSource(Te,Le.type,Le.source).abortTile(Le,Ue)},lt.prototype.removeTile=function(Te,Le,Ue){this.getWorkerSource(Te,Le.type,Le.source).removeTile(Le,Ue)},lt.prototype.removeDEMTile=function(Te,Le){this.getDEMWorkerSource(Te,Le.source).removeTile(Le)},lt.prototype.removeSource=function(Te,Le,Ue){if(this.workerSources[Te]&&this.workerSources[Te][Le.type]&&this.workerSources[Te][Le.type][Le.source]){var et=this.workerSources[Te][Le.type][Le.source];delete this.workerSources[Te][Le.type][Le.source],et.removeSource!==void 0?et.removeSource(Le,Ue):Ue()}},lt.prototype.loadWorkerSource=function(Te,Le,Ue){try{this.self.importScripts(Le.url),Ue()}catch(et){Ue(et.toString())}},lt.prototype.syncRTLPluginState=function(Te,Le,Ue){try{t.plugin.setState(Le);var et=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&et!=null){this.self.importScripts(et);var ke=t.plugin.isParsed();Ue(ke?void 0:new Error("RTL Text Plugin failed to import scripts from "+et),ke)}}catch(Ie){Ue(Ie.toString())}},lt.prototype.getAvailableImages=function(Te){var Le=this.availableImages[Te];return Le||(Le=[]),Le},lt.prototype.getLayerIndex=function(Te){var Le=this.layerIndexes[Te];return Le||(Le=this.layerIndexes[Te]=new o),Le},lt.prototype.getWorkerSource=function(Te,Le,Ue){var et=this;return this.workerSources[Te]||(this.workerSources[Te]={}),this.workerSources[Te][Le]||(this.workerSources[Te][Le]={}),this.workerSources[Te][Le][Ue]||(this.workerSources[Te][Le][Ue]=new this.workerSourceTypes[Le]({send:function(ke,Ie,He){et.actor.send(ke,Ie,He,Te)}},this.getLayerIndex(Te),this.getAvailableImages(Te))),this.workerSources[Te][Le][Ue]},lt.prototype.getDEMWorkerSource=function(Te,Le){return this.demWorkerSources[Te]||(this.demWorkerSources[Te]={}),this.demWorkerSources[Te][Le]||(this.demWorkerSources[Te][Le]=new g),this.demWorkerSources[Te][Le]},lt.prototype.enforceCacheSizeLimit=function(Te,Le){t.enforceCacheSizeLimit(Le)},typeof WorkerGlobalScope<"u"&&t.window!==void 0&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new lt(t.window)),lt}),c(["./shared"],function(t){var f=t.createCommonjsModule(function(J){function ne(Se){return!q(Se)}function q(Se){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Xe,ut,yt=new Blob([""],{type:"text/javascript"}),jt=URL.createObjectURL(yt);try{ut=new Worker(jt),Xe=!0}catch{Xe=!1}return ut&&ut.terminate(),URL.revokeObjectURL(jt),Xe}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Xe=document.createElement("canvas");Xe.width=Xe.height=1;var ut=Xe.getContext("2d");if(!ut)return!1;var yt=ut.getImageData(0,0,1,1);return yt&&yt.width===Xe.width}()?(ve[Oe=Se&&Se.failIfMajorPerformanceCaveat]===void 0&&(ve[Oe]=function(Xe){var ut=function(jt){var sr=document.createElement("canvas"),pr=Object.create(ne.webGLContextAttributes);return pr.failIfMajorPerformanceCaveat=jt,sr.probablySupportsContext?sr.probablySupportsContext("webgl",pr)||sr.probablySupportsContext("experimental-webgl",pr):sr.supportsContext?sr.supportsContext("webgl",pr)||sr.supportsContext("experimental-webgl",pr):sr.getContext("webgl",pr)||sr.getContext("experimental-webgl",pr)}(Xe);if(!ut)return!1;var yt=ut.createShader(ut.VERTEX_SHADER);return!(!yt||ut.isContextLost())&&(ut.shaderSource(yt,"void main() {}"),ut.compileShader(yt),ut.getShaderParameter(yt,ut.COMPILE_STATUS)===!0)}(Oe)),ve[Oe]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var Oe}J.exports?J.exports=ne:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=ne,window.mapboxgl.notSupportedReason=q);var ve={};ne.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),n={create:function(J,ne,q){var ve=t.window.document.createElement(J);return ne!==void 0&&(ve.className=ne),q&&q.appendChild(ve),ve},createNS:function(J,ne){return t.window.document.createElementNS(J,ne)}},o=t.window.document.documentElement.style;function l(J){if(!o)return J[0];for(var ne=0;ne<J.length;ne++)if(J[ne]in o)return J[ne];return J[0]}var h,i=l(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){o&&i&&(h=o[i],o[i]="none")},n.enableDrag=function(){o&&i&&(o[i]=h)};var s=l(["transform","WebkitTransform"]);n.setTransform=function(J,ne){J.style[s]=ne};var p=!1;try{var d=Object.defineProperty({},"passive",{get:function(){p=!0}});t.window.addEventListener("test",d,d),t.window.removeEventListener("test",d,d)}catch{p=!1}n.addEventListener=function(J,ne,q,ve){ve===void 0&&(ve={}),J.addEventListener(ne,q,"passive"in ve&&p?ve:ve.capture)},n.removeEventListener=function(J,ne,q,ve){ve===void 0&&(ve={}),J.removeEventListener(ne,q,"passive"in ve&&p?ve:ve.capture)};var g=function(J){J.preventDefault(),J.stopPropagation(),t.window.removeEventListener("click",g,!0)};function b(J){var ne=J.userImage;return!!(ne&&ne.render&&ne.render())&&(J.data.replace(new Uint8Array(ne.data.buffer)),!0)}n.suppressClick=function(){t.window.addEventListener("click",g,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",g,!0)},0)},n.mousePos=function(J,ne){var q=J.getBoundingClientRect();return new t.Point(ne.clientX-q.left-J.clientLeft,ne.clientY-q.top-J.clientTop)},n.touchPos=function(J,ne){for(var q=J.getBoundingClientRect(),ve=[],Se=0;Se<ne.length;Se++)ve.push(new t.Point(ne[Se].clientX-q.left-J.clientLeft,ne[Se].clientY-q.top-J.clientTop));return ve},n.mouseButton=function(J){return t.window.InstallTrigger!==void 0&&J.button===2&&J.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:J.button},n.remove=function(J){J.parentNode&&J.parentNode.removeChild(J)};var m=function(J){function ne(){J.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.isLoaded=function(){return this.loaded},ne.prototype.setLoaded=function(q){if(this.loaded!==q&&(this.loaded=q,q)){for(var ve=0,Se=this.requestors;ve<Se.length;ve+=1){var Oe=Se[ve];this._notify(Oe.ids,Oe.callback)}this.requestors=[]}},ne.prototype.getImage=function(q){return this.images[q]},ne.prototype.addImage=function(q,ve){this._validate(q,ve)&&(this.images[q]=ve)},ne.prototype._validate=function(q,ve){var Se=!0;return this._validateStretch(ve.stretchX,ve.data&&ve.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchX" value'))),Se=!1),this._validateStretch(ve.stretchY,ve.data&&ve.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchY" value'))),Se=!1),this._validateContent(ve.content,ve)||(this.fire(new t.ErrorEvent(new Error('Image "'+q+'" has invalid "content" value'))),Se=!1),Se},ne.prototype._validateStretch=function(q,ve){if(!q)return!0;for(var Se=0,Oe=0,Xe=q;Oe<Xe.length;Oe+=1){var ut=Xe[Oe];if(ut[0]<Se||ut[1]<ut[0]||ve<ut[1])return!1;Se=ut[1]}return!0},ne.prototype._validateContent=function(q,ve){return!(q&&(q.length!==4||q[0]<0||ve.data.width<q[0]||q[1]<0||ve.data.height<q[1]||q[2]<0||ve.data.width<q[2]||q[3]<0||ve.data.height<q[3]||q[2]<q[0]||q[3]<q[1]))},ne.prototype.updateImage=function(q,ve){ve.version=this.images[q].version+1,this.images[q]=ve,this.updatedImages[q]=!0},ne.prototype.removeImage=function(q){var ve=this.images[q];delete this.images[q],delete this.patterns[q],ve.userImage&&ve.userImage.onRemove&&ve.userImage.onRemove()},ne.prototype.listImages=function(){return Object.keys(this.images)},ne.prototype.getImages=function(q,ve){var Se=!0;if(!this.isLoaded())for(var Oe=0,Xe=q;Oe<Xe.length;Oe+=1)this.images[Xe[Oe]]||(Se=!1);this.isLoaded()||Se?this._notify(q,ve):this.requestors.push({ids:q,callback:ve})},ne.prototype._notify=function(q,ve){for(var Se={},Oe=0,Xe=q;Oe<Xe.length;Oe+=1){var ut=Xe[Oe];this.images[ut]||this.fire(new t.Event("styleimagemissing",{id:ut}));var yt=this.images[ut];yt?Se[ut]={data:yt.data.clone(),pixelRatio:yt.pixelRatio,sdf:yt.sdf,version:yt.version,stretchX:yt.stretchX,stretchY:yt.stretchY,content:yt.content,hasRenderCallback:Boolean(yt.userImage&&yt.userImage.render)}:t.warnOnce('Image "'+ut+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ve(null,Se)},ne.prototype.getPixelSize=function(){var q=this.atlasImage;return{width:q.width,height:q.height}},ne.prototype.getPattern=function(q){var ve=this.patterns[q],Se=this.getImage(q);if(!Se)return null;if(ve&&ve.position.version===Se.version)return ve.position;if(ve)ve.position.version=Se.version;else{var Oe={w:Se.data.width+2,h:Se.data.height+2,x:0,y:0},Xe=new t.ImagePosition(Oe,Se);this.patterns[q]={bin:Oe,position:Xe}}return this._updatePatternAtlas(),this.patterns[q].position},ne.prototype.bind=function(q){var ve=q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(q,this.atlasImage,ve.RGBA),this.atlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)},ne.prototype._updatePatternAtlas=function(){var q=[];for(var ve in this.patterns)q.push(this.patterns[ve].bin);var Se=t.potpack(q),Oe=Se.w,Xe=Se.h,ut=this.atlasImage;for(var yt in ut.resize({width:Oe||1,height:Xe||1}),this.patterns){var jt=this.patterns[yt].bin,sr=jt.x+1,pr=jt.y+1,br=this.images[yt].data,Lr=br.width,Dr=br.height;t.RGBAImage.copy(br,ut,{x:0,y:0},{x:sr,y:pr},{width:Lr,height:Dr}),t.RGBAImage.copy(br,ut,{x:0,y:Dr-1},{x:sr,y:pr-1},{width:Lr,height:1}),t.RGBAImage.copy(br,ut,{x:0,y:0},{x:sr,y:pr+Dr},{width:Lr,height:1}),t.RGBAImage.copy(br,ut,{x:Lr-1,y:0},{x:sr-1,y:pr},{width:1,height:Dr}),t.RGBAImage.copy(br,ut,{x:0,y:0},{x:sr+Lr,y:pr},{width:1,height:Dr})}this.dirty=!0},ne.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},ne.prototype.dispatchRenderCallbacks=function(q){for(var ve=0,Se=q;ve<Se.length;ve+=1){var Oe=Se[ve];if(!this.callbackDispatchedThisFrame[Oe]){this.callbackDispatchedThisFrame[Oe]=!0;var Xe=this.images[Oe];b(Xe)&&this.updateImage(Oe,Xe)}}},ne}(t.Evented),x=T,w=T,y=1e20;function T(J,ne,q,ve,Se,Oe){this.fontSize=J||24,this.buffer=ne===void 0?3:ne,this.cutoff=ve||.25,this.fontFamily=Se||"sans-serif",this.fontWeight=Oe||"normal",this.radius=q||8;var Xe=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Xe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Xe*Xe),this.gridInner=new Float64Array(Xe*Xe),this.f=new Float64Array(Xe),this.d=new Float64Array(Xe),this.z=new Float64Array(Xe+1),this.v=new Int16Array(Xe),this.middle=Math.round(Xe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function M(J,ne,q,ve,Se,Oe,Xe){for(var ut=0;ut<ne;ut++){for(var yt=0;yt<q;yt++)ve[yt]=J[yt*ne+ut];for(P(ve,Se,Oe,Xe,q),yt=0;yt<q;yt++)J[yt*ne+ut]=Se[yt]}for(yt=0;yt<q;yt++){for(ut=0;ut<ne;ut++)ve[ut]=J[yt*ne+ut];for(P(ve,Se,Oe,Xe,ne),ut=0;ut<ne;ut++)J[yt*ne+ut]=Math.sqrt(Se[ut])}}function P(J,ne,q,ve,Se){q[0]=0,ve[0]=-y,ve[1]=+y;for(var Oe=1,Xe=0;Oe<Se;Oe++){for(var ut=(J[Oe]+Oe*Oe-(J[q[Xe]]+q[Xe]*q[Xe]))/(2*Oe-2*q[Xe]);ut<=ve[Xe];)Xe--,ut=(J[Oe]+Oe*Oe-(J[q[Xe]]+q[Xe]*q[Xe]))/(2*Oe-2*q[Xe]);q[++Xe]=Oe,ve[Xe]=ut,ve[Xe+1]=+y}for(Oe=0,Xe=0;Oe<Se;Oe++){for(;ve[Xe+1]<Oe;)Xe++;ne[Oe]=(Oe-q[Xe])*(Oe-q[Xe])+J[q[Xe]]}}T.prototype.draw=function(J){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(J,this.buffer,this.middle);for(var ne=this.ctx.getImageData(0,0,this.size,this.size),q=new Uint8ClampedArray(this.size*this.size),ve=0;ve<this.size*this.size;ve++){var Se=ne.data[4*ve+3]/255;this.gridOuter[ve]=Se===1?0:Se===0?y:Math.pow(Math.max(0,.5-Se),2),this.gridInner[ve]=Se===1?y:Se===0?0:Math.pow(Math.max(0,Se-.5),2)}for(M(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),M(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),ve=0;ve<this.size*this.size;ve++)q[ve]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[ve]-this.gridInner[ve])/this.radius+this.cutoff))));return q},x.default=w;var L=function(J,ne){this.requestManager=J,this.localIdeographFontFamily=ne,this.entries={}};L.prototype.setURL=function(J){this.url=J},L.prototype.getGlyphs=function(J,ne){var q=this,ve=[];for(var Se in J)for(var Oe=0,Xe=J[Se];Oe<Xe.length;Oe+=1)ve.push({stack:Se,id:Xe[Oe]});t.asyncAll(ve,function(ut,yt){var jt=ut.stack,sr=ut.id,pr=q.entries[jt];pr||(pr=q.entries[jt]={glyphs:{},requests:{},ranges:{}});var br=pr.glyphs[sr];if(br===void 0){if(br=q._tinySDF(pr,jt,sr))return pr.glyphs[sr]=br,void yt(null,{stack:jt,id:sr,glyph:br});var Lr=Math.floor(sr/256);if(256*Lr>65535)yt(new Error("glyphs > 65535 not supported"));else if(pr.ranges[Lr])yt(null,{stack:jt,id:sr,glyph:br});else{var Dr=pr.requests[Lr];Dr||(Dr=pr.requests[Lr]=[],L.loadGlyphRange(jt,Lr,q.url,q.requestManager,function(jr,Sr){if(Sr){for(var Ur in Sr)q._doesCharSupportLocalGlyph(+Ur)||(pr.glyphs[+Ur]=Sr[+Ur]);pr.ranges[Lr]=!0}for(var $r=0,cn=Dr;$r<cn.length;$r+=1)(0,cn[$r])(jr,Sr);delete pr.requests[Lr]})),Dr.push(function(jr,Sr){jr?yt(jr):Sr&&yt(null,{stack:jt,id:sr,glyph:Sr[sr]||null})})}}else yt(null,{stack:jt,id:sr,glyph:br})},function(ut,yt){if(ut)ne(ut);else if(yt){for(var jt={},sr=0,pr=yt;sr<pr.length;sr+=1){var br=pr[sr],Lr=br.stack,Dr=br.id,jr=br.glyph;(jt[Lr]||(jt[Lr]={}))[Dr]=jr&&{id:jr.id,bitmap:jr.bitmap.clone(),metrics:jr.metrics}}ne(null,jt)}})},L.prototype._doesCharSupportLocalGlyph=function(J){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](J)||t.isChar["Hangul Syllables"](J)||t.isChar.Hiragana(J)||t.isChar.Katakana(J))},L.prototype._tinySDF=function(J,ne,q){var ve=this.localIdeographFontFamily;if(ve&&this._doesCharSupportLocalGlyph(q)){var Se=J.tinySDF;if(!Se){var Oe="400";/bold/i.test(ne)?Oe="900":/medium/i.test(ne)?Oe="500":/light/i.test(ne)&&(Oe="200"),Se=J.tinySDF=new L.TinySDF(24,3,8,.25,ve,Oe)}return{id:q,bitmap:new t.AlphaImage({width:30,height:30},Se.draw(String.fromCharCode(q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},L.loadGlyphRange=function(J,ne,q,ve,Se){var Oe=256*ne,Xe=Oe+255,ut=ve.transformRequest(ve.normalizeGlyphsURL(q).replace("{fontstack}",J).replace("{range}",Oe+"-"+Xe),t.ResourceType.Glyphs);t.getArrayBuffer(ut,function(yt,jt){if(yt)Se(yt);else if(jt){for(var sr={},pr=0,br=t.parseGlyphPBF(jt);pr<br.length;pr+=1){var Lr=br[pr];sr[Lr.id]=Lr}Se(null,sr)}})},L.TinySDF=x;var I=function(){this.specification=t.styleSpec.light.position};I.prototype.possiblyEvaluate=function(J,ne){return t.sphericalToCartesian(J.expression.evaluate(ne))},I.prototype.interpolate=function(J,ne,q){return{x:t.number(J.x,ne.x,q),y:t.number(J.y,ne.y,q),z:t.number(J.z,ne.z,q)}};var E=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new I,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),k=function(J){function ne(q){J.call(this),this._transitionable=new t.Transitionable(E),this.setLight(q),this._transitioning=this._transitionable.untransitioned()}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getLight=function(){return this._transitionable.serialize()},ne.prototype.setLight=function(q,ve){if(ve===void 0&&(ve={}),!this._validate(t.validateLight,q,ve))for(var Se in q){var Oe=q[Se];t.endsWith(Se,"-transition")?this._transitionable.setTransition(Se.slice(0,-11),Oe):this._transitionable.setValue(Se,Oe)}},ne.prototype.updateTransitions=function(q){this._transitioning=this._transitionable.transitioned(q,this._transitioning)},ne.prototype.hasTransition=function(){return this._transitioning.hasTransition()},ne.prototype.recalculate=function(q){this.properties=this._transitioning.possiblyEvaluate(q)},ne.prototype._validate=function(q,ve,Se){return(!Se||Se.validate!==!1)&&t.emitValidationErrors(this,q.call(t.validateStyle,t.extend({value:ve,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},ne}(t.Evented),C=function(J,ne){this.width=J,this.height=ne,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};C.prototype.getDash=function(J,ne){var q=J.join(",")+String(ne);return this.dashEntry[q]||(this.dashEntry[q]=this.addDash(J,ne)),this.dashEntry[q]},C.prototype.getDashRanges=function(J,ne,q){var ve=[],Se=J.length%2==1?-J[J.length-1]*q:0,Oe=J[0]*q,Xe=!0;ve.push({left:Se,right:Oe,isDash:Xe,zeroLength:J[0]===0});for(var ut=J[0],yt=1;yt<J.length;yt++){var jt=J[yt];ve.push({left:Se=ut*q,right:Oe=(ut+=jt)*q,isDash:Xe=!Xe,zeroLength:jt===0})}return ve},C.prototype.addRoundDash=function(J,ne,q){for(var ve=ne/2,Se=-q;Se<=q;Se++)for(var Oe=this.width*(this.nextRow+q+Se),Xe=0,ut=J[Xe],yt=0;yt<this.width;yt++){yt/ut.right>1&&(ut=J[++Xe]);var jt=Math.abs(yt-ut.left),sr=Math.abs(yt-ut.right),pr=Math.min(jt,sr),br=void 0,Lr=Se/q*(ve+1);if(ut.isDash){var Dr=ve-Math.abs(Lr);br=Math.sqrt(pr*pr+Dr*Dr)}else br=ve-Math.sqrt(pr*pr+Lr*Lr);this.data[Oe+yt]=Math.max(0,Math.min(255,br+128))}},C.prototype.addRegularDash=function(J){for(var ne=J.length-1;ne>=0;--ne){var q=J[ne],ve=J[ne+1];q.zeroLength?J.splice(ne,1):ve&&ve.isDash===q.isDash&&(ve.left=q.left,J.splice(ne,1))}var Se=J[0],Oe=J[J.length-1];Se.isDash===Oe.isDash&&(Se.left=Oe.left-this.width,Oe.right=Se.right+this.width);for(var Xe=this.width*this.nextRow,ut=0,yt=J[ut],jt=0;jt<this.width;jt++){jt/yt.right>1&&(yt=J[++ut]);var sr=Math.abs(jt-yt.left),pr=Math.abs(jt-yt.right),br=Math.min(sr,pr);this.data[Xe+jt]=Math.max(0,Math.min(255,(yt.isDash?br:-br)+128))}},C.prototype.addDash=function(J,ne){var q=ne?7:0,ve=2*q+1;if(this.nextRow+ve>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var Se=0,Oe=0;Oe<J.length;Oe++)Se+=J[Oe];if(Se!==0){var Xe=this.width/Se,ut=this.getDashRanges(J,this.width,Xe);ne?this.addRoundDash(ut,Xe,q):this.addRegularDash(ut)}var yt={y:(this.nextRow+q+.5)/this.height,height:2*q/this.height,width:Se};return this.nextRow+=ve,this.dirty=!0,yt},C.prototype.bind=function(J){var ne=J.gl;this.texture?(ne.bindTexture(ne.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,ne.texSubImage2D(ne.TEXTURE_2D,0,0,0,this.width,this.height,ne.ALPHA,ne.UNSIGNED_BYTE,this.data))):(this.texture=ne.createTexture(),ne.bindTexture(ne.TEXTURE_2D,this.texture),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_S,ne.REPEAT),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_T,ne.REPEAT),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MIN_FILTER,ne.LINEAR),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MAG_FILTER,ne.LINEAR),ne.texImage2D(ne.TEXTURE_2D,0,ne.ALPHA,this.width,this.height,0,ne.ALPHA,ne.UNSIGNED_BYTE,this.data))};var D=function J(ne,q){this.workerPool=ne,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var ve=this.workerPool.acquire(this.id),Se=0;Se<ve.length;Se++){var Oe=new J.Actor(ve[Se],q,this.id);Oe.name="Worker "+Se,this.actors.push(Oe)}};function F(J,ne,q){var ve=function(Se,Oe){if(Se)return q(Se);if(Oe){var Xe=t.pick(t.extend(Oe,J),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Oe.vector_layers&&(Xe.vectorLayers=Oe.vector_layers,Xe.vectorLayerIds=Xe.vectorLayers.map(function(ut){return ut.id})),Xe.tiles=ne.canonicalizeTileset(Xe,J.url),q(null,Xe)}};return J.url?t.getJSON(ne.transformRequest(ne.normalizeSourceURL(J.url),t.ResourceType.Source),ve):t.browser.frame(function(){return ve(null,J)})}D.prototype.broadcast=function(J,ne,q){t.asyncAll(this.actors,function(ve,Se){ve.send(J,ne,Se)},q=q||function(){})},D.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},D.prototype.remove=function(){this.actors.forEach(function(J){J.remove()}),this.actors=[],this.workerPool.release(this.id)},D.Actor=t.Actor;var N=function(J,ne,q){this.bounds=t.LngLatBounds.convert(this.validateBounds(J)),this.minzoom=ne||0,this.maxzoom=q||24};N.prototype.validateBounds=function(J){return Array.isArray(J)&&J.length===4?[Math.max(-180,J[0]),Math.max(-90,J[1]),Math.min(180,J[2]),Math.min(90,J[3])]:[-180,-90,180,90]},N.prototype.contains=function(J){var ne=Math.pow(2,J.z),q=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*ne),ve=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*ne),Se=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*ne),Oe=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*ne);return J.x>=q&&J.x<Se&&J.y>=ve&&J.y<Oe};var G=function(J){function ne(q,ve,Se,Oe){if(J.call(this),this.id=q,this.dispatcher=Se,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(ve,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},ve),this._collectResourceTiming=ve.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Oe)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=F(this._options,this.map._requestManager,function(ve,Se){q._tileJSONRequest=null,q._loaded=!0,ve?q.fire(new t.ErrorEvent(ve)):Se&&(t.extend(q,Se),Se.bounds&&(q.tileBounds=new N(Se.bounds,q.minzoom,q.maxzoom)),t.postTurnstileEvent(Se.tiles,q.map._requestManager._customAccessToken),t.postMapLoadEvent(Se.tiles,q.map._getMapId(),q.map._requestManager._skuToken,q.map._requestManager._customAccessToken),q.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},ne.prototype.loaded=function(){return this._loaded},ne.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},ne.prototype.onAdd=function(q){this.map=q,this.load()},ne.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},ne.prototype.serialize=function(){return t.extend({},this._options)},ne.prototype.loadTile=function(q,ve){var Se=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme)),Oe={request:this.map._requestManager.transformRequest(Se,t.ResourceType.Tile),uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,tileSize:this.tileSize*q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Xe(ut,yt){return delete q.request,q.aborted?ve(null):ut&&ut.status!==404?ve(ut):(yt&&yt.resourceTiming&&(q.resourceTiming=yt.resourceTiming),this.map._refreshExpiredTiles&&yt&&q.setExpiryData(yt),q.loadVectorData(yt,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),ve(null),void(q.reloadCallback&&(this.loadTile(q,q.reloadCallback),q.reloadCallback=null)))}Oe.request.collectResourceTiming=this._collectResourceTiming,q.actor&&q.state!=="expired"?q.state==="loading"?q.reloadCallback=ve:q.request=q.actor.send("reloadTile",Oe,Xe.bind(this)):(q.actor=this.dispatcher.getActor(),q.request=q.actor.send("loadTile",Oe,Xe.bind(this)))},ne.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.actor&&q.actor.send("abortTile",{uid:q.uid,type:this.type,source:this.id},void 0)},ne.prototype.unloadTile=function(q){q.unloadVectorData(),q.actor&&q.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id},void 0)},ne.prototype.hasTransition=function(){return!1},ne}(t.Evented),U=function(J){function ne(q,ve,Se,Oe){J.call(this),this.id=q,this.dispatcher=Se,this.setEventedParent(Oe),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},ve),t.extend(this,t.pick(ve,["url","scheme","tileSize"]))}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=F(this._options,this.map._requestManager,function(ve,Se){q._tileJSONRequest=null,q._loaded=!0,ve?q.fire(new t.ErrorEvent(ve)):Se&&(t.extend(q,Se),Se.bounds&&(q.tileBounds=new N(Se.bounds,q.minzoom,q.maxzoom)),t.postTurnstileEvent(Se.tiles),t.postMapLoadEvent(Se.tiles,q.map._getMapId(),q.map._requestManager._skuToken),q.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},ne.prototype.loaded=function(){return this._loaded},ne.prototype.onAdd=function(q){this.map=q,this.load()},ne.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},ne.prototype.serialize=function(){return t.extend({},this._options)},ne.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},ne.prototype.loadTile=function(q,ve){var Se=this,Oe=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);q.request=t.getImage(this.map._requestManager.transformRequest(Oe,t.ResourceType.Tile),function(Xe,ut){if(delete q.request,q.aborted)q.state="unloaded",ve(null);else if(Xe)q.state="errored",ve(Xe);else if(ut){Se.map._refreshExpiredTiles&&q.setExpiryData(ut),delete ut.cacheControl,delete ut.expires;var yt=Se.map.painter.context,jt=yt.gl;q.texture=Se.map.painter.getTileTexture(ut.width),q.texture?q.texture.update(ut,{useMipmap:!0}):(q.texture=new t.Texture(yt,ut,jt.RGBA,{useMipmap:!0}),q.texture.bind(jt.LINEAR,jt.CLAMP_TO_EDGE,jt.LINEAR_MIPMAP_NEAREST),yt.extTextureFilterAnisotropic&&jt.texParameterf(jt.TEXTURE_2D,yt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,yt.extTextureFilterAnisotropicMax)),q.state="loaded",t.cacheEntryPossiblyAdded(Se.dispatcher),ve(null)}})},ne.prototype.abortTile=function(q,ve){q.request&&(q.request.cancel(),delete q.request),ve()},ne.prototype.unloadTile=function(q,ve){q.texture&&this.map.painter.saveTileTexture(q.texture),ve()},ne.prototype.hasTransition=function(){return!1},ne}(t.Evented),X=function(J){function ne(q,ve,Se,Oe){J.call(this,q,ve,Se,Oe),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},ve),this.encoding=ve.encoding||"mapbox"}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},ne.prototype.loadTile=function(q,ve){var Se=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Oe(Xe,ut){Xe&&(q.state="errored",ve(Xe)),ut&&(q.dem=ut,q.needsHillshadePrepare=!0,q.state="loaded",ve(null))}q.request=t.getImage(this.map._requestManager.transformRequest(Se,t.ResourceType.Tile),function(Xe,ut){if(delete q.request,q.aborted)q.state="unloaded",ve(null);else if(Xe)q.state="errored",ve(Xe);else if(ut){this.map._refreshExpiredTiles&&q.setExpiryData(ut),delete ut.cacheControl,delete ut.expires;var yt=t.window.ImageBitmap&&ut instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?ut:t.browser.getImageData(ut,1),jt={uid:q.uid,coord:q.tileID,source:this.id,rawImageData:yt,encoding:this.encoding};q.actor&&q.state!=="expired"||(q.actor=this.dispatcher.getActor(),q.actor.send("loadDEMTile",jt,Oe.bind(this)))}}.bind(this)),q.neighboringTiles=this._getNeighboringTiles(q.tileID)},ne.prototype._getNeighboringTiles=function(q){var ve=q.canonical,Se=Math.pow(2,ve.z),Oe=(ve.x-1+Se)%Se,Xe=ve.x===0?q.wrap-1:q.wrap,ut=(ve.x+1+Se)%Se,yt=ve.x+1===Se?q.wrap+1:q.wrap,jt={};return jt[new t.OverscaledTileID(q.overscaledZ,Xe,ve.z,Oe,ve.y).key]={backfilled:!1},jt[new t.OverscaledTileID(q.overscaledZ,yt,ve.z,ut,ve.y).key]={backfilled:!1},ve.y>0&&(jt[new t.OverscaledTileID(q.overscaledZ,Xe,ve.z,Oe,ve.y-1).key]={backfilled:!1},jt[new t.OverscaledTileID(q.overscaledZ,q.wrap,ve.z,ve.x,ve.y-1).key]={backfilled:!1},jt[new t.OverscaledTileID(q.overscaledZ,yt,ve.z,ut,ve.y-1).key]={backfilled:!1}),ve.y+1<Se&&(jt[new t.OverscaledTileID(q.overscaledZ,Xe,ve.z,Oe,ve.y+1).key]={backfilled:!1},jt[new t.OverscaledTileID(q.overscaledZ,q.wrap,ve.z,ve.x,ve.y+1).key]={backfilled:!1},jt[new t.OverscaledTileID(q.overscaledZ,yt,ve.z,ut,ve.y+1).key]={backfilled:!1}),jt},ne.prototype.unloadTile=function(q){q.demTexture&&this.map.painter.saveTileTexture(q.demTexture),q.fbo&&(q.fbo.destroy(),delete q.fbo),q.dem&&delete q.dem,delete q.neighboringTiles,q.state="unloaded",q.actor&&q.actor.send("removeDEMTile",{uid:q.uid,source:this.id})},ne}(U),z=function(J){function ne(q,ve,Se,Oe){J.call(this),this.id=q,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=Se.getActor(),this.setEventedParent(Oe),this._data=ve.data,this._options=t.extend({},ve),this._collectResourceTiming=ve.collectResourceTiming,this._resourceTiming=[],ve.maxzoom!==void 0&&(this.maxzoom=ve.maxzoom),ve.type&&(this.type=ve.type),ve.attribution&&(this.attribution=ve.attribution),this.promoteId=ve.promoteId;var Xe=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:ve.cluster||!1,geojsonVtOptions:{buffer:(ve.buffer!==void 0?ve.buffer:128)*Xe,tolerance:(ve.tolerance!==void 0?ve.tolerance:.375)*Xe,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:ve.lineMetrics||!1,generateId:ve.generateId||!1},superclusterOptions:{maxZoom:ve.clusterMaxZoom!==void 0?Math.min(ve.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(ve.clusterRadius||50)*Xe,log:!1,generateId:ve.generateId||!1},clusterProperties:ve.clusterProperties},ve.workerOptions)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.load=function(){var q=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ve){if(ve)q.fire(new t.ErrorEvent(ve));else{var Se={dataType:"source",sourceDataType:"metadata"};q._collectResourceTiming&&q._resourceTiming&&q._resourceTiming.length>0&&(Se.resourceTiming=q._resourceTiming,q._resourceTiming=[]),q.fire(new t.Event("data",Se))}})},ne.prototype.onAdd=function(q){this.map=q,this.load()},ne.prototype.setData=function(q){var ve=this;return this._data=q,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Se){if(Se)ve.fire(new t.ErrorEvent(Se));else{var Oe={dataType:"source",sourceDataType:"content"};ve._collectResourceTiming&&ve._resourceTiming&&ve._resourceTiming.length>0&&(Oe.resourceTiming=ve._resourceTiming,ve._resourceTiming=[]),ve.fire(new t.Event("data",Oe))}}),this},ne.prototype.getClusterExpansionZoom=function(q,ve){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:q,source:this.id},ve),this},ne.prototype.getClusterChildren=function(q,ve){return this.actor.send("geojson.getClusterChildren",{clusterId:q,source:this.id},ve),this},ne.prototype.getClusterLeaves=function(q,ve,Se,Oe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:q,limit:ve,offset:Se},Oe),this},ne.prototype._updateWorkerData=function(q){var ve=this;this._loaded=!1;var Se=t.extend({},this.workerOptions),Oe=this._data;typeof Oe=="string"?(Se.request=this.map._requestManager.transformRequest(t.browser.resolveURL(Oe),t.ResourceType.Source),Se.request.collectResourceTiming=this._collectResourceTiming):Se.data=JSON.stringify(Oe),this.actor.send(this.type+".loadData",Se,function(Xe,ut){ve._removed||ut&&ut.abandoned||(ve._loaded=!0,ut&&ut.resourceTiming&&ut.resourceTiming[ve.id]&&(ve._resourceTiming=ut.resourceTiming[ve.id].slice(0)),ve.actor.send(ve.type+".coalesce",{source:Se.source},null),q(Xe))})},ne.prototype.loaded=function(){return this._loaded},ne.prototype.loadTile=function(q,ve){var Se=this,Oe=q.actor?"reloadTile":"loadTile";q.actor=this.actor,q.request=this.actor.send(Oe,{type:this.type,uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Xe,ut){return delete q.request,q.unloadVectorData(),q.aborted?ve(null):Xe?ve(Xe):(q.loadVectorData(ut,Se.map.painter,Oe==="reloadTile"),ve(null))})},ne.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.aborted=!0},ne.prototype.unloadTile=function(q){q.unloadVectorData(),this.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id})},ne.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},ne.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},ne.prototype.hasTransition=function(){return!1},ne}(t.Evented),B=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),j=function(J){function ne(q,ve,Se,Oe){J.call(this),this.id=q,this.dispatcher=Se,this.coordinates=ve.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Oe),this.options=ve}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.load=function(q,ve){var Se=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(Oe,Xe){Se._loaded=!0,Oe?Se.fire(new t.ErrorEvent(Oe)):Xe&&(Se.image=Xe,q&&(Se.coordinates=q),ve&&ve(),Se._finishLoading())})},ne.prototype.loaded=function(){return this._loaded},ne.prototype.updateImage=function(q){var ve=this;return this.image&&q.url?(this.options.url=q.url,this.load(q.coordinates,function(){ve.texture=null}),this):this},ne.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},ne.prototype.onAdd=function(q){this.map=q,this.load()},ne.prototype.setCoordinates=function(q){var ve=this;this.coordinates=q;var Se=q.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(Xe){for(var ut=1/0,yt=1/0,jt=-1/0,sr=-1/0,pr=0,br=Xe;pr<br.length;pr+=1){var Lr=br[pr];ut=Math.min(ut,Lr.x),yt=Math.min(yt,Lr.y),jt=Math.max(jt,Lr.x),sr=Math.max(sr,Lr.y)}var Dr=Math.max(jt-ut,sr-yt),jr=Math.max(0,Math.floor(-Math.log(Dr)/Math.LN2)),Sr=Math.pow(2,jr);return new t.CanonicalTileID(jr,Math.floor((ut+jt)/2*Sr),Math.floor((yt+sr)/2*Sr))}(Se),this.minzoom=this.maxzoom=this.tileID.z;var Oe=Se.map(function(Xe){return ve.tileID.getTilePoint(Xe)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(Oe[0].x,Oe[0].y,0,0),this._boundsArray.emplaceBack(Oe[1].x,Oe[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(Oe[3].x,Oe[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(Oe[2].x,Oe[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},ne.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var q=this.map.painter.context,ve=q.gl;for(var Se in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(q,this.image,ve.RGBA),this.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)),this.tiles){var Oe=this.tiles[Se];Oe.state!=="loaded"&&(Oe.state="loaded",Oe.texture=this.texture)}}},ne.prototype.loadTile=function(q,ve){this.tileID&&this.tileID.equals(q.tileID.canonical)?(this.tiles[String(q.tileID.wrap)]=q,q.buckets={},ve(null)):(q.state="errored",ve(null))},ne.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},ne.prototype.hasTransition=function(){return!1},ne}(t.Evented),V=function(J){function ne(q,ve,Se,Oe){J.call(this,q,ve,Se,Oe),this.roundZoom=!0,this.type="video",this.options=ve}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.load=function(){var q=this;this._loaded=!1;var ve=this.options;this.urls=[];for(var Se=0,Oe=ve.urls;Se<Oe.length;Se+=1)this.urls.push(this.map._requestManager.transformRequest(Oe[Se],t.ResourceType.Source).url);t.getVideo(this.urls,function(Xe,ut){q._loaded=!0,Xe?q.fire(new t.ErrorEvent(Xe)):ut&&(q.video=ut,q.video.loop=!0,q.video.addEventListener("playing",function(){q.map.triggerRepaint()}),q.map&&q.video.play(),q._finishLoading())})},ne.prototype.pause=function(){this.video&&this.video.pause()},ne.prototype.play=function(){this.video&&this.video.play()},ne.prototype.seek=function(q){if(this.video){var ve=this.video.seekable;q<ve.start(0)||q>ve.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ve.start(0)+" and "+ve.end(0)+"-second mark."))):this.video.currentTime=q}},ne.prototype.getVideo=function(){return this.video},ne.prototype.onAdd=function(q){this.map||(this.map=q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},ne.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var q=this.map.painter.context,ve=q.gl;for(var Se in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),ve.texSubImage2D(ve.TEXTURE_2D,0,0,0,ve.RGBA,ve.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(q,this.video,ve.RGBA),this.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)),this.tiles){var Oe=this.tiles[Se];Oe.state!=="loaded"&&(Oe.state="loaded",Oe.texture=this.texture)}}},ne.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},ne.prototype.hasTransition=function(){return this.video&&!this.video.paused},ne}(j),K=function(J){function ne(q,ve,Se,Oe){J.call(this,q,ve,Se,Oe),ve.coordinates?Array.isArray(ve.coordinates)&&ve.coordinates.length===4&&!ve.coordinates.some(function(Xe){return!Array.isArray(Xe)||Xe.length!==2||Xe.some(function(ut){return typeof ut!="number"})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+q,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+q,null,'missing required property "coordinates"'))),ve.animate&&typeof ve.animate!="boolean"&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+q,null,'optional "animate" property must be a boolean value'))),ve.canvas?typeof ve.canvas=="string"||ve.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+q,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+q,null,'missing required property "canvas"'))),this.options=ve,this.animate=ve.animate===void 0||ve.animate}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},ne.prototype.getCanvas=function(){return this.canvas},ne.prototype.onAdd=function(q){this.map=q,this.load(),this.canvas&&this.animate&&this.play()},ne.prototype.onRemove=function(){this.pause()},ne.prototype.prepare=function(){var q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,q=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var ve=this.map.painter.context,Se=ve.gl;for(var Oe in this.boundsBuffer||(this.boundsBuffer=ve.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(ve,this.canvas,Se.RGBA,{premultiply:!0}),this.tiles){var Xe=this.tiles[Oe];Xe.state!=="loaded"&&(Xe.state="loaded",Xe.texture=this.texture)}}},ne.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},ne.prototype.hasTransition=function(){return this._playing},ne.prototype._hasInvalidDimensions=function(){for(var q=0,ve=[this.canvas.width,this.canvas.height];q<ve.length;q+=1){var Se=ve[q];if(isNaN(Se)||Se<=0)return!0}return!1},ne}(j),te={vector:G,raster:U,"raster-dem":X,geojson:z,video:V,image:j,canvas:K};function $(J,ne){var q=t.identity([]);return t.translate(q,q,[1,1,0]),t.scale(q,q,[.5*J.width,.5*J.height,1]),t.multiply(q,q,J.calculatePosMatrix(ne.toUnwrapped()))}function ie(J,ne,q,ve,Se,Oe){var Xe=function(jr,Sr,Ur){if(jr)for(var $r=0,cn=jr;$r<cn.length;$r+=1){var In=Sr[cn[$r]];if(In&&In.source===Ur&&In.type==="fill-extrusion")return!0}else for(var An in Sr){var Dn=Sr[An];if(Dn.source===Ur&&Dn.type==="fill-extrusion")return!0}return!1}(Se&&Se.layers,ne,J.id),ut=Oe.maxPitchScaleFactor(),yt=J.tilesIn(ve,ut,Xe);yt.sort(se);for(var jt=[],sr=0,pr=yt;sr<pr.length;sr+=1){var br=pr[sr];jt.push({wrappedTileID:br.tileID.wrapped().key,queryResults:br.tile.queryRenderedFeatures(ne,q,J._state,br.queryGeometry,br.cameraQueryGeometry,br.scale,Se,Oe,ut,$(J.transform,br.tileID))})}var Lr=function(jr){for(var Sr={},Ur={},$r=0,cn=jr;$r<cn.length;$r+=1){var In=cn[$r],An=In.queryResults,Dn=In.wrappedTileID,Jn=Ur[Dn]=Ur[Dn]||{};for(var ha in An)for(var la=An[ha],wa=Jn[ha]=Jn[ha]||{},Ea=Sr[ha]=Sr[ha]||[],ii=0,ti=la;ii<ti.length;ii+=1){var Oi=ti[ii];wa[Oi.featureIndex]||(wa[Oi.featureIndex]=!0,Ea.push(Oi))}}return Sr}(jt);for(var Dr in Lr)Lr[Dr].forEach(function(jr){var Sr=jr.feature,Ur=J.getFeatureState(Sr.layer["source-layer"],Sr.id);Sr.source=Sr.layer.source,Sr.layer["source-layer"]&&(Sr.sourceLayer=Sr.layer["source-layer"]),Sr.state=Ur});return Lr}function se(J,ne){var q=J.tileID,ve=ne.tileID;return q.overscaledZ-ve.overscaledZ||q.canonical.y-ve.canonical.y||q.wrap-ve.wrap||q.canonical.x-ve.canonical.x}var Q=function(J,ne){this.max=J,this.onRemove=ne,this.reset()};Q.prototype.reset=function(){for(var J in this.data)for(var ne=0,q=this.data[J];ne<q.length;ne+=1){var ve=q[ne];ve.timeout&&clearTimeout(ve.timeout),this.onRemove(ve.value)}return this.data={},this.order=[],this},Q.prototype.add=function(J,ne,q){var ve=this,Se=J.wrapped().key;this.data[Se]===void 0&&(this.data[Se]=[]);var Oe={value:ne,timeout:void 0};if(q!==void 0&&(Oe.timeout=setTimeout(function(){ve.remove(J,Oe)},q)),this.data[Se].push(Oe),this.order.push(Se),this.order.length>this.max){var Xe=this._getAndRemoveByKey(this.order[0]);Xe&&this.onRemove(Xe)}return this},Q.prototype.has=function(J){return J.wrapped().key in this.data},Q.prototype.getAndRemove=function(J){return this.has(J)?this._getAndRemoveByKey(J.wrapped().key):null},Q.prototype._getAndRemoveByKey=function(J){var ne=this.data[J].shift();return ne.timeout&&clearTimeout(ne.timeout),this.data[J].length===0&&delete this.data[J],this.order.splice(this.order.indexOf(J),1),ne.value},Q.prototype.getByKey=function(J){var ne=this.data[J];return ne?ne[0].value:null},Q.prototype.get=function(J){return this.has(J)?this.data[J.wrapped().key][0].value:null},Q.prototype.remove=function(J,ne){if(!this.has(J))return this;var q=J.wrapped().key,ve=ne===void 0?0:this.data[q].indexOf(ne),Se=this.data[q][ve];return this.data[q].splice(ve,1),Se.timeout&&clearTimeout(Se.timeout),this.data[q].length===0&&delete this.data[q],this.onRemove(Se.value),this.order.splice(this.order.indexOf(q),1),this},Q.prototype.setMaxSize=function(J){for(this.max=J;this.order.length>this.max;){var ne=this._getAndRemoveByKey(this.order[0]);ne&&this.onRemove(ne)}return this},Q.prototype.filter=function(J){var ne=[];for(var q in this.data)for(var ve=0,Se=this.data[q];ve<Se.length;ve+=1){var Oe=Se[ve];J(Oe.value)||ne.push(Oe)}for(var Xe=0,ut=ne;Xe<ut.length;Xe+=1){var yt=ut[Xe];this.remove(yt.value.tileID,yt)}};var H=function(J,ne,q){this.context=J;var ve=J.gl;this.buffer=ve.createBuffer(),this.dynamicDraw=Boolean(q),this.context.unbindVAO(),J.bindElementBuffer.set(this.buffer),ve.bufferData(ve.ELEMENT_ARRAY_BUFFER,ne.arrayBuffer,this.dynamicDraw?ve.DYNAMIC_DRAW:ve.STATIC_DRAW),this.dynamicDraw||delete ne.arrayBuffer};H.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},H.prototype.updateData=function(J){var ne=this.context.gl;this.context.unbindVAO(),this.bind(),ne.bufferSubData(ne.ELEMENT_ARRAY_BUFFER,0,J.arrayBuffer)},H.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var oe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},re=function(J,ne,q,ve){this.length=ne.length,this.attributes=q,this.itemSize=ne.bytesPerElement,this.dynamicDraw=ve,this.context=J;var Se=J.gl;this.buffer=Se.createBuffer(),J.bindVertexBuffer.set(this.buffer),Se.bufferData(Se.ARRAY_BUFFER,ne.arrayBuffer,this.dynamicDraw?Se.DYNAMIC_DRAW:Se.STATIC_DRAW),this.dynamicDraw||delete ne.arrayBuffer};re.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},re.prototype.updateData=function(J){var ne=this.context.gl;this.bind(),ne.bufferSubData(ne.ARRAY_BUFFER,0,J.arrayBuffer)},re.prototype.enableAttributes=function(J,ne){for(var q=0;q<this.attributes.length;q++){var ve=ne.attributes[this.attributes[q].name];ve!==void 0&&J.enableVertexAttribArray(ve)}},re.prototype.setVertexAttribPointers=function(J,ne,q){for(var ve=0;ve<this.attributes.length;ve++){var Se=this.attributes[ve],Oe=ne.attributes[Se.name];Oe!==void 0&&J.vertexAttribPointer(Oe,Se.components,J[oe[Se.type]],!1,this.itemSize,Se.offset+this.itemSize*(q||0))}},re.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ee=function(J){this.gl=J.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ee.prototype.get=function(){return this.current},ee.prototype.set=function(J){},ee.prototype.getDefault=function(){return this.default},ee.prototype.setDefault=function(){this.set(this.default)};var ae=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return t.Color.transparent},ne.prototype.set=function(q){var ve=this.current;(q.r!==ve.r||q.g!==ve.g||q.b!==ve.b||q.a!==ve.a||this.dirty)&&(this.gl.clearColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},ne}(ee),fe=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return 1},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearDepth(q),this.current=q,this.dirty=!1)},ne}(ee),de=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return 0},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearStencil(q),this.current=q,this.dirty=!1)},ne}(ee),pe=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return[!0,!0,!0,!0]},ne.prototype.set=function(q){var ve=this.current;(q[0]!==ve[0]||q[1]!==ve[1]||q[2]!==ve[2]||q[3]!==ve[3]||this.dirty)&&(this.gl.colorMask(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},ne}(ee),W=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return!0},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthMask(q),this.current=q,this.dirty=!1)},ne}(ee),ue=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return 255},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.stencilMask(q),this.current=q,this.dirty=!1)},ne}(ee),me=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},ne.prototype.set=function(q){var ve=this.current;(q.func!==ve.func||q.ref!==ve.ref||q.mask!==ve.mask||this.dirty)&&(this.gl.stencilFunc(q.func,q.ref,q.mask),this.current=q,this.dirty=!1)},ne}(ee),be=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){var q=this.gl;return[q.KEEP,q.KEEP,q.KEEP]},ne.prototype.set=function(q){var ve=this.current;(q[0]!==ve[0]||q[1]!==ve[1]||q[2]!==ve[2]||this.dirty)&&(this.gl.stencilOp(q[0],q[1],q[2]),this.current=q,this.dirty=!1)},ne}(ee),Me=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return!1},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;q?ve.enable(ve.STENCIL_TEST):ve.disable(ve.STENCIL_TEST),this.current=q,this.dirty=!1}},ne}(ee),Pe=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return[0,1]},ne.prototype.set=function(q){var ve=this.current;(q[0]!==ve[0]||q[1]!==ve[1]||this.dirty)&&(this.gl.depthRange(q[0],q[1]),this.current=q,this.dirty=!1)},ne}(ee),Ge=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return!1},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;q?ve.enable(ve.DEPTH_TEST):ve.disable(ve.DEPTH_TEST),this.current=q,this.dirty=!1}},ne}(ee),ze=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return this.gl.LESS},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthFunc(q),this.current=q,this.dirty=!1)},ne}(ee),Qe=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return!1},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;q?ve.enable(ve.BLEND):ve.disable(ve.BLEND),this.current=q,this.dirty=!1}},ne}(ee),tt=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){var q=this.gl;return[q.ONE,q.ZERO]},ne.prototype.set=function(q){var ve=this.current;(q[0]!==ve[0]||q[1]!==ve[1]||this.dirty)&&(this.gl.blendFunc(q[0],q[1]),this.current=q,this.dirty=!1)},ne}(ee),Ce=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return t.Color.transparent},ne.prototype.set=function(q){var ve=this.current;(q.r!==ve.r||q.g!==ve.g||q.b!==ve.b||q.a!==ve.a||this.dirty)&&(this.gl.blendColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},ne}(ee),Ae=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return this.gl.FUNC_ADD},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.blendEquation(q),this.current=q,this.dirty=!1)},ne}(ee),Be=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return!1},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;q?ve.enable(ve.CULL_FACE):ve.disable(ve.CULL_FACE),this.current=q,this.dirty=!1}},ne}(ee),qe=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return this.gl.BACK},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.cullFace(q),this.current=q,this.dirty=!1)},ne}(ee),Tt=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return this.gl.CCW},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.frontFace(q),this.current=q,this.dirty=!1)},ne}(ee),At=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.useProgram(q),this.current=q,this.dirty=!1)},ne}(ee),Ne=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return this.gl.TEXTURE0},ne.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.activeTexture(q),this.current=q,this.dirty=!1)},ne}(ee),ct=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){var q=this.gl;return[0,0,q.drawingBufferWidth,q.drawingBufferHeight]},ne.prototype.set=function(q){var ve=this.current;(q[0]!==ve[0]||q[1]!==ve[1]||q[2]!==ve[2]||q[3]!==ve[3]||this.dirty)&&(this.gl.viewport(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},ne}(ee),Mt=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;ve.bindFramebuffer(ve.FRAMEBUFFER,q),this.current=q,this.dirty=!1}},ne}(ee),Wt=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;ve.bindRenderbuffer(ve.RENDERBUFFER,q),this.current=q,this.dirty=!1}},ne}(ee),qt=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;ve.bindTexture(ve.TEXTURE_2D,q),this.current=q,this.dirty=!1}},ne}(ee),zt=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;ve.bindBuffer(ve.ARRAY_BUFFER,q),this.current=q,this.dirty=!1}},ne}(ee),$t=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne.prototype.set=function(q){var ve=this.gl;ve.bindBuffer(ve.ELEMENT_ARRAY_BUFFER,q),this.current=q,this.dirty=!1},ne}(ee),rr=function(J){function ne(q){J.call(this,q),this.vao=q.extVertexArrayObject}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne.prototype.set=function(q){this.vao&&(q!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(q),this.current=q,this.dirty=!1)},ne}(ee),Lt=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return 4},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;ve.pixelStorei(ve.UNPACK_ALIGNMENT,q),this.current=q,this.dirty=!1}},ne}(ee),Ct=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return!1},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q),this.current=q,this.dirty=!1}},ne}(ee),dt=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return!1},ne.prototype.set=function(q){if(q!==this.current||this.dirty){var ve=this.gl;ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,q),this.current=q,this.dirty=!1}},ne}(ee),lt=function(J){function ne(q,ve){J.call(this,q),this.context=q,this.parent=ve}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getDefault=function(){return null},ne}(ee),Te=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.setDirty=function(){this.dirty=!0},ne.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ve=this.gl;ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_2D,q,0),this.current=q,this.dirty=!1}},ne}(lt),Le=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ve=this.gl;ve.framebufferRenderbuffer(ve.FRAMEBUFFER,ve.DEPTH_ATTACHMENT,ve.RENDERBUFFER,q),this.current=q,this.dirty=!1}},ne}(lt),Ue=function(J,ne,q,ve){this.context=J,this.width=ne,this.height=q;var Se=this.framebuffer=J.gl.createFramebuffer();this.colorAttachment=new Te(J,Se),ve&&(this.depthAttachment=new Le(J,Se))};Ue.prototype.destroy=function(){var J=this.context.gl,ne=this.colorAttachment.get();if(ne&&J.deleteTexture(ne),this.depthAttachment){var q=this.depthAttachment.get();q&&J.deleteRenderbuffer(q)}J.deleteFramebuffer(this.framebuffer)};var et=function(J,ne,q){this.func=J,this.mask=ne,this.range=q};et.ReadOnly=!1,et.ReadWrite=!0,et.disabled=new et(519,et.ReadOnly,[0,1]);var ke=function(J,ne,q,ve,Se,Oe){this.test=J,this.ref=ne,this.mask=q,this.fail=ve,this.depthFail=Se,this.pass=Oe};ke.disabled=new ke({func:519,mask:0},0,0,7680,7680,7680);var Ie=function(J,ne,q){this.blendFunction=J,this.blendColor=ne,this.mask=q};Ie.disabled=new Ie(Ie.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Ie.unblended=new Ie(Ie.Replace,t.Color.transparent,[!0,!0,!0,!0]),Ie.alphaBlended=new Ie([1,771],t.Color.transparent,[!0,!0,!0,!0]);var He=function(J,ne,q){this.enable=J,this.mode=ne,this.frontFace=q};He.disabled=new He(!1,1029,2305),He.backCCW=new He(!0,1029,2305);var Ye=function(J){this.gl=J,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ae(this),this.clearDepth=new fe(this),this.clearStencil=new de(this),this.colorMask=new pe(this),this.depthMask=new W(this),this.stencilMask=new ue(this),this.stencilFunc=new me(this),this.stencilOp=new be(this),this.stencilTest=new Me(this),this.depthRange=new Pe(this),this.depthTest=new Ge(this),this.depthFunc=new ze(this),this.blend=new Qe(this),this.blendFunc=new tt(this),this.blendColor=new Ce(this),this.blendEquation=new Ae(this),this.cullFace=new Be(this),this.cullFaceSide=new qe(this),this.frontFace=new Tt(this),this.program=new At(this),this.activeTexture=new Ne(this),this.viewport=new ct(this),this.bindFramebuffer=new Mt(this),this.bindRenderbuffer=new Wt(this),this.bindTexture=new qt(this),this.bindVertexBuffer=new zt(this),this.bindElementBuffer=new $t(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new rr(this),this.pixelStoreUnpack=new Lt(this),this.pixelStoreUnpackPremultiplyAlpha=new Ct(this),this.pixelStoreUnpackFlipY=new dt(this),this.extTextureFilterAnisotropic=J.getExtension("EXT_texture_filter_anisotropic")||J.getExtension("MOZ_EXT_texture_filter_anisotropic")||J.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=J.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=J.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(J.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=J.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=J.getExtension("EXT_disjoint_timer_query")};Ye.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ye.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ye.prototype.createIndexBuffer=function(J,ne){return new H(this,J,ne)},Ye.prototype.createVertexBuffer=function(J,ne,q){return new re(this,J,ne,q)},Ye.prototype.createRenderbuffer=function(J,ne,q){var ve=this.gl,Se=ve.createRenderbuffer();return this.bindRenderbuffer.set(Se),ve.renderbufferStorage(ve.RENDERBUFFER,J,ne,q),this.bindRenderbuffer.set(null),Se},Ye.prototype.createFramebuffer=function(J,ne,q){return new Ue(this,J,ne,q)},Ye.prototype.clear=function(J){var ne=J.color,q=J.depth,ve=this.gl,Se=0;ne&&(Se|=ve.COLOR_BUFFER_BIT,this.clearColor.set(ne),this.colorMask.set([!0,!0,!0,!0])),q!==void 0&&(Se|=ve.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(q),this.depthMask.set(!0)),ve.clear(Se)},Ye.prototype.setCullFace=function(J){J.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(J.mode),this.frontFace.set(J.frontFace))},Ye.prototype.setDepthMode=function(J){J.func!==this.gl.ALWAYS||J.mask?(this.depthTest.set(!0),this.depthFunc.set(J.func),this.depthMask.set(J.mask),this.depthRange.set(J.range)):this.depthTest.set(!1)},Ye.prototype.setStencilMode=function(J){J.test.func!==this.gl.ALWAYS||J.mask?(this.stencilTest.set(!0),this.stencilMask.set(J.mask),this.stencilOp.set([J.fail,J.depthFail,J.pass]),this.stencilFunc.set({func:J.test.func,ref:J.ref,mask:J.test.mask})):this.stencilTest.set(!1)},Ye.prototype.setColorMode=function(J){t.deepEqual(J.blendFunction,Ie.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(J.blendFunction),this.blendColor.set(J.blendColor)),this.colorMask.set(J.mask)},Ye.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ft=function(J){function ne(q,ve,Se){var Oe=this;J.call(this),this.id=q,this.dispatcher=Se,this.on("data",function(Xe){Xe.dataType==="source"&&Xe.sourceDataType==="metadata"&&(Oe._sourceLoaded=!0),Oe._sourceLoaded&&!Oe._paused&&Xe.dataType==="source"&&Xe.sourceDataType==="content"&&(Oe.reload(),Oe.transform&&Oe.update(Oe.transform))}),this.on("error",function(){Oe._sourceErrored=!0}),this._source=function(Xe,ut,yt,jt){var sr=new te[ut.type](Xe,ut,yt,jt);if(sr.id!==Xe)throw new Error("Expected Source id to be "+Xe+" instead of "+sr.id);return t.bindAll(["load","abort","unload","serialize","prepare"],sr),sr}(q,ve,Se,this),this._tiles={},this._cache=new Q(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.onAdd=function(q){this.map=q,this._maxTileCacheSize=q?q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(q)},ne.prototype.onRemove=function(q){this._source&&this._source.onRemove&&this._source.onRemove(q)},ne.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var q in this._tiles){var ve=this._tiles[q];if(ve.state!=="loaded"&&ve.state!=="errored")return!1}return!0},ne.prototype.getSource=function(){return this._source},ne.prototype.pause=function(){this._paused=!0},ne.prototype.resume=function(){if(this._paused){var q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,q&&this.reload(),this.transform&&this.update(this.transform)}},ne.prototype._loadTile=function(q,ve){return this._source.loadTile(q,ve)},ne.prototype._unloadTile=function(q){if(this._source.unloadTile)return this._source.unloadTile(q,function(){})},ne.prototype._abortTile=function(q){if(this._source.abortTile)return this._source.abortTile(q,function(){})},ne.prototype.serialize=function(){return this._source.serialize()},ne.prototype.prepare=function(q){for(var ve in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var Se=this._tiles[ve];Se.upload(q),Se.prepare(this.map.style.imageManager)}},ne.prototype.getIds=function(){return t.values(this._tiles).map(function(q){return q.tileID}).sort(it).map(function(q){return q.key})},ne.prototype.getRenderableIds=function(q){var ve=this,Se=[];for(var Oe in this._tiles)this._isIdRenderable(Oe,q)&&Se.push(this._tiles[Oe]);return q?Se.sort(function(Xe,ut){var yt=Xe.tileID,jt=ut.tileID,sr=new t.Point(yt.canonical.x,yt.canonical.y)._rotate(ve.transform.angle),pr=new t.Point(jt.canonical.x,jt.canonical.y)._rotate(ve.transform.angle);return yt.overscaledZ-jt.overscaledZ||pr.y-sr.y||pr.x-sr.x}).map(function(Xe){return Xe.tileID.key}):Se.map(function(Xe){return Xe.tileID}).sort(it).map(function(Xe){return Xe.key})},ne.prototype.hasRenderableParent=function(q){var ve=this.findLoadedParent(q,0);return!!ve&&this._isIdRenderable(ve.tileID.key)},ne.prototype._isIdRenderable=function(q,ve){return this._tiles[q]&&this._tiles[q].hasData()&&!this._coveredTiles[q]&&(ve||!this._tiles[q].holdingForFade())},ne.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var q in this._cache.reset(),this._tiles)this._tiles[q].state!=="errored"&&this._reloadTile(q,"reloading")},ne.prototype._reloadTile=function(q,ve){var Se=this._tiles[q];Se&&(Se.state!=="loading"&&(Se.state=ve),this._loadTile(Se,this._tileLoaded.bind(this,Se,q,ve)))},ne.prototype._tileLoaded=function(q,ve,Se,Oe){if(Oe)return q.state="errored",void(Oe.status!==404?this._source.fire(new t.ErrorEvent(Oe,{tile:q})):this.update(this.transform));q.timeAdded=t.browser.now(),Se==="expired"&&(q.refreshedUponExpiration=!0),this._setTileReloadTimer(ve,q),this.getSource().type==="raster-dem"&&q.dem&&this._backfillDEM(q),this._state.initializeTileState(q,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:q,coord:q.tileID}))},ne.prototype._backfillDEM=function(q){for(var ve=this.getRenderableIds(),Se=0;Se<ve.length;Se++){var Oe=ve[Se];if(q.neighboringTiles&&q.neighboringTiles[Oe]){var Xe=this.getTileByID(Oe);ut(q,Xe),ut(Xe,q)}}function ut(yt,jt){yt.needsHillshadePrepare=!0;var sr=jt.tileID.canonical.x-yt.tileID.canonical.x,pr=jt.tileID.canonical.y-yt.tileID.canonical.y,br=Math.pow(2,yt.tileID.canonical.z),Lr=jt.tileID.key;sr===0&&pr===0||Math.abs(pr)>1||(Math.abs(sr)>1&&(Math.abs(sr+br)===1?sr+=br:Math.abs(sr-br)===1&&(sr-=br)),jt.dem&&yt.dem&&(yt.dem.backfillBorder(jt.dem,sr,pr),yt.neighboringTiles&&yt.neighboringTiles[Lr]&&(yt.neighboringTiles[Lr].backfilled=!0)))}},ne.prototype.getTile=function(q){return this.getTileByID(q.key)},ne.prototype.getTileByID=function(q){return this._tiles[q]},ne.prototype._retainLoadedChildren=function(q,ve,Se,Oe){for(var Xe in this._tiles){var ut=this._tiles[Xe];if(!(Oe[Xe]||!ut.hasData()||ut.tileID.overscaledZ<=ve||ut.tileID.overscaledZ>Se)){for(var yt=ut.tileID;ut&&ut.tileID.overscaledZ>ve+1;){var jt=ut.tileID.scaledTo(ut.tileID.overscaledZ-1);(ut=this._tiles[jt.key])&&ut.hasData()&&(yt=jt)}for(var sr=yt;sr.overscaledZ>ve;)if(q[(sr=sr.scaledTo(sr.overscaledZ-1)).key]){Oe[yt.key]=yt;break}}}},ne.prototype.findLoadedParent=function(q,ve){if(q.key in this._loadedParentTiles){var Se=this._loadedParentTiles[q.key];return Se&&Se.tileID.overscaledZ>=ve?Se:null}for(var Oe=q.overscaledZ-1;Oe>=ve;Oe--){var Xe=q.scaledTo(Oe),ut=this._getLoadedTile(Xe);if(ut)return ut}},ne.prototype._getLoadedTile=function(q){var ve=this._tiles[q.key];return ve&&ve.hasData()?ve:this._cache.getByKey(q.wrapped().key)},ne.prototype.updateCacheSize=function(q){var ve=Math.ceil(q.width/this._source.tileSize)+1,Se=Math.ceil(q.height/this._source.tileSize)+1,Oe=Math.floor(ve*Se*5),Xe=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Oe):Oe;this._cache.setMaxSize(Xe)},ne.prototype.handleWrapJump=function(q){var ve=Math.round((q-(this._prevLng===void 0?q:this._prevLng))/360);if(this._prevLng=q,ve){var Se={};for(var Oe in this._tiles){var Xe=this._tiles[Oe];Xe.tileID=Xe.tileID.unwrapTo(Xe.tileID.wrap+ve),Se[Xe.tileID.key]=Xe}for(var ut in this._tiles=Se,this._timers)clearTimeout(this._timers[ut]),delete this._timers[ut];for(var yt in this._tiles)this._setTileReloadTimer(yt,this._tiles[yt])}},ne.prototype.update=function(q){var ve=this;if(this.transform=q,this._sourceLoaded&&!this._paused){var Se;this.updateCacheSize(q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?Se=q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Jn){return new t.OverscaledTileID(Jn.canonical.z,Jn.wrap,Jn.canonical.z,Jn.canonical.x,Jn.canonical.y)}):(Se=q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Se=Se.filter(function(Jn){return ve._source.hasTile(Jn)}))):Se=[];var Oe=q.coveringZoomLevel(this._source),Xe=Math.max(Oe-ne.maxOverzooming,this._source.minzoom),ut=Math.max(Oe+ne.maxUnderzooming,this._source.minzoom),yt=this._updateRetainedTiles(Se,Oe);if(je(this._source.type)){for(var jt={},sr={},pr=0,br=Object.keys(yt);pr<br.length;pr+=1){var Lr=br[pr],Dr=yt[Lr],jr=this._tiles[Lr];if(jr&&!(jr.fadeEndTime&&jr.fadeEndTime<=t.browser.now())){var Sr=this.findLoadedParent(Dr,Xe);Sr&&(this._addTile(Sr.tileID),jt[Sr.tileID.key]=Sr.tileID),sr[Lr]=Dr}}for(var Ur in this._retainLoadedChildren(sr,Oe,ut,yt),jt)yt[Ur]||(this._coveredTiles[Ur]=!0,yt[Ur]=jt[Ur])}for(var $r in yt)this._tiles[$r].clearFadeHold();for(var cn=0,In=t.keysDifference(this._tiles,yt);cn<In.length;cn+=1){var An=In[cn],Dn=this._tiles[An];Dn.hasSymbolBuckets&&!Dn.holdingForFade()?Dn.setHoldDuration(this.map._fadeDuration):Dn.hasSymbolBuckets&&!Dn.symbolFadeFinished()||this._removeTile(An)}this._updateLoadedParentTileCache()}},ne.prototype.releaseSymbolFadeTiles=function(){for(var q in this._tiles)this._tiles[q].holdingForFade()&&this._removeTile(q)},ne.prototype._updateRetainedTiles=function(q,ve){for(var Se={},Oe={},Xe=Math.max(ve-ne.maxOverzooming,this._source.minzoom),ut=Math.max(ve+ne.maxUnderzooming,this._source.minzoom),yt={},jt=0,sr=q;jt<sr.length;jt+=1){var pr=sr[jt],br=this._addTile(pr);Se[pr.key]=pr,br.hasData()||ve<this._source.maxzoom&&(yt[pr.key]=pr)}this._retainLoadedChildren(yt,ve,ut,Se);for(var Lr=0,Dr=q;Lr<Dr.length;Lr+=1){var jr=Dr[Lr],Sr=this._tiles[jr.key];if(!Sr.hasData()){if(ve+1>this._source.maxzoom){var Ur=jr.children(this._source.maxzoom)[0],$r=this.getTile(Ur);if($r&&$r.hasData()){Se[Ur.key]=Ur;continue}}else{var cn=jr.children(this._source.maxzoom);if(Se[cn[0].key]&&Se[cn[1].key]&&Se[cn[2].key]&&Se[cn[3].key])continue}for(var In=Sr.wasRequested(),An=jr.overscaledZ-1;An>=Xe;--An){var Dn=jr.scaledTo(An);if(Oe[Dn.key]||(Oe[Dn.key]=!0,!(Sr=this.getTile(Dn))&&In&&(Sr=this._addTile(Dn)),Sr&&(Se[Dn.key]=Dn,In=Sr.wasRequested(),Sr.hasData())))break}}}return Se},ne.prototype._updateLoadedParentTileCache=function(){for(var q in this._loadedParentTiles={},this._tiles){for(var ve=[],Se=void 0,Oe=this._tiles[q].tileID;Oe.overscaledZ>0;){if(Oe.key in this._loadedParentTiles){Se=this._loadedParentTiles[Oe.key];break}ve.push(Oe.key);var Xe=Oe.scaledTo(Oe.overscaledZ-1);if(Se=this._getLoadedTile(Xe))break;Oe=Xe}for(var ut=0,yt=ve;ut<yt.length;ut+=1)this._loadedParentTiles[yt[ut]]=Se}},ne.prototype._addTile=function(q){var ve=this._tiles[q.key];if(ve)return ve;(ve=this._cache.getAndRemove(q))&&(this._setTileReloadTimer(q.key,ve),ve.tileID=q,this._state.initializeTileState(ve,this.map?this.map.painter:null),this._cacheTimers[q.key]&&(clearTimeout(this._cacheTimers[q.key]),delete this._cacheTimers[q.key],this._setTileReloadTimer(q.key,ve)));var Se=Boolean(ve);return Se||(ve=new t.Tile(q,this._source.tileSize*q.overscaleFactor()),this._loadTile(ve,this._tileLoaded.bind(this,ve,q.key,ve.state))),ve?(ve.uses++,this._tiles[q.key]=ve,Se||this._source.fire(new t.Event("dataloading",{tile:ve,coord:ve.tileID,dataType:"source"})),ve):null},ne.prototype._setTileReloadTimer=function(q,ve){var Se=this;q in this._timers&&(clearTimeout(this._timers[q]),delete this._timers[q]);var Oe=ve.getExpiryTimeout();Oe&&(this._timers[q]=setTimeout(function(){Se._reloadTile(q,"expired"),delete Se._timers[q]},Oe))},ne.prototype._removeTile=function(q){var ve=this._tiles[q];ve&&(ve.uses--,delete this._tiles[q],this._timers[q]&&(clearTimeout(this._timers[q]),delete this._timers[q]),ve.uses>0||(ve.hasData()&&ve.state!=="reloading"?this._cache.add(ve.tileID,ve,ve.getExpiryTimeout()):(ve.aborted=!0,this._abortTile(ve),this._unloadTile(ve))))},ne.prototype.clearTiles=function(){for(var q in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(q);this._cache.reset()},ne.prototype.tilesIn=function(q,ve,Se){var Oe=this,Xe=[],ut=this.transform;if(!ut)return Xe;for(var yt=Se?ut.getCameraQueryGeometry(q):q,jt=q.map(function(An){return ut.pointCoordinate(An)}),sr=yt.map(function(An){return ut.pointCoordinate(An)}),pr=this.getIds(),br=1/0,Lr=1/0,Dr=-1/0,jr=-1/0,Sr=0,Ur=sr;Sr<Ur.length;Sr+=1){var $r=Ur[Sr];br=Math.min(br,$r.x),Lr=Math.min(Lr,$r.y),Dr=Math.max(Dr,$r.x),jr=Math.max(jr,$r.y)}for(var cn=function(An){var Dn=Oe._tiles[pr[An]];if(!Dn.holdingForFade()){var Jn=Dn.tileID,ha=Math.pow(2,ut.zoom-Dn.tileID.overscaledZ),la=ve*Dn.queryPadding*t.EXTENT/Dn.tileSize/ha,wa=[Jn.getTilePoint(new t.MercatorCoordinate(br,Lr)),Jn.getTilePoint(new t.MercatorCoordinate(Dr,jr))];if(wa[0].x-la<t.EXTENT&&wa[0].y-la<t.EXTENT&&wa[1].x+la>=0&&wa[1].y+la>=0){var Ea=jt.map(function(ti){return Jn.getTilePoint(ti)}),ii=sr.map(function(ti){return Jn.getTilePoint(ti)});Xe.push({tile:Dn,tileID:Jn,queryGeometry:Ea,cameraQueryGeometry:ii,scale:ha})}}},In=0;In<pr.length;In++)cn(In);return Xe},ne.prototype.getVisibleCoordinates=function(q){for(var ve=this,Se=this.getRenderableIds(q).map(function(yt){return ve._tiles[yt].tileID}),Oe=0,Xe=Se;Oe<Xe.length;Oe+=1){var ut=Xe[Oe];ut.posMatrix=this.transform.calculatePosMatrix(ut.toUnwrapped())}return Se},ne.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(je(this._source.type))for(var q in this._tiles){var ve=this._tiles[q];if(ve.fadeEndTime!==void 0&&ve.fadeEndTime>=t.browser.now())return!0}return!1},ne.prototype.setFeatureState=function(q,ve,Se){this._state.updateState(q=q||"_geojsonTileLayer",ve,Se)},ne.prototype.removeFeatureState=function(q,ve,Se){this._state.removeFeatureState(q=q||"_geojsonTileLayer",ve,Se)},ne.prototype.getFeatureState=function(q,ve){return this._state.getState(q=q||"_geojsonTileLayer",ve)},ne.prototype.setDependencies=function(q,ve,Se){var Oe=this._tiles[q];Oe&&Oe.setDependencies(ve,Se)},ne.prototype.reloadTilesForDependencies=function(q,ve){for(var Se in this._tiles)this._tiles[Se].hasDependency(q,ve)&&this._reloadTile(Se,"reloading");this._cache.filter(function(Oe){return!Oe.hasDependency(q,ve)})},ne}(t.Evented);function it(J,ne){var q=Math.abs(2*J.wrap)-+(J.wrap<0),ve=Math.abs(2*ne.wrap)-+(ne.wrap<0);return J.overscaledZ-ne.overscaledZ||ve-q||ne.canonical.y-J.canonical.y||ne.canonical.x-J.canonical.x}function je(J){return J==="raster"||J==="image"||J==="video"}function ot(){return new t.window.Worker(Cl.workerUrl)}ft.maxOverzooming=10,ft.maxUnderzooming=3;var Je="mapboxgl_preloaded_worker_pool",st=function(){this.active={}};st.prototype.acquire=function(J){if(!this.workers)for(this.workers=[];this.workers.length<st.workerCount;)this.workers.push(new ot);return this.active[J]=!0,this.workers.slice()},st.prototype.release=function(J){delete this.active[J],this.numActive()===0&&(this.workers.forEach(function(ne){ne.terminate()}),this.workers=null)},st.prototype.isPreloaded=function(){return!!this.active[Je]},st.prototype.numActive=function(){return Object.keys(this.active).length};var It,Nt=Math.floor(t.browser.hardwareConcurrency/2);function nr(){return It||(It=new st),It}function We(J,ne){var q={};for(var ve in J)ve!=="ref"&&(q[ve]=J[ve]);return t.refProperties.forEach(function(Se){Se in ne&&(q[Se]=ne[Se])}),q}function Fe(J){J=J.slice();for(var ne=Object.create(null),q=0;q<J.length;q++)ne[J[q].id]=J[q];for(var ve=0;ve<J.length;ve++)"ref"in J[ve]&&(J[ve]=We(J[ve],ne[J[ve].ref]));return J}st.workerCount=Math.max(Math.min(Nt,6),1);var bt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function kt(J,ne,q){q.push({command:bt.addSource,args:[J,ne[J]]})}function _t(J,ne,q){ne.push({command:bt.removeSource,args:[J]}),q[J]=!0}function Rt(J,ne,q,ve){_t(J,q,ve),kt(J,ne,q)}function Dt(J,ne,q){var ve;for(ve in J[q])if(J[q].hasOwnProperty(ve)&&ve!=="data"&&!t.deepEqual(J[q][ve],ne[q][ve]))return!1;for(ve in ne[q])if(ne[q].hasOwnProperty(ve)&&ve!=="data"&&!t.deepEqual(J[q][ve],ne[q][ve]))return!1;return!0}function Ut(J,ne,q,ve,Se,Oe){var Xe;for(Xe in ne=ne||{},J=J||{})J.hasOwnProperty(Xe)&&(t.deepEqual(J[Xe],ne[Xe])||q.push({command:Oe,args:[ve,Xe,ne[Xe],Se]}));for(Xe in ne)ne.hasOwnProperty(Xe)&&!J.hasOwnProperty(Xe)&&(t.deepEqual(J[Xe],ne[Xe])||q.push({command:Oe,args:[ve,Xe,ne[Xe],Se]}))}function Bt(J){return J.id}function tr(J,ne){return J[ne.id]=ne,J}var er=function(J,ne){this.reset(J,ne)};er.prototype.reset=function(J,ne){this.points=J||[],this._distances=[0];for(var q=1;q<this.points.length;q++)this._distances[q]=this._distances[q-1]+this.points[q].dist(this.points[q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ne||0,.5*this.length),this.paddedLength=this.length-2*this.padding},er.prototype.lerp=function(J){if(this.points.length===1)return this.points[0];J=t.clamp(J,0,1);for(var ne=1,q=this._distances[ne],ve=J*this.paddedLength+this.padding;q<ve&&ne<this._distances.length;)q=this._distances[++ne];var Se=ne-1,Oe=this._distances[Se],Xe=q-Oe,ut=Xe>0?(ve-Oe)/Xe:0;return this.points[Se].mult(1-ut).add(this.points[ne].mult(ut))};var Zt=function(J,ne,q){var ve=this.boxCells=[],Se=this.circleCells=[];this.xCellCount=Math.ceil(J/q),this.yCellCount=Math.ceil(ne/q);for(var Oe=0;Oe<this.xCellCount*this.yCellCount;Oe++)ve.push([]),Se.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=J,this.height=ne,this.xScale=this.xCellCount/J,this.yScale=this.yCellCount/ne,this.boxUid=0,this.circleUid=0};function _r(J,ne,q,ve,Se){var Oe=t.create();return ne?(t.scale(Oe,Oe,[1/Se,1/Se,1]),q||t.rotateZ(Oe,Oe,ve.angle)):t.multiply(Oe,ve.labelPlaneMatrix,J),Oe}function Gr(J,ne,q,ve,Se){if(ne){var Oe=t.clone(J);return t.scale(Oe,Oe,[Se,Se,1]),q||t.rotateZ(Oe,Oe,-ve.angle),Oe}return ve.glCoordMatrix}function Or(J,ne){var q=[J.x,J.y,0,1];xn(q,q,ne);var ve=q[3];return{point:new t.Point(q[0]/ve,q[1]/ve),signedDistanceFromCamera:ve}}function Fr(J,ne){return .5+J/ne*.5}function Mn(J,ne){var q=J[0]/J[3],ve=J[1]/J[3];return q>=-ne[0]&&q<=ne[0]&&ve>=-ne[1]&&ve<=ne[1]}function Wn(J,ne,q,ve,Se,Oe,Xe,ut){var yt=ve?J.textSizeData:J.iconSizeData,jt=t.evaluateSizeForZoom(yt,q.transform.zoom),sr=[256/q.width*2+1,256/q.height*2+1],pr=ve?J.text.dynamicLayoutVertexArray:J.icon.dynamicLayoutVertexArray;pr.clear();for(var br=J.lineVertexArray,Lr=ve?J.text.placedSymbolArray:J.icon.placedSymbolArray,Dr=q.transform.width/q.transform.height,jr=!1,Sr=0;Sr<Lr.length;Sr++){var Ur=Lr.get(Sr);if(Ur.hidden||Ur.writingMode===t.WritingMode.vertical&&!jr)pn(Ur.numGlyphs,pr);else{jr=!1;var $r=[Ur.anchorX,Ur.anchorY,0,1];if(t.transformMat4($r,$r,ne),Mn($r,sr)){var cn=Fr(q.transform.cameraToCenterDistance,$r[3]),In=t.evaluateSizeForFeature(yt,jt,Ur),An=Xe?In/cn:In*cn,Dn=new t.Point(Ur.anchorX,Ur.anchorY),Jn=Or(Dn,Se).point,ha={},la=jn(Ur,An,!1,ut,ne,Se,Oe,J.glyphOffsetArray,br,pr,Jn,Dn,ha,Dr);jr=la.useVertical,(la.notEnoughRoom||jr||la.needsFlipping&&jn(Ur,An,!0,ut,ne,Se,Oe,J.glyphOffsetArray,br,pr,Jn,Dn,ha,Dr).notEnoughRoom)&&pn(Ur.numGlyphs,pr)}else pn(Ur.numGlyphs,pr)}}ve?J.text.dynamicLayoutVertexBuffer.updateData(pr):J.icon.dynamicLayoutVertexBuffer.updateData(pr)}function Tn(J,ne,q,ve,Se,Oe,Xe,ut,yt,jt,sr){var pr=ut.glyphStartIndex+ut.numGlyphs,br=ut.lineStartIndex,Lr=ut.lineStartIndex+ut.lineLength,Dr=ne.getoffsetX(ut.glyphStartIndex),jr=ne.getoffsetX(pr-1),Sr=Pr(J*Dr,q,ve,Se,Oe,Xe,ut.segment,br,Lr,yt,jt,sr);if(!Sr)return null;var Ur=Pr(J*jr,q,ve,Se,Oe,Xe,ut.segment,br,Lr,yt,jt,sr);return Ur?{first:Sr,last:Ur}:null}function Nn(J,ne,q,ve){return J===t.WritingMode.horizontal&&Math.abs(q.y-ne.y)>Math.abs(q.x-ne.x)*ve?{useVertical:!0}:(J===t.WritingMode.vertical?ne.y<q.y:ne.x>q.x)?{needsFlipping:!0}:null}function jn(J,ne,q,ve,Se,Oe,Xe,ut,yt,jt,sr,pr,br,Lr){var Dr,jr=ne/24,Sr=J.lineOffsetX*jr,Ur=J.lineOffsetY*jr;if(J.numGlyphs>1){var $r=J.glyphStartIndex+J.numGlyphs,cn=J.lineStartIndex,In=J.lineStartIndex+J.lineLength,An=Tn(jr,ut,Sr,Ur,q,sr,pr,J,yt,Oe,br);if(!An)return{notEnoughRoom:!0};var Dn=Or(An.first.point,Xe).point,Jn=Or(An.last.point,Xe).point;if(ve&&!q){var ha=Nn(J.writingMode,Dn,Jn,Lr);if(ha)return ha}Dr=[An.first];for(var la=J.glyphStartIndex+1;la<$r-1;la++)Dr.push(Pr(jr*ut.getoffsetX(la),Sr,Ur,q,sr,pr,J.segment,cn,In,yt,Oe,br));Dr.push(An.last)}else{if(ve&&!q){var wa=Or(pr,Se).point,Ea=J.lineStartIndex+J.segment+1,ii=new t.Point(yt.getx(Ea),yt.gety(Ea)),ti=Or(ii,Se),Oi=ti.signedDistanceFromCamera>0?ti.point:Nr(pr,ii,wa,1,Se),Va=Nn(J.writingMode,wa,Oi,Lr);if(Va)return Va}var gi=Pr(jr*ut.getoffsetX(J.glyphStartIndex),Sr,Ur,q,sr,pr,J.segment,J.lineStartIndex,J.lineStartIndex+J.lineLength,yt,Oe,br);if(!gi)return{notEnoughRoom:!0};Dr=[gi]}for(var Ri=0,ci=Dr;Ri<ci.length;Ri+=1){var li=ci[Ri];t.addDynamicAttributes(jt,li.point,li.angle)}return{}}function Nr(J,ne,q,ve,Se){var Oe=Or(J.add(J.sub(ne)._unit()),Se).point,Xe=q.sub(Oe);return q.add(Xe._mult(ve/Xe.mag()))}function Pr(J,ne,q,ve,Se,Oe,Xe,ut,yt,jt,sr,pr){var br=ve?J-ne:J+ne,Lr=br>0?1:-1,Dr=0;ve&&(Lr*=-1,Dr=Math.PI),Lr<0&&(Dr+=Math.PI);for(var jr=Lr>0?ut+Xe:ut+Xe+1,Sr=Se,Ur=Se,$r=0,cn=0,In=Math.abs(br),An=[];$r+cn<=In;){if((jr+=Lr)<ut||jr>=yt)return null;if(Ur=Sr,An.push(Sr),(Sr=pr[jr])===void 0){var Dn=new t.Point(jt.getx(jr),jt.gety(jr)),Jn=Or(Dn,sr);if(Jn.signedDistanceFromCamera>0)Sr=pr[jr]=Jn.point;else{var ha=jr-Lr;Sr=Nr($r===0?Oe:new t.Point(jt.getx(ha),jt.gety(ha)),Dn,Ur,In-$r+1,sr)}}$r+=cn,cn=Ur.dist(Sr)}var la=(In-$r)/cn,wa=Sr.sub(Ur),Ea=wa.mult(la)._add(Ur);Ea._add(wa._unit()._perp()._mult(q*Lr));var ii=Dr+Math.atan2(Sr.y-Ur.y,Sr.x-Ur.x);return An.push(Ea),{point:Ea,angle:ii,path:An}}Zt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Zt.prototype.insert=function(J,ne,q,ve,Se){this._forEachCell(ne,q,ve,Se,this._insertBoxCell,this.boxUid++),this.boxKeys.push(J),this.bboxes.push(ne),this.bboxes.push(q),this.bboxes.push(ve),this.bboxes.push(Se)},Zt.prototype.insertCircle=function(J,ne,q,ve){this._forEachCell(ne-ve,q-ve,ne+ve,q+ve,this._insertCircleCell,this.circleUid++),this.circleKeys.push(J),this.circles.push(ne),this.circles.push(q),this.circles.push(ve)},Zt.prototype._insertBoxCell=function(J,ne,q,ve,Se,Oe){this.boxCells[Se].push(Oe)},Zt.prototype._insertCircleCell=function(J,ne,q,ve,Se,Oe){this.circleCells[Se].push(Oe)},Zt.prototype._query=function(J,ne,q,ve,Se,Oe){if(q<0||J>this.width||ve<0||ne>this.height)return!Se&&[];var Xe=[];if(J<=0&&ne<=0&&this.width<=q&&this.height<=ve){if(Se)return!0;for(var ut=0;ut<this.boxKeys.length;ut++)Xe.push({key:this.boxKeys[ut],x1:this.bboxes[4*ut],y1:this.bboxes[4*ut+1],x2:this.bboxes[4*ut+2],y2:this.bboxes[4*ut+3]});for(var yt=0;yt<this.circleKeys.length;yt++){var jt=this.circles[3*yt],sr=this.circles[3*yt+1],pr=this.circles[3*yt+2];Xe.push({key:this.circleKeys[yt],x1:jt-pr,y1:sr-pr,x2:jt+pr,y2:sr+pr})}return Oe?Xe.filter(Oe):Xe}return this._forEachCell(J,ne,q,ve,this._queryCell,Xe,{hitTest:Se,seenUids:{box:{},circle:{}}},Oe),Se?Xe.length>0:Xe},Zt.prototype._queryCircle=function(J,ne,q,ve,Se){var Oe=J-q,Xe=J+q,ut=ne-q,yt=ne+q;if(Xe<0||Oe>this.width||yt<0||ut>this.height)return!ve&&[];var jt=[];return this._forEachCell(Oe,ut,Xe,yt,this._queryCellCircle,jt,{hitTest:ve,circle:{x:J,y:ne,radius:q},seenUids:{box:{},circle:{}}},Se),ve?jt.length>0:jt},Zt.prototype.query=function(J,ne,q,ve,Se){return this._query(J,ne,q,ve,!1,Se)},Zt.prototype.hitTest=function(J,ne,q,ve,Se){return this._query(J,ne,q,ve,!0,Se)},Zt.prototype.hitTestCircle=function(J,ne,q,ve){return this._queryCircle(J,ne,q,!0,ve)},Zt.prototype._queryCell=function(J,ne,q,ve,Se,Oe,Xe,ut){var yt=Xe.seenUids,jt=this.boxCells[Se];if(jt!==null)for(var sr=this.bboxes,pr=0,br=jt;pr<br.length;pr+=1){var Lr=br[pr];if(!yt.box[Lr]){yt.box[Lr]=!0;var Dr=4*Lr;if(J<=sr[Dr+2]&&ne<=sr[Dr+3]&&q>=sr[Dr+0]&&ve>=sr[Dr+1]&&(!ut||ut(this.boxKeys[Lr]))){if(Xe.hitTest)return Oe.push(!0),!0;Oe.push({key:this.boxKeys[Lr],x1:sr[Dr],y1:sr[Dr+1],x2:sr[Dr+2],y2:sr[Dr+3]})}}}var jr=this.circleCells[Se];if(jr!==null)for(var Sr=this.circles,Ur=0,$r=jr;Ur<$r.length;Ur+=1){var cn=$r[Ur];if(!yt.circle[cn]){yt.circle[cn]=!0;var In=3*cn;if(this._circleAndRectCollide(Sr[In],Sr[In+1],Sr[In+2],J,ne,q,ve)&&(!ut||ut(this.circleKeys[cn]))){if(Xe.hitTest)return Oe.push(!0),!0;var An=Sr[In],Dn=Sr[In+1],Jn=Sr[In+2];Oe.push({key:this.circleKeys[cn],x1:An-Jn,y1:Dn-Jn,x2:An+Jn,y2:Dn+Jn})}}}},Zt.prototype._queryCellCircle=function(J,ne,q,ve,Se,Oe,Xe,ut){var yt=Xe.circle,jt=Xe.seenUids,sr=this.boxCells[Se];if(sr!==null)for(var pr=this.bboxes,br=0,Lr=sr;br<Lr.length;br+=1){var Dr=Lr[br];if(!jt.box[Dr]){jt.box[Dr]=!0;var jr=4*Dr;if(this._circleAndRectCollide(yt.x,yt.y,yt.radius,pr[jr+0],pr[jr+1],pr[jr+2],pr[jr+3])&&(!ut||ut(this.boxKeys[Dr])))return Oe.push(!0),!0}}var Sr=this.circleCells[Se];if(Sr!==null)for(var Ur=this.circles,$r=0,cn=Sr;$r<cn.length;$r+=1){var In=cn[$r];if(!jt.circle[In]){jt.circle[In]=!0;var An=3*In;if(this._circlesCollide(Ur[An],Ur[An+1],Ur[An+2],yt.x,yt.y,yt.radius)&&(!ut||ut(this.circleKeys[In])))return Oe.push(!0),!0}}},Zt.prototype._forEachCell=function(J,ne,q,ve,Se,Oe,Xe,ut){for(var yt=this._convertToXCellCoord(J),jt=this._convertToYCellCoord(ne),sr=this._convertToXCellCoord(q),pr=this._convertToYCellCoord(ve),br=yt;br<=sr;br++)for(var Lr=jt;Lr<=pr;Lr++)if(Se.call(this,J,ne,q,ve,this.xCellCount*Lr+br,Oe,Xe,ut))return},Zt.prototype._convertToXCellCoord=function(J){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(J*this.xScale)))},Zt.prototype._convertToYCellCoord=function(J){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(J*this.yScale)))},Zt.prototype._circlesCollide=function(J,ne,q,ve,Se,Oe){var Xe=ve-J,ut=Se-ne,yt=q+Oe;return yt*yt>Xe*Xe+ut*ut},Zt.prototype._circleAndRectCollide=function(J,ne,q,ve,Se,Oe,Xe){var ut=(Oe-ve)/2,yt=Math.abs(J-(ve+ut));if(yt>ut+q)return!1;var jt=(Xe-Se)/2,sr=Math.abs(ne-(Se+jt));if(sr>jt+q)return!1;if(yt<=ut||sr<=jt)return!0;var pr=yt-ut,br=sr-jt;return pr*pr+br*br<=q*q};var Ln=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function pn(J,ne){for(var q=0;q<J;q++){var ve=ne.length;ne.resize(ve+4),ne.float32.set(Ln,3*ve)}}function xn(J,ne,q){var ve=ne[0],Se=ne[1];return J[0]=q[0]*ve+q[4]*Se+q[12],J[1]=q[1]*ve+q[5]*Se+q[13],J[3]=q[3]*ve+q[7]*Se+q[15],J}var en=function(J,ne,q){ne===void 0&&(ne=new Zt(J.width+200,J.height+200,25)),q===void 0&&(q=new Zt(J.width+200,J.height+200,25)),this.transform=J,this.grid=ne,this.ignoredGrid=q,this.pitchfactor=Math.cos(J._pitch)*J.cameraToCenterDistance,this.screenRightBoundary=J.width+100,this.screenBottomBoundary=J.height+100,this.gridRightBoundary=J.width+200,this.gridBottomBoundary=J.height+200};function _n(J,ne,q){return ne*(t.EXTENT/(J.tileSize*Math.pow(2,q-J.tileID.overscaledZ)))}en.prototype.placeCollisionBox=function(J,ne,q,ve,Se){var Oe=this.projectAndGetPerspectiveRatio(ve,J.anchorPointX,J.anchorPointY),Xe=q*Oe.perspectiveRatio,ut=J.x1*Xe+Oe.point.x,yt=J.y1*Xe+Oe.point.y,jt=J.x2*Xe+Oe.point.x,sr=J.y2*Xe+Oe.point.y;return!this.isInsideGrid(ut,yt,jt,sr)||!ne&&this.grid.hitTest(ut,yt,jt,sr,Se)?{box:[],offscreen:!1}:{box:[ut,yt,jt,sr],offscreen:this.isOffscreen(ut,yt,jt,sr)}},en.prototype.placeCollisionCircles=function(J,ne,q,ve,Se,Oe,Xe,ut,yt,jt,sr,pr,br){var Lr=[],Dr=new t.Point(ne.anchorX,ne.anchorY),jr=Or(Dr,Oe),Sr=Fr(this.transform.cameraToCenterDistance,jr.signedDistanceFromCamera),Ur=(jt?Se/Sr:Se*Sr)/t.ONE_EM,$r=Or(Dr,Xe).point,cn=Tn(Ur,ve,ne.lineOffsetX*Ur,ne.lineOffsetY*Ur,!1,$r,Dr,ne,q,Xe,{}),In=!1,An=!1,Dn=!0;if(cn){for(var Jn=.5*pr*Sr+br,ha=new t.Point(-100,-100),la=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),wa=new er,Ea=cn.first,ii=cn.last,ti=[],Oi=Ea.path.length-1;Oi>=1;Oi--)ti.push(Ea.path[Oi]);for(var Va=1;Va<ii.path.length;Va++)ti.push(ii.path[Va]);var gi=2.5*Jn;if(ut){var Ri=ti.map(function(Cu){return Or(Cu,ut)});ti=Ri.some(function(Cu){return Cu.signedDistanceFromCamera<=0})?[]:Ri.map(function(Cu){return Cu.point})}var ci=[];if(ti.length>0){for(var li=ti[0].clone(),Li=ti[0].clone(),ni=1;ni<ti.length;ni++)li.x=Math.min(li.x,ti[ni].x),li.y=Math.min(li.y,ti[ni].y),Li.x=Math.max(Li.x,ti[ni].x),Li.y=Math.max(Li.y,ti[ni].y);ci=li.x>=ha.x&&Li.x<=la.x&&li.y>=ha.y&&Li.y<=la.y?[ti]:Li.x<ha.x||li.x>la.x||Li.y<ha.y||li.y>la.y?[]:t.clipLine([ti],ha.x,ha.y,la.x,la.y)}for(var Ha=0,as=ci;Ha<as.length;Ha+=1){var Fo;wa.reset(as[Ha],.25*Jn),Fo=wa.length<=.5*Jn?1:Math.ceil(wa.paddedLength/gi)+1;for(var bo=0;bo<Fo;bo++){var Ao=bo/Math.max(Fo-1,1),Qo=wa.lerp(Ao),Mo=Qo.x+100,du=Qo.y+100;Lr.push(Mo,du,Jn,0);var xs=Mo-Jn,Jl=du-Jn,bl=Mo+Jn,$l=du+Jn;if(Dn=Dn&&this.isOffscreen(xs,Jl,bl,$l),An=An||this.isInsideGrid(xs,Jl,bl,$l),!J&&this.grid.hitTestCircle(Mo,du,Jn,sr)&&(In=!0,!yt))return{circles:[],offscreen:!1,collisionDetected:In}}}}return{circles:!yt&&In||!An?[]:Lr,offscreen:Dn,collisionDetected:In}},en.prototype.queryRenderedSymbols=function(J){if(J.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var ne=[],q=1/0,ve=1/0,Se=-1/0,Oe=-1/0,Xe=0,ut=J;Xe<ut.length;Xe+=1){var yt=ut[Xe],jt=new t.Point(yt.x+100,yt.y+100);q=Math.min(q,jt.x),ve=Math.min(ve,jt.y),Se=Math.max(Se,jt.x),Oe=Math.max(Oe,jt.y),ne.push(jt)}for(var sr={},pr={},br=0,Lr=this.grid.query(q,ve,Se,Oe).concat(this.ignoredGrid.query(q,ve,Se,Oe));br<Lr.length;br+=1){var Dr=Lr[br],jr=Dr.key;if(sr[jr.bucketInstanceId]===void 0&&(sr[jr.bucketInstanceId]={}),!sr[jr.bucketInstanceId][jr.featureIndex]){var Sr=[new t.Point(Dr.x1,Dr.y1),new t.Point(Dr.x2,Dr.y1),new t.Point(Dr.x2,Dr.y2),new t.Point(Dr.x1,Dr.y2)];t.polygonIntersectsPolygon(ne,Sr)&&(sr[jr.bucketInstanceId][jr.featureIndex]=!0,pr[jr.bucketInstanceId]===void 0&&(pr[jr.bucketInstanceId]=[]),pr[jr.bucketInstanceId].push(jr.featureIndex))}}return pr},en.prototype.insertCollisionBox=function(J,ne,q,ve,Se){(ne?this.ignoredGrid:this.grid).insert({bucketInstanceId:q,featureIndex:ve,collisionGroupID:Se},J[0],J[1],J[2],J[3])},en.prototype.insertCollisionCircles=function(J,ne,q,ve,Se){for(var Oe=ne?this.ignoredGrid:this.grid,Xe={bucketInstanceId:q,featureIndex:ve,collisionGroupID:Se},ut=0;ut<J.length;ut+=4)Oe.insertCircle(Xe,J[ut],J[ut+1],J[ut+2])},en.prototype.projectAndGetPerspectiveRatio=function(J,ne,q){var ve=[ne,q,0,1];return xn(ve,ve,J),{point:new t.Point((ve[0]/ve[3]+1)/2*this.transform.width+100,(-ve[1]/ve[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/ve[3]*.5}},en.prototype.isOffscreen=function(J,ne,q,ve){return q<100||J>=this.screenRightBoundary||ve<100||ne>this.screenBottomBoundary},en.prototype.isInsideGrid=function(J,ne,q,ve){return q>=0&&J<this.gridRightBoundary&&ve>=0&&ne<this.gridBottomBoundary},en.prototype.getViewportMatrix=function(){var J=t.identity([]);return t.translate(J,J,[-100,-100,0]),J};var kn=function(J,ne,q,ve){this.opacity=J?Math.max(0,Math.min(1,J.opacity+(J.placed?ne:-ne))):ve&&q?1:0,this.placed=q};kn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ln=function(J,ne,q,ve,Se){this.text=new kn(J?J.text:null,ne,q,Se),this.icon=new kn(J?J.icon:null,ne,ve,Se)};ln.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var vt=function(J,ne,q){this.text=J,this.icon=ne,this.skipFade=q},Gt=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},fr=function(J,ne,q,ve,Se){this.bucketInstanceId=J,this.featureIndex=ne,this.sourceLayerIndex=q,this.bucketIndex=ve,this.tileID=Se},Cr=function(J){this.crossSourceCollisions=J,this.maxGroupID=0,this.collisionGroups={}};function Wr(J,ne,q,ve,Se){var Oe=t.getAnchorAlignment(J),Xe=-(Oe.horizontalAlign-.5)*ne,ut=-(Oe.verticalAlign-.5)*q,yt=t.evaluateVariableOffset(J,ve);return new t.Point(Xe+yt[0]*Se,ut+yt[1]*Se)}function Vr(J,ne,q,ve,Se,Oe){var Xe=J.x1,ut=J.x2,yt=J.y1,jt=J.y2,sr=J.anchorPointX,pr=J.anchorPointY,br=new t.Point(ne,q);return ve&&br._rotate(Se?Oe:-Oe),{x1:Xe+br.x,y1:yt+br.y,x2:ut+br.x,y2:jt+br.y,anchorPointX:sr,anchorPointY:pr}}Cr.prototype.get=function(J){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[J]){var ne=++this.maxGroupID;this.collisionGroups[J]={ID:ne,predicate:function(q){return q.collisionGroupID===ne}}}return this.collisionGroups[J]};var Qr=function(J,ne,q,ve){this.transform=J.clone(),this.collisionIndex=new en(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ne,this.retainedQueryData={},this.collisionGroups=new Cr(q),this.collisionCircleArrays={},this.prevPlacement=ve,ve&&(ve.prevPlacement=void 0),this.placedOrientations={}};function Hr(J,ne,q,ve,Se){J.emplaceBack(ne?1:0,q?1:0,ve||0,Se||0),J.emplaceBack(ne?1:0,q?1:0,ve||0,Se||0),J.emplaceBack(ne?1:0,q?1:0,ve||0,Se||0),J.emplaceBack(ne?1:0,q?1:0,ve||0,Se||0)}Qr.prototype.getBucketParts=function(J,ne,q,ve){var Se=q.getBucket(ne),Oe=q.latestFeatureIndex;if(Se&&Oe&&ne.id===Se.layerIds[0]){var Xe=q.collisionBoxArray,ut=Se.layers[0].layout,yt=Math.pow(2,this.transform.zoom-q.tileID.overscaledZ),jt=q.tileSize/t.EXTENT,sr=this.transform.calculatePosMatrix(q.tileID.toUnwrapped()),pr=ut.get("text-pitch-alignment")==="map",br=ut.get("text-rotation-alignment")==="map",Lr=_n(q,1,this.transform.zoom),Dr=_r(sr,pr,br,this.transform,Lr),jr=null;if(pr){var Sr=Gr(sr,pr,br,this.transform,Lr);jr=t.multiply([],this.transform.labelPlaneMatrix,Sr)}this.retainedQueryData[Se.bucketInstanceId]=new fr(Se.bucketInstanceId,Oe,Se.sourceLayerIndex,Se.index,q.tileID);var Ur={bucket:Se,layout:ut,posMatrix:sr,textLabelPlaneMatrix:Dr,labelToScreenMatrix:jr,scale:yt,textPixelRatio:jt,holdingForFade:q.holdingForFade(),collisionBoxArray:Xe,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(Se.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Se.sourceID)};if(ve)for(var $r=0,cn=Se.sortKeyRanges;$r<cn.length;$r+=1){var In=cn[$r];J.push({sortKey:In.sortKey,symbolInstanceStart:In.symbolInstanceStart,symbolInstanceEnd:In.symbolInstanceEnd,parameters:Ur})}else J.push({symbolInstanceStart:0,symbolInstanceEnd:Se.symbolInstances.length,parameters:Ur})}},Qr.prototype.attemptAnchorPlacement=function(J,ne,q,ve,Se,Oe,Xe,ut,yt,jt,sr,pr,br,Lr,Dr){var jr,Sr=[pr.textOffset0,pr.textOffset1],Ur=Wr(J,q,ve,Sr,Se),$r=this.collisionIndex.placeCollisionBox(Vr(ne,Ur.x,Ur.y,Oe,Xe,this.transform.angle),sr,ut,yt,jt.predicate);if(!Dr||this.collisionIndex.placeCollisionBox(Vr(Dr,Ur.x,Ur.y,Oe,Xe,this.transform.angle),sr,ut,yt,jt.predicate).box.length!==0)return $r.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[pr.crossTileID]&&this.prevPlacement.placements[pr.crossTileID]&&this.prevPlacement.placements[pr.crossTileID].text&&(jr=this.prevPlacement.variableOffsets[pr.crossTileID].anchor),this.variableOffsets[pr.crossTileID]={textOffset:Sr,width:q,height:ve,anchor:J,textBoxScale:Se,prevAnchor:jr},this.markUsedJustification(br,J,pr,Lr),br.allowVerticalPlacement&&(this.markUsedOrientation(br,Lr,pr),this.placedOrientations[pr.crossTileID]=Lr),{shift:Ur,placedGlyphBoxes:$r}):void 0},Qr.prototype.placeLayerBucketPart=function(J,ne,q){var ve=this,Se=J.parameters,Oe=Se.bucket,Xe=Se.layout,ut=Se.posMatrix,yt=Se.textLabelPlaneMatrix,jt=Se.labelToScreenMatrix,sr=Se.textPixelRatio,pr=Se.holdingForFade,br=Se.collisionBoxArray,Lr=Se.partiallyEvaluatedTextSize,Dr=Se.collisionGroup,jr=Xe.get("text-optional"),Sr=Xe.get("icon-optional"),Ur=Xe.get("text-allow-overlap"),$r=Xe.get("icon-allow-overlap"),cn=Xe.get("text-rotation-alignment")==="map",In=Xe.get("text-pitch-alignment")==="map",An=Xe.get("icon-text-fit")!=="none",Dn=Xe.get("symbol-z-order")==="viewport-y",Jn=Ur&&($r||!Oe.hasIconData()||Sr),ha=$r&&(Ur||!Oe.hasTextData()||jr);!Oe.collisionArrays&&br&&Oe.deserializeCollisionBoxes(br);var la=function(Va,gi){if(!ne[Va.crossTileID])if(pr)ve.placements[Va.crossTileID]=new vt(!1,!1,!1);else{var Ri,ci=!1,li=!1,Li=!0,ni=null,Ha={box:null,offscreen:null},as={box:null,offscreen:null},Fo=null,bo=null,Ao=0,Qo=0,Mo=0;gi.textFeatureIndex?Ao=gi.textFeatureIndex:Va.useRuntimeCollisionCircles&&(Ao=Va.featureIndex),gi.verticalTextFeatureIndex&&(Qo=gi.verticalTextFeatureIndex);var du=gi.textBox;if(du){var xs=function(is){var Nl=t.WritingMode.horizontal;if(Oe.allowVerticalPlacement&&!is&&ve.prevPlacement){var Pl=ve.prevPlacement.placedOrientations[Va.crossTileID];Pl&&(ve.placedOrientations[Va.crossTileID]=Pl,ve.markUsedOrientation(Oe,Nl=Pl,Va))}return Nl},Jl=function(is,Nl){if(Oe.allowVerticalPlacement&&Va.numVerticalGlyphVertices>0&&gi.verticalTextBox)for(var Pl=0,Ju=Oe.writingModes;Pl<Ju.length&&(Ju[Pl]===t.WritingMode.vertical?(Ha=Nl(),as=Ha):Ha=is(),!(Ha&&Ha.box&&Ha.box.length));Pl+=1);else Ha=is()};if(Xe.get("text-variable-anchor")){var bl=Xe.get("text-variable-anchor");if(ve.prevPlacement&&ve.prevPlacement.variableOffsets[Va.crossTileID]){var $l=ve.prevPlacement.variableOffsets[Va.crossTileID];bl.indexOf($l.anchor)>0&&(bl=bl.filter(function(is){return is!==$l.anchor})).unshift($l.anchor)}var Cu=function(is,Nl,Pl){for(var Ju=is.x2-is.x1,od=is.y2-is.y1,Pf=Va.textBoxScale,Lh=An&&!$r?Nl:null,Lc={box:[],offscreen:!1},Ph=Ur?2*bl.length:bl.length,ql=0;ql<Ph;++ql){var eu=ve.attemptAnchorPlacement(bl[ql%bl.length],is,Ju,od,Pf,cn,In,sr,ut,Dr,ql>=bl.length,Va,Oe,Pl,Lh);if(eu&&(Lc=eu.placedGlyphBoxes)&&Lc.box&&Lc.box.length){ci=!0,ni=eu.shift;break}}return Lc};Jl(function(){return Cu(du,gi.iconBox,t.WritingMode.horizontal)},function(){var is=gi.verticalTextBox;return Oe.allowVerticalPlacement&&!(Ha&&Ha.box&&Ha.box.length)&&Va.numVerticalGlyphVertices>0&&is?Cu(is,gi.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),Ha&&(ci=Ha.box,Li=Ha.offscreen);var cc=xs(Ha&&Ha.box);if(!ci&&ve.prevPlacement){var fc=ve.prevPlacement.variableOffsets[Va.crossTileID];fc&&(ve.variableOffsets[Va.crossTileID]=fc,ve.markUsedJustification(Oe,fc.anchor,Va,cc))}}else{var Ll=function(is,Nl){var Pl=ve.collisionIndex.placeCollisionBox(is,Ur,sr,ut,Dr.predicate);return Pl&&Pl.box&&Pl.box.length&&(ve.markUsedOrientation(Oe,Nl,Va),ve.placedOrientations[Va.crossTileID]=Nl),Pl};Jl(function(){return Ll(du,t.WritingMode.horizontal)},function(){var is=gi.verticalTextBox;return Oe.allowVerticalPlacement&&Va.numVerticalGlyphVertices>0&&is?Ll(is,t.WritingMode.vertical):{box:null,offscreen:null}}),xs(Ha&&Ha.box&&Ha.box.length)}}if(ci=(Ri=Ha)&&Ri.box&&Ri.box.length>0,Li=Ri&&Ri.offscreen,Va.useRuntimeCollisionCircles){var Lu=Oe.text.placedSymbolArray.get(Va.centerJustifiedTextSymbolIndex),Lf=t.evaluateSizeForFeature(Oe.textSizeData,Lr,Lu),hc=Xe.get("text-padding");Fo=ve.collisionIndex.placeCollisionCircles(Ur,Lu,Oe.lineVertexArray,Oe.glyphOffsetArray,Lf,ut,yt,jt,q,In,Dr.predicate,Va.collisionCircleDiameter,hc),ci=Ur||Fo.circles.length>0&&!Fo.collisionDetected,Li=Li&&Fo.offscreen}if(gi.iconFeatureIndex&&(Mo=gi.iconFeatureIndex),gi.iconBox){var Ql=function(is){var Nl=An&&ni?Vr(is,ni.x,ni.y,cn,In,ve.transform.angle):is;return ve.collisionIndex.placeCollisionBox(Nl,$r,sr,ut,Dr.predicate)};li=as&&as.box&&as.box.length&&gi.verticalIconBox?(bo=Ql(gi.verticalIconBox)).box.length>0:(bo=Ql(gi.iconBox)).box.length>0,Li=Li&&bo.offscreen}var bs=jr||Va.numHorizontalGlyphVertices===0&&Va.numVerticalGlyphVertices===0,qc=Sr||Va.numIconVertices===0;if(bs||qc?qc?bs||(li=li&&ci):ci=li&&ci:li=ci=li&&ci,ci&&Ri&&Ri.box&&ve.collisionIndex.insertCollisionBox(Ri.box,Xe.get("text-ignore-placement"),Oe.bucketInstanceId,as&&as.box&&Qo?Qo:Ao,Dr.ID),li&&bo&&ve.collisionIndex.insertCollisionBox(bo.box,Xe.get("icon-ignore-placement"),Oe.bucketInstanceId,Mo,Dr.ID),Fo&&(ci&&ve.collisionIndex.insertCollisionCircles(Fo.circles,Xe.get("text-ignore-placement"),Oe.bucketInstanceId,Ao,Dr.ID),q)){var ef=Oe.bucketInstanceId,vs=ve.collisionCircleArrays[ef];vs===void 0&&(vs=ve.collisionCircleArrays[ef]=new Gt);for(var pc=0;pc<Fo.circles.length;pc+=4)vs.circles.push(Fo.circles[pc+0]),vs.circles.push(Fo.circles[pc+1]),vs.circles.push(Fo.circles[pc+2]),vs.circles.push(Fo.collisionDetected?1:0)}ve.placements[Va.crossTileID]=new vt(ci||Jn,li||ha,Li||Oe.justReloaded),ne[Va.crossTileID]=!0}};if(Dn)for(var wa=Oe.getSortedSymbolIndexes(this.transform.angle),Ea=wa.length-1;Ea>=0;--Ea){var ii=wa[Ea];la(Oe.symbolInstances.get(ii),Oe.collisionArrays[ii])}else for(var ti=J.symbolInstanceStart;ti<J.symbolInstanceEnd;ti++)la(Oe.symbolInstances.get(ti),Oe.collisionArrays[ti]);if(q&&Oe.bucketInstanceId in this.collisionCircleArrays){var Oi=this.collisionCircleArrays[Oe.bucketInstanceId];t.invert(Oi.invProjMatrix,ut),Oi.viewportMatrix=this.collisionIndex.getViewportMatrix()}Oe.justReloaded=!1},Qr.prototype.markUsedJustification=function(J,ne,q,ve){var Se;Se=ve===t.WritingMode.vertical?q.verticalPlacedTextSymbolIndex:{left:q.leftJustifiedTextSymbolIndex,center:q.centerJustifiedTextSymbolIndex,right:q.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(ne)];for(var Oe=0,Xe=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex,q.verticalPlacedTextSymbolIndex];Oe<Xe.length;Oe+=1){var ut=Xe[Oe];ut>=0&&(J.text.placedSymbolArray.get(ut).crossTileID=Se>=0&&ut!==Se?0:q.crossTileID)}},Qr.prototype.markUsedOrientation=function(J,ne,q){for(var ve=ne===t.WritingMode.horizontal||ne===t.WritingMode.horizontalOnly?ne:0,Se=ne===t.WritingMode.vertical?ne:0,Oe=0,Xe=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex];Oe<Xe.length;Oe+=1)J.text.placedSymbolArray.get(Xe[Oe]).placedOrientation=ve;q.verticalPlacedTextSymbolIndex&&(J.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).placedOrientation=Se)},Qr.prototype.commit=function(J){this.commitTime=J,this.zoomAtLastRecencyCheck=this.transform.zoom;var ne=this.prevPlacement,q=!1;this.prevZoomAdjustment=ne?ne.zoomAdjustment(this.transform.zoom):0;var ve=ne?ne.symbolFadeChange(J):1,Se=ne?ne.opacities:{},Oe=ne?ne.variableOffsets:{},Xe=ne?ne.placedOrientations:{};for(var ut in this.placements){var yt=this.placements[ut],jt=Se[ut];jt?(this.opacities[ut]=new ln(jt,ve,yt.text,yt.icon),q=q||yt.text!==jt.text.placed||yt.icon!==jt.icon.placed):(this.opacities[ut]=new ln(null,ve,yt.text,yt.icon,yt.skipFade),q=q||yt.text||yt.icon)}for(var sr in Se){var pr=Se[sr];if(!this.opacities[sr]){var br=new ln(pr,ve,!1,!1);br.isHidden()||(this.opacities[sr]=br,q=q||pr.text.placed||pr.icon.placed)}}for(var Lr in Oe)this.variableOffsets[Lr]||!this.opacities[Lr]||this.opacities[Lr].isHidden()||(this.variableOffsets[Lr]=Oe[Lr]);for(var Dr in Xe)this.placedOrientations[Dr]||!this.opacities[Dr]||this.opacities[Dr].isHidden()||(this.placedOrientations[Dr]=Xe[Dr]);q?this.lastPlacementChangeTime=J:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=ne?ne.lastPlacementChangeTime:J)},Qr.prototype.updateLayerOpacities=function(J,ne){for(var q={},ve=0,Se=ne;ve<Se.length;ve+=1){var Oe=Se[ve],Xe=Oe.getBucket(J);Xe&&Oe.latestFeatureIndex&&J.id===Xe.layerIds[0]&&this.updateBucketOpacities(Xe,q,Oe.collisionBoxArray)}},Qr.prototype.updateBucketOpacities=function(J,ne,q){var ve=this;J.hasTextData()&&J.text.opacityVertexArray.clear(),J.hasIconData()&&J.icon.opacityVertexArray.clear(),J.hasIconCollisionBoxData()&&J.iconCollisionBox.collisionVertexArray.clear(),J.hasTextCollisionBoxData()&&J.textCollisionBox.collisionVertexArray.clear();var Se=J.layers[0].layout,Oe=new ln(null,0,!1,!1,!0),Xe=Se.get("text-allow-overlap"),ut=Se.get("icon-allow-overlap"),yt=Se.get("text-variable-anchor"),jt=Se.get("text-rotation-alignment")==="map",sr=Se.get("text-pitch-alignment")==="map",pr=Se.get("icon-text-fit")!=="none",br=new ln(null,0,Xe&&(ut||!J.hasIconData()||Se.get("icon-optional")),ut&&(Xe||!J.hasTextData()||Se.get("text-optional")),!0);!J.collisionArrays&&q&&(J.hasIconCollisionBoxData()||J.hasTextCollisionBoxData())&&J.deserializeCollisionBoxes(q);for(var Lr=function(Ur,$r,cn){for(var In=0;In<$r/4;In++)Ur.opacityVertexArray.emplaceBack(cn)},Dr=function(Ur){var $r=J.symbolInstances.get(Ur),cn=$r.numHorizontalGlyphVertices,In=$r.numVerticalGlyphVertices,An=$r.crossTileID,Dn=ve.opacities[An];ne[An]?Dn=Oe:Dn||(ve.opacities[An]=Dn=br),ne[An]=!0;var Jn=$r.numIconVertices>0,ha=ve.placedOrientations[$r.crossTileID],la=ha===t.WritingMode.vertical,wa=ha===t.WritingMode.horizontal||ha===t.WritingMode.horizontalOnly;if(cn>0||In>0){var Ea=nn(Dn.text);Lr(J.text,cn,la?Jr:Ea),Lr(J.text,In,wa?Jr:Ea);var ii=Dn.text.isHidden();[$r.rightJustifiedTextSymbolIndex,$r.centerJustifiedTextSymbolIndex,$r.leftJustifiedTextSymbolIndex].forEach(function(Ha){Ha>=0&&(J.text.placedSymbolArray.get(Ha).hidden=ii||la?1:0)}),$r.verticalPlacedTextSymbolIndex>=0&&(J.text.placedSymbolArray.get($r.verticalPlacedTextSymbolIndex).hidden=ii||wa?1:0);var ti=ve.variableOffsets[$r.crossTileID];ti&&ve.markUsedJustification(J,ti.anchor,$r,ha);var Oi=ve.placedOrientations[$r.crossTileID];Oi&&(ve.markUsedJustification(J,"left",$r,Oi),ve.markUsedOrientation(J,Oi,$r))}if(Jn){var Va=nn(Dn.icon),gi=!(pr&&$r.verticalPlacedIconSymbolIndex&&la);$r.placedIconSymbolIndex>=0&&(Lr(J.icon,$r.numIconVertices,gi?Va:Jr),J.icon.placedSymbolArray.get($r.placedIconSymbolIndex).hidden=Dn.icon.isHidden()),$r.verticalPlacedIconSymbolIndex>=0&&(Lr(J.icon,$r.numVerticalIconVertices,gi?Jr:Va),J.icon.placedSymbolArray.get($r.verticalPlacedIconSymbolIndex).hidden=Dn.icon.isHidden())}if(J.hasIconCollisionBoxData()||J.hasTextCollisionBoxData()){var Ri=J.collisionArrays[Ur];if(Ri){var ci=new t.Point(0,0);if(Ri.textBox||Ri.verticalTextBox){var li=!0;if(yt){var Li=ve.variableOffsets[An];Li?(ci=Wr(Li.anchor,Li.width,Li.height,Li.textOffset,Li.textBoxScale),jt&&ci._rotate(sr?ve.transform.angle:-ve.transform.angle)):li=!1}Ri.textBox&&Hr(J.textCollisionBox.collisionVertexArray,Dn.text.placed,!li||la,ci.x,ci.y),Ri.verticalTextBox&&Hr(J.textCollisionBox.collisionVertexArray,Dn.text.placed,!li||wa,ci.x,ci.y)}var ni=Boolean(!wa&&Ri.verticalIconBox);Ri.iconBox&&Hr(J.iconCollisionBox.collisionVertexArray,Dn.icon.placed,ni,pr?ci.x:0,pr?ci.y:0),Ri.verticalIconBox&&Hr(J.iconCollisionBox.collisionVertexArray,Dn.icon.placed,!ni,pr?ci.x:0,pr?ci.y:0)}}},jr=0;jr<J.symbolInstances.length;jr++)Dr(jr);if(J.sortFeatures(this.transform.angle),this.retainedQueryData[J.bucketInstanceId]&&(this.retainedQueryData[J.bucketInstanceId].featureSortOrder=J.featureSortOrder),J.hasTextData()&&J.text.opacityVertexBuffer&&J.text.opacityVertexBuffer.updateData(J.text.opacityVertexArray),J.hasIconData()&&J.icon.opacityVertexBuffer&&J.icon.opacityVertexBuffer.updateData(J.icon.opacityVertexArray),J.hasIconCollisionBoxData()&&J.iconCollisionBox.collisionVertexBuffer&&J.iconCollisionBox.collisionVertexBuffer.updateData(J.iconCollisionBox.collisionVertexArray),J.hasTextCollisionBoxData()&&J.textCollisionBox.collisionVertexBuffer&&J.textCollisionBox.collisionVertexBuffer.updateData(J.textCollisionBox.collisionVertexArray),J.bucketInstanceId in this.collisionCircleArrays){var Sr=this.collisionCircleArrays[J.bucketInstanceId];J.placementInvProjMatrix=Sr.invProjMatrix,J.placementViewportMatrix=Sr.viewportMatrix,J.collisionCircleArray=Sr.circles,delete this.collisionCircleArrays[J.bucketInstanceId]}},Qr.prototype.symbolFadeChange=function(J){return this.fadeDuration===0?1:(J-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Qr.prototype.zoomAdjustment=function(J){return Math.max(0,(this.transform.zoom-J)/1.5)},Qr.prototype.hasTransitions=function(J){return this.stale||J-this.lastPlacementChangeTime<this.fadeDuration},Qr.prototype.stillRecent=function(J,ne){var q=this.zoomAtLastRecencyCheck===ne?1-this.zoomAdjustment(ne):1;return this.zoomAtLastRecencyCheck=ne,this.commitTime+this.fadeDuration*q>J},Qr.prototype.setStale=function(){this.stale=!0};var En=Math.pow(2,25),ta=Math.pow(2,24),ea=Math.pow(2,17),ba=Math.pow(2,16),Wa=Math.pow(2,9),qa=Math.pow(2,8),dr=Math.pow(2,1);function nn(J){if(J.opacity===0&&!J.placed)return 0;if(J.opacity===1&&J.placed)return 4294967295;var ne=J.placed?1:0,q=Math.floor(127*J.opacity);return q*En+ne*ta+q*ea+ne*ba+q*Wa+ne*qa+q*dr+ne}var Jr=0,Pn=function(J){this._sortAcrossTiles=J.layout.get("symbol-z-order")!=="viewport-y"&&J.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Pn.prototype.continuePlacement=function(J,ne,q,ve,Se){for(var Oe=this._bucketParts;this._currentTileIndex<J.length;)if(ne.getBucketParts(Oe,ve,J[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Se())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Oe.sort(function(Xe,ut){return Xe.sortKey-ut.sortKey}));this._currentPartIndex<Oe.length;)if(ne.placeLayerBucketPart(Oe[this._currentPartIndex],this._seenCrossTileIDs,q),this._currentPartIndex++,Se())return!0;return!1};var Gn=function(J,ne,q,ve,Se,Oe,Xe){this.placement=new Qr(J,Se,Oe,Xe),this._currentPlacementIndex=ne.length-1,this._forceFullPlacement=q,this._showCollisionBoxes=ve,this._done=!1};Gn.prototype.isDone=function(){return this._done},Gn.prototype.continuePlacement=function(J,ne,q){for(var ve=this,Se=t.browser.now(),Oe=function(){var yt=t.browser.now()-Se;return!ve._forceFullPlacement&&yt>2};this._currentPlacementIndex>=0;){var Xe=ne[J[this._currentPlacementIndex]],ut=this.placement.collisionIndex.transform.zoom;if(Xe.type==="symbol"&&(!Xe.minzoom||Xe.minzoom<=ut)&&(!Xe.maxzoom||Xe.maxzoom>ut)){if(this._inProgressLayer||(this._inProgressLayer=new Pn(Xe)),this._inProgressLayer.continuePlacement(q[Xe.source],this.placement,this._showCollisionBoxes,Xe,Oe))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Gn.prototype.commit=function(J){return this.placement.commit(J),this.placement};var ka=512/t.EXTENT/2,ca=function(J,ne,q){this.tileID=J,this.indexedSymbolInstances={},this.bucketInstanceId=q;for(var ve=0;ve<ne.length;ve++){var Se=ne.get(ve),Oe=Se.key;this.indexedSymbolInstances[Oe]||(this.indexedSymbolInstances[Oe]=[]),this.indexedSymbolInstances[Oe].push({crossTileID:Se.crossTileID,coord:this.getScaledCoordinates(Se,J)})}};ca.prototype.getScaledCoordinates=function(J,ne){var q=ka/Math.pow(2,ne.canonical.z-this.tileID.canonical.z);return{x:Math.floor((ne.canonical.x*t.EXTENT+J.anchorX)*q),y:Math.floor((ne.canonical.y*t.EXTENT+J.anchorY)*q)}},ca.prototype.findMatches=function(J,ne,q){for(var ve=this.tileID.canonical.z<ne.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ne.canonical.z),Se=0;Se<J.length;Se++){var Oe=J.get(Se);if(!Oe.crossTileID){var Xe=this.indexedSymbolInstances[Oe.key];if(Xe)for(var ut=this.getScaledCoordinates(Oe,ne),yt=0,jt=Xe;yt<jt.length;yt+=1){var sr=jt[yt];if(Math.abs(sr.coord.x-ut.x)<=ve&&Math.abs(sr.coord.y-ut.y)<=ve&&!q[sr.crossTileID]){q[sr.crossTileID]=!0,Oe.crossTileID=sr.crossTileID;break}}}}};var Ta=function(){this.maxCrossTileID=0};Ta.prototype.generate=function(){return++this.maxCrossTileID};var Aa=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Aa.prototype.handleWrapJump=function(J){var ne=Math.round((J-this.lng)/360);if(ne!==0)for(var q in this.indexes){var ve=this.indexes[q],Se={};for(var Oe in ve){var Xe=ve[Oe];Xe.tileID=Xe.tileID.unwrapTo(Xe.tileID.wrap+ne),Se[Xe.tileID.key]=Xe}this.indexes[q]=Se}this.lng=J},Aa.prototype.addBucket=function(J,ne,q){if(this.indexes[J.overscaledZ]&&this.indexes[J.overscaledZ][J.key]){if(this.indexes[J.overscaledZ][J.key].bucketInstanceId===ne.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(J.overscaledZ,this.indexes[J.overscaledZ][J.key])}for(var ve=0;ve<ne.symbolInstances.length;ve++)ne.symbolInstances.get(ve).crossTileID=0;this.usedCrossTileIDs[J.overscaledZ]||(this.usedCrossTileIDs[J.overscaledZ]={});var Se=this.usedCrossTileIDs[J.overscaledZ];for(var Oe in this.indexes){var Xe=this.indexes[Oe];if(Number(Oe)>J.overscaledZ)for(var ut in Xe){var yt=Xe[ut];yt.tileID.isChildOf(J)&&yt.findMatches(ne.symbolInstances,J,Se)}else{var jt=Xe[J.scaledTo(Number(Oe)).key];jt&&jt.findMatches(ne.symbolInstances,J,Se)}}for(var sr=0;sr<ne.symbolInstances.length;sr++){var pr=ne.symbolInstances.get(sr);pr.crossTileID||(pr.crossTileID=q.generate(),Se[pr.crossTileID]=!0)}return this.indexes[J.overscaledZ]===void 0&&(this.indexes[J.overscaledZ]={}),this.indexes[J.overscaledZ][J.key]=new ca(J,ne.symbolInstances,ne.bucketInstanceId),!0},Aa.prototype.removeBucketCrossTileIDs=function(J,ne){for(var q in ne.indexedSymbolInstances)for(var ve=0,Se=ne.indexedSymbolInstances[q];ve<Se.length;ve+=1)delete this.usedCrossTileIDs[J][Se[ve].crossTileID]},Aa.prototype.removeStaleBuckets=function(J){var ne=!1;for(var q in this.indexes){var ve=this.indexes[q];for(var Se in ve)J[ve[Se].bucketInstanceId]||(this.removeBucketCrossTileIDs(q,ve[Se]),delete ve[Se],ne=!0)}return ne};var Ya=function(){this.layerIndexes={},this.crossTileIDs=new Ta,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ya.prototype.addLayer=function(J,ne,q){var ve=this.layerIndexes[J.id];ve===void 0&&(ve=this.layerIndexes[J.id]=new Aa);var Se=!1,Oe={};ve.handleWrapJump(q);for(var Xe=0,ut=ne;Xe<ut.length;Xe+=1){var yt=ut[Xe],jt=yt.getBucket(J);jt&&J.id===jt.layerIds[0]&&(jt.bucketInstanceId||(jt.bucketInstanceId=++this.maxBucketInstanceId),ve.addBucket(yt.tileID,jt,this.crossTileIDs)&&(Se=!0),Oe[jt.bucketInstanceId]=!0)}return ve.removeStaleBuckets(Oe)&&(Se=!0),Se},Ya.prototype.pruneUnusedLayers=function(J){var ne={};for(var q in J.forEach(function(ve){ne[ve]=!0}),this.layerIndexes)ne[q]||delete this.layerIndexes[q]};var Xt=function(J,ne){return t.emitValidationErrors(J,ne&&ne.filter(function(q){return q.identifier!=="source.canvas"}))},yr=t.pick(bt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Yr=t.pick(bt,["setCenter","setZoom","setBearing","setPitch"]),un=function(){var J={},ne=t.styleSpec.$version;for(var q in t.styleSpec.$root){var ve,Se=t.styleSpec.$root[q];Se.required&&(ve=q==="version"?ne:Se.type==="array"?[]:{})!=null&&(J[q]=ve)}return J}(),qr=function(J){function ne(q,ve){var Se=this;ve===void 0&&(ve={}),J.call(this),this.map=q,this.dispatcher=new D(nr(),this),this.imageManager=new m,this.imageManager.setEventedParent(this),this.glyphManager=new L(q._requestManager,ve.localIdeographFontFamily),this.lineAtlas=new C(256,512),this.crossTileSymbolIndex=new Ya,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var Oe=this;this._rtlTextPluginCallback=ne.registerForPluginStateChange(function(Xe){Oe.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Xe.pluginStatus,pluginURL:Xe.pluginURL},function(ut,yt){if(t.triggerPluginCompletionEvent(ut),yt&&yt.every(function(sr){return sr}))for(var jt in Oe.sourceCaches)Oe.sourceCaches[jt].reload()})}),this.on("data",function(Xe){if(Xe.dataType==="source"&&Xe.sourceDataType==="metadata"){var ut=Se.sourceCaches[Xe.sourceId];if(ut){var yt=ut.getSource();if(yt&&yt.vectorLayerIds)for(var jt in Se._layers){var sr=Se._layers[jt];sr.source===yt.id&&Se._validateLayer(sr)}}}})}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.loadURL=function(q,ve){var Se=this;ve===void 0&&(ve={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var Oe=typeof ve.validate=="boolean"?ve.validate:!t.isMapboxURL(q);q=this.map._requestManager.normalizeStyleURL(q,ve.accessToken);var Xe=this.map._requestManager.transformRequest(q,t.ResourceType.Style);this._request=t.getJSON(Xe,function(ut,yt){Se._request=null,ut?Se.fire(new t.ErrorEvent(ut)):yt&&Se._load(yt,Oe)})},ne.prototype.loadJSON=function(q,ve){var Se=this;ve===void 0&&(ve={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){Se._request=null,Se._load(q,ve.validate!==!1)})},ne.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(un,!1)},ne.prototype._load=function(q,ve){if(!ve||!Xt(this,t.validateStyle(q))){for(var Se in this._loaded=!0,this.stylesheet=q,q.sources)this.addSource(Se,q.sources[Se],{validate:!1});q.sprite?this._loadSprite(q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(q.glyphs);var Oe=Fe(this.stylesheet.layers);this._order=Oe.map(function(jt){return jt.id}),this._layers={},this._serializedLayers={};for(var Xe=0,ut=Oe;Xe<ut.length;Xe+=1){var yt=ut[Xe];(yt=t.createStyleLayer(yt)).setEventedParent(this,{layer:{id:yt.id}}),this._layers[yt.id]=yt,this._serializedLayers[yt.id]=yt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new k(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},ne.prototype._loadSprite=function(q){var ve=this;this._spriteRequest=function(Se,Oe,Xe){var ut,yt,jt,sr=t.browser.devicePixelRatio>1?"@2x":"",pr=t.getJSON(Oe.transformRequest(Oe.normalizeSpriteURL(Se,sr,".json"),t.ResourceType.SpriteJSON),function(Dr,jr){pr=null,jt||(jt=Dr,ut=jr,Lr())}),br=t.getImage(Oe.transformRequest(Oe.normalizeSpriteURL(Se,sr,".png"),t.ResourceType.SpriteImage),function(Dr,jr){br=null,jt||(jt=Dr,yt=jr,Lr())});function Lr(){if(jt)Xe(jt);else if(ut&&yt){var Dr=t.browser.getImageData(yt),jr={};for(var Sr in ut){var Ur=ut[Sr],$r=Ur.width,cn=Ur.height,In=Ur.x,An=Ur.y,Dn=Ur.sdf,Jn=Ur.pixelRatio,ha=Ur.stretchX,la=Ur.stretchY,wa=Ur.content,Ea=new t.RGBAImage({width:$r,height:cn});t.RGBAImage.copy(Dr,Ea,{x:In,y:An},{x:0,y:0},{width:$r,height:cn}),jr[Sr]={data:Ea,pixelRatio:Jn,sdf:Dn,stretchX:ha,stretchY:la,content:wa}}Xe(null,jr)}}return{cancel:function(){pr&&(pr.cancel(),pr=null),br&&(br.cancel(),br=null)}}}(q,this.map._requestManager,function(Se,Oe){if(ve._spriteRequest=null,Se)ve.fire(new t.ErrorEvent(Se));else if(Oe)for(var Xe in Oe)ve.imageManager.addImage(Xe,Oe[Xe]);ve.imageManager.setLoaded(!0),ve._availableImages=ve.imageManager.listImages(),ve.dispatcher.broadcast("setImages",ve._availableImages),ve.fire(new t.Event("data",{dataType:"style"}))})},ne.prototype._validateLayer=function(q){var ve=this.sourceCaches[q.source];if(ve){var Se=q.sourceLayer;if(Se){var Oe=ve.getSource();(Oe.type==="geojson"||Oe.vectorLayerIds&&Oe.vectorLayerIds.indexOf(Se)===-1)&&this.fire(new t.ErrorEvent(new Error('Source layer "'+Se+'" does not exist on source "'+Oe.id+'" as specified by style layer "'+q.id+'"')))}}},ne.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var q in this.sourceCaches)if(!this.sourceCaches[q].loaded())return!1;return!!this.imageManager.isLoaded()},ne.prototype._serializeLayers=function(q){for(var ve=[],Se=0,Oe=q;Se<Oe.length;Se+=1){var Xe=this._layers[Oe[Se]];Xe.type!=="custom"&&ve.push(Xe.serialize())}return ve},ne.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var q in this.sourceCaches)if(this.sourceCaches[q].hasTransition())return!0;for(var ve in this._layers)if(this._layers[ve].hasTransition())return!0;return!1},ne.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},ne.prototype.update=function(q){if(this._loaded){var ve=this._changed;if(this._changed){var Se=Object.keys(this._updatedLayers),Oe=Object.keys(this._removedLayers);for(var Xe in(Se.length||Oe.length)&&this._updateWorkerLayers(Se,Oe),this._updatedSources){var ut=this._updatedSources[Xe];ut==="reload"?this._reloadSource(Xe):ut==="clear"&&this._clearSource(Xe)}for(var yt in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[yt].updateTransitions(q);this.light.updateTransitions(q),this._resetUpdates()}for(var jt in this.sourceCaches)this.sourceCaches[jt].used=!1;for(var sr=0,pr=this._order;sr<pr.length;sr+=1){var br=this._layers[pr[sr]];br.recalculate(q,this._availableImages),!br.isHidden(q.zoom)&&br.source&&(this.sourceCaches[br.source].used=!0)}this.light.recalculate(q),this.z=q.zoom,ve&&this.fire(new t.Event("data",{dataType:"style"}))}},ne.prototype._updateTilesForChangedImages=function(){var q=Object.keys(this._changedImages);if(q.length){for(var ve in this.sourceCaches)this.sourceCaches[ve].reloadTilesForDependencies(["icons","patterns"],q);this._changedImages={}}},ne.prototype._updateWorkerLayers=function(q,ve){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(q),removedIds:ve})},ne.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},ne.prototype.setState=function(q){var ve=this;if(this._checkLoaded(),Xt(this,t.validateStyle(q)))return!1;(q=t.clone$1(q)).layers=Fe(q.layers);var Se=function(Xe,ut){if(!Xe)return[{command:bt.setStyle,args:[ut]}];var yt=[];try{if(!t.deepEqual(Xe.version,ut.version))return[{command:bt.setStyle,args:[ut]}];t.deepEqual(Xe.center,ut.center)||yt.push({command:bt.setCenter,args:[ut.center]}),t.deepEqual(Xe.zoom,ut.zoom)||yt.push({command:bt.setZoom,args:[ut.zoom]}),t.deepEqual(Xe.bearing,ut.bearing)||yt.push({command:bt.setBearing,args:[ut.bearing]}),t.deepEqual(Xe.pitch,ut.pitch)||yt.push({command:bt.setPitch,args:[ut.pitch]}),t.deepEqual(Xe.sprite,ut.sprite)||yt.push({command:bt.setSprite,args:[ut.sprite]}),t.deepEqual(Xe.glyphs,ut.glyphs)||yt.push({command:bt.setGlyphs,args:[ut.glyphs]}),t.deepEqual(Xe.transition,ut.transition)||yt.push({command:bt.setTransition,args:[ut.transition]}),t.deepEqual(Xe.light,ut.light)||yt.push({command:bt.setLight,args:[ut.light]});var jt={},sr=[];(function(br,Lr,Dr,jr){var Sr;for(Sr in Lr=Lr||{},br=br||{})br.hasOwnProperty(Sr)&&(Lr.hasOwnProperty(Sr)||_t(Sr,Dr,jr));for(Sr in Lr)Lr.hasOwnProperty(Sr)&&(br.hasOwnProperty(Sr)?t.deepEqual(br[Sr],Lr[Sr])||(br[Sr].type==="geojson"&&Lr[Sr].type==="geojson"&&Dt(br,Lr,Sr)?Dr.push({command:bt.setGeoJSONSourceData,args:[Sr,Lr[Sr].data]}):Rt(Sr,Lr,Dr,jr)):kt(Sr,Lr,Dr))})(Xe.sources,ut.sources,sr,jt);var pr=[];Xe.layers&&Xe.layers.forEach(function(br){jt[br.source]?yt.push({command:bt.removeLayer,args:[br.id]}):pr.push(br)}),yt=yt.concat(sr),function(br,Lr,Dr){Lr=Lr||[];var jr,Sr,Ur,$r,cn,In,An,Dn=(br=br||[]).map(Bt),Jn=Lr.map(Bt),ha=br.reduce(tr,{}),la=Lr.reduce(tr,{}),wa=Dn.slice(),Ea=Object.create(null);for(jr=0,Sr=0;jr<Dn.length;jr++)la.hasOwnProperty(Ur=Dn[jr])?Sr++:(Dr.push({command:bt.removeLayer,args:[Ur]}),wa.splice(wa.indexOf(Ur,Sr),1));for(jr=0,Sr=0;jr<Jn.length;jr++)wa[wa.length-1-jr]!==(Ur=Jn[Jn.length-1-jr])&&(ha.hasOwnProperty(Ur)?(Dr.push({command:bt.removeLayer,args:[Ur]}),wa.splice(wa.lastIndexOf(Ur,wa.length-Sr),1)):Sr++,Dr.push({command:bt.addLayer,args:[la[Ur],In=wa[wa.length-jr]]}),wa.splice(wa.length-jr,0,Ur),Ea[Ur]=!0);for(jr=0;jr<Jn.length;jr++)if($r=ha[Ur=Jn[jr]],cn=la[Ur],!Ea[Ur]&&!t.deepEqual($r,cn))if(t.deepEqual($r.source,cn.source)&&t.deepEqual($r["source-layer"],cn["source-layer"])&&t.deepEqual($r.type,cn.type)){for(An in Ut($r.layout,cn.layout,Dr,Ur,null,bt.setLayoutProperty),Ut($r.paint,cn.paint,Dr,Ur,null,bt.setPaintProperty),t.deepEqual($r.filter,cn.filter)||Dr.push({command:bt.setFilter,args:[Ur,cn.filter]}),t.deepEqual($r.minzoom,cn.minzoom)&&t.deepEqual($r.maxzoom,cn.maxzoom)||Dr.push({command:bt.setLayerZoomRange,args:[Ur,cn.minzoom,cn.maxzoom]}),$r)$r.hasOwnProperty(An)&&An!=="layout"&&An!=="paint"&&An!=="filter"&&An!=="metadata"&&An!=="minzoom"&&An!=="maxzoom"&&(An.indexOf("paint.")===0?Ut($r[An],cn[An],Dr,Ur,An.slice(6),bt.setPaintProperty):t.deepEqual($r[An],cn[An])||Dr.push({command:bt.setLayerProperty,args:[Ur,An,cn[An]]}));for(An in cn)cn.hasOwnProperty(An)&&!$r.hasOwnProperty(An)&&An!=="layout"&&An!=="paint"&&An!=="filter"&&An!=="metadata"&&An!=="minzoom"&&An!=="maxzoom"&&(An.indexOf("paint.")===0?Ut($r[An],cn[An],Dr,Ur,An.slice(6),bt.setPaintProperty):t.deepEqual($r[An],cn[An])||Dr.push({command:bt.setLayerProperty,args:[Ur,An,cn[An]]}))}else Dr.push({command:bt.removeLayer,args:[Ur]}),In=wa[wa.lastIndexOf(Ur)+1],Dr.push({command:bt.addLayer,args:[cn,In]})}(pr,ut.layers,yt)}catch(br){console.warn("Unable to compute style diff:",br),yt=[{command:bt.setStyle,args:[ut]}]}return yt}(this.serialize(),q).filter(function(Xe){return!(Xe.command in Yr)});if(Se.length===0)return!1;var Oe=Se.filter(function(Xe){return!(Xe.command in yr)});if(Oe.length>0)throw new Error("Unimplemented: "+Oe.map(function(Xe){return Xe.command}).join(", ")+".");return Se.forEach(function(Xe){Xe.command!=="setTransition"&&ve[Xe.command].apply(ve,Xe.args)}),this.stylesheet=q,!0},ne.prototype.addImage=function(q,ve){if(this.getImage(q))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(q,ve),this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},ne.prototype.updateImage=function(q,ve){this.imageManager.updateImage(q,ve)},ne.prototype.getImage=function(q){return this.imageManager.getImage(q)},ne.prototype.removeImage=function(q){if(!this.getImage(q))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(q),this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},ne.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},ne.prototype.addSource=function(q,ve,Se){var Oe=this;if(Se===void 0&&(Se={}),this._checkLoaded(),this.sourceCaches[q]!==void 0)throw new Error("There is already a source with this ID");if(!ve.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ve).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(ve.type)>=0&&this._validate(t.validateStyle.source,"sources."+q,ve,null,Se))){this.map&&this.map._collectResourceTiming&&(ve.collectResourceTiming=!0);var Xe=this.sourceCaches[q]=new ft(q,ve,this.dispatcher);Xe.style=this,Xe.setEventedParent(this,function(){return{isSourceLoaded:Oe.loaded(),source:Xe.serialize(),sourceId:q}}),Xe.onAdd(this.map),this._changed=!0}},ne.prototype.removeSource=function(q){if(this._checkLoaded(),this.sourceCaches[q]===void 0)throw new Error("There is no source with this ID");for(var ve in this._layers)if(this._layers[ve].source===q)return this.fire(new t.ErrorEvent(new Error('Source "'+q+'" cannot be removed while layer "'+ve+'" is using it.')));var Se=this.sourceCaches[q];delete this.sourceCaches[q],delete this._updatedSources[q],Se.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:q})),Se.setEventedParent(null),Se.clearTiles(),Se.onRemove&&Se.onRemove(this.map),this._changed=!0},ne.prototype.setGeoJSONSourceData=function(q,ve){this._checkLoaded(),this.sourceCaches[q].getSource().setData(ve),this._changed=!0},ne.prototype.getSource=function(q){return this.sourceCaches[q]&&this.sourceCaches[q].getSource()},ne.prototype.addLayer=function(q,ve,Se){Se===void 0&&(Se={}),this._checkLoaded();var Oe=q.id;if(this.getLayer(Oe))this.fire(new t.ErrorEvent(new Error('Layer with id "'+Oe+'" already exists on this map')));else{var Xe;if(q.type==="custom"){if(Xt(this,t.validateCustomStyleLayer(q)))return;Xe=t.createStyleLayer(q)}else{if(typeof q.source=="object"&&(this.addSource(Oe,q.source),q=t.clone$1(q),q=t.extend(q,{source:Oe})),this._validate(t.validateStyle.layer,"layers."+Oe,q,{arrayIndex:-1},Se))return;Xe=t.createStyleLayer(q),this._validateLayer(Xe),Xe.setEventedParent(this,{layer:{id:Oe}}),this._serializedLayers[Xe.id]=Xe.serialize()}var ut=ve?this._order.indexOf(ve):this._order.length;if(ve&&ut===-1)this.fire(new t.ErrorEvent(new Error('Layer with id "'+ve+'" does not exist on this map.')));else{if(this._order.splice(ut,0,Oe),this._layerOrderChanged=!0,this._layers[Oe]=Xe,this._removedLayers[Oe]&&Xe.source&&Xe.type!=="custom"){var yt=this._removedLayers[Oe];delete this._removedLayers[Oe],yt.type!==Xe.type?this._updatedSources[Xe.source]="clear":(this._updatedSources[Xe.source]="reload",this.sourceCaches[Xe.source].pause())}this._updateLayer(Xe),Xe.onAdd&&Xe.onAdd(this.map)}}},ne.prototype.moveLayer=function(q,ve){if(this._checkLoaded(),this._changed=!0,this._layers[q]){if(q!==ve){var Se=this._order.indexOf(q);this._order.splice(Se,1);var Oe=ve?this._order.indexOf(ve):this._order.length;ve&&Oe===-1?this.fire(new t.ErrorEvent(new Error('Layer with id "'+ve+'" does not exist on this map.'))):(this._order.splice(Oe,0,q),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be moved.")))},ne.prototype.removeLayer=function(q){this._checkLoaded();var ve=this._layers[q];if(ve){ve.setEventedParent(null);var Se=this._order.indexOf(q);this._order.splice(Se,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[q]=ve,delete this._layers[q],delete this._serializedLayers[q],delete this._updatedLayers[q],delete this._updatedPaintProps[q],ve.onRemove&&ve.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be removed.")))},ne.prototype.getLayer=function(q){return this._layers[q]},ne.prototype.hasLayer=function(q){return q in this._layers},ne.prototype.setLayerZoomRange=function(q,ve,Se){this._checkLoaded();var Oe=this.getLayer(q);Oe?Oe.minzoom===ve&&Oe.maxzoom===Se||(ve!=null&&(Oe.minzoom=ve),Se!=null&&(Oe.maxzoom=Se),this._updateLayer(Oe)):this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot have zoom extent.")))},ne.prototype.setFilter=function(q,ve,Se){Se===void 0&&(Se={}),this._checkLoaded();var Oe=this.getLayer(q);if(Oe){if(!t.deepEqual(Oe.filter,ve))return ve==null?(Oe.filter=void 0,void this._updateLayer(Oe)):void(this._validate(t.validateStyle.filter,"layers."+Oe.id+".filter",ve,null,Se)||(Oe.filter=t.clone$1(ve),this._updateLayer(Oe)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be filtered.")))},ne.prototype.getFilter=function(q){return t.clone$1(this.getLayer(q).filter)},ne.prototype.setLayoutProperty=function(q,ve,Se,Oe){Oe===void 0&&(Oe={}),this._checkLoaded();var Xe=this.getLayer(q);Xe?t.deepEqual(Xe.getLayoutProperty(ve),Se)||(Xe.setLayoutProperty(ve,Se,Oe),this._updateLayer(Xe)):this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},ne.prototype.getLayoutProperty=function(q,ve){var Se=this.getLayer(q);if(Se)return Se.getLayoutProperty(ve);this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style.")))},ne.prototype.setPaintProperty=function(q,ve,Se,Oe){Oe===void 0&&(Oe={}),this._checkLoaded();var Xe=this.getLayer(q);Xe?t.deepEqual(Xe.getPaintProperty(ve),Se)||(Xe.setPaintProperty(ve,Se,Oe)&&this._updateLayer(Xe),this._changed=!0,this._updatedPaintProps[q]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},ne.prototype.getPaintProperty=function(q,ve){return this.getLayer(q).getPaintProperty(ve)},ne.prototype.setFeatureState=function(q,ve){this._checkLoaded();var Se=q.source,Oe=q.sourceLayer,Xe=this.sourceCaches[Se];if(Xe!==void 0){var ut=Xe.getSource().type;ut==="geojson"&&Oe?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ut!=="vector"||Oe?(q.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Xe.setFeatureState(Oe,q.id,ve)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+Se+"' does not exist in the map's style.")))},ne.prototype.removeFeatureState=function(q,ve){this._checkLoaded();var Se=q.source,Oe=this.sourceCaches[Se];if(Oe!==void 0){var Xe=Oe.getSource().type,ut=Xe==="vector"?q.sourceLayer:void 0;Xe!=="vector"||ut?ve&&typeof q.id!="string"&&typeof q.id!="number"?this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):Oe.removeFeatureState(ut,q.id,ve):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+Se+"' does not exist in the map's style.")))},ne.prototype.getFeatureState=function(q){this._checkLoaded();var ve=q.source,Se=q.sourceLayer,Oe=this.sourceCaches[ve];if(Oe!==void 0){if(Oe.getSource().type!=="vector"||Se)return q.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Oe.getFeatureState(Se,q.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+ve+"' does not exist in the map's style.")))},ne.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},ne.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(q){return q.serialize()}),layers:this._serializeLayers(this._order)},function(q){return q!==void 0})},ne.prototype._updateLayer=function(q){this._updatedLayers[q.id]=!0,q.source&&!this._updatedSources[q.source]&&this.sourceCaches[q.source].getSource().type!=="raster"&&(this._updatedSources[q.source]="reload",this.sourceCaches[q.source].pause()),this._changed=!0},ne.prototype._flattenAndSortRenderedFeatures=function(q){for(var ve=this,Se=function(ha){return ve._layers[ha].type==="fill-extrusion"},Oe={},Xe=[],ut=this._order.length-1;ut>=0;ut--){var yt=this._order[ut];if(Se(yt)){Oe[yt]=ut;for(var jt=0,sr=q;jt<sr.length;jt+=1){var pr=sr[jt][yt];if(pr)for(var br=0,Lr=pr;br<Lr.length;br+=1)Xe.push(Lr[br])}}}Xe.sort(function(ha,la){return la.intersectionZ-ha.intersectionZ});for(var Dr=[],jr=this._order.length-1;jr>=0;jr--){var Sr=this._order[jr];if(Se(Sr))for(var Ur=Xe.length-1;Ur>=0;Ur--){var $r=Xe[Ur].feature;if(Oe[$r.layer.id]<jr)break;Dr.push($r),Xe.pop()}else for(var cn=0,In=q;cn<In.length;cn+=1){var An=In[cn][Sr];if(An)for(var Dn=0,Jn=An;Dn<Jn.length;Dn+=1)Dr.push(Jn[Dn].feature)}}return Dr},ne.prototype.queryRenderedFeatures=function(q,ve,Se){ve&&ve.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",ve.filter,null,ve);var Oe={};if(ve&&ve.layers){if(!Array.isArray(ve.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Xe=0,ut=ve.layers;Xe<ut.length;Xe+=1){var yt=ut[Xe],jt=this._layers[yt];if(!jt)return this.fire(new t.ErrorEvent(new Error("The layer '"+yt+"' does not exist in the map's style and cannot be queried for features."))),[];Oe[jt.source]=!0}}var sr=[];for(var pr in ve.availableImages=this._availableImages,this.sourceCaches)ve.layers&&!Oe[pr]||sr.push(ie(this.sourceCaches[pr],this._layers,this._serializedLayers,q,ve,Se));return this.placement&&sr.push(function(br,Lr,Dr,jr,Sr,Ur,$r){for(var cn={},In=Ur.queryRenderedSymbols(jr),An=[],Dn=0,Jn=Object.keys(In).map(Number);Dn<Jn.length;Dn+=1)An.push($r[Jn[Dn]]);An.sort(se);for(var ha=function(){var ti=wa[la],Oi=ti.featureIndex.lookupSymbolFeatures(In[ti.bucketInstanceId],Lr,ti.bucketIndex,ti.sourceLayerIndex,Sr.filter,Sr.layers,Sr.availableImages,br);for(var Va in Oi){var gi=cn[Va]=cn[Va]||[],Ri=Oi[Va];Ri.sort(function(Li,ni){var Ha=ti.featureSortOrder;if(Ha){var as=Ha.indexOf(Li.featureIndex);return Ha.indexOf(ni.featureIndex)-as}return ni.featureIndex-Li.featureIndex});for(var ci=0,li=Ri;ci<li.length;ci+=1)gi.push(li[ci])}},la=0,wa=An;la<wa.length;la+=1)ha();var Ea=function(ti){cn[ti].forEach(function(Oi){var Va=Oi.feature,gi=Dr[br[ti].source].getFeatureState(Va.layer["source-layer"],Va.id);Va.source=Va.layer.source,Va.layer["source-layer"]&&(Va.sourceLayer=Va.layer["source-layer"]),Va.state=gi})};for(var ii in cn)Ea(ii);return cn}(this._layers,this._serializedLayers,this.sourceCaches,q,ve,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(sr)},ne.prototype.querySourceFeatures=function(q,ve){ve&&ve.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",ve.filter,null,ve);var Se=this.sourceCaches[q];return Se?function(Oe,Xe){for(var ut=Oe.getRenderableIds().map(function(Lr){return Oe.getTileByID(Lr)}),yt=[],jt={},sr=0;sr<ut.length;sr++){var pr=ut[sr],br=pr.tileID.canonical.key;jt[br]||(jt[br]=!0,pr.querySourceFeatures(yt,Xe))}return yt}(Se,ve):[]},ne.prototype.addSourceType=function(q,ve,Se){return ne.getSourceType(q)?Se(new Error('A source type called "'+q+'" already exists.')):(ne.setSourceType(q,ve),ve.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:q,url:ve.workerSourceURL},Se):Se(null,null))},ne.prototype.getLight=function(){return this.light.getLight()},ne.prototype.setLight=function(q,ve){ve===void 0&&(ve={}),this._checkLoaded();var Se=this.light.getLight(),Oe=!1;for(var Xe in q)if(!t.deepEqual(q[Xe],Se[Xe])){Oe=!0;break}if(Oe){var ut={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(q,ve),this.light.updateTransitions(ut)}},ne.prototype._validate=function(q,ve,Se,Oe,Xe){return Xe===void 0&&(Xe={}),(!Xe||Xe.validate!==!1)&&Xt(this,q.call(t.validateStyle,t.extend({key:ve,style:this.serialize(),value:Se,styleSpec:t.styleSpec},Oe)))},ne.prototype._remove=function(){for(var q in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[q].setEventedParent(null);for(var ve in this.sourceCaches)this.sourceCaches[ve].clearTiles(),this.sourceCaches[ve].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},ne.prototype._clearSource=function(q){this.sourceCaches[q].clearTiles()},ne.prototype._reloadSource=function(q){this.sourceCaches[q].resume(),this.sourceCaches[q].reload()},ne.prototype._updateSources=function(q){for(var ve in this.sourceCaches)this.sourceCaches[ve].update(q)},ne.prototype._generateCollisionBoxes=function(){for(var q in this.sourceCaches)this._reloadSource(q)},ne.prototype._updatePlacement=function(q,ve,Se,Oe,Xe){Xe===void 0&&(Xe=!1);for(var ut=!1,yt=!1,jt={},sr=0,pr=this._order;sr<pr.length;sr+=1){var br=this._layers[pr[sr]];if(br.type==="symbol"){if(!jt[br.source]){var Lr=this.sourceCaches[br.source];jt[br.source]=Lr.getRenderableIds(!0).map(function($r){return Lr.getTileByID($r)}).sort(function($r,cn){return cn.tileID.overscaledZ-$r.tileID.overscaledZ||($r.tileID.isLessThan(cn.tileID)?-1:1)})}var Dr=this.crossTileSymbolIndex.addLayer(br,jt[br.source],q.center.lng);ut=ut||Dr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Xe=Xe||this._layerOrderChanged||Se===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),q.zoom))&&(this.pauseablePlacement=new Gn(q,this._order,Xe,ve,Se,Oe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,jt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),yt=!0),ut&&this.pauseablePlacement.placement.setStale()),yt||ut)for(var jr=0,Sr=this._order;jr<Sr.length;jr+=1){var Ur=this._layers[Sr[jr]];Ur.type==="symbol"&&this.placement.updateLayerOpacities(Ur,jt[Ur.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},ne.prototype._releaseSymbolFadeTiles=function(){for(var q in this.sourceCaches)this.sourceCaches[q].releaseSymbolFadeTiles()},ne.prototype.getImages=function(q,ve,Se){this.imageManager.getImages(ve.icons,Se),this._updateTilesForChangedImages();var Oe=this.sourceCaches[ve.source];Oe&&Oe.setDependencies(ve.tileID.key,ve.type,ve.icons)},ne.prototype.getGlyphs=function(q,ve,Se){this.glyphManager.getGlyphs(ve.stacks,Se)},ne.prototype.getResource=function(q,ve,Se){return t.makeRequest(ve,Se)},ne}(t.Evented);qr.getSourceType=function(J){return te[J]},qr.setSourceType=function(J,ne){te[J]=ne},qr.registerForPluginStateChange=t.registerForPluginStateChange;var rn=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),hn=go(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),tn=go(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),wr=go(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),zr=go(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Tr=go("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Fn=go(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Bn=go(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),sa=go("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Pa=go("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ia=go("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ri=go(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Ai=go(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Bi=go(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Qa=go(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),yi=go(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),As=go(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),qo=go(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Tu=go(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ms=go(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Zu=go(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Au=go(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),su=go(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Sc=go(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),zu=go(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Po=go(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),al=go(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function go(J,ne){var q=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,ve={};return{fragmentSource:J=J.replace(q,function(Se,Oe,Xe,ut,yt){return ve[yt]=!0,Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+yt+`
varying `+Xe+" "+ut+" "+yt+`;
#else
uniform `+Xe+" "+ut+" u_"+yt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+yt+`
    `+Xe+" "+ut+" "+yt+" = u_"+yt+`;
#endif
`}),vertexSource:ne=ne.replace(q,function(Se,Oe,Xe,ut,yt){var jt=ut==="float"?"vec2":"vec4",sr=yt.match(/color/)?"color":jt;return ve[yt]?Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+yt+`
uniform lowp float u_`+yt+`_t;
attribute `+Xe+" "+jt+" a_"+yt+`;
varying `+Xe+" "+ut+" "+yt+`;
#else
uniform `+Xe+" "+ut+" u_"+yt+`;
#endif
`:sr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+yt+`
    `+yt+" = a_"+yt+`;
#else
    `+Xe+" "+ut+" "+yt+" = u_"+yt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+yt+`
    `+yt+" = unpack_mix_"+sr+"(a_"+yt+", u_"+yt+`_t);
#else
    `+Xe+" "+ut+" "+yt+" = u_"+yt+`;
#endif
`:Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+yt+`
uniform lowp float u_`+yt+`_t;
attribute `+Xe+" "+jt+" a_"+yt+`;
#else
uniform `+Xe+" "+ut+" u_"+yt+`;
#endif
`:sr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+yt+`
    `+Xe+" "+ut+" "+yt+" = a_"+yt+`;
#else
    `+Xe+" "+ut+" "+yt+" = u_"+yt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+yt+`
    `+Xe+" "+ut+" "+yt+" = unpack_mix_"+sr+"(a_"+yt+", u_"+yt+`_t);
#else
    `+Xe+" "+ut+" "+yt+" = u_"+yt+`;
#endif
`})}}var ah=Object.freeze({__proto__:null,prelude:hn,background:tn,backgroundPattern:wr,circle:zr,clippingMask:Tr,heatmap:Fn,heatmapTexture:Bn,collisionBox:sa,collisionCircle:Pa,debug:ia,fill:ri,fillOutline:Ai,fillOutlinePattern:Bi,fillPattern:Qa,fillExtrusion:yi,fillExtrusionPattern:As,hillshadePrepare:qo,hillshade:Tu,line:Ms,lineGradient:Zu,linePattern:Au,lineSDF:su,raster:Sc,symbolIcon:zu,symbolSDF:Po,symbolTextAndIcon:al}),lu=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};lu.prototype.bind=function(J,ne,q,ve,Se,Oe,Xe,ut){this.context=J;for(var yt=this.boundPaintVertexBuffers.length!==ve.length,jt=0;!yt&&jt<ve.length;jt++)this.boundPaintVertexBuffers[jt]!==ve[jt]&&(yt=!0);J.extVertexArrayObject&&this.vao&&this.boundProgram===ne&&this.boundLayoutVertexBuffer===q&&!yt&&this.boundIndexBuffer===Se&&this.boundVertexOffset===Oe&&this.boundDynamicVertexBuffer===Xe&&this.boundDynamicVertexBuffer2===ut?(J.bindVertexArrayOES.set(this.vao),Xe&&Xe.bind(),Se&&Se.dynamicDraw&&Se.bind(),ut&&ut.bind()):this.freshBind(ne,q,ve,Se,Oe,Xe,ut)},lu.prototype.freshBind=function(J,ne,q,ve,Se,Oe,Xe){var ut,yt=J.numAttributes,jt=this.context,sr=jt.gl;if(jt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=jt.extVertexArrayObject.createVertexArrayOES(),jt.bindVertexArrayOES.set(this.vao),ut=0,this.boundProgram=J,this.boundLayoutVertexBuffer=ne,this.boundPaintVertexBuffers=q,this.boundIndexBuffer=ve,this.boundVertexOffset=Se,this.boundDynamicVertexBuffer=Oe,this.boundDynamicVertexBuffer2=Xe;else{ut=jt.currentNumAttributes||0;for(var pr=yt;pr<ut;pr++)sr.disableVertexAttribArray(pr)}ne.enableAttributes(sr,J);for(var br=0,Lr=q;br<Lr.length;br+=1)Lr[br].enableAttributes(sr,J);Oe&&Oe.enableAttributes(sr,J),Xe&&Xe.enableAttributes(sr,J),ne.bind(),ne.setVertexAttribPointers(sr,J,Se);for(var Dr=0,jr=q;Dr<jr.length;Dr+=1){var Sr=jr[Dr];Sr.bind(),Sr.setVertexAttribPointers(sr,J,Se)}Oe&&(Oe.bind(),Oe.setVertexAttribPointers(sr,J,Se)),ve&&ve.bind(),Xe&&(Xe.bind(),Xe.setVertexAttribPointers(sr,J,Se)),jt.currentNumAttributes=yt},lu.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ef=function(J,ne,q,ve,Se){var Oe=J.gl;this.program=Oe.createProgram();var Xe=q?q.defines():[];Se&&Xe.push("#define OVERDRAW_INSPECTOR;");var ut=Xe.concat(hn.fragmentSource,ne.fragmentSource).join(`
`),yt=Xe.concat(hn.vertexSource,ne.vertexSource).join(`
`),jt=Oe.createShader(Oe.FRAGMENT_SHADER);if(Oe.isContextLost())this.failedToCreate=!0;else{Oe.shaderSource(jt,ut),Oe.compileShader(jt),Oe.attachShader(this.program,jt);var sr=Oe.createShader(Oe.VERTEX_SHADER);if(Oe.isContextLost())this.failedToCreate=!0;else{Oe.shaderSource(sr,yt),Oe.compileShader(sr),Oe.attachShader(this.program,sr);for(var pr=q?q.layoutAttributes:[],br=0;br<pr.length;br++)Oe.bindAttribLocation(this.program,br,pr[br].name);Oe.linkProgram(this.program),Oe.deleteShader(sr),Oe.deleteShader(jt),this.numAttributes=Oe.getProgramParameter(this.program,Oe.ACTIVE_ATTRIBUTES),this.attributes={};for(var Lr={},Dr=0;Dr<this.numAttributes;Dr++){var jr=Oe.getActiveAttrib(this.program,Dr);jr&&(this.attributes[jr.name]=Oe.getAttribLocation(this.program,jr.name))}for(var Sr=Oe.getProgramParameter(this.program,Oe.ACTIVE_UNIFORMS),Ur=0;Ur<Sr;Ur++){var $r=Oe.getActiveUniform(this.program,Ur);$r&&(Lr[$r.name]=Oe.getUniformLocation(this.program,$r.name))}this.fixedUniforms=ve(J,Lr),this.binderUniforms=q?q.getUniforms(J,Lr):[]}}};function uu(J,ne,q){var ve=1/_n(q,1,ne.transform.tileZoom),Se=Math.pow(2,q.tileID.overscaledZ),Oe=q.tileSize*Math.pow(2,ne.transform.tileZoom)/Se,Xe=Oe*(q.tileID.canonical.x+q.tileID.wrap*Se),ut=Oe*q.tileID.canonical.y;return{u_image:0,u_texsize:q.imageAtlasTexture.size,u_scale:[ve,J.fromScale,J.toScale],u_fade:J.t,u_pixel_coord_upper:[Xe>>16,ut>>16],u_pixel_coord_lower:[65535&Xe,65535&ut]}}Ef.prototype.draw=function(J,ne,q,ve,Se,Oe,Xe,ut,yt,jt,sr,pr,br,Lr,Dr,jr){var Sr,Ur=J.gl;if(!this.failedToCreate){for(var $r in J.program.set(this.program),J.setDepthMode(q),J.setStencilMode(ve),J.setColorMode(Se),J.setCullFace(Oe),this.fixedUniforms)this.fixedUniforms[$r].set(Xe[$r]);Lr&&Lr.setUniforms(J,this.binderUniforms,pr,{zoom:br});for(var cn=(Sr={},Sr[Ur.LINES]=2,Sr[Ur.TRIANGLES]=3,Sr[Ur.LINE_STRIP]=1,Sr)[ne],In=0,An=sr.get();In<An.length;In+=1){var Dn=An[In],Jn=Dn.vaos||(Dn.vaos={});(Jn[ut]||(Jn[ut]=new lu)).bind(J,this,yt,Lr?Lr.getPaintVertexBuffers():[],jt,Dn.vertexOffset,Dr,jr),Ur.drawElements(ne,Dn.primitiveLength*cn,Ur.UNSIGNED_SHORT,Dn.primitiveOffset*cn*2)}}};var Xl=function(J,ne,q,ve){var Se=ne.style.light,Oe=Se.properties.get("position"),Xe=[Oe.x,Oe.y,Oe.z],ut=t.create$1();Se.properties.get("anchor")==="viewport"&&t.fromRotation(ut,-ne.transform.angle),t.transformMat3(Xe,Xe,ut);var yt=Se.properties.get("color");return{u_matrix:J,u_lightpos:Xe,u_lightintensity:Se.properties.get("intensity"),u_lightcolor:[yt.r,yt.g,yt.b],u_vertical_gradient:+q,u_opacity:ve}},Mu=function(J,ne,q,ve,Se,Oe,Xe){return t.extend(Xl(J,ne,q,ve),uu(Oe,ne,Xe),{u_height_factor:-Math.pow(2,Se.overscaledZ)/Xe.tileSize/8})},ku=function(J){return{u_matrix:J}},pl=function(J,ne,q,ve){return t.extend(ku(J),uu(q,ne,ve))},il=function(J,ne){return{u_matrix:J,u_world:ne}},Ou=function(J,ne,q,ve,Se){return t.extend(pl(J,ne,q,ve),{u_world:Se})},Su=function(J,ne,q,ve){var Se,Oe,Xe=J.transform;if(ve.paint.get("circle-pitch-alignment")==="map"){var ut=_n(q,1,Xe.zoom);Se=!0,Oe=[ut,ut]}else Se=!1,Oe=Xe.pixelsToGLUnits;return{u_camera_to_center_distance:Xe.cameraToCenterDistance,u_scale_with_map:+(ve.paint.get("circle-pitch-scale")==="map"),u_matrix:J.translatePosMatrix(ne.posMatrix,q,ve.paint.get("circle-translate"),ve.paint.get("circle-translate-anchor")),u_pitch_with_map:+Se,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:Oe}},Zl=function(J,ne,q){var ve=_n(q,1,ne.zoom),Se=Math.pow(2,ne.zoom-q.tileID.overscaledZ),Oe=q.tileID.overscaleFactor();return{u_matrix:J,u_camera_to_center_distance:ne.cameraToCenterDistance,u_pixels_to_tile_units:ve,u_extrude_scale:[ne.pixelsToGLUnits[0]/(ve*Se),ne.pixelsToGLUnits[1]/(ve*Se)],u_overscale_factor:Oe}},dl=function(J,ne,q){return{u_matrix:J,u_inv_matrix:ne,u_camera_to_center_distance:q.cameraToCenterDistance,u_viewport_size:[q.width,q.height]}},lc=function(J,ne,q){return q===void 0&&(q=1),{u_matrix:J,u_color:ne,u_overlay:0,u_overlay_scale:q}},Ku=function(J){return{u_matrix:J}},$i=function(J,ne,q,ve){return{u_matrix:J,u_extrude_scale:_n(ne,1,q),u_intensity:ve}},Gs=function(J,ne,q){var ve=J.transform;return{u_matrix:Ml(J,ne,q),u_ratio:1/_n(ne,1,ve.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/ve.pixelsToGLUnits[0],1/ve.pixelsToGLUnits[1]]}},$c=function(J,ne,q){return t.extend(Gs(J,ne,q),{u_image:0})},cu=function(J,ne,q,ve){var Se=J.transform,Oe=fu(ne,Se);return{u_matrix:Ml(J,ne,q),u_texsize:ne.imageAtlasTexture.size,u_ratio:1/_n(ne,1,Se.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[Oe,ve.fromScale,ve.toScale],u_fade:ve.t,u_units_to_pixels:[1/Se.pixelsToGLUnits[0],1/Se.pixelsToGLUnits[1]]}},ks=function(J,ne,q,ve,Se){var Oe=J.lineAtlas,Xe=fu(ne,J.transform),ut=q.layout.get("line-cap")==="round",yt=Oe.getDash(ve.from,ut),jt=Oe.getDash(ve.to,ut),sr=yt.width*Se.fromScale,pr=jt.width*Se.toScale;return t.extend(Gs(J,ne,q),{u_patternscale_a:[Xe/sr,-yt.height/2],u_patternscale_b:[Xe/pr,-jt.height/2],u_sdfgamma:Oe.width/(256*Math.min(sr,pr)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:yt.y,u_tex_y_b:jt.y,u_mix:Se.t})};function fu(J,ne){return 1/_n(J,1,ne.tileZoom)}function Ml(J,ne,q){return J.translatePosMatrix(ne.tileID.posMatrix,ne,q.paint.get("line-translate"),q.paint.get("line-translate-anchor"))}var vl=function(J,ne,q,ve,Se){return{u_matrix:J,u_tl_parent:ne,u_scale_parent:q,u_buffer_scale:1,u_fade_t:ve.mix,u_opacity:ve.opacity*Se.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Se.paint.get("raster-brightness-min"),u_brightness_high:Se.paint.get("raster-brightness-max"),u_saturation_factor:(Xe=Se.paint.get("raster-saturation"),Xe>0?1-1/(1.001-Xe):-Xe),u_contrast_factor:(Oe=Se.paint.get("raster-contrast"),Oe>0?1/(1-Oe):1+Oe),u_spin_weights:kl(Se.paint.get("raster-hue-rotate"))};var Oe,Xe};function kl(J){J*=Math.PI/180;var ne=Math.sin(J),q=Math.cos(J);return[(2*q+1)/3,(-Math.sqrt(3)*ne-q+1)/3,(Math.sqrt(3)*ne-q+1)/3]}var ol,ml=function(J,ne,q,ve,Se,Oe,Xe,ut,yt,jt){var sr=Se.transform;return{u_is_size_zoom_constant:+(J==="constant"||J==="source"),u_is_size_feature_constant:+(J==="constant"||J==="camera"),u_size_t:ne?ne.uSizeT:0,u_size:ne?ne.uSize:0,u_camera_to_center_distance:sr.cameraToCenterDistance,u_pitch:sr.pitch/360*2*Math.PI,u_rotate_symbol:+q,u_aspect_ratio:sr.width/sr.height,u_fade_change:Se.options.fadeDuration?Se.symbolFadeChange:1,u_matrix:Oe,u_label_plane_matrix:Xe,u_coord_matrix:ut,u_is_text:+yt,u_pitch_with_map:+ve,u_texsize:jt,u_texture:0}},gs=function(J,ne,q,ve,Se,Oe,Xe,ut,yt,jt,sr){var pr=Se.transform;return t.extend(ml(J,ne,q,ve,Se,Oe,Xe,ut,yt,jt),{u_gamma_scale:ve?Math.cos(pr._pitch)*pr.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+sr})},Kl=function(J,ne,q,ve,Se,Oe,Xe,ut,yt,jt){return t.extend(gs(J,ne,q,ve,Se,Oe,Xe,ut,!0,yt,!0),{u_texsize_icon:jt,u_texture_icon:1})},hu=function(J,ne,q){return{u_matrix:J,u_opacity:ne,u_color:q}},es=function(J,ne,q,ve,Se,Oe){return t.extend(function(Xe,ut,yt,jt){var sr=yt.imageManager.getPattern(Xe.from.toString()),pr=yt.imageManager.getPattern(Xe.to.toString()),br=yt.imageManager.getPixelSize(),Lr=br.width,Dr=br.height,jr=Math.pow(2,jt.tileID.overscaledZ),Sr=jt.tileSize*Math.pow(2,yt.transform.tileZoom)/jr,Ur=Sr*(jt.tileID.canonical.x+jt.tileID.wrap*jr),$r=Sr*jt.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:sr.tl,u_pattern_br_a:sr.br,u_pattern_tl_b:pr.tl,u_pattern_br_b:pr.br,u_texsize:[Lr,Dr],u_mix:ut.t,u_pattern_size_a:sr.displaySize,u_pattern_size_b:pr.displaySize,u_scale_a:ut.fromScale,u_scale_b:ut.toScale,u_tile_units_to_pixels:1/_n(jt,1,yt.transform.tileZoom),u_pixel_coord_upper:[Ur>>16,$r>>16],u_pixel_coord_lower:[65535&Ur,65535&$r]}}(ve,Oe,q,Se),{u_matrix:J,u_opacity:ne})},sl={fillExtrusion:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_lightpos:new t.Uniform3f(J,ne.u_lightpos),u_lightintensity:new t.Uniform1f(J,ne.u_lightintensity),u_lightcolor:new t.Uniform3f(J,ne.u_lightcolor),u_vertical_gradient:new t.Uniform1f(J,ne.u_vertical_gradient),u_opacity:new t.Uniform1f(J,ne.u_opacity)}},fillExtrusionPattern:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_lightpos:new t.Uniform3f(J,ne.u_lightpos),u_lightintensity:new t.Uniform1f(J,ne.u_lightintensity),u_lightcolor:new t.Uniform3f(J,ne.u_lightcolor),u_vertical_gradient:new t.Uniform1f(J,ne.u_vertical_gradient),u_height_factor:new t.Uniform1f(J,ne.u_height_factor),u_image:new t.Uniform1i(J,ne.u_image),u_texsize:new t.Uniform2f(J,ne.u_texsize),u_pixel_coord_upper:new t.Uniform2f(J,ne.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(J,ne.u_pixel_coord_lower),u_scale:new t.Uniform3f(J,ne.u_scale),u_fade:new t.Uniform1f(J,ne.u_fade),u_opacity:new t.Uniform1f(J,ne.u_opacity)}},fill:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix)}},fillPattern:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_image:new t.Uniform1i(J,ne.u_image),u_texsize:new t.Uniform2f(J,ne.u_texsize),u_pixel_coord_upper:new t.Uniform2f(J,ne.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(J,ne.u_pixel_coord_lower),u_scale:new t.Uniform3f(J,ne.u_scale),u_fade:new t.Uniform1f(J,ne.u_fade)}},fillOutline:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_world:new t.Uniform2f(J,ne.u_world)}},fillOutlinePattern:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_world:new t.Uniform2f(J,ne.u_world),u_image:new t.Uniform1i(J,ne.u_image),u_texsize:new t.Uniform2f(J,ne.u_texsize),u_pixel_coord_upper:new t.Uniform2f(J,ne.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(J,ne.u_pixel_coord_lower),u_scale:new t.Uniform3f(J,ne.u_scale),u_fade:new t.Uniform1f(J,ne.u_fade)}},circle:function(J,ne){return{u_camera_to_center_distance:new t.Uniform1f(J,ne.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(J,ne.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(J,ne.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(J,ne.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(J,ne.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(J,ne.u_matrix)}},collisionBox:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_camera_to_center_distance:new t.Uniform1f(J,ne.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(J,ne.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(J,ne.u_extrude_scale),u_overscale_factor:new t.Uniform1f(J,ne.u_overscale_factor)}},collisionCircle:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_inv_matrix:new t.UniformMatrix4f(J,ne.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(J,ne.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(J,ne.u_viewport_size)}},debug:function(J,ne){return{u_color:new t.UniformColor(J,ne.u_color),u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_overlay:new t.Uniform1i(J,ne.u_overlay),u_overlay_scale:new t.Uniform1f(J,ne.u_overlay_scale)}},clippingMask:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix)}},heatmap:function(J,ne){return{u_extrude_scale:new t.Uniform1f(J,ne.u_extrude_scale),u_intensity:new t.Uniform1f(J,ne.u_intensity),u_matrix:new t.UniformMatrix4f(J,ne.u_matrix)}},heatmapTexture:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_world:new t.Uniform2f(J,ne.u_world),u_image:new t.Uniform1i(J,ne.u_image),u_color_ramp:new t.Uniform1i(J,ne.u_color_ramp),u_opacity:new t.Uniform1f(J,ne.u_opacity)}},hillshade:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_image:new t.Uniform1i(J,ne.u_image),u_latrange:new t.Uniform2f(J,ne.u_latrange),u_light:new t.Uniform2f(J,ne.u_light),u_shadow:new t.UniformColor(J,ne.u_shadow),u_highlight:new t.UniformColor(J,ne.u_highlight),u_accent:new t.UniformColor(J,ne.u_accent)}},hillshadePrepare:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_image:new t.Uniform1i(J,ne.u_image),u_dimension:new t.Uniform2f(J,ne.u_dimension),u_zoom:new t.Uniform1f(J,ne.u_zoom),u_maxzoom:new t.Uniform1f(J,ne.u_maxzoom),u_unpack:new t.Uniform4f(J,ne.u_unpack)}},line:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_ratio:new t.Uniform1f(J,ne.u_ratio),u_device_pixel_ratio:new t.Uniform1f(J,ne.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(J,ne.u_units_to_pixels)}},lineGradient:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_ratio:new t.Uniform1f(J,ne.u_ratio),u_device_pixel_ratio:new t.Uniform1f(J,ne.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(J,ne.u_units_to_pixels),u_image:new t.Uniform1i(J,ne.u_image)}},linePattern:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_texsize:new t.Uniform2f(J,ne.u_texsize),u_ratio:new t.Uniform1f(J,ne.u_ratio),u_device_pixel_ratio:new t.Uniform1f(J,ne.u_device_pixel_ratio),u_image:new t.Uniform1i(J,ne.u_image),u_units_to_pixels:new t.Uniform2f(J,ne.u_units_to_pixels),u_scale:new t.Uniform3f(J,ne.u_scale),u_fade:new t.Uniform1f(J,ne.u_fade)}},lineSDF:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_ratio:new t.Uniform1f(J,ne.u_ratio),u_device_pixel_ratio:new t.Uniform1f(J,ne.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(J,ne.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(J,ne.u_patternscale_a),u_patternscale_b:new t.Uniform2f(J,ne.u_patternscale_b),u_sdfgamma:new t.Uniform1f(J,ne.u_sdfgamma),u_image:new t.Uniform1i(J,ne.u_image),u_tex_y_a:new t.Uniform1f(J,ne.u_tex_y_a),u_tex_y_b:new t.Uniform1f(J,ne.u_tex_y_b),u_mix:new t.Uniform1f(J,ne.u_mix)}},raster:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_tl_parent:new t.Uniform2f(J,ne.u_tl_parent),u_scale_parent:new t.Uniform1f(J,ne.u_scale_parent),u_buffer_scale:new t.Uniform1f(J,ne.u_buffer_scale),u_fade_t:new t.Uniform1f(J,ne.u_fade_t),u_opacity:new t.Uniform1f(J,ne.u_opacity),u_image0:new t.Uniform1i(J,ne.u_image0),u_image1:new t.Uniform1i(J,ne.u_image1),u_brightness_low:new t.Uniform1f(J,ne.u_brightness_low),u_brightness_high:new t.Uniform1f(J,ne.u_brightness_high),u_saturation_factor:new t.Uniform1f(J,ne.u_saturation_factor),u_contrast_factor:new t.Uniform1f(J,ne.u_contrast_factor),u_spin_weights:new t.Uniform3f(J,ne.u_spin_weights)}},symbolIcon:function(J,ne){return{u_is_size_zoom_constant:new t.Uniform1i(J,ne.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(J,ne.u_is_size_feature_constant),u_size_t:new t.Uniform1f(J,ne.u_size_t),u_size:new t.Uniform1f(J,ne.u_size),u_camera_to_center_distance:new t.Uniform1f(J,ne.u_camera_to_center_distance),u_pitch:new t.Uniform1f(J,ne.u_pitch),u_rotate_symbol:new t.Uniform1i(J,ne.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(J,ne.u_aspect_ratio),u_fade_change:new t.Uniform1f(J,ne.u_fade_change),u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(J,ne.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(J,ne.u_coord_matrix),u_is_text:new t.Uniform1i(J,ne.u_is_text),u_pitch_with_map:new t.Uniform1i(J,ne.u_pitch_with_map),u_texsize:new t.Uniform2f(J,ne.u_texsize),u_texture:new t.Uniform1i(J,ne.u_texture)}},symbolSDF:function(J,ne){return{u_is_size_zoom_constant:new t.Uniform1i(J,ne.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(J,ne.u_is_size_feature_constant),u_size_t:new t.Uniform1f(J,ne.u_size_t),u_size:new t.Uniform1f(J,ne.u_size),u_camera_to_center_distance:new t.Uniform1f(J,ne.u_camera_to_center_distance),u_pitch:new t.Uniform1f(J,ne.u_pitch),u_rotate_symbol:new t.Uniform1i(J,ne.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(J,ne.u_aspect_ratio),u_fade_change:new t.Uniform1f(J,ne.u_fade_change),u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(J,ne.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(J,ne.u_coord_matrix),u_is_text:new t.Uniform1i(J,ne.u_is_text),u_pitch_with_map:new t.Uniform1i(J,ne.u_pitch_with_map),u_texsize:new t.Uniform2f(J,ne.u_texsize),u_texture:new t.Uniform1i(J,ne.u_texture),u_gamma_scale:new t.Uniform1f(J,ne.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(J,ne.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(J,ne.u_is_halo)}},symbolTextAndIcon:function(J,ne){return{u_is_size_zoom_constant:new t.Uniform1i(J,ne.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(J,ne.u_is_size_feature_constant),u_size_t:new t.Uniform1f(J,ne.u_size_t),u_size:new t.Uniform1f(J,ne.u_size),u_camera_to_center_distance:new t.Uniform1f(J,ne.u_camera_to_center_distance),u_pitch:new t.Uniform1f(J,ne.u_pitch),u_rotate_symbol:new t.Uniform1i(J,ne.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(J,ne.u_aspect_ratio),u_fade_change:new t.Uniform1f(J,ne.u_fade_change),u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(J,ne.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(J,ne.u_coord_matrix),u_is_text:new t.Uniform1i(J,ne.u_is_text),u_pitch_with_map:new t.Uniform1i(J,ne.u_pitch_with_map),u_texsize:new t.Uniform2f(J,ne.u_texsize),u_texsize_icon:new t.Uniform2f(J,ne.u_texsize_icon),u_texture:new t.Uniform1i(J,ne.u_texture),u_texture_icon:new t.Uniform1i(J,ne.u_texture_icon),u_gamma_scale:new t.Uniform1f(J,ne.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(J,ne.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(J,ne.u_is_halo)}},background:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_opacity:new t.Uniform1f(J,ne.u_opacity),u_color:new t.UniformColor(J,ne.u_color)}},backgroundPattern:function(J,ne){return{u_matrix:new t.UniformMatrix4f(J,ne.u_matrix),u_opacity:new t.Uniform1f(J,ne.u_opacity),u_image:new t.Uniform1i(J,ne.u_image),u_pattern_tl_a:new t.Uniform2f(J,ne.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(J,ne.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(J,ne.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(J,ne.u_pattern_br_b),u_texsize:new t.Uniform2f(J,ne.u_texsize),u_mix:new t.Uniform1f(J,ne.u_mix),u_pattern_size_a:new t.Uniform2f(J,ne.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(J,ne.u_pattern_size_b),u_scale_a:new t.Uniform1f(J,ne.u_scale_a),u_scale_b:new t.Uniform1f(J,ne.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(J,ne.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(J,ne.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(J,ne.u_tile_units_to_pixels)}}};function Yo(J,ne,q,ve,Se,Oe,Xe){for(var ut=J.context,yt=ut.gl,jt=J.useProgram("collisionBox"),sr=[],pr=0,br=0,Lr=0;Lr<ve.length;Lr++){var Dr=ve[Lr],jr=ne.getTile(Dr),Sr=jr.getBucket(q);if(Sr){var Ur=Dr.posMatrix;Se[0]===0&&Se[1]===0||(Ur=J.translatePosMatrix(Dr.posMatrix,jr,Se,Oe));var $r=Xe?Sr.textCollisionBox:Sr.iconCollisionBox,cn=Sr.collisionCircleArray;if(cn.length>0){var In=t.create(),An=Ur;t.mul(In,Sr.placementInvProjMatrix,J.transform.glCoordMatrix),t.mul(In,In,Sr.placementViewportMatrix),sr.push({circleArray:cn,circleOffset:br,transform:An,invTransform:In}),br=pr+=cn.length/4}$r&&jt.draw(ut,yt.LINES,et.disabled,ke.disabled,J.colorModeForRenderPass(),He.disabled,Zl(Ur,J.transform,jr),q.id,$r.layoutVertexBuffer,$r.indexBuffer,$r.segments,null,J.transform.zoom,null,null,$r.collisionVertexBuffer)}}if(Xe&&sr.length){var Dn=J.useProgram("collisionCircle"),Jn=new t.StructArrayLayout2f1f2i16;Jn.resize(4*pr),Jn._trim();for(var ha=0,la=0,wa=sr;la<wa.length;la+=1)for(var Ea=wa[la],ii=0;ii<Ea.circleArray.length/4;ii++){var ti=4*ii,Oi=Ea.circleArray[ti+0],Va=Ea.circleArray[ti+1],gi=Ea.circleArray[ti+2],Ri=Ea.circleArray[ti+3];Jn.emplace(ha++,Oi,Va,gi,Ri,0),Jn.emplace(ha++,Oi,Va,gi,Ri,1),Jn.emplace(ha++,Oi,Va,gi,Ri,2),Jn.emplace(ha++,Oi,Va,gi,Ri,3)}(!ol||ol.length<2*pr)&&(ol=function(Fo){var bo=2*Fo,Ao=new t.StructArrayLayout3ui6;Ao.resize(bo),Ao._trim();for(var Qo=0;Qo<bo;Qo++){var Mo=6*Qo;Ao.uint16[Mo+0]=4*Qo+0,Ao.uint16[Mo+1]=4*Qo+1,Ao.uint16[Mo+2]=4*Qo+2,Ao.uint16[Mo+3]=4*Qo+2,Ao.uint16[Mo+4]=4*Qo+3,Ao.uint16[Mo+5]=4*Qo+0}return Ao}(pr));for(var ci=ut.createIndexBuffer(ol,!0),li=ut.createVertexBuffer(Jn,t.collisionCircleLayout.members,!0),Li=0,ni=sr;Li<ni.length;Li+=1){var Ha=ni[Li],as=dl(Ha.transform,Ha.invTransform,J.transform);Dn.draw(ut,yt.TRIANGLES,et.disabled,ke.disabled,J.colorModeForRenderPass(),He.disabled,as,q.id,li,ci,t.SegmentVector.simpleSegment(0,2*Ha.circleOffset,Ha.circleArray.length,Ha.circleArray.length/2),null,J.transform.zoom,null,null,null)}li.destroy(),ci.destroy()}}var Ec=t.identity(new Float32Array(16));function Cc(J,ne,q,ve,Se,Oe){var Xe=t.getAnchorAlignment(J),ut=-(Xe.horizontalAlign-.5)*ne,yt=-(Xe.verticalAlign-.5)*q,jt=t.evaluateVariableOffset(J,ve);return new t.Point((ut/Se+jt[0])*Oe,(yt/Se+jt[1])*Oe)}function ll(J,ne,q,ve,Se,Oe,Xe,ut,yt,jt,sr){var pr=J.text.placedSymbolArray,br=J.text.dynamicLayoutVertexArray,Lr=J.icon.dynamicLayoutVertexArray,Dr={};br.clear();for(var jr=0;jr<pr.length;jr++){var Sr=pr.get(jr),Ur=Sr.hidden||!Sr.crossTileID||J.allowVerticalPlacement&&!Sr.placedOrientation?null:ve[Sr.crossTileID];if(Ur){var $r=new t.Point(Sr.anchorX,Sr.anchorY),cn=Or($r,q?ut:Xe),In=Fr(Oe.cameraToCenterDistance,cn.signedDistanceFromCamera),An=Se.evaluateSizeForFeature(J.textSizeData,jt,Sr)*In/t.ONE_EM;q&&(An*=J.tilePixelRatio/yt);for(var Dn=Cc(Ur.anchor,Ur.width,Ur.height,Ur.textOffset,Ur.textBoxScale,An),Jn=q?Or($r.add(Dn),Xe).point:cn.point.add(ne?Dn.rotate(-Oe.angle):Dn),ha=J.allowVerticalPlacement&&Sr.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,la=0;la<Sr.numGlyphs;la++)t.addDynamicAttributes(br,Jn,ha);sr&&Sr.associatedIconIndex>=0&&(Dr[Sr.associatedIconIndex]={shiftedAnchor:Jn,angle:ha})}else pn(Sr.numGlyphs,br)}if(sr){Lr.clear();for(var wa=J.icon.placedSymbolArray,Ea=0;Ea<wa.length;Ea++){var ii=wa.get(Ea);if(ii.hidden)pn(ii.numGlyphs,Lr);else{var ti=Dr[Ea];if(ti)for(var Oi=0;Oi<ii.numGlyphs;Oi++)t.addDynamicAttributes(Lr,ti.shiftedAnchor,ti.angle);else pn(ii.numGlyphs,Lr)}}J.icon.dynamicLayoutVertexBuffer.updateData(Lr)}J.text.dynamicLayoutVertexBuffer.updateData(br)}function pu(J,ne,q){return q.iconsInText&&ne?"symbolTextAndIcon":J?"symbolSDF":"symbolIcon"}function Uo(J,ne,q,ve,Se,Oe,Xe,ut,yt,jt,sr,pr){for(var br=J.context,Lr=br.gl,Dr=J.transform,jr=ut==="map",Sr=yt==="map",Ur=jr&&q.layout.get("symbol-placement")!=="point",$r=jr&&!Sr&&!Ur,cn=q.layout.get("symbol-sort-key").constantOr(1)!==void 0,In=J.depthModeForSublayer(0,et.ReadOnly),An=q.layout.get("text-variable-anchor"),Dn=[],Jn=0,ha=ve;Jn<ha.length;Jn+=1){var la=ha[Jn],wa=ne.getTile(la),Ea=wa.getBucket(q);if(Ea){var ii=Se?Ea.text:Ea.icon;if(ii&&ii.segments.get().length){var ti=ii.programConfigurations.get(q.id),Oi=Se||Ea.sdfIcons,Va=Se?Ea.textSizeData:Ea.iconSizeData,gi=Sr||Dr.pitch!==0,Ri=J.useProgram(pu(Oi,Se,Ea),ti),ci=t.evaluateSizeForZoom(Va,Dr.zoom),li=void 0,Li=[0,0],ni=void 0,Ha=void 0,as=null,Fo=void 0;if(Se)ni=wa.glyphAtlasTexture,Ha=Lr.LINEAR,li=wa.glyphAtlasTexture.size,Ea.iconsInText&&(Li=wa.imageAtlasTexture.size,as=wa.imageAtlasTexture,Fo=gi||J.options.rotating||J.options.zooming||Va.kind==="composite"||Va.kind==="camera"?Lr.LINEAR:Lr.NEAREST);else{var bo=q.layout.get("icon-size").constantOr(0)!==1||Ea.iconsNeedLinear;ni=wa.imageAtlasTexture,Ha=Oi||J.options.rotating||J.options.zooming||bo||gi?Lr.LINEAR:Lr.NEAREST,li=wa.imageAtlasTexture.size}var Ao=_n(wa,1,J.transform.zoom),Qo=_r(la.posMatrix,Sr,jr,J.transform,Ao),Mo=Gr(la.posMatrix,Sr,jr,J.transform,Ao),du=An&&Ea.hasTextData(),xs=q.layout.get("icon-text-fit")!=="none"&&du&&Ea.hasIconData();Ur&&Wn(Ea,la.posMatrix,J,Se,Qo,Mo,Sr,jt);var Jl=J.translatePosMatrix(la.posMatrix,wa,Oe,Xe),bl=Ur||Se&&An||xs?Ec:Qo,$l=J.translatePosMatrix(Mo,wa,Oe,Xe,!0),Cu=Oi&&q.paint.get(Se?"text-halo-width":"icon-halo-width").constantOr(1)!==0,cc={program:Ri,buffers:ii,uniformValues:Oi?Ea.iconsInText?Kl(Va.kind,ci,$r,Sr,J,Jl,bl,$l,li,Li):gs(Va.kind,ci,$r,Sr,J,Jl,bl,$l,Se,li,!0):ml(Va.kind,ci,$r,Sr,J,Jl,bl,$l,Se,li),atlasTexture:ni,atlasTextureIcon:as,atlasInterpolation:Ha,atlasInterpolationIcon:Fo,isSDF:Oi,hasHalo:Cu};if(cn)for(var fc=0,Ll=ii.segments.get();fc<Ll.length;fc+=1){var Lu=Ll[fc];Dn.push({segments:new t.SegmentVector([Lu]),sortKey:Lu.sortKey,state:cc})}else Dn.push({segments:ii.segments,sortKey:0,state:cc})}}}cn&&Dn.sort(function(ef,vs){return ef.sortKey-vs.sortKey});for(var Lf=0,hc=Dn;Lf<hc.length;Lf+=1){var Ql=hc[Lf],bs=Ql.state;if(br.activeTexture.set(Lr.TEXTURE0),bs.atlasTexture.bind(bs.atlasInterpolation,Lr.CLAMP_TO_EDGE),bs.atlasTextureIcon&&(br.activeTexture.set(Lr.TEXTURE1),bs.atlasTextureIcon&&bs.atlasTextureIcon.bind(bs.atlasInterpolationIcon,Lr.CLAMP_TO_EDGE)),bs.isSDF){var qc=bs.uniformValues;bs.hasHalo&&(qc.u_is_halo=1,Cf(bs.buffers,Ql.segments,q,J,bs.program,In,sr,pr,qc)),qc.u_is_halo=0}Cf(bs.buffers,Ql.segments,q,J,bs.program,In,sr,pr,bs.uniformValues)}}function Cf(J,ne,q,ve,Se,Oe,Xe,ut,yt){var jt=ve.context;Se.draw(jt,jt.gl.TRIANGLES,Oe,Xe,ut,He.disabled,yt,q.id,J.layoutVertexBuffer,J.indexBuffer,ne,q.paint,ve.transform.zoom,J.programConfigurations.get(q.id),J.dynamicLayoutVertexBuffer,J.opacityVertexBuffer)}function uc(J,ne,q,ve,Se,Oe,Xe){var ut,yt,jt,sr,pr,br=J.context.gl,Lr=q.paint.get("fill-pattern"),Dr=Lr&&Lr.constantOr(1),jr=q.getCrossfadeParameters();Xe?(yt=Dr&&!q.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ut=br.LINES):(yt=Dr?"fillPattern":"fill",ut=br.TRIANGLES);for(var Sr=0,Ur=ve;Sr<Ur.length;Sr+=1){var $r=Ur[Sr],cn=ne.getTile($r);if(!Dr||cn.patternsLoaded()){var In=cn.getBucket(q);if(In){var An=In.programConfigurations.get(q.id),Dn=J.useProgram(yt,An);Dr&&(J.context.activeTexture.set(br.TEXTURE0),cn.imageAtlasTexture.bind(br.LINEAR,br.CLAMP_TO_EDGE),An.updatePaintBuffers(jr));var Jn=Lr.constantOr(null);if(Jn&&cn.imageAtlas){var ha=cn.imageAtlas,la=ha.patternPositions[Jn.to.toString()],wa=ha.patternPositions[Jn.from.toString()];la&&wa&&An.setConstantPatternPositions(la,wa)}var Ea=J.translatePosMatrix($r.posMatrix,cn,q.paint.get("fill-translate"),q.paint.get("fill-translate-anchor"));if(Xe){sr=In.indexBuffer2,pr=In.segments2;var ii=[br.drawingBufferWidth,br.drawingBufferHeight];jt=yt==="fillOutlinePattern"&&Dr?Ou(Ea,J,jr,cn,ii):il(Ea,ii)}else sr=In.indexBuffer,pr=In.segments,jt=Dr?pl(Ea,J,jr,cn):ku(Ea);Dn.draw(J.context,ut,Se,J.stencilModeForClipping($r),Oe,He.disabled,jt,q.id,In.layoutVertexBuffer,sr,pr,q.paint,J.transform.zoom,An)}}}}function Is(J,ne,q,ve,Se,Oe,Xe){for(var ut=J.context,yt=ut.gl,jt=q.paint.get("fill-extrusion-pattern"),sr=jt.constantOr(1),pr=q.getCrossfadeParameters(),br=q.paint.get("fill-extrusion-opacity"),Lr=0,Dr=ve;Lr<Dr.length;Lr+=1){var jr=Dr[Lr],Sr=ne.getTile(jr),Ur=Sr.getBucket(q);if(Ur){var $r=Ur.programConfigurations.get(q.id),cn=J.useProgram(sr?"fillExtrusionPattern":"fillExtrusion",$r);sr&&(J.context.activeTexture.set(yt.TEXTURE0),Sr.imageAtlasTexture.bind(yt.LINEAR,yt.CLAMP_TO_EDGE),$r.updatePaintBuffers(pr));var In=jt.constantOr(null);if(In&&Sr.imageAtlas){var An=Sr.imageAtlas,Dn=An.patternPositions[In.to.toString()],Jn=An.patternPositions[In.from.toString()];Dn&&Jn&&$r.setConstantPatternPositions(Dn,Jn)}var ha=J.translatePosMatrix(jr.posMatrix,Sr,q.paint.get("fill-extrusion-translate"),q.paint.get("fill-extrusion-translate-anchor")),la=q.paint.get("fill-extrusion-vertical-gradient"),wa=sr?Mu(ha,J,la,br,jr,pr,Sr):Xl(ha,J,la,br);cn.draw(ut,ut.gl.TRIANGLES,Se,Oe,Xe,He.backCCW,wa,q.id,Ur.layoutVertexBuffer,Ur.indexBuffer,Ur.segments,q.paint,J.transform.zoom,$r)}}}function ul(J,ne,q,ve,Se,Oe){var Xe=J.context,ut=Xe.gl,yt=ne.fbo;if(yt){var jt=J.useProgram("hillshade");Xe.activeTexture.set(ut.TEXTURE0),ut.bindTexture(ut.TEXTURE_2D,yt.colorAttachment.get());var sr=function(pr,br,Lr){var Dr=Lr.paint.get("hillshade-shadow-color"),jr=Lr.paint.get("hillshade-highlight-color"),Sr=Lr.paint.get("hillshade-accent-color"),Ur=Lr.paint.get("hillshade-illumination-direction")*(Math.PI/180);Lr.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ur-=pr.transform.angle);var $r,cn,In,An=!pr.options.moving;return{u_matrix:pr.transform.calculatePosMatrix(br.tileID.toUnwrapped(),An),u_image:0,u_latrange:($r=br.tileID,cn=Math.pow(2,$r.canonical.z),In=$r.canonical.y,[new t.MercatorCoordinate(0,In/cn).toLngLat().lat,new t.MercatorCoordinate(0,(In+1)/cn).toLngLat().lat]),u_light:[Lr.paint.get("hillshade-exaggeration"),Ur],u_shadow:Dr,u_highlight:jr,u_accent:Sr}}(J,ne,q);jt.draw(Xe,ut.TRIANGLES,ve,Se,Oe,He.disabled,sr,q.id,J.rasterBoundsBuffer,J.quadTriangleIndexBuffer,J.rasterBoundsSegments)}}function Qc(J,ne,q,ve,Se,Oe,Xe){var ut=J.context,yt=ut.gl,jt=ne.dem;if(jt&&jt.data){var sr=jt.dim,pr=jt.stride,br=jt.getPixels();if(ut.activeTexture.set(yt.TEXTURE1),ut.pixelStoreUnpackPremultiplyAlpha.set(!1),ne.demTexture=ne.demTexture||J.getTileTexture(pr),ne.demTexture){var Lr=ne.demTexture;Lr.update(br,{premultiply:!1}),Lr.bind(yt.NEAREST,yt.CLAMP_TO_EDGE)}else ne.demTexture=new t.Texture(ut,br,yt.RGBA,{premultiply:!1}),ne.demTexture.bind(yt.NEAREST,yt.CLAMP_TO_EDGE);ut.activeTexture.set(yt.TEXTURE0);var Dr=ne.fbo;if(!Dr){var jr=new t.Texture(ut,{width:sr,height:sr,data:null},yt.RGBA);jr.bind(yt.LINEAR,yt.CLAMP_TO_EDGE),(Dr=ne.fbo=ut.createFramebuffer(sr,sr,!0)).colorAttachment.set(jr.texture)}ut.bindFramebuffer.set(Dr.framebuffer),ut.viewport.set([0,0,sr,sr]),J.useProgram("hillshadePrepare").draw(ut,yt.TRIANGLES,Se,Oe,Xe,He.disabled,function(Sr,Ur,$r){var cn=Ur.stride,In=t.create();return t.ortho(In,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(In,In,[0,-t.EXTENT,0]),{u_matrix:In,u_image:1,u_dimension:[cn,cn],u_zoom:Sr.overscaledZ,u_maxzoom:$r,u_unpack:Ur.getUnpackVector()}}(ne.tileID,jt,ve),q.id,J.rasterBoundsBuffer,J.quadTriangleIndexBuffer,J.rasterBoundsSegments),ne.needsHillshadePrepare=!1}}function Fu(J,ne,q,ve,Se){var Oe=ve.paint.get("raster-fade-duration");if(Oe>0){var Xe=t.browser.now(),ut=(Xe-J.timeAdded)/Oe,yt=ne?(Xe-ne.timeAdded)/Oe:-1,jt=q.getSource(),sr=Se.coveringZoomLevel({tileSize:jt.tileSize,roundZoom:jt.roundZoom}),pr=!ne||Math.abs(ne.tileID.overscaledZ-sr)>Math.abs(J.tileID.overscaledZ-sr),br=pr&&J.refreshedUponExpiration?1:t.clamp(pr?ut:1-yt,0,1);return J.refreshedUponExpiration&&ut>=1&&(J.refreshedUponExpiration=!1),ne?{opacity:1,mix:1-br}:{opacity:br,mix:0}}return{opacity:1,mix:0}}var ih=new t.Color(1,0,0,1),nt=new t.Color(0,1,0,1),$e=new t.Color(0,0,1,1),gt=new t.Color(1,0,1,1),Ft=new t.Color(0,1,1,1);function ht(J,ne,q,ve){Et(J,0,ne+q/2,J.transform.width,q,ve)}function Pt(J,ne,q,ve){Et(J,ne-q/2,0,q,J.transform.height,ve)}function Et(J,ne,q,ve,Se,Oe){var Xe=J.context,ut=Xe.gl;ut.enable(ut.SCISSOR_TEST),ut.scissor(ne*t.browser.devicePixelRatio,q*t.browser.devicePixelRatio,ve*t.browser.devicePixelRatio,Se*t.browser.devicePixelRatio),Xe.clear({color:Oe}),ut.disable(ut.SCISSOR_TEST)}function Jt(J,ne,q){var ve=J.context,Se=ve.gl,Oe=q.posMatrix,Xe=J.useProgram("debug"),ut=et.disabled,yt=ke.disabled,jt=J.colorModeForRenderPass();ve.activeTexture.set(Se.TEXTURE0),J.emptyTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),Xe.draw(ve,Se.LINE_STRIP,ut,yt,jt,He.disabled,lc(Oe,t.Color.red),"$debug",J.debugBuffer,J.tileBorderIndexBuffer,J.debugSegments);var sr=ne.getTileByID(q.key).latestRawTileData,pr=Math.floor((sr&&sr.byteLength||0)/1024),br=ne.getTile(q).tileSize,Lr=512/Math.min(br,512)*(q.overscaledZ/J.transform.zoom)*.5,Dr=q.canonical.toString();q.overscaledZ!==q.canonical.z&&(Dr+=" => "+q.overscaledZ),function(jr,Sr){jr.initDebugOverlayCanvas();var Ur=jr.debugOverlayCanvas,$r=jr.context.gl,cn=jr.debugOverlayCanvas.getContext("2d");cn.clearRect(0,0,Ur.width,Ur.height),cn.shadowColor="white",cn.shadowBlur=2,cn.lineWidth=1.5,cn.strokeStyle="white",cn.textBaseline="top",cn.font="bold 36px Open Sans, sans-serif",cn.fillText(Sr,5,5),cn.strokeText(Sr,5,5),jr.debugOverlayTexture.update(Ur),jr.debugOverlayTexture.bind($r.LINEAR,$r.CLAMP_TO_EDGE)}(J,Dr+" "+pr+"kb"),Xe.draw(ve,Se.TRIANGLES,ut,yt,Ie.alphaBlended,He.disabled,lc(Oe,t.Color.transparent,Lr),"$debug",J.debugBuffer,J.quadTriangleIndexBuffer,J.debugSegments)}var ur={symbol:function(J,ne,q,ve,Se){if(J.renderPass==="translucent"){var Oe=ke.disabled,Xe=J.colorModeForRenderPass();q.layout.get("text-variable-anchor")&&function(ut,yt,jt,sr,pr,br,Lr){for(var Dr=yt.transform,jr=pr==="map",Sr=br==="map",Ur=0,$r=ut;Ur<$r.length;Ur+=1){var cn=$r[Ur],In=sr.getTile(cn),An=In.getBucket(jt);if(An&&An.text&&An.text.segments.get().length){var Dn=t.evaluateSizeForZoom(An.textSizeData,Dr.zoom),Jn=_n(In,1,yt.transform.zoom),ha=_r(cn.posMatrix,Sr,jr,yt.transform,Jn),la=jt.layout.get("icon-text-fit")!=="none"&&An.hasIconData();if(Dn){var wa=Math.pow(2,Dr.zoom-In.tileID.overscaledZ);ll(An,jr,Sr,Lr,t.symbolSize,Dr,ha,cn.posMatrix,wa,Dn,la)}}}}(ve,J,q,ne,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),Se),q.paint.get("icon-opacity").constantOr(1)!==0&&Uo(J,ne,q,ve,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),Oe,Xe),q.paint.get("text-opacity").constantOr(1)!==0&&Uo(J,ne,q,ve,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),Oe,Xe),ne.map.showCollisionBoxes&&(Yo(J,ne,q,ve,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),!0),Yo(J,ne,q,ve,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),!1))}},circle:function(J,ne,q,ve){if(J.renderPass==="translucent"){var Se=q.paint.get("circle-opacity"),Oe=q.paint.get("circle-stroke-width"),Xe=q.paint.get("circle-stroke-opacity"),ut=q.layout.get("circle-sort-key").constantOr(1)!==void 0;if(Se.constantOr(1)!==0||Oe.constantOr(1)!==0&&Xe.constantOr(1)!==0){for(var yt=J.context,jt=yt.gl,sr=J.depthModeForSublayer(0,et.ReadOnly),pr=ke.disabled,br=J.colorModeForRenderPass(),Lr=[],Dr=0;Dr<ve.length;Dr++){var jr=ve[Dr],Sr=ne.getTile(jr),Ur=Sr.getBucket(q);if(Ur){var $r=Ur.programConfigurations.get(q.id),cn={programConfiguration:$r,program:J.useProgram("circle",$r),layoutVertexBuffer:Ur.layoutVertexBuffer,indexBuffer:Ur.indexBuffer,uniformValues:Su(J,jr,Sr,q)};if(ut)for(var In=0,An=Ur.segments.get();In<An.length;In+=1){var Dn=An[In];Lr.push({segments:new t.SegmentVector([Dn]),sortKey:Dn.sortKey,state:cn})}else Lr.push({segments:Ur.segments,sortKey:0,state:cn})}}ut&&Lr.sort(function(Ea,ii){return Ea.sortKey-ii.sortKey});for(var Jn=0,ha=Lr;Jn<ha.length;Jn+=1){var la=ha[Jn],wa=la.state;wa.program.draw(yt,jt.TRIANGLES,sr,pr,br,He.disabled,wa.uniformValues,q.id,wa.layoutVertexBuffer,wa.indexBuffer,la.segments,q.paint,J.transform.zoom,wa.programConfiguration)}}}},heatmap:function(J,ne,q,ve){if(q.paint.get("heatmap-opacity")!==0)if(J.renderPass==="offscreen"){var Se=J.context,Oe=Se.gl,Xe=ke.disabled,ut=new Ie([Oe.ONE,Oe.ONE],t.Color.transparent,[!0,!0,!0,!0]);(function(Lr,Dr,jr){var Sr=Lr.gl;Lr.activeTexture.set(Sr.TEXTURE1),Lr.viewport.set([0,0,Dr.width/4,Dr.height/4]);var Ur=jr.heatmapFbo;if(Ur)Sr.bindTexture(Sr.TEXTURE_2D,Ur.colorAttachment.get()),Lr.bindFramebuffer.set(Ur.framebuffer);else{var $r=Sr.createTexture();Sr.bindTexture(Sr.TEXTURE_2D,$r),Sr.texParameteri(Sr.TEXTURE_2D,Sr.TEXTURE_WRAP_S,Sr.CLAMP_TO_EDGE),Sr.texParameteri(Sr.TEXTURE_2D,Sr.TEXTURE_WRAP_T,Sr.CLAMP_TO_EDGE),Sr.texParameteri(Sr.TEXTURE_2D,Sr.TEXTURE_MIN_FILTER,Sr.LINEAR),Sr.texParameteri(Sr.TEXTURE_2D,Sr.TEXTURE_MAG_FILTER,Sr.LINEAR),Ur=jr.heatmapFbo=Lr.createFramebuffer(Dr.width/4,Dr.height/4,!1),function(cn,In,An,Dn){var Jn=cn.gl;Jn.texImage2D(Jn.TEXTURE_2D,0,Jn.RGBA,In.width/4,In.height/4,0,Jn.RGBA,cn.extRenderToTextureHalfFloat?cn.extTextureHalfFloat.HALF_FLOAT_OES:Jn.UNSIGNED_BYTE,null),Dn.colorAttachment.set(An)}(Lr,Dr,$r,Ur)}})(Se,J,q),Se.clear({color:t.Color.transparent});for(var yt=0;yt<ve.length;yt++){var jt=ve[yt];if(!ne.hasRenderableParent(jt)){var sr=ne.getTile(jt),pr=sr.getBucket(q);if(pr){var br=pr.programConfigurations.get(q.id);J.useProgram("heatmap",br).draw(Se,Oe.TRIANGLES,et.disabled,Xe,ut,He.disabled,$i(jt.posMatrix,sr,J.transform.zoom,q.paint.get("heatmap-intensity")),q.id,pr.layoutVertexBuffer,pr.indexBuffer,pr.segments,q.paint,J.transform.zoom,br)}}}Se.viewport.set([0,0,J.width,J.height])}else J.renderPass==="translucent"&&(J.context.setColorMode(J.colorModeForRenderPass()),function(Lr,Dr){var jr=Lr.context,Sr=jr.gl,Ur=Dr.heatmapFbo;if(Ur){jr.activeTexture.set(Sr.TEXTURE0),Sr.bindTexture(Sr.TEXTURE_2D,Ur.colorAttachment.get()),jr.activeTexture.set(Sr.TEXTURE1);var $r=Dr.colorRampTexture;$r||($r=Dr.colorRampTexture=new t.Texture(jr,Dr.colorRamp,Sr.RGBA)),$r.bind(Sr.LINEAR,Sr.CLAMP_TO_EDGE),Lr.useProgram("heatmapTexture").draw(jr,Sr.TRIANGLES,et.disabled,ke.disabled,Lr.colorModeForRenderPass(),He.disabled,function(cn,In,An,Dn){var Jn=t.create();t.ortho(Jn,0,cn.width,cn.height,0,0,1);var ha=cn.context.gl;return{u_matrix:Jn,u_world:[ha.drawingBufferWidth,ha.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:In.paint.get("heatmap-opacity")}}(Lr,Dr),Dr.id,Lr.viewportBuffer,Lr.quadTriangleIndexBuffer,Lr.viewportSegments,Dr.paint,Lr.transform.zoom)}}(J,q))},line:function(J,ne,q,ve){if(J.renderPass==="translucent"){var Se=q.paint.get("line-opacity"),Oe=q.paint.get("line-width");if(Se.constantOr(1)!==0&&Oe.constantOr(1)!==0){var Xe=J.depthModeForSublayer(0,et.ReadOnly),ut=J.colorModeForRenderPass(),yt=q.paint.get("line-dasharray"),jt=q.paint.get("line-pattern"),sr=jt.constantOr(1),pr=q.paint.get("line-gradient"),br=q.getCrossfadeParameters(),Lr=sr?"linePattern":yt?"lineSDF":pr?"lineGradient":"line",Dr=J.context,jr=Dr.gl,Sr=!0;if(pr){Dr.activeTexture.set(jr.TEXTURE0);var Ur=q.gradientTexture;if(!q.gradient)return;Ur||(Ur=q.gradientTexture=new t.Texture(Dr,q.gradient,jr.RGBA)),Ur.bind(jr.LINEAR,jr.CLAMP_TO_EDGE)}for(var $r=0,cn=ve;$r<cn.length;$r+=1){var In=cn[$r],An=ne.getTile(In);if(!sr||An.patternsLoaded()){var Dn=An.getBucket(q);if(Dn){var Jn=Dn.programConfigurations.get(q.id),ha=J.context.program.get(),la=J.useProgram(Lr,Jn),wa=Sr||la.program!==ha,Ea=jt.constantOr(null);if(Ea&&An.imageAtlas){var ii=An.imageAtlas,ti=ii.patternPositions[Ea.to.toString()],Oi=ii.patternPositions[Ea.from.toString()];ti&&Oi&&Jn.setConstantPatternPositions(ti,Oi)}var Va=sr?cu(J,An,q,br):yt?ks(J,An,q,yt,br):pr?$c(J,An,q):Gs(J,An,q);sr?(Dr.activeTexture.set(jr.TEXTURE0),An.imageAtlasTexture.bind(jr.LINEAR,jr.CLAMP_TO_EDGE),Jn.updatePaintBuffers(br)):yt&&(wa||J.lineAtlas.dirty)&&(Dr.activeTexture.set(jr.TEXTURE0),J.lineAtlas.bind(Dr)),la.draw(Dr,jr.TRIANGLES,Xe,J.stencilModeForClipping(In),ut,He.disabled,Va,q.id,Dn.layoutVertexBuffer,Dn.indexBuffer,Dn.segments,q.paint,J.transform.zoom,Jn),Sr=!1}}}}}},fill:function(J,ne,q,ve){var Se=q.paint.get("fill-color"),Oe=q.paint.get("fill-opacity");if(Oe.constantOr(1)!==0){var Xe=J.colorModeForRenderPass(),ut=q.paint.get("fill-pattern"),yt=J.opaquePassEnabledForLayer()&&!ut.constantOr(1)&&Se.constantOr(t.Color.transparent).a===1&&Oe.constantOr(0)===1?"opaque":"translucent";if(J.renderPass===yt){var jt=J.depthModeForSublayer(1,J.renderPass==="opaque"?et.ReadWrite:et.ReadOnly);uc(J,ne,q,ve,jt,Xe,!1)}if(J.renderPass==="translucent"&&q.paint.get("fill-antialias")){var sr=J.depthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,et.ReadOnly);uc(J,ne,q,ve,sr,Xe,!0)}}},"fill-extrusion":function(J,ne,q,ve){var Se=q.paint.get("fill-extrusion-opacity");if(Se!==0&&J.renderPass==="translucent"){var Oe=new et(J.context.gl.LEQUAL,et.ReadWrite,J.depthRangeFor3D);if(Se!==1||q.paint.get("fill-extrusion-pattern").constantOr(1))Is(J,ne,q,ve,Oe,ke.disabled,Ie.disabled),Is(J,ne,q,ve,Oe,J.stencilModeFor3D(),J.colorModeForRenderPass());else{var Xe=J.colorModeForRenderPass();Is(J,ne,q,ve,Oe,ke.disabled,Xe)}}},hillshade:function(J,ne,q,ve){if(J.renderPass==="offscreen"||J.renderPass==="translucent"){for(var Se=J.context,Oe=ne.getSource().maxzoom,Xe=J.depthModeForSublayer(0,et.ReadOnly),ut=J.colorModeForRenderPass(),yt=J.renderPass==="translucent"?J.stencilConfigForOverlap(ve):[{},ve],jt=yt[0],sr=0,pr=yt[1];sr<pr.length;sr+=1){var br=pr[sr],Lr=ne.getTile(br);Lr.needsHillshadePrepare&&J.renderPass==="offscreen"?Qc(J,Lr,q,Oe,Xe,ke.disabled,ut):J.renderPass==="translucent"&&ul(J,Lr,q,Xe,jt[br.overscaledZ],ut)}Se.viewport.set([0,0,J.width,J.height])}},raster:function(J,ne,q,ve){if(J.renderPass==="translucent"&&q.paint.get("raster-opacity")!==0&&ve.length)for(var Se=J.context,Oe=Se.gl,Xe=ne.getSource(),ut=J.useProgram("raster"),yt=J.colorModeForRenderPass(),jt=Xe instanceof j?[{},ve]:J.stencilConfigForOverlap(ve),sr=jt[0],pr=jt[1],br=pr[pr.length-1].overscaledZ,Lr=!J.options.moving,Dr=0,jr=pr;Dr<jr.length;Dr+=1){var Sr=jr[Dr],Ur=J.depthModeForSublayer(Sr.overscaledZ-br,q.paint.get("raster-opacity")===1?et.ReadWrite:et.ReadOnly,Oe.LESS),$r=ne.getTile(Sr),cn=J.transform.calculatePosMatrix(Sr.toUnwrapped(),Lr);$r.registerFadeDuration(q.paint.get("raster-fade-duration"));var In=ne.findLoadedParent(Sr,0),An=Fu($r,In,ne,q,J.transform),Dn=void 0,Jn=void 0,ha=q.paint.get("raster-resampling")==="nearest"?Oe.NEAREST:Oe.LINEAR;Se.activeTexture.set(Oe.TEXTURE0),$r.texture.bind(ha,Oe.CLAMP_TO_EDGE,Oe.LINEAR_MIPMAP_NEAREST),Se.activeTexture.set(Oe.TEXTURE1),In?(In.texture.bind(ha,Oe.CLAMP_TO_EDGE,Oe.LINEAR_MIPMAP_NEAREST),Dn=Math.pow(2,In.tileID.overscaledZ-$r.tileID.overscaledZ),Jn=[$r.tileID.canonical.x*Dn%1,$r.tileID.canonical.y*Dn%1]):$r.texture.bind(ha,Oe.CLAMP_TO_EDGE,Oe.LINEAR_MIPMAP_NEAREST);var la=vl(cn,Jn||[0,0],Dn||1,An,q);Xe instanceof j?ut.draw(Se,Oe.TRIANGLES,Ur,ke.disabled,yt,He.disabled,la,q.id,Xe.boundsBuffer,J.quadTriangleIndexBuffer,Xe.boundsSegments):ut.draw(Se,Oe.TRIANGLES,Ur,sr[Sr.overscaledZ],yt,He.disabled,la,q.id,J.rasterBoundsBuffer,J.quadTriangleIndexBuffer,J.rasterBoundsSegments)}},background:function(J,ne,q){var ve=q.paint.get("background-color"),Se=q.paint.get("background-opacity");if(Se!==0){var Oe=J.context,Xe=Oe.gl,ut=J.transform,yt=ut.tileSize,jt=q.paint.get("background-pattern");if(!J.isPatternMissing(jt)){var sr=!jt&&ve.a===1&&Se===1&&J.opaquePassEnabledForLayer()?"opaque":"translucent";if(J.renderPass===sr){var pr=ke.disabled,br=J.depthModeForSublayer(0,sr==="opaque"?et.ReadWrite:et.ReadOnly),Lr=J.colorModeForRenderPass(),Dr=J.useProgram(jt?"backgroundPattern":"background"),jr=ut.coveringTiles({tileSize:yt});jt&&(Oe.activeTexture.set(Xe.TEXTURE0),J.imageManager.bind(J.context));for(var Sr=q.getCrossfadeParameters(),Ur=0,$r=jr;Ur<$r.length;Ur+=1){var cn=$r[Ur],In=J.transform.calculatePosMatrix(cn.toUnwrapped()),An=jt?es(In,Se,J,jt,{tileID:cn,tileSize:yt},Sr):hu(In,Se,ve);Dr.draw(Oe,Xe.TRIANGLES,br,pr,Lr,He.disabled,An,q.id,J.tileExtentBuffer,J.quadTriangleIndexBuffer,J.tileExtentSegments)}}}}},debug:function(J,ne,q){for(var ve=0;ve<q.length;ve++)Jt(J,ne,q[ve])},custom:function(J,ne,q){var ve=J.context,Se=q.implementation;if(J.renderPass==="offscreen"){var Oe=Se.prerender;Oe&&(J.setCustomLayerDefaults(),ve.setColorMode(J.colorModeForRenderPass()),Oe.call(Se,ve.gl,J.transform.customLayerMatrix()),ve.setDirty(),J.setBaseState())}else if(J.renderPass==="translucent"){J.setCustomLayerDefaults(),ve.setColorMode(J.colorModeForRenderPass()),ve.setStencilMode(ke.disabled);var Xe=Se.renderingMode==="3d"?new et(J.context.gl.LEQUAL,et.ReadWrite,J.depthRangeFor3D):J.depthModeForSublayer(0,et.ReadOnly);ve.setDepthMode(Xe),Se.render(ve.gl,J.transform.customLayerMatrix()),ve.setDirty(),J.setBaseState(),ve.bindFramebuffer.set(null)}}},ar=function(J,ne){this.context=new Ye(J),this.transform=ne,this._tileTextures={},this.setup(),this.numSublayers=ft.maxUnderzooming+ft.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ya,this.gpuTimers={}};ar.prototype.resize=function(J,ne){if(this.width=J*t.browser.devicePixelRatio,this.height=ne*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var q=0,ve=this.style._order;q<ve.length;q+=1)this.style._layers[ve[q]].resize()},ar.prototype.setup=function(){var J=this.context,ne=new t.StructArrayLayout2i4;ne.emplaceBack(0,0),ne.emplaceBack(t.EXTENT,0),ne.emplaceBack(0,t.EXTENT),ne.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=J.createVertexBuffer(ne,rn.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var q=new t.StructArrayLayout2i4;q.emplaceBack(0,0),q.emplaceBack(t.EXTENT,0),q.emplaceBack(0,t.EXTENT),q.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=J.createVertexBuffer(q,rn.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var ve=new t.StructArrayLayout4i8;ve.emplaceBack(0,0,0,0),ve.emplaceBack(t.EXTENT,0,t.EXTENT,0),ve.emplaceBack(0,t.EXTENT,0,t.EXTENT),ve.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=J.createVertexBuffer(ve,B.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Se=new t.StructArrayLayout2i4;Se.emplaceBack(0,0),Se.emplaceBack(1,0),Se.emplaceBack(0,1),Se.emplaceBack(1,1),this.viewportBuffer=J.createVertexBuffer(Se,rn.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Oe=new t.StructArrayLayout1ui2;Oe.emplaceBack(0),Oe.emplaceBack(1),Oe.emplaceBack(3),Oe.emplaceBack(2),Oe.emplaceBack(0),this.tileBorderIndexBuffer=J.createIndexBuffer(Oe);var Xe=new t.StructArrayLayout3ui6;Xe.emplaceBack(0,1,2),Xe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=J.createIndexBuffer(Xe),this.emptyTexture=new t.Texture(J,{width:1,height:1,data:new Uint8Array([0,0,0,0])},J.gl.RGBA);var ut=this.context.gl;this.stencilClearMode=new ke({func:ut.ALWAYS,mask:0},0,255,ut.ZERO,ut.ZERO,ut.ZERO)},ar.prototype.clearStencil=function(){var J=this.context,ne=J.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var q=t.create();t.ortho(q,0,this.width,this.height,0,0,1),t.scale(q,q,[ne.drawingBufferWidth,ne.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(J,ne.TRIANGLES,et.disabled,this.stencilClearMode,Ie.disabled,He.disabled,Ku(q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ar.prototype._renderTileClippingMasks=function(J,ne){if(this.currentStencilSource!==J.source&&J.isTileClipped()&&ne&&ne.length){this.currentStencilSource=J.source;var q=this.context,ve=q.gl;this.nextStencilID+ne.length>256&&this.clearStencil(),q.setColorMode(Ie.disabled),q.setDepthMode(et.disabled);var Se=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Oe=0,Xe=ne;Oe<Xe.length;Oe+=1){var ut=Xe[Oe],yt=this._tileClippingMaskIDs[ut.key]=this.nextStencilID++;Se.draw(q,ve.TRIANGLES,et.disabled,new ke({func:ve.ALWAYS,mask:0},yt,255,ve.KEEP,ve.KEEP,ve.REPLACE),Ie.disabled,He.disabled,Ku(ut.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ar.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var J=this.nextStencilID++,ne=this.context.gl;return new ke({func:ne.NOTEQUAL,mask:255},J,255,ne.KEEP,ne.KEEP,ne.REPLACE)},ar.prototype.stencilModeForClipping=function(J){var ne=this.context.gl;return new ke({func:ne.EQUAL,mask:255},this._tileClippingMaskIDs[J.key],0,ne.KEEP,ne.KEEP,ne.REPLACE)},ar.prototype.stencilConfigForOverlap=function(J){var ne,q=this.context.gl,ve=J.sort(function(yt,jt){return jt.overscaledZ-yt.overscaledZ}),Se=ve[ve.length-1].overscaledZ,Oe=ve[0].overscaledZ-Se+1;if(Oe>1){this.currentStencilSource=void 0,this.nextStencilID+Oe>256&&this.clearStencil();for(var Xe={},ut=0;ut<Oe;ut++)Xe[ut+Se]=new ke({func:q.GEQUAL,mask:255},ut+this.nextStencilID,255,q.KEEP,q.KEEP,q.REPLACE);return this.nextStencilID+=Oe,[Xe,ve]}return[(ne={},ne[Se]=ke.disabled,ne),ve]},ar.prototype.colorModeForRenderPass=function(){var J=this.context.gl;return this._showOverdrawInspector?new Ie([J.CONSTANT_COLOR,J.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ie.unblended:Ie.alphaBlended},ar.prototype.depthModeForSublayer=function(J,ne,q){if(!this.opaquePassEnabledForLayer())return et.disabled;var ve=1-((1+this.currentLayer)*this.numSublayers+J)*this.depthEpsilon;return new et(q||this.context.gl.LEQUAL,ne,[ve,ve])},ar.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ar.prototype.render=function(J,ne){var q=this;this.style=J,this.options=ne,this.lineAtlas=J.lineAtlas,this.imageManager=J.imageManager,this.glyphManager=J.glyphManager,this.symbolFadeChange=J.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var ve=this.style._order,Se=this.style.sourceCaches;for(var Oe in Se){var Xe=Se[Oe];Xe.used&&Xe.prepare(this.context)}var ut,yt,jt={},sr={},pr={};for(var br in Se){var Lr=Se[br];jt[br]=Lr.getVisibleCoordinates(),sr[br]=jt[br].slice().reverse(),pr[br]=Lr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Dr=0;Dr<ve.length;Dr++)if(this.style._layers[ve[Dr]].is3D()){this.opaquePassCutoff=Dr;break}this.renderPass="offscreen";for(var jr=0,Sr=ve;jr<Sr.length;jr+=1){var Ur=this.style._layers[Sr[jr]];if(Ur.hasOffscreenPass()&&!Ur.isHidden(this.transform.zoom)){var $r=sr[Ur.source];(Ur.type==="custom"||$r.length)&&this.renderLayer(this,Se[Ur.source],Ur,$r)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:ne.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ne.showOverdrawInspector,this.depthRangeFor3D=[0,1-(J._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ve.length-1;this.currentLayer>=0;this.currentLayer--){var cn=this.style._layers[ve[this.currentLayer]],In=Se[cn.source],An=jt[cn.source];this._renderTileClippingMasks(cn,An),this.renderLayer(this,In,cn,An)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ve.length;this.currentLayer++){var Dn=this.style._layers[ve[this.currentLayer]],Jn=Se[Dn.source],ha=(Dn.type==="symbol"?pr:sr)[Dn.source];this._renderTileClippingMasks(Dn,jt[Dn.source]),this.renderLayer(this,Jn,Dn,ha)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach(function(la){la.source&&!la.isHidden(q.transform.zoom)&&(la.source!==(yt&&yt.id)&&(yt=q.style.sourceCaches[la.source]),(!ut||ut.getSource().maxzoom<yt.getSource().maxzoom)&&(ut=yt))}),ut&&ur.debug(this,ut,ut.getVisibleCoordinates())),this.options.showPadding&&function(la){var wa=la.transform.padding;ht(la,la.transform.height-(wa.top||0),3,ih),ht(la,wa.bottom||0,3,nt),Pt(la,wa.left||0,3,$e),Pt(la,la.transform.width-(wa.right||0),3,gt);var Ea=la.transform.centerPoint;(function(ii,ti,Oi,Va){Et(ii,ti-1,Oi-10,2,20,Va),Et(ii,ti-10,Oi-1,20,2,Va)})(la,Ea.x,la.transform.height-Ea.y,Ft)}(this),this.context.setDefault()},ar.prototype.renderLayer=function(J,ne,q,ve){q.isHidden(this.transform.zoom)||(q.type==="background"||q.type==="custom"||ve.length)&&(this.id=q.id,this.gpuTimingStart(q),ur[q.type](J,ne,q,ve,this.style.placement.variableOffsets),this.gpuTimingEnd())},ar.prototype.gpuTimingStart=function(J){if(this.options.gpuTiming){var ne=this.context.extTimerQuery,q=this.gpuTimers[J.id];q||(q=this.gpuTimers[J.id]={calls:0,cpuTime:0,query:ne.createQueryEXT()}),q.calls++,ne.beginQueryEXT(ne.TIME_ELAPSED_EXT,q.query)}},ar.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var J=this.context.extTimerQuery;J.endQueryEXT(J.TIME_ELAPSED_EXT)}},ar.prototype.collectGpuTimers=function(){var J=this.gpuTimers;return this.gpuTimers={},J},ar.prototype.queryGpuTimers=function(J){var ne={};for(var q in J){var ve=J[q],Se=this.context.extTimerQuery,Oe=Se.getQueryObjectEXT(ve.query,Se.QUERY_RESULT_EXT)/1e6;Se.deleteQueryEXT(ve.query),ne[q]=Oe}return ne},ar.prototype.translatePosMatrix=function(J,ne,q,ve,Se){if(!q[0]&&!q[1])return J;var Oe=Se?ve==="map"?this.transform.angle:0:ve==="viewport"?-this.transform.angle:0;if(Oe){var Xe=Math.sin(Oe),ut=Math.cos(Oe);q=[q[0]*ut-q[1]*Xe,q[0]*Xe+q[1]*ut]}var yt=[Se?q[0]:_n(ne,q[0],this.transform.zoom),Se?q[1]:_n(ne,q[1],this.transform.zoom),0],jt=new Float32Array(16);return t.translate(jt,J,yt),jt},ar.prototype.saveTileTexture=function(J){var ne=this._tileTextures[J.size[0]];ne?ne.push(J):this._tileTextures[J.size[0]]=[J]},ar.prototype.getTileTexture=function(J){var ne=this._tileTextures[J];return ne&&ne.length>0?ne.pop():null},ar.prototype.isPatternMissing=function(J){if(!J)return!1;if(!J.from||!J.to)return!0;var ne=this.imageManager.getPattern(J.from.toString()),q=this.imageManager.getPattern(J.to.toString());return!ne||!q},ar.prototype.useProgram=function(J,ne){this.cache=this.cache||{};var q=""+J+(ne?ne.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[q]||(this.cache[q]=new Ef(this.context,ah[J],ne,sl[J],this._showOverdrawInspector)),this.cache[q]},ar.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ar.prototype.setBaseState=function(){var J=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(J.FUNC_ADD)},ar.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ar.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var xr=function(J,ne){this.points=J,this.planes=ne};xr.fromInvProjectionMatrix=function(J,ne,q){var ve=Math.pow(2,q),Se=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Xe){return t.transformMat4([],Xe,J)}).map(function(Xe){return t.scale$1([],Xe,1/Xe[3]/ne*ve)}),Oe=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Xe){var ut=t.sub([],Se[Xe[0]],Se[Xe[1]]),yt=t.sub([],Se[Xe[2]],Se[Xe[1]]),jt=t.normalize([],t.cross([],ut,yt)),sr=-t.dot(jt,Se[Xe[1]]);return jt.concat(sr)});return new xr(Se,Oe)};var Ar=function(J,ne){this.min=J,this.max=ne,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};Ar.prototype.quadrant=function(J){for(var ne=[J%2==0,J<2],q=t.clone$2(this.min),ve=t.clone$2(this.max),Se=0;Se<ne.length;Se++)q[Se]=ne[Se]?this.min[Se]:this.center[Se],ve[Se]=ne[Se]?this.center[Se]:this.max[Se];return ve[2]=this.max[2],new Ar(q,ve)},Ar.prototype.distanceX=function(J){return Math.max(Math.min(this.max[0],J[0]),this.min[0])-J[0]},Ar.prototype.distanceY=function(J){return Math.max(Math.min(this.max[1],J[1]),this.min[1])-J[1]},Ar.prototype.intersects=function(J){for(var ne=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],q=!0,ve=0;ve<J.planes.length;ve++){for(var Se=J.planes[ve],Oe=0,Xe=0;Xe<ne.length;Xe++)Oe+=t.dot$1(Se,ne[Xe])>=0;if(Oe===0)return 0;Oe!==ne.length&&(q=!1)}if(q)return 2;for(var ut=0;ut<3;ut++){for(var yt=Number.MAX_VALUE,jt=-Number.MAX_VALUE,sr=0;sr<J.points.length;sr++){var pr=J.points[sr][ut]-this.min[ut];yt=Math.min(yt,pr),jt=Math.max(jt,pr)}if(jt<0||yt>this.max[ut]-this.min[ut])return 0}return 1};var mn=function(J,ne,q,ve){if(J===void 0&&(J=0),ne===void 0&&(ne=0),q===void 0&&(q=0),ve===void 0&&(ve=0),isNaN(J)||J<0||isNaN(ne)||ne<0||isNaN(q)||q<0||isNaN(ve)||ve<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=J,this.bottom=ne,this.left=q,this.right=ve};mn.prototype.interpolate=function(J,ne,q){return ne.top!=null&&J.top!=null&&(this.top=t.number(J.top,ne.top,q)),ne.bottom!=null&&J.bottom!=null&&(this.bottom=t.number(J.bottom,ne.bottom,q)),ne.left!=null&&J.left!=null&&(this.left=t.number(J.left,ne.left,q)),ne.right!=null&&J.right!=null&&(this.right=t.number(J.right,ne.right,q)),this},mn.prototype.getCenter=function(J,ne){var q=t.clamp((this.left+J-this.right)/2,0,J),ve=t.clamp((this.top+ne-this.bottom)/2,0,ne);return new t.Point(q,ve)},mn.prototype.equals=function(J){return this.top===J.top&&this.bottom===J.bottom&&this.left===J.left&&this.right===J.right},mn.prototype.clone=function(){return new mn(this.top,this.bottom,this.left,this.right)},mn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Zr=function(J,ne,q,ve,Se){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Se===void 0||Se,this._minZoom=J||0,this._maxZoom=ne||22,this._minPitch=q==null?0:q,this._maxPitch=ve==null?60:ve,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new mn,this._posMatrixCache={},this._alignedPosMatrixCache={}},bn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Zr.prototype.clone=function(){var J=new Zr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return J.tileSize=this.tileSize,J.latRange=this.latRange,J.width=this.width,J.height=this.height,J._center=this._center,J.zoom=this.zoom,J.angle=this.angle,J._fov=this._fov,J._pitch=this._pitch,J._unmodified=this._unmodified,J._edgeInsets=this._edgeInsets.clone(),J._calcMatrices(),J},bn.minZoom.get=function(){return this._minZoom},bn.minZoom.set=function(J){this._minZoom!==J&&(this._minZoom=J,this.zoom=Math.max(this.zoom,J))},bn.maxZoom.get=function(){return this._maxZoom},bn.maxZoom.set=function(J){this._maxZoom!==J&&(this._maxZoom=J,this.zoom=Math.min(this.zoom,J))},bn.minPitch.get=function(){return this._minPitch},bn.minPitch.set=function(J){this._minPitch!==J&&(this._minPitch=J,this.pitch=Math.max(this.pitch,J))},bn.maxPitch.get=function(){return this._maxPitch},bn.maxPitch.set=function(J){this._maxPitch!==J&&(this._maxPitch=J,this.pitch=Math.min(this.pitch,J))},bn.renderWorldCopies.get=function(){return this._renderWorldCopies},bn.renderWorldCopies.set=function(J){J===void 0?J=!0:J===null&&(J=!1),this._renderWorldCopies=J},bn.worldSize.get=function(){return this.tileSize*this.scale},bn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},bn.size.get=function(){return new t.Point(this.width,this.height)},bn.bearing.get=function(){return-this.angle/Math.PI*180},bn.bearing.set=function(J){var ne=-t.wrap(J,-180,180)*Math.PI/180;this.angle!==ne&&(this._unmodified=!1,this.angle=ne,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},bn.pitch.get=function(){return this._pitch/Math.PI*180},bn.pitch.set=function(J){var ne=t.clamp(J,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==ne&&(this._unmodified=!1,this._pitch=ne,this._calcMatrices())},bn.fov.get=function(){return this._fov/Math.PI*180},bn.fov.set=function(J){J=Math.max(.01,Math.min(60,J)),this._fov!==J&&(this._unmodified=!1,this._fov=J/180*Math.PI,this._calcMatrices())},bn.zoom.get=function(){return this._zoom},bn.zoom.set=function(J){var ne=Math.min(Math.max(J,this.minZoom),this.maxZoom);this._zoom!==ne&&(this._unmodified=!1,this._zoom=ne,this.scale=this.zoomScale(ne),this.tileZoom=Math.floor(ne),this.zoomFraction=ne-this.tileZoom,this._constrain(),this._calcMatrices())},bn.center.get=function(){return this._center},bn.center.set=function(J){J.lat===this._center.lat&&J.lng===this._center.lng||(this._unmodified=!1,this._center=J,this._constrain(),this._calcMatrices())},bn.padding.get=function(){return this._edgeInsets.toJSON()},bn.padding.set=function(J){this._edgeInsets.equals(J)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,J,1),this._calcMatrices())},bn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Zr.prototype.isPaddingEqual=function(J){return this._edgeInsets.equals(J)},Zr.prototype.interpolatePadding=function(J,ne,q){this._unmodified=!1,this._edgeInsets.interpolate(J,ne,q),this._constrain(),this._calcMatrices()},Zr.prototype.coveringZoomLevel=function(J){var ne=(J.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/J.tileSize));return Math.max(0,ne)},Zr.prototype.getVisibleUnwrappedCoordinates=function(J){var ne=[new t.UnwrappedTileID(0,J)];if(this._renderWorldCopies)for(var q=this.pointCoordinate(new t.Point(0,0)),ve=this.pointCoordinate(new t.Point(this.width,0)),Se=this.pointCoordinate(new t.Point(this.width,this.height)),Oe=this.pointCoordinate(new t.Point(0,this.height)),Xe=Math.floor(Math.min(q.x,ve.x,Se.x,Oe.x)),ut=Math.floor(Math.max(q.x,ve.x,Se.x,Oe.x)),yt=Xe-1;yt<=ut+1;yt++)yt!==0&&ne.push(new t.UnwrappedTileID(yt,J));return ne},Zr.prototype.coveringTiles=function(J){var ne=this.coveringZoomLevel(J),q=ne;if(J.minzoom!==void 0&&ne<J.minzoom)return[];J.maxzoom!==void 0&&ne>J.maxzoom&&(ne=J.maxzoom);var ve=t.MercatorCoordinate.fromLngLat(this.center),Se=Math.pow(2,ne),Oe=[Se*ve.x,Se*ve.y,0],Xe=xr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ne),ut=J.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ut=ne);var yt=function(la){return{aabb:new Ar([la*Se,0,0],[(la+1)*Se,Se,0]),zoom:0,x:0,y:0,wrap:la,fullyVisible:!1}},jt=[],sr=[],pr=ne,br=J.reparseOverscaled?q:ne;if(this._renderWorldCopies)for(var Lr=1;Lr<=3;Lr++)jt.push(yt(-Lr)),jt.push(yt(Lr));for(jt.push(yt(0));jt.length>0;){var Dr=jt.pop(),jr=Dr.x,Sr=Dr.y,Ur=Dr.fullyVisible;if(!Ur){var $r=Dr.aabb.intersects(Xe);if($r===0)continue;Ur=$r===2}var cn=Dr.aabb.distanceX(Oe),In=Dr.aabb.distanceY(Oe),An=Math.max(Math.abs(cn),Math.abs(In));if(Dr.zoom===pr||An>3+(1<<pr-Dr.zoom)-2&&Dr.zoom>=ut)sr.push({tileID:new t.OverscaledTileID(Dr.zoom===pr?br:Dr.zoom,Dr.wrap,Dr.zoom,jr,Sr),distanceSq:t.sqrLen([Oe[0]-.5-jr,Oe[1]-.5-Sr])});else for(var Dn=0;Dn<4;Dn++){var Jn=(jr<<1)+Dn%2,ha=(Sr<<1)+(Dn>>1);jt.push({aabb:Dr.aabb.quadrant(Dn),zoom:Dr.zoom+1,x:Jn,y:ha,wrap:Dr.wrap,fullyVisible:Ur})}}return sr.sort(function(la,wa){return la.distanceSq-wa.distanceSq}).map(function(la){return la.tileID})},Zr.prototype.resize=function(J,ne){this.width=J,this.height=ne,this.pixelsToGLUnits=[2/J,-2/ne],this._constrain(),this._calcMatrices()},bn.unmodified.get=function(){return this._unmodified},Zr.prototype.zoomScale=function(J){return Math.pow(2,J)},Zr.prototype.scaleZoom=function(J){return Math.log(J)/Math.LN2},Zr.prototype.project=function(J){var ne=t.clamp(J.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(J.lng)*this.worldSize,t.mercatorYfromLat(ne)*this.worldSize)},Zr.prototype.unproject=function(J){return new t.MercatorCoordinate(J.x/this.worldSize,J.y/this.worldSize).toLngLat()},bn.point.get=function(){return this.project(this.center)},Zr.prototype.setLocationAtPoint=function(J,ne){var q=this.pointCoordinate(ne),ve=this.pointCoordinate(this.centerPoint),Se=this.locationCoordinate(J),Oe=new t.MercatorCoordinate(Se.x-(q.x-ve.x),Se.y-(q.y-ve.y));this.center=this.coordinateLocation(Oe),this._renderWorldCopies&&(this.center=this.center.wrap())},Zr.prototype.locationPoint=function(J){return this.coordinatePoint(this.locationCoordinate(J))},Zr.prototype.pointLocation=function(J){return this.coordinateLocation(this.pointCoordinate(J))},Zr.prototype.locationCoordinate=function(J){return t.MercatorCoordinate.fromLngLat(J)},Zr.prototype.coordinateLocation=function(J){return J.toLngLat()},Zr.prototype.pointCoordinate=function(J){var ne=[J.x,J.y,0,1],q=[J.x,J.y,1,1];t.transformMat4(ne,ne,this.pixelMatrixInverse),t.transformMat4(q,q,this.pixelMatrixInverse);var ve=ne[3],Se=q[3],Oe=ne[1]/ve,Xe=q[1]/Se,ut=ne[2]/ve,yt=q[2]/Se,jt=ut===yt?0:(0-ut)/(yt-ut);return new t.MercatorCoordinate(t.number(ne[0]/ve,q[0]/Se,jt)/this.worldSize,t.number(Oe,Xe,jt)/this.worldSize)},Zr.prototype.coordinatePoint=function(J){var ne=[J.x*this.worldSize,J.y*this.worldSize,0,1];return t.transformMat4(ne,ne,this.pixelMatrix),new t.Point(ne[0]/ne[3],ne[1]/ne[3])},Zr.prototype.getBounds=function(){return new t.LngLatBounds().extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Zr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Zr.prototype.setMaxBounds=function(J){J?(this.lngRange=[J.getWest(),J.getEast()],this.latRange=[J.getSouth(),J.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Zr.prototype.calculatePosMatrix=function(J,ne){ne===void 0&&(ne=!1);var q=J.key,ve=ne?this._alignedPosMatrixCache:this._posMatrixCache;if(ve[q])return ve[q];var Se=J.canonical,Oe=this.worldSize/this.zoomScale(Se.z),Xe=Se.x+Math.pow(2,Se.z)*J.wrap,ut=t.identity(new Float64Array(16));return t.translate(ut,ut,[Xe*Oe,Se.y*Oe,0]),t.scale(ut,ut,[Oe/t.EXTENT,Oe/t.EXTENT,1]),t.multiply(ut,ne?this.alignedProjMatrix:this.projMatrix,ut),ve[q]=new Float32Array(ut),ve[q]},Zr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Zr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var J,ne,q,ve,Se=-90,Oe=90,Xe=-180,ut=180,yt=this.size,jt=this._unmodified;if(this.latRange){var sr=this.latRange;Se=t.mercatorYfromLat(sr[1])*this.worldSize,J=(Oe=t.mercatorYfromLat(sr[0])*this.worldSize)-Se<yt.y?yt.y/(Oe-Se):0}if(this.lngRange){var pr=this.lngRange;Xe=t.mercatorXfromLng(pr[0])*this.worldSize,ne=(ut=t.mercatorXfromLng(pr[1])*this.worldSize)-Xe<yt.x?yt.x/(ut-Xe):0}var br=this.point,Lr=Math.max(ne||0,J||0);if(Lr)return this.center=this.unproject(new t.Point(ne?(ut+Xe)/2:br.x,J?(Oe+Se)/2:br.y)),this.zoom+=this.scaleZoom(Lr),this._unmodified=jt,void(this._constraining=!1);if(this.latRange){var Dr=br.y,jr=yt.y/2;Dr-jr<Se&&(ve=Se+jr),Dr+jr>Oe&&(ve=Oe-jr)}if(this.lngRange){var Sr=br.x,Ur=yt.x/2;Sr-Ur<Xe&&(q=Xe+Ur),Sr+Ur>ut&&(q=ut-Ur)}q===void 0&&ve===void 0||(this.center=this.unproject(new t.Point(q!==void 0?q:br.x,ve!==void 0?ve:br.y))),this._unmodified=jt,this._constraining=!1}},Zr.prototype._calcMatrices=function(){if(this.height){var J=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var ne=Math.PI/2+this._pitch,q=this._fov*(.5+J.y/this.height),ve=Math.sin(q)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-ne-q,.01,Math.PI-.01)),Se=this.point,Oe=Se.x,Xe=Se.y,ut=1.01*(Math.cos(Math.PI/2-this._pitch)*ve+this.cameraToCenterDistance),yt=this.height/50,jt=new Float64Array(16);t.perspective(jt,this._fov,this.width/this.height,yt,ut),jt[8]=2*-J.x/this.width,jt[9]=2*J.y/this.height,t.scale(jt,jt,[1,-1,1]),t.translate(jt,jt,[0,0,-this.cameraToCenterDistance]),t.rotateX(jt,jt,this._pitch),t.rotateZ(jt,jt,this.angle),t.translate(jt,jt,[-Oe,-Xe,0]),this.mercatorMatrix=t.scale([],jt,[this.worldSize,this.worldSize,this.worldSize]),t.scale(jt,jt,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=jt,this.invProjMatrix=t.invert([],this.projMatrix);var sr=this.width%2/2,pr=this.height%2/2,br=Math.cos(this.angle),Lr=Math.sin(this.angle),Dr=Oe-Math.round(Oe)+br*sr+Lr*pr,jr=Xe-Math.round(Xe)+br*pr+Lr*sr,Sr=new Float64Array(jt);if(t.translate(Sr,Sr,[Dr>.5?Dr-1:Dr,jr>.5?jr-1:jr,0]),this.alignedProjMatrix=Sr,jt=t.create(),t.scale(jt,jt,[this.width/2,-this.height/2,1]),t.translate(jt,jt,[1,-1,0]),this.labelPlaneMatrix=jt,jt=t.create(),t.scale(jt,jt,[1,-1,1]),t.translate(jt,jt,[-1,-1,0]),t.scale(jt,jt,[2/this.width,2/this.height,1]),this.glCoordMatrix=jt,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(jt=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=jt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Zr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var J=this.pointCoordinate(new t.Point(0,0)),ne=[J.x*this.worldSize,J.y*this.worldSize,0,1];return t.transformMat4(ne,ne,this.pixelMatrix)[3]/this.cameraToCenterDistance},Zr.prototype.getCameraPoint=function(){var J=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,J))},Zr.prototype.getCameraQueryGeometry=function(J){var ne=this.getCameraPoint();if(J.length===1)return[J[0],ne];for(var q=ne.x,ve=ne.y,Se=ne.x,Oe=ne.y,Xe=0,ut=J;Xe<ut.length;Xe+=1){var yt=ut[Xe];q=Math.min(q,yt.x),ve=Math.min(ve,yt.y),Se=Math.max(Se,yt.x),Oe=Math.max(Oe,yt.y)}return[new t.Point(q,ve),new t.Point(Se,ve),new t.Point(Se,Oe),new t.Point(q,Oe),new t.Point(q,ve)]},Object.defineProperties(Zr.prototype,bn);var Qn=function(J){var ne,q,ve,Se;this._hashName=J&&encodeURIComponent(J),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(ne=this._updateHashUnthrottled.bind(this),q=!1,ve=null,Se=function(){ve=null,q&&(ne(),ve=setTimeout(Se,300),q=!1)},function(){return q=!0,ve||Se(),ve})};Qn.prototype.addTo=function(J){return this._map=J,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Qn.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Qn.prototype.getHashString=function(J){var ne=this._map.getCenter(),q=Math.round(100*this._map.getZoom())/100,ve=Math.ceil((q*Math.LN2+Math.log(512/360/.5))/Math.LN10),Se=Math.pow(10,ve),Oe=Math.round(ne.lng*Se)/Se,Xe=Math.round(ne.lat*Se)/Se,ut=this._map.getBearing(),yt=this._map.getPitch(),jt="";if(jt+=J?"/"+Oe+"/"+Xe+"/"+q:q+"/"+Xe+"/"+Oe,(ut||yt)&&(jt+="/"+Math.round(10*ut)/10),yt&&(jt+="/"+Math.round(yt)),this._hashName){var sr=this._hashName,pr=!1,br=t.window.location.hash.slice(1).split("&").map(function(Lr){var Dr=Lr.split("=")[0];return Dr===sr?(pr=!0,Dr+"="+jt):Lr}).filter(function(Lr){return Lr});return pr||br.push(sr+"="+jt),"#"+br.join("&")}return"#"+jt},Qn.prototype._getCurrentHash=function(){var J,ne=this,q=t.window.location.hash.replace("#","");return this._hashName?(q.split("&").map(function(ve){return ve.split("=")}).forEach(function(ve){ve[0]===ne._hashName&&(J=ve)}),(J&&J[1]||"").split("/")):q.split("/")},Qn.prototype._onHashChange=function(){var J=this._getCurrentHash();if(J.length>=3&&!J.some(function(q){return isNaN(q)})){var ne=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(J[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+J[2],+J[1]],zoom:+J[0],bearing:ne,pitch:+(J[4]||0)}),!0}return!1},Qn.prototype._updateHashUnthrottled=function(){var J=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",J)}catch{}};var Cn={linearity:.3,easing:t.bezier(0,0,.3,1)},Hn=t.extend({deceleration:2500,maxSpeed:1400},Cn),ra=t.extend({deceleration:20,maxSpeed:1400},Cn),qn=t.extend({deceleration:1e3,maxSpeed:360},Cn),Un=t.extend({deceleration:1e3,maxSpeed:90},Cn),Fa=function(J){this._map=J,this.clear()};function ai(J,ne){(!J.duration||J.duration<ne.duration)&&(J.duration=ne.duration,J.easing=ne.easing)}function _a(J,ne,q){var ve=q.maxSpeed,Se=q.linearity,Oe=q.deceleration,Xe=t.clamp(J*Se/(ne/1e3),-ve,ve),ut=Math.abs(Xe)/(Oe*Se);return{easing:q.easing,duration:1e3*ut,amount:Xe*(ut/2)}}Fa.prototype.clear=function(){this._inertiaBuffer=[]},Fa.prototype.record=function(J){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:J})},Fa.prototype._drainInertiaBuffer=function(){for(var J=this._inertiaBuffer,ne=t.browser.now();J.length>0&&ne-J[0].time>160;)J.shift()},Fa.prototype._onMoveEnd=function(J){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var ne={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},q=0,ve=this._inertiaBuffer;q<ve.length;q+=1){var Se=ve[q].settings;ne.zoom+=Se.zoomDelta||0,ne.bearing+=Se.bearingDelta||0,ne.pitch+=Se.pitchDelta||0,Se.panDelta&&ne.pan._add(Se.panDelta),Se.around&&(ne.around=Se.around),Se.pinchAround&&(ne.pinchAround=Se.pinchAround)}var Oe=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Xe={};if(ne.pan.mag()){var ut=_a(ne.pan.mag(),Oe,t.extend({},Hn,J||{}));Xe.offset=ne.pan.mult(ut.amount/ne.pan.mag()),Xe.center=this._map.transform.center,ai(Xe,ut)}if(ne.zoom){var yt=_a(ne.zoom,Oe,ra);Xe.zoom=this._map.transform.zoom+yt.amount,ai(Xe,yt)}if(ne.bearing){var jt=_a(ne.bearing,Oe,qn);Xe.bearing=this._map.transform.bearing+t.clamp(jt.amount,-179,179),ai(Xe,jt)}if(ne.pitch){var sr=_a(ne.pitch,Oe,Un);Xe.pitch=this._map.transform.pitch+sr.amount,ai(Xe,sr)}if(Xe.zoom||Xe.bearing){var pr=ne.pinchAround===void 0?ne.around:ne.pinchAround;Xe.around=pr?this._map.unproject(pr):this._map.getCenter()}return this.clear(),t.extend(Xe,{noMoveStart:!0})}};var Na=function(J){function ne(ve,Se,Oe,Xe){Xe===void 0&&(Xe={});var ut=n.mousePos(Se.getCanvasContainer(),Oe),yt=Se.unproject(ut);J.call(this,ve,t.extend({point:ut,lngLat:yt,originalEvent:Oe},Xe)),this._defaultPrevented=!1,this.target=Se}J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne;var q={defaultPrevented:{configurable:!0}};return ne.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(ne.prototype,q),ne}(t.Event),wi=function(J){function ne(ve,Se,Oe){var Xe=ve==="touchend"?Oe.changedTouches:Oe.touches,ut=n.touchPos(Se.getCanvasContainer(),Xe),yt=ut.map(function(pr){return Se.unproject(pr)}),jt=ut.reduce(function(pr,br,Lr,Dr){return pr.add(br.div(Dr.length))},new t.Point(0,0)),sr=Se.unproject(jt);J.call(this,ve,{points:ut,point:jt,lngLats:yt,lngLat:sr,originalEvent:Oe}),this._defaultPrevented=!1}J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne;var q={defaultPrevented:{configurable:!0}};return ne.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(ne.prototype,q),ne}(t.Event),ya=function(J){function ne(ve,Se,Oe){J.call(this,ve,{originalEvent:Oe}),this._defaultPrevented=!1}J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne;var q={defaultPrevented:{configurable:!0}};return ne.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(ne.prototype,q),ne}(t.Event),va=function(J,ne){this._map=J,this._clickTolerance=ne.clickTolerance};va.prototype.reset=function(){delete this._mousedownPos},va.prototype.wheel=function(J){return this._firePreventable(new ya(J.type,this._map,J))},va.prototype.mousedown=function(J,ne){return this._mousedownPos=ne,this._firePreventable(new Na(J.type,this._map,J))},va.prototype.mouseup=function(J){this._map.fire(new Na(J.type,this._map,J))},va.prototype.click=function(J,ne){this._mousedownPos&&this._mousedownPos.dist(ne)>=this._clickTolerance||this._map.fire(new Na(J.type,this._map,J))},va.prototype.dblclick=function(J){return this._firePreventable(new Na(J.type,this._map,J))},va.prototype.mouseover=function(J){this._map.fire(new Na(J.type,this._map,J))},va.prototype.mouseout=function(J){this._map.fire(new Na(J.type,this._map,J))},va.prototype.touchstart=function(J){return this._firePreventable(new wi(J.type,this._map,J))},va.prototype.touchmove=function(J){this._map.fire(new wi(J.type,this._map,J))},va.prototype.touchend=function(J){this._map.fire(new wi(J.type,this._map,J))},va.prototype.touchcancel=function(J){this._map.fire(new wi(J.type,this._map,J))},va.prototype._firePreventable=function(J){if(this._map.fire(J),J.defaultPrevented)return{}},va.prototype.isEnabled=function(){return!0},va.prototype.isActive=function(){return!1},va.prototype.enable=function(){},va.prototype.disable=function(){};var Ia=function(J){this._map=J};Ia.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ia.prototype.mousemove=function(J){this._map.fire(new Na(J.type,this._map,J))},Ia.prototype.mousedown=function(){this._delayContextMenu=!0},Ia.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Na("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ia.prototype.contextmenu=function(J){this._delayContextMenu?this._contextMenuEvent=J:this._map.fire(new Na(J.type,this._map,J)),this._map.listens("contextmenu")&&J.preventDefault()},Ia.prototype.isEnabled=function(){return!0},Ia.prototype.isActive=function(){return!1},Ia.prototype.enable=function(){},Ia.prototype.disable=function(){};var ui=function(J,ne){this._map=J,this._el=J.getCanvasContainer(),this._container=J.getContainer(),this._clickTolerance=ne.clickTolerance||1};function ki(J,ne){for(var q={},ve=0;ve<J.length;ve++)q[J[ve].identifier]=ne[ve];return q}ui.prototype.isEnabled=function(){return!!this._enabled},ui.prototype.isActive=function(){return!!this._active},ui.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ui.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ui.prototype.mousedown=function(J,ne){this.isEnabled()&&J.shiftKey&&J.button===0&&(n.disableDrag(),this._startPos=this._lastPos=ne,this._active=!0)},ui.prototype.mousemoveWindow=function(J,ne){if(this._active){var q=ne;if(!(this._lastPos.equals(q)||!this._box&&q.dist(this._startPos)<this._clickTolerance)){var ve=this._startPos;this._lastPos=q,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",J));var Se=Math.min(ve.x,q.x),Oe=Math.max(ve.x,q.x),Xe=Math.min(ve.y,q.y),ut=Math.max(ve.y,q.y);n.setTransform(this._box,"translate("+Se+"px,"+Xe+"px)"),this._box.style.width=Oe-Se+"px",this._box.style.height=ut-Xe+"px"}}},ui.prototype.mouseupWindow=function(J,ne){var q=this;if(this._active&&J.button===0){var ve=this._startPos,Se=ne;if(this.reset(),n.suppressClick(),ve.x!==Se.x||ve.y!==Se.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:J})),{cameraAnimation:function(Oe){return Oe.fitScreenCoordinates(ve,Se,q._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",J)}},ui.prototype.keydown=function(J){this._active&&J.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",J))},ui.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},ui.prototype._fireEvent=function(J,ne){return this._map.fire(new t.Event(J,{originalEvent:ne}))};var vi=function(J){this.reset(),this.numTouches=J.numTouches};vi.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},vi.prototype.touchstart=function(J,ne,q){(this.centroid||q.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=J.timeStamp),q.length===this.numTouches&&(this.centroid=function(ve){for(var Se=new t.Point(0,0),Oe=0,Xe=ve;Oe<Xe.length;Oe+=1)Se._add(Xe[Oe]);return Se.div(ve.length)}(ne),this.touches=ki(q,ne)))},vi.prototype.touchmove=function(J,ne,q){if(!this.aborted&&this.centroid){var ve=ki(q,ne);for(var Se in this.touches){var Oe=ve[Se];(!Oe||Oe.dist(this.touches[Se])>30)&&(this.aborted=!0)}}},vi.prototype.touchend=function(J,ne,q){if((!this.centroid||J.timeStamp-this.startTime>500)&&(this.aborted=!0),q.length===0){var ve=!this.aborted&&this.centroid;if(this.reset(),ve)return ve}};var Ci=function(J){this.singleTap=new vi(J),this.numTaps=J.numTaps,this.reset()};Ci.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ci.prototype.touchstart=function(J,ne,q){this.singleTap.touchstart(J,ne,q)},Ci.prototype.touchmove=function(J,ne,q){this.singleTap.touchmove(J,ne,q)},Ci.prototype.touchend=function(J,ne,q){var ve=this.singleTap.touchend(J,ne,q);if(ve){var Se=J.timeStamp-this.lastTime<500,Oe=!this.lastTap||this.lastTap.dist(ve)<30;if(Se&&Oe||this.reset(),this.count++,this.lastTime=J.timeStamp,this.lastTap=ve,this.count===this.numTaps)return this.reset(),ve}};var Xn=function(){this._zoomIn=new Ci({numTouches:1,numTaps:2}),this._zoomOut=new Ci({numTouches:2,numTaps:1}),this.reset()};Xn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Xn.prototype.touchstart=function(J,ne,q){this._zoomIn.touchstart(J,ne,q),this._zoomOut.touchstart(J,ne,q)},Xn.prototype.touchmove=function(J,ne,q){this._zoomIn.touchmove(J,ne,q),this._zoomOut.touchmove(J,ne,q)},Xn.prototype.touchend=function(J,ne,q){var ve=this,Se=this._zoomIn.touchend(J,ne,q),Oe=this._zoomOut.touchend(J,ne,q);return Se?(this._active=!0,J.preventDefault(),setTimeout(function(){return ve.reset()},0),{cameraAnimation:function(Xe){return Xe.easeTo({duration:300,zoom:Xe.getZoom()+1,around:Xe.unproject(Se)},{originalEvent:J})}}):Oe?(this._active=!0,J.preventDefault(),setTimeout(function(){return ve.reset()},0),{cameraAnimation:function(Xe){return Xe.easeTo({duration:300,zoom:Xe.getZoom()-1,around:Xe.unproject(Oe)},{originalEvent:J})}}):void 0},Xn.prototype.touchcancel=function(){this.reset()},Xn.prototype.enable=function(){this._enabled=!0},Xn.prototype.disable=function(){this._enabled=!1,this.reset()},Xn.prototype.isEnabled=function(){return this._enabled},Xn.prototype.isActive=function(){return this._active};var oi=function(J){this.reset(),this._clickTolerance=J.clickTolerance||1};oi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},oi.prototype._correctButton=function(J,ne){return!1},oi.prototype._move=function(J,ne){return{}},oi.prototype.mousedown=function(J,ne){if(!this._lastPoint){var q=n.mouseButton(J);this._correctButton(J,q)&&(this._lastPoint=ne,this._eventButton=q)}},oi.prototype.mousemoveWindow=function(J,ne){var q=this._lastPoint;if(q&&(J.preventDefault(),this._moved||!(ne.dist(q)<this._clickTolerance)))return this._moved=!0,this._lastPoint=ne,this._move(q,ne)},oi.prototype.mouseupWindow=function(J){n.mouseButton(J)===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},oi.prototype.enable=function(){this._enabled=!0},oi.prototype.disable=function(){this._enabled=!1,this.reset()},oi.prototype.isEnabled=function(){return this._enabled},oi.prototype.isActive=function(){return this._active};var Ti=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.mousedown=function(q,ve){J.prototype.mousedown.call(this,q,ve),this._lastPoint&&(this._active=!0)},ne.prototype._correctButton=function(q,ve){return ve===0&&!q.ctrlKey},ne.prototype._move=function(q,ve){return{around:ve,panDelta:ve.sub(q)}},ne}(oi),Sa=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype._correctButton=function(q,ve){return ve===0&&q.ctrlKey||ve===2},ne.prototype._move=function(q,ve){var Se=.8*(ve.x-q.x);if(Se)return this._active=!0,{bearingDelta:Se}},ne.prototype.contextmenu=function(q){q.preventDefault()},ne}(oi),_o=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype._correctButton=function(q,ve){return ve===0&&q.ctrlKey||ve===2},ne.prototype._move=function(q,ve){var Se=-.5*(ve.y-q.y);if(Se)return this._active=!0,{pitchDelta:Se}},ne.prototype.contextmenu=function(q){q.preventDefault()},ne}(oi),Zi=function(J){this._minTouches=1,this._clickTolerance=J.clickTolerance||1,this.reset()};Zi.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Zi.prototype.touchstart=function(J,ne,q){return this._calculateTransform(J,ne,q)},Zi.prototype.touchmove=function(J,ne,q){if(this._active)return J.preventDefault(),this._calculateTransform(J,ne,q)},Zi.prototype.touchend=function(J,ne,q){this._calculateTransform(J,ne,q),this._active&&q.length<this._minTouches&&this.reset()},Zi.prototype.touchcancel=function(){this.reset()},Zi.prototype._calculateTransform=function(J,ne,q){q.length>0&&(this._active=!0);var ve=ki(q,ne),Se=new t.Point(0,0),Oe=new t.Point(0,0),Xe=0;for(var ut in ve){var yt=ve[ut],jt=this._touches[ut];jt&&(Se._add(yt),Oe._add(yt.sub(jt)),Xe++,ve[ut]=yt)}if(this._touches=ve,!(Xe<this._minTouches)&&Oe.mag()){var sr=Oe.div(Xe);if(this._sum._add(sr),!(this._sum.mag()<this._clickTolerance))return{around:Se.div(Xe),panDelta:sr}}},Zi.prototype.enable=function(){this._enabled=!0},Zi.prototype.disable=function(){this._enabled=!1,this.reset()},Zi.prototype.isEnabled=function(){return this._enabled},Zi.prototype.isActive=function(){return this._active};var qi=function(){this.reset()};function zs(J,ne,q){for(var ve=0;ve<J.length;ve++)if(J[ve].identifier===q)return ne[ve]}function Gi(J,ne){return Math.log(J/ne)/Math.LN2}qi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},qi.prototype._start=function(J){},qi.prototype._move=function(J,ne,q){return{}},qi.prototype.touchstart=function(J,ne,q){this._firstTwoTouches||q.length<2||(this._firstTwoTouches=[q[0].identifier,q[1].identifier],this._start([ne[0],ne[1]]))},qi.prototype.touchmove=function(J,ne,q){if(this._firstTwoTouches){J.preventDefault();var ve=this._firstTwoTouches,Se=ve[1],Oe=zs(q,ne,ve[0]),Xe=zs(q,ne,Se);if(Oe&&Xe){var ut=this._aroundCenter?null:Oe.add(Xe).div(2);return this._move([Oe,Xe],ut,J)}}},qi.prototype.touchend=function(J,ne,q){if(this._firstTwoTouches){var ve=this._firstTwoTouches,Se=ve[1],Oe=zs(q,ne,ve[0]),Xe=zs(q,ne,Se);Oe&&Xe||(this._active&&n.suppressClick(),this.reset())}},qi.prototype.touchcancel=function(){this.reset()},qi.prototype.enable=function(J){this._enabled=!0,this._aroundCenter=!!J&&J.around==="center"},qi.prototype.disable=function(){this._enabled=!1,this.reset()},qi.prototype.isEnabled=function(){return this._enabled},qi.prototype.isActive=function(){return this._active};var Ni=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.reset=function(){J.prototype.reset.call(this),delete this._distance,delete this._startDistance},ne.prototype._start=function(q){this._startDistance=this._distance=q[0].dist(q[1])},ne.prototype._move=function(q,ve){var Se=this._distance;if(this._distance=q[0].dist(q[1]),this._active||!(Math.abs(Gi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Gi(this._distance,Se),pinchAround:ve}},ne}(qi);function yo(J,ne){return 180*J.angleWith(ne)/Math.PI}var ts=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.reset=function(){J.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},ne.prototype._start=function(q){this._startVector=this._vector=q[0].sub(q[1]),this._minDiameter=q[0].dist(q[1])},ne.prototype._move=function(q,ve){var Se=this._vector;if(this._vector=q[0].sub(q[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:yo(this._vector,Se),pinchAround:ve}},ne.prototype._isBelowThreshold=function(q){this._minDiameter=Math.min(this._minDiameter,q.mag());var ve=25/(Math.PI*this._minDiameter)*360,Se=yo(q,this._startVector);return Math.abs(Se)<ve},ne}(qi);function ls(J){return Math.abs(J.y)>Math.abs(J.x)}var Ss=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.reset=function(){J.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},ne.prototype._start=function(q){this._lastPoints=q,ls(q[0].sub(q[1]))&&(this._valid=!1)},ne.prototype._move=function(q,ve,Se){var Oe=q[0].sub(this._lastPoints[0]),Xe=q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Oe,Xe,Se.timeStamp),this._valid)return this._lastPoints=q,this._active=!0,{pitchDelta:(Oe.y+Xe.y)/2*-.5}},ne.prototype.gestureBeginsVertically=function(q,ve,Se){if(this._valid!==void 0)return this._valid;var Oe=q.mag()>=2,Xe=ve.mag()>=2;if(Oe||Xe){if(!Oe||!Xe)return this._firstMove===void 0&&(this._firstMove=Se),Se-this._firstMove<100&&void 0;var ut=q.y>0==ve.y>0;return ls(q)&&ls(ve)&&ut}},ne}(qi),Ws={panStep:100,bearingStep:15,pitchStep:10},so=function(){var J=Ws;this._panStep=J.panStep,this._bearingStep=J.bearingStep,this._pitchStep=J.pitchStep};function Xa(J){return J*(2-J)}so.prototype.reset=function(){this._active=!1},so.prototype.keydown=function(J){var ne=this;if(!(J.altKey||J.ctrlKey||J.metaKey)){var q=0,ve=0,Se=0,Oe=0,Xe=0;switch(J.keyCode){case 61:case 107:case 171:case 187:q=1;break;case 189:case 109:case 173:q=-1;break;case 37:J.shiftKey?ve=-1:(J.preventDefault(),Oe=-1);break;case 39:J.shiftKey?ve=1:(J.preventDefault(),Oe=1);break;case 38:J.shiftKey?Se=1:(J.preventDefault(),Xe=-1);break;case 40:J.shiftKey?Se=-1:(J.preventDefault(),Xe=1);break;default:return}return{cameraAnimation:function(ut){var yt=ut.getZoom();ut.easeTo({duration:300,easeId:"keyboardHandler",easing:Xa,zoom:q?Math.round(yt)+q*(J.shiftKey?2:1):yt,bearing:ut.getBearing()+ve*ne._bearingStep,pitch:ut.getPitch()+Se*ne._pitchStep,offset:[-Oe*ne._panStep,-Xe*ne._panStep],center:ut.getCenter()},{originalEvent:J})}}}},so.prototype.enable=function(){this._enabled=!0},so.prototype.disable=function(){this._enabled=!1,this.reset()},so.prototype.isEnabled=function(){return this._enabled},so.prototype.isActive=function(){return this._active};var hi=function(J,ne){this._map=J,this._el=J.getCanvasContainer(),this._handler=ne,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};hi.prototype.setZoomRate=function(J){this._defaultZoomRate=J},hi.prototype.setWheelZoomRate=function(J){this._wheelZoomRate=J},hi.prototype.isEnabled=function(){return!!this._enabled},hi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},hi.prototype.isZooming=function(){return!!this._zooming},hi.prototype.enable=function(J){this.isEnabled()||(this._enabled=!0,this._aroundCenter=J&&J.around==="center")},hi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},hi.prototype.wheel=function(J){if(this.isEnabled()){var ne=J.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*J.deltaY:J.deltaY,q=t.browser.now(),ve=q-(this._lastWheelEventTime||0);this._lastWheelEventTime=q,ne!==0&&ne%4.000244140625==0?this._type="wheel":ne!==0&&Math.abs(ne)<4?this._type="trackpad":ve>400?(this._type=null,this._lastValue=ne,this._timeout=setTimeout(this._onTimeout,40,J)):this._type||(this._type=Math.abs(ve*ne)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ne+=this._lastValue)),J.shiftKey&&ne&&(ne/=4),this._type&&(this._lastWheelEvent=J,this._delta-=ne,this._active||this._start(J)),J.preventDefault()}},hi.prototype._onTimeout=function(J){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(J)},hi.prototype._start=function(J){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var ne=n.mousePos(this._el,J);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(ne)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},hi.prototype.renderFrame=function(){return this._onScrollFrame()},hi.prototype._onScrollFrame=function(){var J=this;if(this._frameId&&(this._frameId=null,this.isActive())){var ne=this._map.transform;if(this._delta!==0){var q=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,ve=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&ve!==0&&(ve=1/ve);var Se=typeof this._targetZoom=="number"?ne.zoomScale(this._targetZoom):ne.scale;this._targetZoom=Math.min(ne.maxZoom,Math.max(ne.minZoom,ne.scaleZoom(Se*ve))),this._type==="wheel"&&(this._startZoom=ne.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Oe,Xe=typeof this._targetZoom=="number"?this._targetZoom:ne.zoom,ut=this._startZoom,yt=this._easing,jt=!1;if(this._type==="wheel"&&ut&&yt){var sr=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),pr=yt(sr);Oe=t.number(ut,Xe,pr),sr<1?this._frameId||(this._frameId=!0):jt=!0}else Oe=Xe,jt=!0;return this._active=!0,jt&&(this._active=!1,this._finishTimeout=setTimeout(function(){J._zooming=!1,J._handler._triggerRenderFrame(),delete J._targetZoom,delete J._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!jt,zoomDelta:Oe-ne.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},hi.prototype._smoothOutEasing=function(J){var ne=t.ease;if(this._prevEase){var q=this._prevEase,ve=(t.browser.now()-q.start)/q.duration,Se=q.easing(ve+.01)-q.easing(ve),Oe=.27/Math.sqrt(Se*Se+1e-4)*.01,Xe=Math.sqrt(.0729-Oe*Oe);ne=t.bezier(Oe,Xe,.25,1)}return this._prevEase={start:t.browser.now(),duration:J,easing:ne},ne},hi.prototype.reset=function(){this._active=!1};var Oo=function(J,ne){this._clickZoom=J,this._tapZoom=ne};Oo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Oo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Oo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Oo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var lo=function(){this.reset()};lo.prototype.reset=function(){this._active=!1},lo.prototype.dblclick=function(J,ne){return J.preventDefault(),{cameraAnimation:function(q){q.easeTo({duration:300,zoom:q.getZoom()+(J.shiftKey?-1:1),around:q.unproject(ne)},{originalEvent:J})}}},lo.prototype.enable=function(){this._enabled=!0},lo.prototype.disable=function(){this._enabled=!1,this.reset()},lo.prototype.isEnabled=function(){return this._enabled},lo.prototype.isActive=function(){return this._active};var Eo=function(){this._tap=new Ci({numTouches:1,numTaps:1}),this.reset()};Eo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Eo.prototype.touchstart=function(J,ne,q){this._swipePoint||(this._tapTime&&J.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?q.length>0&&(this._swipePoint=ne[0],this._swipeTouch=q[0].identifier):this._tap.touchstart(J,ne,q))},Eo.prototype.touchmove=function(J,ne,q){if(this._tapTime){if(this._swipePoint){if(q[0].identifier!==this._swipeTouch)return;var ve=ne[0],Se=ve.y-this._swipePoint.y;return this._swipePoint=ve,J.preventDefault(),this._active=!0,{zoomDelta:Se/128}}}else this._tap.touchmove(J,ne,q)},Eo.prototype.touchend=function(J,ne,q){this._tapTime?this._swipePoint&&q.length===0&&this.reset():this._tap.touchend(J,ne,q)&&(this._tapTime=J.timeStamp)},Eo.prototype.touchcancel=function(){this.reset()},Eo.prototype.enable=function(){this._enabled=!0},Eo.prototype.disable=function(){this._enabled=!1,this.reset()},Eo.prototype.isEnabled=function(){return this._enabled},Eo.prototype.isActive=function(){return this._active};var Ki=function(J,ne,q){this._el=J,this._mousePan=ne,this._touchPan=q};Ki.prototype.enable=function(J){this._inertiaOptions=J||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ki.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ki.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ki.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var si=function(J,ne,q){this._pitchWithRotate=J.pitchWithRotate,this._mouseRotate=ne,this._mousePitch=q};si.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},si.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},si.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},si.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var eo=function(J,ne,q,ve){this._el=J,this._touchZoom=ne,this._touchRotate=q,this._tapDragZoom=ve,this._rotationDisabled=!1,this._enabled=!0};eo.prototype.enable=function(J){this._touchZoom.enable(J),this._rotationDisabled||this._touchRotate.enable(J),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},eo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},eo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},eo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},eo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},eo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var xo=function(J){return J.zoom||J.drag||J.pitch||J.rotate},Oa=function(J){function ne(){J.apply(this,arguments)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne}(t.Event);function Da(J){return J.panDelta&&J.panDelta.mag()||J.zoomDelta||J.bearingDelta||J.pitchDelta}var Za=function(J,ne){this._map=J,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Fa(J),this._bearingSnap=ne.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(ne),t.bindAll(["handleEvent","handleWindowEvent"],this);var q=this._el;this._listeners=[[q,"touchstart",{passive:!1}],[q,"touchmove",{passive:!1}],[q,"touchend",void 0],[q,"touchcancel",void 0],[q,"mousedown",void 0],[q,"mousemove",void 0],[q,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[q,"mouseover",void 0],[q,"mouseout",void 0],[q,"dblclick",void 0],[q,"click",void 0],[q,"keydown",{capture:!1}],[q,"keyup",void 0],[q,"wheel",{passive:!1}],[q,"contextmenu",void 0],[t.window,"blur",void 0]];for(var ve=0,Se=this._listeners;ve<Se.length;ve+=1){var Oe=Se[ve],Xe=Oe[0];n.addEventListener(Xe,Oe[1],Xe===t.window.document?this.handleWindowEvent:this.handleEvent,Oe[2])}};Za.prototype.destroy=function(){for(var J=0,ne=this._listeners;J<ne.length;J+=1){var q=ne[J],ve=q[0];n.removeEventListener(ve,q[1],ve===t.window.document?this.handleWindowEvent:this.handleEvent,q[2])}},Za.prototype._addDefaultHandlers=function(J){var ne=this._map,q=ne.getCanvasContainer();this._add("mapEvent",new va(ne,J));var ve=ne.boxZoom=new ui(ne,J);this._add("boxZoom",ve);var Se=new Xn,Oe=new lo;ne.doubleClickZoom=new Oo(Oe,Se),this._add("tapZoom",Se),this._add("clickZoom",Oe);var Xe=new Eo;this._add("tapDragZoom",Xe);var ut=ne.touchPitch=new Ss;this._add("touchPitch",ut);var yt=new Sa(J),jt=new _o(J);ne.dragRotate=new si(J,yt,jt),this._add("mouseRotate",yt,["mousePitch"]),this._add("mousePitch",jt,["mouseRotate"]);var sr=new Ti(J),pr=new Zi(J);ne.dragPan=new Ki(q,sr,pr),this._add("mousePan",sr),this._add("touchPan",pr,["touchZoom","touchRotate"]);var br=new ts,Lr=new Ni;ne.touchZoomRotate=new eo(q,Lr,br,Xe),this._add("touchRotate",br,["touchPan","touchZoom"]),this._add("touchZoom",Lr,["touchPan","touchRotate"]);var Dr=ne.scrollZoom=new hi(ne,this);this._add("scrollZoom",Dr,["mousePan"]);var jr=ne.keyboard=new so;this._add("keyboard",jr),this._add("blockableMapEvent",new Ia(ne));for(var Sr=0,Ur=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Sr<Ur.length;Sr+=1){var $r=Ur[Sr];J.interactive&&J[$r]&&ne[$r].enable(J[$r])}},Za.prototype._add=function(J,ne,q){this._handlers.push({handlerName:J,handler:ne,allowed:q}),this._handlersById[J]=ne},Za.prototype.stop=function(){if(!this._updatingCamera){for(var J=0,ne=this._handlers;J<ne.length;J+=1)ne[J].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Za.prototype.isActive=function(){for(var J=0,ne=this._handlers;J<ne.length;J+=1)if(ne[J].handler.isActive())return!0;return!1},Za.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Za.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Za.prototype.isMoving=function(){return Boolean(xo(this._eventsInProgress))||this.isZooming()},Za.prototype._blockedByActive=function(J,ne,q){for(var ve in J)if(ve!==q&&(!ne||ne.indexOf(ve)<0))return!0;return!1},Za.prototype.handleWindowEvent=function(J){this.handleEvent(J,J.type+"Window")},Za.prototype._getMapTouches=function(J){for(var ne=[],q=0,ve=J;q<ve.length;q+=1){var Se=ve[q];this._el.contains(Se.target)&&ne.push(Se)}return ne},Za.prototype.handleEvent=function(J,ne){if(J.type!=="blur"){this._updatingCamera=!0;for(var q=J.type==="renderFrame"?void 0:J,ve={needsRenderFrame:!1},Se={},Oe={},Xe=J.touches?this._getMapTouches(J.touches):void 0,ut=Xe?n.touchPos(this._el,Xe):n.mousePos(this._el,J),yt=0,jt=this._handlers;yt<jt.length;yt+=1){var sr=jt[yt],pr=sr.handlerName,br=sr.handler,Lr=sr.allowed;if(br.isEnabled()){var Dr=void 0;this._blockedByActive(Oe,Lr,pr)?br.reset():br[ne||J.type]&&(Dr=br[ne||J.type](J,ut,Xe),this.mergeHandlerResult(ve,Se,Dr,pr,q),Dr&&Dr.needsRenderFrame&&this._triggerRenderFrame()),(Dr||br.isActive())&&(Oe[pr]=br)}}var jr={};for(var Sr in this._previousActiveHandlers)Oe[Sr]||(jr[Sr]=q);this._previousActiveHandlers=Oe,(Object.keys(jr).length||Da(ve))&&(this._changes.push([ve,Se,jr]),this._triggerRenderFrame()),(Object.keys(Oe).length||Da(ve))&&this._map._stop(!0),this._updatingCamera=!1;var Ur=ve.cameraAnimation;Ur&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Ur(this._map))}else this.stop()},Za.prototype.mergeHandlerResult=function(J,ne,q,ve,Se){if(q){t.extend(J,q);var Oe={handlerName:ve,originalEvent:q.originalEvent||Se};q.zoomDelta!==void 0&&(ne.zoom=Oe),q.panDelta!==void 0&&(ne.drag=Oe),q.pitchDelta!==void 0&&(ne.pitch=Oe),q.bearingDelta!==void 0&&(ne.rotate=Oe)}},Za.prototype._applyChanges=function(){for(var J={},ne={},q={},ve=0,Se=this._changes;ve<Se.length;ve+=1){var Oe=Se[ve],Xe=Oe[0],ut=Oe[1],yt=Oe[2];Xe.panDelta&&(J.panDelta=(J.panDelta||new t.Point(0,0))._add(Xe.panDelta)),Xe.zoomDelta&&(J.zoomDelta=(J.zoomDelta||0)+Xe.zoomDelta),Xe.bearingDelta&&(J.bearingDelta=(J.bearingDelta||0)+Xe.bearingDelta),Xe.pitchDelta&&(J.pitchDelta=(J.pitchDelta||0)+Xe.pitchDelta),Xe.around!==void 0&&(J.around=Xe.around),Xe.pinchAround!==void 0&&(J.pinchAround=Xe.pinchAround),Xe.noInertia&&(J.noInertia=Xe.noInertia),t.extend(ne,ut),t.extend(q,yt)}this._updateMapTransform(J,ne,q),this._changes=[]},Za.prototype._updateMapTransform=function(J,ne,q){var ve=this._map,Se=ve.transform;if(!Da(J))return this._fireEvents(ne,q);var Oe=J.panDelta,Xe=J.zoomDelta,ut=J.bearingDelta,yt=J.pitchDelta,jt=J.around,sr=J.pinchAround;sr!==void 0&&(jt=sr),ve._stop(!0),jt=jt||ve.transform.centerPoint;var pr=Se.pointLocation(Oe?jt.sub(Oe):jt);ut&&(Se.bearing+=ut),yt&&(Se.pitch+=yt),Xe&&(Se.zoom+=Xe),Se.setLocationAtPoint(pr,jt),this._map._update(),J.noInertia||this._inertia.record(J),this._fireEvents(ne,q)},Za.prototype._fireEvents=function(J,ne){var q=this,ve=xo(this._eventsInProgress),Se=xo(J),Oe={};for(var Xe in J)this._eventsInProgress[Xe]||(Oe[Xe+"start"]=J[Xe].originalEvent),this._eventsInProgress[Xe]=J[Xe];for(var ut in!ve&&Se&&this._fireEvent("movestart",Se.originalEvent),Oe)this._fireEvent(ut,Oe[ut]);for(var yt in J.rotate&&(this._bearingChanged=!0),Se&&this._fireEvent("move",Se.originalEvent),J)this._fireEvent(yt,J[yt].originalEvent);var jt,sr={};for(var pr in this._eventsInProgress){var br=this._eventsInProgress[pr],Lr=br.handlerName,Dr=br.originalEvent;this._handlersById[Lr].isActive()||(delete this._eventsInProgress[pr],sr[pr+"end"]=jt=ne[Lr]||Dr)}for(var jr in sr)this._fireEvent(jr,sr[jr]);var Sr=xo(this._eventsInProgress);if((ve||Se)&&!Sr){this._updatingCamera=!0;var Ur=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),$r=function(cn){return cn!==0&&-q._bearingSnap<cn&&cn<q._bearingSnap};Ur?($r(Ur.bearing||this._map.getBearing())&&(Ur.bearing=0),this._map.easeTo(Ur,{originalEvent:jt})):(this._map.fire(new t.Event("moveend",{originalEvent:jt})),$r(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},Za.prototype._fireEvent=function(J,ne){this._map.fire(new t.Event(J,ne?{originalEvent:ne}:{}))},Za.prototype._triggerRenderFrame=function(){var J=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(ne){delete J._frameId,J.handleEvent(new Oa("renderFrame",{timeStamp:ne})),J._applyChanges()}))};var aa=function(J){function ne(q,ve){J.call(this),this._moving=!1,this._zooming=!1,this.transform=q,this._bearingSnap=ve.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},ne.prototype.setCenter=function(q,ve){return this.jumpTo({center:q},ve)},ne.prototype.panBy=function(q,ve,Se){return q=t.Point.convert(q).mult(-1),this.panTo(this.transform.center,t.extend({offset:q},ve),Se)},ne.prototype.panTo=function(q,ve,Se){return this.easeTo(t.extend({center:q},ve),Se)},ne.prototype.getZoom=function(){return this.transform.zoom},ne.prototype.setZoom=function(q,ve){return this.jumpTo({zoom:q},ve),this},ne.prototype.zoomTo=function(q,ve,Se){return this.easeTo(t.extend({zoom:q},ve),Se)},ne.prototype.zoomIn=function(q,ve){return this.zoomTo(this.getZoom()+1,q,ve),this},ne.prototype.zoomOut=function(q,ve){return this.zoomTo(this.getZoom()-1,q,ve),this},ne.prototype.getBearing=function(){return this.transform.bearing},ne.prototype.setBearing=function(q,ve){return this.jumpTo({bearing:q},ve),this},ne.prototype.getPadding=function(){return this.transform.padding},ne.prototype.setPadding=function(q,ve){return this.jumpTo({padding:q},ve),this},ne.prototype.rotateTo=function(q,ve,Se){return this.easeTo(t.extend({bearing:q},ve),Se)},ne.prototype.resetNorth=function(q,ve){return this.rotateTo(0,t.extend({duration:1e3},q),ve),this},ne.prototype.resetNorthPitch=function(q,ve){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},q),ve),this},ne.prototype.snapToNorth=function(q,ve){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(q,ve):this},ne.prototype.getPitch=function(){return this.transform.pitch},ne.prototype.setPitch=function(q,ve){return this.jumpTo({pitch:q},ve),this},ne.prototype.cameraForBounds=function(q,ve){return q=t.LngLatBounds.convert(q),this._cameraForBoxAndBearing(q.getNorthWest(),q.getSouthEast(),0,ve)},ne.prototype._cameraForBoxAndBearing=function(q,ve,Se,Oe){var Xe={top:0,bottom:0,right:0,left:0};if(typeof(Oe=t.extend({padding:Xe,offset:[0,0],maxZoom:this.transform.maxZoom},Oe)).padding=="number"){var ut=Oe.padding;Oe.padding={top:ut,bottom:ut,right:ut,left:ut}}Oe.padding=t.extend(Xe,Oe.padding);var yt=this.transform,jt=yt.padding,sr=yt.project(t.LngLat.convert(q)),pr=yt.project(t.LngLat.convert(ve)),br=sr.rotate(-Se*Math.PI/180),Lr=pr.rotate(-Se*Math.PI/180),Dr=new t.Point(Math.max(br.x,Lr.x),Math.max(br.y,Lr.y)),jr=new t.Point(Math.min(br.x,Lr.x),Math.min(br.y,Lr.y)),Sr=Dr.sub(jr),Ur=(yt.width-(jt.left+jt.right+Oe.padding.left+Oe.padding.right))/Sr.x,$r=(yt.height-(jt.top+jt.bottom+Oe.padding.top+Oe.padding.bottom))/Sr.y;if(!($r<0||Ur<0)){var cn=Math.min(yt.scaleZoom(yt.scale*Math.min(Ur,$r)),Oe.maxZoom),In=t.Point.convert(Oe.offset),An=new t.Point(In.x+(Oe.padding.left-Oe.padding.right)/2,In.y+(Oe.padding.top-Oe.padding.bottom)/2).mult(yt.scale/yt.zoomScale(cn));return{center:yt.unproject(sr.add(pr).div(2).sub(An)),zoom:cn,bearing:Se}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},ne.prototype.fitBounds=function(q,ve,Se){return this._fitInternal(this.cameraForBounds(q,ve),ve,Se)},ne.prototype.fitScreenCoordinates=function(q,ve,Se,Oe,Xe){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(q)),this.transform.pointLocation(t.Point.convert(ve)),Se,Oe),Oe,Xe)},ne.prototype._fitInternal=function(q,ve,Se){return q?(delete(ve=t.extend(q,ve)).padding,ve.linear?this.easeTo(ve,Se):this.flyTo(ve,Se)):this},ne.prototype.jumpTo=function(q,ve){this.stop();var Se=this.transform,Oe=!1,Xe=!1,ut=!1;return"zoom"in q&&Se.zoom!==+q.zoom&&(Oe=!0,Se.zoom=+q.zoom),q.center!==void 0&&(Se.center=t.LngLat.convert(q.center)),"bearing"in q&&Se.bearing!==+q.bearing&&(Xe=!0,Se.bearing=+q.bearing),"pitch"in q&&Se.pitch!==+q.pitch&&(ut=!0,Se.pitch=+q.pitch),q.padding==null||Se.isPaddingEqual(q.padding)||(Se.padding=q.padding),this.fire(new t.Event("movestart",ve)).fire(new t.Event("move",ve)),Oe&&this.fire(new t.Event("zoomstart",ve)).fire(new t.Event("zoom",ve)).fire(new t.Event("zoomend",ve)),Xe&&this.fire(new t.Event("rotatestart",ve)).fire(new t.Event("rotate",ve)).fire(new t.Event("rotateend",ve)),ut&&this.fire(new t.Event("pitchstart",ve)).fire(new t.Event("pitch",ve)).fire(new t.Event("pitchend",ve)),this.fire(new t.Event("moveend",ve))},ne.prototype.easeTo=function(q,ve){var Se=this;this._stop(!1,q.easeId),((q=t.extend({offset:[0,0],duration:500,easing:t.ease},q)).animate===!1||!q.essential&&t.browser.prefersReducedMotion)&&(q.duration=0);var Oe=this.transform,Xe=this.getZoom(),ut=this.getBearing(),yt=this.getPitch(),jt=this.getPadding(),sr="zoom"in q?+q.zoom:Xe,pr="bearing"in q?this._normalizeBearing(q.bearing,ut):ut,br="pitch"in q?+q.pitch:yt,Lr="padding"in q?q.padding:Oe.padding,Dr=t.Point.convert(q.offset),jr=Oe.centerPoint.add(Dr),Sr=Oe.pointLocation(jr),Ur=t.LngLat.convert(q.center||Sr);this._normalizeCenter(Ur);var $r,cn,In=Oe.project(Sr),An=Oe.project(Ur).sub(In),Dn=Oe.zoomScale(sr-Xe);q.around&&($r=t.LngLat.convert(q.around),cn=Oe.locationPoint($r));var Jn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||sr!==Xe,this._rotating=this._rotating||ut!==pr,this._pitching=this._pitching||br!==yt,this._padding=!Oe.isPaddingEqual(Lr),this._easeId=q.easeId,this._prepareEase(ve,q.noMoveStart,Jn),clearTimeout(this._easeEndTimeoutID),this._ease(function(ha){if(Se._zooming&&(Oe.zoom=t.number(Xe,sr,ha)),Se._rotating&&(Oe.bearing=t.number(ut,pr,ha)),Se._pitching&&(Oe.pitch=t.number(yt,br,ha)),Se._padding&&(Oe.interpolatePadding(jt,Lr,ha),jr=Oe.centerPoint.add(Dr)),$r)Oe.setLocationAtPoint($r,cn);else{var la=Oe.zoomScale(Oe.zoom-Xe),wa=sr>Xe?Math.min(2,Dn):Math.max(.5,Dn),Ea=Math.pow(wa,1-ha),ii=Oe.unproject(In.add(An.mult(ha*Ea)).mult(la));Oe.setLocationAtPoint(Oe.renderWorldCopies?ii.wrap():ii,jr)}Se._fireMoveEvents(ve)},function(ha){Se._afterEase(ve,ha)},q),this},ne.prototype._prepareEase=function(q,ve,Se){Se===void 0&&(Se={}),this._moving=!0,ve||Se.moving||this.fire(new t.Event("movestart",q)),this._zooming&&!Se.zooming&&this.fire(new t.Event("zoomstart",q)),this._rotating&&!Se.rotating&&this.fire(new t.Event("rotatestart",q)),this._pitching&&!Se.pitching&&this.fire(new t.Event("pitchstart",q))},ne.prototype._fireMoveEvents=function(q){this.fire(new t.Event("move",q)),this._zooming&&this.fire(new t.Event("zoom",q)),this._rotating&&this.fire(new t.Event("rotate",q)),this._pitching&&this.fire(new t.Event("pitch",q))},ne.prototype._afterEase=function(q,ve){if(!this._easeId||!ve||this._easeId!==ve){delete this._easeId;var Se=this._zooming,Oe=this._rotating,Xe=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Se&&this.fire(new t.Event("zoomend",q)),Oe&&this.fire(new t.Event("rotateend",q)),Xe&&this.fire(new t.Event("pitchend",q)),this.fire(new t.Event("moveend",q))}},ne.prototype.flyTo=function(q,ve){var Se=this;if(!q.essential&&t.browser.prefersReducedMotion){var Oe=t.pick(q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Oe,ve)}this.stop(),q=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},q);var Xe=this.transform,ut=this.getZoom(),yt=this.getBearing(),jt=this.getPitch(),sr=this.getPadding(),pr="zoom"in q?t.clamp(+q.zoom,Xe.minZoom,Xe.maxZoom):ut,br="bearing"in q?this._normalizeBearing(q.bearing,yt):yt,Lr="pitch"in q?+q.pitch:jt,Dr="padding"in q?q.padding:Xe.padding,jr=Xe.zoomScale(pr-ut),Sr=t.Point.convert(q.offset),Ur=Xe.centerPoint.add(Sr),$r=Xe.pointLocation(Ur),cn=t.LngLat.convert(q.center||$r);this._normalizeCenter(cn);var In=Xe.project($r),An=Xe.project(cn).sub(In),Dn=q.curve,Jn=Math.max(Xe.width,Xe.height),ha=Jn/jr,la=An.mag();if("minZoom"in q){var wa=t.clamp(Math.min(q.minZoom,ut,pr),Xe.minZoom,Xe.maxZoom),Ea=Jn/Xe.zoomScale(wa-ut);Dn=Math.sqrt(Ea/la*2)}var ii=Dn*Dn;function ti(ni){var Ha=(ha*ha-Jn*Jn+(ni?-1:1)*ii*ii*la*la)/(2*(ni?ha:Jn)*ii*la);return Math.log(Math.sqrt(Ha*Ha+1)-Ha)}function Oi(ni){return(Math.exp(ni)-Math.exp(-ni))/2}function Va(ni){return(Math.exp(ni)+Math.exp(-ni))/2}var gi=ti(0),Ri=function(ni){return Va(gi)/Va(gi+Dn*ni)},ci=function(ni){return Jn*((Va(gi)*(Oi(Ha=gi+Dn*ni)/Va(Ha))-Oi(gi))/ii)/la;var Ha},li=(ti(1)-gi)/Dn;if(Math.abs(la)<1e-6||!isFinite(li)){if(Math.abs(Jn-ha)<1e-6)return this.easeTo(q,ve);var Li=ha<Jn?-1:1;li=Math.abs(Math.log(ha/Jn))/Dn,ci=function(){return 0},Ri=function(ni){return Math.exp(Li*Dn*ni)}}return q.duration="duration"in q?+q.duration:1e3*li/("screenSpeed"in q?+q.screenSpeed/Dn:+q.speed),q.maxDuration&&q.duration>q.maxDuration&&(q.duration=0),this._zooming=!0,this._rotating=yt!==br,this._pitching=Lr!==jt,this._padding=!Xe.isPaddingEqual(Dr),this._prepareEase(ve,!1),this._ease(function(ni){var Ha=ni*li,as=1/Ri(Ha);Xe.zoom=ni===1?pr:ut+Xe.scaleZoom(as),Se._rotating&&(Xe.bearing=t.number(yt,br,ni)),Se._pitching&&(Xe.pitch=t.number(jt,Lr,ni)),Se._padding&&(Xe.interpolatePadding(sr,Dr,ni),Ur=Xe.centerPoint.add(Sr));var Fo=ni===1?cn:Xe.unproject(In.add(An.mult(ci(Ha))).mult(as));Xe.setLocationAtPoint(Xe.renderWorldCopies?Fo.wrap():Fo,Ur),Se._fireMoveEvents(ve)},function(){return Se._afterEase(ve)},q),this},ne.prototype.isEasing=function(){return!!this._easeFrameId},ne.prototype.stop=function(){return this._stop()},ne.prototype._stop=function(q,ve){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Se=this._onEaseEnd;delete this._onEaseEnd,Se.call(this,ve)}if(!q){var Oe=this.handlers;Oe&&Oe.stop()}return this},ne.prototype._ease=function(q,ve,Se){Se.animate===!1||Se.duration===0?(q(1),ve()):(this._easeStart=t.browser.now(),this._easeOptions=Se,this._onEaseFrame=q,this._onEaseEnd=ve,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},ne.prototype._renderFrameCallback=function(){var q=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(q)),q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},ne.prototype._normalizeBearing=function(q,ve){q=t.wrap(q,-180,180);var Se=Math.abs(q-ve);return Math.abs(q-360-ve)<Se&&(q-=360),Math.abs(q+360-ve)<Se&&(q+=360),q},ne.prototype._normalizeCenter=function(q){var ve=this.transform;if(ve.renderWorldCopies&&!ve.lngRange){var Se=q.lng-ve.center.lng;q.lng+=Se>180?-360:Se<-180?360:0}},ne}(t.Evented),Ua=function(J){J===void 0&&(J={}),this.options=J,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Ua.prototype.getDefaultPosition=function(){return"bottom-right"},Ua.prototype.onAdd=function(J){var ne=this.options&&this.options.compact;return this._map=J,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),ne&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),ne===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ua.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ua.prototype._updateEditLink=function(){var J=this._editLink;J||(J=this._editLink=this._container.querySelector(".mapbox-improve-map"));var ne=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(J){var q=ne.reduce(function(ve,Se,Oe){return Se.value&&(ve+=Se.key+"="+Se.value+(Oe<ne.length-1?"&":"")),ve},"?");J.href=t.config.FEEDBACK_URL+"/"+q+(this._map._hash?this._map._hash.getHashString(!0):""),J.rel="noopener nofollow"}},Ua.prototype._updateData=function(J){!J||J.sourceDataType!=="metadata"&&J.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Ua.prototype._updateAttributions=function(){if(this._map.style){var J=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?J=J.concat(this.options.customAttribution.map(function(ut){return typeof ut!="string"?"":ut})):typeof this.options.customAttribution=="string"&&J.push(this.options.customAttribution)),this._map.style.stylesheet){var ne=this._map.style.stylesheet;this.styleOwner=ne.owner,this.styleId=ne.id}var q=this._map.style.sourceCaches;for(var ve in q){var Se=q[ve];if(Se.used){var Oe=Se.getSource();Oe.attribution&&J.indexOf(Oe.attribution)<0&&J.push(Oe.attribution)}}J.sort(function(ut,yt){return ut.length-yt.length});var Xe=(J=J.filter(function(ut,yt){for(var jt=yt+1;jt<J.length;jt++)if(J[jt].indexOf(ut)>=0)return!1;return!0})).join(" | ");Xe!==this._attribHTML&&(this._attribHTML=Xe,J.length?(this._innerContainer.innerHTML=Xe,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ua.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var mi=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};mi.prototype.onAdd=function(J){this._map=J,this._container=n.create("div","mapboxgl-ctrl");var ne=n.create("a","mapboxgl-ctrl-logo");return ne.target="_blank",ne.rel="noopener nofollow",ne.href="https://www.mapbox.com/",ne.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ne.setAttribute("rel","noopener nofollow"),this._container.appendChild(ne),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},mi.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},mi.prototype.getDefaultPosition=function(){return"bottom-left"},mi.prototype._updateLogo=function(J){J&&J.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},mi.prototype._logoRequired=function(){if(this._map.style){var J=this._map.style.sourceCaches;for(var ne in J)if(J[ne].getSource().mapbox_logo)return!0;return!1}},mi.prototype._updateCompact=function(){var J=this._container.children;if(J.length){var ne=J[0];this._map.getCanvasContainer().offsetWidth<250?ne.classList.add("mapboxgl-compact"):ne.classList.remove("mapboxgl-compact")}};var pi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};pi.prototype.add=function(J){var ne=++this._id;return this._queue.push({callback:J,id:ne,cancelled:!1}),ne},pi.prototype.remove=function(J){for(var ne=this._currentlyRunning,q=0,ve=ne?this._queue.concat(ne):this._queue;q<ve.length;q+=1){var Se=ve[q];if(Se.id===J)return void(Se.cancelled=!0)}},pi.prototype.run=function(J){J===void 0&&(J=0);var ne=this._currentlyRunning=this._queue;this._queue=[];for(var q=0,ve=ne;q<ve.length;q+=1){var Se=ve[q];if(!Se.cancelled&&(Se.callback(J),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},pi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var wo={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Xo=t.window.HTMLImageElement,ji=t.window.HTMLElement,Ui=t.window.ImageBitmap,ps={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ds=function(J){function ne(ve){var Se=this;if((ve=t.extend({},ps,ve)).minZoom!=null&&ve.maxZoom!=null&&ve.minZoom>ve.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(ve.minPitch!=null&&ve.maxPitch!=null&&ve.minPitch>ve.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(ve.minPitch!=null&&ve.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(ve.maxPitch!=null&&ve.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var Oe=new Zr(ve.minZoom,ve.maxZoom,ve.minPitch,ve.maxPitch,ve.renderWorldCopies);if(J.call(this,Oe,ve),this._interactive=ve.interactive,this._maxTileCacheSize=ve.maxTileCacheSize,this._failIfMajorPerformanceCaveat=ve.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=ve.preserveDrawingBuffer,this._antialias=ve.antialias,this._trackResize=ve.trackResize,this._bearingSnap=ve.bearingSnap,this._refreshExpiredTiles=ve.refreshExpiredTiles,this._fadeDuration=ve.fadeDuration,this._crossSourceCollisions=ve.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=ve.collectResourceTiming,this._renderTaskQueue=new pi,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},wo,ve.locale),this._requestManager=new t.RequestManager(ve.transformRequest,ve.accessToken),typeof ve.container=="string"){if(this._container=t.window.document.getElementById(ve.container),!this._container)throw new Error("Container '"+ve.container+"' not found.")}else{if(!(ve.container instanceof ji))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=ve.container}if(ve.maxBounds&&this.setMaxBounds(ve.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return Se._update(!1)}),this.on("moveend",function(){return Se._update(!1)}),this.on("zoom",function(){return Se._update(!0)}),t.window!==void 0&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Za(this,ve),this._hash=ve.hash&&new Qn(typeof ve.hash=="string"&&ve.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:ve.center,zoom:ve.zoom,bearing:ve.bearing,pitch:ve.pitch}),ve.bounds&&(this.resize(),this.fitBounds(ve.bounds,t.extend({},ve.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=ve.localIdeographFontFamily,ve.style&&this.setStyle(ve.style,{localIdeographFontFamily:ve.localIdeographFontFamily}),ve.attributionControl&&this.addControl(new Ua({customAttribution:ve.customAttribution})),this.addControl(new mi,ve.logoPosition),this.on("style.load",function(){Se.transform.unmodified&&Se.jumpTo(Se.style.stylesheet)}),this.on("data",function(Xe){Se._update(Xe.dataType==="style"),Se.fire(new t.Event(Xe.dataType+"data",Xe))}),this.on("dataloading",function(Xe){Se.fire(new t.Event(Xe.dataType+"dataloading",Xe))})}J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne;var q={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return ne.prototype._getMapId=function(){return this._mapId},ne.prototype.addControl=function(ve,Se){if(Se===void 0&&ve.getDefaultPosition&&(Se=ve.getDefaultPosition()),Se===void 0&&(Se="top-right"),!ve||!ve.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Oe=ve.onAdd(this);this._controls.push(ve);var Xe=this._controlPositions[Se];return Se.indexOf("bottom")!==-1?Xe.insertBefore(Oe,Xe.firstChild):Xe.appendChild(Oe),this},ne.prototype.removeControl=function(ve){if(!ve||!ve.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Se=this._controls.indexOf(ve);return Se>-1&&this._controls.splice(Se,1),ve.onRemove(this),this},ne.prototype.resize=function(ve){var Se=this._containerDimensions(),Oe=Se[0],Xe=Se[1];this._resizeCanvas(Oe,Xe),this.transform.resize(Oe,Xe),this.painter.resize(Oe,Xe);var ut=!this._moving;return ut&&(this.stop(),this.fire(new t.Event("movestart",ve)).fire(new t.Event("move",ve))),this.fire(new t.Event("resize",ve)),ut&&this.fire(new t.Event("moveend",ve)),this},ne.prototype.getBounds=function(){return this.transform.getBounds()},ne.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},ne.prototype.setMaxBounds=function(ve){return this.transform.setMaxBounds(t.LngLatBounds.convert(ve)),this._update()},ne.prototype.setMinZoom=function(ve){if((ve=ve==null?-2:ve)>=-2&&ve<=this.transform.maxZoom)return this.transform.minZoom=ve,this._update(),this.getZoom()<ve&&this.setZoom(ve),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},ne.prototype.getMinZoom=function(){return this.transform.minZoom},ne.prototype.setMaxZoom=function(ve){if((ve=ve==null?22:ve)>=this.transform.minZoom)return this.transform.maxZoom=ve,this._update(),this.getZoom()>ve&&this.setZoom(ve),this;throw new Error("maxZoom must be greater than the current minZoom")},ne.prototype.getMaxZoom=function(){return this.transform.maxZoom},ne.prototype.setMinPitch=function(ve){if((ve=ve==null?0:ve)<0)throw new Error("minPitch must be greater than or equal to 0");if(ve>=0&&ve<=this.transform.maxPitch)return this.transform.minPitch=ve,this._update(),this.getPitch()<ve&&this.setPitch(ve),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},ne.prototype.getMinPitch=function(){return this.transform.minPitch},ne.prototype.setMaxPitch=function(ve){if((ve=ve==null?60:ve)>60)throw new Error("maxPitch must be less than or equal to 60");if(ve>=this.transform.minPitch)return this.transform.maxPitch=ve,this._update(),this.getPitch()>ve&&this.setPitch(ve),this;throw new Error("maxPitch must be greater than the current minPitch")},ne.prototype.getMaxPitch=function(){return this.transform.maxPitch},ne.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},ne.prototype.setRenderWorldCopies=function(ve){return this.transform.renderWorldCopies=ve,this._update()},ne.prototype.project=function(ve){return this.transform.locationPoint(t.LngLat.convert(ve))},ne.prototype.unproject=function(ve){return this.transform.pointLocation(t.Point.convert(ve))},ne.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},ne.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},ne.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},ne.prototype._createDelegatedListener=function(ve,Se,Oe){var Xe,ut=this;if(ve==="mouseenter"||ve==="mouseover"){var yt=!1;return{layer:Se,listener:Oe,delegates:{mousemove:function(sr){var pr=ut.getLayer(Se)?ut.queryRenderedFeatures(sr.point,{layers:[Se]}):[];pr.length?yt||(yt=!0,Oe.call(ut,new Na(ve,ut,sr.originalEvent,{features:pr}))):yt=!1},mouseout:function(){yt=!1}}}}if(ve==="mouseleave"||ve==="mouseout"){var jt=!1;return{layer:Se,listener:Oe,delegates:{mousemove:function(sr){(ut.getLayer(Se)?ut.queryRenderedFeatures(sr.point,{layers:[Se]}):[]).length?jt=!0:jt&&(jt=!1,Oe.call(ut,new Na(ve,ut,sr.originalEvent)))},mouseout:function(sr){jt&&(jt=!1,Oe.call(ut,new Na(ve,ut,sr.originalEvent)))}}}}return{layer:Se,listener:Oe,delegates:(Xe={},Xe[ve]=function(sr){var pr=ut.getLayer(Se)?ut.queryRenderedFeatures(sr.point,{layers:[Se]}):[];pr.length&&(sr.features=pr,Oe.call(ut,sr),delete sr.features)},Xe)}},ne.prototype.on=function(ve,Se,Oe){if(Oe===void 0)return J.prototype.on.call(this,ve,Se);var Xe=this._createDelegatedListener(ve,Se,Oe);for(var ut in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ve]=this._delegatedListeners[ve]||[],this._delegatedListeners[ve].push(Xe),Xe.delegates)this.on(ut,Xe.delegates[ut]);return this},ne.prototype.once=function(ve,Se,Oe){if(Oe===void 0)return J.prototype.once.call(this,ve,Se);var Xe=this._createDelegatedListener(ve,Se,Oe);for(var ut in Xe.delegates)this.once(ut,Xe.delegates[ut]);return this},ne.prototype.off=function(ve,Se,Oe){var Xe=this;return Oe===void 0?J.prototype.off.call(this,ve,Se):(this._delegatedListeners&&this._delegatedListeners[ve]&&function(ut){for(var yt=ut[ve],jt=0;jt<yt.length;jt++){var sr=yt[jt];if(sr.layer===Se&&sr.listener===Oe){for(var pr in sr.delegates)Xe.off(pr,sr.delegates[pr]);return yt.splice(jt,1),Xe}}}(this._delegatedListeners),this)},ne.prototype.queryRenderedFeatures=function(ve,Se){if(!this.style)return[];var Oe;if(Se!==void 0||ve===void 0||ve instanceof t.Point||Array.isArray(ve)||(Se=ve,ve=void 0),Se=Se||{},(ve=ve||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||typeof ve[0]=="number")Oe=[t.Point.convert(ve)];else{var Xe=t.Point.convert(ve[0]),ut=t.Point.convert(ve[1]);Oe=[Xe,new t.Point(ut.x,Xe.y),ut,new t.Point(Xe.x,ut.y),Xe]}return this.style.queryRenderedFeatures(Oe,Se,this.transform)},ne.prototype.querySourceFeatures=function(ve,Se){return this.style.querySourceFeatures(ve,Se)},ne.prototype.setStyle=function(ve,Se){return(Se=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Se)).diff!==!1&&Se.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ve?(this._diffStyle(ve,Se),this):(this._localIdeographFontFamily=Se.localIdeographFontFamily,this._updateStyle(ve,Se))},ne.prototype._getUIString=function(ve){var Se=this._locale[ve];if(Se==null)throw new Error("Missing UI string '"+ve+"'");return Se},ne.prototype._updateStyle=function(ve,Se){return this.style&&(this.style.setEventedParent(null),this.style._remove()),ve?(this.style=new qr(this,Se||{}),this.style.setEventedParent(this,{style:this.style}),typeof ve=="string"?this.style.loadURL(ve):this.style.loadJSON(ve),this):(delete this.style,this)},ne.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new qr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},ne.prototype._diffStyle=function(ve,Se){var Oe=this;if(typeof ve=="string"){var Xe=this._requestManager.normalizeStyleURL(ve),ut=this._requestManager.transformRequest(Xe,t.ResourceType.Style);t.getJSON(ut,function(yt,jt){yt?Oe.fire(new t.ErrorEvent(yt)):jt&&Oe._updateDiff(jt,Se)})}else typeof ve=="object"&&this._updateDiff(ve,Se)},ne.prototype._updateDiff=function(ve,Se){try{this.style.setState(ve)&&this._update(!0)}catch(Oe){t.warnOnce("Unable to perform style diff: "+(Oe.message||Oe.error||Oe)+".  Rebuilding the style from scratch."),this._updateStyle(ve,Se)}},ne.prototype.getStyle=function(){if(this.style)return this.style.serialize()},ne.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},ne.prototype.addSource=function(ve,Se){return this._lazyInitEmptyStyle(),this.style.addSource(ve,Se),this._update(!0)},ne.prototype.isSourceLoaded=function(ve){var Se=this.style&&this.style.sourceCaches[ve];if(Se!==void 0)return Se.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+ve+"'")))},ne.prototype.areTilesLoaded=function(){var ve=this.style&&this.style.sourceCaches;for(var Se in ve){var Oe=ve[Se]._tiles;for(var Xe in Oe){var ut=Oe[Xe];if(ut.state!=="loaded"&&ut.state!=="errored")return!1}}return!0},ne.prototype.addSourceType=function(ve,Se,Oe){return this._lazyInitEmptyStyle(),this.style.addSourceType(ve,Se,Oe)},ne.prototype.removeSource=function(ve){return this.style.removeSource(ve),this._update(!0)},ne.prototype.getSource=function(ve){return this.style.getSource(ve)},ne.prototype.addImage=function(ve,Se,Oe){Oe===void 0&&(Oe={});var Xe=Oe.pixelRatio;Xe===void 0&&(Xe=1);var ut=Oe.sdf;ut===void 0&&(ut=!1);var yt=Oe.stretchX,jt=Oe.stretchY,sr=Oe.content;if(this._lazyInitEmptyStyle(),Se instanceof Xo||Ui&&Se instanceof Ui){var pr=t.browser.getImageData(Se);this.style.addImage(ve,{data:new t.RGBAImage({width:pr.width,height:pr.height},pr.data),pixelRatio:Xe,stretchX:yt,stretchY:jt,content:sr,sdf:ut,version:0})}else{if(Se.width===void 0||Se.height===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var br=Se;this.style.addImage(ve,{data:new t.RGBAImage({width:Se.width,height:Se.height},new Uint8Array(Se.data)),pixelRatio:Xe,stretchX:yt,stretchY:jt,content:sr,sdf:ut,version:0,userImage:br}),br.onAdd&&br.onAdd(this,ve)}},ne.prototype.updateImage=function(ve,Se){var Oe=this.style.getImage(ve);if(!Oe)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Xe=Se instanceof Xo||Ui&&Se instanceof Ui?t.browser.getImageData(Se):Se,ut=Xe.width,yt=Xe.height,jt=Xe.data;return ut===void 0||yt===void 0?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ut!==Oe.data.width||yt!==Oe.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Oe.data.replace(jt,!(Se instanceof Xo||Ui&&Se instanceof Ui)),void this.style.updateImage(ve,Oe))},ne.prototype.hasImage=function(ve){return ve?!!this.style.getImage(ve):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},ne.prototype.removeImage=function(ve){this.style.removeImage(ve)},ne.prototype.loadImage=function(ve,Se){t.getImage(this._requestManager.transformRequest(ve,t.ResourceType.Image),Se)},ne.prototype.listImages=function(){return this.style.listImages()},ne.prototype.addLayer=function(ve,Se){return this._lazyInitEmptyStyle(),this.style.addLayer(ve,Se),this._update(!0)},ne.prototype.moveLayer=function(ve,Se){return this.style.moveLayer(ve,Se),this._update(!0)},ne.prototype.removeLayer=function(ve){return this.style.removeLayer(ve),this._update(!0)},ne.prototype.getLayer=function(ve){return this.style.getLayer(ve)},ne.prototype.setLayerZoomRange=function(ve,Se,Oe){return this.style.setLayerZoomRange(ve,Se,Oe),this._update(!0)},ne.prototype.setFilter=function(ve,Se,Oe){return Oe===void 0&&(Oe={}),this.style.setFilter(ve,Se,Oe),this._update(!0)},ne.prototype.getFilter=function(ve){return this.style.getFilter(ve)},ne.prototype.setPaintProperty=function(ve,Se,Oe,Xe){return Xe===void 0&&(Xe={}),this.style.setPaintProperty(ve,Se,Oe,Xe),this._update(!0)},ne.prototype.getPaintProperty=function(ve,Se){return this.style.getPaintProperty(ve,Se)},ne.prototype.setLayoutProperty=function(ve,Se,Oe,Xe){return Xe===void 0&&(Xe={}),this.style.setLayoutProperty(ve,Se,Oe,Xe),this._update(!0)},ne.prototype.getLayoutProperty=function(ve,Se){return this.style.getLayoutProperty(ve,Se)},ne.prototype.setLight=function(ve,Se){return Se===void 0&&(Se={}),this._lazyInitEmptyStyle(),this.style.setLight(ve,Se),this._update(!0)},ne.prototype.getLight=function(){return this.style.getLight()},ne.prototype.setFeatureState=function(ve,Se){return this.style.setFeatureState(ve,Se),this._update()},ne.prototype.removeFeatureState=function(ve,Se){return this.style.removeFeatureState(ve,Se),this._update()},ne.prototype.getFeatureState=function(ve){return this.style.getFeatureState(ve)},ne.prototype.getContainer=function(){return this._container},ne.prototype.getCanvasContainer=function(){return this._canvasContainer},ne.prototype.getCanvas=function(){return this._canvas},ne.prototype._containerDimensions=function(){var ve=0,Se=0;return this._container&&(ve=this._container.clientWidth||400,Se=this._container.clientHeight||300),[ve,Se]},ne.prototype._detectMissingCSS=function(){t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},ne.prototype._setupContainer=function(){var ve=this._container;ve.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",ve)).style.visibility="hidden",this._detectMissingCSS();var Se=this._canvasContainer=n.create("div","mapboxgl-canvas-container",ve);this._interactive&&Se.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",Se),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Oe=this._containerDimensions();this._resizeCanvas(Oe[0],Oe[1]);var Xe=this._controlContainer=n.create("div","mapboxgl-control-container",ve),ut=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(yt){ut[yt]=n.create("div","mapboxgl-ctrl-"+yt,Xe)})},ne.prototype._resizeCanvas=function(ve,Se){var Oe=t.browser.devicePixelRatio||1;this._canvas.width=Oe*ve,this._canvas.height=Oe*Se,this._canvas.style.width=ve+"px",this._canvas.style.height=Se+"px"},ne.prototype._setupPainter=function(){var ve=t.extend({},f.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Se=this._canvas.getContext("webgl",ve)||this._canvas.getContext("experimental-webgl",ve);Se?(this.painter=new ar(Se,this.transform),t.webpSupported.testSupport(Se)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},ne.prototype._contextLost=function(ve){ve.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:ve}))},ne.prototype._contextRestored=function(ve){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:ve}))},ne.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},ne.prototype._update=function(ve){return this.style?(this._styleDirty=this._styleDirty||ve,this._sourcesDirty=!0,this.triggerRepaint(),this):this},ne.prototype._requestRenderFrame=function(ve){return this._update(),this._renderTaskQueue.add(ve)},ne.prototype._cancelRenderFrame=function(ve){this._renderTaskQueue.remove(ve)},ne.prototype._render=function(ve){var Se,Oe=this,Xe=0,ut=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Se=ut.createQueryEXT(),ut.beginQueryEXT(ut.TIME_ELAPSED_EXT,Se),Xe=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ve),!this._removed){var yt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var jt=this.transform.zoom,sr=t.browser.now();this.style.zoomHistory.update(jt,sr);var pr=new t.EvaluationParameters(jt,{now:sr,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),br=pr.crossFadingFactor();br===1&&br===this._crossFadingFactor||(yt=!0,this._crossFadingFactor=br),this.style.update(pr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||yt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Lr=t.browser.now()-Xe;ut.endQueryEXT(ut.TIME_ELAPSED_EXT,Se),setTimeout(function(){var jr=ut.getQueryObjectEXT(Se,ut.QUERY_RESULT_EXT)/1e6;ut.deleteQueryEXT(Se),Oe.fire(new t.Event("gpu-timing-frame",{cpuTime:Lr,gpuTime:jr}))},50)}if(this.listens("gpu-timing-layer")){var Dr=this.painter.collectGpuTimers();setTimeout(function(){var jr=Oe.painter.queryGpuTimers(Dr);Oe.fire(new t.Event("gpu-timing-layer",{layerTimes:jr}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new t.Event("idle"))),this}},ne.prototype.remove=function(){this._hash&&this._hash.remove();for(var ve=0,Se=this._controls;ve<Se.length;ve+=1)Se[ve].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),t.window!==void 0&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var Oe=this.painter.context.gl.getExtension("WEBGL_lose_context");Oe&&Oe.loseContext(),or(this._canvasContainer),or(this._controlContainer),or(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},ne.prototype.triggerRepaint=function(){var ve=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(Se){ve._frame=null,ve._render(Se)}))},ne.prototype._onWindowOnline=function(){this._update()},ne.prototype._onWindowResize=function(ve){this._trackResize&&this.resize({originalEvent:ve})._update()},q.showTileBoundaries.get=function(){return!!this._showTileBoundaries},q.showTileBoundaries.set=function(ve){this._showTileBoundaries!==ve&&(this._showTileBoundaries=ve,this._update())},q.showPadding.get=function(){return!!this._showPadding},q.showPadding.set=function(ve){this._showPadding!==ve&&(this._showPadding=ve,this._update())},q.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},q.showCollisionBoxes.set=function(ve){this._showCollisionBoxes!==ve&&(this._showCollisionBoxes=ve,ve?this.style._generateCollisionBoxes():this._update())},q.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},q.showOverdrawInspector.set=function(ve){this._showOverdrawInspector!==ve&&(this._showOverdrawInspector=ve,this._update())},q.repaint.get=function(){return!!this._repaint},q.repaint.set=function(ve){this._repaint!==ve&&(this._repaint=ve,this.triggerRepaint())},q.vertices.get=function(){return!!this._vertices},q.vertices.set=function(ve){this._vertices=ve,this._update()},ne.prototype._setCacheLimits=function(ve,Se){t.setCacheLimits(ve,Se)},q.version.get=function(){return t.version},Object.defineProperties(ne.prototype,q),ne}(aa);function or(J){J.parentNode&&J.parentNode.removeChild(J)}var To={showCompass:!0,showZoom:!0,visualizePitch:!1},co=function(J){var ne=this;this.options=t.extend({},To,J),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(q){return q.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(q){return ne._map.zoomIn({},{originalEvent:q})}),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(q){return ne._map.zoomOut({},{originalEvent:q})}),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(q){ne.options.visualizePitch?ne._map.resetNorthPitch({},{originalEvent:q}):ne._map.resetNorth({},{originalEvent:q})}),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};co.prototype._updateZoomButtons=function(){var J=this._map.getZoom();this._zoomInButton.disabled=J===this._map.getMaxZoom(),this._zoomOutButton.disabled=J===this._map.getMinZoom()},co.prototype._rotateCompassArrow=function(){var J=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=J},co.prototype.onAdd=function(J){return this._map=J,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new zi(this._map,this._compass,this.options.visualizePitch)),this._container},co.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},co.prototype._createButton=function(J,ne){var q=n.create("button",J,this._container);return q.type="button",q.addEventListener("click",ne),q},co.prototype._setButtonTitle=function(J,ne){var q=this._map._getUIString("NavigationControl."+ne);J.title=q,J.setAttribute("aria-label",q)};var zi=function(J,ne,q){q===void 0&&(q=!1),this._clickTolerance=10,this.element=ne,this.mouseRotate=new Sa({clickTolerance:J.dragRotate._mouseRotate._clickTolerance}),this.map=J,q&&(this.mousePitch=new _o({clickTolerance:J.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(ne,"mousedown",this.mousedown),n.addEventListener(ne,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(ne,"touchmove",this.touchmove),n.addEventListener(ne,"touchend",this.touchend),n.addEventListener(ne,"touchcancel",this.reset)};function Si(J,ne,q){if(J=new t.LngLat(J.lng,J.lat),ne){var ve=new t.LngLat(J.lng-360,J.lat),Se=new t.LngLat(J.lng+360,J.lat),Oe=q.locationPoint(J).distSqr(ne);q.locationPoint(ve).distSqr(ne)<Oe?J=ve:q.locationPoint(Se).distSqr(ne)<Oe&&(J=Se)}for(;Math.abs(J.lng-q.center.lng)>180;){var Xe=q.locationPoint(J);if(Xe.x>=0&&Xe.y>=0&&Xe.x<=q.width&&Xe.y<=q.height)break;J.lng>q.center.lng?J.lng-=360:J.lng+=360}return J}zi.prototype.down=function(J,ne){this.mouseRotate.mousedown(J,ne),this.mousePitch&&this.mousePitch.mousedown(J,ne),n.disableDrag()},zi.prototype.move=function(J,ne){var q=this.map,ve=this.mouseRotate.mousemoveWindow(J,ne);if(ve&&ve.bearingDelta&&q.setBearing(q.getBearing()+ve.bearingDelta),this.mousePitch){var Se=this.mousePitch.mousemoveWindow(J,ne);Se&&Se.pitchDelta&&q.setPitch(q.getPitch()+Se.pitchDelta)}},zi.prototype.off=function(){var J=this.element;n.removeEventListener(J,"mousedown",this.mousedown),n.removeEventListener(J,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(J,"touchmove",this.touchmove),n.removeEventListener(J,"touchend",this.touchend),n.removeEventListener(J,"touchcancel",this.reset),this.offTemp()},zi.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(t.window,"mousemove",this.mousemove),n.removeEventListener(t.window,"mouseup",this.mouseup)},zi.prototype.mousedown=function(J){this.down(t.extend({},J,{ctrlKey:!0,preventDefault:function(){return J.preventDefault()}}),n.mousePos(this.element,J)),n.addEventListener(t.window,"mousemove",this.mousemove),n.addEventListener(t.window,"mouseup",this.mouseup)},zi.prototype.mousemove=function(J){this.move(J,n.mousePos(this.element,J))},zi.prototype.mouseup=function(J){this.mouseRotate.mouseupWindow(J),this.mousePitch&&this.mousePitch.mouseupWindow(J),this.offTemp()},zi.prototype.touchstart=function(J){J.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,J.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return J.preventDefault()}},this._startPos))},zi.prototype.touchmove=function(J){J.targetTouches.length!==1?this.reset():(this._lastPos=n.touchPos(this.element,J.targetTouches)[0],this.move({preventDefault:function(){return J.preventDefault()}},this._lastPos))},zi.prototype.touchend=function(J){J.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},zi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Es={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function yl(J,ne,q){var ve=J.classList;for(var Se in Es)ve.remove("mapboxgl-"+q+"-anchor-"+Se);ve.add("mapboxgl-"+q+"-anchor-"+ne)}var ys,rs=function(J){function ne(q,ve){var Se=this;if(J.call(this),(q instanceof t.window.HTMLElement||ve)&&(q=t.extend({element:q},ve)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=q&&q.anchor||"center",this._color=q&&q.color||"#3FB1CE",this._draggable=q&&q.draggable||!1,this._state="inactive",this._rotation=q&&q.rotation||0,this._rotationAlignment=q&&q.rotationAlignment||"auto",this._pitchAlignment=q&&q.pitchAlignment&&q.pitchAlignment!=="auto"?q.pitchAlignment:this._rotationAlignment,q&&q.element)this._element=q.element,this._offset=t.Point.convert(q&&q.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var Oe=n.createNS("http://www.w3.org/2000/svg","svg");Oe.setAttributeNS(null,"display","block"),Oe.setAttributeNS(null,"height","41px"),Oe.setAttributeNS(null,"width","27px"),Oe.setAttributeNS(null,"viewBox","0 0 27 41");var Xe=n.createNS("http://www.w3.org/2000/svg","g");Xe.setAttributeNS(null,"stroke","none"),Xe.setAttributeNS(null,"stroke-width","1"),Xe.setAttributeNS(null,"fill","none"),Xe.setAttributeNS(null,"fill-rule","evenodd");var ut=n.createNS("http://www.w3.org/2000/svg","g");ut.setAttributeNS(null,"fill-rule","nonzero");var yt=n.createNS("http://www.w3.org/2000/svg","g");yt.setAttributeNS(null,"transform","translate(3.0, 29.0)"),yt.setAttributeNS(null,"fill","#000000");for(var jt=0,sr=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];jt<sr.length;jt+=1){var pr=sr[jt],br=n.createNS("http://www.w3.org/2000/svg","ellipse");br.setAttributeNS(null,"opacity","0.04"),br.setAttributeNS(null,"cx","10.5"),br.setAttributeNS(null,"cy","5.80029008"),br.setAttributeNS(null,"rx",pr.rx),br.setAttributeNS(null,"ry",pr.ry),yt.appendChild(br)}var Lr=n.createNS("http://www.w3.org/2000/svg","g");Lr.setAttributeNS(null,"fill",this._color);var Dr=n.createNS("http://www.w3.org/2000/svg","path");Dr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Lr.appendChild(Dr);var jr=n.createNS("http://www.w3.org/2000/svg","g");jr.setAttributeNS(null,"opacity","0.25"),jr.setAttributeNS(null,"fill","#000000");var Sr=n.createNS("http://www.w3.org/2000/svg","path");Sr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),jr.appendChild(Sr);var Ur=n.createNS("http://www.w3.org/2000/svg","g");Ur.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ur.setAttributeNS(null,"fill","#FFFFFF");var $r=n.createNS("http://www.w3.org/2000/svg","g");$r.setAttributeNS(null,"transform","translate(8.0, 8.0)");var cn=n.createNS("http://www.w3.org/2000/svg","circle");cn.setAttributeNS(null,"fill","#000000"),cn.setAttributeNS(null,"opacity","0.25"),cn.setAttributeNS(null,"cx","5.5"),cn.setAttributeNS(null,"cy","5.5"),cn.setAttributeNS(null,"r","5.4999962");var In=n.createNS("http://www.w3.org/2000/svg","circle");In.setAttributeNS(null,"fill","#FFFFFF"),In.setAttributeNS(null,"cx","5.5"),In.setAttributeNS(null,"cy","5.5"),In.setAttributeNS(null,"r","5.4999962"),$r.appendChild(cn),$r.appendChild(In),ut.appendChild(yt),ut.appendChild(Lr),ut.appendChild(jr),ut.appendChild(Ur),ut.appendChild($r),Oe.appendChild(ut),this._element.appendChild(Oe),this._offset=t.Point.convert(q&&q.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(An){An.preventDefault()}),this._element.addEventListener("mousedown",function(An){An.preventDefault()}),this._element.addEventListener("focus",function(){var An=Se._map.getContainer();An.scrollTop=0,An.scrollLeft=0}),yl(this._element,this._anchor,"marker"),this._popup=null}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.addTo=function(q){return this.remove(),this._map=q,q.getCanvasContainer().appendChild(this._element),q.on("move",this._update),q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},ne.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},ne.prototype.getLngLat=function(){return this._lngLat},ne.prototype.setLngLat=function(q){return this._lngLat=t.LngLat.convert(q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},ne.prototype.getElement=function(){return this._element},ne.prototype.setPopup=function(q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),q){if(!("offset"in q.options)){var ve=Math.sqrt(Math.pow(13.5,2)/2);q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[ve,-1*(24.6+ve)],"bottom-right":[-ve,-1*(24.6+ve)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},ne.prototype._onKeyPress=function(q){var ve=q.code,Se=q.charCode||q.keyCode;ve!=="Space"&&ve!=="Enter"&&Se!==32&&Se!==13||this.togglePopup()},ne.prototype._onMapClick=function(q){var ve=q.originalEvent.target,Se=this._element;this._popup&&(ve===Se||Se.contains(ve))&&this.togglePopup()},ne.prototype.getPopup=function(){return this._popup},ne.prototype.togglePopup=function(){var q=this._popup;return q?(q.isOpen()?q.remove():q.addTo(this._map),this):this},ne.prototype._update=function(q){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Si(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ve="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?ve="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(ve="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Se="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Se="rotateX(0deg)":this._pitchAlignment==="map"&&(Se="rotateX("+this._map.getPitch()+"deg)"),q&&q.type!=="moveend"||(this._pos=this._pos.round()),n.setTransform(this._element,Es[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Se+" "+ve)}},ne.prototype.getOffset=function(){return this._offset},ne.prototype.setOffset=function(q){return this._offset=t.Point.convert(q),this._update(),this},ne.prototype._onMove=function(q){this._pos=q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},ne.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new t.Event("dragend")),this._state="inactive"},ne.prototype._addDragHandler=function(q){this._element.contains(q.originalEvent.target)&&(q.preventDefault(),this._positionDelta=q.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},ne.prototype.setDraggable=function(q){return this._draggable=!!q,this._map&&(q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},ne.prototype.isDraggable=function(){return this._draggable},ne.prototype.setRotation=function(q){return this._rotation=q||0,this._update(),this},ne.prototype.getRotation=function(){return this._rotation},ne.prototype.setRotationAlignment=function(q){return this._rotationAlignment=q||"auto",this._update(),this},ne.prototype.getRotationAlignment=function(){return this._rotationAlignment},ne.prototype.setPitchAlignment=function(q){return this._pitchAlignment=q&&q!=="auto"?q:this._rotationAlignment,this._update(),this},ne.prototype.getPitchAlignment=function(){return this._pitchAlignment},ne}(t.Evented),Ys={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Cs=0,ns=!1,Sl=function(J){function ne(q){J.call(this),this.options=t.extend({},Ys,q),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.onAdd=function(q){var ve;return this._map=q,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),ve=this._setupUI,ys!==void 0?ve(ys):t.window.navigator.permissions!==void 0?t.window.navigator.permissions.query({name:"geolocation"}).then(function(Se){ve(ys=Se.state!=="denied")}):ve(ys=!!t.window.navigator.geolocation),this._container},ne.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Cs=0,ns=!1},ne.prototype._isOutOfMapMaxBounds=function(q){var ve=this._map.getMaxBounds(),Se=q.coords;return ve&&(Se.longitude<ve.getWest()||Se.longitude>ve.getEast()||Se.latitude<ve.getSouth()||Se.latitude>ve.getNorth())},ne.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},ne.prototype._onSuccess=function(q){if(this._map){if(this._isOutOfMapMaxBounds(q))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",q)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(q),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",q)),this._finish()}},ne.prototype._updateCamera=function(q){var ve=new t.LngLat(q.coords.longitude,q.coords.latitude),Se=q.coords.accuracy,Oe=this._map.getBearing(),Xe=t.extend({bearing:Oe},this.options.fitBoundsOptions);this._map.fitBounds(ve.toBounds(Se),Xe,{geolocateSource:!0})},ne.prototype._updateMarker=function(q){if(q){var ve=new t.LngLat(q.coords.longitude,q.coords.latitude);this._accuracyCircleMarker.setLngLat(ve).addTo(this._map),this._userLocationDotMarker.setLngLat(ve).addTo(this._map),this._accuracy=q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},ne.prototype._updateCircleRadius=function(){var q=this._map._container.clientHeight/2,ve=this._map.unproject([0,q]),Se=this._map.unproject([1,q]),Oe=ve.distanceTo(Se),Xe=Math.ceil(2*this._accuracy/Oe);this._circleElement.style.width=Xe+"px",this._circleElement.style.height=Xe+"px"},ne.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},ne.prototype._onError=function(q){if(this._map){if(this.options.trackUserLocation)if(q.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ve=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ve,this._geolocateButton.setAttribute("aria-label",ve),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(q.code===3&&ns)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",q)),this._finish()}},ne.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},ne.prototype._setupUI=function(q){var ve=this;if(this._container.addEventListener("contextmenu",function(Xe){return Xe.preventDefault()}),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",q===!1){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Se=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Se,this._geolocateButton.setAttribute("aria-label",Se)}else{var Oe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Oe,this._geolocateButton.setAttribute("aria-label",Oe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new rs(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new rs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Xe){Xe.geolocateSource||ve._watchState!=="ACTIVE_LOCK"||Xe.originalEvent&&Xe.originalEvent.type==="resize"||(ve._watchState="BACKGROUND",ve._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ve._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ve.fire(new t.Event("trackuserlocationend")))})},ne.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Cs--,ns=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var q;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Cs>1?(q={maximumAge:6e5,timeout:0},ns=!0):(q=this.options.positionOptions,ns=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,q)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},ne.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},ne}(t.Evented),El={maxWidth:100,unit:"metric"},to=function(J){this.options=t.extend({},El,J),t.bindAll(["_onMove","setUnit"],this)};function xl(J,ne,q){var ve=q&&q.maxWidth||100,Se=J._container.clientHeight/2,Oe=J.unproject([0,Se]),Xe=J.unproject([ve,Se]),ut=Oe.distanceTo(Xe);if(q&&q.unit==="imperial"){var yt=3.2808*ut;yt>5280?Eu(ne,ve,yt/5280,J._getUIString("ScaleControl.Miles")):Eu(ne,ve,yt,J._getUIString("ScaleControl.Feet"))}else q&&q.unit==="nautical"?Eu(ne,ve,ut/1852,J._getUIString("ScaleControl.NauticalMiles")):ut>=1e3?Eu(ne,ve,ut/1e3,J._getUIString("ScaleControl.Kilometers")):Eu(ne,ve,ut,J._getUIString("ScaleControl.Meters"))}function Eu(J,ne,q,ve){var Se,Oe,Xe,ut=(Se=q,(Oe=Math.pow(10,(""+Math.floor(Se)).length-1))*(Xe=(Xe=Se/Oe)>=10?10:Xe>=5?5:Xe>=3?3:Xe>=2?2:Xe>=1?1:function(yt){var jt=Math.pow(10,Math.ceil(-Math.log(yt)/Math.LN10));return Math.round(yt*jt)/jt}(Xe)));J.style.width=ne*(ut/q)+"px",J.innerHTML=ut+"&nbsp;"+ve}to.prototype.getDefaultPosition=function(){return"bottom-left"},to.prototype._onMove=function(){xl(this._map,this._container,this.options)},to.prototype.onAdd=function(J){return this._map=J,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",J.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},to.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},to.prototype.setUnit=function(J){this.options.unit=J,xl(this._map,this._container,this.options)};var fo=function(J){this._fullscreen=!1,J&&J.container&&(J.container instanceof t.window.HTMLElement?this._container=J.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};fo.prototype.onAdd=function(J){return this._map=J,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},fo.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},fo.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},fo.prototype._setupUI=function(){var J=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",J).setAttribute("aria-hidden",!0),J.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},fo.prototype._updateTitle=function(){var J=this._getTitle();this._fullscreenButton.setAttribute("aria-label",J),this._fullscreenButton.title=J},fo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},fo.prototype._isFullscreen=function(){return this._fullscreen},fo.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},fo.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Xi={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Do=function(J){function ne(q){J.call(this),this.options=t.extend(Object.create(Xi),q),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return J&&(ne.__proto__=J),(ne.prototype=Object.create(J&&J.prototype)).constructor=ne,ne.prototype.addTo=function(q){return this._map&&this.remove(),this._map=q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},ne.prototype.isOpen=function(){return!!this._map},ne.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},ne.prototype.getLngLat=function(){return this._lngLat},ne.prototype.setLngLat=function(q){return this._lngLat=t.LngLat.convert(q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},ne.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},ne.prototype.getElement=function(){return this._container},ne.prototype.setText=function(q){return this.setDOMContent(t.window.document.createTextNode(q))},ne.prototype.setHTML=function(q){var ve,Se=t.window.document.createDocumentFragment(),Oe=t.window.document.createElement("body");for(Oe.innerHTML=q;ve=Oe.firstChild;)Se.appendChild(ve);return this.setDOMContent(Se)},ne.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},ne.prototype.setMaxWidth=function(q){return this.options.maxWidth=q,this._update(),this},ne.prototype.setDOMContent=function(q){return this._createContent(),this._content.appendChild(q),this._update(),this},ne.prototype.addClassName=function(q){this._container&&this._container.classList.add(q)},ne.prototype.removeClassName=function(q){this._container&&this._container.classList.remove(q)},ne.prototype.toggleClassName=function(q){if(this._container)return this._container.classList.toggle(q)},ne.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},ne.prototype._onMouseUp=function(q){this._update(q.point)},ne.prototype._onMouseMove=function(q){this._update(q.point)},ne.prototype._onDrag=function(q){this._update(q.point)},ne.prototype._update=function(q){var ve=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(pr){return ve._container.classList.add(pr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Si(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||q)){var Se=this._pos=this._trackPointer&&q?q:this._map.project(this._lngLat),Oe=this.options.anchor,Xe=function pr(br){if(br){if(typeof br=="number"){var Lr=Math.round(Math.sqrt(.5*Math.pow(br,2)));return{center:new t.Point(0,0),top:new t.Point(0,br),"top-left":new t.Point(Lr,Lr),"top-right":new t.Point(-Lr,Lr),bottom:new t.Point(0,-br),"bottom-left":new t.Point(Lr,-Lr),"bottom-right":new t.Point(-Lr,-Lr),left:new t.Point(br,0),right:new t.Point(-br,0)}}if(br instanceof t.Point||Array.isArray(br)){var Dr=t.Point.convert(br);return{center:Dr,top:Dr,"top-left":Dr,"top-right":Dr,bottom:Dr,"bottom-left":Dr,"bottom-right":Dr,left:Dr,right:Dr}}return{center:t.Point.convert(br.center||[0,0]),top:t.Point.convert(br.top||[0,0]),"top-left":t.Point.convert(br["top-left"]||[0,0]),"top-right":t.Point.convert(br["top-right"]||[0,0]),bottom:t.Point.convert(br.bottom||[0,0]),"bottom-left":t.Point.convert(br["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(br["bottom-right"]||[0,0]),left:t.Point.convert(br.left||[0,0]),right:t.Point.convert(br.right||[0,0])}}return pr(new t.Point(0,0))}(this.options.offset);if(!Oe){var ut,yt=this._container.offsetWidth,jt=this._container.offsetHeight;ut=Se.y+Xe.bottom.y<jt?["top"]:Se.y>this._map.transform.height-jt?["bottom"]:[],Se.x<yt/2?ut.push("left"):Se.x>this._map.transform.width-yt/2&&ut.push("right"),Oe=ut.length===0?"bottom":ut.join("-")}var sr=Se.add(Xe[Oe]).round();n.setTransform(this._container,Es[Oe]+" translate("+sr.x+"px,"+sr.y+"px)"),yl(this._container,Oe,"popup")}},ne.prototype._onClose=function(){this.remove()},ne}(t.Evented),Cl={version:t.version,supported:f,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:ds,NavigationControl:co,GeolocateControl:Sl,AttributionControl:Ua,ScaleControl:to,FullscreenControl:fo,Popup:Do,Marker:rs,Style:qr,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){nr().acquire(Je)},clearPrewarmedResources:function(){var J=It;J&&(J.isPreloaded()&&J.numActive()===1?(J.release(Je),It=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(J){t.config.ACCESS_TOKEN=J},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(J){t.config.API_URL=J},get workerCount(){return st.workerCount},set workerCount(J){st.workerCount=J},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(J){t.config.MAX_PARALLEL_IMAGE_REQUESTS=J},clearStorage:function(J){t.clearTileCache(J)},workerUrl:""};return Cl}),u})},{}],474:[function(e,v,S){v.exports=c;var r=e("convex-hull");function a(t,f,n){for(var o=new Array(t),l=0;l<t;++l)o[l]=0,l===f&&(o[l]+=.5),l===n&&(o[l]+=.5);return o}function u(t,f){if(f===0||f===(1<<t+1)-1)return[];for(var n=[],o=[],l=0;l<=t;++l)if(f&1<<l){n.push(a(t,l-1,l-1)),o.push(null);for(var h=0;h<=t;++h)~f&1<<h&&(n.push(a(t,l-1,h-1)),o.push([l,h]))}var i=r(n),s=[];e:for(var l=0;l<i.length;++l){for(var p=i[l],d=[],h=0;h<p.length;++h){if(!o[p[h]])continue e;d.push(o[p[h]].slice())}s.push(d)}return s}function c(t){for(var f=1<<t+1,n=new Array(f),o=0;o<f;++o)n[o]=u(t,o);return n}},{"convex-hull":135}],475:[function(e,v,S){var r=e("./normalize"),a=e("gl-mat4/create"),u=e("gl-mat4/clone"),c=e("gl-mat4/determinant"),t=e("gl-mat4/invert"),f=e("gl-mat4/transpose"),n={length:e("gl-vec3/length"),normalize:e("gl-vec3/normalize"),dot:e("gl-vec3/dot"),cross:e("gl-vec3/cross")},o=a(),l=a(),h=[0,0,0,0],i=[[0,0,0],[0,0,0],[0,0,0]],s=[0,0,0];v.exports=function(m,x,w,y,T,M){if(x||(x=[0,0,0]),w||(w=[0,0,0]),y||(y=[0,0,0]),T||(T=[0,0,0,1]),M||(M=[0,0,0,1]),!r(o,m)||(u(l,o),l[3]=0,l[7]=0,l[11]=0,l[15]=1,Math.abs(c(l)<1e-8)))return!1;var P=o[3],L=o[7],I=o[11],E=o[12],k=o[13],C=o[14],D=o[15];if(P!==0||L!==0||I!==0){h[0]=P,h[1]=L,h[2]=I,h[3]=D;var F=t(l,l);if(!F)return!1;f(l,l),p(T,h,l)}else T[0]=T[1]=T[2]=0,T[3]=1;if(x[0]=E,x[1]=k,x[2]=C,d(i,o),w[0]=n.length(i[0]),n.normalize(i[0],i[0]),y[0]=n.dot(i[0],i[1]),g(i[1],i[1],i[0],1,-y[0]),w[1]=n.length(i[1]),n.normalize(i[1],i[1]),y[0]/=w[1],y[1]=n.dot(i[0],i[2]),g(i[2],i[2],i[0],1,-y[1]),y[2]=n.dot(i[1],i[2]),g(i[2],i[2],i[1],1,-y[2]),w[2]=n.length(i[2]),n.normalize(i[2],i[2]),y[1]/=w[2],y[2]/=w[2],n.cross(s,i[1],i[2]),n.dot(i[0],s)<0)for(var N=0;N<3;N++)w[N]*=-1,i[N][0]*=-1,i[N][1]*=-1,i[N][2]*=-1;return M[0]=.5*Math.sqrt(Math.max(1+i[0][0]-i[1][1]-i[2][2],0)),M[1]=.5*Math.sqrt(Math.max(1-i[0][0]+i[1][1]-i[2][2],0)),M[2]=.5*Math.sqrt(Math.max(1-i[0][0]-i[1][1]+i[2][2],0)),M[3]=.5*Math.sqrt(Math.max(1+i[0][0]+i[1][1]+i[2][2],0)),i[2][1]>i[1][2]&&(M[0]=-M[0]),i[0][2]>i[2][0]&&(M[1]=-M[1]),i[1][0]>i[0][1]&&(M[2]=-M[2]),!0};function p(b,m,x){var w=m[0],y=m[1],T=m[2],M=m[3];return b[0]=x[0]*w+x[4]*y+x[8]*T+x[12]*M,b[1]=x[1]*w+x[5]*y+x[9]*T+x[13]*M,b[2]=x[2]*w+x[6]*y+x[10]*T+x[14]*M,b[3]=x[3]*w+x[7]*y+x[11]*T+x[15]*M,b}function d(b,m){b[0][0]=m[0],b[0][1]=m[1],b[0][2]=m[2],b[1][0]=m[4],b[1][1]=m[5],b[1][2]=m[6],b[2][0]=m[8],b[2][1]=m[9],b[2][2]=m[10]}function g(b,m,x,w,y){b[0]=m[0]*w+x[0]*y,b[1]=m[1]*w+x[1]*y,b[2]=m[2]*w+x[2]*y}},{"./normalize":476,"gl-mat4/clone":278,"gl-mat4/create":280,"gl-mat4/determinant":281,"gl-mat4/invert":293,"gl-mat4/transpose":306,"gl-vec3/cross":365,"gl-vec3/dot":370,"gl-vec3/length":380,"gl-vec3/normalize":387}],476:[function(e,v,S){v.exports=function(a,u){var c=u[15];if(c===0)return!1;for(var t=1/c,f=0;f<16;f++)a[f]=u[f]*t;return!0}},{}],477:[function(e,v,S){var r=e("gl-vec3/lerp"),a=e("mat4-recompose"),u=e("mat4-decompose"),c=e("gl-mat4/determinant"),t=e("quat-slerp"),f=h(),n=h(),o=h();v.exports=l;function l(p,d,g,b){if(c(d)===0||c(g)===0)return!1;var m=u(d,f.translate,f.scale,f.skew,f.perspective,f.quaternion),x=u(g,n.translate,n.scale,n.skew,n.perspective,n.quaternion);return!m||!x?!1:(r(o.translate,f.translate,n.translate,b),r(o.skew,f.skew,n.skew,b),r(o.scale,f.scale,n.scale,b),r(o.perspective,f.perspective,n.perspective,b),t(o.quaternion,f.quaternion,n.quaternion,b),a(p,o.translate,o.scale,o.skew,o.perspective,o.quaternion),!0)}function h(){return{translate:i(),scale:i(1),skew:i(),perspective:s(),quaternion:s()}}function i(p){return[p||0,p||0,p||0]}function s(){return[0,0,0,1]}},{"gl-mat4/determinant":281,"gl-vec3/lerp":381,"mat4-decompose":475,"mat4-recompose":478,"quat-slerp":527}],478:[function(e,v,S){var r={identity:e("gl-mat4/identity"),translate:e("gl-mat4/translate"),multiply:e("gl-mat4/multiply"),create:e("gl-mat4/create"),scale:e("gl-mat4/scale"),fromRotationTranslation:e("gl-mat4/fromRotationTranslation")};r.create();var a=r.create();v.exports=function(c,t,f,n,o,l){return r.identity(c),r.fromRotationTranslation(c,l,t),c[3]=o[0],c[7]=o[1],c[11]=o[2],c[15]=o[3],r.identity(a),n[2]!==0&&(a[9]=n[2],r.multiply(c,c,a)),n[1]!==0&&(a[9]=0,a[8]=n[1],r.multiply(c,c,a)),n[0]!==0&&(a[8]=0,a[4]=n[0],r.multiply(c,c,a)),r.scale(c,c,f),c}},{"gl-mat4/create":280,"gl-mat4/fromRotationTranslation":284,"gl-mat4/identity":291,"gl-mat4/multiply":295,"gl-mat4/scale":303,"gl-mat4/translate":305}],479:[function(e,v,S){v.exports=Math.log2||function(r){return Math.log(r)*Math.LOG2E}},{}],480:[function(e,v,S){var r=e("binary-search-bounds"),a=e("mat4-interpolate"),u=e("gl-mat4/invert"),c=e("gl-mat4/rotateX"),t=e("gl-mat4/rotateY"),f=e("gl-mat4/rotateZ"),n=e("gl-mat4/lookAt"),o=e("gl-mat4/translate");e("gl-mat4/scale");var l=e("gl-vec3/normalize"),h=[0,0,0];v.exports=d;function i(g){this._components=g.slice(),this._time=[0],this.prevMatrix=g.slice(),this.nextMatrix=g.slice(),this.computedMatrix=g.slice(),this.computedInverse=g.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var s=i.prototype;s.recalcMatrix=function(g){var b=this._time,m=r.le(b,g),x=this.computedMatrix;if(!(m<0)){var w=this._components;if(m===b.length-1)for(var y=16*m,T=0;T<16;++T)x[T]=w[y++];else{for(var M=b[m+1]-b[m],y=16*m,P=this.prevMatrix,L=!0,T=0;T<16;++T)P[T]=w[y++];for(var I=this.nextMatrix,T=0;T<16;++T)I[T]=w[y++],L=L&&P[T]===I[T];if(M<1e-6||L)for(var T=0;T<16;++T)x[T]=P[T];else a(x,P,I,(g-b[m])/M)}var E=this.computedUp;E[0]=x[1],E[1]=x[5],E[2]=x[9],l(E,E);var k=this.computedInverse;u(k,x);var C=this.computedEye,D=k[15];C[0]=k[12]/D,C[1]=k[13]/D,C[2]=k[14]/D;for(var F=this.computedCenter,N=Math.exp(this.computedRadius[0]),T=0;T<3;++T)F[T]=C[T]-x[2+4*T]*N}},s.idle=function(g){if(!(g<this.lastT())){for(var b=this._components,m=b.length-16,x=0;x<16;++x)b.push(b[m++]);this._time.push(g)}},s.flush=function(g){var b=r.gt(this._time,g)-2;b<0||(this._time.splice(0,b),this._components.splice(0,16*b))},s.lastT=function(){return this._time[this._time.length-1]},s.lookAt=function(g,b,m,x){this.recalcMatrix(g),b=b||this.computedEye,m=m||h,x=x||this.computedUp,this.setMatrix(g,n(this.computedMatrix,b,m,x));for(var w=0,y=0;y<3;++y)w+=Math.pow(m[y]-b[y],2);w=Math.log(Math.sqrt(w)),this.computedRadius[0]=w},s.rotate=function(g,b,m,x){this.recalcMatrix(g);var w=this.computedInverse;b&&t(w,w,b),m&&c(w,w,m),x&&f(w,w,x),this.setMatrix(g,u(this.computedMatrix,w))};var p=[0,0,0];s.pan=function(g,b,m,x){p[0]=-(b||0),p[1]=-(m||0),p[2]=-(x||0),this.recalcMatrix(g);var w=this.computedInverse;o(w,w,p),this.setMatrix(g,u(w,w))},s.translate=function(g,b,m,x){p[0]=b||0,p[1]=m||0,p[2]=x||0,this.recalcMatrix(g);var w=this.computedMatrix;o(w,w,p),this.setMatrix(g,w)},s.setMatrix=function(g,b){if(!(g<this.lastT())){this._time.push(g);for(var m=0;m<16;++m)this._components.push(b[m])}},s.setDistance=function(g,b){this.computedRadius[0]=b},s.setDistanceLimits=function(g,b){var m=this._limits;m[0]=g,m[1]=b},s.getDistanceLimits=function(g){var b=this._limits;return g?(g[0]=b[0],g[1]=b[1],g):b};function d(g){g=g||{};var b=g.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new i(b)}},{"binary-search-bounds":481,"gl-mat4/invert":293,"gl-mat4/lookAt":294,"gl-mat4/rotateX":300,"gl-mat4/rotateY":301,"gl-mat4/rotateZ":302,"gl-mat4/scale":303,"gl-mat4/translate":305,"gl-vec3/normalize":387,"mat4-interpolate":477}],481:[function(e,v,S){arguments[4][243][0].apply(S,arguments)},{dup:243}],482:[function(e,v,S){v.exports=a;var r=e("robust-orientation")[3];function a(u){var c=u.length;if(c<3){for(var s=new Array(c),t=0;t<c;++t)s[t]=t;return c===2&&u[0][0]===u[1][0]&&u[0][1]===u[1][1]?[0]:s}for(var f=new Array(c),t=0;t<c;++t)f[t]=t;f.sort(function(b,m){var x=u[b][0]-u[m][0];return x||u[b][1]-u[m][1]});for(var n=[f[0],f[1]],o=[f[0],f[1]],t=2;t<c;++t){for(var l=f[t],h=u[l],i=n.length;i>1&&r(u[n[i-2]],u[n[i-1]],h)<=0;)i-=1,n.pop();for(n.push(l),i=o.length;i>1&&r(u[o[i-2]],u[o[i-1]],h)>=0;)i-=1,o.pop();o.push(l)}for(var s=new Array(o.length+n.length-2),p=0,t=0,d=n.length;t<d;++t)s[p++]=n[t];for(var g=o.length-2;g>0;--g)s[p++]=o[g];return s}},{"robust-orientation":548}],483:[function(e,v,S){v.exports=a;var r=e("mouse-event");function a(u,c){c||(c=u,u=window);var t=0,f=0,n=0,o={shift:!1,alt:!1,control:!1,meta:!1},l=!1;function h(T){var M=!1;return"altKey"in T&&(M=M||T.altKey!==o.alt,o.alt=!!T.altKey),"shiftKey"in T&&(M=M||T.shiftKey!==o.shift,o.shift=!!T.shiftKey),"ctrlKey"in T&&(M=M||T.ctrlKey!==o.control,o.control=!!T.ctrlKey),"metaKey"in T&&(M=M||T.metaKey!==o.meta,o.meta=!!T.metaKey),M}function i(T,M){var P=r.x(M),L=r.y(M);"buttons"in M&&(T=M.buttons|0),(T!==t||P!==f||L!==n||h(M))&&(t=T|0,f=P||0,n=L||0,c&&c(t,f,n,o))}function s(T){i(0,T)}function p(){(t||f||n||o.shift||o.alt||o.meta||o.control)&&(f=n=0,t=0,o.shift=o.alt=o.control=o.meta=!1,c&&c(0,0,0,o))}function d(T){h(T)&&c&&c(t,f,n,o)}function g(T){r.buttons(T)===0?i(0,T):i(t,T)}function b(T){i(t|r.buttons(T),T)}function m(T){i(t&~r.buttons(T),T)}function x(){l||(l=!0,u.addEventListener("mousemove",g),u.addEventListener("mousedown",b),u.addEventListener("mouseup",m),u.addEventListener("mouseleave",s),u.addEventListener("mouseenter",s),u.addEventListener("mouseout",s),u.addEventListener("mouseover",s),u.addEventListener("blur",p),u.addEventListener("keyup",d),u.addEventListener("keydown",d),u.addEventListener("keypress",d),u!==window&&(window.addEventListener("blur",p),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}function w(){!l||(l=!1,u.removeEventListener("mousemove",g),u.removeEventListener("mousedown",b),u.removeEventListener("mouseup",m),u.removeEventListener("mouseleave",s),u.removeEventListener("mouseenter",s),u.removeEventListener("mouseout",s),u.removeEventListener("mouseover",s),u.removeEventListener("blur",p),u.removeEventListener("keyup",d),u.removeEventListener("keydown",d),u.removeEventListener("keypress",d),u!==window&&(window.removeEventListener("blur",p),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))}x();var y={element:u};return Object.defineProperties(y,{enabled:{get:function(){return l},set:function(T){T?x():w()},enumerable:!0},buttons:{get:function(){return t},enumerable:!0},x:{get:function(){return f},enumerable:!0},y:{get:function(){return n},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),y}},{"mouse-event":485}],484:[function(e,v,S){var r={left:0,top:0};v.exports=a;function a(c,t,f){t=t||c.currentTarget||c.srcElement,Array.isArray(f)||(f=[0,0]);var n=c.clientX||0,o=c.clientY||0,l=u(t);return f[0]=n-l.left,f[1]=o-l.top,f}function u(c){return c===window||c===document||c===document.body?r:c.getBoundingClientRect()}},{}],485:[function(e,v,S){function r(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){var f=t.which;if(f===2)return 4;if(f===3)return 2;if(f>0)return 1<<f-1}else if("button"in t){var f=t.button;if(f===1)return 4;if(f===2)return 2;if(f>=0)return 1<<f}}return 0}S.buttons=r;function a(t){return t.target||t.srcElement||window}S.element=a;function u(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;var f=a(t),n=f.getBoundingClientRect();return t.clientX-n.left}return 0}S.x=u;function c(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;var f=a(t),n=f.getBoundingClientRect();return t.clientY-n.top}return 0}S.y=c},{}],486:[function(e,v,S){var r=e("to-px");v.exports=a;function a(u,c,t){typeof u=="function"&&(t=!!c,c=u,u=window);var f=r("ex",u),n=function(o){t&&o.preventDefault();var l=o.deltaX||0,h=o.deltaY||0,i=o.deltaZ||0,s=o.deltaMode,p=1;switch(s){case 1:p=f;break;case 2:p=window.innerHeight;break}if(l*=p,h*=p,i*=p,l||h||i)return c(l,h,i,o)};return u.addEventListener("wheel",n),n}},{"to-px":578}],487:[function(e,v,S){var r=e("typedarray-pool");v.exports=I;function a(E){return"a"+E}function u(E){return"d"+E}function c(E,k){return"c"+E+"_"+k}function t(E){return"s"+E}function f(E,k){return"t"+E+"_"+k}function n(E){return"o"+E}function o(E){return"x"+E}function l(E){return"p"+E}function h(E,k){return"d"+E+"_"+k}function i(E){return"i"+E}function s(E,k){return"u"+E+"_"+k}function p(E){return"b"+E}function d(E){return"y"+E}function g(E){return"e"+E}function b(E){return"v"+E}var m="V",x="P",w="N",y="Q",T="X",M="T";function P(E,k,C){for(var D=0,F=0;F<E;++F)k&1<<F&&(D|=1<<C[F]);return D}function L(E,k,C,D,F,N){var G=N.length,U=F.length;if(U<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var X="extractContour"+F.join("_"),z=[],B=[],j=[],V=0;V<G;++V)j.push(a(V));for(var V=0;V<D;++V)j.push(o(V));for(var V=0;V<U;++V)B.push(t(V)+"="+a(0)+".shape["+V+"]|0");for(var V=0;V<G;++V){B.push(u(V)+"="+a(V)+".data",n(V)+"="+a(V)+".offset|0");for(var K=0;K<U;++K)B.push(f(V,K)+"="+a(V)+".stride["+K+"]|0")}for(var V=0;V<G;++V){B.push(l(V)+"="+n(V)),B.push(c(V,0));for(var K=1;K<1<<U;++K){for(var te=[],$=0;$<U;++$)K&1<<$&&te.push("-"+f(V,$));B.push(h(V,K)+"=("+te.join("")+")|0"),B.push(c(V,K)+"=0")}}for(var V=0;V<G;++V)for(var K=0;K<U;++K){var ie=[f(V,F[K])];K>0&&ie.push(f(V,F[K-1])+"*"+t(F[K-1])),B.push(s(V,F[K])+"=("+ie.join("-")+")|0")}for(var V=0;V<U;++V)B.push(i(V)+"=0");B.push(w+"=0");for(var se=["2"],V=U-2;V>=0;--V)se.push(t(F[V]));B.push(y+"=("+se.join("*")+")|0",x+"=mallocUint32("+y+")",m+"=mallocUint32("+y+")",T+"=0"),B.push(p(0)+"=0");for(var K=1;K<1<<U;++K){for(var Q=[],H=[],$=0;$<U;++$)K&1<<$&&(H.length===0?Q.push("1"):Q.unshift(H.join("*"))),H.push(t(F[$]));var oe="";Q[0].indexOf(t(F[U-2]))<0&&(oe="-");var re=P(U,K,F);B.push(g(re)+"=(-"+Q.join("-")+")|0",d(re)+"=("+oe+Q.join("-")+")|0",p(re)+"=0")}B.push(b(0)+"=0",M+"=0");function ee(be,Me){z.push("for(",i(F[be]),"=",Me,";",i(F[be]),"<",t(F[be]),";","++",i(F[be]),"){")}function ae(be){for(var Me=0;Me<G;++Me)z.push(l(Me),"+=",s(Me,F[be]),";");z.push("}")}function fe(be){for(var Me=be-1;Me>=0;--Me)ee(Me,0);for(var Pe=[],Me=0;Me<G;++Me)N[Me]?Pe.push(u(Me)+".get("+l(Me)+")"):Pe.push(u(Me)+"["+l(Me)+"]");for(var Me=0;Me<D;++Me)Pe.push(o(Me));z.push(x,"[",T,"++]=phase(",Pe.join(),");");for(var Me=0;Me<be;++Me)ae(Me);for(var Ge=0;Ge<G;++Ge)z.push(l(Ge),"+=",s(Ge,F[be]),";")}function de(be){for(var Me=0;Me<G;++Me)N[Me]?z.push(c(Me,0),"=",u(Me),".get(",l(Me),");"):z.push(c(Me,0),"=",u(Me),"[",l(Me),"];");for(var Pe=[],Me=0;Me<G;++Me)Pe.push(c(Me,0));for(var Me=0;Me<D;++Me)Pe.push(o(Me));z.push(p(0),"=",x,"[",T,"]=phase(",Pe.join(),");");for(var Ge=1;Ge<1<<U;++Ge)z.push(p(Ge),"=",x,"[",T,"+",g(Ge),"];");for(var ze=[],Ge=1;Ge<1<<U;++Ge)ze.push("("+p(0)+"!=="+p(Ge)+")");z.push("if(",ze.join("||"),"){");for(var Qe=[],Me=0;Me<U;++Me)Qe.push(i(Me));for(var Me=0;Me<G;++Me){Qe.push(c(Me,0));for(var Ge=1;Ge<1<<U;++Ge)N[Me]?z.push(c(Me,Ge),"=",u(Me),".get(",l(Me),"+",h(Me,Ge),");"):z.push(c(Me,Ge),"=",u(Me),"[",l(Me),"+",h(Me,Ge),"];"),Qe.push(c(Me,Ge))}for(var Me=0;Me<1<<U;++Me)Qe.push(p(Me));for(var Me=0;Me<D;++Me)Qe.push(o(Me));z.push("vertex(",Qe.join(),");",b(0),"=",m,"[",T,"]=",w,"++;");for(var tt=(1<<U)-1,Ce=p(tt),Ge=0;Ge<U;++Ge)if((be&~(1<<Ge))===0){for(var Ae=tt^1<<Ge,Be=p(Ae),qe=[],Tt=Ae;Tt>0;Tt=Tt-1&Ae)qe.push(m+"["+T+"+"+g(Tt)+"]");qe.push(b(0));for(var Tt=0;Tt<G;++Tt)Ge&1?qe.push(c(Tt,tt),c(Tt,Ae)):qe.push(c(Tt,Ae),c(Tt,tt));Ge&1?qe.push(Ce,Be):qe.push(Be,Ce);for(var Tt=0;Tt<D;++Tt)qe.push(o(Tt));z.push("if(",Ce,"!==",Be,"){","face(",qe.join(),")}")}z.push("}",T,"+=1;")}function pe(){for(var be=1;be<1<<U;++be)z.push(M,"=",g(be),";",g(be),"=",d(be),";",d(be),"=",M,";")}function W(be,Me){if(be<0){de(Me);return}fe(be),z.push("if(",t(F[be]),">0){",i(F[be]),"=1;"),W(be-1,Me|1<<F[be]);for(var Pe=0;Pe<G;++Pe)z.push(l(Pe),"+=",s(Pe,F[be]),";");be===U-1&&(z.push(T,"=0;"),pe()),ee(be,2),W(be-1,Me),be===U-1&&(z.push("if(",i(F[U-1]),"&1){",T,"=0;}"),pe()),ae(be),z.push("}")}W(U-1,0),z.push("freeUint32(",m,");freeUint32(",x,");");var ue=["'use strict';","function ",X,"(",j.join(),"){","var ",B.join(),";",z.join(""),"}","return ",X].join(""),me=new Function("vertex","face","phase","mallocUint32","freeUint32",ue);return me(E,k,C,r.mallocUint32,r.freeUint32)}function I(E){function k(X){throw new Error("ndarray-extract-contour: "+X)}typeof E!="object"&&k("Must specify arguments");var C=E.order;Array.isArray(C)||k("Must specify order");var D=E.arrayArguments||1;D<1&&k("Must have at least one array argument");var F=E.scalarArguments||0;F<0&&k("Scalar arg count must be > 0"),typeof E.vertex!="function"&&k("Must specify vertex creation function"),typeof E.cell!="function"&&k("Must specify cell creation function"),typeof E.phase!="function"&&k("Must specify phase function");for(var N=E.getters||[],G=new Array(D),U=0;U<D;++U)N.indexOf(U)>=0?G[U]=!0:G[U]=!1;return L(E.vertex,E.cell,E.phase,F,C,G)}},{"typedarray-pool":595}],488:[function(e,v,S){v.exports=h;var r=e("dup"),a=e("cwise-compiler"),u={},c={},t={body:"",args:[],thisVars:[],localVars:[]},f=a({args:["array","array","array"],pre:t,post:t,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),n=a({args:["array"],pre:t,post:t,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"});function o(i){if(i in u)return u[i];for(var s=[],p=0;p<i;++p)s.push("out",p,"s=0.5*(inp",p,"l-inp",p,"r);");for(var d=["array"],g=["junk"],p=0;p<i;++p){d.push("array"),g.push("out"+p+"s");var b=r(i);b[p]=-1,d.push({array:0,offset:b.slice()}),b[p]=1,d.push({array:0,offset:b.slice()}),g.push("inp"+p+"l","inp"+p+"r")}return u[i]=a({args:d,pre:t,post:t,body:{body:s.join(""),args:g.map(function(m){return{name:m,lvalue:m.indexOf("out")===0,rvalue:m.indexOf("inp")===0,count:m!=="junk"|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+i})}function l(i){var s=i.join(),L=c[s];if(L)return L;var p=i.length,d=["function gradient(dst,src){var s=src.shape.slice();"];function g(I){for(var E=p-I.length,k=[],C=[],D=[],F=0;F<p;++F)I.indexOf(F+1)>=0?D.push("0"):I.indexOf(-(F+1))>=0?D.push("s["+F+"]-1"):(D.push("-1"),k.push("1"),C.push("s["+F+"]-2"));var N=".lo("+k.join()+").hi("+C.join()+")";if(k.length===0&&(N=""),E>0){d.push("if(1");for(var F=0;F<p;++F)I.indexOf(F+1)>=0||I.indexOf(-(F+1))>=0||d.push("&&s[",F,"]>2");d.push("){grad",E,"(src.pick(",D.join(),")",N);for(var F=0;F<p;++F)I.indexOf(F+1)>=0||I.indexOf(-(F+1))>=0||d.push(",dst.pick(",D.join(),",",F,")",N);d.push(");")}for(var F=0;F<I.length;++F){var G=Math.abs(I[F])-1,U="dst.pick("+D.join()+","+G+")"+N;switch(i[G]){case"clamp":var X=D.slice(),z=D.slice();I[F]<0?X[G]="s["+G+"]-2":z[G]="1",E===0?d.push("if(s[",G,"]>1){dst.set(",D.join(),",",G,",0.5*(src.get(",X.join(),")-src.get(",z.join(),")))}else{dst.set(",D.join(),",",G,",0)};"):d.push("if(s[",G,"]>1){diff(",U,",src.pick(",X.join(),")",N,",src.pick(",z.join(),")",N,");}else{zero(",U,");};");break;case"mirror":E===0?d.push("dst.set(",D.join(),",",G,",0);"):d.push("zero(",U,");");break;case"wrap":var B=D.slice(),j=D.slice();I[F]<0?(B[G]="s["+G+"]-2",j[G]="0"):(B[G]="s["+G+"]-1",j[G]="1"),E===0?d.push("if(s[",G,"]>2){dst.set(",D.join(),",",G,",0.5*(src.get(",B.join(),")-src.get(",j.join(),")))}else{dst.set(",D.join(),",",G,",0)};"):d.push("if(s[",G,"]>2){diff(",U,",src.pick(",B.join(),")",N,",src.pick(",j.join(),")",N,");}else{zero(",U,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}E>0&&d.push("};")}for(var b=0;b<1<<p;++b){for(var m=[],x=0;x<p;++x)b&1<<x&&m.push(x+1);for(var w=0;w<1<<m.length;++w){for(var y=m.slice(),x=0;x<m.length;++x)w&1<<x&&(y[x]=-y[x]);g(y)}}d.push("return dst;};return gradient");for(var T=["diff","zero"],M=[f,n],b=1;b<=p;++b)T.push("grad"+b),M.push(o(b));T.push(d.join(""));var P=Function.apply(void 0,T),L=P.apply(void 0,M);return u[s]=L,L}function h(i,s,p){if(Array.isArray(p)){if(p.length!==s.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else typeof p=="string"?p=r(s.dimension,p):p=r(s.dimension,"clamp");if(i.dimension!==s.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(i.shape[s.dimension]!==s.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var d=0;d<s.dimension;++d)if(i.shape[d]!==s.shape[d])throw new Error("ndarray-gradient: shape mismatch");if(s.size===0)return i;if(s.dimension<=0)return i.set(0),i;var g=l(p);return g(i,s)}},{"cwise-compiler":151,dup:176}],489:[function(e,v,S){function r(f,n){var o=Math.floor(n),l=n-o,h=0<=o&&o<f.shape[0],i=0<=o+1&&o+1<f.shape[0],s=h?+f.get(o):0,p=i?+f.get(o+1):0;return(1-l)*s+l*p}function a(f,n,o){var l=Math.floor(n),h=n-l,i=0<=l&&l<f.shape[0],s=0<=l+1&&l+1<f.shape[0],p=Math.floor(o),d=o-p,g=0<=p&&p<f.shape[1],b=0<=p+1&&p+1<f.shape[1],m=i&&g?f.get(l,p):0,x=i&&b?f.get(l,p+1):0,w=s&&g?f.get(l+1,p):0,y=s&&b?f.get(l+1,p+1):0;return(1-d)*((1-h)*m+h*w)+d*((1-h)*x+h*y)}function u(f,n,o,l){var h=Math.floor(n),i=n-h,s=0<=h&&h<f.shape[0],p=0<=h+1&&h+1<f.shape[0],d=Math.floor(o),g=o-d,b=0<=d&&d<f.shape[1],m=0<=d+1&&d+1<f.shape[1],x=Math.floor(l),w=l-x,y=0<=x&&x<f.shape[2],T=0<=x+1&&x+1<f.shape[2],M=s&&b&&y?f.get(h,d,x):0,P=s&&m&&y?f.get(h,d+1,x):0,L=p&&b&&y?f.get(h+1,d,x):0,I=p&&m&&y?f.get(h+1,d+1,x):0,E=s&&b&&T?f.get(h,d,x+1):0,k=s&&m&&T?f.get(h,d+1,x+1):0,C=p&&b&&T?f.get(h+1,d,x+1):0,D=p&&m&&T?f.get(h+1,d+1,x+1):0;return(1-w)*((1-g)*((1-i)*M+i*L)+g*((1-i)*P+i*I))+w*((1-g)*((1-i)*E+i*C)+g*((1-i)*k+i*D))}function c(f){var n=f.shape.length|0,o=new Array(n),l=new Array(n),h=new Array(n),i=new Array(n),s,p;for(s=0;s<n;++s)p=+arguments[s+1],o[s]=Math.floor(p),l[s]=p-o[s],h[s]=0<=o[s]&&o[s]<f.shape[s],i[s]=0<=o[s]+1&&o[s]+1<f.shape[s];var d=0,g,b,m;e:for(s=0;s<1<<n;++s){for(b=1,m=f.offset,g=0;g<n;++g)if(s&1<<g){if(!i[g])continue e;b*=l[g],m+=f.stride[g]*(o[g]+1)}else{if(!h[g])continue e;b*=1-l[g],m+=f.stride[g]*o[g]}d+=b*f.data[m]}return d}function t(f,n,o,l){switch(f.shape.length){case 0:return 0;case 1:return r(f,n);case 2:return a(f,n,o);case 3:return u(f,n,o,l);default:return c.apply(void 0,arguments)}}v.exports=t,v.exports.d1=r,v.exports.d2=a,v.exports.d3=u},{}],490:[function(e,v,S){var r=e("cwise-compiler"),a={body:"",args:[],thisVars:[],localVars:[]};function u(s){if(!s)return a;for(var p=0;p<s.args.length;++p){var d=s.args[p];p===0?s.args[p]={name:d,lvalue:!0,rvalue:!!s.rvalue,count:s.count||1}:s.args[p]={name:d,lvalue:!1,rvalue:!0,count:1}}return s.thisVars||(s.thisVars=[]),s.localVars||(s.localVars=[]),s}function c(s){return r({args:s.args,pre:u(s.pre),body:u(s.body),post:u(s.proc),funcName:s.funcName})}function t(s){for(var p=[],d=0;d<s.args.length;++d)p.push("a"+d);var g=new Function("P",["return function ",s.funcName,"_ndarrayops(",p.join(","),") {P(",p.join(","),");return a0}"].join(""));return g(c(s))}var f={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var s in f){var p=f[s];S[s]=t({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+p+"c"},funcName:s}),S[s+"eq"]=t({args:["array","array"],body:{args:["a","b"],body:"a"+p+"=b"},rvalue:!0,funcName:s+"eq"}),S[s+"s"]=t({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+p+"s"},funcName:s+"s"}),S[s+"seq"]=t({args:["array","scalar"],body:{args:["a","s"],body:"a"+p+"=s"},rvalue:!0,funcName:s+"seq"})}})();var n={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var s in n){var p=n[s];S[s]=t({args:["array","array"],body:{args:["a","b"],body:"a="+p+"b"},funcName:s}),S[s+"eq"]=t({args:["array"],body:{args:["a"],body:"a="+p+"a"},rvalue:!0,count:2,funcName:s+"eq"})}})();var o={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var s in o){var p=o[s];S[s]=t({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+p+"c"},funcName:s}),S[s+"s"]=t({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+p+"s"},funcName:s+"s"}),S[s+"eq"]=t({args:["array","array"],body:{args:["a","b"],body:"a=a"+p+"b"},rvalue:!0,count:2,funcName:s+"eq"}),S[s+"seq"]=t({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+p+"s"},rvalue:!0,count:2,funcName:s+"seq"})}})();var l=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var s=0;s<l.length;++s){var p=l[s];S[p]=t({args:["array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:p}),S[p+"eq"]=t({args:["array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"eq"})}})();var h=["max","min","atan2","pow"];(function(){for(var s=0;s<h.length;++s){var p=h[s];S[p]=t({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:p}),S[p+"s"]=t({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:p+"s"}),S[p+"eq"]=t({args:["array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"eq"}),S[p+"seq"]=t({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"seq"})}})();var i=["atan2","pow"];(function(){for(var s=0;s<i.length;++s){var p=i[s];S[p+"op"]=t({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:p+"op"}),S[p+"ops"]=t({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:p+"ops"}),S[p+"opeq"]=t({args:["array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"opeq"}),S[p+"opseq"]=t({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"opseq"})}})(),S.any=r({args:["array"],pre:a,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),S.all=r({args:["array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),S.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),S.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),S.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),S.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),S.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),S.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),S.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),S.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),S.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),S.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),S.random=t({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),S.assign=t({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),S.assigns=t({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),S.equals=r({args:["array","array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":151}],491:[function(e,v,S){var r=e("ndarray"),a=e("./doConvert.js");v.exports=function(c,t){for(var f=[],n=c,o=1;Array.isArray(n);)f.push(n.length),o*=n.length,n=n[0];return f.length===0?r():(t||(t=r(new Float64Array(o),f)),a(t,c),t)}},{"./doConvert.js":492,ndarray:495}],492:[function(e,v,S){v.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":151}],493:[function(e,v,S){var r=e("typedarray-pool"),a=32;function u(o){switch(o){case"uint8":return[r.mallocUint8,r.freeUint8];case"uint16":return[r.mallocUint16,r.freeUint16];case"uint32":return[r.mallocUint32,r.freeUint32];case"int8":return[r.mallocInt8,r.freeInt8];case"int16":return[r.mallocInt16,r.freeInt16];case"int32":return[r.mallocInt32,r.freeInt32];case"float32":return[r.mallocFloat,r.freeFloat];case"float64":return[r.mallocDouble,r.freeDouble];default:return null}}function c(o){for(var l=[],h=0;h<o;++h)l.push("s"+h);for(var h=0;h<o;++h)l.push("n"+h);for(var h=1;h<o;++h)l.push("d"+h);for(var h=1;h<o;++h)l.push("e"+h);for(var h=1;h<o;++h)l.push("f"+h);return l}function t(o,l){var h=["'use strict'"],i=["ndarrayInsertionSort",o.join("d"),l].join(""),s=["left","right","data","offset"].concat(c(o.length)),p=u(l),d=["i,j,cptr,ptr=left*s0+offset"];if(o.length>1){for(var g=[],b=1;b<o.length;++b)d.push("i"+b),g.push("n"+b);p?d.push("scratch=malloc("+g.join("*")+")"):d.push("scratch=new Array("+g.join("*")+")"),d.push("dptr","sptr","a","b")}else d.push("scratch");function m(T){return l==="generic"?["data.get(",T,")"].join(""):["data[",T,"]"].join("")}function x(T,M){return l==="generic"?["data.set(",T,",",M,")"].join(""):["data[",T,"]=",M].join("")}if(h.push(["function ",i,"(",s.join(","),"){var ",d.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),o.length>1){h.push("dptr=0;sptr=ptr");for(var b=o.length-1;b>=0;--b){var w=o[b];w!==0&&h.push(["for(i",w,"=0;i",w,"<n",w,";++i",w,"){"].join(""))}h.push("scratch[dptr++]=",m("sptr"));for(var b=0;b<o.length;++b){var w=o[b];w!==0&&h.push("sptr+=d"+w,"}")}h.push("__g:while(j-->left){","dptr=0","sptr=cptr-s0");for(var b=1;b<o.length;++b)b===1&&h.push("__l:"),h.push(["for(i",b,"=0;i",b,"<n",b,";++i",b,"){"].join(""));h.push(["a=",m("sptr"),`
b=scratch[dptr]
if(a<b){break __g}
if(a>b){break __l}`].join(""));for(var b=o.length-1;b>=1;--b)h.push("sptr+=e"+b,"dptr+=f"+b,"}");h.push("dptr=cptr;sptr=cptr-s0");for(var b=o.length-1;b>=0;--b){var w=o[b];w!==0&&h.push(["for(i",w,"=0;i",w,"<n",w,";++i",w,"){"].join(""))}h.push(x("dptr",m("sptr")));for(var b=0;b<o.length;++b){var w=o[b];w!==0&&h.push(["dptr+=d",w,";sptr+=d",w].join(""),"}")}h.push(`cptr-=s0
}`),h.push("dptr=cptr;sptr=0");for(var b=o.length-1;b>=0;--b){var w=o[b];w!==0&&h.push(["for(i",w,"=0;i",w,"<n",w,";++i",w,"){"].join(""))}h.push(x("dptr","scratch[sptr++]"));for(var b=0;b<o.length;++b){var w=o[b];w!==0&&h.push("dptr+=d"+w,"}")}}else h.push("scratch="+m("ptr"),"while((j-->left)&&("+m("cptr-s0")+">scratch)){",x("cptr",m("cptr-s0")),"cptr-=s0","}",x("cptr","scratch"));if(h.push("}"),o.length>1&&p&&h.push("free(scratch)"),h.push("} return "+i),p){var y=new Function("malloc","free",h.join(`
`));return y(p[0],p[1])}else{var y=new Function(h.join(`
`));return y()}}function f(o,l,h){var i=["'use strict'"],s=["ndarrayQuickSort",o.join("d"),l].join(""),p=["left","right","data","offset"].concat(c(o.length)),d=u(l),g=0;i.push(["function ",s,"(",p.join(","),"){"].join(""));var b=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(o.length>1){for(var m=[],x=1;x<o.length;++x)m.push("n"+x),b.push("i"+x);for(var x=0;x<8;++x)b.push("b_ptr"+x);b.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+m.join("*")),d?b.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):b.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else b.push("pivot1","pivot2");i.push("var "+b.join(","));function w(z){return["(offset+",z,"*s0)"].join("")}function y(z){return l==="generic"?["data.get(",z,")"].join(""):["data[",z,"]"].join("")}function T(z,B){return l==="generic"?["data.set(",z,",",B,")"].join(""):["data[",z,"]=",B].join("")}function M(z,B,j){if(z.length===1)i.push("ptr0="+w(z[0]));else for(var V=0;V<z.length;++V)i.push(["b_ptr",V,"=s0*",z[V]].join(""));B&&i.push("pivot_ptr=0"),i.push("ptr_shift=offset");for(var V=o.length-1;V>=0;--V){var K=o[V];K!==0&&i.push(["for(i",K,"=0;i",K,"<n",K,";++i",K,"){"].join(""))}if(z.length>1)for(var V=0;V<z.length;++V)i.push(["ptr",V,"=b_ptr",V,"+ptr_shift"].join(""));i.push(j),B&&i.push("++pivot_ptr");for(var V=0;V<o.length;++V){var K=o[V];K!==0&&(z.length>1?i.push("ptr_shift+=d"+K):i.push("ptr0+=d"+K),i.push("}"))}}function P(z,B,j,V){if(B.length===1)i.push("ptr0="+w(B[0]));else{for(var K=0;K<B.length;++K)i.push(["b_ptr",K,"=s0*",B[K]].join(""));i.push("ptr_shift=offset")}j&&i.push("pivot_ptr=0"),z&&i.push(z+":");for(var K=1;K<o.length;++K)i.push(["for(i",K,"=0;i",K,"<n",K,";++i",K,"){"].join(""));if(B.length>1)for(var K=0;K<B.length;++K)i.push(["ptr",K,"=b_ptr",K,"+ptr_shift"].join(""));i.push(V);for(var K=o.length-1;K>=1;--K)j&&i.push("pivot_ptr+=f"+K),B.length>1?i.push("ptr_shift+=e"+K):i.push("ptr0+=e"+K),i.push("}")}function L(){o.length>1&&d&&i.push("free(pivot1)","free(pivot2)")}function I(z,B){var j="el"+z,V="el"+B;if(o.length>1){var K="__l"+ ++g;P(K,[j,V],!1,["comp=",y("ptr0"),"-",y("ptr1"),`
`,"if(comp>0){tmp0=",j,";",j,"=",V,";",V,"=tmp0;break ",K,`}
`,"if(comp<0){break ",K,"}"].join(""))}else i.push(["if(",y(w(j)),">",y(w(V)),"){tmp0=",j,";",j,"=",V,";",V,"=tmp0}"].join(""))}I(1,2),I(4,5),I(1,3),I(2,3),I(1,4),I(3,4),I(2,5),I(2,3),I(4,5),o.length>1?M(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",y("ptr1"),`
`,"pivot2[pivot_ptr]=",y("ptr3"),`
`,`pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])
`,"x=",y("ptr0"),`
`,"y=",y("ptr2"),`
`,"z=",y("ptr4"),`
`,T("ptr5","x"),`
`,T("ptr6","y"),`
`,T("ptr7","z")].join("")):i.push(["pivot1=",y(w("el2")),`
`,"pivot2=",y(w("el4")),`
`,`pivots_are_equal=pivot1===pivot2
`,"x=",y(w("el1")),`
`,"y=",y(w("el3")),`
`,"z=",y(w("el5")),`
`,T(w("index1"),"x"),`
`,T(w("index3"),"y"),`
`,T(w("index5"),"z")].join(""));function E(z,B){o.length>1?M([z,B],!1,T("ptr0",y("ptr1"))):i.push(T(w(z),y(w(B))))}E("index2","left"),E("index4","right");function k(z,B,j){if(o.length>1){var V="__l"+ ++g;P(V,[B],!0,[z,"=",y("ptr0"),"-pivot",j,`[pivot_ptr]
`,"if(",z,"!==0){break ",V,"}"].join(""))}else i.push([z,"=",y(w(B)),"-pivot",j].join(""))}function C(z,B){o.length>1?M([z,B],!1,["tmp=",y("ptr0"),`
`,T("ptr0",y("ptr1")),`
`,T("ptr1","tmp")].join("")):i.push(["ptr0=",w(z),`
`,"ptr1=",w(B),`
`,"tmp=",y("ptr0"),`
`,T("ptr0",y("ptr1")),`
`,T("ptr1","tmp")].join(""))}function D(z,B,j){o.length>1?(M([z,B,j],!1,["tmp=",y("ptr0"),`
`,T("ptr0",y("ptr1")),`
`,T("ptr1",y("ptr2")),`
`,T("ptr2","tmp")].join("")),i.push("++"+B,"--"+j)):i.push(["ptr0=",w(z),`
`,"ptr1=",w(B),`
`,"ptr2=",w(j),`
`,"++",B,`
`,"--",j,`
`,"tmp=",y("ptr0"),`
`,T("ptr0",y("ptr1")),`
`,T("ptr1",y("ptr2")),`
`,T("ptr2","tmp")].join(""))}function F(z,B){C(z,B),i.push("--"+B)}i.push("if(pivots_are_equal){"),i.push("for(k=less;k<=great;++k){"),k("comp","k",1),i.push("if(comp===0){continue}"),i.push("if(comp<0){"),i.push("if(k!==less){"),C("k","less"),i.push("}"),i.push("++less"),i.push("}else{"),i.push("while(true){"),k("comp","great",1),i.push("if(comp>0){"),i.push("great--"),i.push("}else if(comp<0){"),D("k","less","great"),i.push("break"),i.push("}else{"),F("k","great"),i.push("break"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}else{"),i.push("for(k=less;k<=great;++k){"),k("comp_pivot1","k",1),i.push("if(comp_pivot1<0){"),i.push("if(k!==less){"),C("k","less"),i.push("}"),i.push("++less"),i.push("}else{"),k("comp_pivot2","k",2),i.push("if(comp_pivot2>0){"),i.push("while(true){"),k("comp","great",2),i.push("if(comp>0){"),i.push("if(--great<k){break}"),i.push("continue"),i.push("}else{"),k("comp","great",1),i.push("if(comp<0){"),D("k","less","great"),i.push("}else{"),F("k","great"),i.push("}"),i.push("break"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}");function N(z,B,j){o.length>1?M([z,B],!0,[T("ptr0",y("ptr1")),`
`,T("ptr1",["pivot",j,"[pivot_ptr]"].join(""))].join("")):i.push(T(w(z),y(w(B))),T(w(B),"pivot"+j))}N("left","(less-1)",1),N("right","(great+1)",2);function G(z,B){i.push(["if((",B,"-",z,")<=",a,`){
`,"insertionSort(",z,",",B,",data,offset,",c(o.length).join(","),`)
`,`}else{
`,s,"(",z,",",B,",data,offset,",c(o.length).join(","),`)
`,"}"].join(""))}G("left","(less-2)"),G("(great+2)","right"),i.push("if(pivots_are_equal){"),L(),i.push("return"),i.push("}");function U(z,B,j){o.length>1?(i.push(["__l",++g,":while(true){"].join("")),M([z],!0,["if(",y("ptr0"),"!==pivot",B,"[pivot_ptr]){break __l",g,"}"].join("")),i.push(j,"}")):i.push(["while(",y(w(z)),"===pivot",B,"){",j,"}"].join(""))}if(i.push("if(less<index1&&great>index5){"),U("less",1,"++less"),U("great",2,"--great"),i.push("for(k=less;k<=great;++k){"),k("comp_pivot1","k",1),i.push("if(comp_pivot1===0){"),i.push("if(k!==less){"),C("k","less"),i.push("}"),i.push("++less"),i.push("}else{"),k("comp_pivot2","k",2),i.push("if(comp_pivot2===0){"),i.push("while(true){"),k("comp","great",2),i.push("if(comp===0){"),i.push("if(--great<k){break}"),i.push("continue"),i.push("}else{"),k("comp","great",1),i.push("if(comp<0){"),D("k","less","great"),i.push("}else{"),F("k","great"),i.push("}"),i.push("break"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),L(),G("less","great"),i.push("}return "+s),o.length>1&&d){var X=new Function("insertionSort","malloc","free",i.join(`
`));return X(h,d[0],d[1])}var X=new Function("insertionSort",i.join(`
`));return X(h)}function n(o,l){var h=["'use strict'"],i=["ndarraySortWrapper",o.join("d"),l].join(""),s=["array"];h.push(["function ",i,"(",s.join(","),"){"].join(""));for(var p=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],d=0;d<o.length;++d)p.push(["s",d,"=stride[",d,"]|0,n",d,"=shape[",d,"]|0"].join(""));for(var g=new Array(o.length),b=[],d=0;d<o.length;++d){var m=o[d];m!==0&&(b.length===0?g[m]="1":g[m]=b.join("*"),b.push("n"+m))}for(var x=-1,w=-1,d=0;d<o.length;++d){var y=o[d];y!==0&&(x>0?p.push(["d",y,"=s",y,"-d",x,"*n",x].join("")):p.push(["d",y,"=s",y].join("")),x=y);var m=o.length-1-d;m!==0&&(w>0?p.push(["e",m,"=s",m,"-e",w,"*n",w,",f",m,"=",g[m],"-f",w,"*n",w].join("")):p.push(["e",m,"=s",m,",f",m,"=",g[m]].join("")),w=m)}h.push("var "+p.join(","));var T=["0","n0-1","data","offset"].concat(c(o.length));h.push(["if(n0<=",a,"){","insertionSort(",T.join(","),")}else{","quickSort(",T.join(","),")}"].join("")),h.push("}return "+i);var M=new Function("insertionSort","quickSort",h.join(`
`)),P=t(o,l),L=f(o,l,P);return M(P,L)}v.exports=n},{"typedarray-pool":595}],494:[function(e,v,S){var r=e("./lib/compile_sort.js"),a={};function u(c){var t=c.order,f=c.dtype,n=[t,f],o=n.join(":"),l=a[o];return l||(a[o]=l=r(t,f)),l(c),c}v.exports=u},{"./lib/compile_sort.js":493}],495:[function(e,v,S){var r=e("iota-array"),a=e("is-buffer"),u=typeof Float64Array<"u";function c(h,i){return h[0]-i[0]}function t(){var h=this.stride,i=new Array(h.length),s;for(s=0;s<i.length;++s)i[s]=[Math.abs(h[s]),s];i.sort(c);var p=new Array(i.length);for(s=0;s<p.length;++s)p[s]=i[s][1];return p}function f(h,i){var s=["View",i,"d",h].join("");i<0&&(s="View_Nil"+h);var p=h==="generic";if(i===-1){var d="function "+s+"(a){this.data=a;};	var proto="+s+".prototype;	proto.dtype='"+h+"';	proto.index=function(){return -1};	proto.size=0;	proto.dimension=-1;	proto.shape=proto.stride=proto.order=[];	proto.lo=proto.hi=proto.transpose=proto.step=	function(){return new "+s+"(this.data);};	proto.get=proto.set=function(){};	proto.pick=function(){return null};	return function construct_"+s+"(a){return new "+s+"(a);}",I=new Function(d);return I()}else if(i===0){var d="function "+s+"(a,d) {	this.data = a;	this.offset = d	};	var proto="+s+".prototype;	proto.dtype='"+h+"';	proto.index=function(){return this.offset};	proto.dimension=0;	proto.size=1;	proto.shape=	proto.stride=	proto.order=[];	proto.lo=	proto.hi=	proto.transpose=	proto.step=function "+s+"_copy() {	return new "+s+"(this.data,this.offset)	};	proto.pick=function "+s+"_pick(){	return TrivialArray(this.data);	};	proto.valueOf=proto.get=function "+s+"_get(){	return "+(p?"this.data.get(this.offset)":"this.data[this.offset]")+"};	proto.set=function "+s+"_set(v){	return "+(p?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"	};	return function construct_"+s+"(a,b,c,d){return new "+s+"(a,d)}",I=new Function("TrivialArray",d);return I(o[h][0])}var d=["'use strict'"],g=r(i),b=g.map(function(E){return"i"+E}),m="this.offset+"+g.map(function(E){return"this.stride["+E+"]*i"+E}).join("+"),x=g.map(function(E){return"b"+E}).join(","),w=g.map(function(E){return"c"+E}).join(",");d.push("function "+s+"(a,"+x+","+w+",d){this.data=a","this.shape=["+x+"]","this.stride=["+w+"]","this.offset=d|0}","var proto="+s+".prototype","proto.dtype='"+h+"'","proto.dimension="+i),d.push("Object.defineProperty(proto,'size',{get:function "+s+"_size(){	return "+g.map(function(E){return"this.shape["+E+"]"}).join("*"),"}})"),i===1?d.push("proto.order=[0]"):(d.push("Object.defineProperty(proto,'order',{get:"),i<4?(d.push("function "+s+"_order(){"),i===2?d.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):i===3&&d.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);	if(s0>s1){	if(s1>s2){	return [2,1,0];	}else if(s0>s2){	return [1,2,0];	}else{	return [1,0,2];	}	}else if(s0>s2){	return [2,0,1];	}else if(s2>s1){	return [0,1,2];	}else{	return [0,2,1];	}}})")):d.push("ORDER})")),d.push("proto.set=function "+s+"_set("+b.join(",")+",v){"),p?d.push("return this.data.set("+m+",v)}"):d.push("return this.data["+m+"]=v}"),d.push("proto.get=function "+s+"_get("+b.join(",")+"){"),p?d.push("return this.data.get("+m+")}"):d.push("return this.data["+m+"]}"),d.push("proto.index=function "+s+"_index(",b.join(),"){return "+m+"}"),d.push("proto.hi=function "+s+"_hi("+b.join(",")+"){return new "+s+"(this.data,"+g.map(function(E){return["(typeof i",E,"!=='number'||i",E,"<0)?this.shape[",E,"]:i",E,"|0"].join("")}).join(",")+","+g.map(function(E){return"this.stride["+E+"]"}).join(",")+",this.offset)}");var y=g.map(function(E){return"a"+E+"=this.shape["+E+"]"}),T=g.map(function(E){return"c"+E+"=this.stride["+E+"]"});d.push("proto.lo=function "+s+"_lo("+b.join(",")+"){var b=this.offset,d=0,"+y.join(",")+","+T.join(","));for(var M=0;M<i;++M)d.push("if(typeof i"+M+"==='number'&&i"+M+">=0){	d=i"+M+"|0;	b+=c"+M+"*d;	a"+M+"-=d}");d.push("return new "+s+"(this.data,"+g.map(function(E){return"a"+E}).join(",")+","+g.map(function(E){return"c"+E}).join(",")+",b)}"),d.push("proto.step=function "+s+"_step("+b.join(",")+"){var "+g.map(function(E){return"a"+E+"=this.shape["+E+"]"}).join(",")+","+g.map(function(E){return"b"+E+"=this.stride["+E+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var M=0;M<i;++M)d.push("if(typeof i"+M+"==='number'){	d=i"+M+"|0;	if(d<0){	c+=b"+M+"*(a"+M+"-1);	a"+M+"=ceil(-a"+M+"/d)	}else{	a"+M+"=ceil(a"+M+"/d)	}	b"+M+"*=d	}");d.push("return new "+s+"(this.data,"+g.map(function(E){return"a"+E}).join(",")+","+g.map(function(E){return"b"+E}).join(",")+",c)}");for(var P=new Array(i),L=new Array(i),M=0;M<i;++M)P[M]="a[i"+M+"]",L[M]="b[i"+M+"]";d.push("proto.transpose=function "+s+"_transpose("+b+"){"+b.map(function(E,k){return E+"=("+E+"===undefined?"+k+":"+E+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+s+"(this.data,"+P.join(",")+","+L.join(",")+",this.offset)}"),d.push("proto.pick=function "+s+"_pick("+b+"){var a=[],b=[],c=this.offset");for(var M=0;M<i;++M)d.push("if(typeof i"+M+"==='number'&&i"+M+">=0){c=(c+this.stride["+M+"]*i"+M+")|0}else{a.push(this.shape["+M+"]);b.push(this.stride["+M+"])}");d.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),d.push("return function construct_"+s+"(data,shape,stride,offset){return new "+s+"(data,"+g.map(function(E){return"shape["+E+"]"}).join(",")+","+g.map(function(E){return"stride["+E+"]"}).join(",")+",offset)}");var I=new Function("CTOR_LIST","ORDER",d.join(`
`));return I(o[h],t)}function n(h){if(a(h))return"buffer";if(u)switch(Object.prototype.toString.call(h)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(h)?"array":"generic"}var o={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function l(h,i,s,p){if(h===void 0){var w=o.array[0];return w([])}else typeof h=="number"&&(h=[h]);i===void 0&&(i=[h.length]);var d=i.length;if(s===void 0){s=new Array(d);for(var g=d-1,b=1;g>=0;--g)s[g]=b,b*=i[g]}if(p===void 0){p=0;for(var g=0;g<d;++g)s[g]<0&&(p-=(i[g]-1)*s[g])}for(var m=n(h),x=o[m];x.length<=d+1;)x.push(f(m,x.length-1));var w=x[d+1];return w(h,i,s,p)}v.exports=l},{"iota-array":463,"is-buffer":465}],496:[function(e,v,S){var r=e("double-bits"),a=Math.pow(2,-1074),u=-1>>>0;v.exports=c;function c(t,f){if(isNaN(t)||isNaN(f))return NaN;if(t===f)return t;if(t===0)return f<0?-a:a;var n=r.hi(t),o=r.lo(t);return f>t==t>0?o===u?(n+=1,o=0):o+=1:o===0?(o=u,n-=1):o-=1,r.pack(o,n)}},{"double-bits":173}],497:[function(e,v,S){var r=Math.PI,a=o(120);v.exports=u;function u(l){for(var h,i=[],s=0,p=0,d=0,g=0,b=null,m=null,x=0,w=0,y=0,T=l.length;y<T;y++){var M=l[y],P=M[0];switch(P){case"M":d=M[1],g=M[2];break;case"A":M=f(x,w,M[1],M[2],o(M[3]),M[4],M[5],M[6],M[7]),M.unshift("C"),M.length>7&&(i.push(M.splice(0,7)),M.unshift("C"));break;case"S":var L=x,I=w;(h=="C"||h=="S")&&(L+=L-s,I+=I-p),M=["C",L,I,M[1],M[2],M[3],M[4]];break;case"T":h=="Q"||h=="T"?(b=x*2-b,m=w*2-m):(b=x,m=w),M=t(x,w,b,m,M[1],M[2]);break;case"Q":b=M[1],m=M[2],M=t(x,w,M[1],M[2],M[3],M[4]);break;case"L":M=c(x,w,M[1],M[2]);break;case"H":M=c(x,w,M[1],w);break;case"V":M=c(x,w,x,M[1]);break;case"Z":M=c(x,w,d,g);break}h=P,x=M[M.length-2],w=M[M.length-1],M.length>4?(s=M[M.length-4],p=M[M.length-3]):(s=x,p=w),i.push(M)}return i}function c(l,h,i,s){return["C",l,h,i,s,i,s]}function t(l,h,i,s,p,d){return["C",l/3+2/3*i,h/3+2/3*s,p/3+2/3*i,d/3+2/3*s,p,d]}function f(l,h,i,s,p,d,g,b,m,x){if(x)C=x[0],D=x[1],E=x[2],k=x[3];else{var w=n(l,h,-p);l=w.x,h=w.y,w=n(b,m,-p),b=w.x,m=w.y;var y=(l-b)/2,T=(h-m)/2,M=y*y/(i*i)+T*T/(s*s);M>1&&(M=Math.sqrt(M),i=M*i,s=M*s);var P=i*i,L=s*s,I=(d==g?-1:1)*Math.sqrt(Math.abs((P*L-P*T*T-L*y*y)/(P*T*T+L*y*y)));I==1/0&&(I=1);var E=I*i*T/s+(l+b)/2,k=I*-s*y/i+(h+m)/2,C=Math.asin(((h-k)/s).toFixed(9)),D=Math.asin(((m-k)/s).toFixed(9));C=l<E?r-C:C,D=b<E?r-D:D,C<0&&(C=r*2+C),D<0&&(D=r*2+D),g&&C>D&&(C=C-r*2),!g&&D>C&&(D=D-r*2)}if(Math.abs(D-C)>a){var F=D,N=b,G=m;D=C+a*(g&&D>C?1:-1),b=E+i*Math.cos(D),m=k+s*Math.sin(D);var U=f(b,m,i,s,p,0,g,N,G,[D,F,E,k])}var X=Math.tan((D-C)/4),z=4/3*i*X,B=4/3*s*X,j=[2*l-(l+z*Math.sin(C)),2*h-(h-B*Math.cos(C)),b+z*Math.sin(D),m-B*Math.cos(D),b,m];if(x)return j;U&&(j=j.concat(U));for(var V=0;V<j.length;){var K=n(j[V],j[V+1],p);j[V++]=K.x,j[V++]=K.y}return j}function n(l,h,i){return{x:l*Math.cos(i)-h*Math.sin(i),y:l*Math.sin(i)+h*Math.cos(i)}}function o(l){return l*(r/180)}},{}],498:[function(e,v,S){var r=1e-6,a=1e-6;S.vertexNormals=function(u,c,t){for(var f=c.length,n=new Array(f),o=t===void 0?r:t,l=0;l<f;++l)n[l]=[0,0,0];for(var l=0;l<u.length;++l)for(var h=u[l],i=0,s=h[h.length-1],p=h[0],d=0;d<h.length;++d){i=s,s=p,p=h[(d+1)%h.length];for(var g=c[i],b=c[s],m=c[p],x=new Array(3),w=0,y=new Array(3),T=0,M=0;M<3;++M)x[M]=g[M]-b[M],w+=x[M]*x[M],y[M]=m[M]-b[M],T+=y[M]*y[M];if(w*T>o)for(var P=n[s],L=1/Math.sqrt(w*T),M=0;M<3;++M){var I=(M+1)%3,E=(M+2)%3;P[M]+=L*(y[I]*x[E]-y[E]*x[I])}}for(var l=0;l<f;++l){for(var P=n[l],k=0,M=0;M<3;++M)k+=P[M]*P[M];if(k>o)for(var L=1/Math.sqrt(k),M=0;M<3;++M)P[M]*=L;else for(var M=0;M<3;++M)P[M]=0}return n},S.faceNormals=function(u,c,t){for(var f=u.length,n=new Array(f),o=t===void 0?a:t,l=0;l<f;++l){for(var h=u[l],i=new Array(3),s=0;s<3;++s)i[s]=c[h[s]];for(var p=new Array(3),d=new Array(3),s=0;s<3;++s)p[s]=i[1][s]-i[0][s],d[s]=i[2][s]-i[0][s];for(var g=new Array(3),b=0,s=0;s<3;++s){var m=(s+1)%3,x=(s+2)%3;g[s]=p[m]*d[x]-p[x]*d[m],b+=g[s]*g[s]}b>o?b=1/Math.sqrt(b):b=0;for(var s=0;s<3;++s)g[s]*=b;n[l]=g}return n}},{}],499:[function(e,v,S){var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;function c(f){if(f==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(f)}function t(){try{if(!Object.assign)return!1;var f=new String("abc");if(f[5]="de",Object.getOwnPropertyNames(f)[0]==="5")return!1;for(var n={},o=0;o<10;o++)n["_"+String.fromCharCode(o)]=o;var l=Object.getOwnPropertyNames(n).map(function(i){return n[i]});if(l.join("")!=="0123456789")return!1;var h={};return"abcdefghijklmnopqrst".split("").forEach(function(i){h[i]=i}),Object.keys(Object.assign({},h)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}v.exports=t()?Object.assign:function(f,n){for(var o,l=c(f),h,i=1;i<arguments.length;i++){o=Object(arguments[i]);for(var s in o)a.call(o,s)&&(l[s]=o[s]);if(r){h=r(o);for(var p=0;p<h.length;p++)u.call(o,h[p])&&(l[h[p]]=o[h[p]])}}return l}},{}],500:[function(e,v,S){v.exports=r;function r(a,u,c,t,f,n,o,l,h,i){var s=u+n+i;if(p>0){var p=Math.sqrt(s+1);a[0]=.5*(o-h)/p,a[1]=.5*(l-t)/p,a[2]=.5*(c-n)/p,a[3]=.5*p}else{var d=Math.max(u,n,i),p=Math.sqrt(2*d-s+1);u>=d?(a[0]=.5*p,a[1]=.5*(f+c)/p,a[2]=.5*(l+t)/p,a[3]=.5*(o-h)/p):n>=d?(a[0]=.5*(c+f)/p,a[1]=.5*p,a[2]=.5*(h+o)/p,a[3]=.5*(l-t)/p):(a[0]=.5*(t+l)/p,a[1]=.5*(o+h)/p,a[2]=.5*p,a[3]=.5*(c-f)/p)}return a}},{}],501:[function(e,v,S){v.exports=i;var r=e("filtered-vector"),a=e("gl-mat4/lookAt"),u=e("gl-mat4/fromQuat"),c=e("gl-mat4/invert"),t=e("./lib/quatFromFrame");function f(s,p,d){return Math.sqrt(Math.pow(s,2)+Math.pow(p,2)+Math.pow(d,2))}function n(s,p,d,g){return Math.sqrt(Math.pow(s,2)+Math.pow(p,2)+Math.pow(d,2)+Math.pow(g,2))}function o(s,p){var d=p[0],g=p[1],b=p[2],m=p[3],x=n(d,g,b,m);x>1e-6?(s[0]=d/x,s[1]=g/x,s[2]=b/x,s[3]=m/x):(s[0]=s[1]=s[2]=0,s[3]=1)}function l(s,p,d){this.radius=r([d]),this.center=r(p),this.rotation=r(s),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var h=l.prototype;h.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},h.recalcMatrix=function(s){this.radius.curve(s),this.center.curve(s),this.rotation.curve(s);var p=this.computedRotation;o(p,p);var d=this.computedMatrix;u(d,p);var g=this.computedCenter,b=this.computedEye,m=this.computedUp,x=Math.exp(this.computedRadius[0]);b[0]=g[0]+x*d[2],b[1]=g[1]+x*d[6],b[2]=g[2]+x*d[10],m[0]=d[1],m[1]=d[5],m[2]=d[9];for(var w=0;w<3;++w){for(var y=0,T=0;T<3;++T)y+=d[w+4*T]*b[T];d[12+w]=-y}},h.getMatrix=function(s,p){this.recalcMatrix(s);var d=this.computedMatrix;if(p){for(var g=0;g<16;++g)p[g]=d[g];return p}return d},h.idle=function(s){this.center.idle(s),this.radius.idle(s),this.rotation.idle(s)},h.flush=function(s){this.center.flush(s),this.radius.flush(s),this.rotation.flush(s)},h.pan=function(s,p,d,g){p=p||0,d=d||0,g=g||0,this.recalcMatrix(s);var b=this.computedMatrix,m=b[1],x=b[5],w=b[9],y=f(m,x,w);m/=y,x/=y,w/=y;var T=b[0],M=b[4],P=b[8],L=T*m+M*x+P*w;T-=m*L,M-=x*L,P-=w*L;var I=f(T,M,P);T/=I,M/=I,P/=I,b[2],b[6],b[10];var E=T*p+m*d,k=M*p+x*d,C=P*p+w*d;this.center.move(s,E,k,C);var D=Math.exp(this.computedRadius[0]);D=Math.max(1e-4,D+g),this.radius.set(s,Math.log(D))},h.rotate=function(s,p,d,g){this.recalcMatrix(s),p=p||0,d=d||0;var b=this.computedMatrix,m=b[0],x=b[4],w=b[8],y=b[1],T=b[5],M=b[9],P=b[2],L=b[6],I=b[10],E=p*m+d*y,k=p*x+d*T,C=p*w+d*M,D=-(L*C-I*k),F=-(I*E-P*C),N=-(P*k-L*E),G=Math.sqrt(Math.max(0,1-Math.pow(D,2)-Math.pow(F,2)-Math.pow(N,2))),U=n(D,F,N,G);U>1e-6?(D/=U,F/=U,N/=U,G/=U):(D=F=N=0,G=1);var X=this.computedRotation,z=X[0],B=X[1],j=X[2],V=X[3],K=z*G+V*D+B*N-j*F,te=B*G+V*F+j*D-z*N,$=j*G+V*N+z*F-B*D,ie=V*G-z*D-B*F-j*N;if(g){D=P,F=L,N=I;var se=Math.sin(g)/f(D,F,N);D*=se,F*=se,N*=se,G=Math.cos(p),K=K*G+ie*D+te*N-$*F,te=te*G+ie*F+$*D-K*N,$=$*G+ie*N+K*F-te*D,ie=ie*G-K*D-te*F-$*N}var Q=n(K,te,$,ie);Q>1e-6?(K/=Q,te/=Q,$/=Q,ie/=Q):(K=te=$=0,ie=1),this.rotation.set(s,K,te,$,ie)},h.lookAt=function(s,p,d,g){this.recalcMatrix(s),d=d||this.computedCenter,p=p||this.computedEye,g=g||this.computedUp;var b=this.computedMatrix;a(b,p,d,g);var m=this.computedRotation;t(m,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),o(m,m),this.rotation.set(s,m[0],m[1],m[2],m[3]);for(var x=0,w=0;w<3;++w)x+=Math.pow(d[w]-p[w],2);this.radius.set(s,.5*Math.log(Math.max(x,1e-6))),this.center.set(s,d[0],d[1],d[2])},h.translate=function(s,p,d,g){this.center.move(s,p||0,d||0,g||0)},h.setMatrix=function(s,p){var d=this.computedRotation;t(d,p[0],p[1],p[2],p[4],p[5],p[6],p[8],p[9],p[10]),o(d,d),this.rotation.set(s,d[0],d[1],d[2],d[3]);var g=this.computedMatrix;c(g,p);var b=g[15];if(Math.abs(b)>1e-6){var m=g[12]/b,x=g[13]/b,w=g[14]/b;this.recalcMatrix(s);var y=Math.exp(this.computedRadius[0]);this.center.set(s,m-g[2]*y,x-g[6]*y,w-g[10]*y),this.radius.idle(s)}else this.center.idle(s),this.radius.idle(s)},h.setDistance=function(s,p){p>0&&this.radius.set(s,Math.log(p))},h.setDistanceLimits=function(s,p){s>0?s=Math.log(s):s=-1/0,p>0?p=Math.log(p):p=1/0,p=Math.max(p,s),this.radius.bounds[0][0]=s,this.radius.bounds[1][0]=p},h.getDistanceLimits=function(s){var p=this.radius.bounds;return s?(s[0]=Math.exp(p[0][0]),s[1]=Math.exp(p[1][0]),s):[Math.exp(p[0][0]),Math.exp(p[1][0])]},h.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},h.fromJSON=function(s){var p=this.lastT(),d=s.center;d&&this.center.set(p,d[0],d[1],d[2]);var g=s.rotation;g&&this.rotation.set(p,g[0],g[1],g[2],g[3]);var b=s.distance;b&&b>0&&this.radius.set(p,Math.log(b)),this.setDistanceLimits(s.zoomMin,s.zoomMax)};function i(s){s=s||{};var p=s.center||[0,0,0],d=s.rotation||[0,0,0,1],g=s.radius||1;p=[].slice.call(p,0,3),d=[].slice.call(d,0,4),o(d,d);var b=new l(d,p,Math.log(g));return b.setDistanceLimits(s.zoomMin,s.zoomMax),("eye"in s||"up"in s)&&b.lookAt(0,s.eye,s.center,s.up),b}},{"./lib/quatFromFrame":500,"filtered-vector":242,"gl-mat4/fromQuat":282,"gl-mat4/invert":293,"gl-mat4/lookAt":294}],502:[function(e,v,S){var r=e("repeat-string");v.exports=function(u,c,t){return t=typeof t<"u"?t+"":" ",r(t,c)+u}},{"repeat-string":541}],503:[function(e,v,S){function r(c,t){if(typeof c!="string")return[c];var f=[c];typeof t=="string"||Array.isArray(t)?t={brackets:t}:t||(t={});var n=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],o=t.escape||"___",l=!!t.flat;n.forEach(function(s){var p=new RegExp(["\\",s[0],"[^\\",s[0],"\\",s[1],"]*\\",s[1]].join("")),d=[];function g(b,m,x){var w=f.push(b.slice(s[0].length,-s[1].length))-1;return d.push(w),o+w+o}f.forEach(function(b,m){for(var x,w=0;b!=x;)if(x=b,b=b.replace(p,g),w++>1e4)throw Error("References have circular dependency. Please, check them.");f[m]=b}),d=d.reverse(),f=f.map(function(b){return d.forEach(function(m){b=b.replace(new RegExp("(\\"+o+m+"\\"+o+")","g"),s[0]+"$1"+s[1])}),b})});var h=new RegExp("\\"+o+"([0-9]+)\\"+o);function i(s,p,d){for(var g=[],b,m=0;b=h.exec(s);){if(m++>1e4)throw Error("Circular references in parenthesis");g.push(s.slice(0,b.index)),g.push(i(p[b[1]],p)),s=s.slice(b.index+b[0].length)}return g.push(s),g}return l?f:i(f[0],f)}function a(c,t){if(t&&t.flat){var f=t&&t.escape||"___",n=c[0],o;if(!n)return"";for(var l=new RegExp("\\"+f+"([0-9]+)\\"+f),h=0;n!=o;){if(h++>1e4)throw Error("Circular references in "+c);o=n,n=n.replace(l,i)}return n}return c.reduce(function s(p,d){return Array.isArray(d)&&(d=d.reduce(s,"")),p+d},"");function i(s,p){if(c[p]==null)throw Error("Reference "+p+"is undefined");return c[p]}}function u(c,t){return Array.isArray(c)?a(c,t):r(c,t)}u.parse=r,u.stringify=a,v.exports=u},{}],504:[function(e,v,S){var r=e("pick-by-alias");v.exports=a;function a(u){var c;return arguments.length>1&&(u=arguments),typeof u=="string"?u=u.split(/\s/).map(parseFloat):typeof u=="number"&&(u=[u]),u.length&&typeof u[0]=="number"?u.length===1?c={width:u[0],height:u[0],x:0,y:0}:u.length===2?c={width:u[0],height:u[1],x:0,y:0}:c={x:u[0],y:u[1],width:u[2]-u[0]||0,height:u[3]-u[1]||0}:u&&(u=r(u,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),c={x:u.left||0,y:u.top||0},u.width==null?u.right?c.width=u.right-c.x:c.width=0:c.width=u.width,u.height==null?u.bottom?c.height=u.bottom-c.y:c.height=0:c.height=u.height),c}},{"pick-by-alias":511}],505:[function(e,v,S){v.exports=u;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},a=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function u(f){var n=[];return f.replace(a,function(o,l,h){var i=l.toLowerCase();for(h=t(h),i=="m"&&h.length>2&&(n.push([l].concat(h.splice(0,2))),i="l",l=l=="m"?"l":"L");;){if(h.length==r[i])return h.unshift(l),n.push(h);if(h.length<r[i])throw new Error("malformed path data");n.push([l].concat(h.splice(0,r[i])))}}),n}var c=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function t(f){var n=f.match(c);return n?n.map(Number):[]}},{}],506:[function(e,v,S){v.exports=function(a,u){u||(u=[0,""]),a=String(a);var c=parseFloat(a,10);return u[0]=c,u[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",u}},{}],507:[function(e,v,S){(function(r){(function(){function a(f){if(typeof f!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(f))}function u(f,n){for(var o="",l=0,h=-1,i=0,s,p=0;p<=f.length;++p){if(p<f.length)s=f.charCodeAt(p);else{if(s===47)break;s=47}if(s===47){if(!(h===p-1||i===1))if(h!==p-1&&i===2){if(o.length<2||l!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var d=o.lastIndexOf("/");if(d!==o.length-1){d===-1?(o="",l=0):(o=o.slice(0,d),l=o.length-1-o.lastIndexOf("/")),h=p,i=0;continue}}else if(o.length===2||o.length===1){o="",l=0,h=p,i=0;continue}}n&&(o.length>0?o+="/..":o="..",l=2)}else o.length>0?o+="/"+f.slice(h+1,p):o=f.slice(h+1,p),l=p-h-1;h=p,i=0}else s===46&&i!==-1?++i:i=-1}return o}function c(f,n){var o=n.dir||n.root,l=n.base||(n.name||"")+(n.ext||"");return o?o===n.root?o+l:o+f+l:l}var t={resolve:function(){for(var n="",o=!1,l,h=arguments.length-1;h>=-1&&!o;h--){var i;h>=0?i=arguments[h]:(l===void 0&&(l=r.cwd()),i=l),a(i),i.length!==0&&(n=i+"/"+n,o=i.charCodeAt(0)===47)}return n=u(n,!o),o?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(a(n),n.length===0)return".";var o=n.charCodeAt(0)===47,l=n.charCodeAt(n.length-1)===47;return n=u(n,!o),n.length===0&&!o&&(n="."),n.length>0&&l&&(n+="/"),o?"/"+n:n},isAbsolute:function(n){return a(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,o=0;o<arguments.length;++o){var l=arguments[o];a(l),l.length>0&&(n===void 0?n=l:n+="/"+l)}return n===void 0?".":t.normalize(n)},relative:function(n,o){if(a(n),a(o),n===o||(n=t.resolve(n),o=t.resolve(o),n===o))return"";for(var l=1;l<n.length&&n.charCodeAt(l)===47;++l);for(var h=n.length,i=h-l,s=1;s<o.length&&o.charCodeAt(s)===47;++s);for(var p=o.length,d=p-s,g=i<d?i:d,b=-1,m=0;m<=g;++m){if(m===g){if(d>g){if(o.charCodeAt(s+m)===47)return o.slice(s+m+1);if(m===0)return o.slice(s+m)}else i>g&&(n.charCodeAt(l+m)===47?b=m:m===0&&(b=0));break}var x=n.charCodeAt(l+m),w=o.charCodeAt(s+m);if(x!==w)break;x===47&&(b=m)}var y="";for(m=l+b+1;m<=h;++m)(m===h||n.charCodeAt(m)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+o.slice(s+b):(s+=b,o.charCodeAt(s)===47&&++s,o.slice(s))},_makeLong:function(n){return n},dirname:function(n){if(a(n),n.length===0)return".";for(var o=n.charCodeAt(0),l=o===47,h=-1,i=!0,s=n.length-1;s>=1;--s)if(o=n.charCodeAt(s),o===47){if(!i){h=s;break}}else i=!1;return h===-1?l?"/":".":l&&h===1?"//":n.slice(0,h)},basename:function(n,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');a(n);var l=0,h=-1,i=!0,s;if(o!==void 0&&o.length>0&&o.length<=n.length){if(o.length===n.length&&o===n)return"";var p=o.length-1,d=-1;for(s=n.length-1;s>=0;--s){var g=n.charCodeAt(s);if(g===47){if(!i){l=s+1;break}}else d===-1&&(i=!1,d=s+1),p>=0&&(g===o.charCodeAt(p)?--p===-1&&(h=s):(p=-1,h=d))}return l===h?h=d:h===-1&&(h=n.length),n.slice(l,h)}else{for(s=n.length-1;s>=0;--s)if(n.charCodeAt(s)===47){if(!i){l=s+1;break}}else h===-1&&(i=!1,h=s+1);return h===-1?"":n.slice(l,h)}},extname:function(n){a(n);for(var o=-1,l=0,h=-1,i=!0,s=0,p=n.length-1;p>=0;--p){var d=n.charCodeAt(p);if(d===47){if(!i){l=p+1;break}continue}h===-1&&(i=!1,h=p+1),d===46?o===-1?o=p:s!==1&&(s=1):o!==-1&&(s=-1)}return o===-1||h===-1||s===0||s===1&&o===h-1&&o===l+1?"":n.slice(o,h)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return c("/",n)},parse:function(n){a(n);var o={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return o;var l=n.charCodeAt(0),h=l===47,i;h?(o.root="/",i=1):i=0;for(var s=-1,p=0,d=-1,g=!0,b=n.length-1,m=0;b>=i;--b){if(l=n.charCodeAt(b),l===47){if(!g){p=b+1;break}continue}d===-1&&(g=!1,d=b+1),l===46?s===-1?s=b:m!==1&&(m=1):s!==-1&&(m=-1)}return s===-1||d===-1||m===0||m===1&&s===d-1&&s===p+1?d!==-1&&(p===0&&h?o.base=o.name=n.slice(1,d):o.base=o.name=n.slice(p,d)):(p===0&&h?(o.name=n.slice(1,s),o.base=n.slice(1,d)):(o.name=n.slice(p,s),o.base=n.slice(p,d)),o.ext=n.slice(s,d)),p>0?o.dir=n.slice(0,p-1):h&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};t.posix=t,v.exports=t}).call(this)}).call(this,e("_process"))},{_process:526}],508:[function(e,v,S){(function(r){(function(){(function(){var a,u,c,t,f,n;typeof performance<"u"&&performance!==null&&performance.now?v.exports=function(){return performance.now()}:typeof r<"u"&&r!==null&&r.hrtime?(v.exports=function(){return(a()-f)/1e6},u=r.hrtime,a=function(){var o;return o=u(),o[0]*1e9+o[1]},t=a(),n=r.uptime()*1e9,f=t-n):Date.now?(v.exports=function(){return Date.now()-c},c=Date.now()):(v.exports=function(){return new Date().getTime()-c},c=new Date().getTime())}).call(this)}).call(this)}).call(this,e("_process"))},{_process:526}],509:[function(e,v,S){v.exports=u;var r=32,a=e("typedarray-pool");function u(c){var t=c.length;if(t<r){for(var f=1,n=0;n<t;++n)for(var o=0;o<n;++o)if(c[n]<c[o])f=-f;else if(c[n]===c[o])return 0;return f}else{for(var l=a.mallocUint8(t),n=0;n<t;++n)l[n]=0;for(var f=1,n=0;n<t;++n)if(!l[n]){var h=1;l[n]=1;for(var o=c[n];o!==n;o=c[o]){if(l[o])return a.freeUint8(l),0;h+=1,l[o]=1}h&1||(f=-f)}return a.freeUint8(l),f}}},{"typedarray-pool":595}],510:[function(e,v,S){var r=e("typedarray-pool"),a=e("invert-permutation");function u(t){var f=t.length;switch(f){case 0:case 1:return 0;case 2:return t[1]}var n=r.mallocUint32(f),o=r.mallocUint32(f),l=0,h,i,s;for(a(t,o),s=0;s<f;++s)n[s]=t[s];for(s=f-1;s>0;--s)i=o[s],h=n[s],n[s]=n[i],n[i]=h,o[s]=o[h],o[h]=i,l=(l+h)*s;return r.freeUint32(o),r.freeUint32(n),l}function c(t,f,n){switch(t){case 0:return n||[];case 1:return n?(n[0]=0,n):[0];case 2:return n?(f?(n[0]=0,n[1]=1):(n[0]=1,n[1]=0),n):f?[0,1]:[1,0]}n=n||new Array(t);var o,l,h,i=1;for(n[0]=0,h=1;h<t;++h)n[h]=h,i=i*h|0;for(h=t-1;h>0;--h)o=f/i|0,f=f-o*i|0,i=i/h|0,l=n[h]|0,n[h]=n[o]|0,n[o]=l|0;return n}S.rank=u,S.unrank=c},{"invert-permutation":462,"typedarray-pool":595}],511:[function(e,v,S){v.exports=function(c,t,f){var n={},o,l;if(typeof t=="string"&&(t=a(t)),Array.isArray(t)){var h={};for(l=0;l<t.length;l++)h[t[l]]=!0;t=h}for(o in t)t[o]=a(t[o]);var i={};for(o in t){var s=t[o];if(Array.isArray(s))for(l=0;l<s.length;l++){var p=s[l];if(f&&(i[p]=!0),p in c){if(n[o]=c[p],f)for(var d=l;d<s.length;d++)i[s[d]]=!0;break}}else o in c&&(t[o]&&(n[o]=c[o]),f&&(i[o]=!0))}if(f)for(o in c)i[o]||(n[o]=c[o]);return n};var r={};function a(u){return r[u]?r[u]:(typeof u=="string"&&(u=r[u]=u.split(/\s*,\s*|\s+/)),u)}},{}],512:[function(e,v,S){v.exports=a;var r=e("compare-angle");function a(u,c){for(var t=c.length|0,f=u.length,n=[new Array(t),new Array(t)],o=0;o<t;++o)n[0][o]=[],n[1][o]=[];for(var o=0;o<f;++o){var l=u[o];n[0][l[0]].push(l),n[1][l[1]].push(l)}for(var h=[],o=0;o<t;++o)n[0][o].length+n[1][o].length===0&&h.push([o]);function i(x,w){var y=n[w][x[w]];y.splice(y.indexOf(x),1)}function s(x,w,y){for(var T,M,P,L=0;L<2;++L)if(n[L][w].length>0){T=n[L][w][0],P=L;break}M=T[P^1];for(var I=0;I<2;++I)for(var E=n[I][w],k=0;k<E.length;++k){var C=E[k],D=C[I^1],F=r(c[x],c[w],c[M],c[D]);F>0&&(T=C,M=D,P=I)}return y||T&&i(T,P),M}function p(x,w){var y=n[w][x][0],T=[x];i(y,w);for(var M=y[w^1];;){for(;M!==x;)T.push(M),M=s(T[T.length-2],M,!1);if(n[0][x].length+n[1][x].length===0)break;var P=T[T.length-1],L=x,I=T[1],E=s(P,L,!0);if(r(c[P],c[L],c[I],c[E])<0)break;T.push(x),M=s(P,L)}return T}function d(x,w){return w[1]===w[w.length-1]}for(var o=0;o<t;++o)for(var g=0;g<2;++g){for(var b=[];n[g][o].length>0;){n[0][o].length;var m=p(o,g);d(b,m)?b.push.apply(b,m):(b.length>0&&h.push(b),b=m)}b.length>0&&h.push(b)}return h}},{"compare-angle":132}],513:[function(e,v,S){v.exports=a;var r=e("edges-to-adjacency-list");function a(u,c){for(var t=r(u,c.length),f=new Array(c.length),n=new Array(c.length),o=[],l=0;l<c.length;++l){var h=t[l].length;n[l]=h,f[l]=!0,h<=1&&o.push(l)}for(;o.length>0;){var i=o.pop();f[i]=!1;for(var s=t[i],l=0;l<s.length;++l){var p=s[l];--n[p]===0&&o.push(p)}}for(var d=new Array(c.length),g=[],l=0;l<c.length;++l)if(f[l]){var i=g.length;d[l]=i,g.push(c[l])}else d[l]=-1;for(var b=[],l=0;l<u.length;++l){var m=u[l];f[m[0]]&&f[m[1]]&&b.push([d[m[0]],d[m[1]]])}return[b,g]}},{"edges-to-adjacency-list":178}],514:[function(e,v,S){v.exports=h;var r=e("edges-to-adjacency-list"),a=e("planar-dual"),u=e("point-in-big-polygon"),c=e("two-product"),t=e("robust-sum"),f=e("uniq"),n=e("./lib/trim-leaves");function o(i,s){for(var p=new Array(i),d=0;d<i;++d)p[d]=s;return p}function l(i){for(var s=new Array(i),p=0;p<i;++p)s[p]=[];return s}function h(i,s){var ie=n(i,s);i=ie[0],s=ie[1];var p=s.length;i.length;for(var d=r(i,s.length),g=0;g<p;++g)if(d[g].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var b=a(i,s);function m(ae){for(var fe=ae.length,de=[0],pe=0;pe<fe;++pe){var W=s[ae[pe]],ue=s[ae[(pe+1)%fe]],me=c(-W[0],W[1]),be=c(-W[0],ue[1]),Me=c(ue[0],W[1]),Pe=c(ue[0],ue[1]);de=t(de,t(t(me,be),t(Me,Pe)))}return de[de.length-1]>0}b=b.filter(m);for(var x=b.length,w=new Array(x),y=new Array(x),g=0;g<x;++g){w[g]=g;var T=new Array(x),M=b[g].map(function(fe){return s[fe]}),P=u([M]),L=0;e:for(var I=0;I<x;++I)if(T[I]=0,g!==I){for(var E=b[I],k=E.length,C=0;C<k;++C){var D=P(s[E[C]]);if(D!==0){D<0&&(T[I]=1,L+=1);continue e}}T[I]=1,L+=1}y[g]=[L,g,T]}y.sort(function(ae,fe){return fe[0]-ae[0]});for(var g=0;g<x;++g)for(var T=y[g],F=T[1],N=T[2],I=0;I<x;++I)N[I]&&(w[I]=F);for(var G=l(x),g=0;g<x;++g)G[g].push(w[g]),G[w[g]].push(g);for(var U={},X=o(p,!1),g=0;g<x;++g)for(var E=b[g],k=E.length,I=0;I<k;++I){var z=E[I],B=E[(I+1)%k],j=Math.min(z,B)+":"+Math.max(z,B);if(j in U){var V=U[j];G[V].push(g),G[g].push(V),X[z]=X[B]=!0}else U[j]=g}function K(ae){for(var fe=ae.length,de=0;de<fe;++de)if(!X[ae[de]])return!1;return!0}for(var te=[],$=o(x,-1),g=0;g<x;++g)w[g]===g&&!K(b[g])?(te.push(g),$[g]=0):$[g]=-1;for(var ie=[];te.length>0;){var se=te.pop(),Q=G[se];f(Q,function(ae,fe){return ae-fe});var H=Q.length,oe=$[se],re;if(oe===0){var E=b[se];re=[E]}for(var g=0;g<H;++g){var ee=Q[g];if(!($[ee]>=0)&&($[ee]=oe^1,te.push(ee),oe===0)){var E=b[ee];K(E)||(E.reverse(),re.push(E))}}oe===0&&ie.push(re)}return ie}},{"./lib/trim-leaves":513,"edges-to-adjacency-list":178,"planar-dual":512,"point-in-big-polygon":516,"robust-sum":553,"two-product":582,uniq:597}],515:[function(e,v,S){arguments[4][243][0].apply(S,arguments)},{dup:243}],516:[function(e,v,S){v.exports=s;var r=e("robust-orientation")[3],a=e("slab-decomposition"),u=e("interval-tree-1d"),c=e("binary-search-bounds");function t(){return!0}function f(p){return function(d,g){var b=p[d];return b?!!b.queryPoint(g,t):!1}}function n(p){for(var d={},g=0;g<p.length;++g){var b=p[g],m=b[0][0],x=b[0][1],w=b[1][1],y=[Math.min(x,w),Math.max(x,w)];m in d?d[m].push(y):d[m]=[y]}for(var T={},M=Object.keys(d),g=0;g<M.length;++g){var P=d[M[g]];T[M[g]]=u(P)}return f(T)}function o(p,d){return function(g){var b=c.le(d,g[0]);if(b<0)return 1;var m=p[b];if(!m)if(b>0&&d[b]===g[0])m=p[b-1];else return 1;for(var x=1;m;){var w=m.key,y=r(g,w[0],w[1]);if(w[0][0]<w[1][0])if(y<0)m=m.left;else if(y>0)x=-1,m=m.right;else return 0;else if(y>0)m=m.left;else if(y<0)x=1,m=m.right;else return 0}return x}}function l(p){return 1}function h(p){return function(g){return p(g[0],g[1])?0:1}}function i(p,d){return function(b){return p(b[0],b[1])?0:d(b)}}function s(p){for(var d=p.length,g=[],b=[],m=0;m<d;++m)for(var x=p[m],w=x.length,y=w-1,T=0;T<w;y=T++){var M=x[y],P=x[T];M[0]===P[0]?b.push([M,P]):g.push([M,P])}if(g.length===0)return b.length===0?l:h(n(b));var L=a(g),I=o(L.slabs,L.coordinates);return b.length===0?I:i(n(b),I)}},{"binary-search-bounds":515,"interval-tree-1d":460,"robust-orientation":548,"slab-decomposition":565}],517:[function(e,v,S){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var r=e("./lib/build-log"),a=e("./lib/epsilon"),u=e("./lib/intersecter"),c=e("./lib/segment-chainer"),t=e("./lib/segment-selector"),f=e("./lib/geojson"),n=!1,o=a(),l;l={buildLog:function(i){return i===!0?n=r():i===!1&&(n=!1),n===!1?!1:n.list},epsilon:function(i){return o.epsilon(i)},segments:function(i){var s=u(!0,o,n);return i.regions.forEach(s.addRegion),{segments:s.calculate(i.inverted),inverted:i.inverted}},combine:function(i,s){var p=u(!1,o,n);return{combined:p.calculate(i.segments,i.inverted,s.segments,s.inverted),inverted1:i.inverted,inverted2:s.inverted}},selectUnion:function(i){return{segments:t.union(i.combined,n),inverted:i.inverted1||i.inverted2}},selectIntersect:function(i){return{segments:t.intersect(i.combined,n),inverted:i.inverted1&&i.inverted2}},selectDifference:function(i){return{segments:t.difference(i.combined,n),inverted:i.inverted1&&!i.inverted2}},selectDifferenceRev:function(i){return{segments:t.differenceRev(i.combined,n),inverted:!i.inverted1&&i.inverted2}},selectXor:function(i){return{segments:t.xor(i.combined,n),inverted:i.inverted1!==i.inverted2}},polygon:function(i){return{regions:c(i.segments,o,n),inverted:i.inverted}},polygonFromGeoJSON:function(i){return f.toPolygon(l,i)},polygonToGeoJSON:function(i){return f.fromPolygon(l,o,i)},union:function(i,s){return h(i,s,l.selectUnion)},intersect:function(i,s){return h(i,s,l.selectIntersect)},difference:function(i,s){return h(i,s,l.selectDifference)},differenceRev:function(i,s){return h(i,s,l.selectDifferenceRev)},xor:function(i,s){return h(i,s,l.selectXor)}};function h(i,s,p){var d=l.segments(i),g=l.segments(s),b=l.combine(d,g),m=p(b);return l.polygon(m)}typeof window=="object"&&(window.PolyBool=l),v.exports=l},{"./lib/build-log":518,"./lib/epsilon":519,"./lib/geojson":520,"./lib/intersecter":521,"./lib/segment-chainer":523,"./lib/segment-selector":524}],518:[function(e,v,S){function r(){var a,u=0,c=!1;function t(f,n){return a.list.push({type:f,data:n?JSON.parse(JSON.stringify(n)):void 0}),a}return a={list:[],segmentId:function(){return u++},checkIntersection:function(f,n){return t("check",{seg1:f,seg2:n})},segmentChop:function(f,n){return t("div_seg",{seg:f,pt:n}),t("chop",{seg:f,pt:n})},statusRemove:function(f){return t("pop_seg",{seg:f})},segmentUpdate:function(f){return t("seg_update",{seg:f})},segmentNew:function(f,n){return t("new_seg",{seg:f,primary:n})},segmentRemove:function(f){return t("rem_seg",{seg:f})},tempStatus:function(f,n,o){return t("temp_status",{seg:f,above:n,below:o})},rewind:function(f){return t("rewind",{seg:f})},status:function(f,n,o){return t("status",{seg:f,above:n,below:o})},vert:function(f){return f===c?a:(c=f,t("vert",{x:f}))},log:function(f){return typeof f!="string"&&(f=JSON.stringify(f,!1,"  ")),t("log",{txt:f})},reset:function(){return t("reset")},selected:function(f){return t("selected",{segs:f})},chainStart:function(f){return t("chain_start",{seg:f})},chainRemoveHead:function(f,n){return t("chain_rem_head",{index:f,pt:n})},chainRemoveTail:function(f,n){return t("chain_rem_tail",{index:f,pt:n})},chainNew:function(f,n){return t("chain_new",{pt1:f,pt2:n})},chainMatch:function(f){return t("chain_match",{index:f})},chainClose:function(f){return t("chain_close",{index:f})},chainAddHead:function(f,n){return t("chain_add_head",{index:f,pt:n})},chainAddTail:function(f,n){return t("chain_add_tail",{index:f,pt:n})},chainConnect:function(f,n){return t("chain_con",{index1:f,index2:n})},chainReverse:function(f){return t("chain_rev",{index:f})},chainJoin:function(f,n){return t("chain_join",{index1:f,index2:n})},done:function(){return t("done")}},a}v.exports=r},{}],519:[function(e,v,S){function r(a){typeof a!="number"&&(a=1e-10);var u={epsilon:function(c){return typeof c=="number"&&(a=c),a},pointAboveOrOnLine:function(c,t,f){var n=t[0],o=t[1],l=f[0],h=f[1],i=c[0],s=c[1];return(l-n)*(s-o)-(h-o)*(i-n)>=-a},pointBetween:function(c,t,f){var n=c[1]-t[1],o=f[0]-t[0],l=c[0]-t[0],h=f[1]-t[1],i=l*o+n*h;if(i<a)return!1;var s=o*o+h*h;return!(i-s>-a)},pointsSameX:function(c,t){return Math.abs(c[0]-t[0])<a},pointsSameY:function(c,t){return Math.abs(c[1]-t[1])<a},pointsSame:function(c,t){return u.pointsSameX(c,t)&&u.pointsSameY(c,t)},pointsCompare:function(c,t){return u.pointsSameX(c,t)?u.pointsSameY(c,t)?0:c[1]<t[1]?-1:1:c[0]<t[0]?-1:1},pointsCollinear:function(c,t,f){var n=c[0]-t[0],o=c[1]-t[1],l=t[0]-f[0],h=t[1]-f[1];return Math.abs(n*h-l*o)<a},linesIntersect:function(c,t,f,n){var o=t[0]-c[0],l=t[1]-c[1],h=n[0]-f[0],i=n[1]-f[1],s=o*i-l*h;if(Math.abs(s)<a)return!1;var p=c[0]-f[0],d=c[1]-f[1],g=(h*d-i*p)/s,b=(o*d-l*p)/s,m={alongA:0,alongB:0,pt:[c[0]+g*o,c[1]+g*l]};return g<=-a?m.alongA=-2:g<a?m.alongA=-1:g-1<=-a?m.alongA=0:g-1<a?m.alongA=1:m.alongA=2,b<=-a?m.alongB=-2:b<a?m.alongB=-1:b-1<=-a?m.alongB=0:b-1<a?m.alongB=1:m.alongB=2,m},pointInsideRegion:function(c,t){for(var f=c[0],n=c[1],o=t[t.length-1][0],l=t[t.length-1][1],h=!1,i=0;i<t.length;i++){var s=t[i][0],p=t[i][1];p-n>a!=l-n>a&&(o-s)*(n-p)/(l-p)+s-f>a&&(h=!h),o=s,l=p}return h}};return u}v.exports=r},{}],520:[function(e,v,S){var r={toPolygon:function(a,u){function c(n){if(n.length<=0)return a.segments({inverted:!1,regions:[]});function o(i){var s=i.slice(0,i.length-1);return a.segments({inverted:!1,regions:[s]})}for(var l=o(n[0]),h=1;h<n.length;h++)l=a.selectDifference(a.combine(l,o(n[h])));return l}if(u.type==="Polygon")return a.polygon(c(u.coordinates));if(u.type==="MultiPolygon"){for(var t=a.segments({inverted:!1,regions:[]}),f=0;f<u.coordinates.length;f++)t=a.selectUnion(a.combine(t,c(u.coordinates[f])));return a.polygon(t)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(a,u,c){c=a.polygon(a.segments(c));function t(g,b){return u.pointInsideRegion([(g[0][0]+g[1][0])*.5,(g[0][1]+g[1][1])*.5],b)}function f(g){return{region:g,children:[]}}var n=f(null);function o(g,b){for(var m=0;m<g.children.length;m++){var x=g.children[m];if(t(b,x.region)){o(x,b);return}}for(var w=f(b),m=0;m<g.children.length;m++){var x=g.children[m];t(x.region,b)&&(w.children.push(x),g.children.splice(m,1),m--)}g.children.push(w)}for(var l=0;l<c.regions.length;l++){var h=c.regions[l];h.length<3||o(n,h)}function i(g,b){for(var m=0,x=g[g.length-1][0],w=g[g.length-1][1],y=[],T=0;T<g.length;T++){var M=g[T][0],P=g[T][1];y.push([M,P]),m+=P*x-M*w,x=M,w=P}var L=m<0;return L!==b&&y.reverse(),y.push([y[0][0],y[0][1]]),y}var s=[];function p(g){var b=[i(g.region,!1)];s.push(b);for(var m=0;m<g.children.length;m++)b.push(d(g.children[m]))}function d(g){for(var b=0;b<g.children.length;b++)p(g.children[b]);return i(g.region,!0)}for(var l=0;l<n.children.length;l++)p(n.children[l]);return s.length<=0?{type:"Polygon",coordinates:[]}:s.length==1?{type:"Polygon",coordinates:s[0]}:{type:"MultiPolygon",coordinates:s}}};v.exports=r},{}],521:[function(e,v,S){var r=e("./linked-list");function a(u,c,t){function f(m,x){return{id:t?t.segmentId():-1,start:m,end:x,myFill:{above:null,below:null},otherFill:null}}function n(m,x,w){return{id:t?t.segmentId():-1,start:m,end:x,myFill:{above:w.myFill.above,below:w.myFill.below},otherFill:null}}var o=r.create();function l(m,x,w,y,T,M){var P=c.pointsCompare(x,T);return P!==0?P:c.pointsSame(w,M)?0:m!==y?m?1:-1:c.pointAboveOrOnLine(w,y?T:M,y?M:T)?1:-1}function h(m,x){o.insertBefore(m,function(w){var y=l(m.isStart,m.pt,x,w.isStart,w.pt,w.other.pt);return y<0})}function i(m,x){var w=r.node({isStart:!0,pt:m.start,seg:m,primary:x,other:null,status:null});return h(w,m.end),w}function s(m,x,w){var y=r.node({isStart:!1,pt:x.end,seg:x,primary:w,other:m,status:null});m.other=y,h(y,m.pt)}function p(m,x){var w=i(m,x);return s(w,m,x),w}function d(m,x){t&&t.segmentChop(m.seg,x),m.other.remove(),m.seg.end=x,m.other.pt=x,h(m.other,m.pt)}function g(m,x){var w=n(x,m.seg.end,m.seg);return d(m,x),p(w,m.primary)}function b(m,x){var w=r.create();function y(X,z){var B=X.seg.start,j=X.seg.end,V=z.seg.start,K=z.seg.end;return c.pointsCollinear(B,V,K)?c.pointsCollinear(j,V,K)||c.pointAboveOrOnLine(j,V,K)?1:-1:c.pointAboveOrOnLine(B,V,K)?1:-1}function T(X){return w.findTransition(function(z){var B=y(X,z.ev);return B>0})}function M(X,z){var B=X.seg,j=z.seg,V=B.start,K=B.end,te=j.start,$=j.end;t&&t.checkIntersection(B,j);var ie=c.linesIntersect(V,K,te,$);if(ie===!1){if(!c.pointsCollinear(V,K,te)||c.pointsSame(V,$)||c.pointsSame(K,te))return!1;var se=c.pointsSame(V,te),Q=c.pointsSame(K,$);if(se&&Q)return z;var H=!se&&c.pointBetween(V,te,$),oe=!Q&&c.pointBetween(K,te,$);if(se)return oe?g(z,K):g(X,$),z;H&&(Q||(oe?g(z,K):g(X,$)),g(z,V))}else ie.alongA===0&&(ie.alongB===-1?g(X,te):ie.alongB===0?g(X,ie.pt):ie.alongB===1&&g(X,$)),ie.alongB===0&&(ie.alongA===-1?g(z,V):ie.alongA===0?g(z,ie.pt):ie.alongA===1&&g(z,K));return!1}for(var P=[];!o.isEmpty();){var L=o.getHead();if(t&&t.vert(L.pt[0]),L.isStart){let X=function(){if(E){var z=M(L,E);if(z)return z}return k?M(L,k):!1};var U=X;t&&t.segmentNew(L.seg,L.primary);var I=T(L),E=I.before?I.before.ev:null,k=I.after?I.after.ev:null;t&&t.tempStatus(L.seg,E?E.seg:!1,k?k.seg:!1);var C=X();if(C){if(u){var D;L.seg.myFill.below===null?D=!0:D=L.seg.myFill.above!==L.seg.myFill.below,D&&(C.seg.myFill.above=!C.seg.myFill.above)}else C.seg.otherFill=L.seg.myFill;t&&t.segmentUpdate(C.seg),L.other.remove(),L.remove()}if(o.getHead()!==L){t&&t.rewind(L.seg);continue}if(u){var D;L.seg.myFill.below===null?D=!0:D=L.seg.myFill.above!==L.seg.myFill.below,k?L.seg.myFill.below=k.seg.myFill.above:L.seg.myFill.below=m,D?L.seg.myFill.above=!L.seg.myFill.below:L.seg.myFill.above=L.seg.myFill.below}else if(L.seg.otherFill===null){var F;k?L.primary===k.primary?F=k.seg.otherFill.above:F=k.seg.myFill.above:F=L.primary?x:m,L.seg.otherFill={above:F,below:F}}t&&t.status(L.seg,E?E.seg:!1,k?k.seg:!1),L.other.status=I.insert(r.node({ev:L}))}else{var N=L.status;if(N===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(w.exists(N.prev)&&w.exists(N.next)&&M(N.prev.ev,N.next.ev),t&&t.statusRemove(N.ev.seg),N.remove(),!L.primary){var G=L.seg.myFill;L.seg.myFill=L.seg.otherFill,L.seg.otherFill=G}P.push(L.seg)}o.getHead().remove()}return t&&t.done(),P}return u?{addRegion:function(m){for(var x,w=m[m.length-1],y=0;y<m.length;y++){x=w,w=m[y];var T=c.pointsCompare(x,w);T!==0&&p(f(T<0?x:w,T<0?w:x),!0)}},calculate:function(m){return b(m,!1)}}:{calculate:function(m,x,w,y){return m.forEach(function(T){p(n(T.start,T.end,T),!0)}),w.forEach(function(T){p(n(T.start,T.end,T),!1)}),b(x,y)}}}v.exports=a},{"./linked-list":522}],522:[function(e,v,S){var r={create:function(){var a={root:{root:!0,next:null},exists:function(u){return!(u===null||u===a.root)},isEmpty:function(){return a.root.next===null},getHead:function(){return a.root.next},insertBefore:function(u,c){for(var t=a.root,f=a.root.next;f!==null;){if(c(f)){u.prev=f.prev,u.next=f,f.prev.next=u,f.prev=u;return}t=f,f=f.next}t.next=u,u.prev=t,u.next=null},findTransition:function(u){for(var c=a.root,t=a.root.next;t!==null&&!u(t);)c=t,t=t.next;return{before:c===a.root?null:c,after:t,insert:function(f){return f.prev=c,f.next=t,c.next=f,t!==null&&(t.prev=f),f}}}};return a},node:function(a){return a.prev=null,a.next=null,a.remove=function(){a.prev.next=a.next,a.next&&(a.next.prev=a.prev),a.prev=null,a.next=null},a}};v.exports=r},{}],523:[function(e,v,S){function r(a,u,c){var t=[],f=[];return a.forEach(function(n){var o=n.start,l=n.end;if(u.pointsSame(o,l)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}c&&c.chainStart(n);var h={index:0,matches_head:!1,matches_pt1:!1},i={index:0,matches_head:!1,matches_pt1:!1},s=h;function p(F,N,G){return s.index=F,s.matches_head=N,s.matches_pt1=G,s===h?(s=i,!1):(s=null,!0)}for(var d=0;d<t.length;d++){var g=t[d],b=g[0];g[1];var m=g[g.length-1];if(g[g.length-2],u.pointsSame(b,o)){if(p(d,!0,!0))break}else if(u.pointsSame(b,l)){if(p(d,!0,!1))break}else if(u.pointsSame(m,o)){if(p(d,!1,!0))break}else if(u.pointsSame(m,l)&&p(d,!1,!1))break}if(s===h){t.push([o,l]),c&&c.chainNew(o,l);return}if(s===i){c&&c.chainMatch(h.index);var x=h.index,w=h.matches_pt1?l:o,y=h.matches_head,g=t[x],T=y?g[0]:g[g.length-1],M=y?g[1]:g[g.length-2],P=y?g[g.length-1]:g[0],L=y?g[g.length-2]:g[1];if(u.pointsCollinear(M,T,w)&&(y?(c&&c.chainRemoveHead(h.index,w),g.shift()):(c&&c.chainRemoveTail(h.index,w),g.pop()),T=M),u.pointsSame(P,w)){t.splice(x,1),u.pointsCollinear(L,P,T)&&(y?(c&&c.chainRemoveTail(h.index,T),g.pop()):(c&&c.chainRemoveHead(h.index,T),g.shift())),c&&c.chainClose(h.index),f.push(g);return}y?(c&&c.chainAddHead(h.index,w),g.unshift(w)):(c&&c.chainAddTail(h.index,w),g.push(w));return}function I(F){c&&c.chainReverse(F),t[F].reverse()}function E(F,N){var G=t[F],U=t[N],X=G[G.length-1],z=G[G.length-2],B=U[0],j=U[1];u.pointsCollinear(z,X,B)&&(c&&c.chainRemoveTail(F,X),G.pop(),X=z),u.pointsCollinear(X,B,j)&&(c&&c.chainRemoveHead(N,B),U.shift()),c&&c.chainJoin(F,N),t[F]=G.concat(U),t.splice(N,1)}var k=h.index,C=i.index;c&&c.chainConnect(k,C);var D=t[k].length<t[C].length;h.matches_head?i.matches_head?D?(I(k),E(k,C)):(I(C),E(C,k)):E(C,k):i.matches_head?E(k,C):D?(I(k),E(C,k)):(I(C),E(k,C))}),f}v.exports=r},{}],524:[function(e,v,S){function r(u,c,t){var f=[];return u.forEach(function(n){var o=(n.myFill.above?8:0)+(n.myFill.below?4:0)+(n.otherFill&&n.otherFill.above?2:0)+(n.otherFill&&n.otherFill.below?1:0);c[o]!==0&&f.push({id:t?t.segmentId():-1,start:n.start,end:n.end,myFill:{above:c[o]===1,below:c[o]===2},otherFill:null})}),t&&t.selected(f),f}var a={union:function(u,c){return r(u,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],c)},intersect:function(u,c){return r(u,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],c)},difference:function(u,c){return r(u,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],c)},differenceRev:function(u,c){return r(u,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],c)},xor:function(u,c){return r(u,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],c)}};v.exports=a},{}],525:[function(e,v,S){var r=new Float64Array(4),a=new Float64Array(4),u=new Float64Array(4);function c(t,f,n,o,l){r.length<o.length&&(r=new Float64Array(o.length),a=new Float64Array(o.length),u=new Float64Array(o.length));for(var h=0;h<o.length;++h)r[h]=t[h]-o[h],a[h]=f[h]-t[h],u[h]=n[h]-t[h];for(var i=0,s=0,p=0,d=0,g=0,b=0,h=0;h<o.length;++h){var m=a[h],x=u[h],w=r[h];i+=m*m,s+=m*x,p+=x*x,d+=w*m,g+=w*x,b+=w*w}var y=Math.abs(i*p-s*s),T=s*g-p*d,M=s*d-i*g,P;if(T+M<=y)if(T<0)M<0&&d<0?(M=0,-d>=i?(T=1,P=i+2*d+b):(T=-d/i,P=d*T+b)):(T=0,g>=0?(M=0,P=b):-g>=p?(M=1,P=p+2*g+b):(M=-g/p,P=g*M+b));else if(M<0)M=0,d>=0?(T=0,P=b):-d>=i?(T=1,P=i+2*d+b):(T=-d/i,P=d*T+b);else{var L=1/y;T*=L,M*=L,P=T*(i*T+s*M+2*d)+M*(s*T+p*M+2*g)+b}else{var I,E,k,C;T<0?(I=s+d,E=p+g,E>I?(k=E-I,C=i-2*s+p,k>=C?(T=1,M=0,P=i+2*d+b):(T=k/C,M=1-T,P=T*(i*T+s*M+2*d)+M*(s*T+p*M+2*g)+b)):(T=0,E<=0?(M=1,P=p+2*g+b):g>=0?(M=0,P=b):(M=-g/p,P=g*M+b))):M<0?(I=s+g,E=i+d,E>I?(k=E-I,C=i-2*s+p,k>=C?(M=1,T=0,P=p+2*g+b):(M=k/C,T=1-M,P=T*(i*T+s*M+2*d)+M*(s*T+p*M+2*g)+b)):(M=0,E<=0?(T=1,P=i+2*d+b):d>=0?(T=0,P=b):(T=-d/i,P=d*T+b))):(k=p+g-s-d,k<=0?(T=0,M=1,P=p+2*g+b):(C=i-2*s+p,k>=C?(T=1,M=0,P=i+2*d+b):(T=k/C,M=1-T,P=T*(i*T+s*M+2*d)+M*(s*T+p*M+2*g)+b)))}for(var D=1-T-M,h=0;h<o.length;++h)l[h]=D*t[h]+T*f[h]+M*n[h];return P<0?0:P}v.exports=c},{}],526:[function(e,v,S){var r=v.exports={},a,u;function c(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=c}catch{a=c}try{typeof clearTimeout=="function"?u=clearTimeout:u=t}catch{u=t}})();function f(b){if(a===setTimeout)return setTimeout(b,0);if((a===c||!a)&&setTimeout)return a=setTimeout,setTimeout(b,0);try{return a(b,0)}catch{try{return a.call(null,b,0)}catch{return a.call(this,b,0)}}}function n(b){if(u===clearTimeout)return clearTimeout(b);if((u===t||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(b);try{return u(b)}catch{try{return u.call(null,b)}catch{return u.call(this,b)}}}var o=[],l=!1,h,i=-1;function s(){!l||!h||(l=!1,h.length?o=h.concat(o):i=-1,o.length&&p())}function p(){if(!l){var b=f(s);l=!0;for(var m=o.length;m;){for(h=o,o=[];++i<m;)h&&h[i].run();i=-1,m=o.length}h=null,l=!1,n(b)}}r.nextTick=function(b){var m=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)m[x-1]=arguments[x];o.push(new d(b,m)),o.length===1&&!l&&f(p)};function d(b,m){this.fun=b,this.array=m}d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function g(){}r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(b){return[]},r.binding=function(b){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(b){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],527:[function(e,v,S){v.exports=e("gl-quat/slerp")},{"gl-quat/slerp":325}],528:[function(e,v,S){(function(r){(function(){for(var a=e("performance-now"),u=typeof window>"u"?r:window,c=["moz","webkit"],t="AnimationFrame",f=u["request"+t],n=u["cancel"+t]||u["cancelRequest"+t],o=0;!f&&o<c.length;o++)f=u[c[o]+"Request"+t],n=u[c[o]+"Cancel"+t]||u[c[o]+"CancelRequest"+t];if(!f||!n){var l=0,h=0,i=[],s=1e3/60;f=function(p){if(i.length===0){var d=a(),g=Math.max(0,s-(d-l));l=g+d,setTimeout(function(){var b=i.slice(0);i.length=0;for(var m=0;m<b.length;m++)if(!b[m].cancelled)try{b[m].callback(l)}catch(x){setTimeout(function(){throw x},0)}},Math.round(g))}return i.push({handle:++h,callback:p,cancelled:!1}),h},n=function(p){for(var d=0;d<i.length;d++)i[d].handle===p&&(i[d].cancelled=!0)}}v.exports=function(p){return f.call(u,p)},v.exports.cancel=function(){n.apply(u,arguments)},v.exports.polyfill=function(p){p||(p=u),p.requestAnimationFrame=f,p.cancelAnimationFrame=n}}).call(this)}).call(this,typeof Hs<"u"?Hs:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":508}],529:[function(e,v,S){var r=e("big-rat/add");v.exports=a;function a(u,c){for(var t=u.length,f=new Array(t),n=0;n<t;++n)f[n]=r(u[n],c[n]);return f}},{"big-rat/add":80}],530:[function(e,v,S){v.exports=a;var r=e("big-rat");function a(u){for(var c=new Array(u.length),t=0;t<u.length;++t)c[t]=r(u[t]);return c}},{"big-rat":83}],531:[function(e,v,S){var r=e("big-rat"),a=e("big-rat/mul");v.exports=u;function u(c,t){for(var f=r(t),n=c.length,o=new Array(n),l=0;l<n;++l)o[l]=a(c[l],f);return o}},{"big-rat":83,"big-rat/mul":92}],532:[function(e,v,S){var r=e("big-rat/sub");v.exports=a;function a(u,c){for(var t=u.length,f=new Array(t),n=0;n<t;++n)f[n]=r(u[n],c[n]);return f}},{"big-rat/sub":94}],533:[function(e,v,S){var r=e("compare-cell"),a=e("compare-oriented-cell"),u=e("cell-orientation");v.exports=c;function c(t){t.sort(a);for(var f=t.length,n=0,o=0;o<f;++o){var l=t[o],h=u(l);if(h!==0){if(n>0){var i=t[n-1];if(r(l,i)===0&&u(i)!==h){n-=1;continue}}t[n++]=l}}return t.length=n,t}},{"cell-orientation":117,"compare-cell":133,"compare-oriented-cell":134}],534:[function(e,v,S){var r=e("array-bounds"),a=e("color-normalize"),u=e("update-diff"),c=e("pick-by-alias"),t=e("object-assign"),f=e("flatten-vertex-data"),n=e("to-float32"),o=n.float32,l=n.fract32;v.exports=i;var h=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function i(s,p){if(typeof s=="function"?(p||(p={}),p.regl=s):p=s,p.length&&(p.positions=p),s=p.regl,!s.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var d=s._gl,g,b,m,x,w,y,T={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},M=[];return x=s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),b=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),w=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),y=s.buffer({usage:"static",type:"float",data:h}),E(p),g=s({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:s.prop("range"),lineWidth:s.prop("lineWidth"),capSize:s.prop("capSize"),opacity:s.prop("opacity"),scale:s.prop("scale"),translate:s.prop("translate"),scaleFract:s.prop("scaleFract"),translateFract:s.prop("translateFract"),viewport:function(C,D){return[D.viewport.x,D.viewport.y,C.viewportWidth,C.viewportHeight]}},attributes:{color:{buffer:x,offset:function(C,D){return D.offset*4},divisor:1},position:{buffer:b,offset:function(C,D){return D.offset*8},divisor:1},positionFract:{buffer:m,offset:function(C,D){return D.offset*8},divisor:1},error:{buffer:w,offset:function(C,D){return D.offset*16},divisor:1},direction:{buffer:y,stride:24,offset:0},lineOffset:{buffer:y,stride:24,offset:8},capOffset:{buffer:y,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:s.prop("viewport")},viewport:s.prop("viewport"),stencil:!1,instances:s.prop("count"),count:h.length}),t(P,{update:E,draw:L,destroy:k,regl:s,gl:d,canvas:d.canvas,groups:M}),P;function P(C){C?E(C):C===null&&k(),L()}function L(C){if(typeof C=="number")return I(C);C&&!Array.isArray(C)&&(C=[C]),s._refresh(),M.forEach(function(D,F){if(!!D){if(C&&(C[F]?D.draw=!0:D.draw=!1),!D.draw){D.draw=!0;return}I(F)}})}function I(C){typeof C=="number"&&(C=M[C]),C!=null&&(!(C&&C.count&&C.color&&C.opacity&&C.positions&&C.positions.length>1)||(C.scaleRatio=[C.scale[0]*C.viewport.width,C.scale[1]*C.viewport.height],g(C),C.after&&C.after(C)))}function E(C){if(!!C){C.length!=null?typeof C[0]=="number"&&(C=[{positions:C}]):Array.isArray(C)||(C=[C]);var D=0,F=0;if(P.groups=M=C.map(function(z,B){var j=M[B];if(z)typeof z=="function"?z={after:z}:typeof z[0]=="number"&&(z={positions:z});else return j;return z=c(z,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),j||(M[B]=j={id:B,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},z=t({},T,z)),u(j,z,[{lineWidth:function(V){return+V*.5},capSize:function(V){return+V*.5},opacity:parseFloat,errors:function(V){return V=f(V),F+=V.length,V},positions:function(V,K){return V=f(V,"float64"),K.count=Math.floor(V.length/2),K.bounds=r(V,2),K.offset=D,D+=K.count,V}},{color:function(V,K){var te=K.count;if(V||(V="transparent"),!Array.isArray(V)||typeof V[0]=="number"){var $=V;V=Array(te);for(var ie=0;ie<te;ie++)V[ie]=$}if(V.length<te)throw Error("Not enough colors");for(var se=new Uint8Array(te*4),Q=0;Q<te;Q++){var H=a(V[Q],"uint8");se.set(H,Q*4)}return se},range:function(V,K,te){var $=K.bounds;return V||(V=$),K.scale=[1/(V[2]-V[0]),1/(V[3]-V[1])],K.translate=[-V[0],-V[1]],K.scaleFract=l(K.scale),K.translateFract=l(K.translate),V},viewport:function(V){var K;return Array.isArray(V)?K={x:V[0],y:V[1],width:V[2]-V[0],height:V[3]-V[1]}:V?(K={x:V.x||V.left||0,y:V.y||V.top||0},V.right?K.width=V.right-K.x:K.width=V.w||V.width||0,V.bottom?K.height=V.bottom-K.y:K.height=V.h||V.height||0):K={x:0,y:0,width:d.drawingBufferWidth,height:d.drawingBufferHeight},K}}]),j}),D||F){var N=M.reduce(function(z,B,j){return z+(B?B.count:0)},0),G=new Float64Array(N*2),U=new Uint8Array(N*4),X=new Float32Array(N*4);M.forEach(function(z,B){if(!!z){var j=z.positions,V=z.count,K=z.offset,te=z.color,$=z.errors;!V||(U.set(te,K*4),X.set($,K*4),G.set(j,K*2))}}),b(o(G)),m(l(G)),x(U),w(X)}}}function k(){b.destroy(),m.destroy(),x.destroy(),w.destroy(),y.destroy()}}},{"array-bounds":70,"color-normalize":125,"flatten-vertex-data":244,"object-assign":499,"pick-by-alias":511,"to-float32":577,"update-diff":599}],535:[function(e,v,S){var r=e("color-normalize"),a=e("array-bounds"),u=e("object-assign"),c=e("glslify"),t=e("pick-by-alias"),f=e("flatten-vertex-data"),n=e("earcut"),o=e("array-normalize"),l=e("to-float32"),h=l.float32,i=l.fract32,s=e("es6-weak-map"),p=e("parse-rect");v.exports=d;function d(g,b){if(!(this instanceof d))return new d(g,b);if(typeof g=="function"?(b||(b={}),b.regl=g):b=g,b.length&&(b.positions=b),g=b.regl,!g.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=g._gl,this.regl=g,this.passes=[],this.shaders=d.shaders.has(g)?d.shaders.get(g):d.shaders.set(g,d.createShaders(g)).get(g),this.update(b)}d.dashMult=2,d.maxPatternLength=256,d.precisionThreshold=3e6,d.maxPoints=1e4,d.maxLines=2048,d.shaders=new s,d.createShaders=function(g){var b=g.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),m={primitive:"triangle strip",instances:g.prop("count"),count:4,offset:0,uniforms:{miterMode:function(T,M){return M.join==="round"?2:1},miterLimit:g.prop("miterLimit"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translateFract:g.prop("translateFract"),translate:g.prop("translate"),thickness:g.prop("thickness"),dashPattern:g.prop("dashTexture"),opacity:g.prop("opacity"),pixelRatio:g.context("pixelRatio"),id:g.prop("id"),dashSize:g.prop("dashLength"),viewport:function(T,M){return[M.viewport.x,M.viewport.y,T.viewportWidth,T.viewportHeight]},depth:g.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(T,M){return!M.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport")},x=g(u({vert:c([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:c([`precision highp float;
#define GLSLIFY 1

uniform sampler2D dashPattern;

uniform float dashSize, pixelRatio, thickness, opacity, id;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;
	float dash = texture2D(dashPattern, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:b,divisor:0,stride:8,offset:0},lineTop:{buffer:b,divisor:0,stride:8,offset:4},aCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:g.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},m)),w;try{w=g(u({cull:{enable:!0,face:"back"},vert:c([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:c([`precision highp float;
#define GLSLIFY 1

uniform sampler2D dashPattern;
uniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;
	float dash = texture2D(dashPattern, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:b,divisor:0,stride:8,offset:0},lineTop:{buffer:b,divisor:0,stride:8,offset:4},aColor:{buffer:g.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:g.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},m))}catch{w=x}var y=g({primitive:"triangle",elements:function(T,M){return M.triangles},offset:0,vert:c([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:c([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:g.prop("scale"),color:g.prop("fill"),scaleFract:g.prop("scaleFract"),translateFract:g.prop("translateFract"),translate:g.prop("translate"),opacity:g.prop("opacity"),pixelRatio:g.context("pixelRatio"),id:g.prop("id"),viewport:function(T,M){return[M.viewport.x,M.viewport.y,T.viewportWidth,T.viewportHeight]}},attributes:{position:{buffer:g.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:8}},blend:m.blend,depth:{enable:!1},scissor:m.scissor,stencil:m.stencil,viewport:m.viewport});return{fill:y,rect:x,miter:w}},d.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},d.prototype.render=function(){for(var g,b=[],m=arguments.length;m--;)b[m]=arguments[m];b.length&&(g=this).update.apply(g,b),this.draw()},d.prototype.draw=function(){for(var g=this,b=[],m=arguments.length;m--;)b[m]=arguments[m];return(b.length?b:this.passes).forEach(function(x,w){var y;if(x&&Array.isArray(x))return(y=g).draw.apply(y,x);typeof x=="number"&&(x=g.passes[x]),x&&x.count>1&&x.opacity&&(g.regl._refresh(),x.fill&&x.triangles&&x.triangles.length>2&&g.shaders.fill(x),x.thickness&&(x.scale[0]*x.viewport.width>d.precisionThreshold||x.scale[1]*x.viewport.height>d.precisionThreshold||x.join==="rect"||!x.join&&(x.thickness<=2||x.count>=d.maxPoints)?g.shaders.rect(x):g.shaders.miter(x)))}),this},d.prototype.update=function(g){var b=this;if(!!g){g.length!=null?typeof g[0]=="number"&&(g=[{positions:g}]):Array.isArray(g)||(g=[g]);var m=this,x=m.regl,w=m.gl;if(g.forEach(function(L,I){var E=b.passes[I];if(L!==void 0){if(L===null){b.passes[I]=null;return}if(typeof L[0]=="number"&&(L={positions:L}),L=t(L,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"}),E||(b.passes[I]=E={id:I,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:x.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:x.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},L=u({},d.defaults,L)),L.thickness!=null&&(E.thickness=parseFloat(L.thickness)),L.opacity!=null&&(E.opacity=parseFloat(L.opacity)),L.miterLimit!=null&&(E.miterLimit=parseFloat(L.miterLimit)),L.overlay!=null&&(E.overlay=!!L.overlay,I<d.maxLines&&(E.depth=2*(d.maxLines-1-I%d.maxLines)/d.maxLines-1)),L.join!=null&&(E.join=L.join),L.hole!=null&&(E.hole=L.hole),L.fill!=null&&(E.fill=L.fill?r(L.fill,"uint8"):null),L.viewport!=null&&(E.viewport=p(L.viewport)),E.viewport||(E.viewport=p([w.drawingBufferWidth,w.drawingBufferHeight])),L.close!=null&&(E.close=L.close),L.positions===null&&(L.positions=[]),L.positions){var k,C;if(L.positions.x&&L.positions.y){var D=L.positions.x,F=L.positions.y;C=E.count=Math.max(D.length,F.length),k=new Float64Array(C*2);for(var N=0;N<C;N++)k[N*2]=D[N],k[N*2+1]=F[N]}else k=f(L.positions,"float64"),C=E.count=Math.floor(k.length/2);var G=E.bounds=a(k,2);if(E.fill){for(var U=[],X={},z=0,B=0,j=0,V=E.count;B<V;B++){var K=k[B*2],te=k[B*2+1];isNaN(K)||isNaN(te)||K==null||te==null?(K=k[z*2],te=k[z*2+1],X[B]=z):z=B,U[j++]=K,U[j++]=te}for(var $=n(U,E.hole||[]),ie=0,se=$.length;ie<se;ie++)X[$[ie]]!=null&&($[ie]=X[$[ie]]);E.triangles=$}var Q=new Float64Array(k);o(Q,2,G);var H=new Float64Array(C*2+6);E.close?k[0]===k[C*2-2]&&k[1]===k[C*2-1]?(H[0]=Q[C*2-4],H[1]=Q[C*2-3]):(H[0]=Q[C*2-2],H[1]=Q[C*2-1]):(H[0]=Q[0],H[1]=Q[1]),H.set(Q,2),E.close?k[0]===k[C*2-2]&&k[1]===k[C*2-1]?(H[C*2+2]=Q[2],H[C*2+3]=Q[3],E.count-=1):(H[C*2+2]=Q[0],H[C*2+3]=Q[1],H[C*2+4]=Q[2],H[C*2+5]=Q[3]):(H[C*2+2]=Q[C*2-2],H[C*2+3]=Q[C*2-1],H[C*2+4]=Q[C*2-2],H[C*2+5]=Q[C*2-1]),E.positionBuffer(h(H)),E.positionFractBuffer(i(H))}if(L.range?E.range=L.range:E.range||(E.range=E.bounds),(L.range||L.positions)&&E.count){var oe=E.bounds,re=oe[2]-oe[0],ee=oe[3]-oe[1],ae=E.range[2]-E.range[0],fe=E.range[3]-E.range[1];E.scale=[re/ae,ee/fe],E.translate=[-E.range[0]/ae+oe[0]/ae||0,-E.range[1]/fe+oe[1]/fe||0],E.scaleFract=i(E.scale),E.translateFract=i(E.translate)}if(L.dashes){var de=0,pe;if(!L.dashes||L.dashes.length<2)de=1,pe=new Uint8Array([255,255,255,255,255,255,255,255]);else{de=0;for(var W=0;W<L.dashes.length;++W)de+=L.dashes[W];pe=new Uint8Array(de*d.dashMult);for(var ue=0,me=255,be=0;be<2;be++)for(var Me=0;Me<L.dashes.length;++Me){for(var Pe=0,Ge=L.dashes[Me]*d.dashMult*.5;Pe<Ge;++Pe)pe[ue++]=me;me^=255}}E.dashLength=de,E.dashTexture({channels:1,data:pe,width:pe.length,height:1,mag:"linear",min:"linear"},0,0)}if(L.color){var ze=E.count,Qe=L.color;Qe||(Qe="transparent");var tt=new Uint8Array(ze*4+4);if(!Array.isArray(Qe)||typeof Qe[0]=="number")for(var Ce=r(Qe,"uint8"),Ae=0;Ae<ze+1;Ae++)tt.set(Ce,Ae*4);else{for(var Be=0;Be<ze;Be++){var qe=r(Qe[Be],"uint8");tt.set(qe,Be*4)}tt.set(r(Qe[0],"uint8"),ze*4)}E.colorBuffer({usage:"dynamic",type:"uint8",data:tt})}}}),g.length<this.passes.length){for(var y=g.length;y<this.passes.length;y++){var T=this.passes[y];!T||(T.colorBuffer.destroy(),T.positionBuffer.destroy(),T.dashTexture.destroy())}this.passes.length=g.length}for(var M=[],P=0;P<this.passes.length;P++)this.passes[P]!==null&&M.push(this.passes[P]);return this.passes=M,this}},d.prototype.destroy=function(){return this.passes.forEach(function(g){g.colorBuffer.destroy(),g.positionBuffer.destroy(),g.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":70,"array-normalize":71,"color-normalize":125,earcut:177,"es6-weak-map":233,"flatten-vertex-data":244,glslify:536,"object-assign":499,"parse-rect":504,"pick-by-alias":511,"to-float32":577}],536:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],537:[function(e,v,S){function r(k,C){return c(k)||f(k,C)||n(k,C)||h()}function a(k){return u(k)||t(k)||n(k)||l()}function u(k){if(Array.isArray(k))return o(k)}function c(k){if(Array.isArray(k))return k}function t(k){if(typeof Symbol<"u"&&Symbol.iterator in Object(k))return Array.from(k)}function f(k,C){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(k)))){var D=[],F=!0,N=!1,G=void 0;try{for(var U=k[Symbol.iterator](),X;!(F=(X=U.next()).done)&&(D.push(X.value),!(C&&D.length===C));F=!0);}catch(z){N=!0,G=z}finally{try{!F&&U.return!=null&&U.return()}finally{if(N)throw G}}return D}}function n(k,C){if(!!k){if(typeof k=="string")return o(k,C);var D=Object.prototype.toString.call(k).slice(8,-1);if(D==="Object"&&k.constructor&&(D=k.constructor.name),D==="Map"||D==="Set")return Array.from(k);if(D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return o(k,C)}}function o(k,C){(C==null||C>k.length)&&(C=k.length);for(var D=0,F=new Array(C);D<C;D++)F[D]=k[D];return F}function l(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=e("color-normalize"),s=e("array-bounds"),p=e("color-id"),d=e("@plotly/point-cluster"),g=e("object-assign"),b=e("glslify"),m=e("pick-by-alias"),x=e("update-diff"),w=e("flatten-vertex-data"),y=e("is-iexplorer"),T=e("to-float32"),M=e("parse-rect"),P=L;function L(k,C){var D=this;if(!(this instanceof L))return new L(k,C);typeof k=="function"?(C||(C={}),C.regl=k):(C=k,k=null),C&&C.length&&(C.positions=C),k=C.regl;var F=k._gl,N,G=[],U={},X=[],z=[null],B=[null],j=255,V=100;this.tooManyColors=y,N=k.texture({data:new Uint8Array(j*4),width:j,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),g(this,{regl:k,gl:F,groups:X,markerCache:B,markerTextures:z,palette:G,paletteIds:U,paletteTexture:N,maxColors:j,maxSize:V,canvas:F.canvas}),this.update(C);var K={uniforms:{constPointSize:!!C.constPointSize,pixelRatio:k.context("pixelRatio"),palette:N,paletteSize:function(se,Q){return[D.tooManyColors?0:j,N.height]},scale:k.prop("scale"),scaleFract:k.prop("scaleFract"),translate:k.prop("translate"),translateFract:k.prop("translateFract"),opacity:k.prop("opacity"),marker:k.prop("markerTexture")},attributes:{x:function(se,Q){return Q.xAttr||{buffer:Q.positionBuffer,stride:8,offset:0}},y:function(se,Q){return Q.yAttr||{buffer:Q.positionBuffer,stride:8,offset:4}},xFract:function(se,Q){return Q.xAttr?{constant:[0,0]}:{buffer:Q.positionFractBuffer,stride:8,offset:0}},yFract:function(se,Q){return Q.yAttr?{constant:[0,0]}:{buffer:Q.positionFractBuffer,stride:8,offset:4}},size:function(se,Q){return Q.size.length?{buffer:Q.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(Q.size*255/D.maxSize)]}},borderSize:function(se,Q){return Q.borderSize.length?{buffer:Q.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(Q.borderSize*255/D.maxSize)]}},colorId:function(se,Q){return Q.color.length?{buffer:Q.colorBuffer,stride:D.tooManyColors?8:4,offset:0}:{constant:D.tooManyColors?G.slice(Q.color*4,Q.color*4+4):[Q.color]}},borderColorId:function(se,Q){return Q.borderColor.length?{buffer:Q.colorBuffer,stride:D.tooManyColors?8:4,offset:D.tooManyColors?4:2}:{constant:D.tooManyColors?G.slice(Q.borderColor*4,Q.borderColor*4+4):[Q.borderColor]}},isActive:function(se,Q){return Q.activation===!0?{constant:[1]}:Q.activation?Q.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:k.prop("viewport")},viewport:k.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:k.prop("elements"),count:k.prop("count"),offset:k.prop("offset"),primitive:"points"},te=g({},K);te.frag=b([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

uniform sampler2D marker;
uniform float opacity;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(marker, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),te.vert=b([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform float pixelRatio;
uniform bool constPointSize;
uniform sampler2D palette;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(palette,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=k(te);var $=g({},K);$.frag=b([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;

uniform float opacity;
varying float fragBorderRadius, fragWidth;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),$.vert=b([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio;
uniform bool constPointSize;
uniform sampler2D palette;
uniform vec2 paletteSize;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(palette,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),y&&($.frag=$.frag.replace("smoothstep","smoothStep"),te.frag=te.frag.replace("smoothstep","smoothStep")),this.drawCircle=k($)}L.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},L.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},L.prototype.draw=function(){for(var k=this,C=arguments.length,D=new Array(C),F=0;F<C;F++)D[F]=arguments[F];var N=this.groups;if(D.length===1&&Array.isArray(D[0])&&(D[0][0]===null||Array.isArray(D[0][0]))&&(D=D[0]),this.regl._refresh(),D.length)for(var G=0;G<D.length;G++)this.drawItem(G,D[G]);else N.forEach(function(U,X){k.drawItem(X)});return this},L.prototype.drawItem=function(k,C){var D=this.groups,F=D[k];if(typeof C=="number"&&(k=C,F=D[C],C=null),!!(F&&F.count&&F.opacity)){F.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,F,C));for(var N=[],G=1;G<F.activation.length;G++)!F.activation[G]||F.activation[G]!==!0&&!F.activation[G].data.length||N.push.apply(N,a(this.getMarkerDrawOptions(G,F,C)));N.length&&this.drawMarker(N)}},L.prototype.getMarkerDrawOptions=function(k,C,D){var F=C.range,N=C.tree,G=C.viewport,U=C.activation,X=C.selectionBuffer,z=C.count;if(this.regl,!N)return D?[g({},C,{markerTexture:this.markerTextures[k],activation:U[k],count:D.length,elements:D,offset:0})]:[g({},C,{markerTexture:this.markerTextures[k],activation:U[k],offset:0})];var B=[],j=N.range(F,{lod:!0,px:[(F[2]-F[0])/G.width,(F[3]-F[1])/G.height]});if(D){for(var V=U[k],K=V.data,te=new Uint8Array(z),$=0;$<D.length;$++){var ie=D[$];te[ie]=K?K[ie]:1}X.subdata(te)}for(var se=j.length;se--;){var Q=r(j[se],2),H=Q[0],oe=Q[1];B.push(g({},C,{markerTexture:this.markerTextures[k],activation:D?X:U[k],offset:H,count:oe-H}))}return B},L.prototype.update=function(){for(var k=this,C=arguments.length,D=new Array(C),F=0;F<C;F++)D[F]=arguments[F];if(!!D.length){D.length===1&&Array.isArray(D[0])&&(D=D[0]);var N=this.groups,G=this.gl,U=this.regl,X=this.maxSize,z=this.maxColors,B=this.palette;this.groups=N=D.map(function(j,V){var K=N[V];if(j===void 0)return K;j===null?j={positions:null}:typeof j=="function"?j={ondraw:j}:typeof j[0]=="number"&&(j={positions:j}),j=m(j,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),j.positions===null&&(j.positions=[]),j.tooManyColors!=null&&(k.tooManyColors=j.tooManyColors),K||(N[V]=K={id:V,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:U.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:U.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:U.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:U.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:U.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},j=g({},L.defaults,j)),j.positions&&!("marker"in j)&&(j.marker=K.marker,delete K.marker),j.marker&&!("positions"in j)&&(j.positions=K.positions,delete K.positions);var te=0,$=0;if(x(K,j,[{snap:!0,size:function(ze,Qe){return ze==null&&(ze=L.defaults.size),te+=ze&&ze.length?1:0,ze},borderSize:function(ze,Qe){return ze==null&&(ze=L.defaults.borderSize),te+=ze&&ze.length?1:0,ze},opacity:parseFloat,color:function(ze,Qe){return ze==null&&(ze=L.defaults.color),ze=k.updateColor(ze),$++,ze},borderColor:function(ze,Qe){return ze==null&&(ze=L.defaults.borderColor),ze=k.updateColor(ze),$++,ze},bounds:function(ze,Qe,tt){return"range"in tt||(tt.range=null),ze},positions:function(ze,Qe,tt){var Ce=Qe.snap,Ae=Qe.positionBuffer,Be=Qe.positionFractBuffer,qe=Qe.selectionBuffer;if(ze.x||ze.y)return ze.x.length?Qe.xAttr={buffer:U.buffer(ze.x),offset:0,stride:4,count:ze.x.length}:Qe.xAttr={buffer:ze.x.buffer,offset:ze.x.offset*4||0,stride:(ze.x.stride||1)*4,count:ze.x.count},ze.y.length?Qe.yAttr={buffer:U.buffer(ze.y),offset:0,stride:4,count:ze.y.length}:Qe.yAttr={buffer:ze.y.buffer,offset:ze.y.offset*4||0,stride:(ze.y.stride||1)*4,count:ze.y.count},Qe.count=Math.max(Qe.xAttr.count,Qe.yAttr.count),ze;ze=w(ze,"float64");var Tt=Qe.count=Math.floor(ze.length/2),At=Qe.bounds=Tt?s(ze,2):null;if(!tt.range&&!Qe.range&&(delete Qe.range,tt.range=At),!tt.marker&&!Qe.marker&&(delete Qe.marker,tt.marker=null),Ce&&(Ce===!0||Tt>Ce)?Qe.tree=d(ze,{bounds:At}):Ce&&Ce.length&&(Qe.tree=Ce),Qe.tree){var Ne={primitive:"points",usage:"static",data:Qe.tree,type:"uint32"};Qe.elements?Qe.elements(Ne):Qe.elements=U.elements(Ne)}return Ae({data:T.float(ze),usage:"dynamic"}),Be({data:T.fract(ze),usage:"dynamic"}),qe({data:new Uint8Array(Tt),type:"uint8",usage:"stream"}),ze}},{marker:function(ze,Qe,tt){var Ce=Qe.activation;if(Ce.forEach(function(Mt){return Mt&&Mt.destroy&&Mt.destroy()}),Ce.length=0,!ze||typeof ze[0]=="number"){var Ae=k.addMarker(ze);Ce[Ae]=!0}else{for(var Be=[],qe=0,Tt=Math.min(ze.length,Qe.count);qe<Tt;qe++){var At=k.addMarker(ze[qe]);Be[At]||(Be[At]=new Uint8Array(Qe.count)),Be[At][qe]=1}for(var Ne=0;Ne<Be.length;Ne++)if(!!Be[Ne]){var ct={data:Be[Ne],type:"uint8",usage:"static"};Ce[Ne]?Ce[Ne](ct):Ce[Ne]=U.buffer(ct),Ce[Ne].data=Be[Ne]}}return ze},range:function(ze,Qe,tt){var Ce=Qe.bounds;if(!!Ce)return ze||(ze=Ce),Qe.scale=[1/(ze[2]-ze[0]),1/(ze[3]-ze[1])],Qe.translate=[-ze[0],-ze[1]],Qe.scaleFract=T.fract(Qe.scale),Qe.translateFract=T.fract(Qe.translate),ze},viewport:function(ze){var Qe=M(ze||[G.drawingBufferWidth,G.drawingBufferHeight]);return Qe}}]),te){var ie=K,se=ie.count,Q=ie.size,H=ie.borderSize,oe=ie.sizeBuffer,re=new Uint8Array(se*2);if(Q.length||H.length)for(var ee=0;ee<se;ee++)re[ee*2]=Math.round((Q[ee]==null?Q:Q[ee])*255/X),re[ee*2+1]=Math.round((H[ee]==null?H:H[ee])*255/X);oe({data:re,usage:"dynamic"})}if($){var ae=K,fe=ae.count,de=ae.color,pe=ae.borderColor,W=ae.colorBuffer,ue;if(k.tooManyColors){if(de.length||pe.length){ue=new Uint8Array(fe*8);for(var me=0;me<fe;me++){var be=de[me];ue[me*8]=B[be*4],ue[me*8+1]=B[be*4+1],ue[me*8+2]=B[be*4+2],ue[me*8+3]=B[be*4+3];var Me=pe[me];ue[me*8+4]=B[Me*4],ue[me*8+5]=B[Me*4+1],ue[me*8+6]=B[Me*4+2],ue[me*8+7]=B[Me*4+3]}}}else if(de.length||pe.length){ue=new Uint8Array(fe*4+2);for(var Pe=0;Pe<fe;Pe++)de[Pe]!=null&&(ue[Pe*4]=de[Pe]%z,ue[Pe*4+1]=Math.floor(de[Pe]/z)),pe[Pe]!=null&&(ue[Pe*4+2]=pe[Pe]%z,ue[Pe*4+3]=Math.floor(pe[Pe]/z))}W({data:ue||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return K})}},L.prototype.addMarker=function(k){var C=this.markerTextures,D=this.regl,F=this.markerCache,N=k==null?0:F.indexOf(k);if(N>=0)return N;var G;if(k instanceof Uint8Array||k instanceof Uint8ClampedArray)G=k;else{G=new Uint8Array(k.length);for(var U=0,X=k.length;U<X;U++)G[U]=k[U]*255}var z=Math.floor(Math.sqrt(G.length));return N=C.length,F.push(k),C.push(D.texture({channels:1,data:G,radius:z,mag:"linear",min:"linear"})),N},L.prototype.updateColor=function(k){var C=this.paletteIds,D=this.palette,F=this.maxColors;Array.isArray(k)||(k=[k]);var N=[];if(typeof k[0]=="number"){var G=[];if(Array.isArray(k))for(var U=0;U<k.length;U+=4)G.push(k.slice(U,U+4));else for(var X=0;X<k.length;X+=4)G.push(k.subarray(X,X+4));k=G}for(var z=0;z<k.length;z++){var B=k[z];B=i(B,"uint8");var j=p(B,!1);if(C[j]==null){var V=D.length;C[j]=Math.floor(V/4),D[V]=B[0],D[V+1]=B[1],D[V+2]=B[2],D[V+3]=B[3]}N[z]=C[j]}return!this.tooManyColors&&D.length>F*4&&(this.tooManyColors=!0),this.updatePalette(D),N.length===1?N[0]:N},L.prototype.updatePalette=function(k){if(!this.tooManyColors){var C=this.maxColors,D=this.paletteTexture,F=Math.ceil(k.length*.25/C);if(F>1){k=k.slice();for(var N=k.length*.25%C;N<F*C;N++)k.push(0,0,0,0)}D.height<F&&D.resize(C,F),D.subimage({width:Math.min(k.length*.25,C),height:F,data:k},0,0)}},L.prototype.destroy=function(){return this.groups.forEach(function(k){k.sizeBuffer.destroy(),k.positionBuffer.destroy(),k.positionFractBuffer.destroy(),k.colorBuffer.destroy(),k.activation.forEach(function(C){return C&&C.destroy&&C.destroy()}),k.selectionBuffer.destroy(),k.elements&&k.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(k){return k&&k.destroy&&k.destroy()}),this};var I=e("object-assign"),E=function(C,D){var F=new P(C,D),N=F.render.bind(F);return I(N,{render:N,update:F.update.bind(F),draw:F.draw.bind(F),destroy:F.destroy.bind(F),regl:F.regl,gl:F.gl,canvas:F.gl.canvas,groups:F.groups,markers:F.markerCache,palette:F.palette}),N};v.exports=E},{"@plotly/point-cluster":57,"array-bounds":70,"color-id":123,"color-normalize":125,"flatten-vertex-data":244,glslify:538,"is-iexplorer":466,"object-assign":499,"parse-rect":504,"pick-by-alias":511,"to-float32":577,"update-diff":599}],538:[function(e,v,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],539:[function(e,v,S){var r=e("regl-scatter2d"),a=e("pick-by-alias"),u=e("array-bounds"),c=e("raf"),t=e("array-range"),f=e("parse-rect"),n=e("flatten-vertex-data");v.exports=o;function o(s,p){if(!(this instanceof o))return new o(s);this.traces=[],this.passes={},this.regl=s,this.scatter=r(s),this.canvas=this.scatter.canvas}o.prototype.render=function(){for(var s=this,p,d=[],g=arguments.length;g--;)d[g]=arguments[g];return d.length&&(p=this).update.apply(p,d),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=c(function(){s.draw(),s.dirty=!0,s.planned=null})):(this.draw(),this.dirty=!0,c(function(){s.dirty=!1})),this)},o.prototype.update=function(){for(var s,p=[],d=arguments.length;d--;)p[d]=arguments[d];if(!!p.length){for(var g=0;g<p.length;g++)this.updateItem(g,p[g]);this.traces=this.traces.filter(Boolean);for(var b=[],m=0,x=0;x<this.traces.length;x++){for(var w=this.traces[x],y=this.traces[x].passes,T=0;T<y.length;T++)b.push(this.passes[y[T]]);w.passOffset=m,m+=w.passes.length}return(s=this.scatter).update.apply(s,b),this}},o.prototype.updateItem=function(s,p){var d=this,g=d.regl;if(p===null)return this.traces[s]=null,this;if(!p)return this;var b=a(p,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),m=this.traces[s]||(this.traces[s]={id:s,buffer:g.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:f([g._gl.drawingBufferWidth,g._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(b.color!=null&&(m.color=b.color),b.size!=null&&(m.size=b.size),b.marker!=null&&(m.marker=b.marker),b.borderColor!=null&&(m.borderColor=b.borderColor),b.borderSize!=null&&(m.borderSize=b.borderSize),b.opacity!=null&&(m.opacity=b.opacity),b.viewport&&(m.viewport=f(b.viewport)),b.diagonal!=null&&(m.diagonal=b.diagonal),b.upper!=null&&(m.upper=b.upper),b.lower!=null&&(m.lower=b.lower),b.data){m.buffer(n(b.data)),m.columns=b.data.length,m.count=b.data[0].length,m.bounds=[];for(var x=0;x<m.columns;x++)m.bounds[x]=u(b.data[x],1)}var w;b.range&&(m.range=b.range,w=m.range&&typeof m.range[0]!="number"),b.domain&&(m.domain=b.domain);var y=!1;b.padding!=null&&(Array.isArray(b.padding)&&b.padding.length===m.columns&&typeof b.padding[b.padding.length-1]=="number"?(m.padding=b.padding.map(i),y=!0):m.padding=i(b.padding));var T=m.columns,M=m.count,P=m.viewport.width,L=m.viewport.height,I=m.viewport.x,E=m.viewport.y,k=P/T,C=L/T;m.passes=[];for(var D=0;D<T;D++)for(var F=0;F<T;F++)if(!(!m.diagonal&&F===D)&&!(!m.upper&&D>F)&&!(!m.lower&&D<F)){var N=l(m.id,D,F),G=this.passes[N]||(this.passes[N]={});if(b.data&&(b.transpose?G.positions={x:{buffer:m.buffer,offset:F,count:M,stride:T},y:{buffer:m.buffer,offset:D,count:M,stride:T}}:G.positions={x:{buffer:m.buffer,offset:F*M,count:M},y:{buffer:m.buffer,offset:D*M,count:M}},G.bounds=h(m.bounds,D,F)),b.domain||b.viewport||b.data){var U=y?h(m.padding,D,F):m.padding;if(m.domain){var X=h(m.domain,D,F),z=X[0],B=X[1],j=X[2],V=X[3];G.viewport=[I+z*P+U[0],E+B*L+U[1],I+j*P-U[2],E+V*L-U[3]]}else G.viewport=[I+F*k+k*U[0],E+D*C+C*U[1],I+(F+1)*k-k*U[2],E+(D+1)*C-C*U[3]]}b.color&&(G.color=m.color),b.size&&(G.size=m.size),b.marker&&(G.marker=m.marker),b.borderSize&&(G.borderSize=m.borderSize),b.borderColor&&(G.borderColor=m.borderColor),b.opacity&&(G.opacity=m.opacity),b.range&&(G.range=w?h(m.range,D,F):m.range||G.bounds),m.passes.push(N)}return this},o.prototype.draw=function(){for(var s,p=[],d=arguments.length;d--;)p[d]=arguments[d];if(!p.length)this.scatter.draw();else{for(var g=[],b=0;b<p.length;b++)if(typeof p[b]=="number"){var m=this.traces[p[b]],x=m.passes,w=m.passOffset;g.push.apply(g,t(w,w+x.length))}else if(p[b].length){var y=p[b],T=this.traces[b],M=T.passes,P=T.passOffset;M=M.map(function(L,I){g[P+I]=y})}(s=this.scatter).draw.apply(s,g)}return this},o.prototype.destroy=function(){return this.traces.forEach(function(s){s.buffer&&s.buffer.destroy&&s.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function l(s,p,d){var g=s.id!=null?s.id:s,b=p,m=d,x=g<<16|(b&255)<<8|m&255;return x}function h(s,p,d){var g,b,m,x,w=s[p],y=s[d];return w.length>2?(w[0],w[2],g=w[1],b=w[3]):w.length?(g=w[0],b=w[1]):(w.x,g=w.y,w.x+w.width,b=w.y+w.height),y.length>2?(m=y[0],x=y[2],y[1],y[3]):y.length?(m=y[0],x=y[1]):(m=y.x,y.y,x=y.x+y.width,y.y+y.height),[m,g,x,b]}function i(s){if(typeof s=="number")return[s,s,s,s];if(s.length===2)return[s[0],s[1],s[0],s[1]];var p=f(s);return[p.x,p.y,p.x+p.width,p.y+p.height]}},{"array-bounds":70,"array-range":72,"flatten-vertex-data":244,"parse-rect":504,"pick-by-alias":511,raf:528,"regl-scatter2d":537}],540:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?v.exports=a():r.createREGL=a()})(this,function(){function r(je,ot){this.id=ae++,this.type=je,this.data=ot}function a(je){if(je.length===0)return[];var ot=je.charAt(0),Je=je.charAt(je.length-1);if(1<je.length&&ot===Je&&(ot==='"'||ot==="'"))return['"'+je.substr(1,je.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(ot=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(je))return a(je.substr(0,ot.index)).concat(a(ot[1])).concat(a(je.substr(ot.index+ot[0].length)));if(ot=je.split("."),ot.length===1)return['"'+je.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(je=[],Je=0;Je<ot.length;++Je)je=je.concat(a(ot[Je]));return je}function u(je){return"["+a(je).join("][")+"]"}function c(){var je={"":0},ot=[""];return{id:function(Je){var st=je[Je];return st||(st=je[Je]=ot.length,ot.push(Je),st)},str:function(Je){return ot[Je]}}}function t(je,ot,Je){function st(){var nr=window.innerWidth,We=window.innerHeight;je!==document.body&&(We=je.getBoundingClientRect(),nr=We.right-We.left,We=We.bottom-We.top),It.width=Je*nr,It.height=Je*We,ee(It.style,{width:nr+"px",height:We+"px"})}var It=document.createElement("canvas");ee(It.style,{border:0,margin:0,padding:0,top:0,left:0}),je.appendChild(It),je===document.body&&(It.style.position="absolute",ee(je.style,{margin:0,padding:0}));var Nt;return je!==document.body&&typeof ResizeObserver=="function"?(Nt=new ResizeObserver(function(){setTimeout(st)}),Nt.observe(je)):window.addEventListener("resize",st,!1),st(),{canvas:It,onDestroy:function(){Nt?Nt.disconnect():window.removeEventListener("resize",st),je.removeChild(It)}}}function f(je,ot){function Je(st){try{return je.getContext(st,ot)}catch{return null}}return Je("webgl")||Je("experimental-webgl")||Je("webgl-experimental")}function n(je){return typeof je=="string"?je.split():je}function o(je){return typeof je=="string"?document.querySelector(je):je}function l(je){var ot=je||{},Je,st,It,Nt;je={};var nr=[],We=[],Fe=typeof window>"u"?1:window.devicePixelRatio,bt=!1,kt=function(Rt){},_t=function(){};if(typeof ot=="string"?Je=document.querySelector(ot):typeof ot=="object"&&(typeof ot.nodeName=="string"&&typeof ot.appendChild=="function"&&typeof ot.getBoundingClientRect=="function"?Je=ot:typeof ot.drawArrays=="function"||typeof ot.drawElements=="function"?(Nt=ot,It=Nt.canvas):("gl"in ot?Nt=ot.gl:"canvas"in ot?It=o(ot.canvas):"container"in ot&&(st=o(ot.container)),"attributes"in ot&&(je=ot.attributes),"extensions"in ot&&(nr=n(ot.extensions)),"optionalExtensions"in ot&&(We=n(ot.optionalExtensions)),"onDone"in ot&&(kt=ot.onDone),"profile"in ot&&(bt=!!ot.profile),"pixelRatio"in ot&&(Fe=+ot.pixelRatio))),Je&&(Je.nodeName.toLowerCase()==="canvas"?It=Je:st=Je),!Nt){if(!It){if(Je=t(st||document.body,kt,Fe),!Je)return null;It=Je.canvas,_t=Je.onDestroy}je.premultipliedAlpha===void 0&&(je.premultipliedAlpha=!0),Nt=f(It,je)}return Nt?{gl:Nt,canvas:It,container:st,extensions:nr,optionalExtensions:We,pixelRatio:Fe,profile:bt,onDone:kt,onDestroy:_t}:(_t(),kt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function h(je,ot){function Je(nr){nr=nr.toLowerCase();var We;try{We=st[nr]=je.getExtension(nr)}catch{}return!!We}for(var st={},It=0;It<ot.extensions.length;++It){var Nt=ot.extensions[It];if(!Je(Nt))return ot.onDestroy(),ot.onDone('"'+Nt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ot.optionalExtensions.forEach(Je),{extensions:st,restore:function(){Object.keys(st).forEach(function(nr){if(st[nr]&&!Je(nr))throw Error("(regl): error restoring extension "+nr)})}}}function i(je,ot){for(var Je=Array(je),st=0;st<je;++st)Je[st]=ot(st);return Je}function s(je){var ot,Je;return ot=(65535<je)<<4,je>>>=ot,Je=(255<je)<<3,je>>>=Je,ot|=Je,Je=(15<je)<<2,je>>>=Je,ot|=Je,Je=(3<je)<<1,ot|Je|je>>>Je>>1}function p(){function je(st){e:{for(var It=16;268435456>=It;It*=16)if(st<=It){st=It;break e}st=0}return It=Je[s(st)>>2],0<It.length?It.pop():new ArrayBuffer(st)}function ot(st){Je[s(st.byteLength)>>2].push(st)}var Je=i(8,function(){return[]});return{alloc:je,free:ot,allocType:function(st,It){var Nt=null;switch(st){case 5120:Nt=new Int8Array(je(It),0,It);break;case 5121:Nt=new Uint8Array(je(It),0,It);break;case 5122:Nt=new Int16Array(je(2*It),0,It);break;case 5123:Nt=new Uint16Array(je(2*It),0,It);break;case 5124:Nt=new Int32Array(je(4*It),0,It);break;case 5125:Nt=new Uint32Array(je(4*It),0,It);break;case 5126:Nt=new Float32Array(je(4*It),0,It);break;default:return null}return Nt.length!==It?Nt.subarray(0,It):Nt},freeType:function(st){ot(st.buffer)}}}function d(je){return!!je&&typeof je=="object"&&Array.isArray(je.shape)&&Array.isArray(je.stride)&&typeof je.offset=="number"&&je.shape.length===je.stride.length&&(Array.isArray(je.data)||me(je.data))}function g(je,ot,Je,st,It,Nt){for(var nr=0;nr<ot;++nr)for(var We=je[nr],Fe=0;Fe<Je;++Fe)for(var bt=We[Fe],kt=0;kt<st;++kt)It[Nt++]=bt[kt]}function b(je,ot,Je,st,It){for(var Nt=1,nr=Je+1;nr<ot.length;++nr)Nt*=ot[nr];var We=ot[Je];if(ot.length-Je===4){var Fe=ot[Je+1],bt=ot[Je+2];for(ot=ot[Je+3],nr=0;nr<We;++nr)g(je[nr],Fe,bt,ot,st,It),It+=Nt}else for(nr=0;nr<We;++nr)b(je[nr],ot,Je+1,st,It),It+=Nt}function m(je){return Pe[Object.prototype.toString.call(je)]|0}function x(je,ot){for(var Je=0;Je<ot.length;++Je)je[Je]=ot[Je]}function w(je,ot,Je,st,It,Nt,nr){for(var We=0,Fe=0;Fe<Je;++Fe)for(var bt=0;bt<st;++bt)je[We++]=ot[It*Fe+Nt*bt+nr]}function y(je,ot,Je,st){function It(_t){this.id=Fe++,this.buffer=je.createBuffer(),this.type=_t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Je.profile&&(this.stats={size:0})}function Nt(_t,Rt,Dt){_t.byteLength=Rt.byteLength,je.bufferData(_t.type,Rt,Dt)}function nr(_t,Rt,Dt,Ut,Bt,tr){if(_t.usage=Dt,Array.isArray(Rt)){if(_t.dtype=Ut||5126,0<Rt.length)if(Array.isArray(Rt[0])){Bt=tt(Rt);for(var er=Ut=1;er<Bt.length;++er)Ut*=Bt[er];_t.dimension=Ut,Rt=Qe(Rt,Bt,_t.dtype),Nt(_t,Rt,Dt),tr?_t.persistentData=Rt:W.freeType(Rt)}else typeof Rt[0]=="number"?(_t.dimension=Bt,Bt=W.allocType(_t.dtype,Rt.length),x(Bt,Rt),Nt(_t,Bt,Dt),tr?_t.persistentData=Bt:W.freeType(Bt)):me(Rt[0])&&(_t.dimension=Rt[0].length,_t.dtype=Ut||m(Rt[0])||5126,Rt=Qe(Rt,[Rt.length,Rt[0].length],_t.dtype),Nt(_t,Rt,Dt),tr?_t.persistentData=Rt:W.freeType(Rt))}else if(me(Rt))_t.dtype=Ut||m(Rt),_t.dimension=Bt,Nt(_t,Rt,Dt),tr&&(_t.persistentData=new Uint8Array(new Uint8Array(Rt.buffer)));else if(d(Rt)){Bt=Rt.shape;var Zt=Rt.stride,er=Rt.offset,_r=0,Gr=0,Or=0,Fr=0;Bt.length===1?(_r=Bt[0],Gr=1,Or=Zt[0],Fr=0):Bt.length===2&&(_r=Bt[0],Gr=Bt[1],Or=Zt[0],Fr=Zt[1]),_t.dtype=Ut||m(Rt.data)||5126,_t.dimension=Gr,Bt=W.allocType(_t.dtype,_r*Gr),w(Bt,Rt.data,_r,Gr,Or,Fr,er),Nt(_t,Bt,Dt),tr?_t.persistentData=Bt:W.freeType(Bt)}else Rt instanceof ArrayBuffer&&(_t.dtype=5121,_t.dimension=Bt,Nt(_t,Rt,Dt),tr&&(_t.persistentData=new Uint8Array(new Uint8Array(Rt))))}function We(_t){ot.bufferCount--,st(_t),je.deleteBuffer(_t.buffer),_t.buffer=null,delete bt[_t.id]}var Fe=0,bt={};It.prototype.bind=function(){je.bindBuffer(this.type,this.buffer)},It.prototype.destroy=function(){We(this)};var kt=[];return Je.profile&&(ot.getTotalBufferSize=function(){var _t=0;return Object.keys(bt).forEach(function(Rt){_t+=bt[Rt].stats.size}),_t}),{create:function(_t,Rt,Dt,Ut){function Bt(er){var Zt=35044,_r=null,Gr=0,Or=0,Fr=1;return Array.isArray(er)||me(er)||d(er)||er instanceof ArrayBuffer?_r=er:typeof er=="number"?Gr=er|0:er&&("data"in er&&(_r=er.data),"usage"in er&&(Zt=ze[er.usage]),"type"in er&&(Or=Ge[er.type]),"dimension"in er&&(Fr=er.dimension|0),"length"in er&&(Gr=er.length|0)),tr.bind(),_r?nr(tr,_r,Zt,Or,Fr,Ut):(Gr&&je.bufferData(tr.type,Gr,Zt),tr.dtype=Or||5121,tr.usage=Zt,tr.dimension=Fr,tr.byteLength=Gr),Je.profile&&(tr.stats.size=tr.byteLength*Ce[tr.dtype]),Bt}ot.bufferCount++;var tr=new It(Rt);return bt[tr.id]=tr,Dt||Bt(_t),Bt._reglType="buffer",Bt._buffer=tr,Bt.subdata=function(er,Zt){var _r=(Zt||0)|0,Gr;if(tr.bind(),me(er)||er instanceof ArrayBuffer)je.bufferSubData(tr.type,_r,er);else if(Array.isArray(er)){if(0<er.length)if(typeof er[0]=="number"){var Or=W.allocType(tr.dtype,er.length);x(Or,er),je.bufferSubData(tr.type,_r,Or),W.freeType(Or)}else(Array.isArray(er[0])||me(er[0]))&&(Gr=tt(er),Or=Qe(er,Gr,tr.dtype),je.bufferSubData(tr.type,_r,Or),W.freeType(Or))}else if(d(er)){Gr=er.shape;var Fr=er.stride,Mn=Or=0,Wn=0,Tn=0;Gr.length===1?(Or=Gr[0],Mn=1,Wn=Fr[0],Tn=0):Gr.length===2&&(Or=Gr[0],Mn=Gr[1],Wn=Fr[0],Tn=Fr[1]),Gr=Array.isArray(er.data)?tr.dtype:m(er.data),Gr=W.allocType(Gr,Or*Mn),w(Gr,er.data,Or,Mn,Wn,Tn,er.offset),je.bufferSubData(tr.type,_r,Gr),W.freeType(Gr)}return Bt},Je.profile&&(Bt.stats=tr.stats),Bt.destroy=function(){We(tr)},Bt},createStream:function(_t,Rt){var Dt=kt.pop();return Dt||(Dt=new It(_t)),Dt.bind(),nr(Dt,Rt,35040,0,1,!1),Dt},destroyStream:function(_t){kt.push(_t)},clear:function(){be(bt).forEach(We),kt.forEach(We)},getBuffer:function(_t){return _t&&_t._buffer instanceof It?_t._buffer:null},restore:function(){be(bt).forEach(function(_t){_t.buffer=je.createBuffer(),je.bindBuffer(_t.type,_t.buffer),je.bufferData(_t.type,_t.persistentData||_t.byteLength,_t.usage)})},_initBuffer:nr}}function T(je,ot,Je,st){function It(_t){this.id=Fe++,We[this.id]=this,this.buffer=_t,this.primType=4,this.type=this.vertCount=0}function Nt(_t,Rt,Dt,Ut,Bt,tr,er){_t.buffer.bind();var Zt;if(Rt?((Zt=er)||me(Rt)&&(!d(Rt)||me(Rt.data))||(Zt=ot.oes_element_index_uint?5125:5123),Je._initBuffer(_t.buffer,Rt,Dt,Zt,3)):(je.bufferData(34963,tr,Dt),_t.buffer.dtype=Zt||5121,_t.buffer.usage=Dt,_t.buffer.dimension=3,_t.buffer.byteLength=tr),Zt=er,!er){switch(_t.buffer.dtype){case 5121:case 5120:Zt=5121;break;case 5123:case 5122:Zt=5123;break;case 5125:case 5124:Zt=5125}_t.buffer.dtype=Zt}_t.type=Zt,Rt=Bt,0>Rt&&(Rt=_t.buffer.byteLength,Zt===5123?Rt>>=1:Zt===5125&&(Rt>>=2)),_t.vertCount=Rt,Rt=Ut,0>Ut&&(Rt=4,Ut=_t.buffer.dimension,Ut===1&&(Rt=0),Ut===2&&(Rt=1),Ut===3&&(Rt=4)),_t.primType=Rt}function nr(_t){st.elementsCount--,delete We[_t.id],_t.buffer.destroy(),_t.buffer=null}var We={},Fe=0,bt={uint8:5121,uint16:5123};ot.oes_element_index_uint&&(bt.uint32=5125),It.prototype.bind=function(){this.buffer.bind()};var kt=[];return{create:function(_t,Rt){function Dt(tr){if(tr)if(typeof tr=="number")Ut(tr),Bt.primType=4,Bt.vertCount=tr|0,Bt.type=5121;else{var er=null,Zt=35044,_r=-1,Gr=-1,Or=0,Fr=0;Array.isArray(tr)||me(tr)||d(tr)?er=tr:("data"in tr&&(er=tr.data),"usage"in tr&&(Zt=ze[tr.usage]),"primitive"in tr&&(_r=Ae[tr.primitive]),"count"in tr&&(Gr=tr.count|0),"type"in tr&&(Fr=bt[tr.type]),"length"in tr?Or=tr.length|0:(Or=Gr,Fr===5123||Fr===5122?Or*=2:(Fr===5125||Fr===5124)&&(Or*=4))),Nt(Bt,er,Zt,_r,Gr,Or,Fr)}else Ut(),Bt.primType=4,Bt.vertCount=0,Bt.type=5121;return Dt}var Ut=Je.create(null,34963,!0),Bt=new It(Ut._buffer);return st.elementsCount++,Dt(_t),Dt._reglType="elements",Dt._elements=Bt,Dt.subdata=function(tr,er){return Ut.subdata(tr,er),Dt},Dt.destroy=function(){nr(Bt)},Dt},createStream:function(_t){var Rt=kt.pop();return Rt||(Rt=new It(Je.create(null,34963,!0,!1)._buffer)),Nt(Rt,_t,35040,-1,-1,0,0),Rt},destroyStream:function(_t){kt.push(_t)},getElements:function(_t){return typeof _t=="function"&&_t._elements instanceof It?_t._elements:null},clear:function(){be(We).forEach(nr)}}}function M(je){for(var ot=W.allocType(5123,je.length),Je=0;Je<je.length;++Je)if(isNaN(je[Je]))ot[Je]=65535;else if(je[Je]===1/0)ot[Je]=31744;else if(je[Je]===-1/0)ot[Je]=64512;else{Be[0]=je[Je];var Nt=qe[0],st=Nt>>>31<<15,It=(Nt<<1>>>24)-127,Nt=Nt>>13&1023;ot[Je]=-24>It?st:-14>It?st+(Nt+1024>>-14-It):15<It?st+31744:st+(It+15<<10)+Nt}return ot}function P(je){return Array.isArray(je)||me(je)}function L(je){return"[object "+je+"]"}function I(je){return Array.isArray(je)&&(je.length===0||typeof je[0]=="number")}function E(je){return!!(Array.isArray(je)&&je.length!==0&&P(je[0]))}function k(je){return Object.prototype.toString.call(je)}function C(je){if(!je)return!1;var ot=k(je);return 0<=rr.indexOf(ot)?!0:I(je)||E(je)||d(je)}function D(je,ot){je.type===36193?(je.data=M(ot),W.freeType(ot)):je.data=ot}function F(je,ot,Je,st,It,Nt){if(je=typeof Ct[je]<"u"?Ct[je]:Ne[je]*Lt[ot],Nt&&(je*=6),It){for(st=0;1<=Je;)st+=je*Je*Je,Je/=2;return st}return je*Je*st}function N(je,ot,Je,st,It,Nt,nr){function We(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Fe(dr,nn){dr.internalformat=nn.internalformat,dr.format=nn.format,dr.type=nn.type,dr.compressed=nn.compressed,dr.premultiplyAlpha=nn.premultiplyAlpha,dr.flipY=nn.flipY,dr.unpackAlignment=nn.unpackAlignment,dr.colorSpace=nn.colorSpace,dr.width=nn.width,dr.height=nn.height,dr.channels=nn.channels}function bt(dr,nn){if(typeof nn=="object"&&nn){"premultiplyAlpha"in nn&&(dr.premultiplyAlpha=nn.premultiplyAlpha),"flipY"in nn&&(dr.flipY=nn.flipY),"alignment"in nn&&(dr.unpackAlignment=nn.alignment),"colorSpace"in nn&&(dr.colorSpace=en[nn.colorSpace]),"type"in nn&&(dr.type=_n[nn.type]);var Jr=dr.width,Pn=dr.height,Gn=dr.channels,ka=!1;"shape"in nn?(Jr=nn.shape[0],Pn=nn.shape[1],nn.shape.length===3&&(Gn=nn.shape[2],ka=!0)):("radius"in nn&&(Jr=Pn=nn.radius),"width"in nn&&(Jr=nn.width),"height"in nn&&(Pn=nn.height),"channels"in nn&&(Gn=nn.channels,ka=!0)),dr.width=Jr|0,dr.height=Pn|0,dr.channels=Gn|0,Jr=!1,"format"in nn&&(Jr=nn.format,Pn=dr.internalformat=kn[Jr],dr.format=Hr[Pn],Jr in _n&&!("type"in nn)&&(dr.type=_n[Jr]),Jr in ln&&(dr.compressed=!0),Jr=!0),!ka&&Jr?dr.channels=Ne[dr.format]:ka&&!Jr&&dr.channels!==At[dr.format]&&(dr.format=dr.internalformat=At[dr.channels])}}function kt(dr){je.pixelStorei(37440,dr.flipY),je.pixelStorei(37441,dr.premultiplyAlpha),je.pixelStorei(37443,dr.colorSpace),je.pixelStorei(3317,dr.unpackAlignment)}function _t(){We.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Rt(dr,nn){var Jr=null;if(C(nn)?Jr=nn:nn&&(bt(dr,nn),"x"in nn&&(dr.xOffset=nn.x|0),"y"in nn&&(dr.yOffset=nn.y|0),C(nn.data)&&(Jr=nn.data)),nn.copy){var Pn=It.viewportWidth,Gn=It.viewportHeight;dr.width=dr.width||Pn-dr.xOffset,dr.height=dr.height||Gn-dr.yOffset,dr.needsCopy=!0}else if(!Jr)dr.width=dr.width||1,dr.height=dr.height||1,dr.channels=dr.channels||4;else if(me(Jr))dr.channels=dr.channels||4,dr.data=Jr,"type"in nn||dr.type!==5121||(dr.type=Pe[Object.prototype.toString.call(Jr)]|0);else if(I(Jr)){switch(dr.channels=dr.channels||4,Pn=Jr,Gn=Pn.length,dr.type){case 5121:case 5123:case 5125:case 5126:Gn=W.allocType(dr.type,Gn),Gn.set(Pn),dr.data=Gn;break;case 36193:dr.data=M(Pn)}dr.alignment=1,dr.needsFree=!0}else if(d(Jr)){Pn=Jr.data,Array.isArray(Pn)||dr.type!==5121||(dr.type=Pe[Object.prototype.toString.call(Pn)]|0);var Gn=Jr.shape,ka=Jr.stride,ca,Ta,Aa,Ya;Gn.length===3?(Aa=Gn[2],Ya=ka[2]):Ya=Aa=1,ca=Gn[0],Ta=Gn[1],Gn=ka[0],ka=ka[1],dr.alignment=1,dr.width=ca,dr.height=Ta,dr.channels=Aa,dr.format=dr.internalformat=At[Aa],dr.needsFree=!0,ca=Ya,Jr=Jr.offset,Aa=dr.width,Ya=dr.height,Ta=dr.channels;for(var Xt=W.allocType(dr.type===36193?5126:dr.type,Aa*Ya*Ta),yr=0,Yr=0;Yr<Ya;++Yr)for(var un=0;un<Aa;++un)for(var qr=0;qr<Ta;++qr)Xt[yr++]=Pn[Gn*un+ka*Yr+ca*qr+Jr];D(dr,Xt)}else if(k(Jr)===ct||k(Jr)===Mt||k(Jr)===Wt)k(Jr)===ct||k(Jr)===Mt?dr.element=Jr:dr.element=Jr.canvas,dr.width=dr.element.width,dr.height=dr.element.height,dr.channels=4;else if(k(Jr)===qt)dr.element=Jr,dr.width=Jr.width,dr.height=Jr.height,dr.channels=4;else if(k(Jr)===zt)dr.element=Jr,dr.width=Jr.naturalWidth,dr.height=Jr.naturalHeight,dr.channels=4;else if(k(Jr)===$t)dr.element=Jr,dr.width=Jr.videoWidth,dr.height=Jr.videoHeight,dr.channels=4;else if(E(Jr)){for(Pn=dr.width||Jr[0].length,Gn=dr.height||Jr.length,ka=dr.channels,ka=P(Jr[0][0])?ka||Jr[0][0].length:ka||1,ca=Me.shape(Jr),Aa=1,Ya=0;Ya<ca.length;++Ya)Aa*=ca[Ya];Aa=W.allocType(dr.type===36193?5126:dr.type,Aa),Me.flatten(Jr,ca,"",Aa),D(dr,Aa),dr.alignment=1,dr.width=Pn,dr.height=Gn,dr.channels=ka,dr.format=dr.internalformat=At[ka],dr.needsFree=!0}}function Dt(dr,nn,Jr,Pn,Gn){var ka=dr.element,ca=dr.data,Ta=dr.internalformat,Aa=dr.format,Ya=dr.type,Xt=dr.width,yr=dr.height;kt(dr),ka?je.texSubImage2D(nn,Gn,Jr,Pn,Aa,Ya,ka):dr.compressed?je.compressedTexSubImage2D(nn,Gn,Jr,Pn,Ta,Xt,yr,ca):dr.needsCopy?(st(),je.copyTexSubImage2D(nn,Gn,Jr,Pn,dr.xOffset,dr.yOffset,Xt,yr)):je.texSubImage2D(nn,Gn,Jr,Pn,Xt,yr,Aa,Ya,ca)}function Ut(){return En.pop()||new _t}function Bt(dr){dr.needsFree&&W.freeType(dr.data),_t.call(dr),En.push(dr)}function tr(){We.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function er(dr,nn,Jr){var Pn=dr.images[0]=Ut();dr.mipmask=1,Pn.width=dr.width=nn,Pn.height=dr.height=Jr,Pn.channels=dr.channels=4}function Zt(dr,nn){var Jr=null;if(C(nn))Jr=dr.images[0]=Ut(),Fe(Jr,dr),Rt(Jr,nn),dr.mipmask=1;else if(bt(dr,nn),Array.isArray(nn.mipmap))for(var Pn=nn.mipmap,Gn=0;Gn<Pn.length;++Gn)Jr=dr.images[Gn]=Ut(),Fe(Jr,dr),Jr.width>>=Gn,Jr.height>>=Gn,Rt(Jr,Pn[Gn]),dr.mipmask|=1<<Gn;else Jr=dr.images[0]=Ut(),Fe(Jr,dr),Rt(Jr,nn),dr.mipmask=1;Fe(dr,dr.images[0])}function _r(dr,nn){for(var Jr=dr.images,Pn=0;Pn<Jr.length&&Jr[Pn];++Pn){var Gn=Jr[Pn],ka=nn,ca=Pn,Ta=Gn.element,Aa=Gn.data,Ya=Gn.internalformat,Xt=Gn.format,yr=Gn.type,Yr=Gn.width,un=Gn.height;kt(Gn),Ta?je.texImage2D(ka,ca,Xt,Xt,yr,Ta):Gn.compressed?je.compressedTexImage2D(ka,ca,Ya,Yr,un,0,Aa):Gn.needsCopy?(st(),je.copyTexImage2D(ka,ca,Xt,Gn.xOffset,Gn.yOffset,Yr,un,0)):je.texImage2D(ka,ca,Xt,Yr,un,0,Xt,yr,Aa||null)}}function Gr(){var dr=ta.pop()||new tr;We.call(dr);for(var nn=dr.mipmask=0;16>nn;++nn)dr.images[nn]=null;return dr}function Or(dr){for(var nn=dr.images,Jr=0;Jr<nn.length;++Jr)nn[Jr]&&Bt(nn[Jr]),nn[Jr]=null;ta.push(dr)}function Fr(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Mn(dr,nn){"min"in nn&&(dr.minFilter=xn[nn.min],0<=Tt.indexOf(dr.minFilter)&&!("faces"in nn)&&(dr.genMipmaps=!0)),"mag"in nn&&(dr.magFilter=pn[nn.mag]);var Jr=dr.wrapS,Pn=dr.wrapT;if("wrap"in nn){var Gn=nn.wrap;typeof Gn=="string"?Jr=Pn=Ln[Gn]:Array.isArray(Gn)&&(Jr=Ln[Gn[0]],Pn=Ln[Gn[1]])}else"wrapS"in nn&&(Jr=Ln[nn.wrapS]),"wrapT"in nn&&(Pn=Ln[nn.wrapT]);if(dr.wrapS=Jr,dr.wrapT=Pn,"anisotropic"in nn&&(dr.anisotropic=nn.anisotropic),"mipmap"in nn){switch(Jr=!1,typeof nn.mipmap){case"string":dr.mipmapHint=Pr[nn.mipmap],Jr=dr.genMipmaps=!0;break;case"boolean":Jr=dr.genMipmaps=nn.mipmap;break;case"object":dr.genMipmaps=!1,Jr=!0}!Jr||"min"in nn||(dr.minFilter=9984)}}function Wn(dr,nn){je.texParameteri(nn,10241,dr.minFilter),je.texParameteri(nn,10240,dr.magFilter),je.texParameteri(nn,10242,dr.wrapS),je.texParameteri(nn,10243,dr.wrapT),ot.ext_texture_filter_anisotropic&&je.texParameteri(nn,34046,dr.anisotropic),dr.genMipmaps&&(je.hint(33170,dr.mipmapHint),je.generateMipmap(nn))}function Tn(dr){We.call(this),this.mipmask=0,this.internalformat=6408,this.id=ea++,this.refCount=1,this.target=dr,this.texture=je.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Fr,nr.profile&&(this.stats={size:0})}function Nn(dr){je.activeTexture(33984),je.bindTexture(dr.target,dr.texture)}function jn(){var dr=qa[0];dr?je.bindTexture(dr.target,dr.texture):je.bindTexture(3553,null)}function Nr(dr){var nn=dr.texture,Jr=dr.unit,Pn=dr.target;0<=Jr&&(je.activeTexture(33984+Jr),je.bindTexture(Pn,null),qa[Jr]=null),je.deleteTexture(nn),dr.texture=null,dr.params=null,dr.pixels=null,dr.refCount=0,delete ba[dr.id],Nt.textureCount--}var Pr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ln={repeat:10497,clamp:33071,mirror:33648},pn={nearest:9728,linear:9729},xn=ee({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},pn),en={none:0,browser:37444},_n={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},kn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ln={};ot.ext_srgb&&(kn.srgb=35904,kn.srgba=35906),ot.oes_texture_float&&(_n.float32=_n.float=5126),ot.oes_texture_half_float&&(_n.float16=_n["half float"]=36193),ot.webgl_depth_texture&&(ee(kn,{depth:6402,"depth stencil":34041}),ee(_n,{uint16:5123,uint32:5125,"depth stencil":34042})),ot.webgl_compressed_texture_s3tc&&ee(ln,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),ot.webgl_compressed_texture_atc&&ee(ln,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),ot.webgl_compressed_texture_pvrtc&&ee(ln,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),ot.webgl_compressed_texture_etc1&&(ln["rgb etc1"]=36196);var vt=Array.prototype.slice.call(je.getParameter(34467));Object.keys(ln).forEach(function(dr){var nn=ln[dr];0<=vt.indexOf(nn)&&(kn[dr]=nn)});var Gt=Object.keys(kn);Je.textureFormats=Gt;var fr=[];Object.keys(kn).forEach(function(dr){fr[kn[dr]]=dr});var Cr=[];Object.keys(_n).forEach(function(dr){Cr[_n[dr]]=dr});var Wr=[];Object.keys(pn).forEach(function(dr){Wr[pn[dr]]=dr});var Vr=[];Object.keys(xn).forEach(function(dr){Vr[xn[dr]]=dr});var Qr=[];Object.keys(Ln).forEach(function(dr){Qr[Ln[dr]]=dr});var Hr=Gt.reduce(function(dr,nn){var Jr=kn[nn];return Jr===6409||Jr===6406||Jr===6409||Jr===6410||Jr===6402||Jr===34041||ot.ext_srgb&&(Jr===35904||Jr===35906)?dr[Jr]=Jr:Jr===32855||0<=nn.indexOf("rgba")?dr[Jr]=6408:dr[Jr]=6407,dr},{}),En=[],ta=[],ea=0,ba={},Wa=Je.maxTextureUnits,qa=Array(Wa).map(function(){return null});return ee(Tn.prototype,{bind:function(){this.bindCount+=1;var dr=this.unit;if(0>dr){for(var nn=0;nn<Wa;++nn){var Jr=qa[nn];if(Jr){if(0<Jr.bindCount)continue;Jr.unit=-1}qa[nn]=this,dr=nn;break}nr.profile&&Nt.maxTextureUnits<dr+1&&(Nt.maxTextureUnits=dr+1),this.unit=dr,je.activeTexture(33984+dr),je.bindTexture(this.target,this.texture)}return dr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Nr(this)}}),nr.profile&&(Nt.getTotalTextureSize=function(){var dr=0;return Object.keys(ba).forEach(function(nn){dr+=ba[nn].stats.size}),dr}),{create2D:function(dr,nn){function Jr(Gn,ka){var ca=Pn.texInfo;Fr.call(ca);var Ta=Gr();return typeof Gn=="number"?typeof ka=="number"?er(Ta,Gn|0,ka|0):er(Ta,Gn|0,Gn|0):Gn?(Mn(ca,Gn),Zt(Ta,Gn)):er(Ta,1,1),ca.genMipmaps&&(Ta.mipmask=(Ta.width<<1)-1),Pn.mipmask=Ta.mipmask,Fe(Pn,Ta),Pn.internalformat=Ta.internalformat,Jr.width=Ta.width,Jr.height=Ta.height,Nn(Pn),_r(Ta,3553),Wn(ca,3553),jn(),Or(Ta),nr.profile&&(Pn.stats.size=F(Pn.internalformat,Pn.type,Ta.width,Ta.height,ca.genMipmaps,!1)),Jr.format=fr[Pn.internalformat],Jr.type=Cr[Pn.type],Jr.mag=Wr[ca.magFilter],Jr.min=Vr[ca.minFilter],Jr.wrapS=Qr[ca.wrapS],Jr.wrapT=Qr[ca.wrapT],Jr}var Pn=new Tn(3553);return ba[Pn.id]=Pn,Nt.textureCount++,Jr(dr,nn),Jr.subimage=function(Gn,ka,ca,Ta){ka|=0,ca|=0,Ta|=0;var Aa=Ut();return Fe(Aa,Pn),Aa.width=0,Aa.height=0,Rt(Aa,Gn),Aa.width=Aa.width||(Pn.width>>Ta)-ka,Aa.height=Aa.height||(Pn.height>>Ta)-ca,Nn(Pn),Dt(Aa,3553,ka,ca,Ta),jn(),Bt(Aa),Jr},Jr.resize=function(Gn,ka){var ca=Gn|0,Ta=ka|0||ca;if(ca===Pn.width&&Ta===Pn.height)return Jr;Jr.width=Pn.width=ca,Jr.height=Pn.height=Ta,Nn(Pn);for(var Aa=0;Pn.mipmask>>Aa;++Aa){var Ya=ca>>Aa,Xt=Ta>>Aa;if(!Ya||!Xt)break;je.texImage2D(3553,Aa,Pn.format,Ya,Xt,0,Pn.format,Pn.type,null)}return jn(),nr.profile&&(Pn.stats.size=F(Pn.internalformat,Pn.type,ca,Ta,!1,!1)),Jr},Jr._reglType="texture2d",Jr._texture=Pn,nr.profile&&(Jr.stats=Pn.stats),Jr.destroy=function(){Pn.decRef()},Jr},createCube:function(dr,nn,Jr,Pn,Gn,ka){function ca(Ya,Xt,yr,Yr,un,qr){var rn,hn=Ta.texInfo;for(Fr.call(hn),rn=0;6>rn;++rn)Aa[rn]=Gr();if(typeof Ya=="number"||!Ya)for(Ya=Ya|0||1,rn=0;6>rn;++rn)er(Aa[rn],Ya,Ya);else if(typeof Ya=="object")if(Xt)Zt(Aa[0],Ya),Zt(Aa[1],Xt),Zt(Aa[2],yr),Zt(Aa[3],Yr),Zt(Aa[4],un),Zt(Aa[5],qr);else if(Mn(hn,Ya),bt(Ta,Ya),"faces"in Ya)for(Ya=Ya.faces,rn=0;6>rn;++rn)Fe(Aa[rn],Ta),Zt(Aa[rn],Ya[rn]);else for(rn=0;6>rn;++rn)Zt(Aa[rn],Ya);for(Fe(Ta,Aa[0]),Ta.mipmask=hn.genMipmaps?(Aa[0].width<<1)-1:Aa[0].mipmask,Ta.internalformat=Aa[0].internalformat,ca.width=Aa[0].width,ca.height=Aa[0].height,Nn(Ta),rn=0;6>rn;++rn)_r(Aa[rn],34069+rn);for(Wn(hn,34067),jn(),nr.profile&&(Ta.stats.size=F(Ta.internalformat,Ta.type,ca.width,ca.height,hn.genMipmaps,!0)),ca.format=fr[Ta.internalformat],ca.type=Cr[Ta.type],ca.mag=Wr[hn.magFilter],ca.min=Vr[hn.minFilter],ca.wrapS=Qr[hn.wrapS],ca.wrapT=Qr[hn.wrapT],rn=0;6>rn;++rn)Or(Aa[rn]);return ca}var Ta=new Tn(34067);ba[Ta.id]=Ta,Nt.cubeCount++;var Aa=Array(6);return ca(dr,nn,Jr,Pn,Gn,ka),ca.subimage=function(Ya,Xt,yr,Yr,un){yr|=0,Yr|=0,un|=0;var qr=Ut();return Fe(qr,Ta),qr.width=0,qr.height=0,Rt(qr,Xt),qr.width=qr.width||(Ta.width>>un)-yr,qr.height=qr.height||(Ta.height>>un)-Yr,Nn(Ta),Dt(qr,34069+Ya,yr,Yr,un),jn(),Bt(qr),ca},ca.resize=function(Ya){if(Ya|=0,Ya!==Ta.width){ca.width=Ta.width=Ya,ca.height=Ta.height=Ya,Nn(Ta);for(var Xt=0;6>Xt;++Xt)for(var yr=0;Ta.mipmask>>yr;++yr)je.texImage2D(34069+Xt,yr,Ta.format,Ya>>yr,Ya>>yr,0,Ta.format,Ta.type,null);return jn(),nr.profile&&(Ta.stats.size=F(Ta.internalformat,Ta.type,ca.width,ca.height,!1,!0)),ca}},ca._reglType="textureCube",ca._texture=Ta,nr.profile&&(ca.stats=Ta.stats),ca.destroy=function(){Ta.decRef()},ca},clear:function(){for(var dr=0;dr<Wa;++dr)je.activeTexture(33984+dr),je.bindTexture(3553,null),qa[dr]=null;be(ba).forEach(Nr),Nt.cubeCount=0,Nt.textureCount=0},getTexture:function(dr){return null},restore:function(){for(var dr=0;dr<Wa;++dr){var nn=qa[dr];nn&&(nn.bindCount=0,nn.unit=-1,qa[dr]=null)}be(ba).forEach(function(Jr){Jr.texture=je.createTexture(),je.bindTexture(Jr.target,Jr.texture);for(var Pn=0;32>Pn;++Pn)if((Jr.mipmask&1<<Pn)!==0)if(Jr.target===3553)je.texImage2D(3553,Pn,Jr.internalformat,Jr.width>>Pn,Jr.height>>Pn,0,Jr.internalformat,Jr.type,null);else for(var Gn=0;6>Gn;++Gn)je.texImage2D(34069+Gn,Pn,Jr.internalformat,Jr.width>>Pn,Jr.height>>Pn,0,Jr.internalformat,Jr.type,null);Wn(Jr.texInfo,Jr.target)})}}}function G(je,ot,Je,st,It,Nt){function nr(Tn,Nn,jn){this.target=Tn,this.texture=Nn,this.renderbuffer=jn;var Nr=Tn=0;Nn?(Tn=Nn.width,Nr=Nn.height):jn&&(Tn=jn.width,Nr=jn.height),this.width=Tn,this.height=Nr}function We(Tn){Tn&&(Tn.texture&&Tn.texture._texture.decRef(),Tn.renderbuffer&&Tn.renderbuffer._renderbuffer.decRef())}function Fe(Tn,Nn,jn){Tn&&(Tn.texture?Tn.texture._texture.refCount+=1:Tn.renderbuffer._renderbuffer.refCount+=1)}function bt(Tn,Nn){Nn&&(Nn.texture?je.framebufferTexture2D(36160,Tn,Nn.target,Nn.texture._texture.texture,0):je.framebufferRenderbuffer(36160,Tn,36161,Nn.renderbuffer._renderbuffer.renderbuffer))}function kt(Tn){var Nn=3553,jn=null,Nr=null,Pr=Tn;return typeof Tn=="object"&&(Pr=Tn.data,"target"in Tn&&(Nn=Tn.target|0)),Tn=Pr._reglType,Tn==="texture2d"||Tn==="textureCube"?jn=Pr:Tn==="renderbuffer"&&(Nr=Pr,Nn=36161),new nr(Nn,jn,Nr)}function _t(Tn,Nn,jn,Nr,Pr){return jn?(Tn=st.create2D({width:Tn,height:Nn,format:Nr,type:Pr}),Tn._texture.refCount=0,new nr(3553,Tn,null)):(Tn=It.create({width:Tn,height:Nn,format:Nr}),Tn._renderbuffer.refCount=0,new nr(36161,null,Tn))}function Rt(Tn){return Tn&&(Tn.texture||Tn.renderbuffer)}function Dt(Tn,Nn,jn){Tn&&(Tn.texture?Tn.texture.resize(Nn,jn):Tn.renderbuffer&&Tn.renderbuffer.resize(Nn,jn),Tn.width=Nn,Tn.height=jn)}function Ut(){this.id=Mn++,Wn[this.id]=this,this.framebuffer=je.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Bt(Tn){Tn.colorAttachments.forEach(We),We(Tn.depthAttachment),We(Tn.stencilAttachment),We(Tn.depthStencilAttachment)}function tr(Tn){je.deleteFramebuffer(Tn.framebuffer),Tn.framebuffer=null,Nt.framebufferCount--,delete Wn[Tn.id]}function er(Tn){var Nn;je.bindFramebuffer(36160,Tn.framebuffer);var jn=Tn.colorAttachments;for(Nn=0;Nn<jn.length;++Nn)bt(36064+Nn,jn[Nn]);for(Nn=jn.length;Nn<Je.maxColorAttachments;++Nn)je.framebufferTexture2D(36160,36064+Nn,3553,null,0);je.framebufferTexture2D(36160,33306,3553,null,0),je.framebufferTexture2D(36160,36096,3553,null,0),je.framebufferTexture2D(36160,36128,3553,null,0),bt(36096,Tn.depthAttachment),bt(36128,Tn.stencilAttachment),bt(33306,Tn.depthStencilAttachment),je.checkFramebufferStatus(36160),je.isContextLost(),je.bindFramebuffer(36160,_r.next?_r.next.framebuffer:null),_r.cur=_r.next,je.getError()}function Zt(Tn,Nn){function jn(Pr,Ln){var pn,xn=0,en=0,_n=!0,kn=!0;pn=null;var ln=!0,vt="rgba",Gt="uint8",fr=1,Cr=null,Wr=null,Vr=null,Qr=!1;typeof Pr=="number"?(xn=Pr|0,en=Ln|0||xn):Pr?("shape"in Pr?(en=Pr.shape,xn=en[0],en=en[1]):("radius"in Pr&&(xn=en=Pr.radius),"width"in Pr&&(xn=Pr.width),"height"in Pr&&(en=Pr.height)),("color"in Pr||"colors"in Pr)&&(pn=Pr.color||Pr.colors),pn||("colorCount"in Pr&&(fr=Pr.colorCount|0),"colorTexture"in Pr&&(ln=!!Pr.colorTexture,vt="rgba4"),"colorType"in Pr&&(Gt=Pr.colorType,!ln)&&(Gt==="half float"||Gt==="float16"?vt="rgba16f":(Gt==="float"||Gt==="float32")&&(vt="rgba32f")),"colorFormat"in Pr&&(vt=Pr.colorFormat,0<=Gr.indexOf(vt)?ln=!0:0<=Or.indexOf(vt)&&(ln=!1))),("depthTexture"in Pr||"depthStencilTexture"in Pr)&&(Qr=!(!Pr.depthTexture&&!Pr.depthStencilTexture)),"depth"in Pr&&(typeof Pr.depth=="boolean"?_n=Pr.depth:(Cr=Pr.depth,kn=!1)),"stencil"in Pr&&(typeof Pr.stencil=="boolean"?kn=Pr.stencil:(Wr=Pr.stencil,_n=!1)),"depthStencil"in Pr&&(typeof Pr.depthStencil=="boolean"?_n=kn=Pr.depthStencil:(Vr=Pr.depthStencil,kn=_n=!1))):xn=en=1;var Hr=null,En=null,ta=null,ea=null;if(Array.isArray(pn))Hr=pn.map(kt);else if(pn)Hr=[kt(pn)];else for(Hr=Array(fr),pn=0;pn<fr;++pn)Hr[pn]=_t(xn,en,ln,vt,Gt);for(xn=xn||Hr[0].width,en=en||Hr[0].height,Cr?En=kt(Cr):_n&&!kn&&(En=_t(xn,en,Qr,"depth","uint32")),Wr?ta=kt(Wr):kn&&!_n&&(ta=_t(xn,en,!1,"stencil","uint8")),Vr?ea=kt(Vr):!Cr&&!Wr&&kn&&_n&&(ea=_t(xn,en,Qr,"depth stencil","depth stencil")),_n=null,pn=0;pn<Hr.length;++pn)Fe(Hr[pn]),Hr[pn]&&Hr[pn].texture&&(kn=Te[Hr[pn].texture._texture.format]*Le[Hr[pn].texture._texture.type],_n===null&&(_n=kn));return Fe(En),Fe(ta),Fe(ea),Bt(Nr),Nr.width=xn,Nr.height=en,Nr.colorAttachments=Hr,Nr.depthAttachment=En,Nr.stencilAttachment=ta,Nr.depthStencilAttachment=ea,jn.color=Hr.map(Rt),jn.depth=Rt(En),jn.stencil=Rt(ta),jn.depthStencil=Rt(ea),jn.width=Nr.width,jn.height=Nr.height,er(Nr),jn}var Nr=new Ut;return Nt.framebufferCount++,jn(Tn,Nn),ee(jn,{resize:function(Pr,Ln){var pn=Math.max(Pr|0,1),xn=Math.max(Ln|0||pn,1);if(pn===Nr.width&&xn===Nr.height)return jn;for(var en=Nr.colorAttachments,_n=0;_n<en.length;++_n)Dt(en[_n],pn,xn);return Dt(Nr.depthAttachment,pn,xn),Dt(Nr.stencilAttachment,pn,xn),Dt(Nr.depthStencilAttachment,pn,xn),Nr.width=jn.width=pn,Nr.height=jn.height=xn,er(Nr),jn},_reglType:"framebuffer",_framebuffer:Nr,destroy:function(){tr(Nr),Bt(Nr)},use:function(Pr){_r.setFBO({framebuffer:jn},Pr)}})}var _r={cur:null,next:null,dirty:!1,setFBO:null},Gr=["rgba"],Or=["rgba4","rgb565","rgb5 a1"];ot.ext_srgb&&Or.push("srgba"),ot.ext_color_buffer_half_float&&Or.push("rgba16f","rgb16f"),ot.webgl_color_buffer_float&&Or.push("rgba32f");var Fr=["uint8"];ot.oes_texture_half_float&&Fr.push("half float","float16"),ot.oes_texture_float&&Fr.push("float","float32");var Mn=0,Wn={};return ee(_r,{getFramebuffer:function(Tn){return typeof Tn=="function"&&Tn._reglType==="framebuffer"&&(Tn=Tn._framebuffer,Tn instanceof Ut)?Tn:null},create:Zt,createCube:function(Tn){function Nn(Nr){var Pr,Ln={color:null},pn=0,xn=null;Pr="rgba";var en="uint8",_n=1;if(typeof Nr=="number"?pn=Nr|0:Nr?("shape"in Nr?pn=Nr.shape[0]:("radius"in Nr&&(pn=Nr.radius|0),"width"in Nr?pn=Nr.width|0:"height"in Nr&&(pn=Nr.height|0)),("color"in Nr||"colors"in Nr)&&(xn=Nr.color||Nr.colors),xn||("colorCount"in Nr&&(_n=Nr.colorCount|0),"colorType"in Nr&&(en=Nr.colorType),"colorFormat"in Nr&&(Pr=Nr.colorFormat)),"depth"in Nr&&(Ln.depth=Nr.depth),"stencil"in Nr&&(Ln.stencil=Nr.stencil),"depthStencil"in Nr&&(Ln.depthStencil=Nr.depthStencil)):pn=1,xn)if(Array.isArray(xn))for(Nr=[],Pr=0;Pr<xn.length;++Pr)Nr[Pr]=xn[Pr];else Nr=[xn];else for(Nr=Array(_n),xn={radius:pn,format:Pr,type:en},Pr=0;Pr<_n;++Pr)Nr[Pr]=st.createCube(xn);for(Ln.color=Array(Nr.length),Pr=0;Pr<Nr.length;++Pr)_n=Nr[Pr],pn=pn||_n.width,Ln.color[Pr]={target:34069,data:Nr[Pr]};for(Pr=0;6>Pr;++Pr){for(_n=0;_n<Nr.length;++_n)Ln.color[_n].target=34069+Pr;0<Pr&&(Ln.depth=jn[0].depth,Ln.stencil=jn[0].stencil,Ln.depthStencil=jn[0].depthStencil),jn[Pr]?jn[Pr](Ln):jn[Pr]=Zt(Ln)}return ee(Nn,{width:pn,height:pn,color:Nr})}var jn=Array(6);return Nn(Tn),ee(Nn,{faces:jn,resize:function(Nr){var Pr=Nr|0;if(Pr===Nn.width)return Nn;var Ln=Nn.color;for(Nr=0;Nr<Ln.length;++Nr)Ln[Nr].resize(Pr);for(Nr=0;6>Nr;++Nr)jn[Nr].resize(Pr);return Nn.width=Nn.height=Pr,Nn},_reglType:"framebufferCube",destroy:function(){jn.forEach(function(Nr){Nr.destroy()})}})},clear:function(){be(Wn).forEach(tr)},restore:function(){_r.cur=null,_r.next=null,_r.dirty=!0,be(Wn).forEach(function(Tn){Tn.framebuffer=je.createFramebuffer(),er(Tn)})}})}function U(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function X(je,ot,Je,st,It){function Nt(Bt){if(Bt!==Ut.currentVAO){var tr=ot.oes_vertex_array_object;Bt?tr.bindVertexArrayOES(Bt.vao):tr.bindVertexArrayOES(null),Ut.currentVAO=Bt}}function nr(Bt){if(Bt!==Ut.currentVAO){if(Bt)Bt.bindAttrs();else for(var tr=ot.angle_instanced_arrays,er=0;er<_t.length;++er){var Zt=_t[er];Zt.buffer?(je.enableVertexAttribArray(er),je.vertexAttribPointer(er,Zt.size,Zt.type,Zt.normalized,Zt.stride,Zt.offfset),tr&&tr.vertexAttribDivisorANGLE(er,Zt.divisor)):(je.disableVertexAttribArray(er),je.vertexAttrib4f(er,Zt.x,Zt.y,Zt.z,Zt.w))}Ut.currentVAO=Bt}}function We(){be(Dt).forEach(function(Bt){Bt.destroy()})}function Fe(){this.id=++Rt,this.attributes=[];var Bt=ot.oes_vertex_array_object;this.vao=Bt?Bt.createVertexArrayOES():null,Dt[this.id]=this,this.buffers=[]}function bt(){ot.oes_vertex_array_object&&be(Dt).forEach(function(Bt){Bt.refresh()})}var kt=Je.maxAttributes,_t=Array(kt);for(Je=0;Je<kt;++Je)_t[Je]=new U;var Rt=0,Dt={},Ut={Record:U,scope:{},state:_t,currentVAO:null,targetVAO:null,restore:ot.oes_vertex_array_object?bt:function(){},createVAO:function(Bt){function tr(Zt){for(var _r=0;_r<er.buffers.length;++_r)er.buffers[_r].destroy();er.buffers.length=0,_r=er.attributes,_r.length=Zt.length;for(var Gr=0;Gr<Zt.length;++Gr){var Or=Zt[Gr],Fr=_r[Gr]=new U;Array.isArray(Or)||me(Or)||d(Or)?(Or=It.create(Or,34962,!1,!0),Fr.buffer=It.getBuffer(Or),Fr.size=Fr.buffer.dimension|0,Fr.normalized=!1,Fr.type=Fr.buffer.dtype,Fr.offset=0,Fr.stride=0,Fr.divisor=0,Fr.state=1,er.buffers.push(Or)):It.getBuffer(Or)?(Fr.buffer=It.getBuffer(Or),Fr.size=Fr.buffer.dimension|0,Fr.normalized=!1,Fr.type=Fr.buffer.dtype,Fr.offset=0,Fr.stride=0,Fr.divisor=0,Fr.state=1):It.getBuffer(Or.buffer)?(Fr.buffer=It.getBuffer(Or.buffer),Fr.size=(+Or.size||Fr.buffer.dimension)|0,Fr.normalized=!!Or.normalized||!1,Fr.type="type"in Or?Ge[Or.type]:Fr.buffer.dtype,Fr.offset=(Or.offset||0)|0,Fr.stride=(Or.stride||0)|0,Fr.divisor=(Or.divisor||0)|0,Fr.state=1):"x"in Or&&(Fr.x=+Or.x||0,Fr.y=+Or.y||0,Fr.z=+Or.z||0,Fr.w=+Or.w||0,Fr.state=2)}return er.refresh(),tr}var er=new Fe;return st.vaoCount+=1,tr.destroy=function(){er.destroy()},tr._vao=er,tr._reglType="vao",tr(Bt)},getVAO:function(Bt){return typeof Bt=="function"&&Bt._vao?Bt._vao:null},destroyBuffer:function(Bt){for(var tr=0;tr<_t.length;++tr){var er=_t[tr];er.buffer===Bt&&(je.disableVertexAttribArray(tr),er.buffer=null)}},setVAO:ot.oes_vertex_array_object?Nt:nr,clear:ot.oes_vertex_array_object?We:function(){}};return Fe.prototype.bindAttrs=function(){for(var Bt=ot.angle_instanced_arrays,tr=this.attributes,er=0;er<tr.length;++er){var Zt=tr[er];Zt.buffer?(je.enableVertexAttribArray(er),je.bindBuffer(34962,Zt.buffer.buffer),je.vertexAttribPointer(er,Zt.size,Zt.type,Zt.normalized,Zt.stride,Zt.offset),Bt&&Bt.vertexAttribDivisorANGLE(er,Zt.divisor)):(je.disableVertexAttribArray(er),je.vertexAttrib4f(er,Zt.x,Zt.y,Zt.z,Zt.w))}for(Bt=tr.length;Bt<kt;++Bt)je.disableVertexAttribArray(Bt)},Fe.prototype.refresh=function(){var Bt=ot.oes_vertex_array_object;Bt&&(Bt.bindVertexArrayOES(this.vao),this.bindAttrs(),Ut.currentVAO=this)},Fe.prototype.destroy=function(){if(this.vao){var Bt=ot.oes_vertex_array_object;this===Ut.currentVAO&&(Ut.currentVAO=null,Bt.bindVertexArrayOES(null)),Bt.deleteVertexArrayOES(this.vao),this.vao=null}Dt[this.id]&&(delete Dt[this.id],--st.vaoCount)},Ut}function z(je,ot,Je,st){function It(Ut,Bt,tr,er){this.name=Ut,this.id=Bt,this.location=tr,this.info=er}function Nt(Ut,Bt){for(var tr=0;tr<Ut.length;++tr)if(Ut[tr].id===Bt.id){Ut[tr].location=Bt.location;return}Ut.push(Bt)}function nr(Ut,Bt,tr){tr=Ut===35632?bt:kt;var er=tr[Bt];if(!er){var Zt=ot.str(Bt),er=je.createShader(Ut);je.shaderSource(er,Zt),je.compileShader(er),tr[Bt]=er}return er}function We(Ut,Bt){this.id=Dt++,this.fragId=Ut,this.vertId=Bt,this.program=null,this.uniforms=[],this.attributes=[],st.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Fe(Ut,Bt,tr){var er;er=nr(35632,Ut.fragId);var Zt=nr(35633,Ut.vertId);if(Bt=Ut.program=je.createProgram(),je.attachShader(Bt,er),je.attachShader(Bt,Zt),tr)for(er=0;er<tr.length;++er)Zt=tr[er],je.bindAttribLocation(Bt,Zt[0],Zt[1]);je.linkProgram(Bt),Zt=je.getProgramParameter(Bt,35718),st.profile&&(Ut.stats.uniformsCount=Zt);var _r=Ut.uniforms;for(er=0;er<Zt;++er)if(tr=je.getActiveUniform(Bt,er))if(1<tr.size)for(var Gr=0;Gr<tr.size;++Gr){var Or=tr.name.replace("[0]","["+Gr+"]");Nt(_r,new It(Or,ot.id(Or),je.getUniformLocation(Bt,Or),tr))}else Nt(_r,new It(tr.name,ot.id(tr.name),je.getUniformLocation(Bt,tr.name),tr));for(Zt=je.getProgramParameter(Bt,35721),st.profile&&(Ut.stats.attributesCount=Zt),Ut=Ut.attributes,er=0;er<Zt;++er)(tr=je.getActiveAttrib(Bt,er))&&Nt(Ut,new It(tr.name,ot.id(tr.name),je.getAttribLocation(Bt,tr.name),tr))}var bt={},kt={},_t={},Rt=[],Dt=0;return st.profile&&(Je.getMaxUniformsCount=function(){var Ut=0;return Rt.forEach(function(Bt){Bt.stats.uniformsCount>Ut&&(Ut=Bt.stats.uniformsCount)}),Ut},Je.getMaxAttributesCount=function(){var Ut=0;return Rt.forEach(function(Bt){Bt.stats.attributesCount>Ut&&(Ut=Bt.stats.attributesCount)}),Ut}),{clear:function(){var Ut=je.deleteShader.bind(je);be(bt).forEach(Ut),bt={},be(kt).forEach(Ut),kt={},Rt.forEach(function(Bt){je.deleteProgram(Bt.program)}),Rt.length=0,_t={},Je.shaderCount=0},program:function(Ut,Bt,tr,er){var Zt=_t[Bt];Zt||(Zt=_t[Bt]={});var _r=Zt[Ut];return _r&&!er?_r:(Bt=new We(Bt,Ut),Je.shaderCount++,Fe(Bt,tr,er),_r||(Zt[Ut]=Bt),Rt.push(Bt),Bt)},restore:function(){bt={},kt={};for(var Ut=0;Ut<Rt.length;++Ut)Fe(Rt[Ut],null,Rt[Ut].attributes.map(function(Bt){return[Bt.location,Bt.name]}))},shader:nr,frag:-1,vert:-1}}function B(je,ot,Je,st,It,Nt,nr){function We(bt){var kt;kt=ot.next===null?5121:ot.next.colorAttachments[0].texture._texture.type;var _t=0,Rt=0,Dt=st.framebufferWidth,Ut=st.framebufferHeight,Bt=null;return me(bt)?Bt=bt:bt&&(_t=bt.x|0,Rt=bt.y|0,Dt=(bt.width||st.framebufferWidth-_t)|0,Ut=(bt.height||st.framebufferHeight-Rt)|0,Bt=bt.data||null),Je(),bt=Dt*Ut*4,Bt||(kt===5121?Bt=new Uint8Array(bt):kt===5126&&(Bt=Bt||new Float32Array(bt))),je.pixelStorei(3333,4),je.readPixels(_t,Rt,Dt,Ut,6408,kt,Bt),Bt}function Fe(bt){var kt;return ot.setFBO({framebuffer:bt.framebuffer},function(){kt=We(bt)}),kt}return function(bt){return bt&&"framebuffer"in bt?Fe(bt):We(bt)}}function j(je){return Array.prototype.slice.call(je)}function V(je){return j(je).join("")}function K(){function je(){var We=[],Fe=[];return ee(function(){We.push.apply(We,j(arguments))},{def:function(){var bt="v"+Je++;return Fe.push(bt),0<arguments.length&&(We.push(bt,"="),We.push.apply(We,j(arguments)),We.push(";")),bt},toString:function(){return V([0<Fe.length?"var "+Fe.join(",")+";":"",V(We)])}})}function ot(){function We(Rt,Dt){bt(Rt,Dt,"=",Fe.def(Rt,Dt),";")}var Fe=je(),bt=je(),kt=Fe.toString,_t=bt.toString;return ee(function(){Fe.apply(Fe,j(arguments))},{def:Fe.def,entry:Fe,exit:bt,save:We,set:function(Rt,Dt,Ut){We(Rt,Dt),Fe(Rt,Dt,"=",Ut,";")},toString:function(){return kt()+_t()}})}var Je=0,st=[],It=[],Nt=je(),nr={};return{global:Nt,link:function(We){for(var Fe=0;Fe<It.length;++Fe)if(It[Fe]===We)return st[Fe];return Fe="g"+Je++,st.push(Fe),It.push(We),Fe},block:je,proc:function(We,Fe){function bt(){var Dt="a"+kt.length;return kt.push(Dt),Dt}var kt=[];Fe=Fe||0;for(var _t=0;_t<Fe;++_t)bt();var _t=ot(),Rt=_t.toString;return nr[We]=ee(_t,{arg:bt,toString:function(){return V(["function(",kt.join(),"){",Rt(),"}"])}})},scope:ot,cond:function(){var We=V(arguments),Fe=ot(),bt=ot(),kt=Fe.toString,_t=bt.toString;return ee(Fe,{then:function(){return Fe.apply(Fe,j(arguments)),this},else:function(){return bt.apply(bt,j(arguments)),this},toString:function(){var Rt=_t();return Rt&&(Rt="else{"+Rt+"}"),V(["if(",We,"){",kt(),"}",Rt])}})},compile:function(){var We=['"use strict";',Nt,"return {"];Object.keys(nr).forEach(function(bt){We.push('"',bt,'":',nr[bt].toString(),",")}),We.push("}");var Fe=V(We).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,st.concat(Fe)).apply(null,It)}}}function te(je){return Array.isArray(je)||me(je)||d(je)}function $(je){return je.sort(function(ot,Je){return ot==="viewport"?-1:Je==="viewport"?1:ot<Je?-1:1})}function ie(je,ot,Je,st){this.thisDep=je,this.contextDep=ot,this.propDep=Je,this.append=st}function se(je){return je&&!(je.thisDep||je.contextDep||je.propDep)}function Q(je){return new ie(!1,!1,!1,je)}function H(je,ot){var Je=je.type;return Je===0?(Je=je.data.length,new ie(!0,1<=Je,2<=Je,ot)):Je===4?(Je=je.data,new ie(Je.thisDep,Je.contextDep,Je.propDep,ot)):new ie(Je===3,Je===2,Je===1,ot)}function oe(je,ot,Je,st,It,Nt,nr,We,Fe,bt,kt,_t,Rt,Dt,Ut){function Bt(Xt){return Xt.replace(".","_")}function tr(Xt,yr,Yr){var un=Bt(Xt);Gn.push(Xt),Pn[un]=Jr[un]=!!Yr,ka[un]=yr}function er(Xt,yr,Yr){var un=Bt(Xt);Gn.push(Xt),Array.isArray(Yr)?(Jr[un]=Yr.slice(),Pn[un]=Yr.slice()):Jr[un]=Pn[un]=Yr,ca[un]=yr}function Zt(){var Xt=K(),yr=Xt.link,Yr=Xt.global;Xt.id=Ya++,Xt.batchId="0";var un=yr(Ta),qr=Xt.shared={props:"a0"};Object.keys(Ta).forEach(function(zr){qr[zr]=Yr.def(un,".",zr)});var rn=Xt.next={},hn=Xt.current={};Object.keys(ca).forEach(function(zr){Array.isArray(Jr[zr])&&(rn[zr]=Yr.def(qr.next,".",zr),hn[zr]=Yr.def(qr.current,".",zr))});var tn=Xt.constants={};Object.keys(Aa).forEach(function(zr){tn[zr]=Yr.def(JSON.stringify(Aa[zr]))}),Xt.invoke=function(zr,Tr){switch(Tr.type){case 0:var Fn=["this",qr.context,qr.props,Xt.batchId];return zr.def(yr(Tr.data),".call(",Fn.slice(0,Math.max(Tr.data.length+1,4)),")");case 1:return zr.def(qr.props,Tr.data);case 2:return zr.def(qr.context,Tr.data);case 3:return zr.def("this",Tr.data);case 4:return Tr.data.append(Xt,zr),Tr.data.ref}},Xt.attribCache={};var wr={};return Xt.scopeAttrib=function(zr){if(zr=ot.id(zr),zr in wr)return wr[zr];var Tr=bt.scope[zr];return Tr||(Tr=bt.scope[zr]=new Wa),wr[zr]=yr(Tr)},Xt}function _r(Xt){var yr=Xt.static;Xt=Xt.dynamic;var Yr;if("profile"in yr){var un=!!yr.profile;Yr=Q(function(rn,hn){return un}),Yr.enable=un}else if("profile"in Xt){var qr=Xt.profile;Yr=H(qr,function(rn,hn){return rn.invoke(hn,qr)})}return Yr}function Gr(Xt,yr){var Yr=Xt.static,un=Xt.dynamic;if("framebuffer"in Yr){var qr=Yr.framebuffer;return qr?(qr=We.getFramebuffer(qr),Q(function(hn,tn){var wr=hn.link(qr),zr=hn.shared;return tn.set(zr.framebuffer,".next",wr),zr=zr.context,tn.set(zr,".framebufferWidth",wr+".width"),tn.set(zr,".framebufferHeight",wr+".height"),wr})):Q(function(hn,tn){var wr=hn.shared;return tn.set(wr.framebuffer,".next","null"),wr=wr.context,tn.set(wr,".framebufferWidth",wr+".drawingBufferWidth"),tn.set(wr,".framebufferHeight",wr+".drawingBufferHeight"),"null"})}if("framebuffer"in un){var rn=un.framebuffer;return H(rn,function(hn,tn){var Tr=hn.invoke(tn,rn),wr=hn.shared,zr=wr.framebuffer,Tr=tn.def(zr,".getFramebuffer(",Tr,")");return tn.set(zr,".next",Tr),wr=wr.context,tn.set(wr,".framebufferWidth",Tr+"?"+Tr+".width:"+wr+".drawingBufferWidth"),tn.set(wr,".framebufferHeight",Tr+"?"+Tr+".height:"+wr+".drawingBufferHeight"),Tr})}return null}function Or(Xt,yr,Yr){function un(tn){if(tn in qr){var wr=qr[tn];tn=!0;var zr=wr.x|0,Tr=wr.y|0,Fn,Bn;return"width"in wr?Fn=wr.width|0:tn=!1,"height"in wr?Bn=wr.height|0:tn=!1,new ie(!tn&&yr&&yr.thisDep,!tn&&yr&&yr.contextDep,!tn&&yr&&yr.propDep,function(Pa,ia){var ri=Pa.shared.context,Ai=Fn;"width"in wr||(Ai=ia.def(ri,".","framebufferWidth","-",zr));var Bi=Bn;return"height"in wr||(Bi=ia.def(ri,".","framebufferHeight","-",Tr)),[zr,Tr,Ai,Bi]})}if(tn in rn){var sa=rn[tn];return tn=H(sa,function(Pa,ia){var yi=Pa.invoke(ia,sa),ri=Pa.shared.context,Ai=ia.def(yi,".x|0"),Bi=ia.def(yi,".y|0"),Qa=ia.def('"width" in ',yi,"?",yi,".width|0:","(",ri,".","framebufferWidth","-",Ai,")"),yi=ia.def('"height" in ',yi,"?",yi,".height|0:","(",ri,".","framebufferHeight","-",Bi,")");return[Ai,Bi,Qa,yi]}),yr&&(tn.thisDep=tn.thisDep||yr.thisDep,tn.contextDep=tn.contextDep||yr.contextDep,tn.propDep=tn.propDep||yr.propDep),tn}return yr?new ie(yr.thisDep,yr.contextDep,yr.propDep,function(Pa,ia){var ri=Pa.shared.context;return[0,0,ia.def(ri,".","framebufferWidth"),ia.def(ri,".","framebufferHeight")]}):null}var qr=Xt.static,rn=Xt.dynamic;if(Xt=un("viewport")){var hn=Xt;Xt=new ie(Xt.thisDep,Xt.contextDep,Xt.propDep,function(tn,wr){var zr=hn.append(tn,wr),Tr=tn.shared.context;return wr.set(Tr,".viewportWidth",zr[2]),wr.set(Tr,".viewportHeight",zr[3]),zr})}return{viewport:Xt,scissor_box:un("scissor.box")}}function Fr(Xt,yr){var Yr=Xt.static;if(typeof Yr.frag=="string"&&typeof Yr.vert=="string"){if(0<Object.keys(yr.dynamic).length)return null;var Yr=yr.static,un=Object.keys(Yr);if(0<un.length&&typeof Yr[un[0]]=="number"){for(var qr=[],rn=0;rn<un.length;++rn)qr.push([Yr[un[rn]]|0,un[rn]]);return qr}}return null}function Mn(Xt,yr,Yr){function un(zr){if(zr in qr){var Tr=ot.id(qr[zr]);return zr=Q(function(){return Tr}),zr.id=Tr,zr}if(zr in rn){var Fn=rn[zr];return H(Fn,function(Bn,sa){var Pa=Bn.invoke(sa,Fn);return sa.def(Bn.shared.strings,".id(",Pa,")")})}return null}var qr=Xt.static,rn=Xt.dynamic,hn=un("frag"),tn=un("vert"),wr=null;return se(hn)&&se(tn)?(wr=kt.program(tn.id,hn.id,null,Yr),Xt=Q(function(zr,Tr){return zr.link(wr)})):Xt=new ie(hn&&hn.thisDep||tn&&tn.thisDep,hn&&hn.contextDep||tn&&tn.contextDep,hn&&hn.propDep||tn&&tn.propDep,function(zr,Tr){var Fn=zr.shared.shader,Bn;Bn=hn?hn.append(zr,Tr):Tr.def(Fn,".","frag");var sa;return sa=tn?tn.append(zr,Tr):Tr.def(Fn,".","vert"),Tr.def(Fn+".program("+sa+","+Bn+")")}),{frag:hn,vert:tn,progVar:Xt,program:wr}}function Wn(Xt,yr){function Yr(tn,wr){if(tn in un){var zr=un[tn]|0;return Q(function(Fn,Bn){return wr&&(Fn.OFFSET=zr),zr})}if(tn in qr){var Tr=qr[tn];return H(Tr,function(Fn,Bn){var sa=Fn.invoke(Bn,Tr);return wr&&(Fn.OFFSET=sa),sa})}return wr&&rn?Q(function(Fn,Bn){return Fn.OFFSET="0",0}):null}var un=Xt.static,qr=Xt.dynamic,rn=function(){if("elements"in un){var tn=un.elements;te(tn)?tn=Nt.getElements(Nt.create(tn,!0)):tn&&(tn=Nt.getElements(tn));var wr=Q(function(Tr,Fn){if(tn){var Bn=Tr.link(tn);return Tr.ELEMENTS=Bn}return Tr.ELEMENTS=null});return wr.value=tn,wr}if("elements"in qr){var zr=qr.elements;return H(zr,function(Tr,Fn){var Bn=Tr.shared,Pa=Bn.isBufferArgs,Bn=Bn.elements,ia=Tr.invoke(Fn,zr),sa=Fn.def("null"),Pa=Fn.def(Pa,"(",ia,")"),ia=Tr.cond(Pa).then(sa,"=",Bn,".createStream(",ia,");").else(sa,"=",Bn,".getElements(",ia,");");return Fn.entry(ia),Fn.exit(Tr.cond(Pa).then(Bn,".destroyStream(",sa,");")),Tr.ELEMENTS=sa})}return null}(),hn=Yr("offset",!0);return{elements:rn,primitive:function(){if("primitive"in un){var tn=un.primitive;return Q(function(zr,Tr){return Ae[tn]})}if("primitive"in qr){var wr=qr.primitive;return H(wr,function(zr,Tr){var Fn=zr.constants.primTypes,Bn=zr.invoke(Tr,wr);return Tr.def(Fn,"[",Bn,"]")})}return rn?se(rn)?rn.value?Q(function(zr,Tr){return Tr.def(zr.ELEMENTS,".primType")}):Q(function(){return 4}):new ie(rn.thisDep,rn.contextDep,rn.propDep,function(zr,Tr){var Fn=zr.ELEMENTS;return Tr.def(Fn,"?",Fn,".primType:",4)}):null}(),count:function(){if("count"in un){var tn=un.count|0;return Q(function(){return tn})}if("count"in qr){var wr=qr.count;return H(wr,function(zr,Tr){return zr.invoke(Tr,wr)})}return rn?se(rn)?rn?hn?new ie(hn.thisDep,hn.contextDep,hn.propDep,function(zr,Tr){return Tr.def(zr.ELEMENTS,".vertCount-",zr.OFFSET)}):Q(function(zr,Tr){return Tr.def(zr.ELEMENTS,".vertCount")}):Q(function(){return-1}):new ie(rn.thisDep||hn.thisDep,rn.contextDep||hn.contextDep,rn.propDep||hn.propDep,function(zr,Tr){var Fn=zr.ELEMENTS;return zr.OFFSET?Tr.def(Fn,"?",Fn,".vertCount-",zr.OFFSET,":-1"):Tr.def(Fn,"?",Fn,".vertCount:-1")}):null}(),instances:Yr("instances",!1),offset:hn}}function Tn(Xt,yr){var Yr=Xt.static,un=Xt.dynamic,qr={};return Gn.forEach(function(rn){function hn(wr,zr){if(rn in Yr){var Tr=wr(Yr[rn]);qr[tn]=Q(function(){return Tr})}else if(rn in un){var Fn=un[rn];qr[tn]=H(Fn,function(Bn,sa){return zr(Bn,sa,Bn.invoke(sa,Fn))})}}var tn=Bt(rn);switch(rn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return hn(function(wr){return wr},function(wr,zr,Tr){return Tr});case"depth.func":return hn(function(wr){return Ie[wr]},function(wr,zr,Tr){return zr.def(wr.constants.compareFuncs,"[",Tr,"]")});case"depth.range":return hn(function(wr){return wr},function(wr,zr,Tr){return wr=zr.def("+",Tr,"[0]"),zr=zr.def("+",Tr,"[1]"),[wr,zr]});case"blend.func":return hn(function(wr){return[ke["srcRGB"in wr?wr.srcRGB:wr.src],ke["dstRGB"in wr?wr.dstRGB:wr.dst],ke["srcAlpha"in wr?wr.srcAlpha:wr.src],ke["dstAlpha"in wr?wr.dstAlpha:wr.dst]]},function(wr,zr,Tr){function Fn(ia,ri){return zr.def('"',ia,ri,'" in ',Tr,"?",Tr,".",ia,ri,":",Tr,".",ia)}wr=wr.constants.blendFuncs;var Bn=Fn("src","RGB"),Pa=Fn("dst","RGB"),Bn=zr.def(wr,"[",Bn,"]"),sa=zr.def(wr,"[",Fn("src","Alpha"),"]"),Pa=zr.def(wr,"[",Pa,"]");return wr=zr.def(wr,"[",Fn("dst","Alpha"),"]"),[Bn,Pa,sa,wr]});case"blend.equation":return hn(function(wr){if(typeof wr=="string")return[qa[wr],qa[wr]];if(typeof wr=="object")return[qa[wr.rgb],qa[wr.alpha]]},function(wr,zr,Tr){var Fn=wr.constants.blendEquations,Bn=zr.def(),sa=zr.def();return wr=wr.cond("typeof ",Tr,'==="string"'),wr.then(Bn,"=",sa,"=",Fn,"[",Tr,"];"),wr.else(Bn,"=",Fn,"[",Tr,".rgb];",sa,"=",Fn,"[",Tr,".alpha];"),zr(wr),[Bn,sa]});case"blend.color":return hn(function(wr){return i(4,function(zr){return+wr[zr]})},function(wr,zr,Tr){return i(4,function(Fn){return zr.def("+",Tr,"[",Fn,"]")})});case"stencil.mask":return hn(function(wr){return wr|0},function(wr,zr,Tr){return zr.def(Tr,"|0")});case"stencil.func":return hn(function(wr){return[Ie[wr.cmp||"keep"],wr.ref||0,"mask"in wr?wr.mask:-1]},function(wr,zr,Tr){wr=zr.def('"cmp" in ',Tr,"?",wr.constants.compareFuncs,"[",Tr,".cmp]",":",7680);var Fn=zr.def(Tr,".ref|0");return zr=zr.def('"mask" in ',Tr,"?",Tr,".mask|0:-1"),[wr,Fn,zr]});case"stencil.opFront":case"stencil.opBack":return hn(function(wr){return[rn==="stencil.opBack"?1029:1028,He[wr.fail||"keep"],He[wr.zfail||"keep"],He[wr.zpass||"keep"]]},function(wr,zr,Tr){function Fn(sa){return zr.def('"',sa,'" in ',Tr,"?",Bn,"[",Tr,".",sa,"]:",7680)}var Bn=wr.constants.stencilOps;return[rn==="stencil.opBack"?1029:1028,Fn("fail"),Fn("zfail"),Fn("zpass")]});case"polygonOffset.offset":return hn(function(wr){return[wr.factor|0,wr.units|0]},function(wr,zr,Tr){return wr=zr.def(Tr,".factor|0"),zr=zr.def(Tr,".units|0"),[wr,zr]});case"cull.face":return hn(function(wr){var zr=0;return wr==="front"?zr=1028:wr==="back"&&(zr=1029),zr},function(wr,zr,Tr){return zr.def(Tr,'==="front"?',1028,":",1029)});case"lineWidth":return hn(function(wr){return wr},function(wr,zr,Tr){return Tr});case"frontFace":return hn(function(wr){return Ye[wr]},function(wr,zr,Tr){return zr.def(Tr+'==="cw"?2304:2305')});case"colorMask":return hn(function(wr){return wr.map(function(zr){return!!zr})},function(wr,zr,Tr){return i(4,function(Fn){return"!!"+Tr+"["+Fn+"]"})});case"sample.coverage":return hn(function(wr){return["value"in wr?wr.value:1,!!wr.invert]},function(wr,zr,Tr){return wr=zr.def('"value" in ',Tr,"?+",Tr,".value:1"),zr=zr.def("!!",Tr,".invert"),[wr,zr]})}}),qr}function Nn(Xt,yr){var Yr=Xt.static,un=Xt.dynamic,qr={};return Object.keys(Yr).forEach(function(rn){var hn=Yr[rn],tn;if(typeof hn=="number"||typeof hn=="boolean")tn=Q(function(){return hn});else if(typeof hn=="function"){var wr=hn._reglType;wr==="texture2d"||wr==="textureCube"?tn=Q(function(zr){return zr.link(hn)}):(wr==="framebuffer"||wr==="framebufferCube")&&(tn=Q(function(zr){return zr.link(hn.color[0])}))}else P(hn)&&(tn=Q(function(zr){return zr.global.def("[",i(hn.length,function(Tr){return hn[Tr]}),"]")}));tn.value=hn,qr[rn]=tn}),Object.keys(un).forEach(function(rn){var hn=un[rn];qr[rn]=H(hn,function(tn,wr){return tn.invoke(wr,hn)})}),qr}function jn(Xt,yr){var Yr=Xt.static,un=Xt.dynamic,qr={};return Object.keys(Yr).forEach(function(rn){var hn=Yr[rn],tn=ot.id(rn),wr=new Wa;if(te(hn))wr.state=1,wr.buffer=It.getBuffer(It.create(hn,34962,!1,!0)),wr.type=0;else{var zr=It.getBuffer(hn);if(zr)wr.state=1,wr.buffer=zr,wr.type=0;else if("constant"in hn){var Tr=hn.constant;wr.buffer="null",wr.state=2,typeof Tr=="number"?wr.x=Tr:Ue.forEach(function(ri,Ai){Ai<Tr.length&&(wr[ri]=Tr[Ai])})}else{var zr=te(hn.buffer)?It.getBuffer(It.create(hn.buffer,34962,!1,!0)):It.getBuffer(hn.buffer),Fn=hn.offset|0,Bn=hn.stride|0,sa=hn.size|0,Pa=!!hn.normalized,ia=0;"type"in hn&&(ia=Ge[hn.type]),hn=hn.divisor|0,wr.buffer=zr,wr.state=1,wr.size=sa,wr.normalized=Pa,wr.type=ia||zr.dtype,wr.offset=Fn,wr.stride=Bn,wr.divisor=hn}}qr[rn]=Q(function(ri,Ai){var Bi=ri.attribCache;if(tn in Bi)return Bi[tn];var Qa={isStream:!1};return Object.keys(wr).forEach(function(yi){Qa[yi]=wr[yi]}),wr.buffer&&(Qa.buffer=ri.link(wr.buffer),Qa.type=Qa.type||Qa.buffer+".dtype"),Bi[tn]=Qa})}),Object.keys(un).forEach(function(rn){var hn=un[rn];qr[rn]=H(hn,function(tn,wr){function zr(Bi){wr(Pa[Bi],"=",Tr,".",Bi,"|0;")}var Tr=tn.invoke(wr,hn),sa=tn.shared,Fn=tn.constants,Bn=sa.isBufferArgs,sa=sa.buffer,Pa={isStream:wr.def(!1)},ia=new Wa;ia.state=1,Object.keys(ia).forEach(function(Bi){Pa[Bi]=wr.def(""+ia[Bi])});var ri=Pa.buffer,Ai=Pa.type;return wr("if(",Bn,"(",Tr,")){",Pa.isStream,"=true;",ri,"=",sa,".createStream(",34962,",",Tr,");",Ai,"=",ri,".dtype;","}else{",ri,"=",sa,".getBuffer(",Tr,");","if(",ri,"){",Ai,"=",ri,".dtype;",'}else if("constant" in ',Tr,"){",Pa.state,"=",2,";","if(typeof "+Tr+'.constant === "number"){',Pa[Ue[0]],"=",Tr,".constant;",Ue.slice(1).map(function(Bi){return Pa[Bi]}).join("="),"=0;","}else{",Ue.map(function(Bi,Qa){return Pa[Bi]+"="+Tr+".constant.length>"+Qa+"?"+Tr+".constant["+Qa+"]:0;"}).join(""),"}}else{","if(",Bn,"(",Tr,".buffer)){",ri,"=",sa,".createStream(",34962,",",Tr,".buffer);","}else{",ri,"=",sa,".getBuffer(",Tr,".buffer);","}",Ai,'="type" in ',Tr,"?",Fn.glTypes,"[",Tr,".type]:",ri,".dtype;",Pa.normalized,"=!!",Tr,".normalized;"),zr("size"),zr("offset"),zr("stride"),zr("divisor"),wr("}}"),wr.exit("if(",Pa.isStream,"){",sa,".destroyStream(",ri,");","}"),Pa})}),qr}function Nr(Xt,yr){var Yr=Xt.static,un=Xt.dynamic;if("vao"in Yr){var qr=Yr.vao;return qr!==null&&bt.getVAO(qr)===null&&(qr=bt.createVAO(qr)),Q(function(hn){return hn.link(bt.getVAO(qr))})}if("vao"in un){var rn=un.vao;return H(rn,function(hn,tn){var wr=hn.invoke(tn,rn);return tn.def(hn.shared.vao+".getVAO("+wr+")")})}return null}function Pr(Xt){var yr=Xt.static,Yr=Xt.dynamic,un={};return Object.keys(yr).forEach(function(qr){var rn=yr[qr];un[qr]=Q(function(hn,tn){return typeof rn=="number"||typeof rn=="boolean"?""+rn:hn.link(rn)})}),Object.keys(Yr).forEach(function(qr){var rn=Yr[qr];un[qr]=H(rn,function(hn,tn){return hn.invoke(tn,rn)})}),un}function Ln(Xt,yr,Yr,un,qr){function rn(ia){var ri=tn[ia];ri&&(zr[ia]=ri)}var hn=Fr(Xt,yr),Bn=Gr(Xt),tn=Or(Xt,Bn),wr=Wn(Xt),zr=Tn(Xt),Tr=Mn(Xt,qr,hn);rn("viewport"),rn(Bt("scissor.box"));var Fn=0<Object.keys(zr).length,Bn={framebuffer:Bn,draw:wr,shader:Tr,state:zr,dirty:Fn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Bn.profile=_r(Xt),Bn.uniforms=Nn(Yr),Bn.drawVAO=Bn.scopeVAO=Nr(Xt),!Bn.drawVAO&&Tr.program&&!hn&&Je.angle_instanced_arrays){var sa=!0;if(Xt=Tr.program.attributes.map(function(ia){return ia=yr.static[ia],sa=sa&&!!ia,ia}),sa&&0<Xt.length){var Pa=bt.getVAO(bt.createVAO(Xt));Bn.drawVAO=new ie(null,null,null,function(ia,ri){return ia.link(Pa)}),Bn.useVAO=!0}}return hn?Bn.useVAO=!0:Bn.attributes=jn(yr),Bn.context=Pr(un),Bn}function pn(Xt,yr,Yr){var un=Xt.shared.context,qr=Xt.scope();Object.keys(Yr).forEach(function(rn){yr.save(un,"."+rn),qr(un,".",rn,"=",Yr[rn].append(Xt,yr),";")}),yr(qr)}function xn(Xt,yr,Yr,un){var tn=Xt.shared,qr=tn.gl,rn=tn.framebuffer,hn;nn&&(hn=yr.def(tn.extensions,".webgl_draw_buffers"));var wr=Xt.constants,tn=wr.drawBuffer,wr=wr.backBuffer;Xt=Yr?Yr.append(Xt,yr):yr.def(rn,".next"),un||yr("if(",Xt,"!==",rn,".cur){"),yr("if(",Xt,"){",qr,".bindFramebuffer(",36160,",",Xt,".framebuffer);"),nn&&yr(hn,".drawBuffersWEBGL(",tn,"[",Xt,".colorAttachments.length]);"),yr("}else{",qr,".bindFramebuffer(",36160,",null);"),nn&&yr(hn,".drawBuffersWEBGL(",wr,");"),yr("}",rn,".cur=",Xt,";"),un||yr("}")}function en(Xt,yr,Yr){var un=Xt.shared,qr=un.gl,rn=Xt.current,hn=Xt.next,tn=un.current,wr=un.next,zr=Xt.cond(tn,".dirty");Gn.forEach(function(Tr){if(Tr=Bt(Tr),!(Tr in Yr.state)){var Fn,Bn;if(Tr in hn){Fn=hn[Tr],Bn=rn[Tr];var sa=i(Jr[Tr].length,function(Pa){return zr.def(Fn,"[",Pa,"]")});zr(Xt.cond(sa.map(function(Pa,ia){return Pa+"!=="+Bn+"["+ia+"]"}).join("||")).then(qr,".",ca[Tr],"(",sa,");",sa.map(function(Pa,ia){return Bn+"["+ia+"]="+Pa}).join(";"),";"))}else Fn=zr.def(wr,".",Tr),sa=Xt.cond(Fn,"!==",tn,".",Tr),zr(sa),Tr in ka?sa(Xt.cond(Fn).then(qr,".enable(",ka[Tr],");").else(qr,".disable(",ka[Tr],");"),tn,".",Tr,"=",Fn,";"):sa(qr,".",ca[Tr],"(",Fn,");",tn,".",Tr,"=",Fn,";")}}),Object.keys(Yr.state).length===0&&zr(tn,".dirty=false;"),yr(zr)}function _n(Xt,yr,Yr,un){var qr=Xt.shared,rn=Xt.current,hn=qr.current,tn=qr.gl;$(Object.keys(Yr)).forEach(function(wr){var zr=Yr[wr];if(!un||un(zr)){var Tr=zr.append(Xt,yr);if(ka[wr]){var Fn=ka[wr];se(zr)?Tr?yr(tn,".enable(",Fn,");"):yr(tn,".disable(",Fn,");"):yr(Xt.cond(Tr).then(tn,".enable(",Fn,");").else(tn,".disable(",Fn,");")),yr(hn,".",wr,"=",Tr,";")}else if(P(Tr)){var Bn=rn[wr];yr(tn,".",ca[wr],"(",Tr,");",Tr.map(function(sa,Pa){return Bn+"["+Pa+"]="+sa}).join(";"),";")}else yr(tn,".",ca[wr],"(",Tr,");",hn,".",wr,"=",Tr,";")}})}function kn(Xt,yr){dr&&(Xt.instancing=yr.def(Xt.shared.extensions,".angle_instanced_arrays"))}function ln(Xt,yr,Yr,un,qr){function rn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function hn(ia){sa=yr.def(),ia(sa,"=",rn(),";"),typeof qr=="string"?ia(Tr,".count+=",qr,";"):ia(Tr,".count++;"),Dt&&(un?(Pa=yr.def(),ia(Pa,"=",Bn,".getNumPendingQueries();")):ia(Bn,".beginQuery(",Tr,");"))}function tn(ia){ia(Tr,".cpuTime+=",rn(),"-",sa,";"),Dt&&(un?ia(Bn,".pushScopeStats(",Pa,",",Bn,".getNumPendingQueries(),",Tr,");"):ia(Bn,".endQuery();"))}function wr(ia){var ri=yr.def(Fn,".profile");yr(Fn,".profile=",ia,";"),yr.exit(Fn,".profile=",ri,";")}var zr=Xt.shared,Tr=Xt.stats,Fn=zr.current,Bn=zr.timer;Yr=Yr.profile;var sa,Pa;if(Yr){if(se(Yr)){Yr.enable?(hn(yr),tn(yr.exit),wr("true")):wr("false");return}Yr=Yr.append(Xt,yr),wr(Yr)}else Yr=yr.def(Fn,".profile");zr=Xt.block(),hn(zr),yr("if(",Yr,"){",zr,"}"),Xt=Xt.block(),tn(Xt),yr.exit("if(",Yr,"){",Xt,"}")}function vt(Xt,yr,Yr,un,qr){function rn(wr){switch(wr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function hn(wr,zr,Tr){function Fn(){yr("if(!",ia,".buffer){",sa,".enableVertexAttribArray(",Pa,");}");var Qa=Tr.type,yi;yi=Tr.size?yr.def(Tr.size,"||",zr):zr,yr("if(",ia,".type!==",Qa,"||",ia,".size!==",yi,"||",Bi.map(function(As){return ia+"."+As+"!=="+Tr[As]}).join("||"),"){",sa,".bindBuffer(",34962,",",ri,".buffer);",sa,".vertexAttribPointer(",[Pa,yi,Qa,Tr.normalized,Tr.stride,Tr.offset],");",ia,".type=",Qa,";",ia,".size=",yi,";",Bi.map(function(As){return ia+"."+As+"="+Tr[As]+";"}).join(""),"}"),dr&&(Qa=Tr.divisor,yr("if(",ia,".divisor!==",Qa,"){",Xt.instancing,".vertexAttribDivisorANGLE(",[Pa,Qa],");",ia,".divisor=",Qa,";}"))}function Bn(){yr("if(",ia,".buffer){",sa,".disableVertexAttribArray(",Pa,");",ia,".buffer=null;","}if(",Ue.map(function(Qa,yi){return ia+"."+Qa+"!=="+Ai[yi]}).join("||"),"){",sa,".vertexAttrib4f(",Pa,",",Ai,");",Ue.map(function(Qa,yi){return ia+"."+Qa+"="+Ai[yi]+";"}).join(""),"}")}var sa=tn.gl,Pa=yr.def(wr,".location"),ia=yr.def(tn.attributes,"[",Pa,"]");wr=Tr.state;var ri=Tr.buffer,Ai=[Tr.x,Tr.y,Tr.z,Tr.w],Bi=["buffer","normalized","offset","stride"];wr===1?Fn():wr===2?Bn():(yr("if(",wr,"===",1,"){"),Fn(),yr("}else{"),Bn(),yr("}"))}var tn=Xt.shared;un.forEach(function(wr){var zr=wr.name,Tr=Yr.attributes[zr],Fn;if(Tr){if(!qr(Tr))return;Fn=Tr.append(Xt,yr)}else{if(!qr(ft))return;var Bn=Xt.scopeAttrib(zr);Fn={},Object.keys(new Wa).forEach(function(sa){Fn[sa]=yr.def(Bn,".",sa)})}hn(Xt.link(wr),rn(wr.info.type),Fn)})}function Gt(Xt,yr,Yr,un,qr){for(var rn=Xt.shared,hn=rn.gl,tn,wr=0;wr<un.length;++wr){var Bn=un[wr],zr=Bn.name,Tr=Bn.info.type,Fn=Yr.uniforms[zr],Bn=Xt.link(Bn)+".location",sa;if(Fn){if(!qr(Fn))continue;if(se(Fn)){if(zr=Fn.value,Tr===35678||Tr===35680)Tr=Xt.link(zr._texture||zr.color[0]._texture),yr(hn,".uniform1i(",Bn,",",Tr+".bind());"),yr.exit(Tr,".unbind();");else if(Tr===35674||Tr===35675||Tr===35676)zr=Xt.global.def("new Float32Array(["+Array.prototype.slice.call(zr)+"])"),Fn=2,Tr===35675?Fn=3:Tr===35676&&(Fn=4),yr(hn,".uniformMatrix",Fn,"fv(",Bn,",false,",zr,");");else{switch(Tr){case 5126:tn="1f";break;case 35664:tn="2f";break;case 35665:tn="3f";break;case 35666:tn="4f";break;case 35670:tn="1i";break;case 5124:tn="1i";break;case 35671:tn="2i";break;case 35667:tn="2i";break;case 35672:tn="3i";break;case 35668:tn="3i";break;case 35673:tn="4i";break;case 35669:tn="4i"}yr(hn,".uniform",tn,"(",Bn,",",P(zr)?Array.prototype.slice.call(zr):zr,");")}continue}else sa=Fn.append(Xt,yr)}else{if(!qr(ft))continue;sa=yr.def(rn.uniforms,"[",ot.id(zr),"]")}switch(Tr===35678?yr("if(",sa,"&&",sa,'._reglType==="framebuffer"){',sa,"=",sa,".color[0];","}"):Tr===35680&&yr("if(",sa,"&&",sa,'._reglType==="framebufferCube"){',sa,"=",sa,".color[0];","}"),zr=1,Tr){case 35678:case 35680:Tr=yr.def(sa,"._texture"),yr(hn,".uniform1i(",Bn,",",Tr,".bind());"),yr.exit(Tr,".unbind();");continue;case 5124:case 35670:tn="1i";break;case 35667:case 35671:tn="2i",zr=2;break;case 35668:case 35672:tn="3i",zr=3;break;case 35669:case 35673:tn="4i",zr=4;break;case 5126:tn="1f";break;case 35664:tn="2f",zr=2;break;case 35665:tn="3f",zr=3;break;case 35666:tn="4f",zr=4;break;case 35674:tn="Matrix2fv";break;case 35675:tn="Matrix3fv";break;case 35676:tn="Matrix4fv"}if(yr(hn,".uniform",tn,"(",Bn,","),tn.charAt(0)==="M"){var Bn=Math.pow(Tr-35674+2,2),Pa=Xt.global.def("new Float32Array(",Bn,")");yr("false,(Array.isArray(",sa,")||",sa," instanceof Float32Array)?",sa,":(",i(Bn,function(ri){return Pa+"["+ri+"]="+sa+"["+ri+"]"}),",",Pa,")")}else 1<zr?yr(i(zr,function(ia){return sa+"["+ia+"]"})):yr(sa);yr(");")}}function fr(Xt,yr,Yr,un){function qr(Qa){var yi=Tr[Qa];return yi?yi.contextDep&&un.contextDynamic||yi.propDep?yi.append(Xt,Yr):yi.append(Xt,yr):yr.def(zr,".",Qa)}function rn(){function Qa(){Yr(ri,".drawElementsInstancedANGLE(",[Bn,Pa,Ai,sa+"<<(("+Ai+"-5121)>>1)",ia],");")}function yi(){Yr(ri,".drawArraysInstancedANGLE(",[Bn,sa,Pa,ia],");")}Fn?Bi?Qa():(Yr("if(",Fn,"){"),Qa(),Yr("}else{"),yi(),Yr("}")):yi()}function hn(){function Qa(){Yr(wr+".drawElements("+[Bn,Pa,Ai,sa+"<<(("+Ai+"-5121)>>1)"]+");")}function yi(){Yr(wr+".drawArrays("+[Bn,sa,Pa]+");")}Fn?Bi?Qa():(Yr("if(",Fn,"){"),Qa(),Yr("}else{"),yi(),Yr("}")):yi()}var tn=Xt.shared,wr=tn.gl,zr=tn.draw,Tr=un.draw,Fn=function(){var Qa=Tr.elements,yi=yr;return Qa?((Qa.contextDep&&un.contextDynamic||Qa.propDep)&&(yi=Yr),Qa=Qa.append(Xt,yi)):Qa=yi.def(zr,".","elements"),Qa&&yi("if("+Qa+")"+wr+".bindBuffer(34963,"+Qa+".buffer.buffer);"),Qa}(),Bn=qr("primitive"),sa=qr("offset"),Pa=function(){var Qa=Tr.count,yi=yr;return Qa?((Qa.contextDep&&un.contextDynamic||Qa.propDep)&&(yi=Yr),Qa=Qa.append(Xt,yi)):Qa=yi.def(zr,".","count"),Qa}();if(typeof Pa=="number"){if(Pa===0)return}else Yr("if(",Pa,"){"),Yr.exit("}");var ia,ri;dr&&(ia=qr("instances"),ri=Xt.instancing);var Ai=Fn+".type",Bi=Tr.elements&&se(Tr.elements);dr&&(typeof ia!="number"||0<=ia)?typeof ia=="string"?(Yr("if(",ia,">0){"),rn(),Yr("}else if(",ia,"<0){"),hn(),Yr("}")):rn():hn()}function Cr(Xt,yr,Yr,un,qr){return yr=Zt(),qr=yr.proc("body",qr),dr&&(yr.instancing=qr.def(yr.shared.extensions,".angle_instanced_arrays")),Xt(yr,qr,Yr,un),yr.compile().body}function Wr(Xt,yr,Yr,un){kn(Xt,yr),Yr.useVAO?Yr.drawVAO?yr(Xt.shared.vao,".setVAO(",Yr.drawVAO.append(Xt,yr),");"):yr(Xt.shared.vao,".setVAO(",Xt.shared.vao,".targetVAO);"):(yr(Xt.shared.vao,".setVAO(null);"),vt(Xt,yr,Yr,un.attributes,function(){return!0})),Gt(Xt,yr,Yr,un.uniforms,function(){return!0}),fr(Xt,yr,yr,Yr)}function Vr(Xt,yr){var Yr=Xt.proc("draw",1);kn(Xt,Yr),pn(Xt,Yr,yr.context),xn(Xt,Yr,yr.framebuffer),en(Xt,Yr,yr),_n(Xt,Yr,yr.state),ln(Xt,Yr,yr,!1,!0);var un=yr.shader.progVar.append(Xt,Yr);if(Yr(Xt.shared.gl,".useProgram(",un,".program);"),yr.shader.program)Wr(Xt,Yr,yr,yr.shader.program);else{Yr(Xt.shared.vao,".setVAO(null);");var qr=Xt.global.def("{}"),rn=Yr.def(un,".id"),hn=Yr.def(qr,"[",rn,"]");Yr(Xt.cond(hn).then(hn,".call(this,a0);").else(hn,"=",qr,"[",rn,"]=",Xt.link(function(tn){return Cr(Wr,Xt,yr,tn,1)}),"(",un,");",hn,".call(this,a0);"))}0<Object.keys(yr.state).length&&Yr(Xt.shared.current,".dirty=true;")}function Qr(Xt,yr,Yr,un){function qr(){return!0}Xt.batchId="a1",kn(Xt,yr),vt(Xt,yr,Yr,un.attributes,qr),Gt(Xt,yr,Yr,un.uniforms,qr),fr(Xt,yr,yr,Yr)}function Hr(Xt,yr,Yr,un){function qr(Fn){return Fn.contextDep&&hn||Fn.propDep}function rn(Fn){return!qr(Fn)}kn(Xt,yr);var hn=Yr.contextDep,tn=yr.def(),wr=yr.def();Xt.shared.props=wr,Xt.batchId=tn;var zr=Xt.scope(),Tr=Xt.scope();yr(zr.entry,"for(",tn,"=0;",tn,"<","a1",";++",tn,"){",wr,"=","a0","[",tn,"];",Tr,"}",zr.exit),Yr.needsContext&&pn(Xt,Tr,Yr.context),Yr.needsFramebuffer&&xn(Xt,Tr,Yr.framebuffer),_n(Xt,Tr,Yr.state,qr),Yr.profile&&qr(Yr.profile)&&ln(Xt,Tr,Yr,!1,!0),un?(Yr.useVAO?Yr.drawVAO?qr(Yr.drawVAO)?Tr(Xt.shared.vao,".setVAO(",Yr.drawVAO.append(Xt,Tr),");"):zr(Xt.shared.vao,".setVAO(",Yr.drawVAO.append(Xt,zr),");"):zr(Xt.shared.vao,".setVAO(",Xt.shared.vao,".targetVAO);"):(zr(Xt.shared.vao,".setVAO(null);"),vt(Xt,zr,Yr,un.attributes,rn),vt(Xt,Tr,Yr,un.attributes,qr)),Gt(Xt,zr,Yr,un.uniforms,rn),Gt(Xt,Tr,Yr,un.uniforms,qr),fr(Xt,zr,Tr,Yr)):(yr=Xt.global.def("{}"),un=Yr.shader.progVar.append(Xt,Tr),wr=Tr.def(un,".id"),zr=Tr.def(yr,"[",wr,"]"),Tr(Xt.shared.gl,".useProgram(",un,".program);","if(!",zr,"){",zr,"=",yr,"[",wr,"]=",Xt.link(function(Fn){return Cr(Qr,Xt,Yr,Fn,2)}),"(",un,");}",zr,".call(this,a0[",tn,"],",tn,");"))}function En(Xt,yr){function Yr(zr){return zr.contextDep&&qr||zr.propDep}var un=Xt.proc("batch",2);Xt.batchId="0",kn(Xt,un);var qr=!1,rn=!0;Object.keys(yr.context).forEach(function(zr){qr=qr||yr.context[zr].propDep}),qr||(pn(Xt,un,yr.context),rn=!1);var hn=yr.framebuffer,tn=!1;if(hn?(hn.propDep?qr=tn=!0:hn.contextDep&&qr&&(tn=!0),tn||xn(Xt,un,hn)):xn(Xt,un,null),yr.state.viewport&&yr.state.viewport.propDep&&(qr=!0),en(Xt,un,yr),_n(Xt,un,yr.state,function(zr){return!Yr(zr)}),yr.profile&&Yr(yr.profile)||ln(Xt,un,yr,!1,"a1"),yr.contextDep=qr,yr.needsContext=rn,yr.needsFramebuffer=tn,rn=yr.shader.progVar,rn.contextDep&&qr||rn.propDep)Hr(Xt,un,yr,null);else if(rn=rn.append(Xt,un),un(Xt.shared.gl,".useProgram(",rn,".program);"),yr.shader.program)Hr(Xt,un,yr,yr.shader.program);else{un(Xt.shared.vao,".setVAO(null);");var hn=Xt.global.def("{}"),tn=un.def(rn,".id"),wr=un.def(hn,"[",tn,"]");un(Xt.cond(wr).then(wr,".call(this,a0,a1);").else(wr,"=",hn,"[",tn,"]=",Xt.link(function(Fn){return Cr(Hr,Xt,yr,Fn,2)}),"(",rn,");",wr,".call(this,a0,a1);"))}0<Object.keys(yr.state).length&&un(Xt.shared.current,".dirty=true;")}function ta(Xt,yr){function Yr(hn){var tn=yr.shader[hn];tn&&un.set(qr.shader,"."+hn,tn.append(Xt,un))}var un=Xt.proc("scope",3);Xt.batchId="a2";var qr=Xt.shared,rn=qr.current;pn(Xt,un,yr.context),yr.framebuffer&&yr.framebuffer.append(Xt,un),$(Object.keys(yr.state)).forEach(function(hn){var tn=yr.state[hn].append(Xt,un);P(tn)?tn.forEach(function(wr,zr){un.set(Xt.next[hn],"["+zr+"]",wr)}):un.set(qr.next,"."+hn,tn)}),ln(Xt,un,yr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(hn){var tn=yr.draw[hn];tn&&un.set(qr.draw,"."+hn,""+tn.append(Xt,un))}),Object.keys(yr.uniforms).forEach(function(hn){un.set(qr.uniforms,"["+ot.id(hn)+"]",yr.uniforms[hn].append(Xt,un))}),Object.keys(yr.attributes).forEach(function(hn){var tn=yr.attributes[hn].append(Xt,un),wr=Xt.scopeAttrib(hn);Object.keys(new Wa).forEach(function(zr){un.set(wr,"."+zr,tn[zr])})}),yr.scopeVAO&&un.set(qr.vao,".targetVAO",yr.scopeVAO.append(Xt,un)),Yr("vert"),Yr("frag"),0<Object.keys(yr.state).length&&(un(rn,".dirty=true;"),un.exit(rn,".dirty=true;")),un("a1(",Xt.shared.context,",a0,",Xt.batchId,");")}function ea(Xt){if(typeof Xt=="object"&&!P(Xt)){for(var yr=Object.keys(Xt),Yr=0;Yr<yr.length;++Yr)if(fe.isDynamic(Xt[yr[Yr]]))return!0;return!1}}function ba(Xt,yr,Yr){function un(Fn,Bn){hn.forEach(function(sa){var Pa=qr[sa];fe.isDynamic(Pa)&&(Pa=Fn.invoke(Bn,Pa),Bn(Tr,".",sa,"=",Pa,";"))})}var qr=yr.static[Yr];if(qr&&ea(qr)){var rn=Xt.global,hn=Object.keys(qr),tn=!1,wr=!1,zr=!1,Tr=Xt.global.def("{}");hn.forEach(function(Fn){var Bn=qr[Fn];if(fe.isDynamic(Bn))typeof Bn=="function"&&(Bn=qr[Fn]=fe.unbox(Bn)),Fn=H(Bn,null),tn=tn||Fn.thisDep,zr=zr||Fn.propDep,wr=wr||Fn.contextDep;else{switch(rn(Tr,".",Fn,"="),typeof Bn){case"number":rn(Bn);break;case"string":rn('"',Bn,'"');break;case"object":Array.isArray(Bn)&&rn("[",Bn.join(),"]");break;default:rn(Xt.link(Bn))}rn(";")}}),yr.dynamic[Yr]=new fe.DynamicVariable(4,{thisDep:tn,contextDep:wr,propDep:zr,ref:Tr,append:un}),delete yr.static[Yr]}}var Wa=bt.Record,qa={add:32774,subtract:32778,"reverse subtract":32779};Je.ext_blend_minmax&&(qa.min=32775,qa.max=32776);var dr=Je.angle_instanced_arrays,nn=Je.webgl_draw_buffers,Jr={dirty:!0,profile:Ut.profile},Pn={},Gn=[],ka={},ca={};tr("dither",3024),tr("blend.enable",3042),er("blend.color","blendColor",[0,0,0,0]),er("blend.equation","blendEquationSeparate",[32774,32774]),er("blend.func","blendFuncSeparate",[1,0,1,0]),tr("depth.enable",2929,!0),er("depth.func","depthFunc",513),er("depth.range","depthRange",[0,1]),er("depth.mask","depthMask",!0),er("colorMask","colorMask",[!0,!0,!0,!0]),tr("cull.enable",2884),er("cull.face","cullFace",1029),er("frontFace","frontFace",2305),er("lineWidth","lineWidth",1),tr("polygonOffset.enable",32823),er("polygonOffset.offset","polygonOffset",[0,0]),tr("sample.alpha",32926),tr("sample.enable",32928),er("sample.coverage","sampleCoverage",[1,!1]),tr("stencil.enable",2960),er("stencil.mask","stencilMask",-1),er("stencil.func","stencilFunc",[519,0,-1]),er("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),er("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),tr("scissor.enable",3089),er("scissor.box","scissor",[0,0,je.drawingBufferWidth,je.drawingBufferHeight]),er("viewport","viewport",[0,0,je.drawingBufferWidth,je.drawingBufferHeight]);var Ta={gl:je,context:Rt,strings:ot,next:Pn,current:Jr,draw:_t,elements:Nt,buffer:It,shader:kt,attributes:bt.state,vao:bt,uniforms:Fe,framebuffer:We,extensions:Je,timer:Dt,isBufferArgs:te},Aa={primTypes:Ae,compareFuncs:Ie,blendFuncs:ke,blendEquations:qa,stencilOps:He,glTypes:Ge,orientationType:Ye};nn&&(Aa.backBuffer=[1029],Aa.drawBuffer=i(st.maxDrawbuffers,function(Xt){return Xt===0?[0]:i(Xt,function(yr){return 36064+yr})}));var Ya=0;return{next:Pn,current:Jr,procs:function(){var Xt=Zt(),yr=Xt.proc("poll"),Yr=Xt.proc("refresh"),un=Xt.block();yr(un),Yr(un);var qr=Xt.shared,rn=qr.gl,hn=qr.next,tn=qr.current;un(tn,".dirty=false;"),xn(Xt,yr),xn(Xt,Yr,null,!0);var wr;dr&&(wr=Xt.link(dr)),Je.oes_vertex_array_object&&Yr(Xt.link(Je.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var zr=0;zr<st.maxAttributes;++zr){var Tr=Yr.def(qr.attributes,"[",zr,"]"),Fn=Xt.cond(Tr,".buffer");Fn.then(rn,".enableVertexAttribArray(",zr,");",rn,".bindBuffer(",34962,",",Tr,".buffer.buffer);",rn,".vertexAttribPointer(",zr,",",Tr,".size,",Tr,".type,",Tr,".normalized,",Tr,".stride,",Tr,".offset);").else(rn,".disableVertexAttribArray(",zr,");",rn,".vertexAttrib4f(",zr,",",Tr,".x,",Tr,".y,",Tr,".z,",Tr,".w);",Tr,".buffer=null;"),Yr(Fn),dr&&Yr(wr,".vertexAttribDivisorANGLE(",zr,",",Tr,".divisor);")}return Yr(Xt.shared.vao,".currentVAO=null;",Xt.shared.vao,".setVAO(",Xt.shared.vao,".targetVAO);"),Object.keys(ka).forEach(function(Bn){var sa=ka[Bn],Pa=un.def(hn,".",Bn),ia=Xt.block();ia("if(",Pa,"){",rn,".enable(",sa,")}else{",rn,".disable(",sa,")}",tn,".",Bn,"=",Pa,";"),Yr(ia),yr("if(",Pa,"!==",tn,".",Bn,"){",ia,"}")}),Object.keys(ca).forEach(function(Bn){var sa=ca[Bn],Pa=Jr[Bn],ia,ri,Ai=Xt.block();Ai(rn,".",sa,"("),P(Pa)?(sa=Pa.length,ia=Xt.global.def(hn,".",Bn),ri=Xt.global.def(tn,".",Bn),Ai(i(sa,function(Bi){return ia+"["+Bi+"]"}),");",i(sa,function(Bi){return ri+"["+Bi+"]="+ia+"["+Bi+"];"}).join("")),yr("if(",i(sa,function(Bi){return ia+"["+Bi+"]!=="+ri+"["+Bi+"]"}).join("||"),"){",Ai,"}")):(ia=un.def(hn,".",Bn),ri=un.def(tn,".",Bn),Ai(ia,");",tn,".",Bn,"=",ia,";"),yr("if(",ia,"!==",ri,"){",Ai,"}")),Yr(Ai)}),Xt.compile()}(),compile:function(Xt,yr,Yr,un,qr){var rn=Zt();return rn.stats=rn.link(qr),Object.keys(yr.static).forEach(function(hn){ba(rn,yr,hn)}),et.forEach(function(hn){ba(rn,Xt,hn)}),Yr=Ln(Xt,yr,Yr,un,rn),Vr(rn,Yr),ta(rn,Yr),En(rn,Yr),rn.compile()}}}function re(je,ot){for(var Je=0;Je<je.length;++Je)if(je[Je]===ot)return Je;return-1}var ee=function(je,ot){for(var Je=Object.keys(ot),st=0;st<Je.length;++st)je[Je[st]]=ot[Je[st]];return je},ae=0,fe={DynamicVariable:r,define:function(je,ot){return new r(je,u(ot+""))},isDynamic:function(je){return typeof je=="function"&&!je._reglType||je instanceof r},unbox:function(je,ot){return typeof je=="function"?new r(0,je):je},accessor:u},de={next:typeof requestAnimationFrame=="function"?function(je){return requestAnimationFrame(je)}:function(je){return setTimeout(je,16)},cancel:typeof cancelAnimationFrame=="function"?function(je){return cancelAnimationFrame(je)}:clearTimeout},pe=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},W=p();W.zero=p();var ue=function(je,ot){var Je=1;ot.ext_texture_filter_anisotropic&&(Je=je.getParameter(34047));var st=1,It=1;ot.webgl_draw_buffers&&(st=je.getParameter(34852),It=je.getParameter(36063));var Nt=!!ot.oes_texture_float;if(Nt){Nt=je.createTexture(),je.bindTexture(3553,Nt),je.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var nr=je.createFramebuffer();if(je.bindFramebuffer(36160,nr),je.framebufferTexture2D(36160,36064,3553,Nt,0),je.bindTexture(3553,null),je.checkFramebufferStatus(36160)!==36053)Nt=!1;else{je.viewport(0,0,1,1),je.clearColor(1,0,0,1),je.clear(16384);var We=W.allocType(5126,4);je.readPixels(0,0,1,1,6408,5126,We),je.getError()?Nt=!1:(je.deleteFramebuffer(nr),je.deleteTexture(Nt),Nt=We[0]===1),W.freeType(We)}}return We=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(We=je.createTexture(),nr=W.allocType(5121,36),je.activeTexture(33984),je.bindTexture(34067,We),je.texImage2D(34069,0,6408,3,3,0,6408,5121,nr),W.freeType(nr),je.bindTexture(34067,null),je.deleteTexture(We),We=!je.getError()),{colorBits:[je.getParameter(3410),je.getParameter(3411),je.getParameter(3412),je.getParameter(3413)],depthBits:je.getParameter(3414),stencilBits:je.getParameter(3415),subpixelBits:je.getParameter(3408),extensions:Object.keys(ot).filter(function(Fe){return!!ot[Fe]}),maxAnisotropic:Je,maxDrawbuffers:st,maxColorAttachments:It,pointSizeDims:je.getParameter(33901),lineWidthDims:je.getParameter(33902),maxViewportDims:je.getParameter(3386),maxCombinedTextureUnits:je.getParameter(35661),maxCubeMapSize:je.getParameter(34076),maxRenderbufferSize:je.getParameter(34024),maxTextureUnits:je.getParameter(34930),maxTextureSize:je.getParameter(3379),maxAttributes:je.getParameter(34921),maxVertexUniforms:je.getParameter(36347),maxVertexTextureUnits:je.getParameter(35660),maxVaryingVectors:je.getParameter(36348),maxFragmentUniforms:je.getParameter(36349),glsl:je.getParameter(35724),renderer:je.getParameter(7937),vendor:je.getParameter(7936),version:je.getParameter(7938),readFloat:Nt,npotTextureCube:We}},me=function(je){return je instanceof Uint8Array||je instanceof Uint16Array||je instanceof Uint32Array||je instanceof Int8Array||je instanceof Int16Array||je instanceof Int32Array||je instanceof Float32Array||je instanceof Float64Array||je instanceof Uint8ClampedArray},be=function(je){return Object.keys(je).map(function(ot){return je[ot]})},Me={shape:function(je){for(var ot=[];je.length;je=je[0])ot.push(je.length);return ot},flatten:function(je,ot,Je,st){var It=1;if(ot.length)for(var Nt=0;Nt<ot.length;++Nt)It*=ot[Nt];else It=0;switch(Je=st||W.allocType(Je,It),ot.length){case 0:break;case 1:for(st=ot[0],ot=0;ot<st;++ot)Je[ot]=je[ot];break;case 2:for(st=ot[0],ot=ot[1],Nt=It=0;Nt<st;++Nt)for(var nr=je[Nt],We=0;We<ot;++We)Je[It++]=nr[We];break;case 3:g(je,ot[0],ot[1],ot[2],Je,0);break;default:b(je,ot,0,Je,0)}return Je}},Pe={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ge={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ze={dynamic:35048,stream:35040,static:35044},Qe=Me.flatten,tt=Me.shape,Ce=[];Ce[5120]=1,Ce[5122]=2,Ce[5124]=4,Ce[5121]=1,Ce[5123]=2,Ce[5125]=4,Ce[5126]=4;var Ae={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Be=new Float32Array(1),qe=new Uint32Array(Be.buffer),Tt=[9984,9986,9985,9987],At=[0,6409,6410,6407,6408],Ne={};Ne[6409]=Ne[6406]=Ne[6402]=1,Ne[34041]=Ne[6410]=2,Ne[6407]=Ne[35904]=3,Ne[6408]=Ne[35906]=4;var ct=L("HTMLCanvasElement"),Mt=L("OffscreenCanvas"),Wt=L("CanvasRenderingContext2D"),qt=L("ImageBitmap"),zt=L("HTMLImageElement"),$t=L("HTMLVideoElement"),rr=Object.keys(Pe).concat([ct,Mt,Wt,qt,zt,$t]),Lt=[];Lt[5121]=1,Lt[5126]=4,Lt[36193]=2,Lt[5123]=2,Lt[5125]=4;var Ct=[];Ct[32854]=2,Ct[32855]=2,Ct[36194]=2,Ct[34041]=4,Ct[33776]=.5,Ct[33777]=.5,Ct[33778]=1,Ct[33779]=1,Ct[35986]=.5,Ct[35987]=1,Ct[34798]=1,Ct[35840]=.5,Ct[35841]=.25,Ct[35842]=.5,Ct[35843]=.25,Ct[36196]=.5;var dt=[];dt[32854]=2,dt[32855]=2,dt[36194]=2,dt[33189]=2,dt[36168]=1,dt[34041]=4,dt[35907]=4,dt[34836]=16,dt[34842]=8,dt[34843]=6;var lt=function(je,ot,Je,st,It){function Nt(_t){this.id=bt++,this.refCount=1,this.renderbuffer=_t,this.format=32854,this.height=this.width=0,It.profile&&(this.stats={size:0})}function nr(_t){var Rt=_t.renderbuffer;je.bindRenderbuffer(36161,null),je.deleteRenderbuffer(Rt),_t.renderbuffer=null,_t.refCount=0,delete kt[_t.id],st.renderbufferCount--}var We={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};ot.ext_srgb&&(We.srgba=35907),ot.ext_color_buffer_half_float&&(We.rgba16f=34842,We.rgb16f=34843),ot.webgl_color_buffer_float&&(We.rgba32f=34836);var Fe=[];Object.keys(We).forEach(function(_t){Fe[We[_t]]=_t});var bt=0,kt={};return Nt.prototype.decRef=function(){0>=--this.refCount&&nr(this)},It.profile&&(st.getTotalRenderbufferSize=function(){var _t=0;return Object.keys(kt).forEach(function(Rt){_t+=kt[Rt].stats.size}),_t}),{create:function(_t,Rt){function Dt(Bt,tr){var er=0,Zt=0,_r=32854;if(typeof Bt=="object"&&Bt?("shape"in Bt?(Zt=Bt.shape,er=Zt[0]|0,Zt=Zt[1]|0):("radius"in Bt&&(er=Zt=Bt.radius|0),"width"in Bt&&(er=Bt.width|0),"height"in Bt&&(Zt=Bt.height|0)),"format"in Bt&&(_r=We[Bt.format])):typeof Bt=="number"?(er=Bt|0,Zt=typeof tr=="number"?tr|0:er):Bt||(er=Zt=1),er!==Ut.width||Zt!==Ut.height||_r!==Ut.format)return Dt.width=Ut.width=er,Dt.height=Ut.height=Zt,Ut.format=_r,je.bindRenderbuffer(36161,Ut.renderbuffer),je.renderbufferStorage(36161,_r,er,Zt),It.profile&&(Ut.stats.size=dt[Ut.format]*Ut.width*Ut.height),Dt.format=Fe[Ut.format],Dt}var Ut=new Nt(je.createRenderbuffer());return kt[Ut.id]=Ut,st.renderbufferCount++,Dt(_t,Rt),Dt.resize=function(Bt,tr){var er=Bt|0,Zt=tr|0||er;return er===Ut.width&&Zt===Ut.height||(Dt.width=Ut.width=er,Dt.height=Ut.height=Zt,je.bindRenderbuffer(36161,Ut.renderbuffer),je.renderbufferStorage(36161,Ut.format,er,Zt),It.profile&&(Ut.stats.size=dt[Ut.format]*Ut.width*Ut.height)),Dt},Dt._reglType="renderbuffer",Dt._renderbuffer=Ut,It.profile&&(Dt.stats=Ut.stats),Dt.destroy=function(){Ut.decRef()},Dt},clear:function(){be(kt).forEach(nr)},restore:function(){be(kt).forEach(function(_t){_t.renderbuffer=je.createRenderbuffer(),je.bindRenderbuffer(36161,_t.renderbuffer),je.renderbufferStorage(36161,_t.format,_t.width,_t.height)}),je.bindRenderbuffer(36161,null)}}},Te=[];Te[6408]=4,Te[6407]=3;var Le=[];Le[5121]=1,Le[5126]=4,Le[36193]=2;var Ue=["x","y","z","w"],et="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),ke={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ie={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},He={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ye={cw:2304,ccw:2305},ft=new ie(!1,!1,!1,function(){}),it=function(je,ot){function Je(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function st(kt,_t,Rt){var Dt=nr.pop()||new Je;Dt.startQueryIndex=kt,Dt.endQueryIndex=_t,Dt.sum=0,Dt.stats=Rt,We.push(Dt)}if(!ot.ext_disjoint_timer_query)return null;var It=[],Nt=[],nr=[],We=[],Fe=[],bt=[];return{beginQuery:function(kt){var _t=It.pop()||ot.ext_disjoint_timer_query.createQueryEXT();ot.ext_disjoint_timer_query.beginQueryEXT(35007,_t),Nt.push(_t),st(Nt.length-1,Nt.length,kt)},endQuery:function(){ot.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:st,update:function(){var kt,_t;if(kt=Nt.length,kt!==0){bt.length=Math.max(bt.length,kt+1),Fe.length=Math.max(Fe.length,kt+1),Fe[0]=0;var Rt=bt[0]=0;for(_t=kt=0;_t<Nt.length;++_t){var Dt=Nt[_t];ot.ext_disjoint_timer_query.getQueryObjectEXT(Dt,34919)?(Rt+=ot.ext_disjoint_timer_query.getQueryObjectEXT(Dt,34918),It.push(Dt)):Nt[kt++]=Dt,Fe[_t+1]=Rt,bt[_t+1]=kt}for(Nt.length=kt,_t=kt=0;_t<We.length;++_t){var Rt=We[_t],Ut=Rt.startQueryIndex,Dt=Rt.endQueryIndex;Rt.sum+=Fe[Dt]-Fe[Ut],Ut=bt[Ut],Dt=bt[Dt],Dt===Ut?(Rt.stats.gpuTime+=Rt.sum/1e6,nr.push(Rt)):(Rt.startQueryIndex=Ut,Rt.endQueryIndex=Dt,We[kt++]=Rt)}We.length=kt}},getNumPendingQueries:function(){return Nt.length},clear:function(){It.push.apply(It,Nt);for(var kt=0;kt<It.length;kt++)ot.ext_disjoint_timer_query.deleteQueryEXT(It[kt]);Nt.length=0,It.length=0},restore:function(){Nt.length=0,It.length=0}}};return function(je){function ot(){if(kn.length===0)Zt&&Zt.update(),fr=null;else{fr=de.next(ot),kt();for(var Wr=kn.length-1;0<=Wr;--Wr){var Vr=kn[Wr];Vr&&Vr(Fr,null,0)}Dt.flush(),Zt&&Zt.update()}}function Je(){!fr&&0<kn.length&&(fr=de.next(ot))}function st(){fr&&(de.cancel(ot),fr=null)}function It(Wr){Wr.preventDefault(),st(),ln.forEach(function(Vr){Vr()})}function Nt(Wr){Dt.getError(),Bt.restore(),jn.restore(),Wn.restore(),Nr.restore(),Pr.restore(),Ln.restore(),Tn.restore(),Zt&&Zt.restore(),pn.procs.refresh(),Je(),vt.forEach(function(Vr){Vr()})}function nr(Wr){function Vr(nn){var Jr={},Pn={};return Object.keys(nn).forEach(function(Gn){var ka=nn[Gn];fe.isDynamic(ka)?Pn[Gn]=fe.unbox(ka,Gn):Jr[Gn]=ka}),{dynamic:Pn,static:Jr}}function Qr(nn){for(;dr.length<nn;)dr.push(null);return dr}var ea=Vr(Wr.context||{}),Hr=Vr(Wr.uniforms||{}),En=Vr(Wr.attributes||{}),ta=Vr(function(nn){function Jr(Gn){if(Gn in Pn){var ka=Pn[Gn];delete Pn[Gn],Object.keys(ka).forEach(function(ca){Pn[Gn+"."+ca]=ka[ca]})}}var Pn=ee({},nn);return delete Pn.uniforms,delete Pn.attributes,delete Pn.context,delete Pn.vao,"stencil"in Pn&&Pn.stencil.op&&(Pn.stencil.opBack=Pn.stencil.opFront=Pn.stencil.op,delete Pn.stencil.op),Jr("blend"),Jr("depth"),Jr("cull"),Jr("stencil"),Jr("polygonOffset"),Jr("scissor"),Jr("sample"),"vao"in nn&&(Pn.vao=nn.vao),Pn}(Wr));Wr={gpuTime:0,cpuTime:0,count:0};var ea=pn.compile(ta,En,Hr,ea,Wr),ba=ea.draw,Wa=ea.batch,qa=ea.scope,dr=[];return ee(function(nn,Jr){var Pn;if(typeof nn=="function")return qa.call(this,null,nn,0);if(typeof Jr=="function")if(typeof nn=="number")for(Pn=0;Pn<nn;++Pn)qa.call(this,null,Jr,Pn);else if(Array.isArray(nn))for(Pn=0;Pn<nn.length;++Pn)qa.call(this,nn[Pn],Jr,Pn);else return qa.call(this,nn,Jr,0);else if(typeof nn=="number"){if(0<nn)return Wa.call(this,Qr(nn|0),nn|0)}else if(Array.isArray(nn)){if(nn.length)return Wa.call(this,nn,nn.length)}else return ba.call(this,nn)},{stats:Wr})}function We(Wr,Vr){var Qr=0;pn.procs.poll();var Hr=Vr.color;Hr&&(Dt.clearColor(+Hr[0]||0,+Hr[1]||0,+Hr[2]||0,+Hr[3]||0),Qr|=16384),"depth"in Vr&&(Dt.clearDepth(+Vr.depth),Qr|=256),"stencil"in Vr&&(Dt.clearStencil(Vr.stencil|0),Qr|=1024),Dt.clear(Qr)}function Fe(Wr){return kn.push(Wr),Je(),{cancel:function(){function Vr(){var Hr=re(kn,Vr);kn[Hr]=kn[kn.length-1],--kn.length,0>=kn.length&&st()}var Qr=re(kn,Wr);kn[Qr]=Vr}}}function bt(){var Wr=en.viewport,Vr=en.scissor_box;Wr[0]=Wr[1]=Vr[0]=Vr[1]=0,Fr.viewportWidth=Fr.framebufferWidth=Fr.drawingBufferWidth=Wr[2]=Vr[2]=Dt.drawingBufferWidth,Fr.viewportHeight=Fr.framebufferHeight=Fr.drawingBufferHeight=Wr[3]=Vr[3]=Dt.drawingBufferHeight}function kt(){Fr.tick+=1,Fr.time=Rt(),bt(),pn.procs.poll()}function _t(){bt(),pn.procs.refresh(),Zt&&Zt.update()}function Rt(){return(pe()-_r)/1e3}if(je=l(je),!je)return null;var Dt=je.gl,Ut=Dt.getContextAttributes();Dt.isContextLost();var Bt=h(Dt,je);if(!Bt)return null;var xn=c(),tr={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},er=Bt.extensions,Zt=it(Dt,er),_r=pe(),Gr=Dt.drawingBufferWidth,Or=Dt.drawingBufferHeight,Fr={tick:0,time:0,viewportWidth:Gr,viewportHeight:Or,framebufferWidth:Gr,framebufferHeight:Or,drawingBufferWidth:Gr,drawingBufferHeight:Or,pixelRatio:je.pixelRatio},Mn=ue(Dt,er),Wn=y(Dt,tr,je,function(Wr){return Tn.destroyBuffer(Wr)}),Tn=X(Dt,er,Mn,tr,Wn),Nn=T(Dt,er,Wn,tr),jn=z(Dt,xn,tr,je),Nr=N(Dt,er,Mn,function(){pn.procs.poll()},Fr,tr,je),Pr=lt(Dt,er,Mn,tr,je),Ln=G(Dt,er,Mn,Nr,Pr,tr),pn=oe(Dt,xn,er,Mn,Wn,Nn,Nr,Ln,{},Tn,jn,{elements:null,primitive:4,count:-1,offset:0,instances:-1},Fr,Zt,je),xn=B(Dt,Ln,pn.procs.poll,Fr),en=pn.next,_n=Dt.canvas,kn=[],ln=[],vt=[],Gt=[je.onDestroy],fr=null;_n&&(_n.addEventListener("webglcontextlost",It,!1),_n.addEventListener("webglcontextrestored",Nt,!1));var Cr=Ln.setFBO=nr({framebuffer:fe.define.call(null,1,"framebuffer")});return _t(),Ut=ee(nr,{clear:function(Wr){if("framebuffer"in Wr)if(Wr.framebuffer&&Wr.framebuffer_reglType==="framebufferCube")for(var Vr=0;6>Vr;++Vr)Cr(ee({framebuffer:Wr.framebuffer.faces[Vr]},Wr),We);else Cr(Wr,We);else We(null,Wr)},prop:fe.define.bind(null,1),context:fe.define.bind(null,2),this:fe.define.bind(null,3),draw:nr({}),buffer:function(Wr){return Wn.create(Wr,34962,!1,!1)},elements:function(Wr){return Nn.create(Wr,!1)},texture:Nr.create2D,cube:Nr.createCube,renderbuffer:Pr.create,framebuffer:Ln.create,framebufferCube:Ln.createCube,vao:Tn.createVAO,attributes:Ut,frame:Fe,on:function(Wr,Vr){var Qr;switch(Wr){case"frame":return Fe(Vr);case"lost":Qr=ln;break;case"restore":Qr=vt;break;case"destroy":Qr=Gt}return Qr.push(Vr),{cancel:function(){for(var Hr=0;Hr<Qr.length;++Hr)if(Qr[Hr]===Vr){Qr[Hr]=Qr[Qr.length-1],Qr.pop();break}}}},limits:Mn,hasExtension:function(Wr){return 0<=Mn.extensions.indexOf(Wr.toLowerCase())},read:xn,destroy:function(){kn.length=0,st(),_n&&(_n.removeEventListener("webglcontextlost",It),_n.removeEventListener("webglcontextrestored",Nt)),jn.clear(),Ln.clear(),Pr.clear(),Nr.clear(),Nn.clear(),Wn.clear(),Tn.clear(),Zt&&Zt.clear(),Gt.forEach(function(Wr){Wr()})},_gl:Dt,_refresh:_t,poll:function(){kt(),Zt&&Zt.update()},now:Rt,stats:tr}),je.onDone(null,Ut),Ut}})},{}],541:[function(e,v,S){var r="",a;v.exports=u;function u(c,t){if(typeof c!="string")throw new TypeError("expected a string");if(t===1)return c;if(t===2)return c+c;var f=c.length*t;if(a!==c||typeof a>"u")a=c,r="";else if(r.length>=f)return r.substr(0,f);for(;f>r.length&&t>1;)t&1&&(r+=c),t>>=1,c+=c;return r+=c,r=r.substr(0,f),r}},{}],542:[function(e,v,S){(function(r){(function(){v.exports=r.performance&&r.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof Hs<"u"?Hs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],543:[function(e,v,S){v.exports=r;function r(a){for(var u=a.length,c=a[a.length-1],t=u,f=u-2;f>=0;--f){var n=c,o=a[f];c=n+o;var l=c-n,h=o-l;h&&(a[--t]=c,c=h)}for(var i=0,f=t;f<u;++f){var n=a[f],o=c;c=n+o;var l=c-n,h=o-l;h&&(a[i++]=h)}return a[i++]=c,a.length=i,a}},{}],544:[function(e,v,S){var r=e("two-product"),a=e("robust-sum"),u=e("robust-scale"),c=e("robust-compress"),t=6;function f(d,g){for(var b=new Array(d.length-1),m=1;m<d.length;++m)for(var x=b[m-1]=new Array(d.length-1),w=0,y=0;w<d.length;++w)w!==g&&(x[y++]=d[m][w]);return b}function n(d){for(var g=new Array(d),b=0;b<d;++b){g[b]=new Array(d);for(var m=0;m<d;++m)g[b][m]=["m[",b,"][",m,"]"].join("")}return g}function o(d){return d&1?"-":""}function l(d){if(d.length===1)return d[0];if(d.length===2)return["sum(",d[0],",",d[1],")"].join("");var g=d.length>>1;return["sum(",l(d.slice(0,g)),",",l(d.slice(g)),")"].join("")}function h(d){if(d.length===2)return["sum(prod(",d[0][0],",",d[1][1],"),prod(-",d[0][1],",",d[1][0],"))"].join("");for(var g=[],b=0;b<d.length;++b)g.push(["scale(",h(f(d,b)),",",o(b),d[0][b],")"].join(""));return l(g)}function i(d){var g=new Function("sum","scale","prod","compress",["function robustDeterminant",d,"(m){return compress(",h(n(d)),")};return robustDeterminant",d].join(""));return g(a,u,r,c)}var s=[function(){return[0]},function(g){return[g[0][0]]}];function p(){for(;s.length<t;)s.push(i(s.length));for(var d=[],g=["function robustDeterminant(m){switch(m.length){"],b=0;b<t;++b)d.push("det"+b),g.push("case ",b,":return det",b,"(m);");g.push("}	var det=CACHE[m.length];	if(!det)	det=CACHE[m.length]=gen(m.length);	return det(m);	}	return robustDeterminant"),d.push("CACHE","gen",g.join(""));var m=Function.apply(void 0,d);v.exports=m.apply(void 0,s.concat([s,i]));for(var b=0;b<s.length;++b)v.exports[b]=s[b]}p()},{"robust-compress":543,"robust-scale":550,"robust-sum":553,"two-product":582}],545:[function(e,v,S){var r=e("two-product"),a=e("robust-sum");v.exports=u;function u(c,t){for(var f=r(c[0],t[0]),n=1;n<c.length;++n)f=a(f,r(c[n],t[n]));return f}},{"robust-sum":553,"two-product":582}],546:[function(e,v,S){var r=e("two-product"),a=e("robust-sum"),u=e("robust-subtract"),c=e("robust-scale"),t=6;function f(y,T){for(var M=new Array(y.length-1),P=1;P<y.length;++P)for(var L=M[P-1]=new Array(y.length-1),I=0,E=0;I<y.length;++I)I!==T&&(L[E++]=y[P][I]);return M}function n(y){for(var T=new Array(y),M=0;M<y;++M){T[M]=new Array(y);for(var P=0;P<y;++P)T[M][P]=["m",P,"[",y-M-2,"]"].join("")}return T}function o(y){if(y.length===1)return y[0];if(y.length===2)return["sum(",y[0],",",y[1],")"].join("");var T=y.length>>1;return["sum(",o(y.slice(0,T)),",",o(y.slice(T)),")"].join("")}function l(y,T){if(y.charAt(0)==="m")if(T.charAt(0)==="w"){var M=y.split("[");return["w",T.substr(1),"m",M[0].substr(1)].join("")}else return["prod(",y,",",T,")"].join("");else return l(T,y)}function h(y){return y&!0?"-":""}function i(y){if(y.length===2)return[["diff(",l(y[0][0],y[1][1]),",",l(y[1][0],y[0][1]),")"].join("")];for(var T=[],M=0;M<y.length;++M)T.push(["scale(",o(i(f(y,M))),",",h(M),y[0][M],")"].join(""));return T}function s(y,T){for(var M=[],P=0;P<T-2;++P)M.push(["prod(m",y,"[",P,"],m",y,"[",P,"])"].join(""));return o(M)}function p(y){for(var T=[],M=[],P=n(y),L=0;L<y;++L)P[0][L]="1",P[y-1][L]="w"+L;for(var L=0;L<y;++L)(L&1)===0?T.push.apply(T,i(f(P,L))):M.push.apply(M,i(f(P,L)));for(var I=o(T),E=o(M),k="exactInSphere"+y,C=[],L=0;L<y;++L)C.push("m"+L);for(var D=["function ",k,"(",C.join(),"){"],L=0;L<y;++L){D.push("var w",L,"=",s(L,y),";");for(var F=0;F<y;++F)F!==L&&D.push("var w",L,"m",F,"=scale(w",L,",m",F,"[0]);")}D.push("var p=",I,",n=",E,",d=diff(p,n);return d[d.length-1];}return ",k);var N=new Function("sum","diff","prod","scale",D.join(""));return N(a,u,r,c)}function d(){return 0}function g(){return 0}function b(){return 0}var m=[d,g,b];function x(y){var T=m[y.length];return T||(T=m[y.length]=p(y.length)),T.apply(void 0,y)}function w(){for(;m.length<=t;)m.push(p(m.length));for(var y=[],T=["slow"],M=0;M<=t;++M)y.push("a"+M),T.push("o"+M);for(var P=["function testInSphere(",y.join(),"){switch(arguments.length){case 0:case 1:return 0;"],M=2;M<=t;++M)P.push("case ",M,":return o",M,"(",y.slice(0,M).join(),");");P.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),T.push(P.join(""));var L=Function.apply(void 0,T);v.exports=L.apply(void 0,[x].concat(m));for(var M=0;M<=t;++M)v.exports[M]=m[M]}w()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":582}],547:[function(e,v,S){var r=e("robust-determinant"),a=6;function u(o){for(var l="robustLinearSolve"+o+"d",h=["function ",l,"(A,b){return ["],i=0;i<o;++i){h.push("det([");for(var s=0;s<o;++s){s>0&&h.push(","),h.push("[");for(var p=0;p<o;++p)p>0&&h.push(","),p===i?h.push("+b[",s,"]"):h.push("+A[",s,"][",p,"]");h.push("]")}h.push("]),")}h.push("det(A)]}return ",l);var d=new Function("det",h.join(""));return o<6?d(r[o]):d(r)}function c(){return[0]}function t(o,l){return[[l[0]],[o[0][0]]]}var f=[c,t];function n(){for(;f.length<a;)f.push(u(f.length));for(var o=[],l=["function dispatchLinearSolve(A,b){switch(A.length){"],h=0;h<a;++h)o.push("s"+h),l.push("case ",h,":return s",h,"(A,b);");l.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),o.push("CACHE","g",l.join(""));var i=Function.apply(void 0,o);v.exports=i.apply(void 0,f.concat([f,u]));for(var h=0;h<a;++h)v.exports[h]=f[h]}n()},{"robust-determinant":544}],548:[function(e,v,S){var r=e("two-product"),a=e("robust-sum"),u=e("robust-scale"),c=e("robust-subtract"),t=5,f=11102230246251565e-32,n=(3+16*f)*f,o=(7+56*f)*f;function l(y,T){for(var M=new Array(y.length-1),P=1;P<y.length;++P)for(var L=M[P-1]=new Array(y.length-1),I=0,E=0;I<y.length;++I)I!==T&&(L[E++]=y[P][I]);return M}function h(y){for(var T=new Array(y),M=0;M<y;++M){T[M]=new Array(y);for(var P=0;P<y;++P)T[M][P]=["m",P,"[",y-M-1,"]"].join("")}return T}function i(y){return y&1?"-":""}function s(y){if(y.length===1)return y[0];if(y.length===2)return["sum(",y[0],",",y[1],")"].join("");var T=y.length>>1;return["sum(",s(y.slice(0,T)),",",s(y.slice(T)),")"].join("")}function p(y){if(y.length===2)return[["sum(prod(",y[0][0],",",y[1][1],"),prod(-",y[0][1],",",y[1][0],"))"].join("")];for(var T=[],M=0;M<y.length;++M)T.push(["scale(",s(p(l(y,M))),",",i(M),y[0][M],")"].join(""));return T}function d(y){for(var T=[],M=[],P=h(y),L=[],I=0;I<y;++I)(I&1)===0?T.push.apply(T,p(l(P,I))):M.push.apply(M,p(l(P,I))),L.push("m"+I);var E=s(T),k=s(M),C="orientation"+y+"Exact",D=["function ",C,"(",L.join(),"){var p=",E,",n=",k,",d=sub(p,n);	return d[d.length-1];};return ",C].join(""),F=new Function("sum","prod","scale","sub",D);return F(a,r,u,c)}var g=d(3),b=d(4),m=[function(){return 0},function(){return 0},function(T,M){return M[0]-T[0]},function(T,M,P){var L=(T[1]-P[1])*(M[0]-P[0]),I=(T[0]-P[0])*(M[1]-P[1]),E=L-I,k;if(L>0){if(I<=0)return E;k=L+I}else if(L<0){if(I>=0)return E;k=-(L+I)}else return E;var C=n*k;return E>=C||E<=-C?E:g(T,M,P)},function(T,M,P,L){var I=T[0]-L[0],E=M[0]-L[0],k=P[0]-L[0],C=T[1]-L[1],D=M[1]-L[1],F=P[1]-L[1],N=T[2]-L[2],G=M[2]-L[2],U=P[2]-L[2],X=E*F,z=k*D,B=k*C,j=I*F,V=I*D,K=E*C,te=N*(X-z)+G*(B-j)+U*(V-K),$=(Math.abs(X)+Math.abs(z))*Math.abs(N)+(Math.abs(B)+Math.abs(j))*Math.abs(G)+(Math.abs(V)+Math.abs(K))*Math.abs(U),ie=o*$;return te>ie||-te>ie?te:b(T,M,P,L)}];function x(y){var T=m[y.length];return T||(T=m[y.length]=d(y.length)),T.apply(void 0,y)}function w(){for(;m.length<=t;)m.push(d(m.length));for(var y=[],T=["slow"],M=0;M<=t;++M)y.push("a"+M),T.push("o"+M);for(var P=["function getOrientation(",y.join(),"){switch(arguments.length){case 0:case 1:return 0;"],M=2;M<=t;++M)P.push("case ",M,":return o",M,"(",y.slice(0,M).join(),");");P.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),T.push(P.join(""));var L=Function.apply(void 0,T);v.exports=L.apply(void 0,[x].concat(m));for(var M=0;M<=t;++M)v.exports[M]=m[M]}w()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":582}],549:[function(e,v,S){var r=e("robust-sum"),a=e("robust-scale");v.exports=u;function u(c,t){if(c.length===1)return a(t,c[0]);if(t.length===1)return a(c,t[0]);if(c.length===0||t.length===0)return[0];var f=[0];if(c.length<t.length)for(var n=0;n<c.length;++n)f=r(f,a(t,c[n]));else for(var n=0;n<t.length;++n)f=r(f,a(c,t[n]));return f}},{"robust-scale":550,"robust-sum":553}],550:[function(e,v,S){var r=e("two-product"),a=e("two-sum");v.exports=u;function u(c,t){var f=c.length;if(f===1){var n=r(c[0],t);return n[0]?n:[n[1]]}var o=new Array(2*f),l=[.1,.1],h=[.1,.1],i=0;r(c[0],t,l),l[0]&&(o[i++]=l[0]);for(var s=1;s<f;++s){r(c[s],t,h);var p=l[1];a(p,h[0],l),l[0]&&(o[i++]=l[0]);var d=h[1],g=l[1],b=d+g,m=b-d,x=g-m;l[1]=b,x&&(o[i++]=x)}return l[1]&&(o[i++]=l[1]),i===0&&(o[i++]=0),o.length=i,o}},{"two-product":582,"two-sum":583}],551:[function(e,v,S){v.exports=u;var r=e("robust-orientation")[3];function a(c,t,f,n){for(var o=0;o<2;++o){var l=c[o],h=t[o],i=Math.min(l,h),s=Math.max(l,h),p=f[o],d=n[o],g=Math.min(p,d),b=Math.max(p,d);if(b<i||s<g)return!1}return!0}function u(c,t,f,n){var o=r(c,f,n),l=r(t,f,n);if(o>0&&l>0||o<0&&l<0)return!1;var h=r(f,c,t),i=r(n,c,t);return h>0&&i>0||h<0&&i<0?!1:o===0&&l===0&&h===0&&i===0?a(c,t,f,n):!0}},{"robust-orientation":548}],552:[function(e,v,S){v.exports=a;function r(u,c){var t=u+c,f=t-u,n=t-f,o=c-f,l=u-n,h=l+o;return h?[h,t]:[t]}function a(u,c){var t=u.length|0,f=c.length|0;if(t===1&&f===1)return r(u[0],-c[0]);var n=t+f,o=new Array(n),l=0,h=0,i=0,s=Math.abs,p=u[h],d=s(p),g=-c[i],b=s(g),m,x;d<b?(x=p,h+=1,h<t&&(p=u[h],d=s(p))):(x=g,i+=1,i<f&&(g=-c[i],b=s(g))),h<t&&d<b||i>=f?(m=p,h+=1,h<t&&(p=u[h],d=s(p))):(m=g,i+=1,i<f&&(g=-c[i],b=s(g)));for(var w=m+x,y=w-m,T=x-y,M=T,P=w,L,I,E,k,C;h<t&&i<f;)d<b?(m=p,h+=1,h<t&&(p=u[h],d=s(p))):(m=g,i+=1,i<f&&(g=-c[i],b=s(g))),x=M,w=m+x,y=w-m,T=x-y,T&&(o[l++]=T),L=P+w,I=L-P,E=L-I,k=w-I,C=P-E,M=C+k,P=L;for(;h<t;)m=p,x=M,w=m+x,y=w-m,T=x-y,T&&(o[l++]=T),L=P+w,I=L-P,E=L-I,k=w-I,C=P-E,M=C+k,P=L,h+=1,h<t&&(p=u[h]);for(;i<f;)m=g,x=M,w=m+x,y=w-m,T=x-y,T&&(o[l++]=T),L=P+w,I=L-P,E=L-I,k=w-I,C=P-E,M=C+k,P=L,i+=1,i<f&&(g=-c[i]);return M&&(o[l++]=M),P&&(o[l++]=P),l||(o[l++]=0),o.length=l,o}},{}],553:[function(e,v,S){v.exports=a;function r(u,c){var t=u+c,f=t-u,n=t-f,o=c-f,l=u-n,h=l+o;return h?[h,t]:[t]}function a(u,c){var t=u.length|0,f=c.length|0;if(t===1&&f===1)return r(u[0],c[0]);var n=t+f,o=new Array(n),l=0,h=0,i=0,s=Math.abs,p=u[h],d=s(p),g=c[i],b=s(g),m,x;d<b?(x=p,h+=1,h<t&&(p=u[h],d=s(p))):(x=g,i+=1,i<f&&(g=c[i],b=s(g))),h<t&&d<b||i>=f?(m=p,h+=1,h<t&&(p=u[h],d=s(p))):(m=g,i+=1,i<f&&(g=c[i],b=s(g)));for(var w=m+x,y=w-m,T=x-y,M=T,P=w,L,I,E,k,C;h<t&&i<f;)d<b?(m=p,h+=1,h<t&&(p=u[h],d=s(p))):(m=g,i+=1,i<f&&(g=c[i],b=s(g))),x=M,w=m+x,y=w-m,T=x-y,T&&(o[l++]=T),L=P+w,I=L-P,E=L-I,k=w-I,C=P-E,M=C+k,P=L;for(;h<t;)m=p,x=M,w=m+x,y=w-m,T=x-y,T&&(o[l++]=T),L=P+w,I=L-P,E=L-I,k=w-I,C=P-E,M=C+k,P=L,h+=1,h<t&&(p=u[h]);for(;i<f;)m=g,x=M,w=m+x,y=w-m,T=x-y,T&&(o[l++]=T),L=P+w,I=L-P,E=L-I,k=w-I,C=P-E,M=C+k,P=L,i+=1,i<f&&(g=c[i]);return M&&(o[l++]=M),P&&(o[l++]=P),l||(o[l++]=0),o.length=l,o}},{}],554:[function(e,v,S){v.exports=function(a){return a<0?-1:a>0?1:0}},{}],555:[function(e,v,S){v.exports=u;var r=e("boundary-cells"),a=e("reduce-simplicial-complex");function u(c){return a(r(c))}},{"boundary-cells":100,"reduce-simplicial-complex":533}],556:[function(e,v,S){v.exports=i;var r=e("ndarray"),a=e("typedarray-pool"),u=e("ndarray-sort"),c=e("./lib/codegen");function t(s){for(var p=s.length,d=0,g=0;g<p;++g)d=Math.max(d,s[g].length)|0;return d-1}function f(s,p){for(var d=s.length,g=a.mallocUint8(d),b=0;b<d;++b)g[b]=s[b]<p|0;return g}function n(s,p){for(var d=s.length,g=p*(p+1)/2*d|0,b=a.mallocUint32(g*2),m=0,x=0;x<d;++x)for(var w=s[x],p=w.length,y=0;y<p;++y)for(var T=0;T<y;++T){var M=w[T],P=w[y];b[m++]=Math.min(M,P)|0,b[m++]=Math.max(M,P)|0}var L=m/2|0;u(r(b,[L,2]));for(var I=2,x=2;x<m;x+=2)b[x-2]===b[x]&&b[x-1]===b[x+1]||(b[I++]=b[x],b[I++]=b[x+1]);return r(b,[I/2|0,2])}function o(s,p,d,g){for(var b=s.data,m=s.shape[0],x=a.mallocDouble(m),w=0,y=0;y<m;++y){var T=b[2*y],M=b[2*y+1];if(d[T]!==d[M]){var P=p[T],L=p[M];b[2*w]=T,b[2*w+1]=M,x[w++]=(L-g)/(L-P)}}return s.shape[0]=w,r(x,[w])}function l(s,p){var d=a.mallocInt32(p*2),g=s.shape[0],b=s.data;d[0]=0;for(var m=0,x=0;x<g;++x){var w=b[2*x];if(w!==m){for(d[2*m+1]=x;++m<w;)d[2*m]=x,d[2*m+1]=x;d[2*m]=x}}for(d[2*m+1]=g;++m<p;)d[2*m]=d[2*m+1]=g;return d}function h(s){for(var p=s.shape[0]|0,d=s.data,g=new Array(p),b=0;b<p;++b)g[b]=[d[2*b],d[2*b+1]];return g}function i(s,p,d,g){d=d||0,typeof g>"u"&&(g=t(s));var b=s.length;if(b===0||g<1)return{cells:[],vertexIds:[],vertexWeights:[]};var m=f(p,+d),x=n(s,g),w=o(x,p,m,+d),y=l(x,p.length|0),T=c(g)(s,x.data,y,m),M=h(x),P=[].slice.call(w.data,0,w.shape[0]);return a.free(m),a.free(x.data),a.free(w.data),a.free(y),{cells:T,vertexIds:M,vertexWeights:P}}},{"./lib/codegen":557,ndarray:495,"ndarray-sort":494,"typedarray-pool":595}],557:[function(e,v,S){v.exports=t;var r=e("typedarray-pool"),a=e("marching-simplex-table"),u={};function c(f){var n=0,o=new Array(f+1);o[0]=[[]];for(var l=1;l<=f;++l)for(var h=o[l]=a(l),i=0;i<h.length;++i)n=Math.max(n,h[l].length);var s=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",f,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"];function p(b){if(!(b.length<=0)){s.push("R.push(");for(var m=0;m<b.length;++m){var x=b[m];m>0&&s.push(","),s.push("[");for(var w=0;w<x.length;++w){var y=x[w];w>0&&s.push(","),s.push("B(C,E,c[",y[0],"],c[",y[1],"])")}s.push("]")}s.push(");")}}for(var l=f+1;l>1;--l){l<f+1&&s.push("else "),s.push("if(l===",l,"){");for(var d=[],i=0;i<l;++i)d.push("(S[c["+i+"]]<<"+i+")");s.push("var M=",d.join("+"),";if(M===0||M===",(1<<l)-1,"){continue}switch(M){");for(var h=o[l-1],i=0;i<h.length;++i)s.push("case ",i,":"),p(h[i]),s.push("break;");s.push("}}")}s.push("}return R;};return getContour",f,"d");var g=new Function("pool",s.join(""));return g(r)}function t(f){var n=u[f];return n||(n=u[f]=c(f)),n}},{"marching-simplex-table":474,"typedarray-pool":595}],558:[function(e,v,S){var r=e("bit-twiddle"),a=e("union-find");function u(w){for(var y=0,T=Math.max,M=0,P=w.length;M<P;++M)y=T(y,w[M].length);return y-1}S.dimension=u;function c(w){for(var y=-1,T=Math.max,M=0,P=w.length;M<P;++M)for(var L=w[M],I=0,E=L.length;I<E;++I)y=T(y,L[I]);return y+1}S.countVertices=c;function t(w){for(var y=new Array(w.length),T=0,M=w.length;T<M;++T)y[T]=w[T].slice(0);return y}S.cloneCells=t;function f(w,y){var T=w.length,M=w.length-y.length,P=Math.min;if(M)return M;switch(T){case 0:return 0;case 1:return w[0]-y[0];case 2:var C=w[0]+w[1]-y[0]-y[1];return C||P(w[0],w[1])-P(y[0],y[1]);case 3:var L=w[0]+w[1],I=y[0]+y[1];if(C=L+w[2]-(I+y[2]),C)return C;var E=P(w[0],w[1]),k=P(y[0],y[1]),C=P(E,w[2])-P(k,y[2]);return C||P(E+w[2],L)-P(k+y[2],I);default:var D=w.slice(0);D.sort();var F=y.slice(0);F.sort();for(var N=0;N<T;++N)if(M=D[N]-F[N],M)return M;return 0}}S.compareCells=f;function n(w,y){return f(w[0],y[0])}function o(w,y){if(y){for(var T=w.length,M=new Array(T),P=0;P<T;++P)M[P]=[w[P],y[P]];M.sort(n);for(var P=0;P<T;++P)w[P]=M[P][0],y[P]=M[P][1];return w}else return w.sort(f),w}S.normalize=o;function l(w){if(w.length===0)return[];for(var y=1,T=w.length,M=1;M<T;++M){var P=w[M];if(f(P,w[M-1])){if(M===y){y++;continue}w[y++]=P}}return w.length=y,w}S.unique=l;function h(w,y){for(var T=0,M=w.length-1,P=-1;T<=M;){var L=T+M>>1,I=f(w[L],y);I<=0?(I===0&&(P=L),T=L+1):I>0&&(M=L-1)}return P}S.findCell=h;function i(w,y){for(var T=new Array(w.length),M=0,P=T.length;M<P;++M)T[M]=[];for(var L=[],M=0,I=y.length;M<I;++M)for(var E=y[M],k=E.length,C=1,D=1<<k;C<D;++C){L.length=r.popCount(C);for(var F=0,N=0;N<k;++N)C&1<<N&&(L[F++]=E[N]);var G=h(w,L);if(!(G<0))for(;T[G++].push(M),!(G>=w.length||f(w[G],L)!==0););}return T}S.incidence=i;function s(w,y){if(!y)return i(l(d(w,0)),w);for(var T=new Array(y),M=0;M<y;++M)T[M]=[];for(var M=0,P=w.length;M<P;++M)for(var L=w[M],I=0,E=L.length;I<E;++I)T[L[I]].push(M);return T}S.dual=s;function p(w){for(var y=[],T=0,M=w.length;T<M;++T)for(var P=w[T],L=P.length|0,I=1,E=1<<L;I<E;++I){for(var k=[],C=0;C<L;++C)I>>>C&1&&k.push(P[C]);y.push(k)}return o(y)}S.explode=p;function d(w,y){if(y<0)return[];for(var T=[],M=(1<<y+1)-1,P=0;P<w.length;++P)for(var L=w[P],I=M;I<1<<L.length;I=r.nextCombination(I)){for(var E=new Array(y+1),k=0,C=0;C<L.length;++C)I&1<<C&&(E[k++]=L[C]);T.push(E)}return o(T)}S.skeleton=d;function g(w){for(var y=[],T=0,M=w.length;T<M;++T)for(var P=w[T],L=0,I=P.length;L<I;++L){for(var E=new Array(P.length-1),k=0,C=0;k<I;++k)k!==L&&(E[C++]=P[k]);y.push(E)}return o(y)}S.boundary=g;function b(w,y){for(var T=new a(y),M=0;M<w.length;++M)for(var P=w[M],L=0;L<P.length;++L)for(var I=L+1;I<P.length;++I)T.link(P[L],P[I]);for(var E=[],k=T.ranks,M=0;M<k.length;++M)k[M]=-1;for(var M=0;M<w.length;++M){var C=T.find(w[M][0]);k[C]<0?(k[C]=E.length,E.push([w[M].slice(0)])):E[k[C]].push(w[M].slice(0))}return E}function m(w){for(var y=l(o(d(w,0))),T=new a(y.length),M=0;M<w.length;++M)for(var P=w[M],L=0;L<P.length;++L)for(var I=h(y,[P[L]]),E=L+1;E<P.length;++E)T.link(I,h(y,[P[E]]));for(var k=[],C=T.ranks,M=0;M<C.length;++M)C[M]=-1;for(var M=0;M<w.length;++M){var D=T.find(h(y,[w[M][0]]));C[D]<0?(C[D]=k.length,k.push([w[M].slice(0)])):k[C[D]].push(w[M].slice(0))}return k}function x(w,y){return y?b(w,y):m(w)}S.connectedComponents=x},{"bit-twiddle":97,"union-find":596}],559:[function(e,v,S){arguments[4][97][0].apply(S,arguments)},{dup:97}],560:[function(e,v,S){arguments[4][558][0].apply(S,arguments)},{"bit-twiddle":559,dup:558,"union-find":561}],561:[function(e,v,S){v.exports=r;function r(a){this.roots=new Array(a),this.ranks=new Array(a);for(var u=0;u<a;++u)this.roots[u]=u,this.ranks[u]=0}r.prototype.length=function(){return this.roots.length},r.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},r.prototype.find=function(a){for(var u=this.roots;u[a]!==a;){var c=u[a];u[a]=u[c],a=c}return a},r.prototype.link=function(a,u){var c=this.find(a),t=this.find(u);if(c!==t){var f=this.ranks,n=this.roots,o=f[c],l=f[t];o<l?n[c]=t:l<o?n[t]=c:(n[t]=c,++f[c])}}},{}],562:[function(e,v,S){v.exports=c;var r=e("robust-orientation"),a=e("simplicial-complex");function u(t,f,n){var o=Math.abs(r(t,f,n)),l=Math.sqrt(Math.pow(f[0]-n[0],2)+Math.pow(f[1]-n[1],2));return o/l}function c(t,f,n){for(var o=f.length,l=t.length,h=new Array(o),i=new Array(o),s=new Array(o),p=new Array(o),d=0;d<o;++d)h[d]=i[d]=-1,s[d]=1/0,p[d]=!1;for(var d=0;d<l;++d){var g=t[d];if(g.length!==2)throw new Error("Input must be a graph");var b=g[1],m=g[0];i[m]!==-1?i[m]=-2:i[m]=b,h[b]!==-1?h[b]=-2:h[b]=m}function x(z){if(p[z])return 1/0;var B=h[z],j=i[z];return B<0||j<0?1/0:u(f[z],f[B],f[j])}function w(z,B){var j=k[z],V=k[B];k[z]=V,k[B]=j,C[j]=B,C[V]=z}function y(z){return s[k[z]]}function T(z){return z&1?z-1>>1:(z>>1)-1}function M(z){for(var B=y(z);;){var j=B,V=2*z+1,K=2*(z+1),te=z;if(V<F){var $=y(V);$<j&&(te=V,j=$)}if(K<F){var ie=y(K);ie<j&&(te=K)}if(te===z)return z;w(z,te),z=te}}function P(z){for(var B=y(z);z>0;){var j=T(z);if(j>=0){var V=y(j);if(B<V){w(z,j),z=j;continue}}return z}}function L(){if(F>0){var z=k[0];return w(0,F-1),F-=1,M(0),z}return-1}function I(z,B){var j=k[z];return s[j]===B?z:(s[j]=-1/0,P(z),L(),s[j]=B,F+=1,P(F-1))}function E(z){if(!p[z]){p[z]=!0;var B=h[z],j=i[z];h[j]>=0&&(h[j]=B),i[B]>=0&&(i[B]=j),C[B]>=0&&I(C[B],x(B)),C[j]>=0&&I(C[j],x(j))}}for(var k=[],C=new Array(o),d=0;d<o;++d){var D=s[d]=x(d);D<1/0?(C[d]=k.length,k.push(d)):C[d]=-1}for(var F=k.length,d=F>>1;d>=0;--d)M(d);for(;;){var N=L();if(N<0||s[N]>n)break;E(N)}for(var G=[],d=0;d<o;++d)p[d]||(C[d]=G.length,G.push(f[d].slice()));G.length;function U(z,B){if(z[B]<0)return B;var j=B,V=B;do{var K=z[V];if(!p[V]||K<0||K===V||(V=K,K=z[V],!p[V]||K<0||K===V))break;V=K,j=z[j]}while(j!==V);for(var te=B;te!==V;te=z[te])z[te]=V;return V}var X=[];return t.forEach(function(z){var B=U(h,z[0]),j=U(i,z[1]);if(B>=0&&j>=0&&B!==j){var V=C[B],K=C[j];V!==K&&X.push([V,K])}}),a.unique(a.normalize(X)),{positions:G,edges:X}}},{"robust-orientation":548,"simplicial-complex":560}],563:[function(e,v,S){v.exports=u;var r=e("robust-orientation");function a(c,t){var f,n;if(t[0][0]<t[1][0])f=t[0],n=t[1];else if(t[0][0]>t[1][0])f=t[1],n=t[0];else{var o=Math.min(c[0][1],c[1][1]),l=Math.max(c[0][1],c[1][1]),h=Math.min(t[0][1],t[1][1]),i=Math.max(t[0][1],t[1][1]);return l<h?l-h:o>i?o-i:l-i}var s,p;c[0][1]<c[1][1]?(s=c[0],p=c[1]):(s=c[1],p=c[0]);var d=r(n,f,s);return d||(d=r(n,f,p),d)?d:p-n}function u(c,t){var f,n;if(t[0][0]<t[1][0])f=t[0],n=t[1];else if(t[0][0]>t[1][0])f=t[1],n=t[0];else return a(t,c);var o,l;if(c[0][0]<c[1][0])o=c[0],l=c[1];else if(c[0][0]>c[1][0])o=c[1],l=c[0];else return-a(c,t);var h=r(f,n,l),i=r(f,n,o);if(h<0){if(i<=0)return h}else if(h>0){if(i>=0)return h}else if(i)return i;if(h=r(l,o,n),i=r(l,o,f),h<0){if(i<=0)return h}else if(h>0){if(i>=0)return h}else if(i)return i;return n[0]-l[0]}},{"robust-orientation":548}],564:[function(e,v,S){arguments[4][243][0].apply(S,arguments)},{dup:243}],565:[function(e,v,S){v.exports=i;var r=e("binary-search-bounds"),a=e("functional-red-black-tree"),u=e("robust-orientation"),c=e("./lib/order-segments");function t(s,p,d){this.slabs=s,this.coordinates=p,this.horizontal=d}var f=t.prototype;function n(s,p){return s.y-p}function o(s,p){for(var d=null;s;){var g=s.key,b,m;g[0][0]<g[1][0]?(b=g[0],m=g[1]):(b=g[1],m=g[0]);var x=u(b,m,p);if(x<0)s=s.left;else if(x>0)if(p[0]!==g[1][0])d=s,s=s.right;else{var w=o(s.right,p);if(w)return w;s=s.left}else{if(p[0]!==g[1][0])return s;var w=o(s.right,p);if(w)return w;s=s.left}}return d}f.castUp=function(s){var p=r.le(this.coordinates,s[0]);if(p<0)return-1;this.slabs[p];var d=o(this.slabs[p],s),g=-1;if(d&&(g=d.value),this.coordinates[p]===s[0]){var b=null;if(d&&(b=d.key),p>0){var m=o(this.slabs[p-1],s);m&&(b?c(m.key,b)>0&&(b=m.key,g=m.value):(g=m.value,b=m.key))}var x=this.horizontal[p];if(x.length>0){var w=r.ge(x,s[1],n);if(w<x.length){var y=x[w];if(s[1]===y.y){if(y.closed)return y.index;for(;w<x.length-1&&x[w+1].y===s[1];)if(w=w+1,y=x[w],y.closed)return y.index;if(y.y===s[1]&&!y.start){if(w=w+1,w>=x.length)return g;y=x[w]}}if(y.start)if(b){var T=u(b[0],b[1],[s[0],y.y]);b[0][0]>b[1][0]&&(T=-T),T>0&&(g=y.index)}else g=y.index;else y.y!==s[1]&&(g=y.index)}}}return g};function l(s,p,d,g){this.y=s,this.index=p,this.start=d,this.closed=g}function h(s,p,d,g){this.x=s,this.segment=p,this.create=d,this.index=g}function i(s){for(var p=s.length,d=2*p,g=new Array(d),b=0;b<p;++b){var m=s[b],x=m[0][0]<m[1][0];g[2*b]=new h(m[0][0],m,x,b),g[2*b+1]=new h(m[1][0],m,!x,b)}g.sort(function(E,k){var C=E.x-k.x;return C||(C=E.create-k.create,C)?C:Math.min(E.segment[0][1],E.segment[1][1])-Math.min(k.segment[0][1],k.segment[1][1])});for(var w=a(c),y=[],T=[],M=[],b=0;b<d;){for(var P=g[b].x,L=[];b<d;){var I=g[b];if(I.x!==P)break;b+=1,I.segment[0][0]===I.x&&I.segment[1][0]===I.x?I.create&&(I.segment[0][1]<I.segment[1][1]?(L.push(new l(I.segment[0][1],I.index,!0,!0)),L.push(new l(I.segment[1][1],I.index,!1,!1))):(L.push(new l(I.segment[1][1],I.index,!0,!1)),L.push(new l(I.segment[0][1],I.index,!1,!0)))):I.create?w=w.insert(I.segment,I.index):w=w.remove(I.segment)}y.push(w.root),T.push(P),M.push(L)}return new t(y,T,M)}},{"./lib/order-segments":563,"binary-search-bounds":564,"functional-red-black-tree":247,"robust-orientation":548}],566:[function(e,v,S){var r=e("robust-dot-product"),a=e("robust-sum");v.exports=t,v.exports.positive=f,v.exports.negative=n;function u(o,l){var h=a(r(o,l),[l[l.length-1]]);return h[h.length-1]}function c(o,l,h,i){var s=i-l,p=-l/s;p<0?p=0:p>1&&(p=1);for(var d=1-p,g=o.length,b=new Array(g),m=0;m<g;++m)b[m]=p*o[m]+d*h[m];return b}function t(o,l){for(var h=[],i=[],s=u(o[o.length-1],l),p=o[o.length-1],d=o[0],g=0;g<o.length;++g,p=d){d=o[g];var b=u(d,l);if(s<0&&b>0||s>0&&b<0){var m=c(p,b,d,s);h.push(m),i.push(m.slice())}b<0?i.push(d.slice()):b>0?h.push(d.slice()):(h.push(d.slice()),i.push(d.slice())),s=b}return{positive:h,negative:i}}function f(o,l){for(var h=[],i=u(o[o.length-1],l),s=o[o.length-1],p=o[0],d=0;d<o.length;++d,s=p){p=o[d];var g=u(p,l);(i<0&&g>0||i>0&&g<0)&&h.push(c(s,g,p,i)),g>=0&&h.push(p.slice()),i=g}return h}function n(o,l){for(var h=[],i=u(o[o.length-1],l),s=o[o.length-1],p=o[0],d=0;d<o.length;++d,s=p){p=o[d];var g=u(p,l);(i<0&&g>0||i>0&&g<0)&&h.push(c(s,g,p,i)),g<=0&&h.push(p.slice()),i=g}return h}},{"robust-dot-product":545,"robust-sum":553}],567:[function(e,v,S){(function(){var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(n){return c(f(n),arguments)}function u(n,o){return a.apply(null,[n].concat(o||[]))}function c(n,o){var l=1,h=n.length,i,s="",p,d,g,b,m,x,w,y;for(p=0;p<h;p++)if(typeof n[p]=="string")s+=n[p];else if(typeof n[p]=="object"){if(g=n[p],g.keys)for(i=o[l],d=0;d<g.keys.length;d++){if(i==null)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[d],g.keys[d-1]));i=i[g.keys[d]]}else g.param_no?i=o[g.param_no]:i=o[l++];if(r.not_type.test(g.type)&&r.not_primitive.test(g.type)&&i instanceof Function&&(i=i()),r.numeric_arg.test(g.type)&&typeof i!="number"&&isNaN(i))throw new TypeError(a("[sprintf] expecting number but found %T",i));switch(r.number.test(g.type)&&(w=i>=0),g.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,g.width?parseInt(g.width):0);break;case"e":i=g.precision?parseFloat(i).toExponential(g.precision):parseFloat(i).toExponential();break;case"f":i=g.precision?parseFloat(i).toFixed(g.precision):parseFloat(i);break;case"g":i=g.precision?String(Number(i.toPrecision(g.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=g.precision?i.substring(0,g.precision):i;break;case"t":i=String(!!i),i=g.precision?i.substring(0,g.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=g.precision?i.substring(0,g.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=g.precision?i.substring(0,g.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase();break}r.json.test(g.type)?s+=i:(r.number.test(g.type)&&(!w||g.sign)?(y=w?"+":"-",i=i.toString().replace(r.sign,"")):y="",m=g.pad_char?g.pad_char==="0"?"0":g.pad_char.charAt(1):" ",x=g.width-(y+i).length,b=g.width&&x>0?m.repeat(x):"",s+=g.align?y+i+b:m==="0"?y+b+i:b+y+i)}return s}var t=Object.create(null);function f(n){if(t[n])return t[n];for(var o=n,l,h=[],i=0;o;){if((l=r.text.exec(o))!==null)h.push(l[0]);else if((l=r.modulo.exec(o))!==null)h.push("%");else if((l=r.placeholder.exec(o))!==null){if(l[2]){i|=1;var s=[],p=l[2],d=[];if((d=r.key.exec(p))!==null)for(s.push(d[1]);(p=p.substring(d[0].length))!=="";)if((d=r.key_access.exec(p))!==null)s.push(d[1]);else if((d=r.index_access.exec(p))!==null)s.push(d[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");l[2]=s}else i|=2;if(i===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");h.push({placeholder:l[0],param_no:l[1],keys:l[2],sign:l[3],pad_char:l[4],align:l[5],width:l[6],precision:l[7],type:l[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");o=o.substring(l[0].length)}return t[n]=h}typeof S<"u"&&(S.sprintf=a,S.vsprintf=u),typeof window<"u"&&(window.sprintf=a,window.vsprintf=u)})()},{}],568:[function(e,v,S){var r=e("parenthesis");v.exports=function(u,c,t){if(u==null)throw Error("First argument should be a string");if(c==null)throw Error("Separator should be a string or a RegExp");t?(typeof t=="string"||Array.isArray(t))&&(t={ignore:t}):t={},t.escape==null&&(t.escape=!0),t.ignore==null?t.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof t.ignore=="string"&&(t.ignore=[t.ignore]),t.ignore=t.ignore.map(function(p){return p.length===1&&(p=p+p),p}));var f=r.parse(u,{flat:!0,brackets:t.ignore}),n=f[0],o=n.split(c);if(t.escape){for(var l=[],h=0;h<o.length;h++){var i=o[h],s=o[h+1];i[i.length-1]==="\\"&&i[i.length-2]!=="\\"?(l.push(i+c+s),h++):l.push(i)}o=l}for(var h=0;h<o.length;h++)f[0]=o[h],o[h]=r.stringify(f,{flat:!0});return o}},{parenthesis:503}],569:[function(e,v,S){v.exports=r;function r(a){for(var u=a.length,c=new Array(u),t=new Array(u),f=new Array(u),n=new Array(u),o=new Array(u),l=new Array(u),h=0;h<u;++h)c[h]=-1,t[h]=0,f[h]=!1,n[h]=0,o[h]=-1,l[h]=[];var i=0,s=[],p=[];function d(x){var w=[x],y=[x];for(c[x]=t[x]=i,f[x]=!0,i+=1;y.length>0;){x=y[y.length-1];var T=a[x];if(n[x]<T.length){for(var M=n[x];M<T.length;++M){var P=T[M];if(c[P]<0){c[P]=t[P]=i,f[P]=!0,i+=1,w.push(P),y.push(P);break}else f[P]&&(t[x]=Math.min(t[x],t[P])|0);o[P]>=0&&l[x].push(o[P])}n[x]=M}else{if(t[x]===c[x]){for(var L=[],I=[],E=0,M=w.length-1;M>=0;--M){var k=w[M];if(f[k]=!1,L.push(k),I.push(l[k]),E+=l[k].length,o[k]=s.length,k===x){w.length=M;break}}s.push(L);for(var C=new Array(E),M=0;M<I.length;M++)for(var D=0;D<I[M].length;D++)C[--E]=I[M][D];p.push(C)}y.pop()}}}for(var h=0;h<u;++h)c[h]<0&&d(h);for(var g,h=0;h<p.length;h++){var b=p[h];if(b.length!==0){b.sort(function(w,y){return w-y}),g=[b[0]];for(var m=1;m<b.length;m++)b[m]!==b[m-1]&&g.push(b[m]);p[h]=g}}return{components:s,adjacencyList:p}}},{}],570:[function(e,v,S){v.exports=n;var r=e("ndarray-extract-contour"),a=e("triangulate-hypercube"),u=e("zero-crossings");function c(o,l){var h=o.length,i=["'use strict';"],s="surfaceNets"+o.join("_")+"d"+l;i.push("var contour=genContour({","order:[",o.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),l==="generic"&&i.push("getters:[0],");for(var p=[],d=[],g=0;g<h;++g)p.push("d"+g),d.push("d"+g);for(var g=0;g<1<<h;++g)p.push("v"+g),d.push("v"+g);for(var g=0;g<1<<h;++g)p.push("p"+g),d.push("p"+g);p.push("a","b","c"),d.push("a","c"),i.push("vertex:function vertexFunc(",p.join(),"){");for(var b=[],g=0;g<1<<h;++g)b.push("(p"+g+"<<"+g+")");i.push("var m=(",b.join("+"),")|0;if(m===0||m===",(1<<(1<<h))-1,"){return}");var m=[],x=[];1<<(1<<h)<=128?(i.push("switch(m){"),x=i):i.push("switch(m>>>7){");for(var g=0;g<1<<(1<<h);++g){if(1<<(1<<h)>128&&g%128===0){m.length>0&&x.push("}}");var w="vExtra"+m.length;i.push("case ",g>>>7,":",w,"(m&0x7f,",d.join(),");break;"),x=["function ",w,"(m,",d.join(),"){switch(m){"],m.push(x)}x.push("case ",g&127,":");for(var y=new Array(h),T=new Array(h),M=new Array(h),P=new Array(h),L=0,I=0;I<h;++I)y[I]=[],T[I]=[],M[I]=0,P[I]=0;for(var I=0;I<1<<h;++I)for(var E=0;E<h;++E){var k=I^1<<E;if(!(k>I)&&!(g&1<<k)!=!(g&1<<I)){var C=1;g&1<<k?T[E].push("v"+k+"-v"+I):(T[E].push("v"+I+"-v"+k),C=-C),C<0?(y[E].push("-v"+I+"-v"+k),M[E]+=2):(y[E].push("v"+I+"+v"+k),M[E]-=2),L+=1;for(var D=0;D<h;++D)D!==E&&(k&1<<D?P[D]+=1:P[D]-=1)}}for(var F=[],E=0;E<h;++E)if(y[E].length===0)F.push("d"+E+"-0.5");else{var N="";M[E]<0?N=M[E]+"*c":M[E]>0&&(N="+"+M[E]+"*c");var G=.5*(y[E].length/L),U=.5+.5*(P[E]/L);F.push("d"+E+"-"+U+"-"+G+"*("+y[E].join("+")+N+")/("+T[E].join("+")+")")}x.push("a.push([",F.join(),"]);","break;")}i.push("}},"),m.length>0&&x.push("}}");for(var X=[],g=0;g<1<<h-1;++g)X.push("v"+g);X.push("c0","c1","p0","p1","a","b","c"),i.push("cell:function cellFunc(",X.join(),"){");var z=a(h-1);i.push("if(p0){b.push(",z.map(function(j){return"["+j.map(function(V){return"v"+V})+"]"}).join(),")}else{b.push(",z.map(function(j){var V=j.slice();return V.reverse(),"["+V.map(function(K){return"v"+K})+"]"}).join(),")}}});function ",s,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",s,";");for(var g=0;g<m.length;++g)i.push(m[g].join(""));var B=new Function("genContour",i.join(""));return B(r)}function t(o,l){for(var h=u(o,l),i=h.length,s=new Array(i),p=new Array(i),d=0;d<i;++d)s[d]=[h[d]],p[d]=[d];return{positions:s,cells:p}}var f={};function n(o,s){if(o.dimension<=0)return{positions:[],cells:[]};if(o.dimension===1)return t(o,s);var h=o.order.join()+"-"+o.dtype,i=f[h],s=+s||0;return i||(i=f[h]=c(o.order,o.dtype)),i(o,s)}},{"ndarray-extract-contour":487,"triangulate-hypercube":580,"zero-crossings":624}],571:[function(e,v,S){Object.defineProperty(S,"__esModule",{value:!0});var r=function(){function o(l,h){var i=[],s=!0,p=!1,d=void 0;try{for(var g=l[Symbol.iterator](),b;!(s=(b=g.next()).done)&&(i.push(b.value),!(h&&i.length===h));s=!0);}catch(m){p=!0,d=m}finally{try{!s&&g.return&&g.return()}finally{if(p)throw d}}return i}return function(l,h){if(Array.isArray(l))return l;if(Symbol.iterator in Object(l))return o(l,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Math.PI*2,u=function(l,h,i,s,p,d,g){var b=l.x,m=l.y;b*=h,m*=i;var x=s*b-p*m,w=p*b+s*m;return{x:x+d,y:w+g}},c=function(l,h){var i=h===1.5707963267948966?.551915024494:h===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(h/4),s=Math.cos(l),p=Math.sin(l),d=Math.cos(l+h),g=Math.sin(l+h);return[{x:s-p*i,y:p+s*i},{x:d+g*i,y:g-d*i},{x:d,y:g}]},t=function(l,h,i,s){var p=l*s-h*i<0?-1:1,d=l*i+h*s;return d>1&&(d=1),d<-1&&(d=-1),p*Math.acos(d)},f=function(l,h,i,s,p,d,g,b,m,x,w,y){var T=Math.pow(p,2),M=Math.pow(d,2),P=Math.pow(w,2),L=Math.pow(y,2),I=T*M-T*L-M*P;I<0&&(I=0),I/=T*L+M*P,I=Math.sqrt(I)*(g===b?-1:1);var E=I*p/d*y,k=I*-d/p*w,C=x*E-m*k+(l+i)/2,D=m*E+x*k+(h+s)/2,F=(w-E)/p,N=(y-k)/d,G=(-w-E)/p,U=(-y-k)/d,X=t(1,0,F,N),z=t(F,N,G,U);return b===0&&z>0&&(z-=a),b===1&&z<0&&(z+=a),[C,D,X,z]},n=function(l){var h=l.px,i=l.py,s=l.cx,p=l.cy,d=l.rx,g=l.ry,b=l.xAxisRotation,m=b===void 0?0:b,x=l.largeArcFlag,w=x===void 0?0:x,y=l.sweepFlag,T=y===void 0?0:y,M=[];if(d===0||g===0)return[];var P=Math.sin(m*a/360),L=Math.cos(m*a/360),I=L*(h-s)/2+P*(i-p)/2,E=-P*(h-s)/2+L*(i-p)/2;if(I===0&&E===0)return[];d=Math.abs(d),g=Math.abs(g);var k=Math.pow(I,2)/Math.pow(d,2)+Math.pow(E,2)/Math.pow(g,2);k>1&&(d*=Math.sqrt(k),g*=Math.sqrt(k));var C=f(h,i,s,p,d,g,w,T,P,L,I,E),D=r(C,4),F=D[0],N=D[1],G=D[2],U=D[3],X=Math.abs(U)/(a/4);Math.abs(1-X)<1e-7&&(X=1);var z=Math.max(Math.ceil(X),1);U/=z;for(var B=0;B<z;B++)M.push(c(G,U)),G+=U;return M.map(function(j){var V=u(j[0],d,g,L,P,F,N),K=V.x,te=V.y,$=u(j[1],d,g,L,P,F,N),ie=$.x,se=$.y,Q=u(j[2],d,g,L,P,F,N),H=Q.x,oe=Q.y;return{x1:K,y1:te,x2:ie,y2:se,x:H,y:oe}})};S.default=n,v.exports=S.default},{}],572:[function(e,v,S){var r=e("parse-svg-path"),a=e("abs-svg-path"),u=e("normalize-svg-path"),c=e("is-svg-path"),t=e("assert");v.exports=f;function f(n){if(Array.isArray(n)&&n.length===1&&typeof n[0]=="string"&&(n=n[0]),typeof n=="string"&&(t(c(n),"String is not an SVG path."),n=r(n)),t(Array.isArray(n),"Argument should be a string or an array of path segments."),n=a(n),n=u(n),!n.length)return[0,0,0,0];for(var o=[1/0,1/0,-1/0,-1/0],l=0,h=n.length;l<h;l++)for(var i=n[l].slice(1),s=0;s<i.length;s+=2)i[s+0]<o[0]&&(o[0]=i[s+0]),i[s+1]<o[1]&&(o[1]=i[s+1]),i[s+0]>o[2]&&(o[2]=i[s+0]),i[s+1]>o[3]&&(o[3]=i[s+1]);return o}},{"abs-svg-path":65,assert:73,"is-svg-path":471,"normalize-svg-path":573,"parse-svg-path":505}],573:[function(e,v,S){v.exports=a;var r=e("svg-arc-to-cubic-bezier");function a(t){for(var f,n=[],o=0,l=0,h=0,i=0,s=null,p=null,d=0,g=0,b=0,m=t.length;b<m;b++){var x=t[b],w=x[0];switch(w){case"M":h=x[1],i=x[2];break;case"A":var y=r({px:d,py:g,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!y.length)continue;for(var T=0,M;T<y.length;T++)M=y[T],x=["C",M.x1,M.y1,M.x2,M.y2,M.x,M.y],T<y.length-1&&n.push(x);break;case"S":var P=d,L=g;(f=="C"||f=="S")&&(P+=P-o,L+=L-l),x=["C",P,L,x[1],x[2],x[3],x[4]];break;case"T":f=="Q"||f=="T"?(s=d*2-s,p=g*2-p):(s=d,p=g),x=c(d,g,s,p,x[1],x[2]);break;case"Q":s=x[1],p=x[2],x=c(d,g,x[1],x[2],x[3],x[4]);break;case"L":x=u(d,g,x[1],x[2]);break;case"H":x=u(d,g,x[1],g);break;case"V":x=u(d,g,d,x[1]);break;case"Z":x=u(d,g,h,i);break}f=w,d=x[x.length-2],g=x[x.length-1],x.length>4?(o=x[x.length-4],l=x[x.length-3]):(o=d,l=g),n.push(x)}return n}function u(t,f,n,o){return["C",t,f,n,o,n,o]}function c(t,f,n,o,l,h){return["C",t/3+2/3*n,f/3+2/3*o,l/3+2/3*n,h/3+2/3*o,l,h]}},{"svg-arc-to-cubic-bezier":571}],574:[function(e,v,S){var r=e("svg-path-bounds"),a=e("parse-svg-path"),u=e("draw-svg-path"),c=e("is-svg-path"),t=e("bitmap-sdf"),f=document.createElement("canvas"),n=f.getContext("2d");v.exports=o;function o(i,s){if(!c(i))throw Error("Argument should be valid svg path string");s||(s={});var p,d;s.shape?(p=s.shape[0],d=s.shape[1]):(p=f.width=s.w||s.width||200,d=f.height=s.h||s.height||200);var g=Math.min(p,d),b=s.stroke||0,m=s.viewbox||s.viewBox||r(i),x=[p/(m[2]-m[0]),d/(m[3]-m[1])],w=Math.min(x[0]||0,x[1]||0)/2;if(n.fillStyle="black",n.fillRect(0,0,p,d),n.fillStyle="white",b&&(typeof b!="number"&&(b=1),b>0?n.strokeStyle="white":n.strokeStyle="black",n.lineWidth=Math.abs(b)),n.translate(p*.5,d*.5),n.scale(w,w),h()){var y=new Path2D(i);n.fill(y),b&&n.stroke(y)}else{var T=a(i);u(n,T),n.fill(),b&&n.stroke()}n.setTransform(1,0,0,1,0,0);var M=t(n,{cutoff:s.cutoff!=null?s.cutoff:.5,radius:s.radius!=null?s.radius:g*.5});return M}var l;function h(){if(l!=null)return l;var i=document.createElement("canvas").getContext("2d");if(i.canvas.width=i.canvas.height=1,!window.Path2D)return l=!1;var s=new Path2D("M0,0h1v1h-1v-1Z");i.fillStyle="black",i.fill(s);var p=i.getImageData(0,0,1,1);return l=p&&p.data&&p.data[3]===255}},{"bitmap-sdf":98,"draw-svg-path":174,"is-svg-path":471,"parse-svg-path":505,"svg-path-bounds":572}],575:[function(e,v,S){(function(r){(function(){v.exports=f;var a=e("vectorize-text"),u=window||r.global||{},c=u.__TEXT_CACHE||{};u.__TEXT_CACHE={};function t(n){for(var o=n.cells,l=n.positions,h=new Float32Array(o.length*6),i=0,s=0,p=0;p<o.length;++p)for(var d=o[p],g=0;g<3;++g){var b=l[d[g]];h[i++]=b[0],h[i++]=b[1]+1.4,s=Math.max(b[0],s)}return{data:h,shape:s}}function f(n,o,h){var h=h||{},i=c[n];i||(i=c[n]={" ":{data:new Float32Array(0),shape:.2}});var s=i[o];if(!s)if(o.length<=1||!/\d/.test(o))s=i[o]=t(a(o,{triangles:!0,font:n,textAlign:h.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var p=o.split(/(\d|\s)/),d=new Array(p.length),g=0,b=0,m=0;m<p.length;++m)d[m]=f(n,p[m]),g+=d[m].data.length,b+=d[m].shape,m>0&&(b+=.02);for(var x=new Float32Array(g),w=0,y=-.5*b,m=0;m<d.length;++m){for(var T=d[m].data,M=0;M<T.length;M+=2)x[w++]=T[M]+y,x[w++]=T[M+1];y+=d[m].shape+.02}s=i[o]={data:x,shape:b}}return s}}).call(this)}).call(this,e("_process"))},{_process:526,"vectorize-text":600}],576:[function(e,v,S){(function(r){var a=/^\s+/,u=/\s+$/,c=0,t=r.round,f=r.min,n=r.max,o=r.random;function l(ae,fe){if(ae=ae||"",fe=fe||{},ae instanceof l)return ae;if(!(this instanceof l))return new l(ae,fe);var de=h(ae);this._originalInput=ae,this._r=de.r,this._g=de.g,this._b=de.b,this._a=de.a,this._roundA=t(100*this._a)/100,this._format=fe.format||de.format,this._gradientType=fe.gradientType,this._r<1&&(this._r=t(this._r)),this._g<1&&(this._g=t(this._g)),this._b<1&&(this._b=t(this._b)),this._ok=de.ok,this._tc_id=c++}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ae=this.toRgb();return(ae.r*299+ae.g*587+ae.b*114)/1e3},getLuminance:function(){var ae=this.toRgb(),fe,de,pe,W,ue,me;return fe=ae.r/255,de=ae.g/255,pe=ae.b/255,fe<=.03928?W=fe/12.92:W=r.pow((fe+.055)/1.055,2.4),de<=.03928?ue=de/12.92:ue=r.pow((de+.055)/1.055,2.4),pe<=.03928?me=pe/12.92:me=r.pow((pe+.055)/1.055,2.4),.2126*W+.7152*ue+.0722*me},setAlpha:function(ae){return this._a=z(ae),this._roundA=t(100*this._a)/100,this},toHsv:function(){var ae=d(this._r,this._g,this._b);return{h:ae.h*360,s:ae.s,v:ae.v,a:this._a}},toHsvString:function(){var ae=d(this._r,this._g,this._b),fe=t(ae.h*360),de=t(ae.s*100),pe=t(ae.v*100);return this._a==1?"hsv("+fe+", "+de+"%, "+pe+"%)":"hsva("+fe+", "+de+"%, "+pe+"%, "+this._roundA+")"},toHsl:function(){var ae=s(this._r,this._g,this._b);return{h:ae.h*360,s:ae.s,l:ae.l,a:this._a}},toHslString:function(){var ae=s(this._r,this._g,this._b),fe=t(ae.h*360),de=t(ae.s*100),pe=t(ae.l*100);return this._a==1?"hsl("+fe+", "+de+"%, "+pe+"%)":"hsla("+fe+", "+de+"%, "+pe+"%, "+this._roundA+")"},toHex:function(ae){return b(this._r,this._g,this._b,ae)},toHexString:function(ae){return"#"+this.toHex(ae)},toHex8:function(ae){return m(this._r,this._g,this._b,this._a,ae)},toHex8String:function(ae){return"#"+this.toHex8(ae)},toRgb:function(){return{r:t(this._r),g:t(this._g),b:t(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+t(this._r)+", "+t(this._g)+", "+t(this._b)+")":"rgba("+t(this._r)+", "+t(this._g)+", "+t(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:t(B(this._r,255)*100)+"%",g:t(B(this._g,255)*100)+"%",b:t(B(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+t(B(this._r,255)*100)+"%, "+t(B(this._g,255)*100)+"%, "+t(B(this._b,255)*100)+"%)":"rgba("+t(B(this._r,255)*100)+"%, "+t(B(this._g,255)*100)+"%, "+t(B(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:U[b(this._r,this._g,this._b,!0)]||!1},toFilter:function(ae){var fe="#"+x(this._r,this._g,this._b,this._a),de=fe,pe=this._gradientType?"GradientType = 1, ":"";if(ae){var W=l(ae);de="#"+x(W._r,W._g,W._b,W._a)}return"progid:DXImageTransform.Microsoft.gradient("+pe+"startColorstr="+fe+",endColorstr="+de+")"},toString:function(ae){var fe=!!ae;ae=ae||this._format;var de=!1,pe=this._a<1&&this._a>=0,W=!fe&&pe&&(ae==="hex"||ae==="hex6"||ae==="hex3"||ae==="hex4"||ae==="hex8"||ae==="name");return W?ae==="name"&&this._a===0?this.toName():this.toRgbString():(ae==="rgb"&&(de=this.toRgbString()),ae==="prgb"&&(de=this.toPercentageRgbString()),(ae==="hex"||ae==="hex6")&&(de=this.toHexString()),ae==="hex3"&&(de=this.toHexString(!0)),ae==="hex4"&&(de=this.toHex8String(!0)),ae==="hex8"&&(de=this.toHex8String()),ae==="name"&&(de=this.toName()),ae==="hsl"&&(de=this.toHslString()),ae==="hsv"&&(de=this.toHsvString()),de||this.toHexString())},clone:function(){return l(this.toString())},_applyModification:function(ae,fe){var de=ae.apply(null,[this].concat([].slice.call(fe)));return this._r=de._r,this._g=de._g,this._b=de._b,this.setAlpha(de._a),this},lighten:function(){return this._applyModification(M,arguments)},brighten:function(){return this._applyModification(P,arguments)},darken:function(){return this._applyModification(L,arguments)},desaturate:function(){return this._applyModification(w,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(T,arguments)},spin:function(){return this._applyModification(I,arguments)},_applyCombination:function(ae,fe){return ae.apply(null,[this].concat([].slice.call(fe)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(N,arguments)},splitcomplement:function(){return this._applyCombination(D,arguments)},triad:function(){return this._applyCombination(k,arguments)},tetrad:function(){return this._applyCombination(C,arguments)}},l.fromRatio=function(ae,fe){if(typeof ae=="object"){var de={};for(var pe in ae)ae.hasOwnProperty(pe)&&(pe==="a"?de[pe]=ae[pe]:de[pe]=ie(ae[pe]));ae=de}return l(ae,fe)};function h(ae){var fe={r:0,g:0,b:0},de=1,pe=null,W=null,ue=null,me=!1,be=!1;return typeof ae=="string"&&(ae=re(ae)),typeof ae=="object"&&(oe(ae.r)&&oe(ae.g)&&oe(ae.b)?(fe=i(ae.r,ae.g,ae.b),me=!0,be=String(ae.r).substr(-1)==="%"?"prgb":"rgb"):oe(ae.h)&&oe(ae.s)&&oe(ae.v)?(pe=ie(ae.s),W=ie(ae.v),fe=g(ae.h,pe,W),me=!0,be="hsv"):oe(ae.h)&&oe(ae.s)&&oe(ae.l)&&(pe=ie(ae.s),ue=ie(ae.l),fe=p(ae.h,pe,ue),me=!0,be="hsl"),ae.hasOwnProperty("a")&&(de=ae.a)),de=z(de),{ok:me,format:ae.format||be,r:f(255,n(fe.r,0)),g:f(255,n(fe.g,0)),b:f(255,n(fe.b,0)),a:de}}function i(ae,fe,de){return{r:B(ae,255)*255,g:B(fe,255)*255,b:B(de,255)*255}}function s(ae,fe,de){ae=B(ae,255),fe=B(fe,255),de=B(de,255);var pe=n(ae,fe,de),W=f(ae,fe,de),ue,me,be=(pe+W)/2;if(pe==W)ue=me=0;else{var Me=pe-W;switch(me=be>.5?Me/(2-pe-W):Me/(pe+W),pe){case ae:ue=(fe-de)/Me+(fe<de?6:0);break;case fe:ue=(de-ae)/Me+2;break;case de:ue=(ae-fe)/Me+4;break}ue/=6}return{h:ue,s:me,l:be}}function p(ae,fe,de){var pe,W,ue;ae=B(ae,360),fe=B(fe,100),de=B(de,100);function me(Pe,Ge,ze){return ze<0&&(ze+=1),ze>1&&(ze-=1),ze<1/6?Pe+(Ge-Pe)*6*ze:ze<1/2?Ge:ze<2/3?Pe+(Ge-Pe)*(2/3-ze)*6:Pe}if(fe===0)pe=W=ue=de;else{var be=de<.5?de*(1+fe):de+fe-de*fe,Me=2*de-be;pe=me(Me,be,ae+1/3),W=me(Me,be,ae),ue=me(Me,be,ae-1/3)}return{r:pe*255,g:W*255,b:ue*255}}function d(ae,fe,de){ae=B(ae,255),fe=B(fe,255),de=B(de,255);var pe=n(ae,fe,de),W=f(ae,fe,de),ue,me,be=pe,Me=pe-W;if(me=pe===0?0:Me/pe,pe==W)ue=0;else{switch(pe){case ae:ue=(fe-de)/Me+(fe<de?6:0);break;case fe:ue=(de-ae)/Me+2;break;case de:ue=(ae-fe)/Me+4;break}ue/=6}return{h:ue,s:me,v:be}}function g(ae,fe,de){ae=B(ae,360)*6,fe=B(fe,100),de=B(de,100);var pe=r.floor(ae),W=ae-pe,ue=de*(1-fe),me=de*(1-W*fe),be=de*(1-(1-W)*fe),Me=pe%6,Pe=[de,me,ue,ue,be,de][Me],Ge=[be,de,de,me,ue,ue][Me],ze=[ue,ue,be,de,de,me][Me];return{r:Pe*255,g:Ge*255,b:ze*255}}function b(ae,fe,de,pe){var W=[$(t(ae).toString(16)),$(t(fe).toString(16)),$(t(de).toString(16))];return pe&&W[0].charAt(0)==W[0].charAt(1)&&W[1].charAt(0)==W[1].charAt(1)&&W[2].charAt(0)==W[2].charAt(1)?W[0].charAt(0)+W[1].charAt(0)+W[2].charAt(0):W.join("")}function m(ae,fe,de,pe,W){var ue=[$(t(ae).toString(16)),$(t(fe).toString(16)),$(t(de).toString(16)),$(se(pe))];return W&&ue[0].charAt(0)==ue[0].charAt(1)&&ue[1].charAt(0)==ue[1].charAt(1)&&ue[2].charAt(0)==ue[2].charAt(1)&&ue[3].charAt(0)==ue[3].charAt(1)?ue[0].charAt(0)+ue[1].charAt(0)+ue[2].charAt(0)+ue[3].charAt(0):ue.join("")}function x(ae,fe,de,pe){var W=[$(se(pe)),$(t(ae).toString(16)),$(t(fe).toString(16)),$(t(de).toString(16))];return W.join("")}l.equals=function(ae,fe){return!ae||!fe?!1:l(ae).toRgbString()==l(fe).toRgbString()},l.random=function(){return l.fromRatio({r:o(),g:o(),b:o()})};function w(ae,fe){fe=fe===0?0:fe||10;var de=l(ae).toHsl();return de.s-=fe/100,de.s=j(de.s),l(de)}function y(ae,fe){fe=fe===0?0:fe||10;var de=l(ae).toHsl();return de.s+=fe/100,de.s=j(de.s),l(de)}function T(ae){return l(ae).desaturate(100)}function M(ae,fe){fe=fe===0?0:fe||10;var de=l(ae).toHsl();return de.l+=fe/100,de.l=j(de.l),l(de)}function P(ae,fe){fe=fe===0?0:fe||10;var de=l(ae).toRgb();return de.r=n(0,f(255,de.r-t(255*-(fe/100)))),de.g=n(0,f(255,de.g-t(255*-(fe/100)))),de.b=n(0,f(255,de.b-t(255*-(fe/100)))),l(de)}function L(ae,fe){fe=fe===0?0:fe||10;var de=l(ae).toHsl();return de.l-=fe/100,de.l=j(de.l),l(de)}function I(ae,fe){var de=l(ae).toHsl(),pe=(de.h+fe)%360;return de.h=pe<0?360+pe:pe,l(de)}function E(ae){var fe=l(ae).toHsl();return fe.h=(fe.h+180)%360,l(fe)}function k(ae){var fe=l(ae).toHsl(),de=fe.h;return[l(ae),l({h:(de+120)%360,s:fe.s,l:fe.l}),l({h:(de+240)%360,s:fe.s,l:fe.l})]}function C(ae){var fe=l(ae).toHsl(),de=fe.h;return[l(ae),l({h:(de+90)%360,s:fe.s,l:fe.l}),l({h:(de+180)%360,s:fe.s,l:fe.l}),l({h:(de+270)%360,s:fe.s,l:fe.l})]}function D(ae){var fe=l(ae).toHsl(),de=fe.h;return[l(ae),l({h:(de+72)%360,s:fe.s,l:fe.l}),l({h:(de+216)%360,s:fe.s,l:fe.l})]}function F(ae,fe,de){fe=fe||6,de=de||30;var pe=l(ae).toHsl(),W=360/de,ue=[l(ae)];for(pe.h=(pe.h-(W*fe>>1)+720)%360;--fe;)pe.h=(pe.h+W)%360,ue.push(l(pe));return ue}function N(ae,fe){fe=fe||6;for(var de=l(ae).toHsv(),pe=de.h,W=de.s,ue=de.v,me=[],be=1/fe;fe--;)me.push(l({h:pe,s:W,v:ue})),ue=(ue+be)%1;return me}l.mix=function(ae,fe,de){de=de===0?0:de||50;var pe=l(ae).toRgb(),W=l(fe).toRgb(),ue=de/100,me={r:(W.r-pe.r)*ue+pe.r,g:(W.g-pe.g)*ue+pe.g,b:(W.b-pe.b)*ue+pe.b,a:(W.a-pe.a)*ue+pe.a};return l(me)},l.readability=function(ae,fe){var de=l(ae),pe=l(fe);return(r.max(de.getLuminance(),pe.getLuminance())+.05)/(r.min(de.getLuminance(),pe.getLuminance())+.05)},l.isReadable=function(ae,fe,de){var pe=l.readability(ae,fe),W,ue;switch(ue=!1,W=ee(de),W.level+W.size){case"AAsmall":case"AAAlarge":ue=pe>=4.5;break;case"AAlarge":ue=pe>=3;break;case"AAAsmall":ue=pe>=7;break}return ue},l.mostReadable=function(ae,fe,de){var pe=null,W=0,ue,me,be,Me;de=de||{},me=de.includeFallbackColors,be=de.level,Me=de.size;for(var Pe=0;Pe<fe.length;Pe++)ue=l.readability(ae,fe[Pe]),ue>W&&(W=ue,pe=l(fe[Pe]));return l.isReadable(ae,pe,{level:be,size:Me})||!me?pe:(de.includeFallbackColors=!1,l.mostReadable(ae,["#fff","#000"],de))};var G=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},U=l.hexNames=X(G);function X(ae){var fe={};for(var de in ae)ae.hasOwnProperty(de)&&(fe[ae[de]]=de);return fe}function z(ae){return ae=parseFloat(ae),(isNaN(ae)||ae<0||ae>1)&&(ae=1),ae}function B(ae,fe){K(ae)&&(ae="100%");var de=te(ae);return ae=f(fe,n(0,parseFloat(ae))),de&&(ae=parseInt(ae*fe,10)/100),r.abs(ae-fe)<1e-6?1:ae%fe/parseFloat(fe)}function j(ae){return f(1,n(0,ae))}function V(ae){return parseInt(ae,16)}function K(ae){return typeof ae=="string"&&ae.indexOf(".")!=-1&&parseFloat(ae)===1}function te(ae){return typeof ae=="string"&&ae.indexOf("%")!=-1}function $(ae){return ae.length==1?"0"+ae:""+ae}function ie(ae){return ae<=1&&(ae=ae*100+"%"),ae}function se(ae){return r.round(parseFloat(ae)*255).toString(16)}function Q(ae){return V(ae)/255}var H=function(){var ae="[-\\+]?\\d+%?",fe="[-\\+]?\\d*\\.\\d+%?",de="(?:"+fe+")|(?:"+ae+")",pe="[\\s|\\(]+("+de+")[,|\\s]+("+de+")[,|\\s]+("+de+")\\s*\\)?",W="[\\s|\\(]+("+de+")[,|\\s]+("+de+")[,|\\s]+("+de+")[,|\\s]+("+de+")\\s*\\)?";return{CSS_UNIT:new RegExp(de),rgb:new RegExp("rgb"+pe),rgba:new RegExp("rgba"+W),hsl:new RegExp("hsl"+pe),hsla:new RegExp("hsla"+W),hsv:new RegExp("hsv"+pe),hsva:new RegExp("hsva"+W),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function oe(ae){return!!H.CSS_UNIT.exec(ae)}function re(ae){ae=ae.replace(a,"").replace(u,"").toLowerCase();var fe=!1;if(G[ae])ae=G[ae],fe=!0;else if(ae=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var de;return(de=H.rgb.exec(ae))?{r:de[1],g:de[2],b:de[3]}:(de=H.rgba.exec(ae))?{r:de[1],g:de[2],b:de[3],a:de[4]}:(de=H.hsl.exec(ae))?{h:de[1],s:de[2],l:de[3]}:(de=H.hsla.exec(ae))?{h:de[1],s:de[2],l:de[3],a:de[4]}:(de=H.hsv.exec(ae))?{h:de[1],s:de[2],v:de[3]}:(de=H.hsva.exec(ae))?{h:de[1],s:de[2],v:de[3],a:de[4]}:(de=H.hex8.exec(ae))?{r:V(de[1]),g:V(de[2]),b:V(de[3]),a:Q(de[4]),format:fe?"name":"hex8"}:(de=H.hex6.exec(ae))?{r:V(de[1]),g:V(de[2]),b:V(de[3]),format:fe?"name":"hex"}:(de=H.hex4.exec(ae))?{r:V(de[1]+""+de[1]),g:V(de[2]+""+de[2]),b:V(de[3]+""+de[3]),a:Q(de[4]+""+de[4]),format:fe?"name":"hex8"}:(de=H.hex3.exec(ae))?{r:V(de[1]+""+de[1]),g:V(de[2]+""+de[2]),b:V(de[3]+""+de[3]),format:fe?"name":"hex"}:!1}function ee(ae){var fe,de;return ae=ae||{level:"AA",size:"small"},fe=(ae.level||"AA").toUpperCase(),de=(ae.size||"small").toLowerCase(),fe!=="AA"&&fe!=="AAA"&&(fe="AA"),de!=="small"&&de!=="large"&&(de="small"),{level:fe,size:de}}typeof v<"u"&&v.exports?v.exports=l:window.tinycolor=l})(Math)},{}],577:[function(e,v,S){v.exports=u,v.exports.float32=v.exports.float=u,v.exports.fract32=v.exports.fract=a;var r=new Float32Array(1);function a(c){if(c.length){for(var t=u(c),f=0,n=t.length;f<n;f++)t[f]=c[f]-t[f];return t}return u(c-u(c))}function u(c){if(c.length){if(c instanceof Float32Array)return c;var t=new Float32Array(c);return t.set(c),t}return r[0]=c,r[0]}},{}],578:[function(e,v,S){var r=e("parse-unit");v.exports=t;var a=96;function u(f,n){var o=r(getComputedStyle(f).getPropertyValue(n));return o[0]*t(o[1],f)}function c(f,n){var o=document.createElement("div");o.style["font-size"]="128"+f,n.appendChild(o);var l=u(o,"font-size")/128;return n.removeChild(o),l}function t(f,n){switch(n=n||document.body,f=(f||"px").trim().toLowerCase(),(n===window||n===document)&&(n=document.body),f){case"%":return n.clientHeight/100;case"ch":case"ex":return c(f,n);case"em":return u(n,"font-size");case"rem":return u(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},{"parse-unit":506}],579:[function(e,v,S){(function(r,a){typeof S=="object"&&typeof v<"u"?a(S):(r=r||self,a(r.topojson=r.topojson||{}))})(this,function(r){function a(y){return y}function u(y){if(y==null)return a;var T,M,P=y.scale[0],L=y.scale[1],I=y.translate[0],E=y.translate[1];return function(k,C){C||(T=M=0);var D=2,F=k.length,N=new Array(F);for(N[0]=(T+=k[0])*P+I,N[1]=(M+=k[1])*L+E;D<F;)N[D]=k[D],++D;return N}}function c(y){var T=u(y.transform),M,P=1/0,L=P,I=-P,E=-P;function k(D){D=T(D),D[0]<P&&(P=D[0]),D[0]>I&&(I=D[0]),D[1]<L&&(L=D[1]),D[1]>E&&(E=D[1])}function C(D){switch(D.type){case"GeometryCollection":D.geometries.forEach(C);break;case"Point":k(D.coordinates);break;case"MultiPoint":D.coordinates.forEach(k);break}}y.arcs.forEach(function(D){for(var F=-1,N=D.length,G;++F<N;)G=T(D[F],F),G[0]<P&&(P=G[0]),G[0]>I&&(I=G[0]),G[1]<L&&(L=G[1]),G[1]>E&&(E=G[1])});for(M in y.objects)C(y.objects[M]);return[P,L,I,E]}function t(y,T){for(var M,P=y.length,L=P-T;L<--P;)M=y[L],y[L++]=y[P],y[P]=M}function f(y,T){return typeof T=="string"&&(T=y.objects[T]),T.type==="GeometryCollection"?{type:"FeatureCollection",features:T.geometries.map(function(M){return n(y,M)})}:n(y,T)}function n(y,T){var M=T.id,P=T.bbox,L=T.properties==null?{}:T.properties,I=o(y,T);return M==null&&P==null?{type:"Feature",properties:L,geometry:I}:P==null?{type:"Feature",id:M,properties:L,geometry:I}:{type:"Feature",id:M,bbox:P,properties:L,geometry:I}}function o(y,T){var M=u(y.transform),P=y.arcs;function L(F,N){N.length&&N.pop();for(var G=P[F<0?~F:F],U=0,X=G.length;U<X;++U)N.push(M(G[U],U));F<0&&t(N,X)}function I(F){return M(F)}function E(F){for(var N=[],G=0,U=F.length;G<U;++G)L(F[G],N);return N.length<2&&N.push(N[0]),N}function k(F){for(var N=E(F);N.length<4;)N.push(N[0]);return N}function C(F){return F.map(k)}function D(F){var N=F.type,G;switch(N){case"GeometryCollection":return{type:N,geometries:F.geometries.map(D)};case"Point":G=I(F.coordinates);break;case"MultiPoint":G=F.coordinates.map(I);break;case"LineString":G=E(F.arcs);break;case"MultiLineString":G=F.arcs.map(E);break;case"Polygon":G=C(F.arcs);break;case"MultiPolygon":G=F.arcs.map(C);break;default:return null}return{type:N,coordinates:G}}return D(T)}function l(y,T){var M={},P={},L={},I=[],E=-1;T.forEach(function(D,F){var N=y.arcs[D<0?~D:D],G;N.length<3&&!N[1][0]&&!N[1][1]&&(G=T[++E],T[E]=D,T[F]=G)}),T.forEach(function(D){var F=k(D),N=F[0],G=F[1],U,X;if(U=L[N])if(delete L[U.end],U.push(D),U.end=G,X=P[G]){delete P[X.start];var z=X===U?U:U.concat(X);P[z.start=U.start]=L[z.end=X.end]=z}else P[U.start]=L[U.end]=U;else if(U=P[G])if(delete P[U.start],U.unshift(D),U.start=N,X=L[N]){delete L[X.end];var B=X===U?U:X.concat(U);P[B.start=X.start]=L[B.end=U.end]=B}else P[U.start]=L[U.end]=U;else U=[D],P[U.start=N]=L[U.end=G]=U});function k(D){var F=y.arcs[D<0?~D:D],N=F[0],G;return y.transform?(G=[0,0],F.forEach(function(U){G[0]+=U[0],G[1]+=U[1]})):G=F[F.length-1],D<0?[G,N]:[N,G]}function C(D,F){for(var N in D){var G=D[N];delete F[G.start],delete G.start,delete G.end,G.forEach(function(U){M[U<0?~U:U]=1}),I.push(G)}}return C(L,P),C(P,L),T.forEach(function(D){M[D<0?~D:D]||I.push([D])}),I}function h(y){return o(y,i.apply(this,arguments))}function i(y,T,M){var P,L,I;if(arguments.length>1)P=s(y,T,M);else for(L=0,P=new Array(I=y.arcs.length);L<I;++L)P[L]=L;return{type:"MultiLineString",arcs:l(y,P)}}function s(y,T,M){var P=[],L=[],I;function E(N){var G=N<0?~N:N;(L[G]||(L[G]=[])).push({i:N,g:I})}function k(N){N.forEach(E)}function C(N){N.forEach(k)}function D(N){N.forEach(C)}function F(N){switch(I=N,N.type){case"GeometryCollection":N.geometries.forEach(F);break;case"LineString":k(N.arcs);break;case"MultiLineString":case"Polygon":C(N.arcs);break;case"MultiPolygon":D(N.arcs);break}}return F(T),L.forEach(M==null?function(N){P.push(N[0].i)}:function(N){M(N[0].g,N[N.length-1].g)&&P.push(N[0].i)}),P}function p(y){for(var T=-1,M=y.length,P,L=y[M-1],I=0;++T<M;)P=L,L=y[T],I+=P[0]*L[1]-P[1]*L[0];return Math.abs(I)}function d(y){return o(y,g.apply(this,arguments))}function g(y,T){var M={},P=[],L=[];T.forEach(I);function I(C){switch(C.type){case"GeometryCollection":C.geometries.forEach(I);break;case"Polygon":E(C.arcs);break;case"MultiPolygon":C.arcs.forEach(E);break}}function E(C){C.forEach(function(D){D.forEach(function(F){(M[F=F<0?~F:F]||(M[F]=[])).push(C)})}),P.push(C)}function k(C){return p(o(y,{type:"Polygon",arcs:[C]}).coordinates[0])}return P.forEach(function(C){if(!C._){var D=[],F=[C];for(C._=1,L.push(D);C=F.pop();)D.push(C),C.forEach(function(N){N.forEach(function(G){M[G<0?~G:G].forEach(function(U){U._||(U._=1,F.push(U))})})})}}),P.forEach(function(C){delete C._}),{type:"MultiPolygon",arcs:L.map(function(C){var D=[],F;if(C.forEach(function(z){z.forEach(function(B){B.forEach(function(j){M[j<0?~j:j].length<2&&D.push(j)})})}),D=l(y,D),(F=D.length)>1)for(var N=1,G=k(D[0]),U,X;N<F;++N)(U=k(D[N]))>G&&(X=D[0],D[0]=D[N],D[N]=X,G=U);return D}).filter(function(C){return C.length>0})}}function b(y,T){for(var M=0,P=y.length;M<P;){var L=M+P>>>1;y[L]<T?M=L+1:P=L}return M}function m(y){var T={},M=y.map(function(){return[]});function P(z,B){z.forEach(function(j){j<0&&(j=~j);var V=T[j];V?V.push(B):T[j]=[B]})}function L(z,B){z.forEach(function(j){P(j,B)})}function I(z,B){z.type==="GeometryCollection"?z.geometries.forEach(function(j){I(j,B)}):z.type in E&&E[z.type](z.arcs,B)}var E={LineString:P,MultiLineString:L,Polygon:L,MultiPolygon:function(z,B){z.forEach(function(j){L(j,B)})}};y.forEach(I);for(var k in T)for(var C=T[k],D=C.length,F=0;F<D;++F)for(var N=F+1;N<D;++N){var G=C[F],U=C[N],X;(X=M[G])[k=b(X,U)]!==U&&X.splice(k,0,U),(X=M[U])[k=b(X,G)]!==G&&X.splice(k,0,G)}return M}function x(y){if(y==null)return a;var T,M,P=y.scale[0],L=y.scale[1],I=y.translate[0],E=y.translate[1];return function(k,C){C||(T=M=0);var D=2,F=k.length,N=new Array(F),G=Math.round((k[0]-I)/P),U=Math.round((k[1]-E)/L);for(N[0]=G-T,T=G,N[1]=U-M,M=U;D<F;)N[D]=k[D],++D;return N}}function w(y,T){if(y.transform)throw new Error("already quantized");if(!T||!T.scale){if(!((E=Math.floor(T))>=2))throw new Error("n must be \u22652");C=y.bbox||c(y);var M=C[0],P=C[1],L=C[2],I=C[3],E;T={scale:[L-M?(L-M)/(E-1):1,I-P?(I-P)/(E-1):1],translate:[M,P]}}else C=y.bbox;var k=x(T),C,D,F=y.objects,N={};function G(z){return k(z)}function U(z){var B;switch(z.type){case"GeometryCollection":B={type:"GeometryCollection",geometries:z.geometries.map(U)};break;case"Point":B={type:"Point",coordinates:G(z.coordinates)};break;case"MultiPoint":B={type:"MultiPoint",coordinates:z.coordinates.map(G)};break;default:return z}return z.id!=null&&(B.id=z.id),z.bbox!=null&&(B.bbox=z.bbox),z.properties!=null&&(B.properties=z.properties),B}function X(z){var B=0,j=1,V=z.length,K,te=new Array(V);for(te[0]=k(z[0],0);++B<V;)((K=k(z[B],B))[0]||K[1])&&(te[j++]=K);return j===1&&(te[j++]=[0,0]),te.length=j,te}for(D in F)N[D]=U(F[D]);return{type:"Topology",bbox:C,transform:T,objects:N,arcs:y.arcs.map(X)}}r.bbox=c,r.feature=f,r.merge=d,r.mergeArcs=g,r.mesh=h,r.meshArcs=i,r.neighbors=m,r.quantize=w,r.transform=u,r.untransform=x,Object.defineProperty(r,"__esModule",{value:!0})})},{}],580:[function(e,v,S){v.exports=c;var r=e("permutation-rank"),a=e("permutation-parity"),u=e("gamma");function c(t){if(t<0)return[];if(t===0)return[[0]];for(var f=Math.round(u(t+1))|0,n=[],o=0;o<f;++o){for(var l=r.unrank(t,o),h=[0],i=0,s=0;s<l.length;++s)i+=1<<l[s],h.push(i);a(l)<1&&(h[0]=i,h[t]=0),n.push(h)}return n}},{gamma:248,"permutation-parity":509,"permutation-rank":510}],581:[function(e,v,S){v.exports=p;var r=e("filtered-vector"),a=e("gl-mat4/invert"),u=e("gl-mat4/rotate"),c=e("gl-vec3/cross"),t=e("gl-vec3/normalize"),f=e("gl-vec3/dot");function n(d,g,b){return Math.sqrt(Math.pow(d,2)+Math.pow(g,2)+Math.pow(b,2))}function o(d){return Math.min(1,Math.max(-1,d))}function l(d){var g=Math.abs(d[0]),b=Math.abs(d[1]),m=Math.abs(d[2]),x=[0,0,0];g>Math.max(b,m)?x[2]=1:b>Math.max(g,m)?x[0]=1:x[1]=1;for(var w=0,y=0,T=0;T<3;++T)w+=d[T]*d[T],y+=x[T]*d[T];for(var T=0;T<3;++T)x[T]-=y/w*d[T];return t(x,x),x}function h(d,g,b,m,x,w,y,T){this.center=r(b),this.up=r(m),this.right=r(x),this.radius=r([w]),this.angle=r([y,T]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(d,g),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var M=0;M<16;++M)this.computedMatrix[M]=.5;this.recalcMatrix(0)}var i=h.prototype;i.setDistanceLimits=function(d,g){d>0?d=Math.log(d):d=-1/0,g>0?g=Math.log(g):g=1/0,g=Math.max(g,d),this.radius.bounds[0][0]=d,this.radius.bounds[1][0]=g},i.getDistanceLimits=function(d){var g=this.radius.bounds[0];return d?(d[0]=Math.exp(g[0][0]),d[1]=Math.exp(g[1][0]),d):[Math.exp(g[0][0]),Math.exp(g[1][0])]},i.recalcMatrix=function(d){this.center.curve(d),this.up.curve(d),this.right.curve(d),this.radius.curve(d),this.angle.curve(d);for(var g=this.computedUp,b=this.computedRight,m=0,x=0,w=0;w<3;++w)x+=g[w]*b[w],m+=g[w]*g[w];for(var y=Math.sqrt(m),T=0,w=0;w<3;++w)b[w]-=g[w]*x/m,T+=b[w]*b[w],g[w]/=y;for(var M=Math.sqrt(T),w=0;w<3;++w)b[w]/=M;var P=this.computedToward;c(P,g,b),t(P,P);for(var L=Math.exp(this.computedRadius[0]),I=this.computedAngle[0],E=this.computedAngle[1],k=Math.cos(I),C=Math.sin(I),D=Math.cos(E),F=Math.sin(E),N=this.computedCenter,G=k*D,U=C*D,X=F,z=-k*F,B=-C*F,j=D,V=this.computedEye,K=this.computedMatrix,w=0;w<3;++w){var te=G*b[w]+U*P[w]+X*g[w];K[4*w+1]=z*b[w]+B*P[w]+j*g[w],K[4*w+2]=te,K[4*w+3]=0}var $=K[1],ie=K[5],se=K[9],Q=K[2],H=K[6],oe=K[10],re=ie*oe-se*H,ee=se*Q-$*oe,ae=$*H-ie*Q,fe=n(re,ee,ae);re/=fe,ee/=fe,ae/=fe,K[0]=re,K[4]=ee,K[8]=ae;for(var w=0;w<3;++w)V[w]=N[w]+K[2+4*w]*L;for(var w=0;w<3;++w){for(var T=0,de=0;de<3;++de)T+=K[w+4*de]*V[de];K[12+w]=-T}K[15]=1},i.getMatrix=function(d,g){this.recalcMatrix(d);var b=this.computedMatrix;if(g){for(var m=0;m<16;++m)g[m]=b[m];return g}return b};var s=[0,0,0];i.rotate=function(d,g,b,m){if(this.angle.move(d,g,b),m){this.recalcMatrix(d);var x=this.computedMatrix;s[0]=x[2],s[1]=x[6],s[2]=x[10];for(var w=this.computedUp,y=this.computedRight,T=this.computedToward,M=0;M<3;++M)x[4*M]=w[M],x[4*M+1]=y[M],x[4*M+2]=T[M];u(x,x,m,s);for(var M=0;M<3;++M)w[M]=x[4*M],y[M]=x[4*M+1];this.up.set(d,w[0],w[1],w[2]),this.right.set(d,y[0],y[1],y[2])}},i.pan=function(d,g,b,m){g=g||0,b=b||0,m=m||0,this.recalcMatrix(d);var x=this.computedMatrix;Math.exp(this.computedRadius[0]);var w=x[1],y=x[5],T=x[9],M=n(w,y,T);w/=M,y/=M,T/=M;var P=x[0],L=x[4],I=x[8],E=P*w+L*y+I*T;P-=w*E,L-=y*E,I-=T*E;var k=n(P,L,I);P/=k,L/=k,I/=k;var C=P*g+w*b,D=L*g+y*b,F=I*g+T*b;this.center.move(d,C,D,F);var N=Math.exp(this.computedRadius[0]);N=Math.max(1e-4,N+m),this.radius.set(d,Math.log(N))},i.translate=function(d,g,b,m){this.center.move(d,g||0,b||0,m||0)},i.setMatrix=function(d,g,b,m){var x=1;typeof b=="number"&&(x=b|0),(x<0||x>3)&&(x=1);var w=(x+2)%3;g||(this.recalcMatrix(d),g=this.computedMatrix);var y=g[x],T=g[x+4],M=g[x+8];if(m){var L=Math.abs(y),I=Math.abs(T),E=Math.abs(M),k=Math.max(L,I,E);L===k?(y=y<0?-1:1,T=M=0):E===k?(M=M<0?-1:1,y=T=0):(T=T<0?-1:1,y=M=0)}else{var P=n(y,T,M);y/=P,T/=P,M/=P}var C=g[w],D=g[w+4],F=g[w+8],N=C*y+D*T+F*M;C-=y*N,D-=T*N,F-=M*N;var G=n(C,D,F);C/=G,D/=G,F/=G;var U=T*F-M*D,X=M*C-y*F,z=y*D-T*C,B=n(U,X,z);U/=B,X/=B,z/=B,this.center.jump(d,me,be,Me),this.radius.idle(d),this.up.jump(d,y,T,M),this.right.jump(d,C,D,F);var j,V;if(x===2){var K=g[1],te=g[5],$=g[9],ie=K*C+te*D+$*F,se=K*U+te*X+$*z;re<0?j=-Math.PI/2:j=Math.PI/2,V=Math.atan2(se,ie)}else{var Q=g[2],H=g[6],oe=g[10],re=Q*y+H*T+oe*M,ee=Q*C+H*D+oe*F,ae=Q*U+H*X+oe*z;j=Math.asin(o(re)),V=Math.atan2(ae,ee)}this.angle.jump(d,V,j),this.recalcMatrix(d);var fe=g[2],de=g[6],pe=g[10],W=this.computedMatrix;a(W,g);var ue=W[15],me=W[12]/ue,be=W[13]/ue,Me=W[14]/ue,Pe=Math.exp(this.computedRadius[0]);this.center.jump(d,me-fe*Pe,be-de*Pe,Me-pe*Pe)},i.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},i.idle=function(d){this.center.idle(d),this.up.idle(d),this.right.idle(d),this.radius.idle(d),this.angle.idle(d)},i.flush=function(d){this.center.flush(d),this.up.flush(d),this.right.flush(d),this.radius.flush(d),this.angle.flush(d)},i.setDistance=function(d,g){g>0&&this.radius.set(d,Math.log(g))},i.lookAt=function(d,g,b,m){this.recalcMatrix(d),g=g||this.computedEye,b=b||this.computedCenter,m=m||this.computedUp;var x=m[0],w=m[1],y=m[2],T=n(x,w,y);if(!(T<1e-6)){x/=T,w/=T,y/=T;var M=g[0]-b[0],P=g[1]-b[1],L=g[2]-b[2],I=n(M,P,L);if(!(I<1e-6)){M/=I,P/=I,L/=I;var E=this.computedRight,k=E[0],C=E[1],D=E[2],F=x*k+w*C+y*D;k-=F*x,C-=F*w,D-=F*y;var N=n(k,C,D);if(!(N<.01&&(k=w*L-y*P,C=y*M-x*L,D=x*P-w*M,N=n(k,C,D),N<1e-6))){k/=N,C/=N,D/=N,this.up.set(d,x,w,y),this.right.set(d,k,C,D),this.center.set(d,b[0],b[1],b[2]),this.radius.set(d,Math.log(I));var G=w*D-y*C,U=y*k-x*D,X=x*C-w*k,z=n(G,U,X);G/=z,U/=z,X/=z;var B=x*M+w*P+y*L,j=k*M+C*P+D*L,V=G*M+U*P+X*L,K=Math.asin(o(B)),te=Math.atan2(V,j),$=this.angle._state,ie=$[$.length-1],se=$[$.length-2];ie=ie%(2*Math.PI);var Q=Math.abs(ie+2*Math.PI-te),H=Math.abs(ie-te),oe=Math.abs(ie-2*Math.PI-te);Q<H&&(ie+=2*Math.PI),oe<H&&(ie-=2*Math.PI),this.angle.jump(this.angle.lastT(),ie,se),this.angle.set(d,te,K)}}}};function p(d){d=d||{};var g=d.center||[0,0,0],b=d.up||[0,1,0],m=d.right||l(b),x=d.radius||1,w=d.theta||0,y=d.phi||0;if(g=[].slice.call(g,0,3),b=[].slice.call(b,0,3),t(b,b),m=[].slice.call(m,0,3),t(m,m),"eye"in d){var T=d.eye,M=[T[0]-g[0],T[1]-g[1],T[2]-g[2]];c(m,M,b),n(m[0],m[1],m[2])<1e-6?m=l(b):t(m,m),x=n(M[0],M[1],M[2]);var P=f(b,M)/x,L=f(m,M)/x;y=Math.acos(P),w=Math.acos(L)}return x=Math.log(x),new h(d.zoomMin,d.zoomMax,g,b,m,x,w,y)}},{"filtered-vector":242,"gl-mat4/invert":293,"gl-mat4/rotate":299,"gl-vec3/cross":365,"gl-vec3/dot":370,"gl-vec3/normalize":387}],582:[function(e,v,S){v.exports=a;var r=+(Math.pow(2,27)+1);function a(u,c,t){var f=u*c,n=r*u,o=n-u,l=n-o,h=u-l,i=r*c,s=i-c,p=i-s,d=c-p,g=f-l*p,b=g-h*p,m=b-l*d,x=h*d-m;return t?(t[0]=x,t[1]=f,t):[x,f]}},{}],583:[function(e,v,S){v.exports=r;function r(a,u,c){var t=a+u,f=t-a,n=t-f,o=u-f,l=a-n;return c?(c[0]=l+o,c[1]=t,c):[l+o,t]}},{}],584:[function(e,v,S){var r=e("../prototype/is");v.exports=function(a){if(typeof a!="function"||!hasOwnProperty.call(a,"length"))return!1;try{if(typeof a.length!="number"||typeof a.call!="function"||typeof a.apply!="function")return!1}catch{return!1}return!r(a)}},{"../prototype/is":591}],585:[function(e,v,S){var r=e("../value/is"),a=e("../object/is"),u=e("../string/coerce"),c=e("./to-short-string"),t=function(f,n){return f.replace("%v",c(n))};v.exports=function(f,n,o){if(!a(o))throw new TypeError(t(n,f));if(!r(f)){if("default"in o)return o.default;if(o.isOptional)return null}var l=u(o.errorMessage);throw r(l)||(l=n),new TypeError(t(l,f))}},{"../object/is":588,"../string/coerce":592,"../value/is":594,"./to-short-string":587}],586:[function(e,v,S){v.exports=function(r){try{return r.toString()}catch{try{return String(r)}catch{return null}}}},{}],587:[function(e,v,S){var r=e("./safe-to-string"),a=/[\n\r\u2028\u2029]/g;v.exports=function(u){var c=r(u);return c===null?"<Non-coercible to string value>":(c.length>100&&(c=c.slice(0,99)+"\u2026"),c=c.replace(a,function(t){switch(t){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),c)}},{"./safe-to-string":586}],588:[function(e,v,S){var r=e("../value/is"),a={object:!0,function:!0,undefined:!0};v.exports=function(u){return r(u)?hasOwnProperty.call(a,typeof u):!1}},{"../value/is":594}],589:[function(e,v,S){var r=e("../lib/resolve-exception"),a=e("./is");v.exports=function(u){return a(u)?u:r(u,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":585,"./is":590}],590:[function(e,v,S){var r=e("../function/is"),a=/^\s*class[\s{/}]/,u=Function.prototype.toString;v.exports=function(c){return!(!r(c)||a.test(u.call(c)))}},{"../function/is":584}],591:[function(e,v,S){var r=e("../object/is");v.exports=function(a){if(!r(a))return!1;try{return a.constructor?a.constructor.prototype===a:!1}catch{return!1}}},{"../object/is":588}],592:[function(e,v,S){var r=e("../value/is"),a=e("../object/is"),u=Object.prototype.toString;v.exports=function(c){if(!r(c))return null;if(a(c)){var t=c.toString;if(typeof t!="function"||t===u)return null}try{return""+c}catch{return null}}},{"../object/is":588,"../value/is":594}],593:[function(e,v,S){var r=e("../lib/resolve-exception"),a=e("./is");v.exports=function(u){return a(u)?u:r(u,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":585,"./is":594}],594:[function(e,v,S){var r=void 0;v.exports=function(a){return a!==r&&a!==null}},{}],595:[function(e,v,S){(function(r){(function(){var a=e("bit-twiddle"),u=e("dup"),c=e("buffer").Buffer;r.__TYPEDARRAY_POOL||(r.__TYPEDARRAY_POOL={UINT8:u([32,0]),UINT16:u([32,0]),UINT32:u([32,0]),BIGUINT64:u([32,0]),INT8:u([32,0]),INT16:u([32,0]),INT32:u([32,0]),BIGINT64:u([32,0]),FLOAT:u([32,0]),DOUBLE:u([32,0]),DATA:u([32,0]),UINT8C:u([32,0]),BUFFER:u([32,0])});var t=typeof Uint8ClampedArray<"u",f=typeof BigUint64Array<"u",n=typeof BigInt64Array<"u",o=r.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=u([32,0])),o.BIGUINT64||(o.BIGUINT64=u([32,0])),o.BIGINT64||(o.BIGINT64=u([32,0])),o.BUFFER||(o.BUFFER=u([32,0]));var l=o.DATA,h=o.BUFFER;S.free=function(C){if(c.isBuffer(C))h[a.log2(C.length)].push(C);else{if(Object.prototype.toString.call(C)!=="[object ArrayBuffer]"&&(C=C.buffer),!C)return;var D=C.length||C.byteLength,F=a.log2(D)|0;l[F].push(C)}};function i(k){if(!!k){var C=k.length||k.byteLength,D=a.log2(C);l[D].push(k)}}function s(k){i(k.buffer)}S.freeUint8=S.freeUint16=S.freeUint32=S.freeBigUint64=S.freeInt8=S.freeInt16=S.freeInt32=S.freeBigInt64=S.freeFloat32=S.freeFloat=S.freeFloat64=S.freeDouble=S.freeUint8Clamped=S.freeDataView=s,S.freeArrayBuffer=i,S.freeBuffer=function(C){h[a.log2(C.length)].push(C)},S.malloc=function(C,D){if(D===void 0||D==="arraybuffer")return p(C);switch(D){case"uint8":return d(C);case"uint16":return g(C);case"uint32":return b(C);case"int8":return m(C);case"int16":return x(C);case"int32":return w(C);case"float":case"float32":return y(C);case"double":case"float64":return T(C);case"uint8_clamped":return M(C);case"bigint64":return L(C);case"biguint64":return P(C);case"buffer":return E(C);case"data":case"dataview":return I(C);default:return null}return null};function p(C){var C=a.nextPow2(C),D=a.log2(C),F=l[D];return F.length>0?F.pop():new ArrayBuffer(C)}S.mallocArrayBuffer=p;function d(k){return new Uint8Array(p(k),0,k)}S.mallocUint8=d;function g(k){return new Uint16Array(p(2*k),0,k)}S.mallocUint16=g;function b(k){return new Uint32Array(p(4*k),0,k)}S.mallocUint32=b;function m(k){return new Int8Array(p(k),0,k)}S.mallocInt8=m;function x(k){return new Int16Array(p(2*k),0,k)}S.mallocInt16=x;function w(k){return new Int32Array(p(4*k),0,k)}S.mallocInt32=w;function y(k){return new Float32Array(p(4*k),0,k)}S.mallocFloat32=S.mallocFloat=y;function T(k){return new Float64Array(p(8*k),0,k)}S.mallocFloat64=S.mallocDouble=T;function M(k){return t?new Uint8ClampedArray(p(k),0,k):d(k)}S.mallocUint8Clamped=M;function P(k){return f?new BigUint64Array(p(8*k),0,k):null}S.mallocBigUint64=P;function L(k){return n?new BigInt64Array(p(8*k),0,k):null}S.mallocBigInt64=L;function I(k){return new DataView(p(k),0,k)}S.mallocDataView=I;function E(k){k=a.nextPow2(k);var C=a.log2(k),D=h[C];return D.length>0?D.pop():new c(k)}S.mallocBuffer=E,S.clearCache=function(){for(var C=0;C<32;++C)o.UINT8[C].length=0,o.UINT16[C].length=0,o.UINT32[C].length=0,o.INT8[C].length=0,o.INT16[C].length=0,o.INT32[C].length=0,o.FLOAT[C].length=0,o.DOUBLE[C].length=0,o.BIGUINT64[C].length=0,o.BIGINT64[C].length=0,o.UINT8C[C].length=0,l[C].length=0,h[C].length=0}}).call(this)}).call(this,typeof Hs<"u"?Hs:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":97,buffer:111,dup:176}],596:[function(e,v,S){v.exports=r;function r(u){this.roots=new Array(u),this.ranks=new Array(u);for(var c=0;c<u;++c)this.roots[c]=c,this.ranks[c]=0}var a=r.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}}),a.makeSet=function(){var u=this.roots.length;return this.roots.push(u),this.ranks.push(0),u},a.find=function(u){for(var c=u,t=this.roots;t[u]!==u;)u=t[u];for(;t[c]!==u;){var f=t[c];t[c]=u,c=f}return u},a.link=function(u,c){var t=this.find(u),f=this.find(c);if(t!==f){var n=this.ranks,o=this.roots,l=n[t],h=n[f];l<h?o[t]=f:h<l?o[f]=t:(o[f]=t,++n[t])}}},{}],597:[function(e,v,S){function r(c,t){for(var f=1,n=c.length,o=c[0],l=c[0],h=1;h<n;++h)if(l=o,o=c[h],t(o,l)){if(h===f){f++;continue}c[f++]=o}return c.length=f,c}function a(c){for(var t=1,f=c.length,n=c[0],o=c[0],l=1;l<f;++l,o=n)if(o=n,n=c[l],n!==o){if(l===t){t++;continue}c[t++]=n}return c.length=t,c}function u(c,t,f){return c.length===0?c:t?(f||c.sort(t),r(c,t)):(f||c.sort(),a(c))}v.exports=u},{}],598:[function(e,v,S){var r=/[\'\"]/;v.exports=function(u){return u?(r.test(u.charAt(0))&&(u=u.substr(1)),r.test(u.charAt(u.length-1))&&(u=u.substr(0,u.length-1)),u):""}},{}],599:[function(e,v,S){v.exports=function(a,u,c){Array.isArray(c)||(c=[].slice.call(arguments,2));for(var t=0,f=c.length;t<f;t++){var n=c[t];for(var o in n)if(!(u[o]!==void 0&&!Array.isArray(u[o])&&a[o]===u[o])&&o in u){var l;if(n[o]===!0)l=u[o];else{if(n[o]===!1)continue;if(typeof n[o]=="function"&&(l=n[o](u[o],a,u),l===void 0))continue}a[o]=l}}return a}},{}],600:[function(e,v,S){v.exports=c;var r=e("./lib/vtext"),a=null,u=null;typeof document<"u"&&(a=document.createElement("canvas"),a.width=8192,a.height=1024,u=a.getContext("2d"));function c(t,f){return(typeof f!="object"||f===null)&&(f={}),r(t,f.canvas||a,f.context||u,f)}},{"./lib/vtext":601}],601:[function(e,v,S){v.exports=P,v.exports.processPixels=M;var r=e("surface-nets"),a=e("ndarray"),u=e("simplify-planar-graph"),c=e("clean-pslg"),t=e("cdt2d"),f=e("planar-graph-to-polyline"),n="b",o="b|",l="i",h="i|",i="sup",s="+",p="+1",d="sub",g="-",b="-1";function m(L,I,E,k){for(var C="<"+L+">",D="</"+L+">",F=C.length,N=D.length,G=I[0]===s||I[0]===g,U=0,X=-N;U>-1&&(U=E.indexOf(C,U),!(U===-1||(X=E.indexOf(D,U+F),X===-1)||X<=U));){for(var z=U;z<X+N;++z)if(z<U+F||z>=X)k[z]=null,E=E.substr(0,z)+" "+E.substr(z+1);else if(k[z]!==null){var B=k[z].indexOf(I[0]);B===-1?k[z]+=I:G&&(k[z]=k[z].substr(0,B+1)+(1+parseInt(k[z][B+1]))+k[z].substr(B+2))}var j=U+F,V=E.substr(j,X-j),K=V.indexOf(C);K!==-1?U=K:U=X+N}return k}function x(L,I,E){for(var k=I.textAlign||"start",C=I.textBaseline||"alphabetic",D=[1<<30,1<<30],F=[0,0],N=L.length,G=0;G<N;++G)for(var U=L[G],X=0;X<2;++X)D[X]=Math.min(D[X],U[X])|0,F[X]=Math.max(F[X],U[X])|0;var z=0;switch(k){case"center":z=-.5*(D[0]+F[0]);break;case"right":case"end":z=-F[0];break;case"left":case"start":z=-D[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+k+"'")}var B=0;switch(C){case"hanging":case"top":B=-D[1];break;case"middle":B=-.5*(D[1]+F[1]);break;case"alphabetic":case"ideographic":B=-3*E;break;case"bottom":B=-F[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+C+"'")}var j=1/E;return"lineHeight"in I?j*=+I.lineHeight:"width"in I?j=I.width/(F[0]-D[0]):"height"in I&&(j=I.height/(F[1]-D[1])),L.map(function(V){return[j*(V[0]+z),j*(V[1]+B)]})}function w(L,I,E,k,C,D){E=E.replace(/\n/g,""),D.breaklines===!0?E=E.replace(/\<br\>/g,`
`):E=E.replace(/\<br\>/g," ");var F="",N=[];for(ie=0;ie<E.length;++ie)N[ie]=F;D.bolds===!0&&(N=m(n,o,E,N)),D.italics===!0&&(N=m(l,h,E,N)),D.superscripts===!0&&(N=m(i,p,E,N)),D.subscripts===!0&&(N=m(d,b,E,N));var G=[],U="";for(ie=0;ie<E.length;++ie)N[ie]!==null&&(U+=E[ie],G.push(N[ie]));var X=U.split(`
`),z=X.length,B=Math.round(C*k),j=k,V=k*2,K=0,te=z*B+V;L.height<te&&(L.height=te),I.fillStyle="#000",I.fillRect(0,0,L.width,L.height),I.fillStyle="#fff";var $,ie,se,Q,H,oe=0,re="";function ee(){if(re!==""){var Me=I.measureText(re).width;I.fillText(re,j+se,V+Q),se+=Me}}function ae(){return""+Math.round(H)+"px "}function fe(Me,Pe){var Ge=""+I.font;if(D.subscripts===!0){var ze=Me.indexOf(g),Qe=Pe.indexOf(g),tt=ze>-1?parseInt(Me[1+ze]):0,Ce=Qe>-1?parseInt(Pe[1+Qe]):0;tt!==Ce&&(Ge=Ge.replace(ae(),"?px "),H*=Math.pow(.75,Ce-tt),Ge=Ge.replace("?px ",ae())),Q+=.25*B*(Ce-tt)}if(D.superscripts===!0){var Ae=Me.indexOf(s),Be=Pe.indexOf(s),qe=Ae>-1?parseInt(Me[1+Ae]):0,Tt=Be>-1?parseInt(Pe[1+Be]):0;qe!==Tt&&(Ge=Ge.replace(ae(),"?px "),H*=Math.pow(.75,Tt-qe),Ge=Ge.replace("?px ",ae())),Q-=.25*B*(Tt-qe)}if(D.bolds===!0){var At=Me.indexOf(o)>-1,Ne=Pe.indexOf(o)>-1;!At&&Ne&&(ct?Ge=Ge.replace("italic ","italic bold "):Ge="bold "+Ge),At&&!Ne&&(Ge=Ge.replace("bold ",""))}if(D.italics===!0){var ct=Me.indexOf(h)>-1,Mt=Pe.indexOf(h)>-1;!ct&&Mt&&(Ge="italic "+Ge),ct&&!Mt&&(Ge=Ge.replace("italic ",""))}I.font=Ge}for($=0;$<z;++$){var de=X[$]+`
`;for(se=0,Q=$*B,H=k,re="",ie=0;ie<de.length;++ie){var pe=ie+oe<G.length?G[ie+oe]:G[G.length-1];F===pe?re+=de[ie]:(ee(),re=de[ie],pe!==void 0&&(fe(F,pe),F=pe))}ee(),oe+=de.length;var W=Math.round(se+2*j)|0;K<W&&(K=W)}var ue=K,me=V+B*z,be=a(I.getImageData(0,0,ue,me).data,[me,ue,4]);return be.pick(-1,-1,0).transpose(1,0)}function y(L,I){var E=r(L,128);return I?u(E.cells,E.positions,.25):{edges:E.cells,positions:E.positions}}function T(L,I,E,k){var C=y(L,k),D=x(C.positions,I,E),F=C.edges,N=I.orientation==="ccw";if(c(D,F),I.polygons||I.polygon||I.polyline){for(var G=f(F,D),U=new Array(G.length),X=0;X<G.length;++X){for(var z=G[X],B=new Array(z.length),j=0;j<z.length;++j){for(var V=z[j],K=new Array(V.length),te=0;te<V.length;++te)K[te]=D[V[te]].slice();N&&K.reverse(),B[j]=K}U[X]=B}return U}else return I.triangles||I.triangulate||I.triangle?{cells:t(D,F,{delaunay:!1,exterior:!1,interior:!0}),positions:D}:{edges:F,positions:D}}function M(L,I,E){try{return T(L,I,E,!0)}catch{}try{return T(L,I,E,!1)}catch{}return I.polygons||I.polyline||I.polygon?[]:I.triangles||I.triangulate||I.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function P(L,I,E,k){var C=64,D=1.25,F={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};k&&(k.size&&k.size>0&&(C=k.size),k.lineSpacing&&k.lineSpacing>0&&(D=k.lineSpacing),k.styletags&&k.styletags.breaklines&&(F.breaklines=!!k.styletags.breaklines),k.styletags&&k.styletags.bolds&&(F.bolds=!!k.styletags.bolds),k.styletags&&k.styletags.italics&&(F.italics=!!k.styletags.italics),k.styletags&&k.styletags.subscripts&&(F.subscripts=!!k.styletags.subscripts),k.styletags&&k.styletags.superscripts&&(F.superscripts=!!k.styletags.superscripts)),E.font=[k.fontStyle,k.fontVariant,k.fontWeight,C+"px",k.font].filter(function(G){return G}).join(" "),E.textAlign="start",E.textBaseline="alphabetic",E.direction="ltr";var N=w(I,E,L,C,D,F);return M(N,k,C)}},{cdt2d:112,"clean-pslg":121,ndarray:495,"planar-graph-to-polyline":514,"simplify-planar-graph":562,"surface-nets":570}],602:[function(e,v,S){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function a(M){M.permitHostObjects___&&M.permitHostObjects___(a)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=a);var u=!1;if(typeof WeakMap=="function"){var c=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var t=new c,f=Object.freeze({});if(t.set(f,1),t.get(f)!==1)u=!0;else{v.exports=WeakMap;return}}}var n=Object.getOwnPropertyNames,o=Object.defineProperty,l=Object.isExtensible,h="weakmap:",i=h+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var s=new ArrayBuffer(25),p=new Uint8Array(s);crypto.getRandomValues(p),i=h+"rand:"+Array.prototype.map.call(p,function(M){return(M%36).toString(36)}).join("")+"___"}function d(M){return!(M.substr(0,h.length)==h&&M.substr(M.length-3)==="___")}if(o(Object,"getOwnPropertyNames",{value:function(P){return n(P).filter(d)}}),"getPropertyNames"in Object){var g=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(P){return g(P).filter(d)}})}function b(M){if(M!==Object(M))throw new TypeError("Not an object: "+M);var P=M[i];if(P&&P.key===M)return P;if(!!l(M)){P={key:M};try{return o(M,i,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch{return}}}(function(){var M=Object.freeze;o(Object,"freeze",{value:function(E){return b(E),M(E)}});var P=Object.seal;o(Object,"seal",{value:function(E){return b(E),P(E)}});var L=Object.preventExtensions;o(Object,"preventExtensions",{value:function(E){return b(E),L(E)}})})();function m(M){return M.prototype=null,Object.freeze(M)}var x=!1;function w(){!x&&typeof console<"u"&&(x=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var y=0,T=function(){this instanceof T||w();var M=[],P=[],L=y++;function I(D,F){var N,G=b(D);return G?L in G?G[L]:F:(N=M.indexOf(D),N>=0?P[N]:F)}function E(D){var F=b(D);return F?L in F:M.indexOf(D)>=0}function k(D,F){var N,G=b(D);return G?G[L]=F:(N=M.indexOf(D),N>=0?P[N]=F:(N=M.length,P[N]=F,M[N]=D)),this}function C(D){var F=b(D),N,G;return F?L in F&&delete F[L]:(N=M.indexOf(D),N<0?!1:(G=M.length-1,M[N]=void 0,P[N]=P[G],M[N]=M[G],M.length=G,P.length=G,!0))}return Object.create(T.prototype,{get___:{value:m(I)},has___:{value:m(E)},set___:{value:m(k)},delete___:{value:m(C)}})};T.prototype=Object.create(Object.prototype,{get:{value:function(P,L){return this.get___(P,L)},writable:!0,configurable:!0},has:{value:function(P){return this.has___(P)},writable:!0,configurable:!0},set:{value:function(P,L){return this.set___(P,L)},writable:!0,configurable:!0},delete:{value:function(P){return this.delete___(P)},writable:!0,configurable:!0}}),typeof c=="function"?function(){u&&typeof Proxy<"u"&&(Proxy=void 0);function M(){this instanceof T||w();var P=new c,L=void 0,I=!1;function E(F,N){return L?P.has(F)?P.get(F):L.get___(F,N):P.get(F,N)}function k(F){return P.has(F)||(L?L.has___(F):!1)}var C;u?C=function(F,N){return P.set(F,N),P.has(F)||(L||(L=new T),L.set(F,N)),this}:C=function(F,N){if(I)try{P.set(F,N)}catch{L||(L=new T),L.set___(F,N)}else P.set(F,N);return this};function D(F){var N=!!P.delete(F);return L&&L.delete___(F)||N}return Object.create(T.prototype,{get___:{value:m(E)},has___:{value:m(k)},set___:{value:m(C)},delete___:{value:m(D)},permitHostObjects___:{value:m(function(F){if(F===a)I=!0;else throw new Error("bogus call to permitHostObjects___")})}})}M.prototype=T.prototype,v.exports=M,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),v.exports=T)})()},{}],603:[function(e,v,S){var r=e("./hidden-store.js");v.exports=a;function a(){var u={};return function(c){if((typeof c!="object"||c===null)&&typeof c!="function")throw new Error("Weakmap-shim: Key must be object");var t=c.valueOf(u);return t&&t.identity===u?t:r(c,u)}}},{"./hidden-store.js":604}],604:[function(e,v,S){v.exports=r;function r(a,u){var c={identity:u},t=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(f){return f!==u?t.apply(this,arguments):c},writable:!0}),c}},{}],605:[function(e,v,S){var r=e("./create-store.js");v.exports=a;function a(){var u=r();return{get:function(c,t){var f=u(c);return f.hasOwnProperty("value")?f.value:t},set:function(c,t){return u(c).value=t,this},has:function(c){return"value"in u(c)},delete:function(c){return delete u(c).value}}}},{"./create-store.js":603}],606:[function(e,v,S){var r=e("get-canvas-context");v.exports=function(u){return r("webgl",u)}},{"get-canvas-context":249}],607:[function(e,v,S){var r=e("../main"),a=e("object-assign"),u=r.instance();function c(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}c.prototype=new r.baseCalendar,a(c.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(p,d){if(typeof p=="string"){var g=p.match(f);return g?g[0]:""}var b=this._validateYear(p),m=p.month(),x=""+this.toChineseMonth(b,m);return d&&x.length<2&&(x="0"+x),this.isIntercalaryMonth(b,m)&&(x+="i"),x},monthNames:function(p){if(typeof p=="string"){var d=p.match(n);return d?d[0]:""}var g=this._validateYear(p),b=p.month(),m=this.toChineseMonth(g,b),x=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][m-1];return this.isIntercalaryMonth(g,b)&&(x="\u95F0"+x),x},monthNamesShort:function(p){if(typeof p=="string"){var d=p.match(o);return d?d[0]:""}var g=this._validateYear(p),b=p.month(),m=this.toChineseMonth(g,b),x=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][m-1];return this.isIntercalaryMonth(g,b)&&(x="\u95F0"+x),x},parseMonth:function(p,d){p=this._validateYear(p);var g=parseInt(d),b;if(isNaN(g))d[0]==="\u95F0"&&(b=!0,d=d.substring(1)),d[d.length-1]==="\u6708"&&(d=d.substring(0,d.length-1)),g=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(d);else{var m=d[d.length-1];b=m==="i"||m==="I"}var x=this.toMonthIndex(p,g,b);return x},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(p,d){if(p.year&&(p=p.year()),typeof p!="number"||p<1888||p>2111)throw d.replace(/\{0\}/,this.local.name);return p},toMonthIndex:function(p,d,g){var b=this.intercalaryMonth(p),m=g&&d!==b;if(m||d<1||d>12)throw r.local.invalidMonth.replace(/\{0\}/,this.local.name);var x;return b?!g&&d<=b?x=d-1:x=d:x=d-1,x},toChineseMonth:function(p,d){p.year&&(p=p.year(),d=p.month());var g=this.intercalaryMonth(p),b=g?12:11;if(d<0||d>b)throw r.local.invalidMonth.replace(/\{0\}/,this.local.name);var m;return g?d<g?m=d+1:m=d:m=d+1,m},intercalaryMonth:function(p){p=this._validateYear(p);var d=l[p-l[0]],g=d>>13;return g},isIntercalaryMonth:function(p,d){p.year&&(p=p.year(),d=p.month());var g=this.intercalaryMonth(p);return!!g&&g===d},leapYear:function(p){return this.intercalaryMonth(p)!==0},weekOfYear:function(p,d,g){var b=this._validateYear(p,r.local.invalidyear),m=h[b-h[0]],x=m>>9&4095,w=m>>5&15,y=m&31,T;T=u.newDate(x,w,y),T.add(4-(T.dayOfWeek()||7),"d");var M=this.toJD(p,d,g)-T.toJD();return 1+Math.floor(M/7)},monthsInYear:function(p){return this.leapYear(p)?13:12},daysInMonth:function(p,d){p.year&&(d=p.month(),p=p.year()),p=this._validateYear(p);var g=l[p-l[0]],b=g>>13,m=b?12:11;if(d>m)throw r.local.invalidMonth.replace(/\{0\}/,this.local.name);var x=g&1<<12-d?30:29;return x},weekDay:function(p,d,g){return(this.dayOfWeek(p,d,g)||7)<6},toJD:function(p,d,g){var b=this._validate(p,x,g,r.local.invalidDate);p=this._validateYear(b.year()),d=b.month(),g=b.day();var m=this.isIntercalaryMonth(p,d),x=this.toChineseMonth(p,d),w=s(p,x,g,m);return u.toJD(w.year,w.month,w.day)},fromJD:function(p){var d=u.fromJD(p),g=i(d.year(),d.month(),d.day()),b=this.toMonthIndex(g.year,g.month,g.isIntercalary);return this.newDate(g.year,b,g.day)},fromString:function(p){var d=p.match(t),g=this._validateYear(+d[1]),b=+d[2],m=!!d[3],x=this.toMonthIndex(g,b,m),w=+d[4];return this.newDate(g,x,w)},add:function(p,d,g){var b=p.year(),m=p.month(),x=this.isIntercalaryMonth(b,m),w=this.toChineseMonth(b,m),y=Object.getPrototypeOf(c.prototype).add.call(this,p,d,g);if(g==="y"){var T=y.year(),M=y.month(),P=this.isIntercalaryMonth(T,w),L=x&&P?this.toMonthIndex(T,w,!0):this.toMonthIndex(T,w,!1);L!==M&&y.month(L)}return y}});var t=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,f=/^\d?\d[iI]?/m,n=/^闰?十?[一二三四五六七八九]?月/m,o=/^闰?十?[一二三四五六七八九]?/m;r.calendars.chinese=c;var l=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],h=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function i(p,d,g,b){var m,x;if(typeof p=="object")m=p,x=d||{};else{var w=typeof p=="number"&&p>=1888&&p<=2111;if(!w)throw new Error("Solar year outside range 1888-2111");var y=typeof d=="number"&&d>=1&&d<=12;if(!y)throw new Error("Solar month outside range 1 - 12");var T=typeof g=="number"&&g>=1&&g<=31;if(!T)throw new Error("Solar day outside range 1 - 31");m={year:p,month:d,day:g},x=b||{}}var M=h[m.year-h[0]],P=m.year<<9|m.month<<5|m.day;x.year=P>=M?m.year:m.year-1,M=h[x.year-h[0]];var L=M>>9&4095,I=M>>5&15,E=M&31,k,C=new Date(L,I-1,E),D=new Date(m.year,m.month-1,m.day);k=Math.round((D-C)/(24*3600*1e3));var F=l[x.year-l[0]],N;for(N=0;N<13;N++){var G=F&1<<12-N?30:29;if(k<G)break;k-=G}var U=F>>13;return!U||N<U?(x.isIntercalary=!1,x.month=1+N):N===U?(x.isIntercalary=!0,x.month=N):(x.isIntercalary=!1,x.month=N),x.day=1+k,x}function s(p,d,g,b,m){var x,w;if(typeof p=="object")w=p,x=d||{};else{var y=typeof p=="number"&&p>=1888&&p<=2111;if(!y)throw new Error("Lunar year outside range 1888-2111");var T=typeof d=="number"&&d>=1&&d<=12;if(!T)throw new Error("Lunar month outside range 1 - 12");var M=typeof g=="number"&&g>=1&&g<=30;if(!M)throw new Error("Lunar day outside range 1 - 30");var P;typeof b=="object"?(P=!1,x=b):(P=!!b,x=m||{}),w={year:p,month:d,day:g,isIntercalary:P}}var L;L=w.day-1;var I=l[w.year-l[0]],E=I>>13,k;E&&(w.month>E||w.isIntercalary)?k=w.month:k=w.month-1;for(var C=0;C<k;C++){var D=I&1<<12-C?30:29;L+=D}var F=h[w.year-h[0]],N=F>>9&4095,G=F>>5&15,U=F&31,X=new Date(N,G-1,U+L);return x.year=X.getFullYear(),x.month=1+X.getMonth(),x.day=X.getDate(),x}},{"../main":621,"object-assign":499}],608:[function(e,v,S){var r=e("../main"),a=e("object-assign");function u(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){var t=this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),f=t.year()+(t.year()<0?1:0);return f%4===3||f%4===-1},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(c,t,f){var n=this.newDate(c,t,f);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(c,t){var f=this._validate(c,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===13&&this.leapYear(f.year())?1:0)},weekDay:function(c,t,f){return(this.dayOfWeek(c,t,f)||7)<6},toJD:function(c,t,f){var n=this._validate(c,t,f,r.local.invalidDate);return c=n.year(),c<0&&c++,n.day()+(n.month()-1)*30+(c-1)*365+Math.floor(c/4)+this.jdEpoch-1},fromJD:function(c){var t=Math.floor(c)+.5-this.jdEpoch,f=Math.floor((t-Math.floor((t+366)/1461))/365)+1;f<=0&&f--,t=Math.floor(c)+.5-this.newDate(f,1,1).toJD();var n=Math.floor(t/30)+1,o=t-(n-1)*30+1;return this.newDate(f,n,o)}}),r.calendars.coptic=u},{"../main":621,"object-assign":499}],609:[function(e,v,S){var r=e("../main"),a=e("object-assign");function u(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(t){return this._validate(t,this.minMonth,this.minDay,r.local.invalidYear),!1},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,r.local.invalidYear),13},daysInYear:function(t){return this._validate(t,this.minMonth,this.minDay,r.local.invalidYear),400},weekOfYear:function(t,f,n){var o=this.newDate(t,f,n);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/8)+1},daysInMonth:function(t,f){var n=this._validate(t,f,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(t,f,n){var o=this._validate(t,f,n,r.local.invalidDate);return(o.day()+1)%8},weekDay:function(t,f,n){var o=this.dayOfWeek(t,f,n);return o>=2&&o<=6},extraInfo:function(t,f,n){var o=this._validate(t,f,n,r.local.invalidDate);return{century:c[Math.floor((o.year()-1)/100)+1]||""}},toJD:function(t,f,n){var o=this._validate(t,f,n,r.local.invalidDate);return t=o.year()+(o.year()<0?1:0),f=o.month(),n=o.day(),n+(f>1?16:0)+(f>2?(f-2)*32:0)+(t-1)*400+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t+.5)-Math.floor(this.jdEpoch)-1;var f=Math.floor(t/400)+1;t-=(f-1)*400,t+=t>15?16:0;var n=Math.floor(t/32)+1,o=t-(n-1)*32+1;return this.newDate(f<=0?f-1:f,n,o)}});var c={20:"Fruitbat",21:"Anchovy"};r.calendars.discworld=u},{"../main":621,"object-assign":499}],610:[function(e,v,S){var r=e("../main"),a=e("object-assign");function u(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){var t=this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),f=t.year()+(t.year()<0?1:0);return f%4===3||f%4===-1},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(c,t,f){var n=this.newDate(c,t,f);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(c,t){var f=this._validate(c,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===13&&this.leapYear(f.year())?1:0)},weekDay:function(c,t,f){return(this.dayOfWeek(c,t,f)||7)<6},toJD:function(c,t,f){var n=this._validate(c,t,f,r.local.invalidDate);return c=n.year(),c<0&&c++,n.day()+(n.month()-1)*30+(c-1)*365+Math.floor(c/4)+this.jdEpoch-1},fromJD:function(c){var t=Math.floor(c)+.5-this.jdEpoch,f=Math.floor((t-Math.floor((t+366)/1461))/365)+1;f<=0&&f--,t=Math.floor(c)+.5-this.newDate(f,1,1).toJD();var n=Math.floor(t/30)+1,o=t-(n-1)*30+1;return this.newDate(f,n,o)}}),r.calendars.ethiopian=u},{"../main":621,"object-assign":499}],611:[function(e,v,S){var r=e("../main"),a=e("object-assign");function u(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var f=this._validate(t,this.minMonth,this.minDay,r.local.invalidYear);return this._leapYear(f.year())},_leapYear:function(t){return t=t<0?t+1:t,c(t*7+1,19)<7},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,r.local.invalidYear),this._leapYear(t.year?t.year():t)?13:12},weekOfYear:function(t,f,n){var o=this.newDate(t,f,n);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(t){var f=this._validate(t,this.minMonth,this.minDay,r.local.invalidYear);return t=f.year(),this.toJD(t===-1?1:t+1,7,1)-this.toJD(t,7,1)},daysInMonth:function(t,f){return t.year&&(f=t.month(),t=t.year()),this._validate(t,f,this.minDay,r.local.invalidMonth),f===12&&this.leapYear(t)||f===8&&c(this.daysInYear(t),10)===5?30:f===9&&c(this.daysInYear(t),10)===3?29:this.daysPerMonth[f-1]},weekDay:function(t,f,n){return this.dayOfWeek(t,f,n)!==6},extraInfo:function(t,f,n){var o=this._validate(t,f,n,r.local.invalidDate);return{yearType:(this.leapYear(o)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(o)%10-3]}},toJD:function(t,f,n){var o=this._validate(t,f,n,r.local.invalidDate);t=o.year(),f=o.month(),n=o.day();var l=t<=0?t+1:t,h=this.jdEpoch+this._delay1(l)+this._delay2(l)+n+1;if(f<7){for(var i=7;i<=this.monthsInYear(t);i++)h+=this.daysInMonth(t,i);for(var i=1;i<f;i++)h+=this.daysInMonth(t,i)}else for(var i=7;i<f;i++)h+=this.daysInMonth(t,i);return h},_delay1:function(t){var f=Math.floor((235*t-234)/19),n=12084+13753*f,o=f*29+Math.floor(n/25920);return c(3*(o+1),7)<3&&o++,o},_delay2:function(t){var f=this._delay1(t-1),n=this._delay1(t),o=this._delay1(t+1);return o-n===356?2:n-f===382?1:0},fromJD:function(t){t=Math.floor(t)+.5;for(var f=Math.floor((t-this.jdEpoch)*98496/35975351)-1;t>=this.toJD(f===-1?1:f+1,7,1);)f++;for(var n=t<this.toJD(f,1,1)?7:1;t>this.toJD(f,n,this.daysInMonth(f,n));)n++;var o=t-this.toJD(f,n,1)+1;return this.newDate(f,n,o)}});function c(t,f){return t-f*Math.floor(t/f)}r.calendars.hebrew=u},{"../main":621,"object-assign":499}],612:[function(e,v,S){var r=e("../main"),a=e("object-assign");function u(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(c){var t=this._validate(c,this.minMonth,this.minDay,r.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(c,t,f){var n=this.newDate(c,t,f);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(c){return this.leapYear(c)?355:354},daysInMonth:function(c,t){var f=this._validate(c,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===12&&this.leapYear(f.year())?1:0)},weekDay:function(c,t,f){return this.dayOfWeek(c,t,f)!==5},toJD:function(c,t,f){var n=this._validate(c,t,f,r.local.invalidDate);return c=n.year(),t=n.month(),f=n.day(),c=c<=0?c+1:c,f+Math.ceil(29.5*(t-1))+(c-1)*354+Math.floor((3+11*c)/30)+this.jdEpoch-1},fromJD:function(c){c=Math.floor(c)+.5;var t=Math.floor((30*(c-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var f=Math.min(12,Math.ceil((c-29-this.toJD(t,1,1))/29.5)+1),n=c-this.toJD(t,f,1)+1;return this.newDate(t,f,n)}}),r.calendars.islamic=u},{"../main":621,"object-assign":499}],613:[function(e,v,S){var r=e("../main"),a=e("object-assign");function u(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){var t=this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),f=t.year()<0?t.year()+1:t.year();return f%4===0},weekOfYear:function(c,t,f){var n=this.newDate(c,t,f);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(c,t){var f=this._validate(c,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===2&&this.leapYear(f.year())?1:0)},weekDay:function(c,t,f){return(this.dayOfWeek(c,t,f)||7)<6},toJD:function(c,t,f){var n=this._validate(c,t,f,r.local.invalidDate);return c=n.year(),t=n.month(),f=n.day(),c<0&&c++,t<=2&&(c--,t+=12),Math.floor(365.25*(c+4716))+Math.floor(30.6001*(t+1))+f-1524.5},fromJD:function(c){var t=Math.floor(c+.5),f=t+1524,n=Math.floor((f-122.1)/365.25),o=Math.floor(365.25*n),l=Math.floor((f-o)/30.6001),h=l-Math.floor(l<14?1:13),i=n-Math.floor(h>2?4716:4715),s=f-o-Math.floor(30.6001*l);return i<=0&&i--,this.newDate(i,h,s)}}),r.calendars.julian=u},{"../main":621,"object-assign":499}],614:[function(e,v,S){var r=e("../main"),a=e("object-assign");function u(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(f){return this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),!1},formatYear:function(f){var n=this._validate(f,this.minMonth,this.minDay,r.local.invalidYear);f=n.year();var o=Math.floor(f/400);f=f%400,f+=f<0?400:0;var l=Math.floor(f/20);return o+"."+l+"."+f%20},forYear:function(f){if(f=f.split("."),f.length<3)throw"Invalid Mayan year";for(var n=0,o=0;o<f.length;o++){var l=parseInt(f[o],10);if(Math.abs(l)>19||o>0&&l<0)throw"Invalid Mayan year";n=n*20+l}return n},monthsInYear:function(f){return this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),18},weekOfYear:function(f,n,o){return this._validate(f,n,o,r.local.invalidDate),0},daysInYear:function(f){return this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),360},daysInMonth:function(f,n){return this._validate(f,n,this.minDay,r.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(f,n,o){var l=this._validate(f,n,o,r.local.invalidDate);return l.day()},weekDay:function(f,n,o){return this._validate(f,n,o,r.local.invalidDate),!0},extraInfo:function(f,n,o){var l=this._validate(f,n,o,r.local.invalidDate),h=l.toJD(),i=this._toHaab(h),s=this._toTzolkin(h);return{haabMonthName:this.local.haabMonths[i[0]-1],haabMonth:i[0],haabDay:i[1],tzolkinDayName:this.local.tzolkinMonths[s[0]-1],tzolkinDay:s[0],tzolkinTrecena:s[1]}},_toHaab:function(f){f-=this.jdEpoch;var n=c(f+8+(18-1)*20,365);return[Math.floor(n/20)+1,c(n,20)]},_toTzolkin:function(f){return f-=this.jdEpoch,[t(f+20,20),t(f+4,13)]},toJD:function(f,n,o){var l=this._validate(f,n,o,r.local.invalidDate);return l.day()+l.month()*20+l.year()*360+this.jdEpoch},fromJD:function(f){f=Math.floor(f)+.5-this.jdEpoch;var n=Math.floor(f/360);f=f%360,f+=f<0?360:0;var o=Math.floor(f/20),l=f%20;return this.newDate(n,o,l)}});function c(f,n){return f-n*Math.floor(f/n)}function t(f,n){return c(f-1,n)+1}r.calendars.mayan=u},{"../main":621,"object-assign":499}],615:[function(e,v,S){var r=e("../main"),a=e("object-assign");function u(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar;var c=r.instance("gregorian");a(u.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var f=this._validate(t,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear);return c.leapYear(f.year()+(f.year()<1?1:0)+1469)},weekOfYear:function(t,f,n){var o=this.newDate(t,f,n);return o.add(1-(o.dayOfWeek()||7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(t,f){var n=this._validate(t,f,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===12&&this.leapYear(n.year())?1:0)},weekDay:function(t,f,n){return(this.dayOfWeek(t,f,n)||7)<6},toJD:function(l,f,n){var o=this._validate(l,f,n,r.local.invalidMonth),l=o.year();l<0&&l++;for(var h=o.day(),i=1;i<o.month();i++)h+=this.daysPerMonth[i-1];return h+c.toJD(l+1468,3,13)},fromJD:function(t){t=Math.floor(t+.5);for(var f=Math.floor((t-(this.jdEpoch-1))/366);t>=this.toJD(f+1,1,1);)f++;for(var n=t-Math.floor(this.toJD(f,1,1)+.5)+1,o=1;n>this.daysInMonth(f,o);)n-=this.daysInMonth(f,o),o++;return this.newDate(f,o,n)}}),r.calendars.nanakshahi=u},{"../main":621,"object-assign":499}],616:[function(e,v,S){var r=e("../main"),a=e("object-assign");function u(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(c){return this.daysInYear(c)!==this.daysPerYear},weekOfYear:function(c,t,f){var n=this.newDate(c,t,f);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(c){var t=this._validate(c,this.minMonth,this.minDay,r.local.invalidYear);if(c=t.year(),typeof this.NEPALI_CALENDAR_DATA[c]>"u")return this.daysPerYear;for(var f=0,n=this.minMonth;n<=12;n++)f+=this.NEPALI_CALENDAR_DATA[c][n];return f},daysInMonth:function(c,t){return c.year&&(t=c.month(),c=c.year()),this._validate(c,t,this.minDay,r.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[c]>"u"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[c][t]},weekDay:function(c,t,f){return this.dayOfWeek(c,t,f)!==6},toJD:function(c,t,f){var n=this._validate(c,t,f,r.local.invalidDate);c=n.year(),t=n.month(),f=n.day();var o=r.instance(),l=0,h=t,i=c;this._createMissingCalendarData(c);var s=c-(h>9||h===9&&f>=this.NEPALI_CALENDAR_DATA[i][0]?56:57);for(t!==9&&(l=f,h--);h!==9;)h<=0&&(h=12,i--),l+=this.NEPALI_CALENDAR_DATA[i][h],h--;return t===9?(l+=f-this.NEPALI_CALENDAR_DATA[i][0],l<0&&(l+=o.daysInYear(s))):l+=this.NEPALI_CALENDAR_DATA[i][9]-this.NEPALI_CALENDAR_DATA[i][0],o.newDate(s,1,1).add(l,"d").toJD()},fromJD:function(c){var t=r.instance(),f=t.fromJD(c),n=f.year(),o=f.dayOfYear(),l=n+56;this._createMissingCalendarData(l);for(var h=9,i=this.NEPALI_CALENDAR_DATA[l][0],s=this.NEPALI_CALENDAR_DATA[l][h]-i+1;o>s;)h++,h>12&&(h=1,l++),s+=this.NEPALI_CALENDAR_DATA[l][h];var p=this.NEPALI_CALENDAR_DATA[l][h]-(s-o);return this.newDate(l,h,p)},_createMissingCalendarData:function(c){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var f=c-1;f<c+2;f++)typeof this.NEPALI_CALENDAR_DATA[f]>"u"&&(this.NEPALI_CALENDAR_DATA[f]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),r.calendars.nepali=u},{"../main":621,"object-assign":499}],617:[function(e,v,S){var r=e("../main"),a=e("object-assign");function u(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(t){var f=this._validate(t,this.minMonth,this.minDay,r.local.invalidYear);return((f.year()-(f.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(t,f,n){var o=this.newDate(t,f,n);return o.add(-((o.dayOfWeek()+1)%7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(t,f){var n=this._validate(t,f,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===12&&this.leapYear(n.year())?1:0)},weekDay:function(t,f,n){return this.dayOfWeek(t,f,n)!==5},toJD:function(t,f,n){var o=this._validate(t,f,n,r.local.invalidDate);t=o.year(),f=o.month(),n=o.day();var l=t-(t>=0?474:473),h=474+c(l,2820);return n+(f<=7?(f-1)*31:(f-1)*30+6)+Math.floor((h*682-110)/2816)+(h-1)*365+Math.floor(l/2820)*1029983+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t)+.5;var f=t-this.toJD(475,1,1),n=Math.floor(f/1029983),o=c(f,1029983),l=2820;if(o!==1029982){var h=Math.floor(o/366),i=c(o,366);l=Math.floor((2134*h+2816*i+2815)/1028522)+h+1}var s=l+2820*n+474;s=s<=0?s-1:s;var p=t-this.toJD(s,1,1)+1,d=p<=186?Math.ceil(p/31):Math.ceil((p-6)/30),g=t-this.toJD(s,d,1)+1;return this.newDate(s,d,g)}});function c(t,f){return t-f*Math.floor(t/f)}r.calendars.persian=u,r.calendars.jalali=u},{"../main":621,"object-assign":499}],618:[function(e,v,S){var r=e("../main"),a=e("object-assign"),u=r.instance();function c(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}c.prototype=new r.baseCalendar,a(c.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(n){var f=this._validate(n,this.minMonth,this.minDay,r.local.invalidYear),n=this._t2gYear(f.year());return u.leapYear(n)},weekOfYear:function(l,f,n){var o=this._validate(l,this.minMonth,this.minDay,r.local.invalidYear),l=this._t2gYear(o.year());return u.weekOfYear(l,o.month(),o.day())},daysInMonth:function(t,f){var n=this._validate(t,f,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(t,f,n){return(this.dayOfWeek(t,f,n)||7)<6},toJD:function(l,f,n){var o=this._validate(l,f,n,r.local.invalidDate),l=this._t2gYear(o.year());return u.toJD(l,o.month(),o.day())},fromJD:function(t){var f=u.fromJD(t),n=this._g2tYear(f.year());return this.newDate(n,f.month(),f.day())},_t2gYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)},_g2tYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)}}),r.calendars.taiwan=c},{"../main":621,"object-assign":499}],619:[function(e,v,S){var r=e("../main"),a=e("object-assign"),u=r.instance();function c(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}c.prototype=new r.baseCalendar,a(c.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(n){var f=this._validate(n,this.minMonth,this.minDay,r.local.invalidYear),n=this._t2gYear(f.year());return u.leapYear(n)},weekOfYear:function(l,f,n){var o=this._validate(l,this.minMonth,this.minDay,r.local.invalidYear),l=this._t2gYear(o.year());return u.weekOfYear(l,o.month(),o.day())},daysInMonth:function(t,f){var n=this._validate(t,f,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(t,f,n){return(this.dayOfWeek(t,f,n)||7)<6},toJD:function(l,f,n){var o=this._validate(l,f,n,r.local.invalidDate),l=this._t2gYear(o.year());return u.toJD(l,o.month(),o.day())},fromJD:function(t){var f=u.fromJD(t),n=this._g2tYear(f.year());return this.newDate(n,f.month(),f.day())},_t2gYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)},_g2tYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)}}),r.calendars.thai=c},{"../main":621,"object-assign":499}],620:[function(e,v,S){var r=e("../main"),a=e("object-assign");function u(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(t){var f=this._validate(t,this.minMonth,this.minDay,r.local.invalidYear);return this.daysInYear(f.year())===355},weekOfYear:function(t,f,n){var o=this.newDate(t,f,n);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(t){for(var f=0,n=1;n<=12;n++)f+=this.daysInMonth(t,n);return f},daysInMonth:function(t,f){for(var n=this._validate(t,f,this.minDay,r.local.invalidMonth),o=n.toJD()-24e5+.5,l=0,h=0;h<c.length;h++){if(c[h]>o)return c[l]-c[l-1];l++}return 30},weekDay:function(t,f,n){return this.dayOfWeek(t,f,n)!==5},toJD:function(t,f,n){var o=this._validate(t,f,n,r.local.invalidDate),l=12*(o.year()-1)+o.month()-15292,h=o.day()+c[l-1]-1;return h+24e5-.5},fromJD:function(t){for(var f=t-24e5+.5,n=0,o=0;o<c.length&&!(c[o]>f);o++)n++;var l=n+15292,h=Math.floor((l-1)/12),i=h+1,s=l-12*h,p=f-c[n-1]+1;return this.newDate(i,s,p)},isValid:function(t,f,n){var o=r.baseCalendar.prototype.isValid.apply(this,arguments);return o&&(t=t.year!=null?t.year:t,o=t>=1276&&t<=1500),o},_validate:function(t,f,n,o){var l=r.baseCalendar.prototype._validate.apply(this,arguments);if(l.year<1276||l.year>1500)throw o.replace(/\{0\}/,this.local.name);return l}}),r.calendars.ummalqura=u;var c=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":621,"object-assign":499}],621:[function(e,v,S){var r=e("object-assign");function a(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}r(a.prototype,{instance:function(o,l){o=(o||"gregorian").toLowerCase(),l=l||"";var h=this._localCals[o+"-"+l];if(!h&&this.calendars[o]&&(h=new this.calendars[o](l),this._localCals[o+"-"+l]=h),!h)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,o);return h},newDate:function(o,l,h,i,s){return i=(o!=null&&o.year?o.calendar():typeof i=="string"?this.instance(i,s):i)||this.instance(),i.newDate(o,l,h)},substituteDigits:function(o){return function(l){return(l+"").replace(/[0-9]/g,function(h){return o[h]})}},substituteChineseDigits:function(o,l){return function(h){for(var i="",s=0;h>0;){var p=h%10;i=(p===0?"":o[p]+l[s])+i,s++,h=Math.floor(h/10)}return i.indexOf(o[1]+l[1])===0&&(i=i.substr(1)),i||o[0]}}});function u(o,l,h,i){if(this._calendar=o,this._year=l,this._month=h,this._day=i,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function c(o,l){return o=""+o,"000000".substring(0,l-o.length)+o}r(u.prototype,{newDate:function(o,l,h){return this._calendar.newDate(o==null?this:o,l,h)},year:function(o){return arguments.length===0?this._year:this.set(o,"y")},month:function(o){return arguments.length===0?this._month:this.set(o,"m")},day:function(o){return arguments.length===0?this._day:this.set(o,"d")},date:function(o,l,h){if(!this._calendar.isValid(o,l,h))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=o,this._month=l,this._day=h,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(o,l){return this._calendar.add(this,o,l)},set:function(o,l){return this._calendar.set(this,o,l)},compareTo:function(o){if(this._calendar.name!==o._calendar.name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,o._calendar.local.name);var l=this._year!==o._year?this._year-o._year:this._month!==o._month?this.monthOfYear()-o.monthOfYear():this._day-o._day;return l===0?0:l<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(o){return this._calendar.fromJD(o)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(o){return this._calendar.fromJSDate(o)},toString:function(){return(this.year()<0?"-":"")+c(Math.abs(this.year()),4)+"-"+c(this.month(),2)+"-"+c(this.day(),2)}});function t(){this.shortYearCutoff="+10"}r(t.prototype,{_validateLevel:0,newDate:function(o,l,h){return o==null?this.today():(o.year&&(this._validate(o,l,h,n.local.invalidDate||n.regionalOptions[""].invalidDate),h=o.day(),l=o.month(),o=o.year()),new u(this,o,l,h))},today:function(){return this.fromJSDate(new Date)},epoch:function(o){var l=this._validate(o,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return l.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(o){var l=this._validate(o,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return(l.year()<0?"-":"")+c(Math.abs(l.year()),4)},monthsInYear:function(o){return this._validate(o,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear),12},monthOfYear:function(o,l){var h=this._validate(o,l,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return(h.month()+this.monthsInYear(h)-this.firstMonth)%this.monthsInYear(h)+this.minMonth},fromMonthOfYear:function(o,l){var h=(l+this.firstMonth-2*this.minMonth)%this.monthsInYear(o)+this.minMonth;return this._validate(o,h,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth),h},daysInYear:function(o){var l=this._validate(o,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return this.leapYear(l)?366:365},dayOfYear:function(o,l,h){var i=this._validate(o,l,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);return i.toJD()-this.newDate(i.year(),this.fromMonthOfYear(i.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(o,l,h){var i=this._validate(o,l,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(i))+2)%this.daysInWeek()},extraInfo:function(o,l,h){return this._validate(o,l,h,n.local.invalidDate||n.regionalOptions[""].invalidDate),{}},add:function(o,l,h){return this._validate(o,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate),this._correctAdd(o,this._add(o,l,h),l,h)},_add:function(o,l,h){if(this._validateLevel++,h==="d"||h==="w"){var i=o.toJD()+l*(h==="w"?this.daysInWeek():1),s=o.calendar().fromJD(i);return this._validateLevel--,[s.year(),s.month(),s.day()]}try{var p=o.year()+(h==="y"?l:0),d=o.monthOfYear()+(h==="m"?l:0),s=o.day(),g=function(x){for(;d<x.minMonth;)p--,d+=x.monthsInYear(p);for(var w=x.monthsInYear(p);d>w-1+x.minMonth;)p++,d-=w,w=x.monthsInYear(p)};h==="y"?(o.month()!==this.fromMonthOfYear(p,d)&&(d=this.newDate(p,o.month(),this.minDay).monthOfYear()),d=Math.min(d,this.monthsInYear(p)),s=Math.min(s,this.daysInMonth(p,this.fromMonthOfYear(p,d)))):h==="m"&&(g(this),s=Math.min(s,this.daysInMonth(p,this.fromMonthOfYear(p,d))));var b=[p,this.fromMonthOfYear(p,d),s];return this._validateLevel--,b}catch(m){throw this._validateLevel--,m}},_correctAdd:function(o,l,h,i){if(!this.hasYearZero&&(i==="y"||i==="m")&&(l[0]===0||o.year()>0!=l[0]>0)){var s={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[i],p=h<0?-1:1;l=this._add(o,h*s[0]+p*s[1],s[2])}return o.date(l[0],l[1],l[2])},set:function(o,l,h){this._validate(o,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate);var i=h==="y"?l:o.year(),s=h==="m"?l:o.month(),p=h==="d"?l:o.day();return(h==="y"||h==="m")&&(p=Math.min(p,this.daysInMonth(i,s))),o.date(i,s,p)},isValid:function(o,l,h){this._validateLevel++;var i=this.hasYearZero||o!==0;if(i){var s=this.newDate(o,l,this.minDay);i=l>=this.minMonth&&l-this.minMonth<this.monthsInYear(s)&&h>=this.minDay&&h-this.minDay<this.daysInMonth(s)}return this._validateLevel--,i},toJSDate:function(o,l,h){var i=this._validate(o,l,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);return n.instance().fromJD(this.toJD(i)).toJSDate()},fromJSDate:function(o){return this.fromJD(n.instance().fromJSDate(o).toJD())},_validate:function(o,l,h,i){if(o.year){if(this._validateLevel===0&&this.name!==o.calendar().name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,o.calendar().local.name);return o}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(o,l,h))throw i.replace(/\{0\}/,this.local.name);var s=this.newDate(o,l,h);return this._validateLevel--,s}catch(p){throw this._validateLevel--,p}}});function f(o){this.local=this.regionalOptions[o]||this.regionalOptions[""]}f.prototype=new t,r(f.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var l=this._validate(h,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear),h=l.year()+(l.year()<0?1:0);return h%4===0&&(h%100!==0||h%400===0)},weekOfYear:function(o,l,h){var i=this.newDate(o,l,h);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(o,l){var h=this._validate(o,l,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===2&&this.leapYear(h.year())?1:0)},weekDay:function(o,l,h){return(this.dayOfWeek(o,l,h)||7)<6},toJD:function(o,l,h){var i=this._validate(o,l,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);o=i.year(),l=i.month(),h=i.day(),o<0&&o++,l<3&&(l+=12,o--);var s=Math.floor(o/100),p=2-s+Math.floor(s/4);return Math.floor(365.25*(o+4716))+Math.floor(30.6001*(l+1))+h+p-1524.5},fromJD:function(o){var l=Math.floor(o+.5),h=Math.floor((l-186721625e-2)/36524.25);h=l+1+h-Math.floor(h/4);var i=h+1524,s=Math.floor((i-122.1)/365.25),p=Math.floor(365.25*s),d=Math.floor((i-p)/30.6001),g=i-p-Math.floor(d*30.6001),b=d-(d>13.5?13:1),m=s-(b>2.5?4716:4715);return m<=0&&m--,this.newDate(m,b,g)},toJSDate:function(o,l,h){var i=this._validate(o,l,h,n.local.invalidDate||n.regionalOptions[""].invalidDate),s=new Date(i.year(),i.month()-1,i.day());return s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s.setHours(s.getHours()>12?s.getHours()+2:0),s},fromJSDate:function(o){return this.newDate(o.getFullYear(),o.getMonth()+1,o.getDate())}});var n=v.exports=new a;n.cdate=u,n.baseCalendar=t,n.calendars.gregorian=f},{"object-assign":499}],622:[function(e,v,S){var r=e("object-assign"),a=e("./main");r(a.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),a.local=a.regionalOptions[""],r(a.cdate.prototype,{formatDate:function(u,c){return typeof u!="string"&&(c=u,u=""),this._calendar.formatDate(u||"",this,c)}}),r(a.baseCalendar.prototype,{UNIX_EPOCH:a.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:a.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(u,c,t){if(typeof u!="string"&&(t=c,c=u,u=""),!c)return"";if(c.calendar()!==this)throw a.local.invalidFormat||a.regionalOptions[""].invalidFormat;u=u||this.local.dateFormat,t=t||{};var f=t.dayNamesShort||this.local.dayNamesShort,n=t.dayNames||this.local.dayNames,o=t.monthNumbers||this.local.monthNumbers,l=t.monthNamesShort||this.local.monthNamesShort,h=t.monthNames||this.local.monthNames;t.calculateWeek||this.local.calculateWeek;for(var i=function(M,P){for(var L=1;T+L<u.length&&u.charAt(T+L)===M;)L++;return T+=L-1,Math.floor(L/(P||1))>1},s=function(M,P,L,I){var E=""+P;if(i(M,I))for(;E.length<L;)E="0"+E;return E},p=function(M,P,L,I){return i(M)?I[P]:L[P]},d=this,g=function(M){return typeof o=="function"?o.call(d,M,i("m")):x(s("m",M.month(),2))},b=function(M,P){return P?typeof h=="function"?h.call(d,M):h[M.month()-d.minMonth]:typeof l=="function"?l.call(d,M):l[M.month()-d.minMonth]},m=this.local.digits,x=function(M){return t.localNumbers&&m?m(M):M},w="",y=!1,T=0;T<u.length;T++)if(y)u.charAt(T)==="'"&&!i("'")?y=!1:w+=u.charAt(T);else switch(u.charAt(T)){case"d":w+=x(s("d",c.day(),2));break;case"D":w+=p("D",c.dayOfWeek(),f,n);break;case"o":w+=s("o",c.dayOfYear(),3);break;case"w":w+=s("w",c.weekOfYear(),2);break;case"m":w+=g(c);break;case"M":w+=b(c,i("M"));break;case"y":w+=i("y",2)?c.year():(c.year()%100<10?"0":"")+c.year()%100;break;case"Y":i("Y",2),w+=c.formatYear();break;case"J":w+=c.toJD();break;case"@":w+=(c.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":w+=(c.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":i("'")?w+="'":y=!0;break;default:w+=u.charAt(T)}return w},parseDate:function(u,c,t){if(c==null)throw a.local.invalidArguments||a.regionalOptions[""].invalidArguments;if(c=typeof c=="object"?c.toString():c+"",c==="")return null;u=u||this.local.dateFormat,t=t||{};var f=t.shortYearCutoff||this.shortYearCutoff;f=typeof f!="string"?f:this.today().year()%100+parseInt(f,10);for(var n=t.dayNamesShort||this.local.dayNamesShort,o=t.dayNames||this.local.dayNames,l=t.parseMonth||this.local.parseMonth,h=t.monthNumbers||this.local.monthNumbers,i=t.monthNamesShort||this.local.monthNamesShort,s=t.monthNames||this.local.monthNames,p=-1,d=-1,g=-1,b=-1,m=-1,x=!1,w=!1,y=function(N,G){for(var U=1;C+U<u.length&&u.charAt(C+U)===N;)U++;return C+=U-1,Math.floor(U/(G||1))>1},T=function(N,G){var U=y(N,G),X=[2,3,U?4:2,U?4:2,10,11,20]["oyYJ@!".indexOf(N)+1],z=new RegExp("^-?\\d{1,"+X+"}"),B=c.substring(k).match(z);if(!B)throw(a.local.missingNumberAt||a.regionalOptions[""].missingNumberAt).replace(/\{0\}/,k);return k+=B[0].length,parseInt(B[0],10)},M=this,P=function(){if(typeof h=="function"){y("m");var N=h.call(M,c.substring(k));return k+=N.length,N}return T("m")},L=function(N,G,U,X){for(var z=y(N,X)?U:G,B=0;B<z.length;B++)if(c.substr(k,z[B].length).toLowerCase()===z[B].toLowerCase())return k+=z[B].length,B+M.minMonth;throw(a.local.unknownNameAt||a.regionalOptions[""].unknownNameAt).replace(/\{0\}/,k)},I=function(){if(typeof s=="function"){var N=y("M")?s.call(M,c.substring(k)):i.call(M,c.substring(k));return k+=N.length,N}return L("M",i,s)},E=function(){if(c.charAt(k)!==u.charAt(C))throw(a.local.unexpectedLiteralAt||a.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,k);k++},k=0,C=0;C<u.length;C++)if(w)u.charAt(C)==="'"&&!y("'")?w=!1:E();else switch(u.charAt(C)){case"d":b=T("d");break;case"D":L("D",n,o);break;case"o":m=T("o");break;case"w":T("w");break;case"m":g=P();break;case"M":g=I();break;case"y":var D=C;x=!y("y",2),C=D,d=T("y",2);break;case"Y":d=T("Y",2);break;case"J":p=T("J")+.5,c.charAt(k)==="."&&(k++,T("J"));break;case"@":p=T("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":p=T("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":k=c.length;break;case"'":y("'")?E():w=!0;break;default:E()}if(k<c.length)throw a.local.unexpectedText||a.regionalOptions[""].unexpectedText;if(d===-1?d=this.today().year():d<100&&x&&(d+=f===-1?1900:this.today().year()-this.today().year()%100-(d<=f?0:100)),typeof g=="string"&&(g=l.call(this,d,g)),m>-1){g=1,b=m;for(var F=this.daysInMonth(d,g);b>F;F=this.daysInMonth(d,g))g++,b-=F}return p>-1?this.fromJD(p):this.newDate(d,g,b)},determineDate:function(u,c,t,f,n){t&&typeof t!="object"&&(n=f,f=t,t=null),typeof f!="string"&&(n=f,f="");var o=this,l=function(h){try{return o.parseDate(f,h,n)}catch{}h=h.toLowerCase();for(var i=(h.match(/^c/)&&t?t.newDate():null)||o.today(),s=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,p=s.exec(h);p;)i.add(parseInt(p[1],10),p[2]||"d"),p=s.exec(h);return i};return c=c?c.newDate():null,u=u==null?c:typeof u=="string"?l(u):typeof u=="number"?isNaN(u)||u===1/0||u===-1/0?c:o.today().add(u,"d"):o.newDate(u),u}})},{"./main":621,"object-assign":499}],623:[function(e,v,S){v.exports=e("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_
        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_
        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {
          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))
        }
      }`,args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":151}],624:[function(e,v,S){v.exports=a;var r=e("./lib/zc-core");function a(u,c){var t=[];return c=+c||0,r(u.hi(u.shape[0]-1),t,c),t}},{"./lib/zc-core":623}],625:[function(e,v,S){v.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],626:[function(e,v,S){var r=e("./arrow_paths"),a=e("../../plots/font_attributes"),u=e("../../plots/cartesian/constants"),c=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),v.exports=c("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:a({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",u.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",u.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",u.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",u.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:a({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":746,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834,"../../plots/font_attributes":856,"./arrow_paths":625}],627:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("./draw").draw;v.exports=function(n){var o=n._fullLayout,l=r.filterVisible(o.annotations);if(l.length&&n._fullData.length)return r.syncOrAsync([u,c],n)};function c(f){var n=f._fullLayout;r.filterVisible(n.annotations).forEach(function(o){var l=a.getFromId(f,o.xref),h=a.getFromId(f,o.yref),i=a.getRefType(o.xref),s=a.getRefType(o.yref);o._extremes={},i==="range"&&t(o,l),s==="range"&&t(o,h)})}function t(f,n){var o=n._id,l=o.charAt(0),h=f[l],i=f["a"+l],s=f[l+"ref"],p=f["a"+l+"ref"],d=f["_"+l+"padplus"],g=f["_"+l+"padminus"],b={x:1,y:-1}[l]*f[l+"shift"],m=3*f.arrowsize*f.arrowwidth||0,x=m+b,w=m-b,y=3*f.startarrowsize*f.arrowwidth||0,T=y+b,M=y-b,P;if(p===s){var L=a.findExtremes(n,[n.r2c(h)],{ppadplus:x,ppadminus:w}),I=a.findExtremes(n,[n.r2c(i)],{ppadplus:Math.max(d,T),ppadminus:Math.max(g,M)});P={min:[L.min[0],I.min[0]],max:[L.max[0],I.max[0]]}}else T=i?T+i:T,M=i?M-i:M,P=a.findExtremes(n,[n.r2c(h)],{ppadplus:Math.max(d,x,T),ppadminus:Math.max(g,w,M)});f._extremes[o]=P}},{"../../lib":778,"../../plots/cartesian/axes":828,"./draw":632}],628:[function(e,v,S){var r=e("../../lib"),a=e("../../registry"),u=e("../../plot_api/plot_template").arrayEditor;v.exports={hasClickToShow:c,onClick:t};function c(o,l){var h=f(o,l);return h.on.length>0||h.explicitOff.length>0}function t(o,l){var h=f(o,l),i=h.on,s=h.off.concat(h.explicitOff),p={},d=o._fullLayout.annotations,g,b;if(!!(i.length||s.length)){for(g=0;g<i.length;g++)b=u(o.layout,"annotations",d[i[g]]),b.modifyItem("visible",!0),r.extendFlat(p,b.getUpdateObj());for(g=0;g<s.length;g++)b=u(o.layout,"annotations",d[s[g]]),b.modifyItem("visible",!1),r.extendFlat(p,b.getUpdateObj());return a.call("update",o,{},p)}}function f(o,l){var h=o._fullLayout.annotations,i=[],s=[],p=[],d=(l||[]).length,g,b,m,x,w,y,T,M;for(g=0;g<h.length;g++)if(m=h[g],x=m.clicktoshow,x){for(b=0;b<d;b++)if(w=l[b],y=w.xaxis,T=w.yaxis,y._id===m.xref&&T._id===m.yref&&y.d2r(w.x)===n(m._xclick,y)&&T.d2r(w.y)===n(m._yclick,T)){m.visible?x==="onout"?M=s:M=p:M=i,M.push(g);break}b===d&&m.visible&&x==="onout"&&s.push(g)}return{on:i,off:s,explicitOff:p}}function n(o,l){return l.type==="log"?l.l2r(o):l.d2r(o)}},{"../../lib":778,"../../plot_api/plot_template":817,"../../registry":911}],629:[function(e,v,S){var r=e("../../lib"),a=e("../color");v.exports=function(c,t,f,n){n("opacity");var o=n("bgcolor"),l=n("bordercolor"),h=a.opacity(l);n("borderpad");var i=n("borderwidth"),s=n("showarrow");n("text",s?" ":f._dfltTitle.annotation),n("textangle"),r.coerceFont(n,"font",f.font),n("width"),n("align");var p=n("height");if(p&&n("valign"),s){var d=n("arrowside"),g,b;d.indexOf("end")!==-1&&(g=n("arrowhead"),b=n("arrowsize")),d.indexOf("start")!==-1&&(n("startarrowhead",g),n("startarrowsize",b)),n("arrowcolor",h?t.bordercolor:a.defaultLine),n("arrowwidth",(h&&i||1)*2),n("standoff"),n("startstandoff")}var m=n("hovertext"),x=f.hoverlabel||{};if(m){var w=n("hoverlabel.bgcolor",x.bgcolor||(a.opacity(o)?a.rgb(o):a.defaultLine)),y=n("hoverlabel.bordercolor",x.bordercolor||a.contrast(w));r.coerceFont(n,"hoverlabel.font",{family:x.font.family,size:x.font.size,color:x.font.color||y})}n("captureevents",!!m)}},{"../../lib":778,"../color":643}],630:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib/to_log_range");v.exports=function(c,t,f,n){t=t||{};var o=f==="log"&&t.type==="linear",l=f==="linear"&&t.type==="log";if(!(o||l))return;var h=c._fullLayout.annotations,i=t._id.charAt(0),s,p;function d(b){var m=s[b],x=null;o?x=a(m,t.range):x=Math.pow(10,m),r(x)||(x=null),n(p+b,x)}for(var g=0;g<h.length;g++)s=h[g],p="annotations["+g+"].",s[i+"ref"]===t._id&&d(i),s["a"+i+"ref"]===t._id&&d("a"+i)}},{"../../lib/to_log_range":805,"fast-isnumeric":241}],631:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../../plots/array_container_defaults"),c=e("./common_defaults"),t=e("./attributes");v.exports=function(o,l){u(o,l,{name:"annotations",handleItemDefaults:f})};function f(n,o,l){function h(E,k){return r.coerce(n,o,t,E,k)}var i=h("visible"),s=h("clicktoshow");if(!!(i||s)){c(n,o,l,h);for(var p=o.showarrow,d=["x","y"],g=[-10,-30],b={_fullLayout:l},m=0;m<2;m++){var x=d[m],w=a.coerceRef(n,o,b,x,"","paper");if(w!=="paper"){var y=a.getFromId(b,w);y._annIndices.push(o._index)}if(a.coercePosition(o,b,h,w,x,.5),p){var T="a"+x,M=a.coerceRef(n,o,b,T,"pixel",["pixel","paper"]);M!=="pixel"&&M!==w&&(M=o[T]="pixel");var P=M==="pixel"?g[m]:.4;a.coercePosition(o,b,h,M,T,P)}h(x+"anchor"),h(x+"shift")}if(r.noneOrAll(n,o,["x","y"]),p&&r.noneOrAll(n,o,["ax","ay"]),s){var L=h("xclick"),I=h("yclick");o._xclick=L===void 0?o.x:a.cleanPosition(L,b,o.xref),o._yclick=I===void 0?o.y:a.cleanPosition(I,b,o.yref)}}}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":626,"./common_defaults":629}],632:[function(e,v,S){var r=e("d3"),a=e("../../registry"),u=e("../../plots/plots"),c=e("../../lib"),t=c.strTranslate,f=e("../../plots/cartesian/axes"),n=e("../color"),o=e("../drawing"),l=e("../fx"),h=e("../../lib/svg_text_utils"),i=e("../../lib/setcursor"),s=e("../dragelement"),p=e("../../plot_api/plot_template").arrayEditor,d=e("./draw_arrow_head");v.exports={draw:g,drawOne:b,drawRaw:x};function g(w){var y=w._fullLayout;y._infolayer.selectAll(".annotation").remove();for(var T=0;T<y.annotations.length;T++)y.annotations[T].visible&&b(w,T);return u.previousPromises(w)}function b(w,y){var T=w._fullLayout,M=T.annotations[y]||{},P=f.getFromId(w,M.xref),L=f.getFromId(w,M.yref);P&&P.setScale(),L&&L.setScale(),x(w,M,y,!1,P,L)}function m(w,y,T,M,P){var L=P[T],I=P[T+"ref"],E=T.indexOf("y")!==-1,k=f.getRefType(I)==="domain",C=E?M.h:M.w;return w?k?L+(E?-y:y)/w._length:w.p2r(w.r2p(L)+y):L+(E?-y:y)/C}function x(w,y,T,M,P,L){var I=w._fullLayout,E=w._fullLayout._size,k=w._context.edits,C,D;M?(C="annotation-"+M,D=M+".annotations"):(C="annotation",D="annotations");var F=p(w.layout,D,y),N=F.modifyBase,G=F.modifyItem,U=F.getUpdateObj;I._infolayer.selectAll("."+C+'[data-index="'+T+'"]').remove();var X="clip"+I._uid+"_ann"+T;if(!y._input||y.visible===!1){r.selectAll("#"+X).remove();return}var z={x:{},y:{}},B=+y.textangle||0,j=I._infolayer.append("g").classed(C,!0).attr("data-index",String(T)).style("opacity",y.opacity),V=j.append("g").classed("annotation-text-g",!0),K=k[y.showarrow?"annotationTail":"annotationPosition"],te=y.captureevents||k.annotationText||K;function $(ue){var me={index:T,annotation:y._input,fullAnnotation:y,event:ue};return M&&(me.subplotId=M),me}var ie=V.append("g").style("pointer-events",te?"all":null).call(i,"pointer").on("click",function(){w._dragging=!1,w.emit("plotly_clickannotation",$(r.event))});y.hovertext&&ie.on("mouseover",function(){var ue=y.hoverlabel,me=ue.font,be=this.getBoundingClientRect(),Me=w.getBoundingClientRect();l.loneHover({x0:be.left-Me.left,x1:be.right-Me.left,y:(be.top+be.bottom)/2-Me.top,text:y.hovertext,color:ue.bgcolor,borderColor:ue.bordercolor,fontFamily:me.family,fontSize:me.size,fontColor:me.color},{container:I._hoverlayer.node(),outerContainer:I._paper.node(),gd:w})}).on("mouseout",function(){l.loneUnhover(I._hoverlayer.node())});var se=y.borderwidth,Q=y.borderpad,H=se+Q,oe=ie.append("rect").attr("class","bg").style("stroke-width",se+"px").call(n.stroke,y.bordercolor).call(n.fill,y.bgcolor),re=y.width||y.height,ee=I._topclips.selectAll("#"+X).data(re?[0]:[]);ee.enter().append("clipPath").classed("annclip",!0).attr("id",X).append("rect"),ee.exit().remove();var ae=y.font,fe=I._meta?c.templateString(y.text,I._meta):y.text,de=ie.append("text").classed("annotation-text",!0).text(fe);function pe(ue){return ue.call(o.font,ae).attr({"text-anchor":{left:"start",right:"end"}[y.align]||"middle"}),h.convertToTspans(ue,w,W),ue}function W(){var ue=de.selectAll("a");if(ue.size()===1&&ue.text()===de.text()){var me=ie.insert("a",":first-child").attr({"xlink:xlink:href":ue.attr("xlink:href"),"xlink:xlink:show":ue.attr("xlink:show")}).style({cursor:"pointer"});me.node().appendChild(oe.node())}var be=ie.select(".annotation-text-math-group"),Me=!be.empty(),Pe=o.bBox((Me?be:de).node()),Ge=Pe.width,ze=Pe.height,Qe=y.width||Ge,tt=y.height||ze,Ce=Math.round(Qe+2*H),Ae=Math.round(tt+2*H);function Be(Fe,bt){return bt==="auto"&&(Fe<1/3?bt="left":Fe>2/3?bt="right":bt="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[bt]}for(var qe=!1,Tt=["x","y"],At=0;At<Tt.length;At++){var Ne=Tt[At],ct=y[Ne+"ref"]||Ne,Mt=y["a"+Ne+"ref"],Wt={x:P,y:L}[Ne],qt=(B+(Ne==="x"?0:-90))*Math.PI/180,zt=Ce*Math.cos(qt),$t=Ae*Math.sin(qt),rr=Math.abs(zt)+Math.abs($t),Lt=y[Ne+"anchor"],Ct=y[Ne+"shift"]*(Ne==="x"?1:-1),dt=z[Ne],lt,Te,Le,Ue,et,ke=f.getRefType(ct);if(Wt&&ke!=="domain"){var Ie=Wt.r2fraction(y[Ne]);(Ie<0||Ie>1)&&(Mt===ct?(Ie=Wt.r2fraction(y["a"+Ne]),(Ie<0||Ie>1)&&(qe=!0)):qe=!0),lt=Wt._offset+Wt.r2p(y[Ne]),Ue=.5}else{var He=ke==="domain";Ne==="x"?(Le=y[Ne],lt=He?Wt._offset+Wt._length*Le:lt=E.l+E.w*Le):(Le=1-y[Ne],lt=He?Wt._offset+Wt._length*Le:lt=E.t+E.h*Le),Ue=y.showarrow?.5:Le}if(y.showarrow){dt.head=lt;var Ye=y["a"+Ne];if(et=zt*Be(.5,y.xanchor)-$t*Be(.5,y.yanchor),Mt===ct){var ft=f.getRefType(Mt);ft==="domain"?(Ne==="y"&&(Ye=1-Ye),dt.tail=Wt._offset+Wt._length*Ye):ft==="paper"?Ne==="y"?(Ye=1-Ye,dt.tail=E.t+E.h*Ye):dt.tail=E.l+E.w*Ye:dt.tail=Wt._offset+Wt.r2p(Ye),Te=et}else dt.tail=lt+Ye,Te=et+Ye;dt.text=dt.tail+et;var it=I[Ne==="x"?"width":"height"];if(ct==="paper"&&(dt.head=c.constrain(dt.head,1,it-1)),Mt==="pixel"){var je=-Math.max(dt.tail-3,dt.text),ot=Math.min(dt.tail+3,dt.text)-it;je>0?(dt.tail+=je,dt.text+=je):ot>0&&(dt.tail-=ot,dt.text-=ot)}dt.tail+=Ct,dt.head+=Ct}else et=rr*Be(Ue,Lt),Te=et,dt.text=lt+et;dt.text+=Ct,et+=Ct,Te+=Ct,y["_"+Ne+"padplus"]=rr/2+Te,y["_"+Ne+"padminus"]=rr/2-Te,y["_"+Ne+"size"]=rr,y["_"+Ne+"shift"]=et}if(qe){ie.remove();return}var Je=0,st=0;if(y.align!=="left"&&(Je=(Qe-Ge)*(y.align==="center"?.5:1)),y.valign!=="top"&&(st=(tt-ze)*(y.valign==="middle"?.5:1)),Me)be.select("svg").attr({x:H+Je-1,y:H+st}).call(o.setClipUrl,re?X:null,w);else{var It=H+st-Pe.top,Nt=H+Je-Pe.left;de.call(h.positionText,Nt,It).call(o.setClipUrl,re?X:null,w)}ee.select("rect").call(o.setRect,H,H,Qe,tt),oe.call(o.setRect,se/2,se/2,Ce-se,Ae-se),ie.call(o.setTranslate,Math.round(z.x.text-Ce/2),Math.round(z.y.text-Ae/2)),V.attr({transform:"rotate("+B+","+z.x.text+","+z.y.text+")"});var nr=function(Fe,bt){j.selectAll(".annotation-arrow-g").remove();var kt=z.x.head,_t=z.y.head,Rt=z.x.tail+Fe,Dt=z.y.tail+bt,Ut=z.x.text+Fe,Bt=z.y.text+bt,tr=c.rotationXYMatrix(B,Ut,Bt),er=c.apply2DTransform(tr),Zt=c.apply2DTransform2(tr),_r=+oe.attr("width"),Gr=+oe.attr("height"),Or=Ut-.5*_r,Fr=Or+_r,Mn=Bt-.5*Gr,Wn=Mn+Gr,Tn=[[Or,Mn,Or,Wn],[Or,Wn,Fr,Wn],[Fr,Wn,Fr,Mn],[Fr,Mn,Or,Mn]].map(Zt);if(!Tn.reduce(function(vt,Gt){return vt^!!c.segmentsIntersect(kt,_t,kt+1e6,_t+1e6,Gt[0],Gt[1],Gt[2],Gt[3])},!1)){Tn.forEach(function(vt){var Gt=c.segmentsIntersect(Rt,Dt,kt,_t,vt[0],vt[1],vt[2],vt[3]);Gt&&(Rt=Gt.x,Dt=Gt.y)});var Nn=y.arrowwidth,jn=y.arrowcolor,Nr=y.arrowside,Pr=j.append("g").style({opacity:n.opacity(jn)}).classed("annotation-arrow-g",!0),Ln=Pr.append("path").attr("d","M"+Rt+","+Dt+"L"+kt+","+_t).style("stroke-width",Nn+"px").call(n.stroke,n.rgb(jn));if(d(Ln,Nr,y),k.annotationPosition&&Ln.node().parentNode&&!M){var pn=kt,xn=_t;if(y.standoff){var en=Math.sqrt(Math.pow(kt-Rt,2)+Math.pow(_t-Dt,2));pn+=y.standoff*(Rt-kt)/en,xn+=y.standoff*(Dt-_t)/en}var _n=Pr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Rt-pn)+","+(Dt-xn),transform:t(pn,xn)}).style("stroke-width",Nn+6+"px").call(n.stroke,"rgba(0,0,0,0)").call(n.fill,"rgba(0,0,0,0)"),kn,ln;s.init({element:_n.node(),gd:w,prepFn:function(){var vt=o.getTranslate(ie);kn=vt.x,ln=vt.y,P&&P.autorange&&N(P._name+".autorange",!0),L&&L.autorange&&N(L._name+".autorange",!0)},moveFn:function(vt,Gt){var fr=er(kn,ln),Cr=fr[0]+vt,Wr=fr[1]+Gt;ie.call(o.setTranslate,Cr,Wr),G("x",m(P,vt,"x",E,y)),G("y",m(L,Gt,"y",E,y)),y.axref===y.xref&&G("ax",m(P,vt,"ax",E,y)),y.ayref===y.yref&&G("ay",m(L,Gt,"ay",E,y)),Pr.attr("transform",t(vt,Gt)),V.attr({transform:"rotate("+B+","+Cr+","+Wr+")"})},doneFn:function(){a.call("_guiRelayout",w,U());var vt=document.querySelector(".js-notes-box-panel");vt&&vt.redraw(vt.selectedObj)}})}}};if(y.showarrow&&nr(0,0),K){var We;s.init({element:ie.node(),gd:w,prepFn:function(){We=V.attr("transform")},moveFn:function(Fe,bt){var kt="pointer";if(y.showarrow)y.axref===y.xref?G("ax",m(P,Fe,"ax",E,y)):G("ax",y.ax+Fe),y.ayref===y.yref?G("ay",m(L,bt,"ay",E.w,y)):G("ay",y.ay+bt),nr(Fe,bt);else{if(M)return;var _t,Rt;if(P)_t=m(P,Fe,"x",E,y);else{var Dt=y._xsize/E.w,Ut=y.x+(y._xshift-y.xshift)/E.w-Dt/2;_t=s.align(Ut+Fe/E.w,Dt,0,1,y.xanchor)}if(L)Rt=m(L,bt,"y",E,y);else{var Bt=y._ysize/E.h,tr=y.y-(y._yshift+y.yshift)/E.h-Bt/2;Rt=s.align(tr-bt/E.h,Bt,0,1,y.yanchor)}G("x",_t),G("y",Rt),(!P||!L)&&(kt=s.getCursor(P?.5:_t,L?.5:Rt,y.xanchor,y.yanchor))}V.attr({transform:t(Fe,bt)+We}),i(ie,kt)},clickFn:function(Fe,bt){y.captureevents&&w.emit("plotly_clickannotation",$(bt))},doneFn:function(){i(ie),a.call("_guiRelayout",w,U());var Fe=document.querySelector(".js-notes-box-panel");Fe&&Fe.redraw(Fe.selectedObj)}})}}k.annotationText?de.call(h.makeEditable,{delegate:ie,gd:w}).call(pe).on("edit",function(ue){y.text=ue,this.call(pe),G("text",ue),P&&P.autorange&&N(P._name+".autorange",!0),L&&L.autorange&&N(L._name+".autorange",!0),a.call("_guiRelayout",w,U())}):de.call(pe)}},{"../../lib":778,"../../lib/setcursor":799,"../../lib/svg_text_utils":803,"../../plot_api/plot_template":817,"../../plots/cartesian/axes":828,"../../plots/plots":891,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"../fx":683,"./draw_arrow_head":633,d3:169}],633:[function(e,v,S){var r=e("d3"),a=e("../color"),u=e("./arrow_paths"),c=e("../../lib"),t=c.strScale,f=c.strRotate,n=c.strTranslate;v.exports=function(l,h,i){var s=l.node(),p=u[i.arrowhead||0],d=u[i.startarrowhead||0],g=(i.arrowwidth||1)*(i.arrowsize||1),b=(i.arrowwidth||1)*(i.startarrowsize||1),m=h.indexOf("start")>=0,x=h.indexOf("end")>=0,w=p.backoff*g+i.standoff,y=d.backoff*b+i.startstandoff,T,M,P,L;if(s.nodeName==="line"){T={x:+l.attr("x1"),y:+l.attr("y1")},M={x:+l.attr("x2"),y:+l.attr("y2")};var I=T.x-M.x,E=T.y-M.y;if(P=Math.atan2(E,I),L=P+Math.PI,w&&y&&w+y>Math.sqrt(I*I+E*E)){V();return}if(w){if(w*w>I*I+E*E){V();return}var k=w*Math.cos(P),C=w*Math.sin(P);M.x+=k,M.y+=C,l.attr({x2:M.x,y2:M.y})}if(y){if(y*y>I*I+E*E){V();return}var D=y*Math.cos(P),F=y*Math.sin(P);T.x-=D,T.y-=F,l.attr({x1:T.x,y1:T.y})}}else if(s.nodeName==="path"){var N=s.getTotalLength(),G="";if(N<w+y){V();return}var U=s.getPointAtLength(0),X=s.getPointAtLength(.1);P=Math.atan2(U.y-X.y,U.x-X.x),T=s.getPointAtLength(Math.min(y,N)),G="0px,"+y+"px,";var z=s.getPointAtLength(N),B=s.getPointAtLength(N-.1);L=Math.atan2(z.y-B.y,z.x-B.x),M=s.getPointAtLength(Math.max(0,N-w));var j=G?y+w:w;G+=N-j+"px,"+N+"px",l.style("stroke-dasharray",G)}function V(){l.style("stroke-dasharray","0px,100px")}function K(te,$,ie,se){!te.path||(te.noRotate&&(ie=0),r.select(s.parentNode).append("path").attr({class:l.attr("class"),d:te.path,transform:n($.x,$.y)+f(ie*180/Math.PI)+t(se)}).style({fill:a.rgb(i.arrowcolor),"stroke-width":0}))}m&&K(d,T,P,b),x&&K(p,M,L,g)}},{"../../lib":778,"../color":643,"./arrow_paths":625,d3:169}],634:[function(e,v,S){var r=e("./draw"),a=e("./click");v.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:a.hasClickToShow,onClick:a.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":840,"./attributes":626,"./calc_autorange":627,"./click":628,"./convert_coords":630,"./defaults":631,"./draw":632}],635:[function(e,v,S){var r=e("../annotations/attributes"),a=e("../../plot_api/edit_types").overrideAll,u=e("../../plot_api/plot_template").templatedArray;v.exports=a(u("annotation",{visible:r.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../annotations/attributes":626}],636:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes");v.exports=function(t){for(var f=t.fullSceneLayout,n=f.annotations,o=0;o<n.length;o++)u(n[o],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function u(c,t){var f=t.fullSceneLayout,n=f.domain,o=t.fullLayout._size,l={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};c._xa={},r.extendFlat(c._xa,l),a.setConvert(c._xa),c._xa._offset=o.l+n.x[0]*o.w,c._xa.l2p=function(){return .5*(1+c._pdata[0]/c._pdata[3])*o.w*(n.x[1]-n.x[0])},c._ya={},r.extendFlat(c._ya,l),a.setConvert(c._ya),c._ya._offset=o.t+(1-n.y[1])*o.h,c._ya.l2p=function(){return .5*(1-c._pdata[1]/c._pdata[3])*o.h*(n.y[1]-n.y[0])}}},{"../../lib":778,"../../plots/cartesian/axes":828}],637:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../../plots/array_container_defaults"),c=e("../annotations/common_defaults"),t=e("./attributes");v.exports=function(o,l,h){u(o,l,{name:"annotations",handleItemDefaults:f,fullLayout:h.fullLayout})};function f(n,o,l,h){function i(d,g){return r.coerce(n,o,t,d,g)}function s(d){var g=d+"axis",b={_fullLayout:{}};return b._fullLayout[g]=l[g],a.coercePosition(o,b,i,d,d,.5)}var p=i("visible");!p||(c(n,o,h.fullLayout,i),s("x"),s("y"),s("z"),r.noneOrAll(n,o,["x","y","z"]),o.xref="x",o.yref="y",o.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),o.showarrow&&(o.axref="pixel",o.ayref="pixel",i("ax",-10),i("ay",-30),r.noneOrAll(n,o,["ax","ay"])))}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"../annotations/common_defaults":629,"./attributes":635}],638:[function(e,v,S){var r=e("../annotations/draw").drawRaw,a=e("../../plots/gl3d/project"),u=["x","y","z"];v.exports=function(t){for(var f=t.fullSceneLayout,n=t.dataScale,o=f.annotations,l=0;l<o.length;l++){for(var h=o[l],i=!1,s=0;s<3;s++){var p=u[s],d=h[p],g=f[p+"axis"],b=g.r2fraction(d);if(b<0||b>1){i=!0;break}}i?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+l+'"]').remove():(h._pdata=a(t.glplot.cameraParams,[f.xaxis.r2l(h.x)*n[0],f.yaxis.r2l(h.y)*n[1],f.zaxis.r2l(h.z)*n[2]]),r(t.graphDiv,h,l,t.id,h._xa,h._ya))}}},{"../../plots/gl3d/project":879,"../annotations/draw":632}],639:[function(e,v,S){var r=e("../../registry"),a=e("../../lib");v.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:u,convert:e("./convert"),draw:e("./draw")};function u(c,t){var f=r.subplotsRegistry.gl3d;if(!!f)for(var n=f.attrRegex,o=Object.keys(c),l=0;l<o.length;l++){var h=o[l];n.test(h)&&(c[h].annotations||[]).length&&(a.pushUnique(t._basePlotModules,f),a.pushUnique(t._subplots.gl3d,h))}}},{"../../lib":778,"../../registry":911,"./attributes":635,"./convert":636,"./defaults":637,"./draw":638}],640:[function(e,v,S){v.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":607,"world-calendars/dist/calendars/coptic":608,"world-calendars/dist/calendars/discworld":609,"world-calendars/dist/calendars/ethiopian":610,"world-calendars/dist/calendars/hebrew":611,"world-calendars/dist/calendars/islamic":612,"world-calendars/dist/calendars/julian":613,"world-calendars/dist/calendars/mayan":614,"world-calendars/dist/calendars/nanakshahi":615,"world-calendars/dist/calendars/nepali":616,"world-calendars/dist/calendars/persian":617,"world-calendars/dist/calendars/taiwan":618,"world-calendars/dist/calendars/thai":619,"world-calendars/dist/calendars/ummalqura":620,"world-calendars/dist/main":621,"world-calendars/dist/plus":622}],641:[function(e,v,S){var r=e("./calendars"),a=e("../../lib"),u=e("../../constants/numerical"),c=u.EPOCHJD,t=u.ONEDAY,f={valType:"enumerated",values:Object.keys(r.calendars),editType:"calc",dflt:"gregorian"},n=function(P,L,I,E){var k={};return k[I]=f,a.coerce(P,L,k,I,E)},o=function(P,L,I,E){for(var k=0;k<I.length;k++)n(P,L,I[k]+"calendar",E.calendar)},l={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},h={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},i={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},s="##",p={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:s,w:s,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function d(P,L,I){for(var E=Math.floor((L+.05)/t)+c,k=b(I).fromJD(E),C=0,D,F,N,G,U;(C=P.indexOf("%",C))!==-1;)D=P.charAt(C+1),D==="0"||D==="-"||D==="_"?(N=3,F=P.charAt(C+2),D==="_"&&(D="-")):(F=D,D="0",N=2),G=p[F],G?(G===s?U=s:U=k.formatDate(G[D]),P=P.substr(0,C)+U+P.substr(C+N),C+=U.length):C+=N;return P}var g={};function b(P){var L=g[P];return L||(L=g[P]=r.instance(P),L)}function m(P){return a.extendFlat({},f,{description:P})}function x(P){return"Sets the calendar system to use with `"+P+"` date data."}var w={xcalendar:m(x("x"))},y=a.extendFlat({},w,{ycalendar:m(x("y"))}),T=a.extendFlat({},y,{zcalendar:m(x("z"))}),M=m(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));v.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:y,bar:y,box:y,heatmap:y,contour:y,histogram:y,histogram2d:y,histogram2dcontour:y,scatter3d:T,surface:T,mesh3d:T,scattergl:y,ohlc:w,candlestick:w},layout:{calendar:m(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:M},yaxis:{calendar:M},scene:{xaxis:{calendar:M},yaxis:{calendar:M},zaxis:{calendar:M}},polar:{radialaxis:{calendar:M}}},transforms:{filter:{valuecalendar:m(["Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:m(["Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:f,handleDefaults:n,handleTraceDefaults:o,CANONICAL_SUNDAY:h,CANONICAL_TICK:l,DFLTRANGE:i,getCal:b,worldCalFmt:d}},{"../../constants/numerical":753,"../../lib":778,"./calendars":640}],642:[function(e,v,S){S.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],S.defaultLine="#444",S.lightLine="#eee",S.background="#fff",S.borderLine="#BEC8D9",S.lightFraction=100*(14-4)/(15-4)},{}],643:[function(e,v,S){var r=e("tinycolor2"),a=e("fast-isnumeric"),u=v.exports={},c=e("./attributes");u.defaults=c.defaults;var t=u.defaultLine=c.defaultLine;u.lightLine=c.lightLine;var f=u.background=c.background;u.tinyRGB=function(o){var l=o.toRgb();return"rgb("+Math.round(l.r)+", "+Math.round(l.g)+", "+Math.round(l.b)+")"},u.rgb=function(o){return u.tinyRGB(r(o))},u.opacity=function(o){return o?r(o).getAlpha():0},u.addOpacity=function(o,l){var h=r(o).toRgb();return"rgba("+Math.round(h.r)+", "+Math.round(h.g)+", "+Math.round(h.b)+", "+l+")"},u.combine=function(o,l){var h=r(o).toRgb();if(h.a===1)return r(o).toRgbString();var i=r(l||f).toRgb(),s=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},p={r:s.r*(1-h.a)+h.r*h.a,g:s.g*(1-h.a)+h.g*h.a,b:s.b*(1-h.a)+h.b*h.a};return r(p).toRgbString()},u.contrast=function(o,l,h){var i=r(o);i.getAlpha()!==1&&(i=r(u.combine(o,f)));var s=i.isDark()?l?i.lighten(l):f:h?i.darken(h):t;return s.toString()},u.stroke=function(o,l){var h=r(l);o.style({stroke:u.tinyRGB(h),"stroke-opacity":h.getAlpha()})},u.fill=function(o,l){var h=r(l);o.style({fill:u.tinyRGB(h),"fill-opacity":h.getAlpha()})},u.clean=function(o){if(!(!o||typeof o!="object")){var l=Object.keys(o),h,i,s,p;for(h=0;h<l.length;h++)if(s=l[h],p=o[s],s.substr(s.length-5)==="color")if(Array.isArray(p))for(i=0;i<p.length;i++)p[i]=n(p[i]);else o[s]=n(p);else if(s.substr(s.length-10)==="colorscale"&&Array.isArray(p))for(i=0;i<p.length;i++)Array.isArray(p[i])&&(p[i][1]=n(p[i][1]));else if(Array.isArray(p)){var d=p[0];if(!Array.isArray(d)&&d&&typeof d=="object")for(i=0;i<p.length;i++)u.clean(p[i])}else p&&typeof p=="object"&&u.clean(p)}};function n(o){if(a(o)||typeof o!="string")return o;var l=o.trim();if(l.substr(0,3)!=="rgb")return o;var h=l.match(/^rgba?\s*\(([^()]*)\)$/);if(!h)return o;var i=h[1].trim().split(/\s*[\s,]\s*/),s=l.charAt(3)==="a"&&i.length===4;if(!s&&i.length!==3)return o;for(var p=0;p<i.length;p++){if(!i[p].length||(i[p]=Number(i[p]),!(i[p]>=0)))return o;if(p===3)i[p]>1&&(i[p]=1);else if(i[p]>=1)return o}var d=Math.round(i[0]*255)+", "+Math.round(i[1]*255)+", "+Math.round(i[2]*255);return s?"rgba("+d+", "+i[3]+")":"rgb("+d+")"}},{"./attributes":642,"fast-isnumeric":241,tinycolor2:576}],644:[function(e,v,S){var r=e("../../plots/cartesian/layout_attributes"),a=e("../../plots/font_attributes"),u=e("../../lib/extend").extendFlat,c=e("../../plot_api/edit_types").overrideAll;v.exports=c({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:u({},r.ticks,{dflt:""}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:a({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,title:{text:{valType:"string"},font:a({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:a({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/cartesian/layout_attributes":842,"../../plots/font_attributes":856}],645:[function(e,v,S){v.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],646:[function(e,v,S){var r=e("../../lib"),a=e("../../plot_api/plot_template"),u=e("../../plots/cartesian/tick_value_defaults"),c=e("../../plots/cartesian/tick_mark_defaults"),t=e("../../plots/cartesian/tick_label_defaults"),f=e("./attributes");v.exports=function(o,l,h){var i=a.newContainer(l,"colorbar"),s=o.colorbar||{};function p(x,w){return r.coerce(s,i,f,x,w)}var d=p("thicknessmode");p("thickness",d==="fraction"?30/(h.width-h.margin.l-h.margin.r):30);var g=p("lenmode");p("len",g==="fraction"?1:h.height-h.margin.t-h.margin.b),p("x"),p("xanchor"),p("xpad"),p("y"),p("yanchor"),p("ypad"),r.noneOrAll(s,i,["x","y"]),p("outlinecolor"),p("outlinewidth"),p("bordercolor"),p("borderwidth"),p("bgcolor");var b=p("ticklabelposition");u(s,i,p,"linear");var m={outerTicks:!1,font:h.font};b.indexOf("inside")!==-1&&(m.bgColor="black"),t(s,i,p,"linear",m),c(s,i,p,"linear",m),p("title.text",h._dfltTitle.colorbar),r.coerceFont(p,"title.font",h.font),p("title.side")}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/cartesian/tick_label_defaults":849,"../../plots/cartesian/tick_mark_defaults":850,"../../plots/cartesian/tick_value_defaults":851,"./attributes":644}],647:[function(e,v,S){var r=e("d3"),a=e("tinycolor2"),u=e("../../plots/plots"),c=e("../../registry"),t=e("../../plots/cartesian/axes"),f=e("../dragelement"),n=e("../../lib"),o=n.strTranslate,l=e("../../lib/extend").extendFlat,h=e("../../lib/setcursor"),i=e("../drawing"),s=e("../color"),p=e("../titles"),d=e("../../lib/svg_text_utils"),g=e("../colorscale/helpers").flipScale,b=e("../../plots/cartesian/axis_defaults"),m=e("../../plots/cartesian/position_defaults"),x=e("../../plots/cartesian/layout_attributes"),w=e("../../constants/alignment"),y=w.LINE_SPACING,T=w.FROM_TL,M=w.FROM_BR,P=e("./constants").cn;function L(F){var N=F._fullLayout,G=N._infolayer.selectAll("g."+P.colorbar).data(I(F),function(U){return U._id});G.enter().append("g").attr("class",function(U){return U._id}).classed(P.colorbar,!0),G.each(function(U){var X=r.select(this);n.ensureSingle(X,"rect",P.cbbg),n.ensureSingle(X,"g",P.cbfills),n.ensureSingle(X,"g",P.cblines),n.ensureSingle(X,"g",P.cbaxis,function(B){B.classed(P.crisp,!0)}),n.ensureSingle(X,"g",P.cbtitleunshift,function(B){B.append("g").classed(P.cbtitle,!0)}),n.ensureSingle(X,"rect",P.cboutline);var z=E(X,U,F);z&&z.then&&(F._promises||[]).push(z),F._context.edits.colorbarPosition&&k(X,U,F)}),G.exit().each(function(U){u.autoMargin(F,U._id)}).remove(),G.order()}function I(F){var N=F._fullLayout,G=F.calcdata,U=[],X,z,B,j;function V(ae){return l(ae,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function K(){typeof j.calc=="function"?j.calc(F,B,X):(X._fillgradient=z.reversescale?g(z.colorscale):z.colorscale,X._zrange=[z[j.min],z[j.max]])}for(var te=0;te<G.length;te++){var $=G[te];B=$[0].trace;var ie=B._module.colorbar;if(B.visible===!0&&ie)for(var se=Array.isArray(ie),Q=se?ie:[ie],H=0;H<Q.length;H++){j=Q[H];var oe=j.container;z=oe?B[oe]:B,z&&z.showscale&&(X=V(z.colorbar),X._id="cb"+B.uid+(se&&oe?"-"+oe:""),X._traceIndex=B.index,X._propPrefix=(oe?oe+".":"")+"colorbar.",X._meta=B._meta,K(),U.push(X))}}for(var re in N._colorAxes)if(z=N[re],z.showscale){var ee=N._colorAxes[re];X=V(z.colorbar),X._id="cb"+re,X._propPrefix=re+".colorbar.",X._meta=N._meta,j={min:"cmin",max:"cmax"},ee[0]!=="heatmap"&&(B=ee[1],j.calc=B._module.colorbar.calc),K(),U.push(X)}return U}function E(F,N,G){var U=G._fullLayout,X=U._size,z=N._fillcolor,B=N._line,j=N.title,V=j.side,K=N._zrange||r.extent((typeof z=="function"?z:B.color).domain()),te=typeof B.color=="function"?B.color:function(){return B.color},$=typeof z=="function"?z:function(){return z},ie=N._levels,se=C(G,N,K),Q=se.fill,H=se.line,oe=Math.round(N.thickness*(N.thicknessmode==="fraction"?X.w:1)),re=oe/X.w,ee=Math.round(N.len*(N.lenmode==="fraction"?X.h:1)),ae=ee/X.h,fe=N.xpad/X.w,de=(N.borderwidth+N.outlinewidth)/2,pe=N.ypad/X.h,W=Math.round(N.x*X.w+N.xpad),ue=N.x-re*({middle:.5,right:1}[N.xanchor]||0),me=N.y+ae*(({top:-.5,bottom:.5}[N.yanchor]||0)-.5),be=Math.round(X.h*(1-me)),Me=be-ee;N._lenFrac=ae,N._thickFrac=re,N._xLeftFrac=ue,N._yBottomFrac=me;var Pe=N._axis=D(G,N,K);if(Pe.position=N.x+fe+re,["top","bottom"].indexOf(V)!==-1&&(Pe.title.side=V,Pe.titlex=N.x+fe,Pe.titley=me+(j.side==="top"?ae-pe:pe)),B.color&&N.tickmode==="auto"){Pe.tickmode="linear",Pe.tick0=ie.start;var Ge=ie.size,ze=n.constrain((be-Me)/50,4,15)+1,Qe=(K[1]-K[0])/((N.nticks||ze)*Ge);if(Qe>1){var tt=Math.pow(10,Math.floor(Math.log(Qe)/Math.LN10));Ge*=tt*n.roundUp(Qe/tt,[2,5,10]),(Math.abs(ie.start)/ie.size+1e-6)%1<2e-6&&(Pe.tick0=0)}Pe.dtick=Ge}Pe.domain=[me+pe,me+ae-pe],Pe.setScale(),F.attr("transform",o(Math.round(X.l),Math.round(X.t)));var Ce=F.select("."+P.cbtitleunshift).attr("transform",o(-Math.round(X.l),-Math.round(X.t))),Ae=F.select("."+P.cbaxis),Be,qe=0;function Tt(Wt,qt){var zt={propContainer:Pe,propName:N._propPrefix+"title",traceIndex:N._traceIndex,_meta:N._meta,placeholder:U._dfltTitle.colorbar,containerGroup:F.select("."+P.cbtitle)},$t=Wt.charAt(0)==="h"?Wt.substr(1):"h"+Wt;F.selectAll("."+$t+",."+$t+"-math-group").remove(),p.draw(G,Wt,l(zt,qt||{}))}function At(){if(["top","bottom"].indexOf(V)!==-1){var Wt=X.l+(N.x+fe)*X.w,qt=Pe.title.font.size,zt;V==="top"?zt=(1-(me+ae-pe))*X.h+X.t+3+qt*.75:zt=(1-(me+pe))*X.h+X.t-3-qt*.25,Tt(Pe._id+"title",{attributes:{x:Wt,y:zt,"text-anchor":"start"}})}}function Ne(){if(["top","bottom"].indexOf(V)===-1){var Wt=Pe.title.font.size,qt=Pe._offset+Pe._length/2,zt=X.l+(Pe.position||0)*X.w+(Pe.side==="right"?10+Wt*(Pe.showticklabels?1:.5):-10-Wt*(Pe.showticklabels?.5:0));Tt("h"+Pe._id+"title",{avoid:{selection:r.select(G).selectAll("g."+Pe._id+"tick"),side:V,offsetLeft:X.l,offsetTop:0,maxShift:U.width},attributes:{x:zt,y:qt,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}function ct(){if(["top","bottom"].indexOf(V)!==-1){var Wt=F.select("."+P.cbtitle),qt=Wt.select("text"),zt=[-N.outlinewidth/2,N.outlinewidth/2],$t=Wt.select(".h"+Pe._id+"title-math-group").node(),rr=15.6;if(qt.node()&&(rr=parseInt(qt.node().style.fontSize,10)*y),$t?(qe=i.bBox($t).height,qe>rr&&(zt[1]-=(qe-rr)/2)):qt.node()&&!qt.classed(P.jsPlaceholder)&&(qe=i.bBox(qt.node()).height),qe){if(qe+=5,V==="top")Pe.domain[1]-=qe/X.h,zt[1]*=-1;else{Pe.domain[0]+=qe/X.h;var Lt=d.lineCount(qt);zt[1]+=(1-Lt)*rr}Wt.attr("transform",o(zt[0],zt[1])),Pe.setScale()}}F.selectAll("."+P.cbfills+",."+P.cblines).attr("transform",o(0,Math.round(X.h*(1-Pe.domain[1])))),Ae.attr("transform",o(0,Math.round(-X.t)));var Ct=F.select("."+P.cbfills).selectAll("rect."+P.cbfill).attr("style","").data(Q);Ct.enter().append("rect").classed(P.cbfill,!0).style("stroke","none"),Ct.exit().remove();var dt=K.map(Pe.c2p).map(Math.round).sort(function(et,ke){return et-ke});Ct.each(function(et,ke){var Ie=[ke===0?K[0]:(Q[ke]+Q[ke-1])/2,ke===Q.length-1?K[1]:(Q[ke]+Q[ke+1])/2].map(Pe.c2p).map(Math.round);Ie[1]=n.constrain(Ie[1]+(Ie[1]>Ie[0])?1:-1,dt[0],dt[1]);var He=r.select(this).attr({x:W,width:Math.max(oe,2),y:r.min(Ie),height:Math.max(r.max(Ie)-r.min(Ie),2)});if(N._fillgradient)i.gradient(He,G,N._id,"vertical",N._fillgradient,"fill");else{var Ye=$(et).replace("e-","");He.attr("fill",a(Ye).toHexString())}});var lt=F.select("."+P.cblines).selectAll("path."+P.cbline).data(B.color&&B.width?H:[]);lt.enter().append("path").classed(P.cbline,!0),lt.exit().remove(),lt.each(function(et){r.select(this).attr("d","M"+W+","+(Math.round(Pe.c2p(et))+B.width/2%1)+"h"+oe).call(i.lineGroupStyle,B.width,te(et),B.dash)}),Ae.selectAll("g."+Pe._id+"tick,path").remove();var Te=W+oe+(N.outlinewidth||0)/2-(N.ticks==="outside"?1:0),Le=t.calcTicks(Pe),Ue=t.getTickSigns(Pe)[2];return t.drawTicks(G,Pe,{vals:Pe.ticks==="inside"?t.clipEnds(Pe,Le):Le,layer:Ae,path:t.makeTickPath(Pe,Te,Ue),transFn:t.makeTransTickFn(Pe)}),t.drawLabels(G,Pe,{vals:Le,layer:Ae,transFn:t.makeTransTickLabelFn(Pe),labelFns:t.makeLabelFns(Pe,Te)})}function Mt(){var Wt=oe+N.outlinewidth/2;if(Pe.ticklabelposition.indexOf("inside")===-1&&(Wt+=i.bBox(Ae.node()).width),Be=Ce.select("text"),Be.node()&&!Be.classed(P.jsPlaceholder)){var qt=Ce.select(".h"+Pe._id+"title-math-group").node(),zt;qt&&["top","bottom"].indexOf(V)!==-1?zt=i.bBox(qt).width:zt=i.bBox(Ce.node()).right-W-X.l,Wt=Math.max(Wt,zt)}var $t=2*N.xpad+Wt+N.borderwidth+N.outlinewidth/2,rr=be-Me;F.select("."+P.cbbg).attr({x:W-N.xpad-(N.borderwidth+N.outlinewidth)/2,y:Me-de,width:Math.max($t,2),height:Math.max(rr+2*de,2)}).call(s.fill,N.bgcolor).call(s.stroke,N.bordercolor).style("stroke-width",N.borderwidth),F.selectAll("."+P.cboutline).attr({x:W,y:Me+N.ypad+(V==="top"?qe:0),width:Math.max(oe,2),height:Math.max(rr-2*N.ypad-qe,2)}).call(s.stroke,N.outlinecolor).style({fill:"none","stroke-width":N.outlinewidth});var Lt=({center:.5,right:1}[N.xanchor]||0)*$t;F.attr("transform",o(X.l-Lt,X.t));var Ct={},dt=T[N.yanchor],lt=M[N.yanchor];N.lenmode==="pixels"?(Ct.y=N.y,Ct.t=rr*dt,Ct.b=rr*lt):(Ct.t=Ct.b=0,Ct.yt=N.y+N.len*dt,Ct.yb=N.y-N.len*lt);var Te=T[N.xanchor],Le=M[N.xanchor];if(N.thicknessmode==="pixels")Ct.x=N.x,Ct.l=$t*Te,Ct.r=$t*Le;else{var Ue=$t-oe;Ct.l=Ue*Te,Ct.r=Ue*Le,Ct.xl=N.x-N.thickness*Te,Ct.xr=N.x+N.thickness*Le}u.autoMargin(G,N._id,Ct)}return n.syncOrAsync([u.previousPromises,At,ct,Ne,u.previousPromises,Mt],G)}function k(F,N,G){var U=G._fullLayout,X=U._size,z,B,j;f.init({element:F.node(),gd:G,prepFn:function(){z=F.attr("transform"),h(F)},moveFn:function(V,K){F.attr("transform",z+o(V,K)),B=f.align(N._xLeftFrac+V/X.w,N._thickFrac,0,1,N.xanchor),j=f.align(N._yBottomFrac-K/X.h,N._lenFrac,0,1,N.yanchor);var te=f.getCursor(B,j,N.xanchor,N.yanchor);h(F,te)},doneFn:function(){if(h(F),B!==void 0&&j!==void 0){var V={};V[N._propPrefix+"x"]=B,V[N._propPrefix+"y"]=j,N._traceIndex!==void 0?c.call("_guiRestyle",G,V,N._traceIndex):c.call("_guiRelayout",G,V)}}})}function C(F,N,G){var U=N._levels,X=[],z=[],B,j,V=U.end+U.size/100,K=U.size,te=1.001*G[0]-.001*G[1],$=1.001*G[1]-.001*G[0];for(j=0;j<1e5&&(B=U.start+j*K,!(K>0?B>=V:B<=V));j++)B>te&&B<$&&X.push(B);if(N._fillgradient)z=[0];else if(typeof N._fillcolor=="function"){var ie=N._filllevels;if(ie)for(V=ie.end+ie.size/100,K=ie.size,j=0;j<1e5&&(B=ie.start+j*K,!(K>0?B>=V:B<=V));j++)B>G[0]&&B<G[1]&&z.push(B);else z=X.map(function(se){return se-U.size/2}),z.push(z[z.length-1]+U.size)}else N._fillcolor&&typeof N._fillcolor=="string"&&(z=[0]);return U.size<0&&(X.reverse(),z.reverse()),{line:X,fill:z}}function D(F,N,G){var U=F._fullLayout,X={type:"linear",range:G,tickmode:N.tickmode,nticks:N.nticks,tick0:N.tick0,dtick:N.dtick,tickvals:N.tickvals,ticktext:N.ticktext,ticks:N.ticks,ticklen:N.ticklen,tickwidth:N.tickwidth,tickcolor:N.tickcolor,showticklabels:N.showticklabels,ticklabelposition:N.ticklabelposition,tickfont:N.tickfont,tickangle:N.tickangle,tickformat:N.tickformat,exponentformat:N.exponentformat,minexponent:N.minexponent,separatethousands:N.separatethousands,showexponent:N.showexponent,showtickprefix:N.showtickprefix,tickprefix:N.tickprefix,showticksuffix:N.showticksuffix,ticksuffix:N.ticksuffix,title:N.title,showline:!0,anchor:"free",side:"right",position:1},z={type:"linear",_id:"y"+N._id},B={letter:"y",font:U.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:U.calendar};function j(V,K){return n.coerce(X,z,x,V,K)}return b(X,z,j,B,U),m(X,z,j,B),z}v.exports={draw:L}},{"../../constants/alignment":745,"../../lib":778,"../../lib/extend":768,"../../lib/setcursor":799,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_defaults":830,"../../plots/cartesian/layout_attributes":842,"../../plots/cartesian/position_defaults":845,"../../plots/plots":891,"../../registry":911,"../color":643,"../colorscale/helpers":654,"../dragelement":662,"../drawing":665,"../titles":738,"./constants":645,d3:169,tinycolor2:576}],648:[function(e,v,S){var r=e("../../lib");v.exports=function(u){return r.isPlainObject(u.colorbar)}},{"../../lib":778}],649:[function(e,v,S){v.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":644,"./defaults":646,"./draw":647,"./has_colorbar":648}],650:[function(e,v,S){var r=e("../colorbar/attributes"),a=e("../../lib/regex").counter,u=e("./scales.js").scales;v.exports=function(t,f){t=t||"",f=f||{};var n=f.cLetter||"c";"onlyIfNumerical"in f?f.onlyIfNumerical:Boolean(t);var o="noScale"in f?f.noScale:t==="marker.line",l="showScaleDflt"in f?f.showScaleDflt:n==="z",h=typeof f.colorscaleDflt=="string"?u[f.colorscaleDflt]:null,i=f.editTypeOverride||"",s;"colorAttr"in f?(s=f.colorAttr,f.colorAttr):s={z:"z",c:"color"}[n];var p=n+"auto",d=n+"min",g=n+"max",b=n+"mid",m={};m[d]=m[g]=void 0;var x={};x[p]=!1;var w={};return s==="color"&&(w.color={valType:"color",arrayOk:!0,editType:i||"style"},f.anim&&(w.color.anim=!0)),w[p]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:m},w[d]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:x},w[g]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:x},w[b]={valType:"number",dflt:null,editType:"calc",impliedEdits:m},w.colorscale={valType:"colorscale",editType:"calc",dflt:h,impliedEdits:{autocolorscale:!1}},w.autocolorscale={valType:"boolean",dflt:f.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},w.reversescale={valType:"boolean",dflt:!1,editType:"plot"},o||(w.showscale={valType:"boolean",dflt:l,editType:"calc"},w.colorbar=r),f.noColorAxis||(w.coloraxis={valType:"subplotid",regex:a("coloraxis"),dflt:null,editType:"calc"}),w}},{"../../lib/regex":795,"../colorbar/attributes":644,"./scales.js":658}],651:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("./helpers").extractOpts;v.exports=function(t,f,n){var o=t._fullLayout,l=n.vals,h=n.containerStr,i=h?a.nestedProperty(f,h).get():f,s=u(i),p=s.auto!==!1,d=s.min,g=s.max,b=s.mid,m=function(){return a.aggNums(Math.min,null,l)},x=function(){return a.aggNums(Math.max,null,l)};if(d===void 0?d=m():p&&(i._colorAx&&r(d)?d=Math.min(d,m()):d=m()),g===void 0?g=x():p&&(i._colorAx&&r(g)?g=Math.max(g,x()):g=x()),p&&b!==void 0&&(g-b>b-d?d=b-(g-b):g-b<b-d&&(g=b+(b-d))),d===g&&(d-=.5,g+=.5),s._sync("min",d),s._sync("max",g),s.autocolorscale){var w;d*g<0?w=o.colorscale.diverging:d>=0?w=o.colorscale.sequential:w=o.colorscale.sequentialminus,s._sync("colorscale",w)}}},{"../../lib":778,"./helpers":654,"fast-isnumeric":241}],652:[function(e,v,S){var r=e("../../lib"),a=e("./helpers").hasColorscale,u=e("./helpers").extractOpts;v.exports=function(t,f){function n(d,g){var b=d["_"+g];b!==void 0&&(d[g]=b)}function o(d,g){var b=g.container?r.nestedProperty(d,g.container).get():d;if(b)if(b.coloraxis)b._colorAx=f[b.coloraxis];else{var m=u(b),x=m.auto;(x||m.min===void 0)&&n(b,g.min),(x||m.max===void 0)&&n(b,g.max),m.autocolorscale&&n(b,"colorscale")}}for(var l=0;l<t.length;l++){var h=t[l],i=h._module.colorbar;if(i)if(Array.isArray(i))for(var s=0;s<i.length;s++)o(h,i[s]);else o(h,i);a(h,"marker.line")&&o(h,{container:"marker.line",min:"cmin",max:"cmax"})}for(var p in f._colorAxes)o(f[p],{min:"cmin",max:"cmax"})}},{"../../lib":778,"./helpers":654}],653:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../colorbar/has_colorbar"),c=e("../colorbar/defaults"),t=e("./scales").isValid,f=e("../../registry").traceIs;function n(o,l){var h=l.slice(0,l.length-1);return l?a.nestedProperty(o,h).get()||{}:o}v.exports=function o(l,h,i,s,p){var d=p.prefix,g=p.cLetter,b="_module"in h,m=n(l,d),x=n(h,d),w=n(h._template||{},d)||{},y=function(){return delete l.coloraxis,delete h.coloraxis,o(l,h,i,s,p)};if(b){var T=i._colorAxes||{},M=s(d+"coloraxis");if(M){var P=f(h,"contour")&&a.nestedProperty(h,"contours.coloring").get()||"heatmap",L=T[M];L?(L[2].push(y),L[0]!==P&&(L[0]=!1,a.warn(["Ignoring coloraxis:",M,"setting","as it is linked to incompatible colorscales."].join(" ")))):T[M]=[P,h,[y]];return}}var I=m[g+"min"],E=m[g+"max"],k=r(I)&&r(E)&&I<E,C=s(d+g+"auto",!k);C?s(d+g+"mid"):(s(d+g+"min"),s(d+g+"max"));var D=m.colorscale,F=w.colorscale,N;if(D!==void 0&&(N=!t(D)),F!==void 0&&(N=!t(F)),s(d+"autocolorscale",N),s(d+"colorscale"),s(d+"reversescale"),d!=="marker.line."){var G;d&&b&&(G=u(m));var U=s(d+"showscale",G);U&&(d&&w&&(x._template=w),c(m,x,i))}}},{"../../lib":778,"../../registry":911,"../colorbar/defaults":646,"../colorbar/has_colorbar":648,"./scales":658,"fast-isnumeric":241}],654:[function(e,v,S){var r=e("d3"),a=e("tinycolor2"),u=e("fast-isnumeric"),c=e("../../lib"),t=e("../color"),f=e("./scales").isValid;function n(b,m,x){var w=m?c.nestedProperty(b,m).get()||{}:b,y=w[x||"color"],T=!1;if(c.isArrayOrTypedArray(y)){for(var M=0;M<y.length;M++)if(u(y[M])){T=!0;break}}return c.isPlainObject(w)&&(T||w.showscale===!0||u(w.cmin)&&u(w.cmax)||f(w.colorscale)||c.isPlainObject(w.colorbar))}var o=["showscale","autocolorscale","colorscale","reversescale","colorbar"],l=["min","max","mid","auto"];function h(b){var m=b._colorAx,x=m||b,w={},y,T,M;for(T=0;T<o.length;T++)M=o[T],w[M]=x[M];if(m)for(y="c",T=0;T<l.length;T++)M=l[T],w[M]=x["c"+M];else{var P;for(T=0;T<l.length;T++){if(M=l[T],P="c"+M,P in x){w[M]=x[P];continue}P="z"+M,P in x&&(w[M]=x[P])}y=P.charAt(0)}return w._sync=function(L,I){var E=l.indexOf(L)!==-1?y+L:L;x[E]=x["_"+E]=I},w}function i(b){for(var m=h(b),x=m.min,w=m.max,y=m.reversescale?s(m.colorscale):m.colorscale,T=y.length,M=new Array(T),P=new Array(T),L=0;L<T;L++){var I=y[L];M[L]=x+I[0]*(w-x),P[L]=I[1]}return{domain:M,range:P}}function s(b){for(var m=b.length,x=new Array(m),w=m-1,y=0;w>=0;w--,y++){var T=b[w];x[y]=[1-T[0],T[1]]}return x}function p(b,m){m=m||{};for(var x=b.domain,w=b.range,y=w.length,T=new Array(y),M=0;M<y;M++){var P=a(w[M]).toRgb();T[M]=[P.r,P.g,P.b,P.a]}var L=r.scale.linear().domain(x).range(T).clamp(!0),I=m.noNumericCheck,E=m.returnArray,k;return I&&E?k=L:I?k=function(C){return g(L(C))}:E?k=function(C){return u(C)?L(C):a(C).isValid()?C:t.defaultLine}:k=function(C){return u(C)?g(L(C)):a(C).isValid()?C:t.defaultLine},k.domain=L.domain,k.range=function(){return w},k}function d(b,m){return p(i(b),m)}function g(b){var m={r:b[0],g:b[1],b:b[2],a:b[3]};return a(m).toRgbString()}v.exports={hasColorscale:n,extractOpts:h,extractScale:i,flipScale:s,makeColorScaleFunc:p,makeColorScaleFuncFromTrace:d}},{"../../lib":778,"../color":643,"./scales":658,d3:169,"fast-isnumeric":241,tinycolor2:576}],655:[function(e,v,S){var r=e("./scales"),a=e("./helpers");v.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:r.scales,defaultScale:r.defaultScale,getScale:r.get,isValidScale:r.isValid,hasColorscale:a.hasColorscale,extractOpts:a.extractOpts,extractScale:a.extractScale,flipScale:a.flipScale,makeColorScaleFunc:a.makeColorScaleFunc,makeColorScaleFuncFromTrace:a.makeColorScaleFuncFromTrace}},{"./attributes":650,"./calc":651,"./cross_trace_defaults":652,"./defaults":653,"./helpers":654,"./layout_attributes":656,"./layout_defaults":657,"./scales":658}],656:[function(e,v,S){var r=e("../../lib/extend").extendFlat,a=e("./attributes"),u=e("./scales").scales;v.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:u.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:u.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:u.RdBu,editType:"calc"}},coloraxis:r({_isSubplotObj:!0,editType:"calc"},a("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":768,"./attributes":650,"./scales":658}],657:[function(e,v,S){var r=e("../../lib"),a=e("../../plot_api/plot_template"),u=e("./layout_attributes"),c=e("./defaults");v.exports=function(f,n){function o(b,m){return r.coerce(f,n,u,b,m)}o("colorscale.sequential"),o("colorscale.sequentialminus"),o("colorscale.diverging");var l=n._colorAxes,h,i;function s(b,m){return r.coerce(h,i,u.coloraxis,b,m)}for(var p in l){var d=l[p];if(d[0])h=f[p]||{},i=a.newContainer(n,p,"coloraxis"),i._name=p,c(h,i,n,s,{prefix:"",cLetter:"c"});else{for(var g=0;g<d[2].length;g++)d[2][g]();delete n._colorAxes[p]}}}},{"../../lib":778,"../../plot_api/plot_template":817,"./defaults":653,"./layout_attributes":656}],658:[function(e,v,S){var r=e("tinycolor2"),a={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},u=a.RdBu;function c(n,o){if(o||(o=u),!n)return o;function l(){try{n=a[n]||JSON.parse(n)}catch{n=o}}return typeof n=="string"&&(l(),typeof n=="string"&&l()),t(n)?n:o}function t(n){var o=0;if(!Array.isArray(n)||n.length<2||!n[0]||!n[n.length-1]||+n[0][0]!=0||+n[n.length-1][0]!=1)return!1;for(var l=0;l<n.length;l++){var h=n[l];if(h.length!==2||+h[0]<o||!r(h[1]).isValid())return!1;o=+h[0]}return!0}function f(n){return a[n]!==void 0?!0:t(n)}v.exports={scales:a,defaultScale:u,get:c,isValid:f}},{tinycolor2:576}],659:[function(e,v,S){v.exports=function(a,u,c,t,f){var n=(a-c)/(t-c),o=n+u/(t-c),l=(n+o)/2;return f==="left"||f==="bottom"?n:f==="center"||f==="middle"?l:f==="right"||f==="top"?o:n<2/3-l?n:o>4/3-l?o:l}},{}],660:[function(e,v,S){var r=e("../../lib"),a=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];v.exports=function(c,t,f,n){return f==="left"?c=0:f==="center"?c=1:f==="right"?c=2:c=r.constrain(Math.floor(c*3),0,2),n==="bottom"?t=0:n==="middle"?t=1:n==="top"?t=2:t=r.constrain(Math.floor(t*3),0,2),a[t][c]}},{"../../lib":778}],661:[function(e,v,S){S.selectMode=function(r){return r==="lasso"||r==="select"},S.drawMode=function(r){return r==="drawclosedpath"||r==="drawopenpath"||r==="drawline"||r==="drawrect"||r==="drawcircle"},S.openMode=function(r){return r==="drawline"||r==="drawopenpath"},S.rectMode=function(r){return r==="select"||r==="drawline"||r==="drawrect"||r==="drawcircle"},S.freeMode=function(r){return r==="lasso"||r==="drawclosedpath"||r==="drawopenpath"},S.selectingOrDrawing=function(r){return S.freeMode(r)||S.rectMode(r)}},{}],662:[function(e,v,S){var r=e("mouse-event-offset"),a=e("has-hover"),u=e("has-passive-events"),c=e("../../lib").removeElement,t=e("../../plots/cartesian/constants"),f=v.exports={};f.align=e("./align"),f.getCursor=e("./cursor");var n=e("./unhover");f.unhover=n.wrapped,f.unhoverRaw=n.raw,f.init=function(i){var s=i.gd,p=1,d=s._context.doubleClickDelay,g=i.element,b,m,x,w,y,T,M,P;s._mouseDownTime||(s._mouseDownTime=0),g.style.pointerEvents="all",g.onmousedown=E,u?(g._ontouchstart&&g.removeEventListener("touchstart",g._ontouchstart),g._ontouchstart=E,g.addEventListener("touchstart",E,{passive:!1})):g.ontouchstart=E;function L(D,F,N){return Math.abs(D)<N&&(D=0),Math.abs(F)<N&&(F=0),[D,F]}var I=i.clampFn||L;function E(D){s._dragged=!1,s._dragging=!0;var F=l(D);b=F[0],m=F[1],M=D.target,T=D,P=D.buttons===2||D.ctrlKey,typeof D.clientX>"u"&&typeof D.clientY>"u"&&(D.clientX=b,D.clientY=m),x=new Date().getTime(),x-s._mouseDownTime<d?p+=1:(p=1,s._mouseDownTime=x),i.prepFn&&i.prepFn(D,b,m),a&&!P?(y=o(),y.style.cursor=window.getComputedStyle(g).cursor):a||(y=document,w=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(g).cursor),document.addEventListener("mouseup",C),document.addEventListener("touchend",C),i.dragmode!==!1&&(D.preventDefault(),document.addEventListener("mousemove",k),document.addEventListener("touchmove",k,{passive:!1}))}function k(D){D.preventDefault();var F=l(D),N=i.minDrag||t.MINDRAG,G=I(F[0]-b,F[1]-m,N),U=G[0],X=G[1];(U||X)&&(s._dragged=!0,f.unhover(s)),s._dragged&&i.moveFn&&!P&&(s._dragdata={element:g,dx:U,dy:X},i.moveFn(U,X))}function C(D){if(delete s._dragdata,i.dragmode!==!1&&(D.preventDefault(),document.removeEventListener("mousemove",k),document.removeEventListener("touchmove",k)),document.removeEventListener("mouseup",C),document.removeEventListener("touchend",C),a?c(y):w&&(y.documentElement.style.cursor=w,w=null),!s._dragging){s._dragged=!1;return}if(s._dragging=!1,new Date().getTime()-s._mouseDownTime>d&&(p=Math.max(p-1,1)),s._dragged)i.doneFn&&i.doneFn();else if(i.clickFn&&i.clickFn(p,T),!P){var F;try{F=new MouseEvent("click",D)}catch{var N=l(D);F=document.createEvent("MouseEvents"),F.initMouseEvent("click",D.bubbles,D.cancelable,D.view,D.detail,D.screenX,D.screenY,N[0],N[1],D.ctrlKey,D.altKey,D.shiftKey,D.metaKey,D.button,D.relatedTarget)}M.dispatchEvent(F)}s._dragging=!1,s._dragged=!1}};function o(){var h=document.createElement("div");h.className="dragcover";var i=h.style;return i.position="fixed",i.left=0,i.right=0,i.top=0,i.bottom=0,i.zIndex=999999999,i.background="none",document.body.appendChild(h),h}f.coverSlip=o;function l(h){return r(h.changedTouches?h.changedTouches[0]:h,document.body)}},{"../../lib":778,"../../plots/cartesian/constants":834,"./align":659,"./cursor":660,"./unhover":663,"has-hover":440,"has-passive-events":441,"mouse-event-offset":484}],663:[function(e,v,S){var r=e("../../lib/events"),a=e("../../lib/throttle"),u=e("../../lib/dom").getGraphDiv,c=e("../fx/constants"),t=v.exports={};t.wrapped=function(f,n,o){f=u(f),f._fullLayout&&a.clear(f._fullLayout._uid+c.HOVERID),t.raw(f,n,o)},t.raw=function(n,o){var l=n._fullLayout,h=n._hoverdata;o||(o={}),!(o.target&&r.triggerHandler(n,"plotly_beforehover",o)===!1)&&(l._hoverlayer.selectAll("g").remove(),l._hoverlayer.selectAll("line").remove(),l._hoverlayer.selectAll("circle").remove(),n._hoverdata=void 0,o.target&&h&&n.emit("plotly_unhover",{event:o,points:h}))}},{"../../lib/dom":766,"../../lib/events":767,"../../lib/throttle":804,"../fx/constants":677}],664:[function(e,v,S){S.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},{}],665:[function(e,v,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("tinycolor2"),c=e("../../registry"),t=e("../color"),f=e("../colorscale"),n=e("../../lib"),o=n.strTranslate,l=e("../../lib/svg_text_utils"),h=e("../../constants/xmlns_namespaces"),i=e("../../constants/alignment"),s=i.LINE_SPACING,p=e("../../constants/interactions").DESELECTDIM,d=e("../../traces/scatter/subtypes"),g=e("../../traces/scatter/make_bubble_size_func"),b=e("../../components/fx/helpers").appendArrayPointValue,m=v.exports={};m.font=function(K,te,$,ie){n.isPlainObject(te)&&(ie=te.color,$=te.size,te=te.family),te&&K.style("font-family",te),$+1&&K.style("font-size",$+"px"),ie&&K.call(t.fill,ie)},m.setPosition=function(K,te,$){K.attr("x",te).attr("y",$)},m.setSize=function(K,te,$){K.attr("width",te).attr("height",$)},m.setRect=function(K,te,$,ie,se){K.call(m.setPosition,te,$).call(m.setSize,ie,se)},m.translatePoint=function(K,te,$,ie){var se=$.c2p(K.x),Q=ie.c2p(K.y);if(a(se)&&a(Q)&&te.node())te.node().nodeName==="text"?te.attr("x",se).attr("y",Q):te.attr("transform",o(se,Q));else return!1;return!0},m.translatePoints=function(K,te,$){K.each(function(ie){var se=r.select(this);m.translatePoint(ie,se,te,$)})},m.hideOutsideRangePoint=function(K,te,$,ie,se,Q){te.attr("display",$.isPtWithinRange(K,se)&&ie.isPtWithinRange(K,Q)?null:"none")},m.hideOutsideRangePoints=function(K,te){if(!!te._hasClipOnAxisFalse){var $=te.xaxis,ie=te.yaxis;K.each(function(se){var Q=se[0].trace,H=Q.xcalendar,oe=Q.ycalendar,re=c.traceIs(Q,"bar-like")?".bartext":".point,.textpoint";K.selectAll(re).each(function(ee){m.hideOutsideRangePoint(ee,r.select(this),$,ie,H,oe)})})}},m.crispRound=function(K,te,$){return!te||!a(te)?$||0:K._context.staticPlot?te:te<1?1:Math.round(te)},m.singleLineStyle=function(K,te,$,ie,se){te.style("fill","none");var Q=(((K||[])[0]||{}).trace||{}).line||{},H=$||Q.width||0,oe=se||Q.dash||"";t.stroke(te,ie||Q.color),m.dashLine(te,oe,H)},m.lineGroupStyle=function(K,te,$,ie){K.style("fill","none").each(function(se){var Q=(((se||[])[0]||{}).trace||{}).line||{},H=te||Q.width||0,oe=ie||Q.dash||"";r.select(this).call(t.stroke,$||Q.color).call(m.dashLine,oe,H)})},m.dashLine=function(K,te,$){$=+$||0,te=m.dashStyle(te,$),K.style({"stroke-dasharray":te,"stroke-width":$+"px"})},m.dashStyle=function(K,te){te=+te||1;var $=Math.max(te,3);return K==="solid"?K="":K==="dot"?K=$+"px,"+$+"px":K==="dash"?K=3*$+"px,"+3*$+"px":K==="longdash"?K=5*$+"px,"+5*$+"px":K==="dashdot"?K=3*$+"px,"+$+"px,"+$+"px,"+$+"px":K==="longdashdot"&&(K=5*$+"px,"+2*$+"px,"+$+"px,"+2*$+"px"),K},m.singleFillStyle=function(K){var te=r.select(K.node()),$=te.data(),ie=((($[0]||[])[0]||{}).trace||{}).fillcolor;ie&&K.call(t.fill,ie)},m.fillGroupStyle=function(K){K.style("stroke-width",0).each(function(te){var $=r.select(this);te[0].trace&&$.call(t.fill,te[0].trace.fillcolor)})};var x=e("./symbol_defs");m.symbolNames=[],m.symbolFuncs=[],m.symbolNeedLines={},m.symbolNoDot={},m.symbolNoFill={},m.symbolList=[],Object.keys(x).forEach(function(K){var te=x[K],$=te.n;m.symbolList.push($,String($),K,$+100,String($+100),K+"-open"),m.symbolNames[$]=K,m.symbolFuncs[$]=te.f,te.needLine&&(m.symbolNeedLines[$]=!0),te.noDot?m.symbolNoDot[$]=!0:m.symbolList.push($+200,String($+200),K+"-dot",$+300,String($+300),K+"-open-dot"),te.noFill&&(m.symbolNoFill[$]=!0)});var w=m.symbolNames.length,y="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";m.symbolNumber=function(K){if(a(K))K=+K;else if(typeof K=="string"){var te=0;K.indexOf("-open")>0&&(te=100,K=K.replace("-open","")),K.indexOf("-dot")>0&&(te+=200,K=K.replace("-dot","")),K=m.symbolNames.indexOf(K),K>=0&&(K+=te)}return K%100>=w||K>=400?0:Math.floor(Math.max(K,0))};function T(K,te){var $=K%100;return m.symbolFuncs[$](te)+(K>=200?y:"")}var M={x1:1,x2:0,y1:0,y2:0},P={x1:0,x2:0,y1:1,y2:0},L=r.format("~.1f"),I={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:M},horizontalreversed:{node:"linearGradient",attrs:M,reversed:!0},vertical:{node:"linearGradient",attrs:P},verticalreversed:{node:"linearGradient",attrs:P,reversed:!0}};m.gradient=function(K,te,$,ie,se,Q){for(var H=se.length,oe=I[ie],re=new Array(H),ee=0;ee<H;ee++)oe.reversed?re[H-1-ee]=[L((1-se[ee][0])*100),se[ee][1]]:re[ee]=[L(se[ee][0]*100),se[ee][1]];var ae=te._fullLayout,fe="g"+ae._uid+"-"+$,de=ae._defs.select(".gradients").selectAll("#"+fe).data([ie+re.join(";")],n.identity);de.exit().remove(),de.enter().append(oe.node).each(function(){var ue=r.select(this);oe.attrs&&ue.attr(oe.attrs),ue.attr("id",fe);var me=ue.selectAll("stop").data(re);me.exit().remove(),me.enter().append("stop"),me.each(function(be){var Me=u(be[1]);r.select(this).attr({offset:be[0]+"%","stop-color":t.tinyRGB(Me),"stop-opacity":Me.getAlpha()})})}),K.style(Q,B(fe,te)).style(Q+"-opacity",null);var pe=function(ue){return"."+ue.attr("class").replace(/\s/g,".")},W=pe(r.select(K.node().parentNode))+">"+pe(K);ae._gradientUrlQueryParts[W]=1},m.initGradients=function(K){var te=K._fullLayout,$=n.ensureSingle(te._defs,"g","gradients");$.selectAll("linearGradient,radialGradient").remove(),te._gradientUrlQueryParts={}},m.pointStyle=function(K,te,$){if(!!K.size()){var ie=m.makePointStyleFns(te);K.each(function(se){m.singlePointStyle(se,r.select(this),te,ie,$)})}},m.singlePointStyle=function(K,te,$,ie,se){var Q=$.marker,H=Q.line;if(te.style("opacity",ie.selectedOpacityFn?ie.selectedOpacityFn(K):K.mo===void 0?Q.opacity:K.mo),ie.ms2mrc){var oe;K.ms==="various"||Q.size==="various"?oe=3:oe=ie.ms2mrc(K.ms),K.mrc=oe,ie.selectedSizeFn&&(oe=K.mrc=ie.selectedSizeFn(K));var re=m.symbolNumber(K.mx||Q.symbol)||0;K.om=re%200>=100,te.attr("d",T(re,oe))}var ee=!1,ae,fe,de;if(K.so)de=H.outlierwidth,fe=H.outliercolor,ae=Q.outliercolor;else{var pe=(H||{}).width;de=(K.mlw+1||pe+1||(K.trace?(K.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in K?fe=K.mlcc=ie.lineScale(K.mlc):n.isArrayOrTypedArray(H.color)?fe=t.defaultLine:fe=H.color,n.isArrayOrTypedArray(Q.color)&&(ae=t.defaultLine,ee=!0),"mc"in K?ae=K.mcc=ie.markerScale(K.mc):ae=Q.color||"rgba(0,0,0,0)",ie.selectedColorFn&&(ae=ie.selectedColorFn(K))}if(K.om)te.call(t.stroke,ae).style({"stroke-width":(de||1)+"px",fill:"none"});else{te.style("stroke-width",(K.isBlank?0:de)+"px");var W=Q.gradient,ue=K.mgt;if(ue?ee=!0:ue=W&&W.type,Array.isArray(ue)&&(ue=ue[0],I[ue]||(ue=0)),ue&&ue!=="none"){var me=K.mgc;me?ee=!0:me=W.color;var be=$.uid;ee&&(be+="-"+K.i),m.gradient(te,se,be,ue,[[0,me],[1,ae]],"fill")}else t.fill(te,ae);de&&t.stroke(te,fe)}},m.makePointStyleFns=function(K){var te={},$=K.marker;return te.markerScale=m.tryColorscale($,""),te.lineScale=m.tryColorscale($,"line"),c.traceIs(K,"symbols")&&(te.ms2mrc=d.isBubble(K)?g(K):function(){return($.size||6)/2}),K.selectedpoints&&n.extendFlat(te,m.makeSelectedPointStyleFns(K)),te},m.makeSelectedPointStyleFns=function(K){var te={},$=K.selected||{},ie=K.unselected||{},se=K.marker||{},Q=$.marker||{},H=ie.marker||{},oe=se.opacity,re=Q.opacity,ee=H.opacity,ae=re!==void 0,fe=ee!==void 0;(n.isArrayOrTypedArray(oe)||ae||fe)&&(te.selectedOpacityFn=function(Ge){var ze=Ge.mo===void 0?se.opacity:Ge.mo;return Ge.selected?ae?re:ze:fe?ee:p*ze});var de=se.color,pe=Q.color,W=H.color;(pe||W)&&(te.selectedColorFn=function(Ge){var ze=Ge.mcc||de;return Ge.selected?pe||ze:W||ze});var ue=se.size,me=Q.size,be=H.size,Me=me!==void 0,Pe=be!==void 0;return c.traceIs(K,"symbols")&&(Me||Pe)&&(te.selectedSizeFn=function(Ge){var ze=Ge.mrc||ue/2;return Ge.selected?Me?me/2:ze:Pe?be/2:ze}),te},m.makeSelectedTextStyleFns=function(K){var te={},$=K.selected||{},ie=K.unselected||{},se=K.textfont||{},Q=$.textfont||{},H=ie.textfont||{},oe=se.color,re=Q.color,ee=H.color;return te.selectedTextColorFn=function(ae){var fe=ae.tc||oe;return ae.selected?re||fe:ee||(re?fe:t.addOpacity(fe,p))},te},m.selectedPointStyle=function(K,te){if(!(!K.size()||!te.selectedpoints)){var $=m.makeSelectedPointStyleFns(te),ie=te.marker||{},se=[];$.selectedOpacityFn&&se.push(function(Q,H){Q.style("opacity",$.selectedOpacityFn(H))}),$.selectedColorFn&&se.push(function(Q,H){t.fill(Q,$.selectedColorFn(H))}),$.selectedSizeFn&&se.push(function(Q,H){var oe=H.mx||ie.symbol||0,re=$.selectedSizeFn(H);Q.attr("d",T(m.symbolNumber(oe),re)),H.mrc2=re}),se.length&&K.each(function(Q){for(var H=r.select(this),oe=0;oe<se.length;oe++)se[oe](H,Q)})}},m.tryColorscale=function(K,te){var $=te?n.nestedProperty(K,te).get():K;if($){var ie=$.color;if(($.colorscale||$._colorAx)&&n.isArrayOrTypedArray(ie))return f.makeColorScaleFuncFromTrace($)}return n.identity};var E={start:1,end:-1,middle:0,bottom:1,top:-1};function k(K,te,$,ie){var se=r.select(K.node().parentNode),Q=te.indexOf("top")!==-1?"top":te.indexOf("bottom")!==-1?"bottom":"middle",H=te.indexOf("left")!==-1?"end":te.indexOf("right")!==-1?"start":"middle",oe=ie?ie/.8+1:0,re=(l.lineCount(K)-1)*s+1,ee=E[H]*oe,ae=$*.75+E[Q]*oe+(E[Q]-1)*re*$/2;K.attr("text-anchor",H),se.attr("transform",o(ee,ae))}function C(K,te){var $=K.ts||te.textfont.size;return a($)&&$>0?$:0}m.textPointStyle=function(K,te,$){if(!!K.size()){var ie;if(te.selectedpoints){var se=m.makeSelectedTextStyleFns(te);ie=se.selectedTextColorFn}var Q=te.texttemplate,H=$._fullLayout;K.each(function(oe){var re=r.select(this),ee=Q?n.extractOption(oe,te,"txt","texttemplate"):n.extractOption(oe,te,"tx","text");if(!ee&&ee!==0){re.remove();return}if(Q){var ae=te._module.formatLabels?te._module.formatLabels(oe,te,H):{},fe={};b(fe,te,oe.i);var de=te._meta||{};ee=n.texttemplateString(ee,ae,H._d3locale,fe,oe,de)}var pe=oe.tp||te.textposition,W=C(oe,te),ue=ie?ie(oe):oe.tc||te.textfont.color;re.call(m.font,oe.tf||te.textfont.family,W,ue).text(ee).call(l.convertToTspans,$).call(k,pe,W,oe.mrc)})}},m.selectedTextStyle=function(K,te){if(!(!K.size()||!te.selectedpoints)){var $=m.makeSelectedTextStyleFns(te);K.each(function(ie){var se=r.select(this),Q=$.selectedTextColorFn(ie),H=ie.tp||te.textposition,oe=C(ie,te);t.fill(se,Q),k(se,H,oe,ie.mrc2||ie.mrc)})}};var D=.5;m.smoothopen=function(K,te){if(K.length<3)return"M"+K.join("L");var $="M"+K[0],ie=[],se;for(se=1;se<K.length-1;se++)ie.push(F(K[se-1],K[se],K[se+1],te));for($+="Q"+ie[0][0]+" "+K[1],se=2;se<K.length-1;se++)$+="C"+ie[se-2][1]+" "+ie[se-1][0]+" "+K[se];return $+="Q"+ie[K.length-3][1]+" "+K[K.length-1],$},m.smoothclosed=function(K,te){if(K.length<3)return"M"+K.join("L")+"Z";var $="M"+K[0],ie=K.length-1,se=[F(K[ie],K[0],K[1],te)],Q;for(Q=1;Q<ie;Q++)se.push(F(K[Q-1],K[Q],K[Q+1],te));for(se.push(F(K[ie-1],K[ie],K[0],te)),Q=1;Q<=ie;Q++)$+="C"+se[Q-1][1]+" "+se[Q][0]+" "+K[Q];return $+="C"+se[ie][1]+" "+se[0][0]+" "+K[0]+"Z",$};function F(K,te,$,ie){var se=K[0]-te[0],Q=K[1]-te[1],H=$[0]-te[0],oe=$[1]-te[1],re=Math.pow(se*se+Q*Q,D/2),ee=Math.pow(H*H+oe*oe,D/2),ae=(ee*ee*se-re*re*H)*ie,fe=(ee*ee*Q-re*re*oe)*ie,de=3*ee*(re+ee),pe=3*re*(re+ee);return[[r.round(te[0]+(de&&ae/de),2),r.round(te[1]+(de&&fe/de),2)],[r.round(te[0]-(pe&&ae/pe),2),r.round(te[1]-(pe&&fe/pe),2)]]}var N={hv:function(K,te){return"H"+r.round(te[0],2)+"V"+r.round(te[1],2)},vh:function(K,te){return"V"+r.round(te[1],2)+"H"+r.round(te[0],2)},hvh:function(K,te){return"H"+r.round((K[0]+te[0])/2,2)+"V"+r.round(te[1],2)+"H"+r.round(te[0],2)},vhv:function(K,te){return"V"+r.round((K[1]+te[1])/2,2)+"H"+r.round(te[0],2)+"V"+r.round(te[1],2)}},G=function(K,te){return"L"+r.round(te[0],2)+","+r.round(te[1],2)};m.steps=function(K){var te=N[K]||G;return function($){for(var ie="M"+r.round($[0][0],2)+","+r.round($[0][1],2),se=1;se<$.length;se++)ie+=te($[se-1],$[se]);return ie}},m.makeTester=function(){var K=n.ensureSingleById(r.select("body"),"svg","js-plotly-tester",function($){$.attr(h.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),te=n.ensureSingle(K,"path","js-reference-point",function($){$.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});m.tester=K,m.testref=te},m.savedBBoxes={};var U=0,X=1e4;m.bBox=function(K,te,$){$||($=z(K));var ie;if($){if(ie=m.savedBBoxes[$],ie)return n.extendFlat({},ie)}else if(K.childNodes.length===1){var se=K.childNodes[0];if($=z(se),$){var Q=+se.getAttribute("x")||0,H=+se.getAttribute("y")||0,oe=se.getAttribute("transform");if(!oe){var re=m.bBox(se,!1,$);return Q&&(re.left+=Q,re.right+=Q),H&&(re.top+=H,re.bottom+=H),re}if($+="~"+Q+"~"+H+"~"+oe,ie=m.savedBBoxes[$],ie)return n.extendFlat({},ie)}}var ee,ae;te?ee=K:(ae=m.tester.node(),ee=K.cloneNode(!0),ae.appendChild(ee)),r.select(ee).attr("transform",null).call(l.positionText,0,0);var fe=ee.getBoundingClientRect(),de=m.testref.node().getBoundingClientRect();te||ae.removeChild(ee);var pe={height:fe.height,width:fe.width,left:fe.left-de.left,top:fe.top-de.top,right:fe.right-de.left,bottom:fe.bottom-de.top};return U>=X&&(m.savedBBoxes={},U=0),$&&(m.savedBBoxes[$]=pe),U++,n.extendFlat({},pe)};function z(K){var te=K.getAttribute("data-unformatted");if(te!==null)return te+K.getAttribute("data-math")+K.getAttribute("text-anchor")+K.getAttribute("style")}m.setClipUrl=function(K,te,$){K.attr("clip-path",B(te,$))};function B(K,te){if(!K)return null;var $=te._context,ie=$._exportedPlot?"":$._baseUrl||"";return"url('"+ie+"#"+K+"')"}m.getTranslate=function(K){var te=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,$=K.attr?"attr":"getAttribute",ie=K[$]("transform")||"",se=ie.replace(te,function(Q,H,oe){return[H,oe].join(" ")}).split(" ");return{x:+se[0]||0,y:+se[1]||0}},m.setTranslate=function(K,te,$){var ie=/(\btranslate\(.*?\);?)/,se=K.attr?"attr":"getAttribute",Q=K.attr?"attr":"setAttribute",H=K[se]("transform")||"";return te=te||0,$=$||0,H=H.replace(ie,"").trim(),H+=o(te,$),H=H.trim(),K[Q]("transform",H),H},m.getScale=function(K){var te=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,$=K.attr?"attr":"getAttribute",ie=K[$]("transform")||"",se=ie.replace(te,function(Q,H,oe){return[H,oe].join(" ")}).split(" ");return{x:+se[0]||1,y:+se[1]||1}},m.setScale=function(K,te,$){var ie=/(\bscale\(.*?\);?)/,se=K.attr?"attr":"getAttribute",Q=K.attr?"attr":"setAttribute",H=K[se]("transform")||"";return te=te||1,$=$||1,H=H.replace(ie,"").trim(),H+="scale("+te+","+$+")",H=H.trim(),K[Q]("transform",H),H};var j=/\s*sc.*/;m.setPointGroupScale=function(K,te,$){if(te=te||1,$=$||1,!!K){var ie=te===1&&$===1?"":"scale("+te+","+$+")";K.each(function(){var se=(this.getAttribute("transform")||"").replace(j,"");se+=ie,se=se.trim(),this.setAttribute("transform",se)})}};var V=/translate\([^)]*\)\s*$/;m.setTextPointsScale=function(K,te,$){!K||K.each(function(){var ie,se=r.select(this),Q=se.select("text");if(!!Q.node()){var H=parseFloat(Q.attr("x")||0),oe=parseFloat(Q.attr("y")||0),re=(se.attr("transform")||"").match(V);te===1&&$===1?ie=[]:ie=[o(H,oe),"scale("+te+","+$+")",o(-H,-oe)],re&&ie.push(re),se.attr("transform",ie.join(""))}})}},{"../../components/fx/helpers":679,"../../constants/alignment":745,"../../constants/interactions":752,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../lib/svg_text_utils":803,"../../registry":911,"../../traces/scatter/make_bubble_size_func":1204,"../../traces/scatter/subtypes":1212,"../color":643,"../colorscale":655,"./symbol_defs":666,d3:169,"fast-isnumeric":241,tinycolor2:576}],666:[function(e,v,S){var r=e("d3");v.exports={circle:{n:0,f:function(a){var u=r.round(a,2);return"M"+u+",0A"+u+","+u+" 0 1,1 0,-"+u+"A"+u+","+u+" 0 0,1 "+u+",0Z"}},square:{n:1,f:function(a){var u=r.round(a,2);return"M"+u+","+u+"H-"+u+"V-"+u+"H"+u+"Z"}},diamond:{n:2,f:function(a){var u=r.round(a*1.3,2);return"M"+u+",0L0,"+u+"L-"+u+",0L0,-"+u+"Z"}},cross:{n:3,f:function(a){var u=r.round(a*.4,2),c=r.round(a*1.2,2);return"M"+c+","+u+"H"+u+"V"+c+"H-"+u+"V"+u+"H-"+c+"V-"+u+"H-"+u+"V-"+c+"H"+u+"V-"+u+"H"+c+"Z"}},x:{n:4,f:function(a){var u=r.round(a*.8/Math.sqrt(2),2),c="l"+u+","+u,t="l"+u+",-"+u,f="l-"+u+",-"+u,n="l-"+u+","+u;return"M0,"+u+c+t+f+t+f+n+f+n+c+n+c+"Z"}},"triangle-up":{n:5,f:function(a){var u=r.round(a*2/Math.sqrt(3),2),c=r.round(a/2,2),t=r.round(a,2);return"M-"+u+","+c+"H"+u+"L0,-"+t+"Z"}},"triangle-down":{n:6,f:function(a){var u=r.round(a*2/Math.sqrt(3),2),c=r.round(a/2,2),t=r.round(a,2);return"M-"+u+",-"+c+"H"+u+"L0,"+t+"Z"}},"triangle-left":{n:7,f:function(a){var u=r.round(a*2/Math.sqrt(3),2),c=r.round(a/2,2),t=r.round(a,2);return"M"+c+",-"+u+"V"+u+"L-"+t+",0Z"}},"triangle-right":{n:8,f:function(a){var u=r.round(a*2/Math.sqrt(3),2),c=r.round(a/2,2),t=r.round(a,2);return"M-"+c+",-"+u+"V"+u+"L"+t+",0Z"}},"triangle-ne":{n:9,f:function(a){var u=r.round(a*.6,2),c=r.round(a*1.2,2);return"M-"+c+",-"+u+"H"+u+"V"+c+"Z"}},"triangle-se":{n:10,f:function(a){var u=r.round(a*.6,2),c=r.round(a*1.2,2);return"M"+u+",-"+c+"V"+u+"H-"+c+"Z"}},"triangle-sw":{n:11,f:function(a){var u=r.round(a*.6,2),c=r.round(a*1.2,2);return"M"+c+","+u+"H-"+u+"V-"+c+"Z"}},"triangle-nw":{n:12,f:function(a){var u=r.round(a*.6,2),c=r.round(a*1.2,2);return"M-"+u+","+c+"V-"+u+"H"+c+"Z"}},pentagon:{n:13,f:function(a){var u=r.round(a*.951,2),c=r.round(a*.588,2),t=r.round(-a,2),f=r.round(a*-.309,2),n=r.round(a*.809,2);return"M"+u+","+f+"L"+c+","+n+"H-"+c+"L-"+u+","+f+"L0,"+t+"Z"}},hexagon:{n:14,f:function(a){var u=r.round(a,2),c=r.round(a/2,2),t=r.round(a*Math.sqrt(3)/2,2);return"M"+t+",-"+c+"V"+c+"L0,"+u+"L-"+t+","+c+"V-"+c+"L0,-"+u+"Z"}},hexagon2:{n:15,f:function(a){var u=r.round(a,2),c=r.round(a/2,2),t=r.round(a*Math.sqrt(3)/2,2);return"M-"+c+","+t+"H"+c+"L"+u+",0L"+c+",-"+t+"H-"+c+"L-"+u+",0Z"}},octagon:{n:16,f:function(a){var u=r.round(a*.924,2),c=r.round(a*.383,2);return"M-"+c+",-"+u+"H"+c+"L"+u+",-"+c+"V"+c+"L"+c+","+u+"H-"+c+"L-"+u+","+c+"V-"+c+"Z"}},star:{n:17,f:function(a){var u=a*1.4,c=r.round(u*.225,2),t=r.round(u*.951,2),f=r.round(u*.363,2),n=r.round(u*.588,2),o=r.round(-u,2),l=r.round(u*-.309,2),h=r.round(u*.118,2),i=r.round(u*.809,2),s=r.round(u*.382,2);return"M"+c+","+l+"H"+t+"L"+f+","+h+"L"+n+","+i+"L0,"+s+"L-"+n+","+i+"L-"+f+","+h+"L-"+t+","+l+"H-"+c+"L0,"+o+"Z"}},hexagram:{n:18,f:function(a){var u=r.round(a*.66,2),c=r.round(a*.38,2),t=r.round(a*.76,2);return"M-"+t+",0l-"+c+",-"+u+"h"+t+"l"+c+",-"+u+"l"+c+","+u+"h"+t+"l-"+c+","+u+"l"+c+","+u+"h-"+t+"l-"+c+","+u+"l-"+c+",-"+u+"h-"+t+"Z"}},"star-triangle-up":{n:19,f:function(a){var u=r.round(a*Math.sqrt(3)*.8,2),c=r.round(a*.8,2),t=r.round(a*1.6,2),f=r.round(a*4,2),n="A "+f+","+f+" 0 0 1 ";return"M-"+u+","+c+n+u+","+c+n+"0,-"+t+n+"-"+u+","+c+"Z"}},"star-triangle-down":{n:20,f:function(a){var u=r.round(a*Math.sqrt(3)*.8,2),c=r.round(a*.8,2),t=r.round(a*1.6,2),f=r.round(a*4,2),n="A "+f+","+f+" 0 0 1 ";return"M"+u+",-"+c+n+"-"+u+",-"+c+n+"0,"+t+n+u+",-"+c+"Z"}},"star-square":{n:21,f:function(a){var u=r.round(a*1.1,2),c=r.round(a*2,2),t="A "+c+","+c+" 0 0 1 ";return"M-"+u+",-"+u+t+"-"+u+","+u+t+u+","+u+t+u+",-"+u+t+"-"+u+",-"+u+"Z"}},"star-diamond":{n:22,f:function(a){var u=r.round(a*1.4,2),c=r.round(a*1.9,2),t="A "+c+","+c+" 0 0 1 ";return"M-"+u+",0"+t+"0,"+u+t+u+",0"+t+"0,-"+u+t+"-"+u+",0Z"}},"diamond-tall":{n:23,f:function(a){var u=r.round(a*.7,2),c=r.round(a*1.4,2);return"M0,"+c+"L"+u+",0L0,-"+c+"L-"+u+",0Z"}},"diamond-wide":{n:24,f:function(a){var u=r.round(a*1.4,2),c=r.round(a*.7,2);return"M0,"+c+"L"+u+",0L0,-"+c+"L-"+u+",0Z"}},hourglass:{n:25,f:function(a){var u=r.round(a,2);return"M"+u+","+u+"H-"+u+"L"+u+",-"+u+"H-"+u+"Z"},noDot:!0},bowtie:{n:26,f:function(a){var u=r.round(a,2);return"M"+u+","+u+"V-"+u+"L-"+u+","+u+"V-"+u+"Z"},noDot:!0},"circle-cross":{n:27,f:function(a){var u=r.round(a,2);return"M0,"+u+"V-"+u+"M"+u+",0H-"+u+"M"+u+",0A"+u+","+u+" 0 1,1 0,-"+u+"A"+u+","+u+" 0 0,1 "+u+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(a){var u=r.round(a,2),c=r.round(a/Math.sqrt(2),2);return"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c+"M"+u+",0A"+u+","+u+" 0 1,1 0,-"+u+"A"+u+","+u+" 0 0,1 "+u+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(a){var u=r.round(a,2);return"M0,"+u+"V-"+u+"M"+u+",0H-"+u+"M"+u+","+u+"H-"+u+"V-"+u+"H"+u+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(a){var u=r.round(a,2);return"M"+u+","+u+"L-"+u+",-"+u+"M"+u+",-"+u+"L-"+u+","+u+"M"+u+","+u+"H-"+u+"V-"+u+"H"+u+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(a){var u=r.round(a*1.3,2);return"M"+u+",0L0,"+u+"L-"+u+",0L0,-"+u+"ZM0,-"+u+"V"+u+"M-"+u+",0H"+u},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(a){var u=r.round(a*1.3,2),c=r.round(a*.65,2);return"M"+u+",0L0,"+u+"L-"+u+",0L0,-"+u+"ZM-"+c+",-"+c+"L"+c+","+c+"M-"+c+","+c+"L"+c+",-"+c},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(a){var u=r.round(a*1.4,2);return"M0,"+u+"V-"+u+"M"+u+",0H-"+u},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(a){var u=r.round(a,2);return"M"+u+","+u+"L-"+u+",-"+u+"M"+u+",-"+u+"L-"+u+","+u},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(a){var u=r.round(a*1.2,2),c=r.round(a*.85,2);return"M0,"+u+"V-"+u+"M"+u+",0H-"+u+"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(a){var u=r.round(a/2,2),c=r.round(a,2);return"M"+u+","+c+"V-"+c+"m-"+c+",0V"+c+"M"+c+","+u+"H-"+c+"m0,-"+c+"H"+c},needLine:!0,noFill:!0},"y-up":{n:37,f:function(a){var u=r.round(a*1.2,2),c=r.round(a*1.6,2),t=r.round(a*.8,2);return"M-"+u+","+t+"L0,0M"+u+","+t+"L0,0M0,-"+c+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(a){var u=r.round(a*1.2,2),c=r.round(a*1.6,2),t=r.round(a*.8,2);return"M-"+u+",-"+t+"L0,0M"+u+",-"+t+"L0,0M0,"+c+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(a){var u=r.round(a*1.2,2),c=r.round(a*1.6,2),t=r.round(a*.8,2);return"M"+t+","+u+"L0,0M"+t+",-"+u+"L0,0M-"+c+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(a){var u=r.round(a*1.2,2),c=r.round(a*1.6,2),t=r.round(a*.8,2);return"M-"+t+","+u+"L0,0M-"+t+",-"+u+"L0,0M"+c+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(a){var u=r.round(a*1.4,2);return"M"+u+",0H-"+u},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(a){var u=r.round(a*1.4,2);return"M0,"+u+"V-"+u},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(a){var u=r.round(a,2);return"M"+u+",-"+u+"L-"+u+","+u},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(a){var u=r.round(a,2);return"M"+u+","+u+"L-"+u+",-"+u},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(a){var u=r.round(a,2),c=r.round(a*2,2);return"M0,0L-"+u+","+c+"H"+u+"Z"},noDot:!0},"arrow-down":{n:46,f:function(a){var u=r.round(a,2),c=r.round(a*2,2);return"M0,0L-"+u+",-"+c+"H"+u+"Z"},noDot:!0},"arrow-left":{n:47,f:function(a){var u=r.round(a*2,2),c=r.round(a,2);return"M0,0L"+u+",-"+c+"V"+c+"Z"},noDot:!0},"arrow-right":{n:48,f:function(a){var u=r.round(a*2,2),c=r.round(a,2);return"M0,0L-"+u+",-"+c+"V"+c+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(a){var u=r.round(a,2),c=r.round(a*2,2);return"M-"+u+",0H"+u+"M0,0L-"+u+","+c+"H"+u+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(a){var u=r.round(a,2),c=r.round(a*2,2);return"M-"+u+",0H"+u+"M0,0L-"+u+",-"+c+"H"+u+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(a){var u=r.round(a*2,2),c=r.round(a,2);return"M0,-"+c+"V"+c+"M0,0L"+u+",-"+c+"V"+c+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(a){var u=r.round(a*2,2),c=r.round(a,2);return"M0,-"+c+"V"+c+"M0,0L-"+u+",-"+c+"V"+c+"Z"},needLine:!0,noDot:!0}}},{d3:169}],667:[function(e,v,S){v.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],668:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../registry"),u=e("../../plots/cartesian/axes"),c=e("../../lib"),t=e("./compute_error");v.exports=function(o){for(var l=o.calcdata,h=0;h<l.length;h++){var i=l[h],s=i[0].trace;if(s.visible===!0&&a.traceIs(s,"errorBarsOK")){var p=u.getFromId(o,s.xaxis),d=u.getFromId(o,s.yaxis);f(i,s,p,"x"),f(i,s,d,"y")}}};function f(n,o,l,h){var i=o["error_"+h]||{},s=i.visible&&["linear","log"].indexOf(l.type)!==-1,p=[];if(!!s){for(var d=t(i),g=0;g<n.length;g++){var b=n[g],m=b.i;if(m===void 0)m=g;else if(m===null)continue;var x=b[h];if(!!r(l.c2l(x))){var w=d(x,m);if(r(w[0])&&r(w[1])){var y=b[h+"s"]=x-w[0],T=b[h+"h"]=x+w[1];p.push(y,T)}}}var M=l._id,P=o._extremes[M],L=u.findExtremes(l,p,c.extendFlat({tozero:P.opts.tozero},{padded:!0}));P.min=P.min.concat(L.min),P.max=P.max.concat(L.max)}}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"./compute_error":669,"fast-isnumeric":241}],669:[function(e,v,S){v.exports=function(u){var c=u.type,t=u.symmetric;if(c==="data"){var f=u.array||[];if(t)return function(i,s){var p=+f[s];return[p,p]};var n=u.arrayminus||[];return function(i,s){var p=+f[s],d=+n[s];return!isNaN(p)||!isNaN(d)?[d||0,p||0]:[NaN,NaN]}}else{var o=r(c,u.value),l=r(c,u.valueminus);return t||u.valueminus===void 0?function(i){var s=o(i);return[s,s]}:function(i){return[l(i),o(i)]}}};function r(a,u){if(a==="percent")return function(c){return Math.abs(c*u/100)};if(a==="constant")return function(){return Math.abs(u)};if(a==="sqrt")return function(c){return Math.sqrt(Math.abs(c))}}},{}],670:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../registry"),u=e("../../lib"),c=e("../../plot_api/plot_template"),t=e("./attributes");v.exports=function(f,n,o,l){var h="error_"+l.axis,i=c.newContainer(n,h),s=f[h]||{};function p(y,T){return u.coerce(s,i,t,y,T)}var d=s.array!==void 0||s.value!==void 0||s.type==="sqrt",g=p("visible",d);if(g!==!1){var b=p("type","array"in s?"data":"percent"),m=!0;b!=="sqrt"&&(m=p("symmetric",!((b==="data"?"arrayminus":"valueminus")in s))),b==="data"?(p("array"),p("traceref"),m||(p("arrayminus"),p("tracerefminus"))):(b==="percent"||b==="constant")&&(p("value"),m||p("valueminus"));var x="copy_"+l.inherit+"style";if(l.inherit){var w=n["error_"+l.inherit];(w||{}).visible&&p(x,!(s.color||r(s.thickness)||r(s.width)))}(!l.inherit||!i[x])&&(p("color",o),p("thickness"),p("width",a.traceIs(n,"gl3d")?0:4))}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../registry":911,"./attributes":667,"fast-isnumeric":241}],671:[function(e,v,S){var r=e("../../lib"),a=e("../../plot_api/edit_types").overrideAll,u=e("./attributes"),c={error_x:r.extendFlat({},u),error_y:r.extendFlat({},u)};delete c.error_x.copy_zstyle,delete c.error_y.copy_zstyle,delete c.error_y.copy_ystyle;var t={error_x:r.extendFlat({},u),error_y:r.extendFlat({},u),error_z:r.extendFlat({},u)};delete t.error_x.copy_ystyle,delete t.error_y.copy_ystyle,delete t.error_z.copy_ystyle,delete t.error_z.copy_zstyle,v.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:c,bar:c,histogram:c,scatter3d:a(t,"calc","nested"),scattergl:a(c,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:f};function f(n,o,l){(o.error_y||{}).visible&&(l.yerr=n.yh-n.y,o.error_y.symmetric||(l.yerrneg=n.y-n.ys)),(o.error_x||{}).visible&&(l.xerr=n.xh-n.x,o.error_x.symmetric||(l.xerrneg=n.x-n.xs))}},{"../../lib":778,"../../plot_api/edit_types":810,"./attributes":667,"./calc":668,"./compute_error":669,"./defaults":670,"./plot":672,"./style":673}],672:[function(e,v,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("../drawing"),c=e("../../traces/scatter/subtypes");v.exports=function(n,o,l,h){var i,s=l.xaxis,p=l.yaxis,d=h&&h.duration>0;o.each(function(g){var b=g[0].trace,m=b.error_x||{},x=b.error_y||{},w;b.ids&&(w=function(P){return P.id});var y=c.hasMarkers(b)&&b.marker.maxdisplayed>0;!x.visible&&!m.visible&&(g=[]);var T=r.select(this).selectAll("g.errorbar").data(g,w);if(T.exit().remove(),!!g.length){m.visible||T.selectAll("path.xerror").remove(),x.visible||T.selectAll("path.yerror").remove(),T.style("opacity",1);var M=T.enter().append("g").classed("errorbar",!0);d&&M.style("opacity",0).transition().duration(h.duration).style("opacity",1),u.setClipUrl(T,l.layerClipId,n),T.each(function(P){var L=r.select(this),I=t(P,s,p);if(!(y&&!P.vis)){var E,k=L.select("path.yerror");if(x.visible&&a(I.x)&&a(I.yh)&&a(I.ys)){var C=x.width;E="M"+(I.x-C)+","+I.yh+"h"+2*C+"m-"+C+",0V"+I.ys,I.noYS||(E+="m-"+C+",0h"+2*C),i=!k.size(),i?k=L.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):d&&(k=k.transition().duration(h.duration).ease(h.easing)),k.attr("d",E)}else k.remove();var D=L.select("path.xerror");if(m.visible&&a(I.y)&&a(I.xh)&&a(I.xs)){var F=(m.copy_ystyle?x:m).width;E="M"+I.xh+","+(I.y-F)+"v"+2*F+"m0,-"+F+"H"+I.xs,I.noXS||(E+="m0,-"+F+"v"+2*F),i=!D.size(),i?D=L.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):d&&(D=D.transition().duration(h.duration).ease(h.easing)),D.attr("d",E)}else D.remove()}})}})};function t(f,n,o){var l={x:n.c2p(f.x),y:o.c2p(f.y)};return f.yh!==void 0&&(l.yh=o.c2p(f.yh),l.ys=o.c2p(f.ys),a(l.ys)||(l.noYS=!0,l.ys=o.c2p(f.ys,!0))),f.xh!==void 0&&(l.xh=n.c2p(f.xh),l.xs=n.c2p(f.xs),a(l.xs)||(l.noXS=!0,l.xs=n.c2p(f.xs,!0))),l}},{"../../traces/scatter/subtypes":1212,"../drawing":665,d3:169,"fast-isnumeric":241}],673:[function(e,v,S){var r=e("d3"),a=e("../color");v.exports=function(c){c.each(function(t){var f=t[0].trace,n=f.error_y||{},o=f.error_x||{},l=r.select(this);l.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(a.stroke,n.color),o.copy_ystyle&&(o=n),l.selectAll("path.xerror").style("stroke-width",o.thickness+"px").call(a.stroke,o.color)})}},{"../color":643,d3:169}],674:[function(e,v,S){var r=e("../../plots/font_attributes"),a=e("./layout_attributes").hoverlabel,u=e("../../lib/extend").extendFlat;v.exports={hoverlabel:{bgcolor:u({},a.bgcolor,{arrayOk:!0}),bordercolor:u({},a.bordercolor,{arrayOk:!0}),font:r({arrayOk:!0,editType:"none"}),align:u({},a.align,{arrayOk:!0}),namelength:u({},a.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":768,"../../plots/font_attributes":856,"./layout_attributes":684}],675:[function(e,v,S){var r=e("../../lib"),a=e("../../registry");v.exports=function(t){var f=t.calcdata,n=t._fullLayout;function o(p){return function(d){return r.coerceHoverinfo({hoverinfo:d},{_module:p._module},n)}}for(var l=0;l<f.length;l++){var h=f[l],i=h[0].trace;if(!a.traceIs(i,"pie-like")){var s=a.traceIs(i,"2dMap")?u:r.fillArray;s(i.hoverinfo,h,"hi",o(i)),i.hovertemplate&&s(i.hovertemplate,h,"ht"),i.hoverlabel&&(s(i.hoverlabel.bgcolor,h,"hbg"),s(i.hoverlabel.bordercolor,h,"hbc"),s(i.hoverlabel.font.size,h,"hts"),s(i.hoverlabel.font.color,h,"htc"),s(i.hoverlabel.font.family,h,"htf"),s(i.hoverlabel.namelength,h,"hnl"),s(i.hoverlabel.align,h,"hta"))}}};function u(c,t,f,n){n=n||r.identity,Array.isArray(c)&&(t[0][f]=n(c))}},{"../../lib":778,"../../registry":911}],676:[function(e,v,S){var r=e("../../registry"),a=e("./hover").hover;v.exports=function(c,t,f){var n=r.getComponentMethod("annotations","onClick")(c,c._hoverdata);f!==void 0&&a(c,t,f,!0);function o(){c.emit("plotly_click",{points:c._hoverdata,event:t})}c._hoverdata&&t&&t.target&&(n&&n.then?n.then(o):o(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":911,"./hover":680}],677:[function(e,v,S){v.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],678:[function(e,v,S){var r=e("../../lib"),a=e("./attributes"),u=e("./hoverlabel_defaults");v.exports=function(t,f,n,o){function l(i,s){return r.coerce(t,f,a,i,s)}var h=r.extendFlat({},o.hoverlabel);f.hovertemplate&&(h.namelength=-1),u(t,f,l,h)}},{"../../lib":778,"./attributes":674,"./hoverlabel_defaults":681}],679:[function(e,v,S){var r=e("../../lib");S.getSubplot=function(n){return n.subplot||n.xaxis+n.yaxis||n.geo},S.isTraceInSubplots=function(n,o){if(n.type==="splom"){for(var l=n.xaxes||[],h=n.yaxes||[],i=0;i<l.length;i++)for(var s=0;s<h.length;s++)if(o.indexOf(l[i]+h[s])!==-1)return!0;return!1}return o.indexOf(S.getSubplot(n))!==-1},S.flat=function(n,o){for(var l=new Array(n.length),h=0;h<n.length;h++)l[h]=o;return l},S.p2c=function(n,o){for(var l=new Array(n.length),h=0;h<n.length;h++)l[h]=n[h].p2c(o);return l},S.getDistanceFunction=function(n,o,l,h){return n==="closest"?h||S.quadrature(o,l):n.charAt(0)==="x"?o:l},S.getClosest=function(n,o,l){if(l.index!==!1)l.index>=0&&l.index<n.length?l.distance=0:l.index=!1;else for(var h=0;h<n.length;h++){var i=o(n[h]);i<=l.distance&&(l.index=h,l.distance=i)}return l},S.inbox=function(n,o,l){return n*o<0||n===0?l:1/0},S.quadrature=function(n,o){return function(l){var h=n(l),i=o(l);return Math.sqrt(h*h+i*i)}},S.makeEventData=function(n,o,l){var h="index"in n?n.index:n.pointNumber,i={data:o._input,fullData:o,curveNumber:o.index,pointNumber:h};if(o._indexToPoints){var s=o._indexToPoints[h];s.length===1?i.pointIndex=s[0]:i.pointIndices=s}else i.pointIndex=h;return o._module.eventData?i=o._module.eventData(i,n,o,l,h):("xVal"in n?i.x=n.xVal:"x"in n&&(i.x=n.x),"yVal"in n?i.y=n.yVal:"y"in n&&(i.y=n.y),n.xa&&(i.xaxis=n.xa),n.ya&&(i.yaxis=n.ya),n.zLabelVal!==void 0&&(i.z=n.zLabelVal)),S.appendArrayPointValue(i,o,h),i},S.appendArrayPointValue=function(n,o,l){var h=o._arrayAttrs;if(!!h)for(var i=0;i<h.length;i++){var s=h[i],p=u(s);if(n[p]===void 0){var d=r.nestedProperty(o,s).get(),g=c(d,l);g!==void 0&&(n[p]=g)}}},S.appendArrayMultiPointValues=function(n,o,l){var h=o._arrayAttrs;if(!!h)for(var i=0;i<h.length;i++){var s=h[i],p=u(s);if(n[p]===void 0){for(var d=r.nestedProperty(o,s).get(),g=new Array(l.length),b=0;b<l.length;b++)g[b]=c(d,l[b]);n[p]=g}}};var a={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function u(n){return a[n]||n}function c(n,o){if(Array.isArray(o)){if(Array.isArray(n)&&Array.isArray(n[o[0]]))return n[o[0]][o[1]]}else return n[o]}var t={x:!0,y:!0},f={"x unified":!0,"y unified":!0};S.isUnifiedHover=function(n){return typeof n!="string"?!1:!!f[n]},S.isXYhover=function(n){return typeof n!="string"?!1:!!t[n]}},{"../../lib":778}],680:[function(e,v,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("tinycolor2"),c=e("../../lib"),t=c.strTranslate,f=c.strRotate,n=e("../../lib/events"),o=e("../../lib/svg_text_utils"),l=e("../../lib/override_cursor"),h=e("../drawing"),i=e("../color"),s=e("../dragelement"),p=e("../../plots/cartesian/axes"),d=e("../../registry"),g=e("./helpers"),b=e("./constants"),m=e("../legend/defaults"),x=e("../legend/draw"),w=b.YANGLE,y=Math.PI*w/180,T=1/Math.sin(y),M=Math.cos(y),P=Math.sin(y),L=b.HOVERARROWSIZE,I=b.HOVERTEXTPAD;S.hover=function(K,te,$,ie){K=c.getGraphDiv(K),c.throttle(K._fullLayout._uid+b.HOVERID,b.HOVERMINTIME,function(){E(K,te,$,ie)})},S.loneHover=function(K,te){var $=!0;Array.isArray(K)||($=!1,K=[K]);var ie=K.map(function(pe){return{color:pe.color||i.defaultLine,x0:pe.x0||pe.x||0,x1:pe.x1||pe.x||0,y0:pe.y0||pe.y||0,y1:pe.y1||pe.y||0,xLabel:pe.xLabel,yLabel:pe.yLabel,zLabel:pe.zLabel,text:pe.text,name:pe.name,idealAlign:pe.idealAlign,borderColor:pe.borderColor,fontFamily:pe.fontFamily,fontSize:pe.fontSize,fontColor:pe.fontColor,nameLength:pe.nameLength,textAlign:pe.textAlign,trace:pe.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:pe.hovertemplate||!1,eventData:pe.eventData||!1,hovertemplateLabels:pe.hovertemplateLabels||!1}}),se=r.select(te.container),Q=te.outerContainer?r.select(te.outerContainer):se,H={hovermode:"closest",rotateLabels:!1,bgColor:te.bgColor||i.background,container:se,outerContainer:Q},oe=D(ie,H,te.gd),re=5,ee=0,ae=0;oe.sort(function(pe,W){return pe.y0-W.y0}).each(function(pe,W){var ue=pe.y0-pe.by/2;ue-re<ee?pe.offset=ee-ue+re:pe.offset=0,ee=ue+pe.by+pe.offset,W===te.anchorIndex&&(ae=pe.offset)}).each(function(pe){pe.offset-=ae});var fe=te.gd._fullLayout._invScaleX,de=te.gd._fullLayout._invScaleY;return G(oe,H.rotateLabels,fe,de),$?oe:oe.node()};function E(V,K,te,$){te||(te="xy");var ie=Array.isArray(te)?te:[te],se=V._fullLayout,Q=se._plots||[],H=Q[te],oe=se._has("cartesian");if(H){var re=H.overlays.map(function(Zt){return Zt.id});ie=ie.concat(re)}for(var ee=ie.length,ae=new Array(ee),fe=new Array(ee),de=!1,pe=0;pe<ee;pe++){var W=ie[pe];if(Q[W])de=!0,ae[pe]=Q[W].xaxis,fe[pe]=Q[W].yaxis;else if(se[W]&&se[W]._subplot){var ue=se[W]._subplot;ae[pe]=ue.xaxis,fe[pe]=ue.yaxis}else{c.warn("Unrecognized subplot: "+W);return}}var me=K.hovermode||se.hovermode;if(me&&!de&&(me="closest"),["x","y","closest","x unified","y unified"].indexOf(me)===-1||!V.calcdata||V.querySelector(".zoombox")||V._dragging)return s.unhoverRaw(V,K);var be=se.hoverdistance===-1?1/0:se.hoverdistance,Me=se.spikedistance===-1?1/0:se.spikedistance,Pe=[],Ge=[],ze,Qe,tt,Ce,Ae,Be,qe,Tt,At,Ne,ct,Mt,Wt,qt={hLinePoint:null,vLinePoint:null},zt=!1;if(Array.isArray(K))for(me="array",tt=0;tt<K.length;tt++)Ae=V.calcdata[K[tt].curveNumber||0],Ae&&(Be=Ae[0].trace,Ae[0].trace.hoverinfo!=="skip"&&(Ge.push(Ae),Be.orientation==="h"&&(zt=!0)));else{for(Ce=0;Ce<V.calcdata.length;Ce++)Ae=V.calcdata[Ce],Be=Ae[0].trace,Be.hoverinfo!=="skip"&&g.isTraceInSubplots(Be,ie)&&(Ge.push(Ae),Be.orientation==="h"&&(zt=!0));var $t=!K.target,rr,Lt;if($t)"xpx"in K?rr=K.xpx:rr=ae[0]._length/2,"ypx"in K?Lt=K.ypx:Lt=fe[0]._length/2;else{if(n.triggerHandler(V,"plotly_beforehover",K)===!1)return;var Ct=K.target.getBoundingClientRect();rr=K.clientX-Ct.left,Lt=K.clientY-Ct.top,se._calcInverseTransform(V);var dt=c.apply3DTransform(se._invTransform)(rr,Lt);if(rr=dt[0],Lt=dt[1],rr<0||rr>ae[0]._length||Lt<0||Lt>fe[0]._length)return s.unhoverRaw(V,K)}if(K.pointerX=rr+ae[0]._offset,K.pointerY=Lt+fe[0]._offset,"xval"in K?ze=g.flat(ie,K.xval):ze=g.p2c(ae,rr),"yval"in K?Qe=g.flat(ie,K.yval):Qe=g.p2c(fe,Lt),!a(ze[0])||!a(Qe[0]))return c.warn("Fx.hover failed",K,V),s.unhoverRaw(V,K)}var lt=1/0;function Te(Zt,_r){for(Ce=0;Ce<Ge.length;Ce++)if(Ae=Ge[Ce],!(!Ae||!Ae[0]||!Ae[0].trace)&&(Be=Ae[0].trace,!(Be.visible!==!0||Be._length===0)&&["carpet","contourcarpet"].indexOf(Be._module.name)===-1)){if(Be.type==="splom"?(Tt=0,qe=ie[Tt]):(qe=g.getSubplot(Be),Tt=ie.indexOf(qe)),At=me,g.isUnifiedHover(At)&&(At=At.charAt(0)),Mt={cd:Ae,trace:Be,xa:ae[Tt],ya:fe[Tt],maxHoverDistance:be,maxSpikeDistance:Me,index:!1,distance:Math.min(lt,be),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:i.defaultLine,name:Be.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},se[qe]&&(Mt.subplot=se[qe]._subplot),se._splomScenes&&se._splomScenes[Be.uid]&&(Mt.scene=se._splomScenes[Be.uid]),Wt=Pe.length,At==="array"){var Gr=K[Ce];"pointNumber"in Gr?(Mt.index=Gr.pointNumber,At="closest"):(At="","xval"in Gr&&(Ne=Gr.xval,At="x"),"yval"in Gr&&(ct=Gr.yval,At=At?"closest":"y"))}else Zt!==void 0&&_r!==void 0?(Ne=Zt,ct=_r):(Ne=ze[Tt],ct=Qe[Tt]);if(be!==0)if(Be._module&&Be._module.hoverPoints){var Or=Be._module.hoverPoints(Mt,Ne,ct,At,se._hoverlayer);if(Or)for(var Fr,Mn=0;Mn<Or.length;Mn++)Fr=Or[Mn],a(Fr.x0)&&a(Fr.y0)&&Pe.push(U(Fr,me))}else c.log("Unrecognized trace type in hover:",Be);if(me==="closest"&&Pe.length>Wt&&(Pe.splice(0,Wt),lt=Pe[0].distance),oe&&Me!==0&&Pe.length===0){Mt.distance=Me,Mt.index=!1;var Wn=Be._module.hoverPoints(Mt,Ne,ct,"closest",se._hoverlayer);if(Wn&&(Wn=Wn.filter(function(Ln){return Ln.spikeDistance<=Me})),Wn&&Wn.length){var Tn,Nn=Wn.filter(function(Ln){return Ln.xa.showspikes&&Ln.xa.spikesnap!=="hovered data"});if(Nn.length){var jn=Nn[0];a(jn.x0)&&a(jn.y0)&&(Tn=Ue(jn),(!qt.vLinePoint||qt.vLinePoint.spikeDistance>Tn.spikeDistance)&&(qt.vLinePoint=Tn))}var Nr=Wn.filter(function(Ln){return Ln.ya.showspikes&&Ln.ya.spikesnap!=="hovered data"});if(Nr.length){var Pr=Nr[0];a(Pr.x0)&&a(Pr.y0)&&(Tn=Ue(Pr),(!qt.hLinePoint||qt.hLinePoint.spikeDistance>Tn.spikeDistance)&&(qt.hLinePoint=Tn))}}}}}Te();function Le(Zt,_r){for(var Gr=null,Or=1/0,Fr,Mn=0;Mn<Zt.length;Mn++)Fr=Zt[Mn].spikeDistance,Fr<=Or&&Fr<=_r&&(Gr=Zt[Mn],Or=Fr);return Gr}function Ue(Zt){return Zt?{xa:Zt.xa,ya:Zt.ya,x:Zt.xSpike!==void 0?Zt.xSpike:(Zt.x0+Zt.x1)/2,y:Zt.ySpike!==void 0?Zt.ySpike:(Zt.y0+Zt.y1)/2,distance:Zt.distance,spikeDistance:Zt.spikeDistance,curveNumber:Zt.trace.index,color:Zt.color,pointNumber:Zt.index}:null}var et={fullLayout:se,container:se._hoverlayer,outerContainer:se._paperdiv,event:K},ke=V._spikepoints,Ie={vLinePoint:qt.vLinePoint,hLinePoint:qt.hLinePoint};if(V._spikepoints=Ie,oe&&Me!==0&&Pe.length!==0){var He=Pe.filter(function(Zt){return Zt.ya.showspikes}),Ye=Le(He,Me);qt.hLinePoint=Ue(Ye);var ft=Pe.filter(function(Zt){return Zt.xa.showspikes}),it=Le(ft,Me);qt.vLinePoint=Ue(it)}if(Pe.length===0){var je=s.unhoverRaw(V,K);return oe&&(qt.hLinePoint!==null||qt.vLinePoint!==null)&&B(ke)&&X(V,qt,et),je}if(oe&&B(ke)&&X(V,qt,et),Pe.sort(function(Zt,_r){return Zt.distance-_r.distance}),g.isXYhover(At)&&Pe[0].length!==0&&Pe[0].trace.type!=="splom"){var ot=Pe[0],Je=ot.cd[ot.index],st=se.boxmode==="group"||se.violinmode==="group",It=ot.xVal,Nt=ot.xa;Nt.type==="category"&&(It=Nt._categoriesMap[It]),Nt.type==="date"&&(It=Nt.d2c(It)),Je&&Je.t&&Je.t.posLetter===Nt._id&&st&&(It+=Je.t.dPos);var nr=ot.yVal;Nt=ot.ya,Nt.type==="category"&&(nr=Nt._categoriesMap[nr]),Nt.type==="date"&&(nr=Nt.d2c(nr)),Je&&Je.t&&Je.t.posLetter===Nt._id&&st&&(nr+=Je.t.dPos),Te(It,nr);var We={};Pe=Pe.filter(function(Zt){var _r=k(Zt);if(!We[_r])return We[_r]=!0,We[_r]})}var Fe=V._hoverdata,bt=[];for(tt=0;tt<Pe.length;tt++){var kt=Pe[tt],_t=g.makeEventData(kt,kt.trace,kt.cd);if(kt.hovertemplate!==!1){var Rt=!1;kt.cd[kt.index]&&kt.cd[kt.index].ht&&(Rt=kt.cd[kt.index].ht),kt.hovertemplate=Rt||kt.trace.hovertemplate||!1}kt.eventData=[_t],bt.push(_t)}V._hoverdata=bt;var Dt=me==="y"&&(Ge.length>1||Pe.length>1)||me==="closest"&&zt&&Pe.length>1,Ut=i.combine(se.plot_bgcolor||i.background,se.paper_bgcolor),Bt={hovermode:me,rotateLabels:Dt,bgColor:Ut,container:se._hoverlayer,outerContainer:se._paperdiv,commonLabelOpts:se.hoverlabel,hoverdistance:se.hoverdistance},tr=D(Pe,Bt,V);if(g.isUnifiedHover(me)||(N(tr,Dt?"xa":"ya",se),G(tr,Dt,se._invScaleX,se._invScaleY)),K.target&&K.target.tagName){var er=d.getComponentMethod("annotations","hasClickToShow")(V,bt);l(r.select(K.target),er?"pointer":"")}!K.target||$||!z(V,K,Fe)||(Fe&&V.emit("plotly_unhover",{event:K,points:Fe}),V.emit("plotly_hover",{event:K,points:V._hoverdata,xaxes:ae,yaxes:fe,xvals:ze,yvals:Qe}))}function k(V){return[V.trace.index,V.index,V.x0,V.y0,V.name,V.attr,V.xa,V.ya||""].join(",")}var C=/<extra>([\s\S]*)<\/extra>/;function D(V,K,te){var $=te._fullLayout,ie=K.hovermode,se=K.rotateLabels,Q=K.bgColor,H=K.container,oe=K.outerContainer,re=K.commonLabelOpts||{},ee=K.fontFamily||b.HOVERFONT,ae=K.fontSize||b.HOVERFONTSIZE,fe=V[0],de=fe.xa,pe=fe.ya,W=ie.charAt(0)==="y"?"yLabel":"xLabel",ue=fe[W],me=(String(ue)||"").split(" ")[0],be=oe.node().getBoundingClientRect(),Me=be.top,Pe=be.width,Ge=be.height,ze=ue!==void 0&&fe.distance<=K.hoverdistance&&(ie==="x"||ie==="y");if(ze){var Qe=!0,tt,Ce;for(tt=0;tt<V.length;tt++)if(Qe&&V[tt].zLabel===void 0&&(Qe=!1),Ce=V[tt].hoverinfo||V[tt].trace.hoverinfo,Ce){var Ae=Array.isArray(Ce)?Ce:Ce.split("+");if(Ae.indexOf("all")===-1&&Ae.indexOf(ie)===-1){ze=!1;break}}Qe&&(ze=!1)}var Be=H.selectAll("g.axistext").data(ze?[0]:[]);Be.enter().append("g").classed("axistext",!0),Be.exit().remove(),Be.each(function(){var Ye=r.select(this),ft=c.ensureSingle(Ye,"path","",function(Zt){Zt.style({"stroke-width":"1px"})}),it=c.ensureSingle(Ye,"text","",function(Zt){Zt.attr("data-notex",1)}),je=re.bgcolor||i.defaultLine,ot=re.bordercolor||i.contrast(je),Je=i.contrast(je),st={family:re.font.family||ee,size:re.font.size||ae,color:re.font.color||Je};ft.style({fill:je,stroke:ot}),it.text(ue).call(h.font,st).call(o.positionText,0,0).call(o.convertToTspans,te),Ye.attr("transform","");var It=it.node().getBoundingClientRect(),Nt,nr;if(ie==="x"){var We=de.side==="top"?"-":"";it.attr("text-anchor","middle").call(o.positionText,0,de.side==="top"?Me-It.bottom-L-I:Me-It.top+L+I),Nt=de._offset+(fe.x0+fe.x1)/2,nr=pe._offset+(de.side==="top"?0:pe._length);var Fe=It.width/2+I;Nt<Fe?(Nt=Fe,ft.attr("d","M-"+(Fe-L)+",0L-"+(Fe-L*2)+","+We+L+"H"+(I+It.width/2)+"v"+We+(I*2+It.height)+"H-"+Fe+"V"+We+L+"Z")):Nt>$.width-Fe?(Nt=$.width-Fe,ft.attr("d","M"+(Fe-L)+",0L"+Fe+","+We+L+"v"+We+(I*2+It.height)+"H-"+Fe+"V"+We+L+"H"+(Fe-L*2)+"Z")):ft.attr("d","M0,0L"+L+","+We+L+"H"+(I+It.width/2)+"v"+We+(I*2+It.height)+"H-"+(I+It.width/2)+"V"+We+L+"H-"+L+"Z")}else{var bt,kt,_t;pe.side==="right"?(bt="start",kt=1,_t="",Nt=de._offset+de._length):(bt="end",kt=-1,_t="-",Nt=de._offset),nr=pe._offset+(fe.y0+fe.y1)/2,it.attr("text-anchor",bt),ft.attr("d","M0,0L"+_t+L+","+L+"V"+(I+It.height/2)+"h"+_t+(I*2+It.width)+"V-"+(I+It.height/2)+"H"+_t+L+"V-"+L+"Z");var Rt=It.height/2,Dt=Me-It.top-Rt,Ut="clip"+$._uid+"commonlabel"+pe._id,Bt;if(Nt<It.width+2*I+L){Bt="M-"+(L+I)+"-"+Rt+"h-"+(It.width-I)+"V"+Rt+"h"+(It.width-I)+"Z";var tr=It.width-Nt+I;o.positionText(it,tr,Dt),bt==="end"&&it.selectAll("tspan").each(function(){var Zt=r.select(this),_r=h.tester.append("text").text(Zt.text()).call(h.font,st),Gr=_r.node().getBoundingClientRect();Math.round(Gr.width)<Math.round(It.width)&&Zt.attr("x",tr-Gr.width),_r.remove()})}else o.positionText(it,kt*(I+L),Dt),Bt=null;var er=$._topclips.selectAll("#"+Ut).data(Bt?[0]:[]);er.enter().append("clipPath").attr("id",Ut).append("path"),er.exit().remove(),er.select("path").attr("d",Bt),h.setClipUrl(it,Bt?Ut:null,te)}Ye.attr("transform",t(Nt,nr)),V=qe(V)});function qe(Ye){return Ye.filter(function(ft){return ft.zLabelVal!==void 0||(ft[W]||"").split(" ")[0]===me})}if(g.isUnifiedHover(ie)){if(H.selectAll("g.hovertext").remove(),ue!==void 0&&fe.distance<=K.hoverdistance&&(V=qe(V)),V.length===0)return;var Tt={showlegend:!0,legend:{title:{text:ue,font:$.hoverlabel.font},font:$.hoverlabel.font,bgcolor:$.hoverlabel.bgcolor,bordercolor:$.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:$.legend?$.legend.traceorder:void 0,orientation:"v"}},At={};m(Tt,At,te._fullData);var Ne=At.legend;Ne.entries=[];for(var ct=0;ct<V.length;ct++){var Mt=F(V[ct],!0,ie,$,ue),Wt=Mt[0],qt=Mt[1],zt=V[ct];zt.name=qt,qt!==""?zt.text=qt+" : "+Wt:zt.text=Wt;var $t=zt.cd[zt.index];$t&&($t.mc&&(zt.mc=$t.mc),$t.mcc&&(zt.mc=$t.mcc),$t.mlc&&(zt.mlc=$t.mlc),$t.mlcc&&(zt.mlc=$t.mlcc),$t.mlw&&(zt.mlw=$t.mlw),$t.mrc&&(zt.mrc=$t.mrc),$t.dir&&(zt.dir=$t.dir)),zt._distinct=!0,Ne.entries.push([zt])}Ne.entries.sort(function(Ye,ft){return Ye[0].trace.index-ft[0].trace.index}),Ne.layer=H,x(te,Ne);var rr=c.mean(V.map(function(Ye){return(Ye.y0+Ye.y1)/2})),Lt=c.mean(V.map(function(Ye){return(Ye.x0+Ye.x1)/2})),Ct=H.select("g.legend"),dt=Ct.node().getBoundingClientRect();Lt+=de._offset,rr+=pe._offset-dt.height/2;var lt=dt.width+2*I,Te=Lt+lt<=Pe,Le=Lt-lt>=0;!Te&&Le?Lt-=lt:Lt+=2*I;var Ue=dt.height+2*I,et=rr<=Me,ke=rr+Ue>=Ge,Ie=Ue<=Ge;return Ie&&(et?rr=pe._offset+2*I:ke&&(rr=Ge-Ue)),Ct.attr("transform",t(Lt,rr)),Ct}var He=H.selectAll("g.hovertext").data(V,function(Ye){return k(Ye)});return He.enter().append("g").classed("hovertext",!0).each(function(){var Ye=r.select(this);Ye.append("rect").call(i.fill,i.addOpacity(Q,.8)),Ye.append("text").classed("name",!0),Ye.append("path").style("stroke-width","1px"),Ye.append("text").classed("nums",!0).call(h.font,ee,ae)}),He.exit().remove(),He.each(function(Ye){var ft=r.select(this).attr("transform",""),it=Ye.color;Array.isArray(it)&&(it=it[Ye.eventData[0].pointNumber]);var je=Ye.bgcolor||it,ot=i.combine(i.opacity(je)?je:i.defaultLine,Q),Je=i.combine(i.opacity(it)?it:i.defaultLine,Q),st=Ye.borderColor||i.contrast(ot),It=F(Ye,ze,ie,$,ue,ft),Nt=It[0],nr=It[1],We=ft.select("text.nums").call(h.font,Ye.fontFamily||ee,Ye.fontSize||ae,Ye.fontColor||st).text(Nt).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,te),Fe=ft.select("text.name"),bt=0,kt=0;if(nr&&nr!==Nt){Fe.call(h.font,Ye.fontFamily||ee,Ye.fontSize||ae,Je).text(nr).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,te);var _t=Fe.node().getBoundingClientRect();bt=_t.width+2*I,kt=_t.height+2*I}else Fe.remove(),ft.select("rect").remove();ft.select("path").style({fill:ot,stroke:st});var Rt=We.node().getBoundingClientRect(),Dt=Ye.xa._offset+(Ye.x0+Ye.x1)/2,Ut=Ye.ya._offset+(Ye.y0+Ye.y1)/2,Bt=Math.abs(Ye.x1-Ye.x0),tr=Math.abs(Ye.y1-Ye.y0),er=Rt.width+L+I+bt,Zt,_r;if(Ye.ty0=Me-Rt.top,Ye.bx=Rt.width+2*I,Ye.by=Math.max(Rt.height+2*I,kt),Ye.anchor="start",Ye.txwidth=Rt.width,Ye.tx2width=bt,Ye.offset=0,se)Ye.pos=Dt,Zt=Ut+tr/2+er<=Ge,_r=Ut-tr/2-er>=0,(Ye.idealAlign==="top"||!Zt)&&_r?(Ut-=tr/2,Ye.anchor="end"):Zt?(Ut+=tr/2,Ye.anchor="start"):Ye.anchor="middle";else if(Ye.pos=Ut,Zt=Dt+Bt/2+er<=Pe,_r=Dt-Bt/2-er>=0,(Ye.idealAlign==="left"||!Zt)&&_r)Dt-=Bt/2,Ye.anchor="end";else if(Zt)Dt+=Bt/2,Ye.anchor="start";else{Ye.anchor="middle";var Gr=er/2,Or=Dt+Gr-Pe,Fr=Dt-Gr;Or>0&&(Dt-=Or),Fr<0&&(Dt+=-Fr)}We.attr("text-anchor",Ye.anchor),bt&&Fe.attr("text-anchor",Ye.anchor),ft.attr("transform",t(Dt,Ut)+(se?f(w):""))}),He}function F(V,K,te,$,ie,se){var Q="",H="";V.nameOverride!==void 0&&(V.name=V.nameOverride),V.name&&(V.trace._meta&&(V.name=c.templateString(V.name,V.trace._meta)),Q=j(V.name,V.nameLength)),V.zLabel!==void 0?(V.xLabel!==void 0&&(H+="x: "+V.xLabel+"<br>"),V.yLabel!==void 0&&(H+="y: "+V.yLabel+"<br>"),V.trace.type!=="choropleth"&&V.trace.type!=="choroplethmapbox"&&(H+=(H?"z: ":"")+V.zLabel)):K&&V[te.charAt(0)+"Label"]===ie?H=V[(te.charAt(0)==="x"?"y":"x")+"Label"]||"":V.xLabel===void 0?V.yLabel!==void 0&&V.trace.type!=="scattercarpet"&&(H=V.yLabel):V.yLabel===void 0?H=V.xLabel:H="("+V.xLabel+", "+V.yLabel+")",(V.text||V.text===0)&&!Array.isArray(V.text)&&(H+=(H?"<br>":"")+V.text),V.extraText!==void 0&&(H+=(H?"<br>":"")+V.extraText),se&&H===""&&!V.hovertemplate&&(Q===""&&se.remove(),H=Q);var oe=$._d3locale,re=V.hovertemplate||!1,ee=V.hovertemplateLabels||V,ae=V.eventData[0]||{};return re&&(H=c.hovertemplateString(re,ee,oe,ae,V.trace._meta),H=H.replace(C,function(fe,de){return Q=j(de,V.nameLength),""})),[H,Q]}function N(V,K,te){var $=0,ie=1,se=V.size(),Q=new Array(se),H=0;V.each(function(Qe){var tt=Qe[K],Ce=tt._id.charAt(0)==="x",Ae=tt.range;H===0&&Ae&&Ae[0]>Ae[1]!==Ce&&(ie=-1),Q[H++]=[{datum:Qe,traceIndex:Qe.trace.index,dp:0,pos:Qe.pos,posref:Qe.posref,size:Qe.by*(Ce?T:1)/2,pmin:0,pmax:Ce?te.width:te.height}]}),Q.sort(function(Qe,tt){return Qe[0].posref-tt[0].posref||ie*(tt[0].traceIndex-Qe[0].traceIndex)});var oe,re,ee,ae,fe,de,pe;function W(Qe){var tt=Qe[0],Ce=Qe[Qe.length-1];if(re=tt.pmin-tt.pos-tt.dp+tt.size,ee=Ce.pos+Ce.dp+Ce.size-tt.pmax,re>.01){for(fe=Qe.length-1;fe>=0;fe--)Qe[fe].dp+=re;oe=!1}if(!(ee<.01)){if(re<-.01){for(fe=Qe.length-1;fe>=0;fe--)Qe[fe].dp-=ee;oe=!1}if(!!oe){var Ae=0;for(ae=0;ae<Qe.length;ae++)de=Qe[ae],de.pos+de.dp+de.size>tt.pmax&&Ae++;for(ae=Qe.length-1;ae>=0&&!(Ae<=0);ae--)de=Qe[ae],de.pos>tt.pmax-1&&(de.del=!0,Ae--);for(ae=0;ae<Qe.length&&!(Ae<=0);ae++)if(de=Qe[ae],de.pos<tt.pmin+1)for(de.del=!0,Ae--,ee=de.size*2,fe=Qe.length-1;fe>=0;fe--)Qe[fe].dp-=ee;for(ae=Qe.length-1;ae>=0&&!(Ae<=0);ae--)de=Qe[ae],de.pos+de.dp+de.size>tt.pmax&&(de.del=!0,Ae--)}}}for(;!oe&&$<=se;){for($++,oe=!0,ae=0;ae<Q.length-1;){var ue=Q[ae],me=Q[ae+1],be=ue[ue.length-1],Me=me[0];if(re=be.pos+be.dp+be.size-Me.pos-Me.dp+Me.size,re>.01&&be.pmin===Me.pmin&&be.pmax===Me.pmax){for(fe=me.length-1;fe>=0;fe--)me[fe].dp+=re;for(ue.push.apply(ue,me),Q.splice(ae+1,1),pe=0,fe=ue.length-1;fe>=0;fe--)pe+=ue[fe].dp;for(ee=pe/ue.length,fe=ue.length-1;fe>=0;fe--)ue[fe].dp-=ee;oe=!1}else ae++}Q.forEach(W)}for(ae=Q.length-1;ae>=0;ae--){var Pe=Q[ae];for(fe=Pe.length-1;fe>=0;fe--){var Ge=Pe[fe],ze=Ge.datum;ze.offset=Ge.dp,ze.del=Ge.del}}}function G(V,K,te,$){var ie=function(Q){return Q*te},se=function(Q){return Q*$};V.each(function(Q){var H=r.select(this);if(Q.del)return H.remove();var oe=H.select("text.nums"),re=Q.anchor,ee=re==="end"?-1:1,ae={start:1,end:-1,middle:0}[re],fe=ae*(L+I),de=fe+ae*(Q.txwidth+I),pe=0,W=Q.offset,ue=re==="middle";ue&&(fe-=Q.tx2width/2,de+=Q.txwidth/2+I),K&&(W*=-P,pe=Q.offset*M),H.select("path").attr("d",ue?"M-"+ie(Q.bx/2+Q.tx2width/2)+","+se(W-Q.by/2)+"h"+ie(Q.bx)+"v"+se(Q.by)+"h-"+ie(Q.bx)+"Z":"M0,0L"+ie(ee*L+pe)+","+se(L+W)+"v"+se(Q.by/2-L)+"h"+ie(ee*Q.bx)+"v-"+se(Q.by)+"H"+ie(ee*L+pe)+"V"+se(W-L)+"Z");var me=pe+fe,be=W+Q.ty0-Q.by/2+I,Me=Q.textAlign||"auto";Me!=="auto"&&(Me==="left"&&re!=="start"?(oe.attr("text-anchor","start"),me=ue?-Q.bx/2-Q.tx2width/2+I:-Q.bx-I):Me==="right"&&re!=="end"&&(oe.attr("text-anchor","end"),me=ue?Q.bx/2-Q.tx2width/2-I:Q.bx+I)),oe.call(o.positionText,ie(me),se(be)),Q.tx2width&&(H.select("text.name").call(o.positionText,ie(de+ae*I+pe),se(W+Q.ty0-Q.by/2+I)),H.select("rect").call(h.setRect,ie(de+(ae-1)*Q.tx2width/2+pe),se(W-Q.by/2-1),ie(Q.tx2width),se(Q.by+2)))})}function U(V,K){var te=V.index,$=V.trace||{},ie=V.cd[0],se=V.cd[te]||{};function Q(fe){return fe||a(fe)&&fe===0}var H=Array.isArray(te)?function(fe,de){var pe=c.castOption(ie,te,fe);return Q(pe)?pe:c.extractOption({},$,"",de)}:function(fe,de){return c.extractOption(se,$,fe,de)};function oe(fe,de,pe){var W=H(de,pe);Q(W)&&(V[fe]=W)}if(oe("hoverinfo","hi","hoverinfo"),oe("bgcolor","hbg","hoverlabel.bgcolor"),oe("borderColor","hbc","hoverlabel.bordercolor"),oe("fontFamily","htf","hoverlabel.font.family"),oe("fontSize","hts","hoverlabel.font.size"),oe("fontColor","htc","hoverlabel.font.color"),oe("nameLength","hnl","hoverlabel.namelength"),oe("textAlign","hta","hoverlabel.align"),V.posref=K==="y"||K==="closest"&&$.orientation==="h"?V.xa._offset+(V.x0+V.x1)/2:V.ya._offset+(V.y0+V.y1)/2,V.x0=c.constrain(V.x0,0,V.xa._length),V.x1=c.constrain(V.x1,0,V.xa._length),V.y0=c.constrain(V.y0,0,V.ya._length),V.y1=c.constrain(V.y1,0,V.ya._length),V.xLabelVal!==void 0&&(V.xLabel="xLabel"in V?V.xLabel:p.hoverLabelText(V.xa,V.xLabelVal),V.xVal=V.xa.c2d(V.xLabelVal)),V.yLabelVal!==void 0&&(V.yLabel="yLabel"in V?V.yLabel:p.hoverLabelText(V.ya,V.yLabelVal),V.yVal=V.ya.c2d(V.yLabelVal)),V.zLabelVal!==void 0&&V.zLabel===void 0&&(V.zLabel=String(V.zLabelVal)),!isNaN(V.xerr)&&!(V.xa.type==="log"&&V.xerr<=0)){var re=p.tickText(V.xa,V.xa.c2l(V.xerr),"hover").text;V.xerrneg!==void 0?V.xLabel+=" +"+re+" / -"+p.tickText(V.xa,V.xa.c2l(V.xerrneg),"hover").text:V.xLabel+=" \xB1 "+re,K==="x"&&(V.distance+=1)}if(!isNaN(V.yerr)&&!(V.ya.type==="log"&&V.yerr<=0)){var ee=p.tickText(V.ya,V.ya.c2l(V.yerr),"hover").text;V.yerrneg!==void 0?V.yLabel+=" +"+ee+" / -"+p.tickText(V.ya,V.ya.c2l(V.yerrneg),"hover").text:V.yLabel+=" \xB1 "+ee,K==="y"&&(V.distance+=1)}var ae=V.hoverinfo||V.trace.hoverinfo;return ae&&ae!=="all"&&(ae=Array.isArray(ae)?ae:ae.split("+"),ae.indexOf("x")===-1&&(V.xLabel=void 0),ae.indexOf("y")===-1&&(V.yLabel=void 0),ae.indexOf("z")===-1&&(V.zLabel=void 0),ae.indexOf("text")===-1&&(V.text=void 0),ae.indexOf("name")===-1&&(V.name=void 0)),V}function X(V,K,te){var $=te.container,ie=te.fullLayout,se=ie._size,Q=te.event,H=!!K.hLinePoint,oe=!!K.vLinePoint,re,ee;if($.selectAll(".spikeline").remove(),!!(oe||H)){var ae=i.combine(ie.plot_bgcolor,ie.paper_bgcolor);if(H){var fe=K.hLinePoint,de,pe;re=fe&&fe.xa,ee=fe&&fe.ya;var W=ee.spikesnap;W==="cursor"?(de=Q.pointerX,pe=Q.pointerY):(de=re._offset+fe.x,pe=ee._offset+fe.y);var ue=u.readability(fe.color,ae)<1.5?i.contrast(ae):fe.color,me=ee.spikemode,be=ee.spikethickness,Me=ee.spikecolor||ue,Pe=p.getPxPosition(V,ee),Ge,ze;if(me.indexOf("toaxis")!==-1||me.indexOf("across")!==-1){if(me.indexOf("toaxis")!==-1&&(Ge=Pe,ze=de),me.indexOf("across")!==-1){var Qe=ee._counterDomainMin,tt=ee._counterDomainMax;ee.anchor==="free"&&(Qe=Math.min(Qe,ee.position),tt=Math.max(tt,ee.position)),Ge=se.l+Qe*se.w,ze=se.l+tt*se.w}$.insert("line",":first-child").attr({x1:Ge,x2:ze,y1:pe,y2:pe,"stroke-width":be,stroke:Me,"stroke-dasharray":h.dashStyle(ee.spikedash,be)}).classed("spikeline",!0).classed("crisp",!0),$.insert("line",":first-child").attr({x1:Ge,x2:ze,y1:pe,y2:pe,"stroke-width":be+2,stroke:ae}).classed("spikeline",!0).classed("crisp",!0)}me.indexOf("marker")!==-1&&$.insert("circle",":first-child").attr({cx:Pe+(ee.side!=="right"?be:-be),cy:pe,r:be,fill:Me}).classed("spikeline",!0)}if(oe){var Ce=K.vLinePoint,Ae,Be;re=Ce&&Ce.xa,ee=Ce&&Ce.ya;var qe=re.spikesnap;qe==="cursor"?(Ae=Q.pointerX,Be=Q.pointerY):(Ae=re._offset+Ce.x,Be=ee._offset+Ce.y);var Tt=u.readability(Ce.color,ae)<1.5?i.contrast(ae):Ce.color,At=re.spikemode,Ne=re.spikethickness,ct=re.spikecolor||Tt,Mt=p.getPxPosition(V,re),Wt,qt;if(At.indexOf("toaxis")!==-1||At.indexOf("across")!==-1){if(At.indexOf("toaxis")!==-1&&(Wt=Mt,qt=Be),At.indexOf("across")!==-1){var zt=re._counterDomainMin,$t=re._counterDomainMax;re.anchor==="free"&&(zt=Math.min(zt,re.position),$t=Math.max($t,re.position)),Wt=se.t+(1-$t)*se.h,qt=se.t+(1-zt)*se.h}$.insert("line",":first-child").attr({x1:Ae,x2:Ae,y1:Wt,y2:qt,"stroke-width":Ne,stroke:ct,"stroke-dasharray":h.dashStyle(re.spikedash,Ne)}).classed("spikeline",!0).classed("crisp",!0),$.insert("line",":first-child").attr({x1:Ae,x2:Ae,y1:Wt,y2:qt,"stroke-width":Ne+2,stroke:ae}).classed("spikeline",!0).classed("crisp",!0)}At.indexOf("marker")!==-1&&$.insert("circle",":first-child").attr({cx:Ae,cy:Mt-(re.side!=="top"?Ne:-Ne),r:Ne,fill:ct}).classed("spikeline",!0)}}}function z(V,K,te){if(!te||te.length!==V._hoverdata.length)return!0;for(var $=te.length-1;$>=0;$--){var ie=te[$],se=V._hoverdata[$];if(ie.curveNumber!==se.curveNumber||String(ie.pointNumber)!==String(se.pointNumber)||String(ie.pointNumbers)!==String(se.pointNumbers))return!0}return!1}function B(V,K){return!K||K.vLinePoint!==V._spikepoints.vLinePoint||K.hLinePoint!==V._spikepoints.hLinePoint}function j(V,K){return o.plainText(V||"",{len:K,allowedTags:["br","sub","sup","b","i","em"]})}},{"../../lib":778,"../../lib/events":767,"../../lib/override_cursor":789,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"../legend/defaults":695,"../legend/draw":696,"./constants":677,"./helpers":679,d3:169,"fast-isnumeric":241,tinycolor2:576}],681:[function(e,v,S){var r=e("../../lib"),a=e("../color"),u=e("./helpers").isUnifiedHover;v.exports=function(t,f,n,o){o=o||{};function l(h){o.font[h]||(o.font[h]=f.legend?f.legend.font[h]:f.font[h])}f&&u(f.hovermode)&&(o.font||(o.font={}),l("size"),l("family"),l("color"),f.legend?(o.bgcolor||(o.bgcolor=a.combine(f.legend.bgcolor,f.paper_bgcolor)),o.bordercolor||(o.bordercolor=f.legend.bordercolor)):o.bgcolor||(o.bgcolor=f.paper_bgcolor)),n("hoverlabel.bgcolor",o.bgcolor),n("hoverlabel.bordercolor",o.bordercolor),n("hoverlabel.namelength",o.namelength),r.coerceFont(n,"hoverlabel.font",o.font),n("hoverlabel.align",o.align)}},{"../../lib":778,"../color":643,"./helpers":679}],682:[function(e,v,S){var r=e("../../lib"),a=e("./layout_attributes");v.exports=function(t,f,n){function o(i,s){return f[i]!==void 0?f[i]:r.coerce(t,f,a,i,s)}var l=o("clickmode"),h;return f._has("cartesian")?l.indexOf("select")>-1?h="closest":(f._isHoriz=u(n,f),h=f._isHoriz?"y":"x"):h="closest",o("hovermode",h)};function u(c,t){for(var f=t._scatterStackOpts||{},n=0;n<c.length;n++){var o=c[n],l=o.xaxis+o.yaxis,h=f[l]||{},i=h[o.stackgroup]||{};if(o.orientation!=="h"&&i.orientation!=="h")return!1}return!0}},{"../../lib":778,"./layout_attributes":684}],683:[function(e,v,S){var r=e("d3"),a=e("../../lib"),u=e("../dragelement"),c=e("./helpers"),t=e("./layout_attributes"),f=e("./hover");v.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:t},attributes:e("./attributes"),layoutAttributes:t,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:c.getDistanceFunction,getClosest:c.getClosest,inbox:c.inbox,quadrature:c.quadrature,appendArrayPointValue:c.appendArrayPointValue,castHoverOption:o,castHoverinfo:l,hover:f.hover,unhover:u.unhover,loneHover:f.loneHover,loneUnhover:n,click:e("./click")};function n(h){var i=a.isD3Selection(h)?h:r.select(h);i.selectAll("g.hovertext").remove(),i.selectAll(".spikeline").remove()}function o(h,i,s){return a.castOption(h,i,"hoverlabel."+s)}function l(h,i,s){function p(d){return a.coerceHoverinfo({hoverinfo:d},{_module:h._module},i)}return a.castOption(h,s,"hoverinfo",p)}},{"../../lib":778,"../dragelement":662,"./attributes":674,"./calc":675,"./click":676,"./constants":677,"./defaults":678,"./helpers":679,"./hover":680,"./layout_attributes":684,"./layout_defaults":685,"./layout_global_defaults":686,d3:169}],684:[function(e,v,S){var r=e("./constants"),a=e("../../plots/font_attributes")({editType:"none"});a.family.dflt=r.HOVERFONT,a.size.dflt=r.HOVERFONTSIZE,v.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:a,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":856,"./constants":677}],685:[function(e,v,S){var r=e("../../lib"),a=e("./helpers").isUnifiedHover,u=e("./layout_attributes"),c=e("./hovermode_defaults"),t=e("./hoverlabel_defaults");v.exports=function(n,o,l){function h(b,m){return r.coerce(n,o,u,b,m)}var i=c(n,o,l);i&&(h("hoverdistance"),h("spikedistance",a(i)?-1:void 0));var s=h("dragmode");s==="select"&&h("selectdirection");var p=o._has("mapbox"),d=o._has("geo"),g=o._basePlotModules.length;o.dragmode==="zoom"&&((p||d)&&g===1||p&&d&&g===2)&&(o.dragmode="pan"),t(n,o,h)}},{"../../lib":778,"./helpers":679,"./hoverlabel_defaults":681,"./hovermode_defaults":682,"./layout_attributes":684}],686:[function(e,v,S){var r=e("../../lib"),a=e("./hoverlabel_defaults"),u=e("./layout_attributes");v.exports=function(t,f){function n(o,l){return r.coerce(t,f,u,o,l)}a(t,f,n)}},{"../../lib":778,"./hoverlabel_defaults":681,"./layout_attributes":684}],687:[function(e,v,S){var r=e("../../lib"),a=e("../../lib/regex").counter,u=e("../../plots/domain").attributes,c=e("../../plots/cartesian/constants").idRegex,t=e("../../plot_api/plot_template"),f={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[a("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[c.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[c.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:u({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function n(s,p,d){var g=p[d+"axes"],b=Object.keys((s._splomAxes||{})[d]||{});if(Array.isArray(g))return g;if(b.length)return b}function o(s,p){var d=s.grid||{},g=n(p,d,"x"),b=n(p,d,"y");if(!s.grid&&!g&&!b)return;var m=Array.isArray(d.subplots)&&Array.isArray(d.subplots[0]),x=Array.isArray(g),w=Array.isArray(b),y=x&&g!==d.xaxes&&w&&b!==d.yaxes,T,M;m?(T=d.subplots.length,M=d.subplots[0].length):(w&&(T=b.length),x&&(M=g.length));var P=t.newContainer(p,"grid");function L(X,z){return r.coerce(d,P,f,X,z)}var I=L("rows",T),E=L("columns",M);if(!(I*E>1)){delete p.grid;return}if(!m&&!x&&!w){var k=L("pattern")==="independent";k&&(m=!0)}P._hasSubplotGrid=m;var C=L("roworder"),D=C==="top to bottom",F=m?.2:.1,N=m?.3:.1,G,U;y&&p._splomGridDflt&&(G=p._splomGridDflt.xside,U=p._splomGridDflt.yside),P._domains={x:l("x",L,F,G,E),y:l("y",L,N,U,I,D)}}function l(s,p,d,g,b,m){var x=p(s+"gap",d),w=p("domain."+s);p(s+"side",g);for(var y=new Array(b),T=w[0],M=(w[1]-T)/(b-x),P=M*(1-x),L=0;L<b;L++){var I=T+M*L;y[m?b-1-L:L]=[I,I+P]}return y}function h(s,p){var d=p.grid;if(!(!d||!d._domains)){var g=s.grid||{},b=p._subplots,m=d._hasSubplotGrid,x=d.rows,w=d.columns,y=d.pattern==="independent",T,M,P,L,I,E,k,C=d._axisMap={};if(m){var D=g.subplots||[];E=d.subplots=new Array(x);var F=1;for(T=0;T<x;T++){var N=E[T]=new Array(w),G=D[T]||[];for(M=0;M<w;M++)if(y?(I=F===1?"xy":"x"+F+"y"+F,F++):I=G[M],N[M]="",b.cartesian.indexOf(I)!==-1){if(k=I.indexOf("y"),P=I.slice(0,k),L=I.slice(k),C[P]!==void 0&&C[P]!==M||C[L]!==void 0&&C[L]!==T)continue;N[M]=I,C[P]=M,C[L]=T}}}else{var U=n(p,g,"x"),X=n(p,g,"y");d.xaxes=i(U,b.xaxis,w,C,"x"),d.yaxes=i(X,b.yaxis,x,C,"y")}var z=d._anchors={},B=d.roworder==="top to bottom";for(var j in C){var V=j.charAt(0),K=d[V+"side"],te,$,ie;if(K.length<8)z[j]="free";else if(V==="x"){if(K.charAt(0)==="t"===B?(te=0,$=1,ie=x):(te=x-1,$=-1,ie=-1),m){var se=C[j];for(T=te;T!==ie;T+=$)if(I=E[T][se],!!I&&(k=I.indexOf("y"),I.slice(0,k)===j)){z[j]=I.slice(k);break}}else for(T=te;T!==ie;T+=$)if(L=d.yaxes[T],b.cartesian.indexOf(j+L)!==-1){z[j]=L;break}}else if(K.charAt(0)==="l"?(te=0,$=1,ie=w):(te=w-1,$=-1,ie=-1),m){var Q=C[j];for(T=te;T!==ie;T+=$)if(I=E[Q][T],!!I&&(k=I.indexOf("y"),I.slice(k)===j)){z[j]=I.slice(0,k);break}}else for(T=te;T!==ie;T+=$)if(P=d.xaxes[T],b.cartesian.indexOf(P+j)!==-1){z[j]=P;break}}}}function i(s,p,d,g,b){var m=new Array(d),x;function w(y,T){p.indexOf(T)!==-1&&g[T]===void 0?(m[y]=T,g[T]=y):m[y]=""}if(Array.isArray(s))for(x=0;x<d;x++)w(x,s[x]);else for(w(0,b),x=1;x<d;x++)w(x,b+(x+1));return m}v.exports={moduleType:"component",name:"grid",schema:{layout:{grid:f}},layoutAttributes:f,sizeDefaults:o,contentDefaults:h}},{"../../lib":778,"../../lib/regex":795,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834,"../../plots/domain":855}],688:[function(e,v,S){var r=e("../../plots/cartesian/constants"),a=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),v.exports=a("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":746,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834}],689:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib/to_log_range");v.exports=function(c,t,f,n){t=t||{};var o=f==="log"&&t.type==="linear",l=f==="linear"&&t.type==="log";if(!!(o||l)){for(var h=c._fullLayout.images,i=t._id.charAt(0),s,p,d=0;d<h.length;d++)if(s=h[d],p="images["+d+"].",s[i+"ref"]===t._id){var g=s[i],b=s["size"+i],m=null,x=null;if(o){m=a(g,t.range);var w=b/Math.pow(10,m)/2;x=2*Math.log(w+Math.sqrt(1+w*w))/Math.LN10}else m=Math.pow(10,g),x=m*(Math.pow(10,b/2)-Math.pow(10,-b/2));r(m)?r(x)||(x=null):(m=null,x=null),n(p+i,m),n(p+"size"+i,x)}}}},{"../../lib/to_log_range":805,"fast-isnumeric":241}],690:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../../plots/array_container_defaults"),c=e("./attributes"),t="images";v.exports=function(o,l){var h={name:t,handleItemDefaults:f};u(o,l,h)};function f(n,o,l){function h(w,y){return r.coerce(n,o,c,w,y)}var i=h("source"),s=h("visible",!!i);if(!s)return o;h("layer"),h("xanchor"),h("yanchor"),h("sizex"),h("sizey"),h("sizing"),h("opacity");for(var p={_fullLayout:l},d=["x","y"],g=0;g<2;g++){var b=d[g],m=a.coerceRef(n,o,p,b,"paper",void 0);if(m!=="paper"){var x=a.getFromId(p,m);x._imgIndices.push(o._index)}a.coercePosition(o,p,h,m,b,0)}return o}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":688}],691:[function(e,v,S){var r=e("d3"),a=e("../drawing"),u=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/axis_ids"),t=e("../../constants/xmlns_namespaces");v.exports=function(n){var o=n._fullLayout,l=[],h={},i=[],s,p;for(p=0;p<o.images.length;p++){var d=o.images[p];if(d.visible)if(d.layer==="below"&&d.xref!=="paper"&&d.yref!=="paper"){s=c.ref2id(d.xref)+c.ref2id(d.yref);var g=o._plots[s];if(!g){i.push(d);continue}g.mainplot&&(s=g.mainplot.id),h[s]||(h[s]=[]),h[s].push(d)}else d.layer==="above"?l.push(d):i.push(d)}var b={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function m(L){var I=r.select(this);if(this._imgSrc!==L.source)if(I.attr("xmlns",t.svg),L.source&&L.source.slice(0,5)==="data:")I.attr("xlink:href",L.source),this._imgSrc=L.source;else{var E=new Promise(function(k){var C=new Image;this.img=C,C.setAttribute("crossOrigin","anonymous"),C.onerror=D,C.onload=function(){var F=document.createElement("canvas");F.width=this.width,F.height=this.height;var N=F.getContext("2d");N.drawImage(this,0,0);var G=F.toDataURL("image/png");I.attr("xlink:href",G),k()},I.on("error",D),C.src=L.source,this._imgSrc=L.source;function D(){I.remove(),k()}}.bind(this));n._promises.push(E)}}function x(L){var I=r.select(this),E=u.getFromId(n,L.xref),k=u.getFromId(n,L.yref),C=u.getRefType(L.xref)==="domain",D=u.getRefType(L.yref)==="domain",F=o._size,N,G;E!==void 0?N=typeof L.xref=="string"&&C?E._length*L.sizex:Math.abs(E.l2p(L.sizex)-E.l2p(0)):N=L.sizex*F.w,k!==void 0?G=typeof L.yref=="string"&&D?k._length*L.sizey:Math.abs(k.l2p(L.sizey)-k.l2p(0)):G=L.sizey*F.h;var U=N*b.x[L.xanchor].offset,X=G*b.y[L.yanchor].offset,z=b.x[L.xanchor].sizing+b.y[L.yanchor].sizing,B,j;switch(E!==void 0?B=typeof L.xref=="string"&&C?E._length*L.x+E._offset:E.r2p(L.x)+E._offset:B=L.x*F.w+F.l,B+=U,k!==void 0?j=typeof L.yref=="string"&&D?k._length*(1-L.y)+k._offset:k.r2p(L.y)+k._offset:j=F.h-L.y*F.h+F.t,j+=X,L.sizing){case"fill":z+=" slice";break;case"stretch":z="none";break}I.attr({x:B,y:j,width:N,height:G,preserveAspectRatio:z,opacity:L.opacity});var V=E&&u.getRefType(L.xref)!=="domain"?E._id:"",K=k&&u.getRefType(L.yref)!=="domain"?k._id:"",te=V+K;a.setClipUrl(I,te?"clip"+o._uid+te:null,n)}var w=o._imageLowerLayer.selectAll("image").data(i),y=o._imageUpperLayer.selectAll("image").data(l);w.enter().append("image"),y.enter().append("image"),w.exit().remove(),y.exit().remove(),w.each(function(L){m.bind(this)(L),x.bind(this)(L)}),y.each(function(L){m.bind(this)(L),x.bind(this)(L)});var T=Object.keys(o._plots);for(p=0;p<T.length;p++){s=T[p];var M=o._plots[s];if(!!M.imagelayer){var P=M.imagelayer.selectAll("image").data(h[s]||[]);P.enter().append("image"),P.exit().remove(),P.each(function(L){m.bind(this)(L),x.bind(this)(L)})}}}},{"../../constants/xmlns_namespaces":754,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_ids":831,"../drawing":665,d3:169}],692:[function(e,v,S){v.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":840,"./attributes":688,"./convert_coords":689,"./defaults":690,"./draw":691}],693:[function(e,v,S){var r=e("../../plots/font_attributes"),a=e("../color/attributes");v.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:r({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":856,"../color/attributes":642}],694:[function(e,v,S){v.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],695:[function(e,v,S){var r=e("../../registry"),a=e("../../lib"),u=e("../../plot_api/plot_template"),c=e("./attributes"),t=e("../../plots/layout_attributes"),f=e("./helpers");v.exports=function(o,l,h){for(var i=o.legend||{},s=0,p=!1,d="normal",g=0;g<h.length;g++){var b=h[g];!b.visible||((b.showlegend||b._dfltShowLegend&&!(b._module&&b._module.attributes&&b._module.attributes.showlegend&&b._module.attributes.showlegend.dflt===!1))&&(s++,b.showlegend&&(p=!0,(r.traceIs(b,"pie-like")||b._input.showlegend===!0)&&s++)),(r.traceIs(b,"bar")&&l.barmode==="stack"||["tonextx","tonexty"].indexOf(b.fill)!==-1)&&(d=f.isGrouped({traceorder:d})?"grouped+reversed":"reversed"),b.legendgroup!==void 0&&b.legendgroup!==""&&(d=f.isReversed({traceorder:d})?"reversed+grouped":"grouped"))}var m=a.coerce(o,l,t,"showlegend",p&&s>1);if(m===!1&&!i.uirevision)return;var x=u.newContainer(l,"legend");function w(I,E){return a.coerce(i,x,c,I,E)}if(w("uirevision",l.uirevision),m!==!1){w("bgcolor",l.paper_bgcolor),w("bordercolor"),w("borderwidth"),a.coerceFont(w,"font",l.font);var y=w("orientation"),T,M,P;y==="h"?(T=0,r.getComponentMethod("rangeslider","isVisible")(o.xaxis)?(M=1.1,P="bottom"):(M=-.1,P="top")):(T=1.02,M=1,P="auto"),w("traceorder",d),f.isGrouped(l.legend)&&w("tracegroupgap"),w("itemsizing"),w("itemwidth"),w("itemclick"),w("itemdoubleclick"),w("x",T),w("xanchor"),w("y",M),w("yanchor",P),w("valign"),a.noneOrAll(i,x,["x","y"]);var L=w("title.text");L&&(w("title.side",y==="h"?"left":"top"),a.coerceFont(w,"title.font",l.font))}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/layout_attributes":882,"../../registry":911,"./attributes":693,"./helpers":699}],696:[function(e,v,S){var r=e("d3"),a=e("../../lib"),u=e("../../plots/plots"),c=e("../../registry"),t=e("../../lib/events"),f=e("../dragelement"),n=e("../drawing"),o=e("../color"),l=e("../../lib/svg_text_utils"),h=e("./handle_click"),i=e("./constants"),s=e("../../constants/alignment"),p=s.LINE_SPACING,d=s.FROM_TL,g=s.FROM_BR,b=e("./get_legend_data"),m=e("./style"),x=e("./helpers");v.exports=function(N,G){var U=N._fullLayout,X="legend"+U._uid,z;if(G?(z=G.layer,X+="-hover"):(G=U.legend||{},G._main=!0,z=U._infolayer),!!z){N._legendMouseDownTime||(N._legendMouseDownTime=0);var B;if(G._main){if(!N.calcdata)return;B=U.showlegend&&b(N.calcdata,G)}else{if(!G.entries)return;B=b(G.entries,G)}var j=U.hiddenlabels||[];if(G._main&&(!U.showlegend||!B.length))return z.selectAll(".legend").remove(),U._topdefs.select("#"+X).remove(),u.autoMargin(N,"legend");var V=a.ensureSingle(z,"g","legend",function(re){G._main&&re.attr("pointer-events","all")}),K=a.ensureSingleById(U._topdefs,"clipPath",X,function(re){re.append("rect")}),te=a.ensureSingle(V,"rect","bg",function(re){re.attr("shape-rendering","crispEdges")});te.call(o.stroke,G.bordercolor).call(o.fill,G.bgcolor).style("stroke-width",G.borderwidth+"px");var $=a.ensureSingle(V,"g","scrollbox"),ie=G.title;if(G._titleWidth=0,G._titleHeight=0,ie.text){var se=a.ensureSingle($,"text","legendtitletext");se.attr("text-anchor","start").call(n.font,ie.font).text(ie.text),P(se,$,N,G)}else $.selectAll(".legendtitletext").remove();var Q=a.ensureSingle(V,"rect","scrollbar",function(re){re.attr(i.scrollBarEnterAttrs).call(o.fill,i.scrollBarColor)}),H=$.selectAll("g.groups").data(B);H.enter().append("g").attr("class","groups"),H.exit().remove();var oe=H.selectAll("g.traces").data(a.identity);oe.enter().append("g").attr("class","traces"),oe.exit().remove(),oe.style("opacity",function(re){var ee=re[0].trace;return c.traceIs(ee,"pie-like")?j.indexOf(re[0].label)!==-1?.5:1:ee.visible==="legendonly"?.5:1}).each(function(){r.select(this).call(y,N,G)}).call(m,N,G).each(function(){G._main&&r.select(this).call(M,N)}),a.syncOrAsync([u.previousPromises,function(){return E(N,H,oe,G)},function(){if(G._main&&k(N))return;var re=U._size,ee=G.borderwidth,ae=re.l+re.w*G.x-d[C(G)]*G._width,fe=re.t+re.h*(1-G.y)-d[D(G)]*G._effHeight;if(G._main&&U.margin.autoexpand){var de=ae,pe=fe;ae=a.constrain(ae,0,U.width-G._width),fe=a.constrain(fe,0,U.height-G._effHeight),ae!==de&&a.log("Constrain legend.x to make legend fit inside graph"),fe!==pe&&a.log("Constrain legend.y to make legend fit inside graph")}if(G._main&&n.setTranslate(V,ae,fe),Q.on(".drag",null),V.on("wheel",null),!G._main||G._height<=G._maxHeight||N._context.staticPlot){var W=G._effHeight;G._main||(W=G._height),te.attr({width:G._width-ee,height:W-ee,x:ee/2,y:ee/2}),n.setTranslate($,0,0),K.select("rect").attr({width:G._width-2*ee,height:W-2*ee,x:ee,y:ee}),n.setClipUrl($,X,N),n.setRect(Q,0,0,0,0),delete G._scrollY}else{var ue=Math.max(i.scrollBarMinHeight,G._effHeight*G._effHeight/G._height),me=G._effHeight-ue-2*i.scrollBarMargin,be=G._height-G._effHeight,Me=me/be,Pe=Math.min(G._scrollY||0,be);te.attr({width:G._width-2*ee+i.scrollBarWidth+i.scrollBarMargin,height:G._effHeight-ee,x:ee/2,y:ee/2}),K.select("rect").attr({width:G._width-2*ee+i.scrollBarWidth+i.scrollBarMargin,height:G._effHeight-2*ee,x:ee,y:ee+Pe}),n.setClipUrl($,X,N),qe(Pe,ue,Me),V.on("wheel",function(){Pe=a.constrain(G._scrollY+r.event.deltaY/me*be,0,be),qe(Pe,ue,Me),Pe!==0&&Pe!==be&&r.event.preventDefault()});var Ge,ze,Qe,tt=function(Mt,Wt,qt){var zt=(qt-Wt)/Me+Mt;return a.constrain(zt,0,be)},Ce=function(Mt,Wt,qt){var zt=(Wt-qt)/Me+Mt;return a.constrain(zt,0,be)},Ae=r.behavior.drag().on("dragstart",function(){var Mt=r.event.sourceEvent;Mt.type==="touchstart"?Ge=Mt.changedTouches[0].clientY:Ge=Mt.clientY,Qe=Pe}).on("drag",function(){var Mt=r.event.sourceEvent;Mt.buttons===2||Mt.ctrlKey||(Mt.type==="touchmove"?ze=Mt.changedTouches[0].clientY:ze=Mt.clientY,Pe=tt(Qe,Ge,ze),qe(Pe,ue,Me))});Q.call(Ae);var Be=r.behavior.drag().on("dragstart",function(){var Mt=r.event.sourceEvent;Mt.type==="touchstart"&&(Ge=Mt.changedTouches[0].clientY,Qe=Pe)}).on("drag",function(){var Mt=r.event.sourceEvent;Mt.type==="touchmove"&&(ze=Mt.changedTouches[0].clientY,Pe=Ce(Qe,Ge,ze),qe(Pe,ue,Me))});$.call(Be)}function qe(Mt,Wt,qt){G._scrollY=N._fullLayout.legend._scrollY=Mt,n.setTranslate($,0,-Mt),n.setRect(Q,G._width,i.scrollBarMargin+Mt*qt,i.scrollBarWidth,Wt),K.select("rect").attr("y",ee+Mt)}if(N._context.edits.legendPosition){var Tt,At,Ne,ct;V.classed("cursor-move",!0),f.init({element:V.node(),gd:N,prepFn:function(){var Mt=n.getTranslate(V);Ne=Mt.x,ct=Mt.y},moveFn:function(Mt,Wt){var qt=Ne+Mt,zt=ct+Wt;n.setTranslate(V,qt,zt),Tt=f.align(qt,0,re.l,re.l+re.w,G.xanchor),At=f.align(zt,0,re.t+re.h,re.t,G.yanchor)},doneFn:function(){Tt!==void 0&&At!==void 0&&c.call("_guiRelayout",N,{"legend.x":Tt,"legend.y":At})},clickFn:function(Mt,Wt){var qt=z.selectAll("g.traces").filter(function(){var zt=this.getBoundingClientRect();return Wt.clientX>=zt.left&&Wt.clientX<=zt.right&&Wt.clientY>=zt.top&&Wt.clientY<=zt.bottom});qt.size()>0&&w(N,V,qt,Mt,Wt)}})}}],N)}};function w(F,N,G,U,X){var z=G.data()[0][0].trace,B={event:X,node:G.node(),curveNumber:z.index,expandedIndex:z._expandedIndex,data:F.data,layout:F.layout,frames:F._transitionData._frames,config:F._context,fullData:F._fullData,fullLayout:F._fullLayout};z._group&&(B.group=z._group),c.traceIs(z,"pie-like")&&(B.label=G.datum()[0].label);var j=t.triggerHandler(F,"plotly_legendclick",B);if(j!==!1){if(U===1)N._clickTimeout=setTimeout(function(){h(G,F,U)},F._context.doubleClickDelay);else if(U===2){N._clickTimeout&&clearTimeout(N._clickTimeout),F._legendMouseDownTime=0;var V=t.triggerHandler(F,"plotly_legenddoubleclick",B);V!==!1&&h(G,F,U)}}}function y(F,N,G){var U=F.data()[0][0],X=U.trace,z=c.traceIs(X,"pie-like"),B=X.index,j=G._main&&N._context.edits.legendText&&!z,V=G._maxNameLength,K;G.entries?K=U.text:(K=z?U.label:X.name,X._meta&&(K=a.templateString(K,X._meta)));var te=a.ensureSingle(F,"text","legendtext");te.attr("text-anchor","start").call(n.font,G.font).text(j?T(K,V):K);var $=G.itemwidth+i.itemGap*2;l.positionText(te,$,0),j?te.call(l.makeEditable,{gd:N,text:K}).call(P,F,N,G).on("edit",function(ie){this.text(T(ie,V)).call(P,F,N,G);var se=U.trace._fullInput||{},Q={};if(c.hasTransform(se,"groupby")){var H=c.getTransformIndices(se,"groupby"),oe=H[H.length-1],re=a.keyedContainer(se,"transforms["+oe+"].styles","target","value.name");re.set(U.trace._group,ie),Q=re.constructUpdate()}else Q.name=ie;return c.call("_guiRestyle",N,Q,B)}):P(te,F,N,G)}function T(F,N){var G=Math.max(4,N);if(F&&F.trim().length>=G/2)return F;F=F||"";for(var U=G-F.length;U>0;U--)F+=" ";return F}function M(F,N){var G=N._context.doubleClickDelay,U,X=1,z=a.ensureSingle(F,"rect","legendtoggle",function(B){N._context.staticPlot||B.style("cursor","pointer").attr("pointer-events","all"),B.call(o.fill,"rgba(0,0,0,0)")});N._context.staticPlot||(z.on("mousedown",function(){U=new Date().getTime(),U-N._legendMouseDownTime<G?X+=1:(X=1,N._legendMouseDownTime=U)}),z.on("mouseup",function(){if(!(N._dragged||N._editing)){var B=N._fullLayout.legend;new Date().getTime()-N._legendMouseDownTime>G&&(X=Math.max(X-1,1)),w(N,B,F,X,r.event)}}))}function P(F,N,G,U){U._main||F.attr("data-notex",!0),l.convertToTspans(F,G,function(){L(N,G,U)})}function L(F,N,G){var U=F.data()[0][0];if(G._main&&U&&!U.trace.showlegend){F.remove();return}var X=F.select("g[class*=math-group]"),z=X.node();G||(G=N._fullLayout.legend);var B=G.borderwidth,j=(U?G:G.title).font.size*p,V,K;if(z){var te=n.bBox(z);V=te.height,K=te.width,U?n.setTranslate(X,0,V*.25):n.setTranslate(X,B,V*.75+B)}else{var $=F.select(U?".legendtext":".legendtitletext"),ie=l.lineCount($),se=$.node();V=j*ie,K=se?n.bBox(se).width:0;var Q=j*((ie-1)/2-.3);if(U){var H=G.itemwidth+i.itemGap*2;l.positionText($,H,-Q)}else l.positionText($,i.titlePad+B,j+B)}U?(U.lineHeight=j,U.height=Math.max(V,16)+3,U.width=K):(G._titleWidth=K,G._titleHeight=V)}function I(F){var N=0,G=0,U=F.title.side;return U&&(U.indexOf("left")!==-1&&(N=F._titleWidth),U.indexOf("top")!==-1&&(G=F._titleHeight)),[N,G]}function E(F,N,G,U){var X=F._fullLayout;U||(U=X.legend);var z=X._size,B=x.isVertical(U),j=x.isGrouped(U),V=U.borderwidth,K=2*V,te=i.itemGap,$=U.itemwidth+te*2,ie=2*(V+te),se=D(U),Q=U.y<0||U.y===0&&se==="top",H=U.y>1||U.y===1&&se==="bottom";U._maxHeight=Math.max(Q||H?X.height/2:z.h,30);var oe=0;U._width=0,U._height=0;var re=I(U);if(B)G.each(function(Tt){var At=Tt[0].height;n.setTranslate(this,V+re[0],V+re[1]+U._height+At/2+te),U._height+=At,U._width=Math.max(U._width,Tt[0].width)}),oe=$+U._width,U._width+=te+$+K,U._height+=ie,j&&(N.each(function(Tt,At){n.setTranslate(this,0,At*U.tracegroupgap)}),U._height+=(U._lgroupsLength-1)*U.tracegroupgap);else{var ee=C(U),ae=U.x<0||U.x===0&&ee==="right",fe=U.x>1||U.x===1&&ee==="left",de=H||Q,pe=X.width/2;U._maxWidth=Math.max(ae?de&&ee==="left"?z.l+z.w:pe:fe?de&&ee==="right"?z.r+z.w:pe:z.w,2*$);var W=0,ue=0;G.each(function(Tt){var At=Tt[0].width+$;W=Math.max(W,At),ue+=At}),oe=null;var me=0;if(j){var be=0,Me=0,Pe=0;N.each(function(){var Tt=0,At=0;r.select(this).selectAll("g.traces").each(function(ct){var Mt=ct[0].height;n.setTranslate(this,re[0],re[1]+V+te+Mt/2+At),At+=Mt,Tt=Math.max(Tt,$+ct[0].width)}),be=Math.max(be,At);var Ne=Tt+te;Ne+V+Me>U._maxWidth&&(me=Math.max(me,Me),Me=0,Pe+=be+U.tracegroupgap,be=At),n.setTranslate(this,Me,Pe),Me+=Ne}),U._width=Math.max(me,Me)+V,U._height=Pe+be+ie}else{var Ge=G.size(),ze=ue+K+(Ge-1)*te<U._maxWidth,Qe=0,tt=0,Ce=0,Ae=0;G.each(function(Tt){var At=Tt[0].height,Ne=$+Tt[0].width,ct=(ze?Ne:W)+te;ct+V+tt-te>=U._maxWidth&&(me=Math.max(me,Ae),tt=0,Ce+=Qe,U._height+=Qe,Qe=0),n.setTranslate(this,re[0]+V+tt,re[1]+V+Ce+At/2+te),Ae=tt+Ne+te,tt+=ct,Qe=Math.max(Qe,At)}),ze?(U._width=tt+K,U._height=Qe+ie):(U._width=Math.max(me,Ae)+K,U._height+=Qe+ie)}}U._width=Math.ceil(Math.max(U._width+re[0],U._titleWidth+2*(V+i.titlePad))),U._height=Math.ceil(Math.max(U._height+re[1],U._titleHeight+2*(V+i.itemGap))),U._effHeight=Math.min(U._height,U._maxHeight);var Be=F._context.edits,qe=Be.legendText||Be.legendPosition;G.each(function(Tt){var At=r.select(this).select(".legendtoggle"),Ne=Tt[0].height,ct=qe?$:oe||$+Tt[0].width;B||(ct+=te/2),n.setRect(At,0,-Ne/2,ct,Ne)})}function k(F){var N=F._fullLayout,G=N.legend,U=C(G),X=D(G);return u.autoMargin(F,"legend",{x:G.x,y:G.y,l:G._width*d[U],r:G._width*g[U],b:G._effHeight*g[X],t:G._effHeight*d[X]})}function C(F){return a.isRightAnchor(F)?"right":a.isCenterAnchor(F)?"center":"left"}function D(F){return a.isBottomAnchor(F)?"bottom":a.isMiddleAnchor(F)?"middle":"top"}},{"../../constants/alignment":745,"../../lib":778,"../../lib/events":767,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"./constants":694,"./get_legend_data":697,"./handle_click":698,"./helpers":699,"./style":701,d3:169}],697:[function(e,v,S){var r=e("../../registry"),a=e("./helpers");v.exports=function(c,t){var f={},n=[],o=!1,l={},h=0,i=0,s,p,d=t._main;function g(L,I){if(L===""||!a.isGrouped(t)){var E="~~i"+h;n.push(E),f[E]=[[I]],h++}else n.indexOf(L)===-1?(n.push(L),o=!0,f[L]=[[I]]):f[L].push([I])}for(s=0;s<c.length;s++){var b=c[s],m=b[0],x=m.trace,w=x.legendgroup;if(!(d&&(!x.visible||!x.showlegend)))if(r.traceIs(x,"pie-like"))for(l[w]||(l[w]={}),p=0;p<b.length;p++){var y=b[p].label;l[w][y]||(g(w,{label:y,color:b[p].color,i:b[p].i,trace:x,pts:b[p].pts}),l[w][y]=!0,i=Math.max(i,(y||"").length))}else g(w,m),i=Math.max(i,(x.name||"").length)}if(!n.length)return[];var T=n.length,M,P;if(o&&a.isGrouped(t))for(P=new Array(T),s=0;s<T;s++)M=f[n[s]],P[s]=a.isReversed(t)?M.reverse():M;else{for(P=[new Array(T)],s=0;s<T;s++)M=f[n[s]][0],P[0][a.isReversed(t)?T-s-1:s]=M;T=1}return t._lgroupsLength=T,t._maxNameLength=i,P}},{"../../registry":911,"./helpers":699}],698:[function(e,v,S){var r=e("../../lib"),a=e("../../registry"),u=!0;v.exports=function(t,f,n){var o=f._fullLayout;if(f._dragged||f._editing)return;var l=o.legend.itemclick,h=o.legend.itemdoubleclick;n===1&&l==="toggle"&&h==="toggleothers"&&u&&f.data&&f._context.showTips&&r.notifier(r._(f,"Double-click on legend to isolate one trace"),"long"),u=!1;var i;if(n===1?i=l:n===2&&(i=h),!i)return;var s=o.hiddenlabels?o.hiddenlabels.slice():[],p=t.data()[0][0],d=f._fullData,g=p.trace,b=g.legendgroup,m,x,w,y,T,M,P={},L=[],I=[],E=[];function k(ie,se,Q){var H=L.indexOf(ie),oe=P[se];return oe||(oe=P[se]=[]),L.indexOf(ie)===-1&&(L.push(ie),H=L.length-1),oe[H]=Q,H}function C(ie,se){var Q=ie._fullInput;if(a.hasTransform(Q,"groupby")){var H=I[Q.index];if(!H){var oe=a.getTransformIndices(Q,"groupby"),re=oe[oe.length-1];H=r.keyedContainer(Q,"transforms["+re+"].styles","target","value.visible"),I[Q.index]=H}var ee=H.get(ie._group);ee===void 0&&(ee=!0),ee!==!1&&H.set(ie._group,se),E[Q.index]=k(Q.index,"visible",Q.visible!==!1)}else{var ae=Q.visible===!1?!1:se;k(Q.index,"visible",ae)}}if(a.traceIs(g,"pie-like")){var D=p.label,F=s.indexOf(D);i==="toggle"?F===-1?s.push(D):s.splice(F,1):i==="toggleothers"&&(s=[],f.calcdata[0].forEach(function(ie){D!==ie.label&&s.push(ie.label)}),f._fullLayout.hiddenlabels&&f._fullLayout.hiddenlabels.length===s.length&&F===-1&&(s=[])),a.call("_guiRelayout",f,"hiddenlabels",s)}else{var N=b&&b.length,G=[],U;if(N)for(m=0;m<d.length;m++)U=d[m],!!U.visible&&U.legendgroup===b&&G.push(m);if(i==="toggle"){var X;switch(g.visible){case!0:X="legendonly";break;case!1:X=!1;break;case"legendonly":X=!0;break}if(N)for(m=0;m<d.length;m++)d[m].visible!==!1&&d[m].legendgroup===b&&C(d[m],X);else C(g,X)}else if(i==="toggleothers"){var z,B,j,V,K=!0;for(m=0;m<d.length;m++)if(z=d[m]===g,j=d[m].showlegend!==!0,!(z||j)&&(B=N&&d[m].legendgroup===b,!B&&d[m].visible===!0&&!a.traceIs(d[m],"notLegendIsolatable"))){K=!1;break}for(m=0;m<d.length;m++)if(d[m].visible!==!1&&!a.traceIs(d[m],"notLegendIsolatable"))switch(g.visible){case"legendonly":C(d[m],!0);break;case!0:V=K?!0:"legendonly",z=d[m]===g,j=d[m].showlegend!==!0&&!d[m].legendgroup,B=z||N&&d[m].legendgroup===b,C(d[m],B||j?!0:V);break}}for(m=0;m<I.length;m++)if(w=I[m],!!w){var te=w.constructUpdate(),$=Object.keys(te);for(x=0;x<$.length;x++)y=$[x],M=P[y]=P[y]||[],M[E[m]]=te[y]}for(T=Object.keys(P),m=0;m<T.length;m++)for(y=T[m],x=0;x<L.length;x++)P[y].hasOwnProperty(x)||(P[y][x]=void 0);a.call("_guiRestyle",f,P,L)}}},{"../../lib":778,"../../registry":911}],699:[function(e,v,S){S.isGrouped=function(a){return(a.traceorder||"").indexOf("grouped")!==-1},S.isVertical=function(a){return a.orientation!=="h"},S.isReversed=function(a){return(a.traceorder||"").indexOf("reversed")!==-1}},{}],700:[function(e,v,S){v.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":693,"./defaults":695,"./draw":696,"./style":701}],701:[function(e,v,S){var r=e("d3"),a=e("../../registry"),u=e("../../lib"),c=u.strTranslate,t=e("../drawing"),f=e("../color"),n=e("../colorscale/helpers").extractOpts,o=e("../../traces/scatter/subtypes"),l=e("../../traces/pie/style_one"),h=e("../../traces/pie/helpers").castOption,i=e("./constants"),s=12,p=5,d=2,g=10,b=5;v.exports=function(w,y,T){var M=y._fullLayout;T||(T=M.legend);var P=T.itemsizing==="constant",L=T.itemwidth,I=(L+i.itemGap*2)/2,E=c(I,0),k=function($,ie,se,Q){var H;if($+1)H=$;else if(ie&&ie.width>0)H=ie.width;else return 0;return P?Q:Math.min(H,se)};w.each(function($){var ie=r.select(this),se=u.ensureSingle(ie,"g","layers");se.style("opacity",$[0].trace.opacity);var Q=T.valign,H=$[0].lineHeight,oe=$[0].height;if(Q==="middle"||!H||!oe)se.attr("transform",null);else{var re={top:1,bottom:-1}[Q],ee=re*(.5*(H-oe+3));se.attr("transform",c(0,ee))}var ae=se.selectAll("g.legendfill").data([$]);ae.enter().append("g").classed("legendfill",!0);var fe=se.selectAll("g.legendlines").data([$]);fe.enter().append("g").classed("legendlines",!0);var de=se.selectAll("g.legendsymbols").data([$]);de.enter().append("g").classed("legendsymbols",!0),de.selectAll("g.legendpoints").data([$]).enter().append("g").classed("legendpoints",!0)}).each(te).each(F).each(G).each(N).each(X).each(V).each(j).each(C).each(D).each(z).each(B);function C($){var ie=$[0],se=ie.trace,Q=se.visible&&se.fill&&se.fill!=="none",H=o.hasLines(se),oe=se.contours,re=!1,ee=!1,ae,fe,de=n(se),pe=de.colorscale,W=de.reversescale,ue=function(Be){if(Be.size()){var qe="legendfill-"+se.uid;t.gradient(Be,y,qe,m(W),pe,"fill")}},me=function(Be){if(Be.size()){var qe="legendline-"+se.uid;t.lineGroupStyle(Be),t.gradient(Be,y,qe,m(W),pe,"stroke")}};if(oe){var be=oe.coloring;be==="lines"?re=!0:H=be==="none"||be==="heatmap"||oe.showlines,oe.type==="constraint"?Q=oe._operation!=="=":(be==="fill"||be==="heatmap")&&(ee=!0)}var Me=o.hasMarkers(se)||o.hasText(se),Pe=Q||ee,Ge=H||re,ze=Me||!Pe?"M5,0":Ge?"M5,-2":"M5,-3",Qe=r.select(this),tt=Qe.select(".legendfill").selectAll("path").data(Q||ee?[$]:[]);if(tt.enter().append("path").classed("js-fill",!0),tt.exit().remove(),tt.attr("d",ze+"h"+L+"v6h-"+L+"z").call(Q?t.fillGroupStyle:ue),H||re){var Ce=k(void 0,se.line,g,p);fe=u.minExtend(se,{line:{width:Ce}}),ae=[u.minExtend(ie,{trace:fe})]}var Ae=Qe.select(".legendlines").selectAll("path").data(H||re?[ae]:[]);Ae.enter().append("path").classed("js-line",!0),Ae.exit().remove(),Ae.attr("d",ze+(re?"l"+L+",0.0001":"h"+L)).call(H?t.lineGroupStyle:me)}function D($){var ie=$[0],se=ie.trace,Q=o.hasMarkers(se),H=o.hasText(se),oe=o.hasLines(se),re,ee;function ae(Me,Pe,Ge,ze){var Qe=u.nestedProperty(se,Me).get(),tt=u.isArrayOrTypedArray(Qe)&&Pe?Pe(Qe):Qe;if(P&&tt&&ze!==void 0&&(tt=ze),Ge){if(tt<Ge[0])return Ge[0];if(tt>Ge[1])return Ge[1]}return tt}function fe(Me){return ie._distinct&&ie.index&&Me[ie.index]?Me[ie.index]:Me[0]}if(Q||H||oe){var de={},pe={};if(Q){de.mc=ae("marker.color",fe),de.mx=ae("marker.symbol",fe),de.mo=ae("marker.opacity",u.mean,[.2,1]),de.mlc=ae("marker.line.color",fe),de.mlw=ae("marker.line.width",u.mean,[0,5],d),pe.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var W=ae("marker.size",u.mean,[2,16],s);de.ms=W,pe.marker.size=W}oe&&(pe.line={width:ae("line.width",fe,[0,10],p)}),H&&(de.tx="Aa",de.tp=ae("textposition",fe),de.ts=10,de.tc=ae("textfont.color",fe),de.tf=ae("textfont.family",fe)),re=[u.minExtend(ie,de)],ee=u.minExtend(se,pe),ee.selectedpoints=null,ee.texttemplate=null}var ue=r.select(this).select("g.legendpoints"),me=ue.selectAll("path.scatterpts").data(Q?re:[]);me.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",E),me.exit().remove(),me.call(t.pointStyle,ee,y),Q&&(re[0].mrc=3);var be=ue.selectAll("g.pointtext").data(H?re:[]);be.enter().append("g").classed("pointtext",!0).append("text").attr("transform",E),be.exit().remove(),be.selectAll("text").call(t.textPointStyle,ee,y)}function F($){var ie=$[0].trace,se=ie.type==="waterfall";if($[0]._distinct&&se){var Q=$[0].trace[$[0].dir].marker;return $[0].mc=Q.color,$[0].mlw=Q.line.width,$[0].mlc=Q.line.color,U($,this,"waterfall")}var H=[];ie.visible&&se&&(H=$[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var oe=r.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(H);oe.enter().append("path").classed("legendwaterfall",!0).attr("transform",E).style("stroke-miterlimit",1),oe.exit().remove(),oe.each(function(re){var ee=r.select(this),ae=ie[re[0]].marker,fe=k(void 0,ae.line,b,d);ee.attr("d",re[1]).style("stroke-width",fe+"px").call(f.fill,ae.color),fe&&ee.call(f.stroke,ae.line.color)})}function N($){U($,this)}function G($){U($,this,"funnel")}function U($,ie,se){var Q=$[0].trace,H=Q.marker||{},oe=H.line||{},re=se?Q.visible&&Q.type===se:a.traceIs(Q,"bar"),ee=r.select(ie).select("g.legendpoints").selectAll("path.legend"+se).data(re?[$]:[]);ee.enter().append("path").classed("legend"+se,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),ee.exit().remove(),ee.each(function(ae){var fe=r.select(this),de=ae[0],pe=k(de.mlw,H.line,b,d);fe.style("stroke-width",pe+"px").call(f.fill,de.mc||H.color),pe&&f.stroke(fe,de.mlc||oe.color)})}function X($){var ie=$[0].trace,se=r.select(this).select("g.legendpoints").selectAll("path.legendbox").data(ie.visible&&a.traceIs(ie,"box-violin")?[$]:[]);se.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),se.exit().remove(),se.each(function(){var Q=r.select(this);if((ie.boxpoints==="all"||ie.points==="all")&&f.opacity(ie.fillcolor)===0&&f.opacity((ie.line||{}).color)===0){var H=u.minExtend(ie,{marker:{size:P?s:u.constrain(ie.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});se.call(t.pointStyle,H,y)}else{var oe=k(void 0,ie.line,b,d);Q.style("stroke-width",oe+"px").call(f.fill,ie.fillcolor),oe&&f.stroke(Q,ie.line.color)}})}function z($){var ie=$[0].trace,se=r.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(ie.visible&&ie.type==="candlestick"?[$,$]:[]);se.enter().append("path").classed("legendcandle",!0).attr("d",function(Q,H){return H?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",E).style("stroke-miterlimit",1),se.exit().remove(),se.each(function(Q,H){var oe=r.select(this),re=ie[H?"increasing":"decreasing"],ee=k(void 0,re.line,b,d);oe.style("stroke-width",ee+"px").call(f.fill,re.fillcolor),ee&&f.stroke(oe,re.line.color)})}function B($){var ie=$[0].trace,se=r.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(ie.visible&&ie.type==="ohlc"?[$,$]:[]);se.enter().append("path").classed("legendohlc",!0).attr("d",function(Q,H){return H?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",E).style("stroke-miterlimit",1),se.exit().remove(),se.each(function(Q,H){var oe=r.select(this),re=ie[H?"increasing":"decreasing"],ee=k(void 0,re.line,b,d);oe.style("fill","none").call(t.dashLine,re.line.dash,ee),ee&&f.stroke(oe,re.line.color)})}function j($){K($,this,"pie")}function V($){K($,this,"funnelarea")}function K($,ie,se){var Q=$[0],H=Q.trace,oe=se?H.visible&&H.type===se:a.traceIs(H,se),re=r.select(ie).select("g.legendpoints").selectAll("path.legend"+se).data(oe?[$]:[]);if(re.enter().append("path").classed("legend"+se,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),re.exit().remove(),re.size()){var ee=(H.marker||{}).line,ae=k(h(ee.width,Q.pts),ee,b,d),fe=u.minExtend(H,{marker:{line:{width:ae}}});fe.marker.line.color=ee.color;var de=u.minExtend(Q,{trace:fe});l(re,de,fe)}}function te($){var ie=$[0].trace,se,Q=[];if(ie.visible)switch(ie.type){case"histogram2d":case"heatmap":Q=[["M-15,-2V4H15V-2Z"]],se=!0;break;case"choropleth":case"choroplethmapbox":Q=[["M-6,-6V6H6V-6Z"]],se=!0;break;case"densitymapbox":Q=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],se="radial";break;case"cone":Q=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],se=!1;break;case"streamtube":Q=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],se=!1;break;case"surface":Q=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],se=!0;break;case"mesh3d":Q=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],se=!1;break;case"volume":Q=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],se=!0;break;case"isosurface":Q=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],se=!1;break}var H=r.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(Q);H.enter().append("path").classed("legend3dandfriends",!0).attr("transform",E).style("stroke-miterlimit",1),H.exit().remove(),H.each(function(oe,re){var ee=r.select(this),ae=n(ie),fe=ae.colorscale,de=ae.reversescale,pe=function(be){if(be.size()){var Me="legendfill-"+ie.uid;t.gradient(be,y,Me,m(de,se==="radial"),fe,"fill")}},W;if(fe){if(!se){var me=fe.length;W=re===0?fe[de?me-1:0][1]:re===1?fe[de?0:me-1][1]:fe[Math.floor((me-1)/2)][1]}}else{var ue=ie.vertexcolor||ie.facecolor||ie.color;W=u.isArrayOrTypedArray(ue)?ue[re]||ue[0]:ue}ee.attr("d",oe[0]),W?ee.call(f.fill,W):ee.call(pe)})}};function m(x,w){var y=w?"radial":"horizontal";return y+(x?"":"reversed")}},{"../../lib":778,"../../registry":911,"../../traces/pie/helpers":1166,"../../traces/pie/style_one":1172,"../../traces/scatter/subtypes":1212,"../color":643,"../colorscale/helpers":654,"../drawing":665,"./constants":694,d3:169}],702:[function(e,v,S){var r=e("../../registry"),a=e("../../plots/plots"),u=e("../../plots/cartesian/axis_ids"),c=e("../../fonts/ploticon"),t=e("../shapes/draw").eraseActiveShape,f=e("../../lib"),n=f._,o=v.exports={};o.toImage={name:"toImage",title:function(y){var T=y._context.toImageButtonOptions||{},M=T.format||"png";return M==="png"?n(y,"Download plot as a png"):n(y,"Download plot")},icon:c.camera,click:function(y){var T=y._context.toImageButtonOptions,M={format:T.format||"png"};f.notifier(n(y,"Taking snapshot - this may take a few seconds"),"long"),M.format!=="svg"&&f.isIE()&&(f.notifier(n(y,"IE only supports svg.  Changing format to svg."),"long"),M.format="svg"),["filename","width","height","scale"].forEach(function(P){P in T&&(M[P]=T[P])}),r.call("downloadImage",y,M).then(function(P){f.notifier(n(y,"Snapshot succeeded")+" - "+P,"long")}).catch(function(){f.notifier(n(y,"Sorry, there was a problem downloading your snapshot!"),"long")})}},o.sendDataToCloud={name:"sendDataToCloud",title:function(y){return n(y,"Edit in Chart Studio")},icon:c.disk,click:function(y){a.sendDataToCloud(y)}},o.editInChartStudio={name:"editInChartStudio",title:function(y){return n(y,"Edit in Chart Studio")},icon:c.pencil,click:function(y){a.sendDataToCloud(y)}},o.zoom2d={name:"zoom2d",title:function(y){return n(y,"Zoom")},attr:"dragmode",val:"zoom",icon:c.zoombox,click:l},o.pan2d={name:"pan2d",title:function(y){return n(y,"Pan")},attr:"dragmode",val:"pan",icon:c.pan,click:l},o.select2d={name:"select2d",title:function(y){return n(y,"Box Select")},attr:"dragmode",val:"select",icon:c.selectbox,click:l},o.lasso2d={name:"lasso2d",title:function(y){return n(y,"Lasso Select")},attr:"dragmode",val:"lasso",icon:c.lasso,click:l},o.drawclosedpath={name:"drawclosedpath",title:function(y){return n(y,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:c.drawclosedpath,click:l},o.drawopenpath={name:"drawopenpath",title:function(y){return n(y,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:c.drawopenpath,click:l},o.drawline={name:"drawline",title:function(y){return n(y,"Draw line")},attr:"dragmode",val:"drawline",icon:c.drawline,click:l},o.drawrect={name:"drawrect",title:function(y){return n(y,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:c.drawrect,click:l},o.drawcircle={name:"drawcircle",title:function(y){return n(y,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:c.drawcircle,click:l},o.eraseshape={name:"eraseshape",title:function(y){return n(y,"Erase active shape")},icon:c.eraseshape,click:t},o.zoomIn2d={name:"zoomIn2d",title:function(y){return n(y,"Zoom in")},attr:"zoom",val:"in",icon:c.zoom_plus,click:l},o.zoomOut2d={name:"zoomOut2d",title:function(y){return n(y,"Zoom out")},attr:"zoom",val:"out",icon:c.zoom_minus,click:l},o.autoScale2d={name:"autoScale2d",title:function(y){return n(y,"Autoscale")},attr:"zoom",val:"auto",icon:c.autoscale,click:l},o.resetScale2d={name:"resetScale2d",title:function(y){return n(y,"Reset axes")},attr:"zoom",val:"reset",icon:c.home,click:l},o.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(y){return n(y,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:c.tooltip_basic,gravity:"ne",click:l},o.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(y){return n(y,"Compare data on hover")},attr:"hovermode",val:function(y){return y._fullLayout._isHoriz?"y":"x"},icon:c.tooltip_compare,gravity:"ne",click:l};function l(y,T){var M=T.currentTarget,P=M.getAttribute("data-attr"),L=M.getAttribute("data-val")||!0,I=y._fullLayout,E={},k=u.list(y,null,!0),C=I._cartesianSpikesEnabled,D,F;if(P==="zoom"){var N=L==="in"?.5:2,G=(1+N)/2,U=(1-N)/2,X;for(F=0;F<k.length;F++)if(D=k[F],!D.fixedrange)if(X=D._name,L==="auto")E[X+".autorange"]=!0;else if(L==="reset"){if(D._rangeInitial===void 0)E[X+".autorange"]=!0;else{var z=D._rangeInitial.slice();E[X+".range[0]"]=z[0],E[X+".range[1]"]=z[1]}D._showSpikeInitial!==void 0&&(E[X+".showspikes"]=D._showSpikeInitial,C==="on"&&!D._showSpikeInitial&&(C="off"))}else{var B=[D.r2l(D.range[0]),D.r2l(D.range[1])],j=[G*B[0]+U*B[1],G*B[1]+U*B[0]];E[X+".range[0]"]=D.l2r(j[0]),E[X+".range[1]"]=D.l2r(j[1])}}else P==="hovermode"&&(L==="x"||L==="y")&&(L=I._isHoriz?"y":"x",M.setAttribute("data-val",L)),E[P]=L;I._cartesianSpikesEnabled=C,r.call("_guiRelayout",y,E)}o.zoom3d={name:"zoom3d",title:function(y){return n(y,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:c.zoombox,click:h},o.pan3d={name:"pan3d",title:function(y){return n(y,"Pan")},attr:"scene.dragmode",val:"pan",icon:c.pan,click:h},o.orbitRotation={name:"orbitRotation",title:function(y){return n(y,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:c["3d_rotate"],click:h},o.tableRotation={name:"tableRotation",title:function(y){return n(y,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:c["z-axis"],click:h};function h(y,T){for(var M=T.currentTarget,P=M.getAttribute("data-attr"),L=M.getAttribute("data-val")||!0,I=y._fullLayout._subplots.gl3d||[],E={},k=P.split("."),C=0;C<I.length;C++)E[I[C]+"."+k[1]]=L;var D=L==="pan"?L:"zoom";E.dragmode=D,r.call("_guiRelayout",y,E)}o.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(y){return n(y,"Reset camera to default")},attr:"resetDefault",icon:c.home,click:i},o.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(y){return n(y,"Reset camera to last save")},attr:"resetLastSave",icon:c.movie,click:i};function i(y,T){for(var M=T.currentTarget,P=M.getAttribute("data-attr"),L=P==="resetLastSave",I=P==="resetDefault",E=y._fullLayout,k=E._subplots.gl3d||[],C={},D=0;D<k.length;D++){var F=k[D],N=F+".camera",G=F+".aspectratio",U=F+".aspectmode",X=E[F]._scene,z;L?(C[N+".up"]=X.viewInitial.up,C[N+".eye"]=X.viewInitial.eye,C[N+".center"]=X.viewInitial.center,z=!0):I&&(C[N+".up"]=null,C[N+".eye"]=null,C[N+".center"]=null,z=!0),z&&(C[G+".x"]=X.viewInitial.aspectratio.x,C[G+".y"]=X.viewInitial.aspectratio.y,C[G+".z"]=X.viewInitial.aspectratio.z,C[U]=X.viewInitial.aspectmode)}r.call("_guiRelayout",y,C)}o.hoverClosest3d={name:"hoverClosest3d",title:function(y){return n(y,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:c.tooltip_basic,gravity:"ne",click:p};function s(y,T){var M=T.currentTarget,P=M._previousVal,L=y._fullLayout,I=L._subplots.gl3d||[],E=["xaxis","yaxis","zaxis"],k={},C={};if(P)C=P,M._previousVal=null;else{for(var D=0;D<I.length;D++){var F=I[D],N=L[F],G=F+".hovermode";k[G]=N.hovermode,C[G]=!1;for(var U=0;U<3;U++){var X=E[U],z=F+"."+X+".showspikes";C[z]=!1,k[z]=N[X].showspikes}}M._previousVal=k}return C}function p(y,T){var M=s(y,T);r.call("_guiRelayout",y,M)}o.zoomInGeo={name:"zoomInGeo",title:function(y){return n(y,"Zoom in")},attr:"zoom",val:"in",icon:c.zoom_plus,click:d},o.zoomOutGeo={name:"zoomOutGeo",title:function(y){return n(y,"Zoom out")},attr:"zoom",val:"out",icon:c.zoom_minus,click:d},o.resetGeo={name:"resetGeo",title:function(y){return n(y,"Reset")},attr:"reset",val:null,icon:c.autoscale,click:d},o.hoverClosestGeo={name:"hoverClosestGeo",title:function(y){return n(y,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:c.tooltip_basic,gravity:"ne",click:b};function d(y,T){for(var M=T.currentTarget,P=M.getAttribute("data-attr"),L=M.getAttribute("data-val")||!0,I=y._fullLayout,E=I._subplots.geo||[],k=0;k<E.length;k++){var C=E[k],D=I[C];if(P==="zoom"){var F=D.projection.scale,N=L==="in"?2*F:.5*F;r.call("_guiRelayout",y,C+".projection.scale",N)}}P==="reset"&&w(y,"geo")}o.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(y){return n(y,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:c.tooltip_basic,gravity:"ne",click:b},o.hoverClosestPie={name:"hoverClosestPie",title:function(y){return n(y,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:c.tooltip_basic,gravity:"ne",click:b};function g(y){var T=y._fullLayout;return T.hovermode?!1:T._has("cartesian")?T._isHoriz?"y":"x":"closest"}function b(y){var T=g(y);r.call("_guiRelayout",y,"hovermode",T)}o.resetViewSankey={name:"resetSankeyGroup",title:function(y){return n(y,"Reset view")},icon:c.home,click:function(y){for(var T={"node.groups":[],"node.x":[],"node.y":[]},M=0;M<y._fullData.length;M++){var P=y._fullData[M]._viewInitial;T["node.groups"].push(P.node.groups.slice()),T["node.x"].push(P.node.x.slice()),T["node.y"].push(P.node.y.slice())}r.call("restyle",y,T)}},o.toggleHover={name:"toggleHover",title:function(y){return n(y,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:c.tooltip_basic,gravity:"ne",click:function(y,T){var M=s(y,T);M.hovermode=g(y),r.call("_guiRelayout",y,M)}},o.resetViews={name:"resetViews",title:function(y){return n(y,"Reset views")},icon:c.home,click:function(y,T){var M=T.currentTarget;M.setAttribute("data-attr","zoom"),M.setAttribute("data-val","reset"),l(y,T),M.setAttribute("data-attr","resetLastSave"),i(y,T),w(y,"geo"),w(y,"mapbox")}},o.toggleSpikelines={name:"toggleSpikelines",title:function(y){return n(y,"Toggle Spike Lines")},icon:c.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(y){var T=y._fullLayout,M=T._cartesianSpikesEnabled;T._cartesianSpikesEnabled=M==="on"?"off":"on",r.call("_guiRelayout",y,m(y))}};function m(y){for(var T=y._fullLayout,M=T._cartesianSpikesEnabled==="on",P=u.list(y,null,!0),L={},I=0;I<P.length;I++){var E=P[I];L[E._name+".showspikes"]=M?!0:E._showSpikeInitial}return L}o.resetViewMapbox={name:"resetViewMapbox",title:function(y){return n(y,"Reset view")},attr:"reset",icon:c.home,click:function(y){w(y,"mapbox")}},o.zoomInMapbox={name:"zoomInMapbox",title:function(y){return n(y,"Zoom in")},attr:"zoom",val:"in",icon:c.zoom_plus,click:x},o.zoomOutMapbox={name:"zoomOutMapbox",title:function(y){return n(y,"Zoom out")},attr:"zoom",val:"out",icon:c.zoom_minus,click:x};function x(y,T){for(var M=T.currentTarget,P=M.getAttribute("data-val"),L=y._fullLayout,I=L._subplots.mapbox||[],E=1.05,k={},C=0;C<I.length;C++){var D=I[C],F=L[D].zoom,N=P==="in"?E*F:F/E;k[D+".zoom"]=N}r.call("_guiRelayout",y,k)}function w(y,T){for(var M=y._fullLayout,P=M._subplots[T]||[],L={},I=0;I<P.length;I++)for(var E=P[I],k=M[E]._subplot,C=k.viewInitial,D=Object.keys(C),F=0;F<D.length;F++){var N=D[F];L[E+"."+N]=C[N]}r.call("_guiRelayout",y,L)}},{"../../fonts/ploticon":757,"../../lib":778,"../../plots/cartesian/axis_ids":831,"../../plots/plots":891,"../../registry":911,"../shapes/draw":724}],703:[function(e,v,S){S.manage=e("./manage")},{"./manage":704}],704:[function(e,v,S){var r=e("../../plots/cartesian/axis_ids"),a=e("../../traces/scatter/subtypes"),u=e("../../registry"),c=e("../fx/helpers").isUnifiedHover,t=e("./modebar"),f=e("./buttons");v.exports=function(g){var b=g._fullLayout,m=g._context,x=b._modeBar;if(!m.displayModeBar&&!m.watermark){x&&(x.destroy(),delete b._modeBar);return}if(!Array.isArray(m.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(m.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var w=m.modeBarButtons,y;Array.isArray(w)&&w.length?y=p(w):!m.displayModeBar&&m.watermark?y=[]:y=o(g),x?x.update(g,y):b._modeBar=t(g,y)};var n=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"];function o(d){var g=d._fullLayout,b=d._fullData,m=d._context,x=m.modeBarButtonsToRemove,w=m.modeBarButtonsToAdd,y=g._has("cartesian"),T=g._has("gl3d"),M=g._has("geo"),P=g._has("pie"),L=g._has("funnelarea"),I=g._has("gl2d"),E=g._has("ternary"),k=g._has("mapbox"),C=g._has("polar"),D=g._has("sankey"),F=l(g),N=c(g.hovermode),G=[];function U(ie){if(!!ie.length){for(var se=[],Q=0;Q<ie.length;Q++){var H=ie[Q];x.indexOf(H)===-1&&se.push(f[H])}G.push(se)}}var X=["toImage"];m.showEditInChartStudio?X.push("editInChartStudio"):m.showSendToCloud&&X.push("sendDataToCloud"),U(X);var z=[],B=[],j=[],V=[];if((y||I||P||L||E)+M+T+k+C>1?(B=["toggleHover"],j=["resetViews"]):M?(z=["zoomInGeo","zoomOutGeo"],B=["hoverClosestGeo"],j=["resetGeo"]):T?(B=["hoverClosest3d"],j=["resetCameraDefault3d","resetCameraLastSave3d"]):k?(z=["zoomInMapbox","zoomOutMapbox"],B=["toggleHover"],j=["resetViewMapbox"]):I?B=["hoverClosestGl2d"]:P?B=["hoverClosestPie"]:D?(B=["hoverClosestCartesian","hoverCompareCartesian"],j=["resetViewSankey"]):B=["toggleHover"],y&&(B=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(i(b)||N)&&(B=[]),(y||I)&&!F&&(z=["zoomIn2d","zoomOut2d","autoScale2d"],j[0]!=="resetViews"&&(j=["resetScale2d"])),T?V=["zoom3d","pan3d","orbitRotation","tableRotation"]:(y||I)&&!F||E?V=["zoom2d","pan2d"]:k||M?V=["pan2d"]:C&&(V=["zoom2d"]),h(b)&&V.push("select2d","lasso2d"),Array.isArray(w)){for(var K=[],te=0;te<w.length;te++){var $=w[te];typeof $=="string"?n.indexOf($)!==-1&&(g._has("mapbox")||g._has("cartesian"))&&V.push($):K.push($)}w=K}return U(V),U(z.concat(j)),U(B),s(G,w)}function l(d){for(var g=r.list({_fullLayout:d},null,!0),b=0;b<g.length;b++)if(!g[b].fixedrange)return!1;return!0}function h(d){for(var g=!1,b=0;b<d.length&&!g;b++){var m=d[b];!m._module||!m._module.selectPoints||(u.traceIs(m,"scatter-like")?(a.hasMarkers(m)||a.hasText(m))&&(g=!0):u.traceIs(m,"box-violin")?(m.boxpoints==="all"||m.points==="all")&&(g=!0):g=!0)}return g}function i(d){for(var g=0;g<d.length;g++)if(!u.traceIs(d[g],"noHover"))return!1;return!0}function s(d,g){if(g.length)if(Array.isArray(g[0]))for(var b=0;b<g.length;b++)d.push(g[b]);else d.push(g);return d}function p(d){for(var g=0;g<d.length;g++)for(var b=d[g],m=0;m<b.length;m++){var x=b[m];if(typeof x=="string")if(f[x]!==void 0)d[g][m]=f[x];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return d}},{"../../plots/cartesian/axis_ids":831,"../../registry":911,"../../traces/scatter/subtypes":1212,"../fx/helpers":679,"./buttons":702,"./modebar":705}],705:[function(e,v,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("../../lib"),c=e("../../fonts/ploticon"),t=new DOMParser;function f(l){this.container=l.container,this.element=document.createElement("div"),this.update(l.graphInfo,l.buttons),this.container.appendChild(this.element)}var n=f.prototype;n.update=function(l,h){this.graphInfo=l;var i=this.graphInfo._context,s=this.graphInfo._fullLayout,p="modebar-"+s._uid;this.element.setAttribute("id",p),this._uid=p,this.element.className="modebar",i.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),s.modebar.orientation==="v"&&(this.element.className+=" vertical",h=h.reverse());var d=s.modebar,g=i.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";u.deleteRelatedStyleRule(p),u.addRelatedStyleRule(p,g+"#"+p+" .modebar-group","background-color: "+d.bgcolor),u.addRelatedStyleRule(p,"#"+p+" .modebar-btn .icon path","fill: "+d.color),u.addRelatedStyleRule(p,"#"+p+" .modebar-btn:hover .icon path","fill: "+d.activecolor),u.addRelatedStyleRule(p,"#"+p+" .modebar-btn.active .icon path","fill: "+d.activecolor);var b=!this.hasButtons(h),m=this.hasLogo!==i.displaylogo,x=this.locale!==i.locale;if(this.locale=i.locale,(b||m||x)&&(this.removeAllButtons(),this.updateButtons(h),i.watermark||i.displaylogo)){var w=this.getLogo();i.watermark&&(w.className=w.className+" watermark"),s.modebar.orientation==="v"?this.element.insertBefore(w,this.element.childNodes[0]):this.element.appendChild(w),this.hasLogo=!0}this.updateActiveButton()},n.updateButtons=function(l){var h=this;this.buttons=l,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(i){var s=h.createGroup();i.forEach(function(p){var d=p.name;if(!d)throw new Error("must provide button 'name' in button config");if(h.buttonsNames.indexOf(d)!==-1)throw new Error("button name '"+d+"' is taken");h.buttonsNames.push(d);var g=h.createButton(p);h.buttonElements.push(g),s.appendChild(g)}),h.element.appendChild(s)})},n.createGroup=function(){var l=document.createElement("div");return l.className="modebar-group",l},n.createButton=function(l){var h=this,i=document.createElement("a");i.setAttribute("rel","tooltip"),i.className="modebar-btn";var s=l.title;s===void 0?s=l.name:typeof s=="function"&&(s=s(this.graphInfo)),(s||s===0)&&i.setAttribute("data-title",s),l.attr!==void 0&&i.setAttribute("data-attr",l.attr);var p=l.val;p!==void 0&&(typeof p=="function"&&(p=p(this.graphInfo)),i.setAttribute("data-val",p));var d=l.click;if(typeof d!="function")throw new Error("must provide button 'click' function in button config");i.addEventListener("click",function(b){l.click(h.graphInfo,b),h.updateActiveButton(b.currentTarget)}),i.setAttribute("data-toggle",l.toggle||!1),l.toggle&&r.select(i).classed("active",!0);var g=l.icon;return typeof g=="function"?i.appendChild(g()):i.appendChild(this.createIcon(g||c.question)),i.setAttribute("data-gravity",l.gravity||"n"),i},n.createIcon=function(l){var h=a(l.height)?Number(l.height):l.ascent-l.descent,i="http://www.w3.org/2000/svg",s;if(l.path){s=document.createElementNS(i,"svg"),s.setAttribute("viewBox",[0,0,l.width,h].join(" ")),s.setAttribute("class","icon");var p=document.createElementNS(i,"path");p.setAttribute("d",l.path),l.transform?p.setAttribute("transform",l.transform):l.ascent!==void 0&&p.setAttribute("transform","matrix(1 0 0 -1 0 "+l.ascent+")"),s.appendChild(p)}if(l.svg){var d=t.parseFromString(l.svg,"application/xml");s=d.childNodes[0]}return s.setAttribute("height","1em"),s.setAttribute("width","1em"),s},n.updateActiveButton=function(l){var h=this.graphInfo._fullLayout,i=l!==void 0?l.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var p=s.getAttribute("data-val")||!0,d=s.getAttribute("data-attr"),g=s.getAttribute("data-toggle")==="true",b=r.select(s);if(g)d===i&&b.classed("active",!b.classed("active"));else{var m=d===null?d:u.nestedProperty(h,d).get();b.classed("active",m===p)}})},n.hasButtons=function(l){var h=this.buttons;if(!h||l.length!==h.length)return!1;for(var i=0;i<l.length;++i){if(l[i].length!==h[i].length)return!1;for(var s=0;s<l[i].length;s++)if(l[i][s].name!==h[i][s].name)return!1}return!0},n.getLogo=function(){var l=this.createGroup(),h=document.createElement("a");return h.href="https://plotly.com/",h.target="_blank",h.setAttribute("data-title",u._(this.graphInfo,"Produced with Plotly")),h.className="modebar-btn plotlyjsicon modebar-btn--logo",h.appendChild(this.createIcon(c.newplotlylogo)),l.appendChild(h),l},n.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},n.destroy=function(){u.removeElement(this.container.querySelector(".modebar")),u.deleteRelatedStyleRule(this._uid)};function o(l,h){var i=l._fullLayout,s=new f({graphInfo:l,container:i._modebardiv.node(),buttons:h});return i._privateplot&&r.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}v.exports=o},{"../../fonts/ploticon":757,"../../lib":778,d3:169,"fast-isnumeric":241}],706:[function(e,v,S){var r=e("../../plots/font_attributes"),a=e("../color/attributes"),u=e("../../plot_api/plot_template").templatedArray,c=u("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});v.exports={visible:{valType:"boolean",editType:"plot"},buttons:c,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:r({editType:"plot"}),bgcolor:{valType:"color",dflt:a.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":817,"../../plots/font_attributes":856,"../color/attributes":642}],707:[function(e,v,S){v.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],708:[function(e,v,S){var r=e("../../lib"),a=e("../color"),u=e("../../plot_api/plot_template"),c=e("../../plots/array_container_defaults"),t=e("./attributes"),f=e("./constants");v.exports=function(h,i,s,p,d){var g=h.rangeselector||{},b=u.newContainer(i,"rangeselector");function m(M,P){return r.coerce(g,b,t,M,P)}var x=c(g,b,{name:"buttons",handleItemDefaults:n,calendar:d}),w=m("visible",x.length>0);if(w){var y=o(i,s,p);m("x",y[0]),m("y",y[1]),r.noneOrAll(h,i,["x","y"]),m("xanchor"),m("yanchor"),r.coerceFont(m,"font",s.font);var T=m("bgcolor");m("activecolor",a.contrast(T,f.lightAmount,f.darkAmount)),m("bordercolor"),m("borderwidth")}};function n(l,h,i,s){var p=s.calendar;function d(m,x){return r.coerce(l,h,t.buttons,m,x)}var g=d("visible");if(g){var b=d("step");b!=="all"&&(p&&p!=="gregorian"&&(b==="month"||b==="year")?h.stepmode="backward":d("stepmode"),d("count")),d("label")}}function o(l,h,i){for(var s=i.filter(function(b){return h[b].anchor===l._id}),p=0,d=0;d<s.length;d++){var g=h[s[d]].domain;g&&(p=Math.max(g[1],p))}return[l.domain[0],p+f.yPad]}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../color":643,"./attributes":706,"./constants":707}],709:[function(e,v,S){var r=e("d3"),a=e("../../registry"),u=e("../../plots/plots"),c=e("../color"),t=e("../drawing"),f=e("../../lib"),n=f.strTranslate,o=e("../../lib/svg_text_utils"),l=e("../../plots/cartesian/axis_ids"),h=e("../../constants/alignment"),i=h.LINE_SPACING,s=h.FROM_TL,p=h.FROM_BR,d=e("./constants"),g=e("./get_update_object");v.exports=function(I){var E=I._fullLayout,k=E._infolayer.selectAll(".rangeselector").data(b(I),m);k.enter().append("g").classed("rangeselector",!0),k.exit().remove(),k.style({cursor:"pointer","pointer-events":"all"}),k.each(function(C){var D=r.select(this),F=C,N=F.rangeselector,G=D.selectAll("g.button").data(f.filterVisible(N.buttons));G.enter().append("g").classed("button",!0),G.exit().remove(),G.each(function(U){var X=r.select(this),z=g(F,U);U._isActive=x(F,U,z),X.call(w,N,U),X.call(T,N,U,I),X.on("click",function(){I._dragged||a.call("_guiRelayout",I,z)}),X.on("mouseover",function(){U._isHovered=!0,X.call(w,N,U)}),X.on("mouseout",function(){U._isHovered=!1,X.call(w,N,U)})}),P(I,G,N,F._name,D)})};function b(L){for(var I=l.list(L,"x",!0),E=[],k=0;k<I.length;k++){var C=I[k];C.rangeselector&&C.rangeselector.visible&&E.push(C)}return E}function m(L){return L._id}function x(L,I,E){if(I.step==="all")return L.autorange===!0;var k=Object.keys(E);return L.range[0]===E[k[0]]&&L.range[1]===E[k[1]]}function w(L,I,E){var k=f.ensureSingle(L,"rect","selector-rect",function(C){C.attr("shape-rendering","crispEdges")});k.attr({rx:d.rx,ry:d.ry}),k.call(c.stroke,I.bordercolor).call(c.fill,y(I,E)).style("stroke-width",I.borderwidth+"px")}function y(L,I){return I._isActive||I._isHovered?L.activecolor:L.bgcolor}function T(L,I,E,k){function C(F){o.convertToTspans(F,k)}var D=f.ensureSingle(L,"text","selector-text",function(F){F.attr("text-anchor","middle")});D.call(t.font,I.font).text(M(E,k._fullLayout._meta)).call(C)}function M(L,I){return L.label?I?f.templateString(L.label,I):L.label:L.step==="all"?"all":L.count+L.step.charAt(0)}function P(L,I,E,k,C){var D=0,F=0,N=E.borderwidth;I.each(function(){var j=r.select(this),V=j.select(".selector-text"),K=E.font.size*i,te=Math.max(K*o.lineCount(V),16)+3;F=Math.max(F,te)}),I.each(function(){var j=r.select(this),V=j.select(".selector-rect"),K=j.select(".selector-text"),te=K.node()&&t.bBox(K.node()).width,$=E.font.size*i,ie=o.lineCount(K),se=Math.max(te+10,d.minButtonWidth);j.attr("transform",n(N+D,N)),V.attr({x:0,y:0,width:se,height:F}),o.positionText(K,se/2,F/2-(ie-1)*$/2+3),D+=se+5});var G=L._fullLayout._size,U=G.l+G.w*E.x,X=G.t+G.h*(1-E.y),z="left";f.isRightAnchor(E)&&(U-=D,z="right"),f.isCenterAnchor(E)&&(U-=D/2,z="center");var B="top";f.isBottomAnchor(E)&&(X-=F,B="bottom"),f.isMiddleAnchor(E)&&(X-=F/2,B="middle"),D=Math.ceil(D),F=Math.ceil(F),U=Math.round(U),X=Math.round(X),u.autoMargin(L,k+"-range-selector",{x:E.x,y:E.y,l:D*s[z],r:D*p[z],b:F*p[B],t:F*s[B]}),C.attr("transform",n(U,X))}},{"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axis_ids":831,"../../plots/plots":891,"../../registry":911,"../color":643,"../drawing":665,"./constants":707,"./get_update_object":710,d3:169}],710:[function(e,v,S){var r=e("d3");v.exports=function(c,t){var f=c._name,n={};if(t.step==="all")n[f+".autorange"]=!0;else{var o=a(c,t);n[f+".range[0]"]=o[0],n[f+".range[1]"]=o[1]}return n};function a(u,c){var t=u.range,f=new Date(u.r2l(t[1])),n=c.step,o=c.count,l;switch(c.stepmode){case"backward":l=u.l2r(+r.time[n].utc.offset(f,-o));break;case"todate":var h=r.time[n].utc.offset(f,-o);l=u.l2r(+r.time[n].utc.ceil(h));break}var i=t[1];return[l,i]}},{d3:169}],711:[function(e,v,S){v.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":706,"./defaults":708,"./draw":709}],712:[function(e,v,S){var r=e("../color/attributes");v.exports={bgcolor:{valType:"color",dflt:r.background,editType:"plot"},bordercolor:{valType:"color",dflt:r.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":642}],713:[function(e,v,S){var r=e("../../plots/cartesian/axis_ids").list,a=e("../../plots/cartesian/autorange").getAutoRange,u=e("./constants");v.exports=function(t){for(var f=r(t,"x",!0),n=0;n<f.length;n++){var o=f[n],l=o[u.name];l&&l.visible&&l.autorange&&(l._input.autorange=!0,l._input.range=l.range=a(t,o))}}},{"../../plots/cartesian/autorange":827,"../../plots/cartesian/axis_ids":831,"./constants":714}],714:[function(e,v,S){v.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],715:[function(e,v,S){var r=e("../../lib"),a=e("../../plot_api/plot_template"),u=e("../../plots/cartesian/axis_ids"),c=e("./attributes"),t=e("./oppaxis_attributes");v.exports=function(n,o,l){var h=n[l],i=o[l];if(!(h.rangeslider||o._requestRangeslider[i._id]))return;r.isPlainObject(h.rangeslider)||(h.rangeslider={});var s=h.rangeslider,p=a.newContainer(i,"rangeslider");function d(k,C){return r.coerce(s,p,c,k,C)}var g,b;function m(k,C){return r.coerce(g,b,t,k,C)}var x=d("visible");if(!!x){d("bgcolor",o.plot_bgcolor),d("bordercolor"),d("borderwidth"),d("thickness"),d("autorange",!i.isValidRange(s.range)),d("range");var w=o._subplots;if(w)for(var y=w.cartesian.filter(function(k){return k.substr(0,k.indexOf("y"))===u.name2id(l)}).map(function(k){return k.substr(k.indexOf("y"),k.length)}),T=r.simpleMap(y,u.id2name),M=0;M<T.length;M++){var P=T[M];g=s[P]||{},b=a.newContainer(p,P,"yaxis");var L=o[P],I;g.range&&L.isValidRange(g.range)&&(I="fixed");var E=m("rangemode",I);E!=="match"&&m("range",L.range.slice())}p._input=s}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/cartesian/axis_ids":831,"./attributes":712,"./oppaxis_attributes":719}],716:[function(e,v,S){var r=e("d3"),a=e("../../registry"),u=e("../../plots/plots"),c=e("../../lib"),t=c.strTranslate,f=e("../drawing"),n=e("../color"),o=e("../titles"),l=e("../../plots/cartesian"),h=e("../../plots/cartesian/axis_ids"),i=e("../dragelement"),s=e("../../lib/setcursor"),p=e("./constants");v.exports=function(L){for(var I=L._fullLayout,E=I._rangeSliderData,k=0;k<E.length;k++){var C=E[k][p.name];C._clipId=C._id+"-"+I._uid}function D(N){return N._name}var F=I._infolayer.selectAll("g."+p.containerClassName).data(E,D);F.exit().each(function(N){var G=N[p.name];I._topdefs.select("#"+G._clipId).remove()}).remove(),E.length!==0&&(F.enter().append("g").classed(p.containerClassName,!0).attr("pointer-events","all"),F.each(function(N){var G=r.select(this),U=N[p.name],X=I[h.id2name(N.anchor)],z=U[h.id2name(N.anchor)];if(U.range){var B=c.simpleMap(U.range,N.r2l),j=c.simpleMap(N.range,N.r2l),V;j[0]<j[1]?V=[Math.min(B[0],j[0]),Math.max(B[1],j[1])]:V=[Math.max(B[0],j[0]),Math.min(B[1],j[1])],U.range=U._input.range=c.simpleMap(V,N.l2r)}N.cleanRange("rangeslider.range");var K=I._size,te=N.domain;U._width=K.w*(te[1]-te[0]);var $=Math.round(K.l+K.w*te[0]),ie=Math.round(K.t+K.h*(1-N._counterDomainMin)+(N.side==="bottom"?N._depth:0)+U._offsetShift+p.extraPad);G.attr("transform",t($,ie)),U._rl=c.simpleMap(U.range,N.r2l);var se=U._rl[0],Q=U._rl[1],H=Q-se;if(U.p2d=function(me){return me/U._width*H+se},U.d2p=function(me){return(me-se)/H*U._width},N.rangebreaks){var oe=N.locateBreaks(se,Q);if(oe.length){var re,ee,ae=0;for(re=0;re<oe.length;re++)ee=oe[re],ae+=ee.max-ee.min;var fe=U._width/(Q-se-ae),de=[-fe*se];for(re=0;re<oe.length;re++)ee=oe[re],de.push(de[de.length-1]-fe*(ee.max-ee.min));for(U.d2p=function(me){for(var be=de[0],Me=0;Me<oe.length;Me++){var Pe=oe[Me];if(me>=Pe.max)be=de[Me+1];else if(me<Pe.min)break}return be+fe*me},re=0;re<oe.length;re++)ee=oe[re],ee.pmin=U.d2p(ee.min),ee.pmax=U.d2p(ee.max);U.p2d=function(me){for(var be=de[0],Me=0;Me<oe.length;Me++){var Pe=oe[Me];if(me>=Pe.pmax)be=de[Me+1];else if(me<Pe.pmin)break}return(me-be)/fe}}}if(z.rangemode!=="match"){var pe=X.r2l(z.range[0]),W=X.r2l(z.range[1]),ue=W-pe;U.d2pOppAxis=function(me){return(me-pe)/ue*U._height}}G.call(m,L,N,U).call(x,L,N,U).call(w,L,N,U).call(T,L,N,U,z).call(M,L,N,U).call(P,L,N,U),d(G,L,N,U),b(G,L,N,U,X,z),N.side==="bottom"&&o.draw(L,N._id+"title",{propContainer:N,propName:N._name+".title",placeholder:I._dfltTitle.x,attributes:{x:N._offset+N._length/2,y:ie+U._height+U._offsetShift+10+1.5*N.title.font.size,"text-anchor":"middle"}})}))};function d(L,I,E,k){if(I._context.staticPlot)return;var C=L.select("rect."+p.slideBoxClassName).node(),D=L.select("rect."+p.grabAreaMinClassName).node(),F=L.select("rect."+p.grabAreaMaxClassName).node();function N(){var G=r.event,U=G.target,X=G.clientX||G.touches[0].clientX,z=X-L.node().getBoundingClientRect().left,B=k.d2p(E._rl[0]),j=k.d2p(E._rl[1]),V=i.coverSlip();this.addEventListener("touchmove",K),this.addEventListener("touchend",te),V.addEventListener("mousemove",K),V.addEventListener("mouseup",te);function K($){var ie=$.clientX||$.touches[0].clientX,se=+ie-X,Q,H,oe;switch(U){case C:oe="ew-resize",Q=B+se,H=j+se;break;case D:oe="col-resize",Q=B+se,H=j;break;case F:oe="col-resize",Q=B,H=j+se;break;default:oe="ew-resize",Q=z,H=z+se;break}if(H<Q){var re=H;H=Q,Q=re}k._pixelMin=Q,k._pixelMax=H,s(r.select(V),oe),g(L,I,E,k)}function te(){V.removeEventListener("mousemove",K),V.removeEventListener("mouseup",te),this.removeEventListener("touchmove",K),this.removeEventListener("touchend",te),c.removeElement(V)}}L.on("mousedown",N),L.on("touchstart",N)}function g(L,I,E,k){function C(N){return E.l2r(c.constrain(N,k._rl[0],k._rl[1]))}var D=C(k.p2d(k._pixelMin)),F=C(k.p2d(k._pixelMax));window.requestAnimationFrame(function(){a.call("_guiRelayout",I,E._name+".range",[D,F])})}function b(L,I,E,k,C,D){var F=p.handleWidth/2;function N($){return c.constrain($,0,k._width)}function G($){return c.constrain($,0,k._height)}function U($){return c.constrain($,-F,k._width+F)}var X=N(k.d2p(E._rl[0])),z=N(k.d2p(E._rl[1]));if(L.select("rect."+p.slideBoxClassName).attr("x",X).attr("width",z-X),L.select("rect."+p.maskMinClassName).attr("width",X),L.select("rect."+p.maskMaxClassName).attr("x",z).attr("width",k._width-z),D.rangemode!=="match"){var B=k._height-G(k.d2pOppAxis(C._rl[1])),j=k._height-G(k.d2pOppAxis(C._rl[0]));L.select("rect."+p.maskMinOppAxisClassName).attr("x",X).attr("height",B).attr("width",z-X),L.select("rect."+p.maskMaxOppAxisClassName).attr("x",X).attr("y",j).attr("height",k._height-j).attr("width",z-X),L.select("rect."+p.slideBoxClassName).attr("y",B).attr("height",j-B)}var V=.5,K=Math.round(U(X-F))-V,te=Math.round(U(z-F))+V;L.select("g."+p.grabberMinClassName).attr("transform",t(K,V)),L.select("g."+p.grabberMaxClassName).attr("transform",t(te,V))}function m(L,I,E,k){var C=c.ensureSingle(L,"rect",p.bgClassName,function(G){G.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),D=k.borderwidth%2===0?k.borderwidth:k.borderwidth-1,F=-k._offsetShift,N=f.crispRound(I,k.borderwidth);C.attr({width:k._width+D,height:k._height+D,transform:t(F,F),fill:k.bgcolor,stroke:k.bordercolor,"stroke-width":N})}function x(L,I,E,k){var C=I._fullLayout,D=c.ensureSingleById(C._topdefs,"clipPath",k._clipId,function(F){F.append("rect").attr({x:0,y:0})});D.select("rect").attr({width:k._width,height:k._height})}function w(L,I,E,k){var C=I.calcdata,D=L.selectAll("g."+p.rangePlotClassName).data(E._subplotsWith,c.identity);D.enter().append("g").attr("class",function(N){return p.rangePlotClassName+" "+N}).call(f.setClipUrl,k._clipId,I),D.order(),D.exit().remove();var F;D.each(function(N,G){var U=r.select(this),X=G===0,z=h.getFromId(I,N,"y"),B=z._name,j=k[B],V={data:[],layout:{xaxis:{type:E.type,domain:[0,1],range:k.range.slice(),calendar:E.calendar},width:k._width,height:k._height,margin:{t:0,b:0,l:0,r:0}},_context:I._context};E.rangebreaks&&(V.layout.xaxis.rangebreaks=E.rangebreaks),V.layout[B]={type:z.type,domain:[0,1],range:j.rangemode!=="match"?j.range.slice():z.range.slice(),calendar:z.calendar},z.rangebreaks&&(V.layout[B].rangebreaks=z.rangebreaks),u.supplyDefaults(V);var K=V._fullLayout.xaxis,te=V._fullLayout[B];K.clearCalc(),K.setScale(),te.clearCalc(),te.setScale();var $={id:N,plotgroup:U,xaxis:K,yaxis:te,isRangePlot:!0};X?F=$:($.mainplot="xy",$.mainplotinfo=F),l.rangePlot(I,$,y(C,N))})}function y(L,I){for(var E=[],k=0;k<L.length;k++){var C=L[k],D=C[0].trace;D.xaxis+D.yaxis===I&&E.push(C)}return E}function T(L,I,E,k,C){var D=c.ensureSingle(L,"rect",p.maskMinClassName,function(U){U.attr({x:0,y:0,"shape-rendering":"crispEdges"})});D.attr("height",k._height).call(n.fill,p.maskColor);var F=c.ensureSingle(L,"rect",p.maskMaxClassName,function(U){U.attr({y:0,"shape-rendering":"crispEdges"})});if(F.attr("height",k._height).call(n.fill,p.maskColor),C.rangemode!=="match"){var N=c.ensureSingle(L,"rect",p.maskMinOppAxisClassName,function(U){U.attr({y:0,"shape-rendering":"crispEdges"})});N.attr("width",k._width).call(n.fill,p.maskOppAxisColor);var G=c.ensureSingle(L,"rect",p.maskMaxOppAxisClassName,function(U){U.attr({y:0,"shape-rendering":"crispEdges"})});G.attr("width",k._width).style("border-top",p.maskOppBorder).call(n.fill,p.maskOppAxisColor)}}function M(L,I,E,k){if(!I._context.staticPlot){var C=c.ensureSingle(L,"rect",p.slideBoxClassName,function(D){D.attr({y:0,cursor:p.slideBoxCursor,"shape-rendering":"crispEdges"})});C.attr({height:k._height,fill:p.slideBoxFill})}}function P(L,I,E,k){var C=c.ensureSingle(L,"g",p.grabberMinClassName),D=c.ensureSingle(L,"g",p.grabberMaxClassName),F={x:0,width:p.handleWidth,rx:p.handleRadius,fill:n.background,stroke:n.defaultLine,"stroke-width":p.handleStrokeWidth,"shape-rendering":"crispEdges"},N={y:Math.round(k._height/4),height:Math.round(k._height/2)},G=c.ensureSingle(C,"rect",p.handleMinClassName,function(j){j.attr(F)});G.attr(N);var U=c.ensureSingle(D,"rect",p.handleMaxClassName,function(j){j.attr(F)});U.attr(N);var X={width:p.grabAreaWidth,x:0,y:0,fill:p.grabAreaFill,cursor:I._context.staticPlot?void 0:p.grabAreaCursor},z=c.ensureSingle(C,"rect",p.grabAreaMinClassName,function(j){j.attr(X)});z.attr("height",k._height);var B=c.ensureSingle(D,"rect",p.grabAreaMaxClassName,function(j){j.attr(X)});B.attr("height",k._height)}},{"../../lib":778,"../../lib/setcursor":799,"../../plots/cartesian":841,"../../plots/cartesian/axis_ids":831,"../../plots/plots":891,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"../titles":738,"./constants":714,d3:169}],717:[function(e,v,S){var r=e("../../plots/cartesian/axis_ids"),a=e("../../lib/svg_text_utils"),u=e("./constants"),c=e("../../constants/alignment").LINE_SPACING,t=u.name;function f(n){var o=n&&n[t];return o&&o.visible}S.isVisible=f,S.makeData=function(n){var o=r.list({_fullLayout:n},"x",!0),l=n.margin,h=[];if(!n._has("gl2d"))for(var i=0;i<o.length;i++){var s=o[i];if(f(s)){h.push(s);var p=s[t];p._id=t+s._id,p._height=(n.height-l.b-l.t)*p.thickness,p._offsetShift=Math.floor(p.borderwidth/2)}}n._rangeSliderData=h},S.autoMarginOpts=function(n,o){var l=n._fullLayout,h=o[t],i=o._id.charAt(0),s=0,p=0;if(o.side==="bottom"&&(s=o._depth,o.title.text!==l._dfltTitle[i])){p=1.5*o.title.font.size+10+h._offsetShift;var d=(o.title.text.match(a.BR_TAG_ALL)||[]).length;p+=d*o.title.font.size*c}return{x:0,y:o._counterDomainMin,l:0,r:0,t:0,b:h._height+s+Math.max(l.margin.b,p),pad:u.extraPad+h._offsetShift*2}}},{"../../constants/alignment":745,"../../lib/svg_text_utils":803,"../../plots/cartesian/axis_ids":831,"./constants":714}],718:[function(e,v,S){var r=e("../../lib"),a=e("./attributes"),u=e("./oppaxis_attributes"),c=e("./helpers");v.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},a,{yaxis:u})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:c.isVisible,makeData:c.makeData,autoMarginOpts:c.autoMarginOpts}},{"../../lib":778,"./attributes":712,"./calc_autorange":713,"./defaults":715,"./draw":716,"./helpers":717,"./oppaxis_attributes":719}],719:[function(e,v,S){v.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],720:[function(e,v,S){var r=e("../annotations/attributes"),a=e("../../traces/scatter/attributes").line,u=e("../drawing/attributes").dash,c=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),v.exports=t("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:c({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:c({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:c({},a.color,{editType:"arraydraw"}),width:c({},a.width,{editType:"calc+arraydraw"}),dash:c({},u,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":746,"../../lib/extend":768,"../../plot_api/plot_template":817,"../../traces/scatter/attributes":1187,"../annotations/attributes":626,"../drawing/attributes":664}],721:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("./constants"),c=e("./helpers");v.exports=function(h){var i=h._fullLayout,s=r.filterVisible(i.shapes);if(!(!s.length||!h._fullData.length))for(var p=0;p<s.length;p++){var d=s[p];d._extremes={};var g,b,m=a.getRefType(d.xref),x=a.getRefType(d.yref);if(d.xref!=="paper"&&m!=="domain"){var w=d.xsizemode==="pixel"?d.xanchor:d.x0,y=d.xsizemode==="pixel"?d.xanchor:d.x1;g=a.getFromId(h,d.xref),b=o(g,w,y,d.path,u.paramIsX),b&&(d._extremes[g._id]=a.findExtremes(g,b,t(d)))}if(d.yref!=="paper"&&x!=="domain"){var T=d.ysizemode==="pixel"?d.yanchor:d.y0,M=d.ysizemode==="pixel"?d.yanchor:d.y1;g=a.getFromId(h,d.yref),b=o(g,T,M,d.path,u.paramIsY),b&&(d._extremes[g._id]=a.findExtremes(g,b,f(d)))}}};function t(l){return n(l.line.width,l.xsizemode,l.x0,l.x1,l.path,!1)}function f(l){return n(l.line.width,l.ysizemode,l.y0,l.y1,l.path,!0)}function n(l,h,i,s,p,d){var g=l/2,b=d;if(h==="pixel"){var m=p?c.extractPathCoords(p,d?u.paramIsY:u.paramIsX):[i,s],x=r.aggNums(Math.max,null,m),w=r.aggNums(Math.min,null,m),y=w<0?Math.abs(w)+g:g,T=x>0?x+g:g;return{ppad:g,ppadplus:b?y:T,ppadminus:b?T:y}}else return{ppad:g}}function o(l,h,i,s,p){var d=l.type==="category"||l.type==="multicategory"?l.r2c:l.d2c;if(h!==void 0)return[d(h),d(i)];if(!!s){var g=1/0,b=-1/0,m=s.match(u.segmentRE),x,w,y,T,M;for(l.type==="date"&&(d=c.decodeDate(d)),x=0;x<m.length;x++)w=m[x],y=p[w.charAt(0)].drawn,y!==void 0&&(T=m[x].substr(1).match(u.paramRE),!(!T||T.length<y)&&(M=d(T[y]),M<g&&(g=M),M>b&&(b=M)));if(b>=g)return[g,b]}}},{"../../lib":778,"../../plots/cartesian/axes":828,"./constants":722,"./helpers":731}],722:[function(e,v,S){v.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],723:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../../plots/array_container_defaults"),c=e("./attributes"),t=e("./helpers");v.exports=function(o,l){u(o,l,{name:"shapes",handleItemDefaults:f})};function f(n,o,l){function h(B,j){return r.coerce(n,o,c,B,j)}var i=h("visible");if(!!i){var s=h("path"),p=s?"path":"rect",d=h("type",p);o.type!=="path"&&delete o.path,h("editable"),h("layer"),h("opacity"),h("fillcolor"),h("fillrule");var g=h("line.width");g&&(h("line.color"),h("line.dash"));for(var b=h("xsizemode"),m=h("ysizemode"),x=["x","y"],w=0;w<2;w++){var y=x[w],T=y+"anchor",M=y==="x"?b:m,P={_fullLayout:l},L,I,E,k=a.coerceRef(n,o,P,y,void 0,"paper"),C=a.getRefType(k);if(C==="range"?(L=a.getFromId(P,k),L._shapeIndices.push(o._index),E=t.rangeToShapePosition(L),I=t.shapePositionToRange(L)):I=E=r.identity,d!=="path"){var D=.25,F=.75,N=y+"0",G=y+"1",U=n[N],X=n[G];n[N]=I(n[N],!0),n[G]=I(n[G],!0),M==="pixel"?(h(N,0),h(G,10)):(a.coercePosition(o,P,h,k,N,D),a.coercePosition(o,P,h,k,G,F)),o[N]=E(o[N]),o[G]=E(o[G]),n[N]=U,n[G]=X}if(M==="pixel"){var z=n[T];n[T]=I(n[T],!0),a.coercePosition(o,P,h,k,T,.25),o[T]=E(o[T]),n[T]=z}}d==="path"?h("path"):r.noneOrAll(n,o,["x0","x1","y0","y1"])}}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":720,"./helpers":731}],724:[function(e,v,S){var r=e("../../registry"),a=e("../../lib"),u=e("../../plots/cartesian/axes"),c=e("./draw_newshape/helpers").readPaths,t=e("./draw_newshape/display_outlines"),f=e("../../plots/cartesian/handle_outline").clearOutlineControllers,n=e("../color"),o=e("../drawing"),l=e("../../plot_api/plot_template").arrayEditor,h=e("../dragelement"),i=e("../../lib/setcursor"),s=e("./constants"),p=e("./helpers");v.exports={draw:d,drawOne:m,eraseActiveShape:I};function d(E){var k=E._fullLayout;k._shapeUpperLayer.selectAll("path").remove(),k._shapeLowerLayer.selectAll("path").remove();for(var C in k._plots){var D=k._plots[C].shapelayer;D&&D.selectAll("path").remove()}for(var F=0;F<k.shapes.length;F++)k.shapes[F].visible&&m(E,F)}function g(E){return!!E._fullLayout._drawing}function b(E){return!E._context.edits.shapePosition}function m(E,k){E._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+k+'"]').remove();var C=p.makeOptionsAndPlotinfo(E,k),D=C.options,F=C.plotinfo;if(!D._input||D.visible===!1)return;if(D.layer!=="below")G(E._fullLayout._shapeUpperLayer);else if(D.xref==="paper"||D.yref==="paper")G(E._fullLayout._shapeLowerLayer);else if(F._hadPlotinfo){var N=F.mainplotinfo||F;G(N.shapelayer)}else G(E._fullLayout._shapeLowerLayer);function G(U){var X=y(E,D),z={"data-index":k,"fill-rule":D.fillrule,d:X},B=D.opacity,j=D.fillcolor,V=D.line.width?D.line.color:"rgba(0,0,0,0)",K=D.line.width,te=D.line.dash;!K&&D.editable===!0&&(K=5,te="solid");var $=X[X.length-1]!=="Z",ie=b(E)&&D.editable&&E._fullLayout._activeShapeIndex===k;ie&&(j=$?"rgba(0,0,0,0)":E._fullLayout.activeshape.fillcolor,B=E._fullLayout.activeshape.opacity);var se=U.append("path").attr(z).style("opacity",B).call(n.stroke,V).call(n.fill,j).call(o.dashLine,te,K);x(se,E,D);var Q;if((ie||E._context.edits.shapePosition)&&(Q=l(E.layout,"shapes",D)),ie){se.style({cursor:"move"});var H={element:se.node(),plotinfo:F,gd:E,editHelpers:Q,isActiveShape:!0},oe=c(X,E);t(oe,se,H)}else E._context.edits.shapePosition?w(E,se,D,k,U,Q):D.editable===!0&&se.style("pointer-events",$||n.opacity(j)*B<=.5?"stroke":"all");se.node().addEventListener("click",function(){return P(E,se)})}}function x(E,k,C){var D=(C.xref+C.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");o.setClipUrl(E,D?"clip"+k._fullLayout._uid+D:null,k)}function w(E,k,C,D,F,N){var G=10,U=10,X=C.xsizemode==="pixel",z=C.ysizemode==="pixel",B=C.type==="line",j=C.type==="path",V=N.modifyItem,K,te,$,ie,se,Q,H,oe,re,ee,ae,fe,de,pe,W,ue=u.getFromId(E,C.xref),me=u.getRefType(C.xref),be=u.getFromId(E,C.yref),Me=u.getRefType(C.yref),Pe=p.getDataToPixel(E,ue,!1,me),Ge=p.getDataToPixel(E,be,!0,Me),ze=p.getPixelToData(E,ue,!1,me),Qe=p.getPixelToData(E,be,!0,Me),tt=Be(),Ce={element:tt.node(),gd:E,prepFn:At,doneFn:Ne,clickFn:ct},Ae;h.init(Ce),tt.node().onmousemove=Tt;function Be(){return B?qe():k}function qe(){var rr=10,Lt=Math.max(C.line.width,rr),Ct=F.append("g").attr("data-index",D);Ct.append("path").attr("d",k.attr("d")).style({cursor:"move","stroke-width":Lt,"stroke-opacity":"0"});var dt={"fill-opacity":"0"},lt=Math.max(Lt/2,rr);return Ct.append("circle").attr({"data-line-point":"start-point",cx:X?Pe(C.xanchor)+C.x0:Pe(C.x0),cy:z?Ge(C.yanchor)-C.y0:Ge(C.y0),r:lt}).style(dt).classed("cursor-grab",!0),Ct.append("circle").attr({"data-line-point":"end-point",cx:X?Pe(C.xanchor)+C.x1:Pe(C.x1),cy:z?Ge(C.yanchor)-C.y1:Ge(C.y1),r:lt}).style(dt).classed("cursor-grab",!0),Ct}function Tt(rr){if(g(E)){Ae=null;return}if(B)rr.target.tagName==="path"?Ae="move":Ae=rr.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Lt=Ce.element.getBoundingClientRect(),Ct=Lt.right-Lt.left,dt=Lt.bottom-Lt.top,lt=rr.clientX-Lt.left,Te=rr.clientY-Lt.top,Le=!j&&Ct>G&&dt>U&&!rr.shiftKey?h.getCursor(lt/Ct,1-Te/dt):"move";i(k,Le),Ae=Le.split("-")[0]}}function At(rr){g(E)||(X&&(se=Pe(C.xanchor)),z&&(Q=Ge(C.yanchor)),C.type==="path"?W=C.path:(K=X?C.x0:Pe(C.x0),te=z?C.y0:Ge(C.y0),$=X?C.x1:Pe(C.x1),ie=z?C.y1:Ge(C.y1)),K<$?(re=K,de="x0",ee=$,pe="x1"):(re=$,de="x1",ee=K,pe="x0"),!z&&te<ie||z&&te>ie?(H=te,ae="y0",oe=ie,fe="y1"):(H=ie,ae="y1",oe=te,fe="y0"),Tt(rr),qt(F,C),$t(k,C,E),Ce.moveFn=Ae==="move"?Mt:Wt,Ce.altKey=rr.altKey)}function Ne(){g(E)||(i(k),zt(F),x(k,E,C),r.call("_guiRelayout",E,N.getUpdateObj()))}function ct(){g(E)||zt(F)}function Mt(rr,Lt){if(C.type==="path"){var Ct=function(Te){return Te},dt=Ct,lt=Ct;X?V("xanchor",C.xanchor=ze(se+rr)):(dt=function(Le){return ze(Pe(Le)+rr)},ue&&ue.type==="date"&&(dt=p.encodeDate(dt))),z?V("yanchor",C.yanchor=Qe(Q+Lt)):(lt=function(Le){return Qe(Ge(Le)+Lt)},be&&be.type==="date"&&(lt=p.encodeDate(lt))),V("path",C.path=M(W,dt,lt))}else X?V("xanchor",C.xanchor=ze(se+rr)):(V("x0",C.x0=ze(K+rr)),V("x1",C.x1=ze($+rr))),z?V("yanchor",C.yanchor=Qe(Q+Lt)):(V("y0",C.y0=Qe(te+Lt)),V("y1",C.y1=Qe(ie+Lt)));k.attr("d",y(E,C)),qt(F,C)}function Wt(rr,Lt){if(j){var Ct=function(st){return st},dt=Ct,lt=Ct;X?V("xanchor",C.xanchor=ze(se+rr)):(dt=function(It){return ze(Pe(It)+rr)},ue&&ue.type==="date"&&(dt=p.encodeDate(dt))),z?V("yanchor",C.yanchor=Qe(Q+Lt)):(lt=function(It){return Qe(Ge(It)+Lt)},be&&be.type==="date"&&(lt=p.encodeDate(lt))),V("path",C.path=M(W,dt,lt))}else if(B){if(Ae==="resize-over-start-point"){var Te=K+rr,Le=z?te-Lt:te+Lt;V("x0",C.x0=X?Te:ze(Te)),V("y0",C.y0=z?Le:Qe(Le))}else if(Ae==="resize-over-end-point"){var Ue=$+rr,et=z?ie-Lt:ie+Lt;V("x1",C.x1=X?Ue:ze(Ue)),V("y1",C.y1=z?et:Qe(et))}}else{var ke=function(st){return Ae.indexOf(st)!==-1},Ie=ke("n"),He=ke("s"),Ye=ke("w"),ft=ke("e"),it=Ie?H+Lt:H,je=He?oe+Lt:oe,ot=Ye?re+rr:re,Je=ft?ee+rr:ee;z&&(Ie&&(it=H-Lt),He&&(je=oe-Lt)),(!z&&je-it>U||z&&it-je>U)&&(V(ae,C[ae]=z?it:Qe(it)),V(fe,C[fe]=z?je:Qe(je))),Je-ot>G&&(V(de,C[de]=X?ot:ze(ot)),V(pe,C[pe]=X?Je:ze(Je)))}k.attr("d",y(E,C)),qt(F,C)}function qt(rr,Lt){(X||z)&&Ct();function Ct(){var dt=Lt.type!=="path",lt=rr.selectAll(".visual-cue").data([0]),Te=1;lt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Te}).classed("visual-cue",!0);var Le=Pe(X?Lt.xanchor:a.midRange(dt?[Lt.x0,Lt.x1]:p.extractPathCoords(Lt.path,s.paramIsX))),Ue=Ge(z?Lt.yanchor:a.midRange(dt?[Lt.y0,Lt.y1]:p.extractPathCoords(Lt.path,s.paramIsY)));if(Le=p.roundPositionForSharpStrokeRendering(Le,Te),Ue=p.roundPositionForSharpStrokeRendering(Ue,Te),X&&z){var et="M"+(Le-1-Te)+","+(Ue-1-Te)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";lt.attr("d",et)}else if(X){var ke="M"+(Le-1-Te)+","+(Ue-9-Te)+"v18 h2 v-18 Z";lt.attr("d",ke)}else{var Ie="M"+(Le-9-Te)+","+(Ue-1-Te)+"h18 v2 h-18 Z";lt.attr("d",Ie)}}}function zt(rr){rr.selectAll(".visual-cue").remove()}function $t(rr,Lt,Ct){var dt=Lt.xref,lt=Lt.yref,Te=u.getFromId(Ct,dt),Le=u.getFromId(Ct,lt),Ue="";dt!=="paper"&&!Te.autorange&&(Ue+=dt),lt!=="paper"&&!Le.autorange&&(Ue+=lt),o.setClipUrl(rr,Ue?"clip"+Ct._fullLayout._uid+Ue:null,Ct)}}function y(E,k){var C=k.type,D=u.getRefType(k.xref),F=u.getRefType(k.yref),N=u.getFromId(E,k.xref),G=u.getFromId(E,k.yref),U=E._fullLayout._size,X,z,B,j,V,K,te,$;if(N?D==="domain"?z=function(de){return N._offset+N._length*de}:(X=p.shapePositionToRange(N),z=function(de){return N._offset+N.r2p(X(de,!0))}):z=function(de){return U.l+U.w*de},G?F==="domain"?j=function(de){return G._offset+G._length*(1-de)}:(B=p.shapePositionToRange(G),j=function(de){return G._offset+G.r2p(B(de,!0))}):j=function(de){return U.t+U.h*(1-de)},C==="path")return N&&N.type==="date"&&(z=p.decodeDate(z)),G&&G.type==="date"&&(j=p.decodeDate(j)),T(k,z,j);if(k.xsizemode==="pixel"){var ie=z(k.xanchor);V=ie+k.x0,K=ie+k.x1}else V=z(k.x0),K=z(k.x1);if(k.ysizemode==="pixel"){var se=j(k.yanchor);te=se-k.y0,$=se-k.y1}else te=j(k.y0),$=j(k.y1);if(C==="line")return"M"+V+","+te+"L"+K+","+$;if(C==="rect")return"M"+V+","+te+"H"+K+"V"+$+"H"+V+"Z";var Q=(V+K)/2,H=(te+$)/2,oe=Math.abs(Q-V),re=Math.abs(H-te),ee="A"+oe+","+re,ae=Q+oe+","+H,fe=Q+","+(H-re);return"M"+ae+ee+" 0 1,1 "+fe+ee+" 0 0,1 "+ae+"Z"}function T(E,k,C){var D=E.path,F=E.xsizemode,N=E.ysizemode,G=E.xanchor,U=E.yanchor;return D.replace(s.segmentRE,function(X){var z=0,B=X.charAt(0),j=s.paramIsX[B],V=s.paramIsY[B],K=s.numParams[B],te=X.substr(1).replace(s.paramRE,function($){return j[z]?F==="pixel"?$=k(G)+Number($):$=k($):V[z]&&(N==="pixel"?$=C(U)-Number($):$=C($)),z++,z>K&&($="X"),$});return z>K&&(te=te.replace(/[\s,]*X.*/,""),a.log("Ignoring extra params in segment "+X)),B+te})}function M(E,k,C){return E.replace(s.segmentRE,function(D){var F=0,N=D.charAt(0),G=s.paramIsX[N],U=s.paramIsY[N],X=s.numParams[N],z=D.substr(1).replace(s.paramRE,function(B){return F>=X||(G[F]?B=k(B):U[F]&&(B=C(B)),F++),B});return N+z})}function P(E,k){if(!!b(E)){var C=k.node(),D=+C.getAttribute("data-index");if(D>=0){if(D===E._fullLayout._activeShapeIndex){L(E);return}E._fullLayout._activeShapeIndex=D,E._fullLayout._deactivateShape=L,d(E)}}}function L(E){if(!!b(E)){var k=E._fullLayout._activeShapeIndex;k>=0&&(f(E),delete E._fullLayout._activeShapeIndex,d(E))}}function I(E){if(!!b(E)){f(E);var k=E._fullLayout._activeShapeIndex,C=(E.layout||{}).shapes||[];if(k<C.length){for(var D=[],F=0;F<C.length;F++)F!==k&&D.push(C[F]);delete E._fullLayout._activeShapeIndex,r.call("_guiRelayout",E,{shapes:D})}}}},{"../../lib":778,"../../lib/setcursor":799,"../../plot_api/plot_template":817,"../../plots/cartesian/axes":828,"../../plots/cartesian/handle_outline":838,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"./constants":722,"./draw_newshape/display_outlines":728,"./draw_newshape/helpers":729,"./helpers":731}],725:[function(e,v,S){var r=e("../../drawing/attributes").dash,a=e("../../../lib/extend").extendFlat;v.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:a({},r,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":768,"../../drawing/attributes":664}],726:[function(e,v,S){var r=32;v.exports={CIRCLE_SIDES:r,i000:0,i090:r/4,i180:r/2,i270:r/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],727:[function(e,v,S){var r=e("../../color");v.exports=function(u,c,t){t("newshape.drawdirection"),t("newshape.layer"),t("newshape.fillcolor"),t("newshape.fillrule"),t("newshape.opacity");var f=t("newshape.line.width");if(f){var n=(u||{}).plot_bgcolor||"#FFF";t("newshape.line.color",r.contrast(n)),t("newshape.line.dash")}t("activeshape.fillcolor"),t("activeshape.opacity")}},{"../../color":643}],728:[function(e,v,S){var r=e("../../dragelement"),a=e("../../dragelement/helpers"),u=a.drawMode,c=e("../../../registry"),t=e("./constants"),f=t.i000,n=t.i090,o=t.i180,l=t.i270,h=e("../../../plots/cartesian/handle_outline"),i=h.clearOutlineControllers,s=e("./helpers"),p=s.pointsShapeRectangle,d=s.pointsShapeEllipse,g=s.writePaths,b=e("./newshapes");v.exports=function x(w,y,T,M){M||(M=0);var P=T.gd;function L(){x(w,y,T,M++),d(w[0])&&I({redrawing:!0})}function I(ee){T.isActiveShape=!1;var ae=b(y,T);Object.keys(ae).length&&c.call((ee||{}).redrawing?"relayout":"_guiRelayout",P,ae)}var E=T.isActiveShape,k=P._fullLayout,C=k._zoomlayer,D=T.dragmode,F=u(D);F?P._fullLayout._drawing=!0:P._fullLayout._activeShapeIndex>=0&&i(P),y.attr("d",g(w));var N,G,U,X,z;if(E&&!M){z=m([],w);var B=C.append("g").attr("class","outline-controllers");ie(B),re()}function j(ee){U=+ee.srcElement.getAttribute("data-i"),X=+ee.srcElement.getAttribute("data-j"),N[U][X].moveFn=V}function V(ee,ae){if(!!w.length){var fe=z[U][X][1],de=z[U][X][2],pe=w[U],W=pe.length;if(p(pe)){for(var ue=0;ue<W;ue++)if(ue!==X){var me=pe[ue];me[1]===pe[X][1]&&(me[1]=fe+ee),me[2]===pe[X][2]&&(me[2]=de+ae)}if(pe[X][1]=fe+ee,pe[X][2]=de+ae,!p(pe))for(var be=0;be<W;be++)for(var Me=0;Me<pe[be].length;Me++)pe[be][Me]=z[U][be][Me]}else pe[X][1]=fe+ee,pe[X][2]=de+ae;L()}}function K(){I()}function te(){if(!!w.length&&!!w[U]&&!!w[U].length){for(var ee=[],ae=0;ae<w[U].length;ae++)ae!==X&&ee.push(w[U][ae]);ee.length>1&&!(ee.length===2&&ee[1][0]==="Z")&&(X===0&&(ee[0][0]="M"),w[U]=ee,L(),I())}}function $(ee,ae){if(ee===2){U=+ae.srcElement.getAttribute("data-i"),X=+ae.srcElement.getAttribute("data-j");var fe=w[U];!p(fe)&&!d(fe)&&te()}}function ie(ee){N=[];for(var ae=0;ae<w.length;ae++){var fe=w[ae],de=p(fe),pe=!de&&d(fe);N[ae]=[];for(var W=0;W<fe.length;W++)if(fe[W][0]!=="Z"&&!(pe&&W!==f&&W!==n&&W!==o&&W!==l)){var ue=fe[W][1],me=fe[W][2],be=ee.append("circle").classed("cursor-grab",!0).attr("data-i",ae).attr("data-j",W).attr("cx",ue).attr("cy",me).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});N[ae][W]={element:be.node(),gd:P,prepFn:j,doneFn:K,clickFn:$},r.init(N[ae][W])}}}function se(ee,ae){if(!!w.length)for(var fe=0;fe<w.length;fe++)for(var de=0;de<w[fe].length;de++)for(var pe=0;pe+2<w[fe][de].length;pe+=2)w[fe][de][pe+1]=z[fe][de][pe+1]+ee,w[fe][de][pe+2]=z[fe][de][pe+2]+ae}function Q(ee,ae){se(ee,ae),L()}function H(ee){U=+ee.srcElement.getAttribute("data-i"),U||(U=0),G[U].moveFn=Q}function oe(){I()}function re(){if(G=[],!!w.length){var ee=0;G[ee]={element:y[0][0],gd:P,prepFn:H,doneFn:oe},r.init(G[ee])}}};function m(x,w){for(var y=0;y<w.length;y++){var T=w[y];x[y]=[];for(var M=0;M<T.length;M++){x[y][M]=[];for(var P=0;P<T[M].length;P++)x[y][M][P]=T[M][P]}}return x}},{"../../../plots/cartesian/handle_outline":838,"../../../registry":911,"../../dragelement":662,"../../dragelement/helpers":661,"./constants":726,"./helpers":729,"./newshapes":730}],729:[function(e,v,S){var r=e("parse-svg-path"),a=e("./constants"),u=a.CIRCLE_SIDES,c=a.SQRT2,t=e("../../../plots/cartesian/helpers"),f=t.p2r,n=t.r2p,o=[0,3,4,5,6,1,2],l=[0,3,4,1,2];S.writePaths=function(s){var p=s.length;if(!p)return"M0,0Z";for(var d="",g=0;g<p;g++)for(var b=s[g].length,m=0;m<b;m++){var x=s[g][m][0];if(x==="Z")d+="Z";else for(var w=s[g][m].length,y=0;y<w;y++){var T=y;x==="Q"||x==="S"?T=l[y]:x==="C"&&(T=o[y]),d+=s[g][m][T],y>0&&y<w-1&&(d+=",")}}return d},S.readPaths=function(s,p,d,g){var b=r(s),m=[],x=-1,w=function(){x++,m[x]=[]},y,T=0,M=0,P,L,I=function(){P=T,L=M};I();for(var E=0;E<b.length;E++){var k=[],C,D,F,N,G=b[E][0],U=G;switch(G){case"M":w(),T=+b[E][1],M=+b[E][2],k.push([U,T,M]),I();break;case"Q":case"S":C=+b[E][1],F=+b[E][2],T=+b[E][3],M=+b[E][4],k.push([U,T,M,C,F]);break;case"C":C=+b[E][1],F=+b[E][2],D=+b[E][3],N=+b[E][4],T=+b[E][5],M=+b[E][6],k.push([U,T,M,C,F,D,N]);break;case"T":case"L":T=+b[E][1],M=+b[E][2],k.push([U,T,M]);break;case"H":U="L",T=+b[E][1],k.push([U,T,M]);break;case"V":U="L",M=+b[E][1],k.push([U,T,M]);break;case"A":U="L";var X=+b[E][1],z=+b[E][2];+b[E][4]||(X=-X,z=-z);var B=T-X,j=M;for(y=1;y<=u/2;y++){var V=2*Math.PI*y/u;k.push([U,B+X*Math.cos(V),j+z*Math.sin(V)])}break;case"Z":(T!==P||M!==L)&&(T=P,M=L,k.push([U,T,M]));break}for(var K=(d||{}).domain,te=p._fullLayout._size,$=d&&d.xsizemode==="pixel",ie=d&&d.ysizemode==="pixel",se=g===!1,Q=0;Q<k.length;Q++){for(y=0;y+2<7;y+=2){var H=k[Q][y+1],oe=k[Q][y+2];H===void 0||oe===void 0||(T=H,M=oe,d&&(d.xaxis&&d.xaxis.p2r?(se&&(H-=d.xaxis._offset),$?H=n(d.xaxis,d.xanchor)+H:H=f(d.xaxis,H)):(se&&(H-=te.l),K?H=K.x[0]+H/te.w:H=H/te.w),d.yaxis&&d.yaxis.p2r?(se&&(oe-=d.yaxis._offset),ie?oe=n(d.yaxis,d.yanchor)-oe:oe=f(d.yaxis,oe)):(se&&(oe-=te.t),K?oe=K.y[1]-oe/te.h:oe=1-oe/te.h)),k[Q][y+1]=H,k[Q][y+2]=oe)}m[x].push(k[Q].slice())}}return m};function h(s,p){return Math.abs(s-p)<=1e-6}function i(s,p){var d=p[1]-s[1],g=p[2]-s[2];return Math.sqrt(d*d+g*g)}S.pointsShapeRectangle=function(s){var p=s.length;if(p!==5)return!1;for(var d=1;d<3;d++){var g=s[0][d]-s[1][d],b=s[3][d]-s[2][d];if(!h(g,b))return!1;var m=s[0][d]-s[3][d],x=s[1][d]-s[2][d];if(!h(m,x))return!1}return!h(s[0][1],s[1][1])&&!h(s[0][1],s[3][1])?!1:!!(i(s[0],s[1])*i(s[0],s[3]))},S.pointsShapeEllipse=function(s){var p=s.length;if(p!==u+1)return!1;p=u;for(var d=0;d<p;d++){var g=(p*2-d)%p,b=(p/2+g)%p,m=(p/2+d)%p;if(!h(i(s[d],s[m]),i(s[g],s[b])))return!1}return!0},S.handleEllipse=function(s,p,d){if(!s)return[p,d];var g=S.ellipseOver({x0:p[0],y0:p[1],x1:d[0],y1:d[1]}),b=(g.x1+g.x0)/2,m=(g.y1+g.y0)/2,x=(g.x1-g.x0)/2,w=(g.y1-g.y0)/2;x||(x=w=w/c),w||(w=x=x/c);for(var y=[],T=0;T<u;T++){var M=T*2*Math.PI/u;y.push([b+x*Math.cos(M),m+w*Math.sin(M)])}return y},S.ellipseOver=function(s){var p=s.x0,d=s.y0,g=s.x1,b=s.y1,m=g-p,x=b-d;p-=m,d-=x;var w=(p+g)/2,y=(d+b)/2,T=c;return m*=T,x*=T,{x0:w-m,y0:y-x,x1:w+m,y1:y+x}}},{"../../../plots/cartesian/helpers":839,"./constants":726,"parse-svg-path":505}],730:[function(e,v,S){var r=e("../../dragelement/helpers"),a=r.drawMode,u=r.openMode,c=e("./constants"),t=c.i000,f=c.i090,n=c.i180,o=c.i270,l=c.cos45,h=c.sin45,i=e("../../../plots/cartesian/helpers"),s=i.p2r,p=i.r2p,d=e("../../../plots/cartesian/handle_outline"),g=d.clearSelect,b=e("./helpers"),m=b.readPaths,x=b.writePaths,w=b.ellipseOver;v.exports=function(M,P){if(!!M.length){var L=M[0][0];if(!!L){var I=L.getAttribute("d"),E=P.gd,k=E._fullLayout.newshape,C=P.plotinfo,D=C.xaxis,F=C.yaxis,N=!!C.domain||!C.xaxis,G=!!C.domain||!C.yaxis,U=P.isActiveShape,X=P.dragmode,z=(E.layout||{}).shapes||[];if(!a(X)&&U!==void 0){var B=E._fullLayout._activeShapeIndex;if(B<z.length)switch(E._fullLayout.shapes[B].type){case"rect":X="drawrect";break;case"circle":X="drawcircle";break;case"line":X="drawline";break;case"path":var j=z[B].path||"";j[j.length-1]==="Z"?X="drawclosedpath":X="drawopenpath";break}}var V=u(X),K=m(I,E,C,U),te={editable:!0,xref:N?"paper":D._id,yref:G?"paper":F._id,layer:k.layer,opacity:k.opacity,line:{color:k.line.color,width:k.line.width,dash:k.line.dash}};V||(te.fillcolor=k.fillcolor,te.fillrule=k.fillrule);var $;if(K.length===1&&($=K[0]),$&&X==="drawrect")te.type="rect",te.x0=$[0][1],te.y0=$[0][2],te.x1=$[2][1],te.y1=$[2][2];else if($&&X==="drawline")te.type="line",te.x0=$[0][1],te.y0=$[0][2],te.x1=$[1][1],te.y1=$[1][2];else if($&&X==="drawcircle"){te.type="circle";var ie=$[t][1],se=$[f][1],Q=$[n][1],H=$[o][1],oe=$[t][2],re=$[f][2],ee=$[n][2],ae=$[o][2],fe=C.xaxis&&(C.xaxis.type==="date"||C.xaxis.type==="log"),de=C.yaxis&&(C.yaxis.type==="date"||C.yaxis.type==="log");fe&&(ie=p(C.xaxis,ie),se=p(C.xaxis,se),Q=p(C.xaxis,Q),H=p(C.xaxis,H)),de&&(oe=p(C.yaxis,oe),re=p(C.yaxis,re),ee=p(C.yaxis,ee),ae=p(C.yaxis,ae));var pe=(se+H)/2,W=(oe+ee)/2,ue=(H-se+Q-ie)/2,me=(ae-re+ee-oe)/2,be=w({x0:pe,y0:W,x1:pe+ue*l,y1:W+me*h});fe&&(be.x0=s(C.xaxis,be.x0),be.x1=s(C.xaxis,be.x1)),de&&(be.y0=s(C.yaxis,be.y0),be.y1=s(C.yaxis,be.y1)),te.x0=be.x0,te.y0=be.y0,te.x1=be.x1,te.y1=be.y1}else te.type="path",D&&F&&y(K,D,F),te.path=x(K),$=null;g(E);for(var Me=P.editHelpers,Pe=(Me||{}).modifyItem,Ge=[],ze=0;ze<z.length;ze++){var Qe=E._fullLayout.shapes[ze];if(Ge[ze]=Qe._input,U!==void 0&&ze===E._fullLayout._activeShapeIndex){var tt=te;switch(Qe.type){case"line":case"rect":case"circle":Pe("x0",tt.x0),Pe("x1",tt.x1),Pe("y0",tt.y0),Pe("y1",tt.y1);break;case"path":Pe("path",tt.path);break}}}return U===void 0?(Ge.push(te),Ge):Me?Me.getUpdateObj():{}}}};function y(T,M,P){var L=M.type==="date",I=P.type==="date";if(!L&&!I)return T;for(var E=0;E<T.length;E++)for(var k=0;k<T[E].length;k++)for(var C=0;C+2<T[E][k].length;C+=2)L&&(T[E][k][C+1]=T[E][k][C+1].replace(" ","_")),I&&(T[E][k][C+2]=T[E][k][C+2].replace(" ","_"));return T}},{"../../../plots/cartesian/handle_outline":838,"../../../plots/cartesian/helpers":839,"../../dragelement/helpers":661,"./constants":726,"./helpers":729}],731:[function(e,v,S){var r=e("./constants"),a=e("../../lib");S.rangeToShapePosition=function(u){return u.type==="log"?u.r2d:function(c){return c}},S.shapePositionToRange=function(u){return u.type==="log"?u.d2r:function(c){return c}},S.decodeDate=function(u){return function(c){return c.replace&&(c=c.replace("_"," ")),u(c)}},S.encodeDate=function(u){return function(c){return u(c).replace(" ","_")}},S.extractPathCoords=function(u,c){var t=[],f=u.match(r.segmentRE);return f.forEach(function(n){var o=c[n.charAt(0)].drawn;if(o!==void 0){var l=n.substr(1).match(r.paramRE);!l||l.length<o||t.push(a.cleanNumber(l[o]))}}),t},S.getDataToPixel=function(u,c,t,f){var n=u._fullLayout._size,o;if(c)if(f==="domain")o=function(h){return c._length*(t?1-h:h)+c._offset};else{var l=S.shapePositionToRange(c);o=function(h){return c._offset+c.r2p(l(h,!0))},c.type==="date"&&(o=S.decodeDate(o))}else t?o=function(h){return n.t+n.h*(1-h)}:o=function(h){return n.l+n.w*h};return o},S.getPixelToData=function(u,c,t,f){var n=u._fullLayout._size,o;if(c)if(f==="domain")o=function(h){var i=(h-c._offset)/c._length;return t?1-i:i};else{var l=S.rangeToShapePosition(c);o=function(h){return l(c.p2r(h-c._offset))}}else t?o=function(h){return 1-(h-n.t)/n.h}:o=function(h){return(h-n.l)/n.w};return o},S.roundPositionForSharpStrokeRendering=function(u,c){var t=Math.round(c%2)===1,f=Math.round(u);return t?f+.5:f},S.makeOptionsAndPlotinfo=function(u,c){var t=u._fullLayout.shapes[c]||{},f=u._fullLayout._plots[t.xref+t.yref],n=!!f;return n?f._hadPlotinfo=!0:(f={},t.xref&&t.xref!=="paper"&&(f.xaxis=u._fullLayout[t.xref+"axis"]),t.yref&&t.yref!=="paper"&&(f.yaxis=u._fullLayout[t.yref+"axis"])),f.xsizemode=t.xsizemode,f.ysizemode=t.ysizemode,f.xanchor=t.xanchor,f.yanchor=t.yanchor,{options:t,plotinfo:f}}},{"../../lib":778,"./constants":722}],732:[function(e,v,S){var r=e("./draw");v.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":840,"./attributes":720,"./calc_autorange":721,"./defaults":723,"./draw":724,"./draw_newshape/defaults":727}],733:[function(e,v,S){var r=e("../../plots/font_attributes"),a=e("../../plots/pad_attributes"),u=e("../../lib/extend").extendDeepAll,c=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/animation_attributes"),f=e("../../plot_api/plot_template").templatedArray,n=e("./constants"),o=f("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});v.exports=c(f("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:o,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:u(a({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:t.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:r({})},font:r({}),activebgcolor:{valType:"color",dflt:n.gripBgActiveColor},bgcolor:{valType:"color",dflt:n.railBgColor},bordercolor:{valType:"color",dflt:n.railBorderColor},borderwidth:{valType:"number",min:0,dflt:n.railBorderWidth},ticklen:{valType:"number",min:0,dflt:n.tickLength},tickcolor:{valType:"color",dflt:n.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:n.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/animation_attributes":822,"../../plots/font_attributes":856,"../../plots/pad_attributes":890,"./constants":734}],734:[function(e,v,S){v.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],735:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/array_container_defaults"),u=e("./attributes"),c=e("./constants"),t=c.name,f=u.steps;v.exports=function(h,i){a(h,i,{name:t,handleItemDefaults:n})};function n(l,h,i){function s(y,T){return r.coerce(l,h,u,y,T)}for(var p=a(l,h,{name:"steps",handleItemDefaults:o}),d=0,g=0;g<p.length;g++)p[g].visible&&d++;var b;if(d<2?b=h.visible=!1:b=s("visible"),!!b){h._stepCount=d;var m=h._visibleSteps=r.filterVisible(p),x=s("active");(p[x]||{}).visible||(h.active=m[0]._index),s("x"),s("y"),r.noneOrAll(l,h,["x","y"]),s("xanchor"),s("yanchor"),s("len"),s("lenmode"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),r.coerceFont(s,"font",i.font);var w=s("currentvalue.visible");w&&(s("currentvalue.xanchor"),s("currentvalue.prefix"),s("currentvalue.suffix"),s("currentvalue.offset"),r.coerceFont(s,"currentvalue.font",h.font)),s("transition.duration"),s("transition.easing"),s("bgcolor"),s("activebgcolor"),s("bordercolor"),s("borderwidth"),s("ticklen"),s("tickwidth"),s("tickcolor"),s("minorticklen")}}function o(l,h){function i(d,g){return r.coerce(l,h,f,d,g)}var s;if(l.method!=="skip"&&!Array.isArray(l.args)?s=h.visible=!1:s=i("visible"),s){i("method"),i("args");var p=i("label","step-"+h._index);i("value",p),i("execute")}}},{"../../lib":778,"../../plots/array_container_defaults":823,"./attributes":733,"./constants":734}],736:[function(e,v,S){var r=e("d3"),a=e("../../plots/plots"),u=e("../color"),c=e("../drawing"),t=e("../../lib"),f=t.strTranslate,n=e("../../lib/svg_text_utils"),o=e("../../plot_api/plot_template").arrayEditor,l=e("./constants"),h=e("../../constants/alignment"),i=h.LINE_SPACING,s=h.FROM_TL,p=h.FROM_BR;v.exports=function(X){var z=X._fullLayout,B=g(z,X),j=z._infolayer.selectAll("g."+l.containerClassName).data(B.length>0?[0]:[]);j.enter().append("g").classed(l.containerClassName,!0).style("cursor","ew-resize");function V(ie){ie._commandObserver&&(ie._commandObserver.remove(),delete ie._commandObserver),a.autoMargin(X,d(ie))}if(j.exit().each(function(){r.select(this).selectAll("g."+l.groupClassName).each(V)}).remove(),B.length!==0){var K=j.selectAll("g."+l.groupClassName).data(B,b);K.enter().append("g").classed(l.groupClassName,!0),K.exit().each(V).remove();for(var te=0;te<B.length;te++){var $=B[te];m(X,$)}K.each(function(ie){var se=r.select(this);k(ie),a.manageCommandObserver(X,ie,ie._visibleSteps,function(Q){var H=se.data()[0];H.active!==Q.index&&(H._dragging||L(X,se,H,Q.index,!1,!0))}),x(X,r.select(this),ie)})}};function d(U){return l.autoMarginIdRoot+U._index}function g(U,X){for(var z=U[l.name],B=[],j=0;j<z.length;j++){var V=z[j];!V.visible||(V._gd=X,B.push(V))}return B}function b(U){return U._index}function m(U,X){var z=c.tester.selectAll("g."+l.labelGroupClass).data(X._visibleSteps);z.enter().append("g").classed(l.labelGroupClass,!0);var B=0,j=0;z.each(function(re){var ee=r.select(this),ae=T(ee,{step:re},X),fe=ae.node();if(fe){var de=c.bBox(fe);j=Math.max(j,de.height),B=Math.max(B,de.width)}}),z.remove();var V=X._dims={};V.inputAreaWidth=Math.max(l.railWidth,l.gripHeight);var K=U._fullLayout._size;V.lx=K.l+K.w*X.x,V.ly=K.t+K.h*(1-X.y),X.lenmode==="fraction"?V.outerLength=Math.round(K.w*X.len):V.outerLength=X.len,V.inputAreaStart=0,V.inputAreaLength=Math.round(V.outerLength-X.pad.l-X.pad.r);var te=V.inputAreaLength-2*l.stepInset,$=te/(X._stepCount-1),ie=B+l.labelPadding;if(V.labelStride=Math.max(1,Math.ceil(ie/$)),V.labelHeight=j,V.currentValueMaxWidth=0,V.currentValueHeight=0,V.currentValueTotalHeight=0,V.currentValueMaxLines=1,X.currentvalue.visible){var se=c.tester.append("g");z.each(function(re){var ee=w(se,X,re.label),ae=ee.node()&&c.bBox(ee.node())||{width:0,height:0},fe=n.lineCount(ee);V.currentValueMaxWidth=Math.max(V.currentValueMaxWidth,Math.ceil(ae.width)),V.currentValueHeight=Math.max(V.currentValueHeight,Math.ceil(ae.height)),V.currentValueMaxLines=Math.max(V.currentValueMaxLines,fe)}),V.currentValueTotalHeight=V.currentValueHeight+X.currentvalue.offset,se.remove()}V.height=V.currentValueTotalHeight+l.tickOffset+X.ticklen+l.labelOffset+V.labelHeight+X.pad.t+X.pad.b;var Q="left";t.isRightAnchor(X)&&(V.lx-=V.outerLength,Q="right"),t.isCenterAnchor(X)&&(V.lx-=V.outerLength/2,Q="center");var H="top";t.isBottomAnchor(X)&&(V.ly-=V.height,H="bottom"),t.isMiddleAnchor(X)&&(V.ly-=V.height/2,H="middle"),V.outerLength=Math.ceil(V.outerLength),V.height=Math.ceil(V.height),V.lx=Math.round(V.lx),V.ly=Math.round(V.ly);var oe={y:X.y,b:V.height*p[H],t:V.height*s[H]};X.lenmode==="fraction"?(oe.l=0,oe.xl=X.x-X.len*s[Q],oe.r=0,oe.xr=X.x+X.len*p[Q]):(oe.x=X.x,oe.l=V.outerLength*s[Q],oe.r=V.outerLength*p[Q]),a.autoMargin(U,d(X),oe)}function x(U,X,z){(z.steps[z.active]||{}).visible||(z.active=z._visibleSteps[0]._index),X.call(w,z).call(G,z).call(M,z).call(E,z).call(N,U,z).call(y,U,z);var B=z._dims;c.setTranslate(X,B.lx+z.pad.l,B.ly+z.pad.t),X.call(C,z,!1),X.call(w,z)}function w(U,X,z){if(!!X.currentvalue.visible){var B=X._dims,j,V;switch(X.currentvalue.xanchor){case"right":j=B.inputAreaLength-l.currentValueInset-B.currentValueMaxWidth,V="left";break;case"center":j=B.inputAreaLength*.5,V="middle";break;default:j=l.currentValueInset,V="left"}var K=t.ensureSingle(U,"text",l.labelClass,function(H){H.attr({"text-anchor":V,"data-notex":1})}),te=X.currentvalue.prefix?X.currentvalue.prefix:"";if(typeof z=="string")te+=z;else{var $=X.steps[X.active].label,ie=X._gd._fullLayout._meta;ie&&($=t.templateString($,ie)),te+=$}X.currentvalue.suffix&&(te+=X.currentvalue.suffix),K.call(c.font,X.currentvalue.font).text(te).call(n.convertToTspans,X._gd);var se=n.lineCount(K),Q=(B.currentValueMaxLines+1-se)*X.currentvalue.font.size*i;return n.positionText(K,j,Q),K}}function y(U,X,z){var B=t.ensureSingle(U,"rect",l.gripRectClass,function(j){j.call(I,X,U,z).style("pointer-events","all")});B.attr({width:l.gripWidth,height:l.gripHeight,rx:l.gripRadius,ry:l.gripRadius}).call(u.stroke,z.bordercolor).call(u.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function T(U,X,z){var B=t.ensureSingle(U,"text",l.labelClass,function(K){K.attr({"text-anchor":"middle","data-notex":1})}),j=X.step.label,V=z._gd._fullLayout._meta;return V&&(j=t.templateString(j,V)),B.call(c.font,z.font).text(j).call(n.convertToTspans,z._gd),B}function M(U,X){var z=t.ensureSingle(U,"g",l.labelsClass),B=X._dims,j=z.selectAll("g."+l.labelGroupClass).data(B.labelSteps);j.enter().append("g").classed(l.labelGroupClass,!0),j.exit().remove(),j.each(function(V){var K=r.select(this);K.call(T,V,X),c.setTranslate(K,D(X,V.fraction),l.tickOffset+X.ticklen+X.font.size*i+l.labelOffset+B.currentValueTotalHeight)})}function P(U,X,z,B,j){var V=Math.round(B*(z._stepCount-1)),K=z._visibleSteps[V]._index;K!==z.active&&L(U,X,z,K,!0,j)}function L(U,X,z,B,j,V){var K=z.active;z.active=B,o(U.layout,l.name,z).applyUpdate("active",B);var te=z.steps[z.active];X.call(C,z,V),X.call(w,z),U.emit("plotly_sliderchange",{slider:z,step:z.steps[z.active],interaction:j,previousActive:K}),te&&te.method&&j&&(X._nextMethod?(X._nextMethod.step=te,X._nextMethod.doCallback=j,X._nextMethod.doTransition=V):(X._nextMethod={step:te,doCallback:j,doTransition:V},X._nextMethodRaf=window.requestAnimationFrame(function(){var $=X._nextMethod.step;!$.method||($.execute&&a.executeAPICommand(U,$.method,$.args),X._nextMethod=null,X._nextMethodRaf=null)})))}function I(U,X,z){var B=z.node(),j=r.select(X);function V(){return z.data()[0]}U.on("mousedown",function(){var K=V();X.emit("plotly_sliderstart",{slider:K});var te=z.select("."+l.gripRectClass);r.event.stopPropagation(),r.event.preventDefault(),te.call(u.fill,K.activebgcolor);var $=F(K,r.mouse(B)[0]);P(X,z,K,$,!0),K._dragging=!0,j.on("mousemove",function(){var ie=V(),se=F(ie,r.mouse(B)[0]);P(X,z,ie,se,!1)}),j.on("mouseup",function(){var ie=V();ie._dragging=!1,te.call(u.fill,ie.bgcolor),j.on("mouseup",null),j.on("mousemove",null),X.emit("plotly_sliderend",{slider:ie,step:ie.steps[ie.active]})})})}function E(U,X){var z=U.selectAll("rect."+l.tickRectClass).data(X._visibleSteps),B=X._dims;z.enter().append("rect").classed(l.tickRectClass,!0),z.exit().remove(),z.attr({width:X.tickwidth+"px","shape-rendering":"crispEdges"}),z.each(function(j,V){var K=V%B.labelStride===0,te=r.select(this);te.attr({height:K?X.ticklen:X.minorticklen}).call(u.fill,X.tickcolor),c.setTranslate(te,D(X,V/(X._stepCount-1))-.5*X.tickwidth,(K?l.tickOffset:l.minorTickOffset)+B.currentValueTotalHeight)})}function k(U){var X=U._dims;X.labelSteps=[];for(var z=U._stepCount,B=0;B<z;B+=X.labelStride)X.labelSteps.push({fraction:B/(z-1),step:U._visibleSteps[B]})}function C(U,X,z){for(var B=U.select("rect."+l.gripRectClass),j=0,V=0;V<X._stepCount;V++)if(X._visibleSteps[V]._index===X.active){j=V;break}var K=D(X,j/(X._stepCount-1));if(!X._invokingCommand){var te=B;z&&X.transition.duration>0&&(te=te.transition().duration(X.transition.duration).ease(X.transition.easing)),te.attr("transform",f(K-l.gripWidth*.5,X._dims.currentValueTotalHeight))}}function D(U,X){var z=U._dims;return z.inputAreaStart+l.stepInset+(z.inputAreaLength-2*l.stepInset)*Math.min(1,Math.max(0,X))}function F(U,X){var z=U._dims;return Math.min(1,Math.max(0,(X-l.stepInset-z.inputAreaStart)/(z.inputAreaLength-2*l.stepInset-2*z.inputAreaStart)))}function N(U,X,z){var B=z._dims,j=t.ensureSingle(U,"rect",l.railTouchRectClass,function(V){V.call(I,X,U,z).style("pointer-events","all")});j.attr({width:B.inputAreaLength,height:Math.max(B.inputAreaWidth,l.tickOffset+z.ticklen+B.labelHeight)}).call(u.fill,z.bgcolor).attr("opacity",0),c.setTranslate(j,0,B.currentValueTotalHeight)}function G(U,X){var z=X._dims,B=z.inputAreaLength-l.railInset*2,j=t.ensureSingle(U,"rect",l.railRectClass);j.attr({width:B,height:l.railWidth,rx:l.railRadius,ry:l.railRadius,"shape-rendering":"crispEdges"}).call(u.stroke,X.bordercolor).call(u.fill,X.bgcolor).style("stroke-width",X.borderwidth+"px"),c.setTranslate(j,l.railInset,(z.inputAreaWidth-l.railWidth)*.5+z.currentValueTotalHeight)}},{"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plot_api/plot_template":817,"../../plots/plots":891,"../color":643,"../drawing":665,"./constants":734,d3:169}],737:[function(e,v,S){var r=e("./constants");v.exports={moduleType:"component",name:r.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":733,"./constants":734,"./defaults":735,"./draw":736}],738:[function(e,v,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("../../plots/plots"),c=e("../../registry"),t=e("../../lib"),f=t.strTranslate,n=e("../drawing"),o=e("../color"),l=e("../../lib/svg_text_utils"),h=e("../../constants/interactions"),i=e("../../constants/alignment").OPPOSITE_SIDE,s=/ [XY][0-9]* /;function p(d,g,b){var m=b.propContainer,x=b.propName,w=b.placeholder,y=b.traceIndex,T=b.avoid||{},M=b.attributes,P=b.transform,L=b.containerGroup,I=d._fullLayout,E=1,k=!1,C=m.title,D=(C&&C.text?C.text:"").trim(),F=C&&C.font?C.font:{},N=F.family,G=F.size,U=F.color,X;x==="title.text"?X="titleText":x.indexOf("axis")!==-1?X="axisTitleText":x.indexOf("colorbar"!==-1)&&(X="colorbarTitleText");var z=d._context.edits[X];D===""?E=0:D.replace(s," % ")===w.replace(s," % ")&&(E=.2,k=!0,z||(D="")),b._meta?D=t.templateString(D,b._meta):I._meta&&(D=t.templateString(D,I._meta));var B=D||z;L||(L=t.ensureSingle(I._infolayer,"g","g-"+g));var j=L.selectAll("text").data(B?[0]:[]);if(j.enter().append("text"),j.text(D).attr("class",g),j.exit().remove(),!B)return L;function V(ie){t.syncOrAsync([K,te],ie)}function K(ie){var se;return P?(se="",P.rotate&&(se+="rotate("+[P.rotate,M.x,M.y]+")"),P.offset&&(se+=f(0,P.offset))):se=null,ie.attr("transform",se),ie.style({"font-family":N,"font-size":r.round(G,2)+"px",fill:o.rgb(U),opacity:E*o.opacity(U),"font-weight":u.fontWeight}).attr(M).call(l.convertToTspans,d),u.previousPromises(d)}function te(ie){var se=r.select(ie.node().parentNode);if(T&&T.selection&&T.side&&D){se.attr("transform",null);var Q=i[T.side],H=T.side==="left"||T.side==="top"?-1:1,oe=a(T.pad)?T.pad:2,re=n.bBox(se.node()),ee={left:0,top:0,right:I.width,bottom:I.height},ae=T.maxShift||H*(ee[T.side]-re[T.side]),fe=0;if(ae<0)fe=ae;else{var de=T.offsetLeft||0,pe=T.offsetTop||0;re.left-=de,re.right-=de,re.top-=pe,re.bottom-=pe,T.selection.each(function(){var ue=n.bBox(this);t.bBoxIntersect(re,ue,oe)&&(fe=Math.max(fe,H*(ue[T.side]-re[Q])+oe))}),fe=Math.min(ae,fe)}if(fe>0||ae<0){var W={left:[-fe,0],right:[fe,0],top:[0,-fe],bottom:[0,fe]}[T.side];se.attr("transform",f(W[0],W[1]))}}}j.call(V);function $(){E=0,k=!0,j.text(w).on("mouseover.opacity",function(){r.select(this).transition().duration(h.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(h.HIDE_PLACEHOLDER).style("opacity",0)})}return z&&(D?j.on(".opacity",null):$(),j.call(l.makeEditable,{gd:d}).on("edit",function(ie){y!==void 0?c.call("_guiRestyle",d,x,ie,y):c.call("_guiRelayout",d,x,ie)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(V)}).on("input",function(ie){this.text(ie||" ").call(l.positionText,M.x,M.y)})),j.classed("js-placeholder",k),L}v.exports={draw:p}},{"../../constants/alignment":745,"../../constants/interactions":752,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../../registry":911,"../color":643,"../drawing":665,d3:169,"fast-isnumeric":241}],739:[function(e,v,S){var r=e("../../plots/font_attributes"),a=e("../color/attributes"),u=e("../../lib/extend").extendFlat,c=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/pad_attributes"),f=e("../../plot_api/plot_template").templatedArray,n=f("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});v.exports=c(f("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:n,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:u(t({editType:"arraydraw"}),{}),font:r({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:a.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/font_attributes":856,"../../plots/pad_attributes":890,"../color/attributes":642}],740:[function(e,v,S){v.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],741:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/array_container_defaults"),u=e("./attributes"),c=e("./constants"),t=c.name,f=u.buttons;v.exports=function(h,i){var s={name:t,handleItemDefaults:n};a(h,i,s)};function n(l,h,i){function s(g,b){return r.coerce(l,h,u,g,b)}var p=a(l,h,{name:"buttons",handleItemDefaults:o}),d=s("visible",p.length>0);!d||(s("active"),s("direction"),s("type"),s("showactive"),s("x"),s("y"),r.noneOrAll(l,h,["x","y"]),s("xanchor"),s("yanchor"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),r.coerceFont(s,"font",i.font),s("bgcolor",i.paper_bgcolor),s("bordercolor"),s("borderwidth"))}function o(l,h){function i(p,d){return r.coerce(l,h,f,p,d)}var s=i("visible",l.method==="skip"||Array.isArray(l.args));s&&(i("method"),i("args"),i("args2"),i("label"),i("execute"))}},{"../../lib":778,"../../plots/array_container_defaults":823,"./attributes":739,"./constants":740}],742:[function(e,v,S){var r=e("d3"),a=e("../../plots/plots"),u=e("../color"),c=e("../drawing"),t=e("../../lib"),f=e("../../lib/svg_text_utils"),n=e("../../plot_api/plot_template").arrayEditor,o=e("../../constants/alignment").LINE_SPACING,l=e("./constants"),h=e("./scrollbox");v.exports=function(F){var N=F._fullLayout,G=t.filterVisible(N[l.name]);function U($){a.autoMargin(F,E($))}var X=N._menulayer.selectAll("g."+l.containerClassName).data(G.length>0?[0]:[]);if(X.enter().append("g").classed(l.containerClassName,!0).style("cursor","pointer"),X.exit().each(function(){r.select(this).selectAll("g."+l.headerGroupClassName).each(U)}).remove(),G.length!==0){var z=X.selectAll("g."+l.headerGroupClassName).data(G,i);z.enter().append("g").classed(l.headerGroupClassName,!0);for(var B=t.ensureSingle(X,"g",l.dropdownButtonGroupClassName,function($){$.style("pointer-events","all")}),j=0;j<G.length;j++){var V=G[j];I(F,V)}var K="updatemenus"+N._uid,te=new h(F,B,K);z.enter().size()&&(B.node().parentNode.appendChild(B.node()),B.call(C)),z.exit().each(function($){B.call(C),U($)}).remove(),z.each(function($){var ie=r.select(this),se=$.type==="dropdown"?B:null;a.manageCommandObserver(F,$,$.buttons,function(Q){d(F,$,$.buttons[Q.index],ie,se,te,Q.index,!0)}),$.type==="dropdown"?(g(F,ie,B,te,$),p(B,$)&&b(F,ie,B,te,$)):b(F,ie,null,null,$)})}};function i(D){return D._index}function s(D){return+D.attr(l.menuIndexAttrName)==-1}function p(D,F){return+D.attr(l.menuIndexAttrName)===F._index}function d(D,F,N,G,U,X,z,B){F.active=z,n(D.layout,l.name,F).applyUpdate("active",z),F.type==="buttons"?b(D,G,null,null,F):F.type==="dropdown"&&(U.attr(l.menuIndexAttrName,"-1"),g(D,G,U,X,F),B||b(D,G,U,X,F))}function g(D,F,N,G,U){var X=t.ensureSingle(F,"g",l.headerClassName,function($){$.style("pointer-events","all")}),z=U._dims,B=U.active,j=U.buttons[B]||l.blankHeaderOpts,V={y:U.pad.t,yPad:0,x:U.pad.l,xPad:0,index:0},K={width:z.headerWidth,height:z.headerHeight};X.call(w,U,j,D).call(k,U,V,K);var te=t.ensureSingle(F,"text",l.headerArrowClassName,function($){$.attr("text-anchor","end").call(c.font,U.font).text(l.arrowSymbol[U.direction])});te.attr({x:z.headerWidth-l.arrowOffsetX+U.pad.l,y:z.headerHeight/2+l.textOffsetY+U.pad.t}),X.on("click",function(){N.call(C,String(p(N,U)?-1:U._index)),b(D,F,N,G,U)}),X.on("mouseover",function(){X.call(P)}),X.on("mouseout",function(){X.call(L,U)}),c.setTranslate(F,z.lx,z.ly)}function b(D,F,N,G,U){N||(N=F,N.attr("pointer-events","all"));var X=!s(N)||U.type==="buttons"?U.buttons:[],z=U.type==="dropdown"?l.dropdownButtonClassName:l.buttonClassName,B=N.selectAll("g."+z).data(t.filterVisible(X)),j=B.enter().append("g").classed(z,!0),V=B.exit();U.type==="dropdown"?(j.attr("opacity","0").transition().attr("opacity","1"),V.transition().attr("opacity","0").remove()):V.remove();var K=0,te=0,$=U._dims,ie=["up","down"].indexOf(U.direction)!==-1;U.type==="dropdown"&&(ie?te=$.headerHeight+l.gapButtonHeader:K=$.headerWidth+l.gapButtonHeader),U.type==="dropdown"&&U.direction==="up"&&(te=-l.gapButtonHeader+l.gapButton-$.openHeight),U.type==="dropdown"&&U.direction==="left"&&(K=-l.gapButtonHeader+l.gapButton-$.openWidth);var se={x:$.lx+K+U.pad.l,y:$.ly+te+U.pad.t,yPad:l.gapButton,xPad:l.gapButton,index:0},Q={l:se.x+U.borderwidth,t:se.y+U.borderwidth};B.each(function(H,oe){var re=r.select(this);re.call(w,U,H,D).call(k,U,se),re.on("click",function(){r.event.defaultPrevented||(H.execute&&(H.args2&&U.active===oe?(d(D,U,H,F,N,G,-1),a.executeAPICommand(D,H.method,H.args2)):(d(D,U,H,F,N,G,oe),a.executeAPICommand(D,H.method,H.args))),D.emit("plotly_buttonclicked",{menu:U,button:H,active:U.active}))}),re.on("mouseover",function(){re.call(P)}),re.on("mouseout",function(){re.call(L,U),B.call(M,U)})}),B.call(M,U),ie?(Q.w=Math.max($.openWidth,$.headerWidth),Q.h=se.y-Q.t):(Q.w=se.x-Q.l,Q.h=Math.max($.openHeight,$.headerHeight)),Q.direction=U.direction,G&&(B.size()?m(D,F,N,G,U,Q):x(G))}function m(D,F,N,G,U,X){var z=U.direction,B=z==="up"||z==="down",j=U._dims,V=U.active,K,te,$;if(B)for(te=0,$=0;$<V;$++)te+=j.heights[$]+l.gapButton;else for(K=0,$=0;$<V;$++)K+=j.widths[$]+l.gapButton;G.enable(X,K,te),G.hbar&&G.hbar.attr("opacity","0").transition().attr("opacity","1"),G.vbar&&G.vbar.attr("opacity","0").transition().attr("opacity","1")}function x(D){var F=!!D.hbar,N=!!D.vbar;F&&D.hbar.transition().attr("opacity","0").each("end",function(){F=!1,N||D.disable()}),N&&D.vbar.transition().attr("opacity","0").each("end",function(){N=!1,F||D.disable()})}function w(D,F,N,G){D.call(y,F).call(T,F,N,G)}function y(D,F){var N=t.ensureSingle(D,"rect",l.itemRectClassName,function(G){G.attr({rx:l.rx,ry:l.ry,"shape-rendering":"crispEdges"})});N.call(u.stroke,F.bordercolor).call(u.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function T(D,F,N,G){var U=t.ensureSingle(D,"text",l.itemTextClassName,function(B){B.attr({"text-anchor":"start","data-notex":1})}),X=N.label,z=G._fullLayout._meta;z&&(X=t.templateString(X,z)),U.call(c.font,F.font).text(X).call(f.convertToTspans,G)}function M(D,F){var N=F.active;D.each(function(G,U){var X=r.select(this);U===N&&F.showactive&&X.select("rect."+l.itemRectClassName).call(u.fill,l.activeColor)})}function P(D){D.select("rect."+l.itemRectClassName).call(u.fill,l.hoverColor)}function L(D,F){D.select("rect."+l.itemRectClassName).call(u.fill,F.bgcolor)}function I(D,F){var N=F._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},G=c.tester.selectAll("g."+l.dropdownButtonClassName).data(t.filterVisible(F.buttons));G.enter().append("g").classed(l.dropdownButtonClassName,!0);var U=["up","down"].indexOf(F.direction)!==-1;G.each(function(K,te){var $=r.select(this);$.call(w,F,K,D);var ie=$.select("."+l.itemTextClassName),se=ie.node()&&c.bBox(ie.node()).width,Q=Math.max(se+l.textPadX,l.minWidth),H=F.font.size*o,oe=f.lineCount(ie),re=Math.max(H*oe,l.minHeight)+l.textOffsetY;re=Math.ceil(re),Q=Math.ceil(Q),N.widths[te]=Q,N.heights[te]=re,N.height1=Math.max(N.height1,re),N.width1=Math.max(N.width1,Q),U?(N.totalWidth=Math.max(N.totalWidth,Q),N.openWidth=N.totalWidth,N.totalHeight+=re+l.gapButton,N.openHeight+=re+l.gapButton):(N.totalWidth+=Q+l.gapButton,N.openWidth+=Q+l.gapButton,N.totalHeight=Math.max(N.totalHeight,re),N.openHeight=N.totalHeight)}),U?N.totalHeight-=l.gapButton:N.totalWidth-=l.gapButton,N.headerWidth=N.width1+l.arrowPadX,N.headerHeight=N.height1,F.type==="dropdown"&&(U?(N.width1+=l.arrowPadX,N.totalHeight=N.height1):N.totalWidth=N.width1,N.totalWidth+=l.arrowPadX),G.remove();var X=N.totalWidth+F.pad.l+F.pad.r,z=N.totalHeight+F.pad.t+F.pad.b,B=D._fullLayout._size;N.lx=B.l+B.w*F.x,N.ly=B.t+B.h*(1-F.y);var j="left";t.isRightAnchor(F)&&(N.lx-=X,j="right"),t.isCenterAnchor(F)&&(N.lx-=X/2,j="center");var V="top";t.isBottomAnchor(F)&&(N.ly-=z,V="bottom"),t.isMiddleAnchor(F)&&(N.ly-=z/2,V="middle"),N.totalWidth=Math.ceil(N.totalWidth),N.totalHeight=Math.ceil(N.totalHeight),N.lx=Math.round(N.lx),N.ly=Math.round(N.ly),a.autoMargin(D,E(F),{x:F.x,y:F.y,l:X*({right:1,center:.5}[j]||0),r:X*({left:1,center:.5}[j]||0),b:z*({top:1,middle:.5}[V]||0),t:z*({bottom:1,middle:.5}[V]||0)})}function E(D){return l.autoMarginIdRoot+D._index}function k(D,F,N,G){G=G||{};var U=D.select("."+l.itemRectClassName),X=D.select("."+l.itemTextClassName),z=F.borderwidth,B=N.index,j=F._dims;c.setTranslate(D,z+N.x,z+N.y);var V=["up","down"].indexOf(F.direction)!==-1,K=G.height||(V?j.heights[B]:j.height1);U.attr({x:0,y:0,width:G.width||(V?j.width1:j.widths[B]),height:K});var te=F.font.size*o,$=f.lineCount(X),ie=($-1)*te/2;f.positionText(X,l.textOffsetX,K/2-ie+l.textOffsetY),V?N.y+=j.heights[B]+N.yPad:N.x+=j.widths[B]+N.xPad,N.index++}function C(D,F){D.attr(l.menuIndexAttrName,F||"-1").selectAll("g."+l.dropdownButtonClassName).remove()}},{"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plot_api/plot_template":817,"../../plots/plots":891,"../color":643,"../drawing":665,"./constants":740,"./scrollbox":744,d3:169}],743:[function(e,v,S){arguments[4][737][0].apply(S,arguments)},{"./attributes":739,"./constants":740,"./defaults":741,"./draw":742,dup:737}],744:[function(e,v,S){v.exports=t;var r=e("d3"),a=e("../color"),u=e("../drawing"),c=e("../../lib");function t(f,n,o){this.gd=f,this.container=n,this.id=o,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}t.barWidth=2,t.barLength=20,t.barRadius=2,t.barPad=1,t.barColor="#808BA4",t.prototype.enable=function(n,o,l){var h=this.gd._fullLayout,i=h.width,s=h.height;this.position=n;var p=this.position.l,d=this.position.w,g=this.position.t,b=this.position.h,m=this.position.direction,x=m==="down",w=m==="left",y=m==="right",T=m==="up",M=d,P=b,L,I,E,k;!x&&!w&&!y&&!T&&(this.position.direction="down",x=!0);var C=x||T;C?(L=p,I=L+M,x?(E=g,k=Math.min(E+P,s),P=k-E):(k=g+P,E=Math.max(k-P,0),P=k-E)):(E=g,k=E+P,w?(I=p+M,L=Math.max(I-M,0),M=I-L):(L=p,I=Math.min(L+M,i),M=I-L)),this._box={l:L,t:E,w:M,h:P};var D=d>M,F=t.barLength+2*t.barPad,N=t.barWidth+2*t.barPad,G=p,U=g+b;U+N>s&&(U=s-N);var X=this.container.selectAll("rect.scrollbar-horizontal").data(D?[0]:[]);X.exit().on(".drag",null).remove(),X.enter().append("rect").classed("scrollbar-horizontal",!0).call(a.fill,t.barColor),D?(this.hbar=X.attr({rx:t.barRadius,ry:t.barRadius,x:G,y:U,width:F,height:N}),this._hbarXMin=G+F/2,this._hbarTranslateMax=M-F):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var z=b>P,B=t.barWidth+2*t.barPad,j=t.barLength+2*t.barPad,V=p+d,K=g;V+B>i&&(V=i-B);var te=this.container.selectAll("rect.scrollbar-vertical").data(z?[0]:[]);te.exit().on(".drag",null).remove(),te.enter().append("rect").classed("scrollbar-vertical",!0).call(a.fill,t.barColor),z?(this.vbar=te.attr({rx:t.barRadius,ry:t.barRadius,x:V,y:K,width:B,height:j}),this._vbarYMin=K+j/2,this._vbarTranslateMax=P-j):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var $=this.id,ie=L-.5,se=z?I+B+.5:I+.5,Q=E-.5,H=D?k+N+.5:k+.5,oe=h._topdefs.selectAll("#"+$).data(D||z?[0]:[]);if(oe.exit().remove(),oe.enter().append("clipPath").attr("id",$).append("rect"),D||z?(this._clipRect=oe.select("rect").attr({x:Math.floor(ie),y:Math.floor(Q),width:Math.ceil(se)-Math.floor(ie),height:Math.ceil(H)-Math.floor(Q)}),this.container.call(u.setClipUrl,$,this.gd),this.bg.attr({x:p,y:g,width:d,height:b})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(u.setClipUrl,null),delete this._clipRect),D||z){var re=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(re);var ee=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault(),r.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));D&&this.hbar.on(".drag",null).call(ee),z&&this.vbar.on(".drag",null).call(ee)}this.setTranslate(o,l)},t.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(u.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},t.prototype._onBoxDrag=function(){var n=this.translateX,o=this.translateY;this.hbar&&(n-=r.event.dx),this.vbar&&(o-=r.event.dy),this.setTranslate(n,o)},t.prototype._onBoxWheel=function(){var n=this.translateX,o=this.translateY;this.hbar&&(n+=r.event.deltaY),this.vbar&&(o+=r.event.deltaY),this.setTranslate(n,o)},t.prototype._onBarDrag=function(){var n=this.translateX,o=this.translateY;if(this.hbar){var l=n+this._hbarXMin,h=l+this._hbarTranslateMax,i=c.constrain(r.event.x,l,h),s=(i-l)/(h-l),p=this.position.w-this._box.w;n=s*p}if(this.vbar){var d=o+this._vbarYMin,g=d+this._vbarTranslateMax,b=c.constrain(r.event.y,d,g),m=(b-d)/(g-d),x=this.position.h-this._box.h;o=m*x}this.setTranslate(n,o)},t.prototype.setTranslate=function(n,o){var l=this.position.w-this._box.w,h=this.position.h-this._box.h;if(n=c.constrain(n||0,0,l),o=c.constrain(o||0,0,h),this.translateX=n,this.translateY=o,this.container.call(u.setTranslate,this._box.l-this.position.l-n,this._box.t-this.position.t-o),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+n-.5),y:Math.floor(this.position.t+o-.5)}),this.hbar){var i=n/l;this.hbar.call(u.setTranslate,n+i*this._hbarTranslateMax,o)}if(this.vbar){var s=o/h;this.vbar.call(u.setTranslate,n,o+s*this._vbarTranslateMax)}}},{"../../lib":778,"../color":643,"../drawing":665,d3:169}],745:[function(e,v,S){v.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],746:[function(e,v,S){v.exports={axisRefDescription:function(r,a,u){return["If set to a",r,"axis id (e.g. *"+r+"* or","*"+r+"2*), the `"+r+"` position refers to a",r,"coordinate. If set to *paper*, the `"+r+"`","position refers to the distance from the",a,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",a,"("+u+"). If set to a",r,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",a,"of the domain of that axis: e.g.,","*"+r+"2 domain* refers to the domain of the second",r," axis and a",r,"position of 0.5 refers to the","point between the",a,"and the",u,"of the domain of the","second",r,"axis."].join(" ")}}},{}],747:[function(e,v,S){v.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],748:[function(e,v,S){v.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],749:[function(e,v,S){v.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],750:[function(e,v,S){v.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],751:[function(e,v,S){v.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],752:[function(e,v,S){v.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],753:[function(e,v,S){v.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],754:[function(e,v,S){S.xmlns="http://www.w3.org/2000/xmlns/",S.svg="http://www.w3.org/2000/svg",S.xlink="http://www.w3.org/1999/xlink",S.svgAttrs={xmlns:S.svg,"xmlns:xlink":S.xlink}},{}],755:[function(e,v,S){S.version=e("./version").version,e("es6-promise").polyfill(),e("../build/plotcss"),e("./fonts/mathjax_config")();for(var r=e("./registry"),a=S.register=r.register,u=e("./plot_api"),c=Object.keys(u),t=0;t<c.length;t++){var f=c[t];f.charAt(0)!=="_"&&(S[f]=u[f]),a({moduleType:"apiMethod",name:f,fn:u[f]})}a(e("./traces/scatter")),a([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar")]),a([e("./locale-en"),e("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(a(window.PlotlyLocales),delete window.PlotlyLocales),S.Icons=e("./fonts/ploticon"),S.Plots=e("./plots/plots"),S.Fx=e("./components/fx"),S.Snapshot=e("./snapshot"),S.PlotSchema=e("./plot_api/plot_schema"),S.Queue=e("./lib/queue"),S.d3=e("d3")},{"../build/plotcss":1,"./components/annotations":634,"./components/annotations3d":639,"./components/colorbar":649,"./components/colorscale":655,"./components/errorbars":671,"./components/fx":683,"./components/grid":687,"./components/images":692,"./components/legend":700,"./components/rangeselector":711,"./components/rangeslider":718,"./components/shapes":732,"./components/sliders":737,"./components/updatemenus":743,"./fonts/mathjax_config":756,"./fonts/ploticon":757,"./lib/queue":794,"./locale-en":808,"./locale-en-us":807,"./plot_api":812,"./plot_api/plot_schema":816,"./plots/plots":891,"./registry":911,"./snapshot":916,"./traces/scatter":1199,"./version":1370,d3:169,"es6-promise":224}],756:[function(e,v,S){v.exports=function(){if(typeof MathJax<"u"){var r=(window.PlotlyConfig||{}).MathJaxConfig!=="local";r&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}}},{}],757:[function(e,v,S){v.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],758:[function(e,v,S){S.isLeftAnchor=function(a){return a.xanchor==="left"||a.xanchor==="auto"&&a.x<=1/3},S.isCenterAnchor=function(a){return a.xanchor==="center"||a.xanchor==="auto"&&a.x>1/3&&a.x<2/3},S.isRightAnchor=function(a){return a.xanchor==="right"||a.xanchor==="auto"&&a.x>=2/3},S.isTopAnchor=function(a){return a.yanchor==="top"||a.yanchor==="auto"&&a.y>=2/3},S.isMiddleAnchor=function(a){return a.yanchor==="middle"||a.yanchor==="auto"&&a.y>1/3&&a.y<2/3},S.isBottomAnchor=function(a){return a.yanchor==="bottom"||a.yanchor==="auto"&&a.y<=1/3}},{}],759:[function(e,v,S){var r=e("./mod"),a=r.mod,u=r.modHalf,c=Math.PI,t=2*c;function f(m){return m/180*c}function n(m){return m/c*180}function o(m){return Math.abs(m[1]-m[0])>t-1e-14}function l(m,x){return u(x-m,t)}function h(m,x){return Math.abs(l(m,x))}function i(m,x){if(o(x))return!0;var w,y;x[0]<x[1]?(w=x[0],y=x[1]):(w=x[1],y=x[0]),w=a(w,t),y=a(y,t),w>y&&(y+=t);var T=a(m,t),M=T+t;return T>=w&&T<=y||M>=w&&M<=y}function s(m,x,w,y){if(!i(x,y))return!1;var T,M;return w[0]<w[1]?(T=w[0],M=w[1]):(T=w[1],M=w[0]),m>=T&&m<=M}function p(m,x,w,y,T,M,P){T=T||0,M=M||0;var L=o([w,y]),I,E,k,C,D;L?(I=0,E=c,k=t):w<y?(I=w,k=y):(I=y,k=w),m<x?(C=m,D=x):(C=x,D=m);function F(X,z){return[X*Math.cos(z)+T,M-X*Math.sin(z)]}var N=Math.abs(k-I)<=c?0:1;function G(X,z,B){return"A"+[X,X]+" "+[0,N,B]+" "+F(X,z)}var U;return L?C===null?U="M"+F(D,I)+G(D,E,0)+G(D,k,0)+"Z":U="M"+F(C,I)+G(C,E,0)+G(C,k,0)+"ZM"+F(D,I)+G(D,E,1)+G(D,k,1)+"Z":C===null?(U="M"+F(D,I)+G(D,k,0),P&&(U+="L0,0Z")):U="M"+F(C,I)+"L"+F(D,I)+G(D,k,0)+"L"+F(C,k)+G(C,I,1)+"Z",U}function d(m,x,w,y,T){return p(null,m,x,w,y,T,0)}function g(m,x,w,y,T){return p(null,m,x,w,y,T,1)}function b(m,x,w,y,T,M){return p(m,x,w,y,T,M,1)}v.exports={deg2rad:f,rad2deg:n,angleDelta:l,angleDist:h,isFullCircle:o,isAngleInsideSector:i,isPtInsideSector:s,pathArc:d,pathSector:g,pathAnnulus:b}},{"./mod":785}],760:[function(e,v,S){var r=Array.isArray,a=typeof ArrayBuffer>"u"||!ArrayBuffer.isView?{isView:function(){return!1}}:ArrayBuffer,u=typeof DataView>"u"?function(){}:DataView;function c(o){return a.isView(o)&&!(o instanceof u)}S.isTypedArray=c;function t(o){return r(o)||c(o)}S.isArrayOrTypedArray=t;function f(o){return!t(o[0])}S.isArray1D=f,S.ensureArray=function(o,l){return r(o)||(o=[]),o.length=l,o},S.concat=function(){var o=[],l=!0,h=0,i,s,p,d,g,b,m,x;for(p=0;p<arguments.length;p++)d=arguments[p],b=d.length,b&&(s?o.push(d):(s=d,g=b),r(d)?i=!1:(l=!1,h?i!==d.constructor&&(i=!1):i=d.constructor),h+=b);if(!h)return[];if(!o.length)return s;if(l)return s.concat.apply(s,o);if(i){for(m=new i(h),m.set(s),p=0;p<o.length;p++)d=o[p],m.set(d,g),g+=d.length;return m}for(m=new Array(h),x=0;x<s.length;x++)m[x]=s[x];for(p=0;p<o.length;p++){for(d=o[p],x=0;x<d.length;x++)m[g+x]=d[x];g+=x}return m},S.maxRowLength=function(o){return n(o,Math.max,0)},S.minRowLength=function(o){return n(o,Math.min,1/0)};function n(o,l,h){if(t(o))if(t(o[0])){for(var i=h,s=0;s<o.length;s++)i=l(i,o[s].length);return i}else return o.length;return 0}},{}],761:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../constants/numerical").BADNUM,u=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;v.exports=function(t){return typeof t=="string"&&(t=t.replace(u,"")),r(t)?Number(t):a}},{"../constants/numerical":753,"fast-isnumeric":241}],762:[function(e,v,S){v.exports=function(a){var u=a._fullLayout;u._glcanvas&&u._glcanvas.size()&&u._glcanvas.each(function(c){c.regl&&c.regl.clear({color:!0,depth:!0})})}},{}],763:[function(e,v,S){v.exports=function(a){a._responsiveChartHandler&&(window.removeEventListener("resize",a._responsiveChartHandler),delete a._responsiveChartHandler)}},{}],764:[function(e,v,S){var r=e("fast-isnumeric"),a=e("tinycolor2"),u=e("../plots/attributes"),c=e("../components/colorscale/scales"),t=e("../constants/interactions").DESELECTDIM,f=e("./nested_property"),n=e("./regex").counter,o=e("./mod").modHalf,l=e("./array").isArrayOrTypedArray;S.valObjectMeta={data_array:{coerceFunction:function(i,s,p){l(i)?s.set(i):p!==void 0&&s.set(p)}},enumerated:{coerceFunction:function(i,s,p,d){d.coerceNumber&&(i=+i),d.values.indexOf(i)===-1?s.set(p):s.set(i)},validateFunction:function(i,s){s.coerceNumber&&(i=+i);for(var p=s.values,d=0;d<p.length;d++){var g=String(p[d]);if(g.charAt(0)==="/"&&g.charAt(g.length-1)==="/"){var b=new RegExp(g.substr(1,g.length-2));if(b.test(i))return!0}else if(i===p[d])return!0}return!1}},boolean:{coerceFunction:function(i,s,p){i===!0||i===!1?s.set(i):s.set(p)}},number:{coerceFunction:function(i,s,p,d){!r(i)||d.min!==void 0&&i<d.min||d.max!==void 0&&i>d.max?s.set(p):s.set(+i)}},integer:{coerceFunction:function(i,s,p,d){i%1||!r(i)||d.min!==void 0&&i<d.min||d.max!==void 0&&i>d.max?s.set(p):s.set(+i)}},string:{coerceFunction:function(i,s,p,d){if(typeof i!="string"){var g=typeof i=="number";d.strict===!0||!g?s.set(p):s.set(String(i))}else d.noBlank&&!i?s.set(p):s.set(i)}},color:{coerceFunction:function(i,s,p){a(i).isValid()?s.set(i):s.set(p)}},colorlist:{coerceFunction:function(i,s,p){function d(g){return a(g).isValid()}!Array.isArray(i)||!i.length?s.set(p):i.every(d)?s.set(i):s.set(p)}},colorscale:{coerceFunction:function(i,s,p){s.set(c.get(i,p))}},angle:{coerceFunction:function(i,s,p){i==="auto"?s.set("auto"):r(i)?s.set(o(+i,360)):s.set(p)}},subplotid:{coerceFunction:function(i,s,p,d){var g=d.regex||n(p);if(typeof i=="string"&&g.test(i)){s.set(i);return}s.set(p)},validateFunction:function(i,s){var p=s.dflt;return i===p?!0:typeof i!="string"?!1:!!n(p).test(i)}},flaglist:{coerceFunction:function(i,s,p,d){if(typeof i!="string"){s.set(p);return}if((d.extras||[]).indexOf(i)!==-1){s.set(i);return}for(var g=i.split("+"),b=0;b<g.length;){var m=g[b];d.flags.indexOf(m)===-1||g.indexOf(m)<b?g.splice(b,1):b++}g.length?s.set(g.join("+")):s.set(p)}},any:{coerceFunction:function(i,s,p){i===void 0?s.set(p):s.set(i)}},info_array:{coerceFunction:function(i,s,p,d){function g(D,F,N){var G,U={set:function(X){G=X}};return N===void 0&&(N=F.dflt),S.valObjectMeta[F.valType].coerceFunction(D,U,N,F),G}var b=d.dimensions===2||d.dimensions==="1-2"&&Array.isArray(i)&&Array.isArray(i[0]);if(!Array.isArray(i)){s.set(p);return}var m=d.items,x=[],w=Array.isArray(m),y=w&&b&&Array.isArray(m[0]),T=b&&w&&!y,M=w&&!T?m.length:i.length,P,L,I,E,k,C;if(p=Array.isArray(p)?p:[],b)for(P=0;P<M;P++)for(x[P]=[],I=Array.isArray(i[P])?i[P]:[],T?k=m.length:w?k=m[P].length:k=I.length,L=0;L<k;L++)T?E=m[L]:w?E=m[P][L]:E=m,C=g(I[L],E,(p[P]||[])[L]),C!==void 0&&(x[P][L]=C);else for(P=0;P<M;P++)C=g(i[P],w?m[P]:m,p[P]),C!==void 0&&(x[P]=C);s.set(x)},validateFunction:function(i,s){if(!Array.isArray(i))return!1;var p=s.items,d=Array.isArray(p),g=s.dimensions===2;if(!s.freeLength&&i.length!==p.length)return!1;for(var b=0;b<i.length;b++)if(g){if(!Array.isArray(i[b])||!s.freeLength&&i[b].length!==p[b].length)return!1;for(var m=0;m<i[b].length;m++)if(!h(i[b][m],d?p[b][m]:p))return!1}else if(!h(i[b],d?p[b]:p))return!1;return!0}}},S.coerce=function(i,s,p,d,g){var b=f(p,d).get(),m=f(i,d),x=f(s,d),w=m.get(),y=s._template;if(w===void 0&&y&&(w=f(y,d).get(),y=0),g===void 0&&(g=b.dflt),b.arrayOk&&l(w))return x.set(w),w;var T=S.valObjectMeta[b.valType].coerceFunction;T(w,x,g,b);var M=x.get();return y&&M===g&&!h(w,b)&&(w=f(y,d).get(),T(w,x,g,b),M=x.get()),M},S.coerce2=function(i,s,p,d,g){var b=f(i,d),m=S.coerce(i,s,p,d,g),x=b.get();return x!=null?m:!1},S.coerceFont=function(i,s,p){var d={};return p=p||{},d.family=i(s+".family",p.family),d.size=i(s+".size",p.size),d.color=i(s+".color",p.color),d},S.coerceHoverinfo=function(i,s,p){var d=s._module.attributes,g=d.hoverinfo?d:u,b=g.hoverinfo,m;if(p._dataLength===1){var x=b.dflt==="all"?b.flags.slice():b.dflt.split("+");x.splice(x.indexOf("name"),1),m=x.join("+")}return S.coerce(i,s,g,"hoverinfo",m)},S.coerceSelectionMarkerOpacity=function(i,s){if(!!i.marker){var p=i.marker.opacity;if(p!==void 0){var d,g;!l(p)&&!i.selected&&!i.unselected&&(d=p,g=t*p),s("selected.marker.opacity",d),s("unselected.marker.opacity",g)}}};function h(i,s){var p=S.valObjectMeta[s.valType];if(s.arrayOk&&l(i))return!0;if(p.validateFunction)return p.validateFunction(i,s);var d={},g=d,b={set:function(m){g=m}};return p.coerceFunction(i,b,d,s),g!==d}S.validate=h},{"../components/colorscale/scales":658,"../constants/interactions":752,"../plots/attributes":824,"./array":760,"./mod":785,"./nested_property":786,"./regex":795,"fast-isnumeric":241,tinycolor2:576}],765:[function(e,v,S){var r=e("d3-time-format").timeFormat,a=e("fast-isnumeric"),u=e("./loggers"),c=e("./mod").mod,t=e("../constants/numerical"),f=t.BADNUM,n=t.ONEDAY,o=t.ONEHOUR,l=t.ONEMIN,h=t.ONESEC,i=t.EPOCHJD,s=e("../registry"),p=e("d3-time-format").utcFormat,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=new Date().getFullYear()-70;function m(N){return N&&s.componentsRegistry.calendars&&typeof N=="string"&&N!=="gregorian"}S.dateTick0=function(N,G){var U=x(N,!!G);if(G<2)return U;var X=S.dateTime2ms(U,N);return X+=n*(G-1),S.ms2DateTime(X,0,N)};function x(N,G){return m(N)?G?s.getComponentMethod("calendars","CANONICAL_SUNDAY")[N]:s.getComponentMethod("calendars","CANONICAL_TICK")[N]:G?"2000-01-02":"2000-01-01"}S.dfltRange=function(N){return m(N)?s.getComponentMethod("calendars","DFLTRANGE")[N]:["2000-01-01","2001-01-01"]},S.isJSDate=function(N){return typeof N=="object"&&N!==null&&typeof N.getTime=="function"};var w,y;S.dateTime2ms=function(N,G){if(S.isJSDate(N)){var U=N.getTimezoneOffset()*l,X=(N.getUTCMinutes()-N.getMinutes())*l+(N.getUTCSeconds()-N.getSeconds())*h+(N.getUTCMilliseconds()-N.getMilliseconds());if(X){var z=3*l;U=U-z/2+c(X-U+z/2,z)}return N=Number(N)-U,N>=w&&N<=y?N:f}if(typeof N!="string"&&typeof N!="number")return f;N=String(N);var B=m(G),j=N.charAt(0);B&&(j==="G"||j==="g")&&(N=N.substr(1),G="");var V=B&&G.substr(0,7)==="chinese",K=N.match(V?g:d);if(!K)return f;var te=K[1],$=K[3]||"1",ie=Number(K[5]||1),se=Number(K[7]||0),Q=Number(K[9]||0),H=Number(K[11]||0);if(B){if(te.length===2)return f;te=Number(te);var oe;try{var re=s.getComponentMethod("calendars","getCal")(G);if(V){var ee=$.charAt($.length-1)==="i";$=parseInt($,10),oe=re.newDate(te,re.toMonthIndex(te,$,ee),ie)}else oe=re.newDate(te,Number($),ie)}catch{return f}return oe?(oe.toJD()-i)*n+se*o+Q*l+H*h:f}te.length===2?te=(Number(te)+2e3-b)%100+b:te=Number(te),$-=1;var ae=new Date(Date.UTC(2e3,$,ie,se,Q));return ae.setUTCFullYear(te),ae.getUTCMonth()!==$||ae.getUTCDate()!==ie?f:ae.getTime()+H*h},w=S.MIN_MS=S.dateTime2ms("-9999"),y=S.MAX_MS=S.dateTime2ms("9999-12-31 23:59:59.9999"),S.isDateTime=function(N,G){return S.dateTime2ms(N,G)!==f};function T(N,G){return String(N+Math.pow(10,G)).substr(1)}var M=90*n,P=3*o,L=5*l;S.ms2DateTime=function(N,G,U){if(typeof N!="number"||!(N>=w&&N<=y))return f;G||(G=0);var X=Math.floor(c(N+.05,1)*10),z=Math.round(N-X/10),B,j,V,K,te,$;if(m(U)){var ie=Math.floor(z/n)+i,se=Math.floor(c(N,n));try{B=s.getComponentMethod("calendars","getCal")(U).fromJD(ie).formatDate("yyyy-mm-dd")}catch{B=p("G%Y-%m-%d")(new Date(z))}if(B.charAt(0)==="-")for(;B.length<11;)B="-0"+B.substr(1);else for(;B.length<10;)B="0"+B;j=G<M?Math.floor(se/o):0,V=G<M?Math.floor(se%o/l):0,K=G<P?Math.floor(se%l/h):0,te=G<L?se%h*10+X:0}else $=new Date(z),B=p("%Y-%m-%d")($),j=G<M?$.getUTCHours():0,V=G<M?$.getUTCMinutes():0,K=G<P?$.getUTCSeconds():0,te=G<L?$.getUTCMilliseconds()*10+X:0;return I(B,j,V,K,te)},S.ms2DateTimeLocal=function(N){if(!(N>=w+n&&N<=y-n))return f;var G=Math.floor(c(N+.05,1)*10),U=new Date(Math.round(N-G/10)),X=r("%Y-%m-%d")(U),z=U.getHours(),B=U.getMinutes(),j=U.getSeconds(),V=U.getUTCMilliseconds()*10+G;return I(X,z,B,j,V)};function I(N,G,U,X,z){if((G||U||X||z)&&(N+=" "+T(G,2)+":"+T(U,2),(X||z)&&(N+=":"+T(X,2),z))){for(var B=4;z%10===0;)B-=1,z/=10;N+="."+T(z,B)}return N}S.cleanDate=function(N,G,U){if(N===f)return G;if(S.isJSDate(N)||typeof N=="number"&&isFinite(N)){if(m(U))return u.error("JS Dates and milliseconds are incompatible with world calendars",N),G;if(N=S.ms2DateTimeLocal(+N),!N&&G!==void 0)return G}else if(!S.isDateTime(N,U))return u.error("unrecognized date",N),G;return N};var E=/%\d?f/g;function k(N,G,U,X){N=N.replace(E,function(B){var j=Math.min(+B.charAt(1)||6,6),V=(G/1e3%1+2).toFixed(j).substr(2).replace(/0+$/,"")||"0";return V});var z=new Date(Math.floor(G+.05));if(m(X))try{N=s.getComponentMethod("calendars","worldCalFmt")(N,G,X)}catch{return"Invalid"}return U(N)(z)}var C=[59,59.9,59.99,59.999,59.9999];function D(N,G){var U=c(N+.05,n),X=T(Math.floor(U/o),2)+":"+T(c(Math.floor(U/l),60),2);if(G!=="M"){a(G)||(G=0);var z=Math.min(c(N/h,60),C[G]),B=(100+z).toFixed(G).substr(1);G>0&&(B=B.replace(/0+$/,"").replace(/[\.]$/,"")),X+=":"+B}return X}S.formatDate=function(N,G,U,X,z,B){if(z=m(z)&&z,!G)if(U==="y")G=B.year;else if(U==="m")G=B.month;else if(U==="d")G=B.dayMonth+`
`+B.year;else return D(N,U)+`
`+k(B.dayMonthYear,N,X,z);return k(G,N,X,z)};var F=3*n;S.incrementMonth=function(N,G,U){U=m(U)&&U;var X=c(N,n);if(N=Math.round(N-X),U)try{var z=Math.round(N/n)+i,B=s.getComponentMethod("calendars","getCal")(U),j=B.fromJD(z);return G%12?B.add(j,G,"m"):B.add(j,G/12,"y"),(j.toJD()-i)*n+X}catch{u.error("invalid ms "+N+" in calendar "+U)}var V=new Date(N+F);return V.setUTCMonth(V.getUTCMonth()+G)+X-F},S.findExactDates=function(N,G){for(var U=0,X=0,z=0,B=0,j,V,K=m(G)&&s.getComponentMethod("calendars","getCal")(G),te=0;te<N.length;te++){if(V=N[te],!a(V)){B++;continue}if(!(V%n))if(K)try{j=K.fromJD(V/n+i),j.day()===1?j.month()===1?U++:X++:z++}catch{}else j=new Date(V),j.getUTCDate()===1?j.getUTCMonth()===0?U++:X++:z++}X+=U,z+=X;var $=N.length-B;return{exactYears:U/$,exactMonths:X/$,exactDays:z/$}}},{"../constants/numerical":753,"../registry":911,"./loggers":782,"./mod":785,"d3-time-format":166,"fast-isnumeric":241}],766:[function(e,v,S){var r=e("d3"),a=e("./loggers"),u=e("./matrix"),c=e("gl-mat4");function t(b){var m;if(typeof b=="string"){if(m=document.getElementById(b),m===null)throw new Error("No DOM element with id '"+b+"' exists on the page.");return m}else if(b==null)throw new Error("DOM element provided is null or undefined");return b}function f(b){var m=r.select(b);return m.node()instanceof HTMLElement&&m.size()&&m.classed("js-plotly-plot")}function n(b){var m=b&&b.parentNode;m&&m.removeChild(b)}function o(b,m){l("global",b,m)}function l(b,m,x){var w="plotly.js-style-"+b,y=document.getElementById(w);y||(y=document.createElement("style"),y.setAttribute("id",w),y.appendChild(document.createTextNode("")),document.head.appendChild(y));var T=y.sheet;T.insertRule?T.insertRule(m+"{"+x+"}",0):T.addRule?T.addRule(m,x,0):a.warn("addStyleRule failed")}function h(b){var m="plotly.js-style-"+b,x=document.getElementById(m);x&&n(x)}function i(b){var m=p(b),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return m.forEach(function(w){var y=s(w);if(y){var T=u.convertCssMatrix(y);x=c.multiply(x,x,T)}}),x}function s(b){var m=window.getComputedStyle(b,null),x=m.getPropertyValue("-webkit-transform")||m.getPropertyValue("-moz-transform")||m.getPropertyValue("-ms-transform")||m.getPropertyValue("-o-transform")||m.getPropertyValue("transform");return x==="none"?null:x.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(w){return+w})}function p(b){for(var m=[];d(b);)m.push(b),b=b.parentNode;return m}function d(b){return b&&(b instanceof Element||b instanceof HTMLElement)}function g(b,m){return b&&m&&b.x===m.x&&b.y===m.y&&b.top===m.top&&b.left===m.left&&b.right===m.right&&b.bottom===m.bottom}v.exports={getGraphDiv:t,isPlotDiv:f,removeElement:n,addStyleRule:o,addRelatedStyleRule:l,deleteRelatedStyleRule:h,getFullTransformMatrix:i,getElementTransformMatrix:s,getElementAndAncestors:p,equalDomRects:g}},{"./loggers":782,"./matrix":784,d3:169,"gl-mat4":292}],767:[function(e,v,S){var r=e("events").EventEmitter,a={init:function(u){if(u._ev instanceof r)return u;var c=new r,t=new r;return u._ev=c,u._internalEv=t,u.on=c.on.bind(c),u.once=c.once.bind(c),u.removeListener=c.removeListener.bind(c),u.removeAllListeners=c.removeAllListeners.bind(c),u._internalOn=t.on.bind(t),u._internalOnce=t.once.bind(t),u._removeInternalListener=t.removeListener.bind(t),u._removeAllInternalListeners=t.removeAllListeners.bind(t),u.emit=function(f,n){typeof jQuery<"u"&&jQuery(u).trigger(f,n),c.emit(f,n),t.emit(f,n)},u},triggerHandler:function(u,c,t){var f,n;typeof jQuery<"u"&&(f=jQuery(u).triggerHandler(c,t));var o=u._ev;if(!o)return f;var l=o._events[c];if(!l)return f;function h(s){if(s.listener){if(o.removeListener(c,s.listener),!s.fired)return s.fired=!0,s.listener.apply(o,[t])}else return s.apply(o,[t])}l=Array.isArray(l)?l:[l];var i;for(i=0;i<l.length-1;i++)h(l[i]);return n=h(l[i]),f!==void 0?f:n},purge:function(u){return delete u._ev,delete u.on,delete u.once,delete u.removeListener,delete u.removeAllListeners,delete u.emit,delete u._ev,delete u._internalEv,delete u._internalOn,delete u._internalOnce,delete u._removeInternalListener,delete u._removeAllInternalListeners,u}};v.exports=a},{events:110}],768:[function(e,v,S){var r=e("./is_plain_object.js"),a=Array.isArray;function u(t,f){var n,o;for(n=0;n<t.length;n++){if(o=t[n],o!==null&&typeof o=="object")return!1;o!==void 0&&(f[n]=o)}return!0}S.extendFlat=function(){return c(arguments,!1,!1,!1)},S.extendDeep=function(){return c(arguments,!0,!1,!1)},S.extendDeepAll=function(){return c(arguments,!0,!0,!1)},S.extendDeepNoArrays=function(){return c(arguments,!0,!1,!0)};function c(t,f,n,o){var l=t[0],h=t.length,i,s,p,d,g,b,m;if(h===2&&a(l)&&a(t[1])&&l.length===0){if(m=u(t[1],l),m)return l;l.splice(0,l.length)}for(var x=1;x<h;x++){i=t[x];for(s in i)p=l[s],d=i[s],o&&a(d)?l[s]=d:f&&d&&(r(d)||(g=a(d)))?(g?(g=!1,b=p&&a(p)?p:[]):b=p&&r(p)?p:{},l[s]=c([b,d],f,n,o)):(typeof d<"u"||n)&&(l[s]=d)}return l}},{"./is_plain_object.js":779}],769:[function(e,v,S){v.exports=function(a){for(var u={},c=[],t=0,f=0;f<a.length;f++){var n=a[f];u[n]!==1&&(u[n]=1,c[t++]=n)}return c}},{}],770:[function(e,v,S){v.exports=function(t){for(var f=u(t)?a:r,n=[],o=0;o<t.length;o++){var l=t[o];f(l)&&n.push(l)}return n};function r(c){return c.visible===!0}function a(c){var t=c[0].trace;return t.visible===!0&&t._length!==0}function u(c){return Array.isArray(c)&&Array.isArray(c[0])&&c[0][0]&&c[0][0].trace}},{}],771:[function(e,v,S){var r=e("d3"),a=e("country-regex"),u=e("@turf/area"),c=e("@turf/centroid"),t=e("@turf/bbox"),f=e("./identity"),n=e("./loggers"),o=e("./is_plain_object"),l=e("./nested_property"),h=e("./polygon"),i=Object.keys(a),s={"ISO-3":f,"USA-states":f,"country names":p};function p(T){for(var M=0;M<i.length;M++){var P=i[M],L=new RegExp(a[P]);if(L.test(T.trim().toLowerCase()))return P}return n.log("Unrecognized country name: "+T+"."),!1}function d(T,M,P){if(!M||typeof M!="string")return!1;var L=s[T](M),I,E,k;if(L){if(T==="USA-states")for(I=[],k=0;k<P.length;k++)E=P[k],E.properties&&E.properties.gu&&E.properties.gu==="USA"&&I.push(E);else I=P;for(k=0;k<I.length;k++)if(E=I[k],E.id===L)return E;n.log(["Location with id",L,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function g(T){var M=T.geometry,P=M.coordinates,L=T.id,I=[],E,k,C,D;function F(N){for(var G=0;G<N.length-1;G++)if(N[G][0]>0&&N[G+1][0]<0)return G;return null}switch(L==="RUS"||L==="FJI"?E=function(N){var G;if(F(N)===null)G=N;else for(G=new Array(N.length),D=0;D<N.length;D++)G[D]=[N[D][0]<0?N[D][0]+360:N[D][0],N[D][1]];I.push(h.tester(G))}:L==="ATA"?E=function(N){var G=F(N);if(G===null)return I.push(h.tester(N));var U=new Array(N.length+1),X=0;for(D=0;D<N.length;D++)D>G?U[X++]=[N[D][0]+360,N[D][1]]:D===G?(U[X++]=N[D],U[X++]=[N[D][0],-90]):U[X++]=N[D];var z=h.tester(U);z.pts.pop(),I.push(z)}:E=function(N){I.push(h.tester(N))},M.type){case"MultiPolygon":for(k=0;k<P.length;k++)for(C=0;C<P[k].length;C++)E(P[k][C]);break;case"Polygon":for(k=0;k<P.length;k++)E(P[k]);break}return I}function b(T){var M=T.geojson,P=window.PlotlyGeoAssets||{},L=typeof M=="string"?P[M]:M;return o(L)?L:(n.error("Oops ... something went wrong when fetching "+M),!1)}function m(T){var M=T[0].trace,P=b(M);if(!P)return!1;var L={},I=[],E;for(E=0;E<M._length;E++){var k=T[E];(k.loc||k.loc===0)&&(L[k.loc]=k)}function C(N){var G=l(N,M.featureidkey||"id").get(),U=L[G];if(U){var X=N.geometry;if(X.type==="Polygon"||X.type==="MultiPolygon"){var z={type:"Feature",id:G,geometry:X,properties:{}};z.properties.ct=x(z),U.fIn=N,U.fOut=z,I.push(z)}else n.log(["Location",U.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete L[G]}switch(P.type){case"FeatureCollection":var D=P.features;for(E=0;E<D.length;E++)C(D[E]);break;case"Feature":C(P);break;default:return n.warn(["Invalid GeoJSON type",(P.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var F in L)n.log(["Location *"+F+"*","does not have a matching feature with id-key","*"+M.featureidkey+"*."].join(" "));return I}function x(T){var M=T.geometry,P;if(M.type==="MultiPolygon")for(var L=M.coordinates,I=0,E=0;E<L.length;E++){var k={type:"Polygon",coordinates:L[E]},C=u.default(k);C>I&&(I=C,P=k)}else P=M;return c.default(P).geometry.coordinates}function w(T){var M=window.PlotlyGeoAssets||{},P=[];function L(D){return new Promise(function(F,N){r.json(D,function(G,U){if(G){delete M[D];var X=G.status===404?'GeoJSON at URL "'+D+'" does not exist.':"Unexpected error while fetching from "+D;return N(new Error(X))}return M[D]=U,F(U)})})}function I(D){return new Promise(function(F,N){var G=0,U=setInterval(function(){if(M[D]&&M[D]!=="pending")return clearInterval(U),F(M[D]);if(G>100)return clearInterval(U),N("Unexpected error while fetching from "+D);G++},50)})}for(var E=0;E<T.length;E++){var k=T[E][0].trace,C=k.geojson;typeof C=="string"&&(M[C]?M[C]==="pending"&&P.push(I(C)):(M[C]="pending",P.push(L(C))))}return P}function y(T){return t.default(T)}v.exports={locationToFeature:d,feature2polygons:g,getTraceGeojson:b,extractTraceFeature:m,fetchTraceGeoData:w,computeBbox:y}},{"./identity":776,"./is_plain_object":779,"./loggers":782,"./nested_property":786,"./polygon":790,"@turf/area":59,"@turf/bbox":60,"@turf/centroid":61,"country-regex":139,d3:169}],772:[function(e,v,S){var r=e("../constants/numerical").BADNUM;S.calcTraceToLineCoords=function(a){for(var u=a[0].trace,c=u.connectgaps,t=[],f=[],n=0;n<a.length;n++){var o=a[n],l=o.lonlat;l[0]!==r?f.push(l):!c&&f.length>0&&(t.push(f),f=[])}return f.length>0&&t.push(f),t},S.makeLine=function(a){return a.length===1?{type:"LineString",coordinates:a[0]}:{type:"MultiLineString",coordinates:a}},S.makePolygon=function(a){if(a.length===1)return{type:"Polygon",coordinates:a};for(var u=new Array(a.length),c=0;c<a.length;c++)u[c]=[a[c]];return{type:"MultiPolygon",coordinates:u}},S.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":753}],773:[function(e,v,S){var r=e("./mod").mod;S.segmentsIntersect=a;function a(n,o,l,h,i,s,p,d){var g=l-n,b=i-n,m=p-i,x=h-o,w=s-o,y=d-s,T=g*y-m*x;if(T===0)return null;var M=(b*y-m*w)/T,P=(b*x-g*w)/T;return P<0||P>1||M<0||M>1?null:{x:n+g*M,y:o+x*M}}S.segmentDistance=function(o,l,h,i,s,p,d,g){if(a(o,l,h,i,s,p,d,g))return 0;var b=h-o,m=i-l,x=d-s,w=g-p,y=b*b+m*m,T=x*x+w*w,M=Math.min(u(b,m,y,s-o,p-l),u(b,m,y,d-o,g-l),u(x,w,T,o-s,l-p),u(x,w,T,h-s,i-p));return Math.sqrt(M)};function u(n,o,l,h,i){var s=h*n+i*o;if(s<0)return h*h+i*i;if(s>l){var p=h-n,d=i-o;return p*p+d*d}else{var g=h*o-i*n;return g*g/l}}var c,t,f;S.getTextLocation=function(o,l,h,i){if((o!==t||i!==f)&&(c={},t=o,f=i),c[h])return c[h];var s=o.getPointAtLength(r(h-i/2,l)),p=o.getPointAtLength(r(h+i/2,l)),d=Math.atan((p.y-s.y)/(p.x-s.x)),g=o.getPointAtLength(r(h,l)),b=(g.x*4+s.x+p.x)/6,m=(g.y*4+s.y+p.y)/6,x={x:b,y:m,theta:d};return c[h]=x,x},S.clearLocationCache=function(){t=null},S.getVisibleSegment=function(o,l,h){var i=l.left,s=l.right,p=l.top,d=l.bottom,g=0,b=o.getTotalLength(),m=b,x,w;function y(M){var P=o.getPointAtLength(M);M===0?x=P:M===b&&(w=P);var L=P.x<i?i-P.x:P.x>s?P.x-s:0,I=P.y<p?p-P.y:P.y>d?P.y-d:0;return Math.sqrt(L*L+I*I)}for(var T=y(g);T;){if(g+=T+h,g>m)return;T=y(g)}for(T=y(m);T;){if(m-=T+h,g>m)return;T=y(m)}return{min:g,max:m,len:m-g,total:b,isClosed:g===0&&m===b&&Math.abs(x.x-w.x)<.1&&Math.abs(x.y-w.y)<.1}},S.findPointOnPath=function(o,l,h,i){i=i||{};for(var s=i.pathLength||o.getTotalLength(),p=i.tolerance||.001,d=i.iterationLimit||30,g=o.getPointAtLength(0)[h]>o.getPointAtLength(s)[h]?-1:1,b=0,m=0,x=s,w,y,T;b<d;){if(w=(m+x)/2,y=o.getPointAtLength(w),T=y[h]-l,Math.abs(T)<p)return y;g*T>0?x=w:m=w,b++}return y}},{"./mod":785}],774:[function(e,v,S){var r=e("fast-isnumeric"),a=e("tinycolor2"),u=e("color-normalize"),c=e("../components/colorscale"),t=e("../components/color/attributes").defaultLine,f=e("./array").isArrayOrTypedArray,n=u(t),o=1;function l(d,g){var b=d;return b[3]*=g,b}function h(d){if(r(d))return n;var g=u(d);return g.length?g:n}function i(d){return r(d)?d:o}function s(d,g,b){var m=d.color,x=f(m),w=f(g),y=c.extractOpts(d),T=[],M,P,L,I,E;if(y.colorscale!==void 0?M=c.makeColorScaleFuncFromTrace(d):M=h,x?P=function(C,D){return C[D]===void 0?n:u(M(C[D]))}:P=h,w?L=function(C,D){return C[D]===void 0?o:i(C[D])}:L=i,x||w)for(var k=0;k<b;k++)I=P(m,k),E=L(g,k),T[k]=l(I,E);else T=l(u(m),g);return T}function p(d){var g=c.extractOpts(d),b=g.colorscale;return g.reversescale&&(b=c.flipScale(g.colorscale)),b.map(function(m){var x=m[0],w=a(m[1]),y=w.toRgb();return{index:x,rgb:[y.r,y.g,y.b,y.a]}})}v.exports={formatColor:s,parseColorScale:p}},{"../components/color/attributes":642,"../components/colorscale":655,"./array":760,"color-normalize":125,"fast-isnumeric":241,tinycolor2:576}],775:[function(e,v,S){var r=e("./identity");function a(u){return[u]}v.exports={keyFun:function(u){return u.key},repeat:a,descend:r,wrap:a,unwrap:function(u){return u[0]}}},{"./identity":776}],776:[function(e,v,S){v.exports=function(a){return a}},{}],777:[function(e,v,S){v.exports=function(a,u){if(!u)return a;var c=1/Math.abs(u),t=c>1?(c*a+c*u)/c:a+u,f=String(t).length;if(f>16){var n=String(u).length,o=String(a).length;if(f>=o+n){var l=parseFloat(t).toPrecision(12);l.indexOf("e+")===-1&&(t=+l)}}return t}},{}],778:[function(e,v,S){var r=e("d3"),a=e("d3-time-format").utcFormat,u=e("fast-isnumeric"),c=e("../constants/numerical"),t=c.FP_SAFE,f=c.BADNUM,n=v.exports={};n.nestedProperty=e("./nested_property"),n.keyedContainer=e("./keyed_container"),n.relativeAttr=e("./relative_attr"),n.isPlainObject=e("./is_plain_object"),n.toLogRange=e("./to_log_range"),n.relinkPrivateKeys=e("./relink_private");var o=e("./array");n.isTypedArray=o.isTypedArray,n.isArrayOrTypedArray=o.isArrayOrTypedArray,n.isArray1D=o.isArray1D,n.ensureArray=o.ensureArray,n.concat=o.concat,n.maxRowLength=o.maxRowLength,n.minRowLength=o.minRowLength;var l=e("./mod");n.mod=l.mod,n.modHalf=l.modHalf;var h=e("./coerce");n.valObjectMeta=h.valObjectMeta,n.coerce=h.coerce,n.coerce2=h.coerce2,n.coerceFont=h.coerceFont,n.coerceHoverinfo=h.coerceHoverinfo,n.coerceSelectionMarkerOpacity=h.coerceSelectionMarkerOpacity,n.validate=h.validate;var i=e("./dates");n.dateTime2ms=i.dateTime2ms,n.isDateTime=i.isDateTime,n.ms2DateTime=i.ms2DateTime,n.ms2DateTimeLocal=i.ms2DateTimeLocal,n.cleanDate=i.cleanDate,n.isJSDate=i.isJSDate,n.formatDate=i.formatDate,n.incrementMonth=i.incrementMonth,n.dateTick0=i.dateTick0,n.dfltRange=i.dfltRange,n.findExactDates=i.findExactDates,n.MIN_MS=i.MIN_MS,n.MAX_MS=i.MAX_MS;var s=e("./search");n.findBin=s.findBin,n.sorterAsc=s.sorterAsc,n.sorterDes=s.sorterDes,n.distinctVals=s.distinctVals,n.roundUp=s.roundUp,n.sort=s.sort,n.findIndexOfMin=s.findIndexOfMin;var p=e("./stats");n.aggNums=p.aggNums,n.len=p.len,n.mean=p.mean,n.median=p.median,n.midRange=p.midRange,n.variance=p.variance,n.stdev=p.stdev,n.interp=p.interp;var d=e("./matrix");n.init2dArray=d.init2dArray,n.transposeRagged=d.transposeRagged,n.dot=d.dot,n.translationMatrix=d.translationMatrix,n.rotationMatrix=d.rotationMatrix,n.rotationXYMatrix=d.rotationXYMatrix,n.apply3DTransform=d.apply3DTransform,n.apply2DTransform=d.apply2DTransform,n.apply2DTransform2=d.apply2DTransform2,n.convertCssMatrix=d.convertCssMatrix,n.inverseTransformMatrix=d.inverseTransformMatrix;var g=e("./angles");n.deg2rad=g.deg2rad,n.rad2deg=g.rad2deg,n.angleDelta=g.angleDelta,n.angleDist=g.angleDist,n.isFullCircle=g.isFullCircle,n.isAngleInsideSector=g.isAngleInsideSector,n.isPtInsideSector=g.isPtInsideSector,n.pathArc=g.pathArc,n.pathSector=g.pathSector,n.pathAnnulus=g.pathAnnulus;var b=e("./anchor_utils");n.isLeftAnchor=b.isLeftAnchor,n.isCenterAnchor=b.isCenterAnchor,n.isRightAnchor=b.isRightAnchor,n.isTopAnchor=b.isTopAnchor,n.isMiddleAnchor=b.isMiddleAnchor,n.isBottomAnchor=b.isBottomAnchor;var m=e("./geometry2d");n.segmentsIntersect=m.segmentsIntersect,n.segmentDistance=m.segmentDistance,n.getTextLocation=m.getTextLocation,n.clearLocationCache=m.clearLocationCache,n.getVisibleSegment=m.getVisibleSegment,n.findPointOnPath=m.findPointOnPath;var x=e("./extend");n.extendFlat=x.extendFlat,n.extendDeep=x.extendDeep,n.extendDeepAll=x.extendDeepAll,n.extendDeepNoArrays=x.extendDeepNoArrays;var w=e("./loggers");n.log=w.log,n.warn=w.warn,n.error=w.error;var y=e("./regex");n.counterRegex=y.counter;var T=e("./throttle");n.throttle=T.throttle,n.throttleDone=T.done,n.clearThrottle=T.clear;var M=e("./dom");n.getGraphDiv=M.getGraphDiv,n.isPlotDiv=M.isPlotDiv,n.removeElement=M.removeElement,n.addStyleRule=M.addStyleRule,n.addRelatedStyleRule=M.addRelatedStyleRule,n.deleteRelatedStyleRule=M.deleteRelatedStyleRule,n.getFullTransformMatrix=M.getFullTransformMatrix,n.getElementTransformMatrix=M.getElementTransformMatrix,n.getElementAndAncestors=M.getElementAndAncestors,n.equalDomRects=M.equalDomRects,n.clearResponsive=e("./clear_responsive"),n.preserveDrawingBuffer=e("./preserve_drawing_buffer"),n.makeTraceGroups=e("./make_trace_groups"),n._=e("./localize"),n.notifier=e("./notifier"),n.filterUnique=e("./filter_unique"),n.filterVisible=e("./filter_visible"),n.pushUnique=e("./push_unique"),n.increment=e("./increment"),n.cleanNumber=e("./clean_number"),n.ensureNumber=function(V){return!u(V)||(V=Number(V),V<-t||V>t)?f:u(V)?Number(V):f},n.isIndex=function(j,V){return V!==void 0&&j>=V?!1:u(j)&&j>=0&&j%1===0},n.noop=e("./noop"),n.identity=e("./identity"),n.repeat=function(j,V){for(var K=new Array(V),te=0;te<V;te++)K[te]=j;return K},n.swapAttrs=function(j,V,K,te){K||(K="x"),te||(te="y");for(var $=0;$<V.length;$++){var ie=V[$],se=n.nestedProperty(j,ie.replace("?",K)),Q=n.nestedProperty(j,ie.replace("?",te)),H=se.get();se.set(Q.get()),Q.set(H)}},n.raiseToTop=function(V){V.parentNode.appendChild(V)},n.cancelTransition=function(j){return j.transition().duration(0)},n.constrain=function(j,V,K){return V>K?Math.max(K,Math.min(V,j)):Math.max(V,Math.min(K,j))},n.bBoxIntersect=function(j,V,K){return K=K||0,j.left<=V.right+K&&V.left<=j.right+K&&j.top<=V.bottom+K&&V.top<=j.bottom+K},n.simpleMap=function(j,V,K,te,$){for(var ie=j.length,se=new Array(ie),Q=0;Q<ie;Q++)se[Q]=V(j[Q],K,te,$);return se},n.randstr=function j(V,K,te,$){if(te||(te=16),K===void 0&&(K=24),K<=0)return"0";var ie=Math.log(Math.pow(2,K))/Math.log(te),se="",Q,H,oe;for(Q=2;ie===1/0;Q*=2)ie=Math.log(Math.pow(2,K/Q))/Math.log(te)*Q;var re=ie-Math.floor(ie);for(Q=0;Q<Math.floor(ie);Q++)oe=Math.floor(Math.random()*te).toString(te),se=oe+se;re&&(H=Math.pow(te,re),oe=Math.floor(Math.random()*H).toString(te),se=oe+se);var ee=parseInt(se,te);return V&&V[se]||ee!==1/0&&ee>=Math.pow(2,K)?$>10?(n.warn("randstr failed uniqueness"),se):j(V,K,te,($||0)+1):se},n.OptionControl=function(j,V){j||(j={}),V||(V="opt");var K={};return K.optionList=[],K._newoption=function(te){te[V]=j,K[te.name]=te,K.optionList.push(te)},K["_"+V]=j,K},n.smooth=function(j,V){if(V=Math.round(V)||0,V<2)return j;var K=j.length,te=2*K,$=2*V-1,ie=new Array($),se=new Array(K),Q,H,oe,re;for(Q=0;Q<$;Q++)ie[Q]=(1-Math.cos(Math.PI*(Q+1)/V))/(2*V);for(Q=0;Q<K;Q++){for(re=0,H=0;H<$;H++)oe=Q+H+1-V,oe<-K?oe-=te*Math.round(oe/te):oe>=te&&(oe-=te*Math.floor(oe/te)),oe<0?oe=-1-oe:oe>=K&&(oe=te-1-oe),re+=j[oe]*ie[H];se[Q]=re}return se},n.syncOrAsync=function(j,V,K){var te,$;function ie(){return n.syncOrAsync(j,V,K)}for(;j.length;)if($=j.splice(0,1)[0],te=$(V),te&&te.then)return te.then(ie).then(void 0,n.promiseError);return K&&K(V)},n.stripTrailingSlash=function(j){return j.substr(-1)==="/"?j.substr(0,j.length-1):j},n.noneOrAll=function(j,V,K){if(!!j){var te=!1,$=!0,ie,se;for(ie=0;ie<K.length;ie++)se=j[K[ie]],se!=null?te=!0:$=!1;if(te&&!$)for(ie=0;ie<K.length;ie++)j[K[ie]]=V[K[ie]]}},n.mergeArray=function(j,V,K,te){var $=typeof te=="function";if(n.isArrayOrTypedArray(j))for(var ie=Math.min(j.length,V.length),se=0;se<ie;se++){var Q=j[se];V[se][K]=$?te(Q):Q}},n.mergeArrayCastPositive=function(j,V,K){return n.mergeArray(j,V,K,function(te){var $=+te;return isFinite($)&&$>0?$:0})},n.fillArray=function(j,V,K,te){if(te=te||n.identity,n.isArrayOrTypedArray(j))for(var $=0;$<V.length;$++)V[$][K]=te(j[$])},n.castOption=function(j,V,K,te){te=te||n.identity;var $=n.nestedProperty(j,K).get();return n.isArrayOrTypedArray($)?Array.isArray(V)&&n.isArrayOrTypedArray($[V[0]])?te($[V[0]][V[1]]):te($[V]):$},n.extractOption=function(j,V,K,te){if(K in j)return j[K];var $=n.nestedProperty(V,te).get();if(!Array.isArray($))return $};function P(j){var V={};for(var K in j)for(var te=j[K],$=0;$<te.length;$++)V[te[$]]=+K;return V}n.tagSelected=function(j,V,K){var te=V.selectedpoints,$=V._indexToPoints,ie;$&&(ie=P($));function se(ee){return ee!==void 0&&ee<j.length}for(var Q=0;Q<te.length;Q++){var H=te[Q];if(n.isIndex(H)||n.isArrayOrTypedArray(H)&&n.isIndex(H[0])&&n.isIndex(H[1])){var oe=ie?ie[H]:H,re=K?K[oe]:oe;se(re)&&(j[re].selected=1)}}},n.selIndices2selPoints=function(j){var V=j.selectedpoints,K=j._indexToPoints;if(K){for(var te=P(K),$=[],ie=0;ie<V.length;ie++){var se=V[ie];if(n.isIndex(se)){var Q=te[se];n.isIndex(Q)&&$.push(Q)}}return $}else return V},n.getTargetArray=function(j,V){var K=V.target;if(typeof K=="string"&&K){var te=n.nestedProperty(j,K).get();return Array.isArray(te)?te:!1}else if(Array.isArray(K))return K;return!1},n.minExtend=function(j,V){var K={};typeof V!="object"&&(V={});var te=3,$=Object.keys(j),ie,se,Q;for(ie=0;ie<$.length;ie++)se=$[ie],Q=j[se],!(se.charAt(0)==="_"||typeof Q=="function")&&(se==="module"?K[se]=Q:Array.isArray(Q)?se==="colorscale"?K[se]=Q.slice():K[se]=Q.slice(0,te):n.isTypedArray(Q)?K[se]=Q.subarray(0,te):Q&&typeof Q=="object"?K[se]=n.minExtend(j[se],V[se]):K[se]=Q);for($=Object.keys(V),ie=0;ie<$.length;ie++)se=$[ie],Q=V[se],(typeof Q!="object"||!(se in K)||typeof K[se]!="object")&&(K[se]=Q);return K},n.titleCase=function(j){return j.charAt(0).toUpperCase()+j.substr(1)},n.containsAny=function(j,V){for(var K=0;K<V.length;K++)if(j.indexOf(V[K])!==-1)return!0;return!1},n.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var L=/MSIE [1-9]\./;n.isIE9orBelow=function(){return n.isIE()&&L.test(window.navigator.userAgent)};var I=/Version\/[\d\.]+.*Safari/;n.isSafari=function(){return I.test(window.navigator.userAgent)};var E=/iPad|iPhone|iPod/;n.isIOS=function(){return E.test(window.navigator.userAgent)},n.isD3Selection=function(j){return j&&typeof j.classed=="function"},n.ensureSingle=function(j,V,K,te){var $=j.select(V+(K?"."+K:""));if($.size())return $;var ie=j.append(V);return K&&ie.classed(K,!0),te&&ie.call(te),ie},n.ensureSingleById=function(j,V,K,te){var $=j.select(V+"#"+K);if($.size())return $;var ie=j.append(V).attr("id",K);return te&&ie.call(te),ie},n.objectFromPath=function(j,V){for(var K=j.split("."),te,$=te={},ie=0;ie<K.length;ie++){var se=K[ie],Q=null,H=K[ie].match(/(.*)\[([0-9]+)\]/);H?(se=H[1],Q=H[2],te=te[se]=[],ie===K.length-1?te[Q]=V:te[Q]={},te=te[Q]):(ie===K.length-1?te[se]=V:te[se]={},te=te[se])}return $};var k=/^([^\[\.]+)\.(.+)?/,C=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;n.expandObjectPaths=function(j){var V,K,te,$,ie,se,Q;if(typeof j=="object"&&!Array.isArray(j))for(K in j)j.hasOwnProperty(K)&&((V=K.match(k))?($=j[K],te=V[1],delete j[K],j[te]=n.extendDeepNoArrays(j[te]||{},n.objectFromPath(K,n.expandObjectPaths($))[te])):(V=K.match(C))?($=j[K],te=V[1],ie=parseInt(V[2]),delete j[K],j[te]=j[te]||[],V[3]==="."?(Q=V[4],se=j[te][ie]=j[te][ie]||{},n.extendDeepNoArrays(se,n.objectFromPath(Q,n.expandObjectPaths($)))):j[te][ie]=n.expandObjectPaths($)):j[K]=n.expandObjectPaths(j[K]));return j},n.numSeparate=function(j,V,K){if(K||(K=!1),typeof V!="string"||V.length===0)throw new Error("Separator string required for formatting!");typeof j=="number"&&(j=String(j));var te=/(\d+)(\d{3})/,$=V.charAt(0),ie=V.charAt(1),se=j.split("."),Q=se[0],H=se.length>1?$+se[1]:"";if(ie&&(se.length>1||Q.length>4||K))for(;te.test(Q);)Q=Q.replace(te,"$1"+ie+"$2");return Q+H},n.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;n.templateString=function(j,V){var K={};return j.replace(n.TEMPLATE_STRING_REGEX,function(te,$){var ie;return D.test($)?ie=V[$]:(K[$]=K[$]||n.nestedProperty(V,$).get,ie=K[$]()),n.isValidTextValue(ie)?ie:""})};var F={max:10,count:0,name:"hovertemplate"};n.hovertemplateString=function(){return U.apply(F,arguments)};var N={max:10,count:0,name:"texttemplate"};n.texttemplateString=function(){return U.apply(N,arguments)};var G=/^[:|\|]/;function U(j,V,K){var te=this,$=arguments;V||(V={});var ie={};return j.replace(n.TEMPLATE_STRING_REGEX,function(se,Q,H){var oe,re,ee;for(ee=3;ee<$.length;ee++)if(oe=$[ee],!!oe){if(oe.hasOwnProperty(Q)){re=oe[Q];break}if(D.test(Q)||(re=ie[Q]||n.nestedProperty(oe,Q).get(),re&&(ie[Q]=re)),re!==void 0)break}if(re===void 0&&te)return te.count<te.max&&(n.warn("Variable '"+Q+"' in "+te.name+" could not be found!"),re=se),te.count===te.max&&n.warn("Too many "+te.name+" warnings - additional warnings will be suppressed"),te.count++,se;if(H){var ae;if(H[0]===":"&&(ae=K?K.numberFormat:r.format,re=ae(H.replace(G,""))(re)),H[0]==="|"){ae=K?K.timeFormat:a;var fe=n.dateTime2ms(re);re=n.formatDate(fe,H.replace(G,""),!1,ae)}}else V.hasOwnProperty(Q+"Label")&&(re=V[Q+"Label"]);return re})}var X=48,z=57;n.subplotSort=function(j,V){for(var K=Math.min(j.length,V.length)+1,te=0,$=0,ie=0;ie<K;ie++){var se=j.charCodeAt(ie)||0,Q=V.charCodeAt(ie)||0,H=se>=X&&se<=z,oe=Q>=X&&Q<=z;if(H&&(te=10*te+se-X),oe&&($=10*$+Q-X),!H||!oe){if(te!==$)return te-$;if(se!==Q)return se-Q}}return $-te};var B=2e9;n.seedPseudoRandom=function(){B=2e9},n.pseudoRandom=function(){var j=B;return B=(69069*B+1)%4294967296,Math.abs(B-j)<429496729?n.pseudoRandom():B/4294967296},n.fillText=function(j,V,K){var te=Array.isArray(K)?function(se){K.push(se)}:function(se){K.text=se},$=n.extractOption(j,V,"htx","hovertext");if(n.isValidTextValue($))return te($);var ie=n.extractOption(j,V,"tx","text");if(n.isValidTextValue(ie))return te(ie)},n.isValidTextValue=function(j){return j||j===0},n.formatPercent=function(j,V){V=V||0;for(var K=(Math.round(100*j*Math.pow(10,V))*Math.pow(.1,V)).toFixed(V)+"%",te=0;te<V;te++)K.indexOf(".")!==-1&&(K=K.replace("0%","%"),K=K.replace(".%","%"));return K},n.isHidden=function(j){var V=window.getComputedStyle(j).display;return!V||V==="none"},n.strTranslate=function(j,V){return j||V?"translate("+j+","+V+")":""},n.strRotate=function(j){return j?"rotate("+j+")":""},n.strScale=function(j){return j!==1?"scale("+j+")":""},n.getTextTransform=function(j){var V=j.noCenter,K=j.textX,te=j.textY,$=j.targetX,ie=j.targetY,se=j.anchorX||0,Q=j.anchorY||0,H=j.rotate,oe=j.scale;return oe?oe>1&&(oe=1):oe=0,n.strTranslate($-oe*(K+se),ie-oe*(te+Q))+n.strScale(oe)+(H?"rotate("+H+(V?"":" "+K+" "+te)+")":"")},n.ensureUniformFontSize=function(j,V){var K=n.extendFlat({},V);return K.size=Math.max(V.size,j._fullLayout.uniformtext.minsize||0),K},n.join2=function(j,V,K){var te=j.length;return te>1?j.slice(0,-1).join(V)+K+j[te-1]:j.join(V)}},{"../constants/numerical":753,"./anchor_utils":758,"./angles":759,"./array":760,"./clean_number":761,"./clear_responsive":763,"./coerce":764,"./dates":765,"./dom":766,"./extend":768,"./filter_unique":769,"./filter_visible":770,"./geometry2d":773,"./identity":776,"./increment":777,"./is_plain_object":779,"./keyed_container":780,"./localize":781,"./loggers":782,"./make_trace_groups":783,"./matrix":784,"./mod":785,"./nested_property":786,"./noop":787,"./notifier":788,"./preserve_drawing_buffer":792,"./push_unique":793,"./regex":795,"./relative_attr":796,"./relink_private":797,"./search":798,"./stats":801,"./throttle":804,"./to_log_range":805,d3:169,"d3-time-format":166,"fast-isnumeric":241}],779:[function(e,v,S){v.exports=function(a){return window&&window.process&&window.process.versions?Object.prototype.toString.call(a)==="[object Object]":Object.prototype.toString.call(a)==="[object Object]"&&Object.getPrototypeOf(a)===Object.prototype}},{}],780:[function(e,v,S){var r=e("./nested_property"),a=/^\w*$/,u=0,c=1,t=2,f=3,n=4;v.exports=function(l,h,i,s){i=i||"name",s=s||"value";var p,d,g,b={};h&&h.length?(g=r(l,h),d=g.get()):d=l,h=h||"";var m={};if(d)for(p=0;p<d.length;p++)m[d[p][i]]=p;var x=a.test(s),w={set:function(y,T){var M=T===null?n:u;if(!d){if(!g||M===n)return;d=[],g.set(d)}var P=m[y];if(P===void 0){if(M===n)return;M=M|f,P=d.length,m[y]=P}else T!==(x?d[P][s]:r(d[P],s).get())&&(M=M|t);var L=d[P]=d[P]||{};return L[i]=y,x?L[s]=T:r(L,s).set(T),T!==null&&(M=M&~n),b[P]=b[P]|M,w},get:function(y){if(!!d){var T=m[y];if(T!==void 0)return x?d[T][s]:r(d[T],s).get()}},rename:function(y,T){var M=m[y];return M===void 0||(b[M]=b[M]|c,m[T]=M,delete m[y],d[M][i]=T),w},remove:function(y){var T=m[y];if(T===void 0)return w;var M=d[T];if(Object.keys(M).length>2)return b[T]=b[T]|t,w.set(y,null);if(x){for(p=T;p<d.length;p++)b[p]=b[p]|f;for(p=T;p<d.length;p++)m[d[p][i]]--;d.splice(T,1),delete m[y]}else r(M,s).set(null),b[T]=b[T]|t|n;return w},constructUpdate:function(){for(var y,T,M={},P=Object.keys(b),L=0;L<P.length;L++)T=P[L],y=h+"["+T+"]",d[T]?(b[T]&c&&(M[y+"."+i]=d[T][i]),b[T]&t&&(x?M[y+"."+s]=b[T]&n?null:d[T][s]:M[y+"."+s]=b[T]&n?null:r(d[T],s).get())):M[y]=null;return M}};return w}},{"./nested_property":786}],781:[function(e,v,S){var r=e("../registry");v.exports=function(u,c){for(var t=u._context.locale,f=0;f<2;f++){for(var n=u._context.locales,o=0;o<2;o++){var l=(n[t]||{}).dictionary;if(l){var h=l[c];if(h)return h}n=r.localeRegistry}var i=t.split("-")[0];if(i===t)break;t=i}return c}},{"../registry":911}],782:[function(e,v,S){var r=e("../plot_api/plot_config").dfltConfig,a=e("./notifier"),u=v.exports={};u.log=function(){var t;if(r.logging>1){var f=["LOG:"];for(t=0;t<arguments.length;t++)f.push(arguments[t]);c(console.trace||console.log,f)}if(r.notifyOnLogging>1){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);a(n.join("<br>"),"long")}},u.warn=function(){var t;if(r.logging>0){var f=["WARN:"];for(t=0;t<arguments.length;t++)f.push(arguments[t]);c(console.trace||console.log,f)}if(r.notifyOnLogging>0){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);a(n.join("<br>"),"stick")}},u.error=function(){var t;if(r.logging>0){var f=["ERROR:"];for(t=0;t<arguments.length;t++)f.push(arguments[t]);c(console.error,f)}if(r.notifyOnLogging>0){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);a(n.join("<br>"),"stick")}};function c(t,f){if(t&&t.apply)try{t.apply(console,f);return}catch{}for(var n=0;n<f.length;n++)try{t(f[n])}catch{console.log(f[n])}}},{"../plot_api/plot_config":815,"./notifier":788}],783:[function(e,v,S){var r=e("d3");v.exports=function(u,c,t){var f=u.selectAll("g."+t.replace(/\s/g,".")).data(c,function(o){return o[0].trace.uid});f.exit().remove(),f.enter().append("g").attr("class",t),f.order();var n=u.classed("rangeplot")?"nodeRangePlot3":"node3";return f.each(function(o){o[0][n]=r.select(this)}),f}},{d3:169}],784:[function(e,v,S){var r=e("gl-mat4");S.init2dArray=function(a,u){for(var c=new Array(a),t=0;t<a;t++)c[t]=new Array(u);return c},S.transposeRagged=function(a){var u=0,c=a.length,t,f;for(t=0;t<c;t++)u=Math.max(u,a[t].length);var n=new Array(u);for(t=0;t<u;t++)for(n[t]=new Array(c),f=0;f<c;f++)n[t][f]=a[f][t];return n},S.dot=function(a,u){if(!(a.length&&u.length)||a.length!==u.length)return null;var c=a.length,t,f;if(a[0].length)for(t=new Array(c),f=0;f<c;f++)t[f]=S.dot(a[f],u);else if(u[0].length){var n=S.transposeRagged(u);for(t=new Array(n.length),f=0;f<n.length;f++)t[f]=S.dot(a,n[f])}else for(t=0,f=0;f<c;f++)t+=a[f]*u[f];return t},S.translationMatrix=function(a,u){return[[1,0,a],[0,1,u],[0,0,1]]},S.rotationMatrix=function(a){var u=a*Math.PI/180;return[[Math.cos(u),-Math.sin(u),0],[Math.sin(u),Math.cos(u),0],[0,0,1]]},S.rotationXYMatrix=function(a,u,c){return S.dot(S.dot(S.translationMatrix(u,c),S.rotationMatrix(a)),S.translationMatrix(-u,-c))},S.apply3DTransform=function(a){return function(){var u=arguments,c=arguments.length===1?u[0]:[u[0],u[1],u[2]||0];return S.dot(a,[c[0],c[1],c[2],1]).slice(0,3)}},S.apply2DTransform=function(a){return function(){var u=arguments;u.length===3&&(u=u[0]);var c=arguments.length===1?u[0]:[u[0],u[1]];return S.dot(a,[c[0],c[1],1]).slice(0,2)}},S.apply2DTransform2=function(a){var u=S.apply2DTransform(a);return function(c){return u(c.slice(0,2)).concat(u(c.slice(2,4)))}},S.convertCssMatrix=function(a){if(a){var u=a.length;if(u===16)return a;if(u===6)return[a[0],a[1],0,0,a[2],a[3],0,0,0,0,1,0,a[4],a[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},S.inverseTransformMatrix=function(a){var u=[];return r.invert(u,a),[[u[0],u[1],u[2],u[3]],[u[4],u[5],u[6],u[7]],[u[8],u[9],u[10],u[11]],[u[12],u[13],u[14],u[15]]]}},{"gl-mat4":292}],785:[function(e,v,S){function r(u,c){var t=u%c;return t<0?t+c:t}function a(u,c){return Math.abs(u)>c/2?u-Math.round(u/c)*c:u}v.exports={mod:r,modHalf:a}},{}],786:[function(e,v,S){var r=e("fast-isnumeric"),a=e("./array").isArrayOrTypedArray;v.exports=function(s,p){if(r(p))p=String(p);else if(typeof p!="string"||p.substr(p.length-4)==="[-1]")throw"bad property string";for(var d=0,g=p.split("."),b,m,x;d<g.length;){if(b=String(g[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),b){if(b[1])g[d]=b[1];else if(d===0)g.splice(0,1);else throw"bad property string";for(m=b[2].substr(1,b[2].length-2).split("]["),x=0;x<m.length;x++)d++,g.splice(d,0,Number(m[x]))}d++}return typeof s!="object"?h(s,p,g):{set:f(s,g,p),get:u(s,g),astr:p,parts:g,obj:s}};function u(i,s){return function(){var p=i,d,g,b,m,x;for(m=0;m<s.length-1;m++){if(d=s[m],d===-1){for(g=!0,b=[],x=0;x<p.length;x++)b[x]=u(p[x],s.slice(m+1))(),b[x]!==b[0]&&(g=!1);return g?b[0]:b}if(typeof d=="number"&&!a(p)||(p=p[d],typeof p!="object"||p===null))return}if(!(typeof p!="object"||p===null)&&(b=p[s[m]],b!==null))return b}}var c=/(^|\.)args\[/;function t(i,s){return i===void 0||i===null&&!s.match(c)}function f(i,s,p){return function(d){var g=i,b="",m=t(d,p),x,w;for(w=0;w<s.length-1;w++){if(x=s[w],typeof x=="number"&&!a(g))throw"array index but container is not an array";if(x===-1){if(m=!o(g,s.slice(w+1),d,p),m)break;return}if(!l(g,x,s[w+1],m))break;if(g=g[x],typeof g!="object"||g===null)throw"container is not an object";b=n(b,x)}if(m){if(w===s.length-1&&(delete g[s[w]],Array.isArray(g)&&+s[w]===g.length-1))for(;g.length&&g[g.length-1]===void 0;)g.pop()}else g[s[w]]=d}}function n(i,s){var p=s;return r(s)?p="["+s+"]":i&&(p="."+s),i+p}function o(i,s,p,d){var g=a(p),b=!0,m=p,x=d.replace("-1",0),w=g?!1:t(p,x),y=s[0],T;for(T=0;T<i.length;T++)x=d.replace("-1",T),g&&(m=p[T%p.length],w=t(m,x)),w&&(b=!1),l(i,T,y,w)&&f(i[T],s,d.replace("-1",T))(m);return b}function l(i,s,p,d){if(i[s]===void 0){if(d)return!1;typeof p=="number"?i[s]=[]:i[s]={}}return!0}function h(i,s,p){return{set:function(){throw"bad container"},get:function(){},astr:s,parts:p,obj:i}}},{"./array":760,"fast-isnumeric":241}],787:[function(e,v,S){v.exports=function(){}},{}],788:[function(e,v,S){var r=e("d3"),a=e("fast-isnumeric"),u=[];v.exports=function(c,t){if(u.indexOf(c)!==-1)return;u.push(c);var f=1e3;a(t)?f=t:t==="long"&&(f=3e3);var n=r.select("body").selectAll(".plotly-notifier").data([0]);n.enter().append("div").classed("plotly-notifier",!0);var o=n.selectAll(".notifier-note").data(u);function l(h){h.duration(700).style("opacity",0).each("end",function(i){var s=u.indexOf(i);s!==-1&&u.splice(s,1),r.select(this).remove()})}o.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(h){var i=r.select(this);i.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){i.transition().call(l)});for(var s=i.append("p"),p=h.split(/<br\s*\/?>/g),d=0;d<p.length;d++)d&&s.append("br"),s.append("span").text(p[d]);t==="stick"?i.transition().duration(350).style("opacity",1):i.transition().duration(700).style("opacity",1).transition().delay(f).call(l)})}},{d3:169,"fast-isnumeric":241}],789:[function(e,v,S){var r=e("./setcursor"),a="data-savedcursor",u="!!";v.exports=function(t,f){var n=t.attr(a);if(f){if(!n){for(var o=(t.attr("class")||"").split(" "),l=0;l<o.length;l++){var h=o[l];h.indexOf("cursor-")===0&&t.attr(a,h.substr(7)).classed(h,!1)}t.attr(a)||t.attr(a,u)}r(t,f)}else n&&(t.attr(a,null),n===u?r(t):r(t,n))}},{"./setcursor":799}],790:[function(e,v,S){var r=e("./matrix").dot,a=e("../constants/numerical").BADNUM,u=v.exports={};u.tester=function(t){var f=t.slice(),n=f[0][0],o=n,l=f[0][1],h=l,i;for(f.push(f[0]),i=1;i<f.length;i++)n=Math.min(n,f[i][0]),o=Math.max(o,f[i][0]),l=Math.min(l,f[i][1]),h=Math.max(h,f[i][1]);var s=!1,p;f.length===5&&(f[0][0]===f[1][0]?f[2][0]===f[3][0]&&f[0][1]===f[3][1]&&f[1][1]===f[2][1]&&(s=!0,p=function(x){return x[0]===f[0][0]}):f[0][1]===f[1][1]&&f[2][1]===f[3][1]&&f[0][0]===f[3][0]&&f[1][0]===f[2][0]&&(s=!0,p=function(x){return x[1]===f[0][1]}));function d(x,w){var y=x[0],T=x[1];return!(y===a||y<n||y>o||T===a||T<l||T>h||w&&p(x))}function g(x,w){var y=x[0],T=x[1];if(y===a||y<n||y>o||T===a||T<l||T>h)return!1;var M=f.length,P=f[0][0],L=f[0][1],I=0,E,k,C,D,F;for(E=1;E<M;E++)if(k=P,C=L,P=f[E][0],L=f[E][1],D=Math.min(k,P),!(y<D||y>Math.max(k,P)||T>Math.max(C,L)))if(T<Math.min(C,L))y!==D&&I++;else{if(P===k?F=T:F=C+(y-k)*(L-C)/(P-k),T===F)return!(E===1&&w);T<=F&&y!==D&&I++}return I%2===1}var b=!0,m=f[0];for(i=1;i<f.length;i++)if(m[0]!==f[i][0]||m[1]!==f[i][1]){b=!1;break}return{xmin:n,xmax:o,ymin:l,ymax:h,pts:f,contains:s?d:g,isRect:s,degenerate:b}},u.isSegmentBent=function(t,f,n,o){var l=t[f],h=[t[n][0]-l[0],t[n][1]-l[1]],i=r(h,h),s=Math.sqrt(i),p=[-h[1]/s,h[0]/s],d,g,b;for(d=f+1;d<n;d++)if(g=[t[d][0]-l[0],t[d][1]-l[1]],b=r(g,h),b<0||b>i||Math.abs(r(g,p))>o)return!0;return!1},u.filter=function(t,f){var n=[t[0]],o=0,l=0;function h(s){t.push(s);var p=n.length,d=o;n.splice(l+1);for(var g=d+1;g<t.length;g++)(g===t.length-1||u.isSegmentBent(t,d,g+1,f))&&(n.push(t[g]),n.length<p-2&&(o=g,l=n.length-1),d=g)}if(t.length>1){var i=t.pop();h(i)}return{addPt:h,raw:t,filtered:n}}},{"../constants/numerical":753,"./matrix":784}],791:[function(e,v,S){(function(r){(function(){var a=e("./show_no_webgl_msg"),u=e("regl");v.exports=function(t,f){var n=t._fullLayout,o=!0;return n._glcanvas.each(function(l){if(!l.regl&&!(l.pick&&!n._has("parcoords"))){try{l.regl=u({canvas:this,attributes:{antialias:!l.pick,preserveDrawingBuffer:!0},pixelRatio:t._context.plotGlPixelRatio||r.devicePixelRatio,extensions:f||[]})}catch{o=!1}l.regl||(o=!1),o&&this.addEventListener("webglcontextlost",function(h){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:h,layer:l.key})},!1)}}),o||a({container:n._glcontainer.node()}),o}}).call(this)}).call(this,typeof Hs<"u"?Hs:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":800,regl:540}],792:[function(e,v,S){var r=e("fast-isnumeric"),a=e("is-mobile");v.exports=function(t){var f;if(t&&t.hasOwnProperty("userAgent")?f=t.userAgent:f=u(),typeof f!="string")return!0;var n=a({ua:{headers:{"user-agent":f}},tablet:!0,featureDetect:!1});if(!n)for(var o=f.split(" "),l=1;l<o.length;l++){var h=o[l];if(h.indexOf("Safari")!==-1)for(var i=l-1;i>-1;i--){var s=o[i];if(s.substr(0,8)==="Version/"){var p=s.substr(8).split(".")[0];if(r(p)&&(p=+p),p>=13)return!0}}}return n};function u(){var c;return typeof navigator<"u"&&(c=navigator.userAgent),c&&c.headers&&typeof c.headers["user-agent"]=="string"&&(c=c.headers["user-agent"]),c}},{"fast-isnumeric":241,"is-mobile":467}],793:[function(e,v,S){v.exports=function(a,u){if(u instanceof RegExp){for(var c=u.toString(),t=0;t<a.length;t++)if(a[t]instanceof RegExp&&a[t].toString()===c)return a;a.push(u)}else(u||u===0)&&a.indexOf(u)===-1&&a.push(u);return a}},{}],794:[function(e,v,S){var r=e("../lib"),a=e("../plot_api/plot_config").dfltConfig;function u(t,f){for(var n=[],o,l=0;l<f.length;l++)o=f[l],o===t?n[l]=o:typeof o=="object"?n[l]=Array.isArray(o)?r.extendDeep([],o):r.extendDeepAll({},o):n[l]=o;return n}var c={};c.add=function(t,f,n,o,l){var h,i;if(t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},i=t.undoQueue.index,t.autoplay){t.undoQueue.inSequence||(t.autoplay=!1);return}!t.undoQueue.sequence||t.undoQueue.beginSequence?(h={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(i,t.undoQueue.queue.length-i,h),t.undoQueue.index+=1):h=t.undoQueue.queue[i-1],t.undoQueue.beginSequence=!1,h&&(h.undo.calls.unshift(f),h.undo.args.unshift(n),h.redo.calls.push(o),h.redo.args.push(l)),t.undoQueue.queue.length>a.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--)},c.startSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},c.stopSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},c.undo=function(f){var n,o;if(f.framework&&f.framework.isPolar){f.framework.undo();return}if(!(f.undoQueue===void 0||isNaN(f.undoQueue.index)||f.undoQueue.index<=0)){for(f.undoQueue.index--,n=f.undoQueue.queue[f.undoQueue.index],f.undoQueue.inSequence=!0,o=0;o<n.undo.calls.length;o++)c.plotDo(f,n.undo.calls[o],n.undo.args[o]);f.undoQueue.inSequence=!1,f.autoplay=!1}},c.redo=function(f){var n,o;if(f.framework&&f.framework.isPolar){f.framework.redo();return}if(!(f.undoQueue===void 0||isNaN(f.undoQueue.index)||f.undoQueue.index>=f.undoQueue.queue.length)){for(n=f.undoQueue.queue[f.undoQueue.index],f.undoQueue.inSequence=!0,o=0;o<n.redo.calls.length;o++)c.plotDo(f,n.redo.calls[o],n.redo.args[o]);f.undoQueue.inSequence=!1,f.autoplay=!1,f.undoQueue.index++}},c.plotDo=function(t,f,n){t.autoplay=!0,n=u(t,n),f.apply(null,n)},v.exports=c},{"../lib":778,"../plot_api/plot_config":815}],795:[function(e,v,S){S.counter=function(r,a,u,c){var t=(a||"")+(u?"":"$"),f=c===!1?"":"^";return r==="xy"?new RegExp(f+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+t):new RegExp(f+r+"([2-9]|[1-9][0-9]+)?"+t)}},{}],796:[function(e,v,S){var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,a=/^[^\.\[\]]+$/;v.exports=function(u,c){for(;c;){var t=u.match(r);if(t)u=t[1];else if(u.match(a))u="";else throw new Error("bad relativeAttr call:"+[u,c]);if(c.charAt(0)==="^")c=c.slice(1);else break}return u&&c.charAt(0)!=="["?u+"."+c:u+c}},{}],797:[function(e,v,S){var r=e("./array").isArrayOrTypedArray,a=e("./is_plain_object");v.exports=function u(c,t){for(var f in t){var n=t[f],o=c[f];if(o!==n)if(f.charAt(0)==="_"||typeof n=="function"){if(f in c)continue;c[f]=n}else if(r(n)&&r(o)&&a(n[0])){if(f==="customdata"||f==="ids")continue;for(var l=Math.min(n.length,o.length),h=0;h<l;h++)o[h]!==n[h]&&a(n[h])&&a(o[h])&&u(o[h],n[h])}else a(n)&&a(o)&&(u(o,n),Object.keys(o).length||delete c[f])}}},{"./array":760,"./is_plain_object":779}],798:[function(e,v,S){var r=e("fast-isnumeric"),a=e("./loggers"),u=e("./identity"),c=e("../constants/numerical").BADNUM,t=1e-9;S.findBin=function(h,i,s){if(r(i.start))return s?Math.ceil((h-i.start)/i.size-t)-1:Math.floor((h-i.start)/i.size+t);var p=0,d=i.length,g=0,b=d>1?(i[d-1]-i[0])/(d-1):1,m,x;for(b>=0?x=s?f:n:x=s?l:o,h+=b*t*(s?-1:1)*(b>=0?1:-1);p<d&&g++<100;)m=Math.floor((p+d)/2),x(i[m],h)?p=m+1:d=m;return g>90&&a.log("Long binary search..."),p-1};function f(h,i){return h<i}function n(h,i){return h<=i}function o(h,i){return h>i}function l(h,i){return h>=i}S.sorterAsc=function(h,i){return h-i},S.sorterDes=function(h,i){return i-h},S.distinctVals=function(h,i){var s=(i||{}).unitMinDiff,p=h.slice();p.sort(S.sorterAsc);var d;for(d=p.length-1;d>-1&&p[d]===c;d--);var g=1;s||(g=p[d]-p[0]||1);for(var b=g/(d||1)/1e4,m=[],x,w=0;w<=d;w++){var y=p[w],T=y-x;x===void 0?(m.push(y),x=y):T>b&&(g=Math.min(g,T),m.push(y),x=y)}return{vals:m,minDiff:g}},S.roundUp=function(h,i,s){for(var p=0,d=i.length-1,g,b=0,m=s?0:1,x=s?1:0,w=s?Math.ceil:Math.floor;p<d&&b++<100;)g=w((p+d)/2),i[g]<=h?p=g+m:d=g-x;return i[p]},S.sort=function(h,i){for(var s=0,p=0,d=1;d<h.length;d++){var g=i(h[d],h[d-1]);if(g<0?s=1:g>0&&(p=1),s&&p)return h.sort(i)}return p?h:h.reverse()},S.findIndexOfMin=function(h,i){i=i||u;for(var s=1/0,p,d=0;d<h.length;d++){var g=i(h[d]);g<s&&(s=g,p=d)}return p}},{"../constants/numerical":753,"./identity":776,"./loggers":782,"fast-isnumeric":241}],799:[function(e,v,S){v.exports=function(a,u){(a.attr("class")||"").split(" ").forEach(function(c){c.indexOf("cursor-")===0&&a.classed(c,!1)}),u&&a.classed("cursor-"+u,!0)}},{}],800:[function(e,v,S){var r=e("../components/color"),a=function(){};v.exports=function(c){for(var t in c)typeof c[t]=="function"&&(c[t]=a);c.destroy=function(){c.container.parentNode.removeChild(c.container)};var f=document.createElement("div");f.className="no-webgl",f.style.cursor="pointer",f.style.fontSize="24px",f.style.color=r.defaults[0],f.style.position="absolute",f.style.left=f.style.top="0px",f.style.width=f.style.height="100%",f.style["background-color"]=r.lightLine,f.style["z-index"]=30;var n=document.createElement("p");return n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",f.appendChild(n),c.container.appendChild(f),c.container.style.background="#FFFFFF",c.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":643}],801:[function(e,v,S){var r=e("fast-isnumeric"),a=e("./array").isArrayOrTypedArray;S.aggNums=function(u,c,t,f){var n,o;if((!f||f>t.length)&&(f=t.length),r(c)||(c=!1),a(t[0])){for(o=new Array(f),n=0;n<f;n++)o[n]=S.aggNums(u,c,t[n]);t=o}for(n=0;n<f;n++)r(c)?r(t[n])&&(c=u(+c,+t[n])):c=t[n];return c},S.len=function(u){return S.aggNums(function(c){return c+1},0,u)},S.mean=function(u,c){return c||(c=S.len(u)),S.aggNums(function(t,f){return t+f},0,u)/c},S.midRange=function(u){if(!(u===void 0||u.length===0))return(S.aggNums(Math.max,null,u)+S.aggNums(Math.min,null,u))/2},S.variance=function(u,c,t){return c||(c=S.len(u)),r(t)||(t=S.mean(u,c)),S.aggNums(function(f,n){return f+Math.pow(n-t,2)},0,u)/c},S.stdev=function(u,c,t){return Math.sqrt(S.variance(u,c,t))},S.median=function(u){var c=u.slice().sort();return S.interp(c,.5)},S.interp=function(u,c){if(!r(c))throw"n should be a finite number";if(c=c*u.length-.5,c<0)return u[0];if(c>u.length-1)return u[u.length-1];var t=c%1;return t*u[Math.ceil(c)]+(1-t)*u[Math.floor(c)]}},{"./array":760,"fast-isnumeric":241}],802:[function(e,v,S){var r=e("color-normalize");function a(u){return u?r(u):[0,0,0,1]}v.exports=a},{"color-normalize":125}],803:[function(e,v,S){var r=e("d3"),a=e("../lib"),u=a.strTranslate,c=e("../constants/xmlns_namespaces"),t=e("../constants/alignment").LINE_SPACING;function f(U,X){return U.node().getBoundingClientRect()[X]}var n=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;S.convertToTspans=function(U,X,z){var B=U.text(),j=!U.attr("data-notex")&&typeof MathJax<"u"&&B.match(n),V=r.select(U.node().parentNode);if(V.empty())return;var K=U.attr("class")?U.attr("class").split(" ")[0]:"text";K+="-math",V.selectAll("svg."+K).remove(),V.selectAll("g."+K+"-group").remove(),U.style("display",null).attr({"data-unformatted":B,"data-math":"N"});function te(){V.empty()||(K=U.attr("class")+"-math",V.select("svg."+K).remove()),U.text("").style("white-space","pre");var $=N(U.node(),B);$&&U.style("pointer-events","all"),S.positionText(U),z&&z.call(U)}return j?(X&&X._promises||[]).push(new Promise(function($){U.style("display","none");var ie=parseInt(U.node().style.fontSize,10),se={fontSize:ie};i(j[2],se,function(Q,H,oe){V.selectAll("svg."+K).remove(),V.selectAll("g."+K+"-group").remove();var re=Q&&Q.select("svg");if(!re||!re.node()){te(),$();return}var ee=V.append("g").classed(K+"-group",!0).attr({"pointer-events":"none","data-unformatted":B,"data-math":"Y"});ee.node().appendChild(re.node()),H&&H.node()&&re.node().insertBefore(H.node().cloneNode(!0),re.node().firstChild),re.attr({class:K,height:oe.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ae=U.node().style.fill||"black",fe=re.select("g");fe.attr({fill:ae,stroke:ae});var de=f(fe,"width"),pe=f(fe,"height"),W=+U.attr("x")-de*{start:0,middle:.5,end:1}[U.attr("text-anchor")||"start"],ue=ie||f(U,"height"),me=-ue/4;K[0]==="y"?(ee.attr({transform:"rotate("+[-90,+U.attr("x"),+U.attr("y")]+")"+u(-de/2,me-pe/2)}),re.attr({x:+U.attr("x"),y:+U.attr("y")})):K[0]==="l"?re.attr({x:U.attr("x"),y:me-pe/2}):K[0]==="a"&&K.indexOf("atitle")!==0?re.attr({x:0,y:me}):re.attr({x:W,y:+U.attr("y")+me-pe/2}),z&&z.call(U,ee),$(ee)})})):te(),U};var o=/(<|&lt;|&#60;)/g,l=/(>|&gt;|&#62;)/g;function h(U){return U.replace(o,"\\lt ").replace(l,"\\gt ")}function i(U,X,z){var B,j,V,K;MathJax.Hub.Queue(function(){return j=a.extendDeepAll({},MathJax.Hub.config),V=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if(B=MathJax.Hub.config.menuSettings.renderer,B!=="SVG")return MathJax.Hub.setRenderer("SVG")},function(){var te="math-output-"+a.randstr({},64);return K=r.select("body").append("div").attr({id:te}).style({visibility:"hidden",position:"absolute"}).style({"font-size":X.fontSize+"px"}).text(h(U)),MathJax.Hub.Typeset(K.node())},function(){var te=r.select("body").select("#MathJax_SVG_glyphs");if(K.select(".MathJax_SVG").empty()||!K.select("svg").node())a.log("There was an error in the tex syntax.",U),z();else{var $=K.select("svg").node().getBoundingClientRect();z(K.select(".MathJax_SVG"),te,$)}if(K.remove(),B!=="SVG")return MathJax.Hub.setRenderer(B)},function(){return V!==void 0&&(MathJax.Hub.processSectionDelay=V),MathJax.Hub.Config(j)})}var s={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},p={sub:"0.3em",sup:"-0.6em"},d={sub:"-0.21em",sup:"0.42em"},g="\u200B",b=["http:","https:","mailto:","",void 0,":"],m=S.NEWLINES=/(\r\n?|\n)/g,x=/(<[^<>]*>)/,w=/<(\/?)([^ >]*)(\s+(.*))?>/i,y=/<br(\s+.*)?>/i;S.BR_TAG_ALL=/<br(\s+.*)?>/gi;var T=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,M=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,P=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,L=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function I(U,X){if(!U)return null;var z=U.match(X),B=z&&(z[3]||z[4]);return B&&D(B)}var E=/(^|;)\s*color:/;S.plainText=function(U,X){X=X||{};for(var z=X.len!==void 0&&X.len!==-1?X.len:1/0,B=X.allowedTags!==void 0?X.allowedTags:["br"],j="...",V=j.length,K=U.split(x),te=[],$="",ie=0,se=0;se<K.length;se++){var Q=K[se],H=Q.match(w),oe=H&&H[2].toLowerCase();if(oe)B.indexOf(oe)!==-1&&(te.push(Q),$=oe);else{var re=Q.length;if(ie+re<z)te.push(Q),ie+=re;else if(ie<z){var ee=z-ie;$&&($!=="br"||ee<=V||re<=V)&&te.pop(),z>V?te.push(Q.substr(0,ee-V)+j):te.push(Q.substr(0,ee));break}$=""}}return te.join("")};var k={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},C=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function D(U){return U.replace(C,function(X,z){var B;return z.charAt(0)==="#"?B=F(z.charAt(1)==="x"?parseInt(z.substr(2),16):parseInt(z.substr(1),10)):B=k[z],B||X})}S.convertEntities=D;function F(U){if(!(U>1114111)){var X=String.fromCodePoint;if(X)return X(U);var z=String.fromCharCode;return U<=65535?z(U):z((U>>10)+55232,U%1024+56320)}}function N(U,X){X=X.replace(m," ");var z=!1,B=[],j,V=-1;function K(){V++;var me=document.createElementNS(c.svg,"tspan");r.select(me).attr({class:"line",dy:V*t+"em"}),U.appendChild(me),j=me;var be=B;if(B=[{node:me}],be.length>1)for(var Me=1;Me<be.length;Me++)te(be[Me])}function te(me){var be=me.type,Me={},Pe;if(be==="a"){Pe="a";var Ge=me.target,ze=me.href,Qe=me.popup;ze&&(Me={"xlink:xlink:show":Ge==="_blank"||Ge.charAt(0)!=="_"?"new":"replace",target:Ge,"xlink:xlink:href":ze},Qe&&(Me.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Qe+'");return false;'))}else Pe="tspan";me.style&&(Me.style=me.style);var tt=document.createElementNS(c.svg,Pe);if(be==="sup"||be==="sub"){$(j,g),j.appendChild(tt);var Ce=document.createElementNS(c.svg,"tspan");$(Ce,g),r.select(Ce).attr("dy",d[be]),Me.dy=p[be],j.appendChild(tt),j.appendChild(Ce)}else j.appendChild(tt);r.select(tt).attr(Me),j=me.node=tt,B.push(me)}function $(me,be){me.appendChild(document.createTextNode(be))}function ie(me){if(B.length===1){a.log("Ignoring unexpected end tag </"+me+">.",X);return}var be=B.pop();me!==be.type&&a.log("Start tag <"+be.type+"> doesnt match end tag <"+me+">. Pretending it did match.",X),j=B[B.length-1].node}var se=y.test(X);se?K():(j=U,B=[{node:U}]);for(var Q=X.split(x),H=0;H<Q.length;H++){var oe=Q[H],re=oe.match(w),ee=re&&re[2].toLowerCase(),ae=s[ee];if(ee==="br")K();else if(ae===void 0)$(j,D(oe));else if(re[1])ie(ee);else{var fe=re[4],de={type:ee},pe=I(fe,T);if(pe?(pe=pe.replace(E,"$1 fill:"),ae&&(pe+=";"+ae)):ae&&(pe=ae),pe&&(de.style=pe),ee==="a"){z=!0;var W=I(fe,M);if(W){var ue=document.createElement("a");ue.href=W,b.indexOf(ue.protocol)!==-1&&(de.href=encodeURI(decodeURI(W)),de.target=I(fe,P)||"_blank",de.popup=I(fe,L))}}te(de)}}return z}S.sanitizeHTML=function(X){X=X.replace(m," ");for(var z=document.createElement("p"),B=z,j=[],V=X.split(x),K=0;K<V.length;K++){var te=V[K],$=te.match(w),ie=$&&$[2].toLowerCase();if(ie in s)if($[1])j.length&&(B=j.pop());else{var se=$[4],Q=I(se,T),H=Q?{style:Q}:{};if(ie==="a"){var oe=I(se,M);if(oe){var re=document.createElement("a");if(re.href=oe,b.indexOf(re.protocol)!==-1){H.href=encodeURI(decodeURI(oe));var ee=I(se,P);ee&&(H.target=ee)}}}var ae=document.createElement(ie);B.appendChild(ae),r.select(ae).attr(H),B=ae,j.push(ae)}else B.appendChild(document.createTextNode(D(te)))}var fe="innerHTML";return z[fe]},S.lineCount=function(X){return X.selectAll("tspan.line").size()||1},S.positionText=function(X,z,B){return X.each(function(){var j=r.select(this);function V($,ie){return ie===void 0?(ie=j.attr($),ie===null&&(j.attr($,0),ie=0)):j.attr($,ie),ie}var K=V("x",z),te=V("y",B);this.nodeName==="text"&&j.selectAll("tspan.line").attr({x:K,y:te})})};function G(U,X,z){var B=z.horizontalAlign,j=z.verticalAlign||"top",V=U.node().getBoundingClientRect(),K=X.node().getBoundingClientRect(),te,$,ie;return j==="bottom"?$=function(){return V.bottom-te.height}:j==="middle"?$=function(){return V.top+(V.height-te.height)/2}:$=function(){return V.top},B==="right"?ie=function(){return V.right-te.width}:B==="center"?ie=function(){return V.left+(V.width-te.width)/2}:ie=function(){return V.left},function(){te=this.node().getBoundingClientRect();var se=ie()-K.left,Q=$()-K.top,H=z.gd||{};if(z.gd){H._fullLayout._calcInverseTransform(H);var oe=a.apply3DTransform(H._fullLayout._invTransform)(se,Q);se=oe[0],Q=oe[1]}return this.style({top:Q+"px",left:se+"px","z-index":1e3}),this}}S.makeEditable=function(U,X){var z=X.gd,B=X.delegate,j=r.dispatch("edit","input","cancel"),V=B||U;if(U.style({"pointer-events":B?"none":"all"}),U.size()!==1)throw new Error("boo");function K(){$(),U.style({opacity:0});var ie=V.attr("class"),se;ie?se="."+ie.split(" ")[0]+"-math-group":se="[class*=-math-group]",se&&r.select(U.node().parentNode).select(se).style({opacity:0})}function te(ie){var se=ie.node(),Q=document.createRange();Q.selectNodeContents(se);var H=window.getSelection();H.removeAllRanges(),H.addRange(Q),se.focus()}function $(){var ie=r.select(z),se=ie.select(".svg-container"),Q=se.append("div"),H=U.node().style,oe=parseFloat(H.fontSize||12),re=X.text;re===void 0&&(re=U.attr("data-unformatted")),Q.classed("plugin-editable editable",!0).style({position:"absolute","font-family":H.fontFamily||"Arial","font-size":oe,color:X.fill||H.fill||"black",opacity:1,"background-color":X.background||"transparent",outline:"#ffffff33 1px solid",margin:[-oe/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(re).call(G(U,se,X)).on("blur",function(){z._editing=!1,U.text(this.textContent).style({opacity:1});var ee=r.select(this).attr("class"),ae;ee?ae="."+ee.split(" ")[0]+"-math-group":ae="[class*=-math-group]",ae&&r.select(U.node().parentNode).select(ae).style({opacity:0});var fe=this.textContent;r.select(this).transition().duration(0).remove(),r.select(document).on("mouseup",null),j.edit.call(U,fe)}).on("focus",function(){var ee=this;z._editing=!0,r.select(document).on("mouseup",function(){if(r.event.target===ee)return!1;document.activeElement===Q.node()&&Q.node().blur()})}).on("keyup",function(){r.event.which===27?(z._editing=!1,U.style({opacity:1}),r.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),j.cancel.call(U,this.textContent)):(j.input.call(U,this.textContent),r.select(this).call(G(U,se,X)))}).on("keydown",function(){r.event.which===13&&this.blur()}).call(te)}return X.immediate?K():V.on("click",K),r.rebind(U,j,"on")}},{"../constants/alignment":745,"../constants/xmlns_namespaces":754,"../lib":778,d3:169}],804:[function(e,v,S){var r={};S.throttle=function(c,t,f){var n=r[c],o=Date.now();if(!n){for(var l in r)r[l].ts<o-6e4&&delete r[l];n=r[c]={ts:0,timer:null}}a(n);function h(){f(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}if(o>n.ts+t){h();return}n.timer=setTimeout(function(){h(),n.timer=null},t)},S.done=function(u){var c=r[u];return!c||!c.timer?Promise.resolve():new Promise(function(t){var f=c.onDone;c.onDone=function(){f&&f(),t(),c.onDone=null}})},S.clear=function(u){if(u)a(r[u]),delete r[u];else for(var c in r)S.clear(c)};function a(u){u&&u.timer!==null&&(clearTimeout(u.timer),u.timer=null)}},{}],805:[function(e,v,S){var r=e("fast-isnumeric");v.exports=function(u,c){if(u>0)return Math.log(u)/Math.LN10;var t=Math.log(Math.min(c[0],c[1]))/Math.LN10;return r(t)||(t=Math.log(Math.max(c[0],c[1]))/Math.LN10-6),t}},{"fast-isnumeric":241}],806:[function(e,v,S){var r=v.exports={},a=e("../plots/geo/constants").locationmodeToLayer,u=e("topojson-client").feature;r.getTopojsonName=function(c){return[c.scope.replace(/ /g,"-"),"_",c.resolution.toString(),"m"].join("")},r.getTopojsonPath=function(c,t){return c+t+".json"},r.getTopojsonFeatures=function(c,t){var f=a[c.locationmode],n=t.objects[f];return u(t,n).features}},{"../plots/geo/constants":858,"topojson-client":579}],807:[function(e,v,S){v.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],808:[function(e,v,S){v.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],809:[function(e,v,S){var r=e("../registry");v.exports=function(u){for(var c=r.layoutArrayContainers,t=r.layoutArrayRegexes,f=u.split("[")[0],n,o,l=0;l<t.length;l++)if(o=u.match(t[l]),o&&o.index===0){n=o[0];break}if(n||(n=c[c.indexOf(f)]),!n)return!1;var h=u.substr(n.length);return h?(o=h.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),o?{array:n,index:Number(o[1]),property:o[3]||""}:!1):{array:n,index:"",property:""}}},{"../registry":911}],810:[function(e,v,S){var r=e("../lib"),a=r.extendFlat,u=r.isPlainObject,c={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},t={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},f=c.flags.slice().concat(["fullReplot"]),n=t.flags.slice().concat("layoutReplot");v.exports={traces:c,layout:t,traceFlags:function(){return o(f)},layoutFlags:function(){return o(n)},update:function(i,s){var p=s.editType;if(p&&p!=="none")for(var d=p.split("+"),g=0;g<d.length;g++)i[d[g]]=!0},overrideAll:l};function o(i){for(var s={},p=0;p<i.length;p++)s[i[p]]=!1;return s}function l(i,s,p){var d=a({},i);for(var g in d){var b=d[g];u(b)&&(d[g]=h(b,s,p,g))}return p==="from-root"&&(d.editType=s),d}function h(i,s,p,d){if(i.valType){var g=a({},i);if(g.editType=s,Array.isArray(i.items)){g.items=new Array(i.items.length);for(var b=0;b<i.items.length;b++)g.items[b]=h(i.items[b],s)}return g}else return l(i,s,d.charAt(0)==="_"?"nested":"from-root")}},{"../lib":778}],811:[function(e,v,S){var r=e("fast-isnumeric"),a=e("gl-mat4/fromQuat"),u=e("../registry"),c=e("../lib"),t=e("../plots/plots"),f=e("../plots/cartesian/axis_ids"),n=e("../components/color"),o=f.cleanId,l=f.getFromTrace,h=u.traceIs;S.clearPromiseQueue=function(y){Array.isArray(y._promises)&&y._promises.length>0&&c.log("Clearing previous rejected promises from queue."),y._promises=[]},S.cleanLayout=function(y){var T,M;y||(y={}),y.xaxis1&&(y.xaxis||(y.xaxis=y.xaxis1),delete y.xaxis1),y.yaxis1&&(y.yaxis||(y.yaxis=y.yaxis1),delete y.yaxis1),y.scene1&&(y.scene||(y.scene=y.scene1),delete y.scene1);var P=(t.subplotsRegistry.cartesian||{}).attrRegex,L=(t.subplotsRegistry.polar||{}).attrRegex,I=(t.subplotsRegistry.ternary||{}).attrRegex,E=(t.subplotsRegistry.gl3d||{}).attrRegex,k=Object.keys(y);for(T=0;T<k.length;T++){var C=k[T];if(P&&P.test(C)){var D=y[C];D.anchor&&D.anchor!=="free"&&(D.anchor=o(D.anchor)),D.overlaying&&(D.overlaying=o(D.overlaying)),D.type||(D.isdate?D.type="date":D.islog?D.type="log":D.isdate===!1&&D.islog===!1&&(D.type="linear")),(D.autorange==="withzero"||D.autorange==="tozero")&&(D.autorange=!0,D.rangemode="tozero"),delete D.islog,delete D.isdate,delete D.categories,b(D,"domain")&&delete D.domain,D.autotick!==void 0&&(D.tickmode===void 0&&(D.tickmode=D.autotick?"auto":"linear"),delete D.autotick),s(D)}else if(L&&L.test(C)){var F=y[C];s(F.radialaxis)}else if(I&&I.test(C)){var N=y[C];s(N.aaxis),s(N.baxis),s(N.caxis)}else if(E&&E.test(C)){var G=y[C],U=G.cameraposition;if(Array.isArray(U)&&U[0].length===4){var X=U[0],z=U[1],B=U[2],j=a([],X),V=[];for(M=0;M<3;++M)V[M]=z[M]+B*j[2+4*M];G.camera={eye:{x:V[0],y:V[1],z:V[2]},center:{x:z[0],y:z[1],z:z[2]},up:{x:0,y:0,z:1}},delete G.cameraposition}s(G.xaxis),s(G.yaxis),s(G.zaxis)}}var K=Array.isArray(y.annotations)?y.annotations.length:0;for(T=0;T<K;T++){var te=y.annotations[T];!c.isPlainObject(te)||(te.ref&&(te.ref==="paper"?(te.xref="paper",te.yref="paper"):te.ref==="data"&&(te.xref="x",te.yref="y"),delete te.ref),i(te,"xref"),i(te,"yref"))}var $=Array.isArray(y.shapes)?y.shapes.length:0;for(T=0;T<$;T++){var ie=y.shapes[T];!c.isPlainObject(ie)||(i(ie,"xref"),i(ie,"yref"))}var se=Array.isArray(y.images)?y.images.length:0;for(T=0;T<se;T++){var Q=y.images[T];!c.isPlainObject(Q)||(i(Q,"xref"),i(Q,"yref"))}var H=y.legend;return H&&(H.x>3?(H.x=1.02,H.xanchor="left"):H.x<-2&&(H.x=-.02,H.xanchor="right"),H.y>3?(H.y=1.02,H.yanchor="bottom"):H.y<-2&&(H.y=-.02,H.yanchor="top")),s(y),y.dragmode==="rotate"&&(y.dragmode="orbit"),n.clean(y),y.template&&y.template.layout&&S.cleanLayout(y.template.layout),y};function i(y,T){var M=y[T],P=T.charAt(0);M&&M!=="paper"&&(y[T]=o(M,P,!0))}function s(y){y&&((typeof y.title=="string"||typeof y.title=="number")&&(y.title={text:y.title}),T("titlefont","font"),T("titleposition","position"),T("titleside","side"),T("titleoffset","offset"));function T(M,P){var L=y[M],I=y.title&&y.title[P];L&&!I&&(y.title||(y.title={}),y.title[P]=y[M],delete y[M])}}S.cleanData=function(y){for(var T=0;T<y.length;T++){var M=y[T],P;if(M.type==="histogramy"&&"xbins"in M&&!("ybins"in M)&&(M.ybins=M.xbins,delete M.xbins),M.error_y&&"opacity"in M.error_y){var L=n.defaults,I=M.error_y.color||(h(M,"bar")?n.defaultLine:L[T%L.length]);M.error_y.color=n.addOpacity(n.rgb(I),n.opacity(I)*M.error_y.opacity),delete M.error_y.opacity}if("bardir"in M&&(M.bardir==="h"&&(h(M,"bar")||M.type.substr(0,9)==="histogram")&&(M.orientation="h",S.swapXYData(M)),delete M.bardir),M.type==="histogramy"&&S.swapXYData(M),(M.type==="histogramx"||M.type==="histogramy")&&(M.type="histogram"),"scl"in M&&!("colorscale"in M)&&(M.colorscale=M.scl,delete M.scl),"reversescl"in M&&!("reversescale"in M)&&(M.reversescale=M.reversescl,delete M.reversescl),M.xaxis&&(M.xaxis=o(M.xaxis,"x")),M.yaxis&&(M.yaxis=o(M.yaxis,"y")),h(M,"gl3d")&&M.scene&&(M.scene=t.subplotsRegistry.gl3d.cleanId(M.scene)),!h(M,"pie-like")&&!h(M,"bar-like"))if(Array.isArray(M.textposition))for(P=0;P<M.textposition.length;P++)M.textposition[P]=g(M.textposition[P]);else M.textposition&&(M.textposition=g(M.textposition));var E=u.getModule(M);if(E&&E.colorbar){var k=E.colorbar.container,C=k?M[k]:M;C&&C.colorscale&&(C.colorscale==="YIGnBu"&&(C.colorscale="YlGnBu"),C.colorscale==="YIOrRd"&&(C.colorscale="YlOrRd"))}if(M.type==="surface"&&c.isPlainObject(M.contours)){var D=["x","y","z"];for(P=0;P<D.length;P++){var F=M.contours[D[P]];!c.isPlainObject(F)||(F.highlightColor&&(F.highlightcolor=F.highlightColor,delete F.highlightColor),F.highlightWidth&&(F.highlightwidth=F.highlightWidth,delete F.highlightWidth))}}if(M.type==="candlestick"||M.type==="ohlc"){var N=(M.increasing||{}).showlegend!==!1,G=(M.decreasing||{}).showlegend!==!1,U=p(M.increasing),X=p(M.decreasing);if(U!==!1&&X!==!1){var z=d(U,X,N,G);z&&(M.name=z)}else(U||X)&&!M.name&&(M.name=U||X)}if(Array.isArray(M.transforms)){var B=M.transforms;for(P=0;P<B.length;P++){var j=B[P];if(!!c.isPlainObject(j))switch(j.type){case"filter":j.filtersrc&&(j.target=j.filtersrc,delete j.filtersrc),j.calendar&&(j.valuecalendar||(j.valuecalendar=j.calendar),delete j.calendar);break;case"groupby":if(j.styles=j.styles||j.style,j.styles&&!Array.isArray(j.styles)){var V=j.styles,K=Object.keys(V);j.styles=[];for(var te=0;te<K.length;te++)j.styles.push({target:K[te],value:V[K[te]]})}break}}}b(M,"line")&&delete M.line,"marker"in M&&(b(M.marker,"line")&&delete M.marker.line,b(M,"marker")&&delete M.marker),n.clean(M),M.autobinx&&(delete M.autobinx,delete M.xbins),M.autobiny&&(delete M.autobiny,delete M.ybins),s(M),M.colorbar&&s(M.colorbar),M.marker&&M.marker.colorbar&&s(M.marker.colorbar),M.line&&M.line.colorbar&&s(M.line.colorbar),M.aaxis&&s(M.aaxis),M.baxis&&s(M.baxis)}};function p(y){if(!c.isPlainObject(y))return!1;var T=y.name;return delete y.name,delete y.showlegend,(typeof T=="string"||typeof T=="number")&&String(T)}function d(y,T,M,P){if(M&&!P)return y;if(P&&!M||!y.trim())return T;if(!T.trim())return y;var L=Math.min(y.length,T.length),I;for(I=0;I<L&&y.charAt(I)===T.charAt(I);I++);var E=y.substr(0,I);return E.trim()}function g(y){var T="middle",M="center";return typeof y=="string"&&(y.indexOf("top")!==-1?T="top":y.indexOf("bottom")!==-1&&(T="bottom"),y.indexOf("left")!==-1?M="left":y.indexOf("right")!==-1&&(M="right")),T+" "+M}function b(y,T){return T in y&&typeof y[T]=="object"&&Object.keys(y[T]).length===0}S.swapXYData=function(y){var T;if(c.swapAttrs(y,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(y.z)&&Array.isArray(y.z[0])&&(y.transpose?delete y.transpose:y.transpose=!0),y.error_x&&y.error_y){var M=y.error_y,P="copy_ystyle"in M?M.copy_ystyle:!(M.color||M.thickness||M.width);c.swapAttrs(y,["error_?.copy_ystyle"]),P&&c.swapAttrs(y,["error_?.color","error_?.thickness","error_?.width"])}if(typeof y.hoverinfo=="string"){var L=y.hoverinfo.split("+");for(T=0;T<L.length;T++)L[T]==="x"?L[T]="y":L[T]==="y"&&(L[T]="x");y.hoverinfo=L.join("+")}},S.coerceTraceIndices=function(y,T){if(r(T))return[T];if(!Array.isArray(T)||!T.length)return y.data.map(function(L,I){return I});if(Array.isArray(T)){for(var M=[],P=0;P<T.length;P++)c.isIndex(T[P],y.data.length)?M.push(T[P]):c.warn("trace index (",T[P],") is not a number or is out of bounds");return M}return T},S.manageArrayContainers=function(y,T,M){var P=y.obj,L=y.parts,I=L.length,E=L[I-1],k=r(E);if(k&&T===null){var C=L.slice(0,I-1).join("."),D=c.nestedProperty(P,C).get();D.splice(E,1)}else k&&y.get()===void 0&&y.get()===void 0&&(M[y.astr]=null),y.set(T)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function x(y){var T=y.search(m);if(T>0)return y.substr(0,T)}S.hasParent=function(y,T){for(var M=x(T);M;){if(M in y)return!0;M=x(M)}return!1};var w=["x","y","z"];S.clearAxisTypes=function(y,T,M){for(var P=0;P<T.length;P++)for(var L=y._fullData[P],I=0;I<3;I++){var E=l(y,L,w[I]);if(E&&E.type!=="log"){var k=E._name,C=E._id.substr(1);if(C.substr(0,5)==="scene"){if(M[C]!==void 0)continue;k=C+"."+k}var D=k+".type";M[k]===void 0&&M[D]===void 0&&c.nestedProperty(y.layout,D).set(null)}}}},{"../components/color":643,"../lib":778,"../plots/cartesian/axis_ids":831,"../plots/plots":891,"../registry":911,"fast-isnumeric":241,"gl-mat4/fromQuat":282}],812:[function(e,v,S){var r=e("./plot_api");S.plot=r.plot,S.newPlot=r.newPlot,S.restyle=r.restyle,S.relayout=r.relayout,S.redraw=r.redraw,S.update=r.update,S._guiRestyle=r._guiRestyle,S._guiRelayout=r._guiRelayout,S._guiUpdate=r._guiUpdate,S._storeDirectGUIEdit=r._storeDirectGUIEdit,S.react=r.react,S.extendTraces=r.extendTraces,S.prependTraces=r.prependTraces,S.addTraces=r.addTraces,S.deleteTraces=r.deleteTraces,S.moveTraces=r.moveTraces,S.purge=r.purge,S.addFrames=r.addFrames,S.deleteFrames=r.deleteFrames,S.animate=r.animate,S.setPlotConfig=r.setPlotConfig,S.toImage=e("./to_image"),S.validate=e("./validate"),S.downloadImage=e("../snapshot/download");var a=e("./template_api");S.makeTemplate=a.makeTemplate,S.validateTemplate=a.validateTemplate},{"../snapshot/download":913,"./plot_api":814,"./template_api":819,"./to_image":820,"./validate":821}],813:[function(e,v,S){var r=e("../lib/is_plain_object"),a=e("../lib/noop"),u=e("../lib/loggers"),c=e("../lib/search").sorterAsc,t=e("../registry");S.containerArrayMatch=e("./container_array_match");var f=S.isAddVal=function(l){return l==="add"||r(l)},n=S.isRemoveVal=function(l){return l===null||l==="remove"};S.applyContainerArrayChanges=function(l,h,i,s,p){var d=h.astr,g=t.getComponentMethod(d,"supplyLayoutDefaults"),b=t.getComponentMethod(d,"draw"),m=t.getComponentMethod(d,"drawOne"),x=s.replot||s.recalc||g===a||b===a,w=l.layout,y=l._fullLayout;if(i[""]){Object.keys(i).length>1&&u.warn("Full array edits are incompatible with other edits",d);var T=i[""][""];if(n(T))h.set(null);else if(Array.isArray(T))h.set(T);else return u.warn("Unrecognized full array edit value",d,T),!0;return x?!1:(g(w,y),b(l),!0)}var M=Object.keys(i).map(Number).sort(c),P=h.get(),L=P||[],I=p(y,d).get(),E=[],k=-1,C=L.length,D,F,N,G,U,X,z,B;for(D=0;D<M.length;D++){if(N=M[D],G=i[N],U=Object.keys(G),X=G[""],z=f(X),N<0||N>L.length-(z?0:1)){u.warn("index out of range",d,N);continue}if(X!==void 0)U.length>1&&u.warn("Insertion & removal are incompatible with edits to the same index.",d,N),n(X)?E.push(N):z?(X==="add"&&(X={}),L.splice(N,0,X),I&&I.splice(N,0,{})):u.warn("Unrecognized full object edit value",d,N,X),k===-1&&(k=N);else for(F=0;F<U.length;F++)B=d+"["+N+"].",p(L[N],U[F],B).set(G[U[F]])}for(D=E.length-1;D>=0;D--)L.splice(E[D],1),I&&I.splice(E[D],1);if(L.length?P||h.set(L):h.set(null),x)return!1;if(g(w,y),m!==a){var j;if(k===-1)j=M;else{for(C=Math.max(L.length,C),j=[],D=0;D<M.length&&(N=M[D],!(N>=k));D++)j.push(N);for(D=k;D<C;D++)j.push(D)}for(D=0;D<j.length;D++)m(l,j[D])}else b(l);return!0}},{"../lib/is_plain_object":779,"../lib/loggers":782,"../lib/noop":787,"../lib/search":798,"../registry":911,"./container_array_match":809}],814:[function(e,v,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("has-hover"),c=e("../lib"),t=c.nestedProperty,f=e("../lib/events"),n=e("../lib/queue"),o=e("../registry"),l=e("./plot_schema"),h=e("../plots/plots"),i=e("../plots/polar/legacy"),s=e("../plots/cartesian/axes"),p=e("../components/drawing"),d=e("../components/color"),g=e("../plots/cartesian/graph_interact").initInteractions,b=e("../constants/xmlns_namespaces"),m=e("../lib/svg_text_utils"),x=e("../plots/cartesian/select").clearSelect,w=e("./plot_config").dfltConfig,y=e("./manage_arrays"),T=e("./helpers"),M=e("./subroutines"),P=e("./edit_types"),L=e("../plots/cartesian/constants").AX_NAME_PATTERN,I=0,E=5;function k(ke,Ie,He,Ye){var ft;if(ke=c.getGraphDiv(ke),f.init(ke),c.isPlainObject(Ie)){var it=Ie;Ie=it.data,He=it.layout,Ye=it.config,ft=it.frames}var je=f.triggerHandler(ke,"plotly_beforeplot",[Ie,He,Ye]);if(je===!1)return Promise.reject();!Ie&&!He&&!c.isPlotDiv(ke)&&c.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",ke);function ot(){if(ft)return S.addFrames(ke,ft)}G(ke,Ye),He||(He={}),r.select(ke).classed("js-plotly-plot",!0),p.makeTester(),Array.isArray(ke._promises)||(ke._promises=[]);var Je=(ke.data||[]).length===0&&Array.isArray(Ie);Array.isArray(Ie)&&(T.cleanData(Ie),Je?ke.data=Ie:ke.data.push.apply(ke.data,Ie),ke.empty=!1),(!ke.layout||Je)&&(ke.layout=T.cleanLayout(He)),h.supplyDefaults(ke);var st=ke._fullLayout,It=st._has("cartesian");if(!st._has("polar")&&Ie&&Ie[0]&&Ie[0].r)return c.log("Legacy polar charts are deprecated!"),U(ke,Ie,He);st._replotting=!0,(Je||st._shouldCreateBgLayer)&&(et(ke),st._shouldCreateBgLayer&&delete st._shouldCreateBgLayer),ke.framework!==et&&(ke.framework=et,et(ke)),p.initGradients(ke),Je&&s.saveShowSpikeInitial(ke);var Nt=!ke.calcdata||ke.calcdata.length!==(ke._fullData||[]).length;Nt&&h.doCalcdata(ke);for(var nr=0;nr<ke.calcdata.length;nr++)ke.calcdata[nr][0].trace=ke._fullData[nr];ke._context.responsive?ke._responsiveChartHandler||(ke._responsiveChartHandler=function(){c.isHidden(ke)||h.resize(ke)},window.addEventListener("resize",ke._responsiveChartHandler)):c.clearResponsive(ke);var We=c.extendFlat({},st._size),Fe=0;function bt(){for(var Zt=st._basePlotModules,_r=0;_r<Zt.length;_r++)Zt[_r].drawFramework&&Zt[_r].drawFramework(ke);if(!st._glcanvas&&st._has("gl")&&(st._glcanvas=st._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Fr){return Fr.key}),st._glcanvas.enter().append("canvas").attr("class",function(Fr){return"gl-canvas gl-canvas-"+Fr.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})),st._glcanvas){st._glcanvas.attr("width",st.width).attr("height",st.height);var Gr=st._glcanvas.data()[0].regl;if(Gr&&(Math.floor(st.width)!==Gr._gl.drawingBufferWidth||Math.floor(st.height)!==Gr._gl.drawingBufferHeight)){var Or="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(Fe)c.error(Or);else return c.log(Or+" Clearing graph and plotting again."),h.cleanPlot([],{},ke._fullData,st),h.supplyDefaults(ke),st=ke._fullLayout,h.doCalcdata(ke),Fe++,bt()}}return st.modebar.orientation==="h"?st._modebardiv.style("height",null).style("width","100%"):st._modebardiv.style("width",null).style("height",st.height+"px"),h.previousPromises(ke)}function kt(){if(h.clearAutoMarginIds(ke),M.drawMarginPushers(ke),s.allowAutoMargin(ke),st._has("pie"))for(var Zt=ke._fullData,_r=0;_r<Zt.length;_r++){var Gr=Zt[_r];Gr.type==="pie"&&Gr.automargin&&h.allowAutoMargin(ke,"pie."+Gr.uid+".automargin")}return h.doAutoMargin(ke),h.previousPromises(ke)}function _t(){if(!!h.didMarginChange(We,st._size))return c.syncOrAsync([kt,M.layoutStyles],ke)}function Rt(){if(!Nt){Dt();return}return c.syncOrAsync([o.getComponentMethod("shapes","calcAutorange"),o.getComponentMethod("annotations","calcAutorange"),Dt],ke)}function Dt(){ke._transitioning||(M.doAutoRangeAndConstraints(ke),Je&&s.saveRangeInitial(ke),o.getComponentMethod("rangeslider","calcAutorange")(ke))}function Ut(){return s.draw(ke,Je?"":"redraw")}var Bt=[h.previousPromises,ot,bt,kt,_t];It&&Bt.push(Rt),Bt.push(M.layoutStyles),It&&Bt.push(Ut,function(_r){_r._fullLayout._insideTickLabelsAutorange&&be(_r,_r._fullLayout._insideTickLabelsAutorange).then(function(){_r._fullLayout._insideTickLabelsAutorange=void 0})}),Bt.push(M.drawData,M.finalDraw,g,h.addLinks,h.rehover,h.redrag,h.doAutoMargin,tr,h.previousPromises);function tr(Zt){Zt._fullLayout._insideTickLabelsAutorange&&Je&&s.saveRangeInitial(Zt,!0)}var er=c.syncOrAsync(Bt,ke);return(!er||!er.then)&&(er=Promise.resolve()),er.then(function(){return C(ke),ke})}function C(ke){var Ie=ke._fullLayout;Ie._redrawFromAutoMarginCount?Ie._redrawFromAutoMarginCount--:ke.emit("plotly_afterplot")}function D(ke){return c.extendFlat(w,ke)}function F(ke,Ie){try{ke._fullLayout._paper.style("background",Ie)}catch(He){c.error(He)}}function N(ke,Ie){var He=d.combine(Ie,"white");F(ke,He)}function G(ke,Ie){if(!ke._context){ke._context=c.extendDeep({},w);var He=r.select("base");ke._context._baseUrl=He.size()&&He.attr("href")?window.location.href.split("#")[0]:""}var Ye=ke._context,ft,it,je;if(Ie){for(it=Object.keys(Ie),ft=0;ft<it.length;ft++)je=it[ft],!(je==="editable"||je==="edits")&&je in Ye&&(je==="setBackground"&&Ie[je]==="opaque"?Ye[je]=N:Ye[je]=Ie[je]);Ie.plot3dPixelRatio&&!Ye.plotGlPixelRatio&&(Ye.plotGlPixelRatio=Ye.plot3dPixelRatio);var ot=Ie.editable;if(ot!==void 0)for(Ye.editable=ot,it=Object.keys(Ye.edits),ft=0;ft<it.length;ft++)Ye.edits[it[ft]]=ot;if(Ie.edits)for(it=Object.keys(Ie.edits),ft=0;ft<it.length;ft++)je=it[ft],je in Ye.edits&&(Ye.edits[je]=Ie.edits[je]);Ye._exportedPlot=Ie._exportedPlot}Ye.staticPlot&&(Ye.editable=!1,Ye.edits={},Ye.autosizable=!1,Ye.scrollZoom=!1,Ye.doubleClick=!1,Ye.showTips=!1,Ye.showLink=!1,Ye.displayModeBar=!1),Ye.displayModeBar==="hover"&&!u&&(Ye.displayModeBar=!0),(Ye.setBackground==="transparent"||typeof Ye.setBackground!="function")&&(Ye.setBackground=F),Ye._hasZeroHeight=Ye._hasZeroHeight||ke.clientHeight===0,Ye._hasZeroWidth=Ye._hasZeroWidth||ke.clientWidth===0;var Je=Ye.scrollZoom,st=Ye._scrollZoom={};if(Je===!0)st.cartesian=1,st.gl3d=1,st.geo=1,st.mapbox=1;else if(typeof Je=="string"){var It=Je.split("+");for(ft=0;ft<It.length;ft++)st[It[ft]]=1}else Je!==!1&&(st.gl3d=1,st.geo=1,st.mapbox=1)}function U(ke,Ie,He){var Ye=r.select(ke).selectAll(".plot-container").data([0]);Ye.enter().insert("div",":first-child").classed("plot-container plotly",!0);var ft=Ye.selectAll(".svg-container").data([0]);ft.enter().append("div").classed("svg-container",!0).style("position","relative"),ft.html(""),Ie&&(ke.data=Ie),He&&(ke.layout=He),i.manager.fillLayout(ke),ft.style({width:ke._fullLayout.width+"px",height:ke._fullLayout.height+"px"}),ke.framework=i.manager.framework(ke),ke.framework({data:ke.data,layout:ke.layout},ft.node()),ke.framework.setUndoPoint();var it=ke.framework.svg(),je=1,ot=ke._fullLayout.title?ke._fullLayout.title.text:"";(ot===""||!ot)&&(je=0);var Je=function(){this.call(m.convertToTspans,ke)},st=it.select(".title-group text").call(Je);if(ke._context.edits.titleText){var It=c._(ke,"Click to enter Plot title");(!ot||ot===It)&&(je=.2,st.attr({"data-unformatted":It}).text(It).style({opacity:je}).on("mouseover.opacity",function(){r.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(1e3).style("opacity",0)}));var Nt=function(){this.call(m.makeEditable,{gd:ke}).on("edit",function(nr){ke.framework({layout:{title:{text:nr}}}),this.text(nr).call(Je),this.call(Nt)}).on("cancel",function(){var nr=this.attr("data-unformatted");this.text(nr).call(Je)})};st.call(Nt)}return ke._context.setBackground(ke,ke._fullLayout.paper_bgcolor),h.addLinks(ke),Promise.resolve()}function X(ke){if(ke=c.getGraphDiv(ke),!c.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke);return T.cleanData(ke.data),T.cleanLayout(ke.layout),ke.calcdata=void 0,S.plot(ke).then(function(){return ke.emit("plotly_redraw"),ke})}function z(ke,Ie,He,Ye){return ke=c.getGraphDiv(ke),h.cleanPlot([],{},ke._fullData||[],ke._fullLayout||{}),h.purge(ke),S.plot(ke,Ie,He,Ye)}function B(ke,Ie){var He=Ie+1,Ye=[],ft,it;for(ft=0;ft<ke.length;ft++)it=ke[ft],it<0?Ye.push(He+it):Ye.push(it);return Ye}function j(ke,Ie,He){var Ye,ft;for(Ye=0;Ye<Ie.length;Ye++){if(ft=Ie[Ye],ft!==parseInt(ft,10))throw new Error("all values in "+He+" must be integers");if(ft>=ke.data.length||ft<-ke.data.length)throw new Error(He+" must be valid indices for gd.data.");if(Ie.indexOf(ft,Ye+1)>-1||ft>=0&&Ie.indexOf(-ke.data.length+ft)>-1||ft<0&&Ie.indexOf(ke.data.length+ft)>-1)throw new Error("each index in "+He+" must be unique.")}}function V(ke,Ie,He){if(!Array.isArray(ke.data))throw new Error("gd.data must be an array.");if(typeof Ie>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(Ie)||(Ie=[Ie]),j(ke,Ie,"currentIndices"),typeof He<"u"&&!Array.isArray(He)&&(He=[He]),typeof He<"u"&&j(ke,He,"newIndices"),typeof He<"u"&&Ie.length!==He.length)throw new Error("current and new indices must be of equal length.")}function K(ke,Ie,He){var Ye,ft;if(!Array.isArray(ke.data))throw new Error("gd.data must be an array.");if(typeof Ie>"u")throw new Error("traces must be defined.");for(Array.isArray(Ie)||(Ie=[Ie]),Ye=0;Ye<Ie.length;Ye++)if(ft=Ie[Ye],typeof ft!="object"||Array.isArray(ft)||ft===null)throw new Error("all values in traces array must be non-array objects");if(typeof He<"u"&&!Array.isArray(He)&&(He=[He]),typeof He<"u"&&He.length!==Ie.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function te(ke,Ie,He,Ye){var ft=c.isPlainObject(Ye);if(!Array.isArray(ke.data))throw new Error("gd.data must be an array");if(!c.isPlainObject(Ie))throw new Error("update must be a key:value object");if(typeof He>"u")throw new Error("indices must be an integer or array of integers");j(ke,He,"indices");for(var it in Ie){if(!Array.isArray(Ie[it])||Ie[it].length!==He.length)throw new Error("attribute "+it+" must be an array of length equal to indices array length");if(ft&&(!(it in Ye)||!Array.isArray(Ye[it])||Ye[it].length!==Ie[it].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function $(ke,Ie,He,Ye){var ft=c.isPlainObject(Ye),it=[],je,ot,Je,st,It;Array.isArray(He)||(He=[He]),He=B(He,ke.data.length-1);for(var Nt in Ie)for(var nr=0;nr<He.length;nr++){if(je=ke.data[He[nr]],Je=t(je,Nt),ot=Je.get(),st=Ie[Nt][nr],!c.isArrayOrTypedArray(st))throw new Error("attribute: "+Nt+" index: "+nr+" must be an array");if(!c.isArrayOrTypedArray(ot))throw new Error("cannot extend missing or non-array attribute: "+Nt);if(ot.constructor!==st.constructor)throw new Error("cannot extend array with an array of a different type: "+Nt);It=ft?Ye[Nt][nr]:Ye,a(It)||(It=-1),it.push({prop:Je,target:ot,insert:st,maxp:Math.floor(It)})}return it}function ie(ke,Ie,He,Ye,ft){te(ke,Ie,He,Ye);for(var it=$(ke,Ie,He,Ye),je={},ot={},Je=0;Je<it.length;Je++){var st=it[Je].prop,It=it[Je].maxp,Nt=ft(it[Je].target,it[Je].insert,It);st.set(Nt[0]),Array.isArray(je[st.astr])||(je[st.astr]=[]),je[st.astr].push(Nt[1]),Array.isArray(ot[st.astr])||(ot[st.astr]=[]),ot[st.astr].push(it[Je].target.length)}return{update:je,maxPoints:ot}}function se(ke,Ie){var He=new ke.constructor(ke.length+Ie.length);return He.set(ke),He.set(Ie,ke.length),He}function Q(ke,Ie,He,Ye){ke=c.getGraphDiv(ke);function ft(Je,st,It){var Nt,nr;if(c.isTypedArray(Je))if(It<0){var We=new Je.constructor(0),Fe=se(Je,st);It<0?(Nt=Fe,nr=We):(Nt=We,nr=Fe)}else if(Nt=new Je.constructor(It),nr=new Je.constructor(Je.length+st.length-It),It===st.length)Nt.set(st),nr.set(Je);else if(It<st.length){var bt=st.length-It;Nt.set(st.subarray(bt)),nr.set(Je),nr.set(st.subarray(0,bt),Je.length)}else{var kt=It-st.length,_t=Je.length-kt;Nt.set(Je.subarray(_t)),Nt.set(st,kt),nr.set(Je.subarray(0,_t))}else Nt=Je.concat(st),nr=It>=0&&It<Nt.length?Nt.splice(0,Nt.length-It):[];return[Nt,nr]}var it=ie(ke,Ie,He,Ye,ft),je=S.redraw(ke),ot=[ke,it.update,He,it.maxPoints];return n.add(ke,S.prependTraces,ot,Q,arguments),je}function H(ke,Ie,He,Ye){ke=c.getGraphDiv(ke);function ft(Je,st,It){var Nt,nr;if(c.isTypedArray(Je))if(It<=0){var We=new Je.constructor(0),Fe=se(st,Je);It<0?(Nt=Fe,nr=We):(Nt=We,nr=Fe)}else if(Nt=new Je.constructor(It),nr=new Je.constructor(Je.length+st.length-It),It===st.length)Nt.set(st),nr.set(Je);else if(It<st.length){var bt=st.length-It;Nt.set(st.subarray(0,bt)),nr.set(st.subarray(bt)),nr.set(Je,bt)}else{var kt=It-st.length;Nt.set(st),Nt.set(Je.subarray(0,kt),st.length),nr.set(Je.subarray(kt))}else Nt=st.concat(Je),nr=It>=0&&It<Nt.length?Nt.splice(It,Nt.length):[];return[Nt,nr]}var it=ie(ke,Ie,He,Ye,ft),je=S.redraw(ke),ot=[ke,it.update,He,it.maxPoints];return n.add(ke,S.extendTraces,ot,H,arguments),je}function oe(ke,Ie,He){ke=c.getGraphDiv(ke);var Ye=[],ft=S.deleteTraces,it=oe,je=[ke,Ye],ot=[ke,Ie],Je,st;for(K(ke,Ie,He),Array.isArray(Ie)||(Ie=[Ie]),Ie=Ie.map(function(It){return c.extendFlat({},It)}),T.cleanData(Ie),Je=0;Je<Ie.length;Je++)ke.data.push(Ie[Je]);for(Je=0;Je<Ie.length;Je++)Ye.push(-Ie.length+Je);if(typeof He>"u")return st=S.redraw(ke),n.add(ke,ft,je,it,ot),st;Array.isArray(He)||(He=[He]);try{V(ke,Ye,He)}catch(It){throw ke.data.splice(ke.data.length-Ie.length,Ie.length),It}return n.startSequence(ke),n.add(ke,ft,je,it,ot),st=S.moveTraces(ke,Ye,He),n.stopSequence(ke),st}function re(ke,Ie){ke=c.getGraphDiv(ke);var He=[],Ye=S.addTraces,ft=re,it=[ke,He,Ie],je=[ke,Ie],ot,Je;if(typeof Ie>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ie)||(Ie=[Ie]),j(ke,Ie,"indices"),Ie=B(Ie,ke.data.length-1),Ie.sort(c.sorterDes),ot=0;ot<Ie.length;ot+=1)Je=ke.data.splice(Ie[ot],1)[0],He.push(Je);var st=S.redraw(ke);return n.add(ke,Ye,it,ft,je),st}function ee(ke,Ie,He){ke=c.getGraphDiv(ke);var Ye=[],ft=[],it=ee,je=ee,ot=[ke,He,Ie],Je=[ke,Ie,He],st;if(V(ke,Ie,He),Ie=Array.isArray(Ie)?Ie:[Ie],typeof He>"u")for(He=[],st=0;st<Ie.length;st++)He.push(-Ie.length+st);for(He=Array.isArray(He)?He:[He],Ie=B(Ie,ke.data.length-1),He=B(He,ke.data.length-1),st=0;st<ke.data.length;st++)Ie.indexOf(st)===-1&&Ye.push(ke.data[st]);for(st=0;st<Ie.length;st++)ft.push({newIndex:He[st],trace:ke.data[Ie[st]]});for(ft.sort(function(Nt,nr){return Nt.newIndex-nr.newIndex}),st=0;st<ft.length;st+=1)Ye.splice(ft[st].newIndex,0,ft[st].trace);ke.data=Ye;var It=S.redraw(ke);return n.add(ke,it,ot,je,Je),It}function ae(ke,Ie,He,Ye){ke=c.getGraphDiv(ke),T.clearPromiseQueue(ke);var ft={};if(typeof Ie=="string")ft[Ie]=He;else if(c.isPlainObject(Ie))ft=c.extendFlat({},Ie),Ye===void 0&&(Ye=He);else return c.warn("Restyle fail.",Ie,He,Ye),Promise.reject();Object.keys(ft).length&&(ke.changed=!0);var it=T.coerceTraceIndices(ke,Ye),je=ue(ke,ft,it),ot=je.flags;ot.calc&&(ke.calcdata=void 0),ot.clearAxisTypes&&T.clearAxisTypes(ke,it,{});var Je=[];ot.fullReplot?Je.push(S.plot):(Je.push(h.previousPromises),h.supplyDefaults(ke),ot.markerSize&&(h.doCalcdata(ke),Pe(Je)),ot.style&&Je.push(M.doTraceStyle),ot.colorbars&&Je.push(M.doColorBars),Je.push(C)),Je.push(h.rehover,h.redrag),n.add(ke,ae,[ke,je.undoit,je.traces],ae,[ke,je.redoit,je.traces]);var st=c.syncOrAsync(Je,ke);return(!st||!st.then)&&(st=Promise.resolve()),st.then(function(){return ke.emit("plotly_restyle",je.eventData),ke})}function fe(ke){return ke===void 0?null:ke}function de(ke,Ie){return Ie?function(He,Ye,ft){var it=t(He,Ye),je=it.set;return it.set=function(ot){var Je=(ft||"")+Ye;pe(Je,it.get(),ot,ke),je(ot)},it}:t}function pe(ke,Ie,He,Ye){if(Array.isArray(Ie)||Array.isArray(He))for(var ft=Array.isArray(Ie)?Ie:[],it=Array.isArray(He)?He:[],je=Math.max(ft.length,it.length),ot=0;ot<je;ot++)pe(ke+"["+ot+"]",ft[ot],it[ot],Ye);else if(c.isPlainObject(Ie)||c.isPlainObject(He)){var Je=c.isPlainObject(Ie)?Ie:{},st=c.isPlainObject(He)?He:{},It=c.extendFlat({},Je,st);for(var Nt in It)pe(ke+"."+Nt,Je[Nt],st[Nt],Ye)}else Ye[ke]===void 0&&(Ye[ke]=fe(Ie))}function W(ke,Ie,He){for(var Ye in He){var ft=t(ke,Ye);pe(Ye,ft.get(),He[Ye],Ie)}}function ue(ke,Ie,He){var Ye=ke._fullLayout,ft=ke._fullData,it=ke.data,je=Ye._guiEditing,ot=de(Ye._preGUI,je),Je=c.extendDeepAll({},Ie),st;me(Ie);var It=P.traceFlags(),Nt={},nr={},We;function Fe(){return He.map(function(){})}function bt(Vr){var Qr=s.id2name(Vr);We.indexOf(Qr)===-1&&We.push(Qr)}function kt(Vr){return"LAYOUT"+Vr+".autorange"}function _t(Vr){return"LAYOUT"+Vr+".range"}function Rt(Vr){for(var Qr=Vr;Qr<ft.length;Qr++)if(ft[Qr]._input===it[Vr])return ft[Qr]}function Dt(Vr,Qr,Hr){if(Array.isArray(Vr)){Vr.forEach(function(ba){Dt(ba,Qr,Hr)});return}if(!(Vr in Ie||T.hasParent(Ie,Vr))){var En;if(Vr.substr(0,6)==="LAYOUT")En=ot(ke.layout,Vr.replace("LAYOUT",""));else{var ta=He[Hr],ea=Ye._tracePreGUI[Rt(ta)._fullInput.uid];En=de(ea,je)(it[ta],Vr)}Vr in nr||(nr[Vr]=Fe()),nr[Vr][Hr]===void 0&&(nr[Vr][Hr]=fe(En.get())),Qr!==void 0&&En.set(Qr)}}function Ut(Vr){return function(Qr){return ft[Qr][Vr]}}function Bt(Vr){return function(Qr,Hr){return Qr===!1?ft[He[Hr]][Vr]:null}}for(var tr in Ie){if(T.hasParent(Ie,tr))throw new Error("cannot set "+tr+" and a parent attribute simultaneously");var er=Ie[tr],Zt,_r,Gr,Or,Fr,Mn;if((tr==="autobinx"||tr==="autobiny")&&(tr=tr.charAt(tr.length-1)+"bins",Array.isArray(er)?er=er.map(Bt(tr)):er===!1?er=He.map(Ut(tr)):er=null),Nt[tr]=er,tr.substr(0,6)==="LAYOUT"){Gr=ot(ke.layout,tr.replace("LAYOUT","")),nr[tr]=[fe(Gr.get())],Gr.set(Array.isArray(er)?er[0]:er),It.calc=!0;continue}for(nr[tr]=Fe(),st=0;st<He.length;st++){Zt=it[He[st]],_r=Rt(He[st]);var Wn=Ye._tracePreGUI[_r._fullInput.uid];if(Gr=de(Wn,je)(Zt,tr),Or=Gr.get(),Fr=Array.isArray(er)?er[st%er.length]:er,Fr!==void 0){var Tn=Gr.parts[Gr.parts.length-1],Nn=tr.substr(0,tr.length-Tn.length-1),jn=Nn?Nn+".":"",Nr=Nn?t(_r,Nn).get():_r;if(Mn=l.getTraceValObject(_r,Gr.parts),Mn&&Mn.impliedEdits&&Fr!==null)for(var Pr in Mn.impliedEdits)Dt(c.relativeAttr(tr,Pr),Mn.impliedEdits[Pr],st);else if((Tn==="thicknessmode"||Tn==="lenmode")&&Or!==Fr&&(Fr==="fraction"||Fr==="pixels")&&Nr){var Ln=Ye._size,pn=Nr.orient,xn=pn==="top"||pn==="bottom";if(Tn==="thicknessmode"){var en=xn?Ln.h:Ln.w;Dt(jn+"thickness",Nr.thickness*(Fr==="fraction"?1/en:en),st)}else{var _n=xn?Ln.w:Ln.h;Dt(jn+"len",Nr.len*(Fr==="fraction"?1/_n:_n),st)}}else if(tr==="type"&&(Fr==="pie"!=(Or==="pie")||Fr==="funnelarea"!=(Or==="funnelarea"))){var kn="x",ln="y";(Fr==="bar"||Or==="bar")&&Zt.orientation==="h"&&(kn="y",ln="x"),c.swapAttrs(Zt,["?","?src"],"labels",kn),c.swapAttrs(Zt,["d?","?0"],"label",kn),c.swapAttrs(Zt,["?","?src"],"values",ln),Or==="pie"||Or==="funnelarea"?(t(Zt,"marker.color").set(t(Zt,"marker.colors").get()),Ye._pielayer.selectAll("g.trace").remove()):o.traceIs(Zt,"cartesian")&&t(Zt,"marker.colors").set(t(Zt,"marker.color").get())}nr[tr][st]=fe(Or);var vt=["swapxy","swapxyaxes","orientation","orientationaxes"];if(vt.indexOf(tr)!==-1){if(tr==="orientation"){Gr.set(Fr);var Gt=Zt.x&&!Zt.y?"h":"v";if((Gr.get()||Gt)===_r.orientation)continue}else tr==="orientationaxes"&&(Zt.orientation={v:"h",h:"v"}[_r.orientation]);T.swapXYData(Zt),It.calc=It.clearAxisTypes=!0}else h.dataArrayContainers.indexOf(Gr.parts[0])!==-1?(T.manageArrayContainers(Gr,Fr,nr),It.calc=!0):(Mn?Mn.arrayOk&&!o.traceIs(_r,"regl")&&(c.isArrayOrTypedArray(Fr)||c.isArrayOrTypedArray(Or))?It.calc=!0:P.update(It,Mn):It.calc=!0,Gr.set(Fr))}}if(["swapxyaxes","orientationaxes"].indexOf(tr)!==-1&&s.swap(ke,He),tr==="orientationaxes"){var fr=t(ke.layout,"hovermode"),Cr=fr.get();Cr==="x"?fr.set("y"):Cr==="y"?fr.set("x"):Cr==="x unified"?fr.set("y unified"):Cr==="y unified"&&fr.set("x unified")}if(["orientation","type"].indexOf(tr)!==-1){for(We=[],st=0;st<He.length;st++){var Wr=it[He[st]];o.traceIs(Wr,"cartesian")&&(bt(Wr.xaxis||"x"),bt(Wr.yaxis||"y"))}Dt(We.map(kt),!0,0),Dt(We.map(_t),[0,1],0)}}return(It.calc||It.plot)&&(It.fullReplot=!0),{flags:It,undoit:nr,redoit:Nt,traces:He,eventData:c.extendDeepNoArrays([],[Je,He])}}function me(ke){var Ie=c.counterRegex("axis",".title",!1,!1),He=/colorbar\.title$/,Ye=Object.keys(ke),ft,it,je;for(ft=0;ft<Ye.length;ft++)it=Ye[ft],je=ke[it],(it==="title"||Ie.test(it)||He.test(it))&&(typeof je=="string"||typeof je=="number")?ot(it,it.replace("title","title.text")):it.indexOf("titlefont")>-1?ot(it,it.replace("titlefont","title.font")):it.indexOf("titleposition")>-1?ot(it,it.replace("titleposition","title.position")):it.indexOf("titleside")>-1?ot(it,it.replace("titleside","title.side")):it.indexOf("titleoffset")>-1&&ot(it,it.replace("titleoffset","title.offset"));function ot(Je,st){ke[st]=ke[Je],delete ke[Je]}}function be(ke,Ie,He){if(ke=c.getGraphDiv(ke),T.clearPromiseQueue(ke),ke.framework&&ke.framework.isPolar)return Promise.resolve(ke);var Ye={};if(typeof Ie=="string")Ye[Ie]=He;else if(c.isPlainObject(Ie))Ye=c.extendFlat({},Ie);else return c.warn("Relayout fail.",Ie,He),Promise.reject();Object.keys(Ye).length&&(ke.changed=!0);var ft=tt(ke,Ye),it=ft.flags;it.calc&&(ke.calcdata=void 0);var je=[h.previousPromises];it.layoutReplot?je.push(M.layoutReplot):Object.keys(Ye).length&&(Me(ke,it,ft)||h.supplyDefaults(ke),it.legend&&je.push(M.doLegend),it.layoutstyle&&je.push(M.layoutStyles),it.axrange&&Pe(je,ft.rangesAltered),it.ticks&&je.push(M.doTicksRelayout),it.modebar&&je.push(M.doModeBar),it.camera&&je.push(M.doCamera),it.colorbars&&je.push(M.doColorBars),je.push(C)),je.push(h.rehover,h.redrag),n.add(ke,be,[ke,ft.undoit],be,[ke,ft.redoit]);var ot=c.syncOrAsync(je,ke);return(!ot||!ot.then)&&(ot=Promise.resolve(ke)),ot.then(function(){return ke.emit("plotly_relayout",ft.eventData),ke})}function Me(ke,Ie,He){var Ye=ke._fullLayout;if(!Ie.axrange)return!1;for(var ft in Ie)if(ft!=="axrange"&&Ie[ft])return!1;for(var it in He.rangesAltered){var je=s.id2name(it),ot=ke.layout[je],Je=Ye[je];if(Je.autorange=ot.autorange,ot.range&&(Je.range=ot.range.slice()),Je.cleanRange(),Je._matchGroup){for(var st in Je._matchGroup)if(st!==it){var It=Ye[s.id2name(st)];It.autorange=Je.autorange,It.range=Je.range.slice(),It._input.range=Je.range.slice()}}}return!0}function Pe(ke,Ie){var He=Ie?function(Ye){var ft=[],it=!0;for(var je in Ie){var ot=s.getFromId(Ye,je);if(ft.push(je),(ot.ticklabelposition||"").indexOf("inside")!==-1&&ot._anchorAxis&&ft.push(ot._anchorAxis._id),ot._matchGroup)for(var Je in ot._matchGroup)Ie[Je]||ft.push(Je);ot.automargin&&(it=!1)}return s.draw(Ye,ft,{skipTitle:it})}:function(Ye){return s.draw(Ye,"redraw")};ke.push(x,M.doAutoRangeAndConstraints,He,M.drawData,M.finalDraw)}var Ge=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ze=/^[xyz]axis[0-9]*\.autorange$/,Qe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function tt(ke,Ie){var He=ke.layout,Ye=ke._fullLayout,ft=Ye._guiEditing,it=de(Ye._preGUI,ft),je=Object.keys(Ie),ot=s.list(ke),Je=c.extendDeepAll({},Ie),st={},It,Nt,nr;for(me(Ie),je=Object.keys(Ie),Nt=0;Nt<je.length;Nt++)if(je[Nt].indexOf("allaxes")===0){for(nr=0;nr<ot.length;nr++){var We=ot[nr]._id.substr(1),Fe=We.indexOf("scene")!==-1?We+".":"",bt=je[Nt].replace("allaxes",Fe+ot[nr]._name);Ie[bt]||(Ie[bt]=Ie[je[Nt]])}delete Ie[je[Nt]]}var kt=P.layoutFlags(),_t={},Rt={};function Dt(ta,ea){if(Array.isArray(ta)){ta.forEach(function(Wa){Dt(Wa,ea)});return}if(!(ta in Ie||T.hasParent(Ie,ta))){var ba=it(He,ta);ta in Rt||(Rt[ta]=fe(ba.get())),ea!==void 0&&ba.set(ea)}}var Ut={},Bt;function tr(ta){var ea=s.name2id(ta.split(".")[0]);return Ut[ea]=1,ea}for(var er in Ie){if(T.hasParent(Ie,er))throw new Error("cannot set "+er+" and a parent attribute simultaneously");for(var Zt=it(He,er),_r=Ie[er],Gr=Zt.parts.length,Or=Gr-1;Or>0&&typeof Zt.parts[Or]!="string";)Or--;var Fr=Zt.parts[Or],Mn=Zt.parts[Or-1]+"."+Fr,Wn=Zt.parts.slice(0,Or).join("."),Tn=t(ke.layout,Wn).get(),Nn=t(Ye,Wn).get(),jn=Zt.get();if(_r!==void 0){_t[er]=_r,Rt[er]=Fr==="reverse"?_r:fe(jn);var Nr=l.getLayoutValObject(Ye,Zt.parts);if(Nr&&Nr.impliedEdits&&_r!==null)for(var Pr in Nr.impliedEdits)Dt(c.relativeAttr(er,Pr),Nr.impliedEdits[Pr]);if(["width","height"].indexOf(er)!==-1)if(_r){Dt("autosize",null);var Ln=er==="height"?"width":"height";Dt(Ln,Ye[Ln])}else Ye[er]=ke._initialAutoSize[er];else if(er==="autosize")Dt("width",_r?null:Ye.width),Dt("height",_r?null:Ye.height);else if(Mn.match(Ge))tr(Mn),t(Ye,Wn+"._inputRange").set(null);else if(Mn.match(ze)){tr(Mn),t(Ye,Wn+"._inputRange").set(null);var pn=t(Ye,Wn).get();pn._inputDomain&&(pn._input.domain=pn._inputDomain.slice())}else Mn.match(Qe)&&t(Ye,Wn+"._inputDomain").set(null);if(Fr==="type"){Bt=Tn;var xn=Nn.type==="linear"&&_r==="log",en=Nn.type==="log"&&_r==="linear";if(xn||en){if(!Bt||!Bt.range)Dt(Wn+".autorange",!0);else if(Nn.autorange)xn&&(Bt.range=Bt.range[1]>Bt.range[0]?[1,2]:[2,1]);else{var _n=Bt.range[0],kn=Bt.range[1];xn?(_n<=0&&kn<=0&&Dt(Wn+".autorange",!0),_n<=0?_n=kn/1e6:kn<=0&&(kn=_n/1e6),Dt(Wn+".range[0]",Math.log(_n)/Math.LN10),Dt(Wn+".range[1]",Math.log(kn)/Math.LN10)):(Dt(Wn+".range[0]",Math.pow(10,_n)),Dt(Wn+".range[1]",Math.pow(10,kn)))}Array.isArray(Ye._subplots.polar)&&Ye._subplots.polar.length&&Ye[Zt.parts[0]]&&Zt.parts[1]==="radialaxis"&&delete Ye[Zt.parts[0]]._subplot.viewInitial["radialaxis.range"],o.getComponentMethod("annotations","convertCoords")(ke,Nn,_r,Dt),o.getComponentMethod("images","convertCoords")(ke,Nn,_r,Dt)}else Dt(Wn+".autorange",!0),Dt(Wn+".range",null);t(Ye,Wn+"._inputRange").set(null)}else if(Fr.match(L)){var ln=t(Ye,er).get(),vt=(_r||{}).type;(!vt||vt==="-")&&(vt="linear"),o.getComponentMethod("annotations","convertCoords")(ke,ln,vt,Dt),o.getComponentMethod("images","convertCoords")(ke,ln,vt,Dt)}var Gt=y.containerArrayMatch(er);if(Gt){It=Gt.array,Nt=Gt.index;var fr=Gt.property,Cr=Nr||{editType:"calc"};Nt!==""&&fr===""&&(y.isAddVal(_r)?Rt[er]=null:y.isRemoveVal(_r)?Rt[er]=(t(He,It).get()||[])[Nt]:c.warn("unrecognized full object value",Ie)),P.update(kt,Cr),st[It]||(st[It]={});var Wr=st[It][Nt];Wr||(Wr=st[It][Nt]={}),Wr[fr]=_r,delete Ie[er]}else Fr==="reverse"?(Tn.range?Tn.range.reverse():(Dt(Wn+".autorange",!0),Tn.range=[1,0]),Nn.autorange?kt.calc=!0:kt.plot=!0):(Ye._has("scatter-like")&&Ye._has("regl")&&er==="dragmode"&&(_r==="lasso"||_r==="select")&&!(jn==="lasso"||jn==="select")||Ye._has("gl2d")?kt.plot=!0:Nr?P.update(kt,Nr):kt.calc=!0,Zt.set(_r))}}for(It in st){var Vr=y.applyContainerArrayChanges(ke,it(He,It),st[It],kt,it);Vr||(kt.plot=!0)}for(var Qr in Ut){Bt=s.getFromId(ke,Qr);var Hr=Bt&&Bt._constraintGroup;if(Hr){kt.calc=!0;for(var En in Hr)Ut[En]||(s.getFromId(ke,En)._constraintShrinkable=!0)}}return(Ce(ke)||Ie.height||Ie.width)&&(kt.plot=!0),(kt.plot||kt.calc)&&(kt.layoutReplot=!0),{flags:kt,rangesAltered:Ut,undoit:Rt,redoit:_t,eventData:Je}}function Ce(ke){var Ie=ke._fullLayout,He=Ie.width,Ye=Ie.height;return ke.layout.autosize&&h.plotAutoSize(ke,ke.layout,Ie),Ie.width!==He||Ie.height!==Ye}function Ae(ke,Ie,He,Ye){if(ke=c.getGraphDiv(ke),T.clearPromiseQueue(ke),ke.framework&&ke.framework.isPolar)return Promise.resolve(ke);c.isPlainObject(Ie)||(Ie={}),c.isPlainObject(He)||(He={}),Object.keys(Ie).length&&(ke.changed=!0),Object.keys(He).length&&(ke.changed=!0);var ft=T.coerceTraceIndices(ke,Ye),it=ue(ke,c.extendFlat({},Ie),ft),je=it.flags,ot=tt(ke,c.extendFlat({},He)),Je=ot.flags;(je.calc||Je.calc)&&(ke.calcdata=void 0),je.clearAxisTypes&&T.clearAxisTypes(ke,ft,He);var st=[];Je.layoutReplot?st.push(M.layoutReplot):je.fullReplot?st.push(S.plot):(st.push(h.previousPromises),Me(ke,Je,ot)||h.supplyDefaults(ke),je.style&&st.push(M.doTraceStyle),(je.colorbars||Je.colorbars)&&st.push(M.doColorBars),Je.legend&&st.push(M.doLegend),Je.layoutstyle&&st.push(M.layoutStyles),Je.axrange&&Pe(st,ot.rangesAltered),Je.ticks&&st.push(M.doTicksRelayout),Je.modebar&&st.push(M.doModeBar),Je.camera&&st.push(M.doCamera),st.push(C)),st.push(h.rehover,h.redrag),n.add(ke,Ae,[ke,it.undoit,ot.undoit,it.traces],Ae,[ke,it.redoit,ot.redoit,it.traces]);var It=c.syncOrAsync(st,ke);return(!It||!It.then)&&(It=Promise.resolve(ke)),It.then(function(){return ke.emit("plotly_update",{data:it.eventData,layout:ot.eventData}),ke})}function Be(ke){return function(He){He._fullLayout._guiEditing=!0;var Ye=ke.apply(null,arguments);return He._fullLayout._guiEditing=!1,Ye}}var qe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Tt=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function At(ke,Ie){for(var He=0;He<Ie.length;He++){var Ye=Ie[He],ft=ke.match(Ye.pattern);if(ft)return{head:ft[1],attr:Ye.attr}}}function Ne(ke,Ie){var He=t(Ie,ke).get();if(He!==void 0)return He;var Ye=ke.split(".");for(Ye.pop();Ye.length>1;)if(Ye.pop(),He=t(Ie,Ye.join(".")+".uirevision").get(),He!==void 0)return He;return Ie.uirevision}function ct(ke,Ie){for(var He=0;He<Ie.length;He++)if(Ie[He]._fullInput.uid===ke)return He;return-1}function Mt(ke,Ie,He){for(var Ye=0;Ye<Ie.length;Ye++)if(Ie[Ye].uid===ke)return Ye;return!Ie[He]||Ie[He].uid?-1:He}function Wt(ke,Ie){var He=c.isPlainObject(ke),Ye=Array.isArray(ke);return He||Ye?(He&&c.isPlainObject(Ie)||Ye&&Array.isArray(Ie))&&JSON.stringify(ke)===JSON.stringify(Ie):ke===Ie}function qt(ke,Ie,He,Ye){var ft=Ye._preGUI,it,je,ot,Je,st,It,Nt,nr,We=[],Fe={};for(it in ft){if(st=At(it,qe),st){if(je=st.attr||st.head+".uirevision",ot=t(Ye,je).get(),Je=ot&&Ne(je,Ie),Je&&Je===ot&&(It=ft[it],It===null&&(It=void 0),Nt=t(Ie,it),nr=Nt.get(),Wt(nr,It))){nr===void 0&&it.substr(it.length-9)==="autorange"&&We.push(it.substr(0,it.length-10)),Nt.set(fe(t(Ye,it).get()));continue}}else c.warn("unrecognized GUI edit: "+it);delete ft[it],it.substr(it.length-8,6)==="range["&&(Fe[it.substr(0,it.length-9)]=1)}for(var bt=0;bt<We.length;bt++){var kt=We[bt];if(Fe[kt]){var _t=t(Ie,kt).get();_t&&delete _t.autorange}}var Rt=Ye._tracePreGUI;for(var Dt in Rt){var Ut=Rt[Dt],Bt=null,tr;for(it in Ut){if(!Bt){var er=ct(Dt,He);if(er<0){delete Rt[Dt];break}var Zt=He[er];tr=Zt._fullInput;var _r=Mt(Dt,ke,tr.index);if(_r<0){delete Rt[Dt];break}Bt=ke[_r]}if(st=At(it,Tt),st){if(st.attr?(ot=t(Ye,st.attr).get(),Je=ot&&Ne(st.attr,Ie)):(ot=tr.uirevision,Je=Bt.uirevision,Je===void 0&&(Je=Ie.uirevision)),Je&&Je===ot&&(It=Ut[it],It===null&&(It=void 0),Nt=t(Bt,it),nr=Nt.get(),Wt(nr,It))){Nt.set(fe(t(tr,it).get()));continue}}else c.warn("unrecognized GUI edit: "+it+" in trace uid "+Dt);delete Ut[it]}}}function zt(ke,Ie,He,Ye){var ft,it;function je(){return S.addFrames(ke,ft)}ke=c.getGraphDiv(ke),T.clearPromiseQueue(ke);var ot=ke._fullData,Je=ke._fullLayout;if(!c.isPlotDiv(ke)||!ot||!Je)it=S.newPlot(ke,Ie,He,Ye);else{if(c.isPlainObject(Ie)){var st=Ie;Ie=st.data,He=st.layout,Ye=st.config,ft=st.frames}var It=!1;if(Ye){var Nt=c.extendDeep({},ke._context);ke._context=void 0,G(ke,Ye),It=Ct(Nt,ke._context)}ke.data=Ie||[],T.cleanData(ke.data),ke.layout=He||{},T.cleanLayout(ke.layout),qt(ke.data,ke.layout,ot,Je),h.supplyDefaults(ke,{skipUpdateCalc:!0});var nr=ke._fullData,We=ke._fullLayout,Fe=We.datarevision===void 0,bt=We.transition,kt=rr(ke,Je,We,Fe,bt),_t=kt.newDataRevision,Rt=$t(ke,ot,nr,Fe,bt,_t);if(Ce(ke)&&(kt.layoutReplot=!0),Rt.calc||kt.calc){ke.calcdata=void 0;for(var Dt=Object.getOwnPropertyNames(We),Ut=0;Ut<Dt.length;Ut++){var Bt=Dt[Ut],tr=Bt.substring(0,5);if(tr==="xaxis"||tr==="yaxis"){var er=We[Bt]._emptyCategories;er&&er()}}}else h.supplyDefaultsUpdateCalc(ke.calcdata,nr);var Zt=[];if(ft&&(ke._transitionData={},h.createTransitionData(ke),Zt.push(je)),We.transition&&!It&&(Rt.anim||kt.anim))kt.ticks&&Zt.push(M.doTicksRelayout),h.doCalcdata(ke),M.doAutoRangeAndConstraints(ke),Zt.push(function(){return h.transitionFromReact(ke,Rt,kt,Je)});else if(Rt.fullReplot||kt.layoutReplot||It)ke._fullLayout._skipDefaults=!0,Zt.push(S.plot);else{for(var _r in kt.arrays){var Gr=kt.arrays[_r];if(Gr.length){var Or=o.getComponentMethod(_r,"drawOne");if(Or!==c.noop)for(var Fr=0;Fr<Gr.length;Fr++)Or(ke,Gr[Fr]);else{var Mn=o.getComponentMethod(_r,"draw");if(Mn===c.noop)throw new Error("cannot draw components: "+_r);Mn(ke)}}}Zt.push(h.previousPromises),Rt.style&&Zt.push(M.doTraceStyle),(Rt.colorbars||kt.colorbars)&&Zt.push(M.doColorBars),kt.legend&&Zt.push(M.doLegend),kt.layoutstyle&&Zt.push(M.layoutStyles),kt.axrange&&Pe(Zt),kt.ticks&&Zt.push(M.doTicksRelayout),kt.modebar&&Zt.push(M.doModeBar),kt.camera&&Zt.push(M.doCamera),Zt.push(C)}Zt.push(h.rehover,h.redrag),it=c.syncOrAsync(Zt,ke),(!it||!it.then)&&(it=Promise.resolve(ke))}return it.then(function(){return ke.emit("plotly_react",{data:Ie,layout:He}),ke})}function $t(ke,Ie,He,Ye,ft,it){var je=Ie.length===He.length;if(!ft&&!je)return{fullReplot:!0,calc:!0};var ot=P.traceFlags();ot.arrays={},ot.nChanges=0,ot.nChangesAnim=0;var Je,st;function It(We){var Fe=l.getTraceValObject(st,We);return!st._module.animatable&&Fe.anim&&(Fe.anim=!1),Fe}var Nt={getValObject:It,flags:ot,immutable:Ye,transition:ft,newDataRevision:it,gd:ke},nr={};for(Je=0;Je<Ie.length;Je++)if(He[Je]){if(st=He[Je]._fullInput,h.hasMakesDataTransform(st)&&(st=He[Je]),nr[st.uid])continue;nr[st.uid]=1,Lt(Ie[Je]._fullInput,st,[],Nt)}return(ot.calc||ot.plot)&&(ot.fullReplot=!0),ft&&ot.nChanges&&ot.nChangesAnim&&(ot.anim=ot.nChanges===ot.nChangesAnim&&je?"all":"some"),ot}function rr(ke,Ie,He,Ye,ft){var it=P.layoutFlags();it.arrays={},it.rangesAltered={},it.nChanges=0,it.nChangesAnim=0;function je(Je){return l.getLayoutValObject(He,Je)}var ot={getValObject:je,flags:it,immutable:Ye,transition:ft,gd:ke};return Lt(Ie,He,[],ot),(it.plot||it.calc)&&(it.layoutReplot=!0),ft&&it.nChanges&&it.nChangesAnim&&(it.anim=it.nChanges===it.nChangesAnim?"all":"some"),it}function Lt(ke,Ie,He,Ye){var ft,it,je,ot=Ye.getValObject,Je=Ye.flags,st=Ye.immutable,It=Ye.inArray,Nt=Ye.arrayIndex;function nr(){var Wn=ft.editType;if(It&&Wn.indexOf("arraydraw")!==-1){c.pushUnique(Je.arrays[It],Nt);return}P.update(Je,ft),Wn!=="none"&&Je.nChanges++,Ye.transition&&ft.anim&&Je.nChangesAnim++,(Ge.test(je)||ze.test(je))&&(Je.rangesAltered[He[0]]=1),Qe.test(je)&&t(Ie,"_inputDomain").set(null),it==="datarevision"&&(Je.newDataRevision=1)}function We(Wn){return Wn.valType==="data_array"||Wn.arrayOk}for(it in ke){if(Je.calc&&!Ye.transition)return;var Fe=ke[it],bt=Ie[it],kt=He.concat(it);if(je=kt.join("."),!(it.charAt(0)==="_"||typeof Fe=="function"||Fe===bt)){if((it==="tick0"||it==="dtick")&&He[0]!=="geo"){var _t=Ie.tickmode;if(_t==="auto"||_t==="array"||!_t)continue}if(!(it==="range"&&Ie.autorange)&&!((it==="zmin"||it==="zmax")&&Ie.type==="contourcarpet")&&(ft=ot(kt),!!ft&&!(ft._compareAsJSON&&JSON.stringify(Fe)===JSON.stringify(bt)))){var Rt=ft.valType,Dt,Ut=We(ft),Bt=Array.isArray(Fe),tr=Array.isArray(bt);if(Bt&&tr){var er="_input_"+it,Zt=ke[er],_r=Ie[er];if(Array.isArray(Zt)&&Zt===_r)continue}if(bt===void 0)Ut&&Bt?Je.calc=!0:nr();else if(ft._isLinkedToArray){var Gr=[],Or=!1;It||(Je.arrays[it]=Gr);var Fr=Math.min(Fe.length,bt.length),Mn=Math.max(Fe.length,bt.length);if(Fr!==Mn)if(ft.editType==="arraydraw")Or=!0;else{nr();continue}for(Dt=0;Dt<Fr;Dt++)Lt(Fe[Dt],bt[Dt],kt.concat(Dt),c.extendFlat({inArray:it,arrayIndex:Dt},Ye));if(Or)for(Dt=Fr;Dt<Mn;Dt++)Gr.push(Dt)}else!Rt&&c.isPlainObject(Fe)?Lt(Fe,bt,kt,Ye):Ut?Bt&&tr?(st&&(Je.calc=!0),(st||Ye.newDataRevision)&&nr()):Bt!==tr?Je.calc=!0:nr():Bt&&tr?(Fe.length!==bt.length||String(Fe)!==String(bt))&&nr():nr()}}}for(it in Ie)if(!(it in ke||it.charAt(0)==="_"||typeof Ie[it]=="function"))if(ft=ot(He.concat(it)),We(ft)&&Array.isArray(Ie[it])){Je.calc=!0;return}else nr()}function Ct(ke,Ie){var He;for(He in ke)if(He.charAt(0)!=="_"){var Ye=ke[He],ft=Ie[He];if(Ye!==ft)if(c.isPlainObject(Ye)&&c.isPlainObject(ft)){if(Ct(Ye,ft))return!0}else if(Array.isArray(Ye)&&Array.isArray(ft)){if(Ye.length!==ft.length)return!0;for(var it=0;it<Ye.length;it++)if(Ye[it]!==ft[it])if(c.isPlainObject(Ye[it])&&c.isPlainObject(ft[it])){if(Ct(Ye[it],ft[it]))return!0}else return!0}else return!0}}function dt(ke,Ie,He){if(ke=c.getGraphDiv(ke),!c.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Ye=ke._transitionData;Ye._frameQueue||(Ye._frameQueue=[]),He=h.supplyAnimationDefaults(He);var ft=He.transition,it=He.frame;Ye._frameWaitingCnt===void 0&&(Ye._frameWaitingCnt=0);function je(st){return Array.isArray(ft)?st>=ft.length?ft[0]:ft[st]:ft}function ot(st){return Array.isArray(it)?st>=it.length?it[0]:it[st]:it}function Je(st,It){var Nt=0;return function(){if(st&&++Nt===It)return st()}}return new Promise(function(st,It){function Nt(){if(Ye._frameQueue.length!==0){for(;Ye._frameQueue.length;){var Fr=Ye._frameQueue.pop();Fr.onInterrupt&&Fr.onInterrupt()}ke.emit("plotly_animationinterrupted",[])}}function nr(Fr){if(Fr.length!==0){for(var Mn=0;Mn<Fr.length;Mn++){var Wn;Fr[Mn].type==="byname"?Wn=h.computeFrame(ke,Fr[Mn].name):Wn=Fr[Mn].data;var Tn=ot(Mn),Nn=je(Mn);Nn.duration=Math.min(Nn.duration,Tn.duration);var jn={frame:Wn,name:Fr[Mn].name,frameOpts:Tn,transitionOpts:Nn};Mn===Fr.length-1&&(jn.onComplete=Je(st,2),jn.onInterrupt=It),Ye._frameQueue.push(jn)}He.mode==="immediate"&&(Ye._lastFrameAt=-1/0),Ye._animationRaf||bt()}}function We(){ke.emit("plotly_animated"),window.cancelAnimationFrame(Ye._animationRaf),Ye._animationRaf=null}function Fe(){Ye._currentFrame&&Ye._currentFrame.onComplete&&Ye._currentFrame.onComplete();var Fr=Ye._currentFrame=Ye._frameQueue.shift();if(Fr){var Mn=Fr.name?Fr.name.toString():null;ke._fullLayout._currentFrame=Mn,Ye._lastFrameAt=Date.now(),Ye._timeToNext=Fr.frameOpts.duration,h.transition(ke,Fr.frame.data,Fr.frame.layout,T.coerceTraceIndices(ke,Fr.frame.traces),Fr.frameOpts,Fr.transitionOpts).then(function(){Fr.onComplete&&Fr.onComplete()}),ke.emit("plotly_animatingframe",{name:Mn,frame:Fr.frame,animation:{frame:Fr.frameOpts,transition:Fr.transitionOpts}})}else We()}function bt(){ke.emit("plotly_animating"),Ye._lastFrameAt=-1/0,Ye._timeToNext=0,Ye._runningTransitions=0,Ye._currentFrame=null;var Fr=function(){Ye._animationRaf=window.requestAnimationFrame(Fr),Date.now()-Ye._lastFrameAt>Ye._timeToNext&&Fe()};Fr()}var kt=0;function _t(Fr){return Array.isArray(ft)?kt>=ft.length?Fr.transitionOpts=ft[kt]:Fr.transitionOpts=ft[0]:Fr.transitionOpts=ft,kt++,Fr}var Rt,Dt,Ut=[],Bt=Ie==null,tr=Array.isArray(Ie),er=!Bt&&!tr&&c.isPlainObject(Ie);if(er)Ut.push({type:"object",data:_t(c.extendFlat({},Ie))});else if(Bt||["string","number"].indexOf(typeof Ie)!==-1)for(Rt=0;Rt<Ye._frames.length;Rt++)Dt=Ye._frames[Rt],!!Dt&&(Bt||String(Dt.group)===String(Ie))&&Ut.push({type:"byname",name:String(Dt.name),data:_t({name:Dt.name})});else if(tr)for(Rt=0;Rt<Ie.length;Rt++){var Zt=Ie[Rt];["number","string"].indexOf(typeof Zt)!==-1?(Zt=String(Zt),Ut.push({type:"byname",name:Zt,data:_t({name:Zt})})):c.isPlainObject(Zt)&&Ut.push({type:"object",data:_t(c.extendFlat({},Zt))})}for(Rt=0;Rt<Ut.length;Rt++)if(Dt=Ut[Rt],Dt.type==="byname"&&!Ye._frameHash[Dt.data.name]){c.warn('animate failure: frame not found: "'+Dt.data.name+'"'),It();return}["next","immediate"].indexOf(He.mode)!==-1&&Nt(),He.direction==="reverse"&&Ut.reverse();var _r=ke._fullLayout._currentFrame;if(_r&&He.fromcurrent){var Gr=-1;for(Rt=0;Rt<Ut.length;Rt++)if(Dt=Ut[Rt],Dt.type==="byname"&&Dt.name===_r){Gr=Rt;break}if(Gr>0&&Gr<Ut.length-1){var Or=[];for(Rt=0;Rt<Ut.length;Rt++)Dt=Ut[Rt],(Ut[Rt].type!=="byname"||Rt>Gr)&&Or.push(Dt);Ut=Or}}Ut.length>0?nr(Ut):(ke.emit("plotly_animated"),st())})}function lt(ke,Ie,He){if(ke=c.getGraphDiv(ke),Ie==null)return Promise.resolve();if(!c.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Ye,ft,it,je,ot=ke._transitionData._frames,Je=ke._transitionData._frameHash;if(!Array.isArray(Ie))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ie);var st=ot.length+Ie.length*2,It=[],Nt={};for(Ye=Ie.length-1;Ye>=0;Ye--)if(!!c.isPlainObject(Ie[Ye])){var nr=Ie[Ye].name,We=(Je[nr]||Nt[nr]||{}).name,Fe=Ie[Ye].name,bt=Je[We]||Nt[We];We&&Fe&&typeof Fe=="number"&&bt&&I<E&&(I++,c.warn('addFrames: overwriting frame "'+(Je[We]||Nt[We]).name+'" with a frame whose name of type "number" also equates to "'+We+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),I===E&&c.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Nt[nr]={name:nr},It.push({frame:h.supplyFrameDefaults(Ie[Ye]),index:He&&He[Ye]!==void 0&&He[Ye]!==null?He[Ye]:st+Ye})}It.sort(function(er,Zt){return er.index>Zt.index?-1:er.index<Zt.index?1:0});var kt=[],_t=[],Rt=ot.length;for(Ye=It.length-1;Ye>=0;Ye--){if(ft=It[Ye].frame,typeof ft.name=="number"&&c.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!ft.name)for(;Je[ft.name="frame "+ke._transitionData._counter++];);if(Je[ft.name]){for(it=0;it<ot.length&&(ot[it]||{}).name!==ft.name;it++);kt.push({type:"replace",index:it,value:ft}),_t.unshift({type:"replace",index:it,value:ot[it]})}else je=Math.max(0,Math.min(It[Ye].index,Rt)),kt.push({type:"insert",index:je,value:ft}),_t.unshift({type:"delete",index:je}),Rt++}var Dt=h.modifyFrames,Ut=h.modifyFrames,Bt=[ke,_t],tr=[ke,kt];return n&&n.add(ke,Dt,Bt,Ut,tr),h.modifyFrames(ke,kt)}function Te(ke,Ie){if(ke=c.getGraphDiv(ke),!c.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke);var He,Ye,ft=ke._transitionData._frames,it=[],je=[];if(!Ie)for(Ie=[],He=0;He<ft.length;He++)Ie.push(He);for(Ie=Ie.slice(),Ie.sort(),He=Ie.length-1;He>=0;He--)Ye=Ie[He],it.push({type:"delete",index:Ye}),je.unshift({type:"insert",index:Ye,value:ft[Ye]});var ot=h.modifyFrames,Je=h.modifyFrames,st=[ke,je],It=[ke,it];return n&&n.add(ke,ot,st,Je,It),h.modifyFrames(ke,it)}function Le(ke){ke=c.getGraphDiv(ke);var Ie=ke._fullLayout||{},He=ke._fullData||[];return h.cleanPlot([],{},He,Ie),h.purge(ke),f.purge(ke),Ie._container&&Ie._container.remove(),delete ke._context,ke}function Ue(ke){var Ie=ke._fullLayout,He=ke.getBoundingClientRect();if(!c.equalDomRects(He,Ie._lastBBox)){var Ye=Ie._invTransform=c.inverseTransformMatrix(c.getFullTransformMatrix(ke));Ie._invScaleX=Math.sqrt(Ye[0][0]*Ye[0][0]+Ye[0][1]*Ye[0][1]+Ye[0][2]*Ye[0][2]),Ie._invScaleY=Math.sqrt(Ye[1][0]*Ye[1][0]+Ye[1][1]*Ye[1][1]+Ye[1][2]*Ye[1][2]),Ie._lastBBox=He}}function et(ke){var Ie=r.select(ke),He=ke._fullLayout;if(He._calcInverseTransform=Ue,He._calcInverseTransform(ke),He._container=Ie.selectAll(".plot-container").data([0]),He._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),He._paperdiv=He._container.selectAll(".svg-container").data([0]),He._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),He._glcontainer=He._paperdiv.selectAll(".gl-container").data([{}]),He._glcontainer.enter().append("div").classed("gl-container",!0),He._paperdiv.selectAll(".main-svg").remove(),He._paperdiv.select(".modebar-container").remove(),He._paper=He._paperdiv.insert("svg",":first-child").classed("main-svg",!0),He._toppaper=He._paperdiv.append("svg").classed("main-svg",!0),He._modebardiv=He._paperdiv.append("div"),delete He._modeBar,He._hoverpaper=He._paperdiv.append("svg").classed("main-svg",!0),!He._uid){var Ye={};r.selectAll("defs").each(function(){this.id&&(Ye[this.id.split("-")[1]]=1)}),He._uid=c.randstr(Ye)}He._paperdiv.selectAll(".main-svg").attr(b.svgAttrs),He._defs=He._paper.append("defs").attr("id","defs-"+He._uid),He._clips=He._defs.append("g").classed("clips",!0),He._topdefs=He._toppaper.append("defs").attr("id","topdefs-"+He._uid),He._topclips=He._topdefs.append("g").classed("clips",!0),He._bgLayer=He._paper.append("g").classed("bglayer",!0),He._draggers=He._paper.append("g").classed("draglayer",!0);var ft=He._paper.append("g").classed("layer-below",!0);He._imageLowerLayer=ft.append("g").classed("imagelayer",!0),He._shapeLowerLayer=ft.append("g").classed("shapelayer",!0),He._cartesianlayer=He._paper.append("g").classed("cartesianlayer",!0),He._polarlayer=He._paper.append("g").classed("polarlayer",!0),He._ternarylayer=He._paper.append("g").classed("ternarylayer",!0),He._geolayer=He._paper.append("g").classed("geolayer",!0),He._funnelarealayer=He._paper.append("g").classed("funnelarealayer",!0),He._pielayer=He._paper.append("g").classed("pielayer",!0),He._treemaplayer=He._paper.append("g").classed("treemaplayer",!0),He._sunburstlayer=He._paper.append("g").classed("sunburstlayer",!0),He._indicatorlayer=He._toppaper.append("g").classed("indicatorlayer",!0),He._glimages=He._paper.append("g").classed("glimages",!0);var it=He._toppaper.append("g").classed("layer-above",!0);He._imageUpperLayer=it.append("g").classed("imagelayer",!0),He._shapeUpperLayer=it.append("g").classed("shapelayer",!0),He._infolayer=He._toppaper.append("g").classed("infolayer",!0),He._menulayer=He._toppaper.append("g").classed("menulayer",!0),He._zoomlayer=He._toppaper.append("g").classed("zoomlayer",!0),He._hoverlayer=He._hoverpaper.append("g").classed("hoverlayer",!0),He._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),ke.emit("plotly_framework")}S.animate=dt,S.addFrames=lt,S.deleteFrames=Te,S.addTraces=oe,S.deleteTraces=re,S.extendTraces=Q,S.moveTraces=ee,S.prependTraces=H,S.newPlot=z,S.plot=k,S.purge=Le,S.react=zt,S.redraw=X,S.relayout=be,S.restyle=ae,S.setPlotConfig=D,S.update=Ae,S._guiRelayout=Be(be),S._guiRestyle=Be(ae),S._guiUpdate=Be(Ae),S._storeDirectGUIEdit=W},{"../components/color":643,"../components/drawing":665,"../constants/xmlns_namespaces":754,"../lib":778,"../lib/events":767,"../lib/queue":794,"../lib/svg_text_utils":803,"../plots/cartesian/axes":828,"../plots/cartesian/constants":834,"../plots/cartesian/graph_interact":837,"../plots/cartesian/select":847,"../plots/plots":891,"../plots/polar/legacy":899,"../registry":911,"./edit_types":810,"./helpers":811,"./manage_arrays":813,"./plot_config":815,"./plot_schema":816,"./subroutines":818,d3:169,"fast-isnumeric":241,"has-hover":440}],815:[function(e,v,S){var r={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},a={};function u(c,t){for(var f in c){var n=c[f];n.valType?t[f]=n.dflt:(t[f]||(t[f]={}),u(n,t[f]))}}u(r,a),v.exports={configAttributes:r,dfltConfig:a}},{}],816:[function(e,v,S){var r=e("../registry"),a=e("../lib"),u=e("../plots/attributes"),c=e("../plots/layout_attributes"),t=e("../plots/frame_attributes"),f=e("../plots/animation_attributes"),n=e("./plot_config").configAttributes,o=e("../plots/polar/legacy/area_attributes"),l=e("../plots/polar/legacy/axis_attributes"),h=e("./edit_types"),i=a.extendFlat,s=a.extendDeepAll,p=a.isPlainObject,d=a.isArrayOrTypedArray,g=a.nestedProperty,b=a.valObjectMeta,m="_isSubplotObj",x="_isLinkedToArray",w="_arrayAttrRegexps",y="_deprecated",T=[m,x,w,y];S.IS_SUBPLOT_OBJ=m,S.IS_LINKED_TO_ARRAY=x,S.DEPRECATED=y,S.UNDERSCORE_ATTRS=T,S.get=function(){var B={};r.allTypes.concat("area").forEach(function(V){B[V]=I(V)});var j={};return Object.keys(r.transformsRegistry).forEach(function(V){j[V]=k(V)}),{defs:{valObjects:b,metaKeys:T.concat(["description","role","editType","impliedEdits"]),editType:{traces:h.traces,layout:h.layout},impliedEdits:{}},traces:B,layout:E(),transforms:j,frames:C(),animation:D(f),config:D(n)}},S.crawl=function(B,j,V,K){var te=V||0;K=K||"",Object.keys(B).forEach(function($){var ie=B[$];if(T.indexOf($)===-1){var se=(K?K+".":"")+$;j(ie,$,B,te,se),!S.isValObject(ie)&&p(ie)&&$!=="impliedEdits"&&S.crawl(ie,j,te+1,se)}})},S.isValObject=function(B){return B&&B.valType!==void 0},S.findArrayAttributes=function(B){var j=[],V=[],K=[],te,$;function ie(ee,ae,fe,de){V=V.slice(0,de).concat([ae]),K=K.slice(0,de).concat([ee&&ee._isLinkedToArray]);var pe=ee&&(ee.valType==="data_array"||ee.arrayOk===!0)&&!(V[de-1]==="colorbar"&&(ae==="ticktext"||ae==="tickvals"));!pe||se(te,0,"")}function se(ee,ae,fe){var de=ee[V[ae]],pe=fe+V[ae];if(ae===V.length-1)d(de)&&j.push($+pe);else if(K[ae]){if(Array.isArray(de))for(var W=0;W<de.length;W++)p(de[W])&&se(de[W],ae+1,pe+"["+W+"].")}else p(de)&&se(de,ae+1,pe+".")}te=B,$="",S.crawl(u,ie),B._module&&B._module.attributes&&S.crawl(B._module.attributes,ie);var Q=B.transforms;if(Q)for(var H=0;H<Q.length;H++){var oe=Q[H],re=oe._module;re&&($="transforms["+H+"].",te=oe,S.crawl(re.attributes,ie))}return j},S.getTraceValObject=function(B,j){var V=j[0],K=1,te,$;if(V==="transforms"){if(j.length===1)return u.transforms;var ie=B.transforms;if(!Array.isArray(ie)||!ie.length)return!1;var se=j[1];if(!L(se)||se>=ie.length)return!1;te=(r.transformsRegistry[ie[se].type]||{}).attributes,$=te&&te[j[2]],K=3}else if(B.type==="area")$=o[V];else{var Q=B._module;if(Q||(Q=(r.modules[B.type||u.type.dflt]||{})._module),!Q)return!1;if(te=Q.attributes,$=te&&te[V],!$){var H=Q.basePlotModule;H&&H.attributes&&($=H.attributes[V])}$||($=u[V])}return P($,j,K)},S.getLayoutValObject=function(B,j){var V=M(B,j[0]);return P(V,j,1)};function M(B,j){var V,K,te,$,ie=B._basePlotModules;if(ie){var se;for(V=0;V<ie.length;V++){if(te=ie[V],te.attrRegex&&te.attrRegex.test(j)){if(te.layoutAttrOverrides)return te.layoutAttrOverrides;!se&&te.layoutAttributes&&(se=te.layoutAttributes)}var Q=te.baseLayoutAttrOverrides;if(Q&&j in Q)return Q[j]}if(se)return se}var H=B._modules;if(H){for(V=0;V<H.length;V++)if($=H[V].layoutAttributes,$&&j in $)return $[j]}for(K in r.componentsRegistry){if(te=r.componentsRegistry[K],te.name==="colorscale"&&j.indexOf("coloraxis")===0)return te.layoutAttributes[j];if(!te.schema&&j===te.name)return te.layoutAttributes}return j in c?c[j]:j==="radialaxis"||j==="angularaxis"?l[j]:l.layout[j]||!1}function P(B,j,V){if(!B)return!1;if(B._isLinkedToArray){if(L(j[V]))V++;else if(V<j.length)return!1}for(;V<j.length;V++){var K=B[j[V]];if(p(K))B=K;else break;if(V===j.length-1)break;if(B._isLinkedToArray){if(V++,!L(j[V]))return!1}else if(B.valType==="info_array"){V++;var te=j[V];if(!L(te))return!1;var $=B.items;if(Array.isArray($)){if(te>=$.length)return!1;if(B.dimensions===2){if(V++,j.length===V)return B;var ie=j[V];if(!L(ie))return!1;B=$[te][ie]}else B=$[te]}else B=$}}return B}function L(B){return B===Math.round(B)&&B>=0}function I(B){var j,V;B==="area"?(j={attributes:o},V={}):(j=r.modules[B]._module,V=j.basePlotModule);var K={};K.type=null;var te=s({},u),$=s({},j.attributes);S.crawl($,function(Q,H,oe,re,ee){g(te,ee).set(void 0),Q===void 0&&g($,ee).set(void 0)}),s(K,te),r.traceIs(B,"noOpacity")&&delete K.opacity,r.traceIs(B,"showLegend")||(delete K.showlegend,delete K.legendgroup),r.traceIs(B,"noHover")&&(delete K.hoverinfo,delete K.hoverlabel),j.selectPoints||delete K.selectedpoints,s(K,$),V.attributes&&s(K,V.attributes),K.type=B;var ie={meta:j.meta||{},categories:j.categories||{},animatable:Boolean(j.animatable),type:B,attributes:D(K)};if(j.layoutAttributes){var se={};s(se,j.layoutAttributes),ie.layoutAttributes=D(se)}return j.animatable||S.crawl(ie,function(Q){S.isValObject(Q)&&"anim"in Q&&delete Q.anim}),ie}function E(){var B={},j,V;s(B,c);for(j in r.subplotsRegistry)if(V=r.subplotsRegistry[j],!!V.layoutAttributes)if(Array.isArray(V.attr))for(var K=0;K<V.attr.length;K++)X(B,V,V.attr[K]);else{var te=V.attr==="subplot"?V.name:V.attr;X(B,V,te)}B=U(B);for(j in r.componentsRegistry){V=r.componentsRegistry[j];var $=V.schema;if($&&($.subplots||$.layout)){var ie=$.subplots;if(ie&&ie.xaxis&&!ie.yaxis)for(var se in ie.xaxis)delete B.yaxis[se]}else V.name==="colorscale"?s(B,V.layoutAttributes):V.layoutAttributes&&z(B,V.layoutAttributes,V.name)}return{layoutAttributes:D(B)}}function k(B){var j=r.transformsRegistry[B],V=s({},j.attributes);return Object.keys(r.componentsRegistry).forEach(function(K){var te=r.componentsRegistry[K];te.schema&&te.schema.transforms&&te.schema.transforms[B]&&Object.keys(te.schema.transforms[B]).forEach(function($){z(V,te.schema.transforms[B][$],$)})}),{attributes:D(V)}}function C(){var B={frames:s({},t)};return D(B),B.frames}function D(B){return F(B),N(B),G(B),B}function F(B){function j(K){return{valType:"string",editType:"none"}}function V(K,te,$){S.isValObject(K)?K.valType==="data_array"?(K.role="data",$[te+"src"]=j()):K.arrayOk===!0&&($[te+"src"]=j()):p(K)&&(K.role="object")}S.crawl(B,V)}function N(B){function j(V,K,te){if(!!V){var $=V[x];!$||(delete V[x],te[K]={items:{}},te[K].items[$]=V,te[K].role="object")}}S.crawl(B,j)}function G(B){function j(V){for(var K in V)if(p(V[K]))j(V[K]);else if(Array.isArray(V[K]))for(var te=0;te<V[K].length;te++)j(V[K][te]);else V[K]instanceof RegExp&&(V[K]=V[K].toString())}j(B)}function U(B){return i(B,{radialaxis:l.radialaxis,angularaxis:l.angularaxis}),i(B,l.layout),B}function X(B,j,V){var K=g(B,V),te=s({},j.layoutAttributes);te[m]=!0,K.set(te)}function z(B,j,V){var K=g(B,V);K.set(s(K.get()||{},j))}},{"../lib":778,"../plots/animation_attributes":822,"../plots/attributes":824,"../plots/frame_attributes":857,"../plots/layout_attributes":882,"../plots/polar/legacy/area_attributes":897,"../plots/polar/legacy/axis_attributes":898,"../registry":911,"./edit_types":810,"./plot_config":815}],817:[function(e,v,S){var r=e("../lib"),a=e("../plots/attributes"),u="templateitemname",c={name:{valType:"string",editType:"none"}};c[u]={valType:"string",editType:"calc"},S.templatedArray=function(n,o){return o._isLinkedToArray=n,o.name=c.name,o[u]=c[u],o},S.traceTemplater=function(n){var o={},l,h;for(l in n)h=n[l],Array.isArray(h)&&h.length&&(o[l]=0);function i(s){l=r.coerce(s,{},a,"type");var p={type:l,_template:null};if(l in o){h=n[l];var d=o[l]%h.length;o[l]++,p._template=h[d]}return p}return{newTrace:i}},S.newContainer=function(n,o,l){var h=n._template,i=h&&(h[o]||l&&h[l]);r.isPlainObject(i)||(i=null);var s=n[o]={_template:i};return s},S.arrayTemplater=function(n,o,l){var h=n._template,i=h&&h[f(o)],s=h&&h[o];(!Array.isArray(s)||!s.length)&&(s=[]);var p={};function d(b){var m={name:b.name,_input:b},x=m[u]=b[u];if(!t(x))return m._template=i,m;for(var w=0;w<s.length;w++){var y=s[w];if(y.name===x)return p[x]=1,m._template=y,m}return m[l]=b[l]||!1,m._template=!1,m}function g(){for(var b=[],m=0;m<s.length;m++){var x=s[m],w=x.name;if(t(w)&&!p[w]){var y={_template:x,name:w,_input:{_templateitemname:w}};y[u]=x[u],b.push(y),p[w]=1}}return b}return{newItem:d,defaultItems:g}};function t(n){return n&&typeof n=="string"}function f(n){var o=n.length-1;return n.charAt(o)!=="s"&&r.warn("bad argument to arrayDefaultKey: "+n),n.substr(0,n.length-1)+"defaults"}S.arrayDefaultKey=f,S.arrayEditor=function(n,o,l){var h=(r.nestedProperty(n,o).get()||[]).length,i=l._index,s=i>=h&&(l._input||{})._templateitemname;s&&(i=h);var p=o+"["+i+"]",d;function g(){d={},s&&(d[p]={},d[p][u]=s)}g();function b(y,T){d[y]=T}function m(y,T){s?r.nestedProperty(d[p],y).set(T):d[p+"."+y]=T}function x(){var y=d;return g(),y}function w(y,T){y&&m(y,T);var M=x();for(var P in M)r.nestedProperty(n,P).set(M[P])}return{modifyBase:b,modifyItem:m,getUpdateObj:x,applyUpdate:w}}},{"../lib":778,"../plots/attributes":824}],818:[function(e,v,S){var r=e("d3"),a=e("../registry"),u=e("../plots/plots"),c=e("../lib"),t=e("../lib/clear_gl_canvases"),f=e("../components/color"),n=e("../components/drawing"),o=e("../components/titles"),l=e("../components/modebar"),h=e("../plots/cartesian/axes"),i=e("../constants/alignment"),s=e("../plots/cartesian/constraints"),p=s.enforce,d=s.clean,g=e("../plots/cartesian/autorange").doAutoRange,b="start",m="middle",x="end";S.layoutStyles=function(C){return c.syncOrAsync([u.doAutoMargin,y],C)};function w(C,D,F){for(var N=0;N<F.length;N++){var G=F[N][0],U=F[N][1];if(!(G[0]>=C[1]||G[1]<=C[0])&&U[0]<D[1]&&U[1]>D[0])return!0}return!1}function y(C){var D=C._fullLayout,F=D._size,N=F.p,G=h.list(C,"",!0),U,X,z,B,j,V;if(D._paperdiv.style({width:C._context.responsive&&D.autosize&&!C._context._hasZeroWidth&&!C.layout.width?"100%":D.width+"px",height:C._context.responsive&&D.autosize&&!C._context._hasZeroHeight&&!C.layout.height?"100%":D.height+"px"}).selectAll(".main-svg").call(n.setSize,D.width,D.height),C._context.setBackground(C,D.paper_bgcolor),S.drawMainTitle(C),l.manage(C),!D._has("cartesian"))return u.previousPromises(C);function K($t,rr,Lt){var Ct=$t._lw/2;if($t._id.charAt(0)==="x"){if(rr){if(Lt==="top")return rr._offset-N-Ct}else return F.t+F.h*(1-($t.position||0))+Ct%1;return rr._offset+rr._length+N+Ct}if(rr){if(Lt==="right")return rr._offset+rr._length+N+Ct}else return F.l+F.w*($t.position||0)+Ct%1;return rr._offset-N-Ct}for(U=0;U<G.length;U++){B=G[U];var te=B._anchorAxis;B._linepositions={},B._lw=n.crispRound(C,B.linewidth,1),B._mainLinePosition=K(B,te,B.side),B._mainMirrorPosition=B.mirror&&te?K(B,te,i.OPPOSITE_SIDE[B.side]):null}var $=[],ie=[],se=[],Q=f.opacity(D.paper_bgcolor)===1&&f.opacity(D.plot_bgcolor)===1&&D.paper_bgcolor===D.plot_bgcolor;for(X in D._plots)if(z=D._plots[X],z.mainplot)z.bg&&z.bg.remove(),z.bg=void 0;else{var H=z.xaxis.domain,oe=z.yaxis.domain,re=z.plotgroup;if(w(H,oe,se)){var ee=re.node(),ae=z.bg=c.ensureSingle(re,"rect","bg");ee.insertBefore(ae.node(),ee.childNodes[0]),ie.push(X)}else re.select("rect.bg").remove(),se.push([H,oe]),Q||($.push(X),ie.push(X))}var fe=D._bgLayer.selectAll(".bg").data($);for(fe.enter().append("rect").classed("bg",!0),fe.exit().remove(),fe.each(function($t){D._plots[$t].bg=r.select(this)}),U=0;U<ie.length;U++)z=D._plots[ie[U]],j=z.xaxis,V=z.yaxis,z.bg&&j._offset!==void 0&&V._offset!==void 0&&z.bg.call(n.setRect,j._offset-N,V._offset-N,j._length+2*N,V._length+2*N).call(f.fill,D.plot_bgcolor).style("stroke-width",0);if(!D._hasOnlyLargeSploms)for(X in D._plots){z=D._plots[X],j=z.xaxis,V=z.yaxis;var de=z.clipId="clip"+D._uid+X+"plot",pe=c.ensureSingleById(D._clips,"clipPath",de,function($t){$t.classed("plotclip",!0).append("rect")});z.clipRect=pe.select("rect").attr({width:j._length,height:V._length}),n.setTranslate(z.plot,j._offset,V._offset);var W,ue;z._hasClipOnAxisFalse?(W=null,ue=de):(W=de,ue=null),n.setClipUrl(z.plot,W,C),z.layerClipId=ue}var me,be,Me,Pe,Ge,ze,Qe,tt,Ce,Ae,Be,qe,Tt;function At($t){return"M"+me+","+$t+"H"+be}function Ne($t){return"M"+j._offset+","+$t+"h"+j._length}function ct($t){return"M"+$t+","+tt+"V"+Qe}function Mt($t){return"M"+$t+","+V._offset+"v"+V._length}function Wt($t,rr,Lt){if(!$t.showline||X!==$t._mainSubplot)return"";if(!$t._anchorAxis)return Lt($t._mainLinePosition);var Ct=rr($t._mainLinePosition);return $t.mirror&&(Ct+=rr($t._mainMirrorPosition)),Ct}for(X in D._plots){z=D._plots[X],j=z.xaxis,V=z.yaxis;var qt="M0,0";T(j,X)&&(Ge=P(j,"left",V,G),me=j._offset-(Ge?N+Ge:0),ze=P(j,"right",V,G),be=j._offset+j._length+(ze?N+ze:0),Me=K(j,V,"bottom"),Pe=K(j,V,"top"),Tt=!j._anchorAxis||X!==j._mainSubplot,Tt&&(j.mirror==="allticks"||j.mirror==="all")&&(j._linepositions[X]=[Me,Pe]),qt=Wt(j,At,Ne),Tt&&j.showline&&(j.mirror==="all"||j.mirror==="allticks")&&(qt+=At(Me)+At(Pe)),z.xlines.style("stroke-width",j._lw+"px").call(f.stroke,j.showline?j.linecolor:"rgba(0,0,0,0)")),z.xlines.attr("d",qt);var zt="M0,0";T(V,X)&&(Be=P(V,"bottom",j,G),Qe=V._offset+V._length+(Be?N:0),qe=P(V,"top",j,G),tt=V._offset-(qe?N:0),Ce=K(V,j,"left"),Ae=K(V,j,"right"),Tt=!V._anchorAxis||X!==V._mainSubplot,Tt&&(V.mirror==="allticks"||V.mirror==="all")&&(V._linepositions[X]=[Ce,Ae]),zt=Wt(V,ct,Mt),Tt&&V.showline&&(V.mirror==="all"||V.mirror==="allticks")&&(zt+=ct(Ce)+ct(Ae)),z.ylines.style("stroke-width",V._lw+"px").call(f.stroke,V.showline?V.linecolor:"rgba(0,0,0,0)")),z.ylines.attr("d",zt)}return h.makeClipPaths(C),u.previousPromises(C)}function T(C,D){return(C.ticks||C.showline)&&(D===C._mainSubplot||C.mirror==="all"||C.mirror==="allticks")}function M(C,D,F){if(!F.showline||!F._lw)return!1;if(F.mirror==="all"||F.mirror==="allticks")return!0;var N=F._anchorAxis;if(!N)return!1;var G=i.FROM_BL[D];return F.side===D?N.domain[G]===C.domain[G]:F.mirror&&N.domain[1-G]===C.domain[1-G]}function P(C,D,F,N){if(M(C,D,F))return F._lw;for(var G=0;G<N.length;G++){var U=N[G];if(U._mainAxis===F._mainAxis&&M(C,D,U))return U._lw}return 0}S.drawMainTitle=function(C){var D=C._fullLayout,F=E(D),N=k(D);o.draw(C,"gtitle",{propContainer:D,propName:"title.text",placeholder:D._dfltTitle.plot,attributes:{x:L(D,F),y:I(D,N),"text-anchor":F,dy:N}})};function L(C,D){var F=C.title,N=C._size,G=0;switch(D===b?G=F.pad.l:D===x&&(G=-F.pad.r),F.xref){case"paper":return N.l+N.w*F.x+G;case"container":default:return C.width*F.x+G}}function I(C,D){var F=C.title,N=C._size,G=0;if(D==="0em"||!D?G=-F.pad.b:D===i.CAP_SHIFT+"em"&&(G=F.pad.t),F.y==="auto")return N.t/2;switch(F.yref){case"paper":return N.t+N.h-N.h*F.y+G;case"container":default:return C.height-C.height*F.y+G}}function E(C){var D=C.title,F=m;return c.isRightAnchor(D)?F=x:c.isLeftAnchor(D)&&(F=b),F}function k(C){var D=C.title,F="0em";return c.isTopAnchor(D)?F=i.CAP_SHIFT+"em":c.isMiddleAnchor(D)&&(F=i.MID_SHIFT+"em"),F}S.doTraceStyle=function(C){var D=C.calcdata,F=[],N;for(N=0;N<D.length;N++){var G=D[N],U=G[0]||{},X=U.trace||{},z=X._module||{},B=z.arraysToCalcdata;B&&B(G,X);var j=z.editStyle;j&&F.push({fn:j,cd0:U})}if(F.length){for(N=0;N<F.length;N++){var V=F[N];V.fn(C,V.cd0)}t(C),S.redrawReglTraces(C)}return u.style(C),a.getComponentMethod("legend","draw")(C),u.previousPromises(C)},S.doColorBars=function(C){return a.getComponentMethod("colorbar","draw")(C),u.previousPromises(C)},S.layoutReplot=function(C){var D=C.layout;return C.layout=void 0,a.call("plot",C,"",D)},S.doLegend=function(C){return a.getComponentMethod("legend","draw")(C),u.previousPromises(C)},S.doTicksRelayout=function(C){return h.draw(C,"redraw"),C._fullLayout._hasOnlyLargeSploms&&(a.subplotsRegistry.splom.updateGrid(C),t(C),S.redrawReglTraces(C)),S.drawMainTitle(C),u.previousPromises(C)},S.doModeBar=function(C){var D=C._fullLayout;l.manage(C);for(var F=0;F<D._basePlotModules.length;F++){var N=D._basePlotModules[F].updateFx;N&&N(C)}return u.previousPromises(C)},S.doCamera=function(C){for(var D=C._fullLayout,F=D._subplots.gl3d,N=0;N<F.length;N++){var G=D[F[N]],U=G._scene;U.setViewport(G)}},S.drawData=function(C){var D=C._fullLayout;t(C);for(var F=D._basePlotModules,N=0;N<F.length;N++)F[N].plot(C);return S.redrawReglTraces(C),u.style(C),a.getComponentMethod("shapes","draw")(C),a.getComponentMethod("annotations","draw")(C),a.getComponentMethod("images","draw")(C),D._replotting=!1,u.previousPromises(C)},S.redrawReglTraces=function(C){var D=C._fullLayout;if(D._has("regl")){var F=C._fullData,N=[],G=[],U,X;for(D._hasOnlyLargeSploms&&D._splomGrid.draw(),U=0;U<F.length;U++){var z=F[U];z.visible===!0&&z._length!==0&&(z.type==="splom"?D._splomScenes[z.uid].draw():z.type==="scattergl"?c.pushUnique(N,z.xaxis+z.yaxis):z.type==="scatterpolargl"&&c.pushUnique(G,z.subplot))}for(U=0;U<N.length;U++)X=D._plots[N[U]],X._scene&&X._scene.draw();for(U=0;U<G.length;U++)X=D[G[U]]._subplot,X._scene&&X._scene.draw()}},S.doAutoRangeAndConstraints=function(C){for(var D=h.list(C,"",!0),F,N={},G=0;G<D.length;G++)if(F=D[G],!N[F._id]){N[F._id]=1,d(C,F),g(C,F);var U=F._matchGroup;if(U)for(var X in U){var z=h.getFromId(C,X);g(C,z,F.range),N[X]=1}}p(C)},S.finalDraw=function(C){a.getComponentMethod("rangeslider","draw")(C),a.getComponentMethod("rangeselector","draw")(C)},S.drawMarginPushers=function(C){a.getComponentMethod("legend","draw")(C),a.getComponentMethod("rangeselector","draw")(C),a.getComponentMethod("sliders","draw")(C),a.getComponentMethod("updatemenus","draw")(C),a.getComponentMethod("colorbar","draw")(C)}},{"../components/color":643,"../components/drawing":665,"../components/modebar":703,"../components/titles":738,"../constants/alignment":745,"../lib":778,"../lib/clear_gl_canvases":762,"../plots/cartesian/autorange":827,"../plots/cartesian/axes":828,"../plots/cartesian/constraints":835,"../plots/plots":891,"../registry":911,d3:169}],819:[function(e,v,S){var r=e("../lib"),a=r.isPlainObject,u=e("./plot_schema"),c=e("../plots/plots"),t=e("../plots/attributes"),f=e("./plot_template"),n=e("./plot_config").dfltConfig;S.makeTemplate=function(b){b=r.isPlainObject(b)?b:r.getGraphDiv(b),b=r.extendDeep({_context:n},{data:b.data,layout:b.layout}),c.supplyDefaults(b);var m=b.data||[],x=b.layout||{};x._basePlotModules=b._fullLayout._basePlotModules,x._modules=b._fullLayout._modules;var w={data:{},layout:{}};m.forEach(function(D){var F={};h(D,F,s.bind(null,D));var N=r.coerce(D,{},t,"type"),G=w.data[N];G||(G=w.data[N]=[]),G.push(F)}),h(x,w.layout,i.bind(null,x)),delete w.layout.template;var y=x.template;if(a(y)){var T=y.layout,M,P,L,I,E,k;a(T)&&o(T,w.layout);var C=y.data;if(a(C)){for(P in w.data)if(L=C[P],Array.isArray(L)){for(E=w.data[P],k=E.length,I=L.length,M=0;M<k;M++)o(L[M%I],E[M]);for(M=k;M<I;M++)E.push(r.extendDeep({},L[M]))}for(P in C)P in w.data||(w.data[P]=r.extendDeep([],C[P]))}}return w};function o(b,m){b=r.extendDeep({},b);var x=Object.keys(b).sort(),w,y;function T(E,k,C){if(a(k)&&a(E))o(E,k);else if(Array.isArray(k)&&Array.isArray(E)){var D=f.arrayTemplater({_template:b},C);for(y=0;y<k.length;y++){var F=k[y],N=D.newItem(F)._template;N&&o(N,F)}var G=D.defaultItems();for(y=0;y<G.length;y++)k.push(G[y]._template);for(y=0;y<k.length;y++)delete k[y].templateitemname}}for(w=0;w<x.length;w++){var M=x[w],P=b[M];if(M in m?T(P,m[M],M):m[M]=P,l(M)===M)for(var L in m){var I=l(L);L!==I&&I===M&&!(L in b)&&T(P,m[L],M)}}}function l(b){return b.replace(/[0-9]+$/,"")}function h(b,m,x,w,y){var T=y&&x(y);for(var M in b){var P=b[M],L=p(b,M,w),I=p(b,M,y),E=x(I);if(!E){var k=l(M);k!==M&&(I=p(b,k,y),E=x(I))}if(!(T&&T===E)&&!(!E||E._noTemplating||E.valType==="data_array"||E.arrayOk&&Array.isArray(P)))if(!E.valType&&a(P))h(P,m,x,L,I);else if(E._isLinkedToArray&&Array.isArray(P))for(var C=!1,D=0,F={},N=0;N<P.length;N++){var G=P[N];if(a(G)){var U=G.name;if(U)F[U]||(h(G,m,x,p(P,D,L),p(P,D,I)),D++,F[U]=1);else if(!C){var X=f.arrayDefaultKey(M),z=p(b,X,w),B=p(P,D,L);h(G,m,x,B,p(P,D,I));var j=r.nestedProperty(m,B),V=r.nestedProperty(m,z);V.set(j.get()),j.set(null),C=!0}}}else{var K=r.nestedProperty(m,L);K.set(P)}}}function i(b,m){return u.getLayoutValObject(b,r.nestedProperty({},m).parts)}function s(b,m){return u.getTraceValObject(b,r.nestedProperty({},m).parts)}function p(b,m,x){var w;return x?Array.isArray(b)?w=x+"["+m+"]":w=x+"."+m:w=m,w}S.validateTemplate=function(b,m){var x=r.extendDeep({},{_context:n,data:b.data,layout:b.layout}),w=x.layout||{};a(m)||(m=w.template||{});var y=m.layout,T=m.data,M=[];x.layout=w,x.layout.template=m,c.supplyDefaults(x);var P=x._fullLayout,L=x._fullData,I={};function E(z,B){for(var j in z)if(j.charAt(0)!=="_"&&a(z[j])){var V=l(j),K=[],te;for(te=0;te<B.length;te++)K.push(p(z,j,B[te])),V!==j&&K.push(p(z,V,B[te]));for(te=0;te<K.length;te++)I[K[te]]=1;E(z[j],K)}}function k(z,B){for(var j in z)if(j.indexOf("defaults")===-1&&a(z[j])){var V=p(z,j,B);I[V]?k(z[j],V):M.push({code:"unused",path:V})}}if(a(y)?(E(P,["layout"]),k(y,"layout")):M.push({code:"layout"}),!a(T))M.push({code:"data"});else{for(var C={},D,F=0;F<L.length;F++){var N=L[F];D=N.type,C[D]=(C[D]||0)+1,N._fullInput._template||M.push({code:"missing",index:N._fullInput.index,traceType:D})}for(D in T){var G=T[D].length,U=C[D]||0;G>U?M.push({code:"unused",traceType:D,templateCount:G,dataCount:U}):U>G&&M.push({code:"reused",traceType:D,templateCount:G,dataCount:U})}}function X(z,B){for(var j in z)if(j.charAt(0)!=="_"){var V=z[j],K=p(z,j,B);a(V)?(Array.isArray(z)&&V._template===!1&&V.templateitemname&&M.push({code:"missing",path:K,templateitemname:V.templateitemname}),X(V,K)):Array.isArray(V)&&d(V)&&X(V,K)}}if(X({data:L,layout:P},""),M.length)return M.map(g)};function d(b){for(var m=0;m<b.length;m++)if(a(b[m]))return!0}function g(b){var m;switch(b.code){case"data":m="The template has no key data.";break;case"layout":m="The template has no key layout.";break;case"missing":b.path?m="There are no templates for item "+b.path+" with name "+b.templateitemname:m="There are no templates for trace "+b.index+", of type "+b.traceType+".";break;case"unused":b.path?m="The template item at "+b.path+" was not used in constructing the plot.":b.dataCount?m="Some of the templates of type "+b.traceType+" were not used. The template has "+b.templateCount+" traces, the data only has "+b.dataCount+" of this type.":m="The template has "+b.templateCount+" traces of type "+b.traceType+" but there are none in the data.";break;case"reused":m="Some of the templates of type "+b.traceType+" were used more than once. The template has "+b.templateCount+" traces, the data has "+b.dataCount+" of this type.";break}return b.msg=m,b}},{"../lib":778,"../plots/attributes":824,"../plots/plots":891,"./plot_config":815,"./plot_schema":816,"./plot_template":817}],820:[function(e,v,S){var r=e("fast-isnumeric"),a=e("./plot_api"),u=e("../plots/plots"),c=e("../lib"),t=e("../snapshot/helpers"),f=e("../snapshot/tosvg"),n=e("../snapshot/svgtoimg"),o=e("../version").version,l={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function h(i,s){s=s||{};var p,d,g,b;c.isPlainObject(i)?(p=i.data||[],d=i.layout||{},g=i.config||{},b={}):(i=c.getGraphDiv(i),p=c.extendDeep([],i.data),d=c.extendDeep({},i.layout),g=i._context,b=i._fullLayout||{});function m(U){return!(U in s)||c.validate(s[U],l[U])}if(!m("width")&&s.width!==null||!m("height")&&s.height!==null)throw new Error("Height and width should be pixel values.");if(!m("format"))throw new Error("Export format is not "+c.join2(l.format.values,", "," or ")+".");var x={};function w(U,X){return c.coerce(s,x,l,U,X)}var y=w("format"),T=w("width"),M=w("height"),P=w("scale"),L=w("setBackground"),I=w("imageDataOnly"),E=document.createElement("div");E.style.position="absolute",E.style.left="-5000px",document.body.appendChild(E);var k=c.extendFlat({},d);T?k.width=T:s.width===null&&r(b.width)&&(k.width=b.width),M?k.height=M:s.height===null&&r(b.height)&&(k.height=b.height);var C=c.extendFlat({},g,{_exportedPlot:!0,staticPlot:!0,setBackground:L}),D=t.getRedrawFunc(E);function F(){return new Promise(function(U){setTimeout(U,t.getDelay(E._fullLayout))})}function N(){return new Promise(function(U,X){var z=f(E,y,P),B=E._fullLayout.width,j=E._fullLayout.height;function V(){a.purge(E),document.body.removeChild(E)}if(y==="full-json"){var K=u.graphJson(E,!1,"keepdata","object",!0,!0);return K.version=o,K=JSON.stringify(K),V(),U(I?K:t.encodeJSON(K))}if(V(),y==="svg")return U(I?z:t.encodeSVG(z));var te=document.createElement("canvas");te.id=c.randstr(),n({format:y,width:B,height:j,scale:P,canvas:te,svg:z,promise:!0}).then(U).catch(X)})}function G(U){return I?U.replace(t.IMAGE_URL_PREFIX,""):U}return new Promise(function(U,X){a.plot(E,p,k,C).then(D).then(F).then(N).then(function(z){U(G(z))}).catch(function(z){X(z)})})}v.exports=h},{"../lib":778,"../plots/plots":891,"../snapshot/helpers":915,"../snapshot/svgtoimg":917,"../snapshot/tosvg":919,"../version":1370,"./plot_api":814,"fast-isnumeric":241}],821:[function(e,v,S){var r=e("../lib"),a=e("../plots/plots"),u=e("./plot_schema"),c=e("./plot_config").dfltConfig,t=r.isPlainObject,f=Array.isArray,n=r.isArrayOrTypedArray;v.exports=function(w,y){w===void 0&&(w=[]),y===void 0&&(y={});var T=u.get(),M=[],P={_context:r.extendFlat({},c)},L,I;f(w)?(P.data=r.extendDeep([],w),L=w):(P.data=[],L=[],M.push(s("array","data"))),t(y)?(P.layout=r.extendDeep({},y),I=y):(P.layout={},I={},arguments.length>1&&M.push(s("object","layout"))),a.supplyDefaults(P);for(var E=P._fullData,k=L.length,C=0;C<k;C++){var D=L[C],F=["data",C];if(!t(D)){M.push(s("object",F));continue}var N=E[C],G=N.type,U=T.traces[G].attributes;U.type={valType:"enumerated",values:[G]},N.visible===!1&&D.visible!==!1&&M.push(s("invisible",F)),o(D,N,U,M,F);var X=D.transforms,z=N.transforms;if(X){f(X)||M.push(s("array",F,["transforms"])),F.push("transforms");for(var B=0;B<X.length;B++){var j=["transforms",B],V=X[B].type;if(!t(X[B])){M.push(s("object",F,j));continue}var K=T.transforms[V]?T.transforms[V].attributes:{};K.type={valType:"enumerated",values:Object.keys(T.transforms)},o(X[B],z[B],K,M,F,j)}}}var te=P._fullLayout,$=l(T,E);return o(I,te,$,M,"layout"),M.length===0?void 0:M};function o(x,w,y,T,M,P){P=P||[];for(var L=Object.keys(x),I=0;I<L.length;I++){var E=L[I];if(E!=="transforms"){var k=P.slice();k.push(E);var C=x[E],D=w[E],F=d(y,E),N=(F||{}).valType,G=N==="info_array",U=N==="colorscale",X=(F||{}).items;if(!p(y,E))T.push(s("schema",M,k));else if(t(C)&&t(D)&&N!=="any")o(C,D,F,T,M,k);else if(G&&f(C)){C.length>D.length&&T.push(s("unused",M,k.concat(D.length)));var z=D.length,B=Array.isArray(X);B&&(z=Math.min(z,X.length));var j,V,K,te,$;if(F.dimensions===2)for(V=0;V<z;V++)if(f(C[V])){C[V].length>D[V].length&&T.push(s("unused",M,k.concat(V,D[V].length)));var ie=D[V].length;for(j=0;j<(B?Math.min(ie,X[V].length):ie);j++)K=B?X[V][j]:X,te=C[V][j],$=D[V][j],r.validate(te,K)?$!==te&&$!==+te&&T.push(s("dynamic",M,k.concat(V,j),te,$)):T.push(s("value",M,k.concat(V,j),te))}else T.push(s("array",M,k.concat(V),C[V]));else for(V=0;V<z;V++)K=B?X[V]:X,te=C[V],$=D[V],r.validate(te,K)?$!==te&&$!==+te&&T.push(s("dynamic",M,k.concat(V),te,$)):T.push(s("value",M,k.concat(V),te))}else if(F.items&&!G&&f(C)){var se=X[Object.keys(X)[0]],Q=[],H,oe;for(H=0;H<D.length;H++){var re=D[H]._index||H;if(oe=k.slice(),oe.push(re),t(C[re])&&t(D[H])){Q.push(re);var ee=C[re],ae=D[H];t(ee)&&ee.visible!==!1&&ae.visible===!1?T.push(s("invisible",M,oe)):o(ee,ae,se,T,M,oe)}}for(H=0;H<C.length;H++)oe=k.slice(),oe.push(H),t(C[H])?Q.indexOf(H)===-1&&T.push(s("unused",M,oe)):T.push(s("object",M,oe,C[H]))}else!t(C)&&t(D)?T.push(s("object",M,k,C)):!n(C)&&n(D)&&!G&&!U?T.push(s("array",M,k,C)):E in w?r.validate(C,F)?F.valType==="enumerated"&&(F.coerceNumber&&C!==+D||C!==D)&&T.push(s("dynamic",M,k,C,D)):T.push(s("value",M,k,C)):T.push(s("unused",M,k,C))}}return T}function l(x,w){for(var y=x.layout.layoutAttributes,T=0;T<w.length;T++){var M=w[T],P=x.traces[M.type],L=P.layoutAttributes;L&&(M.subplot?r.extendFlat(y[P.attributes.subplot.dflt],L):r.extendFlat(y,L))}return y}var h={object:function(x,w){var y;return x==="layout"&&w===""?y="The layout argument":x[0]==="data"&&w===""?y="Trace "+x[1]+" in the data argument":y=i(x)+"key "+w,y+" must be linked to an object container"},array:function(x,w){var y;return x==="data"?y="The data argument":y=i(x)+"key "+w,y+" must be linked to an array container"},schema:function(x,w){return i(x)+"key "+w+" is not part of the schema"},unused:function(x,w,y){var T=t(y)?"container":"key";return i(x)+T+" "+w+" did not get coerced"},dynamic:function(x,w,y,T){return[i(x)+"key",w,"(set to '"+y+"')","got reset to","'"+T+"'","during defaults."].join(" ")},invisible:function(x,w){return(w?i(x)+"item "+w:"Trace "+x[1])+" got defaulted to be not visible"},value:function(x,w,y){return[i(x)+"key "+w,"is set to an invalid value ("+y+")"].join(" ")}};function i(x){return f(x)?"In data trace "+x[1]+", ":"In "+x+", "}function s(x,w,y,T,M){y=y||"";var P,L;f(w)?(P=w[0],L=w[1]):(P=w,L=null);var I=m(y),E=h[x](w,I,T,M);return r.log(E),{code:x,container:P,trace:L,path:y,astr:I,msg:E}}function p(x,w){var y=b(w),T=y.keyMinusId,M=y.id;return T in x&&x[T]._isSubplotObj&&M?!0:w in x}function d(x,w){if(w in x)return x[w];var y=b(w);return x[y.keyMinusId]}var g=r.counterRegex("([a-z]+)");function b(x){var w=x.match(g);return{keyMinusId:w&&w[1],id:w&&w[2]}}function m(x){if(!f(x))return String(x);for(var w="",y=0;y<x.length;y++){var T=x[y];typeof T=="number"?w=w.substr(0,w.length-1)+"["+T+"]":w+=T,y<x.length-1&&(w+=".")}return w}},{"../lib":778,"../plots/plots":891,"./plot_config":815,"./plot_schema":816}],822:[function(e,v,S){v.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],823:[function(e,v,S){var r=e("../lib"),a=e("../plot_api/plot_template");v.exports=function(c,t,f){var n=f.name,o=f.inclusionAttr||"visible",l=t[n],h=r.isArrayOrTypedArray(c[n])?c[n]:[],i=t[n]=[],s=a.arrayTemplater(t,n,o),p,d;for(p=0;p<h.length;p++){var g=h[p];r.isPlainObject(g)?d=s.newItem(g):(d=s.newItem({}),d[o]=!1),d._index=p,d[o]!==!1&&f.handleItemDefaults(g,d,t,f),i.push(d)}var b=s.defaultItems();for(p=0;p<b.length;p++)d=b[p],d._index=i.length,f.handleItemDefaults({},d,t,f,{}),i.push(d);if(r.isArrayOrTypedArray(l)){var m=Math.min(l.length,i.length);for(p=0;p<m;p++)r.relinkPrivateKeys(i[p],l[p])}return i}},{"../lib":778,"../plot_api/plot_template":817}],824:[function(e,v,S){var r=e("../components/fx/attributes");v.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:r.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":674}],825:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=a.dateTime2ms,c=a.incrementMonth,t=e("../../constants/numerical"),f=t.ONEAVGMONTH;v.exports=function(o,l,h,i){if(l.type!=="date")return i;var s=o[h+"periodalignment"];if(!s)return i;var p=o[h+"period"],d;if(r(p)){if(p=+p,p<=0)return i}else if(typeof p=="string"&&p.charAt(0)==="M"){var g=+p.substring(1);if(g>0&&Math.round(g)===g)d=g;else return i}for(var b=l.calendar,m=s==="start",x=s==="end",w=o[h+"period0"],y=u(w,b)||0,T=[],M=i.length,P=0;P<M;P++){var L=i[P],I,E,k;if(d){for(I=Math.round((L-y)/(d*f)),k=c(y,d*I,b);k>L;)k=c(k,-d,b);for(;k<=L;)k=c(k,d,b);E=c(k,-d,b)}else{for(I=Math.round((L-y)/p),k=y+I*p;k>L;)k-=p;for(;k<=L;)k+=p;E=k-p}T[P]=m?E:x?k:(E+k)/2}return T}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],826:[function(e,v,S){v.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],827:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../constants/numerical").FP_SAFE,c=e("../../registry"),t=e("./axis_ids"),f=t.getFromId,n=t.isLinked;v.exports={getAutoRange:o,makePadFn:h,doAutoRange:d,findExtremes:g,concatExtremes:p};function o(M,P){var L,I,E=[],k=M._fullLayout,C=h(k,P,0),D=h(k,P,1),F=p(M,P),N=F.min,G=F.max;if(N.length===0||G.length===0)return a.simpleMap(P.range,P.r2l);var U=N[0].val,X=G[0].val;for(L=1;L<N.length&&U===X;L++)U=Math.min(U,N[L].val);for(L=1;L<G.length&&U===X;L++)X=Math.max(X,G[L].val);var z=!1;if(P.range){var B=a.simpleMap(P.range,P.r2l);z=B[1]<B[0]}P.autorange==="reversed"&&(z=!0,P.autorange=!0);var j=P.rangemode,V=j==="tozero",K=j==="nonnegative",te=P._length,$=te/10,ie=0,se,Q,H,oe,re,ee;for(L=0;L<N.length;L++)for(se=N[L],I=0;I<G.length;I++)Q=G[I],ee=Q.val-se.val-l(P,se.val,Q.val),ee>0&&(re=te-C(se)-D(Q),re>$?ee/re>ie&&(H=se,oe=Q,ie=ee/re):ee/te>ie&&(H={val:se.val,nopad:1},oe={val:Q.val,nopad:1},ie=ee/te));function ae(ue,me){return Math.max(ue,D(me))}if(U===X){var fe=U-1,de=U+1;if(V)if(U===0)E=[0,1];else{var pe=(U>0?G:N).reduce(ae,0),W=U/(1-Math.min(.5,pe/te));E=U>0?[0,W]:[W,0]}else K?E=[Math.max(0,fe),Math.max(1,de)]:E=[fe,de]}else V?(H.val>=0&&(H={val:0,nopad:1}),oe.val<=0&&(oe={val:0,nopad:1})):K&&(H.val-ie*C(H)<0&&(H={val:0,nopad:1}),oe.val<=0&&(oe={val:1,nopad:1})),ie=(oe.val-H.val-l(P,se.val,Q.val))/(te-C(H)-D(oe)),E=[H.val-ie*C(H),oe.val+ie*D(oe)];return z&&E.reverse(),a.simpleMap(E,P.l2r||Number)}function l(M,P,L){var I=0;if(M.rangebreaks)for(var E=M.locateBreaks(P,L),k=0;k<E.length;k++){var C=E[k];I+=C.max-C.min}return I}function h(M,P,L){var I=.05*P._length,E=P._anchorAxis||{};if((P.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var k=P.autorange==="reversed";if(!k){var C=a.simpleMap(P.range,P.r2l);k=C[1]<C[0]}k&&(L=!L)}var D=0;return n(M,P._id)||(D=s(P,L)),I=Math.max(D,I),P.constrain==="domain"&&P._inputDomain&&(I*=(P._inputDomain[1]-P._inputDomain[0])/(P.domain[1]-P.domain[0])),function(N){return N.nopad?0:N.pad+(N.extrapad?I:D)}}var i=3;function s(M,P){var L=0,I=M._anchorAxis||{};if((I.ticklabelposition||"").indexOf("inside")!==-1&&(!P&&(I.side==="left"||I.side==="bottom")||P&&(I.side==="top"||I.side==="right"))){var E=M._id.charAt(0)==="x";if(I._vals){var k=a.deg2rad(I._tickAngles[I._id+"tick"]||0),C=Math.abs(Math.cos(k)),D=Math.abs(Math.sin(k));I._vals.forEach(function(F){if(F.bb){var N=2*i+F.bb.width,G=2*i+F.bb.height;L=Math.max(L,E?Math.max(N*C,G*D):Math.max(G*C,N*D))}})}I.ticks==="inside"&&I.ticklabelposition==="inside"&&(L+=I.ticklen||0)}return L}function p(M,P,L){var I=P._id,E=M._fullData,k=M._fullLayout,C=[],D=[],F,N,G;function U(V,K){for(F=0;F<K.length;F++){var te=V[K[F]],$=(te._extremes||{})[I];if(te.visible===!0&&$){for(N=0;N<$.min.length;N++)G=$.min[N],b(C,G.val,G.pad,{extrapad:G.extrapad});for(N=0;N<$.max.length;N++)G=$.max[N],m(D,G.val,G.pad,{extrapad:G.extrapad})}}}if(U(E,P._traceIndices),U(k.annotations||[],P._annIndices||[]),U(k.shapes||[],P._shapeIndices||[]),P._matchGroup&&!L){for(var X in P._matchGroup)if(X!==P._id){var z=f(M,X),B=p(M,z,!0),j=P._length/z._length;for(N=0;N<B.min.length;N++)G=B.min[N],b(C,G.val,G.pad*j,{extrapad:G.extrapad});for(N=0;N<B.max.length;N++)G=B.max[N],m(D,G.val,G.pad*j,{extrapad:G.extrapad})}}return{min:C,max:D}}function d(M,P,L){if(P.setScale(),P.autorange){P.range=L?L.slice():o(M,P),P._r=P.range.slice(),P._rl=a.simpleMap(P._r,P.r2l);var I=P._input,E={};E[P._attr+".range"]=P.range,E[P._attr+".autorange"]=P.autorange,c.call("_storeDirectGUIEdit",M.layout,M._fullLayout._preGUI,E),I.range=P.range.slice(),I.autorange=P.autorange}var k=P._anchorAxis;if(k&&k.rangeslider){var C=k.rangeslider[P._name];C&&C.rangemode==="auto"&&(C.range=o(M,P)),k._input.rangeslider[P._name]=a.extendFlat({},C)}}function g(M,P,L){L||(L={}),M._m||M.setScale();var I=[],E=[],k=P.length,C=L.padded||!1,D=L.tozero&&(M.type==="linear"||M.type==="-"),F=M.type==="log",N=!1,G=L.vpadLinearized||!1,U,X,z,B,j,V,K,te,$;function ie(fe){if(Array.isArray(fe))return N=!0,function(pe){return Math.max(Number(fe[pe]||0),0)};var de=Math.max(Number(fe||0),0);return function(){return de}}var se=ie((M._m>0?L.ppadplus:L.ppadminus)||L.ppad||0),Q=ie((M._m>0?L.ppadminus:L.ppadplus)||L.ppad||0),H=ie(L.vpadplus||L.vpad),oe=ie(L.vpadminus||L.vpad);if(!N){if(te=1/0,$=-1/0,F)for(U=0;U<k;U++)X=P[U],X<te&&X>0&&(te=X),X>$&&X<u&&($=X);else for(U=0;U<k;U++)X=P[U],X<te&&X>-u&&(te=X),X>$&&X<u&&($=X);P=[te,$],k=2}var re={tozero:D,extrapad:C};function ee(fe){z=P[fe],r(z)&&(V=se(fe),K=Q(fe),G?(B=M.c2l(z)-oe(fe),j=M.c2l(z)+H(fe)):(te=z-oe(fe),$=z+H(fe),F&&te<$/10&&(te=$/10),B=M.c2l(te),j=M.c2l($)),D&&(B=Math.min(0,B),j=Math.max(0,j)),w(B)&&b(I,B,K,re),w(j)&&m(E,j,V,re))}var ae=Math.min(6,k);for(U=0;U<ae;U++)ee(U);for(U=k-1;U>=ae;U--)ee(U);return{min:I,max:E,opts:L}}function b(M,P,L,I){x(M,P,L,I,y)}function m(M,P,L,I){x(M,P,L,I,T)}function x(M,P,L,I,E){for(var k=I.tozero,C=I.extrapad,D=!0,F=0;F<M.length&&D;F++){var N=M[F];if(E(N.val,P)&&N.pad>=L&&(N.extrapad||!C)){D=!1;break}else E(P,N.val)&&N.pad<=L&&(C||!N.extrapad)&&(M.splice(F,1),F--)}if(D){var G=k&&P===0;M.push({val:P,pad:G?0:L,extrapad:G?!1:C})}}function w(M){return r(M)&&Math.abs(M)<u}function y(M,P){return M<=P}function T(M,P){return M>=P}},{"../../constants/numerical":753,"../../lib":778,"../../registry":911,"./axis_ids":831,"fast-isnumeric":241}],828:[function(e,v,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("../../plots/plots"),c=e("../../registry"),t=e("../../lib"),f=t.strTranslate,n=e("../../lib/svg_text_utils"),o=e("../../components/titles"),l=e("../../components/color"),h=e("../../components/drawing"),i=e("./layout_attributes"),s=e("./clean_ticks"),p=e("../../constants/numerical"),d=p.ONEMAXYEAR,g=p.ONEAVGYEAR,b=p.ONEMINYEAR,m=p.ONEMAXQUARTER,x=p.ONEAVGQUARTER,w=p.ONEMINQUARTER,y=p.ONEMAXMONTH,T=p.ONEAVGMONTH,M=p.ONEMINMONTH,P=p.ONEWEEK,L=p.ONEDAY,I=L/2,E=p.ONEHOUR,k=p.ONEMIN,C=p.ONESEC,D=p.MINUS_SIGN,F=p.BADNUM,N=e("../../constants/alignment"),G=N.MID_SHIFT,U=N.CAP_SHIFT,X=N.LINE_SPACING,z=N.OPPOSITE_SIDE,B=3,j=v.exports={};j.setConvert=e("./set_convert");var V=e("./axis_autotype"),K=e("./axis_ids"),te=K.idSort,$=K.isLinked;j.id2name=K.id2name,j.name2id=K.name2id,j.cleanId=K.cleanId,j.list=K.list,j.listIds=K.listIds,j.getFromId=K.getFromId,j.getFromTrace=K.getFromTrace;var ie=e("./autorange");j.getAutoRange=ie.getAutoRange,j.findExtremes=ie.findExtremes;var se=1e-4;function Q(We){var Fe=(We[1]-We[0])*se;return[We[0]-Fe,We[1]+Fe]}j.coerceRef=function(We,Fe,bt,kt,_t,Rt){var Dt=kt.charAt(kt.length-1),Ut=bt._fullLayout._subplots[Dt+"axis"],Bt=kt+"ref",tr={};return _t||(_t=Ut[0]||(typeof Rt=="string"?Rt:Rt[0])),Rt||(Rt=_t),Ut=Ut.concat(Ut.map(function(er){return er+" domain"})),tr[Bt]={valType:"enumerated",values:Ut.concat(Rt?typeof Rt=="string"?[Rt]:Rt:[]),dflt:_t},t.coerce(We,Fe,tr,Bt)},j.getRefType=function(We){return We===void 0?We:We==="paper"?"paper":We==="pixel"?"pixel":/( domain)$/.test(We)?"domain":"range"},j.coercePosition=function(We,Fe,bt,kt,_t,Rt){var Dt,Ut,Bt=j.getRefType(kt);if(Bt!=="range")Dt=t.ensureNumber,Ut=bt(_t,Rt);else{var tr=j.getFromId(Fe,kt);Rt=tr.fraction2r(Rt),Ut=bt(_t,Rt),Dt=tr.cleanPos}We[_t]=Dt(Ut)},j.cleanPosition=function(We,Fe,bt){var kt=bt==="paper"||bt==="pixel"?t.ensureNumber:j.getFromId(Fe,bt).cleanPos;return kt(We)},j.redrawComponents=function(We,Fe){Fe=Fe||j.listIds(We);var bt=We._fullLayout;function kt(_t,Rt,Dt,Ut){for(var Bt=c.getComponentMethod(_t,Rt),tr={},er=0;er<Fe.length;er++)for(var Zt=bt[j.id2name(Fe[er])],_r=Zt[Dt],Gr=0;Gr<_r.length;Gr++){var Or=_r[Gr];if(!tr[Or]&&(Bt(We,Or),tr[Or]=1,Ut))return}}kt("annotations","drawOne","_annIndices"),kt("shapes","drawOne","_shapeIndices"),kt("images","draw","_imgIndices",!0)};var H=j.getDataConversions=function(We,Fe,bt,kt){var _t,Rt=bt==="x"||bt==="y"||bt==="z"?bt:kt;if(Array.isArray(Rt)){if(_t={type:V(kt,void 0,{autotypenumbers:We._fullLayout.autotypenumbers}),_categories:[]},j.setConvert(_t),_t.type==="category")for(var Dt=0;Dt<kt.length;Dt++)_t.d2c(kt[Dt])}else _t=j.getFromTrace(We,Fe,Rt);return _t?{d2c:_t.d2c,c2d:_t.c2d}:Rt==="ids"?{d2c:re,c2d:re}:{d2c:oe,c2d:oe}};function oe(We){return+We}function re(We){return String(We)}j.getDataToCoordFunc=function(We,Fe,bt,kt){return H(We,Fe,bt,kt).d2c},j.counterLetter=function(We){var Fe=We.charAt(0);if(Fe==="x")return"y";if(Fe==="y")return"x"},j.minDtick=function(We,Fe,bt,kt){["log","category","multicategory"].indexOf(We.type)!==-1||!kt?We._minDtick=0:We._minDtick===void 0?(We._minDtick=Fe,We._forceTick0=bt):We._minDtick&&((We._minDtick/Fe+1e-6)%1<2e-6&&((bt-We._forceTick0)/Fe%1+1.000001)%1<2e-6?(We._minDtick=Fe,We._forceTick0=bt):((Fe/We._minDtick+1e-6)%1>2e-6||((bt-We._forceTick0)/We._minDtick%1+1.000001)%1>2e-6)&&(We._minDtick=0))},j.saveRangeInitial=function(We,Fe){for(var bt=j.list(We,"",!0),kt=!1,_t=0;_t<bt.length;_t++){var Rt=bt[_t],Dt=Rt._rangeInitial===void 0,Ut=Dt||!(Rt.range[0]===Rt._rangeInitial[0]&&Rt.range[1]===Rt._rangeInitial[1]);(Dt&&Rt.autorange===!1||Fe&&Ut)&&(Rt._rangeInitial=Rt.range.slice(),kt=!0)}return kt},j.saveShowSpikeInitial=function(We,Fe){for(var bt=j.list(We,"",!0),kt=!1,_t="on",Rt=0;Rt<bt.length;Rt++){var Dt=bt[Rt],Ut=Dt._showSpikeInitial===void 0,Bt=Ut||Dt.showspikes!==Dt._showspikes;(Ut||Fe&&Bt)&&(Dt._showSpikeInitial=Dt.showspikes,kt=!0),_t==="on"&&!Dt.showspikes&&(_t="off")}return We._fullLayout._cartesianSpikesEnabled=_t,kt},j.autoBin=function(We,Fe,bt,kt,_t,Rt){var Dt=t.aggNums(Math.min,null,We),Ut=t.aggNums(Math.max,null,We);if(Fe.type==="category"||Fe.type==="multicategory")return{start:Dt-.5,end:Ut+.5,size:Math.max(1,Math.round(Rt)||1),_dataSpan:Ut-Dt};_t||(_t=Fe.calendar);var Bt;if(Fe.type==="log"?Bt={type:"linear",range:[Dt,Ut]}:Bt={type:Fe.type,range:t.simpleMap([Dt,Ut],Fe.c2r,0,_t),calendar:_t},j.setConvert(Bt),Rt=Rt&&s.dtick(Rt,Bt.type),Rt)Bt.dtick=Rt,Bt.tick0=s.tick0(void 0,Bt.type,_t);else{var tr;if(bt)tr=(Ut-Dt)/bt;else{var er=t.distinctVals(We),Zt=Math.pow(10,Math.floor(Math.log(er.minDiff)/Math.LN10)),_r=Zt*t.roundUp(er.minDiff/Zt,[.9,1.9,4.9,9.9],!0);tr=Math.max(_r,2*t.stdev(We)/Math.pow(We.length,kt?.25:.4)),a(tr)||(tr=1)}j.autoTicks(Bt,tr)}var Gr=Bt.dtick,Or=j.tickIncrement(j.tickFirst(Bt),Gr,"reverse",_t),Fr,Mn;if(typeof Gr=="number")Or=ee(Or,We,Bt,Dt,Ut),Mn=1+Math.floor((Ut-Or)/Gr),Fr=Or+Mn*Gr;else for(Bt.dtick.charAt(0)==="M"&&(Or=ae(Or,We,Gr,Dt,_t)),Fr=Or,Mn=0;Fr<=Ut;)Fr=j.tickIncrement(Fr,Gr,!1,_t),Mn++;return{start:Fe.c2r(Or,0,_t),end:Fe.c2r(Fr,0,_t),size:Gr,_dataSpan:Ut-Dt}};function ee(We,Fe,bt,kt,_t){var Rt=0,Dt=0,Ut=0,Bt=0;function tr(Gr){return(1+(Gr-We)*100/bt.dtick)%100<2}for(var er=0;er<Fe.length;er++)Fe[er]%1===0?Ut++:a(Fe[er])||Bt++,tr(Fe[er])&&Rt++,tr(Fe[er]+bt.dtick/2)&&Dt++;var Zt=Fe.length-Bt;if(Ut===Zt&&bt.type!=="date")bt.dtick<1?We=kt-.5*bt.dtick:(We-=.5,We+bt.dtick<kt&&(We+=bt.dtick));else if(Dt<Zt*.1&&(Rt>Zt*.3||tr(kt)||tr(_t))){var _r=bt.dtick/2;We+=We+_r<kt?_r:-_r}return We}function ae(We,Fe,bt,kt,_t){var Rt=t.findExactDates(Fe,_t),Dt=.8;if(Rt.exactDays>Dt){var Ut=Number(bt.substr(1));Rt.exactYears>Dt&&Ut%12===0?We=j.tickIncrement(We,"M6","reverse")+L*1.5:Rt.exactMonths>Dt?We=j.tickIncrement(We,"M1","reverse")+L*15.5:We-=I;var Bt=j.tickIncrement(We,bt);if(Bt<=kt)return Bt}return We}j.prepTicks=function(We,Fe){var bt=t.simpleMap(We.range,We.r2l,void 0,void 0,Fe);if(We._dtickInit=We.dtick,We._tick0Init=We.tick0,We.tickmode==="auto"||!We.dtick){var kt=We.nticks,_t;kt||(We.type==="category"||We.type==="multicategory"?(_t=We.tickfont?(We.tickfont.size||12)*1.2:15,kt=We._length/_t):(_t=We._id.charAt(0)==="y"?40:80,kt=t.constrain(We._length/_t,4,9)+1),We._name==="radialaxis"&&(kt*=2)),We.tickmode==="array"&&(kt*=100),We._roughDTick=Math.abs(bt[1]-bt[0])/kt,j.autoTicks(We,We._roughDTick),We._minDtick>0&&We.dtick<We._minDtick*2&&(We.dtick=We._minDtick,We.tick0=We.l2r(We._forceTick0))}We.ticklabelmode==="period"&&de(We),We.tick0||(We.tick0=We.type==="date"?"2000-01-01":0),We.type==="date"&&We.dtick<.1&&(We.dtick=.1),tt(We)};function fe(We){return+We.substring(1)}function de(We){var Fe;function bt(){return!(a(We.dtick)||We.dtick.charAt(0)!=="M")}var kt=bt(),_t=j.getTickFormat(We);if(_t){var Rt=We._dtickInit!==We.dtick;/%[fLQsSMX]/.test(_t)||(/%[HI]/.test(_t)?(Fe=E,Rt&&!kt&&We.dtick<E&&(We.dtick=E)):/%p/.test(_t)?(Fe=I,Rt&&!kt&&We.dtick<I&&(We.dtick=I)):/%[Aadejuwx]/.test(_t)?(Fe=L,Rt&&!kt&&We.dtick<L&&(We.dtick=L)):/%[UVW]/.test(_t)?(Fe=P,Rt&&!kt&&We.dtick<P&&(We.dtick=P)):/%[Bbm]/.test(_t)?(Fe=T,Rt&&(kt?fe(We.dtick)<1:We.dtick<M)&&(We.dtick="M1")):/%[q]/.test(_t)?(Fe=x,Rt&&(kt?fe(We.dtick)<3:We.dtick<w)&&(We.dtick="M3")):/%[Yy]/.test(_t)&&(Fe=g,Rt&&(kt?fe(We.dtick)<12:We.dtick<b)&&(We.dtick="M12")))}kt=bt(),kt&&We.tick0===We._dowTick0&&(We.tick0=We._rawTick0),We._definedDelta=Fe}function pe(We,Fe,bt){for(var kt=0;kt<We.length;kt++){var _t=We[kt].value,Rt=kt,Dt=kt+1;kt<We.length-1?(Rt=kt,Dt=kt+1):kt>0?(Rt=kt-1,Dt=kt):(Rt=kt,Dt=kt);var Ut=We[Rt].value,Bt=We[Dt].value,tr=Math.abs(Bt-Ut),er=bt||tr,Zt=0;er>=b?tr>=b&&tr<=d?Zt=tr:Zt=g:bt===x&&er>=w?tr>=w&&tr<=m?Zt=tr:Zt=x:er>=M?tr>=M&&tr<=y?Zt=tr:Zt=T:bt===P&&er>=P?Zt=P:er>=L?Zt=L:bt===I&&er>=I?Zt=I:bt===E&&er>=E&&(Zt=E);var _r;Zt>=tr&&(Zt=tr,_r=!0);var Gr=_t+Zt;if(Fe.rangebreaks&&Zt>0){for(var Or=84,Fr=0,Mn=0;Mn<Or;Mn++){var Wn=(Mn+.5)/Or;Fe.maskBreaks(_t*(1-Wn)+Wn*Gr)!==F&&Fr++}Zt*=Fr/Or,Zt||(We[kt].drop=!0),_r&&tr>P&&(Zt=tr)}(Zt>0||kt===0)&&(We[kt].periodX=_t+Zt/2)}}j.calcTicks=function(Fe,bt){j.prepTicks(Fe,bt);var kt=t.simpleMap(Fe.range,Fe.r2l,void 0,void 0,bt);if(Fe.tickmode==="array")return W(Fe);var _t=Q(kt),Rt=_t[0],Dt=_t[1],Ut=kt[1]<kt[0],Bt=Math.min(kt[0],kt[1]),tr=Math.max(kt[0],kt[1]),er=Fe.type==="log"&&!(a(Fe.dtick)||Fe.dtick.charAt(0)==="L"),Zt=Fe.ticklabelmode==="period";if(Fe._tmin=j.tickFirst(Fe,bt),Fe._tmin<Rt!==Ut)return[];(Fe.type==="category"||Fe.type==="multicategory")&&(Dt=Ut?Math.max(-.5,Dt):Math.min(Fe._categories.length-.5,Dt));var _r=Fe._tmin;Fe.rangebreaks&&Fe._tick0Init!==Fe.tick0&&(_r=nr(_r,Fe),Ut||(_r=j.tickIncrement(_r,Fe.dtick,!Ut,Fe.calendar))),Zt&&(_r=j.tickIncrement(_r,Fe.dtick,!Ut,Fe.calendar));for(var Gr=Math.max(1e3,Fe._length||0),Or=[],Fr=null;Ut?_r>=Dt:_r<=Dt;_r=j.tickIncrement(_r,Fe.dtick,Ut,Fe.calendar)){if(Fe.rangebreaks&&!Ut){if(_r<Rt)continue;if(Fe.maskBreaks(_r)===F&&nr(_r,Fe)>=tr)break}if(Or.length>Gr||_r===Fr)break;Fr=_r;var Mn=!1;er&&_r!==(_r|0)&&(Mn=!0),Or.push({minor:Mn,value:_r})}Zt&&pe(Or,Fe,Fe._definedDelta);var Wn;if(Fe.rangebreaks){var Tn=Fe._id.charAt(0)==="y",Nn=1;Fe.tickmode==="auto"&&(Nn=Fe.tickfont?Fe.tickfont.size:12);var jn=NaN;for(Wn=Or.length-1;Wn>-1;Wn--){if(Or[Wn].drop){Or.splice(Wn,1);continue}Or[Wn].value=nr(Or[Wn].value,Fe);var Nr=Fe.c2p(Or[Wn].value);(Tn?jn>Nr-Nn:jn<Nr+Nn)?Or.splice(Ut?Wn+1:Wn,1):jn=Nr}}Nt(Fe)&&Math.abs(kt[1]-kt[0])===360&&Or.pop(),Fe._tmax=(Or[Or.length-1]||{}).value,Fe._prevDateHead="",Fe._inCalcTicks=!0;var Pr=[],Ln,pn;for(Wn=0;Wn<Or.length;Wn++){var xn=Or[Wn].minor,en=Or[Wn].value;Ln=j.tickText(Fe,en,!1,xn),pn=Or[Wn].periodX,pn!==void 0&&(Ln.periodX=pn,(pn>tr||pn<Bt)&&(pn>tr&&(Ln.periodX=tr),pn<Bt&&(Ln.periodX=Bt),Ln.text=" ",Fe._prevDateHead="")),Pr.push(Ln)}return Fe._inCalcTicks=!1,Pr};function W(We){var Fe=We.tickvals,bt=We.ticktext,kt=new Array(Fe.length),_t=t.simpleMap(We.range,We.r2l),Rt=Q(_t),Dt=Math.min(Rt[0],Rt[1]),Ut=Math.max(Rt[0],Rt[1]),Bt=0;Array.isArray(bt)||(bt=[]);var tr=We.type==="category"?We.d2l_noadd:We.d2l;We.type==="log"&&String(We.dtick).charAt(0)!=="L"&&(We.dtick="L"+Math.pow(10,Math.floor(Math.min(We.range[0],We.range[1]))-1));for(var er=0;er<Fe.length;er++){var Zt=tr(Fe[er]);Zt>Dt&&Zt<Ut&&(bt[er]===void 0?kt[Bt]=j.tickText(We,Zt):kt[Bt]=Ce(We,Zt,String(bt[er])),Bt++)}return Bt<Fe.length&&kt.splice(Bt,Fe.length-Bt),We.rangebreaks&&(kt=kt.filter(function(_r){return We.maskBreaks(_r.x)!==F})),kt}var ue=[2,5,10],me=[1,2,3,6,12],be=[1,2,5,10,15,30],Me=[1,2,3,7,14],Pe=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ge=[-.301,0,.301,.699,1],ze=[15,30,45,90,180];function Qe(We,Fe,bt){return Fe*t.roundUp(We/Fe,bt)}j.autoTicks=function(We,Fe){var bt;function kt(er){return Math.pow(er,Math.floor(Math.log(Fe)/Math.LN10))}if(We.type==="date"){We.tick0=t.dateTick0(We.calendar,0);var _t=2*Fe;if(_t>g)Fe/=g,bt=kt(10),We.dtick="M"+12*Qe(Fe,bt,ue);else if(_t>T)Fe/=T,We.dtick="M"+Qe(Fe,1,me);else if(_t>L){We.dtick=Qe(Fe,L,We._hasDayOfWeekBreaks?[1,2,7,14]:Me);var Rt=j.getTickFormat(We),Dt=We.ticklabelmode==="period";Dt&&(We._rawTick0=We.tick0),/%[uVW]/.test(Rt)?We.tick0=t.dateTick0(We.calendar,2):We.tick0=t.dateTick0(We.calendar,1),Dt&&(We._dowTick0=We.tick0)}else _t>E?We.dtick=Qe(Fe,E,me):_t>k?We.dtick=Qe(Fe,k,be):_t>C?We.dtick=Qe(Fe,C,be):(bt=kt(10),We.dtick=Qe(Fe,bt,ue))}else if(We.type==="log"){We.tick0=0;var Ut=t.simpleMap(We.range,We.r2l);if(Fe>.7)We.dtick=Math.ceil(Fe);else if(Math.abs(Ut[1]-Ut[0])<1){var Bt=1.5*Math.abs((Ut[1]-Ut[0])/Fe);Fe=Math.abs(Math.pow(10,Ut[1])-Math.pow(10,Ut[0]))/Bt,bt=kt(10),We.dtick="L"+Qe(Fe,bt,ue)}else We.dtick=Fe>.3?"D2":"D1"}else We.type==="category"||We.type==="multicategory"?(We.tick0=0,We.dtick=Math.ceil(Math.max(Fe,1))):Nt(We)?(We.tick0=0,bt=1,We.dtick=Qe(Fe,bt,ze)):(We.tick0=0,bt=kt(10),We.dtick=Qe(Fe,bt,ue));if(We.dtick===0&&(We.dtick=1),!a(We.dtick)&&typeof We.dtick!="string"){var tr=We.dtick;throw We.dtick=1,"ax.dtick error: "+String(tr)}};function tt(We){var Fe=We.dtick;if(We._tickexponent=0,!a(Fe)&&typeof Fe!="string"&&(Fe=1),(We.type==="category"||We.type==="multicategory")&&(We._tickround=null),We.type==="date"){var bt=We.r2l(We.tick0),kt=We.l2r(bt).replace(/(^-|i)/g,""),_t=kt.length;if(String(Fe).charAt(0)==="M")_t>10||kt.substr(5)!=="01-01"?We._tickround="d":We._tickround=+Fe.substr(1)%12===0?"y":"m";else if(Fe>=L&&_t<=10||Fe>=L*15)We._tickround="d";else if(Fe>=k&&_t<=16||Fe>=E)We._tickround="M";else if(Fe>=C&&_t<=19||Fe>=k)We._tickround="S";else{var Rt=We.l2r(bt+Fe).replace(/^-/,"").length;We._tickround=Math.max(_t,Rt)-20,We._tickround<0&&(We._tickround=4)}}else if(a(Fe)||Fe.charAt(0)==="L"){var Dt=We.range.map(We.r2d||Number);a(Fe)||(Fe=Number(Fe.substr(1))),We._tickround=2-Math.floor(Math.log(Fe)/Math.LN10+.01);var Ut=Math.max(Math.abs(Dt[0]),Math.abs(Dt[1])),Bt=Math.floor(Math.log(Ut)/Math.LN10+.01),tr=We.minexponent===void 0?3:We.minexponent;Math.abs(Bt)>tr&&(Wt(We.exponentformat)&&!qt(Bt)?We._tickexponent=3*Math.round((Bt-1)/3):We._tickexponent=Bt)}else We._tickround=null}j.tickIncrement=function(We,Fe,bt,kt){var _t=bt?-1:1;if(a(Fe))return t.increment(We,_t*Fe);var Rt=Fe.charAt(0),Dt=_t*Number(Fe.substr(1));if(Rt==="M")return t.incrementMonth(We,Dt,kt);if(Rt==="L")return Math.log(Math.pow(10,We)+Dt)/Math.LN10;if(Rt==="D"){var Ut=Fe==="D2"?Ge:Pe,Bt=We+_t*.01,tr=t.roundUp(t.mod(Bt,1),Ut,bt);return Math.floor(Bt)+Math.log(r.round(Math.pow(10,tr),1))/Math.LN10}throw"unrecognized dtick "+String(Fe)},j.tickFirst=function(We,Fe){var bt=We.r2l||Number,kt=t.simpleMap(We.range,bt,void 0,void 0,Fe),_t=kt[1]<kt[0],Rt=_t?Math.floor:Math.ceil,Dt=Q(kt)[0],Ut=We.dtick,Bt=bt(We.tick0);if(a(Ut)){var tr=Rt((Dt-Bt)/Ut)*Ut+Bt;return(We.type==="category"||We.type==="multicategory")&&(tr=t.constrain(tr,0,We._categories.length-1)),tr}var er=Ut.charAt(0),Zt=Number(Ut.substr(1));if(er==="M"){for(var _r=0,Gr=Bt,Or,Fr,Mn;_r<10;){if(Or=j.tickIncrement(Gr,Ut,_t,We.calendar),(Or-Dt)*(Gr-Dt)<=0)return _t?Math.min(Gr,Or):Math.max(Gr,Or);Fr=(Dt-(Gr+Or)/2)/(Or-Gr),Mn=er+(Math.abs(Math.round(Fr))||1)*Zt,Gr=j.tickIncrement(Gr,Mn,Fr<0?!_t:_t,We.calendar),_r++}return t.error("tickFirst did not converge",We),Gr}else{if(er==="L")return Math.log(Rt((Math.pow(10,Dt)-Bt)/Zt)*Zt+Bt)/Math.LN10;if(er==="D"){var Wn=Ut==="D2"?Ge:Pe,Tn=t.roundUp(t.mod(Dt,1),Wn,_t);return Math.floor(Dt)+Math.log(r.round(Math.pow(10,Tn),1))/Math.LN10}else throw"unrecognized dtick "+String(Ut)}},j.tickText=function(We,Fe,bt,kt){var _t=Ce(We,Fe),Rt=We.tickmode==="array",Dt=bt||Rt,Ut=We.type,Bt=Ut==="category"?We.d2l_noadd:We.d2l,tr;if(Rt&&Array.isArray(We.ticktext)){var er=t.simpleMap(We.range,We.r2l),Zt=(Math.abs(er[1]-er[0])-(We._lBreaks||0))/1e4;for(tr=0;tr<We.ticktext.length&&!(Math.abs(Fe-Bt(We.tickvals[tr]))<Zt);tr++);if(tr<We.ticktext.length)return _t.text=String(We.ticktext[tr]),_t}function _r(Fr){if(Fr===void 0)return!0;if(bt)return Fr==="none";var Mn={first:We._tmin,last:We._tmax}[Fr];return Fr!=="all"&&Fe!==Mn}var Gr=bt?"never":We.exponentformat!=="none"&&_r(We.showexponent)?"hide":"";if(Ut==="date"?Ae(We,_t,bt,Dt):Ut==="log"?Be(We,_t,bt,Dt,Gr):Ut==="category"?qe(We,_t):Ut==="multicategory"?Tt(We,_t,bt):Nt(We)?Ne(We,_t,bt,Dt,Gr):At(We,_t,bt,Dt,Gr),kt||(We.tickprefix&&!_r(We.showtickprefix)&&(_t.text=We.tickprefix+_t.text),We.ticksuffix&&!_r(We.showticksuffix)&&(_t.text+=We.ticksuffix)),We.tickson==="boundaries"||We.showdividers){var Or=function(Fr){var Mn=We.l2p(Fr);return Mn>=0&&Mn<=We._length?Fr:null};_t.xbnd=[Or(_t.x-.5),Or(_t.x+We.dtick-.5)]}return _t},j.hoverLabelText=function(We,Fe,bt){if(bt!==F&&bt!==Fe)return j.hoverLabelText(We,Fe)+" - "+j.hoverLabelText(We,bt);var kt=We.type==="log"&&Fe<=0,_t=j.tickText(We,We.c2l(kt?-Fe:Fe),"hover").text;return kt?Fe===0?"0":D+_t:_t};function Ce(We,Fe,bt){var kt=We.tickfont||{};return{x:Fe,dx:0,dy:0,text:bt||"",fontSize:kt.size,font:kt.family,fontColor:kt.color}}function Ae(We,Fe,bt,kt){var _t=We._tickround,Rt=bt&&We.hoverformat||j.getTickFormat(We);kt&&(a(_t)?_t=4:_t={y:"m",m:"d",d:"M",M:"S",S:4}[_t]);var Dt=t.formatDate(Fe.x,Rt,_t,We._dateFormat,We.calendar,We._extraFormat),Ut,Bt=Dt.indexOf(`
`);if(Bt!==-1&&(Ut=Dt.substr(Bt+1),Dt=Dt.substr(0,Bt)),kt&&(Dt==="00:00:00"||Dt==="00:00"?(Dt=Ut,Ut=""):Dt.length===8&&(Dt=Dt.replace(/:00$/,""))),Ut)if(bt)_t==="d"?Dt+=", "+Ut:Dt=Ut+(Dt?", "+Dt:"");else if(!We._inCalcTicks||We._prevDateHead!==Ut)We._prevDateHead=Ut,Dt+="<br>"+Ut;else{var tr=(We.ticklabelposition||"").indexOf("inside")!==-1,er=We._realSide||We.side;(!tr&&er==="top"||tr&&er==="bottom")&&(Dt+="<br> ")}Fe.text=Dt}function Be(We,Fe,bt,kt,_t){var Rt=We.dtick,Dt=Fe.x,Ut=We.tickformat,Bt=typeof Rt=="string"&&Rt.charAt(0);if(_t==="never"&&(_t=""),kt&&Bt!=="L"&&(Rt="L3",Bt="L"),Ut||Bt==="L")Fe.text=zt(Math.pow(10,Dt),We,_t,kt);else if(a(Rt)||Bt==="D"&&t.mod(Dt+.01,1)<.1){var tr=Math.round(Dt),er=Math.abs(tr),Zt=We.exponentformat;Zt==="power"||Wt(Zt)&&qt(tr)?(tr===0?Fe.text=1:tr===1?Fe.text="10":Fe.text="10<sup>"+(tr>1?"":D)+er+"</sup>",Fe.fontSize*=1.25):(Zt==="e"||Zt==="E")&&er>2?Fe.text="1"+Zt+(tr>0?"+":D)+er:(Fe.text=zt(Math.pow(10,Dt),We,"","fakehover"),Rt==="D1"&&We._id.charAt(0)==="y"&&(Fe.dy-=Fe.fontSize/6))}else if(Bt==="D")Fe.text=String(Math.round(Math.pow(10,t.mod(Dt,1)))),Fe.fontSize*=.75;else throw"unrecognized dtick "+String(Rt);if(We.dtick==="D1"){var _r=String(Fe.text).charAt(0);(_r==="0"||_r==="1")&&(We._id.charAt(0)==="y"?Fe.dx-=Fe.fontSize/4:(Fe.dy+=Fe.fontSize/2,Fe.dx+=(We.range[1]>We.range[0]?1:-1)*Fe.fontSize*(Dt<0?.5:.25)))}}function qe(We,Fe){var bt=We._categories[Math.round(Fe.x)];bt===void 0&&(bt=""),Fe.text=String(bt)}function Tt(We,Fe,bt){var kt=Math.round(Fe.x),_t=We._categories[kt]||[],Rt=_t[1]===void 0?"":String(_t[1]),Dt=_t[0]===void 0?"":String(_t[0]);bt?Fe.text=Dt+" - "+Rt:(Fe.text=Rt,Fe.text2=Dt)}function At(We,Fe,bt,kt,_t){_t==="never"?_t="":We.showexponent==="all"&&Math.abs(Fe.x/We.dtick)<1e-6&&(_t="hide"),Fe.text=zt(Fe.x,We,_t,kt)}function Ne(We,Fe,bt,kt,_t){if(We.thetaunit==="radians"&&!bt){var Rt=Fe.x/180;if(Rt===0)Fe.text="0";else{var Dt=ct(Rt);if(Dt[1]>=100)Fe.text=zt(t.deg2rad(Fe.x),We,_t,kt);else{var Ut=Fe.x<0;Dt[1]===1?Dt[0]===1?Fe.text="\u03C0":Fe.text=Dt[0]+"\u03C0":Fe.text=["<sup>",Dt[0],"</sup>","\u2044","<sub>",Dt[1],"</sub>","\u03C0"].join(""),Ut&&(Fe.text=D+Fe.text)}}}else Fe.text=zt(Fe.x,We,_t,kt)}function ct(We){function Fe(Ut,Bt){return Math.abs(Ut-Bt)<=1e-6}function bt(Ut,Bt){return Fe(Bt,0)?Ut:bt(Bt,Ut%Bt)}function kt(Ut){for(var Bt=1;!Fe(Math.round(Ut*Bt)/Bt,Ut);)Bt*=10;return Bt}var _t=kt(We),Rt=We*_t,Dt=Math.abs(bt(Rt,_t));return[Math.round(Rt/Dt),Math.round(_t/Dt)]}var Mt=["f","p","n","\u03BC","m","","k","M","G","T"];function Wt(We){return We==="SI"||We==="B"}function qt(We){return We>14||We<-15}function zt(We,Fe,bt,kt){var _t=We<0,Rt=Fe._tickround,Dt=bt||Fe.exponentformat||"B",Ut=Fe._tickexponent,Bt=j.getTickFormat(Fe),tr=Fe.separatethousands;if(kt){var er={exponentformat:Dt,minexponent:Fe.minexponent,dtick:Fe.showexponent==="none"?Fe.dtick:a(We)&&Math.abs(We)||1,range:Fe.showexponent==="none"?Fe.range.map(Fe.r2d):[0,We||1]};tt(er),Rt=(Number(er._tickround)||0)+4,Ut=er._tickexponent,Fe.hoverformat&&(Bt=Fe.hoverformat)}if(Bt)return Fe._numFormat(Bt)(We).replace(/-/g,D);var Zt=Math.pow(10,-Rt)/2;if(Dt==="none"&&(Ut=0),We=Math.abs(We),We<Zt)We="0",_t=!1;else{if(We+=Zt,Ut&&(We*=Math.pow(10,-Ut),Rt+=Ut),Rt===0)We=String(Math.floor(We));else if(Rt<0){We=String(Math.round(We)),We=We.substr(0,We.length+Rt);for(var _r=Rt;_r<0;_r++)We+="0"}else{We=String(We);var Gr=We.indexOf(".")+1;Gr&&(We=We.substr(0,Gr+Rt).replace(/\.?0+$/,""))}We=t.numSeparate(We,Fe._separators,tr)}if(Ut&&Dt!=="hide"){Wt(Dt)&&qt(Ut)&&(Dt="power");var Or;Ut<0?Or=D+-Ut:Dt!=="power"?Or="+"+Ut:Or=String(Ut),Dt==="e"||Dt==="E"?We+=Dt+Or:Dt==="power"?We+="\xD710<sup>"+Or+"</sup>":Dt==="B"&&Ut===9?We+="B":Wt(Dt)&&(We+=Mt[Ut/3+5])}return _t?D+We:We}j.getTickFormat=function(We){var Fe;function bt(Bt){return typeof Bt!="string"?Bt:Number(Bt.replace("M",""))*T}function kt(Bt,tr){var er=["L","D"];if(typeof Bt==typeof tr){if(typeof Bt=="number")return Bt-tr;var Zt=er.indexOf(Bt.charAt(0)),_r=er.indexOf(tr.charAt(0));return Zt===_r?Number(Bt.replace(/(L|D)/g,""))-Number(tr.replace(/(L|D)/g,"")):Zt-_r}else return typeof Bt=="number"?1:-1}function _t(Bt,tr,er){var Zt=er||function(Or){return Or},_r=tr[0],Gr=tr[1];return(!_r&&typeof _r!="number"||Zt(_r)<=Zt(Bt))&&(!Gr&&typeof Gr!="number"||Zt(Gr)>=Zt(Bt))}function Rt(Bt,tr){var er=tr[0]===null,Zt=tr[1]===null,_r=kt(Bt,tr[0])>=0,Gr=kt(Bt,tr[1])<=0;return(er||_r)&&(Zt||Gr)}var Dt,Ut;if(We.tickformatstops&&We.tickformatstops.length>0)switch(We.type){case"date":case"linear":{for(Fe=0;Fe<We.tickformatstops.length;Fe++)if(Ut=We.tickformatstops[Fe],Ut.enabled&&_t(We.dtick,Ut.dtickrange,bt)){Dt=Ut;break}break}case"log":{for(Fe=0;Fe<We.tickformatstops.length;Fe++)if(Ut=We.tickformatstops[Fe],Ut.enabled&&Rt(We.dtick,Ut.dtickrange)){Dt=Ut;break}break}}return Dt?Dt.value:We.tickformat},j.getSubplots=function(We,Fe){var bt=We._fullLayout._subplots,kt=bt.cartesian.concat(bt.gl2d||[]),_t=Fe?j.findSubplotsWithAxis(kt,Fe):kt;return _t.sort(function(Rt,Dt){var Ut=Rt.substr(1).split("y"),Bt=Dt.substr(1).split("y");return Ut[0]===Bt[0]?+Ut[1]-+Bt[1]:+Ut[0]-+Bt[0]}),_t},j.findSubplotsWithAxis=function(We,Fe){for(var bt=new RegExp(Fe._id.charAt(0)==="x"?"^"+Fe._id+"y":Fe._id+"$"),kt=[],_t=0;_t<We.length;_t++){var Rt=We[_t];bt.test(Rt)&&kt.push(Rt)}return kt},j.makeClipPaths=function(We){var Fe=We._fullLayout;if(!Fe._hasOnlyLargeSploms){var bt={_offset:0,_length:Fe.width,_id:""},kt={_offset:0,_length:Fe.height,_id:""},_t=j.list(We,"x",!0),Rt=j.list(We,"y",!0),Dt=[],Ut,Bt;for(Ut=0;Ut<_t.length;Ut++)for(Dt.push({x:_t[Ut],y:kt}),Bt=0;Bt<Rt.length;Bt++)Ut===0&&Dt.push({x:bt,y:Rt[Bt]}),Dt.push({x:_t[Ut],y:Rt[Bt]});var tr=Fe._clips.selectAll(".axesclip").data(Dt,function(er){return er.x._id+er.y._id});tr.enter().append("clipPath").classed("axesclip",!0).attr("id",function(er){return"clip"+Fe._uid+er.x._id+er.y._id}).append("rect"),tr.exit().remove(),tr.each(function(er){r.select(this).select("rect").attr({x:er.x._offset||0,y:er.y._offset||0,width:er.x._length||1,height:er.y._length||1})})}},j.draw=function(We,Fe,bt){var kt=We._fullLayout;Fe==="redraw"&&kt._paper.selectAll("g.subplot").each(function(Rt){var Dt=Rt[0],Ut=kt._plots[Dt];if(Ut){var Bt=Ut.xaxis,tr=Ut.yaxis;Ut.xaxislayer.selectAll("."+Bt._id+"tick").remove(),Ut.yaxislayer.selectAll("."+tr._id+"tick").remove(),Ut.xaxislayer.selectAll("."+Bt._id+"tick2").remove(),Ut.yaxislayer.selectAll("."+tr._id+"tick2").remove(),Ut.xaxislayer.selectAll("."+Bt._id+"divider").remove(),Ut.yaxislayer.selectAll("."+tr._id+"divider").remove(),Ut.gridlayer&&Ut.gridlayer.selectAll("path").remove(),Ut.zerolinelayer&&Ut.zerolinelayer.selectAll("path").remove(),kt._infolayer.select(".g-"+Bt._id+"title").remove(),kt._infolayer.select(".g-"+tr._id+"title").remove()}});var _t=!Fe||Fe==="redraw"?j.listIds(We):Fe;return t.syncOrAsync(_t.map(function(Rt){return function(){if(!!Rt){var Dt=j.getFromId(We,Rt),Ut=j.drawOne(We,Dt,bt);return Dt._r=Dt.range.slice(),Dt._rl=t.simpleMap(Dt._r,Dt.r2l),Ut}}}))},j.drawOne=function(We,Fe,bt){bt=bt||{};var kt,_t,Rt;Fe.setScale();var Dt=We._fullLayout,Ut=Fe._id,Bt=Ut.charAt(0),tr=j.counterLetter(Ut),er=Dt._plots[Fe._mainSubplot];if(!er)return;var Zt=er[Bt+"axislayer"],_r=Fe._mainLinePosition,Gr=Fe._mainMirrorPosition,Or=Fe._vals=j.calcTicks(Fe),Fr=[Fe.mirror,_r,Gr].join("_");for(kt=0;kt<Or.length;kt++)Or[kt].axInfo=Fr;Fe._selections={},Fe._tickAngles&&(Fe._prevTickAngles=Fe._tickAngles),Fe._tickAngles={},Fe._depth=null;var Mn={};function Wn(dr){var nn=Ut+(dr||"tick");return Mn[nn]||(Mn[nn]=Ct(Fe,nn)),Mn[nn]}if(!!Fe.visible){var Tn=j.makeTransTickFn(Fe),Nn=j.makeTransTickLabelFn(Fe),jn,Nr,Pr=Fe.ticks==="inside",Ln=Fe.ticks==="outside";if(Fe.tickson==="boundaries"){var pn=$t(Fe,Or);Nr=j.clipEnds(Fe,pn),jn=Pr?Nr:pn}else Nr=j.clipEnds(Fe,Or),jn=Pr&&Fe.ticklabelmode!=="period"?Nr:Or;var xn=Fe._gridVals=Nr,en=Lt(Fe,Or);if(!Dt._hasOnlyLargeSploms){var _n=Fe._subplotsWith,kn={};for(kt=0;kt<_n.length;kt++){_t=_n[kt],Rt=Dt._plots[_t];var ln=Rt[tr+"axis"],vt=ln._mainAxis._id;if(!kn[vt]){kn[vt]=1;var Gt=Bt==="x"?"M0,"+ln._offset+"v"+ln._length:"M"+ln._offset+",0h"+ln._length;j.drawGrid(We,Fe,{vals:xn,counterAxis:ln,layer:Rt.gridlayer.select("."+Ut),path:Gt,transFn:Tn}),j.drawZeroLine(We,Fe,{counterAxis:ln,layer:Rt.zerolinelayer,path:Gt,transFn:Tn})}}}var fr=j.getTickSigns(Fe),Cr=[];if(Fe.ticks){var Wr=j.makeTickPath(Fe,_r,fr[2]),Vr,Qr;Fe._anchorAxis&&Fe.mirror&&Fe.mirror!==!0?(Vr=j.makeTickPath(Fe,Gr,fr[3]),Qr=Wr+Vr):(Vr="",Qr=Wr);var Hr;if(Fe.showdividers&&Ln&&Fe.tickson==="boundaries"){var En={};for(kt=0;kt<en.length;kt++)En[en[kt].x]=1;Hr=function(dr){return En[dr.x]?Vr:Qr}}else Hr=Qr;j.drawTicks(We,Fe,{vals:jn,layer:Zt,path:Hr,transFn:Tn}),Fe.mirror==="allticks"&&(Cr=Object.keys(Fe._linepositions||{}))}for(kt=0;kt<Cr.length;kt++){_t=Cr[kt],Rt=Dt._plots[_t];var ta=Fe._linepositions[_t]||[],ea=j.makeTickPath(Fe,ta[0],fr[0])+j.makeTickPath(Fe,ta[1],fr[1]);j.drawTicks(We,Fe,{vals:jn,layer:Rt[Bt+"axislayer"],path:ea,transFn:Tn})}var ba=[];if(ba.push(function(){return j.drawLabels(We,Fe,{vals:Or,layer:Zt,transFn:Nn,labelFns:j.makeLabelFns(Fe,_r)})}),Fe.type==="multicategory"){var Wa={x:2,y:10}[Bt];ba.push(function(){var dr={x:"height",y:"width"}[Bt],nn=Wn()[dr]+Wa+(Fe._tickAngles[Ut+"tick"]?Fe.tickfont.size*X:0);return j.drawLabels(We,Fe,{vals:rr(Fe,Or),layer:Zt,cls:Ut+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Tn,labelFns:j.makeLabelFns(Fe,_r+nn*fr[4])})}),ba.push(function(){return Fe._depth=fr[4]*(Wn("tick2")[Fe.side]-_r),Le(We,Fe,{vals:en,layer:Zt,path:j.makeTickPath(Fe,_r,fr[4],Fe._depth),transFn:Tn})})}else Fe.title.hasOwnProperty("standoff")&&ba.push(function(){Fe._depth=fr[4]*(Wn()[Fe.side]-_r)});var qa=c.getComponentMethod("rangeslider","isVisible")(Fe);return ba.push(function(){var dr=Fe.side.charAt(0),nn=z[Fe.side].charAt(0),Jr=j.getPxPosition(We,Fe),Pn=Ln?Fe.ticklen:0,Gn,ka,ca,Ta;if((Fe.automargin||qa)&&(Fe.type==="multicategory"?Gn=Wn("tick2"):(Gn=Wn(),Bt==="x"&&dr==="b"&&(Fe._depth=Math.max(Gn.width>0?Gn.bottom-Jr:0,Pn)))),Fe.automargin){ka={x:0,y:0,r:0,l:0,t:0,b:0};var Aa=[0,1];if(Bt==="x"){if(dr==="b"?ka[dr]=Fe._depth:(ka[dr]=Fe._depth=Math.max(Gn.width>0?Jr-Gn.top:0,Pn),Aa.reverse()),Gn.width>0){var Ya=Gn.right-(Fe._offset+Fe._length);Ya>0&&(ka.xr=1,ka.r=Ya);var Xt=Fe._offset-Gn.left;Xt>0&&(ka.xl=0,ka.l=Xt)}}else if(dr==="l"?ka[dr]=Fe._depth=Math.max(Gn.height>0?Jr-Gn.left:0,Pn):(ka[dr]=Fe._depth=Math.max(Gn.height>0?Gn.right-Jr:0,Pn),Aa.reverse()),Gn.height>0){var yr=Gn.bottom-(Fe._offset+Fe._length);yr>0&&(ka.yb=0,ka.b=yr);var Yr=Fe._offset-Gn.top;Yr>0&&(ka.yt=1,ka.t=Yr)}ka[tr]=Fe.anchor==="free"?Fe.position:Fe._anchorAxis.domain[Aa[0]],Fe.title.text!==Dt._dfltTitle[Bt]&&(ka[dr]+=Ue(Fe)+(Fe.title.standoff||0)),Fe.mirror&&Fe.anchor!=="free"&&(ca={x:0,y:0,r:0,l:0,t:0,b:0},ca[nn]=Fe.linewidth,Fe.mirror&&Fe.mirror!==!0&&(ca[nn]+=Pn),Fe.mirror===!0||Fe.mirror==="ticks"?ca[tr]=Fe._anchorAxis.domain[Aa[1]]:(Fe.mirror==="all"||Fe.mirror==="allticks")&&(ca[tr]=[Fe._counterDomainMin,Fe._counterDomainMax][Aa[1]]))}qa&&(Ta=c.getComponentMethod("rangeslider","autoMarginOpts")(We,Fe)),u.autoMargin(We,ft(Fe),ka),u.autoMargin(We,it(Fe),ca),u.autoMargin(We,je(Fe),Ta)}),!bt.skipTitle&&!(qa&&Fe.side==="bottom")&&ba.push(function(){return et(We,Fe)}),t.syncOrAsync(ba)}};function $t(We,Fe){var bt=[],kt,_t=function(Rt,Dt){var Ut=Rt.xbnd[Dt];Ut!==null&&bt.push(t.extendFlat({},Rt,{x:Ut}))};if(Fe.length){for(kt=0;kt<Fe.length;kt++)_t(Fe[kt],0);_t(Fe[kt-1],1)}return bt}function rr(We,Fe){for(var bt=[],kt={},_t=0;_t<Fe.length;_t++){var Rt=Fe[_t];kt[Rt.text2]?kt[Rt.text2].push(Rt.x):kt[Rt.text2]=[Rt.x]}for(var Dt in kt)bt.push(Ce(We,t.interp(kt[Dt],.5),Dt));return bt}function Lt(We,Fe){var bt=[],kt,_t,Rt=Fe.length&&Fe[Fe.length-1].x<Fe[0].x,Dt=function(Bt,tr){var er=Bt.xbnd[tr];er!==null&&bt.push(t.extendFlat({},Bt,{x:er}))};if(We.showdividers&&Fe.length){for(kt=0;kt<Fe.length;kt++){var Ut=Fe[kt];Ut.text2!==_t&&Dt(Ut,Rt?1:0),_t=Ut.text2}Dt(Fe[kt-1],Rt?0:1)}return bt}function Ct(We,Fe){var bt,kt,_t,Rt;return We._selections[Fe].size()?(bt=1/0,kt=-1/0,_t=1/0,Rt=-1/0,We._selections[Fe].each(function(){var Dt=Ye(this),Ut=h.bBox(Dt.node().parentNode);bt=Math.min(bt,Ut.top),kt=Math.max(kt,Ut.bottom),_t=Math.min(_t,Ut.left),Rt=Math.max(Rt,Ut.right)})):(bt=0,kt=0,_t=0,Rt=0),{top:bt,bottom:kt,left:_t,right:Rt,height:kt-bt,width:Rt-_t}}j.getTickSigns=function(We){var Fe=We._id.charAt(0),bt={x:"top",y:"right"}[Fe],kt=We.side===bt?1:-1,_t=[-1,1,kt,-kt];return We.ticks!=="inside"==(Fe==="x")&&(_t=_t.map(function(Rt){return-Rt})),We.side&&_t.push({l:-1,t:-1,r:1,b:1}[We.side.charAt(0)]),_t},j.makeTransTickFn=function(We){return We._id.charAt(0)==="x"?function(Fe){return f(We._offset+We.l2p(Fe.x),0)}:function(Fe){return f(0,We._offset+We.l2p(Fe.x))}},j.makeTransTickLabelFn=function(We){var Fe=lt(We),bt=Fe[0],kt=Fe[1];return We._id.charAt(0)==="x"?function(_t){return f(bt+We._offset+We.l2p(dt(_t)),kt)}:function(_t){return f(kt,bt+We._offset+We.l2p(dt(_t)))}};function dt(We){return We.periodX!==void 0?We.periodX:We.x}function lt(We){var Fe=We.ticklabelposition||"",bt=function(Gr){return Fe.indexOf(Gr)!==-1},kt=bt("top"),_t=bt("left"),Rt=bt("right"),Dt=bt("bottom"),Ut=bt("inside"),Bt=Dt||_t||kt||Rt;if(!Bt&&!Ut)return[0,0];var tr=We.side,er=Bt?(We.tickwidth||0)/2:0,Zt=B,_r=We.tickfont?We.tickfont.size:12;return(Dt||kt)&&(er+=_r*U,Zt+=(We.linewidth||0)/2),(_t||Rt)&&(er+=(We.linewidth||0)/2,Zt+=B),Ut&&tr==="top"&&(Zt-=_r*(1-U)),(_t||kt)&&(er=-er),(tr==="bottom"||tr==="right")&&(Zt=-Zt),[Bt?er:0,Ut?Zt:0]}j.makeTickPath=function(We,Fe,bt,kt){kt=kt!==void 0?kt:We.ticklen;var _t=We._id.charAt(0),Rt=(We.linewidth||1)/2;return _t==="x"?"M0,"+(Fe+Rt*bt)+"v"+kt*bt:"M"+(Fe+Rt*bt)+",0h"+kt*bt},j.makeLabelFns=function(We,Fe,bt){var kt=We.ticklabelposition||"",_t=function(kn){return kt.indexOf(kn)!==-1},Rt=_t("top"),Dt=_t("left"),Ut=_t("right"),Bt=_t("bottom"),tr=Bt||Dt||Rt||Ut,er=_t("inside"),Zt=kt==="inside"&&We.ticks==="inside"||!er&&We.ticks==="outside"&&We.tickson!=="boundaries",_r=0,Gr=0,Or=Zt?We.ticklen:0;if(er?Or*=-1:tr&&(Or=0),Zt&&(_r+=Or,bt)){var Fr=t.deg2rad(bt);_r=Or*Math.cos(Fr)+1,Gr=Or*Math.sin(Fr)}We.showticklabels&&(Zt||We.showline)&&(_r+=.2*We.tickfont.size),_r+=(We.linewidth||1)/2*(er?-1:1);var Mn={labelStandoff:_r,labelShift:Gr},Wn,Tn,Nn,jn,Nr=0,Pr=We.side,Ln=We._id.charAt(0),pn=We.tickangle,xn;if(Ln==="x")xn=!er&&Pr==="bottom"||er&&Pr==="top",jn=xn?1:-1,er&&(jn*=-1),Wn=Gr*jn,Tn=Fe+_r*jn,Nn=xn?1:-.2,Math.abs(pn)===90&&(er?Nn+=G:pn===-90&&Pr==="bottom"?Nn=U:pn===90&&Pr==="top"?Nn=G:Nn=.5,Nr=G/2*(pn/90)),Mn.xFn=function(kn){return kn.dx+Wn+Nr*kn.fontSize},Mn.yFn=function(kn){return kn.dy+Tn+kn.fontSize*Nn},Mn.anchorFn=function(kn,ln){if(tr){if(Dt)return"end";if(Ut)return"start"}return!a(ln)||ln===0||ln===180?"middle":ln*jn<0!==er?"end":"start"},Mn.heightFn=function(kn,ln,vt){return ln<-60||ln>60?-.5*vt:We.side==="top"!==er?-vt:0};else if(Ln==="y"){if(xn=!er&&Pr==="left"||er&&Pr==="right",jn=xn?1:-1,er&&(jn*=-1),Wn=_r,Tn=Gr*jn,Nn=0,!er&&Math.abs(pn)===90&&(pn===-90&&Pr==="left"||pn===90&&Pr==="right"?Nn=U:Nn=.5),er){var en=a(pn)?+pn:0;if(en!==0){var _n=t.deg2rad(en);Nr=Math.abs(Math.sin(_n))*U*jn,Nn=0}}Mn.xFn=function(kn){return kn.dx+Fe-(Wn+kn.fontSize*Nn)*jn+Nr*kn.fontSize},Mn.yFn=function(kn){return kn.dy+Tn+kn.fontSize*G},Mn.anchorFn=function(kn,ln){return a(ln)&&Math.abs(ln)===90?"middle":xn?"end":"start"},Mn.heightFn=function(kn,ln,vt){return We.side==="right"&&(ln*=-1),ln<-30?-vt:ln<30?-.5*vt:0}}return Mn};function Te(We){return[We.text,We.x,We.axInfo,We.font,We.fontSize,We.fontColor].join("_")}j.drawTicks=function(We,Fe,bt){bt=bt||{};var kt=Fe._id+"tick",_t=bt.vals;Fe.ticklabelmode==="period"&&(_t=_t.slice(),_t.shift());var Rt=bt.layer.selectAll("path."+kt).data(Fe.ticks?_t:[],Te);Rt.exit().remove(),Rt.enter().append("path").classed(kt,1).classed("ticks",1).classed("crisp",bt.crisp!==!1).call(l.stroke,Fe.tickcolor).style("stroke-width",h.crispRound(We,Fe.tickwidth,1)+"px").attr("d",bt.path),Rt.attr("transform",bt.transFn)},j.drawGrid=function(We,Fe,bt){bt=bt||{};var kt=Fe._id+"grid",_t=bt.vals,Rt=bt.counterAxis;if(Fe.showgrid===!1)_t=[];else if(Rt&&j.shouldShowZeroLine(We,Fe,Rt))for(var Dt=Fe.tickmode==="array",Ut=0;Ut<_t.length;Ut++){var Bt=_t[Ut].x;if(Dt?!Bt:Math.abs(Bt)<Fe.dtick/100)if(_t=_t.slice(0,Ut).concat(_t.slice(Ut+1)),Dt)Ut--;else break}var tr=bt.layer.selectAll("path."+kt).data(_t,Te);tr.exit().remove(),tr.enter().append("path").classed(kt,1).classed("crisp",bt.crisp!==!1),Fe._gw=h.crispRound(We,Fe.gridwidth,1),tr.attr("transform",bt.transFn).attr("d",bt.path).call(l.stroke,Fe.gridcolor||"#ddd").style("stroke-width",Fe._gw+"px"),typeof bt.path=="function"&&tr.attr("d",bt.path)},j.drawZeroLine=function(We,Fe,bt){bt=bt||bt;var kt=Fe._id+"zl",_t=j.shouldShowZeroLine(We,Fe,bt.counterAxis),Rt=bt.layer.selectAll("path."+kt).data(_t?[{x:0,id:Fe._id}]:[]);Rt.exit().remove(),Rt.enter().append("path").classed(kt,1).classed("zl",1).classed("crisp",bt.crisp!==!1).each(function(){bt.layer.selectAll("path").sort(function(Dt,Ut){return te(Dt.id,Ut.id)})}),Rt.attr("transform",bt.transFn).attr("d",bt.path).call(l.stroke,Fe.zerolinecolor||l.defaultLine).style("stroke-width",h.crispRound(We,Fe.zerolinewidth,Fe._gw||1)+"px")},j.drawLabels=function(We,Fe,bt){bt=bt||{};var kt=We._fullLayout,_t=Fe._id,Rt=_t.charAt(0),Dt=bt.cls||_t+"tick",Ut=bt.vals,Bt=bt.labelFns,tr=bt.secondary?0:Fe.tickangle,er=(Fe._prevTickAngles||{})[Dt],Zt=bt.layer.selectAll("g."+Dt).data(Fe.showticklabels?Ut:[],Te),_r=[];Zt.enter().append("g").classed(Dt,1).append("text").attr("text-anchor","middle").each(function(jn){var Nr=r.select(this),Pr=We._promises.length;Nr.call(n.positionText,Bt.xFn(jn),Bt.yFn(jn)).call(h.font,jn.font,jn.fontSize,jn.fontColor).text(jn.text).call(n.convertToTspans,We),We._promises[Pr]?_r.push(We._promises.pop().then(function(){Gr(Nr,tr)})):Gr(Nr,tr)}),Zt.exit().remove(),bt.repositionOnUpdate&&Zt.each(function(jn){r.select(this).select("text").call(n.positionText,Bt.xFn(jn),Bt.yFn(jn))});function Gr(jn,Nr){var Pr=(Fe.ticklabelposition||"").indexOf("inside")!==-1;jn.each(function(Ln){var pn=r.select(this),xn=pn.select(".text-math-group"),en=Bt.anchorFn(Ln,Nr),_n=bt.transFn.call(pn.node(),Ln)+(a(Nr)&&+Nr!=0?" rotate("+Nr+","+Bt.xFn(Ln)+","+(Bt.yFn(Ln)-Ln.fontSize/2)+")":""),kn=n.lineCount(pn),ln=X*Ln.fontSize,vt=Bt.heightFn(Ln,a(Nr)?+Nr:0,(kn-1)*ln);if(vt&&(_n+=f(0,vt)),xn.empty()){var Gt=pn.select("text");Gt.attr({transform:_n,"text-anchor":en}),Pr&&(Gt.style({opacity:100}),Fe._hideOutOfRangeInsideTickLabels&&Fe._hideOutOfRangeInsideTickLabels())}else{var fr=h.bBox(xn.node()).width,Cr=fr*{end:-.5,start:.5}[en];xn.attr("transform",_n+f(Cr,0))}})}Fe._hideOutOfRangeInsideTickLabels=void 0,(Fe.ticklabelposition||"").indexOf("inside")!==-1&&(Fe._hideOutOfRangeInsideTickLabels=function(){var jn=t.simpleMap(Fe.range,Fe.r2l),Nr=Fe.l2p(jn[0]),Pr=Fe.l2p(jn[1]),Ln=Math.min(Nr,Pr)+Fe._offset,pn=Math.max(Nr,Pr)+Fe._offset,xn=Fe._id.charAt(0)==="x";Zt.each(function(en){var _n=r.select(this),kn=_n.select(".text-math-group");if(kn.empty()){var ln=h.bBox(_n.node()),vt=!1;xn?(ln.right>pn||ln.left<Ln)&&(vt=!0):(ln.bottom>pn||ln.top+(Fe.tickangle?0:en.fontSize/4)<Ln)&&(vt=!0),vt&&_n.select("text").style({opacity:0})}})}),Gr(Zt,er+1?er:tr);function Or(){return _r.length&&Promise.all(_r)}var Fr=null;function Mn(){if(Gr(Zt,tr),Ut.length&&Rt==="x"&&!a(tr)&&(Fe.type!=="log"||String(Fe.dtick).charAt(0)!=="D")){Fr=0;var jn=0,Nr=[],Pr;if(Zt.each(function(Hr){jn=Math.max(jn,Hr.fontSize);var En=Fe.l2p(Hr.x),ta=Ye(this),ea=h.bBox(ta.node());Nr.push({top:0,bottom:10,height:10,left:En-ea.width/2,right:En+ea.width/2+2,width:ea.width+2})}),(Fe.tickson==="boundaries"||Fe.showdividers)&&!bt.secondary){var Ln=2;for(Fe.ticks&&(Ln+=Fe.tickwidth/2),Pr=0;Pr<Nr.length;Pr++){var pn=Ut[Pr].xbnd,xn=Nr[Pr];if(pn[0]!==null&&xn.left-Fe.l2p(pn[0])<Ln||pn[1]!==null&&Fe.l2p(pn[1])-xn.right<Ln){Fr=90;break}}}else{var en=Ut.length,_n=Math.abs((Ut[en-1].x-Ut[0].x)*Fe._m)/(en-1),kn=Fe.ticklabelposition||"",ln=function(Hr){return kn.indexOf(Hr)!==-1},vt=ln("top"),Gt=ln("left"),fr=ln("right"),Cr=ln("bottom"),Wr=Cr||Gt||vt||fr,Vr=Wr?(Fe.tickwidth||0)+2*B:0,Qr=_n<jn*2.5||Fe.type==="multicategory";for(Pr=0;Pr<Nr.length-1;Pr++)if(t.bBoxIntersect(Nr[Pr],Nr[Pr+1],Vr)){Fr=Qr?90:30;break}}Fr&&Gr(Zt,Fr)}}Fe._selections&&(Fe._selections[Dt]=Zt);var Wn=[Or];Fe.automargin&&kt._redrawFromAutoMarginCount&&er===90?(Fr=90,Wn.push(function(){Gr(Zt,er)})):Wn.push(Mn),Fe._tickAngles&&Wn.push(function(){Fe._tickAngles[Dt]=Fr===null?a(tr)?tr:0:Fr});var Tn=Fe._anchorAxis;Tn&&Tn.autorange&&(Fe.ticklabelposition||"").indexOf("inside")!==-1&&!$(kt,Fe._id)&&(kt._insideTickLabelsAutorange||(kt._insideTickLabelsAutorange={}),kt._insideTickLabelsAutorange[Tn._name+".autorange"]=Tn.autorange,Wn.push(function(){Zt.each(function(Nr,Pr){var Ln=Ye(this);Fe._vals[Pr].bb=h.bBox(Ln.node())})}));var Nn=t.syncOrAsync(Wn);return Nn&&Nn.then&&We._promises.push(Nn),Nn};function Le(We,Fe,bt){var kt=Fe._id+"divider",_t=bt.vals,Rt=bt.layer.selectAll("path."+kt).data(_t,Te);Rt.exit().remove(),Rt.enter().insert("path",":first-child").classed(kt,1).classed("crisp",1).call(l.stroke,Fe.dividercolor).style("stroke-width",h.crispRound(We,Fe.dividerwidth,1)+"px"),Rt.attr("transform",bt.transFn).attr("d",bt.path)}j.getPxPosition=function(We,Fe){var bt=We._fullLayout._size,kt=Fe._id.charAt(0),_t=Fe.side,Rt;if(Fe.anchor!=="free"?Rt=Fe._anchorAxis:kt==="x"?Rt={_offset:bt.t+(1-(Fe.position||0))*bt.h,_length:0}:kt==="y"&&(Rt={_offset:bt.l+(Fe.position||0)*bt.w,_length:0}),_t==="top"||_t==="left")return Rt._offset;if(_t==="bottom"||_t==="right")return Rt._offset+Rt._length};function Ue(We){var Fe=We.title.font.size,bt=(We.title.text.match(n.BR_TAG_ALL)||[]).length;return We.title.hasOwnProperty("standoff")?bt?Fe*(U+bt*X):Fe*U:bt?Fe*(bt+1)*X:Fe}function et(We,Fe){var bt=We._fullLayout,kt=Fe._id,_t=kt.charAt(0),Rt=Fe.title.font.size,Dt;if(Fe.title.hasOwnProperty("standoff"))Dt=Fe._depth+Fe.title.standoff+Ue(Fe);else{var Ut=(Fe.ticklabelposition||"").indexOf("inside")!==-1;if(Fe.type==="multicategory")Dt=Fe._depth;else{var Bt=1.5*Rt;Ut&&(Bt=.5*Rt,Fe.ticks==="outside"&&(Bt+=Fe.ticklen)),Dt=10+Bt+(Fe.linewidth?Fe.linewidth-1:0)}Ut||(_t==="x"?Dt+=Fe.side==="top"?Rt*(Fe.showticklabels?1:0):Rt*(Fe.showticklabels?1.5:.5):Dt+=Fe.side==="right"?Rt*(Fe.showticklabels?1:.5):Rt*(Fe.showticklabels?.5:0))}var tr=j.getPxPosition(We,Fe),er,Zt,_r;_t==="x"?(Zt=Fe._offset+Fe._length/2,_r=Fe.side==="top"?tr-Dt:tr+Dt):(_r=Fe._offset+Fe._length/2,Zt=Fe.side==="right"?tr+Dt:tr-Dt,er={rotate:"-90",offset:0});var Gr;if(Fe.type!=="multicategory"){var Or=Fe._selections[Fe._id+"tick"];if(Gr={selection:Or,side:Fe.side},Or&&Or.node()&&Or.node().parentNode){var Fr=h.getTranslate(Or.node().parentNode);Gr.offsetLeft=Fr.x,Gr.offsetTop=Fr.y}Fe.title.hasOwnProperty("standoff")&&(Gr.pad=0)}return o.draw(We,kt+"title",{propContainer:Fe,propName:Fe._name+".title.text",placeholder:bt._dfltTitle[_t],avoid:Gr,transform:er,attributes:{x:Zt,y:_r,"text-anchor":"middle"}})}j.shouldShowZeroLine=function(We,Fe,bt){var kt=t.simpleMap(Fe.range,Fe.r2l);return kt[0]*kt[1]<=0&&Fe.zeroline&&(Fe.type==="linear"||Fe.type==="-")&&!(Fe.rangebreaks&&Fe.maskBreaks(0)===F)&&(ke(Fe,0)||!Ie(We,Fe,bt,kt)||He(We,Fe))},j.clipEnds=function(We,Fe){return Fe.filter(function(bt){return ke(We,bt.x)})};function ke(We,Fe){var bt=We.l2p(Fe);return bt>1&&bt<We._length-1}function Ie(We,Fe,bt,kt){var _t=bt._mainAxis;if(!_t)return;var Rt=We._fullLayout,Dt=Fe._id.charAt(0),Ut=j.counterLetter(Fe._id),Bt=Fe._offset+(Math.abs(kt[0])<Math.abs(kt[1])==(Dt==="x")?0:Fe._length);function tr(Or){if(!Or.showline||!Or.linewidth)return!1;var Fr=Math.max((Or.linewidth+Fe.zerolinewidth)/2,1);function Mn(Nn){return typeof Nn=="number"&&Math.abs(Nn-Bt)<Fr}if(Mn(Or._mainLinePosition)||Mn(Or._mainMirrorPosition))return!0;var Wn=Or._linepositions||{};for(var Tn in Wn)if(Mn(Wn[Tn][0])||Mn(Wn[Tn][1]))return!0}var er=Rt._plots[bt._mainSubplot];if(!(er.mainplotinfo||er).overlays.length)return tr(bt);for(var Zt=j.list(We,Ut),_r=0;_r<Zt.length;_r++){var Gr=Zt[_r];if(Gr._mainAxis===_t&&tr(Gr))return!0}}function He(We,Fe){for(var bt=We._fullData,kt=Fe._mainSubplot,_t=Fe._id.charAt(0),Rt=0;Rt<bt.length;Rt++){var Dt=bt[Rt];if(Dt.visible===!0&&Dt.xaxis+Dt.yaxis===kt&&(c.traceIs(Dt,"bar-like")&&Dt.orientation==={x:"h",y:"v"}[_t]||Dt.fill&&Dt.fill.charAt(Dt.fill.length-1)===_t))return!0}return!1}function Ye(We){var Fe=r.select(We),bt=Fe.select(".text-math-group");return bt.empty()?Fe.select("text"):bt}j.allowAutoMargin=function(We){for(var Fe=j.list(We,"",!0),bt=0;bt<Fe.length;bt++){var kt=Fe[bt];kt.automargin&&(u.allowAutoMargin(We,ft(kt)),kt.mirror&&u.allowAutoMargin(We,it(kt))),c.getComponentMethod("rangeslider","isVisible")(kt)&&u.allowAutoMargin(We,je(kt))}};function ft(We){return We._id+".automargin"}function it(We){return ft(We)+".mirror"}function je(We){return We._id+".rangeslider"}j.swap=function(We,Fe){for(var bt=ot(We,Fe),kt=0;kt<bt.length;kt++)st(We,bt[kt].x,bt[kt].y)};function ot(We,Fe){var bt=[],kt,_t;for(kt=0;kt<Fe.length;kt++){var Rt=[],Dt=We._fullData[Fe[kt]].xaxis,Ut=We._fullData[Fe[kt]].yaxis;if(!(!Dt||!Ut)){for(_t=0;_t<bt.length;_t++)(bt[_t].x.indexOf(Dt)!==-1||bt[_t].y.indexOf(Ut)!==-1)&&Rt.push(_t);if(!Rt.length){bt.push({x:[Dt],y:[Ut]});continue}var Bt=bt[Rt[0]],tr;if(Rt.length>1)for(_t=1;_t<Rt.length;_t++)tr=bt[Rt[_t]],Je(Bt.x,tr.x),Je(Bt.y,tr.y);Je(Bt.x,[Dt]),Je(Bt.y,[Ut])}}return bt}function Je(We,Fe){for(var bt=0;bt<Fe.length;bt++)We.indexOf(Fe[bt])===-1&&We.push(Fe[bt])}function st(We,Fe,bt){var kt=[],_t=[],Rt=We.layout,Dt,Ut;for(Dt=0;Dt<Fe.length;Dt++)kt.push(j.getFromId(We,Fe[Dt]));for(Dt=0;Dt<bt.length;Dt++)_t.push(j.getFromId(We,bt[Dt]));var Bt=Object.keys(i),tr=["anchor","domain","overlaying","position","side","tickangle","editType"],er=["linear","log"];for(Dt=0;Dt<Bt.length;Dt++){var Zt=Bt[Dt],_r=kt[0][Zt],Gr=_t[0][Zt],Or=!0,Fr=!1,Mn=!1;if(!(Zt.charAt(0)==="_"||typeof _r=="function"||tr.indexOf(Zt)!==-1)){for(Ut=1;Ut<kt.length&&Or;Ut++){var Wn=kt[Ut][Zt];Zt==="type"&&er.indexOf(_r)!==-1&&er.indexOf(Wn)!==-1&&_r!==Wn?Fr=!0:Wn!==_r&&(Or=!1)}for(Ut=1;Ut<_t.length&&Or;Ut++){var Tn=_t[Ut][Zt];Zt==="type"&&er.indexOf(Gr)!==-1&&er.indexOf(Tn)!==-1&&Gr!==Tn?Mn=!0:_t[Ut][Zt]!==Gr&&(Or=!1)}Or&&(Fr&&(Rt[kt[0]._name].type="linear"),Mn&&(Rt[_t[0]._name].type="linear"),It(Rt,Zt,kt,_t,We._fullLayout._dfltTitle))}}for(Dt=0;Dt<We._fullLayout.annotations.length;Dt++){var Nn=We._fullLayout.annotations[Dt];Fe.indexOf(Nn.xref)!==-1&&bt.indexOf(Nn.yref)!==-1&&t.swapAttrs(Rt.annotations[Dt],["?"])}}function It(We,Fe,bt,kt,_t){var Rt=t.nestedProperty,Dt=Rt(We[bt[0]._name],Fe).get(),Ut=Rt(We[kt[0]._name],Fe).get(),Bt;for(Fe==="title"&&(Dt&&Dt.text===_t.x&&(Dt.text=_t.y),Ut&&Ut.text===_t.y&&(Ut.text=_t.x)),Bt=0;Bt<bt.length;Bt++)Rt(We,bt[Bt]._name+"."+Fe).set(Ut);for(Bt=0;Bt<kt.length;Bt++)Rt(We,kt[Bt]._name+"."+Fe).set(Dt)}function Nt(We){return We._id==="angularaxis"}function nr(We,Fe){for(var bt=Fe._rangebreaks.length,kt=0;kt<bt;kt++){var _t=Fe._rangebreaks[kt];if(We>=_t.min&&We<_t.max)return _t.max}return We}},{"../../components/color":643,"../../components/drawing":665,"../../components/titles":738,"../../constants/alignment":745,"../../constants/numerical":753,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../../registry":911,"./autorange":827,"./axis_autotype":829,"./axis_ids":831,"./clean_ticks":833,"./layout_attributes":842,"./set_convert":848,d3:169,"fast-isnumeric":241}],829:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../constants/numerical").BADNUM,c=a.isArrayOrTypedArray,t=a.isDateTime,f=a.cleanNumber,n=Math.round;v.exports=function(g,b,m){var x=g,w=m.noMultiCategory;if(c(x)&&!x.length)return"-";if(!w&&p(x))return"multicategory";if(w&&Array.isArray(x[0])){for(var y=[],T=0;T<x.length;T++)if(c(x[T]))for(var M=0;M<x[T].length;M++)y.push(x[T][M]);x=y}if(h(x,b))return"date";var P=m.autotypenumbers!=="strict";return s(x,P)?"category":l(x,P)?"linear":"-"};function o(d,g){return g?r(d):typeof d=="number"}function l(d,g){for(var b=d.length,m=0;m<b;m++)if(o(d[m],g))return!0;return!1}function h(d,g){for(var b=d.length,m=i(b),x=0,w=0,y={},T=0;T<b;T+=m){var M=n(T),P=d[M],L=String(P);y[L]||(y[L]=1,t(P,g)&&x++,r(P)&&w++)}return x>w*2}function i(d){return Math.max(1,(d-1)/1e3)}function s(d,g){for(var b=d.length,m=i(b),x=0,w=0,y={},T=0;T<b;T+=m){var M=n(T),P=d[M],L=String(P);if(!y[L]){y[L]=1;var I=typeof P;I==="boolean"?w++:(g?f(P)!==u:I==="number")?x++:I==="string"&&w++}}return w>x*2}function p(d){return c(d[0])&&c(d[1])}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],830:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../registry"),u=e("../../lib"),c=e("../array_container_defaults"),t=e("./layout_attributes"),f=e("./tick_value_defaults"),n=e("./tick_mark_defaults"),o=e("./tick_label_defaults"),l=e("./category_order_defaults"),h=e("./line_grid_defaults"),i=e("./set_convert"),s=e("./constants").WEEKDAY_PATTERN,p=e("./constants").HOUR_PATTERN;v.exports=function(x,w,y,T,M){var P=T.letter,L=T.font||{},I=T.splomStash||{},E=y("visible",!T.visibleDflt),k=w._template||{},C=w.type||k.type||"-",D;if(C==="date"){var F=a.getComponentMethod("calendars","handleDefaults");F(x,w,"calendar",T.calendar),T.noTicklabelmode||(D=y("ticklabelmode"))}(!T.noTicklabelposition||C==="multicategory")&&u.coerce(x,w,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:D==="period"?["outside","inside"]:P==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition"),i(w,M);var N=!w.isValidRange(x.range);N&&T.reverseDflt&&(N="reversed");var G=y("autorange",N);G&&(C==="linear"||C==="-")&&y("rangemode"),y("range"),w.cleanRange(),l(x,w,y,T),C!=="category"&&!T.noHover&&y("hoverformat");var U=y("color"),X=U!==t.color.dflt?U:L.color,z=I.label||M._dfltTitle[P];if(o(x,w,y,C,T,{pass:1}),!E)return w;y("title.text",z),u.coerceFont(y,"title.font",{family:L.family,size:Math.round(L.size*1.2),color:X}),f(x,w,y,C),o(x,w,y,C,T,{pass:2}),n(x,w,y,T),h(x,w,y,{dfltColor:U,bgColor:T.bgColor,showGrid:T.showGrid,attributes:t}),(w.showline||w.ticks)&&y("mirror"),T.automargin&&y("automargin");var B=C==="multicategory";if(!T.noTickson&&(C==="category"||B)&&(w.ticks||w.showgrid)){var j;B&&(j="boundaries");var V=y("tickson",j);V==="boundaries"&&delete w.ticklabelposition}if(B){var K=y("showdividers");K&&(y("dividercolor"),y("dividerwidth"))}if(C==="date")if(c(x,w,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:d}),!w.rangebreaks.length)delete w.rangebreaks;else{for(var te=0;te<w.rangebreaks.length;te++)if(w.rangebreaks[te].pattern===s){w._hasDayOfWeekBreaks=!0;break}if(i(w,M),M._has("scattergl")||M._has("splom"))for(var $=0;$<T.data.length;$++){var ie=T.data[$];(ie.type==="scattergl"||ie.type==="splom")&&(ie.visible=!1,u.warn(ie.type+" traces do not work on axes with rangebreaks. Setting trace "+ie.index+" to `visible: false`."))}}return w};function d(m,x,w){function y(D,F){return u.coerce(m,x,t.rangebreaks,D,F)}var T=y("enabled");if(T){var M=y("bounds");if(M&&M.length>=2){var P="",L,I;if(M.length===2){for(L=0;L<2;L++)if(I=b(M[L]),I){P=s;break}}var E=y("pattern",P);if(E===s)for(L=0;L<2;L++)I=b(M[L]),I&&(x.bounds[L]=M[L]=I-1);if(E)for(L=0;L<2;L++)switch(I=M[L],E){case s:if(!r(I)){x.enabled=!1;return}if(I=+I,I!==Math.floor(I)||I<0||I>=7){x.enabled=!1;return}x.bounds[L]=M[L]=I;break;case p:if(!r(I)){x.enabled=!1;return}if(I=+I,I<0||I>24){x.enabled=!1;return}x.bounds[L]=M[L]=I;break}if(w.autorange===!1){var k=w.range;if(k[0]<k[1]){if(M[0]<k[0]&&M[1]>k[1]){x.enabled=!1;return}}else if(M[0]>k[0]&&M[1]<k[1]){x.enabled=!1;return}}}else{var C=y("values");if(C&&C.length)y("dvalue");else{x.enabled=!1;return}}}}var g={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function b(m){if(typeof m=="string")return g[m.substr(0,3).toLowerCase()]}},{"../../lib":778,"../../registry":911,"../array_container_defaults":823,"./category_order_defaults":832,"./constants":834,"./layout_attributes":842,"./line_grid_defaults":844,"./set_convert":848,"./tick_label_defaults":849,"./tick_mark_defaults":850,"./tick_value_defaults":851,"fast-isnumeric":241}],831:[function(e,v,S){var r=e("../../registry"),a=e("./constants");S.id2name=function(t){if(!(typeof t!="string"||!t.match(a.AX_ID_PATTERN))){var f=t.split(" ")[0].substr(1);return f==="1"&&(f=""),t.charAt(0)+"axis"+f}},S.name2id=function(t){if(!!t.match(a.AX_NAME_PATTERN)){var f=t.substr(5);return f==="1"&&(f=""),t.charAt(0)+f}},S.cleanId=function(t,f,n){var o=/( domain)$/.test(t);if(!(typeof t!="string"||!t.match(a.AX_ID_PATTERN))&&!(f&&t.charAt(0)!==f)&&!(o&&!n)){var l=t.split(" ")[0].substr(1).replace(/^0+/,"");return l==="1"&&(l=""),t.charAt(0)+l+(o&&n?" domain":"")}},S.list=function(c,t,f){var n=c._fullLayout;if(!n)return[];var o=S.listIds(c,t),l=new Array(o.length),h;for(h=0;h<o.length;h++){var i=o[h];l[h]=n[i.charAt(0)+"axis"+i.substr(1)]}if(!f){var s=n._subplots.gl3d||[];for(h=0;h<s.length;h++){var p=n[s[h]];t?l.push(p[t+"axis"]):l.push(p.xaxis,p.yaxis,p.zaxis)}}return l},S.listIds=function(c,t){var f=c._fullLayout;if(!f)return[];var n=f._subplots;return t?n[t+"axis"]:n.xaxis.concat(n.yaxis)},S.getFromId=function(c,t,f){var n=c._fullLayout;return t=t===void 0||typeof t!="string"?t:t.replace(" domain",""),f==="x"?t=t.replace(/y[0-9]*/,""):f==="y"&&(t=t.replace(/x[0-9]*/,"")),n[S.id2name(t)]},S.getFromTrace=function(c,t,f){var n=c._fullLayout,o=null;if(r.traceIs(t,"gl3d")){var l=t.scene;l.substr(0,5)==="scene"&&(o=n[l][f+"axis"])}else o=S.getFromId(c,t[f+"axis"]||f);return o},S.idSort=function(c,t){var f=c.charAt(0),n=t.charAt(0);return f!==n?f>n?1:-1:+(c.substr(1)||1)-+(t.substr(1)||1)},S.ref2id=function(c){return/^[xyz]/.test(c)?c.split(" ")[0]:!1};function u(c,t){if(t&&t.length){for(var f=0;f<t.length;f++)if(t[f][c])return!0}return!1}S.isLinked=function(c,t){return u(t,c._axisMatchGroups)||u(t,c._axisConstraintGroups)}},{"../../registry":911,"./constants":834}],832:[function(e,v,S){function r(a,u){var c=u.dataAttr||a._id.charAt(0),t={},f,n,o;if(u.axData)f=u.axData;else for(f=[],n=0;n<u.data.length;n++){var l=u.data[n];l[c+"axis"]===a._id&&f.push(l)}for(n=0;n<f.length;n++){var h=f[n][c];for(o=0;o<h.length;o++){var i=h[o];i!=null&&(t[i]=1)}}return Object.keys(t)}v.exports=function(u,c,t,f){if(c.type==="category"){var n=u.categoryarray,o=Array.isArray(n)&&n.length>0,l;o&&(l="array");var h=t("categoryorder",l),i;h==="array"&&(i=t("categoryarray")),!o&&h==="array"&&(h=c.categoryorder="trace"),h==="trace"?c._initialCategories=[]:h==="array"?c._initialCategories=i.slice():(i=r(c,f).sort(),h==="category ascending"?c._initialCategories=i:h==="category descending"&&(c._initialCategories=i.reverse()))}}},{}],833:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../constants/numerical"),c=u.ONEDAY,t=u.ONEWEEK;S.dtick=function(f,n){var o=n==="log",l=n==="date",h=n==="category",i=l?c:1;if(!f)return i;if(r(f))return f=Number(f),f<=0?i:h?Math.max(1,Math.round(f)):l?Math.max(.1,f):f;if(typeof f!="string"||!(l||o))return i;var s=f.charAt(0),p=f.substr(1);return p=r(p)?Number(p):0,p<=0||!(l&&s==="M"&&p===Math.round(p)||o&&s==="L"||o&&s==="D"&&(p===1||p===2))?i:f},S.tick0=function(f,n,o,l){if(n==="date")return a.cleanDate(f,a.dateTick0(o,l%t===0?1:0));if(!(l==="D1"||l==="D2"))return r(f)?Number(f):0}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],834:[function(e,v,S){var r=e("../../lib/regex").counter;v.exports={idRegex:{x:r("x","( domain)?"),y:r("y","( domain)?")},attrRegex:r("[xy]axis"),xAxisMatch:r("xaxis"),yAxisMatch:r("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":795}],835:[function(e,v,S){var r=e("../../lib"),a=e("./autorange"),u=e("./axis_ids").id2name,c=e("./layout_attributes"),t=e("./scale_zoom"),f=e("./set_convert"),n=e("../../constants/numerical").ALMOST_EQUAL,o=e("../../constants/alignment").FROM_BL;S.handleDefaults=function(b,m,x){var w=x.axIds,y=x.axHasImage,T=m._axisConstraintGroups=[],M=m._axisMatchGroups=[],P,L,I,E,k,C,D,F;for(P=0;P<w.length;P++)E=u(w[P]),k=b[E],C=m[E],l(k,C,{axIds:w,layoutOut:m,hasImage:y[E]});function N(te,$){for(P=0;P<te.length;P++){L=te[P];for(I in L)m[u(I)][$]=L}}for(N(M,"_matchGroup"),P=0;P<T.length;P++){L=T[P];for(I in L)if(C=m[u(I)],C.fixedrange){for(var G in L){var U=u(G);(b[U]||{}).fixedrange===!1&&r.warn("fixedrange was specified as false for axis "+U+" but was overridden because another axis in its constraint group has fixedrange true"),m[U].fixedrange=!0}break}}for(P=0;P<T.length;){L=T[P];for(I in L){C=m[u(I)],C._matchGroup&&Object.keys(C._matchGroup).length===Object.keys(L).length&&(T.splice(P,1),P--);break}P++}N(T,"_constraintGroup");var X=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],z=!1,B=!1;function j(){F=C[D],D==="rangebreaks"&&(B=C._hasDayOfWeekBreaks)}for(P=0;P<M.length;P++){L=M[P];for(var V=0;V<X.length;V++){D=X[V],F=null;var K;for(I in L)if(E=u(I),k=b[E],C=m[E],D in C){if(!C.matches&&(K=C,D in k)){j();break}F===null&&D in k&&j()}if(D==="range"&&F&&(z=!0),D==="autorange"&&F===null&&z&&(F=!1),F===null&&D in K&&(F=K[D]),F!==null)for(I in L)C=m[u(I)],C[D]=D==="range"?F.slice():F,D==="rangebreaks"&&(C._hasDayOfWeekBreaks=B,f(C,m))}}};function l(b,m,x){var w=x.axIds,y=x.layoutOut,T=x.hasImage,M=y._axisConstraintGroups,P=y._axisMatchGroups,L=m._id,I=L.charAt(0),E=((y._splomAxes||{})[I]||{})[L]||{},k=m._id,C=k.charAt(0)==="x";m._matchGroup=null,m._constraintGroup=null;function D(Q,H){return r.coerce(b,m,c,Q,H)}D("constrain",T?"domain":"range"),r.coerce(b,m,{constraintoward:{valType:"enumerated",values:C?["left","center","right"]:["bottom","middle","top"],dflt:C?"center":"middle"}},"constraintoward");var F=m.type,N,G,U=[];for(N=0;N<w.length;N++)if(G=w[N],G!==k){var X=y[u(G)];X.type===F&&U.push(G)}var z=i(M,k);if(z){var B=[];for(N=0;N<U.length;N++)G=U[N],z[G]||B.push(G);U=B}var j=U.length,V,K;j&&(b.matches||E.matches)&&(V=r.coerce(b,m,{matches:{valType:"enumerated",values:U,dflt:U.indexOf(E.matches)!==-1?E.matches:void 0}},"matches"));var te=T&&!C?m.anchor:void 0;if(j&&!V&&(b.scaleanchor||te)&&(K=r.coerce(b,m,{scaleanchor:{valType:"enumerated",values:U}},"scaleanchor",te)),V){m._matchGroup=s(P,k,V,1);var $=y[u(V)],ie=h(y,m)/h(y,$);C!==(V.charAt(0)==="x")&&(ie=(C?"x":"y")+ie),s(M,k,V,ie)}else b.matches&&w.indexOf(b.matches)!==-1&&r.warn("ignored "+m._name+'.matches: "'+b.matches+'" to avoid an infinite loop');if(K){var se=D("scaleratio");se||(se=m.scaleratio=1),s(M,k,K,se)}else b.scaleanchor&&w.indexOf(b.scaleanchor)!==-1&&r.warn("ignored "+m._name+'.scaleanchor: "'+b.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function h(b,m){var x=m.domain;return x||(x=b[u(m.overlaying)].domain),x[1]-x[0]}function i(b,m){for(var x=0;x<b.length;x++)if(b[x][m])return b[x];return null}function s(b,m,x,w){var y,T,M,P,L,I=i(b,m);I===null?(I={},I[m]=1,L=b.length,b.push(I)):L=b.indexOf(I);var E=Object.keys(I);for(y=0;y<b.length;y++)if(M=b[y],y!==L&&M[x]){var k=M[x];for(T=0;T<E.length;T++)P=E[T],M[P]=p(k,p(w,I[P]));b.splice(L,1);return}if(w!==1)for(T=0;T<E.length;T++){var C=E[T];I[C]=p(w,I[C])}I[x]=1}function p(b,m){var x="",w="",y,T;typeof b=="string"&&(x=b.match(/^[xy]*/)[0],y=x.length,b=+b.substr(y)),typeof m=="string"&&(w=m.match(/^[xy]*/)[0],T=w.length,m=+m.substr(T));var M=b*m;return!y&&!T?M:!y||!T||x.charAt(0)===w.charAt(0)?x+w+b*m:y===T?M:(y>T?x.substr(T):w.substr(y))+M}function d(b,m){for(var x=m._size,w=x.h/x.w,y={},T=Object.keys(b),M=0;M<T.length;M++){var P=T[M],L=b[P];if(typeof L=="string"){var I=L.match(/^[xy]*/)[0],E=I.length;L=+L.substr(E);for(var k=I.charAt(0)==="y"?w:1/w,C=0;C<E;C++)L*=k}y[P]=L}return y}S.enforce=function(m){var x=m._fullLayout,w=x._axisConstraintGroups||[],y,T,M,P,L,I,E,k;for(y=0;y<w.length;y++){M=d(w[y],x);var C=Object.keys(M),D=1/0,F=0,N=1/0,G={},U={},X=!1;for(T=0;T<C.length;T++)P=C[T],U[P]=L=x[u(P)],L._inputDomain?L.domain=L._inputDomain.slice():L._inputDomain=L.domain.slice(),L._inputRange||(L._inputRange=L.range.slice()),L.setScale(),G[P]=I=Math.abs(L._m)/M[P],D=Math.min(D,I),(L.constrain==="domain"||!L._constraintShrinkable)&&(N=Math.min(N,I)),delete L._constraintShrinkable,F=Math.max(F,I),L.constrain==="domain"&&(X=!0);if(!(D>n*F&&!X)){for(T=0;T<C.length;T++)if(P=C[T],I=G[P],L=U[P],E=L.constrain,I!==N||E==="domain")if(k=I/N,E==="range")t(L,k);else{var z=L._inputDomain,B=(L.domain[1]-L.domain[0])/(z[1]-z[0]),j=(L.r2l(L.range[1])-L.r2l(L.range[0]))/(L.r2l(L._inputRange[1])-L.r2l(L._inputRange[0]));if(k/=B,k*j<1){L.domain=L._input.domain=z.slice(),t(L,k);continue}if(j<1&&(L.range=L._input.range=L._inputRange.slice(),k*=j),L.autorange){var V=L.r2l(L.range[0]),K=L.r2l(L.range[1]),te=(V+K)/2,$=te,ie=te,se=Math.abs(K-te),Q=te-se*k*1.0001,H=te+se*k*1.0001,oe=a.makePadFn(x,L,0),re=a.makePadFn(x,L,1);g(L,k);var ee=Math.abs(L._m),ae=a.concatExtremes(m,L),fe=ae.min,de=ae.max,pe,W;for(W=0;W<fe.length;W++)pe=fe[W].val-oe(fe[W])/ee,pe>Q&&pe<$&&($=pe);for(W=0;W<de.length;W++)pe=de[W].val+re(de[W])/ee,pe<H&&pe>ie&&(ie=pe);var ue=(ie-$)/(2*se);k/=ue,$=L.l2r($),ie=L.l2r(ie),L.range=L._input.range=V<K?[$,ie]:[ie,$]}g(L,k)}}}},S.getAxisGroup=function(m,x){for(var w=m._axisMatchGroups,y=0;y<w.length;y++){var T=w[y];if(T[x])return"g"+y}return x},S.clean=function(m,x){if(x._inputDomain){for(var w=!1,y=x._id,T=m._fullLayout._axisConstraintGroups,M=0;M<T.length;M++)if(T[M][y]){w=!0;break}(!w||x.constrain!=="domain")&&(x._input.domain=x.domain=x._inputDomain,delete x._inputDomain)}};function g(b,m){var x=b._inputDomain,w=o[b.constraintoward],y=x[0]+(x[1]-x[0])*w;b.domain=b._input.domain=[y+(x[0]-y)/m,y+(x[1]-y)/m],b.setScale()}},{"../../constants/alignment":745,"../../constants/numerical":753,"../../lib":778,"./autorange":827,"./axis_ids":831,"./layout_attributes":842,"./scale_zoom":846,"./set_convert":848}],836:[function(e,v,S){var r=e("d3"),a=e("tinycolor2"),u=e("has-passive-events"),c=e("../../registry"),t=e("../../lib"),f=t.strTranslate,n=e("../../lib/svg_text_utils"),o=e("../../components/color"),l=e("../../components/drawing"),h=e("../../components/fx"),i=e("./axes"),s=e("../../lib/setcursor"),p=e("../../components/dragelement"),d=e("../../components/dragelement/helpers"),g=d.selectingOrDrawing,b=d.freeMode,m=e("../../constants/alignment").FROM_TL,x=e("../../lib/clear_gl_canvases"),w=e("../../plot_api/subroutines").redrawReglTraces,y=e("../plots"),T=e("./axis_ids").getFromId,M=e("./select").prepSelect,P=e("./select").clearSelect,L=e("./select").selectOnClick,I=e("./scale_zoom"),E=e("./constants"),k=E.MINDRAG,C=E.MINZOOM,D=!0;function F(de,pe,W,ue,me,be,Me,Pe){var Ge=de._fullLayout._zoomlayer,ze=Me+Pe==="nsew",Qe=(Me+Pe).length===1,tt,Ce,Ae,Be,qe,Tt,At,Ne,ct,Mt,Wt,qt,zt,$t,rr,Lt,Ct,dt,lt,Te,Le,Ue,et;function ke(){if(tt=pe.xaxis,Ce=pe.yaxis,ct=tt._length,Mt=Ce._length,At=tt._offset,Ne=Ce._offset,Ae={},Ae[tt._id]=tt,Be={},Be[Ce._id]=Ce,Me&&Pe)for(var Nr=pe.overlays,Pr=0;Pr<Nr.length;Pr++){var Ln=Nr[Pr].xaxis;Ae[Ln._id]=Ln;var pn=Nr[Pr].yaxis;Be[pn._id]=pn}qe=fe(Ae),Tt=fe(Be),zt=U(qe,Pe),$t=U(Tt,Me),rr=!$t&&!zt,qt=ee(de,de._fullLayout._axisMatchGroups,Ae,Be),Wt=ee(de,de._fullLayout._axisConstraintGroups,Ae,Be,qt);var xn=Wt.isSubplotConstrained||qt.isSubplotConstrained;Lt=Pe||xn,Ct=Me||xn;var en=de._fullLayout;dt=en._has("scattergl"),lt=en._has("splom"),Te=en._has("svg")}ke();var Ie=V($t+zt,de._fullLayout.dragmode,ze),He=G(pe,Me+Pe+"drag",Ie,W,ue,me,be);if(rr&&!ze)return He.onmousedown=null,He.style.pointerEvents="none",He;var Ye={element:He,gd:de,plotinfo:pe};Ye.prepFn=function(Nr,Pr,Ln){var pn=Ye.dragmode,xn=de._fullLayout.dragmode;xn!==pn&&(Ye.dragmode=xn),ke(),Ue=de._fullLayout._invScaleX,et=de._fullLayout._invScaleY,rr||(ze?Nr.shiftKey?xn==="pan"?xn="zoom":g(xn)||(xn="pan"):Nr.ctrlKey&&(xn="pan"):xn="pan"),b(xn)?Ye.minDrag=1:Ye.minDrag=void 0,g(xn)?(Ye.xaxes=qe,Ye.yaxes=Tt,M(Nr,Pr,Ln,Ye,xn)):(Ye.clickFn=it,g(pn)&&ft(),rr||(xn==="zoom"?(Ye.moveFn=_t,Ye.doneFn=Dt,Ye.minDrag=1,kt(Nr,Pr,Ln)):xn==="pan"&&(Ye.moveFn=_r,Ye.doneFn=Mn))),de._fullLayout._redrag=function(){var en=de._dragdata;if(en&&en.element===He){var _n=de._fullLayout.dragmode;g(_n)||(ke(),Wn([0,0,ct,Mt]),Ye.moveFn(en.dx,en.dy))}}};function ft(){Ye.plotinfo.selection=!1,P(de)}function it(Nr,Pr){var Ln=Ye.gd;if(Ln._fullLayout._activeShapeIndex>=0){Ln._fullLayout._deactivateShape(Ln);return}var pn=Ln._fullLayout.clickmode;if(se(Ln),Nr===2&&!Qe&&Fr(),ze)pn.indexOf("select")>-1&&L(Pr,Ln,qe,Tt,pe.id,Ye),pn.indexOf("event")>-1&&h.click(Ln,Pr,pe.id);else if(Nr===1&&Qe){var xn=Me?Ce:tt,en=Me==="s"||Pe==="w"?0:1,_n=xn._name+".range["+en+"]",kn=X(xn,en),ln="left",vt="middle";if(xn.fixedrange)return;Me?(vt=Me==="n"?"top":"bottom",xn.side==="right"&&(ln="right")):Pe==="e"&&(ln="right"),Ln._context.showAxisRangeEntryBoxes&&r.select(He).call(n.makeEditable,{gd:Ln,immediate:!0,background:Ln._fullLayout.paper_bgcolor,text:String(kn),fill:xn.tickfont?xn.tickfont.color:"#444",horizontalAlign:ln,verticalAlign:vt}).on("edit",function(Gt){var fr=xn.d2r(Gt);fr!==void 0&&c.call("_guiRelayout",Ln,_n,fr)})}}p.init(Ye);var je,ot,Je,st,It,Nt,nr,We,Fe,bt;function kt(Nr,Pr,Ln){var pn=He.getBoundingClientRect();je=Pr-pn.left,ot=Ln-pn.top,de._fullLayout._calcInverseTransform(de);var xn=t.apply3DTransform(de._fullLayout._invTransform)(je,ot);je=xn[0],ot=xn[1],Je={l:je,r:je,w:0,t:ot,b:ot,h:0},st=de._hmpixcount?de._hmlumcount/de._hmpixcount:a(de._fullLayout.plot_bgcolor).getLuminance(),It="M0,0H"+ct+"V"+Mt+"H0V0",Nt=!1,nr="xy",bt=!1,We=K(Ge,st,At,Ne,It),Fe=te(Ge,At,Ne)}function _t(Nr,Pr){if(de._transitioningWithDuration)return!1;var Ln=Math.max(0,Math.min(ct,Ue*Nr+je)),pn=Math.max(0,Math.min(Mt,et*Pr+ot)),xn=Math.abs(Ln-je),en=Math.abs(pn-ot);Je.l=Math.min(je,Ln),Je.r=Math.max(je,Ln),Je.t=Math.min(ot,pn),Je.b=Math.max(ot,pn);function _n(){nr="",Je.r=Je.l,Je.t=Je.b,Fe.attr("d","M0,0Z")}if(Wt.isSubplotConstrained)xn>C||en>C?(nr="xy",xn/ct>en/Mt?(en=xn*Mt/ct,ot>pn?Je.t=ot-en:Je.b=ot+en):(xn=en*ct/Mt,je>Ln?Je.l=je-xn:Je.r=je+xn),Fe.attr("d",re(Je))):_n();else if(qt.isSubplotConstrained)if(xn>C||en>C){nr="xy";var kn=Math.min(Je.l/ct,(Mt-Je.b)/Mt),ln=Math.max(Je.r/ct,(Mt-Je.t)/Mt);Je.l=kn*ct,Je.r=ln*ct,Je.b=(1-kn)*Mt,Je.t=(1-ln)*Mt,Fe.attr("d",re(Je))}else _n();else!$t||en<Math.min(Math.max(xn*.6,k),C)?xn<k||!zt?_n():(Je.t=0,Je.b=Mt,nr="x",Fe.attr("d",H(Je,ot))):!zt||xn<Math.min(en*.6,C)?(Je.l=0,Je.r=ct,nr="y",Fe.attr("d",oe(Je,je))):(nr="xy",Fe.attr("d",re(Je)));Je.w=Je.r-Je.l,Je.h=Je.b-Je.t,nr&&(bt=!0),de._dragged=bt,$(We,Fe,Je,It,Nt,st),Rt(),de.emit("plotly_relayouting",Le),Nt=!0}function Rt(){Le={},(nr==="xy"||nr==="x")&&(z(qe,Je.l/ct,Je.r/ct,Le,Wt.xaxes),Gr("x",Le)),(nr==="xy"||nr==="y")&&(z(Tt,(Mt-Je.b)/Mt,(Mt-Je.t)/Mt,Le,Wt.yaxes),Gr("y",Le))}function Dt(){Rt(),se(de),Mn(),Q(de)}var Ut=[0,0,ct,Mt],Bt=null,tr=E.REDRAWDELAY,er=pe.mainplot?de._fullLayout._plots[pe.mainplot]:pe;function Zt(Nr){if(!de._context._scrollZoom.cartesian&&!de._fullLayout._enablescrollzoom)return;if(ft(),de._transitioningWithDuration){Nr.preventDefault(),Nr.stopPropagation();return}ke(),clearTimeout(Bt);var Pr=-Nr.deltaY;if(isFinite(Pr)||(Pr=Nr.wheelDelta/10),!isFinite(Pr)){t.log("Did not find wheel motion attributes: ",Nr);return}var Ln=Math.exp(-Math.min(Math.max(Pr,-20),20)/200),pn=er.draglayer.select(".nsewdrag").node().getBoundingClientRect(),xn=(Nr.clientX-pn.left)/pn.width,en=(pn.bottom-Nr.clientY)/pn.height,_n;function kn(ln,vt,Gt){if(ln.fixedrange)return;var fr=t.simpleMap(ln.range,ln.r2l),Cr=fr[0]+(fr[1]-fr[0])*vt;function Wr(Vr){return ln.l2r(Cr+(Vr-Cr)*Gt)}ln.range=fr.map(Wr)}if(Lt){for(Pe||(xn=.5),_n=0;_n<qe.length;_n++)kn(qe[_n],xn,Ln);Gr("x"),Ut[2]*=Ln,Ut[0]+=Ut[2]*xn*(1/Ln-1)}if(Ct){for(Me||(en=.5),_n=0;_n<Tt.length;_n++)kn(Tt[_n],en,Ln);Gr("y"),Ut[3]*=Ln,Ut[1]+=Ut[3]*(1-en)*(1/Ln-1)}Wn(Ut),Or(),de.emit("plotly_relayouting",Le),Bt=setTimeout(function(){Ut=[0,0,ct,Mt],Mn()},tr),Nr.preventDefault()}Me.length*Pe.length!==1&&ae(He,Zt);function _r(Nr,Pr){if(Nr=Nr*Ue,Pr=Pr*et,de._transitioningWithDuration)return;if(de._fullLayout._replotting=!0,zt==="ew"||$t==="ns"){var Ln=zt?-Nr:0,pn=$t?-Pr:0;if(qt.isSubplotConstrained){if(zt&&$t){var xn=(Nr/ct-Pr/Mt)/2;Nr=xn*ct,Pr=-xn*Mt,Ln=-Nr,pn=-Pr}$t?Ln=-pn*ct/Mt:pn=-Ln*Mt/ct}zt&&(B(qe,Nr),Gr("x")),$t&&(B(Tt,Pr),Gr("y")),Wn([Ln,pn,ct,Mt]),Or(),de.emit("plotly_relayouting",Le);return}function en(Wr,Vr,Qr){for(var Hr=1-Vr,En,ta,ea=0;ea<Wr.length;ea++){var ba=Wr[ea];if(!ba.fixedrange){En=ba,ta=ba._rl[Hr]+(ba._rl[Vr]-ba._rl[Hr])/j(Qr/ba._length);var Wa=ba.l2r(ta);Wa!==!1&&Wa!==void 0&&(ba.range[Vr]=Wa)}}return En._length*(En._rl[Vr]-ta)/(En._rl[Vr]-En._rl[Hr])}var _n=zt==="w"==($t==="n")?1:-1;if(zt&&$t&&(Wt.isSubplotConstrained||qt.isSubplotConstrained)){var kn=(Nr/ct+_n*Pr/Mt)/2;Nr=kn*ct,Pr=_n*kn*Mt}var ln,vt;if(zt==="w"?Nr=en(qe,0,Nr):zt==="e"?Nr=en(qe,1,-Nr):zt||(Nr=0),$t==="n"?Pr=en(Tt,1,Pr):$t==="s"?Pr=en(Tt,0,-Pr):$t||(Pr=0),ln=zt==="w"?Nr:0,vt=$t==="n"?Pr:0,Wt.isSubplotConstrained&&!qt.isSubplotConstrained||qt.isSubplotConstrained&&zt&&$t&&_n>0){var Gt;if(qt.isSubplotConstrained||!zt&&$t.length===1){for(Gt=0;Gt<qe.length;Gt++)qe[Gt].range=qe[Gt]._r.slice(),I(qe[Gt],1-Pr/Mt);Nr=Pr*ct/Mt,ln=Nr/2}if(qt.isSubplotConstrained||!$t&&zt.length===1){for(Gt=0;Gt<Tt.length;Gt++)Tt[Gt].range=Tt[Gt]._r.slice(),I(Tt[Gt],1-Nr/ct);Pr=Nr*Mt/ct,vt=Pr/2}}(!qt.isSubplotConstrained||!$t)&&Gr("x"),(!qt.isSubplotConstrained||!zt)&&Gr("y");var fr=ct-Nr,Cr=Mt-Pr;qt.isSubplotConstrained&&!(zt&&$t)&&(zt?(vt=ln?0:Nr*Mt/ct,Cr=fr*Mt/ct):(ln=vt?0:Pr*ct/Mt,fr=Cr*ct/Mt)),Wn([ln,vt,fr,Cr]),Or(),de.emit("plotly_relayouting",Le)}function Gr(Nr,Pr){for(var Ln=qt.isSubplotConstrained?{x:Tt,y:qe}[Nr]:qt[Nr+"axes"],pn=qt.isSubplotConstrained?{x:qe,y:Tt}[Nr]:[],xn=0;xn<Ln.length;xn++){var en=Ln[xn],_n=en._id,kn=qt.xLinks[_n]||qt.yLinks[_n],ln=pn[0]||Ae[kn]||Be[kn];ln&&(Pr?(Pr[en._name+".range[0]"]=Pr[ln._name+".range[0]"],Pr[en._name+".range[1]"]=Pr[ln._name+".range[1]"]):en.range=ln.range.slice())}}function Or(){var Nr=[],Pr;function Ln(en){for(Pr=0;Pr<en.length;Pr++)en[Pr].fixedrange||Nr.push(en[Pr]._id)}for(Lt&&(Ln(qe),Ln(Wt.xaxes),Ln(qt.xaxes)),Ct&&(Ln(Tt),Ln(Wt.yaxes),Ln(qt.yaxes)),Le={},Pr=0;Pr<Nr.length;Pr++){var pn=Nr[Pr],xn=T(de,pn);i.drawOne(de,xn,{skipTitle:!0}),Le[xn._name+".range[0]"]=xn.range[0],Le[xn._name+".range[1]"]=xn.range[1]}i.redrawComponents(de,Nr)}function Fr(){if(!de._transitioningWithDuration){var Nr=de._context.doubleClick,Pr=[];zt&&(Pr=Pr.concat(qe)),$t&&(Pr=Pr.concat(Tt)),qt.xaxes&&(Pr=Pr.concat(qt.xaxes)),qt.yaxes&&(Pr=Pr.concat(qt.yaxes));var Ln={},pn,xn,en;if(Nr==="reset+autosize"){for(Nr="autosize",xn=0;xn<Pr.length;xn++)if(pn=Pr[xn],pn._rangeInitial&&(pn.range[0]!==pn._rangeInitial[0]||pn.range[1]!==pn._rangeInitial[1])||!pn._rangeInitial&&!pn.autorange){Nr="reset";break}}if(Nr==="autosize")for(xn=0;xn<Pr.length;xn++)pn=Pr[xn],pn.fixedrange||(Ln[pn._name+".autorange"]=!0);else if(Nr==="reset")for((zt||Wt.isSubplotConstrained)&&(Pr=Pr.concat(Wt.xaxes)),$t&&!Wt.isSubplotConstrained&&(Pr=Pr.concat(Wt.yaxes)),Wt.isSubplotConstrained&&(zt?$t||(Pr=Pr.concat(Tt)):Pr=Pr.concat(qe)),xn=0;xn<Pr.length;xn++)pn=Pr[xn],pn.fixedrange||(pn._rangeInitial?(en=pn._rangeInitial,Ln[pn._name+".range[0]"]=en[0],Ln[pn._name+".range[1]"]=en[1]):Ln[pn._name+".autorange"]=!0);de.emit("plotly_doubleclick",null),c.call("_guiRelayout",de,Ln)}}function Mn(){Wn([0,0,ct,Mt]),t.syncOrAsync([y.previousPromises,function(){de._fullLayout._replotting=!1,c.call("_guiRelayout",de,Le)}],de)}function Wn(Nr){var Pr=de._fullLayout,Ln=Pr._plots,pn=Pr._subplots.cartesian,xn,en,_n,kn;if(lt&&c.subplotsRegistry.splom.drag(de),dt){for(xn=0;xn<pn.length;xn++)if(en=Ln[pn[xn]],_n=en.xaxis,kn=en.yaxis,en._scene){var ln=t.simpleMap(_n.range,_n.r2l),vt=t.simpleMap(kn.range,kn.r2l);en._scene.update({range:[ln[0],vt[0],ln[1],vt[1]]})}}if((lt||dt)&&(x(de),w(de)),Te){var Gt=Nr[2]/tt._length,fr=Nr[3]/Ce._length;for(xn=0;xn<pn.length;xn++){en=Ln[pn[xn]],_n=en.xaxis,kn=en.yaxis;var Cr=(Lt||qt.isSubplotConstrained)&&!_n.fixedrange&&Ae[_n._id],Wr=(Ct||qt.isSubplotConstrained)&&!kn.fixedrange&&Be[kn._id],Vr,Qr,Hr,En;if(Cr?(Vr=Gt,Hr=Pe||qt.isSubplotConstrained?Nr[0]:jn(_n,Vr)):qt.xaHash[_n._id]?(Vr=Gt,Hr=Nr[0]*_n._length/tt._length):qt.yaHash[_n._id]?(Vr=fr,Hr=$t==="ns"?-Nr[1]*_n._length/Ce._length:jn(_n,Vr,{n:"top",s:"bottom"}[$t])):(Vr=Tn(_n,Gt,fr),Hr=Nn(_n,Vr)),Wr?(Qr=fr,En=Me||qt.isSubplotConstrained?Nr[1]:jn(kn,Qr)):qt.yaHash[kn._id]?(Qr=fr,En=Nr[1]*kn._length/Ce._length):qt.xaHash[kn._id]?(Qr=Gt,En=zt==="ew"?-Nr[0]*kn._length/tt._length:jn(kn,Qr,{e:"right",w:"left"}[zt])):(Qr=Tn(kn,Gt,fr),En=Nn(kn,Qr)),!(!Vr&&!Qr)){Vr||(Vr=1),Qr||(Qr=1);var ta=_n._offset-Hr/Vr,ea=kn._offset-En/Qr;en.clipRect.call(l.setTranslate,Hr,En).call(l.setScale,Vr,Qr),en.plot.call(l.setTranslate,ta,ea).call(l.setScale,1/Vr,1/Qr),(Vr!==en.xScaleFactor||Qr!==en.yScaleFactor)&&(l.setPointGroupScale(en.zoomScalePts,Vr,Qr),l.setTextPointsScale(en.zoomScaleTxt,Vr,Qr)),l.hideOutsideRangePoints(en.clipOnAxisFalseTraces,en),en.xScaleFactor=Vr,en.yScaleFactor=Qr}}}}function Tn(Nr,Pr,Ln){return Nr.fixedrange?0:Lt&&Wt.xaHash[Nr._id]?Pr:Ct&&(Wt.isSubplotConstrained?Wt.xaHash:Wt.yaHash)[Nr._id]?Ln:0}function Nn(Nr,Pr){return Pr?(Nr.range=Nr._r.slice(),I(Nr,Pr),jn(Nr,Pr)):0}function jn(Nr,Pr,Ln){return Nr._length*(1-Pr)*m[Ln||Nr.constraintoward||"middle"]}return He}function N(de,pe,W,ue){var me=t.ensureSingle(de.draglayer,pe,W,function(be){be.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",de.id)});return me.call(s,ue),me.node()}function G(de,pe,W,ue,me,be,Me){var Pe=N(de,"rect",pe,W);return r.select(Pe).call(l.setRect,ue,me,be,Me),Pe}function U(de,pe){for(var W=0;W<de.length;W++)if(!de[W].fixedrange)return pe;return""}function X(de,pe){var W=de.range[pe],ue=Math.abs(W-de.range[1-pe]),me;return de.type==="date"?W:de.type==="log"?(me=Math.ceil(Math.max(0,-Math.log(ue)/Math.LN10))+3,r.format("."+me+"g")(Math.pow(10,W))):(me=Math.floor(Math.log(Math.abs(W))/Math.LN10)-Math.floor(Math.log(ue)/Math.LN10)+4,r.format("."+String(me)+"g")(W))}function z(de,pe,W,ue,me){for(var be=0;be<de.length;be++){var Me=de[be];if(!Me.fixedrange)if(Me.rangebreaks){var Pe=Me._id.charAt(0)==="y",Ge=Pe?1-pe:pe,ze=Pe?1-W:W;ue[Me._name+".range[0]"]=Me.l2r(Me.p2l(Ge*Me._length)),ue[Me._name+".range[1]"]=Me.l2r(Me.p2l(ze*Me._length))}else{var Qe=Me._rl[0],tt=Me._rl[1]-Qe;ue[Me._name+".range[0]"]=Me.l2r(Qe+tt*pe),ue[Me._name+".range[1]"]=Me.l2r(Qe+tt*W)}}if(me&&me.length){var Ce=(pe+(1-W))/2;z(me,Ce,1-Ce,ue,[])}}function B(de,pe){for(var W=0;W<de.length;W++){var ue=de[W];if(!ue.fixedrange)if(ue.rangebreaks){var me=0,be=ue._length,Me=ue.p2l(me+pe)-ue.p2l(me),Pe=ue.p2l(be+pe)-ue.p2l(be),Ge=(Me+Pe)/2;ue.range=[ue.l2r(ue._rl[0]-Ge),ue.l2r(ue._rl[1]-Ge)]}else ue.range=[ue.l2r(ue._rl[0]-pe/ue._m),ue.l2r(ue._rl[1]-pe/ue._m)]}}function j(de){return 1-(de>=0?Math.min(de,.9):1/(1/Math.max(de,-.3)+3.222))}function V(de,pe,W){return de?de==="nsew"?W?"":pe==="pan"?"move":"crosshair":de.toLowerCase()+"-resize":"pointer"}function K(de,pe,W,ue,me){return de.append("path").attr("class","zoombox").style({fill:pe>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",f(W,ue)).attr("d",me+"Z")}function te(de,pe,W){return de.append("path").attr("class","zoombox-corners").style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,opacity:0}).attr("transform",f(pe,W)).attr("d","M0,0Z")}function $(de,pe,W,ue,me,be){de.attr("d",ue+"M"+W.l+","+W.t+"v"+W.h+"h"+W.w+"v-"+W.h+"h-"+W.w+"Z"),ie(de,pe,me,be)}function ie(de,pe,W,ue){W||(de.transition().style("fill",ue>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),pe.transition().style("opacity",1).duration(200))}function se(de){r.select(de).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Q(de){D&&de.data&&de._context.showTips&&(t.notifier(t._(de,"Double-click to zoom back out"),"long"),D=!1)}function H(de,pe){return"M"+(de.l-.5)+","+(pe-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(de.r+.5)+","+(pe-C-.5)+"h3v"+(2*C+1)+"h-3Z"}function oe(de,pe){return"M"+(pe-C-.5)+","+(de.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+(pe-C-.5)+","+(de.b+.5)+"v3h"+(2*C+1)+"v-3Z"}function re(de){var pe=Math.floor(Math.min(de.b-de.t,de.r-de.l,C)/2);return"M"+(de.l-3.5)+","+(de.t-.5+pe)+"h3v"+-pe+"h"+pe+"v-3h-"+(pe+3)+"ZM"+(de.r+3.5)+","+(de.t-.5+pe)+"h-3v"+-pe+"h"+-pe+"v-3h"+(pe+3)+"ZM"+(de.r+3.5)+","+(de.b+.5-pe)+"h-3v"+pe+"h"+-pe+"v3h"+(pe+3)+"ZM"+(de.l-3.5)+","+(de.b+.5-pe)+"h3v"+pe+"h"+pe+"v3h-"+(pe+3)+"Z"}function ee(de,pe,W,ue,me){for(var be=!1,Me={},Pe={},Ge,ze,Qe,tt,Ce=(me||{}).xaHash,Ae=(me||{}).yaHash,Be=0;Be<pe.length;Be++){var qe=pe[Be];for(Ge in W)if(qe[Ge]){for(Qe in qe)!(me&&(Ce[Qe]||Ae[Qe]))&&!(Qe.charAt(0)==="x"?W:ue)[Qe]&&(Me[Qe]=Ge);for(ze in ue)!(me&&(Ce[ze]||Ae[ze]))&&qe[ze]&&(be=!0)}for(ze in ue)if(qe[ze])for(tt in qe)!(me&&(Ce[tt]||Ae[tt]))&&!(tt.charAt(0)==="x"?W:ue)[tt]&&(Pe[tt]=ze)}be&&(t.extendFlat(Me,Pe),Pe={});var Tt={},At=[];for(Qe in Me){var Ne=T(de,Qe);At.push(Ne),Tt[Ne._id]=Ne}var ct={},Mt=[];for(tt in Pe){var Wt=T(de,tt);Mt.push(Wt),ct[Wt._id]=Wt}return{xaHash:Tt,yaHash:ct,xaxes:At,yaxes:Mt,xLinks:Me,yLinks:Pe,isSubplotConstrained:be}}function ae(de,pe){if(!u)de.onwheel!==void 0?de.onwheel=pe:de.onmousewheel!==void 0?de.onmousewheel=pe:de.isAddedWheelEvent||(de.isAddedWheelEvent=!0,de.addEventListener("wheel",pe,{passive:!1}));else{var W=de.onwheel!==void 0?"wheel":"mousewheel";de._onwheel&&de.removeEventListener(W,de._onwheel),de._onwheel=pe,de.addEventListener(W,pe,{passive:!1})}}function fe(de){var pe=[];for(var W in de)pe.push(de[W]);return pe}v.exports={makeDragBox:F,makeDragger:N,makeRectDragger:G,makeZoombox:K,makeCorners:te,updateZoombox:$,xyCorners:re,transitionZoombox:ie,removeZoombox:se,showDoubleClickNotifier:Q,attachWheelEventHandler:ae}},{"../../components/color":643,"../../components/dragelement":662,"../../components/dragelement/helpers":661,"../../components/drawing":665,"../../components/fx":683,"../../constants/alignment":745,"../../lib":778,"../../lib/clear_gl_canvases":762,"../../lib/setcursor":799,"../../lib/svg_text_utils":803,"../../plot_api/subroutines":818,"../../registry":911,"../plots":891,"./axes":828,"./axis_ids":831,"./constants":834,"./scale_zoom":846,"./select":847,d3:169,"has-passive-events":441,tinycolor2:576}],837:[function(e,v,S){var r=e("d3"),a=e("../../components/fx"),u=e("../../components/dragelement"),c=e("../../lib/setcursor"),t=e("./dragbox").makeDragBox,f=e("./constants").DRAGGERSIZE;S.initInteractions=function(o){var l=o._fullLayout;if(o._context.staticPlot){r.select(o).selectAll(".drag").remove();return}if(!(!l._has("cartesian")&&!l._has("splom"))){var h=Object.keys(l._plots||{}).sort(function(s,p){if((l._plots[s].mainplot&&!0)===(l._plots[p].mainplot&&!0)){var d=s.split("y"),g=p.split("y");return d[0]===g[0]?Number(d[1]||1)-Number(g[1]||1):Number(d[0]||1)-Number(g[0]||1)}return l._plots[s].mainplot?1:-1});h.forEach(function(s){var p=l._plots[s],d=p.xaxis,g=p.yaxis;if(!p.mainplot){var b=t(o,p,d._offset,g._offset,d._length,g._length,"ns","ew");b.onmousemove=function(w){o._fullLayout._rehover=function(){o._fullLayout._hoversubplot===s&&o._fullLayout._plots[s]&&a.hover(o,w,s)},a.hover(o,w,s),o._fullLayout._lasthover=b,o._fullLayout._hoversubplot=s},b.onmouseout=function(w){o._dragging||(o._fullLayout._hoversubplot=null,u.unhover(o,w))},o._context.showAxisDragHandles&&(t(o,p,d._offset-f,g._offset-f,f,f,"n","w"),t(o,p,d._offset+d._length,g._offset-f,f,f,"n","e"),t(o,p,d._offset-f,g._offset+g._length,f,f,"s","w"),t(o,p,d._offset+d._length,g._offset+g._length,f,f,"s","e"))}if(o._context.showAxisDragHandles){if(s===d._mainSubplot){var m=d._mainLinePosition;d.side==="top"&&(m-=f),t(o,p,d._offset+d._length*.1,m,d._length*.8,f,"","ew"),t(o,p,d._offset,m,d._length*.1,f,"","w"),t(o,p,d._offset+d._length*.9,m,d._length*.1,f,"","e")}if(s===g._mainSubplot){var x=g._mainLinePosition;g.side!=="right"&&(x-=f),t(o,p,x,g._offset+g._length*.1,f,g._length*.8,"ns",""),t(o,p,x,g._offset+g._length*.9,f,g._length*.1,"s",""),t(o,p,x,g._offset,f,g._length*.1,"n","")}}});var i=l._hoverlayer.node();i.onmousemove=function(s){s.target=o._fullLayout._lasthover,a.hover(o,s,l._hoversubplot)},i.onclick=function(s){s.target=o._fullLayout._lasthover,a.click(o,s)},i.onmousedown=function(s){o._fullLayout._lasthover.onmousedown(s)},S.updateFx(o)}},S.updateFx=function(n){var o=n._fullLayout,l=o.dragmode==="pan"?"move":"crosshair";c(o._draggers,l)}},{"../../components/dragelement":662,"../../components/fx":683,"../../lib/setcursor":799,"./constants":834,"./dragbox":836,d3:169}],838:[function(e,v,S){function r(u){var c=u._fullLayout._zoomlayer;c&&c.selectAll(".outline-controllers").remove()}function a(u){var c=u._fullLayout._zoomlayer;c&&c.selectAll(".select-outline").remove(),u._fullLayout._drawing=!1}v.exports={clearOutlineControllers:r,clearSelect:a}},{}],839:[function(e,v,S){var r=e("../../lib").strTranslate;function a(f,n){switch(f.type){case"log":return f.p2d(n);case"date":return f.p2r(n,0,f.calendar);default:return f.p2r(n)}}function u(f,n){switch(f.type){case"log":return f.d2p(n);case"date":return f.r2p(n,0,f.calendar);default:return f.r2p(n)}}function c(f){var n=f._id.charAt(0)==="y"?1:0;return function(o){return a(f,o[n])}}function t(f){return r(f.xaxis._offset,f.yaxis._offset)}v.exports={p2r:a,r2p:u,axValue:c,getTransform:t}},{"../../lib":778}],840:[function(e,v,S){var r=e("../../registry"),a=e("../../lib"),u=e("./axis_ids");v.exports=function(t){return function(n,o){var l=n[t];if(!!Array.isArray(l))for(var h=r.subplotsRegistry.cartesian,i=h.idRegex,s=o._subplots,p=s.xaxis,d=s.yaxis,g=s.cartesian,b=o._has("cartesian")||o._has("gl2d"),m=0;m<l.length;m++){var x=l[m];if(!!a.isPlainObject(x)){var w=u.cleanId(x.xref,"x",!1),y=u.cleanId(x.yref,"y",!1),T=i.x.test(w),M=i.y.test(y);if(T||M){b||a.pushUnique(o._basePlotModules,h);var P=!1;T&&p.indexOf(w)===-1&&(p.push(w),P=!0),M&&d.indexOf(y)===-1&&(d.push(y),P=!0),P&&T&&M&&g.push(w+y)}}}}}},{"../../lib":778,"../../registry":911,"./axis_ids":831}],841:[function(e,v,S){var r=e("d3"),a=e("../../registry"),u=e("../../lib"),c=e("../plots"),t=e("../../components/drawing"),f=e("../get_data").getModuleCalcData,n=e("./axis_ids"),o=e("./constants"),l=e("../../constants/xmlns_namespaces"),h=u.ensureSingle;function i(m,x,w){return u.ensureSingle(m,x,w,function(y){y.datum(w)})}S.name="cartesian",S.attr=["xaxis","yaxis"],S.idRoot=["x","y"],S.idRegex=o.idRegex,S.attrRegex=o.attrRegex,S.attributes=e("./attributes"),S.layoutAttributes=e("./layout_attributes"),S.supplyLayoutDefaults=e("./layout_defaults"),S.transitionAxes=e("./transition_axes"),S.finalizeSubplots=function(m,x){var w=x._subplots,y=w.xaxis,T=w.yaxis,M=w.cartesian,P=M.concat(w.gl2d||[]),L={},I={},E,k,C;for(E=0;E<P.length;E++){var D=P[E].split("y");L[D[0]]=1,I["y"+D[1]]=1}for(E=0;E<y.length;E++)k=y[E],L[k]||(C=(m[n.id2name(k)]||{}).anchor,o.idRegex.y.test(C)||(C="y"),M.push(k+C),P.push(k+C),I[C]||(I[C]=1,u.pushUnique(T,C)));for(E=0;E<T.length;E++)C=T[E],I[C]||(k=(m[n.id2name(C)]||{}).anchor,o.idRegex.x.test(k)||(k="x"),M.push(k+C),P.push(k+C),L[k]||(L[k]=1,u.pushUnique(y,k)));if(!P.length){k="",C="";for(var F in m)if(o.attrRegex.test(F)){var N=F.charAt(0);N==="x"?(!k||+F.substr(5)<+k.substr(5))&&(k=F):(!C||+F.substr(5)<+C.substr(5))&&(C=F)}k=k?n.name2id(k):"x",C=C?n.name2id(C):"y",y.push(k),T.push(C),M.push(k+C)}},S.plot=function(m,x,w,y){var T=m._fullLayout,M=T._subplots.cartesian,P=m.calcdata,L;if(!Array.isArray(x))for(x=[],L=0;L<P.length;L++)x.push(L);for(L=0;L<M.length;L++){for(var I=M[L],E=T._plots[I],k=[],C,D=0;D<P.length;D++){var F=P[D],N=F[0].trace;N.xaxis+N.yaxis===I&&((x.indexOf(N.index)!==-1||N.carpet)&&(C&&C[0].trace.xaxis+C[0].trace.yaxis===I&&["tonextx","tonexty","tonext"].indexOf(N.fill)!==-1&&k.indexOf(C)===-1&&k.push(C),k.push(F)),C=F)}s(m,E,k,w,y)}};function s(m,x,w,y,T){for(var M=o.traceLayerClasses,P=m._fullLayout,L=P._modules,I,E,k,C=[],D=[],F=0;F<L.length;F++){I=L[F];var N=I.name,G=a.modules[N].categories;if(G.svg){var U=I.layerName||N+"layer",X=I.plot;E=f(w,X),k=E[0],w=E[1],k.length&&C.push({i:M.indexOf(U),className:U,plotMethod:X,cdModule:k}),G.zoomScale&&D.push("."+U)}}C.sort(function(j,V){return j.i-V.i});var z=x.plot.selectAll("g.mlayer").data(C,function(j){return j.className});if(z.enter().append("g").attr("class",function(j){return j.className}).classed("mlayer",!0).classed("rangeplot",x.isRangePlot),z.exit().remove(),z.order(),z.each(function(j){var V=r.select(this),K=j.className;j.plotMethod(m,x,j.cdModule,V,y,T),o.clipOnAxisFalseQuery.indexOf("."+K)===-1&&t.setClipUrl(V,x.layerClipId,m)}),P._has("scattergl")&&(I=a.getModule("scattergl"),k=f(w,I)[0],I.plot(m,x,k)),!m._context.staticPlot&&(x._hasClipOnAxisFalse&&(x.clipOnAxisFalseTraces=x.plot.selectAll(o.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),D.length)){var B=x.plot.selectAll(D.join(",")).selectAll(".trace");x.zoomScalePts=B.selectAll("path.point"),x.zoomScaleTxt=B.selectAll(".textpoint")}}S.clean=function(m,x,w,y){var T=y._plots||{},M=x._plots||{},P=y._subplots||{},L,I,E;if(y._hasOnlyLargeSploms&&!x._hasOnlyLargeSploms)for(E in T)L=T[E],L.plotgroup&&L.plotgroup.remove();var k=y._has&&y._has("gl"),C=x._has&&x._has("gl");if(k&&!C)for(E in T)L=T[E],L._scene&&L._scene.destroy();if(P.xaxis&&P.yaxis){var D=n.listIds({_fullLayout:y});for(I=0;I<D.length;I++){var F=D[I];x[n.id2name(F)]||y._infolayer.selectAll(".g-"+F+"title").remove()}}var N=y._has&&y._has("cartesian"),G=x._has&&x._has("cartesian");if(N&&!G)g(y._cartesianlayer.selectAll(".subplot"),y),y._defs.selectAll(".axesclip").remove(),delete y._axisConstraintGroups,delete y._axisMatchGroups;else if(P.cartesian)for(I=0;I<P.cartesian.length;I++){var U=P.cartesian[I];if(!M[U]){var X="."+U+",."+U+"-x,."+U+"-y";y._cartesianlayer.selectAll(X).remove(),b(U,y)}}},S.drawFramework=function(m){var x=m._fullLayout,w=p(m),y=x._cartesianlayer.selectAll(".subplot").data(w,String);y.enter().append("g").attr("class",function(T){return"subplot "+T[0]}),y.order(),y.exit().call(g,x),y.each(function(T){var M=T[0],P=x._plots[M];P.plotgroup=r.select(this),d(m,P),P.draglayer=h(x._draggers,"g",M)})},S.rangePlot=function(m,x,w){d(m,x),s(m,x,w),c.style(m)};function p(m){var x=m._fullLayout,w=x._subplots.cartesian,y=w.length,T,M,P,L,I,E,k=[],C=[];for(T=0;T<y;T++){P=w[T],L=x._plots[P],I=L.xaxis,E=L.yaxis;var D=I._mainAxis,F=E._mainAxis,N=D._id+F._id,G=x._plots[N];L.overlays=[],N!==P&&G?(L.mainplot=N,L.mainplotinfo=G,C.push(P)):(L.mainplot=void 0,L.mainplotinfo=void 0,k.push(P))}for(T=0;T<C.length;T++)P=C[T],L=x._plots[P],L.mainplotinfo.overlays.push(L);var U=k.concat(C),X=new Array(y);for(T=0;T<y;T++){P=U[T],L=x._plots[P],I=L.xaxis,E=L.yaxis;var z=[P,I.layer,E.layer,I.overlaying||"",E.overlaying||""];for(M=0;M<L.overlays.length;M++)z.push(L.overlays[M].id);X[T]=z}return X}function d(m,x){var w=x.plotgroup,y=x.id,T=o.layerValue2layerClass[x.xaxis.layer],M=o.layerValue2layerClass[x.yaxis.layer],P=m._fullLayout._hasOnlyLargeSploms;if(x.mainplot){var I=x.mainplotinfo,E=I.plotgroup,k=y+"-x",C=y+"-y";x.gridlayer=I.gridlayer,x.zerolinelayer=I.zerolinelayer,h(I.overlinesBelow,"path",k),h(I.overlinesBelow,"path",C),h(I.overaxesBelow,"g",k),h(I.overaxesBelow,"g",C),x.plot=h(I.overplot,"g",y),h(I.overlinesAbove,"path",k),h(I.overlinesAbove,"path",C),h(I.overaxesAbove,"g",k),h(I.overaxesAbove,"g",C),x.xlines=E.select(".overlines-"+T).select("."+k),x.ylines=E.select(".overlines-"+M).select("."+C),x.xaxislayer=E.select(".overaxes-"+T).select("."+k),x.yaxislayer=E.select(".overaxes-"+M).select("."+C)}else if(P)x.xlines=h(w,"path","xlines-above"),x.ylines=h(w,"path","ylines-above"),x.xaxislayer=h(w,"g","xaxislayer-above"),x.yaxislayer=h(w,"g","yaxislayer-above");else{var L=h(w,"g","layer-subplot");x.shapelayer=h(L,"g","shapelayer"),x.imagelayer=h(L,"g","imagelayer"),x.gridlayer=h(w,"g","gridlayer"),x.zerolinelayer=h(w,"g","zerolinelayer"),h(w,"path","xlines-below"),h(w,"path","ylines-below"),x.overlinesBelow=h(w,"g","overlines-below"),h(w,"g","xaxislayer-below"),h(w,"g","yaxislayer-below"),x.overaxesBelow=h(w,"g","overaxes-below"),x.plot=h(w,"g","plot"),x.overplot=h(w,"g","overplot"),x.xlines=h(w,"path","xlines-above"),x.ylines=h(w,"path","ylines-above"),x.overlinesAbove=h(w,"g","overlines-above"),h(w,"g","xaxislayer-above"),h(w,"g","yaxislayer-above"),x.overaxesAbove=h(w,"g","overaxes-above"),x.xlines=w.select(".xlines-"+T),x.ylines=w.select(".ylines-"+M),x.xaxislayer=w.select(".xaxislayer-"+T),x.yaxislayer=w.select(".yaxislayer-"+M)}P||(i(x.gridlayer,"g",x.xaxis._id),i(x.gridlayer,"g",x.yaxis._id),x.gridlayer.selectAll("g").map(function(D){return D[0]}).sort(n.idSort)),x.xlines.style("fill","none").classed("crisp",!0),x.ylines.style("fill","none").classed("crisp",!0)}function g(m,x){if(!!m){var w={};m.each(function(I){var E=I[0],k=r.select(this);k.remove(),b(E,x),w[E]=!0});for(var y in x._plots)for(var T=x._plots[y],M=T.overlays||[],P=0;P<M.length;P++){var L=M[P];w[L.id]&&L.plot.selectAll(".trace").remove()}}}function b(m,x){x._draggers.selectAll("g."+m).remove(),x._defs.select("#clip"+x._uid+m+"plot").remove()}S.toSVG=function(m){var x=m._fullLayout._glimages,w=r.select(m).selectAll(".svg-container"),y=w.filter(function(M,P){return P===w.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function T(){var M=this,P=M.toDataURL("image/png"),L=x.append("svg:image");L.attr({xmlns:l.svg,"xlink:href":P,preserveAspectRatio:"none",x:0,y:0,width:M.width,height:M.height})}y.each(T)},S.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":665,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../registry":911,"../get_data":865,"../plots":891,"./attributes":826,"./axis_ids":831,"./constants":834,"./graph_interact":837,"./layout_attributes":842,"./layout_defaults":843,"./transition_axes":852,d3:169}],842:[function(e,v,S){var r=e("../font_attributes"),a=e("../../components/color/attributes"),u=e("../../components/drawing/attributes").dash,c=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray;e("../../constants/docs").FORMAT_LINK,e("../../constants/docs").DATE_FORMAT_LINK;var f=e("../../constants/numerical").ONEDAY,n=e("./constants"),o=n.HOUR_PATTERN,l=n.WEEKDAY_PATTERN;v.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:a.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:r({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"calc"},rangebreaks:t("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[l,o,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:f},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:c({},u,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"data",editType:"none"},tickfont:r({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:t("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:a.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:r({editType:"ticks"})}}},{"../../components/color/attributes":642,"../../components/drawing/attributes":664,"../../constants/docs":748,"../../constants/numerical":753,"../../lib/extend":768,"../../plot_api/plot_template":817,"../font_attributes":856,"./constants":834}],843:[function(e,v,S){var r=e("../../lib"),a=e("../../components/color"),u=e("../../components/fx/helpers").isUnifiedHover,c=e("../../components/fx/hovermode_defaults"),t=e("../../plot_api/plot_template"),f=e("../layout_attributes"),n=e("./layout_attributes"),o=e("./type_defaults"),l=e("./axis_defaults"),h=e("./constraints"),i=e("./position_defaults"),s=e("./axis_ids"),p=s.id2name,d=s.name2id,g=e("./constants").AX_ID_PATTERN,b=e("../../registry"),m=b.traceIs,x=b.getComponentMethod;function w(y,T,M){Array.isArray(y[T])?y[T].push(M):y[T]=[M]}v.exports=function(T,M,P){var L=M.autotypenumbers,I={},E={},k={},C={},D={},F={},N={},G={},U={},X={},z,B;for(z=0;z<P.length;z++){var j=P[z];if(!(!m(j,"cartesian")&&!m(j,"gl2d"))){var V;if(j.xaxis)V=p(j.xaxis),w(I,V,j);else if(j.xaxes)for(B=0;B<j.xaxes.length;B++)w(I,p(j.xaxes[B]),j);var K;if(j.yaxis)K=p(j.yaxis),w(I,K,j);else if(j.yaxes)for(B=0;B<j.yaxes.length;B++)w(I,p(j.yaxes[B]),j);if(j.type==="funnel"?j.orientation==="h"?(V&&(E[V]=!0),K&&(N[K]=!0)):K&&(k[K]=!0):j.type==="image"?(K&&(G[K]=!0),V&&(G[V]=!0)):(K&&(D[K]=!0,F[K]=!0),(!m(j,"carpet")||j.type==="carpet"&&!j._cheater)&&V&&(C[V]=!0)),j.type==="carpet"&&j._cheater&&V&&(E[V]=!0),m(j,"2dMap")&&(U[V]=!0,U[K]=!0),m(j,"oriented")){var te=j.orientation==="h"?K:V;X[te]=!0}}}var $=M._subplots,ie=$.xaxis,se=$.yaxis,Q=r.simpleMap(ie,p),H=r.simpleMap(se,p),oe=Q.concat(H),re=a.background;ie.length&&se.length&&(re=r.coerce(T,M,f,"plot_bgcolor"));var ee=a.combine(re,M.paper_bgcolor),ae,fe,de,pe,W;function ue(){var Te=I[ae]||[];W._traceIndices=Te.map(function(Le){return Le._expandedIndex}),W._annIndices=[],W._shapeIndices=[],W._imgIndices=[],W._subplotsWith=[],W._counterAxes=[],W._name=W._attr=ae,W._id=fe}function me(Te,Le){return r.coerce(pe,W,n,Te,Le)}function be(Te,Le){return r.coerce2(pe,W,n,Te,Le)}function Me(Te){return Te==="x"?se:ie}function Pe(Te,Le){for(var Ue=Te==="x"?Q:H,et=[],ke=0;ke<Ue.length;ke++){var Ie=Ue[ke];Ie!==Le&&!(T[Ie]||{}).overlaying&&et.push(d(Ie))}return et}var Ge={x:Me("x"),y:Me("y")},ze=Ge.x.concat(Ge.y),Qe={},tt=[];function Ce(){var Te=pe.matches;g.test(Te)&&ze.indexOf(Te)===-1&&(Qe[Te]=pe.type,tt=Object.keys(Qe))}var Ae=c(T,M,P),Be=u(Ae);for(z=0;z<oe.length;z++){ae=oe[z],fe=d(ae),de=ae.charAt(0),r.isPlainObject(T[ae])||(T[ae]={}),pe=T[ae],W=t.newContainer(M,ae,de+"axis"),ue();var qe=de==="x"&&!C[ae]&&E[ae]||de==="y"&&!D[ae]&&k[ae],Tt=de==="y"&&(!F[ae]&&N[ae]||G[ae]),At={letter:de,font:M.font,outerTicks:U[ae],showGrid:!X[ae],data:I[ae]||[],bgColor:ee,calendar:M.calendar,automargin:!0,visibleDflt:qe,reverseDflt:Tt,autotypenumbersDflt:L,splomStash:((M._splomAxes||{})[de]||{})[fe]};me("uirevision",M.uirevision),o(pe,W,me,At),l(pe,W,me,At,M);var Ne=Be&&de===Ae.charAt(0),ct=be("spikecolor",Be?W.color:void 0),Mt=be("spikethickness",Be?1.5:void 0),Wt=be("spikedash",Be?"dot":void 0),qt=be("spikemode",Be?"across":void 0),zt=be("spikesnap",Be?"hovered data":void 0),$t=me("showspikes",!!Ne||!!ct||!!Mt||!!Wt||!!qt||!!zt);$t||(delete W.spikecolor,delete W.spikethickness,delete W.spikedash,delete W.spikemode,delete W.spikesnap),i(pe,W,me,{letter:de,counterAxes:Ge[de],overlayableAxes:Pe(de,ae),grid:M.grid}),me("title.standoff"),Ce(),W._input=pe}for(z=0;z<tt.length;){fe=tt[z++],ae=p(fe),de=ae.charAt(0),r.isPlainObject(T[ae])||(T[ae]={}),pe=T[ae],W=t.newContainer(M,ae,de+"axis"),ue();var rr={letter:de,font:M.font,outerTicks:U[ae],showGrid:!X[ae],data:[],bgColor:ee,calendar:M.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:L,splomStash:((M._splomAxes||{})[de]||{})[fe]};me("uirevision",M.uirevision),W.type=Qe[fe]||"linear",l(pe,W,me,rr,M),i(pe,W,me,{letter:de,counterAxes:Ge[de],overlayableAxes:Pe(de,ae),grid:M.grid}),me("fixedrange"),Ce(),W._input=pe}var Lt=x("rangeslider","handleDefaults"),Ct=x("rangeselector","handleDefaults");for(z=0;z<Q.length;z++)ae=Q[z],pe=T[ae],W=M[ae],Lt(T,M,ae),W.type==="date"&&Ct(pe,W,M,H,W.calendar),me("fixedrange");for(z=0;z<H.length;z++){ae=H[z],pe=T[ae],W=M[ae];var dt=M[p(W.anchor)],lt=x("rangeslider","isVisible")(dt);me("fixedrange",lt)}h.handleDefaults(T,M,{axIds:ze.concat(tt).sort(s.idSort),axHasImage:G})}},{"../../components/color":643,"../../components/fx/helpers":679,"../../components/fx/hovermode_defaults":682,"../../lib":778,"../../plot_api/plot_template":817,"../../registry":911,"../layout_attributes":882,"./axis_defaults":830,"./axis_ids":831,"./constants":834,"./constraints":835,"./layout_attributes":842,"./position_defaults":845,"./type_defaults":853}],844:[function(e,v,S){var r=e("tinycolor2").mix,a=e("../../components/color/attributes").lightFraction,u=e("../../lib");v.exports=function(t,f,n,o){o=o||{};var l=o.dfltColor;function h(T,M){return u.coerce2(t,f,o.attributes,T,M)}var i=h("linecolor",l),s=h("linewidth"),p=n("showline",o.showLine||!!i||!!s);p||(delete f.linecolor,delete f.linewidth);var d=r(l,o.bgColor,o.blend||a).toRgbString(),g=h("gridcolor",d),b=h("gridwidth"),m=n("showgrid",o.showGrid||!!g||!!b);if(m||(delete f.gridcolor,delete f.gridwidth),!o.noZeroLine){var x=h("zerolinecolor",l),w=h("zerolinewidth"),y=n("zeroline",o.showGrid||!!x||!!w);y||(delete f.zerolinecolor,delete f.zerolinewidth)}}},{"../../components/color/attributes":642,"../../lib":778,tinycolor2:576}],845:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib");v.exports=function(c,t,f,n){var o=n.counterAxes||[],l=n.overlayableAxes||[],h=n.letter,i=n.grid,s,p,d,g;i&&(p=i._domains[h][i._axisMap[t._id]],s=i._anchors[t._id],p&&(d=i[h+"side"].split(" ")[0],g=i.domain[h][d==="right"||d==="top"?1:0])),p=p||[0,1],s=s||(r(c.position)?"free":o[0]||"free"),d=d||(h==="x"?"bottom":"left"),g=g||0;var b=a.coerce(c,t,{anchor:{valType:"enumerated",values:["free"].concat(o),dflt:s}},"anchor");b==="free"&&f("position",g),a.coerce(c,t,{side:{valType:"enumerated",values:h==="x"?["bottom","top"]:["left","right"],dflt:d}},"side");var m=!1;if(l.length&&(m=a.coerce(c,t,{overlaying:{valType:"enumerated",values:[!1].concat(l),dflt:!1}},"overlaying")),!m){var x=f("domain",p);x[0]>x[1]-1/4096&&(t.domain=p),a.noneOrAll(c.domain,t.domain,p)}return f("layer"),t}},{"../../lib":778,"fast-isnumeric":241}],846:[function(e,v,S){var r=e("../../constants/alignment").FROM_BL;v.exports=function(u,c,t){t===void 0&&(t=r[u.constraintoward||"center"]);var f=[u.r2l(u.range[0]),u.r2l(u.range[1])],n=f[0]+(f[1]-f[0])*t;u.range=u._input.range=[u.l2r(n+(f[0]-n)*c),u.l2r(n+(f[1]-n)*c)],u.setScale()}},{"../../constants/alignment":745}],847:[function(e,v,S){var r=e("polybooljs"),a=e("../../registry"),u=e("../../components/drawing").dashStyle,c=e("../../components/color"),t=e("../../components/fx"),f=e("../../components/fx/helpers").makeEventData,n=e("../../components/dragelement/helpers"),o=n.freeMode,l=n.rectMode,h=n.drawMode,i=n.openMode,s=n.selectMode,p=e("../../components/shapes/draw_newshape/display_outlines"),d=e("../../components/shapes/draw_newshape/helpers").handleEllipse,g=e("../../components/shapes/draw_newshape/newshapes"),b=e("../../lib"),m=e("../../lib/polygon"),x=e("../../lib/throttle"),w=e("./axis_ids").getFromId,y=e("../../lib/clear_gl_canvases"),T=e("../../plot_api/subroutines").redrawReglTraces,M=e("./constants"),P=M.MINSELECT,L=m.filter,I=m.tester,E=e("./handle_outline").clearSelect,k=e("./helpers"),C=k.p2r,D=k.axValue,F=k.getTransform;function N(ae,fe,de,pe,W){var ue=o(W),me=l(W),be=i(W),Me=h(W),Pe=s(W),Ge=W==="drawline",ze=W==="drawcircle",Qe=Ge||ze,tt=pe.gd,Ce=tt._fullLayout,Ae=Ce._zoomlayer,Be=pe.element.getBoundingClientRect(),qe=pe.plotinfo,Tt=F(qe),At=fe-Be.left,Ne=de-Be.top;Ce._calcInverseTransform(tt);var ct=b.apply3DTransform(Ce._invTransform)(At,Ne);At=ct[0],Ne=ct[1];var Mt=Ce._invScaleX,Wt=Ce._invScaleY,qt=At,zt=Ne,$t="M"+At+","+Ne,rr=pe.xaxes[0]._length,Lt=pe.yaxes[0]._length,Ct=pe.xaxes.concat(pe.yaxes),dt=ae.altKey&&!(h(W)&&be),lt,Te,Le,Ue,et,ke,Ie;j(ae,tt,pe),ue&&(lt=L([[At,Ne]],M.BENDPX));var He=Ae.selectAll("path.select-outline-"+qe.id).data(Me?[0]:[1,2]),Ye=Ce.newshape;He.enter().append("path").attr("class",function(It){return"select-outline select-outline-"+It+" select-outline-"+qe.id}).style(Me?{opacity:Ye.opacity/2,fill:be?void 0:Ye.fillcolor,stroke:Ye.line.color,"stroke-dasharray":u(Ye.line.dash,Ye.line.width),"stroke-width":Ye.line.width+"px"}:{}).attr("fill-rule",Ye.fillrule).classed("cursor-move",!!Me).attr("transform",Tt).attr("d",$t+"Z");var ft=Ae.append("path").attr("class","zoombox-corners").style({fill:c.background,stroke:c.defaultLine,"stroke-width":1}).attr("transform",Tt).attr("d","M0,0Z"),it=Ce._uid+M.SELECTID,je=[],ot=K(tt,pe.xaxes,pe.yaxes,pe.subplot);function Je(It,Nt){return It-Nt}var st;qe.fillRangeItems?st=qe.fillRangeItems:me?st=function(It,Nt){var nr=It.range={};for(et=0;et<Ct.length;et++){var We=Ct[et],Fe=We._id.charAt(0);nr[We._id]=[C(We,Nt[Fe+"min"]),C(We,Nt[Fe+"max"])].sort(Je)}}:st=function(It,Nt,nr){var We=It.lassoPoints={};for(et=0;et<Ct.length;et++){var Fe=Ct[et];We[Fe._id]=nr.filtered.map(D(Fe))}},pe.moveFn=function(It,Nt){qt=Math.max(0,Math.min(rr,Mt*It+At)),zt=Math.max(0,Math.min(Lt,Wt*Nt+Ne));var nr=Math.abs(qt-At),We=Math.abs(zt-Ne);if(me){var Fe,bt,kt;if(Pe){var _t=Ce.selectdirection;switch(_t==="any"?We<Math.min(nr*.6,P)?Fe="h":nr<Math.min(We*.6,P)?Fe="v":Fe="d":Fe=_t,Fe){case"h":bt=ze?Lt/2:0,kt=Lt;break;case"v":bt=ze?rr/2:0,kt=rr;break}}if(Me)switch(Ce.newshape.drawdirection){case"vertical":Fe="h",bt=ze?Lt/2:0,kt=Lt;break;case"horizontal":Fe="v",bt=ze?rr/2:0,kt=rr;break;case"ortho":nr<We?(Fe="h",bt=Ne,kt=zt):(Fe="v",bt=At,kt=qt);break;default:Fe="d"}Fe==="h"?(Ue=Qe?d(ze,[qt,bt],[qt,kt]):[[At,bt],[At,kt],[qt,kt],[qt,bt]],Ue.xmin=Qe?qt:Math.min(At,qt),Ue.xmax=Qe?qt:Math.max(At,qt),Ue.ymin=Math.min(bt,kt),Ue.ymax=Math.max(bt,kt),ft.attr("d","M"+Ue.xmin+","+(Ne-P)+"h-4v"+2*P+"h4ZM"+(Ue.xmax-1)+","+(Ne-P)+"h4v"+2*P+"h-4Z")):Fe==="v"?(Ue=Qe?d(ze,[bt,zt],[kt,zt]):[[bt,Ne],[bt,zt],[kt,zt],[kt,Ne]],Ue.xmin=Math.min(bt,kt),Ue.xmax=Math.max(bt,kt),Ue.ymin=Qe?zt:Math.min(Ne,zt),Ue.ymax=Qe?zt:Math.max(Ne,zt),ft.attr("d","M"+(At-P)+","+Ue.ymin+"v-4h"+2*P+"v4ZM"+(At-P)+","+(Ue.ymax-1)+"v4h"+2*P+"v-4Z")):Fe==="d"&&(Ue=Qe?d(ze,[At,Ne],[qt,zt]):[[At,Ne],[At,zt],[qt,zt],[qt,Ne]],Ue.xmin=Math.min(At,qt),Ue.xmax=Math.max(At,qt),Ue.ymin=Math.min(Ne,zt),Ue.ymax=Math.max(Ne,zt),ft.attr("d","M0,0Z"))}else ue&&(lt.addPt([qt,zt]),Ue=lt.filtered);pe.selectionDefs&&pe.selectionDefs.length?(Le=oe(pe.mergedPolygons,Ue,dt),Ue.subtract=dt,Te=B(pe.selectionDefs.concat([Ue]))):(Le=[Ue],Te=I(Ue)),p(ee(Le,be),He,pe),Pe&&x.throttle(it,M.SELECTDELAY,function(){je=[];var Rt,Dt;for(et=0;et<ot.length;et++)if(ke=ot[et],Dt=ke._module.selectPoints(ke,Te),Rt=re(Dt,ke),je.length)for(var Ut=0;Ut<Rt.length;Ut++)je.push(Rt[Ut]);else je=Rt;Ie={points:je},H(tt,ot,Ie),st(Ie,Ue,lt),pe.gd.emit("plotly_selecting",Ie)})},pe.clickFn=function(It,Nt){if(ft.remove(),tt._fullLayout._activeShapeIndex>=0){tt._fullLayout._deactivateShape(tt);return}if(!Me){var nr=Ce.clickmode;x.done(it).then(function(){if(x.clear(it),It===2){for(He.remove(),et=0;et<ot.length;et++)ke=ot[et],ke._module.selectPoints(ke,!1);H(tt,ot),V(pe),tt.emit("plotly_deselect",null)}else nr.indexOf("select")>-1&&G(Nt,tt,pe.xaxes,pe.yaxes,pe.subplot,pe,He),nr==="event"&&tt.emit("plotly_selected",void 0);t.click(tt,Nt)}).catch(b.error)}},pe.doneFn=function(){ft.remove(),x.done(it).then(function(){x.clear(it),pe.gd.emit("plotly_selected",Ie),Ue&&pe.selectionDefs&&(Ue.subtract=dt,pe.selectionDefs.push(Ue),pe.mergedPolygons.length=0,[].push.apply(pe.mergedPolygons,Le)),pe.doneFnCompleted&&pe.doneFnCompleted(je)}).catch(b.error),Me&&V(pe)}}function G(ae,fe,de,pe,W,ue,me){var be=fe._hoverdata,Me=fe._fullLayout,Pe=Me.clickmode,Ge=Pe.indexOf("event")>-1,ze=[],Qe,tt,Ce,Ae,Be,qe,Tt,At,Ne,ct;if(te(be)){j(ae,fe,ue),Qe=K(fe,de,pe,W);var Mt=$(be,Qe),Wt=Mt.pointNumbers.length>0;if(Wt?se(Qe,Mt):Q(Qe)&&(Tt=ie(Mt))){for(me&&me.remove(),ct=0;ct<Qe.length;ct++)tt=Qe[ct],tt._module.selectPoints(tt,!1);H(fe,Qe),V(ue),Ge&&fe.emit("plotly_deselect",null)}else{At=ae.shiftKey&&(Tt!==void 0?Tt:ie(Mt)),Ce=U(Mt.pointNumber,Mt.searchInfo,At);var qt=ue.selectionDefs.concat([Ce]);for(Ae=B(qt),ct=0;ct<Qe.length;ct++)if(Be=Qe[ct]._module.selectPoints(Qe[ct],Ae),qe=re(Be,Qe[ct]),ze.length)for(var zt=0;zt<qe.length;zt++)ze.push(qe[zt]);else ze=qe;if(Ne={points:ze},H(fe,Qe,Ne),Ce&&ue&&ue.selectionDefs.push(Ce),me){var $t=ue.mergedPolygons,rr=i(ue.dragmode);p(ee($t,rr),me,ue)}Ge&&fe.emit("plotly_selected",Ne)}}}function U(ae,fe,de){return{pointNumber:ae,searchInfo:fe,subtract:de}}function X(ae){return"pointNumber"in ae&&"searchInfo"in ae}function z(ae){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(fe,de,pe,W){var ue=ae.searchInfo.cd[0].trace._expandedIndex,me=W.cd[0].trace._expandedIndex;return me===ue&&pe===ae.pointNumber},isRect:!1,degenerate:!1,subtract:ae.subtract}}function B(ae){for(var fe=[],de=X(ae[0])?0:ae[0][0][0],pe=de,W=X(ae[0])?0:ae[0][0][1],ue=W,me=0;me<ae.length;me++)if(X(ae[me]))fe.push(z(ae[me]));else{var be=m.tester(ae[me]);be.subtract=ae[me].subtract,fe.push(be),de=Math.min(de,be.xmin),pe=Math.max(pe,be.xmax),W=Math.min(W,be.ymin),ue=Math.max(ue,be.ymax)}function Me(Pe,Ge,ze,Qe){for(var tt=!1,Ce=0;Ce<fe.length;Ce++)fe[Ce].contains(Pe,Ge,ze,Qe)&&(tt=fe[Ce].subtract===!1);return tt}return{xmin:de,xmax:pe,ymin:W,ymax:ue,pts:[],contains:Me,isRect:!1,degenerate:!1}}function j(ae,fe,de){fe._fullLayout._drawing=!1;var pe=fe._fullLayout,W=de.plotinfo,ue=de.dragmode,me=pe._lastSelectedSubplot&&pe._lastSelectedSubplot===W.id,be=(ae.shiftKey||ae.altKey)&&!(h(ue)&&i(ue));me&&be&&W.selection&&W.selection.selectionDefs&&!de.selectionDefs?(de.selectionDefs=W.selection.selectionDefs,de.mergedPolygons=W.selection.mergedPolygons):(!be||!W.selection)&&V(de),me||(E(fe),pe._lastSelectedSubplot=W.id)}function V(ae){var fe=ae.dragmode,de=ae.plotinfo,pe=ae.gd;if(pe._fullLayout._activeShapeIndex>=0&&pe._fullLayout._deactivateShape(pe),h(fe)){var W=pe._fullLayout,ue=W._zoomlayer,me=ue.selectAll(".select-outline-"+de.id);if(me&&pe._fullLayout._drawing){var be=g(me,ae);be&&a.call("_guiRelayout",pe,{shapes:be}),pe._fullLayout._drawing=!1}}de.selection={},de.selection.selectionDefs=ae.selectionDefs=[],de.selection.mergedPolygons=ae.mergedPolygons=[]}function K(ae,fe,de,pe){var W=[],ue=fe.map(function(tt){return tt._id}),me=de.map(function(tt){return tt._id}),be,Me,Pe;for(Pe=0;Pe<ae.calcdata.length;Pe++)if(be=ae.calcdata[Pe],Me=be[0].trace,!(Me.visible!==!0||!Me._module||!Me._module.selectPoints))if(pe&&(Me.subplot===pe||Me.geo===pe))W.push(Qe(Me._module,be,fe[0],de[0]));else if(Me.type==="splom"&&Me._xaxes[ue[0]]&&Me._yaxes[me[0]]){var Ge=Qe(Me._module,be,fe[0],de[0]);Ge.scene=ae._fullLayout._splomScenes[Me.uid],W.push(Ge)}else if(Me.type==="sankey"){var ze=Qe(Me._module,be,fe[0],de[0]);W.push(ze)}else{if(ue.indexOf(Me.xaxis)===-1||me.indexOf(Me.yaxis)===-1)continue;W.push(Qe(Me._module,be,w(ae,Me.xaxis),w(ae,Me.yaxis)))}return W;function Qe(tt,Ce,Ae,Be){return{_module:tt,cd:Ce,xaxis:Ae,yaxis:Be}}}function te(ae){return ae&&Array.isArray(ae)&&ae[0].hoverOnBox!==!0}function $(ae,fe){var de=ae[0],pe=-1,W=[],ue,me;for(me=0;me<fe.length;me++)if(ue=fe[me],de.fullData._expandedIndex===ue.cd[0].trace._expandedIndex){if(de.hoverOnBox===!0)break;de.pointNumber!==void 0?pe=de.pointNumber:de.binNumber!==void 0&&(pe=de.binNumber,W=de.pointNumbers);break}return{pointNumber:pe,pointNumbers:W,searchInfo:ue}}function ie(ae){var fe=ae.searchInfo.cd[0].trace,de=ae.pointNumber,pe=ae.pointNumbers,W=pe.length>0,ue=W?pe[0]:de;return fe.selectedpoints?fe.selectedpoints.indexOf(ue)>-1:!1}function se(ae,fe){var de=[],pe,W,ue,me;for(me=0;me<ae.length;me++)pe=ae[me],pe.cd[0].trace.selectedpoints&&pe.cd[0].trace.selectedpoints.length>0&&de.push(pe);if(de.length===1&&(ue=de[0]===fe.searchInfo,ue&&(W=fe.searchInfo.cd[0].trace,W.selectedpoints.length===fe.pointNumbers.length))){for(me=0;me<fe.pointNumbers.length;me++)if(W.selectedpoints.indexOf(fe.pointNumbers[me])<0)return!1;return!0}return!1}function Q(ae){var fe=0,de,pe,W;for(W=0;W<ae.length;W++)if(de=ae[W],pe=de.cd[0].trace,pe.selectedpoints&&(pe.selectedpoints.length>1||(fe+=pe.selectedpoints.length,fe>1)))return!1;return fe===1}function H(ae,fe,de){var pe,W,ue,me;for(pe=0;pe<fe.length;pe++){var be=fe[pe].cd[0].trace._fullInput,Me=ae._fullLayout._tracePreGUI[be.uid]||{};Me.selectedpoints===void 0&&(Me.selectedpoints=be._input.selectedpoints||null)}if(de){var Pe=de.points||[];for(pe=0;pe<fe.length;pe++)me=fe[pe].cd[0].trace,me._input.selectedpoints=me._fullInput.selectedpoints=[],me._fullInput!==me&&(me.selectedpoints=[]);for(pe=0;pe<Pe.length;pe++){var Ge=Pe[pe],ze=Ge.data,Qe=Ge.fullData;Ge.pointIndices?([].push.apply(ze.selectedpoints,Ge.pointIndices),me._fullInput!==me&&[].push.apply(Qe.selectedpoints,Ge.pointIndices)):(ze.selectedpoints.push(Ge.pointIndex),me._fullInput!==me&&Qe.selectedpoints.push(Ge.pointIndex))}}else for(pe=0;pe<fe.length;pe++)me=fe[pe].cd[0].trace,delete me.selectedpoints,delete me._input.selectedpoints,me._fullInput!==me&&delete me._fullInput.selectedpoints;var tt=!1;for(pe=0;pe<fe.length;pe++){W=fe[pe],ue=W.cd,me=ue[0].trace,a.traceIs(me,"regl")&&(tt=!0);var Ce=W._module,Ae=Ce.styleOnSelect||Ce.style;Ae&&(Ae(ae,ue,ue[0].node3),ue[0].nodeRangePlot3&&Ae(ae,ue,ue[0].nodeRangePlot3))}tt&&(y(ae),T(ae))}function oe(ae,fe,de){var pe;return de?(pe=r.difference({regions:ae,inverted:!1},{regions:[fe],inverted:!1}),pe.regions):(pe=r.union({regions:ae,inverted:!1},{regions:[fe],inverted:!1}),pe.regions)}function re(ae,fe){if(Array.isArray(ae))for(var de=fe.cd,pe=fe.cd[0].trace,W=0;W<ae.length;W++)ae[W]=f(ae[W],pe,de);return ae}function ee(ae,fe){for(var de=[],pe=0;pe<ae.length;pe++){de[pe]=[];for(var W=0;W<ae[pe].length;W++){de[pe][W]=[],de[pe][W][0]=W?"L":"M";for(var ue=0;ue<ae[pe][W].length;ue++)de[pe][W].push(ae[pe][W][ue])}fe||de[pe].push(["Z",de[pe][0][1],de[pe][0][2]])}return de}v.exports={prepSelect:N,clearSelect:E,clearSelectionsCache:V,selectOnClick:G}},{"../../components/color":643,"../../components/dragelement/helpers":661,"../../components/drawing":665,"../../components/fx":683,"../../components/fx/helpers":679,"../../components/shapes/draw_newshape/display_outlines":728,"../../components/shapes/draw_newshape/helpers":729,"../../components/shapes/draw_newshape/newshapes":730,"../../lib":778,"../../lib/clear_gl_canvases":762,"../../lib/polygon":790,"../../lib/throttle":804,"../../plot_api/subroutines":818,"../../registry":911,"./axis_ids":831,"./constants":834,"./handle_outline":838,"./helpers":839,polybooljs:517}],848:[function(e,v,S){var r=e("d3"),a=e("d3-time-format").utcFormat,u=e("fast-isnumeric"),c=e("../../lib"),t=c.cleanNumber,f=c.ms2DateTime,n=c.dateTime2ms,o=c.ensureNumber,l=c.isArrayOrTypedArray,h=e("../../constants/numerical"),i=h.FP_SAFE,s=h.BADNUM,p=h.LOG_CLIP,d=h.ONEWEEK,g=h.ONEDAY,b=h.ONEHOUR,m=h.ONEMIN,x=h.ONESEC,w=e("./axis_ids"),y=e("./constants"),T=y.HOUR_PATTERN,M=y.WEEKDAY_PATTERN;function P(I){return Math.pow(10,I)}function L(I){return I!=null}v.exports=function(E,k){k=k||{};var C=E._id||"x",D=C.charAt(0);function F(H,oe){if(H>0)return Math.log(H)/Math.LN10;if(H<=0&&oe&&E.range&&E.range.length===2){var re=E.range[0],ee=E.range[1];return .5*(re+ee-2*p*Math.abs(re-ee))}else return s}function N(H,oe,re,ee){if((ee||{}).msUTC&&u(H))return+H;var ae=n(H,re||E.calendar);if(ae===s)if(u(H)){H=+H;var fe=Math.floor(c.mod(H+.05,1)*10),de=Math.round(H-fe/10);ae=n(new Date(de))+fe/10}else return s;return ae}function G(H,oe,re){return f(H,oe,re||E.calendar)}function U(H){return E._categories[Math.round(H)]}function X(H){if(L(H)){if(E._categoriesMap===void 0&&(E._categoriesMap={}),E._categoriesMap[H]!==void 0)return E._categoriesMap[H];E._categories.push(typeof H=="number"?String(H):H);var oe=E._categories.length-1;return E._categoriesMap[H]=oe,oe}return s}function z(H,oe){for(var re=new Array(oe),ee=0;ee<oe;ee++){var ae=(H[0]||[])[ee],fe=(H[1]||[])[ee];re[ee]=B([ae,fe])}return re}function B(H){if(E._categoriesMap)return E._categoriesMap[H]}function j(H){var oe=B(H);if(oe!==void 0)return oe;if(u(H))return+H}function V(H){return u(H)?+H:B(H)}function K(H,oe,re){return r.round(re+oe*H,2)}function te(H,oe,re){return(H-re)/oe}var $=function(oe){return u(oe)?K(oe,E._m,E._b):s},ie=function(H){return te(H,E._m,E._b)};if(E.rangebreaks){var se=D==="y";$=function(H){if(!u(H))return s;var oe=E._rangebreaks.length;if(!oe)return K(H,E._m,E._b);var re=se;E.range[0]>E.range[1]&&(re=!re);for(var ee=re?-1:1,ae=ee*H,fe=0,de=0;de<oe;de++){var pe=ee*E._rangebreaks[de].min,W=ee*E._rangebreaks[de].max;if(ae<pe)break;if(ae>W)fe=de+1;else{fe=ae<(pe+W)/2?de:de+1;break}}var ue=E._B[fe]||0;return isFinite(ue)?K(H,E._m2,ue):0},ie=function(H){var oe=E._rangebreaks.length;if(!oe)return te(H,E._m,E._b);for(var re=0,ee=0;ee<oe&&!(H<E._rangebreaks[ee].pmin);ee++)H>E._rangebreaks[ee].pmax&&(re=ee+1);return te(H,E._m2,E._B[re])}}E.c2l=E.type==="log"?F:o,E.l2c=E.type==="log"?P:o,E.l2p=$,E.p2l=ie,E.c2p=E.type==="log"?function(H,oe){return $(F(H,oe))}:$,E.p2c=E.type==="log"?function(H){return P(ie(H))}:ie,["linear","-"].indexOf(E.type)!==-1?(E.d2r=E.r2d=E.d2c=E.r2c=E.d2l=E.r2l=t,E.c2d=E.c2r=E.l2d=E.l2r=o,E.d2p=E.r2p=function(H){return E.l2p(t(H))},E.p2d=E.p2r=ie,E.cleanPos=o):E.type==="log"?(E.d2r=E.d2l=function(H,oe){return F(t(H),oe)},E.r2d=E.r2c=function(H){return P(t(H))},E.d2c=E.r2l=t,E.c2d=E.l2r=o,E.c2r=F,E.l2d=P,E.d2p=function(H,oe){return E.l2p(E.d2r(H,oe))},E.p2d=function(H){return P(ie(H))},E.r2p=function(H){return E.l2p(t(H))},E.p2r=ie,E.cleanPos=o):E.type==="date"?(E.d2r=E.r2d=c.identity,E.d2c=E.r2c=E.d2l=E.r2l=N,E.c2d=E.c2r=E.l2d=E.l2r=G,E.d2p=E.r2p=function(H,oe,re){return E.l2p(N(H,0,re))},E.p2d=E.p2r=function(H,oe,re){return G(ie(H),oe,re)},E.cleanPos=function(H){return c.cleanDate(H,s,E.calendar)}):E.type==="category"?(E.d2c=E.d2l=X,E.r2d=E.c2d=E.l2d=U,E.d2r=E.d2l_noadd=j,E.r2c=function(H){var oe=V(H);return oe!==void 0?oe:E.fraction2r(.5)},E.l2r=E.c2r=o,E.r2l=V,E.d2p=function(H){return E.l2p(E.r2c(H))},E.p2d=function(H){return U(ie(H))},E.r2p=E.d2p,E.p2r=ie,E.cleanPos=function(H){return typeof H=="string"&&H!==""?H:o(H)}):E.type==="multicategory"&&(E.r2d=E.c2d=E.l2d=U,E.d2r=E.d2l_noadd=j,E.r2c=function(H){var oe=j(H);return oe!==void 0?oe:E.fraction2r(.5)},E.r2c_just_indices=B,E.l2r=E.c2r=o,E.r2l=j,E.d2p=function(H){return E.l2p(E.r2c(H))},E.p2d=function(H){return U(ie(H))},E.r2p=E.d2p,E.p2r=ie,E.cleanPos=function(H){return Array.isArray(H)||typeof H=="string"&&H!==""?H:o(H)},E.setupMultiCategory=function(H){var oe=E._traceIndices,re,ee,ae=E._matchGroup;if(ae&&E._categories.length===0){for(var fe in ae)if(fe!==C){var de=k[w.id2name(fe)];oe=oe.concat(de._traceIndices)}}var pe=[[0,{}],[0,{}]],W=[];for(re=0;re<oe.length;re++){var ue=H[oe[re]];if(D in ue){var me=ue[D],be=ue._length||c.minRowLength(me);if(l(me[0])&&l(me[1]))for(ee=0;ee<be;ee++){var Me=me[0][ee],Pe=me[1][ee];L(Me)&&L(Pe)&&(W.push([Me,Pe]),Me in pe[0][1]||(pe[0][1][Me]=pe[0][0]++),Pe in pe[1][1]||(pe[1][1][Pe]=pe[1][0]++))}}}for(W.sort(function(Ge,ze){var Qe=pe[0][1],tt=Qe[Ge[0]]-Qe[ze[0]];if(tt)return tt;var Ce=pe[1][1];return Ce[Ge[1]]-Ce[ze[1]]}),re=0;re<W.length;re++)X(W[re])}),E.fraction2r=function(H){var oe=E.r2l(E.range[0]),re=E.r2l(E.range[1]);return E.l2r(oe+H*(re-oe))},E.r2fraction=function(H){var oe=E.r2l(E.range[0]),re=E.r2l(E.range[1]);return(E.r2l(H)-oe)/(re-oe)},E.cleanRange=function(H,oe){oe||(oe={}),H||(H="range");var re=c.nestedProperty(E,H).get(),ee,ae;if(E.type==="date"?ae=c.dfltRange(E.calendar):D==="y"?ae=y.DFLTRANGEY:ae=oe.dfltRange||y.DFLTRANGEX,ae=ae.slice(),(E.rangemode==="tozero"||E.rangemode==="nonnegative")&&(ae[0]=0),!re||re.length!==2){c.nestedProperty(E,H).set(ae);return}for(E.type==="date"&&!E.autorange&&(re[0]=c.cleanDate(re[0],s,E.calendar),re[1]=c.cleanDate(re[1],s,E.calendar)),ee=0;ee<2;ee++)if(E.type==="date"){if(!c.isDateTime(re[ee],E.calendar)){E[H]=ae;break}if(E.r2l(re[0])===E.r2l(re[1])){var fe=c.constrain(E.r2l(re[0]),c.MIN_MS+1e3,c.MAX_MS-1e3);re[0]=E.l2r(fe-1e3),re[1]=E.l2r(fe+1e3);break}}else{if(!u(re[ee]))if(u(re[1-ee]))re[ee]=re[1-ee]*(ee?10:.1);else{E[H]=ae;break}if(re[ee]<-i?re[ee]=-i:re[ee]>i&&(re[ee]=i),re[0]===re[1]){var de=Math.max(1,Math.abs(re[0]*1e-6));re[0]-=de,re[1]+=de}}},E.setScale=function(H){var oe=k._size;if(E.overlaying){var re=w.getFromId({_fullLayout:k},E.overlaying);E.domain=re.domain}var ee=H&&E._r?"_r":"range",ae=E.calendar;E.cleanRange(ee);var fe=E.r2l(E[ee][0],ae),de=E.r2l(E[ee][1],ae),pe=D==="y";if(pe?(E._offset=oe.t+(1-E.domain[1])*oe.h,E._length=oe.h*(E.domain[1]-E.domain[0]),E._m=E._length/(fe-de),E._b=-E._m*de):(E._offset=oe.l+E.domain[0]*oe.w,E._length=oe.w*(E.domain[1]-E.domain[0]),E._m=E._length/(de-fe),E._b=-E._m*fe),E._rangebreaks=[],E._lBreaks=0,E._m2=0,E._B=[],E.rangebreaks){var W,ue;if(E._rangebreaks=E.locateBreaks(Math.min(fe,de),Math.max(fe,de)),E._rangebreaks.length){for(W=0;W<E._rangebreaks.length;W++)ue=E._rangebreaks[W],E._lBreaks+=Math.abs(ue.max-ue.min);var me=pe;fe>de&&(me=!me),me&&E._rangebreaks.reverse();var be=me?-1:1;for(E._m2=be*E._length/(Math.abs(de-fe)-E._lBreaks),E._B.push(-E._m2*(pe?de:fe)),W=0;W<E._rangebreaks.length;W++)ue=E._rangebreaks[W],E._B.push(E._B[E._B.length-1]-be*E._m2*(ue.max-ue.min));for(W=0;W<E._rangebreaks.length;W++)ue=E._rangebreaks[W],ue.pmin=$(ue.min),ue.pmax=$(ue.max)}}if(!isFinite(E._m)||!isFinite(E._b)||E._length<0)throw k._replotting=!1,new Error("Something went wrong with axis scaling")},E.maskBreaks=function(H){for(var oe=E.rangebreaks||[],re,ee,ae,fe,de,pe=0;pe<oe.length;pe++){var W=oe[pe];if(W.enabled){if(W.bounds){var ue=W.pattern;switch(re=c.simpleMap(W.bounds,ue?t:E.d2c),ee=re[0],ae=re[1],ue){case M:de=new Date(H),fe=de.getUTCDay(),ee>ae&&(ae+=7,fe<ee&&(fe+=7));break;case T:de=new Date(H);var me=de.getUTCHours(),be=de.getUTCMinutes(),Me=de.getUTCSeconds(),Pe=de.getUTCMilliseconds();fe=me+(be/60+Me/3600+Pe/36e5),ee>ae&&(ae+=24,fe<ee&&(fe+=24));break;case"":fe=H;break}if(fe>=ee&&fe<ae)return s}else for(var Ge=c.simpleMap(W.values,E.d2c).sort(c.sorterAsc),ze=0;ze<Ge.length;ze++)if(ee=Ge[ze],ae=ee+W.dvalue,H>=ee&&H<ae)return s}}return H},E.locateBreaks=function(H,oe){var re,ee,ae,fe,de=[];if(!E.rangebreaks)return de;var pe=E.rangebreaks.slice().sort(function(Ce,Ae){return Ce.pattern===M&&Ae.pattern===T?-1:Ae.pattern===M&&Ce.pattern===T?1:0}),W=function(Ce,Ae){if(Ce=c.constrain(Ce,H,oe),Ae=c.constrain(Ae,H,oe),Ce!==Ae){for(var Be=!0,qe=0;qe<de.length;qe++){var Tt=de[qe];Ce<Tt.max&&Ae>=Tt.min&&(Ce<Tt.min&&(Tt.min=Ce),Ae>Tt.max&&(Tt.max=Ae),Be=!1)}Be&&de.push({min:Ce,max:Ae})}};for(re=0;re<pe.length;re++){var ue=pe[re];if(ue.enabled)if(ue.bounds){var me=H,be=oe;ue.pattern&&(me=Math.floor(me)),ee=c.simpleMap(ue.bounds,ue.pattern?t:E.r2l),ae=ee[0],fe=ee[1];var Me=new Date(me),Pe,Ge;switch(ue.pattern){case M:Ge=d,Pe=((fe<ae?7:0)+(fe-ae))*g,me+=ae*g-(Me.getUTCDay()*g+Me.getUTCHours()*b+Me.getUTCMinutes()*m+Me.getUTCSeconds()*x+Me.getUTCMilliseconds());break;case T:Ge=g,Pe=((fe<ae?24:0)+(fe-ae))*b,me+=ae*b-(Me.getUTCHours()*b+Me.getUTCMinutes()*m+Me.getUTCSeconds()*x+Me.getUTCMilliseconds());break;default:me=Math.min(ee[0],ee[1]),be=Math.max(ee[0],ee[1]),Ge=be-me,Pe=Ge}for(var ze=me;ze<be;ze+=Ge)W(ze,ze+Pe)}else for(var Qe=c.simpleMap(ue.values,E.d2c),tt=0;tt<Qe.length;tt++)ae=Qe[tt],fe=ae+ue.dvalue,W(ae,fe)}return de.sort(function(Ce,Ae){return Ce.min-Ae.min}),de},E.makeCalcdata=function(H,oe,re){var ee,ae,fe,de,pe=E.type,W=pe==="date"&&H[oe+"calendar"];if(oe in H){if(ee=H[oe],de=H._length||c.minRowLength(ee),c.isTypedArray(ee)&&(pe==="linear"||pe==="log")){if(de===ee.length)return ee;if(ee.subarray)return ee.subarray(0,de)}if(pe==="multicategory")return z(ee,de);for(ae=new Array(de),fe=0;fe<de;fe++)ae[fe]=E.d2c(ee[fe],0,W,re)}else{var ue=oe+"0"in H?E.d2c(H[oe+"0"],0,W):0,me=H["d"+oe]?Number(H["d"+oe]):1;for(ee=H[{x:"y",y:"x"}[oe]],de=H._length||ee.length,ae=new Array(de),fe=0;fe<de;fe++)ae[fe]=ue+fe*me}if(E.rangebreaks)for(fe=0;fe<de;fe++)ae[fe]=E.maskBreaks(ae[fe]);return ae},E.isValidRange=function(H){return Array.isArray(H)&&H.length===2&&u(E.r2l(H[0]))&&u(E.r2l(H[1]))},E.isPtWithinRange=function(H,oe){var re=E.c2l(H[D],null,oe),ee=E.r2l(E.range[0]),ae=E.r2l(E.range[1]);return ee<ae?ee<=re&&re<=ae:ae<=re&&re<=ee},E._emptyCategories=function(){E._categories=[],E._categoriesMap={}},E.clearCalc=function(){var H=E._matchGroup;if(H){var oe=null,re=null;for(var ee in H){var ae=k[w.id2name(ee)];if(ae._categories){oe=ae._categories,re=ae._categoriesMap;break}}oe&&re?(E._categories=oe,E._categoriesMap=re):E._emptyCategories()}else E._emptyCategories();if(E._initialCategories)for(var fe=0;fe<E._initialCategories.length;fe++)X(E._initialCategories[fe])},E.sortByInitialCategories=function(){var H=[];if(E._emptyCategories(),E._initialCategories)for(var oe=0;oe<E._initialCategories.length;oe++)X(E._initialCategories[oe]);H=H.concat(E._traceIndices);var re=E._matchGroup;for(var ee in re)if(C!==ee){var ae=k[w.id2name(ee)];ae._categories=E._categories,ae._categoriesMap=E._categoriesMap,H=H.concat(ae._traceIndices)}return H};var Q=k._d3locale;E.type==="date"&&(E._dateFormat=Q?Q.timeFormat:a,E._extraFormat=k._extraFormat),E._separators=k.separators,E._numFormat=Q?Q.numberFormat:r.format,delete E._minDtick,delete E._forceTick0}},{"../../constants/numerical":753,"../../lib":778,"./axis_ids":831,"./constants":834,d3:169,"d3-time-format":166,"fast-isnumeric":241}],849:[function(e,v,S){var r=e("../../lib"),a=e("../../components/color").contrast,u=e("./layout_attributes"),c=e("../array_container_defaults");v.exports=function(h,i,s,p,d,g){(!g||g.pass===1)&&t(h,i,s,p,d),(!g||g.pass===2)&&f(h,i,s,p,d)};function t(l,h,i,s,p){var d=n(l),g=i("tickprefix");g&&i("showtickprefix",d);var b=i("ticksuffix",p.tickSuffixDflt);b&&i("showticksuffix",d)}function f(l,h,i,s,p){var d=n(l),g=i("tickprefix");g&&i("showtickprefix",d);var b=i("ticksuffix",p.tickSuffixDflt);b&&i("showticksuffix",d);var m=i("showticklabels");if(m){var x=p.font||{},w=h.color,y=h.ticklabelposition||"",T=y.indexOf("inside")!==-1?a(p.bgColor):w&&w!==u.color.dflt?w:x.color;if(r.coerceFont(i,"tickfont",{family:x.family,size:x.size,color:T}),i("tickangle"),s!=="category"){var M=i("tickformat");c(l,h,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:o}),h.tickformatstops.length||delete h.tickformatstops,!M&&s!=="date"&&(i("showexponent",d),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}function n(l){var h=["showexponent","showtickprefix","showticksuffix"],i=h.filter(function(p){return l[p]!==void 0}),s=function(p){return l[p]===l[i[0]]};if(i.every(s)||i.length===1)return l[i[0]]}function o(l,h){function i(p,d){return r.coerce(l,h,u.tickformatstops,p,d)}var s=i("enabled");s&&(i("dtickrange"),i("value"))}},{"../../components/color":643,"../../lib":778,"../array_container_defaults":823,"./layout_attributes":842}],850:[function(e,v,S){var r=e("../../lib"),a=e("./layout_attributes");v.exports=function(c,t,f,n){var o=r.coerce2(c,t,a,"ticklen"),l=r.coerce2(c,t,a,"tickwidth"),h=r.coerce2(c,t,a,"tickcolor",t.color),i=f("ticks",n.outerTicks||o||l||h?"outside":"");i||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":778,"./layout_attributes":842}],851:[function(e,v,S){var r=e("./clean_ticks"),a=e("../../lib").isArrayOrTypedArray;v.exports=function(c,t,f,n){function o(b){var m=c[b];return m!==void 0?m:(t._template||{})[b]}var l=o("tick0"),h=o("dtick"),i=o("tickvals"),s=a(i)?"array":h?"linear":"auto",p=f("tickmode",s);if(p==="auto")f("nticks");else if(p==="linear"){var d=t.dtick=r.dtick(h,n);t.tick0=r.tick0(l,n,t.calendar,d)}else if(n!=="multicategory"){var g=f("tickvals");g===void 0?t.tickmode="auto":f("ticktext")}}},{"../../lib":778,"./clean_ticks":833}],852:[function(e,v,S){var r=e("d3"),a=e("../../registry"),u=e("../../lib"),c=e("../../components/drawing"),t=e("./axes");v.exports=function(n,o,l,h){var i=n._fullLayout;if(o.length===0){t.redrawComponents(n);return}function s(M){var P=M.xaxis,L=M.yaxis;i._defs.select("#"+M.clipId+"> rect").call(c.setTranslate,0,0).call(c.setScale,1,1),M.plot.call(c.setTranslate,P._offset,L._offset).call(c.setScale,1,1);var I=M.plot.selectAll(".scatterlayer .trace");I.selectAll(".point").call(c.setPointGroupScale,1,1),I.selectAll(".textpoint").call(c.setTextPointsScale,1,1),I.call(c.hideOutsideRangePoints,M)}function p(M,P){var L=M.plotinfo,I=L.xaxis,E=L.yaxis,k=I._length,C=E._length,D=!!M.xr1,F=!!M.yr1,N=[];if(D){var G=u.simpleMap(M.xr0,I.r2l),U=u.simpleMap(M.xr1,I.r2l),X=G[1]-G[0],z=U[1]-U[0];N[0]=(G[0]*(1-P)+P*U[0]-G[0])/(G[1]-G[0])*k,N[2]=k*(1-P+P*z/X),I.range[0]=I.l2r(G[0]*(1-P)+P*U[0]),I.range[1]=I.l2r(G[1]*(1-P)+P*U[1])}else N[0]=0,N[2]=k;if(F){var B=u.simpleMap(M.yr0,E.r2l),j=u.simpleMap(M.yr1,E.r2l),V=B[1]-B[0],K=j[1]-j[0];N[1]=(B[1]*(1-P)+P*j[1]-B[1])/(B[0]-B[1])*C,N[3]=C*(1-P+P*K/V),E.range[0]=I.l2r(B[0]*(1-P)+P*j[0]),E.range[1]=E.l2r(B[1]*(1-P)+P*j[1])}else N[1]=0,N[3]=C;t.drawOne(n,I,{skipTitle:!0}),t.drawOne(n,E,{skipTitle:!0}),t.redrawComponents(n,[I._id,E._id]);var te=D?k/N[2]:1,$=F?C/N[3]:1,ie=D?N[0]:0,se=F?N[1]:0,Q=D?N[0]/N[2]*k:0,H=F?N[1]/N[3]*C:0,oe=I._offset-Q,re=E._offset-H;L.clipRect.call(c.setTranslate,ie,se).call(c.setScale,1/te,1/$),L.plot.call(c.setTranslate,oe,re).call(c.setScale,te,$),c.setPointGroupScale(L.zoomScalePts,1/te,1/$),c.setTextPointsScale(L.zoomScaleTxt,1/te,1/$)}var d;h&&(d=h());function g(){for(var M={},P=0;P<o.length;P++){var L=o[P],I=L.plotinfo.xaxis,E=L.plotinfo.yaxis;L.xr1&&(M[I._name+".range"]=L.xr1.slice()),L.yr1&&(M[E._name+".range"]=L.yr1.slice())}return d&&d(),a.call("relayout",n,M).then(function(){for(var k=0;k<o.length;k++)s(o[k].plotinfo)})}function b(){for(var M={},P=0;P<o.length;P++){var L=o[P],I=L.plotinfo.xaxis,E=L.plotinfo.yaxis;L.xr0&&(M[I._name+".range"]=L.xr0.slice()),L.yr0&&(M[E._name+".range"]=L.yr0.slice())}return a.call("relayout",n,M).then(function(){for(var k=0;k<o.length;k++)s(o[k].plotinfo)})}var m,x,w,y=r.ease(l.easing);n._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(w),w=null,b()});function T(){x=Date.now();for(var M=Math.min(1,(x-m)/l.duration),P=y(M),L=0;L<o.length;L++)p(o[L],P);x-m>l.duration?(g(),w=window.cancelAnimationFrame(T)):w=window.requestAnimationFrame(T)}return m=Date.now(),w=window.requestAnimationFrame(T),Promise.resolve()}},{"../../components/drawing":665,"../../lib":778,"../../registry":911,"./axes":828,d3:169}],853:[function(e,v,S){var r=e("../../registry").traceIs,a=e("./axis_autotype");v.exports=function(o,l,h,i){h("autotypenumbers",i.autotypenumbersDflt);var s=h("type",(i.splomStash||{}).type);s==="-"&&(u(l,i.data),l.type==="-"?l.type="linear":o.type=l.type)};function u(n,o){if(n.type==="-"){var l=n._id,h=l.charAt(0),i;l.indexOf("scene")!==-1&&(l=h);var s=c(o,l,h);if(!!s){if(s.type==="histogram"&&h==={v:"y",h:"x"}[s.orientation||"v"]){n.type="linear";return}var p=h+"calendar",d=s[p],g={noMultiCategory:!r(s,"cartesian")||r(s,"noMultiCategory")};if(s.type==="box"&&s._hasPreCompStats&&h==={h:"x",v:"y"}[s.orientation||"v"]&&(g.noMultiCategory=!0),g.autotypenumbers=n.autotypenumbers,f(s,h)){var b=t(s),m=[];for(i=0;i<o.length;i++){var x=o[i];!r(x,"box-violin")||(x[h+"axis"]||h)!==l||(x[b]!==void 0?m.push(x[b][0]):x.name!==void 0?m.push(x.name):m.push("text"),x[p]!==d&&(d=void 0))}n.type=a(m,d,g)}else if(s.type==="splom"){var w=s.dimensions,y=w[s._axesDim[l]];y.visible&&(n.type=a(y.values,d,g))}else n.type=a(s[h]||[s[h+"0"]],d,g)}}}function c(n,o,l){for(var h=0;h<n.length;h++){var i=n[h];if(i.type==="splom"&&i._length>0&&(i["_"+l+"axes"]||{})[o])return i;if((i[l+"axis"]||l)===o){if(f(i,l))return i;if((i[l]||[]).length||i[l+"0"])return i}}}function t(n){return{v:"x",h:"y"}[n.orientation||"v"]}function f(n,o){var l=t(n),h=r(n,"box-violin"),i=r(n._fullInput||{},"candlestick");return h&&!i&&o===l&&n[l]===void 0&&n[l+"0"]===void 0}},{"../../registry":911,"./axis_autotype":829}],854:[function(e,v,S){var r=e("../registry"),a=e("../lib");S.manageCommandObserver=function(o,l,h,i){var s={},p=!0;l&&l._commandObserver&&(s=l._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var d=S.hasSimpleAPICommandBindings(o,h,s.lookupTable);if(l&&l._commandObserver){if(d)return s;if(l._commandObserver.remove)return l._commandObserver.remove(),l._commandObserver=null,s}if(d){u(o,d,s.cache),s.check=function(){if(!!p){var x=u(o,d,s.cache);return x.changed&&i&&s.lookupTable[x.value]!==void 0&&(s.disable(),Promise.resolve(i({value:x.value,type:d.type,prop:d.prop,traces:d.traces,index:s.lookupTable[x.value]})).then(s.enable,s.enable)),x.changed}};for(var g=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],b=0;b<g.length;b++)o._internalOn(g[b],s.check);s.remove=function(){for(var m=0;m<g.length;m++)o._removeInternalListener(g[m],s.check)}}else a.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){p=!1},s.enable=function(){p=!0},l&&(l._commandObserver=s),s},S.hasSimpleAPICommandBindings=function(o,l,h){var i,s=l.length,p;for(i=0;i<s;i++){var d,g=l[i],b=g.method,m=g.args;if(Array.isArray(m)||(m=[]),!b)return!1;var x=S.computeAPICommandBindings(o,b,m);if(x.length!==1)return!1;if(!p)p=x[0],Array.isArray(p.traces)&&p.traces.sort();else{if(d=x[0],d.type!==p.type||d.prop!==p.prop)return!1;if(Array.isArray(p.traces))if(Array.isArray(d.traces)){d.traces.sort();for(var w=0;w<p.traces.length;w++)if(p.traces[w]!==d.traces[w])return!1}else return!1;else if(d.prop!==p.prop)return!1}d=x[0];var y=d.value;if(Array.isArray(y))if(y.length===1)y=y[0];else return!1;h&&(h[y]=i)}return p};function u(o,l,h){var i,s,p,d=!1;if(l.type==="data")i=o._fullData[l.traces!==null?l.traces[0]:0];else if(l.type==="layout")i=o._fullLayout;else return!1;return s=a.nestedProperty(i,l.prop).get(),p=h[l.type]=h[l.type]||{},p.hasOwnProperty(l.prop)&&p[l.prop]!==s&&(d=!0),p[l.prop]=s,{changed:d,value:s}}S.executeAPICommand=function(o,l,h){if(l==="skip")return Promise.resolve();var i=r.apiMethodRegistry[l],s=[o];Array.isArray(h)||(h=[]);for(var p=0;p<h.length;p++)s.push(h[p]);return i.apply(null,s).catch(function(d){return a.warn("API call to Plotly."+l+" rejected.",d),Promise.reject(d)})},S.computeAPICommandBindings=function(o,l,h){var i;switch(Array.isArray(h)||(h=[]),l){case"restyle":i=f(o,h);break;case"relayout":i=t(o,h);break;case"update":i=f(o,[h[0],h[2]]).concat(t(o,[h[1]]));break;case"animate":i=c(o,h);break;default:i=[]}return i};function c(o,l){return Array.isArray(l[0])&&l[0].length===1&&["string","number"].indexOf(typeof l[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:l[0][0].toString()}]:[]}function t(o,l){var h=[],i=l[0],s={};if(typeof i=="string")s[i]=l[1];else if(a.isPlainObject(i))s=i;else return h;return n(s,function(p,d,g){h.push({type:"layout",prop:p,value:g})},"",0),h}function f(o,l){var h,i,s,p,d=[];if(i=l[0],s=l[1],h=l[2],p={},typeof i=="string")p[i]=s;else if(a.isPlainObject(i))p=i,h===void 0&&(h=s);else return d;return h===void 0&&(h=null),n(p,function(g,b,m){var x,w;if(Array.isArray(m)){w=m.slice();var y=Math.min(w.length,o.data.length);h&&(y=Math.min(y,h.length)),x=[];for(var T=0;T<y;T++)x[T]=h?h[T]:T}else w=m,x=h?h.slice():null;if(x===null)Array.isArray(w)&&(w=w[0]);else if(Array.isArray(x)){if(!Array.isArray(w)){var M=w;w=[];for(var P=0;P<x.length;P++)w[P]=M}w.length=Math.min(x.length,w.length)}d.push({type:"data",prop:g,traces:x,value:w})},"",0),d}function n(o,l,h,i){Object.keys(o).forEach(function(s){var p=o[s];if(s[0]!=="_"){var d=h+(i>0?".":"")+s;a.isPlainObject(p)?n(p,l,d,i+1):l(d,s,p)}})}},{"../lib":778,"../registry":911}],855:[function(e,v,S){var r=e("../lib/extend").extendFlat;S.attributes=function(a,u){a=a||{},u=u||{};var c={valType:"info_array",editType:a.editType,items:[{valType:"number",min:0,max:1,editType:a.editType},{valType:"number",min:0,max:1,editType:a.editType}],dflt:[0,1]};a.name&&a.name+"",a.trace,u.description&&""+u.description;var t={x:r({},c,{}),y:r({},c,{}),editType:a.editType};return a.noGridCell||(t.row={valType:"integer",min:0,dflt:0,editType:a.editType},t.column={valType:"integer",min:0,dflt:0,editType:a.editType}),t},S.defaults=function(a,u,c,t){var f=t&&t.x||[0,1],n=t&&t.y||[0,1],o=u.grid;if(o){var l=c("domain.column");l!==void 0&&(l<o.columns?f=o._domains.x[l]:delete a.domain.column);var h=c("domain.row");h!==void 0&&(h<o.rows?n=o._domains.y[h]:delete a.domain.row)}var i=c("domain.x",f),s=c("domain.y",n);i[0]<i[1]||(a.domain.x=f.slice()),s[0]<s[1]||(a.domain.y=n.slice())}},{"../lib/extend":768}],856:[function(e,v,S){v.exports=function(r){var a=r.editType,u=r.colorEditType;u===void 0&&(u=a);var c={family:{valType:"string",noBlank:!0,strict:!0,editType:a},size:{valType:"number",min:1,editType:a},color:{valType:"color",editType:u},editType:a};return r.arrayOk&&(c.family.arrayOk=!0,c.size.arrayOk=!0,c.color.arrayOk=!0),c}},{}],857:[function(e,v,S){v.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],858:[function(e,v,S){S.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"},S.axesNames=["lonaxis","lataxis"],S.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},S.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},S.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},S.clipPad=.001,S.precision=.1,S.landColor="#F0DC82",S.waterColor="#3399FF",S.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},S.sphereSVG={type:"Sphere"},S.fillLayers={ocean:1,land:1,lakes:1},S.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},S.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],S.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],S.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],859:[function(e,v,S){var r=e("d3"),a=e("../../registry"),u=e("../../lib"),c=u.strTranslate,t=e("../../components/color"),f=e("../../components/drawing"),n=e("../../components/fx"),o=e("../plots"),l=e("../cartesian/axes"),h=e("../cartesian/autorange").getAutoRange,i=e("../../components/dragelement"),s=e("../cartesian/select").prepSelect,p=e("../cartesian/select").clearSelect,d=e("../cartesian/select").selectOnClick,g=e("./zoom"),b=e("./constants"),m=e("../../lib/geo_location_utils"),x=e("../../lib/topojson_utils"),w=e("topojson-client").feature;e("./projections")(r);function y(I){this.id=I.id,this.graphDiv=I.graphDiv,this.container=I.container,this.topojsonURL=I.topojsonURL,this.isStatic=I.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var T=y.prototype;v.exports=function(E){return new y(E)},T.plot=function(I,E,k){var C=this,D=E[this.id],F=[],N=!1;for(var G in b.layerNameToAdjective)if(G!=="frame"&&D["show"+G]){N=!0;break}for(var U=0;U<I.length;U++)if(I[0][0].trace.locationmode){N=!0;break}if(N){var X=x.getTopojsonName(D);(C.topojson===null||X!==C.topojsonName)&&(C.topojsonName=X,PlotlyGeoAssets.topojson[C.topojsonName]===void 0&&F.push(C.fetchTopojson()))}F=F.concat(m.fetchTraceGeoData(I)),k.push(new Promise(function(z,B){Promise.all(F).then(function(){C.topojson=PlotlyGeoAssets.topojson[C.topojsonName],C.update(I,E),z()}).catch(B)}))},T.fetchTopojson=function(){var I=this,E=x.getTopojsonPath(I.topojsonURL,I.topojsonName);return new Promise(function(k,C){r.json(E,function(D,F){if(D)return D.status===404?C(new Error(["plotly.js could not find topojson file at",E,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):C(new Error(["unexpected error while fetching topojson file at",E].join(" ")));PlotlyGeoAssets.topojson[I.topojsonName]=F,k()})})},T.update=function(I,E){var k=E[this.id];this.hasChoropleth=!1;for(var C=0;C<I.length;C++){var D=I[C],F=D[0].trace;F.type==="choropleth"&&(this.hasChoropleth=!0),F.visible===!0&&F._length>0&&F._module.calcGeoJSON(D,E)}var N=this.updateProjection(I,E);if(!N){(!this.viewInitial||this.scope!==k.scope)&&this.saveViewInitial(k),this.scope=k.scope,this.updateBaseLayers(E,k),this.updateDims(E,k),this.updateFx(E,k),o.generalUpdatePerTraceModule(this.graphDiv,this,I,k);var G=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=G.selectAll(".point"),this.dataPoints.text=G.selectAll("text"),this.dataPaths.line=G.selectAll(".js-line");var U=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=U.selectAll("path"),this.render()}},T.updateProjection=function(I,E){var k=this.graphDiv,C=E[this.id],D=E._size,F=C.domain,N=C.projection,G=C.lonaxis,U=C.lataxis,X=G._ax,z=U._ax,B=this.projection=M(C),j=[[D.l+D.w*F.x[0],D.t+D.h*(1-F.y[1])],[D.l+D.w*F.x[1],D.t+D.h*(1-F.y[0])]],V=C.center||{},K=N.rotation||{},te=G.range||[],$=U.range||[];if(C.fitbounds){X._length=j[1][0]-j[0][0],z._length=j[1][1]-j[0][1],X.range=h(k,X),z.range=h(k,z);var ie=(X.range[0]+X.range[1])/2,se=(z.range[0]+z.range[1])/2;if(C._isScoped)V={lon:ie,lat:se};else if(C._isClipped){V={lon:ie,lat:se},K={lon:ie,lat:se,roll:K.roll};var Q=N.type,H=b.lonaxisSpan[Q]/2||180,oe=b.lataxisSpan[Q]/2||90;te=[ie-H,ie+H],$=[se-oe,se+oe]}else V={lon:ie,lat:se},K={lon:ie,lat:K.lat,roll:K.roll}}B.center([V.lon-K.lon,V.lat-K.lat]).rotate([-K.lon,-K.lat,K.roll]).parallels(N.parallels);var re=L(te,$);B.fitExtent(j,re);var ee=this.bounds=B.getBounds(re),ae=this.fitScale=B.scale(),fe=B.translate();if(!isFinite(ee[0][0])||!isFinite(ee[0][1])||!isFinite(ee[1][0])||!isFinite(ee[1][1])||isNaN(fe[0])||isNaN(fe[0])){for(var de=["fitbounds","projection.rotation","center","lonaxis.range","lataxis.range"],pe="Invalid geo settings, relayout'ing to default view.",W={},ue=0;ue<de.length;ue++)W[this.id+"."+de[ue]]=null;return this.viewInitial=null,u.warn(pe),k._promises.push(a.call("relayout",k,W)),pe}if(C.fitbounds){var me=B.getBounds(L(X.range,z.range)),be=Math.min((ee[1][0]-ee[0][0])/(me[1][0]-me[0][0]),(ee[1][1]-ee[0][1])/(me[1][1]-me[0][1]));isFinite(be)?B.scale(be*ae):u.warn("Something went wrong during"+this.id+"fitbounds computations.")}else B.scale(N.scale*ae);var Me=this.midPt=[(ee[0][0]+ee[1][0])/2,(ee[0][1]+ee[1][1])/2];if(B.translate([fe[0]+(Me[0]-fe[0]),fe[1]+(Me[1]-fe[1])]).clipExtent(ee),C._isAlbersUsa){var Pe=B([V.lon,V.lat]),Ge=B.translate();B.translate([Ge[0]-(Pe[0]-Ge[0]),Ge[1]-(Pe[1]-Ge[1])])}},T.updateBaseLayers=function(I,E){var k=this,C=k.topojson,D=k.layers,F=k.basePaths;function N(j){return j==="lonaxis"||j==="lataxis"}function G(j){return Boolean(b.lineLayers[j])}function U(j){return Boolean(b.fillLayers[j])}var X=this.hasChoropleth?b.layersForChoropleth:b.layers,z=X.filter(function(j){return G(j)||U(j)?E["show"+j]:N(j)?E[j].showgrid:!0}),B=k.framework.selectAll(".layer").data(z,String);B.exit().each(function(j){delete D[j],delete F[j],r.select(this).remove()}),B.enter().append("g").attr("class",function(j){return"layer "+j}).each(function(j){var V=D[j]=r.select(this);j==="bg"?k.bgRect=V.append("rect").style("pointer-events","all"):N(j)?F[j]=V.append("path").style("fill","none"):j==="backplot"?V.append("g").classed("choroplethlayer",!0):j==="frontplot"?V.append("g").classed("scatterlayer",!0):G(j)?F[j]=V.append("path").style("fill","none").style("stroke-miterlimit",2):U(j)&&(F[j]=V.append("path").style("stroke","none"))}),B.order(),B.each(function(j){var V=F[j],K=b.layerNameToAdjective[j];j==="frame"?V.datum(b.sphereSVG):G(j)||U(j)?V.datum(w(C,C.objects[j])):N(j)&&V.datum(P(j,E,I)).call(t.stroke,E[j].gridcolor).call(f.dashLine,"",E[j].gridwidth),G(j)?V.call(t.stroke,E[K+"color"]).call(f.dashLine,"",E[K+"width"]):U(j)&&V.call(t.fill,E[K+"color"])})},T.updateDims=function(I,E){var k=this.bounds,C=(E.framewidth||0)/2,D=k[0][0]-C,F=k[0][1]-C,N=k[1][0]-D+C,G=k[1][1]-F+C;f.setRect(this.clipRect,D,F,N,G),this.bgRect.call(f.setRect,D,F,N,G).call(t.fill,E.bgcolor),this.xaxis._offset=D,this.xaxis._length=N,this.yaxis._offset=F,this.yaxis._length=G},T.updateFx=function(I,E){var k=this,C=k.graphDiv,D=k.bgRect,F=I.dragmode,N=I.clickmode;if(k.isStatic)return;function G(){var B=k.viewInitial,j={};for(var V in B)j[k.id+"."+V]=B[V];a.call("_guiRelayout",C,j),C.emit("plotly_doubleclick",null)}function U(B){return k.projection.invert([B[0]+k.xaxis._offset,B[1]+k.yaxis._offset])}var X;F==="select"?X=function(B,j){var V=B.range={};V[k.id]=[U([j.xmin,j.ymin]),U([j.xmax,j.ymax])]}:F==="lasso"&&(X=function(B,j,V){var K=B.lassoPoints={};K[k.id]=V.filtered.map(U)});var z={element:k.bgRect.node(),gd:C,plotinfo:{id:k.id,xaxis:k.xaxis,yaxis:k.yaxis,fillRangeItems:X},xaxes:[k.xaxis],yaxes:[k.yaxis],subplot:k.id,clickFn:function(B){B===2&&p(C)}};F==="pan"?(D.node().onmousedown=null,D.call(g(k,E)),D.on("dblclick.zoom",G),C._context._scrollZoom.geo||D.on("wheel.zoom",null)):(F==="select"||F==="lasso")&&(D.on(".zoom",null),z.prepFn=function(B,j,V){s(B,j,V,z,F)},i.init(z)),D.on("mousemove",function(){var B=k.projection.invert(r.mouse(this));if(!B||isNaN(B[0])||isNaN(B[1]))return i.unhover(C,r.event);k.xaxis.p2c=function(){return B[0]},k.yaxis.p2c=function(){return B[1]},n.hover(C,r.event,k.id)}),D.on("mouseout",function(){C._dragging||i.unhover(C,r.event)}),D.on("click",function(){F!=="select"&&F!=="lasso"&&(N.indexOf("select")>-1&&d(r.event,C,[k.xaxis],[k.yaxis],k.id,z),N.indexOf("event")>-1&&n.click(C,r.event))})},T.makeFramework=function(){var I=this,E=I.graphDiv,k=E._fullLayout,C="clip"+k._uid+I.id;I.clipDef=k._clips.append("clipPath").attr("id",C),I.clipRect=I.clipDef.append("rect"),I.framework=r.select(I.container).append("g").attr("class","geo "+I.id).call(f.setClipUrl,C,E),I.project=function(D){var F=I.projection(D);return F?[F[0]-I.xaxis._offset,F[1]-I.yaxis._offset]:[null,null]},I.xaxis={_id:"x",c2p:function(D){return I.project(D)[0]}},I.yaxis={_id:"y",c2p:function(D){return I.project(D)[1]}},I.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(I.mockAxis,k)},T.saveViewInitial=function(I){var E=I.center||{},k=I.projection,C=k.rotation||{};this.viewInitial={fitbounds:I.fitbounds,"projection.scale":k.scale};var D;I._isScoped?D={"center.lon":E.lon,"center.lat":E.lat}:I._isClipped?D={"projection.rotation.lon":C.lon,"projection.rotation.lat":C.lat}:D={"center.lon":E.lon,"center.lat":E.lat,"projection.rotation.lon":C.lon},u.extendFlat(this.viewInitial,D)},T.render=function(){var I=this.projection,E=I.getPath(),k;function C(F){var N=I(F.lonlat);return N?c(N[0],N[1]):null}function D(F){return I.isLonLatOverEdges(F.lonlat)?"none":null}for(k in this.basePaths)this.basePaths[k].attr("d",E);for(k in this.dataPaths)this.dataPaths[k].attr("d",function(F){return E(F.geojson)});for(k in this.dataPoints)this.dataPoints[k].attr("display",D).attr("transform",C)};function M(I){for(var E=I.projection,k=E.type,C=r.geo[b.projNames[k]](),D=I._isClipped?b.lonaxisSpan[k]/2:null,F=["center","rotate","parallels","clipExtent"],N=function(X){return X?C:[]},G=0;G<F.length;G++){var U=F[G];typeof C[U]!="function"&&(C[U]=N)}return C.isLonLatOverEdges=function(X){if(C(X)===null)return!0;if(D){var z=C.rotate(),B=r.geo.distance(X,[-z[0],-z[1]]),j=D*Math.PI/180;return B>j}else return!1},C.getPath=function(){return r.geo.path().projection(C)},C.getBounds=function(X){return C.getPath().bounds(X)},C.fitExtent=function(X,z){var B=X[1][0]-X[0][0],j=X[1][1]-X[0][1],V=C.clipExtent&&C.clipExtent();C.scale(150).translate([0,0]),V&&C.clipExtent(null);var K=C.getBounds(z),te=Math.min(B/(K[1][0]-K[0][0]),j/(K[1][1]-K[0][1])),$=+X[0][0]+(B-te*(K[1][0]+K[0][0]))/2,ie=+X[0][1]+(j-te*(K[1][1]+K[0][1]))/2;return V&&C.clipExtent(V),C.scale(te*150).translate([$,ie])},C.precision(b.precision),D&&C.clipAngle(D-b.clipPad),C}function P(I,E,k){var C=1e-6,D=2.5,F=E[I],N=b.scopeDefaults[E.scope],G,U,X;I==="lonaxis"?(G=N.lonaxisRange,U=N.lataxisRange,X=function(se,Q){return[se,Q]}):I==="lataxis"&&(G=N.lataxisRange,U=N.lonaxisRange,X=function(se,Q){return[Q,se]});var z={type:"linear",range:[G[0],G[1]-C],tick0:F.tick0,dtick:F.dtick};l.setConvert(z,k);var B=l.calcTicks(z);!E.isScoped&&I==="lonaxis"&&B.pop();for(var j=B.length,V=new Array(j),K=0;K<j;K++)for(var te=B[K].x,$=V[K]=[],ie=U[0];ie<U[1]+D;ie+=D)$.push(X(te,ie));return{type:"MultiLineString",coordinates:V}}function L(I,E){var k=b.clipPad,C=I[0]+k,D=I[1]-k,F=E[0]+k,N=E[1]-k;C>0&&D<0&&(D+=360);var G=(D-C)/4;return{type:"Polygon",coordinates:[[[C,F],[C,N],[C+G,N],[C+2*G,N],[C+3*G,N],[D,N],[D,F],[D-G,F],[D-2*G,F],[D-3*G,F],[C,F]]]}}},{"../../components/color":643,"../../components/dragelement":662,"../../components/drawing":665,"../../components/fx":683,"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/topojson_utils":806,"../../registry":911,"../cartesian/autorange":827,"../cartesian/axes":828,"../cartesian/select":847,"../plots":891,"./constants":858,"./projections":863,"./zoom":864,d3:169,"topojson-client":579}],860:[function(e,v,S){var r=e("../../plots/get_data").getSubplotCalcData,a=e("../../lib").counterRegex,u=e("./geo"),c="geo",t=a(c),f={};f[c]={valType:"subplotid",dflt:c,editType:"calc"};function n(h){for(var i=h._fullLayout,s=h.calcdata,p=i._subplots[c],d=0;d<p.length;d++){var g=p[d],b=r(s,c,g),m=i[g],x=m._subplot;x||(x=u({id:g,graphDiv:h,container:i._geolayer.node(),topojsonURL:h._context.topojsonURL,staticPlot:h._context.staticPlot}),i[g]._subplot=x),x.plot(b,i,h._promises)}}function o(h,i,s,p){for(var d=p._subplots[c]||[],g=0;g<d.length;g++){var b=d[g],m=p[b]._subplot;!i[b]&&!!m&&(m.framework.remove(),m.clipDef.remove())}}function l(h){for(var i=h._fullLayout,s=i._subplots[c],p=0;p<s.length;p++){var d=i[s[p]],g=d._subplot;g.updateFx(i,d)}}v.exports={attr:c,name:c,idRoot:c,idRegex:t,attrRegex:t,attributes:f,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:n,updateFx:l,clean:o}},{"../../lib":778,"../../plots/get_data":865,"./geo":859,"./layout_attributes":861,"./layout_defaults":862}],861:[function(e,v,S){var r=e("../../components/color/attributes"),a=e("../domain").attributes,u=e("./constants"),c=e("../../plot_api/edit_types").overrideAll,t={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:r.lightLine},gridwidth:{valType:"number",min:0,dflt:1}},f=v.exports=c({domain:a({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(u.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(u.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:r.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:u.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:u.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:u.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:u.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:r.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:r.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:r.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:r.background},lonaxis:t,lataxis:t},"plot","from-root");f.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":642,"../../plot_api/edit_types":810,"../domain":855,"./constants":858}],862:[function(e,v,S){var r=e("../../lib"),a=e("../subplot_defaults"),u=e("../get_data").getSubplotData,c=e("./constants"),t=e("./layout_attributes"),f=c.axesNames;v.exports=function(l,h,i){a(l,h,i,{type:"geo",attributes:t,handleDefaults:n,fullData:i,partition:"y"})};function n(o,l,h,i){var s=u(i.fullData,"geo",i.id),p=s.map(function(Q){return Q._expandedIndex}),d=h("resolution"),g=h("scope"),b=c.scopeDefaults[g],m=h("projection.type",b.projType),x=l._isAlbersUsa=m==="albers usa";x&&(g=l.scope="usa");var w=l._isScoped=g!=="world",y=l._isConic=m.indexOf("conic")!==-1,T=l._isClipped=!!c.lonaxisSpan[m];if(o.visible===!1){var M=r.extendDeep({},l._template);M.showcoastlines=!1,M.showcountries=!1,M.showframe=!1,M.showlakes=!1,M.showland=!1,M.showocean=!1,M.showrivers=!1,M.showsubunits=!1,M.lonaxis&&(M.lonaxis.showgrid=!1),M.lataxis&&(M.lataxis.showgrid=!1),l._template=M}for(var P=h("visible"),L,I=0;I<f.length;I++){var E=f[I],k=[30,10][I],C;if(w)C=b[E+"Range"];else{var D=c[E+"Span"],F=(D[m]||D["*"])/2,N=h("projection.rotation."+E.substr(0,3),b.projRotate[I]);C=[N-F,N+F]}var G=h(E+".range",C);h(E+".tick0"),h(E+".dtick",k),L=h(E+".showgrid",P?void 0:!1),L&&(h(E+".gridcolor"),h(E+".gridwidth")),l[E]._ax={type:"linear",_id:E.slice(0,3),_traceIndices:p,setScale:r.identity,c2l:r.identity,r2l:r.identity,autorange:!0,range:G.slice(),_m:1,_input:{}}}var U=l.lonaxis.range,X=l.lataxis.range,z=U[0],B=U[1];z>0&&B<0&&(B+=360);var j=(z+B)/2,V;if(!x){var K=w?b.projRotate:[j,0,0];V=h("projection.rotation.lon",K[0]),h("projection.rotation.lat",K[1]),h("projection.rotation.roll",K[2]),L=h("showcoastlines",!w&&P),L&&(h("coastlinecolor"),h("coastlinewidth")),L=h("showocean",P?void 0:!1),L&&h("oceancolor")}var te,$;if(x?(te=-96.6,$=38.7):(te=w?j:V,$=(X[0]+X[1])/2),h("center.lon",te),h("center.lat",$),y){var ie=b.projParallels||[0,60];h("projection.parallels",ie)}h("projection.scale"),L=h("showland",P?void 0:!1),L&&h("landcolor"),L=h("showlakes",P?void 0:!1),L&&h("lakecolor"),L=h("showrivers",P?void 0:!1),L&&(h("rivercolor"),h("riverwidth")),L=h("showcountries",w&&g!=="usa"&&P),L&&(h("countrycolor"),h("countrywidth")),(g==="usa"||g==="north america"&&d===50)&&(h("showsubunits",P),h("subunitcolor"),h("subunitwidth")),w||(L=h("showframe",P),L&&(h("framecolor"),h("framewidth"))),h("bgcolor");var se=h("fitbounds");se&&(delete l.projection.scale,w?(delete l.center.lon,delete l.center.lat):T?(delete l.center.lon,delete l.center.lat,delete l.projection.rotation.lon,delete l.projection.rotation.lat,delete l.lonaxis.range,delete l.lataxis.range):(delete l.center.lon,delete l.center.lat,delete l.projection.rotation.lon))}},{"../../lib":778,"../get_data":865,"../subplot_defaults":905,"./constants":858,"./layout_attributes":861}],863:[function(e,v,S){function r(a){a.geo.project=function(ie,se){var Q=se.stream;if(!Q)throw new Error("not yet supported");return(ie&&t.hasOwnProperty(ie.type)?t[ie.type]:c)(ie,Q)};function u(ie,se){return{type:"Feature",id:ie.id,properties:ie.properties,geometry:c(ie.geometry,se)}}function c(ie,se){if(!ie)return null;if(ie.type==="GeometryCollection")return{type:"GeometryCollection",geometries:object.geometries.map(function(H){return c(H,se)})};if(!i.hasOwnProperty(ie.type))return null;var Q=i[ie.type];return a.geo.stream(ie,se(Q)),Q.result()}var t={Feature:u,FeatureCollection:function(ie,se){return{type:"FeatureCollection",features:ie.features.map(function(Q){return u(Q,se)})}}},f=[],n=[],o={point:function(ie,se){f.push([ie,se])},result:function(){var ie=f.length?f.length<2?{type:"Point",coordinates:f[0]}:{type:"MultiPoint",coordinates:f}:null;return f=[],ie}},l={lineStart:s,point:function(ie,se){f.push([ie,se])},lineEnd:function(){f.length&&(n.push(f),f=[])},result:function(){var ie=n.length?n.length<2?{type:"LineString",coordinates:n[0]}:{type:"MultiLineString",coordinates:n}:null;return n=[],ie}},h={polygonStart:s,lineStart:s,point:function(ie,se){f.push([ie,se])},lineEnd:function(){var ie=f.length;if(ie){do f.push(f[0].slice());while(++ie<4);n.push(f),f=[]}},polygonEnd:s,result:function(){if(!n.length)return null;var ie=[],se=[];return n.forEach(function(Q){p(Q)?ie.push([Q]):se.push(Q)}),se.forEach(function(Q){var H=Q[0];ie.some(function(oe){if(d(oe[0],H))return oe.push(Q),!0})||ie.push([Q])}),n=[],ie.length?ie.length>1?{type:"MultiPolygon",coordinates:ie}:{type:"Polygon",coordinates:ie[0]}:null}},i={Point:o,MultiPoint:o,LineString:l,MultiLineString:l,Polygon:h,MultiPolygon:h,Sphere:h};function s(){}function p(ie){if((Q=ie.length)<4)return!1;for(var se=0,Q,H=ie[Q-1][1]*ie[0][0]-ie[Q-1][0]*ie[0][1];++se<Q;)H+=ie[se-1][1]*ie[se][0]-ie[se-1][0]*ie[se][1];return H<=0}function d(ie,se){for(var Q=se[0],H=se[1],oe=!1,re=0,ee=ie.length,ae=ee-1;re<ee;ae=re++){var fe=ie[re],de=fe[0],pe=fe[1],W=ie[ae],ue=W[0],me=W[1];pe>H^me>H&&Q<(ue-de)*(H-pe)/(me-pe)+de&&(oe=!oe)}return oe}var g=1e-6,b=g*g,m=Math.PI,x=m/2,w=m/180,y=180/m;function T(ie){return ie?ie/Math.sin(ie):1}function M(ie){return ie>1?x:ie<-1?-x:Math.asin(ie)}function P(ie){return ie>1?0:ie<-1?m:Math.acos(ie)}var L=a.geo.projection,I=a.geo.projectionMutator;a.geo.interrupt=function(ie){var se=[[[[-m,0],[0,x],[m,0]]],[[[-m,0],[0,-x],[m,0]]]],Q;function H(pe,W){for(var ue=W<0?-1:1,me=se[+(W<0)],be=0,Me=me.length-1;be<Me&&pe>me[be][2][0];++be);var Pe=ie(pe-me[be][1][0],W);return Pe[0]+=ie(me[be][1][0],ue*W>ue*me[be][0][1]?me[be][0][1]:W)[0],Pe}function oe(){Q=se.map(function(pe){return pe.map(function(W){var ue=ie(W[0][0],W[0][1])[0],me=ie(W[2][0],W[2][1])[0],be=ie(W[1][0],W[0][1])[1],Me=ie(W[1][0],W[1][1])[1],Pe;return be>Me&&(Pe=be,be=Me,Me=Pe),[[ue,be],[me,Me]]})})}ie.invert&&(H.invert=function(pe,W){for(var ue=Q[+(W<0)],me=se[+(W<0)],be=0,Me=ue.length;be<Me;++be){var Pe=ue[be];if(Pe[0][0]<=pe&&pe<Pe[1][0]&&Pe[0][1]<=W&&W<Pe[1][1]){var Ge=ie.invert(pe-ie(me[be][1][0],0)[0],W);return Ge[0]+=me[be][1][0],de(H(Ge[0],Ge[1]),[pe,W])?Ge:null}}});var re=a.geo.projection(H),ee=re.stream;re.stream=function(pe){var W=re.rotate(),ue=ee(pe),me=(re.rotate([0,0]),ee(pe));return re.rotate(W),ue.sphere=function(){a.geo.stream(ae(),me)},ue},re.lobes=function(pe){return arguments.length?(se=pe.map(function(W){return W.map(function(ue){return[[ue[0][0]*m/180,ue[0][1]*m/180],[ue[1][0]*m/180,ue[1][1]*m/180],[ue[2][0]*m/180,ue[2][1]*m/180]]})}),oe(),re):se.map(function(W){return W.map(function(ue){return[[ue[0][0]*180/m,ue[0][1]*180/m],[ue[1][0]*180/m,ue[1][1]*180/m],[ue[2][0]*180/m,ue[2][1]*180/m]]})})};function ae(){for(var pe=1e-6,W=[],ue=0,me=se[0].length;ue<me;++ue){var be=se[0][ue],Me=be[0][0]*180/m,Pe=be[0][1]*180/m,Ge=be[1][1]*180/m,ze=be[2][0]*180/m,Qe=be[2][1]*180/m;W.push(fe([[Me+pe,Pe+pe],[Me+pe,Ge-pe],[ze-pe,Ge-pe],[ze-pe,Qe+pe]],30))}for(var ue=se[1].length-1;ue>=0;--ue){var be=se[1][ue],Me=be[0][0]*180/m,Pe=be[0][1]*180/m,Ge=be[1][1]*180/m,ze=be[2][0]*180/m,Qe=be[2][1]*180/m;W.push(fe([[ze-pe,Qe-pe],[ze-pe,Ge+pe],[Me+pe,Ge+pe],[Me+pe,Pe-pe]],30))}return{type:"Polygon",coordinates:[a.merge(W)]}}function fe(pe,W){for(var ue=-1,me=pe.length,be=pe[0],Me,Pe,Ge,ze=[];++ue<me;){Me=pe[ue],Pe=(Me[0]-be[0])/W,Ge=(Me[1]-be[1])/W;for(var Qe=0;Qe<W;++Qe)ze.push([be[0]+Qe*Pe,be[1]+Qe*Ge]);be=Me}return ze.push(Me),ze}function de(pe,W){return Math.abs(pe[0]-W[0])<g&&Math.abs(pe[1]-W[1])<g}return re};function E(ie,se){var Q=(2+x)*Math.sin(se);se/=2;for(var H=0,oe=1/0;H<10&&Math.abs(oe)>g;H++){var re=Math.cos(se);se-=oe=(se+Math.sin(se)*(re+2)-Q)/(2*re*(1+re))}return[2/Math.sqrt(m*(4+m))*ie*(1+Math.cos(se)),2*Math.sqrt(m/(4+m))*Math.sin(se)]}E.invert=function(ie,se){var Q=.5*se*Math.sqrt((4+m)/m),H=M(Q),oe=Math.cos(H);return[ie/(2/Math.sqrt(m*(4+m))*(1+oe)),M((H+Q*(oe+2))/(2+x))]},(a.geo.eckert4=function(){return L(E)}).raw=E;var k=a.geo.azimuthalEqualArea.raw;function C(ie,se){if(arguments.length<2&&(se=ie),se===1)return k;if(se===1/0)return F;function Q(H,oe){var re=k(H/se,oe);return re[0]*=ie,re}return Q.invert=function(H,oe){var re=k.invert(H/ie,oe);return re[0]*=se,re},Q}function D(){var ie=2,se=I(C),Q=se(ie);return Q.coefficient=function(H){return arguments.length?se(ie=+H):ie},Q}function F(ie,se){return[ie*Math.cos(se)/Math.cos(se/=2),2*Math.sin(se)]}F.invert=function(ie,se){var Q=2*M(se/2);return[ie*Math.cos(Q/2)/Math.cos(Q),Q]},(a.geo.hammer=D).raw=C;function N(ie,se){return[3*ie/(2*m)*Math.sqrt(m*m/3-se*se),se]}N.invert=function(ie,se){return[2/3*m*ie/Math.sqrt(m*m/3-se*se),se]},(a.geo.kavrayskiy7=function(){return L(N)}).raw=N;function G(ie,se){return[ie,1.25*Math.log(Math.tan(m/4+.4*se))]}G.invert=function(ie,se){return[ie,2.5*Math.atan(Math.exp(.8*se))-.625*m]},(a.geo.miller=function(){return L(G)}).raw=G;function U(ie){return function(se){var Q=ie*Math.sin(se),H=30,oe;do se-=oe=(se+Math.sin(se)-Q)/(1+Math.cos(se));while(Math.abs(oe)>g&&--H>0);return se/2}}function X(ie,se,Q){var H=U(Q);function oe(re,ee){return[ie*re*Math.cos(ee=H(ee)),se*Math.sin(ee)]}return oe.invert=function(re,ee){var ae=M(ee/se);return[re/(ie*Math.cos(ae)),M((2*ae+Math.sin(2*ae))/Q)]},oe}var z=X(Math.SQRT2/x,Math.SQRT2,m);(a.geo.mollweide=function(){return L(z)}).raw=z;function B(ie,se){var Q=se*se,H=Q*Q;return[ie*(.8707-.131979*Q+H*(-.013791+H*(.003971*Q-.001529*H))),se*(1.007226+Q*(.015085+H*(-.044475+.028874*Q-.005916*H)))]}B.invert=function(ie,se){var Q=se,H=25,oe;do{var re=Q*Q,ee=re*re;Q-=oe=(Q*(1.007226+re*(.015085+ee*(-.044475+.028874*re-.005916*ee)))-se)/(1.007226+re*(.015085*3+ee*(-.044475*7+.028874*9*re-.005916*11*ee)))}while(Math.abs(oe)>g&&--H>0);return[ie/(.8707+(re=Q*Q)*(-.131979+re*(-.013791+re*re*re*(.003971-.001529*re)))),Q]},(a.geo.naturalEarth=function(){return L(B)}).raw=B;var j=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];j.forEach(function(ie){ie[1]*=1.0144});function V(ie,se){var Q=Math.min(18,Math.abs(se)*36/m),H=Math.floor(Q),oe=Q-H,re=(W=j[H])[0],ee=W[1],ae=(W=j[++H])[0],fe=W[1],de=(W=j[Math.min(19,++H)])[0],pe=W[1],W;return[ie*(ae+oe*(de-re)/2+oe*oe*(de-2*ae+re)/2),(se>0?x:-x)*(fe+oe*(pe-ee)/2+oe*oe*(pe-2*fe+ee)/2)]}V.invert=function(ie,se){var Q=se/x,H=Q*90,oe=Math.min(18,Math.abs(H/5)),re=Math.max(0,Math.floor(oe));do{var ee=j[re][1],ae=j[re+1][1],fe=j[Math.min(19,re+2)][1],de=fe-ee,pe=fe-2*ae+ee,W=2*(Math.abs(Q)-ae)/de,ue=pe/de,me=W*(1-ue*W*(1-2*ue*W));if(me>=0||re===1){H=(se>=0?5:-5)*(me+oe);var be=50,Me;do oe=Math.min(18,Math.abs(H)/5),re=Math.floor(oe),me=oe-re,ee=j[re][1],ae=j[re+1][1],fe=j[Math.min(19,re+2)][1],H-=(Me=(se>=0?x:-x)*(ae+me*(fe-ee)/2+me*me*(fe-2*ae+ee)/2)-se)*y;while(Math.abs(Me)>b&&--be>0);break}}while(--re>=0);var Pe=j[re][0],Ge=j[re+1][0],ze=j[Math.min(19,re+2)][0];return[ie/(Ge+me*(ze-Pe)/2+me*me*(ze-2*Ge+Pe)/2),H*w]},(a.geo.robinson=function(){return L(V)}).raw=V;function K(ie,se){return[ie*Math.cos(se),se]}K.invert=function(ie,se){return[ie/Math.cos(se),se]},(a.geo.sinusoidal=function(){return L(K)}).raw=K;function te(ie,se){var Q=Math.cos(se),H=T(P(Q*Math.cos(ie/=2)));return[2*Q*Math.sin(ie)*H,Math.sin(se)*H]}te.invert=function(ie,se){if(!(ie*ie+4*se*se>m*m+g)){var Q=ie,H=se,oe=25;do{var re=Math.sin(Q),ee=Math.sin(Q/2),ae=Math.cos(Q/2),fe=Math.sin(H),de=Math.cos(H),pe=Math.sin(2*H),W=fe*fe,ue=de*de,me=ee*ee,be=1-ue*ae*ae,Me=be?P(de*ae)*Math.sqrt(Pe=1/be):Pe=0,Pe,Ge=2*Me*de*ee-ie,ze=Me*fe-se,Qe=Pe*(ue*me+Me*de*ae*W),tt=Pe*(.5*re*pe-Me*2*fe*ee),Ce=Pe*.25*(pe*ee-Me*fe*ue*re),Ae=Pe*(W*ae+Me*me*de),Be=tt*Ce-Ae*Qe;if(!Be)break;var qe=(ze*tt-Ge*Ae)/Be,Tt=(Ge*Ce-ze*Qe)/Be;Q-=qe,H-=Tt}while((Math.abs(qe)>g||Math.abs(Tt)>g)&&--oe>0);return[Q,H]}},(a.geo.aitoff=function(){return L(te)}).raw=te;function $(ie,se){var Q=te(ie,se);return[(Q[0]+ie/x)/2,(Q[1]+se)/2]}$.invert=function(ie,se){var Q=ie,H=se,oe=25;do{var re=Math.cos(H),ee=Math.sin(H),ae=Math.sin(2*H),fe=ee*ee,de=re*re,pe=Math.sin(Q),W=Math.cos(Q/2),ue=Math.sin(Q/2),me=ue*ue,be=1-de*W*W,Me=be?P(re*W)*Math.sqrt(Pe=1/be):Pe=0,Pe,Ge=.5*(2*Me*re*ue+Q/x)-ie,ze=.5*(Me*ee+H)-se,Qe=.5*Pe*(de*me+Me*re*W*fe)+.5/x,tt=Pe*(pe*ae/4-Me*ee*ue),Ce=.125*Pe*(ae*ue-Me*ee*de*pe),Ae=.5*Pe*(fe*W+Me*me*re)+.5,Be=tt*Ce-Ae*Qe,qe=(ze*tt-Ge*Ae)/Be,Tt=(Ge*Ce-ze*Qe)/Be;Q-=qe,H-=Tt}while((Math.abs(qe)>g||Math.abs(Tt)>g)&&--oe>0);return[Q,H]},(a.geo.winkel3=function(){return L($)}).raw=$}v.exports=r},{}],864:[function(e,v,S){var r=e("d3"),a=e("../../lib"),u=e("../../registry"),c=Math.PI/180,t=180/Math.PI,f={cursor:"pointer"},n={cursor:"auto"};function o(k,C){var D=k.projection,F;return C._isScoped?F=i:C._isClipped?F=p:F=s,F(k,D)}v.exports=o;function l(k,C){return r.behavior.zoom().translate(C.translate()).scale(C.scale())}function h(k,C,D){var F=k.id,N=k.graphDiv,G=N.layout,U=G[F],X=N._fullLayout,z=X[F],B={},j={};function V(K,te){B[F+"."+K]=a.nestedProperty(U,K).get(),u.call("_storeDirectGUIEdit",G,X._preGUI,B);var $=a.nestedProperty(z,K);$.get()!==te&&($.set(te),a.nestedProperty(U,K).set(te),j[F+"."+K]=te)}D(V),V("projection.scale",C.scale()/k.fitScale),V("fitbounds",!1),N.emit("plotly_relayout",j)}function i(k,C){var D=l(k,C);function F(){r.select(this).style(f)}function N(){C.scale(r.event.scale).translate(r.event.translate),k.render();var X=C.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":C.scale()/k.fitScale,"geo.center.lon":X[0],"geo.center.lat":X[1]})}function G(X){var z=C.invert(k.midPt);X("center.lon",z[0]),X("center.lat",z[1])}function U(){r.select(this).style(n),h(k,C,G)}return D.on("zoomstart",F).on("zoom",N).on("zoomend",U),D}function s(k,C){var D=l(k,C),F=2,N,G,U,X,z,B,j,V,K;function te(oe){return C.invert(oe)}function $(oe){var re=te(oe);if(!re)return!0;var ee=C(re);return Math.abs(ee[0]-oe[0])>F||Math.abs(ee[1]-oe[1])>F}function ie(){r.select(this).style(f),N=r.mouse(this),G=C.rotate(),U=C.translate(),X=G,z=te(N)}function se(){if(B=r.mouse(this),$(N)){D.scale(C.scale()),D.translate(C.translate());return}C.scale(r.event.scale),C.translate([U[0],r.event.translate[1]]),z?te(B)&&(V=te(B),j=[X[0]+(V[0]-z[0]),G[1],G[2]],C.rotate(j),X=j):(N=B,z=te(N)),K=!0,k.render();var oe=C.rotate(),re=C.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":C.scale()/k.fitScale,"geo.center.lon":re[0],"geo.center.lat":re[1],"geo.projection.rotation.lon":-oe[0]})}function Q(){r.select(this).style(n),K&&h(k,C,H)}function H(oe){var re=C.rotate(),ee=C.invert(k.midPt);oe("projection.rotation.lon",-re[0]),oe("center.lon",ee[0]),oe("center.lat",ee[1])}return D.on("zoomstart",ie).on("zoom",se).on("zoomend",Q),D}function p(k,C){C.rotate(),C.scale();var D=l(k,C),F=E(D,"zoomstart","zoom","zoomend"),N=0,G=D.on,U;D.on("zoomstart",function(){r.select(this).style(f);var V=r.mouse(this),K=C.rotate(),te=K,$=C.translate(),ie=g(K);U=d(C,V),G.call(D,"zoom",function(){var se=r.mouse(this);if(C.scale(r.event.scale),!U)V=se,U=d(C,V);else if(d(C,se)){C.rotate(K).translate($);var Q=d(C,se),H=m(U,Q),oe=M(b(ie,H)),re=x(oe,U,te);(!isFinite(re[0])||!isFinite(re[1])||!isFinite(re[2]))&&(re=te),C.rotate(re),te=re}z(F.of(this,arguments))}),X(F.of(this,arguments))}).on("zoomend",function(){r.select(this).style(n),G.call(D,"zoom",null),B(F.of(this,arguments)),h(k,C,j)}).on("zoom.redraw",function(){k.render();var V=C.rotate();k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":C.scale()/k.fitScale,"geo.projection.rotation.lon":-V[0],"geo.projection.rotation.lat":-V[1]})});function X(V){N++||V({type:"zoomstart"})}function z(V){V({type:"zoom"})}function B(V){--N||V({type:"zoomend"})}function j(V){var K=C.rotate();V("projection.rotation.lon",-K[0]),V("projection.rotation.lat",-K[1])}return r.rebind(D,F,"on")}function d(k,C){var D=k.invert(C);return D&&isFinite(D[0])&&isFinite(D[1])&&P(D)}function g(k){var C=.5*k[0]*c,D=.5*k[1]*c,F=.5*k[2]*c,N=Math.sin(C),G=Math.cos(C),U=Math.sin(D),X=Math.cos(D),z=Math.sin(F),B=Math.cos(F);return[G*X*B+N*U*z,N*X*B-G*U*z,G*U*B+N*X*z,G*X*z-N*U*B]}function b(k,C){var D=k[0],F=k[1],N=k[2],G=k[3],U=C[0],X=C[1],z=C[2],B=C[3];return[D*U-F*X-N*z-G*B,D*X+F*U+N*B-G*z,D*z-F*B+N*U+G*X,D*B+F*z-N*X+G*U]}function m(k,C){if(!(!k||!C)){var D=I(k,C),F=Math.sqrt(L(D,D)),N=.5*Math.acos(Math.max(-1,Math.min(1,L(k,C)))),G=Math.sin(N)/F;return F&&[Math.cos(N),D[2]*G,-D[1]*G,D[0]*G]}}function x(k,C,D){var F=T(C,2,k[0]);F=T(F,1,k[1]),F=T(F,0,k[2]-D[2]);var N=C[0],G=C[1],U=C[2],X=F[0],z=F[1],B=F[2],j=Math.atan2(G,N)*t,V=Math.sqrt(N*N+G*G),K,te;Math.abs(z)>V?(te=(z>0?90:-90)-j,K=0):(te=Math.asin(z/V)*t-j,K=Math.sqrt(V*V-z*z));var $=180-te-2*j,ie=(Math.atan2(B,X)-Math.atan2(U,K))*t,se=(Math.atan2(B,X)-Math.atan2(U,-K))*t,Q=w(D[0],D[1],te,ie),H=w(D[0],D[1],$,se);return Q<=H?[te,ie,D[2]]:[$,se,D[2]]}function w(k,C,D,F){var N=y(D-k),G=y(F-C);return Math.sqrt(N*N+G*G)}function y(k){return(k%360+540)%360-180}function T(k,C,D){var F=D*c,N=k.slice(),G=C===0?1:0,U=C===2?1:2,X=Math.cos(F),z=Math.sin(F);return N[G]=k[G]*X-k[U]*z,N[U]=k[U]*X+k[G]*z,N}function M(k){return[Math.atan2(2*(k[0]*k[1]+k[2]*k[3]),1-2*(k[1]*k[1]+k[2]*k[2]))*t,Math.asin(Math.max(-1,Math.min(1,2*(k[0]*k[2]-k[3]*k[1]))))*t,Math.atan2(2*(k[0]*k[3]+k[1]*k[2]),1-2*(k[2]*k[2]+k[3]*k[3]))*t]}function P(k){var C=k[0]*c,D=k[1]*c,F=Math.cos(D);return[F*Math.cos(C),F*Math.sin(C),Math.sin(D)]}function L(k,C){for(var D=0,F=0,N=k.length;F<N;++F)D+=k[F]*C[F];return D}function I(k,C){return[k[1]*C[2]-k[2]*C[1],k[2]*C[0]-k[0]*C[2],k[0]*C[1]-k[1]*C[0]]}function E(k){for(var C=0,D=arguments.length,F=[];++C<D;)F.push(arguments[C]);var N=r.dispatch.apply(null,F);return N.of=function(G,U){return function(X){var z;try{z=X.sourceEvent=r.event,X.target=k,r.event=X,N[X.type].apply(G,U)}finally{r.event=z}}},N}},{"../../lib":778,"../../registry":911,d3:169}],865:[function(e,v,S){var r=e("../registry"),a=e("./cartesian/constants").SUBPLOT_PATTERN;S.getSubplotCalcData=function(u,c,t){var f=r.subplotsRegistry[c];if(!f)return[];for(var n=f.attr,o=[],l=0;l<u.length;l++){var h=u[l],i=h[0].trace;i[n]===t&&o.push(h)}return o},S.getModuleCalcData=function(u,c){var t=[],f=[],n;if(typeof c=="string"?n=r.getModule(c).plot:typeof c=="function"?n=c:n=c.plot,!n)return[t,u];for(var o=0;o<u.length;o++){var l=u[o],h=l[0].trace;h.visible!==!0||h._length===0||(h._module.plot===n?t.push(l):f.push(l))}return[t,f]},S.getSubplotData=function(c,t,f){if(!r.subplotsRegistry[t])return[];var n=r.subplotsRegistry[t].attr,o=[],l,h,i;if(t==="gl2d"){var s=f.match(a);h="x"+s[1],i="y"+s[2]}for(var p=0;p<c.length;p++)l=c[p],t==="gl2d"&&r.traceIs(l,"gl2d")?l[n[0]]===h&&l[n[1]]===i&&o.push(l):l[n]===f&&o.push(l);return o}},{"../registry":911,"./cartesian/constants":834}],866:[function(e,v,S){var r=e("mouse-change"),a=e("mouse-wheel"),u=e("mouse-event-offset"),c=e("../cartesian/constants"),t=e("has-passive-events");v.exports=n;function f(o,l){this.element=o,this.plot=l,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function n(o){var l=o.mouseContainer,h=o.glplot,i=new f(l,h);function s(){o.xaxis.autorange=!1,o.yaxis.autorange=!1}function p(){for(var g=o.graphDiv._fullLayout._axisConstraintGroups,b=o.xaxis._id,m=o.yaxis._id,x=0;x<g.length;x++)if(g[x][b]!==-1){if(g[x][m]!==-1)return!0;break}return!1}i.mouseListener=r(l,d),l.addEventListener("touchstart",function(g){var b=u(g.changedTouches[0],l);d(0,b[0],b[1]),d(1,b[0],b[1]),g.preventDefault()},t?{passive:!1}:!1),l.addEventListener("touchmove",function(g){g.preventDefault();var b=u(g.changedTouches[0],l);d(1,b[0],b[1]),g.preventDefault()},t?{passive:!1}:!1),l.addEventListener("touchend",function(g){d(0,i.lastPos[0],i.lastPos[1]),g.preventDefault()},t?{passive:!1}:!1);function d(g,b,m){var x=o.calcDataBox(),w=h.viewBox,y=i.lastPos[0],T=i.lastPos[1],M=c.MINDRAG*h.pixelRatio,P=c.MINZOOM*h.pixelRatio,L,I;b*=h.pixelRatio,m*=h.pixelRatio,m=w[3]-w[1]-m;function E(G,U,X){var z=Math.min(U,X),B=Math.max(U,X);z!==B?(x[G]=z,x[G+2]=B,i.dataBox=x,o.setRanges(x)):(o.selectBox.selectBox=[0,0,1,1],o.glplot.setDirty())}switch(o.fullLayout.dragmode){case"zoom":if(g){var k=b/(w[2]-w[0])*(x[2]-x[0])+x[0],C=m/(w[3]-w[1])*(x[3]-x[1])+x[1];i.boxInited||(i.boxStart[0]=k,i.boxStart[1]=C,i.dragStart[0]=b,i.dragStart[1]=m),i.boxEnd[0]=k,i.boxEnd[1]=C,i.boxInited=!0,!i.boxEnabled&&(i.boxStart[0]!==i.boxEnd[0]||i.boxStart[1]!==i.boxEnd[1])&&(i.boxEnabled=!0);var D=Math.abs(i.dragStart[0]-b)<P,F=Math.abs(i.dragStart[1]-m)<P;if(p()&&!(D&&F)){L=i.boxEnd[0]-i.boxStart[0],I=i.boxEnd[1]-i.boxStart[1];var N=(x[3]-x[1])/(x[2]-x[0]);Math.abs(L*N)>Math.abs(I)?(i.boxEnd[1]=i.boxStart[1]+Math.abs(L)*N*(I>=0?1:-1),i.boxEnd[1]<x[1]?(i.boxEnd[1]=x[1],i.boxEnd[0]=i.boxStart[0]+(x[1]-i.boxStart[1])/Math.abs(N)):i.boxEnd[1]>x[3]&&(i.boxEnd[1]=x[3],i.boxEnd[0]=i.boxStart[0]+(x[3]-i.boxStart[1])/Math.abs(N))):(i.boxEnd[0]=i.boxStart[0]+Math.abs(I)/N*(L>=0?1:-1),i.boxEnd[0]<x[0]?(i.boxEnd[0]=x[0],i.boxEnd[1]=i.boxStart[1]+(x[0]-i.boxStart[0])*Math.abs(N)):i.boxEnd[0]>x[2]&&(i.boxEnd[0]=x[2],i.boxEnd[1]=i.boxStart[1]+(x[2]-i.boxStart[0])*Math.abs(N)))}else D&&(i.boxEnd[0]=i.boxStart[0]),F&&(i.boxEnd[1]=i.boxStart[1])}else i.boxEnabled?(L=i.boxStart[0]!==i.boxEnd[0],I=i.boxStart[1]!==i.boxEnd[1],L||I?(L&&(E(0,i.boxStart[0],i.boxEnd[0]),o.xaxis.autorange=!1),I&&(E(1,i.boxStart[1],i.boxEnd[1]),o.yaxis.autorange=!1),o.relayoutCallback()):o.glplot.setDirty(),i.boxEnabled=!1,i.boxInited=!1):i.boxInited&&(i.boxInited=!1);break;case"pan":i.boxEnabled=!1,i.boxInited=!1,g?(i.panning||(i.dragStart[0]=b,i.dragStart[1]=m),Math.abs(i.dragStart[0]-b)<M&&(b=i.dragStart[0]),Math.abs(i.dragStart[1]-m)<M&&(m=i.dragStart[1]),L=(y-b)*(x[2]-x[0])/(h.viewBox[2]-h.viewBox[0]),I=(T-m)*(x[3]-x[1])/(h.viewBox[3]-h.viewBox[1]),x[0]+=L,x[2]+=L,x[1]+=I,x[3]+=I,o.setRanges(x),i.panning=!0,i.lastInputTime=Date.now(),s(),o.cameraChanged(),o.handleAnnotations()):i.panning&&(i.panning=!1,o.relayoutCallback());break}i.lastPos[0]=b,i.lastPos[1]=m}return i.wheelListener=a(l,function(g,b){if(!o.scrollZoom)return!1;var m=o.calcDataBox(),x=h.viewBox,w=i.lastPos[0],y=i.lastPos[1],T=Math.exp(5*b/(x[3]-x[1])),M=w/(x[2]-x[0])*(m[2]-m[0])+m[0],P=y/(x[3]-x[1])*(m[3]-m[1])+m[1];return m[0]=(m[0]-M)*T+M,m[2]=(m[2]-M)*T+M,m[1]=(m[1]-P)*T+P,m[3]=(m[3]-P)*T+P,o.setRanges(m),i.lastInputTime=Date.now(),s(),o.cameraChanged(),o.handleAnnotations(),o.relayoutCallback(),!0},!0),i}},{"../cartesian/constants":834,"has-passive-events":441,"mouse-change":483,"mouse-event-offset":484,"mouse-wheel":486}],867:[function(e,v,S){var r=e("../cartesian/axes"),a=e("../../lib/str2rgbarray");function u(n){this.scene=n,this.gl=n.gl,this.pixelRatio=n.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var c=u.prototype,t=["xaxis","yaxis"];c.merge=function(n){this.titleEnable=!1,this.backgroundColor=a(n.plot_bgcolor);var o,l,h,i,s,p,d,g,b,m,x;for(m=0;m<2;++m){o=t[m];var w=o.charAt(0);for(l=n[this.scene[o]._name],h=l.title.text===this.scene.fullLayout._dfltTitle[w]?"":l.title.text,x=0;x<=2;x+=2)this.labelEnable[m+x]=!1,this.labels[m+x]=h,this.labelColor[m+x]=a(l.title.font.color),this.labelFont[m+x]=l.title.font.family,this.labelSize[m+x]=l.title.font.size,this.labelPad[m+x]=this.getLabelPad(o,l),this.tickEnable[m+x]=!1,this.tickColor[m+x]=a((l.tickfont||{}).color),this.tickAngle[m+x]=l.tickangle==="auto"?0:Math.PI*-l.tickangle/180,this.tickPad[m+x]=this.getTickPad(l),this.tickMarkLength[m+x]=0,this.tickMarkWidth[m+x]=l.tickwidth||0,this.tickMarkColor[m+x]=a(l.tickcolor),this.borderLineEnable[m+x]=!1,this.borderLineColor[m+x]=a(l.linecolor),this.borderLineWidth[m+x]=l.linewidth||0;d=this.hasSharedAxis(l),s=this.hasAxisInDfltPos(o,l)&&!d,p=this.hasAxisInAltrPos(o,l)&&!d,i=l.mirror||!1,g=d?String(i).indexOf("all")!==-1:!!i,b=d?i==="allticks":String(i).indexOf("ticks")!==-1,s?this.labelEnable[m]=!0:p&&(this.labelEnable[m+2]=!0),s?this.tickEnable[m]=l.showticklabels:p&&(this.tickEnable[m+2]=l.showticklabels),(s||g)&&(this.borderLineEnable[m]=l.showline),(p||g)&&(this.borderLineEnable[m+2]=l.showline),(s||b)&&(this.tickMarkLength[m]=this.getTickMarkLength(l)),(p||b)&&(this.tickMarkLength[m+2]=this.getTickMarkLength(l)),this.gridLineEnable[m]=l.showgrid,this.gridLineColor[m]=a(l.gridcolor),this.gridLineWidth[m]=l.gridwidth,this.zeroLineEnable[m]=l.zeroline,this.zeroLineColor[m]=a(l.zerolinecolor),this.zeroLineWidth[m]=l.zerolinewidth}},c.hasSharedAxis=function(n){var o=this.scene,l=o.fullLayout._subplots.gl2d,h=r.findSubplotsWithAxis(l,n);return h.indexOf(o.id)!==0},c.hasAxisInDfltPos=function(n,o){var l=o.side;if(n==="xaxis")return l==="bottom";if(n==="yaxis")return l==="left"},c.hasAxisInAltrPos=function(n,o){var l=o.side;if(n==="xaxis")return l==="top";if(n==="yaxis")return l==="right"},c.getLabelPad=function(n,o){var l=1.5,h=o.title.font.size,i=o.showticklabels;if(n==="xaxis")return o.side==="top"?-10+h*(l+(i?1:0)):-10+h*(l+(i?.5:0));if(n==="yaxis")return o.side==="right"?10+h*(l+(i?1:.5)):10+h*(l+(i?.5:0))},c.getTickPad=function(n){return n.ticks==="outside"?10+n.ticklen:15},c.getTickMarkLength=function(n){if(!n.ticks)return 0;var o=n.ticklen;return n.ticks==="inside"?-o:o};function f(n){return new u(n)}v.exports=f},{"../../lib/str2rgbarray":802,"../cartesian/axes":828}],868:[function(e,v,S){var r=e("../../plot_api/edit_types").overrideAll,a=e("./scene2d"),u=e("../layout_attributes"),c=e("../../constants/xmlns_namespaces"),t=e("../cartesian/constants"),f=e("../cartesian"),n=e("../../components/fx/layout_attributes"),o=e("../get_data").getSubplotData;S.name="gl2d",S.attr=["xaxis","yaxis"],S.idRoot=["x","y"],S.idRegex=t.idRegex,S.attrRegex=t.attrRegex,S.attributes=e("../cartesian/attributes"),S.supplyLayoutDefaults=function(l,h,i){h._has("cartesian")||f.supplyLayoutDefaults(l,h,i)},S.layoutAttrOverrides=r(f.layoutAttributes,"plot","from-root"),S.baseLayoutAttrOverrides=r({plot_bgcolor:u.plot_bgcolor,hoverlabel:n.hoverlabel},"plot","nested"),S.plot=function(h){for(var i=h._fullLayout,s=h._fullData,p=i._subplots.gl2d,d=0;d<p.length;d++){var g=p[d],b=i._plots[g],m=o(s,"gl2d",g),x=b._scene2d;x===void 0&&(x=new a({id:g,graphDiv:h,container:h.querySelector(".gl-container"),staticPlot:h._context.staticPlot,plotGlPixelRatio:h._context.plotGlPixelRatio},i),b._scene2d=x),x.plot(m,h.calcdata,i,h.layout)}},S.clean=function(l,h,i,s){for(var p=s._subplots.gl2d||[],d=0;d<p.length;d++){var g=p[d],b=s._plots[g];if(!!b._scene2d){var m=o(l,"gl2d",g);m.length===0&&(b._scene2d.destroy(),delete s._plots[g])}}f.clean.apply(this,arguments)},S.drawFramework=function(l){l._context.staticPlot||f.drawFramework(l)},S.toSVG=function(l){for(var h=l._fullLayout,i=h._subplots.gl2d,s=0;s<i.length;s++){var p=h._plots[i[s]],d=p._scene2d,g=d.toImage("png"),b=h._glimages.append("svg:image");b.attr({xmlns:c.svg,"xlink:href":g,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),d.destroy()}},S.updateFx=function(l){for(var h=l._fullLayout,i=h._subplots.gl2d,s=0;s<i.length;s++){var p=h._plots[i[s]]._scene2d;p.updateFx(h.dragmode)}}},{"../../components/fx/layout_attributes":684,"../../constants/xmlns_namespaces":754,"../../plot_api/edit_types":810,"../cartesian":841,"../cartesian/attributes":826,"../cartesian/constants":834,"../get_data":865,"../layout_attributes":882,"./scene2d":869}],869:[function(e,v,S){var r=e("../../registry"),a=e("../../plots/cartesian/axes"),u=e("../../components/fx"),c=e("gl-plot2d"),t=e("gl-spikes2d"),f=e("gl-select-box"),n=e("webgl-context"),o=e("./convert"),l=e("./camera"),h=e("../../lib/show_no_webgl_msg"),i=e("../cartesian/constraints"),s=i.enforce,p=i.clean,d=e("../cartesian/autorange").doAutoRange,g=e("../../components/dragelement/helpers"),b=g.drawMode,m=g.selectMode,x=["xaxis","yaxis"],w,y,T=e("../cartesian/constants").SUBPLOT_PATTERN;function M(I,E){this.container=I.container,this.graphDiv=I.graphDiv,this.pixelRatio=I.plotGlPixelRatio||window.devicePixelRatio,this.id=I.id,this.staticPlot=!!I.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(E),this.makeFramework(),!this.stopped&&(this.glplotOptions=o(this),this.glplotOptions.merge(E),this.glplot=c(this.glplotOptions),this.camera=l(this),this.traces={},this.spikes=t(this.glplot),this.selectBox=f(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}v.exports=M;var P=M.prototype;P.makeFramework=function(){if(this.staticPlot){if(!y&&(w=document.createElement("canvas"),y=n({canvas:w,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!y))throw new Error("Error creating static canvas/context for image server");this.canvas=w,this.gl=y}else{var I=this.container.querySelector(".gl-canvas-focus"),E=n({canvas:I,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!E){h(this),this.stopped=!0;return}this.canvas=I,this.gl=E}var k=this.canvas;k.style.width="100%",k.style.height="100%",k.style.position="absolute",k.style.top="0px",k.style.left="0px",k.style["pointer-events"]="none",this.updateSize(k);var C=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");C.style.position="absolute",C.style.top=C.style.left="0px",C.style.width=C.style.height="100%",C.style["z-index"]=20,C.style["pointer-events"]="none";var D=this.mouseContainer=document.createElement("div");D.style.position="absolute",D.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var F=this.container;F.appendChild(C),F.appendChild(D);var N=this;D.addEventListener("mouseout",function(){N.isMouseOver=!1,N.unhover()}),D.addEventListener("mouseover",function(){N.isMouseOver=!0})},P.toImage=function(I){I||(I="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(w),this.updateSize(this.canvas);var E=this.glplot.gl,k=E.drawingBufferWidth,C=E.drawingBufferHeight;E.clearColor(1,1,1,0),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),E.bindFramebuffer(E.FRAMEBUFFER,null);var D=new Uint8Array(k*C*4);E.readPixels(0,0,k,C,E.RGBA,E.UNSIGNED_BYTE,D);for(var F=0,N=C-1;F<N;++F,--N)for(var G=0;G<k;++G)for(var U=0;U<4;++U){var X=D[4*(k*F+G)+U];D[4*(k*F+G)+U]=D[4*(k*N+G)+U],D[4*(k*N+G)+U]=X}var z=document.createElement("canvas");z.width=k,z.height=C;var B=z.getContext("2d"),j=B.createImageData(k,C);j.data.set(D),B.putImageData(j,0,0);var V;switch(I){case"jpeg":V=z.toDataURL("image/jpeg");break;case"webp":V=z.toDataURL("image/webp");break;default:V=z.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(w),V},P.updateSize=function(I){I||(I=this.canvas);var E=this.pixelRatio,k=this.fullLayout,C=k.width,D=k.height,F=Math.ceil(E*C)|0,N=Math.ceil(E*D)|0;return(I.width!==F||I.height!==N)&&(I.width=F,I.height=N),I},P.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var I=[a.calcTicks(this.xaxis),a.calcTicks(this.yaxis)],E=0;E<2;++E)for(var k=0;k<I[E].length;++k)I[E][k].text=I[E][k].text+"";return I};function L(I,E){for(var k=0;k<2;++k){var C=I[k],D=E[k];if(C.length!==D.length)return!0;for(var F=0;F<C.length;++F)if(C[F].x!==D[F].x)return!0}return!1}P.updateRefs=function(I){this.fullLayout=I;var E=this.id.match(T),k="xaxis"+E[1],C="yaxis"+E[2];this.xaxis=this.fullLayout[k],this.yaxis=this.fullLayout[C]},P.relayoutCallback=function(){var I=this.graphDiv,E=this.xaxis,k=this.yaxis,C=I.layout,D={},F=D[E._name+".range"]=E.range.slice(),N=D[k._name+".range"]=k.range.slice();D[E._name+".autorange"]=E.autorange,D[k._name+".autorange"]=k.autorange,r.call("_storeDirectGUIEdit",I.layout,I._fullLayout._preGUI,D);var G=C[E._name];G.range=F,G.autorange=E.autorange;var U=C[k._name];U.range=N,U.autorange=k.autorange,D.lastInputTime=this.camera.lastInputTime,I.emit("plotly_relayout",D)},P.cameraChanged=function(){var I=this.camera;this.glplot.setDataBox(this.calcDataBox());var E=this.computeTickMarks(),k=this.glplotOptions.ticks;L(E,k)&&(this.glplotOptions.ticks=E,this.glplotOptions.dataBox=I.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},P.handleAnnotations=function(){for(var I=this.graphDiv,E=this.fullLayout.annotations,k=0;k<E.length;k++){var C=E[k];C.xref===this.xaxis._id&&C.yref===this.yaxis._id&&r.getComponentMethod("annotations","drawOne")(I,k)}},P.destroy=function(){if(!!this.glplot){var I=this.traces;I&&Object.keys(I).map(function(E){I[E].dispose(),delete I[E]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},P.plot=function(I,E,k){var C=this.glplot;this.updateRefs(k),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(I,E),this.updateFx(k.dragmode);var D=k.width,F=k.height;this.updateSize(this.canvas);var N=this.glplotOptions;N.merge(k),N.screenBox=[0,0,D,F];var G={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis}};p(G,this.xaxis),p(G,this.yaxis);var U=k._size,X=this.xaxis.domain,z=this.yaxis.domain;N.viewBox=[U.l+X[0]*U.w,U.b+z[0]*U.h,D-U.r-(1-X[1])*U.w,F-U.t-(1-z[1])*U.h],this.mouseContainer.style.width=U.w*(X[1]-X[0])+"px",this.mouseContainer.style.height=U.h*(z[1]-z[0])+"px",this.mouseContainer.height=U.h*(z[1]-z[0]),this.mouseContainer.style.left=U.l+X[0]*U.w+"px",this.mouseContainer.style.top=U.t+(1-z[1])*U.h+"px";var B,j;for(j=0;j<2;++j)B=this[x[j]],B._length=N.viewBox[j+2]-N.viewBox[j],d(this.graphDiv,B),B.setScale();s(G),N.ticks=this.computeTickMarks(),N.dataBox=this.calcDataBox(),N.merge(k),C.update(N),this.glplot.draw()},P.calcDataBox=function(){var I=this.xaxis,E=this.yaxis,k=I.range,C=E.range,D=I.r2l,F=E.r2l;return[D(k[0]),F(C[0]),D(k[1]),F(C[1])]},P.setRanges=function(I){var E=this.xaxis,k=this.yaxis,C=E.l2r,D=k.l2r;E.range=[C(I[0]),C(I[2])],k.range=[D(I[1]),D(I[3])]},P.updateTraces=function(I,E){var k=Object.keys(this.traces),C,D,F;this.fullData=I;e:for(C=0;C<k.length;C++){var N=k[C],G=this.traces[N];for(D=0;D<I.length;D++)if(F=I[D],F.uid===N&&F.type===G.type)continue e;G.dispose(),delete this.traces[N]}for(C=0;C<I.length;C++){F=I[C];var U=E[C],X=this.traces[F.uid];X?X.update(F,U):(X=F._module.plot(this,F,U),this.traces[F.uid]=X)}this.glplot.objects.sort(function(z,B){return z._trace.index-B._trace.index})},P.updateFx=function(I){m(I)||b(I)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),I==="pan"?this.mouseContainer.style.cursor="move":I==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},P.emitPointAction=function(I,E){for(var k=I.trace.uid,C=I.pointIndex,D,F=0;F<this.fullData.length;F++)this.fullData[F].uid===k&&(D=this.fullData[F]);var N={x:I.traceCoord[0],y:I.traceCoord[1],curveNumber:D.index,pointNumber:C,data:D._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};u.appendArrayPointValue(N,D,C),this.graphDiv.emit(E,{points:[N]})},P.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var I=this.glplot,E=this.camera,k=E.mouseListener,C=this.lastButtonState===1&&k.buttons===0,D=this.fullLayout;this.lastButtonState=k.buttons,this.cameraChanged();var F=k.x*I.pixelRatio,N=this.canvas.height-I.pixelRatio*k.y,G;if(E.boxEnabled&&D.dragmode==="zoom"){this.selectBox.enabled=!0;for(var U=this.selectBox.selectBox=[Math.min(E.boxStart[0],E.boxEnd[0]),Math.min(E.boxStart[1],E.boxEnd[1]),Math.max(E.boxStart[0],E.boxEnd[0]),Math.max(E.boxStart[1],E.boxEnd[1])],X=0;X<2;X++)E.boxStart[X]===E.boxEnd[X]&&(U[X]=I.dataBox[X],U[X+2]=I.dataBox[X+2]);I.setDirty()}else if(!E.panning&&this.isMouseOver){this.selectBox.enabled=!1;var z=D._size,B=this.xaxis.domain,j=this.yaxis.domain;G=I.pick(F/I.pixelRatio+z.l+B[0]*z.w,N/I.pixelRatio-(z.t+(1-j[1])*z.h));var V=G&&G.object._trace.handlePick(G);if(V&&C&&this.emitPointAction(V,"plotly_click"),G&&G.object._trace.hoverinfo!=="skip"&&D.hovermode&&V&&(!this.lastPickResult||this.lastPickResult.traceUid!==V.trace.uid||this.lastPickResult.dataCoord[0]!==V.dataCoord[0]||this.lastPickResult.dataCoord[1]!==V.dataCoord[1])){var K=V;this.lastPickResult={traceUid:V.trace?V.trace.uid:null,dataCoord:V.dataCoord.slice()},this.spikes.update({center:G.dataCoord}),K.screenCoord=[((I.viewBox[2]-I.viewBox[0])*(G.dataCoord[0]-I.dataBox[0])/(I.dataBox[2]-I.dataBox[0])+I.viewBox[0])/I.pixelRatio,(this.canvas.height-(I.viewBox[3]-I.viewBox[1])*(G.dataCoord[1]-I.dataBox[1])/(I.dataBox[3]-I.dataBox[1])-I.viewBox[1])/I.pixelRatio],this.emitPointAction(V,"plotly_hover");var te=this.fullData[K.trace.index]||{},$=K.pointIndex,ie=u.castHoverinfo(te,D,$);if(ie&&ie!=="all"){var se=ie.split("+");se.indexOf("x")===-1&&(K.traceCoord[0]=void 0),se.indexOf("y")===-1&&(K.traceCoord[1]=void 0),se.indexOf("z")===-1&&(K.traceCoord[2]=void 0),se.indexOf("text")===-1&&(K.textLabel=void 0),se.indexOf("name")===-1&&(K.name=void 0)}u.loneHover({x:K.screenCoord[0],y:K.screenCoord[1],xLabel:this.hoverFormatter("xaxis",K.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",K.traceCoord[1]),zLabel:K.traceCoord[2],text:K.textLabel,name:K.name,color:u.castHoverOption(te,$,"bgcolor")||K.color,borderColor:u.castHoverOption(te,$,"bordercolor"),fontFamily:u.castHoverOption(te,$,"font.family"),fontSize:u.castHoverOption(te,$,"font.size"),fontColor:u.castHoverOption(te,$,"font.color"),nameLength:u.castHoverOption(te,$,"namelength"),textAlign:u.castHoverOption(te,$,"align")},{container:this.svgContainer,gd:this.graphDiv})}}G||this.unhover(),I.draw()}},P.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),u.loneUnhover(this.svgContainer))},P.hoverFormatter=function(I,E){if(E!==void 0){var k=this[I];return a.tickText(k,k.c2l(E),"hover").text}}},{"../../components/dragelement/helpers":661,"../../components/fx":683,"../../lib/show_no_webgl_msg":800,"../../plots/cartesian/axes":828,"../../registry":911,"../cartesian/autorange":827,"../cartesian/constants":834,"../cartesian/constraints":835,"./camera":866,"./convert":867,"gl-plot2d":317,"gl-select-box":333,"gl-spikes2d":342,"webgl-context":606}],870:[function(e,v,S){var r=e("../../plot_api/edit_types").overrideAll,a=e("../../components/fx/layout_attributes"),u=e("./scene"),c=e("../get_data").getSubplotData,t=e("../../lib"),f=e("../../constants/xmlns_namespaces"),n="gl3d",o="scene";S.name=n,S.attr=o,S.idRoot=o,S.idRegex=S.attrRegex=t.counterRegex("scene"),S.attributes=e("./layout/attributes"),S.layoutAttributes=e("./layout/layout_attributes"),S.baseLayoutAttrOverrides=r({hoverlabel:a.hoverlabel},"plot","nested"),S.supplyLayoutDefaults=e("./layout/defaults"),S.plot=function(h){for(var i=h._fullLayout,s=h._fullData,p=i._subplots[n],d=0;d<p.length;d++){var g=p[d],b=c(s,n,g),m=i[g],x=m.camera,w=m._scene;w||(w=new u({id:g,graphDiv:h,container:h.querySelector(".gl-container"),staticPlot:h._context.staticPlot,plotGlPixelRatio:h._context.plotGlPixelRatio,camera:x},i),m._scene=w),w.viewInitial||(w.viewInitial={up:{x:x.up.x,y:x.up.y,z:x.up.z},eye:{x:x.eye.x,y:x.eye.y,z:x.eye.z},center:{x:x.center.x,y:x.center.y,z:x.center.z}}),w.plot(b,i,h.layout)}},S.clean=function(l,h,i,s){for(var p=s._subplots[n]||[],d=0;d<p.length;d++){var g=p[d];!h[g]&&!!s[g]._scene&&(s[g]._scene.destroy(),s._infolayer&&s._infolayer.selectAll(".annotation-"+g).remove())}},S.toSVG=function(l){for(var h=l._fullLayout,i=h._subplots[n],s=h._size,p=0;p<i.length;p++){var d=h[i[p]],g=d.domain,b=d._scene,m=b.toImage("png"),x=h._glimages.append("svg:image");x.attr({xmlns:f.svg,"xlink:href":m,x:s.l+s.w*g.x[0],y:s.t+s.h*(1-g.y[1]),width:s.w*(g.x[1]-g.x[0]),height:s.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"}),b.destroy()}},S.cleanId=function(h){if(!!h.match(/^scene[0-9]*$/)){var i=h.substr(5);return i==="1"&&(i=""),o+i}},S.updateFx=function(l){for(var h=l._fullLayout,i=h._subplots[n],s=0;s<i.length;s++){var p=h[i[s]]._scene;p.updateFx(h.dragmode,h.hovermode)}}},{"../../components/fx/layout_attributes":684,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../plot_api/edit_types":810,"../get_data":865,"./layout/attributes":871,"./layout/defaults":875,"./layout/layout_attributes":876,"./scene":880}],871:[function(e,v,S){v.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],872:[function(e,v,S){var r=e("../../../components/color"),a=e("../../cartesian/layout_attributes"),u=e("../../../lib/extend").extendFlat,c=e("../../../plot_api/edit_types").overrideAll;v.exports=c({visible:a.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:r.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:a.color,categoryorder:a.categoryorder,categoryarray:a.categoryarray,title:{text:a.title.text,font:a.title.font},type:u({},a.type,{values:["-","linear","log","date","category"]}),autotypenumbers:a.autotypenumbers,autorange:a.autorange,rangemode:a.rangemode,range:u({},a.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:a.ticks,mirror:a.mirror,ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,tickfont:a.tickfont,tickangle:a.tickangle,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,showexponent:a.showexponent,exponentformat:a.exponentformat,minexponent:a.minexponent,separatethousands:a.separatethousands,tickformat:a.tickformat,tickformatstops:a.tickformatstops,hoverformat:a.hoverformat,showline:a.showline,linecolor:a.linecolor,linewidth:a.linewidth,showgrid:a.showgrid,gridcolor:u({},a.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:a.gridwidth,zeroline:a.zeroline,zerolinecolor:a.zerolinecolor,zerolinewidth:a.zerolinewidth,_deprecated:{title:a._deprecated.title,titlefont:a._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":643,"../../../lib/extend":768,"../../../plot_api/edit_types":810,"../../cartesian/layout_attributes":842}],873:[function(e,v,S){var r=e("tinycolor2").mix,a=e("../../../lib"),u=e("../../../plot_api/plot_template"),c=e("./axis_attributes"),t=e("../../cartesian/type_defaults"),f=e("../../cartesian/axis_defaults"),n=["xaxis","yaxis","zaxis"],o=100*(204-68)/(255-68);v.exports=function(h,i,s){var p,d;function g(x,w){return a.coerce(p,d,c,x,w)}for(var b=0;b<n.length;b++){var m=n[b];p=h[m]||{},d=u.newContainer(i,m),d._id=m[0]+s.scene,d._name=m,t(p,d,g,s),f(p,d,g,{font:s.font,letter:m[0],data:s.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,bgColor:s.bgColor,calendar:s.calendar},s.fullLayout),g("gridcolor",r(d.color,s.bgColor,o).toRgbString()),g("title.text",m[0]),d.setScale=a.noop,g("showspikes")&&(g("spikesides"),g("spikethickness"),g("spikecolor",d.color)),g("showaxeslabels"),g("showbackground")&&g("backgroundcolor")}}},{"../../../lib":778,"../../../plot_api/plot_template":817,"../../cartesian/axis_defaults":830,"../../cartesian/type_defaults":853,"./axis_attributes":872,tinycolor2:576}],874:[function(e,v,S){var r=e("../../../lib/str2rgbarray"),a=e("../../../lib"),u=["xaxis","yaxis","zaxis"];function c(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var t=c.prototype;t.merge=function(n,o){for(var l=this,h=0;h<3;++h){var i=o[u[h]];if(!i.visible){l.tickEnable[h]=!1,l.labelEnable[h]=!1,l.lineEnable[h]=!1,l.lineTickEnable[h]=!1,l.gridEnable[h]=!1,l.zeroEnable[h]=!1,l.backgroundEnable[h]=!1;continue}l.labels[h]=n._meta?a.templateString(i.title.text,n._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(l.labelColor[h]=r(i.title.font.color)),i.title.font.family&&(l.labelFont[h]=i.title.font.family),i.title.font.size&&(l.labelSize[h]=i.title.font.size)),"showline"in i&&(l.lineEnable[h]=i.showline),"linecolor"in i&&(l.lineColor[h]=r(i.linecolor)),"linewidth"in i&&(l.lineWidth[h]=i.linewidth),"showgrid"in i&&(l.gridEnable[h]=i.showgrid),"gridcolor"in i&&(l.gridColor[h]=r(i.gridcolor)),"gridwidth"in i&&(l.gridWidth[h]=i.gridwidth),i.type==="log"?l.zeroEnable[h]=!1:"zeroline"in i&&(l.zeroEnable[h]=i.zeroline),"zerolinecolor"in i&&(l.zeroLineColor[h]=r(i.zerolinecolor)),"zerolinewidth"in i&&(l.zeroLineWidth[h]=i.zerolinewidth),"ticks"in i&&!!i.ticks?l.lineTickEnable[h]=!0:l.lineTickEnable[h]=!1,"ticklen"in i&&(l.lineTickLength[h]=l._defaultLineTickLength[h]=i.ticklen),"tickcolor"in i&&(l.lineTickColor[h]=r(i.tickcolor)),"tickwidth"in i&&(l.lineTickWidth[h]=i.tickwidth),"tickangle"in i&&(l.tickAngle[h]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(l.tickEnable[h]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(l.tickColor[h]=r(i.tickfont.color)),i.tickfont.family&&(l.tickFont[h]=i.tickfont.family),i.tickfont.size&&(l.tickSize[h]=i.tickfont.size)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(l.lineTickMirror[h]=!0,l.lineMirror[h]=!0):i.mirror===!0?(l.lineTickMirror[h]=!1,l.lineMirror[h]=!0):(l.lineTickMirror[h]=!1,l.lineMirror[h]=!1):l.lineMirror[h]=!1,"showbackground"in i&&i.showbackground!==!1?(l.backgroundEnable[h]=!0,l.backgroundColor[h]=r(i.backgroundcolor)):l.backgroundEnable[h]=!1}};function f(n,o){var l=new c;return l.merge(n,o),l}v.exports=f},{"../../../lib":778,"../../../lib/str2rgbarray":802}],875:[function(e,v,S){var r=e("../../../lib"),a=e("../../../components/color"),u=e("../../../registry"),c=e("../../subplot_defaults"),t=e("./axis_defaults"),f=e("./layout_attributes"),n=e("../../get_data").getSubplotData,o="gl3d";v.exports=function(i,s,p){var d=s._basePlotModules.length>1;function g(b){if(!d){var m=r.validate(i[b],f[b]);if(m)return i[b]}}c(i,s,p,{type:o,attributes:f,handleDefaults:l,fullLayout:s,font:s.font,fullData:p,getDfltFromLayout:g,autotypenumbersDflt:s.autotypenumbers,paper_bgcolor:s.paper_bgcolor,calendar:s.calendar})};function l(h,i,s,p){for(var d=s("bgcolor"),g=a.combine(d,p.paper_bgcolor),b=["up","center","eye"],m=0;m<b.length;m++)s("camera."+b[m]+".x"),s("camera."+b[m]+".y"),s("camera."+b[m]+".z");s("camera.projection.type");var x=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),w=x?"manual":"auto",y=s("aspectmode",w);x||(h.aspectratio=i.aspectratio={x:1,y:1,z:1},y==="manual"&&(i.aspectmode="auto"),h.aspectmode=i.aspectmode);var T=n(p.fullData,o,p.id);t(h,i,{font:p.font,scene:p.id,data:T,bgColor:g,calendar:p.calendar,autotypenumbersDflt:p.autotypenumbersDflt,fullLayout:p.fullLayout}),u.getComponentMethod("annotations3d","handleDefaults")(h,i,p);var M=p.getDfltFromLayout("dragmode");if(M!==!1&&!M)if(M="orbit",h.camera&&h.camera.up){var P=h.camera.up.x,L=h.camera.up.y,I=h.camera.up.z;I!==0&&(!P||!L||!I||I/Math.sqrt(P*P+L*L+I*I)>.999)&&(M="turntable")}else M="turntable";s("dragmode",M),s("hovermode",p.getDfltFromLayout("hovermode"))}},{"../../../components/color":643,"../../../lib":778,"../../../registry":911,"../../get_data":865,"../../subplot_defaults":905,"./axis_defaults":873,"./layout_attributes":876}],876:[function(e,v,S){var r=e("./axis_attributes"),a=e("../../domain").attributes,u=e("../../../lib/extend").extendFlat,c=e("../../../lib").counterRegex;function t(f,n,o){return{x:{valType:"number",dflt:f,editType:"camera"},y:{valType:"number",dflt:n,editType:"camera"},z:{valType:"number",dflt:o,editType:"camera"},editType:"camera"}}v.exports={_arrayAttrRegexps:[c("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:u(t(0,0,1),{}),center:u(t(0,0,0),{}),eye:u(t(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:a({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:r,yaxis:r,zaxis:r,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":778,"../../../lib/extend":768,"../../domain":855,"./axis_attributes":872}],877:[function(e,v,S){var r=e("../../../lib/str2rgbarray"),a=["xaxis","yaxis","zaxis"];function u(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var c=u.prototype;c.merge=function(f){for(var n=0;n<3;++n){var o=f[a[n]];if(!o.visible){this.enabled[n]=!1,this.drawSides[n]=!1;continue}this.enabled[n]=o.showspikes,this.colors[n]=r(o.spikecolor),this.drawSides[n]=o.spikesides,this.lineWidth[n]=o.spikethickness}};function t(f){var n=new u;return n.merge(f),n}v.exports=t},{"../../../lib/str2rgbarray":802}],878:[function(e,v,S){v.exports=t;var r=e("../../cartesian/axes"),a=e("../../../lib"),u=["xaxis","yaxis","zaxis"];function c(f){for(var n=new Array(3),o=0;o<3;++o){for(var l=f[o],h=new Array(l.length),i=0;i<l.length;++i)h[i]=l[i].x;n[o]=h}return n}function t(f){for(var n=f.axesOptions,o=f.glplot.axesPixels,l=f.fullSceneLayout,h=[[],[],[]],i=0;i<3;++i){var s=l[u[i]];if(s._length=(o[i].hi-o[i].lo)*o[i].pixelsPerDataUnit/f.dataScale[i],Math.abs(s._length)===1/0||isNaN(s._length))h[i]=[];else{s._input_range=s.range.slice(),s.range[0]=o[i].lo/f.dataScale[i],s.range[1]=o[i].hi/f.dataScale[i],s._m=1/(f.dataScale[i]*o[i].pixelsPerDataUnit),s.range[0]===s.range[1]&&(s.range[0]-=1,s.range[1]+=1);var p=s.tickmode;if(s.tickmode==="auto"){s.tickmode="linear";var d=s.nticks||a.constrain(s._length/40,4,9);r.autoTicks(s,Math.abs(s.range[1]-s.range[0])/d)}for(var g=r.calcTicks(s,{msUTC:!0}),b=0;b<g.length;++b)g[b].x=g[b].x*f.dataScale[i],s.type==="date"&&(g[b].text=g[b].text.replace(/\<br\>/g," "));h[i]=g,s.tickmode=p}}n.ticks=h;for(var i=0;i<3;++i){.5*(f.glplot.bounds[0][i]+f.glplot.bounds[1][i]);for(var b=0;b<2;++b)n.bounds[b][i]=f.glplot.bounds[b][i]}f.contourLevels=c(h)}},{"../../../lib":778,"../../cartesian/axes":828}],879:[function(e,v,S){function r(u,c){var t=[0,0,0,0],f,n;for(f=0;f<4;++f)for(n=0;n<4;++n)t[n]+=u[4*f+n]*c[f];return t}function a(u,c){var t=r(u.projection,r(u.view,r(u.model,[c[0],c[1],c[2],1])));return t}v.exports=a},{}],880:[function(e,v,S){var r=e("gl-plot3d"),a=r.createCamera,u=r.createScene,c=e("webgl-context"),t=e("has-passive-events"),f=e("../../registry"),n=e("../../lib"),o=n.preserveDrawingBuffer(),l=e("../../plots/cartesian/axes"),h=e("../../components/fx"),i=e("../../lib/str2rgbarray"),s=e("../../lib/show_no_webgl_msg"),p=e("./project"),d=e("./layout/convert"),g=e("./layout/spikes"),b=e("./layout/tick_marks"),m,x;function w(D,F){var N=document.createElement("div"),G=D.container;this.graphDiv=D.graphDiv;var U=document.createElementNS("http://www.w3.org/2000/svg","svg");U.style.position="absolute",U.style.top=U.style.left="0px",U.style.width=U.style.height="100%",U.style["z-index"]=20,U.style["pointer-events"]="none",N.appendChild(U),this.svgContainer=U,N.id=D.id,N.style.position="absolute",N.style.top=N.style.left="0px",N.style.width=N.style.height="100%",G.appendChild(N),this.fullLayout=F,this.id=D.id||"scene",this.fullSceneLayout=F[this.id],this.plotArgs=[[],{},{}],this.axesOptions=d(F,F[this.id]),this.spikeOptions=g(F[this.id]),this.container=N,this.staticMode=!!D.staticPlot,this.pixelRatio=this.pixelRatio||D.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=f.getComponentMethod("annotations3d","convert"),this.drawAnnotations=f.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var y=w.prototype;y.prepareOptions=function(){var D=this,F={canvas:D.canvas,gl:D.gl,glOptions:{preserveDrawingBuffer:o,premultipliedAlpha:!0,antialias:!0},container:D.container,axes:D.axesOptions,spikes:D.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:D.camera,pixelRatio:D.pixelRatio};if(D.staticMode){if(!x&&(m=document.createElement("canvas"),x=c({canvas:m,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!x))throw new Error("error creating static canvas/context for image server");F.gl=x,F.canvas=m}return F};var T=!0;y.tryCreatePlot=function(){var D=this,F=D.prepareOptions(),N=!0;try{D.glplot=u(F)}catch{if(D.staticMode||!T||o)N=!1;else{n.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{o=F.glOptions.preserveDrawingBuffer=!0,D.glplot=u(F)}catch{o=F.glOptions.preserveDrawingBuffer=!1,N=!1}}}return T=!1,N},y.initializeGLCamera=function(){var D=this,F=D.fullSceneLayout.camera,N=F.projection.type==="orthographic";D.camera=a(D.container,{center:[F.center.x,F.center.y,F.center.z],eye:[F.eye.x,F.eye.y,F.eye.z],up:[F.up.x,F.up.y,F.up.z],_ortho:N,zoomMin:.01,zoomMax:100,mode:"orbit"})},y.initializeGLPlot=function(){var D=this;D.initializeGLCamera();var F=D.tryCreatePlot();if(!F)return s(D);D.traces={},D.make4thDimension();var N=D.graphDiv,G=N.layout,U=function(){var z={};return D.isCameraChanged(G)&&(z[D.id+".camera"]=D.getCamera()),D.isAspectChanged(G)&&(z[D.id+".aspectratio"]=D.glplot.getAspectratio(),G[D.id].aspectmode!=="manual"&&(D.fullSceneLayout.aspectmode=G[D.id].aspectmode=z[D.id+".aspectmode"]="manual")),z},X=function(z){if(z.fullSceneLayout.dragmode!==!1){var B=U();z.saveLayout(G),z.graphDiv.emit("plotly_relayout",B)}};return D.glplot.canvas&&(D.glplot.canvas.addEventListener("mouseup",function(){X(D)}),D.glplot.canvas.addEventListener("wheel",function(z){if(N._context._scrollZoom.gl3d){if(D.camera._ortho){var B=z.deltaX>z.deltaY?1.1:.9090909090909091,j=D.glplot.getAspectratio();D.glplot.setAspectratio({x:B*j.x,y:B*j.y,z:B*j.z})}X(D)}},t?{passive:!1}:!1),D.glplot.canvas.addEventListener("mousemove",function(){if(D.fullSceneLayout.dragmode!==!1&&D.camera.mouseListener.buttons!==0){var z=U();D.graphDiv.emit("plotly_relayouting",z)}}),D.staticMode||D.glplot.canvas.addEventListener("webglcontextlost",function(z){N&&N.emit&&N.emit("plotly_webglcontextlost",{event:z,layer:D.id})},!1)),D.glplot.oncontextloss=function(){D.recoverContext()},D.glplot.onrender=function(){D.render()},!0},y.render=function(){var D=this,F=D.graphDiv,N,G=D.svgContainer,U=D.container.getBoundingClientRect();F._fullLayout._calcInverseTransform(F);var X=F._fullLayout._invScaleX,z=F._fullLayout._invScaleY,B=U.width*X,j=U.height*z;G.setAttributeNS(null,"viewBox","0 0 "+B+" "+j),G.setAttributeNS(null,"width",B),G.setAttributeNS(null,"height",j),b(D),D.glplot.axes.update(D.axesOptions);for(var V=Object.keys(D.traces),K=null,te=D.glplot.selection,$=0;$<V.length;++$)N=D.traces[V[$]],N.data.hoverinfo!=="skip"&&N.handlePick(te)&&(K=N),N.setContourLevels&&N.setContourLevels();function ie(me,be){var Me=D.fullSceneLayout[me];return l.tickText(Me,Me.d2l(be),"hover").text}var se;if(K!==null){var Q=p(D.glplot.cameraParams,te.dataCoordinate);N=K.data;var H=F._fullData[N.index],oe=te.index,re={xLabel:ie("xaxis",te.traceCoordinate[0]),yLabel:ie("yaxis",te.traceCoordinate[1]),zLabel:ie("zaxis",te.traceCoordinate[2])},ee=h.castHoverinfo(H,D.fullLayout,oe),ae=(ee||"").split("+"),fe=ee&&ee==="all";!H.hovertemplate&&!fe&&(ae.indexOf("x")===-1&&(re.xLabel=void 0),ae.indexOf("y")===-1&&(re.yLabel=void 0),ae.indexOf("z")===-1&&(re.zLabel=void 0),ae.indexOf("text")===-1&&(te.textLabel=void 0),ae.indexOf("name")===-1&&(K.name=void 0));var de,pe=[];N.type==="cone"||N.type==="streamtube"?(re.uLabel=ie("xaxis",te.traceCoordinate[3]),(fe||ae.indexOf("u")!==-1)&&pe.push("u: "+re.uLabel),re.vLabel=ie("yaxis",te.traceCoordinate[4]),(fe||ae.indexOf("v")!==-1)&&pe.push("v: "+re.vLabel),re.wLabel=ie("zaxis",te.traceCoordinate[5]),(fe||ae.indexOf("w")!==-1)&&pe.push("w: "+re.wLabel),re.normLabel=te.traceCoordinate[6].toPrecision(3),(fe||ae.indexOf("norm")!==-1)&&pe.push("norm: "+re.normLabel),N.type==="streamtube"&&(re.divergenceLabel=te.traceCoordinate[7].toPrecision(3),(fe||ae.indexOf("divergence")!==-1)&&pe.push("divergence: "+re.divergenceLabel)),te.textLabel&&pe.push(te.textLabel),de=pe.join("<br>")):N.type==="isosurface"||N.type==="volume"?(re.valueLabel=l.tickText(D._mockAxis,D._mockAxis.d2l(te.traceCoordinate[3]),"hover").text,pe.push("value: "+re.valueLabel),te.textLabel&&pe.push(te.textLabel),de=pe.join("<br>")):de=te.textLabel;var W={x:te.traceCoordinate[0],y:te.traceCoordinate[1],z:te.traceCoordinate[2],data:H._input,fullData:H,curveNumber:H.index,pointNumber:oe};h.appendArrayPointValue(W,H,oe),N._module.eventData&&(W=H._module.eventData(W,te,H,{},oe));var ue={points:[W]};D.fullSceneLayout.hovermode&&h.loneHover({trace:H,x:(.5+.5*Q[0]/Q[3])*B,y:(.5-.5*Q[1]/Q[3])*j,xLabel:re.xLabel,yLabel:re.yLabel,zLabel:re.zLabel,text:de,name:K.name,color:h.castHoverOption(H,oe,"bgcolor")||K.color,borderColor:h.castHoverOption(H,oe,"bordercolor"),fontFamily:h.castHoverOption(H,oe,"font.family"),fontSize:h.castHoverOption(H,oe,"font.size"),fontColor:h.castHoverOption(H,oe,"font.color"),nameLength:h.castHoverOption(H,oe,"namelength"),textAlign:h.castHoverOption(H,oe,"align"),hovertemplate:n.castOption(H,oe,"hovertemplate"),hovertemplateLabels:n.extendFlat({},W,re),eventData:[W]},{container:G,gd:F}),te.buttons&&te.distance<5?F.emit("plotly_click",ue):F.emit("plotly_hover",ue),se=ue}else h.loneUnhover(G),F.emit("plotly_unhover",se);D.drawAnnotations(D)},y.recoverContext=function(){var D=this;D.glplot.dispose();var F=function(){if(D.glplot.gl.isContextLost()){requestAnimationFrame(F);return}if(!D.initializeGLPlot()){n.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}D.plot.apply(D,D.plotArgs)};requestAnimationFrame(F)};var M=["xaxis","yaxis","zaxis"];function P(D,F,N){for(var G=D.fullSceneLayout,U=0;U<3;U++){var X=M[U],z=X.charAt(0),B=G[X],j=F[z],V=F[z+"calendar"],K=F["_"+z+"length"];if(!n.isArrayOrTypedArray(j))N[0][U]=Math.min(N[0][U],0),N[1][U]=Math.max(N[1][U],K-1);else for(var te,$=0;$<(K||j.length);$++)if(n.isArrayOrTypedArray(j[$]))for(var ie=0;ie<j[$].length;++ie)te=B.d2l(j[$][ie],0,V),!isNaN(te)&&isFinite(te)&&(N[0][U]=Math.min(N[0][U],te),N[1][U]=Math.max(N[1][U],te));else te=B.d2l(j[$],0,V),!isNaN(te)&&isFinite(te)&&(N[0][U]=Math.min(N[0][U],te),N[1][U]=Math.max(N[1][U],te))}}function L(D,F){for(var N=D.fullSceneLayout,G=N.annotations||[],U=0;U<3;U++)for(var X=M[U],z=X.charAt(0),B=N[X],j=0;j<G.length;j++){var V=G[j];if(V.visible){var K=B.r2l(V[z]);!isNaN(K)&&isFinite(K)&&(F[0][U]=Math.min(F[0][U],K),F[1][U]=Math.max(F[1][U],K))}}}y.plot=function(D,F,N){var G=this;if(G.plotArgs=[D,F,N],G.glplot.contextLost)return;var U,X,z,B,j,V,K=F[G.id],te=N[G.id];G.fullLayout=F,G.fullSceneLayout=K,G.axesOptions.merge(F,K),G.spikeOptions.merge(K),G.setViewport(K),G.updateFx(K.dragmode,K.hovermode),G.camera.enableWheel=G.graphDiv._context._scrollZoom.gl3d,G.glplot.setClearColor(i(K.bgcolor)),G.setConvert(j),D?Array.isArray(D)||(D=[D]):D=[];var $=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(z=0;z<D.length;++z)U=D[z],!(U.visible!==!0||U._length===0)&&P(this,U,$);L(this,$);var ie=[1,1,1];for(B=0;B<3;++B)$[1][B]===$[0][B]?ie[B]=1:ie[B]=1/($[1][B]-$[0][B]);for(G.dataScale=ie,G.convertAnnotations(this),z=0;z<D.length;++z)U=D[z],!(U.visible!==!0||U._length===0)&&(X=G.traces[U.uid],X?X.data.type===U.type?X.update(U):(X.dispose(),X=U._module.plot(this,U),G.traces[U.uid]=X):(X=U._module.plot(this,U),G.traces[U.uid]=X),X.name=U.name);var se=Object.keys(G.traces);e:for(z=0;z<se.length;++z){for(B=0;B<D.length;++B)if(D[B].uid===se[z]&&D[B].visible===!0&&D[B]._length!==0)continue e;X=G.traces[se[z]],X.dispose(),delete G.traces[se[z]]}G.glplot.objects.sort(function(Be,qe){return Be._trace.data.index-qe._trace.data.index});var Q=[[0,0,0],[0,0,0]],H={};for(z=0;z<3;++z){if(j=K[M[z]],V=j.type,V in H?(H[V].acc*=ie[z],H[V].count+=1):H[V]={acc:ie[z],count:1},j.autorange){Q[0][z]=1/0,Q[1][z]=-1/0;var oe=G.glplot.objects,re=G.fullSceneLayout.annotations||[],ee=j._name.charAt(0);for(B=0;B<oe.length;B++){var ae=oe[B],fe=ae.bounds,de=ae._trace.data._pad||0;ae.constructor.name==="ErrorBars"&&j._lowerLogErrorBound?Q[0][z]=Math.min(Q[0][z],j._lowerLogErrorBound):Q[0][z]=Math.min(Q[0][z],fe[0][z]/ie[z]-de),Q[1][z]=Math.max(Q[1][z],fe[1][z]/ie[z]+de)}for(B=0;B<re.length;B++){var pe=re[B];if(pe.visible){var W=j.r2l(pe[ee]);Q[0][z]=Math.min(Q[0][z],W),Q[1][z]=Math.max(Q[1][z],W)}}if("rangemode"in j&&j.rangemode==="tozero"&&(Q[0][z]=Math.min(Q[0][z],0),Q[1][z]=Math.max(Q[1][z],0)),Q[0][z]>Q[1][z])Q[0][z]=-1,Q[1][z]=1;else{var ue=Q[1][z]-Q[0][z];Q[0][z]-=ue/32,Q[1][z]+=ue/32}if(j.autorange==="reversed"){var me=Q[0][z];Q[0][z]=Q[1][z],Q[1][z]=me}}else{var be=j.range;Q[0][z]=j.r2l(be[0]),Q[1][z]=j.r2l(be[1])}Q[0][z]===Q[1][z]&&(Q[0][z]-=1,Q[1][z]+=1),G.glplot.setBounds(z,{min:Q[0][z]*ie[z],max:Q[1][z]*ie[z]})}var Me,Pe=K.aspectmode;if(Pe==="cube")Me=[1,1,1];else if(Pe==="manual"){var Ge=K.aspectratio;Me=[Ge.x,Ge.y,Ge.z]}else if(Pe==="auto"||Pe==="data"){var ze=[1,1,1];for(z=0;z<3;++z){j=K[M[z]],V=j.type;var Qe=H[V];ze[z]=Math.pow(Qe.acc,1/Qe.count)/ie[z]}Pe==="data"||Math.max.apply(null,ze)/Math.min.apply(null,ze)<=4?Me=ze:Me=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");K.aspectratio.x=te.aspectratio.x=Me[0],K.aspectratio.y=te.aspectratio.y=Me[1],K.aspectratio.z=te.aspectratio.z=Me[2],G.glplot.setAspectratio(K.aspectratio),G.viewInitial.aspectratio||(G.viewInitial.aspectratio={x:K.aspectratio.x,y:K.aspectratio.y,z:K.aspectratio.z}),G.viewInitial.aspectmode||(G.viewInitial.aspectmode=K.aspectmode);var tt=K.domain||null,Ce=F._size||null;if(tt&&Ce){var Ae=G.container.style;Ae.position="absolute",Ae.left=Ce.l+tt.x[0]*Ce.w+"px",Ae.top=Ce.t+(1-tt.y[1])*Ce.h+"px",Ae.width=Ce.w*(tt.x[1]-tt.x[0])+"px",Ae.height=Ce.h*(tt.y[1]-tt.y[0])+"px"}G.glplot.redraw()},y.destroy=function(){var D=this;!D.glplot||(D.camera.mouseListener.enabled=!1,D.container.removeEventListener("wheel",D.camera.wheelListener),D.camera=null,D.glplot.dispose(),D.container.parentNode.removeChild(D.container),D.glplot=null)};function I(D){return[[D.eye.x,D.eye.y,D.eye.z],[D.center.x,D.center.y,D.center.z],[D.up.x,D.up.y,D.up.z]]}function E(D){return{up:{x:D.up[0],y:D.up[1],z:D.up[2]},center:{x:D.center[0],y:D.center[1],z:D.center[2]},eye:{x:D.eye[0],y:D.eye[1],z:D.eye[2]},projection:{type:D._ortho===!0?"orthographic":"perspective"}}}y.getCamera=function(){var D=this;return D.camera.view.recalcMatrix(D.camera.view.lastT()),E(D.camera)},y.setViewport=function(D){var F=this,N=D.camera;F.camera.lookAt.apply(this,I(N)),F.glplot.setAspectratio(D.aspectratio);var G=N.projection.type==="orthographic",U=F.camera._ortho;G!==U&&(F.glplot.redraw(),F.glplot.clearRGBA(),F.glplot.dispose(),F.initializeGLPlot())},y.isCameraChanged=function(D){var F=this,N=F.getCamera(),G=n.nestedProperty(D,F.id+".camera"),U=G.get();function X(V,K,te,$){var ie=["up","center","eye"],se=["x","y","z"];return K[ie[te]]&&V[ie[te]][se[$]]===K[ie[te]][se[$]]}var z=!1;if(U===void 0)z=!0;else{for(var B=0;B<3;B++)for(var j=0;j<3;j++)if(!X(N,U,B,j)){z=!0;break}(!U.projection||N.projection&&N.projection.type!==U.projection.type)&&(z=!0)}return z},y.isAspectChanged=function(D){var F=this,N=F.glplot.getAspectratio(),G=n.nestedProperty(D,F.id+".aspectratio"),U=G.get();return U===void 0||U.x!==N.x||U.y!==N.y||U.z!==N.z},y.saveLayout=function(D){var F=this,N=F.fullLayout,G,U,X,z,B,j,V=F.isCameraChanged(D),K=F.isAspectChanged(D),te=V||K;if(te){var $={};if(V&&(G=F.getCamera(),U=n.nestedProperty(D,F.id+".camera"),X=U.get(),$[F.id+".camera"]=X),K&&(z=F.glplot.getAspectratio(),B=n.nestedProperty(D,F.id+".aspectratio"),j=B.get(),$[F.id+".aspectratio"]=j),f.call("_storeDirectGUIEdit",D,N._preGUI,$),V){U.set(G);var ie=n.nestedProperty(N,F.id+".camera");ie.set(G)}if(K){B.set(z);var se=n.nestedProperty(N,F.id+".aspectratio");se.set(z),F.glplot.redraw()}}return te},y.updateFx=function(D,F){var N=this,G=N.camera;if(G)if(D==="orbit")G.mode="orbit",G.keyBindingMode="rotate";else if(D==="turntable"){G.up=[0,0,1],G.mode="turntable",G.keyBindingMode="rotate";var U=N.graphDiv,X=U._fullLayout,z=N.fullSceneLayout.camera,B=z.up.x,j=z.up.y,V=z.up.z;if(V/Math.sqrt(B*B+j*j+V*V)<.999){var K=N.id+".camera.up",te={x:0,y:0,z:1},$={};$[K]=te;var ie=U.layout;f.call("_storeDirectGUIEdit",ie,X._preGUI,$),z.up=te,n.nestedProperty(ie,K).set(te)}}else G.keyBindingMode=D;N.fullSceneLayout.hovermode=F};function k(D,F,N){for(var G=0,U=N-1;G<U;++G,--U)for(var X=0;X<F;++X)for(var z=0;z<4;++z){var B=4*(F*G+X)+z,j=4*(F*U+X)+z,V=D[B];D[B]=D[j],D[j]=V}}function C(D,F,N){for(var G=0;G<N;++G)for(var U=0;U<F;++U){var X=4*(F*G+U),z=D[X+3];if(z>0)for(var B=255/z,j=0;j<3;++j)D[X+j]=Math.min(B*D[X+j],255)}}y.toImage=function(D){var F=this;D||(D="png"),F.staticMode&&F.container.appendChild(m),F.glplot.redraw();var N=F.glplot.gl,G=N.drawingBufferWidth,U=N.drawingBufferHeight;N.bindFramebuffer(N.FRAMEBUFFER,null);var X=new Uint8Array(G*U*4);N.readPixels(0,0,G,U,N.RGBA,N.UNSIGNED_BYTE,X),k(X,G,U),C(X,G,U);var z=document.createElement("canvas");z.width=G,z.height=U;var B=z.getContext("2d"),j=B.createImageData(G,U);j.data.set(X),B.putImageData(j,0,0);var V;switch(D){case"jpeg":V=z.toDataURL("image/jpeg");break;case"webp":V=z.toDataURL("image/webp");break;default:V=z.toDataURL("image/png")}return F.staticMode&&F.container.removeChild(m),V},y.setConvert=function(){for(var D=this,F=0;F<3;F++){var N=D.fullSceneLayout[M[F]];l.setConvert(N,D.fullLayout),N.setScale=n.noop}},y.make4thDimension=function(){var D=this,F=D.graphDiv,N=F._fullLayout;D._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(D._mockAxis,N)},v.exports=w},{"../../components/fx":683,"../../lib":778,"../../lib/show_no_webgl_msg":800,"../../lib/str2rgbarray":802,"../../plots/cartesian/axes":828,"../../registry":911,"./layout/convert":874,"./layout/spikes":877,"./layout/tick_marks":878,"./project":879,"gl-plot3d":321,"has-passive-events":441,"webgl-context":606}],881:[function(e,v,S){v.exports=function(a,u,c,t){t=t||a.length;for(var f=new Array(t),n=0;n<t;n++)f[n]=[a[n],u[n],c[n]];return f}},{}],882:[function(e,v,S){var r=e("./font_attributes"),a=e("./animation_attributes"),u=e("../components/color/attributes"),c=e("../components/shapes/draw_newshape/attributes"),t=e("./pad_attributes"),f=e("../lib/extend").extendFlat,n=r({editType:"calc"});n.family.dflt='"Open Sans", verdana, arial, sans-serif',n.size.dflt=12,n.color.dflt=u.defaultLine,v.exports={font:n,title:{text:{valType:"string",editType:"layoutstyle"},font:r({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:f(t({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:u.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:u.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:u.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},newshape:c.newshape,activeshape:c.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:f({},a.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:r({editType:"layoutstyle"})}}},{"../components/color/attributes":642,"../components/shapes/draw_newshape/attributes":725,"../lib/extend":768,"./animation_attributes":822,"./font_attributes":856,"./pad_attributes":890}],883:[function(e,v,S){var r="1.10.1",a={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:'<a href="http://www.openstreetmap.org/about/" target="_blank">\xA9 OpenStreetMap</a>',tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:'<a href="https://carto.com/" target="_blank">\xA9 CARTO</a>',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:'<a href="https://carto.com/" target="_blank">\xA9 CARTO</a>',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.',tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},u=Object.keys(a);v.exports={requiredVersion:r,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:a,styleValuesNonMapbox:u,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+r+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",u.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{}],884:[function(e,v,S){var r=e("../../lib");v.exports=function(u,c){var t=u.split(" "),f=t[0],n=t[1],o=r.isArrayOrTypedArray(c)?r.mean(c):c,l=.5+o/100,h=1.5+o/100,i=["",""],s=[0,0];switch(f){case"top":i[0]="top",s[1]=-h;break;case"bottom":i[0]="bottom",s[1]=h;break}switch(n){case"left":i[1]="right",s[0]=-l;break;case"right":i[1]="left",s[0]=l;break}var p;return i[0]&&i[1]?p=i.join("-"):i[0]?p=i[0]:i[1]?p=i[1]:p="center",{anchor:p,offset:s}}},{"../../lib":778}],885:[function(e,v,S){var r=e("mapbox-gl"),a=e("../../lib"),u=a.strTranslate,c=a.strScale,t=e("../../plots/get_data").getSubplotCalcData,f=e("../../constants/xmlns_namespaces"),n=e("d3"),o=e("../../components/drawing"),l=e("../../lib/svg_text_utils"),h=e("./mapbox"),i="mapbox",s=S.constants=e("./constants");S.name=i,S.attr="subplot",S.idRoot=i,S.idRegex=S.attrRegex=a.counterRegex(i),S.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},S.layoutAttributes=e("./layout_attributes"),S.supplyLayoutDefaults=e("./layout_defaults"),S.plot=function(b){var m=b._fullLayout,x=b.calcdata,w=m._subplots[i];if(r.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var y=p(b,w);r.accessToken=y;for(var T=0;T<w.length;T++){var M=w[T],P=t(x,i,M),L=m[M],I=L._subplot;I||(I=new h(b,M),m[M]._subplot=I),I.viewInitial||(I.viewInitial={center:a.extendFlat({},L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch}),I.plot(P,m,b._promises)}},S.clean=function(g,b,m,x){for(var w=x._subplots[i]||[],y=0;y<w.length;y++){var T=w[y];!b[T]&&!!x[T]._subplot&&x[T]._subplot.destroy()}},S.toSVG=function(g){for(var b=g._fullLayout,m=b._subplots[i],x=b._size,w=0;w<m.length;w++){var y=b[m[w]],T=y.domain,M=y._subplot,P=M.toImage("png"),L=b._glimages.append("svg:image");L.attr({xmlns:f.svg,"xlink:href":P,x:x.l+x.w*T.x[0],y:x.t+x.h*(1-T.y[1]),width:x.w*(T.x[1]-T.x[0]),height:x.h*(T.y[1]-T.y[0]),preserveAspectRatio:"none"});var I=n.select(y._subplot.div),E=I.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!E){var k=b._glimages.append("g");k.attr("transform",u(x.l+x.w*T.x[0]+10,x.t+x.h*(1-T.y[0])-31)),k.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),k.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),k.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),k.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var C=I.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),D=b._glimages.append("g"),F=D.append("text");F.text(C).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":C});var N=o.bBox(F.node()),G=x.w*(T.x[1]-T.x[0]);if(N.width>G/2){var U=C.split("|").join("<br>");F.text(U).attr("data-unformatted",U).call(l.convertToTspans,g),N=o.bBox(F.node())}F.attr("transform",u(-3,-N.height+8)),D.insert("rect",".static-attribution").attr({x:-N.width-6,y:-N.height-3,width:N.width+6,height:N.height+3,fill:"rgba(255, 255, 255, 0.75)"});var X=1;N.width+6>G&&(X=G/(N.width+6));var z=[x.l+x.w*T.x[1],x.t+x.h*(1-T.y[0])];D.attr("transform",u(z[0],z[1])+c(X))}};function p(g,b){var m=g._fullLayout,x=g._context;if(x.mapboxAccessToken==="")return"";for(var w=[],y=[],T=!1,M=!1,P=0;P<b.length;P++){var L=m[b[P]],I=L.accesstoken;d(L.style)&&(I?a.pushUnique(w,I):(d(L._input.style)&&(a.error("Uses Mapbox map style, but did not set an access token."),T=!0),M=!0)),I&&a.pushUnique(y,I)}if(M){var E=T?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw a.error(E),new Error(E)}return w.length?(w.length>1&&a.warn(s.multipleTokensErrorMsg),w[0]):(y.length&&a.log(["Listed mapbox access token(s)",y.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function d(g){return typeof g=="string"&&(s.styleValuesMapbox.indexOf(g)!==-1||g.indexOf("mapbox://")===0)}S.updateFx=function(g){for(var b=g._fullLayout,m=b._subplots[i],x=0;x<m.length;x++){var w=b[m[x]]._subplot;w.updateFx(b)}}},{"../../components/drawing":665,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/get_data":865,"./constants":883,"./layout_attributes":887,"./layout_defaults":888,"./mapbox":889,d3:169,"mapbox-gl":473}],886:[function(e,v,S){var r=e("../../lib"),a=e("../../lib/svg_text_utils").sanitizeHTML,u=e("./convert_text_opts"),c=e("./constants");function t(h,i){this.subplot=h,this.uid=h.uid+"-"+i,this.index=i,this.idSource="source-"+this.uid,this.idLayer=c.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var f=t.prototype;f.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=n(i)},f.needsNewImage=function(h){var i=this.subplot.map;return i.getSource(this.idSource)&&this.sourceType==="image"&&h.sourcetype==="image"&&(this.source!==h.source||JSON.stringify(this.coordinates)!==JSON.stringify(h.coordinates))},f.needsNewSource=function(h){return this.sourceType!==h.sourcetype||JSON.stringify(this.source)!==JSON.stringify(h.source)||this.layerType!==h.type},f.needsNewLayer=function(h){return this.layerType!==h.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},f.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},f.updateImage=function(h){var i=this.subplot.map;i.getSource(this.idSource).updateImage({url:h.source,coordinates:h.coordinates});var s=this.findFollowingMapboxLayerId(this.lookupBelow());s!==null&&this.subplot.map.moveLayer(this.idLayer,s)},f.updateSource=function(h){var i=this.subplot.map;if(i.getSource(this.idSource)&&i.removeSource(this.idSource),this.sourceType=h.sourcetype,this.source=h.source,!!n(h)){var s=l(h);i.addSource(this.idSource,s)}},f.findFollowingMapboxLayerId=function(h){if(h==="traces")for(var i=this.subplot.getMapLayers(),s=0;s<i.length;s++){var p=i[s].id;if(typeof p=="string"&&p.indexOf(c.traceLayerPrefix)===0){h=p;break}}return h},f.updateLayer=function(h){var i=this.subplot,s=o(h),p=this.lookupBelow(),d=this.findFollowingMapboxLayerId(p);this.removeLayer(),n(h)&&i.addLayer({id:this.idLayer,source:this.idSource,"source-layer":h.sourcelayer||"",type:h.type,minzoom:h.minzoom,maxzoom:h.maxzoom,layout:s.layout,paint:s.paint},d),this.layerType=h.type,this.below=p},f.updateStyle=function(h){if(n(h)){var i=o(h);this.subplot.setOptions(this.idLayer,"setLayoutProperty",i.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",i.paint)}},f.removeLayer=function(){var h=this.subplot.map;h.getLayer(this.idLayer)&&h.removeLayer(this.idLayer)},f.dispose=function(){var h=this.subplot.map;h.getLayer(this.idLayer)&&h.removeLayer(this.idLayer),h.getSource(this.idSource)&&h.removeSource(this.idSource)};function n(h){if(!h.visible)return!1;var i=h.source;if(Array.isArray(i)&&i.length>0){for(var s=0;s<i.length;s++)if(typeof i[s]!="string"||i[s].length===0)return!1;return!0}return r.isPlainObject(i)||typeof i=="string"&&i.length>0}function o(h){var i={},s={};switch(h.type){case"circle":r.extendFlat(s,{"circle-radius":h.circle.radius,"circle-color":h.color,"circle-opacity":h.opacity});break;case"line":r.extendFlat(s,{"line-width":h.line.width,"line-color":h.color,"line-opacity":h.opacity,"line-dasharray":h.line.dash});break;case"fill":r.extendFlat(s,{"fill-color":h.color,"fill-outline-color":h.fill.outlinecolor,"fill-opacity":h.opacity});break;case"symbol":var p=h.symbol,d=u(p.textposition,p.iconsize);r.extendFlat(i,{"icon-image":p.icon+"-15","icon-size":p.iconsize/10,"text-field":p.text,"text-size":p.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":p.placement}),r.extendFlat(s,{"icon-color":h.color,"text-color":p.textfont.color,"text-opacity":h.opacity});break;case"raster":r.extendFlat(s,{"raster-fade-duration":0,"raster-opacity":h.opacity});break}return{layout:i,paint:s}}function l(h){var i=h.sourcetype,s=h.source,p={type:i},d;return i==="geojson"?d="data":i==="vector"?d=typeof s=="string"?"url":"tiles":i==="raster"?(d="tiles",p.tileSize=256):i==="image"&&(d="url",p.coordinates=h.coordinates),p[d]=s,h.sourceattribution&&(p.attribution=a(h.sourceattribution)),p}v.exports=function(i,s,p){var d=new t(i,s);return d.update(p),d}},{"../../lib":778,"../../lib/svg_text_utils":803,"./constants":883,"./convert_text_opts":884}],887:[function(e,v,S){var r=e("../../lib"),a=e("../../components/color").defaultLine,u=e("../domain").attributes,c=e("../font_attributes"),t=e("../../traces/scatter/attributes").textposition,f=e("../../plot_api/edit_types").overrideAll,n=e("../../plot_api/plot_template").templatedArray,o=e("./constants"),l=c({});l.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var h=v.exports=f({_arrayAttrRegexps:[r.counterRegex("mapbox",".layers",!0)],domain:u({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:o.styleValuesMapbox.concat(o.styleValuesNonMapbox),dflt:o.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:n("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:a},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:a}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:l,textposition:r.extendFlat({},t,{arrayOk:!1})}})},"plot","from-root");h.uirevision={valType:"any",editType:"none"}},{"../../components/color":643,"../../lib":778,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../traces/scatter/attributes":1187,"../domain":855,"../font_attributes":856,"./constants":883}],888:[function(e,v,S){var r=e("../../lib"),a=e("../subplot_defaults"),u=e("../array_container_defaults"),c=e("./layout_attributes");v.exports=function(o,l,h){a(o,l,h,{type:"mapbox",attributes:c,handleDefaults:t,partition:"y",accessToken:l._mapboxAccessToken})};function t(n,o,l,h){l("accesstoken",h.accessToken),l("style"),l("center.lon"),l("center.lat"),l("zoom"),l("bearing"),l("pitch"),u(n,o,{name:"layers",handleItemDefaults:f}),o._input=n}function f(n,o){function l(g,b){return r.coerce(n,o,c.layers,g,b)}var h=l("visible");if(h){var i=l("sourcetype"),s=i==="raster"||i==="image";l("source"),l("sourceattribution"),i==="vector"&&l("sourcelayer"),i==="image"&&l("coordinates");var p;s&&(p="raster");var d=l("type",p);s&&d!=="raster"&&(d=o.type="raster",r.log("Source types *raster* and *image* must drawn *raster* layer type.")),l("below"),l("color"),l("opacity"),l("minzoom"),l("maxzoom"),d==="circle"&&l("circle.radius"),d==="line"&&(l("line.width"),l("line.dash")),d==="fill"&&l("fill.outlinecolor"),d==="symbol"&&(l("symbol.icon"),l("symbol.iconsize"),l("symbol.text"),r.coerceFont(l,"symbol.textfont"),l("symbol.textposition"),l("symbol.placement"))}}},{"../../lib":778,"../array_container_defaults":823,"../subplot_defaults":905,"./layout_attributes":887}],889:[function(e,v,S){var r=e("mapbox-gl"),a=e("../../lib"),u=e("../../lib/geo_location_utils"),c=e("../../registry"),t=e("../cartesian/axes"),f=e("../../components/dragelement"),n=e("../../components/fx"),o=e("../../components/dragelement/helpers"),l=o.rectMode,h=o.drawMode,i=o.selectMode,s=e("../cartesian/select").prepSelect,p=e("../cartesian/select").clearSelect,d=e("../cartesian/select").clearSelectionsCache,g=e("../cartesian/select").selectOnClick,b=e("./constants"),m=e("./layers");function x(L,I){this.id=I,this.gd=L;var E=L._fullLayout,k=L._context;this.container=E._glcontainer.node(),this.isStatic=k.staticPlot,this.uid=E._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(E),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var w=x.prototype;w.plot=function(L,I,E){var k=this,C=I[k.id];k.map&&C.accesstoken!==k.accessToken&&(k.map.remove(),k.map=null,k.styleObj=null,k.traceHash={},k.layerList=[]);var D;k.map?D=new Promise(function(F,N){k.updateMap(L,I,F,N)}):D=new Promise(function(F,N){k.createMap(L,I,F,N)}),E.push(D)},w.createMap=function(L,I,E,k){var C=this,D=I[C.id],F=C.styleObj=T(D.style);C.accessToken=D.accesstoken;var N=C.map=new r.Map({container:C.div,style:F.style,center:P(D.center),zoom:D.zoom,bearing:D.bearing,pitch:D.pitch,interactive:!C.isStatic,preserveDrawingBuffer:C.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new r.AttributionControl({compact:!0}));N._canvas.style.left="0px",N._canvas.style.top="0px",C.rejectOnError(k),C.isStatic||C.initFx(L,I);var G=[];G.push(new Promise(function(U){N.once("load",U)})),G=G.concat(u.fetchTraceGeoData(L)),Promise.all(G).then(function(){C.fillBelowLookup(L,I),C.updateData(L),C.updateLayout(I),C.resolveOnRender(E)}).catch(k)},w.updateMap=function(L,I,E,k){var C=this,D=C.map,F=I[this.id];C.rejectOnError(k);var N=[],G=T(F.style);JSON.stringify(C.styleObj)!==JSON.stringify(G)&&(C.styleObj=G,D.setStyle(G.style),C.traceHash={},N.push(new Promise(function(U){D.once("styledata",U)}))),N=N.concat(u.fetchTraceGeoData(L)),Promise.all(N).then(function(){C.fillBelowLookup(L,I),C.updateData(L),C.updateLayout(I),C.resolveOnRender(E)}).catch(k)},w.fillBelowLookup=function(L,I){var E=I[this.id],k=E.layers,C,D,F=this.belowLookup={},N=!1;for(C=0;C<L.length;C++){var G=L[C][0].trace,U=G._module;typeof G.below=="string"?D=G.below:U.getBelow&&(D=U.getBelow(G,this)),D===""&&(N=!0),F["trace-"+G.uid]=D||""}for(C=0;C<k.length;C++){var X=k[C];typeof X.below=="string"?D=X.below:N?D="traces":D="",F["layout-"+C]=D}var z={},B,j;for(B in F)D=F[B],z[D]?z[D].push(B):z[D]=[B];for(D in z){var V=z[D];if(V.length>1)for(C=0;C<V.length;C++)B=V[C],B.indexOf("trace-")===0?(j=B.split("trace-")[1],this.traceHash[j]&&(this.traceHash[j].below=null)):B.indexOf("layout-")===0&&(j=B.split("layout-")[1],this.layerList[j]&&(this.layerList[j].below=null))}};var y={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};w.updateData=function(L){var I=this.traceHash,E,k,C,D,F=L.slice().sort(function(z,B){return y[z[0].trace.type]-y[B[0].trace.type]});for(C=0;C<F.length;C++){var N=F[C];k=N[0].trace,E=I[k.uid];var G=!1;E&&(E.type===k.type?(E.update(N),G=!0):E.dispose()),!G&&k._module&&(I[k.uid]=k._module.plot(this,N))}var U=Object.keys(I);e:for(C=0;C<U.length;C++){var X=U[C];for(D=0;D<L.length;D++)if(k=L[D][0].trace,X===k.uid)continue e;E=I[X],E.dispose(),delete I[X]}},w.updateLayout=function(L){var I=this.map,E=L[this.id];!this.dragging&&!this.wheeling&&(I.setCenter(P(E.center)),I.setZoom(E.zoom),I.setBearing(E.bearing),I.setPitch(E.pitch)),this.updateLayers(L),this.updateFramework(L),this.updateFx(L),this.map.resize(),this.gd._context._scrollZoom.mapbox?I.scrollZoom.enable():I.scrollZoom.disable()},w.resolveOnRender=function(L){var I=this.map;I.on("render",function E(){I.loaded()&&(I.off("render",E),setTimeout(L,10))})},w.rejectOnError=function(L){var I=this.map;function E(){L(new Error(b.mapOnErrorMsg))}I.once("error",E),I.once("style.error",E),I.once("source.error",E),I.once("tile.error",E),I.once("layer.error",E)},w.createFramework=function(L){var I=this,E=I.div=document.createElement("div");E.id=I.uid,E.style.position="absolute",I.container.appendChild(E),I.xaxis={_id:"x",c2p:function(k){return I.project(k).x}},I.yaxis={_id:"y",c2p:function(k){return I.project(k).y}},I.updateFramework(L),I.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},t.setConvert(I.mockAxis,L)},w.initFx=function(L,I){var E=this,k=E.gd,C=E.map;C.on("moveend",function(N){if(!!E.map){var G=k._fullLayout;if(N.originalEvent||E.wheeling){var U=G[E.id];c.call("_storeDirectGUIEdit",k.layout,G._preGUI,E.getViewEdits(U));var X=E.getView();U._input.center=U.center=X.center,U._input.zoom=U.zoom=X.zoom,U._input.bearing=U.bearing=X.bearing,U._input.pitch=U.pitch=X.pitch,k.emit("plotly_relayout",E.getViewEditsWithDerived(X))}N.originalEvent&&N.originalEvent.type==="mouseup"?E.dragging=!1:E.wheeling&&(E.wheeling=!1),G._rehover&&G._rehover()}}),C.on("wheel",function(){E.wheeling=!0}),C.on("mousemove",function(N){var G=E.div.getBoundingClientRect(),U=[N.originalEvent.offsetX,N.originalEvent.offsetY];N.target.getBoundingClientRect=function(){return G},E.xaxis.p2c=function(){return C.unproject(U).lng},E.yaxis.p2c=function(){return C.unproject(U).lat},k._fullLayout._rehover=function(){k._fullLayout._hoversubplot===E.id&&k._fullLayout[E.id]&&n.hover(k,N,E.id)},n.hover(k,N,E.id),k._fullLayout._hoversubplot=E.id});function D(){n.loneUnhover(I._hoverlayer)}C.on("dragstart",function(){E.dragging=!0,D()}),C.on("zoomstart",D),C.on("mouseout",function(){k._fullLayout._hoversubplot=null});function F(){var N=E.getView();k.emit("plotly_relayouting",E.getViewEditsWithDerived(N))}C.on("drag",F),C.on("zoom",F),C.on("dblclick",function(){var N=k._fullLayout[E.id];c.call("_storeDirectGUIEdit",k.layout,k._fullLayout._preGUI,E.getViewEdits(N));var G=E.viewInitial;C.setCenter(P(G.center)),C.setZoom(G.zoom),C.setBearing(G.bearing),C.setPitch(G.pitch);var U=E.getView();N._input.center=N.center=U.center,N._input.zoom=N.zoom=U.zoom,N._input.bearing=N.bearing=U.bearing,N._input.pitch=N.pitch=U.pitch,k.emit("plotly_doubleclick",null),k.emit("plotly_relayout",E.getViewEditsWithDerived(U))}),E.clearSelect=function(){d(E.dragOptions),p(E.dragOptions.gd)},E.onClickInPanFn=function(N){return function(G){var U=k._fullLayout.clickmode;U.indexOf("select")>-1&&g(G.originalEvent,k,[E.xaxis],[E.yaxis],E.id,N),U.indexOf("event")>-1&&n.click(k,G.originalEvent)}}},w.updateFx=function(L){var I=this,E=I.map,k=I.gd;if(I.isStatic)return;function C(G){var U=I.map.unproject(G);return[U.lng,U.lat]}var D=L.dragmode,F;l(D)?F=function(G,U){var X=G.range={};X[I.id]=[C([U.xmin,U.ymin]),C([U.xmax,U.ymax])]}:F=function(G,U,X){var z=G.lassoPoints={};z[I.id]=X.filtered.map(C)};var N=I.dragOptions;I.dragOptions=a.extendDeep(N||{},{dragmode:L.dragmode,element:I.div,gd:k,plotinfo:{id:I.id,domain:L[I.id].domain,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:F},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id}),E.off("click",I.onClickInPanHandler),i(D)||h(D)?(E.dragPan.disable(),E.on("zoomstart",I.clearSelect),I.dragOptions.prepFn=function(G,U,X){s(G,U,X,I.dragOptions,D)},f.init(I.dragOptions)):(E.dragPan.enable(),E.off("zoomstart",I.clearSelect),I.div.onmousedown=null,I.onClickInPanHandler=I.onClickInPanFn(I.dragOptions),E.on("click",I.onClickInPanHandler))},w.updateFramework=function(L){var I=L[this.id].domain,E=L._size,k=this.div.style;k.width=E.w*(I.x[1]-I.x[0])+"px",k.height=E.h*(I.y[1]-I.y[0])+"px",k.left=E.l+I.x[0]*E.w+"px",k.top=E.t+(1-I.y[1])*E.h+"px",this.xaxis._offset=E.l+I.x[0]*E.w,this.xaxis._length=E.w*(I.x[1]-I.x[0]),this.yaxis._offset=E.t+(1-I.y[1])*E.h,this.yaxis._length=E.h*(I.y[1]-I.y[0])},w.updateLayers=function(L){var I=L[this.id],E=I.layers,k=this.layerList,C;if(E.length!==k.length){for(C=0;C<k.length;C++)k[C].dispose();for(k=this.layerList=[],C=0;C<E.length;C++)k.push(m(this,C,E[C]))}else for(C=0;C<E.length;C++)k[C].update(E[C])},w.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},w.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},w.setOptions=function(L,I,E){for(var k in E)this.map[I](L,k,E[k])},w.getMapLayers=function(){return this.map.getStyle().layers},w.addLayer=function(L,I){var E=this.map;if(typeof I=="string"){if(I===""){E.addLayer(L,I);return}for(var k=this.getMapLayers(),C=0;C<k.length;C++)if(I===k[C].id){E.addLayer(L,I);return}a.warn(["Trying to add layer with *below* value",I,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}E.addLayer(L)},w.project=function(L){return this.map.project(new r.LngLat(L[0],L[1]))},w.getView=function(){var L=this.map,I=L.getCenter(),E={lon:I.lng,lat:I.lat},k=L.getCanvas(),C=k.width,D=k.height;return{center:E,zoom:L.getZoom(),bearing:L.getBearing(),pitch:L.getPitch(),_derived:{coordinates:[L.unproject([0,0]).toArray(),L.unproject([C,0]).toArray(),L.unproject([C,D]).toArray(),L.unproject([0,D]).toArray()]}}},w.getViewEdits=function(L){for(var I=this.id,E=["center","zoom","bearing","pitch"],k={},C=0;C<E.length;C++){var D=E[C];k[I+"."+D]=L[D]}return k},w.getViewEditsWithDerived=function(L){var I=this.id,E=this.getViewEdits(L);return E[I+"._derived"]=L._derived,E};function T(L){var I={};return a.isPlainObject(L)?(I.id=L.id,I.style=L):typeof L=="string"?(I.id=L,b.styleValuesMapbox.indexOf(L)!==-1?I.style=M(L):b.stylesNonMapbox[L]?I.style=b.stylesNonMapbox[L]:I.style=L):(I.id=b.styleValueDflt,I.style=M(b.styleValueDflt)),I.transition={duration:0,delay:0},I}function M(L){return b.styleUrlPrefix+L+"-"+b.styleUrlSuffix}function P(L){return[L.lon,L.lat]}v.exports=x},{"../../components/dragelement":662,"../../components/dragelement/helpers":661,"../../components/fx":683,"../../lib":778,"../../lib/geo_location_utils":771,"../../registry":911,"../cartesian/axes":828,"../cartesian/select":847,"./constants":883,"./layers":886,"mapbox-gl":473}],890:[function(e,v,S){v.exports=function(r){var a=r.editType;return{t:{valType:"number",dflt:0,editType:a},r:{valType:"number",dflt:0,editType:a},b:{valType:"number",dflt:0,editType:a},l:{valType:"number",dflt:0,editType:a},editType:a}}},{}],891:[function(e,v,S){var r=e("d3"),a=e("d3-time-format").timeFormatLocale,u=e("fast-isnumeric"),c=e("../registry"),t=e("../plot_api/plot_schema"),f=e("../plot_api/plot_template"),n=e("../lib"),o=e("../components/color"),l=e("../constants/numerical").BADNUM,h=e("./cartesian/axis_ids"),i=e("./cartesian/handle_outline").clearSelect,s=e("./animation_attributes"),p=e("./frame_attributes"),d=e("../plots/get_data").getModuleCalcData,g=n.relinkPrivateKeys,b=n._,m=v.exports={};n.extendFlat(m,c),m.attributes=e("./attributes"),m.attributes.type.values=m.allTypes,m.fontAttrs=e("./font_attributes"),m.layoutAttributes=e("./layout_attributes"),m.fontWeight="normal";var x=m.transformsRegistry,w=e("./command");m.executeAPICommand=w.executeAPICommand,m.computeAPICommandBindings=w.computeAPICommandBindings,m.manageCommandObserver=w.manageCommandObserver,m.hasSimpleAPICommandBindings=w.hasSimpleAPICommandBindings,m.redrawText=function(Q){Q=n.getGraphDiv(Q);var H=Q._fullLayout||{},oe=H._has&&H._has("polar"),re=!oe&&Q.data&&Q.data[0]&&Q.data[0].r;if(!re)return new Promise(function(ee){setTimeout(function(){c.getComponentMethod("annotations","draw")(Q),c.getComponentMethod("legend","draw")(Q),c.getComponentMethod("colorbar","draw")(Q),ee(m.previousPromises(Q))},300)})},m.resize=function(Q){Q=n.getGraphDiv(Q);var H,oe=new Promise(function(re,ee){(!Q||n.isHidden(Q))&&ee(new Error("Resize must be passed a displayed plot div element.")),Q._redrawTimer&&clearTimeout(Q._redrawTimer),Q._resolveResize&&(H=Q._resolveResize),Q._resolveResize=re,Q._redrawTimer=setTimeout(function(){if(!Q.layout||Q.layout.width&&Q.layout.height||n.isHidden(Q)){re(Q);return}delete Q.layout.width,delete Q.layout.height;var ae=Q.changed;Q.autoplay=!0,c.call("relayout",Q,{autosize:!0}).then(function(){Q.changed=ae,Q._resolveResize===re&&(delete Q._resolveResize,re(Q))})},100)});return H&&H(oe),oe},m.previousPromises=function(Q){if((Q._promises||[]).length)return Promise.all(Q._promises).then(function(){Q._promises=[]})},m.addLinks=function(Q){if(!(!Q._context.showLink&&!Q._context.showSources)){var H=Q._fullLayout,oe=n.ensureSingle(H._paper,"text","js-plot-link-container",function(pe){pe.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:o.defaultLine,"pointer-events":"all"}).each(function(){var W=r.select(this);W.append("tspan").classed("js-link-to-tool",!0),W.append("tspan").classed("js-link-spacer",!0),W.append("tspan").classed("js-sourcelinks",!0)})}),re=oe.node(),ee={y:H._paper.attr("height")-9};document.body.contains(re)&&re.getComputedTextLength()>=H.width-20?(ee["text-anchor"]="start",ee.x=5):(ee["text-anchor"]="end",ee.x=H._paper.attr("width")-7),oe.attr(ee);var ae=oe.select(".js-link-to-tool"),fe=oe.select(".js-link-spacer"),de=oe.select(".js-sourcelinks");Q._context.showSources&&Q._context.showSources(Q),Q._context.showLink&&y(Q,ae),fe.text(ae.text()&&de.text()?" - ":"")}};function y(Q,H){H.text("");var oe=H.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Q._context.linkText+" "+String.fromCharCode(187));if(Q._context.sendData)oe.on("click",function(){m.sendDataToCloud(Q)});else{var re=window.location.pathname.split("/"),ee=window.location.search;oe.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+re[2].split(".")[0]+"/"+re[1]+ee})}}m.sendDataToCloud=function(Q){var H=(window.PLOTLYENV||{}).BASE_URL||Q._context.plotlyServerURL;if(!!H){Q.emit("plotly_beforeexport");var oe=r.select(Q).append("div").attr("id","hiddenform").style("display","none"),re=oe.append("form").attr({action:H+"/external",method:"post",target:"_blank"}),ee=re.append("input").attr({type:"text",name:"data"});return ee.node().value=m.graphJson(Q,!1,"keepdata"),re.node().submit(),oe.remove(),Q.emit("plotly_afterexport"),!1}};var T=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],M=["year","month","dayMonth","dayMonthYear"];m.supplyDefaults=function(Q,H){var oe=H&&H.skipUpdateCalc,re=Q._fullLayout||{};if(re._skipDefaults){delete re._skipDefaults;return}var ee=Q._fullLayout={},ae=Q.layout||{},fe=Q._fullData||[],de=Q._fullData=[],pe=Q.data||[],W=Q.calcdata||[],ue=Q._context||{},me;Q._transitionData||m.createTransitionData(Q),ee._dfltTitle={plot:b(Q,"Click to enter Plot title"),x:b(Q,"Click to enter X axis title"),y:b(Q,"Click to enter Y axis title"),colorbar:b(Q,"Click to enter Colorscale title"),annotation:b(Q,"new text")},ee._traceWord=b(Q,"trace");var be=I(Q,T);if(ee._mapboxAccessToken=ue.mapboxAccessToken,re._initialAutoSizeIsDone){var Me=re.width,Pe=re.height;m.supplyLayoutGlobalDefaults(ae,ee,be),ae.width||(ee.width=Me),ae.height||(ee.height=Pe),m.sanitizeMargins(ee)}else{m.supplyLayoutGlobalDefaults(ae,ee,be);var Ge=!ae.width||!ae.height,ze=ee.autosize,Qe=ue.autosizable,tt=Ge&&(ze||Qe);tt?m.plotAutoSize(Q,ae,ee):Ge&&m.sanitizeMargins(ee),!ze&&Ge&&(ae.width=ee.width,ae.height=ee.height)}ee._d3locale=E(be,ee.separators),ee._extraFormat=I(Q,M),ee._initialAutoSizeIsDone=!0,ee._dataLength=pe.length,ee._modules=[],ee._visibleModules=[],ee._basePlotModules=[];var Ce=ee._subplots=L(),Ae=ee._splomAxes={x:{},y:{}},Be=ee._splomSubplots={};ee._splomGridDflt={},ee._scatterStackOpts={},ee._firstScatter={},ee._alignmentOpts={},ee._colorAxes={},ee._requestRangeslider={},ee._traceUids=P(fe,pe),ee._globalTransforms=(Q._context||{}).globalTransforms,m.supplyDataDefaults(pe,de,ae,ee);var qe=Object.keys(Ae.x),Tt=Object.keys(Ae.y);if(qe.length>1&&Tt.length>1){for(c.getComponentMethod("grid","sizeDefaults")(ae,ee),me=0;me<qe.length;me++)n.pushUnique(Ce.xaxis,qe[me]);for(me=0;me<Tt.length;me++)n.pushUnique(Ce.yaxis,Tt[me]);for(var At in Be)n.pushUnique(Ce.cartesian,At)}if(ee._has=m._hasPlotType.bind(ee),fe.length===de.length)for(me=0;me<de.length;me++)g(de[me],fe[me]);m.supplyLayoutModuleDefaults(ae,ee,de,Q._transitionData);var Ne=ee._visibleModules,ct=[];for(me=0;me<Ne.length;me++){var Mt=Ne[me].crossTraceDefaults;Mt&&n.pushUnique(ct,Mt)}for(me=0;me<ct.length;me++)ct[me](de,ee);ee._hasOnlyLargeSploms=ee._basePlotModules.length===1&&ee._basePlotModules[0].name==="splom"&&qe.length>15&&Tt.length>15&&ee.shapes.length===0&&ee.images.length===0,ee._hasCartesian=ee._has("cartesian"),ee._hasGeo=ee._has("geo"),ee._hasGL3D=ee._has("gl3d"),ee._hasGL2D=ee._has("gl2d"),ee._hasTernary=ee._has("ternary"),ee._hasPie=ee._has("pie"),m.linkSubplots(de,ee,fe,re),m.cleanPlot(de,ee,fe,re);var Wt=!!(re._has&&re._has("gl2d")),qt=!!(ee._has&&ee._has("gl2d")),zt=!!(re._has&&re._has("cartesian")),$t=!!(ee._has&&ee._has("cartesian")),rr=zt||Wt,Lt=$t||qt;rr&&!Lt?re._bgLayer.remove():Lt&&!rr&&(ee._shouldCreateBgLayer=!0),re._zoomlayer&&!Q._dragging&&i({_fullLayout:re}),k(de,ee),g(ee,re),c.getComponentMethod("colorscale","crossTraceDefaults")(de,ee),ee._preGUI||(ee._preGUI={}),ee._tracePreGUI||(ee._tracePreGUI={});var Ct=ee._tracePreGUI,dt={},lt;for(lt in Ct)dt[lt]="old";for(me=0;me<de.length;me++)lt=de[me]._fullInput.uid,dt[lt]||(Ct[lt]={}),dt[lt]="new";for(lt in dt)dt[lt]==="old"&&delete Ct[lt];G(ee),c.getComponentMethod("rangeslider","makeData")(ee),!oe&&W.length===de.length&&m.supplyDefaultsUpdateCalc(W,de)},m.supplyDefaultsUpdateCalc=function(Q,H){for(var oe=0;oe<H.length;oe++){var re=H[oe],ee=(Q[oe]||[])[0];if(ee&&ee.trace){var ae=ee.trace;if(ae._hasCalcTransform){var fe=ae._arrayAttrs,de,pe,W;for(de=0;de<fe.length;de++)pe=fe[de],W=n.nestedProperty(ae,pe).get().slice(),n.nestedProperty(re,pe).set(W)}ee.trace=re}}};function P(Q,H){var oe=H.length,re=[],ee,ae;for(ee=0;ee<Q.length;ee++){var fe=Q[ee]._fullInput;fe!==ae&&re.push(fe),ae=fe}var de=re.length,pe=new Array(oe),W={};function ue(Me,Pe){pe[Pe]=Me,W[Me]=1}function me(Me,Pe){if(Me&&typeof Me=="string"&&!W[Me])return ue(Me,Pe),!0}for(ee=0;ee<oe;ee++){var be=H[ee].uid;typeof be=="number"&&(be=String(be)),!me(be,ee)&&(ee<de&&me(re[ee].uid,ee)||ue(n.randstr(W),ee))}return pe}function L(){var Q=c.collectableSubplotTypes,H={},oe,re;if(!Q){Q=[];var ee=c.subplotsRegistry;for(var ae in ee){var fe=ee[ae],de=fe.attr;if(de&&(Q.push(ae),Array.isArray(de)))for(re=0;re<de.length;re++)n.pushUnique(Q,de[re])}}for(oe=0;oe<Q.length;oe++)H[Q[oe]]=[];return H}function I(Q,H){var oe=Q._context.locale;oe||(oe="en-US");var re=!1,ee={};function ae(me){for(var be=!0,Me=0;Me<H.length;Me++){var Pe=H[Me];ee[Pe]||(me[Pe]?ee[Pe]=me[Pe]:be=!1)}be&&(re=!0)}for(var fe=0;fe<2;fe++){for(var de=Q._context.locales,pe=0;pe<2;pe++){var W=(de[oe]||{}).format;if(W&&(ae(W),re))break;de=c.localeRegistry}var ue=oe.split("-")[0];if(re||ue===oe)break;oe=ue}return re||ae(c.localeRegistry.en.format),ee}function E(Q,H){return Q.decimal=H.charAt(0),Q.thousands=H.charAt(1),{numberFormat:r.locale(Q).numberFormat,timeFormat:a(Q).utcFormat}}function k(Q,H){var oe,re=[];H.meta&&(oe=H._meta={meta:H.meta,layout:{meta:H.meta}});for(var ee=0;ee<Q.length;ee++){var ae=Q[ee];ae.meta?re[ae.index]=ae._meta={meta:ae.meta}:H.meta&&(ae._meta={meta:H.meta}),H.meta&&(ae._meta.layout={meta:H.meta})}re.length&&(oe||(oe=H._meta={}),oe.data=re)}m.createTransitionData=function(Q){Q._transitionData||(Q._transitionData={}),Q._transitionData._frames||(Q._transitionData._frames=[]),Q._transitionData._frameHash||(Q._transitionData._frameHash={}),Q._transitionData._counter||(Q._transitionData._counter=0),Q._transitionData._interruptCallbacks||(Q._transitionData._interruptCallbacks=[])},m._hasPlotType=function(Q){var H,oe=this._basePlotModules||[];for(H=0;H<oe.length;H++)if(oe[H].name===Q)return!0;var re=this._modules||[];for(H=0;H<re.length;H++){var ee=re[H].name;if(ee===Q)return!0;var ae=c.modules[ee];if(ae&&ae.categories[Q])return!0}return!1},m.cleanPlot=function(Q,H,oe,re){var ee,ae,fe=re._basePlotModules||[];for(ee=0;ee<fe.length;ee++){var de=fe[ee];de.clean&&de.clean(Q,H,oe,re)}var pe=re._has&&re._has("gl"),W=H._has&&H._has("gl");pe&&!W&&re._glcontainer!==void 0&&(re._glcontainer.selectAll(".gl-canvas").remove(),re._glcontainer.selectAll(".no-webgl").remove(),re._glcanvas=null);var ue=!!re._infolayer;e:for(ee=0;ee<oe.length;ee++){var me=oe[ee],be=me.uid;for(ae=0;ae<Q.length;ae++){var Me=Q[ae];if(be===Me.uid)continue e}ue&&re._infolayer.select(".cb"+be).remove()}},m.linkSubplots=function(Q,H,oe,re){var ee,ae,fe=re._plots||{},de=H._plots={},pe=H._subplots,W={_fullData:Q,_fullLayout:H},ue=pe.cartesian.concat(pe.gl2d||[]);for(ee=0;ee<ue.length;ee++){var me=ue[ee],be=fe[me],Me=h.getFromId(W,me,"x"),Pe=h.getFromId(W,me,"y"),Ge;for(be?Ge=de[me]=be:(Ge=de[me]={},Ge.id=me),Me._counterAxes.push(Pe._id),Pe._counterAxes.push(Me._id),Me._subplotsWith.push(me),Pe._subplotsWith.push(me),Ge.xaxis=Me,Ge.yaxis=Pe,Ge._hasClipOnAxisFalse=!1,ae=0;ae<Q.length;ae++){var ze=Q[ae];if(ze.xaxis===Ge.xaxis._id&&ze.yaxis===Ge.yaxis._id&&ze.cliponaxis===!1){Ge._hasClipOnAxisFalse=!0;break}}}var Qe=h.list(W,null,!0),tt;for(ee=0;ee<Qe.length;ee++){tt=Qe[ee];var Ce=null;tt.overlaying&&(Ce=h.getFromId(W,tt.overlaying),Ce&&Ce.overlaying&&(tt.overlaying=!1,Ce=null)),tt._mainAxis=Ce||tt,Ce&&(tt.domain=Ce.domain.slice()),tt._anchorAxis=tt.anchor==="free"?null:h.getFromId(W,tt.anchor)}for(ee=0;ee<Qe.length;ee++)if(tt=Qe[ee],tt._counterAxes.sort(h.idSort),tt._subplotsWith.sort(n.subplotSort),tt._mainSubplot=C(tt,H),tt._counterAxes.length&&(tt.spikemode&&tt.spikemode.indexOf("across")!==-1||tt.automargin&&tt.mirror&&tt.anchor!=="free"||c.getComponentMethod("rangeslider","isVisible")(tt))){var Ae=1,Be=0;for(ae=0;ae<tt._counterAxes.length;ae++){var qe=h.getFromId(W,tt._counterAxes[ae]);Ae=Math.min(Ae,qe.domain[0]),Be=Math.max(Be,qe.domain[1])}Ae<Be&&(tt._counterDomainMin=Ae,tt._counterDomainMax=Be)}};function C(Q,H){var oe={_fullLayout:H},re=Q._id.charAt(0)==="x",ee=Q._mainAxis._anchorAxis,ae="",fe="",de="";if(ee&&(de=ee._mainAxis._id,ae=re?Q._id+de:de+Q._id),!ae||!H._plots[ae]){ae="";for(var pe=Q._counterAxes,W=0;W<pe.length;W++){var ue=pe[W],me=re?Q._id+ue:ue+Q._id;fe||(fe=me);var be=h.getFromId(oe,ue);if(de&&be.overlaying===de){ae=me;break}}}return ae||fe}m.clearExpandedTraceDefaultColors=function(Q){var H,oe,re;function ee(fe,de,pe,W){oe[W]=de,oe.length=W+1,fe.valType==="color"&&fe.dflt===void 0&&H.push(oe.join("."))}for(oe=[],H=Q._module._colorAttrs,H||(Q._module._colorAttrs=H=[],t.crawl(Q._module.attributes,ee)),re=0;re<H.length;re++){var ae=n.nestedProperty(Q,"_input."+H[re]);ae.get()||n.nestedProperty(Q,H[re]).set(null)}},m.supplyDataDefaults=function(Q,H,oe,re){var ee=re._modules,ae=re._visibleModules,fe=re._basePlotModules,de=0,pe=0,W,ue,me;re._transformModules=[];function be(Tt){H.push(Tt);var At=Tt._module;!At||(n.pushUnique(ee,At),Tt.visible===!0&&n.pushUnique(ae,At),n.pushUnique(fe,Tt._module.basePlotModule),de++,Tt._input.visible!==!1&&pe++)}var Me={},Pe=[],Ge=(oe.template||{}).data||{},ze=f.traceTemplater(Ge);for(W=0;W<Q.length;W++){if(me=Q[W],ue=ze.newTrace(me),ue.uid=re._traceUids[W],m.supplyTraceDefaults(me,ue,pe,re,W),ue.index=W,ue._input=me,ue._expandedIndex=de,ue.transforms&&ue.transforms.length)for(var Qe=me.visible!==!1&&ue.visible===!1,tt=F(ue,H,oe,re),Ce=0;Ce<tt.length;Ce++){var Ae=tt[Ce],Be={_template:ue._template,type:ue.type,uid:ue.uid+Ce};Qe&&Ae.visible===!1&&delete Ae.visible,m.supplyTraceDefaults(Ae,Be,de,re,W),g(Be,Ae),Be.index=W,Be._input=me,Be._fullInput=ue,Be._expandedIndex=de,Be._expandedInput=Ae,be(Be)}else ue._fullInput=ue,ue._expandedInput=ue,be(ue);c.traceIs(ue,"carpetAxis")&&(Me[ue.carpet]=ue),c.traceIs(ue,"carpetDependent")&&Pe.push(W)}for(W=0;W<Pe.length;W++)if(ue=H[Pe[W]],!!ue.visible){var qe=Me[ue.carpet];if(ue._carpet=qe,!qe||!qe.visible){ue.visible=!1;continue}ue.xaxis=qe.xaxis,ue.yaxis=qe.yaxis}},m.supplyAnimationDefaults=function(Q){Q=Q||{};var H,oe={};function re(ee,ae){return n.coerce(Q||{},oe,s,ee,ae)}if(re("mode"),re("direction"),re("fromcurrent"),Array.isArray(Q.frame))for(oe.frame=[],H=0;H<Q.frame.length;H++)oe.frame[H]=m.supplyAnimationFrameDefaults(Q.frame[H]||{});else oe.frame=m.supplyAnimationFrameDefaults(Q.frame||{});if(Array.isArray(Q.transition))for(oe.transition=[],H=0;H<Q.transition.length;H++)oe.transition[H]=m.supplyAnimationTransitionDefaults(Q.transition[H]||{});else oe.transition=m.supplyAnimationTransitionDefaults(Q.transition||{});return oe},m.supplyAnimationFrameDefaults=function(Q){var H={};function oe(re,ee){return n.coerce(Q||{},H,s.frame,re,ee)}return oe("duration"),oe("redraw"),H},m.supplyAnimationTransitionDefaults=function(Q){var H={};function oe(re,ee){return n.coerce(Q||{},H,s.transition,re,ee)}return oe("duration"),oe("easing"),H},m.supplyFrameDefaults=function(Q){var H={};function oe(re,ee){return n.coerce(Q,H,p,re,ee)}return oe("group"),oe("name"),oe("traces"),oe("baseframe"),oe("data"),oe("layout"),H},m.supplyTraceDefaults=function(Q,H,oe,re,ee){var ae=re.colorway||o.defaults,fe=ae[oe%ae.length],de;function pe(tt,Ce){return n.coerce(Q,H,m.attributes,tt,Ce)}var W=pe("visible");pe("type"),pe("name",re._traceWord+" "+ee),pe("uirevision",re.uirevision);var ue=m.getModule(H);if(H._module=ue,ue){var me=ue.basePlotModule,be=me.attr,Me=me.attributes;if(be&&Me){var Pe=re._subplots,Ge="";if(W||me.name!=="gl2d"){if(Array.isArray(be))for(de=0;de<be.length;de++){var ze=be[de],Qe=n.coerce(Q,H,Me,ze);Pe[ze]&&n.pushUnique(Pe[ze],Qe),Ge+=Qe}else Ge=n.coerce(Q,H,Me,be);Pe[me.name]&&n.pushUnique(Pe[me.name],Ge)}}}return W&&(pe("customdata"),pe("ids"),pe("meta"),c.traceIs(H,"showLegend")?(n.coerce(Q,H,ue.attributes.showlegend?ue.attributes:m.attributes,"showlegend"),pe("legendgroup"),H._dfltShowLegend=!0):H._dfltShowLegend=!1,ue&&ue.supplyDefaults(Q,H,fe,re),c.traceIs(H,"noOpacity")||pe("opacity"),c.traceIs(H,"notLegendIsolatable")&&(H.visible=!!H.visible),c.traceIs(H,"noHover")||(H.hovertemplate||n.coerceHoverinfo(Q,H,re),H.type!=="parcats"&&c.getComponentMethod("fx","supplyDefaults")(Q,H,fe,re)),ue&&ue.selectPoints&&pe("selectedpoints"),m.supplyTransformDefaults(Q,H,re)),H};function D(Q){var H=Q.transforms;if(Array.isArray(H)&&H.length)for(var oe=0;oe<H.length;oe++){var re=H[oe],ee=re._module||x[re.type];if(ee&&ee.makesData)return!0}return!1}m.hasMakesDataTransform=D,m.supplyTransformDefaults=function(Q,H,oe){if(!!(H._length||D(Q))){var re=oe._globalTransforms||[],ee=oe._transformModules||[];if(!(!Array.isArray(Q.transforms)&&re.length===0))for(var ae=Q.transforms||[],fe=re.concat(ae),de=H.transforms=[],pe=0;pe<fe.length;pe++){var W=fe[pe],ue=W.type,me=x[ue],be,Me=!(W._module&&W._module===me),Pe=me&&typeof me.transform=="function";me||n.warn("Unrecognized transform type "+ue+"."),me&&me.supplyDefaults&&(Me||Pe)?(be=me.supplyDefaults(W,H,oe,Q),be.type=ue,be._module=me,n.pushUnique(ee,me)):be=n.extendFlat({},W),de.push(be)}}};function F(Q,H,oe,re){for(var ee=Q.transforms,ae=[Q],fe=0;fe<ee.length;fe++){var de=ee[fe],pe=x[de.type];pe&&pe.transform&&(ae=pe.transform(ae,{transform:de,fullTrace:Q,fullData:H,layout:oe,fullLayout:re,transformIndex:fe}))}return ae}m.supplyLayoutGlobalDefaults=function(Q,H,oe){function re(W,ue){return n.coerce(Q,H,m.layoutAttributes,W,ue)}var ee=Q.template;n.isPlainObject(ee)&&(H.template=ee,H._template=ee.layout,H._dataTemplate=ee.data),re("autotypenumbers");var ae=n.coerceFont(re,"font");re("title.text",H._dfltTitle.plot),n.coerceFont(re,"title.font",{family:ae.family,size:Math.round(ae.size*1.4),color:ae.color}),re("title.xref"),re("title.yref"),re("title.x"),re("title.y"),re("title.xanchor"),re("title.yanchor"),re("title.pad.t"),re("title.pad.r"),re("title.pad.b"),re("title.pad.l");var fe=re("uniformtext.mode");fe&&re("uniformtext.minsize"),re("autosize",!(Q.width&&Q.height)),re("width"),re("height"),re("margin.l"),re("margin.r"),re("margin.t"),re("margin.b"),re("margin.pad"),re("margin.autoexpand"),Q.width&&Q.height&&m.sanitizeMargins(H),c.getComponentMethod("grid","sizeDefaults")(Q,H),re("paper_bgcolor"),re("separators",oe.decimal+oe.thousands),re("hidesources"),re("colorway"),re("datarevision");var de=re("uirevision");re("editrevision",de),re("selectionrevision",de),re("modebar.orientation"),re("modebar.bgcolor",o.addOpacity(H.paper_bgcolor,.5));var pe=o.contrast(o.rgb(H.modebar.bgcolor));re("modebar.color",o.addOpacity(pe,.3)),re("modebar.activecolor",o.addOpacity(pe,.7)),re("modebar.uirevision",de),c.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(Q,H,re),re("meta"),n.isPlainObject(Q.transition)&&(re("transition.duration"),re("transition.easing"),re("transition.ordering")),c.getComponentMethod("calendars","handleDefaults")(Q,H,"calendar"),c.getComponentMethod("fx","supplyLayoutGlobalDefaults")(Q,H,re)};function N(Q){return typeof Q=="string"&&Q.substr(Q.length-2)==="px"&&parseFloat(Q)}m.plotAutoSize=function(H,oe,re){var ee=H._context||{},ae=ee.frameMargins,fe,de,pe=n.isPlotDiv(H);if(pe&&H.emit("plotly_autosize"),ee.fillFrame)fe=window.innerWidth,de=window.innerHeight,document.body.style.overflow="hidden";else{var W=pe?window.getComputedStyle(H):{};if(fe=N(W.width)||N(W.maxWidth)||re.width,de=N(W.height)||N(W.maxHeight)||re.height,u(ae)&&ae>0){var ue=1-2*ae;fe=Math.round(ue*fe),de=Math.round(ue*de)}}var me=m.layoutAttributes.width.min,be=m.layoutAttributes.height.min;fe<me&&(fe=me),de<be&&(de=be);var Me=!oe.width&&Math.abs(re.width-fe)>1,Pe=!oe.height&&Math.abs(re.height-de)>1;(Pe||Me)&&(Me&&(re.width=fe),Pe&&(re.height=de)),H._initialAutoSize||(H._initialAutoSize={width:fe,height:de}),m.sanitizeMargins(re)},m.supplyLayoutModuleDefaults=function(Q,H,oe,re){var ee=c.componentsRegistry,ae=H._basePlotModules,fe,de,pe,W=c.subplotsRegistry.cartesian;for(fe in ee)pe=ee[fe],pe.includeBasePlot&&pe.includeBasePlot(Q,H);ae.length||ae.push(W),H._has("cartesian")&&(c.getComponentMethod("grid","contentDefaults")(Q,H),W.finalizeSubplots(Q,H));for(var ue in H._subplots)H._subplots[ue].sort(n.subplotSort);for(de=0;de<ae.length;de++)pe=ae[de],pe.supplyLayoutDefaults&&pe.supplyLayoutDefaults(Q,H,oe);var me=H._modules;for(de=0;de<me.length;de++)pe=me[de],pe.supplyLayoutDefaults&&pe.supplyLayoutDefaults(Q,H,oe);var be=H._transformModules;for(de=0;de<be.length;de++)pe=be[de],pe.supplyLayoutDefaults&&pe.supplyLayoutDefaults(Q,H,oe,re);for(fe in ee)pe=ee[fe],pe.supplyLayoutDefaults&&pe.supplyLayoutDefaults(Q,H,oe)},m.purge=function(Q){var H=Q._fullLayout||{};H._glcontainer!==void 0&&(H._glcontainer.selectAll(".gl-canvas").remove(),H._glcontainer.remove(),H._glcanvas=null),H._modeBar&&H._modeBar.destroy(),Q._transitionData&&(Q._transitionData._interruptCallbacks&&(Q._transitionData._interruptCallbacks.length=0),Q._transitionData._animationRaf&&window.cancelAnimationFrame(Q._transitionData._animationRaf)),n.clearThrottle(),n.clearResponsive(Q),delete Q.data,delete Q.layout,delete Q._fullData,delete Q._fullLayout,delete Q.calcdata,delete Q.framework,delete Q.empty,delete Q.fid,delete Q.undoqueue,delete Q.undonum,delete Q.autoplay,delete Q.changed,delete Q._promises,delete Q._redrawTimer,delete Q._hmlumcount,delete Q._hmpixcount,delete Q._transitionData,delete Q._transitioning,delete Q._initialAutoSize,delete Q._transitioningWithDuration,delete Q._dragging,delete Q._dragged,delete Q._dragdata,delete Q._hoverdata,delete Q._snapshotInProgress,delete Q._editing,delete Q._mouseDownTime,delete Q._legendMouseDownTime,Q.removeAllListeners&&Q.removeAllListeners()},m.style=function(Q){var H=Q._fullLayout._visibleModules,oe=[],re;for(re=0;re<H.length;re++){var ee=H[re];ee.style&&n.pushUnique(oe,ee.style)}for(re=0;re<oe.length;re++)oe[re](Q)},m.sanitizeMargins=function(Q){if(!(!Q||!Q.margin)){var H=Q.width,oe=Q.height,re=Q.margin,ee=H-(re.l+re.r),ae=oe-(re.t+re.b),fe;ee<0&&(fe=(H-1)/(re.l+re.r),re.l=Math.floor(fe*re.l),re.r=Math.floor(fe*re.r)),ae<0&&(fe=(oe-1)/(re.t+re.b),re.t=Math.floor(fe*re.t),re.b=Math.floor(fe*re.b))}},m.clearAutoMarginIds=function(Q){Q._fullLayout._pushmarginIds={}},m.allowAutoMargin=function(Q,H){Q._fullLayout._pushmarginIds[H]=1};function G(Q){var H=Q.margin;if(!Q._size){var oe=Q._size={l:Math.round(H.l),r:Math.round(H.r),t:Math.round(H.t),b:Math.round(H.b),p:Math.round(H.pad)};oe.w=Math.round(Q.width)-oe.l-oe.r,oe.h=Math.round(Q.height)-oe.t-oe.b}Q._pushmargin||(Q._pushmargin={}),Q._pushmarginIds||(Q._pushmarginIds={})}var U=2,X=2,z=64,B=64;m.autoMargin=function(Q,H,oe){var re=Q._fullLayout,ee=re.width,ae=re.height,fe=re.margin,de=n.constrain(ee-fe.l-fe.r,U,z),pe=n.constrain(ae-fe.t-fe.b,X,B),W=Math.max(0,ee-de),ue=Math.max(0,ae-pe),me=re._pushmargin,be=re._pushmarginIds;if(fe.autoexpand!==!1){if(!oe)delete me[H],delete be[H];else{var Me=oe.pad;if(Me===void 0&&(Me=Math.min(12,fe.l,fe.r,fe.t,fe.b)),W){var Pe=(oe.l+oe.r)/W;Pe>1&&(oe.l/=Pe,oe.r/=Pe)}if(ue){var Ge=(oe.t+oe.b)/ue;Ge>1&&(oe.t/=Ge,oe.b/=Ge)}var ze=oe.xl!==void 0?oe.xl:oe.x,Qe=oe.xr!==void 0?oe.xr:oe.x,tt=oe.yt!==void 0?oe.yt:oe.y,Ce=oe.yb!==void 0?oe.yb:oe.y;me[H]={l:{val:ze,size:oe.l+Me},r:{val:Qe,size:oe.r+Me},b:{val:Ce,size:oe.b+Me},t:{val:tt,size:oe.t+Me}},be[H]=1}if(!re._replotting)return m.doAutoMargin(Q)}},m.doAutoMargin=function(Q){var H=Q._fullLayout,oe=H.width,re=H.height;H._size||(H._size={}),G(H);var ee=H._size,ae=H.margin,fe=n.extendFlat({},ee),de=ae.l,pe=ae.r,W=ae.t,ue=ae.b,me=H._pushmargin,be=H._pushmarginIds;if(H.margin.autoexpand!==!1){for(var Me in me)be[Me]||delete me[Me];me.base={l:{val:0,size:de},r:{val:1,size:pe},t:{val:1,size:W},b:{val:0,size:ue}};for(var Pe in me){var Ge=me[Pe].l||{},ze=me[Pe].b||{},Qe=Ge.val,tt=Ge.size,Ce=ze.val,Ae=ze.size;for(var Be in me){if(u(tt)&&me[Be].r){var qe=me[Be].r.val,Tt=me[Be].r.size;if(qe>Qe){var At=(tt*qe+(Tt-oe)*Qe)/(qe-Qe),Ne=(Tt*(1-Qe)+(tt-oe)*(1-qe))/(qe-Qe);At+Ne>de+pe&&(de=At,pe=Ne)}}if(u(Ae)&&me[Be].t){var ct=me[Be].t.val,Mt=me[Be].t.size;if(ct>Ce){var Wt=(Ae*ct+(Mt-re)*Ce)/(ct-Ce),qt=(Mt*(1-Ce)+(Ae-re)*(1-ct))/(ct-Ce);Wt+qt>ue+W&&(ue=Wt,W=qt)}}}}}var zt=n.constrain(oe-ae.l-ae.r,U,z),$t=n.constrain(re-ae.t-ae.b,X,B),rr=Math.max(0,oe-zt),Lt=Math.max(0,re-$t);if(rr){var Ct=(de+pe)/rr;Ct>1&&(de/=Ct,pe/=Ct)}if(Lt){var dt=(ue+W)/Lt;dt>1&&(ue/=dt,W/=dt)}if(ee.l=Math.round(de),ee.r=Math.round(pe),ee.t=Math.round(W),ee.b=Math.round(ue),ee.p=Math.round(ae.pad),ee.w=Math.round(oe)-ee.l-ee.r,ee.h=Math.round(re)-ee.t-ee.b,!H._replotting&&m.didMarginChange(fe,ee)){"_redrawFromAutoMarginCount"in H?H._redrawFromAutoMarginCount++:H._redrawFromAutoMarginCount=1;var lt=3*(1+Object.keys(be).length);if(H._redrawFromAutoMarginCount<lt)return c.call("plot",Q);H._size=fe,n.warn("Too many auto-margin redraws.")}j(Q)};function j(Q){for(var H=h.list(Q,"",!0),oe=0;oe<H.length;oe++){var re=H[oe],ee=re._hideOutOfRangeInsideTickLabels;ee&&ee()}}var V=["l","r","t","b","p","w","h"];m.didMarginChange=function(Q,H){for(var oe=0;oe<V.length;oe++){var re=V[oe],ee=Q[re],ae=H[re];if(!u(ee)||Math.abs(ae-ee)>1)return!0}return!1},m.graphJson=function(Q,H,oe,re,ee,ae){(ee&&H&&!Q._fullData||ee&&!H&&!Q._fullLayout)&&m.supplyDefaults(Q);var fe=ee?Q._fullData:Q.data,de=ee?Q._fullLayout:Q.layout,pe=(Q._transitionData||{})._frames;function W(be,Me){if(typeof be=="function")return Me?"_function_":null;if(n.isPlainObject(be)){var Pe={},Ge;return Object.keys(be).sort().forEach(function(ze){if(["_","["].indexOf(ze.charAt(0))===-1){if(typeof be[ze]=="function"){Me&&(Pe[ze]="_function");return}if(oe==="keepdata"){if(ze.substr(ze.length-3)==="src")return}else if(oe==="keepstream"){if(Ge=be[ze+"src"],typeof Ge=="string"&&Ge.indexOf(":")>0&&!n.isPlainObject(be.stream))return}else if(oe!=="keepall"&&(Ge=be[ze+"src"],typeof Ge=="string"&&Ge.indexOf(":")>0))return;Pe[ze]=W(be[ze],Me)}}),Pe}return Array.isArray(be)?be.map(function(ze){return W(ze,Me)}):n.isTypedArray(be)?n.simpleMap(be,n.identity):n.isJSDate(be)?n.ms2DateTimeLocal(+be):be}var ue={data:(fe||[]).map(function(be){var Me=W(be);return H&&delete Me.fit,Me})};if(!H&&(ue.layout=W(de),ee)){var me=de._size;ue.layout.computed={margin:{b:me.b,l:me.l,r:me.r,t:me.t}}}return Q.framework&&Q.framework.isPolar&&(ue=Q.framework.getConfig()),pe&&(ue.frames=W(pe)),ae&&(ue.config=W(Q._context,!0)),re==="object"?ue:JSON.stringify(ue)},m.modifyFrames=function(Q,H){var oe,re,ee,ae=Q._transitionData._frames,fe=Q._transitionData._frameHash;for(oe=0;oe<H.length;oe++)switch(re=H[oe],re.type){case"replace":ee=re.value;var de=(ae[re.index]||{}).name,pe=ee.name;ae[re.index]=fe[pe]=ee,pe!==de&&(delete fe[de],fe[pe]=ee);break;case"insert":ee=re.value,fe[ee.name]=ee,ae.splice(re.index,0,ee);break;case"delete":ee=ae[re.index],delete fe[ee.name],ae.splice(re.index,1);break}return Promise.resolve()},m.computeFrame=function(Q,H){var oe=Q._transitionData._frameHash,re,ee,ae,fe;if(!H)throw new Error("computeFrame must be given a string frame name");var de=oe[H.toString()];if(!de)return!1;for(var pe=[de],W=[de.name];de.baseframe&&(de=oe[de.baseframe.toString()])&&W.indexOf(de.name)===-1;)pe.push(de),W.push(de.name);for(var ue={};de=pe.pop();)if(de.layout&&(ue.layout=m.extendLayout(ue.layout,de.layout)),de.data){if(ue.data||(ue.data=[]),ee=de.traces,!ee)for(ee=[],re=0;re<de.data.length;re++)ee[re]=re;for(ue.traces||(ue.traces=[]),re=0;re<de.data.length;re++)ae=ee[re],ae!=null&&(fe=ue.traces.indexOf(ae),fe===-1&&(fe=ue.data.length,ue.traces[fe]=ae),ue.data[fe]=m.extendTrace(ue.data[fe],de.data[re]))}return ue},m.recomputeFrameHash=function(Q){for(var H=Q._transitionData._frameHash={},oe=Q._transitionData._frames,re=0;re<oe.length;re++){var ee=oe[re];ee&&ee.name&&(H[ee.name]=ee)}},m.extendObjectWithContainers=function(Q,H,oe){var re,ee,ae,fe,de,pe,W,ue,me=n.extendDeepNoArrays({},H||{}),be=n.expandObjectPaths(me),Me={};if(oe&&oe.length)for(ae=0;ae<oe.length;ae++)re=n.nestedProperty(be,oe[ae]),ee=re.get(),ee===void 0?n.nestedProperty(Me,oe[ae]).set(null):(re.set(null),n.nestedProperty(Me,oe[ae]).set(ee));if(Q=n.extendDeepNoArrays(Q||{},be),oe&&oe.length){for(ae=0;ae<oe.length;ae++)if(de=n.nestedProperty(Me,oe[ae]),W=de.get(),!!W){for(pe=n.nestedProperty(Q,oe[ae]),ue=pe.get(),Array.isArray(ue)||(ue=[],pe.set(ue)),fe=0;fe<W.length;fe++){var Pe=W[fe];Pe===null?ue[fe]=null:ue[fe]=m.extendObjectWithContainers(ue[fe],Pe)}pe.set(ue)}}return Q},m.dataArrayContainers=["transforms","dimensions"],m.layoutArrayContainers=c.layoutArrayContainers,m.extendTrace=function(Q,H){return m.extendObjectWithContainers(Q,H,m.dataArrayContainers)},m.extendLayout=function(Q,H){return m.extendObjectWithContainers(Q,H,m.layoutArrayContainers)},m.transition=function(Q,H,oe,re,ee,ae){var fe={redraw:ee.redraw},de={},pe=[];return fe.prepareFn=function(){for(var W=Array.isArray(H)?H.length:0,ue=re.slice(0,W),me=0;me<ue.length;me++){var be=ue[me],Me=Q._fullData[be],Pe=Me._module;if(!!Pe){if(Pe.animatable){var Ge=Pe.basePlotModule.name;de[Ge]||(de[Ge]=[]),de[Ge].push(be)}Q.data[ue[me]]=m.extendTrace(Q.data[ue[me]],H[me])}}var ze=n.expandObjectPaths(n.extendDeepNoArrays({},oe)),Qe=/^[xy]axis[0-9]*$/;for(var tt in ze)!Qe.test(tt)||delete ze[tt].range;m.extendLayout(Q.layout,ze),delete Q.calcdata,m.supplyDefaults(Q),m.doCalcdata(Q);var Ce=n.expandObjectPaths(oe);if(Ce){var Ae=Q._fullLayout._plots;for(var Be in Ae){var qe=Ae[Be],Tt=qe.xaxis,At=qe.yaxis,Ne=Tt.range.slice(),ct=At.range.slice(),Mt=null,Wt=null,qt=null,zt=null;Array.isArray(Ce[Tt._name+".range"])?Mt=Ce[Tt._name+".range"].slice():Array.isArray((Ce[Tt._name]||{}).range)&&(Mt=Ce[Tt._name].range.slice()),Array.isArray(Ce[At._name+".range"])?Wt=Ce[At._name+".range"].slice():Array.isArray((Ce[At._name]||{}).range)&&(Wt=Ce[At._name].range.slice()),Ne&&Mt&&(Tt.r2l(Ne[0])!==Tt.r2l(Mt[0])||Tt.r2l(Ne[1])!==Tt.r2l(Mt[1]))&&(qt={xr0:Ne,xr1:Mt}),ct&&Wt&&(At.r2l(ct[0])!==At.r2l(Wt[0])||At.r2l(ct[1])!==At.r2l(Wt[1]))&&(zt={yr0:ct,yr1:Wt}),(qt||zt)&&pe.push(n.extendFlat({plotinfo:qe},qt,zt))}}return Promise.resolve()},fe.runFn=function(W){var ue,me=Q._fullLayout._basePlotModules,be=pe.length,Me;if(oe)for(Me=0;Me<me.length;Me++)me[Me].transitionAxes&&me[Me].transitionAxes(Q,pe,ae,W);be?(ue=n.extendFlat({},ae),ue.duration=0,delete de.cartesian):ue=ae;for(var Pe in de){var Ge=de[Pe],ze=Q._fullData[Ge[0]]._module;ze.basePlotModule.plot(Q,Ge,ue,W)}},K(Q,ae,fe)},m.transitionFromReact=function(Q,H,oe,re){var ee=Q._fullLayout,ae=ee.transition,fe={},de=[];return fe.prepareFn=function(){var pe=ee._plots;fe.redraw=!1,H.anim==="some"&&(fe.redraw=!0),oe.anim==="some"&&(fe.redraw=!0);for(var W in pe){var ue=pe[W],me=ue.xaxis,be=ue.yaxis,Me=re[me._name].range.slice(),Pe=re[be._name].range.slice(),Ge=me.range.slice(),ze=be.range.slice();me.setScale(),be.setScale();var Qe=null,tt=null;(me.r2l(Me[0])!==me.r2l(Ge[0])||me.r2l(Me[1])!==me.r2l(Ge[1]))&&(Qe={xr0:Me,xr1:Ge}),(be.r2l(Pe[0])!==be.r2l(ze[0])||be.r2l(Pe[1])!==be.r2l(ze[1]))&&(tt={yr0:Pe,yr1:ze}),(Qe||tt)&&de.push(n.extendFlat({plotinfo:ue},Qe,tt))}return Promise.resolve()},fe.runFn=function(pe){for(var W=Q._fullData,ue=Q._fullLayout,me=ue._basePlotModules,be,Me,Pe,Ge=[],ze=0;ze<W.length;ze++)Ge.push(ze);function Qe(){for(var Ce=0;Ce<me.length;Ce++)me[Ce].transitionAxes&&me[Ce].transitionAxes(Q,de,be,pe)}function tt(){for(var Ce=0;Ce<me.length;Ce++)me[Ce].plot(Q,Pe,Me,pe)}de.length&&H.anim?ae.ordering==="traces first"?(be=n.extendFlat({},ae,{duration:0}),Pe=Ge,Me=ae,setTimeout(Qe,ae.duration),tt()):(be=ae,Pe=null,Me=n.extendFlat({},ae,{duration:0}),setTimeout(tt,be.duration),Qe()):de.length?(be=ae,Qe()):H.anim&&(Pe=Ge,Me=ae,tt())},K(Q,ae,fe)};function K(Q,H,oe){var re=!1;function ee(me){var be=Promise.resolve();if(!me)return be;for(;me.length;)be=be.then(me.shift());return be}function ae(me){if(!!me)for(;me.length;)me.shift()}function fe(){return Q.emit("plotly_transitioning",[]),new Promise(function(me){Q._transitioning=!0,H.duration>0&&(Q._transitioningWithDuration=!0),Q._transitionData._interruptCallbacks.push(function(){re=!0}),oe.redraw&&Q._transitionData._interruptCallbacks.push(function(){return c.call("redraw",Q)}),Q._transitionData._interruptCallbacks.push(function(){Q.emit("plotly_transitioninterrupted",[])});var be=0,Me=0;function Pe(){return be++,function(){Me++,!re&&Me===be&&de(me)}}oe.runFn(Pe),setTimeout(Pe())})}function de(me){if(!!Q._transitionData)return ae(Q._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(oe.redraw)return c.call("redraw",Q)}).then(function(){Q._transitioning=!1,Q._transitioningWithDuration=!1,Q.emit("plotly_transitioned",[])}).then(me)}function pe(){if(!!Q._transitionData)return Q._transitioning=!1,ee(Q._transitionData._interruptCallbacks)}var W=[m.previousPromises,pe,oe.prepareFn,m.rehover,fe],ue=n.syncOrAsync(W,Q);return(!ue||!ue.then)&&(ue=Promise.resolve()),ue.then(function(){return Q})}m.doCalcdata=function(Q,H){var oe=h.list(Q),re=Q._fullData,ee=Q._fullLayout,ae,fe,de,pe,W=new Array(re.length),ue=(Q.calcdata||[]).slice();for(Q.calcdata=W,ee._numBoxes=0,ee._numViolins=0,ee._violinScaleGroupStats={},Q._hmpixcount=0,Q._hmlumcount=0,ee._piecolormap={},ee._sunburstcolormap={},ee._treemapcolormap={},ee._funnelareacolormap={},de=0;de<re.length;de++)if(Array.isArray(H)&&H.indexOf(de)===-1){W[de]=ue[de];continue}for(de=0;de<re.length;de++)ae=re[de],ae._arrayAttrs=t.findArrayAttributes(ae),ae._extremes={};var me=ee._subplots.polar||[];for(de=0;de<me.length;de++)oe.push(ee[me[de]].radialaxis,ee[me[de]].angularaxis);for(var be in ee._colorAxes){var Me=ee[be];Me.cauto!==!1&&(delete Me.cmin,delete Me.cmax)}var Pe=!1;function Ge(tt){if(ae=re[tt],fe=ae._module,ae.visible===!0&&ae.transforms){if(fe&&fe.calc){var Ce=fe.calc(Q,ae);Ce[0]&&Ce[0].t&&Ce[0].t._scene&&delete Ce[0].t._scene.dirty}for(pe=0;pe<ae.transforms.length;pe++){var Ae=ae.transforms[pe];fe=x[Ae.type],fe&&fe.calcTransform&&(ae._hasCalcTransform=!0,Pe=!0,fe.calcTransform(Q,ae,Ae))}}}function ze(tt,Ce){if(ae=re[tt],fe=ae._module,!!fe.isContainer===Ce){var Ae=[];if(ae.visible===!0&&ae._length!==0){delete ae._indexToPoints;var Be=ae.transforms||[];for(pe=Be.length-1;pe>=0;pe--)if(Be[pe].enabled){ae._indexToPoints=Be[pe]._indexToPoints;break}fe&&fe.calc&&(Ae=fe.calc(Q,ae))}(!Array.isArray(Ae)||!Ae[0])&&(Ae=[{x:l,y:l}]),Ae[0].t||(Ae[0].t={}),Ae[0].trace=ae,W[tt]=Ae}}for(ie(oe,re,ee),de=0;de<re.length;de++)ze(de,!0);for(de=0;de<re.length;de++)Ge(de);for(Pe&&ie(oe,re,ee),de=0;de<re.length;de++)ze(de,!0);for(de=0;de<re.length;de++)ze(de,!1);se(Q);var Qe=$(oe,Q);if(Qe.length){for(ee._numBoxes=0,ee._numViolins=0,de=0;de<Qe.length;de++)ze(Qe[de],!0);for(de=0;de<Qe.length;de++)ze(Qe[de],!1);se(Q)}c.getComponentMethod("fx","calc")(Q),c.getComponentMethod("errorbars","calc")(Q)};var te=/(total|sum|min|max|mean|median) (ascending|descending)/;function $(Q,H){var oe=[],re,ee,ae,fe,de;function pe(rr,Lt,Ct){var dt=Lt._id.charAt(0);if(rr==="histogram2dcontour"){var lt=Lt._counterAxes[0],Te=h.getFromId(H,lt),Le=dt==="x"||lt==="x"&&Te.type==="category",Ue=dt==="y"||lt==="y"&&Te.type==="category";return function(et,ke){return et===0||ke===0||Le&&et===Ct[ke].length-1||Ue&&ke===Ct.length-1?-1:(dt==="y"?ke:et)-1}}else return function(et,ke){return dt==="y"?ke:et}}var W={min:function(rr){return n.aggNums(Math.min,null,rr)},max:function(rr){return n.aggNums(Math.max,null,rr)},sum:function(rr){return n.aggNums(function(Lt,Ct){return Lt+Ct},null,rr)},total:function(rr){return n.aggNums(function(Lt,Ct){return Lt+Ct},null,rr)},mean:function(rr){return n.mean(rr)},median:function(rr){return n.median(rr)}};for(re=0;re<Q.length;re++){var ue=Q[re];if(ue.type==="category"){var me=ue.categoryorder.match(te);if(me){var be=me[1],Me=me[2],Pe=ue._id.charAt(0),Ge=Pe==="x",ze=[];for(ee=0;ee<ue._categories.length;ee++)ze.push([ue._categories[ee],[]]);for(ee=0;ee<ue._traceIndices.length;ee++){var Qe=ue._traceIndices[ee],tt=H._fullData[Qe];if(tt.visible===!0){var Ce=tt.type;c.traceIs(tt,"histogram")&&(delete tt._xautoBinFinished,delete tt._yautoBinFinished);var Ae=Ce==="splom",Be=Ce==="scattergl",qe=H.calcdata[Qe];for(ae=0;ae<qe.length;ae++){var Tt=qe[ae],At,Ne;if(Ae){var ct=tt._axesDim[ue._id];if(!Ge){var Mt=tt._diag[ct][0];Mt&&(ue=H._fullLayout[h.id2name(Mt)])}var Wt=Tt.trace.dimensions[ct].values;for(fe=0;fe<Wt.length;fe++)for(At=ue._categoriesMap[Wt[fe]],de=0;de<Tt.trace.dimensions.length;de++)if(de!==ct){var qt=Tt.trace.dimensions[de];ze[At][1].push(qt.values[fe])}}else if(Be){for(fe=0;fe<Tt.t.x.length;fe++)Ge?(At=Tt.t.x[fe],Ne=Tt.t.y[fe]):(At=Tt.t.y[fe],Ne=Tt.t.x[fe]),ze[At][1].push(Ne);Tt.t&&Tt.t._scene&&delete Tt.t._scene.dirty}else if(Tt.hasOwnProperty("z")){Ne=Tt.z;var zt=pe(tt.type,ue,Ne);for(fe=0;fe<Ne.length;fe++)for(de=0;de<Ne[fe].length;de++)At=zt(de,fe),At+1&&ze[At][1].push(Ne[fe][de])}else for(At=Tt.p,At===void 0&&(At=Tt[Pe]),Ne=Tt.s,Ne===void 0&&(Ne=Tt.v),Ne===void 0&&(Ne=Ge?Tt.y:Tt.x),Array.isArray(Ne)||(Ne===void 0?Ne=[]:Ne=[Ne]),fe=0;fe<Ne.length;fe++)ze[At][1].push(Ne[fe])}}}ue._categoriesValue=ze;var $t=[];for(ee=0;ee<ze.length;ee++)$t.push([ze[ee][0],W[be](ze[ee][1])]);$t.sort(function(rr,Lt){return rr[1]-Lt[1]}),ue._categoriesAggregatedValue=$t,ue._initialCategories=$t.map(function(rr){return rr[0]}),Me==="descending"&&ue._initialCategories.reverse(),oe=oe.concat(ue.sortByInitialCategories())}}}return oe}function ie(Q,H,oe){var re={};function ee(pe){pe.clearCalc(),pe.type==="multicategory"&&pe.setupMultiCategory(H),re[pe._id]=1}n.simpleMap(Q,ee);for(var ae=oe._axisMatchGroups||[],fe=0;fe<ae.length;fe++)for(var de in ae[fe])re[de]||ee(oe[h.id2name(de)])}function se(Q){var H=Q._fullLayout,oe=H._visibleModules,re={},ee,ae,fe;for(ae=0;ae<oe.length;ae++){var de=oe[ae],pe=de.crossTraceCalc;if(pe){var W=de.basePlotModule.name;re[W]?n.pushUnique(re[W],pe):re[W]=[pe]}}for(fe in re){var ue=re[fe],me=H._subplots[fe];if(Array.isArray(me))for(ee=0;ee<me.length;ee++){var be=me[ee],Me=fe==="cartesian"?H._plots[be]:H[be];for(ae=0;ae<ue.length;ae++)ue[ae](Q,Me,be)}else for(ae=0;ae<ue.length;ae++)ue[ae](Q)}}m.rehover=function(Q){Q._fullLayout._rehover&&Q._fullLayout._rehover()},m.redrag=function(Q){Q._fullLayout._redrag&&Q._fullLayout._redrag()},m.generalUpdatePerTraceModule=function(Q,H,oe,re){var ee=H.traceHash,ae={},fe;for(fe=0;fe<oe.length;fe++){var de=oe[fe],pe=de[0].trace;pe.visible&&(ae[pe.type]=ae[pe.type]||[],ae[pe.type].push(de))}for(var W in ee)if(!ae[W]){var ue=ee[W][0],me=ue[0].trace;me.visible=!1,ae[W]=[ue]}for(var be in ae){var Me=ae[be],Pe=Me[0][0].trace._module;Pe.plot(Q,H,n.filterVisible(Me),re)}H.traceHash=ae},m.plotBasePlot=function(Q,H,oe,re,ee){var ae=c.getModule(Q),fe=d(H.calcdata,ae)[0];ae.plot(H,fe,re,ee)},m.cleanBasePlot=function(Q,H,oe,re,ee){var ae=ee._has&&ee._has(Q),fe=oe._has&&oe._has(Q);ae&&!fe&&ee["_"+Q+"layer"].selectAll("g.trace").remove()}},{"../components/color":643,"../constants/numerical":753,"../lib":778,"../plot_api/plot_schema":816,"../plot_api/plot_template":817,"../plots/get_data":865,"../registry":911,"./animation_attributes":822,"./attributes":824,"./cartesian/axis_ids":831,"./cartesian/handle_outline":838,"./command":854,"./font_attributes":856,"./frame_attributes":857,"./layout_attributes":882,d3:169,"d3-time-format":166,"fast-isnumeric":241}],892:[function(e,v,S){v.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],893:[function(e,v,S){var r=e("../../lib"),a=e("../../lib/polygon").tester,u=r.findIndexOfMin,c=r.isAngleInsideSector,t=r.angleDelta,f=r.angleDist;function n(w,y,T,M,P){if(!c(y,M))return!1;var L,I;T[0]<T[1]?(L=T[0],I=T[1]):(L=T[1],I=T[0]);var E=a(s(L,M[0],M[1],P)),k=a(s(I,M[0],M[1],P)),C=[w*Math.cos(y),w*Math.sin(y)];return k.contains(C)&&!E.contains(C)}function o(w,y,T,M){var P,L,I=M[0],E=M[1],k=g(Math.sin(y)-Math.sin(w)),C=g(Math.cos(y)-Math.cos(w)),D=Math.tan(T),F=g(1/D),N=k/C,G=E-N*I;return F?k&&C?(P=G/(D-N),L=D*P):C?(P=E*F,L=E):(P=I,L=I*D):k&&C?(P=0,L=G):C?(P=0,L=E):P=L=NaN,[P,L]}function l(w,y,T,M){var P=-y*T,L=y*y+1,I=2*(y*P-T),E=P*P+T*T-w*w,k=Math.sqrt(I*I-4*L*E),C=(-I+k)/(2*L),D=(-I-k)/(2*L);return[[C,y*C+P+M],[D,y*D+P+M]]}function h(w,y){var T=y.length,M=new Array(T+1),P;for(P=0;P<T;P++){var L=y[P];M[P]=[w*Math.cos(L),w*Math.sin(L)]}return M[P]=M[0].slice(),M}function i(w,y,T,M){var P=M.length,L=[],I,E;function k(B){return[w*Math.cos(B),w*Math.sin(B)]}function C(B,j,V){return o(B,j,V,k(B))}function D(B){return r.mod(B,P)}function F(B){return c(B,[y,T])}var N=u(M,function(B){return F(B)?f(B,y):1/0}),G=C(M[N],M[D(N-1)],y);for(L.push(G),I=N,E=0;E<P;I++,E++){var U=M[D(I)];if(!F(U))break;L.push(k(U))}var X=u(M,function(B){return F(B)?f(B,T):1/0}),z=C(M[X],M[D(X+1)],T);return L.push(z),L.push([0,0]),L.push(L[0].slice()),L}function s(w,y,T,M){return r.isFullCircle([y,T])?h(w,M):i(w,y,T,M)}function p(w,y,T,M){for(var P=1/0,L=1/0,I=s(w,y,T,M),E=0;E<I.length;E++){var k=I[E];P=Math.min(P,k[0]),L=Math.min(L,-k[1])}return[P,L]}function d(w,y){var T=function(L){var I=t(L,w);return I>0?I:1/0},M=u(y,T),P=r.mod(M+1,y.length);return[y[M],y[P]]}function g(w){return Math.abs(w)>1e-10?w:0}function b(w,y,T){y=y||0,T=T||0;for(var M=w.length,P=new Array(M),L=0;L<M;L++){var I=w[L];P[L]=[y+I[0],T-I[1]]}return P}function m(w,y,T,M,P,L){var I=s(w,y,T,M);return"M"+b(I,P,L).join("L")}function x(w,y,T,M,P,L,I){var E,k;w<y?(E=w,k=y):(E=y,k=w);var C=b(s(E,T,M,P),L,I),D=b(s(k,T,M,P),L,I);return"M"+D.reverse().join("L")+"M"+C.join("L")}v.exports={isPtInsidePolygon:n,findPolygonOffset:p,findEnclosingVertexAngles:d,findIntersectionXY:o,findXYatLength:l,clampTiny:g,pathPolygon:m,pathPolygonAnnulus:x}},{"../../lib":778,"../../lib/polygon":790}],894:[function(e,v,S){var r=e("../get_data").getSubplotCalcData,a=e("../../lib").counterRegex,u=e("./polar"),c=e("./constants"),t=c.attr,f=c.name,n=a(f),o={};o[t]={valType:"subplotid",dflt:f,editType:"calc"};function l(i){for(var s=i._fullLayout,p=i.calcdata,d=s._subplots[f],g=0;g<d.length;g++){var b=d[g],m=r(p,f,b),x=s[b]._subplot;x||(x=u(i,b),s[b]._subplot=x),x.plot(m,s,i._promises)}}function h(i,s,p,d){for(var g=d._subplots[f]||[],b=d._has&&d._has("gl"),m=s._has&&s._has("gl"),x=b&&!m,w=0;w<g.length;w++){var y=g[w],T=d[y]._subplot;if(!s[y]&&!!T){T.framework.remove(),T.layers["radial-axis-title"].remove();for(var M in T.clipPaths)T.clipPaths[M].remove()}x&&T._scene&&(T._scene.destroy(),T._scene=null)}}v.exports={attr:t,name:f,idRoot:f,idRegex:n,attrRegex:n,attributes:o,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:l,clean:h,toSVG:e("../cartesian").toSVG}},{"../../lib":778,"../cartesian":841,"../get_data":865,"./constants":892,"./layout_attributes":895,"./layout_defaults":896,"./polar":903}],895:[function(e,v,S){var r=e("../../components/color/attributes"),a=e("../cartesian/layout_attributes"),u=e("../domain").attributes,c=e("../../lib").extendFlat,t=e("../../plot_api/edit_types").overrideAll,f=t({color:a.color,showline:c({},a.showline,{dflt:!0}),linecolor:a.linecolor,linewidth:a.linewidth,showgrid:c({},a.showgrid,{dflt:!0}),gridcolor:a.gridcolor,gridwidth:a.gridwidth},"plot","from-root"),n=t({tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:a.ticks,ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,showtickprefix:a.showtickprefix,tickprefix:a.tickprefix,showticksuffix:a.showticksuffix,ticksuffix:a.ticksuffix,showexponent:a.showexponent,exponentformat:a.exponentformat,minexponent:a.minexponent,separatethousands:a.separatethousands,tickfont:a.tickfont,tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,layer:a.layer},"plot","from-root"),o={visible:c({},a.visible,{dflt:!0}),type:c({},a.type,{values:["-","linear","log","date","category"]}),autotypenumbers:a.autotypenumbers,autorange:c({},a.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:c({},a.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:a.categoryorder,categoryarray:a.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:c({},a.title.text,{editType:"plot",dflt:""}),font:c({},a.title.font,{editType:"plot"}),editType:"plot"},hoverformat:a.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:a._deprecated.title,titlefont:a._deprecated.titlefont}};c(o,f,n);var l={visible:c({},a.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:a.autotypenumbers,categoryorder:a.categoryorder,categoryarray:a.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:a.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};c(l,f,n),v.exports={domain:u({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:r.background},radialaxis:o,angularaxis:l,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":642,"../../lib":778,"../../plot_api/edit_types":810,"../cartesian/layout_attributes":842,"../domain":855}],896:[function(e,v,S){var r=e("../../lib"),a=e("../../components/color"),u=e("../../plot_api/plot_template"),c=e("../subplot_defaults"),t=e("../get_data").getSubplotData,f=e("../cartesian/tick_value_defaults"),n=e("../cartesian/tick_mark_defaults"),o=e("../cartesian/tick_label_defaults"),l=e("../cartesian/category_order_defaults"),h=e("../cartesian/line_grid_defaults"),i=e("../cartesian/axis_autotype"),s=e("./layout_attributes"),p=e("./set_convert"),d=e("./constants"),g=d.axisNames;function b(x,w,y,T){var M=y("bgcolor");T.bgColor=a.combine(M,T.paper_bgcolor);var P=y("sector");y("hole");var L=t(T.fullData,d.name,T.id),I=T.layoutOut,E;function k(te,$){return y(E+"."+te,$)}for(var C=0;C<g.length;C++){E=g[C],r.isPlainObject(x[E])||(x[E]={});var D=x[E],F=u.newContainer(w,E);F._id=F._name=E,F._attr=T.id+"."+E,F._traceIndices=L.map(function(te){return te._expandedIndex});var N=d.axisName2dataArray[E],G=m(D,F,k,L,N,T);l(D,F,k,{axData:L,dataAttr:N});var U=k("visible");p(F,w,I),k("uirevision",w.uirevision);var X,z;switch(U&&(X=k("color"),z=X===D.color?X:T.font.color),F._m=1,E){case"radialaxis":var B=k("autorange",!F.isValidRange(D.range));D.autorange=B,B&&(G==="linear"||G==="-")&&k("rangemode"),B==="reversed"&&(F._m=-1),k("range"),F.cleanRange("range",{dfltRange:[0,1]}),U&&(k("side"),k("angle",P[0]),k("title.text"),r.coerceFont(k,"title.font",{family:T.font.family,size:Math.round(T.font.size*1.2),color:z}));break;case"angularaxis":if(G==="date"){r.log("Polar plots do not support date angular axes yet.");for(var j=0;j<L.length;j++)L[j].visible=!1;G=D.type=F.type="linear"}k(G==="linear"?"thetaunit":"period");var V=k("direction");k("rotation",{counterclockwise:0,clockwise:90}[V]);break}if(U){f(D,F,k,F.type),o(D,F,k,F.type,{tickSuffixDflt:F.thetaunit==="degrees"?"\xB0":void 0}),n(D,F,k,{outerTicks:!0});var K=k("showticklabels");K&&(r.coerceFont(k,"tickfont",{family:T.font.family,size:T.font.size,color:z}),k("tickangle"),k("tickformat")),h(D,F,k,{dfltColor:X,bgColor:T.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:s[E]}),k("layer")}G!=="category"&&k("hoverformat"),F._input=D}w.angularaxis.type==="category"&&y("gridshape")}function m(x,w,y,T,M,P){var L=y("autotypenumbers",P.autotypenumbersDflt),I=y("type");if(I==="-"){for(var E,k=0;k<T.length;k++)if(T[k].visible){E=T[k];break}E&&E[M]&&(w.type=i(E[M],"gregorian",{noMultiCategory:!0,autotypenumbers:L})),w.type==="-"?w.type="linear":x.type=w.type}return w.type}v.exports=function(w,y,T){c(w,y,T,{type:d.name,attributes:s,handleDefaults:b,font:y.font,autotypenumbersDflt:y.autotypenumbers,paper_bgcolor:y.paper_bgcolor,fullData:T,layoutOut:y})}},{"../../components/color":643,"../../lib":778,"../../plot_api/plot_template":817,"../cartesian/axis_autotype":829,"../cartesian/category_order_defaults":832,"../cartesian/line_grid_defaults":844,"../cartesian/tick_label_defaults":849,"../cartesian/tick_mark_defaults":850,"../cartesian/tick_value_defaults":851,"../get_data":865,"../subplot_defaults":905,"./constants":892,"./layout_attributes":895,"./set_convert":904}],897:[function(e,v,S){var r=e("../../../traces/scatter/attributes"),a=r.marker,u=e("../../../lib/extend").extendFlat;v.exports={r:u({},r.r,{}),t:u({},r.t,{}),marker:{color:u({},a.color,{}),size:u({},a.size,{}),symbol:u({},a.symbol,{}),opacity:u({},a.opacity,{}),editType:"calc"}}},{"../../../lib/extend":768,"../../../traces/scatter/attributes":1187}],898:[function(e,v,S){var r=e("../../cartesian/layout_attributes"),a=e("../../../lib/extend").extendFlat,u=e("../../../plot_api/edit_types").overrideAll,c=["Legacy polar charts are deprecated!","Please switch to *polar* subplots."].join(" "),t=a({},r.domain,{});function f(n,o){var l={showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:c},visible:{valType:"boolean"}};return a({},o,l)}v.exports=u({radialaxis:f("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:t,orientation:{valType:"number"}}),angularaxis:f("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:t}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":768,"../../../plot_api/edit_types":810,"../../cartesian/layout_attributes":842}],899:[function(e,v,S){var r=v.exports=e("./micropolar");r.manager=e("./micropolar_manager")},{"./micropolar":900,"./micropolar_manager":901}],900:[function(e,v,S){var r=e("d3"),a=e("../../../lib"),u=a.extendDeepAll,c=e("../../../constants/alignment").MID_SHIFT,t=v.exports={version:"0.2.2"};t.Axis=function(){var n={data:[],layout:{}},o={},l={},h,i,s=r.dispatch("hover"),p,d,g={};function b(m){i=m||i;var x=n.data,w=n.layout;return(typeof i=="string"||i.nodeName)&&(i=r.select(i)),i.datum(x).each(function(y,T){var M=y.slice();l={data:t.util.cloneJson(M),layout:t.util.cloneJson(w)};var P=0;M.forEach(function(Te,Le){Te.color||(Te.color=w.defaultColorRange[P],P=(P+1)%w.defaultColorRange.length),Te.strokeColor||(Te.strokeColor=Te.geometry==="LinePlot"?Te.color:r.rgb(Te.color).darker().toString()),l.data[Le].color=Te.color,l.data[Le].strokeColor=Te.strokeColor,l.data[Le].strokeDash=Te.strokeDash,l.data[Le].strokeSize=Te.strokeSize});var L=M.filter(function(Te,Le){var Ue=Te.visible;return typeof Ue>"u"||Ue===!0}),I=!1,E=L.map(function(Te,Le){return I=I||typeof Te.groupId<"u",Te});if(I){var k=r.nest().key(function(Te,Le){return typeof Te.groupId<"u"?Te.groupId:"unstacked"}).entries(E),C=[],D=k.map(function(Te,Le){if(Te.key==="unstacked")return Te.values;var Ue=Te.values[0].r.map(function(et,ke){return 0});return Te.values.forEach(function(et,ke,Ie){et.yStack=[Ue],C.push(Ue),Ue=t.util.sumArrays(et.r,Ue)}),Te.values});L=r.merge(D)}L.forEach(function(Te,Le){Te.t=Array.isArray(Te.t[0])?Te.t:[Te.t],Te.r=Array.isArray(Te.r[0])?Te.r:[Te.r]});var F=Math.min(w.width-w.margin.left-w.margin.right,w.height-w.margin.top-w.margin.bottom)/2;F=Math.max(10,F);var N=[w.margin.left+F,w.margin.top+F],G;if(I){var U=r.max(t.util.sumArrays(t.util.arrayLast(L).r[0],t.util.arrayLast(C)));G=[0,U]}else G=r.extent(t.util.flattenArray(L.map(function(Te,Le){return Te.r})));w.radialAxis.domain!=t.DATAEXTENT&&(G[0]=0),p=r.scale.linear().domain(w.radialAxis.domain!=t.DATAEXTENT&&w.radialAxis.domain?w.radialAxis.domain:G).range([0,F]),l.layout.radialAxis.domain=p.domain();var X=t.util.flattenArray(L.map(function(Te,Le){return Te.t})),z=typeof X[0]=="string",B;z&&(X=t.util.deduplicate(X),B=X.slice(),X=r.range(X.length),L=L.map(function(Te,Le){var Ue=Te;return Te.t=[X],I&&(Ue.yStack=Te.yStack),Ue}));var j=L.filter(function(Te,Le){return Te.geometry==="LinePlot"||Te.geometry==="DotPlot"}).length===L.length,V=w.needsEndSpacing===null?z||!j:w.needsEndSpacing,K=w.angularAxis.domain&&w.angularAxis.domain!=t.DATAEXTENT&&!z&&w.angularAxis.domain[0]>=0,te=K?w.angularAxis.domain:r.extent(X),$=Math.abs(X[1]-X[0]);j&&!z&&($=0);var ie=te.slice();V&&z&&(ie[1]+=$);var se=w.angularAxis.ticksCount||4;se>8&&(se=se/(se/8)+se%8),w.angularAxis.ticksStep&&(se=(ie[1]-ie[0])/se);var Q=w.angularAxis.ticksStep||(ie[1]-ie[0])/(se*(w.minorTicks+1));B&&(Q=Math.max(Math.round(Q),1)),ie[2]||(ie[2]=Q);var H=r.range.apply(this,ie);if(H=H.map(function(Te,Le){return parseFloat(Te.toPrecision(12))}),d=r.scale.linear().domain(ie.slice(0,2)).range(w.direction==="clockwise"?[0,360]:[360,0]),l.layout.angularAxis.domain=d.domain(),l.layout.angularAxis.endPadding=V?$:0,h=r.select(this).select("svg.chart-root"),typeof h>"u"||h.empty()){var oe="<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>",re=new DOMParser().parseFromString(oe,"application/xml"),ee=this.appendChild(this.ownerDocument.importNode(re.documentElement,!0));h=r.select(ee)}h.select(".guides-group").style({"pointer-events":"none"}),h.select(".angular.axis-group").style({"pointer-events":"none"}),h.select(".radial.axis-group").style({"pointer-events":"none"});var ae=h.select(".chart-group"),fe={fill:"none",stroke:w.tickColor},de={"font-size":w.font.size,"font-family":w.font.family,fill:w.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(Te,Le){return" "+Te+" 0 "+w.font.outlineColor}).join(",")},pe;if(w.showLegend){pe=h.select(".legend-group").attr({transform:"translate("+[F,w.margin.top]+")"}).style({display:"block"});var W=L.map(function(Te,Le){var Ue=t.util.cloneJson(Te);return Ue.symbol=Te.geometry==="DotPlot"?Te.dotType||"circle":Te.geometry!="LinePlot"?"square":"line",Ue.visibleInLegend=typeof Te.visibleInLegend>"u"||Te.visibleInLegend,Ue.color=Te.geometry==="LinePlot"?Te.strokeColor:Te.color,Ue});t.Legend().config({data:L.map(function(Te,Le){return Te.name||"Element"+Le}),legendConfig:u({},t.Legend.defaultConfig().legendConfig,{container:pe,elements:W,reverseOrder:w.legend.reverseOrder})})();var ue=pe.node().getBBox();F=Math.min(w.width-ue.width-w.margin.left-w.margin.right,w.height-w.margin.top-w.margin.bottom)/2,F=Math.max(10,F),N=[w.margin.left+F,w.margin.top+F],p.range([0,F]),l.layout.radialAxis.domain=p.domain(),pe.attr("transform","translate("+[N[0]+F,N[1]-F]+")")}else pe=h.select(".legend-group").style({display:"none"});h.attr({width:w.width,height:w.height}).style({opacity:w.opacity}),ae.attr("transform","translate("+N+")").style({cursor:"crosshair"});var me=[(w.width-(w.margin.left+w.margin.right+F*2+(ue?ue.width:0)))/2,(w.height-(w.margin.top+w.margin.bottom+F*2))/2];if(me[0]=Math.max(0,me[0]),me[1]=Math.max(0,me[1]),h.select(".outer-group").attr("transform","translate("+me+")"),w.title&&w.title.text){var be=h.select("g.title-group text").style(de).text(w.title.text),Me=be.node().getBBox();be.attr({x:N[0]-Me.width/2,y:N[1]-F-20})}var Pe=h.select(".radial.axis-group");if(w.radialAxis.gridLinesVisible){var Ge=Pe.selectAll("circle.grid-circle").data(p.ticks(5));Ge.enter().append("circle").attr({class:"grid-circle"}).style(fe),Ge.attr("r",p),Ge.exit().remove()}Pe.select("circle.outside-circle").attr({r:F}).style(fe);var ze=h.select("circle.background-circle").attr({r:F}).style({fill:w.backgroundColor,stroke:w.stroke});function Qe(Te,Le){return d(Te)%360+w.orientation}if(w.radialAxis.visible){var tt=r.svg.axis().scale(p).ticks(5).tickSize(5);Pe.call(tt).attr({transform:"rotate("+w.radialAxis.orientation+")"}),Pe.selectAll(".domain").style(fe),Pe.selectAll("g>text").text(function(Te,Le){return this.textContent+w.radialAxis.ticksSuffix}).style(de).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(Te,Le){return w.radialAxis.tickOrientation==="horizontal"?"rotate("+-w.radialAxis.orientation+") translate("+[0,de["font-size"]]+")":"translate("+[0,de["font-size"]]+")"}}),Pe.selectAll("g>line").style({stroke:"black"})}var Ce=h.select(".angular.axis-group").selectAll("g.angular-tick").data(H),Ae=Ce.enter().append("g").classed("angular-tick",!0);Ce.attr({transform:function(Te,Le){return"rotate("+Qe(Te)+")"}}).style({display:w.angularAxis.visible?"block":"none"}),Ce.exit().remove(),Ae.append("line").classed("grid-line",!0).classed("major",function(Te,Le){return Le%(w.minorTicks+1)==0}).classed("minor",function(Te,Le){return Le%(w.minorTicks+1)!=0}).style(fe),Ae.selectAll(".minor").style({stroke:w.minorTickColor}),Ce.select("line.grid-line").attr({x1:w.tickLength?F-w.tickLength:0,x2:F}).style({display:w.angularAxis.gridLinesVisible?"block":"none"}),Ae.append("text").classed("axis-text",!0).style(de);var Be=Ce.select("text.axis-text").attr({x:F+w.labelOffset,dy:c+"em",transform:function(Te,Le){var Ue=Qe(Te),et=F+w.labelOffset,ke=w.angularAxis.tickOrientation;return ke=="horizontal"?"rotate("+-Ue+" "+et+" 0)":ke=="radial"?Ue<270&&Ue>90?"rotate(180 "+et+" 0)":null:"rotate("+(Ue<=180&&Ue>0?-90:90)+" "+et+" 0)"}}).style({"text-anchor":"middle",display:w.angularAxis.labelsVisible?"block":"none"}).text(function(Te,Le){return Le%(w.minorTicks+1)!=0?"":B?B[Te]+w.angularAxis.ticksSuffix:Te+w.angularAxis.ticksSuffix}).style(de);w.angularAxis.rewriteTicks&&Be.text(function(Te,Le){return Le%(w.minorTicks+1)!=0?"":w.angularAxis.rewriteTicks(this.textContent,Le)});var qe=r.max(ae.selectAll(".angular-tick text")[0].map(function(Te,Le){return Te.getCTM().e+Te.getBBox().width}));pe.attr({transform:"translate("+[F+qe,w.margin.top]+")"});var Tt=h.select("g.geometry-group").selectAll("g").size()>0,At=h.select("g.geometry-group").selectAll("g.geometry").data(L);if(At.enter().append("g").attr({class:function(Te,Le){return"geometry geometry"+Le}}),At.exit().remove(),L[0]||Tt){var Ne=[];L.forEach(function(Te,Le){var Ue={};Ue.radialScale=p,Ue.angularScale=d,Ue.container=At.filter(function(et,ke){return ke==Le}),Ue.geometry=Te.geometry,Ue.orientation=w.orientation,Ue.direction=w.direction,Ue.index=Le,Ne.push({data:Te,geometryConfig:Ue})});var ct=r.nest().key(function(Te,Le){return typeof Te.data.groupId<"u"||"unstacked"}).entries(Ne),Mt=[];ct.forEach(function(Te,Le){Te.key==="unstacked"?Mt=Mt.concat(Te.values.map(function(Ue,et){return[Ue]})):Mt.push(Te.values)}),Mt.forEach(function(Te,Le){var Ue;Array.isArray(Te)?Ue=Te[0].geometryConfig.geometry:Ue=Te.geometryConfig.geometry;var et=Te.map(function(ke,Ie){return u(t[Ue].defaultConfig(),ke)});t[Ue]().config(et)()})}var Wt=h.select(".guides-group"),qt=h.select(".tooltips-group"),zt=t.tooltipPanel().config({container:qt,fontSize:8})(),$t=t.tooltipPanel().config({container:qt,fontSize:8})(),rr=t.tooltipPanel().config({container:qt,hasTick:!0})(),Lt,Ct;if(!z){var dt=Wt.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});ae.on("mousemove.angular-guide",function(Te,Le){var Ue=t.util.getMousePos(ze).angle;dt.attr({x2:-F,transform:"rotate("+Ue+")"}).style({opacity:.5});var et=(Ue+180+360-w.orientation)%360;Lt=d.invert(et);var ke=t.util.convertToCartesian(F+12,Ue+180);zt.text(t.util.round(Lt)).move([ke[0]+N[0],ke[1]+N[1]])}).on("mouseout.angular-guide",function(Te,Le){Wt.select("line").style({opacity:0})})}var lt=Wt.select("circle").style({stroke:"grey",fill:"none"});ae.on("mousemove.radial-guide",function(Te,Le){var Ue=t.util.getMousePos(ze).radius;lt.attr({r:Ue}).style({opacity:.5}),Ct=p.invert(t.util.getMousePos(ze).radius);var et=t.util.convertToCartesian(Ue,w.radialAxis.orientation);$t.text(t.util.round(Ct)).move([et[0]+N[0],et[1]+N[1]])}).on("mouseout.radial-guide",function(Te,Le){lt.style({opacity:0}),rr.hide(),zt.hide(),$t.hide()}),h.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(Te,Le){var Ue=r.select(this),et=this.style.fill,ke="black",Ie=this.style.opacity||1;if(Ue.attr({"data-opacity":Ie}),et&&et!=="none"){Ue.attr({"data-fill":et}),ke=r.hsl(et).darker().toString(),Ue.style({fill:ke,opacity:1});var He={t:t.util.round(Te[0]),r:t.util.round(Te[1])};z&&(He.t=B[Te[0]]);var Ye="t: "+He.t+", r: "+He.r,ft=this.getBoundingClientRect(),it=h.node().getBoundingClientRect(),je=[ft.left+ft.width/2-me[0]-it.left,ft.top+ft.height/2-me[1]-it.top];rr.config({color:ke}).text(Ye),rr.move(je)}else et=this.style.stroke||"black",Ue.attr({"data-stroke":et}),ke=r.hsl(et).darker().toString(),Ue.style({stroke:ke,opacity:1})}).on("mousemove.tooltip",function(Te,Le){if(r.event.which!=0)return!1;r.select(this).attr("data-fill")&&rr.show()}).on("mouseout.tooltip",function(Te,Le){rr.hide();var Ue=r.select(this),et=Ue.attr("data-fill");et?Ue.style({fill:et,opacity:Ue.attr("data-opacity")}):Ue.style({stroke:Ue.attr("data-stroke"),opacity:Ue.attr("data-opacity")})})}),g}return g.render=function(m){return b(m),this},g.config=function(m){if(!arguments.length)return n;var x=t.util.cloneJson(m);return x.data.forEach(function(w,y){n.data[y]||(n.data[y]={}),u(n.data[y],t.Axis.defaultConfig().data[0]),u(n.data[y],w)}),u(n.layout,t.Axis.defaultConfig().layout),u(n.layout,x.layout),this},g.getLiveConfig=function(){return l},g.getinputConfig=function(){return o},g.radialScale=function(m){return p},g.angularScale=function(m){return d},g.svg=function(){return h},r.rebind(g,s,"on"),g},t.Axis.defaultConfig=function(f,n){var o={data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:r.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}};return o},t.util={},t.DATAEXTENT="dataExtent",t.AREA="AreaChart",t.LINE="LinePlot",t.DOT="DotPlot",t.BAR="BarChart",t.util._override=function(f,n){for(var o in f)o in n&&(n[o]=f[o])},t.util._extend=function(f,n){for(var o in f)n[o]=f[o]},t.util._rndSnd=function(){return Math.random()*2-1+(Math.random()*2-1)+(Math.random()*2-1)},t.util.dataFromEquation2=function(f,n){var o=n||6,l=r.range(0,360+o,o).map(function(h,i){var s=h*Math.PI/180,p=f(s);return[h,p]});return l},t.util.dataFromEquation=function(f,n,o){var l=n||6,h=[],i=[];r.range(0,360+l,l).forEach(function(p,d){var g=p*Math.PI/180,b=f(g);h.push(p),i.push(b)});var s={t:h,r:i};return o&&(s.name=o),s},t.util.ensureArray=function(f,n){if(typeof f>"u")return null;var o=[].concat(f);return r.range(n).map(function(l,h){return o[h]||o[0]})},t.util.fillArrays=function(f,n,o){return n.forEach(function(l,h){f[l]=t.util.ensureArray(f[l],o)}),f},t.util.cloneJson=function(f){return JSON.parse(JSON.stringify(f))},t.util.validateKeys=function(f,n){typeof n=="string"&&(n=n.split("."));var o=n.shift();return f[o]&&(!n.length||objHasKeys(f[o],n))},t.util.sumArrays=function(f,n){return r.zip(f,n).map(function(o,l){return r.sum(o)})},t.util.arrayLast=function(f){return f[f.length-1]},t.util.arrayEqual=function(f,n){for(var o=Math.max(f.length,n.length,1);o-->=0&&f[o]===n[o];);return o===-2},t.util.flattenArray=function(f){for(var n=[];!t.util.arrayEqual(n,f);)n=f,f=[].concat.apply([],f);return f},t.util.deduplicate=function(f){return f.filter(function(n,o,l){return l.indexOf(n)==o})},t.util.convertToCartesian=function(f,n){var o=n*Math.PI/180,l=f*Math.cos(o),h=f*Math.sin(o);return[l,h]},t.util.round=function(f,n){var o=n||2,l=Math.pow(10,o);return Math.round(f*l)/l},t.util.getMousePos=function(f){var n=r.mouse(f.node()),o=n[0],l=n[1],h={};return h.x=o,h.y=l,h.pos=n,h.angle=(Math.atan2(l,o)+Math.PI)*180/Math.PI,h.radius=Math.sqrt(o*o+l*l),h},t.util.duplicatesCount=function(f){for(var n={},o,l={},h=0,i=f.length;h<i;h++)o=f[h],o in n?(n[o]++,l[o]=n[o]):n[o]=1;return l},t.util.duplicates=function(f){return Object.keys(t.util.duplicatesCount(f))},t.util.translator=function(f,n,o,l){if(l){var h=o.slice();o=n,n=h}var i=n.reduce(function(s,p){if(typeof s<"u")return s[p]},f);typeof i>"u"||(n.reduce(function(s,p,d){if(!(typeof s>"u"))return d===n.length-1&&delete s[p],s[p]},f),o.reduce(function(s,p,d){return typeof s[p]>"u"&&(s[p]={}),d===o.length-1&&(s[p]=i),s[p]},f))},t.PolyChart=function(){var n=[t.PolyChart.defaultConfig()],o=r.dispatch("hover"),l={solid:"none",dash:[5,2],dot:[2,5]},h;function i(){var s=n[0].geometryConfig,p=s.container;typeof p=="string"&&(p=r.select(p)),p.datum(n).each(function(d,g){var b=!!d[0].data.yStack,m=d.map(function(F,N){return b?r.zip(F.data.t[0],F.data.r[0],F.data.yStack[0]):r.zip(F.data.t[0],F.data.r[0])}),x=s.angularScale,w=s.radialScale.domain()[0],y={};y.bar=function(F,N,G){var U=d[G].data,X=s.radialScale(F[1])-s.radialScale(0),z=s.radialScale(F[2]||0),B=U.barWidth;r.select(this).attr({class:"mark bar",d:"M"+[[X+z,-B/2],[X+z,B/2],[z,B/2],[z,-B/2]].join("L")+"Z",transform:function(j,V){return"rotate("+(s.orientation+x(j[0]))+")"}})},y.dot=function(F,N,G){var U=F[2]?[F[0],F[1]+F[2]]:F,X=r.svg.symbol().size(d[G].data.dotSize).type(d[G].data.dotType)(F,N);r.select(this).attr({class:"mark dot",d:X,transform:function(z,B){var j=D(C(U));return"translate("+[j.x,j.y]+")"}})};var T=r.svg.line.radial().interpolate(d[0].data.lineInterpolation).radius(function(F){return s.radialScale(F[1])}).angle(function(F){return s.angularScale(F[0])*Math.PI/180});y.line=function(F,N,G){var U=F[2]?m[G].map(function(z,B){return[z[0],z[1]+z[2]]}):m[G];if(r.select(this).each(y.dot).style({opacity:function(z,B){return+d[G].data.dotVisible},fill:I.stroke(F,N,G)}).attr({class:"mark dot"}),!(N>0)){var X=r.select(this.parentNode).selectAll("path.line").data([0]);X.enter().insert("path"),X.attr({class:"line",d:T(U),transform:function(z,B){return"rotate("+(s.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(z,B){return I.fill(F,N,G)},"fill-opacity":0,stroke:function(z,B){return I.stroke(F,N,G)},"stroke-width":function(z,B){return I["stroke-width"](F,N,G)},"stroke-dasharray":function(z,B){return I["stroke-dasharray"](F,N,G)},opacity:function(z,B){return I.opacity(F,N,G)},display:function(z,B){return I.display(F,N,G)}})}};var M=s.angularScale.range(),P=Math.abs(M[1]-M[0])/m[0].length*Math.PI/180,L=r.svg.arc().startAngle(function(F){return-P/2}).endAngle(function(F){return P/2}).innerRadius(function(F){return s.radialScale(w+(F[2]||0))}).outerRadius(function(F){return s.radialScale(w+(F[2]||0))+s.radialScale(F[1])});y.arc=function(F,N,G){r.select(this).attr({class:"mark arc",d:L,transform:function(U,X){return"rotate("+(s.orientation+x(U[0])+90)+")"}})};var I={fill:function(F,N,G){return d[G].data.color},stroke:function(F,N,G){return d[G].data.strokeColor},"stroke-width":function(F,N,G){return d[G].data.strokeSize+"px"},"stroke-dasharray":function(F,N,G){return l[d[G].data.strokeDash]},opacity:function(F,N,G){return d[G].data.opacity},display:function(F,N,G){return typeof d[G].data.visible>"u"||d[G].data.visible?"block":"none"}},E=r.select(this).selectAll("g.layer").data(m);E.enter().append("g").attr({class:"layer"});var k=E.selectAll("path.mark").data(function(F,N){return F});k.enter().append("path").attr({class:"mark"}),k.style(I).each(y[s.geometryType]),k.exit().remove(),E.exit().remove();function C(F,N){var G=s.radialScale(F[1]),U=(s.angularScale(F[0])+s.orientation)*Math.PI/180;return{r:G,t:U}}function D(F){var N=F.r*Math.cos(F.t),G=F.r*Math.sin(F.t);return{x:N,y:G}}})}return i.config=function(s){return arguments.length?(s.forEach(function(p,d){n[d]||(n[d]={}),u(n[d],t.PolyChart.defaultConfig()),u(n[d],p)}),this):n},i.getColorScale=function(){return h},r.rebind(i,o,"on"),i},t.PolyChart.defaultConfig=function(){var f={data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:r.scale.category20()}};return f},t.BarChart=function(){return t.PolyChart()},t.BarChart.defaultConfig=function(){var f={geometryConfig:{geometryType:"bar"}};return f},t.AreaChart=function(){return t.PolyChart()},t.AreaChart.defaultConfig=function(){var f={geometryConfig:{geometryType:"arc"}};return f},t.DotPlot=function(){return t.PolyChart()},t.DotPlot.defaultConfig=function(){var f={geometryConfig:{geometryType:"dot",dotType:"circle"}};return f},t.LinePlot=function(){return t.PolyChart()},t.LinePlot.defaultConfig=function(){var f={geometryConfig:{geometryType:"line"}};return f},t.Legend=function(){var n=t.Legend.defaultConfig(),o=r.dispatch("hover");function l(){var h=n.legendConfig,i=n.data.map(function(D,F){return[].concat(D).map(function(N,G){var U=u({},h.elements[F]);return U.name=N,U.color=[].concat(h.elements[F].color)[G],U})}),s=r.merge(i);s=s.filter(function(D,F){return h.elements[F]&&(h.elements[F].visibleInLegend||typeof h.elements[F].visibleInLegend>"u")}),h.reverseOrder&&(s=s.reverse());var p=h.container;(typeof p=="string"||p.nodeName)&&(p=r.select(p));var d=s.map(function(D,F){return D.color}),g=h.fontSize,b=h.isContinuous==null?typeof s[0]=="number":h.isContinuous,m=b?h.height:g*s.length,x=p.classed("legend-group",!0),w=x.selectAll("svg").data([0]),y=w.enter().append("svg").attr({width:300,height:m+g,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});y.append("g").classed("legend-axis",!0),y.append("g").classed("legend-marks",!0);var T=r.range(s.length),M=r.scale[b?"linear":"ordinal"]().domain(T).range(d),P=r.scale[b?"linear":"ordinal"]().domain(T)[b?"range":"rangePoints"]([0,m]),L=function(D,F){var N=F*3;return D==="line"?"M"+[[-F/2,-F/12],[F/2,-F/12],[F/2,F/12],[-F/2,F/12]]+"Z":r.svg.symbolTypes.indexOf(D)!=-1?r.svg.symbol().type(D).size(N)():r.svg.symbol().type("square").size(N)()};if(b){var I=w.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(d);I.enter().append("stop"),I.attr({offset:function(D,F){return F/(d.length-1)*100+"%"}}).style({"stop-color":function(D,F){return D}}),w.append("rect").classed("legend-mark",!0).attr({height:h.height,width:h.colorBandWidth,fill:"url(#grad1)"})}else{var E=w.select(".legend-marks").selectAll("path.legend-mark").data(s);E.enter().append("path").classed("legend-mark",!0),E.attr({transform:function(D,F){return"translate("+[g/2,P(F)+g/2]+")"},d:function(D,F){var N=D.symbol;return L(N,g)},fill:function(D,F){return M(F)}}),E.exit().remove()}var k=r.svg.axis().scale(P).orient("right"),C=w.select("g.legend-axis").attr({transform:"translate("+[b?h.colorBandWidth:g,g/2]+")"}).call(k);return C.selectAll(".domain").style({fill:"none",stroke:"none"}),C.selectAll("line").style({fill:"none",stroke:b?h.textColor:"none"}),C.selectAll("text").style({fill:h.textColor,"font-size":h.fontSize}).text(function(D,F){return s[F].name}),l}return l.config=function(h){return arguments.length?(u(n,h),this):n},r.rebind(l,o,"on"),l},t.Legend.defaultConfig=function(f,n){var o={data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}};return o},t.tooltipPanel=function(){var f,n,o,l={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},h="tooltip-"+t.tooltipPanel.uid++,i=10,s=function(){f=l.container.selectAll("g."+h).data([0]);var p=f.enter().append("g").classed(h,!0).style({"pointer-events":"none",display:"none"});return o=p.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),n=p.append("text").attr({dx:l.padding+i,dy:+l.fontSize*.3}),s};return s.text=function(p){var d=r.hsl(l.color).l,g=d>=.5?"#aaa":"white",b=d>=.5?"black":"white",m=p||"";n.style({fill:b,"font-size":l.fontSize+"px"}).text(m);var x=l.padding,w=n.node().getBBox(),y={fill:l.color,stroke:g,"stroke-width":"2px"},T=w.width+x*2+i,M=w.height+x*2;return o.attr({d:"M"+[[i,-M/2],[i,-M/4],[l.hasTick?0:i,0],[i,M/4],[i,M/2],[T,M/2],[T,-M/2]].join("L")+"Z"}).style(y),f.attr({transform:"translate("+[i,-M/2+x*2]+")"}),f.style({display:"block"}),s},s.move=function(p){if(!!f)return f.attr({transform:"translate("+[p[0],p[1]]+")"}).style({display:"block"}),s},s.hide=function(){if(!!f)return f.style({display:"none"}),s},s.show=function(){if(!!f)return f.style({display:"block"}),s},s.config=function(p){return u(l,p),s},s},t.tooltipPanel.uid=1,t.adapter={},t.adapter.plotly=function(){var n={};return n.convert=function(o,l){var h={};if(o.data&&(h.data=o.data.map(function(m,x){var w=u({},m),y=[[w,["marker","color"],["color"]],[w,["marker","opacity"],["opacity"]],[w,["marker","line","color"],["strokeColor"]],[w,["marker","line","dash"],["strokeDash"]],[w,["marker","line","width"],["strokeSize"]],[w,["marker","symbol"],["dotType"]],[w,["marker","size"],["dotSize"]],[w,["marker","barWidth"],["barWidth"]],[w,["line","interpolation"],["lineInterpolation"]],[w,["showlegend"],["visibleInLegend"]]];return y.forEach(function(T,M){t.util.translator.apply(null,T.concat(l))}),l||delete w.marker,l&&delete w.groupId,l?(w.geometry==="LinePlot"?(w.type="scatter",w.dotVisible===!0?(delete w.dotVisible,w.mode="lines+markers"):w.mode="lines"):w.geometry==="DotPlot"?(w.type="scatter",w.mode="markers"):w.geometry==="AreaChart"?w.type="area":w.geometry==="BarChart"&&(w.type="bar"),delete w.geometry):(w.type==="scatter"?w.mode==="lines"?w.geometry="LinePlot":w.mode==="markers"?w.geometry="DotPlot":w.mode==="lines+markers"&&(w.geometry="LinePlot",w.dotVisible=!0):w.type==="area"?w.geometry="AreaChart":w.type==="bar"&&(w.geometry="BarChart"),delete w.mode,delete w.type),w}),!l&&o.layout&&o.layout.barmode==="stack")){var i=t.util.duplicates(h.data.map(function(m,x){return m.geometry}));h.data.forEach(function(m,x){var w=i.indexOf(m.geometry);w!=-1&&(h.data[x].groupId=w)})}if(o.layout){var s=u({},o.layout),p=[[s,["plot_bgcolor"],["backgroundColor"]],[s,["showlegend"],["showLegend"]],[s,["radialaxis"],["radialAxis"]],[s,["angularaxis"],["angularAxis"]],[s.angularaxis,["showline"],["gridLinesVisible"]],[s.angularaxis,["showticklabels"],["labelsVisible"]],[s.angularaxis,["nticks"],["ticksCount"]],[s.angularaxis,["tickorientation"],["tickOrientation"]],[s.angularaxis,["ticksuffix"],["ticksSuffix"]],[s.angularaxis,["range"],["domain"]],[s.angularaxis,["endpadding"],["endPadding"]],[s.radialaxis,["showline"],["gridLinesVisible"]],[s.radialaxis,["tickorientation"],["tickOrientation"]],[s.radialaxis,["ticksuffix"],["ticksSuffix"]],[s.radialaxis,["range"],["domain"]],[s.angularAxis,["showline"],["gridLinesVisible"]],[s.angularAxis,["showticklabels"],["labelsVisible"]],[s.angularAxis,["nticks"],["ticksCount"]],[s.angularAxis,["tickorientation"],["tickOrientation"]],[s.angularAxis,["ticksuffix"],["ticksSuffix"]],[s.angularAxis,["range"],["domain"]],[s.angularAxis,["endpadding"],["endPadding"]],[s.radialAxis,["showline"],["gridLinesVisible"]],[s.radialAxis,["tickorientation"],["tickOrientation"]],[s.radialAxis,["ticksuffix"],["ticksSuffix"]],[s.radialAxis,["range"],["domain"]],[s.font,["outlinecolor"],["outlineColor"]],[s.legend,["traceorder"],["reverseOrder"]],[s,["labeloffset"],["labelOffset"]],[s,["defaultcolorrange"],["defaultColorRange"]]];if(p.forEach(function(m,x){t.util.translator.apply(null,m.concat(l))}),l?(typeof s.tickLength<"u"&&(s.angularaxis.ticklen=s.tickLength,delete s.tickLength),s.tickColor&&(s.angularaxis.tickcolor=s.tickColor,delete s.tickColor)):(s.angularAxis&&typeof s.angularAxis.ticklen<"u"&&(s.tickLength=s.angularAxis.ticklen),s.angularAxis&&typeof s.angularAxis.tickcolor<"u"&&(s.tickColor=s.angularAxis.tickcolor)),s.legend&&typeof s.legend.reverseOrder!="boolean"&&(s.legend.reverseOrder=s.legend.reverseOrder!="normal"),s.legend&&typeof s.legend.traceorder=="boolean"&&(s.legend.traceorder=s.legend.traceorder?"reversed":"normal",delete s.legend.reverseOrder),s.margin&&typeof s.margin.t<"u"){var d=["t","r","b","l","pad"],g=["top","right","bottom","left","pad"],b={};r.entries(s.margin).forEach(function(m,x){b[g[d.indexOf(m.key)]]=m.value}),s.margin=b}l&&(delete s.needsEndSpacing,delete s.minorTickColor,delete s.minorTicks,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksStep,delete s.angularaxis.rewriteTicks,delete s.angularaxis.nticks,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksStep,delete s.radialaxis.rewriteTicks,delete s.radialaxis.nticks),h.layout=s}return h},n}},{"../../../constants/alignment":745,"../../../lib":778,d3:169}],901:[function(e,v,S){var r=e("d3"),a=e("../../../lib"),u=e("../../../components/color"),c=e("./micropolar"),t=e("./undo_manager"),f=a.extendDeepAll,n=v.exports={};n.framework=function(o){var l,h,i,s,p,d=new t;function g(b,m){return m&&(p=m),r.select(r.select(p).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),l=l?f(l,b):b,i||(i=c.Axis()),s=c.adapter.plotly().convert(l),i.config(s).render(p),o.data=l.data,o.layout=l.layout,n.fillLayout(o),l}return g.isPolar=!0,g.svg=function(){return i.svg()},g.getConfig=function(){return l},g.getLiveConfig=function(){return c.adapter.plotly().convert(i.getLiveConfig(),!0)},g.getLiveScales=function(){return{t:i.angularScale(),r:i.radialScale()}},g.setUndoPoint=function(){var b=this,m=c.util.cloneJson(l);(function(x,w){d.add({undo:function(){w&&b(w)},redo:function(){b(x)}})})(m,h),h=c.util.cloneJson(m)},g.undo=function(){d.undo()},g.redo=function(){d.redo()},g},n.fillLayout=function(o){var l=r.select(o).selectAll(".plot-container"),h=l.selectAll(".svg-container"),i=o.framework&&o.framework.svg&&o.framework.svg(),s={width:800,height:600,paper_bgcolor:u.background,_container:l,_paperdiv:h,_paper:i};o._fullLayout=f(s,o.layout)}},{"../../../components/color":643,"../../../lib":778,"./micropolar":900,"./undo_manager":902,d3:169}],902:[function(e,v,S){v.exports=function(){var a=[],u=-1,c=!1,t;function f(n,o){return n?(c=!0,n[o](),c=!1,this):this}return{add:function(n){return c?this:(a.splice(u+1,a.length-u),a.push(n),u=a.length-1,this)},setCallback:function(n){t=n},undo:function(){var n=a[u];return n?(f(n,"undo"),u-=1,t&&t(n.undo),this):this},redo:function(){var n=a[u+1];return n?(f(n,"redo"),u+=1,t&&t(n.redo),this):this},clear:function(){a=[],u=-1},hasUndo:function(){return u!==-1},hasRedo:function(){return u<a.length-1},getCommands:function(){return a},getPreviousCommand:function(){return a[u-1]},getIndex:function(){return u}}}},{}],903:[function(e,v,S){var r=e("d3"),a=e("tinycolor2"),u=e("../../registry"),c=e("../../lib"),t=c.strRotate,f=c.strTranslate,n=e("../../components/color"),o=e("../../components/drawing"),l=e("../plots"),h=e("../../plots/cartesian/axes"),i=e("../cartesian/set_convert"),s=e("./set_convert"),p=e("../cartesian/autorange").doAutoRange,d=e("../cartesian/dragbox"),g=e("../../components/dragelement"),b=e("../../components/fx"),m=e("../../components/titles"),x=e("../cartesian/select").prepSelect,w=e("../cartesian/select").selectOnClick,y=e("../cartesian/select").clearSelect,T=e("../../lib/setcursor"),M=e("../../lib/clear_gl_canvases"),P=e("../../plot_api/subroutines").redrawReglTraces,L=e("../../constants/alignment").MID_SHIFT,I=e("./constants"),E=e("./helpers"),k=c._,C=c.mod,D=c.deg2rad,F=c.rad2deg;function N(j,V){this.id=V,this.gd=j,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var K=j._fullLayout,te="clip"+K._uid+V;this.clipIds.forTraces=te+"-for-traces",this.clipPaths.forTraces=K._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=K._polarlayer.append("g").attr("class",V),this.radialTickLayout=null,this.angularTickLayout=null}var G=N.prototype;v.exports=function(V,K){return new N(V,K)},G.plot=function(j,V){var K=this,te=V[K.id];K._hasClipOnAxisFalse=!1;for(var $=0;$<j.length;$++){var ie=j[$][0].trace;if(ie.cliponaxis===!1){K._hasClipOnAxisFalse=!0;break}}K.updateLayers(V,te),K.updateLayout(V,te),l.generalUpdatePerTraceModule(K.gd,K,j,te),K.updateFx(V,te)},G.updateLayers=function(j,V){var K=this,te=K.layers,$=V.radialaxis,ie=V.angularaxis,se=I.layerNames,Q=se.indexOf("frontplot"),H=se.slice(0,Q),oe=ie.layer==="below traces",re=$.layer==="below traces";oe&&H.push("angular-line"),re&&H.push("radial-line"),oe&&H.push("angular-axis"),re&&H.push("radial-axis"),H.push("frontplot"),oe||H.push("angular-line"),re||H.push("radial-line"),oe||H.push("angular-axis"),re||H.push("radial-axis");var ee=K.framework.selectAll(".polarsublayer").data(H,String);ee.enter().append("g").attr("class",function(ae){return"polarsublayer "+ae}).each(function(ae){var fe=te[ae]=r.select(this);switch(ae){case"frontplot":fe.append("g").classed("barlayer",!0),fe.append("g").classed("scatterlayer",!0);break;case"backplot":fe.append("g").classed("maplayer",!0);break;case"plotbg":te.bg=fe.append("path");break;case"radial-grid":fe.style("fill","none");break;case"angular-grid":fe.style("fill","none");break;case"radial-line":fe.append("line").style("fill","none");break;case"angular-line":fe.append("path").style("fill","none");break}}),ee.order()},G.updateLayout=function(j,V){var K=this,te=K.layers,$=j._size,ie=V.radialaxis,se=V.angularaxis,Q=V.domain.x,H=V.domain.y;K.xOffset=$.l+$.w*Q[0],K.yOffset=$.t+$.h*(1-H[1]);var oe=K.xLength=$.w*(Q[1]-Q[0]),re=K.yLength=$.h*(H[1]-H[0]),ee=V.sector;K.sectorInRad=ee.map(D);var ae=K.sectorBBox=X(ee),fe=ae[2]-ae[0],de=ae[3]-ae[1],pe=re/oe,W=Math.abs(de/fe),ue,me,be,Me,Pe;pe>W?(ue=oe,me=oe*W,Pe=(re-me)/$.h/2,be=[Q[0],Q[1]],Me=[H[0]+Pe,H[1]-Pe]):(ue=re/W,me=re,Pe=(oe-ue)/$.w/2,be=[Q[0]+Pe,Q[1]-Pe],Me=[H[0],H[1]]),K.xLength2=ue,K.yLength2=me,K.xDomain2=be,K.yDomain2=Me;var Ge=K.xOffset2=$.l+$.w*be[0],ze=K.yOffset2=$.t+$.h*(1-Me[1]),Qe=K.radius=ue/fe,tt=K.innerRadius=V.hole*Qe,Ce=K.cx=Ge-Qe*ae[0],Ae=K.cy=ze+Qe*ae[3],Be=K.cxx=Ce-Ge,qe=K.cyy=Ae-ze;K.radialAxis=K.mockAxis(j,V,ie,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[ie.side],_realSide:ie.side,domain:[tt/$.w,Qe/$.w]}),K.angularAxis=K.mockAxis(j,V,se,{side:"right",domain:[0,Math.PI],autorange:!1}),K.doAutoRange(j,V),K.updateAngularAxis(j,V),K.updateRadialAxis(j,V),K.updateRadialAxisTitle(j,V),K.xaxis=K.mockCartesianAxis(j,V,{_id:"x",domain:be}),K.yaxis=K.mockCartesianAxis(j,V,{_id:"y",domain:Me});var Tt=K.pathSubplot();K.clipPaths.forTraces.select("path").attr("d",Tt).attr("transform",f(Be,qe)),te.frontplot.attr("transform",f(Ge,ze)).call(o.setClipUrl,K._hasClipOnAxisFalse?null:K.clipIds.forTraces,K.gd),te.bg.attr("d",Tt).attr("transform",f(Ce,Ae)).call(n.fill,V.bgcolor)},G.mockAxis=function(j,V,K,te){var $=c.extendFlat({},K,te);return s($,V,j),$},G.mockCartesianAxis=function(j,V,K){var te=this,$=K._id,ie=c.extendFlat({type:"linear"},K);i(ie,j);var se={x:[0,2],y:[1,3]};return ie.setRange=function(){var Q=te.sectorBBox,H=se[$],oe=te.radialAxis._rl,re=(oe[1]-oe[0])/(1-V.hole);ie.range=[Q[H[0]]*re,Q[H[1]]*re]},ie.isPtWithinRange=$==="x"?function(Q){return te.isPtInside(Q)}:function(){return!0},ie.setRange(),ie.setScale(),ie},G.doAutoRange=function(j,V){var K=this.gd,te=this.radialAxis,$=V.radialaxis;te.setScale(),p(K,te);var ie=te.range;$.range=ie.slice(),$._input.range=ie.slice(),te._rl=[te.r2l(ie[0],null,"gregorian"),te.r2l(ie[1],null,"gregorian")]},G.updateRadialAxis=function(j,V){var K=this,te=K.gd,$=K.layers,ie=K.radius,se=K.innerRadius,Q=K.cx,H=K.cy,oe=V.radialaxis,re=C(V.sector[0],360),ee=K.radialAxis,ae=se<ie;K.fillViewInitialKey("radialaxis.angle",oe.angle),K.fillViewInitialKey("radialaxis.range",ee.range.slice()),ee.setGeometry(),ee.tickangle==="auto"&&re>90&&re<=270&&(ee.tickangle=180);var fe=function(Ge){return f(ee.l2p(Ge.x)+se,0)},de=function(Ge){return K.pathArc(ee.r2p(Ge.x)+se)},pe=U(oe);if(K.radialTickLayout!==pe&&($["radial-axis"].selectAll(".xtick").remove(),K.radialTickLayout=pe),ae){ee.setScale();var W=h.calcTicks(ee),ue=h.clipEnds(ee,W),me=h.getTickSigns(ee)[2];h.drawTicks(te,ee,{vals:W,layer:$["radial-axis"],path:h.makeTickPath(ee,0,me),transFn:fe,crisp:!1}),h.drawGrid(te,ee,{vals:ue,layer:$["radial-grid"],path:de,transFn:c.noop,crisp:!1}),h.drawLabels(te,ee,{vals:W,layer:$["radial-axis"],transFn:fe,labelFns:h.makeLabelFns(ee,0)})}var be=K.radialAxisAngle=K.vangles?F(z(D(oe.angle),K.vangles)):oe.angle,Me=f(Q,H),Pe=Me+t(-be);B($["radial-axis"],ae&&(oe.showticklabels||oe.ticks),{transform:Pe}),B($["radial-grid"],ae&&oe.showgrid,{transform:Me}),B($["radial-line"].select("line"),ae&&oe.showline,{x1:se,y1:0,x2:ie,y2:0,transform:Pe}).attr("stroke-width",oe.linewidth).call(n.stroke,oe.linecolor)},G.updateRadialAxisTitle=function(j,V,K){var te=this,$=te.gd,ie=te.radius,se=te.cx,Q=te.cy,H=V.radialaxis,oe=te.id+"title",re=K!==void 0?K:te.radialAxisAngle,ee=D(re),ae=Math.cos(ee),fe=Math.sin(ee),de=0;if(H.title){var pe=o.bBox(te.layers["radial-axis"].node()).height,W=H.title.font.size;de=H.side==="counterclockwise"?-pe-W*.4:pe+W*.8}te.layers["radial-axis-title"]=m.draw($,oe,{propContainer:H,propName:te.id+".radialaxis.title",placeholder:k($,"Click to enter radial axis title"),attributes:{x:se+ie/2*ae+de*fe,y:Q-ie/2*fe+de*ae,"text-anchor":"middle"},transform:{rotate:-re}})},G.updateAngularAxis=function(j,V){var K=this,te=K.gd,$=K.layers,ie=K.radius,se=K.innerRadius,Q=K.cx,H=K.cy,oe=V.angularaxis,re=K.angularAxis;K.fillViewInitialKey("angularaxis.rotation",oe.rotation),re.setGeometry(),re.setScale();var ee=function(Qe){return re.t2g(Qe.x)};re.type==="linear"&&re.thetaunit==="radians"&&(re.tick0=F(re.tick0),re.dtick=F(re.dtick));var ae=function(Qe){return f(Q+ie*Math.cos(Qe),H-ie*Math.sin(Qe))},fe=function(Qe){return ae(ee(Qe))},de=function(Qe){var tt=ee(Qe);return ae(tt)+t(-F(tt))},pe=function(Qe){var tt=ee(Qe),Ce=Math.cos(tt),Ae=Math.sin(tt);return"M"+[Q+se*Ce,H-se*Ae]+"L"+[Q+ie*Ce,H-ie*Ae]},W=h.makeLabelFns(re,0),ue=W.labelStandoff,me={};me.xFn=function(Qe){var tt=ee(Qe);return Math.cos(tt)*ue},me.yFn=function(Qe){var tt=ee(Qe),Ce=Math.sin(tt)>0?.2:1;return-Math.sin(tt)*(ue+Qe.fontSize*Ce)+Math.abs(Math.cos(tt))*(Qe.fontSize*L)},me.anchorFn=function(Qe){var tt=ee(Qe),Ce=Math.cos(tt);return Math.abs(Ce)<.1?"middle":Ce>0?"start":"end"},me.heightFn=function(Qe,tt,Ce){var Ae=ee(Qe);return-.5*(1+Math.sin(Ae))*Ce};var be=U(oe);K.angularTickLayout!==be&&($["angular-axis"].selectAll("."+re._id+"tick").remove(),K.angularTickLayout=be);var Me=h.calcTicks(re),Pe;if(V.gridshape==="linear"?(Pe=Me.map(ee),c.angleDelta(Pe[0],Pe[1])<0&&(Pe=Pe.slice().reverse())):Pe=null,K.vangles=Pe,re.type==="category"&&(Me=Me.filter(function(Qe){return c.isAngleInsideSector(ee(Qe),K.sectorInRad)})),re.visible){var Ge=re.ticks==="inside"?-1:1,ze=(re.linewidth||1)/2;h.drawTicks(te,re,{vals:Me,layer:$["angular-axis"],path:"M"+Ge*ze+",0h"+Ge*re.ticklen,transFn:de,crisp:!1}),h.drawGrid(te,re,{vals:Me,layer:$["angular-grid"],path:pe,transFn:c.noop,crisp:!1}),h.drawLabels(te,re,{vals:Me,layer:$["angular-axis"],repositionOnUpdate:!0,transFn:fe,labelFns:me})}B($["angular-line"].select("path"),oe.showline,{d:K.pathSubplot(),transform:f(Q,H)}).attr("stroke-width",oe.linewidth).call(n.stroke,oe.linecolor)},G.updateFx=function(j,V){this.gd._context.staticPlot||(this.updateAngularDrag(j),this.updateRadialDrag(j,V,0),this.updateRadialDrag(j,V,1),this.updateMainDrag(j))},G.updateMainDrag=function(j){var V=this,K=V.gd,te=V.layers,$=j._zoomlayer,ie=I.MINZOOM,se=I.OFFEDGE,Q=V.radius,H=V.innerRadius,oe=V.cx,re=V.cy,ee=V.cxx,ae=V.cyy,fe=V.sectorInRad,de=V.vangles,pe=V.radialAxis,W=E.clampTiny,ue=E.findXYatLength,me=E.findEnclosingVertexAngles,be=I.cornerHalfWidth,Me=I.cornerLen/2,Pe,Ge,ze=d.makeDragger(te,"path","maindrag","crosshair");r.select(ze).attr("d",V.pathSubplot()).attr("transform",f(oe,re));var Qe={element:ze,gd:K,subplot:V.id,plotinfo:{id:V.id,xaxis:V.xaxis,yaxis:V.yaxis},xaxes:[V.xaxis],yaxes:[V.yaxis]},tt,Ce,Ae,Be,qe,Tt,At,Ne,ct;function Mt(Ie,He){return Math.sqrt(Ie*Ie+He*He)}function Wt(Ie,He){return Mt(Ie-ee,He-ae)}function qt(Ie,He){return Math.atan2(ae-He,Ie-ee)}function zt(Ie,He){return[Ie*Math.cos(He),Ie*Math.sin(-He)]}function $t(Ie,He){if(Ie===0)return V.pathSector(2*be);var Ye=Me/Ie,ft=He-Ye,it=He+Ye,je=Math.max(0,Math.min(Ie,Q)),ot=je-be,Je=je+be;return"M"+zt(ot,ft)+"A"+[ot,ot]+" 0,0,0 "+zt(ot,it)+"L"+zt(Je,it)+"A"+[Je,Je]+" 0,0,1 "+zt(Je,ft)+"Z"}function rr(Ie,He,Ye){if(Ie===0)return V.pathSector(2*be);var ft=zt(Ie,He),it=zt(Ie,Ye),je=W((ft[0]+it[0])/2),ot=W((ft[1]+it[1])/2),Je,st;if(je&&ot){var It=ot/je,Nt=-1/It,nr=ue(be,It,je,ot);Je=ue(Me,Nt,nr[0][0],nr[0][1]),st=ue(Me,Nt,nr[1][0],nr[1][1])}else{var We,Fe;ot?(We=Me,Fe=be):(We=be,Fe=Me),Je=[[je-We,ot-Fe],[je+We,ot-Fe]],st=[[je-We,ot+Fe],[je+We,ot+Fe]]}return"M"+Je.join("L")+"L"+st.reverse().join("L")+"Z"}function Lt(){Ae=null,Be=null,qe=V.pathSubplot(),Tt=!1;var Ie=K._fullLayout[V.id];At=a(Ie.bgcolor).getLuminance(),Ne=d.makeZoombox($,At,oe,re,qe),Ne.attr("fill-rule","evenodd"),ct=d.makeCorners($,oe,re),y(K)}function Ct(Ie,He){return He=Math.max(Math.min(He,Q),H),Ie<se?Ie=0:Q-Ie<se?Ie=Q:He<se?He=0:Q-He<se&&(He=Q),Math.abs(He-Ie)>ie?(Ie<He?(Ae=Ie,Be=He):(Ae=He,Be=Ie),!0):(Ae=null,Be=null,!1)}function dt(Ie,He){Ie=Ie||qe,He=He||"M0,0Z",Ne.attr("d",Ie),ct.attr("d",He),d.transitionZoombox(Ne,ct,Tt,At),Tt=!0;var Ye={};et(Ye),K.emit("plotly_relayouting",Ye)}function lt(Ie,He){Ie=Ie*Pe,He=He*Ge;var Ye=tt+Ie,ft=Ce+He,it=Wt(tt,Ce),je=Math.min(Wt(Ye,ft),Q),ot=qt(tt,Ce),Je,st;Ct(it,je)&&(Je=qe+V.pathSector(Be),Ae&&(Je+=V.pathSector(Ae)),st=$t(Ae,ot)+$t(Be,ot)),dt(Je,st)}function Te(Ie,He,Ye,ft){var it=E.findIntersectionXY(Ye,ft,Ye,[Ie-ee,ae-He]);return Mt(it[0],it[1])}function Le(Ie,He){var Ye=tt+Ie,ft=Ce+He,it=qt(tt,Ce),je=qt(Ye,ft),ot=me(it,de),Je=me(je,de),st=Te(tt,Ce,ot[0],ot[1]),It=Math.min(Te(Ye,ft,Je[0],Je[1]),Q),Nt,nr;Ct(st,It)&&(Nt=qe+V.pathSector(Be),Ae&&(Nt+=V.pathSector(Ae)),nr=[rr(Ae,ot[0],ot[1]),rr(Be,ot[0],ot[1])].join(" ")),dt(Nt,nr)}function Ue(){if(d.removeZoombox(K),!(Ae===null||Be===null)){var Ie={};et(Ie),d.showDoubleClickNotifier(K),u.call("_guiRelayout",K,Ie)}}function et(Ie){var He=pe._rl,Ye=(He[1]-He[0])/(1-H/Q)/Q,ft=[He[0]+(Ae-H)*Ye,He[0]+(Be-H)*Ye];Ie[V.id+".radialaxis.range"]=ft}function ke(Ie,He){var Ye=K._fullLayout.clickmode;if(d.removeZoombox(K),Ie===2){var ft={};for(var it in V.viewInitial)ft[V.id+"."+it]=V.viewInitial[it];K.emit("plotly_doubleclick",null),u.call("_guiRelayout",K,ft)}Ye.indexOf("select")>-1&&Ie===1&&w(He,K,[V.xaxis],[V.yaxis],V.id,Qe),Ye.indexOf("event")>-1&&b.click(K,He,V.id)}Qe.prepFn=function(Ie,He,Ye){var ft=K._fullLayout.dragmode,it=ze.getBoundingClientRect();K._fullLayout._calcInverseTransform(K);var je=K._fullLayout._invTransform;Pe=K._fullLayout._invScaleX,Ge=K._fullLayout._invScaleY;var ot=c.apply3DTransform(je)(He-it.left,Ye-it.top);if(tt=ot[0],Ce=ot[1],de){var Je=E.findPolygonOffset(Q,fe[0],fe[1],de);tt+=ee+Je[0],Ce+=ae+Je[1]}switch(ft){case"zoom":de?Qe.moveFn=Le:Qe.moveFn=lt,Qe.clickFn=ke,Qe.doneFn=Ue,Lt();break;case"select":case"lasso":x(Ie,He,Ye,Qe,ft);break}},ze.onmousemove=function(Ie){b.hover(K,Ie,V.id),K._fullLayout._lasthover=ze,K._fullLayout._hoversubplot=V.id},ze.onmouseout=function(Ie){K._dragging||g.unhover(K,Ie)},g.init(Qe)},G.updateRadialDrag=function(j,V,K){var te=this,$=te.gd,ie=te.layers,se=te.radius,Q=te.innerRadius,H=te.cx,oe=te.cy,re=te.radialAxis,ee=I.radialDragBoxSize,ae=ee/2;if(!re.visible)return;var fe=D(te.radialAxisAngle),de=re._rl,pe=de[0],W=de[1],ue=de[K],me=.75*(de[1]-de[0])/(1-V.hole)/se,be,Me,Pe;K?(be=H+(se+ae)*Math.cos(fe),Me=oe-(se+ae)*Math.sin(fe),Pe="radialdrag"):(be=H+(Q-ae)*Math.cos(fe),Me=oe-(Q-ae)*Math.sin(fe),Pe="radialdrag-inner");var Ge=d.makeRectDragger(ie,Pe,"crosshair",-ae,-ae,ee,ee),ze={element:Ge,gd:$};B(r.select(Ge),re.visible&&Q<se,{transform:f(be,Me)});var Qe,tt,Ce;function Ae(Ne,ct){if(Qe)Qe(Ne,ct);else{var Mt=[Ne,-ct],Wt=[Math.cos(fe),Math.sin(fe)],qt=Math.abs(c.dot(Mt,Wt)/Math.sqrt(c.dot(Mt,Mt)));isNaN(qt)||(Qe=qt<.5?Tt:At)}var zt={};Be(zt),$.emit("plotly_relayouting",zt)}function Be(Ne){tt!==null?Ne[te.id+".radialaxis.angle"]=tt:Ce!==null&&(Ne[te.id+".radialaxis.range["+K+"]"]=Ce)}function qe(){tt!==null?u.call("_guiRelayout",$,te.id+".radialaxis.angle",tt):Ce!==null&&u.call("_guiRelayout",$,te.id+".radialaxis.range["+K+"]",Ce)}function Tt(Ne,ct){if(K!==0){var Mt=be+Ne,Wt=Me+ct;tt=Math.atan2(oe-Wt,Mt-H),te.vangles&&(tt=z(tt,te.vangles)),tt=F(tt);var qt=f(H,oe)+t(-tt);ie["radial-axis"].attr("transform",qt),ie["radial-line"].select("line").attr("transform",qt);var zt=te.gd._fullLayout,$t=zt[te.id];te.updateRadialAxisTitle(zt,$t,tt)}}function At(Ne,ct){var Mt=c.dot([Ne,-ct],[Math.cos(fe),Math.sin(fe)]);if(Ce=ue-me*Mt,me>0!=(K?Ce>pe:Ce<W)){Ce=null;return}var Wt=$._fullLayout,qt=Wt[te.id];re.range[K]=Ce,re._rl[K]=Ce,te.updateRadialAxis(Wt,qt),te.xaxis.setRange(),te.xaxis.setScale(),te.yaxis.setRange(),te.yaxis.setScale();var zt=!1;for(var $t in te.traceHash){var rr=te.traceHash[$t],Lt=c.filterVisible(rr),Ct=rr[0][0].trace._module;Ct.plot($,te,Lt,qt),u.traceIs($t,"gl")&&Lt.length&&(zt=!0)}zt&&(M($),P($))}ze.prepFn=function(){Qe=null,tt=null,Ce=null,ze.moveFn=Ae,ze.doneFn=qe,y($)},ze.clampFn=function(Ne,ct){return Math.sqrt(Ne*Ne+ct*ct)<I.MINDRAG&&(Ne=0,ct=0),[Ne,ct]},g.init(ze)},G.updateAngularDrag=function(j){var V=this,K=V.gd,te=V.layers,$=V.radius,ie=V.angularAxis,se=V.cx,Q=V.cy,H=V.cxx,oe=V.cyy,re=I.angularDragBoxSize,ee=d.makeDragger(te,"path","angulardrag","move"),ae={element:ee,gd:K};r.select(ee).attr("d",V.pathAnnulus($,$+re)).attr("transform",f(se,Q)).call(T,"move");function fe(Ce,Ae){return Math.atan2(oe+re-Ae,Ce-H-re)}var de=te.frontplot.select(".scatterlayer").selectAll(".trace"),pe=de.selectAll(".point"),W=de.selectAll(".textpoint"),ue,me,be,Me,Pe,Ge;function ze(Ce,Ae){var Be=V.gd._fullLayout,qe=Be[V.id],Tt=ue+Ce*j._invScaleX,At=me+Ae*j._invScaleY,Ne=fe(Tt,At),ct=F(Ne-Ge);if(Me=be+ct,te.frontplot.attr("transform",f(V.xOffset2,V.yOffset2)+t([-ct,H,oe])),V.vangles){Pe=V.radialAxisAngle+ct;var Mt=f(se,Q)+t(-ct),Wt=f(se,Q)+t(-Pe);te.bg.attr("transform",Mt),te["radial-grid"].attr("transform",Mt),te["radial-axis"].attr("transform",Wt),te["radial-line"].select("line").attr("transform",Wt),V.updateRadialAxisTitle(Be,qe,Pe)}else V.clipPaths.forTraces.select("path").attr("transform",f(H,oe)+t(ct));pe.each(function(){var dt=r.select(this),lt=o.getTranslate(dt);dt.attr("transform",f(lt.x,lt.y)+t([ct]))}),W.each(function(){var dt=r.select(this),lt=dt.select("text"),Te=o.getTranslate(dt);dt.attr("transform",t([ct,lt.attr("x"),lt.attr("y")])+f(Te.x,Te.y))}),ie.rotation=c.modHalf(Me,360),V.updateAngularAxis(Be,qe),V._hasClipOnAxisFalse&&!c.isFullCircle(V.sectorInRad)&&de.call(o.hideOutsideRangePoints,V);var qt=!1;for(var zt in V.traceHash)if(u.traceIs(zt,"gl")){var $t=V.traceHash[zt],rr=c.filterVisible($t),Lt=$t[0][0].trace._module;Lt.plot(K,V,rr,qe),rr.length&&(qt=!0)}qt&&(M(K),P(K));var Ct={};Qe(Ct),K.emit("plotly_relayouting",Ct)}function Qe(Ce){Ce[V.id+".angularaxis.rotation"]=Me,V.vangles&&(Ce[V.id+".radialaxis.angle"]=Pe)}function tt(){W.select("text").attr("transform",null);var Ce={};Qe(Ce),u.call("_guiRelayout",K,Ce)}ae.prepFn=function(Ce,Ae,Be){var qe=j[V.id];be=qe.angularaxis.rotation;var Tt=ee.getBoundingClientRect();ue=Ae-Tt.left,me=Be-Tt.top,K._fullLayout._calcInverseTransform(K);var At=c.apply3DTransform(j._invTransform)(ue,me);ue=At[0],me=At[1],Ge=fe(ue,me),ae.moveFn=ze,ae.doneFn=tt,y(K)},V.vangles&&!c.isFullCircle(V.sectorInRad)&&(ae.prepFn=c.noop,T(r.select(ee),null)),g.init(ae)},G.isPtInside=function(j){var V=this.sectorInRad,K=this.vangles,te=this.angularAxis.c2g(j.theta),$=this.radialAxis,ie=$.c2l(j.r),se=$._rl,Q=K?E.isPtInsidePolygon:c.isPtInsideSector;return Q(ie,te,se,V,K)},G.pathArc=function(j){var V=this.sectorInRad,K=this.vangles,te=K?E.pathPolygon:c.pathArc;return te(j,V[0],V[1],K)},G.pathSector=function(j){var V=this.sectorInRad,K=this.vangles,te=K?E.pathPolygon:c.pathSector;return te(j,V[0],V[1],K)},G.pathAnnulus=function(j,V){var K=this.sectorInRad,te=this.vangles,$=te?E.pathPolygonAnnulus:c.pathAnnulus;return $(j,V,K[0],K[1],te)},G.pathSubplot=function(){var j=this.innerRadius,V=this.radius;return j?this.pathAnnulus(j,V):this.pathSector(V)},G.fillViewInitialKey=function(j,V){j in this.viewInitial||(this.viewInitial[j]=V)};function U(j){var V=j.ticks+String(j.ticklen)+String(j.showticklabels);return"side"in j&&(V+=j.side),V}function X(j){var V=j[0],K=j[1],te=K-V,$=C(V,360),ie=$+te,se=Math.cos(D($)),Q=Math.sin(D($)),H=Math.cos(D(ie)),oe=Math.sin(D(ie)),re,ee,ae,fe;return $<=90&&ie>=90||$>90&&ie>=450?fe=1:Q<=0&&oe<=0?fe=0:fe=Math.max(Q,oe),$<=180&&ie>=180||$>180&&ie>=540?re=-1:se>=0&&H>=0?re=0:re=Math.min(se,H),$<=270&&ie>=270||$>270&&ie>=630?ee=-1:Q>=0&&oe>=0?ee=0:ee=Math.min(Q,oe),ie>=360?ae=1:se<=0&&H<=0?ae=0:ae=Math.max(se,H),[re,ee,ae,fe]}function z(j,V){var K=function($){return c.angleDist(j,$)},te=c.findIndexOfMin(V,K);return V[te]}function B(j,V,K){return V?(j.attr("display",null),j.attr(K)):j&&j.attr("display","none"),j}},{"../../components/color":643,"../../components/dragelement":662,"../../components/drawing":665,"../../components/fx":683,"../../components/titles":738,"../../constants/alignment":745,"../../lib":778,"../../lib/clear_gl_canvases":762,"../../lib/setcursor":799,"../../plot_api/subroutines":818,"../../plots/cartesian/axes":828,"../../registry":911,"../cartesian/autorange":827,"../cartesian/dragbox":836,"../cartesian/select":847,"../cartesian/set_convert":848,"../plots":891,"./constants":892,"./helpers":893,"./set_convert":904,d3:169,tinycolor2:576}],904:[function(e,v,S){var r=e("../../lib"),a=e("../cartesian/set_convert"),u=r.deg2rad,c=r.rad2deg;v.exports=function(h,i,s){switch(a(h,s),h._id){case"x":case"radialaxis":t(h,i);break;case"angularaxis":o(h,i);break}};function t(l,h){var i=h._subplot;l.setGeometry=function(){var s=l._rl[0],p=l._rl[1],d=i.innerRadius,g=(i.radius-d)/(p-s),b=d/g,m=s>p?function(x){return x<=0}:function(x){return x>=0};l.c2g=function(x){var w=l.c2l(x)-s;return(m(w)?w:0)+b},l.g2c=function(x){return l.l2c(x+s-b)},l.g2p=function(x){return x*g},l.c2p=function(x){return l.g2p(l.c2g(x))}}}function f(l,h){return h==="degrees"?u(l):l}function n(l,h){return h==="degrees"?c(l):l}function o(l,h){var i=l.type;if(i==="linear"){var s=l.d2c,p=l.c2d;l.d2c=function(d,g){return f(s(d),g)},l.c2d=function(d,g){return p(n(d,g))}}l.makeCalcdata=function(d,g){var b=d[g],m=d._length,x,w,y=function(I){return l.d2c(I,d.thetaunit)};if(b){if(r.isTypedArray(b)&&i==="linear"){if(m===b.length)return b;if(b.subarray)return b.subarray(0,m)}for(x=new Array(m),w=0;w<m;w++)x[w]=y(b[w])}else{var T=g+"0",M="d"+g,P=T in d?y(d[T]):0,L=d[M]?y(d[M]):(l.period||2*Math.PI)/m;for(x=new Array(m),w=0;w<m;w++)x[w]=P+w*L}return x},l.setGeometry=function(){var d=h.sector,g=d.map(u),b={clockwise:-1,counterclockwise:1}[l.direction],m=u(l.rotation),x=function(E){return b*E+m},w=function(E){return(E-m)/b},y,T,M,P;switch(i){case"linear":T=y=r.identity,P=u,M=c,l.range=r.isFullCircle(g)?[d[0],d[0]+360]:g.map(w).map(c);break;case"category":var L=l._categories.length,I=l.period?Math.max(l.period,L):L;I===0&&(I=1),T=P=function(E){return E*2*Math.PI/I},y=M=function(E){return E*I/Math.PI/2},l.range=[0,I];break}l.c2g=function(E){return x(T(E))},l.g2c=function(E){return y(w(E))},l.t2g=function(E){return x(P(E))},l.g2t=function(E){return M(w(E))}}}},{"../../lib":778,"../cartesian/set_convert":848}],905:[function(e,v,S){var r=e("../lib"),a=e("../plot_api/plot_template"),u=e("./domain").defaults;v.exports=function(t,f,n,o){var l=o.type,h=o.attributes,i=o.handleDefaults,s=o.partition||"x",p=f._subplots[l],d=p.length,g=d&&p[0].replace(/\d+$/,""),b,m;function x(M,P){return r.coerce(b,m,h,M,P)}for(var w=0;w<d;w++){var y=p[w];t[y]?b=t[y]:b=t[y]={},m=a.newContainer(f,y,g),x("uirevision",f.uirevision);var T={};T[s]=[w/d,(w+1)/d],u(m,f,x,T),o.id=y,i(b,m,x,o)}}},{"../lib":778,"../plot_api/plot_template":817,"./domain":855}],906:[function(e,v,S){e("../constants/docs").FORMAT_LINK,e("../constants/docs").DATE_FORMAT_LINK;function r(a){var u=a.description?" "+a.description:"",c=a.keys||[];if(c.length>0){for(var t=[],f=0;f<c.length;f++)t[f]="`"+c[f]+"`";u=u+"Finally, the template string has access to ",c.length===1?u="variable "+t[0]:u="variables "+t.slice(0,-1).join(", ")+" and "+t.slice(-1)+"."}return u}S.hovertemplateAttrs=function(a,u){a=a||{},u=u||{},r(u);var c={valType:"string",dflt:"",editType:a.editType||"none"};return a.arrayOk!==!1&&(c.arrayOk=!0),c},S.texttemplateAttrs=function(a,u){a=a||{},u=u||{},r(u);var c={valType:"string",dflt:"",editType:a.editType||"calc"};return a.arrayOk!==!1&&(c.arrayOk=!0),c}},{"../constants/docs":748}],907:[function(e,v,S){var r=e("./ternary"),a=e("../../plots/get_data").getSubplotCalcData,u=e("../../lib").counterRegex,c="ternary";S.name=c;var t=S.attr="subplot";S.idRoot=c,S.idRegex=S.attrRegex=u(c);var f=S.attributes={};f[t]={valType:"subplotid",dflt:"ternary",editType:"calc"},S.layoutAttributes=e("./layout_attributes"),S.supplyLayoutDefaults=e("./layout_defaults"),S.plot=function(o){for(var l=o._fullLayout,h=o.calcdata,i=l._subplots[c],s=0;s<i.length;s++){var p=i[s],d=a(h,c,p),g=l[p]._subplot;g||(g=new r({id:p,graphDiv:o,container:l._ternarylayer.node()},l),l[p]._subplot=g),g.plot(d,l,o._promises)}},S.clean=function(n,o,l,h){for(var i=h._subplots[c]||[],s=0;s<i.length;s++){var p=i[s],d=h[p]._subplot;!o[p]&&!!d&&(d.plotContainer.remove(),d.clipDef.remove(),d.clipDefRelative.remove(),d.layers["a-title"].remove(),d.layers["b-title"].remove(),d.layers["c-title"].remove())}}},{"../../lib":778,"../../plots/get_data":865,"./layout_attributes":908,"./layout_defaults":909,"./ternary":910}],908:[function(e,v,S){var r=e("../../components/color/attributes"),a=e("../domain").attributes,u=e("../cartesian/layout_attributes"),c=e("../../plot_api/edit_types").overrideAll,t=e("../../lib/extend").extendFlat,f={title:{text:u.title.text,font:u.title.font},color:u.color,tickmode:u.tickmode,nticks:t({},u.nticks,{dflt:6,min:1}),tick0:u.tick0,dtick:u.dtick,tickvals:u.tickvals,ticktext:u.ticktext,ticks:u.ticks,ticklen:u.ticklen,tickwidth:u.tickwidth,tickcolor:u.tickcolor,showticklabels:u.showticklabels,showtickprefix:u.showtickprefix,tickprefix:u.tickprefix,showticksuffix:u.showticksuffix,ticksuffix:u.ticksuffix,showexponent:u.showexponent,exponentformat:u.exponentformat,minexponent:u.minexponent,separatethousands:u.separatethousands,tickfont:u.tickfont,tickangle:u.tickangle,tickformat:u.tickformat,tickformatstops:u.tickformatstops,hoverformat:u.hoverformat,showline:t({},u.showline,{dflt:!0}),linecolor:u.linecolor,linewidth:u.linewidth,showgrid:t({},u.showgrid,{dflt:!0}),gridcolor:u.gridcolor,gridwidth:u.gridwidth,layer:u.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:u._deprecated.title,titlefont:u._deprecated.titlefont}},n=v.exports=c({domain:a({name:"ternary"}),bgcolor:{valType:"color",dflt:r.background},sum:{valType:"number",dflt:1,min:0},aaxis:f,baxis:f,caxis:f},"plot","from-root");n.uirevision={valType:"any",editType:"none"},n.aaxis.uirevision=n.baxis.uirevision=n.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":642,"../../lib/extend":768,"../../plot_api/edit_types":810,"../cartesian/layout_attributes":842,"../domain":855}],909:[function(e,v,S){var r=e("../../components/color"),a=e("../../plot_api/plot_template"),u=e("../../lib"),c=e("../subplot_defaults"),t=e("../cartesian/tick_label_defaults"),f=e("../cartesian/tick_mark_defaults"),n=e("../cartesian/tick_value_defaults"),o=e("../cartesian/line_grid_defaults"),l=e("./layout_attributes"),h=["aaxis","baxis","caxis"];v.exports=function(d,g,b){c(d,g,b,{type:"ternary",attributes:l,handleDefaults:i,font:g.font,paper_bgcolor:g.paper_bgcolor})};function i(p,d,g,b){var m=g("bgcolor"),x=g("sum");b.bgColor=r.combine(m,b.paper_bgcolor);for(var w,y,T,M=0;M<h.length;M++)w=h[M],y=p[w]||{},T=a.newContainer(d,w),T._name=w,s(y,T,b,d);var P=d.aaxis,L=d.baxis,I=d.caxis;P.min+L.min+I.min>=x&&(P.min=0,L.min=0,I.min=0,p.aaxis&&delete p.aaxis.min,p.baxis&&delete p.baxis.min,p.caxis&&delete p.caxis.min)}function s(p,d,g,b){var m=l[d._name];function x(E,k){return u.coerce(p,d,m,E,k)}x("uirevision",b.uirevision),d.type="linear";var w=x("color"),y=w!==m.color.dflt?w:g.font.color,T=d._name,M=T.charAt(0).toUpperCase(),P="Component "+M,L=x("title.text",P);d._hovertitle=L===P?L:M,u.coerceFont(x,"title.font",{family:g.font.family,size:Math.round(g.font.size*1.2),color:y}),x("min"),n(p,d,x,"linear"),t(p,d,x,"linear",{}),f(p,d,x,{outerTicks:!0});var I=x("showticklabels");I&&(u.coerceFont(x,"tickfont",{family:g.font.family,size:g.font.size,color:y}),x("tickangle"),x("tickformat")),o(p,d,x,{dfltColor:w,bgColor:g.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:m}),x("hoverformat"),x("layer")}},{"../../components/color":643,"../../lib":778,"../../plot_api/plot_template":817,"../cartesian/line_grid_defaults":844,"../cartesian/tick_label_defaults":849,"../cartesian/tick_mark_defaults":850,"../cartesian/tick_value_defaults":851,"../subplot_defaults":905,"./layout_attributes":908}],910:[function(e,v,S){var r=e("d3"),a=e("tinycolor2"),u=e("../../registry"),c=e("../../lib"),t=c.strTranslate,f=c._,n=e("../../components/color"),o=e("../../components/drawing"),l=e("../cartesian/set_convert"),h=e("../../lib/extend").extendFlat,i=e("../plots"),s=e("../cartesian/axes"),p=e("../../components/dragelement"),d=e("../../components/fx"),g=e("../../components/dragelement/helpers"),b=g.freeMode,m=g.rectMode,x=e("../../components/titles"),w=e("../cartesian/select").prepSelect,y=e("../cartesian/select").selectOnClick,T=e("../cartesian/select").clearSelect,M=e("../cartesian/select").clearSelectionsCache,P=e("../cartesian/constants");function L(z,B){this.id=z.id,this.graphDiv=z.graphDiv,this.init(B),this.makeFramework(B),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}v.exports=L;var I=L.prototype;I.init=function(z){this.container=z._ternarylayer,this.defs=z._defs,this.layoutId=z._uid,this.traceHash={},this.layers={}},I.plot=function(z,B){var j=this,V=B[j.id],K=B._size;j._hasClipOnAxisFalse=!1;for(var te=0;te<z.length;te++){var $=z[te][0].trace;if($.cliponaxis===!1){j._hasClipOnAxisFalse=!0;break}}j.updateLayers(V),j.adjustLayout(V,K),i.generalUpdatePerTraceModule(j.graphDiv,j,z,V),j.layers.plotbg.select("path").call(n.fill,V.bgcolor)},I.makeFramework=function(z){var B=this,j=B.graphDiv,V=z[B.id],K=B.clipId="clip"+B.layoutId+B.id,te=B.clipIdRelative="clip-relative"+B.layoutId+B.id;B.clipDef=c.ensureSingleById(z._clips,"clipPath",K,function($){$.append("path").attr("d","M0,0Z")}),B.clipDefRelative=c.ensureSingleById(z._clips,"clipPath",te,function($){$.append("path").attr("d","M0,0Z")}),B.plotContainer=c.ensureSingle(B.container,"g",B.id),B.updateLayers(V),o.setClipUrl(B.layers.backplot,K,j),o.setClipUrl(B.layers.grids,K,j)},I.updateLayers=function(z){var B=this,j=B.layers,V=["draglayer","plotbg","backplot","grids"];z.aaxis.layer==="below traces"&&V.push("aaxis","aline"),z.baxis.layer==="below traces"&&V.push("baxis","bline"),z.caxis.layer==="below traces"&&V.push("caxis","cline"),V.push("frontplot"),z.aaxis.layer==="above traces"&&V.push("aaxis","aline"),z.baxis.layer==="above traces"&&V.push("baxis","bline"),z.caxis.layer==="above traces"&&V.push("caxis","cline");var K=B.plotContainer.selectAll("g.toplevel").data(V,String),te=["agrid","bgrid","cgrid"];K.enter().append("g").attr("class",function($){return"toplevel "+$}).each(function($){var ie=r.select(this);j[$]=ie,$==="frontplot"?ie.append("g").classed("scatterlayer",!0):$==="backplot"?ie.append("g").classed("maplayer",!0):$==="plotbg"?ie.append("path").attr("d","M0,0Z"):$==="aline"||$==="bline"||$==="cline"?ie.append("path"):$==="grids"&&te.forEach(function(se){j[se]=ie.append("g").classed("grid "+se,!0)})}),K.order()};var E=Math.sqrt(4/3);I.adjustLayout=function(z,B){var j=this,V=z.domain,K=(V.x[0]+V.x[1])/2,te=(V.y[0]+V.y[1])/2,$=V.x[1]-V.x[0],ie=V.y[1]-V.y[0],se=$*B.w,Q=ie*B.h,H=z.sum,oe=z.aaxis.min,re=z.baxis.min,ee=z.caxis.min,ae,fe,de,pe,W,ue;se>E*Q?(pe=Q,de=pe*E):(de=se,pe=de/E),W=$*de/se,ue=ie*pe/Q,ae=B.l+B.w*K-de/2,fe=B.t+B.h*(1-te)-pe/2,j.x0=ae,j.y0=fe,j.w=de,j.h=pe,j.sum=H,j.xaxis={type:"linear",range:[oe+2*ee-H,H-oe-2*re],domain:[K-W/2,K+W/2],_id:"x"},l(j.xaxis,j.graphDiv._fullLayout),j.xaxis.setScale(),j.xaxis.isPtWithinRange=function(Be){return Be.a>=j.aaxis.range[0]&&Be.a<=j.aaxis.range[1]&&Be.b>=j.baxis.range[1]&&Be.b<=j.baxis.range[0]&&Be.c>=j.caxis.range[1]&&Be.c<=j.caxis.range[0]},j.yaxis={type:"linear",range:[oe,H-re-ee],domain:[te-ue/2,te+ue/2],_id:"y"},l(j.yaxis,j.graphDiv._fullLayout),j.yaxis.setScale(),j.yaxis.isPtWithinRange=function(){return!0};var me=j.yaxis.domain[0],be=j.aaxis=h({},z.aaxis,{range:[oe,H-re-ee],side:"left",tickangle:(+z.aaxis.tickangle||0)-30,domain:[me,me+ue*E],anchor:"free",position:0,_id:"y",_length:de});l(be,j.graphDiv._fullLayout),be.setScale();var Me=j.baxis=h({},z.baxis,{range:[H-oe-ee,re],side:"bottom",domain:j.xaxis.domain,anchor:"free",position:0,_id:"x",_length:de});l(Me,j.graphDiv._fullLayout),Me.setScale();var Pe=j.caxis=h({},z.caxis,{range:[H-oe-re,ee],side:"right",tickangle:(+z.caxis.tickangle||0)+30,domain:[me,me+ue*E],anchor:"free",position:0,_id:"y",_length:de});l(Pe,j.graphDiv._fullLayout),Pe.setScale();var Ge="M"+ae+","+(fe+pe)+"h"+de+"l-"+de/2+",-"+pe+"Z";j.clipDef.select("path").attr("d",Ge),j.layers.plotbg.select("path").attr("d",Ge);var ze="M0,"+pe+"h"+de+"l-"+de/2+",-"+pe+"Z";j.clipDefRelative.select("path").attr("d",ze);var Qe=t(ae,fe);j.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Qe),j.clipDefRelative.select("path").attr("transform",null);var tt=t(ae-Me._offset,fe+pe);j.layers.baxis.attr("transform",tt),j.layers.bgrid.attr("transform",tt);var Ce=t(ae+de/2,fe)+"rotate(30)"+t(0,-be._offset);j.layers.aaxis.attr("transform",Ce),j.layers.agrid.attr("transform",Ce);var Ae=t(ae+de/2,fe)+"rotate(-30)"+t(0,-Pe._offset);j.layers.caxis.attr("transform",Ae),j.layers.cgrid.attr("transform",Ae),j.drawAxes(!0),j.layers.aline.select("path").attr("d",be.showline?"M"+ae+","+(fe+pe)+"l"+de/2+",-"+pe:"M0,0").call(n.stroke,be.linecolor||"#000").style("stroke-width",(be.linewidth||0)+"px"),j.layers.bline.select("path").attr("d",Me.showline?"M"+ae+","+(fe+pe)+"h"+de:"M0,0").call(n.stroke,Me.linecolor||"#000").style("stroke-width",(Me.linewidth||0)+"px"),j.layers.cline.select("path").attr("d",Pe.showline?"M"+(ae+de/2)+","+fe+"l"+de/2+","+pe:"M0,0").call(n.stroke,Pe.linecolor||"#000").style("stroke-width",(Pe.linewidth||0)+"px"),j.graphDiv._context.staticPlot||j.initInteractions(),o.setClipUrl(j.layers.frontplot,j._hasClipOnAxisFalse?null:j.clipId,j.graphDiv)},I.drawAxes=function(z){var B=this,j=B.graphDiv,V=B.id.substr(7)+"title",K=B.layers,te=B.aaxis,$=B.baxis,ie=B.caxis;if(B.drawAx(te),B.drawAx($),B.drawAx(ie),z){var se=Math.max(te.showticklabels?te.tickfont.size/2:0,(ie.showticklabels?ie.tickfont.size*.75:0)+(ie.ticks==="outside"?ie.ticklen*.87:0)),Q=($.showticklabels?$.tickfont.size:0)+($.ticks==="outside"?$.ticklen:0)+3;K["a-title"]=x.draw(j,"a"+V,{propContainer:te,propName:B.id+".aaxis.title",placeholder:f(j,"Click to enter Component A title"),attributes:{x:B.x0+B.w/2,y:B.y0-te.title.font.size/3-se,"text-anchor":"middle"}}),K["b-title"]=x.draw(j,"b"+V,{propContainer:$,propName:B.id+".baxis.title",placeholder:f(j,"Click to enter Component B title"),attributes:{x:B.x0-Q,y:B.y0+B.h+$.title.font.size*.83+Q,"text-anchor":"middle"}}),K["c-title"]=x.draw(j,"c"+V,{propContainer:ie,propName:B.id+".caxis.title",placeholder:f(j,"Click to enter Component C title"),attributes:{x:B.x0+B.w+Q,y:B.y0+B.h+ie.title.font.size*.83+Q,"text-anchor":"middle"}})}},I.drawAx=function(z){var B=this,j=B.graphDiv,V=z._name,K=V.charAt(0),te=z._id,$=B.layers[V],ie=30,se=K+"tickLayout",Q=k(z);B[se]!==Q&&($.selectAll("."+te+"tick").remove(),B[se]=Q),z.setScale();var H=s.calcTicks(z),oe=s.clipEnds(z,H),re=s.makeTransTickFn(z),ee=s.getTickSigns(z)[2],ae=c.deg2rad(ie),fe=ee*(z.linewidth||1)/2,de=ee*z.ticklen,pe=B.w,W=B.h,ue=K==="b"?"M0,"+fe+"l"+Math.sin(ae)*de+","+Math.cos(ae)*de:"M"+fe+",0l"+Math.cos(ae)*de+","+-Math.sin(ae)*de,me={a:"M0,0l"+W+",-"+pe/2,b:"M0,0l-"+pe/2+",-"+W,c:"M0,0l-"+W+","+pe/2}[K];s.drawTicks(j,z,{vals:z.ticks==="inside"?oe:H,layer:$,path:ue,transFn:re,crisp:!1}),s.drawGrid(j,z,{vals:oe,layer:B.layers[K+"grid"],path:me,transFn:re,crisp:!1}),s.drawLabels(j,z,{vals:H,layer:$,transFn:re,labelFns:s.makeLabelFns(z,0,ie)})};function k(z){return z.ticks+String(z.ticklen)+String(z.showticklabels)}var C=P.MINZOOM/2+.87,D="m-0.87,.5h"+C+"v3h-"+(C+5.2)+"l"+(C/2+2.6)+",-"+(C*.87+4.5)+"l2.6,1.5l-"+C/2+","+C*.87+"Z",F="m0.87,.5h-"+C+"v3h"+(C+5.2)+"l-"+(C/2+2.6)+",-"+(C*.87+4.5)+"l-2.6,1.5l"+C/2+","+C*.87+"Z",N="m0,1l"+C/2+","+C*.87+"l2.6,-1.5l-"+(C/2+2.6)+",-"+(C*.87+4.5)+"l-"+(C/2+2.6)+","+(C*.87+4.5)+"l2.6,1.5l"+C/2+",-"+C*.87+"Z",G="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",U=!0;I.clearSelect=function(){M(this.dragOptions),T(this.dragOptions.gd)},I.initInteractions=function(){var z=this,B=z.layers.plotbg.select("path").node(),j=z.graphDiv,V=j._fullLayout._zoomlayer,K,te;this.dragOptions={element:B,gd:j,plotinfo:{id:z.id,domain:j._fullLayout[z.id].domain,xaxis:z.xaxis,yaxis:z.yaxis},subplot:z.id,prepFn:function(tt,Ce,Ae){z.dragOptions.xaxes=[z.xaxis],z.dragOptions.yaxes=[z.yaxis],K=j._fullLayout._invScaleX,te=j._fullLayout._invScaleY;var Be=z.dragOptions.dragmode=j._fullLayout.dragmode;b(Be)?z.dragOptions.minDrag=1:z.dragOptions.minDrag=void 0,Be==="zoom"?(z.dragOptions.moveFn=Me,z.dragOptions.clickFn=pe,z.dragOptions.doneFn=Pe,W(tt,Ce,Ae)):Be==="pan"?(z.dragOptions.moveFn=ze,z.dragOptions.clickFn=pe,z.dragOptions.doneFn=Qe,Ge(),z.clearSelect(j)):(m(Be)||b(Be))&&w(tt,Ce,Ae,z.dragOptions,Be)}};var $,ie,se,Q,H,oe,re,ee,ae,fe;function de(tt){var Ce={};return Ce[z.id+".aaxis.min"]=tt.a,Ce[z.id+".baxis.min"]=tt.b,Ce[z.id+".caxis.min"]=tt.c,Ce}function pe(tt,Ce){var Ae=j._fullLayout.clickmode;X(j),tt===2&&(j.emit("plotly_doubleclick",null),u.call("_guiRelayout",j,de({a:0,b:0,c:0}))),Ae.indexOf("select")>-1&&tt===1&&y(Ce,j,[z.xaxis],[z.yaxis],z.id,z.dragOptions),Ae.indexOf("event")>-1&&d.click(j,Ce,z.id)}function W(tt,Ce,Ae){var Be=B.getBoundingClientRect();$=Ce-Be.left,ie=Ae-Be.top,j._fullLayout._calcInverseTransform(j);var qe=j._fullLayout._invTransform,Tt=c.apply3DTransform(qe)($,ie);$=Tt[0],ie=Tt[1],se={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},H=se,Q=z.aaxis.range[1]-se.a,oe=a(z.graphDiv._fullLayout[z.id].bgcolor).getLuminance(),re="M0,"+z.h+"L"+z.w/2+", 0L"+z.w+","+z.h+"Z",ee=!1,ae=V.append("path").attr("class","zoombox").attr("transform",t(z.x0,z.y0)).style({fill:oe>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",re),fe=V.append("path").attr("class","zoombox-corners").attr("transform",t(z.x0,z.y0)).style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),z.clearSelect(j)}function ue(tt,Ce){return 1-Ce/z.h}function me(tt,Ce){return 1-(tt+(z.h-Ce)/Math.sqrt(3))/z.w}function be(tt,Ce){return(tt-(z.h-Ce)/Math.sqrt(3))/z.w}function Me(tt,Ce){var Ae=$+tt*K,Be=ie+Ce*te,qe=Math.max(0,Math.min(1,ue($,ie),ue(Ae,Be))),Tt=Math.max(0,Math.min(1,me($,ie),me(Ae,Be))),At=Math.max(0,Math.min(1,be($,ie),be(Ae,Be))),Ne=(qe/2+At)*z.w,ct=(1-qe/2-Tt)*z.w,Mt=(Ne+ct)/2,Wt=ct-Ne,qt=(1-qe)*z.h,zt=qt-Wt/E;Wt<P.MINZOOM?(H=se,ae.attr("d",re),fe.attr("d","M0,0Z")):(H={a:se.a+qe*Q,b:se.b+Tt*Q,c:se.c+At*Q},ae.attr("d",re+"M"+Ne+","+qt+"H"+ct+"L"+Mt+","+zt+"L"+Ne+","+qt+"Z"),fe.attr("d","M"+$+","+ie+G+"M"+Ne+","+qt+D+"M"+ct+","+qt+F+"M"+Mt+","+zt+N)),ee||(ae.transition().style("fill",oe>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),fe.transition().style("opacity",1).duration(200),ee=!0),j.emit("plotly_relayouting",de(H))}function Pe(){X(j),H!==se&&(u.call("_guiRelayout",j,de(H)),U&&j.data&&j._context.showTips&&(c.notifier(f(j,"Double-click to zoom back out"),"long"),U=!1))}function Ge(){se={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},H=se}function ze(tt,Ce){var Ae=tt/z.xaxis._m,Be=Ce/z.yaxis._m;H={a:se.a-Be,b:se.b+(Ae+Be)/2,c:se.c-(Ae-Be)/2};var qe=[H.a,H.b,H.c].sort(c.sorterAsc),Tt={a:qe.indexOf(H.a),b:qe.indexOf(H.b),c:qe.indexOf(H.c)};qe[0]<0&&(qe[1]+qe[0]/2<0?(qe[2]+=qe[0]+qe[1],qe[0]=qe[1]=0):(qe[2]+=qe[0]/2,qe[1]+=qe[0]/2,qe[0]=0),H={a:qe[Tt.a],b:qe[Tt.b],c:qe[Tt.c]},Ce=(se.a-H.a)*z.yaxis._m,tt=(se.c-H.c-se.b+H.b)*z.xaxis._m);var At=t(z.x0+tt,z.y0+Ce);z.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",At);var Ne=t(-tt,-Ce);z.clipDefRelative.select("path").attr("transform",Ne),z.aaxis.range=[H.a,z.sum-H.b-H.c],z.baxis.range=[z.sum-H.a-H.c,H.b],z.caxis.range=[z.sum-H.a-H.b,H.c],z.drawAxes(!1),z._hasClipOnAxisFalse&&z.plotContainer.select(".scatterlayer").selectAll(".trace").call(o.hideOutsideRangePoints,z),j.emit("plotly_relayouting",de(H))}function Qe(){u.call("_guiRelayout",j,de(H))}B.onmousemove=function(tt){d.hover(j,tt,z.id),j._fullLayout._lasthover=B,j._fullLayout._hoversubplot=z.id},B.onmouseout=function(tt){j._dragging||p.unhover(j,tt)},p.init(this.dragOptions)};function X(z){r.select(z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":643,"../../components/dragelement":662,"../../components/dragelement/helpers":661,"../../components/drawing":665,"../../components/fx":683,"../../components/titles":738,"../../lib":778,"../../lib/extend":768,"../../registry":911,"../cartesian/axes":828,"../cartesian/constants":834,"../cartesian/select":847,"../cartesian/set_convert":848,"../plots":891,d3:169,tinycolor2:576}],911:[function(e,v,S){var r=e("./lib/loggers"),a=e("./lib/noop"),u=e("./lib/push_unique"),c=e("./lib/is_plain_object"),t=e("./lib/dom").addStyleRule,f=e("./lib/extend"),n=e("./plots/attributes"),o=e("./plots/layout_attributes"),l=f.extendFlat,h=f.extendDeepAll;S.modules={},S.allCategories={},S.allTypes=[],S.subplotsRegistry={},S.transformsRegistry={},S.componentsRegistry={},S.layoutArrayContainers=[],S.layoutArrayRegexes=[],S.traceLayoutAttributes={},S.localeRegistry={},S.apiMethodRegistry={},S.collectableSubplotTypes=null,S.register=function(M){if(S.collectableSubplotTypes=null,M)M&&!Array.isArray(M)&&(M=[M]);else throw new Error("No argument passed to Plotly.register.");for(var P=0;P<M.length;P++){var L=M[P];if(!L)throw new Error("Invalid module was attempted to be registered!");switch(L.moduleType){case"trace":i(L);break;case"transform":d(L);break;case"component":p(L);break;case"locale":g(L);break;case"apiMethod":var I=L.name;S.apiMethodRegistry[I]=L.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},S.getModule=function(T){var M=S.modules[y(T)];return M?M._module:!1},S.traceIs=function(T,M){if(T=y(T),T==="various")return!1;var P=S.modules[T];return P||(T&&T!=="area"&&r.log("Unrecognized trace type "+T+"."),P=S.modules[n.type.dflt]),!!P.categories[M]},S.getTransformIndices=function(T,M){for(var P=[],L=T.transforms||[],I=0;I<L.length;I++)L[I].type===M&&P.push(I);return P},S.hasTransform=function(T,M){for(var P=T.transforms||[],L=0;L<P.length;L++)if(P[L].type===M)return!0;return!1},S.getComponentMethod=function(T,M){var P=S.componentsRegistry[T];return P&&P[M]||a},S.call=function(){var T=arguments[0],M=[].slice.call(arguments,1);return S.apiMethodRegistry[T].apply(null,M)};function i(T){var M=T.name,P=T.categories,L=T.meta;if(S.modules[M]){r.log("Type "+M+" already registered");return}S.subplotsRegistry[T.basePlotModule.name]||s(T.basePlotModule);for(var I={},E=0;E<P.length;E++)I[P[E]]=!0,S.allCategories[P[E]]=!0;S.modules[M]={_module:T,categories:I},L&&Object.keys(L).length&&(S.modules[M].meta=L),S.allTypes.push(M);for(var k in S.componentsRegistry)m(k,M);T.layoutAttributes&&l(S.traceLayoutAttributes,T.layoutAttributes);var C=T.basePlotModule,D=C.name;if(D==="mapbox"){var F=C.constants.styleRules;for(var N in F)t(".js-plotly-plot .plotly .mapboxgl-"+N,F[N])}(D==="geo"||D==="mapbox")&&typeof window!==void 0&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function s(T){var M=T.name;if(S.subplotsRegistry[M]){r.log("Plot type "+M+" already registered.");return}b(T),S.subplotsRegistry[M]=T;for(var P in S.componentsRegistry)w(P,T.name)}function p(T){if(typeof T.name!="string")throw new Error("Component module *name* must be a string.");var M=T.name;S.componentsRegistry[M]=T,T.layoutAttributes&&(T.layoutAttributes._isLinkedToArray&&u(S.layoutArrayContainers,M),b(T));for(var P in S.modules)m(M,P);for(var L in S.subplotsRegistry)w(M,L);for(var I in S.transformsRegistry)x(M,I);T.schema&&T.schema.layout&&h(o,T.schema.layout)}function d(T){if(typeof T.name!="string")throw new Error("Transform module *name* must be a string.");var M="Transform module "+T.name,P=typeof T.transform=="function",L=typeof T.calcTransform=="function";if(!P&&!L)throw new Error(M+" is missing a *transform* or *calcTransform* method.");P&&L&&r.log([M+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),c(T.attributes)||r.log(M+" registered without an *attributes* object."),typeof T.supplyDefaults!="function"&&r.log(M+" registered without a *supplyDefaults* method."),S.transformsRegistry[T.name]=T;for(var I in S.componentsRegistry)x(I,T.name)}function g(T){var M=T.name,P=M.split("-")[0],L=T.dictionary,I=T.format,E=L&&Object.keys(L).length,k=I&&Object.keys(I).length,C=S.localeRegistry,D=C[M];if(D||(C[M]=D={}),P!==M){var F=C[P];F||(C[P]=F={}),E&&F.dictionary===D.dictionary&&(F.dictionary=L),k&&F.format===D.format&&(F.format=I)}E&&(D.dictionary=L),k&&(D.format=I)}function b(T){if(T.layoutAttributes){var M=T.layoutAttributes._arrayAttrRegexps;if(M)for(var P=0;P<M.length;P++)u(S.layoutArrayRegexes,M[P])}}function m(T,M){var P=S.componentsRegistry[T].schema;if(!(!P||!P.traces)){var L=P.traces[M];L&&h(S.modules[M]._module.attributes,L)}}function x(T,M){var P=S.componentsRegistry[T].schema;if(!(!P||!P.transforms)){var L=P.transforms[M];L&&h(S.transformsRegistry[M].attributes,L)}}function w(T,M){var P=S.componentsRegistry[T].schema;if(!(!P||!P.subplots)){var L=S.subplotsRegistry[M],I=L.layoutAttributes,E=L.attr==="subplot"?L.name:L.attr;Array.isArray(E)&&(E=E[0]);var k=P.subplots[E];I&&k&&h(I,k)}}function y(T){return typeof T=="object"&&(T=T.type),T}},{"./lib/dom":766,"./lib/extend":768,"./lib/is_plain_object":779,"./lib/loggers":782,"./lib/noop":787,"./lib/push_unique":793,"./plots/attributes":824,"./plots/layout_attributes":882}],912:[function(e,v,S){var r=e("../registry"),a=e("../lib"),u=a.extendFlat,c=a.extendDeep;function t(n){var o;switch(n){case"themes__thumb":o={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":o={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:o={}}return o}function f(n){var o=["xaxis","yaxis","zaxis"];return o.indexOf(n.slice(0,5))>-1}v.exports=function(o,l){o.framework&&o.framework.isPolar&&(o=o.framework.getConfig());var h,i=o.data,s=o.layout,p=c([],i),d=c({},s,t(l.tileClass)),g=o._context||{};if(l.width&&(d.width=l.width),l.height&&(d.height=l.height),l.tileClass==="thumbnail"||l.tileClass==="themes__thumb"){d.annotations=[];var b=Object.keys(d);for(h=0;h<b.length;h++)f(b[h])&&(d[b[h]].title={text:""});for(h=0;h<p.length;h++){var m=p[h];m.showscale=!1,m.marker&&(m.marker.showscale=!1),r.traceIs(m,"pie-like")&&(m.textposition="none")}}if(Array.isArray(l.annotations))for(h=0;h<l.annotations.length;h++)d.annotations.push(l.annotations[h]);var x=Object.keys(d).filter(function(P){return P.match(/^scene\d*$/)});if(x.length){var w={};for(l.tileClass==="thumbnail"&&(w={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),h=0;h<x.length;h++){var y=d[x[h]];y.xaxis||(y.xaxis={}),y.yaxis||(y.yaxis={}),y.zaxis||(y.zaxis={}),u(y.xaxis,w),u(y.yaxis,w),u(y.zaxis,w),y._scene=null}}var T=document.createElement("div");l.tileClass&&(T.className=l.tileClass);var M={gd:T,td:T,layout:d,data:p,config:{staticPlot:l.staticPlot===void 0?!0:l.staticPlot,plotGlPixelRatio:l.plotGlPixelRatio===void 0?2:l.plotGlPixelRatio,displaylogo:l.displaylogo||!1,showLink:l.showLink||!1,showTips:l.showTips||!1,mapboxAccessToken:g.mapboxAccessToken}};return l.setBackground!=="transparent"&&(M.config.setBackground=l.setBackground||"opaque"),M.gd.defaultLayout=t(l.tileClass),M}},{"../lib":778,"../registry":911}],913:[function(e,v,S){var r=e("../lib"),a=e("../plot_api/to_image"),u=e("./filesaver"),c=e("./helpers");function t(f,n){var o;return r.isPlainObject(f)||(o=r.getGraphDiv(f)),n=n||{},n.format=n.format||"png",n.width=n.width||null,n.height=n.height||null,n.imageDataOnly=!0,new Promise(function(l,h){o&&o._snapshotInProgress&&h(new Error("Snapshotting already in progress.")),r.isIE()&&n.format!=="svg"&&h(new Error(c.MSG_IE_BAD_FORMAT)),o&&(o._snapshotInProgress=!0);var i=a(f,n),s=n.filename||f.fn||"newplot";s+="."+n.format.replace("-","."),i.then(function(p){return o&&(o._snapshotInProgress=!1),u(p,s,n.format)}).then(function(p){l(p)}).catch(function(p){o&&(o._snapshotInProgress=!1),h(p)})})}v.exports=t},{"../lib":778,"../plot_api/to_image":820,"./filesaver":914,"./helpers":915}],914:[function(e,v,S){var r=e("../lib"),a=e("./helpers");function u(c,t,f){var n=document.createElement("a"),o="download"in n,l=new Promise(function(h,i){var s,p;if(r.isIE9orBelow()&&i(new Error("IE < 10 unsupported")),r.isSafari()){var d=f==="svg"?",":";base64,";return a.octetStream(d+encodeURIComponent(c)),h(t)}if(r.isIE())return s=a.createBlob(c,"svg"),window.navigator.msSaveBlob(s,t),s=null,h(t);if(o)return s=a.createBlob(c,f),p=a.createObjectURL(s),n.href=p,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),a.revokeObjectURL(p),s=null,h(t);i(new Error("download error"))});return l}v.exports=u},{"../lib":778,"./helpers":915}],915:[function(e,v,S){var r=e("../registry");S.getDelay=function(c){return c._has&&(c._has("gl3d")||c._has("gl2d")||c._has("mapbox"))?500:0},S.getRedrawFunc=function(c){return function(){var t=c._fullLayout||{},f=t._has&&t._has("polar"),n=!f&&c.data&&c.data[0]&&c.data[0].r;n||r.getComponentMethod("colorbar","draw")(c)}},S.encodeSVG=function(c){return"data:image/svg+xml,"+encodeURIComponent(c)},S.encodeJSON=function(c){return"data:application/json,"+encodeURIComponent(c)};var a=window.URL||window.webkitURL;S.createObjectURL=function(c){return a.createObjectURL(c)},S.revokeObjectURL=function(c){return a.revokeObjectURL(c)},S.createBlob=function(c,t){if(t==="svg")return new window.Blob([c],{type:"image/svg+xml;charset=utf-8"});if(t==="full-json")return new window.Blob([c],{type:"application/json;charset=utf-8"});var f=u(window.atob(c));return new window.Blob([f],{type:"image/"+t})},S.octetStream=function(c){document.location.href="data:application/octet-stream"+c};function u(c){for(var t=c.length,f=new ArrayBuffer(t),n=new Uint8Array(f),o=0;o<t;o++)n[o]=c.charCodeAt(o);return f}S.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,S.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":911}],916:[function(e,v,S){var r=e("./helpers"),a={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};v.exports=a},{"./cloneplot":912,"./download":913,"./helpers":915,"./svgtoimg":917,"./toimage":918,"./tosvg":919}],917:[function(e,v,S){var r=e("../lib"),a=e("events").EventEmitter,u=e("./helpers");function c(t){var f=t.emitter||new a,n=new Promise(function(o,l){var h=window.Image,i=t.svg,s=t.format||"png";if(r.isIE()&&s!=="svg"){var p=new Error(u.MSG_IE_BAD_FORMAT);return l(p),t.promise?n:f.emit("error",p)}var d=t.canvas,g=t.scale||1,b=t.width||300,m=t.height||150,x=g*b,w=g*m,y=d.getContext("2d"),T=new h,M,P;s==="svg"||r.isIE9orBelow()||r.isSafari()?P=u.encodeSVG(i):(M=u.createBlob(i,"svg"),P=u.createObjectURL(M)),d.width=x,d.height=w,T.onload=function(){var L;switch(M=null,u.revokeObjectURL(P),s!=="svg"&&y.drawImage(T,0,0,x,w),s){case"jpeg":L=d.toDataURL("image/jpeg");break;case"png":L=d.toDataURL("image/png");break;case"webp":L=d.toDataURL("image/webp");break;case"svg":L=P;break;default:var I="Image format is not jpeg, png, svg or webp.";if(l(new Error(I)),!t.promise)return f.emit("error",I)}o(L),t.promise||f.emit("success",L)},T.onerror=function(L){if(M=null,u.revokeObjectURL(P),l(L),!t.promise)return f.emit("error",L)},T.src=P});return t.promise?n:f}v.exports=c},{"../lib":778,"./helpers":915,events:110}],918:[function(e,v,S){var r=e("events").EventEmitter,a=e("../registry"),u=e("../lib"),c=e("./helpers"),t=e("./cloneplot"),f=e("./tosvg"),n=e("./svgtoimg");function o(l,h){var i=new r,s=t(l,{format:"png"}),p=s.gd;p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);function d(){var b=c.getDelay(p._fullLayout);setTimeout(function(){var m=f(p),x=document.createElement("canvas");x.id=u.randstr(),i=n({format:h.format,width:p._fullLayout.width,height:p._fullLayout.height,canvas:x,emitter:i,svg:m}),i.clean=function(){p&&document.body.removeChild(p)}},b)}var g=c.getRedrawFunc(p);return a.call("plot",p,s.data,s.layout,s.config).then(g).then(d).catch(function(b){i.emit("error",b)}),i}v.exports=o},{"../lib":778,"../registry":911,"./cloneplot":912,"./helpers":915,"./svgtoimg":917,"./tosvg":919,events:110}],919:[function(e,v,S){var r=e("d3"),a=e("../lib"),u=e("../components/drawing"),c=e("../components/color"),t=e("../constants/xmlns_namespaces"),f=/"/g,n="TOBESTRIPPED",o=new RegExp('("'+n+")|("+n+'")',"g");function l(i){var s=r.select("body").append("div").style({display:"none"}).html(""),p=i.replace(/(&[^;]*;)/gi,function(d){return d==="&lt;"?"&#60;":d==="&rt;"?"&#62;":d.indexOf("<")!==-1||d.indexOf(">")!==-1?"":s.html(d).text()});return s.remove(),p}function h(i){return i.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}v.exports=function(s,p,d){var g=s._fullLayout,b=g._paper,m=g._toppaper,x=g.width,w=g.height,y;b.insert("rect",":first-child").call(u.setRect,0,0,x,w).call(c.fill,g.paper_bgcolor);var T=g._basePlotModules||[];for(y=0;y<T.length;y++){var M=T[y];M.toSVG&&M.toSVG(s)}if(m){var P=m.node().childNodes,L=Array.prototype.slice.call(P);for(y=0;y<L.length;y++){var I=L[y];I.childNodes.length&&b.node().appendChild(I)}}if(g._draggers&&g._draggers.remove(),b.node().style.background="",b.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var D=r.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){D.remove();return}else D.style({visibility:null,display:null});var F=this.style.fontFamily;F&&F.indexOf('"')!==-1&&D.style("font-family",F.replace(f,n))}),g._gradientUrlQueryParts){var E=[];for(var k in g._gradientUrlQueryParts)E.push(k);E.length&&b.selectAll(E.join(",")).each(function(){var D=r.select(this),F=this.style.fill;F&&F.indexOf("url(")!==-1&&D.style("fill",F.replace(f,n));var N=this.style.stroke;N&&N.indexOf("url(")!==-1&&D.style("stroke",N.replace(f,n))})}(p==="pdf"||p==="eps")&&b.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),b.node().setAttributeNS(t.xmlns,"xmlns",t.svg),b.node().setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),p==="svg"&&d&&(b.attr("width",d*x),b.attr("height",d*w),b.attr("viewBox","0 0 "+x+" "+w));var C=new window.XMLSerializer().serializeToString(b.node());return C=l(C),C=h(C),C=C.replace(o,"'"),a.isIE()&&(C=C.replace(/"/gi,"'"),C=C.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),C=C.replace(/(\\')/gi,'"')),C}},{"../components/color":643,"../components/drawing":665,"../constants/xmlns_namespaces":754,"../lib":778,d3:169}],920:[function(e,v,S){var r=e("../../lib");v.exports=function(u,c){for(var t=0;t<u.length;t++)u[t].i=t;r.mergeArray(c.text,u,"tx"),r.mergeArray(c.hovertext,u,"htx");var f=c.marker;if(f){r.mergeArray(f.opacity,u,"mo",!0),r.mergeArray(f.color,u,"mc");var n=f.line;n&&(r.mergeArray(n.color,u,"mlc"),r.mergeArrayCastPositive(n.width,u,"mlw"))}}},{"../../lib":778}],921:[function(e,v,S){var r=e("../scatter/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../../plots/template_attributes").texttemplateAttrs,c=e("../../components/colorscale/attributes"),t=e("../../plots/font_attributes"),f=e("./constants"),n=e("../../lib/extend").extendFlat,o=t({editType:"calc",arrayOk:!0,colorEditType:"style"}),l=r.marker,h=l.line,i=n({},h.width,{dflt:0}),s=n({width:i,editType:"calc"},c("marker.line")),p=n({line:s,editType:"calc"},c("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});v.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,text:r.text,texttemplate:u({editType:"plot"},{keys:f.eventDataKeys}),hovertext:r.hovertext,hovertemplate:a({},{keys:f.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:n({},o,{}),insidetextfont:n({},o,{}),outsidetextfont:n({},o,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:n({},r.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:p,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},r:r.r,t:r.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/font_attributes":856,"../../plots/template_attributes":906,"../scatter/attributes":1187,"./constants":923}],922:[function(e,v,S){var r=e("../../plots/cartesian/axes"),a=e("../../plots/cartesian/align_period"),u=e("../../components/colorscale/helpers").hasColorscale,c=e("../../components/colorscale/calc"),t=e("./arrays_to_calcdata"),f=e("../scatter/calc_selection");v.exports=function(o,l){var h=r.getFromId(o,l.xaxis||"x"),i=r.getFromId(o,l.yaxis||"y"),s,p,d,g={msUTC:!!(l.base||l.base===0)},b;l.orientation==="h"?(s=h.makeCalcdata(l,"x",g),d=i.makeCalcdata(l,"y"),p=a(l,i,"y",d),b=!!l.yperiodalignment):(s=i.makeCalcdata(l,"y",g),d=h.makeCalcdata(l,"x"),p=a(l,h,"x",d),b=!!l.xperiodalignment);for(var m=Math.min(p.length,s.length),x=new Array(m),w=0;w<m;w++)x[w]={p:p[w],s:s[w]},b&&(x[w].orig_p=d[w]),l.ids&&(x[w].id=String(l.ids[w]));return u(l,"marker")&&c(o,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"}),u(l,"marker.line")&&c(o,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"}),t(x,l),f(x,l),x}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../scatter/calc_selection":1189,"./arrays_to_calcdata":920}],923:[function(e,v,S){v.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],924:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib").isArrayOrTypedArray,u=e("../../constants/numerical").BADNUM,c=e("../../registry"),t=e("../../plots/cartesian/axes"),f=e("../../plots/cartesian/constraints").getAxisGroup,n=e("./sieve.js");function o(E,k){for(var C=k.xaxis,D=k.yaxis,F=E._fullLayout,N=E._fullData,G=E.calcdata,U=[],X=[],z=0;z<N.length;z++){var B=N[z];if(B.visible===!0&&c.traceIs(B,"bar")&&B.xaxis===C._id&&B.yaxis===D._id&&(B.orientation==="h"?U.push(G[z]):X.push(G[z]),B._computePh))for(var j=E.calcdata[z],V=0;V<j.length;V++)typeof j[V].ph0=="function"&&(j[V].ph0=j[V].ph0()),typeof j[V].ph1=="function"&&(j[V].ph1=j[V].ph1())}var K={xCat:C.type==="category"||C.type==="multicategory",yCat:D.type==="category"||D.type==="multicategory",mode:F.barmode,norm:F.barnorm,gap:F.bargap,groupgap:F.bargroupgap};l(E,C,D,X,K),l(E,D,C,U,K)}function l(E,k,C,D,F){if(!!D.length){var N,G,U,X,z;switch(h(C,D),F.mode){case"overlay":i(k,C,D,F);break;case"group":for(N=[],G=[],U=0;U<D.length;U++)X=D[U],z=X[0].trace,z.offset===void 0?G.push(X):N.push(X);G.length&&s(E,k,C,G,F),N.length&&i(k,C,N,F);break;case"stack":case"relative":for(N=[],G=[],U=0;U<D.length;U++)X=D[U],z=X[0].trace,z.base===void 0?G.push(X):N.push(X);G.length&&p(E,k,C,G,F),N.length&&i(k,C,N,F);break}L(D,k)}}function h(E,k){var C,D;for(C=0;C<k.length;C++){var F=k[C],N=F[0].trace,G=N.type==="funnel"?N._base:N.base,U,X=N.orientation==="h"?N.xcalendar:N.ycalendar,z=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(a(G)){for(D=0;D<Math.min(G.length,F.length);D++)U=z(G[D],0,X),r(U)?(F[D].b=+U,F[D].hasB=1):F[D].b=0;for(;D<F.length;D++)F[D].b=0}else{U=z(G,0,X);var B=r(U);for(U=B?U:0,D=0;D<F.length;D++)F[D].b=U,B&&(F[D].hasB=1)}}}function i(E,k,C,D){for(var F=0;F<C.length;F++){var N=C[F],G=new n([N],{unitMinDiff:D.xCat||D.yCat,sepNegVal:!1,overlapNoMerge:!D.norm});d(E,G,D),D.norm?(T(G),P(k,G,D)):w(k,G)}}function s(E,k,C,D,F){var N=new n(D,{sepNegVal:!1,overlapNoMerge:!F.norm});g(E,k,N,F),M(N),F.norm?(T(N),P(C,N,F)):w(C,N)}function p(E,k,C,D,F){var N=new n(D,{sepNegVal:F.mode==="relative",overlapNoMerge:!(F.norm||F.mode==="stack"||F.mode==="relative")});d(k,N,F),y(C,N,F);for(var G=0;G<D.length;G++)for(var U=D[G],X=0;X<U.length;X++){var z=U[X];if(z.s!==u){var B=z.b+z.s===N.get(z.p,z.s);B&&(z._outmost=!0)}}F.norm&&P(C,N,F)}function d(E,k,C){for(var D=k.minDiff,F=k.traces,N=D*(1-C.gap),G=N,U=G*(1-(C.groupgap||0)),X=-U/2,z=0;z<F.length;z++){var B=F[z],j=B[0].t;j.barwidth=U,j.poffset=X,j.bargroupwidth=N,j.bardelta=D}k.binWidth=F[0][0].t.barwidth/100,b(k),m(E,k),x(E,k)}function g(E,k,C,D){for(var F=E._fullLayout,N=C.positions,G=C.distinctPositions,U=C.minDiff,X=C.traces,z=X.length,B=N.length!==G.length,j=U*(1-D.gap),V=f(F,k._id)+X[0][0].trace.orientation,K=F._alignmentOpts[V]||{},te=0;te<z;te++){var $=X[te],ie=$[0].trace,se=K[ie.alignmentgroup]||{},Q=Object.keys(se.offsetGroups||{}).length,H;Q?H=j/Q:H=B?j/z:j;var oe=H*(1-(D.groupgap||0)),re;Q?re=((2*ie._offsetIndex+1-Q)*H-oe)/2:re=B?((2*te+1-z)*H-oe)/2:-oe/2;var ee=$[0].t;ee.barwidth=oe,ee.poffset=re,ee.bargroupwidth=j,ee.bardelta=U}C.binWidth=X[0][0].t.barwidth/100,b(C),m(k,C),x(k,C,B)}function b(E){var k=E.traces,C,D;for(C=0;C<k.length;C++){var F=k[C],N=F[0],G=N.trace,U=N.t,X=G._offset||G.offset,z=U.poffset,B;if(a(X)){for(B=Array.prototype.slice.call(X,0,F.length),D=0;D<B.length;D++)r(B[D])||(B[D]=z);for(D=B.length;D<F.length;D++)B.push(z);U.poffset=B}else X!==void 0&&(U.poffset=X);var j=G._width||G.width,V=U.barwidth;if(a(j)){var K=Array.prototype.slice.call(j,0,F.length);for(D=0;D<K.length;D++)r(K[D])||(K[D]=V);for(D=K.length;D<F.length;D++)K.push(V);if(U.barwidth=K,X===void 0){for(B=[],D=0;D<F.length;D++)B.push(z+(V-K[D])/2);U.poffset=B}}else j!==void 0&&(U.barwidth=j,X===void 0&&(U.poffset=z+(V-j)/2))}}function m(E,k){for(var C=k.traces,D=I(E),F=0;F<C.length;F++)for(var N=C[F],G=N[0].t,U=G.poffset,X=Array.isArray(U),z=G.barwidth,B=Array.isArray(z),j=0;j<N.length;j++){var V=N[j],K=V.w=B?z[j]:z;V[D]=V.p+(X?U[j]:U)+K/2}}function x(E,k,C){var D=k.traces,F=k.minDiff,N=F/2;t.minDtick(E,k.minDiff,k.distinctPositions[0],C);for(var G=0;G<D.length;G++){var U=D[G],X=U[0],z=X.trace,B=[],j,V,K,te;for(te=0;te<U.length;te++)j=U[te],V=j.p-N,K=j.p+N,B.push(V,K);if(z.width||z.offset){var $=X.t,ie=$.poffset,se=$.barwidth,Q=Array.isArray(ie),H=Array.isArray(se);for(te=0;te<U.length;te++){j=U[te];var oe=Q?ie[te]:ie,re=H?se[te]:se;V=j.p+oe,K=V+re,B.push(V,K)}}z._extremes[E._id]=t.findExtremes(E,B,{padded:!1})}}function w(E,k){for(var C=k.traces,D=I(E),F=0;F<C.length;F++){for(var N=C[F],G=N[0].trace,U=[],X=!1,z=0;z<N.length;z++){var B=N[z],j=B.b,V=j+B.s;B[D]=V,U.push(V),B.hasB&&U.push(j),(!B.hasB||!B.b)&&(X=!0)}G._extremes[E._id]=t.findExtremes(E,U,{tozero:X,padded:!0})}}function y(E,k,C){var D=I(E),F=k.traces,N,G,U,X,z,B;for(X=0;X<F.length;X++)if(N=F[X],G=N[0].trace,G.type==="funnel")for(z=0;z<N.length;z++)B=N[z],B.s!==u&&k.put(B.p,-.5*B.s);for(X=0;X<F.length;X++){N=F[X],G=N[0].trace,U=G.type==="funnel";var j=[];for(z=0;z<N.length;z++)if(B=N[z],B.s!==u){var V;U?V=B.s:V=B.s+B.b;var K=k.put(B.p,V),te=K+V;B.b=K,B[D]=te,C.norm||(j.push(te),B.hasB&&j.push(K))}C.norm||(G._extremes[E._id]=t.findExtremes(E,j,{tozero:!0,padded:!0}))}}function T(E){for(var k=E.traces,C=0;C<k.length;C++)for(var D=k[C],F=0;F<D.length;F++){var N=D[F];N.s!==u&&E.put(N.p,N.b+N.s)}}function M(E){for(var k=E.traces,C=0;C<k.length;C++){var D=k[C],F=D[0].trace;if(F.base===void 0)for(var N=new n([D],{sepNegVal:!0,overlapNoMerge:!0}),G=0;G<D.length;G++){var U=D[G];if(U.p!==u){var X=N.put(U.p,U.b+U.s);X&&(U.b=X)}}}}function P(E,k,C){var D=k.traces,F=I(E),N=C.norm==="fraction"?1:100,G=N/1e9,U=E.l2c(E.c2l(0)),X=C.mode==="stack"?N:U;function z(re){return r(E.c2l(re))&&(re<U-G||re>X+G||!r(U))}for(var B=0;B<D.length;B++){for(var j=D[B],V=j[0].trace,K=[],te=!1,$=!1,ie=0;ie<j.length;ie++){var se=j[ie];if(se.s!==u){var Q=Math.abs(N/k.get(se.p,se.s));se.b*=Q,se.s*=Q;var H=se.b,oe=H+se.s;se[F]=oe,K.push(oe),$=$||z(oe),se.hasB&&(K.push(H),$=$||z(H)),(!se.hasB||!se.b)&&(te=!0)}}V._extremes[E._id]=t.findExtremes(E,K,{tozero:te,padded:$})}}function L(E,k){var C=I(k),D={},F,N,G,U=1/0,X=-1/0;for(F=0;F<E.length;F++)for(G=E[F],N=0;N<G.length;N++){var z=G[N].p;r(z)&&(U=Math.min(U,z),X=Math.max(X,z))}var B=1e4/(X-U),j=D.round=function(Q){return String(Math.round(B*(Q-U)))};for(F=0;F<E.length;F++){G=E[F],G[0].t.extents=D;var V=G[0].t.poffset,K=Array.isArray(V);for(N=0;N<G.length;N++){var te=G[N],$=te[C]-te.w/2;if(r($)){var ie=te[C]+te.w/2,se=j(te.p);D[se]?D[se]=[Math.min($,D[se][0]),Math.max(ie,D[se][1])]:D[se]=[$,ie]}te.p0=te.p+(K?V[N]:V),te.p1=te.p0+te.w,te.s0=te.b,te.s1=te.s0+te.s}}}function I(E){return E._id.charAt(0)}v.exports={crossTraceCalc:o,setGroupPositions:l}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axes":828,"../../plots/cartesian/constraints":835,"../../registry":911,"./sieve.js":934,"fast-isnumeric":241}],925:[function(e,v,S){var r=e("../../lib"),a=e("../../components/color"),u=e("../../registry"),c=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),f=e("./style_defaults"),n=e("../../plots/cartesian/constraints").getAxisGroup,o=e("./attributes"),l=r.coerceFont;function h(d,g,b,m){function x(P,L){return r.coerce(d,g,o,P,L)}var w=c(d,g,m,x);if(!w){g.visible=!1;return}t(d,g,m,x),x("orientation",g.x&&!g.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var y=x("textposition");p(d,g,m,x,y,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),f(d,g,x,b,m);var T=(g.marker.line||{}).color,M=u.getComponentMethod("errorbars","supplyDefaults");M(d,g,T||a.defaultLine,{axis:"y"}),M(d,g,T||a.defaultLine,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(g,x)}function i(d,g,b,m){var x=g.orientation,w=g[{v:"x",h:"y"}[x]+"axis"],y=n(b,w)+x,T=b._alignmentOpts||{},M=m("alignmentgroup"),P=T[y];P||(P=T[y]={});var L=P[M];L?L.traces.push(g):L=P[M]={traces:[g],alignmentIndex:Object.keys(P).length,offsetGroups:{}};var I=m("offsetgroup"),E=L.offsetGroups,k=E[I];I&&(k||(k=E[I]={offsetIndex:Object.keys(E).length}),g._offsetIndex=k.offsetIndex)}function s(d,g){var b,m;function x(y){return r.coerce(m._input,m,o,y)}if(g.barmode==="group")for(var w=0;w<d.length;w++)m=d[w],m.type==="bar"&&(b=m._input,i(b,m,g,x))}function p(d,g,b,m,x,w){w=w||{};var y=w.moduleHasSelected!==!1,T=w.moduleHasUnselected!==!1,M=w.moduleHasConstrain!==!1,P=w.moduleHasCliponaxis!==!1,L=w.moduleHasTextangle!==!1,I=w.moduleHasInsideanchor!==!1,E=!!w.hasPathbar,k=Array.isArray(x)||x==="auto",C=k||x==="inside",D=k||x==="outside";if(C||D){var F=l(m,"textfont",b.font),N=r.extendFlat({},F),G=d.textfont&&d.textfont.color,U=!G;if(U&&delete N.color,l(m,"insidetextfont",N),E){var X=r.extendFlat({},F);U&&delete X.color,l(m,"pathbar.textfont",X)}D&&l(m,"outsidetextfont",F),y&&m("selected.textfont.color"),T&&m("unselected.textfont.color"),M&&m("constraintext"),P&&m("cliponaxis"),L&&m("textangle"),m("texttemplate")}C&&I&&m("insidetextanchor")}v.exports={supplyDefaults:h,crossTraceDefaults:s,handleGroupingDefaults:i,handleText:p}},{"../../components/color":643,"../../lib":778,"../../plots/cartesian/constraints":835,"../../registry":911,"../scatter/period_defaults":1207,"../scatter/xy_defaults":1214,"./attributes":921,"./style_defaults":936}],926:[function(e,v,S){v.exports=function(a,u,c){return a.x="xVal"in u?u.xVal:u.x,a.y="yVal"in u?u.yVal:u.y,u.xa&&(a.xaxis=u.xa),u.ya&&(a.yaxis=u.ya),c.orientation==="h"?(a.label=a.y,a.value=a.x):(a.label=a.x,a.value=a.y),a}},{}],927:[function(e,v,S){var r=e("fast-isnumeric"),a=e("tinycolor2"),u=e("../../lib").isArrayOrTypedArray;S.coerceString=function(c,t,f){if(typeof t=="string"){if(t||!c.noBlank)return t}else if((typeof t=="number"||t===!0)&&!c.strict)return String(t);return f!==void 0?f:c.dflt},S.coerceNumber=function(c,t,f){if(r(t)){t=+t;var n=c.min,o=c.max,l=n!==void 0&&t<n||o!==void 0&&t>o;if(!l)return t}return f!==void 0?f:c.dflt},S.coerceColor=function(c,t,f){return a(t).isValid()?t:f!==void 0?f:c.dflt},S.coerceEnumerated=function(c,t,f){return c.coerceNumber&&(t=+t),c.values.indexOf(t)!==-1?t:f!==void 0?f:c.dflt},S.getValue=function(c,t){var f;return Array.isArray(c)?t<c.length&&(f=c[t]):f=c,f},S.getLineWidth=function(c,t){var f=0<t.mlw?t.mlw:u(c.marker.line.width)?0:c.marker.line.width;return f}},{"../../lib":778,"fast-isnumeric":241,tinycolor2:576}],928:[function(e,v,S){var r=e("../../components/fx"),a=e("../../registry"),u=e("../../components/color"),c=e("../../lib").fillText,t=e("./helpers").getLineWidth,f=e("../../plots/cartesian/axes").hoverLabelText,n=e("../../constants/numerical").BADNUM;function o(i,s,p,d){var g=l(i,s,p,d);if(g){var b=g.cd,m=b[0].trace,x=b[g.index];return g.color=h(m,x),a.getComponentMethod("errorbars","hoverInfo")(x,m,g),[g]}}function l(i,s,p,d){var g=i.cd,b=g[0].trace,m=g[0].t,x=d==="closest",w=b.type==="waterfall",y=i.maxHoverDistance,T,M,P,L,I,E,k;function C(H){return H[P]-H.w/2}function D(H){return H[P]+H.w/2}var F=x?C:function(H){return Math.min(C(H),H.p-m.bardelta/2)},N=x?D:function(H){return Math.max(D(H),H.p+m.bardelta/2)};function G(H,oe){return r.inbox(H-T,oe-T,y+Math.min(1,Math.abs(oe-H)/k)-1)}function U(H){return G(F(H),N(H))}function X(H){return G(C(H),D(H))}function z(H){var oe=M,re=H.b,ee=H[L];if(w){var ae=Math.abs(H.rawS)||0;oe>0?ee+=ae:oe<0&&(ee-=ae)}return r.inbox(re-oe,ee-oe,y+(ee-oe)/(ee-re)-1)}b.orientation==="h"?(T=p,M=s,P="y",L="x",I=z,E=U):(T=s,M=p,P="x",L="y",E=z,I=U);var B=i[P+"a"],j=i[L+"a"];k=Math.abs(B.r2c(B.range[1])-B.r2c(B.range[0]));function V(H){return(I(H)+E(H))/2}var K=r.getDistanceFunction(d,I,E,V);if(r.getClosest(g,K,i),i.index!==!1&&g[i.index].p!==n){x||(F=function(H){return Math.min(C(H),H.p-m.bargroupwidth/2)},N=function(H){return Math.max(D(H),H.p+m.bargroupwidth/2)});var te=i.index,$=g[te],ie=b.base?$.b+$.s:$.s;i[L+"0"]=i[L+"1"]=j.c2p($[L],!0),i[L+"LabelVal"]=ie;var se=m.extents[m.extents.round($.p)];i[P+"0"]=B.c2p(x?F($):se[0],!0),i[P+"1"]=B.c2p(x?N($):se[1],!0);var Q=$.orig_p!==void 0;return i[P+"LabelVal"]=Q?$.orig_p:$.p,i.labelLabel=f(B,i[P+"LabelVal"]),i.valueLabel=f(j,i[L+"LabelVal"]),i.baseLabel=f(j,$.b),i.spikeDistance=(z($)+X($))/2-y,i[P+"Spike"]=B.c2p($.p,!0),c($,b,i),i.hovertemplate=b.hovertemplate,i}}function h(i,s){var p=s.mcc||i.marker.color,d=s.mlcc||i.marker.line.color,g=t(i,s);if(u.opacity(p))return p;if(u.opacity(d)&&g)return d}v.exports={hoverPoints:o,hoverOnBars:l,getTraceColor:h}},{"../../components/color":643,"../../components/fx":683,"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"./helpers":927}],929:[function(e,v,S){v.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":841,"../scatter/marker_colorbar":1205,"./arrays_to_calcdata":920,"./attributes":921,"./calc":922,"./cross_trace_calc":924,"./defaults":925,"./event_data":926,"./hover":928,"./layout_attributes":930,"./layout_defaults":931,"./plot":932,"./select":933,"./style":935}],930:[function(e,v,S){v.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],931:[function(e,v,S){var r=e("../../registry"),a=e("../../plots/cartesian/axes"),u=e("../../lib"),c=e("./layout_attributes");v.exports=function(t,f,n){function o(x,w){return u.coerce(t,f,c,x,w)}for(var l=!1,h=!1,i=!1,s={},p=o("barmode"),d=0;d<n.length;d++){var g=n[d];if(r.traceIs(g,"bar")&&g.visible)l=!0;else continue;if(p==="group"){var b=g.xaxis+g.yaxis;s[b]&&(i=!0),s[b]=!0}if(g.visible&&g.type==="histogram"){var m=a.getFromId({_fullLayout:f},g[g.orientation==="v"?"xaxis":"yaxis"]);m.type!=="category"&&(h=!0)}}if(!l){delete f.barmode;return}p!=="overlay"&&o("barnorm"),o("bargap",h&&!i?0:.2),o("bargroupgap")}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"./layout_attributes":930}],932:[function(e,v,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("../../lib"),c=e("../../lib/svg_text_utils"),t=e("../../components/color"),f=e("../../components/drawing"),n=e("../../registry"),o=e("../../plots/cartesian/axes").tickText,l=e("./uniform_text"),h=l.recordMinTextSize,i=l.clearMinTextSize,s=e("./style"),p=e("./helpers"),d=e("./constants"),g=e("./attributes"),b=g.text,m=g.textposition,x=e("../../components/fx/helpers").appendArrayPointValue,w=d.TEXTPAD;function y(B){return B.id}function T(B){if(B.ids)return y}function M(B,j){return B<j?1:-1}function P(B,j,V,K){var te=[],$=[],ie=K?j:V,se=K?V:j;return te[0]=ie.c2p(B.s0,!0),$[0]=se.c2p(B.p0,!0),te[1]=ie.c2p(B.s1,!0),$[1]=se.c2p(B.p1,!0),K?[te,$]:[$,te]}function L(B,j,V,K){if(!j.uniformtext.mode&&I(V)){var te;return K&&(te=K()),B.transition().duration(V.duration).ease(V.easing).each("end",function(){te&&te()}).each("interrupt",function(){te&&te()})}else return B}function I(B){return B&&B.duration>0}function E(B,j,V,K,te,$){var ie=j.xaxis,se=j.yaxis,Q=B._fullLayout;te||(te={mode:Q.barmode,norm:Q.barmode,gap:Q.bargap,groupgap:Q.bargroupgap},i("bar",Q));var H=u.makeTraceGroups(K,V,"trace bars").each(function(oe){var re=r.select(this),ee=oe[0].trace,ae=ee.type==="waterfall",fe=ee.type==="funnel",de=ee.type==="bar",pe=de||fe,W=0;ae&&ee.connector.visible&&ee.connector.mode==="between"&&(W=ee.connector.line.width/2);var ue=ee.orientation==="h",me=I(te),be=u.ensureSingle(re,"g","points"),Me=T(ee),Pe=be.selectAll("g.point").data(u.identity,Me);Pe.enter().append("g").classed("point",!0),Pe.exit().remove(),Pe.each(function(ze,Qe){var tt=r.select(this),Ce=P(ze,ie,se,ue),Ae=Ce[0][0],Be=Ce[0][1],qe=Ce[1][0],Tt=Ce[1][1],At=(ue?Be-Ae:Tt-qe)===0;At&&pe&&p.getLineWidth(ee,ze)&&(At=!1),At||(At=!a(Ae)||!a(Be)||!a(qe)||!a(Tt)),ze.isBlank=At,At&&(ue?Be=Ae:Tt=qe),W&&!At&&(ue?(Ae-=M(Ae,Be)*W,Be+=M(Ae,Be)*W):(qe-=M(qe,Tt)*W,Tt+=M(qe,Tt)*W));var Ne,ct;if(ee.type==="waterfall"){if(!At){var Mt=ee[ze.dir].marker;Ne=Mt.line.width,ct=Mt.color}}else Ne=p.getLineWidth(ee,ze),ct=ze.mc||ee.marker.color;function Wt(Ct){var dt=r.round(Ne/2%1,2);return te.gap===0&&te.groupgap===0?r.round(Math.round(Ct)-dt,2):Ct}function qt(Ct,dt,lt){return lt&&Ct===dt?Ct:Math.abs(Ct-dt)>=2?Wt(Ct):Ct>dt?Math.ceil(Ct):Math.floor(Ct)}if(!B._context.staticPlot){var zt=t.opacity(ct),$t=zt<1||Ne>.01?Wt:qt;Ae=$t(Ae,Be,ue),Be=$t(Be,Ae,ue),qe=$t(qe,Tt,!ue),Tt=$t(Tt,qe,!ue)}var rr=L(u.ensureSingle(tt,"path"),Q,te,$);if(rr.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Be-Ae)*(Tt-qe))||At&&B._context.staticPlot?"M0,0Z":"M"+Ae+","+qe+"V"+Tt+"H"+Be+"V"+qe+"Z").call(f.setClipUrl,j.layerClipId,B),!Q.uniformtext.mode&&me){var Lt=f.makePointStyleFns(ee);f.singlePointStyle(ze,rr,ee,Lt,B)}k(B,j,tt,oe,Qe,Ae,Be,qe,Tt,te,$),j.layerClipId&&f.hideOutsideRangePoint(ze,tt.select("text"),ie,se,ee.xcalendar,ee.ycalendar)});var Ge=ee.cliponaxis===!1;f.setClipUrl(re,Ge?null:j.layerClipId,B)});n.getComponentMethod("errorbars","plot")(B,H,j,te)}function k(B,j,V,K,te,$,ie,se,Q,H,oe){var re=j.xaxis,ee=j.yaxis,ae=B._fullLayout,fe;function de(Ct,dt,lt){var Te=u.ensureSingle(Ct,"text").text(dt).attr({class:"bartext bartext-"+fe,"text-anchor":"middle","data-notex":1}).call(f.font,lt).call(c.convertToTspans,B);return Te}var pe=K[0].trace,W=pe.orientation==="h",ue=G(ae,K,te,re,ee);fe=U(pe,te);var me=H.mode==="stack"||H.mode==="relative",be=K[te],Me=!me||be._outmost;if(!ue||fe==="none"||(be.isBlank||$===ie||se===Q)&&(fe==="auto"||fe==="inside")){V.select("text").remove();return}var Pe=ae.font,Ge=s.getBarColor(K[te],pe),ze=s.getInsideTextFont(pe,te,Pe,Ge),Qe=s.getOutsideTextFont(pe,te,Pe),tt=V.datum();W?re.type==="log"&&tt.s0<=0&&(re.range[0]<re.range[1]?$=0:$=re._length):ee.type==="log"&&tt.s0<=0&&(ee.range[0]<ee.range[1]?se=ee._length:se=0);var Ce=Math.abs(ie-$)-2*w,Ae=Math.abs(Q-se)-2*w,Be,qe,Tt,At,Ne;if(fe==="outside"&&!Me&&!be.hasB&&(fe="inside"),fe==="auto")if(Me){fe="inside",Ne=u.ensureUniformFontSize(B,ze),Be=de(V,ue,Ne),qe=f.bBox(Be.node()),Tt=qe.width,At=qe.height;var ct=Tt>0&&At>0,Mt=Tt<=Ce&&At<=Ae,Wt=Tt<=Ae&&At<=Ce,qt=W?Ce>=Tt*(Ae/At):Ae>=At*(Ce/Tt);ct&&(Mt||Wt||qt)?fe="inside":(fe="outside",Be.remove(),Be=null)}else fe="inside";if(!Be){Ne=u.ensureUniformFontSize(B,fe==="outside"?Qe:ze),Be=de(V,ue,Ne);var zt=Be.attr("transform");if(Be.attr("transform",""),qe=f.bBox(Be.node()),Tt=qe.width,At=qe.height,Be.attr("transform",zt),Tt<=0||At<=0){Be.remove();return}}var $t=pe.textangle,rr,Lt;fe==="outside"?(Lt=pe.constraintext==="both"||pe.constraintext==="outside",rr=N($,ie,se,Q,qe,{isHorizontal:W,constrained:Lt,angle:$t})):(Lt=pe.constraintext==="both"||pe.constraintext==="inside",rr=F($,ie,se,Q,qe,{isHorizontal:W,constrained:Lt,angle:$t,anchor:pe.insidetextanchor})),rr.fontSize=Ne.size,h(pe.type,rr,ae),be.transform=rr,L(Be,ae,H,oe).attr("transform",u.getTextTransform(rr))}function C(B){return B==="auto"?0:B}function D(B,j){var V=Math.PI/180*j,K=Math.abs(Math.sin(V)),te=Math.abs(Math.cos(V));return{x:B.width*te+B.height*K,y:B.width*K+B.height*te}}function F(B,j,V,K,te,$){var ie=!!$.isHorizontal,se=!!$.constrained,Q=$.angle||0,H=$.anchor||"end",oe=H==="end",re=H==="start",ee=$.leftToRight||0,ae=(ee+1)/2,fe=1-ae,de=te.width,pe=te.height,W=Math.abs(j-B),ue=Math.abs(K-V),me=W>2*w&&ue>2*w?w:0;W-=2*me,ue-=2*me;var be=C(Q);Q==="auto"&&!(de<=W&&pe<=ue)&&(de>W||pe>ue)&&(!(de>ue||pe>W)||de<pe!=W<ue)&&(be+=90);var Me=D(te,be),Pe=1;se&&(Pe=Math.min(1,W/Me.x,ue/Me.y));var Ge=te.left*fe+te.right*ae,ze=(te.top+te.bottom)/2,Qe=(B+w)*fe+(j-w)*ae,tt=(V+K)/2,Ce=0,Ae=0;if(re||oe){var Be=(ie?Me.x:Me.y)/2,qe=ie?M(B,j):M(V,K);ie?re?(Qe=B+qe*me,Ce=-qe*Be):(Qe=j-qe*me,Ce=qe*Be):re?(tt=V+qe*me,Ae=-qe*Be):(tt=K-qe*me,Ae=qe*Be)}return{textX:Ge,textY:ze,targetX:Qe,targetY:tt,anchorX:Ce,anchorY:Ae,scale:Pe,rotate:be}}function N(B,j,V,K,te,$){var ie=!!$.isHorizontal,se=!!$.constrained,Q=$.angle||0,H=te.width,oe=te.height,re=Math.abs(j-B),ee=Math.abs(K-V),ae;ie?ae=ee>2*w?w:0:ae=re>2*w?w:0;var fe=1;se&&(fe=ie?Math.min(1,ee/oe):Math.min(1,re/H));var de=C(Q),pe=D(te,de),W=(ie?pe.x:pe.y)/2,ue=(te.left+te.right)/2,me=(te.top+te.bottom)/2,be=(B+j)/2,Me=(V+K)/2,Pe=0,Ge=0,ze=ie?M(j,B):M(V,K);return ie?(be=j-ze*ae,Pe=ze*W):(Me=K+ze*ae,Ge=-ze*W),{textX:ue,textY:me,targetX:be,targetY:Me,anchorX:Pe,anchorY:Ge,scale:fe,rotate:de}}function G(B,j,V,K,te){var $=j[0].trace,ie=$.texttemplate,se;return ie?se=X(B,j,V,K,te):$.textinfo?se=z(j,V,K,te):se=p.getValue($.text,V),p.coerceString(b,se)}function U(B,j){var V=p.getValue(B.textposition,j);return p.coerceEnumerated(m,V)}function X(B,j,V,K,te){var $=j[0].trace,ie=u.castOption($,V,"texttemplate");if(!ie)return"";var se=$.type==="waterfall",Q=$.type==="funnel",H,oe,re,ee;$.orientation==="h"?(H="y",oe=te,re="x",ee=K):(H="x",oe=K,re="y",ee=te);function ae(be){return o(oe,be,!0).text}function fe(be){return o(ee,+be,!0).text}var de=j[V],pe={};pe.label=de.p,pe.labelLabel=pe[H+"Label"]=ae(de.p);var W=u.castOption($,de.i,"text");(W===0||W)&&(pe.text=W),pe.value=de.s,pe.valueLabel=pe[re+"Label"]=fe(de.s);var ue={};x(ue,$,de.i),se&&(pe.delta=+de.rawS||de.s,pe.deltaLabel=fe(pe.delta),pe.final=de.v,pe.finalLabel=fe(pe.final),pe.initial=pe.final-pe.delta,pe.initialLabel=fe(pe.initial)),Q&&(pe.value=de.s,pe.valueLabel=fe(pe.value),pe.percentInitial=de.begR,pe.percentInitialLabel=u.formatPercent(de.begR),pe.percentPrevious=de.difR,pe.percentPreviousLabel=u.formatPercent(de.difR),pe.percentTotal=de.sumR,pe.percenTotalLabel=u.formatPercent(de.sumR));var me=u.castOption($,de.i,"customdata");return me&&(pe.customdata=me),u.texttemplateString(ie,pe,B._d3locale,ue,pe,$._meta||{})}function z(B,j,V,K){var te=B[0].trace,$=te.orientation==="h",ie=te.type==="waterfall",se=te.type==="funnel";function Q(Me){var Pe=$?K:V;return o(Pe,Me,!0).text}function H(Me){var Pe=$?V:K;return o(Pe,+Me,!0).text}var oe=te.textinfo,re=B[j],ee=oe.split("+"),ae=[],fe,de=function(Me){return ee.indexOf(Me)!==-1};if(de("label")&&ae.push(Q(B[j].p)),de("text")&&(fe=u.castOption(te,re.i,"text"),(fe===0||fe)&&ae.push(fe)),ie){var pe=+re.rawS||re.s,W=re.v,ue=W-pe;de("initial")&&ae.push(H(ue)),de("delta")&&ae.push(H(pe)),de("final")&&ae.push(H(W))}if(se){de("value")&&ae.push(H(re.s));var me=0;de("percent initial")&&me++,de("percent previous")&&me++,de("percent total")&&me++;var be=me>1;de("percent initial")&&(fe=u.formatPercent(re.begR),be&&(fe+=" of initial"),ae.push(fe)),de("percent previous")&&(fe=u.formatPercent(re.difR),be&&(fe+=" of previous"),ae.push(fe)),de("percent total")&&(fe=u.formatPercent(re.sumR),be&&(fe+=" of total"),ae.push(fe))}return ae.join("<br>")}v.exports={plot:E,toMoveInsideBar:F}},{"../../components/color":643,"../../components/drawing":665,"../../components/fx/helpers":679,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../registry":911,"./attributes":921,"./constants":923,"./helpers":927,"./style":935,"./uniform_text":937,d3:169,"fast-isnumeric":241}],933:[function(e,v,S){v.exports=function(u,c){var t=u.cd,f=u.xaxis,n=u.yaxis,o=t[0].trace,l=o.type==="funnel",h=o.orientation==="h",i=[],s;if(c===!1)for(s=0;s<t.length;s++)t[s].selected=0;else for(s=0;s<t.length;s++){var p=t[s],d="ct"in p?p.ct:r(p,f,n,h,l);c.contains(d,!1,s,u)?(i.push({pointNumber:s,x:f.c2d(p.x),y:n.c2d(p.y)}),p.selected=1):p.selected=0}return i};function r(a,u,c,t,f){var n=u.c2p(t?a.s0:a.p0,!0),o=u.c2p(t?a.s1:a.p1,!0),l=c.c2p(t?a.p0:a.s0,!0),h=c.c2p(t?a.p1:a.s1,!0);return f?[(n+o)/2,(l+h)/2]:t?[o,(l+h)/2]:[(n+o)/2,h]}},{}],934:[function(e,v,S){v.exports=u;var r=e("../../lib").distinctVals,a=e("../../constants/numerical").BADNUM;function u(c,t){this.traces=c,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var f=1/0,n=[],o=0;o<c.length;o++){for(var l=c[o],h=0;h<l.length;h++){var i=l[h];i.p!==a&&n.push(i.p)}l[0]&&l[0].width1&&(f=Math.min(l[0].width1,f))}this.positions=n;var s=r(n,{unitMinDiff:t.unitMinDiff});this.distinctPositions=s.vals,s.vals.length===1&&f!==1/0?this.minDiff=f:this.minDiff=Math.min(s.minDiff,f),this.binWidth=this.minDiff,this.bins={}}u.prototype.put=function(t,f){var n=this.getLabel(t,f),o=this.bins[n]||0;return this.bins[n]=o+f,o},u.prototype.get=function(t,f){var n=this.getLabel(t,f);return this.bins[n]||0},u.prototype.getLabel=function(t,f){var n=f<0&&this.sepNegVal?"v":"^",o=this.overlapNoMerge?t:Math.round(t/this.binWidth);return n+o}},{"../../constants/numerical":753,"../../lib":778}],935:[function(e,v,S){var r=e("d3"),a=e("../../components/color"),u=e("../../components/drawing"),c=e("../../lib"),t=e("../../registry"),f=e("./uniform_text").resizeText,n=e("./attributes"),o=n.textfont,l=n.insidetextfont,h=n.outsidetextfont,i=e("./helpers");function s(L){var I=r.select(L).selectAll("g.barlayer").selectAll("g.trace");f(L,I,"bar");var E=I.size(),k=L._fullLayout;I.style("opacity",function(C){return C[0].trace.opacity}).each(function(C){(k.barmode==="stack"&&E>1||k.bargap===0&&k.bargroupgap===0&&!C[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")}),I.selectAll("g.points").each(function(C){var D=r.select(this),F=C[0].trace;p(D,F,L)}),t.getComponentMethod("errorbars","style")(I)}function p(L,I,E){u.pointStyle(L.selectAll("path"),I,E),d(L,I,E)}function d(L,I,E){L.selectAll("text").each(function(k){var C=r.select(this),D=c.ensureUniformFontSize(E,x(C,k,I,E));u.font(C,D)})}function g(L,I,E){var k=I[0].trace;k.selectedpoints?b(E,k,L):(p(E,k,L),t.getComponentMethod("errorbars","style")(E))}function b(L,I,E){u.selectedPointStyle(L.selectAll("path"),I),m(L.selectAll("text"),I,E)}function m(L,I,E){L.each(function(k){var C=r.select(this),D;if(k.selected){D=c.ensureUniformFontSize(E,x(C,k,I,E));var F=I.selected.textfont&&I.selected.textfont.color;F&&(D.color=F),u.font(C,D)}else u.selectedTextStyle(C,I)})}function x(L,I,E,k){var C=k._fullLayout.font,D=E.textfont;if(L.classed("bartext-inside")){var F=P(I,E);D=y(E,I.i,C,F)}else L.classed("bartext-outside")&&(D=T(E,I.i,C));return D}function w(L,I,E){return M(o,L.textfont,I,E)}function y(L,I,E,k){var C=w(L,I,E),D=L._input.textfont===void 0||L._input.textfont.color===void 0||Array.isArray(L.textfont.color)&&L.textfont.color[I]===void 0;return D&&(C={color:a.contrast(k),family:C.family,size:C.size}),M(l,L.insidetextfont,I,C)}function T(L,I,E){var k=w(L,I,E);return M(h,L.outsidetextfont,I,k)}function M(L,I,E,k){I=I||{};var C=i.getValue(I.family,E),D=i.getValue(I.size,E),F=i.getValue(I.color,E);return{family:i.coerceString(L.family,C,k.family),size:i.coerceNumber(L.size,D,k.size),color:i.coerceColor(L.color,F,k.color)}}function P(L,I){return I.type==="waterfall"?I[L.dir].marker.color:L.mc||I.marker.color}v.exports={style:s,styleTextPoints:d,styleOnSelect:g,getInsideTextFont:y,getOutsideTextFont:T,getBarColor:P,resizeText:f}},{"../../components/color":643,"../../components/drawing":665,"../../lib":778,"../../registry":911,"./attributes":921,"./helpers":927,"./uniform_text":937,d3:169}],936:[function(e,v,S){var r=e("../../components/color"),a=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults");v.exports=function(t,f,n,o,l){n("marker.color",o),a(t,"marker")&&u(t,f,l,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",r.defaultLine),a(t,"marker.line")&&u(t,f,l,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":643,"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654}],937:[function(e,v,S){var r=e("d3"),a=e("../../lib");function u(n,o,l){var h=n._fullLayout,i=h["_"+l+"Text_minsize"];if(i){var s=h.uniformtext.mode==="hide",p;switch(l){case"funnelarea":case"pie":case"sunburst":p="g.slice";break;case"treemap":p="g.slice, g.pathbar";break;default:p="g.points > g.point"}o.selectAll(p).each(function(d){var g=d.transform;if(g){g.scale=s&&g.hide?0:i/g.fontSize;var b=r.select(this).select("text");b.attr("transform",a.getTextTransform(g))}})}}function c(n,o,l){if(l.uniformtext.mode){var h=f(n),i=l.uniformtext.minsize,s=o.scale*o.fontSize;o.hide=s<i,l[h]=l[h]||1/0,o.hide||(l[h]=Math.min(l[h],Math.max(s,i)))}}function t(n,o){var l=f(n);o[l]=void 0}function f(n){return"_"+n+"Text_minsize"}v.exports={recordMinTextSize:c,clearMinTextSize:t,resizeText:u}},{"../../lib":778,d3:169}],938:[function(e,v,S){var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../lib/extend").extendFlat,u=e("../scatterpolar/attributes"),c=e("../bar/attributes");v.exports={r:u.r,theta:u.theta,r0:u.r0,dr:u.dr,theta0:u.theta0,dtheta:u.dtheta,thetaunit:u.thetaunit,base:a({},c.base,{}),offset:a({},c.offset,{}),width:a({},c.width,{}),text:a({},c.text,{}),hovertext:a({},c.hovertext,{}),marker:c.marker,hoverinfo:u.hoverinfo,hovertemplate:r(),selected:c.selected,unselected:c.unselected}},{"../../lib/extend":768,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatterpolar/attributes":1261}],939:[function(e,v,S){var r=e("../../components/colorscale/helpers").hasColorscale,a=e("../../components/colorscale/calc"),u=e("../bar/arrays_to_calcdata"),c=e("../bar/cross_trace_calc").setGroupPositions,t=e("../scatter/calc_selection"),f=e("../../registry").traceIs,n=e("../../lib").extendFlat;function o(h,i){for(var s=h._fullLayout,p=i.subplot,d=s[p].radialaxis,g=s[p].angularaxis,b=d.makeCalcdata(i,"r"),m=g.makeCalcdata(i,"theta"),x=i._length,w=new Array(x),y=b,T=m,M=0;M<x;M++)w[M]={p:T[M],s:y[M]};function P(L){var I=i[L];I!==void 0&&(i["_"+L]=Array.isArray(I)?g.makeCalcdata(i,L):g.d2c(I,i.thetaunit))}return g.type==="linear"&&(P("width"),P("offset")),r(i,"marker")&&a(h,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),r(i,"marker.line")&&a(h,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}),u(w,i),t(w,i),w}function l(h,i,s){for(var p=h.calcdata,d=[],g=0;g<p.length;g++){var b=p[g],m=b[0].trace;m.visible===!0&&f(m,"bar")&&m.subplot===s&&d.push(b)}var x=n({},i.radialaxis,{_id:"x"}),w=i.angularaxis;c(h,w,x,d,{mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap})}v.exports={calc:o,crossTraceCalc:l}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"../../lib":778,"../../registry":911,"../bar/arrays_to_calcdata":920,"../bar/cross_trace_calc":924,"../scatter/calc_selection":1189}],940:[function(e,v,S){var r=e("../../lib"),a=e("../scatterpolar/defaults").handleRThetaDefaults,u=e("../bar/style_defaults"),c=e("./attributes");v.exports=function(f,n,o,l){function h(s,p){return r.coerce(f,n,c,s,p)}var i=a(f,n,l,h);if(!i){n.visible=!1;return}h("thetaunit"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate"),u(f,n,h,o,l),r.coerceSelectionMarkerOpacity(n,h)}},{"../../lib":778,"../bar/style_defaults":936,"../scatterpolar/defaults":1263,"./attributes":938}],941:[function(e,v,S){var r=e("../../components/fx"),a=e("../../lib"),u=e("../bar/hover").getTraceColor,c=a.fillText,t=e("../scatterpolar/hover").makeHoverPointText,f=e("../../plots/polar/helpers").isPtInsidePolygon;v.exports=function(o,l,h){var i=o.cd,s=i[0].trace,p=o.subplot,d=p.radialAxis,g=p.angularAxis,b=p.vangles,m=b?f:a.isPtInsideSector,x=o.maxHoverDistance,w=g._period||2*Math.PI,y=Math.abs(d.g2p(Math.sqrt(l*l+h*h))),T=Math.atan2(h,l);d.range[0]>d.range[1]&&(T+=Math.PI);var M=function(E){return m(y,T,[E.rp0,E.rp1],[E.thetag0,E.thetag1],b)?x+Math.min(1,Math.abs(E.thetag1-E.thetag0)/w)-1+(E.rp1-y)/(E.rp1-E.rp0)-1:1/0};if(r.getClosest(i,M,o),o.index!==!1){var P=o.index,L=i[P];o.x0=o.x1=L.ct[0],o.y0=o.y1=L.ct[1];var I=a.extendFlat({},L,{r:L.s,theta:L.p});return c(L,s,o),t(I,s,p,o),o.hovertemplate=s.hovertemplate,o.color=u(s,L),o.xLabelVal=o.yLabelVal=void 0,L.s<0&&(o.idealAlign="left"),[o]}}},{"../../components/fx":683,"../../lib":778,"../../plots/polar/helpers":893,"../bar/hover":928,"../scatterpolar/hover":1265}],942:[function(e,v,S){v.exports={moduleType:"trace",name:"barpolar",basePlotModule:e("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("../scatterpolar/format_labels"),style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../bar/select"),meta:{}}},{"../../plots/polar":894,"../bar/select":933,"../bar/style":935,"../scatter/marker_colorbar":1205,"../scatterpolar/format_labels":1264,"./attributes":938,"./calc":939,"./defaults":940,"./hover":941,"./layout_attributes":943,"./layout_defaults":944,"./plot":945}],943:[function(e,v,S){v.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],944:[function(e,v,S){var r=e("../../lib"),a=e("./layout_attributes");v.exports=function(u,c,t){var f={},n;function o(i,s){return r.coerce(u[n]||{},c[n],a,i,s)}for(var l=0;l<t.length;l++){var h=t[l];h.type==="barpolar"&&h.visible===!0&&(n=h.subplot,f[n]||(o("barmode"),o("bargap"),f[n]=1))}}},{"../../lib":778,"./layout_attributes":943}],945:[function(e,v,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("../../lib"),c=e("../../components/drawing"),t=e("../../plots/polar/helpers");v.exports=function(o,l,h){var i=l.xaxis,s=l.yaxis,p=l.radialAxis,d=l.angularAxis,g=f(l),b=l.layers.frontplot.select("g.barlayer");u.makeTraceGroups(b,h,"trace bars").each(function(){var m=r.select(this),x=u.ensureSingle(m,"g","points"),w=x.selectAll("g.point").data(u.identity);w.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),w.exit().remove(),w.each(function(y){var T=r.select(this),M=y.rp0=p.c2p(y.s0),P=y.rp1=p.c2p(y.s1),L=y.thetag0=d.c2g(y.p0),I=y.thetag1=d.c2g(y.p1),E;if(!a(M)||!a(P)||!a(L)||!a(I)||M===P||L===I)E="M0,0Z";else{var k=p.c2g(y.s1),C=(L+I)/2;y.ct=[i.c2p(k*Math.cos(C)),s.c2p(k*Math.sin(C))],E=g(M,P,L,I)}u.ensureSingle(T,"path").attr("d",E)}),c.setClipUrl(m,l._hasClipOnAxisFalse?l.clipIds.forTraces:null,o)})};function f(n){var o=n.cxx,l=n.cyy;return n.vangles?function(h,i,s,p){var d,g;u.angleDelta(s,p)>0?(d=s,g=p):(d=p,g=s);var b=t.findEnclosingVertexAngles(d,n.vangles)[0],m=t.findEnclosingVertexAngles(g,n.vangles)[1],x=[b,(d+g)/2,m];return t.pathPolygonAnnulus(h,i,d,g,x,o,l)}:function(h,i,s,p){return u.pathAnnulus(h,i,s,p,o,l)}}},{"../../components/drawing":665,"../../lib":778,"../../plots/polar/helpers":893,d3:169,"fast-isnumeric":241}],946:[function(e,v,S){var r=e("../scatter/attributes"),a=e("../bar/attributes"),u=e("../../components/color/attributes"),c=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../lib/extend").extendFlat,f=r.marker,n=f.line;v.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:t({},f.symbol,{arrayOk:!1,editType:"plot"}),opacity:t({},f.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:t({},f.size,{arrayOk:!1,editType:"calc"}),color:t({},f.color,{arrayOk:!1,editType:"style"}),line:{color:t({},n.color,{arrayOk:!1,dflt:u.defaultLine,editType:"style"}),width:t({},n.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:r.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:{marker:r.selected.marker,editType:"style"},unselected:{marker:r.unselected.marker,editType:"style"},text:t({},r.text,{}),hovertext:t({},r.hovertext,{}),hovertemplate:c({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":642,"../../lib/extend":768,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatter/attributes":1187}],947:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../plots/cartesian/axes"),u=e("../../plots/cartesian/align_period"),c=e("../../lib"),t=e("../../constants/numerical").BADNUM,f=c._;v.exports=function(T,M){var P=T._fullLayout,L=a.getFromId(T,M.xaxis||"x"),I=a.getFromId(T,M.yaxis||"y"),E=[],k=M.type==="violin"?"_numViolins":"_numBoxes",C,D,F,N,G,U,X;M.orientation==="h"?(F=L,N="x",G=I,U="y",X=!!M.yperiodalignment):(F=I,N="y",G=L,U="x",X=!!M.xperiodalignment);var z=n(M,U,G,P[k]),B=z[0],j=z[1],V=c.distinctVals(B),K=V.vals,te=V.minDiff/2,$,ie,se,Q,H,oe,re=(M.boxpoints||M.points)==="all"?c.identity:function(zt){return zt.v<$.lf||zt.v>$.uf};if(M._hasPreCompStats){var ee=M[N],ae=function(zt){return F.d2c((M[zt]||[])[C])},fe=1/0,de=-1/0;for(C=0;C<M._length;C++){var pe=B[C];if(!!r(pe)){if($={},$.pos=$[U]=pe,X&&j&&($.orig_p=j[C]),$.q1=ae("q1"),$.med=ae("median"),$.q3=ae("q3"),ie=[],ee&&c.isArrayOrTypedArray(ee[C]))for(D=0;D<ee[C].length;D++)oe=F.d2c(ee[C][D]),oe!==t&&(H={v:oe,i:[C,D]},i(H,M,[C,D]),ie.push(H));if($.pts=ie.sort(p),se=$[N]=ie.map(d),Q=se.length,$.med!==t&&$.q1!==t&&$.q3!==t&&$.med>=$.q1&&$.q3>=$.med){var W=ae("lowerfence");$.lf=W!==t&&W<=$.q1?W:g($,se,Q);var ue=ae("upperfence");$.uf=ue!==t&&ue>=$.q3?ue:b($,se,Q);var me=ae("mean");$.mean=me!==t?me:Q?c.mean(se,Q):($.q1+$.q3)/2;var be=ae("sd");$.sd=me!==t&&be>=0?be:Q?c.stdev(se,Q,$.mean):$.q3-$.q1,$.lo=m($),$.uo=x($);var Me=ae("notchspan");Me=Me!==t&&Me>0?Me:w($,Q),$.ln=$.med-Me,$.un=$.med+Me;var Pe=$.lf,Ge=$.uf;M.boxpoints&&se.length&&(Pe=Math.min(Pe,se[0]),Ge=Math.max(Ge,se[Q-1])),M.notched&&(Pe=Math.min(Pe,$.ln),Ge=Math.max(Ge,$.un)),$.min=Pe,$.max=Ge}else{c.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+$.q1,"median = "+$.med,"q3 = "+$.q3].join(`
`));var ze;$.med!==t?ze=$.med:$.q1!==t?$.q3!==t?ze=($.q1+$.q3)/2:ze=$.q1:$.q3!==t?ze=$.q3:ze=0,$.med=ze,$.q1=$.q3=ze,$.lf=$.uf=ze,$.mean=$.sd=ze,$.ln=$.un=ze,$.min=$.max=ze}fe=Math.min(fe,$.min),de=Math.max(de,$.max),$.pts2=ie.filter(re),E.push($)}}M._extremes[F._id]=a.findExtremes(F,[fe,de],{padded:!0})}else{var Qe=F.makeCalcdata(M,N),tt=o(K,te),Ce=K.length,Ae=l(Ce);for(C=0;C<M._length;C++)if(oe=Qe[C],!!r(oe)){var Be=c.findBin(B[C],tt);Be>=0&&Be<Ce&&(H={v:oe,i:C},i(H,M,C),Ae[Be].push(H))}var qe=1/0,Tt=-1/0,At=M.quartilemethod,Ne=At==="exclusive",ct=At==="inclusive";for(C=0;C<Ce;C++)if(Ae[C].length>0){if($={},$.pos=$[U]=K[C],ie=$.pts=Ae[C].sort(p),se=$[N]=ie.map(d),Q=se.length,$.min=se[0],$.max=se[Q-1],$.mean=c.mean(se,Q),$.sd=c.stdev(se,Q,$.mean),$.med=c.interp(se,.5),Q%2&&(Ne||ct)){var Mt,Wt;Ne?(Mt=se.slice(0,Q/2),Wt=se.slice(Q/2+1)):ct&&(Mt=se.slice(0,Q/2+1),Wt=se.slice(Q/2)),$.q1=c.interp(Mt,.5),$.q3=c.interp(Wt,.5)}else $.q1=c.interp(se,.25),$.q3=c.interp(se,.75);$.lf=g($,se,Q),$.uf=b($,se,Q),$.lo=m($),$.uo=x($);var qt=w($,Q);$.ln=$.med-qt,$.un=$.med+qt,qe=Math.min(qe,$.ln),Tt=Math.max(Tt,$.un),$.pts2=ie.filter(re),E.push($)}M._extremes[F._id]=a.findExtremes(F,M.notched?Qe.concat([qe,Tt]):Qe,{padded:!0})}return s(E,M),E.length>0?(E[0].t={num:P[k],dPos:te,posLetter:U,valLetter:N,labels:{med:f(T,"median:"),min:f(T,"min:"),q1:f(T,"q1:"),q3:f(T,"q3:"),max:f(T,"max:"),mean:M.boxmean==="sd"?f(T,"mean \xB1 \u03C3:"):f(T,"mean:"),lf:f(T,"lower fence:"),uf:f(T,"upper fence:")}},P[k]++,E):[{t:{empty:!0}}]};function n(y,T,M,P){var L=T in y,I=T+"0"in y,E="d"+T in y;if(L||I&&E){var k=M.makeCalcdata(y,T),C=u(y,M,T,k);return[C,k]}var D;I?D=y[T+"0"]:"name"in y&&(M.type==="category"||r(y.name)&&["linear","log"].indexOf(M.type)!==-1||c.isDateTime(y.name)&&M.type==="date")?D=y.name:D=P;for(var F=M.type==="multicategory"?M.r2c_just_indices(D):M.d2c(D,0,y[T+"calendar"]),N=y._length,G=new Array(N),U=0;U<N;U++)G[U]=F;return[G]}function o(y,T){for(var M=y.length,P=new Array(M+1),L=0;L<M;L++)P[L]=y[L]-T;return P[M]=y[M-1]+T,P}function l(y){for(var T=new Array(y),M=0;M<y;M++)T[M]=[];return T}var h={text:"tx",hovertext:"htx"};function i(y,T,M){for(var P in h)c.isArrayOrTypedArray(T[P])&&(Array.isArray(M)?c.isArrayOrTypedArray(T[P][M[0]])&&(y[h[P]]=T[P][M[0]][M[1]]):y[h[P]]=T[P][M])}function s(y,T){if(c.isArrayOrTypedArray(T.selectedpoints))for(var M=0;M<y.length;M++){for(var P=y[M].pts||[],L={},I=0;I<P.length;I++)L[P[I].i]=I;c.tagSelected(P,T,L)}}function p(y,T){return y.v-T.v}function d(y){return y.v}function g(y,T,M){return M===0?y.q1:Math.min(y.q1,T[Math.min(c.findBin(2.5*y.q1-1.5*y.q3,T,!0)+1,M-1)])}function b(y,T,M){return M===0?y.q3:Math.max(y.q3,T[Math.max(c.findBin(2.5*y.q3-1.5*y.q1,T),0)])}function m(y){return 4*y.q1-3*y.q3}function x(y){return 4*y.q3-3*y.q1}function w(y,T){return T===0?0:1.57*(y.q3-y.q1)/Math.sqrt(T)}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"fast-isnumeric":241}],948:[function(e,v,S){var r=e("../../plots/cartesian/axes"),a=e("../../lib"),u=e("../../plots/cartesian/constraints").getAxisGroup,c=["v","h"];function t(n,o){for(var l=n.calcdata,h=o.xaxis,i=o.yaxis,s=0;s<c.length;s++){for(var p=c[s],d=p==="h"?i:h,g=[],b=0;b<l.length;b++){var m=l[b],x=m[0].t,w=m[0].trace;w.visible===!0&&(w.type==="box"||w.type==="candlestick")&&!x.empty&&(w.orientation||"v")===p&&w.xaxis===h._id&&w.yaxis===i._id&&g.push(b)}f("box",n,g,d)}}function f(n,o,l,h){var i=o.calcdata,s=o._fullLayout,p=h._id,d=p.charAt(0),g,b,m,x=[],w=0;for(g=0;g<l.length;g++)for(m=i[l[g]],b=0;b<m.length;b++)x.push(h.c2l(m[b].pos,!0)),w+=(m[b].pts2||[]).length;if(!!x.length){var y=a.distinctVals(x,{unitMinDiff:h.type==="category"||h.type==="multicategory"}),T=y.minDiff/2;r.minDtick(h,y.minDiff,y.vals[0],!0);var M=n==="violin"?"_numViolins":"_numBoxes",P=s[M],L=s[n+"mode"]==="group"&&P>1,I=1-s[n+"gap"],E=1-s[n+"groupgap"];for(g=0;g<l.length;g++){m=i[l[g]];var k=m[0].trace,C=m[0].t,D=k.width,F=k.side,N,G,U,X;if(D)N=G=X=D/2,U=0;else if(N=T,L){var z=u(s,h._id)+k.orientation,B=s._alignmentOpts[z]||{},j=B[k.alignmentgroup]||{},V=Object.keys(j.offsetGroups||{}).length,K=V||P,te=V?k._offsetIndex:C.num;G=N*I*E/K,U=2*N*(-.5+(te+.5)/K)*I,X=N*I/K}else G=N*I*E,U=0,X=N;C.dPos=N,C.bPos=U,C.bdPos=G,C.wHover=X;var $,ie,se=U+G,Q,H,oe,re,ee,ae,fe=Boolean(D),de=(k.boxpoints||k.points)&&w>0;if(F==="positive"?($=N*(D?1:.5),Q=se,ie=Q=U):F==="negative"?($=Q=U,ie=N*(D?1:.5),H=se):($=ie=N,Q=H=se),de){var pe=k.pointpos,W=k.jitter,ue=k.marker.size/2,me=0;pe+W>=0&&(me=se*(pe+W),me>$?(fe=!0,ee=ue,oe=me):me>Q&&(ee=ue,oe=$)),me<=$&&(oe=$);var be=0;pe-W<=0&&(be=-se*(pe-W),be>ie?(fe=!0,ae=ue,re=be):be>H&&(ae=ue,re=ie)),be<=ie&&(re=ie)}else oe=$,re=ie;var Me=new Array(m.length);for(b=0;b<m.length;b++)Me[b]=m[b].pos;k._extremes[p]=r.findExtremes(h,Me,{padded:fe,vpadminus:re,vpadplus:oe,vpadLinearized:!0,ppadminus:{x:ae,y:ee}[d],ppadplus:{x:ee,y:ae}[d]})}}}v.exports={crossTraceCalc:t,setPositionOffset:f}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../plots/cartesian/constraints":835}],949:[function(e,v,S){var r=e("../../lib"),a=e("../../registry"),u=e("../../components/color"),c=e("../scatter/period_defaults"),t=e("../bar/defaults").handleGroupingDefaults,f=e("../../plots/cartesian/axis_autotype"),n=e("./attributes");function o(s,p,d,g){function b(L,I){return r.coerce(s,p,n,L,I)}if(l(s,p,b,g),p.visible!==!1){c(s,p,g,b);var m=p._hasPreCompStats;m&&(b("lowerfence"),b("upperfence")),b("line.color",(s.marker||{}).color||d),b("line.width"),b("fillcolor",u.addOpacity(p.line.color,.5));var x=!1;if(m){var w=b("mean"),y=b("sd");w&&w.length&&(x=!0,y&&y.length&&(x="sd"))}b("boxmean",x),b("whiskerwidth"),b("width"),b("quartilemethod");var T=!1;if(m){var M=b("notchspan");M&&M.length&&(T=!0)}else r.validate(s.notchwidth,n.notchwidth)&&(T=!0);var P=b("notched",T);P&&b("notchwidth"),h(s,p,b,{prefix:"box"})}}function l(s,p,d,g){function b(V){var K=0;return V&&V.length&&(K+=1,r.isArrayOrTypedArray(V[0])&&V[0].length&&(K+=1)),K}function m(V){return r.validate(s[V],n[V])}var x=d("y"),w=d("x"),y;if(p.type==="box"){var T=d("q1"),M=d("median"),P=d("q3");p._hasPreCompStats=T&&T.length&&M&&M.length&&P&&P.length,y=Math.min(r.minRowLength(T),r.minRowLength(M),r.minRowLength(P))}var L=b(x),I=b(w),E=L&&r.minRowLength(x),k=I&&r.minRowLength(w),C=g.calendar,D={autotypenumbers:g.autotypenumbers},F,N;if(p._hasPreCompStats)switch(String(I)+String(L)){case"00":var G=m("x0")||m("dx"),U=m("y0")||m("dy");U&&!G?F="h":F="v",N=y;break;case"10":F="v",N=Math.min(y,k);break;case"20":F="h",N=Math.min(y,w.length);break;case"01":F="h",N=Math.min(y,E);break;case"02":F="v",N=Math.min(y,x.length);break;case"12":F="v",N=Math.min(y,k,x.length);break;case"21":F="h",N=Math.min(y,w.length,E);break;case"11":N=0;break;case"22":var X=!1,z;for(z=0;z<w.length;z++)if(f(w[z],C,D)==="category"){X=!0;break}if(X)F="v",N=Math.min(y,k,x.length);else{for(z=0;z<x.length;z++)if(f(x[z],C,D)==="category"){X=!0;break}X?(F="h",N=Math.min(y,w.length,E)):(F="v",N=Math.min(y,k,x.length))}break}else L>0?(F="v",I>0?N=Math.min(k,E):N=Math.min(E)):I>0?(F="h",N=Math.min(k)):N=0;if(!N){p.visible=!1;return}p._length=N;var B=d("orientation",F);p._hasPreCompStats?B==="v"&&I===0?(d("x0",0),d("dx",1)):B==="h"&&L===0&&(d("y0",0),d("dy",1)):B==="v"&&I===0?d("x0"):B==="h"&&L===0&&d("y0");var j=a.getComponentMethod("calendars","handleTraceDefaults");j(s,p,["x","y"],g)}function h(s,p,d,g){var b=g.prefix,m=r.coerce2(s,p,n,"marker.outliercolor"),x=d("marker.line.outliercolor"),w="outliers";p._hasPreCompStats?w="all":(m||x)&&(w="suspectedoutliers");var y=d(b+"points",w);y?(d("jitter",y==="all"?.3:0),d("pointpos",y==="all"?-1.5:0),d("marker.symbol"),d("marker.opacity"),d("marker.size"),d("marker.color",p.line.color),d("marker.line.color"),d("marker.line.width"),y==="suspectedoutliers"&&(d("marker.line.outliercolor",p.marker.color),d("marker.line.outlierwidth")),d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size"),d("text"),d("hovertext")):delete p.marker;var T=d("hoveron");(T==="all"||T.indexOf("points")!==-1)&&d("hovertemplate"),r.coerceSelectionMarkerOpacity(p,d)}function i(s,p){var d,g;function b(w){return r.coerce(g._input,g,n,w)}for(var m=0;m<s.length;m++){g=s[m];var x=g.type;(x==="box"||x==="violin")&&(d=g._input,p[x+"mode"]==="group"&&t(d,g,p,b))}}v.exports={supplyDefaults:o,crossTraceDefaults:i,handleSampleDefaults:l,handlePointsDefaults:h}},{"../../components/color":643,"../../lib":778,"../../plots/cartesian/axis_autotype":829,"../../registry":911,"../bar/defaults":925,"../scatter/period_defaults":1207,"./attributes":946}],950:[function(e,v,S){v.exports=function(a,u){return u.hoverOnBox&&(a.hoverOnBox=u.hoverOnBox),"xVal"in u&&(a.x=u.xVal),"yVal"in u&&(a.y=u.yVal),u.xa&&(a.xaxis=u.xa),u.ya&&(a.yaxis=u.ya),a}},{}],951:[function(e,v,S){var r=e("../../plots/cartesian/axes"),a=e("../../lib"),u=e("../../components/fx"),c=e("../../components/color"),t=a.fillText;function f(l,h,i,s){var p=l.cd,d=p[0].trace,g=d.hoveron,b=[],m;return g.indexOf("boxes")!==-1&&(b=b.concat(n(l,h,i,s))),g.indexOf("points")!==-1&&(m=o(l,h,i)),s==="closest"?m?[m]:b:(m&&b.push(m),b)}function n(l,h,i,s){var p=l.cd,d=l.xa,g=l.ya,b=p[0].trace,m=p[0].t,x=b.type==="violin",w=[],y,T,M,P,L,I,E,k,C,D,F,N=m.bdPos,G,U,X=m.wHover,z=function(de){return M.c2l(de.pos)+m.bPos-M.c2l(I)};x&&b.side!=="both"?(b.side==="positive"&&(C=function(de){var pe=z(de);return u.inbox(pe,pe+X,D)},G=N,U=0),b.side==="negative"&&(C=function(de){var pe=z(de);return u.inbox(pe-X,pe,D)},G=0,U=N)):(C=function(de){var pe=z(de);return u.inbox(pe-X,pe+X,D)},G=U=N);var B;x?B=function(de){return u.inbox(de.span[0]-L,de.span[1]-L,D)}:B=function(de){return u.inbox(de.min-L,de.max-L,D)},b.orientation==="h"?(L=h,I=i,E=B,k=C,y="y",M=g,T="x",P=d):(L=i,I=h,E=C,k=B,y="x",M=d,T="y",P=g);var j=Math.min(1,N/Math.abs(M.r2c(M.range[1])-M.r2c(M.range[0])));D=l.maxHoverDistance-j,F=l.maxSpikeDistance-j;function V(de){return(E(de)+k(de))/2}var K=u.getDistanceFunction(s,E,k,V);if(u.getClosest(p,K,l),l.index===!1)return[];var te=p[l.index],$=b.line.color,ie=(b.marker||{}).color;c.opacity($)&&b.line.width?l.color=$:c.opacity(ie)&&b.boxpoints?l.color=ie:l.color=b.fillcolor,l[y+"0"]=M.c2p(te.pos+m.bPos-U,!0),l[y+"1"]=M.c2p(te.pos+m.bPos+G,!0),l[y+"LabelVal"]=te.orig_p!==void 0?te.orig_p:te.pos;var se=y+"Spike";l.spikeDistance=V(te)*F/D,l[se]=M.c2p(te.pos,!0);var Q={},H=["med","q1","q3","min","max"];(b.boxmean||(b.meanline||{}).visible)&&H.push("mean"),(b.boxpoints||b.points)&&H.push("lf","uf");for(var oe=0;oe<H.length;oe++){var re=H[oe];if(!(!(re in te)||te[re]in Q)){Q[te[re]]=!0;var ee=te[re],ae=P.c2p(ee,!0),fe=a.extendFlat({},l);fe.attr=re,fe[T+"0"]=fe[T+"1"]=ae,fe[T+"LabelVal"]=ee,fe[T+"Label"]=(m.labels?m.labels[re]+" ":"")+r.hoverLabelText(P,ee),fe.hoverOnBox=!0,re==="mean"&&"sd"in te&&b.boxmean==="sd"&&(fe[T+"err"]=te.sd),l.name="",l.spikeDistance=void 0,l[se]=void 0,fe.hovertemplate=!1,w.push(fe)}}return w}function o(l,h,i){for(var s=l.cd,p=l.xa,d=l.ya,g=s[0].trace,b=p.c2p(h),m=d.c2p(i),x,w=function(z){var B=Math.max(3,z.mrc||0);return Math.max(Math.abs(p.c2p(z.x)-b)-B,1-3/B)},y=function(z){var B=Math.max(3,z.mrc||0);return Math.max(Math.abs(d.c2p(z.y)-m)-B,1-3/B)},T=u.quadrature(w,y),M=!1,P,L,I=0;I<s.length;I++){P=s[I];for(var E=0;E<(P.pts||[]).length;E++){L=P.pts[E];var k=T(L);k<=l.distance&&(l.distance=k,M=[I,E])}}if(!M)return!1;P=s[M[0]],L=P.pts[M[1]];var C=p.c2p(L.x,!0),D=d.c2p(L.y,!0),F=L.mrc||1;x=a.extendFlat({},l,{index:L.i,color:(g.marker||{}).color,name:g.name,x0:C-F,x1:C+F,y0:D-F,y1:D+F,spikeDistance:l.distance,hovertemplate:g.hovertemplate});var N=P.orig_p,G=N!==void 0?N:P.pos,U;g.orientation==="h"?(U=d,x.xLabelVal=L.x,x.yLabelVal=G):(U=p,x.xLabelVal=G,x.yLabelVal=L.y);var X=U._id.charAt(0);return x[X+"Spike"]=U.c2p(P.pos,!0),t(L,g,x),x}v.exports={hoverPoints:f,hoverOnBoxes:n,hoverOnPoints:o}},{"../../components/color":643,"../../components/fx":683,"../../lib":778,"../../plots/cartesian/axes":828}],952:[function(e,v,S){v.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults").supplyLayoutDefaults,calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"box",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"./attributes":946,"./calc":947,"./cross_trace_calc":948,"./defaults":949,"./event_data":950,"./hover":951,"./layout_attributes":953,"./layout_defaults":954,"./plot":955,"./select":956,"./style":957}],953:[function(e,v,S){v.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],954:[function(e,v,S){var r=e("../../registry"),a=e("../../lib"),u=e("./layout_attributes");function c(f,n,o,l,h){for(var i=h+"Layout",s=!1,p=0;p<o.length;p++){var d=o[p];if(r.traceIs(d,i)){s=!0;break}}!s||(l(h+"mode"),l(h+"gap"),l(h+"groupgap"))}function t(f,n,o){function l(h,i){return a.coerce(f,n,u,h,i)}c(f,n,o,l,"box")}v.exports={supplyLayoutDefaults:t,_supply:c}},{"../../lib":778,"../../registry":911,"./layout_attributes":953}],955:[function(e,v,S){var r=e("d3"),a=e("../../lib"),u=e("../../components/drawing"),c=5,t=.01;function f(h,i,s,p){var d=i.xaxis,g=i.yaxis;a.makeTraceGroups(p,s,"trace boxes").each(function(b){var m=r.select(this),x=b[0],w=x.t,y=x.trace;if(w.wdPos=w.bdPos*y.whiskerwidth,y.visible!==!0||w.empty){m.remove();return}var T,M;y.orientation==="h"?(T=g,M=d):(T=d,M=g),n(m,{pos:T,val:M},y,w),o(m,{x:d,y:g},y,w),l(m,{pos:T,val:M},y,w)})}function n(h,i,s,p){var d=s.orientation==="h",g=i.val,b=i.pos,m=!!b.rangebreaks,x=p.bPos,w=p.wdPos||0,y=p.bPosPxOffset||0,T=s.whiskerwidth||0,M=s.notched||!1,P=M?1-2*s.notchwidth:1,L,I;Array.isArray(p.bdPos)?(L=p.bdPos[0],I=p.bdPos[1]):(L=p.bdPos,I=p.bdPos);var E=h.selectAll("path.box").data(s.type!=="violin"||s.box.visible?a.identity:[]);E.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),E.exit().remove(),E.each(function(k){if(k.empty)return"M0,0Z";var C=b.c2l(k.pos+x,!0),D=b.l2p(C-L)+y,F=b.l2p(C+I)+y,N=m?(D+F)/2:b.l2p(C)+y,G=s.whiskerwidth,U=m?D*G+(1-G)*N:b.l2p(C-w)+y,X=m?F*G+(1-G)*N:b.l2p(C+w)+y,z=b.l2p(C-L*P)+y,B=b.l2p(C+I*P)+y,j=g.c2p(k.q1,!0),V=g.c2p(k.q3,!0),K=a.constrain(g.c2p(k.med,!0),Math.min(j,V)+1,Math.max(j,V)-1),te=k.lf===void 0||s.boxpoints===!1,$=g.c2p(te?k.min:k.lf,!0),ie=g.c2p(te?k.max:k.uf,!0),se=g.c2p(k.ln,!0),Q=g.c2p(k.un,!0);d?r.select(this).attr("d","M"+K+","+z+"V"+B+"M"+j+","+D+"V"+F+(M?"H"+se+"L"+K+","+B+"L"+Q+","+F:"")+"H"+V+"V"+D+(M?"H"+Q+"L"+K+","+z+"L"+se+","+D:"")+"ZM"+j+","+N+"H"+$+"M"+V+","+N+"H"+ie+(T===0?"":"M"+$+","+U+"V"+X+"M"+ie+","+U+"V"+X)):r.select(this).attr("d","M"+z+","+K+"H"+B+"M"+D+","+j+"H"+F+(M?"V"+se+"L"+B+","+K+"L"+F+","+Q:"")+"V"+V+"H"+D+(M?"V"+Q+"L"+z+","+K+"L"+D+","+se:"")+"ZM"+N+","+j+"V"+$+"M"+N+","+V+"V"+ie+(T===0?"":"M"+U+","+$+"H"+X+"M"+U+","+ie+"H"+X))})}function o(h,i,s,p){var d=i.x,g=i.y,b=p.bdPos,m=p.bPos,x=s.boxpoints||s.points;a.seedPseudoRandom();var w=function(M){return M.forEach(function(P){P.t=p,P.trace=s}),M},y=h.selectAll("g.points").data(x?w:[]);y.enter().append("g").attr("class","points"),y.exit().remove();var T=y.selectAll("path").data(function(M){var P,L=M.pts2,I=Math.max((M.max-M.min)/10,M.q3-M.q1),E=I*1e-9,k=I*t,C=[],D=0,F;if(s.jitter){if(I===0)for(D=1,C=new Array(L.length),P=0;P<L.length;P++)C[P]=1;else for(P=0;P<L.length;P++){var N=Math.max(0,P-c),G=L[N].v,U=Math.min(L.length-1,P+c),X=L[U].v;x!=="all"&&(L[P].v<M.lf?X=Math.min(X,M.lf):G=Math.max(G,M.uf));var z=Math.sqrt(k*(U-N)/(X-G+E))||0;z=a.constrain(Math.abs(z),0,1),C.push(z),D=Math.max(z,D)}F=s.jitter*2/(D||1)}for(P=0;P<L.length;P++){var B=L[P],j=B.v,V=s.jitter?F*C[P]*(a.pseudoRandom()-.5):0,K=M.pos+m+b*(s.pointpos+V);s.orientation==="h"?(B.y=K,B.x=j):(B.x=K,B.y=j),x==="suspectedoutliers"&&j<M.uo&&j>M.lo&&(B.so=!0)}return L});T.enter().append("path").classed("point",!0),T.exit().remove(),T.call(u.translatePoints,d,g)}function l(h,i,s,p){var d=i.val,g=i.pos,b=!!g.rangebreaks,m=p.bPos,x=p.bPosPxOffset||0,w=s.boxmean||(s.meanline||{}).visible,y,T;Array.isArray(p.bdPos)?(y=p.bdPos[0],T=p.bdPos[1]):(y=p.bdPos,T=p.bdPos);var M=h.selectAll("path.mean").data(s.type==="box"&&s.boxmean||s.type==="violin"&&s.box.visible&&s.meanline.visible?a.identity:[]);M.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),M.exit().remove(),M.each(function(P){var L=g.c2l(P.pos+m,!0),I=g.l2p(L-y)+x,E=g.l2p(L+T)+x,k=b?(I+E)/2:g.l2p(L)+x,C=d.c2p(P.mean,!0),D=d.c2p(P.mean-P.sd,!0),F=d.c2p(P.mean+P.sd,!0);s.orientation==="h"?r.select(this).attr("d","M"+C+","+I+"V"+E+(w==="sd"?"m0,0L"+D+","+k+"L"+C+","+I+"L"+F+","+k+"Z":"")):r.select(this).attr("d","M"+I+","+C+"H"+E+(w==="sd"?"m0,0L"+k+","+D+"L"+I+","+C+"L"+k+","+F+"Z":""))})}v.exports={plot:f,plotBoxAndWhiskers:n,plotPoints:o,plotBoxMean:l}},{"../../components/drawing":665,"../../lib":778,d3:169}],956:[function(e,v,S){v.exports=function(a,u){var c=a.cd,t=a.xaxis,f=a.yaxis,n=[],o,l;if(u===!1)for(o=0;o<c.length;o++)for(l=0;l<(c[o].pts||[]).length;l++)c[o].pts[l].selected=0;else for(o=0;o<c.length;o++)for(l=0;l<(c[o].pts||[]).length;l++){var h=c[o].pts[l],i=t.c2p(h.x),s=f.c2p(h.y);u.contains([i,s],null,h.i,a)?(n.push({pointNumber:h.i,x:t.c2d(h.x),y:f.c2d(h.y)}),h.selected=1):h.selected=0}return n}},{}],957:[function(e,v,S){var r=e("d3"),a=e("../../components/color"),u=e("../../components/drawing");function c(f,n,o){var l=o||r.select(f).selectAll("g.trace.boxes");l.style("opacity",function(h){return h[0].trace.opacity}),l.each(function(h){var i=r.select(this),s=h[0].trace,p=s.line.width;function d(m,x,w,y){m.style("stroke-width",x+"px").call(a.stroke,w).call(a.fill,y)}var g=i.selectAll("path.box");if(s.type==="candlestick")g.each(function(m){if(!m.empty){var x=r.select(this),w=s[m.dir];d(x,w.line.width,w.line.color,w.fillcolor),x.style("opacity",s.selectedpoints&&!m.selected?.3:1)}});else{d(g,p,s.line.color,s.fillcolor),i.selectAll("path.mean").style({"stroke-width":p,"stroke-dasharray":2*p+"px,"+p+"px"}).call(a.stroke,s.line.color);var b=i.selectAll("path.point");u.pointStyle(b,s,f)}})}function t(f,n,o){var l=n[0].trace,h=o.selectAll("path.point");l.selectedpoints?u.selectedPointStyle(h,l):u.pointStyle(h,l,f)}v.exports={style:c,styleOnSelect:t}},{"../../components/color":643,"../../components/drawing":665,d3:169}],958:[function(e,v,S){var r=e("../../lib").extendFlat,a=e("../ohlc/attributes"),u=e("../box/attributes");function c(t){return{line:{color:r({},u.line.color,{dflt:t}),width:u.line.width,editType:"style"},fillcolor:u.fillcolor,editType:"style"}}v.exports={xperiod:a.xperiod,xperiod0:a.xperiod0,xperiodalignment:a.xperiodalignment,x:a.x,open:a.open,high:a.high,low:a.low,close:a.close,line:{width:r({},u.line.width,{}),editType:"style"},increasing:c(a.increasing.line.color.dflt),decreasing:c(a.decreasing.line.color.dflt),text:a.text,hovertext:a.hovertext,whiskerwidth:r({},u.whiskerwidth,{dflt:0}),hoverlabel:a.hoverlabel}},{"../../lib":778,"../box/attributes":946,"../ohlc/attributes":1133}],959:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../../plots/cartesian/align_period"),c=e("../ohlc/calc").calcCommon;v.exports=function(f,n){var o=f._fullLayout,l=a.getFromId(f,n.xaxis),h=a.getFromId(f,n.yaxis),i=l.makeCalcdata(n,"x"),s=u(n,l,"x",i),p=c(f,n,i,s,h,t);return p.length?(r.extendFlat(p[0].t,{num:o._numBoxes,dPos:r.distinctVals(s).minDiff/2,posLetter:"x",valLetter:"y"}),o._numBoxes++,p):[{t:{empty:!0}}]};function t(f,n,o,l){return{min:o,q1:Math.min(f,l),med:l,q3:Math.max(f,l),max:n}}},{"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../ohlc/calc":1134}],960:[function(e,v,S){var r=e("../../lib"),a=e("../../components/color"),u=e("../ohlc/ohlc_defaults"),c=e("../scatter/period_defaults"),t=e("./attributes");v.exports=function(o,l,h,i){function s(d,g){return r.coerce(o,l,t,d,g)}var p=u(o,l,s,i);if(!p){l.visible=!1;return}c(o,l,i,s,{x:!0}),s("line.width"),f(o,l,s,"increasing"),f(o,l,s,"decreasing"),s("text"),s("hovertext"),s("whiskerwidth"),i._requestRangeslider[l.xaxis]=!0};function f(n,o,l,h){var i=l(h+".line.color");l(h+".line.width",o.line.width),l(h+".fillcolor",a.addOpacity(i,.5))}},{"../../components/color":643,"../../lib":778,"../ohlc/ohlc_defaults":1138,"../scatter/period_defaults":1207,"./attributes":958}],961:[function(e,v,S){v.exports={moduleType:"trace",name:"candlestick",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e("./attributes"),layoutAttributes:e("../box/layout_attributes"),supplyLayoutDefaults:e("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:e("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("../box/plot").plot,layerName:"boxlayer",style:e("../box/style").style,hoverPoints:e("../ohlc/hover").hoverPoints,selectPoints:e("../ohlc/select")}},{"../../plots/cartesian":841,"../box/cross_trace_calc":948,"../box/layout_attributes":953,"../box/layout_defaults":954,"../box/plot":955,"../box/style":957,"../ohlc/hover":1136,"../ohlc/select":1140,"./attributes":958,"./calc":959,"./defaults":960}],962:[function(e,v,S){var r=e("./axis_defaults"),a=e("../../plot_api/plot_template");v.exports=function(t,f,n,o,l){var h=o("a");h||(o("da"),o("a0"));var i=o("b");i||(o("db"),o("b0")),u(t,f,n,l)};function u(c,t,f,n){var o=["aaxis","baxis"];o.forEach(function(l){var h=l.charAt(0),i=c[l]||{},s=a.newContainer(t,l),p={tickfont:"x",id:h+"axis",letter:h,font:t.font,name:l,data:c[h],calendar:t.calendar,dfltColor:n,bgColor:f.paper_bgcolor,autotypenumbersDflt:f.autotypenumbers,fullLayout:f};r(i,s,p),s._categories=s._categories||[],!c[l]&&i.type!=="-"&&(c[l]={type:i.type})})}},{"../../plot_api/plot_template":817,"./axis_defaults":967}],963:[function(e,v,S){var r=e("../../lib").isArrayOrTypedArray;v.exports=function(u){return a(u,0)};function a(u,c){if(!r(u)||c>=10)return null;for(var t=1/0,f=-1/0,n=u.length,o=0;o<n;o++){var l=u[o];if(r(l)){var h=a(l,c+1);h&&(t=Math.min(h[0],t),f=Math.max(h[1],f))}else t=Math.min(l,t),f=Math.max(l,f)}return[t,f]}},{"../../lib":778}],964:[function(e,v,S){var r=e("../../plots/font_attributes"),a=e("./axis_attributes"),u=e("../../components/color/attributes"),c=r({editType:"calc"});c.family.dflt='"Open Sans", verdana, arial, sans-serif',c.size.dflt=12,c.color.dflt=u.defaultLine,v.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:a,baxis:a,font:c,color:{valType:"color",dflt:u.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":642,"../../plots/font_attributes":856,"./axis_attributes":966}],965:[function(e,v,S){var r=e("../../lib").isArrayOrTypedArray;v.exports=function(a,u,c,t){var f,n,o,l,h,i,s,p,d,g,b,m,x,w=r(c)?"a":"b",y=w==="a"?a.aaxis:a.baxis,T=y.smoothing,M=w==="a"?a.a2i:a.b2j,P=w==="a"?c:t,L=w==="a"?t:c,I=w==="a"?u.a.length:u.b.length,E=w==="a"?u.b.length:u.a.length,k=Math.floor(w==="a"?a.b2j(L):a.a2i(L)),C=w==="a"?function(te){return a.evalxy([],te,k)}:function(te){return a.evalxy([],k,te)};T&&(o=Math.max(0,Math.min(E-2,k)),l=k-o,n=w==="a"?function(te,$){return a.dxydi([],te,o,$,l)}:function(te,$){return a.dxydj([],o,te,l,$)});var D=M(P[0]),F=M(P[1]),N=D<F?1:-1,G=(F-D)*1e-8,U=N>0?Math.floor:Math.ceil,X=N>0?Math.ceil:Math.floor,z=N>0?Math.min:Math.max,B=N>0?Math.max:Math.min,j=U(D+G),V=X(F-G);s=C(D);var K=[[s]];for(f=j;f*N<V*N;f+=N)h=[],b=B(D,f),m=z(F,f+N),x=m-b,i=Math.max(0,Math.min(I-2,Math.floor(.5*(b+m)))),p=C(m),T&&(d=n(i,b-i),g=n(i,m-i),h.push([s[0]+d[0]/3*x,s[1]+d[1]/3*x]),h.push([p[0]-g[0]/3*x,p[1]-g[1]/3*x])),h.push(p),K.push(h),s=p;return K}},{"../../lib":778}],966:[function(e,v,S){var r=e("../../plots/font_attributes"),a=e("../../components/color/attributes"),u=e("../../plots/cartesian/layout_attributes"),c=e("../../plot_api/edit_types").overrideAll;e("../../constants/docs").FORMAT_LINK,e("../../constants/docs").TIME_FORMAT_LINK,v.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:r({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:u.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:r({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:c(u.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:a.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:r({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":642,"../../constants/docs":748,"../../plot_api/edit_types":810,"../../plots/cartesian/layout_attributes":842,"../../plots/font_attributes":856}],967:[function(e,v,S){var r=e("./attributes"),a=e("../../components/color").addOpacity,u=e("../../registry"),c=e("../../lib"),t=e("../../plots/cartesian/tick_value_defaults"),f=e("../../plots/cartesian/tick_label_defaults"),n=e("../../plots/cartesian/category_order_defaults"),o=e("../../plots/cartesian/set_convert"),l=e("../../plots/cartesian/axis_autotype");v.exports=function(s,p,d){var g=d.letter,b=d.font||{},m=r[g+"axis"];function x(z,B){return c.coerce(s,p,m,z,B)}function w(z,B){return c.coerce2(s,p,m,z,B)}d.name&&(p._name=d.name,p._id=d.name),x("autotypenumbers",d.autotypenumbersDflt);var y=x("type");if(y==="-"&&(d.data&&h(p,d.data),p.type==="-"?p.type="linear":y=s.type=p.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",g+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),p.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),p._hovertitle=g,y==="date"){var T=u.getComponentMethod("calendars","handleDefaults");T(s,p,"calendar",d.calendar)}o(p,d.fullLayout),p.c2p=c.identity;var M=x("color",d.dfltColor),P=M===s.color?M:b.color,L=x("title.text");L&&(c.coerceFont(x,"title.font",{family:b.family,size:Math.round(b.size*1.2),color:P}),x("title.offset")),x("tickangle");var I=x("autorange",!p.isValidRange(s.range));I&&x("rangemode"),x("range"),p.cleanRange(),x("fixedrange"),t(s,p,x,y),f(s,p,x,y,d),n(s,p,x,{data:d.data,dataAttr:g});var E=w("gridcolor",a(M,.3)),k=w("gridwidth"),C=x("showgrid");C||(delete p.gridcolor,delete p.gridwidth);var D=w("startlinecolor",M),F=w("startlinewidth",k),N=x("startline",p.showgrid||!!D||!!F);N||(delete p.startlinecolor,delete p.startlinewidth);var G=w("endlinecolor",M),U=w("endlinewidth",k),X=x("endline",p.showgrid||!!G||!!U);return X||(delete p.endlinecolor,delete p.endlinewidth),C?(x("minorgridcount"),x("minorgridwidth",k),x("minorgridcolor",a(E,.06)),p.minorgridcount||(delete p.minorgridwidth,delete p.minorgridcolor)):(delete p.gridcolor,delete p.gridWidth),p.showticklabels==="none"&&(delete p.tickfont,delete p.tickangle,delete p.showexponent,delete p.exponentformat,delete p.minexponent,delete p.tickformat,delete p.showticksuffix,delete p.showtickprefix),p.showticksuffix||delete p.ticksuffix,p.showtickprefix||delete p.tickprefix,x("tickmode"),p};function h(i,s){if(i.type==="-"){var p=i._id,d=p.charAt(0),g=d+"calendar",b=i[g];i.type=l(s,b,{autotypenumbers:i.autotypenumbers})}}},{"../../components/color":643,"../../lib":778,"../../plots/cartesian/axis_autotype":829,"../../plots/cartesian/category_order_defaults":832,"../../plots/cartesian/set_convert":848,"../../plots/cartesian/tick_label_defaults":849,"../../plots/cartesian/tick_value_defaults":851,"../../registry":911,"./attributes":964}],968:[function(e,v,S){var r=e("../../plots/cartesian/axes"),a=e("../../lib").isArray1D,u=e("./cheater_basis"),c=e("./array_minmax"),t=e("./calc_gridlines"),f=e("./calc_labels"),n=e("./calc_clippath"),o=e("../heatmap/clean_2d_array"),l=e("./smooth_fill_2d_array"),h=e("../heatmap/convert_column_xyz"),i=e("./set_convert");v.exports=function(p,d){var g=r.getFromId(p,d.xaxis),b=r.getFromId(p,d.yaxis),m=d.aaxis,x=d.baxis,w=d.x,y=d.y,T=[];w&&a(w)&&T.push("x"),y&&a(y)&&T.push("y"),T.length&&h(d,m,x,"a","b",T);var M=d._a=d._a||d.a,P=d._b=d._b||d.b;w=d._x||d.x,y=d._y||d.y;var L={};if(d._cheater){var I=m.cheatertype==="index"?M.length:M,E=x.cheatertype==="index"?P.length:P;w=u(I,E,d.cheaterslope)}d._x=w=o(w),d._y=y=o(y),l(w,M,P),l(y,M,P),i(d),d.setScale();var k=c(w),C=c(y),D=.5*(k[1]-k[0]),F=.5*(k[1]+k[0]),N=.5*(C[1]-C[0]),G=.5*(C[1]+C[0]),U=1.3;return k=[F-D*U,F+D*U],C=[G-N*U,G+N*U],d._extremes[g._id]=r.findExtremes(g,k,{padded:!0}),d._extremes[b._id]=r.findExtremes(b,C,{padded:!0}),t(d,"a","b"),t(d,"b","a"),f(d,m),f(d,x),L.clipsegments=n(d._xctrl,d._yctrl,m,x),L.x=w,L.y=y,L.a=M,L.b=P,[L]}},{"../../lib":778,"../../plots/cartesian/axes":828,"../heatmap/clean_2d_array":1067,"../heatmap/convert_column_xyz":1069,"./array_minmax":963,"./calc_clippath":969,"./calc_gridlines":970,"./calc_labels":971,"./cheater_basis":973,"./set_convert":986,"./smooth_fill_2d_array":987}],969:[function(e,v,S){v.exports=function(a,u,c,t){var f,n,o,l=[],h=!!c.smoothing,i=!!t.smoothing,s=a[0].length-1,p=a.length-1;for(f=0,n=[],o=[];f<=s;f++)n[f]=a[0][f],o[f]=u[0][f];for(l.push({x:n,y:o,bicubic:h}),f=0,n=[],o=[];f<=p;f++)n[f]=a[f][s],o[f]=u[f][s];for(l.push({x:n,y:o,bicubic:i}),f=s,n=[],o=[];f>=0;f--)n[s-f]=a[p][f],o[s-f]=u[p][f];for(l.push({x:n,y:o,bicubic:h}),f=p,n=[],o=[];f>=0;f--)n[p-f]=a[f][0],o[p-f]=u[f][0];return l.push({x:n,y:o,bicubic:i}),l}},{}],970:[function(e,v,S){var r=e("../../plots/cartesian/axes"),a=e("../../lib/extend").extendFlat;v.exports=function(c,t,f){var n,o,l,h,i,s,p,d,g,b,m,x,w,y,T=c["_"+t],M=c[t+"axis"],P=M._gridlines=[],L=M._minorgridlines=[],I=M._boundarylines=[],E=c["_"+f],k=c[f+"axis"];M.tickmode==="array"&&(M.tickvals=T.slice());var C=c._xctrl,D=c._yctrl,F=C[0].length,N=C.length,G=c._a.length,U=c._b.length;r.prepTicks(M),M.tickmode==="array"&&delete M.tickvals;var X=M.smoothing?3:1;function z(j){var V,K,te,$,ie,se,Q,H,oe,re,ee,ae,fe=[],de=[],pe={};if(t==="b")for(K=c.b2j(j),te=Math.floor(Math.max(0,Math.min(U-2,K))),$=K-te,pe.length=U,pe.crossLength=G,pe.xy=function(W){return c.evalxy([],W,K)},pe.dxy=function(W,ue){return c.dxydi([],W,te,ue,$)},V=0;V<G;V++)se=Math.min(G-2,V),Q=V-se,H=c.evalxy([],V,K),k.smoothing&&V>0&&(oe=c.dxydi([],V-1,te,0,$),fe.push(ie[0]+oe[0]/3),de.push(ie[1]+oe[1]/3),re=c.dxydi([],V-1,te,1,$),fe.push(H[0]-re[0]/3),de.push(H[1]-re[1]/3)),fe.push(H[0]),de.push(H[1]),ie=H;else for(V=c.a2i(j),se=Math.floor(Math.max(0,Math.min(G-2,V))),Q=V-se,pe.length=G,pe.crossLength=U,pe.xy=function(W){return c.evalxy([],V,W)},pe.dxy=function(W,ue){return c.dxydj([],se,W,Q,ue)},K=0;K<U;K++)te=Math.min(U-2,K),$=K-te,H=c.evalxy([],V,K),k.smoothing&&K>0&&(ee=c.dxydj([],se,K-1,Q,0),fe.push(ie[0]+ee[0]/3),de.push(ie[1]+ee[1]/3),ae=c.dxydj([],se,K-1,Q,1),fe.push(H[0]-ae[0]/3),de.push(H[1]-ae[1]/3)),fe.push(H[0]),de.push(H[1]),ie=H;return pe.axisLetter=t,pe.axis=M,pe.crossAxis=k,pe.value=j,pe.constvar=f,pe.index=d,pe.x=fe,pe.y=de,pe.smoothing=k.smoothing,pe}function B(j){var V,K,te,$,ie,se=[],Q=[],H={};if(H.length=T.length,H.crossLength=E.length,t==="b")for(te=Math.max(0,Math.min(U-2,j)),ie=Math.min(1,Math.max(0,j-te)),H.xy=function(oe){return c.evalxy([],oe,j)},H.dxy=function(oe,re){return c.dxydi([],oe,te,re,ie)},V=0;V<F;V++)se[V]=C[j*X][V],Q[V]=D[j*X][V];else for(K=Math.max(0,Math.min(G-2,j)),$=Math.min(1,Math.max(0,j-K)),H.xy=function(oe){return c.evalxy([],j,oe)},H.dxy=function(oe,re){return c.dxydj([],K,oe,$,re)},V=0;V<N;V++)se[V]=C[V][j*X],Q[V]=D[V][j*X];return H.axisLetter=t,H.axis=M,H.crossAxis=k,H.value=T[j],H.constvar=f,H.index=j,H.x=se,H.y=Q,H.smoothing=k.smoothing,H}if(M.tickmode==="array"){for(h=5e-15,i=[Math.floor((T.length-1-M.arraytick0)/M.arraydtick*(1+h)),Math.ceil(-M.arraytick0/M.arraydtick/(1+h))].sort(function(j,V){return j-V}),s=i[0]-1,p=i[1]+1,d=s;d<p;d++)o=M.arraytick0+M.arraydtick*d,!(o<0||o>T.length-1)&&P.push(a(B(o),{color:M.gridcolor,width:M.gridwidth}));for(d=s;d<p;d++)if(l=M.arraytick0+M.arraydtick*d,m=Math.min(l+M.arraydtick,T.length-1),!(l<0||l>T.length-1)&&!(m<0||m>T.length-1))for(x=T[l],w=T[m],n=0;n<M.minorgridcount;n++)y=m-l,!(y<=0)&&(b=x+(w-x)*(n+1)/(M.minorgridcount+1)*(M.arraydtick/y),!(b<T[0]||b>T[T.length-1])&&L.push(a(z(b),{color:M.minorgridcolor,width:M.minorgridwidth})));M.startline&&I.push(a(B(0),{color:M.startlinecolor,width:M.startlinewidth})),M.endline&&I.push(a(B(T.length-1),{color:M.endlinecolor,width:M.endlinewidth}))}else{for(h=5e-15,i=[Math.floor((T[T.length-1]-M.tick0)/M.dtick*(1+h)),Math.ceil((T[0]-M.tick0)/M.dtick/(1+h))].sort(function(j,V){return j-V}),s=i[0],p=i[1],d=s;d<=p;d++)g=M.tick0+M.dtick*d,P.push(a(z(g),{color:M.gridcolor,width:M.gridwidth}));for(d=s-1;d<p+1;d++)for(g=M.tick0+M.dtick*d,n=0;n<M.minorgridcount;n++)b=g+M.dtick*(n+1)/(M.minorgridcount+1),!(b<T[0]||b>T[T.length-1])&&L.push(a(z(b),{color:M.minorgridcolor,width:M.minorgridwidth}));M.startline&&I.push(a(z(T[0]),{color:M.startlinecolor,width:M.startlinewidth})),M.endline&&I.push(a(z(T[T.length-1]),{color:M.endlinecolor,width:M.endlinewidth}))}}},{"../../lib/extend":768,"../../plots/cartesian/axes":828}],971:[function(e,v,S){var r=e("../../plots/cartesian/axes"),a=e("../../lib/extend").extendFlat;v.exports=function(c,t){var f,n,o,l,h,i=t._labels=[],s=t._gridlines;for(f=0;f<s.length;f++)h=s[f],["start","both"].indexOf(t.showticklabels)!==-1&&(n=r.tickText(t,h.value),a(n,{prefix:o,suffix:l,endAnchor:!0,xy:h.xy(0),dxy:h.dxy(0,0),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:f===0,isLast:f===s.length-1}),i.push(n)),["end","both"].indexOf(t.showticklabels)!==-1&&(n=r.tickText(t,h.value),a(n,{endAnchor:!1,xy:h.xy(h.crossLength-1),dxy:h.dxy(h.crossLength-2,1),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:f===0,isLast:f===s.length-1}),i.push(n))}},{"../../lib/extend":768,"../../plots/cartesian/axes":828}],972:[function(e,v,S){var r=.5;v.exports=function(u,c,t,f){var n=u[0]-c[0],o=u[1]-c[1],l=t[0]-c[0],h=t[1]-c[1],i=Math.pow(n*n+o*o,r/2),s=Math.pow(l*l+h*h,r/2),p=(s*s*n-i*i*l)*f,d=(s*s*o-i*i*h)*f,g=s*(i+s)*3,b=i*(i+s)*3;return[[c[0]+(g&&p/g),c[1]+(g&&d/g)],[c[0]-(b&&p/b),c[1]-(b&&d/b)]]}},{}],973:[function(e,v,S){var r=e("../../lib").isArrayOrTypedArray;v.exports=function(a,u,c){var t,f,n,o,l,h,i=[],s=r(a)?a.length:a,p=r(u)?u.length:u,d=r(a)?a:null,g=r(u)?u:null;d&&(n=(d.length-1)/(d[d.length-1]-d[0])/(s-1)),g&&(o=(g.length-1)/(g[g.length-1]-g[0])/(p-1));var b,m=1/0,x=-1/0;for(f=0;f<p;f++)for(i[f]=[],h=g?(g[f]-g[0])*o:f/(p-1),t=0;t<s;t++)l=d?(d[t]-d[0])*n:t/(s-1),b=l-h*c,m=Math.min(b,m),x=Math.max(b,x),i[f][t]=b;var w=1/(x-m),y=-m*w;for(f=0;f<p;f++)for(t=0;t<s;t++)i[f][t]=w*i[f][t]+y;return i}},{"../../lib":778}],974:[function(e,v,S){var r=e("./catmull_rom"),a=e("../../lib").ensureArray;function u(c,t,f){var n=-.5*f[0]+1.5*t[0],o=-.5*f[1]+1.5*t[1];return[(2*n+c[0])/3,(2*o+c[1])/3]}v.exports=function(t,f,n,o,l,h){var i,s,p,d,g,b,m,x,w,y,T=n[0].length,M=n.length,P=l?3*T-2:T,L=h?3*M-2:M;for(t=a(t,L),f=a(f,L),p=0;p<L;p++)t[p]=a(t[p],P),f[p]=a(f[p],P);for(s=0,d=0;s<M;s++,d+=h?3:1)for(g=t[d],b=f[d],m=n[s],x=o[s],i=0,p=0;i<T;i++,p+=l?3:1)g[p]=m[i],b[p]=x[i];if(l)for(s=0,d=0;s<M;s++,d+=h?3:1){for(i=1,p=3;i<T-1;i++,p+=3)w=r([n[s][i-1],o[s][i-1]],[n[s][i],o[s][i]],[n[s][i+1],o[s][i+1]],l),t[d][p-1]=w[0][0],f[d][p-1]=w[0][1],t[d][p+1]=w[1][0],f[d][p+1]=w[1][1];y=u([t[d][0],f[d][0]],[t[d][2],f[d][2]],[t[d][3],f[d][3]]),t[d][1]=y[0],f[d][1]=y[1],y=u([t[d][P-1],f[d][P-1]],[t[d][P-3],f[d][P-3]],[t[d][P-4],f[d][P-4]]),t[d][P-2]=y[0],f[d][P-2]=y[1]}if(h)for(p=0;p<P;p++){for(d=3;d<L-3;d+=3)w=r([t[d-3][p],f[d-3][p]],[t[d][p],f[d][p]],[t[d+3][p],f[d+3][p]],h),t[d-1][p]=w[0][0],f[d-1][p]=w[0][1],t[d+1][p]=w[1][0],f[d+1][p]=w[1][1];y=u([t[0][p],f[0][p]],[t[2][p],f[2][p]],[t[3][p],f[3][p]]),t[1][p]=y[0],f[1][p]=y[1],y=u([t[L-1][p],f[L-1][p]],[t[L-3][p],f[L-3][p]],[t[L-4][p],f[L-4][p]]),t[L-2][p]=y[0],f[L-2][p]=y[1]}if(l&&h)for(d=1;d<L;d+=(d+1)%3===0?2:1){for(p=3;p<P-3;p+=3)w=r([t[d][p-3],f[d][p-3]],[t[d][p],f[d][p]],[t[d][p+3],f[d][p+3]],l),t[d][p-1]=.5*(t[d][p-1]+w[0][0]),f[d][p-1]=.5*(f[d][p-1]+w[0][1]),t[d][p+1]=.5*(t[d][p+1]+w[1][0]),f[d][p+1]=.5*(f[d][p+1]+w[1][1]);y=u([t[d][0],f[d][0]],[t[d][2],f[d][2]],[t[d][3],f[d][3]]),t[d][1]=.5*(t[d][1]+y[0]),f[d][1]=.5*(f[d][1]+y[1]),y=u([t[d][P-1],f[d][P-1]],[t[d][P-3],f[d][P-3]],[t[d][P-4],f[d][P-4]]),t[d][P-2]=.5*(t[d][P-2]+y[0]),f[d][P-2]=.5*(f[d][P-2]+y[1])}return[t,f]}},{"../../lib":778,"./catmull_rom":972}],975:[function(e,v,S){v.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],976:[function(e,v,S){v.exports=function(r,a,u){return a&&u?function(c,t,f,n,o){c||(c=[]);var l,h,i,s,p,d;t*=3,f*=3;var g=n*n,b=1-n,m=b*b,x=b*n*2,w=-3*m,y=3*(m-x),T=3*(x-g),M=3*g,P=o*o,L=P*o,I=1-o,E=I*I,k=E*I;for(d=0;d<r.length;d++)p=r[d],l=w*p[f][t]+y*p[f][t+1]+T*p[f][t+2]+M*p[f][t+3],h=w*p[f+1][t]+y*p[f+1][t+1]+T*p[f+1][t+2]+M*p[f+1][t+3],i=w*p[f+2][t]+y*p[f+2][t+1]+T*p[f+2][t+2]+M*p[f+2][t+3],s=w*p[f+3][t]+y*p[f+3][t+1]+T*p[f+3][t+2]+M*p[f+3][t+3],c[d]=k*l+3*(E*o*h+I*P*i)+L*s;return c}:a?function(c,t,f,n,o){c||(c=[]);var l,h,i,s;t*=3;var p=n*n,d=1-n,g=d*d,b=d*n*2,m=-3*g,x=3*(g-b),w=3*(b-p),y=3*p,T=1-o;for(i=0;i<r.length;i++)s=r[i],l=m*s[f][t]+x*s[f][t+1]+w*s[f][t+2]+y*s[f][t+3],h=m*s[f+1][t]+x*s[f+1][t+1]+w*s[f+1][t+2]+y*s[f+1][t+3],c[i]=T*l+o*h;return c}:u?function(c,t,f,n,o){c||(c=[]);var l,h,i,s,p,d;f*=3;var g=o*o,b=g*o,m=1-o,x=m*m,w=x*m;for(p=0;p<r.length;p++)d=r[p],l=d[f][t+1]-d[f][t],h=d[f+1][t+1]-d[f+1][t],i=d[f+2][t+1]-d[f+2][t],s=d[f+3][t+1]-d[f+3][t],c[p]=w*l+3*(x*o*h+m*g*i)+b*s;return c}:function(c,t,f,n,o){c||(c=[]);var l,h,i,s,p=1-o;for(i=0;i<r.length;i++)s=r[i],l=s[f][t+1]-s[f][t],h=s[f+1][t+1]-s[f+1][t],c[i]=p*l+o*h;return c}}},{}],977:[function(e,v,S){v.exports=function(r,a,u){return a&&u?function(c,t,f,n,o){c||(c=[]);var l,h,i,s,p,d;t*=3,f*=3;var g=n*n,b=g*n,m=1-n,x=m*m,w=x*m,y=o*o,T=1-o,M=T*T,P=T*o*2,L=-3*M,I=3*(M-P),E=3*(P-y),k=3*y;for(d=0;d<r.length;d++)p=r[d],l=L*p[f][t]+I*p[f+1][t]+E*p[f+2][t]+k*p[f+3][t],h=L*p[f][t+1]+I*p[f+1][t+1]+E*p[f+2][t+1]+k*p[f+3][t+1],i=L*p[f][t+2]+I*p[f+1][t+2]+E*p[f+2][t+2]+k*p[f+3][t+2],s=L*p[f][t+3]+I*p[f+1][t+3]+E*p[f+2][t+3]+k*p[f+3][t+3],c[d]=w*l+3*(x*n*h+m*g*i)+b*s;return c}:a?function(c,t,f,n,o){c||(c=[]);var l,h,i,s,p,d;t*=3;var g=o*o,b=g*o,m=1-o,x=m*m,w=x*m;for(p=0;p<r.length;p++)d=r[p],l=d[f+1][t]-d[f][t],h=d[f+1][t+1]-d[f][t+1],i=d[f+1][t+2]-d[f][t+2],s=d[f+1][t+3]-d[f][t+3],c[p]=w*l+3*(x*o*h+m*g*i)+b*s;return c}:u?function(c,t,f,n,o){c||(c=[]);var l,h,i,s;f*=3;var p=1-n,d=o*o,g=1-o,b=g*g,m=g*o*2,x=-3*b,w=3*(b-m),y=3*(m-d),T=3*d;for(i=0;i<r.length;i++)s=r[i],l=x*s[f][t]+w*s[f+1][t]+y*s[f+2][t]+T*s[f+3][t],h=x*s[f][t+1]+w*s[f+1][t+1]+y*s[f+2][t+1]+T*s[f+3][t+1],c[i]=p*l+n*h;return c}:function(c,t,f,n,o){c||(c=[]);var l,h,i,s,p=1-n;for(i=0;i<r.length;i++)s=r[i],l=s[f+1][t]-s[f][t],h=s[f+1][t+1]-s[f][t+1],c[i]=p*l+n*h;return c}}},{}],978:[function(e,v,S){v.exports=function(r,a,u,c,t){var f=a-2,n=u-2;return c&&t?function(o,l,h){o||(o=[]);var i,s,p,d,g,b,m=Math.max(0,Math.min(Math.floor(l),f)),x=Math.max(0,Math.min(Math.floor(h),n)),w=Math.max(0,Math.min(1,l-m)),y=Math.max(0,Math.min(1,h-x));m*=3,x*=3;var T=w*w,M=T*w,P=1-w,L=P*P,I=L*P,E=y*y,k=E*y,C=1-y,D=C*C,F=D*C;for(b=0;b<r.length;b++)g=r[b],i=I*g[x][m]+3*(L*w*g[x][m+1]+P*T*g[x][m+2])+M*g[x][m+3],s=I*g[x+1][m]+3*(L*w*g[x+1][m+1]+P*T*g[x+1][m+2])+M*g[x+1][m+3],p=I*g[x+2][m]+3*(L*w*g[x+2][m+1]+P*T*g[x+2][m+2])+M*g[x+2][m+3],d=I*g[x+3][m]+3*(L*w*g[x+3][m+1]+P*T*g[x+3][m+2])+M*g[x+3][m+3],o[b]=F*i+3*(D*y*s+C*E*p)+k*d;return o}:c?function(o,l,h){o||(o=[]);var i=Math.max(0,Math.min(Math.floor(l),f)),s=Math.max(0,Math.min(Math.floor(h),n)),p=Math.max(0,Math.min(1,l-i)),d=Math.max(0,Math.min(1,h-s)),g,b,m,x,w,y;i*=3;var T=p*p,M=T*p,P=1-p,L=P*P,I=L*P,E=1-d;for(w=0;w<r.length;w++)y=r[w],g=E*y[s][i]+d*y[s+1][i],b=E*y[s][i+1]+d*y[s+1][i+1],m=E*y[s][i+2]+d*y[s+1][i+1],x=E*y[s][i+3]+d*y[s+1][i+1],o[w]=I*g+3*(L*p*b+P*T*m)+M*x;return o}:t?function(o,l,h){o||(o=[]);var i=Math.max(0,Math.min(Math.floor(l),f)),s=Math.max(0,Math.min(Math.floor(h),n)),p=Math.max(0,Math.min(1,l-i)),d=Math.max(0,Math.min(1,h-s)),g,b,m,x,w,y;s*=3;var T=d*d,M=T*d,P=1-d,L=P*P,I=L*P,E=1-p;for(w=0;w<r.length;w++)y=r[w],g=E*y[s][i]+p*y[s][i+1],b=E*y[s+1][i]+p*y[s+1][i+1],m=E*y[s+2][i]+p*y[s+2][i+1],x=E*y[s+3][i]+p*y[s+3][i+1],o[w]=I*g+3*(L*d*b+P*T*m)+M*x;return o}:function(o,l,h){o||(o=[]);var i=Math.max(0,Math.min(Math.floor(l),f)),s=Math.max(0,Math.min(Math.floor(h),n)),p=Math.max(0,Math.min(1,l-i)),d=Math.max(0,Math.min(1,h-s)),g,b,m,x,w=1-d,y=1-p;for(m=0;m<r.length;m++)x=r[m],g=y*x[s][i]+p*x[s][i+1],b=y*x[s+1][i]+p*x[s+1][i+1],o[m]=w*g+d*b;return o}}},{}],979:[function(e,v,S){var r=e("../../lib"),a=e("./xy_defaults"),u=e("./ab_defaults"),c=e("./attributes"),t=e("../../components/color/attributes");v.exports=function(n,o,l,h){function i(d,g){return r.coerce(n,o,c,d,g)}o._clipPathId="clip"+o.uid+"carpet";var s=i("color",t.defaultLine);if(r.coerceFont(i,"font"),i("carpet"),u(n,o,h,i,s),!o.a||!o.b){o.visible=!1;return}o.a.length<3&&(o.aaxis.smoothing=0),o.b.length<3&&(o.baxis.smoothing=0);var p=a(n,o,i);p||(o.visible=!1),o._cheater&&i("cheaterslope")}},{"../../components/color/attributes":642,"../../lib":778,"./ab_defaults":962,"./attributes":964,"./xy_defaults":988}],980:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),plot:e("./plot"),calc:e("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":841,"./attributes":964,"./calc":968,"./defaults":979,"./plot":985}],981:[function(e,v,S){v.exports=function(r,a){for(var u=r._fullData.length,c,t=0;t<u;t++){var f=r._fullData[t];if(f.index!==a.index&&f.type==="carpet"&&(c||(c=f),f.carpet===a.carpet))return f}return c}},{}],982:[function(e,v,S){v.exports=function(a,u,c){if(a.length===0)return"";var t,f=[],n=c?3:1;for(t=0;t<a.length;t+=n)f.push(a[t]+","+u[t]),c&&t<a.length-n&&(f.push("C"),f.push([a[t+1]+","+u[t+1],a[t+2]+","+u[t+2]+" "].join(" ")));return f.join(c?"":"L")}},{}],983:[function(e,v,S){var r=e("../../lib").isArrayOrTypedArray;v.exports=function(u,c,t){var f;for(r(u)?u.length>c.length&&(u=u.slice(0,c.length)):u=[],f=0;f<c.length;f++)u[f]=t(c[f]);return u}},{"../../lib":778}],984:[function(e,v,S){v.exports=function(a,u,c,t,f,n){var o=f[0]*a.dpdx(u),l=f[1]*a.dpdy(c),h=1,i=1;if(n){var s=Math.sqrt(f[0]*f[0]+f[1]*f[1]),p=Math.sqrt(n[0]*n[0]+n[1]*n[1]),d=(f[0]*n[0]+f[1]*n[1])/s/p;i=Math.max(0,d)}var g=Math.atan2(l,o)*180/Math.PI;return g<-90?(g+=180,h=-h):g>90&&(g-=180,h=-h),{angle:g,flip:h,p:a.c2p(t,u,c),offsetMultplier:i}}},{}],985:[function(e,v,S){var r=e("d3"),a=e("../../components/drawing"),u=e("./map_1d_array"),c=e("./makepath"),t=e("./orient_text"),f=e("../../lib/svg_text_utils"),n=e("../../lib"),o=n.strRotate,l=n.strTranslate,h=e("../../constants/alignment");v.exports=function(w,y,T,M){var P=y.xaxis,L=y.yaxis,I=w._fullLayout,E=I._clips;n.makeTraceGroups(M,T,"trace").each(function(k){var C=r.select(this),D=k[0],F=D.trace,N=F.aaxis,G=F.baxis,U=n.ensureSingle(C,"g","minorlayer"),X=n.ensureSingle(C,"g","majorlayer"),z=n.ensureSingle(C,"g","boundarylayer"),B=n.ensureSingle(C,"g","labellayer");C.style("opacity",F.opacity),s(P,L,X,N,"a",N._gridlines),s(P,L,X,G,"b",G._gridlines),s(P,L,U,N,"a",N._minorgridlines),s(P,L,U,G,"b",G._minorgridlines),s(P,L,z,N,"a-boundary",N._boundarylines),s(P,L,z,G,"b-boundary",G._boundarylines);var j=p(w,P,L,F,D,B,N._labels,"a-label"),V=p(w,P,L,F,D,B,G._labels,"b-label");d(w,B,F,D,P,L,j,V),i(F,D,E,P,L)})};function i(x,w,y,T,M){var P,L,I,E,k=y.select("#"+x._clipPathId);k.size()||(k=y.append("clipPath").classed("carpetclip",!0));var C=n.ensureSingle(k,"path","carpetboundary"),D=w.clipsegments,F=[];for(E=0;E<D.length;E++)P=D[E],L=u([],P.x,T.c2p),I=u([],P.y,M.c2p),F.push(c(L,I,P.bicubic));var N="M"+F.join("L")+"Z";k.attr("id",x._clipPathId),C.attr("d",N)}function s(x,w,y,T,M,P){var L="const-"+M+"-lines",I=y.selectAll("."+L).data(P);I.enter().append("path").classed(L,!0).style("vector-effect","non-scaling-stroke"),I.each(function(E){var k=E,C=k.x,D=k.y,F=u([],C,x.c2p),N=u([],D,w.c2p),G="M"+c(F,N,k.smoothing),U=r.select(this);U.attr("d",G).style("stroke-width",k.width).style("stroke",k.color).style("fill","none")}),I.exit().remove()}function p(x,w,y,T,M,P,L,I){var E=P.selectAll("text."+I).data(L);E.enter().append("text").classed(I,!0);var k=0,C={};return E.each(function(D,F){var N;if(D.axis.tickangle==="auto")N=t(T,w,y,D.xy,D.dxy);else{var G=(D.axis.tickangle+180)*Math.PI/180;N=t(T,w,y,D.xy,[Math.cos(G),Math.sin(G)])}F||(C={angle:N.angle,flip:N.flip});var U=(D.endAnchor?-1:1)*N.flip,X=r.select(this).attr({"text-anchor":U>0?"start":"end","data-notex":1}).call(a.font,D.font).text(D.text).call(f.convertToTspans,x),z=a.bBox(this);X.attr("transform",l(N.p[0],N.p[1])+o(N.angle)+l(D.axis.labelpadding*U,z.height*.3)),k=Math.max(k,z.width+D.axis.labelpadding)}),E.exit().remove(),C.maxExtent=k,C}function d(x,w,y,T,M,P,L,I){var E,k,C,D,F=n.aggNums(Math.min,null,y.a),N=n.aggNums(Math.max,null,y.a),G=n.aggNums(Math.min,null,y.b),U=n.aggNums(Math.max,null,y.b);E=.5*(F+N),k=G,C=y.ab2xy(E,k,!0),D=y.dxyda_rough(E,k),L.angle===void 0&&n.extendFlat(L,t(y,M,P,C,y.dxydb_rough(E,k))),m(x,w,y,T,C,D,y.aaxis,M,P,L,"a-title"),E=F,k=.5*(G+U),C=y.ab2xy(E,k,!0),D=y.dxydb_rough(E,k),I.angle===void 0&&n.extendFlat(I,t(y,M,P,C,y.dxyda_rough(E,k))),m(x,w,y,T,C,D,y.baxis,M,P,I,"b-title")}var g=h.LINE_SPACING,b=(1-h.MID_SHIFT)/g+1;function m(x,w,y,T,M,P,L,I,E,k,C){var D=[];L.title.text&&D.push(L.title.text);var F=w.selectAll("text."+C).data(D),N=k.maxExtent;F.enter().append("text").classed(C,!0),F.each(function(){var G=t(y,I,E,M,P);["start","both"].indexOf(L.showticklabels)===-1&&(N=0);var U=L.title.font.size;N+=U+L.title.offset;var X=k.angle+(k.flip<0?180:0),z=(X-G.angle+450)%360,B=z>90&&z<270,j=r.select(this);j.text(L.title.text).call(f.convertToTspans,x),B&&(N=(-f.lineCount(j)+b)*g*U-N),j.attr("transform",l(G.p[0],G.p[1])+o(G.angle)+l(0,N)).attr("text-anchor","middle").call(a.font,L.title.font)}),F.exit().remove()}},{"../../components/drawing":665,"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"./makepath":982,"./map_1d_array":983,"./orient_text":984,d3:169}],986:[function(e,v,S){var r=e("./constants"),a=e("../../lib/search").findBin,u=e("./compute_control_points"),c=e("./create_spline_evaluator"),t=e("./create_i_derivative_evaluator"),f=e("./create_j_derivative_evaluator");v.exports=function(o){var l=o._a,h=o._b,i=l.length,s=h.length,p=o.aaxis,d=o.baxis,g=l[0],b=l[i-1],m=h[0],x=h[s-1],w=l[l.length-1]-l[0],y=h[h.length-1]-h[0],T=w*r.RELATIVE_CULL_TOLERANCE,M=y*r.RELATIVE_CULL_TOLERANCE;g-=T,b+=T,m-=M,x+=M,o.isVisible=function(P,L){return P>g&&P<b&&L>m&&L<x},o.isOccluded=function(P,L){return P<g||P>b||L<m||L>x},o.setScale=function(){var P=o._x,L=o._y,I=u(o._xctrl,o._yctrl,P,L,p.smoothing,d.smoothing);o._xctrl=I[0],o._yctrl=I[1],o.evalxy=c([o._xctrl,o._yctrl],i,s,p.smoothing,d.smoothing),o.dxydi=t([o._xctrl,o._yctrl],p.smoothing,d.smoothing),o.dxydj=f([o._xctrl,o._yctrl],p.smoothing,d.smoothing)},o.i2a=function(P){var L=Math.max(0,Math.floor(P[0]),i-2),I=P[0]-L;return(1-I)*l[L]+I*l[L+1]},o.j2b=function(P){var L=Math.max(0,Math.floor(P[1]),i-2),I=P[1]-L;return(1-I)*h[L]+I*h[L+1]},o.ij2ab=function(P){return[o.i2a(P[0]),o.j2b(P[1])]},o.a2i=function(P){var L=Math.max(0,Math.min(a(P,l),i-2)),I=l[L],E=l[L+1];return Math.max(0,Math.min(i-1,L+(P-I)/(E-I)))},o.b2j=function(P){var L=Math.max(0,Math.min(a(P,h),s-2)),I=h[L],E=h[L+1];return Math.max(0,Math.min(s-1,L+(P-I)/(E-I)))},o.ab2ij=function(P){return[o.a2i(P[0]),o.b2j(P[1])]},o.i2c=function(P,L){return o.evalxy([],P,L)},o.ab2xy=function(P,L,I){if(!I&&(P<l[0]||P>l[i-1]|L<h[0]||L>h[s-1]))return[!1,!1];var E=o.a2i(P),k=o.b2j(L),C=o.evalxy([],E,k);if(I){var D=0,F=0,N=[],G,U,X,z;P<l[0]?(G=0,U=0,D=(P-l[0])/(l[1]-l[0])):P>l[i-1]?(G=i-2,U=1,D=(P-l[i-1])/(l[i-1]-l[i-2])):(G=Math.max(0,Math.min(i-2,Math.floor(E))),U=E-G),L<h[0]?(X=0,z=0,F=(L-h[0])/(h[1]-h[0])):L>h[s-1]?(X=s-2,z=1,F=(L-h[s-1])/(h[s-1]-h[s-2])):(X=Math.max(0,Math.min(s-2,Math.floor(k))),z=k-X),D&&(o.dxydi(N,G,X,U,z),C[0]+=N[0]*D,C[1]+=N[1]*D),F&&(o.dxydj(N,G,X,U,z),C[0]+=N[0]*F,C[1]+=N[1]*F)}return C},o.c2p=function(P,L,I){return[L.c2p(P[0]),I.c2p(P[1])]},o.p2x=function(P,L,I){return[L.p2c(P[0]),I.p2c(P[1])]},o.dadi=function(P){var L=Math.max(0,Math.min(l.length-2,P));return l[L+1]-l[L]},o.dbdj=function(P){var L=Math.max(0,Math.min(h.length-2,P));return h[L+1]-h[L]},o.dxyda=function(P,L,I,E){var k=o.dxydi(null,P,L,I,E),C=o.dadi(P,I);return[k[0]/C,k[1]/C]},o.dxydb=function(P,L,I,E){var k=o.dxydj(null,P,L,I,E),C=o.dbdj(L,E);return[k[0]/C,k[1]/C]},o.dxyda_rough=function(P,L,I){var E=w*(I||.1),k=o.ab2xy(P+E,L,!0),C=o.ab2xy(P-E,L,!0);return[(k[0]-C[0])*.5/E,(k[1]-C[1])*.5/E]},o.dxydb_rough=function(P,L,I){var E=y*(I||.1),k=o.ab2xy(P,L+E,!0),C=o.ab2xy(P,L-E,!0);return[(k[0]-C[0])*.5/E,(k[1]-C[1])*.5/E]},o.dpdx=function(P){return P._m},o.dpdy=function(P){return P._m}}},{"../../lib/search":798,"./compute_control_points":974,"./constants":975,"./create_i_derivative_evaluator":976,"./create_j_derivative_evaluator":977,"./create_spline_evaluator":978}],987:[function(e,v,S){var r=e("../../lib");v.exports=function(u,c,t){var f,n,o,l=[],h=[],i=u[0].length,s=u.length;function p(K,te){var $=0,ie,se=0;return K>0&&(ie=u[te][K-1])!==void 0&&(se++,$+=ie),K<i-1&&(ie=u[te][K+1])!==void 0&&(se++,$+=ie),te>0&&(ie=u[te-1][K])!==void 0&&(se++,$+=ie),te<s-1&&(ie=u[te+1][K])!==void 0&&(se++,$+=ie),$/Math.max(1,se)}var d=0;for(f=0;f<i;f++)for(n=0;n<s;n++)u[n][f]===void 0&&(l.push(f),h.push(n),u[n][f]=p(f,n)),d=Math.max(d,Math.abs(u[n][f]));if(!l.length)return u;var g,b,m,x,w,y,T,M,P,L,I,E=1e-5,k=0,C=100,D=0,F=l.length;do{for(k=0,o=0;o<F;o++){f=l[o],n=h[o];var N=0,G=0,U,X,z,B,j,V;f===0?(j=Math.min(i-1,2),z=c[j],B=c[1],U=u[n][j],X=u[n][1],G+=X+(X-U)*(c[0]-B)/(B-z),N++):f===i-1&&(j=Math.max(0,i-3),z=c[j],B=c[i-2],U=u[n][j],X=u[n][i-2],G+=X+(X-U)*(c[i-1]-B)/(B-z),N++),(f===0||f===i-1)&&n>0&&n<s-1&&(g=t[n+1]-t[n],b=t[n]-t[n-1],G+=(b*u[n+1][f]+g*u[n-1][f])/(b+g),N++),n===0?(V=Math.min(s-1,2),z=t[V],B=t[1],U=u[V][f],X=u[1][f],G+=X+(X-U)*(t[0]-B)/(B-z),N++):n===s-1&&(V=Math.max(0,s-3),z=t[V],B=t[s-2],U=u[V][f],X=u[s-2][f],G+=X+(X-U)*(t[s-1]-B)/(B-z),N++),(n===0||n===s-1)&&f>0&&f<i-1&&(g=c[f+1]-c[f],b=c[f]-c[f-1],G+=(b*u[n][f+1]+g*u[n][f-1])/(b+g),N++),N?G/=N:(m=c[f+1]-c[f],x=c[f]-c[f-1],w=t[n+1]-t[n],y=t[n]-t[n-1],T=m*x*(m+x),M=w*y*(w+y),G=(T*(y*u[n+1][f]+w*u[n-1][f])+M*(x*u[n][f+1]+m*u[n][f-1]))/(M*(x+m)+T*(y+w))),P=G-u[n][f],L=P/d,k+=L*L,I=N?0:.85,u[n][f]+=P*(1+I)}k=Math.sqrt(k)}while(D++<C&&k>E);return r.log("Smoother converged to",k,"after",D,"iterations"),u}},{"../../lib":778}],988:[function(e,v,S){var r=e("../../lib").isArray1D;v.exports=function(u,c,t){var f=t("x"),n=f&&f.length,o=t("y"),l=o&&o.length;if(!n&&!l)return!1;if(c._cheater=!f,(!n||r(f))&&(!l||r(o))){var h=n?f.length:1/0;l&&(h=Math.min(h,o.length)),c.a&&c.a.length&&(h=Math.min(h,c.a.length)),c.b&&c.b.length&&(h=Math.min(h,c.b.length)),c._length=h}else c._length=null;return!0}},{"../../lib":778}],989:[function(e,v,S){var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../scattergeo/attributes"),u=e("../../components/colorscale/attributes"),c=e("../../plots/attributes"),t=e("../../components/color/attributes").defaultLine,f=e("../../lib/extend").extendFlat,n=a.marker.line;v.exports=f({locations:{valType:"data_array",editType:"calc"},locationmode:a.locationmode,z:{valType:"data_array",editType:"calc"},geojson:f({},a.geojson,{}),featureidkey:a.featureidkey,text:f({},a.text,{}),hovertext:f({},a.hovertext,{}),marker:{line:{color:f({},n.color,{dflt:t}),width:f({},n.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:a.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:a.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:f({},c.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:r(),showlegend:f({},c.showlegend,{dflt:!1})},u("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":642,"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scattergeo/attributes":1229}],990:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../constants/numerical").BADNUM,u=e("../../components/colorscale/calc"),c=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection");function f(n){return n&&typeof n=="string"}v.exports=function(o,l){var h=l._length,i=new Array(h),s;l.geojson?s=function(m){return f(m)||r(m)}:s=f;for(var p=0;p<h;p++){var d=i[p]={},g=l.locations[p],b=l.z[p];s(g)&&r(b)?(d.loc=g,d.z=b):(d.loc=null,d.z=a),d.index=p}return c(i,l),u(o,l,{vals:l.z,containerStr:"",cLetter:"z"}),t(i,l),i}},{"../../components/colorscale/calc":651,"../../constants/numerical":753,"../scatter/arrays_to_calcdata":1186,"../scatter/calc_selection":1189,"fast-isnumeric":241}],991:[function(e,v,S){var r=e("../../lib"),a=e("../../components/colorscale/defaults"),u=e("./attributes");v.exports=function(t,f,n,o){function l(b,m){return r.coerce(t,f,u,b,m)}var h=l("locations"),i=l("z");if(!(h&&h.length&&r.isArrayOrTypedArray(i)&&i.length)){f.visible=!1;return}f._length=Math.min(h.length,i.length);var s=l("geojson"),p;(typeof s=="string"&&s!==""||r.isPlainObject(s))&&(p="geojson-id");var d=l("locationmode",p);d==="geojson-id"&&l("featureidkey"),l("text"),l("hovertext"),l("hovertemplate");var g=l("marker.line.width");g&&l("marker.line.color"),l("marker.opacity"),a(t,f,o,l,{prefix:"",cLetter:"z"}),r.coerceSelectionMarkerOpacity(f,l)}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":989}],992:[function(e,v,S){v.exports=function(a,u,c,t,f){a.location=u.location,a.z=u.z;var n=t[f];return n.fIn&&n.fIn.properties&&(a.properties=n.fIn.properties),a.ct=n.ct,a}},{}],993:[function(e,v,S){var r=e("../../plots/cartesian/axes"),a=e("./attributes"),u=e("../../lib").fillText;v.exports=function(f,n,o){var l=f.cd,h=l[0].trace,i=f.subplot,s,p,d,g,b=[n,o],m=[n+360,o];for(p=0;p<l.length;p++)if(s=l[p],g=!1,s._polygons){for(d=0;d<s._polygons.length;d++)s._polygons[d].contains(b)&&(g=!g),s._polygons[d].contains(m)&&(g=!g);if(g)break}if(!(!g||!s))return f.x0=f.x1=f.xa.c2p(s.ct),f.y0=f.y1=f.ya.c2p(s.ct),f.index=s.index,f.location=s.loc,f.z=s.z,f.zLabel=r.tickText(i.mockAxis,i.mockAxis.c2l(s.z),"hover").text,f.hovertemplate=s.hovertemplate,c(f,h,s),[f]};function c(t,f,n){if(!f.hovertemplate){var o=n.hi||f.hoverinfo,l=String(n.loc),h=o==="all"?a.hoverinfo.flags:o.split("+"),i=h.indexOf("name")!==-1,s=h.indexOf("location")!==-1,p=h.indexOf("z")!==-1,d=h.indexOf("text")!==-1,g=!i&&s,b=[];g?t.nameOverride=l:(i&&(t.nameOverride=f.name),s&&b.push(l)),p&&b.push(t.zLabel),d&&u(n,f,b),t.extraText=b.join("<br>")}}},{"../../lib":778,"../../plots/cartesian/axes":828,"./attributes":989}],994:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"choropleth",basePlotModule:e("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":860,"../heatmap/colorbar":1068,"./attributes":989,"./calc":990,"./defaults":991,"./event_data":992,"./hover":993,"./plot":995,"./select":996,"./style":997}],995:[function(e,v,S){var r=e("d3"),a=e("../../lib"),u=e("../../lib/geo_location_utils"),c=e("../../lib/topojson_utils").getTopojsonFeatures,t=e("../../plots/cartesian/autorange").findExtremes,f=e("./style").style;function n(l,h,i){var s=h.layers.backplot.select(".choroplethlayer");a.makeTraceGroups(s,i,"trace choropleth").each(function(p){var d=r.select(this),g=d.selectAll("path.choroplethlocation").data(a.identity);g.enter().append("path").classed("choroplethlocation",!0),g.exit().remove(),f(l,p)})}function o(l,h){for(var i=l[0].trace,s=h[i.geo],p=s._subplot,d=i.locationmode,g=i._length,b=d==="geojson-id"?u.extractTraceFeature(l):c(i,p.topojson),m=[],x=[],w=0;w<g;w++){var y=l[w],T=d==="geojson-id"?y.fOut:u.locationToFeature(d,y.loc,b);if(T){y.geojson=T,y.ct=T.properties.ct,y._polygons=u.feature2polygons(T);var M=u.computeBbox(T);m.push(M[0],M[2]),x.push(M[1],M[3])}else y.geojson=null}if(s.fitbounds==="geojson"&&d==="geojson-id"){var P=u.computeBbox(u.getTraceGeojson(i));m=[P[0],P[2]],x=[P[1],P[3]]}var L={padded:!0};i._extremes.lon=t(s.lonaxis._ax,m,L),i._extremes.lat=t(s.lataxis._ax,x,L)}v.exports={calcGeoJSON:o,plot:n}},{"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/topojson_utils":806,"../../plots/cartesian/autorange":827,"./style":997,d3:169}],996:[function(e,v,S){v.exports=function(a,u){var c=a.cd,t=a.xaxis,f=a.yaxis,n=[],o,l,h,i,s;if(u===!1)for(o=0;o<c.length;o++)c[o].selected=0;else for(o=0;o<c.length;o++)l=c[o],h=l.ct,h&&(i=t.c2p(h),s=f.c2p(h),u.contains([i,s],null,o,a)?(n.push({pointNumber:o,lon:h[0],lat:h[1]}),l.selected=1):l.selected=0);return n}},{}],997:[function(e,v,S){var r=e("d3"),a=e("../../components/color"),u=e("../../components/drawing"),c=e("../../components/colorscale");function t(o,l){l&&f(o,l)}function f(o,l){var h=l[0].trace,i=l[0].node3,s=i.selectAll(".choroplethlocation"),p=h.marker||{},d=p.line||{},g=c.makeColorScaleFuncFromTrace(h);s.each(function(b){r.select(this).attr("fill",g(b.z)).call(a.stroke,b.mlc||d.color).call(u.dashLine,"",b.mlw||d.width||0).style("opacity",p.opacity)}),u.selectedPointStyle(s,h,o)}function n(o,l){var h=l[0].node3,i=l[0].trace;i.selectedpoints?u.selectedPointStyle(h.selectAll(".choroplethlocation"),i,o):f(o,l)}v.exports={style:t,styleOnSelect:n}},{"../../components/color":643,"../../components/colorscale":655,"../../components/drawing":665,d3:169}],998:[function(e,v,S){var r=e("../choropleth/attributes"),a=e("../../components/colorscale/attributes"),u=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat;v.exports=t({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:t({},r.featureidkey,{}),below:{valType:"string",editType:"plot"},text:r.text,hovertext:r.hovertext,marker:{line:{color:t({},r.marker.line.color,{editType:"plot"}),width:t({},r.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:t({},r.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:t({},r.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:t({},r.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:r.hoverinfo,hovertemplate:u({},{keys:["properties"]}),showlegend:t({},c.showlegend,{dflt:!1})},a("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../choropleth/attributes":989}],999:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../components/colorscale"),c=e("../../components/drawing"),t=e("../../lib/geojson_utils").makeBlank,f=e("../../lib/geo_location_utils");function n(l){var h=l[0].trace,i=h.visible===!0&&h._length!==0,s={layout:{visibility:"none"},paint:{}},p={layout:{visibility:"none"},paint:{}},d=h._opts={fill:s,line:p,geojson:t()};if(!i)return d;var g=f.extractTraceFeature(l);if(!g)return d;var b=u.makeColorScaleFuncFromTrace(h),m=h.marker,x=m.line||{},w;a.isArrayOrTypedArray(m.opacity)&&(w=function(k){var C=k.mo;return r(C)?+a.constrain(C,0,1):0});var y;a.isArrayOrTypedArray(x.color)&&(y=function(k){return k.mlc});var T;a.isArrayOrTypedArray(x.width)&&(T=function(k){return k.mlw});for(var M=0;M<l.length;M++){var P=l[M],L=P.fOut;if(L){var I=L.properties;I.fc=b(P.z),w&&(I.mo=w(P)),y&&(I.mlc=y(P)),T&&(I.mlw=T(P)),P.ct=I.ct,P._polygons=f.feature2polygons(L)}}var E=w?{type:"identity",property:"mo"}:m.opacity;return a.extendFlat(s.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":E}),a.extendFlat(p.paint,{"line-color":y?{type:"identity",property:"mlc"}:x.color,"line-width":T?{type:"identity",property:"mlw"}:x.width,"line-opacity":E}),s.layout.visibility="visible",p.layout.visibility="visible",d.geojson={type:"FeatureCollection",features:g},o(l),d}function o(l){var h=l[0].trace,i=h._opts,s;if(h.selectedpoints){for(var p=c.makeSelectedPointStyleFns(h),d=0;d<l.length;d++){var g=l[d];g.fOut&&(g.fOut.properties.mo2=p.selectedOpacityFn(g))}s={type:"identity",property:"mo2"}}else s=a.isArrayOrTypedArray(h.marker.opacity)?{type:"identity",property:"mo"}:h.marker.opacity;return a.extendFlat(i.fill.paint,{"fill-opacity":s}),a.extendFlat(i.line.paint,{"line-opacity":s}),i}v.exports={convert:n,convertOnSelect:o}},{"../../components/colorscale":655,"../../components/drawing":665,"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/geojson_utils":772,"fast-isnumeric":241}],1e3:[function(e,v,S){var r=e("../../lib"),a=e("../../components/colorscale/defaults"),u=e("./attributes");v.exports=function(t,f,n,o){function l(d,g){return r.coerce(t,f,u,d,g)}var h=l("locations"),i=l("z"),s=l("geojson");if(!r.isArrayOrTypedArray(h)||!h.length||!r.isArrayOrTypedArray(i)||!i.length||!(typeof s=="string"&&s!==""||r.isPlainObject(s))){f.visible=!1;return}l("featureidkey"),f._length=Math.min(h.length,i.length),l("below"),l("text"),l("hovertext"),l("hovertemplate");var p=l("marker.line.width");p&&l("marker.line.color"),l("marker.opacity"),a(t,f,o,l,{prefix:"",cLetter:"z"}),r.coerceSelectionMarkerOpacity(f,l)}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":998}],1001:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../choropleth/calc"),plot:e("./plot"),hoverPoints:e("../choropleth/hover"),eventData:e("../choropleth/event_data"),selectPoints:e("../choropleth/select"),styleOnSelect:function(r,a){if(a){var u=a[0].trace;u._glTrace.updateOnSelect(a)}},getBelow:function(r,a){for(var u=a.getMapLayers(),c=u.length-2;c>=0;c--){var t=u[c].id;if(typeof t=="string"&&t.indexOf("water")===0){for(var f=c+1;f<u.length;f++)if(t=u[f].id,typeof t=="string"&&t.indexOf("plotly-")===-1)return t}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":885,"../choropleth/calc":990,"../choropleth/event_data":992,"../choropleth/hover":993,"../choropleth/select":996,"../heatmap/colorbar":1068,"./attributes":998,"./defaults":1e3,"./plot":1002}],1002:[function(e,v,S){var r=e("./convert").convert,a=e("./convert").convertOnSelect,u=e("../../plots/mapbox/constants").traceLayerPrefix;function c(f,n){this.type="choroplethmapbox",this.subplot=f,this.uid=n,this.sourceId="source-"+n,this.layerList=[["fill",u+n+"-fill"],["line",u+n+"-line"]],this.below=null}var t=c.prototype;t.update=function(f){this._update(r(f))},t.updateOnSelect=function(f){this._update(a(f))},t._update=function(f){var n=this.subplot,o=this.layerList,l=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(f.geojson),l!==this.below&&(this._removeLayers(),this._addLayers(f,l),this.below=l);for(var h=0;h<o.length;h++){var i=o[h],s=i[0],p=i[1],d=f[s];n.setOptions(p,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&n.setOptions(p,"setPaintProperty",d.paint)}},t._addLayers=function(f,n){for(var o=this.subplot,l=this.layerList,h=this.sourceId,i=0;i<l.length;i++){var s=l[i],p=s[0],d=f[p];o.addLayer({type:p,id:s[1],source:h,layout:d.layout,paint:d.paint},n)}},t._removeLayers=function(){for(var f=this.subplot.map,n=this.layerList,o=n.length-1;o>=0;o--)f.removeLayer(n[o][1])},t.dispose=function(){var f=this.subplot.map;this._removeLayers(),f.removeSource(this.sourceId)},v.exports=function(n,o){var l=o[0].trace,h=new c(n,l.uid),i=h.sourceId,s=r(o),p=h.below=n.belowLookup["trace-"+l.uid];return n.map.addSource(i,{type:"geojson",data:s.geojson}),h._addLayers(s,p),o[0].trace._glTrace=h,h}},{"../../plots/mapbox/constants":883,"./convert":999}],1003:[function(e,v,S){var r=e("../../components/colorscale/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../mesh3d/attributes"),c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,f={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:a({editType:"calc"},{keys:["norm"]}),showlegend:t({},c.showlegend,{dflt:!1})};t(f,r("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(o){f[o]=u[o]}),f.hoverinfo=t({},c.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),f.transforms=void 0,v.exports=f},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../mesh3d/attributes":1128}],1004:[function(e,v,S){var r=e("../../components/colorscale/calc");v.exports=function(u,c){for(var t=c.u,f=c.v,n=c.w,o=Math.min(c.x.length,c.y.length,c.z.length,t.length,f.length,n.length),l=-1/0,h=1/0,i=0;i<o;i++){var s=t[i],p=f[i],d=n[i],g=Math.sqrt(s*s+p*p+d*d);l=Math.max(l,g),h=Math.min(h,g)}c._len=o,c._normMax=l,r(u,c,{vals:[h,l],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651}],1005:[function(e,v,S){var r=e("gl-cone3d"),a=e("gl-cone3d").createConeMesh,u=e("../../lib").simpleMap,c=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,f=e("../../plots/gl3d/zip3");function n(d,g){this.scene=d,this.uid=g,this.mesh=null,this.data=null}var o=n.prototype;o.handlePick=function(d){if(d.object===this.mesh){var g=d.index=d.data.index,b=this.data.x[g],m=this.data.y[g],x=this.data.z[g],w=this.data.u[g],y=this.data.v[g],T=this.data.w[g];d.traceCoordinate=[b,m,x,w,y,T,Math.sqrt(w*w+y*y+T*T)];var M=this.data.hovertext||this.data.text;return Array.isArray(M)&&M[g]!==void 0?d.textLabel=M[g]:M&&(d.textLabel=M),!0}};var l={xaxis:0,yaxis:1,zaxis:2},h={tip:1,tail:0,cm:.25,center:.5},i={tip:1,tail:1,cm:.75,center:.5};function s(d,g){var b=d.fullSceneLayout,m=d.dataScale,x={};function w(P,L){var I=b[L],E=m[l[L]];return u(P,function(k){return I.d2l(k)*E})}x.vectors=f(w(g.u,"xaxis"),w(g.v,"yaxis"),w(g.w,"zaxis"),g._len),x.positions=f(w(g.x,"xaxis"),w(g.y,"yaxis"),w(g.z,"zaxis"),g._len);var y=t(g);x.colormap=c(g),x.vertexIntensityBounds=[y.min/g._normMax,y.max/g._normMax],x.coneOffset=h[g.anchor],g.sizemode==="scaled"?x.coneSize=g.sizeref||.5:x.coneSize=g.sizeref&&g._normMax?g.sizeref/g._normMax:.5;var T=r(x),M=g.lightposition;return T.lightPosition=[M.x,M.y,M.z],T.ambient=g.lighting.ambient,T.diffuse=g.lighting.diffuse,T.specular=g.lighting.specular,T.roughness=g.lighting.roughness,T.fresnel=g.lighting.fresnel,T.opacity=g.opacity,g._pad=i[g.anchor]*T.vectorScale*T.coneScale*g._normMax,T}o.update=function(d){this.data=d;var g=s(this.scene,d);this.mesh.update(g)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function p(d,g){var b=d.glplot.gl,m=s(d,g),x=a(b,m),w=new n(d,g.uid);return w.mesh=x,w.data=g,x._trace=w,d.glplot.add(x),w}v.exports=p},{"../../components/colorscale":655,"../../lib":778,"../../lib/gl_format_color":774,"../../plots/gl3d/zip3":881,"gl-cone3d":260}],1006:[function(e,v,S){var r=e("../../lib"),a=e("../../components/colorscale/defaults"),u=e("./attributes");v.exports=function(t,f,n,o){function l(b,m){return r.coerce(t,f,u,b,m)}var h=l("u"),i=l("v"),s=l("w"),p=l("x"),d=l("y"),g=l("z");if(!h||!h.length||!i||!i.length||!s||!s.length||!p||!p.length||!d||!d.length||!g||!g.length){f.visible=!1;return}l("sizeref"),l("sizemode"),l("anchor"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),a(t,f,o,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),f._length=null}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":1003}],1007:[function(e,v,S){v.exports={moduleType:"trace",name:"cone",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),eventData:function(r,a){return r.norm=a.traceCoordinate[6],r},meta:{}}},{"../../plots/gl3d":870,"./attributes":1003,"./calc":1004,"./convert":1005,"./defaults":1006}],1008:[function(e,v,S){var r=e("../heatmap/attributes"),a=e("../scatter/attributes"),u=e("../../components/colorscale/attributes"),c=e("../../components/drawing/attributes").dash,t=e("../../plots/font_attributes"),f=e("../../lib/extend").extendFlat,n=e("../../constants/filter_ops"),o=n.COMPARISON_OPS2,l=n.INTERVAL_OPS;e("../../constants/docs").FORMAT_LINK;var h=a.line;v.exports=f({z:r.z,x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,text:r.text,hovertext:r.hovertext,transpose:r.transpose,xtype:r.xtype,ytype:r.ytype,zhoverformat:r.zhoverformat,hovertemplate:r.hovertemplate,hoverongaps:r.hoverongaps,connectgaps:f({},r.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",values:[].concat(o).concat(l),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:f({},h.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:c,smoothing:f({},h.smoothing,{}),editType:"plot"}},u("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../components/drawing/attributes":664,"../../constants/docs":748,"../../constants/filter_ops":749,"../../lib/extend":768,"../../plots/font_attributes":856,"../heatmap/attributes":1065,"../scatter/attributes":1187}],1009:[function(e,v,S){var r=e("../../components/colorscale"),a=e("../heatmap/calc"),u=e("./set_contours"),c=e("./end_plus");v.exports=function(f,n){var o=a(f,n),l=o[0].z;u(n,l);var h=n.contours,i=r.extractOpts(n),s;if(h.coloring==="heatmap"&&i.auto&&n.autocontour===!1){var p=h.start,d=c(h),g=h.size||1,b=Math.floor((d-p)/g)+1;isFinite(g)||(g=1,b=1);var m=p-g/2,x=m+b*g;s=[m,x]}else s=l;return r.calc(f,n,{vals:s,cLetter:"z"}),o}},{"../../components/colorscale":655,"../heatmap/calc":1066,"./end_plus":1019,"./set_contours":1027}],1010:[function(e,v,S){v.exports=function(r,a){var u=r[0],c=u.z,t;switch(a.type){case"levels":var f=Math.min(c[0][0],c[0][1]);for(t=0;t<r.length;t++){var n=r[t];n.prefixBoundary=!n.edgepaths.length&&(f>n.level||n.starts.length&&f===n.level)}break;case"constraint":if(u.prefixBoundary=!1,u.edgepaths.length)return;var o=u.x.length,l=u.y.length,h=-1/0,i=1/0;for(t=0;t<l;t++)i=Math.min(i,c[t][0]),i=Math.min(i,c[t][o-1]),h=Math.max(h,c[t][0]),h=Math.max(h,c[t][o-1]);for(t=1;t<o-1;t++)i=Math.min(i,c[0][t]),i=Math.min(i,c[l-1][t]),h=Math.max(h,c[0][t]),h=Math.max(h,c[l-1][t]);var s=a.value,p,d;switch(a._operation){case">":s>h&&(u.prefixBoundary=!0);break;case"<":(s<i||u.starts.length&&s===i)&&(u.prefixBoundary=!0);break;case"[]":p=Math.min(s[0],s[1]),d=Math.max(s[0],s[1]),(d<i||p>h||u.starts.length&&d===i)&&(u.prefixBoundary=!0);break;case"][":p=Math.min(s[0],s[1]),d=Math.max(s[0],s[1]),p<i&&d>h&&(u.prefixBoundary=!0);break}break}}},{}],1011:[function(e,v,S){var r=e("../../components/colorscale"),a=e("./make_color_map"),u=e("./end_plus");function c(t,f,n){var o=f.contours,l=f.line,h=o.size||1,i=o.coloring,s=a(f,{isColorbar:!0});if(i==="heatmap"){var p=r.extractOpts(f);n._fillgradient=p.reversescale?r.flipScale(p.colorscale):p.colorscale,n._zrange=[p.min,p.max]}else i==="fill"&&(n._fillcolor=s);n._line={color:i==="lines"?s:l.color,width:o.showlines!==!1?l.width:0,dash:l.dash},n._levels={start:o.start,end:u(o),size:h}}v.exports={min:"zmin",max:"zmax",calc:c}},{"../../components/colorscale":655,"./end_plus":1019,"./make_color_map":1024}],1012:[function(e,v,S){v.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],1013:[function(e,v,S){var r=e("fast-isnumeric"),a=e("./label_defaults"),u=e("../../components/color"),c=u.addOpacity,t=u.opacity,f=e("../../constants/filter_ops"),n=f.CONSTRAINT_REDUCTION,o=f.COMPARISON_OPS2;v.exports=function(i,s,p,d,g,b){var m=s.contours,x,w,y,T=p("contours.operation");if(m._operation=n[T],l(p,m),T==="="?x=m.showlines=!0:(x=p("contours.showlines"),y=p("fillcolor",c((i.line||{}).color||g,.5))),x){var M=y&&t(y)?c(s.fillcolor,1):g;w=p("line.color",M),p("line.width",2),p("line.dash")}p("line.smoothing"),a(p,d,w,b)};function l(h,i){var s;o.indexOf(i.operation)===-1?(h("contours.value",[0,1]),Array.isArray(i.value)?i.value.length>2?i.value=i.value.slice(2):i.length===0?i.value=[0,1]:i.length<2?(s=parseFloat(i.value[0]),i.value=[s,s+1]):i.value=[parseFloat(i.value[0]),parseFloat(i.value[1])]:r(i.value)&&(s=parseFloat(i.value),i.value=[s,s+1])):(h("contours.value",0),r(i.value)||(Array.isArray(i.value)?i.value=parseFloat(i.value[0]):i.value=0))}},{"../../components/color":643,"../../constants/filter_ops":749,"./label_defaults":1023,"fast-isnumeric":241}],1014:[function(e,v,S){var r=e("../../constants/filter_ops"),a=e("fast-isnumeric");v.exports={"[]":c("[]"),"][":c("]["),">":t(">"),"<":t("<"),"=":t("=")};function u(f,n){var o=Array.isArray(n),l;function h(i){return a(i)?+i:null}return r.COMPARISON_OPS2.indexOf(f)!==-1?l=h(o?n[0]:n):r.INTERVAL_OPS.indexOf(f)!==-1?l=o?[h(n[0]),h(n[1])]:[h(n),h(n)]:r.SET_OPS.indexOf(f)!==-1&&(l=o?n.map(h):[h(n)]),l}function c(f){return function(n){n=u(f,n);var o=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]);return{start:o,end:l,size:l-o}}}function t(f){return function(n){return n=u(f,n),{start:n,end:1/0,size:1/0}}}},{"../../constants/filter_ops":749,"fast-isnumeric":241}],1015:[function(e,v,S){v.exports=function(a,u,c,t){var f=t("contours.start"),n=t("contours.end"),o=f===!1||n===!1,l=c("contours.size"),h;o?h=u.autocontour=!0:h=c("autocontour",!1),(h||!l)&&c("ncontours")}},{}],1016:[function(e,v,S){var r=e("../../lib");v.exports=function(u,c){var t,f,n,o=function(i){return i.reverse()},l=function(i){return i};switch(c){case"=":case"<":return u;case">":for(u.length!==1&&r.warn("Contour data invalid for the specified inequality operation."),f=u[0],t=0;t<f.edgepaths.length;t++)f.edgepaths[t]=o(f.edgepaths[t]);for(t=0;t<f.paths.length;t++)f.paths[t]=o(f.paths[t]);for(t=0;t<f.starts.length;t++)f.starts[t]=o(f.starts[t]);return u;case"][":var h=o;o=l,l=h;case"[]":for(u.length!==2&&r.warn("Contour data invalid for the specified inequality range operation."),f=a(u[0]),n=a(u[1]),t=0;t<f.edgepaths.length;t++)f.edgepaths[t]=o(f.edgepaths[t]);for(t=0;t<f.paths.length;t++)f.paths[t]=o(f.paths[t]);for(t=0;t<f.starts.length;t++)f.starts[t]=o(f.starts[t]);for(;n.edgepaths.length;)f.edgepaths.push(l(n.edgepaths.shift()));for(;n.paths.length;)f.paths.push(l(n.paths.shift()));for(;n.starts.length;)f.starts.push(l(n.starts.shift()));return[f]}};function a(u){return r.extendFlat({},u,{edgepaths:r.extendDeep([],u.edgepaths),paths:r.extendDeep([],u.paths),starts:r.extendDeep([],u.starts)})}},{"../../lib":778}],1017:[function(e,v,S){var r=e("../../lib"),a=e("../heatmap/xyz_defaults"),u=e("../scatter/period_defaults"),c=e("./constraint_defaults"),t=e("./contours_defaults"),f=e("./style_defaults"),n=e("./attributes");v.exports=function(l,h,i,s){function p(m,x){return r.coerce(l,h,n,m,x)}function d(m){return r.coerce2(l,h,n,m)}var g=a(l,h,p,s);if(!g){h.visible=!1;return}u(l,h,s,p),p("text"),p("hovertext"),p("hovertemplate"),p("hoverongaps");var b=p("contours.type")==="constraint";p("connectgaps",r.isArray1D(h.z)),b?c(l,h,p,s,i):(t(l,h,p,d),f(l,h,p,s))}},{"../../lib":778,"../heatmap/xyz_defaults":1079,"../scatter/period_defaults":1207,"./attributes":1008,"./constraint_defaults":1013,"./contours_defaults":1015,"./style_defaults":1029}],1018:[function(e,v,S){var r=e("../../lib"),a=e("./constraint_mapping"),u=e("./end_plus");v.exports=function(t,f,n){for(var o=t.type==="constraint"?a[t._operation](t.value):t,l=o.size,h=[],i=u(o),s=n.trace._carpetTrace,p=s?{xaxis:s.aaxis,yaxis:s.baxis,x:n.a,y:n.b}:{xaxis:f.xaxis,yaxis:f.yaxis,x:n.x,y:n.y},d=o.start;d<i;d+=l)if(h.push(r.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},p)),h.length>1e3){r.warn("Too many contours, clipping at 1000",t);break}return h}},{"../../lib":778,"./constraint_mapping":1014,"./end_plus":1019}],1019:[function(e,v,S){v.exports=function(a){return a.end+a.size/1e6}},{}],1020:[function(e,v,S){var r=e("../../lib"),a=e("./constants");v.exports=function(l,h,i){var s,p,d,g,b;for(h=h||.01,i=i||.01,d=0;d<l.length;d++){for(g=l[d],b=0;b<g.starts.length;b++)p=g.starts[b],t(g,p,"edge",h,i);for(s=0;Object.keys(g.crossings).length&&s<1e4;)s++,p=Object.keys(g.crossings)[0].split(",").map(Number),t(g,p,void 0,h,i);s===1e4&&r.log("Infinite loop in contour?")}};function u(o,l,h,i){return Math.abs(o[0]-l[0])<h&&Math.abs(o[1]-l[1])<i}function c(o,l){var h=o[2]-l[2],i=o[3]-l[3];return Math.sqrt(h*h+i*i)}function t(o,l,h,i,s){var p=l.join(","),d=o.crossings[p],g=f(d,h,l),b=[n(o,l,[-g[0],-g[1]])],m=o.z.length,x=o.z[0].length,w=l.slice(),y=g.slice(),T;for(T=0;T<1e4;T++){if(d>20?(d=a.CHOOSESADDLE[d][(g[0]||g[1])<0?0:1],o.crossings[p]=a.SADDLEREMAINDER[d]):delete o.crossings[p],g=a.NEWDELTA[d],!g){r.log("Found bad marching index:",d,l,o.level);break}b.push(n(o,l,g)),l[0]+=g[0],l[1]+=g[1],p=l.join(","),u(b[b.length-1],b[b.length-2],i,s)&&b.pop();var M=g[0]&&(l[0]<0||l[0]>x-2)||g[1]&&(l[1]<0||l[1]>m-2),P=l[0]===w[0]&&l[1]===w[1]&&g[0]===y[0]&&g[1]===y[1];if(P||h&&M)break;d=o.crossings[p]}T===1e4&&r.log("Infinite loop in contour?");var L=u(b[0],b[b.length-1],i,s),I=0,E=.2*o.smoothing,k=[],C=0,D,F,N,G,U,X,z,B,j,V,K;for(T=1;T<b.length;T++)z=c(b[T],b[T-1]),I+=z,k.push(z);var te=I/k.length*E;function $(Q){return b[Q%b.length]}for(T=b.length-2;T>=C;T--)if(D=k[T],D<te){for(N=0,F=T-1;F>=C&&D+k[F]<te;F--)D+=k[F];if(L&&T===b.length-2)for(N=0;N<F&&D+k[N]<te;N++)D+=k[N];U=T-F+N+1,X=Math.floor((T+F+N+2)/2),!L&&T===b.length-2?G=b[b.length-1]:!L&&F===-1?G=b[0]:U%2?G=$(X):G=[($(X)[0]+$(X+1)[0])/2,($(X)[1]+$(X+1)[1])/2],b.splice(F+1,T-F+1,G),T=F+1,N&&(C=N),L&&(T===b.length-2?b[N]=b[b.length-1]:T===0&&(b[b.length-1]=b[0]))}for(b.splice(0,C),T=0;T<b.length;T++)b[T].length=2;if(!(b.length<2))if(L)b.pop(),o.paths.push(b);else{h||r.log("Unclosed interior contour?",o.level,w.join(","),b.join("L"));var ie=!1;for(B=0;B<o.edgepaths.length;B++)if(V=o.edgepaths[B],!ie&&u(V[0],b[b.length-1],i,s)){b.pop(),ie=!0;var se=!1;for(j=0;j<o.edgepaths.length;j++)if(K=o.edgepaths[j],u(K[K.length-1],b[0],i,s)){se=!0,b.shift(),o.edgepaths.splice(B,1),j===B?o.paths.push(b.concat(K)):(j>B&&j--,o.edgepaths[j]=K.concat(b,V));break}se||(o.edgepaths[B]=b.concat(V))}for(B=0;B<o.edgepaths.length&&!ie;B++)V=o.edgepaths[B],u(V[V.length-1],b[0],i,s)&&(b.shift(),o.edgepaths[B]=V.concat(b),ie=!0);ie||o.edgepaths.push(b)}}function f(o,l,h){var i=0,s=0;return o>20&&l?o===208||o===1114?i=h[0]===0?1:-1:s=h[1]===0?1:-1:a.BOTTOMSTART.indexOf(o)!==-1?s=1:a.LEFTSTART.indexOf(o)!==-1?i=1:a.TOPSTART.indexOf(o)!==-1?s=-1:i=-1,[i,s]}function n(o,l,h){var i=l[0]+Math.max(h[0],0),s=l[1]+Math.max(h[1],0),p=o.z[s][i],d=o.xaxis,g=o.yaxis;if(h[1]){var b=(o.level-p)/(o.z[s][i+1]-p);return[d.c2p((1-b)*o.x[i]+b*o.x[i+1],!0),g.c2p(o.y[s],!0),i+b,s]}else{var m=(o.level-p)/(o.z[s+1][i]-p);return[d.c2p(o.x[i],!0),g.c2p((1-m)*o.y[s]+m*o.y[s+1],!0),i,s+m]}}},{"../../lib":778,"./constants":1012}],1021:[function(e,v,S){var r=e("../../components/color"),a=e("../heatmap/hover");v.exports=function(c,t,f,n,o){var l=a(c,t,f,n,o,!0);return l&&l.forEach(function(h){var i=h.trace;i.contours.type==="constraint"&&(i.fillcolor&&r.opacity(i.fillcolor)?h.color=r.addOpacity(i.fillcolor,1):i.contours.showlines&&r.opacity(i.line.color)&&(h.color=r.addOpacity(i.line.color,1)))}),l}},{"../../components/color":643,"../heatmap/hover":1072}],1022:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot").plot,style:e("./style"),colorbar:e("./colorbar"),hoverPoints:e("./hover"),moduleType:"trace",name:"contour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":841,"./attributes":1008,"./calc":1009,"./colorbar":1011,"./defaults":1017,"./hover":1021,"./plot":1026,"./style":1028}],1023:[function(e,v,S){var r=e("../../lib");v.exports=function(u,c,t,f){f||(f={});var n=u("contours.showlabels");if(n){var o=c.font;r.coerceFont(u,"contours.labelfont",{family:o.family,size:o.size,color:t}),u("contours.labelformat")}f.hasHover!==!1&&u("zhoverformat")}},{"../../lib":778}],1024:[function(e,v,S){var r=e("d3"),a=e("../../components/colorscale"),u=e("./end_plus");v.exports=function(t){var f=t.contours,n=f.start,o=u(f),l=f.size||1,h=Math.floor((o-n)/l)+1,i=f.coloring==="lines"?0:1,s=a.extractOpts(t);isFinite(l)||(l=1,h=1);var p=s.reversescale?a.flipScale(s.colorscale):s.colorscale,d=p.length,g=new Array(d),b=new Array(d),m,x;if(f.coloring==="heatmap"){var w=s.min,y=s.max;for(x=0;x<d;x++)m=p[x],g[x]=m[0]*(y-w)+w,b[x]=m[1];var T=r.extent([w,y,f.start,f.start+l*(h-1)]),M=T[w<y?0:1],P=T[w<y?1:0];M!==w&&(g.splice(0,0,M),b.splice(0,0,b[0])),P!==y&&(g.push(P),b.push(b[b.length-1]))}else for(x=0;x<d;x++)m=p[x],g[x]=(m[0]*(h+i-1)-i/2)*l+n,b[x]=m[1];return a.makeColorScaleFunc({domain:g,range:b},{noNumericCheck:!0})}},{"../../components/colorscale":655,"./end_plus":1019,d3:169}],1025:[function(e,v,S){var r=e("./constants");v.exports=function(c){var t=c[0].z,f=t.length,n=t[0].length,o=f===2||n===2,l,h,i,s,p,d,g,b,m;for(h=0;h<f-1;h++)for(s=[],h===0&&(s=s.concat(r.BOTTOMSTART)),h===f-2&&(s=s.concat(r.TOPSTART)),l=0;l<n-1;l++)for(i=s.slice(),l===0&&(i=i.concat(r.LEFTSTART)),l===n-2&&(i=i.concat(r.RIGHTSTART)),p=l+","+h,d=[[t[h][l],t[h][l+1]],[t[h+1][l],t[h+1][l+1]]],m=0;m<c.length;m++)b=c[m],g=a(b.level,d),g&&(b.crossings[p]=g,i.indexOf(g)!==-1&&(b.starts.push([l,h]),o&&i.indexOf(g,i.indexOf(g)+1)!==-1&&b.starts.push([l,h])))};function a(u,c){var t=(c[0][0]>u?0:1)+(c[0][1]>u?0:2)+(c[1][1]>u?0:4)+(c[1][0]>u?0:8);if(t===5||t===10){var f=(c[0][0]+c[0][1]+c[1][0]+c[1][1])/4;return u>f?t===5?713:1114:t===5?104:208}return t===15?0:t}},{"./constants":1012}],1026:[function(e,v,S){var r=e("d3"),a=e("../../lib"),u=e("../../components/drawing"),c=e("../../components/colorscale"),t=e("../../lib/svg_text_utils"),f=e("../../plots/cartesian/axes"),n=e("../../plots/cartesian/set_convert"),o=e("../heatmap/plot"),l=e("./make_crossings"),h=e("./find_all_paths"),i=e("./empty_pathinfo"),s=e("./convert_to_constraints"),p=e("./close_boundaries"),d=e("./constants"),g=d.LABELOPTIMIZER;S.plot=function(L,I,E,k){var C=I.xaxis,D=I.yaxis;a.makeTraceGroups(k,E,"contour").each(function(F){var N=r.select(this),G=F[0],U=G.trace,X=G.x,z=G.y,B=U.contours,j=i(B,I,G),V=a.ensureSingle(N,"g","heatmapcoloring"),K=[];B.coloring==="heatmap"&&(K=[F]),o(L,I,K,V),l(j),h(j);var te=C.c2p(X[0],!0),$=C.c2p(X[X.length-1],!0),ie=D.c2p(z[0],!0),se=D.c2p(z[z.length-1],!0),Q=[[te,se],[$,se],[$,ie],[te,ie]],H=j;B.type==="constraint"&&(H=s(j,B._operation)),b(N,Q,B),m(N,H,Q,B),w(N,j,L,G,B),T(N,I,L,G,Q)})};function b(P,L,I){var E=a.ensureSingle(P,"g","contourbg"),k=E.selectAll("path").data(I.coloring==="fill"?[0]:[]);k.enter().append("path"),k.exit().remove(),k.attr("d","M"+L.join("L")+"Z").style("stroke","none")}function m(P,L,I,E){var k=E.coloring==="fill"||E.type==="constraint"&&E._operation!=="=",C="M"+I.join("L")+"Z";k&&p(L,E);var D=a.ensureSingle(P,"g","contourfill"),F=D.selectAll("path").data(k?L:[]);F.enter().append("path"),F.exit().remove(),F.each(function(N){var G=(N.prefixBoundary?C:"")+x(N,I);G?r.select(this).attr("d",G).style("stroke","none"):r.select(this).remove()})}function x(P,L){var I="",E=0,k=P.edgepaths.map(function(te,$){return $}),C=!0,D,F,N,G,U,X;function z(te){return Math.abs(te[1]-L[0][1])<.01}function B(te){return Math.abs(te[1]-L[2][1])<.01}function j(te){return Math.abs(te[0]-L[0][0])<.01}function V(te){return Math.abs(te[0]-L[2][0])<.01}for(;k.length;){for(X=u.smoothopen(P.edgepaths[E],P.smoothing),I+=C?X:X.replace(/^M/,"L"),k.splice(k.indexOf(E),1),D=P.edgepaths[E][P.edgepaths[E].length-1],G=-1,N=0;N<4;N++){if(!D){a.log("Missing end?",E,P);break}for(z(D)&&!V(D)?F=L[1]:j(D)?F=L[0]:B(D)?F=L[3]:V(D)&&(F=L[2]),U=0;U<P.edgepaths.length;U++){var K=P.edgepaths[U][0];Math.abs(D[0]-F[0])<.01?Math.abs(D[0]-K[0])<.01&&(K[1]-D[1])*(F[1]-K[1])>=0&&(F=K,G=U):Math.abs(D[1]-F[1])<.01?Math.abs(D[1]-K[1])<.01&&(K[0]-D[0])*(F[0]-K[0])>=0&&(F=K,G=U):a.log("endpt to newendpt is not vert. or horz.",D,F,K)}if(D=F,G>=0)break;I+="L"+F}if(G===P.edgepaths.length){a.log("unclosed perimeter path");break}E=G,C=k.indexOf(E)===-1,C&&(E=k[0],I+="Z")}for(E=0;E<P.paths.length;E++)I+=u.smoothclosed(P.paths[E],P.smoothing);return I}function w(P,L,I,E,k){var C=a.ensureSingle(P,"g","contourlines"),D=k.showlines!==!1,F=k.showlabels,N=D&&F,G=S.createLines(C,D||F,L),U=S.createLineClip(C,N,I,E.trace.uid),X=P.selectAll("g.contourlabels").data(F?[0]:[]);if(X.exit().remove(),X.enter().append("g").classed("contourlabels",!0),F){var z=[],B=[];a.clearLocationCache();var j=S.labelFormatter(I,E),V=u.tester.append("text").attr("data-notex",1).call(u.font,k.labelfont),K=L[0].xaxis,te=L[0].yaxis,$=K._length,ie=te._length,se=K.range,Q=te.range,H=a.aggNums(Math.min,null,E.x),oe=a.aggNums(Math.max,null,E.x),re=a.aggNums(Math.min,null,E.y),ee=a.aggNums(Math.max,null,E.y),ae=Math.max(K.c2p(H,!0),0),fe=Math.min(K.c2p(oe,!0),$),de=Math.max(te.c2p(ee,!0),0),pe=Math.min(te.c2p(re,!0),ie),W={};se[0]<se[1]?(W.left=ae,W.right=fe):(W.left=fe,W.right=ae),Q[0]<Q[1]?(W.top=de,W.bottom=pe):(W.top=pe,W.bottom=de),W.middle=(W.top+W.bottom)/2,W.center=(W.left+W.right)/2,z.push([[W.left,W.top],[W.right,W.top],[W.right,W.bottom],[W.left,W.bottom]]);var ue=Math.sqrt($*$+ie*ie),me=d.LABELDISTANCE*ue/Math.max(1,L.length/d.LABELINCREASE);G.each(function(be){var Me=S.calcTextOpts(be.level,j,V,I);r.select(this).selectAll("path").each(function(){var Pe=this,Ge=a.getVisibleSegment(Pe,W,Me.height/2);if(!!Ge&&!(Ge.len<(Me.width+Me.height)*d.LABELMIN))for(var ze=Math.min(Math.ceil(Ge.len/me),d.LABELMAX),Qe=0;Qe<ze;Qe++){var tt=S.findBestTextLocation(Pe,Ge,Me,B,W);if(!tt)break;S.addLabelData(tt,Me,B,z)}})}),V.remove(),S.drawLabels(X,B,I,U,N?z:null)}F&&!D&&G.remove()}S.createLines=function(P,L,I){var E=I[0].smoothing,k=P.selectAll("g.contourlevel").data(L?I:[]);if(k.exit().remove(),k.enter().append("g").classed("contourlevel",!0),L){var C=k.selectAll("path.openline").data(function(F){return F.pedgepaths||F.edgepaths});C.exit().remove(),C.enter().append("path").classed("openline",!0),C.attr("d",function(F){return u.smoothopen(F,E)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var D=k.selectAll("path.closedline").data(function(F){return F.ppaths||F.paths});D.exit().remove(),D.enter().append("path").classed("closedline",!0),D.attr("d",function(F){return u.smoothclosed(F,E)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return k},S.createLineClip=function(P,L,I,E){var k=I._fullLayout._clips,C=L?"clipline"+E:null,D=k.selectAll("#"+C).data(L?[0]:[]);return D.exit().remove(),D.enter().append("clipPath").classed("contourlineclip",!0).attr("id",C),u.setClipUrl(P,C,I),D},S.labelFormatter=function(P,L){var I=P._fullLayout,E=L.trace,k=E.contours,C={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(k.labelformat)C.tickformat=k.labelformat,n(C,I);else{var D=c.extractOpts(E);if(D&&D.colorbar&&D.colorbar._axis)C=D.colorbar._axis;else{if(k.type==="constraint"){var F=k.value;Array.isArray(F)?C.range=[F[0],F[F.length-1]]:C.range=[F,F]}else C.range=[k.start,k.end],C.nticks=(k.end-k.start)/k.size;C.range[0]===C.range[1]&&(C.range[1]+=C.range[0]||1),C.nticks||(C.nticks=1e3),n(C,I),f.prepTicks(C),C._tmin=null,C._tmax=null}}return function(N){return f.tickText(C,N).text}},S.calcTextOpts=function(P,L,I,E){var k=L(P);I.text(k).call(t.convertToTspans,E);var C=I.node(),D=u.bBox(C,!0);return{text:k,width:D.width,height:D.height,fontSize:+C.style["font-size"].replace("px",""),level:P,dy:(D.top+D.bottom)/2}},S.findBestTextLocation=function(P,L,I,E,k){var C=I.width,D,F,N,G,U;L.isClosed?(F=L.len/g.INITIALSEARCHPOINTS,D=L.min+F/2,N=L.max):(F=(L.len-C)/(g.INITIALSEARCHPOINTS+1),D=L.min+F+C/2,N=L.max-(F+C)/2);for(var X=1/0,z=0;z<g.ITERATIONS;z++){for(var B=D;B<N;B+=F){var j=a.getTextLocation(P,L.total,B,C),V=y(j,I,E,k);V<X&&(X=V,U=j,G=B)}if(X>g.MAXCOST*2)break;z&&(F/=2),D=G-F/2,N=D+F*1.5}if(X<=g.MAXCOST)return U};function y(P,L,I,E){var k=L.width/2,C=L.height/2,D=P.x,F=P.y,N=P.theta,G=Math.cos(N)*k,U=Math.sin(N)*k,X=(D>E.center?E.right-D:D-E.left)/(G+Math.abs(Math.sin(N)*C)),z=(F>E.middle?E.bottom-F:F-E.top)/(Math.abs(U)+Math.cos(N)*C);if(X<1||z<1)return 1/0;var B=g.EDGECOST*(1/(X-1)+1/(z-1));B+=g.ANGLECOST*N*N;for(var j=D-G,V=F-U,K=D+G,te=F+U,$=0;$<I.length;$++){var ie=I[$],se=Math.cos(ie.theta)*ie.width/2,Q=Math.sin(ie.theta)*ie.width/2,H=a.segmentDistance(j,V,K,te,ie.x-se,ie.y-Q,ie.x+se,ie.y+Q)*2/(L.height+ie.height),oe=ie.level===L.level,re=oe?g.SAMELEVELDISTANCE:1;if(H<=re)return 1/0;var ee=g.NEIGHBORCOST*(oe?g.SAMELEVELFACTOR:1);B+=ee/(H-re)}return B}S.addLabelData=function(P,L,I,E){var k=L.fontSize,C=L.width+k/3,D=Math.max(0,L.height-k/3),F=P.x,N=P.y,G=P.theta,U=Math.sin(G),X=Math.cos(G),z=function(j,V){return[F+j*X-V*U,N+j*U+V*X]},B=[z(-C/2,-D/2),z(-C/2,D/2),z(C/2,D/2),z(C/2,-D/2)];I.push({text:L.text,x:F,y:N,dy:L.dy,theta:G,level:L.level,width:C,height:D}),E.push(B)},S.drawLabels=function(P,L,I,E,k){var C=P.selectAll("text").data(L,function(G){return G.text+","+G.x+","+G.y+","+G.theta});if(C.exit().remove(),C.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(G){var U=G.x+Math.sin(G.theta)*G.dy,X=G.y-Math.cos(G.theta)*G.dy;r.select(this).text(G.text).attr({x:U,y:X,transform:"rotate("+180*G.theta/Math.PI+" "+U+" "+X+")"}).call(t.convertToTspans,I)}),k){for(var D="",F=0;F<k.length;F++)D+="M"+k[F].join("L")+"Z";var N=a.ensureSingle(E,"path","");N.attr("d",D)}};function T(P,L,I,E,k){var C=E.trace,D=I._fullLayout._clips,F="clip"+C.uid,N=D.selectAll("#"+F).data(C.connectgaps?[]:[0]);if(N.enter().append("clipPath").classed("contourclip",!0).attr("id",F),N.exit().remove(),C.connectgaps===!1){var G={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:L.xaxis,yaxis:L.yaxis,x:E.x,y:E.y,z:M(E),smoothing:0};l([G]),h([G]),p([G],{type:"levels"});var U=a.ensureSingle(N,"path","");U.attr("d",(G.prefixBoundary?"M"+k.join("L")+"Z":"")+x(G,k))}else F=null;u.setClipUrl(P,F,I)}function M(P){var L=P.trace._emptypoints,I=[],E=P.z.length,k=P.z[0].length,C,D=[],F;for(C=0;C<k;C++)D.push(1);for(C=0;C<E;C++)I.push(D.slice());for(C=0;C<L.length;C++)F=L[C],I[F[0]][F[1]]=0;return P.zmask=I,I}},{"../../components/colorscale":655,"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../plots/cartesian/set_convert":848,"../heatmap/plot":1076,"./close_boundaries":1010,"./constants":1012,"./convert_to_constraints":1016,"./empty_pathinfo":1018,"./find_all_paths":1020,"./make_crossings":1025,d3:169}],1027:[function(e,v,S){var r=e("../../plots/cartesian/axes"),a=e("../../lib");v.exports=function(t,f){var n=t.contours;if(t.autocontour){var o=t.zmin,l=t.zmax;(t.zauto||o===void 0)&&(o=a.aggNums(Math.min,null,f)),(t.zauto||l===void 0)&&(l=a.aggNums(Math.max,null,f));var h=u(o,l,t.ncontours);n.size=h.dtick,n.start=r.tickFirst(h),h.range.reverse(),n.end=r.tickFirst(h),n.start===o&&(n.start+=n.size),n.end===l&&(n.end-=n.size),n.start>n.end&&(n.start=n.end=(n.start+n.end)/2),t._input.contours||(t._input.contours={}),a.extendFlat(t._input.contours,{start:n.start,end:n.end,size:n.size}),t._input.autocontour=!0}else if(n.type!=="constraint"){var i=n.start,s=n.end,p=t._input.contours;if(i>s&&(n.start=p.start=s,s=n.end=p.end=i,i=n.start),!(n.size>0)){var d;i===s?d=1:d=u(i,s,t.ncontours).dtick,p.size=n.size=d}}};function u(c,t,f){var n={type:"linear",range:[c,t]};return r.autoTicks(n,(t-c)/(f||15)),n}},{"../../lib":778,"../../plots/cartesian/axes":828}],1028:[function(e,v,S){var r=e("d3"),a=e("../../components/drawing"),u=e("../heatmap/style"),c=e("./make_color_map");v.exports=function(f){var n=r.select(f).selectAll("g.contour");n.style("opacity",function(o){return o[0].trace.opacity}),n.each(function(o){var l=r.select(this),h=o[0].trace,i=h.contours,s=h.line,p=i.size||1,d=i.start,g=i.type==="constraint",b=!g&&i.coloring==="lines",m=!g&&i.coloring==="fill",x=b||m?c(h):null;l.selectAll("g.contourlevel").each(function(T){r.select(this).selectAll("path").call(a.lineGroupStyle,s.width,b?x(T.level):s.color,s.dash)});var w=i.labelfont;if(l.selectAll("g.contourlabels text").each(function(T){a.font(r.select(this),{family:w.family,size:w.size,color:w.color||(b?x(T.level):s.color)})}),g)l.selectAll("g.contourfill path").style("fill",h.fillcolor);else if(m){var y;l.selectAll("g.contourfill path").style("fill",function(T){return y===void 0&&(y=T.level),x(T.level+.5*p)}),y===void 0&&(y=d),l.selectAll("g.contourbg path").style("fill",x(y-.5*p))}}),u(f)}},{"../../components/drawing":665,"../heatmap/style":1077,"./make_color_map":1024,d3:169}],1029:[function(e,v,S){var r=e("../../components/colorscale/defaults"),a=e("./label_defaults");v.exports=function(c,t,f,n,o){var l=f("contours.coloring"),h,i="";l==="fill"&&(h=f("contours.showlines")),h!==!1&&(l!=="lines"&&(i=f("line.color","#000")),f("line.width",.5),f("line.dash")),l!=="none"&&(c.showlegend!==!0&&(t.showlegend=!1),t._dfltShowLegend=!1,r(c,t,n,f,{prefix:"",cLetter:"z"})),f("line.smoothing"),a(f,n,i,o)}},{"../../components/colorscale/defaults":653,"./label_defaults":1023}],1030:[function(e,v,S){var r=e("../heatmap/attributes"),a=e("../contour/attributes"),u=e("../../components/colorscale/attributes"),c=e("../../lib/extend").extendFlat,t=a.contours;v.exports=c({carpet:{valType:"string",editType:"calc"},z:r.z,a:r.x,a0:r.x0,da:r.dx,b:r.y,b0:r.y0,db:r.dy,text:r.text,hovertext:r.hovertext,transpose:r.transpose,atype:r.xtype,btype:r.ytype,fillcolor:a.fillcolor,autocontour:a.autocontour,ncontours:a.ncontours,contours:{type:t.type,start:t.start,end:t.end,size:t.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:t.showlines,showlabels:t.showlabels,labelfont:t.labelfont,labelformat:t.labelformat,operation:t.operation,value:t.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:a.line.color,width:a.line.width,dash:a.line.dash,smoothing:a.line.smoothing,editType:"plot"},transforms:void 0},u("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../contour/attributes":1008,"../heatmap/attributes":1065}],1031:[function(e,v,S){var r=e("../../components/colorscale/calc"),a=e("../../lib"),u=e("../heatmap/convert_column_xyz"),c=e("../heatmap/clean_2d_array"),t=e("../heatmap/interp2d"),f=e("../heatmap/find_empties"),n=e("../heatmap/make_bound_array"),o=e("./defaults"),l=e("../carpet/lookup_carpetid"),h=e("../contour/set_contours");v.exports=function(p,d){var g=d._carpetTrace=l(p,d);if(!(!g||!g.visible||g.visible==="legendonly")){if(!d.a||!d.b){var b=p.data[g.index],m=p.data[d.index];m.a||(m.a=b.a),m.b||(m.b=b.b),o(m,d,d._defaultColor,p._fullLayout)}var x=i(p,d);return h(d,d._z),x}};function i(s,p){var d=p._carpetTrace,g=d.aaxis,b=d.baxis,m,x,w,y,T,M,P;g._minDtick=0,b._minDtick=0,a.isArray1D(p.z)&&u(p,g,b,"a","b",["z"]),m=p._a=p._a||p.a,y=p._b=p._b||p.b,m=m?g.makeCalcdata(p,"_a"):[],y=y?b.makeCalcdata(p,"_b"):[],x=p.a0||0,w=p.da||1,T=p.b0||0,M=p.db||1,P=p._z=c(p._z||p.z,p.transpose),p._emptypoints=f(P),t(P,p._emptypoints);var L=a.maxRowLength(P),I=p.xtype==="scaled"?"":m,E=n(p,I,x,w,L,g),k=p.ytype==="scaled"?"":y,C=n(p,k,T,M,P.length,b),D={a:E,b:C,z:P};return p.contours.type==="levels"&&p.contours.coloring!=="none"&&r(s,p,{vals:P,containerStr:"",cLetter:"z"}),[D]}},{"../../components/colorscale/calc":651,"../../lib":778,"../carpet/lookup_carpetid":981,"../contour/set_contours":1027,"../heatmap/clean_2d_array":1067,"../heatmap/convert_column_xyz":1069,"../heatmap/find_empties":1071,"../heatmap/interp2d":1074,"../heatmap/make_bound_array":1075,"./defaults":1032}],1032:[function(e,v,S){var r=e("../../lib"),a=e("../heatmap/xyz_defaults"),u=e("./attributes"),c=e("../contour/constraint_defaults"),t=e("../contour/contours_defaults"),f=e("../contour/style_defaults");v.exports=function(o,l,h,i){function s(b,m){return r.coerce(o,l,u,b,m)}function p(b){return r.coerce2(o,l,u,b)}if(s("carpet"),o.a&&o.b){var d=a(o,l,s,i,"a","b");if(!d){l.visible=!1;return}s("text");var g=s("contours.type")==="constraint";g?c(o,l,s,i,h,{hasHover:!1}):(t(o,l,s,p),f(o,l,s,i,{hasHover:!1}))}else l._defaultColor=h,l._length=null}},{"../../lib":778,"../contour/constraint_defaults":1013,"../contour/contours_defaults":1015,"../contour/style_defaults":1029,"../heatmap/xyz_defaults":1079,"./attributes":1030}],1033:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../contour/colorbar"),calc:e("./calc"),plot:e("./plot"),style:e("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":841,"../contour/colorbar":1011,"../contour/style":1028,"./attributes":1030,"./calc":1031,"./defaults":1032,"./plot":1034}],1034:[function(e,v,S){var r=e("d3"),a=e("../carpet/map_1d_array"),u=e("../carpet/makepath"),c=e("../../components/drawing"),t=e("../../lib"),f=e("../contour/make_crossings"),n=e("../contour/find_all_paths"),o=e("../contour/plot"),l=e("../contour/constants"),h=e("../contour/convert_to_constraints"),i=e("../contour/empty_pathinfo"),s=e("../contour/close_boundaries"),p=e("../carpet/lookup_carpetid"),d=e("../carpet/axis_aligned_line");v.exports=function(I,E,k,C){var D=E.xaxis,F=E.yaxis;t.makeTraceGroups(C,k,"contour").each(function(N){var G=r.select(this),U=N[0],X=U.trace,z=X._carpetTrace=p(I,X),B=I.calcdata[z.index][0];if(!z.visible||z.visible==="legendonly")return;var j=U.a,V=U.b,K=X.contours,te=i(K,E,U),$=K.type==="constraint",ie=K._operation,se=$?ie==="="?"lines":"fill":K.coloring;function Q(me){var be=z.ab2xy(me[0],me[1],!0);return[D.c2p(be[0]),F.c2p(be[1])]}var H=[[j[0],V[V.length-1]],[j[j.length-1],V[V.length-1]],[j[j.length-1],V[0]],[j[0],V[0]]];f(te);var oe=(j[j.length-1]-j[0])*1e-8,re=(V[V.length-1]-V[0])*1e-8;n(te,oe,re);var ee=te;K.type==="constraint"&&(ee=h(te,ie)),g(te,Q);var ae,fe,de,pe,W=[];for(pe=B.clipsegments.length-1;pe>=0;pe--)ae=B.clipsegments[pe],fe=a([],ae.x,D.c2p),de=a([],ae.y,F.c2p),fe.reverse(),de.reverse(),W.push(u(fe,de,ae.bicubic));var ue="M"+W.join("L")+"Z";T(G,B.clipsegments,D,F,$,se),M(X,G,D,F,ee,H,Q,z,B,se,ue),b(G,te,I,U,K,E,z),c.setClipUrl(G,z._clipPathId,I)})};function g(L,I){var E,k,C,D,F,N,G,U,X;for(E=0;E<L.length;E++){for(D=L[E],F=D.pedgepaths=[],N=D.ppaths=[],k=0;k<D.edgepaths.length;k++){for(X=D.edgepaths[k],G=[],C=0;C<X.length;C++)G[C]=I(X[C]);F.push(G)}for(k=0;k<D.paths.length;k++){for(X=D.paths[k],U=[],C=0;C<X.length;C++)U[C]=I(X[C]);N.push(U)}}}function b(L,I,E,k,C,D,F){var N=t.ensureSingle(L,"g","contourlines"),G=C.showlines!==!1,U=C.showlabels,X=G&&U,z=o.createLines(N,G||U,I),B=o.createLineClip(N,X,E,k.trace.uid),j=L.selectAll("g.contourlabels").data(U?[0]:[]);if(j.exit().remove(),j.enter().append("g").classed("contourlabels",!0),U){var V=D.xaxis,K=D.yaxis,te=V._length,$=K._length,ie=[[[0,0],[te,0],[te,$],[0,$]]],se=[];t.clearLocationCache();var Q=o.labelFormatter(E,k),H=c.tester.append("text").attr("data-notex",1).call(c.font,C.labelfont),oe={left:0,right:te,center:te/2,top:0,bottom:$,middle:$/2},re=Math.sqrt(te*te+$*$),ee=l.LABELDISTANCE*re/Math.max(1,I.length/l.LABELINCREASE);z.each(function(ae){var fe=o.calcTextOpts(ae.level,Q,H,E);r.select(this).selectAll("path").each(function(de){var pe=this,W=t.getVisibleSegment(pe,oe,fe.height/2);if(!!W&&(m(pe,de,ae,W,F,fe.height),!(W.len<(fe.width+fe.height)*l.LABELMIN)))for(var ue=Math.min(Math.ceil(W.len/ee),l.LABELMAX),me=0;me<ue;me++){var be=o.findBestTextLocation(pe,W,fe,se,oe);if(!be)break;o.addLabelData(be,fe,se,ie)}})}),H.remove(),o.drawLabels(j,se,E,B,X?ie:null)}U&&!G&&z.remove()}function m(L,I,E,k,C,D){for(var F,N=0;N<E.pedgepaths.length;N++)I===E.pedgepaths[N]&&(F=E.edgepaths[N]);if(!F)return;var G=C.a[0],U=C.a[C.a.length-1],X=C.b[0],z=C.b[C.b.length-1];function B($,ie){var se=0,Q,H=.1;return(Math.abs($[0]-G)<H||Math.abs($[0]-U)<H)&&(Q=w(C.dxydb_rough($[0],$[1],H)),se=Math.max(se,D*y(ie,Q)/2)),(Math.abs($[1]-X)<H||Math.abs($[1]-z)<H)&&(Q=w(C.dxyda_rough($[0],$[1],H)),se=Math.max(se,D*y(ie,Q)/2)),se}var j=x(L,0,1),V=x(L,k.total,k.total-1),K=B(F[0],j),te=k.total-B(F[F.length-1],V);k.min<K&&(k.min=K),k.max>te&&(k.max=te),k.len=k.max-k.min}function x(L,I,E){var k=L.getPointAtLength(I),C=L.getPointAtLength(E),D=C.x-k.x,F=C.y-k.y,N=Math.sqrt(D*D+F*F);return[D/N,F/N]}function w(L){var I=Math.sqrt(L[0]*L[0]+L[1]*L[1]);return[L[0]/I,L[1]/I]}function y(L,I){var E=Math.abs(L[0]*I[0]+L[1]*I[1]),k=Math.sqrt(1-E*E);return k/E}function T(L,I,E,k,C,D){var F,N,G,U,X=t.ensureSingle(L,"g","contourbg"),z=X.selectAll("path").data(D==="fill"&&!C?[0]:[]);z.enter().append("path"),z.exit().remove();var B=[];for(U=0;U<I.length;U++)F=I[U],N=a([],F.x,E.c2p),G=a([],F.y,k.c2p),B.push(u(N,G,F.bicubic));z.attr("d","M"+B.join("L")+"Z").style("stroke","none")}function M(L,I,E,k,C,D,F,N,G,U,X){var z=U==="fill";z&&s(C,L.contours);var B=t.ensureSingle(I,"g","contourfill"),j=B.selectAll("path").data(z?C:[]);j.enter().append("path"),j.exit().remove(),j.each(function(V){var K=(V.prefixBoundary?X:"")+P(L,V,D,F,N,G,E,k);K?r.select(this).attr("d",K).style("stroke","none"):r.select(this).remove()})}function P(L,I,E,k,C,D,F,N){var G,U="",X=I.edgepaths.map(function(de,pe){return pe}),z=!0,B,j,V,K,te,$,ie=Math.abs(E[0][0]-E[2][0])*1e-4,se=Math.abs(E[0][1]-E[2][1])*1e-4;function Q(de){return Math.abs(de[1]-E[0][1])<se}function H(de){return Math.abs(de[1]-E[2][1])<se}function oe(de){return Math.abs(de[0]-E[0][0])<ie}function re(de){return Math.abs(de[0]-E[2][0])<ie}function ee(de,pe){var W,ue,me,be,Me="";for(Q(de)&&!re(de)||H(de)&&!oe(de)?(be=C.aaxis,me=d(C,D,[de[0],pe[0]],.5*(de[1]+pe[1]))):(be=C.baxis,me=d(C,D,.5*(de[0]+pe[0]),[de[1],pe[1]])),W=1;W<me.length;W++)for(Me+=be.smoothing?"C":"L",ue=0;ue<me[W].length;ue++){var Pe=me[W][ue];Me+=[F.c2p(Pe[0]),N.c2p(Pe[1])]+" "}return Me}for(G=0,B=null;X.length;){var ae=I.edgepaths[G][0];for(B&&(U+=ee(B,ae)),$=c.smoothopen(I.edgepaths[G].map(k),I.smoothing),U+=z?$:$.replace(/^M/,"L"),X.splice(X.indexOf(G),1),B=I.edgepaths[G][I.edgepaths[G].length-1],K=-1,V=0;V<4;V++){if(!B){t.log("Missing end?",G,I);break}for(Q(B)&&!re(B)?j=E[1]:oe(B)?j=E[0]:H(B)?j=E[3]:re(B)&&(j=E[2]),te=0;te<I.edgepaths.length;te++){var fe=I.edgepaths[te][0];Math.abs(B[0]-j[0])<ie?Math.abs(B[0]-fe[0])<ie&&(fe[1]-B[1])*(j[1]-fe[1])>=0&&(j=fe,K=te):Math.abs(B[1]-j[1])<se?Math.abs(B[1]-fe[1])<se&&(fe[0]-B[0])*(j[0]-fe[0])>=0&&(j=fe,K=te):t.log("endpt to newendpt is not vert. or horz.",B,j,fe)}if(K>=0)break;U+=ee(B,j),B=j}if(K===I.edgepaths.length){t.log("unclosed perimeter path");break}G=K,z=X.indexOf(G)===-1,z&&(G=X[0],U+=ee(B,j)+"Z",B=null)}for(G=0;G<I.paths.length;G++)U+=c.smoothclosed(I.paths[G].map(k),I.smoothing);return U}},{"../../components/drawing":665,"../../lib":778,"../carpet/axis_aligned_line":965,"../carpet/lookup_carpetid":981,"../carpet/makepath":982,"../carpet/map_1d_array":983,"../contour/close_boundaries":1010,"../contour/constants":1012,"../contour/convert_to_constraints":1016,"../contour/empty_pathinfo":1018,"../contour/find_all_paths":1020,"../contour/make_crossings":1025,"../contour/plot":1026,d3:169}],1035:[function(e,v,S){var r=e("../../components/colorscale/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../../plots/attributes"),c=e("../scattermapbox/attributes"),t=e("../../lib/extend").extendFlat;v.exports=t({lon:c.lon,lat:c.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:c.text,hovertext:c.hovertext,hoverinfo:t({},u.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:a(),showlegend:t({},u.showlegend,{dflt:!1})},r("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scattermapbox/attributes":1252}],1036:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib").isArrayOrTypedArray,u=e("../../constants/numerical").BADNUM,c=e("../../components/colorscale/calc"),t=e("../../lib")._;v.exports=function(n,o){for(var l=o._length,h=new Array(l),i=o.z,s=a(i)&&i.length,p=0;p<l;p++){var d=h[p]={},g=o.lon[p],b=o.lat[p];if(d.lonlat=r(g)&&r(b)?[+g,+b]:[u,u],s){var m=i[p];d.z=r(m)?m:u}}return c(n,o,{vals:s?i:[0,1],containerStr:"",cLetter:"z"}),l&&(h[0].t={labels:{lat:t(n,"lat:")+" ",lon:t(n,"lon:")+" "}}),h}},{"../../components/colorscale/calc":651,"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],1037:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../components/color"),c=e("../../components/colorscale"),t=e("../../constants/numerical").BADNUM,f=e("../../lib/geojson_utils").makeBlank;v.exports=function(o){var l=o[0].trace,h=l.visible===!0&&l._length!==0,i={layout:{visibility:"none"},paint:{}},s=l._opts={heatmap:i,geojson:f()};if(!h)return s;var p=[],d,g=l.z,b=l.radius,m=a.isArrayOrTypedArray(g)&&g.length,x=a.isArrayOrTypedArray(b);for(d=0;d<o.length;d++){var w=o[d],y=w.lonlat;if(y[0]!==t){var T={};if(m){var M=w.z;T.z=M!==t?M:0}x&&(T.r=r(b[d])&&b[d]>0?+b[d]:0),p.push({type:"Feature",geometry:{type:"Point",coordinates:y},properties:T})}}var P=c.extractOpts(l),L=P.reversescale?c.flipScale(P.colorscale):P.colorscale,I=L[0][1],E=u.opacity(I)<1?I:u.addOpacity(I,0),k=["interpolate",["linear"],["heatmap-density"],0,E];for(d=1;d<L.length;d++)k.push(L[d][0],L[d][1]);var C=["interpolate",["linear"],["get","z"],P.min,0,P.max,1];return a.extendFlat(s.heatmap.paint,{"heatmap-weight":m?C:1/(P.max-P.min),"heatmap-color":k,"heatmap-radius":x?{type:"identity",property:"r"}:l.radius,"heatmap-opacity":l.opacity}),s.geojson={type:"FeatureCollection",features:p},s.heatmap.layout.visibility="visible",s}},{"../../components/color":643,"../../components/colorscale":655,"../../constants/numerical":753,"../../lib":778,"../../lib/geojson_utils":772,"fast-isnumeric":241}],1038:[function(e,v,S){var r=e("../../lib"),a=e("../../components/colorscale/defaults"),u=e("./attributes");v.exports=function(t,f,n,o){function l(p,d){return r.coerce(t,f,u,p,d)}var h=l("lon")||[],i=l("lat")||[],s=Math.min(h.length,i.length);if(!s){f.visible=!1;return}f._length=s,l("z"),l("radius"),l("below"),l("text"),l("hovertext"),l("hovertemplate"),a(t,f,o,l,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":1035}],1039:[function(e,v,S){v.exports=function(a,u){return a.lon=u.lon,a.lat=u.lat,a.z=u.z,a}},{}],1040:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../scattermapbox/hover");v.exports=function(f,n,o){var l=u(f,n,o);if(!!l){var h=l[0],i=h.cd,s=i[0].trace,p=i[h.index];if(delete h.color,"z"in p){var d=h.subplot.mockAxis;h.z=p.z,h.zLabel=a.tickText(d,d.c2l(p.z),"hover").text}return h.extraText=c(s,p,i[0].t.labels),[h]}};function c(t,f,n){if(t.hovertemplate)return;var o=f.hi||t.hoverinfo,l=o.split("+"),h=l.indexOf("all")!==-1,i=l.indexOf("lon")!==-1,s=l.indexOf("lat")!==-1,p=f.lonlat,d=[];function g(b){return b+"\xB0"}return h||i&&s?d.push("("+g(p[0])+", "+g(p[1])+")"):i?d.push(n.lon+g(p[0])):s&&d.push(n.lat+g(p[1])),(h||l.indexOf("text")!==-1)&&r.fillText(f,t,d),d.join("<br>")}},{"../../lib":778,"../../plots/cartesian/axes":828,"../scattermapbox/hover":1257}],1041:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),formatLabels:e("../scattermapbox/format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover"),eventData:e("./event_data"),getBelow:function(r,a){for(var u=a.getMapLayers(),c=0;c<u.length;c++){var t=u[c],f=t.id;if(t.type==="symbol"&&typeof f=="string"&&f.indexOf("plotly-")===-1)return f}},moduleType:"trace",name:"densitymapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":885,"../heatmap/colorbar":1068,"../scattermapbox/format_labels":1256,"./attributes":1035,"./calc":1036,"./defaults":1038,"./event_data":1039,"./hover":1040,"./plot":1042}],1042:[function(e,v,S){var r=e("./convert"),a=e("../../plots/mapbox/constants").traceLayerPrefix;function u(t,f){this.type="densitymapbox",this.subplot=t,this.uid=f,this.sourceId="source-"+f,this.layerList=[["heatmap",a+f+"-heatmap"]],this.below=null}var c=u.prototype;c.update=function(t){var f=this.subplot,n=this.layerList,o=r(t),l=f.belowLookup["trace-"+this.uid];f.map.getSource(this.sourceId).setData(o.geojson),l!==this.below&&(this._removeLayers(),this._addLayers(o,l),this.below=l);for(var h=0;h<n.length;h++){var i=n[h],s=i[0],p=i[1],d=o[s];f.setOptions(p,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&f.setOptions(p,"setPaintProperty",d.paint)}},c._addLayers=function(t,f){for(var n=this.subplot,o=this.layerList,l=this.sourceId,h=0;h<o.length;h++){var i=o[h],s=i[0],p=t[s];n.addLayer({type:s,id:i[1],source:l,layout:p.layout,paint:p.paint},f)}},c._removeLayers=function(){for(var t=this.subplot.map,f=this.layerList,n=f.length-1;n>=0;n--)t.removeLayer(f[n][1])},c.dispose=function(){var t=this.subplot.map;this._removeLayers(),t.removeSource(this.sourceId)},v.exports=function(f,n){var o=n[0].trace,l=new u(f,o.uid),h=l.sourceId,i=r(n),s=l.below=f.belowLookup["trace-"+o.uid];return f.map.addSource(h,{type:"geojson",data:i.geojson}),l._addLayers(i,s),l}},{"../../plots/mapbox/constants":883,"./convert":1037}],1043:[function(e,v,S){var r=e("../../lib");v.exports=function(u,c){for(var t=0;t<u.length;t++)u[t].i=t;r.mergeArray(c.text,u,"tx"),r.mergeArray(c.hovertext,u,"htx");var f=c.marker;if(f){r.mergeArray(f.opacity,u,"mo"),r.mergeArray(f.color,u,"mc");var n=f.line;n&&(r.mergeArray(n.color,u,"mlc"),r.mergeArrayCastPositive(n.width,u,"mlw"))}}},{"../../lib":778}],1044:[function(e,v,S){var r=e("../bar/attributes"),a=e("../scatter/attributes").line,u=e("../../plots/attributes"),c=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,f=e("./constants"),n=e("../../lib/extend").extendFlat,o=e("../../components/color");v.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,hovertext:r.hovertext,hovertemplate:c({},{keys:f.eventDataKeys}),hoverinfo:n({},u.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:t({editType:"plot"},{keys:f.eventDataKeys.concat(["label","value"])}),text:r.text,textposition:n({},r.textposition,{dflt:"auto"}),insidetextanchor:n({},r.insidetextanchor,{dflt:"middle"}),textangle:n({},r.textangle,{dflt:0}),textfont:r.textfont,insidetextfont:r.insidetextfont,outsidetextfont:r.outsidetextfont,constraintext:r.constraintext,cliponaxis:r.cliponaxis,orientation:n({},r.orientation,{}),offset:n({},r.offset,{arrayOk:!1}),width:n({},r.width,{arrayOk:!1}),marker:r.marker,connector:{fillcolor:{valType:"color",editType:"style"},line:{color:n({},a.color,{dflt:o.defaultLine}),width:n({},a.width,{dflt:0,editType:"plot"}),dash:a.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup}},{"../../components/color":643,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatter/attributes":1187,"./constants":1046}],1045:[function(e,v,S){var r=e("../../plots/cartesian/axes"),a=e("../../plots/cartesian/align_period"),u=e("./arrays_to_calcdata"),c=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;v.exports=function(o,l){var h=r.getFromId(o,l.xaxis||"x"),i=r.getFromId(o,l.yaxis||"y"),s,p,d,g,b,m;l.orientation==="h"?(s=h.makeCalcdata(l,"x"),d=i.makeCalcdata(l,"y"),p=a(l,i,"y",d),m=!!l.yperiodalignment):(s=i.makeCalcdata(l,"y"),d=h.makeCalcdata(l,"x"),p=a(l,h,"x",d),m=!!l.xperiodalignment);var x=Math.min(p.length,s.length),w=new Array(x);for(l._base=[],g=0;g<x;g++){s[g]<0&&(s[g]=t);var y=!1;s[g]!==t&&g+1<x&&s[g+1]!==t&&(y=!0),b=w[g]={p:p[g],s:s[g],cNext:y},l._base[g]=-.5*b.s,m&&(w[g].orig_p=d[g]),l.ids&&(b.id=String(l.ids[g])),g===0&&(w[0].vTotal=0),w[0].vTotal+=f(b.s),b.begR=f(b.s)/f(w[0].s)}var T;for(g=0;g<x;g++)b=w[g],b.s!==t&&(b.sumR=b.s/w[0].vTotal,b.difR=T!==void 0?b.s/T:1,T=b.s);return u(w,l),c(w,l),w};function f(n){return n===t?0:n}},{"../../constants/numerical":753,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../scatter/calc_selection":1189,"./arrays_to_calcdata":1043}],1046:[function(e,v,S){v.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],1047:[function(e,v,S){var r=e("../bar/cross_trace_calc").setGroupPositions;v.exports=function(u,c){var t=u._fullLayout,f=u._fullData,n=u.calcdata,o=c.xaxis,l=c.yaxis,h=[],i=[],s=[],p,d;for(d=0;d<f.length;d++){var g=f[d],b=g.orientation==="h";g.visible===!0&&g.xaxis===o._id&&g.yaxis===l._id&&g.type==="funnel"&&(p=n[d],b?s.push(p):i.push(p),h.push(p))}var m={mode:t.funnelmode,norm:t.funnelnorm,gap:t.funnelgap,groupgap:t.funnelgroupgap};for(r(u,o,l,i,m),r(u,l,o,s,m),d=0;d<h.length;d++){p=h[d];for(var x=0;x<p.length;x++)x+1<p.length&&(p[x].nextP0=p[x+1].p0,p[x].nextS0=p[x+1].s0,p[x].nextP1=p[x+1].p1,p[x].nextS1=p[x+1].s1)}}},{"../bar/cross_trace_calc":924}],1048:[function(e,v,S){var r=e("../../lib"),a=e("../bar/defaults").handleGroupingDefaults,u=e("../bar/defaults").handleText,c=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),f=e("./attributes"),n=e("../../components/color");function o(i,s,p,d){function g(M,P){return r.coerce(i,s,f,M,P)}var b=c(i,s,d,g);if(!b){s.visible=!1;return}t(i,s,d,g),g("orientation",s.y&&!s.x?"v":"h"),g("offset"),g("width");var m=g("text");g("hovertext"),g("hovertemplate");var x=g("textposition");u(i,s,d,g,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s.textposition!=="none"&&!s.texttemplate&&g("textinfo",Array.isArray(m)?"text+value":"value");var w=g("marker.color",p);g("marker.line.color",n.defaultLine),g("marker.line.width");var y=g("connector.visible");if(y){g("connector.fillcolor",l(w));var T=g("connector.line.width");T&&(g("connector.line.color"),g("connector.line.dash"))}}function l(i){var s=r.isArrayOrTypedArray(i)?"#000":i;return n.addOpacity(s,.5*n.opacity(s))}function h(i,s){var p,d;function g(m){return r.coerce(d._input,d,f,m)}if(s.funnelmode==="group")for(var b=0;b<i.length;b++)d=i[b],p=d._input,a(p,d,s,g)}v.exports={supplyDefaults:o,crossTraceDefaults:h}},{"../../components/color":643,"../../lib":778,"../bar/defaults":925,"../scatter/period_defaults":1207,"../scatter/xy_defaults":1214,"./attributes":1044}],1049:[function(e,v,S){v.exports=function(a,u){return a.x="xVal"in u?u.xVal:u.x,a.y="yVal"in u?u.yVal:u.y,"percentInitial"in u&&(a.percentInitial=u.percentInitial),"percentPrevious"in u&&(a.percentPrevious=u.percentPrevious),"percentTotal"in u&&(a.percentTotal=u.percentTotal),u.xa&&(a.xaxis=u.xa),u.ya&&(a.yaxis=u.ya),a}},{}],1050:[function(e,v,S){var r=e("../../components/color").opacity,a=e("../bar/hover").hoverOnBars,u=e("../../lib").formatPercent;v.exports=function(f,n,o,l){var h=a(f,n,o,l);if(!!h){var i=h.cd,s=i[0].trace,p=s.orientation==="h",d=h.index,g=i[d],b=p?"x":"y";h[b+"LabelVal"]=g.s,h.percentInitial=g.begR,h.percentInitialLabel=u(g.begR,1),h.percentPrevious=g.difR,h.percentPreviousLabel=u(g.difR,1),h.percentTotal=g.sumR,h.percentTotalLabel=u(g.sumR,1);var m=g.hi||s.hoverinfo,x=[];if(m&&m!=="none"&&m!=="skip"){var w=m==="all",y=m.split("+"),T=function(M){return w||y.indexOf(M)!==-1};T("percent initial")&&x.push(h.percentInitialLabel+" of initial"),T("percent previous")&&x.push(h.percentPreviousLabel+" of previous"),T("percent total")&&x.push(h.percentTotalLabel+" of total")}return h.extraText=x.join("<br>"),h.color=c(s,g),[h]}};function c(t,f){var n=t.marker,o=f.mc||n.color,l=f.mlc||n.line.color,h=f.mlw||n.line.width;if(r(o))return o;if(r(l)&&h)return l}},{"../../components/color":643,"../../lib":778,"../bar/hover":928}],1051:[function(e,v,S){v.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"../bar/select":933,"./attributes":1044,"./calc":1045,"./cross_trace_calc":1047,"./defaults":1048,"./event_data":1049,"./hover":1050,"./layout_attributes":1052,"./layout_defaults":1053,"./plot":1054,"./style":1055}],1052:[function(e,v,S){v.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1053:[function(e,v,S){var r=e("../../lib"),a=e("./layout_attributes");v.exports=function(u,c,t){var f=!1;function n(h,i){return r.coerce(u,c,a,h,i)}for(var o=0;o<t.length;o++){var l=t[o];if(l.visible&&l.type==="funnel"){f=!0;break}}f&&(n("funnelmode"),n("funnelgap",.2),n("funnelgroupgap"))}},{"../../lib":778,"./layout_attributes":1052}],1054:[function(e,v,S){var r=e("d3"),a=e("../../lib"),u=e("../../components/drawing"),c=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),f=e("../bar/uniform_text").clearMinTextSize;v.exports=function(i,s,p,d){var g=i._fullLayout;f("funnel",g),n(i,s,p,d),o(i,s,p,d),t.plot(i,s,p,d,{mode:g.funnelmode,norm:g.funnelmode,gap:g.funnelgap,groupgap:g.funnelgroupgap})};function n(h,i,s,p){var d=i.xaxis,g=i.yaxis;a.makeTraceGroups(p,s,"trace bars").each(function(b){var m=r.select(this),x=b[0].trace,w=a.ensureSingle(m,"g","regions");if(!x.connector||!x.connector.visible){w.remove();return}var y=x.orientation==="h",T=w.selectAll("g.region").data(a.identity);T.enter().append("g").classed("region",!0),T.exit().remove();var M=T.size();T.each(function(P,L){if(!(L!==M-1&&!P.cNext)){var I=l(P,d,g,y),E=I[0],k=I[1],C="";E[0]!==c&&k[0]!==c&&E[1]!==c&&k[1]!==c&&E[2]!==c&&k[2]!==c&&E[3]!==c&&k[3]!==c&&(y?C+="M"+E[0]+","+k[1]+"L"+E[2]+","+k[2]+"H"+E[3]+"L"+E[1]+","+k[1]+"Z":C+="M"+E[1]+","+k[1]+"L"+E[2]+","+k[3]+"V"+k[2]+"L"+E[1]+","+k[0]+"Z"),C===""&&(C="M0,0Z"),a.ensureSingle(r.select(this),"path").attr("d",C).call(u.setClipUrl,i.layerClipId,h)}})})}function o(h,i,s,p){var d=i.xaxis,g=i.yaxis;a.makeTraceGroups(p,s,"trace bars").each(function(b){var m=r.select(this),x=b[0].trace,w=a.ensureSingle(m,"g","lines");if(!x.connector||!x.connector.visible||!x.connector.line.width){w.remove();return}var y=x.orientation==="h",T=w.selectAll("g.line").data(a.identity);T.enter().append("g").classed("line",!0),T.exit().remove();var M=T.size();T.each(function(P,L){if(!(L!==M-1&&!P.cNext)){var I=l(P,d,g,y),E=I[0],k=I[1],C="";E[3]!==void 0&&k[3]!==void 0&&(y?(C+="M"+E[0]+","+k[1]+"L"+E[2]+","+k[2],C+="M"+E[1]+","+k[1]+"L"+E[3]+","+k[2]):(C+="M"+E[1]+","+k[1]+"L"+E[2]+","+k[3],C+="M"+E[1]+","+k[0]+"L"+E[2]+","+k[2])),C===""&&(C="M0,0Z"),a.ensureSingle(r.select(this),"path").attr("d",C).call(u.setClipUrl,i.layerClipId,h)}})})}function l(h,i,s,p){var d=[],g=[],b=p?i:s,m=p?s:i;return d[0]=b.c2p(h.s0,!0),g[0]=m.c2p(h.p0,!0),d[1]=b.c2p(h.s1,!0),g[1]=m.c2p(h.p1,!0),d[2]=b.c2p(h.nextS0,!0),g[2]=m.c2p(h.nextP0,!0),d[3]=b.c2p(h.nextS1,!0),g[3]=m.c2p(h.nextP1,!0),p?[d,g]:[g,d]}},{"../../components/drawing":665,"../../constants/numerical":753,"../../lib":778,"../bar/plot":932,"../bar/uniform_text":937,d3:169}],1055:[function(e,v,S){var r=e("d3"),a=e("../../components/drawing"),u=e("../../components/color"),c=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),f=e("../bar/uniform_text").resizeText,n=t.styleTextPoints;function o(l,h,i){var s=i||r.select(l).selectAll("g.funnellayer").selectAll("g.trace");f(l,s,"funnel"),s.style("opacity",function(p){return p[0].trace.opacity}),s.each(function(p){var d=r.select(this),g=p[0].trace;d.selectAll(".point > path").each(function(b){if(!b.isBlank){var m=g.marker;r.select(this).call(u.fill,b.mc||m.color).call(u.stroke,b.mlc||m.line.color).call(a.dashLine,m.line.dash,b.mlw||m.line.width).style("opacity",g.selectedpoints&&!b.selected?c:1)}}),n(d,g,l),d.selectAll(".regions").each(function(){r.select(this).selectAll("path").style("stroke-width",0).call(u.fill,g.connector.fillcolor)}),d.selectAll(".lines").each(function(){var b=g.connector.line;a.lineGroupStyle(r.select(this).selectAll("path"),b.width,b.color,b.dash)})})}v.exports={style:o}},{"../../components/color":643,"../../components/drawing":665,"../../constants/interactions":752,"../bar/style":935,"../bar/uniform_text":937,d3:169}],1056:[function(e,v,S){var r=e("../pie/attributes"),a=e("../../plots/attributes"),u=e("../../plots/domain").attributes,c=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,f=e("../../lib/extend").extendFlat;v.exports={labels:r.labels,label0:r.label0,dlabel:r.dlabel,values:r.values,marker:{colors:r.marker.colors,line:{color:f({},r.marker.line.color,{dflt:null}),width:f({},r.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:r.text,hovertext:r.hovertext,scalegroup:f({},r.scalegroup,{}),textinfo:f({},r.textinfo,{flags:["label","text","value","percent"]}),texttemplate:t({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:f({},a.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:c({},{keys:["label","color","value","text","percent"]}),textposition:f({},r.textposition,{values:["inside","none"],dflt:"inside"}),textfont:r.textfont,insidetextfont:r.insidetextfont,title:{text:r.title.text,font:r.title.font,position:f({},r.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:u({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/template_attributes":906,"../pie/attributes":1161}],1057:[function(e,v,S){var r=e("../../plots/plots");S.name="funnelarea",S.plot=function(a,u,c,t){r.plotBasePlot(S.name,a,u,c,t)},S.clean=function(a,u,c,t){r.cleanBasePlot(S.name,a,u,c,t)}},{"../../plots/plots":891}],1058:[function(e,v,S){var r=e("../pie/calc");function a(c,t){return r.calc(c,t)}function u(c){r.crossTraceCalc(c,{type:"funnelarea"})}v.exports={calc:a,crossTraceCalc:u}},{"../pie/calc":1163}],1059:[function(e,v,S){var r=e("../../lib"),a=e("./attributes"),u=e("../../plots/domain").defaults,c=e("../bar/defaults").handleText,t=e("../pie/defaults").handleLabelsAndValues;v.exports=function(n,o,l,h){function i(M,P){return r.coerce(n,o,a,M,P)}var s=i("labels"),p=i("values"),d=t(s,p),g=d.len;if(o._hasLabels=d.hasLabels,o._hasValues=d.hasValues,!o._hasLabels&&o._hasValues&&(i("label0"),i("dlabel")),!g){o.visible=!1;return}o._length=g;var b=i("marker.line.width");b&&i("marker.line.color",h.paper_bgcolor),i("marker.colors"),i("scalegroup");var m=i("text"),x=i("texttemplate"),w;if(x||(w=i("textinfo",Array.isArray(m)?"text+percent":"percent")),i("hovertext"),i("hovertemplate"),x||w&&w!=="none"){var y=i("textposition");c(n,o,h,i,y,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}u(o,h,i);var T=i("title.text");T&&(i("title.position"),r.coerceFont(i,"title.font",h.font)),i("aspectratio"),i("baseratio")}},{"../../lib":778,"../../plots/domain":855,"../bar/defaults":925,"../pie/defaults":1164,"./attributes":1056}],1060:[function(e,v,S){v.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style"),styleOne:e("../pie/style_one"),meta:{}}},{"../pie/style_one":1172,"./attributes":1056,"./base_plot":1057,"./calc":1058,"./defaults":1059,"./layout_attributes":1061,"./layout_defaults":1062,"./plot":1063,"./style":1064}],1061:[function(e,v,S){var r=e("../pie/layout_attributes").hiddenlabels;v.exports={hiddenlabels:r,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":1168}],1062:[function(e,v,S){var r=e("../../lib"),a=e("./layout_attributes");v.exports=function(c,t){function f(n,o){return r.coerce(c,t,a,n,o)}f("hiddenlabels"),f("funnelareacolorway",t.colorway),f("extendfunnelareacolors")}},{"../../lib":778,"./layout_attributes":1061}],1063:[function(e,v,S){var r=e("d3"),a=e("../../components/drawing"),u=e("../../lib"),c=u.strScale,t=u.strTranslate,f=e("../../lib/svg_text_utils"),n=e("../bar/plot"),o=n.toMoveInsideBar,l=e("../bar/uniform_text"),h=l.recordMinTextSize,i=l.clearMinTextSize,s=e("../pie/helpers"),p=e("../pie/plot"),d=p.attachFxHandlers,g=p.determineInsideTextFont,b=p.layoutAreas,m=p.prerenderTitles,x=p.positionTitleOutside,w=p.formatSliceLabel;v.exports=function(L,I){var E=L._fullLayout;i("funnelarea",E),m(I,L),b(I,E._size),u.makeTraceGroups(E._funnelarealayer,I,"trace").each(function(k){var C=r.select(this),D=k[0],F=D.trace;M(k),C.each(function(){var N=r.select(this).selectAll("g.slice").data(k);N.enter().append("g").classed("slice",!0),N.exit().remove(),N.each(function(U,X){if(U.hidden){r.select(this).selectAll("path,g").remove();return}U.pointNumber=U.i,U.curveNumber=F.index;var z=D.cx,B=D.cy,j=r.select(this),V=j.selectAll("path.surface").data([U]);V.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),j.call(d,L,k);var K="M"+(z+U.TR[0])+","+(B+U.TR[1])+y(U.TR,U.BR)+y(U.BR,U.BL)+y(U.BL,U.TL)+"Z";V.attr("d",K),w(L,U,D);var te=s.castOption(F.textposition,U.pts),$=j.selectAll("g.slicetext").data(U.text&&te!=="none"?[0]:[]);$.enter().append("g").classed("slicetext",!0),$.exit().remove(),$.each(function(){var ie=u.ensureSingle(r.select(this),"text","",function(fe){fe.attr("data-notex",1)}),se=u.ensureUniformFontSize(L,g(F,U,E.font));ie.text(U.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(a.font,se).call(f.convertToTspans,L);var Q=a.bBox(ie.node()),H,oe,re,ee=Math.min(U.BL[1],U.BR[1])+B,ae=Math.max(U.TL[1],U.TR[1])+B;oe=Math.max(U.TL[0],U.BL[0])+z,re=Math.min(U.TR[0],U.BR[0])+z,H=o(oe,re,ee,ae,Q,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),H.fontSize=se.size,h(F.type,H,E),k[X].transform=H,ie.attr("transform",u.getTextTransform(H))})});var G=r.select(this).selectAll("g.titletext").data(F.title.text?[0]:[]);G.enter().append("g").classed("titletext",!0),G.exit().remove(),G.each(function(){var U=u.ensureSingle(r.select(this),"text","",function(B){B.attr("data-notex",1)}),X=F.title.text;F._meta&&(X=u.templateString(X,F._meta)),U.text(X).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(a.font,F.title.font).call(f.convertToTspans,L);var z=x(D,E._size);U.attr("transform",t(z.x,z.y)+c(Math.min(1,z.scale))+t(z.tx,z.ty))})})})};function y(P,L){var I=L[0]-P[0],E=L[1]-P[1];return"l"+I+","+E}function T(P,L){return[.5*(P[0]+L[0]),.5*(P[1]+L[1])]}function M(P){if(!P.length)return;var L=P[0],I=L.trace,E=I.aspectratio,k=I.baseratio;k>.999&&(k=.999);var C=Math.pow(k,2),D=L.vTotal,F=D*C/(1-C),N=D,G=F/D;function U(){var pe=Math.sqrt(G);return{x:pe,y:-pe}}function X(){var pe=U();return[pe.x,pe.y]}var z,B=[];B.push(X());var j,V;for(j=P.length-1;j>-1;j--)if(V=P[j],!V.hidden){var K=V.v/N;G+=K,B.push(X())}var te=1/0,$=-1/0;for(j=0;j<B.length;j++)z=B[j],te=Math.min(te,z[1]),$=Math.max($,z[1]);for(j=0;j<B.length;j++)B[j][1]-=($+te)/2;var ie=B[B.length-1][0],se=L.r,Q=($-te)/2,H=se/ie,oe=se/Q*E;for(L.r=oe*Q,j=0;j<B.length;j++)B[j][0]*=H,B[j][1]*=oe;z=B[0];var re=[-z[0],z[1]],ee=[z[0],z[1]],ae=0;for(j=P.length-1;j>-1;j--)if(V=P[j],!V.hidden){ae+=1;var fe=B[ae][0],de=B[ae][1];V.TL=[-fe,de],V.TR=[fe,de],V.BL=re,V.BR=ee,V.pxmid=T(V.TR,V.BR),re=V.TL,ee=V.TR}}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../bar/plot":932,"../bar/uniform_text":937,"../pie/helpers":1166,"../pie/plot":1170,d3:169}],1064:[function(e,v,S){var r=e("d3"),a=e("../pie/style_one"),u=e("../bar/uniform_text").resizeText;v.exports=function(t){var f=t._fullLayout._funnelarealayer.selectAll(".trace");u(t,f,"funnelarea"),f.each(function(n){var o=n[0],l=o.trace,h=r.select(this);h.style({opacity:l.opacity}),h.selectAll("path.surface").each(function(i){r.select(this).call(a,i,l)})})}},{"../bar/uniform_text":937,"../pie/style_one":1172,d3:169}],1065:[function(e,v,S){var r=e("../scatter/attributes"),a=e("../../plots/attributes"),u=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../components/colorscale/attributes");e("../../constants/docs").FORMAT_LINK;var t=e("../../lib/extend").extendFlat;v.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},r.x,{impliedEdits:{xtype:"array"}}),x0:t({},r.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},r.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},r.y,{impliedEdits:{ytype:"array"}}),y0:t({},r.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},r.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},r.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},r.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},r.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},r.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},r.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},r.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"},hovertemplate:u(),showlegend:t({},a.showlegend,{dflt:!1})},{transforms:void 0},c("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":650,"../../constants/docs":748,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1066:[function(e,v,S){var r=e("../../registry"),a=e("../../lib"),u=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/align_period"),t=e("../histogram2d/calc"),f=e("../../components/colorscale/calc"),n=e("./convert_column_xyz"),o=e("./clean_2d_array"),l=e("./interp2d"),h=e("./find_empties"),i=e("./make_bound_array"),s=e("../../constants/numerical").BADNUM;v.exports=function(b,m){var x=u.getFromId(b,m.xaxis||"x"),w=u.getFromId(b,m.yaxis||"y"),y=r.traceIs(m,"contour"),T=r.traceIs(m,"histogram"),M=r.traceIs(m,"gl2d"),P=y?"best":m.zsmooth,L,I,E,k,C,D,F,N,G,U,X;if(x._minDtick=0,w._minDtick=0,T)X=t(b,m),k=X.orig_x,L=X.x,I=X.x0,E=X.dx,N=X.orig_y,C=X.y,D=X.y0,F=X.dy,G=X.z;else{var z=m.z;a.isArray1D(z)?(n(m,x,w,"x","y",["z"]),L=m._x,C=m._y,z=m._z):(k=m.x?x.makeCalcdata(m,"x"):[],N=m.y?w.makeCalcdata(m,"y"):[],L=c(m,x,"x",k),C=c(m,w,"y",N),m._x=L,m._y=C),I=m.x0,E=m.dx,D=m.y0,F=m.dy,G=o(z,m,x,w)}(x.rangebreaks||w.rangebreaks)&&(G=d(L,C,G),T||(L=p(L),C=p(C),m._x=L,m._y=C)),!T&&(y||m.connectgaps)&&(m._emptypoints=h(G),l(G,m._emptypoints));function B(ee){P=m._input.zsmooth=m.zsmooth=!1,a.warn('cannot use zsmooth: "fast": '+ee)}if(P==="fast"){if(x.type==="log"||w.type==="log")B("log axis found");else if(!T){if(L.length){var j=(L[L.length-1]-L[0])/(L.length-1),V=Math.abs(j/100);for(U=0;U<L.length-1;U++)if(Math.abs(L[U+1]-L[U]-j)>V){B("x scale is not linear");break}}if(C.length&&P==="fast"){var K=(C[C.length-1]-C[0])/(C.length-1),te=Math.abs(K/100);for(U=0;U<C.length-1;U++)if(Math.abs(C[U+1]-C[U]-K)>te){B("y scale is not linear");break}}}}var $=a.maxRowLength(G),ie=m.xtype==="scaled"?"":L,se=i(m,ie,I,E,$,x),Q=m.ytype==="scaled"?"":C,H=i(m,Q,D,F,G.length,w);M||(m._extremes[x._id]=u.findExtremes(x,se),m._extremes[w._id]=u.findExtremes(w,H));var oe={x:se,y:H,z:G,text:m._text||m.text,hovertext:m._hovertext||m.hovertext};if(m.xperiodalignment&&k&&(oe.orig_x=k),m.yperiodalignment&&N&&(oe.orig_y=N),ie&&ie.length===se.length-1&&(oe.xCenter=ie),Q&&Q.length===H.length-1&&(oe.yCenter=Q),T&&(oe.xRanges=X.xRanges,oe.yRanges=X.yRanges,oe.pts=X.pts),y||f(b,m,{vals:G,cLetter:"z"}),y&&m.contours&&m.contours.coloring==="heatmap"){var re={type:m.type==="contour"?"heatmap":"histogram2d",xcalendar:m.xcalendar,ycalendar:m.ycalendar};oe.xfill=i(re,ie,I,E,$,x),oe.yfill=i(re,Q,D,F,G.length,w)}return[oe]};function p(g){for(var b=[],m=g.length,x=0;x<m;x++){var w=g[x];w!==s&&b.push(w)}return b}function d(g,b,m){for(var x=[],w=-1,y=0;y<m.length;y++)if(b[y]!==s){w++,x[w]=[];for(var T=0;T<m[y].length;T++)g[T]!==s&&x[w].push(m[y][T])}return x}},{"../../components/colorscale/calc":651,"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../../registry":911,"../histogram2d/calc":1098,"./clean_2d_array":1067,"./convert_column_xyz":1069,"./find_empties":1071,"./interp2d":1074,"./make_bound_array":1075}],1067:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../constants/numerical").BADNUM;v.exports=function(t,f,n,o){var l,h,i,s,p,d;function g(T){if(!!r(T))return+T}if(f&&f.transpose){for(l=0,p=0;p<t.length;p++)l=Math.max(l,t[p].length);if(l===0)return!1;i=function(T){return T.length},s=function(T,M,P){return(T[P]||[])[M]}}else l=t.length,i=function(T,M){return T[M].length},s=function(T,M,P){return(T[M]||[])[P]};var b=function(T,M,P){return M===u||P===u?u:s(T,M,P)};function m(T){if(f&&f.type!=="carpet"&&f.type!=="contourcarpet"&&T&&T.type==="category"&&f["_"+T._id.charAt(0)].length){var M=T._id.charAt(0),P={},L=f["_"+M+"CategoryMap"]||f[M];for(p=0;p<L.length;p++)P[L[p]]=p;return function(I){var E=P[T._categories[I]];return E+1?E:u}}else return a.identity}var x=m(n),w=m(o);o&&o.type==="category"&&(l=o._categories.length);var y=new Array(l);for(p=0;p<l;p++)for(n&&n.type==="category"?h=n._categories.length:h=i(t,p),y[p]=new Array(h),d=0;d<h;d++)y[p][d]=g(b(t,w(p),x(d)));return y}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],1068:[function(e,v,S){v.exports={min:"zmin",max:"zmax"}},{}],1069:[function(e,v,S){var r=e("../../lib"),a=e("../../constants/numerical").BADNUM,u=e("../../plots/cartesian/align_period");v.exports=function(t,f,n,o,l,h){var i=t._length,s=f.makeCalcdata(t,o),p=n.makeCalcdata(t,l);s=u(t,f,o,s),p=u(t,n,l,p);var d=t.text,g=d!==void 0&&r.isArray1D(d),b=t.hovertext,m=b!==void 0&&r.isArray1D(b),x,w,y=r.distinctVals(s),T=y.vals,M=r.distinctVals(p),P=M.vals,L=[],I,E,k=P.length,C=T.length;for(x=0;x<h.length;x++)L[x]=r.init2dArray(k,C);g&&(I=r.init2dArray(k,C)),m&&(E=r.init2dArray(k,C));var D=r.init2dArray(k,C);for(x=0;x<i;x++)if(s[x]!==a&&p[x]!==a){var F=r.findBin(s[x]+y.minDiff/2,T),N=r.findBin(p[x]+M.minDiff/2,P);for(w=0;w<h.length;w++){var G=h[w],U=t[G],X=L[w];X[N][F]=U[x],D[N][F]=x}g&&(I[N][F]=d[x]),m&&(E[N][F]=b[x])}for(t["_"+o]=T,t["_"+l]=P,w=0;w<h.length;w++)t["_"+h[w]]=L[w];g&&(t._text=I),m&&(t._hovertext=E),f&&f.type==="category"&&(t["_"+o+"CategoryMap"]=T.map(function(z){return f._categories[z]})),n&&n.type==="category"&&(t["_"+l+"CategoryMap"]=P.map(function(z){return n._categories[z]})),t._after2before=D}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825}],1070:[function(e,v,S){var r=e("../../lib"),a=e("./xyz_defaults"),u=e("../scatter/period_defaults"),c=e("./style_defaults"),t=e("../../components/colorscale/defaults"),f=e("./attributes");v.exports=function(o,l,h,i){function s(d,g){return r.coerce(o,l,f,d,g)}var p=a(o,l,s,i);if(!p){l.visible=!1;return}u(o,l,i,s),s("text"),s("hovertext"),s("hovertemplate"),c(o,l,s,i),s("hoverongaps"),s("connectgaps",r.isArray1D(l.z)&&l.zsmooth!==!1),t(o,l,i,s,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":653,"../../lib":778,"../scatter/period_defaults":1207,"./attributes":1065,"./style_defaults":1078,"./xyz_defaults":1079}],1071:[function(e,v,S){var r=e("../../lib").maxRowLength;v.exports=function(u){var c=[],t={},f=[],n=u[0],o=[],l=[0,0,0],h=r(u),i,s,p,d,g,b,m,x;for(s=0;s<u.length;s++)for(i=o,o=n,n=u[s+1]||[],p=0;p<h;p++)o[p]===void 0&&(b=(o[p-1]!==void 0?1:0)+(o[p+1]!==void 0?1:0)+(i[p]!==void 0?1:0)+(n[p]!==void 0?1:0),b?(s===0&&b++,p===0&&b++,s===u.length-1&&b++,p===o.length-1&&b++,b<4&&(t[[s,p]]=[s,p,b]),c.push([s,p,b])):f.push([s,p]));for(;f.length;){for(m={},x=!1,g=f.length-1;g>=0;g--)d=f[g],s=d[0],p=d[1],b=((t[[s-1,p]]||l)[2]+(t[[s+1,p]]||l)[2]+(t[[s,p-1]]||l)[2]+(t[[s,p+1]]||l)[2])/20,b&&(m[d]=[s,p,b],f.splice(g,1),x=!0);if(!x)throw"findEmpties iterated with no new neighbors";for(d in m)t[d]=m[d],c.push(m[d])}return c.sort(function(w,y){return y[2]-w[2]})}},{"../../lib":778}],1072:[function(e,v,S){var r=e("../../components/fx"),a=e("../../lib"),u=e("../../plots/cartesian/axes"),c=e("../../components/colorscale").extractOpts;v.exports=function(f,n,o,l,h,i){var s=f.cd[0],p=s.trace,d=f.xa,g=f.ya,b=s.x,m=s.y,x=s.z,w=s.xCenter,y=s.yCenter,T=s.zmask,M=p.zhoverformat,P=b,L=m,I,E,k,C;if(f.index!==!1){try{k=Math.round(f.index[1]),C=Math.round(f.index[0])}catch{a.error("Error hovering on heatmap, pointNumber must be [row,col], found:",f.index);return}if(k<0||k>=x[0].length||C<0||C>x.length)return}else{if(r.inbox(n-b[0],n-b[b.length-1],0)>0||r.inbox(o-m[0],o-m[m.length-1],0)>0)return;if(i){var D;for(P=[2*b[0]-b[1]],D=1;D<b.length;D++)P.push((b[D]+b[D-1])/2);for(P.push([2*b[b.length-1]-b[b.length-2]]),L=[2*m[0]-m[1]],D=1;D<m.length;D++)L.push((m[D]+m[D-1])/2);L.push([2*m[m.length-1]-m[m.length-2]])}k=Math.max(0,Math.min(P.length-2,a.findBin(n,P))),C=Math.max(0,Math.min(L.length-2,a.findBin(o,L)))}var F=d.c2p(b[k]),N=d.c2p(b[k+1]),G=g.c2p(m[C]),U=g.c2p(m[C+1]),X,z;i?(X=s.orig_x||b,z=s.orig_y||m,N=F,I=X[k],U=G,E=z[C]):(X=s.orig_x||w||b,z=s.orig_y||y||m,I=w?X[k]:(X[k]+X[k+1])/2,E=y?z[C]:(z[C]+z[C+1])/2,d&&d.type==="category"&&(I=b[k]),g&&g.type==="category"&&(E=m[C]),p.zsmooth&&(F=N=d.c2p(I),G=U=g.c2p(E)));var B=x[C][k];if(T&&!T[C][k]&&(B=void 0),!(B===void 0&&!p.hoverongaps)){var j;Array.isArray(s.hovertext)&&Array.isArray(s.hovertext[C])?j=s.hovertext[C][k]:Array.isArray(s.text)&&Array.isArray(s.text[C])&&(j=s.text[C][k]);var V=c(p),K={type:"linear",range:[V.min,V.max],hoverformat:M,_separators:d._separators,_numFormat:d._numFormat},te=u.tickText(K,B,"hover").text;return[a.extendFlat(f,{index:p._after2before?p._after2before[C][k]:[C,k],distance:f.maxHoverDistance,spikeDistance:f.maxSpikeDistance,x0:F,x1:N,y0:G,y1:U,xLabelVal:I,yLabelVal:E,zLabelVal:B,zLabel:te,text:j})]}}},{"../../components/colorscale":655,"../../components/fx":683,"../../lib":778,"../../plots/cartesian/axes":828}],1073:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:e("./colorbar"),style:e("./style"),hoverPoints:e("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":841,"./attributes":1065,"./calc":1066,"./colorbar":1068,"./defaults":1070,"./hover":1072,"./plot":1076,"./style":1077}],1074:[function(e,v,S){var r=e("../../lib"),a=.01,u=[[-1,0],[1,0],[0,-1],[0,1]];function c(f){return .5-.25*Math.min(1,f*.5)}v.exports=function(n,o){var l=1,h;for(t(n,o),h=0;h<o.length&&!(o[h][2]<4);h++);for(o=o.slice(h),h=0;h<100&&l>a;h++)l=t(n,o,c(l));return l>a&&r.log("interp2d didn't converge quickly",l),n};function t(f,n,o){var l=0,h,i,s,p,d,g,b,m,x,w,y,T,M;for(p=0;p<n.length;p++){for(h=n[p],i=h[0],s=h[1],y=f[i][s],w=0,x=0,d=0;d<4;d++)g=u[d],b=f[i+g[0]],b&&(m=b[s+g[1]],m!==void 0&&(w===0?T=M=m:(T=Math.min(T,m),M=Math.max(M,m)),x++,w+=m));if(x===0)throw"iterateInterp2d order is wrong: no defined neighbors";f[i][s]=w/x,y===void 0?x<4&&(l=1):(f[i][s]=(1+o)*f[i][s]-o*y,M>T&&(l=Math.max(l,Math.abs(f[i][s]-y)/(M-T))))}return l}},{"../../lib":778}],1075:[function(e,v,S){var r=e("../../registry"),a=e("../../lib").isArrayOrTypedArray;v.exports=function(c,t,f,n,o,l){var h=[],i=r.traceIs(c,"contour"),s=r.traceIs(c,"histogram"),p=r.traceIs(c,"gl2d"),d,g,b,m=a(t)&&t.length>1;if(m&&!s&&l.type!=="category"){var x=t.length;if(x<=o){if(i||p)h=t.slice(0,o);else if(o===1)h=[t[0]-.5,t[0]+.5];else{for(h=[1.5*t[0]-.5*t[1]],b=1;b<x;b++)h.push((t[b-1]+t[b])*.5);h.push(1.5*t[x-1]-.5*t[x-2])}if(x<o){var w=h[h.length-1],y=w-h[h.length-2];for(b=x;b<o;b++)w+=y,h.push(w)}}else return i?t.slice(0,o):t.slice(0,o+1)}else{var T=c[l._id.charAt(0)+"calendar"];if(s)d=l.r2c(f,0,T);else if(a(t)&&t.length===1)d=t[0];else if(f===void 0)d=0;else{var M=l.type==="log"?l.d2c:l.r2c;d=M(f,0,T)}for(g=n||1,b=i||p?0:-.5;b<o;b++)h.push(d+g*b)}return h}},{"../../lib":778,"../../registry":911}],1076:[function(e,v,S){var r=e("d3"),a=e("tinycolor2"),u=e("../../registry"),c=e("../../lib"),t=e("../../components/colorscale").makeColorScaleFuncFromTrace,f=e("../../constants/xmlns_namespaces");v.exports=function(h,i,s,p){var d=i.xaxis,g=i.yaxis;c.makeTraceGroups(p,s,"hm").each(function(b){var m=r.select(this),x=b[0],w=x.trace,y=x.z,T=x.x,M=x.y,P=x.xCenter,L=x.yCenter,I=u.traceIs(w,"contour"),E=I?"best":w.zsmooth,k=y.length,C=c.maxRowLength(y),D=!1,F=!1,N,G,U,X,z,B;for(B=0;N===void 0&&B<T.length-1;)N=d.c2p(T[B]),B++;for(B=T.length-1;G===void 0&&B>0;)G=d.c2p(T[B]),B--;for(G<N&&(U=G,G=N,N=U,D=!0),B=0;X===void 0&&B<M.length-1;)X=g.c2p(M[B]),B++;for(B=M.length-1;z===void 0&&B>0;)z=g.c2p(M[B]),B--;if(z<X&&(U=X,X=z,z=U,F=!0),I&&(P=T,L=M,T=x.xfill,M=x.yfill),E!=="fast"){var j=E==="best"?0:.5;N=Math.max(-j*d._length,N),G=Math.min((1+j)*d._length,G),X=Math.max(-j*g._length,X),z=Math.min((1+j)*g._length,z)}var V=Math.round(G-N),K=Math.round(z-X),te=V<=0||K<=0;if(te){var $=m.selectAll("image").data([]);$.exit().remove();return}var ie,se;E==="fast"?(ie=C,se=k):(ie=V,se=K);var Q=document.createElement("canvas");Q.width=ie,Q.height=se;var H=Q.getContext("2d"),oe=t(w,{noNumericCheck:!0,returnArray:!0}),re,ee;E==="fast"?(re=D?function(Ie){return C-1-Ie}:c.identity,ee=F?function(Ie){return k-1-Ie}:c.identity):(re=function(Ie){return c.constrain(Math.round(d.c2p(T[Ie])-N),0,V)},ee=function(Ie){return c.constrain(Math.round(g.c2p(M[Ie])-X),0,K)});var ae=ee(0),fe=[ae,ae],de=D?0:1,pe=F?0:1,W=0,ue=0,me=0,be=0,Me,Pe,Ge,ze,Qe,tt;function Ce(Ie,He){if(Ie!==void 0){var Ye=oe(Ie);return Ye[0]=Math.round(Ye[0]),Ye[1]=Math.round(Ye[1]),Ye[2]=Math.round(Ye[2]),W+=He,ue+=Ye[0]*He,me+=Ye[1]*He,be+=Ye[2]*He,Ye}return[0,0,0,0]}function Ae(Ie,He,Ye,ft){var it=Ie[Ye.bin0];if(it===void 0)return Ce(void 0,1);var je=Ie[Ye.bin1],ot=He[Ye.bin0],Je=He[Ye.bin1],st=je-it||0,It=ot-it||0,Nt;return je===void 0?Je===void 0?Nt=0:ot===void 0?Nt=2*(Je-it):Nt=(2*Je-ot-it)*2/3:Je===void 0?ot===void 0?Nt=0:Nt=(2*it-je-ot)*2/3:ot===void 0?Nt=(2*Je-je-it)*2/3:Nt=Je+it-je-ot,Ce(it+Ye.frac*st+ft.frac*(It+Ye.frac*Nt))}if(E){var Be=0,qe;try{qe=new Uint8Array(V*K*4)}catch{qe=new Array(V*K*4)}if(E==="best"){var Tt=P||T,At=L||M,Ne=new Array(Tt.length),ct=new Array(At.length),Mt=new Array(V),Wt=P?o:n,qt=L?o:n,zt,$t,rr;for(B=0;B<Tt.length;B++)Ne[B]=Math.round(d.c2p(Tt[B])-N);for(B=0;B<At.length;B++)ct[B]=Math.round(g.c2p(At[B])-X);for(B=0;B<V;B++)Mt[B]=Wt(B,Ne);for(Pe=0;Pe<K;Pe++)for(zt=qt(Pe,ct),$t=y[zt.bin0],rr=y[zt.bin1],B=0;B<V;B++,Be+=4)tt=Ae($t,rr,Mt[B],zt),l(qe,Be,tt)}else for(Pe=0;Pe<k;Pe++)for(Qe=y[Pe],fe=ee(Pe),B=0;B<V;B++)tt=Ce(Qe[B],1),Be=(fe*V+re(B))*4,l(qe,Be,tt);var Lt=H.createImageData(V,K);try{Lt.data.set(qe)}catch{var Ct=Lt.data,dt=Ct.length;for(Pe=0;Pe<dt;Pe++)Ct[Pe]=qe[Pe]}H.putImageData(Lt,0,0)}else{var lt=w.xgap,Te=w.ygap,Le=Math.floor(lt/2),Ue=Math.floor(Te/2);for(Pe=0;Pe<k;Pe++)if(Qe=y[Pe],fe.reverse(),fe[pe]=ee(Pe+1),!(fe[0]===fe[1]||fe[0]===void 0||fe[1]===void 0))for(Ge=re(0),Me=[Ge,Ge],B=0;B<C;B++)Me.reverse(),Me[de]=re(B+1),!(Me[0]===Me[1]||Me[0]===void 0||Me[1]===void 0)&&(ze=Qe[B],tt=Ce(ze,(Me[1]-Me[0])*(fe[1]-fe[0])),H.fillStyle="rgba("+tt.join(",")+")",H.fillRect(Me[0]+Le,fe[0]+Ue,Me[1]-Me[0]-lt,fe[1]-fe[0]-Te))}ue=Math.round(ue/W),me=Math.round(me/W),be=Math.round(be/W);var et=a("rgb("+ue+","+me+","+be+")");h._hmpixcount=(h._hmpixcount||0)+W,h._hmlumcount=(h._hmlumcount||0)+W*et.getLuminance();var ke=m.selectAll("image").data(b);ke.enter().append("svg:image").attr({xmlns:f.svg,preserveAspectRatio:"none"}),ke.attr({height:K,width:V,x:N,y:X,"xlink:href":Q.toDataURL("image/png")})})};function n(h,i){var s=i.length-2,p=c.constrain(c.findBin(h,i),0,s),d=i[p],g=i[p+1],b=c.constrain(p+(h-d)/(g-d)-.5,0,s),m=Math.round(b),x=Math.abs(b-m);return!b||b===s||!x?{bin0:m,bin1:m,frac:0}:{bin0:m,frac:x,bin1:Math.round(m+x/(b-m))}}function o(h,i){var s=i.length-1,p=c.constrain(c.findBin(h,i),0,s),d=i[p],g=i[p+1],b=(h-d)/(g-d)||0;return b<=0?{bin0:p,bin1:p,frac:0}:b<.5?{bin0:p,bin1:p+1,frac:b}:{bin0:p+1,bin1:p,frac:1-b}}function l(h,i,s){h[i]=s[0],h[i+1]=s[1],h[i+2]=s[2],h[i+3]=Math.round(s[3]*255)}},{"../../components/colorscale":655,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../registry":911,d3:169,tinycolor2:576}],1077:[function(e,v,S){var r=e("d3");v.exports=function(u){r.select(u).selectAll(".hm image").style("opacity",function(c){return c.trace.opacity})}},{d3:169}],1078:[function(e,v,S){v.exports=function(a,u,c){var t=c("zsmooth");t===!1&&(c("xgap"),c("ygap")),c("zhoverformat")}},{}],1079:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../registry");v.exports=function(n,o,l,h,i,s){var p=l("z");i=i||"x",s=s||"y";var d,g;if(p===void 0||!p.length)return 0;if(a.isArray1D(n.z)){d=l(i),g=l(s);var b=a.minRowLength(d),m=a.minRowLength(g);if(b===0||m===0)return 0;o._length=Math.min(b,m,p.length)}else{if(d=c(i,l),g=c(s,l),!t(p))return 0;l("transpose"),o._length=null}if(n.type==="heatmapgl"||n.type==="contourgl")return!0;var x=u.getComponentMethod("calendars","handleTraceDefaults");return x(n,o,[i,s],h),!0};function c(f,n){var o=n(f),l=o?n(f+"type","array"):"scaled";return l==="scaled"&&(n(f+"0"),n("d"+f)),o}function t(f){for(var n=!0,o=!1,l=!1,h,i=0;i<f.length;i++){if(h=f[i],!a.isArrayOrTypedArray(h)){n=!1;break}h.length>0&&(o=!0);for(var s=0;s<h.length;s++)if(r(h[s])){l=!0;break}}return n&&o&&l}},{"../../lib":778,"../../registry":911,"fast-isnumeric":241}],1080:[function(e,v,S){for(var r=e("../heatmap/attributes"),a=e("../../components/colorscale/attributes"),u=e("../../lib/extend").extendFlat,c=e("../../plot_api/edit_types").overrideAll,t=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],f={},n=0;n<t.length;n++){var o=t[n];f[o]=r[o]}f.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},u(f,a("",{cLetter:"z",autoColorDflt:!1})),v.exports=c(f,"calc","nested")},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../heatmap/attributes":1065}],1081:[function(e,v,S){var r=e("gl-heatmap2d"),a=e("../../plots/cartesian/axes"),u=e("../../lib/str2rgbarray");function c(o,l){this.scene=o,this.uid=l,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=r(o.glplot,this.options),this.heatmap._trace=this}var t=c.prototype;t.handlePick=function(o){var l=this.options,h=l.shape,i=o.pointId,s=i%h[0],p=Math.floor(i/h[0]),d=i;return{trace:this,dataCoord:o.dataCoord,traceCoord:[l.x[s],l.y[p],l.z[d]],textLabel:this.textLabels[i],name:this.name,pointIndex:[p,s],hoverinfo:this.hoverinfo}},t.update=function(o,l){var h=l[0];this.index=o.index,this.name=o.name,this.hoverinfo=o.hoverinfo;var i=h.z;this.options.z=[].concat.apply([],i);var s=i[0].length,p=i.length;this.options.shape=[s,p],this.options.x=h.x,this.options.y=h.y,this.options.zsmooth=o.zsmooth;var d=f(o);this.options.colorLevels=d.colorLevels,this.options.colorValues=d.colorValues,this.textLabels=[].concat.apply([],o.text),this.heatmap.update(this.options);var g=this.scene.xaxis,b=this.scene.yaxis,m,x;o.zsmooth===!1&&(m={ppad:h.x[1]-h.x[0]},x={ppad:h.y[1]-h.y[0]}),o._extremes[g._id]=a.findExtremes(g,h.x,m),o._extremes[b._id]=a.findExtremes(b,h.y,x)},t.dispose=function(){this.heatmap.dispose()};function f(o){for(var l=o.colorscale,h=o.zmin,i=o.zmax,s=l.length,p=new Array(s),d=new Array(4*s),g=0;g<s;g++){var b=l[g],m=u(b[1]);p[g]=h+b[0]*(i-h);for(var x=0;x<4;x++)d[4*g+x]=m[x]}return{colorLevels:p,colorValues:d}}function n(o,l,h){var i=new c(o,l.uid);return i.update(l,h),i}v.exports=n},{"../../lib/str2rgbarray":802,"../../plots/cartesian/axes":828,"gl-heatmap2d":271}],1082:[function(e,v,S){var r=e("../../lib"),a=e("../heatmap/xyz_defaults"),u=e("../../components/colorscale/defaults"),c=e("./attributes");v.exports=function(f,n,o,l){function h(s,p){return r.coerce(f,n,c,s,p)}var i=a(f,n,h,l);if(!i){n.visible=!1;return}h("text"),h("zsmooth"),u(f,n,l,h,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":653,"../../lib":778,"../heatmap/xyz_defaults":1079,"./attributes":1080}],1083:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../heatmap/calc"),plot:e("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":868,"../heatmap/calc":1066,"../heatmap/colorbar":1068,"./attributes":1080,"./convert":1081,"./defaults":1082}],1084:[function(e,v,S){var r=e("../bar/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("./bin_attributes"),c=e("./constants"),t=e("../../lib/extend").extendFlat;v.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:t({},r.text,{}),hovertext:t({},r.hovertext,{}),orientation:r.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:u("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:u("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:a({},{keys:c.eventDataKeys}),marker:r.marker,offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,_deprecated:{bardir:r._deprecated.bardir}}},{"../../lib/extend":768,"../../plots/template_attributes":906,"../bar/attributes":921,"./bin_attributes":1086,"./constants":1090}],1085:[function(e,v,S){v.exports=function(a,u){for(var c=a.length,t=0,f=0;f<c;f++)u[f]?(a[f]/=u[f],t+=a[f]):a[f]=null;return t}},{}],1086:[function(e,v,S){v.exports=function(a,u){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],1087:[function(e,v,S){var r=e("fast-isnumeric");v.exports={count:function(a,u,c){return c[a]++,1},sum:function(a,u,c,t){var f=t[u];return r(f)?(f=Number(f),c[a]+=f,f):0},avg:function(a,u,c,t,f){var n=t[u];return r(n)&&(n=Number(n),c[a]+=n,f[a]++),0},min:function(a,u,c,t){var f=t[u];if(r(f))if(f=Number(f),r(c[a])){if(c[a]>f){var n=f-c[a];return c[a]=f,n}}else return c[a]=f,f;return 0},max:function(a,u,c,t){var f=t[u];if(r(f))if(f=Number(f),r(c[a])){if(c[a]<f){var n=f-c[a];return c[a]=f,n}}else return c[a]=f,f;return 0}}},{"fast-isnumeric":241}],1088:[function(e,v,S){var r=e("../../constants/numerical"),a=r.ONEAVGYEAR,u=r.ONEAVGMONTH,c=r.ONEDAY,t=r.ONEHOUR,f=r.ONEMIN,n=r.ONESEC,o=e("../../plots/cartesian/axes").tickIncrement;v.exports=function(d,g,b,m,x){var w=-1.1*g,y=-.1*g,T=d-y,M=b[0],P=b[1],L=Math.min(l(M+y,M+T,m,x),l(P+y,P+T,m,x)),I=Math.min(l(M+w,M+y,m,x),l(P+w,P+y,m,x)),E,k;if(L>I&&I<Math.abs(P-M)/4e3?(E=L,k=!1):(E=Math.min(L,I),k=!0),m.type==="date"&&E>c){var C=E===a?1:6,D=E===a?"M12":"M1";return function(F,N){var G=m.c2d(F,a,x),U=G.indexOf("-",C);U>0&&(G=G.substr(0,U));var X=m.d2c(G,0,x);if(X<F){var z=o(X,D,!1,x);(X+z)/2<F+d&&(X=z)}return N&&k?o(X,D,!0,x):X}}return function(F,N){var G=E*Math.round(F/E);return G+E/10<F&&G+E*.9<F+d&&(G+=E),N&&k&&(G-=E),G}};function l(p,d,g,b){if(p*d<=0)return 1/0;for(var m=Math.abs(d-p),x=g.type==="date",w=h(m,x),y=0;y<10;y++){var T=h(w*80,x);if(w===T)break;if(i(T,p,d,x,g,b))w=T;else break}return w}function h(p,d){return d&&p>n?p>c?p>a*1.1?a:p>u*1.1?u:c:p>t?t:p>f?f:n:Math.pow(10,Math.floor(Math.log(p)/Math.LN10))}function i(p,d,g,b,m,x){if(b&&p>c){var w=s(d,m,x),y=s(g,m,x),T=p===a?0:1;return w[T]!==y[T]}return Math.floor(g/p)-Math.floor(d/p)>.1}function s(p,d,g){var b=d.c2d(p,a,g).split("-");return b[0]===""&&(b.unshift(),b[0]="-"+b[0]),b}},{"../../constants/numerical":753,"../../plots/cartesian/axes":828}],1089:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../registry"),c=e("../../plots/cartesian/axes"),t=e("../bar/arrays_to_calcdata"),f=e("./bin_functions"),n=e("./norm_functions"),o=e("./average"),l=e("./bin_label_vals");function h(g,b){var m=[],x=[],w=c.getFromId(g,b.orientation==="h"?b.yaxis:b.xaxis),y=b.orientation==="h"?"y":"x",T={x:"y",y:"x"}[y],M=b[y+"calendar"],P=b.cumulative,L,I=i(g,b,w,y),E=I[0],k=I[1],C=typeof E.size=="string",D=[],F=C?D:E,N=[],G=[],U=[],X=0,z=b.histnorm,B=b.histfunc,j=z.indexOf("density")!==-1,V,K,te;P.enabled&&j&&(z=z.replace(/ ?density$/,""),j=!1);var $=B==="max"||B==="min",ie=$?null:0,se=f.count,Q=n[z],H=!1,oe=function(tt){return w.r2c(tt,0,M)},re;for(a.isArrayOrTypedArray(b[T])&&B!=="count"&&(re=b[T],H=B==="avg",se=f[B]),L=oe(E.start),K=oe(E.end)+(L-c.tickIncrement(L,E.size,!1,M))/1e6;L<K&&m.length<1e6&&(V=c.tickIncrement(L,E.size,!1,M),m.push((L+V)/2),x.push(ie),U.push([]),D.push(L),j&&N.push(1/(V-L)),H&&G.push(0),!(V<=L));)L=V;D.push(L),!C&&w.type==="date"&&(F={start:oe(F.start),end:oe(F.end),size:F.size}),g._fullLayout._roundFnOpts||(g._fullLayout._roundFnOpts={});var ee=b["_"+y+"bingroup"],ae={leftGap:1/0,rightGap:1/0};ee&&(g._fullLayout._roundFnOpts[ee]||(g._fullLayout._roundFnOpts[ee]=ae),ae=g._fullLayout._roundFnOpts[ee]);var fe=x.length,de=!0,pe=ae.leftGap,W=ae.rightGap,ue={};for(L=0;L<k.length;L++){var me=k[L];te=a.findBin(me,F),te>=0&&te<fe&&(X+=se(te,L,x,re,G),de&&U[te].length&&me!==k[U[te][0]]&&(de=!1),U[te].push(L),ue[L]=te,pe=Math.min(pe,me-D[te]),W=Math.min(W,D[te+1]-me))}ae.leftGap=pe,ae.rightGap=W;var be;de||(be=function(tt,Ce){return function(){var Ae=g._fullLayout._roundFnOpts[ee];return l(Ae.leftGap,Ae.rightGap,D,w,M)(tt,Ce)}}),H&&(X=o(x,G)),Q&&Q(x,X,N),P.enabled&&d(x,P.direction,P.currentbin);var Me=Math.min(m.length,x.length),Pe=[],Ge=0,ze=Me-1;for(L=0;L<Me;L++)if(x[L]){Ge=L;break}for(L=Me-1;L>=Ge;L--)if(x[L]){ze=L;break}for(L=Ge;L<=ze;L++)if(r(m[L])&&r(x[L])){var Qe={p:m[L],s:x[L],b:0};P.enabled||(Qe.pts=U[L],de?Qe.ph0=Qe.ph1=U[L].length?k[U[L][0]]:m[L]:(b._computePh=!0,Qe.ph0=be(D[L]),Qe.ph1=be(D[L+1],!0))),Pe.push(Qe)}return Pe.length===1&&(Pe[0].width1=c.tickIncrement(Pe[0].p,E.size,!1,M)-Pe[0].p),t(Pe,b),a.isArrayOrTypedArray(b.selectedpoints)&&a.tagSelected(Pe,b,ue),Pe}function i(g,b,m,x,w){var y=x+"bins",T=g._fullLayout,M=b["_"+x+"bingroup"],P=T._histogramBinOpts[M],L=T.barmode==="overlay",I,E,k,C,D,F,N,G=function(be){return m.r2c(be,0,C)},U=function(be){return m.c2r(be,0,C)},X=m.type==="date"?function(be){return be||be===0?a.cleanDate(be,null,C):null}:function(be){return r(be)?Number(be):null};function z(be,Me,Pe){Me[be+"Found"]?(Me[be]=X(Me[be]),Me[be]===null&&(Me[be]=Pe[be])):(F[be]=Me[be]=Pe[be],a.nestedProperty(E[0],y+"."+be).set(Pe[be]))}if(b["_"+x+"autoBinFinished"])delete b["_"+x+"autoBinFinished"];else{E=P.traces;var B=[],j=!0,V=!1,K=!1;for(I=0;I<E.length;I++)if(k=E[I],k.visible){var te=P.dirs[I];D=k["_"+te+"pos0"]=m.makeCalcdata(k,te),B=a.concat(B,D),delete k["_"+x+"autoBinFinished"],b.visible===!0&&(j?j=!1:(delete k._autoBin,k["_"+x+"autoBinFinished"]=1),u.traceIs(k,"2dMap")&&(V=!0),k.type==="histogram2dcontour"&&(K=!0))}C=E[0][x+"calendar"];var $=c.autoBin(B,m,P.nbins,V,C,P.sizeFound&&P.size),ie=E[0]._autoBin={};if(F=ie[P.dirs[0]]={},K&&(P.size||($.start=U(c.tickIncrement(G($.start),$.size,!0,C))),P.end===void 0&&($.end=U(c.tickIncrement(G($.end),$.size,!1,C)))),L&&!u.traceIs(b,"2dMap")&&$._dataSpan===0&&m.type!=="category"&&m.type!=="multicategory"){if(w)return[$,D,!0];$=s(g,b,m,x,y)}N=k.cumulative||{},N.enabled&&N.currentbin!=="include"&&(N.direction==="decreasing"?$.start=U(c.tickIncrement(G($.start),$.size,!0,C)):$.end=U(c.tickIncrement(G($.end),$.size,!1,C))),P.size=$.size,P.sizeFound||(F.size=$.size,a.nestedProperty(E[0],y+".size").set($.size)),z("start",P,$),z("end",P,$)}D=b["_"+x+"pos0"],delete b["_"+x+"pos0"];var se=b._input[y]||{},Q=a.extendFlat({},P),H=P.start,oe=m.r2l(se.start),re=oe!==void 0;if((P.startFound||re)&&oe!==m.r2l(H)){var ee=re?oe:a.aggNums(Math.min,null,D),ae={type:m.type==="category"||m.type==="multicategory"?"linear":m.type,r2l:m.r2l,dtick:P.size,tick0:H,calendar:C,range:[ee,c.tickIncrement(ee,P.size,!1,C)].map(m.l2r)},fe=c.tickFirst(ae);fe>m.r2l(ee)&&(fe=c.tickIncrement(fe,P.size,!0,C)),Q.start=m.l2r(fe),re||a.nestedProperty(b,y+".start").set(Q.start)}var de=P.end,pe=m.r2l(se.end),W=pe!==void 0;if((P.endFound||W)&&pe!==m.r2l(de)){var ue=W?pe:a.aggNums(Math.max,null,D);Q.end=m.l2r(ue),W||a.nestedProperty(b,y+".start").set(Q.end)}var me="autobin"+x;return b._input[me]===!1&&(b._input[y]=a.extendFlat({},b[y]||{}),delete b._input[me],delete b[me]),[Q,D]}function s(g,b,m,x,w){var y=g._fullLayout,T=p(g,b),M=!1,P=1/0,L=[b],I,E,k;for(I=0;I<T.length;I++)if(E=T[I],E===b)M=!0;else if(!M)k=y._histogramBinOpts[E["_"+x+"bingroup"]],P=Math.min(P,k.size||E[w].size);else{var C=i(g,E,m,x,!0),D=C[0],F=C[2];E["_"+x+"autoBinFinished"]=1,E["_"+x+"pos0"]=C[1],F?L.push(E):P=Math.min(P,D.size)}var N=new Array(L.length);for(I=0;I<L.length;I++)for(var G=L[I]["_"+x+"pos0"],U=0;U<G.length;U++)if(G[U]!==void 0){N[I]=G[U];break}for(isFinite(P)||(P=a.distinctVals(N).minDiff),I=0;I<L.length;I++){E=L[I];var X=E[x+"calendar"],z={start:m.c2r(N[I]-P/2,0,X),end:m.c2r(N[I]+P/2,0,X),size:P};E._input[w]=E[w]=z,k=y._histogramBinOpts[E["_"+x+"bingroup"]],k&&a.extendFlat(k,z)}return b[w]}function p(g,b){for(var m=b.xaxis,x=b.yaxis,w=b.orientation,y=[],T=g._fullData,M=0;M<T.length;M++){var P=T[M];P.type==="histogram"&&P.visible===!0&&P.orientation===w&&P.xaxis===m&&P.yaxis===x&&y.push(P)}return y}function d(g,b,m){var x,w,y;function T(P){y=g[P],g[P]/=2}function M(P){w=g[P],g[P]=y+w/2,y+=w}if(m==="half")if(b==="increasing")for(T(0),x=1;x<g.length;x++)M(x);else for(T(g.length-1),x=g.length-2;x>=0;x--)M(x);else if(b==="increasing"){for(x=1;x<g.length;x++)g[x]+=g[x-1];m==="exclude"&&(g.unshift(0),g.pop())}else{for(x=g.length-2;x>=0;x--)g[x]+=g[x+1];m==="exclude"&&(g.push(0),g.shift())}}v.exports={calc:h,calcAllAutoBins:i}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"../bar/arrays_to_calcdata":920,"./average":1085,"./bin_functions":1087,"./bin_label_vals":1088,"./norm_functions":1096,"fast-isnumeric":241}],1090:[function(e,v,S){v.exports={eventDataKeys:["binNumber"]}},{}],1091:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/cartesian/axis_ids"),u=e("../../registry").traceIs,c=e("../bar/defaults").handleGroupingDefaults,t=r.nestedProperty,f=e("../../plots/cartesian/constraints").getAxisGroup,n=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],o=["x","y"];v.exports=function(h,i){var s=i._histogramBinOpts={},p=[],d={},g=[],b,m,x,w,y,T,M;function P(K,te){return r.coerce(b._input,b,b._module.attributes,K,te)}function L(K){return K.orientation==="v"?"x":"y"}function I(K,te){var $=a.getFromTrace({_fullLayout:i},K,te);return $.type}function E(K,te,$){var ie=K.uid+"__"+$;te||(te=ie);var se=I(K,$),Q=K[$+"calendar"]||"",H=s[te],oe=!0;H&&(se===H.axType&&Q===H.calendar?(oe=!1,H.traces.push(K),H.dirs.push($)):(te=ie,se!==H.axType&&r.warn(["Attempted to group the bins of trace",K.index,"set on a","type:"+se,"axis","with bins on","type:"+H.axType,"axis."].join(" ")),Q!==H.calendar&&r.warn(["Attempted to group the bins of trace",K.index,"set with a",Q,"calendar","with bins",H.calendar?"on a "+H.calendar+" calendar":"w/o a set calendar"].join(" ")))),oe&&(s[te]={traces:[K],dirs:[$],axType:se,calendar:K[$+"calendar"]||""}),K["_"+$+"bingroup"]=te}for(y=0;y<h.length;y++)b=h[y],u(b,"histogram")&&(p.push(b),delete b._xautoBinFinished,delete b._yautoBinFinished,u(b,"2dMap")||c(b._input,b,i,P));var k=i._alignmentOpts||{};for(y=0;y<p.length;y++){if(b=p[y],x="",!u(b,"2dMap")){if(w=L(b),i.barmode==="group"&&b.alignmentgroup){var C=b[w+"axis"],D=f(i,C)+b.orientation;(k[D]||{})[b.alignmentgroup]&&(x=D)}!x&&i.barmode!=="overlay"&&(x=f(i,b.xaxis)+f(i,b.yaxis)+L(b))}x?(d[x]||(d[x]=[]),d[x].push(b)):g.push(b)}for(x in d){if(m=d[x],m.length===1){g.push(m[0]);continue}var F=!1;for(m.length&&(b=m[0],F=P("bingroup")),x=F||x,y=0;y<m.length;y++){b=m[y];var N=b._input.bingroup;N&&N!==x&&r.warn(["Trace",b.index,"must match","within bingroup",x+".","Ignoring its bingroup:",N,"setting."].join(" ")),b.bingroup=x,E(b,x,L(b))}}for(y=0;y<g.length;y++){b=g[y];var G=P("bingroup");if(u(b,"2dMap"))for(M=0;M<2;M++){w=o[M];var U=P(w+"bingroup",G?G+"__"+w:null);E(b,U,w)}else E(b,G,L(b))}for(x in s){var X=s[x];for(m=X.traces,T=0;T<n.length;T++){var z=n[T],B=z.name,j,V;if(!(B==="nbins"&&X.sizeFound)){for(y=0;y<m.length;y++){if(b=m[y],w=X.dirs[y],j=z.aStr[w],t(b._input,j).get()!==void 0){X[B]=P(j),X[B+"Found"]=!0;break}V=(b._autoBin||{})[w]||{},V[B]&&t(b,j).set(V[B])}if(B==="start"||B==="end")for(;y<m.length;y++)b=m[y],b["_"+w+"bingroup"]&&(V=(b._autoBin||{})[w]||{},P(j,V[B]));B==="nbins"&&!X.sizeFound&&!X.nbinsFound&&(b=m[0],X[B]=P(j))}}}}},{"../../lib":778,"../../plots/cartesian/axis_ids":831,"../../plots/cartesian/constraints":835,"../../registry":911,"../bar/defaults":925}],1092:[function(e,v,S){var r=e("../../registry"),a=e("../../lib"),u=e("../../components/color"),c=e("../bar/style_defaults"),t=e("./attributes");v.exports=function(n,o,l,h){function i(P,L){return a.coerce(n,o,t,P,L)}var s=i("x"),p=i("y"),d=i("cumulative.enabled");d&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text"),i("hovertext"),i("hovertemplate");var g=i("orientation",p&&!s?"h":"v"),b=g==="v"?"x":"y",m=g==="v"?"y":"x",x=s&&p?Math.min(a.minRowLength(s)&&a.minRowLength(p)):a.minRowLength(o[b]||[]);if(!x){o.visible=!1;return}o._length=x;var w=r.getComponentMethod("calendars","handleTraceDefaults");w(n,o,["x","y"],h);var y=o[m];y&&i("histfunc"),i("histnorm"),i("autobin"+b),c(n,o,i,l,h),a.coerceSelectionMarkerOpacity(o,i);var T=(o.marker.line||{}).color,M=r.getComponentMethod("errorbars","supplyDefaults");M(n,o,T||u.defaultLine,{axis:"y"}),M(n,o,T||u.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":643,"../../lib":778,"../../registry":911,"../bar/style_defaults":936,"./attributes":1084}],1093:[function(e,v,S){v.exports=function(a,u,c,t,f){if(a.x="xVal"in u?u.xVal:u.x,a.y="yVal"in u?u.yVal:u.y,"zLabelVal"in u&&(a.z=u.zLabelVal),u.xa&&(a.xaxis=u.xa),u.ya&&(a.yaxis=u.ya),!(c.cumulative||{}).enabled){var n=Array.isArray(f)?t[0].pts[f[0]][f[1]]:t[f].pts;a.pointNumbers=n,a.binNumber=a.pointNumber,delete a.pointNumber,delete a.pointIndex;var o;if(c._indexToPoints){o=[];for(var l=0;l<n.length;l++)o=o.concat(c._indexToPoints[n[l]])}else o=n;a.pointIndices=o}return a}},{}],1094:[function(e,v,S){var r=e("../bar/hover").hoverPoints,a=e("../../plots/cartesian/axes").hoverLabelText;v.exports=function(c,t,f,n){var o=r(c,t,f,n);if(!!o){c=o[0];var l=c.cd[c.index],h=c.cd[0].trace;if(!h.cumulative.enabled){var i=h.orientation==="h"?"y":"x";c[i+"Label"]=a(c[i+"a"],l.ph0,l.ph1)}return o}}},{"../../plots/cartesian/axes":828,"../bar/hover":928}],1095:[function(e,v,S){v.exports={attributes:e("./attributes"),layoutAttributes:e("../bar/layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),supplyLayoutDefaults:e("../bar/layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("../bar/cross_trace_calc").crossTraceCalc,plot:e("../bar/plot").plot,layerName:"barlayer",style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,colorbar:e("../scatter/marker_colorbar"),hoverPoints:e("./hover"),selectPoints:e("../bar/select"),eventData:e("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":841,"../bar/cross_trace_calc":924,"../bar/layout_attributes":930,"../bar/layout_defaults":931,"../bar/plot":932,"../bar/select":933,"../bar/style":935,"../scatter/marker_colorbar":1205,"./attributes":1084,"./calc":1089,"./cross_trace_defaults":1091,"./defaults":1092,"./event_data":1093,"./hover":1094}],1096:[function(e,v,S){v.exports={percent:function(r,a){for(var u=r.length,c=100/a,t=0;t<u;t++)r[t]*=c},probability:function(r,a){for(var u=r.length,c=0;c<u;c++)r[c]/=a},density:function(r,a,u,c){var t=r.length;c=c||1;for(var f=0;f<t;f++)r[f]*=u[f]*c},"probability density":function(r,a,u,c){var t=r.length;c&&(a/=c);for(var f=0;f<t;f++)r[f]*=u[f]/a}}},{}],1097:[function(e,v,S){var r=e("../histogram/attributes"),a=e("../histogram/bin_attributes"),u=e("../heatmap/attributes"),c=e("../../plots/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,f=e("../../components/colorscale/attributes"),n=e("../../lib/extend").extendFlat;v.exports=n({x:r.x,y:r.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:a("x"),nbinsy:r.nbinsy,ybins:a("y"),autobinx:r.autobinx,autobiny:r.autobiny,bingroup:n({},r.bingroup,{}),xbingroup:n({},r.bingroup,{}),ybingroup:n({},r.bingroup,{}),xgap:u.xgap,ygap:u.ygap,zsmooth:u.zsmooth,zhoverformat:u.zhoverformat,hovertemplate:t({},{keys:"z"}),showlegend:n({},c.showlegend,{dflt:!1})},f("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../heatmap/attributes":1065,"../histogram/attributes":1084,"../histogram/bin_attributes":1086}],1098:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../histogram/bin_functions"),c=e("../histogram/norm_functions"),t=e("../histogram/average"),f=e("../histogram/bin_label_vals"),n=e("../histogram/calc").calcAllAutoBins;v.exports=function(s,p){var d=a.getFromId(s,p.xaxis),g=a.getFromId(s,p.yaxis),b=p.xcalendar,m=p.ycalendar,x=function(dt){return d.r2c(dt,0,b)},w=function(dt){return g.r2c(dt,0,m)},y=function(dt){return d.c2r(dt,0,b)},T=function(dt){return g.c2r(dt,0,m)},M,P,L,I,E=n(s,p,d,"x"),k=E[0],C=E[1],D=n(s,p,g,"y"),F=D[0],N=D[1],G=p._length;C.length>G&&C.splice(G,C.length-G),N.length>G&&N.splice(G,N.length-G);var U=[],X=[],z=[],B=typeof k.size=="string",j=typeof F.size=="string",V=[],K=[],te=B?V:k,$=j?K:F,ie=0,se=[],Q=[],H=p.histnorm,oe=p.histfunc,re=H.indexOf("density")!==-1,ee=oe==="max"||oe==="min",ae=ee?null:0,fe=u.count,de=c[H],pe=!1,W=[],ue=[],me="z"in p?p.z:"marker"in p&&Array.isArray(p.marker.color)?p.marker.color:"";me&&oe!=="count"&&(pe=oe==="avg",fe=u[oe]);var be=k.size,Me=x(k.start),Pe=x(k.end)+(Me-a.tickIncrement(Me,be,!1,b))/1e6;for(M=Me;M<Pe;M=a.tickIncrement(M,be,!1,b))X.push(ae),V.push(M),pe&&z.push(0);V.push(M);var Ge=X.length,ze=(M-Me)/Ge,Qe=y(Me+ze/2),tt=F.size,Ce=w(F.start),Ae=w(F.end)+(Ce-a.tickIncrement(Ce,tt,!1,m))/1e6;for(M=Ce;M<Ae;M=a.tickIncrement(M,tt,!1,m)){U.push(X.slice()),K.push(M);var Be=new Array(Ge);for(P=0;P<Ge;P++)Be[P]=[];Q.push(Be),pe&&se.push(z.slice())}K.push(M);var qe=U.length,Tt=(M-Ce)/qe,At=T(Ce+Tt/2);re&&(W=o(X.length,te,ze,B),ue=o(U.length,$,Tt,j)),!B&&d.type==="date"&&(te=l(x,te)),!j&&g.type==="date"&&($=l(w,$));var Ne=!0,ct=!0,Mt=new Array(Ge),Wt=new Array(qe),qt=1/0,zt=1/0,$t=1/0,rr=1/0;for(M=0;M<G;M++){var Lt=C[M],Ct=N[M];L=r.findBin(Lt,te),I=r.findBin(Ct,$),L>=0&&L<Ge&&I>=0&&I<qe&&(ie+=fe(L,M,U[I],me,se[I]),Q[I][L].push(M),Ne&&(Mt[L]===void 0?Mt[L]=Lt:Mt[L]!==Lt&&(Ne=!1)),ct&&(Wt[I]===void 0?Wt[I]=Ct:Wt[I]!==Ct&&(ct=!1)),qt=Math.min(qt,Lt-V[L]),zt=Math.min(zt,V[L+1]-Lt),$t=Math.min($t,Ct-K[I]),rr=Math.min(rr,K[I+1]-Ct))}if(pe)for(I=0;I<qe;I++)ie+=t(U[I],se[I]);if(de)for(I=0;I<qe;I++)de(U[I],ie,W,ue[I]);return{x:C,xRanges:h(V,Ne&&Mt,qt,zt,d,b),x0:Qe,dx:ze,y:N,yRanges:h(K,ct&&Wt,$t,rr,g,m),y0:At,dy:Tt,z:U,pts:Q}};function o(i,s,p,d){var g=new Array(i),b;if(d)for(b=0;b<i;b++)g[b]=1/(s[b+1]-s[b]);else{var m=1/p;for(b=0;b<i;b++)g[b]=m}return g}function l(i,s){return{start:i(s.start),end:i(s.end),size:s.size}}function h(i,s,p,d,g,b){var m,x=i.length-1,w=new Array(x),y=f(p,d,i,g,b);for(m=0;m<x;m++){var T=(s||[])[m];w[m]=T===void 0?[y(i[m]),y(i[m+1],!0)]:[T,T]}return w}},{"../../lib":778,"../../plots/cartesian/axes":828,"../histogram/average":1085,"../histogram/bin_functions":1087,"../histogram/bin_label_vals":1088,"../histogram/calc":1089,"../histogram/norm_functions":1096}],1099:[function(e,v,S){var r=e("../../lib"),a=e("./sample_defaults"),u=e("../heatmap/style_defaults"),c=e("../../components/colorscale/defaults"),t=e("./attributes");v.exports=function(n,o,l,h){function i(s,p){return r.coerce(n,o,t,s,p)}a(n,o,i,h),o.visible!==!1&&(u(n,o,i,h),c(n,o,h,i,{prefix:"",cLetter:"z"}),i("hovertemplate"))}},{"../../components/colorscale/defaults":653,"../../lib":778,"../heatmap/style_defaults":1078,"./attributes":1097,"./sample_defaults":1102}],1100:[function(e,v,S){var r=e("../heatmap/hover"),a=e("../../plots/cartesian/axes").hoverLabelText;v.exports=function(c,t,f,n,o,l){var h=r(c,t,f,n,o,l);if(!!h){c=h[0];var i=c.index,s=i[0],p=i[1],d=c.cd[0],g=d.xRanges[p],b=d.yRanges[s];return c.xLabel=a(c.xa,g[0],g[1]),c.yLabel=a(c.ya,b[0],b[1]),h}}},{"../../plots/cartesian/axes":828,"../heatmap/hover":1072}],1101:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../heatmap/calc"),plot:e("../heatmap/plot"),layerName:"heatmaplayer",colorbar:e("../heatmap/colorbar"),style:e("../heatmap/style"),hoverPoints:e("./hover"),eventData:e("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":841,"../heatmap/calc":1066,"../heatmap/colorbar":1068,"../heatmap/plot":1076,"../heatmap/style":1077,"../histogram/cross_trace_defaults":1091,"../histogram/event_data":1093,"./attributes":1097,"./defaults":1099,"./hover":1100}],1102:[function(e,v,S){var r=e("../../registry"),a=e("../../lib");v.exports=function(c,t,f,n){var o=f("x"),l=f("y"),h=a.minRowLength(o),i=a.minRowLength(l);if(!h||!i){t.visible=!1;return}t._length=Math.min(h,i);var s=r.getComponentMethod("calendars","handleTraceDefaults");s(c,t,["x","y"],n);var p=f("z")||f("marker.color");p&&f("histfunc"),f("histnorm"),f("autobinx"),f("autobiny")}},{"../../lib":778,"../../registry":911}],1103:[function(e,v,S){var r=e("../histogram2d/attributes"),a=e("../contour/attributes"),u=e("../../components/colorscale/attributes"),c=e("../../lib/extend").extendFlat;v.exports=c({x:r.x,y:r.y,z:r.z,marker:r.marker,histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:r.xbins,nbinsy:r.nbinsy,ybins:r.ybins,autobinx:r.autobinx,autobiny:r.autobiny,bingroup:r.bingroup,xbingroup:r.xbingroup,ybingroup:r.ybingroup,autocontour:a.autocontour,ncontours:a.ncontours,contours:a.contours,line:{color:a.line.color,width:c({},a.line.width,{dflt:.5}),dash:a.line.dash,smoothing:a.line.smoothing,editType:"plot"},zhoverformat:r.zhoverformat,hovertemplate:r.hovertemplate},u("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../contour/attributes":1008,"../histogram2d/attributes":1097}],1104:[function(e,v,S){var r=e("../../lib"),a=e("../histogram2d/sample_defaults"),u=e("../contour/contours_defaults"),c=e("../contour/style_defaults"),t=e("./attributes");v.exports=function(n,o,l,h){function i(p,d){return r.coerce(n,o,t,p,d)}function s(p){return r.coerce2(n,o,t,p)}a(n,o,i,h),o.visible!==!1&&(u(n,o,i,s),c(n,o,i,h),i("hovertemplate"))}},{"../../lib":778,"../contour/contours_defaults":1015,"../contour/style_defaults":1029,"../histogram2d/sample_defaults":1102,"./attributes":1103}],1105:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../contour/calc"),plot:e("../contour/plot").plot,layerName:"contourlayer",style:e("../contour/style"),colorbar:e("../contour/colorbar"),hoverPoints:e("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":841,"../contour/calc":1009,"../contour/colorbar":1011,"../contour/hover":1021,"../contour/plot":1026,"../contour/style":1028,"../histogram/cross_trace_defaults":1091,"./attributes":1103,"./defaults":1104}],1106:[function(e,v,S){for(var r=e("../../plots/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../../lib/extend").extendFlat,c=e("./constants").colormodel,t=["rgb","rgba","rgba256","hsl","hsla"],f=[],n=[],o=0;o<t.length;o++){var l=c[t[o]];f.push("For the `"+t[o]+"` colormodel, it is ["+(l.zminDflt||l.min).join(", ")+"]."),n.push("For the `"+t[o]+"` colormodel, it is ["+(l.zmaxDflt||l.max).join(", ")+"].")}v.exports=u({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:t,editType:"calc"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:u({},r.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:a({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"./constants":1108}],1107:[function(e,v,S){var r=e("../../lib"),a=e("./constants"),u=e("fast-isnumeric"),c=e("../../plots/cartesian/axes"),t=e("../../lib").maxRowLength,f=e("./helpers").getImageSize;v.exports=function(i,s){var p,d;if(s._hasZ)p=s.z.length,d=t(s.z);else if(s._hasSource){var g=f(s.source);p=g.height,d=g.width}var b=c.getFromId(i,s.xaxis||"x"),m=c.getFromId(i,s.yaxis||"y"),x=b.d2c(s.x0)-s.dx/2,w=m.d2c(s.y0)-s.dy/2,y,T=[x,x+d*s.dx],M=[w,w+p*s.dy];if(b&&b.type==="log")for(y=0;y<d;y++)T.push(x+y*s.dx);if(m&&m.type==="log")for(y=0;y<p;y++)M.push(w+y*s.dy);s._extremes[b._id]=c.findExtremes(b,T),s._extremes[m._id]=c.findExtremes(m,M),s._scaler=l(s);var P={x0:x,y0:w,z:s.z,w:d,h:p};return[P]};function n(h,i,s,p){return function(d){return r.constrain((d-h)*i,s,p)}}function o(h,i){return function(s){return r.constrain(s,h,i)}}function l(h){var i=a.colormodel[h.colormodel],s=i.colormodel||h.colormodel,p=s.length;h._sArray=[];for(var d=0;d<p;d++)i.min[d]!==h.zmin[d]||i.max[d]!==h.zmax[d]?h._sArray.push(n(h.zmin[d],(i.max[d]-i.min[d])/(h.zmax[d]-h.zmin[d]),i.min[d],i.max[d])):h._sArray.push(o(i.min[d],i.max[d]));return function(g){for(var b=g.slice(0,p),m=0;m<p;m++){var x=b[m];if(!u(x))return!1;b[m]=h._sArray[m](x)}return b}}},{"../../lib":778,"../../plots/cartesian/axes":828,"./constants":1108,"./helpers":1111,"fast-isnumeric":241}],1108:[function(e,v,S){v.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(r){return r.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(r){return r.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(r){return r.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(r){var a=r.slice(0,3);return a[1]=a[1]+"%",a[2]=a[2]+"%",a},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(r){var a=r.slice(0,4);return a[1]=a[1]+"%",a[2]=a[2]+"%",a},suffix:["\xB0","%","%",""]}}}},{}],1109:[function(e,v,S){var r=e("../../lib"),a=e("./attributes"),u=e("./constants"),c=e("../../snapshot/helpers").IMAGE_URL_PREFIX;v.exports=function(f,n){function o(i,s){return r.coerce(f,n,a,i,s)}o("source"),n.source&&!n.source.match(c)&&delete n.source,n._hasSource=!!n.source;var l=o("z");if(n._hasZ=!(l===void 0||!l.length||!l[0]||!l[0].length),!n._hasZ&&!n._hasSource){n.visible=!1;return}o("x0"),o("y0"),o("dx"),o("dy");var h;n._hasZ?(o("colormodel","rgb"),h=u.colormodel[n.colormodel],o("zmin",h.zminDflt||h.min),o("zmax",h.zmaxDflt||h.max)):n._hasSource&&(n.colormodel="rgba256",h=u.colormodel[n.colormodel],n.zmin=h.zminDflt,n.zmax=h.zmaxDflt),o("text"),o("hovertext"),o("hovertemplate"),n._length=null}},{"../../lib":778,"../../snapshot/helpers":915,"./attributes":1106,"./constants":1108}],1110:[function(e,v,S){v.exports=function(a,u){return"xVal"in u&&(a.x=u.xVal),"yVal"in u&&(a.y=u.yVal),u.xa&&(a.xaxis=u.xa),u.ya&&(a.yaxis=u.ya),a.color=u.color,a.colormodel=u.trace.colormodel,a.z||(a.z=u.color),a}},{}],1111:[function(e,v,S){var r=e("image-size"),a=e("../../snapshot/helpers").IMAGE_URL_PREFIX,u=e("buffer/").Buffer;S.getImageSize=function(c){var t=c.replace(a,""),f=new u(t,"base64");return r(f)}},{"../../snapshot/helpers":915,"buffer/":111,"image-size":444}],1112:[function(e,v,S){var r=e("../../components/fx"),a=e("../../lib"),u=e("./constants");v.exports=function(t,f,n){var o=t.cd[0],l=o.trace,h=t.xa,i=t.ya;if(!(r.inbox(f-o.x0,f-(o.x0+o.w*l.dx),0)>0||r.inbox(n-o.y0,n-(o.y0+o.h*l.dy),0)>0)){var s=Math.floor((f-o.x0)/l.dx),p=Math.floor(Math.abs(n-o.y0)/l.dy),d;if(l._hasZ?d=o.z[p][s]:l._hasSource&&(d=l._canvas.el.getContext("2d").getImageData(s,p,1,1).data),!!d){var g=o.hi||l.hoverinfo,b;if(g){var m=g.split("+");m.indexOf("all")!==-1&&(m=["color"]),m.indexOf("color")!==-1&&(b=!0)}var x=u.colormodel[l.colormodel],w=x.colormodel||l.colormodel,y=w.length,T=l._scaler(d),M=x.suffix,P=[];(l.hovertemplate||b)&&(P.push("["+[T[0]+M[0],T[1]+M[1],T[2]+M[2]].join(", ")),y===4&&P.push(", "+T[3]+M[3]),P.push("]"),P=P.join(""),t.extraText=w.toUpperCase()+": "+P);var L;Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[p])?L=l.hovertext[p][s]:Array.isArray(l.text)&&Array.isArray(l.text[p])&&(L=l.text[p][s]);var I=i.c2p(o.y0+(p+.5)*l.dy),E=o.x0+(s+.5)*l.dx,k=o.y0+(p+.5)*l.dy,C="["+d.slice(0,l.colormodel.length).join(", ")+"]";return[a.extendFlat(t,{index:[p,s],x0:h.c2p(o.x0+s*l.dx),x1:h.c2p(o.x0+(s+1)*l.dx),y0:I,y1:I,color:T,xVal:E,xLabelVal:E,yVal:k,yLabelVal:k,zLabelVal:C,text:L,hovertemplateLabels:{zLabel:C,colorLabel:P,"color[0]Label":T[0]+M[0],"color[1]Label":T[1]+M[1],"color[2]Label":T[2]+M[2],"color[3]Label":T[3]+M[3]}})]}}}},{"../../components/fx":683,"../../lib":778,"./constants":1108}],1113:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover"),eventData:e("./event_data"),moduleType:"trace",name:"image",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":841,"./attributes":1106,"./calc":1107,"./defaults":1109,"./event_data":1110,"./hover":1112,"./plot":1114,"./style":1115}],1114:[function(e,v,S){var r=e("d3"),a=e("../../lib"),u=a.strTranslate,c=e("../../constants/xmlns_namespaces"),t=e("./constants"),f=a.isIOS()||a.isSafari()||a.isIE();v.exports=function(o,l,h,i){var s=l.xaxis,p=l.yaxis,d=!(f||o._context._exportedPlot);a.makeTraceGroups(i,h,"im").each(function(g){var b=r.select(this),m=g[0],x=m.trace,w=d&&!x._hasZ&&x._hasSource&&s.type==="linear"&&p.type==="linear";x._fastImage=w;var y=m.z,T=m.x0,M=m.y0,P=m.w,L=m.h,I=x.dx,E=x.dy,k,C,D,F,N,G;for(G=0;k===void 0&&G<P;)k=s.c2p(T+G*I),G++;for(G=P;C===void 0&&G>0;)C=s.c2p(T+G*I),G--;for(G=0;F===void 0&&G<L;)F=p.c2p(M+G*E),G++;for(G=L;N===void 0&&G>0;)N=p.c2p(M+G*E),G--;if(C<k&&(D=C,C=k,k=D),N<F&&(D=F,F=N,N=D),!w){var U=.5;k=Math.max(-U*s._length,k),C=Math.min((1+U)*s._length,C),F=Math.max(-U*p._length,F),N=Math.min((1+U)*p._length,N)}var X=Math.round(C-k),z=Math.round(N-F),B=X<=0||z<=0;if(B){var j=b.selectAll("image").data([]);j.exit().remove();return}function V(ee){var ae=document.createElement("canvas");ae.width=X,ae.height=z;var fe=ae.getContext("2d"),de=function(tt){return a.constrain(Math.round(s.c2p(T+tt*I)-k),0,X)},pe=function(tt){return a.constrain(Math.round(p.c2p(M+tt*E)-F),0,z)},W=t.colormodel[x.colormodel],ue=W.colormodel||x.colormodel,me=W.fmt,be;for(G=0;G<m.w;G++){var Me=de(G),Pe=de(G+1);if(!(Pe===Me||isNaN(Pe)||isNaN(Me)))for(var Ge=0;Ge<m.h;Ge++){var ze=pe(Ge),Qe=pe(Ge+1);Qe===ze||isNaN(Qe)||isNaN(ze)||!ee(G,Ge)||(be=x._scaler(ee(G,Ge)),be?fe.fillStyle=ue+"("+me(be).join(",")+")":fe.fillStyle="rgba(0,0,0,0)",fe.fillRect(Me,ze,Pe-Me,Qe-ze))}}return ae}var K=b.selectAll("image").data([g]);K.enter().append("svg:image").attr({xmlns:c.svg,preserveAspectRatio:"none"}),K.exit().remove();var te="image-rendering: optimizeSpeed; image-rendering: -moz-crisp-edges; image-rendering: -o-crisp-edges; image-rendering: -webkit-optimize-contrast; image-rendering: optimize-contrast; image-rendering: crisp-edges; image-rendering: pixelated;";if(w){var $=a.simpleMap(s.range,s.r2l),ie=a.simpleMap(p.range,p.r2l),se=$[1]<$[0],Q=ie[1]>ie[0];if(se||Q){var H=k+X/2,oe=F+z/2;te+="transform:"+u(H+"px",oe+"px")+"scale("+(se?-1:1)+","+(Q?-1:1)+")"+u(-H+"px",-oe+"px")+";"}}K.attr("style",te);var re=new Promise(function(ee){if(x._hasZ)ee();else if(x._hasSource)if(x._canvas&&x._canvas.el.width===P&&x._canvas.el.height===L&&x._canvas.source===x.source)ee();else{var ae=document.createElement("canvas");ae.width=P,ae.height=L;var fe=ae.getContext("2d");x._image=x._image||new Image;var de=x._image;de.onload=function(){fe.drawImage(de,0,0),x._canvas={el:ae,source:x.source},ee()},de.setAttribute("src",x.source)}}).then(function(){var ee,ae;if(x._hasZ)ae=V(function(pe,W){return y[W][pe]}),ee=ae.toDataURL("image/png");else if(x._hasSource)if(w)ee=x.source;else{var fe=x._canvas.el.getContext("2d"),de=fe.getImageData(0,0,P,L).data;ae=V(function(pe,W){var ue=4*(W*P+pe);return[de[ue],de[ue+1],de[ue+2],de[ue+3]]}),ee=ae.toDataURL("image/png")}K.attr({"xlink:href":ee,height:z,width:X,x:k,y:F})});o._promises.push(re)})}},{"../../constants/xmlns_namespaces":754,"../../lib":778,"./constants":1108,d3:169}],1115:[function(e,v,S){var r=e("d3");v.exports=function(u){r.select(u).selectAll(".im image").style("opacity",function(c){return c[0].trace.opacity})}},{d3:169}],1116:[function(e,v,S){var r=e("../../lib/extend").extendFlat,a=e("../../lib/extend").extendDeep,u=e("../../plot_api/edit_types").overrideAll,c=e("../../plots/font_attributes"),t=e("../../components/color/attributes"),f=e("../../plots/domain").attributes,n=e("../../plots/cartesian/layout_attributes"),o=e("../../plot_api/plot_template").templatedArray,l=e("../../constants/delta.js");e("../../constants/docs").FORMAT_LINK;var h=c({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:t.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},s={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},p=o("step",a({},i,{range:s}));v.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:f({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:r({},h,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot"},font:r({},h,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot"},increasing:{symbol:{valType:"string",dflt:l.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:l.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:l.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:l.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:r({},h,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:a({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:t.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:u({range:s,visible:r({},n.visible,{dflt:!0}),tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:r({},n.ticks,{dflt:"outside"}),ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:c({}),tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,separatethousands:n.separatethousands,exponentformat:n.exponentformat,minexponent:n.minexponent,showexponent:n.showexponent,editType:"plot"},"plot"),steps:p,threshold:{line:{color:r({},i.line.color,{}),width:r({},i.line.width,{dflt:1}),editType:"plot"},thickness:r({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":642,"../../constants/delta.js":747,"../../constants/docs":748,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/cartesian/layout_attributes":842,"../../plots/domain":855,"../../plots/font_attributes":856}],1117:[function(e,v,S){var r=e("../../plots/plots");S.name="indicator",S.plot=function(a,u,c,t){r.plotBasePlot(S.name,a,u,c,t)},S.clean=function(a,u,c,t){r.cleanBasePlot(S.name,a,u,c,t)}},{"../../plots/plots":891}],1118:[function(e,v,S){function r(a,u){var c=[],t=u.value;typeof u._lastValue!="number"&&(u._lastValue=u.value);var f=u._lastValue,n=f;return u._hasDelta&&typeof u.delta.reference=="number"&&(n=u.delta.reference),c[0]={y:t,lastY:f,delta:t-n,relativeDelta:(t-n)/n},c}v.exports={calc:r}},{}],1119:[function(e,v,S){v.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],1120:[function(e,v,S){var r=e("../../lib"),a=e("./attributes"),u=e("../../plots/domain").defaults,c=e("../../plot_api/plot_template"),t=e("../../plots/array_container_defaults"),f=e("./constants.js"),n=e("../../plots/cartesian/tick_value_defaults"),o=e("../../plots/cartesian/tick_mark_defaults"),l=e("../../plots/cartesian/tick_label_defaults");function h(s,p,d,g){function b(N,G){return r.coerce(s,p,a,N,G)}u(p,g,b),b("mode"),p._hasNumber=p.mode.indexOf("number")!==-1,p._hasDelta=p.mode.indexOf("delta")!==-1,p._hasGauge=p.mode.indexOf("gauge")!==-1;var m=b("value");p._range=[0,typeof m=="number"?1.5*m:1];var x=new Array(2),w;p._hasNumber&&(b("number.valueformat"),b("number.font.color",g.font.color),b("number.font.family",g.font.family),b("number.font.size"),p.number.font.size===void 0&&(p.number.font.size=f.defaultNumberFontSize,x[0]=!0),b("number.prefix"),b("number.suffix"),w=p.number.font.size);var y;p._hasDelta&&(b("delta.font.color",g.font.color),b("delta.font.family",g.font.family),b("delta.font.size"),p.delta.font.size===void 0&&(p.delta.font.size=(p._hasNumber?.5:1)*(w||f.defaultNumberFontSize),x[1]=!0),b("delta.reference",p.value),b("delta.relative"),b("delta.valueformat",p.delta.relative?"2%":""),b("delta.increasing.symbol"),b("delta.increasing.color"),b("delta.decreasing.symbol"),b("delta.decreasing.color"),b("delta.position"),y=p.delta.font.size),p._scaleNumbers=(!p._hasNumber||x[0])&&(!p._hasDelta||x[1])||!1,b("title.font.color",g.font.color),b("title.font.family",g.font.family),b("title.font.size",.25*(w||y||f.defaultNumberFontSize)),b("title.text");var T,M,P,L;function I(N,G){return r.coerce(T,M,a.gauge,N,G)}function E(N,G){return r.coerce(P,L,a.gauge.axis,N,G)}if(p._hasGauge){T=s.gauge,T||(T={}),M=c.newContainer(p,"gauge"),I("shape");var k=p._isBullet=p.gauge.shape==="bullet";k||b("title.align","center");var C=p._isAngular=p.gauge.shape==="angular";C||b("align","center"),I("bgcolor",g.paper_bgcolor),I("borderwidth"),I("bordercolor"),I("bar.color"),I("bar.line.color"),I("bar.line.width");var D=f.valueThickness*(p.gauge.shape==="bullet"?.5:1);I("bar.thickness",D),t(T,M,{name:"steps",handleItemDefaults:i}),I("threshold.value"),I("threshold.thickness"),I("threshold.line.width"),I("threshold.line.color"),P={},T&&(P=T.axis||{}),L=c.newContainer(M,"axis"),E("visible"),p._range=E("range",p._range);var F={outerTicks:!0};n(P,L,E,"linear"),l(P,L,E,"linear",F),o(P,L,E,F)}else b("title.align","center"),b("align","center"),p._isAngular=p._isBullet=!1;p._length=null}function i(s,p){function d(g,b){return r.coerce(s,p,a.gauge.steps,g,b)}d("color"),d("line.color"),d("line.width"),d("range"),d("thickness")}v.exports={supplyDefaults:h}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../../plots/cartesian/tick_label_defaults":849,"../../plots/cartesian/tick_mark_defaults":850,"../../plots/cartesian/tick_value_defaults":851,"../../plots/domain":855,"./attributes":1116,"./constants.js":1119}],1121:[function(e,v,S){v.exports={moduleType:"trace",name:"indicator",basePlotModule:e("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc").calc,plot:e("./plot"),meta:{}}},{"./attributes":1116,"./base_plot":1117,"./calc":1118,"./defaults":1120,"./plot":1122}],1122:[function(e,v,S){var r=e("d3"),a=e("../../lib"),u=a.strScale,c=a.strTranslate,t=a.rad2deg,f=e("../../constants/alignment").MID_SHIFT,n=e("../../components/drawing"),o=e("./constants"),l=e("../../lib/svg_text_utils"),h=e("../../plots/cartesian/axes"),i=e("../../plots/cartesian/axis_defaults"),s=e("../../plots/cartesian/position_defaults"),p=e("../../plots/cartesian/layout_attributes"),d=e("../../components/color"),g={left:"start",center:"middle",right:"end"},b={left:0,center:.5,right:1},m=/[yzafpnµmkMGTPEZY]/;function x(D){return D&&D.duration>0}v.exports=function(F,N,G,U){var X=F._fullLayout,z;x(G)&&U&&(z=U()),a.makeTraceGroups(X._indicatorlayer,N,"trace").each(function(B){var j=B[0],V=j.trace,K=r.select(this),te=V._hasGauge,$=V._isAngular,ie=V._isBullet,se=V.domain,Q={w:X._size.w*(se.x[1]-se.x[0]),h:X._size.h*(se.y[1]-se.y[0]),l:X._size.l+X._size.w*se.x[0],r:X._size.r+X._size.w*(1-se.x[1]),t:X._size.t+X._size.h*(1-se.y[1]),b:X._size.b+X._size.h*se.y[0]},H=Q.l+Q.w/2,oe=Q.t+Q.h/2,re=Math.min(Q.w/2,Q.h),ee=o.innerRadius*re,ae,fe,de,pe=V.align||"center";if(fe=oe,!te)ae=Q.l+b[pe]*Q.w,de=function(tt){return I(tt,Q.w,Q.h)};else if($&&(ae=H,fe=oe+re/2,de=function(tt){return E(tt,.9*ee)}),ie){var W=o.bulletPadding,ue=1-o.bulletNumberDomainSize+W;ae=Q.l+(ue+(1-ue)*b[pe])*Q.w,de=function(tt){return I(tt,(o.bulletNumberDomainSize-W)*Q.w,Q.h)}}T(F,K,B,{numbersX:ae,numbersY:fe,numbersScaler:de,transitionOpts:G,onComplete:z});var me,be;te&&(me={range:V.gauge.axis.range,color:V.gauge.bgcolor,line:{color:V.gauge.bordercolor,width:0},thickness:1},be={range:V.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:V.gauge.bordercolor,width:V.gauge.borderwidth},thickness:1});var Me=K.selectAll("g.angular").data($?B:[]);Me.exit().remove();var Pe=K.selectAll("g.angularaxis").data($?B:[]);Pe.exit().remove(),$&&y(F,K,B,{radius:re,innerRadius:ee,gauge:Me,layer:Pe,size:Q,gaugeBg:me,gaugeOutline:be,transitionOpts:G,onComplete:z});var Ge=K.selectAll("g.bullet").data(ie?B:[]);Ge.exit().remove();var ze=K.selectAll("g.bulletaxis").data(ie?B:[]);ze.exit().remove(),ie&&w(F,K,B,{gauge:Ge,layer:ze,size:Q,gaugeBg:me,gaugeOutline:be,transitionOpts:G,onComplete:z});var Qe=K.selectAll("text.title").data(B);Qe.exit().remove(),Qe.enter().append("text").classed("title",!0),Qe.attr("text-anchor",function(){return ie?g.right:g[V.title.align]}).text(V.title.text).call(n.font,V.title.font).call(l.convertToTspans,F),Qe.attr("transform",function(){var tt=Q.l+Q.w*b[V.title.align],Ce,Ae=o.titlePadding,Be=n.bBox(Qe.node());if(te){if($)if(V.gauge.axis.visible){var qe=n.bBox(Pe.node());Ce=qe.top-Ae-Be.bottom}else Ce=Q.t+Q.h/2-re/2-Be.bottom-Ae;ie&&(Ce=fe-(Be.top+Be.bottom)/2,tt=Q.l-o.bulletPadding*Q.w)}else Ce=V._numbersTop-Ae-Be.bottom;return c(tt,Ce)})})};function w(D,F,N,G){var U=N[0].trace,X=G.gauge,z=G.layer,B=G.gaugeBg,j=G.gaugeOutline,V=G.size,K=U.domain,te=G.transitionOpts,$=G.onComplete,ie,se,Q,H,oe;X.enter().append("g").classed("bullet",!0),X.attr("transform",c(V.l,V.t)),z.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),z.selectAll("g.xbulletaxistick,path,text").remove();var re=V.h,ee=U.gauge.bar.thickness*re,ae=K.x[0],fe=K.x[0]+(K.x[1]-K.x[0])*(U._hasNumber||U._hasDelta?1-o.bulletNumberDomainSize:1);ie=L(D,U.gauge.axis),ie._id="xbulletaxis",ie.domain=[ae,fe],ie.setScale(),se=h.calcTicks(ie),Q=h.makeTransTickFn(ie),H=h.getTickSigns(ie)[2],oe=V.t+V.h,ie.visible&&(h.drawTicks(D,ie,{vals:ie.ticks==="inside"?h.clipEnds(ie,se):se,layer:z,path:h.makeTickPath(ie,oe,H),transFn:Q}),h.drawLabels(D,ie,{vals:se,layer:z,transFn:Q,labelFns:h.makeLabelFns(ie,oe)}));function de(Pe){Pe.attr("width",function(Ge){return Math.max(0,ie.c2p(Ge.range[1])-ie.c2p(Ge.range[0]))}).attr("x",function(Ge){return ie.c2p(Ge.range[0])}).attr("y",function(Ge){return .5*(1-Ge.thickness)*re}).attr("height",function(Ge){return Ge.thickness*re})}var pe=[B].concat(U.gauge.steps),W=X.selectAll("g.bg-bullet").data(pe);W.enter().append("g").classed("bg-bullet",!0).append("rect"),W.select("rect").call(de).call(M),W.exit().remove();var ue=X.selectAll("g.value-bullet").data([U.gauge.bar]);ue.enter().append("g").classed("value-bullet",!0).append("rect"),ue.select("rect").attr("height",ee).attr("y",(re-ee)/2).call(M),x(te)?ue.select("rect").transition().duration(te.duration).ease(te.easing).each("end",function(){$&&$()}).each("interrupt",function(){$&&$()}).attr("width",Math.max(0,ie.c2p(Math.min(U.gauge.axis.range[1],N[0].y)))):ue.select("rect").attr("width",typeof N[0].y=="number"?Math.max(0,ie.c2p(Math.min(U.gauge.axis.range[1],N[0].y))):0),ue.exit().remove();var me=N.filter(function(){return U.gauge.threshold.value}),be=X.selectAll("g.threshold-bullet").data(me);be.enter().append("g").classed("threshold-bullet",!0).append("line"),be.select("line").attr("x1",ie.c2p(U.gauge.threshold.value)).attr("x2",ie.c2p(U.gauge.threshold.value)).attr("y1",(1-U.gauge.threshold.thickness)/2*re).attr("y2",(1-(1-U.gauge.threshold.thickness)/2)*re).call(d.stroke,U.gauge.threshold.line.color).style("stroke-width",U.gauge.threshold.line.width),be.exit().remove();var Me=X.selectAll("g.gauge-outline").data([j]);Me.enter().append("g").classed("gauge-outline",!0).append("rect"),Me.select("rect").call(de).call(M),Me.exit().remove()}function y(D,F,N,G){var U=N[0].trace,X=G.size,z=G.radius,B=G.innerRadius,j=G.gaugeBg,V=G.gaugeOutline,K=[X.l+X.w/2,X.t+X.h/2+z/2],te=G.gauge,$=G.layer,ie=G.transitionOpts,se=G.onComplete,Q=Math.PI/2;function H(Tt){var At=U.gauge.axis.range[0],Ne=U.gauge.axis.range[1],ct=(Tt-At)/(Ne-At)*Math.PI-Q;return ct<-Q?-Q:ct>Q?Q:ct}function oe(Tt){return r.svg.arc().innerRadius((B+z)/2-Tt/2*(z-B)).outerRadius((B+z)/2+Tt/2*(z-B)).startAngle(-Q)}function re(Tt){Tt.attr("d",function(At){return oe(At.thickness).startAngle(H(At.range[0])).endAngle(H(At.range[1]))()})}var ee,ae,fe,de;te.enter().append("g").classed("angular",!0),te.attr("transform",c(K[0],K[1])),$.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),$.selectAll("g.xangularaxistick,path,text").remove(),ee=L(D,U.gauge.axis),ee.type="linear",ee.range=U.gauge.axis.range,ee._id="xangularaxis",ee.setScale();var pe=function(Tt){return(ee.range[0]-Tt.x)/(ee.range[1]-ee.range[0])*Math.PI+Math.PI},W={},ue=h.makeLabelFns(ee,0),me=ue.labelStandoff;W.xFn=function(Tt){var At=pe(Tt);return Math.cos(At)*me},W.yFn=function(Tt){var At=pe(Tt),Ne=Math.sin(At)>0?.2:1;return-Math.sin(At)*(me+Tt.fontSize*Ne)+Math.abs(Math.cos(At))*(Tt.fontSize*f)},W.anchorFn=function(Tt){var At=pe(Tt),Ne=Math.cos(At);return Math.abs(Ne)<.1?"middle":Ne>0?"start":"end"},W.heightFn=function(Tt,At,Ne){var ct=pe(Tt);return-.5*(1+Math.sin(ct))*Ne};var be=function(Tt){return c(K[0]+z*Math.cos(Tt),K[1]-z*Math.sin(Tt))};fe=function(Tt){return be(pe(Tt))};var Me=function(Tt){var At=pe(Tt);return be(At)+"rotate("+-t(At)+")"};if(ae=h.calcTicks(ee),de=h.getTickSigns(ee)[2],ee.visible){de=ee.ticks==="inside"?-1:1;var Pe=(ee.linewidth||1)/2;h.drawTicks(D,ee,{vals:ae,layer:$,path:"M"+de*Pe+",0h"+de*ee.ticklen,transFn:Me}),h.drawLabels(D,ee,{vals:ae,layer:$,transFn:fe,labelFns:W})}var Ge=[j].concat(U.gauge.steps),ze=te.selectAll("g.bg-arc").data(Ge);ze.enter().append("g").classed("bg-arc",!0).append("path"),ze.select("path").call(re).call(M),ze.exit().remove();var Qe=oe(U.gauge.bar.thickness),tt=te.selectAll("g.value-arc").data([U.gauge.bar]);tt.enter().append("g").classed("value-arc",!0).append("path");var Ce=tt.select("path");x(ie)?(Ce.transition().duration(ie.duration).ease(ie.easing).each("end",function(){se&&se()}).each("interrupt",function(){se&&se()}).attrTween("d",P(Qe,H(N[0].lastY),H(N[0].y))),U._lastValue=N[0].y):Ce.attr("d",typeof N[0].y=="number"?Qe.endAngle(H(N[0].y)):"M0,0Z"),Ce.call(M),tt.exit().remove(),Ge=[];var Ae=U.gauge.threshold.value;Ae&&Ge.push({range:[Ae,Ae],color:U.gauge.threshold.color,line:{color:U.gauge.threshold.line.color,width:U.gauge.threshold.line.width},thickness:U.gauge.threshold.thickness});var Be=te.selectAll("g.threshold-arc").data(Ge);Be.enter().append("g").classed("threshold-arc",!0).append("path"),Be.select("path").call(re).call(M),Be.exit().remove();var qe=te.selectAll("g.gauge-outline").data([V]);qe.enter().append("g").classed("gauge-outline",!0).append("path"),qe.select("path").call(re).call(M),qe.exit().remove()}function T(D,F,N,G){var U=N[0].trace,X=G.numbersX,z=G.numbersY,B=U.align||"center",j=g[B],V=G.transitionOpts,K=G.onComplete,te=a.ensureSingle(F,"g","numbers"),$,ie,se,Q=[];U._hasNumber&&Q.push("number"),U._hasDelta&&(Q.push("delta"),U.delta.position==="left"&&Q.reverse());var H=te.selectAll("text").data(Q);H.enter().append("text"),H.attr("text-anchor",function(){return j}).attr("class",function(be){return be}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),H.exit().remove();function oe(be,Me,Pe,Ge){if(be.match("s")&&Pe>=0!=Ge>=0&&!Me(Pe).slice(-1).match(m)&&!Me(Ge).slice(-1).match(m)){var ze=be.slice().replace("s","f").replace(/\d+/,function(tt){return parseInt(tt)-1}),Qe=L(D,{tickformat:ze});return function(tt){return Math.abs(tt)<1?h.tickText(Qe,tt).text:Me(tt)}}else return Me}function re(){var be=L(D,{tickformat:U.number.valueformat},U._range);be.setScale(),h.prepTicks(be);var Me=function(tt){return h.tickText(be,tt).text},Pe=U.number.suffix,Ge=U.number.prefix,ze=te.select("text.number");function Qe(){var tt=typeof N[0].y=="number"?Ge+Me(N[0].y)+Pe:"-";ze.text(tt).call(n.font,U.number.font).call(l.convertToTspans,D)}return x(V)?ze.transition().duration(V.duration).ease(V.easing).each("end",function(){Qe(),K&&K()}).each("interrupt",function(){Qe(),K&&K()}).attrTween("text",function(){var tt=r.select(this),Ce=r.interpolateNumber(N[0].lastY,N[0].y);U._lastValue=N[0].y;var Ae=oe(U.number.valueformat,Me,N[0].lastY,N[0].y);return function(Be){tt.text(Ge+Ae(Ce(Be))+Pe)}}):Qe(),$=k(Ge+Me(N[0].y)+Pe,U.number.font,j,D),ze}function ee(){var be=L(D,{tickformat:U.delta.valueformat},U._range);be.setScale(),h.prepTicks(be);var Me=function(Ce){return h.tickText(be,Ce).text},Pe=function(Ce){var Ae=U.delta.relative?Ce.relativeDelta:Ce.delta;return Ae},Ge=function(Ce,Ae){return Ce===0||typeof Ce!="number"||isNaN(Ce)?"-":(Ce>0?U.delta.increasing.symbol:U.delta.decreasing.symbol)+Ae(Ce)},ze=function(Ce){return Ce.delta>=0?U.delta.increasing.color:U.delta.decreasing.color};U._deltaLastValue===void 0&&(U._deltaLastValue=Pe(N[0]));var Qe=te.select("text.delta");Qe.call(n.font,U.delta.font).call(d.fill,ze({delta:U._deltaLastValue}));function tt(){Qe.text(Ge(Pe(N[0]),Me)).call(d.fill,ze(N[0])).call(l.convertToTspans,D)}return x(V)?Qe.transition().duration(V.duration).ease(V.easing).tween("text",function(){var Ce=r.select(this),Ae=Pe(N[0]),Be=U._deltaLastValue,qe=oe(U.delta.valueformat,Me,Be,Ae),Tt=r.interpolateNumber(Be,Ae);return U._deltaLastValue=Ae,function(At){Ce.text(Ge(Tt(At),qe)),Ce.call(d.fill,ze({delta:Tt(At)}))}}).each("end",function(){tt(),K&&K()}).each("interrupt",function(){tt(),K&&K()}):tt(),ie=k(Ge(Pe(N[0]),Me),U.delta.font,j,D),Qe}var ae=U.mode+U.align,fe;if(U._hasDelta&&(fe=ee(),ae+=U.delta.position+U.delta.font.size+U.delta.font.family+U.delta.valueformat,ae+=U.delta.increasing.symbol+U.delta.decreasing.symbol,se=ie),U._hasNumber&&(re(),ae+=U.number.font.size+U.number.font.family+U.number.valueformat+U.number.suffix+U.number.prefix,se=$),U._hasDelta&&U._hasNumber){var de=[($.left+$.right)/2,($.top+$.bottom)/2],pe=[(ie.left+ie.right)/2,(ie.top+ie.bottom)/2],W,ue,me=.75*U.delta.font.size;U.delta.position==="left"&&(W=C(U,"deltaPos",0,-1*($.width*b[U.align]+ie.width*(1-b[U.align])+me),ae,Math.min),ue=de[1]-pe[1],se={width:$.width+ie.width+me,height:Math.max($.height,ie.height),left:ie.left+W,right:$.right,top:Math.min($.top,ie.top+ue),bottom:Math.max($.bottom,ie.bottom+ue)}),U.delta.position==="right"&&(W=C(U,"deltaPos",0,$.width*(1-b[U.align])+ie.width*b[U.align]+me,ae,Math.max),ue=de[1]-pe[1],se={width:$.width+ie.width+me,height:Math.max($.height,ie.height),left:$.left,right:ie.right+W,top:Math.min($.top,ie.top+ue),bottom:Math.max($.bottom,ie.bottom+ue)}),U.delta.position==="bottom"&&(W=null,ue=ie.height,se={width:Math.max($.width,ie.width),height:$.height+ie.height,left:Math.min($.left,ie.left),right:Math.max($.right,ie.right),top:$.bottom-$.height,bottom:$.bottom+ie.height}),U.delta.position==="top"&&(W=null,ue=$.top,se={width:Math.max($.width,ie.width),height:$.height+ie.height,left:Math.min($.left,ie.left),right:Math.max($.right,ie.right),top:$.bottom-$.height-ie.height,bottom:$.bottom}),fe.attr({dx:W,dy:ue})}(U._hasNumber||U._hasDelta)&&te.attr("transform",function(){var be=G.numbersScaler(se);ae+=be[2];var Me=C(U,"numbersScale",1,be[0],ae,Math.min),Pe;U._scaleNumbers||(Me=1),U._isAngular?Pe=z-Me*se.bottom:Pe=z-Me*(se.top+se.bottom)/2,U._numbersTop=Me*se.top+Pe;var Ge=se[B];B==="center"&&(Ge=(se.left+se.right)/2);var ze=X-Me*Ge;return ze=C(U,"numbersTranslate",0,ze,ae,Math.max),c(ze,Pe)+u(Me)})}function M(D){D.each(function(F){d.stroke(r.select(this),F.line.color)}).each(function(F){d.fill(r.select(this),F.color)}).style("stroke-width",function(F){return F.line.width})}function P(D,F,N){return function(){var G=r.interpolate(F,N);return function(U){return D.endAngle(G(U))()}}}function L(D,F,N){var G=D._fullLayout,U=a.extendFlat({type:"linear",ticks:"outside",range:N,showline:!0},F),X={type:"linear",_id:"x"+F._id},z={letter:"x",font:G.font,noHover:!0,noTickson:!0};function B(j,V){return a.coerce(U,X,p,j,V)}return i(U,X,B,z,G),s(U,X,B,z),X}function I(D,F,N){var G=Math.min(F/D.width,N/D.height);return[G,D,F+"x"+N]}function E(D,F){var N=Math.sqrt(D.width/2*(D.width/2)+D.height*D.height),G=F/N;return[G,D,F]}function k(D,F,N,G){var U=document.createElementNS("http://www.w3.org/2000/svg","text"),X=r.select(U);return X.text(D).attr("x",0).attr("y",0).attr("text-anchor",N).attr("data-unformatted",D).call(l.convertToTspans,G).call(n.font,F),n.bBox(X.node())}function C(D,F,N,G,U,X){var z="_cache"+F;D[z]&&D[z].key===U||(D[z]={key:U,value:N});var B=a.aggNums(X,null,[D[z].value,G],2);return D[z].value=B,B}},{"../../components/color":643,"../../components/drawing":665,"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_defaults":830,"../../plots/cartesian/layout_attributes":842,"../../plots/cartesian/position_defaults":845,"./constants":1119,d3:169}],1123:[function(e,v,S){var r=e("../../components/colorscale/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../mesh3d/attributes"),c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,f=e("../../plot_api/edit_types").overrideAll;function n(h){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function o(h){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var l=v.exports=f(t({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:n(),y:n(),z:n()},caps:{x:o(),y:o(),z:o()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:a(),showlegend:t({},c.showlegend,{dflt:!1})},r("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:u.opacity,lightposition:u.lightposition,lighting:u.lighting,flatshading:u.flatshading,contour:u.contour,hoverinfo:t({},c.hoverinfo)}),"calc","nested");l.flatshading.dflt=!0,l.lighting.facenormalsepsilon.dflt=0,l.x.editType=l.y.editType=l.z.editType=l.value.editType="calc+clearAxisTypes",l.transforms=void 0},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906,"../mesh3d/attributes":1128}],1124:[function(e,v,S){var r=e("../../components/colorscale/calc"),a=e("../streamtube/calc").processGrid,u=e("../streamtube/calc").filter;v.exports=function(t,f){f._len=Math.min(f.x.length,f.y.length,f.z.length,f.value.length),f._x=u(f.x,f._len),f._y=u(f.y,f._len),f._z=u(f.z,f._len),f._value=u(f.value,f._len);var n=a(f);f._gridFill=n.fill,f._Xs=n.Xs,f._Ys=n.Ys,f._Zs=n.Zs,f._len=n.len;for(var o=1/0,l=-1/0,h=0;h<f._len;h++){var i=f._value[h];o=Math.min(o,i),l=Math.max(l,i)}f._minValues=o,f._maxValues=l,f._vMin=f.isomin===void 0||f.isomin===null?o:f.isomin,f._vMax=f.isomax===void 0||f.isomin===null?l:f.isomax,r(t,f,{vals:[f._vMin,f._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651,"../streamtube/calc":1295}],1125:[function(e,v,S){var r=e("gl-mesh3d"),a=e("../../lib/gl_format_color").parseColorScale,u=e("../../lib/str2rgbarray"),c=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),f=function(s,p){for(var d=p.length-1;d>0;d--){var g=Math.min(p[d],p[d-1]),b=Math.max(p[d],p[d-1]);if(b>g&&g<s&&s<=b)return{id:d,distRatio:(b-s)/(b-g)}}return{id:0,distRatio:0}};function n(s,p,d){this.scene=s,this.uid=d,this.mesh=p,this.name="",this.data=null,this.showContour=!1}var o=n.prototype;o.handlePick=function(s){if(s.object===this.mesh){var p=s.data.index,d=this.data._meshX[p],g=this.data._meshY[p],b=this.data._meshZ[p],m=this.data._Ys.length,x=this.data._Zs.length,w=f(d,this.data._Xs).id,y=f(g,this.data._Ys).id,T=f(b,this.data._Zs).id,M=s.index=T+x*y+x*m*w;s.traceCoordinate=[this.data._meshX[M],this.data._meshY[M],this.data._meshZ[M],this.data._value[M]];var P=this.data.hovertext||this.data.text;return Array.isArray(P)&&P[M]!==void 0?s.textLabel=P[M]:P&&(s.textLabel=P),!0}},o.update=function(s){var p=this.scene,d=p.fullSceneLayout;this.data=h(s);function g(y,T,M,P){return T.map(function(L){return y.d2l(L,0,P)*M})}var b=t(g(d.xaxis,s._meshX,p.dataScale[0],s.xcalendar),g(d.yaxis,s._meshY,p.dataScale[1],s.ycalendar),g(d.zaxis,s._meshZ,p.dataScale[2],s.zcalendar)),m=t(s._meshI,s._meshJ,s._meshK),x={positions:b,cells:m,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,contourEnable:s.contour.show,contourColor:u(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},w=c(s);x.vertexIntensity=s._meshIntensity,x.vertexIntensityBounds=[w.min,w.max],x.colormap=a(s),this.mesh.update(x)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var l=["xyz","xzy","yxz","yzx","zxy","zyx"];function h(s){s._meshI=[],s._meshJ=[],s._meshK=[];var p=s.surface.show,d=s.spaceframe.show,g=s.surface.fill,b=s.spaceframe.fill,m=!1,x=!1,w=0,y,T,M=s._Xs,P=s._Ys,L=s._Zs,I=M.length,E=P.length,k=L.length,C=l.indexOf(s._gridFill.replace(/-/g,"").replace(/\+/g,"")),D=function(Lt,Ct,dt){switch(C){case 5:return dt+k*Ct+k*E*Lt;case 4:return dt+k*Lt+k*I*Ct;case 3:return Ct+E*dt+E*k*Lt;case 2:return Ct+E*Lt+E*I*dt;case 1:return Lt+I*dt+I*k*Ct;default:return Lt+I*Ct+I*E*dt}},F=s._minValues,N=s._maxValues,G=s._vMin,U=s._vMax,X,z,B,j;function V(Lt,Ct,dt){for(var lt=j.length,Te=T;Te<lt;Te++)if(Lt===X[Te]&&Ct===z[Te]&&dt===B[Te])return Te;return-1}function K(){T=y}function te(){X=[],z=[],B=[],j=[],y=0,K()}function $(Lt,Ct,dt,lt){return X.push(Lt),z.push(Ct),B.push(dt),j.push(lt),y++,y-1}function ie(Lt,Ct,dt){return s._meshI.push(Lt),s._meshJ.push(Ct),s._meshK.push(dt),w++,w-1}function se(Lt,Ct,dt){for(var lt=[],Te=0;Te<Lt.length;Te++)lt[Te]=(Lt[Te]+Ct[Te]+dt[Te])/3;return lt}function Q(Lt,Ct,dt){for(var lt=[],Te=0;Te<Lt.length;Te++)lt[Te]=Lt[Te]*(1-dt)+dt*Ct[Te];return lt}var H;function oe(Lt){H=Lt}function re(Lt,Ct){var dt=Lt[0],lt=Lt[1],Te=Lt[2],Le=se(dt,lt,Te),Ue=Math.sqrt(1-H),et=Q(Le,dt,Ue),ke=Q(Le,lt,Ue),Ie=Q(Le,Te,Ue),He=Ct[0],Ye=Ct[1],ft=Ct[2];return{xyzv:[[dt,lt,ke],[ke,et,dt],[lt,Te,Ie],[Ie,ke,lt],[Te,dt,et],[et,Ie,Te]],abc:[[He,Ye,-1],[-1,-1,He],[Ye,ft,-1],[-1,-1,Ye],[ft,He,-1],[-1,-1,ft]]}}function ee(Lt,Ct){return Lt==="all"||Lt===null?!0:Lt.indexOf(Ct)>-1}function ae(Lt,Ct){return Lt===null?Ct:Lt}function fe(Lt,Ct,dt){K();var lt=[Ct],Te=[dt];if(H>=1)lt=[Ct],Te=[dt];else if(H>0){var Le=re(Ct,dt);lt=Le.xyzv,Te=Le.abc}for(var Ue=0;Ue<lt.length;Ue++){Ct=lt[Ue],dt=Te[Ue];for(var et=[],ke=0;ke<3;ke++){var Ie=Ct[ke][0],He=Ct[ke][1],Ye=Ct[ke][2],ft=Ct[ke][3],it=dt[ke]>-1?dt[ke]:V(Ie,He,Ye);it>-1?et[ke]=it:et[ke]=$(Ie,He,Ye,ae(Lt,ft))}ie(et[0],et[1],et[2])}}function de(Lt,Ct,dt){var lt=function(Te,Le,Ue){fe(Lt,[Ct[Te],Ct[Le],Ct[Ue]],[dt[Te],dt[Le],dt[Ue]])};lt(0,1,2),lt(2,3,0)}function pe(Lt,Ct,dt){var lt=function(Te,Le,Ue){fe(Lt,[Ct[Te],Ct[Le],Ct[Ue]],[dt[Te],dt[Le],dt[Ue]])};lt(0,1,2),lt(3,0,1),lt(2,3,0),lt(1,2,3)}function W(Lt,Ct,dt,lt){var Te=Lt[3];Te<dt&&(Te=dt),Te>lt&&(Te=lt);for(var Le=(Lt[3]-Te)/(Lt[3]-Ct[3]+1e-9),Ue=[],et=0;et<4;et++)Ue[et]=(1-Le)*Lt[et]+Le*Ct[et];return Ue}function ue(Lt,Ct,dt){return Lt>=Ct&&Lt<=dt}function me(Lt){var Ct=.001*(U-G);return Lt>=G-Ct&&Lt<=U+Ct}function be(Lt){for(var Ct=[],dt=0;dt<4;dt++){var lt=Lt[dt];Ct.push([s._x[lt],s._y[lt],s._z[lt],s._value[lt]])}return Ct}var Me=3;function Pe(Lt,Ct,dt,lt,Te,Le){Le||(Le=1),dt=[-1,-1,-1];var Ue=!1,et=[ue(Ct[0][3],lt,Te),ue(Ct[1][3],lt,Te),ue(Ct[2][3],lt,Te)];if(!et[0]&&!et[1]&&!et[2])return!1;var ke=function(He,Ye,ft){return me(Ye[0][3])&&me(Ye[1][3])&&me(Ye[2][3])?(fe(He,Ye,ft),!0):Le<Me?Pe(He,Ye,ft,G,U,++Le):!1};if(et[0]&&et[1]&&et[2])return ke(Lt,Ct,dt)||Ue;var Ie=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(He){if(et[He[0]]&&et[He[1]]&&!et[He[2]]){var Ye=Ct[He[0]],ft=Ct[He[1]],it=Ct[He[2]],je=W(it,Ye,lt,Te),ot=W(it,ft,lt,Te);Ue=ke(Lt,[ot,je,Ye],[-1,-1,dt[He[0]]])||Ue,Ue=ke(Lt,[Ye,ft,ot],[dt[He[0]],dt[He[1]],-1])||Ue,Ie=!0}}),Ie||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(He){if(et[He[0]]&&!et[He[1]]&&!et[He[2]]){var Ye=Ct[He[0]],ft=Ct[He[1]],it=Ct[He[2]],je=W(ft,Ye,lt,Te),ot=W(it,Ye,lt,Te);Ue=ke(Lt,[ot,je,Ye],[-1,-1,dt[He[0]]])||Ue,Ie=!0}}),Ue}function Ge(Lt,Ct,dt,lt){var Te=!1,Le=be(Ct),Ue=[ue(Le[0][3],dt,lt),ue(Le[1][3],dt,lt),ue(Le[2][3],dt,lt),ue(Le[3][3],dt,lt)];if(!Ue[0]&&!Ue[1]&&!Ue[2]&&!Ue[3])return Te;if(Ue[0]&&Ue[1]&&Ue[2]&&Ue[3])return x&&(Te=pe(Lt,Le,Ct)||Te),Te;var et=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(ke){if(Ue[ke[0]]&&Ue[ke[1]]&&Ue[ke[2]]&&!Ue[ke[3]]){var Ie=Le[ke[0]],He=Le[ke[1]],Ye=Le[ke[2]],ft=Le[ke[3]];if(x)Te=fe(Lt,[Ie,He,Ye],[Ct[ke[0]],Ct[ke[1]],Ct[ke[2]]])||Te;else{var it=W(ft,Ie,dt,lt),je=W(ft,He,dt,lt),ot=W(ft,Ye,dt,lt);Te=fe(null,[it,je,ot],[-1,-1,-1])||Te}et=!0}}),et||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(ke){if(Ue[ke[0]]&&Ue[ke[1]]&&!Ue[ke[2]]&&!Ue[ke[3]]){var Ie=Le[ke[0]],He=Le[ke[1]],Ye=Le[ke[2]],ft=Le[ke[3]],it=W(Ye,Ie,dt,lt),je=W(Ye,He,dt,lt),ot=W(ft,He,dt,lt),Je=W(ft,Ie,dt,lt);x?(Te=fe(Lt,[Ie,Je,it],[Ct[ke[0]],-1,-1])||Te,Te=fe(Lt,[He,je,ot],[Ct[ke[1]],-1,-1])||Te):Te=de(null,[it,je,ot,Je],[-1,-1,-1,-1])||Te,et=!0}}),et)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(ke){if(Ue[ke[0]]&&!Ue[ke[1]]&&!Ue[ke[2]]&&!Ue[ke[3]]){var Ie=Le[ke[0]],He=Le[ke[1]],Ye=Le[ke[2]],ft=Le[ke[3]],it=W(He,Ie,dt,lt),je=W(Ye,Ie,dt,lt),ot=W(ft,Ie,dt,lt);x?(Te=fe(Lt,[Ie,it,je],[Ct[ke[0]],-1,-1])||Te,Te=fe(Lt,[Ie,je,ot],[Ct[ke[0]],-1,-1])||Te,Te=fe(Lt,[Ie,ot,it],[Ct[ke[0]],-1,-1])||Te):Te=fe(null,[it,je,ot],[-1,-1,-1])||Te,et=!0}}),Te}function ze(Lt,Ct,dt,lt,Te,Le,Ue,et,ke,Ie,He){var Ye=!1;return m&&(ee(Lt,"A")&&(Ye=Ge(null,[Ct,dt,lt,Le],Ie,He)||Ye),ee(Lt,"B")&&(Ye=Ge(null,[dt,lt,Te,ke],Ie,He)||Ye),ee(Lt,"C")&&(Ye=Ge(null,[dt,Le,Ue,ke],Ie,He)||Ye),ee(Lt,"D")&&(Ye=Ge(null,[lt,Le,et,ke],Ie,He)||Ye),ee(Lt,"E")&&(Ye=Ge(null,[dt,lt,Le,ke],Ie,He)||Ye)),x&&(Ye=Ge(Lt,[dt,lt,Le,ke],Ie,He)||Ye),Ye}function Qe(Lt,Ct,dt,lt,Te,Le,Ue,et){return[et[0]===!0?!0:Pe(Lt,be([Ct,dt,lt]),[Ct,dt,lt],Le,Ue),et[1]===!0?!0:Pe(Lt,be([lt,Te,Ct]),[lt,Te,Ct],Le,Ue)]}function tt(Lt,Ct,dt,lt,Te,Le,Ue,et,ke){return et?Qe(Lt,Ct,dt,Te,lt,Le,Ue,ke):Qe(Lt,dt,Te,lt,Ct,Le,Ue,ke)}function Ce(Lt,Ct,dt,lt,Te,Le,Ue){var et=!1,ke,Ie,He,Ye,ft=function(){et=Pe(Lt,[ke,Ie,He],[-1,-1,-1],Te,Le)||et,et=Pe(Lt,[He,Ye,ke],[-1,-1,-1],Te,Le)||et},it=Ue[0],je=Ue[1],ot=Ue[2];return it&&(ke=Q(be([D(Ct,dt-0,lt-0)])[0],be([D(Ct-1,dt-0,lt-0)])[0],it),Ie=Q(be([D(Ct,dt-0,lt-1)])[0],be([D(Ct-1,dt-0,lt-1)])[0],it),He=Q(be([D(Ct,dt-1,lt-1)])[0],be([D(Ct-1,dt-1,lt-1)])[0],it),Ye=Q(be([D(Ct,dt-1,lt-0)])[0],be([D(Ct-1,dt-1,lt-0)])[0],it),ft()),je&&(ke=Q(be([D(Ct-0,dt,lt-0)])[0],be([D(Ct-0,dt-1,lt-0)])[0],je),Ie=Q(be([D(Ct-0,dt,lt-1)])[0],be([D(Ct-0,dt-1,lt-1)])[0],je),He=Q(be([D(Ct-1,dt,lt-1)])[0],be([D(Ct-1,dt-1,lt-1)])[0],je),Ye=Q(be([D(Ct-1,dt,lt-0)])[0],be([D(Ct-1,dt-1,lt-0)])[0],je),ft()),ot&&(ke=Q(be([D(Ct-0,dt-0,lt)])[0],be([D(Ct-0,dt-0,lt-1)])[0],ot),Ie=Q(be([D(Ct-0,dt-1,lt)])[0],be([D(Ct-0,dt-1,lt-1)])[0],ot),He=Q(be([D(Ct-1,dt-1,lt)])[0],be([D(Ct-1,dt-1,lt-1)])[0],ot),Ye=Q(be([D(Ct-1,dt-0,lt)])[0],be([D(Ct-1,dt-0,lt-1)])[0],ot),ft()),et}function Ae(Lt,Ct,dt,lt,Te,Le,Ue,et,ke,Ie,He,Ye){var ft=Lt;return Ye?(m&&Lt==="even"&&(ft=null),ze(ft,Ct,dt,lt,Te,Le,Ue,et,ke,Ie,He)):(m&&Lt==="odd"&&(ft=null),ze(ft,ke,et,Ue,Le,Te,lt,dt,Ct,Ie,He))}function Be(Lt,Ct,dt,lt,Te){for(var Le=[],Ue=0,et=0;et<Ct.length;et++)for(var ke=Ct[et],Ie=1;Ie<k;Ie++)for(var He=1;He<E;He++)Le.push(tt(Lt,D(ke,He-1,Ie-1),D(ke,He-1,Ie),D(ke,He,Ie-1),D(ke,He,Ie),dt,lt,(ke+He+Ie)%2,Te&&Te[Ue]?Te[Ue]:[])),Ue++;return Le}function qe(Lt,Ct,dt,lt,Te){for(var Le=[],Ue=0,et=0;et<Ct.length;et++)for(var ke=Ct[et],Ie=1;Ie<I;Ie++)for(var He=1;He<k;He++)Le.push(tt(Lt,D(Ie-1,ke,He-1),D(Ie,ke,He-1),D(Ie-1,ke,He),D(Ie,ke,He),dt,lt,(Ie+ke+He)%2,Te&&Te[Ue]?Te[Ue]:[])),Ue++;return Le}function Tt(Lt,Ct,dt,lt,Te){for(var Le=[],Ue=0,et=0;et<Ct.length;et++)for(var ke=Ct[et],Ie=1;Ie<E;Ie++)for(var He=1;He<I;He++)Le.push(tt(Lt,D(He-1,Ie-1,ke),D(He-1,Ie,ke),D(He,Ie-1,ke),D(He,Ie,ke),dt,lt,(He+Ie+ke)%2,Te&&Te[Ue]?Te[Ue]:[])),Ue++;return Le}function At(Lt,Ct,dt){for(var lt=1;lt<k;lt++)for(var Te=1;Te<E;Te++)for(var Le=1;Le<I;Le++)Ae(Lt,D(Le-1,Te-1,lt-1),D(Le-1,Te-1,lt),D(Le-1,Te,lt-1),D(Le-1,Te,lt),D(Le,Te-1,lt-1),D(Le,Te-1,lt),D(Le,Te,lt-1),D(Le,Te,lt),Ct,dt,(Le+Te+lt)%2)}function Ne(Lt,Ct,dt){x=!0,At(Lt,Ct,dt),x=!1}function ct(Lt,Ct,dt){m=!0,At(Lt,Ct,dt),m=!1}function Mt(Lt,Ct,dt,lt,Te,Le){for(var Ue=[],et=0,ke=0;ke<Ct.length;ke++)for(var Ie=Ct[ke],He=1;He<k;He++)for(var Ye=1;Ye<E;Ye++)Ue.push(Ce(Lt,Ie,Ye,He,dt,lt,Te[ke],Le&&Le[et]?Le[et]:[])),et++;return Ue}function Wt(Lt,Ct,dt,lt,Te,Le){for(var Ue=[],et=0,ke=0;ke<Ct.length;ke++)for(var Ie=Ct[ke],He=1;He<I;He++)for(var Ye=1;Ye<k;Ye++)Ue.push(Ce(Lt,He,Ie,Ye,dt,lt,Te[ke],Le&&Le[et]?Le[et]:[])),et++;return Ue}function qt(Lt,Ct,dt,lt,Te,Le){for(var Ue=[],et=0,ke=0;ke<Ct.length;ke++)for(var Ie=Ct[ke],He=1;He<E;He++)for(var Ye=1;Ye<I;Ye++)Ue.push(Ce(Lt,Ye,He,Ie,dt,lt,Te[ke],Le&&Le[et]?Le[et]:[])),et++;return Ue}function zt(Lt,Ct){for(var dt=[],lt=Lt;lt<Ct;lt++)dt.push(lt);return dt}function $t(){for(var Lt=0;Lt<I;Lt++)for(var Ct=0;Ct<E;Ct++)for(var dt=0;dt<k;dt++){var lt=D(Lt,Ct,dt);$(s._x[lt],s._y[lt],s._z[lt],s._value[lt])}}function rr(){te(),$t();var Lt=null;if(d&&b&&(oe(b),Ne(Lt,G,U)),p&&g){oe(g);for(var Ct=s.surface.pattern,dt=s.surface.count,lt=0;lt<dt;lt++){var Te=dt===1?.5:lt/(dt-1),Le=(1-Te)*G+Te*U,Ue=Math.abs(Le-F),et=Math.abs(Le-N),ke=Ue>et?[F,Le]:[Le,N];ct(Ct,ke[0],ke[1])}}var Ie=[[Math.min(G,N),Math.max(G,N)],[Math.min(F,U),Math.max(F,U)]];["x","y","z"].forEach(function(He){for(var Ye=[],ft=0;ft<Ie.length;ft++){var it=0,je=Ie[ft][0],ot=Ie[ft][1],Je=s.slices[He];if(Je.show&&Je.fill){oe(Je.fill);var st=[],It=[],Nt=[];if(Je.locations.length)for(var nr=0;nr<Je.locations.length;nr++){var We=f(Je.locations[nr],He==="x"?M:He==="y"?P:L);We.distRatio===0?st.push(We.id):We.id>0&&(It.push(We.id),He==="x"?Nt.push([We.distRatio,0,0]):He==="y"?Nt.push([0,We.distRatio,0]):Nt.push([0,0,We.distRatio]))}else He==="x"?st=zt(1,I-1):He==="y"?st=zt(1,E-1):st=zt(1,k-1);It.length>0&&(He==="x"?Ye[it]=Mt(Lt,It,je,ot,Nt,Ye[it]):He==="y"?Ye[it]=Wt(Lt,It,je,ot,Nt,Ye[it]):Ye[it]=qt(Lt,It,je,ot,Nt,Ye[it]),it++),st.length>0&&(He==="x"?Ye[it]=Be(Lt,st,je,ot,Ye[it]):He==="y"?Ye[it]=qe(Lt,st,je,ot,Ye[it]):Ye[it]=Tt(Lt,st,je,ot,Ye[it]),it++)}var Fe=s.caps[He];Fe.show&&Fe.fill&&(oe(Fe.fill),He==="x"?Ye[it]=Be(Lt,[0,I-1],je,ot,Ye[it]):He==="y"?Ye[it]=qe(Lt,[0,E-1],je,ot,Ye[it]):Ye[it]=Tt(Lt,[0,k-1],je,ot,Ye[it]),it++)}}),w===0&&te(),s._meshX=X,s._meshY=z,s._meshZ=B,s._meshIntensity=j,s._Xs=M,s._Ys=P,s._Zs=L}return rr(),s}function i(s,p){var d=s.glplot.gl,g=r({gl:d}),b=new n(s,g,p.uid);return g._trace=b,b.update(p),s.glplot.add(g),b}v.exports={findNearestOnAxis:f,generateIsoMeshes:h,createIsosurfaceTrace:i}},{"../../components/colorscale":655,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/gl3d/zip3":881,"gl-mesh3d":309}],1126:[function(e,v,S){var r=e("../../lib"),a=e("../../registry"),u=e("./attributes"),c=e("../../components/colorscale/defaults");function t(n,o,l,h){function i(s,p){return r.coerce(n,o,u,s,p)}f(n,o,l,h,i)}function f(n,o,l,h,i){var s=i("isomin"),p=i("isomax");p!=null&&s!==void 0&&s!==null&&s>p&&(o.isomin=null,o.isomax=null);var d=i("x"),g=i("y"),b=i("z"),m=i("value");if(!d||!d.length||!g||!g.length||!b||!b.length||!m||!m.length){o.visible=!1;return}var x=a.getComponentMethod("calendars","handleTraceDefaults");x(n,o,["x","y","z"],h),["x","y","z"].forEach(function(M){var P="caps."+M,L=i(P+".show");L&&i(P+".fill");var I="slices."+M,E=i(I+".show");E&&(i(I+".fill"),i(I+".locations"))});var w=i("spaceframe.show");w&&i("spaceframe.fill");var y=i("surface.show");y&&(i("surface.count"),i("surface.fill"),i("surface.pattern"));var T=i("contour.show");T&&(i("contour.color"),i("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(M){i(M)}),c(n,o,h,i,{prefix:"",cLetter:"c"}),o._length=null}v.exports={supplyDefaults:t,supplyIsoDefaults:f}},{"../../components/colorscale/defaults":653,"../../lib":778,"../../registry":911,"./attributes":1123}],1127:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":870,"./attributes":1123,"./calc":1124,"./convert":1125,"./defaults":1126}],1128:[function(e,v,S){var r=e("../../components/colorscale/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../surface/attributes"),c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat;v.exports=t({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:a({editType:"calc"}),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},r("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:u.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:t({},u.contours.x.show,{}),color:u.contours.x.color,width:u.contours.x.width,editType:"calc"},lightposition:{x:t({},u.lightposition.x,{dflt:1e5}),y:t({},u.lightposition.y,{dflt:1e5}),z:t({},u.lightposition.z,{dflt:0}),editType:"calc"},lighting:t({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},u.lighting),hoverinfo:t({},c.hoverinfo,{editType:"calc"}),showlegend:t({},c.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../surface/attributes":1311}],1129:[function(e,v,S){var r=e("../../components/colorscale/calc");v.exports=function(u,c){c.intensity&&r(u,c,{vals:c.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651}],1130:[function(e,v,S){var r=e("gl-mesh3d"),a=e("delaunay-triangulate"),u=e("alpha-shape"),c=e("convex-hull"),t=e("../../lib/gl_format_color").parseColorScale,f=e("../../lib/str2rgbarray"),n=e("../../components/colorscale").extractOpts,o=e("../../plots/gl3d/zip3");function l(m,x,w){this.scene=m,this.uid=w,this.mesh=x,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var h=l.prototype;h.handlePick=function(m){if(m.object===this.mesh){var x=m.index=m.data.index;m.data._cellCenter?m.traceCoordinate=m.data.dataCoordinate:m.traceCoordinate=[this.data.x[x],this.data.y[x],this.data.z[x]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[x]!==void 0?m.textLabel=w[x]:w&&(m.textLabel=w),!0}};function i(m){for(var x=[],w=m.length,y=0;y<w;y++)x[y]=f(m[y]);return x}function s(m,x,w,y){for(var T=[],M=x.length,P=0;P<M;P++)T[P]=m.d2l(x[P],0,y)*w;return T}function p(m){for(var x=[],w=m.length,y=0;y<w;y++)x[y]=Math.round(m[y]);return x}function d(m,x){for(var w=["x","y","z"].indexOf(m),y=[],T=x.length,M=0;M<T;M++)y[M]=[x[M][(w+1)%3],x[M][(w+2)%3]];return a(y)}function g(m,x){for(var w=m.length,y=0;y<w;y++)if(m[y]<=-.5||m[y]>=x-.5)return!1;return!0}h.update=function(m){var x=this.scene,w=x.fullSceneLayout;this.data=m;var y=m.x.length,T=o(s(w.xaxis,m.x,x.dataScale[0],m.xcalendar),s(w.yaxis,m.y,x.dataScale[1],m.ycalendar),s(w.zaxis,m.z,x.dataScale[2],m.zcalendar)),M;if(m.i&&m.j&&m.k){if(m.i.length!==m.j.length||m.j.length!==m.k.length||!g(m.i,y)||!g(m.j,y)||!g(m.k,y))return;M=o(p(m.i),p(m.j),p(m.k))}else m.alphahull===0?M=c(T):m.alphahull>0?M=u(m.alphahull,T):M=d(m.delaunayaxis,T);var P={positions:T,cells:M,lightPosition:[m.lightposition.x,m.lightposition.y,m.lightposition.z],ambient:m.lighting.ambient,diffuse:m.lighting.diffuse,specular:m.lighting.specular,roughness:m.lighting.roughness,fresnel:m.lighting.fresnel,vertexNormalsEpsilon:m.lighting.vertexnormalsepsilon,faceNormalsEpsilon:m.lighting.facenormalsepsilon,opacity:m.opacity,contourEnable:m.contour.show,contourColor:f(m.contour.color).slice(0,3),contourWidth:m.contour.width,useFacetNormals:m.flatshading};if(m.intensity){var L=n(m);this.color="#fff";var I=m.intensitymode;P[I+"Intensity"]=m.intensity,P[I+"IntensityBounds"]=[L.min,L.max],P.colormap=t(m)}else m.vertexcolor?(this.color=m.vertexcolor[0],P.vertexColors=i(m.vertexcolor)):m.facecolor?(this.color=m.facecolor[0],P.cellColors=i(m.facecolor)):(this.color=m.color,P.meshColor=f(m.color));this.mesh.update(P)},h.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function b(m,x){var w=m.glplot.gl,y=r({gl:w}),T=new l(m,y,x.uid);return y._trace=T,T.update(x),m.glplot.add(y),T}v.exports=b},{"../../components/colorscale":655,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/gl3d/zip3":881,"alpha-shape":69,"convex-hull":135,"delaunay-triangulate":171,"gl-mesh3d":309}],1131:[function(e,v,S){var r=e("../../registry"),a=e("../../lib"),u=e("../../components/colorscale/defaults"),c=e("./attributes");v.exports=function(f,n,o,l){function h(g,b){return a.coerce(f,n,c,g,b)}function i(g){var b=g.map(function(m){var x=h(m);return x&&a.isArrayOrTypedArray(x)?x:null});return b.every(function(m){return m&&m.length===b[0].length})&&b}var s=i(["x","y","z"]);if(!s){n.visible=!1;return}if(i(["i","j","k"]),n.i&&(!n.j||!n.k)||n.j&&(!n.k||!n.i)||n.k&&(!n.i||!n.j)){n.visible=!1;return}var p=r.getComponentMethod("calendars","handleTraceDefaults");p(f,n,["x","y","z"],l),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(g){h(g)});var d=h("contour.show");d&&(h("contour.color"),h("contour.width")),"intensity"in f?(h("intensity"),h("intensitymode"),u(f,n,l,h,{prefix:"",cLetter:"c"})):(n.showscale=!1,"facecolor"in f?h("facecolor"):"vertexcolor"in f?h("vertexcolor"):h("color",o)),h("text"),h("hovertext"),h("hovertemplate"),n._length=null}},{"../../components/colorscale/defaults":653,"../../lib":778,"../../registry":911,"./attributes":1128}],1132:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":870,"./attributes":1128,"./calc":1129,"./convert":1130,"./defaults":1131}],1133:[function(e,v,S){var r=e("../../lib").extendFlat,a=e("../scatter/attributes"),u=e("../../components/drawing/attributes").dash,c=e("../../components/fx/attributes"),t=e("../../constants/delta.js"),f=t.INCREASING.COLOR,n=t.DECREASING.COLOR,o=a.line;function l(h){return{line:{color:r({},o.color,{dflt:h}),width:o.width,dash:u,editType:"style"},editType:"style"}}v.exports={xperiod:a.xperiod,xperiod0:a.xperiod0,xperiodalignment:a.xperiodalignment,x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:r({},o.width,{}),dash:r({},u,{}),editType:"style"},increasing:l(f),decreasing:l(n),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:r({},c.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":664,"../../components/fx/attributes":674,"../../constants/delta.js":747,"../../lib":778,"../scatter/attributes":1187}],1134:[function(e,v,S){var r=e("../../lib"),a=r._,u=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM;function f(h,i){var s=u.getFromId(h,i.xaxis),p=u.getFromId(h,i.yaxis),d=l(h,s,i),g=i._minDiff;i._minDiff=null;var b=i._origX;i._origX=null;var m=i._xcalc;i._xcalc=null;var x=o(h,i,b,m,p,n);return i._extremes[s._id]=u.findExtremes(s,m,{vpad:g/2}),x.length?(r.extendFlat(x[0].t,{wHover:g/2,tickLen:d}),x):[{t:{empty:!0}}]}function n(h,i,s,p){return{o:h,h:i,l:s,c:p}}function o(h,i,s,p,d,g){for(var b=d.makeCalcdata(i,"open"),m=d.makeCalcdata(i,"high"),x=d.makeCalcdata(i,"low"),w=d.makeCalcdata(i,"close"),y=Array.isArray(i.text),T=Array.isArray(i.hovertext),M=!0,P=null,L=!!i.xperiodalignment,I=[],E=0;E<p.length;E++){var k=p[E],C=b[E],D=m[E],F=x[E],N=w[E];if(k!==t&&C!==t&&D!==t&&F!==t&&N!==t){N===C?P!==null&&N!==P&&(M=N>P):M=N>C,P=N;var G=g(C,D,F,N);G.pos=k,G.yc=(C+N)/2,G.i=E,G.dir=M?"increasing":"decreasing",G.x=G.pos,G.y=[F,D],L&&(G.orig_p=s[E]),y&&(G.tx=i.text[E]),T&&(G.htx=i.hovertext[E]),I.push(G)}else I.push({pos:k,empty:!0})}return i._extremes[d._id]=u.findExtremes(d,r.concat(x,m),{padded:!0}),I.length&&(I[0].t={labels:{open:a(h,"open:")+" ",high:a(h,"high:")+" ",low:a(h,"low:")+" ",close:a(h,"close:")+" "}}),I}function l(h,i,s){var p=s._minDiff;if(!p){var d=h._fullData,g=[];p=1/0;var b;for(b=0;b<d.length;b++){var m=d[b];if(m.type==="ohlc"&&m.visible===!0&&m.xaxis===i._id){g.push(m);var x=i.makeCalcdata(m,"x");m._origX=x;var w=c(s,i,"x",x);m._xcalc=w;var y=r.distinctVals(w).minDiff;y&&isFinite(y)&&(p=Math.min(p,y))}}for(p===1/0&&(p=1),b=0;b<g.length;b++)g[b]._minDiff=p}return p*s.tickwidth}v.exports={calc:f,calcCommon:o}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828}],1135:[function(e,v,S){var r=e("../../lib"),a=e("./ohlc_defaults"),u=e("../scatter/period_defaults"),c=e("./attributes");v.exports=function(n,o,l,h){function i(p,d){return r.coerce(n,o,c,p,d)}var s=a(n,o,i,h);if(!s){o.visible=!1;return}u(n,o,h,i,{x:!0}),i("line.width"),i("line.dash"),t(n,o,i,"increasing"),t(n,o,i,"decreasing"),i("text"),i("hovertext"),i("tickwidth"),h._requestRangeslider[o.xaxis]=!0};function t(f,n,o,l){o(l+".line.color"),o(l+".line.width",n.line.width),o(l+".line.dash",n.line.dash)}},{"../../lib":778,"../scatter/period_defaults":1207,"./attributes":1133,"./ohlc_defaults":1138}],1136:[function(e,v,S){var r=e("../../plots/cartesian/axes"),a=e("../../lib"),u=e("../../components/fx"),c=e("../../components/color"),t=e("../../lib").fillText,f=e("../../constants/delta.js"),n={increasing:f.INCREASING.SYMBOL,decreasing:f.DECREASING.SYMBOL};function o(s,p,d,g){var b=s.cd,m=b[0].trace;return m.hoverlabel.split?h(s,p,d,g):i(s,p,d,g)}function l(s,p,d,g){var b=s.cd,m=s.xa,x=b[0].trace,w=b[0].t,y=x.type,T=y==="ohlc"?"l":"min",M=y==="ohlc"?"h":"max",P,L,I=w.bPos||0,E=function(V){return V.pos+I-p},k=w.bdPos||w.tickLen,C=w.wHover,D=Math.min(1,k/Math.abs(m.r2c(m.range[1])-m.r2c(m.range[0])));P=s.maxHoverDistance-D,L=s.maxSpikeDistance-D;function F(V){var K=E(V);return u.inbox(K-C,K+C,P)}function N(V){var K=V[T],te=V[M];return K===te||u.inbox(K-d,te-d,P)}function G(V){return(F(V)+N(V))/2}var U=u.getDistanceFunction(g,F,N,G);if(u.getClosest(b,U,s),s.index===!1)return null;var X=b[s.index];if(X.empty)return null;var z=X.dir,B=x[z],j=B.line.color;return c.opacity(j)&&B.line.width?s.color=j:s.color=B.fillcolor,s.x0=m.c2p(X.pos+I-k,!0),s.x1=m.c2p(X.pos+I+k,!0),s.xLabelVal=X.orig_p!==void 0?X.orig_p:X.pos,s.spikeDistance=G(X)*L/P,s.xSpike=m.c2p(X.pos,!0),s}function h(s,p,d,g){var b=s.cd,m=s.ya,x=b[0].trace,w=b[0].t,y=[],T=l(s,p,d,g);if(!T)return[];var M=T.index,P=b[M],L=P.hi||x.hoverinfo,I=L.split("+"),E=L==="all",k=E||I.indexOf("y")!==-1;if(!k)return[];for(var C=["high","open","close","low"],D={},F=0;F<C.length;F++){var N=C[F],G=x[N][T.index],U=m.c2p(G,!0),X;G in D?(X=D[G],X.yLabel+="<br>"+w.labels[N]+r.hoverLabelText(m,G)):(X=a.extendFlat({},T),X.y0=X.y1=U,X.yLabelVal=G,X.yLabel=w.labels[N]+r.hoverLabelText(m,G),X.name="",y.push(X),D[G]=X)}return y}function i(s,p,d,g){var b=s.cd,m=s.ya,x=b[0].trace,w=b[0].t,y=l(s,p,d,g);if(!y)return[];var T=y.index,M=b[T],P=y.index=M.i,L=M.dir;function I(G){return w.labels[G]+r.hoverLabelText(m,x[G][P])}var E=M.hi||x.hoverinfo,k=E.split("+"),C=E==="all",D=C||k.indexOf("y")!==-1,F=C||k.indexOf("text")!==-1,N=D?[I("open"),I("high"),I("low"),I("close")+"  "+n[L]]:[];return F&&t(M,x,N),y.extraText=N.join("<br>"),y.y0=y.y1=m.c2p(M.yc,!0),[y]}v.exports={hoverPoints:o,hoverSplit:h,hoverOnPoints:i}},{"../../components/color":643,"../../components/fx":683,"../../constants/delta.js":747,"../../lib":778,"../../plots/cartesian/axes":828}],1137:[function(e,v,S){v.exports={moduleType:"trace",name:"ohlc",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc").calc,plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select")}},{"../../plots/cartesian":841,"./attributes":1133,"./calc":1134,"./defaults":1135,"./hover":1136,"./plot":1139,"./select":1140,"./style":1141}],1138:[function(e,v,S){var r=e("../../registry"),a=e("../../lib");v.exports=function(c,t,f,n){var o=f("x"),l=f("open"),h=f("high"),i=f("low"),s=f("close");f("hoverlabel.split");var p=r.getComponentMethod("calendars","handleTraceDefaults");if(p(c,t,["x"],n),!!(l&&h&&i&&s)){var d=Math.min(l.length,h.length,i.length,s.length);return o&&(d=Math.min(d,a.minRowLength(o))),t._length=d,d}}},{"../../lib":778,"../../registry":911}],1139:[function(e,v,S){var r=e("d3"),a=e("../../lib");v.exports=function(c,t,f,n){var o=t.yaxis,l=t.xaxis,h=!!l.rangebreaks;a.makeTraceGroups(n,f,"trace ohlc").each(function(i){var s=r.select(this),p=i[0],d=p.t,g=p.trace;if(g.visible!==!0||d.empty){s.remove();return}var b=d.tickLen,m=s.selectAll("path").data(a.identity);m.enter().append("path"),m.exit().remove(),m.attr("d",function(x){if(x.empty)return"M0,0Z";var w=l.c2p(x.pos-b,!0),y=l.c2p(x.pos+b,!0),T=h?(w+y)/2:l.c2p(x.pos,!0),M=o.c2p(x.o,!0),P=o.c2p(x.h,!0),L=o.c2p(x.l,!0),I=o.c2p(x.c,!0);return"M"+w+","+M+"H"+T+"M"+T+","+P+"V"+L+"M"+y+","+I+"H"+T})})}},{"../../lib":778,d3:169}],1140:[function(e,v,S){v.exports=function(a,u){var c=a.cd,t=a.xaxis,f=a.yaxis,n=[],o,l=c[0].t.bPos||0;if(u===!1)for(o=0;o<c.length;o++)c[o].selected=0;else for(o=0;o<c.length;o++){var h=c[o];u.contains([t.c2p(h.pos+l),f.c2p(h.yc)],null,h.i,a)?(n.push({pointNumber:h.i,x:t.c2d(h.pos),y:f.c2d(h.yc)}),h.selected=1):h.selected=0}return n}},{}],1141:[function(e,v,S){var r=e("d3"),a=e("../../components/drawing"),u=e("../../components/color");v.exports=function(t,f,n){var o=n||r.select(t).selectAll("g.ohlclayer").selectAll("g.trace");o.style("opacity",function(l){return l[0].trace.opacity}),o.each(function(l){var h=l[0].trace;r.select(this).selectAll("path").each(function(i){if(!i.empty){var s=h[i.dir].line;r.select(this).style("fill","none").call(u.stroke,s.color).call(a.dashLine,s.dash,s.width).style("opacity",h.selectedpoints&&!i.selected?.3:1)}})})}},{"../../components/color":643,"../../components/drawing":665,d3:169}],1142:[function(e,v,S){var r=e("../../lib/extend").extendFlat,a=e("../../plots/attributes"),u=e("../../plots/font_attributes"),c=e("../../components/colorscale/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,f=e("../../plots/domain").attributes,n=r({editType:"calc"},c("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});v.exports={domain:f({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:r({},a.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:u({editType:"calc"}),tickfont:u({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:n,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/font_attributes":856,"../../plots/template_attributes":906}],1143:[function(e,v,S){var r=e("../../plots/get_data").getModuleCalcData,a=e("./plot"),u="parcats";S.name=u,S.plot=function(c,t,f,n){var o=r(c.calcdata,u);if(o.length){var l=o[0];a(c,l,f,n)}},S.clean=function(c,t,f,n){var o=n._has&&n._has("parcats"),l=t._has&&t._has("parcats");o&&!l&&n._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":865,"./plot":1148}],1144:[function(e,v,S){var r=e("../../lib/gup").wrap,a=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/calc"),c=e("../../lib/filter_unique.js"),t=e("../../components/drawing"),f=e("../../lib"),n=e("fast-isnumeric");v.exports=function(w,y){var T=f.filterVisible(y.dimensions);if(T.length===0)return[];var M=T.map(function(se){var Q;if(se.categoryorder==="trace")Q=null;else if(se.categoryorder==="array")Q=se.categoryarray;else{Q=c(se.values);for(var H=!0,oe=0;oe<Q.length;oe++)if(!n(Q[oe])){H=!1;break}Q.sort(H?f.sorterAsc:void 0),se.categoryorder==="category descending"&&(Q=Q.reverse())}return d(se.values,Q)}),P,L,I;f.isArrayOrTypedArray(y.counts)?P=y.counts:P=[y.counts],g(T),T.forEach(function(se,Q){b(se,M[Q])});var E=y.line,k;E?(a(y,"line")&&u(w,y,{vals:y.line.color,containerStr:"line",cLetter:"c"}),k=t.tryColorscale(E)):k=f.identity;function C(se){var Q,H;return f.isArrayOrTypedArray(E.color)?(Q=E.color[se%E.color.length],H=Q):Q=E.color,{color:k(Q),rawColor:H}}var D=T[0].values.length,F={},N=M.map(function(se){return se.inds});I=0;var G,U;for(G=0;G<D;G++){var X=[];for(U=0;U<N.length;U++)X.push(N[U][G]);L=P[G%P.length],I+=L;var z=C(G),B=X+"-"+z.rawColor;F[B]===void 0&&(F[B]=s(X,z.color,z.rawColor)),p(F[B],G,L)}var j=T.map(function(se,Q){return l(Q,se._index,se._displayindex,se.label,I)});for(G=0;G<D;G++)for(L=P[G%P.length],U=0;U<j.length;U++){var V=j[U].containerInd,K=M[U].inds[G],te=j[U].categories;if(te[K]===void 0){var $=y.dimensions[V]._categoryarray[K],ie=y.dimensions[V]._ticktext[K];te[K]=h(U,K,$,ie)}i(te[K],G,L)}return r(o(j,F,I))};function o(x,w,y){var T=x.map(function(M){return M.categories.length}).reduce(function(M,P){return Math.max(M,P)});return{dimensions:x,paths:w,trace:void 0,maxCats:T,count:y}}function l(x,w,y,T,M){return{dimensionInd:x,containerInd:w,displayInd:y,dimensionLabel:T,count:M,categories:[],dragX:null}}function h(x,w,y,T){return{dimensionInd:x,categoryInd:w,categoryValue:y,displayInd:w,categoryLabel:T,valueInds:[],count:0,dragY:null}}function i(x,w,y){x.valueInds.push(w),x.count+=y}function s(x,w,y){return{categoryInds:x,color:w,rawColor:y,valueInds:[],count:0}}function p(x,w,y){x.valueInds.push(w),x.count+=y}function d(x,w){w==null?w=[]:w=w.map(function(k){return k});var y={},T={},M=[];w.forEach(function(k,C){y[k]=0,T[k]=C});for(var P=0;P<x.length;P++){var L=x[P],I;y[L]===void 0?(y[L]=1,I=w.push(L)-1,T[L]=I):(y[L]++,I=T[L]),M.push(I)}var E=w.map(function(k){return y[k]});return{uniqueValues:w,uniqueCounts:E,inds:M}}function g(x){var w=x.map(function(T){return T.displayindex}),y;if(m(w))for(y=0;y<x.length;y++)x[y]._displayindex=x[y].displayindex;else for(y=0;y<x.length;y++)x[y]._displayindex=y}function b(x,w){x._categoryarray=w.uniqueValues,x.ticktext===null||x.ticktext===void 0?x._ticktext=[]:x._ticktext=x.ticktext.slice();for(var y=x._ticktext.length;y<w.uniqueValues.length;y++)x._ticktext.push(w.uniqueValues[y])}function m(x){for(var w=new Array(x.length),y=0;y<x.length;y++){if(x[y]<0||x[y]>=x.length||w[x[y]]!==void 0)return!1;w[x[y]]=!0}return!0}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"../../components/drawing":665,"../../lib":778,"../../lib/filter_unique.js":769,"../../lib/gup":775,"fast-isnumeric":241}],1145:[function(e,v,S){var r=e("../../lib"),a=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults"),c=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),f=e("./attributes"),n=e("../parcoords/merge_length");function o(h,i,s,p,d){d("line.shape"),d("line.hovertemplate");var g=d("line.color",p.colorway[0]);if(a(h,"line")&&r.isArrayOrTypedArray(g)){if(g.length)return d("line.colorscale"),u(h,i,p,d,{prefix:"line.",cLetter:"c"}),g.length;i.line.color=s}return 1/0}function l(h,i){function s(w,y){return r.coerce(h,i,f.dimensions,w,y)}var p=s("values"),d=s("visible");if(p&&p.length||(d=i.visible=!1),d){s("label"),s("displayindex",i._index);var g=h.categoryarray,b=Array.isArray(g)&&g.length>0,m;b&&(m="array");var x=s("categoryorder",m);x==="array"?(s("categoryarray"),s("ticktext")):(delete h.categoryarray,delete h.ticktext),!b&&x==="array"&&(i.categoryorder="trace")}}v.exports=function(i,s,p,d){function g(y,T){return r.coerce(i,s,f,y,T)}var b=t(i,s,{name:"dimensions",handleItemDefaults:l}),m=o(i,s,p,d,g);c(s,d,g),(!Array.isArray(b)||!b.length)&&(s.visible=!1),n(s,b,"values",m),g("hoveron"),g("hovertemplate"),g("arrangement"),g("bundlecolors"),g("sortpaths"),g("counts");var x={family:d.font.family,size:Math.round(d.font.size),color:d.font.color};r.coerceFont(g,"labelfont",x);var w={family:d.font.family,size:Math.round(d.font.size/1.2),color:d.font.color};r.coerceFont(g,"tickfont",w)}},{"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/domain":855,"../parcoords/merge_length":1158,"./attributes":1142}],1146:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1142,"./base_plot":1143,"./calc":1144,"./defaults":1145,"./plot":1148}],1147:[function(e,v,S){var r=e("d3"),a=e("../../plot_api/plot_api"),u=e("../../components/fx"),c=e("../../lib"),t=c.strTranslate,f=e("../../components/drawing"),n=e("tinycolor2"),o=e("../../lib/svg_text_utils");function l(H,oe,re,ee){var ae=H.map(te.bind(0,oe,re)),fe=ee.selectAll("g.parcatslayer").data([null]);fe.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var de=fe.selectAll("g.trace.parcats").data(ae,h),pe=de.enter().append("g").attr("class","trace parcats");de.attr("transform",function(Ce){return t(Ce.x,Ce.y)}),pe.append("g").attr("class","paths");var W=de.select("g.paths"),ue=W.selectAll("path.path").data(function(Ce){return Ce.paths},h);ue.attr("fill",function(Ce){return Ce.model.color});var me=ue.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Ce){return Ce.model.color}).attr("fill-opacity",0);x(me),ue.attr("d",function(Ce){return Ce.svgD}),me.empty()||ue.sort(s),ue.exit().remove(),ue.on("mouseover",p).on("mouseout",d).on("click",m),pe.append("g").attr("class","dimensions");var be=de.select("g.dimensions"),Me=be.selectAll("g.dimension").data(function(Ce){return Ce.dimensions},h);Me.enter().append("g").attr("class","dimension"),Me.attr("transform",function(Ce){return t(Ce.x,0)}),Me.exit().remove();var Pe=Me.selectAll("g.category").data(function(Ce){return Ce.categories},h),Ge=Pe.enter().append("g").attr("class","category");Pe.attr("transform",function(Ce){return t(0,Ce.y)}),Ge.append("rect").attr("class","catrect").attr("pointer-events","none"),Pe.select("rect.catrect").attr("fill","none").attr("width",function(Ce){return Ce.width}).attr("height",function(Ce){return Ce.height}),T(Ge);var ze=Pe.selectAll("rect.bandrect").data(function(Ce){return Ce.bands},h);ze.each(function(){c.raiseToTop(this)}),ze.attr("fill",function(Ce){return Ce.color});var Qe=ze.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Ce){return Ce.color}).attr("fill-opacity",0);ze.attr("fill",function(Ce){return Ce.color}).attr("width",function(Ce){return Ce.width}).attr("height",function(Ce){return Ce.height}).attr("y",function(Ce){return Ce.y}).attr("cursor",function(Ce){return Ce.parcatsViewModel.arrangement==="fixed"?"default":Ce.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),P(Qe),ze.exit().remove(),Ge.append("text").attr("class","catlabel").attr("pointer-events","none");var tt=oe._fullLayout.paper_bgcolor;Pe.select("text.catlabel").attr("text-anchor",function(Ce){return i(Ce)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",tt+" -1px  1px 2px, "+tt+" 1px  1px 2px, "+tt+"  1px -1px 2px, "+tt+" -1px -1px 2px").style("fill","rgb(0, 0, 0)").attr("x",function(Ce){return i(Ce)?Ce.width+5:-5}).attr("y",function(Ce){return Ce.height/2}).text(function(Ce){return Ce.model.categoryLabel}).each(function(Ce){f.font(r.select(this),Ce.parcatsViewModel.categorylabelfont),o.convertToTspans(r.select(this),oe)}),Ge.append("text").attr("class","dimlabel"),Pe.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Ce){return Ce.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Ce){return Ce.width/2}).attr("y",-5).text(function(Ce,Ae){return Ae===0?Ce.parcatsViewModel.model.dimensions[Ce.model.dimensionInd].dimensionLabel:null}).each(function(Ce){f.font(r.select(this),Ce.parcatsViewModel.labelfont)}),Pe.selectAll("rect.bandrect").on("mouseover",G).on("mouseout",U),Pe.exit().remove(),Me.call(r.behavior.drag().origin(function(Ce){return{x:Ce.x,y:0}}).on("dragstart",X).on("drag",z).on("dragend",B)),de.each(function(Ce){Ce.traceSelection=r.select(this),Ce.pathSelection=r.select(this).selectAll("g.paths").selectAll("path.path"),Ce.dimensionSelection=r.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),de.exit().remove()}v.exports=function(H,oe,re,ee){l(re,H,ee,oe)};function h(H){return H.key}function i(H){var oe=H.parcatsViewModel.dimensions.length,re=H.parcatsViewModel.dimensions[oe-1].model.dimensionInd;return H.model.dimensionInd===re}function s(H,oe){return H.model.rawColor>oe.model.rawColor?1:H.model.rawColor<oe.model.rawColor?-1:0}function p(H){if(!H.parcatsViewModel.dragDimension&&H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){c.raiseToTop(this),w(r.select(this));var oe=g(H),re=b(H);if(H.parcatsViewModel.graphDiv.emit("plotly_hover",{points:oe,event:r.event,constraints:re}),H.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ee=r.mouse(this)[0],ae=H.parcatsViewModel.graphDiv,fe=H.parcatsViewModel.trace,de=ae._fullLayout,pe=de._paperdiv.node().getBoundingClientRect(),W=H.parcatsViewModel.graphDiv.getBoundingClientRect(),ue,me,be;for(be=0;be<H.leftXs.length-1;be++)if(H.leftXs[be]+H.dimWidths[be]-2<=ee&&ee<=H.leftXs[be+1]+2){var Me=H.parcatsViewModel.dimensions[be],Pe=H.parcatsViewModel.dimensions[be+1];ue=(Me.x+Me.width+Pe.x)/2,me=(H.topYs[be]+H.topYs[be+1]+H.height)/2;break}var Ge=H.parcatsViewModel.x+ue,ze=H.parcatsViewModel.y+me,Qe=n.mostReadable(H.model.color,["black","white"]),tt=H.model.count,Ce=tt/H.parcatsViewModel.model.count,Ae={countLabel:tt,probabilityLabel:Ce.toFixed(3)},Be=[];H.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Be.push(["Count:",Ae.countLabel].join(" ")),H.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Be.push(["P:",Ae.probabilityLabel].join(" "));var qe=Be.join("<br>"),Tt=r.mouse(ae)[0];u.loneHover({trace:fe,x:Ge-pe.left+W.left,y:ze-pe.top+W.top,text:qe,color:H.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Qe,idealAlign:Tt<Ge?"right":"left",hovertemplate:(fe.line||{}).hovertemplate,hovertemplateLabels:Ae,eventData:[{data:fe._input,fullData:fe,count:tt,probability:Ce}]},{container:de._hoverlayer.node(),outerContainer:de._paper.node(),gd:ae})}}}function d(H){if(!H.parcatsViewModel.dragDimension&&(x(r.select(this)),u.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),H.parcatsViewModel.pathSelection.sort(s),H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var oe=g(H),re=b(H);H.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:oe,event:r.event,constraints:re})}}function g(H){for(var oe=[],re=j(H.parcatsViewModel),ee=0;ee<H.model.valueInds.length;ee++){var ae=H.model.valueInds[ee];oe.push({curveNumber:re,pointNumber:ae})}return oe}function b(H){for(var oe={},re=H.parcatsViewModel.model.dimensions,ee=0;ee<re.length;ee++){var ae=re[ee],fe=ae.categories[H.model.categoryInds[ee]];oe[ae.containerInd]=fe.categoryValue}return H.model.rawColor!==void 0&&(oe.color=H.model.rawColor),oe}function m(H){if(H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var oe=g(H),re=b(H);H.parcatsViewModel.graphDiv.emit("plotly_click",{points:oe,event:r.event,constraints:re})}}function x(H){H.attr("fill",function(oe){return oe.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function w(H){H.attr("fill-opacity",.8).attr("stroke",function(oe){return n.mostReadable(oe.model.color,["black","white"])}).attr("stroke-width",.3)}function y(H){H.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function T(H){H.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function M(H){H.attr("stroke","black").attr("stroke-width",1.5)}function P(H){H.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function L(H){var oe=H.parcatsViewModel.pathSelection,re=H.categoryViewModel.model.dimensionInd,ee=H.categoryViewModel.model.categoryInd;return oe.filter(function(ae){return ae.model.categoryInds[re]===ee&&ae.model.color===H.color})}function I(H){var oe=r.select(H.parentNode).selectAll("rect.bandrect");oe.each(function(re){var ee=L(re);w(ee),ee.each(function(){c.raiseToTop(this)})}),y(r.select(H.parentNode))}function E(H){var oe=r.select(H).datum(),re=L(oe);w(re),re.each(function(){c.raiseToTop(this)}),r.select(H.parentNode).selectAll("rect.bandrect").filter(function(ee){return ee.color===oe.color}).each(function(){c.raiseToTop(this),M(r.select(this))})}function k(H,oe,re){var ee=r.select(H).datum(),ae=ee.categoryViewModel.model,fe=ee.parcatsViewModel.graphDiv,de=r.select(H.parentNode).selectAll("rect.bandrect"),pe=[];de.each(function(ue){var me=L(ue);me.each(function(be){Array.prototype.push.apply(pe,g(be))})});var W={};W[ae.dimensionInd]=ae.categoryValue,fe.emit(oe,{points:pe,event:re,constraints:W})}function C(H,oe,re){var ee=r.select(H).datum(),ae=ee.categoryViewModel.model,fe=ee.parcatsViewModel.graphDiv,de=L(ee),pe=[];de.each(function(ue){Array.prototype.push.apply(pe,g(ue))});var W={};W[ae.dimensionInd]=ae.categoryValue,ee.rawColor!==void 0&&(W.color=ee.rawColor),fe.emit(oe,{points:pe,event:re,constraints:W})}function D(H,oe,re){H._fullLayout._calcInverseTransform(H);var ee=H._fullLayout._invScaleX,ae=H._fullLayout._invScaleY,fe=r.select(re.parentNode).select("rect.catrect"),de=fe.node().getBoundingClientRect(),pe=fe.datum(),W=pe.parcatsViewModel,ue=W.model.dimensions[pe.model.dimensionInd],me=W.trace,be=de.top+de.height/2,Me,Pe;W.dimensions.length>1&&ue.displayInd===W.dimensions.length-1?(Me=de.left,Pe="left"):(Me=de.left+de.width,Pe="right");var Ge=pe.model.count,ze=pe.model.categoryLabel,Qe=Ge/pe.parcatsViewModel.model.count,tt={countLabel:Ge,categoryLabel:ze,probabilityLabel:Qe.toFixed(3)},Ce=[];pe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ce.push(["Count:",tt.countLabel].join(" ")),pe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ce.push(["P("+tt.categoryLabel+"):",tt.probabilityLabel].join(" "));var Ae=Ce.join("<br>");return{trace:me,x:ee*(Me-oe.left),y:ae*(be-oe.top),text:Ae,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Pe,hovertemplate:me.hovertemplate,hovertemplateLabels:tt,eventData:[{data:me._input,fullData:me,count:Ge,category:ze,probability:Qe}]}}function F(H,oe,re){var ee=[];return r.select(re.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var ae=this;ee.push(D(H,oe,ae))}),ee}function N(H,oe,re){H._fullLayout._calcInverseTransform(H);var ee=H._fullLayout._invScaleX,ae=H._fullLayout._invScaleY,fe=re.getBoundingClientRect(),de=r.select(re).datum(),pe=de.categoryViewModel,W=pe.parcatsViewModel,ue=W.model.dimensions[pe.model.dimensionInd],me=W.trace,be=fe.y+fe.height/2,Me,Pe;W.dimensions.length>1&&ue.displayInd===W.dimensions.length-1?(Me=fe.left,Pe="left"):(Me=fe.left+fe.width,Pe="right");var Ge=pe.model.categoryLabel,ze=de.parcatsViewModel.model.count,Qe=0;de.categoryViewModel.bands.forEach(function(Mt){Mt.color===de.color&&(Qe+=Mt.count)});var tt=pe.model.count,Ce=0;W.pathSelection.each(function(Mt){Mt.model.color===de.color&&(Ce+=Mt.model.count)});var Ae=Qe/ze,Be=Qe/Ce,qe=Qe/tt,Tt={countLabel:ze,categoryLabel:Ge,probabilityLabel:Ae.toFixed(3)},At=[];pe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&At.push(["Count:",Tt.countLabel].join(" ")),pe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(At.push("P(color \u2229 "+Ge+"): "+Tt.probabilityLabel),At.push("P("+Ge+" | color): "+Be.toFixed(3)),At.push("P(color | "+Ge+"): "+qe.toFixed(3)));var Ne=At.join("<br>"),ct=n.mostReadable(de.color,["black","white"]);return{trace:me,x:ee*(Me-oe.left),y:ae*(be-oe.top),text:Ne,color:de.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:ct,fontSize:10,idealAlign:Pe,hovertemplate:me.hovertemplate,hovertemplateLabels:Tt,eventData:[{data:me._input,fullData:me,category:Ge,count:ze,probability:Ae,categorycount:tt,colorcount:Ce,bandcolorcount:Qe}]}}function G(H){if(!H.parcatsViewModel.dragDimension&&H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var oe=r.mouse(this)[1];if(oe<-1)return;var re=H.parcatsViewModel.graphDiv,ee=re._fullLayout,ae=ee._paperdiv.node().getBoundingClientRect(),fe=H.parcatsViewModel.hoveron,de=this;if(fe==="color"?(E(de),C(de,"plotly_hover",r.event)):(I(de),k(de,"plotly_hover",r.event)),H.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var pe;fe==="category"?pe=D(re,ae,de):fe==="color"?pe=N(re,ae,de):fe==="dimension"&&(pe=F(re,ae,de)),pe&&u.loneHover(pe,{container:ee._hoverlayer.node(),outerContainer:ee._paper.node(),gd:re})}}}function U(H){var oe=H.parcatsViewModel;if(!oe.dragDimension&&(x(oe.pathSelection),T(oe.dimensionSelection.selectAll("g.category")),P(oe.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),u.loneUnhover(oe.graphDiv._fullLayout._hoverlayer.node()),oe.pathSelection.sort(s),oe.hoverinfoItems.indexOf("skip")===-1)){var re=H.parcatsViewModel.hoveron,ee=this;re==="color"?C(ee,"plotly_unhover",r.event):k(ee,"plotly_unhover",r.event)}}function X(H){H.parcatsViewModel.arrangement!=="fixed"&&(H.dragDimensionDisplayInd=H.model.displayInd,H.initialDragDimensionDisplayInds=H.parcatsViewModel.model.dimensions.map(function(oe){return oe.displayInd}),H.dragHasMoved=!1,H.dragCategoryDisplayInd=null,r.select(this).selectAll("g.category").select("rect.catrect").each(function(oe){var re=r.mouse(this)[0],ee=r.mouse(this)[1];-2<=re&&re<=oe.width+2&&-2<=ee&&ee<=oe.height+2&&(H.dragCategoryDisplayInd=oe.model.displayInd,H.initialDragCategoryDisplayInds=H.model.categories.map(function(ae){return ae.displayInd}),oe.model.dragY=oe.y,c.raiseToTop(this.parentNode),r.select(this.parentNode).selectAll("rect.bandrect").each(function(ae){ae.y<ee&&ee<=ae.y+ae.height&&(H.potentialClickBand=this)}))}),H.parcatsViewModel.dragDimension=H,u.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function z(H){if(H.parcatsViewModel.arrangement!=="fixed"&&(H.dragHasMoved=!0,H.dragDimensionDisplayInd!==null)){var oe=H.dragDimensionDisplayInd,re=oe-1,ee=oe+1,ae=H.parcatsViewModel.dimensions[oe];if(H.dragCategoryDisplayInd!==null){var fe=ae.categories[H.dragCategoryDisplayInd];fe.model.dragY+=r.event.dy;var de=fe.model.dragY,pe=fe.model.displayInd,W=ae.categories,ue=W[pe-1],me=W[pe+1];ue!==void 0&&de<ue.y+ue.height/2&&(fe.model.displayInd=ue.model.displayInd,ue.model.displayInd=pe),me!==void 0&&de+fe.height>me.y+me.height/2&&(fe.model.displayInd=me.model.displayInd,me.model.displayInd=pe),H.dragCategoryDisplayInd=fe.model.displayInd}if(H.dragCategoryDisplayInd===null||H.parcatsViewModel.arrangement==="freeform"){ae.model.dragX=r.event.x;var be=H.parcatsViewModel.dimensions[re],Me=H.parcatsViewModel.dimensions[ee];be!==void 0&&ae.model.dragX<be.x+be.width&&(ae.model.displayInd=be.model.displayInd,be.model.displayInd=oe),Me!==void 0&&ae.model.dragX+ae.width>Me.x&&(ae.model.displayInd=Me.model.displayInd,Me.model.displayInd=H.dragDimensionDisplayInd),H.dragDimensionDisplayInd=ae.model.displayInd}se(H.parcatsViewModel),ie(H.parcatsViewModel),K(H.parcatsViewModel),V(H.parcatsViewModel)}}function B(H){if(H.parcatsViewModel.arrangement!=="fixed"&&H.dragDimensionDisplayInd!==null){r.select(this).selectAll("text").attr("font-weight","normal");var oe={},re=j(H.parcatsViewModel),ee=H.parcatsViewModel.model.dimensions.map(function(Me){return Me.displayInd}),ae=H.initialDragDimensionDisplayInds.some(function(Me,Pe){return Me!==ee[Pe]});ae&&ee.forEach(function(Me,Pe){var Ge=H.parcatsViewModel.model.dimensions[Pe].containerInd;oe["dimensions["+Ge+"].displayindex"]=Me});var fe=!1;if(H.dragCategoryDisplayInd!==null){var de=H.model.categories.map(function(Me){return Me.displayInd});if(fe=H.initialDragCategoryDisplayInds.some(function(Me,Pe){return Me!==de[Pe]}),fe){var pe=H.model.categories.slice().sort(function(Me,Pe){return Me.displayInd-Pe.displayInd}),W=pe.map(function(Me){return Me.categoryValue}),ue=pe.map(function(Me){return Me.categoryLabel});oe["dimensions["+H.model.containerInd+"].categoryarray"]=[W],oe["dimensions["+H.model.containerInd+"].ticktext"]=[ue],oe["dimensions["+H.model.containerInd+"].categoryorder"]="array"}}if(H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!H.dragHasMoved&&H.potentialClickBand&&(H.parcatsViewModel.hoveron==="color"?C(H.potentialClickBand,"plotly_click",r.event.sourceEvent):k(H.potentialClickBand,"plotly_click",r.event.sourceEvent)),H.model.dragX=null,H.dragCategoryDisplayInd!==null){var me=H.parcatsViewModel.dimensions[H.dragDimensionDisplayInd].categories[H.dragCategoryDisplayInd];me.model.dragY=null,H.dragCategoryDisplayInd=null}H.dragDimensionDisplayInd=null,H.parcatsViewModel.dragDimension=null,H.dragHasMoved=null,H.potentialClickBand=null,se(H.parcatsViewModel),ie(H.parcatsViewModel);var be=r.transition().duration(300).ease("cubic-in-out");be.each(function(){K(H.parcatsViewModel,!0),V(H.parcatsViewModel,!0)}).each("end",function(){(ae||fe)&&a.restyle(H.parcatsViewModel.graphDiv,oe,[re])})}}function j(H){for(var oe,re=H.graphDiv._fullData,ee=0;ee<re.length;ee++)if(H.key===re[ee].uid){oe=ee;break}return oe}function V(H,oe){oe===void 0&&(oe=!1);function re(ee){return oe?ee.transition():ee}H.pathSelection.data(function(ee){return ee.paths},h),re(H.pathSelection).attr("d",function(ee){return ee.svgD})}function K(H,oe){oe===void 0&&(oe=!1);function re(W){return oe?W.transition():W}H.dimensionSelection.data(function(W){return W.dimensions},h);var ee=H.dimensionSelection.selectAll("g.category").data(function(W){return W.categories},h);re(H.dimensionSelection).attr("transform",function(W){return t(W.x,0)}),re(ee).attr("transform",function(W){return t(0,W.y)});var ae=ee.select(".dimlabel");ae.text(function(W,ue){return ue===0?W.parcatsViewModel.model.dimensions[W.model.dimensionInd].dimensionLabel:null});var fe=ee.select(".catlabel");fe.attr("text-anchor",function(W){return i(W)?"start":"end"}).attr("x",function(W){return i(W)?W.width+5:-5}).each(function(W){var ue,me;i(W)?(ue=W.width+5,me="start"):(ue=-5,me="end"),r.select(this).selectAll("tspan").attr("x",ue).attr("text-anchor",me)});var de=ee.selectAll("rect.bandrect").data(function(W){return W.bands},h),pe=de.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(W){return W.color}).attr("fill-opacity",0);de.attr("fill",function(W){return W.color}).attr("width",function(W){return W.width}).attr("height",function(W){return W.height}).attr("y",function(W){return W.y}),P(pe),de.each(function(){c.raiseToTop(this)}),de.exit().remove()}function te(H,oe,re){var ee=re[0],ae=oe.margin||{l:80,r:80,t:100,b:80},fe=ee.trace,de=fe.domain,pe=oe.width,W=oe.height,ue=Math.floor(pe*(de.x[1]-de.x[0])),me=Math.floor(W*(de.y[1]-de.y[0])),be=de.x[0]*pe+ae.l,Me=oe.height-de.y[1]*oe.height+ae.t,Pe=fe.line.shape,Ge;fe.hoverinfo==="all"?Ge=["count","probability"]:Ge=(fe.hoverinfo||"").split("+");var ze={trace:fe,key:fe.uid,model:ee,x:be,y:Me,width:ue,height:me,hoveron:fe.hoveron,hoverinfoItems:Ge,arrangement:fe.arrangement,bundlecolors:fe.bundlecolors,sortpaths:fe.sortpaths,labelfont:fe.labelfont,categorylabelfont:fe.tickfont,pathShape:Pe,dragDimension:null,margin:ae,paths:[],dimensions:[],graphDiv:H,traceSelection:null,pathSelection:null,dimensionSelection:null};return ee.dimensions&&(se(ze),ie(ze)),ze}function $(H,oe,re,ee,ae){var fe=[],de=[],pe,W;for(W=0;W<re.length-1;W++)pe=r.interpolateNumber(re[W]+H[W],H[W+1]),fe.push(pe(ae)),de.push(pe(1-ae));var ue="M "+H[0]+","+oe[0];for(ue+="l"+re[0]+",0 ",W=1;W<re.length;W++)ue+="C"+fe[W-1]+","+oe[W-1]+" "+de[W-1]+","+oe[W]+" "+H[W]+","+oe[W],ue+="l"+re[W]+",0 ";for(ue+="l0,"+ee+" ",ue+="l -"+re[re.length-1]+",0 ",W=re.length-2;W>=0;W--)ue+="C"+de[W]+","+(oe[W+1]+ee)+" "+fe[W]+","+(oe[W]+ee)+" "+(H[W]+re[W])+","+(oe[W]+ee),ue+="l-"+re[W]+",0 ";return ue+="Z",ue}function ie(H){var oe=H.dimensions,re=H.model,ee=oe.map(function(zt){return zt.categories.map(function($t){return $t.y})}),ae=H.model.dimensions.map(function(zt){return zt.categories.map(function($t){return $t.displayInd})}),fe=H.model.dimensions.map(function(zt){return zt.displayInd}),de=H.dimensions.map(function(zt){return zt.model.dimensionInd}),pe=oe.map(function(zt){return zt.x}),W=oe.map(function(zt){return zt.width}),ue=[];for(var me in re.paths)re.paths.hasOwnProperty(me)&&ue.push(re.paths[me]);function be(zt){var $t=zt.categoryInds.map(function(Lt,Ct){return ae[Ct][Lt]}),rr=de.map(function(Lt){return $t[Lt]});return rr}ue.sort(function(zt,$t){var rr=be(zt),Lt=be($t);return H.sortpaths==="backward"&&(rr.reverse(),Lt.reverse()),rr.push(zt.valueInds[0]),Lt.push($t.valueInds[0]),H.bundlecolors&&(rr.unshift(zt.rawColor),Lt.unshift($t.rawColor)),rr<Lt?-1:rr>Lt?1:0});for(var Me=new Array(ue.length),Pe=oe[0].model.count,Ge=oe[0].categories.map(function(zt){return zt.height}).reduce(function(zt,$t){return zt+$t}),ze=0;ze<ue.length;ze++){var Qe=ue[ze],tt;Pe>0?tt=Ge*(Qe.count/Pe):tt=0;for(var Ce=new Array(ee.length),Ae=0;Ae<Qe.categoryInds.length;Ae++){var Be=Qe.categoryInds[Ae],qe=ae[Ae][Be],Tt=fe[Ae];Ce[Tt]=ee[Tt][qe],ee[Tt][qe]+=tt;var At=H.dimensions[Tt].categories[qe],Ne=At.bands.length,ct=At.bands[Ne-1];if(ct===void 0||Qe.rawColor!==ct.rawColor){var Mt=ct===void 0?0:ct.y+ct.height;At.bands.push({key:Mt,color:Qe.color,rawColor:Qe.rawColor,height:tt,width:At.width,count:Qe.count,y:Mt,categoryViewModel:At,parcatsViewModel:H})}else{var Wt=At.bands[Ne-1];Wt.height+=tt,Wt.count+=Qe.count}}var qt;H.pathShape==="hspline"?qt=$(pe,Ce,W,tt,.5):qt=$(pe,Ce,W,tt,0),Me[ze]={key:Qe.valueInds[0],model:Qe,height:tt,leftXs:pe,topYs:Ce,dimWidths:W,svgD:qt,parcatsViewModel:H}}H.paths=Me}function se(H){var oe=H.model.dimensions.map(function(de){return{displayInd:de.displayInd,dimensionInd:de.dimensionInd}});oe.sort(function(de,pe){return de.displayInd-pe.displayInd});var re=[];for(var ee in oe){var ae=oe[ee].dimensionInd,fe=H.model.dimensions[ae];re.push(Q(H,fe))}H.dimensions=re}function Q(H,oe){var re=40,ee=16,ae=H.model.dimensions.length,fe=oe.displayInd,de,pe,W;ae>1?de=(H.width-2*re-ee)/(ae-1):de=0,pe=re,W=pe+de*fe;var ue=[],me=H.model.maxCats,be=oe.categories.length,Me=8,Pe=oe.count,Ge=H.height-Me*(me-1),ze,Qe,tt,Ce,Ae,Be=(me-be)*Me/2,qe=oe.categories.map(function(Tt){return{displayInd:Tt.displayInd,categoryInd:Tt.categoryInd}});for(qe.sort(function(Tt,At){return Tt.displayInd-At.displayInd}),Ae=0;Ae<be;Ae++)Ce=qe[Ae].categoryInd,Qe=oe.categories[Ce],Pe>0?ze=Qe.count/Pe*Ge:ze=0,tt={key:Qe.valueInds[0],model:Qe,width:ee,height:ze,y:Qe.dragY!==null?Qe.dragY:Be,bands:[],parcatsViewModel:H},Be=Be+ze+Me,ue.push(tt);return{key:oe.dimensionInd,x:oe.dragX!==null?oe.dragX:W,y:0,width:ee,model:oe,categories:ue,parcatsViewModel:H,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":665,"../../components/fx":683,"../../lib":778,"../../lib/svg_text_utils":803,"../../plot_api/plot_api":814,d3:169,tinycolor2:576}],1148:[function(e,v,S){var r=e("./parcats");v.exports=function(u,c,t,f){var n=u._fullLayout,o=n._paper,l=n._size;r(u,o,c,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},t,f)}},{"./parcats":1147}],1149:[function(e,v,S){var r=e("../../components/colorscale/attributes"),a=e("../../plots/cartesian/layout_attributes"),u=e("../../plots/font_attributes"),c=e("../../plots/domain").attributes,t=e("../../lib/extend").extendFlat,f=e("../../plot_api/plot_template").templatedArray;v.exports={domain:c({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:u({editType:"plot"}),tickfont:u({editType:"plot"}),rangefont:u({editType:"plot"}),dimensions:f("dimension",{label:{valType:"string",editType:"plot"},tickvals:t({},a.tickvals,{editType:"plot"}),ticktext:t({},a.ticktext,{editType:"plot"}),tickformat:t({},a.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:t({editType:"calc"},r("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/plot_template":817,"../../plots/cartesian/layout_attributes":842,"../../plots/domain":855,"../../plots/font_attributes":856}],1150:[function(e,v,S){var r=e("./constants"),a=e("d3"),u=e("../../lib/gup").keyFun,c=e("../../lib/gup").repeat,t=e("../../lib").sorterAsc,f=e("../../lib").strTranslate,n=r.bar.snapRatio;function o(j,V){return j*(1-n)+V*n}var l=r.bar.snapClose;function h(j,V){return j*(1-l)+V*l}function i(j,V,K,te){if(s(K,te))return K;var $=j?-1:1,ie=0,se=V.length-1;if($<0){var Q=ie;ie=se,se=Q}for(var H=V[ie],oe=H,re=ie;$*re<$*se;re+=$){var ee=re+$,ae=V[ee];if($*K<$*h(H,ae))return o(H,oe);if($*K<$*ae||ee===se)return o(ae,H);oe=H,H=ae}}function s(j,V){for(var K=0;K<V.length;K++)if(j>=V[K][0]&&j<=V[K][1])return!0;return!1}function p(j){j.attr("x",-r.bar.captureWidth/2).attr("width",r.bar.captureWidth)}function d(j){j.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function g(j){if(!j.brush.filterSpecified)return"0,"+j.height;for(var V=b(j.brush.filter.getConsolidated(),j.height),K=[0],te,$,ie,se=V.length?V[0][0]:null,Q=0;Q<V.length;Q++)te=V[Q],$=te[1]-te[0],K.push(se),K.push($),ie=Q+1,ie<V.length&&(se=V[ie][0]-te[1]);return K.push(j.height),K}function b(j,V){return j.map(function(K){return K.map(function(te){return Math.max(0,te*V)}).sort(t)})}function m(j,V){var K=r.bar.handleHeight;if(!(V>j[1]+K||V<j[0]-K))return V>=.9*j[1]+.1*j[0]?"n":V<=.9*j[0]+.1*j[1]?"s":"ns"}function x(){a.select(document.body).style("cursor",null)}function w(j){j.attr("stroke-dasharray",g)}function y(j,V){var K=a.select(j).selectAll(".highlight, .highlight-shadow"),te=V?K.transition().duration(r.bar.snapDuration).each("end",V):K;w(te)}function T(j,V){var K=j.brush,te=K.filterSpecified,$=NaN,ie={},se;if(te){var Q=j.height,H=K.filter.getConsolidated(),oe=b(H,Q),re=NaN,ee=NaN,ae=NaN;for(se=0;se<=oe.length;se++){var fe=oe[se];if(fe&&fe[0]<=V&&V<=fe[1]){re=se;break}else if(ee=se?se-1:NaN,fe&&fe[0]>V){ae=se;break}}if($=re,isNaN($)&&(isNaN(ee)||isNaN(ae)?$=isNaN(ee)?ae:ee:$=V-oe[ee][1]<oe[ae][0]-V?ee:ae),!isNaN($)){var de=oe[$],pe=m(de,V);pe&&(ie.interval=H[$],ie.intervalPix=de,ie.region=pe)}}if(j.ordinal&&!ie.region){var W=j.unitTickvals,ue=j.unitToPaddedPx.invert(V);for(se=0;se<W.length;se++){var me=[W[Math.max(se-1,0)]*.25+W[se]*.75,W[Math.min(se+1,W.length-1)]*.25+W[se]*.75];if(ue>=me[0]&&ue<=me[1]){ie.clickableOrdinalRange=me;break}}}return ie}function M(j,V){a.event.sourceEvent.stopPropagation();var K=V.height-a.mouse(j)[1]-2*r.verticalPadding,te=V.unitToPaddedPx.invert(K),$=V.brush,ie=T(V,K),se=ie.interval,Q=$.svgBrush;if(Q.wasDragged=!1,Q.grabbingBar=ie.region==="ns",Q.grabbingBar){var H=se.map(V.unitToPaddedPx);Q.grabPoint=K-H[0]-r.verticalPadding,Q.barLength=H[1]-H[0]}Q.clickableOrdinalRange=ie.clickableOrdinalRange,Q.stayingIntervals=V.multiselect&&$.filterSpecified?$.filter.getConsolidated():[],se&&(Q.stayingIntervals=Q.stayingIntervals.filter(function(oe){return oe[0]!==se[0]&&oe[1]!==se[1]})),Q.startExtent=ie.region?se[ie.region==="s"?1:0]:te,V.parent.inBrushDrag=!0,Q.brushStartCallback()}function P(j,V){a.event.sourceEvent.stopPropagation();var K=V.height-a.mouse(j)[1]-2*r.verticalPadding,te=V.brush.svgBrush;te.wasDragged=!0,te._dragging=!0,te.grabbingBar?te.newExtent=[K-te.grabPoint,K+te.barLength-te.grabPoint].map(V.unitToPaddedPx.invert):te.newExtent=[te.startExtent,V.unitToPaddedPx.invert(K)].sort(t),V.brush.filterSpecified=!0,te.extent=te.stayingIntervals.concat([te.newExtent]),te.brushCallback(V),y(j.parentNode)}function L(j,V){var K=V.brush,te=K.filter,$=K.svgBrush;$._dragging||(I(j,V),P(j,V),V.brush.svgBrush.wasDragged=!1),$._dragging=!1;var ie=a.event;ie.sourceEvent.stopPropagation();var se=$.grabbingBar;if($.grabbingBar=!1,$.grabLocation=void 0,V.parent.inBrushDrag=!1,x(),!$.wasDragged){$.wasDragged=void 0,$.clickableOrdinalRange?K.filterSpecified&&V.multiselect?$.extent.push($.clickableOrdinalRange):($.extent=[$.clickableOrdinalRange],K.filterSpecified=!0):se?($.extent=$.stayingIntervals,$.extent.length===0&&N(K)):N(K),$.brushCallback(V),y(j.parentNode),$.brushEndCallback(K.filterSpecified?te.getConsolidated():[]);return}var Q=function(){te.set(te.getConsolidated())};if(V.ordinal){var H=V.unitTickvals;H[H.length-1]<H[0]&&H.reverse(),$.newExtent=[i(0,H,$.newExtent[0],$.stayingIntervals),i(1,H,$.newExtent[1],$.stayingIntervals)];var oe=$.newExtent[1]>$.newExtent[0];$.extent=$.stayingIntervals.concat(oe?[$.newExtent]:[]),$.extent.length||N(K),$.brushCallback(V),oe?y(j.parentNode,Q):(Q(),y(j.parentNode))}else Q();$.brushEndCallback(K.filterSpecified?te.getConsolidated():[])}function I(j,V){var K=V.height-a.mouse(j)[1]-2*r.verticalPadding,te=T(V,K),$="crosshair";te.clickableOrdinalRange?$="pointer":te.region&&($=te.region+"-resize"),a.select(document.body).style("cursor",$)}function E(j){j.on("mousemove",function(V){a.event.preventDefault(),V.parent.inBrushDrag||I(this,V)}).on("mouseleave",function(V){V.parent.inBrushDrag||x()}).call(a.behavior.drag().on("dragstart",function(V){M(this,V)}).on("drag",function(V){P(this,V)}).on("dragend",function(V){L(this,V)}))}function k(j,V){return j[0]-V[0]}function C(j){var V=j.selectAll(".background").data(c);V.enter().append("rect").classed("background",!0).call(p).call(d).style("pointer-events","auto").attr("transform",f(0,r.verticalPadding)),V.call(E).attr("height",function($){return $.height-r.verticalPadding});var K=j.selectAll(".highlight-shadow").data(c);K.enter().append("line").classed("highlight-shadow",!0).attr("x",-r.bar.width/2).attr("stroke-width",r.bar.width+r.bar.strokeWidth).attr("stroke",r.bar.strokeColor).attr("opacity",r.bar.strokeOpacity).attr("stroke-linecap","butt"),K.attr("y1",function($){return $.height}).call(w);var te=j.selectAll(".highlight").data(c);te.enter().append("line").classed("highlight",!0).attr("x",-r.bar.width/2).attr("stroke-width",r.bar.width-r.bar.strokeWidth).attr("stroke",r.bar.fillColor).attr("opacity",r.bar.fillOpacity).attr("stroke-linecap","butt"),te.attr("y1",function($){return $.height}).call(w)}function D(j){var V=j.selectAll("."+r.cn.axisBrush).data(c,u);V.enter().append("g").classed(r.cn.axisBrush,!0),C(V)}function F(j){return j.svgBrush.extent.map(function(V){return V.slice()})}function N(j){j.filterSpecified=!1,j.svgBrush.extent=[[-1/0,1/0]]}function G(j){return function(K){var te=K.brush,$=F(te),ie=$.slice();te.filter.set(ie),j()}}function U(j){for(var V=j.slice(),K=[],te,$=V.shift();$;){for(te=$.slice();($=V.shift())&&$[0]<=te[1];)te[1]=Math.max(te[1],$[1]);K.push(te)}return K.length===1&&K[0][0]>K[0][1]&&(K=[]),K}function X(){var j=[],V,K;return{set:function(te){j=te.map(function($){return $.slice().sort(t)}).sort(k),j.length===1&&j[0][0]===-1/0&&j[0][1]===1/0&&(j=[[0,-1]]),V=U(j),K=j.reduce(function($,ie){return[Math.min($[0],ie[0]),Math.max($[1],ie[1])]},[1/0,-1/0])},get:function(){return j.slice()},getConsolidated:function(){return V},getBounds:function(){return K}}}function z(j,V,K,te,$,ie){var se=X();return se.set(K),{filter:se,filterSpecified:V,svgBrush:{extent:[],brushStartCallback:te,brushCallback:G($),brushEndCallback:ie}}}function B(j,V){if(Array.isArray(j[0])?(j=j.map(function(te){return te.sort(t)}),V.multiselect?j=U(j.sort(k)):j=[j[0]]):j=[j.sort(t)],V.tickvals){var K=V.tickvals.slice().sort(t);if(j=j.map(function(te){var $=[i(0,K,te[0],[]),i(1,K,te[1],[])];if($[1]>$[0])return $}).filter(function(te){return te}),!j.length)return}return j.length>1?j:j[0]}v.exports={makeBrush:z,ensureAxisBrush:D,cleanRanges:B}},{"../../lib":778,"../../lib/gup":775,"./constants":1153,d3:169}],1151:[function(e,v,S){var r=e("d3"),a=e("../../plots/get_data").getModuleCalcData,u=e("./plot"),c=e("../../constants/xmlns_namespaces");S.name="parcoords",S.plot=function(t){var f=a(t.calcdata,"parcoords")[0];f.length&&u(t,f)},S.clean=function(t,f,n,o){var l=o._has&&o._has("parcoords"),h=f._has&&f._has("parcoords");l&&!h&&(o._paperdiv.selectAll(".parcoords").remove(),o._glimages.selectAll("*").remove())},S.toSVG=function(t){var f=t._fullLayout._glimages,n=r.select(t).selectAll(".svg-container"),o=n.filter(function(h,i){return i===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function l(){var h=this,i=h.toDataURL("image/png"),s=f.append("svg:image");s.attr({xmlns:c.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:h.width,height:h.height})}o.each(l),window.setTimeout(function(){r.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":754,"../../plots/get_data":865,"./plot":1160,d3:169}],1152:[function(e,v,S){var r=e("../../lib").isArrayOrTypedArray,a=e("../../components/colorscale"),u=e("../../lib/gup").wrap;v.exports=function(f,n){var o,l;return a.hasColorscale(n,"line")&&r(n.line.color)?(o=n.line.color,l=a.extractOpts(n.line).colorscale,a.calc(f,n,{vals:o,containerStr:"line",cLetter:"c"})):(o=c(n._length),l=[[0,n.line.color],[1,n.line.color]]),u({lineColor:o,cscale:l})};function c(t){for(var f=new Array(t),n=0;n<t;n++)f[n]=.5;return f}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gup":775}],1153:[function(e,v,S){v.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1154:[function(e,v,S){var r=e("../../lib"),a=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults"),c=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),f=e("../../plots/cartesian/axes"),n=e("./attributes"),o=e("./axisbrush"),l=e("./constants").maxDimensionCount,h=e("./merge_length");function i(p,d,g,b,m){var x=m("line.color",g);if(a(p,"line")&&r.isArrayOrTypedArray(x)){if(x.length)return m("line.colorscale"),u(p,d,b,m,{prefix:"line.",cLetter:"c"}),x.length;d.line.color=g}return 1/0}function s(p,d,g,b){function m(M,P){return r.coerce(p,d,n.dimensions,M,P)}var x=m("values"),w=m("visible");if(x&&x.length||(w=d.visible=!1),w){m("label"),m("tickvals"),m("ticktext"),m("tickformat");var y=m("range");d._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:y},f.setConvert(d._ax,b.layout),m("multiselect");var T=m("constraintrange");T&&(d.constraintrange=o.cleanRanges(T,d))}}v.exports=function(d,g,b,m){function x(P,L){return r.coerce(d,g,n,P,L)}var w=d.dimensions;Array.isArray(w)&&w.length>l&&(r.log("parcoords traces support up to "+l+" dimensions at the moment"),w.splice(l));var y=t(d,g,{name:"dimensions",layout:m,handleItemDefaults:s}),T=i(d,g,b,m,x);c(g,m,x),(!Array.isArray(y)||!y.length)&&(g.visible=!1),h(g,y,"values",T);var M={family:m.font.family,size:Math.round(m.font.size/1.2),color:m.font.color};r.coerceFont(x,"labelfont",M),r.coerceFont(x,"tickfont",M),r.coerceFont(x,"rangefont",M),x("labelangle"),x("labelside")}},{"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"../../plots/domain":855,"./attributes":1149,"./axisbrush":1150,"./constants":1153,"./merge_length":1158}],1155:[function(e,v,S){var r=e("../../lib").isTypedArray;S.convertTypedArray=function(a){return r(a)?Array.prototype.slice.call(a):a},S.isOrdinal=function(a){return!!a.tickvals},S.isVisible=function(a){return a.visible||!("visible"in a)}},{"../../lib":778}],1156:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":1149,"./base_plot":1151,"./calc":1152,"./defaults":1154,"./plot":1160}],1157:[function(e,v,S){var r=e("glslify"),a=r([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform sampler2D mask, palette;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(mask,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),u=r([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),c=e("./constants").maxDimensionCount,t=e("../../lib"),f=1e-6,n=2048,o=new Uint8Array(4),l=new Uint8Array(4),h={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(I){I.read({x:0,y:0,width:1,height:1,data:o})}function s(I,E,k,C,D){var F=I._gl;F.enable(F.SCISSOR_TEST),F.scissor(E,k,C,D),I.clear({color:[0,0,0,0],depth:1})}function p(I,E,k,C,D,F){var N=F.key;function G(U){var X=Math.min(C,D-U*C);U===0&&(window.cancelAnimationFrame(k.currentRafs[N]),delete k.currentRafs[N],s(I,F.scissorX,F.scissorY,F.scissorWidth,F.viewBoxSize[1])),!k.clearOnly&&(F.count=2*X,F.offset=2*U*C,E(F),U*C+X<D&&(k.currentRafs[N]=window.requestAnimationFrame(function(){G(U+1)})),k.drawCompleted=!1)}k.drawCompleted||(i(I),k.drawCompleted=!0),G(0)}function d(I){return Math.max(f,Math.min(1-f,I))}function g(I,E){for(var k=new Array(256),C=0;C<256;C++)k[C]=I(C/255).concat(E);return k}function b(I,E){return(I>>>8*E)%256/255}function m(I,E,k){for(var C=new Array(I*(c+4)),D=0,F=0;F<I;F++){for(var N=0;N<c;N++)C[D++]=N<E.length?E[N].paddedUnitValues[F]:.5;C[D++]=b(F,2),C[D++]=b(F,1),C[D++]=b(F,0),C[D++]=d(k[F])}return C}function x(I,E,k){for(var C=new Array(E*8),D=0,F=0;F<E;F++)for(var N=0;N<2;N++)for(var G=0;G<4;G++){var U=I*4+G,X=k[F*64+U];U===63&&N===0&&(X*=-1),C[D++]=X}return C}function w(I){var E="0"+I;return E.substr(E.length-2)}function y(I){return I<c?"p"+w(I+1)+"_"+w(I+4):"colors"}function T(I,E,k){for(var C=0;C<=c;C+=4)I[y(C)](x(C/4,E,k))}function M(I){for(var E={},k=0;k<=c;k+=4)E[y(k)]=I.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return E}function P(I,E,k,C,D,F,N,G,U,X,z,B,j){for(var V=[[],[]],K=0;K<64;K++)V[0][K]=K===D?1:0,V[1][K]=K===F?1:0;var te=I.lines.canvasOverdrag,$=I.domain,ie=I.canvasWidth,se=I.canvasHeight,Q=I.deselectedLines.color,H=t.extendFlat({key:z,resolution:[ie,se],viewBoxPos:[N+te,G],viewBoxSize:[U,X],i0:D,i1:F,dim0A:V[0].slice(0,16),dim0B:V[0].slice(16,32),dim0C:V[0].slice(32,48),dim0D:V[0].slice(48,64),dim1A:V[1].slice(0,16),dim1B:V[1].slice(16,32),dim1C:V[1].slice(32,48),dim1D:V[1].slice(48,64),drwLayer:B,contextColor:[Q[0]/255,Q[1]/255,Q[2]/255,Q[3]<1?Q[3]:Math.max(1/255,Math.pow(1/I.lines.color.length,1/3))],scissorX:(C===E?0:N+te)+(I.pad.l-te)+I.layoutWidth*$.x[0],scissorWidth:(C===k?ie-N+te:U+.5)+(C===E?N+te:0),scissorY:G+I.pad.b+I.layoutHeight*$.y[0],scissorHeight:X,viewportX:I.pad.l-te+I.layoutWidth*$.x[0],viewportY:I.pad.b+I.layoutHeight*$.y[0],viewportWidth:ie,viewportHeight:se},j);return H}function L(I){var E=n-1,k=Math.max(0,Math.floor(I[0]*E),0),C=Math.min(E,Math.ceil(I[1]*E),E);return[Math.min(k,C),Math.max(k,C)]}v.exports=function(I,E){var k=E.context,C=E.pick,D=E.regl,F={currentRafs:{},drawCompleted:!0,clearOnly:!1},N,G,U,X,z=M(D),B,j=D.texture(h),V=[];te(E);var K=D({profile:!1,blend:{enable:k,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!k,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:D.prop("scissorX"),y:D.prop("scissorY"),width:D.prop("scissorWidth"),height:D.prop("scissorHeight")}},viewport:{x:D.prop("viewportX"),y:D.prop("viewportY"),width:D.prop("viewportWidth"),height:D.prop("viewportHeight")},dither:!1,vert:a,frag:u,primitive:"lines",lineWidth:1,attributes:z,uniforms:{resolution:D.prop("resolution"),viewBoxPos:D.prop("viewBoxPos"),viewBoxSize:D.prop("viewBoxSize"),dim0A:D.prop("dim0A"),dim1A:D.prop("dim1A"),dim0B:D.prop("dim0B"),dim1B:D.prop("dim1B"),dim0C:D.prop("dim0C"),dim1C:D.prop("dim1C"),dim0D:D.prop("dim0D"),dim1D:D.prop("dim1D"),loA:D.prop("loA"),hiA:D.prop("hiA"),loB:D.prop("loB"),hiB:D.prop("hiB"),loC:D.prop("loC"),hiC:D.prop("hiC"),loD:D.prop("loD"),hiD:D.prop("hiD"),palette:j,contextColor:D.prop("contextColor"),mask:D.prop("maskTexture"),drwLayer:D.prop("drwLayer"),maskHeight:D.prop("maskHeight")},offset:D.prop("offset"),count:D.prop("count")});function te(oe){N=oe.model,G=oe.viewModel,U=G.dimensions.slice(),X=U[0]?U[0].values.length:0;var re=N.lines,ee=C?re.color.map(function(fe,de){return de/re.color.length}):re.color,ae=m(X,U,ee);T(z,X,ae),!k&&!C&&(j=D.texture(t.extendFlat({data:g(N.unitToColor,255)},h)))}function $(oe){var re,ee,ae,fe=[[],[]];for(ae=0;ae<64;ae++){var de=!oe&&ae<U.length?U[ae].brush.filter.getBounds():[-1/0,1/0];fe[0][ae]=de[0],fe[1][ae]=de[1]}var pe=n*8,W=new Array(pe);for(re=0;re<pe;re++)W[re]=255;if(!oe)for(re=0;re<U.length;re++){var ue=re%8,me=(re-ue)/8,be=Math.pow(2,ue),Me=U[re],Pe=Me.brush.filter.get();if(!(Pe.length<2)){var Ge=L(Pe[0])[1];for(ee=1;ee<Pe.length;ee++){var ze=L(Pe[ee]);for(ae=Ge+1;ae<ze[0];ae++)W[ae*8+me]&=~be;Ge=Math.max(Ge,ze[1])}}}var Qe={shape:[8,n],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:W};return B?B(Qe):B=D.texture(Qe),{maskTexture:B,maskHeight:n,loA:fe[0].slice(0,16),loB:fe[0].slice(16,32),loC:fe[0].slice(32,48),loD:fe[0].slice(48,64),hiA:fe[1].slice(0,16),hiB:fe[1].slice(16,32),hiC:fe[1].slice(32,48),hiD:fe[1].slice(48,64)}}function ie(oe,re,ee){var ae=oe.length,fe,de,pe,W=1/0,ue=-1/0;for(fe=0;fe<ae;fe++)oe[fe].dim0.canvasX<W&&(W=oe[fe].dim0.canvasX,de=fe),oe[fe].dim1.canvasX>ue&&(ue=oe[fe].dim1.canvasX,pe=fe);ae===0&&s(D,0,0,N.canvasWidth,N.canvasHeight);var me=$(k);for(fe=0;fe<ae;fe++){var be=oe[fe],Me=be.dim0.crossfilterDimensionIndex,Pe=be.dim1.crossfilterDimensionIndex,Ge=be.canvasX,ze=be.canvasY,Qe=Ge+be.panelSizeX;if(re||!V[Me]||V[Me][0]!==Ge||V[Me][1]!==Qe){V[Me]=[Ge,Qe];var tt=P(N,de,pe,fe,Me,Pe,Ge,ze,be.panelSizeX,be.panelSizeY,be.dim0.crossfilterDimensionIndex,k?0:C?2:1,me);F.clearOnly=ee;var Ce=re?N.lines.blockLineCount:X;p(D,K,F,Ce,X,tt)}}}function se(oe,re){return D.read({x:oe,y:re,width:1,height:1,data:l}),l}function Q(oe,re,ee,ae){var fe=new Uint8Array(4*ee*ae);return D.read({x:oe,y:re,width:ee,height:ae,data:fe}),fe}function H(){I.style["pointer-events"]="none",j.destroy(),B&&B.destroy();for(var oe in z)z[oe].destroy()}return{render:ie,readPixel:se,readPixels:Q,destroy:H,update:te}}},{"../../lib":778,"./constants":1153,glslify:439}],1158:[function(e,v,S){v.exports=function(r,a,u,c){c||(c=1/0);var t,f;for(t=0;t<a.length;t++)f=a[t],f.visible&&(c=Math.min(c,f[u].length));for(c===1/0&&(c=0),r._length=c,t=0;t<a.length;t++)f=a[t],f.visible&&(f._length=c);return c}},{}],1159:[function(e,v,S){var r=e("d3"),a=e("color-rgba"),u=e("../../plots/cartesian/axes"),c=e("../../lib"),t=c.strRotate,f=c.strTranslate,n=e("../../lib/svg_text_utils"),o=e("../../components/drawing"),l=e("../../components/colorscale"),h=e("../../lib/gup"),i=h.keyFun,s=h.repeat,p=h.unwrap,d=e("./helpers"),g=e("./constants"),b=e("./axisbrush"),m=e("./lines");function x(V,K,te){return c.aggNums(V,null,K,te)}function w(V,K){return T(x(Math.min,V,K),x(Math.max,V,K))}function y(V){var K=V.range;return K?T(K[0],K[1]):w(V.values,V._length)}function T(V,K){return(isNaN(V)||!isFinite(V))&&(V=0),(isNaN(K)||!isFinite(K))&&(K=0),V===K&&(V===0?(V-=1,K+=1):(V*=.9,K*=1.1)),[V,K]}function M(V,K){return K?function(te,$){var ie=K[$];return ie==null?V(te):ie}:V}function P(V,K,te,$,ie){var se=y(te);return $?r.scale.ordinal().domain($.map(M(r.format(te.tickformat),ie))).range($.map(function(Q){var H=(Q-se[0])/(se[1]-se[0]);return V-K+H*(2*K-V)})):r.scale.linear().domain(se).range([V-K,K])}function L(V,K){return r.scale.linear().range([K,V-K])}function I(V,K){return r.scale.linear().domain(y(V)).range([K,1-K])}function E(V){if(!!V.tickvals){var K=y(V);return r.scale.ordinal().domain(V.tickvals).range(V.tickvals.map(function(te){return(te-K[0])/(K[1]-K[0])}))}}function k(V){var K=V.map(function(se){return se[0]}),te=V.map(function(se){var Q=a(se[1]);return r.rgb("rgb("+Q[0]+","+Q[1]+","+Q[2]+")")}),$=function(se){return function(Q){return Q[se]}},ie="rgb".split("").map(function(se){return r.scale.linear().clamp(!0).domain(K).range(te.map($(se)))});return function(se){return ie.map(function(Q){return Q(se)})}}function C(V){return V.dimensions.some(function(K){return K.brush.filterSpecified})}function D(V,K,te){var $=p(K),ie=$.trace,se=d.convertTypedArray($.lineColor),Q=ie.line,H={color:a(g.deselectedLineColor)},oe=l.extractOpts(Q),re=oe.reversescale?l.flipScale($.cscale):$.cscale,ee=ie.domain,ae=ie.dimensions,fe=V.width,de=ie.labelangle,pe=ie.labelside,W=ie.labelfont,ue=ie.tickfont,me=ie.rangefont,be=c.extendDeepNoArrays({},Q,{color:se.map(r.scale.linear().domain(y({values:se,range:[oe.min,oe.max],_length:ie._length}))),blockLineCount:g.blockLineCount,canvasOverdrag:g.overdrag*g.canvasPixelRatio}),Me=Math.floor(fe*(ee.x[1]-ee.x[0])),Pe=Math.floor(V.height*(ee.y[1]-ee.y[0])),Ge=V.margin||{l:80,r:80,t:100,b:80},ze=Me,Qe=Pe;return{key:te,colCount:ae.filter(d.isVisible).length,dimensions:ae,tickDistance:g.tickDistance,unitToColor:k(re),lines:be,deselectedLines:H,labelAngle:de,labelSide:pe,labelFont:W,tickFont:ue,rangeFont:me,layoutWidth:fe,layoutHeight:V.height,domain:ee,translateX:ee.x[0]*fe,translateY:V.height-ee.y[1]*V.height,pad:Ge,canvasWidth:ze*g.canvasPixelRatio+2*be.canvasOverdrag,canvasHeight:Qe*g.canvasPixelRatio,width:ze,height:Qe,canvasPixelRatio:g.canvasPixelRatio}}function F(V,K,te){var $=te.width,ie=te.height,se=te.dimensions,Q=te.canvasPixelRatio,H=function(fe){return $*fe/Math.max(1,te.colCount-1)},oe=g.verticalPadding/ie,re=L(ie,g.verticalPadding),ee={key:te.key,xScale:H,model:te,inBrushDrag:!1},ae={};return ee.dimensions=se.filter(d.isVisible).map(function(fe,de){var pe=I(fe,oe),W=ae[fe.label];ae[fe.label]=(W||0)+1;var ue=fe.label+(W?"__"+W:""),me=fe.constraintrange,be=me&&me.length;be&&!Array.isArray(me[0])&&(me=[me]);var Me=be?me.map(function(Tt){return Tt.map(pe)}):[[-1/0,1/0]],Pe=function(){var Tt=ee;Tt.focusLayer&&Tt.focusLayer.render(Tt.panels,!0);var At=C(Tt);!V.contextShown()&&At?(Tt.contextLayer&&Tt.contextLayer.render(Tt.panels,!0),V.contextShown(!0)):V.contextShown()&&!At&&(Tt.contextLayer&&Tt.contextLayer.render(Tt.panels,!0,!0),V.contextShown(!1))},Ge=fe.values;Ge.length>fe._length&&(Ge=Ge.slice(0,fe._length));var ze=fe.tickvals,Qe;function tt(Tt,At){return{val:Tt,text:Qe[At]}}function Ce(Tt,At){return Tt.val-At.val}if(Array.isArray(ze)&&ze.length){Qe=fe.ticktext,!Array.isArray(Qe)||!Qe.length?Qe=ze.map(r.format(fe.tickformat)):Qe.length>ze.length?Qe=Qe.slice(0,ze.length):ze.length>Qe.length&&(ze=ze.slice(0,Qe.length));for(var Ae=1;Ae<ze.length;Ae++)if(ze[Ae]<ze[Ae-1]){for(var Be=ze.map(tt).sort(Ce),qe=0;qe<ze.length;qe++)ze[qe]=Be[qe].val,Qe[qe]=Be[qe].text;break}}else ze=void 0;return Ge=d.convertTypedArray(Ge),{key:ue,label:fe.label,tickFormat:fe.tickformat,tickvals:ze,ticktext:Qe,ordinal:d.isOrdinal(fe),multiselect:fe.multiselect,xIndex:de,crossfilterDimensionIndex:de,visibleIndex:fe._index,height:ie,values:Ge,paddedUnitValues:Ge.map(pe),unitTickvals:ze&&ze.map(pe),xScale:H,x:H(de),canvasX:H(de)*Q,unitToPaddedPx:re,domainScale:P(ie,g.verticalPadding,fe,ze,Qe),ordinalScale:E(fe),parent:ee,model:te,brush:b.makeBrush(V,be,Me,function(){V.linePickActive(!1)},Pe,function(Tt){if(ee.focusLayer.render(ee.panels,!0),ee.pickLayer&&ee.pickLayer.render(ee.panels,!0),V.linePickActive(!0),K&&K.filterChanged){var At=pe.invert,Ne=Tt.map(function(ct){return ct.map(At).sort(c.sorterAsc)}).sort(function(ct,Mt){return ct[0]-Mt[0]});K.filterChanged(ee.key,fe._index,Ne)}})}}),ee}function N(V){V.classed(g.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function G(){var V=!0,K=!1;return{linePickActive:function(te){return arguments.length?V=!!te:V},contextShown:function(te){return arguments.length?K=!!te:K}}}function U(V,K){var te=K==="top"?1:-1,$=V*Math.PI/180,ie=Math.sin($),se=Math.cos($);return{dir:te,dx:ie,dy:se,degrees:V}}function X(V,K){for(var te=K.panels||(K.panels=[]),$=V.data(),ie=0;ie<$.length-1;ie++){var se=te[ie]||(te[ie]={}),Q=$[ie],H=$[ie+1];se.dim0=Q,se.dim1=H,se.canvasX=Q.canvasX,se.panelSizeX=H.canvasX-Q.canvasX,se.panelSizeY=K.model.canvasHeight,se.y=0,se.canvasY=0}}function z(V){for(var K=0;K<V.length;K++)for(var te=0;te<V[K].length;te++)for(var $=V[K][te].trace,ie=$.dimensions,se=0;se<ie.length;se++){var Q=ie[se].values,H=ie[se]._ax;H&&(H.range?H.range=T(H.range[0],H.range[1]):H.range=w(Q,$._length),H.dtick||(H.dtick=.01*(Math.abs(H.range[1]-H.range[0])||1)),H.tickformat=ie[se].tickformat,u.calcTicks(H),H.cleanRange())}}function B(V,K){return u.tickText(V._ax,K,!1).text}function j(V,K){if(V.ordinal)return"";var te=V.domainScale.domain(),$=te[K?te.length-1:0];return B(V.model.dimensions[V.visibleIndex],$)}v.exports=function(K,te,$,ie){var se=K._fullLayout,Q=se._toppaper,H=se._glcontainer;z(te);var oe=G(),re=te.filter(function(Ce){return p(Ce).trace.visible}).map(D.bind(0,$)).map(F.bind(0,oe,ie));H.each(function(Ce,Ae){return c.extendFlat(Ce,re[Ae])});var ee=H.selectAll(".gl-canvas").each(function(Ce){Ce.viewModel=re[0],Ce.model=Ce.viewModel?Ce.viewModel.model:null}),ae=null,fe=ee.filter(function(Ce){return Ce.pick});fe.style("pointer-events","auto").on("mousemove",function(Ce){if(oe.linePickActive()&&Ce.lineLayer&&ie&&ie.hover){var Ae=r.event,Be=this.width,qe=this.height,Tt=r.mouse(this),At=Tt[0],Ne=Tt[1];if(At<0||Ne<0||At>=Be||Ne>=qe)return;var ct=Ce.lineLayer.readPixel(At,qe-1-Ne),Mt=ct[3]!==0,Wt=Mt?ct[2]+256*(ct[1]+256*ct[0]):null,qt={x:At,y:Ne,clientX:Ae.clientX,clientY:Ae.clientY,dataIndex:Ce.model.key,curveNumber:Wt};Wt!==ae&&(Mt?ie.hover(qt):ie.unhover&&ie.unhover(qt),ae=Wt)}}),ee.style("opacity",function(Ce){return Ce.pick?0:1}),Q.style("background","rgba(255, 255, 255, 0)");var de=Q.selectAll("."+g.cn.parcoords).data(re,i);de.exit().remove(),de.enter().append("g").classed(g.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),de.attr("transform",function(Ce){return f(Ce.model.translateX,Ce.model.translateY)});var pe=de.selectAll("."+g.cn.parcoordsControlView).data(s,i);pe.enter().append("g").classed(g.cn.parcoordsControlView,!0),pe.attr("transform",function(Ce){return f(Ce.model.pad.l,Ce.model.pad.t)});var W=pe.selectAll("."+g.cn.yAxis).data(function(Ce){return Ce.dimensions},i);W.enter().append("g").classed(g.cn.yAxis,!0),pe.each(function(Ce){X(W,Ce)}),ee.each(function(Ce){if(Ce.viewModel){!Ce.lineLayer||ie?Ce.lineLayer=m(this,Ce):Ce.lineLayer.update(Ce),(Ce.key||Ce.key===0)&&(Ce.viewModel[Ce.key]=Ce.lineLayer);var Ae=!Ce.context||ie;Ce.lineLayer.render(Ce.viewModel.panels,Ae)}}),W.attr("transform",function(Ce){return f(Ce.xScale(Ce.xIndex),0)}),W.call(r.behavior.drag().origin(function(Ce){return Ce}).on("drag",function(Ce){var Ae=Ce.parent;oe.linePickActive(!1),Ce.x=Math.max(-g.overdrag,Math.min(Ce.model.width+g.overdrag,r.event.x)),Ce.canvasX=Ce.x*Ce.model.canvasPixelRatio,W.sort(function(Be,qe){return Be.x-qe.x}).each(function(Be,qe){Be.xIndex=qe,Be.x=Ce===Be?Be.x:Be.xScale(Be.xIndex),Be.canvasX=Be.x*Be.model.canvasPixelRatio}),X(W,Ae),W.filter(function(Be){return Math.abs(Ce.xIndex-Be.xIndex)!==0}).attr("transform",function(Be){return f(Be.xScale(Be.xIndex),0)}),r.select(this).attr("transform",f(Ce.x,0)),W.each(function(Be,qe,Tt){Tt===Ce.parent.key&&(Ae.dimensions[qe]=Be)}),Ae.contextLayer&&Ae.contextLayer.render(Ae.panels,!1,!C(Ae)),Ae.focusLayer.render&&Ae.focusLayer.render(Ae.panels)}).on("dragend",function(Ce){var Ae=Ce.parent;Ce.x=Ce.xScale(Ce.xIndex),Ce.canvasX=Ce.x*Ce.model.canvasPixelRatio,X(W,Ae),r.select(this).attr("transform",function(Be){return f(Be.x,0)}),Ae.contextLayer&&Ae.contextLayer.render(Ae.panels,!1,!C(Ae)),Ae.focusLayer&&Ae.focusLayer.render(Ae.panels),Ae.pickLayer&&Ae.pickLayer.render(Ae.panels,!0),oe.linePickActive(!0),ie&&ie.axesMoved&&ie.axesMoved(Ae.key,Ae.dimensions.map(function(Be){return Be.crossfilterDimensionIndex}))})),W.exit().remove();var ue=W.selectAll("."+g.cn.axisOverlays).data(s,i);ue.enter().append("g").classed(g.cn.axisOverlays,!0),ue.selectAll("."+g.cn.axis).remove();var me=ue.selectAll("."+g.cn.axis).data(s,i);me.enter().append("g").classed(g.cn.axis,!0),me.each(function(Ce){var Ae=Ce.model.height/Ce.model.tickDistance,Be=Ce.domainScale,qe=Be.domain();r.select(this).call(r.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ae,Ce.tickFormat).tickValues(Ce.ordinal?qe:null).tickFormat(function(Tt){return d.isOrdinal(Ce)?Tt:B(Ce.model.dimensions[Ce.visibleIndex],Tt)}).scale(Be)),o.font(me.selectAll("text"),Ce.model.tickFont)}),me.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),me.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default");var be=ue.selectAll("."+g.cn.axisHeading).data(s,i);be.enter().append("g").classed(g.cn.axisHeading,!0);var Me=be.selectAll("."+g.cn.axisTitle).data(s,i);Me.enter().append("text").classed(g.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),Me.text(function(Ce){return Ce.label}).each(function(Ce){var Ae=r.select(this);o.font(Ae,Ce.model.labelFont),n.convertToTspans(Ae,K)}).attr("transform",function(Ce){var Ae=U(Ce.model.labelAngle,Ce.model.labelSide),Be=g.axisTitleOffset;return(Ae.dir>0?"":f(0,2*Be+Ce.model.height))+t(Ae.degrees)+f(-Be*Ae.dx,-Be*Ae.dy)}).attr("text-anchor",function(Ce){var Ae=U(Ce.model.labelAngle,Ce.model.labelSide),Be=Math.abs(Ae.dx),qe=Math.abs(Ae.dy);return 2*Be>qe?Ae.dir*Ae.dx<0?"start":"end":"middle"});var Pe=ue.selectAll("."+g.cn.axisExtent).data(s,i);Pe.enter().append("g").classed(g.cn.axisExtent,!0);var Ge=Pe.selectAll("."+g.cn.axisExtentTop).data(s,i);Ge.enter().append("g").classed(g.cn.axisExtentTop,!0),Ge.attr("transform",f(0,-g.axisExtentOffset));var ze=Ge.selectAll("."+g.cn.axisExtentTopText).data(s,i);ze.enter().append("text").classed(g.cn.axisExtentTopText,!0).call(N),ze.text(function(Ce){return j(Ce,!0)}).each(function(Ce){o.font(r.select(this),Ce.model.rangeFont)});var Qe=Pe.selectAll("."+g.cn.axisExtentBottom).data(s,i);Qe.enter().append("g").classed(g.cn.axisExtentBottom,!0),Qe.attr("transform",function(Ce){return f(0,Ce.model.height+g.axisExtentOffset)});var tt=Qe.selectAll("."+g.cn.axisExtentBottomText).data(s,i);tt.enter().append("text").classed(g.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(N),tt.text(function(Ce){return j(Ce,!1)}).each(function(Ce){o.font(r.select(this),Ce.model.rangeFont)}),b.ensureAxisBrush(ue)}},{"../../components/colorscale":655,"../../components/drawing":665,"../../lib":778,"../../lib/gup":775,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"./axisbrush":1150,"./constants":1153,"./helpers":1155,"./lines":1157,"color-rgba":127,d3:169}],1160:[function(e,v,S){var r=e("./parcoords"),a=e("../../lib/prepare_regl"),u=e("./helpers").isVisible;function c(f,n,o){var l=n.indexOf(o),h=f.indexOf(l);return h===-1&&(h+=n.length),h}function t(f,n){return function(l,h){return c(f,n,l)-c(f,n,h)}}v.exports=function(n,o){var l=n._fullLayout,h=a(n);if(!!h){var i={},s={},p={},d={},g=l._size;o.forEach(function(y,T){var M=y[0].trace;p[T]=M.index;var P=d[T]=M._fullInput.index;i[T]=n.data[P].dimensions,s[T]=n.data[P].dimensions.slice()});var b=function(y,T,M){var P=s[y][T],L=M.map(function(F){return F.slice()}),I="dimensions["+T+"].constraintrange",E=l._tracePreGUI[n._fullData[p[y]]._fullInput.uid];if(E[I]===void 0){var k=P.constraintrange;E[I]=k||null}var C=n._fullData[p[y]].dimensions[T];L.length?(L.length===1&&(L=L[0]),P.constraintrange=L,C.constraintrange=L.slice(),L=[L]):(delete P.constraintrange,delete C.constraintrange,L=null);var D={};D[I]=L,n.emit("plotly_restyle",[D,[d[y]]])},m=function(y){n.emit("plotly_hover",y)},x=function(y){n.emit("plotly_unhover",y)},w=function(y,T){var M=t(T,s[y].filter(u));i[y].sort(M),s[y].filter(function(P){return!u(P)}).sort(function(P){return s[y].indexOf(P)}).forEach(function(P){i[y].splice(i[y].indexOf(P),1),i[y].splice(s[y].indexOf(P),0,P)}),n.emit("plotly_restyle",[{dimensions:[i[y]]},[d[y]]])};r(n,o,{width:g.w,height:g.h,margin:{t:g.t,r:g.r,b:g.b,l:g.l}},{filterChanged:b,hover:m,unhover:x,axesMoved:w})}}},{"../../lib/prepare_regl":791,"./helpers":1155,"./parcoords":1159}],1161:[function(e,v,S){var r=e("../../plots/attributes"),a=e("../../plots/domain").attributes,u=e("../../plots/font_attributes"),c=e("../../components/color/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,f=e("../../plots/template_attributes").texttemplateAttrs,n=e("../../lib/extend").extendFlat,o=u({editType:"plot",arrayOk:!0,colorEditType:"plot"});v.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:c.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:n({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:t({},{keys:["label","color","value","percent","text"]}),texttemplate:f({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:n({},o,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:n({},o,{}),outsidetextfont:n({},o,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:n({},o,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:a({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:n({},o,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":642,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/font_attributes":856,"../../plots/template_attributes":906}],1162:[function(e,v,S){var r=e("../../plots/plots");S.name="pie",S.plot=function(a,u,c,t){r.plotBasePlot(S.name,a,u,c,t)},S.clean=function(a,u,c,t){r.cleanBasePlot(S.name,a,u,c,t)}},{"../../plots/plots":891}],1163:[function(e,v,S){var r=e("fast-isnumeric"),a=e("tinycolor2"),u=e("../../components/color"),c={};function t(l,h){var i=[],s=l._fullLayout,p=s.hiddenlabels||[],d=h.labels,g=h.marker.colors||[],b=h.values,m=h._length,x=h._hasValues&&m,w,y;if(h.dlabel)for(d=new Array(m),w=0;w<m;w++)d[w]=String(h.label0+w*h.dlabel);var T={},M=f(s["_"+h.type+"colormap"]),P=0,L=!1;for(w=0;w<m;w++){var I,E,k;if(x){if(I=b[w],!r(I)||(I=+I,I<0))continue}else I=1;E=d[w],(E===void 0||E==="")&&(E=w),E=String(E);var C=T[E];C===void 0?(T[E]=i.length,k=p.indexOf(E)!==-1,k||(P+=I),i.push({v:I,label:E,color:M(g[w],E),i:w,pts:[w],hidden:k})):(L=!0,y=i[C],y.v+=I,y.pts.push(w),y.hidden||(P+=I),y.color===!1&&g[w]&&(y.color=M(g[w],E)))}var D=h.type==="funnelarea"?L:h.sort;return D&&i.sort(function(F,N){return N.v-F.v}),i[0]&&(i[0].vTotal=P),i}function f(l){return function(i,s){return!i||(i=a(i),!i.isValid())?!1:(i=u.addOpacity(i,i.getAlpha()),l[s]||(l[s]=i),i)}}function n(l,h){var i=(h||{}).type;i||(i="pie");var s=l._fullLayout,p=l.calcdata,d=s[i+"colorway"],g=s["_"+i+"colormap"];s["extend"+i+"colors"]&&(d=o(d,c));for(var b=0,m=0;m<p.length;m++){var x=p[m],w=x[0].trace.type;if(w===i)for(var y=0;y<x.length;y++){var T=x[y];T.color===!1&&(g[T.label]?T.color=g[T.label]:(g[T.label]=T.color=d[b%d.length],b++))}}}function o(l,h){var i,s=JSON.stringify(l),p=h[s];if(!p){for(p=l.slice(),i=0;i<l.length;i++)p.push(a(l[i]).lighten(20).toHexString());for(i=0;i<l.length;i++)p.push(a(l[i]).darken(20).toHexString());h[s]=p}return p}v.exports={calc:t,crossTraceCalc:n,makePullColorFn:f,generateExtendedColors:o}},{"../../components/color":643,"fast-isnumeric":241,tinycolor2:576}],1164:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("./attributes"),c=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText;function f(o,l){var h=Array.isArray(o),i=a.isArrayOrTypedArray(l),s=Math.min(h?o.length:1/0,i?l.length:1/0);if(isFinite(s)||(s=0),s&&i){for(var p,d=0;d<s;d++){var g=l[d];if(r(g)&&g>0){p=!0;break}}p||(s=0)}return{hasLabels:h,hasValues:i,len:s}}function n(o,l,h,i){function s(k,C){return a.coerce(o,l,u,k,C)}var p=s("labels"),d=s("values"),g=f(p,d),b=g.len;if(l._hasLabels=g.hasLabels,l._hasValues=g.hasValues,!l._hasLabels&&l._hasValues&&(s("label0"),s("dlabel")),!b){l.visible=!1;return}l._length=b;var m=s("marker.line.width");m&&s("marker.line.color"),s("marker.colors"),s("scalegroup");var x=s("text"),w=s("texttemplate"),y;if(w||(y=s("textinfo",Array.isArray(x)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),w||y&&y!=="none"){var T=s("textposition");t(o,l,i,s,T,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var M=Array.isArray(T)||T==="auto",P=M||T==="outside";P&&s("automargin"),(T==="inside"||T==="auto"||Array.isArray(T))&&s("insidetextorientation")}c(l,i,s);var L=s("hole"),I=s("title.text");if(I){var E=s("title.position",L?"middle center":"top center");!L&&E==="middle center"&&(l.title.position="top center"),a.coerceFont(s,"title.font",i.font)}s("sort"),s("direction"),s("rotation"),s("pull")}v.exports={handleLabelsAndValues:f,supplyDefaults:n}},{"../../lib":778,"../../plots/domain":855,"../bar/defaults":925,"./attributes":1161,"fast-isnumeric":241}],1165:[function(e,v,S){var r=e("../../components/fx/helpers").appendArrayMultiPointValues;v.exports=function(u,c){var t={curveNumber:c.index,pointNumbers:u.pts,data:c._input,fullData:c,label:u.label,color:u.color,value:u.v,percent:u.percent,text:u.text,v:u.v};return u.pts.length===1&&(t.pointNumber=t.i=u.pts[0]),r(t,c,u.pts),c.type==="funnelarea"&&(delete t.v,delete t.i),t}},{"../../components/fx/helpers":679}],1166:[function(e,v,S){var r=e("../../lib");function a(u){return u.indexOf("e")!==-1?u.replace(/[.]?0+e/,"e"):u.indexOf(".")!==-1?u.replace(/[.]?0+$/,""):u}S.formatPiePercent=function(c,t){var f=a((c*100).toPrecision(3));return r.numSeparate(f,t)+"%"},S.formatPieValue=function(c,t){var f=a(c.toPrecision(10));return r.numSeparate(f,t)},S.getFirstFilled=function(c,t){if(!!Array.isArray(c))for(var f=0;f<t.length;f++){var n=c[t[f]];if(n||n===0||n==="")return n}},S.castOption=function(c,t){if(Array.isArray(c))return S.getFirstFilled(c,t);if(c)return c},S.getRotationAngle=function(u){return(u==="auto"?0:u)*Math.PI/180}},{"../../lib":778}],1167:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":1161,"./base_plot":1162,"./calc":1163,"./defaults":1164,"./layout_attributes":1168,"./layout_defaults":1169,"./plot":1170,"./style":1171,"./style_one":1172}],1168:[function(e,v,S){v.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1169:[function(e,v,S){var r=e("../../lib"),a=e("./layout_attributes");v.exports=function(c,t){function f(n,o){return r.coerce(c,t,a,n,o)}f("hiddenlabels"),f("piecolorway",t.colorway),f("extendpiecolors")}},{"../../lib":778,"./layout_attributes":1168}],1170:[function(e,v,S){var r=e("d3"),a=e("../../plots/plots"),u=e("../../components/fx"),c=e("../../components/color"),t=e("../../components/drawing"),f=e("../../lib"),n=f.strScale,o=f.strTranslate,l=e("../../lib/svg_text_utils"),h=e("../bar/uniform_text"),i=h.recordMinTextSize,s=h.clearMinTextSize,p=e("../bar/constants").TEXTPAD,d=e("./helpers"),g=e("./event_data"),b=e("../../lib").isValidTextValue;function m(Q,H){var oe=Q._fullLayout,re=oe._size;s("pie",oe),M(H,Q),V(H,re);var ee=f.makeTraceGroups(oe._pielayer,H,"trace").each(function(ae){var fe=r.select(this),de=ae[0],pe=de.trace;te(ae),fe.attr("stroke-linejoin","round"),fe.each(function(){var W=r.select(this).selectAll("g.slice").data(ae);W.enter().append("g").classed("slice",!0),W.exit().remove();var ue=[[[],[]],[[],[]]],me=!1;W.each(function(Ce,Ae){if(Ce.hidden){r.select(this).selectAll("path,g").remove();return}Ce.pointNumber=Ce.i,Ce.curveNumber=pe.index,ue[Ce.pxmid[1]<0?0:1][Ce.pxmid[0]<0?0:1].push(Ce);var Be=de.cx,qe=de.cy,Tt=r.select(this),At=Tt.selectAll("path.surface").data([Ce]);if(At.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),Tt.call(w,Q,ae),pe.pull){var Ne=+d.castOption(pe.pull,Ce.pts)||0;Ne>0&&(Be+=Ne*Ce.pxmid[0],qe+=Ne*Ce.pxmid[1])}Ce.cxFinal=Be,Ce.cyFinal=qe;function ct(Lt,Ct,dt,lt){var Te=lt*(Ct[0]-Lt[0]),Le=lt*(Ct[1]-Lt[1]);return"a"+lt*de.r+","+lt*de.r+" 0 "+Ce.largeArc+(dt?" 1 ":" 0 ")+Te+","+Le}var Mt=pe.hole;if(Ce.v===de.vTotal){var Wt="M"+(Be+Ce.px0[0])+","+(qe+Ce.px0[1])+ct(Ce.px0,Ce.pxmid,!0,1)+ct(Ce.pxmid,Ce.px0,!0,1)+"Z";Mt?At.attr("d","M"+(Be+Mt*Ce.px0[0])+","+(qe+Mt*Ce.px0[1])+ct(Ce.px0,Ce.pxmid,!1,Mt)+ct(Ce.pxmid,Ce.px0,!1,Mt)+"Z"+Wt):At.attr("d",Wt)}else{var qt=ct(Ce.px0,Ce.px1,!0,1);if(Mt){var zt=1-Mt;At.attr("d","M"+(Be+Mt*Ce.px1[0])+","+(qe+Mt*Ce.px1[1])+ct(Ce.px1,Ce.px0,!1,Mt)+"l"+zt*Ce.px0[0]+","+zt*Ce.px0[1]+qt+"Z")}else At.attr("d","M"+Be+","+qe+"l"+Ce.px0[0]+","+Ce.px0[1]+qt+"Z")}ie(Q,Ce,de);var $t=d.castOption(pe.textposition,Ce.pts),rr=Tt.selectAll("g.slicetext").data(Ce.text&&$t!=="none"?[0]:[]);rr.enter().append("g").classed("slicetext",!0),rr.exit().remove(),rr.each(function(){var Lt=f.ensureSingle(r.select(this),"text","",function(ke){ke.attr("data-notex",1)}),Ct=f.ensureUniformFontSize(Q,$t==="outside"?y(pe,Ce,oe.font):T(pe,Ce,oe.font));Lt.text(Ce.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(t.font,Ct).call(l.convertToTspans,Q);var dt=t.bBox(Lt.node()),lt;if($t==="outside")lt=N(dt,Ce);else if(lt=P(dt,Ce,de),$t==="auto"&&lt.scale<1){var Te=f.ensureUniformFontSize(Q,pe.outsidetextfont);Lt.call(t.font,Te),dt=t.bBox(Lt.node()),lt=N(dt,Ce)}var Le=lt.textPosAngle,Ue=Le===void 0?Ce.pxmid:$(de.r,Le);if(lt.targetX=Be+Ue[0]*lt.rCenter+(lt.x||0),lt.targetY=qe+Ue[1]*lt.rCenter+(lt.y||0),se(lt,dt),lt.outside){var et=lt.targetY;Ce.yLabelMin=et-dt.height/2,Ce.yLabelMid=et,Ce.yLabelMax=et+dt.height/2,Ce.labelExtraX=0,Ce.labelExtraY=0,me=!0}lt.fontSize=Ct.size,i(pe.type,lt,oe),ae[Ae].transform=lt,Lt.attr("transform",f.getTextTransform(lt))})});var be=r.select(this).selectAll("g.titletext").data(pe.title.text?[0]:[]);if(be.enter().append("g").classed("titletext",!0),be.exit().remove(),be.each(function(){var Ce=f.ensureSingle(r.select(this),"text","",function(qe){qe.attr("data-notex",1)}),Ae=pe.title.text;pe._meta&&(Ae=f.templateString(Ae,pe._meta)),Ce.text(Ae).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(t.font,pe.title.font).call(l.convertToTspans,Q);var Be;pe.title.position==="middle center"?Be=G(de):Be=U(de,re),Ce.attr("transform",o(Be.x,Be.y)+n(Math.min(1,Be.scale))+o(Be.tx,Be.ty))}),me&&j(ue,pe),x(W,pe),me&&pe.automargin){var Me=t.bBox(fe.node()),Pe=pe.domain,Ge=re.w*(Pe.x[1]-Pe.x[0]),ze=re.h*(Pe.y[1]-Pe.y[0]),Qe=(.5*Ge-de.r)/re.w,tt=(.5*ze-de.r)/re.h;a.autoMargin(Q,"pie."+pe.uid+".automargin",{xl:Pe.x[0]-Qe,xr:Pe.x[1]+Qe,yb:Pe.y[0]-tt,yt:Pe.y[1]+tt,l:Math.max(de.cx-de.r-Me.left,0),r:Math.max(Me.right-(de.cx+de.r),0),b:Math.max(Me.bottom-(de.cy+de.r),0),t:Math.max(de.cy-de.r-Me.top,0),pad:5})}})});setTimeout(function(){ee.selectAll("tspan").each(function(){var ae=r.select(this);ae.attr("dy")&&ae.attr("dy",ae.attr("dy"))})},0)}function x(Q,H){Q.each(function(oe){var re=r.select(this);if(!oe.labelExtraX&&!oe.labelExtraY){re.select("path.textline").remove();return}var ee=re.select("g.slicetext text");oe.transform.targetX+=oe.labelExtraX,oe.transform.targetY+=oe.labelExtraY,ee.attr("transform",f.getTextTransform(oe.transform));var ae=oe.cxFinal+oe.pxmid[0],fe=oe.cyFinal+oe.pxmid[1],de="M"+ae+","+fe,pe=(oe.yLabelMax-oe.yLabelMin)*(oe.pxmid[0]<0?-1:1)/4;if(oe.labelExtraX){var W=oe.labelExtraX*oe.pxmid[1]/oe.pxmid[0],ue=oe.yLabelMid+oe.labelExtraY-(oe.cyFinal+oe.pxmid[1]);Math.abs(W)>Math.abs(ue)?de+="l"+ue*oe.pxmid[0]/oe.pxmid[1]+","+ue+"H"+(ae+oe.labelExtraX+pe):de+="l"+oe.labelExtraX+","+W+"v"+(ue-W)+"h"+pe}else de+="V"+(oe.yLabelMid+oe.labelExtraY)+"h"+pe;f.ensureSingle(re,"path","textline").call(c.stroke,H.outsidetextfont.color).attr({"stroke-width":Math.min(2,H.outsidetextfont.size/8),d:de,fill:"none"})})}function w(Q,H,oe){var re=oe[0],ee=re.trace,ae=re.cx,fe=re.cy;"_hasHoverLabel"in ee||(ee._hasHoverLabel=!1),"_hasHoverEvent"in ee||(ee._hasHoverEvent=!1),Q.on("mouseover",function(de){var pe=H._fullLayout,W=H._fullData[ee.index];if(!(H._dragging||pe.hovermode===!1)){var ue=W.hoverinfo;if(Array.isArray(ue)&&(ue=u.castHoverinfo({hoverinfo:[d.castOption(ue,de.pts)],_module:ee._module},pe,0)),ue==="all"&&(ue="label+text+value+percent+name"),W.hovertemplate||ue!=="none"&&ue!=="skip"&&ue){var me=de.rInscribed||0,be=ae+de.pxmid[0]*(1-me),Me=fe+de.pxmid[1]*(1-me),Pe=pe.separators,Ge=[];if(ue&&ue.indexOf("label")!==-1&&Ge.push(de.label),de.text=d.castOption(W.hovertext||W.text,de.pts),ue&&ue.indexOf("text")!==-1){var ze=de.text;f.isValidTextValue(ze)&&Ge.push(ze)}de.value=de.v,de.valueLabel=d.formatPieValue(de.v,Pe),ue&&ue.indexOf("value")!==-1&&Ge.push(de.valueLabel),de.percent=de.v/re.vTotal,de.percentLabel=d.formatPiePercent(de.percent,Pe),ue&&ue.indexOf("percent")!==-1&&Ge.push(de.percentLabel);var Qe=W.hoverlabel,tt=Qe.font;u.loneHover({trace:ee,x0:be-me*re.r,x1:be+me*re.r,y:Me,text:Ge.join("<br>"),name:W.hovertemplate||ue.indexOf("name")!==-1?W.name:void 0,idealAlign:de.pxmid[0]<0?"left":"right",color:d.castOption(Qe.bgcolor,de.pts)||de.color,borderColor:d.castOption(Qe.bordercolor,de.pts),fontFamily:d.castOption(tt.family,de.pts),fontSize:d.castOption(tt.size,de.pts),fontColor:d.castOption(tt.color,de.pts),nameLength:d.castOption(Qe.namelength,de.pts),textAlign:d.castOption(Qe.align,de.pts),hovertemplate:d.castOption(W.hovertemplate,de.pts),hovertemplateLabels:de,eventData:[g(de,W)]},{container:pe._hoverlayer.node(),outerContainer:pe._paper.node(),gd:H}),ee._hasHoverLabel=!0}ee._hasHoverEvent=!0,H.emit("plotly_hover",{points:[g(de,W)],event:r.event})}}),Q.on("mouseout",function(de){var pe=H._fullLayout,W=H._fullData[ee.index],ue=r.select(this).datum();ee._hasHoverEvent&&(de.originalEvent=r.event,H.emit("plotly_unhover",{points:[g(ue,W)],event:r.event}),ee._hasHoverEvent=!1),ee._hasHoverLabel&&(u.loneUnhover(pe._hoverlayer.node()),ee._hasHoverLabel=!1)}),Q.on("click",function(de){var pe=H._fullLayout,W=H._fullData[ee.index];H._dragging||pe.hovermode===!1||(H._hoverdata=[g(de,W)],u.click(H,r.event))})}function y(Q,H,oe){var re=d.castOption(Q.outsidetextfont.color,H.pts)||d.castOption(Q.textfont.color,H.pts)||oe.color,ee=d.castOption(Q.outsidetextfont.family,H.pts)||d.castOption(Q.textfont.family,H.pts)||oe.family,ae=d.castOption(Q.outsidetextfont.size,H.pts)||d.castOption(Q.textfont.size,H.pts)||oe.size;return{color:re,family:ee,size:ae}}function T(Q,H,oe){var re=d.castOption(Q.insidetextfont.color,H.pts);!re&&Q._input.textfont&&(re=d.castOption(Q._input.textfont.color,H.pts));var ee=d.castOption(Q.insidetextfont.family,H.pts)||d.castOption(Q.textfont.family,H.pts)||oe.family,ae=d.castOption(Q.insidetextfont.size,H.pts)||d.castOption(Q.textfont.size,H.pts)||oe.size;return{color:re||c.contrast(H.color),family:ee,size:ae}}function M(Q,H){for(var oe,re,ee=0;ee<Q.length;ee++)if(oe=Q[ee][0],re=oe.trace,re.title.text){var ae=re.title.text;re._meta&&(ae=f.templateString(ae,re._meta));var fe=t.tester.append("text").attr("data-notex",1).text(ae).call(t.font,re.title.font).call(l.convertToTspans,H),de=t.bBox(fe.node(),!0);oe.titleBox={width:de.width,height:de.height},fe.remove()}}function P(Q,H,oe){var re=oe.r||H.rpx1,ee=H.rInscribed,ae=H.startangle===H.stopangle;if(ae)return{rCenter:1-ee,scale:0,rotate:0,textPosAngle:0};var fe=H.ring,de=fe===1&&Math.abs(H.startangle-H.stopangle)===Math.PI*2,pe=H.halfangle,W=H.midangle,ue=oe.trace.insidetextorientation,me=ue==="horizontal",be=ue==="tangential",Me=ue==="radial",Pe=ue==="auto",Ge=[],ze;if(!Pe){var Qe=function(At,Ne){if(L(H,At)){var ct=Math.abs(At-H.startangle),Mt=Math.abs(At-H.stopangle),Wt=ct<Mt?ct:Mt;Ne==="tan"?ze=E(Q,re,fe,Wt,0):ze=I(Q,re,fe,Wt,Math.PI/2),ze.textPosAngle=At,Ge.push(ze)}},tt;if(me||be){for(tt=4;tt>=-4;tt-=2)Qe(Math.PI*tt,"tan");for(tt=4;tt>=-4;tt-=2)Qe(Math.PI*(tt+1),"tan")}if(me||Me){for(tt=4;tt>=-4;tt-=2)Qe(Math.PI*(tt+1.5),"rad");for(tt=4;tt>=-4;tt-=2)Qe(Math.PI*(tt+.5),"rad")}}if(de||Pe||me){var Ce=Math.sqrt(Q.width*Q.width+Q.height*Q.height);if(ze={scale:ee*re*2/Ce,rCenter:1-ee,rotate:0},ze.textPosAngle=(H.startangle+H.stopangle)/2,ze.scale>=1)return ze;Ge.push(ze)}(Pe||Me)&&(ze=I(Q,re,fe,pe,W),ze.textPosAngle=(H.startangle+H.stopangle)/2,Ge.push(ze)),(Pe||be)&&(ze=E(Q,re,fe,pe,W),ze.textPosAngle=(H.startangle+H.stopangle)/2,Ge.push(ze));for(var Ae=0,Be=0,qe=0;qe<Ge.length;qe++){var Tt=Ge[qe].scale;if(Be<Tt&&(Be=Tt,Ae=qe),!Pe&&Be>=1)break}return Ge[Ae]}function L(Q,H){var oe=Q.startangle,re=Q.stopangle;return oe>H&&H>re||oe<H&&H<re}function I(Q,H,oe,re,ee){H=Math.max(0,H-2*p);var ae=Q.width/Q.height,fe=D(ae,re,H,oe);return{scale:fe*2/Q.height,rCenter:k(ae,fe/H),rotate:C(ee)}}function E(Q,H,oe,re,ee){H=Math.max(0,H-2*p);var ae=Q.height/Q.width,fe=D(ae,re,H,oe);return{scale:fe*2/Q.width,rCenter:k(ae,fe/H),rotate:C(ee+Math.PI/2)}}function k(Q,H){return Math.cos(H)-Q*H}function C(Q){return(180/Math.PI*Q+720)%180-90}function D(Q,H,oe,re){var ee=Q+1/(2*Math.tan(H));return oe*Math.min(1/(Math.sqrt(ee*ee+.5)+ee),re/(Math.sqrt(Q*Q+re/2)+Q))}function F(Q,H){return Q.v===H.vTotal&&!H.trace.hole?1:Math.min(1/(1+1/Math.sin(Q.halfangle)),Q.ring/2)}function N(Q,H){var oe=H.pxmid[0],re=H.pxmid[1],ee=Q.width/2,ae=Q.height/2;return oe<0&&(ee*=-1),re<0&&(ae*=-1),{scale:1,rCenter:1,rotate:0,x:ee+Math.abs(ae)*(ee>0?1:-1)/2,y:ae/(1+oe*oe/(re*re)),outside:!0}}function G(Q){var H=Math.sqrt(Q.titleBox.width*Q.titleBox.width+Q.titleBox.height*Q.titleBox.height);return{x:Q.cx,y:Q.cy,scale:Q.trace.hole*Q.r*2/H,tx:0,ty:-Q.titleBox.height/2+Q.trace.title.font.size}}function U(Q,H){var oe=1,re=1,ee,ae=Q.trace,fe={x:Q.cx,y:Q.cy},de={tx:0,ty:0};de.ty+=ae.title.font.size,ee=B(ae),ae.title.position.indexOf("top")!==-1?(fe.y-=(1+ee)*Q.r,de.ty-=Q.titleBox.height):ae.title.position.indexOf("bottom")!==-1&&(fe.y+=(1+ee)*Q.r);var pe=X(Q.r,Q.trace.aspectratio),W=H.w*(ae.domain.x[1]-ae.domain.x[0])/2;return ae.title.position.indexOf("left")!==-1?(W=W+pe,fe.x-=(1+ee)*pe,de.tx+=Q.titleBox.width/2):ae.title.position.indexOf("center")!==-1?W*=2:ae.title.position.indexOf("right")!==-1&&(W=W+pe,fe.x+=(1+ee)*pe,de.tx-=Q.titleBox.width/2),oe=W/Q.titleBox.width,re=z(Q,H)/Q.titleBox.height,{x:fe.x,y:fe.y,scale:Math.min(oe,re),tx:de.tx,ty:de.ty}}function X(Q,H){return Q/(H===void 0?1:H)}function z(Q,H){var oe=Q.trace,re=H.h*(oe.domain.y[1]-oe.domain.y[0]);return Math.min(Q.titleBox.height,re/2)}function B(Q){var H=Q.pull;if(!H)return 0;var oe;if(Array.isArray(H))for(H=0,oe=0;oe<Q.pull.length;oe++)Q.pull[oe]>H&&(H=Q.pull[oe]);return H}function j(Q,H){var oe,re,ee,ae,fe,de,pe,W,ue,me,be,Me,Pe;function Ge(Ce,Ae){return Ce.pxmid[1]-Ae.pxmid[1]}function ze(Ce,Ae){return Ae.pxmid[1]-Ce.pxmid[1]}function Qe(Ce,Ae){Ae||(Ae={});var Be=Ae.labelExtraY+(re?Ae.yLabelMax:Ae.yLabelMin),qe=re?Ce.yLabelMin:Ce.yLabelMax,Tt=re?Ce.yLabelMax:Ce.yLabelMin,At=Ce.cyFinal+fe(Ce.px0[1],Ce.px1[1]),Ne=Be-qe,ct,Mt,Wt,qt,zt,$t;if(Ne*pe>0&&(Ce.labelExtraY=Ne),!!Array.isArray(H.pull))for(Mt=0;Mt<me.length;Mt++)Wt=me[Mt],!(Wt===Ce||(d.castOption(H.pull,Ce.pts)||0)>=(d.castOption(H.pull,Wt.pts)||0))&&((Ce.pxmid[1]-Wt.pxmid[1])*pe>0?(qt=Wt.cyFinal+fe(Wt.px0[1],Wt.px1[1]),Ne=qt-qe-Ce.labelExtraY,Ne*pe>0&&(Ce.labelExtraY+=Ne)):(Tt+Ce.labelExtraY-At)*pe>0&&(ct=3*de*Math.abs(Mt-me.indexOf(Ce)),zt=Wt.cxFinal+ae(Wt.px0[0],Wt.px1[0]),$t=zt+ct-(Ce.cxFinal+Ce.pxmid[0])-Ce.labelExtraX,$t*de>0&&(Ce.labelExtraX+=$t)))}for(re=0;re<2;re++)for(ee=re?Ge:ze,fe=re?Math.max:Math.min,pe=re?1:-1,oe=0;oe<2;oe++){for(ae=oe?Math.max:Math.min,de=oe?1:-1,W=Q[re][oe],W.sort(ee),ue=Q[1-re][oe],me=ue.concat(W),Me=[],be=0;be<W.length;be++)W[be].yLabelMid!==void 0&&Me.push(W[be]);for(Pe=!1,be=0;re&&be<ue.length;be++)if(ue[be].yLabelMid!==void 0){Pe=ue[be];break}for(be=0;be<Me.length;be++){var tt=be&&Me[be-1];Pe&&!be&&(tt=Pe),Qe(Me[be],tt)}}}function V(Q,H){for(var oe=[],re=0;re<Q.length;re++){var ee=Q[re][0],ae=ee.trace,fe=ae.domain,de=H.w*(fe.x[1]-fe.x[0]),pe=H.h*(fe.y[1]-fe.y[0]);ae.title.text&&ae.title.position!=="middle center"&&(pe-=z(ee,H));var W=de/2,ue=pe/2;ae.type==="funnelarea"&&!ae.scalegroup&&(ue/=ae.aspectratio),ee.r=Math.min(W,ue)/(1+B(ae)),ee.cx=H.l+H.w*(ae.domain.x[1]+ae.domain.x[0])/2,ee.cy=H.t+H.h*(1-ae.domain.y[0])-pe/2,ae.title.text&&ae.title.position.indexOf("bottom")!==-1&&(ee.cy-=z(ee,H)),ae.scalegroup&&oe.indexOf(ae.scalegroup)===-1&&oe.push(ae.scalegroup)}K(Q,oe)}function K(Q,H){for(var oe,re,ee,ae=0;ae<H.length;ae++){var fe=1/0,de=H[ae];for(re=0;re<Q.length;re++)if(oe=Q[re][0],ee=oe.trace,ee.scalegroup===de){var pe;if(ee.type==="pie")pe=oe.r*oe.r;else if(ee.type==="funnelarea"){var W,ue;ee.aspectratio>1?(W=oe.r,ue=W/ee.aspectratio):(ue=oe.r,W=ue*ee.aspectratio),W*=(1+ee.baseratio)/2,pe=W*ue}fe=Math.min(fe,pe/oe.vTotal)}for(re=0;re<Q.length;re++)if(oe=Q[re][0],ee=oe.trace,ee.scalegroup===de){var me=fe*oe.vTotal;ee.type==="funnelarea"&&(me/=(1+ee.baseratio)/2,me/=ee.aspectratio),oe.r=Math.sqrt(me)}}}function te(Q){var H=Q[0],oe=H.r,re=H.trace,ee=d.getRotationAngle(re.rotation),ae=2*Math.PI/H.vTotal,fe="px0",de="px1",pe,W,ue;if(re.direction==="counterclockwise"){for(pe=0;pe<Q.length&&Q[pe].hidden;pe++);if(pe===Q.length)return;ee+=ae*Q[pe].v,ae*=-1,fe="px1",de="px0"}for(ue=$(oe,ee),pe=0;pe<Q.length;pe++)W=Q[pe],!W.hidden&&(W[fe]=ue,W.startangle=ee,ee+=ae*W.v/2,W.pxmid=$(oe,ee),W.midangle=ee,ee+=ae*W.v/2,ue=$(oe,ee),W.stopangle=ee,W[de]=ue,W.largeArc=W.v>H.vTotal/2?1:0,W.halfangle=Math.PI*Math.min(W.v/H.vTotal,.5),W.ring=1-re.hole,W.rInscribed=F(W,H))}function $(Q,H){return[Q*Math.sin(H),-Q*Math.cos(H)]}function ie(Q,H,oe){var re=Q._fullLayout,ee=oe.trace,ae=ee.texttemplate,fe=ee.textinfo;if(!ae&&fe&&fe!=="none"){var de=fe.split("+"),pe=function(Ae){return de.indexOf(Ae)!==-1},W=pe("label"),ue=pe("text"),me=pe("value"),be=pe("percent"),Me=re.separators,Pe;if(Pe=W?[H.label]:[],ue){var Ge=d.getFirstFilled(ee.text,H.pts);b(Ge)&&Pe.push(Ge)}me&&Pe.push(d.formatPieValue(H.v,Me)),be&&Pe.push(d.formatPiePercent(H.v/oe.vTotal,Me)),H.text=Pe.join("<br>")}function ze(Ae){return{label:Ae.label,value:Ae.v,valueLabel:d.formatPieValue(Ae.v,re.separators),percent:Ae.v/oe.vTotal,percentLabel:d.formatPiePercent(Ae.v/oe.vTotal,re.separators),color:Ae.color,text:Ae.text,customdata:f.castOption(ee,Ae.i,"customdata")}}if(ae){var Qe=f.castOption(ee,H.i,"texttemplate");if(!Qe)H.text="";else{var tt=ze(H),Ce=d.getFirstFilled(ee.text,H.pts);(b(Ce)||Ce==="")&&(tt.text=Ce),H.text=f.texttemplateString(Qe,tt,Q._fullLayout._d3locale,tt,ee._meta||{})}}}function se(Q,H){var oe=Q.rotate*Math.PI/180,re=Math.cos(oe),ee=Math.sin(oe),ae=(H.left+H.right)/2,fe=(H.top+H.bottom)/2;Q.textX=ae*re-fe*ee,Q.textY=ae*ee+fe*re,Q.noCenter=!0}v.exports={plot:m,formatSliceLabel:ie,transformInsideText:P,determineInsideTextFont:T,positionTitleOutside:U,prerenderTitles:M,layoutAreas:V,attachFxHandlers:w,computeTransform:se}},{"../../components/color":643,"../../components/drawing":665,"../../components/fx":683,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../bar/constants":923,"../bar/uniform_text":937,"./event_data":1165,"./helpers":1166,d3:169}],1171:[function(e,v,S){var r=e("d3"),a=e("./style_one"),u=e("../bar/uniform_text").resizeText;v.exports=function(t){var f=t._fullLayout._pielayer.selectAll(".trace");u(t,f,"pie"),f.each(function(n){var o=n[0],l=o.trace,h=r.select(this);h.style({opacity:l.opacity}),h.selectAll("path.surface").each(function(i){r.select(this).call(a,i,l)})})}},{"../bar/uniform_text":937,"./style_one":1172,d3:169}],1172:[function(e,v,S){var r=e("../../components/color"),a=e("./helpers").castOption;v.exports=function(c,t,f){var n=f.marker.line,o=a(n.color,t.pts)||r.defaultLine,l=a(n.width,t.pts)||0;c.style("stroke-width",l).call(r.fill,t.color).call(r.stroke,o)}},{"../../components/color":643,"./helpers":1166}],1173:[function(e,v,S){var r=e("../scatter/attributes");v.exports={x:r.x,y:r.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:r.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1187}],1174:[function(e,v,S){var r=e("gl-pointcloud2d"),a=e("../../lib/str2rgbarray"),u=e("../../plots/cartesian/autorange").findExtremes,c=e("../scatter/get_trace_color");function t(o,l){this.scene=o,this.uid=l,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=r(o.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var f=t.prototype;f.handlePick=function(o){var l=this.idToIndex[o.pointId];return{trace:this,dataCoord:o.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[l*2],this.pickXYData[l*2+1]]:[this.pickXData[l],this.pickYData[l]],textLabel:Array.isArray(this.textLabels)?this.textLabels[l]:this.textLabels,color:this.color,name:this.name,pointIndex:l,hoverinfo:this.hoverinfo}},f.update=function(o){this.index=o.index,this.textLabels=o.text,this.name=o.name,this.hoverinfo=o.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(o),this.color=c(o,{})},f.updateFast=function(o){var l=this.xData=this.pickXData=o.x,h=this.yData=this.pickYData=o.y,i=this.pickXYData=o.xy,s=o.xbounds&&o.ybounds,p=o.indices,d,g,b,m=this.bounds,x,w,y;if(i){if(b=i,d=i.length>>>1,s)m[0]=o.xbounds[0],m[2]=o.xbounds[1],m[1]=o.ybounds[0],m[3]=o.ybounds[1];else for(y=0;y<d;y++)x=b[y*2],w=b[y*2+1],x<m[0]&&(m[0]=x),x>m[2]&&(m[2]=x),w<m[1]&&(m[1]=w),w>m[3]&&(m[3]=w);if(p)g=p;else for(g=new Int32Array(d),y=0;y<d;y++)g[y]=y}else for(d=l.length,b=new Float32Array(2*d),g=new Int32Array(d),y=0;y<d;y++)x=l[y],w=h[y],g[y]=y,b[y*2]=x,b[y*2+1]=w,x<m[0]&&(m[0]=x),x>m[2]&&(m[2]=x),w<m[1]&&(m[1]=w),w>m[3]&&(m[3]=w);this.idToIndex=g,this.pointcloudOptions.idToIndex=g,this.pointcloudOptions.positions=b;var T=a(o.marker.color),M=a(o.marker.border.color),P=o.opacity*o.marker.opacity;T[3]*=P,this.pointcloudOptions.color=T;var L=o.marker.blend;if(L===null){var I=100;L=l.length<I||h.length<I}this.pointcloudOptions.blend=L,M[3]*=P,this.pointcloudOptions.borderColor=M;var E=o.marker.sizemin,k=Math.max(o.marker.sizemax,o.marker.sizemin);this.pointcloudOptions.sizeMin=E,this.pointcloudOptions.sizeMax=k,this.pointcloudOptions.areaRatio=o.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var C=this.scene.xaxis,D=this.scene.yaxis,F=k/2||.5;o._extremes[C._id]=u(C,[m[0],m[2]],{ppad:F}),o._extremes[D._id]=u(D,[m[1],m[3]],{ppad:F})},f.dispose=function(){this.pointcloud.dispose()};function n(o,l){var h=new t(o,l.uid);return h.update(l),h}v.exports=n},{"../../lib/str2rgbarray":802,"../../plots/cartesian/autorange":827,"../scatter/get_trace_color":1197,"gl-pointcloud2d":324}],1175:[function(e,v,S){var r=e("../../lib"),a=e("./attributes");v.exports=function(c,t,f){function n(o,l){return r.coerce(c,t,a,o,l)}n("x"),n("y"),n("xbounds"),n("ybounds"),c.xy&&c.xy instanceof Float32Array&&(t.xy=c.xy),c.indices&&c.indices instanceof Int32Array&&(t.indices=c.indices),n("text"),n("marker.color",f),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",f),n("marker.border.arearatio"),t._length=null}},{"../../lib":778,"./attributes":1173}],1176:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../scatter3d/calc"),plot:e("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":868,"../scatter3d/calc":1216,"./attributes":1173,"./convert":1174,"./defaults":1175}],1177:[function(e,v,S){var r=e("../../plots/font_attributes"),a=e("../../plots/attributes"),u=e("../../components/color/attributes"),c=e("../../components/fx/attributes"),t=e("../../plots/domain").attributes,f=e("../../plots/template_attributes").hovertemplateAttrs,n=e("../../components/colorscale/attributes"),o=e("../../plot_api/plot_template").templatedArray,l=e("../../lib/extend").extendFlat,h=e("../../plot_api/edit_types").overrideAll;e("../../constants/docs").FORMAT_LINK;var i=v.exports=h({hoverinfo:l({},a.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:c.hoverlabel,domain:t({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:r({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:u.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:c.hoverlabel,hovertemplate:f({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:u.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:c.hoverlabel,hovertemplate:f({},{keys:["value","label"]}),colorscales:o("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:l(n().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");i.transforms=void 0},{"../../components/color/attributes":642,"../../components/colorscale/attributes":650,"../../components/fx/attributes":674,"../../constants/docs":748,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/font_attributes":856,"../../plots/template_attributes":906}],1178:[function(e,v,S){var r=e("../../plot_api/edit_types").overrideAll,a=e("../../plots/get_data").getModuleCalcData,u=e("./plot"),c=e("../../components/fx/layout_attributes"),t=e("../../lib/setcursor"),f=e("../../components/dragelement"),n=e("../../plots/cartesian/select").prepSelect,o=e("../../lib"),l=e("../../registry"),h="sankey";S.name=h,S.baseLayoutAttrOverrides=r({hoverlabel:c.hoverlabel},"plot","nested"),S.plot=function(s){var p=a(s.calcdata,h)[0];u(s,p),S.updateFx(s)},S.clean=function(s,p,d,g){var b=g._has&&g._has(h),m=p._has&&p._has(h);b&&!m&&(g._paperdiv.selectAll(".sankey").remove(),g._paperdiv.selectAll(".bgsankey").remove())},S.updateFx=function(s){for(var p=0;p<s._fullData.length;p++)i(s,p)};function i(s,p){var d=s._fullData[p],g=s._fullLayout,b=g.dragmode,m=g.dragmode==="pan"?"move":"crosshair",x=d._bgRect;if(!(b==="pan"||b==="zoom")){t(x,m);var w={_id:"x",c2p:o.identity,_offset:d._sankey.translateX,_length:d._sankey.width},y={_id:"y",c2p:o.identity,_offset:d._sankey.translateY,_length:d._sankey.height},T={gd:s,element:x.node(),plotinfo:{id:p,xaxis:w,yaxis:y,fillRangeItems:o.noop},subplot:p,xaxes:[w],yaxes:[y],doneFnCompleted:function(M){var P=s._fullData[p],L,I=P.node.groups.slice(),E=[];function k(N){for(var G=P._sankey.graph.nodes,U=0;U<G.length;U++)if(G[U].pointNumber===N)return G[U]}for(var C=0;C<M.length;C++){var D=k(M[C].pointNumber);if(!!D)if(D.group){for(var F=0;F<D.childrenNodes.length;F++)E.push(D.childrenNodes[F].pointNumber);I[D.pointNumber-P.node._count]=!1}else E.push(D.pointNumber)}L=I.filter(Boolean).concat([E]),l.call("_guiRestyle",s,{"node.groups":[L]},p)}};T.prepFn=function(M,P,L){n(M,P,L,T,b)},f.init(T)}}},{"../../components/dragelement":662,"../../components/fx/layout_attributes":684,"../../lib":778,"../../lib/setcursor":799,"../../plot_api/edit_types":810,"../../plots/cartesian/select":847,"../../plots/get_data":865,"../../registry":911,"./plot":1183}],1179:[function(e,v,S){var r=e("strongly-connected-components"),a=e("../../lib"),u=e("../../lib/gup").wrap,c=a.isArrayOrTypedArray,t=a.isIndex,f=e("../../components/colorscale");function n(l){var h=l.node,i=l.link,s=[],p=c(i.color),d=c(i.customdata),g={},b={},m=i.colorscales.length,x;for(x=0;x<m;x++){var w=i.colorscales[x],y=f.extractScale(w,{cLetter:"c"}),T=f.makeColorScaleFunc(y);b[w.label]=T}var M=0;for(x=0;x<i.value.length;x++)i.source[x]>M&&(M=i.source[x]),i.target[x]>M&&(M=i.target[x]);var P=M+1;l.node._count=P;var L,I=l.node.groups,E={};for(x=0;x<I.length;x++){var k=I[x];for(L=0;L<k.length;L++){var C=k[L],D=P+x;E.hasOwnProperty(C)?a.warn("Node "+C+" is already part of a group."):E[C]=D}}var F={source:[],target:[]};for(x=0;x<i.value.length;x++){var N=i.value[x],G=i.source[x],U=i.target[x];if(!!(N>0&&t(G,P)&&t(U,P))&&!(E.hasOwnProperty(G)&&E.hasOwnProperty(U)&&E[G]===E[U])){E.hasOwnProperty(U)&&(U=E[U]),E.hasOwnProperty(G)&&(G=E[G]),G=+G,U=+U,g[G]=g[U]=!0;var X="";i.label&&i.label[x]&&(X=i.label[x]);var z=null;X&&b.hasOwnProperty(X)&&(z=b[X]),s.push({pointNumber:x,label:X,color:p?i.color[x]:i.color,customdata:d?i.customdata[x]:i.customdata,concentrationscale:z,source:G,target:U,value:+N}),F.source.push(G),F.target.push(U)}}var B=P+I.length,j=c(h.color),V=c(h.customdata),K=[];for(x=0;x<B;x++)if(!!g[x]){var te=h.label[x];K.push({group:x>P-1,childrenNodes:[],pointNumber:x,label:te,color:j?h.color[x]:h.color,customdata:V?h.customdata[x]:h.customdata})}var $=!1;return o(B,F.source,F.target)&&($=!0),{circular:$,links:s,nodes:K,groups:I,groupLookup:E}}function o(l,h,i){for(var s=a.init2dArray(l,0),p=0;p<Math.min(h.length,i.length);p++)if(a.isIndex(h[p],l)&&a.isIndex(i[p],l)){if(h[p]===i[p])return!0;s[h[p]].push(i[p])}var d=r(s);return d.components.some(function(g){return g.length>1})}v.exports=function(h,i){var s=n(i);return u({circular:s.circular,_nodes:s.nodes,_links:s.links,_groups:s.groups,_groupLookup:s.groupLookup})}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gup":775,"strongly-connected-components":569}],1180:[function(e,v,S){v.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1181:[function(e,v,S){var r=e("../../lib"),a=e("./attributes"),u=e("../../components/color"),c=e("tinycolor2"),t=e("../../plots/domain").defaults,f=e("../../components/fx/hoverlabel_defaults"),n=e("../../plot_api/plot_template"),o=e("../../plots/array_container_defaults");v.exports=function(i,s,p,d){function g(k,C){return r.coerce(i,s,a,k,C)}var b=r.extendDeep(d.hoverlabel,i.hoverlabel),m=i.node,x=n.newContainer(s,"node");function w(k,C){return r.coerce(m,x,a.node,k,C)}w("label"),w("groups"),w("x"),w("y"),w("pad"),w("thickness"),w("line.color"),w("line.width"),w("hoverinfo",i.hoverinfo),f(m,x,w,b),w("hovertemplate");var y=d.colorway,T=function(k){return y[k%y.length]};w("color",x.label.map(function(k,C){return u.addOpacity(T(C),.8)})),w("customdata");var M=i.link||{},P=n.newContainer(s,"link");function L(k,C){return r.coerce(M,P,a.link,k,C)}L("label"),L("source"),L("target"),L("value"),L("line.color"),L("line.width"),L("hoverinfo",i.hoverinfo),f(M,P,L,b),L("hovertemplate");var I=c(d.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";L("color",r.repeat(I,P.value.length)),L("customdata"),o(M,P,{name:"colorscales",handleItemDefaults:l}),t(s,d,g),g("orientation"),g("valueformat"),g("valuesuffix");var E;x.x.length&&x.y.length&&(E="freeform"),g("arrangement",E),r.coerceFont(g,"textfont",r.extendFlat({},d.font)),s._length=null};function l(h,i){function s(p,d){return r.coerce(h,i,a.link.colorscales,p,d)}s("label"),s("cmin"),s("cmax"),s("colorscale")}},{"../../components/color":643,"../../components/fx/hoverlabel_defaults":681,"../../lib":778,"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../../plots/domain":855,"./attributes":1177,tinycolor2:576}],1182:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"sankey",basePlotModule:e("./base_plot"),selectPoints:e("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":1177,"./base_plot":1178,"./calc":1179,"./defaults":1181,"./plot":1183,"./select.js":1185}],1183:[function(e,v,S){var r=e("d3"),a=e("./render"),u=e("../../components/fx"),c=e("../../components/color"),t=e("../../lib"),f=e("./constants").cn,n=t._;function o(w){return w!==""}function l(w,y){return w.filter(function(T){return T.key===y.traceId})}function h(w,y){r.select(w).select("path").style("fill-opacity",y),r.select(w).select("rect").style("fill-opacity",y)}function i(w){r.select(w).select("text.name").style("fill","black")}function s(w){return function(y){return w.node.sourceLinks.indexOf(y.link)!==-1||w.node.targetLinks.indexOf(y.link)!==-1}}function p(w){return function(y){return y.node.sourceLinks.indexOf(w.link)!==-1||y.node.targetLinks.indexOf(w.link)!==-1}}function d(w,y,T){y&&T&&l(T,y).selectAll("."+f.sankeyLink).filter(s(y)).call(b.bind(0,y,T,!1))}function g(w,y,T){y&&T&&l(T,y).selectAll("."+f.sankeyLink).filter(s(y)).call(m.bind(0,y,T,!1))}function b(w,y,T,M){var P=M.datum().link.label;M.style("fill-opacity",function(L){if(!L.link.concentrationscale)return .4}),P&&l(y,w).selectAll("."+f.sankeyLink).filter(function(L){return L.link.label===P}).style("fill-opacity",function(L){if(!L.link.concentrationscale)return .4}),T&&l(y,w).selectAll("."+f.sankeyNode).filter(p(w)).call(d)}function m(w,y,T,M){var P=M.datum().link.label;M.style("fill-opacity",function(L){return L.tinyColorAlpha}),P&&l(y,w).selectAll("."+f.sankeyLink).filter(function(L){return L.link.label===P}).style("fill-opacity",function(L){return L.tinyColorAlpha}),T&&l(y,w).selectAll(f.sankeyNode).filter(p(w)).call(g)}function x(w,y){var T=w.hoverlabel||{},M=t.nestedProperty(T,y).get();return Array.isArray(M)?!1:M}v.exports=function(y,T){for(var M=y._fullLayout,P=M._paper,L=M._size,I=0;I<y._fullData.length;I++)if(!!y._fullData[I].visible&&y._fullData[I].type===f.sankey&&!y._fullData[I]._viewInitial){var E=y._fullData[I].node;y._fullData[I]._viewInitial={node:{groups:E.groups.slice(),x:E.x.slice(),y:E.y.slice()}}}var k=function(te,$){var ie=$.link;ie.originalEvent=r.event,y._hoverdata=[ie],u.click(y,{target:!0})},C=function(te,$,ie){y._fullLayout.hovermode!==!1&&(r.select(te).call(b.bind(0,$,ie,!0)),$.link.trace.link.hoverinfo!=="skip"&&($.link.fullData=$.link.trace,y.emit("plotly_hover",{event:r.event,points:[$.link]})))},D=n(y,"source:")+" ",F=n(y,"target:")+" ",N=n(y,"concentration:")+" ",G=n(y,"incoming flow count:")+" ",U=n(y,"outgoing flow count:")+" ",X=function(te,$){if(y._fullLayout.hovermode===!1)return;var ie=$.link.trace.link;if(ie.hoverinfo==="none"||ie.hoverinfo==="skip")return;var se=[];function Q(de){var pe,W;de.circular?(pe=(de.circularPathData.leftInnerExtent+de.circularPathData.rightInnerExtent)/2,W=de.circularPathData.verticalFullExtent):(pe=(de.source.x1+de.target.x0)/2,W=(de.y0+de.y1)/2);var ue=[pe,W];return de.trace.orientation==="v"&&ue.reverse(),ue[0]+=$.parent.translateX,ue[1]+=$.parent.translateY,ue}for(var H=0,oe=0;oe<$.flow.links.length;oe++){var re=$.flow.links[oe];if(!(y._fullLayout.hovermode==="closest"&&$.link.pointNumber!==re.pointNumber)){$.link.pointNumber===re.pointNumber&&(H=oe),re.fullData=re.trace,ie=$.link.trace.link;var ee=Q(re),ae={valueLabel:r.format($.valueFormat)(re.value)+$.valueSuffix};se.push({x:ee[0],y:ee[1],name:ae.valueLabel,text:[re.label||"",D+re.source.label,F+re.target.label,re.concentrationscale?N+r.format("%0.2f")(re.flow.labelConcentration):""].filter(o).join("<br>"),color:x(ie,"bgcolor")||c.addOpacity(re.color,1),borderColor:x(ie,"bordercolor"),fontFamily:x(ie,"font.family"),fontSize:x(ie,"font.size"),fontColor:x(ie,"font.color"),nameLength:x(ie,"namelength"),textAlign:x(ie,"align"),idealAlign:r.event.x<ee[0]?"right":"left",hovertemplate:ie.hovertemplate,hovertemplateLabels:ae,eventData:[re]})}}var fe=u.loneHover(se,{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:y,anchorIndex:H});fe.each(function(){var de=this;$.link.concentrationscale||h(de,.65),i(de)})},z=function(te,$,ie){y._fullLayout.hovermode!==!1&&(r.select(te).call(m.bind(0,$,ie,!0)),$.link.trace.link.hoverinfo!=="skip"&&($.link.fullData=$.link.trace,y.emit("plotly_unhover",{event:r.event,points:[$.link]})),u.loneUnhover(M._hoverlayer.node()))},B=function(te,$,ie){var se=$.node;se.originalEvent=r.event,y._hoverdata=[se],r.select(te).call(g,$,ie),u.click(y,{target:!0})},j=function(te,$,ie){y._fullLayout.hovermode!==!1&&(r.select(te).call(d,$,ie),$.node.trace.node.hoverinfo!=="skip"&&($.node.fullData=$.node.trace,y.emit("plotly_hover",{event:r.event,points:[$.node]})))},V=function(te,$){if(y._fullLayout.hovermode!==!1){var ie=$.node.trace.node;if(!(ie.hoverinfo==="none"||ie.hoverinfo==="skip")){var se=r.select(te).select("."+f.nodeRect),Q=y._fullLayout._paperdiv.node().getBoundingClientRect(),H=se.node().getBoundingClientRect(),oe=H.left-2-Q.left,re=H.right+2-Q.left,ee=H.top+H.height/4-Q.top,ae={valueLabel:r.format($.valueFormat)($.node.value)+$.valueSuffix};$.node.fullData=$.node.trace,y._fullLayout._calcInverseTransform(y);var fe=y._fullLayout._invScaleX,de=y._fullLayout._invScaleY,pe=u.loneHover({x0:fe*oe,x1:fe*re,y:de*ee,name:r.format($.valueFormat)($.node.value)+$.valueSuffix,text:[$.node.label,G+$.node.targetLinks.length,U+$.node.sourceLinks.length].filter(o).join("<br>"),color:x(ie,"bgcolor")||$.tinyColorHue,borderColor:x(ie,"bordercolor"),fontFamily:x(ie,"font.family"),fontSize:x(ie,"font.size"),fontColor:x(ie,"font.color"),nameLength:x(ie,"namelength"),textAlign:x(ie,"align"),idealAlign:"left",hovertemplate:ie.hovertemplate,hovertemplateLabels:ae,eventData:[$.node]},{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:y});h(pe,.85),i(pe)}}},K=function(te,$,ie){y._fullLayout.hovermode!==!1&&(r.select(te).call(g,$,ie),$.node.trace.node.hoverinfo!=="skip"&&($.node.fullData=$.node.trace,y.emit("plotly_unhover",{event:r.event,points:[$.node]})),u.loneUnhover(M._hoverlayer.node()))};a(y,P,T,{width:L.w,height:L.h,margin:{t:L.t,r:L.r,b:L.b,l:L.l}},{linkEvents:{hover:C,follow:X,unhover:z,select:k},nodeEvents:{hover:j,follow:V,unhover:K,select:B}})}},{"../../components/color":643,"../../components/fx":683,"../../lib":778,"./constants":1180,"./render":1184,d3:169}],1184:[function(e,v,S){var r=e("./constants"),a=e("d3"),u=e("tinycolor2"),c=e("../../components/color"),t=e("../../components/drawing"),f=e("@plotly/d3-sankey"),n=e("@plotly/d3-sankey-circular"),o=e("d3-force"),l=e("../../lib"),h=l.strTranslate,i=e("../../lib/gup"),s=i.keyFun,p=i.repeat,d=i.unwrap,g=e("d3-interpolate").interpolateNumber,b=e("../../registry");function m(H,oe,re){var ee=d(oe),ae=ee.trace,fe=ae.domain,de=ae.orientation==="h",pe=ae.node.pad,W=ae.node.thickness,ue=H.width*(fe.x[1]-fe.x[0]),me=H.height*(fe.y[1]-fe.y[0]),be=ee._nodes,Me=ee._links,Pe=ee.circular,Ge;Pe?Ge=n.sankeyCircular().circularLinkGap(0):Ge=f.sankey(),Ge.iterations(r.sankeyIterations).size(de?[ue,me]:[me,ue]).nodeWidth(W).nodePadding(pe).nodeId(function(zt){return zt.pointNumber}).nodes(be).links(Me);var ze=Ge();Ge.nodePadding()<pe&&l.warn("node.pad was reduced to ",Ge.nodePadding()," to fit within the figure.");var Qe,tt,Ce;for(var Ae in ee._groupLookup){var Be=parseInt(ee._groupLookup[Ae]),qe;for(Qe=0;Qe<ze.nodes.length;Qe++)if(ze.nodes[Qe].pointNumber===Be){qe=ze.nodes[Qe];break}if(!!qe){var Tt={pointNumber:parseInt(Ae),x0:qe.x0,x1:qe.x1,y0:qe.y0,y1:qe.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};ze.nodes.unshift(Tt),qe.childrenNodes.unshift(Tt)}}function At(){for(Qe=0;Qe<ze.nodes.length;Qe++){var zt=ze.nodes[Qe],$t={},rr,Lt;for(tt=0;tt<zt.targetLinks.length;tt++)Lt=zt.targetLinks[tt],rr=Lt.source.pointNumber+":"+Lt.target.pointNumber,$t.hasOwnProperty(rr)||($t[rr]=[]),$t[rr].push(Lt);var Ct=Object.keys($t);for(tt=0;tt<Ct.length;tt++){rr=Ct[tt];var dt=$t[rr],lt=0,Te={};for(Ce=0;Ce<dt.length;Ce++)Lt=dt[Ce],Te[Lt.label]||(Te[Lt.label]=0),Te[Lt.label]+=Lt.value,lt+=Lt.value;for(Ce=0;Ce<dt.length;Ce++)Lt=dt[Ce],Lt.flow={value:lt,labelConcentration:Te[Lt.label]/lt,concentration:Lt.value/lt,links:dt},Lt.concentrationscale&&(Lt.color=u(Lt.concentrationscale(Lt.flow.labelConcentration)))}var Le=0;for(tt=0;tt<zt.sourceLinks.length;tt++)Le+=zt.sourceLinks[tt].value;for(tt=0;tt<zt.sourceLinks.length;tt++)Lt=zt.sourceLinks[tt],Lt.concentrationOut=Lt.value/Le;var Ue=0;for(tt=0;tt<zt.targetLinks.length;tt++)Ue+=zt.targetLinks[tt].value;for(tt=0;tt<zt.targetLinks.length;tt++)Lt=zt.targetLinks[tt],Lt.concenrationIn=Lt.value/Ue}}At();function Ne(zt){zt.forEach(function($t){var rr,Lt,Ct=0,dt=$t.length,lt;for($t.sort(function(Te,Le){return Te.y0-Le.y0}),lt=0;lt<dt;++lt)rr=$t[lt],rr.y0>=Ct||(Lt=Ct-rr.y0,Lt>1e-6&&(rr.y0+=Lt,rr.y1+=Lt)),Ct=rr.y1+pe})}function ct(zt){var $t=zt.map(function(Le,Ue){return{x0:Le.x0,index:Ue}}).sort(function(Le,Ue){return Le.x0-Ue.x0}),rr=[],Lt=-1,Ct,dt=-1/0,lt;for(Qe=0;Qe<$t.length;Qe++){var Te=zt[$t[Qe].index];Te.x0>dt+W&&(Lt+=1,Ct=Te.x0),dt=Te.x0,rr[Lt]||(rr[Lt]=[]),rr[Lt].push(Te),lt=Ct-Te.x0,Te.x0+=lt,Te.x1+=lt}return rr}if(ae.node.x.length&&ae.node.y.length){for(Qe=0;Qe<Math.min(ae.node.x.length,ae.node.y.length,ze.nodes.length);Qe++)if(ae.node.x[Qe]&&ae.node.y[Qe]){var Mt=[ae.node.x[Qe]*ue,ae.node.y[Qe]*me];ze.nodes[Qe].x0=Mt[0]-W/2,ze.nodes[Qe].x1=Mt[0]+W/2;var Wt=ze.nodes[Qe].y1-ze.nodes[Qe].y0;ze.nodes[Qe].y0=Mt[1]-Wt/2,ze.nodes[Qe].y1=Mt[1]+Wt/2}if(ae.arrangement==="snap"){be=ze.nodes;var qt=ct(be);Ne(qt)}Ge.update(ze)}return{circular:Pe,key:re,trace:ae,guid:l.randstr(),horizontal:de,width:ue,height:me,nodePad:ae.node.pad,nodeLineColor:ae.node.line.color,nodeLineWidth:ae.node.line.width,linkLineColor:ae.link.line.color,linkLineWidth:ae.link.line.width,valueFormat:ae.valueformat,valueSuffix:ae.valuesuffix,textFont:ae.textfont,translateX:fe.x[0]*H.width+H.margin.l,translateY:H.height-fe.y[1]*H.height+H.margin.t,dragParallel:de?me:ue,dragPerpendicular:de?ue:me,arrangement:ae.arrangement,sankey:Ge,graph:ze,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function x(H,oe,re){var ee=u(oe.color),ae=oe.source.label+"|"+oe.target.label,fe=ae+"__"+re;return oe.trace=H.trace,oe.curveNumber=H.trace.index,{circular:H.circular,key:fe,traceId:H.key,pointNumber:oe.pointNumber,link:oe,tinyColorHue:c.tinyRGB(ee),tinyColorAlpha:ee.getAlpha(),linkPath:y,linkLineColor:H.linkLineColor,linkLineWidth:H.linkLineWidth,valueFormat:H.valueFormat,valueSuffix:H.valueSuffix,sankey:H.sankey,parent:H,interactionState:H.interactionState,flow:oe.flow}}function w(H){var oe="",re=H.width/2,ee=H.circularPathData;return H.circularLinkType==="top"?oe="M "+ee.targetX+" "+(ee.targetY+re)+" L"+ee.rightInnerExtent+" "+(ee.targetY+re)+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightSmallArcRadius+re)+" 0 0 1 "+(ee.rightFullExtent-re)+" "+(ee.targetY-ee.rightSmallArcRadius)+"L"+(ee.rightFullExtent-re)+" "+ee.verticalRightInnerExtent+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightLargeArcRadius+re)+" 0 0 1 "+ee.rightInnerExtent+" "+(ee.verticalFullExtent-re)+"L"+ee.leftInnerExtent+" "+(ee.verticalFullExtent-re)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftLargeArcRadius+re)+" 0 0 1 "+(ee.leftFullExtent+re)+" "+ee.verticalLeftInnerExtent+"L"+(ee.leftFullExtent+re)+" "+(ee.sourceY-ee.leftSmallArcRadius)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftSmallArcRadius+re)+" 0 0 1 "+ee.leftInnerExtent+" "+(ee.sourceY+re)+"L"+ee.sourceX+" "+(ee.sourceY+re)+"L"+ee.sourceX+" "+(ee.sourceY-re)+"L"+ee.leftInnerExtent+" "+(ee.sourceY-re)+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftSmallArcRadius-re)+" 0 0 0 "+(ee.leftFullExtent-re)+" "+(ee.sourceY-ee.leftSmallArcRadius)+"L"+(ee.leftFullExtent-re)+" "+ee.verticalLeftInnerExtent+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftLargeArcRadius-re)+" 0 0 0 "+ee.leftInnerExtent+" "+(ee.verticalFullExtent+re)+"L"+ee.rightInnerExtent+" "+(ee.verticalFullExtent+re)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightLargeArcRadius-re)+" 0 0 0 "+(ee.rightFullExtent+re)+" "+ee.verticalRightInnerExtent+"L"+(ee.rightFullExtent+re)+" "+(ee.targetY-ee.rightSmallArcRadius)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightSmallArcRadius-re)+" 0 0 0 "+ee.rightInnerExtent+" "+(ee.targetY-re)+"L"+ee.targetX+" "+(ee.targetY-re)+"Z":oe="M "+ee.targetX+" "+(ee.targetY-re)+" L"+ee.rightInnerExtent+" "+(ee.targetY-re)+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightSmallArcRadius+re)+" 0 0 0 "+(ee.rightFullExtent-re)+" "+(ee.targetY+ee.rightSmallArcRadius)+"L"+(ee.rightFullExtent-re)+" "+ee.verticalRightInnerExtent+"A"+(ee.rightLargeArcRadius+re)+" "+(ee.rightLargeArcRadius+re)+" 0 0 0 "+ee.rightInnerExtent+" "+(ee.verticalFullExtent+re)+"L"+ee.leftInnerExtent+" "+(ee.verticalFullExtent+re)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftLargeArcRadius+re)+" 0 0 0 "+(ee.leftFullExtent+re)+" "+ee.verticalLeftInnerExtent+"L"+(ee.leftFullExtent+re)+" "+(ee.sourceY+ee.leftSmallArcRadius)+"A"+(ee.leftLargeArcRadius+re)+" "+(ee.leftSmallArcRadius+re)+" 0 0 0 "+ee.leftInnerExtent+" "+(ee.sourceY-re)+"L"+ee.sourceX+" "+(ee.sourceY-re)+"L"+ee.sourceX+" "+(ee.sourceY+re)+"L"+ee.leftInnerExtent+" "+(ee.sourceY+re)+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftSmallArcRadius-re)+" 0 0 1 "+(ee.leftFullExtent-re)+" "+(ee.sourceY+ee.leftSmallArcRadius)+"L"+(ee.leftFullExtent-re)+" "+ee.verticalLeftInnerExtent+"A"+(ee.leftLargeArcRadius-re)+" "+(ee.leftLargeArcRadius-re)+" 0 0 1 "+ee.leftInnerExtent+" "+(ee.verticalFullExtent-re)+"L"+ee.rightInnerExtent+" "+(ee.verticalFullExtent-re)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightLargeArcRadius-re)+" 0 0 1 "+(ee.rightFullExtent+re)+" "+ee.verticalRightInnerExtent+"L"+(ee.rightFullExtent+re)+" "+(ee.targetY+ee.rightSmallArcRadius)+"A"+(ee.rightLargeArcRadius-re)+" "+(ee.rightSmallArcRadius-re)+" 0 0 1 "+ee.rightInnerExtent+" "+(ee.targetY+re)+"L"+ee.targetX+" "+(ee.targetY+re)+"Z",oe}function y(){var H=.5;function oe(re){if(re.link.circular)return w(re.link);var ee=re.link.source.x1,ae=re.link.target.x0,fe=g(ee,ae),de=fe(H),pe=fe(1-H),W=re.link.y0-re.link.width/2,ue=re.link.y0+re.link.width/2,me=re.link.y1-re.link.width/2,be=re.link.y1+re.link.width/2;return"M"+ee+","+W+"C"+de+","+W+" "+pe+","+me+" "+ae+","+me+"L"+ae+","+be+"C"+pe+","+be+" "+de+","+ue+" "+ee+","+ue+"Z"}return oe}function T(H,oe){var re=u(oe.color),ee=r.nodePadAcross,ae=H.nodePad/2;oe.dx=oe.x1-oe.x0,oe.dy=oe.y1-oe.y0;var fe=oe.dx,de=Math.max(.5,oe.dy),pe="node_"+oe.pointNumber;return oe.group&&(pe=l.randstr()),oe.trace=H.trace,oe.curveNumber=H.trace.index,{index:oe.pointNumber,key:pe,partOfGroup:oe.partOfGroup||!1,group:oe.group,traceId:H.key,trace:H.trace,node:oe,nodePad:H.nodePad,nodeLineColor:H.nodeLineColor,nodeLineWidth:H.nodeLineWidth,textFont:H.textFont,size:H.horizontal?H.height:H.width,visibleWidth:Math.ceil(fe),visibleHeight:de,zoneX:-ee,zoneY:-ae,zoneWidth:fe+2*ee,zoneHeight:de+2*ae,labelY:H.horizontal?oe.dy/2+1:oe.dx/2+1,left:oe.originalLayer===1,sizeAcross:H.width,forceLayouts:H.forceLayouts,horizontal:H.horizontal,darkBackground:re.getBrightness()<=128,tinyColorHue:c.tinyRGB(re),tinyColorAlpha:re.getAlpha(),valueFormat:H.valueFormat,valueSuffix:H.valueSuffix,sankey:H.sankey,graph:H.graph,arrangement:H.arrangement,uniqueNodeLabelPathId:[H.guid,H.key,pe].join("_"),interactionState:H.interactionState,figure:H}}function M(H){H.attr("transform",function(oe){return h(oe.node.x0.toFixed(3),oe.node.y0.toFixed(3))})}function P(H){H.call(M)}function L(H,oe){H.call(P),oe.attr("d",y())}function I(H){H.attr("width",function(oe){return oe.node.x1-oe.node.x0}).attr("height",function(oe){return oe.visibleHeight})}function E(H){return H.link.width>1||H.linkLineWidth>0}function k(H){var oe=h(H.translateX,H.translateY);return oe+(H.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function C(H){return h(H.horizontal?0:H.labelY,H.horizontal?H.labelY:0)}function D(H){return a.svg.line()([[H.horizontal?H.left?-H.sizeAcross:H.visibleWidth+r.nodeTextOffsetHorizontal:r.nodeTextOffsetHorizontal,0],[H.horizontal?H.left?-r.nodeTextOffsetHorizontal:H.sizeAcross:H.visibleHeight-r.nodeTextOffsetHorizontal,0]])}function F(H){return H.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)"}function N(H){return H.horizontal?"scale(1 1)":"scale(-1 1)"}function G(H){return H.darkBackground&&!H.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function U(H){return H.horizontal&&H.left?"100%":"0%"}function X(H,oe,re){H.on(".basic",null).on("mouseover.basic",function(ee){!ee.interactionState.dragInProgress&&!ee.partOfGroup&&(re.hover(this,ee,oe),ee.interactionState.hovered=[this,ee])}).on("mousemove.basic",function(ee){!ee.interactionState.dragInProgress&&!ee.partOfGroup&&(re.follow(this,ee),ee.interactionState.hovered=[this,ee])}).on("mouseout.basic",function(ee){!ee.interactionState.dragInProgress&&!ee.partOfGroup&&(re.unhover(this,ee,oe),ee.interactionState.hovered=!1)}).on("click.basic",function(ee){ee.interactionState.hovered&&(re.unhover(this,ee,oe),ee.interactionState.hovered=!1),!ee.interactionState.dragInProgress&&!ee.partOfGroup&&re.select(this,ee,oe)})}function z(H,oe,re,ee){var ae=a.behavior.drag().origin(function(fe){return{x:fe.node.x0+fe.visibleWidth/2,y:fe.node.y0+fe.visibleHeight/2}}).on("dragstart",function(fe){if(fe.arrangement!=="fixed"&&(l.ensureSingle(ee._fullLayout._infolayer,"g","dragcover",function(pe){ee._fullLayout._dragCover=pe}),l.raiseToTop(this),fe.interactionState.dragInProgress=fe.node,$(fe.node),fe.interactionState.hovered&&(re.nodeEvents.unhover.apply(0,fe.interactionState.hovered),fe.interactionState.hovered=!1),fe.arrangement==="snap")){var de=fe.traceId+"|"+fe.key;fe.forceLayouts[de]?fe.forceLayouts[de].alpha(1):B(H,de,fe),j(H,oe,fe,de,ee)}}).on("drag",function(fe){if(fe.arrangement!=="fixed"){var de=a.event.x,pe=a.event.y;fe.arrangement==="snap"?(fe.node.x0=de-fe.visibleWidth/2,fe.node.x1=de+fe.visibleWidth/2,fe.node.y0=pe-fe.visibleHeight/2,fe.node.y1=pe+fe.visibleHeight/2):(fe.arrangement==="freeform"&&(fe.node.x0=de-fe.visibleWidth/2,fe.node.x1=de+fe.visibleWidth/2),pe=Math.max(0,Math.min(fe.size-fe.visibleHeight/2,pe)),fe.node.y0=pe-fe.visibleHeight/2,fe.node.y1=pe+fe.visibleHeight/2),$(fe.node),fe.arrangement!=="snap"&&(fe.sankey.update(fe.graph),L(H.filter(ie(fe)),oe))}}).on("dragend",function(fe){if(fe.arrangement!=="fixed"){fe.interactionState.dragInProgress=!1;for(var de=0;de<fe.node.childrenNodes.length;de++)fe.node.childrenNodes[de].x=fe.node.x,fe.node.childrenNodes[de].y=fe.node.y;fe.arrangement!=="snap"&&K(fe,ee)}});H.on(".drag",null).call(ae)}function B(H,oe,re,ee){se(re.graph.nodes);var ae=re.graph.nodes.filter(function(fe){return fe.originalX===re.node.originalX}).filter(function(fe){return!fe.partOfGroup});re.forceLayouts[oe]=o.forceSimulation(ae).alphaDecay(0).force("collide",o.forceCollide().radius(function(fe){return fe.dy/2+re.nodePad/2}).strength(1).iterations(r.forceIterations)).force("constrain",V(H,oe,ae,re)).stop()}function j(H,oe,re,ee,ae){window.requestAnimationFrame(function fe(){var de;for(de=0;de<r.forceTicksPerFrame;de++)re.forceLayouts[ee].tick();var pe=re.graph.nodes;if(Q(pe),re.sankey.update(re.graph),L(H.filter(ie(re)),oe),re.forceLayouts[ee].alpha()>0)window.requestAnimationFrame(fe);else{var W=re.node.originalX;re.node.x0=W-re.visibleWidth/2,re.node.x1=W+re.visibleWidth/2,K(re,ae)}})}function V(H,oe,re,ee){return function(){for(var fe=0,de=0;de<re.length;de++){var pe=re[de];pe===ee.interactionState.dragInProgress?(pe.x=pe.lastDraggedX,pe.y=pe.lastDraggedY):(pe.vx=(pe.originalX-pe.x)/r.forceTicksPerFrame,pe.y=Math.min(ee.size-pe.dy/2,Math.max(pe.dy/2,pe.y))),fe=Math.max(fe,Math.abs(pe.vx),Math.abs(pe.vy))}!ee.interactionState.dragInProgress&&fe<.1&&ee.forceLayouts[oe].alpha()>0&&ee.forceLayouts[oe].alpha(0)}}function K(H,oe){for(var re=[],ee=[],ae=0;ae<H.graph.nodes.length;ae++){var fe=(H.graph.nodes[ae].x0+H.graph.nodes[ae].x1)/2,de=(H.graph.nodes[ae].y0+H.graph.nodes[ae].y1)/2;re.push(fe/H.figure.width),ee.push(de/H.figure.height)}b.call("_guiRestyle",oe,{"node.x":[re],"node.y":[ee]},H.trace.index).then(function(){oe._fullLayout._dragCover&&oe._fullLayout._dragCover.remove()})}function te(H){var oe=[],re;for(re=0;re<H.length;re++)H[re].originalX=(H[re].x0+H[re].x1)/2,H[re].originalY=(H[re].y0+H[re].y1)/2,oe.indexOf(H[re].originalX)===-1&&oe.push(H[re].originalX);for(oe.sort(function(ee,ae){return ee-ae}),re=0;re<H.length;re++)H[re].originalLayerIndex=oe.indexOf(H[re].originalX),H[re].originalLayer=H[re].originalLayerIndex/(oe.length-1)}function $(H){H.lastDraggedX=H.x0+H.dx/2,H.lastDraggedY=H.y0+H.dy/2}function ie(H){return function(oe){return oe.node.originalX===H.node.originalX}}function se(H){for(var oe=0;oe<H.length;oe++)H[oe].y=(H[oe].y0+H[oe].y1)/2,H[oe].x=(H[oe].x0+H[oe].x1)/2}function Q(H){for(var oe=0;oe<H.length;oe++)H[oe].y0=H[oe].y-H[oe].dy/2,H[oe].y1=H[oe].y0+H[oe].dy,H[oe].x0=H[oe].x-H[oe].dx/2,H[oe].x1=H[oe].x0+H[oe].dx}v.exports=function(H,oe,re,ee,ae){var fe=!1;l.ensureSingle(H._fullLayout._infolayer,"g","first-render",function(){fe=!0});var de=H._fullLayout._dragCover,pe=re.filter(function(Ae){return d(Ae).trace.visible}).map(m.bind(null,ee)),W=oe.selectAll("."+r.cn.sankey).data(pe,s);W.exit().remove(),W.enter().append("g").classed(r.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",k),W.each(function(Ae,Be){H._fullData[Be]._sankey=Ae;var qe="bgsankey-"+Ae.trace.uid+"-"+Be;l.ensureSingle(H._fullLayout._draggers,"rect",qe),H._fullData[Be]._bgRect=a.select("."+qe),H._fullData[Be]._bgRect.style("pointer-events","all").attr("width",Ae.width).attr("height",Ae.height).attr("x",Ae.translateX).attr("y",Ae.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),W.transition().ease(r.ease).duration(r.duration).attr("transform",k);var ue=W.selectAll("."+r.cn.sankeyLinks).data(p,s);ue.enter().append("g").classed(r.cn.sankeyLinks,!0).style("fill","none");var me=ue.selectAll("."+r.cn.sankeyLink).data(function(Ae){var Be=Ae.graph.links;return Be.filter(function(qe){return qe.value}).map(x.bind(null,Ae))},s);me.enter().append("path").classed(r.cn.sankeyLink,!0).call(X,W,ae.linkEvents),me.style("stroke",function(Ae){return E(Ae)?c.tinyRGB(u(Ae.linkLineColor)):Ae.tinyColorHue}).style("stroke-opacity",function(Ae){return E(Ae)?c.opacity(Ae.linkLineColor):Ae.tinyColorAlpha}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}).style("stroke-width",function(Ae){return E(Ae)?Ae.linkLineWidth:1}).attr("d",y()),me.style("opacity",function(){return H._context.staticPlot||fe||de?1:0}).transition().ease(r.ease).duration(r.duration).style("opacity",1),me.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var be=W.selectAll("."+r.cn.sankeyNodeSet).data(p,s);be.enter().append("g").classed(r.cn.sankeyNodeSet,!0),be.style("cursor",function(Ae){switch(Ae.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var Me=be.selectAll("."+r.cn.sankeyNode).data(function(Ae){var Be=Ae.graph.nodes;return te(Be),Be.map(T.bind(null,Ae))},s);Me.enter().append("g").classed(r.cn.sankeyNode,!0).call(M).style("opacity",function(Ae){return(H._context.staticPlot||fe)&&!Ae.partOfGroup?1:0}),Me.call(X,W,ae.nodeEvents).call(z,me,ae,H),Me.transition().ease(r.ease).duration(r.duration).call(M).style("opacity",function(Ae){return Ae.partOfGroup?0:1}),Me.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var Pe=Me.selectAll("."+r.cn.nodeRect).data(p);Pe.enter().append("rect").classed(r.cn.nodeRect,!0).call(I),Pe.style("stroke-width",function(Ae){return Ae.nodeLineWidth}).style("stroke",function(Ae){return c.tinyRGB(u(Ae.nodeLineColor))}).style("stroke-opacity",function(Ae){return c.opacity(Ae.nodeLineColor)}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}),Pe.transition().ease(r.ease).duration(r.duration).call(I);var Ge=Me.selectAll("."+r.cn.nodeCapture).data(p);Ge.enter().append("rect").classed(r.cn.nodeCapture,!0).style("fill-opacity",0),Ge.attr("x",function(Ae){return Ae.zoneX}).attr("y",function(Ae){return Ae.zoneY}).attr("width",function(Ae){return Ae.zoneWidth}).attr("height",function(Ae){return Ae.zoneHeight});var ze=Me.selectAll("."+r.cn.nodeCentered).data(p);ze.enter().append("g").classed(r.cn.nodeCentered,!0).attr("transform",C),ze.transition().ease(r.ease).duration(r.duration).attr("transform",C);var Qe=ze.selectAll("."+r.cn.nodeLabelGuide).data(p);Qe.enter().append("path").classed(r.cn.nodeLabelGuide,!0).attr("id",function(Ae){return Ae.uniqueNodeLabelPathId}).attr("d",D).attr("transform",F),Qe.transition().ease(r.ease).duration(r.duration).attr("d",D).attr("transform",F);var tt=ze.selectAll("."+r.cn.nodeLabel).data(p);tt.enter().append("text").classed(r.cn.nodeLabel,!0).attr("transform",N).style("cursor","default").style("fill","black"),tt.style("text-shadow",function(Ae){return Ae.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":"none"}).each(function(Ae){t.font(tt,Ae.textFont)}),tt.transition().ease(r.ease).duration(r.duration).attr("transform",N);var Ce=tt.selectAll("."+r.cn.nodeLabelTextPath).data(p);Ce.enter().append("textPath").classed(r.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(Ae){return"#"+Ae.uniqueNodeLabelPathId}).attr("startOffset",U).style("fill",G),Ce.text(function(Ae){return Ae.horizontal||Ae.node.dy>5?Ae.node.label:""}).attr("text-anchor",function(Ae){return Ae.horizontal&&Ae.left?"end":"start"}),Ce.transition().ease(r.ease).duration(r.duration).attr("startOffset",U).style("fill",G)}},{"../../components/color":643,"../../components/drawing":665,"../../lib":778,"../../lib/gup":775,"../../registry":911,"./constants":1180,"@plotly/d3-sankey":56,"@plotly/d3-sankey-circular":55,d3:169,"d3-force":160,"d3-interpolate":162,tinycolor2:576}],1185:[function(e,v,S){v.exports=function(a,u){for(var c=a.cd,t=[],f=c[0].trace,n=f._sankey.graph.nodes,o=0;o<n.length;o++){var l=n[o];if(!l.partOfGroup){var h=[(l.x0+l.x1)/2,(l.y0+l.y1)/2];f.orientation==="v"&&h.reverse(),u&&u.contains(h,!1,o,a)&&t.push({pointNumber:l.pointNumber})}}return t}},{}],1186:[function(e,v,S){var r=e("../../lib");v.exports=function(u,c){for(var t=0;t<u.length;t++)u[t].i=t;r.mergeArray(c.text,u,"tx"),r.mergeArray(c.texttemplate,u,"txt"),r.mergeArray(c.hovertext,u,"htx"),r.mergeArray(c.customdata,u,"data"),r.mergeArray(c.textposition,u,"tp"),c.textfont&&(r.mergeArrayCastPositive(c.textfont.size,u,"ts"),r.mergeArray(c.textfont.color,u,"tc"),r.mergeArray(c.textfont.family,u,"tf"));var f=c.marker;if(f){r.mergeArrayCastPositive(f.size,u,"ms"),r.mergeArrayCastPositive(f.opacity,u,"mo"),r.mergeArray(f.symbol,u,"mx"),r.mergeArray(f.color,u,"mc");var n=f.line;f.line&&(r.mergeArray(n.color,u,"mlc"),r.mergeArrayCastPositive(n.width,u,"mlw"));var o=f.gradient;o&&o.type!=="none"&&(r.mergeArray(o.type,u,"mgt"),r.mergeArray(o.color,u,"mgc"))}}},{"../../lib":778}],1187:[function(e,v,S){var r=e("../../plots/template_attributes").texttemplateAttrs,a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../../components/colorscale/attributes"),c=e("../../plots/font_attributes"),t=e("../../components/drawing/attributes").dash,f=e("../../components/drawing"),n=e("./constants"),o=e("../../lib/extend").extendFlat;function l(s){return{valType:"any",dflt:0,editType:"calc"}}function h(s){return{valType:"any",editType:"calc"}}function i(s){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}v.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:l(),yperiod:l(),xperiod0:h(),yperiod0:h(),xperiodalignment:i(),yperiodalignment:i(),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:r({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:a({},{keys:n.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:o({},t,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:o({symbol:{valType:"enumerated",values:f.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:o({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},u("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},u("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:c({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorscale/attributes":650,"../../components/drawing":665,"../../components/drawing/attributes":664,"../../lib/extend":768,"../../plots/font_attributes":856,"../../plots/template_attributes":906,"./constants":1191}],1188:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM,f=e("./subtypes"),n=e("./colorscale_calc"),o=e("./arrays_to_calcdata"),l=e("./calc_selection");function h(b,m){var x=b._fullLayout,w=u.getFromId(b,m.xaxis||"x"),y=u.getFromId(b,m.yaxis||"y"),T=w.makeCalcdata(m,"x"),M=y.makeCalcdata(m,"y"),P=c(m,w,"x",T),L=c(m,y,"y",M),I=m._length,E=new Array(I),k=m.ids,C=g(m,x,w,y),D=!1,F,N,G,U,X,z;p(x,m);var B="x",j="y",V;if(C)a.pushUnique(C.traceIndices,m._expandedIndex),F=C.orientation==="v",F?(j="s",V="x"):(B="s",V="y"),X=C.stackgaps==="interpolate";else{var K=s(m,I);i(b,m,w,y,P,L,K)}var te=!!m.xperiodalignment,$=!!m.yperiodalignment;for(N=0;N<I;N++){var ie=E[N]={},se=r(P[N]),Q=r(L[N]);se&&Q?(ie[B]=P[N],ie[j]=L[N],te&&(ie.orig_x=T[N]),$&&(ie.orig_y=M[N])):C&&(F?se:Q)?(ie[V]=F?P[N]:L[N],ie.gap=!0,X?(ie.s=t,D=!0):ie.s=0):ie[B]=ie[j]=t,k&&(ie.id=String(k[N]))}if(o(E,m),n(b,m),l(E,m),C){for(N=0;N<E.length;)E[N][V]===t?E.splice(N,1):N++;if(a.sort(E,function(ee,ae){return ee[V]-ae[V]||ee.i-ae.i}),D){for(N=0;N<E.length-1&&E[N].gap;)N++;for(z=E[N].s,z||(z=E[N].s=0),G=0;G<N;G++)E[G].s=z;for(U=E.length-1;U>N&&E[U].gap;)U--;for(z=E[U].s,G=E.length-1;G>U;G--)E[G].s=z;for(;N<U;)if(N++,E[N].gap){for(G=N+1;E[G].gap;)G++;for(var H=E[N-1][V],oe=E[N-1].s,re=(E[G].s-oe)/(E[G][V]-H);N<G;)E[N].s=oe+(E[N][V]-H)*re,N++}}}return E}function i(b,m,x,w,y,T,M){var P=m._length,L=b._fullLayout,I=x._id,E=w._id,k=L._firstScatter[d(m)]===m.uid,C=(g(m,L,x,w)||{}).orientation,D=m.fill;x._minDtick=0,w._minDtick=0;var F={padded:!0},N={padded:!0};M&&(F.ppad=N.ppad=M);var G=P<2||y[0]!==y[P-1]||T[0]!==T[P-1];G&&(D==="tozerox"||D==="tonextx"&&(k||C==="h"))?F.tozero=!0:!(m.error_y||{}).visible&&(D==="tonexty"||D==="tozeroy"||!f.hasMarkers(m)&&!f.hasText(m))&&(F.padded=!1,F.ppad=0),G&&(D==="tozeroy"||D==="tonexty"&&(k||C==="v"))?N.tozero=!0:(D==="tonextx"||D==="tozerox")&&(N.padded=!1),I&&(m._extremes[I]=u.findExtremes(x,y,F)),E&&(m._extremes[E]=u.findExtremes(w,T,N))}function s(b,m){if(!!f.hasMarkers(b)){var x=b.marker,w=1.6*(b.marker.sizeref||1),y;if(b.marker.sizemode==="area"?y=function(I){return Math.max(Math.sqrt((I||0)/w),3)}:y=function(I){return Math.max((I||0)/w,3)},a.isArrayOrTypedArray(x.size)){var T={type:"linear"};u.setConvert(T);for(var M=T.makeCalcdata(b.marker,"size"),P=new Array(m),L=0;L<m;L++)P[L]=y(M[L]);return P}else return y(x.size)}}function p(b,m){var x=d(m),w=b._firstScatter;w[x]||(w[x]=m.uid)}function d(b){var m=b.stackgroup;return b.xaxis+b.yaxis+b.type+(m?"-"+m:"")}function g(b,m,x,w){var y=b.stackgroup;if(!!y){var T=m._scatterStackOpts[x._id+w._id][y],M=T.orientation==="v"?w:x;if(M.type==="linear"||M.type==="log")return T}}v.exports={calc:h,calcMarkerSize:s,calcAxisExpansion:i,setFirstScatter:p,getStackOpts:g}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"./arrays_to_calcdata":1186,"./calc_selection":1189,"./colorscale_calc":1190,"./subtypes":1212,"fast-isnumeric":241}],1189:[function(e,v,S){var r=e("../../lib");v.exports=function(u,c){r.isArrayOrTypedArray(c.selectedpoints)&&r.tagSelected(u,c)}},{"../../lib":778}],1190:[function(e,v,S){var r=e("../../components/colorscale/helpers").hasColorscale,a=e("../../components/colorscale/calc"),u=e("./subtypes");v.exports=function(t,f){u.hasLines(f)&&r(f,"line")&&a(t,f,{vals:f.line.color,containerStr:"line",cLetter:"c"}),u.hasMarkers(f)&&(r(f,"marker")&&a(t,f,{vals:f.marker.color,containerStr:"marker",cLetter:"c"}),r(f,"marker.line")&&a(t,f,{vals:f.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"./subtypes":1212}],1191:[function(e,v,S){v.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],1192:[function(e,v,S){var r=e("./calc");v.exports=function(t,f){var n=f.xaxis,o=f.yaxis,l=n._id+o._id,h=t._fullLayout._scatterStackOpts[l];if(!!h){var i=t.calcdata,s,p,d,g,b,m,x,w,y,T,M,P,L,I,E;for(var k in h){T=h[k];var C=T.traceIndices;if(!!C.length){for(M=T.stackgaps==="interpolate",P=T.groupnorm,T.orientation==="v"?(L="x",I="y"):(L="y",I="x"),E=new Array(C.length),s=0;s<E.length;s++)E[s]=!1;m=i[C[0]];var D=new Array(m.length);for(s=0;s<m.length;s++)D[s]=m[s][L];for(s=1;s<C.length;s++){for(b=i[C[s]],p=d=0;p<b.length;p++){for(x=b[p][L];x>D[d]&&d<D.length;d++)a(b,p,D[d],s,E,M,L),p++;if(x!==D[d]){for(g=0;g<s;g++)a(i[C[g]],d,x,g,E,M,L);D.splice(d,0,x)}d++}for(;d<D.length;d++)a(b,p,D[d],s,E,M,L),p++}var F=D.length;for(p=0;p<m.length;p++){for(w=m[p][I]=m[p].s,s=1;s<C.length;s++)b=i[C[s]],b[0].trace._rawLength=b[0].trace._length,b[0].trace._length=F,w+=b[p].s,b[p][I]=w;if(P)for(y=(P==="fraction"?w:w/100)||1,s=0;s<C.length;s++){var N=i[C[s]][p];N[I]/=y,N.sNorm=N.s/y}}for(s=0;s<C.length;s++){b=i[C[s]];var G=b[0].trace,U=r.calcMarkerSize(G,G._rawLength),X=Array.isArray(U);if(U&&E[s]||X){var z=U;for(U=new Array(F),p=0;p<F;p++)U[p]=b[p].gap?0:X?z[b[p].i]:z}var B=new Array(F),j=new Array(F);for(p=0;p<F;p++)B[p]=b[p].x,j[p]=b[p].y;r.calcAxisExpansion(t,G,n,o,B,j,U),b[0].t.orientation=T.orientation}}}}};function a(c,t,f,n,o,l,h){o[n]=!0;var i={i:null,gap:!0,s:0};if(i[h]=f,c.splice(t,0,i),t&&f===c[t-1][h]){var s=c[t-1];i.s=s.s,i.i=s.i,i.gap=s.gap}else l&&(i.s=u(c,t,f,h));t||(c[0].t=c[1].t,c[0].trace=c[1].trace,delete c[1].t,delete c[1].trace)}function u(c,t,f,n){var o=c[t-1],l=c[t+1];return l?o?o.s+(l.s-o.s)*(f-o[n])/(l[n]-o[n]):l.s:o.s}},{"./calc":1188}],1193:[function(e,v,S){v.exports=function(a){for(var u=0;u<a.length;u++){var c=a[u];if(c.type==="scatter"){var t=c.fill;if(!(t==="none"||t==="toself")&&(c.opacity=void 0,t==="tonexty"||t==="tonextx"))for(var f=u-1;f>=0;f--){var n=a[f];if(n.type==="scatter"&&n.xaxis===c.xaxis&&n.yaxis===c.yaxis){n.opacity=void 0;break}}}}}},{}],1194:[function(e,v,S){var r=e("../../lib"),a=e("../../registry"),u=e("./attributes"),c=e("./constants"),t=e("./subtypes"),f=e("./xy_defaults"),n=e("./period_defaults"),o=e("./stack_defaults"),l=e("./marker_defaults"),h=e("./line_defaults"),i=e("./line_shape_defaults"),s=e("./text_defaults"),p=e("./fillcolor_defaults");v.exports=function(g,b,m,x){function w(k,C){return r.coerce(g,b,u,k,C)}var y=f(g,b,x,w);if(y||(b.visible=!1),!!b.visible){n(g,b,x,w);var T=o(g,b,x,w),M=!T&&y<c.PTS_LINESONLY?"lines+markers":"lines";w("text"),w("hovertext"),w("mode",M),t.hasLines(b)&&(h(g,b,m,x,w),i(g,b,w),w("connectgaps"),w("line.simplify")),t.hasMarkers(b)&&l(g,b,m,x,w,{gradient:!0}),t.hasText(b)&&(w("texttemplate"),s(g,b,x,w));var P=[];(t.hasMarkers(b)||t.hasText(b))&&(w("cliponaxis"),w("marker.maxdisplayed"),P.push("points")),w("fill",T?T.fillDflt:"none"),b.fill!=="none"&&(p(g,b,m,w),t.hasLines(b)||i(g,b,w));var L=(b.line||{}).color,I=(b.marker||{}).color;(b.fill==="tonext"||b.fill==="toself")&&P.push("fills"),w("hoveron",P.join("+")||"points"),b.hoveron!=="fills"&&w("hovertemplate");var E=a.getComponentMethod("errorbars","supplyDefaults");E(g,b,L||I||m,{axis:"y"}),E(g,b,L||I||m,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(b,w)}}},{"../../lib":778,"../../registry":911,"./attributes":1187,"./constants":1191,"./fillcolor_defaults":1195,"./line_defaults":1200,"./line_shape_defaults":1202,"./marker_defaults":1206,"./period_defaults":1207,"./stack_defaults":1210,"./subtypes":1212,"./text_defaults":1213,"./xy_defaults":1214}],1195:[function(e,v,S){var r=e("../../components/color"),a=e("../../lib").isArrayOrTypedArray;v.exports=function(c,t,f,n){var o=!1;if(t.marker){var l=t.marker.color,h=(t.marker.line||{}).color;l&&!a(l)?o=l:h&&!a(h)&&(o=h)}n("fillcolor",r.addOpacity((t.line||{}).color||o||f,.5))}},{"../../components/color":643,"../../lib":778}],1196:[function(e,v,S){var r=e("../../plots/cartesian/axes");v.exports=function(u,c,t){var f={},n={_fullLayout:t},o=r.getFromTrace(n,c,"x"),l=r.getFromTrace(n,c,"y");return f.xLabel=r.tickText(o,u.x,!0).text,f.yLabel=r.tickText(l,u.y,!0).text,f}},{"../../plots/cartesian/axes":828}],1197:[function(e,v,S){var r=e("../../components/color"),a=e("./subtypes");v.exports=function(c,t){var f,n;if(c.mode==="lines")return f=c.line.color,f&&r.opacity(f)?f:c.fillcolor;if(c.mode==="none")return c.fill?c.fillcolor:"";var o=t.mcc||(c.marker||{}).color,l=t.mlcc||((c.marker||{}).line||{}).color;return n=o&&r.opacity(o)?o:l&&r.opacity(l)&&(t.mlw||((c.marker||{}).line||{}).width)?l:"",n?r.opacity(n)<.3?r.addOpacity(n,.3):n:(f=(c.line||{}).color,f&&r.opacity(f)&&a.hasLines(c)&&c.line.width?f:c.fillcolor)}},{"../../components/color":643,"./subtypes":1212}],1198:[function(e,v,S){var r=e("../../lib"),a=e("../../components/fx"),u=e("../../registry"),c=e("./get_trace_color"),t=e("../../components/color"),f=r.fillText;v.exports=function(o,l,h,i){var s=o.cd,p=s[0].trace,d=o.xa,g=o.ya,b=d.c2p(l),m=g.c2p(h),x=[b,m],w=p.hoveron||"",y=p.mode.indexOf("markers")!==-1?3:.5;if(w.indexOf("points")!==-1){var T=function(de){var pe=Math.max(3,de.mrc||0),W=1-1/pe,ue=Math.abs(d.c2p(de.x)-b),me=ue<pe?W*ue/pe:ue-pe+W;return me},M=function(de){var pe=Math.max(3,de.mrc||0),W=1-1/pe,ue=Math.abs(g.c2p(de.y)-m);return ue<pe?W*ue/pe:ue-pe+W},P=function(de){var pe=Math.max(y,de.mrc||0),W=d.c2p(de.x)-b,ue=g.c2p(de.y)-m;return Math.max(Math.sqrt(W*W+ue*ue)-pe,1-y/pe)},L=a.getDistanceFunction(i,T,M,P);if(a.getClosest(s,L,o),o.index!==!1){var I=s[o.index],E=d.c2p(I.x,!0),k=g.c2p(I.y,!0),C=I.mrc||1;o.index=I.i;var D=s[0].t.orientation,F=D&&(I.sNorm||I.s),N=D==="h"?F:I.orig_x!==void 0?I.orig_x:I.x,G=D==="v"?F:I.orig_y!==void 0?I.orig_y:I.y;return r.extendFlat(o,{color:c(p,I),x0:E-C,x1:E+C,xLabelVal:N,y0:k-C,y1:k+C,yLabelVal:G,spikeDistance:P(I),hovertemplate:p.hovertemplate}),f(I,p,o),u.getComponentMethod("errorbars","hoverInfo")(I,p,o),[o]}}if(w.indexOf("fills")!==-1&&p._polygons){var U=p._polygons,X=[],z=!1,B=1/0,j=-1/0,V=1/0,K=-1/0,te,$,ie,se,Q,H,oe,re,ee;for(te=0;te<U.length;te++)ie=U[te],ie.contains(x)&&(z=!z,X.push(ie),V=Math.min(V,ie.ymin),K=Math.max(K,ie.ymax));if(z){V=Math.max(V,0),K=Math.min(K,g._length);var ae=(V+K)/2;for(te=0;te<X.length;te++)for(se=X[te].pts,$=1;$<se.length;$++)re=se[$-1][1],ee=se[$][1],re>ae!=ee>=ae&&(H=se[$-1][0],oe=se[$][0],ee-re&&(Q=H+(oe-H)*(ae-re)/(ee-re),B=Math.min(B,Q),j=Math.max(j,Q)));B=Math.max(B,0),j=Math.min(j,d._length);var fe=t.defaultLine;return t.opacity(p.fillcolor)?fe=p.fillcolor:t.opacity((p.line||{}).color)&&(fe=p.line.color),r.extendFlat(o,{distance:o.maxHoverDistance,x0:B,x1:j,y0:ae,y1:ae,color:fe,hovertemplate:!1}),delete o.index,p.text&&!Array.isArray(p.text)?o.text=String(p.text):o.text=p.name,[o]}}}},{"../../components/color":643,"../../components/fx":683,"../../lib":778,"../../registry":911,"./get_trace_color":1197}],1199:[function(e,v,S){var r=e("./subtypes");v.exports={hasLines:r.hasLines,hasMarkers:r.hasMarkers,hasText:r.hasText,isBubble:r.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"./arrays_to_calcdata":1186,"./attributes":1187,"./calc":1188,"./cross_trace_calc":1192,"./cross_trace_defaults":1193,"./defaults":1194,"./format_labels":1196,"./hover":1198,"./marker_colorbar":1205,"./plot":1208,"./select":1209,"./style":1211,"./subtypes":1212}],1200:[function(e,v,S){var r=e("../../lib").isArrayOrTypedArray,a=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults");v.exports=function(t,f,n,o,l,h){var i=(t.marker||{}).color;if(l("line.color",n),a(t,"line"))u(t,f,o,l,{prefix:"line.",cLetter:"c"});else{var s=(r(i)?!1:i)||n;l("line.color",s)}l("line.width"),(h||{}).noDash||l("line.dash")}},{"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"../../lib":778}],1201:[function(e,v,S){var r=e("../../constants/numerical"),a=r.BADNUM,u=r.LOG_CLIP,c=u+.5,t=u-.5,f=e("../../lib"),n=f.segmentsIntersect,o=f.constrain,l=e("./constants");v.exports=function(i,s){var p=s.xaxis,d=s.yaxis,g=p.type==="log",b=d.type==="log",m=p._length,x=d._length,w=s.connectGaps,y=s.baseTolerance,T=s.shape,M=T==="linear",P=s.fill&&s.fill!=="none",L=[],I=l.minTolerance,E=i.length,k=new Array(E),C=0,D,F,N,G,U,X,z,B,j,V,K,te,$,ie,se,Q;function H(zt){var $t=i[zt];if(!$t)return!1;var rr=s.linearized?p.l2p($t.x):p.c2p($t.x),Lt=s.linearized?d.l2p($t.y):d.c2p($t.y);if(rr===a){if(g&&(rr=p.c2p($t.x,!0)),rr===a)return!1;b&&Lt===a&&(rr*=Math.abs(p._m*x*(p._m>0?c:t)/(d._m*m*(d._m>0?c:t)))),rr*=1e3}if(Lt===a){if(b&&(Lt=d.c2p($t.y,!0)),Lt===a)return!1;Lt*=1e3}return[rr,Lt]}function oe(zt,$t,rr,Lt){var Ct=rr-zt,dt=Lt-$t,lt=.5-zt,Te=.5-$t,Le=Ct*Ct+dt*dt,Ue=Ct*lt+dt*Te;if(Ue>0&&Ue<Le){var et=lt*dt-Te*Ct;if(et*et<Le)return!0}}var re,ee;function ae(zt,$t){var rr=zt[0]/m,Lt=zt[1]/x,Ct=Math.max(0,-rr,rr-1,-Lt,Lt-1);return Ct&&re!==void 0&&oe(rr,Lt,re,ee)&&(Ct=0),Ct&&$t&&oe(rr,Lt,$t[0]/m,$t[1]/x)&&(Ct=0),(1+l.toleranceGrowth*Ct)*y}function fe(zt,$t){var rr=zt[0]-$t[0],Lt=zt[1]-$t[1];return Math.sqrt(rr*rr+Lt*Lt)}var de=l.maxScreensAway,pe=-m*de,W=m*(1+de),ue=-x*de,me=x*(1+de),be=[[pe,ue,W,ue],[W,ue,W,me],[W,me,pe,me],[pe,me,pe,ue]],Me,Pe,Ge,ze,Qe,tt;function Ce(zt,$t){for(var rr=[],Lt=0,Ct=0;Ct<4;Ct++){var dt=be[Ct],lt=n(zt[0],zt[1],$t[0],$t[1],dt[0],dt[1],dt[2],dt[3]);lt&&(!Lt||Math.abs(lt.x-rr[0][0])>1||Math.abs(lt.y-rr[0][1])>1)&&(lt=[lt.x,lt.y],Lt&&fe(lt,zt)<fe(rr[0],zt)?rr.unshift(lt):rr.push(lt),Lt++)}return rr}function Ae(zt){if(zt[0]<pe||zt[0]>W||zt[1]<ue||zt[1]>me)return[o(zt[0],pe,W),o(zt[1],ue,me)]}function Be(zt,$t){if(zt[0]===$t[0]&&(zt[0]===pe||zt[0]===W)||zt[1]===$t[1]&&(zt[1]===ue||zt[1]===me))return!0}function qe(zt,$t){var rr=[],Lt=Ae(zt),Ct=Ae($t);return Lt&&Ct&&Be(Lt,Ct)||(Lt&&rr.push(Lt),Ct&&rr.push(Ct)),rr}function Tt(zt,$t,rr){return function(Lt,Ct){var dt=Ae(Lt),lt=Ae(Ct),Te=[];if(dt&&lt&&Be(dt,lt))return Te;dt&&Te.push(dt),lt&&Te.push(lt);var Le=2*f.constrain((Lt[zt]+Ct[zt])/2,$t,rr)-((dt||Lt)[zt]+(lt||Ct)[zt]);if(Le){var Ue;dt&&lt?Ue=Le>0==dt[zt]>lt[zt]?dt:lt:Ue=dt||lt,Ue[zt]+=Le}return Te}}var At;T==="linear"||T==="spline"?At=Ce:T==="hv"||T==="vh"?At=qe:T==="hvh"?At=Tt(0,pe,W):T==="vhv"&&(At=Tt(1,ue,me));function Ne(zt,$t){var rr=$t[0]-zt[0],Lt=($t[1]-zt[1])/rr,Ct=(zt[1]*$t[0]-$t[1]*zt[0])/rr;return Ct>0?[Lt>0?pe:W,me]:[Lt>0?W:pe,ue]}function ct(zt){var $t=zt[0],rr=zt[1],Lt=$t===k[C-1][0],Ct=rr===k[C-1][1];if(!(Lt&&Ct))if(C>1){var dt=$t===k[C-2][0],lt=rr===k[C-2][1];Lt&&($t===pe||$t===W)&&dt?lt?C--:k[C-1]=zt:Ct&&(rr===ue||rr===me)&&lt?dt?C--:k[C-1]=zt:k[C++]=zt}else k[C++]=zt}function Mt(zt){k[C-1][0]!==zt[0]&&k[C-1][1]!==zt[1]&&ct([Ge,ze]),ct(zt),Qe=null,Ge=ze=0}function Wt(zt){if(re=zt[0]/m,ee=zt[1]/x,Me=zt[0]<pe?pe:zt[0]>W?W:0,Pe=zt[1]<ue?ue:zt[1]>me?me:0,Me||Pe){if(!C)k[C++]=[Me||zt[0],Pe||zt[1]];else if(Qe){var $t=At(Qe,zt);$t.length>1&&(Mt($t[0]),k[C++]=$t[1])}else tt=At(k[C-1],zt)[0],k[C++]=tt;var rr=k[C-1];Me&&Pe&&(rr[0]!==Me||rr[1]!==Pe)?(Qe&&(Ge!==Me&&ze!==Pe?ct(Ge&&ze?Ne(Qe,zt):[Ge||Me,ze||Pe]):Ge&&ze&&ct([Ge,ze])),ct([Me,Pe])):Ge-Me&&ze-Pe&&ct([Me||Ge,Pe||ze]),Qe=zt,Ge=Me,ze=Pe}else Qe&&Mt(At(Qe,zt)[0]),k[C++]=zt}for(D=0;D<E;D++)if(F=H(D),!!F){for(C=0,Qe=null,Wt(F),D++;D<E;D++){if(G=H(D),!G){if(w)continue;break}if(!M||!s.simplify){Wt(G);continue}var qt=H(D+1);if(V=fe(G,F),!(!(P&&(C===0||C===E-1))&&V<ae(G,qt)*I)){for(B=[(G[0]-F[0])/V,(G[1]-F[1])/V],U=F,K=V,te=ie=se=0,z=!1,N=G,D++;D<i.length;D++){if(X=qt,qt=H(D+1),!X){if(w)continue;break}if(j=[X[0]-F[0],X[1]-F[1]],Q=j[0]*B[1]-j[1]*B[0],ie=Math.min(ie,Q),se=Math.max(se,Q),se-ie>ae(X,qt))break;N=X,$=j[0]*B[0]+j[1]*B[1],$>K?(K=$,G=X,z=!1):$<te&&(te=$,U=X,z=!0)}if(z?(Wt(G),N!==U&&Wt(U)):(U!==F&&Wt(U),N!==G&&Wt(G)),Wt(N),D>=i.length||!X)break;Wt(X),F=X}}Qe&&ct([Ge||Qe[0],ze||Qe[1]]),L.push(k.slice(0,C))}return L}},{"../../constants/numerical":753,"../../lib":778,"./constants":1191}],1202:[function(e,v,S){v.exports=function(a,u,c){var t=c("line.shape");t==="spline"&&c("line.smoothing")}},{}],1203:[function(e,v,S){var r={tonextx:1,tonexty:1,tonext:1};v.exports=function(u,c,t){var f,n,o,l,h,i={},s=!1,p=-1,d=0,g=-1;for(n=0;n<t.length;n++)f=t[n][0].trace,o=f.stackgroup||"",o?o in i?h=i[o]:(h=i[o]=d,d++):f.fill in r&&g>=0?h=g:(h=g=d,d++),h<p&&(s=!0),f._groupIndex=p=h;var b=t.slice();s&&b.sort(function(x,w){var y=x[0].trace,T=w[0].trace;return y._groupIndex-T._groupIndex||y.index-T.index});var m={};for(n=0;n<b.length;n++)f=b[n][0].trace,o=f.stackgroup||"",f.visible===!0?(f._nexttrace=null,f.fill in r&&(l=m[o],f._prevtrace=l||null,l&&(l._nexttrace=f)),f._ownfill=f.fill&&(f.fill.substr(0,6)==="tozero"||f.fill==="toself"||f.fill.substr(0,2)==="to"&&!f._prevtrace),m[o]=f):f._prevtrace=f._nexttrace=f._ownfill=null;return b}},{}],1204:[function(e,v,S){var r=e("fast-isnumeric");v.exports=function(u){var c=u.marker,t=c.sizeref||1,f=c.sizemin||0,n=c.sizemode==="area"?function(o){return Math.sqrt(o/t)}:function(o){return o/t};return function(o){var l=n(o/2);return r(l)&&l>0?Math.max(l,f):0}}},{"fast-isnumeric":241}],1205:[function(e,v,S){v.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1206:[function(e,v,S){var r=e("../../components/color"),a=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults"),c=e("./subtypes");v.exports=function(f,n,o,l,h,i){var s=c.isBubble(f),p=(f.line||{}).color,d;if(i=i||{},p&&(o=p),h("marker.symbol"),h("marker.opacity",s?.7:1),h("marker.size"),h("marker.color",o),a(f,"marker")&&u(f,n,l,h,{prefix:"marker.",cLetter:"c"}),i.noSelect||(h("selected.marker.color"),h("unselected.marker.color"),h("selected.marker.size"),h("unselected.marker.size")),i.noLine||(p&&!Array.isArray(p)&&n.marker.color!==p?d=p:s?d=r.background:d=r.defaultLine,h("marker.line.color",d),a(f,"marker.line")&&u(f,n,l,h,{prefix:"marker.line.",cLetter:"c"}),h("marker.line.width",s?1:0)),s&&(h("marker.sizeref"),h("marker.sizemin"),h("marker.sizemode")),i.gradient){var g=h("marker.gradient.type");g!=="none"&&h("marker.gradient.color")}}},{"../../components/color":643,"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"./subtypes":1212}],1207:[function(e,v,S){var r=e("../../lib").dateTick0,a=e("../../constants/numerical"),u=a.ONEWEEK;function c(t,f){return t%u===0?r(f,1):r(f,0)}v.exports=function(f,n,o,l,h){if(h||(h={x:!0,y:!0}),h.x){var i=l("xperiod");i&&(l("xperiod0",c(i,n.xcalendar)),l("xperiodalignment"))}if(h.y){var s=l("yperiod");s&&(l("yperiod0",c(s,n.ycalendar)),l("yperiodalignment"))}}},{"../../constants/numerical":753,"../../lib":778}],1208:[function(e,v,S){var r=e("d3"),a=e("../../registry"),u=e("../../lib"),c=u.ensureSingle,t=u.identity,f=e("../../components/drawing"),n=e("./subtypes"),o=e("./line_points"),l=e("./link_traces"),h=e("../../lib/polygon").tester;v.exports=function(g,b,m,x,w,y){var T,M,P=!w,L=!!w&&w.duration>0,I=l(g,b,m);if(T=x.selectAll("g.trace").data(I,function(k){return k[0].trace.uid}),T.enter().append("g").attr("class",function(k){return"trace scatter trace"+k[0].trace.uid}).style("stroke-miterlimit",2),T.order(),i(g,T,b),L){y&&(M=y());var E=r.transition().duration(w.duration).ease(w.easing).each("end",function(){M&&M()}).each("interrupt",function(){M&&M()});E.each(function(){x.selectAll("g.trace").each(function(k,C){s(g,C,b,k,I,this,w)})})}else T.each(function(k,C){s(g,C,b,k,I,this,w)});P&&T.exit().remove(),x.selectAll("path:not([d])").remove()};function i(d,g,b){g.each(function(m){var x=c(r.select(this),"g","fills");f.setClipUrl(x,b.layerClipId,d);var w=m[0].trace,y=[];w._ownfill&&y.push("_ownFill"),w._nexttrace&&y.push("_nextFill");var T=x.selectAll("g").data(y,t);T.enter().append("g"),T.exit().each(function(M){w[M]=null}).remove(),T.order().each(function(M){w[M]=c(r.select(this),"path","js-fill")})})}function s(d,g,b,m,x,w,y){var T;p(d,g,b,m,x);var M=!!y&&y.duration>0;function P(Ce){return M?Ce.transition():Ce}var L=b.xaxis,I=b.yaxis,E=m[0].trace,k=E.line,C=r.select(w),D=c(C,"g","errorbars"),F=c(C,"g","lines"),N=c(C,"g","points"),G=c(C,"g","text");if(a.getComponentMethod("errorbars","plot")(d,D,b,y),E.visible!==!0)return;P(C).style("opacity",E.opacity);var U,X,z=E.fill.charAt(E.fill.length-1);z!=="x"&&z!=="y"&&(z=""),m[0][b.isRangePlot?"nodeRangePlot3":"node3"]=C;var B="",j=[],V=E._prevtrace;V&&(B=V._prevRevpath||"",X=V._nextFill,j=V._polygons);var K,te,$="",ie="",se,Q,H,oe,re,ee,ae,fe=[],de=u.noop;if(U=E._ownFill,n.hasLines(E)||E.fill!=="none"){for(X&&X.datum(m),["hv","vh","hvh","vhv"].indexOf(k.shape)!==-1?(se=f.steps(k.shape),Q=f.steps(k.shape.split("").reverse().join(""))):k.shape==="spline"?se=Q=function(Ce){var Ae=Ce[Ce.length-1];return Ce.length>1&&Ce[0][0]===Ae[0]&&Ce[0][1]===Ae[1]?f.smoothclosed(Ce.slice(1),k.smoothing):f.smoothopen(Ce,k.smoothing)}:se=Q=function(Ce){return"M"+Ce.join("L")},H=function(Ce){return Q(Ce.reverse())},fe=o(m,{xaxis:L,yaxis:I,connectGaps:E.connectgaps,baseTolerance:Math.max(k.width||1,3)/4,shape:k.shape,simplify:k.simplify,fill:E.fill}),ae=E._polygons=new Array(fe.length),T=0;T<fe.length;T++)E._polygons[T]=h(fe[T]);fe.length&&(oe=fe[0][0],re=fe[fe.length-1],ee=re[re.length-1]),de=function(Ce){return function(Ae){if(K=se(Ae),te=H(Ae),$?z?($+="L"+K.substr(1),ie=te+("L"+ie.substr(1))):($+="Z"+K,ie=te+"Z"+ie):($=K,ie=te),n.hasLines(E)&&Ae.length>1){var Be=r.select(this);if(Be.datum(m),Ce)P(Be.style("opacity",0).attr("d",K).call(f.lineGroupStyle)).style("opacity",1);else{var qe=P(Be);qe.attr("d",K),f.singleLineStyle(m,qe)}}}}}var pe=F.selectAll(".js-line").data(fe);P(pe.exit()).style("opacity",0).remove(),pe.each(de(!1)),pe.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(f.lineGroupStyle).each(de(!0)),f.setClipUrl(pe,b.layerClipId,d);function W(Ce){P(Ce).attr("d","M0,0Z")}fe.length?(U?(U.datum(m),oe&&ee&&(z?(z==="y"?oe[1]=ee[1]=I.c2p(0,!0):z==="x"&&(oe[0]=ee[0]=L.c2p(0,!0)),P(U).attr("d","M"+ee+"L"+oe+"L"+$.substr(1)).call(f.singleFillStyle)):P(U).attr("d",$+"Z").call(f.singleFillStyle))):X&&(E.fill.substr(0,6)==="tonext"&&$&&B?(E.fill==="tonext"?P(X).attr("d",$+"Z"+B+"Z").call(f.singleFillStyle):P(X).attr("d",$+"L"+B.substr(1)+"Z").call(f.singleFillStyle),E._polygons=E._polygons.concat(j)):(W(X),E._polygons=null)),E._prevRevpath=ie,E._prevPolygons=ae):(U?W(U):X&&W(X),E._polygons=E._prevRevpath=E._prevPolygons=null);function ue(Ce){return Ce.filter(function(Ae){return!Ae.gap&&Ae.vis})}function me(Ce){return Ce.filter(function(Ae){return Ae.vis})}function be(Ce){return Ce.filter(function(Ae){return!Ae.gap})}function Me(Ce){return Ce.id}function Pe(Ce){if(Ce.ids)return Me}function Ge(){return!1}function ze(Ce,Ae,Be){var qe,Tt,At,Ne=Be[0].trace,ct=n.hasMarkers(Ne),Mt=n.hasText(Ne),Wt=Pe(Ne),qt=Ge,zt=Ge;if(ct||Mt){var $t=t,rr=Ne.stackgroup,Lt=rr&&d._fullLayout._scatterStackOpts[L._id+I._id][rr].stackgaps==="infer zero";Ne.marker.maxdisplayed||Ne._needsCull?$t=Lt?me:ue:rr&&!Lt&&($t=be),ct&&(qt=$t),Mt&&(zt=$t)}Tt=Ce.selectAll("path.point"),qe=Tt.data(qt,Wt);var Ct=qe.enter().append("path").classed("point",!0);M&&Ct.call(f.pointStyle,Ne,d).call(f.translatePoints,L,I).style("opacity",0).transition().style("opacity",1),qe.order();var dt;ct&&(dt=f.makePointStyleFns(Ne)),qe.each(function(lt){var Te=r.select(this),Le=P(Te);At=f.translatePoint(lt,Le,L,I),At?(f.singlePointStyle(lt,Le,Ne,dt,d),b.layerClipId&&f.hideOutsideRangePoint(lt,Le,L,I,Ne.xcalendar,Ne.ycalendar),Ne.customdata&&Te.classed("plotly-customdata",lt.data!==null&&lt.data!==void 0)):Le.remove()}),M?qe.exit().transition().style("opacity",0).remove():qe.exit().remove(),Tt=Ae.selectAll("g"),qe=Tt.data(zt,Wt),qe.enter().append("g").classed("textpoint",!0).append("text"),qe.order(),qe.each(function(lt){var Te=r.select(this),Le=P(Te.select("text"));At=f.translatePoint(lt,Le,L,I),At?b.layerClipId&&f.hideOutsideRangePoint(lt,Te,L,I,Ne.xcalendar,Ne.ycalendar):Te.remove()}),qe.selectAll("text").call(f.textPointStyle,Ne,d).each(function(lt){var Te=L.c2p(lt.x),Le=I.c2p(lt.y);r.select(this).selectAll("tspan.line").each(function(){P(r.select(this)).attr({x:Te,y:Le})})}),qe.exit().remove()}N.datum(m),G.datum(m),ze(N,G,m);var Qe=E.cliponaxis===!1,tt=Qe?null:b.layerClipId;f.setClipUrl(N,tt,d),f.setClipUrl(G,tt,d)}function p(d,g,b,m,x){var w=b.xaxis,y=b.yaxis,T=r.extent(u.simpleMap(w.range,w.r2c)),M=r.extent(u.simpleMap(y.range,y.r2c)),P=m[0].trace;if(!!n.hasMarkers(P)){var L=P.marker.maxdisplayed;if(L!==0){var I=m.filter(function(D){return D.x>=T[0]&&D.x<=T[1]&&D.y>=M[0]&&D.y<=M[1]}),E=Math.ceil(I.length/L),k=0;x.forEach(function(D,F){var N=D[0].trace;n.hasMarkers(N)&&N.marker.maxdisplayed>0&&F<g&&k++});var C=Math.round(k*E/3+Math.floor(k/3)*E/7.1);m.forEach(function(D){delete D.vis}),I.forEach(function(D,F){Math.round((F+C)%E)===0&&(D.vis=!0)})}}}},{"../../components/drawing":665,"../../lib":778,"../../lib/polygon":790,"../../registry":911,"./line_points":1201,"./link_traces":1203,"./subtypes":1212,d3:169}],1209:[function(e,v,S){var r=e("./subtypes");v.exports=function(u,c){var t=u.cd,f=u.xaxis,n=u.yaxis,o=[],l=t[0].trace,h,i,s,p,d=!r.hasMarkers(l)&&!r.hasText(l);if(d)return[];if(c===!1)for(h=0;h<t.length;h++)t[h].selected=0;else for(h=0;h<t.length;h++)i=t[h],s=f.c2p(i.x),p=n.c2p(i.y),i.i!==null&&c.contains([s,p],!1,h,u)?(o.push({pointNumber:i.i,x:f.c2d(i.x),y:n.c2d(i.y)}),i.selected=1):i.selected=0;return o}},{"./subtypes":1212}],1210:[function(e,v,S){var r=["orientation","groupnorm","stackgaps"];v.exports=function(u,c,t,f){var n=t._scatterStackOpts,o=f("stackgroup");if(o){var l=c.xaxis+c.yaxis,h=n[l];h||(h=n[l]={});var i=h[o],s=!1;i?i.traces.push(c):(i=h[o]={traceIndices:[],traces:[c]},s=!0);for(var p={orientation:c.x&&!c.y?"h":"v"},d=0;d<r.length;d++){var g=r[d],b=g+"Found";if(!i[b]){var m=u[g]!==void 0,x=g==="orientation";if((m||s)&&(i[g]=f(g,p[g]),x&&(i.fillDflt=i[g]==="h"?"tonextx":"tonexty"),m&&(i[b]=!0,!s&&(delete i.traces[0][g],x))))for(var w=0;w<i.traces.length-1;w++){var y=i.traces[w];y._input.fill!==y.fill&&(y.fill=i.fillDflt)}}}return i}}},{}],1211:[function(e,v,S){var r=e("d3"),a=e("../../components/drawing"),u=e("../../registry");function c(o){var l=r.select(o).selectAll("g.trace.scatter");l.style("opacity",function(h){return h[0].trace.opacity}),l.selectAll("g.points").each(function(h){var i=r.select(this),s=h.trace||h[0].trace;t(i,s,o)}),l.selectAll("g.text").each(function(h){var i=r.select(this),s=h.trace||h[0].trace;f(i,s,o)}),l.selectAll("g.trace path.js-line").call(a.lineGroupStyle),l.selectAll("g.trace path.js-fill").call(a.fillGroupStyle),u.getComponentMethod("errorbars","style")(l)}function t(o,l,h){a.pointStyle(o.selectAll("path.point"),l,h)}function f(o,l,h){a.textPointStyle(o.selectAll("text"),l,h)}function n(o,l,h){var i=l[0].trace;i.selectedpoints?(a.selectedPointStyle(h.selectAll("path.point"),i),a.selectedTextStyle(h.selectAll("text"),i)):(t(h,i,o),f(h,i,o))}v.exports={style:c,stylePoints:t,styleText:f,styleOnSelect:n}},{"../../components/drawing":665,"../../registry":911,d3:169}],1212:[function(e,v,S){var r=e("../../lib");v.exports={hasLines:function(a){return a.visible&&a.mode&&a.mode.indexOf("lines")!==-1},hasMarkers:function(a){return a.visible&&(a.mode&&a.mode.indexOf("markers")!==-1||a.type==="splom")},hasText:function(a){return a.visible&&a.mode&&a.mode.indexOf("text")!==-1},isBubble:function(a){return r.isPlainObject(a.marker)&&r.isArrayOrTypedArray(a.marker.size)}}},{"../../lib":778}],1213:[function(e,v,S){var r=e("../../lib");v.exports=function(a,u,c,t,f){f=f||{},t("textposition"),r.coerceFont(t,"textfont",c.font),f.noSelect||(t("selected.textfont.color"),t("unselected.textfont.color"))}},{"../../lib":778}],1214:[function(e,v,S){var r=e("../../lib"),a=e("../../registry");v.exports=function(c,t,f,n){var o=n("x"),l=n("y"),h,i=a.getComponentMethod("calendars","handleTraceDefaults");if(i(c,t,["x","y"],f),o){var s=r.minRowLength(o);l?h=Math.min(s,r.minRowLength(l)):(h=s,n("y0"),n("dy"))}else{if(!l)return 0;h=r.minRowLength(l),n("x0"),n("dx")}return t._length=h,h}},{"../../lib":778,"../../registry":911}],1215:[function(e,v,S){var r=e("../scatter/attributes"),a=e("../../components/colorscale/attributes"),u=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../plots/attributes"),f=e("../../constants/gl3d_dashes"),n=e("../../constants/gl3d_markers"),o=e("../../lib/extend").extendFlat,l=e("../../plot_api/edit_types").overrideAll,h=r.line,i=r.marker,s=i.line,p=o({width:h.width,dash:{valType:"enumerated",values:Object.keys(f),dflt:"solid"}},a("line"));function d(b){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var g=v.exports=l({x:r.x,y:r.y,z:{valType:"data_array"},text:o({},r.text,{}),texttemplate:c({},{}),hovertext:o({},r.hovertext,{}),hovertemplate:u(),mode:o({},r.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:d(),y:d(),z:d()},connectgaps:r.connectgaps,line:p,marker:o({symbol:{valType:"enumerated",values:Object.keys(n),dflt:"circle",arrayOk:!0},size:o({},i.size,{dflt:8}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:o({},i.opacity,{arrayOk:!1}),colorbar:i.colorbar,line:o({width:o({},s.width,{arrayOk:!1})},a("marker.line"))},a("marker")),textposition:o({},r.textposition,{dflt:"top center"}),textfont:{color:r.textfont.color,size:r.textfont.size,family:o({},r.textfont.family,{arrayOk:!1})},hoverinfo:o({},t.hoverinfo)},"calc","nested");g.x.editType=g.y.editType=g.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":650,"../../constants/gl3d_dashes":750,"../../constants/gl3d_markers":751,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1216:[function(e,v,S){var r=e("../scatter/arrays_to_calcdata"),a=e("../scatter/colorscale_calc");v.exports=function(c,t){var f=[{x:!1,y:!1,trace:t,t:{}}];return r(f,t),a(c,t),f}},{"../scatter/arrays_to_calcdata":1186,"../scatter/colorscale_calc":1190}],1217:[function(e,v,S){var r=e("../../registry");function a(t,f,n,o){if(!f||!f.visible)return null;for(var l=r.getComponentMethod("errorbars","makeComputeError")(f),h=new Array(t.length),i=0;i<t.length;i++){var s=l(+t[i],i);if(o.type==="log"){var p=o.c2l(t[i]),d=t[i]-s[0],g=t[i]+s[1];if(h[i]=[(o.c2l(d,!0)-p)*n,(o.c2l(g,!0)-p)*n],d>0){var b=o.c2l(d);o._lowerLogErrorBound||(o._lowerLogErrorBound=b),o._lowerErrorBound=Math.min(o._lowerLogErrorBound,b)}}else h[i]=[-s[0]*n,s[1]*n]}return h}function u(t){for(var f=0;f<t.length;f++)if(t[f])return t[f].length;return 0}function c(t,f,n){var o=[a(t.x,t.error_x,f[0],n.xaxis),a(t.y,t.error_y,f[1],n.yaxis),a(t.z,t.error_z,f[2],n.zaxis)],l=u(o);if(l===0)return null;for(var h=new Array(l),i=0;i<l;i++){for(var s=[[0,0,0],[0,0,0]],p=0;p<3;p++)if(o[p])for(var d=0;d<2;d++)s[d][p]=o[p][i][d];h[i]=s}return h}v.exports=c},{"../../registry":911}],1218:[function(e,v,S){var r=e("gl-line3d"),a=e("gl-scatter3d"),u=e("gl-error3d"),c=e("gl-mesh3d"),t=e("delaunay-triangulate"),f=e("../../lib"),n=e("../../lib/str2rgbarray"),o=e("../../lib/gl_format_color").formatColor,l=e("../scatter/make_bubble_size_func"),h=e("../../constants/gl3d_dashes"),i=e("../../constants/gl3d_markers"),s=e("../../plots/cartesian/axes"),p=e("../../components/fx/helpers").appendArrayPointValue,d=e("./calc_errors");function g(D,F){this.scene=D,this.uid=F,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var b=g.prototype;b.handlePick=function(D){if(D.object&&(D.object===this.linePlot||D.object===this.delaunayMesh||D.object===this.textMarkers||D.object===this.scatterPlot)){var F=D.index=D.data.index;return D.object.highlight&&D.object.highlight(null),this.scatterPlot&&(D.object=this.scatterPlot,this.scatterPlot.highlight(D.data)),D.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[F]||this.textLabels[F]===0)&&(D.textLabel=this.textLabels[F]):D.textLabel=this.textLabels),D.traceCoordinate=[this.data.x[F],this.data.y[F],this.data.z[F]],!0}};function m(D,F,N){var G=(N+1)%3,U=(N+2)%3,X=[],z=[],B;for(B=0;B<D.length;++B){var j=D[B];isNaN(j[G])||!isFinite(j[G])||isNaN(j[U])||!isFinite(j[U])||(X.push([j[G],j[U]]),z.push(B))}var V=t(X);for(B=0;B<V.length;++B)for(var K=V[B],te=0;te<K.length;++te)K[te]=z[K[te]];return{positions:D,cells:V,meshColor:F}}function x(D){for(var F=[0,0,0],N=[[0,0,0],[0,0,0],[0,0,0]],G=[1,1,1],U=0;U<3;U++){var X=D[U];X&&X.copy_zstyle!==!1&&D[2].visible!==!1&&(X=D[2]),!(!X||!X.visible)&&(F[U]=X.width/2,N[U]=n(X.color),G[U]=X.thickness)}return{capSize:F,color:N,lineWidth:G}}function w(D){return D==null?0:D.indexOf("left")>-1?-1:D.indexOf("right")>-1?1:0}function y(D){return D==null?0:D.indexOf("top")>-1?-1:D.indexOf("bottom")>-1?1:0}function T(D){var F=0,N=0,G=[F,N];if(Array.isArray(D))for(var U=0;U<D.length;U++)G[U]=[F,N],D[U]&&(G[U][0]=w(D[U]),G[U][1]=y(D[U]));else G[0]=w(D),G[1]=y(D);return G}function M(D,F){return F(D*4)}function P(D){return i[D]}function L(D,F,N,G,U){var X=null;if(f.isArrayOrTypedArray(D)){X=[];for(var z=0;z<F;z++)D[z]===void 0?X[z]=G:X[z]=N(D[z],U)}else X=N(D,f.identity);return X}function I(D,F){var N=[],G=D.fullSceneLayout,U=D.dataScale,X=G.xaxis,z=G.yaxis,B=G.zaxis,j=F.marker,V=F.line,K=F.x||[],te=F.y||[],$=F.z||[],ie=K.length,se=F.xcalendar,Q=F.ycalendar,H=F.zcalendar,oe,re,ee,ae,fe,de;for(fe=0;fe<ie;fe++)oe=X.d2l(K[fe],0,se)*U[0],re=z.d2l(te[fe],0,Q)*U[1],ee=B.d2l($[fe],0,H)*U[2],N[fe]=[oe,re,ee];if(Array.isArray(F.text))de=F.text;else if(F.text!==void 0)for(de=new Array(ie),fe=0;fe<ie;fe++)de[fe]=F.text;function pe(Tt,At){var Ne=G[Tt];return s.tickText(Ne,Ne.d2l(At),!0).text}var W=F.texttemplate;if(W){var ue=D.fullLayout,me=ue._d3locale,be=Array.isArray(W),Me=be?Math.min(W.length,ie):ie,Pe=be?function(Tt){return W[Tt]}:function(){return W};for(de=new Array(Me),fe=0;fe<Me;fe++){var Ge={x:K[fe],y:te[fe],z:$[fe]},ze={xLabel:pe("xaxis",K[fe]),yLabel:pe("yaxis",te[fe]),zLabel:pe("zaxis",$[fe])},Qe={};p(Qe,F,fe);var tt=F._meta||{};de[fe]=f.texttemplateString(Pe(fe),ze,me,Qe,Ge,tt)}}if(ae={position:N,mode:F.mode,text:de},"line"in F&&(ae.lineColor=o(V,1,ie),ae.lineWidth=V.width,ae.lineDashes=V.dash),"marker"in F){var Ce=l(F);ae.scatterColor=o(j,1,ie),ae.scatterSize=L(j.size,ie,M,20,Ce),ae.scatterMarker=L(j.symbol,ie,P,"\u25CF"),ae.scatterLineWidth=j.line.width,ae.scatterLineColor=o(j.line,1,ie),ae.scatterAngle=0}"textposition"in F&&(ae.textOffset=T(F.textposition),ae.textColor=o(F.textfont,1,ie),ae.textSize=L(F.textfont.size,ie,f.identity,12),ae.textFont=F.textfont.family,ae.textAngle=0);var Ae=["x","y","z"];for(ae.project=[!1,!1,!1],ae.projectScale=[1,1,1],ae.projectOpacity=[1,1,1],fe=0;fe<3;++fe){var Be=F.projection[Ae[fe]];(ae.project[fe]=Be.show)&&(ae.projectOpacity[fe]=Be.opacity,ae.projectScale[fe]=Be.scale)}ae.errorBounds=d(F,U,G);var qe=x([F.error_x,F.error_y,F.error_z]);return ae.errorColor=qe.color,ae.errorLineWidth=qe.lineWidth,ae.errorCapSize=qe.capSize,ae.delaunayAxis=F.surfaceaxis,ae.delaunayColor=n(F.surfacecolor),ae}function E(D){if(f.isArrayOrTypedArray(D)){var F=D[0];return f.isArrayOrTypedArray(F)&&(D=F),"rgb("+D.slice(0,3).map(function(N){return Math.round(N*255)})+")"}return null}function k(D){return f.isArrayOrTypedArray(D)?D.length===4&&typeof D[0]=="number"?E(D):D.map(E):null}b.update=function(D){var F=this.scene.glplot.gl,N,G,U,X,z=h.solid;this.data=D;var B=I(this.scene,D);"mode"in B&&(this.mode=B.mode),"lineDashes"in B&&B.lineDashes in h&&(z=h[B.lineDashes]),this.color=k(B.scatterColor)||k(B.lineColor),this.dataPoints=B.position,N={gl:this.scene.glplot.gl,position:B.position,color:B.lineColor,lineWidth:B.lineWidth||1,dashes:z[0],dashScale:z[1],opacity:D.opacity,connectGaps:D.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(N):(this.linePlot=r(N),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var j=D.opacity;if(D.marker&&D.marker.opacity&&(j*=D.marker.opacity),G={gl:this.scene.glplot.gl,position:B.position,color:B.scatterColor,size:B.scatterSize,glyph:B.scatterMarker,opacity:j,orthographic:!0,lineWidth:B.scatterLineWidth,lineColor:B.scatterLineColor,project:B.project,projectScale:B.projectScale,projectOpacity:B.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(G):(this.scatterPlot=a(G),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),X={gl:this.scene.glplot.gl,position:B.position,glyph:B.text,color:B.textColor,size:B.textSize,angle:B.textAngle,alignment:B.textOffset,font:B.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:D.opacity},this.textLabels=D.hovertext||D.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(X):(this.textMarkers=a(X),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),U={gl:this.scene.glplot.gl,position:B.position,color:B.errorColor,error:B.errorBounds,lineWidth:B.errorLineWidth,capSize:B.errorCapSize,opacity:D.opacity},this.errorBars?B.errorBounds?this.errorBars.update(U):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):B.errorBounds&&(this.errorBars=u(U),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),B.delaunayAxis>=0){var V=m(B.position,B.delaunayColor,B.delaunayAxis);V.opacity=D.opacity,this.delaunayMesh?this.delaunayMesh.update(V):(V.gl=F,this.delaunayMesh=c(V),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},b.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function C(D,F){var N=new g(D,F.uid);return N.update(F),N}v.exports=C},{"../../components/fx/helpers":679,"../../constants/gl3d_dashes":750,"../../constants/gl3d_markers":751,"../../lib":778,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/cartesian/axes":828,"../scatter/make_bubble_size_func":1204,"./calc_errors":1217,"delaunay-triangulate":171,"gl-error3d":266,"gl-line3d":275,"gl-mesh3d":309,"gl-scatter3d":330}],1219:[function(e,v,S){var r=e("../../registry"),a=e("../../lib"),u=e("../scatter/subtypes"),c=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),f=e("../scatter/text_defaults"),n=e("./attributes");v.exports=function(h,i,s,p){function d(M,P){return a.coerce(h,i,n,M,P)}var g=o(h,i,d,p);if(!g){i.visible=!1;return}d("text"),d("hovertext"),d("hovertemplate"),d("mode"),u.hasLines(i)&&(d("connectgaps"),t(h,i,s,p,d)),u.hasMarkers(i)&&c(h,i,s,p,d,{noSelect:!0}),u.hasText(i)&&(d("texttemplate"),f(h,i,p,d,{noSelect:!0}));var b=(i.line||{}).color,m=(i.marker||{}).color;d("surfaceaxis")>=0&&d("surfacecolor",b||m);for(var x=["x","y","z"],w=0;w<3;++w){var y="projection."+x[w];d(y+".show")&&(d(y+".opacity"),d(y+".scale"))}var T=r.getComponentMethod("errorbars","supplyDefaults");T(h,i,b||m||s,{axis:"z"}),T(h,i,b||m||s,{axis:"y",inherit:"z"}),T(h,i,b||m||s,{axis:"x",inherit:"z"})};function o(l,h,i,s){var p=0,d=i("x"),g=i("y"),b=i("z"),m=r.getComponentMethod("calendars","handleTraceDefaults");return m(l,h,["x","y","z"],s),d&&g&&b&&(p=Math.min(d.length,g.length,b.length),h._length=h._xlength=h._ylength=h._zlength=p),p}},{"../../lib":778,"../../registry":911,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1215}],1220:[function(e,v,S){v.exports={plot:e("./convert"),attributes:e("./attributes"),markerSymbols:e("../../constants/gl3d_markers"),supplyDefaults:e("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":751,"../../plots/gl3d":870,"./attributes":1215,"./calc":1216,"./convert":1218,"./defaults":1219}],1221:[function(e,v,S){var r=e("../scatter/attributes"),a=e("../../plots/attributes"),u=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../components/colorscale/attributes"),f=e("../../lib/extend").extendFlat,n=r.marker,o=r.line,l=n.line;v.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:f({},r.mode,{dflt:"markers"}),text:f({},r.text,{}),texttemplate:c({editType:"plot"},{keys:["a","b","text"]}),hovertext:f({},r.hovertext,{}),line:{color:o.color,width:o.width,dash:o.dash,shape:f({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:r.connectgaps,fill:f({},r.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:r.fillcolor,marker:f({symbol:n.symbol,opacity:n.opacity,maxdisplayed:n.maxdisplayed,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:f({width:l.width,editType:"calc"},t("marker.line")),gradient:n.gradient,editType:"calc"},t("marker")),textfont:r.textfont,textposition:r.textposition,selected:r.selected,unselected:r.unselected,hoverinfo:f({},a.hoverinfo,{flags:["a","b","text","name"]}),hoveron:r.hoveron,hovertemplate:u()}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1222:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../scatter/colorscale_calc"),u=e("../scatter/arrays_to_calcdata"),c=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,f=e("../carpet/lookup_carpetid");v.exports=function(o,l){var h=l._carpetTrace=f(o,l);if(!(!h||!h.visible||h.visible==="legendonly")){var i;l.xaxis=h.xaxis,l.yaxis=h.yaxis;var s=l._length,p=new Array(s),d,g,b=!1;for(i=0;i<s;i++)if(d=l.a[i],g=l.b[i],r(d)&&r(g)){var m=h.ab2xy(+d,+g,!0),x=h.isVisible(+d,+g);x||(b=!0),p[i]={x:m[0],y:m[1],a:d,b:g,vis:x}}else p[i]={x:!1,y:!1};return l._needsCull=b,p[0].carpet=h,p[0].trace=l,t(l,s),a(o,l),u(p,l),c(p,l),p}}},{"../carpet/lookup_carpetid":981,"../scatter/arrays_to_calcdata":1186,"../scatter/calc":1188,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1223:[function(e,v,S){var r=e("../../lib"),a=e("../scatter/constants"),u=e("../scatter/subtypes"),c=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),f=e("../scatter/line_shape_defaults"),n=e("../scatter/text_defaults"),o=e("../scatter/fillcolor_defaults"),l=e("./attributes");v.exports=function(i,s,p,d){function g(M,P){return r.coerce(i,s,l,M,P)}g("carpet"),s.xaxis="x",s.yaxis="y";var b=g("a"),m=g("b"),x=Math.min(b.length,m.length);if(!x){s.visible=!1;return}s._length=x,g("text"),g("texttemplate"),g("hovertext");var w=x<a.PTS_LINESONLY?"lines+markers":"lines";g("mode",w),u.hasLines(s)&&(t(i,s,p,d,g),f(i,s,g),g("connectgaps")),u.hasMarkers(s)&&c(i,s,p,d,g,{gradient:!0}),u.hasText(s)&&n(i,s,d,g);var y=[];(u.hasMarkers(s)||u.hasText(s))&&(g("marker.maxdisplayed"),y.push("points")),g("fill"),s.fill!=="none"&&(o(i,s,p,g),u.hasLines(s)||f(i,s,g)),(s.fill==="tonext"||s.fill==="toself")&&y.push("fills");var T=g("hoveron",y.join("+")||"points");T!=="fills"&&g("hovertemplate"),r.coerceSelectionMarkerOpacity(s,g)}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/line_shape_defaults":1202,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1221}],1224:[function(e,v,S){v.exports=function(a,u,c,t,f){var n=t[f];return a.a=n.a,a.b=n.b,a.y=n.y,a}},{}],1225:[function(e,v,S){v.exports=function(a,u){var c={},t=u._carpet,f=t.ab2ij([a.a,a.b]),n=Math.floor(f[0]),o=f[0]-n,l=Math.floor(f[1]),h=f[1]-l,i=t.evalxy([],n,l,o,h);return c.yLabel=i[1].toFixed(3),c}},{}],1226:[function(e,v,S){var r=e("../scatter/hover"),a=e("../../lib").fillText;v.exports=function(c,t,f,n){var o=r(c,t,f,n);if(!o||o[0].index===!1)return;var l=o[0];if(l.index===void 0){var h=1-l.y0/c.ya._length,i=c.xa._length,s=i*h/2,p=i-s;return l.x0=Math.max(Math.min(l.x0,p),s),l.x1=Math.max(Math.min(l.x1,p),s),o}var d=l.cd[l.index];l.a=d.a,l.b=d.b,l.xLabelVal=void 0,l.yLabelVal=void 0;var g=l.trace,b=g._carpet,m=g._module.formatLabels(d,g);l.yLabel=m.yLabel,delete l.text;var x=[];function w(M,P){var L;M.labelprefix&&M.labelprefix.length>0?L=M.labelprefix.replace(/ = $/,""):L=M._hovertitle,x.push(L+": "+P.toFixed(3)+M.labelsuffix)}if(!g.hovertemplate){var y=d.hi||g.hoverinfo,T=y.split("+");T.indexOf("all")!==-1&&(T=["a","b","text"]),T.indexOf("a")!==-1&&w(b.aaxis,d.a),T.indexOf("b")!==-1&&w(b.baxis,d.b),x.push("y: "+l.yLabel),T.indexOf("text")!==-1&&a(d,g,x),l.extraText=x.join("<br>")}return o}},{"../../lib":778,"../scatter/hover":1198}],1227:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:e("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"../scatter/marker_colorbar":1205,"../scatter/select":1209,"../scatter/style":1211,"./attributes":1221,"./calc":1222,"./defaults":1223,"./event_data":1224,"./format_labels":1225,"./hover":1226,"./plot":1228}],1228:[function(e,v,S){var r=e("../scatter/plot"),a=e("../../plots/cartesian/axes"),u=e("../../components/drawing");v.exports=function(t,f,n,o){var l,h,i,s=n[0][0].carpet,p={xaxis:a.getFromId(t,s.xaxis||"x"),yaxis:a.getFromId(t,s.yaxis||"y"),plot:f.plot};for(r(t,p,n,o),l=0;l<n.length;l++)h=n[l][0].trace,i=o.selectAll("g.trace"+h.uid+" .js-line"),u.setClipUrl(i,n[l][0].carpet._clipPathId,t)}},{"../../components/drawing":665,"../../plots/cartesian/axes":828,"../scatter/plot":1208}],1229:[function(e,v,S){var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,u=e("../scatter/attributes"),c=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),f=e("../../components/drawing/attributes").dash,n=e("../../lib/extend").extendFlat,o=e("../../plot_api/edit_types").overrideAll,l=u.marker,h=u.line,i=l.line;v.exports=o({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:n({},u.mode,{dflt:"markers"}),text:n({},u.text,{}),texttemplate:a({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:n({},u.hovertext,{}),textfont:u.textfont,textposition:u.textposition,line:{color:h.color,width:h.width,dash:f},connectgaps:u.connectgaps,marker:n({symbol:l.symbol,opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,colorbar:l.colorbar,line:n({width:i.width},t("marker.line")),gradient:l.gradient},t("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:u.fillcolor,selected:u.selected,unselected:u.unselected,hoverinfo:n({},c.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:r()},"calc","nested")},{"../../components/colorscale/attributes":650,"../../components/drawing/attributes":664,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1230:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../constants/numerical").BADNUM,u=e("../scatter/colorscale_calc"),c=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection"),f=e("../../lib")._;function n(o){return o&&typeof o=="string"}v.exports=function(l,h){var i=Array.isArray(h.locations),s=i?h.locations.length:h._length,p=new Array(s),d;h.geojson?d=function(y){return n(y)||r(y)}:d=n;for(var g=0;g<s;g++){var b=p[g]={};if(i){var m=h.locations[g];b.loc=d(m)?m:null}else{var x=h.lon[g],w=h.lat[g];r(x)&&r(w)?b.lonlat=[+x,+w]:b.lonlat=[a,a]}}return c(p,h),u(l,h),t(p,h),s&&(p[0].t={labels:{lat:f(l,"lat:")+" ",lon:f(l,"lon:")+" "}}),p}},{"../../constants/numerical":753,"../../lib":778,"../scatter/arrays_to_calcdata":1186,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1231:[function(e,v,S){var r=e("../../lib"),a=e("../scatter/subtypes"),u=e("../scatter/marker_defaults"),c=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),f=e("../scatter/fillcolor_defaults"),n=e("./attributes");v.exports=function(l,h,i,s){function p(T,M){return r.coerce(l,h,n,T,M)}var d=p("locations"),g;if(d&&d.length){var b=p("geojson"),m;(typeof b=="string"&&b!==""||r.isPlainObject(b))&&(m="geojson-id");var x=p("locationmode",m);x==="geojson-id"&&p("featureidkey"),g=d.length}else{var w=p("lon")||[],y=p("lat")||[];g=Math.min(w.length,y.length)}if(!g){h.visible=!1;return}h._length=g,p("text"),p("hovertext"),p("hovertemplate"),p("mode"),a.hasLines(h)&&(c(l,h,i,s,p),p("connectgaps")),a.hasMarkers(h)&&u(l,h,i,s,p,{gradient:!0}),a.hasText(h)&&(p("texttemplate"),t(l,h,s,p)),p("fill"),h.fill!=="none"&&f(l,h,i,p),r.coerceSelectionMarkerOpacity(h,p)}},{"../../lib":778,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1229}],1232:[function(e,v,S){v.exports=function(a,u,c,t,f){a.lon=u.lon,a.lat=u.lat,a.location=u.loc?u.loc:null;var n=t[f];return n.fIn&&n.fIn.properties&&(a.properties=n.fIn.properties),a}},{}],1233:[function(e,v,S){var r=e("../../plots/cartesian/axes");v.exports=function(u,c,t){var f={},n=t[c.geo]._subplot,o=n.mockAxis,l=u.lonlat;return f.lonLabel=r.tickText(o,o.c2l(l[0]),!0).text,f.latLabel=r.tickText(o,o.c2l(l[1]),!0).text,f}},{"../../plots/cartesian/axes":828}],1234:[function(e,v,S){var r=e("../../components/fx"),a=e("../../constants/numerical").BADNUM,u=e("../scatter/get_trace_color"),c=e("../../lib").fillText,t=e("./attributes");v.exports=function(o,l,h){var i=o.cd,s=i[0].trace,p=o.xa,d=o.ya,g=o.subplot,b=g.projection.isLonLatOverEdges,m=g.project;function x(I){var E=I.lonlat;if(E[0]===a||b(E))return 1/0;var k=m(E),C=m([l,h]),D=Math.abs(k[0]-C[0]),F=Math.abs(k[1]-C[1]),N=Math.max(3,I.mrc||0);return Math.max(Math.sqrt(D*D+F*F)-N,1-3/N)}if(r.getClosest(i,x,o),o.index!==!1){var w=i[o.index],y=w.lonlat,T=[p.c2p(y),d.c2p(y)],M=w.mrc||1;o.x0=T[0]-M,o.x1=T[0]+M,o.y0=T[1]-M,o.y1=T[1]+M,o.loc=w.loc,o.lon=y[0],o.lat=y[1];var P={};P[s.geo]={_subplot:g};var L=s._module.formatLabels(w,s,P);return o.lonLabel=L.lonLabel,o.latLabel=L.latLabel,o.color=u(s,w),o.extraText=f(s,w,o,i[0].t.labels),o.hovertemplate=s.hovertemplate,[o]}};function f(n,o,l,h){if(n.hovertemplate)return;var i=o.hi||n.hoverinfo,s=i==="all"?t.hoverinfo.flags:i.split("+"),p=s.indexOf("location")!==-1&&Array.isArray(n.locations),d=s.indexOf("lon")!==-1,g=s.indexOf("lat")!==-1,b=s.indexOf("text")!==-1,m=[];function x(w){return w+"\xB0"}return p?m.push(o.loc):d&&g?m.push("("+x(l.lonLabel)+", "+x(l.latLabel)+")"):d?m.push(h.lon+x(l.lonLabel)):g&&m.push(h.lat+x(l.latLabel)),b&&c(o,n,m),m.join("<br>")}},{"../../components/fx":683,"../../constants/numerical":753,"../../lib":778,"../scatter/get_trace_color":1197,"./attributes":1229}],1235:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:e("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":860,"../scatter/marker_colorbar":1205,"../scatter/style":1211,"./attributes":1229,"./calc":1230,"./defaults":1231,"./event_data":1232,"./format_labels":1233,"./hover":1234,"./plot":1236,"./select":1237,"./style":1238}],1236:[function(e,v,S){var r=e("d3"),a=e("../../lib"),u=e("../../lib/topojson_utils").getTopojsonFeatures,c=e("../../lib/geojson_utils"),t=e("../../lib/geo_location_utils"),f=e("../../plots/cartesian/autorange").findExtremes,n=e("../../constants/numerical").BADNUM,o=e("../scatter/calc").calcMarkerSize,l=e("../scatter/subtypes"),h=e("./style");function i(p,d,g){var b=d.layers.frontplot.select(".scatterlayer"),m=a.makeTraceGroups(b,g,"trace scattergeo");function x(w,y){w.lonlat[0]===n&&r.select(y).remove()}m.selectAll("*").remove(),m.each(function(w){var y=r.select(this),T=w[0].trace;if(l.hasLines(T)||T.fill!=="none"){var M=c.calcTraceToLineCoords(w),P=T.fill!=="none"?c.makePolygon(M):c.makeLine(M);y.selectAll("path.js-line").data([{geojson:P,trace:T}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}l.hasMarkers(T)&&y.selectAll("path.point").data(a.identity).enter().append("path").classed("point",!0).each(function(L){x(L,this)}),l.hasText(T)&&y.selectAll("g").data(a.identity).enter().append("g").append("text").each(function(L){x(L,this)}),h(p,w)})}function s(p,d){var g=p[0].trace,b=d[g.geo],m=b._subplot,x=g._length,w,y;if(Array.isArray(g.locations)){var T=g.locationmode,M=T==="geojson-id"?t.extractTraceFeature(p):u(g,m.topojson);for(w=0;w<x;w++){y=p[w];var P=T==="geojson-id"?y.fOut:t.locationToFeature(T,y.loc,M);y.lonlat=P?P.properties.ct:[n,n]}}var L={padded:!0},I,E;if(b.fitbounds==="geojson"&&g.locationmode==="geojson-id"){var k=t.computeBbox(t.getTraceGeojson(g));I=[k[0],k[2]],E=[k[1],k[3]]}else{for(I=new Array(x),E=new Array(x),w=0;w<x;w++)y=p[w],I[w]=y.lonlat[0],E[w]=y.lonlat[1];L.ppad=o(g,x)}g._extremes.lon=f(b.lonaxis._ax,I,L),g._extremes.lat=f(b.lataxis._ax,E,L)}v.exports={calcGeoJSON:s,plot:i}},{"../../constants/numerical":753,"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/geojson_utils":772,"../../lib/topojson_utils":806,"../../plots/cartesian/autorange":827,"../scatter/calc":1188,"../scatter/subtypes":1212,"./style":1238,d3:169}],1237:[function(e,v,S){var r=e("../scatter/subtypes"),a=e("../../constants/numerical").BADNUM;v.exports=function(c,t){var f=c.cd,n=c.xaxis,o=c.yaxis,l=[],h=f[0].trace,i,s,p,d,g,b=!r.hasMarkers(h)&&!r.hasText(h);if(b)return[];if(t===!1)for(g=0;g<f.length;g++)f[g].selected=0;else for(g=0;g<f.length;g++)i=f[g],s=i.lonlat,s[0]!==a&&(p=n.c2p(s),d=o.c2p(s),t.contains([p,d],null,g,c)?(l.push({pointNumber:g,lon:s[0],lat:s[1]}),i.selected=1):i.selected=0);return l}},{"../../constants/numerical":753,"../scatter/subtypes":1212}],1238:[function(e,v,S){var r=e("d3"),a=e("../../components/drawing"),u=e("../../components/color"),c=e("../scatter/style"),t=c.stylePoints,f=c.styleText;v.exports=function(l,h){h&&n(l,h)};function n(o,l){var h=l[0].trace,i=l[0].node3;i.style("opacity",l[0].trace.opacity),t(i,h,o),f(i,h,o),i.selectAll("path.js-line").style("fill","none").each(function(s){var p=r.select(this),d=s.trace,g=d.line||{};p.call(u.stroke,g.color).call(a.dashLine,g.dash||"",g.width||0),d.fill!=="none"&&p.call(u.fill,d.fillcolor)})}},{"../../components/color":643,"../../components/drawing":665,"../scatter/style":1211,d3:169}],1239:[function(e,v,S){var r=e("../../plots/attributes"),a=e("../scatter/attributes"),u=e("../../components/colorscale/attributes"),c=e("../../lib/extend").extendFlat,t=e("../../plot_api/edit_types").overrideAll,f=e("./constants").DASHES,n=a.line,o=a.marker,l=o.line,h=v.exports=t({x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,xperiod:a.xperiod,yperiod:a.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:a.xperiodalignment,yperiodalignment:a.yperiodalignment,text:a.text,hovertext:a.hovertext,textposition:a.textposition,textfont:a.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Object.keys(f),dflt:"solid"}},marker:c({},u("marker"),{symbol:o.symbol,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:o.opacity,colorbar:o.colorbar,line:c({},u("marker.line"),{width:l.width})}),connectgaps:a.connectgaps,fill:c({},a.fill,{dflt:"none"}),fillcolor:a.fillcolor,selected:{marker:a.selected.marker,textfont:a.selected.textfont},unselected:{marker:a.unselected.marker,textfont:a.unselected.textfont},opacity:r.opacity},"calc","nested");h.x.editType=h.y.editType=h.x0.editType=h.y0.editType="calc+clearAxisTypes",h.hovertemplate=a.hovertemplate,h.texttemplate=a.texttemplate},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../scatter/attributes":1187,"./constants":1241}],1240:[function(e,v,S){var r=e("@plotly/point-cluster"),a=e("../../lib"),u=e("../../plots/cartesian/axis_ids"),c=e("../../plots/cartesian/autorange").findExtremes,t=e("../../plots/cartesian/align_period"),f=e("../scatter/calc"),n=f.calcMarkerSize,o=f.calcAxisExpansion,l=f.setFirstScatter,h=e("../scatter/colorscale_calc"),i=e("./convert"),s=e("./scene_update"),p=e("../../constants/numerical").BADNUM,d=e("./constants").TOO_MANY_POINTS;v.exports=function(x,w){var y=x._fullLayout,T=u.getFromId(x,w.xaxis),M=u.getFromId(x,w.yaxis),P=y._plots[w.xaxis+w.yaxis],L=w._length,I=L>=d,E=L*2,k={},C,D,F,N=T.makeCalcdata(w,"x"),G=M.makeCalcdata(w,"y"),U=t(w,T,"x",N),X=t(w,M,"y",G);w._x=U,w._y=X,w.xperiodalignment&&(w._origX=N),w.yperiodalignment&&(w._origY=G);var z=new Array(E);for(C=0;C<L;C++)D=U[C],F=X[C],z[C*2]=D===p?NaN:D,z[C*2+1]=F===p?NaN:F;if(T.type==="log")for(C=0;C<E;C+=2)z[C]=T.c2l(z[C]);if(M.type==="log")for(C=1;C<E;C+=2)z[C]=M.c2l(z[C]);if(I&&T.type!=="log"&&M.type!=="log")k.tree=r(z);else{var B=k.ids=new Array(L);for(C=0;C<L;C++)B[C]=C}h(x,w);var j=b(x,P,w,z,U,X),V=s(x,P);l(y,w);var K;return I?j.marker&&(K=2*(j.marker.sizeAvg||Math.max(j.marker.size,3))):K=n(w,L),o(x,w,T,M,U,X,K),j.errorX&&g(w,T,j.errorX),j.errorY&&g(w,M,j.errorY),j.fill&&!V.fill2d&&(V.fill2d=!0),j.marker&&!V.scatter2d&&(V.scatter2d=!0),j.line&&!V.line2d&&(V.line2d=!0),(j.errorX||j.errorY)&&!V.error2d&&(V.error2d=!0),j.text&&!V.glText&&(V.glText=!0),j.marker&&(j.marker.snap=L),V.lineOptions.push(j.line),V.errorXOptions.push(j.errorX),V.errorYOptions.push(j.errorY),V.fillOptions.push(j.fill),V.markerOptions.push(j.marker),V.markerSelectedOptions.push(j.markerSel),V.markerUnselectedOptions.push(j.markerUnsel),V.textOptions.push(j.text),V.textSelectedOptions.push(j.textSel),V.textUnselectedOptions.push(j.textUnsel),V.selectBatch.push([]),V.unselectBatch.push([]),k._scene=V,k.index=V.count,k.x=U,k.y=X,k.positions=z,V.count++,[{x:!1,y:!1,t:k,trace:w}]};function g(m,x,w){var y=m._extremes[x._id],T=c(x,w._bnds,{padded:!0});y.min=y.min.concat(T.min),y.max=y.max.concat(T.max)}function b(m,x,w,y,T,M){var P=i.style(m,w);if(P.marker&&(P.marker.positions=y),P.line&&y.length>1&&a.extendFlat(P.line,i.linePositions(m,w,y)),P.errorX||P.errorY){var L=i.errorBarPositions(m,w,y,T,M);P.errorX&&a.extendFlat(P.errorX,L.x),P.errorY&&a.extendFlat(P.errorY,L.y)}return P.text&&(a.extendFlat(P.text,{positions:y},i.textPosition(m,w,P.text,P.marker)),a.extendFlat(P.textSel,{positions:y},i.textPosition(m,w,P.text,P.markerSel)),a.extendFlat(P.textUnsel,{positions:y},i.textPosition(m,w,P.text,P.markerUnsel))),P}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/autorange":827,"../../plots/cartesian/axis_ids":831,"../scatter/calc":1188,"../scatter/colorscale_calc":1190,"./constants":1241,"./convert":1242,"./scene_update":1250,"@plotly/point-cluster":57}],1241:[function(e,v,S){var r=20;v.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:r,SYMBOL_STROKE:r/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1242:[function(e,v,S){var r=e("fast-isnumeric"),a=e("svg-path-sdf"),u=e("color-normalize"),c=e("../../registry"),t=e("../../lib"),f=e("../../components/drawing"),n=e("../../plots/cartesian/axis_ids"),o=e("../../lib/gl_format_color").formatColor,l=e("../scatter/subtypes"),h=e("../scatter/make_bubble_size_func"),i=e("./helpers"),s=e("./constants"),p=e("../../constants/interactions").DESELECTDIM,d={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},g=e("../../components/fx/helpers").appendArrayPointValue;function b(N,G){var U,X={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0};if(G.visible!==!0)return X;if(l.hasText(G)&&(X.text=m(N,G),X.textSel=y(N,G,G.selected),X.textUnsel=y(N,G,G.unselected)),l.hasMarkers(G)&&(X.marker=x(G),X.markerSel=w(G,G.selected),X.markerUnsel=w(G,G.unselected),!G.unselected&&t.isArrayOrTypedArray(G.marker.opacity))){var z=G.marker.opacity;for(X.markerUnsel.opacity=new Array(z.length),U=0;U<z.length;U++)X.markerUnsel.opacity[U]=p*z[U]}if(l.hasLines(G)){X.line={overlay:!0,thickness:G.line.width,color:G.line.color,opacity:G.opacity};var B=(s.DASHES[G.line.dash]||[1]).slice();for(U=0;U<B.length;++U)B[U]*=G.line.width;X.line.dashes=B}return G.error_x&&G.error_x.visible&&(X.errorX=T(G,G.error_x)),G.error_y&&G.error_y.visible&&(X.errorY=T(G,G.error_y)),!!G.fill&&G.fill!=="none"&&(X.fill={closed:!0,fill:G.fillcolor,thickness:0}),X}function m(N,G){var U=N._fullLayout,X=G._length,z=G.textfont,B=G.textposition,j=Array.isArray(B)?B:[B],V=z.color,K=z.size,te=z.family,$={},ie,se=G.texttemplate;if(se){$.text=[];var Q=U._d3locale,H=Array.isArray(se),oe=H?Math.min(se.length,X):X,re=H?function(ue){return se[ue]}:function(){return se};for(ie=0;ie<oe;ie++){var ee={i:ie},ae=G._module.formatLabels(ee,G,U),fe={};g(fe,G,ie);var de=G._meta||{};$.text.push(t.texttemplateString(re(ie),ae,Q,fe,ee,de))}}else Array.isArray(G.text)&&G.text.length<X?$.text=G.text.slice():$.text=G.text;if(Array.isArray($.text))for(ie=$.text.length;ie<X;ie++)$.text[ie]="";for($.opacity=G.opacity,$.font={},$.align=[],$.baseline=[],ie=0;ie<j.length;ie++){var pe=j[ie].split(/\s+/);switch(pe[1]){case"left":$.align.push("right");break;case"right":$.align.push("left");break;default:$.align.push(pe[1])}switch(pe[0]){case"top":$.baseline.push("bottom");break;case"bottom":$.baseline.push("top");break;default:$.baseline.push(pe[0])}}if(Array.isArray(V))for($.color=new Array(X),ie=0;ie<X;ie++)$.color[ie]=V[ie];else $.color=V;if(t.isArrayOrTypedArray(K)||Array.isArray(te))for($.font=new Array(X),ie=0;ie<X;ie++){var W=$.font[ie]={};W.size=t.isTypedArray(K)?K[ie]:Array.isArray(K)?r(K[ie])?K[ie]:0:K,W.family=Array.isArray(te)?te[ie]:te}else $.font={size:K,family:te};return $}function x(N){var G=N._length,U=N.marker,X={},z,B=t.isArrayOrTypedArray(U.symbol),j=t.isArrayOrTypedArray(U.color),V=t.isArrayOrTypedArray(U.line.color),K=t.isArrayOrTypedArray(U.opacity),te=t.isArrayOrTypedArray(U.size),$=t.isArrayOrTypedArray(U.line.width),ie;if(B||(ie=i.isOpenSymbol(U.symbol)),B||j||V||K){X.colors=new Array(G),X.borderColors=new Array(G);var se=o(U,U.opacity,G),Q=o(U.line,U.opacity,G);if(!Array.isArray(Q[0])){var H=Q;for(Q=Array(G),z=0;z<G;z++)Q[z]=H}if(!Array.isArray(se[0])){var oe=se;for(se=Array(G),z=0;z<G;z++)se[z]=oe}for(X.colors=se,X.borderColors=Q,z=0;z<G;z++){if(B){var re=U.symbol[z];ie=i.isOpenSymbol(re)}ie&&(Q[z]=se[z].slice(),se[z]=se[z].slice(),se[z][3]=0)}X.opacity=N.opacity}else ie?(X.color=u(U.color,"uint8"),X.color[3]=0,X.borderColor=u(U.color,"uint8")):(X.color=u(U.color,"uint8"),X.borderColor=u(U.line.color,"uint8")),X.opacity=N.opacity*U.opacity;if(B)for(X.markers=new Array(G),z=0;z<G;z++)X.markers[z]=k(U.symbol[z]);else X.marker=k(U.symbol);var ee=h(N),ae;if(te||$){var fe=X.sizes=new Array(G),de=X.borderSizes=new Array(G),pe=0,W;if(te){for(z=0;z<G;z++)fe[z]=ee(U.size[z]),pe+=fe[z];W=pe/G}else for(ae=ee(U.size),z=0;z<G;z++)fe[z]=ae;if($)for(z=0;z<G;z++)de[z]=U.line.width[z]/2;else for(ae=U.line.width/2,z=0;z<G;z++)de[z]=ae;X.sizeAvg=W}else X.size=ee(U&&U.size||10),X.borderSizes=ee(U.line.width);return X}function w(N,G){var U=N.marker,X={};return G&&(G.marker&&G.marker.symbol?X=x(t.extendFlat({},U,G.marker)):G.marker&&(G.marker.size&&(X.size=G.marker.size/2),G.marker.color&&(X.colors=G.marker.color),G.marker.opacity!==void 0&&(X.opacity=G.marker.opacity))),X}function y(N,G,U){var X={};if(!U)return X;if(U.textfont){var z={opacity:1,text:G.text,texttemplate:G.texttemplate,textposition:G.textposition,textfont:t.extendFlat({},G.textfont)};U.textfont&&t.extendFlat(z.textfont,U.textfont),X=m(N,z)}return X}function T(N,G){var U={capSize:G.width*2,lineWidth:G.thickness,color:G.color};return G.copy_ystyle&&(U=N.error_y),U}var M=s.SYMBOL_SDF_SIZE,P=s.SYMBOL_SIZE,L=s.SYMBOL_STROKE,I={},E=f.symbolFuncs[0](P*.05);function k(N){if(N==="circle")return null;var G,U,X=f.symbolNumber(N),z=f.symbolFuncs[X%100],B=!!f.symbolNoDot[X%100],j=!!f.symbolNoFill[X%100],V=i.isDotSymbol(N);return I[N]?I[N]:(V&&!B?G=z(P*1.1)+E:G=z(P),U=a(G,{w:M,h:M,viewBox:[-P,-P,P,P],stroke:j?L:-L}),I[N]=U,U||null)}function C(N,G,U){var X=U.length,z=X/2,B,j;if(l.hasLines(G)&&z)if(G.line.shape==="hv"){for(B=[],j=0;j<z-1;j++)isNaN(U[j*2])||isNaN(U[j*2+1])?B.push(NaN,NaN,NaN,NaN):(B.push(U[j*2],U[j*2+1]),!isNaN(U[j*2+2])&&!isNaN(U[j*2+3])?B.push(U[j*2+2],U[j*2+1]):B.push(NaN,NaN));B.push(U[X-2],U[X-1])}else if(G.line.shape==="hvh"){for(B=[],j=0;j<z-1;j++)if(isNaN(U[j*2])||isNaN(U[j*2+1])||isNaN(U[j*2+2])||isNaN(U[j*2+3]))!isNaN(U[j*2])&&!isNaN(U[j*2+1])?B.push(U[j*2],U[j*2+1]):B.push(NaN,NaN),B.push(NaN,NaN);else{var V=(U[j*2]+U[j*2+2])/2;B.push(U[j*2],U[j*2+1],V,U[j*2+1],V,U[j*2+3])}B.push(U[X-2],U[X-1])}else if(G.line.shape==="vhv"){for(B=[],j=0;j<z-1;j++)if(isNaN(U[j*2])||isNaN(U[j*2+1])||isNaN(U[j*2+2])||isNaN(U[j*2+3]))!isNaN(U[j*2])&&!isNaN(U[j*2+1])?B.push(U[j*2],U[j*2+1]):B.push(NaN,NaN),B.push(NaN,NaN);else{var K=(U[j*2+1]+U[j*2+3])/2;B.push(U[j*2],U[j*2+1],U[j*2],K,U[j*2+2],K)}B.push(U[X-2],U[X-1])}else if(G.line.shape==="vh"){for(B=[],j=0;j<z-1;j++)isNaN(U[j*2])||isNaN(U[j*2+1])?B.push(NaN,NaN,NaN,NaN):(B.push(U[j*2],U[j*2+1]),!isNaN(U[j*2+2])&&!isNaN(U[j*2+3])?B.push(U[j*2],U[j*2+3]):B.push(NaN,NaN));B.push(U[X-2],U[X-1])}else B=U;var te=!1;for(j=0;j<B.length;j++)if(isNaN(B[j])){te=!0;break}var $=te||B.length>s.TOO_MANY_POINTS||l.hasMarkers(G)?"rect":"round";if(te&&G.connectgaps){var ie=B[0],se=B[1];for(j=0;j<B.length;j+=2)isNaN(B[j])||isNaN(B[j+1])?(B[j]=ie,B[j+1]=se):(ie=B[j],se=B[j+1])}return{join:$,positions:B}}function D(N,G,U,X,z){var B=c.getComponentMethod("errorbars","makeComputeError"),j=n.getFromId(N,G.xaxis),V=n.getFromId(N,G.yaxis),K=U.length/2,te={};function $(ie,se){var Q=se._id.charAt(0),H=G["error_"+Q];if(H&&H.visible&&(se.type==="linear"||se.type==="log")){for(var oe=B(H),re={x:0,y:1}[Q],ee={x:[0,1,2,3],y:[2,3,0,1]}[Q],ae=new Float64Array(4*K),fe=1/0,de=-1/0,pe=0,W=0;pe<K;pe++,W+=4){var ue=ie[pe];if(r(ue)){var me=U[pe*2+re],be=oe(ue,pe),Me=be[0],Pe=be[1];if(r(Me)&&r(Pe)){var Ge=ue-Me,ze=ue+Pe;ae[W+ee[0]]=me-se.c2l(Ge),ae[W+ee[1]]=se.c2l(ze)-me,ae[W+ee[2]]=0,ae[W+ee[3]]=0,fe=Math.min(fe,ue-Me),de=Math.max(de,ue+Pe)}}}te[Q]={positions:U,errors:ae,_bnds:[fe,de]}}}return $(X,j),$(z,V),te}function F(N,G,U,X){var z=G._length,B={},j;if(l.hasMarkers(G)){var V=U.font,K=U.align,te=U.baseline;for(B.offset=new Array(z),j=0;j<z;j++){var $=X.sizes?X.sizes[j]:X.size,ie=Array.isArray(V)?V[j].size:V.size,se=Array.isArray(K)?K.length>1?K[j]:K[0]:K,Q=Array.isArray(te)?te.length>1?te[j]:te[0]:te,H=d[se],oe=d[Q],re=$?$/.8+1:0,ee=-oe*re-oe*.5;B.offset[j]=[H*re/ie,ee/ie]}}return B}v.exports={style:b,markerStyle:x,markerSelection:w,linePositions:C,errorBarPositions:D,textPosition:F}},{"../../components/drawing":665,"../../components/fx/helpers":679,"../../constants/interactions":752,"../../lib":778,"../../lib/gl_format_color":774,"../../plots/cartesian/axis_ids":831,"../../registry":911,"../scatter/make_bubble_size_func":1204,"../scatter/subtypes":1212,"./constants":1241,"./helpers":1246,"color-normalize":125,"fast-isnumeric":241,"svg-path-sdf":574}],1243:[function(e,v,S){var r=e("../../lib"),a=e("../../registry"),u=e("./helpers"),c=e("./attributes"),t=e("../scatter/constants"),f=e("../scatter/subtypes"),n=e("../scatter/xy_defaults"),o=e("../scatter/period_defaults"),l=e("../scatter/marker_defaults"),h=e("../scatter/line_defaults"),i=e("../scatter/fillcolor_defaults"),s=e("../scatter/text_defaults");v.exports=function(d,g,b,m){function x(E,k){return r.coerce(d,g,c,E,k)}var w=d.marker?u.isOpenSymbol(d.marker.symbol):!1,y=f.isBubble(d),T=n(d,g,m,x);if(!T){g.visible=!1;return}o(d,g,m,x);var M=T<t.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",M),f.hasLines(g)&&(x("connectgaps"),h(d,g,b,m,x),x("line.shape")),f.hasMarkers(g)&&(l(d,g,b,m,x),x("marker.line.width",w||y?1:0)),f.hasText(g)&&(x("texttemplate"),s(d,g,m,x));var P=(g.line||{}).color,L=(g.marker||{}).color;x("fill"),g.fill!=="none"&&i(d,g,b,x);var I=a.getComponentMethod("errorbars","supplyDefaults");I(d,g,P||L||b,{axis:"y"}),I(d,g,P||L||b,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(g,x)}},{"../../lib":778,"../../registry":911,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/period_defaults":1207,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"../scatter/xy_defaults":1214,"./attributes":1239,"./helpers":1246}],1244:[function(e,v,S){var r=e("../../lib"),a=e("../../components/color"),u=e("../../constants/interactions").DESELECTDIM;function c(t){var f=t[0],n=f.trace,o=f.t,l=o._scene,h=o.index,i=l.selectBatch[h],s=l.unselectBatch[h],p=l.textOptions[h],d=l.textSelectedOptions[h]||{},g=l.textUnselectedOptions[h]||{},b=r.extendFlat({},p),m,x;if(i.length||s.length){var w=d.color,y=g.color,T=p.color,M=Array.isArray(T);for(b.color=new Array(n._length),m=0;m<i.length;m++)x=i[m],b.color[x]=w||(M?T[x]:T);for(m=0;m<s.length;m++){x=s[m];var P=M?T[x]:T;b.color[x]=y||(w?P:a.addOpacity(P,u))}}l.glText[h].update(b)}v.exports={styleTextSelection:c}},{"../../components/color":643,"../../constants/interactions":752,"../../lib":778}],1245:[function(e,v,S){var r=e("../scatter/format_labels");v.exports=function(u,c,t){var f=u.i;return"x"in u||(u.x=c._x[f]),"y"in u||(u.y=c._y[f]),r(u,c,t)}},{"../scatter/format_labels":1196}],1246:[function(e,v,S){var r=e("./constants");S.isOpenSymbol=function(a){return typeof a=="string"?r.OPEN_RE.test(a):a%200>100},S.isDotSymbol=function(a){return typeof a=="string"?r.DOT_RE.test(a):a>200}},{"./constants":1241}],1247:[function(e,v,S){var r=e("../../registry"),a=e("../../lib"),u=e("../scatter/get_trace_color");function c(f,n,o,l){var h=f.cd,i=h[0].t,s=h[0].trace,p=f.xa,d=f.ya,g=i.x,b=i.y,m=p.c2p(n),x=d.c2p(o),w=f.distance,y;if(i.tree){var T=p.p2c(m-w),M=p.p2c(m+w),P=d.p2c(x-w),L=d.p2c(x+w);l==="x"?y=i.tree.range(Math.min(T,M),Math.min(d._rl[0],d._rl[1]),Math.max(T,M),Math.max(d._rl[0],d._rl[1])):y=i.tree.range(Math.min(T,M),Math.min(P,L),Math.max(T,M),Math.max(P,L))}else y=i.ids;var I,E,k,C,D,F,N,G,U=w;if(l==="x")for(C=0;C<y.length;C++)E=g[y[C]],D=Math.abs(p.c2p(E)-m),D<U&&(U=D,F=d.c2p(b[y[C]])-x,G=Math.sqrt(D*D+F*F),I=y[C]);else for(C=y.length-1;C>-1;C--)E=g[y[C]],k=b[y[C]],D=p.c2p(E)-m,F=d.c2p(k)-x,N=Math.sqrt(D*D+F*F),N<U&&(U=G=N,I=y[C]);return f.index=I,f.distance=U,f.dxy=G,I===void 0?[f]:[t(f,g,b,s)]}function t(f,n,o,l){var h=f.xa,i=f.ya,s=f.distance,p=f.dxy,d=f.index,g={pointNumber:d,x:n[d],y:o[d]};g.tx=Array.isArray(l.text)?l.text[d]:l.text,g.htx=Array.isArray(l.hovertext)?l.hovertext[d]:l.hovertext,g.data=Array.isArray(l.customdata)?l.customdata[d]:l.customdata,g.tp=Array.isArray(l.textposition)?l.textposition[d]:l.textposition;var b=l.textfont;b&&(g.ts=a.isArrayOrTypedArray(b.size)?b.size[d]:b.size,g.tc=Array.isArray(b.color)?b.color[d]:b.color,g.tf=Array.isArray(b.family)?b.family[d]:b.family);var m=l.marker;m&&(g.ms=a.isArrayOrTypedArray(m.size)?m.size[d]:m.size,g.mo=a.isArrayOrTypedArray(m.opacity)?m.opacity[d]:m.opacity,g.mx=a.isArrayOrTypedArray(m.symbol)?m.symbol[d]:m.symbol,g.mc=a.isArrayOrTypedArray(m.color)?m.color[d]:m.color);var x=m&&m.line;x&&(g.mlc=Array.isArray(x.color)?x.color[d]:x.color,g.mlw=a.isArrayOrTypedArray(x.width)?x.width[d]:x.width);var w=m&&m.gradient;w&&w.type!=="none"&&(g.mgt=Array.isArray(w.type)?w.type[d]:w.type,g.mgc=Array.isArray(w.color)?w.color[d]:w.color);var y=h.c2p(g.x,!0),T=i.c2p(g.y,!0),M=g.mrc||1,P=l.hoverlabel;P&&(g.hbg=Array.isArray(P.bgcolor)?P.bgcolor[d]:P.bgcolor,g.hbc=Array.isArray(P.bordercolor)?P.bordercolor[d]:P.bordercolor,g.hts=a.isArrayOrTypedArray(P.font.size)?P.font.size[d]:P.font.size,g.htc=Array.isArray(P.font.color)?P.font.color[d]:P.font.color,g.htf=Array.isArray(P.font.family)?P.font.family[d]:P.font.family,g.hnl=a.isArrayOrTypedArray(P.namelength)?P.namelength[d]:P.namelength);var L=l.hoverinfo;L&&(g.hi=Array.isArray(L)?L[d]:L);var I=l.hovertemplate;I&&(g.ht=Array.isArray(I)?I[d]:I);var E={};E[f.index]=g;var k=l._origX,C=l._origY,D=a.extendFlat({},f,{color:u(l,g),x0:y-M,x1:y+M,xLabelVal:k?k[d]:g.x,y0:T-M,y1:T+M,yLabelVal:C?C[d]:g.y,cd:E,distance:s,spikeDistance:p,hovertemplate:g.ht});return g.htx?D.text=g.htx:g.tx?D.text=g.tx:l.text&&(D.text=l.text),a.fillText(g,l,D),r.getComponentMethod("errorbars","hoverInfo")(g,l,D),D}v.exports={hoverPoints:c,calcHover:t}},{"../../lib":778,"../../registry":911,"../scatter/get_trace_color":1197}],1248:[function(e,v,S){var r=e("./hover");v.exports={moduleType:"trace",name:"scattergl",basePlotModule:e("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../scatter/cross_trace_defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:r.hoverPoints,selectPoints:e("./select"),meta:{}}},{"../../plots/cartesian":841,"../scatter/cross_trace_defaults":1193,"../scatter/marker_colorbar":1205,"./attributes":1239,"./calc":1240,"./defaults":1243,"./format_labels":1245,"./hover":1247,"./plot":1249,"./select":1251}],1249:[function(e,v,S){var r=e("regl-scatter2d"),a=e("regl-line2d"),u=e("regl-error2d"),c=e("gl-text"),t=e("../../lib"),f=e("../../components/dragelement/helpers").selectMode,n=e("../../lib/prepare_regl"),o=e("../scatter/subtypes"),l=e("../scatter/link_traces"),h=e("./edit_style").styleTextSelection;function i(s,p,d){var g=s._size,b=s.width,m=s.height;return[g.l+p.domain[0]*g.w,g.b+d.domain[0]*g.h,b-g.r-(1-p.domain[1])*g.w,m-g.t-(1-d.domain[1])*g.h]}v.exports=function(p,d,g){if(!!g.length){var b=p._fullLayout,m=d._scene,x=d.xaxis,w=d.yaxis,y,T;if(!!m){var M=n(p,["ANGLE_instanced_arrays","OES_element_index_uint"]);if(!M){m.init();return}var P=m.count,L=b._glcanvas.data()[0].regl;if(l(p,d,g),m.dirty){if(m.error2d===!0&&(m.error2d=u(L)),m.line2d===!0&&(m.line2d=a(L)),m.scatter2d===!0&&(m.scatter2d=r(L,{constPointSize:!0})),m.fill2d===!0&&(m.fill2d=a(L)),m.glText===!0)for(m.glText=new Array(P),y=0;y<P;y++)m.glText[y]=new c(L);if(m.glText){if(P>m.glText.length){var I=P-m.glText.length;for(y=0;y<I;y++)m.glText.push(new c(L))}else if(P<m.glText.length){var E=m.glText.length-P,k=m.glText.splice(P,E);k.forEach(function(re){re.destroy()})}for(y=0;y<P;y++)m.glText[y].update(m.textOptions[y])}if(m.line2d&&(m.line2d.update(m.lineOptions),m.lineOptions=m.lineOptions.map(function(re){if(re&&re.positions){for(var ee=re.positions,ae=0;ae<ee.length&&(isNaN(ee[ae])||isNaN(ee[ae+1]));)ae+=2;for(var fe=ee.length-2;fe>ae&&(isNaN(ee[fe])||isNaN(ee[fe+1]));)fe-=2;re.positions=ee.slice(ae,fe+2)}return re}),m.line2d.update(m.lineOptions)),m.error2d){var C=(m.errorXOptions||[]).concat(m.errorYOptions||[]);m.error2d.update(C)}m.scatter2d&&m.scatter2d.update(m.markerOptions),m.fillOrder=t.repeat(null,P),m.fill2d&&(m.fillOptions=m.fillOptions.map(function(re,ee){var ae=g[ee];if(!(!re||!ae||!ae[0]||!ae[0].trace)){var fe=ae[0],de=fe.trace,pe=fe.t,W=m.lineOptions[ee],ue,me,be=[];de._ownfill&&be.push(ee),de._nexttrace&&be.push(ee+1),be.length&&(m.fillOrder[ee]=be);var Me=[],Pe=W&&W.positions||pe.positions,Ge,ze;if(de.fill==="tozeroy"){for(Ge=0;Ge<Pe.length&&isNaN(Pe[Ge+1]);)Ge+=2;for(ze=Pe.length-2;ze>Ge&&isNaN(Pe[ze+1]);)ze-=2;Pe[Ge+1]!==0&&(Me=[Pe[Ge],0]),Me=Me.concat(Pe.slice(Ge,ze+2)),Pe[ze+1]!==0&&(Me=Me.concat([Pe[ze],0]))}else if(de.fill==="tozerox"){for(Ge=0;Ge<Pe.length&&isNaN(Pe[Ge]);)Ge+=2;for(ze=Pe.length-2;ze>Ge&&isNaN(Pe[ze]);)ze-=2;Pe[Ge]!==0&&(Me=[0,Pe[Ge+1]]),Me=Me.concat(Pe.slice(Ge,ze+2)),Pe[ze]!==0&&(Me=Me.concat([0,Pe[ze+1]]))}else if(de.fill==="toself"||de.fill==="tonext"){for(Me=[],ue=0,me=0;me<Pe.length;me+=2)(isNaN(Pe[me])||isNaN(Pe[me+1]))&&(Me=Me.concat(Pe.slice(ue,me)),Me.push(Pe[ue],Pe[ue+1]),ue=me+2);Me=Me.concat(Pe.slice(ue)),ue&&Me.push(Pe[ue],Pe[ue+1])}else{var Qe=de._nexttrace;if(Qe){var tt=m.lineOptions[ee+1];if(tt){var Ce=tt.positions;if(de.fill==="tonexty"){for(Me=Pe.slice(),ee=Math.floor(Ce.length/2);ee--;){var Ae=Ce[ee*2],Be=Ce[ee*2+1];isNaN(Ae)||isNaN(Be)||Me.push(Ae,Be)}re.fill=Qe.fillcolor}}}}if(de._prevtrace&&de._prevtrace.fill==="tonext"){var qe=m.lineOptions[ee-1].positions,Tt=Me.length/2;ue=Tt;var At=[ue];for(me=0;me<qe.length;me+=2)(isNaN(qe[me])||isNaN(qe[me+1]))&&(At.push(me/2+Tt+1),ue=me+2);Me=Me.concat(qe),re.hole=At}return re.fillmode=de.fill,re.opacity=de.opacity,re.positions=Me,re}}),m.fill2d.update(m.fillOptions))}var D=b.dragmode,F=f(D),N=b.clickmode.indexOf("select")>-1;for(y=0;y<P;y++){var G=g[y][0],U=G.trace,X=G.t,z=X.index,B=U._length,j=X.x,V=X.y;if(U.selectedpoints||F||N){if(F||(F=!0),U.selectedpoints){var K=m.selectBatch[z]=t.selIndices2selPoints(U),te={};for(T=0;T<K.length;T++)te[K[T]]=1;var $=[];for(T=0;T<B;T++)te[T]||$.push(T);m.unselectBatch[z]=$}var ie=X.xpx=new Array(B),se=X.ypx=new Array(B);for(T=0;T<B;T++)ie[T]=x.c2p(j[T]),se[T]=w.c2p(V[T])}else X.xpx=X.ypx=null}if(F){if(m.select2d||(m.select2d=r(b._glcanvas.data()[1].regl)),m.scatter2d){var Q=new Array(P);for(y=0;y<P;y++)Q[y]=m.selectBatch[y].length||m.unselectBatch[y].length?m.markerUnselectedOptions[y]:{};m.scatter2d.update(Q)}m.select2d&&(m.select2d.update(m.markerOptions),m.select2d.update(m.markerSelectedOptions)),m.glText&&g.forEach(function(re){var ee=((re||[])[0]||{}).trace||{};o.hasText(ee)&&h(re)})}else m.scatter2d&&m.scatter2d.update(m.markerOptions);var H={viewport:i(b,x,w),range:[(x._rl||x.range)[0],(w._rl||w.range)[0],(x._rl||x.range)[1],(w._rl||w.range)[1]]},oe=t.repeat(H,m.count);m.fill2d&&m.fill2d.update(oe),m.line2d&&m.line2d.update(oe),m.error2d&&m.error2d.update(oe.concat(oe)),m.scatter2d&&m.scatter2d.update(oe),m.select2d&&m.select2d.update(oe),m.glText&&m.glText.forEach(function(re){re.update(H)})}}}},{"../../components/dragelement/helpers":661,"../../lib":778,"../../lib/prepare_regl":791,"../scatter/link_traces":1203,"../scatter/subtypes":1212,"./edit_style":1244,"gl-text":352,"regl-error2d":534,"regl-line2d":535,"regl-scatter2d":537}],1250:[function(e,v,S){var r=e("../../lib");v.exports=function(u,c){var t=c._scene,f={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},n={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return c._scene||(t=c._scene={},t.init=function(){r.extendFlat(t,n,f)},t.init(),t.update=function(l){var h=r.repeat(l,t.count);if(t.fill2d&&t.fill2d.update(h),t.scatter2d&&t.scatter2d.update(h),t.line2d&&t.line2d.update(h),t.error2d&&t.error2d.update(h.concat(h)),t.select2d&&t.select2d.update(h),t.glText)for(var i=0;i<t.count;i++)t.glText[i].update(l)},t.draw=function(){for(var l=t.count,h=t.fill2d,i=t.error2d,s=t.line2d,p=t.scatter2d,d=t.glText,g=t.select2d,b=t.selectBatch,m=t.unselectBatch,x=0;x<l;x++){if(h&&t.fillOrder[x]&&h.draw(t.fillOrder[x]),s&&t.lineOptions[x]&&s.draw(x),i&&(t.errorXOptions[x]&&i.draw(x),t.errorYOptions[x]&&i.draw(x+l)),p&&t.markerOptions[x])if(m[x].length){var w=r.repeat([],t.count);w[x]=m[x],p.draw(w)}else b[x].length||p.draw(x);d[x]&&t.textOptions[x]&&d[x].render()}g&&g.draw(b),t.dirty=!1},t.destroy=function(){t.fill2d&&t.fill2d.destroy&&t.fill2d.destroy(),t.scatter2d&&t.scatter2d.destroy&&t.scatter2d.destroy(),t.error2d&&t.error2d.destroy&&t.error2d.destroy(),t.line2d&&t.line2d.destroy&&t.line2d.destroy(),t.select2d&&t.select2d.destroy&&t.select2d.destroy(),t.glText&&t.glText.forEach(function(l){l.destroy&&l.destroy()}),t.lineOptions=null,t.fillOptions=null,t.markerOptions=null,t.markerSelectedOptions=null,t.markerUnselectedOptions=null,t.errorXOptions=null,t.errorYOptions=null,t.textOptions=null,t.textSelectedOptions=null,t.textUnselectedOptions=null,t.selectBatch=null,t.unselectBatch=null,c._scene=null}),t.dirty||r.extendFlat(t,f),t}},{"../../lib":778}],1251:[function(e,v,S){var r=e("../scatter/subtypes"),a=e("./edit_style").styleTextSelection;v.exports=function(c,t){var f=c.cd,n=[],o=f[0].trace,l=f[0].t,h=o._length,i=l.x,s=l.y,p=l._scene,d=l.index;if(!p)return n;var g=r.hasText(o),b=r.hasMarkers(o),m=!b&&!g;if(o.visible!==!0||m)return n;var x=[],w=[];if(t!==!1&&!t.degenerate)for(var y=0;y<h;y++)t.contains([l.xpx[y],l.ypx[y]],!1,y,c)?(x.push(y),n.push({pointNumber:y,x:i[y],y:s[y]})):w.push(y);if(b){var T=p.scatter2d;if(!x.length&&!w.length){var M=new Array(p.count);M[d]=p.markerOptions[d],T.update.apply(T,M)}else if(!p.selectBatch[d].length&&!p.unselectBatch[d].length){var P=new Array(p.count);P[d]=p.markerUnselectedOptions[d],T.update.apply(T,P)}}return p.selectBatch[d]=x,p.unselectBatch[d]=w,g&&a(f),n}},{"../scatter/subtypes":1212,"./edit_style":1244}],1252:[function(e,v,S){var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,u=e("../scattergeo/attributes"),c=e("../scatter/attributes"),t=e("../../plots/mapbox/layout_attributes"),f=e("../../plots/attributes"),n=e("../../components/colorscale/attributes"),o=e("../../lib/extend").extendFlat,l=e("../../plot_api/edit_types").overrideAll,h=u.line,i=u.marker;v.exports=l({lon:u.lon,lat:u.lat,mode:o({},c.mode,{dflt:"markers"}),text:o({},c.text,{}),texttemplate:a({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:o({},c.hovertext,{}),line:{color:h.color,width:h.width},connectgaps:c.connectgaps,marker:o({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:i.opacity,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode},n("marker")),fill:u.fill,fillcolor:c.fillcolor,textfont:t.layers.symbol.textfont,textposition:t.layers.symbol.textposition,below:{valType:"string"},selected:{marker:c.selected.marker},unselected:{marker:c.unselected.marker},hoverinfo:o({},f.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:r()},"calc","nested")},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/mapbox/layout_attributes":887,"../../plots/template_attributes":906,"../scatter/attributes":1187,"../scattergeo/attributes":1229}],1253:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../constants/numerical").BADNUM,c=e("../../lib/geojson_utils"),t=e("../../components/colorscale"),f=e("../../components/drawing"),n=e("../scatter/make_bubble_size_func"),o=e("../scatter/subtypes"),l=e("../../plots/mapbox/convert_text_opts"),h=e("../../components/fx/helpers").appendArrayPointValue,i=e("../../lib/svg_text_utils").NEWLINES,s=e("../../lib/svg_text_utils").BR_TAG_ALL;v.exports=function(y,T){var M=T[0].trace,P=M.visible===!0&&M._length!==0,L=M.fill!=="none",I=o.hasLines(M),E=o.hasMarkers(M),k=o.hasText(M),C=E&&M.marker.symbol==="circle",D=E&&M.marker.symbol!=="circle",F=p(),N=p(),G=p(),U=p(),X={fill:F,line:N,circle:G,symbol:U};if(!P)return X;var z;if((L||I)&&(z=c.calcTraceToLineCoords(T)),L&&(F.geojson=c.makePolygon(z),F.layout.visibility="visible",a.extendFlat(F.paint,{"fill-color":M.fillcolor})),I&&(N.geojson=c.makeLine(z),N.layout.visibility="visible",a.extendFlat(N.paint,{"line-width":M.line.width,"line-color":M.line.color,"line-opacity":M.opacity})),C){var B=d(T);G.geojson=B.geojson,G.layout.visibility="visible",a.extendFlat(G.paint,{"circle-color":B.mcc,"circle-radius":B.mrc,"circle-opacity":B.mo})}if((D||k)&&(U.geojson=g(T,y),a.extendFlat(U.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),D&&(a.extendFlat(U.layout,{"icon-size":M.marker.size/10}),"angle"in M.marker&&M.marker.angle!=="auto"&&a.extendFlat(U.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),U.layout["icon-allow-overlap"]=M.marker.allowoverlap,a.extendFlat(U.paint,{"icon-opacity":M.opacity*M.marker.opacity,"icon-color":M.marker.color})),k)){var j=(M.marker||{}).size,V=l(M.textposition,j);a.extendFlat(U.layout,{"text-size":M.textfont.size,"text-anchor":V.anchor,"text-offset":V.offset}),a.extendFlat(U.paint,{"text-color":M.textfont.color,"text-opacity":M.opacity})}return X};function p(){return{geojson:c.makeBlank(),layout:{visibility:"none"},paint:{}}}function d(w){var y=w[0].trace,T=y.marker,M=y.selectedpoints,P=a.isArrayOrTypedArray(T.color),L=a.isArrayOrTypedArray(T.size),I=a.isArrayOrTypedArray(T.opacity),E;function k(V){return y.opacity*V}function C(V){return V/2}var D;P&&(t.hasColorscale(y,"marker")?D=t.makeColorScaleFuncFromTrace(T):D=a.identity);var F;L&&(F=n(y));var N;I&&(N=function(V){var K=r(V)?+a.constrain(V,0,1):0;return k(K)});var G=[];for(E=0;E<w.length;E++){var U=w[E],X=U.lonlat;if(!x(X)){var z={};D&&(z.mcc=U.mcc=D(U.mc)),F&&(z.mrc=U.mrc=F(U.ms)),N&&(z.mo=N(U.mo)),M&&(z.selected=U.selected||0),G.push({type:"Feature",geometry:{type:"Point",coordinates:X},properties:z})}}var B;if(M)for(B=f.makeSelectedPointStyleFns(y),E=0;E<G.length;E++){var j=G[E].properties;B.selectedOpacityFn&&(j.mo=k(B.selectedOpacityFn(j))),B.selectedColorFn&&(j.mcc=B.selectedColorFn(j)),B.selectedSizeFn&&(j.mrc=B.selectedSizeFn(j))}return{geojson:{type:"FeatureCollection",features:G},mcc:P||B&&B.selectedColorFn?{type:"identity",property:"mcc"}:T.color,mrc:L||B&&B.selectedSizeFn?{type:"identity",property:"mrc"}:C(T.size),mo:I||B&&B.selectedOpacityFn?{type:"identity",property:"mo"}:k(T.opacity)}}function g(w,y){for(var T=y._fullLayout,M=w[0].trace,P=M.marker||{},L=P.symbol,I=P.angle,E=L!=="circle"?b(L):m,k=I!=="auto"?b(I,!0):m,C=o.hasText(M)?b(M.text):m,D=[],F=0;F<w.length;F++){var N=w[F];if(!x(N.lonlat)){var G=M.texttemplate,U;if(G){var X=Array.isArray(G)?G[F]||"":G,z=M._module.formatLabels(N,M,T),B={};h(B,M,N.i);var j=M._meta||{};U=a.texttemplateString(X,z,T._d3locale,B,N,j)}else U=C(F);U&&(U=U.replace(i,"").replace(s,`
`)),D.push({type:"Feature",geometry:{type:"Point",coordinates:N.lonlat},properties:{symbol:E(F),angle:k(F),text:U}})}}return{type:"FeatureCollection",features:D}}function b(w,y){return a.isArrayOrTypedArray(w)?y?function(T){return r(w[T])?+w[T]:0}:function(T){return w[T]}:w?function(){return w}:m}function m(){return""}function x(w){return w[0]===u}},{"../../components/colorscale":655,"../../components/drawing":665,"../../components/fx/helpers":679,"../../constants/numerical":753,"../../lib":778,"../../lib/geojson_utils":772,"../../lib/svg_text_utils":803,"../../plots/mapbox/convert_text_opts":884,"../scatter/make_bubble_size_func":1204,"../scatter/subtypes":1212,"fast-isnumeric":241}],1254:[function(e,v,S){var r=e("../../lib"),a=e("../scatter/subtypes"),u=e("../scatter/marker_defaults"),c=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),f=e("../scatter/fillcolor_defaults"),n=e("./attributes");v.exports=function(h,i,s,p){function d(m,x){return r.coerce(h,i,n,m,x)}var g=o(h,i,d);if(!g){i.visible=!1;return}if(d("text"),d("texttemplate"),d("hovertext"),d("hovertemplate"),d("mode"),d("below"),a.hasLines(i)&&(c(h,i,s,p,d,{noDash:!0}),d("connectgaps")),a.hasMarkers(i)){u(h,i,s,p,d,{noLine:!0}),d("marker.allowoverlap"),d("marker.angle");var b=i.marker;b.symbol!=="circle"&&(r.isArrayOrTypedArray(b.size)&&(b.size=b.size[0]),r.isArrayOrTypedArray(b.color)&&(b.color=b.color[0]))}a.hasText(i)&&t(h,i,p,d,{noSelect:!0}),d("fill"),i.fill!=="none"&&f(h,i,s,d),r.coerceSelectionMarkerOpacity(i,d)};function o(l,h,i){var s=i("lon")||[],p=i("lat")||[],d=Math.min(s.length,p.length);return h._length=d,d}},{"../../lib":778,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1252}],1255:[function(e,v,S){v.exports=function(a,u){return a.lon=u.lon,a.lat=u.lat,a}},{}],1256:[function(e,v,S){var r=e("../../plots/cartesian/axes");v.exports=function(u,c,t){var f={},n=t[c.subplot]._subplot,o=n.mockAxis,l=u.lonlat;return f.lonLabel=r.tickText(o,o.c2l(l[0]),!0).text,f.latLabel=r.tickText(o,o.c2l(l[1]),!0).text,f}},{"../../plots/cartesian/axes":828}],1257:[function(e,v,S){var r=e("../../components/fx"),a=e("../../lib"),u=e("../scatter/get_trace_color"),c=a.fillText,t=e("../../constants/numerical").BADNUM;v.exports=function(o,l,h){var i=o.cd,s=i[0].trace,p=o.xa,d=o.ya,g=o.subplot,b=l>=0?Math.floor((l+180)/360):Math.ceil((l-180)/360),m=b*360,x=l-m;function w(C){var D=C.lonlat;if(D[0]===t)return 1/0;var F=a.modHalf(D[0],360),N=D[1],G=g.project([F,N]),U=G.x-p.c2p([x,N]),X=G.y-d.c2p([F,h]),z=Math.max(3,C.mrc||0);return Math.max(Math.sqrt(U*U+X*X)-z,1-3/z)}if(r.getClosest(i,w,o),o.index!==!1){var y=i[o.index],T=y.lonlat,M=[a.modHalf(T[0],360)+m,T[1]],P=p.c2p(M),L=d.c2p(M),I=y.mrc||1;o.x0=P-I,o.x1=P+I,o.y0=L-I,o.y1=L+I;var E={};E[s.subplot]={_subplot:g};var k=s._module.formatLabels(y,s,E);return o.lonLabel=k.lonLabel,o.latLabel=k.latLabel,o.color=u(s,y),o.extraText=f(s,y,i[0].t.labels),o.hovertemplate=s.hovertemplate,[o]}};function f(n,o,l){if(n.hovertemplate)return;var h=o.hi||n.hoverinfo,i=h.split("+"),s=i.indexOf("all")!==-1,p=i.indexOf("lon")!==-1,d=i.indexOf("lat")!==-1,g=o.lonlat,b=[];function m(x){return x+"\xB0"}return s||p&&d?b.push("("+m(g[0])+", "+m(g[1])+")"):p?b.push(l.lon+m(g[0])):d&&b.push(l.lat+m(g[1])),(s||i.indexOf("text")!==-1)&&c(o,n,b),b.join("<br>")}},{"../../components/fx":683,"../../constants/numerical":753,"../../lib":778,"../scatter/get_trace_color":1197}],1258:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("../scattergeo/calc"),plot:e("./plot"),hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),styleOnSelect:function(r,a){if(a){var u=a[0].trace;u._glTrace.update(a)}},moduleType:"trace",name:"scattermapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":885,"../scatter/marker_colorbar":1205,"../scattergeo/calc":1230,"./attributes":1252,"./defaults":1254,"./event_data":1255,"./format_labels":1256,"./hover":1257,"./plot":1259,"./select":1260}],1259:[function(e,v,S){var r=e("./convert"),a=e("../../plots/mapbox/constants").traceLayerPrefix,u=["fill","line","circle","symbol"];function c(f,n){this.type="scattermapbox",this.subplot=f,this.uid=n,this.sourceIds={fill:"source-"+n+"-fill",line:"source-"+n+"-line",circle:"source-"+n+"-circle",symbol:"source-"+n+"-symbol"},this.layerIds={fill:a+n+"-fill",line:a+n+"-line",circle:a+n+"-circle",symbol:a+n+"-symbol"},this.below=null}var t=c.prototype;t.addSource=function(f,n){this.subplot.map.addSource(this.sourceIds[f],{type:"geojson",data:n.geojson})},t.setSourceData=function(f,n){this.subplot.map.getSource(this.sourceIds[f]).setData(n.geojson)},t.addLayer=function(f,n,o){this.subplot.addLayer({type:f,id:this.layerIds[f],source:this.sourceIds[f],layout:n.layout,paint:n.paint},o)},t.update=function(n){var o=this.subplot,l=o.map,h=r(o.gd,n),i=o.belowLookup["trace-"+this.uid],s,p,d;if(i!==this.below){for(s=u.length-1;s>=0;s--)p=u[s],l.removeLayer(this.layerIds[p]);for(s=0;s<u.length;s++)p=u[s],d=h[p],this.addLayer(p,d,i);this.below=i}for(s=0;s<u.length;s++)p=u[s],d=h[p],o.setOptions(this.layerIds[p],"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&(this.setSourceData(p,d),o.setOptions(this.layerIds[p],"setPaintProperty",d.paint));n[0].trace._glTrace=this},t.dispose=function(){for(var n=this.subplot.map,o=u.length-1;o>=0;o--){var l=u[o];n.removeLayer(this.layerIds[l]),n.removeSource(this.sourceIds[l])}},v.exports=function(n,o){for(var l=o[0].trace,h=new c(n,l.uid),i=r(n.gd,o),s=h.below=n.belowLookup["trace-"+l.uid],p=0;p<u.length;p++){var d=u[p],g=i[d];h.addSource(d,g),h.addLayer(d,g,s)}return o[0].trace._glTrace=h,h}},{"../../plots/mapbox/constants":883,"./convert":1253}],1260:[function(e,v,S){var r=e("../../lib"),a=e("../scatter/subtypes"),u=e("../../constants/numerical").BADNUM;v.exports=function(t,f){var n=t.cd,o=t.xaxis,l=t.yaxis,h=[],i=n[0].trace,s;if(!a.hasMarkers(i))return[];if(f===!1)for(s=0;s<n.length;s++)n[s].selected=0;else for(s=0;s<n.length;s++){var p=n[s],d=p.lonlat;if(d[0]!==u){var g=[r.modHalf(d[0],360),d[1]],b=[o.c2p(g),l.c2p(g)];f.contains(b,null,s,t)?(h.push({pointNumber:s,lon:d[0],lat:d[1]}),p.selected=1):p.selected=0}}return h}},{"../../constants/numerical":753,"../../lib":778,"../scatter/subtypes":1212}],1261:[function(e,v,S){var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,u=e("../../lib/extend").extendFlat,c=e("../scatter/attributes"),t=e("../../plots/attributes"),f=c.line;v.exports={mode:c.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:c.text,texttemplate:a({editType:"plot"},{keys:["r","theta","text"]}),hovertext:c.hovertext,line:{color:f.color,width:f.width,dash:f.dash,shape:u({},f.shape,{values:["linear","spline"]}),smoothing:f.smoothing,editType:"calc"},connectgaps:c.connectgaps,marker:c.marker,cliponaxis:u({},c.cliponaxis,{dflt:!1}),textposition:c.textposition,textfont:c.textfont,fill:u({},c.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:c.fillcolor,hoverinfo:u({},t.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:c.hoveron,hovertemplate:r(),selected:c.selected,unselected:c.unselected}},{"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1262:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../../constants/numerical").BADNUM,u=e("../../plots/cartesian/axes"),c=e("../scatter/colorscale_calc"),t=e("../scatter/arrays_to_calcdata"),f=e("../scatter/calc_selection"),n=e("../scatter/calc").calcMarkerSize;v.exports=function(l,h){for(var i=l._fullLayout,s=h.subplot,p=i[s].radialaxis,d=i[s].angularaxis,g=p.makeCalcdata(h,"r"),b=d.makeCalcdata(h,"theta"),m=h._length,x=new Array(m),w=0;w<m;w++){var y=g[w],T=b[w],M=x[w]={};r(y)&&r(T)?(M.r=y,M.theta=T):M.r=a}var P=n(h,m);return h._extremes.x=u.findExtremes(p,g,{ppad:P}),c(l,h),t(x,h),f(x,h),x}},{"../../constants/numerical":753,"../../plots/cartesian/axes":828,"../scatter/arrays_to_calcdata":1186,"../scatter/calc":1188,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1263:[function(e,v,S){var r=e("../../lib"),a=e("../scatter/subtypes"),u=e("../scatter/marker_defaults"),c=e("../scatter/line_defaults"),t=e("../scatter/line_shape_defaults"),f=e("../scatter/text_defaults"),n=e("../scatter/fillcolor_defaults"),o=e("../scatter/constants").PTS_LINESONLY,l=e("./attributes");function h(s,p,d,g){function b(w,y){return r.coerce(s,p,l,w,y)}var m=i(s,p,g,b);if(!m){p.visible=!1;return}b("thetaunit"),b("mode",m<o?"lines+markers":"lines"),b("text"),b("hovertext"),p.hoveron!=="fills"&&b("hovertemplate"),a.hasLines(p)&&(c(s,p,d,g,b),t(s,p,b),b("connectgaps")),a.hasMarkers(p)&&u(s,p,d,g,b,{gradient:!0}),a.hasText(p)&&(b("texttemplate"),f(s,p,g,b));var x=[];(a.hasMarkers(p)||a.hasText(p))&&(b("cliponaxis"),b("marker.maxdisplayed"),x.push("points")),b("fill"),p.fill!=="none"&&(n(s,p,d,b),a.hasLines(p)||t(s,p,b)),(p.fill==="tonext"||p.fill==="toself")&&x.push("fills"),b("hoveron",x.join("+")||"points"),r.coerceSelectionMarkerOpacity(p,b)}function i(s,p,d,g){var b=g("r"),m=g("theta"),x;if(b)m?x=Math.min(b.length,m.length):(x=b.length,g("theta0"),g("dtheta"));else{if(!m)return 0;x=p.theta.length,g("r0"),g("dr")}return p._length=x,x}v.exports={handleRThetaDefaults:i,supplyDefaults:h}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/line_shape_defaults":1202,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1261}],1264:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes");v.exports=function(c,t,f){var n={},o=f[t.subplot]._subplot,l,h;o?(l=o.radialAxis,h=o.angularAxis):(o=f[t.subplot],l=o.radialaxis,h=o.angularaxis);var i=l.c2l(c.r);n.rLabel=a.tickText(l,i,!0).text;var s=h.thetaunit==="degrees"?r.rad2deg(c.theta):c.theta;return n.thetaLabel=a.tickText(h,s,!0).text,n}},{"../../lib":778,"../../plots/cartesian/axes":828}],1265:[function(e,v,S){var r=e("../scatter/hover");function a(c,t,f,n){var o=r(c,t,f,n);if(!(!o||o[0].index===!1)){var l=o[0];if(l.index===void 0)return o;var h=c.subplot,i=l.cd[l.index],s=l.trace;if(!!h.isPtInside(i))return l.xLabelVal=void 0,l.yLabelVal=void 0,u(i,s,h,l),l.hovertemplate=s.hovertemplate,o}}function u(c,t,f,n){var o=f.radialAxis,l=f.angularAxis;o._hovertitle="r",l._hovertitle="\u03B8";var h={};h[t.subplot]={_subplot:f};var i=t._module.formatLabels(c,t,h);n.rLabel=i.rLabel,n.thetaLabel=i.thetaLabel;var s=c.hi||t.hoverinfo,p=[];function d(b,m){p.push(b._hovertitle+": "+m)}if(!t.hovertemplate){var g=s.split("+");g.indexOf("all")!==-1&&(g=["r","theta","text"]),g.indexOf("r")!==-1&&d(o,n.rLabel),g.indexOf("theta")!==-1&&d(l,n.thetaLabel),g.indexOf("text")!==-1&&n.text&&(p.push(n.text),delete n.text),n.extraText=p.join("<br>")}}v.exports={hoverPoints:a,makeHoverPointText:u}},{"../scatter/hover":1198}],1266:[function(e,v,S){v.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scatter/select"),meta:{}}},{"../../plots/polar":894,"../scatter/marker_colorbar":1205,"../scatter/select":1209,"../scatter/style":1211,"./attributes":1261,"./calc":1262,"./defaults":1263,"./format_labels":1264,"./hover":1265,"./plot":1267}],1267:[function(e,v,S){var r=e("../scatter/plot"),a=e("../../constants/numerical").BADNUM;v.exports=function(c,t,f){for(var n=t.layers.frontplot.select("g.scatterlayer"),o={xaxis:t.xaxis,yaxis:t.yaxis,plot:t.framework,layerClipId:t._hasClipOnAxisFalse?t.clipIds.forTraces:null},l=t.radialAxis,h=t.angularAxis,i=0;i<f.length;i++)for(var s=f[i],p=0;p<s.length;p++){var d=s[p],g=d.r;if(g===a)d.x=d.y=a;else{var b=l.c2g(g),m=h.c2g(d.theta);d.x=b*Math.cos(m),d.y=b*Math.sin(m)}}r(c,o,f,n)}},{"../../constants/numerical":753,"../scatter/plot":1208}],1268:[function(e,v,S){var r=e("../scatterpolar/attributes"),a=e("../scattergl/attributes"),u=e("../../plots/template_attributes").texttemplateAttrs;v.exports={mode:r.mode,r:r.r,theta:r.theta,r0:r.r0,dr:r.dr,theta0:r.theta0,dtheta:r.dtheta,thetaunit:r.thetaunit,text:r.text,texttemplate:u({editType:"plot"},{keys:["r","theta","text"]}),hovertext:r.hovertext,hovertemplate:r.hovertemplate,line:a.line,connectgaps:a.connectgaps,marker:a.marker,fill:a.fill,fillcolor:a.fillcolor,textposition:a.textposition,textfont:a.textfont,hoverinfo:r.hoverinfo,selected:r.selected,unselected:r.unselected}},{"../../plots/template_attributes":906,"../scattergl/attributes":1239,"../scatterpolar/attributes":1261}],1269:[function(e,v,S){var r=e("../scatter/colorscale_calc"),a=e("../scatter/calc").calcMarkerSize,u=e("../scattergl/convert"),c=e("../../plots/cartesian/axes"),t=e("../scattergl/constants").TOO_MANY_POINTS;v.exports=function(n,o){var l=n._fullLayout,h=o.subplot,i=l[h].radialaxis,s=l[h].angularaxis,p=o._r=i.makeCalcdata(o,"r"),d=o._theta=s.makeCalcdata(o,"theta"),g=o._length,b={};g<p.length&&(p=p.slice(0,g)),g<d.length&&(d=d.slice(0,g)),b.r=p,b.theta=d,r(n,o);var m=b.opts=u.style(n,o),x;return g<t?x=a(o,g):m.marker&&(x=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),o._extremes.x=c.findExtremes(i,p,{ppad:x}),[{x:!1,y:!1,t:b,trace:o}]}},{"../../plots/cartesian/axes":828,"../scatter/calc":1188,"../scatter/colorscale_calc":1190,"../scattergl/constants":1241,"../scattergl/convert":1242}],1270:[function(e,v,S){var r=e("../../lib"),a=e("../scatter/subtypes"),u=e("../scatterpolar/defaults").handleRThetaDefaults,c=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),f=e("../scatter/text_defaults"),n=e("../scatter/fillcolor_defaults"),o=e("../scatter/constants").PTS_LINESONLY,l=e("./attributes");v.exports=function(i,s,p,d){function g(m,x){return r.coerce(i,s,l,m,x)}var b=u(i,s,d,g);if(!b){s.visible=!1;return}g("thetaunit"),g("mode",b<o?"lines+markers":"lines"),g("text"),g("hovertext"),s.hoveron!=="fills"&&g("hovertemplate"),a.hasLines(s)&&(t(i,s,p,d,g),g("connectgaps")),a.hasMarkers(s)&&c(i,s,p,d,g),a.hasText(s)&&(g("texttemplate"),f(i,s,d,g)),g("fill"),s.fill!=="none"&&n(i,s,p,g),r.coerceSelectionMarkerOpacity(s,g)}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"../scatterpolar/defaults":1263,"./attributes":1268}],1271:[function(e,v,S){var r=e("../scatterpolar/format_labels");v.exports=function(u,c,t){var f=u.i;return"r"in u||(u.r=c._r[f]),"theta"in u||(u.theta=c._theta[f]),r(u,c,t)}},{"../scatterpolar/format_labels":1264}],1272:[function(e,v,S){var r=e("../scattergl/hover"),a=e("../scatterpolar/hover").makeHoverPointText;function u(c,t,f,n){var o=c.cd,l=o[0].t,h=l.r,i=l.theta,s=r.hoverPoints(c,t,f,n);if(!(!s||s[0].index===!1)){var p=s[0];if(p.index===void 0)return s;var d=c.subplot,g=p.cd[p.index],b=p.trace;if(g.r=h[p.index],g.theta=i[p.index],!!d.isPtInside(g))return p.xLabelVal=void 0,p.yLabelVal=void 0,a(g,b,d,p),s}}v.exports={hoverPoints:u}},{"../scattergl/hover":1247,"../scatterpolar/hover":1265}],1273:[function(e,v,S){v.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scattergl/select"),meta:{}}},{"../../plots/polar":894,"../scatter/marker_colorbar":1205,"../scattergl/select":1251,"./attributes":1268,"./calc":1269,"./defaults":1270,"./format_labels":1271,"./hover":1272,"./plot":1274}],1274:[function(e,v,S){var r=e("@plotly/point-cluster"),a=e("fast-isnumeric"),u=e("../scattergl/plot"),c=e("../scattergl/scene_update"),t=e("../scattergl/convert"),f=e("../../lib"),n=e("../scattergl/constants").TOO_MANY_POINTS;v.exports=function(l,h,i){if(!!i.length){var s=h.radialAxis,p=h.angularAxis,d=c(l,h);return i.forEach(function(g){if(!(!g||!g[0]||!g[0].trace)){var b=g[0],m=b.trace,x=b.t,w=m._length,y=x.r,T=x.theta,M=x.opts,P,L=y.slice(),I=T.slice();for(P=0;P<y.length;P++)h.isPtInside({r:y[P],theta:T[P]})||(L[P]=NaN,I[P]=NaN);var E=new Array(w*2),k=Array(w),C=Array(w);for(P=0;P<w;P++){var D=L[P],F,N;if(a(D)){var G=s.c2g(D),U=p.c2g(I[P],m.thetaunit);F=G*Math.cos(U),N=G*Math.sin(U)}else F=N=NaN;k[P]=E[P*2]=F,C[P]=E[P*2+1]=N}x.tree=r(E),M.marker&&w>=n&&(M.marker.cluster=x.tree),M.marker&&(M.markerSel.positions=M.markerUnsel.positions=M.marker.positions=E),M.line&&E.length>1&&f.extendFlat(M.line,t.linePositions(l,m,E)),M.text&&(f.extendFlat(M.text,{positions:E},t.textPosition(l,m,M.text,M.marker)),f.extendFlat(M.textSel,{positions:E},t.textPosition(l,m,M.text,M.markerSel)),f.extendFlat(M.textUnsel,{positions:E},t.textPosition(l,m,M.text,M.markerUnsel))),M.fill&&!d.fill2d&&(d.fill2d=!0),M.marker&&!d.scatter2d&&(d.scatter2d=!0),M.line&&!d.line2d&&(d.line2d=!0),M.text&&!d.glText&&(d.glText=!0),d.lineOptions.push(M.line),d.fillOptions.push(M.fill),d.markerOptions.push(M.marker),d.markerSelectedOptions.push(M.markerSel),d.markerUnselectedOptions.push(M.markerUnsel),d.textOptions.push(M.text),d.textSelectedOptions.push(M.textSel),d.textUnselectedOptions.push(M.textUnsel),d.selectBatch.push([]),d.unselectBatch.push([]),x.x=k,x.y=C,x.rawx=k,x.rawy=C,x.r=y,x.theta=T,x.positions=E,x._scene=d,x.index=d.count,d.count++}}),u(l,h,i)}}},{"../../lib":778,"../scattergl/constants":1241,"../scattergl/convert":1242,"../scattergl/plot":1249,"../scattergl/scene_update":1250,"@plotly/point-cluster":57,"fast-isnumeric":241}],1275:[function(e,v,S){var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,u=e("../scatter/attributes"),c=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),f=e("../../components/drawing/attributes").dash,n=e("../../lib/extend").extendFlat,o=u.marker,l=u.line,h=o.line;v.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:n({},u.mode,{dflt:"markers"}),text:n({},u.text,{}),texttemplate:a({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:n({},u.hovertext,{}),line:{color:l.color,width:l.width,dash:f,shape:n({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:u.connectgaps,cliponaxis:u.cliponaxis,fill:n({},u.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:u.fillcolor,marker:n({symbol:o.symbol,opacity:o.opacity,maxdisplayed:o.maxdisplayed,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,line:n({width:h.width,editType:"calc"},t("marker.line")),gradient:o.gradient,editType:"calc"},t("marker")),textfont:u.textfont,textposition:u.textposition,selected:u.selected,unselected:u.unselected,hoverinfo:n({},c.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:u.hoveron,hovertemplate:r()}},{"../../components/colorscale/attributes":650,"../../components/drawing/attributes":664,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1276:[function(e,v,S){var r=e("fast-isnumeric"),a=e("../scatter/colorscale_calc"),u=e("../scatter/arrays_to_calcdata"),c=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,f=["a","b","c"],n={a:["b","c"],b:["a","c"],c:["a","b"]};v.exports=function(l,h){var i=l._fullLayout[h.subplot],s=i.sum,p=h.sum||s,d={a:h.a,b:h.b,c:h.c},g,b,m,x,w,y;for(g=0;g<f.length;g++)if(m=f[g],!d[m]){for(w=d[n[m][0]],y=d[n[m][1]],x=new Array(w.length),b=0;b<w.length;b++)x[b]=p-w[b]-y[b];d[m]=x}var T=h._length,M=new Array(T),P,L,I,E,k,C;for(g=0;g<T;g++)P=d.a[g],L=d.b[g],I=d.c[g],r(P)&&r(L)&&r(I)?(P=+P,L=+L,I=+I,E=s/(P+L+I),E!==1&&(P*=E,L*=E,I*=E),C=P,k=I-L,M[g]={x:k,y:C,a:P,b:L,c:I}):M[g]={x:!1,y:!1};return t(h,T),a(l,h),u(M,h),c(M,h),M}},{"../scatter/arrays_to_calcdata":1186,"../scatter/calc":1188,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1277:[function(e,v,S){var r=e("../../lib"),a=e("../scatter/constants"),u=e("../scatter/subtypes"),c=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),f=e("../scatter/line_shape_defaults"),n=e("../scatter/text_defaults"),o=e("../scatter/fillcolor_defaults"),l=e("./attributes");v.exports=function(i,s,p,d){function g(M,P){return r.coerce(i,s,l,M,P)}var b=g("a"),m=g("b"),x=g("c"),w;if(b?(w=b.length,m?(w=Math.min(w,m.length),x&&(w=Math.min(w,x.length))):x?w=Math.min(w,x.length):w=0):m&&x&&(w=Math.min(m.length,x.length)),!w){s.visible=!1;return}s._length=w,g("sum"),g("text"),g("hovertext"),s.hoveron!=="fills"&&g("hovertemplate");var y=w<a.PTS_LINESONLY?"lines+markers":"lines";g("mode",y),u.hasLines(s)&&(t(i,s,p,d,g),f(i,s,g),g("connectgaps")),u.hasMarkers(s)&&c(i,s,p,d,g,{gradient:!0}),u.hasText(s)&&(g("texttemplate"),n(i,s,d,g));var T=[];(u.hasMarkers(s)||u.hasText(s))&&(g("cliponaxis"),g("marker.maxdisplayed"),T.push("points")),g("fill"),s.fill!=="none"&&(o(i,s,p,g),u.hasLines(s)||f(i,s,g)),(s.fill==="tonext"||s.fill==="toself")&&T.push("fills"),g("hoveron",T.join("+")||"points"),r.coerceSelectionMarkerOpacity(s,g)}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/line_shape_defaults":1202,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1275}],1278:[function(e,v,S){v.exports=function(a,u,c,t,f){if(u.xa&&(a.xaxis=u.xa),u.ya&&(a.yaxis=u.ya),t[f]){var n=t[f];a.a=n.a,a.b=n.b,a.c=n.c}else a.a=u.a,a.b=u.b,a.c=u.c;return a}},{}],1279:[function(e,v,S){var r=e("../../plots/cartesian/axes");v.exports=function(u,c,t){var f={},n=t[c.subplot]._subplot;return f.aLabel=r.tickText(n.aaxis,u.a,!0).text,f.bLabel=r.tickText(n.baxis,u.b,!0).text,f.cLabel=r.tickText(n.caxis,u.c,!0).text,f}},{"../../plots/cartesian/axes":828}],1280:[function(e,v,S){var r=e("../scatter/hover");v.exports=function(u,c,t,f){var n=r(u,c,t,f);if(!n||n[0].index===!1)return;var o=n[0];if(o.index===void 0){var l=1-o.y0/u.ya._length,h=u.xa._length,i=h*l/2,s=h-i;return o.x0=Math.max(Math.min(o.x0,s),i),o.x1=Math.max(Math.min(o.x1,s),i),n}var p=o.cd[o.index],d=o.trace,g=o.subplot;o.a=p.a,o.b=p.b,o.c=p.c,o.xLabelVal=void 0,o.yLabelVal=void 0;var b={};b[d.subplot]={_subplot:g};var m=d._module.formatLabels(p,d,b);o.aLabel=m.aLabel,o.bLabel=m.bLabel,o.cLabel=m.cLabel;var x=p.hi||d.hoverinfo,w=[];function y(M,P){w.push(M._hovertitle+": "+P)}if(!d.hovertemplate){var T=x.split("+");T.indexOf("all")!==-1&&(T=["a","b","c"]),T.indexOf("a")!==-1&&y(g.aaxis,o.aLabel),T.indexOf("b")!==-1&&y(g.baxis,o.bLabel),T.indexOf("c")!==-1&&y(g.caxis,o.cLabel)}return o.extraText=w.join("<br>"),o.hovertemplate=d.hovertemplate,n}},{"../scatter/hover":1198}],1281:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:e("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":907,"../scatter/marker_colorbar":1205,"../scatter/select":1209,"../scatter/style":1211,"./attributes":1275,"./calc":1276,"./defaults":1277,"./event_data":1278,"./format_labels":1279,"./hover":1280,"./plot":1282}],1282:[function(e,v,S){var r=e("../scatter/plot");v.exports=function(u,c,t){var f=c.plotContainer;f.select(".scatterlayer").selectAll("*").remove();var n={xaxis:c.xaxis,yaxis:c.yaxis,plot:f,layerClipId:c._hasClipOnAxisFalse?c.clipIdRelative:null},o=c.layers.frontplot.select("g.scatterlayer");r(u,n,t,o)}},{"../scatter/plot":1208}],1283:[function(e,v,S){var r=e("../scatter/attributes"),a=e("../../components/colorscale/attributes"),u=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../scattergl/attributes"),t=e("../../plots/cartesian/constants").idRegex,f=e("../../plot_api/plot_template").templatedArray,n=e("../../lib/extend").extendFlat,o=r.marker,l=o.line,h=n(a("marker.line",{editTypeOverride:"calc"}),{width:n({},l.width,{editType:"calc"}),editType:"calc"}),i=n(a("marker"),{symbol:o.symbol,size:n({},o.size,{editType:"markerSize"}),sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:o.opacity,colorbar:o.colorbar,line:h,editType:"calc"});i.color.editType=i.cmin.editType=i.cmax.editType="style";function s(p){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:t[p],editType:"plot"}}}v.exports={dimensions:f("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:n({},c.text,{}),hovertext:n({},c.hovertext,{}),hovertemplate:u(),marker:i,xaxes:s("x"),yaxes:s("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:c.selected.marker,editType:"calc"},unselected:{marker:c.unselected.marker,editType:"calc"},opacity:c.opacity}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834,"../../plots/template_attributes":906,"../scatter/attributes":1187,"../scattergl/attributes":1239}],1284:[function(e,v,S){var r=e("regl-line2d"),a=e("../../registry"),u=e("../../lib/prepare_regl"),c=e("../../plots/get_data").getModuleCalcData,t=e("../../plots/cartesian"),f=e("../../plots/cartesian/axis_ids").getFromId,n=e("../../plots/cartesian/axes").shouldShowZeroLine,o="splom";function l(g){var b=g._fullLayout,m=a.getModule(o),x=c(g.calcdata,m)[0],w=u(g,["ANGLE_instanced_arrays","OES_element_index_uint"]);!w||(b._hasOnlyLargeSploms&&s(g),m.plot(g,{},x))}function h(g){var b=g.calcdata,m=g._fullLayout;m._hasOnlyLargeSploms&&s(g);for(var x=0;x<b.length;x++){var w=b[x][0],y=w.trace,T=m._splomScenes[y.uid];y.type==="splom"&&T&&T.matrix&&i(g,y,T)}}function i(g,b,m){for(var x=m.matrixOptions.data.length,w=b._visibleDims,y=m.viewOpts.ranges=new Array(x),T=0;T<w.length;T++){var M=w[T],P=y[T]=new Array(4),L=f(g,b._diag[M][0]);L&&(P[0]=L.r2l(L.range[0]),P[2]=L.r2l(L.range[1]));var I=f(g,b._diag[M][1]);I&&(P[1]=I.r2l(I.range[0]),P[3]=I.r2l(I.range[1]))}m.selectBatch.length||m.unselectBatch.length?m.matrix.update({ranges:y},{ranges:y}):m.matrix.update({ranges:y})}function s(g){var b=g._fullLayout,m=b._glcanvas.data()[0].regl,x=b._splomGrid;x||(x=b._splomGrid=r(m)),x.update(p(g))}function p(g){var b=g._fullLayout,m=b._size,x=[0,0,b.width,b.height],w={},y;function T(U,X,z,B,j,V){var K=X[U+"color"],te=X[U+"width"],$=String(K+te);$ in w?w[$].data.push(NaN,NaN,z,B,j,V):w[$]={data:[z,B,j,V],join:"rect",thickness:te,color:K,viewport:x,range:x,overlay:!1}}for(y in b._splomSubplots){var M=b._plots[y],P=M.xaxis,L=M.yaxis,I=P._gridVals,E=L._gridVals,k=m.b+L.domain[0]*m.h,C=-L._m,D=-C*L.r2l(L.range[0],L.calendar),F,N;if(P.showgrid)for(y=0;y<I.length;y++)F=P._offset+P.l2p(I[y].x),T("grid",P,F,k,F,k+L._length);if(L.showgrid)for(y=0;y<E.length;y++)N=k+D+C*E[y].x,T("grid",L,P._offset,N,P._offset+P._length,N);n(g,P,L)&&(F=P._offset+P.l2p(0),T("zeroline",P,F,k,F,k+L._length)),n(g,L,P)&&(N=k+D+0,T("zeroline",L,P._offset,N,P._offset+P._length,N))}var G=[];for(y in w)G.push(w[y]);return G}function d(g,b,m,x){var w={},y;if(x._splomScenes){for(y=0;y<g.length;y++){var T=g[y];T.type==="splom"&&(w[T.uid]=1)}for(y=0;y<m.length;y++){var M=m[y];if(!w[M.uid]){var P=x._splomScenes[M.uid];P&&P.destroy&&P.destroy(),x._splomScenes[M.uid]=null,delete x._splomScenes[M.uid]}}}Object.keys(x._splomScenes||{}).length===0&&delete x._splomScenes,x._splomGrid&&!b._hasOnlyLargeSploms&&x._hasOnlyLargeSploms&&(x._splomGrid.destroy(),x._splomGrid=null,delete x._splomGrid),t.clean(g,b,m,x)}v.exports={name:o,attr:t.attr,attrRegex:t.attrRegex,layoutAttributes:t.layoutAttributes,supplyLayoutDefaults:t.supplyLayoutDefaults,drawFramework:t.drawFramework,plot:l,drag:h,updateGrid:s,clean:d,updateFx:t.updateFx,toSVG:t.toSVG}},{"../../lib/prepare_regl":791,"../../plots/cartesian":841,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_ids":831,"../../plots/get_data":865,"../../registry":911,"regl-line2d":535}],1285:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/cartesian/axis_ids"),u=e("../scatter/calc").calcMarkerSize,c=e("../scatter/calc").calcAxisExpansion,t=e("../scatter/colorscale_calc"),f=e("../scattergl/convert").markerSelection,n=e("../scattergl/convert").markerStyle,o=e("./scene_update"),l=e("../../constants/numerical").BADNUM,h=e("../scattergl/constants").TOO_MANY_POINTS;v.exports=function(s,p){var d=p.dimensions,g=p._length,b={},m=b.cdata=[],x=b.data=[],w=p._visibleDims=[],y,T,M,P,L;function I(F,N){for(var G=F.makeCalcdata({v:N.values,vcalendar:p.calendar},"v"),U=0;U<G.length;U++)G[U]=G[U]===l?NaN:G[U];m.push(G),x.push(F.type==="log"?r.simpleMap(G,F.c2l):G)}for(y=0;y<d.length;y++)if(M=d[y],M.visible){if(P=a.getFromId(s,p._diag[y][0]),L=a.getFromId(s,p._diag[y][1]),P&&L&&P.type!==L.type){r.log("Skipping splom dimension "+y+" with conflicting axis types");continue}P?(I(P,M),L&&L.type==="category"&&(L._categories=P._categories.slice())):I(L,M),w.push(y)}t(s,p),r.extendFlat(b,n(p));var E=m.length,k=E*g>h,C;for(k?C=2*(b.sizeAvg||Math.max(b.size,3)):C=u(p,g),T=0;T<w.length;T++)y=w[T],M=d[y],P=a.getFromId(s,p._diag[y][0])||{},L=a.getFromId(s,p._diag[y][1])||{},c(s,p,P,L,m[T],m[T],C);var D=o(s,p);return D.matrix||(D.matrix=!0),D.matrixOptions=b,D.selectedOptions=f(p,p.selected),D.unselectedOptions=f(p,p.unselected),[{x:!1,y:!1,t:{},trace:p}]}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axis_ids":831,"../scatter/calc":1188,"../scatter/colorscale_calc":1190,"../scattergl/constants":1241,"../scattergl/convert":1242,"./scene_update":1292}],1286:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/array_container_defaults"),u=e("./attributes"),c=e("../scatter/subtypes"),t=e("../scatter/marker_defaults"),f=e("../parcoords/merge_length"),n=e("../scattergl/helpers").isOpenSymbol;v.exports=function(i,s,p,d){function g(P,L){return r.coerce(i,s,u,P,L)}var b=a(i,s,{name:"dimensions",handleItemDefaults:o}),m=g("diagonal.visible"),x=g("showupperhalf"),w=g("showlowerhalf"),y=f(s,b,"values");if(!y||!m&&!x&&!w){s.visible=!1;return}g("text"),g("hovertext"),g("hovertemplate"),t(i,s,p,d,g);var T=n(s.marker.symbol),M=c.isBubble(s);g("marker.line.width",T||M?1:0),l(i,s,d,g),r.coerceSelectionMarkerOpacity(s,g)};function o(h,i){function s(d,g){return r.coerce(h,i,u.dimensions,d,g)}s("label");var p=s("values");p&&p.length?s("visible"):i.visible=!1,s("axis.type"),s("axis.matches")}function l(h,i,s,p){var d=i.dimensions,g=d.length,b=i.showupperhalf,m=i.showlowerhalf,x=i.diagonal.visible,w,y,T=new Array(g),M=new Array(g);for(w=0;w<g;w++){var P=w?w+1:"";T[w]="x"+P,M[w]="y"+P}var L=p("xaxes",T),I=p("yaxes",M),E=i._diag=new Array(g);i._xaxes={},i._yaxes={};var k=[],C=[];function D(V,K,te,$){if(!!V){var ie=V.charAt(0),se=s._splomAxes[ie];if(i["_"+ie+"axes"][V]=1,$.push(V),!(V in se)){var Q=se[V]={};te&&(Q.label=te.label||"",te.visible&&te.axis&&(te.axis.type&&(Q.type=te.axis.type),te.axis.matches&&(Q.matches=K)))}}}var F=!x&&!m,N=!x&&!b;for(i._axesDim={},w=0;w<g;w++){var G=d[w],U=w===0,X=w===g-1,z=U&&F||X&&N?void 0:L[w],B=U&&N||X&&F?void 0:I[w];D(z,B,G,k),D(B,z,G,C),E[w]=[z,B],i._axesDim[z]=w,i._axesDim[B]=w}for(w=0;w<k.length;w++)for(y=0;y<C.length;y++){var j=k[w]+C[y];(w>y&&b||w<y&&m||w===y&&(x||!m||!b))&&(s._splomSubplots[j]=1)}(!m||!x&&b&&m)&&(s._splomGridDflt.xside="bottom",s._splomGridDflt.yside="left")}},{"../../lib":778,"../../plots/array_container_defaults":823,"../parcoords/merge_length":1158,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scattergl/helpers":1246,"./attributes":1283}],1287:[function(e,v,S){var r=e("../../lib"),a=e("../scatter/colorscale_calc"),u=e("../scattergl/convert").markerStyle;v.exports=function(t,f){var n=f.trace,o=t._fullLayout._splomScenes[n.uid];if(o){a(t,n),r.extendFlat(o.matrixOptions,u(n));var l=r.extendFlat({},o.matrixOptions,o.viewOpts);o.matrix.update(l,null)}}},{"../../lib":778,"../scatter/colorscale_calc":1190,"../scattergl/convert":1242}],1288:[function(e,v,S){S.getDimIndex=function(a,u){for(var c=u._id,t=c.charAt(0),f={x:0,y:1}[t],n=a._visibleDims,o=0;o<n.length;o++){var l=n[o];if(a._diag[l][f]===c)return o}return!1}},{}],1289:[function(e,v,S){var r=e("./helpers"),a=e("../scattergl/hover").calcHover;function u(c,t,f){var n=c.cd,o=n[0].trace,l=c.scene,h=l.matrixOptions.cdata,i=c.xa,s=c.ya,p=i.c2p(t),d=s.c2p(f),g=c.distance,b=r.getDimIndex(o,i),m=r.getDimIndex(o,s);if(b===!1||m===!1)return[c];for(var x=h[b],w=h[m],y,T,M=g,P=0;P<x.length;P++){var L=x[P],I=w[P],E=i.c2p(L)-p,k=s.c2p(I)-d,C=Math.sqrt(E*E+k*k);C<M&&(M=T=C,y=P)}return c.index=y,c.distance=M,c.dxy=T,y===void 0?[c]:[a(c,x,w,o)]}v.exports={hoverPoints:u}},{"../scattergl/hover":1247,"./helpers":1288}],1290:[function(e,v,S){var r=e("../../registry"),a=e("../../components/grid");v.exports={moduleType:"trace",name:"splom",basePlotModule:e("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select"),editStyle:e("./edit_style"),meta:{}},r.register(a)},{"../../components/grid":687,"../../registry":911,"../scatter/marker_colorbar":1205,"./attributes":1283,"./base_plot":1284,"./calc":1285,"./defaults":1286,"./edit_style":1287,"./hover":1289,"./plot":1291,"./select":1293}],1291:[function(e,v,S){var r=e("regl-splom"),a=e("../../lib"),u=e("../../plots/cartesian/axis_ids"),c=e("../../components/dragelement/helpers").selectMode;v.exports=function(n,o,l){if(!!l.length)for(var h=0;h<l.length;h++)t(n,l[h][0])};function t(f,n){var o=f._fullLayout,l=o._size,h=n.trace,i=n.t,s=o._splomScenes[h.uid],p=s.matrixOptions,d=p.cdata,g=o._glcanvas.data()[0].regl,b=o.dragmode,m,x,w,y,T;if(d.length!==0){p.lower=h.showupperhalf,p.upper=h.showlowerhalf,p.diagonal=h.diagonal.visible;var M=h._visibleDims,P=d.length,L=s.viewOpts={};for(L.ranges=new Array(P),L.domains=new Array(P),T=0;T<M.length;T++){w=M[T];var I=L.ranges[T]=new Array(4),E=L.domains[T]=new Array(4);m=u.getFromId(f,h._diag[w][0]),m&&(I[0]=m._rl[0],I[2]=m._rl[1],E[0]=m.domain[0],E[2]=m.domain[1]),x=u.getFromId(f,h._diag[w][1]),x&&(I[1]=x._rl[0],I[3]=x._rl[1],E[1]=x.domain[0],E[3]=x.domain[1])}L.viewport=[l.l,l.b,l.w+l.l,l.h+l.b],s.matrix===!0&&(s.matrix=r(g));var k=o.clickmode.indexOf("select")>-1,C=c(b)||!!h.selectedpoints||k,D=!0;if(C){var F=h._length;if(h.selectedpoints){s.selectBatch=h.selectedpoints;var N=h.selectedpoints,G={};for(w=0;w<N.length;w++)G[N[w]]=!0;var U=[];for(w=0;w<F;w++)G[w]||U.push(w);s.unselectBatch=U}var X=i.xpx=new Array(P),z=i.ypx=new Array(P);for(T=0;T<M.length;T++){if(w=M[T],m=u.getFromId(f,h._diag[w][0]),m)for(X[T]=new Array(F),y=0;y<F;y++)X[T][y]=m.c2p(d[T][y]);if(x=u.getFromId(f,h._diag[w][1]),x)for(z[T]=new Array(F),y=0;y<F;y++)z[T][y]=x.c2p(d[T][y])}if(s.selectBatch.length||s.unselectBatch.length){var B=a.extendFlat({},p,s.unselectedOptions,L),j=a.extendFlat({},p,s.selectedOptions,L);s.matrix.update(B,j),D=!1}}else i.xpx=i.ypx=null;if(D){var V=a.extendFlat({},p,L);s.matrix.update(V,null)}}}},{"../../components/dragelement/helpers":661,"../../lib":778,"../../plots/cartesian/axis_ids":831,"regl-splom":539}],1292:[function(e,v,S){var r=e("../../lib");v.exports=function(u,c){var t=u._fullLayout,f=c.uid,n=t._splomScenes;n||(n=t._splomScenes={});var o={dirty:!0,selectBatch:[],unselectBatch:[]},l={matrix:!1,selectBatch:[],unselectBatch:[]},h=n[c.uid];return h||(h=n[f]=r.extendFlat({},o,l),h.draw=function(){h.matrix&&h.matrix.draw&&(h.selectBatch.length||h.unselectBatch.length?h.matrix.draw(h.unselectBatch,h.selectBatch):h.matrix.draw()),h.dirty=!1},h.destroy=function(){h.matrix&&h.matrix.destroy&&h.matrix.destroy(),h.matrixOptions=null,h.selectBatch=null,h.unselectBatch=null,h=null}),h.dirty||r.extendFlat(h,o),h}},{"../../lib":778}],1293:[function(e,v,S){var r=e("../../lib"),a=e("../scatter/subtypes"),u=e("./helpers");v.exports=function(t,f){var n=t.cd,o=n[0].trace,l=n[0].t,h=t.scene,i=h.matrixOptions.cdata,s=t.xaxis,p=t.yaxis,d=[];if(!h)return d;var g=!a.hasMarkers(o)&&!a.hasText(o);if(o.visible!==!0||g)return d;var b=u.getDimIndex(o,s),m=u.getDimIndex(o,p);if(b===!1||m===!1)return d;var x=l.xpx[b],w=l.ypx[m],y=i[b],T=i[m],M=[],P=[];if(f!==!1&&!f.degenerate)for(var L=0;L<y.length;L++)f.contains([x[L],w[L]],null,L,t)?(M.push(L),d.push({pointNumber:L,x:y[L],y:T[L]})):P.push(L);var I=h.matrixOptions;return!M.length&&!P.length?h.matrix.update(I,null):!h.selectBatch.length&&!h.unselectBatch.length&&h.matrix.update(h.unselectedOptions,r.extendFlat({},I,h.selectedOptions,h.viewOpts)),h.selectBatch=M,h.unselectBatch=P,d}},{"../../lib":778,"../scatter/subtypes":1212,"./helpers":1288}],1294:[function(e,v,S){var r=e("../../components/colorscale/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../mesh3d/attributes"),c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,f={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:a({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),showlegend:t({},c.showlegend,{dflt:!1})};t(f,r("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(o){f[o]=u[o]}),f.hoverinfo=t({},c.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),f.transforms=void 0,v.exports=f},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../mesh3d/attributes":1128}],1295:[function(e,v,S){var r=e("../../lib"),a=e("../../components/colorscale/calc");function u(n,o){o._len=Math.min(o.u.length,o.v.length,o.w.length,o.x.length,o.y.length,o.z.length),o._u=f(o.u,o._len),o._v=f(o.v,o._len),o._w=f(o.w,o._len),o._x=f(o.x,o._len),o._y=f(o.y,o._len),o._z=f(o.z,o._len);var l=c(o);o._gridFill=l.fill,o._Xs=l.Xs,o._Ys=l.Ys,o._Zs=l.Zs,o._len=l.len;var h=0,i,s,p;o.starts&&(i=f(o.starts.x||[]),s=f(o.starts.y||[]),p=f(o.starts.z||[]),h=Math.min(i.length,s.length,p.length)),o._startsX=i||[],o._startsY=s||[],o._startsZ=p||[];var d=0,g=1/0,b;for(b=0;b<o._len;b++){var m=o._u[b],x=o._v[b],w=o._w[b],y=Math.sqrt(m*m+x*x+w*w);d=Math.max(d,y),g=Math.min(g,y)}for(a(n,o,{vals:[g,d],containerStr:"",cLetter:"c"}),b=0;b<h;b++){var T=i[b];l.xMax=Math.max(l.xMax,T),l.xMin=Math.min(l.xMin,T);var M=s[b];l.yMax=Math.max(l.yMax,M),l.yMin=Math.min(l.yMin,M);var P=p[b];l.zMax=Math.max(l.zMax,P),l.zMin=Math.min(l.zMin,P)}o._slen=h,o._normMax=d,o._xbnds=[l.xMin,l.xMax],o._ybnds=[l.yMin,l.yMax],o._zbnds=[l.zMin,l.zMax]}function c(n){var o=n._x,l=n._y,h=n._z,i=n._len,s,p,d,g=-1/0,b=1/0,m=-1/0,x=1/0,w=-1/0,y=1/0,T="",M,P,L,I,E,k,C,D,F;for(i&&(I=o[0],k=l[0],D=h[0]),i>1&&(E=o[i-1],C=l[i-1],F=h[i-1]),s=0;s<i;s++)g=Math.max(g,o[s]),b=Math.min(b,o[s]),m=Math.max(m,l[s]),x=Math.min(x,l[s]),w=Math.max(w,h[s]),y=Math.min(y,h[s]),!M&&o[s]!==I&&(M=!0,T+="x"),!P&&l[s]!==k&&(P=!0,T+="y"),!L&&h[s]!==D&&(L=!0,T+="z");M||(T+="x"),P||(T+="y"),L||(T+="z");var N=t(n._x),G=t(n._y),U=t(n._z);T=T.replace("x",(I>E?"-":"+")+"x"),T=T.replace("y",(k>C?"-":"+")+"y"),T=T.replace("z",(D>F?"-":"+")+"z");var X=function(){i=0,N=[],G=[],U=[]};(!i||i<N.length*G.length*U.length)&&X();var z=function(W){return W==="x"?o:W==="y"?l:h},B=function(W){return W==="x"?N:W==="y"?G:U},j=function(W){return W[i-1]<W[0]?-1:1},V=z(T[1]),K=z(T[3]),te=z(T[5]),$=B(T[1]).length,ie=B(T[3]).length,se=B(T[5]).length,Q=!1,H=function(W,ue,me){return $*(ie*W+ue)+me},oe=j(z(T[1])),re=j(z(T[3])),ee=j(z(T[5]));for(s=0;s<se-1;s++){for(p=0;p<ie-1;p++){for(d=0;d<$-1;d++){var ae=H(s,p,d),fe=H(s,p,d+1),de=H(s,p+1,d),pe=H(s+1,p,d);if((!(V[ae]*oe<V[fe]*oe)||!(K[ae]*re<K[de]*re)||!(te[ae]*ee<te[pe]*ee))&&(Q=!0),Q)break}if(Q)break}if(Q)break}return Q&&(r.warn("Encountered arbitrary coordinates! Unable to input data grid."),X()),{xMin:b,yMin:x,zMin:y,xMax:g,yMax:m,zMax:w,Xs:N,Ys:G,Zs:U,len:i,fill:T}}function t(n){return r.distinctVals(n).vals}function f(n,o){if(o===void 0&&(o=n.length),r.isTypedArray(n))return n.subarray(0,o);for(var l=[],h=0;h<o;h++)l[h]=+n[h];return l}v.exports={calc:u,filter:f,processGrid:c}},{"../../components/colorscale/calc":651,"../../lib":778}],1296:[function(e,v,S){var r=e("gl-streamtube3d"),a=r.createTubeMesh,u=e("../../lib"),c=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,f=e("../../plots/gl3d/zip3"),n={xaxis:0,yaxis:1,zaxis:2};function o(d,g){this.scene=d,this.uid=g,this.mesh=null,this.data=null}var l=o.prototype;l.handlePick=function(d){var g=this.scene.fullSceneLayout,b=this.scene.dataScale;function m(y,T){var M=g[T],P=b[n[T]];return M.l2c(y)/P}if(d.object===this.mesh){var x=d.data.position,w=d.data.velocity;return d.traceCoordinate=[m(x[0],"xaxis"),m(x[1],"yaxis"),m(x[2],"zaxis"),m(w[0],"xaxis"),m(w[1],"yaxis"),m(w[2],"zaxis"),d.data.intensity*this.data._normMax,d.data.divergence],d.textLabel=this.data.hovertext||this.data.text,!0}};function h(d){var g=d.length,b;return g>2?b=d.slice(1,g-1):g===2?b=[(d[0]+d[1])/2]:b=d,b}function i(d){var g=d.length;return g===1?[.5,.5]:[d[1]-d[0],d[g-1]-d[g-2]]}function s(d,g){var b=d.fullSceneLayout,m=d.dataScale,x=g._len,w={};function y(ie,se){var Q=b[se],H=m[n[se]];return u.simpleMap(ie,function(oe){return Q.d2l(oe)*H})}if(w.vectors=f(y(g._u,"xaxis"),y(g._v,"yaxis"),y(g._w,"zaxis"),x),!x)return{positions:[],cells:[]};var T=y(g._Xs,"xaxis"),M=y(g._Ys,"yaxis"),P=y(g._Zs,"zaxis");w.meshgrid=[T,M,P],w.gridFill=g._gridFill;var L=g._slen;if(L)w.startingPositions=f(y(g._startsX,"xaxis"),y(g._startsY,"yaxis"),y(g._startsZ,"zaxis"));else{for(var I=M[0],E=h(T),k=h(P),C=new Array(E.length*k.length),D=0,F=0;F<E.length;F++)for(var N=0;N<k.length;N++)C[D++]=[E[F],I,k[N]];w.startingPositions=C}w.colormap=c(g),w.tubeSize=g.sizeref,w.maxLength=g.maxdisplayed;var G=y(g._xbnds,"xaxis"),U=y(g._ybnds,"yaxis"),X=y(g._zbnds,"zaxis"),z=i(T),B=i(M),j=i(P),V=[[G[0]-z[0],U[0]-B[0],X[0]-j[0]],[G[1]+z[1],U[1]+B[1],X[1]+j[1]]],K=r(w,V),te=t(g);K.vertexIntensityBounds=[te.min/g._normMax,te.max/g._normMax];var $=g.lightposition;return K.lightPosition=[$.x,$.y,$.z],K.ambient=g.lighting.ambient,K.diffuse=g.lighting.diffuse,K.specular=g.lighting.specular,K.roughness=g.lighting.roughness,K.fresnel=g.lighting.fresnel,K.opacity=g.opacity,g._pad=K.tubeScale*g.sizeref*2,K}l.update=function(d){this.data=d;var g=s(this.scene,d);this.mesh.update(g)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function p(d,g){var b=d.glplot.gl,m=s(d,g),x=a(b,m),w=new o(d,g.uid);return w.mesh=x,w.data=g,x._trace=w,d.glplot.add(x),w}v.exports=p},{"../../components/colorscale":655,"../../lib":778,"../../lib/gl_format_color":774,"../../plots/gl3d/zip3":881,"gl-streamtube3d":348}],1297:[function(e,v,S){var r=e("../../lib"),a=e("../../components/colorscale/defaults"),u=e("./attributes");v.exports=function(t,f,n,o){function l(b,m){return r.coerce(t,f,u,b,m)}var h=l("u"),i=l("v"),s=l("w"),p=l("x"),d=l("y"),g=l("z");if(!h||!h.length||!i||!i.length||!s||!s.length||!p||!p.length||!d||!d.length||!g||!g.length){f.visible=!1;return}l("starts.x"),l("starts.y"),l("starts.z"),l("maxdisplayed"),l("sizeref"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),a(t,f,o,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),f._length=null}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":1294}],1298:[function(e,v,S){v.exports={moduleType:"trace",name:"streamtube",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc").calc,plot:e("./convert"),eventData:function(r,a){return r.tubex=r.x,r.tubey=r.y,r.tubez=r.z,r.tubeu=a.traceCoordinate[3],r.tubev=a.traceCoordinate[4],r.tubew=a.traceCoordinate[5],r.norm=a.traceCoordinate[6],r.divergence=a.traceCoordinate[7],delete r.x,delete r.y,delete r.z,r},meta:{}}},{"../../plots/gl3d":870,"./attributes":1294,"./calc":1295,"./convert":1296,"./defaults":1297}],1299:[function(e,v,S){var r=e("../../plots/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../../plots/template_attributes").texttemplateAttrs,c=e("../../components/colorscale/attributes"),t=e("../../plots/domain").attributes,f=e("../pie/attributes"),n=e("./constants"),o=e("../../lib/extend").extendFlat;v.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:o({colors:{valType:"data_array",editType:"calc"},line:{color:o({},f.marker.line.color,{dflt:null}),width:o({},f.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},c("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:f.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:u({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:f.hovertext,hoverinfo:o({},r.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:a({},{keys:n.eventDataKeys}),textfont:f.textfont,insidetextorientation:f.insidetextorientation,insidetextfont:f.insidetextfont,outsidetextfont:o({},f.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:f.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:t({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/template_attributes":906,"../pie/attributes":1161,"./constants":1302}],1300:[function(e,v,S){var r=e("../../plots/plots");S.name="sunburst",S.plot=function(a,u,c,t){r.plotBasePlot(S.name,a,u,c,t)},S.clean=function(a,u,c,t){r.cleanBasePlot(S.name,a,u,c,t)}},{"../../plots/plots":891}],1301:[function(e,v,S){var r=e("d3-hierarchy"),a=e("fast-isnumeric"),u=e("../../lib"),c=e("../../components/colorscale").makeColorScaleFuncFromTrace,t=e("../pie/calc").makePullColorFn,f=e("../pie/calc").generateExtendedColors,n=e("../../components/colorscale").calc,o=e("../../constants/numerical").ALMOST_EQUAL,l={},h={};S.calc=function(s,p){var d=s._fullLayout,g=p.ids,b=u.isArrayOrTypedArray(g),m=p.labels,x=p.parents,w=p.values,y=u.isArrayOrTypedArray(w),T=[],M={},P={},L=function(H,oe){M[H]?M[H].push(oe):M[H]=[oe],P[oe]=1},I=function(H){return H||typeof H=="number"},E=function(H){return!y||a(w[H])&&w[H]>=0},k,C,D;b?(k=Math.min(g.length,x.length),C=function(H){return I(g[H])&&E(H)},D=function(H){return String(g[H])}):(k=Math.min(m.length,x.length),C=function(H){return I(m[H])&&E(H)},D=function(H){return String(m[H])}),y&&(k=Math.min(k,w.length));for(var F=0;F<k;F++)if(C(F)){var N=D(F),G=I(x[F])?String(x[F]):"",U={i:F,id:N,pid:G,label:I(m[F])?String(m[F]):""};y&&(U.v=+w[F]),T.push(U),L(G,N)}if(M[""]){if(M[""].length>1){for(var B=u.randstr(),j=0;j<T.length;j++)T[j].pid===""&&(T[j].pid=B);T.unshift({hasMultipleRoots:!0,id:B,pid:"",label:""})}}else{var X=[],z;for(z in M)P[z]||X.push(z);if(X.length===1)z=X[0],T.unshift({hasImpliedRoot:!0,id:z,pid:"",label:z});else return u.warn(["Multiple implied roots, cannot build",p.type,"hierarchy of",p.name+".","These roots include:",X.join(", ")].join(" "))}var V;try{V=r.stratify().id(function(H){return H.id}).parentId(function(H){return H.pid})(T)}catch(H){return u.warn(["Failed to build",p.type,"hierarchy of",p.name+".","Error:",H.message].join(" "))}var K=r.hierarchy(V),te=!1;if(y)switch(p.branchvalues){case"remainder":K.sum(function(H){return H.data.v});break;case"total":K.each(function(H){var oe=H.data.data,re=oe.v;if(H.children){var ee=H.children.reduce(function(ae,fe){return ae+fe.data.data.v},0);if((oe.hasImpliedRoot||oe.hasMultipleRoots)&&(re=ee),re<ee*o)return te=!0,u.warn(["Total value for node",H.data.data.id,"of",p.name,"is smaller than the sum of its children.",`
parent value =`,re,`
children sum =`,ee].join(" "))}H.value=re});break}else i(K,p,{branches:p.count.indexOf("branches")!==-1,leaves:p.count.indexOf("leaves")!==-1});if(!te){p.sort&&K.sort(function(H,oe){return oe.value-H.value});var $,ie,se=p.marker.colors||[],Q=!!se.length;return p._hasColorscale?(Q||(se=y?p.values:p._values),n(s,p,{vals:se,containerStr:"marker",cLetter:"c"}),ie=c(p.marker)):$=t(d["_"+p.type+"colormap"]),K.each(function(H){var oe=H.data.data;oe.color=p._hasColorscale?ie(se[oe.i]):$(se[oe.i],oe.id)}),T[0].hierarchy=K,T}},S._runCrossTraceCalc=function(s,p){var d=p._fullLayout,g=p.calcdata,b=d[s+"colorway"],m=d["_"+s+"colormap"];d["extend"+s+"colors"]&&(b=f(b,s==="treemap"?h:l));var x=0,w;function y(L){var I=L.data.data,E=I.id;I.color===!1&&(m[E]?I.color=m[E]:L.parent?L.parent.parent?I.color=L.parent.data.data.color:(m[E]=I.color=b[x%b.length],x++):I.color=w)}for(var T=0;T<g.length;T++){var M=g[T],P=M[0];P.trace.type===s&&P.hierarchy&&(w=P.trace.root.color,P.hierarchy.each(y))}},S.crossTraceCalc=function(s){return S._runCrossTraceCalc("sunburst",s)};function i(s,p,d){var g=0,b=s.children;if(b){for(var m=b.length,x=0;x<m;x++)g+=i(b[x],p,d);d.branches&&g++}else d.leaves&&g++;return s.value=s.data.data.value=g,p._values||(p._values=[]),p._values[s.data.data.i]=g,g}},{"../../components/colorscale":655,"../../constants/numerical":753,"../../lib":778,"../pie/calc":1163,"d3-hierarchy":161,"fast-isnumeric":241}],1302:[function(e,v,S){v.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1303:[function(e,v,S){var r=e("../../lib"),a=e("./attributes"),u=e("../../plots/domain").defaults,c=e("../bar/defaults").handleText,t=e("../../components/colorscale"),f=t.hasColorscale,n=t.handleDefaults;v.exports=function(l,h,i,s){function p(T,M){return r.coerce(l,h,a,T,M)}var d=p("labels"),g=p("parents");if(!d||!d.length||!g||!g.length){h.visible=!1;return}var b=p("values");b&&b.length?p("branchvalues"):p("count"),p("level"),p("maxdepth");var m=p("marker.line.width");m&&p("marker.line.color",s.paper_bgcolor),p("marker.colors");var x=h._hasColorscale=f(l,"marker","colors")||(l.marker||{}).coloraxis;x&&n(l,h,s,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",x?1:.7);var w=p("text");p("texttemplate"),h.texttemplate||p("textinfo",Array.isArray(w)?"text+label":"label"),p("hovertext"),p("hovertemplate");var y="auto";c(l,h,s,p,y,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("insidetextorientation"),p("sort"),p("rotation"),p("root.color"),u(h,s,p),h._length=null}},{"../../components/colorscale":655,"../../lib":778,"../../plots/domain":855,"../bar/defaults":925,"./attributes":1299}],1304:[function(e,v,S){var r=e("d3"),a=e("../../registry"),u=e("../../components/fx/helpers").appendArrayPointValue,c=e("../../components/fx"),t=e("../../lib"),f=e("../../lib/events"),n=e("./helpers"),o=e("../pie/helpers"),l=o.formatPieValue;v.exports=function(s,p,d,g,b){var m=g[0],x=m.trace,w=m.hierarchy,y=x.type==="sunburst",T=x.type==="treemap";"_hasHoverLabel"in x||(x._hasHoverLabel=!1),"_hasHoverEvent"in x||(x._hasHoverEvent=!1);var M=function(I){var E=d._fullLayout;if(!(d._dragging||E.hovermode===!1)){var k=d._fullData[x.index],C=I.data.data,D=C.i,F=n.isHierarchyRoot(I),N=n.getParent(w,I),G=n.getValue(I),U=function(ee){return t.castOption(k,D,ee)},X=U("hovertemplate"),z=c.castHoverinfo(k,E,D),B=E.separators;if(X||z&&z!=="none"&&z!=="skip"){var j,V;y&&(j=m.cx+I.pxmid[0]*(1-I.rInscribed),V=m.cy+I.pxmid[1]*(1-I.rInscribed)),T&&(j=I._hoverX,V=I._hoverY);var K={},te=[],$=[],ie=function(ee){return te.indexOf(ee)!==-1};z&&(te=z==="all"?k._module.attributes.hoverinfo.flags:z.split("+")),K.label=C.label,ie("label")&&K.label&&$.push(K.label),C.hasOwnProperty("v")&&(K.value=C.v,K.valueLabel=l(K.value,B),ie("value")&&$.push(K.valueLabel)),K.currentPath=I.currentPath=n.getPath(I.data),ie("current path")&&!F&&$.push(K.currentPath);var se,Q=[],H=function(){Q.indexOf(se)===-1&&($.push(se),Q.push(se))};K.percentParent=I.percentParent=G/n.getValue(N),K.parent=I.parentString=n.getPtLabel(N),ie("percent parent")&&(se=n.formatPercent(K.percentParent,B)+" of "+K.parent,H()),K.percentEntry=I.percentEntry=G/n.getValue(p),K.entry=I.entry=n.getPtLabel(p),ie("percent entry")&&!F&&!I.onPathbar&&(se=n.formatPercent(K.percentEntry,B)+" of "+K.entry,H()),K.percentRoot=I.percentRoot=G/n.getValue(w),K.root=I.root=n.getPtLabel(w),ie("percent root")&&!F&&(se=n.formatPercent(K.percentRoot,B)+" of "+K.root,H()),K.text=U("hovertext")||U("text"),ie("text")&&(se=K.text,t.isValidTextValue(se)&&$.push(se));var oe={trace:k,y:V,text:$.join("<br>"),name:X||ie("name")?k.name:void 0,color:U("hoverlabel.bgcolor")||C.color,borderColor:U("hoverlabel.bordercolor"),fontFamily:U("hoverlabel.font.family"),fontSize:U("hoverlabel.font.size"),fontColor:U("hoverlabel.font.color"),nameLength:U("hoverlabel.namelength"),textAlign:U("hoverlabel.align"),hovertemplate:X,hovertemplateLabels:K,eventData:[h(I,k,b.eventDataKeys)]};y&&(oe.x0=j-I.rInscribed*I.rpx1,oe.x1=j+I.rInscribed*I.rpx1,oe.idealAlign=I.pxmid[0]<0?"left":"right"),T&&(oe.x=j,oe.idealAlign=j<0?"left":"right"),c.loneHover(oe,{container:E._hoverlayer.node(),outerContainer:E._paper.node(),gd:d}),x._hasHoverLabel=!0}if(T){var re=s.select("path.surface");b.styleOne(re,I,k,{hovered:!0})}x._hasHoverEvent=!0,d.emit("plotly_hover",{points:[h(I,k,b.eventDataKeys)],event:r.event})}},P=function(I){var E=d._fullLayout,k=d._fullData[x.index],C=r.select(this).datum();if(x._hasHoverEvent&&(I.originalEvent=r.event,d.emit("plotly_unhover",{points:[h(C,k,b.eventDataKeys)],event:r.event}),x._hasHoverEvent=!1),x._hasHoverLabel&&(c.loneUnhover(E._hoverlayer.node()),x._hasHoverLabel=!1),T){var D=s.select("path.surface");b.styleOne(D,C,k,{hovered:!1})}},L=function(I){var E=d._fullLayout,k=d._fullData[x.index],C=y&&(n.isHierarchyRoot(I)||n.isLeaf(I)),D=n.getPtId(I),F=n.isEntry(I)?n.findEntryWithChild(w,D):n.findEntryWithLevel(w,D),N=n.getPtId(F),G={points:[h(I,k,b.eventDataKeys)],event:r.event};C||(G.nextLevel=N);var U=f.triggerHandler(d,"plotly_"+x.type+"click",G);if(U!==!1&&E.hovermode&&(d._hoverdata=[h(I,k,b.eventDataKeys)],c.click(d,r.event)),!C&&U!==!1&&!d._dragging&&!d._transitioning){a.call("_storeDirectGUIEdit",k,E._tracePreGUI[k.uid],{level:k.level});var X={data:[{level:N}],traces:[x.index]},z={frame:{redraw:!1,duration:b.transitionTime},transition:{duration:b.transitionTime,easing:b.transitionEasing},mode:"immediate",fromcurrent:!0};c.loneUnhover(E._hoverlayer.node()),a.call("animate",d,X,z)}};s.on("mouseover",M),s.on("mouseout",P),s.on("click",L)};function h(i,s,p){for(var d=i.data.data,g={curveNumber:s.index,pointNumber:d.i,data:s._input,fullData:s},b=0;b<p.length;b++){var m=p[b];m in i&&(g[m]=i[m])}return"parentString"in i&&!n.isHierarchyRoot(i)&&(g.parent=i.parentString),u(g,s,d.i),g}},{"../../components/fx":683,"../../components/fx/helpers":679,"../../lib":778,"../../lib/events":767,"../../registry":911,"../pie/helpers":1166,"./helpers":1305,d3:169}],1305:[function(e,v,S){var r=e("../../lib"),a=e("../../components/color"),u=e("../../lib/setcursor"),c=e("../pie/helpers");S.findEntryWithLevel=function(o,l){var h;return l&&o.eachAfter(function(i){if(S.getPtId(i)===l)return h=i.copy()}),h||o},S.findEntryWithChild=function(o,l){var h;return o.eachAfter(function(i){for(var s=i.children||[],p=0;p<s.length;p++){var d=s[p];if(S.getPtId(d)===l)return h=i.copy()}}),h||o},S.isEntry=function(o){return!o.parent},S.isLeaf=function(o){return!o.children},S.getPtId=function(o){return o.data.data.id},S.getPtLabel=function(o){return o.data.data.label},S.getValue=function(o){return o.value},S.isHierarchyRoot=function(o){return n(o)===""},S.setSliceCursor=function(o,l,h){var i=h.isTransitioning;if(!i){var s=o.datum();i=h.hideOnRoot&&S.isHierarchyRoot(s)||h.hideOnLeaves&&S.isLeaf(s)}u(o,i?null:"pointer")};function t(o,l,h){return{color:S.getOutsideTextFontKey("color",o,l,h),family:S.getOutsideTextFontKey("family",o,l,h),size:S.getOutsideTextFontKey("size",o,l,h)}}function f(o,l,h,i){var s=(i||{}).onPathbar,p=l.data.data,d=p.i,g=r.castOption(o,d,(s?"pathbar.textfont":"insidetextfont")+".color");return!g&&o._input.textfont&&(g=r.castOption(o._input,d,"textfont.color")),{color:g||a.contrast(p.color),family:S.getInsideTextFontKey("family",o,l,h,i),size:S.getInsideTextFontKey("size",o,l,h,i)}}S.getInsideTextFontKey=function(o,l,h,i,s){var p=(s||{}).onPathbar,d=p?"pathbar.textfont":"insidetextfont",g=h.data.data.i;return r.castOption(l,g,d+"."+o)||r.castOption(l,g,"textfont."+o)||i.size},S.getOutsideTextFontKey=function(o,l,h,i){var s=h.data.data.i;return r.castOption(l,s,"outsidetextfont."+o)||r.castOption(l,s,"textfont."+o)||i.size},S.isOutsideText=function(o,l){return!o._hasColorscale&&S.isHierarchyRoot(l)},S.determineTextFont=function(o,l,h,i){return S.isOutsideText(o,l)?t(o,l,h):f(o,l,h,i)},S.hasTransition=function(o){return!!(o&&o.duration>0)},S.getMaxDepth=function(o){return o.maxdepth>=0?o.maxdepth:1/0},S.isHeader=function(o,l){return!(S.isLeaf(o)||o.depth===l._maxDepth-1)};function n(o){return o.data.data.pid}S.getParent=function(o,l){return S.findEntryWithLevel(o,n(l))},S.listPath=function(o,l){var h=o.parent;if(!h)return[];var i=l?[h.data[l]]:[h];return S.listPath(h,l).concat(i)},S.getPath=function(o){return S.listPath(o,"label").join("/")+"/"},S.formatValue=c.formatPieValue,S.formatPercent=function(o,l){var h=r.formatPercent(o,0);return h==="0%"&&(h=c.formatPiePercent(o,l)),h}},{"../../components/color":643,"../../lib":778,"../../lib/setcursor":799,"../pie/helpers":1166}],1306:[function(e,v,S){v.exports={moduleType:"trace",name:"sunburst",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1205,"./attributes":1299,"./base_plot":1300,"./calc":1301,"./defaults":1303,"./layout_attributes":1307,"./layout_defaults":1308,"./plot":1309,"./style":1310}],1307:[function(e,v,S){v.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1308:[function(e,v,S){var r=e("../../lib"),a=e("./layout_attributes");v.exports=function(c,t){function f(n,o){return r.coerce(c,t,a,n,o)}f("sunburstcolorway",t.colorway),f("extendsunburstcolors")}},{"../../lib":778,"./layout_attributes":1307}],1309:[function(e,v,S){var r=e("d3"),a=e("d3-hierarchy"),u=e("../../components/drawing"),c=e("../../lib"),t=e("../../lib/svg_text_utils"),f=e("../bar/uniform_text"),n=f.recordMinTextSize,o=f.clearMinTextSize,l=e("../pie/plot"),h=e("../pie/helpers").getRotationAngle,i=l.computeTransform,s=l.transformInsideText,p=e("./style").styleOne,d=e("../bar/style").resizeText,g=e("./fx"),b=e("./constants"),m=e("./helpers");S.plot=function(P,L,I,E){var k=P._fullLayout,C=k._sunburstlayer,D,F,N=!I,G=!k.uniformtext.mode&&m.hasTransition(I);if(o("sunburst",k),D=C.selectAll("g.trace.sunburst").data(L,function(X){return X[0].trace.uid}),D.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),D.order(),G){E&&(F=E());var U=r.transition().duration(I.duration).ease(I.easing).each("end",function(){F&&F()}).each("interrupt",function(){F&&F()});U.each(function(){C.selectAll("g.trace").each(function(X){x(P,X,this,I)})})}else D.each(function(X){x(P,X,this,I)}),k.uniformtext.mode&&d(P,k._sunburstlayer.selectAll(".trace"),"sunburst");N&&D.exit().remove()};function x(P,L,I,E){var k=P._fullLayout,C=!k.uniformtext.mode&&m.hasTransition(E),D=r.select(I),F=D.selectAll("g.slice"),N=L[0],G=N.trace,U=N.hierarchy,X=m.findEntryWithLevel(U,G.level),z=m.getMaxDepth(G),B=k._size,j=G.domain,V=B.w*(j.x[1]-j.x[0]),K=B.h*(j.y[1]-j.y[0]),te=.5*Math.min(V,K),$=N.cx=B.l+B.w*(j.x[1]+j.x[0])/2,ie=N.cy=B.t+B.h*(1-j.y[0])-K/2;if(!X)return F.remove();var se=null,Q={};C&&F.each(function(Ce){Q[m.getPtId(Ce)]={rpx0:Ce.rpx0,rpx1:Ce.rpx1,x0:Ce.x0,x1:Ce.x1,transform:Ce.transform},!se&&m.isEntry(Ce)&&(se=Ce)});var H=w(X).descendants(),oe=X.height+1,re=0,ee=z;N.hasMultipleRoots&&m.isHierarchyRoot(X)&&(H=H.slice(1),oe-=1,re=1,ee+=1),H=H.filter(function(Ce){return Ce.y1<=ee});var ae=h(G.rotation);ae&&H.forEach(function(Ce){Ce.x0+=ae,Ce.x1+=ae});var fe=Math.min(oe,z),de=function(Ce){return(Ce-re)/fe*te},pe=function(Ce,Ae){return[Ce*Math.cos(Ae),-Ce*Math.sin(Ae)]},W=function(Ce){return c.pathAnnulus(Ce.rpx0,Ce.rpx1,Ce.x0,Ce.x1,$,ie)},ue=function(Ce){return $+T(Ce)[0]*(Ce.transform.rCenter||0)+(Ce.transform.x||0)},me=function(Ce){return ie+T(Ce)[1]*(Ce.transform.rCenter||0)+(Ce.transform.y||0)};F=F.data(H,m.getPtId),F.enter().append("g").classed("slice",!0),C?F.exit().transition().each(function(){var Ce=r.select(this),Ae=Ce.select("path.surface");Ae.transition().attrTween("d",function(qe){var Tt=Ge(qe);return function(At){return W(Tt(At))}});var Be=Ce.select("g.slicetext");Be.attr("opacity",0)}).remove():F.exit().remove(),F.order();var be=null;if(C&&se){var Me=m.getPtId(se);F.each(function(Ce){be===null&&m.getPtId(Ce)===Me&&(be=Ce.x1)})}var Pe=F;C&&(Pe=Pe.transition().each("end",function(){var Ce=r.select(this);m.setSliceCursor(Ce,P,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Pe.each(function(Ce){var Ae=r.select(this),Be=c.ensureSingle(Ae,"path","surface",function(Mt){Mt.style("pointer-events","all")});Ce.rpx0=de(Ce.y0),Ce.rpx1=de(Ce.y1),Ce.xmid=(Ce.x0+Ce.x1)/2,Ce.pxmid=pe(Ce.rpx1,Ce.xmid),Ce.midangle=-(Ce.xmid-Math.PI/2),Ce.startangle=-(Ce.x0-Math.PI/2),Ce.stopangle=-(Ce.x1-Math.PI/2),Ce.halfangle=.5*Math.min(c.angleDelta(Ce.x0,Ce.x1)||Math.PI,Math.PI),Ce.ring=1-Ce.rpx0/Ce.rpx1,Ce.rInscribed=y(Ce),C?Be.transition().attrTween("d",function(Mt){var Wt=ze(Mt);return function(qt){return W(Wt(qt))}}):Be.attr("d",W),Ae.call(g,X,P,L,{eventDataKeys:b.eventDataKeys,transitionTime:b.CLICK_TRANSITION_TIME,transitionEasing:b.CLICK_TRANSITION_EASING}).call(m.setSliceCursor,P,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:P._transitioning}),Be.call(p,Ce,G);var qe=c.ensureSingle(Ae,"g","slicetext"),Tt=c.ensureSingle(qe,"text","",function(Mt){Mt.attr("data-notex",1)}),At=c.ensureUniformFontSize(P,m.determineTextFont(G,Ce,k.font));Tt.text(S.formatSliceLabel(Ce,X,G,L,k)).classed("slicetext",!0).attr("text-anchor","middle").call(u.font,At).call(t.convertToTspans,P);var Ne=u.bBox(Tt.node());Ce.transform=s(Ne,Ce,N),Ce.transform.targetX=ue(Ce),Ce.transform.targetY=me(Ce);var ct=function(Mt,Wt){var qt=Mt.transform;return i(qt,Wt),qt.fontSize=At.size,n(G.type,qt,k),c.getTextTransform(qt)};C?Tt.transition().attrTween("transform",function(Mt){var Wt=Qe(Mt);return function(qt){return ct(Wt(qt),Ne)}}):Tt.attr("transform",ct(Ce,Ne))});function Ge(Ce){var Ae=m.getPtId(Ce),Be=Q[Ae],qe=Q[m.getPtId(X)],Tt;if(qe){var At=(Ce.x1>qe.x1?2*Math.PI:0)+ae;Tt=Ce.rpx1<qe.rpx1?{rpx0:0,rpx1:0}:{x0:At,x1:At}}else{var Ne,ct=m.getPtId(Ce.parent);F.each(function($t){if(m.getPtId($t)===ct)return Ne=$t});var Mt=Ne.children,Wt;Mt.forEach(function($t,rr){if(m.getPtId($t)===Ae)return Wt=rr});var qt=Mt.length,zt=r.interpolate(Ne.x0,Ne.x1);Tt={rpx0:te,rpx1:te,x0:zt(Wt/qt),x1:zt((Wt+1)/qt)}}return r.interpolate(Be,Tt)}function ze(Ce){var Ae=Q[m.getPtId(Ce)],Be,qe={x0:Ce.x0,x1:Ce.x1,rpx0:Ce.rpx0,rpx1:Ce.rpx1};if(Ae)Be=Ae;else if(se)if(Ce.parent)if(be){var Tt=(Ce.x1>be?2*Math.PI:0)+ae;Be={x0:Tt,x1:Tt}}else Be={rpx0:te,rpx1:te},c.extendFlat(Be,tt(Ce));else Be={rpx0:0,rpx1:0};else Be={x0:ae,x1:ae};return r.interpolate(Be,qe)}function Qe(Ce){var Ae=Q[m.getPtId(Ce)],Be,qe=Ce.transform;if(Ae)Be=Ae;else if(Be={rpx1:Ce.rpx1,transform:{textPosAngle:qe.textPosAngle,scale:0,rotate:qe.rotate,rCenter:qe.rCenter,x:qe.x,y:qe.y}},se)if(Ce.parent)if(be){var Tt=Ce.x1>be?2*Math.PI:0;Be.x0=Be.x1=Tt}else c.extendFlat(Be,tt(Ce));else Be.x0=Be.x1=ae;else Be.x0=Be.x1=ae;var At=r.interpolate(Be.transform.textPosAngle,Ce.transform.textPosAngle),Ne=r.interpolate(Be.rpx1,Ce.rpx1),ct=r.interpolate(Be.x0,Ce.x0),Mt=r.interpolate(Be.x1,Ce.x1),Wt=r.interpolate(Be.transform.scale,qe.scale),qt=r.interpolate(Be.transform.rotate,qe.rotate),zt=qe.rCenter===0?3:Be.transform.rCenter===0?1/3:1,$t=r.interpolate(Be.transform.rCenter,qe.rCenter),rr=function(Lt){return $t(Math.pow(Lt,zt))};return function(Lt){var Ct=Ne(Lt),dt=ct(Lt),lt=Mt(Lt),Te=rr(Lt),Le=pe(Ct,(dt+lt)/2),Ue=At(Lt),et={pxmid:Le,rpx1:Ct,transform:{textPosAngle:Ue,rCenter:Te,x:qe.x,y:qe.y}};return n(G.type,qe,k),{transform:{targetX:ue(et),targetY:me(et),scale:Wt(Lt),rotate:qt(Lt),rCenter:Te}}}}function tt(Ce){var Ae=Ce.parent,Be=Q[m.getPtId(Ae)],qe={};if(Be){var Tt=Ae.children,At=Tt.indexOf(Ce),Ne=Tt.length,ct=r.interpolate(Be.x0,Be.x1);qe.x0=ct(At/Ne),qe.x1=ct(At/Ne)}else qe.x0=qe.x1=0;return qe}}function w(P){return a.partition().size([2*Math.PI,P.height+1])(P)}S.formatSliceLabel=function(P,L,I,E,k){var C=I.texttemplate,D=I.textinfo;if(!C&&(!D||D==="none"))return"";var F=k.separators,N=E[0],G=P.data.data,U=N.hierarchy,X=m.isHierarchyRoot(P),z=m.getParent(U,P),B=m.getValue(P);if(!C){var j=D.split("+"),V=function(ee){return j.indexOf(ee)!==-1},K=[],te;if(V("label")&&G.label&&K.push(G.label),G.hasOwnProperty("v")&&V("value")&&K.push(m.formatValue(G.v,F)),!X){V("current path")&&K.push(m.getPath(P.data));var $=0;V("percent parent")&&$++,V("percent entry")&&$++,V("percent root")&&$++;var ie=$>1;if($){var se,Q=function(ee){te=m.formatPercent(se,F),ie&&(te+=" of "+ee),K.push(te)};V("percent parent")&&!X&&(se=B/m.getValue(z),Q("parent")),V("percent entry")&&(se=B/m.getValue(L),Q("entry")),V("percent root")&&(se=B/m.getValue(U),Q("root"))}}return V("text")&&(te=c.castOption(I,G.i,"text"),c.isValidTextValue(te)&&K.push(te)),K.join("<br>")}var H=c.castOption(I,G.i,"texttemplate");if(!H)return"";var oe={};G.label&&(oe.label=G.label),G.hasOwnProperty("v")&&(oe.value=G.v,oe.valueLabel=m.formatValue(G.v,F)),oe.currentPath=m.getPath(P.data),X||(oe.percentParent=B/m.getValue(z),oe.percentParentLabel=m.formatPercent(oe.percentParent,F),oe.parent=m.getPtLabel(z)),oe.percentEntry=B/m.getValue(L),oe.percentEntryLabel=m.formatPercent(oe.percentEntry,F),oe.entry=m.getPtLabel(L),oe.percentRoot=B/m.getValue(U),oe.percentRootLabel=m.formatPercent(oe.percentRoot,F),oe.root=m.getPtLabel(U),G.hasOwnProperty("color")&&(oe.color=G.color);var re=c.castOption(I,G.i,"text");return(c.isValidTextValue(re)||re==="")&&(oe.text=re),oe.customdata=c.castOption(I,G.i,"customdata"),c.texttemplateString(H,oe,k._d3locale,oe,I._meta||{})};function y(P){return P.rpx0===0&&c.isFullCircle([P.x0,P.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(P.halfangle)),P.ring/2))}function T(P){return M(P.rpx1,P.transform.textPosAngle)}function M(P,L){return[P*Math.sin(L),-P*Math.cos(L)]}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../bar/style":935,"../bar/uniform_text":937,"../pie/helpers":1166,"../pie/plot":1170,"./constants":1302,"./fx":1304,"./helpers":1305,"./style":1310,d3:169,"d3-hierarchy":161}],1310:[function(e,v,S){var r=e("d3"),a=e("../../components/color"),u=e("../../lib"),c=e("../bar/uniform_text").resizeText;function t(n){var o=n._fullLayout._sunburstlayer.selectAll(".trace");c(n,o,"sunburst"),o.each(function(l){var h=r.select(this),i=l[0],s=i.trace;h.style("opacity",s.opacity),h.selectAll("path.surface").each(function(p){r.select(this).call(f,p,s)})})}function f(n,o,l){var h=o.data.data,i=!o.children,s=h.i,p=u.castOption(l,s,"marker.line.color")||a.defaultLine,d=u.castOption(l,s,"marker.line.width")||0;n.style("stroke-width",d).call(a.fill,h.color).call(a.stroke,p).style("opacity",i?l.leaf.opacity:null)}v.exports={style:t,styleOne:f}},{"../../components/color":643,"../../lib":778,"../bar/uniform_text":937,d3:169}],1311:[function(e,v,S){var r=e("../../components/color"),a=e("../../components/colorscale/attributes"),u=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,f=e("../../plot_api/edit_types").overrideAll;function n(h){return{valType:"boolean",dflt:!1}}function o(h){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:n(),y:n(),z:n()},color:{valType:"color",dflt:r.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:r.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var l=v.exports=f(t({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:u(),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},a("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:o(),y:o(),z:o()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:t({},a.zauto,{}),zmin:t({},a.zmin,{}),zmax:t({},a.zmax,{})},hoverinfo:t({},c.hoverinfo),showlegend:t({},c.showlegend,{dflt:!1})}),"calc","nested");l.x.editType=l.y.editType=l.z.editType="calc+clearAxisTypes",l.transforms=void 0},{"../../components/color":643,"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906}],1312:[function(e,v,S){var r=e("../../components/colorscale/calc");v.exports=function(u,c){c.surfacecolor?r(u,c,{vals:c.surfacecolor,containerStr:"",cLetter:"c"}):r(u,c,{vals:c.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651}],1313:[function(e,v,S){var r=e("gl-surface3d"),a=e("ndarray"),u=e("ndarray-linear-interpolate").d2,c=e("../heatmap/interp2d"),t=e("../heatmap/find_empties"),f=e("../../lib").isArrayOrTypedArray,n=e("../../lib/gl_format_color").parseColorScale,o=e("../../lib/str2rgbarray"),l=e("../../components/colorscale").extractOpts;function h(k,C,D){this.scene=k,this.uid=D,this.surface=C,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var i=h.prototype;i.getXat=function(k,C,D,F){var N=f(this.data.x)?f(this.data.x[0])?this.data.x[C][k]:this.data.x[k]:k;return D===void 0?N:F.d2l(N,0,D)},i.getYat=function(k,C,D,F){var N=f(this.data.y)?f(this.data.y[0])?this.data.y[C][k]:this.data.y[C]:C;return D===void 0?N:F.d2l(N,0,D)},i.getZat=function(k,C,D,F){var N=this.data.z[C][k];return N===null&&this.data.connectgaps&&this.data._interpolatedZ&&(N=this.data._interpolatedZ[C][k]),D===void 0?N:F.d2l(N,0,D)},i.handlePick=function(k){if(k.object===this.surface){var C=(k.data.index[0]-1)/this.dataScaleX-1,D=(k.data.index[1]-1)/this.dataScaleY-1,F=Math.max(Math.min(Math.round(C),this.data.z[0].length-1),0),N=Math.max(Math.min(Math.round(D),this.data._ylength-1),0);k.index=[F,N],k.traceCoordinate=[this.getXat(F,N),this.getYat(F,N),this.getZat(F,N)],k.dataCoordinate=[this.getXat(F,N,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(F,N,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(F,N,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var G=0;G<3;G++){var U=k.dataCoordinate[G];U!=null&&(k.dataCoordinate[G]*=this.scene.dataScale[G])}var X=this.data.hovertext||this.data.text;return Array.isArray(X)&&X[N]&&X[N][F]!==void 0?k.textLabel=X[N][F]:X?k.textLabel=X:k.textLabel="",k.data.dataCoordinate=k.dataCoordinate.slice(),this.surface.highlight(k.data),this.scene.glplot.spikes.position=k.dataCoordinate,!0}};function s(k){var C=k[0].rgb,D=k[k.length-1].rgb;return C[0]===D[0]&&C[1]===D[1]&&C[2]===D[2]&&C[3]===D[3]}var p=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function d(k,C){if(k<C)return 0;for(var D=0;Math.floor(k%C)===0;)k/=C,D++;return D}function g(k){for(var C=[],D=0;D<p.length;D++){var F=p[D];C.push(d(k,F))}return C}function b(k){for(var C=g(k),D=k,F=0;F<p.length;F++)if(C[F]>0){D=p[F];break}return D}function m(k,C){if(!(k<1||C<1)){for(var D=g(k),F=g(C),N=1,G=0;G<p.length;G++)N*=Math.pow(p[G],Math.max(D[G],F[G]));return N}}function x(k){if(k.length!==0){for(var C=1,D=0;D<k.length;D++)C=m(C,k[D]);return C}}i.calcXnums=function(k){var C,D=[];for(C=1;C<k;C++){var F=this.getXat(C-1,0),N=this.getXat(C,0);N!==F&&F!==void 0&&F!==null&&N!==void 0&&N!==null?D[C-1]=Math.abs(N-F):D[C-1]=0}var G=0;for(C=1;C<k;C++)G+=D[C-1];for(C=1;C<k;C++)D[C-1]===0?D[C-1]=1:D[C-1]=Math.round(G/D[C-1]);return D},i.calcYnums=function(k){var C,D=[];for(C=1;C<k;C++){var F=this.getYat(0,C-1),N=this.getYat(0,C);N!==F&&F!==void 0&&F!==null&&N!==void 0&&N!==null?D[C-1]=Math.abs(N-F):D[C-1]=0}var G=0;for(C=1;C<k;C++)G+=D[C-1];for(C=1;C<k;C++)D[C-1]===0?D[C-1]=1:D[C-1]=Math.round(G/D[C-1]);return D};var w=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],y=w[9],T=w[13];i.estimateScale=function(k,C){for(var D=C===0?this.calcXnums(k):this.calcYnums(k),F=1+x(D);F<y;)F*=2;for(;F>T;)F--,F/=b(F),F++,F<y&&(F=T);var N=Math.round(F/k);return N>1?N:1};function M(k,C,D){var F=D[8]+D[2]*C[0]+D[5]*C[1];return k[0]=(D[6]+D[0]*C[0]+D[3]*C[1])/F,k[1]=(D[7]+D[1]*C[0]+D[4]*C[1])/F,k}function P(k,C,D){return L(k,C,M,D),k}function L(k,C,D,F){for(var N=[0,0],G=k.shape[0],U=k.shape[1],X=0;X<G;X++)for(var z=0;z<U;z++)D(N,[X,z],F),k.set(X,z,u(C,N[0],N[1]));return k}i.refineCoords=function(k){for(var C=this.dataScaleX,D=this.dataScaleY,F=k[0].shape[0],N=k[0].shape[1],G=Math.floor(k[0].shape[0]*C+1)|0,U=Math.floor(k[0].shape[1]*D+1)|0,X=1+F+1,z=1+N+1,B=a(new Float32Array(X*z),[X,z]),j=[1/C,0,0,0,1/D,0,0,0,1],V=0;V<k.length;++V){this.surface.padField(B,k[V]);var K=a(new Float32Array(G*U),[G,U]);P(K,B,j),k[V]=K}};function I(k,C){for(var D=!1,F=0;F<k.length;F++)if(C===k[F]){D=!0;break}D===!1&&k.push(C)}i.setContourLevels=function(){var k=[[],[],[]],C=[!1,!1,!1],D=!1,F,N,G;for(F=0;F<3;++F)if(this.showContour[F]&&(D=!0,this.contourSize[F]>0&&this.contourStart[F]!==null&&this.contourEnd[F]!==null&&this.contourEnd[F]>this.contourStart[F]))for(C[F]=!0,N=this.contourStart[F];N<this.contourEnd[F];N+=this.contourSize[F])G=N*this.scene.dataScale[F],I(k[F],G);if(D){var U=[[],[],[]];for(F=0;F<3;++F)this.showContour[F]&&(U[F]=C[F]?k[F]:this.scene.contourLevels[F]);this.surface.update({levels:U})}},i.update=function(k){var C=this.scene,D=C.fullSceneLayout,F=this.surface,N=n(k),G=C.dataScale,U=k.z[0].length,X=k._ylength,z=C.contourLevels;this.data=k;var B,j,V,K,te=[];for(B=0;B<3;B++)for(te[B]=[],j=0;j<U;j++)te[B][j]=[];for(j=0;j<U;j++)for(V=0;V<X;V++)te[0][j][V]=this.getXat(j,V,k.xcalendar,D.xaxis),te[1][j][V]=this.getYat(j,V,k.ycalendar,D.yaxis),te[2][j][V]=this.getZat(j,V,k.zcalendar,D.zaxis);if(k.connectgaps)for(k._emptypoints=t(te[2]),c(te[2],k._emptypoints),k._interpolatedZ=[],j=0;j<U;j++)for(k._interpolatedZ[j]=[],V=0;V<X;V++)k._interpolatedZ[j][V]=te[2][j][V];for(B=0;B<3;B++)for(j=0;j<U;j++)for(V=0;V<X;V++)K=te[B][j][V],K==null?te[B][j][V]=NaN:K=te[B][j][V]*=G[B];for(B=0;B<3;B++)for(j=0;j<U;j++)for(V=0;V<X;V++)K=te[B][j][V],K!=null&&(this.minValues[B]>K&&(this.minValues[B]=K),this.maxValues[B]<K&&(this.maxValues[B]=K));for(B=0;B<3;B++)this.objectOffset[B]=.5*(this.minValues[B]+this.maxValues[B]);for(B=0;B<3;B++)for(j=0;j<U;j++)for(V=0;V<X;V++)K=te[B][j][V],K!=null&&(te[B][j][V]-=this.objectOffset[B]);var $=[a(new Float32Array(U*X),[U,X]),a(new Float32Array(U*X),[U,X]),a(new Float32Array(U*X),[U,X])];for(B=0;B<3;B++)for(j=0;j<U;j++)for(V=0;V<X;V++)$[B].set(j,V,te[B][j][V]);te=[];var ie={colormap:N,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!k.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:k.opacityscale,opacity:k.opacity},se=l(k);if(ie.intensityBounds=[se.min,se.max],k.surfacecolor){var Q=a(new Float32Array(U*X),[U,X]);for(j=0;j<U;j++)for(V=0;V<X;V++)Q.set(j,V,k.surfacecolor[V][j]);$.push(Q)}else ie.intensityBounds[0]*=G[2],ie.intensityBounds[1]*=G[2];(T<$[0].shape[0]||T<$[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale($[0].shape[0],0),this.dataScaleY=this.estimateScale($[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords($)),k.surfacecolor&&(ie.intensity=$.pop());var H=[!0,!0,!0],oe=["x","y","z"];for(B=0;B<3;++B){var re=k.contours[oe[B]];H[B]=re.highlight,ie.showContour[B]=re.show||re.highlight,ie.showContour[B]&&(ie.contourProject[B]=[re.project.x,re.project.y,re.project.z],re.show?(this.showContour[B]=!0,ie.levels[B]=z[B],F.highlightColor[B]=ie.contourColor[B]=o(re.color),re.usecolormap?F.highlightTint[B]=ie.contourTint[B]=0:F.highlightTint[B]=ie.contourTint[B]=1,ie.contourWidth[B]=re.width,this.contourStart[B]=re.start,this.contourEnd[B]=re.end,this.contourSize[B]=re.size):(this.showContour[B]=!1,this.contourStart[B]=null,this.contourEnd[B]=null,this.contourSize[B]=0),re.highlight&&(ie.dynamicColor[B]=o(re.highlightcolor),ie.dynamicWidth[B]=re.highlightwidth))}s(N)&&(ie.vertexColor=!0),ie.objectOffset=this.objectOffset,ie.coords=$,F.update(ie),F.visible=k.visible,F.enableDynamic=H,F.enableHighlight=H,F.snapToData=!0,"lighting"in k&&(F.ambientLight=k.lighting.ambient,F.diffuseLight=k.lighting.diffuse,F.specularLight=k.lighting.specular,F.roughness=k.lighting.roughness,F.fresnel=k.lighting.fresnel),"lightposition"in k&&(F.lightPosition=[k.lightposition.x,k.lightposition.y,k.lightposition.z])},i.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function E(k,C){var D=k.glplot.gl,F=r({gl:D}),N=new h(k,F,C.uid);return F._trace=N,N.update(C),k.glplot.add(F),N}v.exports=E},{"../../components/colorscale":655,"../../lib":778,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../heatmap/find_empties":1071,"../heatmap/interp2d":1074,"gl-surface3d":351,ndarray:495,"ndarray-linear-interpolate":489}],1314:[function(e,v,S){var r=e("../../registry"),a=e("../../lib"),u=e("../../components/colorscale/defaults"),c=e("./attributes"),t=.1;function f(i,s){for(var p=[],d=32,g=0;g<d;g++){var b=g/(d-1),m=s+(1-s)*(1-Math.pow(Math.sin(i*b*Math.PI),2));p.push([b,Math.max(0,Math.min(1,m))])}return p}function n(i){var s=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||+i[0][0]!=0||+i[i.length-1][0]!=1)return!1;for(var p=0;p<i.length;p++){var d=i[p];if(d.length!==2||+d[0]<s)return!1;s=+d[0]}return!0}function o(i,s,p,d){var g,b;function m(k,C){return a.coerce(i,s,c,k,C)}var x=m("x"),w=m("y"),y=m("z");if(!y||!y.length||(x?x.length<1:!1)||(w?w.length<1:!1)){s.visible=!1;return}s._xlength=Array.isArray(x)&&a.isArrayOrTypedArray(x[0])?y.length:y[0].length,s._ylength=y.length;var T=r.getComponentMethod("calendars","handleTraceDefaults");T(i,s,["x","y","z"],d),m("text"),m("hovertext"),m("hovertemplate"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(k){m(k)});var M=m("surfacecolor"),P=["x","y","z"];for(g=0;g<3;++g){var L="contours."+P[g],I=m(L+".show"),E=m(L+".highlight");if(I||E)for(b=0;b<3;++b)m(L+".project."+P[b]);I&&(m(L+".color"),m(L+".width"),m(L+".usecolormap")),E&&(m(L+".highlightcolor"),m(L+".highlightwidth")),m(L+".start"),m(L+".end"),m(L+".size")}M||(h(i,"zmin","cmin"),h(i,"zmax","cmax"),h(i,"zauto","cauto")),u(i,s,d,m,{prefix:"",cLetter:"c"}),l(i,s,d,m),s._length=null}function l(i,s,p,d){var g=d("opacityscale");g==="max"?s.opacityscale=[[0,t],[1,1]]:g==="min"?s.opacityscale=[[0,1],[1,t]]:g==="extremes"?s.opacityscale=f(1,t):n(g)||(s.opacityscale=void 0)}function h(i,s,p){s in i&&!(p in i)&&(i[p]=i[s])}v.exports={supplyDefaults:o,opacityscaleDefaults:l}},{"../../components/colorscale/defaults":653,"../../lib":778,"../../registry":911,"./attributes":1311}],1315:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),moduleType:"trace",name:"surface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":870,"./attributes":1311,"./calc":1312,"./convert":1313,"./defaults":1314}],1316:[function(e,v,S){var r=e("../../components/annotations/attributes"),a=e("../../lib/extend").extendFlat,u=e("../../plot_api/edit_types").overrideAll,c=e("../../plots/font_attributes"),t=e("../../plots/domain").attributes;e("../../constants/docs").FORMAT_LINK;var f=v.exports=u({domain:t({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:a({},r.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:a({},c({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:a({},r.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:a({},c({arrayOk:!0}))}},"calc","from-root");f.transforms=void 0},{"../../components/annotations/attributes":626,"../../constants/docs":748,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/domain":855,"../../plots/font_attributes":856}],1317:[function(e,v,S){var r=e("../../plots/get_data").getModuleCalcData,a=e("./plot"),u="table";S.name=u,S.plot=function(c){var t=r(c.calcdata,u)[0];t.length&&a(c,t)},S.clean=function(c,t,f,n){var o=n._has&&n._has(u),l=t._has&&t._has(u);o&&!l&&n._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":865,"./plot":1324}],1318:[function(e,v,S){var r=e("../../lib/gup").wrap;v.exports=function(){return r({})}},{"../../lib/gup":775}],1319:[function(e,v,S){v.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1320:[function(e,v,S){var r=e("./constants"),a=e("../../lib/extend").extendFlat,u=e("fast-isnumeric");v.exports=function(p,d){var g=f(d.cells.values),b=function(j){return j.slice(d.header.values.length,j.length)},m=f(d.header.values);m.length&&!m[0].length&&(m[0]=[""],m=f(m));var x=m.concat(b(g).map(function(){return n((m[0]||[""]).length)})),w=d.domain,y=Math.floor(p._fullLayout._size.w*(w.x[1]-w.x[0])),T=Math.floor(p._fullLayout._size.h*(w.y[1]-w.y[0])),M=d.header.values.length?x[0].map(function(){return d.header.height}):[r.emptyHeaderHeight],P=g.length?g[0].map(function(){return d.cells.height}):[],L=M.reduce(t,0),I=T-L,E=I+r.uplift,k=h(P,E),C=h(M,L),D=l(C,[]),F=l(k,D),N={},G=d._fullInput.columnorder.concat(b(g.map(function(j,V){return V}))),U=x.map(function(j,V){var K=Array.isArray(d.columnwidth)?d.columnwidth[Math.min(V,d.columnwidth.length-1)]:d.columnwidth;return u(K)?Number(K):1}),X=U.reduce(t,0);U=U.map(function(j){return j/X*y});var z=Math.max(c(d.header.line.width),c(d.cells.line.width)),B={key:d.uid+p._context.staticPlot,translateX:w.x[0]*p._fullLayout._size.w,translateY:p._fullLayout._size.h*(1-w.y[1]),size:p._fullLayout._size,width:y,maxLineWidth:z,height:T,columnOrder:G,groupHeight:T,rowBlocks:F,headerRowBlocks:D,scrollY:0,cells:a({},d.cells,{values:g}),headerCells:a({},d.header,{values:x}),gdColumns:x.map(function(j){return j[0]}),gdColumnsOriginalOrder:x.map(function(j){return j[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:x.map(function(j,V){var K=N[j];N[j]=(K||0)+1;var te=j+"__"+N[j];return{key:te,label:j,specIndex:V,xIndex:G[V],xScale:o,x:void 0,calcdata:void 0,columnWidth:U[V]}})};return B.columns.forEach(function(j){j.calcdata=B,j.x=o(j)}),B};function c(s){if(Array.isArray(s)){for(var p=0,d=0;d<s.length;d++)p=Math.max(p,c(s[d]));return p}return s}function t(s,p){return s+p}function f(s){var p=s.slice(),d=1/0,g=0,b;for(b=0;b<p.length;b++)Array.isArray(p[b])||(p[b]=[p[b]]),d=Math.min(d,p[b].length),g=Math.max(g,p[b].length);if(d!==g)for(b=0;b<p.length;b++){var m=g-p[b].length;m&&(p[b]=p[b].concat(n(m)))}return p}function n(s){for(var p=new Array(s),d=0;d<s;d++)p[d]="";return p}function o(s){return s.calcdata.columns.reduce(function(p,d){return d.xIndex<s.xIndex?p+d.columnWidth:p},0)}function l(s,p){var d=Object.keys(s);return d.map(function(g){return a({},s[g],{auxiliaryBlocks:p})})}function h(s,p){for(var d={},g,b=0,m=0,x=i(),w=0,y=0,T=0;T<s.length;T++)g=s[T],x.rows.push({rowIndex:T,rowHeight:g}),m+=g,(m>=p||T===s.length-1)&&(d[b]=x,x.key=y++,x.firstRowIndex=w,x.lastRowIndex=T,x=i(),b+=m,w=T+1,m=0);return d}function i(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":768,"./constants":1319,"fast-isnumeric":241}],1321:[function(e,v,S){var r=e("../../lib/extend").extendFlat;S.splitToPanels=function(u){var c=[0,0],t=r({},u,{key:"header",type:"header",page:0,prevPages:c,currentRepaint:[null,null],dragHandle:!0,values:u.calcdata.headerCells.values[u.specIndex],rowBlocks:u.calcdata.headerRowBlocks,calcdata:r({},u.calcdata,{cells:u.calcdata.headerCells})}),f=r({},u,{key:"cells1",type:"cells",page:0,prevPages:c,currentRepaint:[null,null],dragHandle:!1,values:u.calcdata.cells.values[u.specIndex],rowBlocks:u.calcdata.rowBlocks}),n=r({},u,{key:"cells2",type:"cells",page:1,prevPages:c,currentRepaint:[null,null],dragHandle:!1,values:u.calcdata.cells.values[u.specIndex],rowBlocks:u.calcdata.rowBlocks});return[f,n,t]},S.splitToCells=function(u){var c=a(u);return(u.values||[]).slice(c[0],c[1]).map(function(t,f){var n=typeof t=="string"&&t.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:f+n,key:c[0]+f,column:u,calcdata:u.calcdata,page:u.page,rowBlocks:u.rowBlocks,value:t}})};function a(u){var c=u.rowBlocks[u.page],t=c?c.rows[0].rowIndex:0,f=c?t+c.rows.length:0;return[t,f]}},{"../../lib/extend":768}],1322:[function(e,v,S){var r=e("../../lib"),a=e("./attributes"),u=e("../../plots/domain").defaults;function c(t,f){for(var n=t.columnorder||[],o=t.header.values.length,l=n.slice(0,o),h=l.slice().sort(function(p,d){return p-d}),i=l.map(function(p){return h.indexOf(p)}),s=i.length;s<o;s++)i.push(s);f("columnorder",i)}v.exports=function(f,n,o,l){function h(i,s){return r.coerce(f,n,a,i,s)}u(n,l,h),h("columnwidth"),h("header.values"),h("header.format"),h("header.align"),h("header.prefix"),h("header.suffix"),h("header.height"),h("header.line.width"),h("header.line.color"),h("header.fill.color"),r.coerceFont(h,"header.font",r.extendFlat({},l.font)),c(n,h),h("cells.values"),h("cells.format"),h("cells.align"),h("cells.prefix"),h("cells.suffix"),h("cells.height"),h("cells.line.width"),h("cells.line.color"),h("cells.fill.color"),r.coerceFont(h,"cells.font",r.extendFlat({},l.font)),n._length=null}},{"../../lib":778,"../../plots/domain":855,"./attributes":1316}],1323:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"table",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1316,"./base_plot":1317,"./calc":1318,"./defaults":1322,"./plot":1324}],1324:[function(e,v,S){var r=e("./constants"),a=e("d3"),u=e("../../lib/gup"),c=e("../../components/drawing"),t=e("../../lib/svg_text_utils"),f=e("../../lib").raiseToTop,n=e("../../lib").strTranslate,o=e("../../lib").cancelTransition,l=e("./data_preparation_helper"),h=e("./data_split_helpers"),i=e("../../components/color");v.exports=function(ae,fe){var de=!ae._context.staticPlot,pe=ae._fullLayout._paper.selectAll("."+r.cn.table).data(fe.map(function(qe){var Tt=u.unwrap(qe),At=Tt.trace;return l(ae,At)}),u.keyFun);pe.exit().remove(),pe.enter().append("g").classed(r.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),pe.attr("width",function(qe){return qe.width+qe.size.l+qe.size.r}).attr("height",function(qe){return qe.height+qe.size.t+qe.size.b}).attr("transform",function(qe){return n(qe.translateX,qe.translateY)});var W=pe.selectAll("."+r.cn.tableControlView).data(u.repeat,u.keyFun),ue=W.enter().append("g").classed(r.cn.tableControlView,!0).style("box-sizing","content-box");if(de){var me="onwheel"in document?"wheel":"mousewheel";ue.on("mousemove",function(qe){W.filter(function(Tt){return qe===Tt}).call(b,ae)}).on(me,function(qe){if(!qe.scrollbarState.wheeling){qe.scrollbarState.wheeling=!0;var Tt=qe.scrollY+a.event.deltaY,At=j(ae,W,null,Tt)(qe);At||(a.event.stopPropagation(),a.event.preventDefault()),qe.scrollbarState.wheeling=!1}}).call(b,ae,!0)}W.attr("transform",function(qe){return n(qe.size.l,qe.size.t)});var be=W.selectAll("."+r.cn.scrollBackground).data(u.repeat,u.keyFun);be.enter().append("rect").classed(r.cn.scrollBackground,!0).attr("fill","none"),be.attr("width",function(qe){return qe.width}).attr("height",function(qe){return qe.height}),W.each(function(qe){c.setClipUrl(a.select(this),p(ae,qe),ae)});var Me=W.selectAll("."+r.cn.yColumn).data(function(qe){return qe.columns},u.keyFun);Me.enter().append("g").classed(r.cn.yColumn,!0),Me.exit().remove(),Me.attr("transform",function(qe){return n(qe.x,0)}),de&&Me.call(a.behavior.drag().origin(function(qe){var Tt=a.select(this);return N(Tt,qe,-r.uplift),f(this),qe.calcdata.columnDragInProgress=!0,b(W.filter(function(At){return qe.calcdata.key===At.key}),ae),qe}).on("drag",function(qe){var Tt=a.select(this),At=function(Mt){return(qe===Mt?a.event.x:Mt.x)+Mt.columnWidth/2};qe.x=Math.max(-r.overdrag,Math.min(qe.calcdata.width+r.overdrag-qe.columnWidth,a.event.x));var Ne=g(Me).filter(function(Mt){return Mt.calcdata.key===qe.calcdata.key}),ct=Ne.sort(function(Mt,Wt){return At(Mt)-At(Wt)});ct.forEach(function(Mt,Wt){Mt.xIndex=Wt,Mt.x=qe===Mt?Mt.x:Mt.xScale(Mt)}),Me.filter(function(Mt){return qe!==Mt}).transition().ease(r.transitionEase).duration(r.transitionDuration).attr("transform",function(Mt){return n(Mt.x,0)}),Tt.call(o).attr("transform",n(qe.x,-r.uplift))}).on("dragend",function(qe){var Tt=a.select(this),At=qe.calcdata;qe.x=qe.xScale(qe),qe.calcdata.columnDragInProgress=!1,N(Tt,qe,0),D(ae,At,At.columns.map(function(Ne){return Ne.xIndex}))})),Me.each(function(qe){c.setClipUrl(a.select(this),d(ae,qe),ae)});var Pe=Me.selectAll("."+r.cn.columnBlock).data(h.splitToPanels,u.keyFun);Pe.enter().append("g").classed(r.cn.columnBlock,!0).attr("id",function(qe){return qe.key}),Pe.style("cursor",function(qe){return qe.dragHandle?"ew-resize":qe.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var Ge=Pe.filter(U),ze=Pe.filter(G);de&&ze.call(a.behavior.drag().origin(function(qe){return a.event.stopPropagation(),qe}).on("drag",j(ae,W,-1)).on("dragend",function(){})),m(ae,W,Ge,Pe),m(ae,W,ze,Pe);var Qe=W.selectAll("."+r.cn.scrollAreaClip).data(u.repeat,u.keyFun);Qe.enter().append("clipPath").classed(r.cn.scrollAreaClip,!0).attr("id",function(qe){return p(ae,qe)});var tt=Qe.selectAll("."+r.cn.scrollAreaClipRect).data(u.repeat,u.keyFun);tt.enter().append("rect").classed(r.cn.scrollAreaClipRect,!0).attr("x",-r.overdrag).attr("y",-r.uplift).attr("fill","none"),tt.attr("width",function(qe){return qe.width+2*r.overdrag}).attr("height",function(qe){return qe.height+r.uplift});var Ce=Me.selectAll("."+r.cn.columnBoundary).data(u.repeat,u.keyFun);Ce.enter().append("g").classed(r.cn.columnBoundary,!0);var Ae=Me.selectAll("."+r.cn.columnBoundaryClippath).data(u.repeat,u.keyFun);Ae.enter().append("clipPath").classed(r.cn.columnBoundaryClippath,!0),Ae.attr("id",function(qe){return d(ae,qe)});var Be=Ae.selectAll("."+r.cn.columnBoundaryRect).data(u.repeat,u.keyFun);Be.enter().append("rect").classed(r.cn.columnBoundaryRect,!0).attr("fill","none"),Be.attr("width",function(qe){return qe.columnWidth+2*s(qe)}).attr("height",function(qe){return qe.calcdata.height+2*s(qe)+r.uplift}).attr("x",function(qe){return-s(qe)}).attr("y",function(qe){return-s(qe)}),B(null,ze,W)};function s(ee){return Math.ceil(ee.calcdata.maxLineWidth/2)}function p(ee,ae){return"clip"+ee._fullLayout._uid+"_scrollAreaBottomClip_"+ae.key}function d(ee,ae){return"clip"+ee._fullLayout._uid+"_columnBoundaryClippath_"+ae.calcdata.key+"_"+ae.specIndex}function g(ee){return[].concat.apply([],ee.map(function(ae){return ae})).map(function(ae){return ae.__data__})}function b(ee,ae,fe){function de(Me){var Pe=Me.rowBlocks;return se(Pe,Pe.length-1)+(Pe.length?Q(Pe[Pe.length-1],1/0):1)}var pe=ee.selectAll("."+r.cn.scrollbarKit).data(u.repeat,u.keyFun);pe.enter().append("g").classed(r.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),pe.each(function(Me){var Pe=Me.scrollbarState;Pe.totalHeight=de(Me),Pe.scrollableAreaHeight=Me.groupHeight-X(Me),Pe.currentlyVisibleHeight=Math.min(Pe.totalHeight,Pe.scrollableAreaHeight),Pe.ratio=Pe.currentlyVisibleHeight/Pe.totalHeight,Pe.barLength=Math.max(Pe.ratio*Pe.currentlyVisibleHeight,r.goldenRatio*r.scrollbarWidth),Pe.barWiggleRoom=Pe.currentlyVisibleHeight-Pe.barLength,Pe.wiggleRoom=Math.max(0,Pe.totalHeight-Pe.scrollableAreaHeight),Pe.topY=Pe.barWiggleRoom===0?0:Me.scrollY/Pe.wiggleRoom*Pe.barWiggleRoom,Pe.bottomY=Pe.topY+Pe.barLength,Pe.dragMultiplier=Pe.wiggleRoom/Pe.barWiggleRoom}).attr("transform",function(Me){var Pe=Me.width+r.scrollbarWidth/2+r.scrollbarOffset;return n(Pe,X(Me))});var W=pe.selectAll("."+r.cn.scrollbar).data(u.repeat,u.keyFun);W.enter().append("g").classed(r.cn.scrollbar,!0);var ue=W.selectAll("."+r.cn.scrollbarSlider).data(u.repeat,u.keyFun);ue.enter().append("g").classed(r.cn.scrollbarSlider,!0),ue.attr("transform",function(Me){return n(0,Me.scrollbarState.topY||0)});var me=ue.selectAll("."+r.cn.scrollbarGlyph).data(u.repeat,u.keyFun);me.enter().append("line").classed(r.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",r.scrollbarWidth).attr("stroke-linecap","round").attr("y1",r.scrollbarWidth/2),me.attr("y2",function(Me){return Me.scrollbarState.barLength-r.scrollbarWidth/2}).attr("stroke-opacity",function(Me){return Me.columnDragInProgress||!Me.scrollbarState.barWiggleRoom||fe?0:.4}),me.transition().delay(0).duration(0),me.transition().delay(r.scrollbarHideDelay).duration(r.scrollbarHideDuration).attr("stroke-opacity",0);var be=W.selectAll("."+r.cn.scrollbarCaptureZone).data(u.repeat,u.keyFun);be.enter().append("line").classed(r.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",r.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(Me){var Pe=a.event.y,Ge=this.getBoundingClientRect(),ze=Me.scrollbarState,Qe=Pe-Ge.top,tt=a.scale.linear().domain([0,ze.scrollableAreaHeight]).range([0,ze.totalHeight]).clamp(!0);ze.topY<=Qe&&Qe<=ze.bottomY||j(ae,ee,null,tt(Qe-ze.barLength/2))(Me)}).call(a.behavior.drag().origin(function(Me){return a.event.stopPropagation(),Me.scrollbarState.scrollbarScrollInProgress=!0,Me}).on("drag",j(ae,ee)).on("dragend",function(){})),be.attr("y2",function(Me){return Me.scrollbarState.scrollableAreaHeight}),ae._context.staticPlot&&(me.remove(),be.remove())}function m(ee,ae,fe,de){var pe=x(fe),W=w(pe);P(W);var ue=y(W);I(ue);var me=M(W),be=T(me);L(be),E(be,ae,de,ee),ie(W)}function x(ee){var ae=ee.selectAll("."+r.cn.columnCells).data(u.repeat,u.keyFun);return ae.enter().append("g").classed(r.cn.columnCells,!0),ae.exit().remove(),ae}function w(ee){var ae=ee.selectAll("."+r.cn.columnCell).data(h.splitToCells,function(fe){return fe.keyWithinBlock});return ae.enter().append("g").classed(r.cn.columnCell,!0),ae.exit().remove(),ae}function y(ee){var ae=ee.selectAll("."+r.cn.cellRect).data(u.repeat,function(fe){return fe.keyWithinBlock});return ae.enter().append("rect").classed(r.cn.cellRect,!0),ae}function T(ee){var ae=ee.selectAll("."+r.cn.cellText).data(u.repeat,function(fe){return fe.keyWithinBlock});return ae.enter().append("text").classed(r.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){a.event.stopPropagation()}),ae}function M(ee){var ae=ee.selectAll("."+r.cn.cellTextHolder).data(u.repeat,function(fe){return fe.keyWithinBlock});return ae.enter().append("g").classed(r.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ae}function P(ee){ee.each(function(ae,fe){var de=ae.calcdata.cells.font,pe=ae.column.specIndex,W={size:F(de.size,pe,fe),color:F(de.color,pe,fe),family:F(de.family,pe,fe)};ae.rowNumber=ae.key,ae.align=F(ae.calcdata.cells.align,pe,fe),ae.cellBorderWidth=F(ae.calcdata.cells.line.width,pe,fe),ae.font=W})}function L(ee){ee.each(function(ae){c.font(a.select(this),ae.font)})}function I(ee){ee.attr("width",function(ae){return ae.column.columnWidth}).attr("stroke-width",function(ae){return ae.cellBorderWidth}).each(function(ae){var fe=a.select(this);i.stroke(fe,F(ae.calcdata.cells.line.color,ae.column.specIndex,ae.rowNumber)),i.fill(fe,F(ae.calcdata.cells.fill.color,ae.column.specIndex,ae.rowNumber))})}function E(ee,ae,fe,de){ee.text(function(pe){var W=pe.column.specIndex,ue=pe.rowNumber,me=pe.value,be=typeof me=="string",Me=be&&me.match(/<br>/i),Pe=!be||Me;pe.mayHaveMarkup=be&&me.match(/[<&>]/);var Ge=k(me);pe.latex=Ge;var ze=Ge?"":F(pe.calcdata.cells.prefix,W,ue)||"",Qe=Ge?"":F(pe.calcdata.cells.suffix,W,ue)||"",tt=Ge?null:F(pe.calcdata.cells.format,W,ue)||null,Ce=ze+(tt?a.format(tt)(pe.value):pe.value)+Qe,Ae;pe.wrappingNeeded=!pe.wrapped&&!Pe&&!Ge&&(Ae=C(Ce)),pe.cellHeightMayIncrease=Me||Ge||pe.mayHaveMarkup||(Ae===void 0?C(Ce):Ae),pe.needsConvertToTspans=pe.mayHaveMarkup||pe.wrappingNeeded||pe.latex;var Be;if(pe.wrappingNeeded){var qe=r.wrapSplitCharacter===" "?Ce.replace(/<a href=/ig,"<a_href="):Ce,Tt=qe.split(r.wrapSplitCharacter),At=r.wrapSplitCharacter===" "?Tt.map(function(Ne){return Ne.replace(/<a_href=/ig,"<a href=")}):Tt;pe.fragments=At.map(function(Ne){return{text:Ne,width:null}}),pe.fragments.push({fragment:r.wrapSpacer,width:null}),Be=At.join(r.lineBreaker)+r.lineBreaker+r.wrapSpacer}else delete pe.fragments,Be=Ce;return Be}).attr("dy",function(pe){return pe.needsConvertToTspans?0:"0.75em"}).each(function(pe){var W=this,ue=a.select(W),me=pe.wrappingNeeded?K:te;pe.needsConvertToTspans?t.convertToTspans(ue,de,me(fe,W,ae,de,pe)):a.select(W.parentNode).attr("transform",function(be){return n($(be),r.cellPad)}).attr("text-anchor",function(be){return{left:"start",center:"middle",right:"end"}[be.align]})})}function k(ee){return typeof ee=="string"&&ee.match(r.latexCheck)}function C(ee){return ee.indexOf(r.wrapSplitCharacter)!==-1}function D(ee,ae,fe){var de=ae.gdColumnsOriginalOrder;ae.gdColumns.sort(function(pe,W){return fe[de.indexOf(pe)]-fe[de.indexOf(W)]}),ae.columnorder=fe,ee.emit("plotly_restyle")}function F(ee,ae,fe){if(Array.isArray(ee)){var de=ee[Math.min(ae,ee.length-1)];return Array.isArray(de)?de[Math.min(fe,de.length-1)]:de}else return ee}function N(ee,ae,fe){ee.transition().ease(r.releaseTransitionEase).duration(r.releaseTransitionDuration).attr("transform",n(ae.x,fe))}function G(ee){return ee.type==="cells"}function U(ee){return ee.type==="header"}function X(ee){var ae=ee.rowBlocks.length?ee.rowBlocks[0].auxiliaryBlocks:[];return ae.reduce(function(fe,de){return fe+Q(de,1/0)},0)}function z(ee,ae,fe){for(var de=[],pe=0,W=0;W<ee.length;W++){for(var ue=ee[W],me=ue.rows,be=0,Me=0;Me<me.length;Me++)be+=me[Me].rowHeight;ue.allRowsHeight=be;var Pe=pe+be,Ge=ae,ze=Ge+fe;Ge<Pe&&ze>pe&&de.push(W),pe+=be}return de}function B(ee,ae,fe){var de=g(ae)[0];if(de!==void 0){var pe=de.rowBlocks,W=de.calcdata,ue=se(pe,pe.length),me=de.calcdata.groupHeight-X(de),be=W.scrollY=Math.max(0,Math.min(ue-me,W.scrollY)),Me=z(pe,be,me);Me.length===1&&(Me[0]===pe.length-1?Me.unshift(Me[0]-1):Me.push(Me[0]+1)),Me[0]%2&&Me.reverse(),ae.each(function(Pe,Ge){Pe.page=Me[Ge],Pe.scrollY=be}),ae.attr("transform",function(Pe){var Ge=se(Pe.rowBlocks,Pe.page)-Pe.scrollY;return n(0,Ge)}),ee&&(V(ee,fe,ae,Me,de.prevPages,de,0),V(ee,fe,ae,Me,de.prevPages,de,1),b(fe,ee))}}function j(ee,ae,fe,de){return function(W){var ue=W.calcdata?W.calcdata:W,me=ae.filter(function(Ge){return ue.key===Ge.key}),be=fe||ue.scrollbarState.dragMultiplier,Me=ue.scrollY;ue.scrollY=de===void 0?ue.scrollY+be*a.event.dy:de;var Pe=me.selectAll("."+r.cn.yColumn).selectAll("."+r.cn.columnBlock).filter(G);return B(ee,Pe,me),ue.scrollY===Me}}function V(ee,ae,fe,de,pe,W,ue){var me=de[ue]!==pe[ue];me&&(clearTimeout(W.currentRepaint[ue]),W.currentRepaint[ue]=setTimeout(function(){var be=fe.filter(function(Me,Pe){return Pe===ue&&de[Pe]!==pe[Pe]});m(ee,ae,be,fe),pe[ue]=de[ue]}))}function K(ee,ae,fe,de){return function(){var W=a.select(ae.parentNode);W.each(function(ue){var me=ue.fragments;W.selectAll("tspan.line").each(function(Ce,Ae){me[Ae].width=this.getComputedTextLength()});var be=me[me.length-1].width,Me=me.slice(0,-1),Pe=[],Ge,ze,Qe=0,tt=ue.column.columnWidth-2*r.cellPad;for(ue.value="";Me.length;)Ge=Me.shift(),ze=Ge.width+be,Qe+ze>tt&&(ue.value+=Pe.join(r.wrapSpacer)+r.lineBreaker,Pe=[],Qe=0),Pe.push(Ge.text),Qe+=ze;Qe&&(ue.value+=Pe.join(r.wrapSpacer)),ue.wrapped=!0}),W.selectAll("tspan.line").remove(),E(W.select("."+r.cn.cellText),fe,ee,de),a.select(ae.parentNode.parentNode).call(ie)}}function te(ee,ae,fe,de,pe){return function(){if(!pe.settledY){var ue=a.select(ae.parentNode),me=oe(pe),be=pe.key-me.firstRowIndex,Me=me.rows[be].rowHeight,Pe=pe.cellHeightMayIncrease?ae.parentNode.getBoundingClientRect().height+2*r.cellPad:Me,Ge=Math.max(Pe,Me),ze=Ge-me.rows[be].rowHeight;ze&&(me.rows[be].rowHeight=Ge,ee.selectAll("."+r.cn.columnCell).call(ie),B(null,ee.filter(G),0),b(fe,de,!0)),ue.attr("transform",function(){var Qe=this,tt=Qe.parentNode,Ce=tt.getBoundingClientRect(),Ae=a.select(Qe.parentNode).select("."+r.cn.cellRect).node().getBoundingClientRect(),Be=Qe.transform.baseVal.consolidate(),qe=Ae.top-Ce.top+(Be?Be.matrix.f:r.cellPad);return n($(pe,a.select(Qe.parentNode).select("."+r.cn.cellTextHolder).node().getBoundingClientRect().width),qe)}),pe.settledY=!0}}}function $(ee,ae){switch(ee.align){case"left":return r.cellPad;case"right":return ee.column.columnWidth-(ae||0)-r.cellPad;case"center":return(ee.column.columnWidth-(ae||0))/2;default:return r.cellPad}}function ie(ee){ee.attr("transform",function(ae){var fe=ae.rowBlocks[0].auxiliaryBlocks.reduce(function(ue,me){return ue+Q(me,1/0)},0),de=oe(ae),pe=Q(de,ae.key),W=pe+fe;return n(0,W)}).selectAll("."+r.cn.cellRect).attr("height",function(ae){return re(oe(ae),ae.key).rowHeight})}function se(ee,ae){for(var fe=0,de=ae-1;de>=0;de--)fe+=H(ee[de]);return fe}function Q(ee,ae){for(var fe=0,de=0;de<ee.rows.length&&ee.rows[de].rowIndex<ae;de++)fe+=ee.rows[de].rowHeight;return fe}function H(ee){var ae=ee.allRowsHeight;if(ae!==void 0)return ae;for(var fe=0,de=0;de<ee.rows.length;de++)fe+=ee.rows[de].rowHeight;return ee.allRowsHeight=fe,fe}function oe(ee){return ee.rowBlocks[ee.page]}function re(ee,ae){return ee.rows[ae-ee.firstRowIndex]}},{"../../components/color":643,"../../components/drawing":665,"../../lib":778,"../../lib/gup":775,"../../lib/svg_text_utils":803,"./constants":1319,"./data_preparation_helper":1320,"./data_split_helpers":1321,d3:169}],1325:[function(e,v,S){var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,u=e("../../components/colorscale/attributes"),c=e("../../plots/domain").attributes,t=e("../pie/attributes"),f=e("../sunburst/attributes"),n=e("./constants"),o=e("../../lib/extend").extendFlat;v.exports={labels:f.labels,parents:f.parents,values:f.values,branchvalues:f.branchvalues,count:f.count,level:f.level,maxdepth:f.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:o({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:f.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:f.marker.line,editType:"calc"},u("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:o({},t.textfont,{}),editType:"calc"},text:t.text,textinfo:f.textinfo,texttemplate:a({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:t.hovertext,hoverinfo:f.hoverinfo,hovertemplate:r({},{keys:n.eventDataKeys}),textfont:t.textfont,insidetextfont:t.insidetextfont,outsidetextfont:o({},t.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:t.sort,root:f.root,domain:c({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/domain":855,"../../plots/template_attributes":906,"../pie/attributes":1161,"../sunburst/attributes":1299,"./constants":1328}],1326:[function(e,v,S){var r=e("../../plots/plots");S.name="treemap",S.plot=function(a,u,c,t){r.plotBasePlot(S.name,a,u,c,t)},S.clean=function(a,u,c,t){r.cleanBasePlot(S.name,a,u,c,t)}},{"../../plots/plots":891}],1327:[function(e,v,S){var r=e("../sunburst/calc");S.calc=function(a,u){return r.calc(a,u)},S.crossTraceCalc=function(a){return r._runCrossTraceCalc("treemap",a)}},{"../sunburst/calc":1301}],1328:[function(e,v,S){v.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1329:[function(e,v,S){var r=e("../../lib"),a=e("./attributes"),u=e("../../components/color"),c=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText,f=e("../bar/constants").TEXTPAD,n=e("../../components/colorscale"),o=n.hasColorscale,l=n.handleDefaults;v.exports=function(i,s,p,d){function g(C,D){return r.coerce(i,s,a,C,D)}var b=g("labels"),m=g("parents");if(!b||!b.length||!m||!m.length){s.visible=!1;return}var x=g("values");x&&x.length?g("branchvalues"):g("count"),g("level"),g("maxdepth");var w=g("tiling.packing");w==="squarify"&&g("tiling.squarifyratio"),g("tiling.flip"),g("tiling.pad");var y=g("text");g("texttemplate"),s.texttemplate||g("textinfo",Array.isArray(y)?"text+label":"label"),g("hovertext"),g("hovertemplate");var T=g("pathbar.visible"),M="auto";t(i,s,d,g,M,{hasPathbar:T,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),g("textposition");var P=s.textposition.indexOf("bottom")!==-1,L=g("marker.line.width");L&&g("marker.line.color",d.paper_bgcolor);var I=g("marker.colors"),E=s._hasColorscale=o(i,"marker","colors")||(i.marker||{}).coloraxis;E?l(i,s,d,g,{prefix:"marker.",cLetter:"c"}):g("marker.depthfade",!(I||[]).length);var k=s.textfont.size*2;g("marker.pad.t",P?k/4:k),g("marker.pad.l",k/4),g("marker.pad.r",k/4),g("marker.pad.b",P?k:k/4),E&&l(i,s,d,g,{prefix:"marker.",cLetter:"c"}),s._hovered={marker:{line:{width:2,color:u.contrast(d.paper_bgcolor)}}},T&&(g("pathbar.thickness",s.pathbar.textfont.size+2*f),g("pathbar.side"),g("pathbar.edgeshape")),g("sort"),g("root.color"),c(s,d,g),s._length=null}},{"../../components/color":643,"../../components/colorscale":655,"../../lib":778,"../../plots/domain":855,"../bar/constants":923,"../bar/defaults":925,"./attributes":1325}],1330:[function(e,v,S){var r=e("d3"),a=e("../../lib"),u=e("../../components/drawing"),c=e("../../lib/svg_text_utils"),t=e("./partition"),f=e("./style").styleOne,n=e("./constants"),o=e("../sunburst/helpers"),l=e("../sunburst/fx"),h=!0;v.exports=function(s,p,d,g,b){var m=b.barDifY,x=b.width,w=b.height,y=b.viewX,T=b.viewY,M=b.pathSlice,P=b.toMoveInsideSlice,L=b.strTransform,I=b.hasTransition,E=b.handleSlicesExit,k=b.makeUpdateSliceInterpolator,C=b.makeUpdateTextInterpolator,D={},F=s._fullLayout,N=p[0],G=N.trace,U=N.hierarchy,X=x/G._entryDepth,z=o.listPath(d.data,"id"),B=t(U.copy(),[x,w],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();B=B.filter(function(V){var K=z.indexOf(V.data.id);return K===-1?!1:(V.x0=X*K,V.x1=X*(K+1),V.y0=m,V.y1=m+w,V.onPathbar=!0,!0)}),B.reverse(),g=g.data(B,o.getPtId),g.enter().append("g").classed("pathbar",!0),E(g,h,D,[x,w],M),g.order();var j=g;I&&(j=j.transition().each("end",function(){var V=r.select(this);o.setSliceCursor(V,s,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),j.each(function(V){V._hoverX=y(V.x1-Math.min(x,w)/2),V._hoverY=T(V.y1-w/2);var K=r.select(this),te=a.ensureSingle(K,"path","surface",function(Q){Q.style("pointer-events","all")});I?te.transition().attrTween("d",function(Q){var H=k(Q,h,D,[x,w]);return function(oe){return M(H(oe))}}):te.attr("d",M),K.call(l,d,s,p,{styleOne:f,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,s,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:s._transitioning}),te.call(f,V,G,{hovered:!1}),V._text=(o.getPtLabel(V)||"").split("<br>").join(" ")||"";var $=a.ensureSingle(K,"g","slicetext"),ie=a.ensureSingle($,"text","",function(Q){Q.attr("data-notex",1)}),se=a.ensureUniformFontSize(s,o.determineTextFont(G,V,F.font,{onPathbar:!0}));ie.text(V._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(u.font,se).call(c.convertToTspans,s),V.textBB=u.bBox(ie.node()),V.transform=P(V,{fontSize:se.size,onPathbar:!0}),V.transform.fontSize=se.size,I?ie.transition().attrTween("transform",function(Q){var H=C(Q,h,D,[x,w]);return function(oe){return L(H(oe))}}):ie.attr("transform",L(V))})}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../sunburst/fx":1304,"../sunburst/helpers":1305,"./constants":1328,"./partition":1335,"./style":1337,d3:169}],1331:[function(e,v,S){var r=e("d3"),a=e("../../lib"),u=e("../../components/drawing"),c=e("../../lib/svg_text_utils"),t=e("./partition"),f=e("./style").styleOne,n=e("./constants"),o=e("../sunburst/helpers"),l=e("../sunburst/fx"),h=e("../sunburst/plot").formatSliceLabel,i=!1;v.exports=function(p,d,g,b,m){var x=m.width,w=m.height,y=m.viewX,T=m.viewY,M=m.pathSlice,P=m.toMoveInsideSlice,L=m.strTransform,I=m.hasTransition,E=m.handleSlicesExit,k=m.makeUpdateSliceInterpolator,C=m.makeUpdateTextInterpolator,D=m.prevEntry,F={},N=p._fullLayout,G=d[0],U=G.trace,X=U.textposition.indexOf("left")!==-1,z=U.textposition.indexOf("right")!==-1,B=U.textposition.indexOf("bottom")!==-1,j=!B&&!U.marker.pad.t||B&&!U.marker.pad.b,V=t(g,[x,w],{packing:U.tiling.packing,squarifyratio:U.tiling.squarifyratio,flipX:U.tiling.flip.indexOf("x")>-1,flipY:U.tiling.flip.indexOf("y")>-1,pad:{inner:U.tiling.pad,top:U.marker.pad.t,left:U.marker.pad.l,right:U.marker.pad.r,bottom:U.marker.pad.b}}),K=V.descendants(),te=1/0,$=-1/0;K.forEach(function(oe){var re=oe.depth;re>=U._maxDepth?(oe.x0=oe.x1=(oe.x0+oe.x1)/2,oe.y0=oe.y1=(oe.y0+oe.y1)/2):(te=Math.min(te,re),$=Math.max($,re))}),b=b.data(K,o.getPtId),U._maxVisibleLayers=isFinite($)?$-te+1:0,b.enter().append("g").classed("slice",!0),E(b,i,F,[x,w],M),b.order();var ie=null;if(I&&D){var se=o.getPtId(D);b.each(function(oe){ie===null&&o.getPtId(oe)===se&&(ie={x0:oe.x0,x1:oe.x1,y0:oe.y0,y1:oe.y1})})}var Q=function(){return ie||{x0:0,x1:x,y0:0,y1:w}},H=b;return I&&(H=H.transition().each("end",function(){var oe=r.select(this);o.setSliceCursor(oe,p,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),H.each(function(oe){var re=o.isHeader(oe,U);oe._hoverX=y(oe.x1-U.marker.pad.r),oe._hoverY=T(B?oe.y1-U.marker.pad.b/2:oe.y0+U.marker.pad.t/2);var ee=r.select(this),ae=a.ensureSingle(ee,"path","surface",function(W){W.style("pointer-events","all")});I?ae.transition().attrTween("d",function(W){var ue=k(W,i,Q(),[x,w]);return function(me){return M(ue(me))}}):ae.attr("d",M),ee.call(l,g,p,d,{styleOne:f,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,p,{isTransitioning:p._transitioning}),ae.call(f,oe,U,{hovered:!1}),oe.x0===oe.x1||oe.y0===oe.y1?oe._text="":re?oe._text=j?"":o.getPtLabel(oe)||"":oe._text=h(oe,g,U,d,N)||"";var fe=a.ensureSingle(ee,"g","slicetext"),de=a.ensureSingle(fe,"text","",function(W){W.attr("data-notex",1)}),pe=a.ensureUniformFontSize(p,o.determineTextFont(U,oe,N.font));de.text(oe._text||" ").classed("slicetext",!0).attr("text-anchor",z?"end":X||re?"start":"middle").call(u.font,pe).call(c.convertToTspans,p),oe.textBB=u.bBox(de.node()),oe.transform=P(oe,{fontSize:pe.size,isHeader:re}),oe.transform.fontSize=pe.size,I?de.transition().attrTween("transform",function(W){var ue=C(W,i,Q(),[x,w]);return function(me){return L(ue(me))}}):de.attr("transform",L(oe))}),ie}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../sunburst/fx":1304,"../sunburst/helpers":1305,"../sunburst/plot":1309,"./constants":1328,"./partition":1335,"./style":1337,d3:169}],1332:[function(e,v,S){v.exports={moduleType:"trace",name:"treemap",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1205,"./attributes":1325,"./base_plot":1326,"./calc":1327,"./defaults":1329,"./layout_attributes":1333,"./layout_defaults":1334,"./plot":1336,"./style":1337}],1333:[function(e,v,S){v.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1334:[function(e,v,S){var r=e("../../lib"),a=e("./layout_attributes");v.exports=function(c,t){function f(n,o){return r.coerce(c,t,a,n,o)}f("treemapcolorway",t.colorway),f("extendtreemapcolors")}},{"../../lib":778,"./layout_attributes":1333}],1335:[function(e,v,S){var r=e("d3-hierarchy");v.exports=function(t,f,n){var o=n.flipX,l=n.flipY,h=n.packing==="dice-slice",i=n.pad[l?"bottom":"top"],s=n.pad[o?"right":"left"],p=n.pad[o?"left":"right"],d=n.pad[l?"top":"bottom"],g;h&&(g=s,s=i,i=g,g=p,p=d,d=g);var b=r.treemap().tile(a(n.packing,n.squarifyratio)).paddingInner(n.pad.inner).paddingLeft(s).paddingRight(p).paddingTop(i).paddingBottom(d).size(h?[f[1],f[0]]:f)(t);return(h||o||l)&&u(b,f,{swapXY:h,flipX:o,flipY:l}),b};function a(c,t){switch(c){case"squarify":return r.treemapSquarify.ratio(t);case"binary":return r.treemapBinary;case"dice":return r.treemapDice;case"slice":return r.treemapSlice;default:return r.treemapSliceDice}}function u(c,t,f){var n;f.swapXY&&(n=c.x0,c.x0=c.y0,c.y0=n,n=c.x1,c.x1=c.y1,c.y1=n),f.flipX&&(n=c.x0,c.x0=t[0]-c.x1,c.x1=t[0]-n),f.flipY&&(n=c.y0,c.y0=t[1]-c.y1,c.y1=t[1]-n);var o=c.children;if(o)for(var l=0;l<o.length;l++)u(o[l],t,f)}},{"d3-hierarchy":161}],1336:[function(e,v,S){var r=e("d3"),a=e("../sunburst/helpers"),u=e("../../lib"),c=e("../bar/constants").TEXTPAD,t=e("../bar/plot"),f=t.toMoveInsideBar,n=e("../bar/uniform_text"),o=n.recordMinTextSize,l=n.clearMinTextSize,h=e("../bar/style").resizeText,i=e("./constants"),s=e("./draw_descendants"),p=e("./draw_ancestors");v.exports=function(b,m,x,w){var y=b._fullLayout,T=y._treemaplayer,M,P,L=!x;if(l("treemap",y),M=T.selectAll("g.trace.treemap").data(m,function(E){return E[0].trace.uid}),M.enter().append("g").classed("trace",!0).classed("treemap",!0),M.order(),!y.uniformtext.mode&&a.hasTransition(x)){w&&(P=w());var I=r.transition().duration(x.duration).ease(x.easing).each("end",function(){P&&P()}).each("interrupt",function(){P&&P()});I.each(function(){T.selectAll("g.trace").each(function(E){g(b,E,this,x)})})}else M.each(function(E){g(b,E,this,x)}),y.uniformtext.mode&&h(b,y._treemaplayer.selectAll(".trace"),"treemap");L&&M.exit().remove()};function d(b){return a.isHierarchyRoot(b)?"":a.getPtId(b)}function g(b,m,x,w){var y=b._fullLayout,T=m[0],M=T.trace,P=T.hierarchy,L=a.findEntryWithLevel(P,M.level),I=r.select(x),E=I.selectAll("g.pathbar"),k=I.selectAll("g.slice");if(!L){E.remove(),k.remove();return}var C=a.isHierarchyRoot(L),D=!y.uniformtext.mode&&a.hasTransition(w),F=a.getMaxDepth(M),N=function(Ne){return Ne.data.depth-L.data.depth<F},G=y._size,U=M.domain,X=G.w*(U.x[1]-U.x[0]),z=G.h*(U.y[1]-U.y[0]),B=X,j=M.pathbar.thickness,V=M.marker.line.width+i.gapWithPathbar,K=M.pathbar.visible?M.pathbar.side.indexOf("bottom")>-1?z+V:-(j+V):0,te={x0:B,x1:B,y0:K,y1:K+j},$=function(Ne,ct,Mt){var Wt=M.tiling.pad,qt=function(Lt){return Lt-Wt<=ct.x0},zt=function(Lt){return Lt+Wt>=ct.x1},$t=function(Lt){return Lt-Wt<=ct.y0},rr=function(Lt){return Lt+Wt>=ct.y1};return{x0:qt(Ne.x0-Wt)?0:zt(Ne.x0-Wt)?Mt[0]:Ne.x0,x1:qt(Ne.x1+Wt)?0:zt(Ne.x1+Wt)?Mt[0]:Ne.x1,y0:$t(Ne.y0-Wt)?0:rr(Ne.y0-Wt)?Mt[1]:Ne.y0,y1:$t(Ne.y1+Wt)?0:rr(Ne.y1+Wt)?Mt[1]:Ne.y1}},ie=null,se={},Q={},H=null,oe=function(Ne,ct){return ct?se[d(Ne)]:Q[d(Ne)]},re=function(Ne,ct,Mt,Wt){if(ct)return se[d(P)]||te;var qt=Q[M.level]||Mt;return N(Ne)?$(Ne,qt,Wt):{}};T.hasMultipleRoots&&C&&F++,M._maxDepth=F,M._backgroundColor=y.paper_bgcolor,M._entryDepth=L.data.depth,M._atRootLevel=C;var ee=-X/2+G.l+G.w*(U.x[1]+U.x[0])/2,ae=-z/2+G.t+G.h*(1-(U.y[1]+U.y[0])/2),fe=function(Ne){return ee+Ne},de=function(Ne){return ae+Ne},pe=de(0),W=fe(0),ue=function(Ne){return W+Ne},me=function(Ne){return pe+Ne};function be(Ne,ct){return Ne+","+ct}var Me=ue(0),Pe=function(Ne){Ne.x=Math.max(Me,Ne.x)},Ge=M.pathbar.edgeshape,ze=function(Ne){var ct=ue(Math.max(Math.min(Ne.x0,Ne.x0),0)),Mt=ue(Math.min(Math.max(Ne.x1,Ne.x1),B)),Wt=me(Ne.y0),qt=me(Ne.y1),zt=j/2,$t={},rr={};$t.x=ct,rr.x=Mt,$t.y=rr.y=(Wt+qt)/2;var Lt={x:ct,y:Wt},Ct={x:Mt,y:Wt},dt={x:Mt,y:qt},lt={x:ct,y:qt};return Ge===">"?(Lt.x-=zt,Ct.x-=zt,dt.x-=zt,lt.x-=zt):Ge==="/"?(dt.x-=zt,lt.x-=zt,$t.x-=zt/2,rr.x-=zt/2):Ge==="\\"?(Lt.x-=zt,Ct.x-=zt,$t.x-=zt/2,rr.x-=zt/2):Ge==="<"&&($t.x-=zt,rr.x-=zt),Pe(Lt),Pe(lt),Pe($t),Pe(Ct),Pe(dt),Pe(rr),"M"+be(Lt.x,Lt.y)+"L"+be(Ct.x,Ct.y)+"L"+be(rr.x,rr.y)+"L"+be(dt.x,dt.y)+"L"+be(lt.x,lt.y)+"L"+be($t.x,$t.y)+"Z"},Qe=function(Ne){var ct=fe(Ne.x0),Mt=fe(Ne.x1),Wt=de(Ne.y0),qt=de(Ne.y1),zt=Mt-ct,$t=qt-Wt;if(!zt||!$t)return"";var rr=0,Lt=zt>2*rr&&$t>2*rr?rr:0,Ct=function(dt,lt){return Lt?"a"+be(Lt,Lt)+" 0 0 1 "+be(dt,lt):""};return"M"+be(ct,Wt+Lt)+Ct(Lt,-Lt)+"L"+be(Mt-Lt,Wt)+Ct(Lt,Lt)+"L"+be(Mt,qt-Lt)+Ct(-Lt,Lt)+"L"+be(ct+Lt,qt)+Ct(-Lt,-Lt)+"Z"},tt=function(Ne,ct){var Mt=Ne.x0,Wt=Ne.x1,qt=Ne.y0,zt=Ne.y1,$t=Ne.textBB,rr=function(He){return M.textposition.indexOf(He)!==-1},Lt=rr("bottom"),Ct=rr("top")||ct.isHeader&&!Lt,dt=Ct?"start":Lt?"end":"middle",lt=rr("right"),Te=rr("left")||ct.onPathbar,Le=Te?-1:lt?1:0,Ue=M.marker.pad;if(ct.isHeader){if(Mt+=Ue.l-c,Wt-=Ue.r-c,Mt>=Wt){var et=(Mt+Wt)/2;Mt=et,Wt=et}var ke;Lt?(ke=zt-Ue.b,qt<ke&&ke<zt&&(qt=ke)):(ke=qt+Ue.t,qt<ke&&ke<zt&&(zt=ke))}var Ie=f(Mt,Wt,qt,zt,$t,{isHorizontal:!1,constrained:!0,angle:0,anchor:dt,leftToRight:Le});return Ie.fontSize=ct.fontSize,Ie.targetX=fe(Ie.targetX),Ie.targetY=de(Ie.targetY),isNaN(Ie.targetX)||isNaN(Ie.targetY)?{}:(Mt!==Wt&&qt!==zt&&o(M.type,Ie,y),{scale:Ie.scale,rotate:Ie.rotate,textX:Ie.textX,textY:Ie.textY,anchorX:Ie.anchorX,anchorY:Ie.anchorY,targetX:Ie.targetX,targetY:Ie.targetY})},Ce=function(Ne,ct){for(var Mt,Wt=0,qt=Ne;!Mt&&Wt<F;)Wt++,qt=qt.parent,qt?Mt=oe(qt,ct):Wt=F;return Mt||{}},Ae=function(Ne,ct,Mt,Wt){var qt=oe(Ne,ct),zt;if(ct)zt=te;else{var $t=oe(L,ct);$t?zt=$(Ne,$t,Wt):zt={}}return r.interpolate(qt,zt)},Be=function(Ne,ct,Mt,Wt){var qt=oe(Ne,ct),zt;if(qt)zt=qt;else if(ct)zt=te;else if(ie)if(Ne.parent){var $t=H||Mt;$t&&!ct?zt=$(Ne,$t,Wt):(zt={},u.extendFlat(zt,Ce(Ne,ct)))}else zt=Ne;else zt={};return r.interpolate(zt,{x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1})},qe=function(Ne,ct,Mt,Wt){var qt=oe(Ne,ct),zt={},$t=re(Ne,ct,Mt,Wt);u.extendFlat(zt,{transform:tt({x0:$t.x0,x1:$t.x1,y0:$t.y0,y1:$t.y1,textBB:Ne.textBB,_text:Ne._text},{isHeader:a.isHeader(Ne,M)})}),qt?zt=qt:Ne.parent&&u.extendFlat(zt,Ce(Ne,ct));var rr=Ne.transform;return Ne.x0!==Ne.x1&&Ne.y0!==Ne.y1&&o(M.type,rr,y),r.interpolate(zt,{transform:{scale:rr.scale,rotate:rr.rotate,textX:rr.textX,textY:rr.textY,anchorX:rr.anchorX,anchorY:rr.anchorY,targetX:rr.targetX,targetY:rr.targetY}})},Tt=function(Ne,ct,Mt,Wt,qt){var zt=Wt[0],$t=Wt[1];D?Ne.exit().transition().each(function(){var rr=r.select(this),Lt=rr.select("path.surface");Lt.transition().attrTween("d",function(dt){var lt=Ae(dt,ct,Mt,[zt,$t]);return function(Te){return qt(lt(Te))}});var Ct=rr.select("g.slicetext");Ct.attr("opacity",0)}).remove():Ne.exit().remove()},At=function(Ne){var ct=Ne.transform;return Ne.x0!==Ne.x1&&Ne.y0!==Ne.y1&&o(M.type,ct,y),u.getTextTransform({textX:ct.textX,textY:ct.textY,anchorX:ct.anchorX,anchorY:ct.anchorY,targetX:ct.targetX,targetY:ct.targetY,scale:ct.scale,rotate:ct.rotate})};D&&(E.each(function(Ne){se[d(Ne)]={x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1},Ne.transform&&(se[d(Ne)].transform={textX:Ne.transform.textX,textY:Ne.transform.textY,anchorX:Ne.transform.anchorX,anchorY:Ne.transform.anchorY,targetX:Ne.transform.targetX,targetY:Ne.transform.targetY,scale:Ne.transform.scale,rotate:Ne.transform.rotate})}),k.each(function(Ne){Q[d(Ne)]={x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1},Ne.transform&&(Q[d(Ne)].transform={textX:Ne.transform.textX,textY:Ne.transform.textY,anchorX:Ne.transform.anchorX,anchorY:Ne.transform.anchorY,targetX:Ne.transform.targetX,targetY:Ne.transform.targetY,scale:Ne.transform.scale,rotate:Ne.transform.rotate}),!ie&&a.isEntry(Ne)&&(ie=Ne)})),H=s(b,m,L,k,{width:X,height:z,viewX:fe,viewY:de,pathSlice:Qe,toMoveInsideSlice:tt,prevEntry:ie,makeUpdateSliceInterpolator:Be,makeUpdateTextInterpolator:qe,handleSlicesExit:Tt,hasTransition:D,strTransform:At}),M.pathbar.visible?p(b,m,L,E,{barDifY:K,width:B,height:j,viewX:ue,viewY:me,pathSlice:ze,toMoveInsideSlice:tt,makeUpdateSliceInterpolator:Be,makeUpdateTextInterpolator:qe,handleSlicesExit:Tt,hasTransition:D,strTransform:At}):E.remove()}},{"../../lib":778,"../bar/constants":923,"../bar/plot":932,"../bar/style":935,"../bar/uniform_text":937,"../sunburst/helpers":1305,"./constants":1328,"./draw_ancestors":1330,"./draw_descendants":1331,d3:169}],1337:[function(e,v,S){var r=e("d3"),a=e("../../components/color"),u=e("../../lib"),c=e("../sunburst/helpers"),t=e("../bar/uniform_text").resizeText;function f(o){var l=o._fullLayout._treemaplayer.selectAll(".trace");t(o,l,"treemap"),l.each(function(h){var i=r.select(this),s=h[0],p=s.trace;i.style("opacity",p.opacity),i.selectAll("path.surface").each(function(d){r.select(this).call(n,d,p,{hovered:!1})})})}function n(o,l,h,i){var s=(i||{}).hovered,p=l.data.data,d=p.i,g,b,m=p.color,x=c.isHierarchyRoot(l),w=1;if(s)g=h._hovered.marker.line.color,b=h._hovered.marker.line.width;else if(x&&m===h.root.color)w=100,g="rgba(0,0,0,0)",b=0;else if(g=u.castOption(h,d,"marker.line.color")||a.defaultLine,b=u.castOption(h,d,"marker.line.width")||0,!h._hasColorscale&&!l.onPathbar){var y=h.marker.depthfade;if(y){var T=a.combine(a.addOpacity(h._backgroundColor,.75),m),M;if(y===!0){var P=c.getMaxDepth(h);isFinite(P)?c.isLeaf(l)?M=0:M=h._maxVisibleLayers-(l.data.depth-h._entryDepth):M=l.data.height+1}else M=l.data.depth-h._entryDepth,h._atRootLevel||M++;if(M>0)for(var L=0;L<M;L++){var I=.5*L/M;m=a.combine(a.addOpacity(T,I),m)}}}o.style("stroke-width",b).call(a.fill,m).call(a.stroke,g).style("opacity",w)}v.exports={style:f,styleOne:n}},{"../../components/color":643,"../../lib":778,"../bar/uniform_text":937,"../sunburst/helpers":1305,d3:169}],1338:[function(e,v,S){var r=e("../box/attributes"),a=e("../../lib/extend").extendFlat;v.exports={y:r.y,x:r.x,x0:r.x0,y0:r.y0,name:a({},r.name,{}),orientation:a({},r.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:r.fillcolor,points:a({},r.boxpoints,{}),jitter:a({},r.jitter,{}),pointpos:a({},r.pointpos,{}),width:a({},r.width,{}),marker:r.marker,text:r.text,hovertext:r.hovertext,hovertemplate:r.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":768,"../box/attributes":946}],1339:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../box/calc"),c=e("./helpers"),t=e("../../constants/numerical").BADNUM;v.exports=function(h,i){var s=u(h,i);if(s[0].t.empty)return s;for(var p=h._fullLayout,d=a.getFromId(h,i[i.orientation==="h"?"xaxis":"yaxis"]),g=1/0,b=-1/0,m=0,x=0,w=0;w<s.length;w++){var y=s[w],T=y.pts.map(c.extractVal),M=y.bandwidth=n(i,y,T),P=y.span=o(i,y,d,M);if(y.min===y.max&&M===0)P=y.span=[y.min,y.max],y.density=[{v:1,t:P[0]}],y.bandwidth=M,m=Math.max(m,1);else{var L=P[1]-P[0],I=Math.ceil(L/(M/3)),E=L/I;if(!isFinite(E)||!isFinite(I))return r.error("Something went wrong with computing the violin span"),s[0].t.empty=!0,s;var k=c.makeKDE(y,i,T);y.density=new Array(I);for(var C=0,D=P[0];D<P[1]+E/2;C++,D+=E){var F=k(D);y.density[C]={v:F,t:D},m=Math.max(m,F)}}x=Math.max(x,T.length),g=Math.min(g,P[0]),b=Math.max(b,P[1])}var N=a.findExtremes(d,[g,b],{padded:!0});if(i._extremes[d._id]=N,i.width)s[0].t.maxKDE=m;else{var G=p._violinScaleGroupStats,U=i.scalegroup,X=G[U];X?(X.maxKDE=Math.max(X.maxKDE,m),X.maxCount=Math.max(X.maxCount,x)):G[U]={maxKDE:m,maxCount:x}}return s[0].t.labels.kde=r._(h,"kde:"),s};function f(l,h,i){var s=Math.min(h,i/1.349);return 1.059*s*Math.pow(l,-.2)}function n(l,h,i){var s=h.max-h.min;if(!s)return l.bandwidth?l.bandwidth:0;if(l.bandwidth)return Math.max(l.bandwidth,s/1e4);var p=i.length,d=r.stdev(i,p-1,h.mean);return Math.max(f(p,d,h.q3-h.q1),s/100)}function o(l,h,i,s){var p=l.spanmode,d=l.span||[],g=[h.min,h.max],b=[h.min-2*s,h.max+2*s],m;function x(y){var T=d[y],M=i.type==="multicategory"?i.r2c(T):i.d2c(T,0,l[h.valLetter+"calendar"]);return M===t?b[y]:M}p==="soft"?m=b:p==="hard"?m=g:m=[x(0),x(1)];var w={type:"linear",range:m};return a.setConvert(w),w.cleanRange(),m}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axes":828,"../box/calc":947,"./helpers":1342}],1340:[function(e,v,S){var r=e("../box/cross_trace_calc").setPositionOffset,a=["v","h"];v.exports=function(c,t){for(var f=c.calcdata,n=t.xaxis,o=t.yaxis,l=0;l<a.length;l++){for(var h=a[l],i=h==="h"?o:n,s=[],p=0;p<f.length;p++){var d=f[p],g=d[0].t,b=d[0].trace;b.visible===!0&&b.type==="violin"&&!g.empty&&b.orientation===h&&b.xaxis===n._id&&b.yaxis===o._id&&s.push(p)}r("violin",c,s,i)}}},{"../box/cross_trace_calc":948}],1341:[function(e,v,S){var r=e("../../lib"),a=e("../../components/color"),u=e("../box/defaults"),c=e("./attributes");v.exports=function(f,n,o,l){function h(E,k){return r.coerce(f,n,c,E,k)}function i(E,k){return r.coerce2(f,n,c,E,k)}if(u.handleSampleDefaults(f,n,h,l),n.visible!==!1){h("bandwidth"),h("side");var s=h("width");s||(h("scalegroup",n.name),h("scalemode"));var p=h("span"),d;Array.isArray(p)&&(d="manual"),h("spanmode",d);var g=h("line.color",(f.marker||{}).color||o),b=h("line.width"),m=h("fillcolor",a.addOpacity(n.line.color,.5));u.handlePointsDefaults(f,n,h,{prefix:""});var x=i("box.width"),w=i("box.fillcolor",m),y=i("box.line.color",g),T=i("box.line.width",b),M=h("box.visible",Boolean(x||w||y||T));M||(n.box={visible:!1});var P=i("meanline.color",g),L=i("meanline.width",b),I=h("meanline.visible",Boolean(P||L));I||(n.meanline={visible:!1})}}},{"../../components/color":643,"../../lib":778,"../box/defaults":949,"./attributes":1338}],1342:[function(e,v,S){var r=e("../../lib"),a={gaussian:function(u){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*u*u)}};S.makeKDE=function(u,c,t){var f=t.length,n=a.gaussian,o=u.bandwidth,l=1/(f*o);return function(h){for(var i=0,s=0;s<f;s++)i+=n((h-t[s])/o);return l*i}},S.getPositionOnKdePath=function(u,c,t){var f,n;c.orientation==="h"?(f="y",n="x"):(f="x",n="y");var o=r.findPointOnPath(u.path,t,n,{pathLength:u.pathLength}),l=u.posCenterPx,h=o[f],i=c.side==="both"?2*l-h:l;return[h,i]},S.getKdeValue=function(u,c,t){var f=u.pts.map(S.extractVal),n=S.makeKDE(u,c,f);return n(t)/u.posDensityScale},S.extractVal=function(u){return u.v}},{"../../lib":778}],1343:[function(e,v,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../box/hover"),c=e("./helpers");v.exports=function(f,n,o,l,h){var i=f.cd,s=i[0].trace,p=s.hoveron,d=p.indexOf("violins")!==-1,g=p.indexOf("kde")!==-1,b=[],m,x;if(d||g){var w=u.hoverOnBoxes(f,n,o,l);if(g&&w.length>0){var y=f.xa,T=f.ya,M,P,L,I,E;s.orientation==="h"?(E=n,M="y",L=T,P="x",I=y):(E=o,M="x",L=y,P="y",I=T);var k=i[f.index];if(E>=k.span[0]&&E<=k.span[1]){var C=r.extendFlat({},f),D=I.c2p(E,!0),F=c.getKdeValue(k,s,E),N=c.getPositionOnKdePath(k,s,D),G=L._offset,U=L._length;C[M+"0"]=N[0],C[M+"1"]=N[1],C[P+"0"]=C[P+"1"]=D,C[P+"Label"]=P+": "+a.hoverLabelText(I,E)+", "+i[0].t.labels.kde+" "+F.toFixed(3),C.spikeDistance=w[0].spikeDistance;var X=M+"Spike";C[X]=w[0][X],w[0].spikeDistance=void 0,w[0][X]=void 0,C.hovertemplate=!1,b.push(C),x={stroke:f.color},x[M+"1"]=r.constrain(G+N[0],G,G+U),x[M+"2"]=r.constrain(G+N[1],G,G+U),x[P+"1"]=x[P+"2"]=I._offset+D}}d&&(b=b.concat(w))}p.indexOf("points")!==-1&&(m=u.hoverOnPoints(f,n,o));var z=h.selectAll(".violinline-"+s.uid).data(x?[0]:[]);return z.enter().append("line").classed("violinline-"+s.uid,!0).attr("stroke-width",1.5),z.exit().remove(),z.attr(x),l==="closest"?m?[m]:b:(m&&b.push(m),b)}},{"../../lib":778,"../../plots/cartesian/axes":828,"../box/hover":951,"./helpers":1342}],1344:[function(e,v,S){v.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../box/select"),moduleType:"trace",name:"violin",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"../box/defaults":949,"../box/select":956,"../scatter/style":1211,"./attributes":1338,"./calc":1339,"./cross_trace_calc":1340,"./defaults":1341,"./hover":1343,"./layout_attributes":1345,"./layout_defaults":1346,"./plot":1347,"./style":1348}],1345:[function(e,v,S){var r=e("../box/layout_attributes"),a=e("../../lib").extendFlat;v.exports={violinmode:a({},r.boxmode,{}),violingap:a({},r.boxgap,{}),violingroupgap:a({},r.boxgroupgap,{})}},{"../../lib":778,"../box/layout_attributes":953}],1346:[function(e,v,S){var r=e("../../lib"),a=e("./layout_attributes"),u=e("../box/layout_defaults");v.exports=function(t,f,n){function o(l,h){return r.coerce(t,f,a,l,h)}u._supply(t,f,n,o,"violin")}},{"../../lib":778,"../box/layout_defaults":954,"./layout_attributes":1345}],1347:[function(e,v,S){var r=e("d3"),a=e("../../lib"),u=e("../../components/drawing"),c=e("../box/plot"),t=e("../scatter/line_points"),f=e("./helpers");v.exports=function(o,l,h,i){var s=o._fullLayout,p=l.xaxis,d=l.yaxis;function g(b){var m=t(b,{xaxis:p,yaxis:d,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return u.smoothopen(m[0],1)}a.makeTraceGroups(i,h,"trace violins").each(function(b){var m=r.select(this),x=b[0],w=x.t,y=x.trace;if(y.visible!==!0||w.empty){m.remove();return}var T=w.bPos,M=w.bdPos,P=l[w.valLetter+"axis"],L=l[w.posLetter+"axis"],I=y.side==="both",E=I||y.side==="positive",k=I||y.side==="negative",C=m.selectAll("path.violin").data(a.identity);C.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),C.exit().remove(),C.each(function(B){var j=r.select(this),V=B.density,K=V.length,te=L.c2l(B.pos+T,!0),$=L.l2p(te),ie;if(y.width)ie=w.maxKDE/M;else{var se=s._violinScaleGroupStats[y.scalegroup];ie=y.scalemode==="count"?se.maxKDE/M*(se.maxCount/B.pts.length):se.maxKDE/M}var Q,H,oe,re,ee,ae,fe;if(E){for(ae=new Array(K),re=0;re<K;re++)fe=ae[re]={},fe[w.posLetter]=te+V[re].v/ie,fe[w.valLetter]=P.c2l(V[re].t,!0);Q=g(ae)}if(k){for(ae=new Array(K),ee=0,re=K-1;ee<K;ee++,re--)fe=ae[ee]={},fe[w.posLetter]=te-V[re].v/ie,fe[w.valLetter]=P.c2l(V[re].t,!0);H=g(ae)}if(I)oe=Q+"L"+H.substr(1)+"Z";else{var de=[$,P.c2p(V[0].t)],pe=[$,P.c2p(V[K-1].t)];y.orientation==="h"&&(de.reverse(),pe.reverse()),E?oe="M"+de+"L"+Q.substr(1)+"L"+pe:oe="M"+pe+"L"+H.substr(1)+"L"+de}j.attr("d",oe),B.posCenterPx=$,B.posDensityScale=ie*M,B.path=j.node(),B.pathLength=B.path.getTotalLength()/(I?2:1)});var D=y.box,F=D.width,N=(D.line||{}).width,G,U;I?(G=M*F,U=0):E?(G=[0,M*F/2],U=N*{x:1,y:-1}[w.posLetter]):(G=[M*F/2,0],U=N*{x:-1,y:1}[w.posLetter]),c.plotBoxAndWhiskers(m,{pos:L,val:P},y,{bPos:T,bdPos:G,bPosPxOffset:U}),c.plotBoxMean(m,{pos:L,val:P},y,{bPos:T,bdPos:G,bPosPxOffset:U});var X;!y.box.visible&&y.meanline.visible&&(X=a.identity);var z=m.selectAll("path.meanline").data(X||[]);z.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),z.exit().remove(),z.each(function(B){var j=P.c2p(B.mean,!0),V=f.getPositionOnKdePath(B,y,j);r.select(this).attr("d",y.orientation==="h"?"M"+j+","+V[0]+"V"+V[1]:"M"+V[0]+","+j+"H"+V[1])}),c.plotPoints(m,{x:p,y:d},y,w)})}},{"../../components/drawing":665,"../../lib":778,"../box/plot":955,"../scatter/line_points":1201,"./helpers":1342,d3:169}],1348:[function(e,v,S){var r=e("d3"),a=e("../../components/color"),u=e("../scatter/style").stylePoints;v.exports=function(t){var f=r.select(t).selectAll("g.trace.violins");f.style("opacity",function(n){return n[0].trace.opacity}),f.each(function(n){var o=n[0].trace,l=r.select(this),h=o.box||{},i=h.line||{},s=o.meanline||{},p=s.width;l.selectAll("path.violin").style("stroke-width",o.line.width+"px").call(a.stroke,o.line.color).call(a.fill,o.fillcolor),l.selectAll("path.box").style("stroke-width",i.width+"px").call(a.stroke,i.color).call(a.fill,h.fillcolor);var d={"stroke-width":p+"px","stroke-dasharray":2*p+"px,"+p+"px"};l.selectAll("path.mean").style(d).call(a.stroke,s.color),l.selectAll("path.meanline").style(d).call(a.stroke,s.color),u(l,o,t)})}},{"../../components/color":643,"../scatter/style":1211,d3:169}],1349:[function(e,v,S){var r=e("../../components/colorscale/attributes"),a=e("../isosurface/attributes"),u=e("../surface/attributes"),c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,f=e("../../plot_api/edit_types").overrideAll,n=v.exports=f(t({x:a.x,y:a.y,z:a.z,value:a.value,isomin:a.isomin,isomax:a.isomax,surface:a.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:a.slices,caps:a.caps,text:a.text,hovertext:a.hovertext,hovertemplate:a.hovertemplate},r("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:a.colorbar,opacity:a.opacity,opacityscale:u.opacityscale,lightposition:a.lightposition,lighting:a.lighting,flatshading:a.flatshading,contour:a.contour,hoverinfo:t({},c.hoverinfo),showlegend:t({},c.showlegend,{dflt:!1})}),"calc","nested");n.x.editType=n.y.editType=n.z.editType=n.value.editType="calc+clearAxisTypes",n.transforms=void 0},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../isosurface/attributes":1123,"../surface/attributes":1311}],1350:[function(e,v,S){var r=e("gl-mesh3d"),a=e("../../lib/gl_format_color").parseColorScale,u=e("../../lib/str2rgbarray"),c=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),f=e("../isosurface/convert").findNearestOnAxis,n=e("../isosurface/convert").generateIsoMeshes;function o(i,s,p){this.scene=i,this.uid=p,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var l=o.prototype;l.handlePick=function(i){if(i.object===this.mesh){var s=i.data.index,p=this.data._meshX[s],d=this.data._meshY[s],g=this.data._meshZ[s],b=this.data._Ys.length,m=this.data._Zs.length,x=f(p,this.data._Xs).id,w=f(d,this.data._Ys).id,y=f(g,this.data._Zs).id,T=i.index=y+m*w+m*b*x;i.traceCoordinate=[this.data._meshX[T],this.data._meshY[T],this.data._meshZ[T],this.data._value[T]];var M=this.data.hovertext||this.data.text;return Array.isArray(M)&&M[T]!==void 0?i.textLabel=M[T]:M&&(i.textLabel=M),!0}},l.update=function(i){var s=this.scene,p=s.fullSceneLayout;this.data=n(i);function d(w,y,T,M){return y.map(function(P){return w.d2l(P,0,M)*T})}var g=t(d(p.xaxis,i._meshX,s.dataScale[0],i.xcalendar),d(p.yaxis,i._meshY,s.dataScale[1],i.ycalendar),d(p.zaxis,i._meshZ,s.dataScale[2],i.zcalendar)),b=t(i._meshI,i._meshJ,i._meshK),m={positions:g,cells:b,lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,opacityscale:i.opacityscale,contourEnable:i.contour.show,contourColor:u(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},x=c(i);m.vertexIntensity=i._meshIntensity,m.vertexIntensityBounds=[x.min,x.max],m.colormap=a(i),this.mesh.update(m)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function h(i,s){var p=i.glplot.gl,d=r({gl:p}),g=new o(i,d,s.uid);return d._trace=g,g.update(s),i.glplot.add(d),g}v.exports=h},{"../../components/colorscale":655,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/gl3d/zip3":881,"../isosurface/convert":1125,"gl-mesh3d":309}],1351:[function(e,v,S){var r=e("../../lib"),a=e("./attributes"),u=e("../isosurface/defaults").supplyIsoDefaults,c=e("../surface/defaults").opacityscaleDefaults;v.exports=function(f,n,o,l){function h(i,s){return r.coerce(f,n,a,i,s)}u(f,n,o,l,h),c(f,n,l,h)}},{"../../lib":778,"../isosurface/defaults":1126,"../surface/defaults":1314,"./attributes":1349}],1352:[function(e,v,S){v.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"volume",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":870,"../isosurface/calc":1124,"./attributes":1349,"./convert":1350,"./defaults":1351}],1353:[function(e,v,S){var r=e("../bar/attributes"),a=e("../scatter/attributes").line,u=e("../../plots/attributes"),c=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,f=e("./constants"),n=e("../../lib/extend").extendFlat,o=e("../../components/color");function l(h){return{marker:{color:n({},r.marker.color,{arrayOk:!1,editType:"style"}),line:{color:n({},r.marker.line.color,{arrayOk:!1,editType:"style"}),width:n({},r.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}v.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,hovertext:r.hovertext,hovertemplate:c({},{keys:f.eventDataKeys}),hoverinfo:n({},u.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:t({editType:"plot"},{keys:f.eventDataKeys.concat(["label"])}),text:r.text,textposition:r.textposition,insidetextanchor:r.insidetextanchor,textangle:r.textangle,textfont:r.textfont,insidetextfont:r.insidetextfont,outsidetextfont:r.outsidetextfont,constraintext:r.constraintext,cliponaxis:r.cliponaxis,orientation:r.orientation,offset:r.offset,width:r.width,increasing:l(),decreasing:l(),totals:l(),connector:{line:{color:n({},a.color,{dflt:o.defaultLine}),width:n({},a.width,{editType:"plot"}),dash:a.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup}},{"../../components/color":643,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatter/attributes":1187,"./constants":1355}],1354:[function(e,v,S){var r=e("../../plots/cartesian/axes"),a=e("../../plots/cartesian/align_period"),u=e("../../lib").mergeArray,c=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;function f(o){return o==="a"||o==="absolute"}function n(o){return o==="t"||o==="total"}v.exports=function(l,h){var i=r.getFromId(l,h.xaxis||"x"),s=r.getFromId(l,h.yaxis||"y"),p,d,g,b;h.orientation==="h"?(p=i.makeCalcdata(h,"x"),g=s.makeCalcdata(h,"y"),d=a(h,s,"y",g),b=!!h.yperiodalignment):(p=s.makeCalcdata(h,"y"),g=i.makeCalcdata(h,"x"),d=a(h,i,"x",g),b=!!h.xperiodalignment);for(var m=Math.min(d.length,p.length),x=new Array(m),w=0,y,T=!1,M=0;M<m;M++){var P=p[M]||0,L=!1;(p[M]!==t||n(h.measure[M])||f(h.measure[M]))&&M+1<m&&(p[M+1]!==t||n(h.measure[M+1])||f(h.measure[M+1]))&&(L=!0);var I=x[M]={i:M,p:d[M],s:P,rawS:P,cNext:L};f(h.measure[M])?(w=I.s,I.isSum=!0,I.dir="totals",I.s=w):n(h.measure[M])?(I.isSum=!0,I.dir="totals",I.s=w):(I.isSum=!1,I.dir=I.rawS<0?"decreasing":"increasing",y=I.s,I.s=w+y,w+=y),I.dir==="totals"&&(T=!0),b&&(x[M].orig_p=g[M]),h.ids&&(I.id=String(h.ids[M])),I.v=(h.base||0)+w}return x.length&&(x[0].hasTotals=T),u(h.text,x,"tx"),u(h.hovertext,x,"htx"),c(x,h),x}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../scatter/calc_selection":1189}],1355:[function(e,v,S){v.exports={eventDataKeys:["initial","delta","final"]}},{}],1356:[function(e,v,S){var r=e("../bar/cross_trace_calc").setGroupPositions;v.exports=function(u,c){var t=u._fullLayout,f=u._fullData,n=u.calcdata,o=c.xaxis,l=c.yaxis,h=[],i=[],s=[],p,d;for(d=0;d<f.length;d++){var g=f[d];g.visible===!0&&g.xaxis===o._id&&g.yaxis===l._id&&g.type==="waterfall"&&(p=n[d],g.orientation==="h"?s.push(p):i.push(p),h.push(p))}var b={mode:t.waterfallmode,norm:t.waterfallnorm,gap:t.waterfallgap,groupgap:t.waterfallgroupgap};for(r(u,o,l,i,b),r(u,l,o,s,b),d=0;d<h.length;d++){p=h[d];for(var m=0;m<p.length;m++){var x=p[m];x.isSum===!1&&(x.s0+=m===0?0:p[m-1].s),m+1<p.length&&(p[m].nextP0=p[m+1].p0,p[m].nextS0=p[m+1].s0)}}}},{"../bar/cross_trace_calc":924}],1357:[function(e,v,S){var r=e("../../lib"),a=e("../bar/defaults").handleGroupingDefaults,u=e("../bar/defaults").handleText,c=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),f=e("./attributes"),n=e("../../components/color"),o=e("../../constants/delta.js"),l=o.INCREASING.COLOR,h=o.DECREASING.COLOR,i="#4499FF";function s(g,b,m){g(b+".marker.color",m),g(b+".marker.line.color",n.defaultLine),g(b+".marker.line.width")}function p(g,b,m,x){function w(L,I){return r.coerce(g,b,f,L,I)}var y=c(g,b,x,w);if(!y){b.visible=!1;return}t(g,b,x,w),w("measure"),w("orientation",b.x&&!b.y?"h":"v"),w("base"),w("offset"),w("width"),w("text"),w("hovertext"),w("hovertemplate");var T=w("textposition");u(g,b,x,w,T,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),b.textposition!=="none"&&(w("texttemplate"),b.texttemplate||w("textinfo")),s(w,"increasing",l),s(w,"decreasing",h),s(w,"totals",i);var M=w("connector.visible");if(M){w("connector.mode");var P=w("connector.line.width");P&&(w("connector.line.color"),w("connector.line.dash"))}}function d(g,b){var m,x;function w(T){return r.coerce(x._input,x,f,T)}if(b.waterfallmode==="group")for(var y=0;y<g.length;y++)x=g[y],m=x._input,a(m,x,b,w)}v.exports={supplyDefaults:p,crossTraceDefaults:d}},{"../../components/color":643,"../../constants/delta.js":747,"../../lib":778,"../bar/defaults":925,"../scatter/period_defaults":1207,"../scatter/xy_defaults":1214,"./attributes":1353}],1358:[function(e,v,S){v.exports=function(a,u){return a.x="xVal"in u?u.xVal:u.x,a.y="yVal"in u?u.yVal:u.y,"initial"in u&&(a.initial=u.initial),"delta"in u&&(a.delta=u.delta),"final"in u&&(a.final=u.final),u.xa&&(a.xaxis=u.xa),u.ya&&(a.yaxis=u.ya),a}},{}],1359:[function(e,v,S){var r=e("../../plots/cartesian/axes").hoverLabelText,a=e("../../components/color").opacity,u=e("../bar/hover").hoverOnBars,c=e("../../constants/delta.js"),t={increasing:c.INCREASING.SYMBOL,decreasing:c.DECREASING.SYMBOL};v.exports=function(o,l,h,i){var s=u(o,l,h,i);if(!s)return;var p=s.cd,d=p[0].trace,g=d.orientation==="h",b=g?o.xa:o.ya;function m(k){return r(b,k)}var x=s.index,w=p[x],y=w.isSum?w.b+w.s:w.rawS;if(!w.isSum){s.initial=w.b+w.s-y,s.delta=y,s.final=s.initial+s.delta;var T=m(Math.abs(s.delta));s.deltaLabel=y<0?"("+T+")":T,s.finalLabel=m(s.final),s.initialLabel=m(s.initial)}var M=w.hi||d.hoverinfo,P=[];if(M&&M!=="none"&&M!=="skip"){var L=M==="all",I=M.split("+"),E=function(k){return L||I.indexOf(k)!==-1};w.isSum||(E("final")&&(g?!E("x"):!E("y"))&&P.push(s.finalLabel),E("delta")&&(y<0?P.push(s.deltaLabel+" "+t.decreasing):P.push(s.deltaLabel+" "+t.increasing)),E("initial")&&P.push("Initial: "+s.initialLabel))}return P.length&&(s.extraText=P.join("<br>")),s.color=f(d,w),[s]};function f(n,o){var l=n[o.dir].marker,h=l.color,i=l.line.color,s=l.line.width;if(a(h))return h;if(a(i)&&s)return i}},{"../../components/color":643,"../../constants/delta.js":747,"../../plots/cartesian/axes":828,"../bar/hover":928}],1360:[function(e,v,S){v.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"../bar/select":933,"./attributes":1353,"./calc":1354,"./cross_trace_calc":1356,"./defaults":1357,"./event_data":1358,"./hover":1359,"./layout_attributes":1361,"./layout_defaults":1362,"./plot":1363,"./style":1364}],1361:[function(e,v,S){v.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1362:[function(e,v,S){var r=e("../../lib"),a=e("./layout_attributes");v.exports=function(u,c,t){var f=!1;function n(h,i){return r.coerce(u,c,a,h,i)}for(var o=0;o<t.length;o++){var l=t[o];if(l.visible&&l.type==="waterfall"){f=!0;break}}f&&(n("waterfallmode"),n("waterfallgap",.2),n("waterfallgroupgap"))}},{"../../lib":778,"./layout_attributes":1361}],1363:[function(e,v,S){var r=e("d3"),a=e("../../lib"),u=e("../../components/drawing"),c=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),f=e("../bar/uniform_text").clearMinTextSize;v.exports=function(h,i,s,p){var d=h._fullLayout;f("waterfall",d),t.plot(h,i,s,p,{mode:d.waterfallmode,norm:d.waterfallmode,gap:d.waterfallgap,groupgap:d.waterfallgroupgap}),n(h,i,s,p)};function n(l,h,i,s){var p=h.xaxis,d=h.yaxis;a.makeTraceGroups(s,i,"trace bars").each(function(g){var b=r.select(this),m=g[0].trace,x=a.ensureSingle(b,"g","lines");if(!m.connector||!m.connector.visible){x.remove();return}var w=m.orientation==="h",y=m.connector.mode,T=x.selectAll("g.line").data(a.identity);T.enter().append("g").classed("line",!0),T.exit().remove();var M=T.size();T.each(function(P,L){if(!(L!==M-1&&!P.cNext)){var I=o(P,p,d,w),E=I[0],k=I[1],C="";E[0]!==c&&k[0]!==c&&E[1]!==c&&k[1]!==c&&(y==="spanning"&&!P.isSum&&L>0&&(w?C+="M"+E[0]+","+k[1]+"V"+k[0]:C+="M"+E[1]+","+k[0]+"H"+E[0]),y!=="between"&&(P.isSum||L<M-1)&&(w?C+="M"+E[1]+","+k[0]+"V"+k[1]:C+="M"+E[0]+","+k[1]+"H"+E[1]),E[2]!==c&&k[2]!==c&&(w?C+="M"+E[1]+","+k[1]+"V"+k[2]:C+="M"+E[1]+","+k[1]+"H"+E[2])),C===""&&(C="M0,0Z"),a.ensureSingle(r.select(this),"path").attr("d",C).call(u.setClipUrl,h.layerClipId,l)}})})}function o(l,h,i,s){var p=[],d=[],g=s?h:i,b=s?i:h;return p[0]=g.c2p(l.s0,!0),d[0]=b.c2p(l.p0,!0),p[1]=g.c2p(l.s1,!0),d[1]=b.c2p(l.p1,!0),p[2]=g.c2p(l.nextS0,!0),d[2]=b.c2p(l.nextP0,!0),s?[p,d]:[d,p]}},{"../../components/drawing":665,"../../constants/numerical":753,"../../lib":778,"../bar/plot":932,"../bar/uniform_text":937,d3:169}],1364:[function(e,v,S){var r=e("d3"),a=e("../../components/drawing"),u=e("../../components/color"),c=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),f=e("../bar/uniform_text").resizeText,n=t.styleTextPoints;function o(l,h,i){var s=i||r.select(l).selectAll("g.waterfalllayer").selectAll("g.trace");f(l,s,"waterfall"),s.style("opacity",function(p){return p[0].trace.opacity}),s.each(function(p){var d=r.select(this),g=p[0].trace;d.selectAll(".point > path").each(function(b){if(!b.isBlank){var m=g[b.dir].marker;r.select(this).call(u.fill,m.color).call(u.stroke,m.line.color).call(a.dashLine,m.line.dash,m.line.width).style("opacity",g.selectedpoints&&!b.selected?c:1)}}),n(d,g,l),d.selectAll(".lines").each(function(){var b=g.connector.line;a.lineGroupStyle(r.select(this).selectAll("path"),b.width,b.color,b.dash)})})}v.exports={style:o}},{"../../components/color":643,"../../components/drawing":665,"../../constants/interactions":752,"../bar/style":935,"../bar/uniform_text":937,d3:169}],1365:[function(e,v,S){var r=e("../plots/cartesian/axes"),a=e("../lib"),u=e("../plot_api/plot_schema"),c=e("./helpers").pointsAccessorFunction,t=e("../constants/numerical").BADNUM;S.moduleType="transform",S.name="aggregate";var f=S.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},n=f.aggregations;S.supplyDefaults=function(p,d){var g={},b;function m(D,F){return a.coerce(p,g,f,D,F)}var x=m("enabled");if(!x)return g;var w=u.findArrayAttributes(d),y={};for(b=0;b<w.length;b++)y[w[b]]=1;var T=m("groups");if(!Array.isArray(T)){if(!y[T])return g.enabled=!1,g;y[T]=0}var M=p.aggregations||[],P=g.aggregations=new Array(M.length),L;function I(D,F){return a.coerce(M[b],L,n,D,F)}for(b=0;b<M.length;b++){L={_index:b};var E=I("target"),k=I("func"),C=I("enabled");C&&E&&(y[E]||k==="count"&&y[E]===void 0)?(k==="stddev"&&I("funcmode"),y[E]=0,P[b]=L):P[b]={enabled:!1,_index:b}}for(b=0;b<w.length;b++)y[w[b]]&&P.push({target:w[b],func:n.func.dflt,enabled:!0,_index:-1});return g},S.calcTransform=function(p,d,g){if(!!g.enabled){var b=g.groups,m=a.getTargetArray(d,{target:b});if(!!m){var x,w,y,T,M={},P={},L=[],I=c(d.transforms,g),E=m.length;for(d._length&&(E=Math.min(E,d._length)),x=0;x<E;x++)w=m[x],y=M[w],y===void 0?(M[w]=L.length,T=[x],L.push(T),P[M[w]]=I(x)):(L[y].push(x),P[M[w]]=(P[M[w]]||[]).concat(I(x)));g._indexToPoints=P;var k=g.aggregations;for(x=0;x<k.length;x++)o(p,d,L,k[x]);typeof b=="string"&&o(p,d,L,{target:b,func:"first",enabled:!0}),d._length=L.length}}};function o(p,d,g,b){if(!!b.enabled){for(var m=b.target,x=a.nestedProperty(d,m),w=x.get(),y=r.getDataConversions(p,d,m,w),T=l(b,y),M=new Array(g.length),P=0;P<g.length;P++)M[P]=T(w,g[P]);x.set(M),b.func==="count"&&a.pushUnique(d._arrayAttrs,m)}}function l(p,d){var g=p.func,b=d.d2c,m=d.c2d;switch(g){case"count":return h;case"first":return i;case"last":return s;case"sum":return function(x,w){for(var y=0,T=0;T<w.length;T++){var M=b(x[w[T]]);M!==t&&(y+=M)}return m(y)};case"avg":return function(x,w){for(var y=0,T=0,M=0;M<w.length;M++){var P=b(x[w[M]]);P!==t&&(y+=P,T++)}return T?m(y/T):t};case"min":return function(x,w){for(var y=1/0,T=0;T<w.length;T++){var M=b(x[w[T]]);M!==t&&(y=Math.min(y,M))}return y===1/0?t:m(y)};case"max":return function(x,w){for(var y=-1/0,T=0;T<w.length;T++){var M=b(x[w[T]]);M!==t&&(y=Math.max(y,M))}return y===-1/0?t:m(y)};case"range":return function(x,w){for(var y=1/0,T=-1/0,M=0;M<w.length;M++){var P=b(x[w[M]]);P!==t&&(y=Math.min(y,P),T=Math.max(T,P))}return T===-1/0||y===1/0?t:m(T-y)};case"change":return function(x,w){var y=b(x[w[0]]),T=b(x[w[w.length-1]]);return y===t||T===t?t:m(T-y)};case"median":return function(x,w){for(var y=[],T=0;T<w.length;T++){var M=b(x[w[T]]);M!==t&&y.push(M)}if(!y.length)return t;y.sort(a.sorterAsc);var P=(y.length-1)/2;return m((y[Math.floor(P)]+y[Math.ceil(P)])/2)};case"mode":return function(x,w){for(var y={},T=0,M=t,P=0;P<w.length;P++){var L=b(x[w[P]]);if(L!==t){var I=y[L]=(y[L]||0)+1;I>T&&(T=I,M=L)}}return T?m(M):t};case"rms":return function(x,w){for(var y=0,T=0,M=0;M<w.length;M++){var P=b(x[w[M]]);P!==t&&(y+=P*P,T++)}return T?m(Math.sqrt(y/T)):t};case"stddev":return function(x,w){var y=0,T=0,M=1,P=t,L;for(L=0;L<w.length&&P===t;L++)P=b(x[w[L]]);if(P===t)return t;for(;L<w.length;L++){var I=b(x[w[L]]);if(I!==t){var E=I-P;y+=E,T+=E*E,M++}}var k=p.funcmode==="sample"?M-1:M;return k?Math.sqrt((T-y*y/M)/k):0}}}function h(p,d){return d.length}function i(p,d){return p[d[0]]}function s(p,d){return p[d[d.length-1]]}},{"../constants/numerical":753,"../lib":778,"../plot_api/plot_schema":816,"../plots/cartesian/axes":828,"./helpers":1368}],1366:[function(e,v,S){var r=e("../lib"),a=e("../registry"),u=e("../plots/cartesian/axes"),c=e("./helpers").pointsAccessorFunction,t=e("../constants/filter_ops"),f=t.COMPARISON_OPS,n=t.INTERVAL_OPS,o=t.SET_OPS;S.moduleType="transform",S.name="filter",S.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(f).concat(n).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},S.supplyDefaults=function(h){var i={};function s(b,m){return r.coerce(h,i,S.attributes,b,m)}var p=s("enabled");if(p){var d=s("target");if(r.isArrayOrTypedArray(d)&&d.length===0)return i.enabled=!1,i;s("preservegaps"),s("operation"),s("value");var g=a.getComponentMethod("calendars","handleDefaults");g(h,i,"valuecalendar",null),g(h,i,"targetcalendar",null)}return i},S.calcTransform=function(h,i,s){if(!s.enabled)return;var p=r.getTargetArray(i,s);if(!p)return;var d=s.target,g=p.length;i._length&&(g=Math.min(g,i._length));var b=s.targetcalendar,m=i._arrayAttrs,x=s.preservegaps;if(typeof d=="string"){var w=r.nestedProperty(i,d+"calendar").get();w&&(b=w)}var y=u.getDataToCoordFunc(h,i,d,p),T=l(s,y,b),M={},P={},L=0;function I(N,G){for(var U=0;U<m.length;U++){var X=r.nestedProperty(i,m[U]);N(X,G)}}var E,k;x?(E=function(N){M[N.astr]=r.extendDeep([],N.get()),N.set(new Array(g))},k=function(N,G){var U=M[N.astr][G];N.get()[G]=U}):(E=function(N){M[N.astr]=r.extendDeep([],N.get()),N.set([])},k=function(N,G){var U=M[N.astr][G];N.get().push(U)}),I(E);for(var C=c(i.transforms,s),D=0;D<g;D++){var F=T(p[D]);F?(I(k,D),P[L++]=C(D)):x&&L++}s._indexToPoints=P,i._length=L};function l(h,i,s){var p=h.operation,d=h.value,g=Array.isArray(d);function b(y){return y.indexOf(p)!==-1}var m=function(y){return i(y,0,h.valuecalendar)},x=function(y){return i(y,0,s)},w;switch(b(f)?w=m(g?d[0]:d):b(n)?w=g?[m(d[0]),m(d[1])]:[m(d),m(d)]:b(o)&&(w=g?d.map(m):[m(d)]),p){case"=":return function(y){return x(y)===w};case"!=":return function(y){return x(y)!==w};case"<":return function(y){return x(y)<w};case"<=":return function(y){return x(y)<=w};case">":return function(y){return x(y)>w};case">=":return function(y){return x(y)>=w};case"[]":return function(y){var T=x(y);return T>=w[0]&&T<=w[1]};case"()":return function(y){var T=x(y);return T>w[0]&&T<w[1]};case"[)":return function(y){var T=x(y);return T>=w[0]&&T<w[1]};case"(]":return function(y){var T=x(y);return T>w[0]&&T<=w[1]};case"][":return function(y){var T=x(y);return T<=w[0]||T>=w[1]};case")(":return function(y){var T=x(y);return T<w[0]||T>w[1]};case"](":return function(y){var T=x(y);return T<=w[0]||T>w[1]};case")[":return function(y){var T=x(y);return T<w[0]||T>=w[1]};case"{}":return function(y){return w.indexOf(x(y))!==-1};case"}{":return function(y){return w.indexOf(x(y))===-1}}}},{"../constants/filter_ops":749,"../lib":778,"../plots/cartesian/axes":828,"../registry":911,"./helpers":1368}],1367:[function(e,v,S){var r=e("../lib"),a=e("../plot_api/plot_schema"),u=e("../plots/plots"),c=e("./helpers").pointsAccessorFunction;S.moduleType="transform",S.name="groupby",S.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},S.supplyDefaults=function(f,n,o){var l,h={};function i(m,x){return r.coerce(f,h,S.attributes,m,x)}var s=i("enabled");if(!s)return h;i("groups"),i("nameformat",o._dataLength>1?"%{group} (%{trace})":"%{group}");var p=f.styles,d=h.styles=[];if(p)for(l=0;l<p.length;l++){var g=d[l]={};r.coerce(p[l],d[l],S.attributes.styles,"target");var b=r.coerce(p[l],d[l],S.attributes.styles,"value");r.isPlainObject(b)?g.value=r.extendDeep({},b):b&&delete g.value}return h},S.transform=function(f,n){var o,l,h,i=[];for(l=0;l<f.length;l++)for(o=t(f[l],n),h=0;h<o.length;h++)i.push(o[h]);return i};function t(f,n){var o,l,h,i,s,p,d,g,b,m,x=n.transform,w=n.transformIndex,y=f.transforms[w].groups,T=c(f.transforms,x);if(!r.isArrayOrTypedArray(y)||y.length===0)return[f];var M=r.filterUnique(y),P=new Array(M.length),L=y.length,I=a.findArrayAttributes(f),E=x.styles||[],k={};for(o=0;o<E.length;o++)k[E[o].target]=E[o].value;x.styles&&(m=r.keyedContainer(x,"styles","target","value.name"));var C={},D={};for(o=0;o<M.length;o++){p=M[o],C[p]=o,D[p]=0,d=P[o]=r.extendDeepNoArrays({},f),d._group=p,d.transforms[w]._indexToPoints={};var F=null;for(m&&(F=m.get(p)),F||F===""?d.name=F:d.name=r.templateString(x.nameformat,{trace:f.name,group:p}),g=d.transforms,d.transforms=[],l=0;l<g.length;l++)d.transforms[l]=r.extendDeepNoArrays({},g[l]);for(l=0;l<I.length;l++)r.nestedProperty(d,I[l]).set([])}for(h=0;h<I.length;h++){for(i=I[h],l=0,b=[];l<M.length;l++)b[l]=r.nestedProperty(P[l],i).get();for(s=r.nestedProperty(f,i).get(),l=0;l<L;l++)b[C[y[l]]].push(s[l])}for(l=0;l<L;l++){d=P[C[y[l]]];var N=d.transforms[w]._indexToPoints;N[D[y[l]]]=T(l),D[y[l]]++}for(o=0;o<M.length;o++)p=M[o],d=P[o],u.clearExpandedTraceDefaultColors(d),d=r.extendDeepNoArrays(d,k[p]||{});return P}},{"../lib":778,"../plot_api/plot_schema":816,"../plots/plots":891,"./helpers":1368}],1368:[function(e,v,S){S.pointsAccessorFunction=function(r,a){for(var u,c,t=0;t<r.length&&(u=r[t],u!==a);t++)!u._indexToPoints||u.enabled===!1||(c=u._indexToPoints);var f=c?function(n){return c[n]}:function(n){return[n]};return f}},{}],1369:[function(e,v,S){var r=e("../lib"),a=e("../plots/cartesian/axes"),u=e("./helpers").pointsAccessorFunction,c=e("../constants/numerical").BADNUM;S.moduleType="transform",S.name="sort",S.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},S.supplyDefaults=function(n){var o={};function l(i,s){return r.coerce(n,o,S.attributes,i,s)}var h=l("enabled");return h&&(l("target"),l("order")),o},S.calcTransform=function(n,o,l){if(!!l.enabled){var h=r.getTargetArray(o,l);if(!!h){var i=l.target,s=h.length;o._length&&(s=Math.min(s,o._length));var p=o._arrayAttrs,d=a.getDataToCoordFunc(n,o,i,h),g=t(l,h,d,s),b=u(o.transforms,l),m={},x,w;for(x=0;x<p.length;x++){var y=r.nestedProperty(o,p[x]),T=y.get(),M=new Array(s);for(w=0;w<s;w++)M[w]=T[g[w]];y.set(M)}for(w=0;w<s;w++)m[w]=b(g[w]);l._indexToPoints=m,o._length=s}}};function t(n,o,l,h){var i=new Array(h),s=new Array(h),p;for(p=0;p<h;p++)i[p]={v:o[p],i:p};for(i.sort(f(n,l)),p=0;p<h;p++)s[p]=i[p].i;return s}function f(n,o){switch(n.order){case"ascending":return function(l,h){var i=o(l.v),s=o(h.v);return i===c?1:s===c?-1:i-s};case"descending":return function(l,h){var i=o(l.v),s=o(h.v);return i===c?1:s===c?-1:s-i}}}},{"../constants/numerical":753,"../lib":778,"../plots/cartesian/axes":828,"./helpers":1368}],1370:[function(e,v,S){S.version="1.58.4"},{}]},{},[26])(26)})})(F4);(function(A){Object.defineProperty(A,"__esModule",{value:!0}),A.default=void 0;var R=v(R4),e=v(F4.exports);function v(a){return a&&a.__esModule?a:{default:a}}var S=(0,R.default)(e.default),r=S;A.default=r})(D4);const $k=nw(D4);function Zd(A){return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},Zd(A)}function Qk(A,R){if(Zd(A)!=="object"||A===null)return A;var e=A[Symbol.toPrimitive];if(e!==void 0){var v=e.call(A,R||"default");if(Zd(v)!=="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(R==="string"?String:Number)(A)}function N4(A){var R=Qk(A,"string");return Zd(R)==="symbol"?R:String(R)}function Af(A,R,e){return R=N4(R),R in A?Object.defineProperty(A,R,{value:e,enumerable:!0,configurable:!0,writable:!0}):A[R]=e,A}function ub(A,R){(R==null||R>A.length)&&(R=A.length);for(var e=0,v=new Array(R);e<R;e++)v[e]=A[e];return v}function qk(A){if(Array.isArray(A))return ub(A)}function e8(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}function B4(A,R){if(!!A){if(typeof A=="string")return ub(A,R);var e=Object.prototype.toString.call(A).slice(8,-1);if(e==="Object"&&A.constructor&&(e=A.constructor.name),e==="Map"||e==="Set")return Array.from(A);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ub(A,R)}}function t8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kh(A){return qk(A)||e8(A)||B4(A)||t8()}function r8(A){if(Array.isArray(A))return A}function n8(A,R){var e=A==null?null:typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(e!=null){var v,S,r,a,u=[],c=!0,t=!1;try{if(r=(e=e.call(A)).next,R===0){if(Object(e)!==e)return;c=!1}else for(;!(c=(v=r.call(e)).done)&&(u.push(v.value),u.length!==R);c=!0);}catch(f){t=!0,S=f}finally{try{if(!c&&e.return!=null&&(a=e.return(),Object(a)!==a))return}finally{if(t)throw S}}return u}}function a8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gc(A,R){return r8(A)||n8(A,R)||B4(A,R)||a8()}var U4={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(A){(function(){var R={}.hasOwnProperty;function e(){for(var v=[],S=0;S<arguments.length;S++){var r=arguments[S];if(!!r){var a=typeof r;if(a==="string"||a==="number")v.push(r);else if(Array.isArray(r)){if(r.length){var u=e.apply(null,r);u&&v.push(u)}}else if(a==="object"){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){v.push(r.toString());continue}for(var c in r)R.call(r,c)&&r[c]&&v.push(c)}}}return v.join(" ")}A.exports?(e.default=e,A.exports=e):window.classNames=e})()})(U4);const Nm=U4.exports;var i8=function(R,e,v,S){var r=v?v.call(S,R,e):void 0;if(r!==void 0)return!!r;if(R===e)return!0;if(typeof R!="object"||!R||typeof e!="object"||!e)return!1;var a=Object.keys(R),u=Object.keys(e);if(a.length!==u.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(e),t=0;t<a.length;t++){var f=a[t];if(!c(f))return!1;var n=R[f],o=e[f];if(r=v?v.call(S,n,o,f):void 0,r===!1||r===void 0&&n!==o)return!1}return!0};function f3(A){var R=na.exports.useRef();R.current=A;var e=na.exports.useCallback(function(){for(var v,S=arguments.length,r=new Array(S),a=0;a<S;a++)r[a]=arguments[a];return(v=R.current)===null||v===void 0?void 0:v.call.apply(v,[R].concat(r))},[]);return e}function o8(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var h3=o8()?na.exports.useLayoutEffect:na.exports.useEffect,p3=function(R,e){var v=na.exports.useRef(!0);h3(function(){if(!v.current)return R()},e),h3(function(){return v.current=!1,function(){v.current=!0}},[])};function d3(A){var R=na.exports.useRef(!1),e=na.exports.useState(A),v=Gc(e,2),S=v[0],r=v[1];na.exports.useEffect(function(){return R.current=!1,function(){R.current=!0}},[]);function a(u,c){c&&R.current||r(u)}return[S,a]}function Wy(A){return A!==void 0}function s8(A,R){var e=R||{},v=e.defaultValue,S=e.value,r=e.onChange,a=e.postState,u=d3(function(){return Wy(S)?S:Wy(v)?typeof v=="function"?v():v:typeof A=="function"?A():A}),c=Gc(u,2),t=c[0],f=c[1],n=S!==void 0?S:t,o=a?a(n):n,l=f3(r),h=d3([n]),i=Gc(h,2),s=i[0],p=i[1];p3(function(){var g=s[0];t!==g&&l(t,g)},[s]),p3(function(){Wy(S)||f(S)},[S]);var d=f3(function(g,b){f(g,b),p([n],b)});return[o,d]}function oo(){return oo=Object.assign?Object.assign.bind():function(A){for(var R=1;R<arguments.length;R++){var e=arguments[R];for(var v in e)Object.prototype.hasOwnProperty.call(e,v)&&(A[v]=e[v])}return A},oo.apply(this,arguments)}function k2(A,R){if(A==null)return{};var e={},v=Object.keys(A),S,r;for(r=0;r<v.length;r++)S=v[r],!(R.indexOf(S)>=0)&&(e[S]=A[S]);return e}function Xu(A,R){if(A==null)return{};var e=k2(A,R),v,S;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(A);for(S=0;S<r.length;S++)v=r[S],!(R.indexOf(v)>=0)&&(!Object.prototype.propertyIsEnumerable.call(A,v)||(e[v]=A[v]))}return e}function v3(A,R){var e=Object.keys(A);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(A);R&&(v=v.filter(function(S){return Object.getOwnPropertyDescriptor(A,S).enumerable})),e.push.apply(e,v)}return e}function Sh(A){for(var R=1;R<arguments.length;R++){var e=arguments[R]!=null?arguments[R]:{};R%2?v3(Object(e),!0).forEach(function(v){Af(A,v,e[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(e)):v3(Object(e)).forEach(function(v){Object.defineProperty(A,v,Object.getOwnPropertyDescriptor(e,v))})}return A}var Di={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(R){var e=R.keyCode;if(R.altKey&&!R.ctrlKey||R.metaKey||e>=Di.F1&&e<=Di.F12)return!1;switch(e){case Di.ALT:case Di.CAPS_LOCK:case Di.CONTEXT_MENU:case Di.CTRL:case Di.DOWN:case Di.END:case Di.ESC:case Di.HOME:case Di.INSERT:case Di.LEFT:case Di.MAC_FF_META:case Di.META:case Di.NUMLOCK:case Di.NUM_CENTER:case Di.PAGE_DOWN:case Di.PAGE_UP:case Di.PAUSE:case Di.PRINT_SCREEN:case Di.RIGHT:case Di.SHIFT:case Di.UP:case Di.WIN_KEY:case Di.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(R){if(R>=Di.ZERO&&R<=Di.NINE||R>=Di.NUM_ZERO&&R<=Di.NUM_MULTIPLY||R>=Di.A&&R<=Di.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&R===0)return!0;switch(R){case Di.SPACE:case Di.QUESTION_MARK:case Di.NUM_PLUS:case Di.NUM_MINUS:case Di.NUM_PERIOD:case Di.NUM_DIVISION:case Di.SEMICOLON:case Di.DASH:case Di.EQUALS:case Di.COMMA:case Di.PERIOD:case Di.SLASH:case Di.APOSTROPHE:case Di.SINGLE_QUOTE:case Di.OPEN_SQUARE_BRACKET:case Di.BACKSLASH:case Di.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Qd=na.exports.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0});function cb(A,R,e){return(A-R)/(e-R)}function S2(A,R,e,v){var S=cb(R,e,v),r={};switch(A){case"rtl":r.right="".concat(S*100,"%"),r.transform="translateX(50%)";break;case"btt":r.bottom="".concat(S*100,"%"),r.transform="translateY(50%)";break;case"ttb":r.top="".concat(S*100,"%"),r.transform="translateY(-50%)";break;default:r.left="".concat(S*100,"%"),r.transform="translateX(-50%)";break}return r}function $v(A,R){return Array.isArray(A)?A[R]:A}var H1={exports:{}},j1={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l8=na.exports,u8=Symbol.for("react.element"),c8=Symbol.for("react.fragment"),f8=Object.prototype.hasOwnProperty,h8=l8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p8={key:!0,ref:!0,__self:!0,__source:!0};function V4(A,R,e){var v,S={},r=null,a=null;e!==void 0&&(r=""+e),R.key!==void 0&&(r=""+R.key),R.ref!==void 0&&(a=R.ref);for(v in R)f8.call(R,v)&&!p8.hasOwnProperty(v)&&(S[v]=R[v]);if(A&&A.defaultProps)for(v in R=A.defaultProps,R)S[v]===void 0&&(S[v]=R[v]);return{$$typeof:u8,type:A,key:r,ref:a,props:S,_owner:h8.current}}j1.Fragment=c8;j1.jsx=V4;j1.jsxs=V4;(function(A){A.exports=j1})(H1);const d8=H1.exports.Fragment,On=H1.exports.jsx,Bo=H1.exports.jsxs;var v8=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"],m8=na.exports.forwardRef(function(A,R){var e,v,S=A.prefixCls,r=A.value,a=A.valueIndex,u=A.onStartMove,c=A.style,t=A.render,f=A.dragging,n=A.onOffsetChange,o=Xu(A,v8),l=na.exports.useContext(Qd),h=l.min,i=l.max,s=l.direction,p=l.disabled,d=l.keyboard,g=l.range,b=l.tabIndex,m=l.ariaLabelForHandle,x=l.ariaLabelledByForHandle,w=l.ariaValueTextFormatterForHandle,y="".concat(S,"-handle"),T=function(E){p||u(E,a)},M=function(E){if(!p&&d){var k=null;switch(E.which||E.keyCode){case Di.LEFT:k=s==="ltr"||s==="btt"?-1:1;break;case Di.RIGHT:k=s==="ltr"||s==="btt"?1:-1;break;case Di.UP:k=s!=="ttb"?1:-1;break;case Di.DOWN:k=s!=="ttb"?-1:1;break;case Di.HOME:k="min";break;case Di.END:k="max";break;case Di.PAGE_UP:k=2;break;case Di.PAGE_DOWN:k=-2;break}k!==null&&(E.preventDefault(),n(k,a))}},P=S2(s,r,h,i),L=On("div",{ref:R,className:Nm(y,(e={},Af(e,"".concat(y,"-").concat(a+1),g),Af(e,"".concat(y,"-dragging"),f),e)),style:Sh(Sh({},P),c),onMouseDown:T,onTouchStart:T,onKeyDown:M,tabIndex:p?null:$v(b,a),role:"slider","aria-valuemin":h,"aria-valuemax":i,"aria-valuenow":r,"aria-disabled":p,"aria-label":$v(m,a),"aria-labelledby":$v(x,a),"aria-valuetext":(v=$v(w,a))===null||v===void 0?void 0:v(r),...o});return t&&(L=t(L,{index:a,prefixCls:S,value:r,dragging:f})),L}),g8=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],y8=na.exports.forwardRef(function(A,R){var e=A.prefixCls,v=A.style,S=A.onStartMove,r=A.onOffsetChange,a=A.values,u=A.handleRender,c=A.draggingIndex,t=Xu(A,g8),f=na.exports.useRef({});return na.exports.useImperativeHandle(R,function(){return{focus:function(o){var l;(l=f.current[o])===null||l===void 0||l.focus()}}}),On(d8,{children:a.map(function(n,o){return On(m8,{ref:function(h){h?f.current[o]=h:delete f.current[o]},dragging:c===o,prefixCls:e,style:$v(v,o),value:n,valueIndex:o,onStartMove:S,onOffsetChange:r,render:u,...t},o)})})});function m3(A){var R="touches"in A?A.touches[0]:A;return{pageX:R.pageX,pageY:R.pageY}}function x8(A,R,e,v,S,r,a,u,c){var t=na.exports.useState(null),f=Gc(t,2),n=f[0],o=f[1],l=na.exports.useState(-1),h=Gc(l,2),i=h[0],s=h[1],p=na.exports.useState(e),d=Gc(p,2),g=d[0],b=d[1],m=na.exports.useState(e),x=Gc(m,2),w=x[0],y=x[1],T=na.exports.useRef(null),M=na.exports.useRef(null);na.exports.useEffect(function(){i===-1&&b(e)},[e,i]),na.exports.useEffect(function(){return function(){document.removeEventListener("mousemove",T.current),document.removeEventListener("mouseup",M.current),document.removeEventListener("touchmove",T.current),document.removeEventListener("touchend",M.current)}},[]);var P=function(D,F){g.some(function(N,G){return N!==D[G]})&&(F!==void 0&&o(F),b(D),a(D))},L=function(D,F){if(D===-1){var N=w[0],G=w[w.length-1],U=v-N,X=S-G,z=F*(S-v);z=Math.max(z,U),z=Math.min(z,X);var B=r(N+z);z=B-N;var j=w.map(function($){return $+z});P(j)}else{var V=(S-v)*F,K=kh(g);K[D]=w[D];var te=c(K,V,D,"dist");P(te.values,te.value)}},I=na.exports.useRef(L);I.current=L;var E=function(D,F){D.stopPropagation();var N=e[F];s(F),o(N),y(e);var G=m3(D),U=G.pageX,X=G.pageY,z=function(V){V.preventDefault();var K=m3(V),te=K.pageX,$=K.pageY,ie=te-U,se=$-X,Q=A.current.getBoundingClientRect(),H=Q.width,oe=Q.height,re;switch(R){case"btt":re=-se/oe;break;case"ttb":re=se/oe;break;case"rtl":re=-ie/H;break;default:re=ie/H}I.current(F,re)},B=function j(V){V.preventDefault(),document.removeEventListener("mouseup",j),document.removeEventListener("mousemove",z),document.removeEventListener("touchend",j),document.removeEventListener("touchmove",z),T.current=null,M.current=null,s(-1),u()};document.addEventListener("mouseup",B),document.addEventListener("mousemove",z),document.addEventListener("touchend",B),document.addEventListener("touchmove",z),T.current=z,M.current=B},k=na.exports.useMemo(function(){var C=kh(e).sort(function(F,N){return F-N}),D=kh(g).sort(function(F,N){return F-N});return C.every(function(F,N){return F===D[N]})?g:e},[e,g]);return[i,n,k,E]}function b8(A){var R=A.prefixCls,e=A.style,v=A.start,S=A.end,r=A.index,a=A.onStartMove,u=na.exports.useContext(Qd),c=u.direction,t=u.min,f=u.max,n=u.disabled,o=u.range,l="".concat(R,"-track"),h=cb(v,t,f),i=cb(S,t,f),s=function(g){!n&&a&&a(g,-1)},p={};switch(c){case"rtl":p.right="".concat(h*100,"%"),p.width="".concat(i*100-h*100,"%");break;case"btt":p.bottom="".concat(h*100,"%"),p.height="".concat(i*100-h*100,"%");break;case"ttb":p.top="".concat(h*100,"%"),p.height="".concat(i*100-h*100,"%");break;default:p.left="".concat(h*100,"%"),p.width="".concat(i*100-h*100,"%")}return On("div",{className:Nm(l,o&&"".concat(l,"-").concat(r+1)),style:Sh(Sh({},p),e),onMouseDown:s,onTouchStart:s})}function _8(A){var R=A.prefixCls,e=A.style,v=A.values,S=A.startPoint,r=A.onStartMove,a=na.exports.useContext(Qd),u=a.included,c=a.range,t=a.min,f=na.exports.useMemo(function(){if(!c){if(v.length===0)return[];var n=S!=null?S:t,o=v[0];return[{start:Math.min(n,o),end:Math.max(n,o)}]}for(var l=[],h=0;h<v.length-1;h+=1)l.push({start:v[h],end:v[h+1]});return l},[v,c,S,t]);return u?f.map(function(n,o){var l=n.start,h=n.end;return On(b8,{index:o,prefixCls:R,style:$v(e,o),start:l,end:h,onStartMove:r},o)}):null}function w8(A){var R=A.prefixCls,e=A.style,v=A.children,S=A.value,r=A.onClick,a=na.exports.useContext(Qd),u=a.min,c=a.max,t=a.direction,f=a.includedStart,n=a.includedEnd,o=a.included,l="".concat(R,"-text"),h=S2(t,S,u,c);return On("span",{className:Nm(l,Af({},"".concat(l,"-active"),o&&f<=S&&S<=n)),style:Sh(Sh({},h),e),onMouseDown:function(s){s.stopPropagation()},onClick:function(){r(S)},children:v})}function T8(A){var R=A.prefixCls,e=A.marks,v=A.onClick,S="".concat(R,"-mark");return e.length?On("div",{className:S,children:e.map(function(r){var a=r.value,u=r.style,c=r.label;return On(w8,{prefixCls:S,style:u,value:a,onClick:v,children:c},a)})}):null}function A8(A){var R=A.prefixCls,e=A.value,v=A.style,S=A.activeStyle,r=na.exports.useContext(Qd),a=r.min,u=r.max,c=r.direction,t=r.included,f=r.includedStart,n=r.includedEnd,o="".concat(R,"-dot"),l=t&&f<=e&&e<=n,h=Sh(Sh({},S2(c,e,a,u)),typeof v=="function"?v(e):v);return l&&(h=Sh(Sh({},h),typeof S=="function"?S(e):S)),On("span",{className:Nm(o,Af({},"".concat(o,"-active"),l)),style:h})}function M8(A){var R=A.prefixCls,e=A.marks,v=A.dots,S=A.style,r=A.activeStyle,a=na.exports.useContext(Qd),u=a.min,c=a.max,t=a.step,f=na.exports.useMemo(function(){var n=new Set;if(e.forEach(function(l){n.add(l.value)}),v&&t!==null)for(var o=u;o<=c;)n.add(o),o+=t;return Array.from(n)},[u,c,t,v,e]);return On("div",{className:"".concat(R,"-step"),children:f.map(function(n){return On(A8,{prefixCls:R,value:n,style:S,activeStyle:r},n)})})}function k8(A,R,e,v,S,r){var a=na.exports.useCallback(function(l){var h=isFinite(l)?l:A;return h=Math.min(R,l),h=Math.max(A,h),h},[A,R]),u=na.exports.useCallback(function(l){if(e!==null){var h=A+Math.round((a(l)-A)/e)*e,i=function(g){return(String(g).split(".")[1]||"").length},s=Math.max(i(e),i(R),i(A)),p=Number(h.toFixed(s));return A<=p&&p<=R?p:null}return null},[e,A,R,a]),c=na.exports.useCallback(function(l){var h=a(l),i=v.map(function(d){return d.value});e!==null&&i.push(u(l)),i.push(A,R);var s=i[0],p=R-A;return i.forEach(function(d){var g=Math.abs(h-d);g<=p&&(s=d,p=g)}),s},[A,R,v,e,a,u]),t=function l(h,i,s){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof i=="number"){var d,g=h[s],b=g+i,m=[];v.forEach(function(M){m.push(M.value)}),m.push(A,R),m.push(u(g));var x=i>0?1:-1;p==="unit"?m.push(u(g+x*e)):m.push(u(b)),m=m.filter(function(M){return M!==null}).filter(function(M){return i<0?M<=g:M>=g}),p==="unit"&&(m=m.filter(function(M){return M!==g}));var w=p==="unit"?g:b;d=m[0];var y=Math.abs(d-w);if(m.forEach(function(M){var P=Math.abs(M-w);P<y&&(d=M,y=P)}),d===void 0)return i<0?A:R;if(p==="dist")return d;if(Math.abs(i)>1){var T=kh(h);return T[s]=d,l(T,i-x,s,p)}return d}else{if(i==="min")return A;if(i==="max")return R}},f=function(h,i,s){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",d=h[s],g=t(h,i,s,p);return{value:g,changed:g!==d}},n=function(h){return r===null&&h===0||typeof r=="number"&&h<r},o=function(h,i,s){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",d=h.map(c),g=d[s],b=t(d,i,s,p);if(d[s]=b,S===!1){var m=r||0;s>0&&d[s-1]!==g&&(d[s]=Math.max(d[s],d[s-1]+m)),s<d.length-1&&d[s+1]!==g&&(d[s]=Math.min(d[s],d[s+1]-m))}else if(typeof r=="number"||r===null){for(var x=s+1;x<d.length;x+=1)for(var w=!0;n(d[x]-d[x-1])&&w;){var y=f(d,1,x);d[x]=y.value,w=y.changed}for(var T=s;T>0;T-=1)for(var M=!0;n(d[T]-d[T-1])&&M;){var P=f(d,-1,T-1);d[T-1]=P.value,M=P.changed}for(var L=d.length-1;L>0;L-=1)for(var I=!0;n(d[L]-d[L-1])&&I;){var E=f(d,-1,L-1);d[L-1]=E.value,I=E.changed}for(var k=0;k<d.length-1;k+=1)for(var C=!0;n(d[k+1]-d[k])&&C;){var D=f(d,1,k+1);d[k+1]=D.value,C=D.changed}}return{value:d[s],values:d}};return[c,o]}var S8=na.exports.forwardRef(function(A,R){var e,v=A.prefixCls,S=v===void 0?"rc-slider":v,r=A.className,a=A.style,u=A.disabled,c=u===void 0?!1:u,t=A.keyboard,f=t===void 0?!0:t,n=A.autoFocus,o=A.onFocus,l=A.onBlur,h=A.min,i=h===void 0?0:h,s=A.max,p=s===void 0?100:s,d=A.step,g=d===void 0?1:d,b=A.value,m=A.defaultValue,x=A.range,w=A.count,y=A.onChange,T=A.onBeforeChange,M=A.onAfterChange,P=A.allowCross,L=P===void 0?!0:P,I=A.pushable,E=I===void 0?!1:I,k=A.draggableTrack,C=A.reverse,D=A.vertical,F=A.included,N=F===void 0?!0:F,G=A.startPoint,U=A.trackStyle,X=A.handleStyle,z=A.railStyle,B=A.dotStyle,j=A.activeDotStyle,V=A.marks,K=A.dots,te=A.handleRender,$=A.tabIndex,ie=$===void 0?0:$,se=A.ariaLabelForHandle,Q=A.ariaLabelledByForHandle,H=A.ariaValueTextFormatterForHandle,oe=na.exports.useRef(),re=na.exports.useRef(),ee=na.exports.useMemo(function(){return D?C?"ttb":"btt":C?"rtl":"ltr"},[C,D]),ae=na.exports.useMemo(function(){return isFinite(i)?i:0},[i]),fe=na.exports.useMemo(function(){return isFinite(p)?p:100},[p]),de=na.exports.useMemo(function(){return g!==null&&g<=0?1:g},[g]),pe=na.exports.useMemo(function(){return E===!0?de:E>=0?E:!1},[E,de]),W=na.exports.useMemo(function(){var ft=Object.keys(V||{});return ft.map(function(it){var je=V[it],ot={value:Number(it)};return je&&Zd(je)==="object"&&!na.exports.isValidElement(je)&&("label"in je||"style"in je)?(ot.style=je.style,ot.label=je.label):ot.label=je,ot}).filter(function(it){var je=it.label;return je||typeof je=="number"}).sort(function(it,je){return it.value-je.value})},[V]),ue=k8(ae,fe,de,W,L,pe),me=Gc(ue,2),be=me[0],Me=me[1],Pe=s8(m,{value:b}),Ge=Gc(Pe,2),ze=Ge[0],Qe=Ge[1],tt=na.exports.useMemo(function(){var ft=ze==null?[]:Array.isArray(ze)?ze:[ze],it=Gc(ft,1),je=it[0],ot=je===void 0?ae:je,Je=ze===null?[]:[ot];if(x){if(Je=kh(ft),w||ze===void 0){var st=w>=0?w+1:2;for(Je=Je.slice(0,st);Je.length<st;){var It;Je.push((It=Je[Je.length-1])!==null&&It!==void 0?It:ae)}}Je.sort(function(Nt,nr){return Nt-nr})}return Je.forEach(function(Nt,nr){Je[nr]=be(Nt)}),Je},[ze,x,ae,w,be]),Ce=na.exports.useRef(tt);Ce.current=tt;var Ae=function(it){return x?it:it[0]},Be=function(it){var je=kh(it).sort(function(ot,Je){return ot-Je});y&&!i8(je,Ce.current)&&y(Ae(je)),Qe(je)},qe=function(it){if(!c){var je=0,ot=fe-ae;tt.forEach(function(st,It){var Nt=Math.abs(it-st);Nt<=ot&&(ot=Nt,je=It)});var Je=kh(tt);Je[je]=it,x&&!tt.length&&w===void 0&&Je.push(it),T==null||T(Ae(Je)),Be(Je),M==null||M(Ae(Je))}},Tt=function(it){it.preventDefault();var je=re.current.getBoundingClientRect(),ot=je.width,Je=je.height,st=je.left,It=je.top,Nt=je.bottom,nr=je.right,We=it.clientX,Fe=it.clientY,bt;switch(ee){case"btt":bt=(Nt-Fe)/Je;break;case"ttb":bt=(Fe-It)/Je;break;case"rtl":bt=(nr-We)/ot;break;default:bt=(We-st)/ot}var kt=ae+bt*(fe-ae);qe(be(kt))},At=na.exports.useState(null),Ne=Gc(At,2),ct=Ne[0],Mt=Ne[1],Wt=function(it,je){if(!c){var ot=Me(tt,it,je);T==null||T(Ae(tt)),Be(ot.values),M==null||M(Ae(ot.values)),Mt(ot.value)}};na.exports.useEffect(function(){if(ct!==null){var ft=tt.indexOf(ct);ft>=0&&oe.current.focus(ft)}Mt(null)},[ct]);var qt=na.exports.useMemo(function(){return k&&de===null?!1:k},[k,de]),zt=function(){M==null||M(Ae(Ce.current))},$t=x8(re,ee,tt,ae,fe,be,Be,zt,Me),rr=Gc($t,4),Lt=rr[0],Ct=rr[1],dt=rr[2],lt=rr[3],Te=function(it,je){lt(it,je),T==null||T(Ae(Ce.current))},Le=Lt!==-1;na.exports.useEffect(function(){if(!Le){var ft=tt.lastIndexOf(Ct);oe.current.focus(ft)}},[Le]);var Ue=na.exports.useMemo(function(){return kh(dt).sort(function(ft,it){return ft-it})},[dt]),et=na.exports.useMemo(function(){return x?[Ue[0],Ue[Ue.length-1]]:[ae,Ue[0]]},[Ue,x,ae]),ke=Gc(et,2),Ie=ke[0],He=ke[1];na.exports.useImperativeHandle(R,function(){return{focus:function(){oe.current.focus(0)},blur:function(){var it=document,je=it.activeElement;re.current.contains(je)&&(je==null||je.blur())}}}),na.exports.useEffect(function(){n&&oe.current.focus(0)},[]);var Ye=na.exports.useMemo(function(){return{min:ae,max:fe,direction:ee,disabled:c,keyboard:f,step:de,included:N,includedStart:Ie,includedEnd:He,range:x,tabIndex:ie,ariaLabelForHandle:se,ariaLabelledByForHandle:Q,ariaValueTextFormatterForHandle:H}},[ae,fe,ee,c,f,de,N,Ie,He,x,ie,se,Q,H]);return On(Qd.Provider,{value:Ye,children:Bo("div",{ref:re,className:Nm(S,r,(e={},Af(e,"".concat(S,"-disabled"),c),Af(e,"".concat(S,"-vertical"),D),Af(e,"".concat(S,"-horizontal"),!D),Af(e,"".concat(S,"-with-marks"),W.length),e)),style:a,onMouseDown:Tt,children:[On("div",{className:"".concat(S,"-rail"),style:z}),On(_8,{prefixCls:S,style:U,values:Ue,startPoint:G,onStartMove:qt?Te:null}),On(M8,{prefixCls:S,marks:W,dots:K,style:B,activeStyle:j}),On(y8,{ref:oe,prefixCls:S,style:X,values:dt,draggingIndex:Lt,onStartMove:Te,onOffsetChange:Wt,onFocus:o,onBlur:l,handleRender:te}),On(T8,{prefixCls:S,marks:W,onClick:qe})]})})});function Yy(A){return A&&Zd(A)==="object"&&A.constructor===Object}function p0(A,R){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{clone:!0},v=e.clone?oo({},A):A;return Yy(A)&&Yy(R)&&Object.keys(R).forEach(function(S){S!=="__proto__"&&(Yy(R[S])&&S in A?v[S]=p0(A[S],R[S],e):v[S]=R[S])}),v}function y1(A){for(var R="https://mui.com/production-error/?code="+A,e=1;e<arguments.length;e+=1)R+="&args[]="+encodeURIComponent(arguments[e]);return"Minified Material-UI error #"+A+"; visit "+R+" for the full message."}function E2(A){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(R,A),e)}function E8(A){A=A.substr(1);var R=new RegExp(".{1,".concat(A.length>=6?2:1,"}"),"g"),e=A.match(R);return e&&e[0].length===1&&(e=e.map(function(v){return v+v})),e?"rgb".concat(e.length===4?"a":"","(").concat(e.map(function(v,S){return S<3?parseInt(v,16):Math.round(parseInt(v,16)/255*1e3)/1e3}).join(", "),")"):""}function C8(A){A=Kd(A);var R=A,e=R.values,v=e[0],S=e[1]/100,r=e[2]/100,a=S*Math.min(r,1-r),u=function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(n+v/30)%12;return r-a*Math.max(Math.min(o-3,9-o,1),-1)},c="rgb",t=[Math.round(u(0)*255),Math.round(u(8)*255),Math.round(u(4)*255)];return A.type==="hsla"&&(c+="a",t.push(e[3])),G1({type:c,values:t})}function Kd(A){if(A.type)return A;if(A.charAt(0)==="#")return Kd(E8(A));var R=A.indexOf("("),e=A.substring(0,R);if(["rgb","rgba","hsl","hsla"].indexOf(e)===-1)throw new Error(y1(3,A));var v=A.substring(R+1,A.length-1).split(",");return v=v.map(function(S){return parseFloat(S)}),{type:e,values:v}}function G1(A){var R=A.type,e=A.values;return R.indexOf("rgb")!==-1?e=e.map(function(v,S){return S<3?parseInt(v,10):v}):R.indexOf("hsl")!==-1&&(e[1]="".concat(e[1],"%"),e[2]="".concat(e[2],"%")),"".concat(R,"(").concat(e.join(", "),")")}function L8(A,R){var e=fb(A),v=fb(R);return(Math.max(e,v)+.05)/(Math.min(e,v)+.05)}function fb(A){A=Kd(A);var R=A.type==="hsl"?Kd(C8(A)).values:A.values;return R=R.map(function(e){return e/=255,e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}),Number((.2126*R[0]+.7152*R[1]+.0722*R[2]).toFixed(3))}function Ov(A){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.15;return fb(A)>.5?H4(A,R):j4(A,R)}function $h(A,R){return A=Kd(A),R=E2(R),(A.type==="rgb"||A.type==="hsl")&&(A.type+="a"),A.values[3]=R,G1(A)}function H4(A,R){if(A=Kd(A),R=E2(R),A.type.indexOf("hsl")!==-1)A.values[2]*=1-R;else if(A.type.indexOf("rgb")!==-1)for(var e=0;e<3;e+=1)A.values[e]*=1-R;return G1(A)}function j4(A,R){if(A=Kd(A),R=E2(R),A.type.indexOf("hsl")!==-1)A.values[2]+=(100-A.values[2])*R;else if(A.type.indexOf("rgb")!==-1)for(var e=0;e<3;e+=1)A.values[e]+=(255-A.values[e])*R;return G1(A)}var Fp=["xs","sm","md","lg","xl"];function P8(A){var R=A.values,e=R===void 0?{xs:0,sm:600,md:960,lg:1280,xl:1920}:R,v=A.unit,S=v===void 0?"px":v,r=A.step,a=r===void 0?5:r,u=Xu(A,["values","unit","step"]);function c(l){var h=typeof e[l]=="number"?e[l]:l;return"@media (min-width:".concat(h).concat(S,")")}function t(l){var h=Fp.indexOf(l)+1,i=e[Fp[h]];if(h===Fp.length)return c("xs");var s=typeof i=="number"&&h>0?i:l;return"@media (max-width:".concat(s-a/100).concat(S,")")}function f(l,h){var i=Fp.indexOf(h);return i===Fp.length-1?c(l):"@media (min-width:".concat(typeof e[l]=="number"?e[l]:l).concat(S,") and ")+"(max-width:".concat((i!==-1&&typeof e[Fp[i+1]]=="number"?e[Fp[i+1]]:h)-a/100).concat(S,")")}function n(l){return f(l,l)}function o(l){return e[l]}return oo({keys:Fp,values:e,up:c,down:t,between:f,only:n,width:o},u)}function D8(A,R,e){var v;return oo({gutters:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:",`
      paddingLeft: theme.spacing(2),
      paddingRight: theme.spacing(2),
      [theme.breakpoints.up('sm')]: {
        paddingLeft: theme.spacing(3),
        paddingRight: theme.spacing(3),
      },
      `].join(`
`)),oo({paddingLeft:R(2),paddingRight:R(2)},r,Af({},A.up("sm"),oo({paddingLeft:R(3),paddingRight:R(3)},r[A.up("sm")])))},toolbar:(v={minHeight:56},Af(v,"".concat(A.up("xs")," and (orientation: landscape)"),{minHeight:48}),Af(v,A.up("sm"),{minHeight:64}),v)},e)}var R8={black:"#000",white:"#fff"};const x1=R8;var I8={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"};const C2=I8;var z8={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"};const Xy=z8;var O8={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"};const Zy=O8;var F8={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};const Ky=F8;var N8={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};const Jy=N8;var B8={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};const $y=B8;var U8={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};const Qy=U8;var g3={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:x1.white,default:C2[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},qy={text:{primary:x1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:C2[800],default:"#303030"},action:{active:x1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function y3(A,R,e,v){var S=v.light||v,r=v.dark||v*1.5;A[R]||(A.hasOwnProperty(e)?A[R]=A[e]:R==="light"?A.light=j4(A.main,S):R==="dark"&&(A.dark=H4(A.main,r)))}function V8(A){var R=A.primary,e=R===void 0?{light:Xy[300],main:Xy[500],dark:Xy[700]}:R,v=A.secondary,S=v===void 0?{light:Zy.A200,main:Zy.A400,dark:Zy.A700}:v,r=A.error,a=r===void 0?{light:Ky[300],main:Ky[500],dark:Ky[700]}:r,u=A.warning,c=u===void 0?{light:Jy[300],main:Jy[500],dark:Jy[700]}:u,t=A.info,f=t===void 0?{light:$y[300],main:$y[500],dark:$y[700]}:t,n=A.success,o=n===void 0?{light:Qy[300],main:Qy[500],dark:Qy[700]}:n,l=A.type,h=l===void 0?"light":l,i=A.contrastThreshold,s=i===void 0?3:i,p=A.tonalOffset,d=p===void 0?.2:p,g=Xu(A,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function b(y){var T=L8(y,qy.text.primary)>=s?qy.text.primary:g3.text.primary;return T}var m=function(T){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:300,L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:700;if(T=oo({},T),!T.main&&T[M]&&(T.main=T[M]),!T.main)throw new Error(y1(4,M));if(typeof T.main!="string")throw new Error(y1(5,JSON.stringify(T.main)));return y3(T,"light",P,d),y3(T,"dark",L,d),T.contrastText||(T.contrastText=b(T.main)),T},x={dark:qy,light:g3},w=p0(oo({common:x1,type:h,primary:m(e),secondary:m(S,"A400","A200","A700"),error:m(a),warning:m(c),info:m(f),success:m(o),grey:C2,contrastThreshold:s,getContrastText:b,augmentColor:m,tonalOffset:d},x[h]),g);return w}function G4(A){return Math.round(A*1e5)/1e5}function H8(A){return G4(A)}var x3={textTransform:"uppercase"},b3='"Roboto", "Helvetica", "Arial", sans-serif';function j8(A,R){var e=typeof R=="function"?R(A):R,v=e.fontFamily,S=v===void 0?b3:v,r=e.fontSize,a=r===void 0?14:r,u=e.fontWeightLight,c=u===void 0?300:u,t=e.fontWeightRegular,f=t===void 0?400:t,n=e.fontWeightMedium,o=n===void 0?500:n,l=e.fontWeightBold,h=l===void 0?700:l,i=e.htmlFontSize,s=i===void 0?16:i,p=e.allVariants,d=e.pxToRem,g=Xu(e,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]),b=a/14,m=d||function(y){return"".concat(y/s*b,"rem")},x=function(T,M,P,L,I){return oo({fontFamily:S,fontWeight:T,fontSize:m(M),lineHeight:P},S===b3?{letterSpacing:"".concat(G4(L/M),"em")}:{},I,p)},w={h1:x(c,96,1.167,-1.5),h2:x(c,60,1.2,-.5),h3:x(f,48,1.167,0),h4:x(f,34,1.235,.25),h5:x(f,24,1.334,0),h6:x(o,20,1.6,.15),subtitle1:x(f,16,1.75,.15),subtitle2:x(o,14,1.57,.1),body1:x(f,16,1.5,.15),body2:x(f,14,1.43,.15),button:x(o,14,1.75,.4,x3),caption:x(f,12,1.66,.4),overline:x(f,12,2.66,1,x3)};return p0(oo({htmlFontSize:s,pxToRem:m,round:H8,fontFamily:S,fontSize:a,fontWeightLight:c,fontWeightRegular:f,fontWeightMedium:o,fontWeightBold:h},w),g,{clone:!1})}var G8=.2,W8=.14,Y8=.12;function tl(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(G8,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(W8,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(Y8,")")].join(",")}var X8=["none",tl(0,2,1,-1,0,1,1,0,0,1,3,0),tl(0,3,1,-2,0,2,2,0,0,1,5,0),tl(0,3,3,-2,0,3,4,0,0,1,8,0),tl(0,2,4,-1,0,4,5,0,0,1,10,0),tl(0,3,5,-1,0,5,8,0,0,1,14,0),tl(0,3,5,-1,0,6,10,0,0,1,18,0),tl(0,4,5,-2,0,7,10,1,0,2,16,1),tl(0,5,5,-3,0,8,10,1,0,3,14,2),tl(0,5,6,-3,0,9,12,1,0,3,16,2),tl(0,6,6,-3,0,10,14,1,0,4,18,3),tl(0,6,7,-4,0,11,15,1,0,4,20,3),tl(0,7,8,-4,0,12,17,2,0,5,22,4),tl(0,7,8,-4,0,13,19,2,0,5,24,4),tl(0,7,9,-4,0,14,21,2,0,5,26,4),tl(0,8,9,-5,0,15,22,2,0,6,28,5),tl(0,8,10,-5,0,16,24,2,0,6,30,5),tl(0,8,11,-5,0,17,26,2,0,6,32,5),tl(0,9,11,-5,0,18,28,2,0,7,34,6),tl(0,9,12,-6,0,19,29,2,0,7,36,6),tl(0,10,13,-6,0,20,31,3,0,8,38,7),tl(0,10,13,-6,0,21,33,3,0,8,40,7),tl(0,10,14,-6,0,22,35,3,0,8,42,7),tl(0,11,14,-7,0,23,36,3,0,9,44,8),tl(0,11,15,-7,0,24,38,3,0,9,46,8)];const Z8=X8;var K8={borderRadius:4};const J8=K8;function $8(A){var R=A.spacing||8;return typeof R=="number"?function(e){return R*e}:Array.isArray(R)?function(e){return R[e]}:typeof R=="function"?R:function(){}}function Q8(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:8;if(A.mui)return A;var R=$8({spacing:A}),e=function(){for(var S=arguments.length,r=new Array(S),a=0;a<S;a++)r[a]=arguments[a];return r.length===0?R(1):r.length===1?R(r[0]):r.map(function(u){if(typeof u=="string")return u;var c=R(u);return typeof c=="number"?"".concat(c,"px"):c}).join(" ")};return Object.defineProperty(e,"unit",{get:function(){return A}}),e.mui=!0,e}var _3={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},w3={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function T3(A){return"".concat(Math.round(A),"ms")}const q8={easing:_3,duration:w3,create:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["all"],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=e.duration,S=v===void 0?w3.standard:v,r=e.easing,a=r===void 0?_3.easeInOut:r,u=e.delay,c=u===void 0?0:u;return Xu(e,["duration","easing","delay"]),(Array.isArray(R)?R:[R]).map(function(t){return"".concat(t," ").concat(typeof S=="string"?S:T3(S)," ").concat(a," ").concat(typeof c=="string"?c:T3(c))}).join(",")},getAutoHeightDuration:function(R){if(!R)return 0;var e=R/36;return Math.round((4+15*Math.pow(e,.25)+e/5)*10)}};var eS={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};const tS=eS;function rS(){for(var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},R=A.breakpoints,e=R===void 0?{}:R,v=A.mixins,S=v===void 0?{}:v,r=A.palette,a=r===void 0?{}:r,u=A.spacing,c=A.typography,t=c===void 0?{}:c,f=Xu(A,["breakpoints","mixins","palette","spacing","typography"]),n=V8(a),o=P8(e),l=Q8(u),h=p0({breakpoints:o,direction:"ltr",mixins:D8(o,l,S),overrides:{},palette:n,props:{},shadows:Z8,typography:j8(n,t),spacing:l,shape:J8,transitions:q8,zIndex:tS},f),i=arguments.length,s=new Array(i>1?i-1:0),p=1;p<i;p++)s[p-1]=arguments[p];return h=s.reduce(function(d,g){return p0(d,g)},h),h}var nS=typeof Symbol=="function"&&Symbol.for;const aS=nS?Symbol.for("mui.nested"):"__THEME_NESTED__";var iS=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];function oS(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},R=A.disableGlobal,e=R===void 0?!1:R,v=A.productionPrefix,S=v===void 0?"jss":v,r=A.seed,a=r===void 0?"":r,u=a===""?"":"".concat(a,"-"),c=0,t=function(){return c+=1,c};return function(f,n){var o=n.options.name;if(o&&o.indexOf("Mui")===0&&!n.options.link&&!e){if(iS.indexOf(f.key)!==-1)return"Mui-".concat(f.key);var l="".concat(u).concat(o,"-").concat(f.key);return!n.options.theme[aS]||a!==""?l:"".concat(l,"-").concat(t())}return"".concat(u).concat(S).concat(t())}}function sS(A){var R=A.theme,e=A.name,v=A.props;if(!R||!R.props||!R.props[e])return v;var S=R.props[e],r;for(r in S)v[r]===void 0&&(v[r]=S[r]);return v}var A3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},Bm=(typeof window>"u"?"undefined":A3(window))==="object"&&(typeof document>"u"?"undefined":A3(document))==="object"&&document.nodeType===9;function M3(A,R){for(var e=0;e<R.length;e++){var v=R[e];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(A,N4(v.key),v)}}function W4(A,R,e){return R&&M3(A.prototype,R),e&&M3(A,e),Object.defineProperty(A,"prototype",{writable:!1}),A}function hb(A,R){return hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,S){return v.__proto__=S,v},hb(A,R)}function L2(A,R){A.prototype=Object.create(R.prototype),A.prototype.constructor=A,hb(A,R)}function pb(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}var lS={}.constructor;function db(A){if(A==null||typeof A!="object")return A;if(Array.isArray(A))return A.map(db);if(A.constructor!==lS)return A;var R={};for(var e in A)R[e]=db(A[e]);return R}function P2(A,R,e){A===void 0&&(A="unnamed");var v=e.jss,S=db(R),r=v.plugins.onCreateRule(A,S,e);return r||(A[0],null)}var k3=function(R,e){for(var v="",S=0;S<R.length&&R[S]!=="!important";S++)v&&(v+=e),v+=R[S];return v},Vd=function(R){if(!Array.isArray(R))return R;var e="";if(Array.isArray(R[0]))for(var v=0;v<R.length&&R[v]!=="!important";v++)e&&(e+=", "),e+=k3(R[v]," ");else e=k3(R,", ");return R[R.length-1]==="!important"&&(e+=" !important"),e};function y0(A){return A&&A.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function X0(A,R){for(var e="",v=0;v<R;v++)e+="  ";return e+A}function Lm(A,R,e){e===void 0&&(e={});var v="";if(!R)return v;var S=e,r=S.indent,a=r===void 0?0:r,u=R.fallbacks;e.format===!1&&(a=-1/0);var c=y0(e),t=c.linebreak,f=c.space;if(A&&a++,u)if(Array.isArray(u))for(var n=0;n<u.length;n++){var o=u[n];for(var l in o){var h=o[l];h!=null&&(v&&(v+=t),v+=X0(l+":"+f+Vd(h)+";",a))}}else for(var i in u){var s=u[i];s!=null&&(v&&(v+=t),v+=X0(i+":"+f+Vd(s)+";",a))}for(var p in R){var d=R[p];d!=null&&p!=="fallbacks"&&(v&&(v+=t),v+=X0(p+":"+f+Vd(d)+";",a))}return!v&&!e.allowEmpty||!A?v:(a--,v&&(v=""+t+v+t),X0(""+A+f+"{"+v,a)+X0("}",a))}var uS=/([[\].#*$><+~=|^:(),"'`\s])/g,S3=typeof CSS<"u"&&CSS.escape,D2=function(A){return S3?S3(A):A.replace(uS,"\\$1")},Y4=function(){function A(e,v,S){this.type="style",this.isProcessed=!1;var r=S.sheet,a=S.Renderer;this.key=e,this.options=S,this.style=v,r?this.renderer=r.renderer:a&&(this.renderer=new a)}var R=A.prototype;return R.prop=function(v,S,r){if(S===void 0)return this.style[v];var a=r?r.force:!1;if(!a&&this.style[v]===S)return this;var u=S;(!r||r.process!==!1)&&(u=this.options.jss.plugins.onChangeValue(S,v,this));var c=u==null||u===!1,t=v in this.style;if(c&&!t&&!a)return this;var f=c&&t;if(f?delete this.style[v]:this.style[v]=u,this.renderable&&this.renderer)return f?this.renderer.removeProperty(this.renderable,v):this.renderer.setProperty(this.renderable,v,u),this;var n=this.options.sheet;return n&&n.attached,this},A}(),vb=function(A){L2(R,A);function R(v,S,r){var a;a=A.call(this,v,S,r)||this;var u=r.selector,c=r.scoped,t=r.sheet,f=r.generateId;return u?a.selectorText=u:c!==!1&&(a.id=f(pb(pb(a)),t),a.selectorText="."+D2(a.id)),a}var e=R.prototype;return e.applyTo=function(S){var r=this.renderer;if(r){var a=this.toJSON();for(var u in a)r.setProperty(S,u,a[u])}return this},e.toJSON=function(){var S={};for(var r in this.style){var a=this.style[r];typeof a!="object"?S[r]=a:Array.isArray(a)&&(S[r]=Vd(a))}return S},e.toString=function(S){var r=this.options.sheet,a=r?r.options.link:!1,u=a?oo({},S,{allowEmpty:!0}):S;return Lm(this.selectorText,this.style,u)},W4(R,[{key:"selector",set:function(S){if(S!==this.selectorText){this.selectorText=S;var r=this.renderer,a=this.renderable;if(!(!a||!r)){var u=r.setSelector(a,S);u||r.replaceRule(a,this)}}},get:function(){return this.selectorText}}]),R}(Y4),cS={onCreateRule:function(R,e,v){return R[0]==="@"||v.parent&&v.parent.type==="keyframes"?null:new vb(R,e,v)}},ex={indent:1,children:!0},fS=/@([\w-]+)/,hS=function(){function A(e,v,S){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(fS);this.at=r?r[1]:"unknown",this.query=S.name||"@"+this.at,this.options=S,this.rules=new W1(oo({},S,{parent:this}));for(var a in v)this.rules.add(a,v[a]);this.rules.process()}var R=A.prototype;return R.getRule=function(v){return this.rules.get(v)},R.indexOf=function(v){return this.rules.indexOf(v)},R.addRule=function(v,S,r){var a=this.rules.add(v,S,r);return a?(this.options.jss.plugins.onProcessRule(a),a):null},R.replaceRule=function(v,S,r){var a=this.rules.replace(v,S,r);return a&&this.options.jss.plugins.onProcessRule(a),a},R.toString=function(v){v===void 0&&(v=ex);var S=y0(v),r=S.linebreak;if(v.indent==null&&(v.indent=ex.indent),v.children==null&&(v.children=ex.children),v.children===!1)return this.query+" {}";var a=this.rules.toString(v);return a?this.query+" {"+r+a+r+"}":""},A}(),pS=/@media|@supports\s+/,dS={onCreateRule:function(R,e,v){return pS.test(R)?new hS(R,e,v):null}},tx={indent:1,children:!0},vS=/@keyframes\s+([\w-]+)/,mb=function(){function A(e,v,S){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(vS);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=S;var a=S.scoped,u=S.sheet,c=S.generateId;this.id=a===!1?this.name:D2(c(this,u)),this.rules=new W1(oo({},S,{parent:this}));for(var t in v)this.rules.add(t,v[t],oo({},S,{parent:this}));this.rules.process()}var R=A.prototype;return R.toString=function(v){v===void 0&&(v=tx);var S=y0(v),r=S.linebreak;if(v.indent==null&&(v.indent=tx.indent),v.children==null&&(v.children=tx.children),v.children===!1)return this.at+" "+this.id+" {}";var a=this.rules.toString(v);return a&&(a=""+r+a+r),this.at+" "+this.id+" {"+a+"}"},A}(),mS=/@keyframes\s+/,gS=/\$([\w-]+)/g,gb=function(R,e){return typeof R=="string"?R.replace(gS,function(v,S){return S in e?e[S]:v}):R},E3=function(R,e,v){var S=R[e],r=gb(S,v);r!==S&&(R[e]=r)},yS={onCreateRule:function(R,e,v){return typeof R=="string"&&mS.test(R)?new mb(R,e,v):null},onProcessStyle:function(R,e,v){return e.type!=="style"||!v||("animation-name"in R&&E3(R,"animation-name",v.keyframes),"animation"in R&&E3(R,"animation",v.keyframes)),R},onChangeValue:function(R,e,v){var S=v.options.sheet;if(!S)return R;switch(e){case"animation":return gb(R,S.keyframes);case"animation-name":return gb(R,S.keyframes);default:return R}}},xS=function(A){L2(R,A);function R(){return A.apply(this,arguments)||this}var e=R.prototype;return e.toString=function(S){var r=this.options.sheet,a=r?r.options.link:!1,u=a?oo({},S,{allowEmpty:!0}):S;return Lm(this.key,this.style,u)},R}(Y4),bS={onCreateRule:function(R,e,v){return v.parent&&v.parent.type==="keyframes"?new xS(R,e,v):null}},_S=function(){function A(e,v,S){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=v,this.options=S}var R=A.prototype;return R.toString=function(v){var S=y0(v),r=S.linebreak;if(Array.isArray(this.style)){for(var a="",u=0;u<this.style.length;u++)a+=Lm(this.at,this.style[u]),this.style[u+1]&&(a+=r);return a}return Lm(this.at,this.style,v)},A}(),wS=/@font-face/,TS={onCreateRule:function(R,e,v){return wS.test(R)?new _S(R,e,v):null}},AS=function(){function A(e,v,S){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=v,this.options=S}var R=A.prototype;return R.toString=function(v){return Lm(this.key,this.style,v)},A}(),MS={onCreateRule:function(R,e,v){return R==="@viewport"||R==="@-ms-viewport"?new AS(R,e,v):null}},kS=function(){function A(e,v,S){this.type="simple",this.isProcessed=!1,this.key=e,this.value=v,this.options=S}var R=A.prototype;return R.toString=function(v){if(Array.isArray(this.value)){for(var S="",r=0;r<this.value.length;r++)S+=this.key+" "+this.value[r]+";",this.value[r+1]&&(S+=`
`);return S}return this.key+" "+this.value+";"},A}(),SS={"@charset":!0,"@import":!0,"@namespace":!0},ES={onCreateRule:function(R,e,v){return R in SS?new kS(R,e,v):null}},C3=[cS,dS,yS,bS,TS,MS,ES],CS={process:!0},L3={force:!0,process:!0},W1=function(){function A(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var R=A.prototype;return R.add=function(v,S,r){var a=this.options,u=a.parent,c=a.sheet,t=a.jss,f=a.Renderer,n=a.generateId,o=a.scoped,l=oo({classes:this.classes,parent:u,sheet:c,jss:t,Renderer:f,generateId:n,scoped:o,name:v,keyframes:this.keyframes,selector:void 0},r),h=v;v in this.raw&&(h=v+"-d"+this.counter++),this.raw[h]=S,h in this.classes&&(l.selector="."+D2(this.classes[h]));var i=P2(h,S,l);if(!i)return null;this.register(i);var s=l.index===void 0?this.index.length:l.index;return this.index.splice(s,0,i),i},R.replace=function(v,S,r){var a=this.get(v),u=this.index.indexOf(a);a&&this.remove(a);var c=r;return u!==-1&&(c=oo({},r,{index:u})),this.add(v,S,c)},R.get=function(v){return this.map[v]},R.remove=function(v){this.unregister(v),delete this.raw[v.key],this.index.splice(this.index.indexOf(v),1)},R.indexOf=function(v){return this.index.indexOf(v)},R.process=function(){var v=this.options.jss.plugins;this.index.slice(0).forEach(v.onProcessRule,v)},R.register=function(v){this.map[v.key]=v,v instanceof vb?(this.map[v.selector]=v,v.id&&(this.classes[v.key]=v.id)):v instanceof mb&&this.keyframes&&(this.keyframes[v.name]=v.id)},R.unregister=function(v){delete this.map[v.key],v instanceof vb?(delete this.map[v.selector],delete this.classes[v.key]):v instanceof mb&&delete this.keyframes[v.name]},R.update=function(){var v,S,r;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(v=arguments.length<=0?void 0:arguments[0],S=arguments.length<=1?void 0:arguments[1],r=arguments.length<=2?void 0:arguments[2]):(S=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],v=null),v)this.updateOne(this.get(v),S,r);else for(var a=0;a<this.index.length;a++)this.updateOne(this.index[a],S,r)},R.updateOne=function(v,S,r){r===void 0&&(r=CS);var a=this.options,u=a.jss.plugins,c=a.sheet;if(v.rules instanceof A){v.rules.update(S,r);return}var t=v.style;if(u.onUpdate(S,v,c,r),r.process&&t&&t!==v.style){u.onProcessStyle(v.style,v,c);for(var f in v.style){var n=v.style[f],o=t[f];n!==o&&v.prop(f,n,L3)}for(var l in t){var h=v.style[l],i=t[l];h==null&&h!==i&&v.prop(l,null,L3)}}},R.toString=function(v){for(var S="",r=this.options.sheet,a=r?r.options.link:!1,u=y0(v),c=u.linebreak,t=0;t<this.index.length;t++){var f=this.index[t],n=f.toString(v);!n&&!a||(S&&(S+=c),S+=n)}return S},A}(),X4=function(){function A(e,v){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=oo({},v,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),v.Renderer&&(this.renderer=new v.Renderer(this)),this.rules=new W1(this.options);for(var S in e)this.rules.add(S,e[S]);this.rules.process()}var R=A.prototype;return R.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},R.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},R.addRule=function(v,S,r){var a=this.queue;this.attached&&!a&&(this.queue=[]);var u=this.rules.add(v,S,r);return u?(this.options.jss.plugins.onProcessRule(u),this.attached?(this.deployed&&(a?a.push(u):(this.insertRule(u),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),u):(this.deployed=!1,u)):null},R.replaceRule=function(v,S,r){var a=this.rules.get(v);if(!a)return this.addRule(v,S,r);var u=this.rules.replace(v,S,r);return u&&this.options.jss.plugins.onProcessRule(u),this.attached?(this.deployed&&this.renderer&&(u?a.renderable&&this.renderer.replaceRule(a.renderable,u):this.renderer.deleteRule(a)),u):(this.deployed=!1,u)},R.insertRule=function(v){this.renderer&&this.renderer.insertRule(v)},R.addRules=function(v,S){var r=[];for(var a in v){var u=this.addRule(a,v[a],S);u&&r.push(u)}return r},R.getRule=function(v){return this.rules.get(v)},R.deleteRule=function(v){var S=typeof v=="object"?v:this.rules.get(v);return!S||this.attached&&!S.renderable?!1:(this.rules.remove(S),this.attached&&S.renderable&&this.renderer?this.renderer.deleteRule(S.renderable):!0)},R.indexOf=function(v){return this.rules.indexOf(v)},R.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},R.update=function(){var v;return(v=this.rules).update.apply(v,arguments),this},R.updateOne=function(v,S,r){return this.rules.updateOne(v,S,r),this},R.toString=function(v){return this.rules.toString(v)},A}(),LS=function(){function A(){this.plugins={internal:[],external:[]},this.registry={}}var R=A.prototype;return R.onCreateRule=function(v,S,r){for(var a=0;a<this.registry.onCreateRule.length;a++){var u=this.registry.onCreateRule[a](v,S,r);if(u)return u}return null},R.onProcessRule=function(v){if(!v.isProcessed){for(var S=v.options.sheet,r=0;r<this.registry.onProcessRule.length;r++)this.registry.onProcessRule[r](v,S);v.style&&this.onProcessStyle(v.style,v,S),v.isProcessed=!0}},R.onProcessStyle=function(v,S,r){for(var a=0;a<this.registry.onProcessStyle.length;a++)S.style=this.registry.onProcessStyle[a](S.style,S,r)},R.onProcessSheet=function(v){for(var S=0;S<this.registry.onProcessSheet.length;S++)this.registry.onProcessSheet[S](v)},R.onUpdate=function(v,S,r,a){for(var u=0;u<this.registry.onUpdate.length;u++)this.registry.onUpdate[u](v,S,r,a)},R.onChangeValue=function(v,S,r){for(var a=v,u=0;u<this.registry.onChangeValue.length;u++)a=this.registry.onChangeValue[u](a,S,r);return a},R.use=function(v,S){S===void 0&&(S={queue:"external"});var r=this.plugins[S.queue];r.indexOf(v)===-1&&(r.push(v),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(a,u){for(var c in u)c in a&&a[c].push(u[c]);return a},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},A}(),PS=function(){function A(){this.registry=[]}var R=A.prototype;return R.add=function(v){var S=this.registry,r=v.options.index;if(S.indexOf(v)===-1){if(S.length===0||r>=this.index){S.push(v);return}for(var a=0;a<S.length;a++)if(S[a].options.index>r){S.splice(a,0,v);return}}},R.reset=function(){this.registry=[]},R.remove=function(v){var S=this.registry.indexOf(v);this.registry.splice(S,1)},R.toString=function(v){for(var S=v===void 0?{}:v,r=S.attached,a=k2(S,["attached"]),u=y0(a),c=u.linebreak,t="",f=0;f<this.registry.length;f++){var n=this.registry[f];r!=null&&n.attached!==r||(t&&(t+=c),t+=n.toString(a))}return t},W4(A,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),A}(),cm=new PS,yb=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),xb="2f1acc6c3a606b082e5eef5e54414ffb";yb[xb]==null&&(yb[xb]=0);var P3=yb[xb]++,D3=function(R){R===void 0&&(R={});var e=0,v=function(r,a){e+=1;var u="",c="";return a&&(a.options.classNamePrefix&&(c=a.options.classNamePrefix),a.options.jss.id!=null&&(u=String(a.options.jss.id))),R.minify?""+(c||"c")+P3+u+e:c+r.key+"-"+P3+(u?"-"+u:"")+"-"+e};return v},Z4=function(R){var e;return function(){return e||(e=R()),e}},DS=function(R,e){try{return R.attributeStyleMap?R.attributeStyleMap.get(e):R.style.getPropertyValue(e)}catch{return""}},RS=function(R,e,v){try{var S=v;if(Array.isArray(v)&&(S=Vd(v)),R.attributeStyleMap)R.attributeStyleMap.set(e,S);else{var r=S?S.indexOf("!important"):-1,a=r>-1?S.substr(0,r-1):S;R.style.setProperty(e,a,r>-1?"important":"")}}catch{return!1}return!0},IS=function(R,e){try{R.attributeStyleMap?R.attributeStyleMap.delete(e):R.style.removeProperty(e)}catch{}},zS=function(R,e){return R.selectorText=e,R.selectorText===e},K4=Z4(function(){return document.querySelector("head")});function OS(A,R){for(var e=0;e<A.length;e++){var v=A[e];if(v.attached&&v.options.index>R.index&&v.options.insertionPoint===R.insertionPoint)return v}return null}function FS(A,R){for(var e=A.length-1;e>=0;e--){var v=A[e];if(v.attached&&v.options.insertionPoint===R.insertionPoint)return v}return null}function NS(A){for(var R=K4(),e=0;e<R.childNodes.length;e++){var v=R.childNodes[e];if(v.nodeType===8&&v.nodeValue.trim()===A)return v}return null}function BS(A){var R=cm.registry;if(R.length>0){var e=OS(R,A);if(e&&e.renderer)return{parent:e.renderer.element.parentNode,node:e.renderer.element};if(e=FS(R,A),e&&e.renderer)return{parent:e.renderer.element.parentNode,node:e.renderer.element.nextSibling}}var v=A.insertionPoint;if(v&&typeof v=="string"){var S=NS(v);if(S)return{parent:S.parentNode,node:S.nextSibling}}return!1}function US(A,R){var e=R.insertionPoint,v=BS(R);if(v!==!1&&v.parent){v.parent.insertBefore(A,v.node);return}if(e&&typeof e.nodeType=="number"){var S=e,r=S.parentNode;r&&r.insertBefore(A,S.nextSibling);return}K4().appendChild(A)}var VS=Z4(function(){var A=document.querySelector('meta[property="csp-nonce"]');return A?A.getAttribute("content"):null}),R3=function(R,e,v){try{"insertRule"in R?R.insertRule(e,v):"appendRule"in R&&R.appendRule(e)}catch{return!1}return R.cssRules[v]},I3=function(R,e){var v=R.cssRules.length;return e===void 0||e>v?v:e},HS=function(){var R=document.createElement("style");return R.textContent=`
`,R},jS=function(){function A(e){this.getPropertyValue=DS,this.setProperty=RS,this.removeProperty=IS,this.setSelector=zS,this.hasInsertedRules=!1,this.cssRules=[],e&&cm.add(e),this.sheet=e;var v=this.sheet?this.sheet.options:{},S=v.media,r=v.meta,a=v.element;this.element=a||HS(),this.element.setAttribute("data-jss",""),S&&this.element.setAttribute("media",S),r&&this.element.setAttribute("data-meta",r);var u=VS();u&&this.element.setAttribute("nonce",u)}var R=A.prototype;return R.attach=function(){if(!(this.element.parentNode||!this.sheet)){US(this.element,this.sheet.options);var v=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&v&&(this.hasInsertedRules=!1,this.deploy())}},R.detach=function(){if(!!this.sheet){var v=this.element.parentNode;v&&v.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},R.deploy=function(){var v=this.sheet;if(!!v){if(v.options.link){this.insertRules(v.rules);return}this.element.textContent=`
`+v.toString()+`
`}},R.insertRules=function(v,S){for(var r=0;r<v.index.length;r++)this.insertRule(v.index[r],r,S)},R.insertRule=function(v,S,r){if(r===void 0&&(r=this.element.sheet),v.rules){var a=v,u=r;if(v.type==="conditional"||v.type==="keyframes"){var c=I3(r,S);if(u=R3(r,a.toString({children:!1}),c),u===!1)return!1;this.refCssRule(v,c,u)}return this.insertRules(a.rules,u),u}var t=v.toString();if(!t)return!1;var f=I3(r,S),n=R3(r,t,f);return n===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(v,f,n),n)},R.refCssRule=function(v,S,r){v.renderable=r,v.options.parent instanceof X4&&this.cssRules.splice(S,0,r)},R.deleteRule=function(v){var S=this.element.sheet,r=this.indexOf(v);return r===-1?!1:(S.deleteRule(r),this.cssRules.splice(r,1),!0)},R.indexOf=function(v){return this.cssRules.indexOf(v)},R.replaceRule=function(v,S){var r=this.indexOf(v);return r===-1?!1:(this.element.sheet.deleteRule(r),this.cssRules.splice(r,1),this.insertRule(S,r))},R.getRules=function(){return this.element.sheet.cssRules},A}(),GS=0,WS=function(){function A(e){this.id=GS++,this.version="10.9.2",this.plugins=new LS,this.options={id:{minify:!1},createGenerateId:D3,Renderer:Bm?jS:null,plugins:[]},this.generateId=D3({minify:!1});for(var v=0;v<C3.length;v++)this.plugins.use(C3[v],{queue:"internal"});this.setup(e)}var R=A.prototype;return R.setup=function(v){return v===void 0&&(v={}),v.createGenerateId&&(this.options.createGenerateId=v.createGenerateId),v.id&&(this.options.id=oo({},this.options.id,v.id)),(v.createGenerateId||v.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),v.insertionPoint!=null&&(this.options.insertionPoint=v.insertionPoint),"Renderer"in v&&(this.options.Renderer=v.Renderer),v.plugins&&this.use.apply(this,v.plugins),this},R.createStyleSheet=function(v,S){S===void 0&&(S={});var r=S,a=r.index;typeof a!="number"&&(a=cm.index===0?0:cm.index+1);var u=new X4(v,oo({},S,{jss:this,generateId:S.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:a}));return this.plugins.onProcessSheet(u),u},R.removeStyleSheet=function(v){return v.detach(),cm.remove(v),this},R.createRule=function(v,S,r){if(S===void 0&&(S={}),r===void 0&&(r={}),typeof v=="object")return this.createRule(void 0,v,S);var a=oo({},r,{name:v,jss:this,Renderer:this.options.Renderer});a.generateId||(a.generateId=this.generateId),a.classes||(a.classes={}),a.keyframes||(a.keyframes={});var u=P2(v,S,a);return u&&this.plugins.onProcessRule(u),u},R.use=function(){for(var v=this,S=arguments.length,r=new Array(S),a=0;a<S;a++)r[a]=arguments[a];return r.forEach(function(u){v.plugins.use(u)}),this},A}(),J4=function(R){return new WS(R)},R2=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function $4(A){var R=null;for(var e in A){var v=A[e],S=typeof v;if(S==="function")R||(R={}),R[e]=v;else if(S==="object"&&v!==null&&!Array.isArray(v)){var r=$4(v);r&&(R||(R={}),R[e]=r)}}return R}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */J4();var Q4=Date.now(),rx="fnValues"+Q4,nx="fnStyle"+ ++Q4,YS=function(){return{onCreateRule:function(e,v,S){if(typeof v!="function")return null;var r=P2(e,{},S);return r[nx]=v,r},onProcessStyle:function(e,v){if(rx in v||nx in v)return e;var S={};for(var r in e){var a=e[r];typeof a=="function"&&(delete e[r],S[r]=a)}return v[rx]=S,e},onUpdate:function(e,v,S,r){var a=v,u=a[nx];u&&(a.style=u(e)||{});var c=a[rx];if(c)for(var t in c)a.prop(t,c[t](e),r)}}};const XS=YS;var qp="@global",bb="@global ",ZS=function(){function A(e,v,S){this.type="global",this.at=qp,this.isProcessed=!1,this.key=e,this.options=S,this.rules=new W1(oo({},S,{parent:this}));for(var r in v)this.rules.add(r,v[r]);this.rules.process()}var R=A.prototype;return R.getRule=function(v){return this.rules.get(v)},R.addRule=function(v,S,r){var a=this.rules.add(v,S,r);return a&&this.options.jss.plugins.onProcessRule(a),a},R.replaceRule=function(v,S,r){var a=this.rules.replace(v,S,r);return a&&this.options.jss.plugins.onProcessRule(a),a},R.indexOf=function(v){return this.rules.indexOf(v)},R.toString=function(v){return this.rules.toString(v)},A}(),KS=function(){function A(e,v,S){this.type="global",this.at=qp,this.isProcessed=!1,this.key=e,this.options=S;var r=e.substr(bb.length);this.rule=S.jss.createRule(r,v,oo({},S,{parent:this}))}var R=A.prototype;return R.toString=function(v){return this.rule?this.rule.toString(v):""},A}(),JS=/\s*,\s*/g;function q4(A,R){for(var e=A.split(JS),v="",S=0;S<e.length;S++)v+=R+" "+e[S].trim(),e[S+1]&&(v+=", ");return v}function $S(A,R){var e=A.options,v=A.style,S=v?v[qp]:null;if(!!S){for(var r in S)R.addRule(r,S[r],oo({},e,{selector:q4(r,A.selector)}));delete v[qp]}}function QS(A,R){var e=A.options,v=A.style;for(var S in v)if(!(S[0]!=="@"||S.substr(0,qp.length)!==qp)){var r=q4(S.substr(qp.length),A.selector);R.addRule(r,v[S],oo({},e,{selector:r})),delete v[S]}}function qS(){function A(e,v,S){if(!e)return null;if(e===qp)return new ZS(e,v,S);if(e[0]==="@"&&e.substr(0,bb.length)===bb)return new KS(e,v,S);var r=S.parent;return r&&(r.type==="global"||r.options.parent&&r.options.parent.type==="global")&&(S.scoped=!1),!S.selector&&S.scoped===!1&&(S.selector=e),null}function R(e,v){e.type!=="style"||!v||($S(e,v),QS(e,v))}return{onCreateRule:A,onProcessRule:R}}var z3=/\s*,\s*/g,e7=/&/g,t7=/\$([\w-]+)/g;function r7(){function A(S,r){return function(a,u){var c=S.getRule(u)||r&&r.getRule(u);return c?c.selector:u}}function R(S,r){for(var a=r.split(z3),u=S.split(z3),c="",t=0;t<a.length;t++)for(var f=a[t],n=0;n<u.length;n++){var o=u[n];c&&(c+=", "),c+=o.indexOf("&")!==-1?o.replace(e7,f):f+" "+o}return c}function e(S,r,a){if(a)return oo({},a,{index:a.index+1});var u=S.options.nestingLevel;u=u===void 0?1:u+1;var c=oo({},S.options,{nestingLevel:u,index:r.indexOf(S)+1});return delete c.name,c}function v(S,r,a){if(r.type!=="style")return S;var u=r,c=u.options.parent,t,f;for(var n in S){var o=n.indexOf("&")!==-1,l=n[0]==="@";if(!(!o&&!l)){if(t=e(u,c,t),o){var h=R(n,u.selector);f||(f=A(c,a)),h=h.replace(t7,f);var i=u.key+"-"+n;"replaceRule"in c?c.replaceRule(i,S[n],oo({},t,{selector:h})):c.addRule(i,S[n],oo({},t,{selector:h}))}else l&&c.addRule(n,{},t).addRule(u.key,S[n],{selector:u.selector});delete S[n]}}return S}return{onProcessStyle:v}}var n7=/[A-Z]/g,a7=/^ms-/,ax={};function i7(A){return"-"+A.toLowerCase()}function eT(A){if(ax.hasOwnProperty(A))return ax[A];var R=A.replace(n7,i7);return ax[A]=a7.test(R)?"-"+R:R}function b1(A){var R={};for(var e in A){var v=e.indexOf("--")===0?e:eT(e);R[v]=A[e]}return A.fallbacks&&(Array.isArray(A.fallbacks)?R.fallbacks=A.fallbacks.map(b1):R.fallbacks=b1(A.fallbacks)),R}function o7(){function A(e){if(Array.isArray(e)){for(var v=0;v<e.length;v++)e[v]=b1(e[v]);return e}return b1(e)}function R(e,v,S){if(v.indexOf("--")===0)return e;var r=eT(v);return v===r?e:(S.prop(r,e),null)}return{onProcessStyle:A,onChangeValue:R}}var oa=R2&&CSS?CSS.px:"px",Sg=R2&&CSS?CSS.ms:"ms",Fv=R2&&CSS?CSS.percent:"%",s7={"animation-delay":Sg,"animation-duration":Sg,"background-position":oa,"background-position-x":oa,"background-position-y":oa,"background-size":oa,border:oa,"border-bottom":oa,"border-bottom-left-radius":oa,"border-bottom-right-radius":oa,"border-bottom-width":oa,"border-left":oa,"border-left-width":oa,"border-radius":oa,"border-right":oa,"border-right-width":oa,"border-top":oa,"border-top-left-radius":oa,"border-top-right-radius":oa,"border-top-width":oa,"border-width":oa,"border-block":oa,"border-block-end":oa,"border-block-end-width":oa,"border-block-start":oa,"border-block-start-width":oa,"border-block-width":oa,"border-inline":oa,"border-inline-end":oa,"border-inline-end-width":oa,"border-inline-start":oa,"border-inline-start-width":oa,"border-inline-width":oa,"border-start-start-radius":oa,"border-start-end-radius":oa,"border-end-start-radius":oa,"border-end-end-radius":oa,margin:oa,"margin-bottom":oa,"margin-left":oa,"margin-right":oa,"margin-top":oa,"margin-block":oa,"margin-block-end":oa,"margin-block-start":oa,"margin-inline":oa,"margin-inline-end":oa,"margin-inline-start":oa,padding:oa,"padding-bottom":oa,"padding-left":oa,"padding-right":oa,"padding-top":oa,"padding-block":oa,"padding-block-end":oa,"padding-block-start":oa,"padding-inline":oa,"padding-inline-end":oa,"padding-inline-start":oa,"mask-position-x":oa,"mask-position-y":oa,"mask-size":oa,height:oa,width:oa,"min-height":oa,"max-height":oa,"min-width":oa,"max-width":oa,bottom:oa,left:oa,top:oa,right:oa,inset:oa,"inset-block":oa,"inset-block-end":oa,"inset-block-start":oa,"inset-inline":oa,"inset-inline-end":oa,"inset-inline-start":oa,"box-shadow":oa,"text-shadow":oa,"column-gap":oa,"column-rule":oa,"column-rule-width":oa,"column-width":oa,"font-size":oa,"font-size-delta":oa,"letter-spacing":oa,"text-decoration-thickness":oa,"text-indent":oa,"text-stroke":oa,"text-stroke-width":oa,"word-spacing":oa,motion:oa,"motion-offset":oa,outline:oa,"outline-offset":oa,"outline-width":oa,perspective:oa,"perspective-origin-x":Fv,"perspective-origin-y":Fv,"transform-origin":Fv,"transform-origin-x":Fv,"transform-origin-y":Fv,"transform-origin-z":Fv,"transition-delay":Sg,"transition-duration":Sg,"vertical-align":oa,"flex-basis":oa,"shape-margin":oa,size:oa,gap:oa,grid:oa,"grid-gap":oa,"row-gap":oa,"grid-row-gap":oa,"grid-column-gap":oa,"grid-template-rows":oa,"grid-template-columns":oa,"grid-auto-rows":oa,"grid-auto-columns":oa,"box-shadow-x":oa,"box-shadow-y":oa,"box-shadow-blur":oa,"box-shadow-spread":oa,"font-line-height":oa,"text-shadow-x":oa,"text-shadow-y":oa,"text-shadow-blur":oa};function tT(A){var R=/(-[a-z])/g,e=function(a){return a[1].toUpperCase()},v={};for(var S in A)v[S]=A[S],v[S.replace(R,e)]=A[S];return v}var l7=tT(s7);function fm(A,R,e){if(R==null)return R;if(Array.isArray(R))for(var v=0;v<R.length;v++)R[v]=fm(A,R[v],e);else if(typeof R=="object")if(A==="fallbacks")for(var S in R)R[S]=fm(S,R[S],e);else for(var r in R)R[r]=fm(A+"-"+r,R[r],e);else if(typeof R=="number"&&isNaN(R)===!1){var a=e[A]||l7[A];return a&&!(R===0&&a===oa)?typeof a=="function"?a(R).toString():""+R+a:R.toString()}return R}function u7(A){A===void 0&&(A={});var R=tT(A);function e(S,r){if(r.type!=="style")return S;for(var a in S)S[a]=fm(a,S[a],R);return S}function v(S,r){return fm(r,S,R)}return{onProcessStyle:e,onChangeValue:v}}var Q0="",_b="",rT="",nT="",c7=Bm&&"ontouchstart"in document.documentElement;if(Bm){var ix={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},f7=document.createElement("p"),ox=f7.style,h7="Transform";for(var sx in ix)if(sx+h7 in ox){Q0=sx,_b=ix[sx];break}Q0==="Webkit"&&"msHyphens"in ox&&(Q0="ms",_b=ix.ms,nT="edge"),Q0==="Webkit"&&"-apple-trailing-word"in ox&&(rT="apple")}var uo={js:Q0,css:_b,vendor:rT,browser:nT,isTouch:c7};function p7(A){return A[1]==="-"||uo.js==="ms"?A:"@"+uo.css+"keyframes"+A.substr(10)}var d7={noPrefill:["appearance"],supportedProperty:function(R){return R!=="appearance"?!1:uo.js==="ms"?"-webkit-"+R:uo.css+R}},v7={noPrefill:["color-adjust"],supportedProperty:function(R){return R!=="color-adjust"?!1:uo.js==="Webkit"?uo.css+"print-"+R:R}},m7=/[-\s]+(.)?/g;function g7(A,R){return R?R.toUpperCase():""}function I2(A){return A.replace(m7,g7)}function rd(A){return I2("-"+A)}var y7={noPrefill:["mask"],supportedProperty:function(R,e){if(!/^mask/.test(R))return!1;if(uo.js==="Webkit"){var v="mask-image";if(I2(v)in e)return R;if(uo.js+rd(v)in e)return uo.css+R}return R}},x7={noPrefill:["text-orientation"],supportedProperty:function(R){return R!=="text-orientation"?!1:uo.vendor==="apple"&&!uo.isTouch?uo.css+R:R}},b7={noPrefill:["transform"],supportedProperty:function(R,e,v){return R!=="transform"?!1:v.transform?R:uo.css+R}},_7={noPrefill:["transition"],supportedProperty:function(R,e,v){return R!=="transition"?!1:v.transition?R:uo.css+R}},w7={noPrefill:["writing-mode"],supportedProperty:function(R){return R!=="writing-mode"?!1:uo.js==="Webkit"||uo.js==="ms"&&uo.browser!=="edge"?uo.css+R:R}},T7={noPrefill:["user-select"],supportedProperty:function(R){return R!=="user-select"?!1:uo.js==="Moz"||uo.js==="ms"||uo.vendor==="apple"?uo.css+R:R}},A7={supportedProperty:function(R,e){if(!/^break-/.test(R))return!1;if(uo.js==="Webkit"){var v="WebkitColumn"+rd(R);return v in e?uo.css+"column-"+R:!1}if(uo.js==="Moz"){var S="page"+rd(R);return S in e?"page-"+R:!1}return!1}},M7={supportedProperty:function(R,e){if(!/^(border|margin|padding)-inline/.test(R))return!1;if(uo.js==="Moz")return R;var v=R.replace("-inline","");return uo.js+rd(v)in e?uo.css+v:!1}},k7={supportedProperty:function(R,e){return I2(R)in e?R:!1}},S7={supportedProperty:function(R,e){var v=rd(R);return R[0]==="-"||R[0]==="-"&&R[1]==="-"?R:uo.js+v in e?uo.css+R:uo.js!=="Webkit"&&"Webkit"+v in e?"-webkit-"+R:!1}},E7={supportedProperty:function(R){return R.substring(0,11)!=="scroll-snap"?!1:uo.js==="ms"?""+uo.css+R:R}},C7={supportedProperty:function(R){return R!=="overscroll-behavior"?!1:uo.js==="ms"?uo.css+"scroll-chaining":R}},L7={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},P7={supportedProperty:function(R,e){var v=L7[R];return v&&uo.js+rd(v)in e?uo.css+v:!1}},aT={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},D7=Object.keys(aT),R7=function(R){return uo.css+R},I7={supportedProperty:function(R,e,v){var S=v.multiple;if(D7.indexOf(R)>-1){var r=aT[R];if(!Array.isArray(r))return uo.js+rd(r)in e?uo.css+r:!1;if(!S)return!1;for(var a=0;a<r.length;a++)if(!(uo.js+rd(r[0])in e))return!1;return r.map(R7)}return!1}},iT=[d7,v7,y7,x7,b7,_7,w7,T7,A7,M7,k7,S7,E7,C7,P7,I7],O3=iT.filter(function(A){return A.supportedProperty}).map(function(A){return A.supportedProperty}),z7=iT.filter(function(A){return A.noPrefill}).reduce(function(A,R){return A.push.apply(A,kh(R.noPrefill)),A},[]),q0,Id={};if(Bm){q0=document.createElement("p");var lx=window.getComputedStyle(document.documentElement,"");for(var ux in lx)isNaN(ux)||(Id[lx[ux]]=lx[ux]);z7.forEach(function(A){return delete Id[A]})}function wb(A,R){if(R===void 0&&(R={}),!q0)return A;if(Id[A]!=null)return Id[A];(A==="transition"||A==="transform")&&(R[A]=A in q0.style);for(var e=0;e<O3.length&&(Id[A]=O3[e](A,q0.style,R),!Id[A]);e++);try{q0.style[A]=""}catch{return!1}return Id[A]}var Nv={},O7={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},F7=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Np;function N7(A,R,e){if(R==="var")return"var";if(R==="all")return"all";if(e==="all")return", all";var v=R?wb(R):", "+wb(e);return v||R||e}Bm&&(Np=document.createElement("p"));function F3(A,R){var e=R;if(!Np||A==="content")return R;if(typeof e!="string"||!isNaN(parseInt(e,10)))return e;var v=A+e;if(Nv[v]!=null)return Nv[v];try{Np.style[A]=e}catch{return Nv[v]=!1,!1}if(O7[A])e=e.replace(F7,N7);else if(Np.style[A]===""&&(e=uo.css+e,e==="-ms-flex"&&(Np.style[A]="-ms-flexbox"),Np.style[A]=e,Np.style[A]===""))return Nv[v]=!1,!1;return Np.style[A]="",Nv[v]=e,Nv[v]}function B7(){function A(S){if(S.type==="keyframes"){var r=S;r.at=p7(r.at)}}function R(S){for(var r in S){var a=S[r];if(r==="fallbacks"&&Array.isArray(a)){S[r]=a.map(R);continue}var u=!1,c=wb(r);c&&c!==r&&(u=!0);var t=!1,f=F3(c,Vd(a));f&&f!==a&&(t=!0),(u||t)&&(u&&delete S[r],S[c||r]=f||a)}return S}function e(S,r){return r.type!=="style"?S:R(S)}function v(S,r){return F3(r,Vd(S))||S}return{onProcessRule:A,onProcessStyle:e,onChangeValue:v}}function U7(){var A=function(e,v){return e.length===v.length?e>v?1:-1:e.length-v.length};return{onProcessStyle:function(e,v){if(v.type!=="style")return e;for(var S={},r=Object.keys(e).sort(A),a=0;a<r.length;a++)S[r[a]]=e[r[a]];return S}}}function V7(){return{plugins:[XS(),qS(),r7(),o7(),u7(),typeof window>"u"?null:B7(),U7()]}}function oT(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},R=A.baseClasses,e=A.newClasses;if(A.Component,!e)return R;var v=oo({},R);return Object.keys(e).forEach(function(S){e[S]&&(v[S]="".concat(R[S]," ").concat(e[S]))}),v}var H7={set:function(R,e,v,S){var r=R.get(e);r||(r=new Map,R.set(e,r)),r.set(v,S)},get:function(R,e,v){var S=R.get(e);return S?S.get(v):void 0},delete:function(R,e,v){var S=R.get(e);S.delete(v)}};const Qv=H7;var j7=iu.createContext(null);const G7=j7;function sT(){var A=iu.useContext(G7);return A}var W7=J4(V7()),Y7=oS(),X7=new Map,Z7={disableGeneration:!1,generateClassName:Y7,jss:W7,sheetsCache:null,sheetsManager:X7,sheetsRegistry:null},K7=iu.createContext(Z7),N3=-1e9;function J7(){return N3+=1,N3}var $7={};const Q7=$7;function q7(A){var R=typeof A=="function";return{create:function(v,S){var r;try{r=R?A(v):A}catch(c){throw c}if(!S||!v.overrides||!v.overrides[S])return r;var a=v.overrides[S],u=oo({},r);return Object.keys(a).forEach(function(c){u[c]=p0(u[c],a[c])}),u},options:{}}}function eE(A,R,e){var v=A.state,S=A.stylesOptions;if(S.disableGeneration)return R||{};v.cacheClasses||(v.cacheClasses={value:null,lastProp:null,lastJSS:{}});var r=!1;return v.classes!==v.cacheClasses.lastJSS&&(v.cacheClasses.lastJSS=v.classes,r=!0),R!==v.cacheClasses.lastProp&&(v.cacheClasses.lastProp=R,r=!0),r&&(v.cacheClasses.value=oT({baseClasses:v.cacheClasses.lastJSS,newClasses:R,Component:e})),v.cacheClasses.value}function tE(A,R){var e=A.state,v=A.theme,S=A.stylesOptions,r=A.stylesCreator,a=A.name;if(!S.disableGeneration){var u=Qv.get(S.sheetsManager,r,v);u||(u={refs:0,staticSheet:null,dynamicStyles:null},Qv.set(S.sheetsManager,r,v,u));var c=oo({},r.options,S,{theme:v,flip:typeof S.flip=="boolean"?S.flip:v.direction==="rtl"});c.generateId=c.serverGenerateClassName||c.generateClassName;var t=S.sheetsRegistry;if(u.refs===0){var f;S.sheetsCache&&(f=Qv.get(S.sheetsCache,r,v));var n=r.create(v,a);f||(f=S.jss.createStyleSheet(n,oo({link:!1},c)),f.attach(),S.sheetsCache&&Qv.set(S.sheetsCache,r,v,f)),t&&t.add(f),u.staticSheet=f,u.dynamicStyles=$4(n)}if(u.dynamicStyles){var o=S.jss.createStyleSheet(u.dynamicStyles,oo({link:!0},c));o.update(R),o.attach(),e.dynamicSheet=o,e.classes=oT({baseClasses:u.staticSheet.classes,newClasses:o.classes}),t&&t.add(o)}else e.classes=u.staticSheet.classes;u.refs+=1}}function rE(A,R){var e=A.state;e.dynamicSheet&&e.dynamicSheet.update(R)}function nE(A){var R=A.state,e=A.theme,v=A.stylesOptions,S=A.stylesCreator;if(!v.disableGeneration){var r=Qv.get(v.sheetsManager,S,e);r.refs-=1;var a=v.sheetsRegistry;r.refs===0&&(Qv.delete(v.sheetsManager,S,e),v.jss.removeStyleSheet(r.staticSheet),a&&a.remove(r.staticSheet)),R.dynamicSheet&&(v.jss.removeStyleSheet(R.dynamicSheet),a&&a.remove(R.dynamicSheet))}}function aE(A,R){var e=iu.useRef([]),v,S=iu.useMemo(function(){return{}},R);e.current!==S&&(e.current=S,v=A()),iu.useEffect(function(){return function(){v&&v()}},[S])}function iE(A){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=R.name,v=R.classNamePrefix,S=R.Component,r=R.defaultTheme,a=r===void 0?Q7:r,u=Xu(R,["name","classNamePrefix","Component","defaultTheme"]),c=q7(A),t=e||v||"makeStyles";c.options={index:J7(),name:e,meta:t,classNamePrefix:t};var f=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=sT()||a,h=oo({},iu.useContext(K7),u),i=iu.useRef(),s=iu.useRef();aE(function(){var d={name:e,state:{},stylesCreator:c,stylesOptions:h,theme:l};return tE(d,o),s.current=!1,i.current=d,function(){nE(d)}},[l,c]),iu.useEffect(function(){s.current&&rE(i.current,o),s.current=!0});var p=eE(i.current,o.classes,S);return p};return f}function lT(A){var R,e,v="";if(typeof A=="string"||typeof A=="number")v+=A;else if(typeof A=="object")if(Array.isArray(A))for(R=0;R<A.length;R++)A[R]&&(e=lT(A[R]))&&(v&&(v+=" "),v+=e);else for(R in A)A[R]&&(v&&(v+=" "),v+=R);return v}function _c(){for(var A,R,e=0,v="";e<arguments.length;)(A=arguments[e++])&&(R=lT(A))&&(v&&(v+=" "),v+=R);return v}var uT={exports:{}},hs={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wu=typeof Symbol=="function"&&Symbol.for,z2=wu?Symbol.for("react.element"):60103,O2=wu?Symbol.for("react.portal"):60106,Y1=wu?Symbol.for("react.fragment"):60107,X1=wu?Symbol.for("react.strict_mode"):60108,Z1=wu?Symbol.for("react.profiler"):60114,K1=wu?Symbol.for("react.provider"):60109,J1=wu?Symbol.for("react.context"):60110,F2=wu?Symbol.for("react.async_mode"):60111,$1=wu?Symbol.for("react.concurrent_mode"):60111,Q1=wu?Symbol.for("react.forward_ref"):60112,q1=wu?Symbol.for("react.suspense"):60113,oE=wu?Symbol.for("react.suspense_list"):60120,ey=wu?Symbol.for("react.memo"):60115,ty=wu?Symbol.for("react.lazy"):60116,sE=wu?Symbol.for("react.block"):60121,lE=wu?Symbol.for("react.fundamental"):60117,uE=wu?Symbol.for("react.responder"):60118,cE=wu?Symbol.for("react.scope"):60119;function Jc(A){if(typeof A=="object"&&A!==null){var R=A.$$typeof;switch(R){case z2:switch(A=A.type,A){case F2:case $1:case Y1:case Z1:case X1:case q1:return A;default:switch(A=A&&A.$$typeof,A){case J1:case Q1:case ty:case ey:case K1:return A;default:return R}}case O2:return R}}}function cT(A){return Jc(A)===$1}hs.AsyncMode=F2;hs.ConcurrentMode=$1;hs.ContextConsumer=J1;hs.ContextProvider=K1;hs.Element=z2;hs.ForwardRef=Q1;hs.Fragment=Y1;hs.Lazy=ty;hs.Memo=ey;hs.Portal=O2;hs.Profiler=Z1;hs.StrictMode=X1;hs.Suspense=q1;hs.isAsyncMode=function(A){return cT(A)||Jc(A)===F2};hs.isConcurrentMode=cT;hs.isContextConsumer=function(A){return Jc(A)===J1};hs.isContextProvider=function(A){return Jc(A)===K1};hs.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===z2};hs.isForwardRef=function(A){return Jc(A)===Q1};hs.isFragment=function(A){return Jc(A)===Y1};hs.isLazy=function(A){return Jc(A)===ty};hs.isMemo=function(A){return Jc(A)===ey};hs.isPortal=function(A){return Jc(A)===O2};hs.isProfiler=function(A){return Jc(A)===Z1};hs.isStrictMode=function(A){return Jc(A)===X1};hs.isSuspense=function(A){return Jc(A)===q1};hs.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===Y1||A===$1||A===Z1||A===X1||A===q1||A===oE||typeof A=="object"&&A!==null&&(A.$$typeof===ty||A.$$typeof===ey||A.$$typeof===K1||A.$$typeof===J1||A.$$typeof===Q1||A.$$typeof===lE||A.$$typeof===uE||A.$$typeof===cE||A.$$typeof===sE)};hs.typeOf=Jc;(function(A){A.exports=hs})(uT);var N2=uT.exports,fE={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},hE={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},pE={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},fT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},B2={};B2[N2.ForwardRef]=pE;B2[N2.Memo]=fT;function B3(A){return N2.isMemo(A)?fT:B2[A.$$typeof]||fE}var dE=Object.defineProperty,vE=Object.getOwnPropertyNames,U3=Object.getOwnPropertySymbols,mE=Object.getOwnPropertyDescriptor,gE=Object.getPrototypeOf,V3=Object.prototype;function hT(A,R,e){if(typeof R!="string"){if(V3){var v=gE(R);v&&v!==V3&&hT(A,v,e)}var S=vE(R);U3&&(S=S.concat(U3(R)));for(var r=B3(A),a=B3(R),u=0;u<S.length;++u){var c=S[u];if(!hE[c]&&!(e&&e[c])&&!(a&&a[c])&&!(r&&r[c])){var t=mE(R,c);try{dE(A,c,t)}catch{}}}}return A}var yE=hT,xE=function(R){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(v){var S=e.defaultTheme,r=e.withTheme,a=r===void 0?!1:r,u=e.name,c=Xu(e,["defaultTheme","withTheme","name"]),t=u,f=iE(R,oo({defaultTheme:S,Component:v,name:u||v.displayName,classNamePrefix:t},c)),n=iu.forwardRef(function(l,h){l.classes;var i=l.innerRef,s=Xu(l,["classes","innerRef"]),p=f(oo({},v.defaultProps,l)),d,g=s;return(typeof u=="string"||a)&&(d=sT()||S,u&&(g=sS({theme:d,name:u,props:s})),a&&!g.theme&&(g.theme=d)),On(v,{ref:i||h,classes:p,...g})});return yE(n,v),n}};const bE=xE;var _E=rS();const wE=_E;function fp(A,R){return bE(A,oo({defaultTheme:wE},R))}var TE=function(R){var e={};return R.shadows.forEach(function(v,S){e["elevation".concat(S)]={boxShadow:v}}),oo({root:{backgroundColor:R.palette.background.paper,color:R.palette.text.primary,transition:R.transitions.create("box-shadow")},rounded:{borderRadius:R.shape.borderRadius},outlined:{border:"1px solid ".concat(R.palette.divider)}},e)},AE=na.exports.forwardRef(function(R,e){var v=R.classes,S=R.className,r=R.component,a=r===void 0?"div":r,u=R.square,c=u===void 0?!1:u,t=R.elevation,f=t===void 0?1:t,n=R.variant,o=n===void 0?"elevation":n,l=Xu(R,["classes","className","component","square","elevation","variant"]);return On(a,{className:_c(v.root,S,o==="outlined"?v.outlined:v["elevation".concat(f)],!c&&v.rounded),ref:e,...l})});const rl=fp(TE,{name:"MuiPaper"})(AE);var ME=[0,1,2,3,4,5,6,7,8,9,10],kE=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function SE(A,R,e){var v={};kE.forEach(function(S){var r="grid-".concat(e,"-").concat(S);if(S===!0){v[r]={flexBasis:0,flexGrow:1,maxWidth:"100%"};return}if(S==="auto"){v[r]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};return}var a="".concat(Math.round(S/12*1e8)/1e6,"%");v[r]={flexBasis:a,flexGrow:0,maxWidth:a}}),e==="xs"?oo(A,v):A[R.breakpoints.up(e)]=v}function cx(A){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,e=parseFloat(A);return"".concat(e/R).concat(String(A).replace(String(e),"")||"px")}function EE(A,R){var e={};return ME.forEach(function(v){var S=A.spacing(v);S!==0&&(e["spacing-".concat(R,"-").concat(v)]={margin:"-".concat(cx(S,2)),width:"calc(100% + ".concat(cx(S),")"),"& > $item":{padding:cx(S,2)}})}),e}var CE=function(R){return oo({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},EE(R,"xs"),R.breakpoints.keys.reduce(function(e,v){return SE(e,R,v),e},{}))},LE=na.exports.forwardRef(function(R,e){var v=R.alignContent,S=v===void 0?"stretch":v,r=R.alignItems,a=r===void 0?"stretch":r,u=R.classes,c=R.className,t=R.component,f=t===void 0?"div":t,n=R.container,o=n===void 0?!1:n,l=R.direction,h=l===void 0?"row":l,i=R.item,s=i===void 0?!1:i,p=R.justify,d=R.justifyContent,g=d===void 0?"flex-start":d,b=R.lg,m=b===void 0?!1:b,x=R.md,w=x===void 0?!1:x,y=R.sm,T=y===void 0?!1:y,M=R.spacing,P=M===void 0?0:M,L=R.wrap,I=L===void 0?"wrap":L,E=R.xl,k=E===void 0?!1:E,C=R.xs,D=C===void 0?!1:C,F=R.zeroMinWidth,N=F===void 0?!1:F,G=Xu(R,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),U=_c(u.root,c,o&&[u.container,P!==0&&u["spacing-xs-".concat(String(P))]],s&&u.item,N&&u.zeroMinWidth,h!=="row"&&u["direction-xs-".concat(String(h))],I!=="wrap"&&u["wrap-xs-".concat(String(I))],a!=="stretch"&&u["align-items-xs-".concat(String(a))],S!=="stretch"&&u["align-content-xs-".concat(String(S))],(p||g)!=="flex-start"&&u["justify-content-xs-".concat(String(p||g))],D!==!1&&u["grid-xs-".concat(String(D))],T!==!1&&u["grid-sm-".concat(String(T))],w!==!1&&u["grid-md-".concat(String(w))],m!==!1&&u["grid-lg-".concat(String(m))],k!==!1&&u["grid-xl-".concat(String(k))]);return On(f,{className:U,ref:e,...G})}),PE=fp(CE,{name:"MuiGrid"})(LE);const io=PE;function qh(A){if(typeof A!="string")throw new Error(y1(7));return A.charAt(0).toUpperCase()+A.slice(1)}var DE=function(R){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:R.typography.pxToRem(24),transition:R.transitions.create("fill",{duration:R.transitions.duration.shorter})},colorPrimary:{color:R.palette.primary.main},colorSecondary:{color:R.palette.secondary.main},colorAction:{color:R.palette.action.active},colorError:{color:R.palette.error.main},colorDisabled:{color:R.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:R.typography.pxToRem(20)},fontSizeLarge:{fontSize:R.typography.pxToRem(35)}}},pT=na.exports.forwardRef(function(R,e){var v=R.children,S=R.classes,r=R.className,a=R.color,u=a===void 0?"inherit":a,c=R.component,t=c===void 0?"svg":c,f=R.fontSize,n=f===void 0?"medium":f,o=R.htmlColor,l=R.titleAccess,h=R.viewBox,i=h===void 0?"0 0 24 24":h,s=Xu(R,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return Bo(t,{className:_c(S.root,r,u!=="inherit"&&S["color".concat(qh(u))],n!=="default"&&n!=="medium"&&S["fontSize".concat(qh(n))]),focusable:"false",viewBox:i,color:o,"aria-hidden":l?void 0:!0,role:l?"img":void 0,ref:e,...s,children:[v,l?On("title",{children:l}):null]})});pT.muiName="SvgIcon";const H3=fp(DE,{name:"MuiSvgIcon"})(pT);function RE(A,R){var e=function(S,r){return On(H3,{ref:r,...S,children:A})};return e.muiName=H3.muiName,iu.memo(iu.forwardRef(e))}const IE=RE(On("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function j3(A,R){typeof A=="function"?A(R):A&&(A.current=R)}function Yg(A,R){return na.exports.useMemo(function(){return A==null&&R==null?null:function(e){j3(A,e),j3(R,e)}},[A,R])}var zE=typeof window<"u"?na.exports.useLayoutEffect:na.exports.useEffect;function em(A){var R=na.exports.useRef(A);return zE(function(){R.current=A}),na.exports.useCallback(function(){return R.current.apply(void 0,arguments)},[])}var ry=!0,Tb=!1,G3=null,OE={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function FE(A){var R=A.type,e=A.tagName;return!!(e==="INPUT"&&OE[R]&&!A.readOnly||e==="TEXTAREA"&&!A.readOnly||A.isContentEditable)}function NE(A){A.metaKey||A.altKey||A.ctrlKey||(ry=!0)}function fx(){ry=!1}function BE(){this.visibilityState==="hidden"&&Tb&&(ry=!0)}function UE(A){A.addEventListener("keydown",NE,!0),A.addEventListener("mousedown",fx,!0),A.addEventListener("pointerdown",fx,!0),A.addEventListener("touchstart",fx,!0),A.addEventListener("visibilitychange",BE,!0)}function VE(A){var R=A.target;try{return R.matches(":focus-visible")}catch{}return ry||FE(R)}function HE(){Tb=!0,window.clearTimeout(G3),G3=window.setTimeout(function(){Tb=!1},100)}function jE(){var A=na.exports.useCallback(function(R){var e=w1.exports.findDOMNode(R);e!=null&&UE(e.ownerDocument)},[]);return{isFocusVisible:VE,onBlurVisible:HE,ref:A}}const W3=iu.createContext(null);function U2(A,R){var e=function(r){return R&&na.exports.isValidElement(r)?R(r):r},v=Object.create(null);return A&&na.exports.Children.map(A,function(S){return S}).forEach(function(S){v[S.key]=e(S)}),v}function GE(A,R){A=A||{},R=R||{};function e(f){return f in R?R[f]:A[f]}var v=Object.create(null),S=[];for(var r in A)r in R?S.length&&(v[r]=S,S=[]):S.push(r);var a,u={};for(var c in R){if(v[c])for(a=0;a<v[c].length;a++){var t=v[c][a];u[v[c][a]]=e(t)}u[c]=e(c)}for(a=0;a<S.length;a++)u[S[a]]=e(S[a]);return u}function Nd(A,R,e){return e[R]!=null?e[R]:A.props[R]}function WE(A,R){return U2(A.children,function(e){return na.exports.cloneElement(e,{onExited:R.bind(null,e),in:!0,appear:Nd(e,"appear",A),enter:Nd(e,"enter",A),exit:Nd(e,"exit",A)})})}function YE(A,R,e){var v=U2(A.children),S=GE(R,v);return Object.keys(S).forEach(function(r){var a=S[r];if(!!na.exports.isValidElement(a)){var u=r in R,c=r in v,t=R[r],f=na.exports.isValidElement(t)&&!t.props.in;c&&(!u||f)?S[r]=na.exports.cloneElement(a,{onExited:e.bind(null,a),in:!0,exit:Nd(a,"exit",A),enter:Nd(a,"enter",A)}):!c&&u&&!f?S[r]=na.exports.cloneElement(a,{in:!1}):c&&u&&na.exports.isValidElement(t)&&(S[r]=na.exports.cloneElement(a,{onExited:e.bind(null,a),in:t.props.in,exit:Nd(a,"exit",A),enter:Nd(a,"enter",A)}))}}),S}var XE=Object.values||function(A){return Object.keys(A).map(function(R){return A[R]})},ZE={component:"div",childFactory:function(R){return R}},V2=function(A){L2(R,A);function R(v,S){var r;r=A.call(this,v,S)||this;var a=r.handleExited.bind(pb(r));return r.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},r}var e=R.prototype;return e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},e.componentWillUnmount=function(){this.mounted=!1},R.getDerivedStateFromProps=function(S,r){var a=r.children,u=r.handleExited,c=r.firstRender;return{children:c?WE(S,u):YE(S,a,u),firstRender:!1}},e.handleExited=function(S,r){var a=U2(this.props.children);S.key in a||(S.props.onExited&&S.props.onExited(r),this.mounted&&this.setState(function(u){var c=oo({},u.children);return delete c[S.key],{children:c}}))},e.render=function(){var S=this.props,r=S.component,a=S.childFactory,u=k2(S,["component","childFactory"]),c=this.state.contextValue,t=XE(this.state.children).map(a);return delete u.appear,delete u.enter,delete u.exit,r===null?On(W3.Provider,{value:c,children:t}):On(W3.Provider,{value:c,children:On(r,{...u,children:t})})},R}(iu.Component);V2.propTypes={};V2.defaultProps=ZE;const KE=V2;var JE=typeof window>"u"?na.exports.useEffect:na.exports.useLayoutEffect;function $E(A){var R=A.classes,e=A.pulsate,v=e===void 0?!1:e,S=A.rippleX,r=A.rippleY,a=A.rippleSize,u=A.in,c=A.onExited,t=c===void 0?function(){}:c,f=A.timeout,n=na.exports.useState(!1),o=n[0],l=n[1],h=_c(R.ripple,R.rippleVisible,v&&R.ripplePulsate),i={width:a,height:a,top:-(a/2)+r,left:-(a/2)+S},s=_c(R.child,o&&R.childLeaving,v&&R.childPulsate),p=em(t);return JE(function(){if(!u){l(!0);var d=setTimeout(p,f);return function(){clearTimeout(d)}}},[p,u,f]),On("span",{className:h,style:i,children:On("span",{className:s})})}var Ab=550,QE=80,qE=function(R){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(Ab,"ms ").concat(R.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(R.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(Ab,"ms ").concat(R.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(R.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}},e9=na.exports.forwardRef(function(R,e){var v=R.center,S=v===void 0?!1:v,r=R.classes,a=R.className,u=Xu(R,["center","classes","className"]),c=na.exports.useState([]),t=c[0],f=c[1],n=na.exports.useRef(0),o=na.exports.useRef(null);na.exports.useEffect(function(){o.current&&(o.current(),o.current=null)},[t]);var l=na.exports.useRef(!1),h=na.exports.useRef(null),i=na.exports.useRef(null),s=na.exports.useRef(null);na.exports.useEffect(function(){return function(){clearTimeout(h.current)}},[]);var p=na.exports.useCallback(function(m){var x=m.pulsate,w=m.rippleX,y=m.rippleY,T=m.rippleSize,M=m.cb;f(function(P){return[].concat(kh(P),[On($E,{classes:r,timeout:Ab,pulsate:x,rippleX:w,rippleY:y,rippleSize:T},n.current)])}),n.current+=1,o.current=M},[r]),d=na.exports.useCallback(function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=arguments.length>2?arguments[2]:void 0,y=x.pulsate,T=y===void 0?!1:y,M=x.center,P=M===void 0?S||x.pulsate:M,L=x.fakeElement,I=L===void 0?!1:L;if(m.type==="mousedown"&&l.current){l.current=!1;return}m.type==="touchstart"&&(l.current=!0);var E=I?null:s.current,k=E?E.getBoundingClientRect():{width:0,height:0,left:0,top:0},C,D,F;if(P||m.clientX===0&&m.clientY===0||!m.clientX&&!m.touches)C=Math.round(k.width/2),D=Math.round(k.height/2);else{var N=m.touches?m.touches[0]:m,G=N.clientX,U=N.clientY;C=Math.round(G-k.left),D=Math.round(U-k.top)}if(P)F=Math.sqrt((2*Math.pow(k.width,2)+Math.pow(k.height,2))/3),F%2===0&&(F+=1);else{var X=Math.max(Math.abs((E?E.clientWidth:0)-C),C)*2+2,z=Math.max(Math.abs((E?E.clientHeight:0)-D),D)*2+2;F=Math.sqrt(Math.pow(X,2)+Math.pow(z,2))}m.touches?i.current===null&&(i.current=function(){p({pulsate:T,rippleX:C,rippleY:D,rippleSize:F,cb:w})},h.current=setTimeout(function(){i.current&&(i.current(),i.current=null)},QE)):p({pulsate:T,rippleX:C,rippleY:D,rippleSize:F,cb:w})},[S,p]),g=na.exports.useCallback(function(){d({},{pulsate:!0})},[d]),b=na.exports.useCallback(function(m,x){if(clearTimeout(h.current),m.type==="touchend"&&i.current){m.persist(),i.current(),i.current=null,h.current=setTimeout(function(){b(m,x)});return}i.current=null,f(function(w){return w.length>0?w.slice(1):w}),o.current=x},[]);return na.exports.useImperativeHandle(e,function(){return{pulsate:g,start:d,stop:b}},[g,d,b]),On("span",{className:_c(r.root,a),ref:s,...u,children:On(KE,{component:null,exit:!0,children:t})})});const t9=fp(qE,{flip:!1,name:"MuiTouchRipple"})(na.exports.memo(e9));var r9={root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},n9=na.exports.forwardRef(function(R,e){var v=R.action,S=R.buttonRef,r=R.centerRipple,a=r===void 0?!1:r,u=R.children,c=R.classes,t=R.className,f=R.component,n=f===void 0?"button":f,o=R.disabled,l=o===void 0?!1:o,h=R.disableRipple,i=h===void 0?!1:h,s=R.disableTouchRipple,p=s===void 0?!1:s,d=R.focusRipple,g=d===void 0?!1:d,b=R.focusVisibleClassName,m=R.onBlur,x=R.onClick,w=R.onFocus,y=R.onFocusVisible,T=R.onKeyDown,M=R.onKeyUp,P=R.onMouseDown,L=R.onMouseLeave,I=R.onMouseUp,E=R.onTouchEnd,k=R.onTouchMove,C=R.onTouchStart,D=R.onDragLeave,F=R.tabIndex,N=F===void 0?0:F,G=R.TouchRippleProps,U=R.type,X=U===void 0?"button":U,z=Xu(R,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),B=na.exports.useRef(null);function j(){return w1.exports.findDOMNode(B.current)}var V=na.exports.useRef(null),K=na.exports.useState(!1),te=K[0],$=K[1];l&&te&&$(!1);var ie=jE(),se=ie.isFocusVisible,Q=ie.onBlurVisible,H=ie.ref;na.exports.useImperativeHandle(v,function(){return{focusVisible:function(){$(!0),B.current.focus()}}},[]),na.exports.useEffect(function(){te&&g&&!i&&V.current.pulsate()},[i,g,te]);function oe(Ne,ct){var Mt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p;return em(function(Wt){ct&&ct(Wt);var qt=Mt;return!qt&&V.current&&V.current[Ne](Wt),!0})}var re=oe("start",P),ee=oe("stop",D),ae=oe("stop",I),fe=oe("stop",function(Ne){te&&Ne.preventDefault(),L&&L(Ne)}),de=oe("start",C),pe=oe("stop",E),W=oe("stop",k),ue=oe("stop",function(Ne){te&&(Q(Ne),$(!1)),m&&m(Ne)},!1),me=em(function(Ne){B.current||(B.current=Ne.currentTarget),se(Ne)&&($(!0),y&&y(Ne)),w&&w(Ne)}),be=function(){var ct=j();return n&&n!=="button"&&!(ct.tagName==="A"&&ct.href)},Me=na.exports.useRef(!1),Pe=em(function(Ne){g&&!Me.current&&te&&V.current&&Ne.key===" "&&(Me.current=!0,Ne.persist(),V.current.stop(Ne,function(){V.current.start(Ne)})),Ne.target===Ne.currentTarget&&be()&&Ne.key===" "&&Ne.preventDefault(),T&&T(Ne),Ne.target===Ne.currentTarget&&be()&&Ne.key==="Enter"&&!l&&(Ne.preventDefault(),x&&x(Ne))}),Ge=em(function(Ne){g&&Ne.key===" "&&V.current&&te&&!Ne.defaultPrevented&&(Me.current=!1,Ne.persist(),V.current.stop(Ne,function(){V.current.pulsate(Ne)})),M&&M(Ne),x&&Ne.target===Ne.currentTarget&&be()&&Ne.key===" "&&!Ne.defaultPrevented&&x(Ne)}),ze=n;ze==="button"&&z.href&&(ze="a");var Qe={};ze==="button"?(Qe.type=X,Qe.disabled=l):((ze!=="a"||!z.href)&&(Qe.role="button"),Qe["aria-disabled"]=l);var tt=Yg(S,e),Ce=Yg(H,B),Ae=Yg(tt,Ce),Be=na.exports.useState(!1),qe=Be[0],Tt=Be[1];na.exports.useEffect(function(){Tt(!0)},[]);var At=qe&&!i&&!l;return Bo(ze,{className:_c(c.root,t,te&&[c.focusVisible,b],l&&c.disabled),onBlur:ue,onClick:x,onFocus:me,onKeyDown:Pe,onKeyUp:Ge,onMouseDown:re,onMouseLeave:fe,onMouseUp:ae,onDragLeave:ee,onTouchEnd:pe,onTouchMove:W,onTouchStart:de,ref:Ae,tabIndex:l?-1:N,...Qe,...z,children:[u,At?On(t9,{ref:V,center:a,...G}):null]})});const Y3=fp(r9,{name:"MuiButtonBase"})(n9);var a9=function(R){var e=R.palette.type==="light"?R.palette.grey[300]:R.palette.grey[700],v=$h(R.palette.text.primary,.26);return{root:{fontFamily:R.typography.fontFamily,fontSize:R.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:R.palette.getContrastText(e),backgroundColor:e,borderRadius:32/2,whiteSpace:"nowrap",transition:R.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:"none",padding:0,verticalAlign:"middle",boxSizing:"border-box","&$disabled":{opacity:.5,pointerEvents:"none"},"& $avatar":{marginLeft:5,marginRight:-6,width:24,height:24,color:R.palette.type==="light"?R.palette.grey[700]:R.palette.grey[300],fontSize:R.typography.pxToRem(12)},"& $avatarColorPrimary":{color:R.palette.primary.contrastText,backgroundColor:R.palette.primary.dark},"& $avatarColorSecondary":{color:R.palette.secondary.contrastText,backgroundColor:R.palette.secondary.dark},"& $avatarSmall":{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:R.typography.pxToRem(10)}},sizeSmall:{height:24},colorPrimary:{backgroundColor:R.palette.primary.main,color:R.palette.primary.contrastText},colorSecondary:{backgroundColor:R.palette.secondary.main,color:R.palette.secondary.contrastText},disabled:{},clickable:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover, &:focus":{backgroundColor:Ov(e,.08)},"&:active":{boxShadow:R.shadows[1]}},clickableColorPrimary:{"&:hover, &:focus":{backgroundColor:Ov(R.palette.primary.main,.08)}},clickableColorSecondary:{"&:hover, &:focus":{backgroundColor:Ov(R.palette.secondary.main,.08)}},deletable:{"&:focus":{backgroundColor:Ov(e,.08)}},deletableColorPrimary:{"&:focus":{backgroundColor:Ov(R.palette.primary.main,.2)}},deletableColorSecondary:{"&:focus":{backgroundColor:Ov(R.palette.secondary.main,.2)}},outlined:{backgroundColor:"transparent",border:"1px solid ".concat(R.palette.type==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:$h(R.palette.text.primary,R.palette.action.hoverOpacity)},"& $avatar":{marginLeft:4},"& $avatarSmall":{marginLeft:2},"& $icon":{marginLeft:4},"& $iconSmall":{marginLeft:2},"& $deleteIcon":{marginRight:5},"& $deleteIconSmall":{marginRight:3}},outlinedPrimary:{color:R.palette.primary.main,border:"1px solid ".concat(R.palette.primary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:$h(R.palette.primary.main,R.palette.action.hoverOpacity)}},outlinedSecondary:{color:R.palette.secondary.main,border:"1px solid ".concat(R.palette.secondary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:$h(R.palette.secondary.main,R.palette.action.hoverOpacity)}},avatar:{},avatarSmall:{},avatarColorPrimary:{},avatarColorSecondary:{},icon:{color:R.palette.type==="light"?R.palette.grey[700]:R.palette.grey[300],marginLeft:5,marginRight:-6},iconSmall:{width:18,height:18,marginLeft:4,marginRight:-4},iconColorPrimary:{color:"inherit"},iconColorSecondary:{color:"inherit"},label:{overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},labelSmall:{paddingLeft:8,paddingRight:8},deleteIcon:{WebkitTapHighlightColor:"transparent",color:v,height:22,width:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:$h(v,.4)}},deleteIconSmall:{height:16,width:16,marginRight:4,marginLeft:-4},deleteIconColorPrimary:{color:$h(R.palette.primary.contrastText,.7),"&:hover, &:active":{color:R.palette.primary.contrastText}},deleteIconColorSecondary:{color:$h(R.palette.secondary.contrastText,.7),"&:hover, &:active":{color:R.palette.secondary.contrastText}},deleteIconOutlinedColorPrimary:{color:$h(R.palette.primary.main,.7),"&:hover, &:active":{color:R.palette.primary.main}},deleteIconOutlinedColorSecondary:{color:$h(R.palette.secondary.main,.7),"&:hover, &:active":{color:R.palette.secondary.main}}}};function X3(A){return A.key==="Backspace"||A.key==="Delete"}var i9=na.exports.forwardRef(function(R,e){var v=R.avatar,S=R.classes,r=R.className,a=R.clickable,u=R.color,c=u===void 0?"default":u,t=R.component,f=R.deleteIcon,n=R.disabled,o=n===void 0?!1:n,l=R.icon,h=R.label,i=R.onClick,s=R.onDelete,p=R.onKeyDown,d=R.onKeyUp,g=R.size,b=g===void 0?"medium":g,m=R.variant,x=m===void 0?"default":m,w=Xu(R,["avatar","classes","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"]),y=na.exports.useRef(null),T=Yg(y,e),M=function(X){X.stopPropagation(),s&&s(X)},P=function(X){X.currentTarget===X.target&&X3(X)&&X.preventDefault(),p&&p(X)},L=function(X){X.currentTarget===X.target&&(s&&X3(X)?s(X):X.key==="Escape"&&y.current&&y.current.blur()),d&&d(X)},I=a!==!1&&i?!0:a,E=b==="small",k=t||(I?Y3:"div"),C=k===Y3?{component:"div"}:{},D=null;if(s){var F=_c(c!=="default"&&(x==="default"?S["deleteIconColor".concat(qh(c))]:S["deleteIconOutlinedColor".concat(qh(c))]),E&&S.deleteIconSmall);D=f&&na.exports.isValidElement(f)?na.exports.cloneElement(f,{className:_c(f.props.className,S.deleteIcon,F),onClick:M}):On(IE,{className:_c(S.deleteIcon,F),onClick:M})}var N=null;v&&na.exports.isValidElement(v)&&(N=na.exports.cloneElement(v,{className:_c(S.avatar,v.props.className,E&&S.avatarSmall,c!=="default"&&S["avatarColor".concat(qh(c))])}));var G=null;return l&&na.exports.isValidElement(l)&&(G=na.exports.cloneElement(l,{className:_c(S.icon,l.props.className,E&&S.iconSmall,c!=="default"&&S["iconColor".concat(qh(c))])})),Bo(k,{role:I||s?"button":void 0,className:_c(S.root,r,c!=="default"&&[S["color".concat(qh(c))],I&&S["clickableColor".concat(qh(c))],s&&S["deletableColor".concat(qh(c))]],x!=="default"&&[S.outlined,{primary:S.outlinedPrimary,secondary:S.outlinedSecondary}[c]],o&&S.disabled,E&&S.sizeSmall,I&&S.clickable,s&&S.deletable),"aria-disabled":o?!0:void 0,tabIndex:I||s?0:void 0,onClick:i,onKeyDown:P,onKeyUp:L,ref:T,...C,...w,children:[N||G,On("span",{className:_c(S.label,E&&S.labelSmall),children:h}),D]})});const Yi=fp(a9,{name:"MuiChip"})(i9),o9=A=>({root:{textAlign:"center"},paper:{padding:A.spacing(2),textAlign:"center",color:A.palette.text.secondary}}),s9=A=>On(io,{container:!0,spacing:4,...A}),Eg=A=>On(io,{item:!0,xs:12,sm:9,md:6,...A}),Z3=fp(o9)(({classes:A,justify:R})=>Bo("div",{className:A.root,children:[On("h3",{children:"Abstract Container (Grid) with abstract component Items (Grids)"}),Bo(s9,{children:[On(Eg,{children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:"space-between",children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})}),On(Eg,{children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:"space-between",children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})}),On(Eg,{children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:"space-between",children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})}),On(Eg,{children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:"space-between",children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})})]})]})),l9=A=>({root:{textAlign:"center"},paper:{padding:A.spacing(2),textAlign:"center",color:A.palette.text.secondary}}),K3=fp(l9)(({classes:A,justify:R})=>Bo("div",{className:A.root,children:[On("h3",{children:'Grid with component grids set to "justify" contents'}),Bo(io,{container:!0,spacing:4,children:[On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:R,children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})}),On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:R,children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})}),On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:R,children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})}),On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:R,children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})})]}),On("h3",{children:'Grid with component grids set to "center" contents'}),Bo(io,{container:!0,spacing:4,children:[On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:"center",children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})}),On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:"center",children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})}),On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:"center",children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})}),On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:"center",children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})})]}),On("h3",{children:'Grid with component grids set to "space-around" contents'}),Bo(io,{container:!0,spacing:4,children:[On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:"space-around",children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})}),On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:"space-around",children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})}),On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:"space-around",children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})}),On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:Bo(io,{container:!0,justifyContent:"space-around",children:[On(Yi,{label:"xs=12"}),On(Yi,{label:"sm=9"}),On(Yi,{label:"md=6"})]})})})]})]})),u9=A=>({root:{textAlign:"center"},paper:{padding:A.spacing(2),textAlign:"center",color:A.palette.text.secondary}}),J3=fp(u9)(({classes:A})=>Bo("div",{className:A.root,children:[On("h3",{children:'Grid with "auto" screen widths'}),Bo(io,{container:!0,spacing:4,children:[On(io,{item:!0,xs:"auto",sm:"auto",md:"auto",children:On(rl,{className:A.paper,children:'xs="auto" sm="auto" md="auto"'})}),On(io,{item:!0,xs:"auto",sm:"auto",md:"auto",children:On(rl,{className:A.paper,children:'xs="auto" sm="auto" md="auto"'})}),On(io,{item:!0,xs:"auto",sm:"auto",md:"auto",children:On(rl,{className:A.paper,children:'xs="auto" sm="auto" md="auto"'})}),On(io,{item:!0,xs:"auto",sm:"auto",md:"auto",children:On(rl,{className:A.paper,children:'xs="auto" sm="auto" md="auto"'})})]}),On("h3",{children:"Grid with proportional (1-12/12) screen widths"}),Bo(io,{container:!0,spacing:4,children:[On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:"xs=12 sm=9 md=6"})}),On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:"xs=12 sm=9 md=6"})}),On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:"xs=12 sm=9 md=6"})}),On(io,{item:!0,xs:12,sm:9,md:6,children:On(rl,{className:A.paper,children:"xs=12 sm=9 md=6"})})]})]}));class c9 extends iu.Component{constructor(R){super(R);const[e,v]=na.exports.useState(0);this.count=e,this.setCount=v,this.state={score:0,userInput:""},this.saveUserInput=this.saveUserInput.bind(this),this.updateScore=this.updateScore.bin(this)}saveUserInput(){this.state.userInput=1,this.updateScore()}updateScore(){this.setCount(R=>R+this.state.userInput)}render(){return On("div",{className:"card",children:Bo("button",{onClick:this.saveUserInput,children:["Score is ",this.state.score]})})}}class dT extends iu.Component{constructor(R){super(R),this.message="Hello"}handleClick(){console.log(this.message)}render(){return On("button",{type:"button",onClick:this.handleClick,children:"Click Me"})}}class f9 extends dT{constructor(R){super(R),this.message="hello",this.handleClick=this.handleClick.bind(this)}handleClick(R){console.log(this.message)}render(){return On("button",{type:"button",onClick:this.handleClick,children:"Click Me"})}}class h9 extends iu.Component{render(){return On("h1",{children:"User Profile"})}}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var $3=Object.getOwnPropertySymbols,p9=Object.prototype.hasOwnProperty,d9=Object.prototype.propertyIsEnumerable;function v9(A){if(A==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(A)}function m9(){try{if(!Object.assign)return!1;var A=new String("abc");if(A[5]="de",Object.getOwnPropertyNames(A)[0]==="5")return!1;for(var R={},e=0;e<10;e++)R["_"+String.fromCharCode(e)]=e;var v=Object.getOwnPropertyNames(R).map(function(r){return R[r]});if(v.join("")!=="0123456789")return!1;var S={};return"abcdefghijklmnopqrst".split("").forEach(function(r){S[r]=r}),Object.keys(Object.assign({},S)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var g9=m9()?Object.assign:function(A,R){for(var e,v=v9(A),S,r=1;r<arguments.length;r++){e=Object(arguments[r]);for(var a in e)p9.call(e,a)&&(v[a]=e[a]);if($3){S=$3(e);for(var u=0;u<S.length;u++)d9.call(e,S[u])&&(v[S[u]]=e[S[u]])}}return v},Cg=g9,y9={};function $f(A,R,e,v,S,r,a,u){if(!A){var c;if(R===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var t=[e,v,S,r,a,u],f=0;c=new Error(R.replace(/%s/g,function(){return t[f++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var Q3="mixins";function x9(A,R,e){var v=[],S={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},r={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},a={displayName:function(b,m){b.displayName=m},mixins:function(b,m){if(m)for(var x=0;x<m.length;x++)c(b,m[x])},childContextTypes:function(b,m){b.childContextTypes=Cg({},b.childContextTypes,m)},contextTypes:function(b,m){b.contextTypes=Cg({},b.contextTypes,m)},getDefaultProps:function(b,m){b.getDefaultProps?b.getDefaultProps=n(b.getDefaultProps,m):b.getDefaultProps=m},propTypes:function(b,m){b.propTypes=Cg({},b.propTypes,m)},statics:function(b,m){t(b,m)},autobind:function(){}};function u(b,m){var x=S.hasOwnProperty(m)?S[m]:null;p.hasOwnProperty(m)&&$f(x==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",m),b&&$f(x==="DEFINE_MANY"||x==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",m)}function c(b,m){if(!!m){$f(typeof m!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),$f(!R(m),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var x=b.prototype,w=x.__reactAutoBindPairs;m.hasOwnProperty(Q3)&&a.mixins(b,m.mixins);for(var y in m)if(!!m.hasOwnProperty(y)&&y!==Q3){var T=m[y],M=x.hasOwnProperty(y);if(u(M,y),a.hasOwnProperty(y))a[y](b,T);else{var P=S.hasOwnProperty(y),L=typeof T=="function",I=L&&!P&&!M&&m.autobind!==!1;if(I)w.push(y,T),x[y]=T;else if(M){var E=S[y];$f(P&&(E==="DEFINE_MANY_MERGED"||E==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",E,y),E==="DEFINE_MANY_MERGED"?x[y]=n(x[y],T):E==="DEFINE_MANY"&&(x[y]=o(x[y],T))}else x[y]=T}}}}function t(b,m){if(!!m)for(var x in m){var w=m[x];if(!!m.hasOwnProperty(x)){var y=x in a;$f(!y,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',x);var T=x in b;if(T){var M=r.hasOwnProperty(x)?r[x]:null;$f(M==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",x),b[x]=n(b[x],w);return}b[x]=w}}}function f(b,m){$f(b&&m&&typeof b=="object"&&typeof m=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var x in m)m.hasOwnProperty(x)&&($f(b[x]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",x),b[x]=m[x]);return b}function n(b,m){return function(){var w=b.apply(this,arguments),y=m.apply(this,arguments);if(w==null)return y;if(y==null)return w;var T={};return f(T,w),f(T,y),T}}function o(b,m){return function(){b.apply(this,arguments),m.apply(this,arguments)}}function l(b,m){var x=m.bind(b);return x}function h(b){for(var m=b.__reactAutoBindPairs,x=0;x<m.length;x+=2){var w=m[x],y=m[x+1];b[w]=l(b,y)}}var i={componentDidMount:function(){this.__isMounted=!0}},s={componentWillUnmount:function(){this.__isMounted=!1}},p={replaceState:function(b,m){this.updater.enqueueReplaceState(this,b,m)},isMounted:function(){return!!this.__isMounted}},d=function(){};Cg(d.prototype,A.prototype,p);function g(b){var m=function(w,y,T){this.__reactAutoBindPairs.length&&h(this),this.props=w,this.context=y,this.refs=y9,this.updater=T||e,this.state=null;var M=this.getInitialState?this.getInitialState():null;$f(typeof M=="object"&&!Array.isArray(M),"%s.getInitialState(): must return an object or null",m.displayName||"ReactCompositeComponent"),this.state=M};m.prototype=new d,m.prototype.constructor=m,m.prototype.__reactAutoBindPairs=[],v.forEach(c.bind(null,m)),c(m,i),c(m,b),c(m,s),m.getDefaultProps&&(m.defaultProps=m.getDefaultProps()),$f(m.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var x in S)m.prototype[x]||(m.prototype[x]=null);return m}return g}var b9=x9,_1=na.exports,_9=b9;if(typeof _1>"u")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var w9=new _1.Component().updater,T9=_9(_1.Component,_1.isValidElement,w9);const q3=T9({render(){return On("h1",{children:"User Profile"})}});class ew extends na.exports.Component{render(){return On("div",{children:Bo("header",{className:"App-header",children:[On("h1",{className:"App-title",children:"Amplify / React Frontend v.s. Shiny / Plumber Backend "}),Bo("div",{children:[On("a",{href:"https://vitejs.dev",target:"_blank",children:On("img",{src:"/vite.svg",className:"logo",alt:"Vite logo"})}),On("a",{href:"https://reactjs.org",target:"_blank",children:On("img",{src:RM,className:"logo react",alt:"React logo"})})]}),On("h1",{children:"Vite + React"}),On("p",{className:"read-the-docs",children:"Click on the Vite and React logos to learn more"})]})})}}function vT({content:A}){let R=!1;const[e,v]=na.exports.useState({rawdata:[{y:null,x:null,type:"bar"}]}),[S,r]=na.exports.useState(0),[a,u]=na.exports.useState(0),[c,t]=na.exports.useState(0);(function(){console.log("Welcome to Amplify React app version:","1"),console.log("Custom components: "),console.log("App is: ",vT.name),console.log("Header is: ",ew.name),console.log("MyComponent is: ",c9.name),console.log("Foo is: ",f9.name),console.log("FooWithoutBind is: ",dT.name),console.log("UserProfileClass is: ",h9.name),console.log("UserProfileCreateReactClass is: ",q3.name||q3.constructor.name),console.log("AbstactingContainersAndItems is: ",Z3.name||Z3.constructor.name),console.log("FillingSpace is: ",K3.name||K3.constructor.name),console.log("UnderstandingBreakpoints is: ",J3.name||J3.constructor.name)})();function f(){if(!R){const l=document.getElementsByClassName("App")[0],h=l.childNodes[0]||null,i=typeof A=="function"?A():{childNodes:[]};console.log(h),console.log(i.childNodes),setTimeout(s=>{i.childNodes.forEach(p=>{console.log(p),s.insertBefore(p,h)})},53,l),R=!0}}na.exports.useEffect(f,[]);async function n(l){return console.log("what?"),Yk.get("https://frontend.ruralopportunitymap.us/__api__/hist-raw",{params:{bins:l}}).then(h=>{console.log(h.data),console.log("Render to plotly component: ",`
<Plot
    data={"${e.rawdata}"}
    layout={{
        title: 'Histogram of waiting times',
        bargap: 0.01,
        autosize: false,
        width: (0.364583 * ${S}),
        height: (0.234375 * ${S}),
        xaxis: {
            title: 'Waiting time to next eruption (in mins)'
        },
        yaxis: {
            title: 'Frequency'
        },
        useResizeHandler: true,
        responsive: true
    }}
/>
`),v({rawdata:[{y:h.data.map(i=>i.counts),x:h.data.map(i=>i.mids),type:"bar"}]})})}function o(){!!window&&window.hasOwnProperty("innerWidth")&&window.hasOwnProperty("innerHeight")&&(console.log("Update width to: "+window.innerWidth),r(window.innerWidth),console.log("Update height to: "+window.innerHeight),u(window.innerHeight),console.log("Update height/width ratio to: "+window.innerHeight/window.innerWidth),t(window.innerHeight/window.innerWidth),setTimeout(()=>{console.log({windowWidth:S,windowHeight:a,windowRatio:c})}))}return na.exports.useEffect(()=>(window.addEventListener("load",o),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)),[]),Bo("div",{className:"App",children:[On(ew,{}),Bo("div",{className:"card",children:[On($k,{data:e.rawdata,layout:{title:"Histogram of waiting times",bargap:.01,autosize:!1,width:.364583*S,height:.234375*S,xaxis:{title:"Waiting time to next eruption (in mins)"},yaxis:{title:"Frequency"},useResizeHandler:!0,responsive:!0}}),On(S8,{id:"bins",onChange:lb.exports.debounce(n,60),min:1,max:50,marks:{1:"1",13:"13",26:"26",38:"38",50:"50"},toolTipVisibleAlways:!0}),On("br",{}),On("label",{htmlFor:"bins",className:"col-form-label",children:"Number of bins"})]}),On("br",{})]})}const A9="react-app",hx=document.getElementById(A9),tw=document.createElement("div"),rw=A=>{for(const e of hx.childNodes){const v=e;e.nodeType===1?(console.log(e.nodeType,e),tw.appendChild(v)):e.nodeType===3&&console.log(e.nodeType,e)}h4(hx).render(On(iu.StrictMode,{children:On(vT,{content:()=>tw})})),hx.style.opacity="1.0"};typeof Shiny=="object"?document.body.addEventListener("cori.apps:init",rw):(document.body.childNodes.forEach(A=>"data"in A&&A.data.match(/headContent/)!==null?document.body.removeChild(A):!0),rw());
