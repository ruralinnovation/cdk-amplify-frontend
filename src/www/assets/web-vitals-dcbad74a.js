var l,T,Q,L,D,U=-1,p=function(e){addEventListener("pageshow",function(t){t.persisted&&(U=t.timeStamp,e(t))},!0)},M=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},b=function(){var e=M();return e&&e.activationStart||0},v=function(e,t){var n=M(),a="navigate";return U>=0?a="back-forward-cache":n&&(document.prerendering||b()>0?a="prerender":document.wasDiscarded?a="restore":n.type&&(a=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:a}},h=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var a=new PerformanceObserver(function(r){Promise.resolve().then(function(){t(r.getEntries())})});return a.observe(Object.assign({type:e,buffered:!0},n||{})),a}}catch{}},f=function(e,t,n,a){var r,i;return function(c){t.value>=0&&(c||a)&&((i=t.value-(r||0))||r===void 0)&&(r=t.value,t.delta=i,t.rating=function(u,o){return u>o[1]?"poor":u>o[0]?"needs-improvement":"good"}(t.value,n),e(t))}},k=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},w=function(e){var t=function(n){n.type!=="pagehide"&&document.visibilityState!=="hidden"||e(n)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},B=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},m=-1,N=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},S=function(e){document.visibilityState==="hidden"&&m>-1&&(m=e.type==="visibilitychange"?e.timeStamp:0,$())},R=function(){addEventListener("visibilitychange",S,!0),addEventListener("prerenderingchange",S,!0)},$=function(){removeEventListener("visibilitychange",S,!0),removeEventListener("prerenderingchange",S,!0)},x=function(){return m<0&&(m=N(),R(),p(function(){setTimeout(function(){m=N(),R()},0)})),{get firstHiddenTime(){return m}}},y=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},H=[1800,3e3],tt=function(e,t){t=t||{},y(function(){var n,a=x(),r=v("FCP"),i=h("paint",function(c){c.forEach(function(u){u.name==="first-contentful-paint"&&(i.disconnect(),u.startTime<a.firstHiddenTime&&(r.value=Math.max(u.startTime-b(),0),r.entries.push(u),n(!0)))})});i&&(n=f(e,r,H,t.reportAllChanges),p(function(c){r=v("FCP"),n=f(e,r,H,t.reportAllChanges),k(function(){r.value=performance.now()-c.timeStamp,n(!0)})}))})},O=[.1,.25],ot=function(e,t){t=t||{},tt(B(function(){var n,a=v("CLS",0),r=0,i=[],c=function(o){o.forEach(function(s){if(!s.hadRecentInput){var P=i[0],C=i[i.length-1];r&&s.startTime-C.startTime<1e3&&s.startTime-P.startTime<5e3?(r+=s.value,i.push(s)):(r=s.value,i=[s])}}),r>a.value&&(a.value=r,a.entries=i,n())},u=h("layout-shift",c);u&&(n=f(e,a,O,t.reportAllChanges),w(function(){c(u.takeRecords()),n(!0)}),p(function(){r=0,a=v("CLS",0),n=f(e,a,O,t.reportAllChanges),k(function(){return n()})}),setTimeout(n,0))}))},g={passive:!0,capture:!0},et=new Date,q=function(e,t){l||(l=t,T=e,Q=new Date,W(removeEventListener),V())},V=function(){if(T>=0&&T<Q-et){var e={entryType:"first-input",name:l.type,target:l.target,cancelable:l.cancelable,startTime:l.timeStamp,processingStart:l.timeStamp+T};L.forEach(function(t){t(e)}),L=[]}},nt=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(n,a){var r=function(){q(n,a),c()},i=function(){c()},c=function(){removeEventListener("pointerup",r,g),removeEventListener("pointercancel",i,g)};addEventListener("pointerup",r,g),addEventListener("pointercancel",i,g)}(t,e):q(t,e)}},W=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,nt,g)})},j=[100,300],ut=function(e,t){t=t||{},y(function(){var n,a=x(),r=v("FID"),i=function(o){o.startTime<a.firstHiddenTime&&(r.value=o.processingStart-o.startTime,r.entries.push(o),n(!0))},c=function(o){o.forEach(i)},u=h("first-input",c);n=f(e,r,j,t.reportAllChanges),u&&w(B(function(){c(u.takeRecords()),u.disconnect()})),u&&p(function(){var o;r=v("FID"),n=f(e,r,j,t.reportAllChanges),L=[],T=-1,l=null,W(addEventListener),o=i,L.push(o),V()})})},X=0,F=1/0,E=0,rt=function(e){e.forEach(function(t){t.interactionId&&(F=Math.min(F,t.interactionId),E=Math.max(E,t.interactionId),X=E?(E-F)/7+1:0)})},Y=function(){return D?X:performance.interactionCount||0},at=function(){"interactionCount"in performance||D||(D=h("event",rt,{type:"event",buffered:!0,durationThreshold:0}))},_=[200,500],Z=0,z=function(){return Y()-Z},d=[],I={},G=function(e){var t=d[d.length-1],n=I[e.interactionId];if(n||d.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var a={id:e.interactionId,latency:e.duration,entries:[e]};I[a.id]=a,d.push(a)}d.sort(function(r,i){return i.latency-r.latency}),d.splice(10).forEach(function(r){delete I[r.id]})}},ct=function(e,t){t=t||{},y(function(){at();var n,a=v("INP"),r=function(c){c.forEach(function(s){s.interactionId&&G(s),s.entryType==="first-input"&&!d.some(function(P){return P.entries.some(function(C){return s.duration===C.duration&&s.startTime===C.startTime})})&&G(s)});var u,o=(u=Math.min(d.length-1,Math.floor(z()/50)),d[u]);o&&o.latency!==a.value&&(a.value=o.latency,a.entries=o.entries,n())},i=h("event",r,{durationThreshold:t.durationThreshold||40});n=f(e,a,_,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),w(function(){r(i.takeRecords()),a.value<0&&z()>0&&(a.value=0,a.entries=[]),n(!0)}),p(function(){d=[],Z=Y(),a=v("INP"),n=f(e,a,_,t.reportAllChanges)}))})},J=[2500,4e3],A={},st=function(e,t){t=t||{},y(function(){var n,a=x(),r=v("LCP"),i=function(o){var s=o[o.length-1];s&&s.startTime<a.firstHiddenTime&&(r.value=Math.max(s.startTime-b(),0),r.entries=[s],n())},c=h("largest-contentful-paint",i);if(c){n=f(e,r,J,t.reportAllChanges);var u=B(function(){A[r.id]||(i(c.takeRecords()),c.disconnect(),A[r.id]=!0,n(!0))});["keydown","click"].forEach(function(o){addEventListener(o,u,!0)}),w(u),p(function(o){r=v("LCP"),n=f(e,r,J,t.reportAllChanges),k(function(){r.value=performance.now()-o.timeStamp,A[r.id]=!0,n(!0)})})}})},K=[800,1800],it=function e(t){document.prerendering?y(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},vt=function(e,t){t=t||{};var n=v("TTFB"),a=f(e,n,K,t.reportAllChanges);it(function(){var r=M();if(r){var i=r.responseStart;if(i<=0||i>performance.now())return;n.value=Math.max(i-b(),0),n.entries=[r],a(!0),p(function(){n=v("TTFB",0),(a=f(e,n,K,t.reportAllChanges))(!0)})}})};export{O as CLSThresholds,H as FCPThresholds,j as FIDThresholds,_ as INPThresholds,J as LCPThresholds,K as TTFBThresholds,ot as getCLS,tt as getFCP,ut as getFID,ct as getINP,st as getLCP,vt as getTTFB,ot as onCLS,tt as onFCP,ut as onFID,ct as onINP,st as onLCP,vt as onTTFB};
